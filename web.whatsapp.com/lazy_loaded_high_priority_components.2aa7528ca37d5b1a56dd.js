/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7205],{621733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n;if(e.size!==t.size)return!1;for(const[a,o]of e)if(n=t.get(a),n!==o||void 0===n&&!t.has(a))return!1;return!0}},600145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupProfilePictureWamEvent=void 0;var a=n(901032),o=n(130756);const{BOOLEAN:i,STRING:l}=a.TYPES,s=(0,a.defineEvents)({GroupProfilePicture:[3652,{groupCreationDs:[1,l],groupProfileAction:[7,o.GROUP_PROFILE_ACTION_TYPE],hasProfilePicture:[3,i],isAdmin:[4,i],preciseGroupSizeBucket:[5,o.PRECISE_SIZE_BUCKET],profilePictureType:[6,o.PROFILE_PICTURE_TYPE]},[1,1,1],"regular"]});t.GroupProfilePictureWamEvent=s},894629:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,h.useModelValues)(e.chat,["id","isNewsletter","newsletterMetadata"]),n=(0,h.useOptionalModelValues)(t.newsletterMetadata,["description","creationTime","membershipType"]),a=(0,p.default)(n,["change:description"],(()=>(null==n?void 0:n.description)||"")),i=(0,f.useCallback)(function(){var e=(0,o.default)((function*(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";yield g(t,e)}));return function(){return e.apply(this,arguments)}}(),[t]);if(null==n)return null;const r=u.fbt._("Add channel description",null,{hk:"4cBfrw"}),{creationTime:d}=n,x=null!=d?s.Clock.createdStr(n.creationTime):null;return(0,m.jsx)(l.default,{description:a,bulletPointsEnabled:!1,chat:e.chat,showFullDescription:!1,editRestrictionText:u.fbt._("Only admins can edit this channel's info",null,{hk:"Z6ACg"}),testid:"newsletter-info-drawer-description-title-input",containerTestId:"newsletter-info-drawer-description-container",emptyValuePlaceholder:r,creationString:x,canSetDescription:(0,c.iAmOwner)(n),setDescriptionAction:i})};var o=a(n(348926)),i=n(328620),l=a(n(711367)),s=n(63014),r=n(172365),c=n(751460),d=n(390737),u=n(548360),f=n(667294),p=a(n(524578)),h=n(655241),m=n(785893);function g(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.genId)();const o=(0,r.editNewsletterMetadataAction)(e,{editDescription:!0},{description:n}),l=null===(t=e.newsletterMetadata)||void 0===t?void 0:t.description,s=new i.ActionType(u.fbt._("Changing channel description",null,{hk:"3QNpiW"})),c=o.then((()=>new i.ActionType(u.fbt._("Channel description changed",null,{hk:"ATEd7"}),{actionText:u.fbt._("Undo",null,{hk:"3r3mP7"}),actionHandler:()=>g(e,l,a)}))).catch((()=>(__LOG__(3)`channel:handleEditDescription dropped`,new i.ActionType(u.fbt._("Channel description changed failed",null,{hk:"1We4xJ"}),{actionText:u.fbt._("Try again",null,{hk:"3qJDe7"}),actionHandler:()=>g(e,n,a)}))));return d.ToastManager.open((0,m.jsx)(i.ActionToast,{id:a,initialAction:s,pendingAction:c})),o}},751046:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(36409),i=a(n(306007)),l=n(464659),s=n(949359),r=n(136858),c=a(n(908081)),d=a(n(324093)),u=n(626194),f=n(114850),p=a(n(832897)),h=a(n(894629)),m=a(n(683023)),g=a(n(664531)),x=n(751460),v=n(78079),b=n(620973),C=n(349372),j=n(617058),M=a(n(634152)),_=n(163139),y=n(220584),S=n(382117),k=n(676345),P=n(130756),w=n(818674),T=n(609392),I=n(851488),E=n(548360),A=n(667294),N=a(n(156720)),O=a(n(524578)),R=a(n(637660)),D=a(n(321201)),L=n(785893);const B={flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function G(e,t){const{chat:n,newsletterMetadata:a,onClose:G,onDeleteNewsletter:F,onAdminCenter:V}=e,H=(0,D.default)(),U=(0,O.default)(a,["change:suspended"],(()=>!0===(null==a?void 0:a.suspended))),W=(0,O.default)(a,["change:canBeMuted"],(()=>Boolean(null==a?void 0:a.canBeMuted)&&!U)),Y=(0,v.useHasNewsletterMessageUpdates)(n),q=(0,R.default)((()=>new S.UiActionWamEvent({uiActionType:P.UI_ACTION_TYPE.CHANNEL_INFO_OPEN,uiActionPreloaded:!0}))),z=U?null:(0,L.jsx)(h.default,{chat:n}),K=W?(0,L.jsx)(l.ChatInfoDrawerSection,{xstyle:k.uiMargin.top10,children:(0,L.jsx)(p.default,{chat:n,mute:n.mute,settings:M.default})}):null,X=(0,x.iAmOwner)(a)||(0,x.iAmAdmin)(a),Z=(0,A.useCallback)((()=>{f.ModalManager.open((0,L.jsx)(b.NewsletterPhoneNumberNux,{}))}),[]),J=(0,A.useCallback)((()=>{X?f.ModalManager.open((0,L.jsx)(j.NewsletterPublicChannelPrivacyNux,{})):Z()}),[X,Z]),Q=(0,L.jsxs)(l.ChatInfoDrawerSection,{xstyle:k.uiMargin.top10,children:[(0,L.jsx)(C.NewsletterPrivacyRow,{onClick:J,title:E.fbt._("Public channel",null,{hk:"1a60HF"}),text:X?E.fbt._("What you share is visible to anyone, but your phone number isn't. Click to learn more.",null,{hk:"4auNa3"}):E.fbt._("Anyone can find this channel and see what's been shared.",null,{hk:"1T1Xsg"}),icon:(0,L.jsx)(o.BusinessWebsiteIcon,{color:y.SvgColorProp.SECONDARY,height:20})}),!X&&(0,L.jsx)(C.NewsletterPrivacyRow,{onClick:Z,title:E.fbt._("Profile privacy",null,{hk:"fHnmE"}),text:(0,s.getNewsletterProfilePrivacyText)(),icon:(0,L.jsx)(r.DialpadIcon,{color:y.SvgColorProp.SECONDARY,height:20})})]}),$=(0,L.jsx)(g.default,{xstyle:k.uiMargin.top10,chat:e.chat,onDeleteNewsletter:F}),ee=Y?(0,L.jsx)(l.ChatInfoDrawerSection,{xstyle:k.uiMargin.top10,children:(0,L.jsx)(i.default,{testid:"newsletter-info-admin-center-row",icon:(0,L.jsx)(T.WarningIcon,{color:y.SvgColorProp.SECONDARY,height:16}),onClick:V,title:(0,L.jsx)(I.WDSTextTitle,{children:E.fbt._("Admin Center",null,{hk:"ygbJZ"})})})}):null;return(0,A.useEffect)((()=>{const e=q.current;e&&(e.markUiActionT(),e.commit(),q.current=void 0),(0,w.logUiActionShadowPrivateStatsTestEvents)()}),[]),(0,L.jsxs)(c.default,{ref:t,theme:"striped",testid:"chat-info-drawer",children:[(0,L.jsx)(u.DrawerHeader,{title:E.fbt._("Channel info",null,{hk:"2MU3nu"}),type:u.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{G?G():null==H||H.requestDismiss()},testid:"newsletter-info-header"}),(0,L.jsx)(d.default,{children:(0,L.jsxs)("section",{className:(0,N.default)(B),"data-testid":"group-info-drawer-body",children:[(0,L.jsx)(m.default,{chat:(0,_.unproxy)(n)}),z,ee,K,Q,$]})})]},"newsletter-info-modal")}var F=(0,A.forwardRef)(G);t.default=F},501624:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,xstyle:n,readOnly:a}=e,[o,i]=(0,d.useState)(!1),r=(0,f.useModelValues)(t.contact,["id","profilePicThumb"]),c=(0,f.useModelValues)(t.contact.profilePicThumb,["imgFull"]),m=(0,d.useCallback)(((e,n)=>{i(!0),h(t,n).finally((()=>{i(!1)}))}),[t]);return(0,p.jsx)("div",{className:(0,u.default)(n),children:(0,p.jsx)(s.PhotoPickerLoadable,{type:l.PhotoPickerType.NEWSLETTER,id:r.id,attachToChat:!0,startImage:c.imgFull,readOnly:a,onImageSet:m,pending:o})})};var o=n(328620),i=n(172365),l=n(588792),s=n(511696),r=n(390737),c=n(548360),d=n(667294),u=a(n(156720)),f=n(655241),p=n(785893);function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.genId)();const a=(0,i.editNewsletterMetadataAction)(e,{editPicture:!0},{picture:null!=t?t:null}),l=new o.ActionType(null!=t?c.fbt._("Setting channel icon",null,{hk:"3qGzgv"}):c.fbt._("Removing channel icon",null,{hk:"3KXsMC"})),s=a.then((()=>new o.ActionType(null!=t?c.fbt._("Channel icon set",null,{hk:"M0iEh"}):c.fbt._("Channel icon removed",null,{hk:"31cA0l"})))).catch((()=>(__LOG__(3)`newsletter:handleEditPhoto dropped`,new o.ActionType(null!=t?c.fbt._("Couldn't set channel icon",null,{hk:"GsVmy"}):c.fbt._("Couldn't remove channel icon",null,{hk:"2pGDJs"}),{actionText:c.fbt._("Try again",null,{hk:"3qJDe7"}),actionHandler:()=>h(e,t,n)}))));return r.ToastManager.open((0,p.jsx)(o.ActionToast,{id:n,initialAction:l,pendingAction:s})),a}},988149:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t}=e;const n=(0,v.useOptionalModelValues)(t.newsletterMetadata,["name","membershipType","isSuspendedOrTerminated"]),a=(0,g.useCallback)(function(){var e=(0,o.default)((function*(e){e!==t.formattedTitle&&(yield C(t,e))}));return function(){return e.apply(this,arguments)}}(),[t]);if(null==n)return null;if(!0===n.isSuspendedOrTerminated||!(0,u.iAmOwner)(n))return(0,b.jsx)(f.TextHeader,{className:(0,x.default)(h.uiMargin.vert6),level:"2",theme:"large",children:(0,b.jsx)(d.Name,{chat:t,breakWord:!0})});return(0,b.jsx)(r.default,{subject:t.formattedTitle,onSave:a,editRestrictionInfo:()=>{c.ModalManager.open((0,b.jsx)(l.ConfirmPopup,{onOK:()=>c.ModalManager.close(),okText:m.fbt._("OK",null,{hk:"4oTrfy"}),children:m.fbt._("Only admins can edit this channel's info",null,{hk:"Z6ACg"})}))},editable:!0,emptyErrorMessage:m.fbt._("Channel name can't be empty",null,{hk:"2ep6gS"})})};var o=a(n(348926)),i=n(328620),l=n(103440),s=n(172365),r=a(n(559719)),c=n(114850),d=n(21645),u=n(751460),f=n(180519),p=n(390737),h=n(676345),m=n(548360),g=n(667294),x=a(n(156720)),v=n(655241),b=n(785893);function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.genId)();const a=(0,s.editNewsletterMetadataAction)(e,{editName:!0},{name:t}),o=e.name,l=new i.ActionType(m.fbt._("Renaming channel",null,{hk:"3xRXjW"})),r=a.then((()=>new i.ActionType(m.fbt._("Channel renamed to {name}",[m.fbt._param("name",t)],{hk:"JAzRN"}),{actionText:m.fbt._("Undo",null,{hk:"3r3mP7"}),actionHandler:()=>C(e,o,n)}))).catch((()=>(__LOG__(3)`newsletter:handleEditSubject dropped`,new i.ActionType(m.fbt._("Couldn't rename channel",null,{hk:"3OWiwP"}),{actionText:m.fbt._("Try again",null,{hk:"3qJDe7"}),actionHandler:()=>C(e,t,n)}))));return p.ToastManager.open((0,b.jsx)(i.ActionToast,{id:n,initialAction:l,pendingAction:r})),a}},683023:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,N.useOptionalModelValues)(e.chat.newsletterMetadata,["size","privacy","terminated","isSuspendedOrTerminated","membershipType","inviteCode"]);let n=(null==t?void 0:t.privacy)===b.NewsletterPrivacy.Private?I.fbt._("Private Channel",null,{hk:"4eaPAs"}):I.fbt._("Channel",null,{hk:"26BY5U"});(null==t?void 0:t.terminated)&&(n=I.fbt._("Deleted channel",null,{hk:"3S2eSl"}));const a=null!=(null==t?void 0:t.size)?(0,s.getNewsletterFollowersText)(t.size):null;return(0,O.jsxs)(d.default,{theme:"padding-large",children:[(0,O.jsxs)(u.FlexColumn,{align:"center",children:[(0,O.jsx)(g.default,{chat:e.chat,xstyle:P.uiMargin.bottom7,readOnly:!0===(null==t?void 0:t.isSuspendedOrTerminated)||!(0,v.iAmOwner)(t)}),(0,O.jsx)(x.default,{chat:e.chat}),(0,O.jsx)("div",{"data-testid":"newsletter-info-top-card-subtitle",className:(0,A.default)(R.newsletterSecondary),children:(0,O.jsx)(r.SelectableSpan,{dir:"auto",selectable:!0,children:(0,O.jsxs)(y.TextSpan,{size:"16",color:"secondary",children:[n,(null==t?void 0:t.isSuspendedOrTerminated)?null:(0,O.jsxs)(O.Fragment,{children:[p.default.isRTL()?" - ":" · ",a]})]})})})]}),(null==t?void 0:t.isSuspendedOrTerminated)?null:(0,O.jsx)(D,{chat:e.chat})]})};var o=a(n(348926)),i=n(28199),l=n(969579),s=n(949359),r=n(306703),c=n(985714),d=a(n(969358)),u=n(690495),f=n(525110),p=a(n(932325)),h=n(972989),m=n(114850),g=a(n(501624)),x=a(n(988149)),v=n(751460),b=n(705080),C=n(405473),j=a(n(210002)),M=n(956113),_=n(163139),y=n(180519),S=n(625786),k=n(390737),P=n(676345),w=n(106645),T=a(n(625903)),I=n(548360),E=n(667294),A=a(n(156720)),N=n(655241),O=n(785893);const R={newsletterSecondary:{lineHeight:"a4ywakfo",marginTop:"ma4rpf0l",textAlign:"qfejxiq4"},actionIcon:{color:"fsk8o631"},infoAction:{flexGrow:"ggj6brxn",color:"fsk8o631",fontWeight:"hnx8ox4h"},spinner:{stroke:"mqe5ufcr"},infoActionBtn:{fontSize:"ovllcyds",minWidth:"pwaghgrf"}};function D(e){let{chat:t}=e;const[n,a]=(0,E.useState)(!1),s=(0,N.useOptionalModelValues)(t.newsletterMetadata,["membershipType","inviteCode"]),r=t.formattedTitle,{inviteCode:d}=s||{},p=null!=d?`https://whatsapp.com/channel/${d}`:null,g=(0,E.useCallback)((()=>{if(null==p)return;const e=I.fbt._("Follow the {newsletter_name} channel on WhatsApp: {link}",[I.fbt._param("newsletter_name",r),I.fbt._param("link",p)],{hk:"2JUBPH"}),t=I.fbt._("",null,{hk:"rzrsn"});m.ModalManager.open((0,O.jsx)(j.default,{title:t.toString(),text:e.toString()}),{transition:"modal-flow"})}),[r,p]),x=(0,E.useCallback)((()=>{if(null==p)return;(0,c.copyTextToClipboard)(p)?k.ToastManager.open((0,O.jsx)(S.Toast,{msg:I.fbt._("Link copied to clipboard.",null,{hk:"24K2ka"})})):k.ToastManager.open((0,O.jsx)(S.Toast,{msg:I.fbt._("Couldn't copy to clipboard.",null,{hk:"2JI7CO"})}))}),[p]),b=(0,E.useCallback)((0,o.default)((function*(){a(!0),yield(0,C.subscribeToNewsletter)((0,_.unproxy)(t)),a(!1)})),[t]),y=(0,E.useCallback)((()=>{m.ModalManager.open((0,O.jsx)(w.UnfollowNewsletterConfirmationModal,{chat:t}))}),[t]),A=[];return(0,v.iAmGuest)(s)?A.push({Icon:i.AddAltIcon,onClick:b,testid:"newsletter-info-follow-action",title:I.fbt._("Follow",null,{hk:"1MHfKq"}),isLoading:n}):(0,v.iAmSubscriber)(s)&&A.push({Icon:l.CheckmarkIcon,onClick:y,testid:"newsletter-info-unfollow-action",title:I.fbt._("Unfollow",null,{hk:"3rYypx"}),isLoading:!1}),null!=d&&(A.push({Icon:f.ForwardIcon,onClick:g,testid:"newsletter-info-invite-action",title:I.fbt._("Forward",null,{hk:"46L1pk"}),isLoading:!1}),document.queryCommandSupported("copy")&&A.push({Icon:h.LinkIcon,onClick:x,testid:"newsletter-info-copy-link-action",title:I.fbt._("Copy link",null,{hk:"3jv6Pn"}),isLoading:!1})),(0,O.jsx)(u.FlexRow,{justify:"center",align:"center",xstyle:[P.uiMargin.top25,P.uiMargin.bottom10],children:A.map(((e,t)=>{let{testid:a,Icon:o,onClick:i,title:l,isLoading:s}=e;return(0,O.jsx)(T.default,{"aria-label":l,testid:a,onClick:i,xstyle:R.infoActionBtn,disabled:n,children:(0,O.jsxs)(u.FlexColumn,{align:"center",xstyle:[R.infoAction,P.uiPadding.horiz15],children:[s?(0,O.jsx)(M.Spinner,{color:R.spinner,size:32,xstyle:P.uiMargin.bottom15}):(0,O.jsx)(o,{xstyle:[R.actionIcon,P.uiMargin.bottom15],width:32,height:32}),l]})},t)}))})}},664531:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,xstyle:n,onDeleteNewsletter:a}=e;const i=(0,v.jsx)(C,{chat:t}),l=(0,v.jsx)(b,{chat:t}),s=(0,v.jsx)(j,{chat:t,onDeleteNewsletter:a});return(0,v.jsxs)(o.ChatInfoDrawerButtonsSection,{xstyle:n,children:[i,l,s]})};var o=n(464659),i=n(419e3),l=n(36045),s=n(90989),r=n(114850),c=n(73225),d=n(751460),u=a(n(726619)),f=n(453603),p=n(21698),h=n(106645),m=n(548360),g=n(667294),x=n(655241),v=n(785893);function b(e){let{chat:t}=e;const n=(0,x.useOptionalModelValues)(t.newsletterMetadata,["membershipType","suspended","terminated","isSuspendedOrTerminated"]);if((null==n?void 0:n.isSuspendedOrTerminated)||(0,d.iAmOwner)(n)||(0,d.iAmAdmin)(n)||!(0,c.isNewsletterReportingEnabled)())return null;const a=m.fbt._("",null,{hk:"2JTAk8"});return(0,v.jsx)(l.DrawerButton,{testid:"newsletter-integrity-report-button",icon:(0,v.jsx)(p.ThumbsDownIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:()=>{r.ModalManager.open((0,v.jsx)(u.default,{chat:t,spamFlow:f.SpamFlow.NewsletterInfoReport}))},children:a})}function C(e){let{chat:t}=e;const n=(0,x.useOptionalModelValues)(t.newsletterMetadata,["membershipType"]),a=m.fbt._("Unfollow",null,{hk:"3NYOtp"}),o=(0,g.useCallback)((()=>{r.ModalManager.open((0,v.jsx)(h.UnfollowNewsletterConfirmationModal,{chat:t}))}),[t]);return(0,d.iAmSubscriber)(n)?(0,v.jsx)(l.DrawerButton,{testid:"li-unfollow-newsletter",icon:(0,v.jsx)(s.ExitIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:o,children:a}):null}function j(e){let{chat:t,onDeleteNewsletter:n}=e;const a=(0,x.useOptionalModelValues)(t.newsletterMetadata,["membershipType"]),o=m.fbt._("Delete channel",null,{hk:"2PQtz4"});return(0,d.iAmOwner)(a)?(0,v.jsx)(l.DrawerButton,{testid:"li-delete-newsletter",icon:(0,v.jsx)(i.DeleteIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:n,children:o}):null}},617058:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterPublicChannelPrivacyNux=function(){const e=m.fbt._("About this channel",null,{hk:"3Ig3Nc"}),t=(0,x.jsx)(i.SelectableLink,{className:(0,g.default)(v),id:"data-sharing-learn-more-link",selectable:!0,onClick:()=>(0,l.openExternalLink)((0,s.getNewsletterGuidelinesFaqUrl)()),children:m.fbt._("guidelines",null,{hk:"vpHHG"})}),n=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.NewsletterPrivacyRow,{icon:(0,x.jsx)(o.BusinessWebsiteIcon,{color:f.SvgColorProp.TEAL,height:20}),title:m.fbt._("Anyone can discover your channel",null,{hk:"3Mv6pP"}),text:m.fbt._("Channels are public, so anyone can find them and see 30 days of history.",null,{hk:"1e8ufO"})}),(0,x.jsx)(c.NewsletterPrivacyRow,{icon:(0,x.jsx)(h.VisibilityOffIcon,{color:f.SvgColorProp.TEAL,height:20}),title:m.fbt._("People see your channel, not you",null,{hk:"LlDn3"}),text:m.fbt._("Your phone number, profile picture and name aren't shown to followers.",null,{hk:"21oJXn"})}),(0,x.jsx)(c.NewsletterPrivacyRow,{icon:(0,x.jsx)(u.SecurityShieldIcon,{color:f.SvgColorProp.TEAL,height:20}),title:m.fbt._("You're responsible for your channel",null,{hk:"2daxA5"}),text:m.fbt._("Your channel needs to follow our {guidelines_link} and is reviewed against them.",[m.fbt._param("guidelines_link",t)],{hk:"1O1H5q"})})]});return(0,x.jsx)(d.PhoneNumberPrivacyNux,{testid:"public_channel__newsletter",onOK:()=>r.ModalManager.close(),okText:m.fbt._("Ok",null,{hk:"RJ838"}),onCancel:()=>(0,l.openExternalLink)((0,s.getNewsletterPrivacyFaqUrl)()),cancelText:m.fbt._("Learn more",null,{hk:"1L9NkE"}),displayName:(0,p.getMeDisplayName)(),title:e,customContent:n})};var o=n(36409),i=n(306703),l=n(753233),s=n(258105),r=n(114850),c=n(349372),d=n(14509),u=n(321566),f=n(220584),p=n(459857),h=n(700848),m=n(548360),g=a(n(156720)),x=n(785893);const v={cursor:"ajgl1lbb"}},172365:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.editNewsletterMetadataAction=function(){return c.apply(this,arguments)};var o=a(n(348926)),i=n(418987),l=n(787671),s=n(14291),r=n(126592);function c(){return(c=(0,o.default)((function*(e,t,n){if(!e.isNewsletter)return __LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletters][editNewsletterMetadataAction] called with a non-newsletter chat`,void SEND_LOGS("edit-metadata-action-not-a-newsletter",1,"newsletter");const a=(0,i.toNewsletterJid)(e.id.toJid());try{const e=yield(0,l.editNewsletterMetadata)(a,t,n);if(null==e)return;const{chat:o,metadata:i,pic:c}=(0,s.mapNewsletterToModels)(e);yield(0,r.updateCollections)({chats:[o],metadata:[i],pics:[c]})}catch(e){throw __LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletter][editNewsletterMetadataAction] Failed to edit newsletter metadata`,SEND_LOGS("edit-metadata-action-failed",1,"newsletter"),e}}))).apply(this,arguments)}},371125:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPackId:t,onStickerPackView:n,stickerPackViewDelay:a,sticker:g}=e,x=function(e){(0,p.useEffect)((()=>{e&&u.StickerPackCollectionMd.fetchStickerPack(e)}),[e]);return(0,h.default)(u.StickerPackCollectionMd,"add remove reset",(()=>null!=e?u.StickerPackCollectionMd.get(e):null))}(t);let v;if(t){const e=e=>{e.stopPropagation(),n&&n(),null!=a?self.setTimeout((()=>i.Cmd.openStickerPack(t)),a+150):i.Cmd.openStickerPack(t)};(0,c.isFavoriteStickersEnabled)()?null!=g&&(v=(0,m.jsxs)(r.FlexRow,{children:[(0,m.jsx)(o.default,{onClick:e,type:"secondary",children:f.fbt._("View Pack",null,{hk:"tAlU3"})}),s.default.get(g.filehash)?(0,m.jsx)(o.default,{onClick:()=>(0,l.removeStickerFromFavorites)(g),type:"secondary",children:f.fbt._("Remove From Favorites",null,{hk:"3YoUkP"})}):(0,m.jsx)(o.default,{onClick:()=>(0,l.addStickerToFavorites)(g),type:"secondary",children:f.fbt._("Add to Favorites",null,{hk:"3x4EBo"})})]})):v=(0,m.jsx)(o.default,{onClick:e,type:"secondary",children:f.fbt._("View Pack",null,{hk:"tAlU3"})})}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.StickerDetailsStickerPackInfo,{name:null==x?void 0:x.name,publisher:null==x?void 0:x.publisher,theme:d.Theme.MediaViewer}),v]})};var o=a(n(692629)),i=n(780549),l=n(225446),s=a(n(788788)),r=n(690495),c=n(97858),d=n(438543),u=n(425192),f=n(548360),p=n(667294),h=a(n(524578)),m=n(785893)},120236:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(348926)),i=n(637842),l=n(778945),s=n(87630),r=a(n(908081)),c=a(n(324093)),d=n(626194),u=a(n(329982)),f=n(548360),p=n(667294),h=n(785893);class m extends u.default{componentDidMount(){this.push((0,h.jsx)(g,{contactId:this.props.contactId,onClose:this.pop}))}}t.default=m;const g=(0,p.forwardRef)(((e,t)=>{const{contactId:n}=e,[a,u]=(0,p.useState)(void 0),[m,g]=(0,p.useState)(!0);(0,p.useEffect)((()=>{(function(){var e=(0,o.default)((function*(){const e=yield l.BusinessProfileCollection.update(n,{getMerchantCompliance:!0}),t=(Array.isArray(e)?e[0]:e).serialize();t?(u(t.legalEntityDetails||void 0),g(!1)):__LOG__(3)`compliance: cannot fetch business details (${n.toString()})`}));return function(){return e.apply(this,arguments)}})()()}),[]);const{entityName:x,customerCareDetails:v,grievanceOfficerDetails:b}=null!=a?a:{},C=(0,i.getEntityTypeText)(a);return(0,h.jsxs)(r.default,{ref:t,theme:"striped",children:[(0,h.jsx)(d.DrawerHeader,{title:f.fbt._("Business details",null,{hk:"m9xzp"}),type:d.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,h.jsx)(c.default,{theme:m?"center-content":void 0,children:m?(0,h.jsx)(s.ComplianceInfoLoading,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(s.ComplianceInfoGroup,{children:[(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:x,label:f.fbt._("Legal Name of Business",null,{hk:"2s9jD"})}),(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:C,label:f.fbt._("Business Type",null,{hk:"48J73B"})})]}),(0,h.jsxs)(s.ComplianceInfoGroup,{title:f.fbt._("Customer Care Information",null,{hk:"qlYos"}),children:[(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.mobileNumber,label:f.fbt._("Mobile Phone Number",null,{hk:"PMTTg"}),forceLTR:!0}),(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.landlineNumber,label:f.fbt._("Landline Phone Number",null,{hk:"tXYaf"}),forceLTR:!0}),(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==v?void 0:v.email,label:f.fbt._("Email Address",null,{hk:"2jYxR1"})})]}),(0,h.jsxs)(s.ComplianceInfoGroup,{title:f.fbt._("Grievance Officer Information",null,{hk:"3emd7I"}),children:[(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.name,label:f.fbt._("Name",null,{hk:"2vEs6r"})}),(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.mobileNumber,label:f.fbt._("Mobile Phone Number",null,{hk:"3kk5I"}),forceLTR:!0}),(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.landlineNumber,label:f.fbt._("Landline Phone Number",null,{hk:"4GBzF0"})}),(0,h.jsx)(s.ComplianceInfoPrimitiveField,{value:null==b?void 0:b.email,label:f.fbt._("Email Address",null,{hk:"3SvbLl"})})]})]})})]},"merchant-details-modal")}));g.displayName="MerchantDetails"},517729:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const[n,a]=(0,j.useContactValues)(t.id,[c.getVerifiedLevel,c.getVerifiedName]),_=(0,f.getBusinessFaqUrl)(),y=!r.Conn.isSMB;(0,C.useEffect)((()=>{y&&new o.BannerEventWamEvent({bannerType:x.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.BANNER_OPERATIONS.SHOWN}).commit()}),[y]);const S=n===i.VERIFIED_LEVEL.HIGH?p.default.t(777,{businessName:a}):b.fbt._("This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.",null,{hk:"82W5f"});return(0,M.jsxs)(s.ConfirmPopup,{title:b.fbt._("About WhatsApp Business",null,{hk:"3XF5gx"}),onOK:()=>{h.ModalManager.close(),y&&new o.BannerEventWamEvent({bannerType:x.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.BANNER_OPERATIONS.DISMISS}).commit()},okText:b.fbt._("OK",null,{hk:"4oTrfy"}),children:[(0,M.jsx)(d.EmojiText,{text:S})," ",(0,M.jsx)(l.default,{href:_,onClick:e=>{e.preventDefault(),h.ModalManager.close(),self.setTimeout((()=>(0,u.openExternalLink)(_)),10)},children:p.default.t(393)}),y&&(0,M.jsx)("div",{className:v.default.footerNote,children:(0,M.jsxs)(g.TextSpan,{theme:"muted",size:"13",children:[b.fbt._("If you're a business, the free WhatsApp Business app can help.",null,{hk:"14W7ur"}),(0,M.jsx)("br",{}),(0,M.jsx)(l.default,{onClick:e=>{e.preventDefault(),h.ModalManager.close(),new o.BannerEventWamEvent({bannerType:x.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:x.BANNER_OPERATIONS.CLICK}).commit(),self.setTimeout((()=>h.ModalManager.open((0,M.jsx)(m.SmbAppUpsellModal,{}))),200)},className:v.default.getTheAppLink,children:b.fbt._("Learn about getting the app",null,{hk:"3ncguo"})})]})})]})};var o=n(240045),i=n(817649),l=a(n(196554)),s=n(103440),r=n(445729),c=n(660666),d=n(305521),u=n(753233),f=n(258105),p=a(n(932325)),h=n(114850),m=n(945270),g=n(180519),x=n(130756),v=a(n(986458)),b=n(548360),C=n(667294),j=n(379811),M=n(785893)},945270:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SmbAppUpsellModal=function(){return(0,h.jsxs)(l.ConfirmPopup,{title:p.fbt._("WhatsApp Business app",null,{hk:"4BfvOl"}),onOK:()=>{new o.BannerEventWamEvent({bannerType:f.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:f.BANNER_OPERATIONS.DISMISS}).commit(),d.ModalManager.close()},okText:p.fbt._("Close",null,{hk:"19Jpec"}),children:[(0,h.jsx)(u.default,{}),(0,h.jsx)("p",{children:(0,h.jsx)(s.EmojiText,{text:p.fbt._("If you're a business, you can benefit from switching to the free WhatsApp Business app. It has tools to connect with customers and manage messages.",null,{hk:"2SAIXH"})})}),(0,h.jsx)("br",{}),(0,h.jsxs)("p",{children:[(0,h.jsx)(s.EmojiText,{text:p.fbt._("Scan this code to get the WhatsApp Business App. Or, you can install it from the App Store or Google Play Store.",null,{hk:"2840mD"})})," ",(0,h.jsx)(i.default,{href:m,onClick:e=>{e.preventDefault(),d.ModalManager.close(),self.setTimeout((()=>(0,r.openExternalLink)(m)),10)},children:c.default.t(393)})]})]})},t.WHATSAPP_BUSINESS_URL=void 0;var o=n(240045),i=a(n(196554)),l=n(103440),s=n(305521),r=n(753233),c=a(n(932325)),d=n(114850),u=a(n(345257)),f=n(130756),p=n(548360),h=n(785893);const m="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=m},345257:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,c.useRef)(null),t=(0,c.useRef)(null),{theme:n}=(0,c.useContext)(s.ThemeContext),a="dark"===n;return(0,c.useEffect)((()=>(null!=e.current&&(t.current=new o.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:l.QR_EDGE/2,height:l.QR_EDGE/2,typeNumber:4,correctLevel:o.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[a]),(0,d.jsx)("div",{className:r.default.wrapper,children:(0,d.jsx)("div",{ref:e,className:(0,i.cx)({[r.default.codeDarkMode]:a,[r.default.code]:!0}),children:(0,d.jsx)(u,{theme:n})})})};var o=a(n(478e3)),i=n(752253),l=n(914368),s=n(667738),r=a(n(750478)),c=n(667294),d=n(785893);function u(){return(0,d.jsx)("div",{className:r.default.codeLogo,children:(0,d.jsx)("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})})})}},321574:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{docMsgs:t,chat:n,isFilterEnabled:a=!1,filterText:x}=e,v=(0,i.default)(e,g),b=(0,h.default)(),C=(0,f.default)((()=>new d.default((e=>{const t=[],n=(0,l.getText)(e);null!=n&&t.push(n);const a=e.mediaData.filename;return t.push(a),t.join(" ")}))));(0,p.useListener)(t,"add",(e=>{a&&C.current.cacheMessageTokens(e)})),(0,p.useListener)(t,"remove",(e=>{a&&C.current.removeMessageTokensFromCache(e)})),(0,p.useListener)(t,"reset",(()=>{a&&C.current.clearTokensCache()})),(0,u.useEffect)((()=>{a&&t.forEach((e=>{C.current.cacheMessageTokens(e)}))}),[t,C,a]);const j=a?(e,t)=>C.current.filter(e,x,t):void 0;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.default,(0,o.default)({testid:"doc-gallery",msgsCollection:t,msgsCollectionUpdateEvents:["add","remove","reset","query_doc_before"],queryCollection:e=>{t.hasDocBefore&&b((()=>{t.queryDocs(n,e)}))},getHasBefore:()=>t.hasDocBefore,getQueryBefore:()=>t.queryDocBefore,emptyText:r.default.t(497),chat:n,filterMessages:j},v)),(0,m.jsx)(s.HistorySyncGalleryPlaceholder,{chat:n})]})};var o=a(n(81109)),i=a(n(506479)),l=n(163755),s=n(217714),r=a(n(932325)),c=a(n(101760)),d=a(n(443461)),u=n(667294),f=a(n(637660)),p=n(808446),h=a(n(940630)),m=n(785893);const g=["docMsgs","chat","isFilterEnabled","filterText"]},671597:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{linkMsgs:t,chat:n,selectedMessages:a,selectable:M,onMessageSelect:_,isFilterEnabled:y=!1,filterText:S}=e,k=(0,b.default)(),P=(0,x.default)((()=>new h.default((e=>(0,s.getText)(e)))));(0,v.useListener)(t,"add",(e=>{y&&P.current.cacheMessageTokens(e)})),(0,v.useListener)(t,"remove",(e=>{P.current.removeMessageTokensFromCache(e)})),(0,v.useListener)(t,"reset",(()=>{y&&P.current.clearTokensCache()})),(0,g.useEffect)((()=>{y&&t.forEach((e=>{P.current.cacheMessageTokens(e)}))}),[t,P,y]),(0,v.useListener)(n.msgs,"add bulk_add",(e=>{if(!e)return;const n=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>((0,p.getLinksFromMsg)(e).length&&n.push(e),Promise.resolve())))).then((()=>{n.length&&t.add(n)}))}));const w=y?(e,t)=>P.current.filter(e,S,t):void 0,{linkMsgs:T,chat:I,filterText:E,isFilterEnabled:A}=e,N=(0,i.default)(e,j);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u.default,(0,o.default)({testid:"link-gallery",msgsCollection:t,msgsCollectionUpdateEvents:["add","remove","reset","query_doc_before"],queryCollection:e=>{t.hasLinkBefore&&k((()=>{t.queryLinks(n,e)}))},getHasBefore:()=>t.hasLinkBefore,getQueryBefore:()=>t.queryLinkBefore,messageElements:(e,t)=>((e,t,n,a,o)=>{const i=[];return e.forEach((e=>{const s=!(0,f.getIsSentByMe)(e)&&(0,f.getIsGroupMsg)(e);let r=null;(0,f.getLinkPreview)(e)&&(r=(0,C.jsx)(m.default,{testid:"link-gallery-msg",msg:e,selectable:n,selectedMessages:o,onMessageSelect:a,displayType:l.DISPLAY_TYPE.GALLERY_LINKS,onClickMsg:t},e.id.toString())),(0,p.getGalleryLinks)(e).forEach(((l,c)=>{l.href===e.matchedText&&null!=r||i.push((0,C.jsx)(d.default,{testid:"link-gallery-msg",msg:e.safe(),link:l,displayAuthor:s,selectable:n,selectedMessages:o,onMessageSelect:a,onClickMsg:t},`${e.id.toString()}-${c}`))})),null!=r&&i.push(r)})),i.reverse(),i})(e,t,M,_,a),emptyText:c.default.t(499),chat:n,filterMessages:w},N)),(0,C.jsx)(r.HistorySyncGalleryPlaceholder,{chat:e.chat})]})};var o=a(n(81109)),i=a(n(506479)),l=n(356097),s=n(163755),r=n(217714),c=a(n(932325)),d=a(n(318787)),u=a(n(101760)),f=n(787742),p=n(44118),h=a(n(443461)),m=a(n(565644)),g=n(667294),x=a(n(637660)),v=n(808446),b=a(n(940630)),C=n(785893);const j=["linkMsgs","chat","filterText","isFilterEnabled"]},318787:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,link:n,displayAuthor:a,selectedMessages:k,onMessageSelect:P,onClickMsg:w,testid:T}=e,[I,E,A,N,O,R,D,L,B,G,F,V]=(0,y.useMsgValues)(e.msg.id,[m.getBody,m.getCaption,c.getDir,m.getId,m.getIsSentByMe,c.getMediaData,m.getType,c.getRtl,c.getSenderObj,m.getStar,c.getAsRevoked,m.getIsKept]),[H,U]=(0,M.useState)(!1),[W,Y]=(0,M.useState)((()=>k.isSelected(t.unsafe())));(0,_.useListener)(k,N.toString(),(e=>{W!==e&&Y(e)}));const q=e.selectable||H?(0,S.jsx)(h.default,{checked:W,onClick:e=>{e&&e.stopPropagation(),P(t.unsafe(),!W)},msgTheme:"gallery"}):null,z=(0,r.Conversation)({mentions:t.mentionMap(),groupMentions:t.groupMentionMap(),links:(0,g.getLinksFromMsg)(t.unsafe()),phoneNumbers:(0,v.getPhoneNumbersFromMsg)(t.unsafe()),selectable:true,trusted:(0,x.isTrusted)(t.unsafe()),fromMe:N.fromMe}),K=I&&I.includes(n.url)?I:E,X=a?(0,S.jsx)("div",{className:j.default.author,children:(0,S.jsx)(p.default,{msg:t,contact:B})}):null,Z=(0,g.getSuspiciousLinks)(t.unsafe()).length>0;return(0,S.jsx)(d.default,{hover:H,onClick:()=>{w(t.unsafe(),!W)},onMouseEnter:H?null:()=>{H||U(!0)},onMouseOver:H?null:()=>{H||U(!0)},onMouseLeave:H?()=>{H&&U(!1)}:null,testid:T,children:(0,S.jsxs)("div",{className:j.default.msg,"data-testid":"link-msg",children:[(0,S.jsx)(b.default,{transitionName:"delay-leave",children:q}),(0,S.jsx)(C.MessageContainer,{isSentByMe:O,children:(0,S.jsxs)("div",{className:(0,i.cx)({[j.default.hasAuthor]:a,[j.default.hasSuspiciousLinks]:Z,[j.default.bubble]:!0}),children:[X,(0,S.jsx)(o.SuspiciousLabel,{link:n,displayType:l.DISPLAY_TYPE.GALLERY}),(0,S.jsx)(f.default,{title:n.url,isSentByMe:O,canonicalUrl:n.domain,displayType:l.DISPLAY_TYPE.GALLERY,star:G,kept:V,isLoading:!1}),(0,S.jsx)(s.EmojiText,{text:K,selectable:true,className:j.default.text,dirMismatch:L!==u.default.isRTL(),direction:A,formatters:z})]})})]})})};var o=n(751349),i=n(752253),l=n(356097),s=n(305521),r=n(675886),c=n(163755),d=a(n(296518)),u=a(n(932325)),f=a(n(428543)),p=a(n(599664)),h=a(n(6323)),m=n(787742),g=n(44118),x=n(435711),v=n(527530),b=a(n(844453)),C=n(512873),j=a(n(663945)),M=n(667294),_=n(808446),y=n(871210),S=n(785893)},101760:(e,t,n)=>{"use strict";var a=n(170315).default,o=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{getHasBefore:t,getQueryBefore:n,msgsCollection:o,msgsCollectionUpdateEvents:k,emptyText:P,scrollOffset:w=0,selectable:T,onMessageSelect:I,queryCollection:E,selectedMessages:A,messageElements:N,onProductDetail:O,setScrollOffset:R,filterMessages:D,testid:L}=e,B=t(),G=n(),F=(0,g.useRef)(null),V=(0,_.default)(),H=(0,M.default)((e=>{B&&E(e)}),100),[U,W]=(0,g.useState)((()=>o.toArray())),Y=(0,M.default)((e=>{const t=e.scrollHeight-e.clientHeight-e.scrollTop;B&&t<f.SCROLL_FUDGE&&H(o.head()),R&&R(e.scrollTop)}),100);(0,g.useEffect)((()=>{B&&H();const e=F.current;return e&&(e.scrollTop=w),()=>{Y.cancel()}}),[]);const q=(e,t)=>{const n=(0,m.unproxy)(e);T&&void 0!==t?I(n,t):r.Cmd.openChatAt((0,p.getChat)(n),(0,s.getSearchContext)((0,p.getChat)(n),n))},z=(0,g.useRef)(),K=(0,v.default)(),X=(0,g.useCallback)(function(){var e=(0,i.default)((function*(e){var t;if(null===(t=z.current)||void 0===t||t.abort(),null==e)return W(o.toArray()),void K();z.current=new a;const n=z.current.signal;try{const t=yield e(o,n);n.aborted||V.aborted||(W(t),K())}catch(e){if(e.name!==l.ABORT_ERROR)throw e}}));return function(){return e.apply(this,arguments)}}(),[o,K,V]);(0,b.useListener)(o,k,(()=>X(D))),(0,g.useEffect)((()=>(X(D),()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.abort()})),[X,D]);const[Z,{height:J}]=(0,C.default)(),Q=(0,j.default)(Z,F);(0,g.useEffect)((()=>{null!=D&&t()&&!n()&&null!=F.current&&F.current.scrollHeight<J+f.SCROLL_FUDGE&&H(o.head())}));let $=null;$=N?N(U,q):U.map(((e,t)=>(0,y.jsx)(h.default,{msg:e,selectable:T,selectedMessages:A,onMessageSelect:I,displayType:c.DISPLAY_TYPE.GALLERY,onClickMsg:q,onProductClick:O},`${e.id.toString()}_${t}`))).reverse();if(G){if(0===$.length)return(0,y.jsx)(d.Loading,{});$.push((0,y.jsx)(u.default,{},-1))}if(0===$.length&&!G&&!B)return(0,y.jsx)(d.Empty,{text:P,testid:"no-elements"});return(0,y.jsx)("div",{"data-testid":L,ref:Q,onScroll:e=>{Y(e.target)},className:(0,x.default)(S),children:$})};var i=o(n(348926)),l=n(898817),s=n(713105),r=n(780549),c=n(356097),d=n(811720),u=o(n(495012)),f=n(914368),p=n(163755),h=o(n(565644)),m=n(163139),g=n(667294),x=o(n(156720)),v=o(n(969651)),b=n(808446),C=o(n(695841)),j=o(n(38085)),M=o(n(286481)),_=o(n(895851)),y=n(785893);const S={display:"p357zi0d",flexDirection:"f8m0rgwh",overflowX:"gfz4du6o",overflowY:"rpvcun8f",flexGrow:"ggj6brxn"}},285192:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productMsgs:t,chat:n}=e,a=(0,i.default)(e,u),f=(0,c.default)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.default,(0,o.default)({msgsCollection:t,msgsCollectionUpdateEvents:["add","remove","reset","products_loaded"],queryCollection:e=>f((()=>{t.queryProducts(n,e)})),getHasBefore:()=>t.hasProductBefore,getQueryBefore:()=>t.hasProductBefore?Promise.resolve():null,emptyText:r.fbt._("No products",null,{hk:"8o7dB"}),chat:n},a)),(0,d.jsx)(l.HistorySyncGalleryPlaceholder,{chat:n})]})};var o=a(n(81109)),i=a(n(506479)),l=n(217714),s=a(n(101760)),r=n(548360),c=a(n(940630)),d=n(785893);const u=["productMsgs","chat"]},268167:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:d}=e,u=(0,i.default)(e,c);let f;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;f=[e,t,n,a].join(" ")}{var p;let e=24,i=24;return null==n&&null==a||(e=n,i=a),(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"bubble"},u),{},{children:(0,r.jsx)("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 24 24",height:e,width:i,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(t),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",xmlSpace:"preserve",children:(0,r.jsx)("path",{fill:"currentColor",d:"M19.2,4H4.8C3.8,4,3,4.8,3,5.8V22l3.6-3.6h12.6c1,0,1.8-0.8,1.8-1.8V5.8C21,4.8,20.2,4,19.2,4z M19.2,16.6 H6.6l-1.8,1.8V5.8h14.4V16.6z"})})}))}};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},230255:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInfoVideoIcon=function(e){var t;const{iconXstyle:n,height:a,width:d,viewBox:u}=e,f=(0,i.default)(e,c);let p;if(u){const{x:e=0,y:t=0,width:n=0,height:a=0}=u;p=[e,t,n,a].join(" ")}let h=13,m=21;null==a&&null==d||(h=a,m=d);return(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"chat-info-video"},f),{},{children:(0,r.jsx)("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 21 13",height:h,width:m,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(n),fill:"none",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.17.5c1.11 0 2.009.9 2.009 2.009v8.482c0 1.11-.9 2.009-2.01 2.009H2.01C.899 13 0 12.1 0 10.991V2.51C0 1.399.9.5 2.009.5h11.16Zm7.17 1.746a.893.893 0 0 1 .196.558v7.892a.893.893 0 0 1-1.45.697l-3.015-2.41V4.517l3.014-2.411a.893.893 0 0 1 1.255.14Z",fill:"#00A884"})})}))};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},672185:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardFilledIcon=function(e){var t;const{iconXstyle:n,height:a,width:d,viewBox:u}=e,f=(0,i.default)(e,c);let p;if(u){const{x:e=0,y:t=0,width:n=0,height:a=0}=u;p=[e,t,n,a].join(" ")}let h=16,m=21;null==a&&null==d||(h=a,m=d);return(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"forward-filled"},f),{},{children:(0,r.jsx)("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 21 16",height:h,width:m,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(n),fill:"none",children:(0,r.jsx)("path",{d:"M12.778 1.31318C12.778 0.590175 13.651 0.228175 14.161 0.739175L20.206 6.79017C20.2813 6.8654 20.341 6.95472 20.3817 7.05304C20.4225 7.15136 20.4435 7.25675 20.4435 7.36317C20.4435 7.4696 20.4225 7.57499 20.3817 7.67331C20.341 7.77163 20.2813 7.86095 20.206 7.93617L14.161 13.9872C14.0476 14.1006 13.9032 14.1779 13.7459 14.2091C13.5886 14.2404 13.4256 14.2243 13.2775 14.1628C13.1294 14.1013 13.0028 13.9973 12.9139 13.8638C12.825 13.7304 12.7777 13.5735 12.778 13.4132V10.6812C7.68197 10.6812 3.94897 12.1362 1.17397 15.2922C0.927967 15.5712 0.471967 15.3342 0.571967 14.9762C2.00197 9.80317 5.49697 4.97218 12.778 3.93118V1.31318Z",fill:"currentColor"})})}))};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},328150:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.KeepInChatMediaIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:d}=e,u=(0,i.default)(e,c);let f;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;f=[e,t,n,a].join(" ")}{var p;let e=24,i=24;return null==n&&null==a||(e=n,i=a),(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"keep-in-chat-media"},u),{},{children:(0,r.jsx)("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 24 24",height:e,width:i,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(t),fill:"none",children:(0,r.jsx)("path",{d:"m17 3h-10c-1.1 0-1.99.9-1.99 2l-.01 16 7-3 7 3v-16c0-1.1-.9-2-2-2z",fill:"currentColor"})})}))}};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},247442:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionsMediaIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:d}=e,u=(0,i.default)(e,c);let f;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;f=[e,t,n,a].join(" ")}{var p;let e=15,i=15;return null==n&&null==a||(e=n,i=a),(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"reactions-media"},u),{},{children:(0,r.jsx)("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 15 15",height:e,width:i,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(t),fill:"none",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 7.5C0 11.6305 3.36946 15 7.5 15C11.6527 15 15 11.6305 15 7.5C15 3.36946 11.6305 0 7.5 0C3.36946 0 0 3.36946 0 7.5ZM10.995 8.69333C11.1128 8.67863 11.2219 8.66503 11.3211 8.65309C11.61 8.63028 11.8076 8.91918 11.6784 9.13965C10.8573 10.6374 9.29116 11.793 7.50455 11.793C5.71794 11.793 4.15181 10.6602 3.33072 9.16246C3.18628 8.91918 3.37634 8.63028 3.66524 8.65309C3.79123 8.66749 3.93521 8.68511 4.09426 8.70457C4.94292 8.80842 6.22074 8.96479 7.48174 8.96479C8.81855 8.96479 10.1378 8.80025 10.995 8.69333ZM5.41405 7.37207C6.05761 7.37207 6.60923 6.72851 6.60923 6.02978C6.60923 5.30348 6.05761 4.6875 5.41405 4.6875C4.77048 4.6875 4.21886 5.33106 4.21886 6.02978C4.20967 6.75609 4.77048 7.37207 5.41405 7.37207ZM10.7807 6.05619C10.7807 6.74114 10.24 7.37201 9.60912 7.37201C8.97825 7.37201 8.4375 6.76818 8.4375 6.05619C8.4375 5.37124 8.97825 4.74037 9.60912 4.74037C10.24 4.74037 10.7807 5.34421 10.7807 6.05619Z",fill:"currentColor"})})}))}};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},604668:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ReplyIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:d}=e,u=(0,i.default)(e,c);let f;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;f=[e,t,n,a].join(" ")}{var p;let e=24,i=24;return null==n&&null==a||(e=n,i=a),(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"reply"},u),{},{children:(0,r.jsx)("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 24 24",height:e,width:i,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(t),version:"1.1",x:"0px",y:"0px",xmlSpace:"preserve",children:(0,r.jsx)("path",{fill:"currentColor",d:"M9.72,7.43C17,8.47,20.5,13.3,21.93,18.48 c0.1,0.36-0.36,0.59-0.6,0.32c-2.77-3.16-6.51-4.61-11.6-4.61v2.73c0,0.72-0.87,1.08-1.38,0.57l-6.05-6.05 c-0.32-0.32-0.32-0.83,0-1.15l6.05-6.05c0.51-0.51,1.38-0.15,1.38,0.57V7.43z"})})}))}};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},220279:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.UndoKeepInChatMediaIcon=function(e){const{iconXstyle:t,height:n,width:a,viewBox:d}=e,u=(0,i.default)(e,c);let f;if(d){const{x:e=0,y:t=0,width:n=0,height:a=0}=d;f=[e,t,n,a].join(" ")}{var p;let e=24,i=24;return null==n&&null==a||(e=n,i=a),(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"undo-keep-in-chat-media"},u),{},{children:(0,r.jsx)("svg",{viewBox:null!==(p=f)&&void 0!==p?p:"0 0 25 24",height:e,width:i,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(t),fill:"none",children:(0,r.jsx)("path",{clipRule:"evenodd",d:"m18 3h-10.00003c-1.1 0-1.99.9-1.99 2l-.0005.79529 13.99053 8.04121v-8.8365c0-1.1-.9-2-2-2zm2 14.9115 3.8749 2.2272.9967-1.734-22.97977-13.20787-.996627 1.73399 5.111727 2.93802-.00696 11.13116 7.00003-3 7 3z",fill:"currentColor",fillRule:"evenodd"})})}))}};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},677658:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.UnpinnedIcon=function(e){var t;const{iconXstyle:n,height:a,width:d,viewBox:u}=e,f=(0,i.default)(e,c);let p;if(u){const{x:e=0,y:t=0,width:n=0,height:a=0}=u;p=[e,t,n,a].join(" ")}let h=24,m=24;null==a&&null==d||(h=a,m=d);return(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"unpinned"},f),{},{children:(0,r.jsxs)("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 24 24",height:h,width:m,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(n),fill:"none",children:[(0,r.jsx)("path",{d:"M15.9984 10.6491V4.28906H16.9984V2.28906H7.64844L15.9984 10.6491Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M16 11.7291V4.28906H17V2.28906H7V2.71906L16 11.7291Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M21.21 19.7395L4.23 2.73945C4.03 2.53945 3.79 2.43945 3.52 2.43945C3.25 2.43945 3.01 2.53945 2.81 2.73945C2.61 2.93945 2.51 3.17945 2.5 3.44945C2.5 3.71945 2.59 3.95945 2.79 4.15945L8.01 9.36945V11.2795L6.00999 13.2795V15.2795H11.01V21.2795L12.01 22.2795L13.01 21.2795V15.2795H13.93L19.79 21.1295C19.99 21.3295 20.23 21.4295 20.5 21.4295C20.77 21.4295 21.01 21.3295 21.21 21.1295C21.41 20.9295 21.51 20.6995 21.51 20.4295C21.51 20.1595 21.41 19.9295 21.21 19.7295V19.7395Z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M21.21 19.7395L4.23 2.73945C4.03 2.53945 3.79 2.43945 3.52 2.43945C3.25 2.43945 3.01 2.53945 2.81 2.73945C2.61 2.93945 2.51 3.17945 2.5 3.44945C2.5 3.71945 2.59 3.95945 2.79 4.15945L8.01 9.36945V11.2795L6.00999 13.2795V15.2795H11.01V21.2795L12.01 22.2795L13.01 21.2795V15.2795H13.93L19.79 21.1295C19.99 21.3295 20.23 21.4295 20.5 21.4295C20.77 21.4295 21.01 21.3295 21.21 21.1295C21.41 20.9295 21.51 20.6995 21.51 20.4295C21.51 20.1595 21.41 19.9295 21.21 19.7295V19.7395Z",fill:"currentColor"})]})}))};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},190848:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceCallFilledIcon=function(e){var t;const{iconXstyle:n,height:a,width:d,viewBox:u}=e,f=(0,i.default)(e,c);let p;if(u){const{x:e=0,y:t=0,width:n=0,height:a=0}=u;p=[e,t,n,a].join(" ")}let h=22,m=22;null==a&&null==d||(h=a,m=d);return(0,r.jsx)(l.BaseSvgSpan,(0,o.default)((0,o.default)({name:"voice-call-filled"},f),{},{children:(0,r.jsx)("svg",{viewBox:null!==(t=p)&&void 0!==t?t:"0 0 22 22",height:h,width:m,preserveAspectRatio:"xMidYMid meet",className:(0,s.default)(n),fill:"none",children:(0,r.jsx)("path",{d:"M19.685 14.3869L16.7217 14.0486C16.0101 13.9669 15.3101 14.2119 14.8084 14.7136L12.6617 16.8602C9.36005 15.1802 6.65338 12.4852 4.97338 9.17188L7.13172 7.01355C7.63338 6.51188 7.87838 5.81188 7.79672 5.10022L7.45838 2.16022C7.31838 0.981882 6.32672 0.0952148 5.13672 0.0952148H3.11838C1.80005 0.0952148 0.703381 1.19188 0.785047 2.51022C1.40338 12.4736 9.37172 20.4302 19.3234 21.0486C20.6417 21.1302 21.7384 20.0336 21.7384 18.7152V16.6969C21.75 15.5186 20.8634 14.5269 19.685 14.3869Z",fill:"currentColor"})})}))};var o=a(n(81109)),i=a(n(506479)),l=n(220584),s=a(n(156720)),r=n(785893);const c=["iconXstyle","height","width","viewBox"]},495346:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onEnd:t}=e;const[n,a]=(0,l.useFlow)(r.Chats,{transitions:l.FlowTransitions.DrawerLeft,onEnd:t});if(null==a.step)return null;let c;switch(a.step){case r.Chats:c=(0,s.jsx)(o.default,{settings:i.default,onClose:()=>{a.pop()}})}return(0,s.jsx)(n,{flow:a,children:c})};var o=a(n(854534)),i=a(n(634152)),l=n(839062),s=n(785893);const r=n(76672).Mirrored(["Chats"])},339257:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.InfoFlow=void 0;var o=a(n(348926)),i=n(898817),l=a(n(670983)),s=a(n(229922)),r=n(72696),c=a(n(55423)),d=a(n(791865)),u=n(374660),f=n(780549),p=n(473735),h=n(260854),m=n(174834),g=n(355734),x=n(355351),v=n(103440),b=a(n(655237)),C=n(834110),j=a(n(41493)),M=n(568550),_=n(900316),y=a(n(365889)),S=n(56884),k=a(n(649391)),P=a(n(941943)),w=n(408256),T=n(393609),I=a(n(596090)),E=n(113269),A=a(n(422325)),N=n(147550),O=a(n(302112)),R=n(306472),D=n(114850),L=a(n(550506)),B=a(n(506072)),G=a(n(58880)),F=n(73225),V=a(n(751046)),H=n(95589),U=a(n(386067)),W=n(932523),Y=n(77548),q=a(n(614058)),z=a(n(632289)),K=n(559016),X=a(n(898707)),Z=n(242677),J=a(n(559893)),Q=n(977575),$=n(316348),ee=n(555622),te=a(n(87979)),ne=n(470824),ae=n(111971),oe=n(238669),ie=n(377773),le=n(804477),se=n(130756),re=a(n(556869)),ce=n(548360),de=n(667294),ue=n(839062),fe=a(n(17533)),pe=a(n(895851)),he=n(785893);const me=N.InfoFlowStep,ge=e=>{var t;if(e.isGroup)return me.GroupInfo;if(e.isBroadcast)return me.BroadcastInfo;if(e.isUser)return me.ContactInfo;if(e.isNewsletter)return me.NewsletterInfo;const n=null!==(t=e.kind)&&void 0!==t?t:"undefined";throw(0,re.default)(`Invalid chat provided of kind ${n}`)},xe=(0,de.forwardRef)(((e,t)=>{const{chat:n,initialStep:a=ge(n),showFullGroupDescription:N,scrollToParticipantList:re,profileEntryPoint:xe,onEnd:ve,displayName:be,sourceGroupChat:Ce}=e,je=(0,de.useRef)(0),Me=(0,fe.default)((e=>{je.current=e})),_e=(0,de.useRef)(void 0),ye=(0,de.useContext)(M.DrawerContext),[Se,ke]=(0,ue.useFlow)(a,{transitions:ue.FlowTransitions.DrawerRight,onEnd:ve}),[Pe,we]=(0,de.useState)(null),[Te,Ie]=(0,de.useState)(void 0),[Ee,Ae]=(0,de.useState)(null),[Ne,Oe]=(0,de.useState)(null),[Re,De]=(0,de.useState)(null),[Le,Be]=(0,de.useState)(null),[Ge,Fe]=(0,de.useState)(null);(0,de.useEffect)((()=>{n.isGroup?(0,E.queryAndUpdateGroupMetadataById)(n.id,"interactive"):n.isUser&&n.contact.isBusiness&&(0,r.canSeeBizProfileV3)()&&_.DrawerManager.setDrawerContext("right",(0,W.buildProductCatalogContext)(new Z.ProductCatalogSession,(0,C.getMaybeBizPlatformForLogging)(n.contact.id.toString()),se.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE))}),[]);const Ve=(e,t)=>{we(e),Ie(t),ke.push(me.ProductDetail)},He=e=>{Ae(e),ke.push(me.ProductCollection)},Ue=e=>{we(e),ke.push(me.ProductLink)},We=e=>{we(e),ke.push(me.ProductInfo)},Ye=(e,t)=>{Oe(e),De(t),ke.push(me.CatalogLink)},qe=e=>{const t=(0,W.getProductCatalogContext)(ye);(0,c.default)(e,n,t)&&(Be(e),ke.push(me.Cart))},ze=(e,t)=>{const a=n.id;ee.QPL.markerStart($.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:t}}}),(0,Y.logCarouselViewMoreClick)({catalogOwnerWid:a,catalogContext:e}),ke.push(me.Catalog)},Ke=()=>{D.ModalManager.open((0,he.jsx)(v.ConfirmPopup,{onOK:()=>D.ModalManager.close(),okText:ce.fbt._("OK",null,{hk:"4oTrfy"}),children:ce.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))},Xe=(0,pe.default)(),Ze=function(){var t=(0,o.default)((function*(t){yield(0,s.default)((0,ne.setGroupSubject)(e.chat,t),Xe).catch((0,i.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`name_group_modal:onSetSubject failed`})),D.ModalManager.close(),ke.push(me.GroupInviteLink)}));return function(){return t.apply(this,arguments)}}(),Je=()=>{var e;if((0,u.isInviteGrowthLockedGroup)(n)){var t;const e=!!(null===(t=n.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin());(0,T.openGrowthLockedModal)(e,!0)}else if(null===(e=n.groupMetadata)||void 0===e?void 0:e.isUnnamed){var a,o;const e=ce.fbt._("This group was created without a name. Give it a name to share the group link.",null,{hk:"1uQedr"});D.ModalManager.open((0,he.jsx)(L.default,{chat:n,subtext:e,onCancel:()=>D.ModalManager.close(),onOK:Ze,editable:null===(a=n.groupMetadata)||void 0===a?void 0:a.canSetSubject(),editRestrictionInfo:(null===(o=n.groupMetadata)||void 0===o?void 0:o.restrict)?Ke:void 0}))}else ke.push(me.GroupInviteLink)},Qe=e=>{De(e||n.contact),ke.push(me.Verification)},$e=()=>{(0,ie.shouldShowNUX)(H.NUX.EPHEMERAL)&&(0,S.isKeepInChatVisibleUIEnabled)()?D.ModalManager.open((0,he.jsx)(k.default,{chat:n,fromMe:!0,onOk:()=>ke.push(me.Ephemeral)})):ke.push(me.Ephemeral)},et=()=>{var e;const t=null===(e=n.groupMetadata)||void 0===e?void 0:e.parentGroup;t&&f.Cmd.openCommunityHome(t,!0)},tt=()=>{ke.end(oe.DismissReason.LIFECYCLE)},nt=()=>{_e.current=void 0,je.current=0,ke.push(me.MediaGallery)},at=()=>{_e.current=R.TABS.PRODUCTS,ke.pop()};if(!ke.step)return null;const ot=null!=Ce?Ce:n;let it;switch(ke.step){case me.GroupInfo:if((0,u.isCommunityAnnouncementGroup)(ot)&&(0,m.communityTabbedInfoEnabled)()){var lt;const e=null===(lt=ot.groupMetadata)||void 0===lt?void 0:lt.parentGroup;it=(0,he.jsx)(h.CommunityFlowLoadable,{homeTheme:g.CommunityHomeTheme.TabbedInfo,initialStep:p.CommunityFlowStep.COMMUNITY_HOME,initialTab:x.CommunityInfoTabs.Announcements,jid:e,onBack:()=>ke.pop()})}else it=(0,he.jsx)(P.default,{chat:ot,showFullGroupDescription:N,scrollToParticipantList:re,groupMetadata:ot.groupMetadata,contact:ot.contact,profilePicThumb:ot.contact.getProfilePicThumb(),onVerification:Qe,onStarred:()=>ke.push(me.Starred),onKept:()=>ke.push(me.Kept),onSentForAdminReview:()=>ke.push(me.SentForAdminReview),onMediaGallery:nt,onAdminSetting:()=>ke.push(me.GroupSettings),onGroupInviteLink:Je,onPendingParticipants:()=>ke.push(me.PendingParticipants),onEphemeral:$e,onCommunityClick:et,onClose:()=>{Ce?ke.end():ke.pop()}});break;case me.SentForAdminReview:it=(0,he.jsx)(te.default,{chat:n,onClose:()=>ke.pop()});break;case me.BroadcastInfo:it=(0,he.jsx)(d.default,{chat:n,contact:n.contact,onStarred:()=>ke.push(me.Starred),onMediaGallery:nt,onClose:()=>ke.pop()});break;case me.ContactInfo:it=(0,he.jsx)(b.default,{contact:n.contact,onVerification:Qe,onStarred:()=>ke.push(me.Starred),onKept:()=>ke.push(me.Kept),onMediaGallery:nt,onProductCatalog:ze,onProductDetail:Ve,onEphemeral:$e,onClose:()=>ke.pop(),profileEntryPoint:xe,onBack:Ce?()=>{ke.push(me.GroupInfo)}:null});break;case me.NewsletterInfo:(0,F.isNewsletterEnabled)()&&(it=(0,he.jsx)(V.default,{chat:n,newsletterMetadata:n.newsletterMetadata,profilePicThumb:n.contact.getProfilePicThumb(),onClose:()=>ke.pop(),onDeleteNewsletter:()=>ke.push(me.DeleteNewsletter),onAdminCenter:()=>ke.push(me.NewsletterAdminCenter)}));break;case me.DeleteNewsletter:it=(0,he.jsx)(G.default,{chat:n,onBack:()=>ke.pop()});break;case me.NewsletterAdminCenter:it=(0,he.jsx)(B.default,{chat:n,onBack:()=>ke.pop()});break;case me.ProductDetail:it=(0,he.jsx)(q.default,{chat:n,collectionId:Te,product:(0,l.default)(Pe,"product"),onEnd:tt,onBack:at,refreshCarousel:!1,onProductLinkClick:Ue,onProductMoreInformation:We,onCartClick:qe});break;case me.ProductCollection:{const e=n.id;it=(0,he.jsx)(Q.CollectionContentDrawer,{contact:n.contact,onProductDetail:Ve,catalogId:e,onBack:()=>ke.pop(),onCatalogLinkClick:Ye,onCartClick:qe,collection:(0,l.default)(Ee,"collection")});break}case me.ProductLink:it=(0,he.jsx)(z.default,{product:(0,l.default)(Pe,"product"),onBack:()=>ke.pop()});break;case me.ProductInfo:it=(0,he.jsx)(X.default,{product:(0,l.default)(Pe,"product"),onBack:at});break;case me.CatalogLink:it=(0,he.jsx)(U.default,{catalog:(0,l.default)(Ne,"catalog"),contact:(0,l.default)(Re,"contact"),onBack:()=>ke.pop()});break;case me.Cart:{const e=(0,W.getProductCatalogContext)(ye),t=(0,c.default)((0,l.default)(Le,"cartId"),n,e);it=(0,l.default)(t,"cartFlow");break}case me.Catalog:it=(0,he.jsx)(J.default,{contact:n.contact,onProductDetail:Ve,catalogId:n.id,onBack:()=>ke.pop(),businessProfile:n.contact.businessProfile,onCatalogLinkClick:Ye,onCartClick:qe,onCollectionSeeAll:He});break;case me.ProductList:it=(0,he.jsx)(K.ProductListDrawer,{contact:n.contact,onProductDetail:Ve,catalogId:n.id,onBack:()=>ke.pop(),businessProfile:n.contact.businessProfile,onCatalogLinkClick:Ye,onCartClick:qe});break;case me.Starred:it=(0,he.jsx)(ae.StarredDrawerLoadable,{chat:n,starredMsgs:n.getStarredMsgs(),onClose:()=>ke.pop()});break;case me.Kept:it=(0,he.jsx)(O.default,{chat:n,keptMsgs:n.getKeptMsgs(),onClose:()=>ke.pop()});break;case me.GroupSettings:it=(0,he.jsx)(A.default,{chat:n,groupMetadata:n.groupMetadata,onClose:()=>ke.pop()});break;case me.MediaGallery:it=(0,he.jsx)(R.MediaGalleryDrawer,{chat:n,onBack:()=>ke.pop(),onProductDetail:Ve,setProductsScrollOffset:Me,initialTab:_e.current,productsScrollOffset:je.current});break;case me.GroupInviteLink:it=(0,he.jsx)(w.GroupInviteLinkDrawerLoadable,{chat:n,groupMetadata:(0,l.default)(n.groupMetadata,"chat.groupMetadata"),onBack:()=>ke.pop(),onGroupSettings:()=>ke.push(me.GroupSettings)});break;case me.PendingParticipants:it=(0,he.jsx)(I.default,{chat:n,onBack:()=>ke.pop()});break;case me.Verification:it=(0,he.jsx)(le.VerificationDrawerLoadable,{contact:(0,l.default)(Re,"contact"),onClose:()=>ke.pop(),isFirstLevel:!1});break;case me.DefaultEphemerality:it=(0,he.jsx)(j.default,{onClose:()=>ke.pop(),entryPoint:(0,l.default)(Ge,"defaultEphemeralityEntryPoint")});break;case me.Ephemeral:{const e=n.isGroup?se.DISAPPEARING_MODE_ENTRY_POINT_TYPE.GROUP_CHAT_DISAPPEARING_MESSAGES_SETTING:se.DISAPPEARING_MODE_ENTRY_POINT_TYPE.INDIVIDUAL_CHAT_DISAPPEARING_MESSAGES_SETTING;it=(0,he.jsx)(y.default,{chat:n,showNux:(0,ie.shouldShowNUX)(H.NUX.EPHEMERAL),entryPoint:se.EPHEMERAL_SETTING_ENTRY_POINT_TYPE.CHAT_INFO,onClose:()=>ke.pop(),onCloseNux:()=>ke.push(me.Ephemeral),onDDMSettingsClick:()=>(Fe(e),void ke.push(me.DefaultEphemerality))});break}}return(0,he.jsx)(Se,{ref:t,flow:ke,displayName:be,children:it})}));t.InfoFlow=xe,xe.displayName="InfoFlow"},600788:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:n,highlightedMsgIds:a}=e,N=(0,E.default)(),O=(0,I.default)(),R=(0,y.default)(),D=(0,S.default)((()=>n.type===m.MSG_TYPE.IMAGE?new v.UiActionWamEvent({uiActionType:C.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:n.mediaData.mediaStage===d.MEDIA_DATA_STAGE.RESOLVED}):null)),L=(0,S.default)((()=>(0,l.constructMediaMsgs)((0,r.getChat)(n),n))),B=L.current.length,G=(0,P.default)(B),F=(0,_.useRef)(null),V=(0,_.useRef)(),H=(0,_.useRef)(),U=(0,_.useRef)(null),W=(0,_.useRef)(null),Y=(0,_.useRef)(null),[q,z]=(0,_.useState)(n),[K,X]=(0,_.useState)(!1),[Z,J]=(0,_.useState)(!0),Q=(0,P.default)(q),$=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=W.current,n=Y.current,a=U.current;if(!t||!n||!a)return;let o=0;a instanceof HTMLElement&&(o=a.clientWidth/2-t.clientWidth/2),(0,b.default)(n,"stop");let i=0;e&&(i=300),(0,b.default)(a,"scroll",{duration:i,container:n,offset:o,axis:"x",easing:[.1,.82,.25,1]})},ee=e=>{if(!e)return!0;const{isViewOnce:t}=e,n=(0,h.getIsStickerMsg)(e);return!t&&!n};(0,_.useEffect)((()=>{var e;$(),ee(n)&&(e=W.current)&&(0,b.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{N.aborted||J(!1)}))}),[]),(0,_.useEffect)((()=>{B>(null!=G?G:0)&&$()}));const te=e=>{O((()=>{L.current.loadMoreAroundIfNeeded(e)})),z(e)},ne=e=>{if(e&&e.stopPropagation(),K)return;const t=q;if(!t)return;let a=null;a=L.current.getAfter(t),a?te(a):L.current.hasMediaAfter&&(V.current||(V.current=L.current.queryMedia({chat:(0,r.getChat)(n),msg:n,direction:"after"}).then((e=>{N.aborted||"number"==typeof e.length&&e.length>0&&q===n&&ne()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{V.current=null}))))},ae=e=>{if(e&&e.stopPropagation(),K)return;const t=q;if(!t)return;let a=null;a=L.current.getBefore(t),a?te(a):L.current.hasMediaBefore&&(H.current||(H.current=L.current.queryMedia({chat:(0,r.getChat)(n),msg:n,direction:"before"}).then((e=>{N.aborted||"number"==typeof e.length&&e.length>0&&q===n&&ae()})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{H.current=null}))))};let oe=null;n.type===m.MSG_TYPE.IMAGE&&(oe=()=>{const e=D.current;var t;e&&(Object.assign(e,(0,j.getGroupCountMetricsFromChatWid)(null===(t=(0,r.getChat)(n))||void 0===t?void 0:t.id)),e.markUiActionT(),e.commit(),D.current=null);(0,M.logUiActionShadowPrivateStatsTestEvents)()});const ie=()=>{p.ModalManager.closeMedia()},le=(0,w.default)((()=>{z(null),ie()})),se=(null==q?void 0:q.isViewOnce)||q&&(0,h.getIsStickerMsg)(q);(0,k.useListener)(se?q:null,"revoked",le);const re=se?null:L.current;(0,k.useListener)(re,"remove",((e,t,a)=>{const o=L.current,l=q;if(o.includes(n)||null!=l&&null!=l.id&&l.id.toString()!==e.id.toString())return void R();const s=a.index;0===o.length?ie():o.length===s?te((0,i.default)(o.at(s-1),"mediaMsgs.at(index - 1)")):te((0,i.default)(o.at(s),"mediaMsgs.at(index)"))})),(0,k.useListener)(re,"reset",(()=>{ie()})),(0,k.useListener)(re,"query_media_after",(()=>{R()})),(0,k.useListener)(re,"query_media_before",(()=>{const e=Y.current;e&&(F.current=e.scrollWidth,e instanceof HTMLElement&&R())})),(0,k.useListener)(window,"keydown",(e=>{if(e.defaultPrevented)return;const t=c.default.isRTL();e.keyCode===o.default.LEFT?t?ne():ae():e.keyCode===o.default.RIGHT&&(t?ae():ne())})),(0,_.useEffect)((()=>{O((()=>{q&&L.current.loadMoreAroundIfNeeded(q)}))}),[q,L,O]),(0,_.useEffect)((()=>{if(Q!==q)$(!0);else{const e=Y.current;if(!e||null==F.current||0===F.current)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-F.current),F.current=null}}),[q,Q]);const ce=(0,T.default)(((e,t,n)=>{if(0!==t.length&&null!=n){if(t.hasMediaBefore&&n<e.clientWidth){const e=(0,i.default)(t.head(),"mediaMsgs.head()");O((()=>{t.queryMedia({chat:(0,r.getChat)(e),msg:e}),R()}))}if(t.hasMediaAfter&&n+s.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){const e=(0,i.default)(t.last(),"mediaMsgs.last()");O((()=>{t.queryMedia({chat:(0,r.getChat)(e),msg:e,direction:"after"}),R()}))}}}),100);if(!q)return null;if((0,r.getChat)(n).isSuspendedOrTerminated()&&(0,f.isGroupSuspendV2Enabled)())return void(0,g.openSuspendedGroupMediaDownloadFailureModal)();const de=L.current,ue=de.last(),fe=de.hasMediaAfter||q!==ue?ne:null,pe=de.head();let he=null;return he=de.hasMediaBefore||q!==pe?ae:null,he=de.hasMediaBefore||q!==pe?ae:null,(0,A.jsxs)("div",{className:K?"img-zoomed-in":null,children:[ee(q)&&(0,A.jsx)(x.default,{activeMsg:q,mediaMsgs:L.current,highlightedMsgIds:e.highlightedMsgIds,onSelectThumb:te,onSetActiveThumb:e=>{U.current=e},onScroll:e=>{ce(e.currentTarget,L.current,e.currentTarget.scrollLeft)},setRefThumbsContainer:e=>{W.current=e},setRefThumbs:e=>{Y.current=e}}),(0,A.jsx)(u.default,{msg:q,mediaData:q.mediaData,onBack:ie,onExitAnimation:()=>{var e;ee(n)&&(e=W.current)&&(0,b.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},onNext:fe,onPrev:he,onImgZoomIn:e=>{X(e)},getZoomNode:e.getZoomNode,startTime:e.startTime,isAnimatingIn:Z,onImageLoad:oe,msgIndexInAlbum:(()=>{let e=-1;if(!a||!q)return e;const t=q.id.toString();if(!a.has(t))return e;let n=0;return a.forEach((a=>{a===t&&(e=n),n++})),e})(),albumSize:(null===(t=e.highlightedMsgIds)||void 0===t?void 0:t.size)||0})]})};var o=a(n(953268)),i=a(n(670983)),l=n(78810),s=n(914368),r=n(163755),c=a(n(932325)),d=n(172259),u=a(n(933147)),f=n(97858),p=n(114850),h=n(787742),m=n(373070),g=n(983271),x=a(n(266648)),v=n(382117),b=a(n(330619)),C=n(130756),j=n(531737),M=n(818674),_=n(667294),y=a(n(969651)),S=a(n(637660)),k=n(808446),P=a(n(49710)),w=a(n(17533)),T=a(n(286481)),I=a(n(940630)),E=a(n(895851)),A=n(785893)},340576:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireBundle=t.SendContactsModalLoadable=void 0;var o=a(n(348926)),i=a(n(114945)),l=a(n(97359)),s=a(n(205106)),r=a(n(261724)),c=n(548360),d=n(785893);const u=(0,s.default)((0,o.default)((function*(){const e=yield Promise.all([n.e(8295),n.e(1702),n.e(9488),n.e(2790),n.e(275)]).then(n.bind(n,915132));return(0,l.default)(e)})),"SendContactsModal");t.requireBundle=u;const f=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(r.default,{title:c.fbt._("Send contacts",null,{hk:"9ZMyz"}),error:Boolean(e.error)})});t.SendContactsModalLoadable=f},854534:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(35234),i=n(700071),l=n(351053),s=n(394164),r=n(780549),c=n(174834),d=n(877171),u=a(n(908081)),f=a(n(324093)),p=n(626194),h=n(811720),m=n(512938),g=a(n(570834)),x=a(n(335540)),v=n(81644),b=a(n(932325)),C=n(97858),j=a(n(237889)),M=n(180519),_=n(548360),y=n(667294),S=a(n(156720)),k=a(n(637660)),P=n(808446),w=n(655241),T=n(785893);const I={borderBottom:"qmxv8cnq",backgroundColor:"s9raicp8"},E={paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"eb4rp10x",paddingStart:"gx1rr48f"},A={paddingTop:"n1yiu2zv",paddingEnd:"h5uqwbaf",paddingBottom:"eb4rp10x",paddingStart:"kjjye8e3",textAlign:"ljrqcn24"},N={overflowX:"gfz4du6o",overflowY:"r7fjleex"};function O(e,t){const{onClose:n}=e,a=()=>l.ChatCollection.filter((e=>e.archive&&e.shouldAppearInList)),O=(0,w.useModelValues)(e.settings,["showArchiveV2","archive"]),R=(0,k.default)((()=>new g.default)),D=(0,k.default)((()=>new j.default([],(e=>e.id.toString())))),L=(0,y.useRef)(null),[B,G]=(0,y.useState)(a),F=()=>(0,C.archiveV2Supported)()&&O.showArchiveV2;(0,P.useListener)(l.ChatCollection,[F()?"sort":null,"change:archive","add","remove"].filter(Boolean),(()=>{G(a())}));const V=e=>{D.current.setVal(e,!1)};(0,P.useListener)(r.Cmd,"close_chat",(e=>{e===D.current.getVal()&&D.current.unset()})),(0,P.useListener)(r.Cmd,"update_chatlist_selection",V);(0,y.useEffect)((()=>{if(F()){const e=a(),t=new Map;e.forEach((e=>{e.archiveAtMentionViewedInDrawer=!0,t.set(e.id.toString(),!0)})),(0,o.updateChatArchiveDrawer)(t)}L.current&&x.default.focus(L.current);const e=l.ChatCollection.toArray().find((e=>e.active&&e.archive));e&&V(e)}),[]);const H=()=>{n()},U=(e,t)=>{r.Cmd.openChatFromUnread(t).then((e=>{e&&d.ComposeBoxActions.focus(t)})),(0,C.archiveV2Supported)()&&O.archive.enabled||H()},W=e=>{e.preventDefault(),e.stopPropagation(),D.current.setNext(!0)},Y=e=>{e.preventDefault(),e.stopPropagation(),D.current.setPrev(!0)};let q,z;if(D.current.init(B,!0),(()=>{const e=l.ChatCollection.some((e=>e.archive));return(0,C.archiveV2Supported)()&&e})()){const e=_.fbt._("These chats stay archived when new messages are received. To change this experience, go to Settings > Chats on your phone.",null,{hk:"2GTpJ"}),t=_.fbt._("These chats are unarchived when new messages are received. To change this experience, go to Settings > Chats on your phone.",null,{hk:"2QaWm0"});q=(0,T.jsx)("div",{className:(0,S.default)(I),children:(0,T.jsx)("div",{className:(0,S.default)(E),children:(0,T.jsx)("div",{className:(0,S.default)(A),children:(0,T.jsx)(M.WDSTextMuted,{as:"p",children:O.showArchiveV2?e:t})})})})}z=B.length>0?(0,T.jsxs)(v.HotKeys,{ref:L,handlers:{down:W,up:Y},children:[q,(0,T.jsx)(m.FlatList,{className:(0,S.default)(N),data:B.map((e=>({itemKey:e.id.toString(),chat:e,height:(0,c.shouldShowNewSubgroupIdentity)(e.groupMetadata)?s.SUBGROUP_V2_CHAT_CELL_HEIGHT:void 0}))),flatListController:R.current,direction:"vertical",renderItem:e=>(0,T.jsx)(i.Chat,{chat:e.chat,mode:i.Mode.LAST,active:D.current,onClick:U,hideArchivedIcon:(0,C.archiveV2Supported)()&&O.archive.enabled,hideMuteIcon:F(),hideMuteOption:F(),ephemeralIcon:"chat-list",showCommunityInfo:!0})})]}):(0,T.jsx)(h.Archived,{});const K=(0,C.archiveV2Supported)()&&O.archive.enabled?_.fbt._("Archived",null,{hk:"3HjzQg"}):b.default.t(136);return(0,T.jsxs)(u.default,{ref:t,theme:"archived",children:[(0,T.jsx)(p.DrawerHeader,{title:K,onBack:H,type:p.DRAWER_HEADER_TYPE.LARGE,menu:null}),(0,T.jsx)(f.default,{flatListControllers:[R.current],children:z})]})}var R=(0,y.forwardRef)(O);t.default=R},302112:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(348926)),i=n(698867),l=n(751461),s=n(356097),r=n(811720),c=n(978752),d=a(n(75531)),u=n(130756),f=n(548360),p=n(667294),h=a(n(156720)),m=n(785893);const g={paddingTop:"s7fqlky6",paddingEnd:"iffbo4e8",paddingBottom:"q1tx93la",paddingStart:"e8k79tju",fontSize:"ovllcyds",lineHeight:"durt31hz",color:"amgz1mtg"};function x(e,t){const{keptMsgs:n,onClose:a,chat:x}=e,[v,b]=(0,c.useKicNux)(x);(0,p.useEffect)((()=>{v&&b(u.TRIGGER_TYPE.KEPT_FOLDER_TAP_FIRST_TIME)}),[]),(0,p.useEffect)((()=>{(0,o.default)((function*(){const e=new l.DisappearingMessageKeepInChatWamEvent({kicActionName:u.KIC_ACTION_NAME_TYPE.VIEW_KEPT_MESSAGES,kicEntryPoint:u.KIC_ENTRY_POINT_TYPE.CHAT_INFO,messagesInFolder:n.length,isAGroup:null==x?void 0:x.isGroup});var t;(null==x?void 0:x.isGroup)&&e.set({isAdmin:null==x||null===(t=x.groupMetadata)||void 0===t?void 0:t.participants.iAmAdmin()});if(x){const t=yield(0,i.getChatThreadID)(null==x?void 0:x.id.toJid());null!=t&&e.set({threadId:t})}e.commit()}))()}),[]);const C=f.fbt._("Kept messages",null,{hk:"iGco8"}),j=(0,m.jsx)(r.KeptMsgs,{});let M=null;var _;(null==x?void 0:x.isGroup)?M=(null===(_=x.groupMetadata)||void 0===_?void 0:_.restrict)?(0,m.jsx)("div",{className:(0,h.default)(g),children:f.fbt._("These messages are kept in the chat for everyone. Only admins can keep or unkeep messages in this group.",null,{hk:"2P8fIj"})}):(0,m.jsx)("div",{className:(0,h.default)(g),children:f.fbt._("These messages are kept in the chat for everyone. Everyone can keep or unkeep a message. Group admins can limit this.",null,{hk:"3VYBCh"})}):M=(0,m.jsx)("div",{className:(0,h.default)(g),children:f.fbt._("These messages are kept in the chat for everyone. Everyone can keep or unkeep a message.",null,{hk:"3sFKOP"})});return(0,m.jsx)(d.default,{testid:"kept-drawer",ref:t,msgCollection:n,onClose:a,chat:x,title:C,emptyListText:j,descriptionSection:M,displayType:s.DISPLAY_TYPE.KEPT_MSGS})}var v=(0,p.forwardRef)(x);t.default=v},306472:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.MediaGalleryDrawer=void 0;var o=a(n(252628)),i=n(328620),l=a(n(638938)),s=n(409623),r=a(n(321574)),c=a(n(908081)),d=a(n(324093)),u=n(626194),f=a(n(932325)),p=a(n(671597)),h=a(n(482530)),m=n(97858),g=n(913257),x=a(n(930440)),v=a(n(285192)),b=a(n(434377)),C=n(392632),j=a(n(844453)),M=n(548360),_=n(667294),y=a(n(156720)),S=a(n(261716)),k=a(n(637660)),P=n(785893);const w={display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",flexDirection:"f8m0rgwh",height:"ppled2lx"},T={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx"},I=n(76672)({MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"});t.TABS=I;const E=e=>{const{selected:t,onSearch:n}=e;switch(t){case I.MEDIA:case I.LINKS:case I.DOCS:return(0,P.jsx)(s.ListSearch,{onSearch:n,loading:!1,listFilterEnabled:!1,chatlistFilterEnabled:!1,mode:l.default.Chatlist,placeholder:M.fbt._("Search",null,{hk:"418EDN"})});default:return null}};const A=(0,_.forwardRef)(((e,t)=>{const{chat:n,onProductDetail:a,setProductsScrollOffset:l,initialTab:s=I.MEDIA,productsScrollOffset:A=0}=e,[N,O]=(0,_.useState)(s),[R,D]=(0,_.useState)(null),[L,B]=(0,_.useState)(!1),[G,F]=(0,S.default)(),V=(0,m.mediaLinksDocsFilteringEnabled)(),H=(0,k.default)((()=>new x.default([],(e=>e.id.toString())))),U=()=>{L&&(H.current.unsetAll(),B(!1))},W=(e,t)=>{L||B(!0),H.current.setVal(e,t),0===H.current.getSelected().length&&U()},Y=(0,_.useCallback)((e=>{const t=I.cast(e);if(null==t)return;const n=(0,o.default)(I).indexOf(N),a=(0,o.default)(I).indexOf(t);n!==a&&H.current.unsetAll(),O(t),D(a>n?"right":"left"),B(!1)}),[H,N]),q=(0,_.useMemo)((()=>{const e=[{id:I.MEDIA,title:f.default.t(416)},{id:I.DOCS,title:f.default.t(243)},{id:I.LINKS,title:f.default.t(394)}];return e.push({id:I.PRODUCTS,title:M.fbt._("Products",null,{hk:"3Ky71N"})}),(0,P.jsx)(b.default,{tabConfigs:e,selectedId:N,onSelect:Y,testIdPrefix:"gallery-tab"})}),[N,Y]),z=function(e){switch(e){case I.MEDIA:return g.MultiSelectBarEntryPoint.MEDIA;case I.DOCS:return g.MultiSelectBarEntryPoint.DOCS;case I.LINKS:return g.MultiSelectBarEntryPoint.LINKS;case I.PRODUCTS:return g.MultiSelectBarEntryPoint.PRODUCTS}}(N),K=(()=>{let e;switch(N){case I.MEDIA:e=(0,P.jsx)(h.default,{chat:n,mediaMsgs:n.getMediaMsgs(),selectable:L,onMessageSelect:W,selectedMessages:H.current,fullCollection:!0,isFilterEnabled:V,filterText:G});break;case I.LINKS:e=(0,P.jsx)(p.default,{chat:n,linkMsgs:n.getLinkMsgs(),selectable:L,onMessageSelect:W,selectedMessages:H.current,isFilterEnabled:V,filterText:G});break;case I.DOCS:e=(0,P.jsx)(r.default,{chat:n,docMsgs:n.getDocMsgs(),selectable:L,onMessageSelect:W,selectedMessages:H.current,isFilterEnabled:V,filterText:G});break;case I.PRODUCTS:e=(0,P.jsx)(v.default,{chat:n,productMsgs:n.getProductMsgs(),selectable:L,onMessageSelect:W,selectedMessages:H.current,onProductDetail:a,setScrollOffset:l,scrollOffset:A})}return e})(),X=[I.MEDIA,I.DOCS].includes(N),Z=L?(0,P.jsx)(C.UIE,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:U,children:(0,P.jsx)(g.MultiSelectBar,{chat:n,noSortOnForward:!0,theme:"mediaGallery",toastPosition:i.ToastPosition.RIGHT,downloadButton:X,selectedMessages:H.current,onCancel:U,entryPoint:z})}):null,J="right"===R?"slide-forward":"slide-back";return(0,P.jsxs)(c.default,{ref:t,theme:"gallery",testid:"media-gallery-drawer",children:[(0,P.jsx)(u.DrawerHeader,{title:" ",onBack:e.onBack,rtlFixIfOnDarwin:!0,type:u.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),Z,q,V?(0,P.jsx)(E,{selected:N,onSearch:F}):null,(0,P.jsx)(d.default,{"data-list-scroll-container":!0,children:(0,P.jsx)(j.default,{transitionName:J,className:(0,y.default)(w),children:(0,P.jsx)("div",{className:(0,y.default)(T),children:(0,P.jsx)("div",{className:(0,y.default)(w),children:K})},N)})})]})}));t.MediaGalleryDrawer=A,A.displayName="MediaGalleryDrawer"},266466:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,c.useState)(!1);let a,p;e.isBusiness?(a=r.fbt._("This message will be forwarded to WhatsApp. This business will not be notified.",null,{hk:"1N7YEc"}),p=r.fbt._("Block business",null,{hk:"3hFIF3"})):(a=r.fbt._("This message will be forwarded to WhatsApp. This contact will not be notified.",null,{hk:"2qS1tP"}),p=r.fbt._("Block contact",null,{hk:"41X9mL"}));return(0,u.jsxs)(i.ConfirmPopup,{onOK:function(){e.onReport(t)},okText:r.fbt._("Report",null,{hk:"18ssTb"}),onCancel:e.onCancel,title:e.title,children:[(0,u.jsxs)("div",{className:(0,d.default)(f.section,s.uiMargin.top12,s.uiMargin.end0,f.border),children:[(0,u.jsx)(o.CheckBox,{onChange:()=>n((e=>!e)),checked:t,id:"menu-icon-report-spam"}),(0,u.jsx)(l.TextLabel,{xstyle:f.checkboxLabel,htmlFor:"menu-icon-report-spam",children:p})]}),(0,u.jsx)(l.TextParagraph,{xstyle:f.section,color:"muted",children:a})]})};var o=n(468926),i=n(103440),l=n(180519),s=n(676345),r=n(548360),c=n(667294),d=a(n(156720)),u=n(785893);const f={section:{marginBottom:"t4zgqcuo"},checkboxLabel:{marginStart:"fooq7fky"},border:{paddingBottom:"dledyozo",borderBottom:"j4zbmt6h"}}},755140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=a.ChatCollection.getActive();(0,u.useEffect)((()=>{e.entryPoint&&(0,i.logPnhRequestRevealActionHelper)(c.PNH_CHAT_TYPE_TYPE.CTWA,c.PNH_MESSAGE_CHAT_PARTY.BIZ,c.PNH_ACTION_TYPE.REQUEST_DIALOG_APPEAR,e.entryPoint)}),[e.entryPoint]);const n=d.fbt._("Request phone number?",null,{hk:"1BOtdo"}),p=d.fbt._("This person's phone number is not shared in this chat. You can request for their phone number if you'd like to save them to your contacts.",null,{hk:"3SHZ6I"}),h=d.fbt._("Send Request",null,{hk:"4tsuDY"}),m=d.fbt._("Cancel",null,{hk:"37A1CY"});return(0,f.jsx)(o.ConfirmPopup,{onOK:()=>{t&&((0,s.sendRequestPhoneNumber)((0,r.unproxy)(t)),null!=e.entryPoint&&(0,i.logPnhRequestRevealActionHelper)(c.PNH_CHAT_TYPE_TYPE.CTWA,c.PNH_MESSAGE_CHAT_PARTY.BIZ,c.PNH_ACTION_TYPE.SEND_REQUEST,e.entryPoint)),l.ModalManager.close()},okText:h,onCancel:()=>l.ModalManager.close(),cancelText:m,title:n,children:p})};var a=n(351053),o=n(103440),i=n(543081),l=n(114850),s=n(942319),r=n(163139),c=n(130756),d=n(548360),u=n(667294),f=n(785893)},9729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{isVoiceCallEnabled:!1,isVideoCallEnabled:!1,canStartVoiceCall:!1,canStartVideoCall:!1,startVoiceCall:()=>{},startVideoCall:()=>{}}};n(445729),n(660666),n(667294),n(808446)},791865:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(896322)),i=a(n(35644)),l=(a(n(306007)),n(464659)),s=a(n(740681)),r=n(63014),c=n(780549),d=n(419e3),u=a(n(908081)),f=a(n(324093)),p=n(36045),h=n(626194),m=a(n(209064)),g=n(673509),x=a(n(409558)),v=n(258105),b=a(n(570834)),C=a(n(932325)),j=n(97858),M=n(114850),_=n(111367),y=(n(227341),n(163139)),S=(n(220584),n(180519)),k=n(130756),P=n(548360),w=n(667294),T=a(n(156720)),I=a(n(969651)),E=a(n(637660)),A=n(808446),N=n(655241),O=a(n(321201)),R=n(785893);const D={flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"};function L(e,t){var n,a;const{onClose:w,onMediaGallery:L}=e,B=(0,I.default)(),G=(0,O.default)(),F=(0,E.default)((()=>new b.default)),V=(0,N.useModelValues)(e.chat,["id","groupMetadata"]);(0,A.useListener)(null===(n=V.groupMetadata)||void 0===n?void 0:n.participants,["add","remove","sort","reset"],B);let H=null;L&&(H=(0,R.jsx)(s.default,{onMediaGallery:L,chat:(0,y.unproxy)(V)}));const U=(0,R.jsx)(l.ChatInfoDrawerButtonsSection,{children:(0,R.jsx)(p.DrawerButton,{testid:"li-delete-broadcast",icon:(0,R.jsx)(d.DeleteIcon,{}),color:"danger",theme:"chat-info",onClick:()=>{c.Cmd.deleteOrExitChat((0,y.unproxy)(V))},children:C.default.t(692)})});let W;(null===(a=V.groupMetadata)||void 0===a?void 0:a.creation)?(W=r.Clock.createdStr(V.groupMetadata.creation),W=(0,R.jsx)(S.TextDiv,{theme:"small",children:W})):W=null;let Y=null;Y=(0,R.jsx)(x.default,{highlightSurface:k.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,onClick:()=>{if((0,j.isPrivacyNarrativeV1Enabled)()&&(0,_.shouldShowNewE2eInfoModal)((0,y.unproxy)(V))){const e=(0,v.getE2EFaqUrl)();M.ModalManager.open((0,R.jsx)(g.E2eInfoModalV2,{highlightSurface:k.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,url:e}))}else M.ModalManager.open((0,R.jsx)(m.default,{highlightSurface:k.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_BROADCAST,chatId:V.id,e2eSubtype:"info_encrypted"}))},text:P.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"1iarlI"})});let q=null;return Y&&(q=(0,R.jsxs)(l.ChatInfoDrawerSection,{children:[null,Y]})),(0,R.jsxs)(u.default,{ref:t,theme:"striped",children:[(0,R.jsxs)(h.DrawerHeader,{type:h.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{w?w():null==G||G.requestDismiss()},children:[(0,R.jsx)(S.TextDiv,{theme:"title",children:P.fbt._("Broadcast list info",null,{hk:"3S4EgV"})}),W]}),(0,R.jsx)(f.default,{flatListControllers:[F.current],children:(0,R.jsxs)("div",{className:(0,T.default)(D),children:[(0,R.jsx)(i.default,{chat:(0,y.unproxy)(V)}),H,undefined,q,(0,R.jsx)(o.default,{chat:(0,y.unproxy)(V),flatListController:F.current}),U]})})]},"contact-info-modal")}var B=(0,w.forwardRef)(L);t.default=B},896322:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,h.default)(),x=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants;(0,m.useListener)(x,"add remove reset",a);const v=(0,p.useMemo)((()=>x?x.map((e=>({itemKey:e.id.toString(),participant:e,height:68}))):[]),[x]),b=(e,t)=>{(0,f.isMePrimary)(t.id)||(0,c.findChat)(t.id,"broadcastInfoRecipients").then((function(e){l.Cmd.openChatFromUnread(e).then((t=>{t&&s.ComposeBoxActions.focus(e)}))}))},C=null!==(n=null==x?void 0:x.length)&&void 0!==n?n:0,j=u.default.t(770,{count:C,_plural:C});return(0,g.jsx)(i.ChatInfoDrawerListSection,{title:j,children:(0,g.jsx)(d.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:v,renderItem:e=>{const{participant:t}=e,n=r.ContactCollection.gadd(t.id);return(0,g.jsx)(o.Contact,{contact:n,theme:"chat-info",admin:!!t.isAdmin,onClick:b,waitIdle:!0},t.id.toString())}})})};var o=n(822652),i=n(464659),l=n(780549),s=n(877171),r=n(177938),c=n(581354),d=n(512938),u=a(n(932325)),f=n(459857),p=n(667294),h=a(n(969651)),m=n(808446),g=n(785893)},35644:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.participants,b=(0,m.useModelValues)(e.chat.contact,["name"]),C=(0,p.default)();(0,h.useListener)(a,"add remove reset",C);const j=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:0,M=u.fbt._("Broadcast List",null,{hk:"46AT9o"}).toString()+" · "+r.default.t(770,{count:j,_plural:j}),_=b.name?(0,g.jsx)(c.Name,{contact:e.chat.contact,selectable:!0}):u.fbt._("Untitled List",null,{hk:"fYALp"});return(0,g.jsxs)(l.default,{theme:"padding-large",children:[(0,g.jsx)("div",{className:(0,f.default)(x),children:(0,g.jsx)(i.DetailImage,{id:e.chat.id,size:i.DetailImageSize.Large})}),(0,g.jsxs)(s.FlexColumn,{align:"center",children:[(0,g.jsx)(d.TextHeader,{level:"2",size:"24",children:_}),(0,g.jsx)("div",{className:(0,f.default)(v),children:(0,g.jsx)(o.SelectableSpan,{dir:"auto",selectable:!0,children:(0,g.jsx)(d.TextSpan,{size:"16",color:"secondary",children:M})})})]})]})};var o=n(306703),i=n(23641),l=a(n(969358)),s=n(690495),r=a(n(932325)),c=n(21645),d=n(180519),u=n(548360),f=a(n(156720)),p=a(n(969651)),h=n(808446),m=n(655241),g=n(785893);const x={display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"du8bjn1j"},v={lineHeight:"a4ywakfo",marginTop:"g1eqewly"}},988808:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t}=e;const{status:n}=(0,d.useModelValues)(t.getStatus(),["status"]);if(r.default.isPSA(t.id))return(0,u.jsxs)(o.ChatInfoDrawerSection,{titleTestId:"section-about",title:"",children:[(0,u.jsxs)(s.TextSpan,{theme:"title",size:"16",children:[c.fbt._("Hi! Welcome to this official WhatsApp chat.",null,{hk:"1fpFwJ"}).toString(),(0,u.jsx)("br",{}),c.fbt._("This is where you can get tips, see announcements, and hear about the newest features. Straight from us.",null,{hk:"4gcJHK"}).toString(),(0,u.jsx)("br",{}),c.fbt._('Official chats from WhatsApp will always have a green "verified" checkmark. And we\'ll never ask for your personal information.',null,{hk:"8bwzI"}).toString()]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(l.ExternalLink,{href:"https://whatsapp.com/",xstyle:f.whatsapp_url,children:"https://whatsapp.com/"})]});if(""===n)return null;return(0,u.jsx)(o.ChatInfoDrawerSection,{titleTestId:"section-about",title:c.fbt._("About",null,{hk:"4qoAfH"}),children:(0,u.jsx)(s.TextSpan,{theme:"title",size:"16",children:(0,u.jsx)(i.default,{id:t.id})})})};var o=n(464659),i=a(n(203528)),l=n(753233),s=n(180519),r=a(n(124928)),c=n(548360),d=(a(n(156720)),n(655241)),u=n(785893);const f={whatsapp_url:{color:"hafg4y3t"}}},876588:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t]=(0,x.useContactValues)(e.contact.id,[p.getCommonGroups]),[n,a]=(0,g.useState)(!0);(0,g.useEffect)((()=>{(0,u.findCommonGroups)(e.contact).catch((e=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups: "+e),(0,h.default)("get from participants table failed")}))}),[]);const C=(0,v.default)(t,["add","remove"],(()=>{if(!t)return[];let e=t;return e.length>l.INFO_DRAWER_MAX_ROWS&&n&&(e=e.slice(0,l.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e,height:(0,c.shouldShowNewSubgroupIdentity)(e.groupMetadata)?i.SUBGROUP_V2_CHAT_CELL_HEIGHT:68})))}),[n]),j=()=>{a(!1)},M=(t,n)=>{r.Cmd.openChatFromUnread(n).then((e=>{e&&d.ComposeBoxActions.focus(n)})),e.onClose()};if(!t||0===t.length)return null;let _;if(t.length>l.INFO_DRAWER_MAX_ROWS&&n){const e=t.length-l.INFO_DRAWER_MAX_ROWS;_=(0,b.jsx)(s.default,{numMore:e,onClick:j})}const y=m.fbt._({"*":"{number} groups in common",_1:"1 group in common"},[m.fbt._plural(t.length,"number")],{hk:"2bl4a5"});return(0,b.jsxs)(l.ChatInfoDrawerListSection,{titleTestId:"section-common-groups",title:y,children:[(0,b.jsx)(f.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:C,renderItem:e=>{const{chat:t}=e;return(0,b.jsx)(o.Chat,{chat:t,theme:"chat-info",mode:o.Mode.INFO,onClick:M,showCommunityInfo:!0},t.id.toString())}}),_]})};var o=n(700071),i=n(394164),l=n(464659),s=a(n(831584)),r=n(780549),c=n(174834),d=n(877171),u=n(701777),f=n(512938),p=n(714574),h=a(n(556869)),m=n(548360),g=n(667294),x=n(379811),v=a(n(524578)),b=n(785893)},655237:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(81109)),i=n(122583),l=n(15842),s=n(632157),r=n(984330),c=n(72696),d=a(n(983345)),u=a(n(463954)),f=a(n(906015)),p=n(815651),h=n(745309),m=n(542358),g=a(n(718796)),x=n(713464),v=n(351053),b=n(738501),C=a(n(306007)),j=n(464659),M=a(n(740681)),_=n(998123),y=n(698867),S=n(780549),k=n(660666),P=a(n(988808)),w=a(n(876588)),T=a(n(700829)),I=a(n(109007)),E=a(n(366773)),A=a(n(305122)),N=a(n(704714)),O=a(n(928008)),R=n(834110),D=n(419e3),L=a(n(908081)),B=a(n(324093)),G=n(36045),F=n(568550),V=n(626194),H=n(900316),U=a(n(969358)),W=n(56884),Y=n(71957),q=a(n(570834)),z=n(714574),K=n(95576),X=a(n(932325)),Z=a(n(344460)),J=n(917504),Q=n(609181),$=n(114850),ee=a(n(832897)),te=a(n(499717)),ne=a(n(213393)),ae=n(932523),oe=n(242677),ie=a(n(335748)),le=n(10586),se=a(n(634152)),re=n(163139),ce=n(220584),de=n(180519),ue=n(717089),fe=n(625786),pe=n(390737),he=n(459857),me=n(887222),ge=n(130756),xe=a(n(124928)),ve=n(548360),be=n(667294),Ce=a(n(156720)),je=n(379811),Me=a(n(637660)),_e=a(n(558532)),ye=a(n(321201)),Se=n(785893);const ke={body:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},lastSectionRow:{marginBottom:"brac1wpa"}};function Pe(e){let{contact:t,catalogContext:n,onProductDetail:a,onProductCatalog:o}=e;const i=x.CatalogCollection.get(t.id);if(!i)return null;let l="",s=!1;(0,c.canSeeBizProfileV3)()&&(l=ve.fbt._("See all",null,{hk:"3dTwyT"}),s=!0);const{session:r}=n;return r.isAccidental()?null:(0,m.hasShop)(t.businessProfile)?(0,c.bannedShopsEnabled)()&&(0,m.isShopBanned)(t.businessProfile)?null:(0,Se.jsx)(ie.default,{businessProfile:t.businessProfile,catalog:i,subtitle:l,hideIncompleteRows:s}):(0,Se.jsx)(ne.default,{onProductDetail:a,onProductCatalog:o,catalog:i,subtitle:l,hideIncompleteRows:s,shouldLog:!0})}function we(e,t){const{contact:n,onVerification:a,onClose:m,onBack:ne,onProductDetail:ie,onProductCatalog:we,canLogQpl:Te=!0}=e,Ie=(0,ye.default)(),Ee=(0,be.useContext)(F.DrawerContext);(0,ue.useTsNavigation)({surface:"contact-info-drawer"});const[Ae,Ne,Oe,Re,De,Le,Be,Ge,Fe,Ve,He,Ue,We,Ye,qe,ze,Ke]=(0,je.useContactValues)(e.contact.id,[k.getId,z.getFormattedName,z.getFormattedUser,z.getFormattedShortName,k.getIsBusiness,k.getIsEnterprise,k.getIsMyContact,z.getCommonGroups,z.getBusinessProfile,k.getShowBusinessCheckmarkAsPrimary,k.getShowBusinessCheckmarkAsSecondary,k.getVerifiedName,k.getVerifiedLevel,k.getName,k.getNotifyName,k.getLabels,z.getPhoneNumber]),[Xe,Ze,Je,Qe,$e,et,tt,nt]=(0,je.useContactValues)(e.contact.id,[z.getBusinessCatalog,k.getIsMe,k.getStatusMute,z.getDisplayName,z.getShareOwnPn,k.getRequestedPnTimestamp,k.getCanRequestPhoneNumber,k.getIsIAS]),at=(0,Me.default)((()=>new q.default)),ot=(0,be.useRef)(!1),[it,lt]=(0,be.useState)(100),st=(0,be.useMemo)((()=>v.ChatCollection.get(Ae)),[Ae]),rt=Ze;(0,be.useEffect)((()=>{Fe&&!Fe.stale&&Xe&&x.CatalogCollection.findCarouselCatalog(Ae).catch((0,i.filteredCatch)(r.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`}))),(0,le.getFanOutListJob)([Ae,(0,he.assertGetMe)()]).then((e=>{(0,J.ensureE2ESessions)(e)}));const{session:t}=(0,ae.getProductCatalogContext)(Ee);if(t.isAccidental())H.DrawerManager.setDrawerContext("right",(0,ae.buildProductCatalogContext)(new oe.ProductCatalogSession,(0,R.getMaybeBizPlatformForLogging)(Ae.toString()),ge.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE));else if(De&&(0,c.canSeeBizProfileV3)()){const t=Ae===(0,he.getMaybeMeUser)(),{profileEntryPoint:n}=e;!t&&n&&(0,p.logProfileImpression)((0,ae.getProductCatalogSessionId)(Ee),n,!!(null==Fe?void 0:Fe.isProfileLinked),!!(null==Fe?void 0:Fe.coverPhoto))}Te&&Fe&&(0,Q.qplEndProfileView)(l.QuickLogActionType.SUCCESS)}),[]),(0,be.useEffect)((()=>{if((0,c.btmThreadsLoggingEnabled)()){var e;const t=null===(e=(0,he.getMaybeMeUser)())||void 0===e?void 0:e.equals(Ae),{session:n}=(0,ae.getProductCatalogContext)(Ee);n.isAccidental()||t||!(null==st?void 0:st.id)||(0,y.handleActivitiesForChatThreadLogging)([{activityType:"profileViews",ts:(0,s.unixTime)(),chatId:st.id}])}}),[]),(0,_e.default)((()=>{const{session:e}=(0,ae.getProductCatalogContext)(Ee);e.isAccidental()||De&&(0,c.canSeeBizProfileV3)()&&(0,p.logProfileExit)((0,ae.getProductCatalogSessionId)(Ee),it,null==Fe?void 0:Fe.isProfileLinked,!!(null==Fe?void 0:Fe.coverPhoto))}));const ct=()=>{m?m():null==Ie||Ie.requestDismiss()},dt=()=>{ne&&ne()},ut=e=>{if(!ot.current&&!xe.default.isPSA(Ae))return void pe.ToastManager.open((0,Se.jsx)(fe.Toast,{msg:ve.fbt._("No profile photo",null,{hk:"2bdeTO"})}));const t=e.target;$.ModalManager.openMedia((0,Se.jsx)(te.default,{contact:n,profilePicThumb:n.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:Ie})},ft=()=>{ot.current=!0},pt=e=>{(0,me.qplStartProductView)("ContactInfo"),ie(e)},ht=e=>{const t=Math.floor(100*(1+e.currentTarget.scrollTop/e.currentTarget.offsetHeight));t>it&&lt(t)},mt=Le?null:(0,Se.jsx)(w.default,{contact:n,onClose:ct,flatListController:at.current});let gt=null;e.onMediaGallery&&st&&(gt=(0,Se.jsx)(M.default,{chat:st,onMediaGallery:e.onMediaGallery}));let xt=null,vt=null;if(n&&De&&Fe&&Xe){const e=(0,Se.jsx)(Pe,{contact:n,catalogContext:(0,ae.getProductCatalogContext)(Ee),onProductDetail:pt,onProductCatalog:we});(0,c.canSeeBizProfileV3)()?vt=e:xt=e}const bt=st&&st.mute.canMute()?(0,Se.jsx)(ee.default,{chat:st,mute:st.mute,settings:se.default}):null;let Ct,jt;if(e.onStarred&&(Ct=(0,Se.jsx)(A.default,{onStarred:e.onStarred})),(0,W.isKeepInChatReadAndUIEnabled)()&&st&&(st.hasKeptMsgs()||(0,b.isEphemeralSettingOn)(st))){const t=(0,Se.jsx)(de.TextSpan,{theme:"title",size:"16",children:ve.fbt._("Kept Messages",null,{hk:"w8m3u"})}),n=(0,Se.jsx)(K.KeepInChatIcon,{color:ce.SvgColorProp.SECONDARY,height:20});jt=(0,Se.jsx)(j.ChatInfoDrawerSection,{titleTestId:"section-kept-messages",xstyle:ke.lastSectionRow,children:(0,Se.jsx)(C.default,{testid:"block-kept-messages",side:"chevron",icon:n,onClick:e.onKept,title:t})})}const Mt=st&&(0,b.shouldShowEphemeralSetting)(st)?(0,Se.jsx)(Y.EphemeralSettingRow,{onClick:e.onEphemeral,chat:st,testid:"contact-info-dm-setting-row"}):null,_t=xe.default.isPSA(Ae)?(0,Se.jsx)(O.default,{}):(0,Se.jsx)(T.default,{contact:(0,re.unproxy)(n),onVerificationClick:()=>{a()}}),yt=Ae.isLid()&&null==Ke,St=Ae.isLid(),kt=(0,Se.jsxs)(j.ChatInfoDrawerSection,{children:[bt,Mt,_t,st&&St?(0,Se.jsx)(_.PhoneNumberVisibilityIndicator1On1,{chat:st}):null]}),Pt=!De,wt=Pt||nt||Ae.isBotContact()?null:(0,Se.jsx)(d.default,{contact:(0,re.unproxy)(n)}),Tt=Pt?(0,Se.jsx)(P.default,{contact:(0,re.unproxy)(n)}):null,It=(0,c.canSeeBizProfileV3)()&&De&&Fe?(0,Se.jsx)(g.default,{contact:n,onProfilePicLoad:ft,onProfilePicClick:ut,onOpenStatus:()=>{(0,p.logStatusClick)((0,ae.getProductCatalogSessionId)(Ee),null==Fe?void 0:Fe.isProfileLinked,!!(null==Fe?void 0:Fe.coverPhoto))},businessProfile:Fe,onProductCatalog:we,isMessageYourselfChat:rt,isPhoneNumberHidden:yt}):(0,Se.jsx)(N.default,{contact:n,onDetailImageLoad:ft,onDetailImageClick:ut,isMessageYourselfChat:rt,isPhoneNumberHidden:yt});let Et,At,Nt,Ot=null;var Rt;De&&Fe&&((0,c.canSeeBizProfileV3)()&&Fe?(Ot=(0,Se.jsx)(f.default,{businessProfile:Fe}),Et=nt?null:(0,Se.jsx)(u.default,{contact:n}),(null!==(Rt=null==ze?void 0:ze.length)&&void 0!==Rt?Rt:0)>0&&(At=(0,Se.jsx)(U.default,{theme:"padding",children:(0,Se.jsx)(Z.default,{labels:ze,theme:"standalone"})})),Nt=ht):Fe&&(Ot=(0,Se.jsx)(h.BusinessProfile,{contact:n,businessProfile:Fe})));const Dt={title:ve.fbt._("Contact info",null,{hk:"LUJtH"}),type:V.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,focusBackOrCancel:!0};let Lt,Bt={};return Bt=ne?(0,o.default)({onBack:dt},Dt):(0,o.default)({onCancel:ct},Dt),Fe&&!0===Fe.isProfileLinked&&(0,c.bizLinkedAccountsEnabled)()&&(0,c.canViewBizLinkedAccounts)()&&(Lt=(0,Se.jsx)(E.default,{businessProfile:Fe,rowTheme:"linked-account-consumer"})),(0,Se.jsxs)(L.default,{ref:t,theme:"striped",testid:"chat-info-drawer",children:[(0,Se.jsx)(V.DrawerHeader,(0,o.default)((0,o.default)({},Bt),{},{testid:"contact-info-header"})),(0,Se.jsx)(B.default,{flatListControllers:[at.current],onScroll:Nt,children:(0,Se.jsxs)("section",{className:(0,Ce.default)(ke.body),children:[It,Et,At,vt,Ot,Lt,xt,Tt,gt,Ct,jt,kt,wt,undefined,!rt&&mt,!rt&&(0,Se.jsx)(I.default,{contact:n}),(0,Se.jsx)(j.ChatInfoDrawerButtonsSection,{children:st?(0,Se.jsx)(G.DrawerButton,{testid:"li-delete-chat",icon:(0,Se.jsx)(D.DeleteIcon,{}),color:"danger",onClick:()=>{const e=v.ChatCollection.assertGet(Ae);S.Cmd.deleteOrExitChatFromEntryPoint(e,12)},theme:"chat-info",children:X.default.t(221)}):null})]})})]},"contact-info-modal")}var Te=(0,be.forwardRef)(we);t.default=Te},700829:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onVerificationClick:t}=e,[n,a]=(0,h.useContactValues)(e.contact.id,[i.getId,i.getPrivacyMode]),g=function(e,t){if((0,o.default)(t.user))return{text:p.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"}),title:p.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,c.default)(p.fbt._("WhatsApp secures your messages and calls with this account.",null,{hk:"18Ci1q"}),(0,s.getSupportChatSafetyFaqUrl)(),p.fbt._("Learn more about chats with WhatsApp Support.",null,{hk:"1an25A"}))}};switch(e){case d.ReducedPrivacyMode.E2EE:return null;case d.ReducedPrivacyMode.BSP:return{text:p.fbt._("This business works with other companies to manage this chat. Click to learn more.",null,{hk:"VbOOZ"}),title:p.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,c.default)((0,r.formatBspModalText)(),(0,s.getE2EEnterpriseFaqUrl)())}};case d.ReducedPrivacyMode.FB:{let e;return e=t.isIAS()?p.fbt._("WhatsApp Surveys uses a secure service from Meta to manage this chat. Click to learn more.",null,{hk:"49GQ04"}):p.fbt._("This business uses a secure service from Meta to manage this chat. Click to learn more.",null,{hk:"3wvGOC"}),{text:e,title:p.fbt._("Security",null,{hk:"3j3j0a"}),onClick:()=>{(0,c.default)((0,r.formatFbModalText)(t.isIAS()),(0,s.getE2EEnterpriseFaqUrl)())}}}}}((0,d.getReducedPrivacyMode)(a),n);if(g)return(0,m.jsx)(l.default,{highlightSurface:f.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,title:g.title,text:g.text,onClick:g.onClick});const x=(0,u.isVoiceCallEnabled)()||(0,u.isVideoCallEnabled)()?p.fbt._("Messages and calls are end-to-end encrypted. Click to verify.",null,{hk:"GtGQH"}):p.fbt._("Messages are end-to-end encrypted. Click to verify.",null,{hk:"1AqhWR"});return(0,m.jsx)(l.default,{highlightSurface:f.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,onClick:t,text:x})};var o=a(n(143589)),i=n(660666),l=a(n(409558)),s=n(258105),r=n(729763),c=a(n(606037)),d=n(35109),u=n(571256),f=n(130756),p=n(548360),h=n(379811),m=n(785893)},109007:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,[n,a,P,w,T,I]=(0,S.useContactValues)(e.contact.id,[u.getId,p.getDisplayName,u.getIsBusiness,p.getIsContactBlocked,u.getIsIAS,u.getIsMyContact]),E=(0,k.jsx)(m.Name,{contact:e.contact,skipCheckMark:!0});let A=null;n.isBotContact()||(A=w?(0,k.jsx)(f.DrawerButton,{testid:"li-unblock",color:"success",icon:(0,k.jsx)(b.SettingsBlockedIcon,{directional:!0}),onClick:()=>(0,l.handleUnblock)(e.contact,s.BlockEntryPoint.Profile),theme:"chat-info",children:y.fbt._("Unblock {contact_name}",[y.fbt._param("contact_name",E)],{hk:"1fZZEx"})}):(0,k.jsx)(f.DrawerButton,{testid:"li-block",color:"danger",icon:(0,k.jsx)(b.SettingsBlockedIcon,{directional:!0}),onClick:()=>{const a=()=>{const t=r.ChatCollection.get(n);if(null==t?void 0:t.isPSA){const e=t.msgs.last();(0,M.logChatPSARemove)(e,1,1)}(0,i.blockContact)({contact:e.contact,blockEntryPoint:s.BlockEntryPoint.Profile}),h.ModalManager.close()};let l=(0,k.jsx)(d.ConfirmPopup,{onOK:a,okText:y.fbt._("Block",null,{hk:"9s17C"}),onCancel:()=>h.ModalManager.close(),title:y.fbt._("Block {contact_name}?",[y.fbt._param("contact_name",E)],{hk:"26yDKy"}),children:y.fbt._("Blocked contacts will no longer be able to call you or send you messages.",null,{hk:"3ioCkx"})});_.default.isPSA(n)?l=(0,k.jsx)(g.default,{onBlock:a,onCancel:()=>h.ModalManager.close()}):P&&(l=(0,k.jsx)(o.default,{contact:t,blockEntryPoint:s.BlockEntryPoint.Profile,withReport:!1})),h.ModalManager.open(l)},theme:"chat-info",children:y.fbt._("Block {contact_name}",[y.fbt._param("contact_name",E)],{hk:"laDqJ"})}));let N=T?y.fbt._("Report",null,{hk:"2SQkZ4"}):y.fbt._("Report business",null,{hk:"2Tvnn8"});P||(N=y.fbt._("Report {contact_name}",[y.fbt._param("contact_name",E)],{hk:"3Dqyjo"}));const O=_.default.isPSA(n)||n.isBotContact()?null:(0,k.jsx)(f.DrawerButton,{testid:"li-report-spam",color:"danger",icon:(0,k.jsx)(j.ThumbsDownIcon,{}),onClick:()=>{h.ModalManager.open((0,k.jsx)(x.default,{isMessage:!1,isBusiness:e.contact.isBusiness,isGroupChat:!1,onReport:()=>{const t=r.ChatCollection.get(e.contact.id);t&&(0,v.sendReport)({chat:t,spamFlow:C.SpamFlow.AccountInfoReport}),h.ModalManager.close()},onReportBlockClear:()=>{const t=r.ChatCollection.get(e.contact.id);t&&(0,v.sendSpamBlockClear)(t,C.SpamFlow.AccountInfoReport),h.ModalManager.close()},onCancel:()=>h.ModalManager.close()}))},theme:"chat-info",children:N});return(0,k.jsxs)(c.ChatInfoDrawerButtonsSection,{children:[A,O]})};var o=a(n(208423)),i=n(547979),l=n(923092),s=n(400436),r=n(351053),c=n(464659),d=n(103440),u=n(660666),f=n(36045),p=n(714574),h=n(114850),m=n(21645),g=a(n(179197)),x=a(n(338695)),v=n(383296),b=n(226017),C=n(453603),j=n(21698),M=n(369084),_=a(n(124928)),y=n(548360),S=n(379811),k=n(785893)},305122:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onStarred:t}=e;const n=(0,d.jsx)(r.TextSpan,{theme:"title",size:"16",children:c.fbt._("Starred messages",null,{hk:"4wVbNG"})}),a=(0,d.jsx)(l.StarIcon,{color:s.SvgColorProp.SECONDARY,height:20});return(0,d.jsx)(i.ChatInfoDrawerSection,{titleTestId:"section-starred-messages",children:(0,d.jsx)(o.default,{testid:"block-starred-messages",side:"chevron",icon:a,onClick:t,title:n})})};var o=a(n(306007)),i=n(464659),l=n(227341),s=n(220584),r=n(180519),c=n(548360),d=n(785893)},836513:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,f.jsxs)(r.FlexRow,{xstyle:m.container,children:[(0,f.jsx)(r.FlexColumn,{xstyle:[m.item],children:p}),(0,f.jsx)(r.FlexColumn,{xstyle:[m.text,m.item],children:(0,f.jsx)(d.TextSpan,{testid:"contact-info-pnh-info",children:u.fbt._("This person's phone number is not shared in this chat. {=m2}",[u.fbt._implicitParam("=m2",(0,f.jsx)(o.default,{testid:"contact-info-pnh-learn-more",onClick:h,children:u.fbt._("Learn more",null,{hk:"t6HJf"})}))],{hk:"3CEKuh"})})})]})};var o=a(n(196554)),i=n(136858),l=n(753233),s=n(258105),r=n(690495),c=n(220584),d=n(180519),u=n(548360),f=(a(n(156720)),n(785893));const p=(0,f.jsx)(i.DialpadIcon,{directional:!0,color:c.SvgColorProp.SECONDARY}),h=()=>{const e=(0,s.getPhoneNumberHidingFaqUrl)();(0,l.openExternalLink)(e)},m={container:{alignItems:"gndfcl4n",backgroundColor:"f6ipylw5",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",display:"p357zi0d",marginTop:"fgtikrv0",marginEnd:"k1jo73ug",marginBottom:"iyjcf3gk",marginStart:"isfiuinm",width:"c0boj6n4",height:"q1n4p668",maxWidth:"l2o74p5l",paddingStart:"nu34rnf1",paddingEnd:"ft2m32mm",lineHeight:"erpdyial"},text:{color:"pm5hny62",marginTop:"m3ct2rho",marginEnd:"k1jo73ug",marginBottom:"ec1z5skj",marginStart:"isfiuinm",wordBreak:"cw3vfol9",overflowWrap:"fd365im1"},item:{marginStart:"p3lsiedt",marginEnd:"q471nw87",paddingTop:"qomlamqu",paddingEnd:"lnjlmjd6",paddingBottom:"bxcbqipq",paddingStart:"mc6o24uu"}}},704714:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{contact:n,onDetailImageLoad:a,onDetailImageClick:o,isMessageYourselfChat:i,isPhoneNumberHidden:l}=e;const s=O.fbt._("Official WhatsApp Account",null,{hk:"2cEUzF"}),r=null!=n.phoneNumber?f.ContactCollection.get(n.phoneNumber):null;if(A.default.isPSA(n.id))t=s;else if((0,p.getIsMyContact)(n))t=(0,N.widToFormattedUser)(n.id);else if(n.id.isLid()&&null!=r&&(0,p.getIsMyContact)(r))t=(0,N.widToFormattedUser)(n.phoneNumber);else{const e=(0,p.getNotifyName)(n);null!=e&&(t=`~${e}`)}return(0,D.jsxs)(v.default,{theme:"padding-large",children:[(0,D.jsx)("div",{className:(0,R.default)(L.avatar),children:(0,D.jsx)(g.DetailImage,{id:n.id,size:g.DetailImageSize.Large,loader:!0,onLoad:a,onClick:o,quality:g.DetailImageQuality.High})}),(0,D.jsxs)(C.FlexColumn,{align:"center",children:[(0,D.jsx)(P.TextHeader,{level:"2",size:"24",xstyle:L.contactName,children:(0,D.jsx)(_.Name,{testid:"contact-info-subtitle",contact:n,showMessageYourselfName:i,selectable:!0,breakWord:!0})}),null!=t&&(0,D.jsx)("div",{className:(0,R.default)(L.secondaryWrapper),children:(0,D.jsx)(m.SelectableSpan,{dir:"auto",selectable:!0,children:(0,D.jsx)(P.TextSpan,{size:"16",color:"secondary",children:t})})})]}),l&&(0,D.jsx)(h.default,{}),!i&&(0,D.jsx)(B,{contact:n,displayRequestPnButton:l}),(0,D.jsx)(j.default,{labels:n.labels})]})};var o=n(287461),i=n(351053),l=n(164777),s=a(n(983098)),r=a(n(9729)),c=n(230255),d=n(780549),u=n(877171),f=n(177938),p=n(660666),h=a(n(836513)),m=n(306703),g=n(23641),x=n(521332),v=a(n(969358)),b=n(581354),C=n(690495),j=a(n(344460)),M=n(114850),_=n(21645),y=n(417016),S=a(n(755140)),k=n(163139),P=n(180519),w=n(676345),T=n(190848),I=n(961745),E=n(130756),A=a(n(124928)),N=n(931019),O=n(548360),R=a(n(156720)),D=n(785893);const L={avatar:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"pz0xruzv"},secondaryWrapper:{lineHeight:"a4ywakfo",marginTop:"qt60bha0"},contactName:{textAlign:"qfejxiq4"}};function B(e){let{contact:t,displayRequestPnButton:n}=e;const a=(0,r.default)((0,k.unproxy)(t)),f=()=>{(0,b.findChat)(t.id,"chatInfoTopCard").then((e=>{d.Cmd.openChatFromUnread(e).then((t=>{t&&u.ComposeBoxActions.focus(e)}))}))},h=!(!a.isVideoCallEnabled&&!a.isVoiceCallEnabled||A.default.isPSA(t.id))&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(s.default,{Icon:T.VoiceCallFilledIcon,iconWidth:19,label:O.fbt._("Audio",null,{hk:"1b375N"}),testid:"contact-action voice-call-button",xstyle:[w.uiMargin.start16,w.uiMargin.end16],disabled:!a.canStartVoiceCall,onClick:()=>{const e=t.id.isLid()?t.phoneNumber:t.id;(0,y.shouldDisplayPhoneNumberHidingModal)(t)?(0,y.displayPhoneNumberHidingModal)(t,!1):null!=e&&(null===I.Voip||void 0===I.Voip||I.Voip.callStart(e,!1))}}),(0,D.jsx)(s.default,{Icon:c.ChatInfoVideoIcon,label:O.fbt._("Video",null,{hk:"3zMUsJ"}),testid:"contact-action video-call-button",xstyle:[w.uiMargin.start16,w.uiMargin.end16],disabled:!a.canStartVideoCall,onClick:()=>{const e=t.id.isLid()?t.phoneNumber:t.id;(0,y.shouldDisplayPhoneNumberHidingModal)(t)?(0,y.displayPhoneNumberHidingModal)(t,!0):null!=e&&(null===I.Voip||void 0===I.Voip||I.Voip.callStart(e,!0))}})]}),m=O.fbt._("Request",null,{hk:"1Qh451"}),g=O.fbt._("Requested",null,{hk:"3GgAXn"}),v=(0,p.getCanRequestPhoneNumber)(t)?m:g,j=n&&(0,D.jsx)(s.default,{Icon:x.DialpadSmallIcon,iconWidth:19,label:v,xstyle:[w.uiMargin.start16,w.uiMargin.end16],disabled:!(0,p.getCanRequestPhoneNumber)(t),onClick:()=>{M.ModalManager.open((0,D.jsx)(S.default,{entryPoint:E.PNH_ENTRY_POINT_TYPE.CHAT_INFO_REQUEST}))},testid:"request-phone-number-button-consumer"});let _=null;if((0,o.getABPropConfigValue)("unified_user_profile_navigation_enabled")){const e=i.ChatCollection.getActive();_=!(null==e?void 0:e.id.equals(t.id))&&(0,D.jsx)(s.default,{Icon:l.ChatIcon,iconWidth:19,label:O.fbt._("Message",null,{hk:"4gkjcu"}),testid:"contact-action chat-button",xstyle:[w.uiMargin.start16,w.uiMargin.end16],disabled:!1,onClick:f})}return(0,D.jsxs)(C.FlexRow,{justify:"center",xstyle:[w.uiMargin.top8,w.uiMargin.bottom4],children:[j,_,h]})}},928008:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e={text:c.fbt._("This is an official account of WhatsApp",null,{hk:"2Av1mT"}),title:c.fbt._("Security",null,{hk:"2jDPpv"}),onClick:()=>{(0,s.default)((0,l.formatWaChatSecurityModalText)(),(0,i.getWAChatFaqUrl)())}};return(0,d.jsx)(o.default,{highlightSurface:r.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_CONTACT,title:e.title,text:e.text,onClick:e.onClick})};var o=a(n(409558)),i=n(258105),l=n(729763),s=a(n(606037)),r=n(130756),c=n(548360),d=n(785893)},983345:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.contact.getStatus(),[n,a]=(0,p.useContactValues)(e.contact.id,[s.getId,c.getPhoneNumber]),{status:x}=(0,h.useModelValues)(t,["status"]),v=""===x?null:(0,m.jsx)(o.default,{multiline:!0,children:(0,m.jsx)(u.TextSpan,{theme:"title",children:(0,m.jsx)(l.default,{id:n})})});let b;n.isLid()?null!=a&&(b=a):b=n;const C=b?(0,m.jsx)(o.default,{separator:!0,children:(0,m.jsx)(r.SelectableSpan,{dir:"auto",selectable:!0,children:(0,m.jsx)(u.TextSpan,{theme:"title",children:(0,f.widToFormattedUser)(b)})})}):null;return(0,m.jsxs)(i.ChatInfoDrawerSection,{xstyle:g.container,titleTestId:"section-about-and-phone-number",title:d.default.t(211),children:[v,C]})};var o=a(n(355858)),i=n(464659),l=a(n(203528)),s=n(660666),r=n(306703),c=n(714574),d=a(n(932325)),u=n(180519),f=n(931019),p=(a(n(156720)),n(379811)),h=n(655241),m=n(785893);const g={container:{paddingBottom:"przvwfww"}}},463954:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contact:t}=e,n=(0,f.jsx)(m,{contact:t,onClick:function(){c.ModalManager.open((0,f.jsx)(d.default,{contact:t}))}});return(0,f.jsx)(s.default,{xstyle:p.businessAccount,children:n})};var o=n(354458),i=n(660666),l=a(n(831269)),s=a(n(969358)),r=n(731085),c=n(114850),d=a(n(517729)),u=n(548360),f=(a(n(156720)),n(785893));const p={businessAccount:{borderTop:"mug5vpb7",fontSize:"f8jlpxt4"},businessTitleWithSMBUpsell:{lineHeight:"hzeshm6i"},bannerSvgContainer:{marginTop:"b9l0eqez",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},bannerSvg:{color:"jq3rn4u7",width:"dh5rsm73"}};function h(e){return(0,o.isBotEnabled)()&&(0,i.getId)(e).isBotContact()?u.fbt._("",null,{hk:"1SN9QF"}):u.fbt._("This is a business account.",null,{hk:"2x8QUJ"})}function m(e){let{onClick:t,contact:n}=e;return(0,f.jsx)(l.default,{testid:"business-title",xstyle:p.businessTitleWithSMBUpsell,onClick:t,side:(0,f.jsx)(r.InfoIcon,{xstyle:p.bannerSvgContainer,iconXstyle:p.bannerSvg,displayInline:!0}),children:h(n)})}},520228:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const{contact:a,onProductCatalog:H}=e,U=(0,G.useContext)(M.DrawerContext),W=(0,T.getProductCatalogSessionId)(U),Y=(0,m.default)((0,N.unproxy)(e.contact));function q(){return(q=(0,o.default)((function*(){const e=yield(0,y.findChat)(a.id,"businessActions");(yield v.Cmd.openChatFromUnread(e))&&(_.DrawerManager.closeDrawerRight(),(0,s.btmThreadsLoggingEnabled)()&&b.ComposeBoxActions.addMsgSendingLogAttributes(e,{handleMultiple(){(0,x.handleActivitiesForChatThreadLogging)([{activityType:"profileReplies",ts:(0,i.unixTime)(),chatId:e.id}])}}))}))).apply(this,arguments)}let z;const K=f.ChatCollection.getActive();if(!(null==K?void 0:K.id.equals(a.id))){var X,Z;(0,r.logMessageClick)(W,null===(X=a.businessProfile)||void 0===X?void 0:X.isProfileLinked,!!(null===(Z=a.businessProfile)||void 0===Z?void 0:Z.coverPhoto)),z=(0,F.jsx)(h.default,{xstyle:[O.uiMargin.horiz12],Icon:(0,l.getABPropConfigValue)("unified_user_profile_navigation_enabled")?p.ChatIcon:g.ChatMsgIcon,label:B.fbt._("Message",null,{hk:"mZ5DE"}),onClick:()=>{!function(){q.apply(this,arguments)}()},testid:"business-action chat"})}let J,Q,$;Y.isVoiceCallEnabled&&(J=(0,F.jsx)(h.default,{xstyle:[O.uiMargin.horiz12],Icon:R.VoiceCallFilledIcon,label:B.fbt._("Audio",null,{hk:"rWU8D"}),disabled:!Y.canStartVoiceCall,onClick:()=>{var e,t;(0,r.logVoiceCallClick)(W,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto));const n=a.id.isLid()?a.phoneNumber:a.id;(0,w.shouldDisplayPhoneNumberHidingModal)(a)?(0,w.displayPhoneNumberHidingModal)(a,!1):null!=n&&(null===D.Voip||void 0===D.Voip||D.Voip.callStart(n,!1))},testid:"business-action voice-call"}));(null===(t=a.businessProfile)||void 0===t||null===(n=t.profileOptions)||void 0===n?void 0:n.commerceExperience)===c.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(Q=(0,F.jsx)(h.default,{xstyle:[O.uiMargin.horiz12],Icon:u.CatalogFilledIcon,label:B.fbt._("Catalog",null,{hk:"3QDkTE"}),onClick:()=>{var e,t;(0,r.logCatalogClick)(W,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto)),H((0,T.getProductCatalogContext)(U),"ContactInfo")},testid:"business-action catalog"}));if((0,d.hasShop)(a.businessProfile)){(0,s.bannedShopsEnabled)()&&(0,d.isShopBanned)(a.businessProfile)||($=(0,F.jsx)(h.default,{xstyle:[O.uiMargin.horiz12],Icon:A.ShopFilledIcon,label:B.fbt._("Shop",null,{hk:"3KsdlE"}),onClick:function(){var e,t;(0,r.logShopsClick)(W,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto)),(0,d.goToShop)(a.businessProfile)},testid:"business-action shop"}))}const ee=!(0,C.getIsIAS)(a)&&!(0,C.getId)(a).isBotContact()&&(0,F.jsx)(h.default,{xstyle:[O.uiMargin.horiz12],Icon:k.ForwardFilledIcon,label:B.fbt._("Share",null,{hk:"4F3c6E"}).toString(),onClick:function(){var e,t;(0,r.logForwardClick)(W,null===(e=a.businessProfile)||void 0===e?void 0:e.isProfileLinked,!!(null===(t=a.businessProfile)||void 0===t?void 0:t.coverPhoto)),P.ModalManager.open((0,F.jsx)(E.SendContactsModalLoadable,{contacts:[(0,N.unproxy)(a)],onContactsSent:e=>{v.Cmd.openChatFromUnread(e).then((()=>{}))}}))},testid:"business-action forward"}),te=B.fbt._("Request",null,{hk:"1Qh451"}),ne=B.fbt._("Requested",null,{hk:"3GgAXn"}),ae=(0,C.getCanRequestPhoneNumber)(a)?te:ne,oe=e.displayRequestPnButton&&(0,F.jsx)(h.default,{Icon:j.DialpadSmallIcon,xstyle:[O.uiMargin.horiz12],iconWidth:19,label:ae,disabled:!(0,C.getCanRequestPhoneNumber)(a),onClick:()=>{P.ModalManager.open((0,F.jsx)(I.default,{entryPoint:L.PNH_ENTRY_POINT_TYPE.CHAT_INFO_REQUEST}))},testid:"request-phone-number-button-business"});return(0,F.jsxs)(S.FlexRow,{xstyle:V.actionsRow,justify:"center",children:[oe,z,J,Q,$,ee]})};var o=a(n(348926)),i=n(632157),l=n(287461),s=n(72696),r=n(815651),c=n(817649),d=n(542358),u=n(623282),f=n(351053),p=n(164777),h=a(n(983098)),m=a(n(9729)),g=n(174571),x=n(698867),v=n(780549),b=n(877171),C=n(660666),j=n(521332),M=n(568550),_=n(900316),y=n(581354),S=n(690495),k=n(672185),P=n(114850),w=n(417016),T=n(932523),I=a(n(755140)),E=n(340576),A=n(76104),N=n(163139),O=n(676345),R=n(190848),D=n(961745),L=n(130756),B=n(548360),G=n(667294),F=(a(n(156720)),n(785893));const V={actionsRow:{marginTop:"c46o30wg",marginEnd:"bsg2wrd4",marginBottom:"brac1wpa",marginStart:"f459d30t","@media (min-width: 1300px)":{marginStart:"hfp8519b",marginEnd:"acdu7ris"}}}},450715:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:t,isProfileLinked:n,hasCoverPhoto:a}=e,l=(0,d.getProductCatalogSessionId)((0,m.useContext)(r.DrawerContext)),s=(0,i.getBusinessOpenState)(t),[c,p]=(0,m.useState)(!0);if(null==t)return null;const b=(0,u.getBusinessHours)(t).map((e=>{const{day:t,hours:n,first:a}=e;let o=t,l=n,r=!1;if(a)switch(s.status){case i.BUSINESS_OPEN_STATUS.OPEN_24H:o=h.fbt._("Open now",null,{hk:"28hpHy"}),l=h.fbt._("Open 24 hours",null,{hk:"1AlfF5"}),r=!0;break;case i.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:o=h.fbt._("Open now",null,{hk:"28hpHy"}),l=h.fbt._("Open by appointment only",null,{hk:"1nxH9v"}),r=!0;break;case i.BUSINESS_OPEN_STATUS.OPEN:o=h.fbt._("Open now",null,{hk:"28hpHy"}),r=!0;break;case i.BUSINESS_OPEN_STATUS.CLOSED_TODAY:l=h.fbt._("Closed",null,{hk:"3IRgct"})}return!a&&c?null:(0,g.jsx)(v,{day:o,dayIsOpen:r,hours:l,first:a,collapsed:c},t)}));return(0,g.jsx)(f.default,{xstyle:x.businessHours,onClick:()=>{(0,o.logHoursClick)(l,n,!!a),p(!c)},testid:"business-hours-expand",children:b})};var o=n(815651),i=n(542358),l=n(592362),s=n(752253),r=n(568550),c=n(305521),d=n(932523),u=n(341463),f=a(n(625903)),p=a(n(363467)),h=n(548360),m=n(667294),g=(a(n(156720)),n(785893));const x={businessHours:{display:"f804f6gw",width:"ln8gz9je",textAlign:"ml4r5409"}};function v(e){if(e.first){const t=(0,g.jsx)("div",{className:p.default.businessHoursChevron,role:"button",children:(0,g.jsx)(l.ChevronDownAltIcon,{className:e.collapsed?"":p.default.flipSvg,displayInline:!0})});return(0,g.jsxs)("div",{className:(0,s.cx)({[p.default.firstRow]:e.first,[p.default.businessHoursRow]:!0}),children:[(0,g.jsx)("div",{className:(0,s.cx)({[p.default.dayIsOpen]:e.dayIsOpen,[p.default.businessHoursDay]:!0}),children:(0,g.jsx)(c.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:p.default.businessHoursHours,children:(0,g.jsx)(c.EmojiText,{direction:"auto",text:e.hours})}),t]})}return(0,g.jsxs)("div",{className:p.default.businessHoursRow,children:[(0,g.jsx)("div",{className:p.default.businessHoursDay,children:(0,g.jsx)(c.EmojiText,{direction:"auto",text:e.day})}),(0,g.jsx)("div",{className:p.default.businessHoursHours,children:(0,g.jsx)(c.EmojiText,{direction:"auto",text:e.hours})})]})}},906015:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessProfile:t}=e,{description:n,address:a,latitude:j,longitude:M,website:_,email:y,businessHours:S,isProfileLinked:k,coverPhoto:P}=(0,v.useModelValues)(t,["description","address","latitude","longitude","website","email","businessHours","isProfileLinked","coverPhoto"]),w=(0,x.useContext)(r.DrawerContext),T=(0,p.getProductCatalogSessionId)(w);let I,E,A,N,O,R;null!=n&&(I=(0,b.jsx)("div",{className:m.default.section,children:(0,b.jsx)(d.ExpandableText,{text:n,textLimit:s.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,b.jsx)(c.EmojiText,{className:m.default.description,selectable:!0,direction:"auto",text:n,textLimit:t,breakWord:!0})}})}));null!=S&&(E=(0,b.jsx)("div",{className:m.default.section,children:(0,b.jsx)(o.default,{businessHours:S,isProfileLinked:k,hasCoverPhoto:!!P})}));null!=a&&(A=(0,b.jsx)("div",{className:m.default.section,children:(0,b.jsx)(c.EmojiText,{selectable:!0,direction:"auto",text:a})}));null!=j&&null!=M&&(N=(0,b.jsx)("div",{style:{height:132},className:(0,g.default)(m.default.section,m.default.map),children:(0,b.jsx)(f.default,{lat:j,lng:M,name:a||"",width:590,height:132,onClick:()=>(0,i.logLocationClick)(T,k,!!P),testid:"business-info-map"})}));null!=y&&(O=(0,b.jsx)("div",{className:m.default.section,children:(0,b.jsx)(u.ExternalLink,{href:`mailto:${y}`,onClick:()=>(0,i.logEmailClick)(T,k,!!P),testid:"business-info-email",children:y})}));null!=_&&_.length>0&&(R=(0,b.jsx)("div",{className:m.default.section,children:_.map((e=>(0,b.jsx)("div",{children:(0,b.jsx)(u.ExternalLink,{href:h.default.toMaliciousSiteRedirect(e),onClick:()=>(0,i.logWebsiteClick)(T,k,!!P),testid:"business-info-website",children:e})},e)))}));if(null==I&&null==E&&null==A&&null==N&&null==O&&null==R)return null;return(0,b.jsxs)(l.ChatInfoDrawerSection,{xstyle:C.container,children:[I,E,A,N,O,R]})};var o=a(n(450715)),i=n(815651),l=n(464659),s=a(n(846870)),r=n(568550),c=n(305521),d=n(999649),u=n(753233),f=a(n(459510)),p=n(932523),h=a(n(79291)),m=a(n(850858)),g=a(n(261294)),x=n(667294),v=(a(n(156720)),n(655241)),b=n(785893);const C={container:{paddingTop:"i4pc7asj",paddingBottom:"q1nnjopg"}}},766491:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{contact:n,isMessageYourselfChat:a}=e;let b,C,j;var M;null!=(null===(t=n.businessProfile)||void 0===t?void 0:t.customUrl)&&(j=(0,u.jsx)("div",{className:(0,d.default)(h),children:(0,u.jsx)(l.EmojiText,{text:null===(M=n.businessProfile)||void 0===M?void 0:M.customUrl,direction:"auto",titlify:!0,breakWord:!0,inlineblock:!0})}));if((0,i.getIsMe)(n))if(a)b=(0,u.jsx)(s.Name,{contact:n,showBusinessCheckmark:(0,i.getShowBusinessCheckmarkAsPrimary)(n),showMessageYourselfName:!0,useVerifiedName:!0,breakWord:!0,selectable:!0}),C=(0,u.jsx)(s.Name,{contact:n,showBusinessCheckmark:(0,i.getShowBusinessCheckmarkAsPrimary)(n),selectable:!0});else if(n.name!==n.verifiedName){let e;(0,i.getShowBusinessCheckmarkAsSecondary)(n)&&(e=(0,u.jsx)("div",{className:(0,d.default)(p),children:(0,u.jsx)(r.PsaVerifiedIcon,{})})),b=(0,u.jsx)(s.Name,{contact:n,breakWord:!0,selectable:!0}),C=(0,u.jsx)("div",{className:(0,d.default)(h),children:(0,u.jsxs)("div",{className:(0,d.default)(v),children:[(0,u.jsx)(l.EmojiText,{text:`~${n.verifiedName}`,className:(0,d.default)(x),direction:"auto",ellipsify:!0,titlify:!0,selectable:!0}),e]})})}else b=(0,u.jsx)(s.Name,{contact:n,showBusinessCheckmark:(0,i.getShowBusinessCheckmarkAsPrimary)(n),breakWord:!0,selectable:!0});else b=(0,i.getIsIAS)(n)?(0,u.jsx)("span",{children:(0,u.jsx)(s.Name,{contact:n})}):(0,u.jsx)(l.EmojiText,{text:n.verifiedName,direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0}),C=(0,i.getIsIAS)(n)?(0,u.jsx)("div",{className:(0,d.default)(h),children:(0,u.jsx)(s.Name,{testid:"contact-info-subtitle",contact:n,showBusinessCheckmark:(0,i.getShowBusinessCheckmarkAsPrimary)(n),selectable:!0})}):(0,o.isBotEnabled)()&&(0,i.getId)(n).isBotContact()?(0,u.jsx)("div",{className:(0,d.default)(m),children:(0,u.jsx)(l.EmojiText,{text:c.fbt._("",null,{hk:"3wsfuo"}),direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0})}):(0,u.jsx)("div",{className:(0,d.default)(h),children:(0,u.jsx)(l.EmojiText,{text:c.fbt._("Official WhatsApp Account",null,{hk:"4oZMU1"}),direction:"auto",ellipsify:!0,titlify:!0,breakWord:!0,selectable:!0})});return(0,u.jsxs)("div",{className:(0,d.default)(f),children:[(0,u.jsx)("div",{className:(0,d.default)(g),children:b}),C,j]})};var o=n(354458),i=n(660666),l=n(305521),s=n(21645),r=n(376355),c=n(548360),d=a(n(156720)),u=n(785893);const f={marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"},p={display:"ew8mgplc",marginTop:"o9i7y497",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"k6y3xtnu"},h={color:"p6nhtbpp",fontSize:"enbbiyaj",lineHeight:"tkq7s68q",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"inww9tbj",marginStart:"svoq16ka"},m={display:"l7jjieqr",color:"eruf1vka",backgroundColor:"mfl62aol",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",fontSize:"f8jlpxt4",paddingTop:"ocd2b0bc",paddingEnd:"i8go5xc4",paddingBottom:"aa0kojfi",paddingStart:"e1yunedv",lineHeight:"tkq7s68q",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"inww9tbj",marginStart:"svoq16ka"},g={fontSize:"iqrewfee",fontWeight:"sy6s5v3r",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"or9x5nie",marginStart:"svoq16ka"},x={flexGrow:"tvf2evcx"},v={display:"p357zi0d",justifyContent:"ac2vgrno"}},449397:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessOpenHours=function(e){const{hours:t}=e,n=function(e){switch(e.status){case i.BUSINESS_OPEN_STATUS.OPEN_24H:return s.fbt._("{open} 24 hours",[s.fbt._param("open",`<span class="${(0,r.default)(u)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`)],{hk:"1aA6f9"});case i.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return s.fbt._("{open} by appointment only",[s.fbt._param("open",`<span class="${(0,r.default)(u)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`)],{hk:"z8CGT"});case i.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return s.fbt._("{open} until {time}, {additionalOpenTime} - {additionalCloseTime}",[s.fbt._param("open",`<span class="${(0,r.default)(u)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`),s.fbt._param("time",p(e.openUntil)),s.fbt._param("additionalOpenTime",p(e.additionalOpen)),s.fbt._param("additionalCloseTime",p(e.additionalClose))],{hk:"2dJgLQ"});if(e.openUntil)return s.fbt._("{open} until {time}",[s.fbt._param("open",`<span class="${(0,r.default)(u)}">${s.fbt._("Open",null,{hk:"187rvw"}).toString()}</span>`),s.fbt._param("time",p(e.openUntil))],{hk:"3Dd8an"});break;case i.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?s.fbt._("{closed}, opens at {time}",[s.fbt._param("closed",`<span class="${(0,r.default)(d)}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`),s.fbt._param("time",p(e.opensAt))],{hk:"LvVmY"}):`<span class="${(0,r.default)(d)}">${s.fbt._("Closed now",null,{hk:"2oDK4r"}).toString()}</span>`;case i.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${(0,r.default)(d)}">${s.fbt._("Closed today",null,{hk:"3uCCvH"}).toString()}</span>`}return null}((0,i.getBusinessOpenState)(t));if(null==n)return null;const a=o.default.sanitize(n.toString());return(0,c.jsx)("div",{className:(0,r.default)(f),dangerouslySetInnerHTML:{__html:a}})};var o=a(n(724843)),i=n(542358),l=a(n(932325)),s=n(548360),r=a(n(156720)),c=n(785893);const d={color:"mvxzr2tb"},u={color:"j5au4wul"},f={color:"sbs3osm6",fontSize:"f8jlpxt4",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"g105fvfm",marginStart:"svoq16ka"};function p(e){return null==e?"":e.toLocaleTimeString(l.default.getLocale(),{hour:"numeric",minute:"2-digit"})}},745309:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfile=function(e){const{contact:t}=e,[n,a,o,r]=(0,N.useContactValues)(e.contact.id,[p.getId,p.getVerifiedLevel,p.getName,p.getVerifiedName]),c=(0,O.useModelValues)(e.businessProfile,["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]);(0,A.useEffect)((()=>{new P.ViewBusinessProfileWamEvent({viewBusinessProfileAction:w.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}),[]);const u=(0,R.jsx)(D,{contact:t});let h,b,j,M,_,y;const I=c;if(I.stale)h=(0,R.jsx)("div",{className:T.default.contactBusinessInfoSpinner,children:(0,R.jsx)(k.Spinner,{size:20,stroke:5})});else{var E;b=(null===(E=I.categories)||void 0===E?void 0:E.length)?(0,R.jsx)(F,{icon:(0,R.jsx)(i.BusinessCategoryIcon,{}),children:(0,R.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:I.categories.map((e=>e.localized_display_name)).join(C.default.t(253))})}):null,j=I.description?(0,R.jsx)(F,{icon:(0,R.jsx)(l.BusinessDescriptionIcon,{}),children:(0,R.jsx)(x.ExpandableText,{text:I.description,textLimit:f.default.BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH,children:e=>{let{textLimit:t}=e;return(0,R.jsx)(g.EmojiText,{selectable:!0,direction:"auto",breakWord:!0,text:I.description,textLimit:t})}})}):null,I.website&&Array.isArray(I.website)&&I.website.length&&(M=I.website.map(((e,t)=>{const n=(0,S.getWebsiteLink)(e),a=(0,R.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:e}),o=(0,R.jsx)(v.ExternalLink,{className:T.default.link,href:n,children:a});return(0,R.jsx)(F,{icon:(0,R.jsx)(d.BusinessWebsiteIcon,{}),children:o},t)}))),I.businessHours&&(_=(0,R.jsx)(L,{businessHours:I.businessHours}));const e=I.email;if(e){const t=(0,R.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:e}),n=(0,R.jsx)(v.ExternalLink,{className:T.default.link,href:`mailto:${e}`,children:t});y=(0,R.jsx)(F,{icon:(0,R.jsx)(s.BusinessEmailIcon,{}),dir:"auto",children:n})}}const B=void 0!==I.latitude&&void 0!==I.longitude||I.structuredAddress;let V;(h||B||b||j||null!=_||y||M)&&(V=(0,R.jsx)(m.default,{theme:"padding",children:(0,R.jsxs)("div",{className:T.default.contactBusinessInfo,children:[h,(0,R.jsx)(G,{contactName:o,latitude:I.latitude,longitude:I.longitude,structuredAddress:I.structuredAddress}),b,j,_,y,M]})}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.default,{children:u}),V]})};var o=n(115888),i=n(624573),l=n(718620),s=n(423082),r=n(675305),c=n(817649),d=n(36409),u=n(592362),f=a(n(846870)),p=n(660666),h=a(n(831269)),m=a(n(969358)),g=n(305521),x=n(999649),v=n(753233),b=n(731085),C=a(n(932325)),j=a(n(459510)),M=n(300987),_=n(114850),y=a(n(517729)),S=n(341463),k=n(956113),P=n(875302),w=n(130756),T=a(n(161160)),I=n(548360),E=a(n(261294)),A=n(667294),N=n(379811),O=n(655241),R=n(785893);function D(e){let{contact:t}=e;const n=t.verifiedLevel===c.VERIFIED_LEVEL.HIGH?I.fbt._("Official business account",null,{hk:"1KruJ"}):I.fbt._("Business account",null,{hk:"2lzdAg"});return(0,R.jsx)(h.default,{testid:"business-title",onClick:_.ModalManager.open((0,R.jsx)(y.default,{contact:t})),side:(0,R.jsx)(b.InfoIcon,{className:T.default.infoIcon,displayInline:!0}),children:n})}function L(e){let{businessHours:t}=e;const[n,a]=(0,A.useState)(!0),o=(0,S.getBusinessHours)(t).map((e=>{const{day:t,hours:a,first:o}=e;return!o&&n?null:(0,R.jsx)(B,{day:t,hours:a,first:o,collapsed:n},t)}));return(0,R.jsx)(F,{icon:(0,R.jsx)(r.BusinessHoursIcon,{}),onClick:()=>a(!n),children:o})}const B=e=>{const t=e.first?(0,R.jsx)("div",{className:T.default.businessHoursChevron,role:"button",children:(0,R.jsx)(u.ChevronDownAltIcon,{className:e.collapsed?"":T.default.flipSvg,displayInline:!0})}):null;return(0,R.jsxs)("div",{className:T.default.businessHoursRow,children:[(0,R.jsx)("div",{className:T.default.businessHoursDay,children:(0,R.jsx)(g.EmojiText,{direction:"auto",text:e.day})}),(0,R.jsx)("div",{className:T.default.businessHoursHours,children:(0,R.jsx)(g.EmojiText,{direction:"auto",text:e.hours})}),t]})};const G=e=>{let{contactName:t,latitude:n,longitude:a,structuredAddress:i}=e;const l=i?function(e){const{streetAddress:t,localizedCityName:n,zipCode:a}=e;return t&&n&&a?I.fbt._("{streetAddress}, {city} {zipCode}",[I.fbt._param("streetAddress",t),I.fbt._param("city",n),I.fbt._param("zipCode",a)],{hk:"1McVXv"}).toString():t&&n?I.fbt._("{streetAddress}, {city}",[I.fbt._param("streetAddress",t),I.fbt._param("city",n)],{hk:"1zyKhk"}).toString():t}(i):null;let s,r;if(null!=n&&null!=a&&(s=(0,R.jsx)("div",{style:{height:150},className:T.default.businessMap,children:(0,R.jsx)(j.default,{lat:n,lng:a,name:l||t,width:565,height:150})})),l){let e;e=null!=n&&null!=a?(0,M.getMapUrl)(n,a,l):(0,M.getSearchUrl)(l),r=(0,R.jsx)("div",{className:T.default.address,children:(0,R.jsx)(v.ExternalLink,{href:e,children:(0,R.jsx)(g.EmojiText,{selectable:!0,direction:"auto",text:l})})})}return r||s?(0,R.jsxs)(F,{icon:(0,R.jsx)(o.BusinessAddressIcon,{}),children:[r,s]}):null},F=e=>(0,R.jsxs)("div",{className:(0,E.default)(T.default.dataRow,e.className),onClick:e.onClick,children:[(0,R.jsx)("div",{className:T.default.dataRowIcon,children:e.icon}),(0,R.jsx)("div",{className:T.default.dataRowText,children:e.children})]})},718796:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,businessProfile:n,onOpenStatus:a,onProductCatalog:x,onProfilePicLoad:v,onProfilePicClick:b,isMessageYourselfChat:C,isPhoneNumberHidden:j}=e;const{businessHours:M,categories:_}=(0,p.useModelValues)(n,["businessHours","categories"]),y=(0,h.jsx)(i.default,{contact:t,isMessageYourselfChat:C});let S;!(0,r.getIsIAS)(t)&&!(0,r.getId)(t).isBotContact()&&null!=_&&_.length>0&&(S=(0,h.jsx)("div",{className:(0,f.default)(g),children:_.map((e=>e.localized_display_name)).join(u.default.t(252))}));const k=M?(0,h.jsx)(l.BusinessOpenHours,{hours:M}):null,P=t.businessProfile?(0,h.jsx)(s.default,{contact:t,businessProfile:t.businessProfile,onClick:b,onOpenStatus:a,onLoad:v}):null;return(0,h.jsxs)(d.default,{theme:"padding-no-margin",children:[P,(0,h.jsxs)("div",{className:(0,f.default)(m),children:[y,j&&(0,h.jsx)(c.default,{}),S,k,(0,h.jsx)(o.default,{contact:t,onProductCatalog:x,displayRequestPnButton:j})]})]})};var o=a(n(520228)),i=a(n(766491)),l=n(449397),s=a(n(411019)),r=n(660666),c=a(n(836513)),d=a(n(969358)),u=a(n(932325)),f=a(n(156720)),p=n(655241),h=n(785893);const m={textAlign:"qfejxiq4"},g={marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"brac1wpa",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"sbs3osm6",lineHeight:"jgi8eev7"}},466488:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClick:t,parentGroupMetadata:n,parentGroupChat:a}=e;const{subgroupCount:b}=(0,g.default)(n),{name:C}=(0,x.useModelValues)(a.contact,["name"]),j=(0,i.isIntegritySuspendedCommunity)(a);(0,m.useEffect)((()=>{(0,u.queryAndUpdateSubgroupsMetadata)(n.id,n.joinedSubgroups)}),[]);const M=h.fbt._("Community",null,{hk:"2P4Qwb"});return(0,v.jsx)(r.default,{theme:"no-padding",children:(0,v.jsx)(o.default,{testid:"group-info-community-section",image:(0,v.jsx)(s.DetailImage,{id:n.id,shape:s.DetailImageShape.Squircle,size:60}),primary:(0,v.jsx)(c.EmojiText,{text:C,ellipsify:!0}),onClick:t,theme:"community-home",secondary:(0,v.jsxs)(p.TextSpan,{size:"16",color:"secondary",children:[M,j?null:(0,v.jsxs)(v.Fragment,{children:[d.default.isRTL()?" - ":" · ",h.fbt._({"*":"{count} Groups",_1:"1 Group"},[h.fbt._plural(b,"count")],{hk:"38FdVG"})]})]}),detail:(0,v.jsx)(l.ChevronRightAltIcon,{color:f.SvgColorProp.SECONDARY,directional:!0}),focusable:!0})})};var o=a(n(170206)),i=n(394164),l=n(647276),s=n(23641),r=a(n(969358)),c=n(305521),d=a(n(932325)),u=n(510900),f=n(220584),p=n(180519),h=n(548360),m=n(667294),g=a(n(847116)),x=n(655241),v=n(785893)},483828:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{chat:t,groupMetadata:n}=e;const{id:a,parentGroup:I,isUnnamed:E}=(0,k.useModelValues)(n,["id","parentGroup","isUnnamed"]),A=(0,S.default)(n.participants,"change:isAdmin",(()=>n.participants.iAmAdmin())),N=(0,S.default)(n.participants,["bulk_add","bulk_remove","reset"],(()=>n.participants.length)),O=(0,s.getABPropConfigValue)("parent_group_min_participants_for_group_entry_point"),R=(0,P.default)();if(!(0,u.communitiesEnabled)()||!A||null!=I||N<O)return null;const D=()=>{h.DrawerManager.openDrawerLeft((0,w.jsx)(b.NewCommunityFlowLoadable,{existingGroups:[a]}),{focusType:g.FocusType.TABBABLE}),d.UiCommunityCreationAction.startSession(_.COMMUNITY_CREATION_ENTRYPOINT_TYPE.GROUP_INFO),d.UiCommunityCreationAction.enter(_.COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.GROUP_INFO)},L=function(){var e=(0,o.default)((function*(e){yield(0,l.default)((0,C.setGroupSubject)(t,e),R).catch((0,i.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`name_group_modal:onSetSubject failed`})),x.ModalManager.close(),D()}));return function(){return e.apply(this,arguments)}}(),B=()=>{x.ModalManager.open((0,w.jsx)(p.ConfirmPopup,{onOK:()=>x.ModalManager.close(),okText:y.fbt._("OK",null,{hk:"4oTrfy"}),children:y.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))};return(0,w.jsx)(m.default,{theme:"no-padding",children:(0,w.jsx)(r.default,{testid:"group-info-create-community-section",image:(0,w.jsx)(f.CommunitySquircleIcon,{iconXstyle:T.communitySquircle,width:40,height:40}),primary:(0,w.jsx)(M.TextSpan,{size:"16",children:y.fbt._("Start a community",null,{hk:"2hSyE2"})}),onClick:()=>{if(E){var e,n;const a=y.fbt._("This group was created without a name. Give it a name to create a community.",null,{hk:"2BkS8"});x.ModalManager.open((0,w.jsx)(v.default,{chat:t,subtext:a,onCancel:()=>x.ModalManager.close(),onOK:L,editable:null===(e=t.groupMetadata)||void 0===e?void 0:e.canSetSubject(),editRestrictionInfo:(null===(n=t.groupMetadata)||void 0===n?void 0:n.restrict)?B:void 0}))}else D()},theme:"community-create",secondary:(0,w.jsx)(M.TextSpan,{size:"14",color:"secondary",children:y.fbt._("Organize related groups and easily reach them at once",null,{hk:"6BbTr"})}),detail:(0,w.jsx)(c.ChevronRightAltIcon,{color:j.SvgColorProp.SECONDARY,directional:!0}),focusable:!0})})};var o=a(n(348926)),i=n(898817),l=a(n(229922)),s=n(287461),r=a(n(170206)),c=n(647276),d=n(198933),u=n(174834),f=n(247365),p=n(103440),h=n(900316),m=a(n(969358)),g=n(299950),x=n(114850),v=a(n(550506)),b=n(219548),C=n(470824),j=n(220584),M=n(180519),_=n(130756),y=n(548360),S=(a(n(156720)),a(n(524578))),k=n(655241),P=a(n(895851)),w=n(785893);const T={communitySquircle:{color:"fsk8o631"}}},20864:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t}=e,n=(0,c.useOptionalModelValues)(t.groupMetadata,["groupType"]);let a;a=(0,i.communitiesEnabled)()&&(null==n?void 0:n.groupType)===l.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?(0,d.jsx)("div",{className:(0,r.default)(u),children:s.fbt._("",null,{hk:"4kc4Kr"})}):s.fbt._("Add group description",null,{hk:"BVsoQ"});return(0,d.jsx)(o.default,{chat:e.chat,showFullDescription:e.showFullDescription,editRestrictionText:s.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"}),testid:"group-info-drawer-description-title-input",containerTestId:"group-info-drawer-description-container",emptyValuePlaceholder:a})};var o=a(n(707655)),i=n(174834),l=n(862159),s=n(548360),r=a(n(156720)),c=n(655241),d=n(785893);const u={color:"tviruh8d",fontSize:"enbbiyaj"}},941943:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(287461),i=a(n(775025)),l=n(738501),s=n(374660),r=a(n(306007)),c=n(464659),d=a(n(740681)),u=n(998123),f=n(174834),p=n(660666),h=a(n(908081)),m=a(n(324093)),g=n(626194),x=a(n(969358)),v=a(n(209064)),b=a(n(409558)),C=n(56884),j=n(71957),M=a(n(570834)),_=n(714574),y=a(n(466488)),S=a(n(483828)),k=a(n(20864)),P=a(n(299723)),w=n(767140),T=n(951688),I=a(n(453090)),E=n(503028),A=a(n(483447)),N=n(862159),O=n(95576),R=a(n(932325)),D=n(97858),L=n(114850),B=a(n(832897)),G=n(111367),F=n(962647),V=n(126671),H=a(n(634152)),U=n(227341),W=n(163139),Y=n(428991),q=n(983271),z=n(220584),K=n(180519),X=n(717089),Z=n(625786),J=n(390737),Q=n(382117),$=n(676345),ee=n(571256),te=n(130756),ne=n(869513),ae=n(818674),oe=n(609392),ie=n(548360),le=n(667294),se=a(n(156720)),re=n(379811),ce=a(n(401715)),de=a(n(969651)),ue=a(n(637660)),fe=n(808446),pe=n(655241),he=a(n(321201)),me=n(785893);const ge={body:{flexShrink:"oq44ahr5",flexGrow:"tvf2evcx",flexBasis:"lb5m6g5c",paddingBottom:"s9fl9ege"},announcementGroupDisclaimer:{textAlign:"ljrqcn24",paddingTop:"n1yiu2zv",paddingBottom:"jd93c9cp",paddingEnd:"bcymb0na",paddingStart:"e8k79tju",lineHeight:"jgi8eev7",wordBreak:"cw3vfol9"},lastSectionRow:{marginBottom:"brac1wpa"}},xe=(0,Z.genId)("max_participant_toast");function ve(e,t){var n,a,ve;const{contact:be,onVerification:Ce,onClose:je}=e,Me=(0,he.default)(),_e=(0,de.default)(),ye=(0,ce.default)(),Se=(0,pe.useModelValues)(e.chat,["mute","id","pendingAction","groupMetadata"]),ke=(0,pe.useModelValues)(e.groupMetadata,["id","reportToAdminMode","cachedDeviceCount","cachedDeviceSizeBucket","participants","parentGroup","pendingParticipants","announce","support","incognito","groupType","restrict","isIncognitoCag","defaultSubgroup"]),[Pe,we,Te]=(0,re.useContactValues)(e.contact.id,[p.getName,p.getId,_.getPendingAction]),Ie=ke.groupType===N.GroupType.DEFAULT_ANNOUNCEMENT_GROUP,Ee=(0,ue.default)((()=>new Q.UiActionWamEvent({uiActionType:Ie?te.UI_ACTION_TYPE.DEFAULT_SUBGROUP_INFO_OPEN:te.UI_ACTION_TYPE.GROUP_INFO_OPEN,uiActionPreloaded:!0,isLid:ke.isIncognitoCag}))),Ae=(0,ue.default)((()=>new M.default)),Ne=(0,ue.default)((()=>new M.default)),Oe=(0,le.useRef)(null);(0,fe.useListener)(ke.participants,["bulk_add","bulk_remove","reset","sort","change:isAdmin","change:isSuperAdmin"],_e),(0,fe.useListener)(ke.pendingParticipants,["add","remove","reset"],_e),(0,X.useTsNavigation)({surface:"group-info-drawer",extras:{groupSize:ke.participants.length,typeOfGroup:(0,N.groupTypeToWamEnum)((0,N.getGroupTypeFromGroupMetadata)((0,W.unproxy)(ke)))}});const Re=()=>{var e;const t=(0,D.getGroupSizeLimit)(ke.groupType),n=null===(e=ke.getParentGroupChat())||void 0===e?void 0:e.formattedTitle;if(ke.participants.length>=t){const e=R.default.t(48,{max:t});J.ToastManager.open((0,me.jsx)(Z.Toast,{msg:e,id:xe}))}else{const e=(0,me.jsx)(i.default,{chat:(0,W.unproxy)(Se),pushTransition:"none",popTransition:"none",communityName:n});L.ModalManager.open(e,{transition:"modal-flow"})}},De=()=>{L.ModalManager.open((0,me.jsx)(v.default,{chat:Se,chatId:Se.id,e2eSubtype:"info_encrypted"}))};let Le;if((0,le.useEffect)((()=>{(0,s.isIntegritySuspendedDefaultSubgroup)(Se)?(0,Y.openTerminatedCommunityModal)():(0,s.isTerminatedGroupOrNotMember)(Se)?(0,s.isSupportGroup)(Se)||((0,D.isGroupSuspendV2Enabled)()?(0,q.openSuspendedGroupModalV2)(Se):(0,q.openTerminatedGroupOrNotMemberModal)()):(0,s.isSuspendedGroup)(Se)&&((0,D.isGroupSuspendV2Enabled)()?(0,q.openSuspendedGroupModalV2)(Se):(0,q.openSuspendedGroupModal)(!0===(0,s.shouldIncludeEntityIdInAppealRequest)()?ke.id.user.toString():null))}),[]),(0,le.useEffect)((()=>{ke.participants.ensureSorted();ke.pendingParticipants.ensureSorted()})),(0,le.useEffect)((()=>{const e=Ee.current;if(e){const t=ke.cachedDeviceSizeBucket;null!=t&&(e.sizeBucket=t),Object.assign(e,(0,ne.getGroupCountMetricsFromGroupMetadata)((0,W.unproxy)(ke))),e.markUiActionT(),e.commit(),Ee.current=void 0}(0,ae.logUiActionShadowPrivateStatsTestEvents)()}),[]),ke.canSetGroupProperty()){const t=(0,me.jsx)(K.TextSpan,{theme:"title",children:ie.fbt._("Group settings",null,{hk:"3sS0Vl"})}),n=(0,me.jsx)(V.SettingsIcon,{color:z.SvgColorProp.SECONDARY,height:17});Le=(0,me.jsx)(r.default,{testid:"group-settings-row",side:"chevron",icon:n,onClick:e.onAdminSetting,title:t,spaced:!0})}let Be=null;e.onMediaGallery&&(Be=(0,me.jsx)(d.default,{onMediaGallery:e.onMediaGallery,chat:(0,W.unproxy)(Se)}));const Ge=Se&&(0,l.shouldShowEphemeralSetting)(Se)?(0,me.jsx)(j.EphemeralSettingRow,{onClick:e.onEphemeral,chat:Se,groupMetadata:ke,testid:"contact-info-dm-setting-row"}):null;let Fe=null;if((0,f.communitiesEnabled)()&&Se&&ke.parentGroup&&ke.participants.iAmMember()){const t=ke.getParentGroupChat();(null==t?void 0:t.groupMetadata)&&(Fe=(0,me.jsx)(y.default,{onClick:()=>{var t;null===(t=e.onCommunityClick)||void 0===t||t.call(e)},parentGroupMetadata:t.groupMetadata,parentGroupChat:t}))}let Ve=null;Ve=(0,me.jsx)(b.default,{highlightSurface:te.PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_GROUP,onClick:()=>(0,G.showEncryptionInfoPopup)(Se),text:(0,ee.isGroupCallEnabled)()?ie.fbt._("Messages and calls are end-to-end encrypted. Click to learn more.",null,{hk:"1l9pwW"}):ie.fbt._("Messages are end-to-end encrypted. Click to learn more.",null,{hk:"2MtPh9"}),spaced:!0}),(0,s.isSupportGroup)(Se)&&(Ve=(0,me.jsx)(A.default,{onClick:De,spaced:!0}));const He=Se.mute.canMute()?(0,me.jsx)(B.default,{chat:Se,mute:Se.mute,settings:H.default}):null;let Ue,We=null;if(e.onStarred){const t=(0,me.jsx)(K.TextSpan,{theme:"title",size:"16",children:ie.fbt._("Starred messages",null,{hk:"4wVbNG"})}),n=(0,me.jsx)(U.StarIcon,{color:z.SvgColorProp.SECONDARY,height:20});We=(0,me.jsx)(c.ChatInfoDrawerSection,{titleTestId:"section-starred-messages",xstyle:$.uiPadding.horiz0,children:(0,me.jsx)(r.default,{testid:"block-starred-messages",side:"chevron",icon:n,onClick:e.onStarred,title:t,spaced:!0})})}if((0,C.isKeepInChatReadAndUIEnabled)()&&(Se.hasKeptMsgs()||(0,l.isEphemeralSettingOn)(Se))){const t=(0,me.jsx)(K.TextSpan,{theme:"title",size:"16",children:ie.fbt._("Kept Messages",null,{hk:"41CBIy"})}),n=ke.restrict?(0,me.jsx)(K.TextDiv,{theme:"muted",children:ie.fbt._("Only admins can keep or unkeep messages in this group.",null,{hk:"2Uhjiy"})}):null,a=(0,me.jsx)(O.KeepInChatIcon,{color:z.SvgColorProp.SECONDARY,height:20});Ue=(0,me.jsx)(c.ChatInfoDrawerSection,{titleTestId:"section-kept-messages",xstyle:[ge.lastSectionRow,$.uiPadding.horiz0],children:(0,me.jsx)(r.default,{testid:"block-kept-messages",side:"chevron",icon:a,onClick:e.onKept,title:t,secondaryTitle:n,spaced:!0})})}const Ye=(0,F.isReactionsEnabledInCAG)(Se)?(0,me.jsx)(u.PhoneNumberVisibilityIndicatorCag,{chat:Se}):null,qe=(0,o.getABPropConfigValue)("report_to_admin_kill_switch")&&ke.reportToAdminMode&&ke.canSetGroupProperty()?(0,me.jsx)(r.default,{testid:"block-rta-messages",side:"chevron",icon:(0,me.jsx)(oe.WarningIcon,{color:z.SvgColorProp.SECONDARY,height:16}),onClick:e.onSentForAdminReview,title:(0,me.jsx)(K.TextSpan,{theme:"title",size:"16",children:ie.fbt._("Sent for admin review",null,{hk:"2gzsHo"})}),spaced:!0}):null;let ze=null;(He||Ve||Ge)&&(ze=(0,me.jsxs)(c.ChatInfoDrawerSection,{xstyle:[ge.lastSectionRow,$.uiPadding.horiz0],children:[He,Ge,qe,Ve,Le,Ye]}));const Ke=(0,me.jsx)(P.default,{chat:(0,W.unproxy)(Se)}),Xe=Boolean(null===(n=Se.groupMetadata)||void 0===n?void 0:n.isIncognitoCag)&&!(null===(a=Se.groupMetadata)||void 0===a||null===(ve=a.participants)||void 0===ve?void 0:ve.iAmAdmin())?(0,me.jsx)(x.default,{theme:"transparent",shadow:!1,children:(0,me.jsx)(K.TextParagraph,{xstyle:ge.announcementGroupDisclaimer,color:"secondary",children:ie.fbt._("Only admins can see all participants in this group",null,{hk:"39jP44"})})}):null;return(0,me.jsx)("div",{role:"complementary",ref:ye,tabIndex:"-1","aria-label":ie.fbt._("Group Info",null,{hk:"3P80cG"}),children:(0,me.jsxs)(h.default,{ref:t,theme:"striped",testid:"chat-info-drawer",children:[(0,me.jsx)(g.DrawerHeader,{title:ie.fbt._("Group info",null,{hk:"2SfTUZ"}),type:g.DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:()=>{je?je():null==Me||Me.requestDismiss()},testid:"group-info-header"}),(0,me.jsx)(m.default,{children:(0,me.jsxs)("section",{className:(0,se.default)(ge.body),"data-testid":"group-info-drawer-body",children:[(0,me.jsx)(I.default,{chat:(0,W.unproxy)(Se),onAdminSetting:e.onAdminSetting,onAddParticipant:Re,onClickParticipantsCount:()=>{var e;null===(e=Oe.current)||void 0===e||e.scrollIntoView()}}),Fe,(0,me.jsx)(k.default,{chat:(0,W.unproxy)(Se),showFullDescription:e.showFullGroupDescription}),Be,We,Ue,ze,undefined,(0,me.jsx)(S.default,{chat:Se,groupMetadata:ke}),(0,me.jsx)(w.GroupInfoParticipantsSection,{ref:Oe,chat:(0,W.unproxy)(Se),scrollToParticipantList:e.scrollToParticipantList,flatListController:Ae.current,onAddParticipant:Re,onOpenParticipantSearch:e=>{L.ModalManager.open((0,me.jsx)(E.GroupParticipantsFlow,{chat:(0,W.unproxy)(Se),onVerification:Ce,initialStep:e}),{transition:"modal-flow"})},onGroupInviteLink:e.onGroupInviteLink,onPendingParticipants:e.onPendingParticipants,onVerification:e.onVerification}),Xe,(0,me.jsx)(T.GroupInfoPendingParticipantsSection,{chat:(0,W.unproxy)(Se),flatListController:Ne.current}),Ke]})})]},"contact-info-modal")})}var be=(0,le.forwardRef)(ve);t.default=be},299723:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{chat:n}=e;const{participants:a,parentGroup:l}=null!==(t=(0,y.useOptionalModelValues)(n.groupMetadata,["parentGroup","participants"]))&&void 0!==t?t:{},r=(null==a?void 0:a.iAmAdmin())&&(0,o.isCommunityAnnouncementGroup)(n),c=(0,k.jsx)(w,{chat:n}),d=(0,o.isTerminatedGroup)(n)?null:(0,k.jsx)(P,{chat:n,showAdditionalAction:!r}),u=!(0,s.communitiesEnabled)()||(0,o.isCommunityAnnouncementGroup)(n)||null==l?null:(0,k.jsx)(T,{chat:n,parentGroup:l});return(0,k.jsxs)(i.ChatInfoDrawerButtonsSection,{children:[u,c,d]})};var o=n(374660),i=n(464659),l=n(780549),s=n(174834),r=n(493678),c=n(36045),d=n(90989),u=a(n(667845)),f=n(736371),p=n(97858),h=n(114850),m=a(n(338695)),g=n(383296),x=n(453603),v=n(983271),b=n(21698),C=n(548360),j=n(667294),M=a(n(847116)),_=a(n(524578)),y=n(655241),S=a(n(895851)),k=n(785893);function P(e){let{chat:t,showAdditionalAction:n}=e;return(0,k.jsx)(c.DrawerButton,{testid:"li-report-spam",color:"danger",icon:(0,k.jsx)(b.ThumbsDownIcon,{}),theme:"chat-info",onClick:()=>{h.ModalManager.open((0,k.jsx)(m.default,{isMessage:!1,isGroupChat:!0,showAdditionalActionCheckbox:n,onReport:()=>{(0,g.sendReport)({chat:t,spamFlow:x.SpamFlow.GroupInfoReport}),h.ModalManager.close()},onReportExitClear:()=>{(0,g.sendSpamExitClear)(t,x.SpamFlow.GroupInfoReport),h.ModalManager.close()},onCancel:()=>h.ModalManager.close()}))},children:C.fbt._("Report group",null,{hk:"23NLqw"})})}function w(e){const t=()=>{(0,v.openExitAndDeleteGroupModal)(e.chat)},n=(0,y.useModelValues)(e.chat,["isReadOnly"]);let a,i=()=>{var t;const n=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.getParentGroupChat();null!=n&&(0,o.isCommunityAnnouncementGroup)(e.chat)&&(0,s.communityAnnouncementImprovementM3Enabled)()?h.ModalManager.open((0,k.jsx)(f.LeaveCommunityModal,{chat:n})):l.Cmd.deleteOrExitChat(e.chat)};return n.isReadOnly?a=C.fbt._("Delete group",null,{hk:"2MKJYs"}):!(0,o.isCommunityAnnouncementGroup)(n)&&(0,o.isSuspendedGroup)(n)&&(0,p.isGroupSuspendV2Enabled)()?(a=C.fbt._("Exit group and delete",null,{hk:"1Szubg"}),i=t):a=(0,o.isCommunityAnnouncementGroup)(n)&&(0,s.communityAnnouncementImprovementM3Enabled)()?C.fbt._("Exit community",null,{hk:"3KaKZa"}):C.fbt._("Exit group",null,{hk:"3EOkxm"}),(0,k.jsx)(c.DrawerButton,{testid:"li-delete-group",icon:(0,k.jsx)(d.ExitIcon,{directional:!0}),color:"danger",theme:"chat-info",onClick:i,children:a})}function T(e){let{chat:t,parentGroup:n}=e;const a=(0,S.default)(),{groupMetadata:o,isReadOnly:i,id:l,formattedTitle:s}=(0,y.useModelValues)(t,["groupMetadata","isReadOnly","id","formattedTitle"]),f=u.default.get(n.toString()),p=Boolean((0,_.default)(null==f?void 0:f.participants,["bulk_add","bulk_remove"],(()=>null==f?void 0:f.participants.iAmAdmin()))),h=Boolean((0,_.default)(null==o?void 0:o.participants,["bulk_add","bulk_remove"],(()=>null==o?void 0:o.participants.iAmAdmin()))),{joinedSubgroups:m,unjoinedSubgroups:g,subgroupCount:x}=(0,M.default)(f),[v,b]=(0,j.useState)(!1);if(i||null==m||null==g||!p&&!h)return null;return(0,k.jsx)(c.DrawerButton,{testid:"li-remove-group-from-community",icon:(0,k.jsx)(d.ExitIcon,{directional:!0}),disabled:v,color:"danger",theme:"chat-info",onClick:()=>{v||a.aborted||((0,r.handleRemoveSubgroup)({parentId:n,currentSubgroupCount:x,removedSubgroupWid:l,removedSubgroupTitle:s,setLoading:b,iAmCommunityAdmin:p}),a.aborted)},children:C.fbt._("Remove from community",null,{hk:"3xZmj5"})})}},767140:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupInfoParticipantsSection=void 0;var o=a(n(670983)),i=n(632157),l=n(287461),s=n(414268),r=n(72696),c=a(n(170206)),d=n(374660),u=n(464659),f=a(n(831584)),p=a(n(314810)),h=n(698867),m=n(780549),g=n(474103),x=n(174834),v=n(877171),b=n(103440),C=n(660666),j=n(465113),M=n(675085),_=n(235630),y=n(305521),S=n(581354),k=n(512938),P=n(714574),w=n(503028),T=n(862159),I=a(n(932325)),E=n(972989),A=n(963950),N=n(114850),O=n(33014),R=n(164406),D=n(197988),L=n(507877),B=n(12792),G=a(n(671401)),F=a(n(802211)),V=n(46351),H=a(n(237889)),U=n(163139),W=n(220584),Y=n(533426),q=n(392632),z=a(n(37875)),K=n(459857),X=n(788271),Z=a(n(124928)),J=n(548360),Q=n(667294),$=(a(n(156720)),a(n(524578))),ee=a(n(969651)),te=a(n(637660)),ne=n(808446),ae=n(655241),oe=n(785893);const ie={pendingParticipantsIcon:{backgroundColor:"k6px2m13",color:"cwwc04gk"}};function le(e){let{data:t,participants:n,handleParticipantClick:a,menuEnabled:o,handleParticipantMenu:i,contextMenu:l,active:s,elevatedPushNamesEnabled:r=!1}=e;const{id:c}=t,d=n.get(c);if(!d)throw new k.UnknownDataError(t);const u=d.contact,f=!!l&&Z.default.equals(u.id,l.contactId);return(0,oe.jsx)(p.default,{active:s,contact:u,participant:d,onClick:a,contextEnabled:()=>o(u),contextMenu:f,onContext:e=>i(e,u),theme:"chat-info",showNotifyName:!0,waitIdle:!0,showStatusRingAroundProfilePhoto:!0,participantCollection:n,elevatedPushNamesEnabled:r},d.id.toString())}const se=(0,Q.forwardRef)(((e,t)=>{var n,a,p;const k=(0,ae.useModelValues)((0,o.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["support","size","id","membershipApprovalMode","membershipApprovalRequests","isUnnamed","isLidAddressingMode"]),{membershipApprovalMode:Z,membershipApprovalRequests:se}=k,ce=(0,te.default)((()=>new H.default([],(e=>e.id.toString())))),de=(0,o.default)(null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.participants,"props.chat.groupMetadata?.participants");let ue=de.toArray();(0,g.hideCagMaskedParticipants)()&&!0!==k.isLidAddressingMode&&(ue=de.filter((e=>{let{id:t}=e;return(0,K.isMeAccount)(t)||!t.isLid()})));const fe=null!==(a=null==k?void 0:k.size)&&void 0!==a?a:0,pe=(null==de?void 0:de.iAmAdmin())?de.length:fe,he=(0,ee.default)();(0,ne.useListener)(de,"bulk_add bulk_remove reset sort change:isAdmin change:isSuperAdmin",he);const[me,ge]=(0,Q.useState)(!0),xe=(0,Q.useRef)(),[ve,be]=(0,Q.useState)(),Ce=(0,d.isCommunityAnnouncementGroup)(e.chat);(0,Q.useEffect)((()=>{e.scrollToParticipantList&&xe.current&&(0,j.scrollIntoViewIfNeeded)(xe.current,!1)}),[e.scrollToParticipantList]),(0,Q.useImperativeHandle)(t,(()=>({scrollIntoView(){var e;null===(e=xe.current)||void 0===e||e.scrollIntoView()}})));const je=(0,$.default)(se,["add","remove","reset"],(()=>se.length)),Me=(0,X.useShowPastParticipants)(e.chat),_e=(0,Q.useMemo)((()=>{let e;const t=[],n=[];ue.forEach((a=>{(0,C.getIsMe)(a.contact)?e=a:a.isAdmin?t.push(a):n.push(a)}));let a=[];return e&&a.push(e),a=a.concat(t,n),re(ue)&&me&&(a=a.slice(0,u.INFO_DRAWER_MAX_ROWS)),ce.current.init(a.map((e=>e.contact))),a.map((e=>({itemKey:e.id.toString(),id:e.id,height:68})))}),[me,ue]);if(k.isSuspendedOrTerminated())return null;const ye=(0,oe.jsx)(V.SearchIcon,{color:W.SvgColorProp.SECONDARY});let Se,ke,Pe,we;if(de.canAdd()&&!k.support){const t=(0,oe.jsx)(F.default,{theme:"compact",children:(0,oe.jsx)(s.AddUserIcon,{directional:!0})});Se=(0,oe.jsx)(c.default,{testid:"add-user",image:t,theme:"chat-info",primary:J.fbt._("Add participant",null,{hk:"48ECfz"}),onClick:e.onAddParticipant,focusable:!0})}if(de.iAmAdmin()&&e.onGroupInviteLink&&!k.support){const t=(0,oe.jsx)(F.default,{theme:"compact",children:(0,oe.jsx)(E.LinkIcon,{})});ke=(0,oe.jsx)(c.default,{image:t,theme:"chat-info",primary:J.fbt._("Invite to group via link",null,{hk:"3vDtFL"}),onClick:e.onGroupInviteLink,focusable:!0})}if(de.iAmAdmin()&&Z&&je>0&&(0,l.getABPropConfigValue)("group_join_request_m2")&&(Pe=(0,oe.jsx)(c.default,{image:(0,oe.jsx)(F.default,{xstyle:ie.pendingParticipantsIcon,theme:"compact",children:(0,oe.jsx)(B.PendingParticipantsIcon,{})}),theme:"chat-info",primary:(0,l.getABPropConfigValue)("group_join_request_m3")?J.fbt._("Pending requests",null,{hk:"1Q1Qwz"}):J.fbt._("Pending participants",null,{hk:"3aWcdI"}),primaryDetail:(0,oe.jsx)(Y.Tag,{round:!0,children:je}),onClick:e.onPendingParticipants,focusable:!0})),re(ue)&&me){const t=ue.length<=20,n=ue.length-u.INFO_DRAWER_MAX_ROWS;we=(0,oe.jsx)(f.default,{numMore:n,onClick:()=>{t?ge(!1):e.onOpenParticipantSearch(w.ParticipantsFlowStep.Participants)},viewAll:!t})}else Me&&(we=(0,oe.jsx)(A.ListButton,{onClick:()=>{e.onOpenParticipantSearch(w.ParticipantsFlowStep.PastParticipants)},testid:"row-past-participants",children:J.fbt._("View past participants",null,{hk:"fYGd4"})}));const Te=e=>{const t=de.get(e.id);return!!t&&(de.canPromote(t)||de.canDemote(t)||de.canRemove(t)||de.canVerifyIdentity(t))},Ie=(t,n)=>{const a=de.assertGet(n.id);if(!Te(n))return;const o=[];if(de.canPromote(a)){const t=()=>{const t=I.default.t(198,{participant:(0,P.getFormattedName)(a.contact),subject:e.chat.contact.name});N.ModalManager.open((0,oe.jsx)(b.ConfirmPopup,{onOK:()=>{return t=!0,a.isAdmin||(a.contact.pendingAction++,(0,O.promoteParticipants)(e.chat,[a]).finally((()=>{a.contact.pendingAction--}))),void(t&&N.ModalManager.close());var t},okText:I.default.t(423),onCancel:()=>N.ModalManager.close(),cancelText:J.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,oe.jsx)(y.EmojiText,{text:t})}))};let n;if(Ce){var i;n=J.fbt._("Make admin",null,{hk:"1cHVQ6"});const t=null===(i=e.chat.groupMetadata)||void 0===i?void 0:i.getParentGroupChat();o.push((0,oe.jsx)(M.DropdownItem,{testid:"mi-grp-promote-community-admin",action:()=>{(0,L.openCommunityParticipantPromoteConfirmation)(t,a,de,a.contact)},children:n},"promote"))}else n=J.fbt._("Make group admin",null,{hk:"oCC4C"}),o.push((0,oe.jsx)(M.DropdownItem,{testid:"mi-grp-promote-admin",action:t,children:n},"promote"))}if(de.canRemove(a)){let t;t=!0===Ce&&(0,x.communityAnnouncementImprovementM3Enabled)()?J.fbt._("Remove from community",null,{hk:"WikVd"}):I.default.t(427),o.push((0,oe.jsx)(M.DropdownItem,{testid:"mi-grp-remove-participant",action:()=>{var t;const o=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.getParentGroupChat();if(!0===Ce&&null!=o&&(0,x.communityAnnouncementImprovementM3Enabled)())return void N.ModalManager.open((0,oe.jsx)(G.default,{contact:n,parentGroupChat:o}));const i=I.default.t(199,{participant:(0,P.getFormattedName)(a.contact),subject:e.chat.contact.name});N.ModalManager.open((0,oe.jsx)(b.ConfirmPopup,{onOK:()=>{return t=!0,a.contact.pendingAction++,(0,O.removeParticipants)(e.chat,[a]).finally((()=>{a.contact.pendingAction--})),void(t&&N.ModalManager.close());var t},okText:I.default.t(531),onCancel:()=>N.ModalManager.close(),cancelText:J.fbt._("Cancel",null,{hk:"H0gNq"}),children:(0,oe.jsx)(y.EmojiText,{text:i})}))},children:t},"remove"))}if(de.canDemote(a)){const t=()=>{a.isAdmin&&(a.contact.pendingAction++,(0,O.demoteParticipants)(e.chat,[a]).finally((()=>{a.contact.pendingAction--})))},n=J.fbt._("Dismiss as admin",null,{hk:"2YfmwL"});if(Ce){var l;const t=null===(l=e.chat.groupMetadata)||void 0===l?void 0:l.getParentGroupChat();o.push((0,oe.jsx)(M.DropdownItem,{testid:"mi-grp-community-demote",action:()=>(0,D.openCommunityParticipantDemoteConfirmation)(a,t),children:n},"demote-admin"))}else o.push((0,oe.jsx)(M.DropdownItem,{testid:"mi-grp-demote",action:t,children:n},"demote-admin"))}if(de.canVerifyIdentity(a)){const t=J.fbt._("Verify Security Code",null,{hk:"1vTVgt"});o.push((0,oe.jsx)(M.DropdownItem,{testid:"mi-grp-verify-identify",action:()=>{e.onVerification&&e.onVerification(a.contact)},children:t},"verify-identity"))}be({contactId:n.id,menu:o,anchor:t.anchor,event:t.event})},Ee=(t,n)=>{const a=(0,d.getOneToOneContactFromGroupContact)(n.id);(0,S.findChat)(a,"groupInfoParticipants").then((t=>{(0,l.getABPropConfigValue)("unified_user_profile_navigation_enabled")?m.Cmd.chatInfoDrawer(t,!1,!1,(0,U.unproxy)(e.chat)):m.Cmd.openChatFromUnread(t).then((e=>{e&&((0,r.btmThreadsLoggingEnabled)()&&v.ComposeBoxActions.addMsgSendingLogAttributes(t,{handleMultiple(){(0,h.handleActivitiesForChatThreadLogging)([{activityType:"groupMembershipReplies",ts:(0,i.unixTime)(),chatId:t.id}])}}),v.ComposeBoxActions.focus(t))}))}))},Ae=(0,_.elevatedPushNamesM2Enabled)(e.chat),Ne=(null===(p=e.chat.groupMetadata)||void 0===p?void 0:p.groupType)===T.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?pe:de.length,Oe=J.fbt._({"*":"Participants list: {group-participants} participants",_1:"Participants list: 1 participant"},[J.fbt._plural(Ne,"group-participants")],{hk:"3CCjNY"}),Re=de.length?(0,oe.jsxs)(u.ChatInfoDrawerListSection,{ref:xe,titleTestId:"section-participants",testid:"group-info-participants-section",title:J.fbt._({"*":"{number} participants",_1:"1 participant"},[J.fbt._plural(Ne,"number")],{hk:"bcYCT"}),titleOnClick:()=>{e.onOpenParticipantSearch(w.ParticipantsFlowStep.Participants)},subtitle:ye,children:[Se,ke,Pe,(0,oe.jsx)(R.NavigableFlatList,{ariaLabel:Oe,flatListController:e.flatListController,listData:_e,onRenderItem:e=>(0,oe.jsx)(le,{active:ce.current,data:e,participants:de,handleParticipantClick:Ee,menuEnabled:Te,handleParticipantMenu:Ie,contextMenu:ve,elevatedPushNamesEnabled:Ae}),selection:ce.current,rotateList:!0}),we]}):null,De=()=>{be(null)};let Le;return ve&&(Le=(0,oe.jsx)(q.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:De,children:(0,oe.jsx)(z.default,{contextMenu:ve})})),(0,oe.jsxs)(oe.Fragment,{children:[Re,Le]})}));function re(e){return e.length>u.INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST}t.GroupInfoParticipantsSection=se,se.displayName="GroupInfoParticipantsSection"},453090:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a,o;const i=(0,L.useModelValues)(e.chat,["labels"]),l=(0,L.useOptionalModelValues)(e.chat.groupMetadata,["size","creation"]),s=null===(t=e.chat.groupMetadata)||void 0===t?void 0:t.groupType,r=null===(n=e.chat.groupMetadata)||void 0===n?void 0:n.participants,c=(0,R.default)();(0,D.useListener)(r,"bulk_add bulk_remove reset sort change:isAdmin change:isSuperAdmin",c);const d=null!==(a=null==r?void 0:r.length)&&void 0!==a?a:0,u=null!==(o=null==l?void 0:l.size)&&void 0!==o?o:0,f=(null==r?void 0:r.iAmAdmin())?d:u;let g=A.fbt._("Group",null,{hk:"DNiv2"});s===v.GroupType.DEFAULT_ANNOUNCEMENT_GROUP&&(g=A.fbt._("Announcements",null,{hk:"GNIKa"}));const j=A.fbt._({"*":"{number} participants",_1:"1 participant"},[A.fbt._plural(s===v.GroupType.DEFAULT_ANNOUNCEMENT_GROUP?f:d,"number")],{hk:"bcYCT"});return(0,G.jsx)(h.default,{theme:"padding-large",children:(0,G.jsxs)(m.FlexColumn,{align:"center",children:[(0,G.jsx)(H,{chat:e.chat,xstyle:V.photo,sendGroupProfilePictureLoggingEvent:(t,n,a)=>{var o,i,l;const s=null===(o=e.chat)||void 0===o||null===(i=o.groupMetadata)||void 0===i?void 0:i.creation,c=new Date(1e3*(null!=s?s:0)),d=new Intl.DateTimeFormat("en",{year:"numeric"}).format(c),u=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(c),p=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(c),h=null!=s?`${d}-${u}-${p}`:"",m=(0,E.numberToPreciseSizeBucket)(f),g=null!==(l=null==r?void 0:r.iAmAdmin())&&void 0!==l&&l;new x.GroupProfilePictureWamEvent({groupCreationDs:h,groupProfileAction:t,preciseGroupSizeBucket:m,isAdmin:g,hasProfilePicture:n,profilePictureType:a}).commit()}}),(0,G.jsx)(W,{chat:e.chat}),(0,G.jsx)("div",{"data-testid":"group-info-top-card-subtitle",className:(0,O.default)(V.groupSecondary),children:(0,G.jsx)(p.SelectableSpan,{dir:"auto",selectable:!0,children:(0,G.jsxs)(T.TextSpan,{size:"16",color:"secondary",children:[g,(null==l?void 0:l.isSuspendedOrTerminated())?null:(0,G.jsxs)(G.Fragment,{children:[b.default.isRTL()?" - ":" · ",(0,G.jsx)(I.default,{onClick:e.onClickParticipantsCount,children:j})]})]})})}),(0,G.jsx)(C.default,{labels:i.labels})]})})};var o=a(n(348926)),i=n(898817),l=n(122583),s=a(n(670983)),r=a(n(229922)),c=n(287461),d=n(374660),u=n(174834),f=n(103440),p=n(306703),h=a(n(969358)),m=n(690495),g=a(n(559719)),x=n(600145),v=n(862159),b=a(n(932325)),C=a(n(344460)),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(288057)),M=n(114850),_=n(21645),y=n(843337),S=n(588792),k=n(511696),P=n(115948),w=n(470824),T=n(180519),I=a(n(625903)),E=n(802027),A=n(548360),N=n(667294),O=a(n(156720)),R=a(n(969651)),D=n(808446),L=n(655241),B=a(n(895851)),G=n(785893);function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}const V={photo:{marginBottom:"njub1g37"},groupSecondary:{lineHeight:"a4ywakfo",marginTop:"ma4rpf0l",textAlign:"qfejxiq4"}};function H(e){const t=(0,L.useModelValues)(e.chat,["isReadOnly"]),n=(0,L.useModelValues)(e.chat.contact,["id","profilePicThumb"]),a=(0,L.useModelValues)(e.chat.contact.profilePicThumb,["imgFull"]),o=(0,L.useModelValues)((0,s.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["groupType"]),[c,f]=(0,N.useState)(!1),[p,h]=(0,N.useState)(!1),m=(0,B.default)(),g=o.groupType===v.GroupType.DEFAULT_ANNOUNCEMENT_GROUP,x=(0,u.communitiesEnabled)()&&g?S.PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:S.PhotoPickerType.GROUP,b=t.isReadOnly||!a.canDelete()&&!a.canSet()||(0,d.isSupportGroup)(t)||g||o.isSuspendedOrTerminated();return(0,G.jsx)("div",{className:(0,O.default)(e.xstyle),children:(0,G.jsx)(k.PhotoPickerLoadable,{type:x,id:n.id,attachToChat:!0,pending:p,startImage:a.imgFull,readOnly:b,onImageSet:(e,t)=>{let n;h(!0),n=e&&t?(0,P.setProfilePic)(a,e,t):(0,P.deleteProfilePic)(a),(0,r.default)(n,m).catch((0,i.catchAbort)((()=>{}))).catch((0,l.filteredCatch)(j.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,f(!c)}))).finally((()=>{h(!1)}))},sendGroupProfilePictureLoggingEvent:e.sendGroupProfilePictureLoggingEvent},String(c))})}const U={marginTop:"hymafltn",marginEnd:"jnwc1y2a",marginBottom:"ngycyvoj",marginStart:"svoq16ka"};function W(e){const t=(0,L.useModelValues)(e.chat.contact,["name"]),n=(0,L.useModelValues)((0,s.default)(e.chat.groupMetadata,"props.chat.groupMetadata"),["creation","restrict","support","isUnnamed","participants"]),a=(0,B.default)(),l=function(){var n=(0,o.default)((function*(n){const o=n;o!==t.name&&(yield(0,r.default)((0,w.setGroupSubject)(e.chat,o),a).catch((0,i.catchAbort)((()=>{}))).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return n.apply(this,arguments)}}(),d=()=>{M.ModalManager.open((0,G.jsx)(f.ConfirmPopup,{onOK:()=>M.ModalManager.close(),okText:A.fbt._("OK",null,{hk:"4oTrfy"}),children:A.fbt._("Only admins can edit this group's info",null,{hk:"1a2ztg"})}))};return n.support?(0,G.jsx)(T.TextHeader,{className:(0,O.default)(U),level:"2",theme:"large",children:(0,G.jsx)(_.GroupName,{chat:e.chat,groupMetadata:n,breakWord:!0})}):n.isUnnamed&&(0,c.getABPropConfigValue)("ugr_enabled")?(0,G.jsx)(g.default,{subject:(0,y.calculateUnnamedGroupParticipantsList)(n).toLocaleString(),onSave:l,editable:n.canSetSubject(),editRestrictionInfo:n.restrict?d:void 0}):(0,G.jsx)(g.default,{subject:t.name||e.chat.formattedTitle,onSave:l,editable:n.canSetSubject(),editRestrictionInfo:n.restrict?d:void 0})}},795767:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(670983)),i=n(374660),l=n(780549),s=n(474103),r=a(n(402085)),c=n(675085),d=n(235630),u=n(305521),f=n(581354),p=n(714574),h=a(n(932325)),m=n(114850),g=n(33014),x=n(197988),v=n(507877),b=n(392632),C=a(n(37875)),j=n(459857),M=n(788271),_=n(548360),y=n(667294),S=(a(n(156720)),a(n(969651))),k=n(808446),P=n(785893);const w={dropdownText:{display:"p357zi0d",alignItems:"gndfcl4n"}};function T(e,t){var n;const{chat:a,onVerification:l,onPastParticipants:f}=e,[T,E]=function(e,t){const[n,a]=(0,y.useState)(null),l=(t,n)=>{t.isAdmin||(t.contact.pendingAction++,(0,g.promoteParticipants)(e,[t]).finally((()=>{t.contact.pendingAction--}))),n&&m.ModalManager.close()},s=(t,n)=>{t.contact.pendingAction++,(0,g.removeParticipants)(e,[t]).finally((()=>{t.contact.pendingAction--})),n&&m.ModalManager.close()},r=t=>{t.isAdmin&&(t.contact.pendingAction++,(0,g.demoteParticipants)(e,[t]).finally((()=>{t.contact.pendingAction--})))},d=()=>{a(null)};let f;n&&(f=(0,P.jsx)(b.UIE,{displayName:"ChatContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:d,children:(0,P.jsx)(C.default,{contextMenu:n})}));return[f,(n,d)=>{const f=(0,o.default)(e.groupMetadata,"chat.groupMetadata").participants,g=f.assertGet(d.id.toString()),b=[],C=(0,i.isCommunityAnnouncementGroup)(e);if(f.canPromote(g)){let t;if(C){var M;t=_.fbt._("Make admin",null,{hk:"1cHVQ6"});const n=null===(M=e.groupMetadata)||void 0===M?void 0:M.getParentGroupChat();b.push((0,P.jsx)(c.DropdownItem,{testid:"mi-grp-promote-community-admin",action:()=>{(0,v.openCommunityParticipantPromoteConfirmation)(n,g,f,g.contact)},children:t},"promote"))}else t=h.default.t(423),b.push((0,P.jsx)(c.DropdownItem,{testid:"mi-grp-promote-admin",action:()=>l(g,!1),children:t},"promote"))}if(f.canRemove(g)){const e=h.default.t(427);b.push((0,P.jsx)(c.DropdownItem,{testid:"mi-grp-remove-participant",action:()=>s(g,!1),children:e},"remove"))}if(f.canDemote(g)){const t=()=>r(g),n=_.fbt._("Dismiss as admin",null,{hk:"243sNl"});if(C){var y;const t=null===(y=e.groupMetadata)||void 0===y?void 0:y.getParentGroupChat();b.push((0,P.jsx)(c.DropdownItem,{testid:"mi-grp-community-demote",action:()=>(0,x.openCommunityParticipantDemoteConfirmation)(g,t),children:n},"demote-admin"))}else b.push((0,P.jsx)(c.DropdownItem,{testid:"mi-grp-demote",action:t,children:n},"demote-admin"))}if(f.canVerifyIdentity(g)){const e=_.fbt._("Verify Security Code",null,{hk:"1vTVgt"});b.push((0,P.jsx)(c.DropdownItem,{testid:"mi-grp-verify-identify",action:()=>{m.ModalManager.close(),null==t||t(g.contact)},children:e},"verify-identity"))}const S=(0,j.isMeAccount)(g.contact.id)?_.fbt._("Message yourself",null,{hk:"LDbjA"}):_.fbt._("Message {author}",[_.fbt._param("author",(0,p.getFormattedShortName)(g.contact))],{hk:"1kM7Cg"});b.push((0,P.jsx)(c.DropdownItem,{ariaLabel:S,action:I.bind(null,g.contact.id),addSpacing:!0,children:(0,P.jsx)(u.EmojiText,{text:S,xstyle:w.dropdownText})},"message author"));const k="click"===n.type?void 0:n.target;a({contactId:d.id,menu:b,anchor:k,event:n.anchor?void 0:n})}]}(a,l),A=(0,S.default)(),N=null===(n=a.groupMetadata)||void 0===n?void 0:n.participants;(0,k.useListener)(N,["bulk_add","bulk_remove","reset"],A);const O=(0,M.useShowPastParticipants)(a),R=(0,s.hideCagMaskedParticipants)(),D=null==N?void 0:N.map((e=>e.contact));let L;return O&&(L={text:_.fbt._("View past participants",null,{hk:"fYGd4"}),onClick:f}),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.default,{ref:t,title:_.fbt._("Search Participants",null,{hk:"M6lxB"}),filter:e=>{var t;const n=null==N?void 0:N.get(e.id.toString());return null!=n&&(!R||!1!==(null===(t=a.groupMetadata)||void 0===t?void 0:t.isLidAddressingMode)||((0,j.isMeAccount)(n.id)||!n.id.isLid()))},onCancel:()=>{m.ModalManager.close()},openContextOnClick:!0,contextEnabled:()=>!1,contextMenu:e=>!(0,j.isMeAccount)(e),onContext:E,showNotifyName:!0,elevatedPushNamesEnabled:(0,d.elevatedPushNamesM2Enabled)(a),listenForAdminChange:!0,participantCollection:(0,o.default)(N,"participants"),contacts:D,button:L,showStatusRingAroundProfilePhoto:!0}),T]})}const I=e=>{const t=(0,i.getOneToOneContactFromGroupContact)(e);(0,f.findChat)(t,"groupParticipantSearch").then((e=>{m.ModalManager.close(),l.Cmd.openChatFromUnread(e)}))};var E=(0,y.forwardRef)(T);t.default=E},503028:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupParticipantsFlow=function(e){const{chat:t,onVerification:n,initialStep:a}=e,[c,d]=(0,l.useFlow)(a);if(!d.step)return null;let u;switch(d.step){case r.Participants:u=(0,s.jsx)(o.default,{chat:t,onVerification:n,onPastParticipants:()=>d.push(r.PastParticipants)});break;case r.PastParticipants:{const e=d.stackSize()>1,n=()=>d.pop();u=e?(0,s.jsx)(i.default,{chat:t,onBack:n}):(0,s.jsx)(i.default,{chat:t,onClose:n});break}}return(0,s.jsx)(c,{flow:d,children:u})},t.ParticipantsFlowStep=void 0;var o=a(n(795767)),i=a(n(795367)),l=n(839062),s=n(785893);const r=n(76672).Mirrored(["Participants","PastParticipants"]);t.ParticipantsFlowStep=r},176809:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{participant:t,elevatedPushNamesEnabled:n=!1}=e,{contact:a}=t,[g,x,v,b,C,j,M]=(0,h.useContactValues)(a.id,[l.getId,l.getShowBusinessCheckmarkAsPrimary,l.getName,l.getPushname,l.getNotifyName,c.getFormattedName,c.getFormattedPhone]),_=(0,m.jsx)(u.Name,{contact:a,showBusinessCheckmark:x,showLabel:!0,titlify:!0,ellipsify:!0,you:!0,showNotifyName:n,elevatedPushNamesEnabled:n}),y=i.Clock.pastParticipantOnDateAtTime(t.leaveTs,function(e){const t=e.id.equals((0,f.getMeUser)());if(e.leaveReason===d.LeaveReason.Left)return t?p.fbt._("Left",null,{hk:"3R2igg"}):p.fbt._("Left",null,{hk:"3kbdqU"});return t?p.fbt._("Removed",null,{hk:"4vPnHl"}):p.fbt._("Removed",null,{hk:"3LiTU6"})}(t)),S=(0,r.pushNameCanBeUsed)(a)&&n?M:null;return(0,m.jsx)(o.default,{image:(0,m.jsx)(s.DetailImage,{id:g}),primary:_,secondary:y,secondaryDetail:S})};var o=a(n(170206)),i=n(63014),l=n(660666),s=n(23641),r=n(235630),c=n(714574),d=n(687352),u=n(21645),f=n(459857),p=n(548360),h=n(379811),m=n(785893)},795367:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(474103),i=n(235630),l=n(753233),s=n(258105),r=n(512938),c=n(690495),d=a(n(176809)),u=a(n(932325)),f=a(n(417696)),p=n(608456),h=a(n(772549)),m=n(676345),g=n(459857),x=n(548360),v=n(667294),b=(a(n(156720)),a(n(261716))),C=a(n(524578)),j=n(785893);const M="HEADER",_="ROW",y="DISCLAIMER";function S(e,t){var n;const{chat:a,onBack:l,onClose:s}=e,r=null===(n=a.groupMetadata)||void 0===n?void 0:n.pastParticipants,[c,d]=(0,b.default)(),h=(0,C.default)(r,["buld_add","bulk_remove","reset"],(()=>{var e;const t=u.default.accentFold(c),n=(0,p.numberSearch)(t),a=null!==(e=null==r?void 0:r.getValidRecords().filter((e=>{const a=!t||e.contact.searchMatch(t,n);return(0,o.hideCagMaskedParticipants)()?((0,g.isMeAccount)(e.id)||!e.id.isLid())&&a:a})))&&void 0!==e?e:[];if(!a.length)return[];const i=[];return i.push({type:M,header:x.fbt._("Past participants",null,{hk:"2k91Dw"}),itemKey:"list_header"}),a.forEach(((e,t)=>i.push({type:_,participant:e,itemKey:`${e.id.toString()}_${t}`}))),i.push({type:y}),i}),[c]);return(0,j.jsx)(f.default,{ref:t,title:x.fbt._("Search past participants",null,{hk:"1d6pYh"}),data:h,renderItem:e=>(0,j.jsx)(k,{data:e,elevatedPushNamesEnabled:(0,i.elevatedPushNamesM2Enabled)(a)}),emptyState:(0,j.jsx)(T,{}),onSearch:d,searchPlaceholder:u.default.t(545),onBack:l,onCancel:s})}function k(e){var t;let{data:n,elevatedPushNamesEnabled:a}=e;switch(n.type){case M:return(0,j.jsx)(h.default,{header:null!==(t=n.header)&&void 0!==t?t:"",uppercase:!1});case _:return(0,j.jsx)(d.default,{participant:n.participant,elevatedPushNamesEnabled:a});case y:return(0,j.jsx)(w,{});default:throw new r.UnknownDataError(n)}}const P={row:{height:"graaj7av",backgroundColor:"ihvf49ua"},disclaimer:{fontSize:"f8jlpxt4",color:"pm5hny62"},empty:{fontSize:"enbbiyaj",color:"eruf1vka"}};function w(){return(0,j.jsx)(c.FlexRow,{xstyle:[P.row,P.disclaimer,m.uiPadding.horiz15],align:"center",justify:"center",children:(0,j.jsx)("span",{children:x.fbt._("People who left or were removed in the last 60 days. {=m2}",[x.fbt._implicitParam("=m2",(0,j.jsx)(l.ExternalLink,{href:(0,s.getHowToExitAndDeleteGroupsFaq)(),children:x.fbt._("Learn More",null,{hk:"44tT41"})}))],{hk:"gdXOy"})})})}function T(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.default,{header:x.fbt._("Past participants",null,{hk:"2k91Dw"}),uppercase:!1}),(0,j.jsx)(c.FlexRow,{xstyle:[P.row,P.empty],align:"center",justify:"center",children:(0,j.jsx)("span",{children:x.fbt._("No results found",null,{hk:"1Wo2fc"})})}),(0,j.jsx)(w,{})]})}var I=(0,v.forwardRef)(S);t.default=I},483447:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,spaced:n}=e,a=(0,c.jsx)(s.TextSpan,{theme:"title",children:r.fbt._("Security",null,{hk:"2BYJDI"})}),d=(0,c.jsx)(s.TextDiv,{theme:"muted",children:r.fbt._("Click to learn how messages and calls are secured.",null,{hk:"1UxhjE"})}),u=(0,c.jsx)(i.LockIcon,{color:l.SvgColorProp.SECONDARY,height:20});return(0,c.jsx)(o.default,{icon:u,onClick:t,title:a,secondaryTitle:d,spaced:n})};var o=a(n(306007)),i=n(341462),l=n(220584),s=n(180519),r=n(548360),c=n(785893)},788271:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.useShowPastParticipants=function(e){const t=(0,l.useOptionalModelValues)(e.groupMetadata,["participants","pastParticipants","groupType"]),n=null==t?void 0:t.pastParticipants;if(!(0,i.default)(n,["bulk_add","bulk_remove","reset"],(()=>Boolean(null==n?void 0:n.getValidRecords().length))))return!1;if((null==t?void 0:t.groupType)===o.GroupType.DEFAULT_ANNOUNCEMENT_GROUP)return Boolean(null==t?void 0:t.participants.iAmAdmin());return!0};var o=n(862159),i=a(n(524578)),l=n(655241)},883537:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,c.useModelValues)(e.mediaData,["mediaStage","renderableUrl"]);return(0,d.jsx)(i.default,{mediaData:t,placeholderRenderer:p,children:t=>(0,d.jsx)(f,{url:t,msg:e.msg})})};var o=a(n(932325)),i=a(n(674465)),l=n(782173),s=a(n(936027)),r=a(n(261294)),c=n(655241),d=n(785893);const u=e=>{e.stopPropagation()};function f(e){let{url:t,msg:n}=e;return(0,d.jsx)(l.AudioTag,{url:t,className:s.default.mediaViewerAudio,onClick:u,autoPlay:!0,msg:n,controls:!0,testId:"media-audio",children:o.default.t(141)})}function p(){return(0,d.jsx)("div",{className:(0,r.default)(s.default.imageAudio,s.default.mediaViewerPlaceholder),onClick:u})}},548290:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,onHightlightCloseEnd:n,msgIndexInAlbum:a,onViewOnceInfoClick:o,onClose:i}=e,s=(0,me.useRef)(null),[c,d,u,f,p,h,g,x,b,j,M,_,S,k,P]=(0,be.useMsgValues)(e.msg.id,[D.getId,D.getStar,D.getIsGroupMsg,D.getType,D.getIsGif,D.getIsViewOnce,D.getSender,y.getSenderObj,D.getT,D.getIsSentByMe,D.getIsStickerMsg,D.getBroadcastId,y.getIsUnsentMedia,D.getIsKept,D.getMessageSecret]),T=(0,y.getChat)(t),I=(0,ve.useModelValues)(e.mediaData,["filehash","mediaStage","renderableUrl"]),[A,N]=(0,me.useState)(null),[O,L]=(0,me.useState)(null),B=(0,me.useRef)(null),G=()=>{N(null)},F=()=>{L(null)},V=(0,Ce.default)((e=>{(0,Y.canReactToMessage)(e)&&L({dirY:v.DirY.BOTTOM,dirX:v.DirX.CENTER,type:v.MenuType.ReactionPicker,menu:(0,je.jsx)(W.ReactionsPanel,{msgId:e.id.toString(),onSelection:t=>{(0,Q.sendReactionToMsg)(e,t).catch((()=>{})),F()}}),flipOnRTL:!0,anchor:B.current})}));(0,xe.useListener)(s.current,"animationend",(()=>{n()}));let H=t.displayName({showShortName:!0,withPushName:!0});u&&(H+=" @ "+T.title());let U,q=(0,je.jsx)(fe.XViewerIcon,{className:e.isHighlightClose?pe.default.highlightClose:null,containerRef:s});A?U=(0,je.jsx)(ie.UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:G,children:(0,je.jsx)(le.default,{contextMenu:A})}):O&&(U=(0,je.jsx)(ie.UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:F,children:(0,je.jsx)(le.default,{contextMenu:O})}));return(0,je.jsxs)("div",{className:pe.default.mediaPanelHeader,children:[(0,je.jsx)("div",{className:pe.default.info,children:(0,je.jsx)(l.default,{idle:!0,image:(0,je.jsx)(m.DetailImage,{id:g,size:40}),primary:(0,je.jsx)(C.EmojiText,{ellipsify:!0,text:H}),secondary:r.Clock.relativeDateAndTimeStr(b),theme:"media"})}),(0,je.jsx)("div",{className:pe.default.mediaPanelTools,children:(0,je.jsxs)(E.MenuBar,{theme:"strong",children:[(0,je.jsx)(Ge,{isMediaDownloadable:()=>!h&&(!!(0,R.canDownloadMsg)(t)&&(!!I.renderableUrl||I.mediaStage===w.MEDIA_DATA_STAGE.RESOLVED)),msg:t,msgIndexInAlbum:a,onClose:i,onViewOnceInfoClick:o,openReactionTray:()=>{if(!(0,Y.canReactToMessage)(t))return;const e={dirY:v.DirY.BOTTOM,dirX:v.DirX.CENTER,type:v.MenuType.ReactionSendTray,menu:(0,je.jsx)(ee.SendReactionsTrayContainer,{msg:t,selectedCallback:e=>{e!==$.MORE_REACTIONS?(0,Q.sendReactionToMsg)(t,e).catch((()=>{})):self.setTimeout((()=>{V(t)}),150),G()}}),flipOnRTL:!1,anchor:B.current};N(e)},sendReactionButtonRef:B}),(0,je.jsx)(E.MenuBarItem,{testid:"btn-close",icon:q,title:he.fbt._("Close",null,{hk:"19Jpec"}),onClick:e.onClose})]},"media-panel-header")}),U]})};var o=n(8304),i=n(268167),l=a(n(170206)),s=n(713105),r=n(63014),c=n(780549),d=n(385798),u=n(877171),f=n(103440),p=n(419e3),h=a(n(804418)),m=n(23641),g=n(126333),x=n(900316),v=n(664149),b=n(675085),C=n(305521),j=n(821130),M=n(525110),_=n(361483),y=n(163755),S=n(501532),k=n(328150),P=a(n(932325)),w=n(172259),T=n(69315),I=a(n(266466)),E=n(526795),A=n(784424),N=n(97858),O=n(114850),R=n(939716),D=n(787742),L=n(722119),B=n(373070),G=n(73225),F=n(352740),V=n(990625),H=n(533494),U=n(247442),W=n(400874),Y=n(962647),q=n(604668),z=a(n(313014)),K=a(n(467201)),X=n(774401),Z=a(n(774396)),J=n(923743),Q=n(594149),$=n(948101),ee=n(708127),te=n(383296),ne=n(453603),ae=n(995946),oe=n(163139),ie=n(392632),le=a(n(37875)),se=n(220279),re=n(677658),ce=n(241572),de=n(923655),ue=n(130756),fe=(n(341386),n(356722)),pe=a(n(423359)),he=n(548360),me=n(667294),ge=a(n(135179)),xe=n(808446),ve=n(655241),be=n(871210),Ce=a(n(17533)),je=n(785893);const Me=n(76672).Mirrored(["MenuBar","Dropdown"]);function _e(e){const t=(0,y.getChat)(e);t.composeQuotedMsg=e,u.ComposeBoxActions.focus(t)}function ye(e){return he.fbt._("Report {contact_name}",[he.fbt._param("contact_name",e.displayName())],{hk:"3Dqyjo"})}function Se(e){let{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:o,sendReactionButtonRef:i}=e;return(0,je.jsxs)(je.Fragment,{children:[(0,L.canReplyMsg)(n)?(0,je.jsx)(we,{msg:n,onClose:a}):null,(0,R.canStarMsg)(n)?(0,je.jsx)(Ne,{msg:n}):null,n.canShowKeepOrUnkeepOption()?(0,je.jsx)(Ae,{msg:n}):null,(0,R.canPinMsg)(n)?(0,je.jsx)(Oe,{msg:n}):null,(0,Y.canReactToMessage)(n)?(0,je.jsx)(Ee,{msg:n,openReactionTray:o,sendReactionButtonRef:i}):null,(0,je.jsx)(Te,{msg:n,onClose:a}),(0,R.canForwardMsg)(n)?(0,je.jsx)(Re,{msg:n}):null,(0,je.jsx)(Fe,{isMediaDownloadable:t,isAlbumMedia:!0,msg:n,onClose:a})]})}function ke(e){let{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:o,sendReactionButtonRef:i}=e;return(0,je.jsxs)(je.Fragment,{children:[(0,D.getIsStickerMsg)(n)?null:(0,je.jsx)(Pe,{msg:n,type:Me.MenuBar,onClose:a}),(0,D.getIsStickerMsg)(n)?(0,je.jsx)(we,{msg:n,onClose:a}):null,(0,R.canStarMsg)(n)?(0,je.jsx)(Ne,{msg:n}):null,(0,R.canPinMsg)(n)?(0,je.jsx)(Oe,{msg:n}):null,n.canShowKeepOrUnkeepOption()?(0,je.jsx)(Ae,{msg:n}):null,(0,D.getIsStickerMsg)(n)?(0,je.jsx)(Te,{msg:n,onClose:a}):null,(0,Y.canReactToMessage)(n)?(0,je.jsx)(Ee,{msg:n,openReactionTray:o,sendReactionButtonRef:i}):null,(0,R.canForwardMsg)(n)?(0,je.jsx)(Re,{msg:n}):null,(0,D.getIsStickerMsg)(n)?null:(0,je.jsx)(Ie,{isMediaDownloadable:t,msg:n,type:Me.MenuBar}),(0,R.canReportMsg)(n)&&(0,N.messageLevelReportingEnabled)()?(0,je.jsx)(Fe,{isMediaDownloadable:t,isAlbumMedia:!1,msg:n,onClose:a}):null]})}function Pe(e){let{msg:t,type:n,onClose:a}=e;const o=e=>{e.stopPropagation(),a(),x.DrawerManager.existsDrawerRight((e=>{e&&2===d.Column.column&&x.DrawerManager.closeDrawerRight()}));const n=(0,s.getSearchContext)((0,y.getChat)(t),(0,oe.unproxy)(t));c.Cmd.openChatAt((0,y.getChat)(t),n).then((e=>{e&&u.ComposeBoxActions.focus((0,y.getChat)(t))}))};return n===Me.Dropdown?(0,je.jsx)(b.DropdownItem,{action:o,children:he.fbt._("Go to message",null,{hk:"B1anG"})}):(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(i.BubbleIcon,{}),title:he.fbt._("Go to message",null,{hk:"B1anG"}),onClick:o})}function we(e){let{msg:t,onClose:n}=e;return(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(q.ReplyIcon,{}),title:he.fbt._("Reply",null,{hk:"1C7DPa"}),onClick:()=>{n(),(0,o.delayMs)(T.CLOSE_ANIMATION_DURATION).then(_e.bind(null,(0,oe.unproxy)(t)))}})}function Te(e){let{msg:t,onClose:n}=e;return(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(p.DeleteIcon,{}),title:he.fbt._("Delete",null,{hk:"2KhPUX"}),onClick:()=>{O.ModalManager.open((0,je.jsx)(h.default,{chat:(0,y.getChat)(t),msgList:[(0,oe.unproxy)(t)],onDelete:n})),X.UiRevokeActionHelper.startSession(),X.UiRevokeActionHelper.messageSelected()}})}function Ie(e){let{msg:t,type:n,isMediaDownloadable:a}=e;const o=e=>{e.stopPropagation(),j.FileSaver.initDownload((0,oe.unproxy)(t))};return a()?n===Me.Dropdown?(0,je.jsx)(b.DropdownItem,{action:o,disabled:!a(),children:he.fbt._("Download",null,{hk:"1g5Jix"})}):(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(g.DownloadIcon,{}),title:he.fbt._("Download",null,{hk:"1g5Jix"}),disabled:!a(),onClick:o}):null}function Ee(e){let{msg:t,openReactionTray:n,sendReactionButtonRef:a}=e;return t.type===B.MSG_TYPE.STICKER?null:(0,je.jsx)(E.MenuBarItem,{testid:"reaction-entry-point",icon:(0,je.jsx)(U.ReactionsMediaIcon,{containerRef:a,width:20}),title:he.fbt._("React",null,{hk:"1mI4Nl"}),onClick:()=>{n()}})}const Ae=e=>{let t,n,a,{msg:o}=e;const i=e=>{e.stopPropagation(),(0,S.runKeepInChatUX)((0,oe.unproxy)(o),ue.KIC_ENTRY_POINT_TYPE.MEDIA)},l=e=>{e.stopPropagation(),(0,S.runUndoKeepInChatUX)((0,oe.unproxy)(o),ue.KIC_ENTRY_POINT_TYPE.MEDIA)};if((0,D.getIsKept)(o)&&o.canShowUnkeepOption())t=(0,je.jsx)(se.UndoKeepInChatMediaIcon,{}),n=l,a=he.fbt._("Unkeep",null,{hk:"1eGZng"});else{if((0,D.getIsKept)(o)||!o.canShowKeepOption())return null;t=(0,je.jsx)(k.KeepInChatMediaIcon,{}),n=i,a=he.fbt._("Keep",null,{hk:"1a48ae"})}return(0,je.jsx)(E.MenuBarItem,{icon:t,title:a,onClick:n},t)};function Ne(e){let t,n,a,{msg:o}=e;return o.star?(t=e=>{e.stopPropagation(),c.Cmd.sendUnstarMsgs((0,y.getChat)(o),[(0,oe.unproxy)(o)])},n=(0,je.jsx)(ce.UnstarBtnIcon,{}),a=P.default.t(607)):(t=e=>{e.stopPropagation(),c.Cmd.sendStarMsgs((0,y.getChat)(o),[(0,oe.unproxy)(o)])},n=(0,je.jsx)(ae.StarBtnIcon,{}),a=P.default.t(585)),(0,je.jsx)(E.MenuBarItem,{icon:n,title:a,onClick:t},a)}function Oe(e){let t,n,a,{msg:o}=e;return(0,ge.default)(o.id)?(t=e=>{e.stopPropagation(),(0,J.sendPinInChatMsg)(o,H.Message$PinInChatMessage$Type.UNPIN_FOR_ALL).catch((e=>{__LOG__(4,void 0,new Error)`Error while unpinning a message: ${e}`}))},n=(0,je.jsx)(re.UnpinnedIcon,{}),a=he.fbt._("Unpin",null,{hk:"3oWx14"})):(t=e=>{e.stopPropagation(),O.ModalManager.open((0,je.jsx)(F.PinMessageModal,{msg:o}))},n=(0,je.jsx)(V.Pinned3Icon,{}),a=he.fbt._("Pin",null,{hk:"23jUX3"})),(0,je.jsx)(E.MenuBarItem,{icon:n,title:a,onClick:t},a)}function Re(e){let{msg:t}=e;return(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(M.ForwardIcon,{}),title:P.default.t(311),onClick:e=>{e.stopPropagation(),(0,y.getIsUnsentMedia)(t)?O.ModalManager.open((0,je.jsx)(f.ConfirmPopup,{title:P.default.t(301),onOK:()=>O.ModalManager.close(),okText:he.fbt._("OK",null,{hk:"4oTrfy"}),children:P.default.t(298)})):O.ModalManager.open((0,je.jsx)(_.ForwardMessageModalLoadable,{msgs:[(0,oe.unproxy)(t)],onClose:()=>O.ModalManager.close()}),{transition:"modal-flow"})}})}function De(e){let{msg:t}=e;return(0,je.jsx)(b.DropdownItem,{testid:"mi-msg-reply",action:()=>{(0,z.default)(t)},children:he.fbt._("Reply privately",null,{hk:"1XQeK2"})})}function Le(e){let{msg:t}=e;const n=e=>{e?(0,te.sendMessageReportBlock)(t,ne.SpamFlow.MediaViewer):(0,te.sendMessageReport)(t,ne.SpamFlow.MediaViewer),O.ModalManager.close()};return(0,je.jsx)(b.DropdownItem,{action:()=>{O.ModalManager.open((0,je.jsx)(I.default,{isBusiness:t.senderObj.isBusiness,isGroup:(0,y.getChat)(t).isGroup,onReport:n,onCancel:()=>O.ModalManager.close(),title:ye(t)}))},children:ye(t)})}function Be(e){let{msg:t,onClose:n}=e;return(0,je.jsx)(b.DropdownItem,{action:()=>{n(),(0,o.delayMs)(T.CLOSE_ANIMATION_DURATION+250).then(c.Cmd.msgInfoDrawer.bind(c.Cmd,(0,oe.unproxy)(t)))},children:P.default.t(435)})}function Ge(e){let{isMediaDownloadable:t,msg:n,msgIndexInAlbum:a,onClose:o,onViewOnceInfoClick:i,openReactionTray:l,sendReactionButtonRef:s}=e;return n.isViewOnce?(0,je.jsx)(Ve,{isMediaDownloadable:t,msg:n,onClose:o,onViewOnceInfoClick:i}):a>=0?(0,je.jsx)(Se,{isMediaDownloadable:t,msg:n,onClose:o,openReactionTray:l,sendReactionButtonRef:s}):(0,je.jsx)(ke,{isMediaDownloadable:t,msg:n,onClose:o,openReactionTray:l,sendReactionButtonRef:s})}function Fe(e){let{isMediaDownloadable:t,isAlbumMedia:n,msg:a,onClose:o}=e;const i=[],l=(0,y.getChat)(a);((0,L.canPrivateReply)(a)||(0,L.canPrivateReplyInRestrictedGrp)(a))&&i.push((0,je.jsx)(De,{msg:a},"private_reply")),n&&((0,D.getIsSentByMe)(a)&&i.push((0,je.jsx)(Be,{msg:a,onClose:o},"dropdownMsgInfo")),i.push((0,je.jsx)(Pe,{msg:a,type:Me.Dropdown,onClose:o},"dropdownGoToMsg"),(0,je.jsx)(Ie,{isMediaDownloadable:t,msg:a,type:Me.Dropdown},"dropdownDownload")));const s=!l.isNewsletter&&(a.isViewOnce||(0,R.canReportMsg)(a)&&(0,N.messageLevelReportingEnabled)());return l.isNewsletter&&(0,R.canReportMsg)(a)&&(0,G.isNewsletterReportingEnabled)()?i.push((0,je.jsx)(K.default,{msg:a},"reportSpam")):s&&i.push((0,je.jsx)(Le,{msg:a},"reportSpam")),(0,R.canReportToAdmin)(a)&&i.push((0,je.jsx)(Z.default,{msg:a},"report_to_admin")),(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(A.MenuIcon,{}),title:P.default.t(430),children:(0,je.jsx)(v.Dropdown,{type:v.MenuType.DropdownMenu,flipOnRTL:!0,dirX:v.DirX.LEFT,children:i})})}function Ve(e){let{isMediaDownloadable:t,msg:n,onClose:a,onViewOnceInfoClick:o}=e;return(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(E.MenuBarItem,{icon:(0,je.jsx)(de.ViewOnceIcon,{className:pe.default.voIcon}),title:he.fbt._("View once info",null,{hk:"47XkZ4"}),onClick:o}),(0,je.jsx)(Fe,{isMediaDownloadable:t,isAlbumMedia:!1,msg:n,onClose:a})]})}},777361:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(371125)),i=n(690495),l=a(n(488922)),s=a(n(674465)),r=a(n(996513)),c=a(n(708126)),d=n(438543),u=a(n(529727)),f=n(164832),p=n(130756),h=n(667294),m=a(n(156720)),g=a(n(38085)),x=n(655241),v=n(785893);const b={container:{width:"ln8gz9je",height:"ppled2lx"},stickerContainer:{maxWidth:"mx6rw3sv",maxHeight:"trnfqnf9",marginBottom:"r2u2pyhj",zIndex:"thghmljt"}},C=(e,t)=>{const{msg:n}=e,a=(0,x.useModelValues)(e.mediaData,["encFilehash","directPath","filehash","mediaKey","mediaKeyTimestamp","mediaStage","mimetype","fullWidth","fullHeight","isFirstParty","stickerPackId","stickerPackName","stickerPackPublisher"]),C=(0,h.useRef)(null),j=(0,g.default)(t,C),M=e=>{var t;null===(t=C.current)||void 0===t||t.onClick(e)},_=a.isFirstParty?(0,v.jsx)(o.default,{stickerPackId:a.stickerPackId,onStickerPackView:e.onStickerPackView,stickerPackViewDelay:e.stickerPackViewDelay,sticker:new f.StickerModel({id:a.filehash,mimetype:a.mimetype,width:a.fullWidth,height:a.fullHeight,filehash:a.filehash,encFilehash:a.encFilehash,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp})}):(0,v.jsx)(d.StickerDetailsStickerPackInfo,{name:a.stickerPackName,publisher:a.stickerPackPublisher,theme:d.Theme.MediaViewer,sticker:new f.StickerModel({id:a.filehash,mimetype:a.mimetype,width:a.fullWidth,height:a.fullHeight,filehash:a.filehash,encFilehash:a.encFilehash,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp})});return(0,v.jsxs)(i.FlexColumn,{align:"center",justify:"center",xstyle:b.container,children:[(0,v.jsx)("div",{className:(0,m.default)(b.container,b.stickerContainer),"data-testid":"media-sticker",children:(0,v.jsx)(c.default,{ref:j,width:a.fullWidth,height:a.fullHeight,onZoomIn:e.onImgZoomIn,msg:n,children:(0,v.jsx)(s.default,{mediaData:a,placeholderRenderer:()=>(0,v.jsx)(u.default,{size:376}),downloadMedia:()=>null==n?void 0:n.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}),children:t=>(0,v.jsx)(l.default,{className:(0,m.default)(r.default.content),onClick:M,src:t,onLoad:e.onLoad})})})}),_]})};var j=(0,h.forwardRef)(C);t.default=j},177046:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(66985)),i=a(n(49677)),l=a(n(932325)),s=n(172259),r=a(n(996513)),c=a(n(821384)),d=n(728),u=n(31900),f=n(277037),p=n(541345),h=n(244186),m=n(962647),g=a(n(439114)),x=n(130756),v=n(113189),b=n(667294),C=a(n(156720)),j=n(655241),M=n(785893);function _(e,t){var n;const{autoPlay:a,msg:_,onLoad:y,onClose:k,onLoadedData:P,startTime:w=0}=e,T=(0,j.useModelValues)(e.mediaData,["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]),[I,E]=(0,b.useState)(!1),[A,N]=(0,b.useState)(!0),O=(0,b.useRef)(),R=(0,b.useMemo)((()=>(T.mediaStage===s.MEDIA_DATA_STAGE.RESOLVED||T.streamable&&T.isStreamable())&&(0,v.isNonZeroNumber)(T.fullWidth)&&(0,v.isNonZeroNumber)(T.fullHeight)?function(e){if(e.isGif){const t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}if(e.fullWidth>=u.MIN_WIDTH)return{width:e.fullWidth,height:e.fullHeight};return{width:u.MIN_WIDTH,height:e.fullHeight}}(T):{width:0,height:0}),[T]);(0,b.useEffect)((()=>{if(!T.isStreamable())return _.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:x.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),()=>{_.mediaObject&&_.cancelDownload()}}),[]);const D=e=>{E(e)};(0,b.useImperativeHandle)(t,(()=>({getContainerElement:()=>O.current,closingMedia(){N(!1)}})));const L=T.isGif;let B=T.mediaStage===s.MEDIA_DATA_STAGE.RESOLVED||T.streamable&&T.isStreamable();B=B||_.isForcingRMR();let G=null;const F=h.ReactionBubbleType.MEDIA_ITEM;if(_&&(0,m.shouldShowReactionBubble)(_,F)&&(G=(0,M.jsx)(p.ReactionBubbleContainer,{msgIds:[_.id.toString()],reactionBubbleType:F,reactionBubbleVisible:A})),B){const e=l.default.t(628);let t,n;return!I&&(null==_?void 0:_.interactiveAnnotations)&&_.interactiveAnnotations.length>0&&(t=(0,M.jsx)(o.default,{annotations:_.interactiveAnnotations})),n=L?(0,M.jsxs)("div",{className:(0,C.default)(r.default.content),ref:O,"data-testid":"media-gif",children:[(0,M.jsx)(g.default,{src:T.renderableUrl,onClick:S,autoPlay:!0,loop:!0,onLoadedData:P,children:e}),t]}):(0,M.jsx)("div",{ref:O,className:(0,C.default)(r.default.content),onClick:S,"data-testid":"media-video",children:(0,M.jsx)(f.WrappedMsgVideoPlayer,{msg:_,mediaData:T,startTime:w,onClose:k,onError:()=>{},onFullscreenToggle:D,autoPlay:a,type:d.PLAYER_TYPE.MEDIA_VIEWER,overlays:t,noPip:_.isViewOnce,onLoadedData:P})}),(0,M.jsxs)(c.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:R,onObjectLoad:y,children:[n,G]})}return(0,M.jsxs)(c.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:T.fullWidth,height:T.fullHeight},children:[(0,M.jsx)(i.default,{altText:null!==(n=_.caption)&&void 0!==n?n:"",mediaData:T}),G]})}var y=(0,b.forwardRef)(_);function S(e){e.stopPropagation()}t.default=y},933147:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,onImageLoad:n,isAnimatingIn:a,onImgZoomIn:i,onExitAnimation:T,onBack:Y}=e,[z,X,Z,J,Q,$,ee,te,ne]=(0,F.useMsgValues)(e.msg.id,[S.getId,S.getStar,d.getIsUnsentMedia,S.getIsViewOnce,S.getIsStickerMsg,S.getCaption,S.getInteractiveAnnotations,S.getType,S.getMessageSecret]),ae=(0,d.getChat)(t),oe=(0,G.useModelValues)(e.mediaData,["mediaStage","type","isGif"]),ie=(0,H.default)(a),le=(0,B.useRef)(null),se=(0,B.useRef)(null),re=(0,B.useRef)(null),ce=(0,B.useRef)(null),de=(0,B.useRef)(),ue=(0,B.useRef)(!1),fe=(0,B.useRef)(!1),pe=(0,B.useRef)(!1),[he,me]=(0,V.default)(w.NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),ge=J&&he,[xe]=(0,B.useState)((()=>oe.mediaStage===j.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(z):null)),[ve,be]=(0,B.useState)(!1),[Ce,je]=(0,B.useState)(!1),[Me,_e]=(0,B.useState)(!e.isAnimatingIn),[ye,Se]=(0,B.useState)(!1),[ke,Pe]=(0,B.useState)(!1),we=()=>{const e=(0,W.jsx)(O.default,{isPhoto:oe.type===g.default.TYPE.IMAGE,onOkClick:()=>{me(),y.ModalManager.close()}});y.ModalManager.open(e)},Te=(0,U.default)(((e,t)=>{if(Ce)return;const n=le.current;if(!n)return;const a=n.getInsideContainer();if(!(a&&a instanceof HTMLElement))return;const o=n.getOutsideContainer();if(!(o&&o instanceof HTMLElement))return;const{translateX:i,translateY:l}=n.getTranslatePosition(o,e,t);(0,N.default)(a,"stop"),(0,N.default)(a,{translateX:i,translateY:l,scale:M.ZOOM_IN_FACTOR},{duration:0})}));(0,B.useEffect)((()=>(__LOG__(2)`MediaViewerModal: Opened`,ge&&we(),r.default.focus(ce.current),()=>{__LOG__(2)`MediaViewerModal: Closed`,Te.cancel()})),[]);const Ie=()=>{J&&(0,h.canMarkPlayed)(t)&&(0,h.markPlayed)(t)},Ee=e=>{Ie(),n&&n();const t=xe,o=e.target;t&&o&&a&&o instanceof HTMLElement&&(pe.current||(pe.current=!0,((e,t)=>{var n;const a=t.getBoundingClientRect(),o=e.getBoundingClientRect();let i=o.top-a.top,l=o.left-a.left;const s=e.clientWidth/t.clientWidth;i-=(t.clientHeight-e.clientHeight)/2,l-=(t.clientWidth-e.clientWidth)/2,(0,N.default)(t,{opacity:[1,0],translateX:[0,l],translateY:[0,i],scale:[1,s]},{duration:M.ANIMATION_DURATION,easing:[.1,.82,.25,1]});const r=null===(n=re.current)||void 0===n?void 0:n.getElement();r&&(0,N.default)(r,{opacity:[1,0]},{duration:M.ANIMATION_DURATION})})(t,o)))},Ae=()=>{var t;if(ue.current)return;ue.current=!0,(0,o.isFunction)(T)&&T();const n=e.getZoomNode&&e.getZoomNode(z);if(!n)return Y();let a;var i;if([g.default.TYPE.IMAGE,g.default.TYPE.STICKER].includes(oe.type)&&le.current)a=le.current.getInsideContainer(),null===(i=le.current)||void 0===i||i.closingMediaZoomable();else if(oe.isGif&&se.current){var l;a=se.current.getContainerElement(),null===(l=se.current)||void 0===l||l.closingMedia()}if(!a)return Y();const s=a,r=a.getBoundingClientRect(),c=n.getBoundingClientRect();let d=c.top-r.top,u=c.left-r.left;const f=n.clientWidth/s.clientWidth;d-=(s.clientHeight-n.clientHeight)/2,u-=(s.clientWidth-n.clientWidth)/2,(0,N.default)(a,{translateX:[u,0],translateY:[d,0],scale:[f,1]},{duration:M.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{Y()}));const p=null===(t=re.current)||void 0===t?void 0:t.getElement();p&&(0,N.default)(p,{opacity:[0,1]},{duration:M.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})},Ne=e=>{const t=le.current;e&&t&&(fe.current=t.getHeightOverflow()>0||t.getWidthOverflow()>0),be(e),i(e)},Oe=e=>{var t;const n=null===(t=le.current)||void 0===t?void 0:t.getInsideContainer(),o=Boolean(null==n?void 0:n.contains(document.activeElement));if(a||!o)return;Te.cancel();const i=le.current;null!=i&&i.onKeyboardZoom(e)},Re=()=>{Pe(!0)},De=()=>{je(!0)},Le=()=>{je(!1)},Be=e=>{e.stopPropagation(),Se(!ye)};let Ge,Fe;switch((0,B.useEffect)((()=>{a||Me||!ie||_e(!0)}),[a,Me,ie]),oe.type){case g.default.TYPE.IMAGE:Ge=(0,W.jsx)(x.default,{msg:t,mediaData:oe,onLoad:Ee,onImgZoomIn:Ne,onAnnotationTooltipDisplay:De,onAnnotationTooltipDismiss:Le,preventDownload:J,ref:le},z.toString());break;case g.default.TYPE.STICKER:Ge=(0,W.jsx)(C.default,{msg:t,mediaData:oe,onLoad:Ee,onImgZoomIn:Ne,onStickerPackView:Ae,stickerPackViewDelay:M.CLOSE_ANIMATION_DURATION,ref:le},z.toString());break;case g.default.TYPE.VIDEO:Ge=(0,W.jsx)(_.default,{autoPlay:!ge,msg:t,mediaData:oe,onLoadedData:oe.isGif?Ee:Ie,startTime:e.startTime,onClose:Ae,ref:se},z.toString());break;case g.default.TYPE.AUDIO:Ge=(0,W.jsx)(m.default,{mediaData:oe,msg:t},z.toString());break;default:__LOG__(4,void 0,new Error,!0)`type: ${oe.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}const Ve=e.msgIndexInAlbum>=0&&e.albumSize>=0;if($||Ve){let n;Ve&&(n=p.default.t(505,{number:e.msgIndexInAlbum+1,totalNumber:e.albumSize}));const a=c.Conversation({mentions:t.mentionMap(),groupMentions:t.groupMentionMap(),phoneNumbers:(0,P.getPhoneNumbersFromMsg)(t),links:(0,k.getLinksFromMsg)(t),trusted:!0,fromMe:z.fromMe}),o=oe.type===g.default.TYPE.IMAGE&&!J,i=!Me&&(oe.isGif||o);Fe=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("p",{className:(0,l.cx)({[R.default.captionWrapperExpandable]:!0===de.current,[R.default.captionWrapper]:!0}),onClick:de.current?Be:void 0,title:de.current?D.fbt._("Read more",null,{hk:"2DvSvh"}):void 0,"aria-hidden":ye||void 0,children:[(0,W.jsx)(s.EmojiText,{className:(0,l.cx)({[R.default.captionHidden]:i,[R.default.expanded]:ye,[R.default.mediaCaption]:!0}),formatters:a,ref:e=>{re.current=e},text:$||n}),de.current&&(0,W.jsx)(A.default,{xstyle:[q.captionReadMoreBtn,ye&&q.captionReadMoreBtnExpanded,ve&&q.captionReadMoreBtnZoomed],onClick:Be,children:(0,W.jsx)(I.TextSpan,{children:D.fbt._("Read more",null,{hk:"2DvSvh"})})})]}),ye&&(0,W.jsx)("p",{className:(0,L.default)(R.default.captionWrapper,R.default.captionWrapperExpandable,R.default.captionExpanded),onClick:Be,children:(0,W.jsx)(s.EmojiText,{className:(0,L.default)(R.default.mediaCaption,R.default.mediaCaptionExpanded),formatters:a,text:$})})]})}const He=(0,l.cx)({[R.default.mediaWithCaption]:!!Fe,[R.default.media]:!0}),Ue=(0,l.cx)({[R.default.noThumbnails]:J||Q,[R.default.mediaViewerAnimate]:e.isAnimatingIn,[R.default.cursorZoomOut]:ve,overlay:!0,[R.default.mediaViewer]:!0}),We=ve&&fe.current?e=>{Te(e.pageX,e.pageY)}:null,Ye=ve?e=>{Te.cancel();const t=le.current;t&&ve&&t.onClick(e)}:null;let qe=ve?null:Ae;null!=qe&&J&&(qe=Re);return(0,W.jsx)(E.UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:Ae,children:(0,W.jsx)(f.HotKeys,{handlers:{space:Oe,enter:Oe},ref:ce,children:(0,W.jsxs)("div",{className:Ue,"data-animate-media-viewer":!0,"data-testid":"media-viewer-modal",onClick:Ye,onMouseMove:We,children:[(0,W.jsx)(v.default,{isHighlightClose:ke,msg:t,mediaData:oe,onClose:Ae,onHightlightCloseEnd:()=>{Pe(!1)},onViewOnceInfoClick:()=>{we()},msgIndexInAlbum:e.msgIndexInAlbum}),(0,W.jsx)("div",{className:(0,l.cx)({[R.default.sticker]:Q,[R.default.mediaContent]:!0}),onClick:qe,children:(0,W.jsx)(K,{hasNavigationButtons:!J&&!Q,onNext:e.onNext,onPrev:e.onPrev,imgZoomed:ve,children:(0,W.jsxs)("div",{className:He,children:[(0,W.jsx)(b.default,{msg:t,mediaData:oe}),Ge,(0,W.jsx)(u.default.Provider,{value:ae.groupMetadata,children:Fe})]})})})]})})})};var o=n(724976),i=n(305989),l=n(752253),s=n(305521),r=a(n(335540)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(675886)),d=n(163755),u=a(n(462824)),f=n(81644),p=a(n(932325)),h=n(711735),m=a(n(883537)),g=a(n(116253)),x=a(n(142958)),v=a(n(548290)),b=a(n(36886)),C=a(n(777361)),j=n(172259),M=n(69315),_=a(n(177046)),y=n(114850),S=n(787742),k=n(44118),P=n(527530),w=n(95589),T=n(435595),I=n(180519),E=n(392632),A=a(n(625903)),N=a(n(330619)),O=a(n(25683)),R=a(n(192639)),D=n(548360),L=a(n(261294)),B=n(667294),G=(a(n(156720)),n(655241)),F=n(871210),V=a(n(157558)),H=a(n(49710)),U=a(n(286481)),W=n(785893);function Y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Y=function(e){return e?n:t})(e)}const q={captionReadMoreBtn:{position:"lhggkp7q",end:"h223g3sc",bottom:"jxacihee",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"nu34rnf1",backgroundColor:"idmi9oma",borderTopStartRadius:"ho9ovbg7",borderTopEndRadius:"tcg15ap9",borderBottomEndRadius:"c5wy1lv0",borderBottomStartRadius:"bqysl6j9",boxShadow:"a95fzlb5"},captionReadMoreBtnExpanded:{visibility:"kojwoqec"},captionReadMoreBtnZoomed:{visibility:"kqpkm0zi",opacity:"lxctpz5v"}};function z(e){null==e||e.stopPropagation()}function K(e){var t,n,a,o;return(0,W.jsxs)(W.Fragment,{children:[e.hasNavigationButtons&&(0,W.jsx)("div",{className:(0,L.default)(R.default.btnMediaPrev),children:(0,W.jsx)("div",{onClick:e.onPrev?null:z,children:(0,W.jsx)(i.ChevronButton,{type:i.ButtonType.Prev,onClick:null!==(t=e.onPrev)&&void 0!==t?t:void 0,onKeyDown:null!==(n=e.onPrev)&&void 0!==n?n:void 0,disabled:!e.onPrev||e.imgZoomed,theme:T.RoundTheme.Default})})}),e.children,e.hasNavigationButtons&&(0,W.jsx)("div",{className:(0,L.default)(R.default.btnMediaNext),children:(0,W.jsx)("div",{onClick:e.onPrev?null:z,children:(0,W.jsx)(i.ChevronButton,{type:i.ButtonType.Next,onClick:null!==(a=e.onNext)&&void 0!==a?a:void 0,onKeyDown:null!==(o=e.onNext)&&void 0!==o?o:void 0,disabled:!e.onNext||e.imgZoomed,theme:T.RoundTheme.Default})})})]})}},467201:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,n=(0,i.getChat)(t);return(0,d.jsx)(o.DropdownItem,{action:()=>{l.ModalManager.open((0,d.jsx)(s.default,{chat:n,msg:t,spamFlow:r.SpamFlow.MediaViewer}))},children:c.fbt._("",null,{hk:"2TFyS0"})})};var o=n(675085),i=n(163755),l=n(114850),s=a(n(207511)),r=n(453603),c=n(548360),d=n(785893)},774396:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;return(0,u.jsx)(o.DropdownItem,{action:()=>{(0,s.logRTAReportingEvent)({reportToAdminInteraction:c.REPORT_TO_ADMIN_INTERACTION.CLICK_SEND_FOR_ADMIN_REVIEW,groupId:(0,i.getChat)(t).id.user}),l.ModalManager.open((0,u.jsx)(r.default,{msg:t}))},children:d.fbt._("Send for admin review",null,{hk:"4ouSa6"})})};var o=n(675085),i=n(163755),l=n(114850),s=n(554800),r=a(n(286391)),c=n(130756),d=n(548360),u=n(785893)},266648:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mediaMsgs:t,onScroll:n,activeMsg:a}=e,i=(0,u.useRef)({}),l=(0,u.useRef)(null),s=(0,u.useRef)(null),r=(0,f.default)(a.id),m=()=>{var e;null===(e=l.current)||void 0===e||e.focusOnActive()};(0,u.useEffect)((()=>{var e;(null===(e=s.current)||void 0===e?void 0:e.contains(document.activeElement))&&!a.id.equals(r)&&m()}),[a,r]);const x=()=>{const e=new Map;return t.forEach((t=>{const n=t.id.toString();e.set(n,(e=>{const t=i.current[e];if(!t)return!1;const n=t.getBoundingClientRect(),a=(n.left+n.right)/2;return!(a>-1*window.innerWidth&&a<2*window.innerWidth)})(n))})),e},[v,b]=(0,u.useState)(x),C=(0,p.default)((()=>{const e=x();(0,o.default)(v,e)||b(e)}),100);return(0,h.jsx)("div",{className:c.default.thumbsContainer,ref:e.setRefThumbsContainer,children:(0,h.jsx)("div",{ref:s,className:c.default.scrollContainer,dir:"ltr",children:(0,h.jsx)("div",{role:"list","aria-label":d.fbt._("Media List",null,{hk:"3dsEfq"}),tabIndex:1,onFocus:()=>{m()},onScroll:e=>{C(),n(e)},className:c.default.viewerThumbs,ref:e.setRefThumbs,children:(0,h.jsx)(g,{ref:l,mediaMsgs:t,highlightedMsgIds:e.highlightedMsgIds,activeMsg:e.activeMsg,onSetActiveThumb:e.onSetActiveThumb,onSelectThumb:e.onSelectThumb,msgIdToPreferPreview:v})})})})};var o=a(n(621733)),i=a(n(335540)),l=n(125922),s=n(787742),r=n(956113),c=a(n(572028)),d=n(548360),u=n(667294),f=a(n(49710)),p=a(n(286481)),h=n(785893);function m(e,t){let{mediaMsgs:n,highlightedMsgIds:a,activeMsg:o,onSetActiveThumb:d,onSelectThumb:f,msgIdToPreferPreview:p}=e;const m=(0,u.useRef)({}),g=()=>{const e=o.id.toString(),t=m.current[e];t&&i.default.focus(t)};(0,u.useImperativeHandle)(t,(()=>({focusOnActive:g})));const x=a&&a.size>0&&a.has(o.id.toString()),v=[];return n.forEach((e=>{if(null==e.mediaData){const t=o;return void __LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:e.type,isMedia:(0,s.getIsMedia)(e),startMsgType:t.type,startMsgIsMedia:(0,s.getIsMedia)(t)})}`}const t=x&&a&&!a.has(e.id.toString())?"viewerFlowTransparent":"viewerFlow";v.push((0,h.jsx)(l.MediaThumb,{theme:t,active:e===o,msg:e,containerRef:t=>{((e,t)=>{m.current[t]=e})(t,e.id.toString()),e===o&&d(t)},onClick:()=>{f(e)},preferPreview:!!p.get(e.id.toString()),showTooltip:(0,s.getIsGroupMsg)(e)},`media-${e.id.id}`))})),v.push((0,h.jsx)("div",{className:c.default.mediaThumb,children:n.queryMediaAfter?(0,h.jsx)(r.Spinner,{stroke:6,size:24}):null},"spinner-right")),v.unshift((0,h.jsx)("div",{className:c.default.mediaThumb,children:n.queryMediaBefore?(0,h.jsx)(r.Spinner,{stroke:6,size:24}):null},"spinner-left")),v.push((0,h.jsx)("div",{className:c.default.thumbPadding},"padding-right")),v.unshift((0,h.jsx)("div",{className:c.default.thumbPadding},"padding-left")),(0,h.jsx)(h.Fragment,{children:v})}const g=(0,u.forwardRef)(m);g.displayName="MediaThumbs"},25683:(e,t,n)=>{"use strict";var a=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,p.jsx)(o.ConfirmPopup,{onOK:t,cancelText:c.default.t(393),onCancel:()=>{(0,i.openExternalLink)((0,l.getViewOnceFaqUrl)())},children:(0,p.jsxs)(s.FlexColumn,{children:[(0,p.jsx)(r.default,{xstyle:h.graphic,align:"center",children:(0,p.jsx)(u.ViewOnceSenderNuxIcon,{width:195,height:177})}),(0,p.jsx)(d.WDSTextLarge,{children:e.isPhoto?f.fbt._("This photo is set to view once",null,{hk:"2H7aHc"}):f.fbt._("This video is set to view once",null,{hk:"1w8WFf"})}),(0,p.jsx)(d.WDSTextMuted,{children:e.isPhoto?f.fbt._("For more privacy, this photo will disappear after you close it.",null,{hk:"1XZPqi"}):f.fbt._("For more privacy, this video will disappear after you close it.",null,{hk:"3YgUHE"})})]})})};var o=n(103440),i=n(753233),l=n(258105),s=n(690495),r=a(n(469733)),c=a(n(932325)),d=n(180519),u=n(875602),f=n(548360),p=(a(n(156720)),n(785893));const h={graphic:{marginBottom:"t4zgqcuo"}}},986458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={footerNote:"_3Ii0U",getTheAppLink:"_2uO1h"}},750478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={wrapper:"_1HfA2",code:"_25NCw",codeDarkMode:"_3p_Xc",codeLogo:"_3cy64"}},663945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={msg:"_7Upvn",text:"_3Q6VG",bubble:"_3cupO",author:"LldYr",hasSuspiciousLinks:"_1BEFs",hasAuthor:"_28v58",suspiciousLabel:"_1kBNA"}},363467:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={businessHoursRow:"_3sfEB",firstRow:"_2sBkJ",businessHoursDay:"_2pvvT",businessHoursHours:"_3kLLJ",dayIsOpen:"_29-HA",businessHoursChevron:"_2XvVc",flipSvg:"_3fNaY"}},850858:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={section:"_1we7x",description:"_2JSHQ",map:"mSpzh"}},161160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={contactBusinessInfo:"vXoia",contactBusinessInfoSpinner:"_3sbaB",dataRow:"_2hU95",businessHoursRow:"_229jY",businessHoursDay:"_2Ue47",businessHoursHours:"_150zM",businessHoursChevron:"_1Biw6",flipSvg:"_2McRc",dataRowIcon:"XiT7h",dataRowText:"_1jydV",businessMap:"_2WOiM",address:"_2LXal",link:"_3mxhI",infoIcon:"_3TfXM"}},936027:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaViewerPlaceholder:"_2qUle",imageAudio:"_1leJw",mediaViewerAudio:"_17zHt"}},572028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={thumbsContainer:"_3GUJh",scrollContainer:"_27n9o",viewerThumbs:"_1P0Vh",mediaThumb:"_2nI8K",thumbPadding:"_1s0h2"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components.2aa7528ca37d5b1a56dd.js.map
