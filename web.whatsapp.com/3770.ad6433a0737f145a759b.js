/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[3770],{8219:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesFormDrawer=function(e){let{currency:t,subtotal:r,additionalCharges:n,onBack:g,onApply:S}=e;const C=(null==n?void 0:n.discountText)||"",[T,M]=(0,u.useState)(C),j=(null==n?void 0:n.taxText)||"",[O,P]=(0,u.useState)(j),A=(null==n?void 0:n.shippingText)||"",[I,k]=(0,u.useState)(A),w=(null==n?void 0:n.discountType)||v,[E,D]=(0,u.useState)(w),R=(null==n?void 0:n.taxType)||_,[L,F]=(0,u.useState)(R),[N,U]=(0,u.useState)(!1),[B,q]=(0,u.useState)(!1),H=(0,u.useMemo)((()=>(0,h.additionalChargeErrorHandler)({currency:t,value:I})),[t,I]),G=[N,B,H].some((e=>e));return(0,x.jsxs)(c.default,{children:[(0,x.jsx)(d.DrawerHeader,{title:o.fbt._("Add discount, shipping or tax",null,{hk:"nPDUK"}),type:d.DRAWER_HEADER_TYPE.SMALL,onBack:C!==T||j!==O||A!==I||w!==E||R!==L?()=>{a.ModalManager.open((0,x.jsx)(m.ConfirmDiscardModal,{onOK:g}))}:g,focusBackOrCancel:!0}),(0,x.jsxs)(f.default,{className:(0,i.default)(l.uiPadding.all16),children:[(0,x.jsx)(p.AdditionalChargesTextInput,{text:T,a8nText:"additional-charges-discount-input",label:o.fbt._("Discount",null,{hk:"3acZrp"}),symbol:E,currency:t,priceValue:r,setText:M,setError:U,setSymbol:D}),(0,x.jsx)(b.TextInput,{value:I,a8n:"additional-charges-shipping-input",placeholder:o.fbt._("Shipping ({currency_symbol})",[o.fbt._param("currency_symbol",(0,s.formatAmount1000ToParts)(t,0).symbol)],{hk:"H2WDY"}),onChange:k,theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:H}),(0,x.jsx)(p.AdditionalChargesTextInput,{text:O,a8nText:"additional-charges-tax-input",label:o.fbt._("Tax",null,{hk:"2r5wzT"}),symbol:L,currency:t,priceValue:r,setText:P,setError:q,setSymbol:F}),(0,x.jsx)(y.OrderApplyChangesButton,{disabled:G,a8nText:"apply-additional-costs-button",title:o.fbt._("Apply",null,{hk:"3E5Tq7"}),onClick:()=>S({discountText:T,taxText:O,shippingText:I,discountType:E,taxType:L})})]})]})};var a=r(14597),l=r(28298),o=r(48360),u=r(67294),i=n(r(56720)),s=r(39519),c=n(r(60453)),d=r(94790),f=n(r(33308)),p=r(52088),m=r(3445),h=r(47188),g=r(59789),y=r(33877),b=r(90011),x=r(85893);const v=g.PERCENTAGE_SYMBOL,_=g.PERCENTAGE_SYMBOL},52088:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesTextInput=function(e){let{text:t,label:r,symbol:n,a8nText:m,currency:h,priceValue:g,setText:y,setError:b,setSymbol:x}=e;const v=(0,l.useMemo)((()=>{const e=(0,i.additionalChargeErrorHandler)({label:r,currency:h,fieldType:n,maxFlatValue:g/s.DEFAULT_OFFSET,enablePercentValueCheck:!0,value:t});return b(Boolean(e)),e}),[t,r,n,h,b,g]);return(0,d.jsxs)("div",{className:(0,o.default)(f),children:[(0,d.jsx)(c.TextInput,{value:t,a8n:m,placeholder:a.fbt._("{input_label} ({currency_or_percentage})",[a.fbt._param("input_label",r),a.fbt._param("currency_or_percentage",n)],{hk:"vf1Ko"}),onChange:e=>y(e),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:v}),(0,d.jsx)("div",{className:(0,o.default)(p),children:(0,d.jsx)(u.OrderDetailAmountTypeSelector,{currency:h,value:n,onChange:e=>{let{value:t}=e;return x(t)}})})]})};var a=r(48360),l=r(67294),o=n(r(56720)),u=r(70239),i=r(47188),s=r(59789),c=r(90011),d=r(85893);const f={position:"g0rxnol2"},p={position:"lhggkp7q",end:"ebjesfe0",zIndex:"mb8var44",top:"agjvi7sf"}},15607:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogFormDrawer=function(e){let{currency:t,productsSelection:r,orderProducts:n,onBack:T,onAddProducts:M,onAddCustomItem:j,onProductSelectionChange:O}=e;const[P,A]=(0,i.useState)(!1),I=(0,c.default)(),k=(0,d.default)((()=>new y.default)),w=r.getSelected().reduce(((e,t)=>e+(t.priceAmount1000||0)*Number(r.getVal(t))),0);return(0,S.jsxs)(p.default,{children:[(0,S.jsx)(h.DrawerHeader,{title:u.fbt._("Add items",null,{hk:"2U1Vru"}),type:h.DRAWER_HEADER_TYPE.SMALL,onBack:P?()=>{l.ModalManager.open((0,S.jsx)(v.ConfirmDiscardModal,{onOK:T}))}:T,focusBackOrCancel:!0}),(0,S.jsxs)(m.default,{children:[(0,S.jsxs)(g.default,{theme:"expand-height",xstyle:C.drawerSection,children:[(0,a.orderDetailsCustomItemEnabled)()&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(b.AddOrderItem,{title:u.fbt._("Create new item",null,{hk:"2GmSAs"}),onClick:j}),(0,S.jsx)("hr",{className:(0,s.default)(C.catalogBar,o.uiMargin.vert0)})]}),(0,S.jsx)("p",{className:(0,s.default)(C.catalogTitleText,o.uiPadding.start16,o.uiPadding.vert10),children:u.fbt._("Catalog items",null,{hk:"4chzUe"})}),(0,S.jsx)(x.default,{className:(0,s.default)(C.catalogProductsList),productsSelection:r,selectedProducts:n,flatListController:k.current,onProductSelectChange:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O(e,t),r||P||A(!0),I()}})]}),(0,S.jsx)(_.OrderTotalPrice,{xstyle:[o.uiPadding.all16,o.uiMargin.top10],visible:!0,disabled:!P,totalPrice:(0,f.formatAmount1000)(t,w),a8nButtonText:"save-products-button",onConfirm:M,title:u.fbt._("Subtotal",null,{hk:"4ciFet"}),confirmTitle:u.fbt._("Add to Order",null,{hk:"2SYeoP"})})]})]})};var a=r(8139),l=r(14597),o=r(28298),u=r(48360),i=r(67294),s=n(r(56720)),c=n(r(59312)),d=n(r(16223)),f=r(39519),p=n(r(60453)),m=n(r(69637)),h=r(94790),g=n(r(33308)),y=n(r(30855)),b=r(58795),x=n(r(31499)),v=r(3445),_=r(33877),S=r(85893);const C={catalogTitleText:{fontWeight:"m1e7cby3",lineHeight:"tkq7s68q",fontSize:"ovllcyds",color:"q70jrbp7"},catalogBar:{width:"ln8gz9je",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv",borderTop:"gq6acybq"},catalogProductsList:{overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk"},drawerSection:{display:"p357zi0d",overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexDirection:"f8m0rgwh"}}},39504:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogFormProduct=function(e){let{product:t,productsSelection:r,onProductSelectChange:n}=e;return(0,u.jsx)(l.default,{model:t,selections:r,children:(0,u.jsx)(o.default,{product:t,onClick:()=>{const e=r.isSelected(t);n(t,e?0:1)},checkbox:!0,detail:r.isSelected(t)&&(0,u.jsx)("div",{children:(0,u.jsx)(a.default,{quantity:Number(r.getVal(t)),onChange:e=>n(t,e),a8nText:"product-quantity-selector"})})})},t.id.toString())};var a=n(r(39864)),l=n(r(90233)),o=n(r(88990)),u=r(85893)},31499:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,productsSelection:r,selectedProducts:n,flatListController:v,onProductSelectChange:_}=e;const S=(0,f.default)(),C=(0,s.default)(),T=(0,i.default)(C,100),M=p.CatalogCollection.assertGet((0,o.getMaybeMeUser)()),[j,O]=(0,u.useState)(!1),[P,A]=(0,u.useState)(0),[I,k]=(0,u.useState)(!1),w=()=>M.productCollection.getProductModels().map((e=>({itemKey:e.id.toString(),product:e}))),E=e=>{e.forEach((e=>{const t=n.find((t=>t.id===e.product.id));void 0!==t&&_(e.product,Number(t.quantity),!0)}))},D=function(){var e=(0,a.default)((function*(){if(I)return;if(!M.afterCursor)return;const e=M.productCollection.getProductModels().length;O(!0),A(e);try{const t=yield p.CatalogCollection.update((0,o.getMaybeMeUser)());if(S.aborted)return;O(!1);const r=(Array.isArray(t)?t[0]:t).productCollection.getProductModels().length;if(E(w().slice(e)),r===P&&k(!0),e*m.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight)return D()}catch(e){O(!1),k(!0)}}));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((()=>{E(w()),D()}),[]),(0,c.useListener)(M.productCollection,"add",T);const R=(0,d.default)((e=>{j||e.scrollTop+l.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&D()}),100);return(0,x.jsxs)(g.default,{className:t,flatListControllers:[v],onScroll:e=>{e.currentTarget&&R(e.currentTarget)},children:[(0,x.jsx)(h.FlatList,{flatListController:v,direction:"vertical",forceConsistentRenderCount:!1,data:w(),renderItem:e=>{let{product:t}=e;return(0,x.jsx)(b.CatalogFormProduct,{product:t,productsSelection:r,onProductSelectChange:_})},defaultItemHeight:m.PRODUCT_LIST_ITEM_HEIGHT}),j&&(0,x.jsx)(y.default,{})]})};var a=n(r(48926)),l=r(41906),o=r(78820),u=r(67294),i=n(r(51799)),s=n(r(59312)),c=r(87550),d=n(r(90886)),f=n(r(3409)),p=r(99989),m=r(64481),h=r(47915),g=n(r(44942)),y=n(r(29796)),b=r(39504),x=r(85893)},3445:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmDiscardModal=function(e){let{onOK:t}=e;return(0,i.jsx)(o.default,{title:l.fbt._("Discard changes?",null,{hk:"1SaEaC"}),onOK:()=>{a.ModalManager.close(),t()},okText:l.fbt._("Discard",null,{hk:"3etb6C"}),onCancel:()=>a.ModalManager.close(),children:(0,i.jsx)(u.TextDiv,{theme:"muted",children:l.fbt._("If you close this, your draft will be discarded.",null,{hk:"4G5DVj"})})})};var a=r(14597),l=r(48360),o=n(r(52665)),u=r(13923),i=r(85893)},73668:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomItemFormDrawer=function(e){let{currency:t,customItem:r,onBack:n,onSaveCustomItem:s}=e;const[_,S]=(0,u.useState)(null==r?void 0:r.name),[C,T]=(0,u.useState)(Number.isInteger(null==r?void 0:r.price)?String(Number(null==r?void 0:r.price)/1e3):null),[M,j]=(0,u.useState)(null==r?void 0:r.price),[O,P]=(0,u.useState)((null==r?void 0:r.isQuantitySet)?r.quantity:null),[A,I]=(0,u.useState)((null==r?void 0:r.isQuantitySet)?String(r.quantity):null),k=(0,u.useMemo)((()=>function(e){if(null==e)return"";const t=String(o.fbt._("Add a title",null,{hk:"7Lm6B"}));return""===e.trim()?t:""}(_)),[_]),w=(0,u.useMemo)((()=>function(e,t){if(null==t)return"";const r=String(o.fbt._("Enter a valid price",null,{hk:"4yb1Sg"}));return""!==t.trim()&&(0,c.validatePriceString)(e,t,y.MIN_PRICE,y.MAX_PRICE)?"":r}(t,C)),[t,C]),E=(0,u.useMemo)((()=>function(e){if(null==e)return"";const t=String(o.fbt._("Enter a valid quantity",null,{hk:"u6SoG"}));return v(Number(e))?"":t}(A)),[A]),D=function(e,t,r,n){const a=(null==e?void 0:e.isQuantitySet)?Number(n)!==e.quantity:null!=n;return(null==e?void 0:e.name)!==t||(null==e?void 0:e.price)!==r||a}(r,_,M,A);return(0,x.jsxs)(d.default,{children:[(0,x.jsx)(p.DrawerHeader,{title:r?o.fbt._("Update item",null,{hk:"1TL07p"}):o.fbt._("Create new item",null,{hk:"4xRwlm"}),type:p.DRAWER_HEADER_TYPE.SMALL,onBack:D?()=>{a.ModalManager.open((0,x.jsx)(h.ConfirmDiscardModal,{onOK:n}))}:n,focusBackOrCancel:!0}),(0,x.jsx)(f.default,{children:(0,x.jsxs)(m.default,{className:(0,i.default)(l.uiPadding.all16),children:[(0,x.jsx)(b.TextInput,{a8n:"custom-item-edit-name-input",value:_,placeholder:o.fbt._("Item name",null,{hk:"1TMRR7"}),onChange:e=>{S(e)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:k}),(0,x.jsx)(b.TextInput,{a8n:"custom-item-edit-price-input",value:C,placeholder:o.fbt._("Price {symbol}",[o.fbt._param("symbol",(0,c.formatAmount1000ToParts)(t,0).symbol)],{hk:"3jcGcb"}),onChange:e=>{const r=(0,c.valueFromString)(t,e);j(r),T(e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:w}),(0,x.jsx)(b.TextInput,{a8n:"custom-item-edit-quantity-input",value:A,placeholder:o.fbt._("Quantity (Optional)",null,{hk:"4swiuO"}),onChange:e=>{let t=""===e?null:Number(e);v(t)||(t=null),P(t),I(""===e?null:e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:E}),(0,x.jsx)(g.OrderApplyChangesButton,{title:r?o.fbt._("Update Order",null,{hk:"HjU1X"}):o.fbt._("Add to Order",null,{hk:"3p1U18"}),disabled:null==_||null==C||!(!r||D)||[k,w,E].some((e=>e)),onClick:()=>{const e={name:_,priceAmount1000:+M,quantity:O,isQuantitySet:Number.isInteger(O)};s(e)},a8nText:"save-custom-item-button"})]})})]})};var a=r(14597),l=r(28298),o=r(48360),u=r(67294),i=n(r(56720)),s=r(9581),c=r(39519),d=n(r(60453)),f=n(r(69637)),p=r(94790),m=n(r(33308)),h=r(3445),g=r(33877),y=r(9468),b=r(90011),x=r(85893);function v(e){return Number.isInteger(e)&&+e>0&&+e<=s.MAX_QUANTITY}},70239:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:r,currency:n}=e;const c=o.formatLocalSymbol(n),d=a.fbt._("Select amount type",null,{hk:"1xddkG"}),f=[{id:"percentage",label:a.fbt._("by Percentage ({percentage-symbol})",[a.fbt._param("percentage-symbol",u.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:u.PERCENTAGE_SYMBOL},{id:"flat-amount",label:a.fbt._("by Flat amount ({currency-symbol})",[a.fbt._param("currency-symbol",c)],{hk:"duPhj"}),value:c}],p=(0,l.useMemo)((()=>f.findIndex((e=>e.value===t))),[]);return(0,s.jsx)(i.default,{"aria-label":d,options:f,defaultIndex:p,onChange:r})};var a=r(48360),l=r(67294),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(39519)),u=r(59789),i=n(r(43369)),s=r(85893);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}},43369:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:r,onChange:n,"aria-label":p}=e;const m=(0,a.useRef)(null),[h,g]=(0,a.useState)(!1),[y,b]=(0,a.useState)(t),x=r.map(((e,t)=>{const{id:r,label:a}=e;return(0,d.jsx)(u.DropdownItem,{a8n:`mi-${r}`,action:()=>{n(e),b(t)},children:(0,d.jsx)("div",{className:(0,l.default)(f),role:"button","aria-label":a,children:t===y?(0,d.jsx)(i.TextSpan,{weight:"bold",children:a}):a})},r)}));return(0,d.jsxs)("div",{ref:m,children:[(0,d.jsx)(o.default,{"aria-label":p,postfixIcon:"down",label:r[y].value,onClick:()=>g((e=>!e))}),h&&m.current&&(0,d.jsx)(s.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>g(!1),children:(0,d.jsx)(c.default,{contextMenu:{menu:x,anchor:m.current}})})]})};var a=r(67294),l=n(r(56720)),o=n(r(72332)),u=r(71174),i=r(13923),s=r(18644),c=n(r(24717)),d=r(85893);const f={boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"}},29886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMsgFromProducts=u,t.notifyIfAnyProductMissesPrice=void 0;var n=r(94816),a=r(48360),l=r(50452),o=r(85893);function u(e){const t=e.length;return 0===t?"":1===t?a.fbt._("Enter a price for {first-product-name}",[a.fbt._param("first-product-name",e[0])],{hk:"Lf39K"}):2===t?a.fbt._("Enter prices for {first-product-name} and {second-product-name}",[a.fbt._param("first-product-name",e[0]),a.fbt._param("second-product-name",e[1])],{hk:"1uLet0"}):a.fbt._({"*":"Enter prices for {first-product-name}, {second-product-name} and {other-items} other items",_1:"Enter prices for {first-product-name}, {second-product-name} and 1 other item"},[a.fbt._plural(t-2,"other-items"),a.fbt._param("first-product-name",e[0]),a.fbt._param("second-product-name",e[1])],{hk:"1Crsuq"})}t.notifyIfAnyProductMissesPrice=(e,t)=>{const r=u(e.reduce(((e,r)=>{var n;const a=null!==(n=r.price)&&void 0!==n?n:t[r.id];return Number.isInteger(a)||e.push(r.name||""),e}),[]));r&&n.ToastManager.open((0,o.jsx)(l.Toast,{duration:1e4,id:(0,l.genId)(),msg:r,action:{actionText:a.fbt._("OKAY",null,{hk:"3RIrWh"}),dismiss:!0,theme:"success"}}))}},63770:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{order:t,chat:r,onBack:n}=e;const[g,y]=(0,d.useState)(E.ORDER_SUMMARY),[w,L]=(0,d.useState)(null),[F,N]=(0,d.useState)(!1),[U,B]=(0,d.useState)((()=>function(e){if(!e)return[];const t={isCustomItem:!1,isQuantitySet:!0},r=e.products.map((e=>new O.default((0,a.default)((0,a.default)({},t),e))));return(0,j.notifyIfAnyProductMissesPrice)(r,{}),r}(t))),[q,H]=(0,d.useState)({}),[G,Y]=(0,d.useState)(null),Q=(0,p.default)((()=>new i.default([],(e=>e.id.toString())))).current,W=(e,t)=>{H((r=>(0,a.default)((0,a.default)({},r),{},{[t]:e})))},z=(0,d.useMemo)((()=>U.reduce(((e,t)=>{var r,n;return e+(null!==(r=null!==(n=t.price)&&void 0!==n?n:q[t.id])&&void 0!==r?r:0)*t.quantity}),0)),[U,q]),V=(0,T.calculateFlatAmounts)({orderSubtotal:z/T.DEFAULT_OFFSET,discountType:(null==G?void 0:G.discountType)||"",discountText:(null==G?void 0:G.discountText)||"",taxType:(null==G?void 0:G.taxType)||"",taxText:(null==G?void 0:G.taxText)||"",shippingText:(null==G?void 0:G.shippingText)||""}),K=()=>{const e=null!=t?t:_.OrderCollection.addOrder();e.products=U.map((e=>{var t;return e.price=null!==(t=e.price)&&void 0!==t?t:q[e.id],e.currency=R,e})),e.currency=R,e.subtotal=z,e.triggerItemCollectionUpdate(),(0,A.sendOrderDetailsMessageAsMerchant)({order:e,chat:r,orderNote:"",offset:T.DEFAULT_OFFSET,total:V.total,discount:V.discount,shipping:V.shipping,tax:V.tax}),l.DrawerManager.closeDrawerRight()},X=(0,h.hasCatalog)(m.BusinessProfileCollection.get((0,s.getMaybeMeUser)())),$=(0,f.default)((()=>{n?n():l.DrawerManager.closeDrawerRight()})),Z=()=>{!function(e,t,r){if(!e)return t.length>0;return t.length!==e.products.length||t.some(((t,n)=>{var a,l;return t.id!==e.products[n].id||t.quantity!==e.products[n].quantity||(null!==(a=null!==(l=t.price)&&void 0!==l?l:r[t.id])&&void 0!==a?a:null)!==e.products[n].price}))}(t,U,q)?$():u.ModalManager.open((0,k.jsx)(S.ConfirmDiscardModal,{onOK:$}))},J=e=>{!0!==e&&(0,j.notifyIfAnyProductMissesPrice)(U,q),y(E.ORDER_SUMMARY)},ee=()=>{y(E.CATALOG_PRODUCTS_FORM)},te=(e,t)=>{const r=Number.isInteger(e)?e:null;L(r),N(!0===t),y(null==r||U[r].isCustomItem?E.CUSTOM_ITEM_FORM:E.CATALOG_PRODUCTS_FORM)},re=()=>{y(E.ADDITIONAL_CHARGES_FORM)},ne=(e,t)=>{const r=e.length,n=e.reduce(((e,t,r)=>e.set(t.id,r)),new Map);return[...t].sort(((e,t)=>{var a,l;return(null!==(a=n.get(e.id))&&void 0!==a?a:r)-(null!==(l=n.get(t.id))&&void 0!==l?l:r)}))},ae=()=>{B((e=>{const t=function(e){const t=new Set([...e].map((e=>{let{id:t}=e;return t})));return Q.getSelected().filter((e=>!t.has(e.id))).map((e=>{var t;return new O.default({id:e.id,name:e.name,price:e.priceAmount1000,thumbnailUrl:null===(t=e.getPreviewImage())||void 0===t?void 0:t.mediaUrl,quantity:Number(Q.getVal(e)),isCustomItem:!1,isQuantitySet:!0})}))}(e),r=[...e,...t];return(0,j.notifyIfAnyProductMissesPrice)(r,q),ne(e,r)}))},le=e=>{if(!U[e].isCustomItem){const t=Q.getSelected().find((t=>{let{id:r}=t;return r===U[e].id}));t&&ue(t,0)}B((t=>[...t.slice(0,e),...t.slice(e+1)]))},oe=e=>{null!=w?((e,t)=>{B((r=>{var n;const a=[...r];return a[t].set({name:String(e.name),price:Number(e.priceAmount1000),quantity:null!==(n=e.quantity)&&void 0!==n?n:1,isQuantitySet:e.isQuantitySet}),a}))})(e,w):(e=>{let{name:t,priceAmount1000:r,quantity:n,isQuantitySet:a}=e;const l=`${(0,M.getCustomItemIdPrefix)()}-${(0,b.default)()}`;B((e=>ne(e,[...e,new O.default({id:l,name:t,price:r,quantity:null!=n?n:1,isCustomItem:!0,isQuantitySet:a})])))})(e)};function ue(e,t){Q.setVal(e,t)}const ie=D.indexOf(g);if(!g)return null;return(0,k.jsx)(c.default,{children:(0,k.jsx)(I.UIE,{displayName:`FlowDrawer${ie}`,escapable:!0,children:(0,k.jsx)("div",{children:function(e){switch(e){case E.CATALOG_PRODUCTS_FORM:return(0,k.jsx)(v.CatalogFormDrawer,{currency:R,productsSelection:Q,orderProducts:U,onBack:J,onAddProducts:()=>{ae(),J(!0)},onAddCustomItem:()=>{te(null,!0)},onProductSelectionChange:ue});case E.CUSTOM_ITEM_FORM:return(0,k.jsx)(C.CustomItemFormDrawer,{currency:R,onBack:F?ee:J,onSaveCustomItem:e=>{ae(),oe(e),J()},customItem:U[Number.isInteger(w)?Number(w):-1]});case E.ORDER_SUMMARY:return(0,k.jsx)(P.OrderSummaryDrawer,{chat:r,currency:R,priceMap:q,orderItems:U,orderSubtotal:z,flatAdditionalAmounts:V,onPriceChange:W,onBack:Z,onSubmit:K,onAddItem:X&&(0,o.orderDetailsFromCatalogEnabled)()?ee:te,onAdditionalCharges:re,onDeleteItem:le,onEditItem:te});case E.ADDITIONAL_CHARGES_FORM:return(0,k.jsx)(x.AdditionalChargesFormDrawer,{currency:R,additionalCharges:G,subtotal:z,onBack:J,onApply:e=>{Y((t=>(0,a.default)((0,a.default)({},t),e))),J()}})}}(g)})},ie)})};var a=n(r(81109)),l=r(41455),o=r(8139),u=r(14597),i=n(r(78931)),s=r(78820),c=n(r(40436)),d=r(67294),f=n(r(16031)),p=n(r(16223)),m=r(93581),h=r(94010),g=r(92059),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(39519)),b=n(r(48456)),x=r(8219),v=r(15607),_=r(84312),S=r(3445),C=r(73668),T=r(59789),M=r(34841),j=r(29886),O=n(r(52822)),P=r(52604),A=r(73150),I=r(18644),k=r(85893);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}const E=r(76672).Mirrored(["CATALOG_PRODUCTS_FORM","CUSTOM_ITEM_FORM","ORDER_SUMMARY","ADDITIONAL_CHARGES_FORM"]),D=Array.from(E.members()),R=y.currencyForCountryShortcode((0,g.getCountryShortcodeByPhone)((0,s.getMeUser)().user))}}]);
//# sourceMappingURL=https://web.whatsapp.com/3770.ad6433a0737f145a759b.js.map
