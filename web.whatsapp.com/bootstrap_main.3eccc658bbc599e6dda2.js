/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7964],{86240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"number":return`n:${e}`;case"string":return`s:${e}`;case"boolean":return`b:${e.toString()}`;case"object":var t=a.get(e);return null==t&&(t=r++,a.set(e,t)),`o:${t}`;default:throw new Error("Unsupported type")}};var a=new WeakMap,r=0},44178:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{id:t,name:a,imageHash:r,currency:d}=e,u=e.catalogWid.toString(),c=i.default.findCart(u),f=c.cartItemCollection.get(t),h=(null==f?void 0:f.quantity)||0,p=Math.min(h+1,s.MAX_QUANTITY),m={id:t,priceAmount1000:(0,l.getActivePrice)(e),currency:d,name:a,imageHash:r,quantity:p};c.cartItemCollection.add(m,{merge:!0}),c.trigger("change:cartItemCollection");var _=h+1>s.MAX_QUANTITY?o.QUANTITY_LIMIT_REACHED:o.SUCCESS;return(0,n.default)(c),{newCount:p,status:_}},t.AddToCartStatus=void 0;var i=r(a(10905)),s=a(25834),l=a(53696),n=r(a(86251)),o=a(54302).Mirrored(["SUCCESS","QUANTITY_LIMIT_REACHED"]);t.AddToCartStatus=o},13959:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=a(69206).default;if(t&&t.id.toString()===e)return i.default.createElement(o,{sellerJid:e,chat:t});s.default.openModal(i.default.createElement(l.default,{chatId:(0,n.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{s.default.openDrawerRight(i.default.createElement(o,{sellerJid:e,chat:t}),"slide-left",void 0,r||void 0)}),100)},msgText:null}),{transition:"modal-flow"})};var i=r(a(67294)),s=r(a(33766)),l=r(a(50698)),n=a(52152)},86251:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.updateCart)(e)};var r=a(73454)},18245:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDelete=function(e){return p((0,c.unproxy)(e))};var i=r(a(67294)),s=a(84481),l=a(97066),n=r(a(33766)),o=a(51206),d=r(a(77188)),u=r(a(80162)),c=a(6578),f=r(a(18627));function h(e){var t;switch(e){case l.KIND.GROUP:t=u.default.t(110);break;case l.KIND.BROADCAST:t=u.default.t(59);break;case l.KIND.CHAT:default:t=u.default.t(71)}return new s.ActionType(t)}function p(e){if(e.promises.sendDelete)return e.promises.sendDelete;var t=e.getLastMsgKeyForAction(),a=t?e.msgs.get(t):void 0,r=e.promises.sendDelete=(0,o.sendConversationDelete)(e.id,t,e.getLastMsgKeyForAction.bind(e)),c=e.kind,m=r.then((function(t){if(200===t.status)switch(f.default.removeAllLabelsMD(e),c){case l.KIND.GROUP:return d.default.supportsFeature(d.default.F.MD_BACKEND)?new s.ActionType(u.default.t(109)):new s.ActionType(u.default.t(108));case l.KIND.BROADCAST:return d.default.supportsFeature(d.default.F.MD_BACKEND)?new s.ActionType(u.default.t(58)):new s.ActionType(u.default.t(57));case l.KIND.CHAT:return d.default.supportsFeature(d.default.F.MD_BACKEND)?new s.ActionType(u.default.t(70)):new s.ActionType(u.default.t(69))}else if(t.status>=400)switch(c){case l.KIND.GROUP:return new s.ActionType(u.default.t(107));case l.KIND.BROADCAST:return new s.ActionType(u.default.t(56));case l.KIND.CHAT:return new s.ActionType(u.default.t(68))}})).catch((function(){var t;switch(__LOG__(3)`models:chat:sendDelete dropped`,c){case l.KIND.GROUP:t=u.default.t(107);break;case l.KIND.BROADCAST:t=u.default.t(56);break;case l.KIND.CHAT:default:t=u.default.t(68)}return new s.ActionType(t,{actionText:u.default.t(207),actionHandler:()=>p(e)})}));return n.default.openToast(i.default.createElement(s.ActionToast,{id:(0,s.genId)(),initialAction:h(c),pendingAction:m})),r.then((function(r){if(200===r.status&&!r._duplicate){var i=e.getLastMsgKeyForAction();t&&t.equals(i)||t===i?e.delete():e.deleteMsgsBeforeMsgInclusive(a)}})).finally((()=>{e.promises.sendDelete=null}))}},31817:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){if(!e.hasEstablishedE2EESession){var t,a,i,s;return e.isGroup&&(null!==(t=null===(a=e.groupMetadata)||void 0===a?void 0:a.participants)&&void 0!==t?t:[]).length>256?Promise.resolve():(e.hasEstablishedE2EESession=!0,(0,r.eagerlyEstablishE2EESession)(e.isGroup?(null!==(i=null===(s=e.groupMetadata)||void 0===s?void 0:s.participants)&&void 0!==i?i:[]).map((e=>e.id)):[e.id]))}return Promise.resolve()}((0,i.unproxy)(e))};var r=a(15673),i=a(6578)},76806:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.findChat)(e.sender).then((e=>(0,i.promiseProps)({ok:s.default.openChatBottom(e),chat:e}))).then((({ok:t,chat:a})=>{t&&(a.composeQuotedMsg=e,e.chat&&(a.composeQuotedMsgRemoteJid=e.chat.id))}))};var i=a(78595),s=r(a(33766)),l=a(77824)},22952:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,o.getMaybeMeUser)(),f=e.msgContextInfo(a.id),h=(0,i.default)((0,i.default)({type:"buttons_response",ack:l.default.ACK.CLOCK,from:r,id:new d.default({from:r,to:a.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:s.default.globalUnixTime(),to:a.id},f),{},{buttonsResponse:{selectedButtonId:t.id,selectedDisplayText:t.displayText,type:n.ButtonsResponseMessageType.DISPLAY_TEXT},body:t.displayText||""});return(0,c.addAndSendMsgToChat)(a,h)[1]};var i=r(a(81109)),s=r(a(44386)),l=r(a(75444)),n=a(91591),o=a(26226),d=r(a(47540)),u=r(a(68127)),c=a(93639);a(73525)},16647:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.chat,r=e.msgContextInfo(a.id),f=(0,o.getMaybeMeUser)(),h=(0,i.default)((0,i.default)({type:"list_response",ack:l.default.ACK.CLOCK,from:f,id:new d.default({from:f,to:a.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:s.default.globalUnixTime(),to:a.id},r),{},{listResponse:{listType:n.ListResponseMessageListType.SINGLE_SELECT,title:t.title,description:t.description,singleSelectReply:{selectedRowId:t.rowId}},body:(t.title||"")+(t.description?`\n${t.description}`:"")});return(0,c.addAndSendMsgToChat)(a,h)[1]};var i=r(a(81109)),s=r(a(44386)),l=r(a(75444)),n=a(91591),o=a(26226),d=r(a(47540)),u=r(a(68127)),c=a(93639);a(73525)},59094:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendTextMsgToChat=function(e,t,a={}){return function(e,t,a={}){var r=(t||"").trim(),{linkPreview:S,quotedMsg:y,mentionedJidList:b,quotedMsgAdminGroupJid:M,selectedId:T,selectedIndex:I,ctwaContext:P}=a;if(""===r)return Promise.resolve();(0,m.clearPresence)(e);var A=e.id,N=(0,o.getMaybeMeUser)(),O=void 0;u.default.supportsFeature(u.default.F.MD_BACKEND)?e.isGroup&&(O=(0,C.toUserWid)(N)):O=void 0;var D,w=new p.default({from:N,to:A,id:(0,v.default)(),participant:O,selfDir:"out"});y?D=y.msgContextInfo(e.id):M&&(D={quotedRemoteJid:M});var R=(0,s.default)({id:w,body:r,type:"chat",subtype:S&&!(0,i.default)(S)?"url":null,t:l.default.globalUnixTime(),from:N,to:A,self:"out",isNewMsg:!0,local:!0,ack:n.default.ACK.CLOCK,urlText:e.urlText,urlNumber:e.urlNumber},S||{},D||{},{mentionedJidList:b},{ctwaContext:P});e.urlText&&(e.urlText=void 0);e.urlNumber&&(e.urlNumber=void 0);null!=I&&(R.type="template_button_reply",R.selectedId=T,R.selectedIndex=I);if(R.type!==n.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(R.ephemeralDuration=e.getEphemeralSetting());var k=e.getEphemeralSettingTimestamp();null!=k&&(R.ephemeralSettingTimestamp=k)}if(E.default.bspSystemMessageEnabled){var L=(0,_.getContactPrivacyMode)(e.id);null!=L&&(R.privacyModeWhenSent=L)}var x=new h.default(R),F=(0,d.default)(x,e);F&&e.msgs.add(F);e.msgs.add(x);var B=F?[F,R]:[R];y&&y.type===n.default.MSG_TYPE.PRODUCT&&(0,c.logProductMessageBusinessSend)(y,y.sessionId);return(0,f.storeMessages)(B,e.id).then((()=>(0,g.sendMsgRecord)(x)))}((0,S.unproxy)(e),t,a)};var i=r(a(41609)),s=r(a(91747)),l=r(a(44386)),n=r(a(75444)),o=a(26226),d=r(a(87553)),u=r(a(77188)),c=a(4566),f=a(74462),h=r(a(46169)),p=r(a(47540)),m=a(44280),_=a(247),v=r(a(68127)),g=a(86524),E=(a(73525),r(a(43232))),S=a(6578),C=a(52152)},50117:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchive=function(e,t){return f((0,c.unproxy)(e),t)};var s=i(a(67294)),l=a(84481),n=a(6279),o=i(a(33766)),d=r(a(12536)),u=i(a(80162)),c=a(6578);function f(e,t,a=(0,l.genId)()){if(e.archive===t)return Promise.reject(new d.ActionError);var{promises:r}=e;if(r.setArchive)return r.setArchive;var i=e.getLastMsgKeyForAction(),c=(0,n.sendConversationArchive)(e.id,t,i).cancellable(),h=t?new l.ActionType(u.default.t(63)):new l.ActionType(u.default.t(90)),p=c.then((r=>{var i;return 200===r.status?(i=t?u.default.t(62):u.default.t(89),new l.ActionType(i,{actionText:u.default.t(211),actionHandler:()=>f(e,!t,a)})):r.status>=400?t?new l.ActionType(u.default.t(61)):new l.ActionType(u.default.t(88)):void 0})).catch((()=>{__LOG__(3)`models:chat:setArchive dropped`;var r=t?u.default.t(61):u.default.t(88);return new l.ActionType(r,{actionText:u.default.t(207),actionHandler:()=>f(e,t,a)})}));o.default.openToast(s.default.createElement(l.ActionToast,{id:a,initialAction:h,pendingAction:p}));var m=r.setArchive=c.then((a=>{200!==a.status||a._duplicate||(e.archive=t,t&&(e.pin=void 0))})).finally((()=>{r.setArchive=null}));return m.archive=t,m}},75104:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t){return u((0,d.unproxy)(e),t)};var i=r(a(67294)),s=a(84481),l=r(a(33766)),n=r(a(80162)),o=a(12853),d=a(6578);function u(e,t,a=(0,s.genId)()){var{promises:r}=e;r.setPin&&r.setPin.cancel();var d,c=0;t?c=Math.round(+new Date):d=e.pin;var f=(0,o.setPin)(e.id,c,d).cancellable(),h=t?new s.ActionType(n.default.t(87)):new s.ActionType(n.default.t(97)),p=f.then((()=>{var r=t?n.default.t(86):n.default.t(96);return new s.ActionType(r,{actionText:n.default.t(211),actionHandler:()=>u(e,!t,a)})})).catch((r=>{if(405===r.status)return new s.ActionType(n.default.t(85));if(r.status>=400)return t?new s.ActionType(n.default.t(84)):new s.ActionType(n.default.t(95));__LOG__(3)`models:chat:setPin dropped`;var i=t?n.default.t(84):n.default.t(95);return new s.ActionType(i,{actionText:n.default.t(207),actionHandler:()=>u(e,t,a)})}));return l.default.openToast(i.default.createElement(s.ActionToast,{id:a,initialAction:h,pendingAction:p})),r.setPin=f.then((t=>{t._duplicate||(e.pin=c)})).finally((()=>{r.setPin=null}))}},85946:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findCommonGroups=function(e){var t=(0,o.unproxy)(e),{commonGroups:r,id:d,promises:u}=t;if(u.findCommonGroups)return u.findCommonGroups;if(r&&!r.stale)return Promise.resolve();return u.findCommonGroups=(0,n.default)(d).then((e=>{var l=(0,i.default)(e.map((e=>a(74798).default.get(e))));return r?(r.set(l),r.stale=!1):t.commonGroups=new s.default(l,d),!0})).catchType(l.ServerStatusCodeError,(e=>(__LOG__(3)`models:Contact:findCommonGroups error: ${e.status}`,Promise.reject(new Error("models:Contact:findCommonGroups error: "+e.status))))).finally((()=>{u.findCommonGroups=null}))};var i=r(a(39693)),s=r(a(72763)),l=a(54438),n=r(a(97785)),o=a(6578)},89338:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return function(e){if(e.groupInviteCodePromise)return e.groupInviteCodePromise;return e.groupInviteCodePromise=(0,s.sendQueryGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).finally((()=>{e.groupInviteCodePromise=null}))}((0,l.unproxy)(e))},t.revokeGroupInvite=function(e){return function(e){if(e.revokeGroupInvitePromise)return e.revokeGroupInvitePromise;return e.revokeGroupInvitePromise=(0,s.sendRevokeGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).catchType(r.ServerStatusCodeError,(e=>{throw e})).catch((()=>{__LOG__(3)`models:groupMetadata:participantCollection:revokeGroupInvite dropped`})).finally((()=>{e.revokeGroupInvitePromise=null}))}((0,l.unproxy)(e))},t.joinGroupViaInvite=function(e){return(0,s.sendJoinGroupViaInvite)(e).then((e=>(0,i.findChat)(e)))};var r=a(54438),i=a(77824),s=a(38),l=a(6578)},32282:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupProperty=function(e,t,a){return p((0,h.unproxy)(e),t,a)};var s=i(a(67294)),l=a(84481),n=i(a(33766)),o=i(a(75444)),d=a(54438),u=r(a(12536)),c=i(a(80162)),f=a(8120),h=a(6578);function p(e,t,a,r=(0,l.genId)()){var i,h;if(!t)return Promise.reject(new u.ActionError);if(t===o.default.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(i=e.groupMetadata)||void 0===i?void 0:i.canSetEphemeralSetting()))return Promise.reject(new u.ActionError);if(t!==o.default.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(h=e.groupMetadata)||void 0===h?void 0:h.canSetGroupProperty()))return Promise.reject(new u.ActionError);var m=(0,f.sendSetGroupProperty)(e.id,t,a),_={[o.default.GROUP_SETTING_TYPE.ANNOUNCEMENT]:{on:[c.default.t(532),c.default.t(524)],off:[c.default.t(531),c.default.t(523)]},[o.default.GROUP_SETTING_TYPE.RESTRICT]:{on:[c.default.t(538),c.default.t(530)],off:[c.default.t(537),c.default.t(529)]},[o.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED]:{on:[c.default.t(536),c.default.t(528)],off:[c.default.t(535),c.default.t(527)]},[o.default.GROUP_SETTING_TYPE.EPHEMERAL]:{on:[c.default.t(534),c.default.t(526)],off:[c.default.t(533),c.default.t(525)]}},v=0===a?"off":"on",[g,E]=_[t][v],S=new l.ActionType(g),C=m.then((()=>new l.ActionType(E))).catchType(d.ServerStatusCodeError,(e=>{if(404===e.status)return new l.ActionType(c.default.t(60)+" "+c.default.t(118))})).catch((()=>(__LOG__(3)`Error while setting property`,new l.ActionType(c.default.t(60),{actionText:c.default.t(207),actionHandler:()=>p(e,t,a,r)}))));return n.default.openToast(s.default.createElement(l.ActionToast,{id:r,initialAction:S,pendingAction:C})),m.then((r=>{var i;r._duplicate||(null===(i=e.groupMetadata)||void 0===i||i.set(o.default.GROUP_SETTING_TO_METADATA[t],a))})).catchType(d.ServerStatusCodeError,(()=>{}))}},88770:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markPlayed=function(e){return function(e){d(e)?(0,l.default)(e).then((()=>{e.ack=i.default.ACK.PLAYED})).catchType(s.WebdDrop,(()=>{})):__LOG__(2)`Msg:msg should not call sendPlayed`}((0,o.unproxy)(e))},t.canMarkPlayed=function(e){return d((0,o.unproxy)(e))};var i=r(a(75444)),s=a(54438),l=r(a(85265)),n=r(a(43232)),o=a(6578);function d(e){return!e.isSentByMe&&(!(e.ack>=i.default.ACK.PLAYED)&&(e.type===i.default.MSG_TYPE.PTT||!!e.isViewOnce&&(n.default.viewOnceRead||n.default.viewOnceWrite)))}},97733:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,a,i){return(0,r.queryOrder)(e,t,a,i)},t.createOrder=function(e,t){return(0,r.createOrder)(e,t)};var r=a(15338)},49997:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.searchFirstPartyStickers=function(){return _.apply(this,arguments)};var s=i(a(81109)),l=i(a(48926)),n=a(19131),o=r(a(12536)),d=i(a(86324)),u=a(26226),c=i(a(72462)),f=i(a(89678)),h=i(a(97439)),p=i(a(25609)),m="https://static.whatsapp.net/sticker";function _(){return(_=(0,l.default)((function*(e,t){for(var a,r=(0,n.getCountryShortcodeByPhone)(null===(a=(0,u.getMaybeMeUser)())||void 0===a?void 0:a.user)||"default",i=0,l=0;i<=250;)i+=3+encodeURIComponent(e[l++]).length;var _=e.slice(0,l-1).join(","),v={country:r,ver:"2"},g=h.default.build(m,(0,s.default)((0,s.default)({},v),{},{search:_})),E=yield(0,d.default)(g,{signal:null==t?void 0:t.signal}),S=new c.default.StickerCommonQueryToStaticServer;if(S.set({httpResponseCode:E.status,params:new p.default(v).toString(),queryType:c.default.QUERY_TYPE.STICKER_SEARCH}),S.commit(),!E.ok)throw new o.InvalidServerResponseError(g,E.status.toString(),"Invalid response from WhatsApp stickers endpoint");var C=yield E.json();if(null==C)throw new o.InvalidServerResponseError(g,E.status.toString(),`Invalid response from WhatsApp stickers endpoint: ${JSON.stringify(C)}`);return C.map(((e,t)=>new f.default({mimetype:e.mimetype,width:e.width,height:e.height,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0,index:t})))}))).apply(this,arguments)}},99222:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){var n=t.map((e=>(0,i.wap)("product",null,(0,i.wap)("id",null,e))));n.push((0,i.wap)("image_dimensions",null,(0,i.wap)("width",null,a.toString()),(0,i.wap)("height",null,r.toString())));var u=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"11",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get"},(0,i.wap)("cart",{op:(0,i.CUSTOM_STRING)("refresh"),biz_jid:(0,o.USER_JID)(e)},n));return(0,s.sendIq)(u,d).then((e=>{if(e.success)return e.result;throw new l.ServerStatusCodeError(e.errorCode)}))},t.refreshCartResponse=void 0;var i=a(34176),s=a(60110),l=a(54438),n=r(a(90737)),o=a(31668),d=new n.default("refreshCartResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("cart"),a=t.maybeChild("price"),r={},i=null==a?void 0:a.maybeChild("subtotal");i&&(r.subtotal=i.contentString());var s=null==a?void 0:a.maybeChild("total");s&&(r.total=s.contentString());var l=null==a?void 0:a.maybeChild("currency");l&&(r.currency=l.contentString());var n=null==a?void 0:a.maybeChild("price_status");n&&(r.price_status=n.contentString());var o=[];return t.forEachChildWithTag("product",(e=>{var t,a=e.child("id").contentString(),r=e.maybeChild("name"),i=r?r.contentString():null,s=e.maybeChild("price"),l=s?s.contentString():null,n=e.maybeChild("currency"),d=n?n.contentString():null,u=e.maybeChild("media"),c=u?u.maybeChild("image"):null;if(null!=c){t={image:{}};var f=c.maybeChild("id");f&&f.hasContent()&&(t.image.id=f.contentString());var h=c.maybeChild("request_image_url");h&&h.hasContent()&&(t.image.request_image_url=h.contentString())}var p,m,_={id:a,name:i,price:l,currency:d,media:t},v=e.maybeChild("sale_price");v&&(_.sale_price={price:v.child("price").contentString(),start_date:null===(p=v.maybeChild("start_date"))||void 0===p?void 0:p.contentString(),end_date:null===(m=v.maybeChild("end_date"))||void 0===m?void 0:m.contentString()});var g=e.maybeChild("status");g&&(_.status=g.contentString()),o.push(_)})),{price:r,products:o}}));t.refreshCartResponse=d},99325:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return u((0,i.wap)("iq",{type:"get",xmlns:"w:g2",to:(0,o.GROUP_JID)(e),id:(0,i.generateId)()},(0,i.wap)("invite",null)))},t.revokeGroupInviteCode=function(e){return u((0,i.wap)("iq",{type:"set",xmlns:"w:g2",to:(0,o.GROUP_JID)(e),id:(0,i.generateId)()},(0,i.wap)("invite",null)))},t.joinGroupViaInvite=function(e){var t=(0,i.wap)("iq",{type:"set",xmlns:"w:g2",to:i.G_US,id:(0,i.generateId)()},(0,i.wap)("invite",{code:(0,i.CUSTOM_STRING)(e)}));return(0,s.sendIq)(t,c).then((e=>e.success?e.result:(__LOG__(2)`joinGroupInvite failed: ${e.errorCode}:${e.errorType}`,Promise.reject(new l.ServerStatusCodeError(e.errorCode,e.errorText)))))};var i=a(34176),s=a(60110),l=a(54438),n=r(a(90737)),o=a(31668),d=new n.default("queryGroupInviteCodeParser",(e=>({code:e.child("invite").attrString("code")})));function u(e){return(0,s.sendIq)(e,d).then((e=>e.success?e.result:(__LOG__(2)`sendGroupInviteIq failed: ${e.errorCode} : ${e.errorType}`,Promise.reject(new l.ServerStatusCodeError(e.errorCode,e.errorText)))))}var c=new n.default("joinGroupViaInviteParser",(e=>(e.assertTag("iq"),e.assertAttr("from","g.us"),e.assertAttr("type","result"),{gid:e.child("group").attrGroupWid("jid")})))},30773:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t){return c((0,i.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,i.generateId)()},(0,i.wap)("subject",null,t)))},t.setGroupDescription=function(e,t,a,r){var s=t?(0,i.wap)("description",{id:(0,i.CUSTOM_STRING)(a),prev:(0,i.MAYBE_CUSTOM_STRING)(r)},(0,i.wap)("body",null,t)):(0,i.wap)("description",{delete:"true",prev:(0,i.MAYBE_CUSTOM_STRING)(r)});return c((0,i.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,i.generateId)()},s))},t.setGroupProperty=function(e,t,a){var r;switch(t){case l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:r=1===a?(0,i.wap)("announcement",null):(0,i.wap)("not_announcement",null);break;case l.default.GROUP_SETTING_TYPE.RESTRICT:r=1===a?(0,i.wap)("locked",null):(0,i.wap)("unlocked",null);break;case l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:r=1===a?(0,i.wap)("no_frequently_forwarded",null):(0,i.wap)("frequently_forwarded_ok",null);break;case l.default.GROUP_SETTING_TYPE.EPHEMERAL:r=a>0?(0,i.wap)("ephemeral",{expiration:(0,i.INT)(a)}):(0,i.wap)("not_ephemeral",null);break;default:return Promise.reject(new Error(`invalid group property ${t}`))}return c((0,i.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,i.generateId)()},r))};var i=a(34176),s=a(60110),l=r(a(75444)),n=a(54438),o=r(a(90737)),d=a(31668),u=new o.default("setGroupInfoParser",(e=>{if(e.hasChild("error")){var t=e.child("error");return{errorCode:t.attrInt("code"),errorText:t.hasAttr("text")?t.attrString("text"):""}}return{success:!0}}));function c(e){return(0,s.sendIq)(e,u).then((e=>{if(!e.success)return Promise.reject(new n.ServerStatusCodeError(e.errorCode,e.errorText))}))}},48552:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cartItemToNode=u,t.default=function(e,t){var a=t.map((e=>u(e))),r=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"10",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"set"},(0,i.wap)("order",{op:(0,i.CUSTOM_STRING)("create"),biz_jid:(0,o.USER_JID)(e)},a));return(0,s.sendIq)(r,d).then((e=>{if(e.success)return e.result;throw new l.ServerStatusCodeError(e.errorCode)}))},t.createOrderResponse=void 0;var i=a(34176),s=a(60110),l=a(54438),n=r(a(90737)),o=a(31668),d=new n.default("createOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("order"),a=t.attrString("id"),r=t.attrString("token"),i=t.maybeChild("price"),s={},l=null==i?void 0:i.maybeChild("subtotal");l&&(s.subtotal=l.contentString());var n=null==i?void 0:i.maybeChild("total");n&&(s.total=n.contentString());var o=null==i?void 0:i.maybeChild("currency");o&&(s.currency=o.contentString());var d=null==i?void 0:i.maybeChild("price_status");return d&&(s.price_status=d.contentString()),{id:a,token:r,price:s}}));function u(e){var t=null!=e.priceAmount1000?(0,i.wap)("price",null,e.priceAmount1000.toString()):void 0,a=e.currency?(0,i.wap)("currency",null,e.currency):void 0;return(0,i.wap)("product",null,(0,i.wap)("id",null,e.id),(0,i.wap)("name",null,e.name),t,a,(0,i.wap)("quantity",null,e.quantity.toString()))}t.createOrderResponse=d},32695:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){var o=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"5",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get"},(0,i.wap)("order",{op:(0,i.CUSTOM_STRING)("get"),id:(0,i.CUSTOM_STRING)(e)},(0,i.wap)("image_dimensions",null,(0,i.wap)("width",null,t.toString()),(0,i.wap)("height",null,a.toString())),(0,i.wap)("token",null,r)));return(0,s.sendIq)(o,n).then((e=>{if(e.success)return e.result;throw new l.ServerStatusCodeError(e.errorCode)}))},t.queryOrderResponse=void 0;var i=a(34176),s=a(60110),l=a(54438),n=new(r(a(90737)).default)("queryOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("order"),a=t.hasAttr("creation_ts")?t.attrTime("creation_ts"):null,r=t.maybeChild("price"),i=null==r?void 0:r.maybeChild("subtotal"),s=i?parseInt(i.contentString(),10):null,l=null==r?void 0:r.maybeChild("currency"),n=l?l.contentString():null,o=null==r?void 0:r.maybeChild("tax"),d=o?parseInt(o.contentString(),10):null,u=null==r?void 0:r.maybeChild("total"),c=u?parseInt(u.contentString(),10):null,f=[];return t.forEachChildWithTag("product",(e=>{var t=e.child("id").contentString(),a=e.child("name").contentString(),r=e.maybeChild("price"),i=r?parseInt(r.contentString(),10):null,s=e.maybeChild("quantity"),l=s?parseInt(s.contentString(),10):null,n=e.maybeChild("currency"),o=n?n.contentString():null,d=null,u=null,c=e.maybeChild("image");if(null!=c){var h=c.maybeChild("url");u=h&&h.hasContent()?h.contentString():null;var p=c.maybeChild("id");d=p&&p.hasContent()?p.contentString():null}f.push({id:t,price:i,thumbnailId:d,thumbnailUrl:u,currency:o,name:a,quantity:l})})),{currency:n,createdAt:a,products:f,subtotal:s,total:c,tax:d}}));t.queryOrderResponse=n},1604:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,u.createWid)(e).toString({legacy:!0}),s=(0,i.wap)("iq",{xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get",to:i.S_WHATSAPP_NET,smax_id:"4"},(0,i.wap)("account_number",null,r),(0,i.wap)("code",null,t),(0,i.wap)("expected_source_url",null,a));return(0,l.sendIq)(s,c).then((e=>{if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))};var i=a(34176),s=a(45792),l=a(60110),n=a(91591),o=a(54438),d=r(a(90737)),u=a(52152);var c=new d.default("ctwaContext",(e=>{e.assertTag("iq"),e.assertFromServer();var t,a,r,i=e.child("context"),l={};return e.hasChild("error")?(t=e.child("error"),a=t&&t.maybeAttrString("code"),r=t&&t.maybeAttrString("text"),__LOG__(3)`getCtwaContext error: code ${a} text ${r}`,Promise.reject(new Error("invalid response"))):(l.sourceUrl=i.child("source").child("url").contentString(),l.sourceId=i.child("source").child("id").contentString(),l.sourceType=i.child("source").child("type").contentString(),i.hasChild("headline")&&(l.title=i.child("headline").contentString()),i.hasChild("body")&&(l.description=i.child("body").contentString()),i.hasChild("thumbnail")&&(i.child("thumbnail").hasChild("url")&&(l.thumbnailUrl=i.child("thumbnail").child("url").contentString()),i.child("thumbnail").hasChild("bytes")&&(l.thumbnail=(0,s.encodeB64)(i.child("thumbnail").child("bytes").contentBytes())),i.hasChild("video")?(l.mediaUrl=i.child("video").child("url").contentString(),l.mediaType=n.ExternalAdReplyInfoMediaType.VIDEO):l.mediaType=n.ExternalAdReplyInfoMediaType.IMAGE),l)}))},10751:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return m.apply(this,arguments)};var i=r(a(48926)),s=a(34176),l=a(2860),n=a(30522),o=a(60110),d=r(a(75444)),u=a(26226),c=a(20759),f=a(66887),h=a(31668);function p(e){var t;if(e.isGroup())return n.RECEIPT_TYPE.PLAYED;var a=(0,l.getABPropConfigValue)("played_self_enabled");return(null===(t=(0,u.getUserPrivacySettings)())||void 0===t?void 0:t.readReceipts)===f.ALL_NONE.none&&!0===a?n.RECEIPT_TYPE.PLAYED_SELF:n.RECEIPT_TYPE.PLAYED}function m(){return(m=(0,i.default)((function*(e,t){var a=e.broadcastId||t,r=e.id.id,i=a.isUser()?null:e.author,l=p(t),n=(0,s.wap)("receipt",{to:(0,h.CHAT_JID)(a),type:l,id:(0,s.CUSTOM_STRING)(r),t:(0,s.CUSTOM_STRING)(Date.now().toString()),participant:i?(0,h.DEVICE_JID)(i):s.DROP_ATTR});return yield(0,o.sendStanzaAndWaitForAck)(n,{id:r,class:"receipt",type:l,from:a,participant:i}),(0,c.getTable)().merge(e.id.toString(),{ack:d.default.ACK.PLAYED})}))).apply(this,arguments)}},37495:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(48926)),s=a(18770),l=a(12845),n=a(79642),o=r(a(74798)),d=a(52152),u=a(25966),c=r(a(96335)),f=a(19338),h=a(76644),p=a(28609),m=a(79820);class _ extends u.SyncActionBase{constructor(...e){super(...e),this.version=3}getChatJidAndMessageKey(e){var[,t]=e.index;return{chatJid:t,messageKey:null}}applyMutations(e){return Promise.all(e.map(function(){var e=(0,i.default)((function*(e){try{if("set"===e.operation){var t,{indexParts:a,value:r,timestamp:i}=e,[,l]=a;l||(0,m.throwInvalidActionIndex)();var u=null===(t=r.pinAction)||void 0===t?void 0:t.pinned;if(null==u)return __LOG__(3)`pin message sync: malformed mutation`,{actionState:s.SyncActionState.Malformed};var c=(0,d.createWid)(l).toString();if(!(yield(0,n.getChatTable)().get(c)))return{actionState:s.SyncActionState.Orphan,orphanModel:{modelType:s.SyncModelType.Chat,modelId:c}};var f=i,h=[];if(u){var p=(yield(0,n.getChatTable)().all()).filter((e=>e.pin));if(p.length>=3){var _=p.reduce(((e,t)=>null!=e.pin&&null!=t.pin&&e.pin<t.pin?e:t));null!=_.pin&&null!=f&&_.pin<=f&&(h.push({id:_.id.toString(),pin:0}),h.push({id:c,pin:f,archive:!1}))}else h.push({id:c,pin:f,archive:!1})}else h.push({id:c,pin:0});return yield(0,n.getChatTable)().bulkCreateOrMerge(h),h.forEach((e=>{var t=o.default.get(e.id);t?(t.pin=e.pin,u&&(t.archive=!1)):__LOG__(3)`pin_message_sync: chat with ${e.id} not found in collection`})),{actionState:s.SyncActionState.Success}}return __LOG__(3)`pin chat sync: operation not supported`,{actionState:s.SyncActionState.Unsupported}}catch(e){return{actionState:s.SyncActionState.Failed}}}));return function(){return e.apply(this,arguments)}}()))}getPinMutation(e,t,a,r){return{collection:s.CollectionName.RegularLow,index:JSON.stringify([s.Actions.Pin,a.toString({legacy:!0})]),binarySyncAction:(0,h.encodeProto)(p.SyncActionValueSpec,{timestamp:r,pinAction:{pinned:t}}).readBuffer(),version:this.version,operation:l.SyncdMutationSyncdOperation.SET,timestamp:e,action:s.Actions.Pin}}dropMutationDueToCrossIndexConflict(e,t){return(0,i.default)((function*(){var a,r,i,l=e=>(0,f.decodeProto)(p.SyncActionValueSpec,e);if(!(null===(a=l(e.binarySyncAction).pinAction)||void 0===a?void 0:a.pinned))return!1;var n=JSON.parse(e.index)[1],o=JSON.stringify([s.Actions.Archive,n]),d=yield c.default.getSyncAction(o);if(d&&(null===(r=l(d.binarySyncAction).archiveChatAction)||void 0===r?void 0:r.archived)&&d.timestamp>e.timestamp)return!0;var u=t.get(o);return!!(u&&(null===(i=l(u.binarySyncAction).archiveChatAction)||void 0===i?void 0:i.archived)&&u.timestamp>e.timestamp)}))()}}var v=new _;Object.freeze(v);var g=v;t.default=g},70559:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);t.Z=void 0;var s=i(a(81109)),l=i(a(91747)),n=i(a(35161)),o=i(a(82492)),d=i(a(66678)),u=a(93588),c=a(19338),f=a(76644),h=a(45792),p=i(a(63337)),m=i(a(30381)),_=i(a(58122)),v=i(a(75444)),g=a(91591),E=a(26226),S=a(15704),C=i(a(77188)),y=i(a(65579)),b=i(a(47540)),M=r(a(50776)),T=i(a(68127)),I=i(a(13345)),P=i(a(97439)),A=a(95457),N=i(a(8265)),O=a(78089),D=i(a(53680)),w=i(a(13353)),R=(0,s.default)((0,s.default)({version:"17",M:y.default,BinaryProtocol:null,N:null,addContact:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["contacts",{type:"add"},e]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,contact,add",metricName:"CONTACT",ackRequest:!0})}))},addParticipants:function(e,t){return this.setGroupParticipants("add",e,t)},changeSubject:function(e,t){return new Promise(((a,r)=>{var i=w.default.tag(),s=this.wrap(a);s.tag=i;var l=["group",{id:i,jid:e,type:"subject",author:(0,E.getMaybeMeUser)(),subject:t},void 0],n=this.actionNode("set",[l]);this.binSend("send",n,r,{clientCacheable:!0,onSend:s,onDrop:this.wrap(r)},{debugString:"action,group,subject",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},chatFindQuery:function(e,t){return new Promise(((a,r)=>{var i={type:"chat"};"boolean"==typeof e&&e?i.kind="retry":"string"==typeof e&&(i.jid=e);var s=this.queryNode(i,void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"chat"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var l=this.parseChat(r[i]);l&&t.push(l)}}a(t)})).catch(r)}),a),logOnSend:t,onDrop:this.wrap(r)},{debugString:["query","chat",e].join(),metricName:"QUERY_CHAT",ackRequest:!1})}))},contactFindQuery:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"contacts",kind:e?"retry":void 0},void 0);this.binSend("send",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"contacts"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var l=this.parseContact(r[i]);l&&t.push(l)}}a({checksum:this.N.attr("checksum",e),data:t})})).catch(r)}),a),logOnSend:t,onDrop:this.wrap(r)},{debugString:"query,contacts, "+String(e),metricName:"QUERY_CONTACTS",ackRequest:!1})}))},createGroup:function(e,t,a=!1){return new Promise(((a,r)=>{var i=w.default.tag(),s=this.wrap(a);s.tag=i;var l=t.map((e=>["participant",{jid:e},void 0]));__LOG__(2)`create group tag`;var n=["group",{id:i,type:"create",author:(0,E.getMaybeMeUser)(),subject:e},l],o=this.actionNode("set",[n]);this.binSend("send",o,r,{clientCacheable:!0,onSend:s,onDrop:this.wrap(r)},{debugString:"action,group,create",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},deletePicture:function(e){return new Promise(((t,a)=>{var r=w.default.tag(),i=this.wrap(t);i.tag=r;var s=["picture",{id:r,jid:e,type:"delete"},void 0],l=this.actionNode("set",[s]);this.binSend("send",l,a,{clientCacheable:!0,onSend:i,onDrop:this.wrap(a)},{debugString:"action,delete_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},groupMetadataFindFromPhone:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"group",jid:e},[]);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((r=>{this.BinaryProtocol.read(r).then((a=>{if("response"===this.N.tag(a)&&"group"===this.N.attr("type",a)){var r=this.N.children(a),i=r&&r[0];if(i)if("missing"!==this.N.attr("type")){var s,l=[],n=this.N.children(i),o=!1;Array.isArray(n)&&n.forEach((e=>{switch(this.N.tag(e)){case"participant":l.push({id:this.N.attr("jid",e),isAdmin:"admin"===this.N.attr("type",e)});break;case"description":s=this.N.dataStr(e);break;case"support":o=!0}})),t({status:"ok",data:{creation:parseInt(this.N.attr("create",i),10)||void 0,desc:s,id:e,owner:this.N.attr("creator",i),participants:l,support:o}})}else t({status:"missing"});else t({status:"error",info:"bad format: no group node"})}else t({status:"error",info:"bad format: response incorrect"})})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,group,"+e,metricName:"QUERY_GROUP",ackRequest:!1})}))},leaveGroup:function(e){return new Promise(((t,a)=>{var r=w.default.tag(),i=this.wrap(t);i.tag=r;var s=["group",{id:r,jid:e,type:"leave",author:(0,E.getMaybeMeUser)()},void 0],l=this.actionNode("set",[s]);this.binSend("send",l,a,{clientCacheable:!0,onSend:i,onDrop:this.wrap(a)},{debugString:"action,group,delete",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},parseBattery:function(e){if("battery"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: battery, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");var t=Math.min(parseInt(this.N.attr("value",e),10)||-1,100),a=this.N.attr("live",e),r={battery:t<0?void 0:t,plugged:a?"true"===a:void 0};return this.dropIfConditionMet([t<0&&!a],r)},parseBCUpdate:function(e){if("broadcast"!==this.N.tag(e)||"modify"!==this.N.attr("type",e))return __LOG__(4,void 0,new Error,!0)`expected tag: broadcast, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");var t=this.N.attr("jid",e),a=this.N.children(e),r=[];if(Array.isArray(a)){var i,s,l,n=a.length;for(i=0;i<n;i++)s=a[i],l=this.N.attr("jid",s),"recipient"===this.N.tag(s)&&l&&D.default.isUser(l)&&r.push({id:l})}var o=[!t,!D.default.isBroadcast(t),0===r.length];return this.dropIfConditionMet(o,{id:t,participants:r})},parseChat:function(e){if("chat"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: chat, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");var t=this.N.attr("kind",e),a=this.N.attr("type",e),r=this.N.attr("jid",e),i=parseInt(this.N.attr("t",e),10)||void 0,s=parseInt(this.N.attr("mute",e),10),l=parseInt(this.N.attr("before",e),10)||void 0,n="true"===this.N.attr("archive",e),o="true"===this.N.attr("read_only",e),d=parseInt(this.N.attr("modify_tag",e),10)||void 0,u=this.N.attr("name",e)||void 0,c=this.safeParseInt(e,"count"),f="true"===this.N.attr("message",e),h="true"===this.N.attr("star",e),p="false"===this.N.attr("spam",e),m=parseInt(this.N.attr("pin",e),10)||0,_=this.N.attr("old_jid",e),v=this.N.attr("new_jid",e),g=parseInt(this.N.attr("ephemeral",e),10)||0,E=parseInt(this.N.attr("eph_setting_ts",e),10)||0;switch(t){case"text":case"image":case"video":case"gif":case"audio":case"ptt":case"document":case"location":case"vcard":case"url":case"sticker":break;default:t=void 0}"ahead"===a&&(a="clear");var S,C,y=this.N.children(e);if(Array.isArray(y)){var b,M;S=[],C=[];var T=y.length;for(b=0;b<T;b++)if(M=y[b],"item"===this.N.tag(M)){var I=this.N.attr("index",M);I&&S.push([I,"true"===this.N.attr("owner",M),this.N.attr("participant",M)])}else if("label"===this.N.tag(M)){var P=this.N.attr("id",M);P&&C.push(P)}else{var A=this.parseMsgMessage(M,"response");A&&S.push(A)}}var N={id:r,t:i,type:a,kind:t,keys:S,before:l,archive:n,isReadOnly:o,unreadCount:c,muteExpiration:isNaN(s)?void 0:s,modifyTag:d,name:u,pendingMsgs:f,star:h,notSpam:p,pin:m,changeNumberOldJid:_,changeNumberNewJid:v,ephemeralDuration:D.default.isUser(r)?g:void 0,ephemeralSettingTimestamp:D.default.isUser(r)?E:void 0,labels:C};this.pruneUndefinedProps(N);var O=[a&&"delete"!==a&&"clear"!==a&&"ephemeral"!==a&&"archive"!==a&&"unarchive"!==a&&"mute"!==a&&"star"!==a&&"unstar"!==a&&"spam"!==a&&"modify_tag"!==a&&"pin"!==a&&"modify"!==a,!a&&!r,n&&a&&"clear"!==a,"clear"!==a&&l&&l>0,"clear"!==a&&"star"!==a&&"unstar"!==a&&S&&S.length>0];return this.dropIfConditionMet(O,N)},parseMsg:function(e,t){switch(this.N.tag(e)){case"message":return this.parseMsgMessage(e,t);default:return __LOG__(4,void 0,new Error,!0)`received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unknown-tag")}},parseIdentity:function(e){var t=this.N.child("raw",e),a=this.N.child("text",e);if(t&&a&&this.N.children(t)instanceof ArrayBuffer&&this.N.dataStr(a))return{jid:this.N.attr("jid",e),binary:this.N.children(t),string:this.N.dataStr(a)}},profilePicFindThumbFromPhone:function(e,t,a){return new Promise(((r,i)=>{var s={type:"preview",jid:e};t&&t.tag&&t.raw&&(s.id=t.tag),a&&(s.kind="status");var l=this.queryNode(s,[]);this.binSend("sendEphemeral",l,i,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{"response"===this.N.tag(a)&&"preview"===this.N.attr("type",a)||i("Not response or preview");var s=this.N.children(a),l=s&&s[0];if(l||i("Missing preview node"),"missing"===this.N.attr("type",l))r({id:e,tag:void 0,raw:void 0});else{var n,o=this.N.attr("id",l);if(t&&o===t.tag&&t.raw)n=t.raw;else{var d=this.N.children(l);n=d?(0,h.encodeB64)(d):void 0}r({id:e,tag:o,raw:n})}})).catch(i)}),r),onDrop:this.wrap(i)},{debugString:"query,thumb,"+e,metricName:"QUERY_PREVIEW",ackRequest:!1})}))},promoteParticipants:function(e,t){return this.setGroupParticipants("promote",e,t)},queryIdentity:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"identity",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=void 0;__LOG__(2)`bin-recv: response,identity`,"response"===this.N.tag(e)&&"identity"===this.N.attr("type",e)&&(a=this.parseIdentity(e)),t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,identity,${e}`,metricName:"QUERY_IDENTITY",ackRequest:!1})}))},queryLinkPreview:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"url",url:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=void 0;if(__LOG__(2)`bin-recv: response,url`,"response"===this.N.tag(e)&&"url"===this.N.attr("type",e)){var r=this.N.children(e);a={title:this.N.attr("title",e),description:this.N.attr("description",e),canonicalUrl:this.N.attr("canonical-url",e),matchedText:this.N.attr("matched-text",e),preview:this.N.attr("preview",e),thumbnail:r?(0,h.encodeB64)(r):void 0,doNotPlayInline:"true"===this.N.attr("do-not-play-inline",e)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,url",metricName:"QUERY_URL",ackRequest:!1})}))},queryMsgInfo:function(e){var t=e=>{var t,a,r=[];if(Array.isArray(e)){t=e.length;for(var i=0;i<t;i++)a=e[i],"item"===this.N.tag(a)&&this.N.attr("jid",a)&&this.N.attr("t",a)&&r.push({id:this.N.attr("jid",a),t:parseInt(this.N.attr("t",a),10)||0})}return r};return new Promise(((a,r)=>{var i=this.queryNode({type:"message_info",index:e.id,jid:e.remote},void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={played:[],playedRemaining:0,read:[],readRemaining:0,delivery:[],deliveryRemaining:0};if(__LOG__(2)`bin-recv: response,msg,info`,"response"===this.N.tag(e)&&"message_info"===this.N.attr("type",e)){var i=this.N.child("played",e),s=this.N.child("read",e),l=this.N.child("delivery",e),n=this.N.children(i),o=this.N.children(s),d=this.N.children(l),u=parseInt(this.N.attr("count",e),10)||0;r.played=t(n),r.read=t(o),r.delivery=t(d);var c=u-r.played.length,f=u-r.played.length-r.read.length,h=u-r.played.length-r.read.length-r.delivery.length;r.playedRemaining=c<0?0:c,r.readRemaining=f<0?0:f,r.deliveryRemaining=h<0?0:h}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:["query,msg,info",e.id,e.remote,e.fromMe].join(),metricName:"QUERY_MESSAGE_INFO",ackRequest:!1})}))},queryReceivedActions:function(e){return new Promise(((t,a)=>{var r=e.map((e=>["item",{id:e},void 0])),i=this.queryNode({type:"action"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)`bin-recv: response,actions`,"response"===this.N.tag(e)&&"action"===this.N.attr("type",e))if(Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var l=r[i],n=this.N.attr("id",l),o=parseInt(this.N.attr("code",l),10)||0;"item"===this.N.tag(l)&&n&&0!==o&&a.push({id:n,code:o})}}else"true"===this.N.attr("replaced",e)&&(a="replaced");t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,actions",metricName:"QUERY_ACTIONS",ackRequest:!1})}))},recentEmojiQuery:function(e){return new Promise(((t,a)=>{var r=Array.isArray(e)?e.map((e=>["item",{code:e.id,value:e.weight.toString()},void 0])):void 0,i=this.queryNode({type:"emoji"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)`bin-recv: response,emoji`,"response"===this.N.tag(e)&&"emoji"===this.N.attr("type",e)&&Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var l=r[i],n=this.N.attr("code",l),o=parseFloat(this.N.attr("value",l))||0;"item"===this.N.tag(l)&&n&&o&&!isNaN(o)&&a.push({id:n,weight:o})}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,emoji",metricName:"QUERY_EMOJI",ackRequest:!1})}))},removeParticipants:function(e,t){return this.setGroupParticipants("remove",e,t)},resyncMessages:function(e){return new I.default(((t,a)=>{var r=e.map((e=>{var t={jid:e.wid,index:e.id,owner:e.fromMe,participant:e.participant,archive:(!!e.archive).toString(),spam:(!e.notSpam).toString(),old_jid:e.changeNumberOldJid,new_jid:e.changeNumberNewJid};return e.mute&&(t.mute=e.mute.toString()),D.default.isUser(e.wid)&&e.ephemeralDuration&&(t.ephemeral=e.ephemeralDuration.toString()),D.default.isUser(e.wid)&&null!=e.ephemeralSettingTimestamp&&(t.eph_setting_ts=e.ephemeralSettingTimestamp.toString()),e.active&&(t.active="true"),D.default.isGroup(e.wid)&&(t.read_only=(!!e.isReadOnly).toString()),e.modifyTag&&(t.modify_tag=e.modifyTag.toString()),e.unreadCount&&(t.count=e.unreadCount.toString()),e.pin&&(t.pin=e.pin.toString()),["last",t,void 0]})),i=this.queryNode({type:"resume"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)`bin-recv: response,resume`,"response"===this.N.tag(e)&&"resume"===this.N.attr("type",e)&&Array.isArray(r)){var i,s=r.length;for(i=0;i<s;i++){var l=this.parseChat(r[i]);l&&a.push(l)}}t({checksum:this.N.attr("checksum",e),statusChecksum:this.N.attr("status",e),labelsChecksum:this.N.attr("label",e),quickRepliesChecksum:this.N.attr("quick_reply",e),stickerPackChecksum:this.N.attr("sticker_pack",e),recentStickersChecksum:this.N.attr("recent_stickers",e),starredStickersChecksum:this.N.attr("starred_stickers",e),data:a})})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,resume",metricName:"QUERY_RESUME",ackRequest:!1})}))},resyncReceipts:function(e){return new Promise(((t,a)=>{var r=e.map((e=>["last",{jid:e.remote,index:e.id,owner:e.fromMe.toString(),participant:e.participant,t:e.t.toString(),pay_t:e.payT&&e.payT.toString()},void 0])),i=this.queryNode({type:"receipt"},r);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)`bin-recv: response,receipt`,"response"===this.N.tag(e)&&"receipt"===this.N.attr("type",e)&&Array.isArray(r)){var i,s,l,n=r.length;for(i=0;i<n;i++){s=r[i],l=this.N.children(s);var o=this.N.attr("jid",s),d=this.N.attr("t",s),u=this.N.attr("pay_t",s);if("receipt"===this.N.tag(s)&&o&&(d||u)&&Array.isArray(l)){var c=void 0,f=[],h=[],p=l.length;for(c=0;c<p;c++){var m=l[c];if("item"===this.N.tag(m)){var _=this.N.attr("index",m),v="true"===this.N.attr("owner",m),g=parseInt(this.N.attr("status",m),10)||0,E=this.N.attr("participant",m),S=parseInt(this.N.attr("t",m),10)||void 0;_&&0!==g&&g<=4&&f.push({id:_,fromMe:v,participant:E,status:g,t:S})}else if("message"===this.N.tag(m)){var C=this.parseMsgMessage(m);C&&h.push(C)}}f.length>0&&a.push({id:o,t:d&&parseInt(d,10),payT:u&&parseInt(u,10),acks:f,msgs:h})}}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,receipt",metricName:"QUERY_RECEIPT",ackRequest:!1})}))},sendChatstateUpdate:function(e,t){if(["composing","paused","recording"].includes(e))return new Promise(((a,r)=>{var i=this.actionNode("set",[["presence",{type:e,to:t},void 0]],!0);this.binSend("sendEphemeralIgnore",i,r,{onSend:a,onDrop:r,epochIneligible:!0},{debugString:"action,chatstate,"+e,metricName:"PRESENCE",skipOffline:!0,ackRequest:!1})}))},sendConversationArchive:function(e,t,a){return this.sendConversationOpWithKey(t?"archive":"unarchive",e,a)},sendConversationClear:function(e,t,a){return this.sendConversationOpWithKey("clear",e,t,a)},sendConversationDelete:function(e,t){return this.sendConversationOpWithKey("delete",e,t)},sendConversationMute:function(e,t,a){return new Promise(((r,i)=>{var s=t?t.toString():void 0,l=a?a.toString():void 0,n=this.actionNode("set",[["chat",{type:"mute",mute:s,previous:l,jid:e},void 0]]);this.binSend("send",n,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:"action,chat,"+e+", "+(s?"mute,"+s:"unmute"),metricName:"CHAT",ackRequest:!0})}))},sendConversationNotSpam:function(e){return this.sendConversationOpWithKey("spam",e,void 0,!1)},sendConversationOpWithKey:function(e,t,a,r){return new Promise(((i,s)=>{var l,n;switch(e){case"clear":l=(!!r).toString();break;case"spam":n=(!!r).toString()}var o=this.actionNode("set",[["chat",{type:e,jid:t,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0,star:void 0!==l?l:void 0,spam:void 0!==n?n:void 0},void 0]]);this.binSend("send",o,s,{clientCacheable:!0,onSend:this.wrap(i),onDrop:this.wrap(s)},{debugString:"action,chat,"+[e,a,r].join(),metricName:"CHAT",ackRequest:!0})}))},sendConversationUnseen:function(e,t){return this.sendConversationSeen(e,t,-2)},sendMedia:function(e){return new Promise(((t,a)=>{var r=(0,d.default)(e);w.default.send({data:["query","sendMedia",r.url],onSend:this.wrap02((e=>{t((0,o.default)(r,e))})),onDrop:a})}))},sendMessageDelete:function(e,t,a){return new Promise(((r,i)=>{var s=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),l=this.actionNode("set",[["chat",{type:"clear",jid:e,media:a.toString()},s]]);this.binSend("send",l,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:"action,msgs,delete,"+[e,a,t.length].join(),metricName:"CHAT",ackRequest:!0})}))},sendMessagePlayed:function(e){return new Promise(((t,a)=>{var r=this.wrap(t),i=this.actionNode("set",[["received",{type:"played",index:e.id,from:e.remote,participant:e.participant},void 0]]);this.binSend("send",i,a,{onSend:r,onDrop:this.wrap(a)},{debugString:"action,played,"+e.toString(),metricName:"RECEIVED",ackRequest:!0})}))},sendMessageStarred:function(e,t,a){return new Promise(((r,i)=>{var s=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),l=this.actionNode("set",[["chat",{type:a?"star":"unstar",jid:e},s]]);this.binSend("send",l,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:"action,msgs,star,"+[e,a,t.length].join(),metrics:"CHAT",ackRequest:!0})}))},sendPresenceUpdate:function(e){if(["available","unavailable"].includes(e))return new Promise(((t,a)=>{var r="available"===e,i=this.actionNode("set",[["presence",{type:e},void 0]],!r),s=r?"sendEphemeral":"sendEphemeralIgnore";this.binSend(s,i,a,{onSend:r?this.wrap(t):t,onDrop:r?this.wrap(a):t,epochIneligible:!r},{debugString:"action,presence,"+e,metricName:"PRESENCE",available:"available"===e,ackRequest:r})}))},sendSetBlock:function(e,t){return new Promise(((a,r)=>{var i=t.map((e=>["user",{jid:e.jid},void 0])),s=["block",{type:e?"add":"remove"},i],l=this.actionNode("set",[s]);this.binSend("send",l,r,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(r)},{debugString:"action,block,"+e+","+(0,n.default)(t,"jid").join(","),metricName:"BLOCK",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetPicture:function(e,t,a){return new Promise(((r,i)=>{var s=P.default.parseDataURL(t).data,l=P.default.parseDataURL(a).data,n=(0,h.decodeB64)(s),o=(0,h.decodeB64)(l),d=w.default.tag(),u=this.wrap(r);u.tag=d;var c=["picture",{id:d,jid:e,type:"set"},[["image",void 0,o],["preview",void 0,n]]],f=this.actionNode("set",[c]);this.binSend("send",f,i,{clientCacheable:!0,onSend:u,onDrop:this.wrap(i)},{debugString:"action,set_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetStatus:function(e){return new Promise(((t,a)=>{var r=this.wrap(t),i=this.actionNode("set",[["status",void 0,e]]);this.binSend("send",i,a,{clientCacheable:!0,onSend:r,onDrop:this.wrap(a)},{debugString:"action,status,set",metricName:"STATUS",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSpamReport:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["spam",{jid:e},void 0]]);this.binSend("send",r,a,{onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,spam,"+e,metricName:"SPAM",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendUnstarAll:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["chat",{type:"unstar",jid:e||void 0},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,unstar,all,"+e,metrics:"CHAT",ackRequest:!0,expires:(0,m.default)().unix()})}))},setGroupParticipants:function(e,t,a){return new Promise(((r,i)=>{var s=w.default.tag(),l=this.wrap(r),n=a.map((e=>["participant",{jid:e},void 0])),o=["group",{id:s,jid:t,type:e,author:(0,E.getMaybeMeUser)()},n],d=this.actionNode("set",[o]);this.binSend("send",d,i,{tag:s,clientCacheable:!0,onSend:l,onDrop:this.wrap(i)},{debugString:["action,group,participant",e,t].concat(a).join(),metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},setPushname:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["profile",{name:e},void 0]]);this.binSend("send",r,a,{onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,pushname",metricName:"PROFILE",ackRequest:!1})}))}},M.default),{},{parseLiveLocationMessageProto:function(e,t,a){C.default.supportsFeature(C.default.F.MD_BACKEND)?M.default.parseLiveLocationMessageProto(e,t,a):(e.type="location",e.isLive=!0,e.lat=void 0!==t.degreesLatitude?t.degreesLatitude:void 0,e.lng=void 0!==t.degreesLongitude?t.degreesLongitude:void 0,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.accuracy=t.accuracyInMeters,e.speed=t.speedInMps,e.degrees=t.degreesClockwiseFromMagneticNorth,e.comment=(0,M.convertToTextWithoutSpecialEmojis)(t.caption),e.sequence=t.sequenceNumber,a&&(e.finalLat=void 0!==a.degreesLatitude?a.degreesLatitude:void 0,e.finalLng=void 0!==a.degreesLongitude?a.degreesLongitude:void 0,e.finalThumbnail=this.decodeBytes(a.jpegThumbnail)||"",e.finalAccuracy=a.accuracyInMeters,e.finalSpeed=a.speedInMps,e.finalDegrees=a.degreesClockwiseFromMagneticNorth,e.finalTimeOffset=a.timeOffset))},parseSendPaymentMessageProto:function(e,t,a){if(C.default.supportsFeature(C.default.F.MD_BACKEND))M.default.parseSendPaymentMessageProto(e,t,a);else{if((0,A.hasUnsupportedCurrency)(a))return e.subtype="phone_only_feature",void __LOG__(2)`[novi] parseSendPaymentMessageProto: does not support novi transactions`;if(e.type="payment",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",e,a),C.default.supportsFeature(C.default.F.PAYMENTS)){e.subtype="send";var r=t.requestMessageKey;e.paymentRequestMessageKey=t.requestMessageKey?new b.default({fromMe:r.fromMe,remote:this.decodeJid(r.remoteJid),id:r.id,participant:this.decodeJid(r.participant)}):void 0,t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg))}}},parseRequestPaymentMessageProto:function(e,t,a){if(C.default.supportsFeature(C.default.F.MD_BACKEND))M.default.parseRequestPaymentMessageProto(e,t,a);else{if((0,A.hasUnsupportedCurrency)(a))return e.subtype="phone_only_feature",void __LOG__(2)`[novi] parseRequestPaymentMessageProto: does not support novi transactions`;e.type="payment",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",e,a),C.default.supportsFeature(C.default.F.PAYMENTS)&&(e.subtype="request",t.currencyCodeIso4217&&!e.paymentCurrency&&(e.paymentCurrency=t.currencyCodeIso4217),t.amount1000&&!e.paymentAmount1000&&(e.paymentAmount1000=t.amount1000),t.requestFrom&&!e.paymentMessageReceiverJid&&(e.paymentMessageReceiverJid=this.decodeJid(t.requestFrom)),t.expiryTimestamp&&!e.paymentExpiryTimestamp&&(e.paymentExpiryTimestamp=t.expiryTimestamp),t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)))}},parseGroupInviteMessageProto:function(e,t){e.type="groups_v4_invite",C.default.supportsFeature(C.default.F.GROUPS_V_4_JOIN_PERMISSION)&&(e.inviteCode=t.inviteCode,e.inviteCodeExp=t.inviteExpiration,e.inviteGrp=t.groupJid,e.inviteGrpName=t.groupName,e.inviteGrpJpegThum=this.decodeBytes(t.jpegThumbnail),e.comment=(0,M.convertToTextWithoutSpecialEmojis)(t.caption))},parseContextInfoProto:function(e,t,a){var r=t.quotedMessage,i=t.mentionedJid;e.quotedMsg=r&&this.parseMsgProto(r,{type:"unknown"}),e.quotedMsg&&"payment"===e.quotedMsg.type&&a&&this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",e.quotedMsg,a),e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(i)?i.map(this.decodeJid):i,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret)},msgCreateRecord:function(e){return(0,u.promiseCallSync)((()=>{if(["ptt","audio","image","video","document","sticker","product"].includes(e.type)){var t,a="ptt"===e.type?"audio":e.type;return e.asMms&&(t=e.isUnsentPhoneMsg()?{type:e.type}:e.avParams()),e.local&&!e.mediaKey?this.sendMedia(t):(0,o.default)({status:200,type:a},t)}})).catch((e=>(__LOG__(3)`wap:msgCreateRecord mPromise error (${(0,f.encodeErrorInfo)()}): ${e.stack}`,Promise.reject("wap:msgCreateRecord mPromise error")))).then((t=>{if(t&&200!==t.status)return __LOG__(3)`wap:msgCreateRecord:sendMedia error ${t.status}`,Promise.reject(`wap:msgCreateRecord:sendMedia error ${t.status}`);var r=e.id.id,i=(0,S.createMessageKey)(e),s=(0,S.createMsgProtobuf)(e,t||{}),l=!!e.multicast||void 0,n=!!e.urlText||void 0,o=!!e.urlNumber||void 0,d=!!e.clearMedia||void 0,u=D.default.isUser(e.id.remote)||null==e.ephemeralDuration?void 0:e.ephemeralDuration,c={key:i,message:s,messageTimestamp:e.t,multicast:l,urlText:n,urlNumber:o,clearMedia:d,ephemeralDuration:u},h=this.actionNode("relay",[["message",void 0,(0,f.encodeProto)(O.WebMessageInfoSpec,c).readBuffer()]]);return new Promise(((t,i)=>{this.binSend("send",h,i,{tag:r,onSend:this.wrap(t),onDrop:this.wrap(i),retryOn5xx:!0,resendGuard:()=>{var t=a(33048).default.get(e.id);return"protocol"===e.type||t&&t.id.equals(e.id)}},{debugString:["action","message",e.type,e.subtype,r].join(),debugObj:{xml:h,pb:c},metricName:"MESSAGE",ackRequest:!1})}))}))},msgFindQuery:function(e,t,a,r){var i=e;return new Promise(((e,l)=>{var n,o="";switch(i){case"after":t.id||(i="before");case"before":n={type:"message",kind:i,jid:t.remote,count:t.count.toString(),index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},o=[t instanceof b.default?t.toString():t.remote,t.count].join();break;case"search":n={type:"search",search:t.searchTerm,page:t.page.toString(),count:t.count.toString(),jid:t.remote,canceled:t.tagToCancel},t.label?n=(0,s.default)((0,s.default)({},n),{},{label:t.label}):t.filter&&(n=(0,s.default)((0,s.default)({},n),{},{filter:t.filter})),o=["search",t.page,t.count,t.jid,t.label].join();break;case"star":n={type:"star",media:"gif"===t.media?t.media:void 0,chat:t.chat,count:t.count.toString(),jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},o="starred";break;case"media":n={type:"media_message",media:"document"===t.media||"url"===t.media?t.media:void 0,count:t.count.toString(),kind:t.direction,jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},o="media"}var d=this.queryNode(n,void 0);this.binSend("sendEphemeral",d,l,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{var r=[],s=this.N.children(a);if(__LOG__(2)`bin-recv: response,msg`,"response"===this.N.tag(a)&&("message"===this.N.attr("type",a)||"star"===this.N.attr("type",a)||"search"===this.N.attr("type",a)||"media_message"===this.N.attr("type",a)||"label"===this.N.attr("type",a))){if(Array.isArray(s)){var l,n=s.length;for(l=0;l<n;l++){var o=this.parseMsg(s[l],"response");if(o)switch(i){case"star":("gif"!==t.media||"video"===o.type&&o.isGif)&&r.push(o);break;case"media":"document"===t.media&&"document"===o.type||"url"===t.media&&"chat"===o.type?r.push(o):t.media||r.push(o);break;default:r.push(o)}}}"search"===this.N.attr("type",a)||"label"===this.N.attr("type",a)?r={eof:"true"===this.N.attr("last",a),messages:r}:"media"!==i||t.media||(r={docCount:parseInt(this.N.attr("document",a),10)||void 0,linkCount:parseInt(this.N.attr("url",a),10)||void 0,mediaCount:parseInt(this.N.attr("media",a),10)||void 0,messages:r})}e(r)})).catch(l)}),e),onDrop:this.wrap(l),logOnSend:a,onTag:r,tagToCancel:t.tagToCancel},{debugString:"query,message,"+o,metricName:"search"===i?"QUERY_SEARCH":"QUERY_MESSAGES",ackRequest:!1})}))},queryVcard:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"vcard",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"vcard"===this.N.attr("type",e)&&Array.isArray(r))for(var i=r.length,s=0;s<i;s++){var l=this.parseMsg(r[s],"response");!l||"vcard"!==l.type&&"multi_vcard"!==l.type||a.push(l)}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,vcard,${e}`,metricName:"QUERY_VCARD",ackRequest:!1})}))},parseContacts:function(e){if("contacts"===this.N.tag(e)){var t,a,r,i,s,l=this.N.attr("type",e),n=this.N.children(e);switch(l){case"frequent":if(Array.isArray(n)){a=n.length;for(var o=0;o<a;o++)switch(s=n[o],r=this.N.tag(s)){case"image":case"video":case"message":(i=this.N.attr("jid",s))&&(t||(t={type:"frequent"}),t[r]?t[r].push(i):t[r]=[i])}}}return t}},statusQuery:function(){switch(arguments.length){case 2:case 3:case 4:return this.statusQueryUpdate.apply(this,arguments);case 0:default:return this.statusQueryAll()}},statusQueryAll:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"status"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{var a={statuses:[]},r=this.N.children(t);if(__LOG__(2)`bin-recv: response,statusv3`,"response"===this.N.tag(t)&&"status"===this.N.attr("type",t)&&(a.checksum=this.N.attr("checksum",t),Array.isArray(r)))for(var i=r.length,s=0;s<i;s++){var l=r[s],n=this.N.attr("jid",l),o=this.N.attr("unread",l),d=this.N.attr("count",l),u=this.N.attr("t",l);if("status"===this.N.tag(l)&&n&&d&&u){var c={id:n,unreadCount:parseInt(o,10)||0,totalCount:parseInt(d,10)||0,t:parseInt(u,10)||0,_msgs:[]},f=this.N.children(l);if(Array.isArray(f))for(var h=f.length,p=0;p<h;p++)switch(this.N.tag(f[p])){default:case"message":var m=this.parseMsgMessage(f[p],"response");m&&c._msgs.push(m);break;case"picture":var _=this.N.children(f[p]);_ instanceof ArrayBuffer&&(c.pic=_)}a.statuses.push(c)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,statusv3",metricName:"QUERY_STATUS",ackRequest:!1})}))},statusQueryUpdate:function(e,t,a,r){return new Promise(((i,s)=>{var l="before"===r?"before":"after",n={type:"status",kind:l,chat:e,count:t.toString(),jid:a?a.remote:void 0,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0},o=this.queryNode(n,void 0);this.binSend("sendEphemeral",o,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],a=this.N.children(e);if(__LOG__(2)`bin-recv: response,statusv3`,"response"===this.N.tag(e)&&"status"===this.N.attr("type",e)&&Array.isArray(a))for(var r=a.length,s=0;s<r;s++){var l=this.parseMsg(a[s],"response");l&&t.push(l)}i(t)})).catch(s)}),i),onDrop:this.wrap(s)},{debugString:["query","statusv3",l,t,a instanceof b.default?a.toString():e].join(),metricName:"QUERY_STATUS_UPDATE",ackRequest:!1})}))},sendConversationSeen:function(e,t,a,r,i){return new Promise(((s,l)=>{var n=this.actionNode("set",[["read",{kind:r?"status":void 0,chat:r?i:void 0,jid:e,index:t?t.id:void 0,owner:t?t.fromMe.toString():void 0,participant:t?t.participant:void 0,count:a&&t?a.toString():void 0},void 0]]);this.binSend("send",n,l,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(l)},{debugString:"action,"+(r?"status":"chat")+",read,"+JSON.stringify(t)+","+a,metricName:"READ",ackRequest:!0})}))},sendStatusSeen:function(e,t){return this.sendConversationSeen(e.remote,e,void 0,!0,t)},requestMediaReupload:function(e,t){return new Promise(((a,r)=>{var i=e.id,s=Array.isArray(t)?t.map((e=>["user",{jid:e},void 0])):void 0,l=i,n=this.queryNode({type:"media",index:l.id,jid:l.remote,owner:l.fromMe.toString(),participant:l.participant},s);this.binSend("sendEphemeral",n,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t;if(__LOG__(2)`bin-recv: response,media`,"response"===this.N.tag(e)&&"media"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||400,i=this.N.attr("url",e);r>=500&&502!==r?(__LOG__(3)`wap:requestMediaReupload:error ${r}`,t={status:r}):200===r&&i?t={status:200,url:i,mediaKey:this.N.attr("media_key",e),mediaKeyTimestamp:this.N.attr("media_key_timestamp",e),encFilehash:this.N.attr("enc_filehash",e),directPath:this.N.attr("direct_path",e)}:200!==r||i?(__LOG__(3)`wap:requestMediaReupload:error ${r}`,t={status:r}):(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("wap:requestMediaReupload:emptyUrl"),t={status:400})}else __LOG__(3)`wap:requestMediaReupload:malformed`,t={status:400};a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))},parseCmd:function(e){switch(this.N.tag(e)){case"read":var t,a=this.N.attr("jid",e),r="false"===this.N.attr("type",e),i="status"===this.N.attr("kind",e),s=this.N.attr("checksum",e),l=this.N.attr("index",e),n="true"===this.N.attr("owner",e),o=this.N.attr("participant",e),d=this.N.attr("chat",e);try{t=new b.default({id:l,fromMe:n,remote:a,participant:o})}catch(e){}var u={type:r?"unread":"read",jid:a,isStatus:i,checksum:s,chat:this.decodeJid(d),key:t},c=[!a,i&&!t];return this.dropIfConditionMet(c,u);case"identity":var f=this.parseIdentity(e);return f?(f.type="identity",f):void 0;default:return}},parseContact:function(e,t){if("user"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: user, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");var a,r,i=this.N.attr("name",e),s="true"===this.N.attr("enterprise",e),l=this.N.attr("jid",e)||t,n=this.N.attr("short",e)||void 0,o=this.N.attr("type",e)||"in",d=this.N.attr("notify",e),u=this.N.attr("verify",e),c="true"===this.N.attr("status_mute",e),f=this.N.attr("index",e)||void 0,h=this.N.attr("vname",e),p=parseInt(this.N.attr("dm_duration",e),10)||void 0,m=parseInt(this.N.attr("dm_t",e),10)||void 0;switch(u){case"true":case"0":case"1":case"2":a=!0,r=parseInt(u,10)||0;break;default:a=!1,s=!1}i||r!==v.default.VERIFIED_LEVEL.HIGH||(i=h);var _=this.N.children(e),g=[];if(Array.isArray(_))for(var E=0;E<_.length;E++){var S=_[E];if("label"===this.N.tag(S)){var C=this.N.attr("id",S);C&&g.push(C)}}var y={id:l,name:i,type:o,shortName:n,pushname:d,isBusiness:a,verifiedLevel:r,statusMute:c,sectionHeader:f,verifiedName:h,labels:g,isEnterprise:s,disappearingModeDuration:p,disappearingModeSettingTimestamp:m};return this.dropIfConditionMet([!l,"in"!==o&&"out"!==o&&!!o],y)},parseAck:function(e){if("received"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: received, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");var t,a=this.N.attr("type",e),r=this.N.attr("index",e),i=this.N.attr("jid",e),s="true"===this.N.attr("owner",e),l=this.N.attr("participant",e);switch(a){case"message":t=v.default.ACK.RECEIVED;break;case"read":t=v.default.ACK.READ;break;case"played":t=v.default.ACK.PLAYED;break;case"error":t=v.default.ACK.FAILED;break;case"pending":default:t=v.default.ACK.CLOCK}var n=(0,E.getMaybeMeUser)(),o={cmd:"ack",id:r,ack:t,from:s?n:i,to:s?i:n,participant:l,self:s?"out":"in"},d=[!r,!i,D.default.isStatusV3(i),"message"!==a&&"read"!==a&&"played"!==a&&"error"!==a&&"pending"!==a];return this.dropIfConditionMet(d,o)},parseMsgMessage:function(e,t){if("message"===this.N.tag(e)){var a=this.N.children(e);if(a instanceof ArrayBuffer)try{var r=(0,c.decodeProto)(O.WebMessageInfoSpec,a);return this.parseWebMessageInfo(r,t)}catch(e){return __LOG__(2)`wmi error: ${String(e)}`,__LOG__(4,void 0,new Error,!0)`drop: failed parsing wmi`,void SEND_LOGS("parse-error")}else __LOG__(3)`drop: no bytes`}else __LOG__(3)`drop: not message`},parseWebMessageInfo:function(e,t){var a=e.key,r=this.decodeJid(a.remoteJid),i=(0,E.getMaybeMeUser)(),s=a.fromMe?r:i,l=a.fromMe?i:r,n=this.decodeJid(a.participant),o=this.decodeJid(e.participant);C.default.supportsFeature(C.default.F.MD_BACKEND)&&(D.default.isGroup(r)||D.default.isStatusV3(r))&&(null==n&&(null!=e.participant?n=this.decodeJid(e.participant):a.fromMe&&(n=i)),o=o||n);var d="in";if(i.equals(r)&&(d=a.fromMe?"out":"in"),"broadcast"!==s){var u;try{u=new b.default({fromMe:(0,p.default)(a.fromMe,"key.fromMe"),remote:r,id:(0,p.default)(a.id,"key.id"),participant:n})}catch(e){return void __LOG__(3)`drop: cannot create MsgKey: ${e.stack}`}var c={id:u,from:l,to:s,self:d,participant:n,type:"unknown",t:e.messageTimestamp||0,ack:"fresh"===t?v.default.ACK.SENT:e.status-1,author:o,invis:!!e.ignore,star:!!e.starred,broadcast:a.fromMe&&e.broadcast,notifyName:e.pushName||"",encFilehash:this.decodeBytes(e.mediaCiphertextSha256),shareDuration:e.duration,labels:e.labels,ephemeralStartTimestamp:e.ephemeralStartTimestamp,ephemeralOutOfSync:e.ephemeralOutOfSync,bizPrivacyStatus:e.bizPrivacyStatus,verifiedBizName:e.verifiedBizName};return e.message?this.parseMsgProto(e.message,c,t,e.paymentInfo,e.finalLiveLocation,e.quotedPaymentInfo):this.parseMsgStubProto(e,c)}__LOG__(3)`drop: broadcast`},parseProtocolMessageProto:function(e,t,a){if("relay"===a||t.type===g.ProtocolMessageType.EPHEMERAL_SETTING)switch(e.type="protocol",t.type){case g.ProtocolMessageType.REVOKE:var r=t.key,i=new b.default({fromMe:r.fromMe,remote:this.decodeJid(r.remoteJid),id:r.id,participant:this.decodeJid(r.participant)});e.subtype="revoke",e.protocolMessageKey=i;break;case g.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case g.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp;break;default:e.subtype="unknown"}},sendConversationPin:function(e,t,a){return new Promise(((r,i)=>{var s=this.actionNode("set",[["chat",{type:"pin",pin:t?t.toString():void 0,previous:a?a.toString():void 0,jid:e},void 0]]);this.binSend("send",s,i,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(i)},{debugString:["action","chat",e,t?"pin,"+t:"unpin,"+a].join(),metricName:"CHAT",ackRequest:!0})}))},subscribeLiveLocation:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"location",kind:"subscribe",jid:e,participant:t?"true":void 0},void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r=this.N.children(e),i={participants:[]};if(__LOG__(2)`bin-recv: response,location`,"response"===this.N.tag(e)&&"location"===this.N.attr("type",e)){var s=parseInt(this.N.attr("duration",e),10);if(i.duration=Number.isNaN(s)?void 0:s,!t||!Array.isArray(r))return t&&__LOG__(2)`LiveLocation:response with no participants`,void a(i);for(var l=r.length,n=0;n<l;n++){var o=r[n],d=this.N.attr("jid",o),u=parseInt(this.N.attr("expiration",o),10),f=parseInt(this.N.attr("elapsed",o),10)||0,h=this.N.children(o);if("participant"===this.N.tag(o)&&d){var p={id:d,expiration:Number.isNaN(u)?void 0:u,elapsed:f};if(h){var m=(0,c.decodeProto)(g.MessageSpec,h).liveLocationMessage;m&&this.parseLiveLocationMessageProto(p,m)}p.lat&&p.lng?__LOG__(2)`LiveLocation:response with lat/lng`:__LOG__(2)`LiveLocation:response without lat/lng`,i.participants.push(p)}}a(i)}else a(i)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:["query,location",e,t].join(),metricName:"QUERY_LIVE_LOCATIONS"})}))},unsubscribeLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["location",{type:"unsubscribe",jid:e},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,unsubscribe,"+e,metricName:"LIVE_LOCATION"})}))},queryActiveLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"location",kind:"participant",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=this.N.children(e),r={participants:[]};if(__LOG__(2)`bin-recv: response,location`,"response"===this.N.tag(e)&&"location"===this.N.attr("type",e))if(Array.isArray(a)){for(var i=a.length,s=0;s<i;s++){var l=a[s],n=this.N.attr("jid",l),o=parseInt(this.N.attr("expiration",l),10);if("participant"===this.N.tag(l)&&n){var d={id:n,expiration:Number.isNaN(o)?void 0:o};r.participants.push(d)}}t(r)}else t(r);else t(r)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,location,participant,"+e,metricName:"QUERY_LIVE_LOCATIONS"})}))},disableLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["location",{type:"disable",jid:e},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,disable,"+e,metricName:"LIVE_LOCATION"})}))},parseLocation:function(e){if("location"===this.N.tag(e)){var t=this.N.attr("type",e),a=this.N.attr("jid",e),r=this.N.attr("author",e),i=parseInt(this.N.attr("elapsed",e),10)||0,s=parseInt(this.N.attr("id",e),10)||0,l=this.N.children(e),n={type:t};switch(t){case"update":if(n.jid=a,n.elapsed=i,l){var o=(0,c.decodeProto)(g.MessageSpec,l).liveLocationMessage;o&&this.parseLiveLocationMessageProto(n,o)}n.type="update",n.lat&&n.lng?__LOG__(2)`LiveLocation:update with lat/lng`:__LOG__(2)`LiveLocation:update without lat/lng`;break;case"disable":n.jid=r||a,n.chat=a,n.seq=s}return this.pruneUndefinedProps(n),this.dropIfConditionMet(["update"!==t&&"disable"!==t,!("update"!==t||a&&l),"disable"===t&&!a],n)}},parseMsgStubProto:function(e,t){var a=O.WebMessageInfoStubType;switch(e.messageStubType){case a.REVOKE:return t.type="revoked",t;case a.CIPHERTEXT:return t.type="ciphertext",t;case a.OVERSIZED:return t.type="oversized",t;case a.FUTUREPROOF:return t.subtype="phone",t;default:return this.parseMsgStubTemplate(e,t)}},parseMsgStubTemplate:function(e,t){var a=O.WebMessageInfoStubType;switch(t.type="notification_template",t.templateParams=Array.isArray(e.messageStubParameters)?e.messageStubParameters.map((t=>e.messageStubType===a.GROUP_CREATE||e.messageStubType===a.GROUP_CHANGE_SUBJECT?t:this.decodeJid(t))):void 0,e.messageStubType){case a.NON_VERIFIED_TRANSITION:t.subtype="non_verified_transition";break;case a.UNVERIFIED_TRANSITION:t.subtype="unverified_transition";break;case a.VERIFIED_TRANSITION:t.subtype="verified_transition";break;case a.VERIFIED_LOW_UNKNOWN:t.subtype="verified_low_unknown";break;case a.VERIFIED_HIGH:t.subtype="verified_high";break;case a.VERIFIED_INITIAL_UNKNOWN:t.subtype="verified_initial_unknown";break;case a.VERIFIED_INITIAL_LOW:t.subtype="verified_initial_low";break;case a.VERIFIED_INITIAL_HIGH:t.subtype="verified_initial_high";break;case a.VERIFIED_TRANSITION_ANY_TO_NONE:t.subtype="verified_transition_any_to_none";break;case a.VERIFIED_TRANSITION_ANY_TO_HIGH:t.subtype="verified_transition_any_to_high";break;case a.VERIFIED_TRANSITION_HIGH_TO_LOW:t.subtype="verified_transition_high_to_low";break;case a.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:t.subtype="verified_transition_high_to_unknown";break;case a.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:t.subtype="verified_transition_unknown_to_low";break;case a.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:t.subtype="verified_transition_low_to_unknown";break;case a.VERIFIED_TRANSITION_NONE_TO_LOW:t.subtype="verified_transition_none_to_low";break;case a.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:t.subtype="verified_transition_none_to_unknown";break;case a.GROUP_CREATE:t.type="gp2",t.subtype="create",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_DELETE:t.type="gp2",t.subtype="delete",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_SUBJECT:t.type="gp2",t.subtype="subject",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_ICON:t.type="gp2",t.subtype="picture",t.recipients=[],t.body=t.templateParams[0],t.templateParams=void 0;break;case a.GROUP_CHANGE_INVITE_LINK:t.type="gp2",t.subtype="revoke_invite",t.recipients=[];break;case a.GROUP_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="description",t.recipients=[];break;case a.GROUP_CHANGE_RESTRICT:t.type="gp2",t.subtype="restrict",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_ANNOUNCE:t.type="gp2",t.subtype="announce",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:t.type="gp2",t.subtype="no_frequently_forwarded",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:t.type="gp2",t.subtype="announce_msg_bounce",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD:t.type="gp2",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_REMOVE:t.type="gp2",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_INVITE:t.type="gp2",t.subtype="invite",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_LEAVE:t.type="gp2",t.subtype="leave",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_CHANGE_NUMBER:t.type="gp2",t.subtype="modify",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_V4_ADD_INVITE_SENT:t.type="gp2",t.subtype="v4_add_invite_sent",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:t.type="gp2",t.subtype="v4_add_invite_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_CREATE:t.type="broadcast_notification",t.subtype="create",t.body=t.templateParams[0]||"0",t.templateParams=void 0;break;case a.BROADCAST_ADD:t.type="broadcast_notification",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_REMOVE:t.type="broadcast_notification",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GENERIC_NOTIFICATION:t.type="notification",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_CHANGED:t.type="e2e_notification",t.subtype="identity",t.body=t.templateParams[0]instanceof D.default?t.templateParams[0].toString():t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_UNAVAILABLE:t.type="e2e_notification",t.subtype="e2e_identity_unavailable";break;case a.E2E_DEVICE_CHANGED:t.type="e2e_notification",t.subtype="device",t.body=t.templateParams[0]instanceof D.default?t.templateParams[0].toString():t.templateParams[0],t.devicesAdded=parseInt(t.templateParams[1],10),t.devicesRemoved=parseInt(t.templateParams[2],10),t.templateParams=void 0;break;case a.E2E_ENCRYPTED:t.type="e2e_notification",t.subtype="encrypt";break;case a.E2E_ENCRYPTED_NOW:t.type="e2e_notification",t.subtype="encrypt_now";break;case a.CALL_MISSED_VOICE:t.type="call_log",t.subtype="miss";break;case a.CALL_MISSED_VIDEO:t.type="call_log",t.subtype="miss_video";break;case a.CALL_MISSED_GROUP_VOICE:t.type="call_log",t.subtype="miss_group";break;case a.CALL_MISSED_GROUP_VIDEO:t.type="call_log",t.subtype="miss_group_video";break;case a.INDIVIDUAL_CHANGE_NUMBER:t.subtype="change_number";break;case a.CHANGE_EPHEMERAL_SETTING:t.type="gp2",t.subtype="ephemeral",t.author=t.templateParams[1],t.recipients=[];break;case a.PAYMENT_CIPHERTEXT:t.type="payment",t.subtype="ciphertext",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_FUTUREPROOF:t.type="payment",t.subtype="futureproof",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_ACTION_REQUEST_CANCELLED:t.subtype="payment_transaction_request_cancelled";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:t.subtype="payment_transaction_status_update_failed";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:t.subtype="payment_transaction_status_update_refunded";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:t.subtype="payment_transaction_status_update_refund_failed";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:t.subtype="payment_transaction_status_receiver_pending_setup";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:t.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case a.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:t.subtype="payment_action_account_setup_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:t.subtype="payment_action_send_payment_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:t.subtype="payment_action_send_payment_invitation";break;case a.PAYMENT_ACTION_REQUEST_DECLINED:t.subtype="payment_action_request_declined";break;case a.PAYMENT_ACTION_REQUEST_EXPIRED:t.subtype="payment_action_request_expired";break;case a.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:t.subtype="biz_verified_transition_top_to_bottom";break;case a.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:t.subtype="biz_verified_transition_bottom_to_top";break;case a.BIZ_INTRO_TOP:t.subtype="biz_intro_top";break;case a.BIZ_INTRO_BOTTOM:t.subtype="biz_intro_bottom";break;case a.BIZ_NAME_CHANGE:t.subtype="biz_name_change";break;case a.BIZ_MOVE_TO_CONSUMER_APP:t.subtype="biz_move_to_consumer_app";break;case a.BIZ_TWO_TIER_MIGRATION_TOP:t.subtype="biz_two_tier_migration_top";break;case a.BIZ_TWO_TIER_MIGRATION_BOTTOM:t.subtype="biz_two_tier_migration_bottom";break;case a.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:t.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case a.BLUE_MSG_BSP_FB_TO_SELF_FB:t.subtype="blue_msg_bsp_fb_to_self_fb";break;case a.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_fb_to_self_premise";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_unverified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_premise_to_self_premise";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:t.subtype="blue_msg_self_fb_to_bsp_premise";break;case a.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:t.subtype="blue_msg_self_fb_to_self_premise";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED:t.subtype="blue_msg_self_fb_unverified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED:t.subtype="blue_msg_self_fb_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:t.subtype="blue_msg_self_premise_to_bsp_premise";break;case a.BLUE_MSG_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_premise_verified";break;case a.BLUE_MSG_TO_BSP_FB:t.subtype="blue_msg_to_bsp_fb";break;case a.BLUE_MSG_TO_CONSUMER:t.subtype="blue_msg_to_consumer";break;case a.BLUE_MSG_TO_SELF_FB:t.subtype="blue_msg_to_self_fb";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_unverified_to_self_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_VERIFIED:t.subtype="blue_msg_unverified_to_verified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_self_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_UNVERIFIED:t.subtype="blue_msg_verified_to_unverified";break;case a.BIZ_PRIVACY_MODE_INIT_FB:t.subtype="biz_privacy_mode_init_fb";break;case a.BIZ_PRIVACY_MODE_INIT_BSP:t.subtype="biz_privacy_mode_init_bsp";break;case a.BIZ_PRIVACY_MODE_TO_FB:t.subtype="biz_privacy_mode_to_fb";break;case a.BIZ_PRIVACY_MODE_TO_BSP:t.subtype="biz_privacy_mode_to_bsp";break;case a.DISAPPEARING_MODE:t.subtype="disappearing_mode";break;case a.BLOCK_CONTACT:t.subtype="block_contact";break;default:t.templateParams=void 0}return t},sendCallOffer:function(e){return new Promise(((t,a)=>{var r=(0,T.default)(),i=N.default.formatCallOffer(this,r,e);this.binSend("send",i,a,{tag:r,onSend:this.wrap((e=>{t(e)}),t),onDrop:this.wrap(a),retryOn5xx:!0,isCallOffer:!0},{debugString:["action","call","offer",e.common.peer_jid].join(),debugObj:{xml:i,struct:e},metricName:"CALL"})}))},supportsFeatureFlags:!0,implementedFeatures:{}}),k=(0,l.default)(R,_.default);t.Z=k},58122:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(41609)),l=i(a(52628)),n=a(45792),o=i(a(63337)),d=i(a(30226)),u=i(a(19942)),c=i(a(57055)),f=i(a(18868)),h=i(a(47633)),p=i(a(53964)),m=a(54438),_=r(a(12536)),v=a(26226),g=i(a(77188)),E=i(a(97372)),S=i(a(70372)),C=i(a(2724)),y=i(a(14837)),b=i(a(58674)),M=i(a(73975)),T=i(a(19826)),I=i(a(18768)),P=i(a(3264)),A=i(a(53680)),N=i(a(13353)),O={epochCount:0,epoch:0,epochSend:function(e){return 0===this.epochCount&&this.epoch++,e||this.epochCount++,__LOG__(2)`wap:epochCount: ${this.epochCount} epoch: ${this.epoch}`,this.epoch.toString()},epochRecv:function(){this.epochCount>0?this.epochCount--:__LOG__(3)`wap:epochRecv: NEGATIVE`,__LOG__(2)`wap:epochCount: ${this.epochCount} epoch: ${this.epoch}`},setSubProtocol:function(e){if(-1===e)this.BinaryProtocol=new u.default,this.N=this.BinaryProtocol.Node;else{if(null==e||0===e)throw __LOG__(3)`Wap:setSubProtocol unknown ${String(e)}`,new _.UpdateImmediately(`${this.version}_unknown_version`);this.BinaryProtocol=new d.default(e),this.N=this.BinaryProtocol.Node}},clearBPQueue:function(){return new Promise((e=>{this.BinaryProtocol.dropAllBecauseLogout(),e()}))},upgradeProtoVersion(e){if(e.BinaryProtocol instanceof u.default)for(var t=e.BinaryProtocol.getWriteQueue();t.length;){var{n:a,resolve:r,reject:i}=t.shift();this.BinaryProtocol.write(a).then(r).catch(i)}},delete:function(){this.epochCount=0,this.epoch=0},cannotReachPhone:function(){this.epochRecv()},dropIfConditionMet:function(e,t){return e.reduce((function(e,t){return e||t}),!1)?void 0:t},pruneUndefinedProps:function(e){for(var t in e){void 0===e[t]&&delete e[t]}},callFeatureFlagFun:function(e,t){if(g.default.supportsFeature(e)){for(var a=[],r=2;r<arguments.length;r++)a.push(arguments[r]);return this[t](...a)}},safeParseInt:function(e,t){var a=parseInt(this.N.attr(t,e),10);return Number.isNaN(a)?void 0:a},wrap:function(e){return t=>{if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;this.epochRecv(),e(t)}},wrap02:function(e){return function(t){if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;e(t)}},binWrap:function(e,t){return a=>{if(a&&"object"==typeof a&&"number"==typeof a.status){if(401===a.status)throw this.epochRecv(),new m.E401;if(a.status>=500)return a;this.epochRecv(),t(a)}else this.epochRecv(),e(a)}},binSend:function(e,t,a,r,i){var s=r.epochIneligible?a:e=>{this.epochRecv(),a(e)};return delete r.epochIneligible,this.BinaryProtocol.write(t).then((a=>{i.debugObj||(i.debugObj=t),i.metric=this.M[i.metricName],i.ackRequest=!1,r.data=a,r.binaryOpts=i,N.default[e](r)})).catch(s)},msgGetTarget:function(e){return A.default.equals(e.from,(0,v.getMaybeMeUser)())?e.to:e.from},thumbFromMediaXml:function(e){return"raw"===this.N.attr("encoding",e)?this.N.children(e)instanceof ArrayBuffer?(0,n.encodeB64)(this.N.children(e)):"":this.N.dataStr(e)},actionNode:function(e,t,a){return["action",{type:e,epoch:this.epochSend(a)},t]},queryNode:function(e,t){var a=e;return a||(a={}),a.epoch=this.epochSend(),["query",a,t]},responseNode:function(e,t){var a=e;return a||(a={}),a.epoch=this.epochSend(),["response",a,t]},errorNode:function(e){return["error",{code:e.toString(),epoch:this.epochSend()},void 0]},actionGetMeta:function(e){var t={};if("action"!==this.N.tag(e))return t;var a=this.N.attr("add",e),r=this.N.attr("missing",e),i=this.N.attr("checksum",e);switch(a){case"unread":t.unreadId=this.N.attr("index",e),t.unreadFromMe="true"===this.N.attr("owner",e),t.unreadParticipant=this.N.attr("participant",e);case"after":case"before":case"last":t.pendingMsgsDone="true"===this.N.attr("last",e),t.resume="true"===this.N.attr("resume",e);case"relay":case"update":t.add=a}switch(r){case"remove":t.missing=r}return i&&(t.checksum=i),t},groupActionsByType:function(e){var t,a,r={};if(!Array.isArray(e))return r;var i=e.length;for(a=0;a<i;a++)switch(t=e[a],this.N.tag(t)){case"broadcast":switch(this.N.attr("type",t)){case"create":case"add":case"remove":r.msg||(r.msg=[]),r.msg.push(t);break;case"modify":r.bcUpdate||(r.bcUpdate=[]),r.bcUpdate.push(t)}break;case"message":case"groups_v2":case"notification":case"call_log":case"security":r.msg||(r.msg=[]),r.msg.push(t);break;case"read":case"log":case"identity":r.cmd||(r.cmd=[]),r.cmd.push(t);break;case"received":r.ack||(r.ack=[]),r.ack.push(t);break;case"user":r.contact||(r.contact=[]),r.contact.push(t);break;case"contacts":r.contacts||(r.contacts=[]),r.contacts.push(t);break;case"chat":switch(this.N.attr("type",t)){case"mute":r.mute||(r.mute=[]),r.mute.push(t);break;default:r.chat||(r.chat=[]),r.chat.push(t)}break;case"battery":r.battery||(r.battery=[]),r.battery.push(t);break;case"location":r.location||(r.location=[]),r.location.push(t);break;case"label":r.label||(r.label=[]),r.label.push(t);break;case"group":r.group||(r.group=[]),r.group.push(t);break;case"quick_reply":r.quickReply||(r.quickReply=[]),r.quickReply.push(t);break;case"call":r.call||(r.call=[]),r.call.push(t);break;case"stickerPack":case"sticker_pack":r.stickerPack||(r.stickerPack=[]),r.stickerPack.push(t);break;case"recent_stickers":r.recentStickers||(r.recentStickers=[]),r.recentStickers.push(t);break;case"starred_stickers":r.starredStickers||(r.starredStickers=[]),r.starredStickers.push(t);break;case"notice":r.notice||(r.notice=[]),r.notice.push(t);break;case"archive_v2":r.archiveSetting||(r.archiveSetting=[]),r.archiveSetting.push(t);break;case"disappearing_mode":r.disappearingModeSetting||(r.disappearingModeSetting=[]),r.disappearingModeSetting.push(t);break;default:__LOG__(3,!0)`Wap:groupActionsByType unknown action: ${this.N.toString(t)}`}return r},handleResponse:function(e,t,a){if(0===e.indexOf("preempt"))switch(this.N.attr("type",t)){case"chat":__LOG__(2)`bin-recv: ${e},response,chat`;var r=this.N.children(t)||[];if(Array.isArray(r)){for(var i=r.length,s=[],l=0;l<i;l++){var n=this.parseChat(r[l]);n&&s.push(n)}(0,f.default)([{cmd:"preempt",response:s,binarySize:a}])}break;case"contacts":__LOG__(2)`bin-recv: ${e},response,contact`;var o=this.N.children(t);if(Array.isArray(o)){for(var d=o.length,u=[],c=0;c<d;c++){var h=this.parseContact(o[c]);h&&u.push(h)}(0,p.default)([{cmd:"preempt",checksum:this.N.attr("checksum",t),response:u,binarySize:a}])}break;default:__LOG__(3)`Wap:handle unknown response type: ${this.N.toString(t,!0)}`}else __LOG__(3)`Wap:handle non-preemptive response: ${this.N.toString(t,!0)}`},handleActionMsg:function(e,t,a,r){var i=r.length;switch(a.add){case"relay":case"update":var s=this.parseMsg(r[0],"relay");if(1!==i&&__LOG__(3)`Wap:handle action msg relay length not 1`,s){__LOG__(2)`bin-recv: ${[e,"action","msg",a.add,s.type,s.from,s.to,s.id,s.author].join(",")}`;var l=this.msgGetTarget(s);(0,E.default)([{meta:a,chat:l,msg:s}])}else __LOG__(3)`Wap:handle action msg relay dropped`;break;case"last":for(var n=[],o=0;o<i;o++){var d=this.parseMsg(r[o],"last");d?n.push(d):__LOG__(3)`Wap:handle action msg last dropped`}if(n.length>0){__LOG__(2)`bin-recv: ${[e,"action","msg","last",r.length].join(",")}`;for(var u={recent:!0,meta:a,binarySize:t},c=0;c<n.length;c++)u[this.msgGetTarget(n[c])]=n[c];(0,E.default)([u])}else __LOG__(3)`Wap:handle action msg last dropped to 0`;break;case"before":case"after":case"unread":if(i>0){for(var f=[],h=0;h<i;h++){var p=this.parseMsg(r[h],a.add);p?f.push(p):__LOG__(3)`Wap:handle action msg before/after dropped`}if(f.length>0){var m=this.msgGetTarget(f[0]);__LOG__(2)`bin-recv: ${[e,"action","msg",a.add,m,f.length].join(",")}`,(0,E.default)([{meta:a,chat:m,msgs:f,binarySize:t}])}else __LOG__(3)`Wap:handle action msg ${a.add} dropped to 0`}else __LOG__(3)`Wap:handle action msg before/after 0 msgs`;break;default:__LOG__(3)`Wap:handle action msg no meta.add`}},handleAction:function(e,t,r){var i=this.actionGetMeta(t),n=this.groupActionsByType(this.N.children(t)),d=Object.keys(n);if(Array.isArray(d)){var u=d.length;if(0!==u||"last"!==i.add)for(var m=0;m<u;m++){var _=d[m],v=n[_],A=v.length;switch(_){case"msg":this.handleActionMsg(e,r,i,v,t);break;case"cmd":for(var N=0;N<A;N++){var O=this.parseCmd(v[N]);if(O){var D=(0,l.default)(O).join(",");__LOG__(2)`bin-recv: ${[e,"action","cmd",D].join(",")}`,a(89399).handle([O])}else __LOG__(3)`Wap:handle action cmd invalid`}break;case"bcUpdate":for(var w=[],R=0;R<A;R++){var k=this.parseBCUpdate(v[R]);k?w.push(k):__LOG__(3)`Wap:handle action bc update invalid`}if(__LOG__(2)`bin-recv: ${[e,"action","bcUpdate",w.length].join(",")}`,w.length>0)a(8670).default.handle(w);break;case"ack":for(var L=0;L<A;L++){var x=this.parseAck(v[L]);x?(__LOG__(2)`bin-recv: ${[e,"action","ack",x.to,x.id,x.ack].join(",")}`,(0,E.default)([x])):__LOG__(3)`Wap:handle action ack invalid`}break;case"contact":for(var F=[],B=0;B<A;B++){var G=this.parseContact(v[B]);G?F.push(G):__LOG__(3)`Wap:handle action contact dropped`}if(__LOG__(2)`bin-recv: ${[e,"action","contact",F.length,i.missing].join(",")}`,F.length>0){var U=[F];(i.missing||i.checksum)&&U.push(i),(0,p.default)(U)}break;case"contacts":var j=this.parseContacts(v[0]);__LOG__(2)`bin-recv: ${[e,"action","contacts"].join(",")}`,j?(0,p.default)([j]):__LOG__(3)`Wap:handle:action:contacts dropped`;break;case"chat":for(var V=[],H=0;H<A;H++){var W=this.parseChat(v[H]);W?V.push(W):__LOG__(3)`Wap:handle action chat dropped`}__LOG__(2)`bin-recv: ${[e,"action","chat",V.length].join(",")}`,V.length>0&&(0,f.default)([V]);break;case"battery":var Y=this.parseBattery(v[0]);Y?(__LOG__(2)`bin-recv: ${[e,"action","battery",Y.battery,Y.plugged].join(",")}`,(0,h.default)([Y])):__LOG__(3)`Wap:handle action battery dropped`;break;case"mute":for(var K=[],q=0;q<A;q++){var z=this.parseChat(v[q]);z?K.push(z):__LOG__(3)`Wap:handle action mute dropped`}__LOG__(2)`bin-recv: ${[e,"action","mute",K.length].join(",")}`,K.length>0&&S.default.handle(K);break;case"location":for(var $=[],Q=0;Q<A;Q++){var X=this.parseLocation(v[Q]);X?$.push(X):__LOG__(3)`Wap:handle:location dropped`,__LOG__(2)`bin-recv:${[e,"action,location",$.length].join()}`,$.length>0&&a(95617).default.handle($)}break;case"label":for(var J=[],Z=0;Z<A;Z++){var ee=this.callFeatureFlagFun(g.default.F.LABELS_DISPLAY,"parseLabel",v[Z]);ee?J.push(ee):__LOG__(3)`Wap:handle:label dropped`,__LOG__(2)`bin-recv:${[e,"action,label",J.length].join()}`,J.length>0&&a(18627).default.handle({checksum:i.checksum,labels:J})}break;case"group":for(var te=0;te<A;te++){var ae=this.callFeatureFlagFun(g.default.F.GROUPS_V_4_JOIN_PERMISSION,"parseInviteUpdate",v[te]);if(__LOG__(2)`bin-recv:${[e,"action,group_v4_pending_invites",ae&&ae.length].join()}`,void 0!==ae)a(8670).default.handlePendingInvite({gid:ae.gid,participants:ae.participants})}break;case"quickReply":for(var re=[],ie=0;ie<A;ie++){var se=this.callFeatureFlagFun(g.default.F.QUICK_REPLIES_QUERY,"parseQuickReply",v[ie]);se?re.push(se):__LOG__(3)`Wap:handle:quickReply dropped`,__LOG__(2)`bin-recv:${[e,"action,quickReply",re.length].join()}`,re.length>0&&y.default.handle({checksum:i.checksum,quickReplies:re})}break;case"call":var le=this.callFeatureFlagFun(g.default.F.VOIP_INDIVIDUAL_INCOMING,"parseCall",v[0]);__LOG__(2)`bin-recv:${[e,"action","call"].join()}`,le?c.default.handle([le]):__LOG__(3)`Wap:handle:action:call dropped`;break;case"stickerPack":case"sticker_pack":for(var ne=[],oe=0;oe<A;oe++){var de=this.callFeatureFlagFun(g.default.F.STICKER_PACK_QUERY,"parseStickerPackUpdate",v[oe]);de?(ne.push(de),P.default.sync(i.checksum)):__LOG__(3)`Wap:handle:stickerPack dropped`,__LOG__(2)`bin-recv:${[e,"action,stickerPack",ne.length].join()}`}break;case"recentStickers":if(g.default.isRecentStickersEnabled())for(var ue=0;ue<A;ue++){var ce=(0,M.default)(v[ue],this.N);ce?(b.default.setChecksum(i.checksum),b.default.remove(ce),__LOG__(2)`bin-recv:${[e,"action,recentStickers",ce].join()}`):__LOG__(3)`Wap:handle:recentStickers dropped`}break;case"starredStickers":if(g.default.isStarredStickersEnabled())for(var fe=0;fe<A;fe++){var he=(0,I.default)(v[fe],this.N);if(he){var{type:pe,filehash:me,sticker:_e}=he,ve=a(60954).default;switch(pe){case"add":ve.add((0,o.default)(_e,"sticker"),{at:0,sort:!1},!0);break;case"delete":ve.remove(me)}__LOG__(2)`bin-recv:${[e,"action,starredStickers",pe,me].join()}`}else __LOG__(3)`Wap:handle:starredStickers dropped`}break;case"notice":for(var ge=[],Ee=0;Ee<A;Ee++){var Se=this.callFeatureFlagFun(g.default.F.USER_NOTICE,"parseNotice",v[Ee]);Se?!(0,s.default)(Se)&&ge.push(Se):__LOG__(3)`Wap:handle:notice dropped`,__LOG__(2)`bin-recv:${[e,"action,notice",ge.length].join()}`,C.default.handleResponse(ge)}break;case"archiveSetting":for(var Ce=0;Ce<A;Ce++){var ye=this.callFeatureFlagFun(g.default.F.SETTINGS_SYNC,"parseSetting",v[Ce]);ye||__LOG__(3)`Wap:handle:setting dropped`,__LOG__(2)`bin-recv:${[e,"action,setting,archive"].join()}`,T.default.handleResponse([ye])}break;case"disappearingModeSetting":for(var be=0;be<A;be++){var Me=this.callFeatureFlagFun(g.default.F.SETTINGS_SYNC,"parseSetting",v[be]);Me||__LOG__(3)`Wap:handle:setting dropped`,__LOG__(2)`bin-recv:${[e,"action,setting,disappearing_mode"].join()}`,T.default.handleResponse([Me])}break;default:__LOG__(3)`Wap:handle action unknown ${_}`}}else(0,E.default)([{recent:!0,meta:i,binarySize:r}])}else __LOG__(3)`Wap:handle:action keys not array: ${typeof d}`},handleQuery:function(e,t){var a=this,r=this.N.children(t);if(Array.isArray(r))for(var i=function(t){var i=r[t],s=a.N.tag(i);__LOG__(2)`bin-recv:${[e,"query",s].join()}`;var l=void 0;switch(s){case"call":l=a.callFeatureFlagFun(g.default.F.VOIP_INDIVIDUAL_INCOMING,"handleCallQuery",i);break;default:__LOG__(3)`wap:handle:query unknown ${s}`}l||(l=Promise.resolve(a.errorNode(501))),l.then((t=>{a.BinaryProtocol.write(t).then((r=>{N.default.send({tag:e,data:r,onSend:a.wrap((()=>{})),onDrop:a.wrap((()=>{})),retryOn5xx:!0,binaryOpts:{debugString:["response",s].join(),debugObj:t,metricName:"QUERY_RESPONSE",ackRequest:!0}})})).catch((()=>{a.epochRecv()}))}))},s=0;s<r.length;s++)i(s)},handle:function(e,t,r,i){return this.BinaryProtocol.read(e).then((e=>{switch(this.N.tag(e)){case"response":this.handleResponse(r,e,i,t);break;case"action":this.handleAction(r,e,i,t);break;case"query":this.handleQuery(r,e,i);break;case"read":var s=this.parseCmd(e);if(s){var n=(0,l.default)(s).join();__LOG__(2)`bin-recv:${[r,"action",n].join()}`,a(89399).handle([s])}else __LOG__(3)`Wap:handle read invalid`;break;default:__LOG__(3,!0)`TODO ${this.N.toString(e,!0)}`}return!0})).catchType(m.LogoutDrop,(e=>{__LOG__(3)`LogoutDrop error: ${e.toString()}`})).catch((e=>{throw __LOG__(2)`BinaryProtocol read error with tag ${r}, size: ${i}`,__LOG__(2)`BinaryProtocol read error stack: ${e.stack||""}`,new Error(`BinaryProtocol read error: ${e}`)}))}};t.default=O},19942:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(54438),l=i(a(12536)),n=r(a(17641));var o=class{constructor(){this._writeQueue=[],this.Node=n.default}read(){return __LOG__(3)`Attempted to call \`read\` on BinaryProtocolQueue`,Promise.reject(new l.Disconnected)}write(e){return new Promise(((t,a)=>{this._writeQueue.push({resolve:t,reject:a,n:e})}))}dropAllBecauseLogout(){for(var e=new s.LogoutDrop("cancelled binary protocol call");this._writeQueue.length;){this._writeQueue.shift().reject(e)}}getWriteQueue(){return this._writeQueue}};t.default=o},30226:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(91747)),l=i(a(30236)),n=a(57107),o=i(a(91782)),d=i(a(91082)),u=i(a(78947)),c=i(a(1448)),f=i(a(94235)),h=i(a(13149)),p=i(a(63247)),m=i(a(53918)),_=r(a(12536)),v=i(a(77188)),g=i(a(97280)),E=i(a(56155)),S=i(a(89993)),C=i(a(25598)),y=i(a(50467)),b=i(a(21036)),M=(e,t)=>{if(Array.isArray(e)&&t)return e.concat(t)},T=(e,t)=>{if(e.Dictionary){var a={};(0,l.default)(a,t.Dictionary,e.Dictionary,M),e.Dictionary=a}return(0,s.default)(e,t)},I={OutputStream:E.default,Writer:y.default,InputStream:g.default,Reader:S.default,Dictionary:d.default,Crypto:o.default},P=T({Dictionary:u.default},I),A=T({Dictionary:c.default},P),N=T({Dictionary:f.default},A),O=T({Dictionary:h.default},N),D=T({Dictionary:p.default},O),w=T({Writer:b.default,Reader:C.default,Dictionary:m.default},D),R={"01":!0,"03":!0,"04":!0,"05":!0,"06":!0,v1:!0,v2:!0,v3:!0,v4:!0},k={v5:I,v6:P,v7:A,v8:N,v9:O,v10:D,v11:w};t.default=class{constructor(e){var t="number"==typeof e?`v${e}`:e;if(R[t])throw __LOG__(3)`binaryProtocol deprecated version: ${t}`,new _.DeprecatedProtocolVersion("bp_deprecated_version");var r=k[t];if(!r)throw __LOG__(3)`binaryProtocol unknown version: ${t}`,new _.UpdateImmediately("bp_unknown_version");var i=r.OutputStream,s=new r.Writer(r.Dictionary),l=r.InputStream,o=new r.Reader(r.Dictionary),d=r.Crypto;this.Node=a(17641).default,v.default.supportsFeature(v.default.F.MD_BACKEND)?this.read=e=>Promise.resolve(o.readNode(new l(e))):this.read=e=>d.decrypt(e).then((e=>o.readNode(new l(e)))),this.write=(0,n.promiseWrapSync)((e=>{var t=new i;return s.writeNode(t,e),d.encrypt(t.toBuffer())})),this.dropAllBecauseLogout=()=>d.dropAllBecauseLogout()}}},63247:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["vname","old_jid","new_jid","announcement","locked","prop","label","color","call","offer","call-id"]}},77588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,JID_AD:247,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},53918:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["quick_reply","sticker","pay_t","accept","reject","sticker_pack","invalid","canceled","missed","connected","result","audio","video","recent"]}},25598:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="",a="",r=e.singleByte,l=e.doubleByte,o=e.nibbleDecode;this.readNode=function(e){var a=e.readByte(),r=this.readListSize(e,a);if((a=e.readByte())===i.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());var s=this.readString(e,a);if(t=s,0===r||!s)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());var l,n=this.readAttributes(e,r-2+r%2>>1);if(r%2==1)return[s,n,void 0];if(a=e.readByte(),this.isListTag(a))l=this.readList(e,a);else if(a===i.default.BINARY_8){var o=e.readByte();l=e.readBytes(o)}else if(a===i.default.BINARY_20){var d=e.readInt20();l=e.readBytes(d)}else if(a===i.default.BINARY_32){var u=e.readInt32();l=e.readBytes(u)}else l=this.readString(e,a);return[s,n,l]},this.isListTag=function(e){return e===i.default.LIST_EMPTY||e===i.default.LIST_8||e===i.default.LIST_16},this.readListSize=function(e,t){if(t===i.default.LIST_EMPTY)return 0;if(t===i.default.LIST_8)return e.readByte();if(t===i.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,r,l=!0){var o;if(-1===r)throw new Error("invalid start token readString"+e.debugInfo());if(r>2&&r<236){var d=this.getToken(r);return"s.whatsapp.net"===d&&(d="c.us"),d}switch(r){case i.default.DICTIONARY_0:case i.default.DICTIONARY_1:case i.default.DICTIONARY_2:case i.default.DICTIONARY_3:var u=e.readByte();return this.getTokenDouble(r-i.default.DICTIONARY_0,u);case i.default.LIST_EMPTY:return;case i.default.BINARY_8:return o=e.readString(e.readByte()),this.isAttr&&l&&s.default.isWid(o)?n(o):o;case i.default.BINARY_20:return o=e.readString(e.readInt20()),this.isAttr&&l&&s.default.isWid(o)?n(o):o;case i.default.BINARY_32:return o=e.readString(e.readInt32()),this.isAttr&&l&&s.default.isWid(o)?n(o):o;case i.default.JID_PAIR:var c=this.readString(e,e.readByte()),f=this.readString(e,e.readByte());if(void 0!==c&&void 0!==f){var h=c+"@"+f;return l&&s.default.isWid(h)?n(h):h}if(void 0!==f)return f;throw new Error("invalid jid "+c+","+f+" "+e.debugInfo());case i.default.JID_AD:var p=e.readByte(),m=e.readByte(),_=this.readString(e,e.readByte());if(void 0!==_)return n(p&&m?_+"."+p+":"+m+"@c.us":p?_+"."+p+"@c.us":m?_+":"+m+"@c.us":_+"@c.us");throw new Error(`invalid JID_AD agent:${p} device:${m} user:${_}`);case i.default.NIBBLE_8:case i.default.HEX_8:return this.readPacked8(r,e);default:throw __LOG__(2,!0)`Unexpected token in binary protocol read. Token : ${r}
lastTag: ${t}
lastAttributeKey: ${a}
${e.debugInfoWithPadding()}`,new Error("invalid string "+r)}},this.getToken=function(e){var t;if(e>=0&&e<r.length&&(t=r[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){var a,r=256*e+t;if(r>=0&&r<l.length&&(a=l[r]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){var r,i;this.isAttr=!0;for(var l=t?{}:void 0,n=0;n<t;n++)r=this.readString(e,e.readByte()),a=r,i=this.readString(e,e.readByte(),s.default.canBeWid(r)),l[r]=i;return this.isAttr=!1,l},this.readList=function(e,t){for(var a=[],r=this.readListSize(e,t),i=0;i<r;i++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){for(var a=t.readByte(),r="",i=0;i<(127&a);i++){var s=t.readByte();r+=this.unpackByte(e,(240&s)>>4),r+=this.unpackByte(e,15&s)}return a>>7&&(r=r.substring(0,r.length-1)),r},this.unpackByte=function(e,t){switch(e){case i.default.NIBBLE_8:return this.unpackNibble(t);case i.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!o.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return o[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var i=r(a(77588)),s=r(a(53680)),l=a(52152);function n(e){try{return(0,l.createWid)(e)}catch(t){return e}}},21036:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a={},r=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+s.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(t){if(3!==t.length)throw new Error("invalid node");var a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])}},this.writeString=function(e,t,r){if("string"!=typeof t&&!(t instanceof l.default))throw __LOG__(3)`writer:writeString passed non-string/wid type: ${typeof t}`,new Error("invalid string");if(t instanceof l.default)this.writeJid(e,t);else{var i,o,d=a.hasOwnProperty(t)?a[t]:void 0;if("c.us"!==t||r)if(void 0===d){if(t.indexOf("@")<1)this.writeStringRaw(e,t);else try{var u=(0,n.createWid)(t);this.writeJid(e,u)}catch(a){this.writeStringRaw(e,t)}}else{if(d<s.default.SINGLE_BYTE_MAX)this.writeToken(e,d);else{var c=d-s.default.SINGLE_BYTE_MAX;switch(o=c%256,c>>8){case 0:i=s.default.DICTIONARY_0;break;case 1:i=s.default.DICTIONARY_1;break;case 2:i=s.default.DICTIONARY_2;break;case 3:i=s.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+d)}}this.writeToken(e,i),this.writeToken(e,o)}else this.writeToken(e,a["s.whatsapp.net"])}},this.writeStringRaw=function(e,t){var a=(0,i.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(s.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(s.default.BINARY_20),e.pushInt20(a)):(e.pushByte(s.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t){var a=t.user,r=t.server,i=t.agent,l=t.device;if(i||l){if(i>255||l>255||"c.us"!==r&&"s.whatsapp.net"!==r)throw new Error(`invalid agent:${i} or device:${l} or server:${r} for wid ${t.toString()}`);e.pushByte(s.default.JID_AD),e.pushByte(i||0),e.pushByte(l||0),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,s.default.LIST_EMPTY)}else e.pushByte(s.default.JID_PAIR),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,s.default.LIST_EMPTY),this.writeString(e,r)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){for(var a in this.isAttr=!0,t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){var a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if((a=t.byteLength)>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(s.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(s.default.BINARY_20),e.pushInt20(a)):(e.pushByte(s.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(var r=0;r<a;r++)this.writeNode(e,t[r])}},this.writeListStart=function(e,t){0===t?e.pushByte(s.default.LIST_EMPTY):t<256?(e.pushByte(s.default.LIST_8),e.pushByte(t)):(e.pushByte(s.default.LIST_16),e.pushInt16(t))},this.writePackedBytesStringFallback=function(e,t){try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)`writer:encode-fallback "${a.message}"`,this.writeString(e,t)}},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,s.default.NIBBLE_8)}catch(a){__LOG__(3)`writer:enc nib fail, try hex "${a.message}"`,this.writePackedBytesImpl(e,t,s.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){var r=(0,i.numUtf8Bytes)(t);if(r>s.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+r);var l,n=[],o=0;r%2>0&&(o=128);var d=o|Math.ceil(r/2);n.push(a),n.push(d);for(var u=Math.floor(r/2),c=0;c<u;c++)l=this.packBytePair(a,t[2*c],t[2*c+1]),n.push(l);o>0&&(l=this.packBytePair(a,t[r-1],"\0"),n.push(l));var f=new Uint8Array(n);e.pushUint8Array(f)},this.packBytePair=function(e,t,a){var r,i;switch(e){case s.default.NIBBLE_8:r=this.packNibble(t),i=this.packNibble(a);break;case s.default.HEX_8:r=this.packHex(t),i=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return r<<4|i},this.packNibble=function(e){if(!r.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return r[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var i=a(26080),s=r(a(77588)),l=r(a(53680)),n=a(52152)},8065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},91782:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(63337)),l=a(49236),n=a(54438),o=i(a(78955)),d=r(a(80750));class u{static encrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:encrypt"));var t=d.get(),a=(0,l.encryptAndMac)((0,s.default)(t.encKey,"bundle.encKey"),(0,s.default)(t.macKey,"bundle.macKey"),e);return this._encryptQueue.enqueue(a)}static decrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:decrypt"));var t=d.get(),a=(0,l.macAndDecrypt)((0,s.default)(t.encKey,"bundle.encKey"),(0,s.default)(t.macKey,"bundle.macKey"),e);return this._decryptQueue.enqueue(a)}static dropAllBecauseLogout(){var e=new n.LogoutDrop("cancelled binary protocol call");this._encryptQueue.cancelAll(e),this._decryptQueue.cancelAll(e)}}t.default=u,u._encryptQueue=new o.default,u._decryptQueue=new o.default},91082:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={singleByte:[void 0,void 0,void 0,"200","400","404","500","501","502","action","add","after","archive","author","available","battery","before","body","broadcast","chat","clear","code","composing","contacts","count","create","debug","delete","demote","duplicate","encoding","error","false","filehash","from","g.us","group","groups_v2","height","id","image","in","index","invis","item","jid","kind","last","leave","live","log","media","message","mimetype","missing","modify","name","notification","notify","out","owner","participant","paused","picture","played","presence","preview","promote","query","raw","read","receipt","received","recipient","recording","relay","remove","response","resume","retry","s.whatsapp.net","seconds","set","size","status","subject","subscribe","t","text","to","true","type","unarchive","unavailable","url","user","value","web","width","mute","read_only","admin","creator","short","update","powersave","checksum","epoch","block","previous","409","replaced","reason","spam","modify_tag","message_info","delivery","emoji","title","description","canonical-url","matched-text","star","unstar","media_key","filename","identity","unread","page","page_count","search","media_message","security","call_log","profile"],doubleByte:[],nibbleEncode:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"-":10,".":11,"\0":15},nibbleDecode:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"-",11:".",15:"\0"}};t.default=a},97280:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(26080);t.default=class{constructor(e){this.binary=new r.Binary(e)}readByte(){return this.binary.readUint8()}readInt16(){return this.binary.readUint16()}readInt20(){return((15&this.binary.readUint8())<<16)+(this.binary.readUint8()<<8)+this.binary.readUint8()}readInt32(){return this.binary.readUint32()}readString(e){return this.binary.readString(e)}readBytes(e){return this.binary.readBuffer(e)}debugInfo(){var e=this.binary;return`offset: ${e._readIndex} byte: ${e._buffer[e._readIndex]}`}debugInfoWithPadding(){var e=this.binary,t=e._buffer.slice(Math.max(0,e._readIndex-20),e._readIndex).toString(),a=e._buffer.slice(e._readIndex,Math.min(e._buffer.length,e._readIndex+20)).toString();return`offset: ${e._readIndex} byte: ${e._buffer[e._readIndex]} previous 20 bytes: ${t}\n        following 20 bytes: ${a}\n        `}}},56155:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(26080);t.default=class{constructor(){this.buf=new r.Binary}pushInt16(e){this.buf.writeUint16(e)}pushInt20(e){if("number"!=typeof e)throw new Error("invalid int20");this.buf.writeUint8((983040&e)>>16),this.buf.writeUint16(65535&e)}pushInt32(e){this.buf.writeUint32(e)}pushByte(e){this.buf.writeUint8(e)}pushBytes(e){if(!(e instanceof ArrayBuffer))throw new Error("invalid byte buffer");this.buf.writeBuffer(e)}pushUint8Array(e){if("[object Uint8Array]"!==Object.prototype.toString.call(e))throw new Error("invalid Uint8Array");this.buf.writeByteArray(e)}pushString(e){if("string"!=typeof e)throw new Error("invalid string");this.buf.writeString(e)}toBuffer(){return this.buf.readBuffer()}}},89993:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="",a="",r=e.singleByte,l=e.doubleByte,o=e.nibbleDecode;this.readNode=function(e){var a=e.readByte(),r=this.readListSize(e,a);if((a=e.readByte())===i.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());var s=this.readString(e,a);if(0===r||!s)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());t=s;var l,n=this.readAttributes(e,r-2+r%2>>1);if(r%2==1)return[s,n,void 0];if(a=e.readByte(),this.isListTag(a))l=this.readList(e,a);else if(a===i.default.BINARY_8){var o=e.readByte();l=e.readBytes(o)}else if(a===i.default.BINARY_20){var d=e.readInt20();l=e.readBytes(d)}else if(a===i.default.BINARY_32){var u=e.readInt32();l=e.readBytes(u)}else l=this.readString(e,a);return[s,n,l]},this.isListTag=function(e){return e===i.default.LIST_EMPTY||e===i.default.LIST_8||e===i.default.LIST_16},this.readListSize=function(e,t){if(t===i.default.LIST_EMPTY)return 0;if(t===i.default.LIST_8)return e.readByte();if(t===i.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,r,l=!0){var o;if(-1===r)throw new Error("invalid start token readString"+e.debugInfo());if(r>2&&r<236){var d=this.getToken(r);return"s.whatsapp.net"===d&&(d="c.us"),d}switch(r){case i.default.DICTIONARY_0:case i.default.DICTIONARY_1:case i.default.DICTIONARY_2:case i.default.DICTIONARY_3:var u=e.readByte();return this.getTokenDouble(r-i.default.DICTIONARY_0,u);case i.default.LIST_EMPTY:return;case i.default.BINARY_8:return o=e.readString(e.readByte()),this.isAttr&&l&&s.default.isWid(o)?n(o):o;case i.default.BINARY_20:return o=e.readString(e.readInt20()),this.isAttr&&l&&s.default.isWid(o)?n(o):o;case i.default.BINARY_32:return o=e.readString(e.readInt32()),this.isAttr&&l&&s.default.isWid(o)?n(o):o;case i.default.JID_PAIR:var c=this.readString(e,e.readByte()),f=this.readString(e,e.readByte());if(void 0!==c&&void 0!==f){var h=c+"@"+f;return l&&s.default.isWid(h)?n(h):h}if(void 0!==f)return f;throw new Error("invalid jid "+c+","+f+" "+e.debugInfo());case i.default.NIBBLE_8:case i.default.HEX_8:return this.readPacked8(r,e);default:throw __LOG__(2,!0)`Unexpected token in binary protocol read. Token : ${r}
lastTag: ${t}
lastAttributeKey: ${a}
${e.debugInfoWithPadding()}`,new Error("invalid string "+r)}},this.getToken=function(e){var t;if(e>=0&&e<r.length&&(t=r[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){var a,r=256*e+t;if(r>=0&&r<l.length&&(a=l[r]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){var r,i;this.isAttr=!0;for(var l=t?{}:void 0,n=0;n<t;n++)r=this.readString(e,e.readByte()),a=r,i=this.readString(e,e.readByte(),s.default.canBeWid(r)),l[r]=i;return this.isAttr=!1,l},this.readList=function(e,t){for(var a=[],r=this.readListSize(e,t),i=0;i<r;i++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){for(var a=t.readByte(),r="",i=0;i<(127&a);i++){var s=t.readByte();r+=this.unpackByte(e,(240&s)>>4),r+=this.unpackByte(e,15&s)}return a>>7&&(r=r.substring(0,r.length-1)),r},this.unpackByte=function(e,t){switch(e){case i.default.NIBBLE_8:return this.unpackNibble(t);case i.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!o.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return o[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var i=r(a(8065)),s=r(a(53680)),l=a(52152);function n(e){try{return(0,l.createWid)(e)}catch(t){return e}}},50467:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a={},r=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+s.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(t){if(3!==t.length)throw new Error("invalid node");var a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])}},this.writeString=function(e,t,r){if("string"!=typeof t&&!(t instanceof l.default))throw __LOG__(3)`writer:writeString passed non-string/wid type: ${typeof t}`,new Error("invalid string");if(t instanceof l.default)this.writeJid(e,t.user,t.server);else{var i,n,o=a.hasOwnProperty(t)?a[t]:void 0;if("c.us"!==t||r)if(void 0===o){var d=t.indexOf("@");if(d<1)this.writeStringRaw(e,t);else{var u=t.substring(0,d),c=t.substring(d+1);this.writeJid(e,u,c)}}else{if(o<s.default.SINGLE_BYTE_MAX)this.writeToken(e,o);else{var f=o-s.default.SINGLE_BYTE_MAX;switch(n=f%256,f>>8){case 0:i=s.default.DICTIONARY_0;break;case 1:i=s.default.DICTIONARY_1;break;case 2:i=s.default.DICTIONARY_2;break;case 3:i=s.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+o)}}this.writeToken(e,i),this.writeToken(e,n)}else this.writeToken(e,a["s.whatsapp.net"])}},this.writeStringRaw=function(e,t){var a=(0,i.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(s.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(s.default.BINARY_20),e.pushInt20(a)):(e.pushByte(s.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t,a){if(e.pushByte(s.default.JID_PAIR),t)try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)`writer:encode-fallback "${a.message}"`,this.writeString(e,t)}else this.writeToken(e,s.default.LIST_EMPTY);this.writeString(e,a)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){for(var a in this.isAttr=!0,t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){var a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if((a=t.byteLength)>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(s.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(s.default.BINARY_20),e.pushInt20(a)):(e.pushByte(s.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(var r=0;r<a;r++)this.writeNode(e,t[r])}},this.writeListStart=function(e,t){0===t?e.pushByte(s.default.LIST_EMPTY):t<256?(e.pushByte(s.default.LIST_8),e.pushByte(t)):(e.pushByte(s.default.LIST_16),e.pushInt16(t))},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,s.default.NIBBLE_8)}catch(a){__LOG__(3)`writer:enc nib fail, try hex "${a.message}"`,this.writePackedBytesImpl(e,t,s.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){var r=(0,i.numUtf8Bytes)(t);if(r>s.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+r);var l,n=[],o=0;r%2>0&&(o=128);var d=o|Math.ceil(r/2);n.push(a),n.push(d);for(var u=Math.floor(r/2),c=0;c<u;c++)l=this.packBytePair(a,t[2*c],t[2*c+1]),n.push(l);o>0&&(l=this.packBytePair(a,t[r-1],"\0"),n.push(l));var f=new Uint8Array(n);e.pushUint8Array(f)},this.packBytePair=function(e,t,a){var r,i;switch(e){case s.default.NIBBLE_8:r=this.packNibble(t),i=this.packNibble(a);break;case s.default.HEX_8:r=this.packHex(t),i=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return r<<4|i},this.packNibble=function(e){if(!r.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return r[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var i=a(26080),s=r(a(8065)),l=r(a(53680))},78947:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["ciphertext","invite"]}},1448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["gif","vcard","frequent"]}},94235:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["privacy","blacklist","whitelist","verify"]}},13149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["location","document","elapsed","revoke_invite","expiration","unsubscribe","disable"]}},37347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={sendConversationDismissChangeNumber:function(e){return this.sendConversationOpWithKey("modify",e,void 0,void 0)}};t.default=a},8326:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(30381)),s=a(26226),l=r(a(13353)),n={setGroupEphemeralDuration:function(e,t){return new Promise(((a,r)=>{var n=l.default.tag(),o=this.wrap(a);o.tag=n;var d=[["ephemeral",{value:t.toString()},void 0]],u=["group",{id:n,jid:e,type:"prop",author:(0,s.getMaybeMeUser)()},d],c=this.actionNode("set",[u]);this.binSend("send",c,r,{clientCacheable:!0,onSend:o,onDrop:this.wrap(r)},{debugString:"action,group,ephemeral,"+t,metricName:"GROUP",expires:(0,i.default)().unix()})}))}};t.default=n},12516:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(30381)),s=a(26226),l=a(56670),n=r(a(13353)),o={setGroupDescription:function(e,t,a,r){return new Promise(((o,d)=>{var u,c=n.default.tag(),f=this.wrap(o);f.tag=c,u=(0,l.isString)(t)?[["description",{id:a,prev:r||"none"},t]]:[["description",{prev:r||"none",delete:"true"},void 0]];var h=["group",{id:c,jid:e,type:"description",author:(0,s.getMaybeMeUser)()},u],p=this.actionNode("set",[h]);this.binSend("send",p,d,{clientCacheable:!0,onSend:f,onDrop:this.wrap(d)},{debugString:"action,group,desc",metricName:"GROUP",expires:(0,i.default)().unix()})}))},setGroupProperty:function(e,t,a){return"announcement"!==t&&"restrict"!==t&&"no_frequently_forwarded"!==t?Promise.reject("invalid group property"):new Promise(((r,l)=>{var o,d=n.default.tag(),u=this.wrap(r);switch(u.tag=d,t){case"announcement":o=[["announcement",{value:(!!a).toString()},void 0]];break;case"restrict":o=[["locked",{value:(!!a).toString()},void 0]];break;case"no_frequently_forwarded":o=[["no_frequently_forwarded",{value:(!!a).toString()},void 0]]}var c=["group",{id:d,jid:e,type:"prop",author:(0,s.getMaybeMeUser)()},o],f=this.actionNode("set",[c]);this.binSend("send",f,l,{clientCacheable:!0,onSend:u,onDrop:this.wrap(l)},{debugString:["action,group,prop",t,a].join(),metricName:"GROUP",expires:(0,i.default)().unix()})}))},demoteParticipants:function(e,t){return this.setGroupParticipants("demote",e,t)}};t.default=o},67623:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(30381)),s=a(26226),l=a(56670),n=r(a(13353)),o={createGroup:function(e,t,a,r,o,d,u){return new Promise(((c,f)=>{var h=n.default.tag(),p=this.wrap(c);p.tag=h;var m=t.map((e=>["participant",{jid:e},void 0]));(0,l.isString)(a)&&(0,l.isString)(r)&&m.unshift(["description",{id:r},a]),o&&m.unshift(["locked",void 0,void 0]),d&&m.unshift(["announcement",void 0,void 0]),null!=u&&0!==u&&m.unshift(["ephemeral",{value:u.toString()},void 0]),__LOG__(2)`create group tag`;var _=["group",{id:h,type:"create",author:(0,s.getMaybeMeUser)(),subject:e},m],v=this.actionNode("set",[_]);this.binSend("send",v,f,{clientCacheable:!0,onSend:p,onDrop:this.wrap(f)},{debugString:"action,group,create",metricName:"GROUP",expires:(0,i.default)().unix()})}))}};t.default=o},627:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(30381)),s=r(a(13353)),l={findGroupPendingInvitesFromPhone:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"group",kind:"invite",from:e,jid:t},[]);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{if("response"===this.N.tag(e)&&"group"===this.N.attr("type",e)){var t=this.N.children(e),r=t&&t[0];if(r){var i=[],s=this.N.children(r);Array.isArray(s)&&s.forEach((e=>{switch(this.N.tag(e)){case"participant":i.push({id:this.N.attr("jid",e)})}})),a({participants:i})}else a({status:"error",info:"bad format: no group node"})}else a({status:"error",info:"bad format: response incorrect"})})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,group_pending_invite",metricName:"QUERY_GROUP",ackRequest:!1})}))},acceptGroupV4Invite:function(e,t,a,r,l){return new Promise(((n,o)=>{var d=s.default.tag(),u=this.wrap(n);u.tag=d;var c=[["accept",{admin:t,expiration:r,code:a},void 0]],f=this.actionNode("set",[["group",{id:d,author:l,jid:e,type:"accept"},c]]);this.binSend("send",f,o,{clientCacheable:!0,onSend:u,onDrop:this.wrap(o)},{debugString:"action,group_invite_accept,",ackRequest:!1,expires:(0,i.default)().unix()})}))},revokeGroupV4Invite:function(e,t,a){return new Promise(((r,l)=>{var n=s.default.tag(),o=this.wrap(r);o.tag=n;var d=e.map((e=>["participant",{jid:e},void 0])),u=this.actionNode("set",[["group",{id:n,author:a,jid:t,type:"revoke"},d]]);this.binSend("send",u,l,{clientCacheable:!0,onSend:o,onDrop:this.wrap(l)},{debugString:"action,group_invite_revoke,",ackRequest:!1,expires:(0,i.default)().unix()})}))},parseInviteUpdate(e){var t=[],[a,r,i]=[this.N.attr("kind",e),this.N.attr("jid",e),this.N.attr("type",e)];if("update"===a&&"invite"===i&&void 0!==r){for(var s=this.N.children(e),l=0;l<s.length;l++){var n=s[l];"participant"===this.N.tag(n)&&t.push(this.N.attr("jid",n))}return{gid:r,participants:t}}}};t.default=l},5256:(e,t,a)=>{"use strict";var r=a(95318);t.Z=void 0;var i=r(a(37347)),s=r(a(8326)),l=r(a(12516)),n=r(a(67623)),o=r(a(627)),d=r(a(9621)),u=r(a(43355)),c=r(a(80294)),f=r(a(758)),h=r(a(8508)),p=r(a(22104)),m=r(a(17125)),_=r(a(17174)),v=r(a(79644)),g=r(a(56507)),E=r(a(17942)),S=r(a(21251)),C=r(a(96093)),y=r(a(6136)),b={labelsDisplay:d.default,groupsV3:l.default,groupsV3Create:n.default,changeNumberV2:i.default,queryStatusV3Thumbnail:p.default,queryVname:m.default,voipIndividualIncoming:y.default,quickRepliesQuery:_.default,payments:h.default,stickerPackQuery:S.default,labelsEdit:u.default,mediaUpload:c.default,videoPlaybackUrl:C.default,recentStickersV2:v.default,recentStickersV3:v.default,starredStickers:E.default,groupsV4JoinPermission:o.default,ephemeralMessages:s.default,userNotice:f.default,settingsSync:g.default};t.Z=b},9621:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(63337)),s=(a(79022),r(a(47540))),l={chat:["Chat","Contact"],message:["Msg"],contact:["Contact"]},n={queryLabels:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"label"});this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{var a={labels:[]};if(__LOG__(2)`bin-recv: response,label`,"response"===this.N.tag(t)&&"label"===this.N.attr("type",t)){a.checksum=this.N.attr("checksum",t);var r=this.N.children(t);if(Array.isArray(r))for(var i=0;i<r.length;i++){var s=this.parseLabel(r[i]),l=s&&s.label;l&&a.labels.push(l)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,labels",metricName:"QUERY_LABELS"})}))},parseLabel:function(e){if("label"===this.N.tag(e)){var t,a=parseInt(this.N.attr("count",e),10),r=this.N.attr("id",e),n=this.N.attr("name",e),d=this.N.attr("color",e),u=isNaN(a)?void 0:a,c=this.N.attr("type",e);if("update"===c)for(var f=this.N.children(e),h=0;h<f.length;h++){var p=f[h],m=null;switch(this.N.tag(p)){case"chat":m=this.N.attr("jid",p);break;case"message":var _=this.N.attr("jid",p),v=this.N.attr("index",p),g="true"===this.N.attr("owner",p),E=this.N.attr("participant",p);m=new s.default({fromMe:g,remote:_,id:v,participant:E})}var S={id:(0,i.default)(m,"updateId"),labels:o(this.N.children(p),this.N.attr),collection:l[this.N.tag(p)]};t=t?t.concat(S):[S]}var C={label:{id:r,name:n,color:d,count:u},type:c,labelUpdates:t};return this.dropIfConditionMet([!(c||r&&n&&d),c&&"update"!==c&&"delete"!==c],C)}}};function o(e,t){return e&&Array.isArray(e)?e.reduce(((e,a)=>[...e,(0,i.default)(t("id",a),"attr('id', label)")]),[]):[]}t.default=n},43355:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(30381)),s=r(a(62899)),l={queryNextLabelColor(){return this._queryLabelColor(!0)},queryLabelPalette(){return this._queryLabelColor()},createLabel(e,t){return this._createOrDeleteLabels("create",e,t)},deleteLabel(e){return this._createOrDeleteLabels("delete",void 0,void 0,e)},_queryLabelColor:function(e){var t=e?"next label color":"all label color palette";return new Promise(((a,r)=>{var i=this.queryNode({type:"label",kind:"color",create:e?"true":void 0});this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={};if(__LOG__(2)`bin-recv: response,${t}`,"response"===this.N.tag(e)&&"label"===this.N.attr("type",e)){r.labelColors=[];var i=this.N.children(e);if(Array.isArray(i))for(var s=0;s<i.length;s++){var l=this.parseLabelColor(i[s]);l&&r.labelColors.push(l)}}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:`query,${t}`,metricName:e?"QUERY_NEXT_LABEL_COLOR":"QUERY_LABEL_PALETTE"})}))},addOrRemoveLabels:function(e,t=[]){return new Promise(((r,l)=>{var n=this.wrap(r),o=e.map((e=>["label",{id:e.id,type:e.type},void 0])),d=t.map((e=>e instanceof a(74798).default.modelClass?["chat",{jid:e.id},void 0]:e instanceof s.default.modelClass?["contact",{jid:e.id},void 0]:e instanceof a(33048).default.modelClass?["message",{index:e.id.id,owner:void 0===e.id.fromMe?void 0:e.id.fromMe.toString(),jid:e.id.remote},void 0]:void 0)),u=this.actionNode("set",[["label",{type:"update"},d.concat(o)]]);this.binSend("send",u,l,{onSend:n,onDrop:this.wrap(l)},{debugString:"action,label,remove or add",metricName:"ADD_OR_REMOVE_LABELS",expires:(0,i.default)().unix()})}))},_createOrDeleteLabels:function(e,t,a,r){return"delete"!==e&&"create"!==e?Promise.reject(new Error("_createOrDeleteLabels must be called with type of delete or create")):new Promise(((s,l)=>{var n=this.wrap(s),o={type:e,name:t,color:a,id:r||void 0},d=this.actionNode("set",[["label",o,void 0]]);this.binSend("send",d,l,{onSend:n,onDrop:this.wrap(l)},{debugString:"action,label,create or delete",metricName:"CREATE_OR_DELETE_LABELS",expires:(0,i.default)().unix()})}))},editLabel:function(e,t,a){return new Promise(((r,s)=>{var l=this.wrap(r),n={id:e,name:t||void 0,color:a||void 0,type:"update"},o=this.actionNode("set",[["label",n,void 0]]);this.binSend("send",o,s,{onSend:l,onDrop:this.wrap(s)},{debugString:"action,label,edit",metricName:"EDIT_LABELS",expires:(0,i.default)().unix()})}))},parseLabelColor:function(e){if("label"===this.N.tag(e)){var t=this.N.attr("color",e);return this.dropIfConditionMet([!t],{color:t})}}};t.default=l},80294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=["url","mediaKey","filehash","encFilehash","width","height","mimetype"],r=["url","mediaKey","filehash","encFilehash","mimetype"];function i(e,t){for(var a=0;a<t.length;a++)if(!e[t[a]])return!1;return!0}var s={mediaUpload:function(e,t){return new Promise(((s,l)=>{var n=this.queryNode({type:"media",kind:e,id:t.toString()},void 0);this.binSend("sendEphemeral",n,l,{onSend:this.binWrap((t=>{this.BinaryProtocol.read(t).then((t=>{if(__LOG__(2)`bin-recv: response,media`,"response"!==this.N.tag(t)||"media"!==this.N.attr("type",t))return __LOG__(3)`wap:mediaUpload:malformed`,void s({status:400});var l=parseInt(this.N.attr("code",t),10)||200;if(200!==l)return __LOG__(3)`wap:mediaUpload:error ${l}`,void s({status:l});switch(e){case"sticker":var n={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t),height:this.N.attr("height",t),width:this.N.attr("width",t)};return i(n,a)?void s({status:l,sticker:n}):(__LOG__(3)`wap:mediaUpload:missing-field`,void s({status:400}));case"sticker-pack":var o={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t)};return i(o,r)?void s({status:l,stickerPack:o}):(__LOG__(3)`wap:mediaUpload:missing-field`,void s({status:400}));case"quick-reply":throw new Error('"quick-reply" not yet implemented');default:throw new Error(`unknown kind ${e}`)}}))}),s),onDrop:this.wrap(l)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))}};t.default=s},758:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(81109)),s=r(a(41609)),l={queryNoticeState:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"notice"},void 0),i=e?"query,notice_state,resume":"query,notice_state";this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={notices:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)`bin-recv: response,notice_state`,"response"===this.N.tag(e)&&"notice"===this.N.attr("type",e)){var r=this.N.children(e);if(Array.isArray(r))for(var i=0;i<r.length;i++){var l=this.parseNotice(r[i]);(0,s.default)(l)||a.notices.push(l)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:Boolean(e)},{debugString:i,metricName:"QUERY_NOTICE_STATE"})}))},parseNotice:function(e){if("notice"===this.N.tag(e)){var t=parseInt(this.N.attr("id",e),10),a=parseInt(this.N.attr("version",e),10),r={id:isNaN(t)?void 0:t,blocking:"true"===this.N.attr("blocking",e),version:isNaN(a)?void 0:a};return null!=r.id?r:(0,i.default)({},void 0)}}};t.default=l},8508:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(95457),i={parsePaymentInfo:function(e,t){t&&(0,r.parseMsgPaymentInfo)(e,t)}};t.default=i},22104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={statusQueryThumbnail:function(e){return this.profilePicFindThumbFromPhone(e,void 0,!0)}};t.default=a},17125:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={queryVname:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"vname",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((r=>{this.BinaryProtocol.read(r).then((a=>{var r;__LOG__(2)`bin-recv: response,vname`,"response"===this.N.tag(a)&&"vname"===this.N.attr("type",a)&&(r=this.parseContact(this.N.child("user",a),e)),t(r)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,vname,${e}`,metricName:"QUERY_VNAME"})}))}};t.default=a},17174:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(56670),i={queryQuickReplies:function(e){return this.sendQuickRepliesQuery(e,!1)},flushQuickReplyCounts:function(e){return this.sendQuickRepliesQuery(e,!0)},sendQuickRepliesQuery:function(e,t){return new Promise(((a,r)=>{var i=e?Object.keys(e).map((t=>["quick_reply",{id:t,count:e[t].toString()},void 0])):void 0,s={type:"quick_reply"};t&&(s.kind="count");var l=this.queryNode(s,i);this.binSend("sendEphemeral",l,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={data:[]};if(__LOG__(2)`bin-recv: response,quick_reply`,"response"===this.N.tag(e)&&"quick_reply"===this.N.attr("type",e)){r.checksum=this.N.attr("checksum",e);var i=this.N.children(e);if(Array.isArray(i))for(var s=0;s<i.length;s++){var l=(t?this.parseQuickReplyCount.bind(this):this.parseQuickReply.bind(this))(i[s]);l&&r.data.push(l)}}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,quick_replies",metricName:"QUERY_QUICK_REPLIES"})}))},parseQuickReply:function(e){if("quick_reply"===this.N.tag(e)){var t=this.N.attr("id",e),a=this.N.attr("short",e),i=this.N.attr("message",e),s=parseInt(this.N.attr("count",e),10)||0,l=this.N.attr("type",e),n=[];if("delete"!==l){var o=this.N.children(e);if(Array.isArray(o))for(var d=0;d<o.length;d++){var u=o[d];"matched-text"===this.N.tag(u)&&n.push(this.N.dataStr(u))}}var c=[!(l||t&&a&&i&&(0,r.isNumber)(s)),l&&"delete"!==l,"delete"===l&&!t];return this.dropIfConditionMet(c,{id:t,shortcut:a,message:i,count:s,keywords:n,type:l})}},parseQuickReplyCount:function(e){if("quick_reply"===this.N.tag(e)){var t=this.N.attr("id",e),a=parseInt(this.N.attr("count",e),10)||0,i=[!t||!(0,r.isNumber)(a)];return this.dropIfConditionMet(i,{id:t,count:a})}}};t.default=i},79644:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(26372)),s={queryRecentStickers:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"recent_stickers"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((e=>(0,i.default)(e,this.N,"recent_stickers"))).then(e,t)}),e),onDrop:this.wrap(t)},{debugString:"query,recent_stickers",metricName:"QUERY_RECENT_STICKERS"})}))}};t.default=s},73975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("recent_stickers"!==t.tag(e))return;if("delete"!==t.attr("type",e))return;return t.attr("filehash",e)}},17942:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(26372)),s={queryStarredStickers:function(e=1,t=32){return new Promise(((a,r)=>{var s=this.queryNode({type:"starred_stickers",page:e.toString(),count:t.toString()},void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>(0,i.default)(e,this.N,"starred_stickers"))).then(a,r)}),a),onDrop:this.wrap(r)},{debugString:"query,starred_stickers",metricName:"QUERY_STARRED_STICKERS"})}))}};t.default=s},18768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("starred_stickers"!==t.tag(e))return;var a=t.attr("type",e);if("delete"!==a&&"add"!==a)return;var r=t.attr("filehash",e)||"";if("add"===a){var i={id:r,deprecatedMms3Url:t.attr("url",e)||"",directPath:t.attr("direct_path",e)||"",filehash:r,encFilehash:t.attr("enc_filehash",e),mediaKey:t.attr("media_key",e)||"",width:parseInt(t.attr("width",e)||"0",10),height:parseInt(t.attr("height",e)||"0",10),size:parseInt(t.attr("size",e)||"0",10),mimetype:t.attr("mimetype",e),index:0};return{filehash:r,type:a,sticker:i}}return{filehash:r,type:a}}},94990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;if("sticker"!==t.tag(e))return;var r=t.attr("filehash",e);if(!r)return __LOG__(4,void 0,new Error,!0)`filehash is missing in sticker from phone`,void SEND_LOGS("sticker-missing-filehash-from-phone");var i={id:r,deprecatedMms3Url:t.attr("url",e),directPath:t.attr("direct_path",e),mediaKey:t.attr("media_key",e),filehash:r,encFilehash:t.attr("enc_filehash",e),mimetype:t.attr("mimetype",e),width:parseInt(t.attr("width",e),10),height:parseInt(t.attr("height",e),10),size:parseInt(t.attr("size",e),10),weight:parseFloat(null!==(a=t.attr("weight",e))&&void 0!==a?a:1)};(!i.mimetype||Number.isNaN(i.width)||Number.isNaN(i.height)||Number.isNaN(i.size))&&__LOG__(3)`sticker:parse missing preferred fields: `;return i}},26372:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){__LOG__(2)`bin-recv: response,${a}`;var r=t.tag(e);if("response"!==r)throw new Error(`node tag for ${a} response is invalid: ${r}`);var l=t.attr("type",e)||"";if(l!==a)throw new Error(`node type for ${a} response is invalid: ${l}`);var n=parseInt(t.attr("code",e),10)||200;if(200!==n)throw new Error(`response status for ${a} is invalid: ${n}`);var o=t.attr("checksum",e)||"",d=parseInt(t.attr("total",e)||"0",10),u=t.children(e)||[];(0,i.default)(Array.isArray(u),"expects an Array of Stickers");var c=u.map((e=>(0,s.default)(e,t))).filter(Boolean);return{checksum:o,total:d,stickers:c}};var i=r(a(41143)),s=r(a(94990))},21251:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(81109)),s=r(a(77188)),l={queryStickerPacks:function(e=1,t=50){return new Promise(((a,r)=>{var i={type:s.default.isThirdPartyStickersEnabled()?"sticker_pack_v2":"sticker_pack",page:e.toString(),count:t.toString()},l=this.queryNode(i,void 0);this.binSend("sendEphemeral",l,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t={};if(__LOG__(2)`bin-recv: response,sticker_pack`,"response"===this.N.tag(e)&&"sticker_pack"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||200;t.status=r,t.data=[],t.checksum=this.N.attr("checksum",e);var i=this.N.attr("count",e);t.count=null==i?null:parseInt(i,10);var s=this.N.children(e);if(Array.isArray(s))for(var l=0;l<s.length;l++){var n=this.parseStickerPack(s[l]);n&&t.data.push(n)}}a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,sticker_pack",metricName:"QUERY_STICKER_PACKS"})}))},queryStickersInStickerPack:function(e){return this.queryStickers({id:e})},queryStickers:function(e){return new Promise(((t,a)=>{var r=(0,i.default)({type:"sticker"},e),s=this.queryNode(r,void 0);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={};if(__LOG__(2)`bin-recv: response,sticker`,"response"===this.N.tag(e)&&"sticker"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||200;a.status=r,a.data=[];var i=this.N.children(e);if(Array.isArray(i))for(var s=0;s<i.length;s++){var l=this.parseSticker(i[s]);l&&a.data.push(l)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:`query,sticker,${e.id}`,metricName:"QUERY_STICKERS"})}))},parseSticker:function(e){if("sticker"===this.N.tag(e)){var t={url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e),width:parseInt(this.N.attr("width",e)||125,10),height:parseInt(this.N.attr("height",e)||125,10),size:parseInt(this.N.attr("size",e)||0,10)||null};return t.filehash?t:void 0}},parseStickerPack:function(e){if("sticker_pack"===this.N.tag(e)){var t={id:this.N.attr("id",e),name:this.N.attr("name",e),url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e)};return t.id?t:void 0}},parseStickerPackUpdate:function(e){if("sticker_pack"===this.N.tag(e)){var t=this.N.attr("type",e);return this.dropIfConditionMet([!t],{type:t})}}};t.default=l},96093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={queryVideoPlaybackUrl:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"video",url:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{__LOG__(2)`bin-recv: response,video_playback_url`;var a=void 0;if("response"===this.N.tag(e)&&"video"===this.N.attr("type",e)){var r=this.N.attr("url",e);r&&(a={url:r})}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,video_playback_url",metricName:"QUERY_URL"})}))}};t.default=a},6136:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(19338),i=a(91591),s=a(22052),l={parseCall:function(e){if("call"===this.N.tag(e)){var t=this.N.child("offer",e);if(t){var a=this.N.child("call",t);if(a){var s=this.N.children(a),l=(0,r.decodeProto)(i.MessageSpec,s).call;if(l){var n=this.N.attr("from",e),o=this.N.attr("call-id",t),d=l.callKey;return this.dropIfConditionMet([!o,!n,!d],{type:"offer_key",id:o,peerJid:n,key:d})}}}}},queryCall:function(e,t){return new Promise(((a,r)=>{var i=this.queryNode({type:"call","call-id":e,kind:t});this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t={status:400};"response"===this.N.tag(e)&&"call"===this.N.attr("type",e)&&(t.status=parseInt(this.N.attr("code",e),10)||400),a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,call,"+e,metricName:"QUERY_CALL"})}))},handleCallQuery(){var e=a(57055).default.handleQuery({});if(e)return e.then((()=>this.responseNode(void 0,[["some",{formatted:"xml"},void 0]])))},sendCallEnd:function(e,t){return new Promise(((a,r)=>{var i={};i.jid=e.jid,i["call-id"]=e["call-id"],i.result=n(e.result),i.audio=e.audio.toString(),i.out=e.out.toString(),i.seconds=e.seconds.toString(),i.t=e.t.toString(),i.group=e.group.toString();var s=t.map((e=>["participant",{jid:e.jid,result:n(e.result)},void 0])),l=this.actionNode("relay",[["call_end",i,s]]);this.binSend("send",l,r,{onSend:this.wrap(a),onDrop:this.wrap(r)},{debugString:`action,call_end,${e["call-id"]}`})}))}};function n(e){return s.CALL_LOG_RESULT[e]||"invalid"}t.default=l},65579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={DEBUG_LOG:1,QUERY_RESUME:2,QUERY_RECEIPT:3,QUERY_MEDIA:4,QUERY_CHAT:5,QUERY_CONTACTS:6,QUERY_MESSAGES:7,PRESENCE:8,PRESENCE_SUBSCRIBE:9,GROUP:10,READ:11,CHAT:12,RECEIVED:13,PIC:14,STATUS:15,MESSAGE:16,QUERY_ACTIONS:17,BLOCK:18,QUERY_GROUP:19,QUERY_PREVIEW:20,QUERY_EMOJI:21,QUERY_MESSAGE_INFO:22,SPAM:23,QUERY_SEARCH:24,QUERY_IDENTITY:25,QUERY_URL:26,PROFILE:27,CONTACT:28,QUERY_VCARD:29,QUERY_STATUS:30,QUERY_STATUS_UPDATE:31,PRIVACY_STATUS:32,QUERY_LIVE_LOCATIONS:33,LIVE_LOCATION:34,QUERY_VNAME:35,QUERY_LABELS:36,CALL:37,QUERY_CALL:38,QUERY_QUICK_REPLIES:39,QUERY_CALL_OFFER:40,QUERY_RESPONSE:41,QUERY_STICKER_PACKS:42,QUERY_STICKERS:43,ADD_OR_REMOVE_LABELS:44,QUERY_NEXT_LABEL_COLOR:45,QUERY_LABEL_PALETTE:46,CREATE_OR_DELETE_LABELS:47,EDIT_LABELS:48,QUERY_RECENT_STICKERS:49,QUERY_NOTICE_STATE:50,QUERY_SETTINGS:51,SET_ARCHIVE_SETTING:51};t.default=a},73454:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCart=function(e,t,a,r){var o;i.default.supportsFeature(i.default.F.MD_BACKEND)?(o=(0,l.default)((0,n.createWid)(e),t,a,r))||(o=Promise.reject(new Error("Should not reach here"))):o=s.default.refreshCart(e,t,a,r);return o},t.updateCart=function(e){var t=Promise.resolve();if(i.default.supportsFeature(i.default.F.MD_BACKEND))if(e.itemCount>0||e.message&&e.message.length>0){var a=function(e){var t=e.cartItemCollection.map((e=>({id:e.id,priceAmount1000:e.priceAmount1000,currency:e.currency,name:e.name,quantity:e.quantity,imageHash:e.imageHash})));return{id:e.id.toString(),message:e.message,total:e.total,currency:e.currency,itemCount:e.itemCount,products:t}}(e);t=(0,o.getCartTable)().createOrReplace(a)}else t=(0,o.getCartTable)().remove(e.id.toString());return t};var i=r(a(77188)),s=r(a(35822)),l=r(a(99222)),n=a(52152),o=a(79642)},6279:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationArchive=function(e,t,a){var r;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var c=(0,n.unixTimeMs)();(r=o.default.getArchiveChatMutation(c,t,e).then((a=>(0,l.lockForMessageRangeSync)(["chat"],[a],(([r])=>(0,d.addActiveMessageRange)(e.toString(),"archive",a.binarySyncAction).then((()=>r.merge(e.toString(),function(e){var t={archive:e};e&&(t.pin=void 0);return t}(t)))))).then((()=>({status:200,_duplicate:null}))).catch((e=>{if(e instanceof u.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when send conversation to archive"),new Error("update chat table failed")})))))||(r=Promise.reject(new Error("Should not reach here")))}else r=s.default.sendConversationArchive(e,t,a);return r};var i=r(a(77188)),s=r(a(35822)),l=a(57572),n=a(56222),o=r(a(31344)),d=a(77485),u=a(12536)},51206:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationDelete=function(e,t,a){var r=Promise.resolve({status:400,_duplicate:!1});if(n.default.supportsFeature(n.default.F.MD_BACKEND)){var i=a();(t&&t.equals(i)||t===i)&&(r=(0,u.getStorage)().lock(["chat","label-association","message",...g.SYNCD_INTERNAL_TABLES_TO_LOCK],function(){var t=(0,l.default)((function*(){var t=yield(0,p.getBoundsForChat)(e);return yield Promise.all([(0,f.getChatTable)().remove(e.toString()),(0,p.default)(e),E(e)]),t}));return function(){return t.apply(this,arguments)}}()).then((t=>{t||__LOG__(3)`sendConversationDelete: chat boundaries was unexpectedly null`,h.default.purgeRange((0,s.default)({chatId:e.toString()},(0,d.default)(t,"chatBoundaries")))})).then((()=>({status:200,_duplicate:!1}))).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get storage or update chat/label-assoc failed`,SEND_LOGS("failed to send conversation delete"),new Error("get storage or update chat/label-assoc failed")})))}else r=o.default.sendConversationDelete(e,t);return r};var s=i(a(81109)),l=i(a(48926)),n=i(a(77188)),o=i(a(35822)),d=i(a(63337)),u=a(39384),c=a(34605),f=a(79642),h=i(a(23920)),p=r(a(21874)),m=a(62197),_=a(71801),v=a(87900),g=a(42929);function E(){return S.apply(this,arguments)}function S(){return(S=(0,l.default)((function*(e){if((0,c.canEditLabelAssociation)()){var t=yield(0,v.queryLocalLabelAssociation)([{associationId:e.toString(),type:m.LabelAssociationType.Jid}]);return(0,_.editLabelAssociationMD)(t.map((({labelId:e})=>({id:e,type:"remove"}))),[{labelAssociationType:m.LabelAssociationType.Jid,modelId:e.toString(),mutationIndexSegments:[e.toString({legacy:!0})]}])}}))).apply(this,arguments)}},15673:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eagerlyEstablishE2EESession=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var t=(0,s.assertGetMe)();return(0,l.getFanOutList)([...e,t]).then((e=>(0,n.ensureE2ESessions)(e)))}return Promise.resolve()};var i=r(a(77188)),s=a(26226),l=a(83951),n=a(82509)},12853:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t,a){var r;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){var c=void 0!==t&&0!==t,f=(0,o.unixTimeMs)(),h=d.default.getPinMutation(f,c,e,t);c||u.default.addUnsetActionCount(1),(r=(0,n.lockForSync)(["chat"],[h],(([a])=>a.merge(e.toString(),{pin:t}))).then((()=>({status:200,_duplicate:null}))))||(r=Promise.reject(new Error("Should not reach here")))}else r=l.default.sendConversationPin(e,t,a).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e}));return r};var i=a(54438),s=r(a(77188)),l=r(a(35822)),n=a(42929),o=a(56222),d=r(a(37495)),u=r(a(21890))},97785:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){var a=e.toString();(t=(0,n.getParticipantTable)().equals(["participants"],a).then((e=>e.map((e=>(0,o.createWid)(e.groupId))))))||(t=Promise.reject(new Error("Should not reach here")))}else t=l.default.commonGroupsFind(e).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e.groups}));return t};var i=a(54438),s=r(a(77188)),l=r(a(35822)),n=a(79642),o=a(52152)},38:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroupInviteCode=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(t=(0,n.queryGroupInviteCode)(e).then((e=>e.code))))return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=l.default.groupInviteCode(e).then((e=>200===e.status?e.code:Promise.reject(new i.ServerStatusCodeError(e.status))));return t},t.sendRevokeGroupInviteCode=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(t=(0,n.revokeGroupInviteCode)(e).then((e=>e.code))))return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=l.default.revokeGroupInvite(e).then((e=>200===e.status?e.code:Promise.reject(new i.ServerStatusCodeError(e.status))));return t},t.sendJoinGroupViaInvite=function(e){var t;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(t=(0,n.joinGroupViaInvite)(e).then((e=>e.gid))))return Promise.reject(new Error("joinGroupViaInvite: not supported when not build with MD_BACKEND"))}else t=l.default.acceptGroupInvite(e).then((e=>200===e.status?e.gid:Promise.reject(new i.ServerStatusCodeError(e.status))));return t};var i=a(54438),s=r(a(77188)),l=r(a(35822)),n=a(99325)},8120:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetGroupSubject=function(e,t){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(a=(0,o.setGroupSubject)(e,t).then((()=>({_duplicate:null})))))return Promise.reject(new Error("sendSetGroupSubject: not supported when not build with MD_BACKEND"))}else a=n.default.changeSubject(e,t).then((e=>200!==e.status?Promise.reject(new s.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return a},t.sendSetGroupDescription=function(e,t,a,r){var i;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(i=(0,o.setGroupDescription)(e,t,a,r).then((()=>({_duplicate:!1})))))return Promise.reject(new Error("sendSetGroupDescription: not supported when not build with MD_BACKEND"))}else i=n.default.setGroupDescription(e,t,a,r).then((e=>200!==e.status?Promise.reject(new s.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return i},t.sendSetGroupProperty=function(e,t,a){var r;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(r=(0,o.setGroupProperty)(e,t,a).then((()=>({_duplicate:!1})))))return Promise.reject(new Error("sendSetGroupProperty: not supported when not build with MD_BACKEND"))}else r=(r=t===i.default.GROUP_SETTING_TYPE.EPHEMERAL?n.default.setGroupEphemeralDuration(e,a):n.default.setGroupProperty(e,t,Boolean(a))).then((e=>200!==e.status?Promise.reject(new s.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return r};var i=r(a(75444)),s=a(54438),l=r(a(77188)),n=r(a(35822)),o=a(30773)},85265:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.supportsFeature(i.default.F.MD_BACKEND)?((0,l.default)(e,e.chat.id),Promise.resolve()):s.default.sendMessagePlayed(e.id).then((()=>{}))};var i=r(a(77188)),s=r(a(35822)),l=r(a(10751))},15338:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,a,r){var l;i.default.supportsFeature(i.default.F.MD_BACKEND)?(l=(0,n.default)(e,t,a,r))||(l=Promise.reject(new Error("md:queryOrder: should not reach here"))):l=s.default.queryOrder(e,t,a,r);return l},t.createOrder=function(e,t){var a;i.default.supportsFeature(i.default.F.MD_BACKEND)?(a=(0,l.default)(e,t))||(a=Promise.reject(new Error("Should not reach here"))):a=s.default.createOrder(e.user,t);return a};var i=r(a(77188)),s=r(a(35822)),l=r(a(48552)),n=r(a(32695))},93385:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCtwaContextData=function(e){var t,{phone:a,sourceUrl:r,context:n}=e;if(!a||!r||!n)return Promise.reject(new Error("Invalid params passed to fetchCtwaContextData"));i.default.supportsFeature(i.default.F.MD_BACKEND)?(t=(0,l.default)(a,n,r))||(t=Promise.reject(new Error("Should not reach fetchCtwaContextData MD"))):t=s.default.queryCtwaContext(a,n,r);return t};var i=r(a(77188)),s=r(a(35822)),l=r(a(1604))},74587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVDeviceStatusCode=t.AVDeviceStatusContext=t.AVDeviceType=void 0;t.AVDeviceType={AudioInput:0,AudioOutput:1,Video:2,NotIdentified:3};t.AVDeviceStatusContext={DeviceSetup:0,DeviceMidstream:1,DeviceSelection:2,DeviceStop:3,DeviceOther:4};t.AVDeviceStatusCode={DeviceSuccess:0,FailureNonDevice:1,VideoDeviceNotFound:2,VideoDeviceUnsupportedCapability:3,VideoDeviceUnusable:4,VideoDeviceInUse:5,VideoDeviceUnauthorized:6,VideoDeviceTimeout:7,VideoDeviceOther:127,AudioCaptureDeviceNotFound:128,AudioPlaybackDeviceNotFound:129,AudioDeviceNotFound:130,AudioCaptureDeviceUnusable:131,AudioPlaybackDeviceUnusable:132,AudioDeviceUnusable:133,AudioCaptureDeviceInUse:134,AudioPlaybackDeviceInUse:135,AudioDeviceInUse:136,AudioCaptureDeviceUnauthorized:137,AudioPlaybackDeviceUnauthorized:138,AudioDeviceUnauthorized:139,AudioCaptureDeviceTimeout:140,AudioPlaybackDeviceTimeout:141,AudioDeviceTimeout:142,AudioCaptureDeviceOther:253,AudioPlaybackDeviceOther:254,AudioDeviceOther:255}},1577:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(74587);function i(e){return{uid:e.uid,name:e.name,deviceType:Number(e.deviceType),isConnected:Boolean(e.connected),isSelected:Boolean(e.isSelected),isSystemDefault:Boolean(e.isDefault)}}function s(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSystemDefault&&e.deviceType===t))}function l(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSelected&&e.deviceType===t))}var n={parseDeviceInfo:i,getAvailableDevices:function(e,t){var a;return null!==(a=null==e?void 0:e.filter((e=>e.deviceType===t&&e.isConnected)))&&void 0!==a?a:[]},getSanitizedDevices:function(e){var t=null==e?void 0:e.map((e=>i(e))),a=null==t?void 0:t.filter((e=>e.deviceType!==r.AVDeviceType.NotIdentified&&e.isConnected));return null!=a?a:[]},deviceInfoComparator:function(e,t){return e.deviceType!==t.deviceType?e.deviceType-t.deviceType:e.isSystemDefault||t.isSystemDefault?e.isSystemDefault?-1:1:e.isConnected===t.isConnected?0:e.isConnected?-1:1},getSystemDefaultDevice:s,getSelectedDevice:l,getSelectedDeviceIdOrDefault:function(e,t){var a,r;return null!==(a=null===(r=l(e,t))||void 0===r?void 0:r.uid)&&void 0!==a?a:""},getSystemDefaultCamera:function(e){return s(e,r.AVDeviceType.Video)},getSystemDefaultMicrophone:function(e){return s(e,r.AVDeviceType.AudioInput)},getSystemDefaultSpeaker:function(e){return s(e,r.AVDeviceType.AudioOutput)},getDiff:function(e,t){return{added:t.filter((t=>!e.some((e=>e.uid===t.uid)))),removed:e.filter((e=>!t.some((t=>t.uid===e.uid))))}},DEFAULT_DEVICE_ID:""};t.default=n},85421:(e,t,a)=>{"use strict";var r=a(95318);t.y=function(e){e.setHandlers("msg_collection",{processMultipleMessages:({chatId:e,msgObjs:t,meta:a,chatMsgsCollection:r})=>l.default.processMultipleMessages(e,t,a,r),trigger({name:e,args:t}){l.default.trigger(e,t)},updateLastReceipt({wid:e,t}){l.default.updateLastReceipt(e,t)}}),e.setHandlers("contact_collection",{updatePushname({contactId:e,pushname:t}){var a=s.default.gadd(e);return a.pushname!==t&&(a.set({pushname:t}),!0)}}),e.setHandlers("chat_collection",{add:({things:e,options:t})=>i.default.add(e,t),trigger({name:e,args:t}){i.default.trigger(e,t)}}),e.setHandlers("status_v3_collection",{handleUpdate:({rawMsg:e,checksum:t,isMsgUpdate:a})=>o.default.handleUpdate(e,t,a)}),e.setHandlers("msg_info_collection",{updateInfo({id:e,from:t,to:a,ack:r,participant:i,t:s}){n.default.updateInfo(e,t,a,r,i,s)}})};var i=r(a(74798)),s=r(a(62899)),l=r(a(33048)),n=r(a(51321)),o=r(a(11818))},20244:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.trim().normalize("NFKD");if((0,s.numCodepoints)(t)>=i.default.FTS_MIN_CHARS)return!0;if(l.test(t))return!0;if(n.test(t))return!0;return!1};var i=r(a(75444)),s=a(96769),l=/(?!(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]))(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uFE0E\uFE0F]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/,n=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD81B[\uDFF0\uDFF1]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/},17329:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=r(a(65764)),l=a(85063),n=r(a(72765));class o extends i.Component{constructor(e){super(e),this.refreshBlob=()=>{var e=this.blob;if(!e)throw new Error("Cannot call refreshBlob when the blob does not exist.");var t=new Blob([e],{type:e.type}),a=window.URL.createObjectURL(t);this.state.url&&window.URL.revokeObjectURL(this.state.url),this.setState({url:a})};var t=e.mediaData.filehash,a=s.default.has(t);!a&&e.mediaData.mediaStage===l.MEDIA_DATA_STAGE.RESOLVED&&e.downloadMedia&&e.downloadMedia();var r=a?this.createURL(t):null;this.state={url:r}}componentDidUpdate(){var e=this.props.mediaData.filehash;s.default.has(e)&&!this.state.url&&this.setState({url:this.createURL(e)})}componentWillUnmount(){this.state.url&&this.revokeURL(this.state.url)}createURL(e){var t=s.default.get(e);if(!t)throw new Error("Cannot call createURL when the blob does not exist.");this.blob=t;var a=new Blob([t],{type:t.type});return window.URL.createObjectURL(a)}revokeURL(e){window.URL.revokeObjectURL(e)}render(){return this.state.url?this.props.children(this.state.url):this.props.placeholderRenderer()}}o.CONCERNS={mediaData:["filehash","mediaStage"]},o.displayName="AnimatedStickerUrlProvider";var d=(0,n.default)(o,o.CONCERNS);t.default=class extends d{constructor(...e){super(...e),this.refreshBlob=()=>{this.getComponent().refreshBlob()}}}},38146:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=r(a(65764)),l=a(85063),n=r(a(72765));class o extends i.Component{constructor(e){super(e),this.state={blob:s.default.get(this.props.mediaData.filehash)},this.state.blob||e.mediaData.mediaStage!==l.MEDIA_DATA_STAGE.RESOLVED||e.downloadMedia()}componentDidUpdate(){if(!this.state.blob){var{filehash:e}=this.props.mediaData;s.default.has(e)&&this.setState({blob:s.default.get(e)})}}render(){var{blob:e}=this.state;return e?this.props.render(e):this.props.renderPlaceholder()}}o.CONCERNS={mediaData:["filehash","mediaStage"]},o.displayName="MediaBlobProvider";var d=(0,n.default)(o,o.CONCERNS);t.default=d},89958:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(20580),n=r(a(65764)),o=a(85063),d=r(a(49062)),u=r(a(72765));class c extends s.Component{constructor(...e){super(...e),this.state={}}static getDerivedStateFromProps(e,t){var{renderProgressively:a}=e,{filehash:r,progressiveStage:i}=e.mediaData,s=t.stackedUrls||[],d=null!=i?(0,l.getProgressiveMediaCacheKey)(r,i):null;if(null!=d&&a){if(!e.renderProgressively)return null;if(d!==t.progressiveKey&&e.mediaData.mediaStage!==o.MEDIA_DATA_STAGE.RESOLVED){if(!n.default.has(d))return __LOG__(4,void 0,new Error,!0)`Blob missing for trimmed-filehash: ${r.slice(0,10)} with progressive stage: ${i} and mediaStage: ${e.mediaData.mediaStage}`,SEND_LOGS("missing-progressive-blob"),null;t.url&&t.progressiveKey&&n.default.decreaseUsageCount(t.progressiveKey),n.default.increaseUsageCount(d);var u=n.default.getOrCreateURL(d);return{filehash:r,url:u,progressiveKey:d,stackedUrls:[...s,u]}}if(n.default.has(r)){var c=n.default.getOrCreateURL(r);return t.url===c?null:(n.default.increaseUsageCount(r),t.progressiveKey&&n.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:c,progressiveKey:d,stackedUrls:[...s,c]})}return null}if(r!==t.filehash){var f;if(null===(f=e.downloadMedia)||void 0===f||f.call(e),t.url&&t.filehash&&n.default.decreaseUsageCount(t.filehash),n.default.has(r)){var h=n.default.getOrCreateURL(r);return t.url===h?null:(n.default.increaseUsageCount(r),t.progressiveKey&&n.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:h,progressiveKey:d,stackedUrls:[...s,h]})}return{filehash:r}}if(n.default.has(r)){var p=n.default.getOrCreateURL(r);return t.url===p?null:(n.default.increaseUsageCount(r),t.progressiveKey&&n.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:p,progressiveKey:d,stackedUrls:[...s,p]})}return null}componentWillUnmount(){this.state.url&&(this.props.mediaData.mediaStage===o.MEDIA_DATA_STAGE.RESOLVED?n.default.decreaseUsageCount(this.state.filehash):this.state.progressiveKey&&n.default.decreaseUsageCount(this.state.progressiveKey))}render(){var{url:e,stackedUrls:t}=this.state,{renderProgressively:a}=this.props;return e?a?s.default.createElement("div",{className:d.default.container},s.default.createElement("div",{className:d.default.child},this.props.placeholderRenderer()),t.map((e=>s.default.createElement("div",{className:d.default.child,key:e},this.props.children(e))))):this.props.children(e):this.props.placeholderRenderer()}}c.CONCERNS={mediaData:["filehash","mediaStage","progressiveStage"]},c.displayName="MediaUrlProvider";var f=(0,u.default)(c,c.CONCERNS);t.default=f},14823:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CoolOffPeriodKeys=t.NuxKeyTypes=void 0;r(a(72462));t.NuxKeyTypes={COOL_OFF_NUX:{INCOMPLETE_BUSINESS_PROFILE_BANNER:"incomplete_business_profile_banner",PRODUCT_CATALOG_BANNER:"product_catalog_banner",COLLECTIONS:"collections_banner",CART_INTERSTITIAL:"cart_interstitial"},VIEW_COUNT_NUX:{REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",SAFARI_LIMITED_SUPPORT:"safari_limited_support",MESSENGER_ROOM_DIALOG_NEW:"messenger_room_dialog_new",MESSENGER_ROOM_DIALOG_RETURNING:"messenger_room_dialog_returning",MESSENGER_ROOM_DIALOG_FROM_CHATLIST:"messenger_room_dialog_from_chatlist",MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN:"messenger_room_dialog_from_attach_dropdown",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",ARCHIVE:"archive"}};t.CoolOffPeriodKeys={DEFAULT:"default_cool_off_banners_key",CATALOG:"catalog_banners_key"}},25475:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resetCoolOffNuxDate=function(){Object.keys(o.CoolOffPeriodKeys).forEach((e=>{d._setUser(o.CoolOffPeriodKeys[e])}))},t.shouldShowNUX=function(e,t){return new c(e,void 0,t).shouldShow()},t.resetNuxCoolOff=function(e){d._setUser(`${e}_cool_off`)},t.default=void 0;var s=i(a(81109)),l=i(a(30381)),n=i(a(72462)),o=a(14823),d=r(a(29418)),u={COOL_OFF_DURATION_IN_DAYS:4,VIEWS_BEFORE_COOL_OFF_IN_DAYS:2,CLICKS_BEFORE_COOL_OFF:1,MAX_DISMISSES:1,MAX_CLICKS:2,MAX_VIEWS_IN_DAYS:4,COOL_OFF_START_STORAGE_KEY:o.CoolOffPeriodKeys.DEFAULT};class c{constructor(e,t,a){this.key=`${e}_cool_off`,this.config=(0,s.default)((0,s.default)({},u),a),this.nux=this._getNUXOptions(),this.coolOffData=this._getCoolOffData(),this.metricField=t}_isValidNuxOptions(e){return null!=e.clicks&&null!=e.dismisses&&null!=e.lastViewedDay&&null!=e.viewDaysBeforeCoolOff&&null!=e.totalViewDays}_getNUXOptions(){var e=d._getUser(this.key);return null!=e&&this._isValidNuxOptions(e)||(this._setNUXOptions({viewDaysBeforeCoolOff:0,totalViewDays:0,clicks:0,dismisses:0,lastViewedDay:(0,l.default)(0)}),e=d._getUser(this.key)),e.lastViewedDay=(0,l.default)(e.lastViewedDay),e}_getCoolOffData(){var e=d._getUser(this.config.COOL_OFF_START_STORAGE_KEY);return null!=e&&null!=e.startDate&&null!=e.duration||(this._setLastCoolOffStartDay((0,l.default)(0)),e=d._getUser(this.config.COOL_OFF_START_STORAGE_KEY)),e.startDate=(0,l.default)(e.startDate),e}_setLastCoolOffStartDay(e){d._setUser(this.config.COOL_OFF_START_STORAGE_KEY,{startDate:e,duration:this.config.COOL_OFF_DURATION_IN_DAYS})}_startNewCoolOff(e){this._setLastCoolOffStartDay(e),this.coolOffData={startDate:e,duration:this.config.COOL_OFF_DURATION_IN_DAYS}}_setNUXOptions(e){d._setUser(this.key,e)}_updateNUXOptions(e){this._setNUXOptions(Object.assign(this.nux,e))}_isTodayCoolOff(){var e=(0,l.default)().diff(this.coolOffData.startDate,"days",!0);return e>=0&&e<this.coolOffData.duration}_logEvent(e){this.metricField&&new n.default.BannerEvent({bannerType:this.metricField,bannerOperation:e}).commit()}shouldShow(){var{totalViewDays:e,dismisses:t,clicks:a}=this.nux,{MAX_VIEWS_IN_DAYS:r,MAX_DISMISSES:i,MAX_CLICKS:s}=this.config;return e<r&&t<i&&a<s&&!this._isTodayCoolOff()}show(){var{lastViewedDay:e,viewDaysBeforeCoolOff:t,totalViewDays:a}=this.nux,r=(0,l.default)();e.isSame(r,"day")||(a++,++t===this.config.VIEWS_BEFORE_COOL_OFF_IN_DAYS&&(t=0,this._startNewCoolOff((0,l.default)(r).add(1,"days"))),this._updateNUXOptions({viewDaysBeforeCoolOff:t,totalViewDays:a,lastViewedDay:r}),this._logEvent(n.default.BANNER_OPERATIONS.SHOWN))}click(){var e=this.nux.clicks+1;e===this.config.CLICKS_BEFORE_COOL_OFF&&this.startCoolOffToday(),this._updateNUXOptions({clicks:e}),this._logEvent(n.default.BANNER_OPERATIONS.CLICK)}dismiss(){this._updateNUXOptions({dismisses:this.nux.dismisses+1}),this._startNewCoolOff((0,l.default)()),this._logEvent(n.default.BANNER_OPERATIONS.DISMISS)}startCoolOffToday(){this._startNewCoolOff((0,l.default)())}}t.default=c},38786:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingSignalingMessage=function(e,t){var r=s.default.get(e.call_id);if(!r)return void __LOG__(3)`voip:voip_common_disabled: Received signaling msg type ${e.type} but could not find call for call ID`;switch(e.type){case l.TYPE.OFFER:null!=e.t&&(r.offerTime=e.t),r.isVideo=!!e.isVideoCall,r.setState(n.CALL_STATES.INCOMING_RING);break;case l.TYPE.TERMINATE:if(r.setState(n.CALL_STATES.ENDED),o.default.supportsFeature(o.default.F.MD_BACKEND))switch(t.payload[1].reason){case"timeout":null==d&&(d=a(62924).Z),d.generateMissedCallLog(e.call_creator,r.offerTime,r.isVideo,!1)}}};var s=i(a(57055)),l=r(a(95521)),n=a(22052),o=i(a(77188)),d=null},36743:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(97308),l=r(a(33766)),n=r(a(51115)),o=r(a(80162));function d(e,t){l.default.openModal(i.default.createElement(n.default,{title:t,okText:o.default.t(1941),onOK:()=>l.default.closeModal()},i.default.createElement("div",null,e)))}var u={openModal:d,openUnblockModal:function(e){l.default.openModal(i.default.createElement(n.default,{okText:o.default.t(1574),onOK:()=>{(0,s.unblockContact)(e).catch((()=>{})),l.default.closeModal()},cancelText:o.default.t(1768),onCancel:()=>{l.default.closeModal()}},o.default.t(1724)))},soundPortErrorModal:function(){d(o.default.t(1697),o.default.t(1698))},videoPortErrorModal:function(){var e=a(11385).default;l.default.openModal(i.default.createElement(n.default,{title:o.default.t(1700),okText:o.default.t(1483),onOK:()=>{l.default.closeModal(),l.default.openModal(i.default.createElement(e,null))},cancelText:o.default.t(1768),onCancel:()=>{l.default.closeModal()}},i.default.createElement("div",null,o.default.t(1699))))}};t.default=u},62924:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);t.Z=void 0;var s=i(a(67294)),l=i(a(86185)),n=i(a(57055)),o=i(a(33766)),d=i(a(11288)),u=i(a(62899)),c=i(a(14942)),f=i(a(80162)),h=r(a(47644)),p=r(a(48847)),m=i(a(64624)),_=i(a(36743)),v=a(22052),g=i(a(8745)),E=a(52152),S=i(a(77188)),C=i(a(75444)),y=a(26226),b=i(a(47540)),M=a(3419),T=i(a(68127));function I(e){return{callId:e.call_id,peerJid:e.peer_jid,initialPeerJid:e.initial_peer_jid,creatorJid:e.creator_jid,callerStatus:Boolean(e.caller_status),callActiveTime:{sec:e.call_active_time.sec,msec:e.call_active_time.msec},callDuration:e.call_duration,audioDuration:e.audio_duration,videoDuration:e.video_duration,canInviteNewParticipant:m.default.isGroupCallEnabled()&&Boolean(e.can_invite_new_participant),canSwitchAudioVideo:Boolean(e.can_switch_audio_video),isGroupCall:Boolean(e.is_group_call),participantCount:e.participant_count,participants:e.participants.filter((e=>null!=e.jid)).map((e=>{var t=(0,E.createUserWid)(e.jid.user,e.jid.server);return{wid:t.toString(),userJid:t.toString({legacy:!0}),deviceRawJid:e.device_raw_jid,isMuted:Boolean(e.is_muted),isSelf:Boolean(e.is_self),isInterrupted:Boolean(e.is_interrupted),isBackgrounded:Boolean(e.is_backgrounded),orderId:e.order_id,videoOrientation:e.video_orientation,videoRenderStarted:Boolean(e.video_render_started),videoState:e.video_state,state:e.state}})),videoCaptureStarted:Boolean(e.video_capture_started),videoPreviewStarted:Boolean(e.video_preview_started),videoEnabled:Boolean(e.video_enabled),videoEnabledAtCallStart:Boolean(e.video_enabled_at_call_start),rotateVideo:Boolean(e.rotate_video)}}function P(e){return!n.default.activeCall&&!e.isContactBlocked&&h.default.displayInfo===h.StreamInfo.NORMAL}function A(e){if(e)return n.default.get(e)}var N={parseCallInfo:I,canStartCall:P,canStartVideoCall:function(e){return P(e)&&l.default.isVideoAvailable},isParticipantRequestingVideoUpgrade:function(e,t){var a=A(e);return!!(a&&a.callInfo&&a.callInfo.participants.length)&&!!a.callInfo.participants.find((e=>e.isSelf===t&&e.videoState===v.VideoState.VideoStateUpgradeRequest))},updateCallWithCallInfo:function(e){var t=e&&A(e.call_id);e&&t&&(t.callInfo=I(e))},callOfferNackToast:function(e,t,a,r){var i=t.map((e=>{var t=u.default.get(e);return t?t.shortName||t.name||t.displayName:(0,g.default)(e)})).join(f.default.t(724)),l=null;switch(e){case 401:l=f.default.t(1720);break;case 404:l=f.default.t(1723,{callee:i});break;case 405:l=f.default.t(1718,{callee:i});break;case 460:case 406:l=a?f.default.t(1725,{callee:i}):f.default.t(1722,{callee:i});break;case 426:l=a?f.default.t(1725,{callee:i}):f.default.t(1721,{callee:i});break;case 427:l=m.default.isGroupCallEnabled()?f.default.t(1705,{callee:i,_plural:t.length}):a?f.default.t(1741):f.default.t(1717);break;case 461:l=S.default.supportsFeature(S.default.F.MD_BACKEND)?r?f.default.t(1703):f.default.t(1719,{callee:i}):a?f.default.t(1741):f.default.t(1717);break;default:l=a?f.default.t(1741):f.default.t(1717)}l&&o.default.openToast(s.default.createElement(p.default,{msg:l,id:(0,p.genId)()}))},getCallFromCallId:A,checkIfCanStartCall:function(e){var t;if(!e.isGroup&&!e.contact)return __LOG__(4,void 0,new Error)`voip:checkIfCanStartCall expected contact to be provided`,!1;var a=!0;if(h.default.displayInfo!==h.StreamInfo.NORMAL)switch(a=!1,h.default.displayInfo){case h.StreamInfo.RESUMING:case h.StreamInfo.TIMEOUT:_.default.openModal(f.default.t(1713),f.default.t(1714));break;case h.StreamInfo.OFFLINE:case h.StreamInfo.OPENING:case h.StreamInfo.CONNECTING:default:_.default.openModal(f.default.t(1711),f.default.t(1712))}else!e.isGroup&&(null===(t=e.contact)||void 0===t?void 0:t.isContactBlocked)?(a=!1,_.default.openUnblockModal(e.contact)):n.default.activeCall?(a=!1,_.default.openModal(f.default.t(1701))):l.default.isMicrophoneAvailable?l.default.isSpeakerAvailable?e.isVideo&&!l.default.isVideoAvailable&&(__LOG__(2)`voip:checkIfCanStartCall false due to camera not available`,a=!1,_.default.openModal(f.default.t(1707),f.default.t(1708))):(__LOG__(2)`voip:checkIfCanStartCall false due to speaker not available`,a=!1,_.default.openModal(f.default.t(1715),f.default.t(1716))):(__LOG__(2)`voip:checkIfCanStartCall false due to microphone not available`,a=!1,_.default.openModal(f.default.t(1709),f.default.t(1710)));return a},getGroupCallParticipantNameString:function(e,t){return e.length<=2?e.map((e=>t?e.shortName:e.name)).join(f.default.t(724)):e[0].name+" "+f.default.t(722)+f.default.t(1706,{count:e.length-1,_plural:e.length-1})},generateMissedCallLog:function(e,t,a,r){var i=(0,E.toUserWid)(e);if(S.default.supportsFeature(S.default.F.MD_BACKEND)){var s;s=r?a?"miss_group_video":"miss_group":a?"miss_video":"miss";var l={id:new b.default({remote:i,fromMe:!1,id:(0,T.default)()}),type:C.default.MSG_TYPE.CALL_LOG,subtype:s,from:i,t:null!=t?t:Date.now()/1e3,to:(0,y.assertGetMe)()};(0,M.handleSingleMsgMD)(i,l)}},isVoiceCallButtonVisible:function(e,t){return!!d.default.isVoipInitialized&&((null==t||!(t.isUser&&!m.default.isVoiceCallEnabled()||t.isGroup&&!m.default.isGroupCallEnabled()))&&(null==e||!e.isEnterprise&&!(0,c.default)(e.id.user)))}};t.Z=N},80549:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);t.j=void 0;var s=i(a(74798)),l=i(a(33766)),n=i(a(75444)),o=i(a(62899)),d=i(a(74357)),u=i(a(14090)),c=a(26226),f=i(a(72462)),h=i(a(33048)),p=a(87807),m=i(a(28252)),_=r(a(47644));function v(){return Math.floor(window.performance.now())}class g extends u.default{constructor(){super(),this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},window.performance&&window.performance.now&&((0,c.knowsPhone)()?this.listenToOnce(l.default,"logout",this.init):this.init())}init(){this.timings.startSync=_.default.lastSyncStart,this.listenTo(_.default,"change:mode",this.changeStreamMode),this.listenTo(s.default,n.default.COLLECTION_HAS_SYNCED,this.onChatSync),this.listenTo(o.default,n.default.COLLECTION_HAS_SYNCED,this.onContactSync),this.listenTo(h.default,n.default.COLLECTION_HAS_SYNCED,this.onMsgSync),this.listenTo(h.default,"handle:msg_history",this.onMsgHistory)}changeStreamMode(){_.default.mode===_.StreamMode.SYNCING&&(this.timings.startSync=v(),this.data.webcPersistentLoginEnabled=(0,c.getRememberMe)()),_.default.mode===_.StreamMode.MAIN&&(this.timings.endSync=v(),this.maybeLogToWam())}onChatSync(e){null!=e.timing?this.data.webcSyncChatT=e.timing:this.timings.chatSync=v(),this.data.webcSyncChatCount=e.count,this.data.webcSyncChatSize=e.binarySize,this.maybeLogToWam()}onMsgSync(e){e&&(this.timings.msgSync=v(),this.data.webcSyncMessageCount+=e.count,this.data.webcSyncMessageSize+=e.binarySize),this.maybeLogToWam()}onContactSync(e){null!=e.timing?this.data.webcSyncContactT=e.timing:this.timings.contactSync=v(),this.data.webcSyncContactCount=e.count,this.data.webcSyncContactSize=e.binarySize,this.maybeLogToWam()}onMsgHistory(e){this.data.webcSyncMessageSize+=e.binarySize,this.data.webcSyncMessageCount+=e.count,null!=this.timings.msgSync&&(this.timings.msgSync=v())}maybeLogToWam(){var{contactSync:e,msgSync:t,chatSync:a}=this.timings,r=null!=a&&Number.isFinite(a||this.data.webcSyncChatT),i=null!=e&&Number.isFinite(e||this.data.webcSyncContactT),s=Number.isFinite(t);r&&i&&s&&(this._commitPromise||(this._commitPromise=(0,d.default)().then((e=>this._commitEvent(e))).catch((()=>{__LOG__(3)`wam:Error comitting login event`})).finally((()=>this.reset()))))}_commitEvent(e){var{startSync:t,endSync:a,contactSync:r,msgSync:i,chatSync:s}=this.timings,l=m.default.initialDisplayDate;null!=l&&0!==l&&null!=t&&null!=a&&null!=i&&null!=s&&null!=r&&Number.isFinite(l)&&Number.isFinite(t)&&Number.isFinite(a)?(this.data.webcQrLoadT=l,this.data.webcQrCodes=m.default.get(),this.data.webcLoginT=t-l,this.data.webcSyncT=a-t,this.data.webcSyncMessageT=i-t,this.data.webcSyncChatT||(this.data.webcSyncChatT=s-t),this.data.webcSyncContactT||(this.data.webcSyncContactT=r-t),this.data.webcBrowserNetworkType=(0,p.getEffectiveNetworkType)(),e&&(this.data.webcBrowserStorageQuotaBytes=e.quota,this.data.webcBrowserStorageQuotaUsedBytes=e.usage),new f.default.WebcLogin(this.data).commit()):__LOG__(3)`One or more of the login timings was not logged: `}reset(){this.stopListening(),this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this._commitPromise=void 0,this.listenToOnce(l.default,"logout",this.init)}}t.j=()=>new g},26532:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(78840);t.default=class{constructor(e){this.ship=e=>{var t=this.bitmap;if(t){var a=Date.now();a>this.lastActiveInMS&&(this.bitmapLength=Math.min(64,Math.ceil(a/1e3-this.startTimeInSec)));var r={sessionId:this.sessionId,startTime:this.startTimeInSec,bitmap:t,bitmapLen:this.bitmapLength,sessionSeq:this.sequenceId,sessionCum:this.cumulativeBitsSet};(e||this.loggingCallback)(r),this.timer.cancel(),this.bitmap=null}},this.loggingCallback=e,this.timer=new r.ShiftTimer(this.ship),this._initSession(),this._initArray(Math.floor(Date.now()/1e3))}_initSession(){this.cumulativeBitsSet=0,this.sequenceId=-1,this.sessionId=Math.floor(2147483648*Math.random()).toString(36)}_initArray(e){this.startTimeInSec=e,this.lastActiveInMS=1e3*this.startTimeInSec,this.bitmap=new Int32Array(2),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1;this.timer.debounceAndCap(64e3,64e3)}_doUpdate(e){var t=e-this.startTimeInSec;this.bitmap&&(t<0||t>=64)&&this.ship(),this.bitmap?(this.bitmap[t>>5]|=1<<(31&t),this.bitmapLength=t+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=1e3*e):this._initArray(e)}update(e){e>=this.lastActiveInMS&&e-this.lastActiveInMS<1e3||this._doUpdate(Math.floor(e/1e3))}shipAndEndSession(e){this.ship(e),this._initSession()}}},14601:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=r(a(75444)),l=r(a(61361)),n=r(a(80896)),o=r(a(72462)),d=r(a(63227)),u=r(a(26532)),c=[{source:window,name:"focus"},{source:document,name:"wheel"},{source:document,name:"keydown"},{source:document,name:"mouseover"},{source:document,name:"mousemove"},{source:document,name:"click"},{source:document,name:"scroll"}];class f extends i.Component{constructor(...e){super(...e),this.lastInform=Date.now(),this.lastPageX=-1,this.lastPageY=-1,this.bitArray=null,this.endSession=()=>{this.bitArray&&this.bitArray.shipAndEndSession()},this.handleRestore=()=>{var e=this.bitArray;e?(this.lastInform=Date.now(),e.update(this.lastInform)):__LOG__(3)`Time Spent Logger not started`},this.handleEvent=e=>{var t=this.bitArray;if(t){if(e instanceof MouseEvent){if(e.pageX===this.lastPageX&&e.pageY===this.lastPageY&&"click"!==e.type)return;this.lastPageX=e.pageX,this.lastPageY=e.pageY}var a=Date.now(),r=a-this.lastInform;r>0?(this.lastInform=a,t.update(this.lastInform)):r<-5&&(this.lastInform=a)}},this.handleUnload=()=>{this.bitArray&&(this.bitArray.ship(this.stashLogs),this.bitArray=null)},this.shipLogs=e=>{var t=new o.default.UserActivity({userActivitySessionId:e.sessionId,userActivityStartTime:e.startTime,userActivityBitmapLen:e.bitmapLen,userActivityBitmapLow:e.bitmap[0],userActivitySessionSeq:e.sessionSeq,userActivitySessionCum:e.sessionCum});e.bitmapLen>32&&(t.userActivityBitmapHigh=e.bitmap[1]),t.commit()},this.stashLogs=e=>{for(var t=`${e.bitmap[0]}`,a=1;a<e.bitmap.length;++a)t+=`:${e.bitmap[a]}`;var r=`${e.sessionId}:${e.sessionSeq}:${e.sessionCum}:${e.startTime}:${e.bitmapLen}$${t}`;l.default.permanentStorage.setItem(s.default.KEY_TIME_SPENT_EVENT,r)}}componentDidMount(){var e=l.default.permanentStorage.getItem(s.default.KEY_TIME_SPENT_EVENT);e&&(this.parseAndShipStashed(e),l.default.permanentStorage.removeItem(s.default.KEY_TIME_SPENT_EVENT));var t=this.props.listeners;this.bitArray=new u.default(this.shipLogs);var a=!d.default||{passive:!0,capture:!0};t.add(window,"beforeunload",this.handleUnload);for(var r=0;r<c.length;++r){var{source:i,name:n}=c[r];t.add(i,n,this.handleEvent,a)}}componentWillUnmount(){this.bitArray&&(this.bitArray.ship(),this.bitArray=null)}parseAndShipStashed(e){var[t,a,...r]=e.split("$");if(!r.length&&a)if(5===(t=t.split(":")).length){a=new Int32Array(a.split(":").map((e=>Number(e))));var i={sessionId:t[0],sessionSeq:Number(t[1]),sessionCum:Number(t[2]),startTime:Number(t[3]),bitmapLen:Number(t[4]),bitmap:a};this.shipLogs(i)}else __LOG__(3)`Invalid stashed time spent event`;else __LOG__(3)`Invalid stashed time spent event`}render(){return null}}f.displayName="TimeSpentLogger";var h=(0,n.default)(f);t.default=h},28408:e=>{e.exports={Action:"keyboard_action",Event:"keyboard_event",Events:{LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out",ARCHIVE:"archived",MUTE:"muted",PIN:"pinned",READ:"read",READ_ONLY:"read_only",CHAT_KIND:"chat_kind",ZOOM:"zoom",LAUNCH:"launch",BATCH_RENDER:"batch_render"}}},99773:(e,t,a)=>{"use strict";t.Z=function(e){a(80549).j(),a(62132).yj();var t=a(28306).default,i=a(44563).default,s=a(85916).default,l=a(5794).default;t.supported&&i.on("change:tag",(e=>{var t=navigator.serviceWorker;t&&t.controller&&!e.tag&&l.request(t.controller,s.REMOVE_PP,e.id).catch((()=>{}))}));(0,a(11053).default)((0,r.getEmojiTypeFromPlatform)(e)),(0,a(73188).Z)();var n=a(28793);return{MainComponent:n.default,hasPending:n.hasPending,notificationBackend:a(13047),execApiCmd:a(74296).Z}};var r=a(8661)},40118:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,n.default)(e);switch(r.status){case n.AddToCartStatus.SUCCESS:!function(e,t){a=function(){var a=(0,s.default)((function*(){yield(0,c.default)(e.catalogWid.toString()),(0,u.logCartToastClick)(e.catalogWid.toString(),t)}));return function(){return a.apply(this,arguments)}}(),o.default.openToast(l.default.createElement(f.default,{action:{actionText:d.default.t(1312),onAction:()=>{a()}},duration:6e3,id:(0,f.genId)(),msg:d.default.t(1336)}));var a}(e,t),(0,u.logAddProductToCart)(e,t,r.newCount,a);break;case n.AddToCartStatus.QUANTITY_LIMIT_REACHED:o.default.openToast(l.default.createElement(f.default,{action:{onAction:()=>{},actionText:d.default.t(856),dismiss:!0,theme:"success"},duration:6e3,id:(0,f.genId)(),msg:d.default.t(445)}))}};var s=i(a(48926)),l=i(a(67294)),n=r(a(44178)),o=i(a(33766)),d=i(a(80162)),u=a(37463),c=i(a(13959)),f=r(a(48847))},70950:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{className:t,onClick:a}=e,r={className:(0,s.default)(t,n.default.addToCartIcon),name:"add_shopping_cart",title:o.default.t(1335)};if(null!=a)return l.default.createElement(d.default,(0,i.default)({},r,{"aria-label":o.default.t(1335),onClick:a}));return l.default.createElement(u.default,r)};var i=r(a(67154)),s=r(a(94184)),l=r(a(67294)),n=r(a(54502)),o=r(a(80162)),d=r(a(74512)),u=r(a(32885))},37463:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logAddProductToCart=function(e,t,a,r){var s=(0,l.getProductStatsInFetched)(e.catalogWid.toString(),r,e)||void 0,n=u(e.catalogWid.toString(),"ACTION_CART_ADD_PRODUCT",(0,i.default)((0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)),{},{quantity:a,collectionStats:s}));n&&n.commit()},t.logEditProduct=function(e,t,a){var r=u(e.catalogWid.toString(),"ACTION_CART_EDIT_PRODUCT",(0,i.default)((0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)),{},{quantity:a}));r&&r.commit()},t.logDeleteProduct=function(e,t){var a=u(e.catalogWid.toString(),"ACTION_CART_DELETE_PRODUCT",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.logCartAbandon=function(e,t){var a=u(e,"ACTION_CART_ABANDON",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.getOnCartClickWithLog=function(e,t,a){return()=>{e(),function(e,t){var a=u(e,"ACTION_CART_ICON_CLICK",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()}(t,a)}},t.logCartToastClick=function(e,t){var a=u(e,"ACTION_CART_SNACKBAR_CLICK",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()},t.logCartListImpression=function(e,t){var a=u(e,"ACTION_CART_LIST_IMPRESSION",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));a&&a.commit()};var i=r(a(81109)),s=r(a(6479)),l=a(20766),n=a(26226),o=r(a(72462)),d=a(38335);function u(e,t,a){var r=e===(0,n.getMeUser)().toString(),{bizPlatform:l,collectionStats:d}=a,u=(0,s.default)(a,["bizPlatform","collectionStats"]);return r&&void 0!==o.default.CATALOG_BIZ_ACTION[t]?new o.default.CatalogBiz((0,i.default)({catalogBizAction:o.default.CATALOG_BIZ_ACTION[t],collectionIndex:null==d?void 0:d.collectionIndex,productIndex:null==d?void 0:d.productIndex},u)):r||void 0===o.default.CATALOG_VIEW_ACTION[t]?void __LOG__(3)`getCartLogAction: unsupported log action - ${t}`:new o.default.CatalogView((0,i.default)({catalogViewAction:o.default.CATALOG_VIEW_ACTION[t],bizPlatform:l,collectionIndex:null==d?void 0:d.collectionIndex,productIndex:null==d?void 0:d.productIndex},u))}},80604:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var[e,t]=(0,s.useState)(0),a=()=>{var e=u.default.filter((e=>e.archive&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===f.default.MARKED_AS_UNREAD))).length;t(e)};(0,g.useListener)(u.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",a),(0,s.useEffect)((()=>{a()}),[]);var r=0!==e?s.default.createElement("div",{className:l.default.unreadCountWrapper},s.default.createElement(v.default,{count:e,transparentBg:!0})):null,i=s.default.createElement(h.FlexRow,{align:"center",justify:"center",className:l.default.archivedIcon},s.default.createElement(_.default,{name:"archived"}));return s.default.createElement(s.default.Fragment,null,s.default.createElement("button",{"data-tab":f.default.TAB_ORDERS.ARCHIVED_ENTRY_POINT,className:l.default.wrapper,onClick:()=>{new m.default.ChatFolderOpen({activityIndicatorCount:e,folderType:"Archive"}).commit(),c.default.openDrawerLeft(s.default.createElement(n.default,null))},"aria-label":p.default.t(237)},s.default.createElement(d.default,{image:i,primary:p.default.t(237),detail:r,theme:"archive-panel"})),s.default.createElement(o.default,null))};var s=i(a(67294)),l=r(a(19266)),n=r(a(19472)),o=r(a(94965)),d=r(a(74724)),u=r(a(74798)),c=r(a(33766)),f=r(a(75444)),h=a(57909),p=r(a(80162)),m=r(a(72462)),_=r(a(32885)),v=r(a(22415)),g=a(54890)},21893:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(78840),l=i(a(67294)),n=r(a(95754)),o=r(a(33766)),d=r(a(11288)),u=r(a(75444)),c=a(1886),f=a(84641),h=r(a(77188)),p=i(a(29742)),m=r(a(80896)),_=r(a(72462)),v=r(a(70372)),g=r(a(2724)),E=r(a(25471)),S=r(a(1973)),C=r(a(43232)),y=r(a(72765)),b=i(a(47644)),M=r(a(7170)),T=r(a(89848)),I=r(a(4328));class P extends l.PureComponent{constructor(e){var t;super(e),this._showBatteryTimer=new s.ShiftTimer((()=>this._batteryUpdate(!1))),this._onDismissLowBatteryWarning=()=>{var e=this.state.lowBatteryWarning;e>0&&this.setState({lowBatteryWarning:-e})},this._setShowButterBarTimer=new s.ShiftTimer((e=>{this.props.setShowButterBar&&this.props.setShowButterBar(e)})),this._showNotifyTimer=new s.ShiftTimer((e=>{this.setState({showNotify:e})})),this._onShowNotify=()=>{this._showNotifyTimer.onOrBefore(0,!1)},this._onShowNotifyDelay=()=>{this._showNotifyTimer.onOrBefore(u.default.NOTIFICATION_PROMPT_DELAY,!0),this._setShowButterBarTimer.onOrBefore(0,!0)},this._onRequestPermissions=()=>{o.default.openModal(l.default.createElement(p.default,{messaging:p.Messaging.NOTIFICATIONS,onConfirm:N,onCancel:O,type:p.default.TYPE.GUIDE_ALLOW})),window.Notification.requestPermission((e=>{o.default.closeModal(),this.setState({notifyPermission:e})}))},this._shouldShowBanner=()=>h.default.supportsFeature(h.default.F.USER_NOTICE)&&g.default.shouldShowButterBar&&null!=g.default.noticeId&&null!=g.default.banner&&!1===g.default.blocking,this._handleNoticeBannerChange=()=>{this._shouldShowBanner()&&(this.state.bannerDisplayed||(new _.default.UserNotice({userNoticeId:g.default.noticeId,userNoticeContentVersion:g.default.policyVersion,userNoticeEvent:_.default.USER_NOTICE_EVENT.BANNER_APPEAR}).commit(),this.setState({bannerDisplayed:!0})))},this.handleNoticeIdChange=()=>{this.setState({bannerDisplayed:!1})},this._onDismissNotice=()=>{g.default.dismissButterBarNotice()};var a=d.default.battery<u.default.BATTERY_LOW_THRESHOLD_1?d.default.battery<u.default.BATTERY_LOW_THRESHOLD_2?2:1:0;this.state={lowBatteryWarning:d.default.plugged?0:a,notifyPermission:null===(t=window.Notification)||void 0===t?void 0:t.permission,showNotify:!1,bannerDisplayed:!1};var r=()=>{this._batteryUpdate(!0)};e.listeners.add(d.default,"change:plugged",r),e.listeners.add(d.default,"change:battery",r),e.listeners.add(g.default,"change:noticeId",this.handleNoticeIdChange),e.listeners.add(g.default,"change:banner change:blocking",this._handleNoticeBannerChange)}componentWillUnmount(){this._showNotifyTimer.cancel(),this._showBatteryTimer.cancel(),this._setShowButterBarTimer.cancel()}_batteryUpdate(e){var t=this.state.lowBatteryWarning;d.default.plugged||d.default.battery>u.default.BATTERY_LOW_THRESHOLD_1?0!==t&&this.setState({lowBatteryWarning:0}):d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_2?-2!==t&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):2!==t&&this.setState({lowBatteryWarning:2})):t>-1&&d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_1&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):1!==t&&this.setState({lowBatteryWarning:1}))}_updateShowButterBarState(){this.props.setShowButterBar&&this.props.setShowButterBar(this.state.showNotify||this.state.bannerDisplayed)}componentDidMount(){this._updateShowButterBarState()}componentDidUpdate(){this._updateShowButterBarState()}render(){return h.default.supportsFeature(h.default.F.MD_BACKEND)&&(b.default.displayInfo===b.StreamInfo.RESUMING||b.default.displayInfo===b.StreamInfo.TIMEOUT||this.state.lowBatteryWarning>0)?null:l.default.createElement(I.default,{transitionName:"butterbar",className:n.default.container},null,l.default.createElement(E.default,{shouldShow:this._shouldShowBanner(),banner:g.default.banner,theme:this.context.theme,onDismissNotice:0===C.default.greenAlertBannerDuration?null:this._onDismissNotice}),l.default.createElement(S.default,{displayInfo:b.default.displayInfo,needsUpdate:b.default.needsUpdate,needsManualDownload:!1,lowBatteryWarning:this.state.lowBatteryWarning,showNotify:this.state.showNotify,isMuted:this.props.mute.isMuted,notifyPermission:this.state.notifyPermission,onShowNotify:this._onShowNotify,onShowNotifyDelay:this._onShowNotifyDelay,onRequestPermissions:this._onRequestPermissions,onDismissLowBatteryWarning:this._onDismissLowBatteryWarning}))}}P.CONCERNS={stream:["displayInfo","needsUpdate"],notice:["noticeId","blocking","banner","shouldShowButterBar"],mute:["isMuted"]},P.contextType=M.default,P.displayName="ButterBarClass";var A=(0,m.default)((0,y.default)(P,P.CONCERNS));function N(){o.default.closeModal()}function O(){switch(T.default.browser){case u.default.BROWSER_TYPE.CHROME:return(0,c.openExternalLink)((0,f.getNotificationChromeFaqUrl)());case u.default.BROWSER_TYPE.FIREFOX:return(0,c.openExternalLink)((0,f.getNotificationFirefoxFaqUrl)());case u.default.BROWSER_TYPE.SAFARI:return(0,c.openExternalLink)((0,f.getNotificationSafariFaqUrl)());case u.default.BROWSER_TYPE.OPERA:return(0,c.openExternalLink)((0,f.getNotificationOperaFaqUrl)());case u.default.BROWSER_TYPE.EDGE:return(0,c.openExternalLink)((0,f.getNotificationEdgeFaqUrl)());default:return(0,c.openExternalLink)((0,f.getNotificationChromeFaqUrl)())}}t.default=({setShowButterBar:e})=>l.default.createElement(A,{stream:b.default,notice:g.default,mute:v.default.globalMute(),setShowButterBar:e})},38812:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement("span",{className:(0,i.default)({[l.default.block]:!e.inline})},s.default.createElement("span",{className:l.default.actionText,onClick:e.action},e.children),s.default.createElement(n.default,{className:l.default.chevron,directional:!0,name:"chevron-right-text"}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(40184)),n=r(a(32885))},40461:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{action:a=null,onDismiss:r,type:h}=e,p=(0,i.default)(l.default.butterbar,{[l.default.action]:a,[l.default.computer]:"computer"===h,[l.default.phone]:"phone"===h,[l.default.notification]:"notification"===h,[l.default.battery]:"battery"===h,[l.default.update]:"update"===h,[l.default.notice]:"notice"===h&&!n.default.isSMB,[l.default.noticeSmb]:"notice"===h&&n.default.isSMB,[l.default.fatal]:"fatal"===h,[l.default.nuxGreen]:"nuxGreen"===h,[l.default.nuxBlue]:"nuxBlue"===h}),m={computer:"alert-computer",phone:"alert-phone",notification:"alert-notification",battery:"alert-battery",update:"alert-update",notice:"alert-notice",fatal:"alert",nuxGreen:"business-description",nuxBlue:"collections_folder"},_=r?s.default.createElement("div",{className:l.default.controls},s.default.createElement(c.default,{className:l.default.controlsIcon,"aria-label":u.default.t(1779),name:"x",onClick:r})):null,v=e.title?s.default.createElement("div",{className:l.default.title},e.title):null,g=s.default.createElement(f.default,{name:m[e.type],"aria-label":e.iconDescription}),E=e.iconSvg&&(0,o.sanitizeNoticeSVG)(e.iconSvg),S=E?s.default.createElement("span",{"aria-label":e.iconDescription,dangerouslySetInnerHTML:{__html:E}}):g;switch(e.type){case"notice":t=s.default.createElement(d.FlexRow,{className:l.default.noticeSvgWrapper,align:"center",justify:"center"},S);break;case"fatal":t=s.default.createElement(d.FlexRow,{className:l.default.fatalSvgWrapper,align:"center",justify:"center"},s.default.createElement(f.default,{name:m[e.type]}));break;case"nuxGreen":t=s.default.createElement(d.FlexRow,{className:l.default.nuxGreenSvgWrapper,align:"center",justify:"center"},s.default.createElement(f.default,{name:m[e.type]}));break;case"nuxBlue":t=s.default.createElement(d.FlexRow,{className:l.default.nuxBlueSvgWrapper,align:"center",justify:"center"},s.default.createElement(f.default,{name:m[e.type]}));break;default:t=s.default.createElement(f.default,{name:m[e.type]})}return s.default.createElement("div",{className:l.default.wrapper},s.default.createElement("div",{className:p,onClick:a},s.default.createElement("div",{className:l.default.icon},t),s.default.createElement("div",{className:l.default.body},v,e.text?"notice"===e.type?s.default.createElement("div",{dangerouslySetInnerHTML:{__html:(0,o.sanitizeNoticeText)(e.text)},className:l.default.text}):s.default.createElement("div",{className:l.default.text},e.text):null),_))};var i=r(a(94184)),s=r(a(67294)),l=r(a(56642)),n=r(a(11288)),o=a(89852),d=a(57909),u=r(a(80162)),c=r(a(74512)),f=r(a(32885))},25471:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({shouldShow:e,banner:t,theme:a,onDismissNotice:r}){if(!e)return null;if(!(null==t?void 0:t.text))return null;var l,{iconDescription:n,text:o,iconSvg:d}=t;d&&(l="light"===a?d.light:d.dark);return i.default.createElement(s.default,{type:"notice",key:"noticebbar",text:o,iconSvg:l,iconDescription:null!=n?n:"",onDismiss:r})};var i=r(a(67294)),s=r(a(40461))},76281:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(78840),l=i(a(67294)),n=r(a(38812)),o=r(a(40461)),d=r(a(80162)),u=r(a(13353));class c extends l.PureComponent{constructor(...e){super(...e),this.state={allowReconnect:!0},this.reconnect=()=>{u.default.poke(),this.setState({allowReconnect:!1}),this._reconnectTimeoutTimer.onOrAfter(3e3)},this._reconnectTimeoutTimer=new s.ShiftTimer((()=>{this.setState({allowReconnect:!0})}))}componentWillUnmount(){this._reconnectTimeoutTimer.cancel()}render(){var e,t;return this.state.allowReconnect?(e=l.default.createElement(l.default.Fragment,null,`${d.default.t(1057)} `,l.default.createElement(n.default,{action:this.reconnect},d.default.t(1381))),t=d.default.t(601)):(e=null,t=d.default.t(623)),l.default.createElement(o.default,{type:"computer",title:t,text:e})}}t.default=c,c.displayName="Offline"},1973:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({displayInfo:e,needsUpdate:t,needsManualDownload:a,lowBatteryWarning:r,showNotify:o,isMuted:d,notifyPermission:p,onShowNotify:v,onShowNotifyDelay:g,onRequestPermissions:E,onDismissLowBatteryWarning:S}){var C=null;switch(e){case h.StreamInfo.OFFLINE:C=i.default.createElement(c.default,{key:"bbar"});break;case h.StreamInfo.OPENING:case h.StreamInfo.CONNECTING:C=i.default.createElement(f.default,{key:"bbar"});break;case h.StreamInfo.NORMAL:break;case h.StreamInfo.RESUMING:case h.StreamInfo.TIMEOUT:var y=i.default.createElement(i.default.Fragment,null,u.default.t(1058)," ",i.default.createElement(s.default,{action:_},u.default.t(1002)));C=i.default.createElement(l.default,{type:"phone",key:"bbar",title:u.default.t(1325),text:y})}!C&&r>0&&(C=i.default.createElement(l.default,{type:"battery",key:"bbar",title:u.default.t(1323),text:u.default.t(539),dismissable:!0,onDismiss:S}));if(!C&&t){var b=i.default.createElement(s.default,null,u.default.t(560));C=i.default.createElement(l.default,{type:"update",key:"bbar",title:u.default.t(1599),text:b,action:m})}if(null==C&&window.Notification&&p===n.default.PERMISSION_DEFAULT&&!d)if(o){var M=i.default.createElement(s.default,null,u.default.t(721));C=i.default.createElement(l.default,{type:"notification",key:"bbar",title:u.default.t(833),text:M,action:E})}else g();else o&&v();return C};var i=r(a(67294)),s=r(a(38812)),l=r(a(40461)),n=r(a(75444)),o=a(1886),d=a(84641),u=r(a(80162)),c=r(a(76281)),f=r(a(53319)),h=a(47644),p=r(a(61312));function m(){p.default.restart()}function _(){(0,o.openExternalLink)((0,d.getCannotConnectFaqUrl)())}},53319:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(78840),l=i(a(30381)),n=r(a(67294)),o=i(a(38812)),d=i(a(40461)),u=i(a(80162)),c=i(a(80896)),f=r(a(47644)),h=i(a(13353));class p extends n.Component{constructor(...e){super(...e),this.state={takingTooLong:!1,didShowSubtitle:!1},this._timeoutTimer=new s.ShiftTimer((()=>{this.setState({takingTooLong:!0,didShowSubtitle:!0})})),this.handleProgress=()=>{this._rerenderTimer.cancel(),this._timeoutTimer.onOrBefore(3e3),this.setState({takingTooLong:!1})},this._rerenderTimer=new s.ShiftTimer((()=>{this.forceUpdate()})),this.retry=()=>{h.default.poke(),this.handleProgress()}}componentDidMount(){this.props.listeners.add(h.default,"change:state",this.handleProgress),this.props.listeners.add(h.default,"change:retryTimestamp",this.handleProgress),this._timeoutTimer.onOrBefore(3e3)}componentWillUnmount(){this._timeoutTimer.cancel(),this._rerenderTimer.cancel()}render(){var e,t;if(f.default.displayInfo===f.StreamInfo.OPENING)e=u.default.t(622);else{if(f.default.displayInfo!==f.StreamInfo.CONNECTING)return null;e=u.default.t(623)}if(this.state.takingTooLong){this._rerenderTimer.onOrAfter(1e3);var a=h.default.retryTimestamp-Date.now();if(isNaN(a)||a<1)a=u.default.t(1422),setTimeout((()=>{h.default.poke()}),0);else if(a<6e4){var r=Math.ceil(a/1e3);a=u.default.t(1424,{number:r,_plural:r})}else a=u.default.t(1423,{duration:l.default.duration(a).humanize()});t=n.default.createElement(n.default.Fragment,null,a," ",n.default.createElement(o.default,{action:this.retry},u.default.t(1420)))}else t=this.state.didShowSubtitle?n.default.createElement("span",null,u.default.t(1422)):null;return n.default.createElement(d.default,{type:"computer",title:e,text:t})}}p.displayName="ResumeClass";var m=(0,c.default)(p);t.default=m},6448:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=i(a(63337)),n=r(a(67294)),o=i(a(55847)),d=i(a(25433)),u=i(a(74724)),c=i(a(20923)),f=i(a(9908)),h=i(a(62886)),p=a(99375),m=i(a(2381)),_=i(a(34015)),v=i(a(80162)),g=i(a(69507)),E=i(a(32885)),S=i(a(4328));class C extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1,contextMenu:!1,forceContextMenu:!1},this._setRefContextMenu=e=>{this._refContextMenu=e},this._setRefCellFrameDiv=e=>{this._refCellFrameDiv=e},this.getCellFrameDivRef=()=>this._refCellFrameDiv,this.indicateFocus=()=>{f.default.maybeIndicateFocus(this._refCellFrameDiv,d.default.focusAnimation)},this._handleMenuMouseDown=e=>{e.stopPropagation()},this._handleMenuClick=e=>{e.stopPropagation();var{contextEnabled:t,onContext:a}=this.props,{contextMenu:r}=this.state;(t()||r)&&(e.preventDefault(),a&&a({anchor:e.target}))},this._handleKeyboardActivation=e=>{if((0,m.default)(e)){e.stopPropagation();var{contextEnabled:t,onContext:a}=this.props,{contextMenu:r}=this.state;if(!t()&&!r)return;a&&a({anchor:this._refContextMenu})}},this.onContextMenu=e=>{var{contextEnabled:t,onContext:a}=this.props;t()&&(e.stopPropagation(),e.preventDefault(),a&&a({event:e}))},this.openContextMenu=()=>{this.props.contextEnabled()&&this.setState({contextMenu:!0},(()=>{if(!this._refContextMenu)throw new Error("Context ref not set");var e=new MouseEvent("mousedown",{bubbles:!0});(0,l.default)(this._refContextMenu,"this._refContextMenu").dispatchEvent(e)}))},this.focusOnContextMenuButton=()=>{(this._refContextMenu||this.props.contextEnabled())&&h.default.focus(this._refContextMenu)},this.mouseOver=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this._onFocusContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.removeAttribute("aria-hidden")},this._onBlurContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.setAttribute("aria-hidden","true")}}static getDerivedStateFromProps(e,t){return t.forceContextMenu&&t.contextMenu&&!e.contextMenu?{contextMenu:!1,forceContextMenu:e.contextMenu}:{forceContextMenu:e.contextMenu}}isKeyboardUser(){return this.context}render(){var e=this.state.contextMenu,t=this.isKeyboardUser()&&this.props.active&&this.props.contextEnabled(),a=e||this.state.hover||t,r=(0,s.default)(this.props.className,{hover:a}),i="string"==typeof this.props.primary?n.default.createElement(c.default,{text:this.props.primary,direction:"auto",formatters:p.Configuration.Search({terms:this.props.searchText?[this.props.searchText]:[]}),titlify:!0,ellipsify:!0}):this.props.primary,l=null,f=null;if(null!=this.props.pendingAction&&this.props.pendingAction>0)f=n.default.createElement("div",{className:d.default.btnContext},n.default.createElement(g.default,{size:18,stroke:6,color:"highlight"}));else if(a){var h=(0,s.default)(d.default.btnContext,{[d.default.product]:"product"===this.props.theme});l=n.default.createElement("button",{"data-a8n":o.default.key("context-btn"),className:h,key:"icon-context",ref:this._setRefContextMenu,onMouseDown:this._handleMenuMouseDown,onClick:this._handleMenuClick,"aria-label":v.default.t(6),onKeyDown:this._handleKeyboardActivation,onFocus:this._onFocusContextMenuButton,onBlur:this._onBlurContextMenuButton,"aria-hidden":!0},n.default.createElement(E.default,{name:"down"}))}var m,_,C=n.default.createElement(S.default,{transitionName:"fade"},f),y=n.default.createElement(S.default,{transitionName:"pop-fast-chat"},a?l:null);return null!=this.props.secondary?(m=this.props.primaryDetail,_=[n.default.createElement(n.default.Fragment,{key:"prop"},this.props.secondaryDetail),n.default.createElement(n.default.Fragment,{key:"spinner"},C),n.default.createElement(n.default.Fragment,{key:"button"},y)]):m=[n.default.createElement(n.default.Fragment,{key:"prop"},this.props.primaryDetail),n.default.createElement(n.default.Fragment,{key:"spinner"},C),n.default.createElement(n.default.Fragment,{key:"button"},y)],n.default.createElement(u.default,{setDivRef:this._setRefCellFrameDiv,image:this.props.image,customImage:this.props.customImage,className:r,unread:this.props.unread,active:this.props.active,idle:this.props.idle,checkbox:this.props.checkbox,isMuted:this.props.isMuted,dragging:this.props.dragging,theme:this.props.theme,primary:i,primaryDetail:m,secondary:this.props.secondary,secondaryDetail:_,detail:this.props.detail,onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onContextMenu:this.props.contextEnabled()?this.onContextMenu:null,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null})}}t.default=C,C.contextType=_.default,C.displayName="Cell"},24307:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Mode=void 0;var s=a(24788),l=i(a(67294)),n=a(47383),o=r(a(12666)),d=r(a(6448)),u=r(a(97066)),c=r(a(74798)),f=r(a(80151)),h=r(a(33766)),p=r(a(51115)),m=i(a(11288)),_=r(a(75444)),v=a(4457),g=r(a(69027)),E=r(a(58218)),S=r(a(17367)),C=a(89852),y=r(a(7970)),b=a(54438),M=a(15330),T=i(a(12536)),I=r(a(9908)),P=r(a(62886)),A=r(a(77188)),N=a(34605),O=r(a(8670)),D=r(a(84891)),w=r(a(35001)),R=r(a(69515)),k=a(75941),L=a(29989),x=r(a(80162)),F=r(a(80896)),B=r(a(58018)),G=r(a(29961)),U=r(a(72462)),j=r(a(26106)),V=r(a(39148)),H=r(a(28169)),W=r(a(93083)),Y=a(87454),K=r(a(19826)),q=r(a(72765)),z=a(6578),$=r(a(47809)),Q=r(a(48849)),X=r(a(26144)),J=r(a(11918)),Z=r(a(75919)),ee=r(a(53680)),te={LAST:"LAST",INFO:"INFO"};t.Mode=te;class ae extends l.PureComponent{static getDerivedStateFromProps(e,t){var a={},r=e.active&&e.active.value instanceof u.default&&ee.default.equals(e.active.value.id,e.chat.id);e.active&&e.active.value instanceof ee.default&&ee.default.isGroup(e.active.value)&&(r=ee.default.equals(e.active.value,e.chat.id)),t.active!==r&&(a.active=r);var i=e.searchQuery?e.searchQuery.trimmed:"";t.searchText!==i&&(a.searchText=i);var s=e.chat.id;return t.chatId!==s&&(a.chatId=s,a.unreadCount=e.chat.optimisticUnreadCount),a}constructor(e){super(e),this._hoverCounter=0,this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,dragging:!1,searchText:"",contextMenu:null,chatId:null,unreadCount:0},this._setUnreadCount=()=>{var e=this.props.chat.optimisticUnreadCount;e!==this.state.unreadCount&&this.setState({unreadCount:e})},this._prefetchGroupMetadata=()=>{var{chat:e}=this.props;A.default.supportsFeature(A.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&O.default.find(e.id).catch((0,s.filteredCatch)([b.WebdDrop,T.ProtoVersionUndefined],(()=>{})))},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)`Chat: prop searchQuery is undefined`},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(P.default.focus(a),t&&(0,C.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.contextEnabled=()=>{var{noContext:e}=this.props;return!e},this.editLabel=()=>{var{selectableState:e,multiSelection:t}=this.props;!this.props.searchQuery||this.props.searchQuery.isEmptyQuery?e&&t&&(e.setSelectable(!0),t.setVal((0,z.unproxy)(this.props.chat))):this.addOrRemoveLabelOnSelected()},this.addOrRemoveLabelOnSelected=()=>{var e=[(0,z.unproxy)(this.props.chat)];h.default.openModal(l.default.createElement(B.default,{modelsToUpdate:e}))},this.onMenu=e=>{if(this.state.contextMenu)this.setState({contextMenu:null});else{var t=this.props.chat,a=[];t.canArchive()&&a.push(l.default.createElement(o.default,{key:"archive",onArchive:this.onArchive,chat:(0,z.unproxy)(t)})),t.mute.canMute()&&(t.archive&&this.props.hideMuteOption||a.push(l.default.createElement(j.default,{key:"mute",onMute:this.onMute,mute:t.mute,chat:t,settings:K.default}))),a.push(l.default.createElement(E.default,{key:"delete",onDeleteOrExit:this.onDeleteOrExit,chat:(0,z.unproxy)(t)})),m.default.platform===m.PLATFORMS.IPHONE&&t.isBroadcast||!t.canPin()||a.push(l.default.createElement(W.default,{key:"pin",onPinOrUnpin:this._onPinOrUnpin,chat:t})),(0,N.canEditLabelAssociation)()&&a.push(l.default.createElement(y.default,{a8n:"mi-edit-label",action:this.editLabel,key:"EditLabel"},x.default.t(710))),t.canUnread&&a.push(l.default.createElement(G.default,{key:"mark_unread",onMarkUnread:this.onMarkUnread,chat:(0,z.unproxy)(t)})),e.event&&e.event.persist(),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})}},this._removeContext=()=>{this.setState({contextMenu:null})},this.onMute=e=>{h.default.muteChat((0,z.unproxy)(this.props.chat),e)},this.onArchive=e=>{h.default.archiveChat((0,z.unproxy)(this.props.chat),e)},this.onDeleteOrExit=()=>{h.default.deleteOrExitChat((0,z.unproxy)(this.props.chat),this)},this._onPinOrUnpin=e=>{!e||c.default.filter((e=>e.pin)).length<3?h.default.pinChat((0,z.unproxy)(this.props.chat),e):h.default.openModal(l.default.createElement(p.default,{onOK:()=>h.default.closeModal(),okText:x.default.t(1941)},x.default.t(85)))},this.onMarkUnread=e=>{h.default.markChatUnread((0,z.unproxy)(this.props.chat),e),e||this._clearUnreadMentions()},this.onClick=e=>{var{onClick:t,chat:a}=this.props;t&&t(e,(0,z.unproxy)(a))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),I.default.shouldIndicateFocus(),this.onClick(e)},this.onDragEnter=e=>{this.props.chat.canSend&&(new g.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(0===this._hoverCounter&&this.setState({dragging:!0}),this._hoverCounter+=1))},this.onDragLeave=e=>{this.props.chat.canSend&&(new g.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(this._hoverCounter-=1,0===this._hoverCounter&&this.setState({dragging:!1})))},this.onDrop=e=>{var{chat:t}=this.props;if(t.canSend){this.setState({dragging:!1});var a=new g.default(e.dataTransfer);(a.hasType(_.default.DRAG_TYPE_FILE)||a.hasType("text/uri-list")||a.hasType("text/html"))&&(0,M.getFiles)(e).then((e=>{h.default.openChatFromUnread(t).then((a=>{a&&h.default.attachMediaDrawer({chat:t,attachments:e.map((e=>({file:e}))),fileOrigin:U.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY})}))})).catch((0,s.filteredCatch)(T.MediaDragDropError,(e=>{h.default.openChatFromUnread(t).then((a=>{a&&e.src&&h.default.pasteChatTextInput(t,e.src)}))})))}},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()},this._toggleFocusInContact=()=>{this._hotKeysRef&&this._hotKeysRef!==document.activeElement?P.default.focus(this._hotKeysRef):this._cellRef&&this._cellRef.focusOnContextMenuButton()},this._handlers={enter:this.onKeyboardActivation,space:this.onKeyboardActivation,right:this._toggleFocusInContact,left:this._toggleFocusInContact},this._throttledSetUnreadCount=this.props.throttle(this._setUnreadCount,0,{leading:!1,tailing:!0})}componentDidMount(){var{chat:e}=this.props;this.initListeners(this.props),A.default.supportsFeature(A.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&k.UIBusyTasks.enqueue(this._prefetchGroupMetadata)}componentDidUpdate(e){var{chat:t}=this.props;t!==e.chat&&A.default.supportsFeature(A.default.F.GROUPS_V_3)&&t.isGroup&&t.groupMetadata&&t.groupMetadata.stale&&k.UIBusyTasks.enqueue(this._prefetchGroupMetadata),t.optimisticUnreadCount!==this.state.unreadCount&&this._throttledSetUnreadCount(),this.initListeners(this.props,e)}_clearUnreadMentions(){var e,{chat:t}=this.props;A.default.isGroupCatchUpEnabled()&&t.isGroup&&(null===(e=t.groupMetadata)||void 0===e||e.unreadMentionMetadata.reset())}initListeners(e,t){var{listeners:a,active:r,chat:i,searchQuery:s,frequent:l}=e;t&&t.searchQuery&&t.searchQuery!==s&&a.remove(t.searchQuery,Y.SEARCH_EVENT,this.onSearch),!s||t&&s===t.searchQuery||a.add(s,Y.SEARCH_EVENT,this.onSearch);var n=t&&t.chat.id;if(!i.id.equals(n)&&(t&&t.active&&a.remove(t.active,t.chat.id.toString(),this.onActiveChange),r)){var o=(l?v.FREQUENT_PREFIX:"")+i.id.toString();a.add(r,o,this.onActiveChange)}}render(){var e,t,{chat:a,mode:r,secondary:i,theme:s,filterPreset:o,showEphemeralIcon:u,hideArchivedIcon:c,hideMuteIcon:h}=this.props,{searchText:p,active:m,dragging:_,contextMenu:v,unreadCount:g}=this.state;switch(r){case te.LAST:e=l.default.createElement(Q.default,{chat:a}),null==i&&(i=l.default.createElement(f.default,{chat:a}),t=l.default.createElement(R.default,{chat:a,mute:a.mute,unreadCount:g,hideArchivedIcon:!0===c,hideMuteIcon:!0===h,settings:K.default}));break;case te.INFO:null==i&&(i=a.isGroup||a.isBroadcast?l.default.createElement(H.default,{groupMetadata:a.groupMetadata}):l.default.createElement(Z.default,{contact:a.contact,presence:a.presence,chatstate:a.presence.chatstate,location:"list"}))}var E,C=l.default.createElement(S.default,{id:a.id,alt:"",showEphemeralIcon:u,waitIdle:!0}),y=this.props.mouseDownAsClick;v&&(E=l.default.createElement(X.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this._removeContext},l.default.createElement(J.default,{contextMenu:v})));var b=l.default.createElement(V.default,{chat:a,firstLabel:null==o?void 0:o.label,highlightText:p,showLabel:!0,titlify:!0,ellipsify:!0}),M=null,T=a.getEphemeralSetting();return null!=T&&0!==T&&(M=l.default.createElement(n.InvisibleLabel,null,(0,L.getDisappearingMessageExplanationString)(T))),l.default.createElement(D.default.Provider,{value:a.groupMetadata},l.default.createElement(w.default,{onRef:this._setHotKeysRef,handlers:this._handlers,onFocus:this.indicateFocus,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,"aria-selected":m,tabIndex:m?0:-1,role:"row"},l.default.createElement(d.default,{id:a.id,ref:this._setCellRef,theme:s,contextEnabled:this.contextEnabled,pendingAction:a.pendingAction,contextMenu:!!v,unread:0!==g,active:!!m,isMuted:!1,dragging:!!_,image:C,primary:b,primaryDetail:e,secondary:i,secondaryDetail:t,onClick:y?void 0:this.onClick,onMouseDown:y?this.onMouseDown:void 0,onContext:this.onMenu}),M,E))}}ae.CONCERNS={chat:["id","isReadOnly","isGroup","pendingAction","canSend","isUser","contact","presence","groupMetadata","mute","isBroadcast","canUnread","optimisticUnreadCount","labels","archive"]},ae.defaultProps={mode:te.LAST},ae.displayName="Chat";var re=(0,$.default)((0,F.default)((0,q.default)(ae,ae.CONCERNS)));t.default=re},80151:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(48491)),l=r(a(20923)),n=r(a(11624)),o=r(a(95607)),d=r(a(80162)),u=r(a(77188));var c=function(e){var t=(0,o.default)(e.chat,["previewMessage","pendingInitialLoading"]);(0,o.default)(e.chatstate,["id","type"]);var a=(0,o.default)(e.presence,["hasData","withholdDisplayStage"],{isStrong:!1});if(a.isActive()){var r=a.getFormattedString();if(r)return i.default.createElement(l.default,{className:s.default.chatstateTyping,direction:"inherit",ellipsify:!0,titlify:!0,text:r})}var c=t.previewMessage;return c?i.default.createElement(n.default,{msg:c.safe(),msgType:"LastMessage"}):u.default.supportsFeature(u.default.F.MD_BACKEND)&&t.pendingInitialLoading?i.default.createElement(l.default,{className:s.default.loadingIndicate,direction:"inherit",titlify:!0,ellipsify:!0,text:d.default.t(1043)}):null};t.default=({chat:e})=>i.default.createElement(c,{chat:e,presence:e.presence,chatstate:e.presence.chatstate})},4457:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FREQUENT_PREFIX=t.Type=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(6448)),d=i(a(33915)),u=i(a(13506)),c=i(a(17367)),f=a(89852),h=i(a(20923)),p=i(a(62886)),m=i(a(35001)),_=i(a(80162)),v=i(a(80896)),g=i(a(39148)),E=a(87454),S=i(a(72765)),C=a(6578),y=i(a(62135)),b=i(a(32885)),M=i(a(53680)),T={SMALL:"SMALL",DEFAULT:"DEFAULT"};t.Type=T;var I="freq_";t.FREQUENT_PREFIX=I;class P extends l.Component{constructor(...e){super(...e),this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,searchText:"",contextMenu:!1},this._handleSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)`Contact: prop searchQuery is undefined`},this._handleActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(p.default.focus(a),t&&(0,f.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this._handleDelete=e=>{e.stopPropagation();var t=this.props.onDelete;t&&t(e,(0,C.unproxy)(this.props.contact))},this._handleClick=e=>{var{onClick:t,contact:a}=this.props;t&&t(e,(0,C.unproxy)(a))},this._handleMouseDown=e=>{0===e.button&&this._handleClick(e)},this._handleKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),this._handleClick(e)},this._handleContext=e=>{var t,a;null===(t=(a=this.props).onContext)||void 0===t||t.call(a,e,this.props.contact)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e,t){var{active:a,contact:r,searchQuery:i}=e,s={},l=a&&a.value instanceof d.default&&r.isProxyOf(a.value);t.active!==l&&(s.active=l);var n=i?i.trimmed:"";return t.searchText!==n&&(s.searchText=n),s}componentDidMount(){this.initListeners(this.props);var{listenForAdminChange:e,listeners:t,participantCollection:a,contact:r}=this.props;e&&a&&t.add(a,"change:isAdmin change:isSuperAdmin",(e=>{M.default.equals(e.id,r.id)&&this.forceUpdate()}))}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,contact:i,searchQuery:s,frequent:l}=e;if(t&&t.searchQuery&&t.searchQuery!==s&&a.remove(t.searchQuery,E.SEARCH_EVENT,this._handleSearch),!s||t&&s===t.searchQuery||a.add(s,E.SEARCH_EVENT,this._handleSearch),(!t||!i.id.equals(t.contact.id))&&(t&&t.active&&a.remove(t.active,t.contact.id.toString(),this._handleActiveChange),r)){var n=(l?I:"")+i.id.toString();a.add(r,n,this._handleActiveChange)}}contextEnabled(){return!1}render(){var e,t,a,{contact:r,secondary:i,onDelete:d,contextEnabled:f,contextMenu:p,admin:v,showNotifyName:E,waitIdle:S,theme:C,useShortName:M,detail:I,listenForAdminChange:P,participantCollection:A,isPendingParticipant:N,showEphemeralIcon:O}=this.props,{active:D,searchText:w}=this.state,R=(0,s.default)({[u.default.contactSmall]:this.props.type===T.SMALL});if(!r.name&&E&&r.notifyName&&(a=l.default.createElement("span",{className:u.default.screenName},l.default.createElement(h.default,{direction:"auto",text:r.notifyName}))),(v||P&&A&&A.assertGet(r.id).isAdmin)&&(t=l.default.createElement("div",{className:u.default.markerAdmin},_.default.t(1818))),N&&(t=l.default.createElement("div",{className:u.default.markerInvited},_.default.t(917))),null!=I)e=I;else if(d){var k=this.props.type===T.SMALL?"x-alt-small":"x-alt";e=l.default.createElement("div",{"data-a8n":n.default.key("chat-controls"),className:u.default.chatControls,role:"button",onClick:this._handleDelete},l.default.createElement(b.default,{name:k}))}var L=i;null==L&&(L=l.default.createElement(y.default,{id:r.id,waitIdle:S}));var x=this.props.type===T.SMALL?26:void 0,F={enter:this._handleKeyboardActivation,space:this._handleKeyboardActivation},B=this.props.mouseDownAsClick,G=l.default.createElement(g.default,{contact:r,useShortName:M,highlightText:w,showBusinessCheckmark:r.showBusinessCheckmarkAsPrimary,showLabel:!0,titlify:!0,ellipsify:!0,you:!0}),U="list-names"!==C||d?C:"list-names-no-delete";return l.default.createElement(m.default,{onRef:this._setHotKeysRef,handlers:F,onFocus:this.indicateFocus,className:R},l.default.createElement(o.default,{ref:this._setCellRef,theme:U,active:D,contextEnabled:f||this.contextEnabled,contextMenu:p,pendingAction:r.pendingAction,detail:e,image:l.default.createElement(c.default,{id:r.id,size:x,showEphemeralIcon:O,waitIdle:S}),primary:G,primaryDetail:t,secondary:L,secondaryDetail:a,onClick:B?null:this._handleClick,onMouseDown:B?this._handleMouseDown:null,onContext:this._handleContext}))}}P.CONCERNS={contact:["id","pendingAction","notifyName","name","showBusinessCheckmarkAsPrimary"]},P.displayName="Contact";var A=(0,v.default)((0,S.default)(P,P.CONCERNS));t.default=A},69515:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=a(34605),o=i(a(17613)),d=i(a(80162)),u=i(a(72765)),c=i(a(32885)),f=i(a(22415)),h=i(a(4328)),p=i(a(53680));class m extends l.PureComponent{constructor(...e){super(...e),this.state={chatId:null,shouldAnimate:!1}}static getDerivedStateFromProps(e,t){var a=e.chat.id;return{chatId:a,shouldAnimate:p.default.equals(t.chatId,a)}}_showMuteIcon(){var{chat:e,mute:t,hideMuteIcon:a,settings:r}=this.props;return e.archive&&(0,n.archiveV2Supported)()&&r.showArchiveV2?!a:t.isMuted}render(){var{chat:e,unreadCount:t,hideArchivedIcon:a}=this.props,r=this._showMuteIcon()?l.default.createElement("div",{className:o.default.icon,key:"icon-muted","aria-label":d.default.t(24)},l.default.createElement(c.default,{name:"muted"})):null,i=null!=e.pin&&e.pin>0?l.default.createElement("div",{className:(0,s.default)(o.default.icon,o.default.iconPinned),key:"icon-pinned"},l.default.createElement(c.default,{name:"pinned"})):null,n=0!==t?l.default.createElement("div",{className:o.default.icon,key:"icon-unread"},l.default.createElement(f.default,{count:t})):null,u=e.archive&&!a?l.default.createElement("span",{className:(0,s.default)(o.default.icon,o.default.archived),key:"icon-archived"},d.default.t(540)):null;return l.default.createElement(h.default,{transitionName:"pop",transitionEnter:this.state.shouldAnimate,transitionLeave:this.state.shouldAnimate},r,u,i,n)}}m.CONCERNS={chat:["id","archive","pin"],mute:["isMuted"],settings:["showArchiveV2"]},m.displayName="Icons";var _=(0,u.default)(m,m.CONCERNS);t.default=_},11624:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(98969)),o=i(a(75444)),d=i(a(20923)),u=i(a(76818)),c=i(a(77188)),f=i(a(30795)),h=a(99375),p=i(a(80162)),m=i(a(32376)),_=i(a(80896)),v=i(a(72462)),g=i(a(60600)),E=i(a(75601)),S=i(a(39148)),C=i(a(71571)),y=i(a(43232)),b=i(a(72765)),M=a(6578);class T extends l.PureComponent{constructor(...e){super(...e),this.updateAfterFeatureFlagChange=()=>{this.props.listeners._unmounted||this.forceUpdate()}}componentDidMount(){var{listeners:e,msg:t}=this.props;e.add(c.default,c.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange),t.type===o.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.unsafe().size<=1024*y.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===o.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){var{msg:e,searchQuery:t=[],msgType:a,author:r}=this.props,i=[];c.default.supportsFeature(c.default.F.MD_BACKEND)?!e.isSentByMe||e.asRevoked||e.mdDowngrade||i.push(l.default.createElement(g.default,{msg:e.unsafe(),key:"symbol"})):e.isSentByMe&&!e.asRevoked&&i.push(l.default.createElement(g.default,{msg:e.unsafe(),key:"symbol"}));var o="Search"!==a&&!e.isSentByMe&&e.isGroupMsg&&!e.isNotification,_=r&&"Search"===a;if((o||_)&&(o?i.push(l.default.createElement(S.default,{contact:e.senderObj,useShortName:!0,key:"author"})):_&&i.push(l.default.createElement(d.default,{text:r,direction:"auto",key:"author"})),i.push(l.default.createElement("span",{key:"divider"},":"," "))),e.hasSymbol()&&i.push(l.default.createElement(E.default,{msg:e.unsafe(),key:"msg-symbol"})),"order"===e.type&&null!=e.itemCount&&i.push(l.default.createElement("div",{key:"item-count"},p.default.t(991,{count:e.itemCount||0,_plural:e.itemCount||0}),e.message?l.default.createElement("span",{key:"item-divider"},":"," "):null)),null!=e.asGroupNotification)i.push(l.default.createElement(f.default,{msg:e.asGroupNotification,clickable:!1,key:"status"}));else if(null!=e.asBroadcastNotification)i.push(l.default.createElement(n.default,{msg:e.asBroadcastNotification,clickable:!1,key:"broadcast_notification"}));else{var v=e.asRevoked;c.default.supportsFeature(c.default.F.MD_BACKEND)&&(v=v||e.mdDowngrade);var y=(0,s.default)({[m.default.product]:null!=e.asProduct,[m.default.italic]:v});i.push(l.default.createElement(d.default,{className:y,direction:e.dir,text:(0,C.default)((0,u.default)((0,M.unproxy)(e.unsafe()),!1,!0)||"",!0),dirMismatch:e.rtl!==p.default.isRTL(),formatters:h.Configuration[a]({mentions:e.mentionMap(),terms:t}),ellipsify:!0,inlineblock:!0,key:"status"}))}var b=p.default.embedDir((0,u.default)((0,M.unproxy)(e.unsafe()))||"",e.rtl);return l.default.createElement("span",{className:m.default.last,title:b},i)}}T.CONCERNS={msg:["ack","asBroadcastNotification","asGroupNotification","asProduct","asRevoked","dir","isGroupMsg","isNotification","isSentByMe","itemCount","rtl","senderObj","type","mediaData","message","isVcardOverMmsDocument","size","mdDowngrade"]},T.displayName="LastMsg";var I=(0,_.default)((0,b.default)(T,T.CONCERNS));t.default=I},87339:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(6448)),n=a(89852),o=r(a(9908)),d=r(a(62886)),u=r(a(35001)),c=r(a(11624)),f=r(a(80896)),h=r(a(46169)),p=r(a(33048)),m=r(a(39148)),_=a(87454),v=r(a(72765)),g=a(6578),E=r(a(48849)),S=a(56670);class C extends s.PureComponent{constructor(...e){super(...e),this.state={searchText:"",active:!1},this._refCell=(0,s.createRef)(),this._handleSearch=()=>{this.setState({searchText:this.props.searchQuery.trimmed})},this._handleActiveChange=e=>{if("focus"===e){var t,a=null===(t=this._refCell.current)||void 0===t?void 0:t.getCellFrameDivRef();a&&(d.default.focus(a),(0,n.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this._handleClick=e=>{var t=this.props.onClick;if((0,S.isFunction)(t)){var{msg:a,chat:r}=this.props,i=p.default.assertGet(a.id),s=r.getSearchContext(i);s.msg=i,t(e,(0,g.unproxy)(r),s)}},this._handleMouseDown=e=>{0===e.button&&this._handleClick(e)},this._handleEnter=e=>{e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),this._handleClick(e)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._refCell.current)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e){var{active:t,msg:a,searchQuery:r}=e,i=t&&t.value instanceof h.default&&t.value.id.equals(a.id);return{searchText:r.trimmed,active:i}}componentDidMount(){this.initListeners(this.props)}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,msg:i,searchQuery:s}=e;t&&t.searchQuery&&t.searchQuery!==s&&a.remove(s,_.SEARCH_EVENT,this._handleSearch),!s||t&&s===t.searchQuery||a.add(s,_.SEARCH_EVENT,this._handleSearch);var l=t?t.msg.id:null;l&&!i.id.equals(l)&&(t&&t.active&&a.remove(t.active,t.msg.id.toString(),this._handleActiveChange),r&&a.add(r,i.id.toString(),this._handleActiveChange))}render(){var{msg:e,chat:t,searchQuery:a,filterPreset:r}=this.props,{active:i}=this.state,n=s.default.createElement(E.default,{msg:e}),o=s.default.createElement(c.default,{msg:e.safe(),msgType:"FTSMessage",searchQuery:a.highlighted}),d={enter:this._handleEnter};return s.default.createElement(u.default,{handlers:d,onFocus:this.indicateFocus},s.default.createElement(l.default,{ref:this._refCell,contextEnabled:()=>!1,theme:"chat-checkbox"===this.props.theme?"cell-message-checkbox":"cell-message",active:!!i,primary:s.default.createElement(m.default,{chat:t,labels:e.labels,firstLabel:null==r?void 0:r.label,showLabel:!0,titlify:!0,ellipsify:!0}),primaryDetail:n,secondary:o,onClick:this._handleClick}))}}C.CONCERNS={msg:["id","isSentByMe","isGroupMsg","isNotification","senderObj","dir","rtl","type","labels"],chat:["id","isUser","contact","formattedTitle","groupMetadata"]},C.displayName="Message";var y=(0,f.default)((0,v.default)(C,C.CONCERNS));t.default=y},60600:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r=(0,d.default)(e.msg,["ack"]).ack;r<l.default.ACK.SENT?t="status-time":r===l.default.ACK.SENT?t="status-check":r===l.default.ACK.RECEIVED?t="status-dblcheck":(t="status-dblcheck",a=n.default.ackBlue);return s.default.createElement("div",{className:(0,i.default)(n.default.ack,a)},s.default.createElement(o.default,{name:t}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(75444)),n=r(a(74558)),o=r(a(32885)),d=r(a(95607))},75601:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(75444)),o=i(a(77188)),d=i(a(80896)),u=i(a(57305)),c=i(a(9632)),f=a(6463),h=i(a(72765)),p=i(a(32885)),m=a(69754);class _ extends l.PureComponent{constructor(...e){super(...e),this.state={parsedVcards:null},this.updateAfterFeatureFlagChange=()=>{this.forceUpdate()}}static getDerivedStateFromProps(e,t){var a,r,i=e.msg;return(null===(a=i.mediaData)||void 0===a?void 0:a.parsedVcards)!==t.parsedVcards?{parsedVcards:null===(r=i.mediaData)||void 0===r?void 0:r.parsedVcards}:null}componentDidMount(){var{listeners:e}=this.props;e.add(o.default,o.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange)}render(){var{msg:e}=this.props,t=function(e,t){switch(e.type){case n.default.MSG_TYPE.IMAGE:case n.default.MSG_TYPE.VIDEO:return e.isViewOnce?!0!==t.viewOnceStatic&&(0,m.isViewed)(e.safe())?"view-once-viewed":"view-once":e.isGif?"status-gif":e.type===n.default.MSG_TYPE.VIDEO?"status-video":"status-image";case n.default.MSG_TYPE.AUDIO:return e.isGif?"status-gif":"status-audio";case n.default.MSG_TYPE.VCARD:case n.default.MSG_TYPE.MULTI_VCARD:return e.isGif?"status-gif":"status-vcard";case n.default.MSG_TYPE.DOCUMENT:return e.isGif?"status-gif":t.parsedVcards?"status-vcard":"status-document";case n.default.MSG_TYPE.CIPHERTEXT:return e.isGif?"status-gif":"status-ciphertext";case n.default.MSG_TYPE.UNKNOWN:return e.isGif?"status-gif":"status-unknown";case n.default.MSG_TYPE.PRODUCT:return"business-description";case n.default.MSG_TYPE.STICKER:return"status-sticker";case n.default.MSG_TYPE.CALL_LOG:switch(e.subtype){case"miss_video":case"miss_group_video":return"status-miss_video"}return"status-miss";case n.default.MSG_TYPE.PTT:return"status-ptt";case n.default.MSG_TYPE.REVOKED:return"recalled";case n.default.MSG_TYPE.LOCATION:return e.isLive?(0,f.liveLocationIcon)(!1):"status-location";case n.default.MSG_TYPE.GROUPS_V4_INVITE:return o.default.supportsFeature(o.default.F.GROUPS_V_4_JOIN_PERMISSION)?"group":"status-unknown";case n.default.MSG_TYPE.PAYMENT:return"status-unknown";case n.default.MSG_TYPE.ORDER:return"shopping-cart"}return __LOG__(2)`chat:getClasses Invalid msg type:"${e.type}"`,"status-unknown"}(e,{parsedVcards:this.state.parsedVcards,viewOnceStatic:this.props.viewOnceStatic}),a=(0,s.default)(u.default.symbol,t,{[u.default.margin]:!e.asRevoked,[u.default.miss]:e.type===n.default.MSG_TYPE.CALL_LOG,[u.default.pttBlue]:e.type===n.default.MSG_TYPE.PTT&&e.ack===n.default.ACK.PLAYED,[u.default.pttGreen]:e.type===n.default.MSG_TYPE.PTT&&e.ack!==n.default.ACK.PLAYED&&!e.isSentByMe}),r=e.paymentAmount1000&&e.paymentCurrency;return l.default.createElement("div",{className:a},e.type===n.default.MSG_TYPE.PAYMENT&&r?l.default.createElement(c.default,{currency:e.paymentCurrency,subtype:e.subtype,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,isCompact:!0}):l.default.createElement(p.default,{name:t}))}}_.CONCERNS={msg:["ack","isGif","isLive","isViewOnce","type","subtype","asRevoked","isSentByMe","paymentCurrency","paymentAmount1000","paymentStatus","paymentTxnStatus","mediaData"]},_.displayName="MsgSymbol";var v=(0,d.default)((0,h.default)(_,_.CONCERNS));t.default=v},62135:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(62899)),n=r(a(20923)),o=r(a(64774)),d=r(a(80162)),u=a(6578),c=r(a(40670)),f=r(a(98165)),h=r(a(95607)),p=r(a(53680)),m=s.default.createElement("span",{className:c.default.statusLoading},d.default.t(630));var _=function(e){var t=(0,h.default)(e.status,["id","stale","status"],{isStrong:!1}),a=s.default.createElement(n.default,{direction:"auto",selectable:!0,titlify:!0,text:t.status,breakWord:!0}),r=(0,u.unproxy)(t).stale?m:a;return s.default.createElement(o.default,{id:t.id,onComplex:()=>(f.default.find(t.id),void 0!==t.status?a:m),waitIdle:e.waitIdle},r)};class v extends s.PureComponent{constructor(e){super(e),this.state={status:f.default.get(e.id)}}componentDidMount(){if(!this.state.status){var e=l.default.gadd(this.props.id);this.setState({status:e.getStatus()})}}componentDidUpdate(e){if(!p.default.equals(this.props.id,e.id)){var t=l.default.gadd(this.props.id);this.setState({status:t.getStatus()})}}render(){var{status:e}=this.state;return e?s.default.createElement(_,{status:e,waitIdle:this.props.waitIdle}):m}}t.default=v,v.displayName="StatusWrapper"},48849:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(30381)),l=r(a(67294)),n=r(a(44386)),o=i(a(33766)),d=i(a(77188)),u=i(a(80896)),c=i(a(72765)),f=i(a(95607));class h extends l.PureComponent{constructor(...e){super(...e),this.state={updater:!1},this._listening=!1,this.rerender=()=>{this.setState({updater:!this.state.updater})}}componentDidMount(){this.props.listeners.add(n.default,n.HOUR24_FORMAT_CHANGE_EVENT,this.rerender),this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getDisplayedTimestamp(){return d.default.supportsFeature(d.default.F.MD_BACKEND)&&null!=this.props.t?this.props.t:this.props.msg.t}maybeRegMidnight(){var{listeners:e}=this.props,t=(0,s.default)().startOf("day").subtract(7,"day");this.getDisplayedTimestamp()>=t.unix()?this._listening||(this._listening=!0,e.add(o.default,"midnight",this.rerender)):this._listening&&(this._listening=!1,e.remove(o.default,"midnight",this.rerender))}render(){return l.default.createElement(l.default.Fragment,null,n.default.relativeStr(this.getDisplayedTimestamp()))}}h.CONCERNS={msg:["t"]},h.displayName="TimestampWithMsg";var p=(0,u.default)((0,c.default)(h,h.CONCERNS));var m=function(e){var t=(0,f.default)(e.chat,["previewMessage","t"]);return t.previewMessage?l.default.createElement(p,{msg:t.previewMessage,t:t.t}):null};t.default=({chat:e,msg:t})=>e?l.default.createElement(m,{chat:e}):t?l.default.createElement(p,{msg:t}):null},282:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(97308),n=r(a(4457)),o=r(a(7970)),d=r(a(80162)),u=r(a(80896)),c=r(a(72765)),f=r(a(26144)),h=r(a(11918));class p extends s.Component{constructor(...e){super(...e),this.state={contextMenu:null},this._unblockContactTrigger=e=>{var{contact:t}=this.props,a=[s.default.createElement(o.default,{a8n:"unblock-contact-in-multi-select",key:"unblock",action:this.unblockContact},d.default.t(617,{contact:t.shortName||t.name}))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id.toString(),menu:a,anchor:e.anchor,event:e.event}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.unblockContact=()=>{var{contact:e}=this.props;this.closeContextMenu(),e.addPendingAction((0,l.unblockContact)(e)).then((()=>this.props.onSelect())).catch((()=>{}))},this.handleSelect=e=>{if(!this.props.disabled)if(this.props.allowBlockedContacts)this.props.onSelect();else{var{contact:t}=this.props;this.state.contextMenu?this.closeContextMenu():t.isContactBlocked?this._unblockContactTrigger({event:e}):this.props.onSelect()}}}render(){var e,{disabled:t,customSecondaryText:a,contact:r,active:i,allowBlockedContacts:l,showEphemeralIcon:o}=this.props;return this.state.contextMenu&&(e=s.default.createElement(f.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0},s.default.createElement(h.default,{contextMenu:this.state.contextMenu}))),s.default.createElement(s.default.Fragment,null,s.default.createElement(n.default,{theme:t||r.isContactBlocked&&!l?"chat-checkbox-no-delete":"chat-checkbox",active:i,contact:r,onClick:t?null:this.handleSelect,secondary:r.isContactBlocked&&!l?d.default.t(616):a||null,waitIdle:!0,showEphemeralIcon:o}),e)}}p.CONCERNS={contact:["id","isGroup","isContactBlocked","pendingAction","shortName","name"]},p.displayName="UnblockableContactWrapper";var m=(0,u.default)((0,c.default)(p,p.CONCERNS));t.default=m},22415:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({count:e,transparentBg:t}){var a="";e>0&&(a=l.default.t(1579,{count:l.default.n(e),_plural:e}));return s.default.createElement("span",{className:(0,i.default)(n.default.count,{[n.default.transparentBg]:t}),"aria-label":a},e>0?l.default.n(e):null)};var i=r(a(94184)),s=r(a(67294)),l=r(a(80162)),n=r(a(6029))},97699:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(63337)),l=r(a(67294)),n=i(a(48343)),o=i(a(60545)),d=a(97066),u=i(a(68868)),c=i(a(33766)),f=i(a(22294)),h=i(a(66600)),p=i(a(83476)),m=i(a(83288)),_=i(a(53150)),v=i(a(80162)),g=i(a(80896)),E=a(495),S=i(a(22039)),C=i(a(23850)),y=i(a(72462)),b=i(a(33048)),M=i(a(37065)),T=r(a(47644)),I=r(a(48847)),P=i(a(17245)),A=i(a(62899)),N=i(a(25531));class O extends l.Component{constructor(...e){super(...e),this._handleChatInfoDrawer=(e,t,a)=>{c.default.openDrawerRight(l.default.createElement(_.default,{chat:e,key:`info-${e.id.toString()}`,showFullGroupDescription:t,scrollToParticipantList:a}),"slide-left",this.props.uim)},this._handleLiveLocationDrawer=(e,t)=>{e.liveLocation&&e.liveLocation.active||c.default.openDrawerRight(l.default.createElement(E.LiveLocationDrawerLoadable,{chat:e,openFrom:t,isFirstLevel:!0}),"slide-left",this.props.uim)},this._handleExpiredLocationDrawer=e=>{c.default.openDrawerRight(l.default.createElement(E.ExpiredLocationDrawerLoadable,{msg:e}),"slide-left",this.props.uim)},this._handleVerificationDrawer=e=>{c.default.openDrawerRight(l.default.createElement(N.default,{contact:A.default.assertGet(e),isFirstLevel:!0}),"slide-left",this.props.uim)},this._handleMsgInfoDrawer=e=>{T.default.displayInfo===T.StreamInfo.NORMAL?e.chat.kind===d.CHAT_KIND.CHAT?c.default.openDrawerRight(l.default.createElement(f.default,{msg:e}),"slide-left",this.props.uim):c.default.openDrawerRight(l.default.createElement(p.default,{msg:e}),"slide-left",this.props.uim):c.default.openToast(l.default.createElement(I.default,{msg:v.default.t(1162),id:(0,I.genId)("msg_info_failed")}))},this._handleAttachMediaDrawer=({chat:e,attachments:t,animationName:a,initCaption:r,onComplete:i,fileOrigin:d})=>{var u=()=>{var a=e.attachMediaContents;a&&t&&(d?a.processAttachments(t,d):(__LOG__(3)`ChatActionListener:onAttachMediaDrawer fileOrigin is not specified, fallback to default`,a.processAttachments(t,y.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)))};c.default.existsDrawerMid((t=>{if(t)u();else{e.attachMediaContents||e.setAttachMediaContents(new n.default({chatParticipantCount:e.getParticipantCount()}));var d=(0,s.default)(e.attachMediaContents,"chat.attachMediaContents");c.default.openDrawerMid(l.default.createElement(o.default,{chat:e,onComplete:i,initCaption:r,mediaCollection:d}),a||"slide-up",this.props.uim,{noFocus:!0,onEnterAnimationComplete:u})}}))},this.handleChatSearch=e=>{c.default.openDrawerRight(l.default.createElement(u.default,{chat:e}),"slide-left",this.props.uim)},this._handleMediaViewer=e=>{var{msg:t,getZoomNode:a,currentTime:r,highlightedMsgIds:i}=e;b.default.get(t.id)?c.default.openModalMedia(l.default.createElement(C.default,{msg:t,startTime:r,getZoomNode:a,highlightedMsgIds:i}),{transition:"media-viewer",uim:this.props.uim}):c.default.openModal(l.default.createElement(S.default,{msg:t}))},this._handleEphemeralDrawer=e=>{c.default.openDrawerRight(l.default.createElement(h.default,{chat:e,fromInfoFlow:!1}),"slide-left",this.props.uim)},this._handleVoipStartGroupCall=(e,t)=>{var a,r,i=(null!==(a=null===(r=e.groupMetadata)||void 0===r?void 0:r.participants)&&void 0!==a?a:[]).map((e=>e.contact.id)),s=l.default.createElement(M.default,{isVideo:t,groupParticipants:i,onStartGroupCall:e=>P.default.groupCallStart(e,t)});c.default.openModal(s,{transition:"modal-flow"})}}componentDidMount(){var{listeners:e}=this.props;e.add(c.default,"chat_info_drawer",this._handleChatInfoDrawer),e.add(c.default,"msg_info_drawer",this._handleMsgInfoDrawer),e.add(c.default,"chat_search",this.handleChatSearch),e.add(c.default,"attach_media_drawer",this._handleAttachMediaDrawer),e.add(c.default,"verification_drawer",this._handleVerificationDrawer),e.add(c.default,"live_location_drawer",this._handleLiveLocationDrawer),e.add(c.default,"media_viewer_modal",this._handleMediaViewer),e.add(c.default,"expired_location_drawer",this._handleExpiredLocationDrawer),e.add(c.default,"ephemeral_drawer",this._handleEphemeralDrawer),e.add(c.default,"voip_start_group_call",this._handleVoipStartGroupCall)}render(){return null}}O.displayName="ChatActionListener";var D=(0,m.default)((0,g.default)(O));t.default=D},17938:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FooterType=void 0;var s=i(a(35161)),l=i(a(25325)),n=i(a(91966)),o=i(a(94184)),d=r(a(67294)),u=i(a(97066)),c=i(a(16072)),f=i(a(20923)),h=i(a(80162)),p=i(a(80896)),m=i(a(28981)),_=i(a(93227)),v=i(a(32885)),g=i(a(4328)),E={CONFIRM:"CONFIRM",NEXT:"NEXT",SEND:"SEND",VOICE_CALL:"VOICE_CALL",VIDEO_CALL:"VIDEO_CALL"};t.FooterType=E;class S extends d.Component{constructor(e){super(e),this._forwardIsEnabled=!0,this.state={selected:[]},this._handleForwardClick=()=>{this._forwardIsEnabled&&(this._forwardIsEnabled=!1,this.props.onForward())},this._firstRenderActive=e.startActive||!1}componentDidMount(){var e=this.props.selections.getSelected();this.setState({selected:e}),this.props.listeners.add(this.props.selections,"all",(()=>{this.setState({selected:this.props.selections.getSelected()})})),0===e.length&&(this._firstRenderActive=!1)}componentDidUpdate(){this._hasSelected()||(this._firstRenderActive=!1)}_hasSelected(){return this.state.selected.length>0}render(){var e;if(this._hasSelected()){var t,a=1===this.state.selected.length?this.props.singleSelectionType:this.props.multipleSelectionType;switch(a){case E.CONFIRM:t=d.default.createElement(v.default,{name:"checkmark-medium"});break;case E.NEXT:t=d.default.createElement(v.default,{name:"arrow-forward"});break;case E.VOICE_CALL:t=d.default.createElement(v.default,{name:"voice-call"});break;case E.VIDEO_CALL:t=d.default.createElement(v.default,{name:"video-call"});break;case E.SEND:default:t=d.default.createElement(v.default,{directional:!0,name:"send"})}e=d.default.createElement("div",{className:(0,o.default)(c.default.controlsSummary,{[c.default.confirm]:a===E.CONFIRM})},a!==E.CONFIRM&&d.default.createElement(y,{chats:this.state.selected}),d.default.createElement("div",{"data-animate-btn":!0,className:this._firstRenderActive?c.default.btnActive:c.default.btnAction},d.default.createElement(_.default,{large:!0,onClick:this._handleForwardClick},t)))}return d.default.createElement(g.default,{transitionName:"slide-up-down-footer",className:c.default.container},e)}}S.defaultProps={singleSelectionType:E.SEND,multipleSelectionType:E.SEND},S.displayName="ChatSelectorFooter";var C=(0,p.default)(S);t.default=C;class y extends d.Component{constructor(e){super(e),this.state={chats:this.props.chats}}static getDerivedStateFromProps(e,t){var a=t.chats,r=e.chats;return{chats:a=r&&r.length>a.length?a.concat((0,n.default)(r,a)):(0,l.default)(a,r)}}render(){for(var e=(0,s.default)(this.state.chats,(e=>e instanceof u.default?e.formattedTitle:e instanceof m.default?e.name:e.formattedShortNameWithNonBreakingSpaces)),t=[],a=e.length-1;a>=0;a--)t.push(d.default.createElement(f.default,{className:c.default.item,key:a,text:e[a]})),a>0&&t.push(d.default.createElement("span",{key:`comma-${a}`},h.default.t(724)));return d.default.createElement(g.default,{transitionName:"pop",className:c.default.summaryText},t)}}y.displayName="SelectedChatsList"},3485:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(93386)),l=i(a(91966)),n=r(a(67294)),o=i(a(97066)),d=r(a(24307)),u=i(a(74798)),c=i(a(66875)),f=i(a(33766)),h=i(a(75444)),p=(i(a(33915)),i(a(4457))),m=i(a(68270)),_=i(a(20923)),v=a(77824),g=r(a(3128)),E=i(a(62886)),S=i(a(35001)),C=a(99375),y=i(a(80162)),b=i(a(80896)),M=i(a(87339)),T=(i(a(46169)),i(a(26802))),I=i(a(47809)),P=i(a(26144)),A="SEC_CHATS",N="SEC_CONTACTS",O="SEC_GROUPCHATS",D="SEC_STARRED",w="SEC_MSG",R="SEC_MUTED_CHATS",k="ROW_CHATS",L="ROW_CONTACTS",x="ROW_GROUPCHATS",F="ROW_STARRED",B="ROW_MSG";class G extends n.Component{static getDerivedStateFromProps(e){return{ftsStarred:e.ftsResult.filter((({star:e})=>e)),ftsMessages:e.ftsResult.filter((({star:e})=>!e))}}constructor(e){super(e),this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleListPointerEventsOff=()=>{this._listPointerEvents=!1},this._handleListPointerEventsOn=()=>{this._listPointerEvents=!0},this._updateSelected=e=>{this._debouncedOpenSelected.cancel(),this.props.selection.setVal(e,!1),this._oldSelection=e},this.handleContactClick=(e,t)=>{this.handleClick(e,t.id)},this._handleChatClick=(e,t)=>{this.handleClick(e,t.id)},this.handleMessageClick=(e,t,a)=>{this.handleClick(e,t.id,a)},this.handleClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),(0,v.findChat)(t).then((e=>{a?f.default.openChatAt(e,a).then((t=>{t&&f.default.focusChatTextInput(e)})):e!==this._getActiveChat()?f.default.openChatFromUnread(e).then((t=>{t&&f.default.focusChatTextInput(e)})):f.default.focusChatTextInput(e)}))},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.handleFocusGain=e=>{if(e.target===this._refHotKeys&&this._listPointerEvents)if(this.props.selection.index<0)this.focusFirst();else{var{uie:t}=this;t&&t.activate(),this.props.selection.reset(!0)}},this._handleCloseChat=e=>{e===this.props.selection.getVal()&&this.props.selection.unset()},this.handleFocusSearch=e=>{e.stopPropagation(),e.preventDefault(),this.props.onFocusSearch()},this.setRefUIE=e=>{this.uie=e},this.handleFocusList=()=>{this.refList&&this._refHotKeys&&E.default.focus(this._refHotKeys)},this.requestFocus=()=>{this.props.selection.reset(!1),this.props.selection.index>-1&&document.activeElement===document.body&&this.handleFocusList()},this.setRefList=e=>{this.refList=e},this.handleMultiSelect=(e,t,a)=>{var{multiSelection:r}=this.props;r&&r.setVal(e,t,a)},this._renderWrappedItem=(e,t)=>{var{multiSelection:a,selectableState:r}=this.props;return a&&r?n.default.createElement(c.default,{model:t,theme:"chat-checkbox",selectableState:r,multiSelection:a,onSelect:this.handleMultiSelect},e):e},this.renderItem=e=>{var{searchQuery:t,filterPreset:a}=this.props;switch(e.type){case A:return n.default.createElement(T.default,{header:y.default.t(1778)});case N:return n.default.createElement(T.default,{header:y.default.t(1786)});case O:return n.default.createElement(T.default,{header:y.default.t(1894)});case D:return n.default.createElement(T.default,{header:y.default.t(2020)});case w:return n.default.createElement(T.default,{header:y.default.t(1929)});case k:var{data:r}=e;return this._renderWrappedItem(n.default.createElement(d.default,{chat:r,contact:r.contact,mode:d.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._handleChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection,showEphemeralIcon:!0}),r);case L:var{data:i}=e;return this._renderWrappedItem(n.default.createElement(p.default,{contact:i,active:this.props.selection,searchQuery:t,onClick:this.handleContactClick,mouseDownAsClick:!0,waitIdle:!0}),i);case x:var{data:s}=e,l=s[0],o=this._getGroupChatSubtitle(s);return this._renderWrappedItem(n.default.createElement(d.default,{chat:l,contact:l.contact,secondary:o,mode:d.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._handleChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection}),l);case F:var{data:u}=e;return this._renderWrappedItem(n.default.createElement(M.default,{msg:u,chat:u.chat,searchQuery:t,filterPreset:a,onClick:this.handleMessageClick,active:this.props.selection}),u);case B:var{data:c}=e;return this._renderWrappedItem(n.default.createElement(M.default,{msg:c,chat:c.chat,searchQuery:t,filterPreset:a,onClick:this.handleMessageClick,active:this.props.selection}),c);default:throw new g.UnknownDataError(e)}},this._listPointerEvents=!0,this._oldSelection=null,this._debouncedOpenSelected=this.props.debounce((()=>{this._openSelected(this._focusComposer),this._focusComposer=!1}),200),this.state={textsize:m.default.get().textsize,ftsStarred:[],ftsMessages:[],mutedChats:[],collapseMutedChatsEnabled:!1,mutedChatsCollapsed:!0}}componentWillUnmount(){var e=this.getSelection(),t=this.props.selection.getVal();t&&t.isState&&!this.props.isSearching&&!e.length&&f.default.closeChat(t)}componentDidMount(){this.props.selection.init(this.getSelection()),this.props.listeners.add(f.default,"focus_chat_list",this.restoreFocus),this.props.listeners.add(f.default,"focus_next_chat",(e=>{this.handleNextChat(null,!0,e)})),this.props.listeners.add(f.default,"focus_prev_chat",(e=>{this.handlePrevChat(null,!0,e)})),this.props.listeners.add(f.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(f.default,"close_chat",this._handleCloseChat),this.props.listeners.add(f.default,"textsize_change",(e=>{this.setState({textsize:e})}))}componentDidUpdate(e){var t=e.selection.getVal();this.props.selection.init(this.getSelection(),!e.isSearching&&!this.props.isSearching);var a=this.props.selection.getVal();e.isSearching&&!this.props.isSearching&&!a&&this._oldSelection&&this.props.selection.setVal(this._oldSelection),a&&a!==t&&(this._focusComposer=!0,this._debouncedOpenSelected())}_openSelected(e=!1){var t=this.props.selection.getVal();t&&(t instanceof o.default&&t!==this._getActiveChat()?f.default.openChatFromUnread(t).then((a=>{a&&e&&f.default.focusChatTextInput(t)})):e&&f.default.focusChatTextInput(t))}getSelection(){return[...this.props.chats,...this.props.contacts,...this.props.messages,...this.props.groupChats.map((e=>e[0])),...this.state.ftsStarred,...this.state.ftsMessages]}_scrollListIntoFocusedItem(e=100){this.refList&&this.refList.scrollIntoViewIfNeeded(this.props.selection.index,e)}focusFirst(){var{uie:e}=this;e&&e.activate(),this.props.selection.setFirst(),this._scrollListIntoFocusedItem(0),this._debouncedOpenSelected()}handleNextChat(e,t,a){e&&e.preventDefault();var r=this.props.selection.next();this.props.selection.index!==r&&(this.props.selection.setNext(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected())}handlePrevChat(e,t,a){e&&e.preventDefault(),this.props.selection.prev()>-1?(this.props.selection.setPrev(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected()):t||(this._debouncedOpenSelected.cancel(),this._openSelected(),this.props.onFocusSearch())}_getHeight(){var{textsize:e}=this.state,t=h.default.LIST_HEIGHT_TEXTSIZE_MAP.find((t=>t.scale===e));return t?t.height:72}getData(){var{chats:e,contacts:t,groupChats:a,isSearching:r,messages:i}=this.props,{ftsStarred:s,ftsMessages:l,mutedChats:n,mutedChatsCollapsed:o,collapseMutedChatsEnabled:d}=this.state,u=[];return r&&e.length>0&&u.push({itemKey:"section-chats",type:A}),!r&&d?(n.length>0&&u.push({itemKey:"section-collapse-muted",contentKey:`${String(o)}-${n.length}`,type:R,height:30}),o||u.push(...n.map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,expanded:!o,type:k})))),u.push(...e.filter((e=>!e.mute.isMuted)).map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,type:k}))))):u.push(...e.map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,type:k})))),r&&t.length>0&&u.push({itemKey:"section-contacts",type:N}),u.push(...t.map((e=>({itemKey:`contact-${e.id.toString()}`,data:e,type:L})))),r&&a.length>0&&u.push({itemKey:"section-groupchats",type:O}),u.push(...a.map((e=>({itemKey:`groupchat-${e[0].id.toString()}-${e[1].map((e=>e.id.toString())).join("-")}`,data:e,type:x})))),r&&s.length>0&&u.push({itemKey:"section-starred",type:D}),u.push(...s.map((e=>({itemKey:`starred-${e.id.toString()}`,data:e,type:F})))),r&&l.length>0&&u.push({itemKey:"section-msg",type:w}),u.push(...l.map((e=>({itemKey:`msg-${e.id.toString()}`,data:e,type:B})))),r&&i.length>0&&u.push({itemKey:"section-msg",type:w}),u.push(...i.map((e=>({itemKey:`msg-${e.id.toString()}`,data:e,type:B})))),u}render(){var e,t,{isSearching:a,chats:r}=this.props;return t=a?y.default.t(35):y.default.t(4),n.default.createElement(P.default,{displayName:"Chatlist",ref:this.setRefUIE,uimState:P.default.State.PASSIVE,requestFocus:this.requestFocus},n.default.createElement(S.default,{handlers:{down:e=>this.handleNextChat(e,!0),j:e=>this.handleNextChat(e,!0),up:e=>this.handlePrevChat(e,!0),k:e=>this.handlePrevChat(e,!0),"/":e=>this.handleFocusSearch(e)},onFocus:this.handleFocusGain,onRef:this._setRefHotKeys,"data-tab":h.default.TAB_ORDERS.CHAT_LIST},n.default.createElement(g.default,{"aria-label":t,data:this.getData(),renderItem:this.renderItem,flatListController:this.props.flatListController,direction:"vertical",defaultItemHeight:this._getHeight(),onPointerEventsOff:this._handleListPointerEventsOff,onPointerEventsOn:this._handleListPointerEventsOn,ref:this.setRefList,role:"grid","aria-rowcount":null!==(e=null==r?void 0:r.length)&&void 0!==e?e:0})))}_getActiveChat(){return u.default.toArray().find((e=>e.active))}_getGroupChatSubtitle(e){var t,a=e[1],r=e[0].groupMetadata,i=(null!==(t=null==r?void 0:r.participants)&&void 0!==t?t:[]).map((e=>e.contact)),o=(0,l.default)(i,a),d=(0,s.default)(a,o).map((e=>e.formattedShortNameWithNonBreakingSpaces)).join(y.default.t(724)),u=C.Configuration.Search({terms:[this.props.searchQuery.trimmed]});return n.default.createElement(_.default,{text:d,formatters:u,titlify:!0,direction:"auto"})}}G.defaultProps={chats:[],groupChats:[]},G.displayName="Chatlist";var U=(0,b.default)((0,I.default)(G));t.default=class extends U{focusFirst(){return this.getComponent().focusFirst()}}},8639:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var[e,t]=(0,s.useState)(!0);return s.default.createElement(s.default.Fragment,null,s.default.createElement(l.default,{setShowButterBar:t}),!e&&o.default.supportsFeature(o.default.F.MD_BACKEND)&&s.default.createElement(n.default,null))};var s=i(a(67294)),l=r(a(21893)),n=r(a(4158)),o=r(a(77188))},96713:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(81732)),n=r(a(8702)),o=r(a(22172)),d=r(a(33766)),u=r(a(11288)),c=r(a(62899)),f=r(a(17367)),h=a(26226),p=r(a(77188)),m=r(a(80162)),_=r(a(80896)),v=a(97713),g=r(a(70372)),E=r(a(51176)),S=r(a(32457)),C=r(a(44563)),y=r(a(72765)),b=r(a(98165)),M=r(a(78853)),T=r(a(32885)),I=r(a(47809)),P=i(a(48847)),A=r(a(4328)),N=r(a(41304)),O=a(2860),D=a(73602),w=a(95140),R=r(a(72462));class k extends s.Component{constructor(){super(...arguments),this.handleWindowFocus=()=>{},this.handleMouseDown=()=>{},this.handleDrag=()=>{this.didDrag=!0},this.handleClickCapture=()=>{},this._handleNewChat=e=>{e.preventDefault(),d.default.openDrawerLeft(s.default.createElement(E.default,null))},this.handleProfile=()=>{var e=(0,h.getMaybeMeUser)(),t=b.default.assertGet(e),a=C.default.assertGet(e),r=c.default.assertGet(e);d.default.openDrawerLeft(s.default.createElement(S.default,{status:t,profilePicThumb:a,contact:r,conn:u.default}))},this.handleUnmute=()=>{g.default.globalMute().unmute(),d.default.openToast(s.default.createElement(P.default,{msg:m.default.t(852),id:(0,P.genId)()}))},this.onCatalogIcon=()=>{(0,D.openCatalogManagementFlow)(null,R.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_TOP_BAR)},this.onShopsIcon=()=>{d.default.openModal(s.default.createElement(N.default,null))},this.state={bizProfileLoaded:!1}}componentDidMount(){u.default.isSMB&&l.default.find((0,h.getMaybeMeUser)()).then((()=>{this.setState({bizProfileLoaded:!0})}))}render(){var e=null;this.props.mute.isMuted&&(e=s.default.createElement(v.MenuBarItem,{a8nText:"menu-bar-unmute",icon:s.default.createElement(T.default,{name:"dnd"}),title:m.default.t(851),onClick:this.handleUnmute,key:"btn-dnd"}));var t,a=s.default.createElement("div",{className:n.default.listUser},s.default.createElement(f.default,{id:(0,h.getMaybeMeUser)(),size:40,onClick:this.handleProfile}));if(p.default.supportsFeature(p.default.F.MD_BACKEND)){if(this.state.bizProfileLoaded&&u.default.isSMB&&(0,O.getABPropConfigValue)("web_abprop_catalog_icon_on_top_bar")){var r=l.default.get((0,h.getMaybeMeUser)());t=(0,w.hasShop)(r)?s.default.createElement(v.MenuBarItem,{a8nText:"menu-bar-shops",icon:s.default.createElement(T.default,{name:"shop-filled",directional:!0,className:n.default.shopsIcon}),title:m.default.t(1925),onClick:this.onShopsIcon}):s.default.createElement(v.MenuBarItem,{a8nText:"menu-bar-catalog",icon:s.default.createElement(T.default,{name:"catalog-filled",directional:!0}),title:m.default.t(1920),onClick:this.onCatalogIcon})}var i=s.default.createElement("div",{className:n.default.betaIcon},s.default.createElement("b",{className:n.default.betaIconText,title:m.default.t(264)},m.default.t(263)));a=s.default.createElement("div",{className:n.default.listUserBeta},s.default.createElement(f.default,{id:(0,h.getMaybeMeUser)(),size:40,onClick:this.handleProfile}),i)}return s.default.createElement("header",{className:n.default.header,onMouseDown:this.handleMouseDown,onClickCapture:this.handleClickCapture},a,s.default.createElement("div",{className:n.default.listControls},s.default.createElement(v.MenuBar,{key:"chatlist-header"},s.default.createElement(A.default,{transitionName:"btn"},e,t,s.default.createElement(M.default,null),s.default.createElement(v.MenuBarItem,{a8nText:"menu-bar-chat",icon:s.default.createElement(T.default,{name:"chat",directional:!0}),title:m.default.t(1924),onClick:this._handleNewChat}),s.default.createElement(v.MenuBarItem,{a8nText:"menu-bar-menu",icon:s.default.createElement(T.default,{name:"menu"}),title:m.default.t(1112)},s.default.createElement(o.default,{settings:this.props.settings}))))))}}k.CONCERNS={mute:["isMuted"]},k.displayName="ChatlistHeader";var L=(0,I.default)((0,_.default)((0,y.default)(k,k.CONCERNS)));t.default=L},22172:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(37777));class s extends i.default{}t.default=s},37777:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(19472)),n=r(a(81732)),o=a(95140),d=a(73602),u=r(a(37053)),c=r(a(33766)),f=r(a(51115)),h=r(a(11288)),p=r(a(75444)),m=r(a(62899)),_=r(a(84968)),v=i(a(44373)),g=r(a(7970)),E=a(26226),S=a(34605),C=r(a(80162)),y=r(a(69172)),b=a(60839),M=a(84649),T=r(a(29093)),I=r(a(72462)),P=r(a(33048)),A=r(a(47572)),N=r(a(32457)),O=r(a(44563)),D=a(59407),w=r(a(43232)),R=r(a(75629)),k=r(a(41304)),L=r(a(33805)),x=r(a(19368)),F=r(a(98165)),B=r(a(13353));class G extends s.Component{getElement(){return this._refDropdown}constructor(){super(...arguments),this.openTime=-1,this.handleCreateGroup=()=>{c.default.openDrawerLeft(s.default.createElement(A.default,null)),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.NEW_GROUP)},this.handleCreateMessengerRoom=()=>{(0,E.shouldShowNUX)(p.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,E.shouldShowNUX)(p.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,E.shouldShowNUX)(p.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)?c.default.openModal(s.default.createElement(T.default,null)):(0,M.openMessengerRoomUrl)(),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.CREATE_A_ROOM)},this.handleProfile=()=>{var e=(0,E.getMaybeMeUser)(),t=F.default.assertGet(e),a=O.default.assertGet(e),r=m.default.assertGet(e);c.default.openDrawerLeft(s.default.createElement(N.default,{status:t,profilePicThumb:a,contact:r,conn:h.default}),void 0,void 0,void 0,D.FocusType.TABBABLE),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.PROFILE)},this.handleDisconnect=()=>{var e=P.default.some((e=>e.ack===p.default.ACK.CLOCK&&e.local&&e.isSentByMe));if((0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.LOG_OUT),!e)return B.default.logout();c.default.openModal(s.default.createElement(f.default,{title:C.default.t(609),onOK:()=>B.default.logout(),okText:C.default.t(1099),onCancel:()=>c.default.closeModal(),cancelText:C.default.t(1768)},C.default.t(1502)))},this.handleArchived=()=>{c.default.openDrawerLeft(s.default.createElement(l.default,null)),new I.default.ChatFolderOpen({folderType:"Archive"}).commit(),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.ARCHIVED)},this.handleSettings=()=>{c.default.openDrawerLeft(s.default.createElement(R.default,null)),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.SETTINGS)},this.handleStarred=()=>{c.default.openDrawerLeft(s.default.createElement(L.default,{starredMsgs:x.default})),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.STARRED)},this.handleLabel=()=>{c.default.openDrawerLeft(s.default.createElement(y.default,null)),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.LABELS)},this.handleContactUsOpen=()=>{this.openTime=performance.now(),c.default.openModal(s.default.createElement(_.default,{onCancel:this.handleContactUsCancel,onSend:this.handleContactUsSend}))},this.handleContactUsCancel=()=>{(0,b.logSessionEvent)(I.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION,this.openTime)},this.handleContactUsSend=e=>{(0,b.logSessionEvent)(I.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,this.openTime,e)},this.handleCatalog=()=>{this.isShopsEnabled()?c.default.openModal(s.default.createElement(f.default,{title:C.default.t(479),onOK:this.goToCommerceManager,okText:C.default.t(599),onCancel:()=>c.default.closeModal()},C.default.t(480))):((0,d.openCatalogManagementFlow)(null,I.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.CATALOG))},this.handleShops=()=>{c.default.openModal(s.default.createElement(k.default,null))},this.goToCommerceManager=()=>{var e=n.default.get((0,E.getMaybeMeUser)());(0,o.goToCommerceManager)(e)},this.state={rememberMe:(0,E.getRememberMe)()}}componentDidMount(){(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.OPEN)}isShopsEnabled(){if(!h.default.isSMB||!w.default.shopsHeaderDropdownMenuItem)return!1;var e=n.default.get((0,E.getMaybeMeUser)());return(0,o.hasShop)(e)}getShopsItem(){return this.isShopsEnabled()?s.default.createElement(g.default,{a8n:"mi-shop menu-item",action:this.handleShops},C.default.t(801)):null}getCatalogLabel(){return this.isShopsEnabled()?C.default.t(988):C.default.t(987)}render(){var e=s.default.createElement(g.default,{a8n:"mi-new-group menu-item",action:this.handleCreateGroup},C.default.t(1921)),t=s.default.createElement(g.default,{a8n:"mi-create-messenger-room menu-item",action:this.handleCreateMessengerRoom},C.default.t(1144)),a=s.default.createElement(g.default,{a8n:"mi-starred menu-item",action:this.handleStarred},C.default.t(1108)),r=(0,S.canEditLabelAssociation)()&&s.default.createElement(g.default,{a8n:"mi-setting menu-item",action:this.handleLabel},C.default.t(1e3)),i=h.default.isSMB?s.default.createElement(g.default,{a8n:"mi-catalog menu-item",action:this.handleCatalog},this.getCatalogLabel()):null,l=C.default.t(1104);return s.default.createElement(v.default,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",flipOnRTL:!0,key:"ChatlistHeader",dirX:v.DirX.LEFT},e,t,s.default.createElement(g.default,{a8n:"mi-profile-status menu-item",action:this.handleProfile},l),this.getShopsItem(),i,(0,S.archiveV2Supported)()&&this.props.settings.showArchiveV2?null:s.default.createElement(g.default,{a8n:"mi-archived menu-item",action:this.handleArchived},C.default.t(1094)),a,r,s.default.createElement(g.default,{a8n:"mi-setting menu-item",action:this.handleSettings},C.default.t(1107)),null,s.default.createElement(g.default,{a8n:"mi-logout menu-item",action:this.handleDisconnect},C.default.t(1099)))}}t.default=G,G.displayName="ChatlistHeaderDropdown"},37053:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){new i.default.WebcMenu({webcMenuAction:i.default.WEBC_MENU_TYPE.THREADS_SCREEN_CLICK,webcMenuItemLabel:e}).commit()};var i=r(a(72462))},21974:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(82569)),l=i(a(35161)),n=i(a(23279)),o=i(a(94184)),d=a(24788),u=a(78840),c=r(a(67294)),f=i(a(80604)),h=i(a(74798)),p=i(a(3485)),m=i(a(8639)),_=i(a(96713)),v=i(a(96633)),g=i(a(33766)),E=i(a(75444)),S=i(a(62899)),C=i(a(68270)),y=a(92997),b=r(a(12536)),M=a(77824),T=a(85946),I=i(a(9444)),P=i(a(59432)),A=i(a(9908)),N=i(a(62886)),O=i(a(93769)),D=i(a(77188)),w=a(34605),R=i(a(35001)),k=i(a(20244)),L=i(a(80162)),x=i(a(18627)),F=a(79022),B=i(a(33913)),G=i(a(80896)),U=i(a(72462)),j=i(a(32114)),V=i(a(33048)),H=i(a(63611)),W=i(a(70372)),Y=i(a(61170)),K=i(a(85726)),q=i(a(87454)),z=i(a(56413)),$=i(a(87964)),Q=i(a(80498)),X=i(a(69507)),J=i(a(72765)),Z=i(a(32885)),ee=i(a(47809)),te=i(a(26144)),ae=i(a(59979)),re=i(a(44386)),ie=a(26226),se=i(a(27122)),le=450,ne=75;class oe extends c.Component{constructor(e){super(e),this._refPanel=null,this.flatListController=new P.default,this._batchState={},this.setRefSearch=e=>{this.refSearch=e},this._setRefInputHotkey=e=>{this._refInputHotkey=e},this._refChatlist=(0,c.createRef)(),this._smbFilterSession=new Q.default,this._hasLabelEditGK=!1,this._refContainer=(0,c.createRef)(),this._debounceSetState=new u.ShiftTimer((()=>{this.setState(this._batchState),this._batchState={}})),this.debounceSetState=(e,t,a)=>{Object.assign(this._batchState,e),void 0===t?this._debounceSetState.onOrBeforeRepaint():void 0===a?this._debounceSetState.debounce(t):this._debounceSetState.debounceAndCap(t,a)},this._updateLabelFeatureFlagChange=()=>{!this._hasLabelEditGK&&(0,w.canEditLabelAssociation)()&&(this._hasLabelEditGK=!0,this.props.listeners.add(x.default,"bulk_msg_chat_label_change",(()=>{this.searchQuery&&!this.searchQuery.isEmptyQuery&&(this.ftsMsgs.updateFtsAfterMsgLabelUpdate(),this.handleSearch(this.searchQuery.trimmed,{label:this.searchQuery.filter.label,kind:this.searchQuery.filter.kind}))})),this.selectableState=new z.default(this.props.selectable||!1),this.props.listeners.add(this._multiSelection,"all",this._updateShowMultiselectBar),this.setState({chatlistKeyId:1}))},this._updateShowMultiselectBar=()=>{var{showMultiSelectBar:e}=this.state,t=this._multiSelection&&this._multiSelection.getSelected().length>0&&!this.props.hideMultiSelectBar;!1===e&&t&&this.setState({showMultiSelectBar:!0})},this._scrollChatListToTop=()=>{var e=this._refPanel;if(e){var t=e.scrollTop;0!==e.scrollTop&&(t<e.clientHeight?(0,ae.default)(e,"scroll",{duration:300,container:e,offset:-(e.scrollTop+e.getBoundingClientRect().top)}):e.scrollTop=0)}},this.getFilteredContacts=(e,t={},a=!1)=>{var r=(e||"").trim();if(!r&&this._isEmptyFilterQuery(t))return[];r=L.default.accentFold(r);var i=(0,Y.default)(r);return S.default.getFilteredContacts().filter((function(e){if(!e.searchMatch(r,i,t.label))return!1;if(!a){var s=h.default.get(e.id);if(s&&s.shouldAppearInList)return!1}return!0}))},this._getFilteredMessages=(e={})=>{var t;if(!this._isEmptyFilterQuery(e)&&e.label){var a=(null===(t=x.default.get(e.label))||void 0===t?void 0:t.labelItemCollection.filter((e=>e.parentType===F.LabelItemParentType.Msg)).map((e=>e.parentId)))||[];V.default.getMessagesById(a).then((e=>{this.setState({messages:e.messages})}))}},this._getFilteredChats=(e,t={})=>{var a=(e||"").trim();if(a||!this._isEmptyFilterQuery(t)){a=L.default.accentFold(a);var r=(0,Y.default)(a);return(0,w.canDisplayLabel)()?h.default.filter((e=>{var i=t.label&&e.contact.searchMatch(a,r,t.label),s=!a||e.contact.searchMatch(a,r),l=!t.kind&&!t.label||e.matchFilter(t);return i||s&&l})):h.default.filter((e=>e.contact.searchMatch(a,r)&&e.shouldAppearInList))}return h.default.filter((e=>!e.archive&&e.shouldAppearInList))},this.fullTextSearch=(e,t)=>{var a=e||this.searchQuery.query;(0,k.default)(a)||t&&t.label?(this.state.searching||this.debounceSetState({searching:!0}),this._fts()):this.isFTSSearching()?this._cancelSearch():this.ftsMsgs.reset()},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.isFTSSearching()||(0,k.default)(this.searchQuery.query||""))&&e.scrollTop+E.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this._mapGroupToContacts=(e,t)=>{for(var a=new Map,r=function(r){var i=e[r];i&&i.forEach((e=>{e&&(a.has(e)||a.set(e,[]),a.get(e).push(t[r]))}))},i=0;i<e.length;i++)r(i);var s=[];return a.forEach(((e,t)=>{s.push([t,e])})),s.sort((function(e,t){return e[1].length===t[1].length?null!=e[0].t&&null!=t[0].t?t[0].t-e[0].t:null!=e[0].t?-1:1:t[1].length-e[1].length})),s.slice(0,10)},this.handleSearch=(e,t)=>{var a=(0,w.canDisplayLabel)()?t:{};if(!e&&this._isEmptyFilterQuery(a))return this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery({}),void this.handleStopSearch();e===this.searchQuery.query&&this._isEmptyFilterQuery(a)||(this.fullTextSearch(e,a),this._commonGroupSearch(),this._throttledFilteredChats(e,a),this._throttledFilteredContacts(e,a),this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery(a))},this._hasSearchText=()=>(0,w.canDisplayLabel)()?!!this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter):!!this.searchQuery.query,this.isFTSSearching=()=>{var e=this._batchState;return"searching"in e?e.searching:this.state.searching},this._cancelSearch=()=>{this._fts.cancel(),this._commonGroupSearch.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.reset(),this._ftsPromise&&this._ftsPromise.cancel(),this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this.setState({groupChats:[]}),this.isFTSSearching()&&this.debounceSetState({searching:!1},ne)},this._cancelThrottled=()=>{this._throttledFilteredChats.cancel(),this._throttledFilteredContacts.cancel(),this._throttledOnScroll.cancel()},this.handleStopSearch=()=>new Promise((e=>{var t;this._isEmptyFilterQuery(this.searchQuery.filter)||(t=this._smbFilterSession.sessionId,new U.default.ChatFilterEvent({actionType:U.default.CHAT_FILTER_ACTION_TYPES.SEARCH_WITH_FILTER,filterType:U.default.CHAT_FILTER_TYPES.OTHER_LABELS,sessionId:t}).commit()),this._cancelSearch(),this.searchQuery.clear(),this._cancelThrottled(),null!=this.refSearch&&this.refSearch.reset(),this.setState({chats:this._getFilteredChats(),contacts:this.getFilteredContacts(),searching:!1},(()=>e()))})),this.handleFocusList=e=>{var t;e.repeat||this._refChatlist.current&&(this.refSearch&&!this.refSearch.cursorIsAtEnd()||(e.preventDefault(),A.default.shouldIndicateFocus(),null===(t=this._refChatlist.current)||void 0===t||t.focusFirst()))},this.handleOpenFirst=e=>{e.preventDefault();var t=this.searchQuery.query,a=this.searchQuery.filter,r=this._getFilteredChats(t,a)[0]||this.getFilteredContacts(t,a)[0];r&&(0,M.findChat)(r.id).then((e=>{this.handleStopSearch(),A.default.shouldIndicateFocus(),g.default.openChatFromUnread(e).then((t=>{t&&g.default.focusChatTextInput(e)}))}))},this.handleFocusSearch=()=>{g.default.existsDrawerLeft((e=>{e||(A.default.shouldIndicateFocus(),N.default.focus(this.refSearch))}))},this.indicateFocus=()=>{A.default.maybeIndicateFocus(this._refInputHotkey)},this.handleScroll=e=>{this._throttledOnScroll(e.target)},this.getEmptyChatlistState=(e,t,a,r)=>e&&e.length||t&&t.length||a&&a.length||r&&r.length?null:this.props.labelFilter?this.state.searching?c.default.createElement("span",null):c.default.createElement(y.NoResultForLabel,{labelId:this.props.labelFilter}):this.searchQuery.query?this.state.searching?c.default.createElement(y.Searching,null):c.default.createElement(y.Search,null):h.default.some((e=>e.shouldAppearInList))?c.default.createElement(y.AllArchived,null):c.default.createElement(y.ListChats,null),this._setRefPanel=e=>{this._refPanel=e},this.handleCancelLabelSelection=()=>{this.setState({showMultiSelectBar:!1}),this._multiSelection&&this._multiSelection.unsetAll(),this.selectableState&&this.selectableState.setSelectable(!!this.props.selectable)},this.ftsMsgs=new O.default,this.selection=new $.default([],(e=>e.id.toString())),this.searchQuery=new q.default,this._multiSelection=this.props.multiSelection||new H.default([],(e=>e.id.toString())),this._fts=this.props.debounce((()=>{var e=this.searchQuery.trimmed;this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this.debounceSetState({searching:!0},ne)})).then((()=>this.ftsMsgs.search({count:E.default.FTS_NUM_RESULTS,filter:this.searchQuery.filter,searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((e=>{e&&!e.canceled&&this.debounceSetState({searching:!1},ne)})).catch((0,d.filteredCatch)(b.Unmount,(()=>{}))).catch((0,d.filteredCatch)(Promise.CancellationError,(()=>{}))).finally((()=>{this._ftsPromise=void 0})).catch((()=>{this.isFTSSearching()&&this.debounceSetState({searching:!1},ne)}))}),E.default.FTS_TYPING_DELAY),this._throttledFilteredChats=this.props.throttle(((e,t)=>{var a=this._getFilteredChats(e,t);this.debounceSetState({chats:a},ne,50)}),le,{leading:!1,trailing:!0}),this._throttledFilteredContacts=this.props.throttle(((e,t)=>{var a=this.getFilteredContacts(e,t);this.debounceSetState({contacts:a},ne,50)}),le,{leading:!1,trailing:!0}),this._throttledOnScroll=this.props.throttle((e=>{this.shouldFTSSearch(e)&&this.fullTextSearch()}),100),this._commonGroupSearch=(0,n.default)((()=>{var e=this.searchQuery.trimmed;if(e){var t=this.getFilteredContacts(e,{},!0);if(0===t.length||t.length>5)this.setState({groupChats:[]});else{var a=(0,l.default)(t,(e=>(0,T.findCommonGroups)(e).then((()=>e.commonGroups)).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))));this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this._findCommonGroupsPromise=Promise.all(a).then((a=>{if(e===this.searchQuery.trimmed){var r=this._mapGroupToContacts(a,t);this.setState({groupChats:r})}})).catch((()=>{})).finally((()=>{this._findCommonGroupsPromise=null}))}}else this.setState({groupChats:[]})}),750);var{labelFilter:t}=this.props,a=this.props.labelFilter?{label:t}:void 0;this.state={searching:!!a,chats:this._getFilteredChats("",a),contacts:this.getFilteredContacts("",a),groupChats:[],showMultiSelectBar:!1,chatlistKeyId:0,filterPreset:a,textsize:C.default.get().textsize},this.searchQuery.updateLabelQuery(a),this._getFilteredMessages(a)}componentDidMount(){var{labelFilter:e,listeners:t}=this.props;e&&this.handleSearch("",{label:e}),this._updateLabelFeatureFlagChange(),t.add(D.default,D.default.FEATURE_CHANGE_EVENT,this._updateLabelFeatureFlagChange),this.props.listeners.add(h.default,"remove",(e=>{if(this.searchQuery.query){var t=(0,s.default)(this.state.chats,e);this.state.chats&&t.length!==this.state.chats.length&&this.debounceSetState({chats:t})}else this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()})})),this.props.listeners.add(S.default,"remove",(e=>{if(this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter)){var t=(0,s.default)(this.state.contacts,e);this.state.contacts&&t.length!==this.state.contacts.length&&this.debounceSetState({contacts:t})}else this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()})})),this.props.listeners.add(h.default,"sort change:archive",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(S.default,"sort",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()}))})),this.props.listeners.add(this.ftsMsgs,"bulk_remove reset",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(g.default,"focus_chat_search",this.handleFocusSearch),this.props.listeners.add(g.default,"textsize_change",(e=>{this.debounceSetState({textsize:e})})),this.props.listeners.add(V.default,E.default.NEW_MSG_SENT,(()=>{this._hasSearchText()||!this._isEmptyFilterQuery(this.searchQuery.filter)?this.handleStopSearch().then((()=>this._scrollChatListToTop())):this._scrollChatListToTop()}))}getClientWidth(){var e;return null===(e=this._refContainer.current)||void 0===e?void 0:e.clientWidth}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}componentWillUnmount(){this._cancelSearch(),this._cancelThrottled(),this._debounceSetState.cancel()}_isEmptyFilterQuery(e){return!e||!(e.label||e.kind)}_showUnread(){}_showArchivedPanel(){return(0,w.archiveV2Supported)()&&this.props.settings.showArchiveV2&&!this.state.showMultiSelectBar&&this.searchQuery.isEmptyQuery&&this.state.chats&&this.state.chats.length>0&&h.default.some((e=>e.archive))}render(){var{chats:e,contacts:t,groupChats:a,filterPreset:r,messages:i}=this.state,s=this.ftsMsgs.toArray(),l=this.getEmptyChatlistState(e,t,s,i);null==l&&(l=c.default.createElement(p.default,{key:this.state.chatlistKeyId,ref:this._refChatlist,flatListController:this.flatListController,chats:e,contacts:t||[],messages:i||[],filterPreset:r,groupChats:a,isSearching:!!this._hasSearchText(),searchQuery:this.searchQuery,ftsResult:s,selection:this.selection,onFocusSearch:this.handleFocusSearch,multiSelection:this._multiSelection,selectableState:this.selectableState}));var n,d={down:this.handleFocusList},u=this.state.searching&&this.props.labelFilter||this.state.searching&&this.ftsMsgs.length?c.default.createElement("div",{key:"spinner",className:v.default.spinner},c.default.createElement(X.default,{stroke:6,size:24})):null,h=E.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));h&&(n=h.classname);var g,S,C,y,b,M=(0,o.default)(v.default.chatListPanel,n),T=this.ftsMsgs.hasMoreMsgs&&s.length||this._showUnread()?this.handleScroll:void 0;if(this.state.showMultiSelectBar?g=c.default.createElement(te.default,{key:"multiSelectBar",displayName:"MultiSelect",escapable:!0,requestDismiss:this.handleCancelLabelSelection},c.default.createElement(j.default,{theme:"chatlist-panel",selectedModels:this._multiSelection,labelEditEnabled:!0,iconColor:"#8d9194",onCancel:this.handleCancelLabelSelection})):C=c.default.createElement(R.default,{key:"ListSearchHotKey",handlers:d,onFocus:this.indicateFocus,onRef:this._setRefInputHotkey,className:v.default.panelSearch},c.default.createElement(B.default,{ref:this.setRefSearch,onSearch:this.handleSearch,onEnter:this.handleOpenFirst,loading:this.state.searching,smbFilterSession:this._smbFilterSession,listFilterEnabled:!0})),this.props.labelFilter||(S=c.default.createElement(c.default.Fragment,null,c.default.createElement(_.default,{mute:W.default.globalMute(),settings:this.props.settings}),c.default.createElement(m.default,null),C,g)),this._showArchivedPanel()&&(y=c.default.createElement(f.default,null)),D.default.supportsFeature(D.default.F.MD_BACKEND)&&this._hasSearchText()){var P=re.default.relativeDateStr((0,ie.getHistorySyncEarliestDate)());b=c.default.createElement(se.default,{icon:c.default.createElement(Z.default,{name:"content-search"}),theme:"list",secondary:L.default.t(643,{date:P})},L.default.t(827))}return c.default.createElement("div",{id:"side",className:M,ref:this._refContainer},S,c.default.createElement(I.default,{flatListControllers:[this.flatListController],onRef:this._setRefPanel,className:v.default.panelBody,onScroll:T,id:"pane-side"},y,l,u,b))}}oe.CONCERNS={settings:["showArchiveV2"]},oe.displayName="ChatlistPanel";var de=(0,K.default)((0,ee.default)((0,G.default)((0,J.default)(oe,oe.CONCERNS))));t.default=class extends de{getClientWidth(){return this.getComponent().getClientWidth()}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},66875:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=r(a(20451)),o=i(a(29439)),d=i(a(80896));class u extends l.Component{constructor(e){super(e),this._handleSelectableChange=()=>{this.forceUpdate()},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this._handleSelect=e=>{e&&e.stopPropagation();var t,{onSelect:a,model:r}=this.props,{selected:i}=this.state;i?(this.setState({selected:!1,partialSelected:!1}),t=!1):t=!0,a&&a(r,t,!1)};var{multiSelection:t,initialSelection:a,model:r}=this.props,i=!1,s=!1;switch(a){case 0:i=!1,s=!1;break;case 1:i=!0,s=!1;break;case 2:i=!0,s=!0;break;default:i=t.isSelected(r),s=!1}this.state={selected:i,partialSelected:s,modelId:r.id.toString()}}componentDidMount(){this.props.listeners.add(this.props.multiSelection,this.props.model.id.toString(),this._handleSelectChange),this.props.selectableState&&this.props.listeners.add(this.props.selectableState,"all",this._handleSelectableChange)}componentDidUpdate(e){var{model:t,multiSelection:a,listeners:r}=e,i=t.id.toString(),s=this.props.model.id.toString();a&&i!==s&&(r.remove(a,i,this._handleSelectChange),r.add(a,s,this._handleSelectChange))}static getDerivedStateFromProps(e,t){var{modelId:a}=t,{multiSelection:r,model:i}=e,s=i.id.toString();return r&&a!==s?{modelId:s,selected:r.isSelected(i)}:null}render(){var{theme:e,selectableState:t,children:a}=this.props,r=(0,s.default)(o.default.checkboxChatControl,{[o.default.labelSelection]:"label-selection"===this.props.theme}),i=t&&t.isSelectable,d={};if(i&&e&&Object.assign(d,{theme:e}),i&&Object.assign(d,{noContext:!0}),null==a)return null;var u=l.Children.toArray(a)[0],c="label-selection"===e?this._handleSelect:null;return l.default.createElement("div",{className:o.default.checkboxChatWrapper,onClick:c},i&&l.default.createElement("div",{className:r,onClick:this._handleSelect},l.default.createElement(n.default,{onChange:this._handleSelect,checked:this.state.selected,theme:this.state.selected&&this.state.partialSelected?n.CHECKBOX_THEME.PARTIAL:void 0})),(0,l.cloneElement)(u,d))}}u.displayName="CheckboxWrapper";var c=(0,d.default)(u);t.default=c},50291:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),l=r(a(67294)),n=r(a(4457)),o=i(a(37058)),d=i(a(80896)),u=i(a(4328));class c extends l.Component{constructor(e){super(e),this._refBottomDiv=(0,l.createRef)(),this._renderPills=e=>{var{useShortName:t,isDisabled:a,onDelete:r}=this.props;return e.length?e.map((e=>{var i=a&&a(e.id)?null:{onDelete:r};return l.default.createElement(n.default,(0,s.default)({contact:e,useShortName:t},i,{type:n.Type.SMALL,key:e.id.toString(),theme:"list-names",waitIdle:!0}))})):null},this.props.listeners.add(this.props.selections,"all",((e,t)=>{this.forceUpdate((()=>{t&&this._scrollLastContactIntoView()}))}))}componentDidMount(){this.forceUpdate()}_scrollLastContactIntoView(){this._refBottomDiv.current instanceof HTMLDivElement&&this._refBottomDiv.current.scrollIntoView({behavior:"smooth"})}render(){return l.default.createElement(u.default,{transitionName:"slide-up-down-footer",className:o.default.selectedListContainer},this._renderPills(this.props.selections.getSelected()),l.default.createElement("div",{className:o.default.bottomDiv,ref:this._refBottomDiv}))}}c.displayName="ContactSelectionPill";var f=(0,d.default)(c);t.default=f},33913:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=i(a(63337)),n=r(a(67294)),o=i(a(55847)),d=i(a(75444)),u=i(a(7970)),c=i(a(67755)),f=i(a(9908)),h=a(34605),p=i(a(80162)),m=i(a(18627)),_=i(a(64190)),v=i(a(64968)),g=i(a(80896)),E=i(a(72462)),S=i(a(33048)),C=i(a(69507)),y=i(a(32885)),b=i(a(47809)),M=i(a(26144)),T=i(a(11918)),I=i(a(4328)),P=()=>{};class A extends n.Component{constructor(...e){super(...e),this.state={searchText:"",searchLabel:null,searchKind:null,isSearching:!1,contextMenu:null},this._emojiInputComponent=(0,c.default)(),this.refInput=(0,n.createRef)(),this.refContainer=(0,n.createRef)(),this._disableOnBlur=!1,this.handleBlur=()=>{this._disableOnBlur||this.props.setTimeout((()=>{this.state.searchText||this.state.searchLabel||this.state.searchKind||this.handleCancel()}),0)},this._handleChange=e=>{this.setState({searchText:e},(()=>{this.props.onSearch(e,{label:this.state.searchLabel,kind:this.state.searchKind})}))},this._renderSmbSearchKindDropDownItem=(e,t,a)=>{var r=`chat_filter_${e}`;return n.default.createElement(u.default,{a8n:r,key:r,action:this._updateSearchFilter.bind(this,{kind:e})},n.default.createElement("div",{className:v.default.kind},n.default.createElement(y.default,{name:t}),n.default.createElement("div",{className:v.default.kindName},a)))},this._renderMsgTypeFilter=()=>"chat-msg-search"===this.props.type?[]:[n.default.createElement("div",{className:v.default.filterTitle,key:"chat_filter_kind_header"},p.default.t(1778)),this._renderSmbSearchKindDropDownItem(d.default.SMB_SEARCH_FILTERS.UNREAD,"search-unread",p.default.t(1498)),this._renderSmbSearchKindDropDownItem(d.default.SMB_SEARCH_FILTERS.GROUP,"group",p.default.t(1894)),this._renderSmbSearchKindDropDownItem(d.default.SMB_SEARCH_FILTERS.BROADCAST,"search-broadcasts",p.default.t(1497))],this._renderFilterLabels=()=>{var e=m.default.toArray().reduce(((e,t)=>t.name&&t.count&&0!==t.count?[...e,n.default.createElement(u.default,{a8n:`label_item_${t.id}`,key:`label_item_${t.id}`,action:this._updateSearchFilter.bind(this,{label:t.id})},n.default.createElement("button",{className:v.default.labels},n.default.createElement(_.default,{labels:[t.id],showName:!0,theme:"label-filter"})))]:e),[]);return e.length>0?[n.default.createElement("div",{className:v.default.filterTitle,key:"chat_filter_label_header"},p.default.t(1500)),...e]:[]},this._renderFilterSelectorMenu=()=>[...this._renderMsgTypeFilter(),...this._renderFilterLabels()],this.handleCancel=()=>{var e=this.refInput&&this.refInput.current;e&&!this.state.contextMenu&&(e.reset(),e.blur(),this.setState({searchLabel:null,searchKind:null,searchText:"",isSearching:!1}),this.props.onSearch("",void 0))},this.handleReset=e=>{e.stopPropagation(),this.focus();var t=this.refInput.current;t&&(t.reset(),this.setState({searchLabel:null,searchKind:null}),this.props.onSearch("",void 0))},this._handleSearchButtonClick=()=>{this.focus()},this._handleSearchOn=()=>{this.setState({isSearching:!0}),this.props.setTimeout(this.focus,0)},this.focus=()=>{(0,l.default)(this.refInput.current,"this.refInput.current").focus()},this._showFilterSelector=e=>{var t,{smbFilterSession:a}=this.props;a&&(t=a.newSessionId(),new E.default.ChatFilterEvent({actionType:E.default.CHAT_FILTER_ACTION_TYPES.OPEN,sessionId:t}).commit()),e.stopPropagation(),this.setState({contextMenu:{menu:this._renderFilterSelectorMenu(),anchor:e.target}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._updateSearchFilter=e=>{var{smbFilterSession:t}=this.props;this.state.contextMenu&&this.closeContextMenu(),this.setState({searchLabel:e.label,searchKind:e.kind}),t&&function(e,t){new E.default.ChatFilterEvent({actionType:E.default.CHAT_FILTER_ACTION_TYPES.SELECT_FILTER,filterType:O(t),sessionId:e}).commit()}(t.sessionId,e),this.props.onSearch("",e)},this._labelSelectorMouseEnter=()=>{(0,h.canDisplayLabel)()&&(this._disableOnBlur=!0)},this._labelSelectorMouseLeave=()=>{this._disableOnBlur=!1},this.handleContextClose=()=>{this.setState({contextMenu:null})},this._constructSearchPlaceholder=e=>n.default.createElement("div",{"data-a8n":o.default.key("input-placeholder"),className:v.default.labelSearchPlaceholder},e)}componentWillUnmount(){this.handleCancel()}componentDidMount(){this._checkIfActive(),this.props.listeners.add(S.default,d.default.NEW_MSG_SENT,(()=>{(this.state.searchKind||this.state.searchLabel)&&this.handleCancel()}))}componentDidUpdate(){this._checkIfActive()}indicateFocus(){f.default.shouldIndicateFocus(),f.default.maybeIndicateFocus(this.refContainer.current)}_checkIfActive(){if(this.state.isSearching&&!this.state.searchText&&!this.state.searchLabel&&!this.state.searchKind){var e=this.refContainer&&this.refContainer.current;e&&e.contains(document.activeElement)||this.handleCancel()}}cursorIsAtEnd(){return(0,l.default)(this.refInput.current,"this.refInput.current").cursorIsAtEnd()}select(){(0,l.default)(this.refInput.current,"this.refInput.current").select()}reset(){var e=this.refInput.current;e&&e.reset()}render(){var e,{loading:t,placeholder:a,spellCheck:r,listFilterEnabled:i}=this.props,{isSearching:l,searchText:u,searchLabel:c,searchKind:f}=this.state,_=null;l&&(t?_=n.default.createElement("div",{className:v.default.iconSpinner,key:"icon-clear-search",onClick:this.handleReset},n.default.createElement(C.default,{size:20,stroke:5,color:"highlight"})):u.length||c||f?_=n.default.createElement("button",{className:v.default.iconCloseSearch,key:"icon-clear-search",onClick:this.handleReset},n.default.createElement(y.default,{name:"x-alt"})):(0,h.canDisplayLabel)()&&i&&(_=n.default.createElement("button",{className:v.default.iconLabelSelect,key:"icon-select-label",onClick:this._showFilterSelector},n.default.createElement(y.default,{name:"filter"})))),l&&(e=n.default.createElement(M.default,{displayName:"ListSearch",escapable:!0,requestDismiss:this.handleCancel,requestFocus:this.focus,requestRecentFocusOnUnmount:!1}));var g,E,S=a||p.default.t(1442),b=l?this.handleCancel:this._handleSearchButtonClick,A=(0,s.default)(v.default.listSearch,{[v.default.active]:l||c||f});this.state.contextMenu&&(g=n.default.createElement(M.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.handleContextClose,requestRecentFocusOnUnmount:!1},n.default.createElement(T.default,{contextMenu:this.state.contextMenu}))),!u&&(0,h.canDisplayLabel)()&&(c?E=this._constructSearchPlaceholder(p.default.t(999,{labelName:m.default.assertGet(c).name})):f===d.default.SMB_SEARCH_FILTERS.GROUP?E=this._constructSearchPlaceholder(p.default.t(1499)):f===d.default.SMB_SEARCH_FILTERS.UNREAD?E=this._constructSearchPlaceholder(p.default.t(1501)):f===d.default.SMB_SEARCH_FILTERS.BROADCAST&&(E=this._constructSearchPlaceholder(p.default.t(1496))));var N=this._emojiInputComponent;return n.default.createElement("div",{ref:this.refContainer,onMouseEnter:this._labelSelectorMouseEnter,onMouseLeave:this._labelSelectorMouseLeave,className:A},n.default.createElement("button",{"data-a8n":o.default.key("icon-search-morph"),className:v.default.iconSearchMorph,onMouseDown:b},n.default.createElement("div",{className:(0,s.default)(v.default.iconMorph,v.default.iconMorphBack)},n.default.createElement(y.default,{name:"back"})),n.default.createElement("div",{className:(0,s.default)(v.default.iconMorph,v.default.iconMorphSearch)},n.default.createElement(y.default,{name:"search"}))),n.default.createElement(I.default,{transitionName:"pop"},_,g),n.default.createElement("div",{"data-a8n":o.default.key("input-placeholder"),className:v.default.inputPlaceholder},u?null:S),E,n.default.createElement("label",{className:v.default.contInputSearch},n.default.createElement(N,{a8n:"chat-list-search",ref:this.refInput,theme:"list-search",tabOrder:d.default.TAB_ORDERS.CHAT_LIST_SEARCH,spellCheck:r,onBlur:this.handleBlur,onFocus:l?P:this._handleSearchOn,onChange:l?this._handleChange:P,onEnter:this.props.onEnter})),e)}}A.displayName="ListSearch";var N=(0,b.default)((0,g.default)(A));function O(e){switch(e.kind){case d.default.SMB_SEARCH_FILTERS.UNREAD:return E.default.CHAT_FILTER_TYPES.UNREAD;case d.default.SMB_SEARCH_FILTERS.GROUP:return E.default.CHAT_FILTER_TYPES.GROUP;case d.default.SMB_SEARCH_FILTERS.BROADCAST:return E.default.CHAT_FILTER_TYPES.BROADCAST_LIST;default:return E.default.CHAT_FILTER_TYPES.OTHER_LABELS}}t.default=class extends N{focus(){this.getComponent().focus()}cursorIsAtEnd(){return this.getComponent().cursorIsAtEnd()}reset(){this.getComponent().reset()}select(){this.getComponent().select()}}},87454:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SEARCH_EVENT=void 0;var i=r(a(39693)),s=r(a(44908)),l=r(a(14090)),n="SEARCH_EVENT";t.SEARCH_EVENT=n;class o extends l.default{constructor(...e){super(...e),this.query="",this.filter={}}get trimmed(){return this.query.trim()}get highlighted(){var e=this.trimmed.toLowerCase().split(" ");return(0,s.default)((0,i.default)(e))}get _isEmptySearchTerm(){return""===this.trimmed||!this.trimmed}get isEmptyQuery(){return this._isEmptySearchTerm&&!this.filter.kind&&!this.filter.label}updateQuery(e){var t=this.query;this.query=e,e.trim()!==t&&this.trigger(n)}updateLabelQuery(e){this.filter=e||{}}clear(){this.updateQuery("")}}t.default=o},47383:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleLabel=function({children:e}){return i.default.createElement("span",{"aria-label":e})};var i=r(a(67294))},29531:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(24788),l=i(a(63337)),n=r(a(67294)),o=a(84481),d=i(a(61433)),u=i(a(33766)),c=i(a(51115)),f=i(a(75444)),h=i(a(26790)),p=a(54438),m=r(a(12536)),_=a(26226),v=i(a(77188)),g=i(a(91730)),E=i(a(83288)),S=i(a(80162)),C=i(a(80896)),y=i(a(70310)),b=i(a(79366)),M=i(a(71461)),T=a(73525),I=i(a(11761)),P=a(50117),A=a(75104),N=a(38245),O=r(a(48847)),D=a(10793),w=i(a(35822));function R(e){switch(e){case 1:return S.default.t(848);case 8:return S.default.t(850);case 24:return S.default.t(847);case 168:return S.default.t(849);default:return __LOG__(2)`DoNotDisturbSettings:globalMuteDurationLabel non standard global mute duration:${e}`,S.default.t(846)}}class k extends n.PureComponent{constructor(...e){super(...e),this._onAttachProduct=({product:e,onSend:t})=>{u.default.openModal(n.default.createElement(I.default,{product:e,onSend:t}),{transition:"modal-flow",uim:this.props.uim})},this._onProductImageViewer=(e,t)=>{u.default.openModalMedia(n.default.createElement(M.default,{activeProductImage:e.activeProductImage,productImageCollection:e.productImageCollection,getZoomNode:e.getZoomNode,product:e.product,sessionId:t}),{transition:"media-viewer",uim:this.props.uim})},this.openGroupV4InviteRequestFlow=(e,t,a,r)=>{u.default.openModal(n.default.createElement(g.default,{participantNeedInvite:e,groupGid:t,subject:a,groupDesc:r}))},this.onToggleMute=(e,t)=>{if(t){var a=S.default.t(1177,{name:e.title()});u.default.openModal(n.default.createElement(b.default,{title:a,mute:e.mute,onMute:t=>{e.pendingAction++,e.mute.mute(t,!0).finally((()=>{e.pendingAction--}))}}),{transition:"modal",uim:this.props.uim})}else e.pendingAction++,e.mute.unmute(!0).finally((()=>{e.pendingAction--}))},this._onToggleMuteAll=(e,t)=>{t?u.default.openModal(n.default.createElement(b.default,{mute:e,title:S.default.t(1570),onMute:(t,a)=>{e.mute(t),u.default.openToast(n.default.createElement(O.default,{msg:R(a),id:(0,O.genId)()}))},muteAll:!0}),{transition:"modal",uim:this.props.uim}):u.default.openModal(n.default.createElement(c.default,{onOK:()=>{e.unmute(),u.default.closeModal(),u.default.openToast(n.default.createElement(O.default,{msg:S.default.t(852),id:(0,O.genId)()}))},okText:S.default.t(91),onCancel:()=>u.default.closeModal(),cancelText:S.default.t(1768)},S.default.t(619)))},this.onDeleteOrExit=e=>{var t,a=t=>{e.pendingAction++,t.finally((()=>{e.pendingAction--}))},r=e.isGroup&&e.isReadOnly||e.isUser||e.isBroadcast,i=()=>u.default.openModal(n.default.createElement(h.default,{chat:e,onDeleteOrExit:a,isDelete:r}),{transition:"modal",uim:this.props.uim}),s=null!==(t=(0,l.default)(y.default,"localStorage").getItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";v.default.supportsFeature(v.default.F.MD_BACKEND)&&r&&"true"===s?u.default.openModal(n.default.createElement(c.default,{title:S.default.t(1908),onOK:()=>{(0,l.default)(y.default,"localStorage").setItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),i()},okText:S.default.t(1787),onCancel:()=>u.default.closeModal()},n.default.createElement(N.TextDiv,{theme:"muted"},S.default.t(1907)))):i()},this.onPin=(e,t)=>{v.default.supportsFeature(v.default.F.MD_BACKEND)?u.default.openModal(n.default.createElement(c.default,{title:S.default.t(1918),onOK:()=>{u.default.closeModal()},okText:S.default.t(1779)},S.default.t(1917))):(e.pendingAction++,(0,A.setPin)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--})))},this.onClear=e=>{var t,a=()=>u.default.openModal(n.default.createElement(d.default,{chat:e}),{transition:"modal",uim:this.props.uim}),r=null!==(t=(0,l.default)(y.default,"localStorage").getItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";v.default.supportsFeature(v.default.F.MD_BACKEND)&&"true"===r?u.default.openModal(n.default.createElement(c.default,{title:S.default.t(1908),onOK:()=>{(0,l.default)(y.default,"localStorage").setItem(f.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),a()},okText:S.default.t(1787),onCancel:()=>u.default.closeModal()},n.default.createElement(N.TextDiv,{theme:"muted"},S.default.t(1907)))):a()},this.onArchive=(e,t)=>{e.pendingAction++,(0,P.setArchive)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--}))},this.onMarkUnread=(e,t)=>{e.pendingAction++,(0,D.markUnread)(e,t).finally((()=>{e.pendingAction--}))},this._onSendStarMsgs=(e,t,a,r="LEFT")=>{if(!t)return Promise.reject(new m.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new m.ActionError);var i=a||(0,o.genId)(),l=t.length,d={count:l,_plural:l},c=new o.ActionType(S.default.t(157,d)),f=e.sendStarMsgs(t,!0).then((()=>new o.ActionType(S.default.t(156,d),{actionText:S.default.t(211),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,i,r)}))).catch((0,s.filteredCatch)(p.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new o.ActionType(S.default.t(154,d)):new o.ActionType(S.default.t(155,d)):void 0))).catch((()=>(__LOG__(3)`chatAction:sendStarMsgs dropped`,new o.ActionType(S.default.t(155,d),{actionText:S.default.t(207),actionHandler:this._onSendStarMsgs.bind(this,e,t,i,r)}))));return u.default.openToast(n.default.createElement(o.ActionToast,{id:i,toastPosition:r,initialAction:c,pendingAction:f})),f},this._onSendUnstarMsgs=(e,t,a,r="LEFT")=>{if(!t)return Promise.reject(new m.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new m.ActionError);var i=a||(0,o.genId)(),l=t.length,d={count:l,_plural:l},c=new o.ActionType(S.default.t(163,d)),f=e.sendStarMsgs(t,!1).then((()=>new o.ActionType(S.default.t(161,d),{actionText:S.default.t(211),actionHandler:this._onSendStarMsgs.bind(this,e,t,i,r)}))).catch((0,s.filteredCatch)(p.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new o.ActionType(S.default.t(159,d)):new o.ActionType(S.default.t(160,d)):void 0))).catch((()=>(__LOG__(3)`chatAction:sendUnstarMsgs dropped`,new o.ActionType(S.default.t(160,d),{actionText:S.default.t(207),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,i,r)}))));return u.default.openToast(n.default.createElement(o.ActionToast,{id:i,toastPosition:r,initialAction:c,pendingAction:f})),f},this._onSendDeleteMsgs=(e,t,a,r,i="LEFT")=>{if(!t)return Promise.reject(new m.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new m.ActionError);var s=t.length,l=r||(0,o.genId)(),d={count:s,_plural:s},c=new o.ActionType(S.default.t(153,d)),f=e.sendDeleteMsgs(t,a).then((e=>{if(e===s)return new o.ActionType(S.default.t(152,d));var t=s-e;return d={count:t,_plural:t},new o.ActionType(S.default.t(151,d))})).catch((()=>(__LOG__(3)`chatAction:sendDeleteMsgs dropped`,new o.ActionType(S.default.t(151,d),{actionText:S.default.t(207),actionHandler:this._onSendDeleteMsgs.bind(this,e,t,!1,l,i)}))));return u.default.openToast(n.default.createElement(o.ActionToast,{id:l,toastPosition:i,initialAction:c,pendingAction:f})),f},this._onSendRevokeMsgs=(e,t,a,r,i="LEFT")=>{var s=r;if(!t)return Promise.reject(new m.ActionError);var[l,d]=t.reduce(((e,t)=>{var[a,r]=[t.canRevoke(),t.type!==f.default.MSG_TYPE.GROUPS_V4_INVITE||t.isGroupsV4InviteExpired?null:t];return[e[0]||!a,e[1]||r]}),[!1,null]);if(l)return Promise.reject(new m.ActionError);d&&this._handleGroupInviteMsgRevoke(e,d);var c=t.length;s=s||(0,o.genId)();var h={count:c,_plural:c},p=new o.ActionType(S.default.t(153,h)),_=e.sendRevokeMsgs(t,a).then((e=>{var t=e.filter((e=>e!==T.SendMsgResult.OK)).length;if(t>0)throw new Error(`${t} / ${e.length} dropped`);return new o.ActionType(S.default.t(152,h))})).catch((()=>(__LOG__(3)`chatAction:sendRevokeMsgs fail`,e.isEphemeralSettingOn()?new o.ActionType(S.default.t(150,h)):new o.ActionType(S.default.t(151,h)))));return u.default.openToast(n.default.createElement(o.ActionToast,{id:s,toastPosition:i,initialAction:p,pendingAction:_})),_},this._handleGroupInviteMsgRevoke=(e,t)=>{var a=t.inviteGrp,r=(0,_.getMaybeMeUser)().toString();w.default.revokeGroupV4Invite([t.to.toString()],a,r)}}componentDidMount(){this.props.listeners.add(u.default,"mute_all",this._onToggleMuteAll),this.props.listeners.add(u.default,"mute_chat",this.onToggleMute),this.props.listeners.add(u.default,"delete_or_exit_chat",this.onDeleteOrExit),this.props.listeners.add(u.default,"archive_chat",this.onArchive),this.props.listeners.add(u.default,"clear_chat",this.onClear),this.props.listeners.add(u.default,"mark_chat_unread",this.onMarkUnread),this.props.listeners.add(u.default,"pin_chat",this.onPin),this.props.listeners.add(u.default,"send_star_msgs",this._onSendStarMsgs),this.props.listeners.add(u.default,"send_unstar_msgs",this._onSendUnstarMsgs),this.props.listeners.add(u.default,"send_delete_msgs",this._onSendDeleteMsgs),this.props.listeners.add(u.default,"send_revoke_msgs",this._onSendRevokeMsgs),this.props.listeners.add(u.default,"product_image_viewer_modal",this._onProductImageViewer),this.props.listeners.add(u.default,"attach_product",this._onAttachProduct),this.props.listeners.add(u.default,"open_group_v4_invite_request_flow",this.openGroupV4InviteRequestFlow)}render(){return null}}k.displayName="ActionListener";var L=(0,E.default)((0,C.default)(k));t.default=L},54578:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(9019),l=a(24788),n=i(a(41143)),o=r(a(67294)),d=i(a(33766)),u=a(75941),c=i(a(42529)),f=i(a(86231)),h=i(a(59979)),p={duration:300,easing:[.1,.82,.25,1]};class m extends o.Component{constructor(...e){super(...e),this.containerHeight=0,this._childAnimations=[],this.didCancel=!1,this._unmounting=!1,this.state={children:this.props.children},this._refChildren=new Map,this._setRefChild=(e,t)=>{t?this._refChildren.set(e,t):this._refChildren.delete(e)},this._setChildRefCache=new f.default(this._setRefChild),this._heightCallbackCache=new Map}componentWillUnmount(){this._unmounting=!0}_getHeightChange(e,t){return e.reduce(((e,a)=>{if(a<t)return e;var r=this._refChildren.get(`${a}`);return r?e+r.clientHeight:e}),0)}_animateElement(e,t,a,r){this._childAnimations[e]&&(this.didCancel=!0,this._childAnimations[e].cancel());var i=a>0?[0,a]:[-a,0];return this._childAnimations[e]=(this._childAnimations[e]||Promise.resolve()).then((()=>(0,h.default)(t,{translateY:i},p))).then((()=>(0,s.delayMs)(100))).cancellable().then((()=>(a<0&&(r.includes(e)?t.style.opacity="0":t.style.transform=""),e))).catch((0,l.filteredCatch)(Promise.CancellationError,(()=>((0,h.default)(t,"stop",!0),t.style.transform="",!1)))).finally((t=>{if(!this.didCancel)return delete this._childAnimations[e],d.default.setUiBusy(!1,"animation_group"),t;this.didCancel=!1})),this._childAnimations[e]}_transitionAffected(e,t){if(!e)return Promise.resolve(new Set);for(var a=[],[r]=e.slice(-1),i=0;i<=r;++i){var s=this._refChildren.get(`${i}`);s&&a.push(this._animateElement(i,s,(t?1:-1)*this._getHeightChange(e,i),e))}return Promise.all(a).then((e=>new Set(e.filter((e=>!1!==e)))))}_notifyHeightChange(e,t){e.length&&this.props.onHeightChange&&this.props.onHeightChange((t?1:-1)*this._getHeightChange(e,0))}static getDerivedStateFromProps(e,t){var a=e.children,r=t.children,i=!1,s=r.map(((e,t)=>{var r,s=null!==(r=a[t])&&void 0!==r?r:e;return s!==e&&(i=!0),s}));return i?{children:s}:null}componentDidUpdate(e,t){var a=this.state.children,r=t.children;(0,n.default)(a.length===r.length&&this.props.children.length===a.length,"The number of children in an AnimationGroup must remain constant. Render null for children you don't want to appear.");var i=a.map(((e,t)=>t)),s=i.filter((t=>null!=this.props.children[t]&&null==e.children[t])),l=i.filter((t=>null==this.props.children[t]&&null!=e.children[t]));l.length>0&&(l.forEach((()=>{this.busyId=u.UIBusyTasks.setBusy(this.busyId),d.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(l,!1),this._transitionAffected(l,!1).then((e=>{this._unmounting||0!==e.size&&this.setState((t=>({children:t.children.map(((t,a)=>e.has(a)?null:t))})),(()=>{u.UIBusyTasks.decBusy(this.busyId)}))}))),s.length>0&&(s.forEach((()=>{this.busyId=u.UIBusyTasks.setBusy(this.busyId),d.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(s,!0),this._transitionAffected(s,!0).then((()=>{u.UIBusyTasks.decBusy(this.busyId)})))}componentDidMount(){var e=this.state.children.reduce(((e,t,a)=>{var r=this._refChildren.get(`${a}`);return r?(r.style.transform="translateY(0)",e+r.clientHeight):e}),0);this.props.onHeightChange(e,!0)}_childHeightCallback(e){var t=this._heightCallbackCache.get(e);if(t)return t;var a=this._refChildren.get(`${e}`),r=a?a.clientHeight:0,i=({height:e})=>{r&&e&&e!==r?(this.props.onHeightChange(e-r),r=e):r=e};return this._heightCallbackCache.set(e,i),i}_cloneChild(e,t){if(!e)return e;var a=this._setChildRefCache.getRefSetter(`${t}`);return(0,o.cloneElement)(e,{ref:a})}render(){return this.state.children.map(((e,t)=>o.default.createElement(c.default,{key:`.${t}`,onResize:this._childHeightCallback(t)},this._cloneChild(e,t))))}}t.default=m,m.displayName="AnimationGroup"},18199:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=(0,i.forwardRef)((function({children:e},t){return i.default.createElement("div",{ref:t},e)}));t.default=s},52087:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(23279)),n=i(a(63337)),o=r(a(67294)),d=i(a(99852)),u=a(44373),c=i(a(1886)),f=i(a(80162)),h=a(50560),p=i(a(42529)),m=i(a(26144)),_=i(a(30882));function v(e){var[t,,a]=e.polygonVertices;return`${(0,n.default)(t.x,"topLeft.x")}:${(0,n.default)(t.y,"topLeft.y")}:${(0,n.default)(a.x,"bottomRight.x")}:${(0,n.default)(a.y,"bottomRight.y")}`}function g(e,t){if(null==e)return null;var a=e.parentNode;if(!(null!=a&&a instanceof HTMLElement))return null;var[r,i,s]=t.polygonVertices;(0,n.default)(r.x,"topLeft.x")!==(0,n.default)(i.x,"topRight.x")&&(0,n.default)(i.y,"topRight.y")!==(0,n.default)(s.y,"bottomRight.y")||([,r,i,s]=t.polygonVertices);var l=(0,n.default)(r.x,"topLeft.x"),o=(0,n.default)(r.y,"topLeft.y"),d=(0,n.default)(i.x,"topRight.x"),u=(0,n.default)(i.y,"topRight.y"),c=(0,n.default)(s.y,"bottomRight.y"),f=l*a.offsetWidth,h=o*a.offsetHeight,p=a.offsetWidth*(l-d),m=a.offsetHeight*(o-u),_=l>d?Math.PI:0,v=p?Math.atan(m/p)+_:0,g=180*v/Math.PI,E=Math.abs(p/Math.cos(v)),S=Math.abs(a.offsetHeight*(c-u)/Math.cos(v));return{left:Math.round(f),top:Math.round(h),width:Math.round(E),height:Math.round(S),transform:`rotate(${g}deg)`,transformOrigin:"top left"}}class E extends o.Component{constructor(...e){super(...e),this._annotationRef=(0,o.createRef)()}componentDidMount(){this.forceUpdate()}render(){var{annotation:e}=this.props;return o.default.createElement("div",{ref:this._annotationRef,className:d.default.annotation,style:g(this._annotationRef.current,e),onClick:t=>this.props.onClick(t,e),onKeyDown:t=>this.props.onKeyDown(t,e),role:"button","aria-label":e.location.name,tabIndex:"0"})}}E.displayName="AnnotationItem";class S extends o.Component{constructor(...e){super(...e),this.state={tooltip:null},this._displayTooltip=(e,t,a)=>{if(null!=t||null!=a){var{location:r}=e,i=(0,h.getMapUrl)((0,n.default)(r.degreesLatitude,"location.degreesLatitude"),(0,n.default)(r.degreesLongitude,"location.degreesLongitude")),l={menu:o.default.createElement(c.default,{href:i,className:d.default.tooltip,onClick:this._hideTooltip},f.default.t(1462)),type:u.MenuType.tooltip,dirX:u.DirX.RIGHT,dirY:u.DirY.TOP};null!=t?(t.persist(),l=(0,s.default)((0,s.default)({},l),{},{event:t,autoFocus:!1,offsetX:0,offsetY:0})):l=(0,s.default)((0,s.default)({},l),{},{anchor:a,autoFocus:!0}),this.setState({tooltip:l},(()=>{this.props.onTooltipDisplay&&this.props.onTooltipDisplay()}))}},this._hideTooltip=()=>{this.setState({tooltip:null},(()=>{this.props.onTooltipDismiss&&this.props.onTooltipDismiss()}))},this._handleAnnotationClick=(e,t)=>{e.stopPropagation(),this._displayTooltip(t,e)},this._handleAnnotationKeyDown=(e,t)=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this._displayTooltip(t,null,e.target))},this.handleResize=(0,l.default)((()=>{this._hideTooltip()}),100)}componentWillUnmount(){this.handleResize.cancel()}render(){var{annotations:e}=this.props;if(!e.length)return null;var t=this.state.tooltip&&o.default.createElement(m.default,{displayName:"InteractiveAnnotationTooltip",popable:!0,escapable:!0,requestDismiss:this._hideTooltip,requestRecentFocusOnUnmount:!1},o.default.createElement(_.default,{tooltip:this.state.tooltip}));return o.default.createElement(o.default.Fragment,null,e.map((e=>function(e){var{polygonVertices:t,location:a}=e,[r,,i]=t;return null!=r&&null!=r.x&&null!=r.y&&null!=i&&null!=i.x&&null!=i.y&&null!=a.degreesLatitude&&null!=a.degreesLongitude}(e)&&o.default.createElement(E,{key:v(e),annotation:e,onClick:t=>this._handleAnnotationClick(t,e),onKeyDown:t=>this._handleAnnotationKeyDown(t,e)}))),t,o.default.createElement(p.default,{onResize:this.handleResize}))}}t.default=S,S.displayName="Annotation"},12666:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{disabled:t}=e,a=(0,n.default)(e.chat,["archive"]),r=e.onArchive.bind(null,!a.archive);return i.default.createElement(s.default,{a8n:"mi-archive",action:r,key:"ArchiveMenuItem",disabled:t},a.archive?l.default.t(1573):l.default.t(236))};var i=r(a(67294)),s=r(a(7970)),l=r(a(80162)),n=r(a(95607))},12001:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(63337)),l=r(a(67294)),n=i(a(33766)),o=i(a(790)),d=i(a(80896)),u=i(a(47809)),c=i(a(89848)),f=r(a(13353));class h extends l.Component{constructor(...e){super(...e),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(f.default.state===f.STATE.CONNECTED){this.checkIteration++;var e=this.props.url;if(this.checkIteration>40)this.handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});else{var t=(0,s.default)(this._audioElement,"this._audioElement"),a=t.buffered;a&&a.length&&a.end(0)>0&&this.handlePlaying({target:t})}}},this.handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.handleOtherPlaying=e=>{e!==this&&(0,s.default)(this._audioElement,"this._audioElement").pause()},this.handlePlaying=e=>{this.clearCheckForSuccess(),n.default.mediaPlaying(this),this.props.onPlay&&this.props.onPlay(e)},this._setRefAudio=e=>{this._audioElement=e,null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){var{listeners:e}=this.props,t=(0,s.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.handlePlayerError,!0),e.add(t,"playing",this.handlePlaying),e.add(n.default,"mediaPlaying",this.handleOtherPlaying),(c.default.isGecko||c.default.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentWillUnmount(){c.default.isBlink&&(0,o.default)((0,s.default)(this._audioElement,"this._audioElement"))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){var e=(0,s.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}render(){return l.default.createElement("audio",{ref:this._setRefAudio,src:this.props.url,className:this.props.className,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,type:this.props.type,autoPlay:this.props.autoPlay},this.props.children)}}h.displayName="AudioTag";var p=(0,d.default)((0,u.default)(h));t.default=p},59297:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{className:t}=e;return s.default.createElement("div",{className:(0,i.default)(l.default.container,t)},s.default.createElement(n.default,{size:50,stroke:3,color:"solidwhite"}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(55897)),n=r(a(69507))},19687:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{theme:t,svg:a}=e,r=(0,i.default)(l.default.badge,{[l.default.pending]:"pending"===t,[l.default.warning]:"warning"===t}),o=a?s.default.createElement(n.default,{className:l.default.icon,name:a}):null;return s.default.createElement("div",{className:r},o)};var i=r(a(94184)),s=r(a(67294)),l=r(a(95258)),n=r(a(32885))},30352:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(58566),l=i(a(67294)),n=r(a(51740)),o=r(a(89848)),d=r(a(82796));class u extends l.PureComponent{constructor(...e){super(...e),this.refVideo=null,this._autoPlayErrorCount=0,this.setRefVideo=e=>{e!==this.refVideo&&(this.refVideo&&this.refVideo.removeEventListener("playing",this.onPlaying),this.refVideo=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:e.src||__LOG__(3)`srcObject is not supported in video tag while src is not set.`,e&&e.addEventListener("playing",this.onPlaying),this.props.autoPlay&&this.setupAutoplay(e,o.default.isGecko||o.default.isSafari)))},this.setupAutoplay=(e,t)=>{this.props.autoPlay&&(e.removeEventListener("playing",this._onceAutoplay),e.addEventListener("playing",this._onceAutoplay),(e.srcObject||t&&e.paused)&&this.play())},this._onceAutoplay=()=>{var e=this.refVideo;if(e&&(e.removeEventListener("playing",this._onceAutoplay),!e.videoHeight||!e.videoWidth)){this.pause(),this.play();var t;this._autoPlayErrorCount<6&&this._autoPlayErrorCount++,this._autoPlayErrorCount>1&&this._autoPlayErrorCount<6&&(t=`the height and width of the video is not zero, count (larger than 1): ${this._autoPlayErrorCount}`),this._autoPlayErrorCount>=6&&(t=`the height and width of the video is not zero, count larger than ${this._autoPlayErrorCount}`),t&&(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${t}`,SEND_LOGS("non-zero height and width"))}},this.onPlaying=()=>{var e=this.refVideo;e&&(e.paused||null!=e.videoHeight&&e.videoHeight>0&&null!=e.videoWidth&&e.videoWidth>0&&this.props.onPlaying&&this.props.onPlaying())},this.getVolume=()=>this.refVideo?this.refVideo.volume:0,this.setVolume=e=>{this.refVideo&&(this.refVideo.volume=e)},this.getMuted=()=>!!this.refVideo&&this.refVideo.muted,this.setMuted=e=>{this.refVideo&&(this.refVideo.muted=e)},this.getPaused=()=>!this.refVideo||this.refVideo.paused,this.getCurrentTime=()=>this.refVideo?this.refVideo.currentTime:0,this.setCurrentTime=e=>{this.refVideo&&(this.refVideo.currentTime=e)},this.getDuration=()=>this.refVideo?this.refVideo.duration:0,this.setDuration=e=>{this.refVideo&&(this.refVideo.duration=e)},this.getBuffered=()=>this.refVideo?this.refVideo.buffered:null}underlyingVideo(){return this.refVideo}componentDidUpdate(e){var t=this.refVideo;null!=t&&this.props.autoPlay&&!e.autoPlay&&this.setupAutoplay(t,!0)}play(){this._play()}_play(){var e=this.refVideo;return e?e.paused?(e.removeEventListener("playing",this.onPlaying),(0,n.default)(e).then((()=>{e&&e.addEventListener("playing",this.onPlaying),this.onPlaying()})).catch((t=>{if(e&&e.addEventListener("playing",this.onPlaying),t.name!==s.ABORT_ERROR){var a=this.refVideo&&this.refVideo.error&&this.refVideo.error.message?this.refVideo.error.message:"",r=this.refVideo&&this.refVideo.error?this.refVideo.error.code:"";__LOG__(3)`video.play() promise rejected: ${a} The error code is ${r}.`,this.props.onError&&this.props.onError(t)}else __LOG__(3)`video.play() promise rejected w/ AbortError: ${t.message}, error code: ${t.code}`}))):Promise.resolve():Promise.reject(new Error("cannot play unmounted video"))}pause(){var e=this.refVideo;e&&(e.paused||e.pause())}pauseAndReset(){var e=this.refVideo;e&&(e.currentTime=0,this.pause())}render(){return l.default.createElement("video",{ref:this.setRefVideo,autoPlay:this.props.src?this.props.autoPlay:void 0,className:this.props.className?this.props.className:d.default.video,controls:this.props.controls,height:this.props.height,loop:this.props.loop,muted:this.props.muted,poster:this.props.poster,src:this.props.src?this.props.src:void 0,width:this.props.width,onClick:this.props.onClick,onAbort:this.props.onAbort,onCanPlay:this.props.onCanPlay,onCanPlayThrough:this.props.onCanPlayThrough,onDurationChange:this.props.onDurationChange,onEmptied:this.props.onEmptied,onEncrypted:this.props.onEncrypted,onEnded:this.props.onEnded,onError:this.props.onError,onLoadedData:this.props.onLoadedData,onLoadedMetadata:this.props.onLoadedMetadata,onLoadStart:this.props.onLoadStart,onPause:this.props.onPause,onPlay:this.props.onPlay,onProgress:this.props.onProgress,onRateChange:this.props.onRateChange,onSeeked:this.props.onSeeked,onSeeking:this.props.onSeeking,onStalled:this.props.onStalled,onSuspend:this.props.onSuspend,onTimeUpdate:this.props.onTimeUpdate,onVolumeChange:this.props.onVolumeChange,onWaiting:this.props.onWaiting},this.props.children)}}t.default=u,u.displayName="BaseVideo"},94965:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement("div",{className:s.default.border})};var i=r(a(67294)),s=r(a(43153))},74724:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(55847)),n=r(a(26150)),o=e=>{var t,a,r=(0,i.default)(e.className,n.default.chat,{[n.default.cartProduct]:"cart-product"===e.theme,[n.default.themeCheckbox]:e.checkbox||"chat-checkbox"===e.theme||"label-list"===e.theme||"chat-checkbox-no-delete"===e.theme||"cell-message-checkbox"===e.theme,[n.default.themeDrawerList]:"drawer-list"===e.theme,[n.default.themeIdentity]:"identity"===e.theme,[n.default.themeListNames]:"list-names"===e.theme||"list-names-no-delete"===e.theme,[n.default.themeMessage]:"cell-message"===e.theme||"cell-message-checkbox"===e.theme,[n.default.themePlain]:"plain"===e.theme,[n.default.themeSearch]:"chat-search"===e.theme,[n.default.themeStatus]:"status-list"===e.theme,[n.default.themeLabel]:"label-selection"===e.theme,[n.default.themeAddItem]:"add-item"===e.theme,[n.default.themeAddItemPlaceholder]:"add-item-placeholder"===e.theme,[n.default.idle]:e.idle,[n.default.member]:"group-modal"===e.theme||"chat-checkbox-no-delete"===e.theme,[n.default.unread]:!!e.unread,[n.default.chatDrag]:!!e.dragging,[n.default.active]:!!e.active,[n.default.isMuted]:!!e.isMuted,[n.default.groupV4Invite]:"group_v4_invite"===e.theme,[n.default.product]:"product"===e.theme||"product-out-of-stock"===e.theme||"product-of-collection"===e.theme||"collection-header"===e.theme||"collection-edit"===e.theme,[n.default.productOfCollection]:"product-of-collection"===e.theme,[n.default.productOutOfStock]:"product-out-of-stock"===e.theme,[n.default.collectionEdit]:"collection-edit"===e.theme,[n.default.collectionHeader]:"collection-header"===e.theme,[n.default.orderProduct]:"order-product"===e.theme,[n.default.media]:"media"===e.theme,[n.default.listButton]:"list-button-compact"===e.theme,[n.default.listMsg]:"list-msg"===e.theme,[n.default.archivePanel]:"archive-panel"===e.theme,[n.default.themeRadioButtonRow]:"radio-button-row"===e.theme});e.image&&(a=e.customImage?e.image:s.default.createElement("div",{className:n.default.chatAvatar},e.image));var o,d,u=null!=e.primaryDetail?s.default.createElement("div",{className:n.default.chatMeta},e.primaryDetail):null;null!=e.secondary&&(d=null!=e.secondaryDetail?s.default.createElement("div",{role:"gridcell","aria-colindex":"1",className:n.default.chatMeta},e.secondaryDetail):null,o=s.default.createElement("div",{className:n.default.chatSecondary},s.default.createElement("div",{className:n.default.chatStatus},e.secondary),d));var c=null!=e.detail?s.default.createElement("div",{className:(0,i.default)(n.default.chatBody,n.default.chatDetails)},e.detail):null,f=l.default.key(null!==(t=e.a8n)&&void 0!==t?t:"chat-card");return s.default.createElement("div",{ref:e.setDivRef,"data-testid":"cell-frame-container","data-a8n":f,className:r,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu},s.default.createElement("div",{className:n.default.image},a),s.default.createElement("div",{className:n.default.chatBody},s.default.createElement("div",{role:"gridcell","aria-colindex":"2",className:(0,i.default)(n.default.chatMain,{[n.default.noDelete]:"list-names-no-delete"===e.theme})},s.default.createElement("div",{className:n.default.chatTitle},e.primary),u),o),c)};t.default=o},83904:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(l.default.chatSubtitle,{[l.default.chatSubtitleHeader]:"title"===e.location});return s.default.createElement("div",{className:t},s.default.createElement(n.default,{titlify:!0,className:l.default.chatSubtitleText,direction:"inherit",text:e.text,selectable:!0}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(65006)),n=r(a(20923))},20451:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({checked:e,id:t,onChange:a,theme:r,disabled:i,tabIndex:c}){var f=(0,l.useRef)(null),h=e&&r===u.PARTIAL,[p,m]=(0,o.default)(),_=(0,d.default)(f,p);return l.default.createElement(l.default.Fragment,null,l.default.createElement("input",{ref:_,className:n.default.a11yHidden,checked:e,disabled:!!i||void 0,indeterminate:!!h||void 0,onChange:function(e){e.stopPropagation();var t=f.current;null!=t&&t.focus(),a(e)},type:"checkbox",id:t,tabIndex:null!=c?c:0}),l.default.createElement("div",{onClick:function(){var e=f.current;null!=e&&e.click()},className:(0,s.default)(n.default.checkboxContainer,{[n.default.containerDisabled]:i,[n.default.itemFocused]:m}),tabIndex:-1,"aria-hidden":"true","data-testid":"visual-checkbox"},l.default.createElement("div",{className:(0,s.default)(n.default.checkbox,{[n.default.checkedCheckbox]:e,[n.default.disabled]:i})},l.default.createElement("div",{className:(0,s.default)(n.default.checkmark,{[n.default.checkedCheckmark]:e&&r!==u.PARTIAL,[n.default.uncheckedCheckmark]:!e,[n.default.partialCheckMark]:h})}))))},t.CHECKBOX_THEME=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(77622)),o=i(a(290)),d=i(a(29918)),u={PARTIAL:"PARTIAL"};t.CHECKBOX_THEME=u},65589:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;e.checked?(a=e.radio?"checkbox-round-radio-checked":"checkbox-round-checked",t="checked"):(t="unchecked",a=e.hover?"checkbox-round-unchecked":"checkbox-round-passive");var r=(0,i.default)(l.default.roundIcon,{[l.default.unchecked]:!e.checked&&e.hover&&!e.systemUncheckedColor,[l.default.passive]:!e.checked&&!e.hover&&!e.systemUncheckedColor,[l.default.uncheckedSystemColor]:!e.checked&&e.systemUncheckedColor});return s.default.createElement(o.default,{className:l.default.container,transitionName:"pop"},s.default.createElement("div",{className:r,key:t,onClick:t=>{t&&t.stopPropagation(),e.onChange()}},s.default.createElement(n.default,{name:a})))};var i=r(a(94184)),s=r(a(67294)),l=r(a(90502)),n=r(a(32885)),o=r(a(4328))},82388:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({type:e,onClick:t,onKeyDown:a,disabled:r,theme:i,overMedia:o}){var p=(0,s.default)(n.default.btn,{[n.default.btnMediaPrev]:e===c.Prev,[n.default.btnMediaNext]:e===c.Next,[n.default.disabledBtn]:r,[n.default.overMedia]:o}),m=f[e],_=h[e];return l.default.createElement(d.default,{className:p,onClick:r?null:t,onKeyDown:a,label:m,theme:i,disabled:r},l.default.createElement(u.default,{name:_,title:m,directional:!0}))},t.ButtonType=void 0;var s=i(a(94184)),l=i(a(67294)),n=i(a(66310)),o=i(a(80162)),d=r(a(93227)),u=i(a(32885)),c=a(54302).Mirrored(["Prev","Next"]);t.ButtonType=c;var f={Prev:o.default.t(1333),Next:o.default.t(1256)},h={Prev:"chevron-left",Next:"chevron-right"}},27122:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(51258)),n=r(a(75444)),o=r(a(49739)),d=({children:e,icon:t,secondary:a,theme:r})=>{var d=(0,i.default)(o.default.container,{[o.default.inConversation]:"conversation"===r,[o.default.inList]:"list"===r});if("conversation"===r){var u=l.default.get("defaultPreference");u&&u.wallpaperColor===n.default.DEFAULT_CHAT_WALLPAPER&&(d=(0,i.default)(d,o.default.defaultWallpaper))}var c=t?s.default.createElement("div",{className:o.default.icon},t):null,f=null!=a?s.default.createElement("div",{className:o.default.secondary},a):null;return s.default.createElement("div",{className:d},c,s.default.createElement("div",{className:o.default.body},s.default.createElement("div",{className:o.default.main},e),f))};t.default=d},35742:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createDataLink=function(e){var t=document.createElement("a"),a=i.default.isBlob(e)||i.default.isData(e);return t.href=a?e:"",t};var i=r(a(97439))},58218:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(97066),n=r(a(7970)),o=r(a(80162)),d=r(a(95607));function u(e){var t,{isReadOnly:a,kind:r}=(0,d.default)(e.chat,["isReadOnly","kind"]);switch(r){case l.CHAT_KIND.GROUP:t=a?o.default.t(1809):o.default.t(1814);break;case l.CHAT_KIND.BROADCAST:t=o.default.t(1810);break;case l.CHAT_KIND.CHAT:t=o.default.t(656)}return s.default.createElement(n.default,{a8n:"mi-delete",action:e.onDeleteOrExit,disabled:e.disabled},t)}var c=(0,s.memo)(u);t.default=c},17367:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSize=A,t.getDefaultIcon=O,t.default=t.DetailImageCommon=t.DETAIL_IMAGE_QUALITY=t.DETAIL_IMAGE_SIZE=void 0;var s=i(a(67154)),l=i(a(81109)),n=i(a(94184)),o=a(78840),d=r(a(67294)),u=i(a(59297)),c=i(a(74798)),f=i(a(26306)),h=r(a(12536)),p=i(a(64774)),m=i(a(23152)),_=i(a(80896)),v=i(a(8238)),g=i(a(44563)),E=a(6578),S=i(a(32885)),C=i(a(95607)),y=i(a(53680)),b={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",AUTO:"AUTO",NONE:"NONE"};t.DETAIL_IMAGE_SIZE=b;var M={LOW:"LOW",HIGH:"HIGH"};t.DETAIL_IMAGE_QUALITY=M;class T extends d.PureComponent{constructor(e){super(e),this._retriedAfter403=!1,this.state={loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:null},this.onLoad=()=>{this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),this.setState({loading:!1,loaded:!0}),this.props.onLoad&&this.props.onLoad()},this.onError=e=>{if(this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),e instanceof h.ServerStatusError){var{profilePicThumb:t}=this.props;switch(e.status){case 403:t.markStale({eurl:!0}),this._retriedAfter403||(this._retriedAfter403=!0,t.validate());break;case 410:t.markStale()}}this.setState({loading:!1,loaded:!1})},this._enableSpinner="business"!==e.theme,e.loader&&this._enableSpinner&&(this._showSpinnerTimeout=new o.ShiftTimer((()=>{this.setState({showSpinner:!0})})),this._showSpinnerTimeout.onOrAfter(100))}static getDerivedStateFromProps(e,t){return t.profilePicThumbImg!==e.profilePicThumbImg?{loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:e.profilePicThumbImg}:{profilePicThumbImg:e.profilePicThumbImg}}componentDidUpdate(e){e.profilePicThumbImg!==this.props.profilePicThumbImg&&this._showSpinnerTimeout&&this._showSpinnerTimeout.onOrAfter(100)}componentWillUnmount(){this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel()}_shouldShowSpinner(){var{profilePicThumb:e,loader:t}=this.props,{loading:a,showSpinner:r}=this.state;return!!this._enableSpinner&&(!!t&&r&&a&&!(!(0,E.unproxy)(e).stale&&!this.props.profilePicThumbImg))}render(){var{profilePicThumbImg:e,spinnerClassName:t,imgClassName:a,alt:r}=this.props,{loading:i,loaded:s}=this.state,o={[f.default.isLoaded]:!i};a&&(o=(0,l.default)((0,l.default)({},o),{},{[a]:"string"==typeof a}));var c,h,p=(0,n.default)(f.default.avatarImage,o);this._shouldShowSpinner()&&(c=d.default.createElement(u.default,{key:"spinner",className:t})),e&&(h=d.default.createElement(m.default,{src:e,hasPrivacyChecks:!0,crossOrigin:!1,className:p,draggable:!1,key:"image",onLoad:this.onLoad,onError:this.onError,alt:r}));var _=this.props.defaultIcon;return d.default.createElement(d.default.Fragment,null,c,_,h)}}function I(e){var t=(0,C.default)(e.profilePicThumb,["imgFull"]);return d.default.createElement(T,(0,s.default)({},e,{profilePicThumbImg:t.imgFull}))}function P(e){var t=(0,C.default)(e.profilePicThumb,["img"]);return d.default.createElement(T,(0,s.default)({},e,{profilePicThumbImg:t.img}))}function A(e){if("string"!=typeof e)return e;switch(e){case b.SMALL:return 49;case b.MEDIUM:return 100;case b.LARGE:return 200;case b.NONE:return;default:throw new Error(`Unsupported size type: ${e}`)}}t.DetailImageCommon=T,T.displayName="DetailImageCommon";class N extends d.Component{constructor(...e){super(...e),this.state={ephemeral:!1},this._updateEphemeral=()=>{var e=c.default.get(this.props.id);e&&this.setState({ephemeral:e.isEphemeralSettingOn()})}}componentDidMount(){var e=c.default.get(this.props.id);e&&this.props.listeners.add(e.isGroup?(0,v.default)(e.groupMetadata,"chat.groupMetadata"):e,"change:ephemeralDuration",this._updateEphemeral)}componentDidUpdate(e){if(e.id!==this.props.id){var t=c.default.get(e.id);t&&this.props.listeners.remove(t.isGroup?(0,v.default)(t.groupMetadata,"prevChat.groupMetadata"):t,"change:ephemeralDuration",this._updateEphemeral);var a=c.default.get(this.props.id);a&&this.props.listeners.add(a.isGroup?(0,v.default)(a.groupMetadata,"chat.groupMetadata"):a,"change:ephemeralDuration",this._updateEphemeral)}}componentWillUnmount(){var e=c.default.get(this.props.id);e&&this.props.listeners.remove(e.isGroup?(0,v.default)(e.groupMetadata,"chat.groupMetadata"):e,"change:ephemeralDuration",this._updateEphemeral)}render(){var e,t,{id:a,size:r,quality:i,loader:s,onClick:l,onLoad:o,quoted:u,square:h,border:m,waitIdle:_,showEphemeralIcon:v,theme:E,alt:C}=this.props,y=i||M.LOW,T={height:A(t="number"==typeof r?r>0?r:b.SMALL:null!=r?r:b.SMALL),width:A(t)};l&&(T.cursor="pointer");var N,D=(0,n.default)(f.default.avatar,{[f.default.status_v3]:"status_v3"===E,[f.default.avatarSquare]:h,[f.default.avatarBorder]:m}),w=O(a,u),R=d.default.createElement(p.default,{id:a,onComplex:()=>{var e=null,t=g.default.gadd(a);return t&&(e=y===M.HIGH?d.default.createElement(I,{profilePicThumb:t,defaultIcon:w,loader:s,onLoad:o,alt:C}):d.default.createElement(P,{profilePicThumb:t,defaultIcon:w,loader:s,onLoad:o,alt:C})),d.default.createElement("div",{className:D,style:T,onClick:l},null,e,null)},waitIdle:_},d.default.createElement("div",{className:D,style:T,onClick:l},w));return v&&(null===(e=c.default.get(a))||void 0===e?void 0:e.isEphemeralSettingOn())&&(N=d.default.createElement("div",{className:f.default.wrapper},d.default.createElement("div",{className:f.default.badge},d.default.createElement(S.default,{name:"disappearing",className:f.default.badgeIcon})),R)),N||R}}function O(e,t){var a="default-user";return y.default.isUser(e)&&!y.default.isPSA(e)&&t?a="default-user-square":y.default.isGroup(e)?a="default-group":y.default.isBroadcast(e)?a="default-broadcast":y.default.isPSA(e)&&(a="default-psa"),d.default.createElement("div",{className:f.default.avatarDefault,key:"default"},d.default.createElement(S.default,{name:a}))}N.displayName="DetailImage";var D=(0,_.default)(N);t.default=D},89302:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=t.PendingCancel=t.Pending=t.Download=t.DocState=void 0;var i=r(a(67154)),s=r(a(67294)),l=r(a(88257)),n=r(a(69507)),o=r(a(32885)),d=({children:e,onClick:t})=>{var a=t?{onClick:t}:{};return s.default.createElement("div",(0,i.default)({className:l.default.docState},a),e)};t.DocState=d;t.Download=({onClick:e})=>s.default.createElement(d,{onClick:e||(()=>{})},s.default.createElement(o.default,{name:"audio-download"}));t.Pending=({outgoingMsg:e})=>s.default.createElement(d,null,s.default.createElement("div",{className:l.default.spinner},s.default.createElement(n.default,{stroke:3,size:32,outgoingMsg:e})));t.PendingCancel=({outgoingMsg:e})=>s.default.createElement(d,null,s.default.createElement("div",{className:l.default.spinner},s.default.createElement(n.default,{stroke:3,size:32,outgoingMsg:e})),s.default.createElement(o.default,{name:"audio-cancel-noborder"}));t.Upload=()=>s.default.createElement(d,null,s.default.createElement(o.default,{name:"audio-upload"}))},7970:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var s=i(a(67154)),l=i(a(94184)),n=r(a(67294)),o=i(a(55847)),d=i(a(19328)),u=i(a(83288)),c=i(a(35001)),f=i(a(90225)),h=a(56670),p=(0,f.default)({COMPACT:null,MUTED:null});t.ThemeOptions=p;class m extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1,focus:!1},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this.onFocus=()=>{this.setState({focus:!0})},this.onBlur=()=>{this.setState({focus:!1})},this.onClick=e=>{this.onAction(e)},this.onKeyboardActivation=e=>{e.repeat||this.onAction(e)},this.onAction=e=>{var{action:t}=this.props;if(t&&!(!1===t(e))){var a=this.props.uim;a&&a.uie.requestDismiss()}}}render(){var{children:e,tooltip:t,type:a,disabled:r=!1,theme:i}=this.props,{hover:u,focus:f}=this.state,m=(u||f)&&null!=t?t:null,v=(0,h.isString)(e)?n.default.createElement("div",{className:(0,l.default)(d.default.ellipsify,d.default.action,{[d.default.compact]:i===p.COMPACT}),role:"button","aria-label":e},e):e,g={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},E=(0,l.default)(d.default.item,d.default.shortcut,{[d.default.hover]:u||f,[d.default.text]:"text"===a,[d.default.emoji]:"emoji"===a||"emoji-grid"===a,[d.default.emojiGrid]:"emoji-grid"===a,[d.default.icon]:"icon"===a,[d.default.disabled]:r||i===p.MUTED}),S=r?{}:{handlers:g,onContextMenu:_,onMouseDown:_,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onFocus,onBlur:this.onBlur};return n.default.createElement(c.default,(0,s.default)({component:"li","data-a8n":o.default.key(this.props.a8n),className:E,"data-animate-dropdown-item":!0},S),v,n.default.createElement("div",null,m))}}function _(e){e.preventDefault()}m.defaultProps={type:"text"},m.displayName="DropdownItem";var v=(0,u.default)(m);t.default=v},930:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.useContext)(n.InitialEmojisCompletionContext);(0,l.useEffect)((()=>{var a=c(e.emoji);null!=a&&(t.incrementLoadingEmojisCount(),o.default.loadEmoji(a,o.LOAD_PRIORITY.LAZY_LOAD_EMOJI).finally((()=>{t.decrementLoadingEmojisCount()})))}),[t,e.emoji]);var a,r,{className:i,element:d,emoji:p,selectable:m,selected:_,size:v,src:g,onLoad:E,tabIndex:S}=e,C=c(p);if(null==C)return null;g||(a=f(C,v),r=h(C,v));var y=(0,s.default)(i,r,{selected:_});if("span"===d)return l.default.createElement("span",{className:y,style:a,onLoad:E,tabIndex:S,"data-unicode":e["data-unicode"],"data-variant":e["data-variant"],"data-emoji-index":e["data-emoji-index"]});return l.default.createElement(u.default,{alt:p,className:y,draggable:!1,onLoad:E,plainText:p,selectable:m,style:a,src:g})};var s=i(a(94184)),l=r(a(67294)),n=a(43572),o=r(a(79893)),d=i(a(5318)),u=i(a(23152)),{getGlyphId:c,getStyle:f,getCssClasses:h}=d.default},20923:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_SIZE=void 0;var s=i(a(81109)),l=i(a(23279)),n=i(a(94184)),o=r(a(70873)),d=i(a(63337)),u=r(a(67294)),c=i(a(33766)),f=i(a(5318)),h=i(a(94870)),p=i(a(68666)),m=a(99375),_=i(a(80162)),v=i(a(80896)),g=i(a(69519)),E=a(87167),S=i(a(89848)),C={SMALL:"SMALL",LARGE:"LARGE"};t.EMOJI_SIZE=C;var y=4096;function b(e){return f.default.containsEmoji(e.substring(0,y))}class M extends u.PureComponent{constructor(...e){super(...e),this.state={text:this.props.text||"",ellipsified:null},this.refContainer=(0,u.createRef)(),this._registeredListener=!1,this._registerResizeListener=()=>{this._registeredListener||(this._registeredListener=!0,this.props.listeners.add(window,"resize",this._recompute),this.props.listeners.add(c.default,"resize",this._recompute))},this._unregisterResizeListener=()=>{this._registeredListener&&(this._registeredListener=!1,this.props.listeners.remove(window,"resize",this._recompute),this.props.listeners.remove(c.default,"resize",this._recompute))},this._recompute=(0,l.default)((()=>{this.setState({ellipsified:null},this.ellipsify)}),10),this._ellipsifyCheck=()=>b(this.state.text)&&this.ellipsify(),this.ellipsify=()=>{var e=this.refContainer.current;if(e){var t=(0,d.default)(e.parentElement,"node.parentElement"),a=e.querySelectorAll("img");if(a.length){var r=e.clientWidth;e.style.overflow="visible";var i=e.clientWidth!==r;if(e.style.overflow="hidden",i){var s=Boolean(_.default.isRTL())===Boolean(this.props.dirMismatch),l=a[function(e,t,a){var r=0;for(;r<e.length;){var i=e[r];if(a&&i.offsetLeft+i.clientWidth>=t)break;if(!a&&i.offsetLeft<=t)break;r++}return r}(a,s?t.clientWidth-function(e,t){for(var a=0,{childNodes:r}=e,i=0;i<r.length;i++){var s=r[i];if(s===t)break;a+=s instanceof Element?s.clientWidth:0}return a}(t,e)-12:12,s)];this.setState({ellipsified:I(e,l)})}}}},this._buildBidiModel=e=>e.reduce(((e,t)=>{if("string"==typeof t){var a=t.split(/(\r?\n|\r)/g).map((e=>({dir:o.dir(e),content:e})));return e.concat(a)}return e.push({content:t}),e}),[]),this._explodeOutputByLines=(e,t)=>{var{direction:a}=this.props,r=[],i=this._buildBidiModel(e),s=[],l=a;"auto"!==a&&"inherit"!==a||(l=null);for(var n=(e,t=!1)=>{var i=null==l||null==a||l===a,n=i?null:l,o=!i||"rtl"===l!==_.default.isRTL()?h.default.dirMismatch:null;r.push(u.default.createElement("span",{key:e,dir:n,className:o},s,t?"…":null))},o=0;o<i.length;o++){var d=i[o];l!==d.dir&&null!=l&&void 0!==d.dir&&(n(o),s=[]),void 0!==d.dir&&(l=d.dir),s.push(d.content)}return n(i.length,t),r},this.componentDidMount=()=>{!S.default.supportsEmojiEllipsification&&this.props.ellipsify&&b(this.state.text)&&this._registerResizeListener(),!S.default.supportsEmojiEllipsification&&this.props.ellipsify&&this._ellipsifyCheck()},this.render=()=>{if(!this.state.text)return null;var{onClick:e,ellipsify:t,dirMismatch:a,inferLinesDirection:r,inlineblock:i,direction:s,textLimit:l,multiline:o,breakWord:d}=this.props,c=this.state.ellipsified?this.state.ellipsified:this.state.text,f="inherit"===s?null:s||"auto",_=!!this.props.selectable,v=this.props.formatters||m.Configuration.EmojiOnly({selectable:_}),S=l||1/0;t&&c.length>y&&S>y&&(S=y);var C=(0,n.default)(this.props.className,{[h.default.ellipsify]:!!t,[h.default.inlineblock]:!!i,[h.default.clickable]:!!e,[h.default.dirMismatch]:a&&!r,[h.default.multiline]:o,[h.default.breakWord]:d}),b=(0,p.default)(c,v,E.JSXSerializer,void 0,S),M=!!this.state.ellipsified||c.length>S,T=this.props.inferLinesDirection?this._explodeOutputByLines(b,M):b;return u.default.createElement(g.default,{className:C,dir:f,element:this.props.element,onClick:e,ref:this.refContainer,selectable:_,title:this.props.titlify?this.state.text:void 0},T)}}getContainerElement(){return this.refContainer.current}getWidth(){var e=this.refContainer.current;return e?e.getBoundingClientRect().width:0}static getDerivedStateFromProps(e,t){var a,r=null,i=null!==(a=e.text)&&void 0!==a?a:"";return i!==t.text&&(r={text:i}),S.default.supportsEmojiEllipsification||!e.ellipsify||null==r||b(i)||(r=(0,s.default)((0,s.default)({},r),{},{ellipsified:null})),r}componentDidUpdate(e,t){!S.default.supportsEmojiEllipsification&&this.props.ellipsify&&t.text!==this.state.text&&(b(this.state.text)?(this._recompute(),this._registerResizeListener()):this._unregisterResizeListener())}componentWillUnmount(){this._recompute.cancel()}}M.defaultProps={element:"span",emojiSize:C.SMALL,textLimit:1/0};var T=(0,v.default)(M);function I(e,t,a={found:!1}){if(e===t)return a.found=!0,"";if(e instanceof HTMLImageElement)return e.alt;if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;for(var r=function(e){if(e instanceof Element)switch(e.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}(e),i="",s=0;s<e.childNodes.length&&(i+=I(e.childNodes[s],t,a),!a.found);)s++;if(null==r)return i;var[l,n]=r;return`${l}${i}${n}`}t.default=class extends T{getWidth(){return this.getComponent().getWidth()}getContainerElement(){return this.getComponent().getContainerElement()}}},92997:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LazyLoadRetry=t.NoResultForLabel=t.LoadingWithText=t.Loading=t.ImageSearchEmpty=t.SearchingImages=t.BeforeImageSearch=t.DocMsgs=t.LinkMsgs=t.MediaMsgs=t.StarredMsgs=t.AllArchived=t.ListStatus=t.BeforeSearchMessages=t.ListGroups=t.ListProducts=t.ListChats=t.SearchMessagesUnavailable=t.SearchMessages=t.SearchGroups=t.SearchWithKeyword=t.SearchWithoutKeyword=t.SearchContacts=t.SearchingMessages=t.Searching=t.Search=t.Archived=t.Blocked=t.Empty=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(55847)),n=r(a(74798)),o=r(a(33766)),d=r(a(20923)),u=r(a(60350)),c=r(a(80162)),f=r(a(18627)),h=r(a(69507)),p=r(a(32885)),m=({a8nText:e,a8nTitle:t,children:a,className:r,icon:n,text:o,theme:c,title:f,onClick:h})=>{var p=f?s.default.createElement("div",{"data-a8n":l.default.key(t),className:u.default.title},f):null,m=o?s.default.createElement("div",{"data-a8n":l.default.key(e),className:u.default.text},s.default.createElement(d.default,{text:o})):null,_=(0,i.default)(u.default.empty,r,{[u.default.compact]:"compact"===c});return s.default.createElement("div",{className:_,onClick:h},n,p,m,a)};t.Empty=m;t.Blocked=()=>{var e=s.default.createElement("div",{className:u.default.icon},s.default.createElement(p.default,{name:"empty-blocked"}));return s.default.createElement(m,{icon:e,title:c.default.t(304),text:c.default.t(214),a8nTitle:"blocked-empty",a8nText:"add-blocked-description"})};t.Archived=()=>{var e=s.default.createElement("div",{className:u.default.icon},s.default.createElement(p.default,{name:"empty-archived"}));return s.default.createElement(m,{icon:e,title:c.default.t(242),a8nTitle:"archived-empty"})};t.Search=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1437),a8nText:"search-no-chats-or-contacts"});t.Searching=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1449),a8nText:"searching-chats-contacts-messages"});t.SearchingMessages=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1451),a8nText:"searching-messages"});t.SearchContacts=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1438),a8nText:"search-no-contacts"});t.SearchWithoutKeyword=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1268),a8nText:"search-no-results-without-keyword"});t.SearchWithKeyword=e=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1441,{keyword:e}),a8nText:"search-no-results-without-keyword"});t.SearchGroups=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1439),a8nText:"search-no-groups"});t.SearchMessages=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1440),a8nText:"search-no-messages"});t.SearchMessagesUnavailable=()=>s.default.createElement(m,{className:u.default.emptyTop,text:c.default.t(1444),a8nText:"search-results-unavailable"});t.ListChats=()=>s.default.createElement(m,{text:c.default.t(1258),a8nText:"no-chats"});t.ListProducts=({hasCatalog:e=!0})=>{var t=e?c.default.t(1266):c.default.t(1257);return s.default.createElement(m,{text:t,a8nText:"no-products"})};t.ListGroups=()=>s.default.createElement(m,{text:c.default.t(1261),a8nText:"no-groups"});t.BeforeSearchMessages=(e,t)=>{var a=t?c.default.t(542,{chatName:e}):c.default.t(647,{chatName:e});return s.default.createElement(m,{className:u.default.emptyTop,text:a,a8nText:"chat-search-prompt"})};function _(){var e=a(19472).default;o.default.openDrawerLeft(s.default.createElement(e,null))}t.ListStatus=()=>s.default.createElement(m,null);t.AllArchived=()=>{var e=n.default.filter((e=>e.archive)).length;return s.default.createElement(m,{title:c.default.t(231),a8nTitle:"all-chats-archived"},s.default.createElement("div",{"data-a8n":l.default.key("see-archived"),role:"button",onClick:_,className:u.default.action},c.default.t(1461,{count:e,_plural:e})))};t.StarredMsgs=()=>s.default.createElement(m,{text:c.default.t(1269),a8nText:"no-starred-messages"});t.MediaMsgs=()=>s.default.createElement(m,{text:c.default.t(1263),a8nText:"no-media"});t.LinkMsgs=()=>s.default.createElement(m,{text:c.default.t(1262),a8nText:"no-links"});t.DocMsgs=()=>s.default.createElement(m,{text:c.default.t(1260),a8nText:"no-docs"});t.BeforeImageSearch=()=>s.default.createElement(m,{text:c.default.t(959),a8nText:"image-search-prompt"});t.SearchingImages=()=>s.default.createElement(m,{text:c.default.t(1450),a8nText:"searching-images"});t.ImageSearchEmpty=()=>s.default.createElement(m,{text:c.default.t(958),a8nText:"image-search-no-results"});t.Loading=()=>s.default.createElement(m,null,s.default.createElement(h.default,{size:50,stroke:4}));t.LoadingWithText=({text:e})=>s.default.createElement(m,null,s.default.createElement("div",{className:u.default.spinner},s.default.createElement(h.default,{size:50,stroke:4})),s.default.createElement(d.default,{element:"div",className:u.default.text,text:e}));t.NoResultForLabel=({labelId:e})=>{var t=f.default.assertGet(e);return s.default.createElement(m,null,s.default.createElement(d.default,{element:"div",className:u.default.text,text:c.default.t(1267,{labelName:t.name})}))};t.LazyLoadRetry=({className:e,onClick:t})=>s.default.createElement(m,{className:e,onClick:t},s.default.createElement(p.default,{name:"live-location-refresh",className:u.default.iconRetry}),s.default.createElement("div",null,c.default.t(1419)))},3774:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(67294);class i extends r.Component{constructor(...e){super(...e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){this.props.sendLogs&&(__LOG__(4,void 0,new Error,!0)`${e.stack}\n${t.componentStack}`,SEND_LOGS(`error-boundary:${this.props.reason}`))}render(){return this.state.hasError?this.props.fallback:this.props.children}}t.default=i,i.defaultProps={sendLogs:!0,fallback:null},i.displayName="ErrorBoundary"},77062:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(62248)),l=({children:e})=>i.default.createElement("div",{className:s.default.tooltip,role:"tooltip"},e);t.default=l},36868:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(75444)),n=r(a(25045)),o=r(a(80162)),d=a(96769);function u({text:e,textLimit:t,children:a}){var[r,i]=(0,s.useState)((()=>c(e,t,t)?t:1/0));return s.default.createElement(s.default.Fragment,null,a({textLimit:r}),r!==1/0?s.default.createElement("span",{className:n.default.read_more,role:"button",onClick:()=>{var t=r+l.default.SUBSEQUENT_PAGE_SIZE;i(c(e,t,l.default.SUBSEQUENT_PAGE_SIZE)?t:1/0)}}," "+o.default.t(1380)):null)}function c(e,t,a){return(0,d.numCodepoints)(e)-t>a*l.default.OVERFLOWING_PAGE_THRESHOLD}var f=(0,s.memo)(u);t.default=f},51678:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(80896));class n extends s.PureComponent{constructor(...e){super(...e),this._setRefInput=e=>{this._refInput=e},this._handleClick=e=>{e.stopPropagation()},this._handleChange=e=>{this.props.onChange(e)}}open(){this._refInput&&this._refInput.click()}render(){return s.default.createElement("input",{accept:this.props.mimes,ref:this._setRefInput,type:"file",multiple:!0,style:{display:"none"},onClick:this._handleClick,onChange:this._handleChange})}}n.displayName="FilePicker";var o=(0,l.default)(n);t.default=class extends o{open(){return this.getComponent().open()}}},76104:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.default)(e.chatstate,["id","type","deny","t"]);var t=(0,n.default)(e.groupMetadata,["announce","participants"]),a=(0,n.default)(e.presence,["forceDisplay","withholdDisplayStage"]),r=a.withholdDisplayStage===l.WithholdDisplayStage.Info?e.placeholder:a.getGroupSubtitleText();return i.default.createElement(s.default,{groupMetadata:t,overridingText:r,placeholder:e.placeholder,location:e.location})};var i=r(a(67294)),s=r(a(28169)),l=a(58793),n=r(a(95607))},18259:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var{active:a=!1,delay:r=0}=null!=t?t:{},l=(0,i.useRef)(e);l.current=e;var n=(0,i.useRef)();(0,i.useEffect)((()=>{var e=()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.call(n)};return e(),a&&(n.current=(0,s.default)((e=>l.current(e)),{delay:r})),e}),[a,r])};var i=a(67294),s=r(a(63324))},82415:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,s.useRef)(e);r.current=e;var l=(0,s.useMemo)((()=>(0,i.default)(((...e)=>r.current(...e)),t,a)),[t,a]);return(0,s.useEffect)((()=>l.cancel),[]),l};var i=r(a(23279)),s=a(67294)},2810:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var[e,t]=(0,s.useState)((()=>l().getValue()));return(0,s.useEffect)((()=>l().subscribe((e=>{t(e)}))),[]),e};var i=r(a(51463)),s=a(67294);var l=(0,i.default)((()=>new n));class n{constructor(){this._subscribers=new Set}subscribe(e){if(this._subscribers.has(e))throw new Error("Callback can only be added once.");return this._subscribers.add(e),this._updateListener(),()=>{this._subscribers.delete(e),this._updateListener()}}getValue(){var e;return null!==(e=window.devicePixelRatio)&&void 0!==e?e:1}_updateListener(){var e;if(0!==this._subscribers.size){if(null==this._destroyListener){var t=matchMedia(`(resolution: ${this.getValue()}dppx)`),a=()=>{var e;null===(e=this._destroyListener)||void 0===e||e.call(this);var t=this.getValue();this._subscribers.forEach((e=>{e(t)})),this._updateListener()};t.addListener(a),this._destroyListener=()=>{t.removeListener(a),this._destroyListener=null}}}else null===(e=this._destroyListener)||void 0===e||e.call(this)}}},61723:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.useMemo)((()=>function(e){return t=>{e&&("function"==typeof e?e(t):e.current=t)}}(e)),[e])};var r=a(67294)},62810:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={}){var[t,a]=(0,o.useState)(null),[r,i]=(0,o.useState)(u),s=h(e);return(0,o.useEffect)((()=>{if(t)return c().observe(t,i,e)}),[t,s]),[a,r]};var i=r(a(81109)),s=r(a(51463)),l=r(a(86240)),n=r(a(63337)),o=a(67294),d={root:null,rootMargin:"0px",threshold:0},u={intersectionRatio:0,isIntersecting:!1};var c=(0,s.default)((()=>new f));class f{constructor(){this._observers=new Map,this._getObserver=e=>{var t=h(e);if(!this._observers.has(t)){var a=new Map,r=new IntersectionObserver((e=>{for(var t of e){var r=a.get(t.target),{intersectionRatio:i,isIntersecting:s}=t;null==r||r({intersectionRatio:i,isIntersecting:s})}}),e);this._observers.set(t,{observer:r,callbacks:a})}return(0,n.default)(this._observers.get(t),"this._observers.get(key)")},this._cleanup=e=>{var t=h(e);this._observers.delete(t)},this.observe=(e,t,a)=>{var{observer:r,callbacks:i}=this._getObserver(a);if(i.has(e))throw new Error("You can't observe the same element twice.");return i.set(e,t),r.observe(e),()=>{r.unobserve(e),i.delete(e),0===i.size&&(r.disconnect(),this._cleanup(a))}}}}function h(e){var{root:t,rootMargin:a,threshold:r}=(0,i.default)((0,i.default)({},d),e);return[t,a,r].map((e=>(0,l.default)(e))).join("-")}},99921:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,a){var{immediate:i=!1}=null!=a?a:{},s=(0,r.useRef)(e);s.current=e;var l=(0,r.useRef)(),n=(0,r.useCallback)((()=>{l.current&&clearInterval(l.current)}),[]),o=(0,r.useCallback)((()=>{n(),l.current=setInterval((()=>s.current()),t)}),[n,t]);return(0,r.useEffect)((()=>(i&&o(),n)),[i,o,n]),[o,n]};var r=a(67294)},10172:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,r.useRef)();null==t.current&&(t.current=e());return t};var r=a(67294)},83936:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(s);return(0,r.useLayoutEffect)((()=>{if(e)return(0,i.observe)(e,l)}),[e]),[t,a]};var r=a(67294),i=a(99661),s={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0}},95607:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var{isStrong:r=!0,componentName:i}=null!=a?a:{};if(null==e)throw __LOG__(4,void 0,new Error,!0)`useModelValues hook received an unexpected \`null\` model`,SEND_LOGS("state-hook-null-model"),new o("Unknown");var d=(0,n.unproxy)(e),u=(0,s.useRef)();function c(){return null==u.current&&(u.current=new l.default(null!=i?i:"Hook(useModelValues)",d.proxyName,t,r,!0)),u.current}var[f,h]=(0,s.useState)((()=>{var e=c(),t=e.getModelAndValidate(d);if(!t)throw new o(e.name);return e.createProxy(t)})),p=(0,s.useCallback)(((e,t)=>{var a=e.getModelAndValidate(t);if(!a)throw new o(e.name);h(e.createProxy(a))}),[]);(0,s.useEffect)((()=>{var e=c(),t=e.getModel(d);return e.attachConcern(t,f.proxyBitMask,p),()=>{e.detachConcern(t,p)}}),[d,f,p]);var[m,_]=(0,s.useState)(d);if(m!==d){var v=c();v.detachConcern(m,p);var g=v.getModelAndValidate(d);if(!g)throw new o(v.name);_(g),h(v.createProxy(g))}return f},t.StateHookMissingModelError=void 0;var i=a(13266),s=a(67294),l=r(a(83012)),n=a(6578);class o extends((0,i.customError)("StateHookMissingModelError")){constructor(e){super(`Received a null value for model key: ${e}`)}}t.StateHookMissingModelError=o},75649:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,r.useRef)((()=>{}));t.current=e,(0,r.useEffect)((()=>()=>{t.current()}),[])};var r=a(67294)},27581:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e})),t.current};var r=a(67294)},7456:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=(0,i.unproxy)(e),n=a.proxyName;null==l[n]&&(l[n]=new Set([...a.__props,...a.__session]));if(!l[n].has(t))throw new s(e.proxyName,t);return(0,r.useCallback)((e=>{if("function"==typeof e){var r=a.get(t);a.set(t,e(r))}else a.set(t,e)}),[t,a])},t.SetStateHookMissingModelPropertyError=void 0;var r=a(67294),i=a(6578);class s extends Error{constructor(e,t){super(`The model "${e}" has no property/sessions "${t}" defined`),this.name="SetStateHookMissingModelPropertyError"}}t.SetStateHookMissingModelPropertyError=s;var l={}},34302:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,s.useRef)(e);r.current=e;var l=(0,s.useMemo)((()=>(0,i.default)(((...e)=>r.current(...e)),t,a)),[t,a]);return(0,s.useEffect)((()=>l.cancel),[]),l};var i=r(a(23493)),s=a(67294)},21928:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,a){var{immediate:s=!1}=null!=a?a:{},[l,n]=i(e),o=(0,r.useCallback)((()=>l(t)),[l,t]);return(0,r.useEffect)((()=>{s&&o()}),[s,o]),[o,n]},t.useManualTimeout=i;var r=a(67294);function i(e){var t=(0,r.useRef)(e);t.current=e;var a=(0,r.useRef)(),i=(0,r.useCallback)((()=>{a.current&&clearTimeout(a.current)}),[]),s=(0,r.useCallback)((e=>{i(),a.current=setTimeout((()=>t.current()),e)}),[i]);return(0,r.useEffect)((()=>i),[i]),[s,i]}},39877:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var[e]=(0,o.useAddListenerOnce)(),t=(0,d.default)();return(0,s.useCallback)((a=>{l.default.uiBusy?e(l.default,"ui_idle",a):(0,n.default)({signal:t}).then((()=>{a()})).catch((0,i.catchAbort)((()=>{})))}),[e,t])};var i=a(58566),s=a(67294),l=r(a(33766)),n=r(a(42684)),o=a(54890),d=r(a(83069))},83069:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var[e]=(0,i.useState)((()=>new s.default));return(0,i.useEffect)((()=>()=>e.abort()),[e]),e.signal};var i=a(67294),s=r(a(33364))},64774:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(75941),n=r(a(53680));class o extends s.PureComponent{constructor(...e){super(...e),this.state={isBusy:l.UIBusyTasks.isBusy()},this.onIdle=()=>{this.setState({isBusy:!1})}}componentDidMount(){this.props.waitIdle&&(this._idleTaskId=l.UIBusyTasks.enqueue(this.onIdle))}componentDidUpdate(e){if(!n.default.equals(e.id,this.props.id)||!this.props.waitIdle){this.state.isBusy&&l.UIBusyTasks.dequeue(this._idleTaskId);var t=l.UIBusyTasks.isBusy();t&&this.props.waitIdle&&(this._idleTaskId=l.UIBusyTasks.enqueue(this.onIdle)),this.setState({isBusy:t})}}componentWillUnmount(){this.props.waitIdle&&l.UIBusyTasks.dequeue(this._idleTaskId)}render(){var{children:e,onComplex:t,waitIdle:a}=this.props,{isBusy:r}=this.state;return r&&a?s.default.createElement(s.default.Fragment,null,e):t()}}t.default=o,o.displayName="IdleComponent"},98140:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(41609)),l=i(a(94184)),n=r(a(67294)),o=i(a(59297)),d=i(a(23152)),u=i(a(25562)),c=i(a(32885)),f="SMALL",h="MEDIUM",p="LARGE",m="NONE";function _(e){switch(e){case f:return 49;case h:return 100;case p:return 200;case m:return;default:return e}}class v extends n.PureComponent{constructor(...e){super(...e),this.state={isLoaded:!1},this.onLoad=()=>{this.setState({isLoaded:!0})}}render(){var e,{size:t,fallbackSVG:a,className:r,loader:i,wrapOptions:f={},transition:h,roundContainer:p=!0,imgProps:m}=this.props,{src:v,alt:g,crossOrigin:E,draggable:S}=m,{centerWrapperChild:C,wrapperClassName:y}=f,{isLoaded:b}=this.state,M=(0,l.default)(u.default.avatarImage,{[u.default.isLoaded]:b,[u.default.transition]:h}),T={height:_(t),width:_(t)};i&&!b&&(e=n.default.createElement(o.default,null));var I=n.default.createElement(d.default,{src:v,className:M,onLoad:this.onLoad,alt:g,crossOrigin:E,draggable:S}),P=(0,s.default)(f)?I:n.default.createElement("div",{className:(0,l.default)(y,u.default.avatarWrapper,u.default.avatarImageWrapper,{[u.default.centerChild]:C,[u.default.isLoaded]:b})},I),A=""!==v?n.default.createElement(n.default.Fragment,null,e,P):null;return n.default.createElement("div",{className:(0,l.default)(u.default.avatar,r,{[u.default.roundBorder]:p}),style:T},A,n.default.createElement("div",{className:(0,l.default)(y,u.default.avatarWrapper,u.default.avatarSvgWrapper,{[u.default.centerChild]:C,[u.default.transition]:h})},n.default.createElement(c.default,{name:a})))}}t.default=v,v.defaultProps={size:f,loader:!1},v.displayName="ImgWithFallback"},17996:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(9908)),n=r(a(62886)),o=r(a(35001)),d=a(75429),u=a(68104);class c extends s.Component{constructor(...e){super(...e),this._setRef=e=>{this._ref=e,this.props.onRef(e)},this.getElement=()=>this._ref,this._rotateFocus=e=>{if(this._ref){var t=u.TabDirection.FORWARD;e&&(e.preventDefault(),t=e.shiftKey?u.TabDirection.BACKWARD:u.TabDirection.FORWARD,l.default.shouldIndicateFocus());var a=(0,d.first)((0,d.filterIterator)((0,u.getTabLoop)(this._ref,t),(e=>!this.props.skipNode(e))));null!=a&&(l.default.shouldIndicateFocus(),a.restoreFocus?a.restoreFocus():n.default.focus(a))}}}componentDidMount(){n.default.focus(this._ref)}render(){var{className:e,children:t,onBlur:a}=this.props,r={tab:this._rotateFocus,"shift+tab":this._rotateFocus,"shift+?":this.props.onShowKeyboardShortcuts};return s.default.createElement(o.default,{handlers:r,className:e,onBlur:a,onRef:this._setRef},t)}}t.default=c,c.displayName="TopLevelHotKeys"},16305:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({action:e,addModifiers:t=!0}){var a=(0,n.getShortcutKey)(e);if(!a)return null;var r,c=u(a);r=-1===c.indexOf(d)?i.default.createElement("span",{className:l.default.key},c):i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:l.default.key},"Shift"),i.default.createElement("span",{className:l.default.key},c.substr(d.length)));var f=t?function(){var e=[o.default.os===s.default.OS_TYPE.MAC?"Cmd":"Ctrl"];return e.push(o.default.os===s.default.OS_TYPE.MAC?"Ctrl":"Alt"),e.map((e=>i.default.createElement("span",{key:e,className:l.default.key},e)))}():null;return i.default.createElement(i.default.Fragment,null,f,r)},t.expandRawShortcut=u;var i=r(a(67294)),s=r(a(75444)),l=r(a(64917)),n=a(39562),o=r(a(89848)),d="Shift+";function u(e){if(1!==e.length)return e;switch(e){case">":return"Shift+.";case"<":return"Shift+,"}return e.toLowerCase()!==e?`Shift+${e}`:e.toUpperCase()}},33080:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){if(0===e.length)return"";var a=e[0];if(1===e.length)return a;var r=e[e.length-1];if(2===e.length)return function(e,t,a=!1){return a?s.default.t(1181,n(e,t)):i.default.createElement(l.default,{id:1181,params:{A:e,B:t}})}(a,r,t);var o=e[1],d=e.slice(2,e.length-1);return function(e,t,a,r,o=!1){var d=[o?s.default.t(1180,n(e,t)):i.default.createElement(l.default,{id:1180,key:"listItem_firstItem",params:{A:e,B:t}})],u=a.reduce(((e,t,a)=>[o?s.default.t(1178,n(t,e)):i.default.createElement(l.default,{id:1178,key:`listItem_${a}`,params:{A:t,B:e}})]),d);return o?s.default.t(1178,n(u,r)):i.default.createElement(l.default,{id:1179,params:{A:u,B:r}})}(a,o,d,r)};var i=r(a(67294)),s=r(a(80162)),l=r(a(41849));function n(e,t){return{A:e,B:t}}},3128:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UnknownDataError=t.DEFAULT_ITEM_HEIGHT=t.DEFAULT_ITEM_WIDTH=void 0;var s=i(a(81109)),l=i(a(23279)),n=i(a(94184)),o=a(13266),d=r(a(67294)),u=i(a(28662)),c=a(75941),f=i(a(92267)),h=i(a(44448)),p=i(a(798)),m=i(a(4328));t.DEFAULT_ITEM_WIDTH=72;t.DEFAULT_ITEM_HEIGHT=72;class _ extends((0,o.customError)("UnknownDataError")){constructor(e){super(`Unknown data encountered while rendering. Item key: ${e.itemKey}`)}}t.UnknownDataError=_;class v extends d.Component{constructor(e){super(e),this.keyPool=new f.default,this.hanging=!1,this.pointerEvents=!0,this.setRefList=e=>{this.refList=e},this.setListLength=()=>{this.setState({renderedListLength:this.state.listLength})},this.getListLength=()=>this.state.renderedListLength,this.handleLayout=e=>{var t=this.refList;if(t){var a="horizontal"===this.props.direction?t.getBoundingClientRect().left-e.position.left:t.getBoundingClientRect().top-e.position.top,r=Math.max(a,0),i="horizontal"===this.props.direction?e.width:e.height,{firstIndex:l,lastIndex:n}=v.computeIndexes(this.props,(0,s.default)((0,s.default)({},this.state),{},{offsetFromStart:r,bodyDimension:i}));this.setState({firstIndex:l,lastIndex:n,bodyDimension:i,offsetFromStart:r})}},this.handleScroll=()=>{this.animationFrame?this.hanging=!0:(this.hanging=!1,this.animationFrame=requestAnimationFrame(this._handleScroll))},this._handleScroll=()=>{this.disablePointerEvents();var e=this.props.flatListController.getScrollFromStart();if(null==e)throw new Error("FlatList:ScrollEvent thrown while container is unmounted");var t=Math.max(e,0),a=v.computeIndexes(this.props,(0,s.default)((0,s.default)({},this.state),{},{scrollFromStart:t}));this.setState({scrollFromStart:t,firstIndex:a.firstIndex,lastIndex:a.lastIndex},this.handleFinishScroll)},this.handleFinishScroll=()=>{this.animationFrame=void 0,this.enablePointerEvents(),this.hanging&&this.handleScroll()},this.enablePointerEvents=(0,l.default)((()=>{if(this.animationFrame)return this.enablePointerEvents();null!=this.busyId&&(c.UIBusyTasks.clearBusy(this.busyId),delete this.busyId),this.props.onPointerEventsOn&&this.props.onPointerEventsOn();var e=this.refList;e&&(e.style.pointerEvents="auto"),this.pointerEvents=!1}),150);var{enhancedData:t,listLength:a}=v.computeDataAndListLength(e);this.state={firstIndex:0,lastIndex:0,scrollFromStart:0,offsetFromStart:0,bodyDimension:0,enhancedData:t,listLength:a,renderedListLength:a}}static getDerivedStateFromProps(e,t){var{enhancedData:a,listLength:r}=v.computeDataAndListLength(e),{firstIndex:i,lastIndex:l}=v.computeIndexes(e,(0,s.default)((0,s.default)({},t),{},{enhancedData:a,listLength:r})),n={enhancedData:a,listLength:r,firstIndex:i,lastIndex:l};return(!e.itemEnterAnimationsEnabled||r>=t.renderedListLength)&&(n.renderedListLength=r),n}static computeDataAndListLength(e){var t=0;return{enhancedData:e.data.map((a=>{var r=(0,s.default)((0,s.default)({},a),{},{offset:t}),i=v.getDimension(a,e.direction,e.defaultItemWidth,e.defaultItemHeight);return t+=i,r})),listLength:t}}static getDimension(e,t,a,r){return"horizontal"===t?v.getItemWidth(e,a):v.getItemHeight(e,r)}static getItemWidth(e,t){return null!=e.width&&e.width>0?e.width:t}static getItemHeight(e,t){return null!=e.height&&e.height>0?e.height:t}static computeIndexes(e,t){var{bodyDimension:a,offsetFromStart:r,scrollFromStart:i,listLength:s,enhancedData:l}=t;if(void 0===a||void 0===r)throw new Error("FlatList:Computing FlatList without a valid Container");for(var{extraItems:n,forceConsistentRenderCount:o,direction:d,defaultItemWidth:u,defaultItemHeight:c}=e,f=0,h=0;h<l.length;h++){var p=l[h],m=v.getDimension(p,d,u,c);if(r+p.offset+m>i){f=h;break}}for(var _=l.length-1,g=o?Math.min(l[f].offset+a,s):Math.min(i+a,s+r),E=f;E<l.length;E++){var S=l[E],C=v.getDimension(S,d,u,c);if(r+S.offset+C>=g){_=E;break}}var y=n,b=n-f;b>0&&(y+=b);var M=n,T=_+n-l.length;return T>0&&(M+=T),{firstIndex:Math.max(f-M,0),lastIndex:Math.min(_+y,l.length-1)}}componentDidMount(){this.props.flatListController.registerList({handleLayout:this.handleLayout,handleScroll:this.handleScroll})}componentWillUnmount(){this.props.flatListController.unregisterList(),this.enablePointerEvents.cancel(),this.cancelScroll()}cancelScroll(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0,this.hanging=!1)}disablePointerEvents(){if(this.busyId=c.UIBusyTasks.setBusy(this.busyId),!this.pointerEvents){this.props.onPointerEventsOff&&this.props.onPointerEventsOff();var e=this.refList;e&&(e.style.pointerEvents="none"),this.pointerEvents=!0}}scrollIntoViewIfNeeded(e,t=0){var{enhancedData:a,scrollFromStart:r,bodyDimension:i}=this.state;if(e<0||e>=a.length)throw new Error("Invalid Index.");var s=a[e].offset;(s<r-t||s>r+i+t)&&this.props.flatListController.setScrollFromStart(s)}getComponents(){var{reorderAnimationsEnabled:e,renderItem:t,defaultItemWidth:a,defaultItemHeight:r}=this.props,{firstIndex:i,lastIndex:l}=this.state,n=this.state.enhancedData.slice(i,l+1);return this.keyPool.recycleKeysAndMap(n).map((({rctKey:i,data:l},n)=>{var o="horizontal"===this.props.direction?{width:v.getItemWidth(l,a)}:{height:v.getItemHeight(l,r)};return d.default.createElement(p.default,{key:i,data:(0,s.default)((0,s.default)({},l),o),animate:!!e&&h.default.shouldAnimate,zIndex:this.state.enhancedData.length-n-1,renderItem:t,listDirection:this.props.direction})}))}render(){var{role:e}=this.props,t="horizontal"===this.props.direction?{width:this.state.renderedListLength}:{height:this.state.renderedListLength};return d.default.createElement("div",{className:(0,n.default)(this.props.className),ref:this.setRefList},d.default.createElement("div",{"aria-label":this.props["aria-label"],className:(0,n.default)(u.default.viewport,{[u.default.horizontalListViewport]:"horizontal"===this.props.direction,[u.default.verticalListViewport]:"vertical"===this.props.direction}),role:e,"aria-rowcount":this.props["aria-rowcount"],style:t},this.props.itemEnterAnimationsEnabled?d.default.createElement(m.default,{transitionName:"fade",onAnimationComplete:this.setListLength},this.getComponents()):this.getComponents()))}}t.default=v,v.defaultProps={defaultItemHeight:72,defaultItemWidth:72,forceConsistentRenderCount:!0,extraItems:5,initialScrollFromStart:0,reorderAnimationsEnabled:!0},v.displayName="FlatList"},9444:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),l=i(a(6479)),n=i(a(81109)),o=i(a(63337)),d=r(a(67294)),u=i(a(42529));class c extends d.Component{constructor(...e){super(...e),this._setRefObserver=e=>{this._refObserver=e,this.props.onRef&&this.props.onRef(e)},this.getScrollFromStart=()=>{var e=this._refObserver;if(e)return"horizontal"===this.props.direction?e.scrollLeft:e.scrollTop},this.setScrollFromStart=e=>{var t=this._refObserver;t&&("horizontal"===this.props.direction?t.scrollLeft=e:t.scrollTop=e)},this._handleRegisterList=()=>{var e=(0,o.default)(this._refObserver,"this._refObserver"),{flatListControllers:t}=this.props;t.forEach((t=>t.triggerLayout({position:e.getBoundingClientRect(),width:e.clientWidth,height:e.clientHeight})))},this._handleScroll=e=>{var{flatListControllers:t,onScroll:a}=this.props;a&&a(e),t.forEach((e=>e.triggerScroll()))},this._handleResize=e=>{var{flatListControllers:t,onLayout:a}=this.props,r=(0,o.default)(this._refObserver,"this._refObserver"),i=(0,n.default)((0,n.default)({},e),{},{position:r.getBoundingClientRect()});t.forEach((e=>e.triggerLayout(i))),a&&a(i)}}componentDidMount(){var{flatListControllers:e,scrollOffset:t}=this.props;e.forEach((e=>e.registerContainer({getScrollFromStart:this.getScrollFromStart,setScrollFromStart:this.setScrollFromStart,onRegisterList:this._handleRegisterList}))),void 0!==t&&this.setScrollFromStart(t)}componentWillUnmount(){var{flatListControllers:e}=this.props;e.forEach((e=>e.unregisterContainer()))}render(){var e=this.props,{children:t,flatListControllers:a,onScroll:r,onLayout:i,onRef:n,scrollOffset:o}=e,c=(0,l.default)(e,["children","flatListControllers","onScroll","onLayout","onRef","scrollOffset"]);return d.default.createElement(u.default,(0,s.default)({},c,{onResize:this._handleResize,onScroll:this._handleScroll,onRef:this._setRefObserver}),t)}}t.default=c,c.displayName="FlatListContainer"},59432:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{registerContainer(e){this._containerAPI=e,this._listHandlers&&e.onRegisterList()}unregisterContainer(){delete this._containerAPI}triggerScroll(){this._listHandlers&&this._listHandlers.handleScroll()}triggerLayout(e){this._listHandlers&&this._listHandlers.handleLayout(e)}registerList(e){this._listHandlers=e,this._containerAPI&&this._containerAPI.onRegisterList()}unregisterList(){delete this._listHandlers}getScrollFromStart(){if(this._containerAPI)return this._containerAPI.getScrollFromStart()}setScrollFromStart(e){this._containerAPI&&this._containerAPI.setScrollFromStart(e)}}},35128:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement("div",{className:s.default.loadingSpinner},i.default.createElement(l.default,{color:"default",size:24,stroke:6}))};var i=r(a(67294)),s=r(a(93318)),l=r(a(69507))},92267:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(89734)),s=r(a(63337));t.default=class{constructor(){this._rctKeyToData=new Map,this._keyToRctKey=new Map}_genNewKeys(e){var t=e-this._rctKeyToData.size;if(t<=0)return[];for(var a=[],r=0;r<e&&(this._rctKeyToData.has(r)||(a.push(r),t!==a.length));r++);return a}recycleKeysAndMap(e){var t=new Map,a=new Map,r=this._genNewKeys(e.length),l=new Set(this._rctKeyToData.keys()),n=[];e.forEach((e=>{var r=this._keyToRctKey.get(e.itemKey);void 0!==r?(a.set(e.itemKey,r),t.set(r,e),l.delete(r)):n.push(e)}));var o=[...r,...l];n.forEach((e=>{var r=o.pop();a.set(e.itemKey,r),t.set(r,e)}));var d=(0,i.default)(e,[e=>a.get(e.itemKey)]).map((e=>({rctKey:(0,s.default)(a.get(e.itemKey),"keyToRctKey.get(item.itemKey)"),data:e})));return this._rctKeyToData=t,this._keyToRctKey=a,d}}},44448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={shouldAnimate:!0}},798:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=r(a(67294)),n=i(a(96774)),o=i(a(6747)),d=i(a(91021)),u=o.default.prefix("transform"),c=o.default.prefix("transition");class f extends l.Component{constructor(...e){super(...e),this.state={shouldAnimate:!0,prevItemKey:null,prevRowOffset:null}}static getDerivedStateFromProps(e,t){return(0,s.default)((0,s.default)({},t),{},{prevItemKey:e.data.itemKey,prevRowOffset:e.data.offset,shouldAnimate:h(e,t)})}shouldComponentUpdate(e,t){return this.props.animate!==e.animate||this.props.zIndex!=this.props.zIndex||this.props.renderItem!==e.renderItem||this.state.shouldAnimate!==t.shouldAnimate||!(0,n.default)(this.props.data,e.data)}render(){var{data:e,zIndex:t}=this.props,{shouldAnimate:a}=this.state,r=a?`${u} 200ms ease-in-out`:"none",i="horizontal"===this.props.listDirection?{width:e.width,[u]:`translateX(${e.offset}px)`}:{height:e.height,[u]:`translateY(${e.offset}px)`},n=(0,s.default)({zIndex:t,[c]:r},i),o=this.props.renderItem(e);return l.default.createElement("div",{className:d.default.item,style:n},o)}}function h(e,t){if(!e.animate)return!1;var{prevItemKey:a}=t;return e.data.itemKey===a&&e.data.offset!==t.prevRowOffset}t.default=f,f.displayName="ListItem"},55634:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(94184)),n=a(24788),o=r(a(67294)),d=i(a(75444)),u=i(a(16520)),c=r(a(12536)),f=i(a(1886)),h=r(a(56898)),p=i(a(23152)),m=i(a(80162)),_=i(a(80896)),v=i(a(81696)),g=a(50560),E=i(a(85726)),S=i(a(32885)),C=i(a(7170)),y=i(a(97439));class b extends o.PureComponent{constructor(e){super(e),this._updateImgSrcUrl=e=>{var t,a=e.height+50,r="color:red|"+e.lat+", "+e.lng,i=e.lat+", "+e.lng,l=e.width+"x"+a,o=u.default.currentRes===u.default.RES.HIGH?2:1,f=m.default.getLocale(),p=y.default.GSM_NAME,_=y.default.build(d.default.G_MAPS_IMG_URL,(0,s.default)({zoom:15,size:l,scale:o,language:f,client:p},e.showMarker?{markers:r}:{center:i})),v="dark"===(null===(t=this.context)||void 0===t?void 0:t.theme)?`${_}&${d.default.G_MAPS_DARK_MODE_STYLE}`:_;this._lastURL!==v&&(this._lastURL=v,y.default.gsmURL(v,y.default.GSM_NUMS).checkpoint(e.rejectOnUnmount()).then((e=>{this.setState({imgSrcUrl:e,hiResAvail:h.isCached(e)})})).catch((0,n.filteredCatch)(c.Unmount,(()=>{}))))},this._onImgLoaded=()=>{this.state.hiResAvail||this.setState({hiResAvail:!0}),this.props.onLoad&&this.props.onLoad()},this.state={imgSrcUrl:null,hiResAvail:!1},this._updateImgSrcUrl(e)}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>this._updateImgSrcUrl(this.props)))}componentDidUpdate(){this._updateImgSrcUrl(this.props)}render(){var{lat:e,lng:t,name:a,width:r,height:i,className:s,linkify:n,onClick:d,a8nText:u}=this.props,c={pointerEvents:"none",width:r,height:this.state.hiResAvail?void 0:i},h=(0,l.default)(s,{[v.default.hidden]:!this.state.hiResAvail}),_=this.state.hiResAvail?null:o.default.createElement(S.default,{name:"map-placeholder",display:"inline"}),E=o.default.createElement(p.default,{src:this.state.imgSrcUrl||"",className:h,style:c,hasPrivacyChecks:!1,onLoad:this._onImgLoaded,noXHR:!0});return n?o.default.createElement(f.default,{href:(0,g.getMapUrl)(e,t,a),className:v.default.container,onClick:d,a8nText:u,"aria-label":m.default.t(27)},_,E):o.default.createElement("span",{className:v.default.container},_,E)}}b.defaultProps={linkify:!0,showMarker:!0},b.contextType=C.default,b.displayName="Map";var M=(0,_.default)((0,E.default)(b));t.default=M},29961:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{disabled:t}=e,a=(0,n.default)(e.chat,["unreadCount"]),r=e.onMarkUnread.bind(null,!a.unreadCount);return i.default.createElement(s.default,{a8n:"mi-mark-as",action:r,key:"MarkUnreadMenuItem",disabled:t},a.unreadCount?l.default.t(1061):l.default.t(1062))};var i=r(a(67294)),s=r(a(7970)),l=r(a(80162)),n=r(a(95607))},73616:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Pending=function(e){var{cancelable:t}=e,a=(0,i.default)(n.default.icon,t?n.default.cursorPointer:null);return s.default.createElement("div",{className:n.default.controls,"data-testid":"media-state-pending"},s.default.createElement("div",{className:a},s.default.createElement("div",{className:n.default.spinner},s.default.createElement(o.default,{size:50,stroke:3,color:"white"})),t?s.default.createElement("div",{className:n.default.cancel},s.default.createElement(d.default,{name:"media-cancel"})):null))},t.Download=function({filesize:e=0,onClick:t}){return e>0?s.default.createElement("div",{className:n.default.controls,"data-testid":"media-state-download"},s.default.createElement("button",{className:(0,i.default)(n.default.btnMeta,n.default.cursorPointer),onClick:t},s.default.createElement(d.default,{name:"media-download",className:n.default.iconMeta}),s.default.createElement("span",null,l.default.filesize(e)))):s.default.createElement("div",{className:n.default.controls,"data-testid":"media-state-download"},s.default.createElement("button",{className:(0,i.default)(n.default.button,n.default.cursorPointer),onClick:t},s.default.createElement(d.default,{name:"media-download"})))},t.Upload=function({filesize:e=0}){return e>0?s.default.createElement("div",{className:n.default.controls,"data-testid":"media-state-upload"},s.default.createElement("button",{className:(0,i.default)(n.default.btnMeta,n.default.cursorPointer)},s.default.createElement(d.default,{name:"media-upload",className:n.default.iconMeta}),s.default.createElement("span",null,l.default.filesize(e)))):s.default.createElement("div",{className:n.default.controls,"data-testid":"media-state-upload"},s.default.createElement("div",{className:n.default.button},s.default.createElement(d.default,{name:"media-upload"})))},t.Play=function(){return s.default.createElement("div",{className:n.default.controls},s.default.createElement("div",{className:n.default.button},s.default.createElement(d.default,{name:"media-play",className:n.default.play})))},t.GifIcon=function({onClick:e}){return s.default.createElement("div",{role:"button",className:n.default.controls,onClick:e,"data-testid":"media-state-gif-icon"},s.default.createElement("div",{className:n.default.button},s.default.createElement(d.default,{name:"media-gif"})))};var i=r(a(94184)),s=r(a(67294)),l=r(a(80162)),n=r(a(25201)),o=r(a(69507)),d=r(a(32885))},60237:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t,thumbnailPlaceholder:a}=e,r=(0,l.default)(e,["msg","thumbnailPlaceholder"]),{mediaData:i}=(0,u.default)(t,["mediaData"]);if(null==i){return null!=a?o.default.createElement(f,{className:r.containerClassName},a):null}return o.default.createElement(c,(0,s.default)({mediaData:i,thumbnailPlaceholder:a},r))};var s=i(a(67154)),l=i(a(6479)),n=i(a(94184)),o=r(a(67294)),d=i(a(5442)),u=i(a(95607));function c(e){var{containerClassName:t,childClassName:a,mediaData:r,thumbnailPlaceholder:i}=e,{preview:s,fullPreviewData:l}=(0,u.default)(r,["preview","fullPreviewData"]),n=[];return null!=s&&n.push({opaque:s,key:"preview"}),null!=l&&n.push({opaque:l,key:"fullPreviewData"}),0===n.length?null!=i?o.default.createElement(f,{className:t},i):null:o.default.createElement(f,{className:t},n.map((({key:e,opaque:t})=>o.default.createElement(h,{className:a,key:e,opaque:t}))))}function f(e){var{className:t,children:a}=e;return o.default.createElement("div",{className:(0,n.default)(d.default.container,t)},a)}function h(e){var{className:t,opaque:a}=e;return(0,o.useEffect)((()=>{if(null!=a)return a.retain(),()=>{a.autorelease()}}),[a]),o.default.createElement("div",{className:(0,n.default)(d.default.child,t),style:a?{backgroundImage:`url("${a.url()}")`}:null})}},97713:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBar=function(e){var t=(0,l.default)(d.default.menu,{[d.default.menuDefault]:!e.theme,[d.default.menuStrong]:"strong"===e.theme,[d.default.menuInverse]:"inverse"===e.theme,[d.default.menuMediaEditor]:"media-editor"===e.theme});return n.default.createElement("div",{className:t},e.children)},t.MenuBarItem=function(e){var{text:t,transitionName:a="dropdown",disabled:r=!1,children:i,icon:m,title:_,selected:v}=e,[g,E]=(0,n.useState)(!1),S=null!=i&&g?n.default.createElement(u.default,{displayName:"MenuBarMenuItem",escapable:!0,popable:!0,requestDismiss:()=>{E(!1)}},i):null,C=(0,l.default)(d.default.item,{[d.default.selected]:v,[d.default.active]:g,[d.default.disabled]:r}),[y,b]=(0,h.default)((t=>{e.onClick&&e.onClick(t),t.isDefaultPrevented()||(t.preventDefault(),g||null!=i&&E(!0))}),{disabled:r}),[M,T]=(0,c.default)(),I=(0,f.default)(y,M);return n.default.createElement("div",{"data-a8n":o.default.key(e.a8nText),className:C},n.default.createElement("div",(0,s.default)({},b,{className:(0,l.default)(d.default.button,T&&d.default.itemFocused),"data-tab":r?void 0:e.tabOrder,title:_,"aria-label":_,ref:I}),m,t&&n.default.createElement("span",{className:d.default.itemText},t)),n.default.createElement(p.default,{transitionName:a},S))};var s=i(a(67154)),l=i(a(94184)),n=r(a(67294)),o=i(a(55847)),d=i(a(3183)),u=i(a(26144)),c=i(a(290)),f=i(a(29918)),h=i(a(13085)),p=i(a(4328))},32114:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(80162)),d=i(a(80896)),u=i(a(58018)),c=i(a(85407)),f=i(a(32885));class h extends l.Component{constructor(...e){super(...e),this.refDiv=(0,l.createRef)(),this.getElement=()=>this.refDiv.current,this.addOrRemoveLabelOnSelected=()=>{var e=this.props.selectedModels.getSelected();n.default.openModal(l.default.createElement(u.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))}}componentDidMount(){this.props.selectedModels&&this.props.listeners.add(this.props.selectedModels,"all",(()=>{this.forceUpdate()}))}componentDidUpdate(){0===this.props.selectedModels.getSelected().length&&this.props.onCancel&&this.props.onCancel()}render(){var e,t,a,{labelEditEnabled:r,onRemoveLabel:i}=this.props,n=this.props.selectedModels.getSelected().length,{onDelete:d}=this.props;r&&n>0&&(e=l.default.createElement(m,{name:"label",disabled:!n,title:o.default.t(1765),onClick:this.addOrRemoveLabelOnSelected})),i&&n>0&&(a=l.default.createElement(m,{name:"label-delete",disabled:!n,title:o.default.t(1767),onClick:i})),d&&n>0&&(t=l.default.createElement(m,{name:"delete",disabled:!n,title:o.default.t(1766),onClick:d}));var u=(0,s.default)(c.default.multiControls,{[c.default.drawerHeader]:"drawer-header"===this.props.theme,[c.default.chatListPanel]:"chatlist-panel"===this.props.theme});return l.default.createElement("div",{className:u,ref:this.refDiv},l.default.createElement(m,{name:"x",onClick:this.props.onCancel}),l.default.createElement("div",{className:c.default.multiCount},o.default.t(1464,{count:n,_plural:n})),e,t,a)}}h.displayName="MixedMultiselectBar";var p=(0,d.default)(h);t.default=p;var m=({name:e,title:t,onClick:a,directional:r,disabled:i})=>l.default.createElement("button",{className:c.default.multiselectIcon,title:t,onClick:a,disabled:i?"disabled":void 0},l.default.createElement(f.default,{name:e,directional:r}))},64913:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(59854)),n=i(a(18446)),o=i(a(78718)),d=i(a(23279)),u=i(a(94184)),c=a(24788),f=a(78840),h=i(a(63337)),p=r(a(67294)),m=i(a(33766)),_=r(a(12536)),v=i(a(80896)),g=i(a(617)),E=i(a(85726)),S=i(a(59979));class C extends p.Component{constructor(e){var t;super(e),this._setStateTimer=new f.ShiftTimer((e=>{this.setState(e)})),this._setRefComponent=e=>{this._refComponent=e},this.addListeners=()=>{window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("resize",this.handleResize),this.props.listeners.add(m.default,"floater_escape_overlap",this._escapeOverlapMove)},this._getInitialStyle=()=>this.props.initialStyle?{width:this.props.initialStyle.width,left:this.props.initialStyle.left,bottom:this.props.initialStyle.bottom}:{width:this.props.minWidth,left:this.props.margin.x,bottom:this.props.margin.y},this._getResizerCallback=e=>t=>{0===t.button&&this.setState({resizeDirection:e,currentAction:1,resizeStartPiPStyle:{width:this.state.width,left:this.state.left,bottom:this.state.bottom},resizeStartMousePosition:{x:t.clientX,y:t.clientY}}),t.stopPropagation()},this.handleMoveStart=e=>{0===e.button&&this.setState({currentAction:2,moveStartPositionStyle:{left:this.state.left,bottom:this.state.bottom},moveStartMousePosition:{x:e.clientX,y:e.clientY}}),e.stopPropagation()},this.handleMoveStop=()=>{var e=this._getRect();this.props.onMoveStop&&this.props.onMoveStop(e)},this.handleResize=(0,d.default)((()=>{var e=window.innerHeight-2*this.props.margin.y,t=window.innerWidth-2*this.props.margin.x,a=this.state.width,r=a/this.props.aspectRatio,i=this.state.bottom,s=this.state.left;r>e&&(r=e,a=e*this.props.aspectRatio),a>t&&(r=t/this.props.aspectRatio,a=t),i+r>e+this.props.margin.y&&(i=e+this.props.margin.y-r),s+a>t+this.props.margin.x&&(s=t+this.props.margin.x-a),this.state.previousWindowSize.width<s+a+this.props.margin.x+3&&(s=t+this.props.margin.x-a),this.state.previousWindowSize.height<i+r+this.props.margin.y+3&&(i=e+this.props.margin.y-r);var l,d=null!=this.state.previousConvPanelRightBorder&&this.state.previousConvPanelRightBorder>0&&Math.abs(this.state.left+a+this.props.margin.x-this.state.previousConvPanelRightBorder)<3;this.props.escapeConversationHeader&&m.default.getConversationHeaderOffset((e=>{l=e.right}));var u=l&&l<window.innerWidth;d&&null!=l&&0!==l&&u&&(s=l-this.props.margin.x-a);var c={bottom:Math.max(this.props.margin.y,i),left:Math.max(this.props.margin.x,s),width:Math.max(this.props.minWidth,a),previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:l},f=(0,o.default)(this.state,["bottom","left","width","previousWindowSize","previousConvPanelRightBorder"]);(0,n.default)(c,f)||this.setState(c)}),50),this._validateMoveResize=(e,t,a,r)=>{var i=e,s=t,n=a,o=0,d=0,u=0;switch(r){case 1:o=this.state.resizeStartPiPStyle.width,d=this.state.resizeStartPiPStyle.left,u=this.state.resizeStartPiPStyle.bottom;break;case 2:o=this.state.width,d=this.state.moveStartPositionStyle.left,u=this.state.moveStartPositionStyle.bottom}var c=window.innerHeight,f=window.innerWidth,h=o+i,p=h/this.props.aspectRatio,m=u+n,_=(0,l.default)(m,2),v=d+s,g=(0,l.default)(v,2),E=this.props.minWidth,S=(0,l.default)(this.props.margin.y,2),C=(0,l.default)(c-p-this.props.margin.y,2),y=(0,l.default)(this.props.margin.x,2),b=(0,l.default)(f-h-this.props.margin.x,2);if(S>_||_>C)switch(r){case 1:n=0,s=0,i=0;break;case 2:n=0}if(y>g||g>b)switch(r){case 1:n=0,s=0,i=0;break;case 2:s=0}if(i&&m+p+this.props.margin.y>c)switch(r){case 1:n=0,s=0,i=0}if(i&&v+h+this.props.margin.x>f)switch(r){case 1:n=0,s=0,i=0}return(h<E||p+2*this.props.margin.y>c||h+2*this.props.margin.x>f)&&(n=0,s=0,i=0),{deltaWidth:i,deltaBottom:n,deltaLeft:s}},this.handleMouseMove=e=>{var t,a=0,r=0,i=0,s=0;switch(this.state.currentAction){case 0:return;case 1:switch(this.state.resizeDirection){case 0:a=(r=this.state.resizeStartMousePosition.y-e.clientY)*this.props.aspectRatio;break;case 1:a=(r=e.clientY-this.state.resizeStartMousePosition.y)*this.props.aspectRatio,s=-r;break;case 3:s=-(r=(a=e.clientX-this.state.resizeStartMousePosition.x)/this.props.aspectRatio);break;case 2:s=-(r=(a=this.state.resizeStartMousePosition.x-e.clientX)/this.props.aspectRatio),i=-a;break;case 4:r=(a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)))/this.props.aspectRatio;break;case 5:r=(a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)))/this.props.aspectRatio,i=-a;break;case 6:s=-(r=(a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)))/this.props.aspectRatio);break;case 7:s=-(r=(a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)))/this.props.aspectRatio),i=-a}var l=0,n=0,o=0;if(0===(t=this._validateMoveResize(a,i,s,1)).deltaWidth&&0===t.deltaLeft&&0===t.deltaBottom){if(a<0)switch(this.state.resizeDirection){case 0:case 4:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,s=0,i=0;break;case 5:i=-(a=this.props.minWidth-this.state.resizeStartPiPStyle.width),s=0;break;case 1:case 3:case 6:s=-(r=(a=this.props.minWidth-this.state.resizeStartPiPStyle.width)/this.props.aspectRatio),i=0;break;case 2:case 7:s=-(r=(a=this.props.minWidth-this.state.resizeStartPiPStyle.width)/this.props.aspectRatio),i=-a}else if(a>0){var d=this.state.resizeStartPiPStyle.width/this.props.aspectRatio;switch(this.state.resizeDirection){case 0:case 4:a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-d-this.state.resizeStartPiPStyle.bottom))-.1;break;case 5:r=(a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-d-this.state.resizeStartPiPStyle.bottom))-.1)/this.props.aspectRatio,i=-a;break;case 1:case 3:case 6:s=-(r=(a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1)/this.props.aspectRatio);break;case 2:case 7:s=-(r=(a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1)/this.props.aspectRatio),i=-a}}l=this.state.resizeStartPiPStyle.width+a,n=this.state.resizeStartPiPStyle.left+i,o=this.state.resizeStartPiPStyle.bottom+s,this.setState({width:l,left:n,bottom:o})}else l=this.state.resizeStartPiPStyle.width+t.deltaWidth,n=this.state.resizeStartPiPStyle.left+t.deltaLeft,o=this.state.resizeStartPiPStyle.bottom+t.deltaBottom,this.setState({width:l,left:n,bottom:o});this.props.onResize&&this.props.onResize(l,n,o);break;case 2:i=e.clientX-this.state.moveStartMousePosition.x,s=this.state.moveStartMousePosition.y-e.clientY,t=this._validateMoveResize(a,i,s,2);var u=0,c=0;u=0!==i&&0===t.deltaLeft?i>0?window.innerWidth-this.state.width-this.props.margin.x:this.props.margin.x:this.state.moveStartPositionStyle.left+t.deltaLeft,c=0!==s&&0===t.deltaBottom?s>0?window.innerHeight-this.state.width/this.props.aspectRatio-this.props.margin.y-.1:this.props.margin.y:this.state.moveStartPositionStyle.bottom+t.deltaBottom,this.setState({left:u,bottom:c}),this.props.onMove&&this.props.onMove(u,c)}},this.handleMouseUp=()=>{this.setState({currentAction:0})},this._getRect=()=>({top:window.innerHeight-this.state.bottom-this.state.width/this.props.aspectRatio,left:this.state.left,bottom:window.innerHeight-this.state.bottom,right:this.state.left+this.state.width}),this._escapeOverlapMove=(e,t)=>{var a=e.getBoundingClientRect(),r={left:a.left-t,top:a.top-t,right:a.right+t,bottom:a.bottom+t},i=this._getRect();if(this._doOverlap(i,r)){var s,l,n=this._escapeDistance(i,r);if(this._isTranslationOutOfBound(-n.toLeftDistance,0)||(void 0===s||n.toLeftDistance<s)&&(s=n.toLeftDistance,l=2),this._isTranslationOutOfBound(0,-n.toBottomDistance)||(void 0===s||n.toBottomDistance<s)&&(s=n.toBottomDistance,l=1),this._isTranslationOutOfBound(n.toRightDistance,0)||(void 0===s||n.toRightDistance<s)&&(s=n.toRightDistance,l=3),this._isTranslationOutOfBound(0,n.toTopDistance)||(void 0===s||n.toTopDistance<s)&&(s=n.toTopDistance,l=0),void 0!==s){var o={};switch(l){case 2:o={left:this.state.left-n.toLeftDistance};break;case 1:o={bottom:this.state.bottom-n.toBottomDistance};break;case 3:o={left:this.state.left+n.toRightDistance};break;case 0:o={bottom:this.state.bottom+n.toTopDistance}}var d=(0,S.default)((0,h.default)(this._refComponent,"this._refComponent"),o,{duration:200});Promise.race([d,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState(o)})).catch((0,c.filteredCatch)(_.Unmount,(()=>{})))}}},this.props.escapeConversationHeader&&m.default.getConversationHeaderOffset((e=>{t=e.right}));var a={resizeDirection:0,currentAction:0,resizeStartMousePosition:{x:0,y:0},resizeStartPiPStyle:{width:0,bottom:0,left:0},moveStartMousePosition:{x:0,y:0},moveStartPositionStyle:{left:0,bottom:0},previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:t};this.props.animationStartStyle?this.state=(0,s.default)((0,s.default)({},a),this.props.animationStartStyle):this.state=(0,s.default)((0,s.default)({},a),this._getInitialStyle())}componentWillUnmount(){this.handleResize.cancel(),this._setStateTimer.cancel(),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("resize",this.handleResize)}componentDidMount(){if(!this.props.animationStartStyle)return this.addListeners(),void this.handleResize();var e=this.props.animationStartStyle,t=this._getInitialStyle(),a=e.width/this.props.aspectRatio,r=e.height,i=r/a,l=(0,s.default)((0,s.default)({},t),{},{height:t.width/this.props.aspectRatio,scaleY:[1,i],translateY:[0,(a-r)/2/i]}),n=(0,S.default)((0,h.default)(this._refComponent,"this._refComponent"),l,{easing:"easeInOutQuart",duration:400});this._initialAnimationPromise=Promise.race([n,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this._initialAnimationPromise=null,this.setState(t),this.addListeners(),this.handleResize()})).catch((0,c.filteredCatch)(_.Unmount,(()=>{})))}componentDidUpdate(e){if(this.props.aspectRatio!==e.aspectRatio&&this.props.initialStyle){if(this._initialAnimationPromise)return void this._setStateTimer.onOrAfter(400,this.props.initialStyle);var t=this.props.initialStyle.width,a=this.props.initialStyle.left+t-(this.state.width+this.state.left),r=this.props.initialStyle.bottom+t/this.props.aspectRatio-(this.state.bottom+this.state.width/this.props.aspectRatio);Math.abs(a)<.1&&Math.abs(r)<.1?this.setState(this.props.initialStyle):this.setState({width:t})}}_getDimensions(){return{width:this.state.width,height:this.state.width/this.props.aspectRatio}}_doOverlap(e,t){return!(e.right<=t.left||e.left>=t.right)&&!(e.bottom<=t.top||e.top>=t.bottom)}_escapeDistance(e,t){return{toLeftDistance:e.right-t.left,toBottomDistance:t.bottom-e.top,toRightDistance:t.right-e.left,toTopDistance:e.bottom-t.top}}_isTranslationOutOfBound(e,t){var a=window.innerWidth,r=window.innerHeight,i=this.state.left+e,s=this.state.bottom+t,l=this.state.width,n=l/this.props.aspectRatio,o=this.props.margin.x,d=a-l-this.props.margin.x,u=this.props.margin.y,c=r-n-this.props.margin.y;return u>s||s>c||(o>i||i>d)}render(){var e=this._getDimensions(),t={width:e.width,height:e.height,bottom:this.state.bottom+"px",left:this.state.left+"px"};return p.default.createElement("div",{ref:this._setRefComponent,className:(0,u.default)(g.default.moveResizeComponentContainer),style:t},null!=this.props.bottomContent?p.default.createElement("div",{className:(0,u.default)(g.default.bottomContent)},this.props.bottomContent):null,this.props.disableResize?null:p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:(0,u.default)(g.default.topResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(0)}),p.default.createElement("div",{className:(0,u.default)(g.default.bottomResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(1)}),p.default.createElement("div",{className:(0,u.default)(g.default.leftResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(2)}),p.default.createElement("div",{className:(0,u.default)(g.default.rightResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(3)}),p.default.createElement("div",{className:(0,u.default)(g.default.topRightResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(4)}),p.default.createElement("div",{className:(0,u.default)(g.default.topLeftResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(5)}),p.default.createElement("div",{className:(0,u.default)(g.default.bottomRightResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(6)}),p.default.createElement("div",{className:(0,u.default)(g.default.bottomLeftResizer,g.default.resizer,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(7)})),p.default.createElement("div",{className:(0,u.default)(g.default.moveResizeComponentInnerContainer,this.props.className)},p.default.createElement("div",{className:(0,u.default)(g.default.moveable,{[g.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this.handleMoveStart,onMouseUp:this.handleMoveStop,grab:2===this.state.currentAction?"true":"supported"},this.props.children)))}}C.displayName="MoveResizeComponent";var y=(0,v.default)((0,E.default)(C));t.default=y},67030:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(35161)),l=i(a(63105)),n=i(a(94184)),o=r(a(67294)),d=i(a(33766)),u=i(a(51115)),c=i(a(38906)),f=i(a(61900)),h=i(a(74344)),p=a(34605),m=i(a(80162)),_=i(a(80896)),v=i(a(58018)),g=i(a(72462)),E=i(a(33048)),S=i(a(8629)),C=a(6578),y=i(a(32885)),b=r(a(48847));class M extends o.Component{constructor(...e){super(...e),this._refDiv=(0,o.createRef)(),this.getElement=()=>this._refDiv.current,this._handleStarChanged=e=>{this.props.selectedMessages.isSelected(e)&&this.forceUpdate()},this._handleStarSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected();e&&d.default.sendStarMsgs(e,r,null,a),this.props.onCancel()},this._handleUnstarSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected();e&&d.default.sendUnstarMsgs(e,r,null,a),this.props.onCancel()},this._handleDownloadSelected=()=>{var e=(0,l.default)(this.props.selectedMessages.getSelected(),(e=>e.mediaData));if(e.length){var t=(0,l.default)(e,(e=>!e.mediaData.isDownloadable()));t.length>0?(d.default.openToast(o.default.createElement(b.default,{msg:m.default.t(698),id:(0,b.genId)()})),Promise.all((0,s.default)(t,(e=>e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.MULTI_SELECT_DOWNLOAD,isUserInitiated:!0})))).then((()=>{var t=(0,l.default)(e,(e=>e.mediaData.isDownloadable()));e.length>t.length&&d.default.openToast(o.default.createElement(b.default,{msg:m.default.t(805,{_plural:e.length-t.length,count:e.length-t.length}),id:(0,b.genId)()})),t.length&&f.default.initDownload(t)}))):f.default.initDownload(e),this.props.onCancel()}},this.addOrRemoveLabelOnSelected=()=>{var e=this.props.selectedMessages.getSelected();d.default.openModal(o.default.createElement(v.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))},this._handleDeleteSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected(),i=r.every((e=>e.canRevoke()));e&&d.default.openModal(o.default.createElement(c.default,{chat:e,msgList:r.map(C.unproxy),deletePrompt:!0,revokePrompt:i&&!this.props.disableRevoke,toastPosition:a,onCancel:this.props.onCancel}))},this._handleForwardSelected=()=>{var e=this.props.selectedMessages.getSelected();!this.props.noSortOnForward&&this.props.chat&&(e=this.props.chat.sortMsgs(e));var t=e.length,a=()=>{this.props.onCancel()},r=(0,l.default)(e,(e=>e.canForward()));r.length?t!==r.length?d.default.openModal(o.default.createElement(u.default,{title:m.default.t(607),onOK:()=>{d.default.openModal(o.default.createElement(h.default,{msgs:r,pushTransition:"none",popTransition:"none",onForward:a}),{transition:"modal-flow"})},okText:m.default.t(813),onCancel:()=>d.default.closeModal(),cancelText:m.default.t(1768)},m.default.t(606))):d.default.openModal(o.default.createElement(h.default,{msgs:e,pushTransition:"none",popTransition:"none",onForward:a}),{transition:"modal-flow"}):d.default.openModal(o.default.createElement(u.default,{title:m.default.t(797),onOK:()=>d.default.closeModal(),okText:m.default.t(1941)},m.default.t(794,{_plural:t})))}}componentDidMount(){this.props.selectedMessages.getSelected().forEach((e=>{this.props.listeners.add(e,"change:star",(()=>{this.forceUpdate()}))})),this.props.listeners.add(this.props.selectedMessages,"all",(()=>{this.forceUpdate()})),this.props.listeners.add(E.default,"change:star",this._handleStarChanged)}render(){var e,t,a,r=this.props.selectedMessages.getSelected(),i=r.length,s=r.every((e=>e.canForward())),l=r.every((e=>e.canStar())),d=r.every((e=>e.mediaData)),u=r.every((e=>!e.asRevoked)),c=o.default.createElement(I,{disabled:!i||!s,name:"forward",onClick:this._handleForwardSelected,title:m.default.t(818,{_plural:i})}),f=o.default.createElement(I,{name:"delete",disabled:!i,title:m.default.t(663,{_plural:i}),onClick:this._handleDeleteSelected});i&&r.every((e=>e.star))?(e=this._handleUnstarSelected,t="unstar-btn",a=m.default.t(1586,{_plural:i})):(e=this._handleStarSelected,t="star-btn",a=m.default.t(1504,{_plural:i}));var h,_=o.default.createElement(I,{name:t,disabled:!i||!l,title:a,onClick:e}),v=(0,p.canEditLabelAssociation)()&&o.default.createElement(I,{disabled:!i||!u,name:"label",onClick:this.addOrRemoveLabelOnSelected,title:m.default.t(992)});Modernizr.adownload&&this.props.downloadButton&&d&&(h=o.default.createElement(I,{name:"download",disabled:!i,title:m.default.t(1764),onClick:this._handleDownloadSelected}));var g=(0,n.default)(S.default.multiControls,{[S.default.mediaGalleryTheme]:"mediaGallery"===this.props.theme});return o.default.createElement("div",{className:g,ref:this._refDiv},o.default.createElement(I,{name:"x",onClick:this.props.onCancel}),o.default.createElement("span",{className:S.default.multiCount},m.default.t(1464,{count:i,_plural:i})),v,_,f,c,h)}}M.defaultProps={downloadButton:!0},M.displayName="MultiselectBar";var T=(0,_.default)(M);t.default=T;var I=({name:e,title:t,onClick:a,directional:r,disabled:i})=>o.default.createElement("button",{className:S.default.multiselectIcon,title:t,onClick:a,disabled:i?"disabled":void 0},o.default.createElement(y.default,{name:e,directional:r}))},26106:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r,i,{disabled:f}=e,h=(0,u.default)(e.mute,["isMuted"]),p=(0,u.default)(e.chat,["archive"]),m=(0,u.default)(e.settings,["showArchiveV2"]),_=e.onMute.bind(null,!h.isMuted);p.archive&&(0,n.archiveV2Supported)()&&m.showArchiveV2?(t=c,i=o.default.t(1923),a=l.ThemeOptions.MUTED,r=s.default.createElement(d.default,{anchor:d.TooltipAnchor.Left},o.default.t(245))):(i=h.isMuted?o.default.t(1923):o.default.t(1922),t=_);return s.default.createElement(l.default,{action:t,disabled:f,theme:a,tooltip:r},i)};var s=i(a(67294)),l=r(a(7970)),n=a(34605),o=i(a(80162)),d=r(a(99769)),u=i(a(95607)),c=()=>{}},39148:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ContactName=v,t.GroupName=g,t.default=function(e){if(e.chat&&!e.chat.isUser){var{chat:t}=e,a=(0,s.default)(e,["chat"]);return n.default.createElement(g,(0,i.default)({chat:t,groupMetadata:t.groupMetadata},a))}var r,l;if(e.chat){var{chat:o}=e,d=(0,s.default)(e,["chat"]);r=o.contact,l=d}else{var{contact:u}=e;d=(0,s.default)(e,["contact"]);r=u,l=d}return n.default.createElement(v,(0,i.default)({contact:r},l))};var i=r(a(67154)),s=r(a(6479)),l=r(a(94184)),n=r(a(67294)),o=r(a(20923)),d=r(a(77188)),u=a(99375),c=r(a(64190)),f=r(a(83139)),h=r(a(65301)),p=r(a(71571)),m=r(a(32885)),_=r(a(95607));function v(e){var t,{element:a="span",highlightText:r,titlify:i,ellipsify:s,you:v,selectable:g,useShortName:E,useDisplayName:S,onClick:C,showLabel:y,showBusinessCheckmark:b,showNotifyName:M,useVerifiedName:T,firstLabel:I}=e,P=(0,_.default)(e.contact,["isPSA","formattedUser","formattedName","formattedShortName","displayName","labels","name","notifyName","isMe","verifiedName"]);r&&(t=u.Configuration.SearchName({terms:[r]}));var A,N=(0,l.default)(P.isPSA?h.default.psa:null,e.className);if(!(A=S&&P.displayName?P.displayName:E&&P.formattedShortName?P.formattedShortName:T&&P.verifiedName?P.verifiedName:v&&P.isMe?P.formattedName:M&&!P.name&&P.notifyName?`~${P.notifyName}`:P.formattedUser))return __LOG__(4,void 0,new Error,!0)`displayName:${A},
formattedName:${P.formattedName},
name:${P.name},
formattedShortName:${P.formattedShortName},
formattedUser:${P.formattedUser}`,SEND_LOGS("display name is null or undefined"),"";var O=n.default.createElement(o.default,{text:(0,p.default)(A),element:a,className:N,formatters:t,titlify:i,ellipsify:s,direction:"auto",selectable:g,inlineblock:!0,onClick:C}),D=e.labels||P.labels;D&&I&&(0,f.default)(D,I);var w=y&&D&&n.default.createElement("div",{className:h.default.labels},n.default.createElement(c.default,{labels:D,showName:!1}));return P.isPSA||d.default.supportsFeature(d.default.F.VNAME_V_2)&&b?n.default.createElement("span",{className:h.default.verified},O,n.default.createElement("div",{className:h.default.icon},n.default.createElement(m.default,{name:"psa-verified"})),w):w?n.default.createElement("span",{className:h.default.hasLabels},O,w):O}function g(e){var t,{element:a,highlightText:r,titlify:i,ellipsify:s,onClick:d,showLabel:v,firstLabel:g}=e,E=(0,_.default)(e.chat,["formattedTitle","labels"]),S=(0,_.default)(e.groupMetadata,["support"]);r&&(t=u.Configuration.SearchName({terms:[r]}));var C=e.labels||E.labels;C&&g&&(0,f.default)(C,g);var y=v&&C?n.default.createElement("div",{className:h.default.labels},n.default.createElement(c.default,{labels:C,showName:!1})):null,b=n.default.createElement(o.default,{text:(0,p.default)(E.title()),element:a,formatters:t,titlify:i,ellipsify:s,direction:"auto",inlineblock:!0,onClick:d});return S.support?n.default.createElement("div",{className:(0,l.default)({[h.default.verified]:!0,[h.default.hasLabels]:!!y})},b,n.default.createElement("div",{className:h.default.icon},n.default.createElement(m.default,{name:"psa-verified"})),y):y?n.default.createElement("div",{className:h.default.hasLabels},b,y):b}},65518:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(67294),l=i(a(74798)),n=i(a(33766)),o=i(a(80896)),d=r(a(13047)),u=a(85969),c=r(a(47644));class f extends s.Component{constructor(...e){super(...e),this.count=null,this._updateUnreadCount=()=>{var e;e=c.default.displayInfo===c.StreamInfo.OFFLINE||c.default.displayInfo===c.StreamInfo.TIMEOUT?-1:l.default.filter((e=>e.shouldShowUnreadInTitle)).length,this.count!==e&&(this.count=e,(0,u.setTitleAndIcon)(e))}}componentDidMount(){var e=this.props.listeners;e.add(n.default,"alert_new_msg",(e=>d.showMsgNotification(e))),e.add(n.default,"alert_call",d.showCallNotification),e.add(n.default,"cancel_call",d.cancelCallNotification),e.add(l.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",this._updateUnreadCount),e.add(l.default,"change:hasUnread",d.closeNotifications),e.add(c.default,"change:displayInfo",this._updateUnreadCount),this._updateUnreadCount()}render(){return null}}f.displayName="NotificationManager";var h=(0,o.default)(f);t.default=h},51124:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),l=i(a(94184)),n=r(a(67294)),o=i(a(26055)),d="transform 300ms cubic-bezier(.1,.82,.25,1)",u=(0,n.forwardRef)((function(e,t){var a=(0,n.useRef)(),r=(0,n.useRef)();(0,n.useImperativeHandle)(t,(()=>({get insideContainer(){return r.current},get outsideContainer(){return a.current}})));var{objectPosition:i,onObjectLoad:u,position:f,size:h,type:p,zoomIn:m}=e,_=null==h?void 0:h.width,v=null==h?void 0:h.height,g=null==m?void 0:m.factor,E=null==m?void 0:m.translateX,S=null==m?void 0:m.translateY,C=(0,n.useCallback)((()=>{null!=u&&null!=r.current&&u(r.current.firstChild)}),[u]),y=(0,n.useCallback)((()=>{if(null!=_&&null!=v){var e=a.current,t=r.current;if(e&&t){var s;switch(p){case"contain":s=function(e,t,a){var r=e.clientWidth,i=e.clientHeight,s=t,n=a,d=0,u=0;s/r>n/i?(n*=r/s,s=r,n<i&&(d=i/2-n/2)):(s*=i/n,n=i,s<r&&(u=r/2-s/2));return{style:{width:s,height:n,top:d,left:u,position:"absolute"},className:(0,l.default)(o.default.fit)}}(e,_,v);break;case"cover":s=function(e,t,a){var r=e.clientWidth,i=e.clientHeight,s=t,n=a,d=0,u=0;s!==r&&(n*=r/s,s=r,n>i&&(d=i/2-n/2));n<i&&(s*=i/n,n=i,s>r&&(u=r/2-s/2));return{style:{width:s,height:n,top:d,left:u,position:"absolute"},className:(0,l.default)(o.default.fit)}}(e,_,v);break;case"scaleDown":s=c(e,_,v);break;case"zoomIn":s=function(e,t,a,r){var i,s=c(e,t,a).style;i=r?{width:s.width,height:s.height,transition:d,transform:`translateX(${r.translateX}px) translateY(${r.translateY}px) scale(${r.factor})`}:{width:s.width,height:s.height,transition:d};return{style:i,className:(0,l.default)(o.default.fit,o.default.fitScaledown,o.default.fitZoomin)}}(e,_,v,null!=g&&null!=E&&null!=S?{factor:g,translateX:E,translateY:S}:null);break;default:return __LOG__(4,void 0,new Error,!0)`unrecognized type ${p}`,void SEND_LOGS("object-fit")}e.removeAttribute("class"),t.removeAttribute("style"),e.classList.add(...s.className.split(" ")),"relative"===f&&e.classList.add(o.default.fitRelative);var n=null!=i?i:s.style.position;for(var u of(t.style.setProperty("position",n),Object.keys(s.style))){var h=s.style[u];null==h||Number.isNaN(h)||t.style.setProperty(u,"number"==typeof h?h+"px":h)}C()}}}),[C,i,f,v,_,p,g,E,S]);return(0,n.useEffect)((()=>{var e=(0,s.default)((()=>{y()}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[y]),(0,n.useLayoutEffect)((()=>{y()}),[y]),n.default.createElement("div",{className:(0,l.default)({[o.default.fit]:!0,[o.default.fitRelative]:"relative"===f}),ref:a},n.default.createElement("div",{style:{visibility:"hidden"},ref:r},e.children))}));function c(e,t,a){var r=e.clientWidth,i=e.clientHeight,s=a,n=t;return s>i&&(s=i,n=t*(i/a)),n>r&&(n=r,s=a*(r/t)),{style:{width:n,height:s},className:(0,l.default)(o.default.fit,o.default.fitScaledown)}}t.default=u},28169:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(78840),l=i(a(67294)),n=r(a(96168)),o=r(a(83904)),d=r(a(77188)),u=r(a(80162)),c=r(a(80896)),f=r(a(72765)),h="sort remove reset add";class p extends l.PureComponent{constructor(e){super(e),this._onParticipantsUpdate=()=>{this._recalculateParticipantsTimer.debounce(100)},this._recalculateParticipantsTimer=new s.ShiftTimer((()=>{this.setState({participants:m(this.props.groupMetadata)})}));var{listeners:t,groupMetadata:{participants:a}}=e;this.state={participants:m(e.groupMetadata)},t.add(a,h,this._onParticipantsUpdate)}componentDidMount(){this.ensureParticipantsSorted()}componentDidUpdate(e){this.ensureParticipantsSorted();var t=e.groupMetadata.participants,a=this.props.groupMetadata.participants;if(a!==t){var r=this.props.listeners;r.remove(t,h,this._onParticipantsUpdate),r.add(a,h,this._onParticipantsUpdate),this._recalculateParticipantsTimer.cancel(),this.setState({participants:m(this.props.groupMetadata)})}}componentWillUnmount(){this._recalculateParticipantsTimer.cancel()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted()}render(){var e=this.props.groupMetadata.support?u.default.t(1547):this.props.overridingText||this.state.participants.join(u.default.t(724))||this.props.placeholder;return e?l.default.createElement(o.default,{text:e,location:this.props.location}):null}}function m(e){return d.default.isDropLastNameEnabled()?e.participants.map((t=>{var a=t.contact;return e.hasUniqueShortNameMention(a)?a.formattedShortNameWithNonBreakingSpaces:a.formattedName.replace(/\s/g," ")})):e.participants.map((e=>{var t=e.contact.formattedShortNameWithNonBreakingSpaces,[a]=t.split(/\s/);return n.default.exec(a)?a:t}))}p.CONCERNS={groupMetadata:["participants","support"]},p.displayName="ParticipantsListClass";var _=(0,c.default)((0,f.default)(p,p.CONCERNS));t.default=_},77031:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={GROUP:"GROUP",PROFILE:"PROFILE"};t.default=a},93083:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{disabled:t,onPinOrUnpin:a}=e,r=(0,n.default)(e.chat,["pin"]);return i.default.createElement(s.default,{a8n:"mi-pin",action:()=>{a(!r.pin)},key:"PinChat",disabled:t},null!=r.pin&&0!==r.pin?l.default.t(1578):l.default.t(1331))};var i=r(a(67294)),s=r(a(7970)),l=r(a(80162)),n=r(a(95607))},42529:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{children:t,className:a,onRef:r,onResize:i,onRef:c}=e,f=(0,l.default)(e,["children","className","onRef","onResize","onRef"]),h=(0,o.useRef)(null),p=(0,o.useRef)(null),m=(0,o.useCallback)((e=>{p.current=e,r&&r(e)}),[r]);return o.default.createElement("div",(0,s.default)({className:(0,n.default)(d.default.container,a),ref:m},f),t,o.default.createElement(u.default,{onResize:({width:t,height:a})=>{if(p.current){var r=h.current;null!=r&&r.width===t&&r.height===a||(h.current={height:a,width:t},e.onResize({height:a,width:t}))}}}))};var s=i(a(67154)),l=i(a(6479)),n=i(a(94184)),o=r(a(67294)),d=i(a(96153)),u=i(a(23661))},99661:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getObserverMap=n,t.getResizeObserver=o,t.observe=function(e,t){var a=o(),r=n();if(r.has(e))throw new Error("You can't observe the same element twice.");return r.set(e,t),a.observe(e),()=>{a.unobserve(e),r.delete(e)}};var i,s,l=r(a(91033));function n(){return null==i&&(i=new WeakMap),i}function o(){return null==s&&(s=new l.default((e=>{for(var t of e){var a=n().get(t.target),r=t.contentRect,{x:i,y:s,width:l,height:o,top:d,left:u,bottom:c,right:f}=r;null!=a&&a({x:i,y:s,width:l,height:o,top:d,left:u,bottom:c,right:f})}}))),s}},23661:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ResizeSensor=void 0;var s=i(a(67294)),l=a(99661),n=r(a(98850));class o extends s.Component{constructor(...e){super(...e),this._resizeObserver=(0,l.getResizeObserver)(),this._observerMap=(0,l.getObserverMap)(),this._handleDiv=e=>{var t=this._sensorEl;e!==t&&null!=t&&(this._resizeObserver.unobserve(t),this._observerMap.delete(t)),this._sensorEl=e,null!=e&&(this._observerMap.set(e,this._handleResize),this._resizeObserver.observe(e))},this._handleResize=e=>{this.props.onResize(e)}}shouldComponentUpdate(){return!1}render(){return s.default.createElement("div",{ref:this._handleDiv,className:n.default.sensor})}}t.ResizeSensor=o,o.displayName="ResizeSensor";var d=o;t.default=d},65481:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294));class s extends i.PureComponent{constructor(...e){super(...e),this._onRefChange=e=>{e?(this._ctx=e.getContext("2d"),this._imageData=this._ctx.createImageData(this.props.width,this.props.height)):(this._ctx=null,this._imageData=null)}}_updateCanvas(){var e=this._ctx,t=this._imageData,{rgbaBuffer:a}=this.props;e&&t&&a&&(t.data.set(new Uint8Array(a)),e.putImageData(t,0,0))}componentDidMount(){this._updateCanvas()}componentDidUpdate(){this._updateCanvas()}render(){return i.default.createElement("canvas",{role:"button",className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,ref:this._onRefChange})}}t.default=s,s.displayName="RGBACanvas"},11009:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginContext=function(){return Symbol("rte-plugin")},t.default=void 0;t.default=class{constructor(){this._internalHandlers=new Map}initialize(e){this.ctx=e}registerHandler(e,t,a){var r=this._internalHandlers.get(t)||new Map;r.set(e,a),this._internalHandlers.set(t,r)}unregisterHandler(e,t){var a=this._internalHandlers.get(t);a&&(a.delete(e),a.size||this._internalHandlers.delete(t))}handle(e,t=[]){var a,r,i=this._internalHandlers.get(e);return!!i&&(a=i,r=[],a.forEach((e=>r.push(e))),r).some((e=>e.apply(null,t)))}}},17874:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(9204)),s=r(a(59570)),l=r(a(68570)),n=r(a(48539)),o=r(a(42131)),d=r(a(92746)),u=r(a(53057)),c=r(a(17945)),f=r(a(81064)),h=r(a(85542)),p=r(a(6882)),m=new n.default,_=new i.default;class v extends((0,o.default)([s.default,_,u.default,m,c.default,d.default])){}t.default=v,v.Suggestions=(0,p.default)(f.default,{plugin:m}),v.EmojiSuggestions=(0,p.default)(l.default,{plugin:_}),v.QuickRepliesSuggestions=(0,p.default)(h.default,{plugin:d.default})},67755:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,a=new s.default,r=(0,o.default)([l.default,a,d.default]);return t=e=class extends r{},e.EmojiSuggestions=(0,u.default)(n.default,{plugin:a}),t};var s=i(a(9204)),l=i(a(59570)),n=i(a(68570)),o=r(a(42131)),d=i(a(53057)),u=i(a(6882))},88506:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{base:t,unicode:a,action:r,children:d}=e;return i.default.createElement("div",{className:n.default.gridContainer},i.default.createElement("span",{className:n.default.baseEmoji},i.default.createElement(s.default,{type:"emoji-grid",key:"base",a8n:"mi-emoji-variant",action:e=>r(e,a,t)},i.default.createElement(l.default,{text:t,formatters:o.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))),i.default.createElement("div",{className:n.default.options},d))};var i=r(a(67294)),s=r(a(7970)),l=r(a(20923)),n=r(a(37349)),o=a(99375)},15271:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{handlers:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]);var i=a[r];null!=i&&e[r].push([t,i])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>{var i=a[r];return e[r]=function(e,t){return a=>{e.some((([e,r])=>{var i=r.call(e,a,t);return!!a.defaultPrevented||!0===i&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(i,t),e}),{})}},21324:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{hooks:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]),e[r].push([t,a[r]])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>(e[r]=function(e,t){return(...a)=>{e.forEach((([e,r])=>r.call(e,...a,t)))}}(a[r],t),e)),{})}},34707:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{hotkeys:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]),e[r].push([t,a[r]])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>(e[r]=function(e,t){return a=>{e.some((([e,r])=>{var i=r.call(e,a,t);return!!a.defaultPrevented||!0===i&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(a[r],t),e)),{})}},55396:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=window.getSelection();if(!a||!a.rangeCount)return null;var r=a.getRangeAt(0);if(!r.collapsed)return null;var{startContainer:s,startOffset:l}=r;if(s===e){var{childNodes:n}=s,{length:o}=n;if(t===i.FORWARD&&l>o||t===i.BACKWARD&&!l)return null;var d=t===i.BACKWARD?1:0,u=n[l-d];return u instanceof Element?u:null}var c=s.length===l;if(t===i.BACKWARD&&l)return null;if(t===i.FORWARD&&!c)return null;var f=t===i.BACKWARD?"previousSibling":"nextSibling",h=s[f];return h instanceof Element?h:null},t.Direction=void 0;var i=(0,r(a(90225)).default)({FORWARD:void 0,BACKWARD:void 0});t.Direction=i},12249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e.getModifierState("Shift")&&!e.getModifierState("Alt")&&!e.getModifierState("Control")}},76488:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement&&Boolean(e.dataset&&e.dataset.mentionJid)}},44089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.metaKey||e.shiftKey||e.altKey||e.ctrlKey}},6080:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(a,r){var n="",o=!1,d=!0;return(0,s.default)(a,r,(a=>{return o?(r=a,d=i.default.isEmoji(r)||l.test(r),!0):n.length>e||void((o=a===t)||(n=a+n));var r})),o&&d?n:null}};var i=r(a(5318)),s=r(a(40343)),l=/\W/},40343:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(1!==t.rangeCount)return;if(!t.getRangeAt(0).collapsed)return;var{anchorNode:r,anchorOffset:d}=t;if(r&&r===e.refInput){if(-1===(d-=1))return;r=r.childNodes[d],d=r.textContent.length}r=(0,n.default)(r)?o(r):r,(0,i.default)(r,(e=>{var t=o(e);return t?[t]:[]}),(e=>{var t,i;if((0,l.isEmojiEl)(e))return t=s.default.fromNode(e,!0).toPlainString(),a(t,0,t);var n=(i=e===r?e.textContent.slice(0,d):e.textContent).lastIndexOf("\n"),o=n>=0;o&&(i=i.slice(n+1));for(var u=i.length-1;u>=0;u--)if(t=i.charAt(u),a(t,u,i))return!0;return!!o||void 0}))};var i=r(a(9226)),s=r(a(16221)),l=a(59570),n=r(a(3399));function o(e){var t=e;do{if((t=t&&t.previousSibling)&&t.nodeType!==Node.TEXT_NODE&&!(0,l.isEmojiEl)(t))return null}while(t&&(0,n.default)(t));return t}},71698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=t;for(;a>0;)e.modify("extend","backward","character"),a--}},13279:(e,t)=>{"use strict";function a(e,t){return e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.matches(t)}function r(e,t){for(var r=0;r<t.length;++r){var{serializers:i}=t[r];if(i)for(var s=0;s<i.length;++s){var[l,n]=i[s];if(a(e,l))return n}}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=[],l=e.cloneNode(!0).firstChild;for(;l;){switch(l.nodeType){case i:var n=r(l,t);if(n){a.push(n(l));break}switch(l.tagName){case"P":case"BR":case"PRE":a.push("\n");break;case"DIV":l.firstChild&&3!==l.firstChild.nodeType||a.push("\n")}break;case s:a.push(l.nodeValue)}if(l.hasChildNodes())l=l.firstChild;else{for(;l&&!l.nextSibling;)if((l=l.parentNode)===e){l=null;break}l&&(l=l.nextSibling)}}return a.join("")};var i=1,s=3},25290:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(13279)),s=(e,t)=>{t.focusNode||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("serializeTextBeforeCursor requires selection.focusNode"));var a=document.createRange();a.setStart(e,0),a.setEnd(t.focusNode,t.focusOffset);var r=a.cloneContents();return(0,i.default)(r,[])};t.default=s},75059:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.reduce(((e,{parsers:t})=>t?t.reduce(((e,t)=>t(e)),e):e),(0,i.default)(e))};var i=r(a(7187))},6882:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67154)),s=r(a(67294)),l=(e,t)=>{var a,r;function l(a){return s.default.createElement(e,(0,i.default)({},a,t))}return l.displayName=`Wrapper(${null!==(a=null!==(r=e.displayName)&&void 0!==r?r:e.name)&&void 0!==a?a:"Component"})`,l};t.default=l},625:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(90225)).default)({CHANGE:void 0,MOUNT:void 0,INPUT:void 0});t.default=i},11816:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(81122)),o=i(a(80359)),d=i(a(22849)),u=i(a(55904)),c=i(a(80162)),f=i(a(42529)),h=i(a(32885)),p=i(a(70682)),m=i(a(4328));class _ extends l.PureComponent{constructor(e){super(e),this.state={menuWidth:null,offset:0},this._handleItemClick=(e,t)=>{this.props.onItemClick&&this.props.onItemClick(e,t)},this._handleNextClick=()=>{var e=this.props.numItems,t=this.state.offset+this.props.numColumns;"number"!=typeof e||t>e||this.setState({offset:this.state.offset+1})},this._handlePrevClick=()=>{0!==this.state.offset&&this.setState({offset:this.state.offset-1})},this._handleResize=({width:e})=>{this.setState({menuWidth:e})},this._renderItem=(e,t,a)=>{var r=this.props.numItems;if("number"==typeof r&&e>=r)return null;var i=e-this.state.offset;return l.default.createElement(d.default,{column:i,carouselNumColumns:this.props.numColumns,key:e,menuWidth:a,onClick:this._handleItemClick,index:e,selected:t},this.props.renderItem(e))},this._checkSelectedIndex(e)}componentDidUpdate(){this._checkSelectedIndex(this.props)}_checkSelectedIndex({onItemClick:e,numItems:t,selectedIndex:a}){if(e&&0!==t){a<0&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("carousel_menu: selectedIndex is smaller than 0"));var r=t-1;a>r&&e(r)}}_renderPrevButton(){if(0===this.state.offset)return null;var e=c.default.isRTL()?"chevron-right":"chevron-left";return this._renderButton({className:o.default.prevButton,icon:e,onClick:this._handlePrevClick,id:"prev-button"})}_renderNextButton(){var{numColumns:e,numItems:t}=this.props;if("number"!=typeof t)return null;if(this.state.offset+e>=t)return null;var a=c.default.isRTL()?"chevron-left":"chevron-right";return this._renderButton({className:o.default.nextButton,icon:a,onClick:this._handleNextClick,id:"next-button"})}_renderButton({className:e,icon:t,onClick:a,id:r}){var i,{numColumns:n}=this.props;return i=null!=this.state.menuWidth&&0!==this.state.menuWidth?`${Math.round(this.state.menuWidth/n)}px`:100/n+"%",l.default.createElement("div",{className:(0,s.default)(o.default.button,e),style:{width:i},onClick:a,role:"button","data-testid":r},l.default.createElement(h.default,{className:o.default.buttonIcon,name:t}))}render(){var e,{numColumns:t,numItems:a,selectedIndex:r}=this.props,{menuWidth:i,offset:s}=this.state;return e=r<s?-1:r>=s+t?t-1+1:(r-s)%t,l.default.createElement(n.default,{className:this.props.className},l.default.createElement(f.default,{className:o.default.resizeContainer,onResize:this._handleResize},l.default.createElement(m.default,null,this._renderPrevButton()),l.default.createElement(u.default,{menuWidth:i,numColumns:t,numItems:a,offset:s,renderItem:this._renderItem,selectedIndex:r}),l.default.createElement(m.default,null,this._renderNextButton()),l.default.createElement(p.default,{numTabs:t,selectedTabIndex:e,hide:-1===e||0===e&&s>0||e===t,animate:!0})))}}t.default=_,_.displayName="CarouselMenu"},22849:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{column:a,carouselNumColumns:r,index:i,menuWidth:o}=e,d=(0,s.useRef)(null);t=null!=o&&0!==o?`${Math.round(o/r)}px`:100/r+"%";var u=l.default.isRTL()?-1:1;return s.default.createElement(n.default,{onRef:e=>{d.current=e},onClick:e.onClick,sectionId:i,selected:e.selected,theme:0!==i&&(a<=0||a>=r)?n.THEMES.CAROUSEL_END:n.THEMES.CAROUSEL,transform:`translateX(${100*a*u}%)`,width:t},e.children)};var s=i(a(67294)),l=r(a(80162)),n=i(a(99017))},55904:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{numItems:t,offset:a,renderItem:r,selectedIndex:l,menuWidth:n}=e,{numColumns:o}=e;return s.default.createElement(s.default.Fragment,null,(d=0,u=t-o,1===a&&(o+=1,d=-1),a===u-1&&(o+=1),(0,i.default)(o,(e=>{var i=e+d+a;return i<0||i>=t?null:r(i,i===l,n)}))));var d,u};var i=r(a(98913)),s=r(a(67294))},17657:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINIMUM_LOADING_TIME=t.convertTabToMood=t.StickerTabs=t.ValidMoods=t.INPUT_SHOW_POINT=t.INPUT_HIDE_POINT=t.INPUT_BAR_SCROLL_FAST=t.INPUT_BAR_SCROLL_SENSITIVITY=t.INPUT_BAR_TOTAL_HEIGHT=t.SCROLL_THROTTLE_TIME=t.SCROLL_CLICK_TIME_GAP=void 0;t.SCROLL_CLICK_TIME_GAP=1e3;t.SCROLL_THROTTLE_TIME=100;t.INPUT_BAR_TOTAL_HEIGHT=63;t.INPUT_BAR_SCROLL_SENSITIVITY=5;t.INPUT_BAR_SCROLL_FAST=15;t.INPUT_HIDE_POINT=44.099999999999994;t.INPUT_SHOW_POINT=94.5;var r=a(54302).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.ValidMoods=r;var i=a(54302).Mirrored(["RECENTS","LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.StickerTabs=i;t.convertTabToMood=e=>{var t=e;return r.isValid(t)?r.cast(t):null};t.MINIMUM_LOADING_TIME=1500},23459:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(91455)),s=(0,r(a(90225)).default)(i.default);t.default=s},91109:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=t.EMOJI_HEIGHT=t.SIDE_MARGIN=void 0;var s=i(a(67294)),l=r(a(33766)),n=a(44373),o=r(a(5318)),d=r(a(930)),u=r(a(30240)),c=r(a(37491)),f=r(a(62886)),h=r(a(35001)),p=r(a(80896)),m=r(a(94571)),_=r(a(26144)),v=r(a(30882)),g=parseInt(u.default["-side-margin"],10);t.SIDE_MARGIN=g;var E=parseInt(u.default["-emoji-height"],10);t.EMOJI_HEIGHT=E;var S=parseInt(u.default["-emoji-width"],10);t.EMOJI_WIDTH=S;class C extends s.Component{constructor(...e){super(...e),this.state={skinTonePicker:null},this._lastFocusedElement=null,this._closeSkinTonePicker=()=>{var e=this.state.skinTonePicker&&this.state.skinTonePicker.anchor;e&&e instanceof HTMLElement&&this._focusElement(e),this.setState({skinTonePicker:null})},this._setEmojiVariant=(e,t,a)=>{b(e),c.default.setVariant(t,a),this._handleEmoji(t)},this._clearPickerTimer=()=>{this._pickerTimer&&clearTimeout(this._pickerTimer)},this._showContextMenu=(e,t,a)=>{var r=o.default.getSkinToneBase(e);r&&this.setState({skinTonePicker:{menu:s.default.createElement(m.default,{base:r,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:n.DirX.RIGHT,dirY:n.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}})},this._handleEmoji=e=>{var t=e;if(o.default.getSkinToneBase(t)){var a=c.default.getVariantIfExists(t);if(null!=a)t=a;else if(this.props.allowVariantPrompt)return!0}this.props.onEmoji(t)},this._handleEmojiArrowDown=e=>{b(e);var t=M(e);null!=t&&this.props.focusBelow&&this.props.focusBelow(t)},this._handleEmojiArrowLeft=e=>{b(e);var t=M(e);if(null!=t){var a=t-1;a<0?this.props.focusAbove(this.props.numColumns-1):this.focusEmojiAt(a)}},this._handleEmojiArrowRight=e=>{b(e);var t=M(e);if(null!=t){var a=t+1;a>=this.props.emojis.length?this.props.focusBelow&&this.props.focusBelow(0):this.focusEmojiAt(a)}},this._handleEmojiArrowUp=e=>{b(e);var t=M(e);null!=t&&this.props.focusAbove(t)},this._handleEmojiEnter=e=>{b(e);var t=M(e);this._selectEmojiAt(t)},this._handleClick=e=>{b(e);var t=M(e);this._selectEmojiAt(t)},this._handleContextMenu=e=>{b(e);var t=this._getEmojiUnicode(e);t&&e.target instanceof HTMLElement&&this._showContextMenu(t,e.target)},this._handleMouseDown=e=>{b(e),this.state.skinTonePicker&&this.setState({skinTonePicker:null});var t=e.target;if(t instanceof HTMLElement){var a=this._getEmojiUnicode(e);a&&this._startPickerTimer(a,t)}},this._setRefEmojis=e=>{this._refEmojis=e}}shouldComponentUpdate(e,t){return this.props.emojis!==e.emojis||this.state.skinTonePicker!==t.skinTonePicker}componentDidMount(){this.props.listeners.add(c.default,"add remove change:variant",(()=>this.forceUpdate()))}componentDidUpdate(e,t){t.skinTonePicker&&this.state.skinTonePicker&&this._closeSkinTonePicker()}focusEmojiAt(e){var t=this._getRefEmojiAt(e);t&&this._focusElement(t)}selectFirstEmoji(){this._selectEmojiAt(0)}restoreFocus(){this._lastFocusedElement&&this._focusElement(this._lastFocusedElement)}_focusElement(e){var t=parseInt(e.dataset.emojiIndex,10);isNaN(t)||(f.default.focus(e,{preventScroll:!0}),this.props.onEmojiFocus(e),this._lastFocusedElement=e)}_selectEmojiAt(e){if(null!=e){var t=this.props.emojis[e];if(t){var a=this._getRefEmojiAt(e);if(a)this._clearPickerTimer(),this._handleEmoji(t)&&this._showContextMenu(t,a,!0)}}}_getEmojiUnicode(e){var t=M(e);if(null!=t){var a=this.props.emojis[t];return a||null}}_getRefEmojiAt(e){var t=this.props.emojis.length-1,a=Math.max(Math.min(e,t),0);if(null!=this._refEmojis)return this._refEmojis.children[a]}_startPickerTimer(e,t){this._clearPickerTimer(),this._pickerTimer=setTimeout((()=>{delete this._pickerTimer,this.props.listeners.addOnce(l.default,"window_click",b),this._showContextMenu(e,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}render(){var e;this.state.skinTonePicker&&(e=s.default.createElement(_.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,requestRecentFocusOnUnmount:!1},s.default.createElement(v.default,{tooltip:this.state.skinTonePicker})));var{emojis:t}=this.props;return t.length?s.default.createElement("div",{className:u.default.panel},s.default.createElement(h.default,{onMouseDown:this._handleMouseDown,onClick:this._handleClick,onContextMenu:this._handleContextMenu,handlers:{up:this._handleEmojiArrowUp,down:this._handleEmojiArrowDown,left:this._handleEmojiArrowLeft,right:this._handleEmojiArrowRight,enter:this._handleEmojiEnter,space:this._handleEmojiEnter}},s.default.createElement("div",{ref:this._setRefEmojis,className:u.default.section},t.map(((e,t)=>{var a=c.default.getVariantIfExists(e);return s.default.createElement(d.default,{element:"span",emoji:a||e,size:"large",key:e,tabIndex:"-1","data-emoji-index":t})})))),e):null}}C.displayName="EmojiRow";var y=(0,p.default)(C);function b(e){e.preventDefault(),e.stopPropagation()}function M(e){if(!(e.target instanceof HTMLElement))return null;var t=parseInt(e.target.dataset.emojiIndex,10);return isNaN(t)?null:t}t.default=class extends y{focusEmojiAt(e){this.getComponent().focusEmojiAt(e)}selectFirstEmoji(){this.getComponent().selectFirstEmoji()}restoreFocus(){this.getComponent().restoreFocus()}}},47458:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(44908)),l=i(a(10691)),n=i(a(18446)),o=i(a(74691)),d=i(a(94184)),u=r(a(67294)),c=i(a(5318)),f=i(a(5354)),h=i(a(36617)),p=i(a(35001)),m=i(a(98483)),_=i(a(80162)),v=i(a(47826)),g=i(a(64867)),E=i(a(13503)),S=r(a(32414)),C=i(a(4328));class y extends u.PureComponent{constructor(...e){super(...e),this._fastScroll=!1,this._scrollFromAnimation=!1,this._scrollFromFocus=!1,this._lastScrollTop=this.props.displayCache.scrollTop,this._lastSectionId=this.props.displayCache.sectionId,this.state={scrolledToTop:0===this.props.displayCache.scrollTop,searchText:this.props.defaultSearchText||"",showSearchInput:this.props.displayCache.showSearchInput},this._handleEmojiFocus=(e,t)=>{this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200);var a=t.scrollTop,r=e.getBoundingClientRect().top-t.getBoundingClientRect().top+a,i=r-t.clientHeight+e.clientHeight+2,s=this.state.showSearchInput?r-S.TOTAL_SEARCH_HEIGHT:r-2;t.scrollTop=(0,o.default)(a,i,s)},this._handleListFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleListScroll=e=>{var t=e-this._lastScrollTop;if(this._lastScrollTop=e,!this._scrollFromFocus&&!this._scrollFromAnimation&&!this._checkScrollTop()){var a=Math.abs(t);this._fastScroll=a>15;var r=t>=0?1:-1,i=0===e;e<S.TOTAL_SEARCH_HEIGHT?this.setState({scrolledToTop:i,showSearchInput:!0}):a<5||(this.state.showSearchInput?1===r&&this.setState({scrolledToTop:i,showSearchInput:!1}):-1===r&&this.setState({scrolledToTop:i,showSearchInput:!0}))}},this._handleListSection=e=>{this._scrollFromAnimation||(this._lastSectionId=e,this.props.onSection(e))},this._handleSearchResultsFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e})},this._handleScrollListFocusUp=()=>{this._focusSearchAndScrollToTop()},this._handleSearchDownKey=()=>{if(this.state.searchText){if(!this._refSearchResults)return;this._refSearchResults.focusFirstVisibleEmoji()}else this._refScrollList&&this._refScrollList.focusFirstVisibleEmoji(S.TOTAL_SEARCH_HEIGHT)},this._handleSearchEnterKey=()=>{this.state.searchText&&this._refSearchResults&&this._refSearchResults.selectFirstVisibleEmoji()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusPrev():this.focusSearchInput()},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusNext():this.focusSearchInput()},this._setRefSearchInput=e=>{this._refSearchInput=e},this._setRefScrollList=e=>{this._refScrollList=e},this._setRefSearchResults=e=>{this._refSearchResults=e},this._getSectionListDataMemoized=(0,v.default)((({sectionIds:e})=>e.map((e=>({sectionId:e,emojis:"RECENT"===e?(0,s.default)(g.default.reduce(((e,t)=>{var a=c.default.getSkinToneBase(t.id)||t.id;return null!=c.default.getGlyphId(a)&&e.push(a),e}),[])):c.default.getEmojisInCategory(e)})))),((e,t)=>e.sectionIds===t.sectionIds||(0,n.default)(e.sectionIds,t.sectionIds))),this._getSearchResultsDataMemoized=(0,v.default)((({searchText:e})=>[{sectionId:h.default.SEARCH_RESULT,emojis:(0,f.default)((0,l.default)(e))}]))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,sectionId:this._lastSectionId,showSearchInput:this.state.showSearchInput})}focusSearchInput(e){if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._refSearchInput.focus(e)}scrollToSection(e){return this._lastSectionId=e,new Promise((e=>{this._fastScroll=!0,this.setState({searchText:"",showSearchInput:!0},e)})).then((()=>{this._scrollFromAnimation=!0;var t=this._refScrollList?this._refScrollList.scrollToSection(e,0-S.TOTAL_SEARCH_HEIGHT):Promise.resolve();return t.finally((()=>{t===this._animationPromise&&(this._scrollFromAnimation=!1,this._checkScrollTop()||this.state.showSearchInput&&this.setState({scrolledToTop:0===this._lastScrollTop}))})),this._animationPromise=t,t}))}_checkScrollTop(){var e=0===this._lastScrollTop;return e&&this.setState({scrolledToTop:e,showSearchInput:!0}),e}_focusSearchAndScrollToTop(){this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200),this.focusSearchInput(),this._refScrollList&&this._refScrollList.scrollToTop()}_stopEvent(e){e.preventDefault(),e.stopPropagation()}render(){return u.default.createElement(p.default,{handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey}},u.default.createElement("div",{className:m.default.bodyContainer},this._renderSearchInput(),this._renderSearchResults(),u.default.createElement("div",{className:(0,d.default)(m.default.list,{[m.default.hidden]:!!this.state.searchText})},u.default.createElement(S.default,{data:this._getSectionListData(),width:this.props.width,onFocusUp:this._handleScrollListFocusUp,initialScrollTop:this.props.displayCache.scrollTop,searchInputVisible:this.state.showSearchInput,focusAbove:this._handleListFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,onScroll:this._handleListScroll,onSection:this._handleListSection,ref:this._setRefScrollList,showTitles:!0}))))}_renderSearchInput(){var e=null;this.state.showSearchInput&&(e=u.default.createElement(E.default,{label:_.default.t(1433),onChange:this._handleSearchChange,onUpKey:this.props.onFocusUp,onDownKey:this._handleSearchDownKey,onEnterKey:this._handleSearchEnterKey,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return u.default.createElement(C.default,{transitionName:t,className:m.default.search},e)}_renderSearchResults(){return this.state.searchText?u.default.createElement("div",{className:m.default.list},u.default.createElement(S.default,{data:this._getSearchResultsData(),width:this.props.width,initialScrollTop:0,searchInputVisible:!0,focusAbove:this._handleSearchResultsFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:this._setRefSearchResults,showTitles:!1})):null}_getSectionListData(){return this._getSectionListDataMemoized({sectionIds:this.props.sectionIds})}_getSearchResultsData(){var e=(this.state.searchText||"").replace(/^\s+/,"");return this._getSearchResultsDataMemoized({searchText:e})}}t.default=y,y.displayName="EmojiPanelContent"},32414:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findEmojiRowAt=b,t.getNumColumns=M,t.default=t.TOTAL_SEARCH_HEIGHT=void 0;var s=i(a(8400)),l=a(9019),n=r(a(67294)),o=i(a(23459)),d=r(a(91109)),u=i(a(36617)),c=i(a(3128)),f=i(a(9444)),h=i(a(59432)),p=i(a(80162)),m=i(a(47826)),_=i(a(80325)),v=i(a(59979)),g=parseInt(_.default["-total-search-height"],10);t.TOTAL_SEARCH_HEIGHT=g;var E,S=parseInt(_.default["-title-height"],10),C={[u.default.SEARCH_RESULT]:()=>{throw new Error("Search results should not be shown with a title.")},[u.default.RECENT]:()=>p.default.t(1317),[o.default.SMILEYS_PEOPLE]:()=>p.default.t(718),[o.default.ANIMALS_NATURE]:()=>p.default.t(714),[o.default.FOOD_DRINK]:()=>p.default.t(716),[o.default.ACTIVITY]:()=>p.default.t(713),[o.default.TRAVEL_PLACES]:()=>p.default.t(720),[o.default.OBJECTS]:()=>p.default.t(717),[o.default.SYMBOLS]:()=>p.default.t(719),[o.default.FLAGS]:()=>p.default.t(715)};E=parseInt(_.default["-scrollbar-width"].replace(/px$/,""),10);class y extends n.PureComponent{constructor(e){super(e),this._rowComponents=new Map,this._flatListController=new h.default,this._renderBlanks=!1,this._getRowsAndSectionDataMemoized=(0,m.default)((e=>{var{numColumns:t,data:a,showTitles:r}=e,i=g,l={},n=[];return a.forEach((({sectionId:e,emojis:o},u)=>{var c=0,f=i;if(0!==o.length){r&&(n.push({kind:"title",itemKey:`section_${e}_title`,index:n.length,title:C[e](),sectionId:e,height:S,offsetTop:i}),c+=S,i+=S);var h=(0,s.default)(o,t),p=u===a.length-1;h.forEach(((t,a)=>{var r=a===h.length-1&&!p?d.EMOJI_HEIGHT+parseInt(_.default["-section-bottom-margin"],10):d.EMOJI_HEIGHT;n.push({kind:"emojis",itemKey:`section_${e}_emoji_${a}`,index:n.length,emojis:t,sectionId:e,height:r,offsetTop:i}),c+=r,i+=r})),l[e]={height:c,offsetTop:f}}})),{rows:n,sectionData:l}})),this._handleEmojiFocus=e=>{var t=this._refScrollContainer;t&&this.props.onEmojiFocus(e,t)},this._handleScroll=()=>{this._animationFrameID||(this._animationFrameID=requestAnimationFrame(this._handleScrollOnAnimationFrame))},this._handleScrollOnAnimationFrame=()=>{if(delete this._animationFrameID,this._refScrollContainer){var e=this._refScrollContainer.scrollTop;this.props.onScroll&&this.props.onScroll(e);var t=this._getSectionIdFromScrollTop(e);t&&this.props.onSection&&this.props.onSection(t)}},this._setRefScrollContainer=e=>{this._refScrollContainer=e},this._renderRow=e=>{switch(e.kind){case"title":return n.default.createElement("div",{className:_.default.title},e.title);case"emojis":return n.default.createElement(d.default,{emojis:e.emojis,focusAbove:t=>{var a,r;1===e.index&&(null===(a=(r=this.props).onFocusUp)||void 0===a||a.call(r)),this._focusEmojiAt(e.index,-1,t)},focusBelow:t=>{this._focusEmojiAt(e.index,1,t)},numColumns:this._getNumColumns(),onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:t=>{t?this._rowComponents.set(e.itemKey,t):this._rowComponents.delete(e.itemKey)},allowVariantPrompt:e.sectionId!==u.default.RECENT});default:throw e.kind,new Error(`Invalid row kind: ${e.kind}`)}},this._getRowsAndSectionData()}componentDidMount(){this._refScrollContainer&&this._refScrollContainer.scrollTop!==this.props.initialScrollTop&&(this._refScrollContainer.scrollTop=this.props.initialScrollTop)}focusFirstVisibleEmoji(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.focusEmojiAt(0)}scrollToSection(e,t){var a=this._refScrollContainer;if(!a)return Promise.resolve();var{sectionData:r}=this._getRowsAndSectionData(),i=r[e];if(!i)return Promise.resolve();var s=i.offsetTop;if(a.scrollTop===s)return Promise.resolve();if(this._activeAnimation){if(this._activeAnimation.sectionId===e)return this._activeAnimation.promise;(0,v.default)(this._activeAnimation.scrollTarget,"stop"),this._activeAnimation&&this._activeAnimation.promise.cancel()}if(a.scrollTop===s)return Promise.resolve();var n=document.createElement("div");n.style.position="absolute",n.style.top=`${s+(t||0)}px`,n.style.left="0px",a.appendChild(n);var o=(0,v.default)(n,"scroll",{container:a,duration:300,easing:[.99,.13,.13,.99]}).then((()=>{})).then((()=>(0,l.delayMs)(100)));return this._activeAnimation={promise:o,sectionId:e,scrollTarget:n},o.finally((()=>{a.removeChild(n),this._activeAnimation&&this._activeAnimation.promise===o&&delete this._activeAnimation})),o}scrollToTop(){this._refScrollContainer&&(this._refScrollContainer.scrollTop=0)}selectFirstVisibleEmoji(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.selectFirstEmoji()}_getCurrentSearchInputHeight(){return this.props.searchInputVisible?g:0}_getNumColumns(){return M(this.props.width)}_getRowsAndSectionData(){return this._getRowsAndSectionDataMemoized({numColumns:this._getNumColumns(),data:this.props.data,showTitles:this.props.showTitles})}_getFirstVisibleEmojiRowComponent(e){if(this._refScrollContainer){var t=this._refScrollContainer.scrollTop+e,a=this._getEmojiRowFromScrollTop(t);if(a)return this._rowComponents.get(a.itemKey)}}_getEmojiRowFromScrollTop(e){var{rows:t}=this._getRowsAndSectionData();return t.map((e=>"emojis"===e.kind?e:null)).filter(Boolean).find((t=>t.offsetTop+t.height>e))}_getSectionIdFromScrollTop(e){var t=this._getEmojiRowFromScrollTop(e+this._getCurrentSearchInputHeight());if(t)return t.sectionId}_focusEmojiAt(e,t,a){var{rows:r}=this._getRowsAndSectionData(),i=b(r,e,t);if(i){var s=this._rowComponents.get(i.itemKey);s&&s.focusEmojiAt(a)}}render(){var e,{rows:t}=this._getRowsAndSectionData(),a=Math.min(t.length,2);return(this.props.onScroll||this.props.onSection)&&(e=this._handleScroll),n.default.createElement(f.default,{onScroll:e,className:_.default.container,onRef:this._setRefScrollContainer,flatListControllers:[this._flatListController]},n.default.createElement(c.default,{data:t,reorderAnimationsEnabled:!1,forceConsistentRenderCount:!1,flatListController:this._flatListController,direction:"vertical",extraItems:a,initialScrollFromStart:this.props.initialScrollTop,renderItem:this._renderRow}))}}function b(e,t,a){for(var r=a<0?-1:1,i=t+a;i>=0&&i<e.length;){var s=e[i];if("emojis"===s.kind)return s;i+=r}}function M(e){var t=e-2*d.SIDE_MARGIN-E;return Math.floor(t/d.EMOJI_WIDTH)}t.default=y,y.displayName="EmojiSectionScrollList"},78210:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement(l.default,{name:n[e.sectionId]})},t.sectionIdToIcon=void 0;var i=r(a(67294)),s=r(a(36617)),l=r(a(32885)),n={[s.default.RECENT]:"panel-recent",[s.default.SMILEYS_PEOPLE]:"panel-emoji-people",[s.default.ANIMALS_NATURE]:"panel-emoji-nature",[s.default.FOOD_DRINK]:"panel-emoji-food",[s.default.ACTIVITY]:"panel-emoji-activity",[s.default.TRAVEL_PLACES]:"panel-emoji-travel",[s.default.OBJECTS]:"panel-emoji-objects",[s.default.SYMBOLS]:"panel-emoji-symbols",[s.default.FLAGS]:"panel-emoji-flags"};t.sectionIdToIcon=n},78636:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={[l.default.RECENT]:n.default.t(1317),[l.default.SMILEYS_PEOPLE]:n.default.t(718),[l.default.ANIMALS_NATURE]:n.default.t(714),[l.default.FOOD_DRINK]:n.default.t(716),[l.default.ACTIVITY]:n.default.t(713),[l.default.TRAVEL_PLACES]:n.default.t(720),[l.default.OBJECTS]:n.default.t(717),[l.default.SYMBOLS]:n.default.t(719),[l.default.FLAGS]:n.default.t(715)},{sectionId:a}=e,r=t[a];return s.default.createElement(d.default,{onClick:e.onClick,sectionId:a,selected:e.selected,showFocusIndicator:e.showFocusIndicator,theme:d.THEMES.MENU,title:r,onRef:e.onRef},s.default.createElement(o.default,{sectionId:a}))};var s=i(a(67294)),l=i(a(36617)),n=i(a(80162)),o=i(a(78210)),d=r(a(99017))},36617:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var i=r(a(81109)),s=r(a(75444)),{EMOJI:{CATEGORIES:l,ORDERED_CATEGORY_IDS:n}}=s.default,o=(0,i.default)((0,i.default)({RECENT:"RECENT"},l),{},{SEARCH_RESULT:"SEARCH_RESULT"}),d=o;t.default=d;var u=[{[o.RECENT]:o.RECENT,[o.SMILEYS_PEOPLE]:o.SMILEYS_PEOPLE,[o.ANIMALS_NATURE]:o.ANIMALS_NATURE,[o.FOOD_DRINK]:o.FOOD_DRINK,[o.ACTIVITY]:o.ACTIVITY,[o.TRAVEL_PLACES]:o.TRAVEL_PLACES,[o.OBJECTS]:o.OBJECTS,[o.SYMBOLS]:o.SYMBOLS,[o.FLAGS]:o.FLAGS}.RECENT,...n];t.ORDERED_TAB_SECTION_IDS=u},15846:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=void 0;var s=i(a(35161)),l=i(a(63337)),n=r(a(67294)),o=i(a(33766)),d=a(44373),u=i(a(5318)),c=i(a(930)),f=i(a(78666)),h=i(a(37491)),p=i(a(83288)),m=i(a(35001)),_=i(a(80896)),v=i(a(94571)),g=i(a(47809)),E=i(a(26144)),S=i(a(30882)),C=parseInt(f.default["-emoji-width"].replace(/px$/,""),10);t.EMOJI_WIDTH=C;class y extends n.Component{constructor(...e){super(...e),this.state={selectedIndex:0,skinTonePicker:null},this.emojiList=null,this._rowLength=0,this._emojiPanelRef=(0,n.createRef)(),this._emojisRef=(0,n.createRef)(),this._windowResized=()=>{var e=this._getEmojiRowLength();if(this._rowLength!==e){this._rowLength=e;var t=this.state.selectedIndex>=e?e-1:this.state.selectedIndex;this.setState({selectedIndex:t})}},this._handleEmojiClick=e=>{if(M(e),e.target instanceof HTMLElement){var t=e.target.dataset.unicode;if(t)if(u.default.getSkinToneBase(t)){var a=this._getEmojiVariant(t);a?this.handleEmoji(a):this.handleContextMenu(e)}else this.handleEmoji(t)}},this._handleEmojiMouseDown=e=>{if(M(e),e.target instanceof HTMLElement){var t=e.target.dataset.unicode;t&&u.default.getSkinToneBase(t)&&this._startPickerTimer(e)}},this.handleEmoji=e=>{this.props.onEmoji(e),this.releaseFocus()},this.releaseFocus=()=>{this.props.onFocusRelease&&this.props.onFocusRelease()},this._getEmojiVariant=e=>u.default.getSkinToneBase(e)?h.default.getVariant(e):null,this._setEmojiVariant=(e,t,a)=>{M(e),this.handleEmoji(a),h.default.setVariant(t,a);var r=this.props.uim;return r&&(r.pop(!1,!1),r.uie.requestDismiss()),!1},this.handleContextMenu=e=>{M(e);var t=e.target;if(t instanceof HTMLElement){var a=t.dataset.unicode;a&&u.default.getSkinToneBase(a)&&this._handleContextMenu(a,t)}},this._handleContextMenu=(e,t,a)=>{this._clearPickerTimer();var r=(0,l.default)(u.default.getSkinToneBase(e),"Emoji.getSkinToneBase(unicode)");this.setState({skinTonePicker:{menu:n.default.createElement(v.default,{base:r,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:d.DirX.RIGHT,dirY:d.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}},(()=>{var{onSkinTonePicker:e}=this.props;e&&e(!0)}))},this._closeSkinTonePicker=()=>{this.setState({skinTonePicker:null},(()=>{var{onSkinTonePicker:e}=this.props;e&&e(!1)}))},this._clearPickerTimer=()=>{null!=this._pickerTimer&&(this.props.clearTimeout(this._pickerTimer),this._pickerTimer=null)},this._startPickerTimer=e=>{M(e),this._clearPickerTimer();var t=e.target;if(t instanceof HTMLElement){var a=t.dataset.unicode;this._pickerTimer=this.props.setTimeout((()=>{this.props.listeners.addOnce(o.default,"window_click",M),this._handleContextMenu(a,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}},this._getEmojiRowLength=()=>{var e=this._emojiPanelRef.current&&this._emojiPanelRef.current.offsetWidth;return null==e?8:Math.floor(e/C)},this.handleEmojiArrowLeft=e=>{this._handleEmojiArrow(e,"left")},this.handleEmojiArrowRight=e=>{this._handleEmojiArrow(e,"right")},this._handleEmojiArrow=(e,t)=>{if(M(e),e.target instanceof HTMLElement){var a=e.target.dataset.emojiIndex;if(a){a=Number(a);var r=this.props.emojiList,i=a;switch(t){case"left":a>0&&(i=a-1);break;case"right":if(a+1>=r.length)return;i=a+1}this.setState({selectedIndex:i})}}},this._renderEmojiList=e=>{var t=e,a=this._getEmojiRowLength();t&&t.length>a&&(t=t.slice(0,a));var r=(0,s.default)(t,((e,t)=>{var a=this._getEmojiVariant(e),r=this.state.selectedIndex===t&&!this.state.skinTonePicker;return n.default.createElement(c.default,{element:"span",emoji:a||e,size:"large",key:e,"data-unicode":e,"data-variant":a,tabIndex:"-1","data-emoji-index":t,selected:r})}));return n.default.createElement(m.default,{onMouseDown:this._handleEmojiMouseDown,onClick:this._handleEmojiClick,onContextMenu:this.handleContextMenu},n.default.createElement("div",{className:f.default.panel,ref:this._emojisRef},r))},this.handleEmojiEnter=e=>{if(M(e),e.target instanceof HTMLElement){var t=e.target.dataset.emojiIndex;if(t&&this.props.emojiList){var a=this.props.emojiList[Number(t)];this._keyboardSelectEmoji(e,a)}}},this._keyboardSelectEmoji=(e,t)=>{if(u.default.getSkinToneBase(t)){var a=this._getEmojiVariant(t);if(a)this.handleEmoji(a);else{if(M(e),!(e.target instanceof HTMLElement))return;this._handleContextMenu(t,e.target,!0)}}else this.handleEmoji(t)}}static getDerivedStateFromProps(e,t){return{selectedIndex:Math.min(t.selectedIndex,e.emojiList.length-1)}}componentDidUpdate(e,t){this.state.skinTonePicker&&this.state.skinTonePicker===t.skinTonePicker&&this._closeSkinTonePicker()}componentDidMount(){this.props.listeners.add(h.default,"add remove change:variant",(()=>this.forceUpdate()));var e=this.props.debounce(this._windowResized,100);this.props.listeners.add(window,"resize",e),this._windowResized()}_getEmojiAtIndex(e){var t;return null!==(t=this.props.emojiList[e])&&void 0!==t?t:null}_getEmojiElement(e){if(!(e<0)&&this._emojisRef.current){var t=this._emojisRef.current.children;if(!(e>=t.length))return t[e]}}render(){var e;return this.state.skinTonePicker&&(e=n.default.createElement(E.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker},n.default.createElement(S.default,{tooltip:this.state.skinTonePicker}))),n.default.createElement("div",{ref:this._emojiPanelRef},this._renderEmojiList(this.props.emojiList),e)}moveSelectionLeft(){this.setState({selectedIndex:Math.max(this.state.selectedIndex-1,0)})}moveSelectionRight(){this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this._getEmojiRowLength()-1,this.props.emojiList.length-1)})}pickSelectedEmoji(){var e=this._getEmojiAtIndex(this.state.selectedIndex);if(e)if(u.default.getSkinToneBase(e)){var t=this._getEmojiVariant(e);if(t)this.handleEmoji(t);else{var a=this._getEmojiElement(this.state.selectedIndex);a&&this._handleContextMenu(e,a,!0)}}else this.handleEmoji(e)}}y.displayName="BaseEmojiSuggestionsPanel";var b=(0,p.default)((0,_.default)((0,g.default)(y)));function M(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=class extends b{moveSelectionLeft(){this.getComponent().moveSelectionLeft()}moveSelectionRight(){this.getComponent().moveSelectionRight()}pickSelectedEmoji(){this.getComponent().pickSelectedEmoji()}}},91704:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var s=i(a(94184)),l=r(a(67294)),n=a(44373),o=i(a(47458)),d=r(a(36617)),u=i(a(51460)),c=i(a(80896)),f=i(a(20708)),h=i(a(64867)),p=i(a(78636)),m={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=m;class _ extends l.PureComponent{constructor(e){var t;super(e),this._refDiv=(0,l.createRef)(),this.getElement=()=>this._refDiv.current,this._sectionIds=0===h.default.length?d.ORDERED_TAB_SECTION_IDS.filter((e=>e!==d.default.RECENT)):d.ORDERED_TAB_SECTION_IDS,this._refMenuTabs=new Map,this._handleEmojiPanelFocusUp=()=>{var e;null===(e=this._refMenuTabs.get(this.state.selectedSectionId))||void 0===e||e.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleEmojiPanelFocusEnter=e=>{null==e||e.preventDefault();var t=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(t)},this._handleEmojiPanelFocusNext=()=>{var e,t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleEmojiPanelFocusPrev=()=>{var e,t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.setState({focusedTabIndex:-1}),this._focusSearchInput()},this._handleMenuTabClick=(e,t)=>{var a,r;this._selectSection(e),null===(a=(r=this.props).onChange)||void 0===a||a.call(r,""),this._focusSearchInput(),null==t||t.preventDefault()},this._handlePanelSection=e=>{this._animationPromise||this.state.selectedSectionId!==e&&this.setState({selectedSectionId:e})},this._onEmoji=e=>{h.default.increment(e),this.props.onEmoji(e)},this._onChange=(e,t)=>{var a,r;null===(a=(r=this.props).onChange)||void 0===a||a.call(r,e,t),this.setState({})},this._setRefContent=e=>{this._refContent=e},this._renderEmojiTab=(e,t)=>l.default.createElement(p.default,{key:e,onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}}),this._scrollSectionIds=this._sectionIds,t=this.props.displayCache?this.props.displayCache:{scrollTop:0,sectionId:this._sectionIds[0],showSearchInput:!0},this._displayCache=t,this.state={selectedSectionId:t.sectionId,focusedTabIndex:-1}}componentDidMount(){this.props.listeners.uiIdle((()=>{this.restoreFocus()}))}restoreFocus(e){this._focusSearchInput(e)}_focusSearchInput(e){this._refContent&&this._refContent.focusSearchInput(e)}_selectSection(e){this.state.selectedSectionId!==e&&(this.setState({selectedSectionId:e}),this._scrollToSection(e))}_scrollToSection(e){if(this._refContent){var t=this._refContent.scrollToSection(e);this._animationPromise=t,t.finally((()=>{t===this._animationPromise&&delete this._animationPromise}))}}render(){var e,t=(0,s.default)(u.default.emojiPanel,{[u.default.panelDropdown]:this.props.displayLocation===m.DROPDOWN}),{width:a=n.EMOJI_PICKER_WIDTH}=this.props;return l.default.createElement("div",{className:t,ref:this._refDiv},l.default.createElement(f.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderEmojiTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext,onFocusLeave:this._handleFocusLeave,onEnter:this._handleEmojiPanelFocusEnter}),l.default.createElement(o.default,{displayCache:this._displayCache,width:a,onDisplayCache:this.props.onDisplayCache,onFocusUp:this._handleEmojiPanelFocusUp,onFocusPrev:this.props.onFocusPrev,onFocusNext:this.props.onFocusNext,onEmoji:this._onEmoji,onSection:this._handlePanelSection,ref:this._setRefContent,sectionIds:this._scrollSectionIds,onChange:this._onChange,defaultSearchText:this.props.defaultSearchText}))}}_.defaultProps={displayLocation:m.DROPDOWN},_.displayName="EmojiPanel";var v=(0,c.default)(_);t.default=class extends v{restoreFocus(e){this.getComponent().restoreFocus(e)}}},41735:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SKIN_TONE_VARIATIONS=void 0;var i=r(a(5318)),s=[""].concat(i.default.skinToneVariations);t.SKIN_TONE_VARIATIONS=s},30517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={TRENDING:"TRENDING",HAHA:"HAHA",SAD:"SAD",LOVE:"LOVE",REACTIONS:"REACTIONS",SPORTS:"SPORTS",TV:"TV"};t.default=a},39518:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.gifProvider=function(){switch(i.default.gifSearch){case"giphy":return s;case"tenor":default:return l}},t.GIPHY_LOCALES=t.BRAND_NAMES=t.GifInfo=t.TENOR=t.GIPHY=t.GAP_SIZE=t.TARGET_GIF_HEIGHT=void 0;var i=r(a(43232));t.TARGET_GIF_HEIGHT=130;t.GAP_SIZE=6;var s="giphy";t.GIPHY=s;var l="tenor";t.TENOR=l;var n=0;t.GifInfo=class{constructor(e,t,a,r,i,s,l,o){this.rank=e,this.gifId=++n,this.url=t,this.size=a,this.previewUrl=r||t,this.nonVideoUrl=i,this.width=s,this.widthStr=`${s}px`,this.ratioStr=`${Math.ceil(13e3/s)}%`,this.attribution=l,this.trending=o}};t.BRAND_NAMES={giphy:"GIPHY",tenor:"Tenor"};t.GIPHY_LOCALES=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"]},22370:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.sectionId&&e.sectionId===s.default.FAVORITES)return i.default.createElement(n.default,{name:"panel-starred"});return i.default.createElement("span",{className:l.default.text},e.sectionTitle)};var i=r(a(67294)),s=r(a(35024)),l=r(a(45243)),n=r(a(32885))},27842:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={[l.default.FAVORITES]:n.default.t(838),[l.default.TRENDING]:n.default.t(844),[l.default.HAHA]:n.default.t(839),[l.default.SAD]:n.default.t(842),[l.default.LOVE]:n.default.t(840),[l.default.REACTIONS]:n.default.t(841),[l.default.SPORTS]:n.default.t(843),[l.default.TV]:n.default.t(845)},{sectionId:a}=e,r=t[a];return s.default.createElement(d.default,{onClick:e.onClick,sectionId:a,selected:e.selected,showFocusIndicator:e.showFocusIndicator,title:r,theme:d.THEMES.MENU,onRef:e.onRef},s.default.createElement(o.default,{sectionId:a,sectionTitle:r}))};var s=i(a(67294)),l=i(a(35024)),n=i(a(80162)),o=i(a(22370)),d=r(a(99017))},410:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(83037)),n=r(a(32885)),o=r(a(89848));class d extends s.Component{get messagePreviewRef(){return this._messagePreviewRef}constructor(e){super(e),this.setRefVideo=e=>{this._videoRef=e,this._synchronizeVideo()},this._synchronizeVideo=()=>{var e=this._videoRef;e&&(this.state.animate?e.paused&&e.play():e.paused||(e.pause(),e.currentTime=0))},this.setShouldAnimate=e=>{this.state.animate===e&&this.state.show||this.setState({animate:e,show:!0},this._synchronizeVideo)},this.handleClick=()=>{this.props.onSend(this.props.gif)},this.setRefHotKeys=e=>{this._messagePreviewRef=e},this.handleFocus=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!0})},this.handleBlur=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!1})},this._videoRef=null,this.state={animate:!1,show:!1,focused:!1}}render(){var e,t=this.props.gif,a=null;return this.state.show&&(a=o.default.troublesWithLotsOfVideos&&t.nonVideoUrl?s.default.createElement("img",{className:l.default.body,onClick:this.handleClick,src:t.nonVideoUrl}):s.default.createElement("video",{className:l.default.body,onClick:this.handleClick,controls:!1,autoPlay:this.state.animate,loop:!0,muted:!0,ref:this.setRefVideo,src:t.previewUrl})),this.props.isStarred&&this.props.onUnstarMsg&&(e=s.default.createElement("button",{className:l.default.icon,onClick:this.props.onUnstarMsg},s.default.createElement(n.default,{name:"star"}))),s.default.createElement("div",{ref:this.setRefHotKeys,className:l.default.preview,tabIndex:"-1",onFocus:this.handleFocus,onBlur:this.handleBlur,style:{flexBasis:t.widthStr}},this.state.focused&&s.default.createElement("div",{style:{flexBasis:t.widthStr},className:l.default.focusBorder}),s.default.createElement("div",{style:{width:t.widthStr},className:l.default.wrapper},s.default.createElement("div",{style:{paddingBottom:t.ratioStr},className:l.default.container},a)),e)}}d.displayName="GifPreview";var u=d;t.default=u},50239:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getGifDimensions=U,t.giphyResultsToGifs=j,t.default=void 0;var s=i(a(48926)),l=a(24788),n=a(40515),o=a(78840),d=r(a(67294)),u=a(91591),c=a(92997),f=r(a(12536)),h=i(a(86324)),p=i(a(62886)),m=a(39518),_=i(a(410)),v=i(a(1659)),g=i(a(35024)),E=i(a(35001)),S=i(a(80162)),C=i(a(72462)),y=i(a(27418)),b=i(a(85726)),M=i(a(40845)),T=i(a(86231)),I=i(a(73070)),P=i(a(97439)),A=i(a(89586)),N="3o85xmWDYKgihhIKSA",O="DLAQBEYLJJIM",D={giphy:C.default.GIF_SEARCH_PROVIDER.GIPHY,tenor:C.default.GIF_SEARCH_PROVIDER.TENOR},w={giphy:u.VideoMessageAttribution.GIPHY,tenor:u.VideoMessageAttribution.TENOR},R=new M.default((function(e){switch((0,m.gifProvider)()){case"giphy":return function(){return G.apply(this,arguments)}(e);case"tenor":return function(){return V.apply(this,arguments)}(e);default:throw new Error(`Unrecognized provider ${(0,m.gifProvider)()}`)}}),{maxCached:6,maxAge:36e4,shouldCache:e=>!(!e||!e.length)}),k="UP",L="DOWN",x="LEFT",F="RIGHT";class B extends d.Component{constructor(e){super(e),this._scrollTop=0,this._didSendGif=!1,this._onlineRestarter=null,this._pendingQuery=null,this._refGifs={},this._refGifsBySectionId={},this.setRefGif=(e,t)=>{var[a,r]=e;t?(this._refGifs[a]=t,this._refGifsBySectionId[r]=t):(delete this._refGifs[a],delete this._refGifsBySectionId[r])},this._setRefGifCache=new T.default(this.setRefGif),this.handleSend=e=>{var t=D[e.attribution];new C.default.GifFromProviderSent({gifSearchProvider:t}).commit(),e.trending||"number"!=typeof e.rank||new C.default.GifSearchResultTapped({gifSearchProvider:t,rank:e.rank}).commit(),this._didSendGif=!0,this.props.onGif(e.url,w[e.attribution])},this.animateGif=()=>{var e=this._animatingRow,t=this._scrollTop+m.GAP_SIZE;this._starredGifs&&(t-=this._starredGifs.getClientHeight()||0);var a=Math.round(t/(m.TARGET_GIF_HEIGHT+m.GAP_SIZE)),r=this.state.gifRows[a];if(r&&r.gifs.length&&r!==e){if(this._animatingRow=r,e)for(var i=0;i<e.gifs.length;i++)this._setGifAnimating(e.gifs[i].gifId,!1);for(var s=0;s<r.gifs.length;s++)this._setGifAnimating(r.gifs[s].gifId,!0)}[a+1,a-1].forEach((e=>{if(this.state.gifRows[e])for(var t=this.state.gifRows[e].gifs,a=0;a<t.length;a++)this._setGifAnimating(t[a].gifId,!1)}))},this._searchForAndSetGifs=()=>{var e=D[(0,m.gifProvider)()],t=this.props.searchText||this.props.selectedSectionId||g.default.TRENDING,a=R.getOrRun(t);a=a.then(),this._pendingQuery=a,this.props.setIsFetching(!0),a.checkpoint(this.props.rejectOnUnmount()).then((t=>{if(t&&0===t.length&&new C.default.GifSearchNoResults({gifSearchProvider:e}).commit(),a===this._pendingQuery&&(this._pendingQuery=null,this.props.setIsFetching(!1),t)){var r=this._containerDom&&this._containerDom.clientWidth||0;r-=2*m.GAP_SIZE,this._resetScroll=!0,this._animateTimer.debounce(0),this.setState({gifRows:W(t,r),width:r})}})).catch((0,l.filteredCatch)([f.Unmount,Promise.CancellationError],(()=>{})))},this._handleStarredGifsMount=e=>{this._starredGifs=e},this._handleContainerMount=e=>{this._containerDom=e,null!=e&&e&&this._resetScroll&&(e.scrollTop=0)},this.initSelection=(e=!1)=>{var t,a;(null===(t=this._starredGifs)||void 0===t?void 0:t.hasGifs())&&!e?null===(a=this._starredGifs)||void 0===a||a.initSelection():(this.selection=[0,0],this._focusGif())},this._getNewColPostion=e=>{var{gifRows:t}=this.state,[a,r,i,s,l]=[this.selection[0],this.selection[1],t[Math.min(this.selection[0],t.length-1)].gifs.length-1,t[Math.min(this.selection[0]+1,t.length-1)].gifs.length-1,t[Math.max(this.selection[0]-1,0)].gifs.length-1],n=r/i;switch(e){case k:var o=Math.floor(l*n);return[Math.max(a-1,0),o];case L:return[a+1,Math.floor(s*n)]}return[0,0]},this.contains=e=>!!this._containerDom&&this._containerDom.contains(e),this.getStarredGifsRef=()=>this._starredGifs,this._handleArrowKeys=(e,t)=>{var{gifRows:a}=this.state,[r,i]=[this.selection[0],this.selection[1]];switch(t){case k:if(0===r)return;this.selection=this._getNewColPostion(k);break;case L:if(r===a.length-1)return;this.selection=this._getNewColPostion(L);break;case x:if(0===i&&0===r)return;this.selection=0===i?this._getNewSelection(r-1,a[r-1].gifs.length-1):this._getNewSelection(r,i-1);break;case F:a[r]?a[r].gifs.length===i+1?this.selection=this._getNewSelection(r+1,0):this.selection=this._getNewSelection(r,i+1):this.selection=[0,0]}this.stopEvent(e),this._focusGif()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.restoreFocus=()=>{},this._focusGif=()=>{var e=this.selection.join("_"),t=this._refGifsBySectionId[e];if(t){var a=t.messagePreviewRef;a&&(p.default.focus(a),this.props.scrollGifIntoViewIfNeeded(a))}},this._handleUpArrow=e=>{this._handleArrowKeys(e,k)},this.handleDownArrow=e=>{this._handleArrowKeys(e,L)},this.handleLeftArrow=e=>{this._handleArrowKeys(e,x)},this.handleRightArrow=e=>{this._handleArrowKeys(e,F)},this.handleEnter=e=>{this.stopEvent(e);var{gifRows:t}=this.state,[a,r]=[this.selection[0],this.selection[1],this.selection[2]];this.handleSend(t[a].gifs[r])},this._scrollTop=0,this._animatingRow=null,this._containerDom=null,this._didSendGif=!1,this.state={gifRows:[],width:0}}componentDidUpdate(e){e.searchText!==this.props.searchText&&this._scheduleQuery()}shouldComponentUpdate(e,t){return e.onGif!==this.props.onGif||t.gifRows!==this.state.gifRows||e.selectedSectionId!==this.props.selectedSectionId||e.searchText!==this.props.searchText}componentDidMount(){this._searchTimer=new o.ShiftTimer(this._searchForAndSetGifs),this._animateTimer=new o.ShiftTimer(this.animateGif),this._onlineRestarter=(0,n.promiseLoop)((()=>(0,A.default)(y.default,"change:online",(()=>y.default.online)).then((()=>this._scheduleQuery())))).cancellable(),this._onlineRestarter.catch((0,l.filteredCatch)(Promise.CancellationError,(()=>{}))),this._searchForAndSetGifs(),new C.default.GifSearchSessionStarted({gifSearchProvider:D[(0,m.gifProvider)()]}).commit()}componentWillUnmount(){this._animateTimer.cancel(),this._searchTimer.cancel(),this._onlineRestarter&&this._onlineRestarter.cancel(),this._didSendGif||new C.default.GifSearchCancelled({gifSearchProvider:D[(0,m.gifProvider)()]}).commit()}_scheduleQuery(){this._searchTimer.debounceAndCap(200,2e3)}animateOnScroll(e){this._scrollTop=e.scrollTop,this._animateTimer.debounce(200)}_setGifAnimating(e,t=!1){var a=this._refGifs[String(e)];a&&a.setShouldAnimate(t)}_getNewSelection(e,t){return[Math.max(0,e),Math.max(0,t)]}render(){var{gifRows:e}=this.state,t={up:this._handleUpArrow,down:this.handleDownArrow,left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},a=e.map(((e,t)=>{var a=e.gifs.map(((e,a)=>d.default.createElement(_.default,{key:e.gifId,ref:this._setRefGifCache.getRefSetter([`${e.gifId}`,`${t}_${a}`]),gif:e,onSend:this.handleSend}))),r=null;return e.blankStr&&(r=d.default.createElement("div",{className:v.default.blank,style:{flexBasis:e.blankStr}})),d.default.createElement("div",{key:t,className:v.default.row},a,r)})),r=this.props.selectedSectionId!==g.default.FAVORITES&&(0===a.length?d.default.createElement("div",{className:v.default.noResults},this.props.searchText?d.default.createElement(c.SearchWithoutKeyword,null):d.default.createElement(c.Loading,null)):d.default.createElement(E.default,{className:v.default.section,handlers:t},a)),i=!this.props.searchText&&this.props.selectedSectionId===g.default.FAVORITES&&d.default.createElement(I.default,{onSend:this.handleSend,ref:this._handleStarredGifsMount});return d.default.createElement("div",{className:v.default.searchContainer,ref:this._handleContainerMount},r,i)}}function G(){return(G=(0,s.default)((function*(e){var t,a=e===g.default.TRENDING;if(a)t=P.default.build("https://api.giphy.com/v1/gifs/trending",{api_key:N,limit:100,rating:"pg-13"});else{var r=S.default.getLocale(),i=r;switch(r){case"zh-HK":i="zh-TW";break;case"pt-BR":i="pt"}var s="";m.GIPHY_LOCALES.includes(i)&&(s=i),t=P.default.build("https://api.giphy.com/v1/gifs/search",{q:e,api_key:N,limit:100,rating:"pg-13",lang:s})}try{var l=yield(0,h.default)(t);if(!l.ok)throw new Error(l.statusText);return j(yield l.json(),a)}catch(e){return __LOG__(4,void 0,new Error)`gif_search:searchGiphy fetch failed with an error : ${e}`,null}}))).apply(this,arguments)}function U(e,t){if(e){var a=parseInt(e.width,10),r=parseInt(e.height,10);if(a&&r)return{width:a,height:r};__LOG__(4,void 0,new Error,!0)`gif_search:getGifDimensions fullContent does not have valid dimensions'`,SEND_LOGS("gif_search:getGifDimensions fullContent does not have valid dimensions")}if(t){var i=parseInt(t.width,10),s=parseInt(t.height,10);if(i&&s)return{width:m.TARGET_GIF_HEIGHT*i/s,height:m.TARGET_GIF_HEIGHT};__LOG__(4,void 0,new Error,!0)`gif_search:getGifDimensions original does not have valid dimensions`,SEND_LOGS("gif_search:getGifDimensions original does not have valid dimensions")}return{width:m.TARGET_GIF_HEIGHT,height:m.TARGET_GIF_HEIGHT}}function j(e,t){if(!e||!Array.isArray(e.data))return[];if(!e.data.length&&t)return[];for(var a=e.data,r=[],i=0;i<a.length;i++){var s=a[i],l=s&&s.images;if(l){var{original:n,preview:o,downsized_small:d,preview_webp:u,preview_gif:c}=l;if(d){var f=d.mp4;if(f){var{width:h,height:p}=U(d,n);r.push(new m.GifInfo(r.length,f,parseInt(d.mp4_size,10),o&&o.mp4||void 0,u&&u.url||c&&c.url||void 0,Math.round(h*m.TARGET_GIF_HEIGHT/p),m.GIPHY,t))}}}}return 0===r.length&&a.length>0&&(__LOG__(4,void 0,new Error,!0)`gif_search: All the gifs were skipped, check if there is a change in giphys response`,SEND_LOGS("gif_search: All the gifs were skipped, check if there is a change in giphys response")),r}function V(){return(V=(0,s.default)((function*(e){var t,a=e===g.default.TRENDING,r=S.default.getLocale().replace("-","_");t=a?P.default.build("https://wa.tenor.co/v1/trending",{key:O,limit:50,contentfilter:"high",locale:r}):P.default.build("https://wa.tenor.co/v1/search",{q:e,key:O,limit:50,contentfilter:"high",locale:r});try{var i=yield(0,h.default)(t);if(!i.ok)throw new Error(i.statusText);return H(yield i.json())}catch(e){return __LOG__(4,void 0,new Error)`gif_search:searchTenor fetch failed with an error : ${e}`,null}}))).apply(this,arguments)}function H(e,t=!1){if(!e||!Array.isArray(e.results))return[];for(var a=e.results,r=[],i=0;i<a.length;i++){var s=a[i];if(s&&s.media&&s.media[0]){var{tinymp4:l,previewmp4:n,previewgif:o}=s.media[0];if(l){var[d,u]=l.dims;r.push(new m.GifInfo(r.length,l.url,l.size,n&&n.url||void 0,o&&o.url||void 0,Math.round(d*m.TARGET_GIF_HEIGHT/u),m.TENOR,t))}}}return r}function W(e,t){for(var a=[],r=.9*t,i=e,s=null,l=.05;l<1&&i.length;l+=.05){i.sort(((e,t)=>{var a=e.rank-t.rank;return Math.abs(a)>8?a:t.width-e.width}));for(var n=(1+l)*t,o=[],d=[],u=0;u<i.length;u++){for(var c=i[u],f=!1,h=Math.min(n-c.width,r),p=0;!f&&p<o.length;p++)o[p]<h&&(o[p]+=c.width+m.GAP_SIZE,d[p].push(c),f=!0);f||(o.push(c.width),d.push([c]))}if(1===d.length){i=[];var _=t-o[0]-m.GAP_SIZE;s={gifs:d[0],blankStr:_>0?`${_}px`:void 0}}else{i=[];for(var v=0;v<d.length;v++)o[v]>r?a.push(d[v]):i.push.apply(i,d[v])}}a.forEach((e=>e.sort(((e,t)=>e.rank-t.rank)))),a.sort(((e,t)=>e[0].rank-t[0].rank));var g=a.map((e=>({gifs:e,blankStr:void 0})));return s&&g.push(s),g}B.displayName="GifSearch";var Y=(0,b.default)(B);t.default=class extends Y{constructor(...e){super(...e),this.initSelection=e=>{this.getComponent().initSelection(e)},this.animateOnScroll=e=>{this.getComponent().animateOnScroll(e)},this.getStarredGifsRef=()=>this.getComponent().getStarredGifsRef()}contains(e){return this.getComponent().contains(e)}}},35024:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var i=r(a(30517)),s={FAVORITES:"FAVORITES",[i.default.TRENDING]:i.default.TRENDING,[i.default.HAHA]:i.default.HAHA,[i.default.SAD]:i.default.SAD,[i.default.LOVE]:i.default.LOVE,[i.default.REACTIONS]:i.default.REACTIONS,[i.default.SPORTS]:i.default.SPORTS,[i.default.TV]:i.default.TV},l=s;t.default=l;var n={[s.FAVORITES]:s.FAVORITES,[s.TRENDING]:s.TRENDING,[s.HAHA]:s.HAHA,[s.SAD]:s.SAD,[s.LOVE]:s.LOVE,[s.REACTIONS]:s.REACTIONS,[s.SPORTS]:s.SPORTS,[s.TV]:s.TV},o=[n.FAVORITES,n.TRENDING,n.HAHA,n.SAD,n.LOVE,n.REACTIONS,n.SPORTS,n.TV];t.ORDERED_TAB_SECTION_IDS=o},20427:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GifPanel=void 0;var s=i(a(41609)),l=i(a(23493)),n=i(a(91747)),o=i(a(63337)),d=r(a(67294)),u=a(17657),c=r(a(89852)),f=a(39518),h=i(a(50239)),p=r(a(35024)),m=i(a(77188)),_=i(a(35001)),v=i(a(20708)),g=i(a(91258)),E=i(a(80162)),S=i(a(80896)),C=i(a(86113)),y=i(a(72462)),b=i(a(13503)),M=i(a(27842)),T=i(a(4328));class I extends d.PureComponent{constructor(e){super(e),this._refMenuTabs=new Map,this.getElement=()=>this._refContainer,this._setRefContainer=e=>{this._refContainer=e},this._lastScrollTop=0,this._fastScroll=!1,this._lastFetchStart=0,this._lastClickTime=0,this._setGifPanelRef=e=>{this._gifPanelRef=e},this._refScrollContainer=(0,d.createRef)(),this._sectionIds=p.ORDERED_TAB_SECTION_IDS,this.handleScroll=(0,l.default)((()=>{var e=this._refScrollContainer.current;if(null==this.state.selectedSectionId&&this.state.searchText&&e&&this._gifPanelRef)this._gifPanelRef.animateOnScroll(e);else if(!(Date.now()-this._lastClickTime<u.SCROLL_CLICK_TIME_GAP)){var t={};if(this.state.isPreview&&(t.isPreview=!1),e){var a=e.scrollTop,r=a<=0;r!==this.state.scrolledToTop&&(t.scrolledToTop=r);var i=this._lastScrollTop-a,l=Math.abs(i)>u.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(i)>u.INPUT_BAR_SCROLL_FAST,i<0?this.state.showSearchInput&&(a>u.INPUT_HIDE_POINT&&l||this._lastScrollTop<u.INPUT_HIDE_POINT&&a>=u.INPUT_HIDE_POINT)&&(t.showSearchInput=!1):this.state.showSearchInput||(l||a<u.INPUT_SHOW_POINT)&&(t.showSearchInput=!0),this._gifPanelRef&&this._gifPanelRef.animateOnScroll(e),this._lastScrollTop=a,(0,s.default)(t)||this.setState(t)}}}),u.SCROLL_THROTTLE_TIME),this._setRefSearchInput=e=>{this._searchInput=e},this.restoreFocus=e=>{this.focusSearchInput(e)},this.onRotateFocus=e=>{this.stopEvent(e),this._searchInputHasFocus()?this.props.onFocusRelease&&this.props.onFocusRelease():this.focusSearchInput()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.scrollGifIntoViewIfNeeded=e=>{var t=this._refScrollContainer.current;t&&e.offsetTop-t.scrollTop<u.INPUT_BAR_TOTAL_HEIGHT&&c.scrollIntoView(e,!0,t)},this._searchInputHasFocus=()=>!!this._searchInput&&this._searchInput.hasFocus(),this.focusSearchInput=e=>{if(!this._searchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._searchInput.focus(e)},this._onGifSearchDown=e=>{this.stopEvent(e),this._gifPanelRef&&this._gifPanelRef.initSelection()},this._getSearchBox=()=>{var e=null;this.state.showSearchInput&&(e=d.default.createElement(b.default,{label:E.default.t(1434,{service:f.BRAND_NAMES[(0,f.gifProvider)()]}),onChange:this.onSearch,onUpKey:this._handleFocusUp,onDownKey:this._onGifSearchDown,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,tabFocused:this.state.tabFocused,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return d.default.createElement(T.default,{transitionName:t},e)},this.onSearch=(e,t)=>{var a;(this.stopEvent(t),null==this.state.searchText)&&(this._scrollTopBeforeSearch=null===(a=this._refScrollContainer.current)||void 0===a?void 0:a.scrollTop);this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e,tabFocused:!1})},this.preventBlur=e=>{this.stopEvent(e),this.restoreFocus()},this._handleIsFetching=()=>{if(this.state.isFetching){var e=Date.now()-this._lastFetchStart;e<u.MINIMUM_LOADING_TIME?window.setTimeout((()=>this.setState({isFetching:!1})),u.MINIMUM_LOADING_TIME-e):this.setState({isFetching:!1})}else this.setState({isFetching:!0}),this._lastFetchStart=Date.now()},this._handleParentContainerUp=e=>{var t,a=e&&e.nativeEvent.target,r=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef(),i=a instanceof HTMLElement&&(null==r?void 0:r.isStarredGif(a)),s=a instanceof HTMLElement&&!!this._gifPanelRef&&this._gifPanelRef.contains(a);i?(this.focusSearchInput(),this.stopEvent(e)):s&&(null==r?void 0:r.hasGifs())?(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e)):s&&(this.focusSearchInput(),this.stopEvent(e))},this.handleDownArrow=e=>{var t,a=e&&e.nativeEvent.target,r=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef();a instanceof HTMLElement&&(null==r?void 0:r.isStarredGif(a))?(this._gifPanelRef&&this._gifPanelRef.initSelection(!0),this.stopEvent(e)):a instanceof Node&&this._gifPanelRef&&this._gifPanelRef.contains(a)&&(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e))},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusNext&&this.props.onFocusNext()):this.focusSearchInput()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusPrev&&this.props.onFocusPrev()):this.focusSearchInput()},this._handleFocusUp=()=>{var e,t,a=null!==(e=this.state.selectedSectionId)&&void 0!==e?e:this._sectionIds[0];null===(t=this._refMenuTabs.get(a))||void 0===t||t.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleFocusEnter=()=>{var e=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(e)},this._handleMenuFocusNext=()=>{var e,t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleMenuFocusPrev=()=>{var e,t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleMenuTabClick=e=>{var t,a,r;e===p.default.FAVORITES?this.setState({showSearchInput:!0,selectedSectionId:e,searchText:null,tabFocused:!0}):this.setState({showSearchInput:!0,selectedSectionId:e,searchText:e,tabFocused:!0}),null===(t=(a=this.props).onChange)||void 0===t||t.call(a,""),null===(r=this._searchInput)||void 0===r||r.focus(!1)},this._renderGifTab=(e,t)=>d.default.createElement(M.default,{key:e,onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}});var t=(0,n.default)(this.props.displayCache||{},{scrollTop:0,showSearchInput:!0});m.default.supportsFeature(m.default.F.STARRED_GIFS)||(this._sectionIds=this._sectionIds.filter((e=>e!==p.default.FAVORITES))),this.state={isPreview:!t.scrollTop,scrolledToTop:0===t.scrollTop,searchText:this.props.defaultSearchText||null,searchResults:null,showSearchInput:t.showSearchInput,selectedSectionId:t.selectedSectionId||p.default.TRENDING,tabFocused:!1,focusedTabIndex:-1,isFetching:!1}}componentDidMount(){this._lastClickTime=Date.now();var e=this.props.displayCache&&this.props.displayCache.scrollTop,t=this._refScrollContainer.current;t&&null!=e&&0!==e&&(t.scrollTop=e),this.props.listeners.uiIdle((()=>{this.restoreFocus(),new y.default.WebcEmojiOpen({webcEmojiOpenTab:"GIF"}).commit(),this.setState({isPreview:!1})}))}componentWillUnmount(){var e,t=this._refScrollContainer.current;this.props.onDisplayCache({scrollTop:null!==(e=null==t?void 0:t.scrollTop)&&void 0!==e?e:0,showSearchInput:this.state.showSearchInput,selectedSectionId:this.state.selectedSectionId}),this.handleScroll.cancel()}componentDidUpdate(e,t){var a=this._refScrollContainer.current;if(t.searchText!==this.state.searchText){if(!a)return;this.state.searchText?a.scrollTop=0:null!=this._scrollTopBeforeSearch&&0!==this._scrollTopBeforeSearch&&(a.scrollTop=this._scrollTopBeforeSearch)}}render(){var e,t=this._getSearchBox(),a=(this.state.searchText||"").replace(/^\s+/,"");return d.default.createElement(_.default,{onRef:this._setRefContainer,handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey,up:this._handleParentContainerUp,down:this.handleDownArrow}},d.default.createElement(v.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderGifTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),d.default.createElement("div",{className:g.default.gifPanel},d.default.createElement(C.default,{loading:this.state.isFetching}),d.default.createElement("div",{className:g.default.bodyContainer,onMouseDown:this.preventBlur},t,d.default.createElement("div",{className:g.default.panelBody,onScroll:this.handleScroll,ref:this._refScrollContainer},d.default.createElement(h.default,{ref:this._setGifPanelRef,onGif:(0,o.default)(this.props.onGif,"this.props.onGif"),searchText:a,scrollGifIntoViewIfNeeded:this.scrollGifIntoViewIfNeeded,selectedSectionId:this.state.selectedSectionId,setIsFetching:this._handleIsFetching})))))}}t.GifPanel=I,I.displayName="GifPanel";var P=(0,S.default)(I);t.default=class extends P{focusSearchInput(e){this.getComponent().focusSearchInput(e)}restoreFocus(e){this.getComponent().restoreFocus(e)}}},55621:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(51115)),d=a(91591),u=a(39518),c=i(a(410)),f=i(a(80162)),h=i(a(80896)),p=r(a(73616)),m=a(85063),_=i(a(72462)),v=i(a(30099)),g=i(a(26276)),E=i(a(32885));class S extends l.Component{constructor(...e){super(...e),this.setRefGif=e=>{this._gifRef=e},this._getGifProvider=()=>{switch(this.props.msg.gifAttribution){case d.VideoMessageAttribution.GIPHY:return u.GIPHY;case d.VideoMessageAttribution.TENOR:return u.TENOR;default:return""}},this.handleClick=e=>{switch(e.stopPropagation(),this.props.msg.mediaData.mediaStage){case m.MEDIA_DATA_STAGE.NEED_POKE:this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0});break;case m.MEDIA_DATA_STAGE.FETCHING:this.props.msg.cancelDownload();break;case m.MEDIA_DATA_STAGE.UPLOADING:this.props.msg.cancelUpload();break;case m.MEDIA_DATA_STAGE.ERROR_MISSING:n.default.openModal(l.default.createElement(o.default,{title:f.default.t(1157),onOK:()=>n.default.closeModal(),okText:f.default.t(1941)},f.default.t(1156)))}},this.handleUnstarMsg=()=>{var{msg:e}=this.props;v.default.remove(e)}}getGifRef(){return this._gifRef}animateGif(){this.props.listeners.uiIdle((()=>{this._gifRef&&this._gifRef.setShouldAnimate(!0)}))}componentDidMount(){var e=this.props.msg;this.props.listeners.add(e,"change:mediaData.mediaStage",(()=>{this.forceUpdate()})),this.props.listeners.uiIdle((()=>{e.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})})),this.animateGif()}componentDidUpdate(){this.animateGif()}render(){var e=this.props.msg,t=e.mediaData,a=new u.GifInfo(void 0,t.renderableUrl,void 0,void 0,void 0,Math.round(t.aspectRatio*u.TARGET_GIF_HEIGHT),this._getGifProvider(),!1);if(t.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED)return l.default.createElement(c.default,{key:e.filehash,ref:this.setRefGif,gif:a,onSend:this.props.onSend,isStarred:!0,onUnstarMsg:this.handleUnstarMsg});if(t.preview){var r,i=t.preview.url();switch(t.mediaStage){case m.MEDIA_DATA_STAGE.ERROR_MISSING:break;case m.MEDIA_DATA_STAGE.NEED_POKE:r=l.default.createElement(p.Download,null);break;case m.MEDIA_DATA_STAGE.FETCHING:case m.MEDIA_DATA_STAGE.UPLOADING:r=l.default.createElement(p.Pending,{cancelable:!0});break;default:r=l.default.createElement(p.Pending,null)}var n=(0,s.default)(g.default.thumb,{[g.default.blur]:t.mediaStage===m.MEDIA_DATA_STAGE.ERROR_MISSING}),o=l.default.createElement("div",{className:n,style:{backgroundImage:`url(${i})`,height:`${u.TARGET_GIF_HEIGHT}px`}});return l.default.createElement("div",{className:g.default.container,style:{flexBasis:a.widthStr},key:e.filehash},l.default.createElement("div",{className:g.default.wrapper,style:{width:a.widthStr},onClick:this.handleClick},l.default.createElement("div",{className:g.default.innerWrapper,style:{paddingBottom:a.ratioStr}},r,o)),l.default.createElement("button",{className:g.default.starIcon,onClick:this.handleUnstarMsg},l.default.createElement(E.default,{name:"star"})))}return null}}S.displayName="StarredGifPreview";var C=(0,h.default)(S);t.default=class extends C{getGifRef(){return this.getComponent().getGifRef()}}},73070:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(45578)),l=i(a(94184)),n=r(a(67294)),o=i(a(62886)),d=a(39518),u=i(a(35001)),c=i(a(80896)),f=i(a(30099)),h=i(a(55621)),p=i(a(59110)),m=i(a(32885)),_="RIGHT",v="LEFT";class g extends n.Component{constructor(...e){super(...e),this.state={curIndex:0,direction:_},this._msgLength=0,this._refStarredPreview={},this._selectionIndex=0,this._handleSlideLeft=()=>this._hasLeft()?new Promise((e=>{this.setState({curIndex:this.state.curIndex-1,direction:v},(()=>{e(!0)}))})):Promise.resolve(!1),this._handleSlideRight=()=>this._hasRight()?new Promise((e=>{this.setState({curIndex:this.state.curIndex+1,direction:_},(()=>{e(!0)}))})):Promise.resolve(!1),this.setRef=e=>{this._ref=e},this._hasRight=()=>this.state.curIndex+4<this._msgLength,this._hasLeft=()=>this.state.curIndex>0,this.handleLeftArrow=e=>{this._handleSlideLeft().then((t=>{this._selectionIndex=t?this._selectionIndex:this._selectionIndex-1,this._selectionIndex<0?this.stopEvent(e):(this.stopEvent(e),this._focusStarredGif())}))},this.handleRightArrow=e=>{this._handleSlideRight().then((t=>{this._selectionIndex=t?this._selectionIndex-1:this._selectionIndex;var a=Object.keys(this._refStarredPreview).length;if(this._selectionIndex<3&&this._selectionIndex<a-1)this._selectionIndex=this._selectionIndex+1;else{if(!this._hasRight())return void this.stopEvent(e);this._selectionIndex=3}this.stopEvent(e),this._focusStarredGif()}))},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.handleEnter=e=>{var t;this.stopEvent(e),null===(t=this._refStarredPreview[this._selectionIndex])||void 0===t||t.getGifRef().handleClick()},this._focusStarredGif=()=>{var e,t,a=null===(e=this._refStarredPreview[this._selectionIndex])||void 0===e||null===(t=e.getGifRef())||void 0===t?void 0:t.messagePreviewRef;a&&o.default.focus(a)},this.initSelection=()=>{this._selectionIndex=0,this._focusStarredGif()}}componentDidMount(){var e=f.default;this.props.listeners.add(e,"add remove reset",(()=>{this.forceUpdate()})),e.isSynced||e.sync()}getClientHeight(){return this._ref&&this._ref.clientHeight}hasGifs(){return Boolean(this._ref&&this._ref.childNodes.length)}isStarredGif(e){return!!e&&(!!this._ref&&this._ref.contains(e))}render(){var e={left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},t=(0,s.default)(f.default.toArray(),"filehash");if(this._msgLength=t.length,0===t.length)return n.default.createElement("div",null);if(t.length<=4){var a=0,r=t.map(((e,t)=>(a+=Math.round(e.mediaData.aspectRatio*d.TARGET_GIF_HEIGHT),n.default.createElement(h.default,{key:e.filehash,ref:e=>this._refStarredPreview[t]=e,msg:e,onSend:this.props.onSend}))));return a+=(r.length-1)*d.GAP_SIZE,n.default.createElement(u.default,{className:p.default.section,handlers:e},n.default.createElement("div",{ref:this.setRef,className:p.default.searchRow,style:{maxWidth:`${a}px`}},r))}var i=this._hasLeft(),o=this._hasRight(),c=i?this._handleSlideLeft:null,_=o?this._handleSlideRight:null,v=(0,l.default)(p.default.pager,p.default.pagerLeft,{[p.default.pagerDisabled]:!i}),g=(0,l.default)(p.default.pager,p.default.pagerRight,{[p.default.pagerDisabled]:!o}),E=n.default.createElement("div",{className:v,onClick:c},n.default.createElement(m.default,{name:"chevron-left-alt"})),S=n.default.createElement("div",{className:g,onClick:_},n.default.createElement(m.default,{name:"chevron-right-alt"})),C=t.slice(this.state.curIndex,this.state.curIndex+4).map(((e,t)=>n.default.createElement(h.default,{key:e.filehash,ref:e=>this._refStarredPreview[t]=e,msg:e,onSend:this.props.onSend})));return n.default.createElement("div",{className:p.default.section},n.default.createElement(u.default,{onRef:this.setRef,className:p.default.searchRow,handlers:e},E,n.default.createElement("div",{className:p.default.body},C),S))}}g.displayName="StarredGifs";var E=(0,c.default)(g);t.default=class extends E{getClientHeight(){return this.getComponent().getClientHeight()}hasGifs(){return this.getComponent().hasGifs()}isStarredGif(e){return this.getComponent().isStarredGif(e)}initSelection(){return this.getComponent().initSelection()}}},86113:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement("div",{className:s.default.barContainer,role:"progressbar"},e.loading&&i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:s.default.movingBar1}),i.default.createElement("span",{className:s.default.movingBar2})))};var i=r(a(67294)),s=r(a(50320))},81122:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement("div",{className:(0,i.default)(l.default.container,e.className),onMouseDown:e=>{e.stopPropagation()}},e.children)};var i=r(a(94184)),s=r(a(67294)),l=r(a(64827))},20708:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=-1,r=e.sectionIds.map(((t,r)=>{var i=!1;return t===e.selectedSectionId&&(e.showTabHighlight?(a=r,i=!0):a=-1),e.renderSectionTab(t,i)}));return i.default.createElement(n.default,{component:"div",handlers:(0,l.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext,down:e.onFocusLeave,left:e.onFocusPrev,right:e.onFocusNext,enter:e.onEnter,space:e.onEnter})},i.default.createElement(s.default,null,i.default.createElement(o.default,{numTabs:e.sectionIds.length,selectedTabIndex:a,animate:null===(t=e.showTabHighlight)||void 0===t||t}),r))};var i=r(a(67294)),s=r(a(81122)),l=r(a(88553)),n=r(a(35001)),o=r(a(70682))},99017:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var s=i(a(18446)),l=i(a(94184)),n=r(a(67294)),o=i(a(62886)),d=i(a(30462)),u={CAROUSEL:"CAROUSEL",CAROUSEL_END:"CAROUSEL_END",MENU:"MENU"};t.THEMES=u;class c extends n.PureComponent{constructor(...e){super(...e),this._setRefTab=e=>{var t,a;this._refTab=e,null===(t=(a=this.props).onRef)||void 0===t||t.call(a,e)},this._handleClick=e=>{this.props.onClick&&this.props.onClick(this.props.sectionId,e)}}focus(){this._refTab&&(this.hasFocus()||o.default.focus(this._refTab))}hasFocus(){return!!document.activeElement&&this._refTab===document.activeElement}_getStyle(e){return(0,s.default)(this._style,e)||(this._style=e),this._style}render(){var{theme:e,title:t}=this.props;return n.default.createElement("div",{ref:this._setRefTab,role:"button",className:(0,l.default)(d.default.tab,{[d.default.menu]:e===u.MENU,[d.default.carousel]:e===u.CAROUSEL||e===u.CAROUSEL_END,[d.default.carouselEnd]:e===u.CAROUSEL_END,[d.default.selected]:this.props.selected,[d.default.highlightOnFocus]:this.props.showFocusIndicator}),onClick:this._handleClick,style:this._getStyle({width:this.props.width,transform:this.props.transform}),title:t,tabIndex:"0"},this.props.children)}}t.default=c,c.displayName="MenuTab"},70682:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(18446)),l=i(a(94184)),n=r(a(67294)),o=i(a(80162)),d=i(a(71414));class u extends n.PureComponent{constructor(...e){super(...e),this._isRTL=o.default.isRTL()?-1:1,this.state={height:"4px",transform:`translateX(${100*this.props.selectedTabIndex*this._isRTL}%)`,animateWithTransform:Boolean(this.props.animate)}}componentDidUpdate(e){(0,s.default)(e,this.props)||(-1===e.selectedTabIndex&&this.props.selectedTabIndex!==e.selectedTabIndex?this.setState({animateWithTransform:!1}):this.setState({animateWithTransform:this.props.animate}),-1!==this.props.selectedTabIndex?this.setState({transform:`translateX(${100*this.props.selectedTabIndex*this._isRTL}%)`,height:"4px"}):-1!==e.selectedTabIndex&&-1===this.props.selectedTabIndex&&this.setState({height:"0px"}))}render(){return n.default.createElement("div",{className:(0,l.default)(d.default.menuTabsMarker,{[d.default.hide]:this.props.hide,[d.default.animate]:!this.state.animateWithTransform&&this.props.animate,[d.default.animateWithTransform]:this.state.animateWithTransform}),style:{width:100/this.props.numTabs+"%",transform:this.state.transform,height:this.state.height}})}}u.displayName="MenuTabMarker";var c=u;t.default=c},13503:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HEIGHT=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(75444)),d=i(a(9908)),u=i(a(62886)),c=i(a(35001)),f=i(a(80162)),h=i(a(97802)),p=a(69519),m=i(a(32885)),_=i(a(89848));t.HEIGHT=56;var v=(0,l.forwardRef)(((e,t)=>{var a=(0,l.useRef)(),r=(0,l.useRef)(),[i,v]=(0,l.useState)(e.value||"");null!=e.value&&e.value!==i&&v(e.value);var g=()=>!!document.activeElement&&a.current===document.activeElement,E=e=>{var t=a.current;t&&(g()||(u.default.focus(t),e&&d.default.indicateFocus(r.current)))};(0,l.useImperativeHandle)(t,(()=>({focus:E,hasFocus:g})));var S=null;return i&&!e.tabFocused&&(S=l.default.createElement("button",{className:h.default.cancelIcon,onClick:t=>{var a;v(""),null===(a=e.onChange)||void 0===a||a.call(e,"",t)}},l.default.createElement(m.default,{name:"x-alt-small"}))),l.default.createElement(c.default,{handlers:{enter:t=>{var a;t.preventDefault(),t.stopPropagation(),null===(a=e.onEnterKey)||void 0===a||a.call(e,t)},up:t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onUpKey)||void 0===a||a.call(e,t)},down:t=>{var a;t.stopPropagation(),t.preventDefault(),null===(a=e.onDownKey)||void 0===a||a.call(e,t)}},"data-tab":o.default.TAB_ORDERS.PANEL_SEARCH_INPUT,className:(0,s.default)(h.default.searchRow,{[h.default.ffFix]:_.default.isGecko,[h.default.rowShadow]:e.shadow}),key:"search-input",onFocus:()=>E()},l.default.createElement("label",{ref:r,className:h.default.rowInput},l.default.createElement("div",{className:h.default.inputContainer},l.default.createElement("input",{"data-a8n":n.default.key("input-emoji-search"),ref:a,className:(0,s.default)(h.default.inputEmojiSearch,p.SELECTABLE_INPUT_CSS_CLASS),type:"text",role:"searchbox",dir:f.default.isRTL()?"rtl":"ltr",value:e.tabFocused?"":i,title:e.label,placeholder:e.label,onMouseDown:e=>{e.stopPropagation()},onChange:t=>{var a;v(t.target.value),null===(a=e.onChange)||void 0===a||a.call(e,t.target.value,t)}}),S)))}));t.default=v},6644:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(62886)),o=i(a(77188)),d=i(a(45189)),u=i(a(80896)),c=i(a(3264)),f=r(a(27981)),h=i(a(15620)),p={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=p;class m extends l.PureComponent{constructor(...e){super(...e),this._refDiv=(0,l.createRef)(),this.getElement=()=>this._refDiv.current,this.state={hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0,menuShadow:!1,selectedStickerPackIndex:this._getInitialStickerPackIndex()},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._setRefMenu=e=>{this._refMenu=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusNext=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleContentFocusPrev=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=e=>{this.setState({selectedStickerPackIndex:e})},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleMenuFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleMenuFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleScroll=({scrollTop:e})=>{this._lastScrollTop=e,this.setState({menuShadow:e>0})},this._handleStickerPacksChange=()=>{this.setState({hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0})}}_getInitialStickerPackIndex(){var{displayCache:e}=this.props;return e&&null!=e.selectedStickerPackIndex?e.selectedStickerPackIndex:0}componentDidMount(){this.props.listeners.add(c.default,"change:length",this._handleStickerPacksChange),this.props.listeners.add(c.default,"change:pageFetchStates",this._handleStickerPacksChange),this.props.listeners.uiIdle((()=>{this.restoreFocus(),c.default.fetchAt(0)}))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedStickerPackIndex:this.state.selectedStickerPackIndex})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;n.default.focus(this._refEmptyContent)}else this._refMenu&&this._refMenu.focus()}))}_focusPrev(){this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){var e=o.default.isRecentStickersEnabled(),t=o.default.isStarredStickersEnabled(),a=(e?1:0)+(t?1:0),{selectedStickerPackIndex:r}=this.state;if(!e&&this.state.hasFetchedData&&!this.state.hasStickers)return l.default.createElement(f.StickerPanelEmpty,{containerClassName:d.default.panelContainer,onClick:this._handleContainerClick,onFocusPrev:this._handleEmptyFocusPrev,onFocusNext:this._handleEmptyFocusNext,onRef:this._setRefEmptyContent});var{displayLocation:i}=this.props,n=(0,s.default)(d.default.panelContainer,{[d.default.panelDropdown]:i===p.DROPDOWN});return l.default.createElement("div",{className:n,onClick:this._handleContainerClick,ref:this._refDiv},l.default.createElement(h.default,{ref:this._setRefMenu,displayLocation:i,onFocusBelow:this._handleMenuFocusBelow,onFocusNext:this._handleMenuFocusNext,onFocusPrev:this._handleMenuFocusPrev,onItemClick:this._handleItemClick,selectedStickerPackIndex:r,shadow:this.state.menuShadow,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}),l.default.createElement(f.default,{ref:this._setRefContent,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onSticker:this.props.onSticker,selectedStickerPackIndex:r,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}))}}m.defaultProps={displayLocation:p.DROPDOWN},m.displayName="StickerPanel";var _=(0,u.default)(m);t.default=class extends _{restoreFocus(){this.getComponent().restoreFocus()}}},46592:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DisplayLocation=void 0;var s=i(a(94184)),l=r(a(67294)),n=a(17657),o=i(a(45189)),d=i(a(20708)),u=i(a(16074)),c=i(a(38532)),f=i(a(80162)),h=r(a(99017)),p=i(a(10172)),m=i(a(75649)),_=i(a(39877)),v=i(a(32885)),g=a(54302).Mirrored(["ComposeBox","Dropdown"]);t.DisplayLocation=g;var E=Array.from(n.StickerTabs.members()),S=(0,l.forwardRef)(((e,t)=>{var a,r,{displayLocation:i=g.Dropdown}=e,f=(0,l.useRef)(),S=(0,l.useRef)(),b=(0,l.useRef)(),M=(0,p.default)((()=>new Map)),[T,I]=(0,l.useState)((null===(a=e.displayCache)||void 0===a?void 0:a.selectedTab)||n.StickerTabs.RECENTS),[P,A]=(0,l.useState)(-1);(0,m.default)((()=>{var t;null===(t=e.onDisplayCache)||void 0===t||t.call(e,{scrollTop:S.current,selectedTab:T})}));var N=(0,_.default)(),O=()=>N((()=>{var e=b.current;e&&e.focus()}));(0,l.useImperativeHandle)(t,(()=>({restoreFocus:O,getElement:()=>f.current})));var D=(t,a)=>{var r,i,s;null==a||a.preventDefault(),I(t),null===(r=b.current)||void 0===r||r.clearSearchText(),null===(i=e.onChange)||void 0===i||i.call(e,""),null===(s=b.current)||void 0===s||s.focus()},w=(0,s.default)(o.default.panelContainer,{[o.default.panelDropdown]:i===g.Dropdown});return l.default.createElement("div",{className:w,ref:f},l.default.createElement(d.default,{selectedSectionId:T,sectionIds:Array.from(n.StickerTabs.members()),renderSectionTab:(e,t)=>{var a=C(e),r=function(e){switch(e){case n.StickerTabs.RECENTS:return l.default.createElement(v.default,{name:"panel-recent"});default:return C(e)}}(e);return l.default.createElement(h.default,{onClick:D,sectionId:e,selected:t,showFocusIndicator:-1!==P,title:a,theme:h.THEMES.MENU,key:a,onRef:t=>{M.current.set(e,t)}},l.default.createElement("span",{className:u.default.tabIconOrText},r))},showTabHighlight:!(null===(r=e.defaultSearchText)||void 0===r?void 0:r.trim()),onFocusPrev:e=>{var t;y(e);var a=(E.length+P-1)%E.length,r=E[a];null===(t=M.current.get(r))||void 0===t||t.focus(),A(a)},onFocusNext:e=>{var t;y(e);var a=(P+1)%E.length,r=E[a];null===(t=M.current.get(r))||void 0===t||t.focus(),A(a)},onEnter:()=>{A(-1),D(E[P])},onFocusLeave:e=>{y(e),O(),A(-1)}}),l.default.createElement(c.default,{ref:b,onFocusUp:e=>{var t;y(e),null===(t=M.current.get(T))||void 0===t||t.focus(),A(E.indexOf(T))},onFocusNext:t=>{y(t),e.onFocusNext()},onFocusPrev:t=>{y(t),e.onFocusPrev()},onScroll:({scrollTop:e})=>{S.current=e},onChange:e.onChange,onSticker:e.onSticker,defaultSearchText:e.defaultSearchText,selectedTab:T}))}));function C(e){switch(e){case n.StickerTabs.RECENTS:return f.default.t(1317);case n.StickerTabs.LOVE:return f.default.t(1530);case n.StickerTabs.GREETINGS:return f.default.t(1528);case n.StickerTabs.HAPPY:return f.default.t(1529);case n.StickerTabs.SAD:return f.default.t(1531);case n.StickerTabs.ANGRY:return f.default.t(1526);case n.StickerTabs.CELEBRATE:return f.default.t(1527)}}function y(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=S},27981:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelEmpty=function({containerClassName:e,onClick:t,onFocusPrev:a,onFocusNext:r,onRef:i}){return l.default.createElement("div",{className:(0,s.default)(e,d.default.emptyContainer),onClick:t},l.default.createElement("div",{className:d.default.emptySticker,style:{backgroundImage:`url(${f.default})`}}),l.default.createElement(o.default,{handlers:{"shift+tab":a,tab:r},onRef:i},l.default.createElement("p",{className:d.default.emptyText},u.default.t(1525))))},t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(88553)),o=i(a(35001)),d=i(a(86537)),u=i(a(80162)),c=i(a(72462)),f=i(a(1388)),h=i(a(22734)),p=i(a(67890)),m=i(a(66252));class _ extends l.PureComponent{constructor(...e){super(...e),this._handleGridFocusPrev=()=>{this.props.onFocusPrev()},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._onStickerFromRecent=e=>{this.props.onSticker(e,{stickerSendOrigin:c.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS})},this._onStickerFromStarred=e=>{this.props.onSticker(e,{stickerSendOrigin:c.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_FAVORITES})}}focus(){this._refScrollGrid&&this._refScrollGrid.focus()}_getContent(){return this.props.recentStickersEnabled&&0===this.props.selectedStickerPackIndex?l.default.createElement(h.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromRecent,onStickerEnter:this._onStickerFromRecent}):this.props.starredStickersEnabled&&1===this.props.selectedStickerPackIndex?l.default.createElement(m.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromStarred,onStickerEnter:this._onStickerFromStarred}):l.default.createElement(p.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onSticker,onStickerEnter:this.props.onSticker,selectedStickerPackIndex:this.props.selectedStickerPackIndex-this.props.specialItemsCount})}render(){var e=(0,s.default)(d.default.container);return l.default.createElement(o.default,{className:e,handlers:(0,n.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext})},this._getContent())}}t.default=_,_.displayName="StickerPanelContent"},38532:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(48926)),l=i(a(94184)),n=r(a(67294)),o=a(17657),d=i(a(88553)),u=i(a(35001)),c=i(a(86537)),f=i(a(80162)),h=i(a(86113)),p=i(a(72462)),m=i(a(13503)),_=i(a(40303)),v=i(a(45303)),g=i(a(20497)),E=i(a(82415)),S=a(54890),C=i(a(34302)),y=i(a(21928)),b=i(a(4328)),M=(0,n.forwardRef)(((e,t)=>e.searchText?n.default.createElement(g.default,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,searchText:e.searchText,resetScroll:e.resetScroll}):e.selectedTab===o.StickerTabs.RECENTS?n.default.createElement(_.default,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,resetScroll:e.resetScroll}):null!=(0,o.convertTabToMood)(e.selectedTab)?n.default.createElement(g.default,{ref:t,selectedTab:e.selectedTab,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,searchText:e.searchText,resetScroll:e.resetScroll}):(__LOG__(4,void 0,new Error,!0)`_renderStickerScrollGrid attempted with an invalid selectedTab: ${e.selectedTab}`,SEND_LOGS("_renderStickerScrollGrid attempted with an invalid selectedTab"),null)));var T=(0,n.forwardRef)(((e,t)=>{var{defaultSearchText:a,selectedTab:r}=e,i=function(){var[e,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)(!0),[i]=(0,y.default)((()=>{r(!0)}),o.MINIMUM_LOADING_TIME);return(0,S.useListener)(v.default,"start_fetching",(()=>{t(!0),r(!1),i()})),(0,S.useListener)(v.default,"stop_fetching",(()=>{t(!1)})),e||!a}(),_=(0,n.useRef)(!1),g=(0,n.useRef)(),T=(0,n.useRef)(0),I=(0,n.useRef)(0),P=()=>{var e=g.current;null!=e&&(e.scrollTop=0,I.current=0,T.current=0)},[A,N]=(0,n.useState)(a||""),O=(0,n.useRef)(!1);(0,n.useEffect)((()=>{O.current?N(""):O.current=!0}),[r]);var D=function(){var e=(0,s.default)((function*(e){P();try{yield v.default.search(e)}catch(e){__LOG__(4,void 0,new Error,!0)`Sticker search promise failed`,SEND_LOGS(e)}}));return function(){return e.apply(this,arguments)}}(),w=(0,E.default)(D,250),R=(0,n.useRef)(),[k,L]=(0,n.useState)(!0),x=()=>{var e=R.current;if(!e)return _.current=!0,void L(!0);e.focus(!1)};(0,n.useEffect)((()=>{k&&x()}),[k]),(0,n.useEffect)((()=>{x(),a&&D(a)}),[]),(0,n.useImperativeHandle)(t,(()=>({focus(){var e;null===(e=R.current)||void 0===e||e.focus()},clearSearchText(){N("")}})));var[F,B]=(0,n.useState)(!0),G=(0,C.default)((()=>{var t,a=g.current;if(a){null===(t=e.onScroll)||void 0===t||t.call(e,a);var{scrollTop:r}=a,i=I.current-r;if(i===o.INPUT_BAR_TOTAL_HEIGHT)return T.current=i,void(I.current=r);var s=Math.abs(i)>o.INPUT_BAR_SCROLL_SENSITIVITY;_.current=Math.abs(i)>o.INPUT_BAR_SCROLL_FAST,i<0?k&&(r>o.INPUT_HIDE_POINT&&s||I.current<o.INPUT_HIDE_POINT&&r>=o.INPUT_HIDE_POINT)&&L(!1):k||(s||r<o.INPUT_SHOW_POINT)&&L(!0),I.current=r,T.current=i,B(r<=0)}}),o.SCROLL_THROTTLE_TIME),U=(0,n.useRef)(),j=_.current?"emoji-search-slide-away-fast":"emoji-search-slide-away",V=n.default.createElement(b.default,{transitionName:j},k&&n.default.createElement(m.default,{label:f.default.t(1445),onChange:(t,a)=>{var r;null===(r=e.onChange)||void 0===r||r.call(e,t,a),N(t),""!==t?w(t):w.cancel()},value:A||"",shadow:!F,ref:R,onUpKey:e.onFocusUp,onDownKey:()=>{var e;null===(e=U.current)||void 0===e||e.focus()}})),H=(0,l.default)(c.default.containerSearch);return n.default.createElement(u.default,{className:H,handlers:(0,d.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext}),onClick:e=>{!function(e){if(!e)return;e.preventDefault(),e.stopPropagation()}(e),x()}},n.default.createElement(h.default,{loading:i}),n.default.createElement("div",{className:c.default.bodyContainer},V,n.default.createElement("div",{className:(0,l.default)(c.default.contentContainer,c.default.contentContainerSearch),onScroll:G,ref:g},n.default.createElement(M,{ref:U,onFocusPrev:x,onStickerClick:t=>{var a,i;i=A?p.default.STICKER_SEND_ORIGIN_TYPE.STICKER_SEARCH:r===o.StickerTabs.RECENTS?p.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS:p.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_EMOTION,e.onSticker(t,{stickerSendOrigin:i}),A&&(null===(a=R.current)||void 0===a||a.focus())},searchText:A.trim(),selectedTab:e.selectedTab,resetScroll:P}))))}));t.default=T},39424:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(51463)),l=r(a(67294)),n=i(a(62886)),o=i(a(35001)),d=a(6578),u=i(a(89886)),c=i(a(3903)),f=i(a(62810)),h=i(a(95607)),p=(0,l.forwardRef)(((e,t)=>{var a=(0,h.default)(e.sticker,["id","mediaData"]),r=(0,l.useRef)(),i=(0,l.useMemo)((()=>(0,s.default)((()=>a.downloadMedia()))),[a]),p=()=>!!r.current&&r.current===document.activeElement,m=()=>{r.current&&(p()||n.default.focus(r.current))},_=()=>r.current?r.current.offsetTop:0;(0,l.useImperativeHandle)(t,(()=>({hasFocus:p,focus:m,getOffsetTop:_})));var[v,{isIntersecting:g}]=(0,f.default)({root:null,rootMargin:"10px",threshold:0});return(0,l.useEffect)((()=>{g&&i()}),[g,i]),l.default.createElement(o.default,{onRef:e=>{e&&(r.current=e,v(e))},className:c.default.container,handlers:{enter:t=>{var r=e.onEnter;r&&r((0,d.unproxy)(a),t)}}},l.default.createElement("div",{className:c.default.border},g&&l.default.createElement(u.default,{mediaData:a.mediaData,onClick:t=>{var r=e.onClick;r&&r((0,d.unproxy)(a),t)},theme:"stickerPanel",loopAnimation:!0,downloadMedia:i})))}));t.default=p},22734:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(80162)),n=i(a(58674)),o=r(a(83599)),d=r(a(53721)),u=r(a(71141));class c extends s.PureComponent{constructor(...e){super(...e),this.state={isCollectionReady:n.default.isSynced()},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){this.state.isCollectionReady||n.default.sync().then((()=>{this.setState({isCollectionReady:!0})}))}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.state.isCollectionReady?0===n.default.length?s.default.createElement(o.default,{text:l.default.t(1532)}):s.default.createElement(u.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:n.default.toArray()}):s.default.createElement(d.default,{quantity:n.RECENT_STICKERS_LIMIT})}}t.default=c,c.displayName="StickerPackStickersRecent"},40303:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(80162)),n=r(a(79492)),o=r(a(83599)),d=r(a(71141)),u=a(54890);var c=(0,s.forwardRef)(((e,t)=>{var a=(0,s.useRef)(),r=function(e){var[t,a]=(0,s.useState)([]),r=()=>{var t=n.default.toArray();a(t.map((e=>e.sticker))),null==e||e()};return(0,s.useEffect)((()=>{r()}),[]),(0,u.useListener)(n.default,"add remove change sort",r),t}(e.resetScroll);return(0,s.useImperativeHandle)(t,(()=>({focus(e){var t;null===(t=a.current)||void 0===t||t.focus(e)}}))),0===r.length?s.default.createElement(o.default,{text:l.default.t(1532)}):s.default.createElement(d.default,{ref:a,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:r,theme:"searchable"})}));t.default=c},67890:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(80162)),n=r(a(80896)),o=r(a(72462)),d=i(a(3264)),u=r(a(99026)),c=r(a(30647));class f extends s.PureComponent{constructor(e){super(e),this._handleRetryClick=()=>{d.default.fetchAt(this.props.selectedStickerPackIndex,!0)},this._handleStickerPackPageFetchState=(e,t)=>{d.default.pageWithIndex(this.props.selectedStickerPackIndex)===e&&(t?this.forceUpdate():d.default.fetchAt(this.props.selectedStickerPackIndex))},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._renderError=e=>s.default.createElement("div",{className:u.default.container},s.default.createElement("div",null,l.default.t(1057)),s.default.createElement("div",{"data-id":"retry",className:u.default.retryButton,onClick:e},l.default.t(1419).toUpperCase())),d.default.fetchAt(this.props.selectedStickerPackIndex)}componentDidMount(){this.props.listeners.add(d.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentDidUpdate(e){var{selectedStickerPackIndex:t}=this.props,{selectedStickerPackIndex:a}=e;if(t!==a){var r=d.default.pageWithIndex(t);d.default.pageFetchStates[r]===d.PAGE_FETCH_STATE.ERROR&&d.default.fetchAt(t,!0)}}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){var e=d.default.at(this.props.selectedStickerPackIndex);if(!e)return null;var t=d.default.pageWithIndex(this.props.selectedStickerPackIndex);if(d.default.pageFetchStates[t]===d.PAGE_FETCH_STATE.ERROR)return this._renderError(this._handleRetryClick);var a={stickerIsFirstParty:e.isFirstParty,stickerSendOrigin:o.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_PACK};return s.default.createElement(c.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:e=>this.props.onStickerClick(e,a),onStickerEnter:e=>this.props.onStickerEnter(e,a),stickers:e.stickers,renderError:this._renderError})}}f.displayName="StickerPackStickersScrollGrid";var h=(0,n.default)(f);t.default=class extends h{focus(e){this.getComponent().focus(e)}}},66252:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(98913)),l=a(58566),n=r(a(67294)),o=i(a(80162)),d=i(a(46532)),u=r(a(60954)),c=i(a(89678)),f=i(a(83599)),h=i(a(53721)),p=i(a(71141)),m=a(54890),_=i(a(83069)),v=(0,n.forwardRef)(((e,t)=>{var{onScroll:a}=e,[r,i]=(0,n.useState)((()=>u.default.isSynced())),[v,g]=(0,n.useState)((()=>u.default.toArray())),[E,S]=(0,n.useState)(!1),C=(0,_.default)();(0,n.useEffect)((()=>{r||(0,d.default)(u.default.sync(),C).then((()=>i(!0))).catch((0,l.catchAbort)((()=>{})))}),[]),(0,m.useListener)(u.default,"add remove",(()=>g(u.default.toArray()))),(0,m.useListener)(u.default,"sync",(()=>{g(u.default.toArray()),i(!0)})),(0,m.useListener)(u.default,"next_page_sync",(()=>{g(u.default.toArray()),S(!1)}));var y=(0,n.useCallback)((e=>{var{scrollTop:t,clientHeight:r,scrollHeight:i}=e;if(null==a||a(e),i-r-t<200&&!E&&u.default.canLoadMore()){var l=u.default.getRemaining(),n=Math.min(u.STARRED_STICKERS_PAGE_SIZE,l),o=(0,s.default)(n,(()=>c.default.getPlaceholder()));S(!0),g((e=>e.concat(o))),u.default.syncNextPage()}}),[E,a]),b=(0,n.useRef)();return(0,n.useImperativeHandle)(t,(()=>({focus:e=>{var t;return null===(t=b.current)||void 0===t?void 0:t.focus(e)}}))),r?0===u.default.length?n.default.createElement(f.default,{text:o.default.t(1533)}):n.default.createElement(p.default,{ref:b,onFocusPrev:e.onFocusPrev,onScroll:y,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerEnter,stickers:v}):n.default.createElement(h.default,{quantity:u.STARRED_STICKERS_PAGE_SIZE})}));t.default=v},83599:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(86537)),n=r(a(1388)),o=({text:e})=>s.default.createElement("div",{className:(0,i.default)(l.default.emptyContainer,l.default.panelHeight)},s.default.createElement("div",{className:l.default.emptySticker,style:{backgroundImage:`url(${n.default})`}}),s.default.createElement("p",{className:l.default.emptyText},e));t.default=o},53721:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(98913)),s=r(a(67294)),l=r(a(89678)),n=r(a(39424)),o=r(a(33906)),d=({quantity:e})=>{var t=l.default.getPlaceholder();return s.default.createElement("div",{className:o.default.container},(0,i.default)(e,(e=>s.default.createElement(n.default,{key:e,sticker:t}))))};t.default=d},20497:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelNoResults=p,t.default=void 0;var s=i(a(67294)),l=a(17657),n=r(a(80162)),o=r(a(1388)),d=r(a(45303)),u=r(a(7056)),c=r(a(71141)),f=r(a(82415)),h=a(54890);function p(){return s.default.createElement("div",{className:u.default.emptyContainer},s.default.createElement("div",{className:u.default.emptySticker,style:{backgroundImage:`url(${o.default})`}}),s.default.createElement("p",{className:u.default.emptyText},n.default.t(1268)))}var m=(0,s.forwardRef)(((e,t)=>{var{selectedTab:a}=e,[r,i]=(0,s.useState)((()=>d.default.toArray())),n=()=>{i(d.default.toArray()),e.resetScroll()},o=(0,f.default)(n,250);(0,h.useListener)(d.default,"add remove reset",o),(0,s.useEffect)((()=>{if(a){var e=(0,l.convertTabToMood)(a);null!=e&&d.default.searchMood(e),d.default.hasFetchedData()&&n()}}),[a]);var u=(0,s.useRef)();return(0,s.useImperativeHandle)(t,(()=>({focus(e){var t=u.current;t&&t.focus(e)}}))),e.searchText&&!1===d.default.isFetchingData()&&0===d.default.length?s.default.createElement(p,null):s.default.createElement(c.default,{ref:u,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:r,theme:"searchable"})}));t.default=m},30647:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(80896)),n=a(12620),o=r(a(53721)),d=r(a(71141));class u extends s.PureComponent{constructor(e){super(e),this._handleFetchState=()=>{this.forceUpdate()},this._handleRetryClick=()=>{this.props.stickers.fetch(!0)},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._fetchStickers(this.props.stickers)}componentDidUpdate(e){var t=e.stickers,a=this.props.stickers;this._handleStickersChange(t,a)}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}_fetchStickers(e,t){this.props.listeners.add(e,"change:fetchState",this._handleFetchState),e.fetch(t)}_handleStickersChange(e,t){if(e!==t){e&&this.props.listeners.remove(e,"change:fetchState",this._handleFetchState);var a=t.fetchState===n.FETCH_STATE.ERROR;this._fetchStickers(t,a),this._refScrollGrid&&this._refScrollGrid.scrollToTop()}}render(){var{stickers:e}=this.props;return e.fetchState===n.FETCH_STATE.ERROR?this.props.renderError(this._handleRetryClick):e.fetchState&&e.fetchState!==n.FETCH_STATE.PENDING?s.default.createElement(d.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:this.props.stickers.toArray()}):s.default.createElement(o.default,{quantity:24})}}u.displayName="StickersScrollGrid";var c=(0,l.default)(u);t.default=class extends c{focus(e){this.getComponent().focus(e)}}},71141:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(3774)),o=i(a(35001)),d=i(a(39424)),u=a(62020),c=i(a(33906)),f=i(a(10172)),h=(0,l.forwardRef)(((e,t)=>{var a=(0,l.useRef)(),r=(0,f.default)((()=>new Map));(0,l.useImperativeHandle)(t,(()=>({focus(e){var t=r.current,a=e||0;a=Math.min(a,t.size),a=Math.max(a,0);var i=t.get(a);i&&i.focus()},scrollToTop(){var e=a.current;e&&(e.scrollTop=0)}})));var i=()=>{for(var e=r.current,t=e.size,a=0;a<t;a++){var i=e.get(a);if(i&&i.hasFocus())return a}return-1},h=()=>{var e=r.current,t=e.get(0);if(!t)return 0;for(var a=t.getOffsetTop(),i=e.size,s=0;s<i;s++){var l=e.get(s);if(l&&l.getOffsetTop()!==a)return s}return e.size},p=t=>{var s;if(0!==t){var l=i();if(-1!==l){var n=l+t;if(n<0){var o;null===(o=e.onFocusPrev)||void 0===o||o.call(e)}else{var d=null===(s=a.current)||void 0===s?void 0:s.parentElement;n<h()&&d&&(d.scrollTop=0);var u=r.current;n=Math.min(n,u.size-1);var c=u.get(n);c&&c.focus()}}}},m=e=>{p(0-e)},_=e.stickers.map(((t,a)=>{var i=r.current,s=t.isPlaceholder?`${u.PRE_PLACEHOLDER_ID}${a}`:t.id;return l.default.createElement(n.default,{key:s,reason:"sticker-item"},l.default.createElement(d.default,{onClick:e.onStickerClick,onEnter:e.onStickerEnter,ref:e=>{e?i.set(a,e):i.delete(a)},sticker:t}))})),v=(0,s.default)(c.default.container,"searchable"===e.theme&&c.default.unscrollable);return l.default.createElement(o.default,{onRef:e=>{a.current=e},className:v,handlers:{up:e=>{e.stopPropagation(),e.preventDefault(),m(h())},down:e=>{e.stopPropagation(),e.preventDefault();var t=i(),a=h(),s=r.current,l=Math.min(t+a,s.size-1);Math.floor(t/a)!==Math.floor(l/a)&&p(a)},left:e=>{e.stopPropagation(),e.preventDefault(),m(1)},right:e=>{e.stopPropagation(),e.preventDefault(),p(1)}},onScroll:()=>{var t,r=a.current;r&&(null===(t=e.onScroll)||void 0===t||t.call(e,r))}},_)}));t.default=h},15620:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(11816)),o=i(a(88553)),d=i(a(62886)),u=i(a(35001)),c=i(a(64750)),f=i(a(80896)),h=r(a(3264)),p=i(a(78323)),m=i(a(32885));class _ extends l.PureComponent{constructor(...e){super(...e),this.state={numItems:this.props.specialItemsCount+h.default.length},this._handleLengthChange=()=>{this.setState({numItems:this.props.specialItemsCount+h.default.length})},this._setRefContainer=e=>{this._refContainer=e},this._renderItem=e=>this.props.recentStickersEnabled&&0===e?l.default.createElement(m.default,{name:"panel-recent"}):this.props.starredStickersEnabled&&1===e?l.default.createElement(m.default,{name:"panel-starred"}):l.default.createElement(p.default,{index:e-this.props.specialItemsCount})}componentDidMount(){this.props.listeners.add(h.default,"change:length",this._handleLengthChange),this._handleLengthChange()}focus(){this._refContainer&&(this.hasFocus()||d.default.focus(this._refContainer))}hasFocus(){return!!this._refContainer&&this._refContainer===document.activeElement}render(){var{numItems:e}=this.state,{displayLocation:t}=this.props,a=h.PAGE_SIZE_COMPOSE_BOX;return"DROPDOWN"===t&&(a=h.PAGE_SIZE_POPUP),l.default.createElement(u.default,{onRef:this._setRefContainer,handlers:(0,o.default)({down:this.props.onFocusBelow,"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext})},l.default.createElement(n.default,{className:(0,s.default)({[c.default.shadow]:this.props.shadow}),numItems:e,numColumns:a,onItemClick:this.props.onItemClick,renderItem:this._renderItem,selectedIndex:this.props.selectedStickerPackIndex}))}}_.displayName="StickerPanelMenu";var v=(0,f.default)(_);t.default=class extends v{focus(){this.getComponent().focus()}}},16552:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({id:e,name:t,url:a}){return i.default.createElement("div",{className:l.default.container,"data-id":e},i.default.createElement(s.default,{fallbackSVG:"sticker",wrapOptions:{wrapperClassName:l.default.stickerPackIconWrapper,centerWrapperChild:!0},className:l.default.stickerPackContainer,size:"NONE",roundContainer:!1,imgProps:{src:a||"",alt:t,draggable:!1}}))};var i=r(a(67294)),s=r(a(98140)),l=r(a(26590))},78323:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(80896)),n=r(a(3264)),o=r(a(36655)),d=r(a(76018)),u=r(a(32885));class c extends s.PureComponent{constructor(e){super(e),this._handleStickerPackPageFetchState=(e,t)=>{if(!this._unmounted){var{index:a}=this.props;n.default.pageWithIndex(a)===e&&(t||n.default.fetchAt(a),this.setState({stickerPack:n.default.at(a)}))}},n.default.fetchAt(e.index),this.state={stickerPack:n.default.at(e.index)},this._unmounted=!1}componentDidMount(){this.props.listeners.add(n.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentWillUnmount(){this._unmounted=!0}render(){var{stickerPack:e}=this.state;return e?e.isPlaceholder?s.default.createElement(u.default,{name:"sticker"}):e.isFirstParty?s.default.createElement(o.default,{stickerPack:e}):s.default.createElement(d.default,{stickerPack:e,mediaData:e.mediaData}):null}}c.displayName="StickerPackIconAtIndex";var f=(0,l.default)(c);t.default=f},36655:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.default)(e.stickerPack,["id","name","url"]),{id:a,name:r,url:n}=t;return i.default.createElement(s.default,{id:a,name:r,url:n})};var i=r(a(67294)),s=r(a(16552)),l=r(a(95607))},76018:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.default)(e.stickerPack,["id","name"]),a=(0,o.default)(e.mediaData,["renderableUrl","mediaStage"]),r=()=>t.downloadMedia();(0,s.useEffect)((()=>{r()}),[]);var i=e=>{var{id:a,name:r}=t;return s.default.createElement(n.default,{id:a,name:r,url:e})};return s.default.createElement(l.default,{mediaData:a,placeholderRenderer:function(){return i(null)},downloadMedia:r},i)};var s=i(a(67294)),l=r(a(89958)),n=r(a(16552)),o=r(a(95607))},42131:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseInput=void 0;var s=i(a(67154)),l=i(a(94184)),n=r(a(70873)),o=i(a(63337)),d=r(a(67294)),u=i(a(55847)),c=i(a(11009)),f=i(a(75444)),h=i(a(15271)),p=i(a(21324)),m=i(a(34707)),_=i(a(39747)),v=i(a(90747)),g=i(a(69027)),E=i(a(62886)),S=i(a(77188)),C=i(a(625)),y=i(a(35001)),b=i(a(80162)),M=a(3656),T=i(a(56051)),I=a(69519),P=i(a(13279)),A=i(a(25290)),N=i(a(75059)),O=a(96769);class D extends d.Component{constructor(...e){super(...e),this.__changeDueToReset=!1,this.__isMounted=!0,this.__isComposing=!1,this.containerRef=null,this.selection=this.props.initialSelection,this.state={direction:R(this.props.initialValue||""),focused:!1,value:this.props.initialValue||""},this.trigger=(e,t=[])=>{var a=this._hookMap[e];a&&a(...t)},this.serializeTextBeforeCursor=()=>(0,A.default)(this.refInput||document.createElement("span"),window.getSelection()),this._hasFocus=(e=this.refInput)=>{if(!e)return!1;var{activeElement:t}=document;return!!t&&(t===e||e.contains(t))},this.forceFocus=(e=!1)=>{if(!this.props.readOnly&&this.__isMounted){var{refInput:t}=this;if(t){var a=this._hasFocus(t);if(!a||e)if(a||E.default.focus(t),!e&&this.selection)this._restoreSelection(this.selection);else{var r=window.getSelection();r&&r.rangeCount&&(r.selectAllChildren(t),r.collapseToEnd())}}}},this.focus=(e=!1)=>{this._hasFocus()&&!e||setTimeout((()=>{this.forceFocus(e)}),0)},this.reset=(e="")=>{this.__changeDueToReset=!0,this.selection=null,this._setValue(e)},this._setValue=e=>{if(e!==this.state.value){var t=e||"";this.setState({value:t,direction:R(t)},(()=>{this.trigger(C.default.CHANGE,[t]),this.props.onChange&&this.props.onChange(t)}))}},this.onSelect=()=>{this.selection=this.getSelection(),this.props.onSelect&&this.props.onSelect(this.selection)},this.shouldComponentUpdate=(e,{value:t,focused:a,direction:r})=>{null!=this.refInput&&this.props.readOnly!==e.readOnly&&this.refInput.setAttribute("contentEditable",String(!e.readOnly));var i=k(e);if(null!=this.refInput&&i!==k(this.props)&&(null==i?this.refInput.removeAttribute("data-tab"):this.refInput.setAttribute("data-tab",i.toString())),a!==this.state.focused&&this.containerRef&&(a?this.containerRef.classList.add("focused"):this.containerRef.classList.remove("focused")),r!==this.state.direction&&this.refInput&&this.refInput.setAttribute("dir",r),this.__changeDueToReset){this.__changeDueToReset=!1;var s=(0,N.default)(t,this._plugins);this.refInput&&(this.refInput.innerHTML=s)}var l=!t.length&&!!this.state.value.length,n=!!t.length&&!this.state.value.length;if(!n&&!l)return!1;var o=n?"hidden":"visible";return this._refPlaceholder&&this._refPlaceholder.setAttribute("style",`visibility: ${o}`),!1},this.componentWillUnmount=()=>{this.__isMounted=!1,this.refInput&&(this.refInput.restoreFocus=null)},this.onInput=()=>{var{refInput:e}=this,t=e?(0,P.default)(e,this._plugins):"",a=this.props.multiline&&"\n"!==t?t:t.replace(/\n$/,""),{maxLength:r}=this.props;if(null!=r&&(0,O.numCodepoints)(a)>r){var i=this.selection;return e&&(e.innerHTML=(0,N.default)(this.state.value,this._plugins)),void(i&&this._restoreSelection(i))}this.trigger(C.default.INPUT),this._setValue(a)},this.onPaste=e=>{e.preventDefault(),e.stopPropagation();var t=new g.default(e.clipboardData),{onFiles:a,onTextPaste:r}=this.props;t.hasFiles()&&a&&a(t)||t.hasText()&&t.getText(this.props.textPasteMimePriority).then((e=>{if(e&&(!r||!r(e))){var t=this.length-this._selectionLength,{maxLength:a}=this.props;if(null!=a&&t+(0,O.numCodepoints)(e)>a){var{onMaxPasteExceeded:i}=this.props;return i&&i()}this.replaceSelection(e)}}))},this._onBeforeInput=e=>{if(this.props.readOnly)return!0;var{maxLength:t}=this.props;if(null==t)return!1;var a=e.data.charCodeAt(0);if(8===a||127===a)return!1;var r=t+this._selectionLength-this.length;return(0,O.numCodepoints)(e.data)>r},this.onKeyDown=e=>!(!this.props.onKeyDown||!this.props.onKeyDown(e))||13===e.which&&(this.props.multiline&&function(e){return 13===e.which&&(e.shiftKey||e.altKey||e.ctrlKey)}(e)?!(""!==this.state.value.trim()||!this.cursorIsAtStart())||(S.default.supportsFeature(S.default.F.FORMAT_BULLETED_MSG)&&this._cursorIsOnListItem()?(this._insertNewLineAtSelection(M.LIST_ITEM_DELIMITER),!0):(this._insertNewLineAtSelection(),!0)):(this.props.onEnter&&this.props.onEnter(e),!0)),this.componentDidMount=()=>{this.refInput&&(this.refInput.restoreFocus=this.focus),this.trigger(C.default.MOUNT)},this.onBlur=e=>{this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this._onCompositionStart=()=>!(this.__isComposing=!0),this._onCompositionEnd=()=>this.__isComposing=!1,this.setRefContainer=e=>{this.containerRef=e},this._setRefPlaceholder=e=>{this._refPlaceholder=e},this.setRefInput=e=>{this.refInput=e},this.getRefInput=()=>this.refInput}get value(){return this.state.value}get _selectionLength(){if(this.props.readOnly)return 0;this._hasFocus(this.refInput)||E.default.focus(this.refInput);var e=window.getSelection();return e.rangeCount?(0,O.numCodepoints)((0,P.default)(e.getRangeAt(0).cloneContents(),this._plugins)):0}get length(){return(0,O.numCodepoints)(this.state.value)}serialize(e){var t=e||this.state.value;return this._plugins.reduce((([e,t],a)=>a.serialize?a.serialize(e,t):[e,t]),[t,{}])}_adjustScrollAfterModification(e,t,a){var{scrollHeight:r,clientHeight:i}=e;r<=i||(e.scrollTop=(a||0)+(r-t))}_ensureFocus(e){this._hasFocus(e)||(E.default.focus(e),this.selection&&this._restoreSelection(this.selection))}replaceSelection(e,t=!1){var{refInput:a}=this;if(!this.props.readOnly&&null!=a){this._ensureFocus(a);var r=this._trimToFit(e);if(r.length||t){this.props.multiline||(r=r.replace(/\r?\n/g,""));var i=window.getSelection().getRangeAt(0);(function({startOffset:e,startContainer:t},a){return 0===e&&t!==a&&(!(!t||!t.previousSibling)&&"\n"===t.previousSibling.textContent.slice(-1))})(i,a)&&(r=`\n${r}`),i.deleteContents();var{scrollHeight:s,scrollTop:l}=a;document.execCommand("insertHTML",!1,(0,N.default)(r,this._plugins)),this.onSelect(),this._adjustScrollAfterModification(a,s,l)}}}_insertNewLineAtSelection(e=""){this.props.multiline&&this._insertTextAtSelection("\n"+e)}_insertTextAtSelection(e){var{refInput:t}=this;if(this.props.multiline&&!this.props.readOnly&&null!=t){this._ensureFocus(t);var{scrollHeight:a,scrollTop:r}=t,i=this.cursorIsAtEnd(),s=document.createTextNode(e),l=window.getSelection(),n=l.getRangeAt(0);if(n.deleteContents(),n.insertNode(s),/^\n/.test(e)&&a===t.scrollHeight&&i){n.setStartBefore(s);var o=document.createTextNode("\n");n.insertNode(o)}n.setStartAfter(s),n.setEndAfter(s),n.collapse(!1),l.removeAllRanges(),l.addRange(n),t.normalize(),this._adjustScrollAfterModification(t,a,r),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}}deleteSelection(){this.replaceSelection("",!0)}_restoreSelection(e){var{refInput:t}=this;if(t){var{anchorIndex:a,focusIndex:r}=e,{anchorOffset:i,focusOffset:s}=e,{childNodes:l}=t,n=-1===a?t:l[a],o=-1===r?t:l[r];if(n&&o)try{n===o&&i>s&&([i,s]=[s,i]);var d=document.createRange();d.setStart(n,i),d.setEnd(o,s);var u=window.getSelection();u.removeAllRanges(),u.addRange(d);try{var c=document.createRange();c.setStart(o,s),c.setEnd(o,s);var f=c.getBoundingClientRect(),{bottom:h,top:p}=f,m=this.refInput&&this.refInput.getBoundingClientRect(),{bottom:_,top:v}=m||{};if(p>=v&&h<=_)return;this.refInput&&(this.refInput.scrollTop+=h<v?p-v:h-_)}catch(e){}}catch(e){this.focus(!0)}}}getSelection(){var{refInput:e}=this;if(!e||document.activeElement!==e)return null;for(var t,a=window.getSelection(),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:l}=a,n=e.childNodes,o=-1,d=-1,u=0;(o<0||d<0)&&(t=n[u++]);)r===t&&(o=u-1),s===t&&(d=u-1);return{anchorIndex:o,anchorOffset:i,focusIndex:d,focusOffset:l}}_trimToFit(e){var{maxLength:t}=this.props;if(null==t)return e;var a=t+this._selectionLength-this.length;return a<=0?"":(0,O.substring)(String(e),0,a)}_cursorIsOnListItem(){return S.default.supportsFeature(S.default.F.FORMAT_BULLETED_MSG)&&M.LAST_LIST_ITEM_REGEX.test(this.serializeTextBeforeCursor())}cursorIsAtEnd(){return null!=this.refInput&&(!(!this.state.focused||""!==this.state.value)||(0,_.default)(this.refInput))}cursorIsAtStart(){return!(!this.state.focused||""!==this.state.value)||(0,v.default)(this.refInput)}isFocused(){return this.state.focused}get isComposing(){return this.__isComposing}blur(){(0,o.default)(this.refInput,"this.refInput").blur()}select(){var e=(0,o.default)(this.refInput,"this.refInput"),t=document.createRange();t.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}render(){var e,{props:{placeholder:t},state:{value:a,direction:r}}=this,i=a.length>0?"hidden":"visible",n=(0,l.default)(T.default.input,{[T.default.compose]:"compose"===this.props.theme,[T.default.default]:"default"===this.props.theme||"media-caption"===this.props.theme||"text-input"===this.props.theme,[T.default.large]:"large"===this.props.theme,[T.default.media]:"media-caption"===this.props.theme,[T.default.invite]:"v4-invite-caption"===this.props.theme,[T.default.small]:"small"===this.props.theme,[T.default.status]:"status-reply"===this.props.theme,[T.default["list-search"]]:"list-search"===this.props.theme,[T.default.textInput]:"text-input"===this.props.theme,[T.default.mediaEditorTextInput]:"media-editor-text-input"===this.props.theme});return d.default.createElement(y.default,{className:n,handlers:this._hotKeyMap,onRef:this.setRefContainer},d.default.createElement("div",{"data-a8n":u.default.key("pluggable-input-placeholder"),className:(0,l.default)(T.default.placeholder,{[T.default.mediaEditorTextInputPlaceholder]:"media-editor-text-input"===this.props.theme}),ref:this._setRefPlaceholder,style:{visibility:i}},t),d.default.createElement("div",(0,s.default)({},this._handlerMap,{"data-a8n":null!==(e=u.default.key(this.props.a8n))&&void 0!==e?e:u.default.key("pluggable-input-body"),title:this.props.title,"aria-required":this.props.required,className:(0,l.default)(T.default.body,I.SELECTABLE_INPUT_CSS_CLASS),contentEditable:!this.props.readOnly,dangerouslySetInnerHTML:{__html:(0,N.default)(a,this._plugins)},"data-tab":k(this.props),dir:r,ref:this.setRefInput,spellCheck:this.props.spellCheck,style:this.props.style})))}}t.BaseInput=D,D.displayName="BaseInput";t.default=e=>class extends D{constructor(...t){var a,r,i;super(...t),this._plugins=[...e.map((e=>(e instanceof c.default&&e.initialize(this),e))),(i=this,{handlers:(a=i,r=w,r.reduce(((e,t)=>(Array.isArray(t)?e[t[0]]=a[t[1]]:e[t]=a[t],e)),{}))})],this._handlerMap=(0,h.default)(this._plugins,this),this._hookMap=(0,p.default)(this._plugins,this),this._hotKeyMap=(0,m.default)(this._plugins,this)}};var w=["onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onFocus","onInput","onKeyDown","onPaste","onSelect"];function R(e){return n.dir(e)||b.default.LR("ltr","rtl")}function k({tabOrder:e,readOnly:t}){return null!=e?e:t?null:f.default.TAB_ORDERS.COMPOSE_BOX_INPUT}},68570:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(5354)),d=i(a(75886)),u=i(a(15846)),c=i(a(44703)),f=i(a(44089)),h=i(a(90225)),p=i(a(64867)),m=i(a(26144)),_=i(a(83886)),v=i(a(4328)),g=(0,h.default)({MEDIA_CAPTION:null,EMOJI_INPUT:null});t.ThemeOptions=g;var E=e=>{var[t,a]=(0,l.useState)(""),[r,i]=(0,l.useState)(""),[h,E]=(0,l.useState)(null),S=(0,l.useRef)(),C=()=>{a(""),i(""),E(null)},y=e=>{if(!(0,f.default)(e)){var t=S.current;return t?(e.preventDefault(),e.stopPropagation(),t.pickSelectedEmoji(),!1):void 0}};(0,_.default)(e.plugin,c.default.EMOJI_SEARCH,(t=>{var s=t?t.trim():t,l=r,n=e.chat;if(n&&n.isGroup&&s&&s.includes("@"))return E(null),void a("");if(!l||!s.startsWith(l))if(s.length<2){if(!h)return;a(s),E(""===s?null:(0,o.default)(s))}else{var d=(0,o.default)(s);d.length?(a(s),i(null),E(d)):(a(s),E(null))}})),(0,_.default)(e.plugin,c.default.EMOJI_INACTIVE,C),(0,_.default)(e.plugin,c.default.EMOJI_ENTER,y),(0,_.default)(e.plugin,c.default.EMOJI_LEFT,(e=>{if(!(0,f.default)(e)){var t=S.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionLeft())}})),(0,_.default)(e.plugin,c.default.EMOJI_RIGHT,(e=>{if(!(0,f.default)(e)){var t=S.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionRight())}})),(0,_.default)(e.plugin,c.default.EMOJI_TAB,y);var b=h?l.default.createElement(m.default,{displayName:"EmojiSuggestions",escapable:!0,requestDismiss:()=>{a(""),i(t),E(null)},requestFocus:()=>{e.plugin.ctx.focus()}},l.default.createElement("div",{className:(0,s.default)(d.default.overlayContainer,{[d.default.mediaCaption]:e.theme===g.MEDIA_CAPTION,[d.default.emojiInput]:e.theme===g.EMOJI_INPUT})},l.default.createElement("div",{className:d.default.resultsContainer,"data-list-scroll-container":"false"},l.default.createElement("div",{className:d.default.emojiSearch,onKeyPress:t=>{t.preventDefault();var{chat:a}=e;a&&n.default.pasteChatTextInput(a,String.fromCharCode(t.charCode))},onKeyDown:t=>("Backspace"===t.key&&(t.preventDefault(),document.execCommand("delete"),e.plugin.ctx.focus()),!1)},l.default.createElement("div",{className:d.default.searchBody,key:"RECENT"},l.default.createElement(u.default,{ref:S,key:t,onEmoji:t=>{p.default.increment(t),e.plugin.handleSelect(t)},onFocusRelease:C,onSkinTonePicker:e.onSkinTonePicker,emojiList:h})))))):null;return l.default.createElement(v.default,{component:"div",className:d.default.positioningContainer,transitionName:"emoji-search-panel-slide-up"},b)};t.default=E},44703:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(90225)).default)({EMOJI_ENTER:void 0,EMOJI_INACTIVE:void 0,EMOJI_LEFT:void 0,EMOJI_RIGHT:void 0,EMOJI_SEARCH:void 0,EMOJI_TAB:void 0});t.default=i},9204:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11009)),s=r(a(5318)),l=r(a(44703)),n=r(a(625)),o=r(a(40343)),d=r(a(71698)),u={ArrowLeft:l.default.EMOJI_LEFT,ArrowRight:l.default.EMOJI_RIGHT,Enter:l.default.EMOJI_ENTER,Tab:l.default.EMOJI_TAB};class c extends i.default{constructor(...e){super(...e),this.hooks={[n.default.CHANGE](e,{refInput:t}){""===t.textContent&&this.handle(l.default.EMOJI_INACTIVE)}},this.handlers={onKeyDown(e,t){8!==e.keyCode&&e.repeat&&(this._lastSyncKeyDownWasRepeat=!0,setTimeout((()=>{delete this._lastSyncKeyDownWasRepeat}),0));var a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(e,t){if(this.ctx.isComposing)return!1;if(this._lastSyncKeyDownWasRepeat)return!1;var a=window.getSelection();if(!a.modify)return!1;var r=f(t,a);return r?(r=r.slice(1),this.handle(l.default.EMOJI_SEARCH,[r]),!1):this.handle(l.default.EMOJI_INACTIVE)}}}handleSelect(e){this.ctx.forceFocus(),f(this.ctx,window.getSelection(),!0)&&(this.ctx.replaceSelection(e),this.handle(l.default.EMOJI_INACTIVE))}}function f(e,t,a=!1){var r=null,i=null,l="",n=0,u=null;return(0,o.default)(e,t,((e,t,a)=>{if("@"===e||" "===e&&" "===i)return!0;if(":"===i)if(" "===r);else{if(s.default.isEmoji(e))return u=l,!0;if(/\W/.test(e))return u=a.slice(t+1)+l,!0}return 0===t&&(l=a+l),r=i,i=e,(n+=1)>=50||void 0})),!u&&n<50&&":"===i&&(u=l),a&&u&&u.length&&(0,d.default)(t,u.length),u}t.default=c},59570:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isEmojiEl=function(e){return!!e&&(e instanceof HTMLElement&&!!e.dataset.isEmoji)},t.default=void 0;var i=r(a(94184)),s=a(9019),l=r(a(33766)),n=r(a(75444)),o=r(a(5318)),d=r(a(625)),u=a(69519),c=!1;var f={serializers:[["img.emoji",e=>e.getAttribute("alt")||""]],parsers:[e=>e.replace(o.default.emojiRegex(),((e,t)=>{var a=(e=>{var t=o.default.getGlyphId(e);if(null==t)return null;var a=(0,u.createSelectableElement)("img",e);a.setAttribute("alt",e),a.setAttribute("draggable","false"),a.setAttribute("class",(0,i.default)(a.getAttribute("class"),o.default.getCssClasses(t)));var r=o.default.getStyle(t);return Object.assign(a.style,r),a.setAttribute("src",n.default.ONE_BY_ONE_TRANS_GIF),a.dataset.isEmoji="true",a})(t);return a?a.outerHTML:""}))],hooks:{[d.default.MOUNT](){c||(c=!0,new Promise((e=>{0===l.default.uiBusy&&e(),l.default.once("ui_idle",(()=>{e()}))})).then((()=>(0,s.delayMs)(0))).then((()=>{document.execCommand("enableObjectResizing",!1,!1)})).catch((()=>{})))}},handlers:{onBeforeInput(e,t){var a=o.default.emojiRegex().exec(e.data);return!!a&&(e.cancelable&&t.replaceSelection(a[0]),!0)},onClick(e){if(!e.target)return!1;var t=e.target.getAttribute("class");if(!t||!~t.indexOf("emoji"))return!1;var a=window.getSelection(),r=new Range;return e.pageX<e.target.x+e.target.width/2?(r.setStartBefore(e.target),r.setEndBefore(e.target)):(r.setStartAfter(e.target),r.setEndAfter(e.target)),a.removeAllRanges(),a.addRange(r),!0}}};t.default=f},50439:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(90225)).default)({SEARCH:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0});t.default=i},48539:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(70873),l=i(a(11009)),n=i(a(9226)),o=i(a(74798)),d=i(a(75444)),u=i(a(62899)),c=i(a(5318)),f=i(a(50439)),h=r(a(39415)),p=i(a(55396)),m=i(a(77188)),_=i(a(625)),v=i(a(13150)),g=i(a(6200)),E=i(a(87677)),S=i(a(12249)),C=i(a(76488)),y=i(a(51742)),b=i(a(15728)),M=i(a(71152)),T=i(a(29843)),I=i(a(40343)),P=i(a(71698)),A=a(69519),N=i(a(89848)),O=a(52152),D=2*d.default.MAX_PUSHNAME_LENGTH,w=/\u200B((\d+)@c\.us)\u200B/g,R={Enter:f.default.ENTER,Tab:f.default.TAB,ArrowUp:f.default.UP,ArrowDown:f.default.DOWN};class k extends l.default{constructor(...e){super(...e),this.serializers=[["span[data-mention-jid]",e=>(function(e){if(!e.hasChildNodes())return;for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),`​${e.getAttribute("data-mention-jid")||""}​`)]],this.parsers=[e=>e.replace(w,((e,t)=>{var a=u.default.get(t);if(!a)return t;var r=!a.isMyContact&&a.notifyName?a.notifyName:a.formattedName,i=`@${r}`,l=o.default.toArray().find((e=>e.active));if(null==l||!l.isGroup)return i;if(!(null!=l.groupMetadata&&l.groupMetadata.participants.get(t)))return i;m.default.isDropLastNameEnabled()&&l.groupMetadata&&l.groupMetadata.hasUniqueShortNameMention(a)&&(r=a.shortName);var n=(0,A.createSelectableElement)("span");n.dataset.mentionJid=a.id.toString();var d=document.createElement("span");d.className="at-symbol",d.appendChild(document.createTextNode("@"));var c=document.createElement("span");return c.setAttribute("dir",(0,s.dir)(r)||"auto"),c.appendChild(document.createTextNode(r)),n.appendChild(d),n.appendChild(c),n.dataset.originalName=n.textContent||"",n.dataset.plainText=n.textContent||"",n.dataset.appTextTemplate=`​${t}​`,n.outerHTML}))],this.serialize=(e,t)=>(t.mentionedJidList=[],[e.replace(w,((e,a,r)=>(t.mentionedJidList.push((0,O.createWid)(a)),`@${r}`))),t]),this.handleSelect=e=>{var t=window.getSelection();if(function(e,t){var{anchorNode:a,anchorOffset:r}=t;a&&a===e.containerRef&&(r=(a=a.childNodes[r]).textContent.length);if(!a||a&&a.nodeType!==Node.TEXT_NODE)return!1;var i=a.textContent.slice(r),s=a;for(;0===i.length;){if(!(s=s.nextSibling)||s.nodeType!==Node.TEXT_NODE)return!1;i=s.textContent}return" "===i.charAt(0)}(this.ctx,t)&&t.modify("move","forward","character"),U(this.ctx,t,!0)){t=window.getSelection();var{refInput:a}=this.ctx,{mentionAfterEnd:r}=a?L(a):{};r&&G(r),this.ctx.replaceSelection(`​${e.id.toString()}​ `),this.handle(f.default.INACTIVE)}},this.hooks={[_.default.CHANGE](e,{refInput:t}){if(N.default.isGecko)if(""===e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createElement("br"))}else for(var a=t.querySelectorAll("[data-mention-jid]"),r=0;r<a.length;++r){var{nextSibling:i}=a[r];i&&(i instanceof Element&&"BR"===i.tagName&&"_moz"===i.getAttribute("type")&&i.remove())}},[_.default.INPUT]({refInput:e}){var t=e.querySelectorAll("[data-mention-jid]");if(t.length)for(var a=0;a<t.length;++a){var r=t[a];if(r.textContent!==r.getAttribute("data-original-name")){var i=r.querySelector(".at-symbol"),s=r.querySelector("span [dir]"),l=window.getSelection(),n=l.focusOffset,o=l.focusNode&&l.focusNode.parentNode&&l.focusNode.parentNode.className,d=r.parentNode,u=document.createDocumentFragment();i&&u.appendChild(document.createTextNode(i.textContent)),s&&u.appendChild(document.createTextNode(s.textContent));var c="at-symbol"===o?u.firstChild:u.lastChild;if(1===u.childNodes.length&&u.lastChild&&(n="@"===u.lastChild.textContent?1:0),d.replaceChild(u,r),l.rangeCount<=0)return;var f=l.getRangeAt(0);f.setEnd(c,n),f.collapse(!1),l.removeAllRanges(),l.addRange(f)}}}},this.handlers={onKeyDown(e,t){var{key:a}=e;if(!this.ctx.isComposing&&("Backspace"===a||"Delete"===a&&(0,S.default)(e))){var r=window.getSelection();if(r.isCollapsed){var{mentionBeforeStart:i,mentionAfterEnd:s}=L(this.ctx.refInput),l=null;if("Delete"===a&&s&&(l=s),"Backspace"===a&&i&&(l=i),l){r.removeAllRanges();var n=document.createRange();n.selectNode(l),r.addRange(n),x(this.ctx.refInput),window.setTimeout((()=>{(0,T.default)()}),0)}}else x(this.ctx.refInput)}var o=R[e.key];return!!o&&this.handle(o,[e,t])},onKeyPress(){return this.ctx.isComposing||x(this.ctx.refInput),!1},onBlur(){return this.handle(f.default.INACTIVE),!1},onSelect(e,t){if(N.default.isTrident||this.ctx.isComposing)return!1;var a=window.getSelection();a.isCollapsed&&a.rangeCount>0&&a.anchorNode&&function(e,t){var{anchorNode:a,anchorOffset:r}=t;if(a&&a===e.refInput){if(0===r)return!0;a=a.childNodes[t.getRangeAt(0).startOffset],r=(0,b.default)(a)?a.textContent.length:0}if((0,E.default)(a,"br"))return!0;if(!a)return!1;if(!(0,b.default)(a))return!1;if("\n"===a.textContent)return!0;var i=a.textContent.slice(0,r);if(""===i){var s=(0,h.default)(a,h.DIR.PREV);if(!s)return!0;if(!(0,b.default)(s))return!1;i=s.textContent}return"\n"===i.charAt(i.length-1)}(t,a)&&(0,T.default)();var r=U(this.ctx,a);if(!r||a.focusNode&&a.focusNode.parentElement&&(0,C.default)(a.focusNode.parentElement.parentElement))return this.handle(f.default.INACTIVE),!1;var i=r.slice(1);return this.handle(f.default.SEARCH,[i]),!1},onPaste(){return x(this.ctx.refInput),!1}}}}function L(e){var t=window.getSelection();if(0===t.rangeCount)return{};var a,r,i,s,l,o,d=t.getRangeAt(0),{startContainer:u,startOffset:c,endContainer:f,endOffset:p}=d,m=f instanceof HTMLElement?f.childNodes.length===p:f.textContent&&f.textContent.length===p;0===c&&(a=u===e?e.childNodes[c]:(0,n.default)(u,(t=>t&&t!==e&&(t.parentElement===e||(0,y.default)(t,0))?[t.parentElement]:[]),(t=>t&&t.parentElement===e))),m&&(r=f===e?e.childNodes[p]:(0,n.default)(f,(t=>t&&t!==e&&(t.parentElement===e||(0,y.default)(t,-1))?[t.parentElement]:[]),(t=>t&&t.parentElement===e)));var _=(0,h.default)(a,h.DIR.PREV);(0,C.default)(_)&&(i=_),(0,C.default)(a)&&(s=a),(0,C.default)(r)&&(l=r,d.collapsed&&(i=i||l));var v=(0,h.default)(r,h.DIR.NEXT);return(0,C.default)(v)&&(o=v,d.collapsed&&(s=s||o)),{mentionBeforeStart:i,mentionAfterStart:s,mentionBeforeEnd:l,mentionAfterEnd:o}}function x(e){var{mentionBeforeStart:t,mentionAfterStart:a,mentionBeforeEnd:r,mentionAfterEnd:i}=L(e);if(t||a||r||i){var s=window.getSelection(),l=s.getRangeAt(0),n=l.collapsed,o=!1;if(t){var d=B(t);o=!0,l.setStartAfter(d),l.collapsed&&l.setEndAfter(d)}if(a){var u=G(a);o=!0,l.setStartBefore(u),n&&l.setEndBefore(u)}if(!n){if(r){var c=B(r);o=!0,l.setEndAfter(c)}if(i){var f=G(i);o=!0,l.setEndBefore(f)}}o&&(s.removeAllRanges(),s.addRange(l))}}function F(){var e=document.createElement("span");return e.textContent="​",e.contentEditable="false",setTimeout((()=>(0,M.default)(e)),0),e}function B(e){var t=F();return(0,v.default)(t,e),t}function G(e){var t=F();return(0,g.default)(t,e),t}function U(e,t,a=!1){var r=(0,p.default)(e.refInput,"BACKWARD");if((0,C.default)(r))return"";var i=null,s="",l=0,n=null;return(0,I.default)(e,t,((e,t,a)=>{if("@"===i){if(c.default.isEmoji(e))return n=s,!0;if(/\W/.test(e))return n=a.slice(t+1)+s,!0}if(0===t&&(s=a+s),i=e,(l+=1)>=D)return!0})),!n&&l<D&&"@"===i&&(n=s),a&&n&&n.length&&(0,P.default)(t,n.length),n}t.default=k},76747:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({theme:e,contact:{id:t,formattedName:a,isMyContact:r,notifyName:u},onMouseDown:c,onMouseUp:f,onMouseEnter:h,term:p,selected:m}){var _=o.Configuration.Search({terms:p?[p]:[],boundary:!0});return s.default.createElement("div",{className:(0,i.default)(d.default.mentionsResult,{[d.default.mediaCaption]:"mediaCaption"===e,[d.default.selected]:!0===m}),onMouseDown:c,onMouseUp:f,onMouseEnter:h},s.default.createElement("div",{className:d.default.resultImage},s.default.createElement(l.default,{id:t,size:32})),s.default.createElement("div",{className:d.default.textContact,dir:"auto"},s.default.createElement(n.default,{text:a,formatters:_})),s.default.createElement("div",{className:d.default.textPushname,dir:"auto"},!r&&u?s.default.createElement(n.default,{text:`~${u}`,formatters:_}):null),null)};var i=r(a(94184)),s=r(a(67294)),l=r(a(17367)),n=r(a(20923)),o=a(99375),d=r(a(33179))},81064:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(50439)),o=i(a(3128)),d=i(a(9444)),u=i(a(59432)),c=i(a(44089)),f=i(a(90225)),h=a(21421),p=i(a(76747)),m=i(a(54794)),_=i(a(26144)),v=i(a(10172)),g=i(a(95607)),E=i(a(83886)),S=i(a(4328)),C=(0,f.default)({MEDIA_CAPTION:null});t.ThemeOptions=C;var y=e=>{var{theme:t,plugin:a}=e,r=(0,g.default)(e.chat,["groupMetadata","isGroup"]),i=(0,v.default)((()=>new u.default)),[f,y]=(0,l.useState)(!1),[b,M]=(0,l.useState)(0),[T,I]=(0,l.useState)(""),[P,A]=(0,l.useState)(""),[N,O]=(0,l.useState)([]),D=(0,l.useRef)(),w=e=>(t,a)=>!(!f||!N.length)&&((!t||!(0,c.default)(t))&&(e(t,a),!0)),R=e=>{var t=N[e];if(t&&t.id){var i=r.assignedColor(t.id);a.handleSelect(t,i+"")}},k=(e,t=!1)=>M((a=>{var r;return t||a===e||null===(r=D.current)||void 0===r||r.scrollIntoViewIfNeeded(b),e})),L=w((()=>R(b))),x=w((()=>{y(!1),M(0),I(""),A(""),O([])})),F=w((()=>k(Math.max(b-1,0)))),B=w((()=>{var e=N.length-1;k(Math.min(b+1,e))}));if((0,E.default)(a,n.default.ENTER,L),(0,E.default)(a,n.default.TAB,L),(0,E.default)(a,n.default.SEARCH,(e=>{if((!T||!e.startsWith(T))&&r&&r.isGroup){var{groupMetadata:t}=r,{participants:a}=null!=t?t:{};y(!0),M(0),I(null),A(e),O((0,h.getResults)(e,a))}})),(0,E.default)(a,n.default.INACTIVE,x),(0,E.default)(a,n.default.UP,F),(0,E.default)(a,n.default.DOWN,B),!f||!N.length)return null;var G=N.map(((e,t)=>({height:52,itemKey:e.id.toString(),contentKey:`${P}${t===b?"-selected":""}`,index:t,contact:e})));return l.default.createElement(S.default,{component:"div",className:m.default.positioningContainer,transitionName:"slide-up"},l.default.createElement(_.default,{displayName:"MentionSuggestions",escapable:!0,requestDismiss:()=>{y(!1),M(0),I(P),A(""),O([])},requestRecentFocusOnUnmount:!1},l.default.createElement("div",{className:(0,s.default)(m.default.overlayContainer,{[m.default.mediaCaption]:t===C.MEDIA_CAPTION})},l.default.createElement(d.default,{className:m.default.resultsContainer,flatListControllers:[i.current]},l.default.createElement(o.default,{ref:D,data:G,flatListController:i.current,direction:"vertical",renderItem:e=>{var{index:a,contact:r}=e;return l.default.createElement(p.default,{key:r.id.toString(),contact:r,term:P,selected:a===b,theme:t===C.MEDIA_CAPTION?"mediaCaption":null,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>R(a),onMouseEnter:()=>k(a,!0)})}})))))};t.default=y},73845:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(a(90225)).default)({FILTER:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0,BACKSPACE:void 0});t.default=i},92746:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11009)),s=r(a(73845)),l=r(a(6080)),n=r(a(71698)),o=r(a(89848)),d=(0,l.default)(25,"/"),u={Enter:s.default.ENTER,Tab:s.default.TAB,ArrowUp:s.default.UP,ArrowDown:s.default.DOWN,Backspace:s.default.BACKSPACE};class c extends i.default{constructor(...e){super(...e),this.handleSelect=e=>{e.useOnce();var t=window.getSelection(),a=d(this.ctx,t);null!=a&&((0,n.default)(t,a.length+1),this.ctx.replaceSelection(e.message),(0,n.default)(t,e.message.length),this.handle(s.default.INACTIVE))},this.handlers={onKeyDown(e,t){var a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(){if(o.default.isTrident)return!1;if(this.ctx.isComposing)return!1;var e=window.getSelection(),t=d(this.ctx,e);return null==t?(this.handle(s.default.INACTIVE),!1):(this.handle(s.default.FILTER,[t]),!1)},onBlur(){return this.handle(s.default.INACTIVE),!1}}}}var f=new c;t.default=f},45020:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logFilterEvent=function(e){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_IMPRESSION,quickReplyCount:e}).commit()},t.logSelectEvent=function(){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK,quickReplyKeywordMatched:!1}).commit()},t.logCancelEvent=function(){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK_CANCEL}).commit()};var i=r(a(72462))},82662:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{shortcut:t,message:a}=(0,d.default)(e.quickReply,["shortcut","message"]),{query:r,selected:u,onMouseDown:c,onMouseEnter:f,onMouseUp:h}=e,p=t.slice(r.length);return s.default.createElement("div",{className:(0,i.default)(o.default.result,{[o.default.selected]:u}),onMouseDown:c,onMouseUp:h,onMouseEnter:f},s.default.createElement("span",{className:o.default.slash},"/"),s.default.createElement(l.default,{className:o.default.shortcutPrefix,text:r}),s.default.createElement(l.default,{className:o.default.shortcutSuffix,text:p}),s.default.createElement(l.default,{className:o.default.message,ellipsify:!0,text:a,formatters:n.Configuration.QuickReply()}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(20923)),n=a(99375),o=r(a(73248)),d=r(a(95607))},85542:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),l=i(a(94184)),n=r(a(67294)),o=a(11009),d=i(a(73845)),u=i(a(3128)),c=i(a(9444)),f=i(a(59432)),h=i(a(44089)),p=i(a(80896)),m=a(45020),_=i(a(14837)),v=i(a(82662)),g=i(a(99544)),E=i(a(26144)),S=i(a(4328)),C={query:"",results:[],active:!1,offset:0};class y extends n.Component{constructor(...e){super(...e),this.state=C,this.flatListController=new f.default,this.setRefList=e=>{this.list=e},this._pluginCtx=(0,o.pluginContext)(),this.handleUpdate=b((()=>this._handleFilter(this.state.query)),this),this._handleFilter=e=>{_.default.synced()||this._syncIfNeeded();var t=_.default.filterShortcuts(e);t.length&&(0,m.logFilterEvent)(t.length),this.setState({query:e,results:t,active:!0,offset:0})},this.handleInactive=b((()=>{this.setState(C)}),this),this._handleSelect=b((()=>this.handleSelect(this.state.offset)),this),this.handleUp=b((()=>{var e=Math.max(this.state.offset-1,0);this.setOffset(e)}),this),this.handleDown=b((()=>{var e=this.state.results.length-1,t=Math.min(this.state.offset+1,e);this.setOffset(t)}),this),this._handleBackspace=()=>{var e=window.getSelection().toString();this._lastInsertedText&&e===this._lastInsertedText&&(0,m.logCancelEvent)()},this.handleEscape=()=>{this.setState(C)},this._syncIfNeeded=(0,s.default)((()=>{_.default.synced()||_.default.sync()}),1e3),this.renderItem=e=>{var{index:t,quickReply:a}=e;return n.default.createElement(v.default,{key:a.id,quickReply:a,query:this.state.query,selected:t===this.state.offset,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>this.handleSelect(t),onMouseEnter:()=>this.setOffset(t,!0)})}}componentDidMount(){var{plugin:e}=this.props,t=this._pluginCtx;e.registerHandler(t,d.default.ENTER,this._handleSelect),e.registerHandler(t,d.default.TAB,this._handleSelect),e.registerHandler(t,d.default.FILTER,this._handleFilter),e.registerHandler(t,d.default.INACTIVE,this.handleInactive),e.registerHandler(t,d.default.UP,this.handleUp),e.registerHandler(t,d.default.DOWN,this.handleDown),e.registerHandler(t,d.default.BACKSPACE,this._handleBackspace),this.props.listeners.add(_.default,"add remove change:shortcut",this.handleUpdate)}componentWillUnmount(){var{plugin:e}=this.props,t=this._pluginCtx;e.unregisterHandler(t,d.default.ENTER),e.unregisterHandler(t,d.default.TAB),e.unregisterHandler(t,d.default.FILTER),e.unregisterHandler(t,d.default.INACTIVE),e.unregisterHandler(t,d.default.UP),e.unregisterHandler(t,d.default.DOWN),e.unregisterHandler(t,d.default.BACKSPACE),this._syncIfNeeded.cancel()}setOffset(e,t=!1){e!==this.state.offset&&this.setState({offset:e},(()=>{!t&&this.list&&this.list.scrollIntoViewIfNeeded(e)}))}handleSelect(e){var t=this.state.results[e];t&&t.id&&(this._lastInsertedText=t.message,(0,m.logSelectEvent)(),this.props.plugin.handleSelect(t))}renderList(){var{results:e,query:t,offset:a}=this.state,r=e.map(((e,r)=>({height:52,itemKey:e.id,contentKey:`${t}${r===a?"-selected":""}`,index:r,quickReply:e})));return e.length?n.default.createElement(E.default,{displayName:"QuickReplySuggestions",escapable:!0,requestDismiss:this.handleEscape},n.default.createElement("div",{className:(0,l.default)(g.default.overlayContainer)},n.default.createElement(c.default,{className:g.default.resultsContainer,flatListControllers:[this.flatListController]},n.default.createElement(u.default,{ref:this.setRefList,data:r,flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem})))):null}render(){return n.default.createElement(S.default,{component:"div",className:g.default.positioningContainer,transitionName:"slide-up"},this.renderList())}}function b(e,t){return(a,r)=>!(!t.state.active||!t.state.results.length)&&((!a||!(0,h.default)(a))&&(e.call(t,a,r),!0))}y.displayName="Suggestions";var M=(0,p.default)(y);t.default=M},52811:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.isComposing)return!1;var a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;if(1!==t.rangeCount)return!1;var r=u.backwardsEmojiTextsTrie,i=e.data||"";if(!(r=r.get(i)))return!1;if(!t.getRangeAt(0).collapsed)return!1;var c=i,f=null,h=null;if((0,o.default)(a,t,((e,t,a)=>((0,s.default)(r,"Trie ptr somehow not set"),!(r=r.get(e))||(r.hasChildren()?void(0===t&&(c=a+c)):(c=a.slice(t)+c,(h=(0,u.default)(c))&&(f=c),!0))))),!f)return!1;var p=a.serializeTextBeforeCursor();if((0,l.isInsideCodeBlock)(p))return!1;(0,d.default)(t,f.length-1),a.replaceSelection(h||"");var{refInput:m}=a,_=(0,n.default)(m,n.Direction.BACKWARD);if(!_)return!0;return _.dataset.replacedEmojiText=f,!0}(e,a,t)};var s=i(a(41143)),l=a(58939),n=r(a(55396)),o=i(a(40343)),d=i(a(71698)),u=r(a(97844))},37282:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(8===e.keyCode)return function(e,t){if(t.isComposing)return!1;var a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;var{refInput:r}=a,s=(0,i.default)(r,i.Direction.BACKWARD);if(!s)return!1;if(l=s,!Boolean(l&&l.dataset&&l.dataset.replacedEmojiText))return!1;var l;t.modify("extend","backward","character"),t.modify("move","backward","character");var n=s.dataset.replacedEmojiText,o=s.parentNode;if(!o)return!1;o.replaceChild(document.createTextNode(n+" "),s);for(var d=n.length,u=0;u<d+1;u++)t.modify("extend","forward","character"),t.modify("move","forward","character");return!1}(0,a,t)}(0,t);return!1};var i=r(a(55396))},53057:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11009)),s=r(a(52811)),l=r(a(37282));class n extends i.default{constructor(...e){super(...e),this.handlers={onBeforeInput:s.default,onKeyDown:l.default}}}var o=new n;t.default=o},97844:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=n[e];a&&(t=i.default.getSkinToneBase(a)&&s.default.getVariant(a));return t||a},t.backwardsEmojiTextsTrie=void 0;var i=r(a(5318)),s=r(a(37491)),l=r(a(1699)),n={"(y)":"👍","(Y)":"👍","(n)":"👎","(N)":"👎",":-)":"🙂",":-(":"🙁",":-p":"😛",":-P":"😛",":-|":"😐",":-\\":"😕",":-D":"😀",":-*":"😘",":-o":"😮","<3":"❤️","^_^":"😁",">_<":"😆",";-)":"😉"};var o=Object.keys(n),d=l.default.fromBackwardsStrings(o);t.backwardsEmojiTextsTrie=d},17945:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(11009)),s=r(a(33766)),l=r(a(12249));class n extends i.default{constructor(...e){super(...e),this.handlers={onKeyDown(e){return!this.ctx.isComposing&&(!(" "!==e.key||!(0,l.default)(e))&&(!this.ctx.value.length&&(s.default.scrollMessages(),!0)))}}}}var o=new n;t.default=o},59397:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{children:t}=e;return i.default.createElement("div",{className:s.default.container}," ",t," ")};var i=r(a(67294)),s=r(a(12095))},94571:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{base:t,unicode:a,action:r}=e,i=(0,n.isBaseCoupleEmoji)(t),h=(i?(0,n.getPermutations)(f.SKIN_TONE_VARIATIONS.slice(1),2):f.SKIN_TONE_VARIATIONS.map((e=>[e]))).reduce(((e,a)=>{var r=n.default.getSkinToneVariant(t,a);return r?(e.push(r),e):e}),[]).filter((e=>n.default.isEmoji(e))).map(((e,t)=>s.default.createElement(l.default,{type:i?"emoji-grid":"emoji",key:e+t,a8n:"mi-emoji-variant",action:t=>r(t,a,e)},s.default.createElement(o.default,{text:e,formatters:u.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))));return i?s.default.createElement(d.default,{base:t,action:r,unicode:a},h):s.default.createElement(c.default,null,h)};var s=i(a(67294)),l=i(a(7970)),n=r(a(5318)),o=i(a(20923)),d=i(a(88506)),u=a(99375),c=i(a(59397)),f=a(41735)},83886:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,l.default)(s.pluginContext),n=(0,i.useRef)(a);n.current=a,(0,i.useEffect)((()=>{var a=r.current;return e.registerHandler(a,t,((...e)=>n.current(...e))),()=>e.unregisterHandler(a,t)}),[e,t,r])};var i=a(67294),s=a(11009),l=r(a(10172))},93227:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RoundTheme=void 0;var i=r(a(67154)),s=r(a(94184)),l=r(a(67294)),n=r(a(55847)),o=r(a(2381)),d=r(a(59373)),u=r(a(13085)),c=a(54302).Mirrored(["Default","Small","Large","Inverted"]);t.RoundTheme=c;var f=({large:e,small:t,inverted:a,theme:r,a8nText:f,label:h,onClick:p,onKeyDown:m,className:_,children:v,disabled:g})=>{var E=(0,s.default)(_,d.default.btn,{[d.default.large]:e||r===c.Large,[d.default.small]:t||r===c.Small,[d.default.inverted]:a||r===c.Inverted,[d.default.disabled]:g}),S=e=>{e.stopPropagation(),e.preventDefault()},[C,y]=(0,u.default)(p,{disabled:g}),b=m?e=>{(0,o.default)(e)&&(e.preventDefault(),m(e))}:y.onKeyPress;return l.default.createElement("div",(0,i.default)({},y,{"data-a8n":n.default.key(f),role:"button","aria-label":h,tabIndex:"0",className:E,onKeyDown:g?S:b,onMouseDown:S,ref:C}),v)};t.default=f},91303:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67154)),s=r(a(81109)),l=r(a(94184)),n=r(a(67294)),o=r(a(95919)),d=r(a(13085)),u=({children:e,side:t,ellipsify:a,onClick:r,"aria-label":u})=>{var c=(0,l.default)({[o.default.clickable]:r}),f=(0,l.default)(o.default.main,{[o.default.mainEllipsify]:a}),h=null!=t?n.default.createElement("div",{className:o.default.side},t):null,p={},[m,_]=(0,d.default)(r);return null!=r&&(p=(0,s.default)({ref:m},_)),n.default.createElement("div",(0,i.default)({className:c,"aria-label":u},p),n.default.createElement("div",{className:o.default.body},n.default.createElement("div",{className:f},e),h))};t.default=u},26802:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(22268)),l=({header:e})=>i.default.createElement("div",{className:s.default.container},e);t.default=l},83012:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(61171),l=i(a(21407));a(84726);var n=a(29617),o=r(a(47644));t.default=class{constructor(e,t,a,r,i=!1){this.componentName=e,this.name=t,this._isStrong=r,this.keys=a;var l=n.ProxyStates[t];l||(__LOG__(4,void 0,new Error,!0)`Unknown StateHOC concern type "${t}"`,SEND_LOGS("state-hoc-error")),this._proxyClass=l,this._limitedAccessProxyClass=function(e,t,a,r){var i={$ProxyState$ComponentName:{value:e},proxyBitMask:{value:(0,s.genBitMask)(t.prototype.mirrorMask,a)}},l=function(t){var a={enumerable:!0,get:function(){return this.$ProxyState$state.get(t)},set:function(){__LOG__(4,void 0,new Error)`READ ONLY: Cannot write to proxied property "${t}", created in <${e} />, it is not writable.`}};r||(a.set=function(e){this.$ProxyState$state.set(t,e)}),i[t]=a};for(var n of a)l(n);function o(e){t.call(this,e)}return o.prototype=Object.create(t.prototype,i),o.prototype.constructor=o,o}(e,l,a,i)}getModel(e){return e instanceof this._proxyClass?e.$ProxyState$state:e}getModelAndValidate(e){var t,a=e instanceof this._proxyClass?e.$ProxyState$state:e;return a?a instanceof l.default?a:(__LOG__(4,void 0,new Error,!0)`${this.componentName} given invalid object for ${this.name}: ${t=a,"string"==typeof t?t:t.toString?t.toString():"Invalid Object"}`,SEND_LOGS("state-hoc-error"),null):(o.default.mode===o.StreamMode.MAIN&&(__LOG__(4,void 0,new Error,!0)`${this.componentName} was not supplied the ${this.name} model with keys ${String(this.keys)}.`,SEND_LOGS("state-hoc-error")),null)}createProxy(e){return new this._limitedAccessProxyClass(e)}attachConcern(e,t,a){e.incObservers(!this._isStrong),e.mirror.addListener(a,t,this)}detachConcern(e,t){e.decObservers(),e.mirror.removeListener(t)}}},76056:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({animationFrames:e,signal:t,onFrameChange:a,shouldStop:i}){if(t.aborted)return Promise.reject(new r.AbortError);if(0===e.length)return Promise.resolve();var s=(new Date).getTime(),l=0,n=0,o=s,d=()=>{};return new Promise(((s,u)=>{var c=()=>{0!==l&&window.cancelAnimationFrame(l),u(new r.AbortError)};t.addEventListener("abort",c),d=()=>{t.removeEventListener("abort",c)};var f=()=>{var t=(new Date).getTime();if(t<o)l=window.requestAnimationFrame(f);else{var{duration:r,rgbaBuffer:d}=e[n];a(d),n=(n+1)%e.length,o=t+r,1===n&&i()?s():l=window.requestAnimationFrame(f)}};l=window.requestAnimationFrame(f)})).finally((()=>{d()}))};var r=a(58566)},38380:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(30206)),n=a(37470),o=r(a(98114));class d extends s.PureComponent{constructor(e){super(e),this.state={animationFramesInfo:null},(0,n.blobToArrayBuffer)(this.props.blob).then(o.default).then((e=>{this.setState({animationFramesInfo:e})})).catch((e=>{__LOG__(3)`AnimationCanvas error: ${e}`}))}render(){var{animationFramesInfo:e}=this.state;if(!e)return this.props.renderPreview();var{width:t,height:a,frames:r}=e;return s.default.createElement(l.default,{className:this.props.className,width:t,height:a,animationFrames:r,startAnimation:Boolean(this.props.loopAnimation||this.props.startAnimation),maxLoops:this.props.maxLoops,onClick:this.props.onClick})}}t.default=d,d.displayName="AnimationCanvas"},15224:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(63337)),l=r(a(67294)),n=i(a(17329)),o=i(a(62810)),d=a(54890),u=i(a(7456)),c=a(21928),f=(0,l.forwardRef)(((e,t)=>{var a=(0,l.useRef)(),r=(0,l.useRef)(),i=(0,l.useRef)(),f=(0,l.useRef)(),[h,{isIntersecting:p}]=(0,o.default)({root:null,rootMargin:"25px",threshold:.99}),[m,_]=(0,l.useState)(e.startAnimation),[v,g]=(0,l.useState)(!1),[E,S]=(0,c.useManualTimeout)((()=>{var e=i.current;null==e||e.refreshBlob(),_(!1),f.current=null})),C=()=>{var t=(0,s.default)(e.mediaData.singleLoopDuration,"props.mediaData.singleLoopDuration"),a=(Date.now()-(0,s.default)(f.current,"startedAtRef.current"))%t,r=e.mediaData.animationDuration-a;E(r)},y=()=>{S(),null==f.current&&(f.current=Date.now()),_(!0)};(0,d.useListener)(document,"visibilitychange",(()=>{var e="visible"===document.visibilityState;p&&e?(y(),C()):_(!1)})),(0,l.useEffect)((()=>{p?(y(),C()):null!=f.current&&C()}),[p]);var b=(0,u.default)(e.mediaData,"animatedAsNewMsg"),M=()=>{if(!v){var t=a.current,i=r.current;t&&i&&(t.width=i.naturalWidth/2,t.height=i.naturalHeight/2,t.getContext("2d").drawImage(i,0,0,t.width,t.height)),e.startAnimation&&(f.current=Date.now(),C(),b(!0)),g(!0)}};(0,l.useImperativeHandle)(t,(()=>({startAnimation:y})));var T=!v||m;return l.default.createElement("div",{className:e.className,onMouseEnter:y,onMouseLeave:()=>{null!=f.current&&C()},onClick:e.onClick,ref:h},l.default.createElement(n.default,{ref:i,mediaData:e.mediaData,placeholderRenderer:e.placeholderRenderer,downloadMedia:e.downloadMedia},(t=>l.default.createElement("img",{alt:e.label,className:e.className,style:{display:T?"block":"none"},draggable:"false",src:t,ref:r,onLoad:M}))),l.default.createElement("canvas",{className:e.className,style:{display:T?"none":"block"},draggable:"false",ref:a}))}));t.default=f},30206:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(58566),l=i(a(67294)),n=r(a(33364)),o=r(a(76056)),d=r(a(65481));class u extends l.PureComponent{constructor(...e){super(...e),this._abortController=new n.default,this._isAnimating=!1,this.state={rgbaBuffer:null},this._iterations=0,this._isFocused=!1,this._startAnimation=()=>{this._isAnimating||(this._isAnimating=!0,(0,o.default)({animationFrames:this.props.animationFrames,signal:this._abortController.signal,onFrameChange:e=>this.setState({rgbaBuffer:e}),shouldStop:()=>this._iterations>=this.props.maxLoops||(this._isFocused||this._iterations++,!1)}).catch((e=>{if(e.name!==s.ABORT_ERROR)throw e})).finally((()=>{this._isAnimating=!1})))},this._onMouseEnter=()=>{this.props.maxLoops!==1/0&&(this._isFocused=!0,this._iterations=1,this._startAnimation())},this._onMouseLeave=()=>{this._isFocused=!1}}componentDidMount(){this.props.startAnimation?this._startAnimation():this._renderFirstFrame()}_renderFirstFrame(){var{animationFrames:e}=this.props;0!==e.length&&this.setState({rgbaBuffer:e[0].rgbaBuffer})}componentWillUnmount(){this._abortController.abort()}render(){var{rgbaBuffer:e}=this.state;return e?l.default.createElement(d.default,{rgbaBuffer:e,className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}):null}}t.default=u,u.displayName="ControlledAnimationCanvas"},89886:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(58566),n=i(a(63337)),o=r(a(67294)),d=i(a(38380)),u=i(a(15224)),c=r(a(89393)),f=i(a(54776)),h=i(a(80162)),p=i(a(38146)),m=a(85063),_=i(a(89958)),v=i(a(7801)),g=i(a(46532)),E=i(a(65481)),S=i(a(10172)),C=i(a(95607)),y=i(a(83069));function b({className:e,loopAnimation:t,mediaData:a,startAnimation:r,renderPreview:i,downloadMedia:s,onClick:l,forwardRef:n,label:d}){return a.animationDuration>0&&!t?o.default.createElement(u.default,{className:e,mediaData:a,startAnimation:r,onClick:l,placeholderRenderer:i,downloadMedia:s,ref:n,label:d}):o.default.createElement(_.default,{mediaData:a,placeholderRenderer:i,downloadMedia:s},(t=>o.default.createElement("img",{className:e,draggable:"false",onClick:l,src:t,alt:d})))}function M({className:e,loopAnimation:t,mediaData:a,startAnimation:r,renderPreview:i,downloadMedia:s,onClick:l}){if(a.animationDuration>0){var u=t?1/0:a.animationDuration/(0,n.default)(a.singleLoopDuration,"mediaData.singleLoopDuration");return o.default.createElement(p.default,{mediaData:a,render:a=>o.default.createElement(d.default,{className:e,loopAnimation:t,maxLoops:u,blob:a,renderPreview:i,startAnimation:r,onClick:l}),renderPlaceholder:i,downloadMedia:s})}return a.rgbaBuffer?o.default.createElement(E.default,{className:e,height:a.rgbaHeight,onClick:l,rgbaBuffer:a.rgbaBuffer,width:a.rgbaWidth}):i()}var T=e=>{var t=(0,C.default)(e.mediaData,["animatedAsNewMsg","animationDuration","singleLoopDuration","mediaBlob","preview","renderableUrl","rgbaBuffer","rgbaHeight","rgbaWidth","emojis","mediaStage"]),a=(0,S.default)((()=>t.animatedAsNewMsg)).current,r=function(){var[e,t]=(0,o.useState)(c.getCachedWebpSupport),a=(0,y.default)();return(0,o.useEffect)((()=>{null==e&&(0,g.default)((0,c.default)(),a).then(t).catch((e=>{if(e.name!==l.ABORT_ERROR)throw e}))}),[]),e}(),i=(0,s.default)({[f.default.conversation]:"conversation"===e.theme,[f.default.quoted]:"quoted"===e.theme,[f.default.composeBoxQuoted]:"composeBoxQuoted"===e.theme,[f.default.stickerPanel]:"stickerPanel"===e.theme,[f.default.clickable]:Boolean(e.onClick)}),n=()=>{var a,r=t.preview,l=r&&r.url(),n=null===(a=t.emojis)||void 0===a?void 0:a.join(" "),d=n?h.default.t(37,{emojis:n}):h.default.t(38);return l?o.default.createElement("img",{className:i,draggable:"false",onClick:e.onClick,src:l,alt:d}):o.default.createElement(v.default,{className:(0,s.default)(f.default.placeholder,i)})};return o.default.createElement("span",{className:(0,s.default)({[f.default.showSticker]:t.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED})},(()=>{var s;if(null==r)return n();var l=null===(s=t.emojis)||void 0===s?void 0:s.join(" "),d=l?h.default.t(37,{emojis:l}):h.default.t(38),u=Boolean(e.animateOnView||e.isNewMsg&&!a),c=Boolean(e.loopAnimation);return r?o.default.createElement(b,{className:i,mediaData:t,loopAnimation:c,startAnimation:u,renderPreview:n,onClick:e.onClick,downloadMedia:e.downloadMedia,forwardRef:e.forwardRef,label:d}):o.default.createElement(M,{className:i,mediaData:t,loopAnimation:c,startAnimation:u,renderPreview:n,onClick:e.onClick,downloadMedia:e.downloadMedia,label:d})})())};t.default=T},7801:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{className:t}=e;return i.default.createElement(s.default,{className:t,name:"sticker-placeholder"})};var i=r(a(67294)),s=r(a(32885))},74512:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{disabled:t,onClick:a,type:r}=e,d=(0,i.default)(e,["disabled","onClick","type"]);return s.default.createElement(n.default,{xstyle:t&&o.disabled,disabled:t,onClick:a,type:r},s.default.createElement(l.default,d))};var i=r(a(6479));a(94118);var s=r(a(67294)),l=(r(a(56720)),r(a(32885))),n=r(a(32759)),o={disabled:{opacity:"d3y1k5mt"}}},5711:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextInputCustomStyleThemes=void 0,a(11975);var s=i(a(94184)),l=r(a(67294)),n=(i(a(56720)),a(44373)),o=i(a(67755)),d=i(a(91704)),u=a(68570),c=r(a(20923)),f=i(a(62886)),h=i(a(35001)),p=i(a(90225)),m=i(a(80162)),_=i(a(69507)),v=i(a(32885)),g=i(a(65690)),E=i(a(26144)),S=i(a(11918)),C=a(96769),y=i(a(32759)),b=i(a(4328)),M=(0,p.default)({groupInfoName:null,desaturated:null,noErrorInfo:null});t.TextInputCustomStyleThemes=M;var T={iconMain:{position:"lk2g6yzq",top:"e89um5sf",right:"expno4vk",color:"tqnj7okb",cursor:"obqxa8fb",":focus":{boxShadow:"knb2pfdb"}},emojiBtn:{marginEnd:"a4utm3vb",marginStart:"h85144dm",color:"tqnj7okb",cursor:"obqxa8fb",":focus":{boxShadow:"knb2pfdb"}}};class I extends l.Component{constructor(...e){super(...e),this.state={active:this.props.startActive||!1,locked:!this.props.startActive&&!!this.props.lockable,emojiPicker:null},this.emojiInputComponent=(0,o.default)(),this._refInputLine=(0,l.createRef)(),this._refEmojiPanel=(0,l.createRef)(),this._refEditButton=(0,l.createRef)(),this.isSkinTonePickerOpen=!1,this.handleEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=l.default.createElement(d.default,{onEmoji:this.handleEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:n.DirY.TOP,type:"emoji_picker",anchor:e.target}}),this.restoreFocus()},this.handleEmojiPickerClose=()=>{this.setState({emojiPicker:null})},this.handleRestoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this.handleEmoji=e=>{var t;null===(t=this._refInputLine.current)||void 0===t||t.replaceSelection(e)},this.handleEnter=e=>{this.props.lockable&&this._handleSaveAndLock(),this.props.onEnter&&!this.props.multiline&&(e.persist(),this.props.onEnter(e))},this.handleChange=e=>{this.props.onChange&&this.props.onChange(e)},this.restoreFocus=()=>{var e;null===(e=this._refInputLine.current)||void 0===e||e.focus()},this.handleFocus=e=>{var t,a=e.relatedTarget;a instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(a)&&(null===(t=this._refInputLine.current)||void 0===t||t.focus())},this.handleBlur=e=>{this.isSkinTonePickerOpen||(this.state.active&&this.setState({active:!1}),this.props.onBlur&&this.props.onBlur(e))},this.handleFocus=e=>{e.stopPropagation(),this.state.active||this.setState({active:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this._handleUnlock=()=>{this.props.onBeginEdit&&this.props.onBeginEdit(),this.setState({locked:!1})},this._handleSaveAndLock=()=>{var e=!(!this.props.lowProfile&&this.props.error);this.props.validate&&e&&(e=this.props.validate(this.props.value)),e?(this.props.onSave&&this.props.onSave(),this.setState({locked:!0})):this.props.onError&&this.props.onError()},this.handleCancel=()=>{this.props.onCancel&&this.props.onCancel(),this.setState({locked:!0})},this._showEmptyValuePlaceholder=()=>{var{value:e}=this.props;return(!e||""===e)&&this.props.emptyValuePlaceholder&&this.state.locked},this.isEditing=()=>this.props.editable&&!this.state.locked,this._renderEmojiText=()=>{var{renderEmojiTextInLockMode:e,value:t}=this.props;if(e&&t){var{textLimit:a,readMoreText:r,onReadMore:i,formatters:s}=e;return l.default.createElement("div",{className:g.default.emojiText},l.default.createElement(c.default,{text:t,selectable:!0,emojiSize:c.EMOJI_SIZE.SMALL,textLimit:a,formatters:s}),(0,C.numCodepoints)(t)>a&&l.default.createElement("span",{className:g.default.more,role:"button",onClick:i},` ${r}`))}},this.handleEmojiFocus=()=>{this.state.emojiPicker&&this.handleRestoreEmojiPickerFocus()}}componentDidMount(){this.props.focusOnMount&&this.restoreFocus()}componentDidUpdate(e,t){if(t.locked||!e.editable||this.props.editable||this.handleCancel(),this._refEditButton){var a=!t.locked&&this.state.locked,r=e.pending&&!this.props.pending;(a||r)&&f.default.focus(this._refEditButton.current)}var i=this._refInputLine.current;this.isEditing()&&!this.props.managed||(null==i?void 0:i.value)===this.props.value||null==i||i.reset(this.props.value||"")}render(){var e,t,a=this.props.maxLength||I.defaultProps.maxLength,r=this.isEditing(),i=r&&!!this.props.error&&!this.props.lowProfile,{customStyleThemes:n=[]}=this.props,o={container:(0,s.default)(g.default.textInput,n&&n.map((e=>g.default[e])),{[g.default.noPlaceholder]:!this.props.placeholder,[g.default.invite]:"v4-invite-caption"===this.props.theme,[g.default.active]:r,[g.default.small]:"small"===this.props.theme,[g.default.inputLarge]:"large"===this.props.theme}),label:(0,s.default)(g.default.labelText,{[g.default.float]:!!this.props.value,[g.default.hideFloatingLabel]:!!this.props.hideFloatingLabel}),inputWrapper:(0,s.default)(g.default.wrapper,{[g.default.textError]:i,[g.default.invite]:"v4-invite-caption"===this.props.theme,[g.default.textActive]:this.state.active,[g.default.locked]:this.state.locked}),infoWrapper:(0,s.default)(g.default.infoStrip,{[g.default.textError]:i,[g.default.textActive]:this.state.active})};if(this.props.lockable){if(this.props.pending)t=l.default.createElement("div",{className:(0,s.default)(g.default.iconSpinner,g.default.iconMain),key:"spinner"},l.default.createElement(_.default,{size:18,stroke:6,color:"highlight"}));else if(this.state.locked)if(this.props.editable){var d;t=l.default.createElement("button",{className:g.default.iconMain,onClick:this._handleUnlock,key:"btn-edit",title:m.default.t(7,{fieldName:null!==(d=this.props.fieldName)&&void 0!==d?d:""}),ref:this._refEditButton},l.default.createElement(v.default,{className:g.default.icon,name:"pencil",directional:!0}))}else this.props.editRestrictionInfo&&!this.props.editable&&(t=l.default.createElement("div",{className:g.default.iconMain,onClick:this.props.editRestrictionInfo,key:"btn-info"},l.default.createElement(v.default,{className:g.default.icon,name:"info"})));else t=l.default.createElement(y.default,{xstyle:T.iconMain,onClick:this._handleSaveAndLock,key:"btn-done",title:m.default.t(559)},l.default.createElement(v.default,{className:g.default.icon,name:"checkmark"}));e=this.props.lockable?l.default.createElement(b.default,{className:g.default.iconMainContainer,transitionName:"pop"},t):null}var c,f=r&&this.props.supportsEmoji?l.default.createElement(y.default,{xstyle:T.emojiBtn,onClick:this.handleEmojiPicker,key:"emoji-btn",onFocus:this.handleEmojiFocus,title:m.default.t(25)},l.default.createElement(v.default,{className:g.default.icon,name:"emoji-input"})):null;if(this.props.showRemaining){var p=(0,C.numCodepoints)(this.props.value||"");c=a-p<50&&r?l.default.createElement("div",{className:(0,s.default)(g.default.charCounter),key:"counter"},m.default.n(a-p)):null}var M,P,A=this.props.supportsEmoji||this.props.showRemaining?l.default.createElement(b.default,{className:g.default.iconsEditContainer,transitionName:"pop"},c,f):null,N=this.props.lowProfile?null:l.default.createElement("div",{className:o.infoWrapper},l.default.createElement("div",{className:g.default.errorText},i?this.props.error:null));this.props.lockable&&!this.state.locked?(this.state.emojiPicker&&(P=l.default.createElement(E.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.handleEmojiPickerClose,requestFocus:this.handleRestoreEmojiPickerFocus},l.default.createElement(S.default,{contextMenu:this.state.emojiPicker}))),M=l.default.createElement(E.default,{displayName:"TextInput",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.handleCancel},l.default.createElement("div",null,P))):!this.props.lockable&&this.state.emojiPicker&&(M=l.default.createElement(E.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.handleEmojiPickerClose,requestFocus:this.handleRestoreEmojiPickerFocus},l.default.createElement(S.default,{contextMenu:this.state.emojiPicker})));var O,D,w=this.props.editable&&!this.state.locked,{emptyValuePlaceholder:R,renderEmojiTextInLockMode:k}=this.props,L=this.emojiInputComponent,x=w||!k,F=x?l.default.createElement(L,{a8n:this.props.a8n,ref:this._refInputLine,initialValue:this.props.value,theme:this.props.theme||"default",multiline:this.props.multiline,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onEnter:this.handleEnter,onFiles:this.props.onFiles,spellCheck:this.props.spellCheck,maxLength:this.props.maxLength,readOnly:!w,title:this.props.title,placeholder:this.props.inputPlaceholder}):this._renderEmojiText();return this.props.placeholder&&(O=(!this.props.value||!this.props.hideFloatingLabel)&&l.default.createElement("span",{className:o.label},this.props.placeholder),D=l.default.createElement("div",{className:g.default.spacer})),l.default.createElement(h.default,{className:o.container,onFocus:this.handleFocus},O,D,l.default.createElement("div",{className:o.inputWrapper},F,this._showEmptyValuePlaceholder()&&l.default.createElement("div",{className:g.default.emptyValPlaceholder},R),A,e),x&&l.default.createElement(L.EmojiSuggestions,{theme:u.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.handleSkinTonePicker}),N,M)}}t.default=I,I.defaultProps={maxLength:25,editable:!0},I.displayName="TextInput"},99769:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TooltipAnchor=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(55847)),n=r(a(69275)),o=a(54302).Mirrored(["Left","Right","Top","Bottom"]);function d(e){switch(e){case o.Left:return n.default.left;case o.Right:return n.default.right;case o.Top:return n.default.top;case o.Bottom:return n.default.bottom}}t.TooltipAnchor=o;var u=({children:e,anchor:t=o.Right})=>s.default.createElement("div",{"data-a8n":l.default.key("tooltip"),className:(0,i.default)(n.default.tooltip,d(t))},e);t.default=u},11918:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(81109)),s=a(67294),l=r(a(33766)),n=r(a(83288));class o extends s.Component{componentDidMount(){var e=(0,i.default)((0,i.default)({},this.props.contextMenu),{},{uim:this.props.uim});l.default.openContextMenu(e,(e=>{this.element=e}))}componentWillUnmount(){l.default.closeContextMenu(this.props.uim)}getElement(){return this.element}render(){return null}}o.displayName="UIEMenu";var d=(0,n.default)(o);t.default=d},30882:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(81109)),s=a(67294),l=r(a(33766)),n=r(a(83288));class o extends s.Component{componentDidMount(){var e=(0,i.default)((0,i.default)({},this.props.tooltip),{},{uim:this.props.uim});l.default.openTooltip(e,(e=>{this.element=e}))}componentWillUnmount(){l.default.closeTooltip(this.props.uim)}getElement(){return this.element}render(){return null}}o.displayName="UIETooltip";var d=(0,n.default)(o);t.default=d},32759:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{a8nText:t,children:a,disabled:r,onClick:c,title:f,type:h="button",onFocus:p,xstyle:m}=e,_=(0,s.default)(e,["a8nText","children","disabled","onClick","title","type","onFocus","xstyle"]),[v,g]=(0,d.default)(),E={};null!=_["aria-label"]&&(E["aria-label"]=_["aria-label"]);null!=_["aria-pressed"]&&(E["aria-pressed"]=_["aria-pressed"]);return l.default.createElement("button",(0,i.default)({className:(0,n.default)(u.button,g&&u.focused,r&&u.disabled,m),"data-a8n":o.default.key(t),disabled:!0===r,onClick:c,onFocus:p,ref:v,title:f,type:h},E),a)};var i=r(a(67154)),s=r(a(6479));a(12340);var l=r(a(67294)),n=r(a(56720)),o=r(a(55847)),d=r(a(290)),u={button:{paddingTop:"oesqtkod",paddingEnd:"tglscgxe",paddingBottom:"lb5xnmae",paddingStart:"mykqfe20",fontFamily:"lgwvuxa5",fontSize:"lnlcywsa",color:"tqnj7okb",cursor:"obqxa8fb",backgroundColor:"gk1cvn7d",borderTop:"cv126kjk",borderEnd:"suefdsw4",borderBottom:"hmfg95j9",borderStart:"fblr85z4"},focused:{borderTopStartRadius:"g0qi8qnk",borderTopEndRadius:"s1xalprx",borderBottomEndRadius:"ksar0eoz",borderBottomStartRadius:"pc0pl96h",boxShadow:"fg7321f0"},disabled:{cursor:"co8e5q5b"}}},75919:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(83904)),n=r(a(20923)),o=r(a(77188)),d=r(a(80162)),u=a(58793),c=r(a(72765)),f=r(a(32885)),h=r(a(60299));class p extends s.PureComponent{render(){var e,t,a=d.default.t(556),r=d.default.t(1566),{contact:i,presence:c}=this.props;return(e="list"===this.props.location||"info"===this.props.location?c.getUserSubtitleText():c.withholdDisplayStage===u.WithholdDisplayStage.Info?a:c.withholdDisplayStage===u.WithholdDisplayStage.Business?r:c.getUserSubtitleText()||(c.forceDisplay?"":a))&&(t=s.default.createElement(l.default,{text:e,location:this.props.location})),"title"===this.props.location&&o.default.supportsFeature(o.default.F.VNAME_V_2)&&e!==a&&e!==r&&this.props.showBusinessCheckmark?s.default.createElement("div",{className:h.default.wrapper},s.default.createElement(n.default,{text:i.verifiedName,className:h.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),s.default.createElement("div",{className:h.default.icon},s.default.createElement(f.default,{name:"psa-verified"})),t&&s.default.createElement("span",{className:h.default.divider},"·"),t):t||null}}p.CONCERNS={contact:["name","verifiedName"],presence:["withholdDisplayStage","forceDisplay","hasData"],chatstate:["type","deny","t"]},p.displayName="UserSubtitle";var m=(0,c.default)(p,p.CONCERNS);t.default=m},63293:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(80896)),d=i(a(82796));class u extends l.PureComponent{constructor(...e){super(...e),this._videoRef=null,this._onPlayTriggered=!1,this.setRefVideo=e=>{this._videoRef&&this.props.listeners.remove(this._videoRef,"playing",this.onPlay),this._videoRef=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:this.props.src&&(e.src=this.props.src),this.props.listeners.add(e,"playing",this.onPlay),this.props.autoPlay&&e.play())},this.onPlay=()=>{var e=this._videoRef;e&&(e.videoHeight&&e.videoWidth||this._onPlayTriggered||(this._onPlayTriggered=!0,e.pause(),e.play(),__LOG__(4,void 0,new Error,!0)`Neither the height nor the width of video should have zero value`,SEND_LOGS("non-zero height and width")),e.videoHeight&&e.videoWidth&&this.props.onPlay&&(this.props.onPlay(e),this._onPlayTriggered=!1),this.props.muted||n.default.mediaPlaying(this))},this.onOtherPlaying=e=>{e!==this&&this._videoRef&&this._videoRef.pause()},this.onLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}componentDidMount(){this.props.controls&&this.props.listeners.add(n.default,"mediaPlaying",this.onOtherPlaying)}underlyingVideo(){return this._videoRef}play(){var e=this._videoRef;e&&e.paused&&e.play()}pauseAndReset(){var e=this._videoRef;e&&(e.currentTime=0,e.paused||e.pause())}getDuration(){return null==this._videoRef?null:this._videoRef.duration}render(){var e=this.props;return l.default.createElement("video",{ref:this.setRefVideo,className:(0,s.default)(d.default.video,e.className),muted:e.muted,controls:e.controls,controlsList:e.controlsList,width:e.width,height:e.height,loop:e.loop,onClick:e.onClick,onEnded:e.onEnded,onLoadedMetadata:this.onLoadedMetadata,style:e.style},e.children)}}u.displayName="Video";var c=(0,o.default)(u);t.default=class extends c{pauseAndReset(){return this.getComponent().pauseAndReset()}underlyingVideo(){return this.getComponent().underlyingVideo()}play(){return this.getComponent().play()}getDuration(){return this.getComponent().getDuration()}}},25132:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PlayerState=void 0;var s=i(a(81109)),l=i(a(18446)),n=r(a(67294)),o=i(a(11062));function d(e){return(0,s.default)((0,s.default)({},e),{},{playerVars:(0,s.default)((0,s.default)({},e.playerVars),{},{autoplay:0,start:0,end:0})})}var u={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};t.PlayerState=u;class c extends n.Component{constructor(...e){super(...e),this.listeners=[],this.handlePlayerReady=e=>this.props.onReady(e),this.handlePlayerError=e=>this.props.onError(e),this.handlePlayerStateChange=e=>{switch(this.props.onStateChange(e),e.data){case u.ENDED:this.props.onEnd(e);break;case u.PLAYING:this.props.onPlay(e);break;case u.PAUSED:this.props.onPause(e)}},this.handlePlayerPlaybackRateChange=e=>this.props.onPlaybackRateChange(e),this.handlePlayerPlaybackQualityChange=e=>this.props.onPlaybackQualityChange(e),this.createPlayer=()=>{var e=(0,s.default)((0,s.default)({},this.props.opts),{},{videoId:this.props.videoId});this.internalPlayer=(0,o.default)(this.container,e),this.listeners.push(this.internalPlayer.on("ready",this.handlePlayerReady),this.internalPlayer.on("error",this.handlePlayerError),this.internalPlayer.on("stateChange",this.handlePlayerStateChange),this.internalPlayer.on("playbackRateChange",this.handlePlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.handlePlayerPlaybackQualityChange))},this.resetPlayer=()=>this.internalPlayer.destroy().then(this.createPlayer),this.updatePlayer=()=>{var e=this.internalPlayer.getIframe();this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.className?e.setAttribute("class",this.props.className):e.removeAttribute("class")},this.updateVideo=()=>{if(null!=this.props.videoId){var e,t,a=!1;"playerVars"in this.props.opts&&(a=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(e=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(t=this.props.opts.playerVars.end));var r={videoId:this.props.videoId,startSeconds:e,endSeconds:t};a?this.internalPlayer.loadVideoById(r):this.internalPlayer.cueVideoById(r)}else this.internalPlayer.stopVideo()},this.refContainer=e=>{this.container=e}}componentDidMount(){this.createPlayer()}componentDidUpdate(e){(function(e,t){return e.id===t.id||e.className===t.className})(e,this.props)&&this.updatePlayer(),function(e,t){return!(0,l.default)(d(e.opts),d(t.opts))}(e,this.props)&&this.resetPlayer(),function(e,t){if(e.videoId!==t.videoId)return!0;var a=e.opts.playerVars||{},r=t.opts.playerVars||{};return a.start!==r.start||a.end!==r.end}(e,this.props)&&this.updateVideo()}componentWillUnmount(){this.listeners.forEach((e=>{this.internalPlayer.off(e)})),this.internalPlayer.destroy()}render(){return n.default.createElement("span",{className:this.props.containerClassName},n.default.createElement("div",{id:this.props.id,className:this.props.className,ref:this.refContainer}))}}c.defaultProps={id:null,className:null,opts:{playerVars:{}},containerClassName:"",onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},c.displayName="YouTube";var f=c;t.default=f},41850:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,c.default)(e.mute,["isMuted"]);var t=(0,c.default)(e.chat,["id"]),a=(0,c.default)(e.groupMetadata,["participants"]),r=e=>{var t=a.participants.get(e.id);return!(!t||!t.isAdmin)},f=e=>{(0,o.findChat)(e).then((e=>{t.quotedMsgAdminGroupJid=t.id,l.default.openChatBottom(e)}))},h=e=>{f(e.id),l.default.closeModal()},p=i.default.createElement("span",{role:"button",onClick:()=>{var e=a.participants.getAdmins();1!==e.length?l.default.openModal(i.default.createElement(n.default,{title:d.default.t(1114),filter:r,onCancel:()=>l.default.closeModal(),onSelect:h})):f(e[0].id)},className:s.default.adminBtn},d.default.t(235));return i.default.createElement(u.default,{id:234,params:{admins:p}})};var i=r(a(67294)),s=r(a(99041)),l=r(a(33766)),n=r(a(58738)),o=a(77824),d=r(a(80162)),u=r(a(41849)),c=r(a(95607))},81578:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.onChangeNumberNotificationClick=g,t.default=function(e){var t=(0,m.default)(e.chat,["changeNumberOldJid","changeNumberNewJid","id","showChangeNumberNotification"]),{changeNumberOldJid:a,changeNumberNewJid:r,id:i}=t,d=void 0===a&&void 0!==r,u=void 0!==a&&void 0===r,E=(0,l.useMemo)((()=>{var e=a||i,t=c.default.get(e),r=t&&t.isMyContact?t.formattedName:(0,v.default)(e);return u?h.default.t(519,{name:r}):h.default.t(520,{name:r})}),[a,i,u]),S=null;if(t.showChangeNumberNotification){var C=d?l.default.createElement("div",{className:o.default.messageNewNumberButton},l.default.createElement(n.default,{onClick:()=>{var{changeNumberNewJid:e}=t,a=t.id;g((0,s.default)(e,"changeNumberNewJid"),a)},type:"plain-white",nowrap:!0},h.default.t(518))):null;S=l.default.createElement(f.default,{onClose:()=>{t.sendDismissChangeNumber()}},l.default.createElement("div",{className:o.default.container},l.default.createElement(p.TextSpan,{theme:"plain",className:o.default.text},E),C))}return l.default.createElement(_.default,{transitionName:"butterbar"},S)};var s=i(a(63337)),l=r(a(67294)),n=i(a(62685)),o=i(a(70744)),d=i(a(74798)),u=i(a(33766)),c=i(a(62899)),f=i(a(64768)),h=i(a(80162)),p=a(38245),m=i(a(95607)),_=i(a(4328)),v=i(a(8745));function g(e,t){var a=d.default.gadd(e);a.changeNumberOldJid||(a.changeNumberOldJid=t),a.changeNumberNewJid=void 0,u.default.openChatFromUnread(a).then((e=>{e&&u.default.focusChatTextInput(a)}))}},74213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a},t.setHasText=function(e){a=e};var a=!1},6291:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(48926)),l=i(a(81109)),n=i(a(94184)),o=a(24788),d=a(78840),u=i(a(63337)),c=r(a(67294)),f=i(a(55847)),h=i(a(33364)),p=i(a(54578)),m=i(a(18199)),_=i(a(85012)),v=i(a(27809)),g=a(16221),E=i(a(33766)),S=a(58939),C=i(a(17874)),y=i(a(54354)),b=i(a(51115)),M=i(a(75444)),T=i(a(68270)),I=i(a(68609)),P=i(a(38414)),A=a(91591),N=i(a(31817)),O=a(54438),D=r(a(12536)),w=i(a(86324)),R=a(37470),k=i(a(9908)),L=a(26226),x=i(a(14614)),F=i(a(77188)),B=a(34605),G=a(74213),U=i(a(35001)),j=r(a(56898)),V=i(a(33492)),H=i(a(80162)),W=i(a(29700)),Y=i(a(76076)),K=r(a(66802)),q=i(a(80896)),z=a(13162),$=i(a(20249)),Q=i(a(72462)),X=i(a(80177)),J=i(a(48336)),Z=i(a(16479)),ee=a(85830),te=a(44280),ae=i(a(89875)),re=i(a(46613)),ie=i(a(71533)),se=a(93385),le=i(a(58667)),ne=i(a(49775)),oe=i(a(77535)),de=a(62738),ue=i(a(42529)),ce=a(59094),fe=i(a(43232)),he=i(a(32088)),pe=i(a(72765)),me=a(6578),_e=i(a(32885)),ve=i(a(47809)),ge=r(a(48847)),Ee=i(a(26144)),Se=i(a(66454)),Ce=i(a(97439)),ye=a(54890),be=i(a(14674)),Me=/^https?:\/\/media\.giphy\.com\/media\/([a-zA-Z0-9]+)/,Te=parseInt(V.default["-overlay-border-left"].replace(/px$/,""),10);class Ie extends c.PureComponent{constructor(e){var t;super(e),t=this,this._height=0,this._pendingLinkPreviewPromises=[],this._linkPreviewAbortControllers=[],this._pasteTriggeredOnChange=!1,this._wasCleared=!1,this._refUie=(0,c.createRef)(),this._refContainer=(0,c.createRef)(),this._refComposeBlock=(0,c.createRef)(),this._refInputHotkey=(0,c.createRef)(),this._refComposeBoxInput=(0,c.createRef)(),this._refPanels=(0,c.createRef)(),this._refPttComposer=c.default.createRef(),this._dismissVcardPanel=()=>{(0,me.unproxy)(this.props.chat).dismissVcard()},this._saveComposeContent=()=>{this.props.chat.setComposeContents({text:this._text,selection:this._selection,omittedURL:this._omittedURL,ctwaContextLinkData:this.state.ctwaContextLinkData,ctwaContext:this.state.ctwaContextData})},this._onTextSizeChange=e=>{this.setState({textsize:e})},this._pasteEmojiInput=e=>{if(" "===e&&!this._hasText())return E.default.scrollMessages();var t=this._refComposeBoxInput.current;null!=t&&(t.focus(!0),t.replaceSelection(e))},this._handleRoutedPaste=e=>{var t=this._refComposeBoxInput.current;null!=t&&(t.focus(!0),t.onPaste(e))},this._onMaxPasteExceeded=()=>{E.default.openModal(c.default.createElement(b.default,{title:H.default.t(1136),onOK:()=>{E.default.closeModal()},okText:H.default.t(1941)},H.default.t(1135)))},this._restoreFocus=()=>{var e;null===(e=this._refComposeBoxInput.current)||void 0===e||e.focus()},this._clearLinkPreview=()=>{this._preview=null,this._omitLinkPreview()},this._cancelPendingLinkPreviews=()=>{this._pendingLinkPreviewPromises.forEach((e=>e.cancel())),this._pendingLinkPreviewPromises=[],this._linkPreviewAbortControllers.forEach((e=>e.abort())),this._linkPreviewAbortControllers=[],!0===this.state.isLoadingLinkPreview&&this.setState({isLoadingLinkPreview:!1})},this._omitLinkPreview=(e=!1)=>{!0!==e&&this.state.linkPreview&&(this._omittedURL=this._preview,this.setState({linkPreview:null}))},this._omitQuotedPreview=(e=!1)=>{!0!==e&&(this.props.chat.composeQuotedMsg=null)},this._omitQuotedMsgAdminGroupNamePreview=(e=!1)=>{!0!==e&&(this.props.chat.quotedMsgAdminGroupJid=null)},this._findFirstWebLink=()=>{var e=(0,S.removeCodeBlocks)(this._text);return K.findLinks(e,!0)[0]},this._uploadHQPreview=e=>{var{thumbnailHQ:t}=e.data;if(!F.default.supportsFeature(F.default.F.HIGH_QUALITY_LINK_PREVIEWS)||!fe.default.webUploadLinkThumbMmsEnabled||!t)return Promise.resolve();var a=new h.default;return this._linkPreviewAbortControllers.push(a),X.default.createFromBase64Jpeg(t).cancellable().then((e=>(0,Se.default)({thumbnail:e,mediaType:$.default.THUMBNAIL_LINK,mediaKeyInfo:(0,oe.default)(),uploadOrigin:(0,z.getUploadOriginForChat)(this.props.chat),forwardedFromWeb:!1,signal:a.signal,timeout:M.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}))).then((t=>{var a=t.mediaEntry;if(a){var r={mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp,thumbnailDirectPath:a.directPath,thumbnailSha256:t.filehash,thumbnailEncSha256:a.encFilehash};if(this.state.linkPreview&&this.state.linkPreview.url===e.url){var i=(0,l.default)((0,l.default)({},e),{},{data:(0,l.default)((0,l.default)({},e.data),r)});this.setState({linkPreview:i})}}})).catch((0,o.filteredCatch)(Promise.CancellationError,(()=>{}))).catch((()=>{__LOG__(2)`Full preview upload has failed: `}))},this._scanForLinksTimer=new d.ShiftTimer((()=>{if(this.state.hasText&&!this.state.ctwaContextLinkData){var e=this._findFirstWebLink();if(e){var t=e.url;if(!this._preview||this._preview!==t){this._preview=t,this._omittedURL=null;var a=(0,Y.default)(t).cancellable().then((e=>{if(e&&this._preview&&this._preview===e.url&&e.data&&(e.data.title||e.data.description))return this.setState({linkPreview:e}),this._uploadHQPreview(e)}));this._pendingLinkPreviewPromises.push(a),a.catch((0,o.filteredCatch)([D.Unmount,O.WebdDrop,Promise.CancellationError],(()=>{})))}}else this._clearLinkPreview()}else this._clearLinkPreview()})),this._onInputFocus=()=>{this._indicateFocus(),this._addEmojisToTouchBar()},this._onInputBlur=()=>{this._removeEmojisFromTouchBar()},this._onVoiceRecordingSent=()=>{this._omitCtwa()},this._setChatCtwaContextLinkData=e=>{this.setState({ctwaContextLinkData:e,ctwaContextData:null},(()=>{this._updateCtwaContextState(e)}))},this._omitCtwa=()=>{this.setState({ctwaContextLinkData:null,ctwaContextData:null},(()=>{this._saveComposeContent(),this._scanForLinksTimer.onOrBefore(1)}))},this._indicateFocus=()=>{var e,t;null===(e=this._refUie.current)||void 0===e||e.activate(),k.default.maybeIndicateFocus(this._refInputHotkey.current,V.default.focusAnimation),null===(t=this._refComposeBoxInput.current)||void 0===t||t.focus(!1)},this._addEmojisToTouchBar=()=>{},this._removeEmojisFromTouchBar=()=>{},this._onPageUpDown=e=>{this.props.onPageUpDown&&(e.stopPropagation(),this.props.onPageUpDown(e),e.persist(),this._restoreFocusTimer.debounce(0))},this._restoreFocusTimer=new d.ShiftTimer((()=>{var e;null===(e=this._refComposeBoxInput.current)||void 0===e||e.focus(!1)})),this._handleEmoji=e=>{var t;null===(t=this._refComposeBoxInput.current)||void 0===t||t.replaceSelection(e)},this._handleGif=(e,t,a)=>{var r=(0,w.default)(e,{headers:{Accept:"video/mp4"}}).then((e=>{if(!e.ok)throw __LOG__(3)`failed loading gif (status: ${e.status})`,new D.MediaFileFailedLoad;return e.blob()})).then((e=>j.generateVideoThumbsAndDuration({file:e,maxDimensions:[M.default.IMG_THUMB_MAX_EDGE],debugHint:"handleGif"}).then((({thumbs:[r],duration:i})=>({file:e,filename:t,mimetype:e.type,isGif:!0,gifAttribution:a,fullPreview:window.URL.createObjectURL(e),fullPreviewSize:{width:r.fullWidth,height:r.fullHeight},preview:Ce.default.parseDataURL(r.url).data,duration:i})))));return this.saveComposeContentDebounced.flush(),E.default.attachMediaDrawer({chat:this.props.chat,attachments:[r],initCaption:this.getCurrentComposeContent(),fileOrigin:Q.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_GIF_INAPP,onComplete:(e,t)=>{this.updateTextAfterMediaDrawerClose(e,!!t),e&&this._closeEmojiPanel()}}),r.catch((()=>{})),r},this._handlePanelsDisplayCache=e=>{this._panelsDisplayCache=e},this._handlePanelsGif=(e,t)=>{this._handleGif(e,e,t)},this._handlePanelsSticker=(e,t)=>{e.sendToChat((0,me.unproxy)(this.props.chat),t),this._omitCtwa()},this._handlePanelsFocusRelease=()=>{k.default.shouldIndicateFocus(),this._restoreFocus()},this._closeEmojiPanel=()=>{this._setSelectedPanelId(null),this._restoreFocus()},this._onPTTRecState=e=>{this.setState({recording:e})},this._preventBlur=e=>{var t,a,{target:r}=e,i=null===(t=this._refComposeBoxInput.current)||void 0===t?void 0:t.getRefInput(),s=(0,u.default)(this._refContainer.current,"this._refContainer.current");do{if(r===i)return}while(r!==s&&r instanceof HTMLElement&&(r=r.parentNode));Ne(e),null===(a=this._refComposeBoxInput.current)||void 0===a||a.focus(!1)},this._onChange=e=>{var t=(0,u.default)(this._refComposeBlock.current,"this._refComposeBlock.current").clientHeight,a=t-this._height;a&&this.props.onComposeHeightChange({input:a},!1),this._height=t;var r=this._hasText();this._text=e||"",""===e&&(this._wasCleared=!0);var i=this._hasText();i!==r&&this.setState({hasText:i}),i?(this.props.chat.presence.subscribe().catch((0,o.filteredCatch)(O.WebdDrop,(()=>{}))),(0,te.markComposing)(this.props.chat),(0,N.default)(this.props.chat)):(0,te.markPaused)(this.props.chat);var s=this._findFirstWebLink();(!s&&this._preview||s&&s.url!==this._preview)&&this._clearLinkPreview(),this._pasteTriggeredOnChange?this._scanForLinksTimer.onOrBefore(1):this._scanForLinksTimer.debounce(700),this._pasteTriggeredOnChange=!1,this.saveComposeContentDebounced()},this._startRecording=(0,s.default)((function*(){var e=(0,u.default)(t._refPttComposer.current,"_this._refPttComposer.current");(yield e.start())&&t.setState({pttComposerActive:!0})})),this._renderSendButton=()=>{var e=x.default&&window.AudioContext,{hasText:t}=this.state,a=!t&&e;return a&&!fe.default.pttDraftEnabled?c.default.createElement(re.default,{key:"ptt",chat:(0,me.unproxy)(this.props.chat),onRecState:this._onPTTRecState,onRecordingSent:this._onVoiceRecordingSent}):a?c.default.createElement(ie.default,{disabled:this.state.pttComposerActive,onConfirm:()=>{this._startRecording()}}):c.default.createElement("button",{"data-a8n":f.default.key("compose-btn-send"),className:V.default.btnSend,onClick:this._onSendText,disabled:!t},c.default.createElement(_e.default,{name:"send",directional:!0}))},this._renderPopupPanel=()=>{var e;if(this.state.linkPreview){var{title:t,canonicalUrl:a,description:r,thumbnail:i}=this.state.linkPreview.data;e=c.default.createElement(m.default,null,c.default.createElement(Ee.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:this._omitLinkPreview},c.default.createElement(Z.default,{onOmit:this._omitLinkPreview},c.default.createElement(W.default,{title:t,compose:!0,canonicalUrl:a,description:r,thumbnailJpeg:i}))))}var s,l=this.props.chat.composeQuotedMsg,n=this.props.chat.quotedMsgAdminGroupJid,o=this.props.chat.composeQuotedMsgRemoteJid;l?s=c.default.createElement(m.default,null,c.default.createElement(Ee.default,{displayName:"ComposeBoxQuotedMsg",escapable:!0,requestFocus:this._restoreFocus,requestDismiss:this._omitQuotedPreview},c.default.createElement(Z.default,{onOmit:this._omitQuotedPreview},c.default.createElement(le.default,{msg:l.safe(),composeQuotedMsgRemoteJid:o,theme:"composeBox",key:l.id.toString(),chat:l.chat})))):n&&(s=c.default.createElement(m.default,null,c.default.createElement(Ee.default,{displayName:"QuotedMsgAdminGroupName",escapable:!0,requestFocus:this._restoreFocus,requestDismiss:this._omitQuotedPreview},c.default.createElement(Z.default,{onOmit:this._omitQuotedMsgAdminGroupNamePreview},c.default.createElement(ne.default,{isComposePreview:!0,quotedGroupJid:n,key:n.toString()})))));var d=(0,me.unproxy)(this.props.chat),u=!d.isPSA&&d.shouldAppearInList&&d.msgs&&d.msgs.length>0,f=null;if(u){var h=v.default.get(d.id),_=d.getReceivedVcardMsgs();Boolean(!h&&_&&_.length&&!d.vcardDismissed)&&(f=c.default.createElement(m.default,null,c.default.createElement(be.default,{chat:d,dismissVcardPanel:this._dismissVcardPanel})))}var g=null;!d.trusted&&u&&null==f&&(g=c.default.createElement(m.default,null,c.default.createElement(he.default,{chat:d,contact:d.contact})));var E,S=null;return this.state.selectedPanelId&&null!=this.state.width&&(S=c.default.createElement(m.default,null,c.default.createElement(ue.default,{onResize:this._handleResize},c.default.createElement(y.default,{displayCache:this._panelsDisplayCache,width:this.state.width,onDisplayCache:this._handlePanelsDisplayCache,onEmoji:this._handleEmoji,onFocusRelease:this._handlePanelsFocusRelease,onGif:this._handlePanelsGif,onPanelChange:this._handlePanelChange,onSticker:this._handlePanelsSticker,requestDismiss:this._closeEmojiPanel,forwardedRef:e=>{this._refPanels.current=e},selectedPanelId:this.state.selectedPanelId})))),this.state.ctwaContextLinkData&&(E=c.default.createElement(m.default,null,c.default.createElement(Ee.default,{displayName:"ComposeBoxCtwaContextPreview",escapable:!0,requestDismiss:this._omitCtwa},c.default.createElement(Z.default,{onOmit:this._omitCtwa},c.default.createElement(P.default,{context:this.state.ctwaContextData,sourceUrl:this.state.ctwaContextLinkData.sourceUrl,compose:!0}))))),c.default.createElement("div",{className:V.default.positioningContainer},c.default.createElement("div",{className:V.default.overlayContainer},c.default.createElement(p.default,{onHeightChange:this._onHeightChange},g,f,S,s,e,E)))},this._onHeightChange=(e,t=!1)=>{this.props.onComposeHeightChange({overlay:e},t)},this._onFiles=e=>{var t=e.getFiles().filter((e=>{var t=(0,R.typeFromMimetype)(e.type);return"image"===t||"video"===t}));if(e.hasType("text/html")){var a=e.getData("text/html");if(a){if(a.includes("<meta name=ProgId content=PowerPoint.Slide>"))return!1;var r=a.includes("urn:schemas-microsoft-com:office"),i=a.includes("urn:schemas-microsoft-com:office:excel");if(r&&!i)return!1}}if(t.length)return this.saveComposeContentDebounced.flush(),E.default.attachMediaDrawer({chat:this.props.chat,attachments:t.map((e=>({file:e}))),fileOrigin:Q.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE,initCaption:this.getCurrentComposeContent(),onComplete:this.updateTextAfterMediaDrawerClose}),!0},this.updateTextAfterMediaDrawerClose=(e,t)=>{var a;e&&t&&(null===(a=this._refComposeBoxInput.current)||void 0===a||a.reset());e&&this._omitCtwa()},this.getCurrentComposeContent=()=>this.props.chat.getComposeContents(),this._onTextPaste=e=>{var t=Me.exec(e);if(t){var a=`https://media.giphy.com/media/${t[1]}/200w.mp4`;return this._handleGif(a,e,A.VideoMessageAttribution.GIPHY).catch((()=>{E.default.closeDrawerMid();var t=this._refComposeBoxInput.current;null!=t&&(t.focus(!0),t.replaceSelection(e)),E.default.openToast(c.default.createElement(ge.default,{msg:H.default.t(1090),id:(0,ge.genId)()}))})),!0}return this._pasteTriggeredOnChange=!0,!1},this._onSelectionChange=e=>{this._selection=e},this._hasText=()=>{var e=this._text.trim().length>0;return(0,G.setHasText)(e),e},this._onEnter=e=>{e&&e.repeat||this._onSendText()},this._onSendText=()=>{var e;(0,de.reconnect)();var t=this._refComposeBoxInput.current,{chat:a}=this.props;if(t){var r=t.serialize(),[i,s]=[r[0].trim(),r[1]];if(0!==i.length||this.state.ctwaContextLinkData){this._cancelPendingLinkPreviews();var l=a.composeQuotedMsg,n=a.quotedMsgAdminGroupJid,o=null===(e=this.state.linkPreview)||void 0===e?void 0:e.data,d=s.mentionedJidList||[],u=(0,ee.prepareCtwaContextSend)(this.state.ctwaContextLinkData,this.state.ctwaContextData),c=this._wasCleared;this._setSelectedPanelId(null),this.setState({hasText:!1,linkPreview:null},(()=>{if(c){var e=(0,me.unproxy)(a);e.urlText&&(e.urlText=void 0)}(0,ce.sendTextMsgToChat)(a,i,{linkPreview:o,quotedMsg:l,mentionedJidList:d,quotedMsgAdminGroupJid:n,ctwaContext:u}),this._wasCleared=!1})),this._omitCtwa(),a.composeQuotedMsg=null,a.quotedMsgAdminGroupJid=null,a.composeQuotedMsgRemoteJid=null,a.setComposeContents({}),t.reset(),this._text="",this._hasText()}}},this._handlePanelChange=e=>{this._setSelectedPanelId(e),null!=e&&(0,L.setLastComposeBoxPanel)(e)},this._handleTab=e=>{var t;this.state.selectedPanelId&&(null===(t=this._refPanels.current)||void 0===t||t.restoreFocus(!0),Ne(e))},this._handleResize=({width:e})=>{this.state.width!==e&&this.setState({width:e})},this._handlePttComposerCancel=()=>{this.setState({pttComposerActive:!1})},this._handlePttComposerSend=()=>{this.setState({pttComposerActive:!1})};var{chat:a}=e,r=a.getComposeContents();this._text=r.text||"",this._selection=r.selection,this._preview=this._omittedURL=r.omittedURL,this.saveComposeContentDebounced=this.props.debounce(this._saveComposeContent,200),this.state={hasText:!!this._text,recording:!1,linkPreview:null,isLoadingLinkPreview:!1,pttComposerActive:!1,selectedPanelId:null,textsize:T.default.get().textsize,width:null,ctwaContextLinkData:r.ctwaContextLinkData,ctwaContextData:r.ctwaContext}}componentDidMount(){var{listeners:e,chat:t}=this.props;if(this.props.listeners.add(v.default,"add remove reset",(()=>{this.forceUpdate()})),F.default.supportsFeature(F.default.F.INDEX_RECEIVED_VCARD)){var a=t.getReceivedVcardMsgs();a&&e.add(a,"add remove reset",(()=>{this.forceUpdate()}))}this._height=(0,u.default)(this._refComposeBlock.current,"this._refComposeBlock.current").clientHeight,this._scanForLinksTimer.debounceAndCap(50,50);var{ctwaContextLinkData:r}=this.state;!r||this.state.ctwaContextData&&this.state.ctwaContextData.sourceUrl===r.sourceUrl||this.setState({ctwaContextData:null},(()=>{this._updateCtwaContextState(r)}))}componentWillUnmount(){this._scanForLinksTimer.cancel(),this._pendingLinkPreviewPromises.forEach((e=>e.cancel())),this._pendingLinkPreviewPromises=[],this._linkPreviewAbortControllers.forEach((e=>e.abort())),this._linkPreviewAbortControllers=[],this._restoreFocusTimer.cancel(),this._saveComposeContent(),this._removeEmojisFromTouchBar()}_updateCtwaContextState(e){this._saveComposeContent(),this._clearLinkPreview(),e.sourceUrl&&(0,se.fetchCtwaContextData)(e).then((e=>{this.setState({ctwaContextData:e},(()=>{this._saveComposeContent()}))})).catch((e=>{__LOG__(3)`Unable to retrieve CTWA context data, error: ${e}`}))}_setSelectedPanelId(e){var t=null==this.state.selectedPanelId&&null!=e;this.setState({selectedPanelId:e,width:t&&null!=this._refComposeBlock.current?this._refComposeBlock.current.offsetWidth-Te:this.state.width})}_renderInput(){return c.default.createElement(C.default,{a8n:"conversation-compose-box-input",placeholder:H.default.t(1571),readOnly:this.state.pttComposerActive,ref:this._refComposeBoxInput,initialValue:this._text,initialSelection:this._selection,spellCheck:!0,multiline:!0,maxLength:M.default.MAX_TXT_MSG_SIZE,onMaxPasteExceeded:this._onMaxPasteExceeded,onEnter:this._onEnter,onFiles:this._onFiles,onTextPaste:this._onTextPaste,onChange:this._onChange,onSelect:this._onSelectionChange,textPasteMimePriority:[g.APP_TEXT_MIMETYPE,"text/plain"],theme:"compose"})}_renderPttComposer(){return fe.default.pttDraftEnabled?c.default.createElement("div",{className:V.default.pttComposerContainer},c.default.createElement(ae.default,{ref:this._refPttComposer,active:this.state.pttComposerActive,chat:(0,me.unproxy)(this.props.chat),onCancel:this._handlePttComposerCancel,onSend:this._handlePttComposerSend})):null}render(){return c.default.createElement(Ee.default,{displayName:"ComposeBox",ref:this._refUie,uimState:Ee.default.State.PASSIVE,requestFocus:this._restoreFocus},c.default.createElement(U.default,{component:"footer",handlers:{pagedown:this._onPageUpDown,pageup:this._onPageUpDown},className:(0,n.default)(V.default.footer,{[V.default.pttDraftPreviewDisabled]:!fe.default.pttDraftEnabled,[V.default.pttComposerActive]:this.state.pttComposerActive}),onRef:e=>{this._refContainer.current=e},onContextMenu:this._preventBlur,onMouseDown:this._preventBlur},null,c.default.createElement(I.default,{canCut:!0,className:(0,n.default)(V.default.blockCompose,Oe(this.state.textsize)),ref:this._refComposeBlock},c.default.createElement("div",{className:(0,n.default)(V.default.childPadding,V.default.boxPanelWrapper)},c.default.createElement(J.default,{selectedPanelId:this.state.selectedPanelId,onChange:this._handlePanelChange,readOnly:this.state.pttComposerActive}),c.default.createElement("div",{className:V.default.attachButtonContainer},c.default.createElement(_.default,{chat:(0,me.unproxy)(this.props.chat),getComposeContents:this.getCurrentComposeContent,onMenuComplete:this.updateTextAfterMediaDrawerClose}))),c.default.createElement("div",{className:V.default.mainContentContainer},c.default.createElement("div",{className:V.default.textMessageComposerContainer},c.default.createElement(U.default,{onRef:e=>{this._refInputHotkey.current=e},className:(0,n.default)(V.default.inputContainer,{[V.default.disabled]:this.state.recording}),handlers:{tab:this._handleTab,"shift+tab":this._handleTab},onFocus:this._onInputFocus,onBlur:this._onInputBlur},this._renderInput()),c.default.createElement("div",{className:(0,n.default)(V.default.childPadding,V.default.sendButtonContainer)},this._renderSendButton())),this._renderPttComposer())),this._renderPopupPanel(),c.default.createElement(C.default.EmojiSuggestions,{chat:(0,me.unproxy)(this.props.chat)}),c.default.createElement(Ae,{key:this.props.chat.id.toString(),chatId:this.props.chat.id,restoreFocus:this._restoreFocus,pasteEmojiInput:this._pasteEmojiInput,handleRoutedPaste:this._handleRoutedPaste,onSendText:this._onSendText,onTextSizeChange:this._onTextSizeChange,setChatCtwaContextLinkData:this._setChatCtwaContextLinkData}),c.default.createElement(C.default.Suggestions,{chat:(0,me.unproxy)(this.props.chat)}),(0,B.canSendQuickReply)()&&c.default.createElement(C.default.QuickRepliesSuggestions,{chat:(0,me.unproxy)(this.props.chat)})))}}Ie.CONCERNS={chat:["id","trusted","composeContents","composeQuotedMsg","isPSA","isGroup","shouldAppearInList","presence","contact","attachMediaContents","quotedMsgAdminGroupJid","receivedVcardMsgs","vcardDismissed","composeQuotedMsgRemoteJid"]},Ie.displayName="ComposeBox";var Pe=(0,ve.default)((0,q.default)((0,pe.default)(Ie,Ie.CONCERNS)));function Ae(e){var{chatId:t}=e;return(0,ye.useListener)(E.default,`focus_chat_text_input_${t.toString()}`,e.restoreFocus),(0,ye.useListener)(E.default,`paste_chat_text_input_${t.toString()}`,e.pasteEmojiInput),(0,ye.useListener)(E.default,`send_paste_to_compose_${t.toString()}`,e.handleRoutedPaste),(0,ye.useListener)(E.default,`enter_chat_text_input_${t.toString()}`,e.onSendText),(0,ye.useListener)(E.default,`chat_set_ctwa_context_link_data_${t.toString()}`,e.setChatCtwaContextLinkData),(0,ye.useListener)(E.default,"focus_chat_text_input",e.restoreFocus),(0,ye.useListener)(E.default,"textsize_change",e.onTextSizeChange),null}function Ne(e){e&&(e.preventDefault(),e.stopPropagation())}function Oe(e){for(var t=M.default.TEXTSIZE_CLASS_MAP,a=0;a<t.length;a++)if(t[a].scale===e)return t[a].classname}t.default=class extends Pe{constructor(...e){super(...e),this.updateTextAfterMediaDrawerClose=(e,t)=>{this.getComponent().updateTextAfterMediaDrawerClose(e,t)}}flushSaveComposeContentDebounced(){this.getComponent().saveComposeContentDebounced.flush()}getCurrentComposeContent(){return this.getComponent().getCurrentComposeContent()}}},7629:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PANELS=void 0;t.PANELS={EMOJI:"EMOJI",GIF:"GIF",STICKER:"STICKER"}},70481:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{forwardedRef:t}=e,a=(0,l.default)(e,["forwardedRef"]);return n.default.createElement(_,(0,s.default)({ref:t},a))};var s=i(a(67154)),l=i(a(6479)),n=r(a(67294)),o=(a(17657),r(a(91704))),d=i(a(20427)),u=i(a(77188)),c=a(7629),f=r(a(6644)),h=i(a(26144)),p=r(a(46592)),m=i(a(43232));class _ extends n.PureComponent{constructor(e){super(e),this.restoreFocus=e=>{switch(this.props.selectedPanelId){case c.PANELS.STICKER:this._refStickerPanel&&this._refStickerPanel.restoreFocus();break;case c.PANELS.GIF:this._refGifPanel&&this._refGifPanel.restoreFocus(e);break;case c.PANELS.EMOJI:default:this._refEmojiPanel&&this._refEmojiPanel.restoreFocus(e)}},this._setRefEmojiPanel=e=>{this._refEmojiPanel=e},this._setRefGifPanel=e=>{this._refGifPanel=e},this._setRefStickerPanel=e=>{this._refStickerPanel=e},this._setRefStickerPanelMd=e=>{this._refStickerPanel=e},this._handleEmojiPanelDisplayCache=e=>{this._emojiPanelDisplayCache=e,this._triggerDisplayCache()},this._handleEmojiPanelFocusNext=()=>{this.props.onPanelChange(c.PANELS.GIF)},this._handleEmojiPanelFocusPrev=()=>{this.props.onFocusRelease()},this._handleGifPanelDisplayCache=e=>{this._gifPanelDisplayCache=e,this._triggerDisplayCache()},this._handleTextChange=e=>{this.setState({searchText:e})},this._handleGifPanelFocusNext=()=>{this.props.onPanelChange(c.PANELS.STICKER)},this._handleGifPanelFocusPrev=()=>{this.props.onPanelChange(c.PANELS.EMOJI)},this._handleRequestFocus=()=>{this.restoreFocus(!1)},this._handleStickerPanelDisplayCache=e=>{this._stickerPanelDisplayCache=e,this._triggerDisplayCache()},this._handleStickerPanelFocusNext=()=>{this.props.onFocusRelease()},this._handleStickerPanelFocusPrev=()=>{this.props.onPanelChange(c.PANELS.GIF)},e.displayCache&&(this._emojiPanelDisplayCache=e.displayCache.emojiPanel,this._gifPanelDisplayCache=e.displayCache.gifPanel,this._stickerPanelDisplayCache=e.displayCache.stickerPanel),this.state={searchText:""}}_triggerDisplayCache(){this.props.onDisplayCache({emojiPanel:this._emojiPanelDisplayCache,gifPanel:this._gifPanelDisplayCache,stickerPanel:this._stickerPanelDisplayCache})}render(){var e=null;switch(this.props.selectedPanelId){case c.PANELS.STICKER:u.default.supportsFeature(u.default.F.MD_BACKEND)?m.default.webServerStickerPanel&&(e=n.default.createElement(p.default,{ref:this._setRefStickerPanelMd,displayLocation:p.DisplayLocation.ComposeBox,displayCache:this._stickerPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker})):e=n.default.createElement(f.default,{ref:this._setRefStickerPanel,displayCache:this._stickerPanelDisplayCache,displayLocation:f.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker});break;case c.PANELS.EMOJI:default:e=n.default.createElement(o.default,{ref:this._setRefEmojiPanel,displayCache:this._emojiPanelDisplayCache,width:this.props.width,displayLocation:o.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleEmojiPanelDisplayCache,onEmoji:this.props.onEmoji,onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext});break;case c.PANELS.GIF:e=n.default.createElement(d.default,{ref:this._setRefGifPanel,displayCache:this._gifPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleGifPanelDisplayCache,onFocusRelease:this.props.onFocusRelease,onFocusNext:this._handleGifPanelFocusNext,onFocusPrev:this._handleGifPanelFocusPrev,onGif:this.props.onGif})}return e&&n.default.createElement(h.default,{displayName:"ComposeBoxPanels",escapable:!0,requestDismiss:this.props.requestDismiss,requestFocus:this._handleRequestFocus},e)}}_.displayName="ComposeBoxPanels"},48336:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.useRef)(),a=(0,l.useRef)(),r=(0,l.useRef)(),i=(0,l.useRef)(),g=(0,l.useRef)(),E=t=>{e.onChange(t)};(0,v.useListener)(o.default,"open_compose_box_panel",E);var{readOnly:S}=e,C=Boolean(e.selectedPanelId),y=!c.default.supportsFeature(c.default.F.MD_BACKEND)||_.default.webServerStickerPanel;return l.default.createElement("div",{"data-state":C?"open":"closed",ref:e=>{g.current=e},className:(0,s.default)(p.default.menu,{[p.default.open]:C,[p.default.full]:y})},l.default.createElement(m.default,{"aria-label":f.default.t(5),className:(0,s.default)(p.default.button,p.default.closeButton),"data-tab":C&&!S?d.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON:null,icon:"x",onClick:()=>{e.onChange(null)},ref:t,size:m.SIZES.SQUARE24}),l.default.createElement(m.default,{"aria-label":f.default.t(25),className:(0,s.default)(p.default.button,p.default.firstButton),"data-a8n":n.default.key("compose-btn-emoji"),"data-tab":C||S?null:d.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON,icon:"smiley",isActive:e.selectedPanelId===h.PANELS.EMOJI,isMain:!0,onClick:()=>{Boolean(e.selectedPanelId)?E(h.PANELS.EMOJI):e.onChange((0,u.getLastComposeBoxPanel)()||h.PANELS.EMOJI)},ref:a,size:m.SIZES.SQUARE26}),l.default.createElement(m.default,{"aria-label":f.default.t(26),className:(0,s.default)(p.default.button,p.default.secondButton),icon:"gif",isActive:e.selectedPanelId===h.PANELS.GIF,onClick:()=>E(h.PANELS.GIF),ref:r,size:m.SIZES.SQUARE26}),y&&l.default.createElement(m.default,{"aria-label":f.default.t(28),className:(0,s.default)(p.default.button,p.default.thirdButton),icon:"sticker",isActive:e.selectedPanelId===h.PANELS.STICKER,onClick:()=>E(h.PANELS.STICKER),ref:i,size:m.SIZES.SQUARE26}))},t.OPEN_MENU_WIDTH=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(33766)),d=i(a(75444)),u=a(26226),c=i(a(77188)),f=i(a(80162)),h=a(7629),p=i(a(44947)),m=r(a(96139)),_=i(a(43232)),v=a(54890),g=parseInt(p.default["-open-menu-width"].replace(/px$/,""),10);t.OPEN_MENU_WIDTH=g},96139:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZES=t.ITEM_SPACING=t.ITEM_WIDTH=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(35001)),o=i(a(5337)),d=i(a(32885)),u=i(a(61723)),c=parseInt(o.default["-item-width"].replace(/px$/,""),10);t.ITEM_WIDTH=c;var f=parseInt(o.default["-item-spacing"].replace(/px$/,""),10);t.ITEM_SPACING=f;var h={SQUARE24:"SQUARE24",SQUARE26:"SQUARE26"};t.SIZES=h;var p=(0,l.forwardRef)(((e,t)=>{var a=t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},r=(0,u.default)(t);return l.default.createElement(n.default,{component:"button",className:(0,s.default)(o.default.container,e.className,{[o.default.active]:e.isActive,[o.default.top]:e.isMain||e.singleButton,[o.default.padding]:e.singleButton,[o.default.square24]:e.size===h.SQUARE24,[o.default.square26]:e.size===h.SQUARE26}),"aria-label":e["aria-label"],"data-tab":e["data-tab"],"data-a8n":e["data-a8n"],onClick:()=>{e.onClick()},onRef:r,handlers:{enter:a,space:a}},l.default.createElement(d.default,{name:e.icon}))})),m=(0,l.memo)(p);t.default=m},16479:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(84015)),n=r(a(32885)),o=(0,s.forwardRef)(((e,t)=>{var a=(0,s.useRef)();return(0,s.useImperativeHandle)(t,(()=>({getElement:()=>a.current}))),s.default.createElement("div",{className:l.default.panel,ref:a},s.default.createElement("div",{className:l.default.body},e.children),s.default.createElement("div",{className:l.default.cancelButton},s.default.createElement("div",{role:"button",onClick:e.onOmit},s.default.createElement(n.default,{name:"x"}))))}));t.default=o},50520:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttCancelButton=t.PttSendButton=void 0;var s=i(a(94184)),l=i(a(63337)),n=r(a(67294)),o=i(a(55847)),d=i(a(75444)),u=i(a(25116)),c=i(a(80162)),f=i(a(73205)),h=i(a(32885)),{KEYBOARD_EVENT_KEY_VALUE:p}=u.default,m=(0,n.forwardRef)(((e,t)=>n.default.createElement(v,{ref:t,a8nKey:o.default.key("ptt-send-btn"),className:f.default.btnSend,ariaLabel:c.default.t(32),iconName:"round-send",invertedIconName:"round-send-inv",onConfirm:e.onConfirm})));t.PttSendButton=m;var _=(0,n.forwardRef)(((e,t)=>n.default.createElement(v,{ref:t,a8nKey:o.default.key("ptt-cancel-btn"),className:f.default.btnCancel,ariaLabel:c.default.t(30),iconName:"round-x",invertedIconName:"round-x-inv",onConfirm:e.onConfirm})));t.PttCancelButton=_;var v=(0,n.forwardRef)(((e,t)=>{var a=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({focus:()=>(0,l.default)(a.current,"buttonRef.current").focus()})));var[r,i]=(0,n.useState)(!1),o=(0,s.default)(e.className,f.default.btnBorder,{[f.default.hovered]:r});return n.default.createElement("button",{ref:a,"data-a8n":e.a8nKey,"data-tab":d.default.TAB_ORDERS.PTT_BUTTON,className:o,onMouseOver:()=>{i(!0)},onMouseOut:()=>{i(!1)},onMouseUp:()=>{e.onConfirm()},onKeyPress:t=>{t.key!==p.ENTER&&t.key!==p.SPACE||(t.preventDefault(),t.stopPropagation(),e.onConfirm())},"aria-label":e.ariaLabel,"data-animate-btn-border":!0},n.default.createElement("div",{className:(0,s.default)(f.default.btnBorderIcon,f.default.btnStateDefault)},n.default.createElement(h.default,{name:e.iconName})),n.default.createElement("div",{className:(0,s.default)(f.default.btnBorderIcon,f.default.btnStateHover)},n.default.createElement(h.default,{name:e.invertedIconName})))}))},80959:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(97308),n=r(a(87224)),o=r(a(33766)),d=r(a(51115)),u=r(a(58218)),c=r(a(44373)),f=r(a(7970)),h=a(34605),p=r(a(80162)),m=r(a(41849)),_=r(a(80896)),v=r(a(26106)),g=r(a(39148)),E=r(a(97914)),S=a(26658),C=r(a(19826)),y=a(80338),b=r(a(72765)),M=r(a(47644));class T extends s.PureComponent{constructor(...e){super(...e),this._refDropdown=(0,s.createRef)(),this.getElement=()=>this._refDropdown.current,this._forceUpdate=()=>{this.forceUpdate()},this.reportSpam=()=>{(0,S.sendSpamReport)(this.props.chat,y.SpamFlow.Dropdown),o.default.closeModal()},this.reportSpamBlock=()=>{var{chat:e,contact:t}=this.props;(0,S.sendSpamReport)(e,y.SpamFlow.Block),(0,l.blockContact)(t),o.default.closeModal()},this.reportSpamBlockClear=()=>{(0,S.sendSpamBlockClear)(this.props.chat,y.SpamFlow.Block),o.default.closeModal()},this.onReportSpam=()=>{o.default.openModal(s.default.createElement(E.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>o.default.closeModal()}))},this.blockContact=()=>{(0,l.blockContact)(this.props.contact),o.default.closeModal()},this.unblockContact=()=>{(0,l.unblockContact)(this.props.contact),o.default.closeModal()},this.onBlockContact=()=>{o.default.openModal(s.default.createElement(n.default,{contact:this.props.contact,onCancel:()=>o.default.closeModal(),onBlock:this.blockContact,onReportSpamBlock:this.reportSpamBlock}))},this.onUnblockContact=()=>{var e=s.default.createElement(g.default,{contact:this.props.contact});o.default.openModal(s.default.createElement(d.default,{okText:p.default.t(1574),onOK:this.unblockContact,cancelText:p.default.t(1768),onCancel:()=>o.default.closeModal()},s.default.createElement(m.default,{id:1575,params:{contact:e}})))},this._onStartAudioCall=()=>{},this._onStartVideoCall=()=>{}}componentDidMount(){this.props.listeners.add(M.default,"change:displayInfo",this._forceUpdate)}menus(){var{chat:e,contact:t,onSelectMessages:a}=this.props,r=[];return e.isPSA||r.push(s.default.createElement(f.default,{key:"info",a8n:"mi-contact",action:()=>o.default.chatInfoDrawer(e)},p.default.t(1780))),t.isBusiness&&((0,h.canSeeECommerceComplianceIndia)(this.props.contact.id.user)&&r.push(s.default.createElement(f.default,{key:"merchantDetails",a8n:"merchant-details",action:()=>{}},p.default.t(1345))),r.push(s.default.createElement(f.default,{key:"report",a8n:"report",action:this.onReportSpam},p.default.t(1390)),s.default.createElement(f.default,{key:"block",a8n:"block",action:t.isBlocked()?this.onUnblockContact:this.onBlockContact},t.isBlocked()?p.default.t(1574):p.default.t(299)))),r.push(s.default.createElement(f.default,{a8n:"mi-select-messages",key:"select",action:a},p.default.t(2007))),e.mute.canMute()&&r.push(s.default.createElement(v.default,{key:"mute",onMute:t=>o.default.muteChat(e,t),mute:e.mute,chat:e,settings:C.default})),r.push(s.default.createElement(f.default,{key:"clear",a8n:"mi-clear",action:()=>o.default.clearChat(e)},p.default.t(550))),r.push(s.default.createElement(u.default,{key:"delete",onDeleteOrExit:()=>o.default.deleteOrExitChat(e),chat:e})),r}render(){return this.props.toContextMenuManager?s.default.createElement("div",{ref:this._refDropdown},this.menus()):s.default.createElement(c.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"ContactMenuDropdown",flipOnRTL:!0,dirX:"LEFT"},this.menus())}}T.CONCERNS={chat:["isPSA","mute"],contact:["id","isBusiness","name","isContactBlocked"]},T.displayName="ContactMenuDropdown";var I=(0,_.default)((0,b.default)(T,T.CONCERNS));t.default=I},23972:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(41609)),l=a(24788),n=r(a(67294)),o=i(a(81732)),d=i(a(51258)),u=i(a(33766)),c=i(a(75444)),f=i(a(94708)),h=a(54438),p=i(a(75451)),m=i(a(80896)),_=i(a(33048)),v=i(a(43232)),g=i(a(47644)),E=i(a(47809));class S extends n.Component{constructor(){super(...arguments),this._refContainer=(0,n.createRef)(),this._msgCollectionChanged=(e,t,a,r)=>{var i=this.state.msgCollection;i!==e&&i!==t||this.setState({msgCollection:a,focusCtx:r&&(r.msg||r.collection)?r:this.state.focusCtx})},this._windowGainedFocus=()=>{g.default.markAvailable();var e=this.state.chat;e&&e.isUser&&e.presence.subscribe().catch((0,l.filteredCatch)(h.WebdDrop,(()=>{})))},this._windowLostFocus=()=>{g.default.markUnavailable(c.default.SEND_UNAVAILABLE_WAIT)},this._handleCloseChat=e=>{this.state.chat===e&&this.setState({chat:void 0,msgCollection:void 0,focusCtx:void 0})},this._handleOpenChatId=0,this._handleOpenChat=(e,t,a)=>{u.default.updateChatlistSelection(e);var r=this._openedChatInfo,i={};this._openedChatInfo=i;var s=t?t.collection:e.msgs;this._handleOpenChatId++;var l=this._handleOpenChatId,n=()=>l===this._handleOpenChatId,o=!1,d=()=>{n()&&(o=!0,a(this._newChatScrollInfo(r,t)))},c=t&&t.msg&&t.msg.id||t&&t.key;this.setState({chat:e,msgCollection:s,focusCtx:t,notifyChatRendered:e=>{!o&&n()&&(c?e.some((e=>e.id.equals(c)))&&d():d())},updateOpenedChatInfo:e=>{Object.assign(i,e)}})},this._newChatScrollInfo=(e,t)=>{var a=t?t.msg||_.default.get(t.key):void 0;if(t&&a&&e){var{chat:r,renderedMsgsInfo:i,visibleMsgOrder:l}=e;if(r&&i&&l&&!(0,s.default)(i)&&!(0,s.default)(l)){var n=i[l[0].toString()],o=Object.keys(i).find((e=>e===a.id.toString())),d=o?i[o]:null;if(d)return{wasVisible:!0,offset:d.offset};if(r===a.chat)return n&&a.t<n.t?{wasVisible:!1,alignAt:"top"}:{wasVisible:!1,alignAt:"bottom"}}}return{wasVisible:!1,alignAt:"center"}},this.state={chat:void 0,msgCollection:void 0,focusCtx:void 0,showConversationPreview:!1,animate:void 0}}componentDidMount(){this.props.listeners.add(u.default,"open_chat",this._handleOpenChat),this.props.listeners.add(u.default,"close_chat",this._handleCloseChat),this.props.listeners.add(window,"focus",this._windowGainedFocus),this.props.listeners.add(window,"blur",this._windowLostFocus),v.default.wallpapersV2&&(this.props.listeners.add(d.default,"wallpaper_drawer_open",(()=>{this.setState({showConversationPreview:!0})})),this.props.listeners.add(d.default,"wallpaper_drawer_close",(()=>{this.setState({showConversationPreview:!1})})))}shouldComponentUpdate(e,t){return t!==this.state||e.animate!==this.props.animate}componentDidUpdate(e,t){var a=this.state.chat,r=t.chat;a&&r!==a&&(this.props.listeners.add(a,"change:cmc:merge",this._msgCollectionChanged),r&&this.props.listeners.remove(r,"change:cmc:merge",this._msgCollectionChanged),a.contact.isBusiness&&o.default.find(a.id))}animatePanel(e,t){return!!this._refContainer.current&&this._refContainer.current.animatePanel(e,t)}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.containsDOMNode(e)}static getDerivedStateFromProps(e,t){return null==t.animate?{animate:e.animate}:!1!==t.animate?{animate:!1}:null}render(){var{chat:e,msgCollection:t,focusCtx:a,showConversationPreview:r,animate:i}=this.state;return e&&t||r?n.default.createElement(f.default,{chat:e,groupMetadata:null==e?void 0:e.groupMetadata,chatPreference:d.default.assertGet("defaultPreference"),focusCtx:a,msgCollection:t,notifyChatRendered:this.state.notifyChatRendered||(()=>{}),updateOpenedChatInfo:this.state.updateOpenedChatInfo||(()=>{}),key:null==e?void 0:e.id.toString(),ref:this._refContainer,showPreview:r}):n.default.createElement(p.default,{animate:i,ref:this._refContainer})}}S.displayName="Conversation";var C=(0,m.default)((0,E.default)(S));t.default=class extends C{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},36869:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({wallpaperColor:e,showDoodle:t}){var a,{theme:r}=(0,l.useContext)(u.default);a=d.default.wallpapersV2?t:e===n.default.DEFAULT_CHAT_WALLPAPER;if(a&&(0,c.colorExistsInTheme)(e,r)){var i={opacity:(0,c.getDoodleOpacity)(e,r)},f=(0,c.getDoodleAssetName)(e,r),h={};return h[f]=!0,l.default.createElement("div",(0,s.default)({className:o.default.tile},h,{style:i}))}return null};var s=i(a(67154)),l=r(a(67294)),n=i(a(75444)),o=i(a(8546)),d=i(a(43232)),u=i(a(7170)),c=a(24102)},87901:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(6479)),l=i(a(81109)),n=i(a(41609)),o=i(a(52353)),d=i(a(23279)),u=i(a(23493)),c=i(a(94184)),f=a(58566),h=a(24788),p=a(78840),m=i(a(63337)),_=r(a(67294)),v=i(a(73935)),g=i(a(96774)),E=a(97066),S=i(a(44386)),C=i(a(33766)),y=i(a(75444)),b=i(a(80959)),M=i(a(27122)),T=i(a(68270)),I=i(a(31951)),P=i(a(68609)),A=i(a(42684)),N=a(54438),O=r(a(12536)),D=i(a(62886)),w=i(a(77188)),R=i(a(80162)),k=i(a(80896)),L=i(a(76773)),x=a(91611),F=i(a(51213)),B=i(a(33048)),G=i(a(47540)),U=i(a(85726)),j=i(a(39417)),V=i(a(27420)),H=i(a(32885)),W=r(a(48847)),Y=i(a(89848)),K=i(a(26144)),q=i(a(11918)),z=i(a(22415)),$=a(10793),Q=i(a(59979)),X=i(a(4328));class J extends _.Component{constructor(e){super(e),this._chatOpenScrollTimestamp=0,this._renderedMsgCache=new Map,this._visibleMsgOrder=[],this._loadEarlierScrollThreshold=300,this._mdHistorySyncStatusContentPlaceholderShown=!1,this._blockAdditionalLoadEalierRequest=!1,this._setScrollContainer=e=>this.scrollContainer=e,this._refStickyDateMarker=(0,_.createRef)(),this._refMessageList=(0,_.createRef)(),this._handleHistorySyncStateUpdate=e=>{e.has(this.props.chat.id.toString())&&(__LOG__(2,void 0,void 0,void 0,["Conversaion msgs"])`_onHistorySyncStateUpdate called, attempt to load earlier`,this._blockAdditionalLoadEalierRequest=!1,this.loadEarlierMsgs())},this.handlePanesWillChange=()=>{var e=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(e){var t=e.toString(),a=this._refMessageList.current;if(t&&a){var r,i=null===(r=a.getMsgWrapperRef(t))||void 0===r?void 0:r.getContainerElement();if(i){var s=this.scrollContainer;if(!s)return;var l=this._getMsgBottom(s,i);this._panesChanging={msg:i,container:s,msgBottom:l}}}}},this.handlePanesDidChange=()=>{if(this._panesChanging){var{msg:e,container:t,msgBottom:a}=this._panesChanging;this._setMsgBottom(t,e,a),this._panesChanging=void 0}},this._attachMsgCollectionObservers=e=>{var t,a,{listeners:r,chat:i,msgCollection:s}=this.props,{focusCtx:l,chat:n,msgCollection:o}=e;(s&&(r.remove(s,"remove_msgs insert_msgs",this._handleMsgsUpdate),r.remove(i.msgs,"change:last",this._handleLastMsgChanged)),r.remove(i,"change:unreadCount",this._handleUnreadCount),null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._msgLoadStateChangeUnsubscribe=o.onMsgLoadStateChange(this._handleMsgLoadStateChange),w.default.isGroupCatchUpEnabled())&&(i.isGroup&&(null===(t=i.groupMetadata)||void 0===t?void 0:t.unreadMentionMetadata.unreadMentionCollection)&&r.remove(i.groupMetadata.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMentionCount),n.isGroup&&(null===(a=n.groupMetadata)||void 0===a?void 0:a.unreadMentionMetadata.unreadMentionCollection)&&r.add(n.groupMetadata.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMentionCount));r.add(n,"change:unreadCount",this._handleUnreadCount),r.add(n.msgs,"change:last",this._handleLastMsgChanged),r.add(o,"remove_msgs insert_msgs",this._handleMsgsUpdate),l&&o.loadAroundPromise&&o.loadAroundPromise.checkpoint(this.props.rejectOnUnmount()).catch((0,h.filteredCatch)(O.Unmount,(()=>{}))).catch((0,h.filteredCatch)(N.E404,(()=>{C.default.openToast(_.default.createElement(W.default,{msg:R.default.t(1134),id:(0,W.genId)()}))})))},this._updateForCurrentPosition=(0,u.default)((()=>{var e=this.props.rejectOnUnmount();(0,A.default)({signal:e}).then((()=>{e.isRejected()||(this._updateRenderedMsgCache(),v.default.unstable_batchedUpdates((()=>{var{scrollContainer:e}=this;if(null!=e&&!(this._blockAdditionalLoadEalierRequest&&e.scrollTop<80)){e.scrollTop>80&&(this._blockAdditionalLoadEalierRequest=!1),e.scrollTop<300&&this.loadEarlierMsgs();var{isNearBottom:t,cursor:a}=this.state,r=this._nearBottom();r?(this._maybeSendSeen(!0),se(this.props)&&t!==r&&this.setState({isNearBottom:r,newUnread:0}),(a.getEnd(this.props.msgCollection)<this.props.msgCollection.length||!se(this.props))&&this._loadRecentMsgs()):t!==r&&this.setState({isNearBottom:r})}})))})).catch((0,h.filteredCatch)(f.AbortError,(()=>{})))}),100),this._handleMsgLoadStateChange=()=>{var e=this.state.msgLoadState,t=te(this.props.msgCollection),a={msgLoadState:t};if(e.isLoadingAroundMsgs&&!t.isLoadingAroundMsgs){var r=ee(this.props.focusCtx),i=r&&r.msg;i&&(a=(0,l.default)((0,l.default)({},a),{},{cursor:this.state.cursor.init(i.id,this.props.msgCollection),focusCtx:r}))}this.setState(a)},this._handleResizeThrottle=(0,u.default)((()=>{this._updateRenderedMsgCache()}),100),this.handleMsgKeyChange=({newKey:e,oldKey:t})=>{var a=t.toString(),r=e.toString(),i=this._renderedMsgCache.get(a);i&&(this._renderedMsgCache.delete(a),this._renderedMsgCache.set(r,i));for(var s=0;s<this._visibleMsgOrder.length;++s)if(this._visibleMsgOrder[s]===t){this._visibleMsgOrder[s]=e;break}},this._handleResizeDebounce=(0,d.default)((()=>{var e=this._nearBottom();this._nearBottom!==e&&this.setState({isNearBottom:e})}),100),this.loadEarlierMsgs=()=>{var{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;if(a.getStart(t)>0)a.hasBefore(t)&&this.setState({cursor:a.loadBefore(t)});else{if(r.isLoadingEarlierMsgs||r.isLoadingAroundMsgs)return;if(ae(e,se(this.props),r)&&(t.msgLoadState.noEarlierMsgs=!1),t.msgLoadState.noEarlierMsgs)return;e.loadEarlierMsgs(t).checkpoint(this.props.rejectOnUnmount()).then((e=>{!w.default.supportsFeature(w.default.F.MD_BACKEND)||e&&0!==e.length||(this._blockAdditionalLoadEalierRequest=!0);var r={};this.state.focusCtx||(r.focusCtx=ie(this.props,this.state.unreadCount)),a.hasBefore(t)?(r.cursor=a.loadBefore(t),this.setState(r)):this.setState(r)})).catch((0,h.filteredCatch)(O.Unmount,(()=>{}))).catch((e=>{__LOG__(2)`ConversationMsgs:loadEarlierMsgs failed\n${e}`}))}},this._loadRecentMsgs=()=>{var{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;if(a.getEnd(t)<t.length)this.setState({cursor:a.loadAfter(t)});else{if(r.isLoadingRecentMsgs||r.isLoadingAroundMsgs)return;this._loadRecentMsgsPromise=e.loadRecentMsgs(t).cancellable().checkpoint(this.props.rejectOnUnmount()).then((()=>{a.hasAfter(t)?this.setState({cursor:a.loadAfter(t)}):this.state.cursor.getEnd(t)>=t.length&&se(this.props)&&this.forceUpdate()})).catch((0,h.filteredCatch)(O.Unmount,(()=>{}))).catch((e=>{__LOG__(2)`ConversationMsgs:loadRecentMsgs failed\n${e}`})).finally((()=>{this._loadRecentMsgsPromise=null}))}},this.handleComposeHeightChange=e=>{var t=this.scrollContainer;if(t)if(e){if(t&&e<0&&t.scrollTop===t.scrollHeight-t.clientHeight)return;this._setScrollTop(t,t.scrollTop+e)}else{var a=t.scrollHeight-(t.scrollTop+t.clientHeight);(0,Q.default)(t,{tween:18},{progress:()=>{this._setScrollTop(t,t.scrollHeight-a-t.clientHeight)},duration:300},[.1,.82,.25,1])}},this._getScrollContainer=()=>(0,m.default)(this.scrollContainer,"this.scrollContainer"),this.getScrollBottom=()=>{var e=this.scrollContainer;return e?e.scrollHeight-(e.scrollTop+e.clientHeight):0},this._hideStickyDateMarker=new p.ShiftTimer((()=>{var e;null===(e=this._refStickyDateMarker.current)||void 0===e||e.setVisibility(!1)})),this._updateStickyDateMarker=new p.ShiftTimer((e=>{var{dateMarkerIdx:t,silent:a=!1}=e||{},r=this._refMessageList.current;if(r&&"number"==typeof t){a||Date.now()-(this._programmaticScroll||0)<200||this._showStickyDateMarker();var i,s=r.getDateMarkerRef(t);if(-1===t)null===(i=this._refStickyDateMarker.current)||void 0===i||i.updateDateMarkerText();else if(s){var l,n=s.getTimestamp(),o=S.default.relativeDateStr(n).toUpperCase();null===(l=this._refStickyDateMarker.current)||void 0===l||l.updateDateMarkerText(o)}if(this._dateMarkerIdx!==t){var d=r.getDateMarkerRef(this._dateMarkerIdx);d&&d.show(),s&&s.hide()}}})),this._removeViewedMentions=()=>{this._renderedMsgCache.forEach(((e,t)=>{var a,r;(null===(a=this.props.chat.groupMetadata)||void 0===a?void 0:a.unreadMentionMetadata.hasMentionId(t))&&(null===(r=this.props.chat.groupMetadata)||void 0===r||r.unreadMentionMetadata.removeUnreadMentions(t))}))},this.isMsgVisible=(e,t=!1)=>this._renderedMsgCache.has(e.toString())&&(!!t||this.getMsgComponent(e)),this.getSequentialMsg=e=>{var t=this.getMsgs();if(t){var a=t.findIndex((t=>e.equals(t.id)));return a>=t.length-1?null:t[a+1]}},this.handleScroll=()=>{this._updateForCurrentPosition()},this.handleWindowGainedFocus=()=>{var e=this.props.chat;!this._clearUnreadTimer&&e.isDirty()&&(this._clearUnreadTimer=setTimeout((()=>{delete this._clearUnreadTimer,this._maybeSendSeen()}),y.default.CLEAR_CHAT_DIRTY_WAIT))},this.handleWindowLostFocus=()=>{if(this.state.unreadCount&&se(this.props)){var e=this.props.chat;0===e.unreadCount&&this.setState({unreadCount:0}),e.markedUnread=!1}},this._jumpToBottom=()=>{var{msgCollection:e}=this.props;se(this.props)&&this.state.cursor.getEnd(e)>=e.length?this._scrollToBottom():C.default.openChatBottom(this.props.chat).then((e=>{e&&C.default.focusChatTextInput(this.props.chat)}))},this._jumpToMention=()=>{if(w.default.isGroupCatchUpEnabled()){var e,t=this.props.chat;if(null===(e=t.groupMetadata)||void 0===e?void 0:e.unreadMentionMetadata.unreadMentionCollection.length){var a=t.groupMetadata.unreadMentionMetadata.oldestUnreadMention(),r=G.default.fromString(null==a?void 0:a.id),i=B.default.get(r.toString()),s=t.getSearchContext(i||r);s.highlightMentionMsg=!0,s&&C.default.openChatAt(this.props.chat,s)}}},this._scrollToBottom=e=>{var t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight),e&&e();var a=this.props.rejectOnUnmount();(0,A.default)({signal:a}).then((()=>{a.isRejected()||this.setState({cursor:this.state.cursor.resetBeforeCursor(this.props.msgCollection)})})).catch((0,h.filteredCatch)(f.AbortError,(()=>{})))},this._handleLastMsgChanged=(e,t)=>{var{msgCollection:a}=this.props,{focusCtx:r}=this.state,{cursor:i}=this.state,s=a.last();if(se(this.props)){var l={},o=document.hasFocus(),d=this._nearBottom(),u=d;o&&d?(l.unreadCount=0,l.focusCtx=void 0,i=i.setFocusedMsgKey(a)):s&&s.isSentByMe&&t&&(u=!0,this.state.unreadCount&&(l.unreadCount=0,l.focusCtx=void 0,i=i.setFocusedMsgKey(a)),this._jumpToBottom()),(i=r&&!l.hasOwnProperty("focusCtx")?i.loadAfter(a,{count:1}):i.loadBeforeCapped(a,{count:1}))!==this.state.cursor&&(l.cursor=i),(0,n.default)(l)||this.setState(l,(()=>{u&&this._scrollToBottom()}))}else t&&e&&e.isSentByMe&&this._jumpToBottom()},this._handleUnreadMentionCount=()=>{var e,{chat:t}=this.props,a=(null===(e=t.groupMetadata)||void 0===e?void 0:e.unreadMentionMetadata.unreadMentionCollection.length)||0;this.setState({unreadMentionCount:a})},this._handleUnreadCount=()=>{var{chat:e}=this.props,t=this._nearBottom(),a=document.hasFocus();this._maybeSendSeen(t,a);var r={};if(e.unreadCount&&!e.pendingSeenCount&&se(this.props)){r.unreadCount=e.unreadCount;var i=ie(this.props,this.state.unreadCount);i&&(r.focusCtx=i,r.cursor=this.state.cursor.setFocusedMsgKey(this.props.msgCollection,i.msg&&i.msg.id))}var s=t&&r.unreadCount-this.state.unreadCount==1;(!t&&se(this.props)||!e.pendingSeenCount&&this.state.newUnread!==e.unreadCount)&&(r.newUnread=e.unreadCount),(0,n.default)(r)||this.setState(r,(()=>{s&&this._scrollToBottom()}))},this._handleMsgsUpdate=()=>{var e=this.state.cursor.ensureValidFocus(this.props.msgCollection);this.state.cursor!==e?this.setState({cursor:e}):this.forceUpdate()},this.handlePageUpDown=()=>{D.default.focus(this.scrollContainer)},this.scrollMessages=()=>{var e,t=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(t){var a=this._refMessageList.current;if(a){var r=null===(e=a.getMsgWrapperRef(t.toString()))||void 0===e?void 0:e.getContainerElement();if(r){var i=1===this._visibleMsgOrder.length?r.clientHeight:0,s=this.scrollContainer;(0,Q.default)(r,"stop"),s&&(0,Q.default)(s,"stop"),(0,Q.default)(r,"scroll",{duration:300,container:s,offset:i})}}}},this.handleKeyPress=e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),"Enter"!==e.key||e.shiftKey?C.default.pasteChatTextInput(this.props.chat,String.fromCharCode(e.charCode)):C.default.enterChatTextInput(this.props.chat))},this.handleContextMenu=e=>{var t,a=this.props.chat,r=this.props.onSelectMessages;if(a.isUser)t=_.default.createElement(b.default,{chat:a,toContextMenuManager:!0,contact:a.contact,onSelectMessages:r});else if(a.isGroup)t=(0,x.groupMenu)(a,r);else{if(!a.isBroadcast)return;t=(0,x.broadcastMenu)(a,r)}e.preventDefault(),e.stopPropagation(),e.persist(),this.setState({contextMenu:{menu:t,event:e}})},this.handleContextClose=()=>{this.setState({contextMenu:null})},this.handlePaste=e=>{e.preventDefault(),e.persist(),C.default.sendPasteToCompose(this.props.chat,e)},this._notifyChatRendered=()=>{this.props.notifyChatRendered&&this.props.notifyChatRendered(this.getMsgs())};var t,{chat:a}=e,r=a.pendingSeenCount?0:a.unreadCount,i=0;w.default.isGroupCatchUpEnabled()&&a.isGroup&&(i=(null===(t=a.groupMetadata)||void 0===t?void 0:t.unreadMentionMetadata.unreadMentionCollection.length)||0);this.state=(0,l.default)((0,l.default)({},re(e,r)),{},{unreadCount:r,unreadMentionCount:i,isNearBottom:!0,newUnread:0,contextMenu:null,textsize:T.default.get().textsize,msgLoadState:te(e.msgCollection),lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx})}componentWillUnmount(){var e;(null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._updateStickyDateMarker.cancel(),this._updateForCurrentPosition.cancel(),this._handleResizeThrottle.cancel(),this._handleResizeDebounce.cancel(),this._hideStickyDateMarker.cancel(),this._clearUnreadTimer&&clearTimeout(this._clearUnreadTimer),this._maybeSendSeen(),this.props.chat.markedUnread=!1,w.default.isGroupCatchUpEnabled()&&this.props.chat.isGroup)&&(null===(e=this.props.chat.groupMetadata)||void 0===e||e.unreadMentionMetadata.reset())}componentDidMount(){var{chat:e,listeners:t}=this.props;t.add(C.default,"scroll_chat_to_bottom",(e=>{this._scrollToBottom(e)})),t.add(C.default,"scroll_messages",this.scrollMessages),t.add(C.default,"textsize_change",(e=>this.setState({textsize:e}))),t.add(C.default,"panes_will_change",this.handlePanesWillChange),t.add(C.default,"panes_did_change",this.handlePanesDidChange),t.add(C.default,"scroll_to_focused_msg",(()=>{this._chatOpenScrollTimestamp=Date.now()})),t.add(window,"focus",this.handleWindowGainedFocus),t.add(window,"blur",this.handleWindowLostFocus),t.add(window,"resize",this._handleResizeThrottle),t.add(window,"resize",this._handleResizeDebounce),t.add(B.default,"change:msgKey",this.handleMsgKeyChange),t.add(C.default,"new_history_sync_chunk_processed",this._handleHistorySyncStateUpdate),this._attachMsgCollectionObservers(this.props);var a=this.props.rejectOnUnmount();(0,A.default)({signal:a}).then((()=>{a.isRejected()||this._showStickyDateMarker()})).catch((0,h.filteredCatch)(f.AbortError,(()=>{}))),this.props.updateOpenedChatInfo({chat:e}),(0,$.sendSeen)(e),this._updateForCurrentPosition(),this._notifyChatRendered()}static getDerivedStateFromProps(e,t){var a={lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx};return e.selectable!==t.lastSelectable||e.chat===t.lastChat&&e.msgCollection===t.lastMsgCollection&&e.focusCtx===t.lastFocusCtx||(a=(0,l.default)((0,l.default)({},a),{},{msgLoadState:te(e.msgCollection)},re(e,t.unreadCount))),a}shouldComponentUpdate(e,t){if(!(0,g.default)(e,this.props))return!0;var a=this.state,{msgLoadState:r}=a,i=(0,s.default)(a,["msgLoadState"]),{msgLoadState:l}=t,n=(0,s.default)(t,["msgLoadState"]);return!(0,g.default)(l,r)||!(0,g.default)(n,i)}componentDidUpdate(e){e.selectable!==this.props.selectable||e.chat===this.props.chat&&e.msgCollection===this.props.msgCollection&&e.focusCtx===this.props.focusCtx||(this._loadRecentMsgsPromise&&this._loadRecentMsgsPromise.cancel(),this._attachMsgCollectionObservers(this.props));var{chat:t}=this.props;this._updateRenderedMsgCache(e.chat===t),this.props.updateOpenedChatInfo({chat:t}),e.msgCollection!==this.props.msgCollection&&this._updateForCurrentPosition(),this._notifyChatRendered()}_getMsgBottom(e,t){var a=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return r-(t.offsetTop+t.clientHeight+(r-(a+i)))}_setMsgBottom(e,t,a){var r=t.offsetTop+t.clientHeight+a-e.clientHeight;this._setScrollTop(e,r)}getRenderedMessageCount(){return this.getMsgs().length}setScrollBottom(e){var t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)}_setScrollTop(e,t){this._programmaticScroll=Date.now(),e&&(e.scrollTop=t)}_showStickyDateMarker(){var e;null===(e=this._refStickyDateMarker.current)||void 0===e||e.setVisibility(!0),this._hideStickyDateMarker.debounce(3e3)}_nearBottom(){var e=this.scrollContainer;return!!e&&e.scrollTop+y.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight}getUnreadFocusCtx(e){var t,{chat:a,msgCollection:r,focusCtx:i}=e||this.props;if(a.unreadCount?t=a.unreadCount:this.state&&this.state.unreadCount&&(t=this.state.unreadCount),(!i||se(this.props))&&t){var s=r.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,t);if(s.length===t)return{msg:s=s[s.length-1],isUnreadDivider:a.shouldShowUnreadDivider,highlightMsg:!1}}}getMsgs(){var{focusCtx:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;return e&&r.isLoadingAroundMsgs?[]:t.toArray().slice(a.getStart(t),a.getEnd(t)).map((e=>e.safe()))}_updateRenderedMsgCache(e){var t=this._refMessageList.current;if(t){for(var a=[],r=t.props.msgs,i=new Map,s={},l=0,n=r.length-1;l<n;){var o=Math.floor((l+n)/2),d=r[o].id.toString(),u=t.getMsgWrapperRef(d);t.getMsgVisibility(u).visibility===y.default.VISIBILITY.ABOVE?l=o+1:n=o}for(var c=l;c<r.length;c++){var f=r[c].id.toString(),h=t.getMsgWrapperRef(f);if(!h)throw new Error("msgRef not found!");var p=t.getMsgVisibility(h);if(p.visibility!==y.default.VISIBILITY.VISIBLE)break;s[f]={offset:p.offset,t:r[c].t},i.set(f,h),a.push(r[c].id)}if(this.scrollContainer){var _=this.scrollContainer.scrollTop;l=0,n=Object.keys(t.getRenderedDateMarkers()).length-1;var v=t.getDateMarkerRef(0),g=v&&v.getElement();if(g&&g.offsetTop<=_+8.5)for(;l<n;){var E=Math.ceil((l+n)/2),S=t.getDateMarkerRef(E);if(!S)throw new Error(`DateMarkerRef: ${E} not found. ${Object.keys(t.getRenderedDateMarkers()).toString()}}`);(0,m.default)(S.getElement(),"midDateMarkerRef.getElement()").offsetTop>_+8.5?n=E-1:l=E}else l=-1;this._updateStickyDateMarker.onOrBefore(0,{dateMarkerIdx:l,silent:e}),this._dateMarkerIdx=l,this.pauseHiddenGifs(this._renderedMsgCache,i),this._renderedMsgCache=i,this._visibleMsgOrder=a,w.default.isGroupCatchUpEnabled()&&this.props.chat.isGroup&&this._removeViewedMentions(),this.props.updateOpenedChatInfo({renderedMsgsInfo:s,visibleMsgOrder:a,clientHeight:this.scrollContainer?this.scrollContainer.clientHeight:0})}}else this._renderedMsgCache.clear()}getMsgComponent(e){var t=this._refMessageList.current;if(t)return t.getMsgComponentRef(e.toString())}pauseHiddenGifs(e,t){e.forEach(((e,a)=>{if(!t.has(a)){var r=this.props.msgCollection.get(a),i=this._refMessageList.current,s=null==i?void 0:i.getMsgComponentRef(a);(null==r?void 0:r.isGif)&&(null==s||s.pause())}}))}_maybeSendSeen(e,t){var a=e,r=t,{chat:i,msgCollection:s}=this.props,{cursor:l}=this.state;if(i.isDirty()&&se(this.props)&&l.getEnd(s)>=s.length&&((0,o.default)(r)&&(r=document.hasFocus()),r&&((0,o.default)(a)&&(a=this._nearBottom()),a)))return(0,$.sendSeen)(i),!0}render(){var e,{chat:t,msgCollection:a,selectable:r,onMessageSelect:i}=this.props,{focusCtx:s,msgLoadState:l,unreadMentionCount:n}=this.state,o=(0,c.default)(I.default.pane,{[I.default.selectable]:r}),d=y.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));d&&(e=d.classname);var u,f,h,p,m=this.getMsgs(),v=_.default.createElement(F.default,{ref:this._refMessageList,getScrollContainer:this._getScrollContainer,chat:t,unreadCount:this.state.unreadCount,selectable:r,onMessageSelect:i,msgs:m,focusedMsgCtx:s,selectedMessages:this.props.selectedMessages,isMsgVisible:this.isMsgVisible,getSequentialMsg:this.getSequentialMsg,isLoadingEarlierMsgs:l.isLoadingEarlierMsgs}),g=_.default.createElement(L.default,{direction:"around",isMostRecentCMC:se(this.props),loadMoreMsgs:()=>{},isLoadingEarlierMsgs:l.isLoadingEarlierMsgs,isLoadingRecentMsgs:l.isLoadingRecentMsgs,isLoadingAroundMsgs:l.isLoadingAroundMsgs});(this.state.cursor.getStart(a)>0||!l.noEarlierMsgs||ae(t,se(this.props),l))&&(u=_.default.createElement(L.default,{direction:"earlier",isMostRecentCMC:se(this.props),loadMoreMsgs:this.loadEarlierMsgs,isLoadingEarlierMsgs:l.isLoadingEarlierMsgs,isLoadingRecentMsgs:l.isLoadingRecentMsgs,isLoadingAroundMsgs:l.isLoadingAroundMsgs})),(this.state.cursor.getEnd(a)<a.length||!se(this.props))&&(f=_.default.createElement(L.default,{direction:"recent",isMostRecentCMC:se(this.props),loadMoreMsgs:this._loadRecentMsgs,isLoadingEarlierMsgs:l.isLoadingEarlierMsgs,isLoadingRecentMsgs:l.isLoadingRecentMsgs,isLoadingAroundMsgs:l.isLoadingAroundMsgs})),s&&l.isLoadingAroundMsgs?(f=void 0,u=void 0):g=void 0;var{isNearBottom:S,newUnread:C}=this.state;if(!S||!l.isLoadingAroundMsgs&&!se(this.props)){C&&t.unreadCount&&(p=_.default.createElement(z.default,{count:this.state.newUnread,key:"icon-unread"}));var b=(0,c.default)(I.default.incoming,{[I.default.ffFix]:Y.default.isGecko});h=_.default.createElement("div",{className:b,onClick:this._jumpToBottom,role:"button"},_.default.createElement(X.default,{transitionName:"pop",className:I.default.unread},p),_.default.createElement(H.default,{name:"down",className:I.default.iconDown}))}var T,A,N=null;if(w.default.isGroupCatchUpEnabled()&&t.isGroup&&n>0){var O=(0,c.default)(I.default.atMentions,{[I.default.ffFix]:Y.default.isGecko,[I.default.buttonGap]:h,[I.default.buttonGapRemove]:!h}),D=_.default.createElement("button",{className:O,onClick:this._jumpToMention},_.default.createElement(X.default,{transitionName:"pop",className:I.default.unread},_.default.createElement(z.default,{count:n})),_.default.createElement(H.default,{name:"mentions",className:I.default.iconMentions}));N=S?D:_.default.createElement(X.default,{transitionName:"pop"},D)}if(this.state.contextMenu&&(T=_.default.createElement(K.default,{displayName:"ConversationContextMenu",escapable:!0,popable:!0,requestDismiss:this.handleContextClose},_.default.createElement(q.default,{contextMenu:this.state.contextMenu}))),w.default.supportsFeature(w.default.F.MD_BACKEND)&&!l.isLoadingEarlierMsgs&&!l.isLoadingRecentMsgs&&!l.isLoadingAroundMsgs){var k,x;if(t.endOfHistoryTransferType===E.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE)k=R.default.t(646);else if(null!=t.endOfHistoryTransferType&&l.noEarlierMsgs&&!l.isLoadingEarlierMsgs)switch(t.endOfHistoryTransferType){case E.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:k=R.default.t(645),x=R.default.t(644);break;case E.ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:case E.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE:}null!=k&&(A=_.default.createElement(M.default,{icon:_.default.createElement(H.default,{name:"content-chat"}),theme:"conversation",secondary:x},k))}return _.default.createElement(P.default,{className:e},_.default.createElement(V.default,{ref:this._refStickyDateMarker}),_.default.createElement("div",{className:I.default.incomingContainer},N,_.default.createElement(X.default,{transitionName:"pop"},h)),_.default.createElement("div",{className:o,ref:this._setScrollContainer,onScroll:this.handleScroll,onKeyPress:this.handleKeyPress,onContextMenu:r?null:this.handleContextMenu,onPaste:this.handlePaste,tabIndex:"0"},A,_.default.createElement("div",{className:I.default.empty}),g,u,v,f),T)}}J.displayName="ConversationMsgs";var Z=(0,U.default)((0,k.default)(J));function ee(e){return null==e?null:null!=e.key?(0,l.default)((0,l.default)({},e),{},{msg:B.default.get(e.key)}):e}function te(e){var{msgLoadState:t}=e;return{noEarlierMsgs:t.noEarlierMsgs,isLoadingEarlierMsgs:t.isLoadingEarlierMsgs,isLoadingRecentMsgs:t.isLoadingRecentMsgs,isLoadingAroundMsgs:t.isLoadingAroundMsgs,contextLoaded:t.contextLoaded}}function ae(e,t,a){var r=a.noEarlierMsgs&&e.shouldAppearInList&&t&&e.msgChunks.filter((e=>e.filter((t=>t.msgChunk===e)).length>0)).length>0;return r&&(__LOG__(4,void 0,new Error,!0)`MRM noEarlierMsgs on chat ${String(e.id)} is true but chat.msgChunks has length: ${e.msgChunks.length},
and chat.msgs.length: ${e.msgs.length}`,SEND_LOGS("noEarlierMsgs-error")),r}function re(e,t){var{focusCtx:a,chat:r,msgCollection:i}=e,s=ee(a)||ie(e,t),l=s&&s.msg,n=l&&l.id;return{cursor:j.default.create({msgCollection:i,focusedMsgKey:n,type:r.isGroup?y.default.RENDER_CURSOR.GROUP_CONVERSATION:y.default.RENDER_CURSOR.CONVERSATION}),focusCtx:s}}function ie(e,t){var a,{chat:r,msgCollection:i,focusCtx:s}=e;if(a=r.unreadCount?r.unreadCount:t,(!s||se(e))&&a){var l=i.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,a);if(l.length===a)return{msg:l=l[l.length-1],isUnreadDivider:r.shouldShowUnreadDivider,highlightMsg:!1}}}function se(e){return e.chat.msgs===e.msgCollection}t.default=class extends Z{getRenderedMessageCount(){return this.getComponent().getRenderedMessageCount()}getScrollBottom(){return this.getComponent().getScrollBottom()}onComposeHeightChange(e){this.getComponent().handleComposeHeightChange(e)}onPageUpDown(e){this.getComponent().handlePageUpDown(e)}setScrollBottom(e){this.getComponent().setScrollBottom(e)}}},76217:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(78718)),l=a(58566),n=a(24788),o=i(a(63337)),d=r(a(67294)),u=i(a(55847)),c=i(a(41850)),f=i(a(81578)),h=i(a(97699)),p=i(a(33766)),m=i(a(6291)),_=i(a(75444)),v=i(a(36869)),g=i(a(87901)),E=i(a(10715)),S=i(a(64768)),C=i(a(69027)),y=i(a(42684)),b=r(a(12536)),M=a(26226),T=i(a(75950)),I=i(a(77188)),P=i(a(83712)),A=i(a(88873)),N=i(a(80162)),O=i(a(80896)),D=i(a(72462)),w=i(a(67030)),R=i(a(63611)),k=i(a(85726)),L=i(a(43232)),x=i(a(26144)),F=i(a(59979)),B=i(a(4328));class G extends d.Component{constructor(e){super(e),this._fillerHeight=0,this._composeBoxRef=(0,d.createRef)(),this._refConversationMsgs=(0,d.createRef)(),this._maybeOpenEphemeralNUX=()=>{var{chat:e}=this.props;(0,M.shouldShowNUX)(_.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&p.default.ephemeralDrawer(e)},this._updateAnnounceGrpState=()=>{this.forceUpdate()},this._handleComposeState=()=>{var e=this.props.chat.canSend;this.state.canCompose!==e&&(e||(this._fillerHeight=0),this.setState({canCompose:e}))},this.handleComposeHeightChange=({input:e,overlay:t=0},a)=>{var r=this._refMsgPanel,i=this._refConversationMsgs.current;if(r&&i){var s=i.getScrollBottom();if(void 0===e){if(a)return this._fillerHeight=t,this._updateFillerHeight(),void i.setScrollBottom(s);this._fillerHeight+=t,t<0&&(this._updateFillerHeight(),i.setScrollBottom(s)),this._msgPanelAnimation&&(this.didCancel=!0,this._msgPanelAnimation.cancel()),this._msgPanelAnimation=(this._msgPanelAnimation||Promise.resolve()).then((()=>(0,F.default)(r,{translateY:t>0?[-t,0]:[0,t]},{duration:300,easing:[.1,.82,.25,1]}))).cancellable().catch((0,n.filteredCatch)(b.Unmount,(()=>{}))).then((()=>{t>0&&this._updateFillerHeight(),r.style.transform="";var e=this._refConversationMsgs.current;t>0&&(null==e||e.setScrollBottom(s))})).catch((0,n.filteredCatch)(Promise.CancellationError,(()=>{(0,F.default)(r,"finish",!0)}))).then((()=>{this.didCancel?this.didCancel=!1:this._msgPanelAnimation=void 0}))}else i.onComposeHeightChange(e)}},this.handleSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.handleCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.handleMessageSelect=(e,t,a)=>{this.handleSelectMessages();var r=this.selectedMessages.getSelected().pop(),i=a&&a.shiftKey;this.selectedMessages.setVal(e,t,!0),i&&this._selectMsgRange(r,e,t)},this._selectMsgRange=(e,t,a)=>{var{msgCollection:r}=this.props;if(e&&r){var i=r.indexOf(e);if(i)for(var s=r.indexOf(t),l=s>i?-1:1,n=i+(a?l:s<i?0:2*l);s!==n;)this.selectedMessages.setVal((0,o.default)(r.at(s),"msgCollection.at(currentSelectedIndex)").safe(),a,!0),s+=l}},this.handlePageUpDown=e=>{var t;null===(t=this._refConversationMsgs.current)||void 0===t||t.onPageUpDown(e)},this.handleDragStart=()=>{this.state.canCompose&&(this.blockDrop=!0)},this.handleDragEnd=()=>{this.state.canCompose&&(this.blockDrop=!1)},this.handleDragEnter=e=>{if(this.state.canCompose){this.handleCancelSelection();var t=new C.default(e.dataTransfer),a=this._composeBoxRef.current;null!=a&&!this.blockDrop&&(t.hasType("Files")||t.hasType("text/uri-list")||t.hasType("text/html"))&&(a.flushSaveComposeContentDebounced(),p.default.attachMediaDrawer({chat:this.props.chat,initCaption:a.getCurrentComposeContent(),onComplete:a.updateTextAfterMediaDrawerClose}),e.stopPropagation(),e.preventDefault())}},this._setRefFiller=e=>{this._refFiller=e},this._setRefMsgPanel=e=>{this._refMsgPanel=e},this._handleSetRefHeader=e=>{this._refHeader=e},this._getHeaderOffset=e=>{if(this._refHeader){var t=this._refHeader.getBoundingClientRect();e((0,s.default)(t,["right","bottom"]))}else e(null)},this._closeGroupDescription=()=>{this.setState({showGroupDesc:!1})},this._getFillerHeight=()=>Math.max(0,this._fillerHeight),this._updateFillerHeight=()=>{var e=this._getFillerHeight();this._refFiller&&(this._refFiller.style.height=`${e}px`)};var{chat:t}=this.props;this.selectedMessages=new R.default([],(e=>e.id.toString())),this.state={canCompose:t.canSend,selectable:!1,showGroupDesc:t.isGroup&&this._showGroupDesc()},this._openEvent=new D.default.WebcChatOpen({webcUnreadCount:t.unreadCount,webcWindowHeightFloat:(0,T.default)()}),this.uiActionEvent=new D.default.UiAction({uiActionType:D.default.UI_ACTION_TYPE.CHAT_OPEN,uiActionPreloaded:!0})}_showGroupDesc(){if(!(I.default.supportsFeature(I.default.F.GROUPS_V_3)&&L.default.groupDescLength>0))return!1;var{chat:e}=this.props;return!(0,M.getSeenGroupDesc)(e.id)&&((0,M.setSeenGroupDesc)(e.id),0===e.unreadCount?!e.msgs.some((e=>e.type!==_.default.MSG_TYPE.E2E_NOTIFICATION&&e.type!==_.default.MSG_TYPE.GP2)):!e.shouldShowUnreadDivider)}componentDidMount(){var{chat:e}=this.props;this.props.listeners.add(e,"change:canSend",this._handleComposeState),this.props.listeners.add(e,"change:isReadOnly change:isAnnounceGrpRestrict",this._updateAnnounceGrpState),this.props.listeners.add(p.default,"get_conversation_header_offset",this._getHeaderOffset),this.props.listeners.add(e.msgs,"remove",(e=>{this.selectedMessages.isSelected(e)&&this.handleMessageSelect(e,!1)}));var t=e.getReceivedVcardMsgs();t&&!t.isSynced&&t.sync(e),e.active=!0;var a=this._openEvent;if(a){this._openEvent=null,this._refConversationMsgs.current&&(a.webcRenderedMessageCount=this._refConversationMsgs.current.getRenderedMessageCount()),a.markWebcChatOpenT(),this._beforePaintRafId=requestAnimationFrame((()=>{this._beforePaintRafId=null,a.markWebcChatOpenBeforePaintT()}));var r=this.props.rejectOnUnmount();(0,y.default)({signal:r}).then((()=>{r.isRejected()||(this._refConversationMsgs.current&&(a.webcFinalRenderedMessageCount=this._refConversationMsgs.current.getRenderedMessageCount()),a.markWebcChatOpenPaintedT(),a.commit())})).catch((0,n.filteredCatch)(l.AbortError,(()=>{})))}var i=this.uiActionEvent;i&&(i.markUiActionT(),i.commit(),this.uiActionEvent=void 0),e.attachMediaContents&&p.default.attachMediaDrawer({chat:e,animationName:"noop"}),(0,M.shouldShowNUX)(_.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&p.default.ephemeralDrawer(e),(0,M.shouldShowNUX)(_.default.NUX.EPHEMERAL)&&(e.isGroup&&null!=e.groupMetadata?this.props.listeners.add(e.groupMetadata,"change:ephemeralDuration",this._maybeOpenEphemeralNUX):e.isUser&&this.props.listeners.add(e,"change:ephemeralDuration",this._maybeOpenEphemeralNUX))}componentWillUnmount(){var{chat:e}=this.props;e.urlText&&(e.urlText=void 0),e.urlNumber&&(e.urlNumber=void 0),e.active=!1,null!=this._beforePaintRafId&&cancelAnimationFrame(this._beforePaintRafId)}render(){var e,t,a,r,{chat:i,msgCollection:s,focusCtx:l,groupMetadata:n}=this.props;if(this.state.showGroupDesc&&n&&n.desc&&(r=d.default.createElement(x.default,{displayName:"GroupDesc",escapable:!0,requestDismiss:this._closeGroupDescription},d.default.createElement(S.default,{onClose:this._closeGroupDescription},d.default.createElement(P.default,{chat:i,groupMetadata:n})))),this.state.selectable)t=d.default.createElement(x.default,{displayName:"MultiSelect",escapable:!0,requestDismiss:this.handleCancelSelection},d.default.createElement(w.default,{chat:i,selectedMessages:this.selectedMessages,disableRevoke:!1,noSortOnForward:!1,onCancel:this.handleCancelSelection})),e=d.default.createElement("footer",{className:E.default.footer}),a=d.default.createElement("div",{ref:this._setRefFiller,className:E.default.filler});else if(this.state.canCompose)e=d.default.createElement(m.default,{chat:i,ref:this._composeBoxRef,onComposeHeightChange:this.handleComposeHeightChange,onPageUpDown:this.handlePageUpDown}),a=d.default.createElement("div",{ref:this._setRefFiller,style:{height:`${this._getFillerHeight()}px`},className:E.default.filler});else{var o,p;i.isGroup&&!i.isReadOnly&&i.isAnnounceGrpRestrict&&n?o=d.default.createElement(c.default,{chat:i,groupMetadata:n,mute:i.mute}):p=i.isGroup?n.support?N.default.t(1535):N.default.t(1769):i.isPSA?N.default.t(1993):N.default.t(1770,{contact:i.contact.formattedName}),e=d.default.createElement("footer",{className:E.default.footer},d.default.createElement("div",{"data-a8n":u.default.key("block-message"),className:E.default.footerMessage},o||p))}return d.default.createElement(d.default.Fragment,null,d.default.createElement(v.default,{wallpaperColor:this.props.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),d.default.createElement(A.default,{chat:i,contact:i.contact,onSelectMessages:this.handleSelectMessages,onRef:this._handleSetRefHeader}),d.default.createElement(B.default,{transitionName:"butterbar",className:E.default.subheader},r),d.default.createElement("div",{className:E.default.subheader},d.default.createElement(f.default,{chat:i})),d.default.createElement("div",{className:E.default.body,ref:this._setRefMsgPanel,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onDragEnter:this.handleDragEnter},d.default.createElement(g.default,{ref:this._refConversationMsgs,chat:i,selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,msgCollection:s,onSelectMessages:this.handleSelectMessages,focusCtx:l,selectedMessages:this.selectedMessages,notifyChatRendered:this.props.notifyChatRendered,updateOpenedChatInfo:this.props.updateOpenedChatInfo})),a,e,d.default.createElement(B.default,{transitionName:"slide-up"},t),d.default.createElement(h.default,null))}}G.displayName="ConversationPanel";var U=(0,k.default)((0,O.default)(G));t.default=U},94708:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(94184)),n=r(a(67294)),o=a(51774),d=i(a(51258)),u=i(a(75444)),c=i(a(36869)),f=i(a(10715)),h=i(a(76217)),p=i(a(62391)),m=i(a(97095)),_=i(a(80162)),v=i(a(80896)),g=i(a(72765)),E=i(a(26144));class S extends n.Component{constructor(e){super(e),this._setRefContainer=e=>{this._refContainer=e},this._handleWallpaperColorPreview=e=>{e?this.state.wallpaperColor!==e&&this.setState({wallpaperColor:e}):this.setState({wallpaperColor:d.default.assertGet("defaultPreference").wallpaperColor})},this.state={wallpaperColor:this.props.chatPreference.wallpaperColor,prevWallpaperColor:this.props.chatPreference.wallpaperColor}}static getDerivedStateFromProps(e,t){return e.chatPreference.wallpaperColor!==t.prevWallpaperColor?(0,s.default)((0,s.default)({},t),{},{wallpaperColor:e.chatPreference.wallpaperColor,prevWallpaperColor:e.chatPreference.wallpaperColor}):null}componentDidMount(){this.props.listeners.add(d.default,"wallpaper_color_preview",this._handleWallpaperColorPreview)}animatePanel(e,t){var a,r=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=r&&e!==t&&(0,o.animateConversationPanel)(this._refContainer,r/(e-t))}containsDOMNode(e){return!!this._refContainer&&this._refContainer.contains(e)}render(){var e,t={};this.state.wallpaperColor!==u.default.DEFAULT_CHAT_WALLPAPER&&(t={backgroundColor:this.state.wallpaperColor});var{chat:a,msgCollection:r,focusCtx:i,notifyChatRendered:s,updateOpenedChatInfo:o,showPreview:v}=this.props;return a&&r?e=n.default.createElement(h.default,{chat:a,groupMetadata:a.groupMetadata,chatPreference:d.default.assertGet("defaultPreference"),focusCtx:i,msgCollection:r,notifyChatRendered:s,updateOpenedChatInfo:o,key:a.id.toString(),wallpaperColor:this.state.wallpaperColor}):v&&(e=n.default.createElement(n.default.Fragment,null,n.default.createElement("header",{className:(0,l.default)(m.default.chatHeader,p.default.header)},n.default.createElement("span",{className:(0,l.default)(p.default.title,m.default.chatTitle)},_.default.t(1749))),n.default.createElement(c.default,{wallpaperColor:this.state.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),n.default.createElement("footer",{className:f.default.footer}))),n.default.createElement(E.default,{displayName:"ConversationPanel",uimState:E.default.State.INACTIVE},n.default.createElement("div",{id:"main",className:(0,l.default)(p.default.pane,{[p.default.previewPane]:this.props.showPreview}),style:t,ref:this._setRefContainer},e))}}S.CONCERNS={chatPreference:["wallpaperColor","showDoodle"]},S.displayName="ConversationPreviewPanel";var C=(0,v.default)((0,g.default)(S,S.CONCERNS));t.default=class extends C{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},64768:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(78438)),n=r(a(32885));class o extends s.Component{constructor(...e){super(...e),this._refDiv=(0,s.createRef)(),this.getElement=()=>this._refDiv.current}render(){var e=this.props.onClose?s.default.createElement("div",{className:l.default.closeBtn,role:"button",onClick:this.props.onClose},s.default.createElement(n.default,{name:"x"})):null;return s.default.createElement("div",{className:l.default.subheader,ref:this._refDiv},s.default.createElement("div",{className:l.default.main},this.props.children),e)}}t.default=o,o.displayName="ConversationSubheader"},83712:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(20923)),d=i(a(89576)),u=a(99375),c=i(a(80162)),f=r(a(66802)),h=i(a(42529)),p=i(a(72765)),m=a(38245);class _ extends l.Component{constructor(e){super(e),this._setBodyRef=e=>{this._bodyRef=e},this._setDescRef=e=>{this._descRef=e},this.handleResize=({width:e})=>{var{descWidth:t}=this.state;t<=0||this.setState({truncated:e<t})},this.handleReadMore=()=>{var{chat:e}=this.props;n.default.chatInfoDrawer(e,!0)},this.state={desc:g(e.groupMetadata),descWidth:0,truncated:!1,hidden:!0}}componentDidMount(){this._handleDescWidthObtained()}static getDerivedStateFromProps(e,t){var a=g(e.groupMetadata);return a===t.desc?null:{desc:a,descWidth:0,truncated:!1,hidden:!0}}componentDidUpdate(e,t){t.desc!==this.state.desc&&this._handleDescWidthObtained()}_handleDescWidthObtained(){var{_bodyRef:e,_descRef:t}=this;if(e&&t){var a=e.clientWidth,r=t.getWidth();this.setState({descWidth:r,truncated:a<r,hidden:!1})}}render(){var{desc:e}=this.state;if(!e)return null;var{truncated:t,hidden:a}=this.state,r=this.props.chat.isTrusted()?u.Configuration.TrustedGroupDesc({links:f.findLinks(e)}):u.Configuration.UntrustedGroupDesc();return l.default.createElement(l.default.Fragment,null,l.default.createElement(m.TextDiv,{theme:"title"},c.default.t(1843)),l.default.createElement(h.default,{onRef:this._setBodyRef,onResize:this.handleResize,className:d.default.body},l.default.createElement(m.TextSpan,{theme:"small",className:(0,s.default)(d.default.text,{[d.default.hidden]:a})},l.default.createElement(o.default,{ref:this._setDescRef,text:e,selectable:!0,formatters:r,className:d.default.desc}),t&&l.default.createElement("div",{className:d.default.more,role:"button",onClick:this.handleReadMore},c.default.t(1380)))))}}_.CONCERNS={groupMetadata:["desc"]},_.displayName="GroupDescriptionBar";var v=(0,p.default)(_,_.CONCERNS);function g(e){return e&&e.desc}t.default=v},57657:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(60008)),n=r(a(357)),o=r(a(68837)),d=r(a(81732)),u=a(95140),c=r(a(33766)),f=r(a(11288)),h=r(a(75444)),p=r(a(44373)),m=r(a(7970)),_=a(37470),v=r(a(51678)),g=a(26226),E=r(a(14614)),S=r(a(83288)),C=r(a(80162)),y=r(a(80896)),b=a(4566),M=a(84649),T=r(a(29093)),I=r(a(72462)),P=a(5106),A=r(a(68290)),N=r(a(43232)),O=r(a(32885)),D=r(a(99769));class w extends s.Component{constructor(...e){super(...e),this._refContainer=(0,s.createRef)(),this._setDocPicker=e=>this._docPicker=e,this._setMediaPicker=e=>this._mediaPicker=e,this._handleDocumentPick=e=>{if(e){e.stopPropagation();var t=null==e.target.files?[]:Array.from(e.target.files);if(this.dismiss(),t.length){var a=t.map((e=>({file:e,type:_.FILETYPE.DOCUMENT})));this.attachMediaDrawer(a)}}else this.dismiss()},this._handleMediaPick=e=>{if(e){e.stopPropagation();var t=null==e.target.files?[]:Array.from(e.target.files);this.dismiss(),t.length&&this.attachMediaDrawer(t.map((e=>({file:e}))))}else this.dismiss()},this._handleMediaClick=e=>{if(e.preventDefault(),this._mediaPicker)return this._mediaPicker.open(),!1},this._handleDocumentClick=e=>{if(e.preventDefault(),this._docPicker)return this._docPicker.open(),!1},this.handleContactClick=e=>{e.preventDefault(),c.default.openModal(s.default.createElement(o.default,{chat:this.props.chat,onContactsSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,!1)}}))},this.handleProductCatalogClick=e=>{e.preventDefault();var t=this._productCatalogSession.toString();(0,b.logCatalogAttachmentButtonClick)(t),c.default.openModal(s.default.createElement(n.default,{chat:this.props.chat,sessionId:t}))},this.handleCreateMessengerRoom=()=>{(0,g.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,g.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,g.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)?c.default.openModal(s.default.createElement(T.default,{chat:this.props.chat})):(0,M.openMessengerRoomUrl)(this.props.chat)}}getElement(){return this._refContainer.current}componentDidMount(){this._productCatalogSession=new A.default;var e=d.default.get((0,g.getMaybeMeUser)());e&&this.props.listeners.add(e,"change:profileOptions",(()=>{this.forceUpdate()}))}_canSendProductCatalog(){if(!f.default.isSMB)return!1;if(!N.default.shopsHideCatalogAttachmentEntrypoint)return!0;var e=d.default.get((0,g.getMaybeMeUser)());return!(0,u.hasShop)(e)}dismiss(){var{uim:e}=this.props;e&&e.uie.requestDismiss()}attachMediaDrawer(e){c.default.attachMediaDrawer({chat:this.props.chat,attachments:e,fileOrigin:I.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,initCaption:this.props.getComposeContents&&this.props.getComposeContents(),onComplete:(e,t)=>{this.props.onMenuComplete&&this.props.onMenuComplete(e,t)}})}_renderAttachDocDropdownItem(){return s.default.createElement(m.default,{type:"icon",tooltip:s.default.createElement(D.default,null,C.default.t(248)),a8n:"mi-attach-document",action:this._handleDocumentClick},s.default.createElement("button",{className:l.default.iconsItem,"data-animate-menu-icons-item":!0},s.default.createElement(O.default,{name:"attach-document",className:l.default.iconImage}),s.default.createElement(v.default,{ref:this._setDocPicker,mimes:P.DOC_MIMES,onChange:this._handleDocumentPick})))}_renderAttachMessengerRoomDropdownItem(){return s.default.createElement(m.default,{type:"icon",tooltip:s.default.createElement(D.default,null,C.default.t(1138)),a8n:"mi-create-messenger-room",action:this.handleCreateMessengerRoom},s.default.createElement("button",{className:l.default.iconsItem,"data-animate-menu-icons-item":!0},s.default.createElement(O.default,{name:"attach-rooms",className:l.default.iconImage})))}_renderAttachProductCatalogDropdownItem(){return this._canSendProductCatalog()?s.default.createElement(m.default,{type:"icon",tooltip:s.default.createElement(D.default,null,C.default.t(251)),a8n:"mi-attach-product-catalog",action:this.handleProductCatalogClick},s.default.createElement("button",{className:l.default.iconsItem,"data-animate-menu-icons-item":!0},s.default.createElement(O.default,{name:"attach-product",className:l.default.iconImage}))):null}render(){return s.default.createElement("div",{className:l.default.attachMenuContainer,ref:this._refContainer},s.default.createElement(O.default,{name:"attach-shadow"}),s.default.createElement(p.default,{type:"menu",key:"AttachMenuDropdown"},s.default.createElement(m.default,{type:"icon",tooltip:s.default.createElement(D.default,null,C.default.t(250)),a8n:"mi-attach-media",action:this._handleMediaClick},s.default.createElement("button",{className:l.default.iconsItem,"data-animate-menu-icons-item":!0},s.default.createElement(O.default,{name:"attach-image",className:l.default.iconImage}),s.default.createElement(v.default,{ref:this._setMediaPicker,mimes:[h.default.IMAGE_MIMES,h.default.VIDEO_MIMES].join(","),onChange:this._handleMediaPick}))),s.default.createElement(m.default,{type:"icon",tooltip:s.default.createElement(D.default,null,C.default.t(246)),a8n:"mi-attach-camera",action:this.props.onCaptureClick,disabled:!E.default},s.default.createElement("button",{className:l.default.iconsItem,"data-animate-menu-icons-item":!0},s.default.createElement(O.default,{name:"attach-camera",className:l.default.iconImage}))),this._renderAttachDocDropdownItem(),s.default.createElement(m.default,{type:"icon",tooltip:s.default.createElement(D.default,null,C.default.t(252)),a8n:"mi-attach-contact",action:this.handleContactClick},s.default.createElement("button",{className:l.default.iconsItem,"data-animate-menu-icons-item":!0},s.default.createElement(O.default,{name:"attach-contact",className:l.default.iconImage}))),this._renderAttachProductCatalogDropdownItem(),this._renderAttachMessengerRoomDropdownItem()))}}w.displayName="AttachMenuDropdown";var R=(0,y.default)((0,S.default)(w));t.default=R},85012:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(24788),l=i(a(67294)),n=r(a(57657)),o=r(a(88622)),d=r(a(33766)),u=i(a(12536)),c=i(a(29742)),f=r(a(80162)),h=i(a(46505)),p=a(97713),m=r(a(85726)),_=a(6578),v=r(a(32885));class g extends l.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this._checkForDrawerMid(e)},this._handleDropdownCaptureClick=()=>{this._openCaptureFlow()}}componentWillUnmount(){var e;null===(e=this._disposeStream)||void 0===e||e.call(this),d.default.closeDrawerMid()}_checkForDrawerMid(e){d.default.existsDrawerMid((t=>{t&&e.preventDefault()}))}_openCaptureFlow(){var e=this.props.chat,{asyncStream:t,disposeStream:a}=h.start("camera");this._disposeStream=a,t.then((t=>{t&&d.default.openDrawerMid(l.default.createElement(o.default,{chat:(0,_.unproxy)(e),stream:t,disposeStream:this._disposeStream,onCaptureSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,!1)}}),"slide-up",this.context.uim,{noFocus:!0})})).catch((0,s.filteredCatch)(u.GUM.NotAllowedError,(()=>{d.default.openModal(l.default.createElement(c.default,{messaging:c.Messaging.CAMERA_FAIL,type:c.default.TYPE.GUIDE_UNBLOCK}))}))).catch((0,s.filteredCatch)(u.GUM.GUMError,(()=>{d.default.openModal(l.default.createElement(c.default,{messaging:c.Messaging.CAMERA_MISSING,type:c.default.TYPE.GUIDE_NONE}))})))}render(){return l.default.createElement(p.MenuBarItem,{a8nText:"conversation-clip",icon:l.default.createElement(v.default,{name:"clip"}),title:f.default.t(1111),transitionName:"menu",onClick:this._handleClick},l.default.createElement(n.default,{chat:this.props.chat,onCaptureClick:this._handleDropdownCaptureClick,getComposeContents:this.props.getComposeContents,onMenuComplete:this.props.onMenuComplete}))}}g.displayName="AttachMenuBarItem";var E=(0,m.default)(g);t.default=E},54347:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(44373)),l=a(91611);class n extends i.Component{constructor(...e){super(...e),this._refDropdown=(0,i.createRef)(),this.getElement=()=>this._refDropdown.current}render(){var{chat:e,onSelectMessages:t}=this.props,a=(0,l.broadcastMenu)(e,t);return this.props.toContextMenuManager?i.default.createElement("div",{ref:this._refDropdown},a):i.default.createElement(s.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"BroadcastMenuDropdown",flipOnRTL:!0,dirX:s.DirX.LEFT},a)}}t.default=n,n.displayName="BroadcastMenuDropdown"},47009:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(44373)),l=a(91611);class n extends i.Component{constructor(...e){super(...e),this._refDropdown=(0,i.createRef)(),this.getElement=()=>this._refDropdown.current}render(){var{chat:e,onSelectMessages:t}=this.props,a=(0,l.groupMenu)(e,t);return this.props.toContextMenuManager?i.default.createElement("div",{ref:this._refDropdown},a):i.default.createElement(s.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"GroupMenuDropdown",flipOnRTL:!0,dirX:s.DirX.LEFT},a)}}t.default=n,n.displayName="GroupMenuDropdown"},88873:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(48926)),l=r(a(67294)),n=i(a(54347)),o=r(a(81732)),d=a(78783),u=a(95140),c=i(a(68868)),f=i(a(33766)),h=i(a(11288)),p=i(a(75444)),m=i(a(80959)),_=i(a(17367)),v=a(44373),g=i(a(47009)),E=i(a(76104)),S=i(a(83288)),C=i(a(97095)),y=i(a(53150)),b=i(a(80162)),M=i(a(80896)),T=a(4566),I=a(97713),P=i(a(72462)),A=i(a(39148)),N=a(38335),O=i(a(68290)),D=i(a(77035)),w=i(a(85726)),R=i(a(43232)),k=i(a(37065)),L=i(a(72765)),x=a(6578),F=i(a(32885)),B=i(a(47809)),G=i(a(11918)),U=i(a(75919)),j=a(17245).default,V=a(62924).Z;class H extends l.Component{constructor(){super(...arguments),this._setRefMenuBarItemContainer=e=>{this.setState({refMenuBarItemContainer:e})},this.isListeningForMove=!1,this.didDrag=!1,this._forceUpdate=()=>{this.forceUpdate()},this._updateVoipAvailability=()=>{this.setState({isVoipAvailable:h.default.isVoipInitialized})},this.setRef=e=>{this.ref=e,this.props.onRef(e)},this.handleWindowFocus=()=>{},this.handleMouseDown=()=>{},this.handleDrag=()=>{this.didDrag=!0},this.handleClickCapture=()=>{},this._handleInfoPanel=()=>{var e=this.props.chat;!e.isPSA&&(e.isUser||e.isBroadcast||e.isGroup)&&f.default.openDrawerRight(l.default.createElement(y.default,{chat:(0,x.unproxy)(e),key:`info-${e.id.toString()}`}),"slide-left",this.props.uim)},this._checkForDrawerMid=e=>{f.default.existsDrawerMid((t=>{t&&e.preventDefault()}))},this.handleChatSearch=e=>{e.preventDefault();var t=this.props.chat;f.default.existsDrawerMid((e=>{e||f.default.openDrawerRight(l.default.createElement(c.default,{chat:(0,x.unproxy)(t),key:`chat-search-${t.id.toString()}`}),"slide-left",this.props.uim)}))},this._handleStartCall=e=>{var t=this.props.chat;if(this.props.chat.isUser)V.checkIfCanStartCall({contact:t.contact,isVideo:e})&&j&&j.callStart(t.contact.id,e);else if(V.checkIfCanStartCall({isGroup:!0,isVideo:e})){var a,r,i,s=null!==(a=null===(r=t.groupMetadata)||void 0===r?void 0:r.participants)&&void 0!==a?a:[],n=null!==(i=s.map((e=>e.contact.id)))&&void 0!==i?i:[];if(s.length>p.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS){var o=l.default.createElement(k.default,{isVideo:e,groupParticipants:n,onStartGroupCall:t=>j.groupCallStart(t,e)});f.default.openModal(o,{transition:"modal-flow"})}else j&&j.groupCallStart(n,e)}},this.handleProductCatalogClick=e=>{e.preventDefault();var t=(0,N.buildProductCatalogContext)(new O.default,P.default.BIZ_PLATFORM.SMB,P.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_CHAT),a=this.props.chat.contact.id;(0,T.logChatCatalogView)({catalogOwnerWid:a,catalogContext:t}),f.default.openDrawerRight(l.default.createElement(D.default,{chat:this.props.chat,catalogOwnerJid:a.toJid()}),"slide-left",this.props.uim,t)},this.handleShopClick=e=>{e.preventDefault(),(0,u.goToShop)(this.props.chat.contact.businessProfile)},this.state={newlyFocused:!1,isVoipAvailable:h.default.isVoipInitialized,refMenuBarItemContainer:null}}_maybeAddProfileListeners(){this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:profileOptions",this._forceUpdate),this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:catalogStatus",this._forceUpdate)}componentDidMount(){var e=this;return(0,s.default)((function*(){e.props.contact.shouldForceBusinessUpdate&&(yield o.default.find(e.props.chat.contact.id),e._forceUpdate()),e._maybeAddProfileListeners(),e.props.listeners.add(h.default,"change:isVoipInitialized",e._updateVoipAvailability)}))()}_getVoiceCallButton(){var{chat:e}=this.props;if(!V.isVoiceCallButtonVisible(e.contact,e))return null;var t=e.contact.isMe,a=e.isUser?b.default.t(1656):b.default.t(920);return CallCollection.activeCall&&(t=!0,a=b.default.t(1701)),l.default.createElement(I.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"voice-call-button",icon:l.default.createElement(F.default,{name:"voice-call"}),onClick:()=>this._handleStartCall(!1),disabled:t,title:a})}_getVideoCallButton(){var{chat:e}=this.props;if(!(this.state.isVoipAvailable&&!e.contact.isEnterprise&&!getIsInternalNumber(e.contact.id.user)&&(e.isUser&&VoipGKUtils.isVideoCallEnabled()||e.isGroup&&VoipGKUtils.isGroupCallEnabled())))return null;var t=e.contact.isMe,a=e.isUser?b.default.t(1630):b.default.t(919);return CallCollection.activeCall&&(t=!0,a=b.default.t(1701)),l.default.createElement(I.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"video-call-button",icon:l.default.createElement(F.default,{name:"video-call"}),onClick:()=>this._handleStartCall(!0),disabled:t,title:a})}_getCommerceButton(){var e,{businessProfile:t}=this.props.chat.contact;return R.default.webShopsChatHeaderButtonEnabled&&(0,u.hasShop)(t)?l.default.createElement(I.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"shop-button",icon:l.default.createElement(F.default,{name:"shop"}),title:b.default.t(1495),onClick:this.handleShopClick}):(null==t||null===(e=t.profileOptions)||void 0===e?void 0:e.commerceExperience)===d.COMMERCE_EXPERIENCE_TYPES.CATALOG||(null==t?void 0:t.catalogStatus)===o.CATALOG_EXISTS?l.default.createElement(I.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"product_catalog-button",icon:l.default.createElement(F.default,{name:"catalog-entrypoint"}),title:b.default.t(1337),onClick:this.handleProductCatalogClick}):null}render(){var e,t,a,r=this.props.chat,{contact:i}=this.props;if(r.isUser)e=l.default.createElement(m.default,{chat:r,contact:r.contact,onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0}),t=l.default.createElement(U.default,{contact:r.contact,presence:r.presence,chatstate:r.presence.chatstate,location:"title",showBusinessCheckmark:i.showBusinessCheckmarkAsSecondary});else if(r.isBroadcast)e=l.default.createElement(n.default,{chat:(0,x.unproxy)(r),onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0}),t=null;else if(r.isGroup){e=l.default.createElement(g.default,{chat:(0,x.unproxy)(r),onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0});var s=r.groupMetadata&&r.groupMetadata.participants&&r.groupMetadata.participants.iAmAdmin()&&r.groupMetadata.announce?b.default.t(233):b.default.t(555);t=l.default.createElement(E.default,{chatstate:r.presence.chatstate,groupMetadata:r.groupMetadata,presence:r.presence,placeholder:s,location:"title"})}if(this.state.refMenuBarItemContainer&&e){var o={menu:e,anchor:this.state.refMenuBarItemContainer,autoFocus:!0,dirX:b.default.isRTL()?v.DirX.RIGHT:v.DirX.LEFT,dirY:v.DirY.BOTTOM,offsetY:5,type:"dropdown_menu"};a=l.default.createElement(G.default,{contextMenu:o})}var d;var u=l.default.createElement(I.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"search-button",icon:l.default.createElement(F.default,{name:"search-alt"}),title:b.default.t(1431),onClick:this.handleChatSearch});return r.isPSA&&(t=null),l.default.createElement("header",{ref:this.setRef,className:C.default.chatHeader,onClickCapture:this.handleClickCapture,onMouseDown:this.handleMouseDown},l.default.createElement("div",{className:C.default.chatAvatar,onClick:this._handleInfoPanel,role:r.isPSA?null:"button"},l.default.createElement(_.default,{id:r.id,size:40,showEphemeralIcon:!0})),l.default.createElement("div",{className:C.default.chatBody,onClick:this._handleInfoPanel,role:r.isPSA?null:"button"},l.default.createElement("div",{className:C.default.chatMain},l.default.createElement("div",{className:C.default.chatTitle},l.default.createElement(A.default,{chat:r,titlify:!0,ellipsify:!0,showBusinessCheckmark:i.showBusinessCheckmarkAsPrimary}))),t),l.default.createElement("div",{className:C.default.chatControls},l.default.createElement(I.MenuBar,{key:"conversation-header"},null,null,d,this._getCommerceButton(),u,l.default.createElement("div",{ref:this._setRefMenuBarItemContainer},l.default.createElement(I.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"conversation-menu",icon:l.default.createElement(F.default,{name:"menu"}),title:b.default.t(1112),onClick:this._checkForDrawerMid},a)))))}}H.CONCERNS={chat:["id","formattedTitle","presence","isUser","isGroup","isBroadcast","groupMetadata","isPSA","contact","name"],contact:["showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","shouldForceBusinessUpdate"]},H.displayName="ConversationHeader";var W=(0,S.default)((0,B.default)((0,M.default)((0,w.default)((0,L.default)(H,H.CONCERNS)))));t.default=W},29700:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hqLinkPreviewSupported=_,t.displayHighQualityLinkPreview=function(e){var t,a=!(!e.thumbnailDirectPath&&!e.thumbnailHQ)&&null!=e.thumbnailHeight&&null!=e.thumbnailWidth,r=(0,m.numCodepoints)(null!==(t=e.text)&&void 0!==t?t:"")>175,i=!!e.quotedMsg;return _(e)&&a&&!r&&!i},t.default=function({canonicalUrl:e,compose:t,description:a,displayType:r,invite:i,onClick:l,isSentByMe:u,star:c,thumbnail:h,thumbnailJpeg:m,thumbnailJpegHQ:_,thumbnailJpegDirectPath:E,thumbnailJpegHeight:S,thumbnailJpegWidth:C,title:y,theme:b}){var M,T,I="high-quality"===b||"high-quality-extended"===b;if(null!=h)T=n.default.createElement("div",{className:f.default.media},h);else if(m||_){var P=_||m;if(P&&(T=n.default.createElement("img",{alt:"",className:f.default.media,src:`data:image/jpeg;base64,${P}`}),(E||_)&&null!=S&&null!=C))if(I){var A=Math.min(Math.max(S/C,.25),1),N=A<1?330:240;T=n.default.createElement("div",{className:(0,s.default)(f.default.thumbnailContainer,{[f.default.blurred]:!_}),style:{height:N*A}},T)}else{var O=Math.min(Math.max(S/C,1),1.4);T=n.default.createElement("div",{className:(0,s.default)(f.default.thumbnailContainer,{[f.default.blurred]:!_}),style:{width:90/O,minWidth:90/O}},T)}}else r===o.default.DISP_TYPE.GALLERY&&(T=n.default.createElement("div",{className:f.default.noThumbContainer},n.default.createElement(p.default,{className:f.default.noThumbIcon,name:"link"})));if(r===o.default.DISP_TYPE.GALLERY){var D=c?n.default.createElement(p.default,{className:f.default.iconStar,name:"star"}):null;M=n.default.createElement("div",{className:f.default.noThumbContainer},T,D)}else M=T;var w=v(y),R=g(w),k="string"==typeof a?v(a):void 0,L=g(k),x=null!=a?n.default.createElement("div",{className:f.default.description},"string"==typeof a?n.default.createElement(d.default,{text:a,titlify:!0,direction:k,dirMismatch:L}):a):null,F=e?n.default.createElement("div",{className:f.default.source},n.default.createElement(d.default,{text:e,direction:w,dirMismatch:R})):null,B=(0,s.default)(f.default.preview,{[f.default.isInvite]:r!==o.default.DISP_TYPE.GALLERY&&i,[f.default.isCompose]:t,[f.default.bubbleIn]:!u,[f.default.bubbleOut]:u,[f.default.extended]:"extended"===b,[f.default.highQualityLayout]:I});return n.default.createElement("div",{className:B,onClick:l},M,n.default.createElement("div",{className:f.default.body},n.default.createElement("div",{className:f.default.title,title:y},n.default.createElement(d.default,{text:y,direction:w,dirMismatch:R})),x,F))};var s=i(a(94184)),l=r(a(70873)),n=i(a(67294)),o=i(a(75444)),d=i(a(20923)),u=i(a(77188)),c=i(a(80162)),f=i(a(71053)),h=i(a(43232)),p=i(a(32885)),m=a(96769);function _(e){return u.default.supportsFeature(u.default.F.HIGH_QUALITY_LINK_PREVIEWS)&&(e.isSentByMe&&h.default.webUploadLinkThumbMmsEnabled||!e.isSentByMe&&h.default.webDownloadLinkThumbMmsEnabled)}function v(e){return e?l.dir(e):void 0}function g(e){return"rtl"===e!==c.default.isRTL()}},76773:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({direction:e,loadMoreMsgs:t,isLoadingEarlierMsgs:a,isLoadingRecentMsgs:r,isLoadingAroundMsgs:u}){var c,f,h;if("earlier"===e&&a||"recent"===e&&r||"around"===e&&u)c=i.default.createElement(o.default,{stroke:6,size:24,color:"highlight"}),f=l.default.t(1044);else{if(s.default.supportsFeature(s.default.F.MD_BACKEND)&&"earlier"===e)return null;switch(e){case"earlier":f=l.default.t(1041);break;case"recent":f=l.default.t(1042);break;default:f=l.default.t(1044)}c=i.default.createElement(d.default,{name:"refresh"}),h=t}return i.default.createElement("div",{className:n.default.wrapper},i.default.createElement("div",{className:n.default.button,title:f,onClick:h},c))},t.MessageListButton=function({children:e,onClick:t,title:a}){return i.default.createElement("div",{className:n.default.wrapper},i.default.createElement("div",{className:n.default.button,title:a,onClick:t},e))};var i=r(a(67294)),s=r(a(77188)),l=r(a(80162)),n=r(a(83610)),o=r(a(69507)),d=r(a(32885))},91611:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.groupMenu=function(e,t){var a=[];a.push(i.default.createElement(n.default,{key:"info",a8n:"mi-group-info",action:()=>s.default.chatInfoDrawer(e)},o.default.t(1845))),a.push(i.default.createElement(n.default,{a8n:"mi-select-messages",key:"select",action:t},o.default.t(2007))),e.mute.canMute()&&a.push(i.default.createElement(d.default,{key:"mute",onMute:t=>s.default.muteChat(e,t),mute:e.mute,chat:e,settings:u.default}));return a.push(i.default.createElement(n.default,{key:"clear",a8n:"mi-clear",action:()=>s.default.clearChat(e)},o.default.t(550))),a.push(i.default.createElement(l.default,{key:"delete",onDeleteOrExit:()=>s.default.deleteOrExitChat(e),chat:e})),a},t.broadcastMenu=function(e,t){var a=[];return a.push(i.default.createElement(n.default,{key:"info",a8n:"mi-broadcast-info",action:()=>s.default.chatInfoDrawer(e)},o.default.t(1898))),a.push(i.default.createElement(n.default,{a8n:"mi-select-messages",key:"select",action:t},o.default.t(2007))),a.push(i.default.createElement(n.default,{key:"clear",a8n:"mi-clear",action:()=>s.default.clearChat(e)},o.default.t(550))),a.push(i.default.createElement(l.default,{key:"delete",onDeleteOrExit:()=>s.default.deleteOrExitChat(e),chat:e})),a};var i=r(a(67294)),s=r(a(33766)),l=r(a(58218)),n=r(a(7970)),o=r(a(80162)),d=r(a(26106)),u=r(a(19826))},93340:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=i(a(63337)),n=r(a(67294)),o=i(a(2452)),d=a(12825),u=i(a(33766)),c=i(a(75444)),f=i(a(80162)),h=i(a(80896)),p=a(31351),m=i(a(20158)),_=a(38245),v=i(a(78992));class g extends n.Component{constructor(...e){super(...e),this._refContainer=(0,n.createRef)(),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{u.default.refreshMessages()},this.ref=(0,n.createRef)()}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}getRef(){var e;return null===(e=this.ref)||void 0===e?void 0:e.current}getContainerElement(){return(0,l.default)(this._refContainer.current,"this._refContainer.current")}render(){var e,t,{msg:a,albumMsgs:r,albumPosition:i,isMsgVisible:l,zoomMsg:u,numAdditionalMedia:h}=this.props,g=(0,s.default)({[o.default.albumTopLeft]:i===d.AlbumPosition.TOP_LEFT,[o.default.albumTopRight]:i===d.AlbumPosition.TOP_RIGHT,[o.default.albumBottomLeft]:i===d.AlbumPosition.BOTTOM_LEFT,[o.default.albumBottomRight]:i===d.AlbumPosition.BOTTOM_RIGHT});if(null!=h&&0!==h&&(e=n.default.createElement(_.TextSpan,{theme:"large",className:(0,s.default)(o.default.numberText)},f.default.t(1275,{number:h}))),a.type===c.default.MSG_TYPE.IMAGE)t=n.default.createElement(m.default,{theme:p.DisplayTheme.Album,albumMsgs:r,msg:a,mediaData:a.mediaData,ref:this.ref,isMsgVisible:l,zoomMsg:u,overlayContent:e,displayAuthor:!1});else{if(a.type!==c.default.MSG_TYPE.VIDEO)throw new Error("Unexpected Album Type: "+a.type);t=n.default.createElement(v.default,{theme:p.DisplayTheme.Album,albumMsgs:r,msg:a,mediaData:a.mediaData,ref:this.ref,zoomMsg:u,displayAuthor:!1,overlayContent:e})}return n.default.createElement("div",{ref:this._refContainer,className:o.default.albumGridClass},n.default.createElement("div",{className:g},t))}}g.displayName="AlbumGrid";var E=(0,h.default)(g);t.default=class extends E{constructor(...e){super(...e),this.getRef=()=>this.getComponent().getRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},12825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlbumPosition=void 0;t.AlbumPosition={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}},60018:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=i(a(63337)),n=i(a(41143)),o=r(a(67294)),d=i(a(96774)),u=i(a(93340)),c=a(12825),f=i(a(28745)),h=a(20451),p=i(a(33766)),m=i(a(51115)),_=i(a(75444)),v=i(a(38906)),g=a(89852),E=r(a(7970)),S=i(a(61900)),C=i(a(9908)),y=i(a(62886)),b=i(a(74344)),M=i(a(43369)),T=i(a(77188)),I=i(a(32336)),P=i(a(59476)),A=i(a(34015)),N=i(a(80162)),O=a(21725),D=a(13162),w=i(a(31127)),R=a(53348),k=i(a(54562)),L=a(86146),x=a(6578),F=i(a(32885)),B=i(a(26144)),G=i(a(11918)),U=i(a(4328)),j=i(a(1961)),V=a(32692),H=a(50342);class W extends o.Component{getContainerElement(){return this._refAlbumWrapper.current}constructor(e){super(e),this._refAlbumWrapper=(0,o.createRef)(),this.refAlbumComponents={},this.setRefContext=e=>{this.refContext=e},this._refTail=(0,o.createRef)(),this.setRefBubble=e=>{this.refBubble=e},this._setRefLeftStickerBubble=e=>{this._refLeftStickerBubble=e},this._setRefRightStickerBubble=e=>{this._refRightStickerBubble=e},this._firstStickerRef=(0,o.createRef)(),this._secondStickerRef=(0,o.createRef)(),this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.contextMenu=e=>{e.stopPropagation()},this.openForwardFlow=(e,t)=>{for(var a,{msgs:r}=this.props,i=0;i<r.length;i++)if(r[i].isUnsentMedia){a=N.default.t(794,{_plural:1});break}a?p.default.openModal(o.default.createElement(m.default,{title:N.default.t(797),onOK:()=>p.default.closeModal(),okText:N.default.t(1941)},a)):e?this.handleSelectClick({selectedMsg:t}):p.default.openModal(o.default.createElement(b.default,{msgs:r.map((e=>e.unsafe()))}),{transition:"modal-flow"})},this.handleStar=()=>{var{msgs:e}=this.props;p.default.sendStarMsgs(e[0].chat,e)},this.handleUnstar=()=>{var{msgs:e}=this.props;p.default.sendUnstarMsgs(e[0].chat,e)},this.handleSelectClick=e=>{var{selectedMsg:t,event:a}=e;if(a&&a.stopPropagation(),t)this.props.onMessageSelect((0,x.unproxy)(t.unsafe()),!this.props.selectedMessages.isSelected((0,x.unproxy)(t)),a);else{var r=0===this.state.selectedCount;this.props.msgs.forEach((e=>{this.props.onMessageSelect((0,x.unproxy)(e.unsafe()),r,a)}))}},this._computeSelectedCount=()=>{var{msgs:e,selectedMessages:t}=this.props,a=0;return e.forEach((e=>{t.isSelected((0,x.unproxy)(e.unsafe()))&&a++})),a},this.handleDownload=()=>{S.default.initDownload(this.props.msgs.map((e=>e.unsafe())))},this.handleDeleteMessage=()=>{var{msgs:e}=this.props;p.default.openModal(o.default.createElement(v.default,{chat:e[0].chat,msgList:e.map((e=>e.unsafe())),deletePrompt:!0,revokePrompt:e[0].canRevoke(),isMsgVisible:this.props.isMsgVisible}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.handleMenu=(e,t)=>{var{msgs:a}=this.props;if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var r=t?this._getMenuRefContext():e,i=[];if(a.every((e=>e.mediaData&&e.mediaData.isDownloadable()))&&i.push(o.default.createElement(E.default,{key:"download",a8n:"mi-msg-download",action:this.handleDownload},N.default.t(693))),a.every((e=>e.canForward()))&&i.push(o.default.createElement(E.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)}},N.default.t(814))),a.every((e=>e.canStar())))a.every((e=>e.star))?i.push(o.default.createElement(E.default,{key:"star",a8n:"mi-msg-unstar",action:()=>{this.handleUnstar()}},N.default.t(1585))):i.push(o.default.createElement(E.default,{key:"star",a8n:"mi-msg-star",action:()=>{this.handleStar()}},N.default.t(1503)));i.push(o.default.createElement(E.default,{key:"delete",a8n:"mi-msg-delete",action:this.handleDeleteMessage},N.default.t(653))),this.setState({contextMenu:{menu:i,anchor:r,theme:E.ThemeOptions.COMPACT}})}},this.openContextMenu=()=>{this.state.hover?this.handleMenu(void 0,!0):this.setState({hover:!0},(()=>{this.handleMenu(void 0,!0)}))},this.closeContextMenu=()=>{var e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this._handleAlbumGridRendered=(e,t)=>{e?this.refAlbumComponents[t.id.toString()]=e:delete this.refAlbumComponents[t.id.toString()]},this.scrollMsg=(e,t)=>{var a=this._refAlbumWrapper.current;if(a){var r=a.offsetParent;r&&((0,n.default)(r instanceof HTMLElement,"DOM offset parent is not a valid HTMLElement"),(0,g.scrollAt)(a,r,t).then(e))}},this.highlight=()=>{var e,t=this._refTail.current;this.isGroupedSticker()?0===this.props.focusedMsgIndex?e=this._refLeftStickerBubble:1===this.props.focusedMsgIndex&&(e=this._refRightStickerBubble):e=this.refBubble,e&&(C.default.indicateFocus(e,j.default.highlightAnimation),C.default.indicateFocus(t,j.default.highlightAnimation),this.props.isFocusable&&this.focus({preventScroll:!0}))};var t=this._computeSelectedCount();this.state={contextMenu:null,hover:!1,selectedCount:t}}componentDidMount(){T.default.supportsFeature(T.default.F.MEDIA_EXISTENCE_CHECK)&&this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).forEach((e=>{(0,D.checkExistence)(e)}))}componentDidUpdate(e){if(this.props.msgs!==e.msgs&&T.default.supportsFeature(T.default.F.MEDIA_EXISTENCE_CHECK)){var t=new Set(e.msgs);this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).filter((e=>!t.has(e))).forEach((e=>{(0,D.checkExistence)(e)}))}}shouldComponentUpdate(e,t){return!(0,d.default)(t,this.state)||!(0,d.default)(e,this.props,((e,t,a)=>{if("msgs"===a)return(0,d.default)(e,t)}))}onSelectChange(e){var t;t=this.isGroupedSticker()?this._computeSelectedCount():e?this.props.msgs.length:0,this.state.selectedCount!==t&&this.setState({selectedCount:t})}_isKeyboardUser(){return this.context}isGroupedSticker(){var[e,t]=this.props.msgs;return null!=e.asGroupedSticker&&null!=t.asGroupedSticker}focus(e){var t;(null===(t=this._refAlbumWrapper)||void 0===t?void 0:t.current)&&y.default.focus(this._refAlbumWrapper.current,e)}render(){var e,{msgs:t,position:a,isMsgVisible:r,albumId:i,isFocusedAlbum:n,focusedMsgIndex:d,selectedMessages:p,isFocusable:m}=this.props,v=t[0],g=t[1],E=v.isSentByMe,S=v.isGroupMsg,C=this.isGroupedSticker(),y=t.length>_.default.ALBUM_MIN_SIZE?t.length-_.default.ALBUM_MIN_SIZE+1:null,b=a===R.MsgPosition.FRONT||a===R.MsgPosition.SINGLE||C,T=(0,s.default)(j.default.msg,{[j.default.msgContinuation]:a===R.MsgPosition.FRONT||a===R.MsgPosition.MID,"message-out":E,"message-in":!E,[O.LIST_FOCUSABLE_ITEM_CLASS_NAME]:m}),A=!E&&S;if(A){var N=(0,s.default)(j.default.author,{[j.default.groupStickerAuthor]:C});e=o.default.createElement("div",{className:N},o.default.createElement(f.default,{msg:t[0],contact:t[0].senderObj,albumId:i}))}var D,W,Y,K,q,z=(0,s.default)(j.default.message,{[j.default.messageTransparent]:C,[j.default.hasTail]:b,[j.default.tailOverrideHide]:C&&b&&(E||!S),[j.default.hasAuthor]:!this.isGroupedSticker()&&A,[j.default.forwarded]:!this.isGroupedSticker()&&(0,L.showForwarded)(t[0])}),$=(0,s.default)(j.default.albumBubbleContainer,{[j.default.messageBackground]:!C,[j.default.hasBorderBox]:!C});b&&(D=o.default.createElement(F.default,{name:(0,V.getTailName)(E),className:j.default.tail,containerRef:this._refTail})),v.canQuickForward()&&(W=o.default.createElement("div",{className:(0,s.default)(j.default.quickActionButton,{[j.default.authorForward]:A}),onClick:()=>{this.openForwardFlow(!1)},role:"button"},o.default.createElement(F.default,{name:"forward-chat"}))),(this.state.hover||this.state.contextMenu)&&(Y=o.default.createElement(w.default,{msg:v.unsafe(),hasAuthor:A,position:a,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.handleMenu(e)}})),K=this.state.contextMenu?"none":v.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(q=o.default.createElement(B.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},o.default.createElement(G.default,{contextMenu:this.state.contextMenu})));var Q,X=this.props.selectable?o.default.createElement(k.default,{checked:this.state.selectedCount>0,theme:this.state.selectedCount>0&&this.state.selectedCount<t.length?h.CHECKBOX_THEME.PARTIAL:void 0,onClick:e=>{this.handleSelectClick({event:e})}}):null;if(this.props.isFocusedAlbum&&(Q=o.default.createElement(H.WhileFocusedListener,{parent:this})),C){var J,Z,ee=t.map((e=>o.default.createElement(H.SelectionListener,{key:e.id.toString(),parent:this,msgId:e.id.toString(),selectedMessages:p}))),te=this.props.selectable?o.default.createElement(P.default,{checked:this.props.selectedMessages.isSelected((0,x.unproxy)(v.unsafe())),onClick:()=>{this.handleSelectClick({selectedMsg:v.unsafe()})}}):null,ae=this.props.selectable?o.default.createElement(P.default,{checked:this.props.selectedMessages.isSelected((0,x.unproxy)(g.unsafe())),onClick:()=>{this.handleSelectClick({selectedMsg:g.unsafe()})}}):null;return o.default.createElement("div",{className:T,"data-id":i,ref:this._refAlbumWrapper,tabIndex:-1},o.default.createElement(U.default,{transitionName:"delay-leave"},X),o.default.createElement("div",{className:z,onContextMenu:this.contextMenu},D,e,o.default.createElement("div",{className:j.default.groupStickerContainer},o.default.createElement("div",{onMouseEnter:null===(J=this._firstStickerRef.current)||void 0===J?void 0:J.startAnimation,className:j.default.singleGroupedStickerContainer,ref:this._setRefLeftStickerBubble},o.default.createElement(U.default,{transitionName:"delay-leave"},te),o.default.createElement(I.default,{msg:(0,l.default)(v.asGroupedSticker,"firstMsg.asGroupedSticker"),menuTransition:K,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:r,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:n&&0===d,forwardRef:this._firstStickerRef})),o.default.createElement("div",{onMouseEnter:null===(Z=this._secondStickerRef.current)||void 0===Z?void 0:Z.startAnimation,className:j.default.singleGroupedStickerContainer,ref:this._setRefRightStickerBubble},o.default.createElement(U.default,{transitionName:"delay-leave"},ae),o.default.createElement(I.default,{msg:(0,l.default)(g.asGroupedSticker,"secondMsg.asGroupedSticker"),menuTransition:K,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:r,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:n&&1===d,forwardRef:this._secondStickerRef})))),ee)}var re=t.map((e=>e.asAlbumAsset)).filter(Boolean);re.length!==t.length&&(__LOG__(4,void 0,new Error,!0)`Only ${re.length}/${t.length} were valid album messages`,SEND_LOGS("invalid-album-grid"));var ie=re.length>_.default.ALBUM_MIN_SIZE?re[0]:null,se=(0,L.showForwarded)(t[0])?o.default.createElement(M.default,{msg:t[0].unsafe(),className:j.default.forwardedIndicator}):null;return o.default.createElement("div",{className:T,"data-id":i,ref:this._refAlbumWrapper,tabIndex:-1},o.default.createElement(U.default,{transitionName:"delay-leave"},X),o.default.createElement("div",{className:z,onContextMenu:this.contextMenu,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown},D,o.default.createElement("div",{className:$,ref:this.setRefBubble},e,se,o.default.createElement("div",{className:j.default.gridContainer},o.default.createElement(u.default,{msg:(0,l.default)(t[0].asAlbumAsset,"msgs[0].asAlbumAsset"),albumMsgs:re,albumPosition:c.AlbumPosition.TOP_LEFT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleAlbumGridRendered(e,t[0])}))}),o.default.createElement(u.default,{msg:(0,l.default)(t[1].asAlbumAsset,"msgs[1].asAlbumAsset"),albumMsgs:re,albumPosition:c.AlbumPosition.TOP_RIGHT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleAlbumGridRendered(e,t[1])}))}),o.default.createElement(u.default,{msg:(0,l.default)(t[2].asAlbumAsset,"msgs[2].asAlbumAsset"),albumMsgs:re,albumPosition:c.AlbumPosition.BOTTOM_LEFT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleAlbumGridRendered(e,t[2])}))}),o.default.createElement(u.default,{msg:(0,l.default)(t[3].asAlbumAsset,"msgs[3].asAlbumAsset"),albumMsgs:re,albumPosition:c.AlbumPosition.BOTTOM_RIGHT,isMsgVisible:r,zoomMsg:ie,numAdditionalMedia:y,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleAlbumGridRendered(e,t[3])}))}))),o.default.createElement(U.default,{transitionName:K},Y),W),q,Q,o.default.createElement(H.SelectionListener,{parent:this,msgId:t[0].id.toString(),selectedMessages:p}))}}t.default=W,W.contextType=A.default,W.displayName="AlbumWrapper"},80570:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(37797)),n=r(a(4337)),o=i(a(5830)),d=r(a(28745)),u=r(a(33766)),c=(r(a(75444)),r(a(22039))),f=a(85063),h=r(a(23843)),p=r(a(72462)),m=r(a(72765)),_=a(6578),v=r(a(32885));class g extends s.PureComponent{constructor(e){super(e),this._refAudioPlayer=(0,s.createRef)(),this.showMediaMissing=()=>{u.default.openModal(s.default.createElement(c.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),u.default.openModal(s.default.createElement(h.default,{msg:(0,_.unproxy)(this.props.msg.unsafe())}))},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}handleKeyActivation(e){var t;null===(t=this._refAudioPlayer.current)||void 0===t||t.handleKeyActivation(e)}render(){var e,t=this.props.msg,a=this.props.mediaData,r=this.state.playing?this.state.currentTime:a.duration;switch(a.mediaStage){case f.MEDIA_DATA_STAGE.RESOLVED:e=s.default.createElement(o.default,{ref:this._refAudioPlayer,mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,duration:r,playing:this.state.playing,played:!0,autoPlay:!1,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:t.isSentByMe,displayType:this.props.displayType});break;case f.MEDIA_DATA_STAGE.NEED_POKE:e=s.default.createElement(o.AudioPlayerFrame,{icon:s.default.createElement(v.default,{name:"audio-download"}),outgoingMsg:t.isSentByMe,action:this._forceDownloadMedia});break;case f.MEDIA_DATA_STAGE.NEED_UPLOAD:e=s.default.createElement(o.AudioPlayerFrame,{icon:s.default.createElement(v.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeUpload});break;case f.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=s.default.createElement(o.AudioPlayerFrame,{icon:s.default.createElement(v.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeRemoteUpload});break;case f.MEDIA_DATA_STAGE.ERROR_MISSING:e=s.default.createElement(o.AudioPlayerFrame,{icon:s.default.createElement(v.default,{name:"audio-play",directional:!0}),outgoingMsg:t.isSentByMe,action:this.showMediaMissing});break;default:e=s.default.createElement(o.AudioPlayerFrame,{outgoingMsg:t.isSentByMe,spinner:!0})}var i=s.default.createElement("div",{className:l.default.icon},s.default.createElement(v.default,{name:"audio-file"})),u=this.props.displayAuthor?s.default.createElement(d.default,{msg:t,contact:t.senderObj}):null;return s.default.createElement(n.default,{msg:t,quotedMsg:this.props.quotedMsg,author:u,player:e,avatar:i,displayType:this.props.displayType})}}g.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj"],mediaData:["duration","type","mediaStage","renderableUrl"]},g.displayName="Audio";var E=(0,m.default)(g,g.CONCERNS);t.default=class extends E{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}},4337:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(62794)),n=r(a(75444)),o=r(a(49218)),d=r(a(43369)),u=r(a(80162)),c=r(a(62181)),f=a(86146),h=r(a(57418)),p=r(a(70046)),m=r(a(43232)),_=r(a(95607)),v=e=>{var t,{msg:a}=e,{id:r,type:v,ack:g,isSentByMe:E}=(0,_.default)(a,["id","type","ack","isSentByMe"]),S=u.default.isRTL()?!E:E,C=(0,i.default)(l.default.bubble,{[l.default.bubbleRightAvatar]:!S,[l.default.bubbleLeftAvatar]:S,[l.default.hasAuthor]:e.author,[l.default.hasQuote]:e.quotedMsg,[l.default.isGallery]:e.displayType===n.default.DISP_TYPE.STARRED_MSGS||e.displayType===n.default.DISP_TYPE.GALLERY,[l.default.isForwarded]:(0,f.showForwarded)(a)}),y=e.status?s.default.createElement("div",{className:l.default.status},e.status):null,b=null!=e.author?s.default.createElement("div",{className:l.default.author},e.author):null,M=(0,f.showForwarded)(a)?s.default.createElement(d.default,{msg:a.unsafe(),className:l.default.forwardedIndicator}):null,T=e.quotedMsg?s.default.createElement("div",{className:l.default.quote},e.quotedMsg):null,{playbackRate:I,playbackControlMessageId:P}=(0,_.default)(p.default,["playbackRate","playbackControlMessageId"]),A=!1;if(m.default.pttPlaybackSpeedEnabled&&"ptt"===v){A=P===r.toString();var N=(0,i.default)(l.default.playbackRateButtonContainer,{[l.default.playbackRateButtonContainerVisible]:A});t=s.default.createElement("div",{className:N},s.default.createElement(h.default,{playbackRate:I,onClick:()=>{p.default.advancePlaybackRateFor(r)},isSentByMe:E,played:g===n.default.ACK.PLAYED}))}var O=(0,i.default)(l.default.avatar,{[l.default.avatarVisible]:!A});return s.default.createElement("div",{className:C},b,M,T,s.default.createElement(o.default,{msg:a.unsafe(),wrapperClass:l.default.ctwaContext}),s.default.createElement("div",{className:l.default.body},s.default.createElement("div",{className:l.default.player},e.player),s.default.createElement("div",{className:l.default.avatarContainer},t,s.default.createElement("div",{className:O},e.avatar,y))),s.default.createElement("div",{className:l.default.meta},s.default.createElement(c.default,{msg:a})))};t.default=v},5830:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayerFrame=O,t.default=void 0;var s=i(a(94184)),l=i(a(63337)),n=r(a(67294)),o=a(47383),d=i(a(80425)),u=i(a(12001)),c=i(a(44386)),f=i(a(33766)),h=i(a(75444)),p=a(89302),m=i(a(80162)),_=i(a(80896)),v=i(a(89958)),g=i(a(72462)),E=i(a(18456)),S=i(a(70372)),C=a(5279),y=i(a(70046)),b=i(a(47374)),M=i(a(43232)),T=i(a(72765)),I=a(6578),P=i(a(32885)),A=i(a(47809));class N extends n.PureComponent{constructor(e){super(e),this.setRefAudio=e=>{this._refAudio=e},this._scrollPositionDetectorRef=(0,n.createRef)(),this._onPlayClick=()=>{this._scrollPositionDetectorRef.current&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);var e=this._refAudio;e&&(this.props.playing?e.pause():this._playAudio(!1))},this.handleKeyActivation=e=>{e.preventDefault(),this._onPlayClick()},this._onPttPlayback=e=>{if(this.props.currMsgId===e){this.setState({sequentialPlayback:!0,currentTime:0}),this._scrollPositionDetectorRef.current&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);var t=this._refAudio;t&&(this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{t.currentTime=0,this._playAudio(!0)})).catch((e=>{__LOG__(3)`AudioPlayer:onPttPlayback error: ${e}`})).finally((()=>{this._delayPttPromise=null})))}},this._delayPtt=e=>new Promise((t=>this.props.setInterval(t,e))),this._onNewPttRecording=()=>{var e=this._refAudio;e&&(this.props.playing&&e.pause(),this._delayPttPromise&&this._delayPttPromise.cancel())},this.onPlaying=()=>{var{currMsgId:e,onPlayingUpdate:t,pttPrefs:a}=this.props;if(e){f.default.pttPlaying(e);var r=a.setPlayingMessage(e);this._playingMessageEnded=()=>{this._playingMessageEnded=null,r()}}t(!0)},this.onPause=()=>{this.props.onPlayingUpdate(!1)},this.onEnded=()=>{var e,t=this._refAudio;t&&(t.currentTime=0,t.load(),this._maybePlayNextPTT(),this._commitPttPlaybackWamEvent(!0),null===(e=this._playingMessageEnded)||void 0===e||e.call(this))},this._updateProgress=()=>{var e=this._refAudio;if(e){var{currentTime:t,duration:a}=e,r=Math.round(t);r!==this._previousNotifiedTime&&(this._previousNotifiedTime=r,this.props.onTimeUpdate(r));var i=this.state.currentTime,s=R(this.props,this.state);!isFinite(a)||t===i&&a===s||this.setState({currentTime:t,audioDuration:a})}},this._handleSeekBarChange=e=>{var t=this._refAudio;if(t){var{duration:a}=t;e!==a||this.props.playing?(this.setState({currentTime:e}),t.currentTime=e):(this.setState({currentTime:0}),t.currentTime=0),null!=this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent.pttSeekCnt+=1)}},this.onPlayerError=()=>{this._commitPttPlaybackWamEvent(!1)},this._onOtherPttPlaying=e=>{this.props.currMsgId!==e&&this._delayPttPromise&&this._delayPttPromise.cancel()},this._renderAudioTag=e=>n.default.createElement(u.default,{autoPlay:this.props.autoPlay,onError:this.onPlayerError,preload:"auto",setRefAudio:this.setRefAudio,url:e,playbackRate:this.props.isPtt?this.props.pttPrefs.playbackRate:1}),this._prevPlaybackRate=e.pttPrefs.playbackRate,this.state={currentTime:0,audioDuration:R(e,null),playedBefore:e.played,sequentialPlayback:!1}}componentDidMount(){var e=(0,l.default)(this._refAudio,"this._refAudio");this.props.listeners.add(e,"playing",this.onPlaying),this.props.listeners.add(e,"pause",this.onPause),this.props.listeners.add(e,"ended",this.onEnded),this.props.listeners.add(e,"timeupdate",this._updateProgress),this.props.listeners.add(e,"durationchange",this._updateProgress),this.props.listeners.add(e,"progress",this._updateProgress),this.props.listeners.add(f.default,"pttRecording",this._onNewPttRecording),this.props.listeners.add(f.default,"sequential_playback_ptt",this._onPttPlayback),this.props.listeners.add(f.default,"pttPlaying",this._onOtherPttPlaying)}componentDidUpdate(e){var t,a,r,i;this.props.playing!==e.playing&&(this.props.playing?this._cancelProgressUpdateInterval=(a=this._updateProgress,(i=()=>{r=requestAnimationFrame((()=>{a(),i()}))})(),()=>{cancelAnimationFrame(r)}):null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this));if(null!=this._pttPlaybackWamEvent){var{playbackRate:s}=this.props.pttPrefs;s!==this._prevPlaybackRate&&(this._prevPlaybackRate=s,this._pttPlaybackWamEvent.pttPlaybackSpeedCnt+=1)}}componentWillUnmount(){var e,t;null===(e=this._playingMessageEnded)||void 0===e||e.call(this),null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this),this._commitPttPlaybackWamEvent(!0)}_isValidPlaybackSequence(e){return e.type===h.default.MSG_TYPE.PTT&&!(e.isSentByMe&&!this.props.outgoingMsg&&!this.state.playedBefore)}_playAudio(e){var t=this._refAudio;t&&(t.play(),this.props.isPtt&&null==this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent=new g.default.PttPlayback({pttSeekCnt:0,pttPlaybackSpeedCnt:0,pttTrigger:e?g.default.PTT_TRIGGER_TYPE.SEQUENTIAL:g.default.PTT_TRIGGER_TYPE.MANUAL})))}_maybePlayNextPTT(){var e=this.state.sequentialPlayback;if(this.props.getSequentialMsg&&this.props.currMsgId){var t=this.props.getSequentialMsg(this.props.currMsgId);t&&this._isValidPlaybackSequence(t)?this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{var e;S.default.getGlobalSounds()&&(0,C.playMidPttTone)();var a=null===(e=this._scrollPositionDetectorRef.current)||void 0===e?void 0:e.getBoundingClientRect().top;null!=a&&this._startingScrollPos===a&&f.default.scrollToPtt(t.unsafe()),f.default.autoplayPTT(t.id)})).catch((e=>{__LOG__(3)`AudioPlayer:maybePlayNextPTT (with next message) error: ${e}`})).finally((()=>{this._delayPttPromise=null})):this.state.sequentialPlayback&&(this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{S.default.getGlobalSounds()&&(0,C.playEndPttTone)(),this._delayPttPromise=null})).catch((e=>{__LOG__(3)`AudioPlayer:maybePlayNextPTT (last message) error: ${e}`})).finally((()=>{this._delayPttPromise=null})),e=!1),this.setState({playedBefore:!0,sequentialPlayback:e})}}render(){var{isPtt:e}=this.props,t=this.props.playing?"audio-pause":"audio-play",a=null!=this.props.duration&&0!==this.props.duration?n.default.createElement("div",{className:d.default.metadata,"aria-hidden":!0},c.default.durationStr(this.props.duration)):null,r=n.default.createElement("button",{className:d.default.button,onClick:this._onPlayClick},n.default.createElement(P.default,{name:t})),i=(0,l.default)(this.props.mediaData,"this.props.mediaData"),s=(0,l.default)(this.props.downloadMedia,"this.props.downloadMedia"),o=n.default.createElement(v.default,{mediaData:i,placeholderRenderer:()=>this._renderAudioTag(""),downloadMedia:s},this._renderAudioTag),u=n.default.createElement("div",{ref:this._scrollPositionDetectorRef,className:d.default.scrollPositionDetector}),f=e&&i.waveform&&M.default.pttConversationWaveform?n.default.createElement(E.default,{currentTime:this.state.currentTime,duration:R(this.props,this.state),onSeekEnd:this._handleSeekBarChange,outgoing:this.props.outgoingMsg,waveform:(0,l.default)(i.waveform,"mediaData.waveform")}):n.default.createElement(b.default,{currentTime:this.state.currentTime,duration:R(this.props,this.state),onChange:this._handleSeekBarChange,outgoing:this.props.outgoingMsg,played:Boolean(this.props.played)});return n.default.createElement(O,{button:r,played:this.props.played,outgoingMsg:this.props.outgoingMsg,displayType:this.props.displayType},u,a,f,o)}_commitPttPlaybackWamEvent(e){var t=this._pttPlaybackWamEvent;null!=t&&(t.pttPlaybackFailed=!e,t.pttType=function(e){switch(null==e?void 0:e.split(";")[0]){case"audio/ogg":return g.default.PTT_STREAM_TYPE.OPUS;case"audio/aac":return g.default.PTT_STREAM_TYPE.AAC;case"audio/mpeg":return g.default.PTT_STREAM_TYPE.MP3;case"audio/amr-wb":return g.default.PTT_STREAM_TYPE.AMR_WB;case"audio/amr":case"audio/3gpp2":return g.default.PTT_STREAM_TYPE.AMR_NB;case"audio/3gpp":default:return g.default.PTT_STREAM_TYPE.UNKNOWN}}((0,I.unproxy)(this.props.mediaData).mimetype),t.pttPlaybackSpeed=function(e){switch(e){case 1:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1;case 1.5:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1_5;case 2:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_2;default:throw new Error(`Invalid playback rate: ${e}`)}}(this.props.pttPrefs.playbackRate),null!=this.state.audioDuration&&(t.pttDuration=1e3*Math.round(this.state.audioDuration)),t.commit(),this._pttPlaybackWamEvent=null)}}function O(e){var t,a=e.spinner&&null==e.button?n.default.createElement("button",{className:d.default.button,onClick:e.action},n.default.createElement("div",{className:d.default.spinner},e.canCancel?n.default.createElement(p.PendingCancel,{outgoingMsg:e.outgoingMsg}):n.default.createElement(p.Pending,{outgoingMsg:e.outgoingMsg}))):null,r=e.icon&&null==e.button&&!e.spinner?n.default.createElement("button",{className:d.default.button,onClick:e.action},e.icon):null,i=null!=e.fileSize&&0!==e.fileSize?n.default.createElement("div",{className:d.default.metadata},m.default.filesize(e.fileSize)):null,l=null!==(t=e.children)&&void 0!==t?t:n.default.createElement(b.default,{currentTime:0,duration:100,outgoing:e.outgoingMsg,played:Boolean(e.played),disabled:!0}),u=(0,s.default)(d.default.audio,{[d.default.isGallery]:e.displayType===h.default.DISP_TYPE.STARRED_MSGS||e.displayType===h.default.DISP_TYPE.GALLERY});return n.default.createElement("div",{className:u},n.default.createElement("div",{className:d.default.controls},e.button,a,r),n.default.createElement("div",{className:d.default.body},n.default.createElement(o.InvisibleLabel,null,m.default.t(23)),l,i))}N.CONCERNS={pttPrefs:["playbackRate"]},N.displayName="AudioPlayer";var D=(0,T.default)((0,A.default)((0,_.default)(N)),N.CONCERNS);class w extends D{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}function R(e,t){var a=null==t?void 0:t.audioDuration;if(null!=a)return a;var r=null==e.duration?null:parseFloat(e.duration);return null==r||Number.isNaN(r)?0:r}t.default=w,w.defaultProps={pttPrefs:y.default}},28745:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(96302)),o=i(a(74798)),d=i(a(33766)),u=i(a(20923)),c=a(77824),f=i(a(80162)),h=i(a(72765)),p=i(a(8745));function m(e,t,a){var r;if(a){var i=o.default.get(a);r=i?i.formattedTitle:f.default.t(857)}return t?`${e} · ${f.default.t(1508)}`:r?`${e} · ${r}`:e}class _ extends l.PureComponent{constructor(...e){super(...e),this.onClick=()=>{(0,c.findChat)(this.props.msg.sender).then((e=>{d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)}))}))}}render(){var{msg:e,chat:t,contact:a,disableClick:r,displaySelf:i,quotedRemoteJid:o,albumId:d}=this.props,c=t||e.chat;c||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("author-with-no-chat"));var h,_=c?c.assignedColor(e.sender):1,v=r?null:this.onClick,g=(0,s.default)(n.default.author,`color-${_}`,{[n.default.hoverable]:v});if(i)h=l.default.createElement(u.default,{text:m(f.default.t(2079),e.isStatusV3,o)});else if(a.name||a.verifiedName){var E;h=[l.default.createElement(u.default,{text:m(null!==(E=a.name)&&void 0!==E?E:a.verifiedName,e.isStatusV3,o),className:n.default.name,key:"author",onClick:v})]}else{var S=h=[l.default.createElement("span",{className:n.default.number,role:v?"button":null,key:`${e.id.toString()}-number`,onClick:v},m((0,p.default)(a.id),e.isStatusV3,o))];if(!e.isStatusV3){var C,y=d?`${d}-push-name`:`${e.id.toString()}-push-name`;C=a.notifyName?a.notifyName:a.pushname,S.push(l.default.createElement(u.default,{className:n.default.screenName,key:y,onClick:v,direction:"auto",ellipsify:!0,text:C}))}}return l.default.createElement("div",{className:g,role:this.props.role||""},h)}}_.CONCERNS={msg:["sender","chat","type","isLive","isStatusV3","id","quotedMsg"],contact:["id","name","notifyName","pushname","verifiedName"]},_.displayName="Author";var v=(0,h.default)(_,_.CONCERNS);t.default=v},98969:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e.msg,["type","subtype","body","recipients"]),{subtype:a,body:r,recipients:o}=t;if("create"===a){var d=parseInt(r,10);return i.default.createElement(l.default,{id:2080,params:{count:d},plural:d,wrapInHiddenToken:!0})}if("add"===a)return i.default.createElement(l.default,{id:1899,params:{name:(0,s.getFormattedNames)(o,!0)},plural:o.length,wrapInHiddenToken:!0});if("remove"===a)return i.default.createElement(l.default,{id:1900,params:{name:(0,s.getFormattedNames)(o,!0)},plural:o.length,wrapInHiddenToken:!0});return null};var i=r(a(67294)),s=a(83056),l=r(a(41849)),n=r(a(95607))},28553:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;t=e.placeholder?s.default.createElement("div",{className:l.default.actionsBtn},"​"):e.items.map(((e,t)=>s.default.createElement("div",{className:l.default.actionsBtn,key:t,onClick:e.onClick,role:"button",title:e.title||e.label},e.label)));return s.default.createElement("div",{className:(0,i.default)(l.default.actions,{[l.default.noDivider]:"no-divider"===e.theme})},t)};var i=r(a(94184)),s=r(a(67294)),l=r(a(77482))},18328:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{children:t,className:a,contact:r,msg:d,onClick:u,style:c}=e,{isMe:f,formattedUser:h}=(0,o.default)(r,["formattedUser","name","isMe"]),{t:p}=(0,o.default)(d,["senderObj","t"]),m=s.default.timeStr(p),_=function(e,t){var a=null!=t?t:"";return e&&l.default.pushname?l.default.pushname:a}(f,h);return i.default.createElement(n.CopyableDiv,{className:a,onClick:u,prePlainText:`[${m}] ${_}: `,style:c},t)};var i=r(a(67294)),s=r(a(44386)),l=r(a(11288)),n=a(46283),o=r(a(95607))},90754:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e}){var{replyButtons:t}=e;if(null==t||0===t.length)return null;var a=t.some((e=>e.displayText.length>10));return l.default.createElement("div",{className:(0,s.default)(n.default.buttonContainer,{[n.default.stacked]:t.length>=3||a,[n.default.withLargeButtonsSpace]:a})},t.map(((t,a)=>l.default.createElement(h,{key:a,msg:e,replyButton:t}))))};var i=r(a(67154)),s=r(a(94184)),l=r(a(67294)),n=r(a(27660)),o=r(a(22952)),d=a(73525),u=r(a(95607)),c=r(a(7456)),f=r(a(13085));function h({msg:e,replyButton:t}){var{chat:a,isSentByMe:r}=(0,u.default)(e,["chat","isSentByMe"]),h=(0,u.default)(t,["selected","displayText","id"]),p=(0,c.default)(t,"selected"),{selected:m,displayText:_}=t,[v,g]=(0,f.default)((()=>{p(!0),(0,o.default)(e,h,a).then((e=>{e!==d.SendMsgResult.OK&&p(!1)})).catch((()=>{p(!1)}))}),{disabled:m});return _?l.default.createElement("div",(0,i.default)({ref:v,className:(0,s.default)(n.default.buttonWrapper,{[n.default.disabled]:m})},g),l.default.createElement("div",{className:(0,s.default)(n.default.buttonLabel,{[n.default.sentByMe]:r})},l.default.createElement("span",null,_))):null}},12196:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{spacer:t,trusted:a}=e,r=(0,c.default)(e.msg,["t","id","dir","rtl","text","initialPageSize","footer","ctwaContext"]),f=(0,s.Conversation)({mentions:r.mentionMap(),links:r.getLinks(),selectable:true,trusted:!0===a}),h=r.text;if(!h)return null;var p=!(!r.dir||r.rtl===o.default.isRTL());return i.default.createElement(i.default.Fragment,null,!r.ctwaContext&&i.default.createElement(u.default,{msg:r}),i.default.createElement(d.default,{msg:r,"data-id":r.id,spacer:t},i.default.createElement(n.default,{text:h,textLimit:r.initialPageSize},(({textLimit:e})=>i.default.createElement(l.default,{direction:r.dir,dirMismatch:p,formatters:f,inferLinesDirection:!0,selectable:true,text:r.text,textLimit:e})))))};var i=r(a(67294)),s=a(79027),l=r(a(20923)),n=r(a(36868)),o=r(a(80162)),d=r(a(2175)),u=r(a(57179)),c=r(a(95607))},1723:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e.msg,["thumbnail","title","description","matchedText","isSentByMe","star"]);return i.default.createElement(l.default,{title:t.title,description:t.description,thumbnailJpeg:t.thumbnail,onClick:()=>{var e=t.matchedText;(0,s.openExternalLink)(e)},isSentByMe:t.isSentByMe,star:t.star})};var i=r(a(67294)),s=a(1886),l=r(a(29700)),n=r(a(95607))},93807:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,f.default)(e.msg,["isSentByMe","isGroupMsg","senderObj"]);return i.default.createElement(c.default,{msg:(0,u.unproxy)(t),displayAuthor:e.displayAuthor},i.default.createElement(d.default,{iconName:"ciphertext",msg:t.unsafe()},o.default.t(1332)," ",i.default.createElement("span",{className:s.default.action,role:"button",onClick:h},o.default.t(1002))))};var i=r(a(67294)),s=r(a(56889)),l=a(1886),n=a(84641),o=r(a(80162)),d=r(a(72002)),u=a(6578),c=r(a(188)),f=r(a(95607)),h=()=>{(0,l.openExternalLink)((0,n.getCiphertextFaqUrl)())}},29875:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBubbleDimension=function(e,t,a,r,i,d){var u,h,p=d&&a<1?1:a,m=function(e,t,a){return f(e,t,a)?o:n}(e,r,i);r===l.DisplayTheme.Album?(u=s.default.ALBUM_MAX_HEIGHT-s.default.ALBUM_PADDING,h=s.default.ALBUM_MAX_HEIGHT):(u=p<1?m.portraitWidth:m.width,h=function(e,t,a,r){if(r&&t<=s.default.HSM_ASPECT_RATIO)return c(s.default.HSM_ASPECT_RATIO,e,a);return c(t,e,a)}(m,p,e,t));return{bubbleWidth:u,bubbleHeight:h}},t.getImgStyle=function(e,t,a,r){if(null==e||0===e||null==t||0===t||null==a||0===a||null==r||0===r)return{width:"100%",height:"100%"};return e/t>a/r?{height:"100%"}:{width:"100%"}},t.canUseCustomCropping=f;var i=r(a(81109)),s=r(a(75444)),l=a(31351),n={width:330,portraitWidth:330,minAspectRatio:1,maxAspectRatio:2.4},o=(0,i.default)((0,i.default)({},n),{},{portraitWidth:240,minAspectRatio:.71,maxAspectRatio:4}),d=new Set([s.default.MSG_TYPE.IMAGE,s.default.MSG_TYPE.VIDEO]),u=new Set([s.default.DISP_TYPE.CONVERSATION,s.default.DISP_TYPE.MSG_INFO,s.default.DISP_TYPE.STARRED_MSGS]);function c(e,t,a){return null==e?a===s.default.MSG_TYPE.VIDEO?240:330:e<t.minAspectRatio?t.portraitWidth/t.minAspectRatio:e<1?t.portraitWidth/e:e<=t.maxAspectRatio?t.width/e:t.width/t.maxAspectRatio}function f(e,t,a){return d.has(e)&&u.has(a)&&t!==l.DisplayTheme.Album}},49218:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.unproxy)(e.msg);if(t.ctwaContext){var a=t.ctwaContext.mediaType!==n.ExternalAdReplyInfoMediaType.VIDEO||t.ctwaContext.isSuspiciousLink?i.default.createElement(i.default.Fragment,null,i.default.createElement(d.default,{msg:t}),i.default.createElement(s.default,{context:t.ctwaContext,isSentByMe:t.isSentByMe,compose:!1})):i.default.createElement(l.default,{msg:t,context:t.ctwaContext});return i.default.createElement("div",{className:e.wrapperClass},a)}return null};var i=r(a(67294)),s=r(a(38414)),l=r(a(69426)),n=a(91591),o=a(6578),d=r(a(57179))},38414:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({sourceUrl:e,context:t,isSentByMe:a,compose:r}){var m;m=(null==t?void 0:t.isSuspiciousLink)||!(null==t?void 0:t.thumbnailUrl)&&!(null==t?void 0:t.thumbnail)?l.default.createElement("div",{className:o.default.noThumbContainer},l.default.createElement(h.default,{className:o.default.noThumbIcon,name:"link"})):l.default.createElement("img",{alt:"",className:o.default.media,src:t.thumbnailUrl?t.thumbnailUrl:`data:image/jpeg;base64,${t.thumbnail||""}`});var _=null!=(null==t?void 0:t.description)&&!t.isSuspiciousLink&&l.default.createElement("div",{className:o.default.description},l.default.createElement(d.default,{text:t.description,titlify:!0})),v=e;if(t&&(v=t.sourceUrl,!t.isSuspiciousLink&&(t.title||t.thumbnailUrl||t.thumbnail))){v=p.default.hostname(v);try{v=s.default.toUnicode(v)}catch(e){}}var g=v&&l.default.createElement("div",{className:o.default.source},l.default.createElement(d.default,{text:v})),E=(null==t?void 0:t.isSuspiciousLink)?null:null==t?void 0:t.title,S=(0,i.default)(o.default.preview,{[o.default.isCompose]:r,[o.default.bubbleIn]:!r&&!a,[o.default.bubbleOut]:a});return l.default.createElement("div",{className:S,onClick:()=>{if(!r)if(null==t?void 0:t.isSuspiciousLink){var e=(0,c.findLink)(t.sourceUrl);e&&n.default.openModal(l.default.createElement(f.default,{link:e}))}else(null==t?void 0:t.sourceUrl)&&(0,u.openExternalLink)(t.sourceUrl)}},m,l.default.createElement("div",{className:o.default.body},l.default.createElement("div",{className:o.default.title,title:E},l.default.createElement(d.default,{text:E})),_,g))};var i=r(a(94184)),s=r(a(74971)),l=r(a(67294)),n=r(a(33766)),o=r(a(10989)),d=r(a(20923)),u=a(1886),c=a(66802),f=r(a(72682)),h=r(a(32885)),p=r(a(97439))},69426:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(75444)),d=i(a(21131)),u=i(a(20923)),c=r(a(1886)),f=i(a(77188)),h=i(a(80162)),p=i(a(80896)),m=r(a(73616)),_=i(a(46169)),v=i(a(47540)),g=i(a(88799)),E=i(a(84816)),S=i(a(68127)),C=i(a(32885)),y=r(a(48847)),b=i(a(97439)),M=i(a(41956)),T=i(a(35822)),I="PREVIEW",P="FLOATER";class A extends l.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==I&&this.setState({mode:I})},this.setFloaterMode=()=>{this.state.mode!==P&&this.setState({mode:P})},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),(0,c.openExternalLink)(this.props.context.sourceUrl)};var t=e.msg;if(t.type===o.default.MSG_TYPE.VIDEO){var a=e.msg.toJSON(),r=new v.default({fromMe:e.msg.id.fromMe,remote:e.msg.id.remote,id:(0,S.default)()});a.id=r,t=new _.default(a)}var i=g.default.isOpened(t)?P:I;this.state={mode:i,msg:t}}componentDidMount(){this.props.listeners.add(g.default,`${this.state.msg.id.toString()}_pip_did_open`,this.setFloaterMode),this.props.listeners.add(g.default,`${this.state.msg.id.toString()}_pip_did_close`,this.setPreviewMode)}render(){var e,t=this.props.context.description?l.default.createElement("div",{className:M.default.description,title:this.props.context.description},l.default.createElement(u.default,{text:this.props.context.description})):null,a=b.default.withoutWww(b.default.hostname(this.props.context.sourceUrl)),r=l.default.createElement("div",{className:M.default.source},l.default.createElement(u.default,{text:a})),i=(0,s.default)(M.default.body,{[M.default.noThumb]:!this.props.context.thumbnail}),p=(0,s.default)(M.default.preview,{[M.default.bubbleIn]:!this.state.msg.isSentByMe,[M.default.bubbleOut]:this.state.msg.isSentByMe}),_=this.state.mode!==I||f.default.supportsFeature(f.default.F.MD_BACKEND)?null:l.default.createElement("div",{className:M.default.mediaStateControlsWrapper},l.default.createElement(m.Play,null)),v=this.state.mode===P?l.default.createElement(E.default,{icon:l.default.createElement(C.default,{name:"video-pip-large"})},h.default.t(1329)):null;e=this.props.context.thumbnail||this.props.context.thumbnailUrl?l.default.createElement("img",{alt:"",className:(0,s.default)(M.default.thumbnail,{[M.default.youtubeThumbnail]:!1}),src:this.props.context.thumbnail?`data:image/jpeg;base64,${this.props.context.thumbnail}`:this.props.context.thumbnailUrl}):l.default.createElement("div",{className:M.default.thumbnailPlaceholder});var S=(0,s.default)(M.default.attribution,d.default.clickable),A=a===o.default.HOSTNAME.INSTAGRAM,N=l.default.createElement("div",{className:S,onClick:this.handleCtwaSourceButtonClick},l.default.createElement(C.default,{name:A?"logo-instagram":"logo-facebook"}));return l.default.createElement("div",{className:p},l.default.createElement("div",{ref:this.setRefThumbnailWrapper,className:M.default.thumbnailWrapper,onClick:f.default.supportsFeature(f.default.F.MD_BACKEND)?this.handleCtwaSourceButtonClick:()=>{g.default.openOgVideoPiP("",this.props.context.thumbnail||"",this.state.msg,0,this.getThumbnailWrapperRect()),T.default.queryVideoPlaybackUrl(this.props.context.mediaUrl).then((e=>{if(g.default.isOpened(this.state.msg)){if(!e.url)throw new Error("Url is missing in response.");g.default.openOgVideoPiP(e.url,this.props.context.thumbnail||"",this.state.msg,0,null)}})).catch((()=>{g.default.closeOgVideoPiP(),n.default.openToast(l.default.createElement(y.default,{id:(0,y.genId)(),msg:h.default.t(1327),action:{actionText:h.default.t(1328),onAction:()=>{(0,c.openExternalLink)(this.props.context.sourceUrl)}}}))}))}},N,e,_,v),l.default.createElement(c.default,{className:i,href:this.props.context.sourceUrl},l.default.createElement("div",{className:M.default.title,title:this.props.context.title},l.default.createElement(u.default,{text:this.props.context.title})),t,r))}}A.displayName="CtwaContextVideoPreview";var N=(0,p.default)(A);t.default=N},74271:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(30381)),l=r(a(67294)),n=i(a(44386)),o=i(a(33766)),d=i(a(20923)),u=i(a(80896)),c=a(32692);class f extends l.PureComponent{constructor(...e){super(...e),this.state={hidden:!1},this._setRefBubble=e=>{this.refBubble=e},this.rerender=()=>{this.forceUpdate()}}componentDidMount(){this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getTimestamp(){return this.props.timestamp}show(){this.state.hidden&&this.setState({hidden:!1})}hide(){this.state.hidden||this.setState({hidden:!0})}maybeRegMidnight(){this.props.listeners.remove(o.default,"midnight",this.rerender);var e=(0,s.default)().startOf("day").subtract(7,"day");this.props.timestamp>=e.unix()&&this.props.listeners.add(o.default,"midnight",this.rerender)}render(){var e,{isFocusable:t}=this.props,{hidden:a}=this.state;if(!a)try{var r=n.default.relativeDateStr(this.props.timestamp);e=l.default.createElement(d.default,{direction:"auto",text:r.toUpperCase()})}catch(e){__LOG__(4,void 0,new Error,void 0,["date_marker"])`Clock.relativeDateStr threw with error ${null==e?void 0:e.name}, stack: ${null==e?void 0:e.stack}`}return l.default.createElement(c.SystemBubble,{ref:this._setRefBubble,hidden:a,isFocusable:t},e)}}f.displayName="DateMarker";var h=(0,u.default)(f);t.default=class extends h{getTimestamp(){return this.getComponent().getTimestamp()}show(){return this.getComponent().show()}hide(){return this.getComponent().hide()}getElement(){return this.getComponent().refBubble}}},71394:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({className:e,children:t,direction:a="horizontal",outgoingMsg:r,position:n,withBorder:o=!1}){return s.default.createElement("div",{className:(0,i.default)({[l.default.wrapper]:!0,[l.default.withBorder]:o,[l.default.posBottom]:"bottom"===n,[l.default.posTop]:"top"===n,[l.default.wrapperIn]:!r,[l.default.wrapperOut]:r},e)},t)};var i=r(a(94184)),s=r(a(67294)),l=r(a(40618))},23840:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{displayAuthor:r,displayType:i,quotedMsg:n,trusted:F}=e,B=(0,w.default)(e.msg,["ack","caption","dir","isFromTemplate","isFailed","isSentByMe","rtl","senderObj","subtype","type","isVcardOverMmsDocument","mediaData","isDynamicReplyButtonsMsg"]),G=(0,w.default)(e.mediaData,["mediaStage","filename","pageCount","size","mimetype","preview","fullPreviewData"]);(0,d.useEffect)((()=>{G.fullPreviewData||N.default.webDownloadDocumentThumbMmsEnabled&&(0,v.default)({msg:(0,O.unproxy)(B),isPreload:!1})}),[]);var U,j,V=e=>{L(e),u.default.openModal(d.default.createElement(b.default,{msg:B.unsafe()}))};if(G.pageCount>0){var H=y.default.t(1799,{count:G.pageCount,_plural:G.pageCount});a=d.default.createElement("span",{className:_.default.metaValue,title:H},H)}if(G.size>0){var W=y.default.filesize(G.size);U=d.default.createElement("span",{className:_.default.metaValue,title:W},W)}var Y,K,q=_.default.filetypeIcon;if(k.hasOwnProperty(G.mimetype)){var z;Y=null===(z=k[G.mimetype].ext)||void 0===z?void 0:z.toLowerCase(),K=G.mimetype}var $=G.filename?(0,E.getFileExtension)(G.filename):null;(!Y||$&&Y!==$)&&(Y=$,K=(0,l.default)(A.EXT_TO_MIME,Y));if(q=(0,o.default)(q,K&&(0,l.default)(k,[K,"icon"])||"icon-doc-generic"),Y){var Q=Y.toUpperCase();j=d.default.createElement("span",{"data-meta-key":"type","data-testid":"type",className:_.default.metaValue,title:Q},Q)}var X=G.filename||y.default.t(1598),J=null,Z={onClick:()=>{}};switch(G.mediaStage){case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case T.MEDIA_DATA_STAGE.NEED_POKE:case T.MEDIA_DATA_STAGE.INIT:Z.onClick=e=>{if(L(e),Modernizr.adownload)B.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:P.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0}).catch((()=>{})).then((()=>{switch(G.mediaStage){case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:B.isVcardOverMmsDocument||((()=>{var e=G.filename||y.default.t(1598);u.default.openToast(d.default.createElement(R.default,{msg:y.default.t(690,{name:e}),id:(0,R.genId)()}))})(),S.default.initDownload((0,O.unproxy)(B.unsafe())));break;case T.MEDIA_DATA_STAGE.ERROR_MISSING:V()}}));else{var t=y.default.t(2092,{chrome_homepage:f.default.BROWSER_LINK.CHROME,firefox_homepage:f.default.BROWSER_LINK.FIREFOX,opera_homepage:f.default.BROWSER_LINK.OPERA});u.default.openModal(d.default.createElement(c.default,{onOK:()=>u.default.closeModal(),okText:y.default.t(1941)},d.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}})))}},Z.title=y.default.t(1811,{name:X}),J=d.default.createElement(m.Download,{onClick:Z.onClick});break;case T.MEDIA_DATA_STAGE.FETCHING:J=d.default.createElement(m.PendingCancel,{outgoingMsg:B.isSentByMe}),Z.onClick=e=>{L(e),B.cancelDownload()};break;case T.MEDIA_DATA_STAGE.UPLOADING:J=d.default.createElement(m.PendingCancel,{outgoingMsg:B.isSentByMe}),Z.onClick=e=>{L(e),B.cancelUpload()};break;case T.MEDIA_DATA_STAGE.NEED_UPLOAD:J=d.default.createElement(m.Upload,null),Z.onClick=e=>{L(e),B.resumeUpload()};break;case T.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:J=d.default.createElement(m.Upload,null),Z.onClick=e=>{L(e),B.resumeRemoteUpload()};break;case T.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:break;case T.MEDIA_DATA_STAGE.ERROR_MISSING:Z.onClick=V;break;case T.MEDIA_DATA_STAGE.SENDING:J=B.isFailed?null:d.default.createElement(m.Pending,{outgoingMsg:B.isSentByMe});break;default:J=d.default.createElement(m.Pending,{outgoingMsg:B.isSentByMe})}var ee=(B.isFromTemplate||B.isDynamicReplyButtonsMsg)&&B.caption,te=ee?null:d.default.createElement("div",{className:_.default.docMeta},a,j,U),ae=null!=(null!==(t=G.preview)&&void 0!==t?t:G.fullPreviewData);return d.default.createElement("div",{className:(0,o.default)({[_.default.bubble]:!ee,[_.default.templateBubble]:ee,[_.default.isPreview]:i===f.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:i===f.default.DISP_TYPE.STARRED_MSGS||i===f.default.DISP_TYPE.GALLERY})},d.default.createElement(I.default,{displayType:i,msg:B,quotedMsg:n,showAuthor:r,hideCaption:!(B.isFromTemplate||B.isDynamicReplyButtonsMsg),trusted:F},d.default.createElement(h.default,{msg:B.unsafe(),wrapperClass:_.default.ctwaContext}),d.default.createElement(D.default,(0,s.default)({xstyle:x.buttonContainer,a8nText:"document-thumb"},Z),e.trusted?d.default.createElement(M.default,{msg:B.unsafe(),containerClassName:_.default.thumbContainer,childClassName:_.default.thumb}):null,d.default.createElement(p.default,{outgoingMsg:B.isSentByMe,position:ae?"bottom":void 0},d.default.createElement(C.FlexRow,{className:_.default.deepContainerContent,align:"center"},d.default.createElement(C.FlexItem,{className:_.default.icon,shrink:0},d.default.createElement("div",{className:q})),d.default.createElement(C.FlexItem,{className:_.default.text,grow:1},d.default.createElement(g.default,{text:X,dirMismatch:B.rtl!==y.default.isRTL(),direction:"auto"})),d.default.createElement(C.FlexItem,{grow:0,shrink:0},J)))),te))};var s=i(a(67154)),l=i(a(27361)),n=i(a(35937));a(86345);var o=i(a(94184)),d=r(a(67294)),u=(i(a(56720)),i(a(33766))),c=i(a(51115)),f=i(a(75444)),h=i(a(49218)),p=i(a(71394)),m=a(89302),_=i(a(47164)),v=i(a(7760)),g=i(a(20923)),E=a(37470),S=i(a(61900)),C=a(57909),y=i(a(80162)),b=i(a(22039)),M=i(a(60237)),T=a(85063),I=i(a(33302)),P=i(a(72462)),A=a(5106),N=i(a(43232)),O=a(6578),D=i(a(32759)),w=i(a(95607)),R=r(a(48847)),k=(0,n.default)(A.MIMETYPES,(e=>"document"===e.msgType));function L(e){e&&(e.stopPropagation(),e.preventDefault())}var x={buttonContainer:{boxSizing:"c3aacg4p",display:"fwy6kijg",flexDirection:"bg8ykw79",alignItems:"nq8wg1g6",width:"m0l2qjqb",overflowX:"ckp28pf4",overflowY:"mm4nmggu",color:"tqnj7okb",textAlign:"iv7yafs8",cursor:"obqxa8fb",borderTopStartRadius:"kpo9gg0h",borderTopEndRadius:"gw6rkwlv"}}},92589:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,[a,r]=(0,n.useState)(!1),[i,h]=(0,f.default)(e.onClick);null!=e.onClick&&(t=h);return n.default.createElement("div",{className:(0,l.default)(u.default.container,{[u.default.compact]:e.displayType===o.default.DISP_TYPE.MSG_INFO}),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),"data-testid":"fail-container"},a?n.default.createElement(d.default,null,e.tooltip):null,n.default.createElement("div",(0,s.default)({className:u.default.error,ref:i},t),n.default.createElement(c.default,{name:"error"})))};var s=i(a(67154)),l=i(a(94184)),n=r(a(67294)),o=i(a(75444)),d=i(a(77062)),u=i(a(75140)),c=i(a(32885)),f=i(a(13085))},11181:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t,displayType:a,mdDowngrade:r}=e,{isFailed:u,to:c}=(0,d.default)(t,["isFailed","to"]);if(!u)return null;return i.default.createElement(l.default,{displayType:a,tooltip:n.default.t(1928),onClick:()=>{s.default.openModal(i.default.createElement(o.default,{to:c,participant:r,msg:t}))}})};var i=r(a(67294)),s=r(a(33766)),l=(r(a(75444)),r(a(92589))),n=r(a(80162)),o=r(a(42618)),d=r(a(95607))},64341:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t,displayType:a}=e,{isFailed:r}=(0,d.default)(t,["isFailed"]);if(!r)return null;return i.default.createElement(l.default,{displayType:a,tooltip:n.default.t(1928),onClick:()=>{s.default.openModal(i.default.createElement(o.default,{msg:t}))}})};var i=r(a(67294)),s=r(a(33766)),l=(r(a(75444)),r(a(92589))),n=r(a(80162)),o=r(a(33509)),d=r(a(95607))},35796:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayType:t,msg:a}=e,{mediaData:r,mdDowngrade:c,isSendFailure:f}=(0,n.default)(a,["mediaData","mdDowngrade","isSendFailure"]);if(r)return i.default.createElement(s.default,{displayType:t,msg:a});if(o.default.supportsFeature(o.default.F.MD_BACKEND)){if(c)return i.default.createElement(d.default,{msg:a,displayType:t,mdDowngrade:c});if(f)return i.default.createElement(u.default,{msg:a,displayType:t})}return i.default.createElement(l.default,{msg:a,displayType:t})};var i=r(a(67294)),s=(r(a(75444)),r(a(82417))),l=r(a(65600)),n=r(a(95607)),o=r(a(77188)),d=r(a(11181)),u=r(a(64341))},82417:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayType:t,msg:a}=e,{isFailed:r,type:h,isUnsentMedia:p}=(0,c.default)(a,["isFailed","type","isUnsentMedia"]),{mediaStage:m,type:_}=(0,c.default)(a.mediaData,["mediaStage","type"]),v=t===s.default.DISP_TYPE.CONVERSATION;if(h===s.default.MSG_TYPE.REVOKED)return null;if(m===d.MEDIA_DATA_STAGE.ERROR_TOO_LARGE)return i.default.createElement(u.default,{displayType:t,mediaType:_});if(p&&(m===d.MEDIA_DATA_STAGE.ERROR_MISSING||m===d.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED))return i.default.createElement(l.default,{displayType:t,tooltip:o.default.t(1467)});if(r)return m===d.MEDIA_DATA_STAGE.ERROR_MISSING?i.default.createElement(l.default,{displayType:t,tooltip:o.default.t(1581)}):h===s.default.MSG_TYPE.PTT&&m===d.MEDIA_DATA_STAGE.PREPARING?i.default.createElement(l.default,{displayType:t,tooltip:o.default.t(1375)}):n.default.supportsFeature(n.default.F.RESEND_ICON)&&v&&m!==d.MEDIA_DATA_STAGE.REMOTE_UPLOADING?i.default.createElement(l.default,{displayType:t,onClick:f.bind(null,a),tooltip:o.default.t(1417)}):i.default.createElement(l.default,{displayType:t,tooltip:o.default.t(1467)});return null};var i=r(a(67294)),s=r(a(75444)),l=r(a(92589)),n=r(a(77188)),o=r(a(80162)),d=a(85063),u=r(a(83702)),c=r(a(95607));function f(e){e.resend().catch((function(e){__LOG__(2)`msg_media_fail_icon:resend failure: ${e}`}))}},83702:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t={maxSize:d.default.filesize(u.default.media)},a={maxSize:d.default.filesize(u.default.maxFileSize)};switch(e){case n.default.MSG_TYPE.AUDIO:case n.default.MSG_TYPE.PTT:return d.default.t(1115,t);case n.default.MSG_TYPE.IMAGE:return d.default.t(1119,t);case n.default.MSG_TYPE.VIDEO:return d.default.t(1137,t);case n.default.MSG_TYPE.DOCUMENT:return d.default.t(1117,a);case n.default.MSG_TYPE.UNKNOWN:default:return d.default.t(1118,a)}}(e.mediaType);return i.default.createElement(o.default,{displayType:e.displayType,onClick:c.bind(null,t),tooltip:t})};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(75444)),o=r(a(92589)),d=r(a(80162)),u=r(a(43232));function c(e){s.default.openModal(i.default.createElement(l.default,{onOK:()=>s.default.closeModal()},e))}},65600:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t,displayType:a}=e,{isFailed:r}=(0,n.default)(t,["isFailed"]);if(!r)return null;return i.default.createElement(s.default,{displayType:a,tooltip:l.default.t(1417),onClick:()=>{t.resend().catch((()=>{__LOG__(2)`PlainMsgFailIcon: failed to resend message`}))}})};var i=r(a(67294)),s=(r(a(75444)),r(a(92589))),l=r(a(80162)),n=r(a(95607))},43369:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{className:t}=e,a=(0,c.default)(e.msg,["isForwarded","forwardingScore","numTimesForwarded","isFrequentlyForwarded"]);if(!(0,o.showForwarded)(a))return null;var r=d.default.frequentlyForwardedMessages&&a.isFrequentlyForwarded,f=d.default.hfmStringChanges?"highly-forwarded-v2":"highly-forwarded",h=r?f:"forwarded",p=(0,i.default)(l.default.icon,{[l.default.iconHighlyForwarded]:r&&!d.default.hfmStringChanges}),m=d.default.hfmStringChanges?n.default.t(823):n.default.t(820),_=r?m:n.default.t(820);return s.default.createElement("div",{className:(0,i.default)(l.default.container,t)},s.default.createElement(u.default,{name:h,display:"inline",className:p}),s.default.createElement("span",{className:l.default.text},_))};var i=r(a(94184)),s=r(a(67294)),l=r(a(67713)),n=r(a(80162)),o=a(86146),d=r(a(43232)),u=r(a(32885)),c=r(a(95607))},75252:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(9908)),o=i(a(14583));class d extends l.PureComponent{constructor(...e){super(...e),this._setCellFrameDivRef=e=>{this._cellFrameDivRef=e}}indicateFocus(){n.default.maybeIndicateFocus(this._cellFrameDivRef,o.default.focusAnimation)}render(){var e=this.props,t=(0,s.default)(o.default.msg,{[o.default.hover]:e.hover,[o.default.current]:e.current,[o.default.active]:e.active});return l.default.createElement("div",{ref:this._setCellFrameDivRef,className:t,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave},e.children)}}t.default=d,d.displayName="GalleryMsg"},39377:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BUBBLE_PADDING=t.MAX_DIM=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(28745)),d=i(a(18328)),u=i(a(12196)),c=i(a(33766)),f=i(a(75444)),h=i(a(49218)),p=a(91591),m=i(a(43369)),_=i(a(1565)),v=i(a(12007)),g=i(a(80162)),E=i(a(22039)),S=a(85063),C=i(a(62181)),y=i(a(72462)),b=a(86146),M=(a(20666),i(a(72765))),T=a(6578),I=a(80851),P=i(a(32885)),A=i(a(72304)),N=i(a(63293)),O=(0,I.getIntFromStylesProp)(_.default,"-width-picture-bubble-inner");t.MAX_DIM=O;var D=(0,I.getIntFromStylesProp)(_.default,"-padding-picture-bubble");t.BUBBLE_PADDING=D;var w=O/4;class R extends l.PureComponent{constructor(...e){super(...e),this.state={playing:!1},this._refPlayer=(0,l.createRef)(),this.playCount=0,this.pause=()=>{this.playCount=0,this._pause()},this.handleKeyActivation=e=>{e.stopPropagation(),e.preventDefault(),this._handleClick(e)},this.play=e=>{var{mediaData:t}=this.props,a=this._refPlayer.current;if(t.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED&&a){e&&e.stopPropagation();var r=this.duration;if(null==r||0===r){var i=a.getDuration();null!=i?r=i:t.duration&&"0"!==t.duration&&(r=parseInt(t.duration,10))}if(null!=r&&0!==r){var s=Math.ceil(6/r);this.playCount=Math.max(s,3)}else this.playCount=3;this._play()}},this._pause=()=>{var e;this.setState({playing:!1}),null===(e=this._refPlayer.current)||void 0===e||e.pauseAndReset()},this._play=()=>{this._refPlayer.current&&(this.playCount<=0?this.pause():(this.playCount-=1,this.state.playing||this.setState({playing:!0}),this._refPlayer.current.play()))},this.showMediaMissing=()=>{c.default.openModal(l.default.createElement(E.default,{msg:this.props.msg.unsafe()}))},this.getZoomNode=e=>{var t=this.props.isMsgVisible;if(!t)return null;var a=t(e);return a?a.getImgNode&&a.getImgNode():null},this.launchMediaViewer=e=>{e&&e.stopPropagation(),c.default.mediaViewerModal({msg:(0,T.unproxy)(this.props.msg.unsafe()),getZoomNode:this.getZoomNode})},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:y.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._handleClick=e=>{switch(this.props.mediaData.mediaStage){case S.MEDIA_DATA_STAGE.RESOLVED:this._shouldPlay()?this.play(e):this.launchMediaViewer(e);break;case S.MEDIA_DATA_STAGE.INIT:this.launchMediaViewer(e);break;case S.MEDIA_DATA_STAGE.FETCHING:this.cancelDownload();break;case S.MEDIA_DATA_STAGE.NEED_POKE:this._downloadMedia();break;case S.MEDIA_DATA_STAGE.UPLOADING:this.cancelUpload();break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:this.resumeUpload();break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:this.resumeRemoteUpload();break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:this.showMediaMissing()}}}componentDidMount(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:y.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}getStyle(){var e,t,a=this.props.mediaData,r=a.aspectRatio||a.fullWidth/a.fullHeight;if(!r)return{bubbleWidth:O,bubbleHeight:"100%",contentWidth:O,contentHeight:"100%"};r<=1/4?(t=O,e=1.2*w):r<1?(t=O,e=O*r):r<4?(e=O,t=O/r):(e=O,t=w);var i=a.renderableUrl&&a.fullWidth||e,s=a.renderableUrl&&a.fullHeight||t;return i/s>e/t?(i=i*t/s,s=t):(s=s*e/i,i=e),s>O&&(s=O),{bubbleWidth:e,bubbleHeight:t,contentWidth:i,contentHeight:s}}_getFlexSize(e){var t,a,r=this.props.mediaData,i=r.aspectRatio||r.fullWidth/r.fullHeight,s=1.2*w;i>=1?e<O?(a=(t=e)/i)<w&&(a=w):(a=(t=O)/i)<w&&(a=w):((t=(a=O)*i)<s&&(t=s),e<O&&t>e&&(t=e));var l=t,n=a;return l/n>t/a?(l=l*a/n,n=a):(n=n*t/l,l=t),{bubbleWidth:t,bubbleHeight:a,contentWidth:l,contentHeight:n}}getImgNode(){var e;return null===(e=this._refPlayer.current)||void 0===e?void 0:e.underlyingVideo()}_shouldPlay(){return!this.state.playing&&this.playCount!==1/0}render(){var e=this.props.msg,t=this.props.mediaData,a=t.preview?t.preview.url():void 0,r=null,i=this.getStyle();null!=this.props.maxWidth&&this.props.maxWidth<i.bubbleWidth&&(i=this._getFlexSize(this.props.maxWidth));var{bubbleWidth:c,contentWidth:E,contentHeight:y}=i;if(t.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED){var M=t.aspectRatio>=1?{width:"auto",height:y}:{width:E,height:"auto"};r=l.default.createElement("div",{className:_.default.thumbVideo},l.default.createElement(N.default,{ref:this._refPlayer,src:t.renderableUrl,style:M,onEnded:this._play,muted:!0},g.default.t(1633)))}var T,I=a?l.default.createElement("div",{className:_.default.thumbImage,style:{backgroundImage:`url(${a})`}}):null,O=e.caption?l.default.createElement("div",{className:_.default.caption,style:{maxWidth:c}},l.default.createElement(u.default,{msg:e.unsafe(),trusted:this.props.trusted})):null,w=O?null:l.default.createElement(A.default,null),R=(0,b.showForwarded)(e),L=(0,s.default)(_.default.bubble,{[_.default.hasCaption]:e.caption,[_.default.hasAuthor]:this.props.displayAuthor,[_.default.forwarded]:R,[_.default.isPSA]:e.isPSA,[_.default.isGallery]:this.props.displayType===f.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===f.default.DISP_TYPE.GALLERY,[_.default.isInfo]:this.props.displayType===f.default.DISP_TYPE.MSG_INFO}),x=this.props.displayAuthor?l.default.createElement("div",{className:_.default.author},l.default.createElement(o.default,{msg:e,contact:e.senderObj})):null,F=R?l.default.createElement(m.default,{msg:e.unsafe(),className:_.default.forwardedIndicator}):null;switch(e.gifAttribution){case p.VideoMessageAttribution.GIPHY:T=l.default.createElement("div",{className:_.default.vendor},l.default.createElement(P.default,{name:"giphy"}));break;case p.VideoMessageAttribution.TENOR:T=l.default.createElement("div",{className:_.default.vendor},l.default.createElement(P.default,{name:"tenor"}));break;default:T=null}var B=this.props.quotedMsg?l.default.createElement("div",{className:_.default.quote},this.props.quotedMsg):null,G=l.default.createElement(l.default.Fragment,null,x,F,B,l.default.createElement(h.default,{msg:e.unsafe(),wrapperClass:_.default.ctwaContext}),l.default.createElement("div",{"data-a8n":n.default.key("image-thumb-gif"),className:_.default.thumb,onClick:this._handleClick,style:{width:E,height:y}},l.default.createElement(v.default,{mediaStage:t.mediaStage,mediaDataFileSize:t.size,isFailed:e.isFailed,shouldPlay:this._shouldPlay(),onClick:this._handleClick}),I,r,w,T),O,l.default.createElement("div",{className:_.default.meta},l.default.createElement(C.default,{msg:this.props.msg})));return O?l.default.createElement(d.default,{contact:e.senderObj,msg:e.unsafe(),className:L,onClick:k,style:{width:c}},G):l.default.createElement("div",{className:L,onClick:k,style:{width:c+2*D}},G)}}function k(e){e.stopPropagation()}R.CONCERNS={msg:["id","ack","caption","isFailed","isPSA","isSentByMe","isGroupMsg","gifAttribution","senderObj"],mediaData:["aspectRatio","preview","duration","type","mediaStage","renderableUrl","fullWidth","fullHeight","size"]},R.displayName="Gif";var L=(0,M.default)(R,R.CONCERNS);t.default=class extends L{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}pause(){return this.getComponent().pause()}getPlayCount(){return this.getComponent().playCount}getImgNode(){return this.getComponent().getImgNode()}}},12007:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({mediaStage:e,isFailed:t,mediaDataFileSize:a,shouldPlay:r,onClick:i}){switch(e){case n.MEDIA_DATA_STAGE.INIT:case n.MEDIA_DATA_STAGE.EXISTS:return null;case n.MEDIA_DATA_STAGE.RESOLVED:return r?s.default.createElement(l.GifIcon,{onClick:i}):null;case n.MEDIA_DATA_STAGE.FETCHING:case n.MEDIA_DATA_STAGE.UPLOADING:case n.MEDIA_DATA_STAGE.REUPLOADING:case n.MEDIA_DATA_STAGE.DECRYPTING:return s.default.createElement(l.Pending,{cancelable:!0});case n.MEDIA_DATA_STAGE.NEED_POKE:return s.default.createElement(l.Download,{filesize:a});case n.MEDIA_DATA_STAGE.NEED_UPLOAD:case n.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return s.default.createElement(l.Upload,{filesize:a});case n.MEDIA_DATA_STAGE.SENDING:return t?null:s.default.createElement(l.Pending,{cancelable:!0});default:return s.default.createElement(l.Pending,null)}};var s=i(a(67294)),l=r(a(73616)),n=a(85063)},30795:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(20923)),o=a(26226),d=a(83056),u=r(a(36437)),c=r(a(83288)),f=a(29989),h=r(a(41849)),p=r(a(80896)),m=r(a(72765)),_=r(a(32885)),v=r(a(53680)),g=r(a(8745));class E extends s.PureComponent{componentDidMount(){var{chat:e}=this.props.msg;null!=e.groupMetadata&&this.props.listeners.add(e.groupMetadata,"change:support",(()=>this.forceUpdate()))}stopEvent(e){e.stopPropagation(),e.preventDefault()}openInfoDrawer(){return e=>{this.stopEvent(e),l.default.chatInfoDrawer(this.props.msg.chat)}}_openGroupInviteLinkDrawer(){return e=>{this.stopEvent(e);var t=this.props.msg.chat,r=a(29639).default;l.default.openDrawerRight(s.default.createElement(r,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>l.default.closeDrawerRight()}),"slide-left",this.props.uim)}}_openExpandedGroupDesc(e){return t=>{this.stopEvent(t);var a=this.props.msg.chat;l.default.chatInfoDrawer(a,!0,e)}}_openEphemeralSetting(){return e=>{this.stopEvent(e);var t=this.props.msg.chat;l.default.ephemeralDrawer(t)}}_getFormattedText(e){return s.default.createElement(n.default,{direction:"auto",text:e})}_getEphemeralDuration(){var e,t=null===(e=this.props.msg.templateParams)||void 0===e?void 0:e[0];return t&&parseInt(t,10)||0}isMe(e){return v.default.equals(e,(0,o.getMaybeMeUser)())}_renderGroupNotificationL10n(e,t,a,r){var i=t?(0,d.getFormattedName)(t,!this.props.clickable):null;switch(e){case"add":return this.isMe(t)?s.default.createElement(h.default,{id:1860}):s.default.createElement(h.default,{id:1859,params:{name:i}});case"remove":return this.isMe(t)?s.default.createElement(h.default,{id:1872}):s.default.createElement(h.default,{id:1871,params:{name:i}});case"leave":return this.isMe(t)?s.default.createElement(h.default,{id:1868}):s.default.createElement(h.default,{id:1867,params:{name:i}});case"picture":return"remove"===r?this.isMe(t)?s.default.createElement(h.default,{id:1991}):s.default.createElement(h.default,{id:1990,params:{name:i}}):this.isMe(t)?s.default.createElement(h.default,{id:1989}):s.default.createElement(h.default,{id:1988,params:{name:i}});case"subject":var l=this._getFormattedText(r);return this.isMe(t)?s.default.createElement(h.default,{id:1890,params:{subject:l}}):null!=i?s.default.createElement(h.default,{id:1888,params:{subject:l,name:i}}):s.default.createElement(h.default,{id:1889,params:{subject:l}});case"modify":if(this.isMe(t)){var n=(0,g.default)(r);return s.default.createElement(h.default,{id:1862,params:{new_number:n,name:i}})}return s.default.createElement(h.default,{id:1861,params:{name:i}});default:__LOG__(2)`wa:groupNotification:unknown message subtype: ${e}`}}_renderGp2L10n(e,t,a,r,i,l){var n,o=t?(0,d.getFormattedName)(t,!this.props.clickable):null,u=i?i[0]:void 0,c=u?(0,d.getFormattedName)(u,!this.props.clickable):null,p=(0,d.getFormattedNames)(i,!this.props.clickable);switch(e){case"add":return t?this.isMe(t)?s.default.createElement(h.default,{id:1881,params:{participants:p}}):this.isMe(u)?null!=o?s.default.createElement(h.default,{id:1874,params:{name:o}}):s.default.createElement(h.default,{id:1878}):null!=o?s.default.createElement(h.default,{id:1873,params:{participants:p,name:o}}):s.default.createElement(h.default,{id:1877,params:{participants:p}}):this.isMe(u)?s.default.createElement(h.default,{id:1860}):s.default.createElement(h.default,{id:1859,params:{name:c}});case"remove":return t?v.default.equals(t,u)?s.default.createElement(h.default,{id:1872}):this.isMe(t)?s.default.createElement(h.default,{id:1882,params:{participants:p}}):this.isMe(u)?null!=o?s.default.createElement(h.default,{id:1876,params:{name:o}}):s.default.createElement(h.default,{id:1880}):null!=o?s.default.createElement(h.default,{id:1875,params:{participants:p,name:o}}):s.default.createElement(h.default,{id:1879,params:{participants:p}}):this.isMe(u)?s.default.createElement(h.default,{id:1872}):s.default.createElement(h.default,{id:1871,params:{name:c}});case"leave":return this.isMe(u)?s.default.createElement(h.default,{id:1868}):s.default.createElement(h.default,{id:1867,params:{name:p}});case"picture":return"remove"===r?this.isMe(t)?s.default.createElement(h.default,{id:1991}):s.default.createElement(h.default,{id:1990,params:{name:o}}):this.isMe(t)?s.default.createElement(h.default,{id:1989}):s.default.createElement(h.default,{id:1988,params:{name:o}});case"subject":var m=this._getFormattedText(r);return this.isMe(t)?s.default.createElement(h.default,{id:1890,params:{subject:m}}):null!=o?s.default.createElement(h.default,{id:1888,params:{name:o,subject:m}}):s.default.createElement(h.default,{id:1889,params:{subject:m}});case"modify":var _=(0,g.default)(t),E=(0,g.default)(u);return _===a?s.default.createElement(h.default,{id:1862,params:{name:a,new_number:E}}):s.default.createElement(h.default,{id:1861,params:{name:a}});case"create":if(this.isMe(t))return r?s.default.createElement(h.default,{id:1828,params:{subject:this._getFormattedText(r)}}):s.default.createElement(h.default,{id:1829});if(r)return null!=o?s.default.createElement(h.default,{id:1825,params:{subject:this._getFormattedText(r),name:o}}):s.default.createElement(h.default,{id:1827,params:{subject:this._getFormattedText(r)}});if(null!=o){var S=l.title();return""===S.trim()?s.default.createElement(h.default,{id:1826,params:{name:o}}):s.default.createElement(h.default,{id:1825,params:{name:o,subject:S}})}return s.default.createElement(h.default,{id:1824});case"delete":return l.isSupportGroup()?s.default.createElement(h.default,{id:1535}):s.default.createElement(h.default,{id:1844});case"promote":var C=i.length;return 1===C&&this.isMe(u)?s.default.createElement(h.default,{id:1870}):s.default.createElement(h.default,{id:1869,params:{count:C,participants:p},plural:C});case"demote":var y=i.length;return 1===y&&this.isMe(u)?s.default.createElement(h.default,{id:1864}):s.default.createElement(h.default,{id:1863,params:{count:y,participants:p},plural:y});case"invite":return this.isMe(u)?s.default.createElement(h.default,{id:1866}):s.default.createElement(h.default,{id:1865,params:{name:c}});case"revoke_invite":return this.isMe(t)?s.default.createElement(h.default,{id:1854}):s.default.createElement(h.default,{id:1853,params:{name:o}});case"description":return this.isMe(t)?s.default.createElement(h.default,{id:1842}):null!=o?s.default.createElement(h.default,{id:1838,params:{name:o}}):s.default.createElement(h.default,{id:1840});case"announce":return"on"===r?this.isMe(t)?s.default.createElement(h.default,{id:1823}):s.default.createElement(h.default,{id:1822,params:{name:o}}):this.isMe(t)?s.default.createElement(h.default,{id:1821}):s.default.createElement(h.default,{id:1820,params:{name:o}});case"restrict":return"on"===r?this.isMe(t)?s.default.createElement(h.default,{id:1886}):s.default.createElement(h.default,{id:1885,params:{name:o}}):this.isMe(t)?s.default.createElement(h.default,{id:1884}):s.default.createElement(h.default,{id:1883,params:{name:o}});case"no_frequently_forwarded":return"on"===r?this.isMe(t)?s.default.createElement(h.default,{id:1858}):s.default.createElement(h.default,{id:1857,params:{name:o}}):this.isMe(t)?s.default.createElement(h.default,{id:1856}):s.default.createElement(h.default,{id:1855,params:{name:o}});case"announce_msg_bounce":return s.default.createElement(h.default,{id:1819});case"v4_add_invite_sent":return s.default.createElement(h.default,{id:1609,params:{participants:p,count:i.length}});case"v4_add_invite_join":return s.default.createElement(h.default,{id:1608,params:{participants:p,count:i.length}});case"ephemeral":var b=null===(n=l.groupMetadata)||void 0===n?void 0:n.canSetEphemeralSetting(),M=this._getEphemeralDuration();return t?this.isMe(t)?b?s.default.createElement(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByYouAsAdmin,numSeconds:M}):s.default.createElement(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByYou,numSeconds:M}):b?s.default.createElement(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByOthersAsAdmin,numSeconds:M,name:o}):s.default.createElement(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByOthers,numSeconds:M,name:o}):b?s.default.createElement(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByUnknownAsAdmin,numSeconds:M}):s.default.createElement(f.EphemeralL10n,{type:f.EphemeralStringType.SettingChangeByUnknown,numSeconds:M});case"initial_pHash_mismatch":return s.default.createElement(h.default,{id:1852});default:__LOG__(2)`wa:groupNotification:unknown message subtype: ${e}`}}_renderIcon(e,t){if("gp2"===e){if("announce"===t)return s.default.createElement("div",{className:u.default.icon},s.default.createElement(_.default,{name:"megaphone"}));if("ephemeral"===t&&this.props.clickable)return s.default.createElement("div",{className:u.default.icon},s.default.createElement(_.default,{name:"disappearing"}))}}_getClickHandler(e,t){var a;if(this.props.clickable)switch(t){case"picture":case"subject":return this.openInfoDrawer();case"revoke_invite":return this._openGroupInviteLinkDrawer();case"description":return this._openExpandedGroupDesc();case"ephemeral":var{chat:r}=this.props.msg;if(null===(a=r.groupMetadata)||void 0===a?void 0:a.canSetEphemeralSetting())return this._openEphemeralSetting();break;case"initial_pHash_mismatch":return this._openExpandedGroupDesc(!0)}}render(){var{msg:e}=this.props,{type:t,subtype:a,author:r,body:i,recipients:l,chat:n,templateParams:o}=e,d=e.displayName();if("group_notification"!==t&&"gp2"!==t)return null;var c="gp2"===t?this._renderGp2L10n(a,r,d,i,l,n,o):this._renderGroupNotificationL10n(a,r,d,i);if(!c)return null;var f=this._getClickHandler(t,a);return s.default.createElement("div",{role:f?"button":void 0,className:u.default.notification,onClick:f},this._renderIcon(t,a),c)}}E.CONCERNS={msg:["author","body","chat","recipients","subtype","templateParams","type"]},E.displayName="GroupNotification";var S=(0,c.default)((0,p.default)((0,m.default)(E,E.CONCERNS)));t.default=S},32336:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(38906)),o=i(a(7970)),d=a(77824),u=r(a(66480)),c=r(a(80162)),f=r(a(80896)),h=r(a(31127)),p=a(53348),m=r(a(76806)),_=a(6578),v=r(a(83243)),g=r(a(26144)),E=r(a(11918)),S=r(a(4328)),C=a(50342);class y extends s.Component{constructor(...e){super(...e),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{l.default.refreshMessages()},this.state={contextMenu:null,hover:!1},this.setRefContext=e=>this.refContext=e,this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.openContextMenu=()=>{this.handleMenu(void 0,!0)},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._handleOpenInfoDrawer=()=>{l.default.msgInfoDrawer((0,_.unproxy)(this.props.msg.unsafe()))},this.handleReplyMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe()),t=e.chat;t.composeQuotedMsg=e,l.default.focusChatTextInput(t)},this.handlePrivateReplyMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe());(0,m.default)(e)},this.handleStarMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe());l.default.sendStarMsgs(e.chat,[e])},this.handleUnstarMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe());l.default.sendUnstarMsgs(e.chat,[e])},this.handleDeleteMessage=()=>{var{msg:e,isMsgVisible:t}=this.props;l.default.openModal(s.default.createElement(n.default,{chat:e.chat,msgList:[(0,_.unproxy)(e.unsafe())],deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))},this.openContactChat=()=>{(0,d.findChat)(this.props.msg.author).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)}))}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.handleMenu=(e,t)=>{if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var a=t?this._getMenuRefContext():e,r=(0,_.unproxy)(this.props.msg),i=[];r.isSentByMe&&!r.asRevoked&&i.push(s.default.createElement(o.default,{key:"info",a8n:"mi-msg-info",action:this._handleOpenInfoDrawer},c.default.t(1120))),r.canReply()&&i.push(s.default.createElement(o.default,{key:"reply",a8n:"mi-msg-reply",action:this.handleReplyMessage},c.default.t(1387))),(r.canPrivateReply()||r.canPrivateReplyInRestrictedGrp())&&i.push(s.default.createElement(o.default,{key:"private_reply",a8n:"mi-msg-reply",action:this.handlePrivateReplyMessage},c.default.t(1334))),r.canForward()&&i.push(s.default.createElement(o.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.props.onOpenForwardFlow(!0,r.unsafe())}},c.default.t(818))),r.canStar()&&(r.star?i.push(s.default.createElement(o.default,{key:"star",a8n:"mi-msg-unstar",action:this.handleUnstarMessage},c.default.t(1586))):i.push(s.default.createElement(o.default,{key:"star",a8n:"mi-msg-star",action:this.handleStarMessage},c.default.t(1504)))),i.push(s.default.createElement(o.default,{key:"delete",a8n:"mi-msg-delete",action:this.handleDeleteMessage},c.default.t(663))),r.isGroupMsg&&r.author&&!r.isSentByMe&&i.push(s.default.createElement(o.default,{key:"author",a8n:"mi-msg-author",action:this.openContactChat},c.default.t(1116,{author:r.displayName()}))),this.setState({contextMenu:{menu:i,anchor:a,theme:o.ThemeOptions.COMPACT}})}}}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}scrollMsg(e,t){this.props.scrollMsg(e,t)}highlight(e){this.props.highlight(e)}render(){var e,t,a,{msg:r,menuTransition:i}=this.props;return(this.state.hover||this.state.contextMenu)&&(e=s.default.createElement(h.default,{msg:r.unsafe(),hasAuthor:!1,position:p.MsgPosition.SINGLE,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.handleMenu(e)},isGroupedSticker:!0})),this.props.isFocused&&(t=s.default.createElement(C.WhileFocusedListener,{parent:this})),this.state.contextMenu&&(a=s.default.createElement(g.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},s.default.createElement(E.default,{contextMenu:this.state.contextMenu}))),s.default.createElement("div",{className:u.default.stickerItem,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown},s.default.createElement(v.default,{mediaData:r.mediaData,msg:r,displayAuthor:!1,forwardRef:this.props.forwardRef,animateOnView:!0}),s.default.createElement("div",{className:u.default.stickerMenu},s.default.createElement(S.default,{transitionName:i},e)),a,t)}}y.displayName="GroupedSticker";var b=(0,f.default)(y);t.default=b},59476:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement("div",{className:l.default.outerContainer,onClick:e.onClick},i.default.createElement("div",{className:l.default.innerContainer},i.default.createElement(s.default,{onChange:e.onClick,checked:e.checked})))};var i=r(a(67294)),s=r(a(20451)),l=r(a(21690))},20745:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayAuthor:t}=e,a=(0,C.default)(e.msg,["id","inviteCode","inviteCodeExp","inviteGrp","inviteGrpName","inviteGrpJpegThum","senderObj","comment","isSentByMe","isGroupMsg","isPSA","isGroupsV4InviteExpired"]),r=()=>{d.default.openModal(s.default.createElement(c.default,{msg:a}))},y=a.isGroupsV4InviteExpired,b=a.inviteGrpName;if(!u.default.supportsFeature(u.default.F.GROUPS_V_4_JOIN_PERMISSION))return s.default.createElement(h.default,{msg:(0,E.unproxy)(a),displayAuthor:t});var M,T=s.default.createElement(v.default,{size:49,thumb:a.inviteGrpJpegThum}),I=a.comment?s.default.createElement("div",{className:f.default.caption},s.default.createElement(o.default,{msg:a.unsafe(),spacer:!0,trusted:a.isTrusted()})):null,P=y?null:s.default.createElement(l.default,{items:[{label:a.isSentByMe?p.default.t(918):p.default.t(872),onClick:r}],theme:a.comment?void 0:"no-divider"}),A=!y||!I,N=A?s.default.createElement("div",{className:f.default.meta},s.default.createElement(_.default,{msg:a})):null,O=a.comment?p.default.t(916):s.default.createElement(g.default,{msg:a.unsafe()},p.default.t(916));if(y){var D=I?p.default.t(913):s.default.createElement(g.default,{msg:a.unsafe()},p.default.t(913));M=s.default.createElement("div",{className:f.default.status},D)}return s.default.createElement(S.default,{msg:a,displayAuthor:t,hideMeta:A},s.default.createElement(n.default,{contact:a.senderObj,msg:a.unsafe(),className:(0,i.default)(f.default.container,{[f.default.expired]:y,[f.default.noCaption]:!I})},s.default.createElement("div",{className:f.default.linkPreview},s.default.createElement(m.default,{description:O,invite:!0,isSentByMe:a.isSentByMe,onClick:y?void 0:r,thumbnail:T,title:b,theme:y?"extended":void 0})),M,I,N),P)};var i=r(a(94184)),s=r(a(67294)),l=r(a(28553)),n=r(a(18328)),o=r(a(12196)),d=r(a(33766)),u=r(a(77188)),c=r(a(22048)),f=r(a(38410)),h=r(a(17692)),p=r(a(80162)),m=r(a(29700)),_=r(a(62181)),v=r(a(43395)),g=r(a(85194)),E=a(6578),S=r(a(188)),C=r(a(95607))},17692:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){return i.default.createElement(n.default,{msg:e,displayAuthor:t},i.default.createElement(l.default,{iconName:"unknown",msg:e.unsafe()},s.default.t(545)))};var i=r(a(67294)),s=r(a(80162)),l=r(a(72002)),n=r(a(188))},72572:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZE=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(75444)),o=i(a(16520)),d=i(a(930)),u=i(a(5318)),c=a(42195),f=i(a(23152)),h=i(a(57312)),p=i(a(80896)),m=a(69519),{getGlyphId:_,getGlyphPath:v,markGlyphCached:g,isGlyphCached:E}=u.default,S=c.LARGE_EMOJI_SIZE;t.SIZE=S;var C="large",y="xlarge";class b extends l.Component{constructor(e){super(e),this._handleHighResLoaded=()=>{var e=_(this.props.emoji);null!=e&&g(e),this.setState({highResLoaded:!0})};var t=_(e.emoji),a=Boolean(null!=t&&E(t));this.state={highResLoaded:a}}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>{var e=_(this.props.emoji),t=Boolean(null!=e&&E(e));this.setState({highResLoaded:t})}))}render(){var{emoji:e,size:t,animation:a,element:r,selectable:i}=this.props,{highResLoaded:u}=this.state,c=_(e);if(null==c)return null;var p,g=(0,s.default)({[h.default.medium]:t===S.MEDIUM,[h.default.large]:t===S.LARGE,[h.default.xlarge]:t===S.XLARGE});p=t===S.XLARGE?y:C;var E=v(c,p)[o.default.currentRes];if(u&&a)return l.default.createElement(r,{className:h.default.animation},l.default.createElement(m.SelectableImg,{alt:e,className:(0,s.default)(h.default.highRes,g),draggable:!1,plainText:e,selectable:Boolean(i),src:n.default.ONE_BY_ONE_TRANS_GIF}),l.default.createElement(f.default,{className:(0,s.default)(h.default.highRes,g,h.default.heartbeat),draggable:!1,selectable:!1,src:E}));var b=u?void 0:l.default.createElement(d.default,{key:"low-res",className:(0,s.default)(h.default.lowRes,g),emoji:e,selectable:i}),M=l.default.createElement(d.default,{key:"high-res",className:(0,s.default)(h.default.highRes,g,{[h.default.invisible]:!u}),emoji:e,selectable:i,src:E,onLoad:this._handleHighResLoaded});return l.default.createElement("span",{className:h.default.wrapper},b,M)}}b.defaultProps={animation:!1,element:"div",size:S.MEDIUM},b.displayName="LargeEmoji";var M=(0,p.default)(b);t.default=M},33089:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(74971)),l=r(a(67294)),n=i(a(33766)),o=(i(a(75444)),i(a(7760))),d=a(1886),u=r(a(29700)),c=i(a(72682)),f=i(a(97439)),h=i(a(95607));function p(e){var{msg:t,displayType:a,invite:r,theme:i}=e,p=(0,h.default)(t,["thumbnail","thumbnailHQ","thumbnailDirectPath","thumbnailHeight","thumbnailWidth","title","description","canonicalUrl","matchedText","isSentByMe","star","asUrl"]);(0,l.useEffect)((()=>{var e=p.asUrl;e&&(0,u.hqLinkPreviewSupported)(p)&&!e.thumbnailHQ&&(0,o.default)({msg:e,isPreload:!1})}),[p]);var m=null;if(!r){m=f.default.hostname(p.canonicalUrl||p.matchedText);try{m=s.default.toUnicode(m)}catch(e){}}var _,v,g,E,S,C,y,b=p.getSuspiciousLinks().filter((({url:e})=>p.matchedText===e));return b.length?y=()=>{var e=b[0];n.default.openModal(l.default.createElement(c.default,{link:e}))}:(y=()=>{var e=p.matchedText;(0,d.openExternalLink)(e)},_=p.description,v=p.thumbnail,(0,u.hqLinkPreviewSupported)(p.unsafe())&&(g=p.thumbnailHQ,E=p.thumbnailDirectPath,S=p.thumbnailHeight,C=p.thumbnailWidth)),l.default.createElement(u.default,{canonicalUrl:m,description:_,displayType:a,invite:r,onClick:y,isSentByMe:p.isSentByMe,thumbnailJpeg:v,thumbnailJpegHQ:g,thumbnailJpegDirectPath:E,thumbnailJpegHeight:S,thumbnailJpegWidth:C,title:p.title,star:p.star,theme:i})}var m=(0,l.memo)(p);t.default=m},34759:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayAuthor:t,msg:a}=e,r=a.list,i=(0,n.useContext)(T.default);if(!r)return null;var o={selectable:!0,dirMismatch:a.rtl!==f.default.isRTL(),direction:a.dir,inferLinesDirection:!0},p=(0,d.Conversation)({links:a.getHeaderLinks(),selectable:!0,trusted:a.isTrusted()}),v=(0,d.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),selectable:!0,trusted:a.isTrusted()}),g=(0,d.Conversation)({links:a.getFooterLinks(),selectable:!0,trusted:a.isTrusted()}),E=r.listType===u.ListMessageListType.PRODUCT_LIST?n.default.createElement("div",{className:(0,l.default)(h.default.productListPreview,{[h.default.productListPreviewForwarded]:a.isForwarded})},n.default.createElement(C.default,{msg:a,onClick:e=>{e&&e.stopPropagation(),I(a,i)}})):null,S=r.listType!==u.ListMessageListType.PRODUCT_LIST?n.default.createElement(c.default,(0,s.default)({},o,{className:h.default.title,text:r.title,formatters:p,ellipsify:!0})):null,y=n.default.createElement(c.default,(0,s.default)({},o,{text:r.description,formatters:v})),P=n.default.createElement(c.default,(0,s.default)({},o,{className:h.default.footer,text:a.footer,formatters:g})),A=n.default.createElement("div",{className:h.default.meta},n.default.createElement(_.default,{msg:a})),N=function(e){var{listType:t}=e;if(t===u.ListMessageListType.PRODUCT_LIST)return f.default.t(1350);return e.buttonText}(r),O=n.default.createElement("div",{className:h.default.actionContainer,onClick:e=>{e&&e.stopPropagation(),I(a,i)},role:"button"},n.default.createElement("div",{className:h.default.action,title:N},function(e){var{listType:t}=e;if(t===u.ListMessageListType.PRODUCT_LIST)return null;return n.default.createElement(b.default,{name:"list-msg-icon",className:h.default.icon})}(r),N));return n.default.createElement("div",{className:h.default.bubble},n.default.createElement(M.default,{msg:a,displayAuthor:t,hideMeta:!0},E,S,n.default.createElement(m.default,{msg:a.unsafe(),"data-id":a.id},y,a.footer?P:null,A),O))};var s=i(a(67154)),l=i(a(94184)),n=r(a(67294)),o=i(a(33766)),d=a(79027),u=a(91591),c=i(a(20923)),f=i(a(80162)),h=i(a(28982)),p=i(a(52917)),m=i(a(2175)),_=i(a(62181)),v=i(a(72462)),g=a(38335),E=i(a(68290)),S=i(a(77035)),C=i(a(76841)),y=i(a(24574)),b=i(a(32885)),M=i(a(188)),T=i(a(30892));function I(e,t){var{list:{listType:a}}=e;if(null!=a)switch(a){case u.ListMessageListType.SINGLE_SELECT:o.default.openModal(n.default.createElement(p.default,{msg:e}));break;case u.ListMessageListType.PRODUCT_LIST:!function(e,t){var a=e.isForwarded?e.businessOwnerJid:e.from.toString({legacy:!0});if(null!=e.list.productListInfo&&null!=a){var r=y.default.getOrAdd(e.id,e.list.productListInfo,a,e.list.title);null!=r&&o.default.openDrawerRight(n.default.createElement(S.default,{chat:e.chat,catalogOwnerJid:a,productListId:r.id}),"slide-left",t,(0,g.buildProductCatalogContext)(new E.default,v.default.BIZ_PLATFORM.ENT,v.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE))}}(e,t)}}},60478:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MSG_HEIGHT=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(28745)),o=i(a(18328)),d=i(a(12196)),u=i(a(44386)),c=i(a(33766)),f=i(a(17367)),h=i(a(77188)),p=i(a(80162)),m=i(a(80896)),_=i(a(32361)),v=i(a(53849)),g=i(a(17515)),E=i(a(55634)),S=i(a(62181)),C=a(6463),y=i(a(72765)),b=i(a(32885));t.MSG_HEIGHT=220;class M extends l.Component{constructor(e){super(e),this._openLiveLocationDrawer=()=>{var{chat:e,sender:t}=this.props.msg;c.default.liveLocationDrawer(e,t)},this._openExpiredLocationDrawer=()=>{c.default.expiredLocationDrawer(this.props.msg.unsafe())},this._stopSharing=()=>{var{chat:e}=this.props.msg;c.default.openModal(l.default.createElement(g.default,{chat:e}))},this._handleMapLoad=()=>{this.setState({mapLoaded:!0})},this.state={mapLoaded:!1}}_getExpiration(){var{msg:{t:e,shareDuration:t}}=this.props;return null==t?e:e+t}isExpired(){return u.default.globalUnixTime()>=this._getExpiration()}render(){var{msg:e,trusted:t,displayAuthor:a,quotedMsg:r}=this.props;if(h.default.supportsFeature(h.default.F.LIVE_LOCATIONS)){var i=a?l.default.createElement("div",{className:_.default.author},l.default.createElement(n.default,{msg:e,contact:e.senderObj})):null,c=r?l.default.createElement("div",{className:_.default.quote},r):null,m=this.isExpired(),g=m&&void 0!==e.finalLat&&void 0!==e.finalLng,y=e.lat,M=e.lng,T=m?void 0:this._openLiveLocationDrawer;h.default.supportsFeature(h.default.F.LIVE_LOCATIONS_FINAL)&&(T||(T=this._openExpiredLocationDrawer),g&&(y=e.finalLat,M=e.finalLng));var I,P,A,N,O=l.default.createElement("div",{className:_.default.thumb,onClick:T,style:{height:150}},l.default.createElement("div",{className:_.default.map},l.default.createElement(E.default,{lat:y,lng:M,width:270,height:150,className:_.default.thumbBody,linkify:!1,showMarker:!1,onLoad:this._handleMapLoad})),l.default.createElement("div",{className:(0,s.default)(_.default.avatar,{[_.default.hidden]:!this.state.mapLoaded})},l.default.createElement(f.default,{id:e.sender,size:40,border:!0})),l.default.createElement("div",{className:_.default.overlay})),D=this._getExpiration(),w=m?p.default.t(1010):p.default.t(1016,{time:u.default.timestampStr(D),_plural:u.default.timestampHour(D)}),R=l.default.createElement("div",{className:_.default.status,onClick:T},l.default.createElement("span",{className:_.default.statusIcon},l.default.createElement(b.default,{name:(0,C.liveLocationIcon)(!m),display:"inline"})),l.default.createElement("span",{className:_.default.statusText},w)),k=e.comment?l.default.createElement("div",{className:_.default.caption},l.default.createElement(d.default,{msg:e.unsafe(),trusted:t})):null,L=l.default.createElement("div",{className:_.default.meta},l.default.createElement(S.default,{msg:e}));if(!m)e.isSentByMe?(P=this._stopSharing,A=_.default.stopLocation,N=p.default.t(1033)):(P=this._openLiveLocationDrawer,A=_.default.viewLocation,N=p.default.t(1040)),I=l.default.createElement("div",{className:_.default.actionButton,onClick:P},l.default.createElement("span",{className:A},N));return l.default.createElement("div",{className:(0,s.default)({[_.default.expired]:m,[_.default.hasCaption]:!!e.comment})},l.default.createElement(o.default,{className:(0,s.default)(_.default.container,{[_.default.clickable]:!!T}),contact:e.senderObj,msg:e.unsafe()},i,c,O,R,k,L),I)}return l.default.createElement(v.default,{msg:e,displayAuthor:a,quotedMsg:r})}}M.CONCERNS={msg:["chat","comment","dir","finalLat","finalLng","isGroupMsg","isPSA","isSentByMe","lat","lng","rtl","sender","senderObj","shareDuration","t"]},M.displayName="LiveLocation";var T=(0,m.default)((0,y.default)(M,M.CONCERNS));t.default=T},53849:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=a(79027),n=r(a(20923)),o=r(a(80162)),d=r(a(327)),u=r(a(2175)),c=r(a(72002)),f=a(86146),h=a(6463),p=r(a(188)),m=e=>{var t,{msg:a}=e,r=(0,l.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),selectable:!0,trusted:a.isTrusted()}),m=a.comment?s.default.createElement(u.default,{msg:a.unsafe()},s.default.createElement(n.default,{text:a.comment,formatters:r,selectable:!0,dirMismatch:a.rtl!==o.default.isRTL(),direction:a.dir})):null;if(e.quotedMsg){var _=(0,i.default)(d.default.quote,{[d.default.hasAuthor]:e.displayAuthor,[d.default.forwarded]:(0,f.showForwarded)(a)});t=s.default.createElement("div",{className:_},e.quotedMsg)}return s.default.createElement(p.default,{msg:a,displayAuthor:e.displayAuthor},t,s.default.createElement("div",{className:m?d.default.hasText:d.default.noText},s.default.createElement(c.default,{hasCaption:!!m,iconName:(0,h.liveLocationIcon)(!1),msg:e.msg.unsafe(),theme:"small-icon"},o.default.t(546))),m)};t.default=m},81957:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r=(0,y.default)(e.msg,["caption","clientUrl","dir","footer","id","isGroupMsg","isSentByMe","lat","lng","rtl","senderObj","type","ctwaContext","supportsMessageFooter","isDynamicReplyButtonsMsg","hasBodyOrFooter"]),M=()=>{var e=r.get("loc");if(r.get("loc"))return 2===(e=e.split("\n")).length?{name:e[0],addr:e[1]}:{name:e}},T=M(),I=T&&T.name,P=r,{lat:A,lng:N}=P,O=(0,p.getMapUrl)(A,N,I),D=P.isDynamicReplyButtonsMsg?null:(e=>{var t,a,n,o=M(),d=r.clientUrl||e,u=C.default.hostname(d),c=(0,i.default)(b.filter((e=>u.includes(e)))),h=c?l.default.createElement("span",{className:f.default.link},u):null,p=C.default.isHttps(d);if(!p)return d.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)`Bad url: ${d}`,SEND_LOGS("URL error")),null;if(!c&&p&&o&&!d.includes("javascript")){t=o.name?l.default.createElement(g.SelectableLink,{className:f.default.title,dir:"auto",href:d,plainText:`${o.name}\n${d}`,selectable:!0,target:"_blank",title:o.name},o.name):null;var _=(0,s.default)(f.default.address,{[f.default.hasURL]:h});a=(null==T?void 0:T.addr)?l.default.createElement(g.SelectableDiv,{className:_,selectable:!0,title:T.addr},T.addr):null}return(t||a||h)&&(n=l.default.createElement("div",{className:f.default.text},l.default.createElement(m.default,{msg:r.unsafe(),"data-id":r.id},t,a,h))),n})(O),w=null!=D||P.supportsMessageFooter&&P.hasBodyOrFooter?null:l.default.createElement(S.default,null),R=(0,v.showForwarded)(P),k=e.displayAuthor?l.default.createElement("div",{className:f.default.author},l.default.createElement(n.default,{msg:P,contact:P.senderObj})):null,L=R?l.default.createElement(c.default,{msg:P.unsafe(),className:f.default.forwardedIndicator}):null,x=(0,s.default)(f.default.container,{[f.default.hasCaption]:D,[f.default.hasAuthor]:e.displayAuthor,[f.default.forwarded]:R,[f.default.ctwaContainerWidth]:null!=P.ctwaContext}),F=e.quotedMsg?l.default.createElement("div",{className:f.default.quote},e.quotedMsg):null;P.supportsMessageFooter&&(t=P.caption?l.default.createElement("div",{className:f.default.caption},l.default.createElement(d.default,{msg:P.unsafe(),spacer:!P.footer,trusted:e.trusted})):null,a=l.default.createElement(E.default,{dir:P.dir,footer:P.footer,isShown:P.supportsMessageFooter,msg:P.unsafe(),rtl:P.rtl,type:P.type,trusted:e.trusted}));return l.default.createElement("div",null,l.default.createElement(o.default,{className:x,contact:P.senderObj,msg:P.unsafe()},k,L,F,l.default.createElement(u.default,{msg:P.unsafe(),wrapperClass:f.default.ctwaContext}),l.default.createElement(g.SelectableDiv,{className:f.default.thumb,onClick:e=>{e.stopPropagation()},plainText:O,selectable:!0,style:{height:150}},l.default.createElement(h.default,{lat:P.lat,lng:P.lng,width:P.ctwaContext?330:270,height:150,name:I,className:f.default.thumbBody}),w),D,t,a,l.default.createElement("div",{className:f.default.meta},l.default.createElement(_.default,{msg:P}))))},t.PREVIEW_HEIGHT=void 0;var i=r(a(41609)),s=r(a(94184)),l=r(a(67294)),n=r(a(28745)),o=r(a(18328)),d=r(a(12196)),u=r(a(49218)),c=r(a(43369)),f=r(a(68437)),h=r(a(55634)),p=a(50560),m=r(a(2175)),_=r(a(62181)),v=a(86146),g=a(69519),E=r(a(30760)),S=r(a(72304)),C=r(a(97439)),y=r(a(95607));t.PREVIEW_HEIGHT=150;var b=["foursquare.com","facebook.com","maps.google.com"]},49922:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,c.showForwarded)(e.msg),a=e.displayAuthor?s.default.createElement("div",{className:d.default.author},s.default.createElement(l.default,{msg:e.msg,contact:e.msg.senderObj})):null,r=e.displayType===n.default.DISP_TYPE.GALLERY||e.hideMeta?null:s.default.createElement("div",{className:d.default.meta},s.default.createElement(u.default,{msg:e.msg})),f=t?s.default.createElement(o.default,{msg:e.msg.unsafe(),className:d.default.forwardedIndicator}):null,h=e.quotedMsg?s.default.createElement("div",{className:d.default.quote},e.quotedMsg):null,p=(0,i.default)(d.default.bubble,{[d.default.forwarded]:t,[d.default.hasAuthor]:e.displayAuthor,[d.default.hasCaption]:e.hasCaption,[d.default.isPSA]:e.msg.isPSA});return s.default.createElement("div",{className:p},a,f,h,e.children,r)};var i=r(a(94184)),s=r(a(67294)),l=r(a(28745)),n=r(a(75444)),o=r(a(43369)),d=r(a(7017)),u=r(a(62181)),c=a(86146)},43905:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isMediaTypeWithImage=d,t.default=function(e){var t=(0,o.default)(e.mediaData,["filehash","fullPreviewData","mediaStage","preview","type"]),a=()=>{var e,a,r,s,l=[],n=null===(e=t.preview)||void 0===e||null===(a=e.url)||void 0===a?void 0:a.call(e);n&&l.push(i.default.createElement(u,{url:n,key:"preview"}));var o=null===(r=t.fullPreviewData)||void 0===r||null===(s=r.url)||void 0===s?void 0:s.call(r);return o&&l.push(i.default.createElement(u,{url:o,key:"fullPreview"})),l.length?l:null};if(!d(t.type))return a();return i.default.createElement(n.default,{key:t.filehash,mediaData:t,placeholderRenderer:a,renderProgressively:!0},(e=>i.default.createElement(u,{url:e})))};var i=r(a(67294)),s=r(a(75444)),l=r(a(11287)),n=r(a(89958)),o=r(a(95607));function d(e){return e===s.default.MSG_TYPE.IMAGE||e===s.default.MSG_TYPE.PRODUCT}function u({url:e}){return i.default.createElement("div",{className:l.default.preview,style:{backgroundImage:`url(${e})`}})}},27632:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBase64=i,t.convertToDataURI=function(e){return`data:image/jpeg;base64,${i(e)}`};var r=a(26080);function i(e){return btoa(String.fromCharCode.apply(null,r.Binary.build(e).readByteArray()))}},31127:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(51258)),d=i(a(75444)),u=a(91591),c=a(1697),f=i(a(80162)),h=a(29700),p=i(a(30532)),m=a(86146),_=i(a(72765)),v=a(6578),g=i(a(32885)),E=i(a(7170)),S=a(69754),C=a(24102);class y extends l.PureComponent{constructor(...e){super(...e),this.setRefContext=e=>this.refContext=e,this.handleClick=e=>{this.props.onToggle(e.target)},this.handleMouseDown=e=>{e.stopPropagation()}}render(){var e,t,a,{msg:r,isGroupedSticker:i,hasAuthor:_}=this.props,{isSentByMe:E,type:y}=r,b=!!r.quotedMsg,M=!r.quotedMsg&&r.quotedRemoteJid,T=(0,m.showForwarded)(r),I=M?null:E?p.default.contextOut:p.default.contextIn,P=y===d.default.MSG_TYPE.DOCUMENT&&!r.body,A=y===d.default.MSG_TYPE.DOCUMENT&&r.body,N=y===d.default.MSG_TYPE.LOCATION,O=r.linkPreview&&(0,c.isParsableOnlineVideoURL)(r.richPreviewType,r.matchedText,r.doNotPlayInline),D=y===d.default.MSG_TYPE.LIST&&(null===(e=r.list)||void 0===e?void 0:e.listType)===u.ListMessageListType.PRODUCT_LIST,w=A||N||b||D||y===d.default.MSG_TYPE.PAYMENT||O||y===d.default.MSG_TYPE.PRODUCT||r.ctwaContext||r.isMedia&&!r.isViewOnce&&y!==d.default.MSG_TYPE.AUDIO||r.isViewOnce&&!E&&!(0,S.isViewed)(r.safe()),R=r.getSuspiciousLinks().length>0,k=y===d.default.MSG_TYPE.CHAT&&r.linkPreview&&!O&&!_&&!T&&!R&&r.isTrusted(),L=(0,h.displayHighQualityLinkPreview)((0,v.unproxy)(r.unsafe())),x=w&&!_&&!R&&!T||k&&L,F=(0,s.default)(x?p.default.contextIconMedia:p.default.contextIcon),B=y===d.default.MSG_TYPE.PTT||y===d.default.MSG_TYPE.AUDIO,G=r.type===d.default.MSG_TYPE.MULTI_VCARD&&!b&&!_&&!T,U=y===d.default.MSG_TYPE.GROUPS_V4_INVITE,j=y===d.default.MSG_TYPE.ORDER,V=(k&&!L||P||U||j)&&!_&&!T&&!b,H=y===d.default.MSG_TYPE.STICKER&&!r.ctwaContext&&!b&&(i||!r.isGroupMsg||r.isGroupMsg&&r.isSentByMe);if(H){var W=o.default.get("defaultPreference"),Y=W?W.wallpaperColor:d.default.DEFAULT_CHAT_WALLPAPER;a=l.default.createElement("div",{className:p.default.badge,style:{backgroundColor:Y,opacity:.9}}),t=(0,C.invertTransparentWallpaperColors)(this.context.theme,Y)}var K=!(y!==d.default.MSG_TYPE.CHAT||b||_||T||O||!r.dir||r.rtl===f.default.isRTL()),q=(y===d.default.MSG_TYPE.PTT||y===d.default.MSG_TYPE.AUDIO)&&f.default.isRTL()&&!_,z=(0,s.default)(I,x?f.default.isRTL()?p.default.contextMediaRtl:p.default.contextMediaLtr:null,{[p.default.context]:!(x||k)||V,[p.default.contextMedia]:x,[p.default.contextPtt]:B,[p.default.contextPttFix]:B&&!b&&!_,[p.default.contextSpecial]:V,[p.default.contextDoc]:P&&!_&&!T&&!b,[p.default.contextMediaDocument]:A,[p.default.contextMultiVcard]:G,[p.default.contextInverse]:K||q,[p.default.contextStickerAuthor]:y===d.default.MSG_TYPE.STICKER&&!H,[p.default.contextStickerTransparent]:H,[p.default.contextStickerInverse]:H&&t});return l.default.createElement("div",{className:z},l.default.createElement("div",{"data-a8n":n.default.key("icon-down-context"),"data-js-context-icon":!0,className:F,ref:this.setRefContext,onMouseDown:this.handleMouseDown,onClick:this.handleClick},l.default.createElement(g.default,{name:"down-context"})),a)}}y.contextType=E.default,y.CONCERNS={msg:["ack","linkPreview","matchedText","dir","rtl","isMedia","isSentByMe","isGroupMsg","isViewOnce","type","quotedMsg","body","quotedRemoteJid","richPreviewType","doNotPlayInline","ctwaContext","list","thumbnailDirectPath","thumbnailHeight","thumbnailWidth","text"]},y.displayName="Menu";var b=(0,_.default)(y,y.CONCERNS);t.default=b},33302:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e,displayType:t,hideCaption:a=!1,hideMeta:r=!1,msg:m,quotedMsg:_,showAuthor:v=!1,trusted:g}){var{caption:E,dir:S,footer:C,isSentByMe:y,isGroupMsg:b,rtl:M,senderObj:T,supportsMessageFooter:I,type:P}=(0,p.default)(m,["caption","dir","footer","isFromTemplate","isSentByMe","isGroupMsg","rtl","senderObj","supportsMessageFooter","type"]),A=v&&!y&&b,N=!a&&E,O=(0,f.showForwarded)(m);return s.default.createElement(s.default.Fragment,null,A?s.default.createElement("div",{className:(0,i.default)(u.default.author,{[u.default.hasForwarded]:O})},s.default.createElement(l.default,{msg:m,contact:T})):null,O?s.default.createElement(d.default,{msg:m.unsafe(),className:(0,i.default)(u.default.forwardedIndicator,{[u.default.hasAuthor]:A})}):null,null!=_?s.default.createElement("div",{className:u.default.quote},_):null,e,N?s.default.createElement("div",{className:u.default.caption},s.default.createElement(n.default,{msg:m.unsafe(),trusted:g,spacer:!C})):null,I?s.default.createElement(h.default,{dir:S,footer:C,isShown:I,msg:m.unsafe(),rtl:M,type:P,trusted:g}):null,!r&&s.default.createElement("div",{className:(0,i.default)(u.default.meta,{[u.default.hasCaption]:N})},s.default.createElement(c.default,{msg:m,theme:t===o.default.DISP_TYPE.GALLERY?"date":void 0})))};var i=r(a(94184)),s=r(a(67294)),l=r(a(28745)),n=r(a(12196)),o=r(a(75444)),d=r(a(43369)),u=r(a(25410)),c=r(a(62181)),f=a(86146),h=r(a(30760)),p=r(a(95607))},53348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgPosition=void 0;t.MsgPosition={FRONT:"FRONT",MID:"MID",END:"END",SINGLE:"SINGLE"}},2175:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{broadcast:a,isFromTemplate:r,isSentByMe:u,labels:c,star:f,type:h}=(0,d.default)(e.msg,["broadcast","isFromTemplate","isSentByMe","labels","star","type"]),p={},m=null===(t=e.spacer)||void 0===t||t;if(m){var _;switch(h){case l.default.MSG_TYPE.REVOKED:_=[a,c&&c.length&&(0,n.canDisplayLabel)()];break;default:_=[a,u,c&&c.length&&(0,n.canDisplayLabel)(),f]}var v=_.filter(Boolean).length;v>0&&(p={[o.default.icons1]:1===v,[o.default.icons2]:2===v,[o.default.icons3]:3===v,[o.default.icons4]:v>=4})}return s.default.createElement("div",{className:(0,i.default)(e.className,{[o.default.text]:!0,[o.default.placeholder]:"placeholder"===e.theme,[o.default.template]:r})},e.children,m&&s.default.createElement("span",{className:(0,i.default)(o.default.spacer,p)}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(75444)),n=a(34605),o=r(a(5511)),d=r(a(95607))},62181:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,theme:t}){var{broadcast:a,caption:r,isLive:i,asRevoked:s,isMdHistoryMsg:d,isSentByMe:f,isViewOnce:_,labels:y,loc:b,star:M,t:T,type:I,subtype:P,isSendFailure:A}=(0,g.default)(e.unsafe(),["broadcast","caption","isLive","asRevoked","isMdHistoryMsg","isSentByMe","isViewOnce","labels","loc","star","t","type","subtype","isSendFailure"]),[N,O]=(0,l.useState)(!1);(0,v.useListener)(n.default,n.HOUR24_FORMAT_CHANGE_EVENT,(()=>{O(!N)}));var D=[],w=(I===S.IMAGE||I===S.VIDEO)&&!r&&!_||I===S.LOCATION&&!i&&!b;M&&!s&&D.push(l.default.createElement(m.default,{name:"star","aria-label":` ${u.default.t(36)} `}));a&&D.push(l.default.createElement(m.default,{name:"broadcast"}));var R=f&&I!==S.REVOKED,k=null;R&&(k=l.default.createElement(p.default,{msg:e.unsafe()}));E.default.supportsFeature(E.default.F.MD_BACKEND)&&("fanout"===P||A)&&(k=null);var L=y&&y.length>0?l.default.createElement(c.default,{labels:y,showName:!1}):null;return l.default.createElement(C,{icons:D,labels:L,light:w,onClick:R&&!d?()=>{o.default.msgInfoDrawer((0,h.unproxy)(e.unsafe()))}:null,status:k},"date"!==t?T?n.default.timestampStr(T):null:T?n.default.relativeStr(T):null)},t.MetaFrame=C;var s=i(a(94184)),l=r(a(67294)),n=r(a(44386)),o=i(a(33766)),d=i(a(75444)),u=i(a(80162)),c=i(a(64190)),f=i(a(47297)),h=a(6578),p=i(a(66616)),m=i(a(32885)),_=i(a(89848)),v=a(54890),g=i(a(95607)),E=i(a(77188)),S=d.default.MSG_TYPE;function C(e){var t=e.icons&&e.icons.length>0?e.icons.map(((e,t)=>l.default.createElement("div",{className:f.default.icon,key:`icon-${t}`},e))):null,a=e.labels?l.default.createElement("div",{className:f.default.labels},e.labels):null,r=e.status?l.default.createElement("div",{className:f.default.status},e.status):null,i=(0,s.default)(f.default.meta,{[f.default.metaLight]:e.light,[f.default.chromeFix]:_.default.os===d.default.OS_TYPE.MAC&&_.default.browser===d.default.BROWSER_TYPE.CHROME&&_.default.osVersion.includes("10.15")});return l.default.createElement("div",{className:i,onClick:e.onClick,role:e.onClick?"button":null},t,a,l.default.createElement("span",{className:f.default.timestamp,dir:"auto"},e.children),r)}},54562:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(n.default.container,{[n.default.isChecked]:e.checked,[n.default.gallery]:"gallery"===e.msgTheme});return s.default.createElement("div",{className:t,onClick:e.onClick},s.default.createElement(l.default,{onChange:e.onClick,checked:e.checked,theme:e.theme}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(20451)),n=r(a(22981))},46399:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgComponent=void 0;var s=i(a(81109)),l=r(a(67294)),n=i(a(80570)),o=i(a(93807)),d=i(a(75444)),u=i(a(23840)),c=i(a(39377)),f=i(a(20745)),h=i(a(34759)),p=i(a(60478)),m=i(a(81957)),_=i(a(47826)),v=a(75431),g=i(a(84950)),E=i(a(17373)),S=i(a(14039)),C=i(a(87328)),y=i(a(46789)),b=i(a(20158)),M=i(a(25823)),T=i(a(33925)),I=i(a(58667)),P=i(a(49775)),A=i(a(81437)),N=i(a(72765)),O=a(6578),D=i(a(83243)),w=i(a(8247)),R=i(a(38196)),k=i(a(56801)),L=i(a(41169)),x=a(54865),F=i(a(78992)),B=i(a(5917));class G extends l.PureComponent{constructor(...e){super(...e),this.ref=(0,l.createRef)(),this._getParsedVcardList=(0,_.default)((({vcardList:e})=>e?e.map((e=>(0,s.default)((0,s.default)({},e),{},{parsedVcard:(0,x.parseVcard)(e.vcard)}))):[]))}getQuotedMsg(){var e,{displayType:t,msg:a,chat:r}=this.props;if(t!==d.default.DISP_TYPE.GALLERY){var i=a.quotedMsgObj();if(i)e=l.default.createElement(I.default,{msg:i,key:i.id.toString(),rootMsg:(0,O.unproxy)(a.safe()),displayType:t,theme:"conversation",chat:(0,O.unproxy)(r),t:a.t});else{var s=a.getQuotedMsgAdminGroupJid();s&&(e=l.default.createElement(P.default,{quotedGroupJid:s}))}}return e}getRef(){return this.ref.current}render(){var{chat:e,displayAuthor:t,displayType:a,isMsgVisible:r,msg:i}=this.props,s=i.safe();if(null!=s.asViewOnce){var _=s.asViewOnce;return l.default.createElement(B.default,{displayType:a,displayAuthor:t,mediaData:_.mediaData,msg:_,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:i.isTrusted()})}switch(s.type){case d.default.MSG_TYPE.CHAT:case d.default.MSG_TYPE.LIST_RESPONSE:case d.default.MSG_TYPE.BUTTONS_RESPONSE:return l.default.createElement(w.default,{msg:(0,O.unproxy)(s),contact:s.senderObj,quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayType:a,displayAuthor:t});case d.default.MSG_TYPE.IMAGE:return l.default.createElement(b.default,{msg:s,displayType:a,mediaData:s.mediaData,ref:this.ref,quotedMsg:this.getQuotedMsg(),isMsgVisible:r,trusted:s.isTrusted(),displayAuthor:t});case d.default.MSG_TYPE.PRODUCT:return l.default.createElement(M.default,{msg:s,mediaData:s.mediaData,displayAuthor:t,trusted:s.isTrusted(),onProductClick:this.props.onProductClick,quotedMsg:this.getQuotedMsg()});case d.default.MSG_TYPE.GROUP_NOTIFICATION:case d.default.MSG_TYPE.GP2:case d.default.MSG_TYPE.BROADCAST_NOTIFICATION:case d.default.MSG_TYPE.NOTIFICATION:case d.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case d.default.MSG_TYPE.E2E_NOTIFICATION:case d.default.MSG_TYPE.CALL_LOG:return l.default.createElement(E.default,{contact:(0,O.unproxy)(e).contact,msg:s,ref:this.ref});case d.default.MSG_TYPE.AUDIO:return l.default.createElement(n.default,{msg:s,mediaData:s.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:this.ref});case d.default.MSG_TYPE.VIDEO:return!0===s.isGif?l.default.createElement(c.default,{displayAuthor:t,displayType:a,isMsgVisible:r,maxWidth:this.props.maxWidth,mediaData:s.mediaData,msg:s,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:s.isTrusted()}):l.default.createElement(F.default,{displayAuthor:t,displayType:a,hover:this.props.hover,isMsgVisible:r,mediaData:s.mediaData,msg:s,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:s.isTrusted()});case d.default.MSG_TYPE.VCARD:return l.default.createElement(k.default,{msg:s,vcard:s.vcard,ref:this.ref,quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:this.props.onMessageClick});case d.default.MSG_TYPE.MULTI_VCARD:return l.default.createElement(g.default,{msg:s,vcardList:this._getParsedVcardList({vcardList:this.props.msg.vcardList}),ref:this.ref,quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t});case d.default.MSG_TYPE.GROUPS_V4_INVITE:return l.default.createElement(f.default,{msg:s,ref:this.ref,displayAuthor:t});case d.default.MSG_TYPE.LOCATION:return!0===s.isLive?l.default.createElement(p.default,{msg:(0,O.unproxy)(s),ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayAuthor:t}):l.default.createElement(m.default,{msg:(0,O.unproxy)(s),ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayAuthor:t});case d.default.MSG_TYPE.PAYMENT:return l.default.createElement(y.default,{msg:s,ref:this.ref,quotedMsg:this.getQuotedMsg(),displayAuthor:t});case d.default.MSG_TYPE.PTT:return l.default.createElement(T.default,{msg:s,mediaData:s.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:this.ref,getSequentialMsg:this.props.getSequentialMsg});case d.default.MSG_TYPE.STICKER:return l.default.createElement(D.default,{msg:s,mediaData:s.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,position:this.props.position,forwardRef:this.props.forwardStickerRef,animateOnView:!0});case d.default.MSG_TYPE.DOCUMENT:return i.isVcardOverMmsDocument?l.default.createElement(L.default,{chat:e,msg:s,mediaData:i.mediaData,displayAuthor:t,displayType:a,getQuotedMsg:()=>this.getQuotedMsg(),onMessageClick:this.props.onMessageClick}):l.default.createElement(u.default,{msg:s,displayType:a,mediaData:s.mediaData,ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayAuthor:t});case d.default.MSG_TYPE.UNKNOWN:return l.default.createElement(R.default,{msg:(0,O.unproxy)(s),displayAuthor:t,hideUpdateButton:"phone_only_feature"===s.subtype});case d.default.MSG_TYPE.CIPHERTEXT:return l.default.createElement(o.default,{msg:s,ref:this.ref,displayAuthor:t});case d.default.MSG_TYPE.REVOKED:return this.ref.current=null,l.default.createElement(A.default,{msg:(0,O.unproxy)(s)});case d.default.MSG_TYPE.OVERSIZED:return l.default.createElement(C.default,{msg:(0,O.unproxy)(s),displayAuthor:t});case d.default.MSG_TYPE.HSM:case d.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:return l.default.createElement(w.default,{msg:(0,O.unproxy)(s),contact:s.senderObj,ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted(),displayType:a,displayAuthor:t});case d.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===i.subtype?l.default.createElement(E.default,{contact:(0,O.unproxy)(e).contact,msg:s,ref:this.ref}):l.default.createElement(R.default,{msg:(0,O.unproxy)(s),ref:this.ref,displayAuthor:t});case d.default.MSG_TYPE.ORDER:return l.default.createElement(S.default,{displayAuthor:t,msg:(0,O.unproxy)(s)});case d.default.MSG_TYPE.LIST:if((0,v.listMsgCanRender)(s))return l.default.createElement(h.default,{msg:(0,O.unproxy)(s),displayAuthor:t});break;case d.default.MSG_TYPE.INTERACTIVE:return l.default.createElement(R.default,{msg:(0,O.unproxy)(s),displayAuthor:t})}return __LOG__(2)`messageList:render Unknown message type: ${i.type}`,l.default.createElement(R.default,{msg:(0,O.unproxy)(s),ref:this.ref,displayAuthor:t})}}t.MsgComponent=G,G.CONCERNS={msg:["body","caption","rtl","dir","isSentByMe","isPSA","isViewOnce","ctwaContext","initialPageSize","hasTemplateButtons","thumbnail","orderTitle","totalAmount1000","totalCurrencyCode","itemCount","isGif","isLive","isVcardOverMmsDocument","mediaData","nativeFlowName","senderObj","subtype","type","t","id","title","isFromTemplate","vcard","vcardList"],chat:["trusted"]},G.displayName="MsgComponent";var U=(0,N.default)(G,G.CONCERNS);t.default=class extends U{getRef(){return this.getComponent().getRef()}}},72002:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(2175)),n=r(a(70813)),o=r(a(32885)),d=e=>{var t=e.hasCaption?e.children:s.default.createElement("div",{className:n.default.text},s.default.createElement(l.default,{msg:e.msg,theme:"placeholder"},e.children)),a=e.iconName?s.default.createElement("div",{className:n.default.icon},s.default.createElement(o.default,{name:e.iconName})):null;return s.default.createElement("div",{className:(0,i.default)(n.default.container,{[n.default.containerSmallIcon]:"small-icon"===e.theme})},a,t)};t.default=d},18456:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{currentTime:t,duration:a,onSeekEnd:r,outgoing:i,waveform:d}=e,u=(0,s.useContext)(l.default),c=(0,s.useCallback)((()=>null!=t?t:0),[t]),f=(0,s.useCallback)((()=>[...d].map((e=>e/100))),[d]),h=(0,s.useCallback)((()=>a),[a]);return s.default.createElement("div",{className:"jkzvzns8 fwy6kijg"},s.default.createElement(n.default,{theme:o(u.theme,i),sampleRate:6,getSamples:f,getCurrentTime:c,getDuration:h,live:!1,mode:n.WaveformMode.PREVIEW,onSeekEnd:r}))},a(6408);var s=i(a(67294)),l=(r(a(56720)),r(a(7170))),n=i(a(2908));function o(e,t){var a="dark"===e;return t?a?n.WaveformTheme.CONVERSATION_OUTGOING_DARK:n.WaveformTheme.CONVERSATION_OUTGOING_LIGHT:a?n.WaveformTheme.CONVERSATION_INCOMING_DARK:n.WaveformTheme.CONVERSATION_INCOMING_LIGHT}},66363:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({emojis:e,animation:t}){var a,r=e?e.length:0;if(0===r)return null;switch(r){default:case 3:a=l.SIZE.MEDIUM;break;case 2:a=l.SIZE.LARGE;break;case 1:a=l.SIZE.XLARGE}var i=e.map(((e,r)=>s.default.createElement(l.default,{animation:t,size:a,emoji:e,key:e+r,selectable:!0})));return s.default.createElement(o.SelectableDiv,{selectable:!0,className:n.default.wrapper},i)};var s=i(a(67294)),l=r(a(72572)),n=i(a(92957)),o=a(69519)},84950:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(9019),n=r(a(67294)),o=i(a(28745)),d=i(a(28553)),u=i(a(33766)),c=i(a(75444)),f=i(a(20923)),h=i(a(80162)),p=i(a(47826)),m=i(a(62181)),_=i(a(91948)),v=i(a(65691)),g=i(a(43395)),E=i(a(44563)),S=i(a(72765)),C=a(54865);class y extends n.PureComponent{constructor(e){super(e),this._getUnsortedVcardDisplayDataMemo=(0,p.default)((({vcardList:e})=>e.map((({displayName:e,parsedVcard:t})=>({displayName:e,wids:(0,C.vcardWids)(t),thumbnail:(0,C.vcardThumbnail)(t)}))))),this._showContactsModal=()=>{var{vcardList:e}=this.props;if(e){var t=e.map((e=>e.parsedVcard));u.default.openModal(n.default.createElement(v.default,{vcards:t}))}},this.state={loading:!0,sortedVcardData:null,vcardList:e.vcardList}}componentDidMount(){this._loadProfilePics()}static getDerivedStateFromProps(e,t){return t.vcardList!==e.vcardList?{loading:!0,sortedVcardData:null,vcardList:e.vcardList}:null}componentDidUpdate(e){e.vcardList!==this.props.vcardList&&this._loadProfilePics()}_getUnsortedVcardDisplayData(){return this._getUnsortedVcardDisplayDataMemo({vcardList:this.props.vcardList})}_loadProfilePics(){var e=this.props.vcardList,t=this._getUnsortedVcardDisplayData(),a=[].concat(...t.map((({wids:e})=>e))).slice(0,10);Promise.all(a.map((e=>E.default.find(e)))).then((()=>(0,l.delayMs)(0))).then((()=>{var a;this.props.vcardList===e&&this.setState({loading:!1,sortedVcardData:(a=t,[...a].sort(((e,t)=>{var a=M(e),r=M(t);return a&&!r?-1:!a&&r?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})))})}))}_renderProfilePics(e){for(var t=Math.min(e.length,3),a=[],r=0;r<t;r++){var{wids:i,thumbnail:s}=e[r],l=E.default.findThumbnailWid(i);this.state.loading||!l&&!s?a.push(n.default.createElement("div",{className:_.default.image,key:`default-pic-${r}`},n.default.createElement(g.default,{size:39,border:!0}))):a.push(n.default.createElement("div",{className:_.default.image,key:`profile-pic-${r}`},n.default.createElement(g.default,{wid:l,thumb:s,size:39,border:!0})))}return a}render(){var{msg:e}=this.props,t=this.props.displayAuthor?n.default.createElement("div",{className:_.default.author},n.default.createElement(o.default,{msg:e,contact:e.senderObj})):null,a=this.state.sortedVcardData||this._getUnsortedVcardDisplayData(),r=a.map((({displayName:e})=>e)),i=(0,C.getNameStringFromNames)(r),l=this._renderProfilePics(a),u=this.props.vcardList||e.chat.isTrusted(),p=this.props.quotedMsg?n.default.createElement("div",{className:_.default.quote},this.props.quotedMsg):null,v=(0,s.default)(_.default.bubble,{[_.default.hasAuthor]:t,[_.default.hasQuote]:p,[_.default.isPreview]:this.props.displayType===c.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:this.props.displayType===c.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===c.default.DISP_TYPE.GALLERY});return n.default.createElement("div",{className:v},t,p,n.default.createElement("div",{className:_.default.vcard,role:u?"button":null,title:i,onClick:this._showContactsModal},n.default.createElement("div",{className:_.default.avatar},l),n.default.createElement("div",{className:_.default.body},n.default.createElement(f.default,{text:i,element:"div",className:_.default.name,dirMismatch:e.rtl!==h.default.isRTL(),direction:e.dir,wbr:15})),n.default.createElement("div",{className:_.default.meta},n.default.createElement(m.default,{msg:e}))),n.default.createElement(d.default,{items:[{label:h.default.t(1170),onClick:this._showContactsModal}]}))}}y.CONCERNS={msg:["rtl","dir","senderObj","isSentByMe","isGroupMsg","chat"]},y.displayName="MultiVcard";var b=(0,S.default)(y,y.CONCERNS);function M(e){return Boolean(E.default.findThumbnailWid(e.wids)||e.thumbnail)}t.default=b},17373:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(98969)),n=a(81578),o=r(a(74798)),d=r(a(33766)),u=r(a(75444)),c=r(a(62899)),f=r(a(40116)),h=r(a(20923)),p=r(a(66265)),m=r(a(91893)),_=r(a(629)),v=r(a(31172)),g=r(a(76749)),E=r(a(30795)),S=r(a(80162)),C=r(a(63780)),y=r(a(25404)),b=r(a(55766)),M=r(a(72765)),T=a(6578),I=r(a(32885)),P=r(a(53680)),A=r(a(8745)),N=a(52152);class O extends s.PureComponent{constructor(...e){super(...e),this._ref=(0,s.createRef)()}handleKeyActivation(){var e;null===(e=this._ref.current)||void 0===e||e.click()}render(){var e,t,a,r,i,M,O=this.props.msg;switch(O.type){case u.default.MSG_TYPE.NOTIFICATION:t=O.body;break;case u.default.MSG_TYPE.GP2:case u.default.MSG_TYPE.GROUP_NOTIFICATION:return s.default.createElement(E.default,{msg:O,clickable:!0});case u.default.MSG_TYPE.BROADCAST_NOTIFICATION:return s.default.createElement(l.default,{msg:O,clickable:!0});case u.default.MSG_TYPE.E2E_NOTIFICATION:var D=(0,T.unproxy)(O);t=(0,m.default)(D);var R=O.subtype,k=O.body?(0,N.createWid)(O.body):null,L=O.id.remote;r=()=>{!function(e,t,a,r){"e2e_identity_unavailable"!==e&&d.default.openModal(s.default.createElement(f.default,{e2eSubtype:e,jid:t,chatId:a,msg:r}))}(R,k,L,O)},e=function(e){if(e.chat.isSupportGroup())return s.default.createElement("div",{className:C.default.iconSupportGroup},s.default.createElement(I.default,{name:"info-filled"}));if("encrypt"===e.subtype||"encrypt_now"===e.subtype)return s.default.createElement("div",{className:C.default.iconE2E},s.default.createElement(I.default,{name:"lock-small"}))}(D);break;case u.default.MSG_TYPE.CALL_LOG:var x="miss_video"===O.subtype||"miss_group_video"===O.subtype;e=s.default.createElement("div",{className:C.default.icon},x?s.default.createElement(I.default,{name:"miss_video",className:C.default.iconMiss}):s.default.createElement(I.default,{name:"miss",className:C.default.iconMiss})),t=(0,p.default)((0,T.unproxy)(O.unsafe()),!0);break;case u.default.MSG_TYPE.NOTIFICATION_TEMPLATE:if("change_number"===O.subtype){var F=O.templateParams[0],B=O.templateParams[1],G=c.default.get(F),U=G&&G.isMyContact?G.formattedName:(0,A.default)(F),j=P.default.equals(O.chat.id,F);t=j?S.default.t(521,{name:U}):S.default.t(519,{name:U}),j&&(r=()=>function(e,t){(0,n.onChangeNumberNotificationClick)(e,t)}(B,F))}else if(t=(0,g.default)((0,T.unproxy)(O.unsafe())),null!=(a=(0,v.default)((0,T.unproxy)(O.unsafe())))){var V=(0,y.default)(O.subtype);r=()=>{(0,b.default)(a,V)}}i=O.type,M=O.subtype,i===u.default.MSG_TYPE.NOTIFICATION_TEMPLATE&&w.has(M)&&(e=s.default.createElement("div",{className:C.default.bizInfo},s.default.createElement(I.default,{name:"info-filled"})));break;case u.default.MSG_TYPE.PROTOCOL:if("ephemeral_setting"===O.subtype){var H,W=O.from,Y=O.id.remote,K=o.default.gadd(Y),q=null!==(H=O.ephemeralDuration)&&void 0!==H?H:0;t=(0,_.default)(q,W,Y),r=()=>{!function(e){d.default.ephemeralDrawer(e)}(K)}}}var z=s.default.createElement("span",null,e,s.default.createElement(h.default,{direction:S.default.isRTL()?"rtl":"ltr",text:t}));return r?s.default.createElement("div",{role:"button",ref:this._ref,onClick:r},z):s.default.createElement("span",null,z)}}O.CONCERNS={contact:["id","isEnterprise","isContactBlocked","verifiedLevel","verifiedName"],msg:["id","body","chat","from","type","subtype","templateParams","ephemeralDuration"]},O.displayName="Notification";var D=(0,M.default)(O,O.CONCERNS);t.default=class extends D{handleKeyActivation(){return this.getComponent().handleKeyActivation()}};var w=new Set(["blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_verified","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_verified","blue_msg_self_fb_unverified","blue_msg_self_fb_verified","biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"])},55766:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=i.default.createElement(s.default,{href:t,onClick:e=>{e.preventDefault(),l.default.closeModal("none"),setTimeout((()=>(0,o.openExternalLink)(t)),10)}},null!=a?a:d.default.t(1002)),u=i.default.createElement(n.default,{onOK:()=>l.default.closeModal(),okText:d.default.t(1941)},e," ",r);l.default.openModal(u)};var i=r(a(67294)),s=r(a(72853)),l=r(a(33766)),n=r(a(51115)),o=a(1886),d=r(a(80162))},14039:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({displayAuthor:e,msg:t}){var a=(0,u.getMaybeMeUser)(),r=t.sender.equals(a),i=(0,s.useContext)(y.default),b=e=>{e&&e.stopPropagation();var{orderId:a,sellerJid:l,token:d}=t;if(null!=a&&null!=l&&null!=d){var u=(0,g.buildProductCatalogContext)(new E.default,(0,o.getMaybeBizPlatformForLogging)(l),m.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ORDER_MESSAGE);(0,f.logOrderMessageClick)({catalogContext:u,catalogOwnerJid:l,orderId:a}),null!=t.orderId&&n.default.openDrawerRight(s.default.createElement(S.default,{chat:t.chat,orderId:a,token:d,userIsCartOwner:r,sellerJid:l}),"slide-left",i,u)}},M=s.default.createElement(d.default,{text:t.message,dirMismatch:t.rtl!==c.default.isRTL(),direction:t.dir,inferLinesDirection:!0}),T=s.default.createElement("div",{className:_.default.meta},s.default.createElement(p.default,{msg:t})),I=s.default.createElement(l.default,{items:[{label:r?c.default.t(1313):c.default.t(1312),onClick:b}]});return s.default.createElement(C.default,{msg:t,displayAuthor:e,hideMeta:!0},s.default.createElement("div",{className:_.default.orderPreview},s.default.createElement(v.default,{msg:t.unsafe(),onClick:b})),s.default.createElement(h.default,{msg:t.unsafe(),"data-id":t.id,className:_.default.messageText},M,T),I)};var s=i(a(67294)),l=r(a(28553)),n=r(a(33766)),o=a(98355),d=r(a(20923)),u=a(26226),c=r(a(80162)),f=a(16438),h=r(a(2175)),p=r(a(62181)),m=r(a(72462)),_=r(a(21730)),v=r(a(7058)),g=a(38335),E=r(a(68290)),S=r(a(77035)),C=r(a(188)),y=r(a(30892))},87328:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){return i.default.createElement(d.default,{msg:e,displayAuthor:t},i.default.createElement("div",{className:n.default.icon},i.default.createElement(o.default,{name:"unknown"})),i.default.createElement("div",{className:n.default.text},i.default.createElement(l.default,{msg:e.unsafe(),theme:"placeholder"},(0,s.default)(e.unsafe()))))};var i=r(a(67294)),s=r(a(76818)),l=r(a(2175)),n=r(a(2550)),o=r(a(32885)),d=r(a(188))},1427:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.formatAmount1000ToParts)(e.currency,e.amount1000);return s.default.createElement("div",{className:(0,i.default)(n.default.container,{[n.default.isQuoted]:e.isQuoted,[n.default.isQuotedInComposeBox]:e.isQuotedInComposeBox})},s.default.createElement("div",{"data-testid":"payment-amount-thumb",className:(0,i.default)(n.default.thumb,{"bg-payments":!e.isQuoted})},s.default.createElement("div",{className:n.default.amount},s.default.createElement("span",{className:n.default.amountCurrency},t.symbol),s.default.createElement("span",{className:n.default.amountInteger},t.integer),s.default.createElement("span",{className:n.default.amountDecimal},t.decimal))))};var i=r(a(94184)),s=r(a(67294)),l=a(39017),n=r(a(65450))},9632:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({currency:e,subtype:t,paymentStatus:a,paymentTxnStatus:r,isCompact:u}){var c=(0,l.formatLocalSymbol)(e),f=null!=r?function(e){switch(null!=e?e:d.PaymentInfoTxnStatus.UNKNOWN){case d.PaymentInfoTxnStatus.SUCCESS:case d.PaymentInfoTxnStatus.COMPLETED:return n.default.success;case d.PaymentInfoTxnStatus.FAILED:case d.PaymentInfoTxnStatus.FAILED_RISK:case d.PaymentInfoTxnStatus.FAILED_DA_FINAL:case d.PaymentInfoTxnStatus.REFUNDED_TXN:case d.PaymentInfoTxnStatus.REFUND_FAILED:case d.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case d.PaymentInfoTxnStatus.REFUND_FAILED_DA:case d.PaymentInfoTxnStatus.AUTH_CANCELED:case d.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case d.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case d.PaymentInfoTxnStatus.COLLECT_FAILED:case d.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:return n.default.failed;default:return n.default.pending}}(r):function(e){switch(null!=e?e:d.PaymentInfoStatus.UNKNOWN_STATUS){case d.PaymentInfoStatus.COMPLETE:return n.default.success;case d.PaymentInfoStatus.CANCELLED:case d.PaymentInfoStatus.COULD_NOT_COMPLETE:case d.PaymentInfoStatus.REFUNDED:case d.PaymentInfoStatus.EXPIRED:case d.PaymentInfoStatus.REJECTED:return n.default.failed;default:return n.default.pending}}(a),h="send"===t?s.default.createElement(o.default,{name:"payment-send"}):s.default.createElement(o.default,{name:"payment-request"});return s.default.createElement("div",{"data-testid":"payment-icon-container",className:(0,i.default)(n.default.icon,f,{[n.default.compact]:u})},s.default.createElement("div",{className:(0,i.default)(n.default.iconSymbol,n.default[e])},c),h)};var i=r(a(94184)),s=r(a(67294)),l=a(39017),n=r(a(74789)),o=r(a(32885)),d=a(78089)},8971:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(1427)),o=i(a(9632)),d=i(a(91215)),u=i(a(41302)),c=i(a(17074)),f=i(a(85194)),h=a(78089);class p extends l.PureComponent{constructor(...e){super(...e),this.state={isMultilineText:!1},this._setRefText=e=>{e&&this.setState({isMultilineText:e.getBoundingClientRect().height>20})}}render(){var e,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r}=this.props,i=(0,s.default)({[d.default.bubbleOut]:this.props.isSentByMe,[d.default.bubbleIn]:!this.props.isSentByMe}),p=null!=a&&a!==h.PaymentInfoTxnStatus.UNKNOWN||null!=t&&t!==h.PaymentInfoStatus.UNKNOWN_STATUS;if(this.props.hasCaption)e=l.default.createElement("div",{ref:this._setRefText},l.default.createElement("div",null,l.default.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})),l.default.createElement(u.default,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r}));else if(p){var m;e=l.default.createElement("div",{ref:this._setRefText},l.default.createElement("div",null,l.default.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})),l.default.createElement(f.default,{msg:null===(m=this.props.msg)||void 0===m?void 0:m.unsafe()},l.default.createElement(u.default,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r})))}else{var _;e=l.default.createElement(f.default,{msg:null===(_=this.props.msg)||void 0===_?void 0:_.unsafe()},l.default.createElement("span",{ref:this._setRefText},l.default.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})))}return l.default.createElement("div",{className:i},l.default.createElement(n.default,{currency:this.props.currency,amount1000:this.props.amount1000}),l.default.createElement("div",{className:d.default.body},l.default.createElement("div",{className:(0,s.default)(d.default.bodyIcon,{[d.default.bodyIconMultiline]:this.state.isMultilineText})},l.default.createElement(o.default,{currency:this.props.currency,subtype:this.props.subtype,paymentStatus:t,paymentTxnStatus:a})),l.default.createElement("div",{className:d.default.bodyText},e)))}}t.default=p,p.displayName="PaymentInfo"},41302:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:a}){var r,s;n=(0,u.default)(),void(0,c.default)(n,1e3,{immediate:!0}),({str:r,themeClassName:s}=null!=t?function(e,t){var a=null,r=null;if(null!=e)switch(e){case f.PaymentInfoTxnStatus.UNKNOWN:a=null,r=null;break;case f.PaymentInfoTxnStatus.PENDING_SETUP:a=h(t),r=d.default.pending;break;case f.PaymentInfoTxnStatus.PENDING_RECEIVER_SETUP:case f.PaymentInfoTxnStatus.COLLECT_INIT:a=o.default.t(1969),r=d.default.pending;break;case f.PaymentInfoTxnStatus.INIT:case f.PaymentInfoTxnStatus.FAILED_PROCESSING:case f.PaymentInfoTxnStatus.FAILED_RECEIVER_PROCESSING:case f.PaymentInfoTxnStatus.FAILED_DA:a=o.default.t(1973),r=d.default.pending;break;case f.PaymentInfoTxnStatus.SUCCESS:case f.PaymentInfoTxnStatus.COMPLETED:a=o.default.t(1965),r=d.default.success;break;case f.PaymentInfoTxnStatus.FAILED:case f.PaymentInfoTxnStatus.FAILED_RISK:case f.PaymentInfoTxnStatus.FAILED_DA_FINAL:case f.PaymentInfoTxnStatus.REFUNDED_TXN:case f.PaymentInfoTxnStatus.REFUND_FAILED:case f.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case f.PaymentInfoTxnStatus.REFUND_FAILED_DA:case f.PaymentInfoTxnStatus.AUTH_CANCELED:case f.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case f.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case f.PaymentInfoTxnStatus.COLLECT_FAILED:case f.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:a=o.default.t(1966),r=d.default.failed;break;case f.PaymentInfoTxnStatus.EXPIRED_TXN:case f.PaymentInfoTxnStatus.COLLECT_EXPIRED:a=o.default.t(1967),r=d.default.pending;break;case f.PaymentInfoTxnStatus.COLLECT_SUCCESS:a=h(t),r=d.default.pending;break;case f.PaymentInfoTxnStatus.COLLECT_REJECTED:a=o.default.t(1976),r=d.default.pending;break;case f.PaymentInfoTxnStatus.COLLECT_CANCELED:case f.PaymentInfoTxnStatus.COLLECT_CANCELLING:a=o.default.t(1964),r=d.default.pending;break;case f.PaymentInfoTxnStatus.IN_REVIEW:a=o.default.t(1968),r=d.default.pending}return{str:a,themeClassName:r}}(t,a):function(e,t){var a=null,r=null;if(null!=e)switch(e){case f.PaymentInfoStatus.PROCESSING:a=o.default.t(1973),r=d.default.pending;break;case f.PaymentInfoStatus.COMPLETE:a=o.default.t(1965),r=d.default.success;break;case f.PaymentInfoStatus.SENT:a=o.default.t(1969),r=d.default.pending;break;case f.PaymentInfoStatus.NEED_TO_ACCEPT:a=h(t),r=d.default.pending;break;case f.PaymentInfoStatus.COULD_NOT_COMPLETE:case f.PaymentInfoStatus.REFUNDED:a=o.default.t(1966),r=d.default.failed;break;case f.PaymentInfoStatus.EXPIRED:a=o.default.t(1967),r=d.default.failed;break;case f.PaymentInfoStatus.REJECTED:a=o.default.t(1976),r=d.default.failed;break;case f.PaymentInfoStatus.CANCELLED:a=o.default.t(1964),r=d.default.failed;break;case f.PaymentInfoStatus.WAITING_FOR_PAYER:case f.PaymentInfoStatus.WAITING:a=h(t),r=d.default.pending;break;case f.PaymentInfoStatus.UNKNOWN_STATUS:a=null,r=null}return{str:a,themeClassName:r}}(e,a));var n;if(null==r)return null;return l.default.createElement("span",{"data-testid":"payment-status",className:(0,i.default)(d.default.status,s)},r)};var i=r(a(94184)),s=r(a(30381)),l=r(a(67294)),n=r(a(44386)),o=r(a(80162)),d=r(a(39790)),u=r(a(8574)),c=r(a(99921)),f=a(78089);function h(e){if(null==e)return o.default.t(1969);var t=1e3*n.default.globalUnixTime(),a=1e3*e;if(a-t>6e4){var r=(0,s.default)(t).to((0,s.default)(a));return o.default.t(1971,{timeSpan:r})}return a-t>0?o.default.t(1972):o.default.t(1970)}},17074:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.receiverJid)return null;var t,a=l.default.get(e.receiverJid),r=s.default.createElement("span",{className:u.default.name},a?a.isMe?n.default.t(2081):s.default.createElement(d.default,{contact:a,showNotifyName:!0}):(0,c.default)(e.receiverJid));switch(e.subtype){case"send":t=s.default.createElement(o.default,{id:1963,params:{receiverName:r}});break;case"request":t=s.default.createElement(o.default,{id:1956,params:{receiverName:r}})}return s.default.createElement("span",{className:(0,i.default)(u.default.container,{[u.default.isQuoted]:e.isQuoted})},t)};var i=r(a(94184)),s=r(a(67294)),l=r(a(62899)),n=r(a(80162)),o=r(a(41849)),d=r(a(39148)),u=r(a(32402)),c=r(a(8745))},46789:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayAuthor:t,displayType:a,quotedMsg:r}=e,c=(0,u.default)(e.msg,["paymentAmount1000","paymentCurrency","id","isSentByMe","paymentNoteMsg","paymentStatus","paymentTxnStatus","paymentExpiryTimestamp","paymentMessageReceiverJid","subtype"]);if(!s.default.supportsFeature(s.default.F.PAYMENTS))return i.default.createElement(o.default,{msg:c,displayAuthor:t,displayType:a,quotedMsg:r});var f=!(!c.paymentNoteMsg||!c.paymentNoteMsg.body);if(!(c.paymentAmount1000&&c.paymentCurrency))return i.default.createElement(o.default,{msg:c,displayAuthor:t,displayType:a,quotedMsg:r});var h=i.default.createElement(n.default,{isSentByMe:c.isSentByMe,currency:c.paymentCurrency,amount1000:c.paymentAmount1000,receiverJid:c.paymentMessageReceiverJid,paymentStatus:c.paymentStatus,paymentTxnStatus:c.paymentTxnStatus,expiryTimestamp:c.paymentExpiryTimestamp,subtype:c.subtype,hasCaption:f,msg:c});switch(c.subtype){case"ciphertext":return i.default.createElement(o.default,{msg:c,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:h,placeholderText:l.default.t(1953)});case"futureproof":return i.default.createElement(o.default,{msg:c,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:h,placeholderText:l.default.t(1955)});case"send":case"request":return i.default.createElement(d.default,{msg:c,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:h});default:return i.default.createElement(o.default,{msg:c,displayAuthor:t,displayType:a,quotedMsg:r})}};var i=r(a(67294)),s=(r(a(75444)),r(a(77188))),l=r(a(80162)),n=r(a(8971)),o=r(a(31533)),d=r(a(90514)),u=r(a(95607))},31533:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r,m,_=(0,p.default)(e.msg,["rtl","dir","isSentByMe","isGroupMsg","isPSA","senderObj","paymentNoteMsg"]),v=null===(t=_.paymentNoteMsg)||void 0===t?void 0:t.body;if(v){var g=(0,l.Conversation)({mentions:_.mentionMap(),links:_.getLinks(),trusted:_.isTrusted()});a=s.default.createElement(d.default,{msg:_.unsafe()},s.default.createElement(n.default,{text:v,selectable:!0,formatters:g,dirMismatch:_.rtl!==o.default.isRTL(),direction:_.dir}))}if(e.quotedMsg){var E=(0,i.default)(f.default.quote,{[f.default.hasAuthor]:e.displayAuthor,[f.default.forwarded]:(0,c.showForwarded)(_)});r=s.default.createElement("div",{className:E},e.quotedMsg)}var S=o.default.t(1954);e.placeholderText&&(m="ciphertext",S=e.placeholderText);var C=(0,i.default)({[f.default.hasText]:a,[f.default.noText]:!a});return s.default.createElement(h.default,{msg:_,displayAuthor:e.displayAuthor},r,e.paymentInfo,s.default.createElement("div",{className:C},s.default.createElement(u.default,{hasCaption:!!a,iconName:m,msg:_.unsafe()},S)),a)};var i=r(a(94184)),s=r(a(67294)),l=a(79027),n=(r(a(75444)),r(a(20923))),o=r(a(80162)),d=r(a(2175)),u=r(a(72002)),c=a(86146),f=r(a(13651)),h=r(a(188)),p=r(a(95607))},20158:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(28745)),d=i(a(18328)),u=i(a(12196)),c=i(a(33766)),f=i(a(75444)),h=a(29875),p=i(a(49218)),m=i(a(43369)),_=a(31351),v=i(a(22039)),g=r(a(73616)),E=a(85063),S=i(a(89958)),C=i(a(62181)),y=i(a(72462)),b=a(86146),M=i(a(7603)),T=a(6578),I=i(a(30760)),P=i(a(72304)),A=a(96769),N=i(a(95607));function O(e){e.stopPropagation()}function D(e,t){var a,{contentContainerClassName:r,captionComponent:i,thumbClassName:D,onThumbClick:w,theme:R,overlayContent:k,displayType:L,displayAuthor:x,isMsgVisible:F,albumMsgs:B,zoomMsg:G}=e,U=(0,l.useRef)(null),j=(0,N.default)(e.msg,["ack","caption","dir","footer","isFromTemplate","id","isFailed","isGroupMsg","isPSA","isSentByMe","rtl","senderObj","type","supportsMessageFooter","text"]),V=(0,N.default)(e.mediaData,["aspectRatio","preview","mediaStage","fullWidth","fullHeight","size","progressiveStage"]),H=()=>j.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:y.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1});(0,l.useEffect)((()=>{H()}),[]);var W=e=>{if(!F)return null;var t=F(e);return t?t.getImgNode&&t.getImgNode():null},Y=()=>j.type===f.default.MSG_TYPE.IMAGE&&j.caption?j.caption:void 0,K=(e,t=!1,a,r)=>{var{fullHeight:i,fullWidth:n}=V,o=(0,s.default)(M.default.thumbBody,{[M.default.thumbBodyLores]:t}),d=(0,h.getImgStyle)(n||a,i||r,a,r);return l.default.createElement("img",{alt:Y(),src:e,className:o,style:d,ref:U})},q=()=>U.current;(0,l.useImperativeHandle)(t,(()=>({getImgNode:q})));var z=e=>{if(e&&e.stopPropagation(),R===_.DisplayTheme.Album){var t=new Set((B||[]).map((e=>e.id.toString())));c.default.mediaViewerModal({msg:(0,T.unproxy)((G||j).unsafe()),getZoomNode:W,highlightedMsgIds:t})}else c.default.mediaViewerModal({msg:(0,T.unproxy)(j.unsafe()),getZoomNode:W})},$=Y(),Q=$?null:l.default.createElement(P.default,null),X=$?l.default.createElement("div",{className:M.default.caption},l.default.createElement(u.default,{msg:j.unsafe(),trusted:e.trusted,spacer:!(j.supportsMessageFooter&&j.footer)})):null,J=null,Z=null;if(null!=k)Z=w||z;else{var{mediaStage:ee,progressiveStage:te}=V;switch(ee){case E.MEDIA_DATA_STAGE.RESOLVED:case E.MEDIA_DATA_STAGE.PROGRESSIVE_READY:Z=w||z;break;case E.MEDIA_DATA_STAGE.FETCHING:J=l.default.createElement(g.Pending,{cancelable:!0}),Z=()=>{j.cancelDownload()};break;case E.MEDIA_DATA_STAGE.NEED_POKE:J=l.default.createElement(g.Download,{filesize:V.size}),Z=()=>{j.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:y.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})};break;case E.MEDIA_DATA_STAGE.UPLOADING:case E.MEDIA_DATA_STAGE.REUPLOADING:J=l.default.createElement(g.Pending,{cancelable:!0}),Z=()=>{j.cancelUpload()};break;case E.MEDIA_DATA_STAGE.NEED_UPLOAD:J=l.default.createElement(g.Upload,{filesize:V.size}),Z=()=>{j.resumeUpload()};break;case E.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:J=l.default.createElement(g.Upload,{filesize:V.size}),Z=()=>{j.resumeRemoteUpload()};break;case E.MEDIA_DATA_STAGE.ERROR_MISSING:Z=w||(()=>{c.default.openModal(l.default.createElement(v.default,{msg:j.unsafe()}))});break;case E.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:J=l.default.createElement(g.Download,{filesize:V.size}),Z=w||z;break;case E.MEDIA_DATA_STAGE.SENDING:j.isFailed||(J=l.default.createElement(g.Pending,null));break;case E.MEDIA_DATA_STAGE.DECRYPTING:null==te&&(J=l.default.createElement(g.Pending,{cancelable:!0}));break;case E.MEDIA_DATA_STAGE.INIT:case E.MEDIA_DATA_STAGE.EXISTS:break;case E.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case E.MEDIA_DATA_STAGE.PREPARING:case E.MEDIA_DATA_STAGE.REMOTE_UPLOADING:J=l.default.createElement(g.Pending,null)}}var ae,re=(0,b.showForwarded)(j)&&e.theme!==_.DisplayTheme.Album,ie=(0,A.numCodepoints)(null!==(a=j.text)&&void 0!==a?a:"")>f.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:se,bubbleHeight:le}=(0,h.getBubbleDimension)(j.type,j.isFromTemplate,V.aspectRatio,R,L,ie),ne=(0,s.default)(M.default.bubble,{[M.default.isAlbum]:R===_.DisplayTheme.Album,[M.default.portrait]:se<le&&(0,h.canUseCustomCropping)(j.type,R,L)}),oe=(0,s.default)(ne,{[M.default.hasCaption]:$,[M.default.hasAuthor]:x,[M.default.forwarded]:re,[M.default.isPSA]:j.isPSA,[M.default.isPreview]:e.displayType===f.default.DISP_TYPE.MSG_INFO||e.displayType===f.default.DISP_TYPE.STARRED_MSGS,[M.default.isGallery]:e.displayType===f.default.DISP_TYPE.GALLERY}),de=x?l.default.createElement("div",{className:M.default.author},l.default.createElement(o.default,{msg:j,contact:j.senderObj})):null,ue=re?l.default.createElement(m.default,{msg:j.unsafe(),className:M.default.forwardedIndicator}):null,ce=e.quotedMsg?l.default.createElement("div",{className:M.default.quote},e.quotedMsg):null,fe=(0,s.default)(M.default.thumb,{[M.default.overlay]:k});null==k&&(ae=l.default.createElement("div",{className:M.default.meta},l.default.createElement(C.default,{msg:j})));var he=l.default.createElement("div",{className:r},de,ue,ce,l.default.createElement(p.default,{msg:j.unsafe(),wrapperClass:M.default.ctwaContext}),l.default.createElement("div",{role:"button","data-a8n":n.default.key("image-thumb"),className:D||fe,onClick:Z,style:{width:se,height:le}},J,l.default.createElement(S.default,{mediaData:V,placeholderRenderer:()=>((e,t)=>K(V.preview&&V.preview.url(),!0,e,t))(se,le),downloadMedia:H,renderProgressively:!0},((e,t)=>K(e,t,se,le))),Q),i||X,l.default.createElement(I.default,{dir:j.dir,footer:j.footer,isShown:j.supportsMessageFooter,msg:j.unsafe(),rtl:j.rtl,trusted:e.trusted,type:j.type}),ae);return X?l.default.createElement(d.default,{contact:j.senderObj,msg:j.unsafe(),className:oe,onClick:O},he):(null!=k&&(he=l.default.createElement("div",{className:M.default.overlayAlbumText},he,k)),l.default.createElement("div",{className:oe,onClick:O},he))}var w=(0,l.forwardRef)(D);t.default=w},57418:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{playbackRate:t,onClick:a}=e,r=()=>{o.default.delayClearPlaybackRateControl(),a()};return i.default.createElement("div",{role:"button","aria-hidden":!0,className:n.default.wrapper,tabIndex:"0",onClick:r,onKeyPress:e=>{e.key!==d.ENTER&&e.key!==d.SPACE||(e.preventDefault(),e.stopPropagation(),r())}},i.default.createElement("div",{className:n.default.badge},function(e){switch(e){case 1:return l.default.t(256);case 1.5:return l.default.t(255);case 2:return l.default.t(257)}}(t)))};var i=r(a(67294)),s=r(a(25116)),l=r(a(80162)),n=r(a(22159)),o=r(a(70046)),{KEYBOARD_EVENT_KEY_VALUE:d}=s.default},25823:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(28745)),o=i(a(75204)),d=i(a(33766)),u=a(79027),c=i(a(75444)),f=a(98355),h=i(a(20923)),p=i(a(64751)),m=i(a(83288)),_=i(a(80162)),v=a(4566),g=i(a(72462)),E=i(a(20158)),S=i(a(71388)),C=a(38335),y=i(a(68290)),b=i(a(77035)),M=i(a(96437)),T=i(a(85194)),I=i(a(72765)),P=a(6578),A=a(52152);class N extends l.Component{constructor(...e){super(...e),this.ProductCatalogSession=new y.default,this._launchProductView=e=>{e&&e.stopPropagation();var{msg:t,onProductClick:a}=this.props;if(t){var{productId:r,businessOwnerJid:i}=t;if(r&&i){var s=(0,p.default)({productId:r,businessOwnerJid:i,msgT:t.t});if(s){var n=(0,C.buildProductCatalogContext)(this.ProductCatalogSession,(0,f.getMaybeBizPlatformForLogging)(i),g.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE);(0,v.logProductMsgClick)({product:(0,P.unproxy)(s),catalogContext:n});var o=this.ProductCatalogSession.toString();a?a(s,o):d.default.openDrawerRight(l.default.createElement(b.default,{refreshCarousel:!0,chat:t.chat,product:s}),"slide-left",this.props.uim,n)}}}}}componentDidMount(){var{msg:e}=this.props;e.businessOwnerJid&&(0,A.createWid)(e.businessOwnerJid)&&o.default.addMsgAsProduct((0,P.unproxy)(e.unsafe()))}_renderProductInfo(){var e,{msg:t,trusted:a}=this.props,{title:r,description:i,currencyCode:s,priceAmount1000:n,salePriceAmount1000:o}=t,d=(0,u.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),selectable:!0,trusted:!0===a});null!=n&&s?e=l.default.createElement(M.default,{product:{currency:s,priceAmount1000:n,salePriceAmount1000:o},direction:"inherit",selectable:!0}):i&&(e=l.default.createElement(h.default,{direction:"inherit",selectable:!0,text:i,formatters:d,textLimit:c.default.MAX_PRODUCT_SUBTITLE_LENGTH}));var f=l.default.createElement(h.default,{direction:"inherit",selectable:!0,text:r,formatters:d,ellipsify:!0,className:S.default.title}),p=e?l.default.createElement(T.default,{msg:t.unsafe(),className:S.default.subtitle},e):null;return l.default.createElement("div",{className:S.default.productInfo,onClick:this._launchProductView},f,p)}render(){var{displayAuthor:e,msg:t,mediaData:a,trusted:r,quotedMsg:i}=this.props,o=e?l.default.createElement("div",{className:S.default.author},l.default.createElement(n.default,{msg:t,contact:t.senderObj})):null,d=l.default.createElement(E.default,{msg:t,mediaData:a,trusted:r,displayAuthor:!1,contentContainerClassName:S.default.productContainer,captionComponent:this._renderProductInfo(),thumbClassName:S.default.thumb,onThumbClick:this._launchProductView,quotedMsg:i}),u=l.default.createElement(h.default,{className:S.default.productCta,onClick:this._launchProductView,text:_.default.t(1354)});return l.default.createElement("div",{className:(0,s.default)(S.default.bubble,{[S.default.bubbleIn]:!t.isSentByMe,[S.default.bubbleOut]:t.isSentByMe})},o,d,u)}}N.CONCERNS={msg:["businessOwnerJid","chat","chat","currencyCode","description","dir","id","isGroupMsg","asProductInquiry","isSentByMe","mediaData","priceAmount1000","productId","productImageCount","retailerId","rtl","salePriceAmount1000","senderObj","t","title","url"]},N.displayName="Product";var O=(0,m.default)((0,I.default)(N,N.CONCERNS));t.default=O},43395:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(9019),n=r(a(67294)),o=r(a(17367)),d=a(57909),u=i(a(80896)),c=i(a(23766)),f=i(a(44563)),h=i(a(32885));class p extends n.PureComponent{constructor(e){super(e),this.promise=null,this._clearPromise=()=>{this.promise=null},this._handleImageChange=(e={})=>{this.setState({img:e.img})},this.state={img:null}}componentDidMount(){var e=this.props.wid;e&&(this.promise=f.default.find(e).then((e=>(0,l.delayMs)(0,e))).then((e=>{this.props.listeners.add(e,"change:img",this._handleImageChange),this._handleImageChange(e)})).catch((()=>{})).finally(this._clearPromise))}componentWillUnmount(){this.promise&&this.promise.cancel()}render(){var e,{theme:t}=this.props;if(this.state.img&&this.props.wid)return n.default.createElement(o.default,{id:this.props.wid,quoted:this.props.quoted,size:this.props.size,square:this.props.square,border:this.props.border});e="number"==typeof this.props.size&&0!==this.props.size||"number"!=typeof this.props.size&&null!=this.props.size?this.props.size:o.DETAIL_IMAGE_SIZE.SMALL;var a,r=(0,o.getSize)(e)||void 0,i=this.props.thumbs?this.props.thumbs:[this.props.thumb],l=i.map(((e,t)=>{if(e)return n.default.createElement("img",{className:c.default.image,src:e,key:t,alt:""});var a=r&&r/(i.length>2&&t>0?2:1);return n.default.createElement(d.FlexRow,{key:t,className:c.default.default,justify:"center",align:"center"},n.default.createElement(h.default,{name:this.props.quoted?"default-user-square":"default-user",style:{width:a,height:a},className:c.default.icon}))}));return a=1===l.length?l[0]:2===l.length?n.default.createElement(d.FlexRow,{className:c.default.row,justify:"stretch",align:"stretch"},l[0],l[1]):n.default.createElement(d.FlexRow,{className:c.default.row,justify:"stretch",align:"stretch"},l[0],n.default.createElement(d.FlexColumn,{className:c.default.col,justify:"stretch",align:"stretch"},l[1],l[2])),n.default.createElement(d.FlexRow,{className:(0,s.default)(c.default.container,{[c.default.square]:this.props.square,[c.default.hasBorder]:this.props.border,[c.default.hasInnerBorder]:"voip"===t||"voip-dimmed"===t,[c.default.hasLargeInnerBorder]:"voip-large"===t||"voip-large-dimmed"===t,[c.default.dimmed]:"voip-dimmed"===t||"voip-large-dimmed"===t}),style:{width:r,height:r}},a)}}p.displayName="ProfileImage";var m=(0,u.default)(p);t.default=m},33925:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(4337)),n=i(a(5830)),o=r(a(28745)),d=r(a(33766)),u=r(a(75444)),c=r(a(17367)),f=a(88770),h=r(a(22039)),p=a(85063),m=r(a(72462)),_=r(a(30174)),v=r(a(72765)),g=r(a(32885));class E extends s.PureComponent{constructor(e){super(e),this._refAudioPlayer=(0,s.createRef)(),this.showMediaMissing=()=>{d.default.openModal(s.default.createElement(h.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{var{msg:t}=this.props;e&&(0,f.canMarkPlayed)(t.unsafe())&&(0,f.markPlayed)(t.unsafe()),this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}handleKeyActivation(e){var t;null===(t=this._refAudioPlayer.current)||void 0===t||t.handleKeyActivation(e)}render(){var e,{msg:t,mediaData:a}=this.props,r=t.ack===u.default.ACK.PLAYED,i=s.default.createElement(_.default,{played:r,isSentByMe:t.isSentByMe}),d=this.state.playing?this.state.currentTime:a.duration;switch(a.mediaStage){case p.MEDIA_DATA_STAGE.RESOLVED:e=s.default.createElement(n.default,{ref:this._refAudioPlayer,mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,autoPlay:this.state.autoPlay,duration:d,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:t.isSentByMe,playing:this.state.playing,played:r,displayType:this.props.displayType,getSequentialMsg:this.props.getSequentialMsg,currMsgId:t.id,isPtt:!0});break;case p.MEDIA_DATA_STAGE.NEED_POKE:e=s.default.createElement(n.AudioPlayerFrame,{icon:s.default.createElement(g.default,{name:"audio-download"}),outgoingMsg:t.isSentByMe,action:this._forceDownloadMedia});break;case p.MEDIA_DATA_STAGE.NEED_UPLOAD:e=s.default.createElement(n.AudioPlayerFrame,{icon:s.default.createElement(g.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeUpload});break;case p.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=s.default.createElement(n.AudioPlayerFrame,{icon:s.default.createElement(g.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeRemoteUpload});break;case p.MEDIA_DATA_STAGE.ERROR_MISSING:e=s.default.createElement(n.AudioPlayerFrame,{icon:s.default.createElement(g.default,{name:"audio-play",directional:!0}),outgoingMsg:t.isSentByMe,action:this.showMediaMissing});break;case p.MEDIA_DATA_STAGE.UPLOADING:case p.MEDIA_DATA_STAGE.SENDING:var f=a.mediaStage===p.MEDIA_DATA_STAGE.UPLOADING;e=s.default.createElement(n.AudioPlayerFrame,{action:f?this.cancelUpload:void 0,canCancel:f,fileSize:a.size,outgoingMsg:t.isSentByMe,spinner:!0});break;default:e=s.default.createElement(n.AudioPlayerFrame,{spinner:!0,outgoingMsg:t.isSentByMe})}var h=this.props.displayAuthor?s.default.createElement(o.default,{msg:t,contact:t.senderObj}):null,m=s.default.createElement(c.default,{id:t.senderObj.id,size:55});return s.default.createElement(l.default,{msg:t,quotedMsg:this.props.quotedMsg,author:h,status:i,player:e,avatar:m,displayType:this.props.displayType})}}E.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj","id"],mediaData:["duration","type","mediaStage","renderableUrl","size","waveform"]},E.displayName="Ptt";var S=(0,v.default)(E,E.CONCERNS);t.default=class extends S{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}},5279:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.playMidPttTone=function(){s.play()},t.playEndPttTone=function(){l.play()};var i=r(a(75444)),s=new window.Audio(i.default.PTT_MIDDLE_TONE_PATH),l=new window.Audio(i.default.PTT_END_TONE_PATH)},30174:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(o.icon,function({played:e,isSentByMe:t}){return e?o.blue:t?o.gray:o.green}(e),{[o.outgoing]:e.isSentByMe,[o.incoming]:!e.isSentByMe});return s.default.createElement("div",{className:l.default.wrapper},s.default.createElement("div",{className:t},s.default.createElement(n.default,{name:"ptt-status"})))};var i=r(a(94184)),s=r(a(67294)),l=r(a(4947)),n=r(a(32885)),o={incoming:l.default.incoming,outgoing:l.default.outgoing,green:l.default.green,blue:l.default.blue,gray:l.default.gray,icon:l.default.icon}},87853:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{msg:a,theme:r}=e,{type:i,productListHeaderImage:o}=(0,m.default)(a,["type","productListHeaderImage"]);if(a.isViewOnce)return null;function A(){return["conversation","starred","msgInfo"].includes(e.theme)?58:79}switch(a.type){case g:case E:case C:case M:var N=(0,d.isMediaTypeWithImage)(i),{preview:O,fullPreviewData:D}=a.mediaData;(N||null!=O||null!=D)&&(t=n.default.createElement(d.default,{mediaData:a.mediaData}));break;case S:a.body&&(t=n.default.createElement("div",{"data-testid":"msgImage",style:{backgroundImage:`url(data:image/jpeg;base64,${a.body})`},className:p.default.image}));break;case v:a.thumbnail&&(t=n.default.createElement("div",{"data-testid":"msgImage",style:{backgroundImage:`url("data:image/jpeg;base64,${a.thumbnail}")`},className:p.default.image}));break;case y:t=n.default.createElement(f.default,{wid:h.default.getThumbnailWidFromVcard(a.vcard),thumb:(0,_.vcardThumbnail)(a.vcard),quoted:!0,square:!0,size:A()});break;case b:t=n.default.createElement(f.default,{size:A(),square:!0,quoted:!0});break;case T:(0,l.isNonZeroNumber)(a.paymentAmount1000)&&a.paymentCurrency&&(t=n.default.createElement(c.default,{currency:a.paymentCurrency,amount1000:a.paymentAmount1000,isQuoted:!0,isQuotedInComposeBox:"composeBox"===r}));break;case I:a.thumbnail&&(t=n.default.createElement("div",{className:p.default.image,style:{backgroundImage:`url("data:image/jpeg;base64,${a.thumbnail}")`}}));break;case P:o&&(t=n.default.createElement("div",{className:p.default.image,style:{backgroundImage:`url("${(0,u.convertToDataURI)(o)}")`}}))}var w=(0,s.default)(p.default.imageWrapper,{[p.default.composeBox]:"composeBox"===r,[p.default.statusV3]:"statusV3"===r,[p.default.isPayment]:a.type===T});return t?n.default.createElement("div",{className:w},n.default.createElement("div",{className:p.default.msgImage},t)):null};var s=i(a(94184)),l=a(74230),n=i(a(67294)),o=i(a(75444)),d=r(a(43905)),u=a(27632),c=i(a(1427)),f=i(a(43395)),h=i(a(44563)),p=i(a(66076)),m=i(a(95607)),_=a(54865),{CHAT:v,IMAGE:g,VIDEO:E,LOCATION:S,DOCUMENT:C,VCARD:y,MULTI_VCARD:b,PRODUCT:M,PAYMENT:T,ORDER:I,LIST:P}=o.default.MSG_TYPE},58667:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(9019),n=a(24788),o=r(a(67294)),d=i(a(28745)),u=i(a(75204)),c=i(a(33766)),f=i(a(75444)),h=a(98355),p=a(54438),m=a(26226),_=i(a(83288)),v=i(a(80162)),g=a(4566),E=i(a(72462)),S=i(a(33048)),C=a(38335),y=i(a(68290)),b=i(a(77035)),M=i(a(87853)),T=i(a(777)),I=i(a(82981)),P=a(6578),A=i(a(11818)),N=r(a(48847)),O=i(a(53680)),D=a(52152);class w extends o.PureComponent{constructor(...e){super(...e),this.ProductCatalogSession=new y.default,this.state={hover:!1},this.onClick=()=>{var{rootMsg:e,msg:t}=this.props;if(t.isStatusV3)e&&e.isQuotedMsgAvailable?A.default.find(t.sender).then((r=>{var i=a(98263).default;c.default.openModalMedia(o.default.createElement(i,{removeTopDrawer:!1,statusV3:r,msgKey:t.id,onMsgNotFound:()=>{e&&(e.isQuotedMsgAvailable=!1)}}),{transition:"quoted-status-v3-modal"})})):c.default.openToast(o.default.createElement(N.default,{msg:v.default.t(1512),id:(0,N.genId)()}));else{if(null!=t.asProductInquiry)return this._onProductInquiry(t.asProductInquiry);if(!e||e.isQuotedMsgAvailable){var r=t.id,i=t.chat,s=S.default.get(r),d=i.getSearchContext(s||r,null==e?void 0:e.unsafe());d&&(d.slideToMsg=!0),c.default.openChatAt(i,d).then((e=>{if(e){var a=S.default.get(t.id);a&&(0,l.delayMs)(500).then((()=>{c.default.openMediaViewerForAlbumMedia((0,P.unproxy)(a))}))}})),s||d.collection.loadAroundPromise.catch((0,n.filteredCatch)(p.E404,(()=>{var t=null==e?void 0:e.unsafe(),a=null==t?void 0:t.chat;null!=t&&null!=a&&c.default.openChatAt(a,a.getSearchContext(t))})))}else c.default.openToast(o.default.createElement(N.default,{msg:v.default.t(1134),id:(0,N.genId)()}))}},this.onMouseOver=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseEnter=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})}}componentDidMount(){var{msg:e,t}=this.props,a=e.asProductInquiry;null!=a&&(a.businessOwnerJid&&(0,D.createWid)(a.businessOwnerJid)&&(null!=t&&(a.t=t),u.default.addMsgAsProduct((0,P.unproxy)(a.unsafe()))))}_onProductInquiry(e){var{t}=this.props,a=e.businessOwnerJid&&(0,D.createWid)(e.businessOwnerJid);if(a){var r=u.default.get(a);if(r){var i=e.productId&&r.productCollection.get(e.productId),s=e.productId&&r.msgProductCollection.get(e.productId);if(i||s){var l=s;if(i&&null!=t&&i.t>=t&&(l=i,s&&r.productCollection.remove(s)),l){var n=(0,C.buildProductCatalogContext)(this.ProductCatalogSession,(0,h.getMaybeBizPlatformForLogging)(e.businessOwnerJid),E.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE);return(0,g.logProductInquiryClick)({product:(0,P.unproxy)(l),catalogContext:n}),c.default.openDrawerRight(o.default.createElement(b.default,{product:l,chat:e.chat,refreshCarousel:!0}),"slide-left",this.props.uim,n)}}}}}hoverable(){return!this.state.hover&&!!this.props.rootMsg}render(){var{msg:e,displayType:t,chat:a,rootMsg:r,composeQuotedMsgRemoteJid:i}=this.props,l=a.assignedColor(e.sender),n=[f.default.DISP_TYPE.CONVERSATION,f.default.DISP_TYPE.STARRED_MSGS].includes(t),u=i||(null==r?void 0:r.quotedRemoteJid),c=n?"button":null,h=o.default.createElement(d.default,{msg:e,contact:e.senderObj,role:c,chat:a,displaySelf:O.default.equals(e.sender,(0,m.getMaybeMeUser)()),quotedRemoteJid:u,disableClick:!0}),p=(0,s.default)(T.default.quotedMsg,{[T.default.statusV3QuotedMsg]:"statusV3"===this.props.theme,[T.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme,[T.default.hover]:this.state.hover}),_=o.default.createElement("div",{className:T.default.msgText},h,o.default.createElement(I.default,{msg:e,theme:this.props.theme})),v=t===f.default.DISP_TYPE.STARRED_MSGS?"starred":this.props.theme;return o.default.createElement("div",{className:T.default.container,onMouseOver:n?this.onMouseOver:null,onMouseEnter:n?this.onMouseEnter:null,onMouseLeave:n?this.onMouseLeave:null},o.default.createElement("div",{className:p,role:c,onClick:n?this.onClick:null},o.default.createElement("span",{className:(0,s.default)(`bg-color-${l}`,T.default.colorBar)}),o.default.createElement("div",{className:T.default.msgBody,dir:n?null:e.dir},_),o.default.createElement(M.default,{msg:e.unsafe(),theme:v})))}}w.displayName="QuotedMsg";var R=(0,_.default)(w);t.default=R},82981:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(9019),n=a(24788),o=a(74230),d=r(a(67294)),u=i(a(44386)),c=i(a(75444)),f=i(a(20923)),h=r(a(12536)),p=i(a(76818)),m=a(99375),_=i(a(80162)),v=i(a(80896)),g=i(a(72462)),E=i(a(75601)),S=a(7058),C=i(a(17074)),y=i(a(85726)),b=i(a(15149)),M=a(15736),T=i(a(43232)),I=i(a(89886)),{CHAT:P,IMAGE:A,VIDEO:N,AUDIO:O,STICKER:D,PAYMENT:w,ORDER:R}=c.default.MSG_TYPE;class k extends d.PureComponent{constructor(...e){super(...e),this._handleDownloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:g.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}componentDidMount(){var{listeners:e,msg:t}=this.props;t.type===D&&t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:g.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===c.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.size<=1024*T.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}).checkpoint(this.props.rejectOnUnmount()).then((()=>(0,l.delayMs)(0))).catch((0,n.filteredCatch)(h.Unmount,(()=>{}))),t.type===c.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){var{msg:e,theme:t}=this.props,a=[];e.hasSymbol()&&e.type!==D&&e.type!==R&&a.push(d.default.createElement(E.default,{msg:e.unsafe(),key:"msg-symbol",viewOnceStatic:!0})),(e.type!==N||e.isGif||e.caption||e.isViewOnce)&&e.type!==O||a.push(u.default.durationStr(Number(e.duration))+" ");var r,i,l=m.Configuration.QuotedMention({mentions:e.mentionMap()});if(e.type===P||e.type===A||e.type===N||e.isFromTemplate||e.isDynamicReplyButtonsMsg)i=(null===(r=e.asViewOnce)||void 0===r?void 0:r.isViewOnce)?e.type===A?_.default.t(1644):_.default.t(1651):e.isFromTemplate&&e.type===c.default.MSG_TYPE.CHAT&&e.title?"*"+e.title+"*\n"+e.body:(0,p.default)(e.unsafe(),!1),a.push(d.default.createElement(f.default,{formatters:l,className:"quoted-mention",text:i,textLimit:e.initialPageSize,direction:"auto",key:"status"}));else if(D===e.type){var n="composeBox"===this.props.theme?"composeBoxQuoted":"quoted";a.push(d.default.createElement(I.default,{key:"sticker",mediaData:e.mediaData,theme:n,downloadMedia:this._handleDownloadMedia}))}else e.type===w?(0,o.isNonZeroNumber)(e.paymentAmount1000)&&e.paymentCurrency?a.push(d.default.createElement(C.default,{key:"payment",subtype:e.subtype,receiverJid:e.paymentMessageReceiverJid,isQuoted:!0})):a.push(_.default.t(1954)):e.type===R?a.push(d.default.createElement(S.OrderDescription,{msg:e.unsafe(),showMessage:!0})):a.push(d.default.createElement(f.default,{formatters:l,className:"quoted-mention",text:(0,M.formatQuotedMsg)(e),textLimit:e.initialPageSize,direction:"auto",key:"status"}));var h=(0,s.default)(b.default.messageText,{[b.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme}),v="conversation"===t||"starred"===t?"button":null;return d.default.createElement("div",{className:h,dir:e.dir,role:v},a)}}k.displayName="QuotedMsgContent";var L=(0,y.default)((0,v.default)(k));t.default=L},15736:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatQuotedMsg=function(e){var{MSG_TYPE:t}=l.default;switch(e.type){case t.DOCUMENT:return e.isVcardOverMmsDocument?f(e):(0,o.default)(e.unsafe());case t.MULTI_VCARD:return c(e);case t.PRODUCT:return h(e);default:return(0,o.default)(e.unsafe())}},t.formatMultiVcardText=c,t.formatVcardOverMmsText=f,t.formatProductText=h;var s=i(a(39138)),l=i(a(75444)),n=r(a(39017)),o=i(a(76818)),d=i(a(80162)),u=a(54865);function c(e){var t=e.vcardList.length;return t>0?d.default.t(1168,{count:t,_plural:t}):d.default.t(1167)}function f(e){var t;if(e.mediaData.parsedVcards){var{parsedVcards:a}=e.mediaData;return a.length>1?d.default.t(1168,{count:a.length,_plural:a.length}):(0,u.vcardGetNameFromParsed)(a[0])||d.default.t(1798)}return null!=e.pageCount?d.default.t(1168,{count:e.pageCount,_plural:e.pageCount}):(null===(t=e.mediaData)||void 0===t?void 0:t.filename)||d.default.t(1800)}function h({title:e,description:t,currencyCode:a,priceAmount1000:r,salePriceAmount1000:i}){var o;if(null!=a&&null!=r){var d=e=>n.formatAmount1000(a,e);o=null!=i?`~${d(r)}~ ${d(i)}`:d(r)}else t&&(o=(0,s.default)(t,{length:l.default.MAX_REPLY_PRODUCT_DESC_LENGTH}));return[(0,s.default)(e,{length:l.default.MAX_REPLY_PRODUCT_TITLE_LENGTH}),o].filter(Boolean).join("\n")}},49775:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(74798)),o=i(a(33766)),d=i(a(20923)),u=a(77824),c=i(a(80162)),f=i(a(58821));class h extends l.PureComponent{constructor(...e){super(...e),this.state={hover:!1},this.onMouseOver=()=>{this.setState({hover:!0})},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this._getGroupName=()=>{var{quotedGroupJid:e}=this.props,t=n.default.get(e);return t&&t.formattedTitle},this.onClick=()=>{var{quotedGroupJid:e}=this.props;(0,u.findChat)(e).then((e=>o.default.openChatBottom(e)))}}hoverable(){return!this.state.hover&&!this.props.isComposePreview}render(){var{isComposePreview:e}=this.props,t=this._getGroupName();if(!t)return null;var a=(0,s.default)(f.default.quotedMsg,{[f.default.hover]:this.state.hover,[f.default.composeBoxQuotedMsg]:!!e});return l.default.createElement("div",{onMouseOver:this.onMouseOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,className:a},l.default.createElement("div",{className:f.default.msg,role:e?"none":"button",onClick:this.onClick},l.default.createElement("span",{className:f.default.colorBar}),l.default.createElement("div",{className:f.default.msgBody},l.default.createElement(d.default,{className:"quoted-mention",text:c.default.t(1379,{groupName:t}),direction:"auto",key:"status"}))))}}t.default=h,h.displayName="QuotedAdminMsgGroupName"},81437:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t}=e,a=t.isSentByMe?l.default.t(1429):l.default.t(1427);return i.default.createElement(u.default,{msg:t,displayAuthor:!t.isSentByMe&&t.isGroupMsg},i.default.createElement(s.FlexRow,{align:"center"},i.default.createElement(s.FlexItem,{className:o.default.icon},i.default.createElement(d.default,{name:"recalled"})),i.default.createElement(s.FlexItem,null,i.default.createElement(n.default,{msg:t.unsafe(),theme:"placeholder"},a))))};var i=r(a(67294)),s=(r(a(75444)),a(57909)),l=r(a(80162)),n=r(a(2175)),o=r(a(32744)),d=r(a(32885)),u=r(a(188))},47374:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=l.default.durationStr(e.currentTime)+" / "+l.default.durationStr(e.duration);return s.default.createElement(n.default,{value:e.currentTime,valueText:t,min:0,max:e.duration,smallSkip:1,largeSkip:10,onChange:e.onChange,disabled:e.disabled,theme:o(e)})};var s=i(a(67294)),l=i(a(44386)),n=r(a(49884));function o({outgoing:e,played:t}){return e?t?n.SmoothRangeInputTheme.AUDIO_OUTGOING_PLAYED:n.SmoothRangeInputTheme.AUDIO_OUTGOING_UNPLAYED:t?n.SmoothRangeInputTheme.AUDIO_INCOMING_PLAYED:n.SmoothRangeInputTheme.AUDIO_INCOMING_UNPLAYED}},90514:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r=(0,f.default)(e.msg,["rtl","dir","isGroupMsg","isPSA","isSentByMe","senderObj","paymentNoteMsg"]),h=null===(t=r.paymentNoteMsg)||void 0===t?void 0:t.body,p=null;if(h){var m=(0,s.Conversation)({mentions:r.mentionMap(),links:r.getLinks(),trusted:r.isTrusted()});p=i.default.createElement("div",{className:c.default.caption},i.default.createElement(d.default,{msg:r.unsafe()},i.default.createElement(l.default,{text:h,selectable:!0,formatters:m,dirMismatch:r.rtl!==n.default.isRTL(),direction:r.dir})))}else a=i.default.createElement("div",{className:c.default.meta},i.default.createElement(u.default,{msg:r}));return i.default.createElement(o.default,{displayAuthor:e.displayAuthor,displayType:e.displayType,hasCaption:!!p,msg:r,quotedMsg:e.quotedMsg,hideMeta:!h},e.paymentInfo,a,p)};var i=r(a(67294)),s=a(79027),l=(r(a(75444)),r(a(20923))),n=r(a(80162)),o=r(a(49922)),d=r(a(2175)),u=r(a(62181)),c=r(a(63459)),f=r(a(95607))},49884:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{value:t,valueText:a,min:r,max:i,smallSkip:c,largeSkip:f,onChange:h,disabled:p,theme:m}=e,[_,v]=(0,n.useState)(null),g=(0,n.useCallback)((e=>{v(null),null==h||h(e)}),[v,h]),E=null!=_?_:t,S=100*(0,s.default)((E-r)/(i-r),0,1),C=(0,l.default)(d.default.container,function(e){switch(e){case u.AUDIO_OUTGOING_UNPLAYED:return d.default.containerOutgoingUnplayed;case u.AUDIO_OUTGOING_PLAYED:return d.default.containerOutgoingPlayed;case u.AUDIO_INCOMING_UNPLAYED:return d.default.containerIncomingUnplayed;case u.AUDIO_INCOMING_PLAYED:return d.default.containerIncomingPlayed}}(m),{[d.default.containerDisabled]:p});return n.default.createElement(o.default,{value:t,valueText:a,min:0,max:i,smallSkip:c,largeSkip:f,onChange:v,onCommit:g,disabled:p},n.default.createElement("div",{className:C},n.default.createElement("div",{className:d.default.track}),n.default.createElement("span",{className:d.default.progress,style:{width:`${S}%`}}),n.default.createElement("div",{className:d.default.thumbTravelContainer},n.default.createElement("div",{className:d.default.thumbContainer,style:{transform:`translateX(${S}%)`}},n.default.createElement("div",{className:d.default.thumb})))))},t.SmoothRangeInputTheme=void 0;var s=i(a(74691)),l=i(a(94184)),n=r(a(67294)),o=i(a(47072)),d=i(a(6455)),u=a(54302).Mirrored(["AUDIO_OUTGOING_UNPLAYED","AUDIO_OUTGOING_PLAYED","AUDIO_INCOMING_UNPLAYED","AUDIO_INCOMING_PLAYED"]);t.SmoothRangeInputTheme=u},85194:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=a(34605),o=i(a(5511)),d=i(a(72765));class u extends l.PureComponent{render(){var{children:e,className:t,msg:a}=this.props;if(!a)return __LOG__(4,void 0,new Error,!0)`Missing msg model for SpacerText component`,SEND_LOGS("missing-msg-model"),l.default.createElement(l.default.Fragment,null,e);var r=[a.broadcast,a.isSentByMe,a.labels&&a.labels.length>0&&(0,n.canDisplayLabel)(),a.star].filter(Boolean).length,i=[o.default.icons1,o.default.icons2,o.default.icons3,o.default.icons4],d=r>0?i[r-1]:"";return l.default.createElement("span",{className:t},e,l.default.createElement("span",{className:(0,s.default)(o.default.spacer,d)}))}}u.CONCERNS={msg:["broadcast","isEphemeral","isSentByMe","labels","star"]},u.displayName="SpacerText";var c=(0,d.default)(u,u.CONCERNS);t.default=c},3317:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(63337)),l=r(a(67294)),n=i(a(44386)),o=i(a(75444)),d=i(a(62899)),u=i(a(17367)),c=a(89852),f=i(a(20923)),h=i(a(62886)),p=i(a(75252)),m=i(a(35001)),_=i(a(80162)),v=i(a(80896)),g=a(53348),E=i(a(61948)),S=i(a(32885)),C=i(a(8745)),y=i(a(32692));class b extends l.Component{constructor(e){super(e),this._setWrapperRef=e=>{this._wrapperRef=e},this._setGalleryMsgRef=e=>{this._galleryMsgRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.handleSelectionChange=(e,t)=>{var a="focus"===e;if(a){var r=this._hotKeysRef;r&&(h.default.focus(r),t&&(0,c.scrollIntoViewIfNeeded)(r))}this.setState({current:a})},this.handleActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(h.default.focus(a),t&&(0,c.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.handleEnter=e=>{e.stopPropagation(),e.preventDefault(),this.props.onClickMsg&&this.props.onClickMsg(this.props.msg)},this.openContextMenu=()=>{this._wrapperRef&&this._wrapperRef.openContextMenu()},this.handleFocus=()=>{this.setState({focus:!0}),this.indicateFocus()},this.handleBlur=()=>{this.setState({focus:!1})},this.indicateFocus=()=>{var e;null===(e=this._galleryMsgRef)||void 0===e||e.indicateFocus()},this.getWrapperRef=()=>this._wrapperRef;var{currSelection:t,activeSelection:a,msg:r}=e;this.state={hover:!1,current:!!t&&t.value===r,active:!!a&&a.value===r,focus:!1}}componentDidMount(){var{msg:e,currSelection:t,activeSelection:a,listeners:r}=this.props;t&&r.add(t,e.id.toString(),this.handleSelectionChange),a&&r.add(a,e.id.toString(),this.handleActiveChange)}getContainerElement(){return(0,s.default)(this._hotKeysRef,"this._hotKeysRef")}render(){var{msg:e,selectedMessages:t,displayType:a}=this.props,r=e.senderObj.formattedName,i=e.chat.isUser?d.default.assertGet(e.to).formattedName?d.default.assertGet(e.to).formattedName:(0,C.default)(e.to):e.chat.title(),s=a===o.default.DISP_TYPE.GALLERY?null:l.default.createElement("div",{className:E.default.title},l.default.createElement("div",{className:E.default.titleMain},l.default.createElement("div",{className:E.default.avatar},l.default.createElement(u.default,{id:e.senderObj.id,size:26})),l.default.createElement(f.default,{className:E.default.author,text:r,direction:"auto",titlify:!0}),l.default.createElement("span",{className:E.default.divider}),l.default.createElement(f.default,{className:E.default.chat,text:i,direction:"auto",titlify:!0})),l.default.createElement("div",{className:E.default.meta,dir:"auto"},n.default.relativeStr(e.t)),l.default.createElement("div",{className:E.default.chevron},l.default.createElement(S.default,{name:"chevron-right-alt",directional:!0}))),c={enter:this.handleEnter};c[_.default.LR("right","left")]=this.openContextMenu;var h=this.props.selectable||this.state.hover&&a===o.default.DISP_TYPE.GALLERY;return l.default.createElement(m.default,{onRef:this._setHotKeysRef,handlers:c,onFocus:this.handleFocus,onBlur:this.handleBlur},l.default.createElement(p.default,{ref:this._setGalleryMsgRef,hover:this.state.hover,current:this.state.current&&this.state.focus,active:this.state.active,onClick:()=>this.props.onClickMsg&&this.props.onClickMsg(e,t&&!t.isSelected(e)),onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},s,l.default.createElement(y.default,{msg:e,key:e.id.toString(),ref:this._setWrapperRef,current:this.state.current&&this.state.focus,displayType:a||o.default.DISP_TYPE.STARRED_MSGS,isMsgVisible:this.props.isMsgVisible,selectable:h,selectedMessages:t,onMessageSelect:this.props.onMessageSelect,position:g.MsgPosition.END,tailOverride:"left",onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick})))}}b.displayName="StarredMsg";var M=(0,v.default)(b);t.default=class extends M{getWrapperRef(){return this.getComponent().getWrapperRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},66616:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e}){var t,a,r,{ack:f,isMedia:h,isViewOnce:p,caption:m,type:_,loc:v,isLive:g}=(0,u.default)(e,["ack","isMedia","isViewOnce","caption","type","loc","isLive"]),E=h&&!m&&!p&&_!==c.AUDIO||_===c.LOCATION&&!v&&!g;f<l.default.ACK.SENT?(t="msg-time",a=n.default.t(20)):f===l.default.ACK.SENT?(t="msg-check",a=n.default.t(22)):f===l.default.ACK.RECEIVED?(t="msg-dblcheck",a=n.default.t(19)):(t="msg-dblcheck",a=n.default.t(21),r=o.default.ackBlue);return s.default.createElement(d.default,{"aria-label":` ${a} `,name:t,className:(0,i.default)(r,{[o.default.light]:E})})};var i=r(a(94184)),s=r(a(67294)),l=r(a(75444)),n=r(a(80162)),o=r(a(61871)),d=r(a(32885)),u=r(a(95607)),c=l.default.MSG_TYPE},83243:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,m.default)(e.msg,["isNewMsg","isSentByMe","isGroupMsg","senderObj","quotedMsg","ctwaContext"]);(0,l.useEffect)((()=>{t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[]);var a=e.displayAuthor?l.default.createElement("div",{className:h.default.author},l.default.createElement(n.default,{msg:t,contact:t.senderObj})):null,r=e.quotedMsg?l.default.createElement("div",{className:h.default.quote},e.quotedMsg):null,i=(0,s.default)(h.default.bubble,{[h.default.hasAuthor]:e.displayAuthor,[h.default.isFirst]:e.position===d.MsgPosition.FRONT||e.position===d.MsgPosition.SINGLE,[h.default.isTransparent]:!t.quotedMsg&&!t.ctwaContext});return l.default.createElement("div",{className:i,onClick:e=>{e.stopPropagation()}},a,r,l.default.createElement(o.default,{msg:t.unsafe(),wrapperClass:h.default.ctwaContext}),l.default.createElement("div",{className:h.default.body},l.default.createElement(p.default,{mediaData:e.mediaData,msg:t},l.default.createElement(f.default,{mediaData:e.mediaData,theme:"conversation",isNewMsg:t.isNewMsg,downloadMedia:()=>t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),forwardRef:e.forwardRef,animateOnView:e.animateOnView})),l.default.createElement("div",{className:h.default.meta},l.default.createElement(u.default,{msg:t}))))};var s=i(a(94184)),l=r(a(67294)),n=i(a(28745)),o=i(a(49218)),d=a(53348),u=i(a(62181)),c=i(a(72462)),f=i(a(89886)),h=i(a(92269)),p=i(a(91894)),m=i(a(95607))},91894:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{msg:r}=e,i=(0,p.default)(e.mediaData,["mediaStage","size"]),m=()=>{n.default.openModal(l.default.createElement(o.default,{msg:r.unsafe()}))},{mediaStage:_}=i;switch(_){case u.MEDIA_DATA_STAGE.RESOLVED:t=null,a=null;break;case u.MEDIA_DATA_STAGE.FETCHING:t=()=>{r.cancelDownload()},a=l.default.createElement(d.Pending,{cancelable:!0});break;case u.MEDIA_DATA_STAGE.NEED_POKE:t=()=>{r.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},a=l.default.createElement(d.Download,{filesize:i.size});break;case u.MEDIA_DATA_STAGE.UPLOADING:t=()=>{r.cancelUpload()},a=l.default.createElement(d.Pending,{cancelable:!0});break;case u.MEDIA_DATA_STAGE.NEED_UPLOAD:t=()=>{r.resumeUpload()},a=l.default.createElement(d.Upload,{filesize:i.size});break;case u.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:t=()=>{r.resumeRemoteUpload()},a=l.default.createElement(d.Upload,{filesize:i.size});break;case u.MEDIA_DATA_STAGE.ERROR_MISSING:t=m,a=l.default.createElement(d.Upload,{filesize:i.size});break;case u.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:t=m,a=l.default.createElement(d.Download,{filesize:i.size});break;case u.MEDIA_DATA_STAGE.SENDING:case u.MEDIA_DATA_STAGE.DECRYPTING:case u.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case u.MEDIA_DATA_STAGE.INIT:case u.MEDIA_DATA_STAGE.PREPARING:case u.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case u.MEDIA_DATA_STAGE.REUPLOADING:case u.MEDIA_DATA_STAGE.EXISTS:a=l.default.createElement(d.Pending,null);break;case u.MEDIA_DATA_STAGE.PROGRESSIVE_READY:throw new Error(`invalid value for sticker mediaStage '${_}'`)}return l.default.createElement("div",{className:(0,s.default)(f.default.thumb,h.default.cursorAuto),onClick:t},a,e.children)};var s=i(a(94184)),l=i(a(67294)),n=i(a(33766)),o=i(a(22039)),d=r(a(73616)),u=a(85063),c=i(a(72462)),f=i(a(7603)),h=i(a(5138)),p=i(a(95607))},27420:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(20923)),n=r(a(47336)),o=r(a(4328)),d=a(32692);class u extends s.PureComponent{constructor(...e){super(...e),this.state={date:void 0,visible:!0}}updateDateMarkerText(e){this.setState({date:e})}setVisibility(e){this.setState({visible:e})}render(){var e;return this.state.date&&this.state.visible&&(e=s.default.createElement("div",{className:n.default.sticky},s.default.createElement(d.SystemBubble,{theme:"sticky"},s.default.createElement(l.default,{direction:"auto",text:this.state.date})))),s.default.createElement(o.default,{transitionName:"slide-down-date"},e)}}t.default=u,u.displayName="StickyDateMarker"},57179:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,{msg:r,link:u,displayType:c}=e;if(!r&&!u)return null;if(null==r||null===(t=r.ctwaContext)||void 0===t?void 0:t.isSuspiciousLink)a=n.default.t(1548);else if(u)u.suspiciousCharacters&&u.suspiciousCharacters.size&&(a=n.default.t(1548));else if(r){var f=r.getSuspiciousLinks().length;if(f){var h=r.getLinks().length;a=1===h||c===l.default.DISP_TYPE.GALLERY?n.default.t(1548):n.default.t(1549,{count:f,_plural:f})}}return a?s.default.createElement("div",{className:(0,i.default)(o.default.container,{[o.default.isLinkMsg]:Boolean(u),[o.default.ctwaContainer]:null!=(null==r?void 0:r.ctwaContext)})},s.default.createElement(d.default,{name:"alert",display:"inline",className:o.default.icon}),s.default.createElement("span",{className:o.default.text},a)):null};var i=r(a(94184)),s=r(a(67294)),l=r(a(75444)),n=r(a(80162)),o=r(a(59976)),d=r(a(32885))},29763:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(62685)),o=i(a(33766)),d=i(a(75444)),u=r(a(1886)),c=i(a(80162)),f=a(66802),h=i(a(80896)),p=i(a(26689)),m=a(59094),_=i(a(72765)),v=a(6578),g=i(a(72682)),E=i(a(32885)),S=i(a(76368)),{QUICK_REPLY:C,URL:y,CALL:b}=d.default.TEMPLATE_BUTTON_SUBTYPE;function M(e,t){var a=(0,f.findLink)(e,!1,t.from);if(a&&a.suspiciousCharacters)return o.default.openModal(l.default.createElement(g.default,{link:a}));var r=l.default.createElement(n.default,{a8nText:"popup-controls-go",type:"primary",onClick:()=>function(e){(0,u.openExternalLink)(e),o.default.closeModal()}(e),key:0},c.default.t(1816)),i=l.default.createElement(n.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:()=>o.default.closeModal(),key:1},c.default.t(1768)),s=d.default.TEMPLATE_URL_START+d.default.TEMPLATE_URL_END;o.default.openModal(l.default.createElement(p.default,{title:c.default.t(1291),actions:[i,r]},l.default.createElement("div",null,c.default.t(1292)),l.default.createElement(u.default,{href:e,isLongTemplateUrl:e.length>s},e)))}class T extends l.PureComponent{constructor(...e){super(...e),this.handleClick=e=>{var t,{subtype:a,url:r,displayText:i,selectionId:s,id:d}=e;a===b?(t=l.default.createElement(n.default,{a8nText:"popup-controls-ok",type:"primary",onClick:()=>o.default.closeModal(),key:0},c.default.t(1941)),o.default.openModal(l.default.createElement(p.default,{actions:[t]},c.default.t(429)))):a===y&&r?M(r,this.props.msg):a===C&&(0,m.sendTextMsgToChat)(this.props.chat,i,{quotedMsg:(0,v.unproxy)(this.props.msg),selectedIndex:parseInt(d,10),selectedId:s}).then((()=>{e.selected=!0}))}}componentDidMount(){var{msg:e}=this.props;e.buttons&&e.buttons.length&&e.buttons.forEach((e=>this.props.listeners.add(e,"change:selected",(()=>this.forceUpdate()))))}render(){var e,{msg:t}=this.props;return t.buttons&&(e=t.buttons.map((e=>{var t;switch(e.subtype){case b:t=l.default.createElement(E.default,{name:"hsm-call",className:S.default.icon});break;case y:t=l.default.createElement(E.default,{name:"hsm-link",className:S.default.icon})}var a=e.selected?void 0:()=>this.handleClick(e);return l.default.createElement("button",{key:e.id,className:(0,s.default)(S.default.actionButton,{[S.default.firstButton]:0===parseInt(e.id,10)&&e.subtype!==C,[S.default.disabled]:e.selected}),onClick:a},t,l.default.createElement("span",{className:S.default.actionText},e.displayText))}))),l.default.createElement("div",{className:(0,s.default)({[S.default.quickReply]:t.isQuickReply,[S.default.callUrl]:!t.isQuickReply})},l.default.createElement("div",{className:S.default.buttonContainer},e))}}T.CONCERNS={msg:["buttons","isQuickReply","from"]},T.displayName="TemplateButtons";var I=(0,h.default)((0,_.default)(T,T.CONCERNS));t.default=I},30760:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{dir:t,footer:a,isShown:r,msg:f,rtl:h,type:p,trusted:m}=e,_=h!==d.default.isRTL();if(r&&a){var v=(0,i.default)(c.default.footer,{[c.default.isMedia]:p!==l.default.MSG_TYPE.CHAT,[c.default.dirMismatch]:_}),{formatters:g,selectable:E}=f.isDynamicReplyButtonsMsg?(0,o.enableHeaderAndFooterFormatting)(f.getFooterLinks(),!0===m):{};return s.default.createElement(u.default,{className:v,spacer:!h,msg:f},s.default.createElement(n.default,{text:a,direction:t,dirMismatch:_,selectable:E,formatters:g}))}return null};var i=r(a(94184)),s=r(a(67294)),l=r(a(75444)),n=r(a(20923)),o=a(67091),d=r(a(80162)),u=r(a(2175)),c=r(a(58606))},8247:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,trusted:a,displayType:r,quotedMsg:R}){var k,L,x,F,B;if(a&&(e.linkPreview||e.ctwaContext)){var G=w.default.supportsFeature(w.default.F.MD_BACKEND)?e.matchedText&&(0,g.isParsableYouTubeVideoUrl)(e.richPreviewType,e.matchedText,e.doNotPlayInline):e.matchedText&&(0,g.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline);if(e.ctwaContext)k=s.default.createElement(f.default,{msg:e.unsafe(),wrapperClass:N.default.linkPreview});else if(G)k=s.default.createElement("div",{className:N.default.linkPreview},s.default.createElement(D.default,{msg:e.unsafe()}));else{var U=(0,I.parseAPICmd)(e.matchedText);if(U.resultType===l.APICmd.GROUP_INVITE){if(k=s.default.createElement("div",{className:N.default.linkPreview},s.default.createElement(C.default,{msg:e.unsafe(),displayType:r,invite:!0})),r!==c.default.DISP_TYPE.GALLERY){var j=e.isSentByMe?E.default.t(896):E.default.t(872);L=s.default.createElement(n.default,{items:[{label:j,onClick:()=>{var t=e.matchedText;(0,_.openExternalLink)(t)}}]})}}else if(U.resultType===l.APICmd.CATALOG){if(k=s.default.createElement("div",{className:N.default.linkPreview},s.default.createElement(d.default,{msg:e.unsafe()})),r!==c.default.DISP_TYPE.GALLERY){var V=E.default.t(1343);L=s.default.createElement(n.default,{items:[{label:V,onClick:()=>{var t=e.matchedText;(0,_.openExternalLink)(t)}}]})}}else{var H=e.asUrl;if(H){var W;if((0,S.displayHighQualityLinkPreview)(e.unsafe())&&null!=H.thumbnailHeight&&null!=H.thumbnailWidth){var Y=H.thumbnailHeight/H.thumbnailWidth;x=Y>=1?"portrait":"landscape",W="high-quality"}k=s.default.createElement("div",{className:N.default.linkPreview},s.default.createElement(C.default,{msg:e.unsafe(),displayType:r,theme:W}))}}}}e.nativeFlowButtons&&(L=s.default.createElement(n.default,{items:e.nativeFlowButtons.map((e=>{var t,a;return{label:null!==(t=null===(a=e.buttonText)||void 0===a?void 0:a.displayText)&&void 0!==t?t:"",onClick:()=>{}}}))}));var K,q,z=h.default.matchLargeEmojiPattern(e.body);if(z){var $=1===z.length&&h.default.getHeartEmojis().some((e=>h.default.normalizeEmoji(e)===h.default.normalizeEmoji(z[0])));F=s.default.createElement(T.default,{animation:$,emojis:z}),B=!0}else{F=s.default.createElement(m.default,{text:e.body,textLimit:e.initialPageSize},(({textLimit:t})=>{var i=(0,u.Conversation)({mentions:e.mentionMap(),links:e.getLinks(t),selectable:true,trusted:!0===a});return s.default.createElement(p.default,{text:e.body,className:r===c.default.DISP_TYPE.GALLERY?"message-text-link":"",dirMismatch:e.rtl!==E.default.isRTL(),direction:e.dir,inferLinesDirection:!0,formatters:i,selectable:true,textLimit:t})}))}if(e.supportsMessageFooter){var{formatters:Q,selectable:X}=e.isDynamicReplyButtonsMsg?(0,v.enableHeaderAndFooterFormatting)(e.getHeaderLinks(),!0===a):{};K=e.title?s.default.createElement("div",{className:N.default.title},s.default.createElement(p.default,{text:e.title,dirMismatch:e.rtl!==E.default.isRTL(),direction:e.dir,selectable:X,formatters:Q})):null,q=s.default.createElement(A.default,{dir:e.dir,footer:e.footer,isShown:e.supportsMessageFooter,msg:e.unsafe(),rtl:e.rtl,trusted:a,type:e.type})}var J,Z=r!==c.default.DISP_TYPE.GALLERY&&!e.isPSA&&!B;R&&(J=s.default.createElement("div",{className:N.default.quote},R));var ee,te=(0,M.showForwarded)(e),ae=e.getSuspiciousLinks().length>0,re=!!L||!!e.hasTemplateButtons||!!e.isDynamicReplyButtonsMsg;re&&(ee=s.default.createElement("div",{className:N.default.meta},s.default.createElement(b.default,{msg:e})));return s.default.createElement(O.default,{msg:e,displayType:r,displayAuthor:t,hideMeta:re,theme:x},s.default.createElement(o.default,{className:(0,i.default)({[N.default.hasAuthor]:t,[N.default.forwarded]:te,[N.default.hasSuspiciousLinks]:ae}),contact:e.senderObj,msg:e.unsafe()},J,!e.ctwaContext&&s.default.createElement(P.default,{msg:e.unsafe(),displayType:r}),k,s.default.createElement(y.default,{msg:e.unsafe(),spacer:e.isFromTemplate||e.isDynamicReplyButtonsMsg?Z&&!e.footer:Z,"data-id":e.id},K,F,q,ee),L))};var i=r(a(94184)),s=r(a(67294)),l=a(83990),n=r(a(28553)),o=r(a(18328)),d=r(a(1723)),u=a(79027),c=r(a(75444)),f=r(a(49218)),h=r(a(5318)),p=r(a(20923)),m=r(a(36868)),_=a(1886),v=a(67091),g=a(1697),E=r(a(80162)),S=a(29700),C=r(a(33089)),y=r(a(2175)),b=r(a(62181)),M=a(86146),T=r(a(66363)),I=a(86270),P=r(a(57179)),A=r(a(30760)),N=r(a(52246)),O=r(a(188)),D=r(a(51765)),w=r(a(77188))},188:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(c.default.bubble,{[c.default.isPSA]:e.msg.isPSA,[c.default.portrait]:"portrait"===e.theme,[c.default.landscape]:"landscape"===e.theme}),a=!1!==e.displayAuthor&&(!e.msg.isSentByMe&&e.msg.isGroupMsg)?s.default.createElement(l.default,{msg:e.msg,contact:e.msg.senderObj}):null,r=(0,u.showForwarded)(e.msg)?s.default.createElement(o.default,{msg:e.msg.unsafe()}):null,f=e.displayType===n.default.DISP_TYPE.GALLERY||e.hideMeta?null:s.default.createElement("div",{className:c.default.meta},s.default.createElement(d.default,{msg:e.msg}));return s.default.createElement("div",{className:t},a,r,e.children,f)};var i=r(a(94184)),s=r(a(67294)),l=r(a(28745)),n=r(a(75444)),o=r(a(43369)),d=r(a(62181)),u=a(86146),c=r(a(20562))},72304:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement("div",{className:s.default.shade})};var i=r(a(67294)),s=r(a(45613))},31351:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayTheme=void 0;var r=a(54302).Mirrored(["Album"]);t.DisplayTheme=r},20666:()=>{},60620:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(80162)),n=a(21725),o=r(a(38537));t.default=({count:e,textContainerRef:t})=>{var a=l.default.t(1579,{count:l.default.n(e),_plural:e});return s.default.createElement("div",{className:(0,i.default)(o.default.msgUnread,n.LIST_FOCUSABLE_ITEM_CLASS_NAME),ref:t,tabIndex:-1},s.default.createElement("span",{className:o.default.msgUnreadBody,"aria-live":"polite"},a))}},38196:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,displayType:a,hideUpdateButton:r=!1}){return s.default.createElement(c.default,{msg:e,displayAuthor:t},s.default.createElement(u.default,{iconName:"unknown",msg:e.unsafe()},(0,o.default)(e.unsafe())," ",r?null:function(e){if(m.default.supportsFeature(m.default.F.MD_BACKEND)&&"fanout"===e.subtype)return null;var t=null;!e.isSentByMe&&e.subtype||(t=s.default.createElement("span",{className:h.default.action,role:"button",onClick:_},d.default.t(1592)));return t}(e)))};var s=i(a(67294)),l=a(34194),n=i(a(33766)),o=(i(a(75444)),i(a(76818))),d=i(a(80162)),u=i(a(72002)),c=i(a(188)),f=r(a(48847)),h=i(a(69817)),p=i(a(61312)),m=i(a(77188));function _(){n.default.openToast(s.default.createElement(f.default,{msg:d.default.t(1604),id:(0,f.genId)()})),p.default.update().then((e=>{e===l.DownloadState.UPDATE_NOT_AVAILABLE?(__LOG__(3)`Got unsupported message but no newer release found`,n.default.openToast(s.default.createElement(f.default,{msg:d.default.t(1271),id:(0,f.genId)()}))):e===l.DownloadState.UPDATE_DOWNLOADED?p.default.restart():__LOG__(3)`Got unsupported message but updater errored`}))}window.updater=p.default},56801:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(39138)),n=i(a(94184)),o=r(a(67294)),d=i(a(43379)),u=i(a(28745)),c=i(a(28553)),f=i(a(18328)),h=i(a(33766)),p=i(a(51115)),m=i(a(75444)),_=i(a(62899)),v=i(a(45066)),g=i(a(49218)),E=i(a(20923)),S=i(a(61900)),C=a(77824),y=a(99375),b=i(a(80162)),M=i(a(22039)),T=a(85063),I=i(a(62181)),P=i(a(43395)),A=i(a(44563)),N=i(a(72765)),O=a(6578),D=i(a(74512)),w=i(a(32885)),R=i(a(21628)),k=i(a(18082)),L=a(54865),x=i(a(61525));class F extends o.Component{constructor(...e){super(...e),this.handleMessageClick=e=>{var{vcard:t}=this.props;if(t){var a=(0,L.vcardWids)(t),r=(0,L.vcardIsBiz)(t);a.length>1?h.default.openModal(o.default.createElement(x.default,{icon:o.default.createElement(w.default,{name:"chat",className:k.default.icon,directional:!0}),vcard:t,onCancel:()=>h.default.closeModal(),onSelect:t=>this.openContactChat(t,e,r)})):a.length>0&&this.openContactChat(a[0],e,r)}},this.openContactChat=(e,t)=>{(0,C.findChat)(e).then((e=>{this.props.onMessageClick&&this.props.onMessageClick(),h.default.closeModal(),h.default.openChatFromUnread(e).then((r=>{if(r){if(t){var i=a(53150).default;h.default.openDrawerRight(o.default.createElement(i,{chat:e,key:`info-${e.id.toString()}`}),"slide-left",R.default.Manager.top)}h.default.focusChatTextInput(e)}}))}))},this.handleViewContact=()=>{var{msg:e,vcard:t}=this.props;t?h.default.openModal(o.default.createElement(v.default,{vcard:t})):h.default.openModal(o.default.createElement(p.default,{onCancel:()=>h.default.closeModal(),onOK:()=>{h.default.closeModal(),S.default.initDownload((0,O.unproxy)(e.unsafe()))},okText:b.default.t(1764),cancelText:b.default.t(1768),title:b.default.t(695)},b.default.t(694)))},this._handleAddToGroupClick=()=>{var e=(0,L.vcardWids)(this.props.vcard),{vcard:t}=this.props;e.length>1&&t?h.default.openModal(o.default.createElement(x.default,{icon:o.default.createElement(w.default,{name:"add-user",directional:!0}),vcard:t,onCancel:()=>h.default.closeModal(),onSelect:this._addContactToGroup})):e.length>0&&this._addContactToGroup(e[0])},this._showMediaMissing=()=>{h.default.openModal(o.default.createElement(M.default,{msg:this.props.msg.unsafe()}))},this._getBubbleActionItems=(e,t)=>{var a={label:b.default.t(1113),onClick:()=>this.handleMessageClick(!1),title:e?b.default.t(1116,{author:e}):b.default.t(1113)};return t?[a,{label:b.default.t(1635),onClick:()=>this.handleMessageClick(!0)}]:[a,{label:b.default.t(217),onClick:this._handleAddToGroupClick}]}}_addContactToGroup(e){_.default.find(e).then((e=>{h.default.openModal(o.default.createElement(d.default,{contact:e,pushTransition:"none",popTransition:"none"}),{transition:"modal-flow"})}))}render(){var e,t,a,{downloadMedia:r,mediaStage:i,msg:d,vcard:h}=this.props;if(h){e=(0,L.vcardWids)(h);var p=d.type===m.default.MSG_TYPE.VCARD?d.vcardFormattedName:null;t=(0,l.default)(p||(0,L.vcardGetNameFromParsed)(h)||b.default.t(252),{length:120,omission:b.default.t(1376)}),e.length>0&&(a=o.default.createElement(c.default,{items:this._getBubbleActionItems(t,(0,L.vcardIsBiz)(h))}))}var _=this.props.displayAuthor?o.default.createElement("div",{className:k.default.author},o.default.createElement(u.default,{msg:d,contact:d.senderObj})):null,v=this.props.quotedMsg?o.default.createElement("div",{className:k.default.quote},this.props.quotedMsg):null,S=(0,n.default)(k.default.bubble,{[k.default.hasAuthor]:_,[k.default.hasQuote]:v,[k.default.isPreview]:this.props.displayType===m.default.DISP_TYPE.MSG_INFO,[k.default.isGallery]:this.props.displayType===m.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===m.default.DISP_TYPE.CONTACT_CARD||this.props.displayType===m.default.DISP_TYPE.GALLERY}),C=d.type===m.default.MSG_TYPE.DOCUMENT&&d.isVcardOverMmsDocument&&i===T.MEDIA_DATA_STAGE.ERROR_MISSING,M=C||!this.props.placeholder&&(h||d.chat.isTrusted()),N=M?C?this._showMediaMissing:this.handleViewContact:()=>{},O=y.Configuration.Compatibility({selectable:true}),D=this.props.placeholder?o.default.createElement(B,{downloadMedia:r,mediaStage:i}):o.default.createElement(P.default,{size:49,thumb:(0,L.vcardThumbnail)(h),wid:A.default.getThumbnailWidFromVcard(h)}),w=this.props.placeholder?o.default.createElement(G,{mediaStage:i}):o.default.createElement(E.default,{text:t,element:"div",className:k.default.name,selectable:true,dirMismatch:d.rtl!==b.default.isRTL(),direction:d.dir,formatters:O});return this.props.placeholder&&(a=i===T.MEDIA_DATA_STAGE.ERROR_MISSING?o.default.createElement(c.default,{items:this._getBubbleActionItems().map((e=>(0,s.default)((0,s.default)({},e),{},{onClick:this._showMediaMissing})))}):o.default.createElement(c.default,{items:[],placeholder:!0})),o.default.createElement(f.default,{className:S,contact:d.senderObj,msg:d.unsafe()},_,v,o.default.createElement(g.default,{msg:d.unsafe(),wrapperClass:k.default.ctwaContext}),o.default.createElement("div",{className:k.default.vcard,role:M?"button":null,onClick:N},o.default.createElement("div",{className:k.default.avatar},D),o.default.createElement("div",{className:k.default.body},w),o.default.createElement("div",{className:k.default.meta},o.default.createElement(I.default,{msg:d}))),a)}}function B(e){var{downloadMedia:t,mediaStage:a}=e;if(!a)return o.default.createElement(j,{downloadMedia:t});switch(a){case T.MEDIA_DATA_STAGE.NEED_POKE:case T.MEDIA_DATA_STAGE.INIT:return o.default.createElement(j,{downloadMedia:t});case T.MEDIA_DATA_STAGE.FETCHING:case T.MEDIA_DATA_STAGE.REUPLOADING:case T.MEDIA_DATA_STAGE.DECRYPTING:return o.default.createElement(U,{animate:!0,type:"profileImage"});case T.MEDIA_DATA_STAGE.RESOLVED:return o.default.createElement(U,{type:"profileImage"});case T.MEDIA_DATA_STAGE.ERROR_MISSING:return o.default.createElement(j,{downloadMedia:()=>{}});default:return o.default.createElement(U,{animate:!0,type:"profileImage"})}}function G(e){var{mediaStage:t}=e;if(!t)return o.default.createElement(U,{type:"body"});switch(t){case T.MEDIA_DATA_STAGE.NEED_POKE:case T.MEDIA_DATA_STAGE.INIT:return o.default.createElement(U,{type:"body"});case T.MEDIA_DATA_STAGE.FETCHING:case T.MEDIA_DATA_STAGE.REUPLOADING:case T.MEDIA_DATA_STAGE.DECRYPTING:return o.default.createElement(U,{animate:!0,type:"body"});case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.ERROR_MISSING:default:return o.default.createElement(U,{type:"body"})}}function U(e){var{animate:t,type:a}=e,r=[k.default.placeholder,"profileImage"===a?k.default.placeholderImage:k.default.placeholderText,t?k.default.placeholderAnimation:null].filter(Boolean);return o.default.createElement("div",{className:(0,n.default)(r)})}function j(e){var{downloadMedia:t}=e;return o.default.createElement(D.default,{"aria-label":b.default.t(1764),name:"audio-download",className:k.default.vcardDownloadStageIcon,onClick:()=>{t&&t()}})}F.CONCERNS={msg:["vcardFormattedName","rtl","dir","isSentByMe","isGroupMsg","senderObj","chat","isVcardOverMmsDocument","type"]},F.displayName="Vcard";var V=(0,N.default)(F,F.CONCERNS);t.default=V},41169:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{displayAuthor:a,displayType:r,onMessageClick:i,msg:p}=e,m=(0,c.default)(e.mediaData,["mediaBlob","mediaStage","parsedVcards","size"]),_=()=>{p.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:o.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})};(0,s.useEffect)((()=>{p.isTrusted()&&m.size<=1024*u.default.mmsVcardAutodownloadSizeKb&&_()}),[]);var v=(0,n.default)((({parsedVcards:e})=>e?e.map((e=>({parsedVcard:e,displayName:(0,h.vcardGetNameFromParsed)(e)||l.default.t(252),isMultiVcard:!1,vcard:""}))):[])),{parsedVcards:g}=m;if(g)return g.length>1?s.default.createElement(d.default,{msg:p,vcardList:v({parsedVcards:g}),quotedMsg:e.getQuotedMsg(),displayType:r,displayAuthor:a}):s.default.createElement(f.default,{msg:p,vcard:g[0],quotedMsg:e.getQuotedMsg(),displayType:r,displayAuthor:a,onMessageClick:i});return s.default.createElement(f.default,{mediaStage:null===(t=p.mediaData)||void 0===t?void 0:t.mediaStage,msg:p,vcard:null,quotedMsg:e.getQuotedMsg(),displayType:r,displayAuthor:a,onMessageClick:i,downloadMedia:p.isTrusted()?_:null,placeholder:!0})};var s=i(a(67294)),l=(r(a(75444)),r(a(80162))),n=r(a(47826)),o=r(a(72462)),d=r(a(84950)),u=r(a(43232)),c=r(a(95607)),f=r(a(56801)),h=a(54865)},78992:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(94184)),n=r(a(67294)),o=i(a(28745)),d=i(a(18328)),u=i(a(12196)),c=i(a(44386)),f=i(a(33766)),h=i(a(75444)),p=a(29875),m=i(a(49218)),_=i(a(43369)),v=i(a(77188)),g=i(a(80162)),E=i(a(80896)),S=a(13162),C=a(31351),y=i(a(22039)),b=r(a(73616)),M=a(85063),T=i(a(23843)),I=i(a(62181)),P=i(a(72462)),A=a(86146),N=r(a(73520)),O=i(a(88799)),D=i(a(84816)),w=i(a(72765)),R=a(6578),k=i(a(32885)),L=i(a(30760)),x=i(a(72304)),F=a(96769),B=i(a(97439)),G=i(a(14825)),U="PREVIEW",j="FLOATER";function V(e){e.stopPropagation()}class H extends n.PureComponent{constructor(e){super(e),this._setRefThumb=e=>{this._refThumb=e},this.showMediaMissing=()=>{f.default.openModal(n.default.createElement(y.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:P.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),f.default.openModal(n.default.createElement(T.default,{msg:(0,R.unproxy)(this.props.msg.unsafe())}))},this.launchMediaViewer=e=>{if(e&&e.stopPropagation(),this.props.theme===C.DisplayTheme.Album){var t=this.props.zoomMsg||this.props.msg,a=new Set((this.props.albumMsgs||[]).map((e=>e.id.toString())));f.default.mediaViewerModal({msg:(0,R.unproxy)(t.unsafe()),highlightedMsgIds:a})}else f.default.mediaViewerModal({msg:(0,R.unproxy)(this.props.msg.unsafe())})},this._launchVideoFloater=e=>{e&&e.stopPropagation();var t=this._refThumb?this._refThumb.getBoundingClientRect():null;O.default.openPiP((0,R.unproxy)(this.props.msg.unsafe()),0,t)},this.setPreviewMode=()=>{this.state.mode!==U&&this.setState({mode:U})},this.setFloaterMode=()=>{this.state.mode!==j&&this.setState({mode:j})};var t=O.default.isOpened((0,R.unproxy)(e.msg.unsafe()))?j:U;this.state={mode:t}}componentDidMount(){var{listeners:e,msg:t}=this.props;e.add(O.default,`${t.id.toString()}_pip_did_open`,this.setFloaterMode),e.add(O.default,`${t.id.toString()}_pip_did_close`,this.setPreviewMode),v.default.supportsFeature(v.default.F.MEDIA_EXISTENCE_CHECK)&&(0,S.checkExistence)((0,R.unproxy)(t)),v.default.supportsFeature(v.default.F.HIGH_QUALITY_VIDEO_THUMBNAILS)&&(0,S.downloadVideoThumbnail)({msg:(0,R.unproxy)(t)})}render(){var e,t,{msg:a,mediaData:r,theme:i,overlayContent:f,displayType:v,displayAuthor:E}=this.props,S=null,y=null;switch(r.mediaStage){case M.MEDIA_DATA_STAGE.RESOLVED:case M.MEDIA_DATA_STAGE.INIT:case M.MEDIA_DATA_STAGE.EXISTS:S=n.default.createElement(b.Play,null),y=this.launchMediaViewer;break;case M.MEDIA_DATA_STAGE.NEED_POKE:S=n.default.createElement(b.Download,{filesize:r.size}),y=this.downloadMedia;break;case M.MEDIA_DATA_STAGE.UPLOADING:S=n.default.createElement(b.Pending,{cancelable:!0}),y=this.cancelUpload;break;case M.MEDIA_DATA_STAGE.FETCHING:S=n.default.createElement(b.Pending,{cancelable:!0}),y=this.cancelDownload;break;case M.MEDIA_DATA_STAGE.NEED_UPLOAD:S=n.default.createElement(b.Upload,{filesize:r.size}),y=this.resumeUpload;break;case M.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:S=n.default.createElement(b.Upload,{filesize:r.size}),y=this.resumeRemoteUpload;break;case M.MEDIA_DATA_STAGE.ERROR_MISSING:y=this.showMediaMissing;break;case M.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:a.isUnsentMedia||(S=n.default.createElement(b.Download,{filesize:r.size}),y=this._downloadUnsupportedToDesktop);break;case M.MEDIA_DATA_STAGE.SENDING:a.isFailed||(S=n.default.createElement(b.Pending,null));break;case M.MEDIA_DATA_STAGE.DECRYPTING:case M.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case M.MEDIA_DATA_STAGE.PREPARING:case M.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case M.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case M.MEDIA_DATA_STAGE.REUPLOADING:S=n.default.createElement(b.Pending,null)}var T,P=parseInt(r.duration,10)?c.default.durationStr(r.duration):null,O=P?n.default.createElement("span",{className:G.default.duration},n.default.createElement("div",{className:G.default.icon},n.default.createElement(k.default,{name:"msg-video"})),P):null,w=(0,F.numCodepoints)(null!==(e=a.text)&&void 0!==e?e:"")>h.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:R,bubbleHeight:H}=(0,p.getBubbleDimension)(a.type,!1,r.aspectRatio,i,v,w),W=r.fullHeight||H,Y=r.fullWidth||R,K=(0,p.getImgStyle)(Y,W,R,H),q=null!==(t=r.fullPreviewData)&&void 0!==t?t:r.preview,z=null!=r.fullPreviewData,$=null!=q?(0,s.default)({backgroundImage:B.default.thumbAsBackgroundImage(q.url()).backgroundImage},K):void 0,Q=n.default.createElement("div",{className:(0,l.default)(G.default.thumbBody,{[G.default.thumbBodyLowQuality]:!z}),style:$}),X=E?n.default.createElement("div",{className:G.default.author},n.default.createElement(o.default,{msg:a,contact:a.senderObj})):null,J=(0,A.showForwarded)(a)&&this.props.theme!==C.DisplayTheme.Album,Z=J?n.default.createElement(_.default,{msg:a.unsafe(),className:G.default.forwardedIndicator}):null,ee=n.default.createElement(x.default,null),te=a.caption?n.default.createElement("div",{className:G.default.caption},n.default.createElement(u.default,{msg:a.unsafe(),trusted:this.props.trusted,spacer:!(a.supportsMessageFooter&&a.footer)})):null,ae=(0,l.default)(G.default.bubble,{[G.default.nonAlbumBubble]:!i||i!==C.DisplayTheme.Album,[G.default.portrait]:R<H&&(0,p.canUseCustomCropping)(a.type,i,v)}),re=(0,l.default)(ae,{[G.default.hasCaption]:te,[G.default.hasAuthor]:E,[G.default.isHover]:this.props.hover,[G.default.forwarded]:J,[G.default.isPSA]:a.isPSA,[G.default.ctwaContainerWidth]:null!=a.ctwaContext});switch(r.mediaStage){case M.MEDIA_DATA_STAGE.INIT:case M.MEDIA_DATA_STAGE.RESOLVED:T=n.default.createElement("div",{className:(0,l.default)(G.default.pipBtn,{[G.default.isHover]:!!this.props.hover})},n.default.createElement(N.default,{onClick:e=>{e&&e.stopPropagation(),this._launchVideoFloater()},theme:N.PIP_BUTTON_THEME.PREVIEW}));break;default:T=null}var ie,se=this.props.quotedMsg?n.default.createElement("div",{className:G.default.quote},this.props.quotedMsg):null;switch(this.state.mode){case U:ie=n.default.createElement(n.default.Fragment,null,T,S);break;case j:ie=n.default.createElement(D.default,{icon:n.default.createElement(k.default,{name:"video-pip-large"})},g.default.t(1329))}var le,ne=(0,l.default)(G.default.thumb,{[G.default.inAlbum]:i===C.DisplayTheme.Album});null==f&&(le=n.default.createElement("div",{className:G.default.meta},n.default.createElement(I.default,{msg:a})));var oe=n.default.createElement("div",{className:re},X,Z,se,n.default.createElement(m.default,{msg:a.unsafe(),wrapperClass:G.default.ctwaContext}),n.default.createElement("div",{ref:this._setRefThumb,className:(0,l.default)(ne,{[G.default.cursorPointer]:this.state.mode===U,[G.default.overlay]:f,[G.default.ctwaThumbWidth]:null!=a.ctwaContext}),onClick:y,style:{width:R,height:H}},null==f?ie:null,Q,ee,null==f?O:null),te,n.default.createElement(L.default,{dir:a.dir,footer:a.footer,isShown:a.supportsMessageFooter,msg:a.unsafe(),rtl:a.rtl,type:a.type,trusted:this.props.trusted}),le);return te?n.default.createElement(d.default,{contact:a.senderObj,msg:a.unsafe(),onClick:V},oe):(null!=f&&(oe=n.default.createElement("div",{className:G.default.overlayAlbumText},oe,f)),n.default.createElement("div",{onClick:V},oe))}}H.CONCERNS={msg:["ack","caption","dir","footer","gifAttribution","id","isGroupMsg","isPSA","isSentByMe","isUnsentMedia","rtl","senderObj","type","isFailed","ctwaContext","supportsMessageFooter","text"],mediaData:["aspectRatio","preview","fullPreviewData","duration","mediaStage","fullWidth","fullHeight","size"]},H.displayName="Video";var W=(0,E.default)((0,w.default)(H,H.CONCERNS));t.default=W},89849:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(52628)),l=i(a(94184)),n=r(a(67294)),o=i(a(33766)),d=i(a(75444)),u=a(27387),c=i(a(20923)),f=r(a(1886)),h=i(a(77188)),p=i(a(80162)),m=a(29700),_=i(a(80896)),v=r(a(73616)),g=i(a(88799)),E=i(a(84816)),S=a(6578),C=i(a(32885)),y=r(a(48847)),b=i(a(97439)),M=i(a(25609)),T=i(a(41956)),I=i(a(35822)),P="PREVIEW",A="FLOATER",N=[d.default.HOSTNAME.YOUTUBE,d.default.HOSTNAME.YOUTUBE_MOBILE,d.default.HOSTNAME.YOUTUBE_SHORTENED];class O extends n.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==P&&this.setState({mode:P})},this.setFloaterMode=()=>{this.state.mode!==A&&this.setState({mode:A})},this.parseYoutubeVideoId=e=>{for(var t=u.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE,a=null,r=0;r<t.length;r++){var i=b.default.withoutWww(e).match(t[r]);if(i){a=i[1];break}}return a},this.parseYoutubeVideoStartTime=e=>{var t=e.split("?");if(2!==t.length)return 0;var a=t[1],r=new M.default(a).get(u.YOUTUBE_URL_TIME_PARAM_NAME);if(!r)return 0;var i=r.match(u.YOUTUBE_URL_TIME_PARAM_PATTERN),s=0;if(i&&i.length)for(var l=1;l<i.length;l++){var n=i[l];if(n){var o=parseInt(n,10);if(isNaN(o))return 0;n.endsWith("h")&&(s+=3600*o),n.endsWith("m")&&(s+=60*o),n.endsWith("s")&&(s+=o),/^\d+$/.test(n)&&(s+=o)}}return s};var t=g.default.isOpened((0,S.unproxy)(e.msg))?A:P;this.state={mode:t}}componentDidMount(){this.props.listeners.add(g.default,`${this.props.msg.id.toString()}_pip_did_open`,this.setFloaterMode),this.props.listeners.add(g.default,`${this.props.msg.id.toString()}_pip_did_close`,this.setPreviewMode)}render(){var e=this.props.msg.description?n.default.createElement("div",{className:T.default.description,title:this.props.msg.description},n.default.createElement(c.default,{text:this.props.msg.description})):null,t=b.default.hostname(this.props.msg.canonicalUrl||this.props.msg.matchedText);(t=b.default.withoutWww(t))===d.default.HOSTNAME.YOUTUBE_SHORTENED&&(t=d.default.HOSTNAME.YOUTUBE);var a,r=n.default.createElement("div",{className:T.default.source},n.default.createElement(c.default,{text:t})),i=(0,l.default)(T.default.body,{[T.default.noThumb]:!this.props.msg.thumbnail}),u=(0,m.hqLinkPreviewSupported)(this.props.msg),_=u&&this.props.msg.thumbnailHQ?this.props.msg.thumbnailHQ:this.props.msg.thumbnail;if(this.state.mode===P)switch(t){case d.default.HOSTNAME.YOUTUBE:case d.default.HOSTNAME.YOUTUBE_MOBILE:var S=this.parseYoutubeVideoId(this.props.msg.matchedText);if(S){var M=this.parseYoutubeVideoStartTime(this.props.msg.matchedText);a=e=>{e&&e.stopPropagation(),g.default.openYoutubePiP(S,this.props.msg,M,this.getThumbnailWrapperRect())}}break;case d.default.HOSTNAME.INSTAGRAM:case d.default.HOSTNAME.STREAMABLE:case d.default.HOSTNAME.FACEBOOK:case d.default.HOSTNAME.FBWATCH:case d.default.HOSTNAME.FBWATCH_ALT:case d.default.HOSTNAME.LASSOVIDEOS:case d.default.HOSTNAME.LASSO_SHORTENED:case d.default.HOSTNAME.SHARECHAT:h.default.supportsFeature(h.default.F.VIDEO_PLAYBACK_URL)&&(a=()=>{g.default.openOgVideoPiP("",_,this.props.msg,0,this.getThumbnailWrapperRect());var e=b.default.build(this.props.msg.matchedText,{wa_logging_event:"video_play_open"});I.default.queryVideoPlaybackUrl(e).then((e=>{if(g.default.isOpened(this.props.msg)){if(!e.url)throw new Error("Url is missing in response.");g.default.openOgVideoPiP(e.url,_,this.props.msg,0,null)}})).catch((e=>{__LOG__(3)`handlePiPLauncherClick: queryVideoPlaybackUrl has failed with error ${e}`,g.default.closeOgVideoPiP(),o.default.openToast(n.default.createElement(y.default,{id:(0,y.genId)(),msg:p.default.t(1327),action:{actionText:p.default.t(1328),onAction:()=>{(0,f.openExternalLink)(this.props.msg.matchedText)}}}))}))});break;default:return null}var O,D,w=(0,l.default)(T.default.preview,{[T.default.bubbleIn]:!this.props.msg.isSentByMe,[T.default.bubbleOut]:this.props.msg.isSentByMe}),R=this.state.mode===P?n.default.createElement("div",{className:T.default.mediaStateControlsWrapper},n.default.createElement(v.Play,null)):null,k=this.state.mode===A?n.default.createElement(E.default,{icon:n.default.createElement(C.default,{name:"video-pip-large"})},p.default.t(1329)):null;if(_&&(0,s.default)(d.default.HOSTNAME).includes(t)){var L,x=function(e){return N.includes(e)}(t);switch(O=n.default.createElement("img",{alt:"",className:(0,l.default)(T.default.thumbnail,{[T.default.youtubeThumbnail]:x,[T.default.noBlur]:x&&h.default.supportsFeature(h.default.F.YOUTUBE_VIDEO_PREVIEW_WITHOUT_BLUR)||u&&!!this.props.msg.thumbnailHQ}),src:`data:image/jpeg;base64,${_}`}),t){case d.default.HOSTNAME.YOUTUBE:L=n.default.createElement(C.default,{name:"logo-youtube"});break;case d.default.HOSTNAME.INSTAGRAM:L=n.default.createElement(C.default,{name:"logo-instagram"});break;case d.default.HOSTNAME.FACEBOOK:L=n.default.createElement(C.default,{name:"logo-facebook"});break;case d.default.HOSTNAME.LASSOVIDEOS:L=n.default.createElement(C.default,{name:"logo-lasso"})}L&&(D=n.default.createElement("div",{className:T.default.attribution},L))}else O=n.default.createElement("div",{className:T.default.thumbnailPlaceholder});return n.default.createElement("div",{className:w},n.default.createElement("div",{ref:this.setRefThumbnailWrapper,className:T.default.thumbnailWrapper,onClick:a},D,O,R,k),n.default.createElement(f.default,{className:i,href:this.props.msg.matchedText},n.default.createElement("div",{className:T.default.title,title:this.props.msg.title},n.default.createElement(c.default,{text:this.props.msg.title})),e,r))}}O.displayName="VideoLinkPreview";var D=(0,_.default)(O);t.default=D},51765:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(7760)),n=a(29700),o=r(a(95607)),d=r(a(89849));function u(e){var t=(0,o.default)(e.msg,["thumbnailHQ","asUrl","isSentByMe"]);return(0,s.useEffect)((()=>{var e=t.asUrl;e&&(0,n.hqLinkPreviewSupported)(t)&&!e.thumbnailHQ&&(0,l.default)({msg:e,isPreload:!1})}),[t]),s.default.createElement(d.default,{msg:t.unsafe()})}var c=(0,s.memo)(u);t.default=c},5917:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(46050);var s=i(a(94184)),l=r(a(67294)),n=(i(a(56720)),i(a(55847))),o=i(a(33766)),d=i(a(51115)),u=(i(a(75444)),i(a(71394))),c=a(57909),f=i(a(80162)),h=a(85063),p=i(a(33302)),m=i(a(2175)),_=i(a(62181)),v=i(a(72462)),g=a(6578),E=i(a(74512)),S=i(a(32885)),C=a(38245),y=i(a(188)),b=i(a(32759)),M=i(a(95607)),T=i(a(47833)),I=i(a(93164)),P=a(69754),A={buttonContainer:{position:"i14x6aek",display:"fwy6kijg",alignItems:"nq8wg1g6",minWidth:"sz7odi27",height:"tlz251xi",color:"tqnj7okb",textAlign:"iv7yafs8",cursor:"obqxa8fb"}};function N(e){e.stopPropagation(),e.preventDefault()}function O({displayAuthor:e,displayType:t,mediaData:a,msg:r,trusted:i,quotedMsg:O},D){var{mediaStage:w,size:R}=(0,M.default)(a,["mediaStage","size"]),k=(0,M.default)(r,["ack","isGroupMsg","isFailed","isPSA","isSentByMe","senderObj","type"]),L=function(e,t){return(0,l.useMemo)((()=>{var a=t.type===h.OUTWARD_TYPES.IMAGE,r=a?f.default.t(1644):f.default.t(1651);if((0,P.isViewed)(t))return{type:"complete",icon:l.default.createElement(S.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:f.default.t(1652),labelClassname:T.default.labelInactive};if((0,P.isExpired)(t)&&!t.isSentByMe)return{type:"unviewed",icon:l.default.createElement(S.default,{className:(0,s.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once"}),handleClick:()=>{var e=t.senderObj.displayName,r=a?f.default.t(1640):f.default.t(1641),i=a?f.default.t(1638,{name:e}):f.default.t(1639,{name:e});o.default.openModal(l.default.createElement(d.default,{onOK:()=>o.default.closeModal()},l.default.createElement(c.FlexColumn,null,l.default.createElement(C.TextHeader,{className:T.default.dialogTitle,theme:"popup-title"},r),l.default.createElement(C.TextParagraph,{color:"secondary"},i))))},label:r};switch(e){case h.MEDIA_DATA_STAGE.RESOLVED:case h.MEDIA_DATA_STAGE.PROGRESSIVE_READY:return t.isSentByMe?{type:"complete",icon:l.default.createElement(S.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:r,labelClassname:T.default.labelActive}:{type:"unviewed",icon:l.default.createElement(S.default,{className:(0,s.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once"}),handleClick:function(){o.default.mediaViewerModal({msg:(0,g.unproxy)(t.unsafe())})},label:r};case h.MEDIA_DATA_STAGE.FETCHING:return t.isSentByMe?{type:"complete",icon:l.default.createElement(S.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:r,labelClassname:T.default.labelActive}:{type:"unviewed",icon:l.default.createElement(I.default,null),handleClick:e=>{N(e),t.cancelDownload()},label:r};case h.MEDIA_DATA_STAGE.NEED_POKE:return{type:"unviewed",icon:l.default.createElement(S.default,{className:(0,s.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-download"}),handleClick:e=>{N(e),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},label:r};case h.MEDIA_DATA_STAGE.UPLOADING:return{type:"complete",icon:l.default.createElement(I.default,{onClick:e=>{N(e),t.cancelUpload()}}),label:r,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.NEED_UPLOAD:return{type:"complete",icon:l.default.createElement(E.default,{className:(0,s.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-retry",onClick:e=>{N(e),t.resumeUpload()},"aria-label":f.default.t(1419)}),label:f.default.t(1419),labelClassname:T.default.labelRetry};case h.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return{type:"complete",icon:l.default.createElement(E.default,{className:(0,s.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-retry",onClick:e=>{N(e),t.resumeRemoteUpload()},"aria-label":f.default.t(1419)}),label:f.default.t(1419),labelClassname:T.default.labelRetry};case h.MEDIA_DATA_STAGE.SENDING:return{type:"complete",icon:l.default.createElement(I.default,null),label:r,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.ERROR_MISSING:return{type:"complete",icon:l.default.createElement(S.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:f.default.t(1637),labelClassname:T.default.labelInactive};case h.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case h.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:return __LOG__(4,void 0,new Error,!0)`Unsupported/too large view once media message`,SEND_LOGS("view-once-hook-error"),{type:"complete",icon:l.default.createElement(S.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:r,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.INIT:case h.MEDIA_DATA_STAGE.PREPARING:case h.MEDIA_DATA_STAGE.DECRYPTING:case h.MEDIA_DATA_STAGE.EXISTS:if(!t.isSentByMe)return{type:"unviewed",icon:l.default.createElement(I.default,null),handleClick:N,label:r};case h.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case h.MEDIA_DATA_STAGE.REUPLOADING:return{type:"complete",icon:l.default.createElement(S.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:r,labelClassname:T.default.labelActive}}}),[e,t])}(w,k);(0,l.useImperativeHandle)(D,(()=>({handleKeyActivation(e){i&&null!=L.handleClick&&L.handleClick(e)}}))),(0,l.useEffect)((()=>{!k.isSentByMe&&(0,P.isUnviewed)(k)&&k.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[k]);var x,F=r.type===h.OUTWARD_TYPES.IMAGE?f.default.t(43):f.default.t(44);if("complete"===L.type){var{label:B,labelClassname:G,icon:U}=L,j=(0,P.isUnviewed)(r)?F:[B,F].join(" - ");x=l.default.createElement(y.default,{msg:r,displayAuthor:e},null!=O?l.default.createElement("div",{className:T.default.quote},O):null,l.default.createElement(c.FlexRow,{className:T.default.labelContainer,align:"center",a8nText:n.default.key("view-once-complete"),"aria-label":j},l.default.createElement(c.FlexItem,{className:(0,s.default)({[T.default.statusIcon]:!0,[T.default.statusDone]:(0,P.isViewed)(k)}),grow:0},U),l.default.createElement(c.FlexItem,{grow:1},l.default.createElement(m.default,{className:(0,s.default)(G,T.default.labelText),msg:k.unsafe()},B))))}else{var{handleClick:V,label:H,icon:W}=L,Y=w===h.MEDIA_DATA_STAGE.NEED_POKE||w===h.MEDIA_DATA_STAGE.FETCHING?f.default.filesize(R):null;x=l.default.createElement(p.default,{displayType:t,hideCaption:!0,hideMeta:!0,msg:r,quotedMsg:O,showAuthor:e,trusted:i},l.default.createElement(b.default,{a8nText:n.default.key("view-once-unviewed"),xstyle:A.buttonContainer,onClick:i?V:()=>{},"aria-label":F},l.default.createElement(u.default,{outgoingMsg:k.isSentByMe,withBorder:!0},l.default.createElement(c.FlexRow,{className:T.default.deepContainerContent,align:"center"},l.default.createElement(c.FlexItem,{className:T.default.statusIcon,grow:0},W),l.default.createElement(c.FlexItem,{className:T.default.content,grow:1},l.default.createElement(C.TextHeader,{color:"secondary",level:"3",weight:"medium",size:"15"},H),null!=Y?l.default.createElement(C.TextParagraph,{className:T.default.contentMeta,size:"10"},Y):null)),l.default.createElement("div",{className:T.default.meta},l.default.createElement(_.default,{msg:r})))))}return l.default.createElement("div",{className:(0,s.default)({[T.default.unviewedBubble]:"unviewed"===L.type})},x)}var D=(0,l.forwardRef)(O);t.default=D},93164:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({onClick:e}){var[t,a]=(0,c.default)(e),r=null!=e?a:{};return l.default.createElement("div",(0,i.default)({className:(0,s.default)({[f.default.container]:!0,[f.default.inactive]:null==e}),ref:t,"aria-label":o.default.t(1768)},r),l.default.createElement("div",{className:f.default.icon},l.default.createElement(u.default,{name:"x-soft"})),l.default.createElement(n.FlexRow,{className:f.default.spinner,align:"center",justify:"center"},l.default.createElement(d.default,{color:"accent",size:18,stroke:5})))};var i=r(a(67154)),s=r(a(94184)),l=r(a(67294)),n=a(57909),o=r(a(80162)),d=r(a(69507)),u=r(a(32885)),c=r(a(13085)),f=r(a(20699))},32692:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainer=function(e){var t=(0,s.default)(ee.default.msgContainer,{"message-out":e.isSentByMe,"message-in":!e.isSentByMe}),a=(0,s.default)(ee.default.message,ee.default.hasTail,"tail-override-left");return n.default.createElement("div",{className:t},n.default.createElement("div",{className:a},n.default.createElement("div",{className:ee.default.messageBackground},n.default.createElement("div",{className:ee.default.tail},n.default.createElement(z.default,{name:ue(re)})),e.children)))},t.getTailName=ue,t.SystemBubble=t.default=t.Wrapper=void 0;var s=i(a(94184)),l=i(a(63337)),n=r(a(67294)),o=i(a(55847)),d=a(47383),u=a(88894),c=i(a(90754)),f=i(a(74798)),h=i(a(33766)),p=i(a(58939)),m=i(a(51115)),_=i(a(75444)),v=i(a(38906)),g=a(89852),E=r(a(7970)),S=i(a(3774)),C=i(a(61900)),y=a(77824),b=i(a(9908)),M=i(a(62886)),T=i(a(74344)),I=i(a(31170)),P=a(34605),A=i(a(84891)),N=i(a(35001)),O=a(1697),D=i(a(34015)),w=a(29989),R=i(a(80162)),k=a(21725),L=i(a(80896)),x=i(a(58018)),F=i(a(31127)),B=a(53348),G=i(a(54562)),U=i(a(46399)),j=i(a(35796)),V=a(75431),H=i(a(70046)),W=i(a(76806)),Y=i(a(43232)),K=i(a(72765)),q=a(6578),z=i(a(32885)),$=i(a(29763)),Q=i(a(26144)),X=i(a(11918)),J=i(a(4328)),Z=i(a(83602)),ee=i(a(1961)),te=a(50342),ae=i(a(77188)),re=!1,ie=!0;class se extends n.PureComponent{getContainerElement(){return(0,l.default)(this._refContainer,"this._refContainer")}constructor(e){super(e),this.setRefMsgComponent=e=>this.refMsgComponent=e,this.setRefContext=e=>this.refContext=e,this._refTail=(0,n.createRef)(),this.setRefBubble=e=>this.refBubble=e,this._sizeMismatch=!1,this._stickerRef=(0,n.createRef)(),this._setRefContainer=e=>{this._refContainer=e},this.resend=()=>{this.props.msg.resend().catch((function(e){__LOG__(2)`wrapper:resend failure: ${e}`}))},this._openWebSearchFlow=()=>{var e=this.props.msg;h.default.openModal(n.default.createElement(Z.default,{messageText:e.body}),{transition:"modal-flow"})},this._openEphemeralInfoPopup=()=>{var e=this.props.msg.ephemeralDuration||0;h.default.openModal(n.default.createElement(m.default,{onOK:()=>{h.default.closeModal()}},(0,w.getDisappearingMessageOutOfSyncInfoString)(e)),{transition:"modal-flow"})},this._openBizPrivacyInfoPopup=()=>{var e=this.props.msg,{bizPrivacyStatus:t}=e;null!=t&&h.default.openModal(n.default.createElement(m.default,{onOK:()=>{h.default.closeModal()}},(0,u.getBizPrivacyInfoString)(t)),{transition:"modal-flow"})},this._onMouseEnter=e=>{e.buttons||this.state.hover||!this._hasContextMenu()||this.setState({hover:!0})},this._onMouseLeave=()=>{this._hasContextMenu()&&this._unsetHover()},this._unsetHover=()=>{this.state.hover&&this.setState({hover:!1})},this._handleMouseContextMenu=e=>{e.stopPropagation()},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var a=t?this._getMenuRefContext():e,r=(0,q.unproxy)(this.props.msg),i=[];!r.isSentByMe||this.props.displayType===_.default.DISP_TYPE.MSG_INFO||r.asRevoked||r.isMdHistoryMsg||i.push(n.default.createElement(E.default,{key:"info",a8n:"mi-msg-info",action:()=>{this.openInfoDrawer()}},R.default.t(1120))),r.canReply()&&i.push(n.default.createElement(E.default,{key:"reply",a8n:"mi-msg-reply",action:()=>{this.onReplyMessage()}},R.default.t(1387))),(r.canPrivateReply()||r.canPrivateReplyInRestrictedGrp())&&i.push(n.default.createElement(E.default,{key:"private_reply",a8n:"mi-msg-reply",action:()=>{this.onPrivateReplyMessage()}},R.default.t(1334))),r.isDownloadable()&&i.push(n.default.createElement(E.default,{key:"download",a8n:"mi-msg-download",action:()=>{this.onDownload()}},R.default.t(1764))),r.canForward()&&i.push(n.default.createElement(E.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)}},R.default.t(818))),(0,P.canEditLabelAssociation)()&&!r.asRevoked&&i.push(n.default.createElement(E.default,{key:"editLabel",a8n:"mi-edit-label",action:()=>{this._openEditLabelFlow()}},R.default.t(710))),r.canStar()&&(r.star?i.push(n.default.createElement(E.default,{key:"star",a8n:"mi-msg-unstar",action:()=>{this.onUnstarMessage()}},R.default.t(1586))):i.push(n.default.createElement(E.default,{key:"star",a8n:"mi-msg-star",action:()=>{this.onStarMessage()}},R.default.t(1504)))),i.push(n.default.createElement(E.default,{key:"delete",a8n:"mi-msg-delete",action:()=>{this.onDeleteMessage()}},R.default.t(663))),r.isGroupMsg&&r.author&&!r.isSentByMe&&i.push(n.default.createElement(E.default,{key:"author",a8n:"mi-msg-author",action:()=>{this.openContactChat()}},R.default.t(1116,{author:r.displayName()}))),this.setState({contextMenu:{menu:i,anchor:a,theme:E.ThemeOptions.COMPACT,autoFocus:this._isKeyboardUser()}})}},this.openContextMenu=()=>{this._hasContextMenu()&&(this.state.hover?this.onMenu(void 0,!0):this.setState({hover:!0},(()=>{this.onMenu(void 0,!0)})))},this.closeContextMenu=()=>{var e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this.onSelectClick=e=>{e&&e.stopPropagation();var t=this.props.onMessageSelect;t?t((0,q.unproxy)(this.props.msg),!this.state.selected,e):(__LOG__(4,void 0,new Error,!0)`no onMessageSelect`,SEND_LOGS("wrapper-onSelectClick"))},this.onDoubleClick=e=>{var{displayType:t}=this.props,a=(0,q.unproxy)(this.props.msg);!a.canReply()||this.props.selectable||t!==_.default.DISP_TYPE.CONVERSATION||this.state.contextMenu||e.target instanceof HTMLElement&&((e,t)=>{for(var a=t;a;){if(a===e)return!0;a=a.parentNode}return!1})(this.refBubble,e.target)||(a.chat.composeQuotedMsg=a,h.default.focusChatTextInput(a.chat),this.highlight())},this.onResize=()=>{this.forceUpdate()},this._handleKeyActivation=e=>{var t,a;null===(t=this.getMsgComponentRef())||void 0===t||null===(a=t.handleKeyActivation)||void 0===a||a.call(t,e)},this.state={canQuickForward:e.msg.canQuickForward(),contextMenu:null,hover:!1,highlighting:!1,selected:!!e.selectedMessages&&e.selectedMessages.isSelected((0,q.unproxy)(e.msg)),isRevoked:Boolean(e.msg.asRevoked),isViewOncePeeking:!1};var t=this.props.displayType===_.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===_.default.DISP_TYPE.GALLERY||this.props.displayType===_.default.DISP_TYPE.MSG_INFO||this.props.displayType===_.default.DISP_TYPE.CONTACT_CARD;this._sizeMismatch=t&&this.props.msg.isGif}componentDidMount(){this._sizeMismatch&&this.refBubble&&(this.maxWidth=this.refBubble.offsetWidth,this.forceUpdate(),window.addEventListener("resize",this.onResize)),this.props.listeners.add(this.props.msg,"change",(()=>{var e=this.props.msg.canQuickForward();e!==this.state.canQuickForward&&this.setState({canQuickForward:e});var t=Boolean(this.props.msg.asRevoked);t!==this.state.isRevoked&&this.setState({isRevoked:t})})),this.props.listeners.add(document,"selectionchange",(()=>{var e,t;""!==(null!==(e=null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&void 0!==e?e:"")&&this._unsetHover()})),this.props.listeners.add(h.default,"media_viewer_modal",this._unsetHover)}componentWillUnmount(){this._sizeMismatch&&window.removeEventListener("resize",this.onResize)}componentDidUpdate(e,t){this.state.contextMenu&&t.isRevoked!==this.state.isRevoked&&this.closeContextMenu()}scrollMsg(e,t){this._refContainer&&(0,g.scrollAt)(this._refContainer,void 0,t).then(e)}highlight(){var e=this.refBubble,t=this._refTail.current;e&&(this.setState({highlighting:!0}),b.default.indicateFocus(e,ee.default.highlightAnimation),b.default.indicateFocus(t,ee.default.highlightAnimation),this.props.listeners.addOnce(e,"animationend",(()=>{this.setState({highlighting:!1})})),this.props.isFocusable&&this.focus({preventScroll:!0}))}highlightMention(){this._refContainer&&b.default.indicateFocus(this._refContainer,ee.default.highlightMentionAnimation)}openForwardFlow(e){var t,a=this.props.msg;a.type===_.default.MSG_TYPE.CIPHERTEXT?t=R.default.t(795):a.asRevoked?t=R.default.t(796):a.isUnsentMedia&&(t=R.default.t(794,{_plural:1})),t?h.default.openModal(n.default.createElement(m.default,{title:R.default.t(797),onOK:()=>h.default.closeModal(),okText:R.default.t(1941)},t)):e&&this.props.displayType===_.default.DISP_TYPE.CONVERSATION?this.onSelectClick():h.default.openModal(n.default.createElement(T.default,{msgs:[(0,q.unproxy)(a)]}),{transition:"modal-flow"})}_openEditLabelFlow(){this.props.displayType===_.default.DISP_TYPE.CONVERSATION?this.onSelectClick():h.default.openModal(n.default.createElement(x.default,{modelsToUpdate:[(0,q.unproxy)(this.props.msg)]}))}openInfoDrawer(){h.default.msgInfoDrawer((0,q.unproxy)(this.props.msg))}openContactChat(){(0,y.findChat)(this.props.msg.author).then((function(e){h.default.openChatFromUnread(e).then((t=>{t&&h.default.focusChatTextInput(e)}))}))}onDeleteMessage(){var{msg:e,isMsgVisible:t}=this.props;h.default.openModal(n.default.createElement(v.default,{chat:e.chat,msgList:[e].map(q.unproxy),deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))}onReplyMessage(){var e=(0,q.unproxy)(this.props.msg),t=e.chat;t.composeQuotedMsg=e,t===f.default.toArray().find((e=>e.active))?h.default.focusChatTextInput(t):h.default.openChatBottom(t)}onPrivateReplyMessage(){var e=(0,q.unproxy)(this.props.msg);(0,W.default)(e)}onDownload(){C.default.initDownload((0,q.unproxy)(this.props.msg))}onStarMessage(){var e=(0,q.unproxy)(this.props.msg);h.default.sendStarMsgs(e.chat,[e])}onUnstarMessage(){var e=(0,q.unproxy)(this.props.msg);h.default.sendUnstarMsgs(e.chat,[e])}_isKeyboardUser(){return this.context}getMsgComponent(e){var{msg:t,position:a,displayType:r,isMsgVisible:i,getSequentialMsg:s}=this.props;return n.default.createElement(S.default,{reason:"msg"},n.default.createElement(A.default.Provider,{value:t.chat.groupMetadata},n.default.createElement(U.default,{chat:t.chat,displayAuthor:e,displayType:r,hover:this.state.hover,isMsgVisible:i,maxWidth:this.maxWidth,msg:t,ref:this.setRefMsgComponent,position:a,getSequentialMsg:s,onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick,forwardStickerRef:this._stickerRef})))}getMsgComponentRef(){return this.refMsgComponent&&this.refMsgComponent.getRef()}onSelectChange(e){this.state.selected!==e&&this.setState({selected:e})}focus(e){this._refContainer&&M.default.focus(this._refContainer,e)}_hasContextMenu(){var{msg:e,displayType:t}=this.props;return!e.isNotification&&t!==_.default.DISP_TYPE.GALLERY&&t!==_.default.DISP_TYPE.CONTACT_CARD}_shouldShowMenuButton(){return this._hasContextMenu()&&!this.props.selectable&&(this.state.hover&&!this.state.highlighting||!!this.props.current||!!this.state.contextMenu)}_getHotkeysHandlers(){var e,t,{msg:a}=this.props;return"ptt"===a.type&&Y.default.pttPlaybackSpeedEnabled&&(e=e=>{e.preventDefault(),e.stopPropagation(),H.default.increasePlaybackRateFor(a.id)},t=e=>{e.preventDefault(),e.stopPropagation(),H.default.decreasePlaybackRateFor(a.id)}),{enter:this._handleKeyActivation,space:this._handleKeyActivation,"shift+>":e,"shift+<":t}}render(){var e,{msg:t,position:a,displayType:r,selectedMessages:i,isFocusable:l}=this.props,u=r===_.default.DISP_TYPE.CONVERSATION,f=function({msg:e,position:t,displayType:a}){if(e.isSentByMe||!e.isGroupMsg)return!1;if(e.type===_.default.MSG_TYPE.CHAT)return!(a===_.default.DISP_TYPE.STARRED_MSGS||!e.quotedMsg)||(t!==B.MsgPosition.MID&&t!==B.MsgPosition.END||(a===_.default.DISP_TYPE.GALLERY||(!!e.linkPreview||!!(0,O.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline))));return!0}({msg:t,position:a,displayType:r});this._shouldShowMenuButton()&&(e=n.default.createElement(F.default,{msg:t,hasAuthor:f,position:a,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)}}));var h=null;if(!t.isNotification&&this.props.selectable){var m=r===_.default.DISP_TYPE.GALLERY?"gallery":null;h=n.default.createElement(G.default,{checked:!!this.state.selected,onClick:this.onSelectClick,msgTheme:m})}var v,g=null;t.type===_.default.MSG_TYPE.STICKER&&this.props.selectable&&(g=n.default.createElement("span",null,n.default.createElement("div",{className:ee.default.stickerWrapperContainer,onMouseEnter:null===(v=this._stickerRef.current)||void 0===v?void 0:v.startAnimation,onClick:this.onSelectClick})));var E=!1;if(t.type===_.default.MSG_TYPE.CHAT){var S=p.default.match(t.body);E=1===S.length&&S[0][4][0].length===t.body.length}var C,y,b,M,T,P,A=t.chat&&t.chat.isPSA,D=!A&&!t.isNotification&&!this.props.tailOverride&&(a===B.MsgPosition.FRONT||a===B.MsgPosition.SINGLE)||r===_.default.DISP_TYPE.MSG_INFO||this.props.tailOverride,w=de(t)&&(!f||t.isSentByMe||!t.isGroupMsg&&!t.quotedMsg)&&(u&&(a===B.MsgPosition.FRONT||a===B.MsgPosition.SINGLE)||!u),L=!this.props.selectable&&(r===_.default.DISP_TYPE.CONVERSATION||r===_.default.DISP_TYPE.MSG_INFO||r===_.default.DISP_TYPE.STARRED_MSGS),x=t.ephemeralOutOfSync&&!t.isNotification&&!t.isFutureproof,U=L&&this.state.canQuickForward,H=L&&Y.default.quickMessageSearch&&t.isFrequentlyForwarded&&t.type===_.default.MSG_TYPE.CHAT,W=null!=t.bizPrivacyStatus,K=(0,s.default)(ee.default.msg,{[ee.default.msgContinuation]:!(a!==B.MsgPosition.FRONT&&a!==B.MsgPosition.MID||t.isFromTemplate&&t.isQuickReply),[ee.default.msgPSA]:r!==_.default.DISP_TYPE.STARRED_MSGS&&A,[ee.default.msgSystem]:t.isNotification,[ee.default.msgGallery]:r===_.default.DISP_TYPE.STARRED_MSGS||r===_.default.DISP_TYPE.CONTACT_CARD||r===_.default.DISP_TYPE.GALLERY,[ee.default.msgInfo]:r===_.default.DISP_TYPE.MSG_INFO,[ee.default.msgWithQuickAction]:W||x||U||H,"message-out":!t.isNotification&&t.isSentByMe||r===_.default.DISP_TYPE.MSG_INFO,"message-in":!t.isNotification&&!t.isSentByMe,[k.LIST_FOCUSABLE_ITEM_CLASS_NAME]:l}),q=(0,s.default)(ee.default.message,function(e){if(e.isViewOnce)return ee.default.messageChat;switch(e.type){case _.default.MSG_TYPE.NOTIFICATION_TEMPLATE:return ne.includes(e.subtype)?ee.default.messageNonE2ENotification:e.isBizNotification?ee.default.messageBizNotification:void 0;case _.default.MSG_TYPE.E2E_NOTIFICATION:return"encrypt"===e.subtype&&(e.chat.isSupportGroup()||(0,I.default)(e.id.remote.user))?ee.default.messageBizNotification:ee.default.messageE2ENotification;case _.default.MSG_TYPE.GROUPS_V4_INVITE:return ee.default.messageChat;case _.default.MSG_TYPE.CHAT:return(ae.default.supportsFeature(ae.default.F.MD_BACKEND)&&e.matchedText?(0,O.isParsableYouTubeVideoUrl)(e.richPreviewType,e.matchedText,e.doNotPlayInline):(0,O.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline))?ee.default.messageVideoLinkPreview:ee.default.messageChat;case _.default.MSG_TYPE.LOCATION:return e.isLive?ee.default.messageLiveLocation:ee.default.messageLocation;case _.default.MSG_TYPE.VCARD:return ee.default.messageVcard;case _.default.MSG_TYPE.CIPHERTEXT:return(0,s.default)(ee.default.messageChat,ee.default.messagePlaceholder);case _.default.MSG_TYPE.MULTI_VCARD:return ee.default.messageMultiVcard;case _.default.MSG_TYPE.IMAGE:return ee.default.messageImage;case _.default.MSG_TYPE.PRODUCT:return ee.default.messageProduct;case _.default.MSG_TYPE.STICKER:return de(e)?ee.default.messageTransparent:ee.default.messageSticker;case _.default.MSG_TYPE.VIDEO:return e.mediaData.isGif?ee.default.messageGif:ee.default.messageVideo;case _.default.MSG_TYPE.AUDIO:return ee.default.messageAudio;case _.default.MSG_TYPE.PTT:return ee.default.messagePTT;case _.default.MSG_TYPE.DOCUMENT:return ee.default.messageDocument;case _.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:case _.default.MSG_TYPE.BUTTONS_RESPONSE:case _.default.MSG_TYPE.LIST_RESPONSE:return ee.default.messageChat;case _.default.MSG_TYPE.ORDER:return ee.default.messageProduct;case _.default.MSG_TYPE.LIST:if((0,V.listMsgCanRender)(e))return ee.default.messageList;case _.default.MSG_TYPE.UNKNOWN:return(0,s.default)(ee.default.messageChat,ee.default.messagePlaceholder);default:return}}(t),{[ee.default.messageSystem]:t.isNotification,[ee.default.messageCode]:E,[ee.default.hasTail]:D,"tail-override-left":"left"===this.props.tailOverride,"tail-override-right":"right"===this.props.tailOverride,[ee.default.tailOverrideHide]:w}),Z=(0,s.default)({[ee.default.messageBackground]:!de(t),[ee.default.hasBorderBox]:!t.isNotification&&!de(t),[ee.default.hasUrlCallButtons]:t.isFromTemplate&&t.hasTemplateButtons&&!t.isQuickReply});if(this._sizeMismatch&&!this.refBubble)return n.default.createElement("div",{className:ee.default.placeholder,ref:this.setRefBubble});C=this.state.contextMenu?"none":t.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(y=n.default.createElement(Q.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},n.default.createElement(X.default,{contextMenu:this.state.contextMenu}))),this.props.isFocusedMsg&&(b=n.default.createElement(te.WhileFocusedListener,{parent:this})),i&&(M=n.default.createElement(te.SelectionListener,{parent:this,msgId:t.id.toString(),selectedMessages:i})),x?T=n.default.createElement("div",{className:ee.default.quickActionButton,onClick:this._openEphemeralInfoPopup,role:"button"},n.default.createElement(z.default,{name:"info-alt"})):W?T=n.default.createElement("div",{className:ee.default.quickActionButton,onClick:this._openBizPrivacyInfoPopup,role:"button"},n.default.createElement(z.default,{name:"info-alt"})):U?T=n.default.createElement("div",{className:ee.default.quickActionButton,onClick:()=>this.openForwardFlow(!1),role:"button"},n.default.createElement(z.default,{name:"forward-chat"})):H&&(T=n.default.createElement("div",{className:ee.default.quickActionButton,onClick:this._openWebSearchFlow,role:"button"},n.default.createElement(z.default,{name:"search"}))),t.mediaData&&(P=n.default.createElement(te.MediaListener,{parent:this,mediaData:t.mediaData}));var se,le,oe,ce,fe="msg-container";(t.isNotification&&(fe="msg-notification-container"),D)&&(le="left"===this.props.tailOverride?ue(re):"right"===this.props.tailOverride?ue(ie):ue(t.isSentByMe),se=n.default.createElement(z.default,{name:le,className:ee.default.tail,containerRef:this._refTail}));t.isFromTemplate&&t.hasTemplateButtons?oe=n.default.createElement($.default,{msg:t,chat:t.chat}):null!=t.dynamicReplyButtons&&t.dynamicReplyButtons.length>0&&r!==_.default.DISP_TYPE.STARRED_MSGS&&(oe=n.default.createElement(c.default,{msg:t})),t.isNotification||a===B.MsgPosition.MID?ce=null:t.isSentByMe?ce=n.default.createElement(d.InvisibleLabel,null,R.default.t(18)):t.isGroupMsg||(ce=n.default.createElement(d.InvisibleLabel,null,R.default.t(17,{author:t.displayName()})));var he=null;return t.isEphemeral&&(he=n.default.createElement(d.InvisibleLabel,null,R.default.t(8))),n.default.createElement(N.default,{className:K,"data-id":t.id.toString(),handlers:this._getHotkeysHandlers(),onDoubleClick:this.onDoubleClick,onRef:this._setRefContainer,tabIndex:-1},n.default.createElement(J.default,{transitionName:"delay-leave"},h),n.default.createElement("div",{"data-a8n":o.default.key(fe),className:q,onContextMenu:this._handleMouseContextMenu,onMouseOver:this._onMouseEnter,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},se,n.default.createElement(j.default,{displayType:r,msg:t}),g,n.default.createElement("div",{className:Z,ref:this.setRefBubble},ce,this.getMsgComponent(f),n.default.createElement(J.default,{transitionName:C},e)),T,oe,he),y,b,M,P)}}t.Wrapper=se,se.defaultProps={displayType:_.default.DISP_TYPE.CONVERSATION},se.CONCERNS={msg:["asMms","asRevoked","author","body","chat","dir","ephemeralDuration","ephemeralOutOfSync","id","isBizNotification","isEphemeral","isFailed","isFrequentlyForwarded","isFutureproof","isGif","isGroupMsg","isLive","isMedia","isNotification","isRTL","isSentByMe","isUnsentMedia","isViewOnce","linkPreview","list","mediaData","matchedText","quotedMsg","richPreviewType","sender","star","subtype","type","title","hasTemplateButtons","isQuickReply","isFromTemplate","doNotPlayInline","ctwaContext","bizPrivacyStatus","verifiedBizName","templateParams","dynamicReplyButtons","replyButtons"]},se.contextType=D.default,se.displayName="Wrapper";var le=(0,L.default)((0,K.default)(se,se.CONCERNS));t.default=class extends le{focus(e){this.getComponent().focus(e)}openContextMenu(){this.getComponent().openContextMenu()}getContainerElement(){return this.getComponent().getContainerElement()}getMsgComponentRef(){return this.getComponent().getMsgComponentRef()}};var ne=["biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"];var oe=(0,n.forwardRef)((function(e,t){var a=e.theme?ee.default[e.theme]:null,r=(0,s.default)(ee.default.msg,ee.default.msgSystem,a,{[k.LIST_FOCUSABLE_ITEM_CLASS_NAME]:e.isFocusable}),i=(0,s.default)(ee.default.message,ee.default.messageSystem,{[ee.default.messageHidden]:e.hidden});return n.default.createElement("div",{className:r,tabIndex:-1,ref:t},n.default.createElement("div",{className:i},e.children))}));function de(e){return e.type===_.default.MSG_TYPE.STICKER&&!e.quotedMsg&&!e.ctwaContext}function ue(e){return e?R.default.isRTL()?"tail-in":"tail-out":R.default.isRTL()?"tail-out":"tail-in"}t.SystemBubble=oe},51213:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(6479)),l=i(a(94184)),n=i(a(63337)),o=r(a(67294)),d=i(a(96774)),u=i(a(60018)),c=i(a(56594)),f=i(a(33766)),h=i(a(75444)),p=i(a(74271)),m=i(a(48877)),_=i(a(80162)),v=i(a(21725)),g=i(a(80896)),E=i(a(42284)),S=a(53348),C=i(a(33048)),y=i(a(60620)),b=i(a(32692));class M extends o.Component{constructor(e){super(e),this._renderedMsgs={},this._renderedDateMarkers={},this._renderedAlbums={},this._renderedMsgToAlbum={},this._refUnread=(0,o.createRef)(),this._getRefUnread=()=>this._refUnread.current,this._handleRefreshMessages=()=>{this.forceUpdate()},this._handleOpenMediaViewerForAlbumMedia=e=>{var t=this._renderedMsgToAlbum[e.id.toString()];if(t&&!t.isGroupedSticker()){var a=t.props.msgs,r=new Set((a||[]).map((e=>e.id.toString())));this._renderedMsgToAlbum[e.id.toString()]&&f.default.mediaViewerModal({msg:e,getZoomNode:()=>{var a=t.refAlbumComponents[e.id.toString()];return null==a?void 0:a.getContainerElement()},highlightedMsgIds:r})}},this.handleMsgKeyChange=({newKey:e,oldKey:t})=>{var a=e.toString(),r=t.toString(),i=this._renderedMsgs[r];i&&(delete this._renderedMsgs[r],this._renderedMsgs[a]=i)},this._handleMsgRendered=(e,t)=>{e?this._renderedMsgs[t]=e:delete this._renderedMsgs[t]},this._rowRenderers={msg:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(((e,t,a,r)=>{var i,s=this.props;i=r&&!a?S.MsgPosition.FRONT:r&&a?S.MsgPosition.MID:!r&&a?S.MsgPosition.END:S.MsgPosition.SINGLE;var l=e.type===h.default.MSG_TYPE.IMAGE||e.type===h.default.MSG_TYPE.VIDEO||e.type===h.default.MSG_TYPE.AUDIO;return o.default.createElement(b.default,{key:"msg-"+e.id.toString(),ref:t=>{this._handleMsgRendered(t,e.id.toString())},msg:e.unsafe(),displayType:h.default.DISP_TYPE.CONVERSATION,isMsgVisible:l?s.isMsgVisible:()=>{},selectable:s.selectable,selectedMessages:s.selectedMessages,onMessageSelect:s.onMessageSelect,position:i,isFocusedMsg:t,getSequentialMsg:this.props.getSequentialMsg,isFocusable:!0})})),album:(e,t,a,r,i,s)=>{var l,n=this.props;return l=r&&!a?S.MsgPosition.FRONT:r&&a?S.MsgPosition.MID:!r&&a?S.MsgPosition.END:S.MsgPosition.SINGLE,o.default.createElement(u.default,{msgs:e,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((a=>{this._handleAlbumRendered(a,t,e)})),key:"album-"+t,position:l,isMsgVisible:n.isMsgVisible,selectable:n.selectable,selectedMessages:n.selectedMessages,onMessageSelect:n.onMessageSelect,albumId:t,isFocusedAlbum:i,focusedMsgIndex:s,isFocusable:!0})},date:(e,t)=>{var{isLoadingEarlierMsgs:a}=this.props;return o.default.createElement(p.default,{ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleDateMarkerRendered(t,e)})),key:"msg-"+e.id.toString()+"-date",timestamp:e.t,isFocusable:!a||0!==t})},unread:()=>o.default.createElement(y.default,{key:"msg-unread",count:this.props.unreadCount,textContainerRef:this._refUnread})},this._openMsgContextMenu=e=>{if(e.target instanceof HTMLElement){var t,a,r=null===(t=e.target.dataset)||void 0===t?void 0:t.id,i=this._renderedMsgs[r]||this._renderedAlbums[r];null==i||null===(a=i.openContextMenu)||void 0===a||a.call(i)}},this._handleBeforeEnd=()=>f.default.openChatBottom(this.props.chat).then((()=>{}));var{msgs:t}=e;this._latestMsgWhenChatOpen=t.length>0?t[t.length-1]:null}shouldComponentUpdate(e){var{msgs:t}=e,a=(0,s.default)(e,["msgs"]),r=this.props,{msgs:i}=r,l=(0,s.default)(r,["msgs"]);return!(0,d.default)(a,l)||!(0,c.default)(t,i)}getSnapshotBeforeUpdate(){var e,t=this.props.getScrollContainer(),a=this.props.msgs.find((e=>this._renderedMsgs.hasOwnProperty(e.id)));if(null==a)return null;var r=a.id.toString();return{commonMessageId:r,commonMessageTop:(0,n.default)(null===(e=this.getMsgWrapperRef(r))||void 0===e?void 0:e.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()").offsetTop-t.scrollTop}}componentDidMount(){this.props.listeners.add(C.default,"change:msgKey",this.handleMsgKeyChange),this.props.listeners.add(f.default,"refresh_messages",this._handleRefreshMessages),this.props.listeners.add(f.default,"open_media_viewer_for_album_media",this._handleOpenMediaViewerForAlbumMedia)}componentDidUpdate(e,t,a){var r=this.props.getScrollContainer();if(null!=a){var i,{commonMessageId:s,commonMessageTop:l}=a,o=(0,n.default)(null===(i=this.getMsgWrapperRef(s))||void 0===i?void 0:i.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()");r.scrollTop=o.offsetTop-l}}getMsgVisibility(e){var t=this.props.getScrollContainer(),a=t.scrollTop,r=a+t.clientHeight,i=null==e?void 0:e.getContainerElement();return i?i.offsetTop+i.clientHeight<=a?{visibility:h.default.VISIBILITY.ABOVE,offset:i.offsetTop-a}:i.offsetTop>=r?{visibility:h.default.VISIBILITY.BELOW,offset:i.offsetTop-a}:{visibility:h.default.VISIBILITY.VISIBLE,offset:i.offsetTop-a}:(__LOG__(3)`getMsgVisibility on invalid ref: ${e}`,{visibility:h.default.VISIBILITY.VISIBLE,offset:0})}getMsgWrapperRef(e){return this._renderedMsgs[e]||this._renderedMsgToAlbum[e]}getMsgComponentRef(e){return this._renderedMsgs[e]?this._renderedMsgs[e].getMsgComponentRef():this._renderedMsgToAlbum[e]?this._renderedMsgToAlbum[e].refAlbumComponents[e]&&this._renderedMsgToAlbum[e].refAlbumComponents[e].getRef():void 0}getDateMarkerRef(e){return this._renderedDateMarkers[e]}_handleDateMarkerRendered(e,t){t?this._renderedDateMarkers[e]=t:delete this._renderedDateMarkers[e]}getRenderedDateMarkers(){return this._renderedDateMarkers}_handleAlbumRendered(e,t,a){e?(this._renderedAlbums[t]=e,a.forEach((t=>{this._renderedMsgToAlbum[t.id.toString()]=e}))):delete this._renderedAlbums[t]}render(){var e,t,a,r,{msgs:i,focusedMsgCtx:s,unreadCount:n}=this.props;s&&(a=s.msg,s.isUnreadDivider&&n>0&&(r=s.msg));var d=(0,l.default)(E.default.messageList,{[E.default.messageListSelectable]:this.props.selectable}),u={[`${_.default.LR("right","left")}`]:this._openMsgContextMenu},c=_.default.LR(_.default.t(15),_.default.t(16));return o.default.createElement(v.default,{dataTab:h.default.TAB_ORDERS.MESSAGE_LIST,className:d,getPriorityFocusItem:this._getRefUnread,onBeforeEnd:this._handleBeforeEnd,handlers:u,role:"region","aria-label":c},(0,m.default)(this._rowRenderers,i,null===(e=a)||void 0===e?void 0:e.safe(),null===(t=r)||void 0===t?void 0:t.safe(),n,this._latestMsgWhenChatOpen))}}M.displayName="MessageList";var T=(0,g.default)(M);t.default=class extends T{getDateMarkerRef(e){return this.getComponent().getDateMarkerRef(e)}getMsgComponentRef(e){return this.getComponent().getMsgComponentRef(e)}getMsgWrapperRef(e){return this.getComponent().getMsgWrapperRef(e)}getMsgVisibility(e){return this.getComponent().getMsgVisibility(e)}getRenderedDateMarkers(){return this.getComponent().getRenderedDateMarkers()}}},7058:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{msg:a,onClick:r,theme:i}=e,{thumbnail:n,isSentByMe:o}=a;n&&(t=l.default.createElement("div",{className:u.default.media,style:{backgroundImage:`url("data:image/jpeg;base64,${n}")`}}));var d=(0,s.default)(u.default.preview,{[u.default.bubbleIn]:!o&&"quoted"!==i,[u.default.bubbleOut]:o||"quoted"===i,[u.default.quoted]:"quoted"===i});return l.default.createElement("div",{className:d,onClick:r},t,l.default.createElement("div",{className:u.default.body},l.default.createElement(h,{msg:a}),l.default.createElement(p,{msg:a})))},t.OrderTitle=h,t.OrderDescription=p;var s=i(a(94184)),l=i(a(67294)),n=r(a(39017)),o=i(a(20923)),d=i(a(80162)),u=i(a(57825)),c=i(a(43232)),f=i(a(32885));function h(e){var t,{msg:a}=e;if(c.default.webCartV11OrderMessageChanges){var r=d.default.t(991,{count:a.itemCount||0,_plural:a.itemCount||0});t=l.default.createElement(l.default.Fragment,null,l.default.createElement(f.default,{className:u.default.titleIcon,name:"shopping-cart"}),l.default.createElement(o.default,{text:r}))}else t=l.default.createElement(o.default,{text:a.orderTitle});return l.default.createElement("div",{className:u.default.title},t)}function p(e){var{msg:t,showMessage:a}=e,{totalAmount1000:r,totalCurrencyCode:i,itemCount:s}=t,h=null;if(c.default.webCartV11OrderMessageChanges&&null!=r&&null!=i&&""!==i){var p=d.default.t(1310,{total:n.formatAmount1000(i,r)});h=l.default.createElement(o.default,{text:p})}else if(!c.default.webCartV11OrderMessageChanges){var m=d.default.t(991,{count:s||0,_plural:s||0});h=l.default.createElement(l.default.Fragment,null,l.default.createElement(f.default,{className:u.default.descriptionIcon,name:"shopping-cart"}),l.default.createElement(o.default,{text:m}))}var _=!0===a?l.default.createElement(o.default,{text:t.message}):null;return l.default.createElement("div",null,l.default.createElement("div",{className:u.default.description},h),_)}},76841:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,onClick:t}){var{list:a,isSentByMe:r,dir:h,productListHeaderImage:p}=(0,c.default)(e,["list","isSentByMe","dir","productListHeaderImage"]),[m,_]=(0,f.default)(t);if(null==a)return null;var v=null!=p?l.default.createElement("div",{alt:"",className:u.default.media,style:{backgroundImage:`url(${(0,d.convertToDataURI)(p)})`}}):null,g=l.default.createElement("div",{className:u.default.title},l.default.createElement(n.default,{text:a.title,ellipsify:!0})),E=o.default.t(991,{count:e.productListItemCount||0,_plural:e.productListItemCount||0}),S=l.default.createElement(n.default,{text:E,direction:h,ellipsify:!0}),C=(0,s.default)(u.default.preview,{[u.default.bubbleOut]:r});return l.default.createElement("div",(0,i.default)({},_,{className:C,ref:m}),v,l.default.createElement("div",{className:u.default.body},g,l.default.createElement("div",{className:u.default.description},S)))};var i=r(a(67154)),s=r(a(94184)),l=r(a(67294)),n=r(a(20923)),o=r(a(80162)),d=a(27632),u=r(a(85333)),c=r(a(95607)),f=r(a(13085))},6302:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttPlayPauseButton=t.PttStopButton=t.PttCancelButton=t.PttSendButton=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(89777)),d=i(a(75444)),u=i(a(62886)),c=i(a(25116)),f=i(a(80162)),h=i(a(8238)),{KEYBOARD_EVENT_KEY_VALUE:p}=c.default,m=(0,l.forwardRef)(((e,t)=>{var{disabled:a,confirmOnMouseUp:r,onConfirm:i,hidden:s}=e;return l.default.createElement(E,{ref:t,className:o.default.pttSendButton,a8nKey:n.default.key("ptt-send-btn"),ariaLabel:f.default.t(32),confirmOnMouseUp:r,onConfirm:i,disabled:a,hidden:s},l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35"},l.default.createElement("path",{d:"M17.5,0h0A17.51,17.51,0,0,1,35,17.5h0A17.51,17.51,0,0,1,17.5,35h0A17.51,17.51,0,0,1,0,17.5H0A17.51,17.51,0,0,1,17.5,0Z",fill:"currentColor"}),l.default.createElement("path",{className:o.default.bounceOnHover,d:"M25.64,18.55,11.2,24.93a.86.86,0,0,1-1.13-.44.83.83,0,0,1-.06-.44l.48-4.11a1.36,1.36,0,0,1,1.24-1.19l7.51-.6a.16.16,0,0,0,.14-.16.16.16,0,0,0-.14-.14l-7.51-.6a1.36,1.36,0,0,1-1.24-1.19L10,12a.84.84,0,0,1,.74-.94.87.87,0,0,1,.45.06l14.44,6.38a.61.61,0,0,1,.31.79A.59.59,0,0,1,25.64,18.55Z",fill:"#fff"})))}));t.PttSendButton=m;var _=(0,l.forwardRef)(((e,t)=>{var{onConfirm:a,confirmOnMouseUp:r,disabled:i,hidden:s}=e;return l.default.createElement(E,{ref:t,className:o.default.pttCancelButton,a8nKey:n.default.key("ptt-cancel-btn"),ariaLabel:f.default.t(30),confirmOnMouseUp:r,onConfirm:a,disabled:i,hidden:s},l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 22"},l.default.createElement("path",{d:"M5,0,3,2H0V4H16V2H13L11,0ZM15,5H1V19.5A2.5,2.5,0,0,0,3.5,22h9A2.5,2.5,0,0,0,15,19.5Z",fill:"currentColor"})))}));t.PttCancelButton=_;var v=(0,l.forwardRef)(((e,t)=>{var{onConfirm:a,confirmOnMouseUp:r,disabled:i,hidden:s}=e;return l.default.createElement(E,{ref:t,className:o.default.pttStopButton,a8nKey:n.default.key("ptt-stop-button"),ariaLabel:f.default.t(33),confirmOnMouseUp:r,onConfirm:a,disabled:i,hidden:s},l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},l.default.createElement("path",{fill:"currentColor",d:"M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M16,30C8.3,30,2,23.7,2,16S8.3,2,16,2 s14,6.3,14,14S23.7,30,16,30z"}),l.default.createElement("path",{className:o.default.bounceOnHover,fill:"currentColor",d:"M13,11c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2v-6c0-1.1-0.9-2-2-2H13z"})))}));t.PttStopButton=v;var g=(0,l.forwardRef)(((e,t)=>{var{paused:a,onConfirm:r,disabled:i,hidden:d}=e,u=a?l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 18"},l.default.createElement("path",{d:"M15.05,8.39,2,.32a1,1,0,0,0-1.53.85V16.83A1,1,0,0,0,2,17.7L15,10.1A1,1,0,0,0,15.05,8.39Z",fill:"currentColor"})):l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 18"},l.default.createElement("path",{fill:"currentColor",d:"M1.9,1c-0.6,0-1,0.4-1,1v14c0,0.6,0.4,1,1,1H5c0.6,0,1-0.4,1-1V2c0-0.6-0.4-1-1-1H1.9z"}),l.default.createElement("path",{fill:"currentColor",d:"M10.9,1c-0.6,0-1,0.4-1,1v14c0,0.6,0.4,1,1,1h3.1c0.6,0,1-0.4,1-1V2c0-0.6-0.4-1-1-1H10.9z"}));return l.default.createElement(E,{ref:t,className:(0,s.default)(o.default.pttPlayPauseButton,{[o.default.paused]:a}),a8nKey:n.default.key("ptt-play-pause-button"),onConfirm:r,confirmOnMouseUp:!1,disabled:i,ariaLabel:a?f.default.t(13):f.default.t(12),hidden:d},u)}));t.PttPlayPauseButton=g;var E=(0,l.forwardRef)(((e,t)=>{var{a8nKey:a,ariaLabel:r,children:i,className:n,confirmOnMouseUp:c,disabled:f,onConfirm:m,hidden:_}=e,v=(0,l.useRef)(null);(0,l.useImperativeHandle)(t,(()=>({focus:()=>u.default.focus((0,h.default)(v.current,"buttonRef.current"))})));var g=f||!c?null:e=>{0===e.button&&m(e)},E=f?null:e=>{e.key!==p.ENTER&&e.key!==p.SPACE||(e.preventDefault(),e.stopPropagation(),m(e))};return l.default.createElement("button",{ref:v,"data-a8n":a,"data-tab":_?void 0:d.default.TAB_ORDERS.PTT_BUTTON,className:(0,s.default)(n,o.default.clipFix),onClick:f?null:m,onMouseUp:g,onKeyPress:E,"aria-label":r,"aria-disabled":f},i)}))},89875:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(48926)),l=i(a(94184)),n=r(a(67294)),o=a(6302),d=i(a(44386)),u=i(a(75444)),c=i(a(8238)),f=i(a(74459)),h=i(a(21325)),p=i(a(7170)),m=a(54890),_=i(a(75649)),v=i(a(27581)),g=r(a(2908)),E=a(54302).Mirrored(["RECORDER","PREVIEW"]),S=(0,n.forwardRef)(((e,t)=>{var a,r,{active:i,chat:S,onCancel:C,onSend:y}=e,[b,M]=(0,n.useState)(E.RECORDER),T=(0,n.useRef)(),[I,P]=(0,n.useState)(!1),[A,N]=(0,n.useState)(!1),O=function(e){var[t,a]=(0,n.useState)(!1),[r,i]=(0,n.useState)(e);e&&!r&&(i(e),a(!1));return(0,n.useEffect)((()=>{if(e){var t=setTimeout((()=>{a(!0)}),250),r=()=>{a(!1),i()};window.addEventListener("mouseup",r);var i=()=>{window.removeEventListener("mouseup",r),clearTimeout(t)};return i}}),[e]),t}(A),[D,w]=(0,n.useState)(null),[R,k]=(0,n.useState)(!1),L=(0,n.useContext)(p.default),x=(0,n.useRef)(),F=(0,n.useRef)(),[B,G]=(0,n.useState)(0),[U,j]=(0,n.useState)(null),[V,H]=(0,n.useState)(0),W=function(){var e=(0,s.default)((function*(){H(0);var e=new h.default({chat:S,onDurationChange:e=>{H(Math.round(e)),k(e>=1.5)}});return T.current=e,k(!1),!!(yield e.start())&&(G(0),M(E.RECORDER),N(!0),!0)}));return function(){return e.apply(this,arguments)}}(),Y=(0,n.useCallback)(((e=!1)=>{var t=T.current;e?null==t||t.cancel():null==t||t.stop(),N(!1)}),[]);(0,n.useImperativeHandle)(t,(()=>({start:W}))),(0,n.useEffect)((()=>{A&&setTimeout((()=>{var e;null===(e=x.current)||void 0===e||e.focus()}),100)}),[A]),(0,n.useEffect)((()=>{var e;b===E.PREVIEW&&(null===(e=F.current)||void 0===e||e.focus())}),[b]);var K=(0,n.useCallback)((()=>{Y(),null==D||D.pause()}),[D,Y]),q=(0,v.default)(i);(0,n.useEffect)((()=>{i!==q&&(i||(K(),T.current=null))}),[i,q,K]),(0,_.default)(K);(0,m.useListener)(D,"play",(()=>{P(!0)})),(0,m.useListener)(D,"pause",(()=>{P(!1)})),(0,m.useListener)(D,"timeupdate",(()=>{G((0,c.default)(D,"audio").currentTime)})),(0,m.useListener)(D,"ended",(()=>{(0,c.default)(D,"audio").currentTime=0}));var z,$=(0,l.default)(f.default.container,{[f.default.recorderMode]:b===E.RECORDER,[f.default.previewMode]:b===E.PREVIEW});z=null!=U?U:A||0===B?V:Math.floor(B);var Q,X=n.default.createElement("div",{className:f.default.timerContainer},d.default.durationStr(z)),J=(0,n.useCallback)((()=>{var e;return null!==(e=null==D?void 0:D.currentTime)&&void 0!==e?e:0}),[D]),Z=(0,n.useCallback)((()=>{var e,t;return null!==(e=null===(t=T.current)||void 0===t?void 0:t.getDuration())&&void 0!==e?e:0}),[T]),ee=(0,n.useCallback)((()=>{var e,t;return null!==(e=null===(t=T.current)||void 0===t?void 0:t.getWaveformSamples())&&void 0!==e?e:[]}),[T]),te=(0,n.useCallback)((e=>{G(e),j(null),(0,c.default)(D,"audio").currentTime=e}),[D]),ae=(0,n.useCallback)((e=>{j(Math.floor(e))}),[]),re=n.default.createElement("div",{className:f.default.waveformContainer},n.default.createElement(g.default,{theme:"dark"===L.theme?g.WaveformTheme.DRAFT_DARK:g.WaveformTheme.DRAFT_LIGHT,sampleRate:null!==(a=null===(r=T.current)||void 0===r?void 0:r.getWaveformSampleRate())&&void 0!==a?a:6,getSamples:ee,getCurrentTime:J,getDuration:Z,live:I||A,mode:b===E.RECORDER?g.WaveformMode.RECORDER:g.WaveformMode.PREVIEW,onSeek:ae,onSeekEnd:te,disabled:!i,tabIndex:i?u.default.TAB_ORDERS.PTT_BUTTON:void 0}));return Q=b===E.RECORDER?n.default.createElement("div",{className:f.default.previewContainer},X,re,n.default.createElement(o.PttStopButton,{disabled:!R,confirmOnMouseUp:O,onConfirm:()=>{Y();var e=(0,c.default)(T.current,"recordingSessionRef.current");w(function(e){var t=new Audio;return(0,s.default)((function*(){var a=yield e.getDataForPlayback();t.src=a.url()}))(),t}(e)),M(E.PREVIEW)},hidden:!i})):n.default.createElement("div",{className:f.default.previewContainer},n.default.createElement(o.PttPlayPauseButton,{ref:F,paused:!I,onConfirm:()=>{var e=(0,c.default)(D,"audio");e.paused?e.play():e.pause()},hidden:!i}),re,X),n.default.createElement("div",{className:$},n.default.createElement(o.PttCancelButton,{ref:x,confirmOnMouseUp:O,onConfirm:()=>{Y(!0),C()},hidden:!i}),Q,n.default.createElement(o.PttSendButton,{disabled:!R,confirmOnMouseUp:O,onConfirm:()=>{Y();var e=T.current;null!=e&&(T.current=null,e.send(),y())},hidden:!i}))}));t.default=S},47072:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{ariaLabel:t,value:a,valueText:r,min:i,max:d,smallSkip:f,largeSkip:h,onChange:p,onCommit:m,disabled:_,children:v,tabIndex:g}=e,[E,S]=(0,o.useState)(!1),C=(0,o.useCallback)((()=>{S(!0)}),[S]),y=(0,o.useCallback)((()=>{S(!1)}),[S]),b=(0,o.useRef)(),M=(0,o.useRef)(),T=(0,o.useRef)(),I=(0,o.useCallback)((e=>{var t=(0,n.default)(M.current,"minPxRef.current"),a=(0,n.default)(T.current,"maxPxRef.current"),r=e.clientX,l=(0,s.default)((r-t)/(a-t),0,1);return i+l*(d-i)}),[i,d]),P=(0,o.useCallback)((e=>{e.preventDefault(),0!==e.buttons?null==p||p(I(e)):y()}),[y,p,I]),A=(0,o.useCallback)((e=>{if(0===e.button){y();var t=I(e);null==p||p(t),m(t)}}),[I,y,p,m]);return(0,o.useEffect)((()=>{if(E)return window.addEventListener("mousemove",P),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",A)}}),[P,A,E]),o.default.createElement("div",{ref:b,className:(0,l.default)(u.default.container,{[u.default.disabled]:_}),role:"slider","aria-label":t,"aria-valuenow":a,"aria-valuetext":r,"aria-valuemin":i,"aria-valuemax":d,"data-tab":g,tabIndex:"0",onMouseDown:e=>{var t;if(0===e.button){e.preventDefault();var a=(0,n.default)(null===(t=b.current)||void 0===t?void 0:t.getBoundingClientRect(),"containerRef.current?.getBoundingClientRect()");M.current=a.left,T.current=a.left+a.width,C(),null==p||p(I(e))}},onKeyDown:e=>{if(!_){var t;switch(e.key){case c.ARROW_RIGHT:case c.ARROW_UP:t=f;break;case c.ARROW_LEFT:case c.ARROW_DOWN:t=-f;break;case c.PAGE_UP:t=h;break;case c.PAGE_DOWN:t=-h}if(null!=t){e.preventDefault();var r=(0,s.default)(a+t,i,d);m(r)}}}},v)};var s=i(a(74691)),l=i(a(94184)),n=i(a(63337)),o=r(a(67294)),d=i(a(25116)),u=i(a(96734)),{KEYBOARD_EVENT_KEY_VALUE:c}=d.default},21325:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(48926)),l=i(a(59854)),n=a(24788),o=i(a(63337)),d=i(a(67294)),u=i(a(57055)),c=i(a(33766)),f=i(a(51115)),h=a(54438),p=r(a(12536)),m=r(a(29742)),_=i(a(80162)),v=a(13162),g=r(a(46505)),E=a(13943),S=i(a(72462)),C=i(a(80177)),y=a(44280),b=i(a(86710)),M=i(a(17413)),T=i(a(63324)),I=a(54302).Mirrored(["NOT_STARTED","STARTED","STOPPED","CANCELLED"]);function P(){return(P=(0,s.default)((function*(){return!0}))).apply(this,arguments)}function A(){return N.apply(this,arguments)}function N(){return(N=(0,s.default)((function*(e,t){yield e.getBlob(),new S.default.Ptt({pttSource:S.default.PTT_SOURCE_TYPE.FROM_CONVERSATION,pttResult:t,pttDuration:1e3*Math.round(e.duration),pttSize:(0,l.default)(e.totalLength,-3)}).commit()}))).apply(this,arguments)}t.default=class{constructor(e){this._state=I.NOT_STARTED,this._markedRecording=!1,this._waveformSamples=[],this._pendingAmplitude=0,this._updateWaveformSamples=()=>{var e,t,a=null!==(e=null===(t=this._recorder)||void 0===t?void 0:t.getCurrentAmplitude())&&void 0!==e?e:0;this._pendingAmplitude=Math.max(this._pendingAmplitude,a);var r=this.getDuration(),i=this.getWaveformSampleRate(),s=this._waveformSamples.length/i,l=Math.floor((r-s)*i);if(0!==l)for(var n=0;n<l;n++)this._waveformSamples.push(this._pendingAmplitude),this._pendingAmplitude=0},this._handleRecorderDuration=e=>{this._lastDurationEventTime=Date.now(),this._updateWaveformSamples(),this._onDurationChange(e.detail)},this._chat=e.chat,this._onDurationChange=e.onDurationChange}start(){var e=this;return(0,s.default)((function*(){if(e.isStopped())throw new Error("Can't restart a stopped recording session");if(e._state===I.STARTED)return!0;var t;if(e._state=I.STARTED,!(yield function(){return P.apply(this,arguments)}()))return e.stop(),!1;if(e.isStopped())return!1;if(u.default.activeCall)return c.default.openModal(d.default.createElement(f.default,{onOK:()=>c.default.closeModal()},_.default.t(942))),e.stop(),!1;try{var r=g.start("microphone");t=r.disposeStream;var{asyncStream:i}=r,s=yield i;if(!s)return e.stop(),!1;if(e.isStopped())return t(),!1;c.default.pttRecording();var l=new b.default({bitRate:16e3,encoderSampleRate:16e3,encoderApplication:2048});return e._recorder=l,l.initStream(s),l.addEventListener("duration",e._handleRecorderDuration),l.start(),a(44603).default.update(e._chat.presence.id).catch((0,n.filteredCatch)(h.WebdDrop,(()=>{}))),(0,y.markRecording)(e._chat),e._markedRecording=!0,e._stopWaveformSamplesUpdater=(0,T.default)(e._updateWaveformSamples),!0}catch(t){return e.stop(),t instanceof p.GUM.NotAllowedError?(c.default.openModal(d.default.createElement(m.default,{messaging:m.Messaging.MIC_FAIL,type:m.default.TYPE.GUIDE_UNBLOCK})),!1):t instanceof p.GUM.GUMError?(c.default.openModal(d.default.createElement(m.default,{messaging:m.Messaging.MIC_MISSING,type:m.default.TYPE.GUIDE_NONE})),!1):(__LOG__(3)`PTT Recording Error`,!1)}}))()}getWaveformSamples(){return this._waveformSamples}getScaledWaveformSamples(){return(0,M.default)(this._waveformSamples,64).map((e=>Math.floor(100*e)))}getDuration(){var e,t,a=null!==(e=null===(t=this._recorder)||void 0===t?void 0:t.duration)&&void 0!==e?e:0;if(this._state!==I.STARTED)return a;var r=this._lastDurationEventTime;return a+(null==r?0:Date.now()-r)/1e3}stop(){var e,t;if(!this.isStopped()){this._state=I.STOPPED;var a=this._recorder;null===(e=this._stopWaveformSamplesUpdater)||void 0===e||e.call(this),null!=a&&(a.removeEventListener("duration",this._handleRecorderDuration),null===(t=this._disposeStream)||void 0===t||t.call(this),a.stop(),this._markedRecording&&(0,y.markPaused)(this._chat))}}cancel(){if(this._state!==I.CANCELLED){this.stop(),this._state=I.CANCELLED;var e=this._recorder;null!=e&&A(e,S.default.PTT_RESULT_TYPE.CANCELLED)}}isStopped(){return this._state===I.STOPPED||this._state===I.CANCELLED}getData(){var e=(0,o.default)(this._recorder,"this._recorder");return this._chat.regCancellablePromise(e.getBlob().then((e=>C.default.createFromData(e,e.type))))}getDataForPlayback(){var e=this;return(0,s.default)((function*(){var t=(0,o.default)(e._recorder,"_this2._recorder"),a=yield t.getBlob(),r=yield(0,E.transcode)(a);return C.default.createFromData(r,r.type)}))()}getWaveformSampleRate(){return 6}send(){var e=this;return(0,s.default)((function*(){var t=(0,o.default)(e._recorder,"_this3._recorder"),a=e._chat;A(t,S.default.PTT_RESULT_TYPE.SENT);var r=e.getData(),i=a.getComposeContents().ctwaContext||void 0;(0,v.prepRawMedia)(r,{isPtt:!0,precomputedFields:{duration:~~t.duration,waveform:new Uint8Array(e.getScaledWaveformSamples())}}).sendToChat(a,{quotedMsg:a.composeQuotedMsg||void 0,addEvenWhilePreparing:!0,ctwaContext:i}),a.composeQuotedMsg=null,e.stop(),yield r.catch((0,n.filteredCatch)(Promise.CancellationError,(()=>{})))}))()}}},17413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(0===e.length)return new Array(t).fill(0);var a;if(1===e.length)a=0;else{var r=(t-e.length)/(e.length-1);a=1/(1+r)}var i=[];t>=1&&i.push(e[0]);for(var s=1;s<t-1;s++){var l=s*a,n=Math.floor(l);i.push((o=e[n],d=e[Math.ceil(l)],o+(d-o)*(l-n)))}var o,d;t>=2&&i.push(e[e.length-1]);return i}},2908:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var[t,{width:a,height:r}]=(0,_.default)(),i=0===a||0===r?null:l.default.createElement(C,(0,s.default)({},e,{width:a,height:r}));return l.default.createElement("div",{ref:t,className:v.default.container},l.default.createElement("div",{className:v.default.containerInner},i))},t.WaveformMode=t.WaveformTheme=void 0;var s=i(a(67154)),l=r(a(67294)),n=i(a(44386)),o=i(a(47826)),d=i(a(8238)),u=i(a(47072)),c=i(a(17413)),f=i(a(18259)),h=i(a(82415)),p=i(a(2810)),m=i(a(10172)),_=i(a(83936)),v=i(a(46497)),g=a(54302).Mirrored(["DRAFT_LIGHT","DRAFT_DARK","CONVERSATION_INCOMING_LIGHT","CONVERSATION_INCOMING_DARK","CONVERSATION_OUTGOING_LIGHT","CONVERSATION_OUTGOING_DARK"]);t.WaveformTheme=g;var E=a(54302).Mirrored(["RECORDER","PREVIEW"]);t.WaveformMode=E;var S=new Map([[g.DRAFT_LIGHT,{barColorPlayed:"#00897b",barColorUnplayed:"#bfbfbf"}],[g.DRAFT_DARK,{barColorPlayed:"#00af9c",barColorUnplayed:"#c4c4c4"}],[g.CONVERSATION_OUTGOING_LIGHT,{barColorPlayed:"#43b4ff",barColorUnplayed:"#a5ba94"}],[g.CONVERSATION_OUTGOING_DARK,{barColorPlayed:"#43b4ff",barColorUnplayed:"#769698"}],[g.CONVERSATION_INCOMING_LIGHT,{barColorPlayed:"#43b4ff",barColorUnplayed:"#bfbfbf"}],[g.CONVERSATION_INCOMING_DARK,{barColorPlayed:"#68bbe4",barColorUnplayed:"#71777b"}]]);var C=e=>{var t=(0,l.useRef)(),{getSamples:a,sampleRate:r,width:i,height:s,getCurrentTime:_,getDuration:v,live:g,theme:C,mode:T,onSeek:I,onSeekEnd:P,disabled:A,tabIndex:N}=e,O=(0,d.default)(S.get(C),"ThemeValues.get(theme)"),D=(0,p.default)(),[w,R]=(0,l.useState)(null),[k,L]=(0,l.useState)({value:_(),max:v()}),x=(0,h.default)((()=>{L({value:_(),max:v()})}),500),F=(0,l.useCallback)((()=>{x(),x.flush()}),[x]);(0,l.useEffect)((()=>{T===E.PREVIEW&&F()}),[T,F]);var B=(0,m.default)((()=>(0,o.default)((({samples:e,desiredSize:t})=>(0,c.default)(e,t)),((e,t)=>e.samples===t.samples&&e.samples.length===t.samples.length&&e.desiredSize===t.desiredSize)))),G=(0,l.useCallback)((()=>{x(),function(e){var{canvas:t,width:a,height:r,currentTime:i,duration:s,sampleRate:l,themeValues:n,mode:o,pixelRatio:d,scaleSamples:u}=e,c=o===E.PREVIEW,f=c?u({samples:e.samples,desiredSize:Math.floor(a/y)}):e.samples,h=t.getContext("2d");h.lineCap="round",h.setTransform(d,0,0,d,0,0);var p=c?0:a-s*l*y,m=o===E.PREVIEW?i/s*a:0,_=p>0?0:Math.floor(-p/y);h.clearRect(0,0,a,r);var v=_,g=p+_*y;for(;v<f.length&&g<a;){var S=g+1.25,C=void 0;if(c)C=1;else{var T=S,I=a-(S+3);C=M(T<I?Math.min(1,T/25):Math.min(1,I/7))}var P=Math.max(0,C*(4+f[v]*(r-4)));b(h,n,S,(r-P)/2,3,P,m),v+=1,g+=y}}({canvas:(0,d.default)(t.current,"canvasRef.current"),samples:a(),width:i,height:s,currentTime:null!=w?w:_(),duration:v(),sampleRate:r,themeValues:O,mode:T,pixelRatio:D,scaleSamples:B.current})}),[t,a,i,s,_,w,v,r,O,T,x,D,B]);(0,f.default)(G,{active:g}),(0,l.useEffect)((()=>{g||G()}),[g,G]);var U=(0,l.useCallback)((e=>{null==I||I(e),R(e),G()}),[R,I,G]),j=(0,l.useCallback)((e=>{R(null),null==I||I(e),P(e),G(),F()}),[R,I,P,G,F]),V=l.default.createElement("canvas",{ref:t,width:D*i,height:D*s,style:{width:`${i}px`,height:`${s}px`}});if(T===E.RECORDER)return V;var{value:H,max:W}=k,Y=n.default.durationStr(H)+"/"+n.default.durationStr(W);return l.default.createElement(u.default,{value:H,valueText:Y,min:0,max:W,smallSkip:1,largeSkip:10,onChange:U,onCommit:j,disabled:A,tabIndex:N},V)},y=5.5;function b(e,t,a,r,i,s,l){if(0!==i&&0!==s){e.strokeStyle=l>=a+i?t.barColorPlayed:t.barColorUnplayed;var n=Math.min(i/2,s/2);e.lineWidth=2*n,e.beginPath(),e.moveTo(a+i/2,r+n),e.lineTo(a+i/2,r+s-n),e.stroke(),l>a&&l<a+i&&(e.globalCompositeOperation="source-atop",e.fillStyle=t.barColorPlayed,e.rect(a,r,l-a,s),e.fill(),e.globalCompositeOperation="source-over")}}function M(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},46613:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(48926)),l=i(a(94184)),n=i(a(63337)),o=r(a(67294)),d=i(a(44386)),u=i(a(62886)),c=i(a(80896)),f=i(a(85726)),h=a(50520),p=i(a(4728)),m=i(a(71533)),_=i(a(21325)),v=i(a(47809)),g=i(a(26144)),E=i(a(4328));class S extends o.PureComponent{constructor(...e){var t;super(...e),t=this,this._cancelButtonRef=(0,o.createRef)(),this._lastRecordingStartTime=0,this.state={state:"ready",elapsed:0},this._stopRecording=(e=!1)=>{var t,a;(this.setState({state:"ready",elapsed:0}),this.props.onRecState(!1),e)?null===(t=this._recordingSession)||void 0===t||t.cancel():null===(a=this._recordingSession)||void 0===a||a.stop();this._recordingSession=null},this._onPTTReady=()=>{"delay"===this.state.state&&this.setState({state:"recording"})},this._handleCancelButtonConfirm=()=>{"ready"!==this.state.state&&(Date.now()-this._lastRecordingStartTime<250||(this._cancelPTTTimer(),this._stopRecording(!0)))},this._handleSendButtonConfirm=()=>{"recording"===this.state.state&&(this._cancelPTTTimer(),this.setState({state:"processing"}),this.props.onRecState(!1),(0,n.default)(this._recordingSession,"this._recordingSession").send().finally((()=>{this._stopRecording()})),this.props.onRecordingSent())},this._startRecord=(0,s.default)((function*(){if("ready"===t.state.state){var e=t._recordingSession=new _.default({chat:t.props.chat,onDurationChange:e=>{var a=t.state.elapsed;Math.round(e)!==a&&t.setState({elapsed:e})}});yield e.start(),e.isStopped()||(t._lastRecordingStartTime=Date.now(),t.setState({state:"delay"}),t.props.onRecState(!0),t._pttTimer=t.props.setTimeout(t._onPTTReady,1500))}}))}componentDidMount(){this.props.listeners.add(window,"blur",(()=>{this._stopRecording()}))}componentWillUnmount(){this._stopRecording()}componentDidUpdate(e,t){"delay"===this.state.state&&"delay"!==t.state&&u.default.focus(this._cancelButtonRef.current)}_cancelPTTTimer(){null!=this._pttTimer&&(this.props.clearTimeout(this._pttTimer),this._pttTimer=null)}render(){var e=this.state.state,t="delay"===e||"recording"===e?o.default.createElement(g.default,{displayName:"PTT",popable:!0,escapable:!0},o.default.createElement("div",{className:p.default.recording,key:"recording"},o.default.createElement(h.PttCancelButton,{ref:this._cancelButtonRef,onConfirm:this._handleCancelButtonConfirm}),o.default.createElement("div",{className:p.default.pttCounter,"data-animate-ptt-counter":!0},d.default.durationStr(this.state.elapsed)),o.default.createElement(h.PttSendButton,{onConfirm:this._handleSendButtonConfirm}))):null,a="ready"===e||"processing"===e?o.default.createElement("div",{key:"button",className:p.default.pttStartRecordingButtonContainer},o.default.createElement(m.default,{disabled:"processing"===e,onConfirm:this._startRecord})):null,r=(0,l.default)(p.default.container,{[p.default.active]:!!t});return o.default.createElement("div",{className:r},o.default.createElement(E.default,{transitionName:"ptt"},t||a))}}S.displayName="PttRecorder";var C=(0,f.default)((0,v.default)((0,c.default)(S)));t.default=C},71533:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{onConfirm:a}=e,r=null!==(t=e.disabled)&&void 0!==t&&t;return i.default.createElement("button",{"data-a8n":s.default.key("ptt-ready-btn"),className:d.default.btnPtt,onMouseDown:e=>{0===e.button&&a()},onKeyPress:e=>{e.key!==c.ENTER&&e.key!==c.SPACE||(e.preventDefault(),e.stopPropagation(),a())},disabled:r,"aria-label":o.default.t(31),"data-tab":r?void 0:l.default.TAB_ORDERS.PTT_BUTTON},i.default.createElement(u.default,{name:"ptt"}))};var i=r(a(67294)),s=r(a(55847)),l=r(a(75444)),n=r(a(25116)),o=r(a(80162)),d=r(a(45086)),u=r(a(32885)),{KEYBOARD_EVENT_KEY_VALUE:c}=n.default},32088:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(97308),n=r(a(87224)),o=r(a(27809)),d=r(a(62685)),u=r(a(33766)),c=r(a(51115)),f=r(a(75444)),h=r(a(77188)),p=r(a(83288)),m=r(a(53150)),_=r(a(80162)),v=r(a(80896)),g=r(a(97914)),E=a(26658),S=r(a(41975)),C=a(80338),y=r(a(80354)),b=r(a(72765)),M=a(6578);class T extends s.PureComponent{constructor(...e){super(...e),this._confirmReportGroupSpam=()=>{u.default.openModal(s.default.createElement(g.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>u.default.closeModal()}))},this._exitChat=()=>{u.default.deleteOrExitChat(this.props.chat)},this._confirmReportSpam=()=>{u.default.openModal(s.default.createElement(g.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>u.default.closeModal()}))},this.reportSpam=()=>{(0,E.sendSpamReport)(this.props.chat,C.SpamFlow.Chat),u.default.closeModal()},this.reportSpamExitClear=()=>{(0,E.sendSpamExitClear)(this.props.chat,C.SpamFlow.Block),u.default.closeModal()},this.reportSpamBlockClear=()=>{(0,E.sendSpamBlockClear)(this.props.chat,C.SpamFlow.Block),u.default.closeModal()},this.notSpam=()=>{(0,E.sendNotSpam)(this.props.chat,!0).catch((()=>{}))},this._confirmBlock=()=>{u.default.openModal(s.default.createElement(n.default,{contact:this.props.contact,onCancel:()=>u.default.closeModal(),onBlock:this.block,onReportSpamBlock:this.reportSpamBlock}))},this.block=()=>{(0,l.blockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this.reportSpamBlock=()=>{(0,E.sendSpamReport)(this.props.chat,C.SpamFlow.Block),(0,l.blockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this._confirmUnblock=()=>{u.default.openModal(s.default.createElement(c.default,{okText:_.default.t(1574),onOK:this.unblock,cancelText:_.default.t(1768),onCancel:()=>u.default.closeModal()},_.default.t(1575,{contact:this.props.contact.formattedName})))},this.unblock=()=>{(0,l.unblockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this._getNotSpamButton=()=>s.default.createElement("div",{key:"not_spam",className:S.default.button},s.default.createElement(d.default,{onClick:this.notSpam,type:"plain-white"},_.default.t(1941))),this._onViewInfo=()=>{u.default.openDrawerRight(s.default.createElement(m.default,{chat:(0,M.unproxy)(this.props.chat),key:`info-${this.props.chat.id.toString()}`}),"slide-left",this.props.uim)}}componentDidMount(){this.props.listeners.add(o.default,"add remove reset",(()=>{this.forceUpdate()}))}render(){var{chat:e,contact:t}=this.props;if(e.isPSA||!e.shouldAppearInList||e.trusted)return null;var a,r=o.default.get(e.id),i=[];if(e.isGroup)a=_.default.t(858),i.push(s.default.createElement("div",{key:"report_spam",className:S.default.button},s.default.createElement(d.default,{type:"plain-white",onClick:this._confirmReportGroupSpam},_.default.t(1388)))),i.push(s.default.createElement("div",{key:"exit_group",className:S.default.button},s.default.createElement(d.default,{type:"plain-white",onClick:this._exitChat},_.default.t(1814)))),i.push(this._getNotSpamButton());else{if(a=s.default.createElement("div",{className:S.default.text},_.default.t(1493)),t.isBusiness)if(h.default.supportsFeature(h.default.F.VNAME_V_2)){var l=t.verifiedLevel===f.default.VERIFIED_LEVEL.HIGH?_.default.t(1288):_.default.t(1056);a=s.default.createElement("div",{className:S.default.text},l)}else t.verifiedLevel>f.default.VERIFIED_LEVEL.UNKNOWN&&t.businessProfile&&(a=s.default.createElement(y.default,{contact:t,businessProfile:t.businessProfile,onClick:this._onViewInfo}));i.push(s.default.createElement("div",{key:"report_spam",className:S.default.button},s.default.createElement(d.default,{type:"plain-white",onClick:this._confirmReportSpam},_.default.t(1388)))),r?i.push(s.default.createElement("div",{key:"unblock",className:S.default.button},s.default.createElement(d.default,{onClick:this._confirmUnblock,type:"plain-white"},_.default.t(1574)))):i.push(s.default.createElement("div",{key:"block",className:S.default.button},s.default.createElement(d.default,{onClick:this._confirmBlock,type:"plain-white"},_.default.t(299)))),i.push(this._getNotSpamButton())}return s.default.createElement("div",{className:S.default.spam},a,s.default.createElement("div",{className:S.default.controls},i))}}T.CONCERNS={chat:["id","isPSA","shouldAppearInList","trusted","isGroup","vcardDismissed"],contact:["id","isBusiness","verifiedLevel","formattedName","businessProfile"]},T.displayName="Spam";var I=(0,p.default)((0,v.default)((0,b.default)(T,T.CONCERNS)));t.default=I},80354:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r,h,p=(0,f.default)(e.contact,["id","verifiedLevel","formattedName"]),m=(0,f.default)(e.businessProfile,["stale","structuredAddress","description"]),{id:_,formattedName:v,verifiedLevel:g}=p;if(m.stale)r=i.default.createElement("div",null,i.default.createElement(u.default,{size:20,stroke:5}));else{var E=m.structuredAddress&&(e=>{var{streetAddress:t,localizedCityName:a,zipCode:r}=e;return t&&a&&r?o.default.t(396,{streetAddress:t,city:a,zipCode:r}):t&&a?o.default.t(395,{streetAddress:t,city:a}):t})(m.structuredAddress);E&&(t=i.default.createElement("div",{className:d.default.address},i.default.createElement(n.default,{selectable:!0,direction:"auto",text:E}))),m.description&&(a=i.default.createElement("div",{className:d.default.description,title:m.description},i.default.createElement(n.default,{selectable:!0,direction:"auto",text:m.description})))}g===s.default.VERIFIED_LEVEL.HIGH&&(h=i.default.createElement("div",{className:d.default.badge},i.default.createElement(c.default,{name:"psa-verified"})));return i.default.createElement("div",{className:d.default.container,onClick:e.onClick},i.default.createElement("div",{className:d.default.image},i.default.createElement(l.default,{id:_,size:55}),h),i.default.createElement("div",{className:d.default.body},i.default.createElement("div",{className:d.default.name},v),r,t,a))};var i=r(a(67294)),s=r(a(75444)),l=r(a(17367)),n=r(a(20923)),o=r(a(80162)),d=r(a(78894)),u=r(a(69507)),c=r(a(32885)),f=r(a(95607))},14674:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(62685)),n=r(a(33766)),o=r(a(23526)),d=r(a(83288)),u=r(a(41849)),c=r(a(72765)),f=r(a(27311));class h extends s.PureComponent{constructor(...e){super(...e),this.onViewContact=()=>{n.default.openDrawerRight(s.default.createElement(o.default,{chat:this.props.chat}),"slide-left",this.props.uim)}}render(){var{chat:e,dismissVcardPanel:t}=this.props,a=e.receivedVcardMsgs;return s.default.createElement("div",{className:f.default.vcard},s.default.createElement(u.default,{id:826,plural:a.length}),s.default.createElement("div",{className:f.default.controls},s.default.createElement(l.default,{onClick:this.onViewContact,type:"plain-white"},s.default.createElement(u.default,{id:1636,plural:a.length})),s.default.createElement(l.default,{onClick:t,type:"plain-white"},s.default.createElement(u.default,{id:1270}))))}}h.CONCERNS={chat:["receivedVcardMsgs"]},h.displayName="VcardPanel";var p=(0,d.default)((0,c.default)(h,h.CONCERNS));t.default=p},50698:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(9019),l=i(a(67294)),n=i(a(33766)),o=i(a(51115)),d=a(77824),u=i(a(59986)),c=a(26226),f=i(a(80162)),h=r(a(66802)),p=i(a(13702)),m=i(a(69507));class _ extends u.default{constructor(...e){super(...e),this._cancel=()=>{this._queryChatPromise&&this._queryChatPromise.cancel(),this._queryChatPromise=void 0,this.end()},this.error=()=>{this.push(l.default.createElement(o.default,{onOK:()=>this.end(),okText:f.default.t(1941)},f.default.t(1163)))}}componentDidMount(){var e=!1,t=(0,s.delayMs)(250).cancellable().then((()=>{e=!0,this.push(l.default.createElement(o.default,{title:f.default.t(1507),onCancel:this._cancel,cancelText:f.default.t(1768)},l.default.createElement("div",{className:p.default.spinner},l.default.createElement(m.default,{stroke:6,size:24}))))})).catchType(Promise.CancellationError,(()=>{})),a=Date.now();this._queryChatPromise=(0,d.findChat)(this.props.chatId).cancellable().then((r=>{e||t.cancel();var i=Date.now()-a,l=e?Math.max(750-i,0):0;return this.openChat(r),(0,s.delayMs)(l).then((()=>{this.end(),this.props.onSuccess(r)}))})).catchType(Promise.CancellationError,(()=>{})).catch((e=>{t.cancel(),this.error(e)}))}openChat(e){var{msgText:t}=this.props,a=this.props.ctwaContextLinkData;if(a){var r=h.findLink(a.sourceUrl||"",!1,(0,c.getMaybeMeUser)());r&&r.suspiciousCharacters&&r.suspiciousCharacters.size>0&&(a=null)}a&&(t=a.icebreaker),e.active&&t?(n.default.pasteChatTextInput(e,t),a&&n.default.setChatCtwaContextLinkData(e,a)):(t&&e.setComposeContents({text:t}),n.default.openChatFromUnread(e).then((t=>{t&&(n.default.focusChatTextInput(e),a&&n.default.setChatCtwaContextLinkData(e,a))})))}}t.default=_,_.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},37065:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(17938),n=i(a(33766)),o=i(a(75444)),d=i(a(59986)),u=i(a(80162)),c=r(a(72352));class f extends d.default{constructor(...e){super(...e),this._onStartGroupCall=e=>{this.props.onStartGroupCall(e.map((e=>e.id))),n.default.closeModal()},this.contactFilter=e=>!this.props.groupParticipants||!!this.props.groupParticipants.find((t=>t.equals(e.id))),this._pop=()=>{this.pop()}}componentDidMount(){this.push(s.default.createElement(c.default,{title:this.props.isVideo?u.default.t(919):u.default.t(920),filter:this.contactFilter,onCancel:this._pop,onConfirm:this._onStartGroupCall,listType:c.ListType.PARTICIPANT_MANAGE_MODAL,maxItems:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,maxItemsExceedErrorMsg:u.default.t(1704,{count:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,_plural:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS}),singleSelectionFooterType:this.props.isVideo?l.FooterType.VIDEO_CALL:l.FooterType.VOICE_CALL,multipleSelectionFooterType:this.props.isVideo?l.FooterType.VIDEO_CALL:l.FooterType.VOICE_CALL,allowBlockedContacts:!1}))}}t.default=f},59986:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(63337)),l=r(a(67294)),n=i(a(42438)),o=i(a(26144)),d=i(a(30892)),u=i(a(4328));class c extends l.Component{constructor(...e){super(...e),this.state={_stack:[],_transition:"default",_activeKey:0,_ended:!1},this.setRefUIE=e=>{this.refUIE=e},this.popAndUpdate=(e,t)=>{var a=this.state._stack;if(a.length<2)this.pop(t);else{var r=(0,l.cloneElement)(a[a.length-2],e);a[a.length-2]=r,this.pop(t)}},this.push=(e,t=this.props.pushTransition)=>{this.setState({_stack:this.state._stack.concat(e),_transition:t,_activeKey:++this.state._activeKey,_ended:!1})},this.pop=(e=this.props.popTransition)=>{var t=this.state._stack.slice(0,-1);t.length?this.setState({_stack:t,_transition:e,_activeKey:--this.state._activeKey}):this.state._ended||this.setState({_ended:!0},this.end)},this.end=e=>{this.props.onEnd?this.props.onEnd(e):(0,s.default)(this.context,"this.context").uie.requestDismiss(e)},this.stackSize=()=>this.state._stack.length,this.requestFocus=()=>{this.props.requestFocus&&this.props.requestFocus()}}handleRequestDismiss(){this.pop()}render(){var{_stack:e,_transition:t,_activeKey:a}=this.state;if(0===e.length)return null;var r=e[e.length-1];return r=l.default.createElement(o.default,{displayName:`FlowDrawer${a}`,key:a,escapable:!0,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.handleRequestDismiss.bind(this)},r),l.default.createElement(u.default,{transitionName:t,className:n.default.container},this.props.removeTopDrawer?r:e)}}t.default=c,c.contextType=d.default,c.defaultProps={removeTopDrawer:!0,pushTransition:"flow-transition-drawer-push",popTransition:"flow-transition-drawer-pop"},c.displayName="FlowComponent"},72765:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r,u,c=(0,o.default)(e);t||a||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`StateHOC wrapping class with no concerns, check ${c}`));var f=[];if(t)for(var h in t)f.push(new n.default(c,h,t[h],!0));if(a)for(var p in a)t&&t.hasOwnProperty(p)&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`Component has marked "${p}" as both a normal and weak concern, check ${c}`)),f.push(new n.default(c,p,a[p],!1));return u=r=class t extends d.WrappedComponent{constructor(e){super(e),this._rr=(e,t)=>{this.setState((a=>({proxies:(0,s.default)((0,s.default)({},a.proxies),{},{[e.name]:e.createProxy(t)})})))};for(var a={},r=!1,i=0;i<f.length;i++){var l=f[i],n=l.name,o=l.getModelAndValidate(t._getModelOrProxy(n,e));if(o){var d=l.createProxy(o);l.attachConcern(o,d.proxyBitMask,this._rr),a[n]=d}else r=!0}this.state={props:e,proxies:a,hasBroken:r}}static _getModelOrProxy(e,t){return t[e]}static getDerivedStateFromProps(e,a){var r=(0,s.default)({},a.proxies),i=!1;if(!a.hasBroken)for(var l=a.props,n=0;n<f.length;n++){var o=f[n],d=o.name,u=o.getModel(t._getModelOrProxy(d,l)),c=o.getModelAndValidate(t._getModelOrProxy(d,e));u!==c&&(c?r[d]=o.createProxy(c):i=!0)}return{props:e,proxies:r,hasBroken:i}}componentDidUpdate(e){if(!this.state.hasBroken)for(var a=0;a<f.length;a++){var r=f[a],i=r.name,s=r.getModel(t._getModelOrProxy(i,e)),l=r.getModelAndValidate(t._getModelOrProxy(i,this.props));if(s!==l&&(r.detachConcern(s,this._rr),l)){var n=this.state.proxies[i];r.attachConcern(l,n.proxyBitMask,this._rr)}}}componentWillUnmount(){if(!this.state.hasBroken)for(var e=0;e<f.length;e++){var a=f[e];a.detachConcern(a.getModel(t._getModelOrProxy(a.name,this.props)),this._rr)}}_getComponent(){return d._getComponent.call(this)}render(){var{proxies:t,hasBroken:a,hasError:r}=this.state;return a||r?null:l.default.createElement(e,(0,i.default)({ref:this.setComponent},this.props,t))}},r.displayName=`State(${c})`,u};var i=r(a(67154)),s=r(a(81109)),l=r(a(67294)),n=r(a(83012)),o=r(a(19093)),d=a(44233)},64190:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleLabelId=p,t.renderLabelSvg=_,t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(20923)),o=i(a(77188)),d=a(34605),u=i(a(18627)),c=i(a(72863)),f=i(a(80896)),h=i(a(32885));function p(e){if(0!==e.length){if(!o.default.supportsFeature(o.default.F.MD_BACKEND))return e[0];var t=Math.max(...e.map((e=>parseInt(e,10))));return isNaN(t)?e[0]:t.toString()}}class m extends l.PureComponent{constructor(...e){super(...e),this._forceUpdate=()=>{this.forceUpdate()}}componentDidMount(){var e=p(this.props.labels);null!=e&&this._listenToLabelChange(e)}componentDidUpdate(e){var t=p(e.labels),a=p(this.props.labels);a!==t&&(null!=a&&this._listenToLabelChange(a),null!=t&&this._unlistenToLabelChange(t))}_listenToLabelChange(e){this.props.listeners.add(u.default,`label_updated_${e}`,this._forceUpdate)}_unlistenToLabelChange(e){this.props.listeners.remove(u.default,`label_updated_${e}`,this._forceUpdate)}render(){var{labels:e,showName:t,renderAsCircle:a}=this.props;if(!(0,d.canDisplayLabel)())return null;var r=function(e){var t=p(e);return null==t?null:u.default.get(t)}(e);if(!r||!r.name)return null;if(1===e.length){var i=t?l.default.createElement("span",{className:c.default.name},l.default.createElement(n.default,{text:r.name})):null,o=(0,s.default)({[c.default.container]:!t&&!a,[c.default.containerCircleIconFull]:!!a,[c.default.containerFull]:t&&!a,[c.default.labelFilter]:"label-filter"===this.props.theme,[c.default.drawerTitle]:"drawer-title"===this.props.theme}),f=a?{backgroundColor:r.hexColor}:{},m=a?l.default.createElement(h.default,{name:"label",className:c.default.icon}):_(r.hexColor);return l.default.createElement("div",{className:o},l.default.createElement("div",{className:(0,s.default)(c.default.iconContainer,{[c.default.circleIcon]:a}),style:f},m),i)}return l.default.createElement("div",{className:c.default.container},l.default.createElement("svg",{width:"18px",height:"15px",viewBox:"0 0 18 15"},l.default.createElement("path",{fill:r.hexColor,d:"M11.208,3.925H2.236C1.556,3.925,1,4.565,1,5.357v7.213C1,13.362,1.556,14,2.236,14h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,4.53C11.993,4.162,11.622,3.925,11.208,3.925z"}),l.default.createElement("path",{fill:"currentColor",d:"M15.541,7.832L13.164,3.93 c-0.423-0.698-1.15-1.142-1.956-1.142H2.595V2.432C2.595,1.64,3.151,1,3.831,1h9.1c0.414,0,0.782,0.237,1.005,0.605l2.696,4.433 L15.541,7.832z"})))}}function _(e){return l.default.createElement("svg",{key:2,width:"18px",height:"12px",viewBox:"0 0 18 12",className:c.default.icon},l.default.createElement("path",{fill:e||"#ffffff",d:"M11.208,0.925H2.236C1.556,0.925,1,1.565,1,2.357V9.57C1,10.362,1.556,11,2.236,11h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,1.53C11.993,1.162,11.622,0.925,11.208,0.925z"}))}m.displayName="LabelIcon";var v=(0,f.default)(m);t.default=v},43379:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,31743)).then((e=>e.default))),"AddContactToGroupFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1894),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},19472:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,34169)).then((e=>e.default))),"ArchivedFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},60545:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,25093)).then((e=>e.default))),"AttachMediaFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},357:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,59128)).then((e=>e.default))),"AttachProductsFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1492),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},68837:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,60178)).then((e=>e.default))),"AttachVcardsFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1466),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},88622:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,37196)).then((e=>e.default))),"CaptureFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},69206:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(10833)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,37964)).then((e=>e.default))),"CartFlowLoadable");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},73602:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openCatalogManagementFlow=function(e,t){var a=(0,u.getMeUser)(),r=(0,h.buildProductCatalogContext)(new p.default,(0,d.getMaybeBizPlatformForLogging)(a.toString()),t),s=l.default.get(a);null==s?l.default.find(a).then((t=>{n.default.openDrawerLeft(i.default.createElement(_,{catalog:t,catalogId:a,product:e}),void 0,void 0,r)})).catch((()=>{n.default.openDrawerLeft(i.default.createElement(_,{catalogId:a,product:e}),void 0,void 0,r)})):(s.stale=!0,s.markProductCollectionOld(),n.default.openDrawerLeft(i.default.createElement(_,{catalog:s,catalogId:a,product:e}),void 0,void 0,r))},t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75204)),n=r(a(33766)),o=r(a(75444)),d=a(98355),u=a(26226),c=r(a(80162)),f=r(a(48712)),h=a(38335),p=r(a(68290)),m=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,43041)).then((e=>e.default))),"CatalogManagementFlow");t.requireBundle=m;var _=(0,s.default)({loader:m,loading:e=>i.default.createElement(f.default,{title:c.default.t(987),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY}),v=_;t.default=v},54354:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(73252)),o=r(a(21884)),d=r(a(70481)),u=(0,o.default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,70481)).then((e=>e.default))),"ComposeBoxPanels");t.requireBundle=u;(0,s.default)({loader:u,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});var c=d.default;t.default=c},22294:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,39564)).then((e=>e.default))),"ContactMsgInfoFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1120),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},81482:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(75553)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,13305)).then((e=>e.default))),"ContactUsModal");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1540),okText:n.default.t(1469),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},95501:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,491)).then((e=>e.default))),"EditCaptureFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},74344:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,2314)).then((e=>e.default))),"ForwardMessageFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(819,{_plural:1}),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},29639:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,91272)).then((e=>e.default))),"GroupInviteLinkDrawer");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(873),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},83476:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,89482)).then((e=>e.default))),"GroupMsgInfoFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},91730:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(75553)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,69854)).then((e=>e.default))),"GroupV4InviteFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{okText:n.default.t(1891),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},53150:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,65369)).then((e=>e.default))),"InfoFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},69172:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,49551)).then((e=>e.default))),"LabelFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1e3),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},28482:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(75553)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,76227)).then((e=>e.default))),"LicensesPopup");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1003),okText:n.default.t(1941),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},495:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ExpiredLocationDrawerLoadable=t.LiveLocationDrawerLoadable=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,20025)).then((e=>({LiveLocationDrawer:e.LiveLocationDrawer,ExpiredLocationDrawer:e.ExpiredLocationDrawer})))),"LiveLocationDrawer");t.requireBundle=d;var u=(0,s.default)({loader:()=>d().then((e=>e.LiveLocationDrawer)),loading:e=>i.default.createElement(o.default,{title:n.default.t(1035),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.LiveLocationDrawerLoadable=u;var c=(0,s.default)({loader:()=>d().then((e=>e.ExpiredLocationDrawer)),loading:e=>i.default.createElement(o.default,{title:n.default.t(1011),error:Boolean(e.error),retry:e.retry}),delay:l.default.LOADABLE_DELAY});t.ExpiredLocationDrawerLoadable=c},3862:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireSetHandlers=t.requireVoipCommonDisabled=t.requireVoip=t.requireCallCollection=t.requireStickerPackCollection=t.requireMsgCollection=t.requireChatCollection=t.requireLabelCollection=t.requireHandleVideoStreamingRequest=t.requireClearAppStates=t.requireStatusV3Collection=t.requireEmojiAssetMapCreator=t.requireEmojiConfig=t.requireHandleSocketMessage=t.requireLoadProtoVersions=t.requireContactCollection=t.requireMain=void 0;t.requireMain=()=>a(99773).Z;t.requireContactCollection=()=>a(62899).default;t.requireLoadProtoVersions=()=>({features:a(5256).Z,17:a(70559).Z});t.requireHandleSocketMessage=()=>a(72714).default;t.requireEmojiConfig=()=>({APPLE:{UNICODE_TO_EMOJI:a(15327).Z,SELECTOR:"apple"},WHATSAPP:{UNICODE_TO_EMOJI:a(225).Z,SELECTOR:"wa"}});t.requireEmojiAssetMapCreator=()=>a(8661).default;t.requireStatusV3Collection=()=>a(11818).default;t.requireClearAppStates=()=>a(18392).Z;t.requireHandleVideoStreamingRequest=()=>a(12928).D;t.requireLabelCollection=()=>a(18627).default;t.requireChatCollection=()=>a(74798).default;t.requireMsgCollection=()=>a(33048).default;t.requireStickerPackCollection=()=>a(3264).default;t.requireCallCollection=()=>a(57055).default;t.requireVoip=()=>a(17245).default;t.requireVoipCommonDisabled=()=>a(38786);t.requireSetHandlers=()=>a(85421).y},38352:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(92997),l=r(a(80162)),n=r(a(25879)),o=r(a(32885));function d(e){return i.default.createElement("div",null,i.default.createElement("div",{className:n.default.circle},i.default.createElement(o.default,{name:"live-location-refresh"})),i.default.createElement("div",{className:n.default.text},e.text))}function u(e){var{error:t,text:a,retry:r}=e;return i.default.createElement("div",{className:n.default.container,onClick:t?r:null},t?i.default.createElement(d,{text:a}):i.default.createElement(s.Loading,null))}u.defaultProps={text:l.default.t(1001),retry:()=>window.location.reload()};var c=u;t.default=c},10833:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement("div",null,i.default.createElement(s.default,{error:e.error}))};var i=r(a(67294)),s=r(a(38352))},73252:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)({[o.default.panelBodyError]:e.error},o.default.panelBody);return s.default.createElement("div",null,s.default.createElement("div",{className:l.default.container}),s.default.createElement("div",{className:o.default.gifPanel},s.default.createElement("div",{className:u.default.barContainer}),s.default.createElement("div",{className:o.default.bodyContainer},s.default.createElement("div",{className:t},s.default.createElement("div",{className:n.default.noResults},s.default.createElement(d.default,e))))))};var i=r(a(94184)),s=r(a(67294)),l=r(a(64827)),n=r(a(1659)),o=r(a(91258)),d=r(a(38352)),u=r(a(50320))},75553:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement(l.default,{title:e.title,onOK:()=>{},okText:e.okText,okDisabled:!0,onCancel:()=>s.default.closeModal()},i.default.createElement("div",{className:o.default.container},i.default.createElement(n.default,{error:e.error})))};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(38352)),o=r(a(86690))},48712:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(6479)),l=r(a(67294)),n=i(a(64120)),o=i(a(39490)),d=r(a(55977)),u=i(a(83288)),c=i(a(38352));class f extends l.PureComponent{constructor(...e){super(...e),this.onCancel=()=>{this.props.uim.uie.requestDismiss()}}render(){var e=this.props,{title:t,headerType:a,uim:r}=e,i=(0,s.default)(e,["title","headerType","uim"]);return l.default.createElement(n.default,null,l.default.createElement(d.default,{title:t,type:a,onCancel:this.onCancel}),l.default.createElement(o.default,null,l.default.createElement(c.default,i)))}}f.defaultProps={headerType:d.DRAWER_HEADER_TYPE.SMALL},f.displayName="BaseLoadingDrawer";var h=(0,u.default)(f);t.default=h},59913:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)("overlay",u.default.mediaViewer),a=()=>l.default.closeModalMedia();return s.default.createElement("div",null,s.default.createElement("div",{className:t,"data-animate-media-viewer":!0},s.default.createElement("div",{className:d.default.mediaPanelHeader},s.default.createElement("div",{className:d.default.info}),s.default.createElement("div",{className:d.default.mediaPanelTools},s.default.createElement(c.MenuBar,{key:"media-panel-header",theme:"strong"},s.default.createElement(c.MenuBarItem,{a8nText:"btn-close",icon:s.default.createElement(f.default,{name:"x-viewer"}),title:n.default.t(1779),onClick:a})))),s.default.createElement("div",{className:u.default.mediaContent,dir:"ltr",onClick:a},s.default.createElement("div",{className:u.default.media},s.default.createElement(o.default,{error:e.error})))))};var i=r(a(94184)),s=r(a(67294)),l=r(a(33766)),n=r(a(80162)),o=r(a(38352)),d=r(a(77375)),u=r(a(80674)),c=a(97713),f=r(a(32885))},21024:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(d.default,{type:d.TowerModalType},l.default.createElement(o.default,(0,s.default)({headerType:n.DRAWER_HEADER_TYPE.POPUP},e)))};var s=i(a(67154)),l=i(a(67294)),n=a(55977),o=i(a(48712)),d=r(a(26689))},78834:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement("div",{className:n.default.container},i.default.createElement("div",{className:n.default.body,dir:"ltr"},i.default.createElement("div",{className:n.default.imageContainer},i.default.createElement("div",{className:n.default.defaultIcon},i.default.createElement(o.default,{name:e.svgName}))),e.error?i.default.createElement(l.LazyLoadRetry,{className:n.default.lazyLoadRetry,onClick:e.retry}):i.default.createElement(s.default,null)))};var i=r(a(67294)),s=r(a(59297)),l=a(92997),n=r(a(40134)),o=r(a(32885))},75746:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{error:t,text:a,retry:r}=e,c=(0,i.default)(o.default.closeButton,d.default.v3X,{}),f=(0,i.default)(o.default.closeButton,d.default.backIcon,{}),h=()=>l.default.closeModalMedia();return s.default.createElement("div",{className:d.default.viewer,"data-animate-status-v3-viewer":!0},s.default.createElement("button",{className:c,onClick:h},s.default.createElement(u.default,{name:"x-viewer"})),s.default.createElement("button",{className:f,onClick:h},s.default.createElement(u.default,{name:"back",directional:!0})),s.default.createElement(n.default,{error:t,text:a,retry:r}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(33766)),n=r(a(38352)),o=r(a(90907)),d=r(a(17394)),u=r(a(32885))},94528:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(d.default.closeButton,c.default.v3_x,{});return s.default.createElement("div",{className:c.default.modalBackground,"data-animate-status-v3-modal-background":!0},s.default.createElement("div",{className:c.default.mainWrapper},s.default.createElement("div",{className:u.default.listPanel},s.default.createElement("div",{className:u.default.panelHeader},s.default.createElement("div",{className:u.default.headerButtonsPrimary}),s.default.createElement("div",{className:u.default.headerText},s.default.createElement("span",{className:u.default.primaryHeaderText},n.default.t(1514))),s.default.createElement("div",{className:u.default.headerButtonsSecondary}))),s.default.createElement("div",{className:f.default.outStatusPanel},s.default.createElement(o.default,e)),s.default.createElement("button",{className:t,onClick:()=>l.default.closeModalMedia()},s.default.createElement(h.default,{name:"x-viewer"}))))};var i=r(a(94184)),s=r(a(67294)),l=r(a(33766)),n=r(a(80162)),o=r(a(38352)),d=r(a(90907)),u=r(a(93326)),c=r(a(64133)),f=r(a(39310)),h=r(a(32885))},58018:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,48466)).then((e=>e.default))),"ManageLabelFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(992),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},23850:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(59913)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,29656)).then((e=>e.default))),"MediaViewerFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},51176:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,40882)).then((e=>e.default))),"NewChatFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},47572:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,72523)).then((e=>e.default))),"NewGroupFlow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},21668:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.type===o.default.PROFILE?i.default.createElement(u,e):i.default.createElement(c,e)},t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(78834)),o=r(a(77031)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,57277)).then((e=>e.default))),"PhotoPicker");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(n.default,{svgName:"default-user",error:Boolean(e.error),retry:e.retry}),delay:l.default.LOADABLE_DELAY}),c=(0,s.default)({loader:d,loading:e=>i.default.createElement(n.default,{svgName:"default-group",error:Boolean(e.error),retry:e.retry}),delay:l.default.LOADABLE_DELAY})},73188:(e,t,a)=>{"use strict";var r=a(95318);t.Z=function(){return x.apply(this,arguments)};var i=r(a(48926)),s=a(43379),l=a(19472),n=a(60545),o=a(357),d=a(68837),u=a(88622),c=a(69206),f=a(22294),h=a(95501),p=a(74344),m=a(29639),_=a(83476),v=a(91730),g=a(53150),E=a(69172),S=a(495),C=a(58018),y=a(23850),b=a(51176),M=a(47572),T=a(21668),I=a(77035),P=a(32457),A=a(98263),N=a(34846),O=a(82670),D=a(86871),w=a(11761),R=a(75629),k=a(33805),L=a(98993);function x(){return(x=(0,i.default)((function*(){try{var e=[(0,y.requireBundle)(),(0,g.requireBundle)()];yield Promise.all(e);var t=[(0,P.requireBundle)(),(0,T.requireBundle)(),(0,S.requireBundle)(),(0,k.requireBundle)(),(0,n.requireBundle)(),(0,u.requireBundle)(),(0,h.requireBundle)(),(0,_.requireBundle)(),(0,b.requireBundle)(),(0,M.requireBundle)(),(0,w.requireBundle)(),(0,o.requireBundle)(),(0,N.requireBundle)(),(0,D.requireBundle)(),(0,p.requireBundle)(),(0,d.requireBundle)(),(0,I.requireBundle)(),(0,c.requireBundle)(),(0,E.requireBundle)(),(0,C.requireBundle)(),(0,s.requireBundle)(),(0,R.requireBundle)(),(0,m.requireBundle)(),(0,L.requireBundle)(),(0,A.requireBundle)(),(0,f.requireBundle)(),(0,O.requireBundle)(),(0,v.requireBundle)(),(0,l.requireBundle)()];yield Promise.all(t)}catch(e){__LOG__(3)`Error prefetching loadables: ${e.stack}`}}))).apply(this,arguments)}},77035:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,56803)).then((e=>e.default))),"ProductDetailsFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1347),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},32457:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,69978)).then((e=>e.default))),"ProfileDrawer");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},98263:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(75746)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,38908)).then((e=>e.default))),"QuotedStatusV3Flow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},21884:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=function(e){return(t,a)=>{__LOG__(3)`Loadable error: ${t.stack}`;var r=a>1?"s":"";__LOG__(4,void 0,new Error,!0)`Failed to load a component`,SEND_LOGS(`loadable:${e} failed to load after [${a}] attempt${r}`)}}(t),n="INIT",o=0;return function d(){switch(n){case"INIT":case"FAILURE":return n="INFLIGHT",a=e().then((e=>(e||r(new Error("Lazyload response is empty"),o),n="SUCCESS",e))).catch(function(){var e=(0,i.default)((function*(e){if(__LOG__(3)`Lazyload failure for component ${t}`,n="FAILURE",++o<=10)return yield(0,s.delayMs)(1e3*o),d();throw r(e,o),e}));return function(){return e.apply(this,arguments)}}());case"INFLIGHT":case"SUCCESS":return(0,l.default)(a,"inflightPromise");default:return Promise.reject(new Error("retriable_promise_hoc:promiseStatus is invalid"))}}};var i=r(a(48926)),s=a(9019),l=r(a(63337))},34846:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,28244)).then((e=>e.default))),"SendGroupInviteFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(888),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},82670:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(75553)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,11385)).then((e=>e.default))),"SendLogsPopup");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1483),okText:n.default.t(1469),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},86871:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,53800)).then((e=>e.default))),"SendMsgMultiFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1164),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},11761:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(21024)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,54115)).then((e=>e.default))),"SendProductFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1164),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},75629:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,67295)).then((e=>e.default))),"SettingsFlow");t.requireBundle=d;var u=(0,s.default)({loader:d,loading:e=>i.default.createElement(o.default,{title:n.default.t(1494),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=u},33805:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(48712)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,314)).then((e=>e.default))),"StarredDrawer");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},98993:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(94528)),o=(0,r(a(21884)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,61784)).then((e=>e.default))),"StatusV3Flow");t.requireBundle=o;var d=(0,s.default)({loader:o,loading:e=>i.default.createElement(n.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=d},25531:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=r(a(67294)),s=r(a(68356)),l=r(a(75444)),n=r(a(80162)),o=r(a(48712)),d=r(a(21884));a(42037);var u=(0,d.default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,35806)).then((e=>e.default))),"VerificationDrawer");t.requireBundle=u;var c=(0,s.default)({loader:u,loading:e=>i.default.createElement(o.default,{title:n.default.t(2069),error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY});t.default=c},52917:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var[t,a]=(0,s.useState)(null),r=()=>{l.default.closeModal()},i=e=>{a(e)},g=e.msg.list;if(!g)return null;var E;t&&(E=s.default.createElement("div",{className:c.default.controlsSummary},t.title,s.default.createElement("div",{className:c.default.btnActive},s.default.createElement(p.default,{large:!0,onClick:()=>{t&&((0,m.default)(e.msg,t),r())}},s.default.createElement(_.default,{directional:!0,name:"send"})))));return s.default.createElement(h.default,{type:h.TowerModalType},s.default.createElement(n.default,{theme:"products"},s.default.createElement(d.default,{title:g.buttonText,type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:r}),s.default.createElement(o.default,{theme:"padding"},g.sections.map(((e,a)=>s.default.createElement(u.default,{title:e.title,key:a,theme:"list-section"},e.rows.map(((e,a)=>s.default.createElement(f.default,{key:a,row:e,onSelect:i.bind(null,e),selected:e===t}))))))),s.default.createElement(v.default,{transitionName:"slide-up-down-footer",className:c.default.container},E)))};var s=i(a(67294)),l=r(a(33766)),n=r(a(64120)),o=r(a(39490)),d=i(a(55977)),u=r(a(68698)),c=r(a(72681)),f=r(a(6810)),h=i(a(26689)),p=r(a(93227)),m=r(a(16647)),_=r(a(32885)),v=r(a(4328))},6810:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement(s.default,{primary:e.row.title,secondary:e.row.description,theme:"list-msg",onClick:e.onSelect,detail:i.default.createElement(l.default,{checked:e.selected,hover:!1,radio:!0,onChange:e.onSelect,systemUncheckedColor:!0})})};var i=r(a(67294)),s=r(a(74724)),l=r(a(65589))},28793:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPending=function(){if(!N.default.supportsFeature(N.default.F.MD_BACKEND)&&!y.default.connected)return!1;var e=a(74213).default,t=x.default.some((e=>e.ack===b.default.ACK.CLOCK&&e.local&&e.isSentByMe)),r=_.default.some((e=>!!e.composeContents.text));return t||r||e()},t.default=void 0;var s=i(a(59854)),l=i(a(94184)),n=a(9019),o=a(40515),d=a(78840),u=a(74230),c=i(a(30381)),f=r(a(67294)),h=i(a(29531)),p=i(a(66619)),m=i(a(79893)),_=i(a(74798)),v=a(59864),g=i(a(51258)),E=i(a(21974)),S=i(a(33766)),C=i(a(51115)),y=i(a(11288)),b=i(a(75444)),M=i(a(23972)),T=r(a(25829)),I=a(8661),P=a(26226),A=i(a(14614)),N=i(a(77188)),O=i(a(28408)),D=i(a(3722)),w=i(a(80162)),R=i(a(80896)),k=i(a(55334)),L=i(a(72462)),x=i(a(33048)),F=i(a(2724)),B=i(a(65518)),G=i(a(5259)),U=i(a(85726)),j=a(82708),V=i(a(43232)),H=i(a(19826)),W=i(a(11053)),Y=i(a(79582)),K=i(a(47644)),q=i(a(7170)),z=i(a(14601)),$=i(a(17996)),Q=i(a(73334)),X=i(a(89848)),J=i(a(26144)),Z=i(a(21628)),ee=i(a(97439)),te=i(a(12202)),ae=i(a(63317)),re=a(24102),ie=i(a(13353)),se=i(a(85131)),le=i(a(28306)),ne=i(a(85916)),oe=i(a(5794)),de=[[document,"mousemove"],[document,"scroll"],[document,"keydown"],[window,"focus"],[window,"resize"]];function ue(){window.history.pushState({},"",window.location.href)}var ce=Math.random()<.001?a(91773).Z:null;class fe extends f.PureComponent{constructor(e){super(e),this.state={drawerActive:!1,drawerAnimating:!1,isVoipInitialized:y.default.isVoipInitialized},this._idleMonitor=null,this._serverPropsQueryLoop=null,this._rightDrawerOut=!1,this._setRefContainer=e=>{this._refContainer=e},this._refChatlistPanel=(0,f.createRef)(),this._refConversation=(0,f.createRef)(),this._onBlurTimer=new d.ShiftTimer((()=>{if(document.activeElement===document.body){var{top:e}=Z.default.Manager;e&&e.uie.requestFocus()}})),this.onBlur=()=>{this._onBlurTimer.debounce(10)},this._onRightDrawerIn=()=>{this._rightDrawerOut=!1,S.default.onPanesWillChange(3),this.setState({drawerActive:!0,drawerAnimating:!0},(()=>{S.default.onPanesDidChange(3)})),this._animateConversationPanel()},this._onRightDrawerOut=()=>{this._rightDrawerOut=!0;var e={drawerActive:this.state.drawerActive,drawerAnimating:!0};this._animateConversationPanel()?(S.default.onPanesWillChange(2),e.drawerActive=!1,this.setState(e,S.default.onPanesDidChange.bind(S.default,2))):this.setState(e)},this._onRightDrawerAnimationComplete=()=>{var e={drawerActive:this.state.drawerActive,drawerAnimating:!1};this.state.drawerActive&&this._rightDrawerOut&&(e.drawerActive=!1),this.setState(e)},this._skipNode=e=>{var t=!1;return S.default.existsDrawerLeft((a=>{var r,i=null===(r=this._refChatlistPanel)||void 0===r?void 0:r.current;t=t||a&&Boolean(null==i?void 0:i.containsDOMNode(e))})),S.default.existsDrawerMid((a=>{var r,i=null===(r=this._refConversation)||void 0===r?void 0:r.current;t=t||a&&Boolean(null==i?void 0:i.containsDOMNode(e))})),t},this._updateVoip=()=>{this.setState({isVoipInitialized:y.default.isVoipInitialized})},this._showTOS=()=>{switch(y.default.tos){case 1:case 2:S.default.openModal(f.default.createElement(Q.default,null),{blockClose:!0});break;case 3:__LOG__(2)`TOS (terms of service) stage number 3, logging out`,ie.default.logout()}},this._showSmbTos=()=>{y.default.smbTos&&S.default.openModal(f.default.createElement(Y.default,null),{blockClose:!0})},this._showUserNotice=()=>{N.default.supportsFeature(N.default.F.USER_NOTICE)&&(0,u.isNonZeroNumber)(F.default.noticeId)&&!0===F.default.blocking&&S.default.openModal(f.default.createElement(te.default,{notice:F.default}),{blockClose:!0})},this.showKeyboardShortcuts=e=>{for(var t,{target:a}=e,r=0;r<5;r++){if((t=a)&&t.getAttribute("contentEditable")||t instanceof HTMLInputElement)return;a=a.parentNode}S.default.openModal(f.default.createElement(se.default,null)),e.preventDefault()},K.default.uiActive=!0,K.default.markAvailable();var{platform:t}=y.default;(0,W.default)((0,I.getEmojiTypeFromPlatform)(t)),m.default.setPlatform(t)}componentWillUnmount(){var e;this._onBlurTimer.cancel(),D.default.menuBatchRenderWith((()=>{D.default.trigger(`${O.default.Event}:${O.default.Events.LOGGED_OUT}`)})),ee.default.canMuckHistory()&&window.history.back(),K.default.uiActive=!1,this._clearIdleMonitor(),this._clearServerPropsQueryLoop(),null===(e=this._stopTrackingFPS)||void 0===e||e.call(this)}componentDidMount(){var{listeners:e}=this.props;if(D.default.menuBatchRenderWith((()=>{D.default.trigger(`${O.default.Event}:${O.default.Events.LOGGED_IN}`)})),ee.default.canMuckHistory()&&(window.history.pushState({},"",window.location.href),e.add(window,"popstate",ue)),this._beginIdleMonitor(!0),this._beginServerPropsQueryLoop(),e.add(y.default,"change:isVoipInitialized",this._updateVoip),e.add(y.default,"change:tos",this._showTOS),this._showTOS(),y.default.isSMB&&(e.add(y.default,"change:smbTos",this._showSmbTos),this._showSmbTos()),e.add(F.default,"change:blocking change:noticeId",this._showUserNotice),this._showUserNotice(),X.default.isSafari&&!A.default&&(0,P.shouldShowNUX)(b.default.NUX.SAFARI_LIMITED_SUPPORT)&&(setTimeout((()=>{var e=w.default.t(2092,{chrome_homepage:b.default.BROWSER_LINK.CHROME,firefox_homepage:b.default.BROWSER_LINK.FIREFOX,opera_homepage:b.default.BROWSER_LINK.OPERA});S.default.openModal(f.default.createElement(C.default,{onOK:()=>S.default.closeModal(),okText:w.default.t(1289)},f.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})))}),250),(0,P.setNUX)(b.default.NUX.SAFARI_LIMITED_SUPPORT,{views:1,maxViews:1})),this._stopTrackingFPS=null==ce?void 0:ce.whenLessThan(1,((e,t)=>{new L.default.WebcUiFreeze({webcUiFreezeFps:e,webcUiFreezeT:(0,s.default)(t,0)}).commit(),__LOG__(2)`Low FPS Tracker: ${(0,s.default)(e,2)}fps, ${(0,s.default)(t,3)/1e3}s since page open.`})),le.default.supported){var t=navigator.serviceWorker;t&&t.controller&&oe.default.request(t.controller,ne.default.PRELOAD_LAZY_LOADED_BUNDLES).catch((()=>{}))}if(V.default.wallpapersV2){var a=g.default.get(v.DEFAULT_PREFERENCE);if(a&&b.default.DEFAULT_CHAT_WALLPAPER!==a.wallpaperColor){var r=this.context.theme;if(!(0,re.colorExistsInTheme)(a.wallpaperColor,r)){var i="light"===r?"dark":"light";if((0,re.colorExistsInTheme)(a.wallpaperColor,i)){var l=(0,re.toggleWallpaperColor)(a.wallpaperColor,i);a.set("wallpaperColor",l)}}}}}_beginIdleMonitor(e){var t=e?b.default.IDLE_TIMEOUT:0;this._idleMonitor=(0,o.promiseLoop)((()=>(0,n.delayMs)(t).addCancelControl().then((()=>{var e;K.default.markUnavailable(3e4);var a=new Promise((t=>{e=t}));return de.forEach((([t,a])=>{this.props.listeners.add(t,a,e)})),a.addCancelControl().finally((()=>{de.forEach((([t,a])=>{this.props.listeners.remove(t,a,e)}))})).then((function(){document.hasFocus()&&K.default.markAvailable(),t=b.default.IDLE_TIMEOUT}))})))).finally((()=>{this._idleMonitor=null})).catchType(Promise.CancellationError,(()=>{})).endWithControls("cancel")}_clearIdleMonitor(){this._idleMonitor&&this._idleMonitor.control.cancel()}_beginServerPropsQueryLoop(){this._serverPropsQueryLoop=p.default.setLocalTimeout((()=>{(0,j.queryServerProps)(),this._beginServerPropsQueryLoop()}),(0,c.default)().add(1,"days").valueOf())}_clearServerPropsQueryLoop(){p.default.clearTimeout(this._serverPropsQueryLoop)}_animateConversationPanel(){var e,t,a,r,i=null===(e=this._refChatlistPanel)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getClientWidth();if(null==i)return!1;var s=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=s&&(!!(null===(r=this._refConversation)||void 0===r?void 0:r.current)&&this._refConversation.current.animatePanel(s,i))}render(){var e=(0,l.default)(k.default.app,{three:this.state.drawerActive,two:!this.state.drawerActive,"app-animating":this.state.drawerAnimating,[k.default.noAnimation]:!this.props.animate}),t=f.default.createElement(ae.default,null);return f.default.createElement(J.default,{uimState:J.default.State.INACTIVE,displayName:"Main"},f.default.createElement($.default,{className:e,onBlur:this.onBlur,onRef:this._setRefContainer,onShowKeyboardShortcuts:this.showKeyboardShortcuts,skipNode:this._skipNode},f.default.createElement(B.default,null),f.default.createElement(h.default,null),f.default.createElement(G.default,null),f.default.createElement(z.default,null),t,undefined,f.default.createElement("div",{className:k.default.drawerManager},f.default.createElement("div",{className:(0,l.default)(k.default.pane,k.default.paneOne)},f.default.createElement(T.default,{direction:T.Dir.LEFT})),f.default.createElement("div",{className:(0,l.default)(k.default.pane,k.default.paneTwo)},f.default.createElement(T.default,{direction:T.Dir.MID})),f.default.createElement("div",{className:(0,l.default)(k.default.pane,k.default.paneThree)},f.default.createElement(T.default,{direction:T.Dir.RIGHT,onDrawerIn:this._onRightDrawerIn,onDrawerOut:this._onRightDrawerOut,onDrawerAnimationComplete:this._onRightDrawerAnimationComplete}))),f.default.createElement("div",{className:(0,l.default)(k.default.pane,k.default.paneOne,k.default.chatlistHeader)},f.default.createElement(E.default,{ref:this._refChatlistPanel,settings:H.default})),f.default.createElement("div",{className:(0,l.default)(k.default.pane,k.default.paneTwo)},f.default.createElement(M.default,{animate:this.props.animate,ref:this._refConversation}))))}}fe.contextType=q.default,fe.displayName="Main";var he=(0,R.default)((0,U.default)(fe));t.default=he},87224:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onBlock:t,onCancel:a,onReportSpamBlock:r}=e,c=e=>{e.stopPropagation(),e.preventDefault(),t()},f=e=>{e.stopPropagation(),e.preventDefault(),a()},h=i.default.createElement(s.default,{a8nText:"popup-controls-block",type:"primary",onClick:c,key:0},n.default.t(299)),p=i.default.createElement(s.default,{a8nText:"popup-controls-report-spam",type:"secondary",onClick:e=>{e.stopPropagation(),e.preventDefault(),r()},key:1},n.default.t(1389)),m=i.default.createElement(s.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:f,key:2},n.default.t(1768)),_=i.default.createElement(u.default,{contact:e.contact}),v=i.default.createElement(o.default,{id:301,params:{contact:_}});return i.default.createElement(l.default,{handlers:{enter:c,escape:f}},i.default.createElement(d.default,{children:v,actions:[p,h,m]}))};var i=r(a(67294)),s=r(a(62685)),l=r(a(35001)),n=r(a(80162)),o=r(a(41849)),d=r(a(26689)),u=r(a(39148))},16330:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){t.stopPropagation(),t.preventDefault(),e.onCancel&&e.onCancel()}var a=s.Children.count(e.actions)>0,r=e.onCancel?s.default.createElement(l.default,{a8nText:"popup-controls-cancel",type:a?"secondary":"primary",onClick:t},e.cancelText||o.default.t(1768)):null,i={escape:e.onCancel?t:()=>{}},u=s.default.createElement(s.default.Fragment,null,e.actions,r);return s.default.createElement(n.default,{handlers:i},s.default.createElement(d.default,{actions:u,children:e.children,cover:e.cover,onDragChange:e.onDragChange,onDrop:e.onDrop,type:e.type,title:e.title}))};var s=i(a(67294)),l=r(a(62685)),n=r(a(35001)),o=r(a(80162)),d=r(a(26689))},33308:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23279)),l=i(a(23493)),n=a(24788),o=a(78840),d=r(a(67294)),u=a(97066),c=i(a(52821)),f=i(a(44386)),h=i(a(33766)),p=i(a(75444)),m=i(a(27122)),_=i(a(64120)),v=i(a(39490)),g=r(a(55977)),E=a(92997),S=a(54438),C=r(a(12536)),y=a(3128),b=i(a(59432)),M=i(a(9908)),T=i(a(62886)),I=i(a(93769)),P=a(26226),A=i(a(77188)),N=i(a(83288)),O=i(a(35001)),D=i(a(20244)),w=i(a(80162)),R=i(a(33913)),k=i(a(80896)),L=i(a(3551)),x=i(a(85726)),F=i(a(87964)),B=i(a(69507)),G=i(a(32885)),U=a(96769);class j extends d.Component{constructor(e){super(e),this.flatListController=new b.default,this.state={searchText:"",searching:!1,resultsUnavailable:!1},this.setSearch=e=>{this.search=e},this.selection=new F.default([],(e=>e.id.toString())),this.pending=!1,this._batchRenderState={},this._handleScroll=e=>{this.shouldFTSSearch(e)&&(this.fts(),this.pending=!0)},this.handleScroll=(0,l.default)(this._handleScroll,100),this._debounceSetState=new o.ShiftTimer((()=>{this.setState(this._batchRenderState),this._batchRenderState={}})),this._batchSetState=(e,t=75)=>{Object.assign(this._batchRenderState,e),this._debounceSetState.debounce(t)},this.fts=(0,s.default)((()=>{this.pending=!1;var e=(this.state.searchText||"").trim();(0,D.default)(e)&&(this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this._batchSetState({searching:!0})})).then((()=>this.ftsMsgs.search({chat:this.props.chat,count:this._getSearchCount(),searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((t=>{t&&!t.canceled&&e===this.state.searchText.trim()&&this._batchSetState({searching:!1,resultsUnavailable:!1})})).catch((0,n.filteredCatch)(C.Unmount,(()=>{}))).catch((e=>{this.pending||this._batchSetState({searching:!1,resultsUnavailable:e instanceof S.E404})})))}),p.default.FTS_TYPING_DELAY),this.fullTextSearch=e=>{var t=e.trim();(0,D.default)(t)?(this.fts(),this.pending=!0,this.state.searching||this._batchSetState({searching:!0})):(this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.state.searching&&this._batchSetState({searching:!1,resultsUnavailable:!1}))},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.pending||this.state.searching||this.ftsMsgs.searchPromise||(0,U.numCodepoints)(this.state.searchText||"")<p.default.FTS_MIN_CHARS)&&e.scrollTop+p.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this.isFTSSearching=()=>{var e=this._batchRenderState;return"searching"in e?e.searching:this.state.searching},this.handleSearch=e=>{e?e!==this.state.searchText&&(this.fullTextSearch(e),this.setState({searchText:e}),this._batchSetState({searchText:e,resultsUnavailable:!1})):this.handleStopSearch()},this.handleStopSearch=()=>{this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.setState({searchText:"",searching:!1})},this.handleFocusList=e=>{e.repeat||this._refMsglist&&(this.search&&!this.search.cursorIsAtEnd()||(e.preventDefault(),e.stopPropagation(),M.default.shouldIndicateFocus(),this._refMsglist&&this._refMsglist.focusFirst()))},this.handleOpenFirst=e=>{e.preventDefault();var t=this.ftsMsgs.head();if(t){var a=t.chat,r=a.getSearchContext(t);h.default.focusChatTextInput(a),h.default.openChatAt(a,r)}},this.handleFocusSearch=()=>{M.default.shouldIndicateFocus(),T.default.focus(this.search)},this.handleClose=()=>{this.props.uim.uie.requestDismiss()},this.indicateFocus=()=>{M.default.maybeIndicateFocus(this.refInputHotkey)},this.onScroll=e=>{this.handleScroll(e.currentTarget)},this.getEmptyChatlistState=e=>{if(e.length)return null;var t=(this.state.searchText||"").trim();return(0,U.numCodepoints)(t)>=p.default.FTS_MIN_CHARS?this.state.searching?d.default.createElement(E.SearchingMessages,null):this.state.resultsUnavailable?d.default.createElement(E.SearchMessagesUnavailable,null):d.default.createElement(E.SearchMessages,null):(0,E.BeforeSearchMessages)(this.props.chat.title(),this.props.chat.isGroup)},this._setRefMsglist=e=>{this._refMsglist=e},this._setInputHotkey=e=>{this.refInputHotkey=e},this.ftsMsgs=new I.default(e.chat)}componentDidMount(){this.handleFocusSearch(),this.props.listeners.add(this.ftsMsgs,"bulk_remove",(()=>{this.forceUpdate()}))}componentWillUnmount(){this.handleScroll.cancel(),this.fts.cancel(),this.ftsMsgs.delete(!0),this._ftsPromise&&this._ftsPromise.cancel(),this._debounceSetState.cancel()}_getSearchCount(){return Math.round(window.innerHeight/y.DEFAULT_ITEM_HEIGHT)+1}render(){var e=this.ftsMsgs.toArray(),t=this.getEmptyChatlistState(e);if(null==t){var a=this.state.searchText?this.state.searchText.trim():null;t=d.default.createElement(L.default,{ref:this._setRefMsglist,flatListController:this.flatListController,isSearching:!!this.state.searchText,searchText:a,ftsResult:e,selection:this.selection,onFocusSearch:this.handleFocusSearch})}var r,i={down:this.handleFocusList},s=this.state.searching&&e.length?d.default.createElement("div",{className:c.default.searchSpinner},d.default.createElement(B.default,{stroke:6,size:24})):null;if(A.default.supportsFeature(A.default.F.MD_BACKEND)&&this.props.chat.endOfHistoryTransferType===u.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){var l=(this.state.searchText||"").trim();if((0,U.numCodepoints)(l)>=p.default.FTS_MIN_CHARS){var n=f.default.relativeDateStr((0,P.getHistorySyncEarliestDate)());r=d.default.createElement(m.default,{icon:d.default.createElement(G.default,{name:"content-search"}),theme:"list",secondary:w.default.t(643,{date:n})},w.default.t(827))}}return d.default.createElement(_.default,{key:"search-modal"},d.default.createElement(g.default,{title:w.default.t(1436),type:g.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),d.default.createElement(O.default,{handlers:i,onFocus:this.indicateFocus,onRef:this._setInputHotkey,className:c.default.panelSearch},d.default.createElement(R.default,{ref:this.setSearch,type:"chat-msg-search",onSearch:this.handleSearch,onEnter:this.handleOpenFirst,placeholder:w.default.t(1431),loading:this.state.searching})),d.default.createElement(v.default,{flatListControllers:[this.flatListController],className:c.default.panelBody,onScroll:this.onScroll,id:"pane-side"},t,s,r))}}j.displayName="ChatSearch";var V=(0,N.default)((0,k.default)((0,x.default)(j)));t.default=V},68868:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(a(33308))},83956:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(6448)),n=a(89852),o=r(a(9908)),d=r(a(62886)),u=r(a(35001)),c=r(a(11624)),f=r(a(80896)),h=r(a(72765)),p=a(6578),m=r(a(48849)),_=a(56670);class v extends s.Component{constructor(e){super(e),this.handleActiveChange=(e,t)=>{if("focus"===e){var a=this._refHotKeys;d.default.focus(a),t&&a&&(0,n.scrollIntoViewIfNeeded)(a)}this.setState({active:!!e})},this.handleClick=e=>{if((0,_.isFunction)(this.props.onClick)){var t=(0,p.unproxy)(this.props.msg),a=t.chat,r=a.getSearchContext(t);r.msg=t,this.props.onClick(e,a,r)}},this.handleEnter=e=>{e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),this.handleClick(e)},this.indicateFocus=()=>{var e;null===(e=this._refCell)||void 0===e||e.indicateFocus()},this.contextEnabled=()=>!1,this._setRefCell=e=>{this._refCell=e},this._setRefHotKeys=e=>{this._refHotKeys=e};var{msg:t,active:a}=e;this.state={active:!!a&&a.value===t}}componentDidMount(){this.props.active&&this.props.listeners.add(this.props.active,this.props.msg.id.toString(),this.handleActiveChange)}render(){var{msg:e,author:t}=this.props,a=s.default.createElement(m.default,{msg:e}),r=s.default.createElement(c.default,{msg:e.safe(),msgType:"Search",author:t,searchQuery:this.props.searchText?[this.props.searchText]:[]}),i={enter:this.handleEnter};return s.default.createElement(u.default,{handlers:i,onFocus:this.indicateFocus,onRef:this._setRefHotKeys},s.default.createElement(l.default,{ref:this._setRefCell,contextEnabled:this.contextEnabled,theme:"chat-search",active:!!this.state.active,primaryDetail:a,secondary:r,primary:void 0,onClick:this.handleClick}))}}v.CONCERNS={msg:["id","chat","isSentByMe","senderObj","rtl","dir","type"]},v.displayName="MessageClass";var g=(0,f.default)((0,h.default)(v,v.CONCERNS));t.default=g},77129:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.default)(e.msg,["id","chat"]),a=(0,l.default)(e.contact,["formattedShortName"]);return i.default.createElement(s.default,{msg:t,chat:t.chat,author:a.formattedShortName,searchText:e.searchText,onClick:e.onClick,active:e.active,key:t.id.toString()})};var i=r(a(67294)),s=r(a(83956)),l=r(a(95607))},3551:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(3310)),o=r(a(75444)),d=a(77824),u=r(a(3128)),c=r(a(83288)),f=r(a(35001)),h=r(a(83956)),p=r(a(77129));class m extends s.Component{constructor(){super(...arguments),this._listPointerEvents=!0,this._setRefHotKeys=e=>{this._refHotKeys=e},this.handleListPointerEventsOff=()=>{this._listPointerEvents=!1},this.handleListPointerEventsOn=()=>{this._listPointerEvents=!0},this.handleClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),(0,d.findChat)(t.id).then((e=>{2===n.default.column&&this.props.uim.uie.requestDismiss(),l.default.focusChatTextInput(e),l.default.openChatAt(e,a)}))},this.getSelection=()=>this.props.ftsResult||[],this.renderItem=e=>{var{msg:t}=e;return t.sender&&t.isGroupMsg&&!t.isNotification&&!t.isSentByMe?s.default.createElement(p.default,{contact:t.senderObj,msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.handleClick,active:this.props.selection,key:t.id.toString()}):s.default.createElement(h.default,{msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.handleClick,active:this.props.selection,key:t.id.toString()})},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.handleFocusGain=e=>{e.target===this._refHotKeys&&this._listPointerEvents&&(this.props.selection.index<0?this.focusFirst():this.props.selection.reset(!0))},this.focusFirst=()=>{this.props.selection.setFirst(!0)},this.handleNextChat=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=this.props.selection.next();this.props.selection.index!==t&&this.props.selection.setNext(!0)},this.handlePrevChat=e=>{e&&(e.stopPropagation(),e.preventDefault()),this.props.selection.prev()>-1?this.props.selection.setPrev(!0):this.props.onFocusSearch()},this.props.selection.init(this.getSelection())}getData(){return this.props.ftsResult.map((e=>({itemKey:e.id.toString(),msg:e})))}render(){return s.default.createElement(f.default,{handlers:{down:e=>this.handleNextChat(e),up:e=>this.handlePrevChat(e)},onFocus:this.handleFocusGain,"data-tab":o.default.TAB_ORDERS.CHAT_SEARCH_MSG_LIST,onRef:this._setRefHotKeys},s.default.createElement(u.default,{flatListController:this.props.flatListController,direction:"vertical",data:this.getData(),renderItem:this.renderItem,forceConsistentRenderCount:!1}))}}m.displayName="MsgListBase";var _=(0,c.default)(m);t.default=class extends _{focusFirst(){this.getComponent().focusFirst()}}},34720:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(20451)),n=r(a(9340)),o=r(a(80896));class d extends s.Component{constructor(...e){super(...e),this.state={selected:this.props.selections.isSelected(this.props.model)||!!this.props.checked},this.handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})}}componentDidMount(){this.props.listeners.add(this.props.selections,this.props.model.id.toString(),this.handleSelectChange)}render(){var{children:e,disabled:t,tabIndex:a}=this.props;return s.default.createElement("div",{className:n.default.checkboxSelectableWrapper},s.default.createElement("div",{className:n.default.checkboxSelectableControl},s.default.createElement(l.default,{onChange:()=>{},checked:this.state.selected,disabled:t,tabIndex:a})),e)}}d.displayName="CheckboxSelectableWrapper";var u=(0,o.default)(d);t.default=u},61433:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(55847)),n=a(97066),o=r(a(20451)),d=r(a(46937)),u=r(a(33766)),c=r(a(51115)),f=r(a(20923)),h=r(a(77188)),p=r(a(80162)),m=a(16079),_=a(38245);class v extends s.Component{constructor(...e){super(...e),this.state={keepStarred:!h.default.supportsFeature(h.default.F.MD_BACKEND)},this.handleCancel=()=>{u.default.closeModal()},this.handleClear=()=>{var e=this.props.chat;e.pendingAction++,(0,m.sendClear)(e,this.state.keepStarred).finally((()=>{e.pendingAction--})),u.default.closeModal()},this._handleToggleStarred=()=>{this.setState({keepStarred:!this.state.keepStarred})}}getText(){switch(this.props.chat.kind){case n.CHAT_KIND.GROUP:return p.default.t(554);case n.CHAT_KIND.CHAT:return p.default.t(552);case n.CHAT_KIND.BROADCAST:return p.default.t(549);default:return""}}render(){return h.default.supportsFeature(h.default.F.MD_BACKEND)?s.default.createElement(c.default,{title:this.getText(),onOK:this.handleClear,okText:p.default.t(551),onCancel:this.handleCancel},s.default.createElement("div",{className:d.default.note},s.default.createElement(_.TextParagraph,{theme:"muted"},p.default.t(1909)))):s.default.createElement(c.default,{onOK:this.handleClear,okText:p.default.t(551),onCancel:this.handleCancel},s.default.createElement("div",null,s.default.createElement(f.default,{text:this.getText()}),s.default.createElement("div",{className:d.default.section},s.default.createElement("div",{"data-a8n":l.default.key("menu-icon-clear-chat"),className:d.default.control},s.default.createElement(o.default,{onChange:this._handleToggleStarred,checked:this.state.keepStarred,id:"menu-icon-clear-chat"})),s.default.createElement("label",{htmlFor:"menu-icon-clear-chat",className:d.default.label},p.default.t(982)))))}}t.default=v,v.displayName="ClearChatPopup"},23526:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(75444)),n=r(a(64120)),o=r(a(39490)),d=i(a(55977)),u=r(a(83288)),c=r(a(80162)),f=r(a(3317));class h extends s.Component{constructor(...e){super(...e),this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()}}render(){var e,t=this.props.chat.getReceivedVcardMsgs(),a=null!==(e=null==t?void 0:t.map((e=>s.default.createElement(f.default,{key:e.id.toString(),msg:e,displayType:l.default.DISP_TYPE.CONTACT_CARD,onMessageClick:this.handleClose}))))&&void 0!==e?e:[];return s.default.createElement(n.default,null,s.default.createElement(d.default,{title:c.default.t(625,{_plural:t?t.length:0}),onBack:this.handleClose,type:d.DRAWER_HEADER_TYPE.LARGE}),s.default.createElement(o.default,null,a))}}h.displayName="ContactCardDrawer";var p=(0,u.default)(h);t.default=p},84968:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onCancel:t,onSend:a}=e,r=(0,s.useCallback)((e=>{l.default.openModal(s.default.createElement(d.default,{onCancel:t,onSend:a,description:null==e?void 0:e.description}))}),[t,a]);if(o.default.isInAppSupportEnabled())return s.default.createElement(n.default,{onEmail:r,onCancel:t,onFailure:r});return s.default.createElement(d.default,{onCancel:t,onSend:a})};var s=i(a(67294)),l=r(a(33766)),n=r(a(81482)),o=r(a(77188)),d=r(a(82670))},45066:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=i(a(33766)),n=i(a(64120)),o=i(a(39490)),d=r(a(55977)),u=i(a(35001)),c=i(a(80162)),f=r(a(26689)),h=i(a(16203)),p=a(54865);t.default=e=>{var{vcard:t}=e;return s.default.createElement(f.default,{type:f.BoxModalType},s.default.createElement(n.default,{key:"vcard-modal"},s.default.createElement(d.default,{title:c.default.t(631),type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>l.default.closeModal()}),s.default.createElement(o.default,null,s.default.createElement(u.default,null,s.default.createElement(h.default,{parsedVcard:t,thumbnail:(0,p.vcardThumbnail)(t)})))))}},58738:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),l=r(a(67294)),n=i(a(4457)),o=i(a(62899)),d=a(92997),u=a(3128),c=i(a(80162)),f=i(a(6041)),h=i(a(80896)),p=i(a(61170)),m=i(a(26802)),_=i(a(87964)),v=i(a(47809)),g=a(56670),E="HEADER",S="ROW";class C extends l.Component{constructor(...e){super(...e),this.selection=new _.default([],(e=>e.id)),this.state={searchFilter:void 0},this.handleSelect=(e,t)=>{if(t.type===S){var a=t.contact;!0===this.props.filter(a)&&this.props.onSelect&&this.props.onSelect(a)}},this.handleSearch=this.props.debounce((e=>{this.setState({searchFilter:e})}),100),this.renderItem=e=>{var t,{filter:a,onSelect:r,onContext:i,contextEnabled:o,contextMenu:d,openContextOnClick:c,showNotifyName:f,participantCollection:h,listenForAdminChange:p}=this.props;switch(e.type){case E:return l.default.createElement(m.default,{header:null!==(t=e.header)&&void 0!==t?t:""});case S:var _=(0,g.isString)(a(e.contact)),v=_?"group-modal":null,C=_?a(e.contact):null,y=i&&d?{contextEnabled:o,contextMenu:d(e.contact.id),onContext:i}:{};return l.default.createElement(n.default,(0,s.default)({contact:e.contact,active:this.selection,theme:v,secondary:C,onClick:c&&i?i:_?void 0:r?()=>{r(e.contact)}:()=>{},waitIdle:!0,showNotifyName:f,listenForAdminChange:p,participantCollection:h},y));default:throw new u.UnknownDataError(e)}}}componentDidMount(){this.props.contacts||this.props.listeners.add(o.default,"add remove change:name",(()=>{this.forceUpdate()}))}getData(){var{filter:e}=this.props,t=c.default.accentFold(this.state.searchFilter),a=(0,p.default)(t),r=(this.props.contacts||o.default).filter((r=>e(r)&&(!t||t&&r.searchMatch(t,a))));this.selection.init(r.filter((t=>!0===e(t))));var i,s,l=[];if(!r.length)return l;for(var n=r.length>10,d=0;d<r.length;d++)i=r[d],n&&i.header!==s&&l.push({type:E,header:i.header,itemKey:`${i.header||""}_${d}`}),l.push({type:S,contact:i,itemKey:`${i.id.toString()}_${d}`}),s=i.header;return l}render(){var{title:e,onCancel:t}=this.props;return l.default.createElement(f.default,{title:e,data:this.getData(),renderItem:this.renderItem,emptyState:l.default.createElement(d.SearchContacts,null),selection:this.selection,onSearch:this.handleSearch,searchPlaceholder:c.default.t(1432),onSelect:this.handleSelect,onCancel:t})}}C.defaultProps={filter:e=>o.default.isFilteredContact(e)},C.displayName="ContactsModal";var y=(0,h.default)((0,v.default)(C));t.default=y},26790:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onCancel:t,onDeleteOrExit:a}=e,r=(0,p.default)(e.chat,["isReadOnly","isGroup","isUser","isBroadcast"]),m=()=>r.isGroup?r.isReadOnly?c.default.t(660):c.default.t(800):r.isUser?c.default.t(658):r.isBroadcast?c.default.t(654):void 0,_=()=>r.isGroup?r.isReadOnly?c.default.t(659):c.default.t(799):r.isUser||r.isBroadcast?c.default.t(657):void 0,v=()=>{s.default.closeModal(),t&&(0,h.isFunction)(t)&&t()},g=()=>{var e;r.isGroup?e=r.isReadOnly?(0,n.sendDelete)(r):(0,d.sendExitGroup)(r):r.isUser||r.isBroadcast?e=(0,n.sendDelete)(r):__LOG__(3)`deleteChatPopup:onDelete Unsupported chat type`,(0,h.isFunction)(a)&&e&&a(e),s.default.closeModal()};return u.default.supportsFeature(u.default.F.MD_BACKEND)&&e.isDelete?i.default.createElement(l.default,{title:m(),onOK:g,okText:_(),onCancel:v},i.default.createElement(f.TextDiv,{theme:"muted"},c.default.t(1910))):i.default.createElement(l.default,{onOK:g,okText:_(),onCancel:v},i.default.createElement(o.default,{text:m()}))};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=a(18245),o=r(a(20923)),d=a(65813),u=r(a(77188)),c=r(a(80162)),f=a(38245),h=a(56670),p=r(a(95607))},38906:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(62685)),l=r(a(75444)),n=r(a(36874)),o=r(a(24129)),d=a(1886),u=a(84641),c=r(a(59986)),f=a(26226),h=r(a(35001)),p=r(a(80162)),m=r(a(26689)),_=r(a(26144));class v extends c.default{constructor(){super(),this.onDelete=()=>{this.end()},this.onRevoke=()=>{this._showRevokeNux?(this.push(this._renderRevokeNux(),"none"),(0,f.setNUX)(l.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX,{views:1,maxViews:1})):this.end()},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._openRevokeLearnMore=()=>{(0,d.openExternalLink)((0,u.getRevokeFaqUrl)())},this._onRevokeNuxClicked=()=>{this.end()},this._renderRevokeNux=()=>{var e=[i.default.createElement(s.default,{type:"secondary",onClick:this._openRevokeLearnMore,key:1},p.default.t(1002)),i.default.createElement(s.default,{type:"primary",onClick:this._onRevokeNuxClicked,key:0},p.default.t(1941))];return i.default.createElement(_.default,{displayName:"MsgRevokeNuxModal",escapable:!1},i.default.createElement(h.default,{handlers:{enter:this._onRevokeNuxClicked}},i.default.createElement(m.default,{actions:e},i.default.createElement("div",{className:n.default.label},p.default.t(1428)))))},this._showRevokeNux=(0,f.shouldShowNUX)(l.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX)}componentDidMount(){var{chat:e,msgList:t,deletePrompt:a,revokePrompt:r,toastPosition:s,onCancel:l,isMsgVisible:n}=this.props;this.push(i.default.createElement(o.default,{chat:e,msgList:t,deletePrompt:a,revokePrompt:r,toastPosition:s,onDelete:this.onDelete,onRevoke:this.onRevoke,onPopupCancel:this.onPopupCancel,onCancel:l,isMsgVisible:n}))}}t.default=v},24129:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(55847)),n=r(a(62685)),o=r(a(20451)),d=r(a(33766)),u=r(a(75444)),c=r(a(36874)),f=r(a(35001)),h=r(a(80162)),p=r(a(26689));class m extends s.Component{constructor(...e){super(...e),this.state={clearMedia:!0},this.handleCancel=()=>{var{onPopupCancel:e}=this.props;e()},this.handleRevoke=()=>{var{chat:e,msgList:t,toastPosition:a,onCancel:r,onRevoke:i}=this.props,s=t.filter((e=>e.type!==u.default.MSG_TYPE.REVOKED));s.length>0&&d.default.sendRevokeMsgs(e,s,this.state.clearMedia,null,a),i(),r&&r()},this.handleDelete=()=>{var{chat:e,msgList:t,toastPosition:a,onCancel:r,onDelete:i,isMsgVisible:s}=this.props;d.default.sendDeleteMsgs(e,t,this.state.clearMedia,null,a),i(),r&&r(),d.default.existsDrawerRight((e=>{e&&s&&t.forEach((e=>{s(e.id,!0)&&d.default.closeDrawerRight()}))}))},this._handleToggleClearMedia=()=>{this.setState({clearMedia:!this.state.clearMedia})}}render(){var e,{msgList:t,deletePrompt:a,revokePrompt:r}=this.props;t.some((e=>e.asMms&&e.type!==u.default.MSG_TYPE.STICKER))&&(e=s.default.createElement("div",{className:c.default.container,onClick:this._handleToggleClearMedia,key:0},s.default.createElement("div",{"data-a8n":l.default.key("menu-icon-revoke-message"),className:c.default.control},s.default.createElement(o.default,{onChange:this._handleToggleClearMedia,checked:this.state.clearMedia})),s.default.createElement("div",{className:c.default.label},h.default.t(553))));var i=s.default.createElement(n.default,{type:"secondary",onClick:this.handleCancel,key:0},h.default.t(1768)),d=null,m=null,_=null,v=()=>{},g=t.length,E=h.default.t(664,{_plural:g});r&&(d=s.default.createElement(n.default,{a8nText:"popup-controls-revoke",type:"secondary",onClick:this.handleRevoke,key:1},h.default.t(1425)),v=this.handleRevoke),a&&(m=s.default.createElement(n.default,{a8nText:"popup-controls-delete",type:r?"secondary":"primary",onClick:this.handleDelete,key:2},h.default.t(655)),v=this.handleDelete);var S={enter:v,escape:this.handleCancel};return m&&(_=d?s.default.createElement("div",{className:c.default.buttons},s.default.createElement("div",{className:c.default.button},m),s.default.createElement("div",{className:c.default.button},i),s.default.createElement("div",{className:c.default.button},d)):[i,m]),s.default.createElement(f.default,{handlers:S},s.default.createElement(p.default,{title:E,actions:_,children:[e]}))}}t.default=m,m.displayName="DeleteRevokeMsgPopup"},64120:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(68609)),o=i(a(83728)),d=i(a(57067));function u(e,t){var{children:a,onDrop:r,onDragChange:i,theme:u}=e,c=(0,l.useRef)(null),f=(0,l.useRef)(null);(0,l.useImperativeHandle)(t,(()=>({getElement:()=>c.current})));var h=(0,s.default)(d.default.drawer,{[d.default.white]:"invite"===u||"products"===u||"labels"===u||"settings"===u||"archived"===u,[d.default.drawerCapture]:"capture-contain"===u||"capture-cover"===u,[d.default.drawerEdit]:"edit"===u,[d.default.drawerMedia]:"media"===u,[d.default.drawerGallery]:"gallery"===u,[d.default.drawerCatalog]:"catalog"===u,[d.default.striped]:"striped"===u,[d.default.belowHeader]:"capture-contain"===u||"media"===u,"drawer-verification":"verification"===u});return l.default.createElement(n.default,{ref:c,className:h,onDragOver:e=>{var t;null===(t=f.current)||void 0===t||t.onDragOver(e)},onDragStart:e=>{var t;null===(t=f.current)||void 0===t||t.onDragStart(e)},onDragEnd:e=>{var t;null===(t=f.current)||void 0===t||t.onDragEnd(e)}},r&&l.default.createElement(o.default,{ref:f,disableFromWithin:!0,onDragChange:i,onDrop:r}),a)}var c=(0,l.forwardRef)(u);t.default=c},39490:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),l=i(a(6479)),n=i(a(94184)),o=r(a(67294)),d=i(a(68276)),u=i(a(9444)),c=(0,o.forwardRef)((function(e,t){var{overflow:a,flatListControllers:r,children:i,theme:c}=e,f=(0,l.default)(e,["overflow","flatListControllers","children","theme"]),h=(0,n.default)(d.default.container,{[d.default.noscroll]:"hidden"===a,[d.default.centerItem]:"center-content"===c,[d.default.padding]:"padding"===c,[d.default.centerColumn]:"center-column"===c});return r&&r.length>0?o.default.createElement(u.default,(0,s.default)({flatListControllers:r,className:h},f),i):o.default.createElement("div",(0,s.default)({className:h,ref:t},f),i)}));t.default=c},49589:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(67294).createContext)({type:null});t.default=r},55977:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DRAWER_HEADER_TYPE=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(55847)),n=r(a(44117)),o=r(a(80162)),d=a(97713),u=r(a(32885)),c=r(a(4328)),f={SMALL:"small",LARGE:"large",POPUP:"popup",OFFSET:"offset",MULTI_MEDIA_GALLERY:"multiMediaGallery",LABELS:"labels"};t.DRAWER_HEADER_TYPE=f;var h=e=>{var{title:t,onBack:a,onCancel:r,type:h,children:p,menu:m}=e,_=a?s.default.createElement("button",{className:n.default.btnCloseDrawer,"data-a8n":l.default.key("btn-closer-drawer"),onClick:a,"aria-label":o.default.t(3)},s.default.createElement(u.default,{name:"back",directional:!0})):null,v=r?s.default.createElement("button",{className:n.default.btnCloseDrawer,"data-a8n":l.default.key("btn-closer-drawer"),onClick:r},s.default.createElement(u.default,{name:"x"})):null,g=null!=m?s.default.createElement("span",{className:n.default.paneListControls},s.default.createElement(d.MenuBar,{key:"drawer-header",theme:h!==f.SMALL?"inverse":null},s.default.createElement(c.default,{transitionName:"btn"},m))):null,E=(0,i.default)({[n.default.multiMediaGallery]:h===f.MULTI_MEDIA_GALLERY,[n.default.labels]:h===f.LABELS,[n.default.drawerHeader]:h===f.LARGE||h===f.MULTI_MEDIA_GALLERY||h===f.LABELS,[n.default.drawerHeaderSmall]:h===f.SMALL,[n.default.drawerHeaderOffset]:h===f.OFFSET||h===f.POPUP,[n.default.drawerHeaderPopup]:h===f.POPUP}),S=t&&null!=p?s.default.createElement("div",{className:n.default.side},p):null;return s.default.createElement("header",{className:E},s.default.createElement("div",{className:n.default.drawerTitle,"data-animate-drawer-title":!0},s.default.createElement("div",{className:n.default.drawerTitleAction},_,v),s.default.createElement("div",{"data-a8n":l.default.key("drawer-title-body"),className:n.default.drawerTitleBody},t||p),S,g))};t.default=h},576:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(80524)),n=a(69519),o=({title:e,icon:t,onClick:a,children:r})=>{var o=(0,i.default)(l.default.itemBody,{[l.default.row]:t}),d=(0,i.default)({[l.default.main]:t}),u=(0,i.default)({[l.default.side]:t});return s.default.createElement("div",{className:l.default.item,onClick:a,role:a?"button":""},s.default.createElement("div",{className:o},s.default.createElement("div",{className:d,dir:"auto"},s.default.createElement(n.SelectableDiv,{className:l.default.primary,selectable:!0},e),s.default.createElement("div",{className:l.default.secondary},r)),s.default.createElement("div",{className:u},t)))};t.default=o},25829:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Dir=t.Transition=void 0;var s=i(a(11700)),l=i(a(18446)),n=i(a(73955)),o=r(a(67294)),d=i(a(33766)),u=i(a(49589)),c=i(a(90592)),f=i(a(62886)),h=i(a(80896)),p=r(a(59407)),m=a(56670),_=i(a(26144)),v=i(a(30892)),g=i(a(4328)),E={LEFT:"drawer-left",MID:"slide-up",NONE:"none",RIGHT:"slide-left"};t.Transition=E;t.Dir={LEFT:"left",MID:"mid",RIGHT:"right"};var S=e=>E[e.toUpperCase()];class C extends o.PureComponent{constructor(...e){super(...e),this.state={drawer:void 0,drawerId:null,transition:S(this.props.direction),uim:void 0,option:void 0,drawerContext:void 0,focusType:p.FocusType.CUSTOM},this._blockTransition=null,this._flowDismissPending=!1,this.setRefUIE=e=>{this.refUIE=e},this.updateContext=e=>{this.setState({drawerContext:e})},this.openFlow=(e,t=S(this.props.direction),a,r,i,s)=>{var o=(0,n.default)(`DrawerManager${this.props.direction}`);if(!this._flowDismissPending&&this.state.drawer){if(null!=e.key&&(0,l.default)(this.state.drawer.key,e.key))return;this._blockTransition=E.NONE,this.setState({drawer:e,drawerId:o,transition:t,uim:a,option:r,drawerContext:i,focusType:s},(()=>{this._blockTransition=t}))}else this.props.onDrawerIn&&this.props.onDrawerIn(),this.setState({drawer:e,drawerId:o,transition:t,uim:a,option:r,drawerContext:i,focusType:s})},this._existsFlow=e=>{e(!0!==this._flowDismissPending&&!!this.state.drawer)},this.closeFlow=e=>{e&&this.state.drawerId!==e||this.state.drawer&&(this.props.onDrawerOut&&this.props.onDrawerOut(),this._flowDismissPending=!0,this.setState({drawer:void 0,drawerContext:void 0},(()=>{this._flowDismissPending=!1})))},this.requestFocus=()=>{if(this.refUIE){var e=this.refUIE.getNode();e&&!e.contains(document.activeElement)&&f.default.focus(e)}},this._onAnimationComplete=e=>{var t=this.props.onDrawerAnimationComplete;t&&t();var{option:a,drawer:r}=this.state;a&&r&&e===this.state.drawerId&&(0,m.isFunction)(a.onEnterAnimationComplete)&&a.onEnterAnimationComplete()}}componentDidMount(){this.props.listeners.add(d.default,`open_drawer_${this.props.direction}`,this.openFlow),this.props.listeners.add(d.default,`exists_drawer_${this.props.direction}`,this._existsFlow),this.props.listeners.add(d.default,`close_drawer_${this.props.direction}`,this.closeFlow),this.props.listeners.add(d.default,`update_context_${this.props.direction}`,this.updateContext)}componentDidUpdate(e){this.props.direction!==e.direction&&(e.listeners.remove(d.default,`open_drawer_${e.direction}`,this.openFlow),e.listeners.remove(d.default,`exists_drawer_${e.direction}`,this._existsFlow),e.listeners.remove(d.default,`close_drawer_${e.direction}`,this.closeFlow),this.props.listeners.add(d.default,`update_context_${this.props.direction}`,this.updateContext),this.props.listeners.add(d.default,`open_drawer_${this.props.direction}`,this.openFlow),this.props.listeners.add(d.default,`exists_drawer_${this.props.direction}`,this._existsFlow),this.props.listeners.add(d.default,`close_drawer_${this.props.direction}`,this.closeFlow),this.props.listeners.add(d.default,`update_context_${this.props.direction}`,this.updateContext))}render(){var{direction:e}=this.props,{drawer:t,drawerId:a,transition:r,option:i,focusType:l}=this.state,n=this._blockTransition||r,d=i&&i.noFocus?null:this.requestFocus;return t&&(t=o.default.createElement(_.default,{displayName:`Drawer${(0,s.default)(e)}`,escapable:!0,key:a,ref:this.setRefUIE,requestFocus:d,requestDismiss:this.closeFlow.bind(null,a)},o.default.createElement(p.default,{style:{height:"100%"},focusType:l},this.state.drawerContext?o.default.createElement(u.default.Provider,{value:this.state.drawerContext},t):o.default.createElement(o.default.Fragment,null,t)))),o.default.createElement(v.default.Consumer,null,(e=>o.default.createElement(v.default.Provider,{value:this.state.uim||e},o.default.createElement(g.default,{className:c.default.container,transitionName:n,onAnimationComplete:this._onAnimationComplete.bind(this,a)},t))))}}C.displayName="DrawerManager";var y=(0,h.default)(C);t.default=y},68698:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e,title:t,subtitle:a,titleOnClick:r,a8nText:u,"data-list-scroll-offset":c,theme:f,animation:h=!0,className:p,onRef:m}){var _,v=f?n.default[f]:null,g=(0,i.default)(n.default.container,{[n.default.animate]:h},v,p);null!=t&&(_=s.default.createElement("div",{className:n.default.title,"data-a8n":l.default.key(u),role:r?"button":null,onClick:r},s.default.createElement(o.default,{side:a,ellipsify:!0},s.default.createElement(d.TextSpan,{theme:"list-section"===f||"title-larger"===f?"section-title-larger":"section-title"},t))));return s.default.createElement("div",{ref:m,className:g,"data-list-scroll-offset":c},_,e)};var i=r(a(94184)),s=r(a(67294)),l=r(a(55847)),n=r(a(17764)),o=r(a(91303)),d=a(38245)},40116:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(41143)),l=r(a(67294)),n=i(a(33766)),o=i(a(51115)),d=i(a(62899)),u=i(a(1886)),c=a(84641),f=i(a(34907)),h=i(a(31415)),p=a(26226),m=i(a(31170)),_=i(a(77188)),v=i(a(80162)),g=i(a(43232)),E=a(6578),S=a(74711),C=i(a(64624)),y=i(a(53680)),b=i(a(8745)),M=a(82509),T=a(82508),I=a(52152);class P extends l.Component{constructor(...e){super(...e),this.handleVerificationClick=()=>{var{jid:e,chatId:t}=this.props;if(e){var a=e.equals((0,p.getMeUser)())?t:e;n.default.closeModal(),n.default.verificationDrawer(a)}}}componentDidMount(){if(_.default.supportsFeature(_.default.F.MD_BACKEND)){var e=(0,p.assertGetMe)(),t=this.props.jid?[(0,I.createWid)(this.props.jid.toString()),e]:[e];(0,T.getFanOutList)(t).then((e=>{(0,M.ensureE2ESessions)(e)}))}}render(){var e,t,a=null,r=null,i=null,p=null,M=v.default.t(1002);i=()=>n.default.closeModal(),p=v.default.t(1941);var{e2eSubtype:T,chatId:I,chat:P,msg:A}=this.props;switch(T){case"info_encrypted":t=(0,c.getE2EFaqUrl)(),y.default.isGroup(I)?(null==P?void 0:P.isSupportGroup())?(e=v.default.t(1542),M=v.default.t(1543),t=(0,c.getSupportChatSafetyFaqUrl)()):e=C.default.isGroupCallEnabled()?v.default.t(1850):v.default.t(1849):y.default.isBroadcast(I)&&(e=v.default.t(1759));break;case"identity":var{jid:N}=this.props,O=N&&d.default.get(N);if(O&&O.isMe)if(__LOG__(4,void 0,new Error,!0)`formatE2ENotification: receive identity notification of self`,SEND_LOGS("SelfIdentityNotificationError"),y.default.isGroup(I))e=v.default.t(2006);else if(y.default.isBroadcast(I))e=v.default.t(2004);else{var D=d.default.get(I),w=D?D.formattedName:(0,b.default)(I);e=v.default.t(2005,{name:w})}else{var R=O?O.formattedName:(0,b.default)(this.props.jid);e=v.default.t(2003,{name:R})}_.default.supportsFeature(_.default.F.MD_BACKEND)?(a=i,r=p,i=this.handleVerificationClick,p=v.default.t(2061),t=(0,c.getMDCodeChangeFaqUrl)()):(a=i,r=v.default.t(1768),t=(0,c.getCodeChangeFaqUrl)());break;case"device":(0,s.default)(null!=A,"msg shouldn't be null");var k=(0,E.unproxy)(A);if(e=(0,f.default)(k,!0),_.default.supportsFeature(_.default.F.MD_BACKEND)){a=i,r=p;var L=k.body?d.default.get(k.body):null;L&&L.isMe&&(I.isGroup()||I.isBroadcast())?(i=void 0,p=void 0):(i=this.handleVerificationClick,p=v.default.t(2061)),t=(0,c.getMDCodeChangeFaqUrl)()}else a=i,r=v.default.t(1768),t=(0,c.getCodeChangeFaqUrl)();break;case"encrypt":case"encrypt_now":default:if(t=(0,S.securityUrl)(),y.default.isGroup(I))(null==A?void 0:A.chat.isSupportGroup())?(e=v.default.t(1542),M=v.default.t(1543),t=(0,c.getSupportChatSafetyFaqUrl)()):e=C.default.isGroupCallEnabled()?v.default.t(1776):v.default.t(1775);else if((0,m.default)(I.user))e=v.default.t(1542),M=v.default.t(1543),t=(0,c.getSupportChatSafetyFaqUrl)();else if(y.default.isBroadcast(I))e=v.default.t(1775);else{var x=C.default.isVoiceCallEnabled()||C.default.isVideoCallEnabled();if(g.default.bspSystemMessageEnabled)e=x?l.default.createElement(l.default.Fragment,null,v.default.t(704),l.default.createElement("br",null),l.default.createElement("br",null),v.default.t(705)):l.default.createElement(l.default.Fragment,null,v.default.t(704),l.default.createElement("br",null),l.default.createElement("br",null),v.default.t(706));else{var F=d.default.get(I);if(F&&F.isEnterprise){var B=(0,h.default)(F);e=v.default.t(1896,{businessName:B}),t=(0,c.getE2EEnterpriseFaqUrl)()}else e=x?v.default.t(1776):v.default.t(1775)}}}var G=l.default.createElement(u.default,{href:t},M);return l.default.createElement(o.default,{onOK:i,okText:p,onCancel:a,cancelText:r},e," ",G)}}t.default=P,P.displayName="E2EInfoModal"},66600:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(56222),l=i(a(67294)),n=r(a(62685)),o=r(a(33766)),d=r(a(75444)),u=r(a(64120)),c=r(a(39490)),f=i(a(55977)),h=r(a(68698)),p=a(72826),m=r(a(7487)),_=r(a(25707)),v=r(a(1886)),g=a(84641),E=a(26226),S=r(a(77188)),C=r(a(83288)),y=r(a(80162)),b=r(a(72462)),M=r(a(27418)),T=a(32282),I=a(38245),P=i(a(48847));class A extends l.Component{constructor(e){super(e),this._saveSetting=()=>{var{chat:e}=this.props,{duration:t}=this.state;t!==this._getInitialDuration(e)&&(M.default.online?(e.isGroup?(0,T.setGroupProperty)(e,d.default.GROUP_SETTING_TYPE.EPHEMERAL,t).catch((()=>()=>{__LOG__(2)`EphemeralDrawer:unable to set ephemeral setting for ${e.id.toString()}`})):(0,p.changeEphemeralDuration)(e,t),new b.default.EphemeralSettingChange({chatEphemeralityDuration:t}).commit()):this._showOfflineToast())},this._shouldShowSelections=()=>!(0,E.shouldShowNUX)(d.default.NUX.EPHEMERAL)||this.props.fromInfoFlow,this._showOfflineToast=()=>{o.default.openToast(l.default.createElement(P.default,{msg:y.default.t(778),id:(0,P.genId)()}))},this._handleBack=()=>{this._shouldShowSelections()&&this._saveSetting(),this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleChange=e=>{var t=parseInt(e.target.value,10);this.setState({duration:t})},this.state={duration:this._getInitialDuration(e.chat)}}_getInitialDuration(e){return e.getEphemeralSetting()||0}componentWillUnmount(){(0,E.shouldShowNUX)(d.default.NUX.EPHEMERAL)&&(0,E.setNUX)(d.default.NUX.EPHEMERAL,{views:1,maxViews:1})}render(){var e,t=this._shouldShowSelections()?null:l.default.createElement("div",{className:m.default.nuxAction},l.default.createElement(n.default,{type:"primary",onClick:this._handleBack},y.default.t(1941)));e=S.default.isEphemeral24HDurationEnabled()?this.props.fromInfoFlow?y.default.t(771):y.default.t(773):this.props.fromInfoFlow?y.default.t(770):y.default.t(772);var a,r=(0,E.shouldShowNUX)(d.default.NUX.EPHEMERAL)?l.default.createElement(h.default,{animation:!1},l.default.createElement(_.default,null),l.default.createElement("div",{className:m.default.nuxHeader},l.default.createElement(I.TextSpan,{theme:"large"},this.props.fromInfoFlow?y.default.t(776):y.default.t(777))),l.default.createElement("div",{className:m.default.nuxContent},l.default.createElement("div",{className:m.default.nuxText},l.default.createElement(I.TextSpan,{theme:"muted"},e)),l.default.createElement("div",{className:m.default.nuxText},l.default.createElement(I.TextSpan,{theme:"muted"},y.default.t(774))),l.default.createElement("div",{className:m.default.nuxText},l.default.createElement(I.TextSpan,{theme:"muted"},y.default.t(775)," ",l.default.createElement(v.default,{href:(0,g.getEphemeralFaqUrl)()},y.default.t(1002)))),t)):null,i=this._shouldShowSelections()?l.default.createElement(l.default.Fragment,null,l.default.createElement(h.default,{animation:!1},(a=[],S.default.isEphemeral24HDurationEnabled()?(a.push({value:24*s.HOUR_SECONDS,label:y.default.t(782,{number:24,_plural:24})}),a.push({value:7*s.DAY_SECONDS,label:y.default.t(781,{number:7,_plural:7})})):a.push({value:7*s.DAY_SECONDS,label:y.default.t(780)}),a.push({value:0,label:y.default.t(779)}),a).map((({value:e,label:t})=>l.default.createElement("div",{className:m.default.option,key:`option-${e}`},l.default.createElement("label",{className:m.default.label},l.default.createElement("input",{type:"radio",className:m.default.input,value:String(e),checked:e===this.state.duration,onChange:this._handleChange}),t))))),l.default.createElement("div",{className:m.default.footer},l.default.createElement(I.TextParagraph,{className:m.default.footerText,theme:"plain"},S.default.isEphemeral24HDurationEnabled()?y.default.t(758):y.default.t(757)," ",l.default.createElement(v.default,{href:(0,g.getEphemeralFaqUrl)()},y.default.t(1002))),S.default.isEphemeralAllowGroupMembersEnabled()?l.default.createElement(I.TextParagraph,{className:m.default.footerText,theme:"muted"},this.props.chat.isGroup?y.default.t(764):y.default.t(763)):null)):null;return l.default.createElement(u.default,{theme:"gallery"},l.default.createElement(f.default,{title:y.default.t(901),onBack:this._handleBack,type:f.DRAWER_HEADER_TYPE.LARGE}),l.default.createElement(c.default,null,r,i))}}A.displayName="EphemeralDrawer";var N=(0,C.default)(A);t.default=N},25707:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement("div",{className:l.default.nuxIllustration},s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.chatIcon,l.default.chatIcon1)},s.default.createElement(n.default,{name:"chat-alt"})),s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.chatIcon,l.default.chatIcon2)},s.default.createElement(n.default,{name:"chat-alt"})),s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.chatIcon,l.default.chatIcon3)},s.default.createElement(n.default,{name:"chat-alt"})),s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.chatIcon,l.default.chatIcon4)},s.default.createElement(n.default,{name:"chat-alt"})),s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.chatIcon,l.default.chatIcon5)},s.default.createElement(n.default,{name:"chat-alt"})),s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.chatIcon,l.default.chatIcon6)},s.default.createElement(n.default,{name:"chat-alt"})),s.default.createElement("div",{className:(0,i.default)(l.default.nuxIcon,l.default.bannerIcon)},s.default.createElement(n.default,{name:"disappearing"})))};var i=r(a(94184)),s=r(a(67294)),l=r(a(93874)),n=r(a(32885))},59614:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(24788),l=i(a(67294)),n=r(a(74798)),o=r(a(33766)),d=r(a(51115)),u=r(a(75444)),c=r(a(62899)),f=r(a(17367)),h=r(a(20923)),p=a(92997),m=a(54438),_=i(a(12536)),v=a(89338),g=r(a(18893)),E=r(a(98140)),S=r(a(80162)),C=a(26689),y=r(a(85726)),b=a(32182),M=0,T=1,I=2;class P extends l.Component{constructor(...e){super(...e),this.state={state:M,status:void 0,groupMetadata:void 0,subject:void 0},this.handleViewGroup=e=>{var t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&o.default.openChatFromUnread(n.default.assertGet(t)),o.default.closeModal()},this.handleJoinGroup=()=>{(0,v.joinGroupViaInvite)(this.props.groupCode).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)})),o.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catch((0,s.filteredCatch)(_.Unmount,(()=>{}))).catch((0,s.filteredCatch)(m.ServerStatusCodeError,(e=>{this.setState({state:I,status:e.status})})))},this.handleCancel=()=>{o.default.closeModal()}}componentDidMount(){(0,b.queryGroupInviteInfo)(this.props.groupCode).checkpoint(this.props.rejectOnUnmount()).then((e=>{var{status:t,subject:a,groupMetadata:r,inGroup:i}=e;i?this.handleViewGroup(r.id):this.setState({status:t,groupMetadata:r,subject:a,state:T})})).catch((0,s.filteredCatch)(m.ServerStatusCodeError,(e=>{this.setState({status:e.status,state:I})}))).catch((0,s.filteredCatch)(_.Unmount,(()=>{})))}render(){var e,t,{groupCode:a}=this.props,{state:r,status:i,groupMetadata:s,subject:o}=this.state,m={cancelText:S.default.t(868),onCancel:this.handleCancel,onOK:void 0,okText:void 0};if(r===M)e=l.default.createElement(p.LoadingWithText,{text:S.default.t(869)});else if(r===T&&s){var _,v=s.participants,y=s.size||v.length,b=v.filter((e=>!!c.default.assertGet(e.id).name)),I=s.desc?l.default.createElement("div",{className:g.default.metadataDesc},s.desc):null;_=b.length?l.default.createElement("div",{className:g.default.participantList},l.default.createElement("div",{className:g.default.participantsTitle},S.default.t(875,{count:y,_plural:y})," ","•"," ",S.default.t(870,{count:b.length,_plural:b.length})),l.default.createElement("div",{className:g.default.participantsContainer},b.map((e=>l.default.createElement("div",{key:e.id.toString(),className:g.default.participantWrapper},l.default.createElement(f.default,{id:e.id}),l.default.createElement(h.default,{className:g.default.participantText,text:e.contact.formattedName})))))):l.default.createElement("div",{className:g.default.emptyContentContainer},l.default.createElement("span",{className:g.default.participantsText},S.default.t(875,{count:y,_plural:y})),l.default.createElement("span",{className:g.default.contactsText}," ","•"," ",S.default.t(870,{count:b.length,_plural:b.length})));var P=`${u.default.GROUP_INVITE_URL}${a}`;e=l.default.createElement("div",{className:g.default.container},l.default.createElement("div",{className:g.default.metadataContainer},l.default.createElement(E.default,{fallbackSVG:"default-group",size:82,imgProps:{src:P}}),l.default.createElement("div",{className:g.default.metadataText},l.default.createElement(h.default,{className:g.default.metadataTitle,text:o}),I)),_);var A=n.default.get(s.id),N=!!A&&!A.isReadOnly;m.onOK=N?this.handleViewGroup:this.handleJoinGroup,m.okText=N?S.default.t(896):S.default.t(872),t=C.FlexModalType}else{var O;switch(i){case 401:O=S.default.t(862);break;case 404:O=S.default.t(863);break;case 410:O=S.default.t(865);break;case 419:O=S.default.t(866);break;default:O=S.default.t(867)}m.cancelText=S.default.t(1941),e=l.default.createElement("div",null,O)}return l.default.createElement(d.default,{cancelText:m.cancelText,onCancel:m.onCancel,onOK:m.onOK,okText:m.okText,type:t},e)}}P.displayName="GroupInviteModal";var A=(0,y.default)(P);t.default=A},22048:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(24788),l=i(a(30381)),n=r(a(67294)),o=i(a(74798)),d=i(a(33766)),u=i(a(51115)),c=i(a(75444)),f=i(a(62899)),h=i(a(17367)),p=i(a(20923)),m=a(92997),_=a(54438),v=r(a(12536)),g=a(77824),E=a(26226),S=i(a(4769)),C=i(a(8670)),y=i(a(24642)),b=i(a(98140)),M=i(a(80162)),T=a(26689),I=i(a(43395)),P=i(a(85726)),A=i(a(72765)),N=i(a(32885)),O=r(a(48847)),D=(i(a(35822)),a(52152)),w=a(64947),R=0,k=1,L=2;class x extends n.Component{constructor(...e){super(...e),this.state={state:R,status:void 0,errString:void 0,groupMetadata:void 0,subject:void 0},this.handleViewGroup=e=>{var t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&d.default.openChatFromUnread(o.default.assertGet(t)),d.default.closeModal()},this.revokeGrpV4Invite=()=>{var{msg:e}=this.props,{inviteGrp:t}=this.props.msg,a=o.default.assertGet((0,D.createWid)(t)).groupMetadata;d.default.openModal(n.default.createElement(u.default,{onOK:()=>{d.default.closeModal(),null==a||a.revokeGroupV4AddInvite([e.to.toString()]).then((e=>{d.default.openToast(n.default.createElement(O.default,{msg:null!=e&&e>=400?this.groupInviteRevokeErrorStr(e):M.default.t(1893),id:(0,O.genId)()}))}))},okText:M.default.t(2e3),onCancel:()=>d.default.closeModal(),cancelText:M.default.t(1768)},n.default.createElement(p.default,{text:M.default.t(922,{participant:e.chat.contact.formattedName})})))},this.handleJoinGroup=()=>{var{inviteCode:e,inviteCodeExp:t,inviteGrp:a,from:r}=this.props.msg;Promise.resolve();(0,w.joinGroupViaInviteV4)(e,t.toString(),a,r.toString()).then((e=>200===e.status?(0,g.findChat)((0,D.createWid)(a)):Promise.reject(e.status))).then((e=>{d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)})),d.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catchType(v.Unmount,(()=>{})).catch((e=>{this.setState({state:L,status:e})}))},this.handleCancel=()=>{d.default.closeModal()},this.groupInviteAcceptErrorStr=e=>{var t;switch(e){case 400:t=M.default.t(861);break;case 401:t=M.default.t(862);break;case 404:t=M.default.t(863);break;case 409:t=M.default.t(864);break;case 410:t=M.default.t(865);break;case 419:t=M.default.t(866);break;default:t=M.default.t(867)}return t},this.groupInviteQueryErrorStr=e=>{var t;switch(e){case 403:t=M.default.t(877);break;case 404:t=M.default.t(878);break;default:t=M.default.t(1162)}return t},this.groupInviteRevokeErrorStr=e=>{var t;switch(e){case 400:t=M.default.t(880);break;case 401:t=M.default.t(881);break;case 403:t=M.default.t(882);break;case 404:t=M.default.t(883);break;default:t=M.default.t(884)}return t}}componentDidMount(){var{inviteCode:e,inviteCodeExp:t,inviteGrp:a,isSentByMe:r}=this.props.msg;if(r){var i=o.default.assertGet((0,D.createWid)(a));i.groupMetadata&&C.default.find(i.id).catch((0,s.filteredCatch)([_.WebdDrop,v.ProtoVersionUndefined],(()=>{}))).finally((()=>{this.setState({status:200,groupMetadata:i.groupMetadata,subject:i.formattedTitle||i.name,state:k})}))}else{Promise.resolve();(0,w.queryGroupInviteV4Info)(e,t.toString(),a,this.props.msg.from.toString()).then((e=>{if(null!=e.status&&e.status>=400)this.setState({status:e.status,state:L,errString:this.groupInviteAcceptErrorStr(e.status)});else if(e.id){var t=new S.default({id:e.id,owner:e.owner,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict,announce:e.announce,participants:e.participants});this.setState({status:200,groupMetadata:t,subject:e.subject,state:k})}else this.setState({status:e.status,state:L,errString:this.groupInviteAcceptErrorStr(e.status)})})).catchType(v.Unmount,(()=>{}))}}render(){var e,t,{msg:a}=this.props,{inviteGrp:r,inviteCodeExp:i,inviteCode:s,isGroupsV4InviteExpired:d,from:_,isSentByMe:v}=a,{state:g,status:S,groupMetadata:C,subject:P,errString:A}=this.state,O={cancelText:M.default.t(868),onCancel:this.handleCancel,onOK:void 0,okText:void 0};if(g===R)e=n.default.createElement(m.Loading,null);else if(g===k&&C){var w,L=C.participants,x=C.size||L.length,B=L.filter((e=>!!f.default.assertGet(e.id).name)),G=C.desc?n.default.createElement("div",{className:y.default.metadataDesc},n.default.createElement(p.default,{text:C.desc})):null;w=B.length?n.default.createElement("div",{className:y.default.participantList},n.default.createElement("div",{className:y.default.participantsTitle},M.default.t(875,{count:x,_plural:x})," ","•"," ",M.default.t(870,{count:B.length,_plural:B.length})),n.default.createElement("div",{className:y.default.participantsContainer},B.map((e=>n.default.createElement("div",{key:e.id.toString(),className:y.default.participantWrapper},n.default.createElement(h.default,{id:e.id}),n.default.createElement(p.default,{className:y.default.participantText,text:e.contact.formattedName})))))):n.default.createElement("div",{className:y.default.emptyContentContainer},n.default.createElement("span",{className:y.default.participantsText},M.default.t(875,{count:x,_plural:x})),n.default.createElement("span",{className:y.default.contactsText}," ","•"," ",M.default.t(870,{count:B.length,_plural:B.length})));var U=`w=${encodeURIComponent((0,E.getMaybeMeUser)().toString())}&g=${encodeURIComponent(r)}&c=${encodeURIComponent(s)}&e=${encodeURIComponent(String(i))}&a=${encodeURIComponent(_.toString())}`,j=`${c.default.GROUP_V4_INVITE_ICON_URL}?${U}`;e=n.default.createElement("div",{className:y.default.container},n.default.createElement("div",{className:y.default.metadataContainer},v?n.default.createElement(I.default,{size:82,wid:(0,D.createWid)(r)}):n.default.createElement(b.default,{fallbackSVG:"default-group",size:82,imgProps:{src:j}}),n.default.createElement("div",{className:y.default.metadataText},n.default.createElement(p.default,{className:y.default.metadataTitle,text:P}),G)),w);var V=o.default.get(C.id),H=!!V&&!V.isReadOnly;a.isSentByMe?(O.onOK=this.revokeGrpV4Invite,O.okText=M.default.t(1426)):H?(O.onOK=this.handleViewGroup,O.okText=M.default.t(896)):d||(O.onOK=this.handleJoinGroup,O.okText=M.default.t(872)),t=T.FlexModalType}else O.cancelText=M.default.t(1941),e=n.default.createElement("div",null,A);var W,Y,K,q=g===k?n.default.createElement("div",{className:y.default.inviteExpiration},n.default.createElement(N.default,{name:"panel-recent",display:"inline",className:y.default.inviteExpirationIcon}),n.default.createElement("span",null,(W=parseInt(i,10),Y=(0,l.default)(1e3*W).diff((0,l.default)()),K=Math.floor(Y/F),Y<=0?M.default.t(981):K<12?M.default.t(979,{time:(0,l.default)().local().format("LT")}):K<24?M.default.t(980,{number:1,_plural:1}):K<48?M.default.t(980,{number:2,_plural:2}):M.default.t(980,{number:3,_plural:3})))):null;return n.default.createElement(u.default,{cancelText:O.cancelText,onCancel:O.onCancel,onOK:O.onOK,okText:O.okText,type:t},e,q)}}x.CONCERNS={msg:["id","to","inviteCode","inviteCodeExp","inviteGrp","isGroupsV4InviteExpired","from","chat","isSentByMe"]},x.displayName="GroupV4InviteModal";var F=36e5;var B=(0,A.default)((0,P.default)(x),x.CONCERNS);t.default=B},29742:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Messaging=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(62685)),o=i(a(33766)),d=i(a(51115)),u=i(a(75444)),c=i(a(97765)),f=i(a(80162)),h=i(a(41849)),p=i(a(26689)),m=i(a(32885)),_=i(a(89848));t.Messaging={NOTIFICATIONS:"NOTIFICATIONS",CAMERA_FAIL:"CAMERA_FAIL",CAMERA_MISSING:"CAMERA_MISSING",MIC_FAIL:"MIC_FAIL",MIC_MISSING:"MIC_MISSING",CAMERA:"CAMERA",MIC:"MIC"};var v={GUIDE_ALLOW:"guide-allow",GUIDE_UNBLOCK:"guide-unblock",GUIDE_NONE:"guide-none"},g="chrome_media_error",E="firefox_lock",S="opera_media";class C extends l.Component{render(){var{type:e,onCancel:t,onConfirm:a,messaging:r}=this.props,i=l.default.createElement(b,{messaging:r});if(e===v.GUIDE_ALLOW){var o;switch(_.default.browser){case u.default.BROWSER_TYPE.CHROME:case u.default.BROWSER_TYPE.FIREFOX:o=c.default.topLeft;break;case u.default.BROWSER_TYPE.EDGE:o=c.default.bottomCenter;break;default:o=c.default.topCenter}return l.default.createElement(p.default,{type:"guide"},l.default.createElement("div",{className:(0,s.default)(c.default.containerAllow,o)},l.default.createElement("div",{className:c.default.icon},l.default.createElement(m.default,{name:"back",directional:!0})),l.default.createElement("div",{className:c.default.title},l.default.createElement(y,{messaging:r})),l.default.createElement("div",{className:c.default.description},i),l.default.createElement("div",{className:c.default.controls},l.default.createElement(n.default,{onClick:a,type:"primary"},f.default.t(1289)))))}return l.default.createElement(d.default,{title:l.default.createElement(y,{messaging:r}),onOK:a,okText:f.default.t(1289),onCancel:t,cancelText:t?f.default.t(1002):void 0},l.default.createElement("div",{className:c.default.description},i))}}function y(e){var{messaging:t}=e;switch(t){case"NOTIFICATIONS":return l.default.createElement(h.default,{id:947});case"CAMERA_FAIL":return l.default.createElement(h.default,{id:932});case"CAMERA_MISSING":return l.default.createElement(h.default,{id:931});case"MIC_MISSING":return l.default.createElement(h.default,{id:941});case"CAMERA":return l.default.createElement(h.default,{id:932});case"MIC_FAIL":case"MIC":return l.default.createElement(h.default,{id:943});default:throw new Error(`Invalid messaging: ${t}`)}}function b(e){var{messaging:t}=e,{browser:a}=_.default,r={[g]:l.default.createElement("span",{className:"chrome-media-icon"}),[E]:l.default.createElement("span",{className:"firefox-lock-icon"}),[S]:l.default.createElement("span",{className:"opera-media-icon"})};switch(t){case"NOTIFICATIONS":return"edge"===a?l.default.createElement(h.default,{id:945,params:r}):"firefox"===a?l.default.createElement(h.default,{id:946,params:r}):l.default.createElement(h.default,{id:944,params:r});case"CAMERA_FAIL":return"edge"===a?l.default.createElement(h.default,{id:926,params:r}):"firefox"===a?l.default.createElement(h.default,{id:927,params:r}):"safari"===a?l.default.createElement(h.default,{id:929,params:r}):"opera"===a?l.default.createElement(h.default,{id:928,params:r}):l.default.createElement(h.default,{id:925,params:r});case"CAMERA_MISSING":return l.default.createElement(h.default,{id:930,params:r});case"MIC_FAIL":return"edge"===a?l.default.createElement(h.default,{id:936,params:r}):"firefox"===a?l.default.createElement(h.default,{id:937,params:r}):"safari"===a?l.default.createElement(h.default,{id:939,params:r}):"opera"===a?l.default.createElement(h.default,{id:938,params:r}):l.default.createElement(h.default,{id:935,params:r});case"MIC_MISSING":return l.default.createElement(h.default,{id:940,params:r});case"CAMERA":return"edge"===a?l.default.createElement(h.default,{id:924,params:r}):l.default.createElement(h.default,{id:923,params:r});case"MIC":return"edge"===a?l.default.createElement(h.default,{id:934,params:r}):l.default.createElement(h.default,{id:933,params:r});default:throw new Error(`Invalid messaging type: ${t}`)}}t.default=C,C.TYPE=v,C.defaultProps={type:v.GUIDE_NONE,onConfirm:()=>o.default.closeModal()},C.displayName="GuidePopup"},75451:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67154)),l=r(a(67294)),n=i(a(55847)),o=a(51774),d=i(a(75444)),u=i(a(77188)),c=i(a(31190)),f=i(a(80162)),h=r(a(7170)),p=i(a(59979)),m=i(a(89848)),_=a(32885).default;class v extends l.PureComponent{constructor(...e){super(...e),this.imgRef=(0,l.createRef)(),this._txtRef=(0,l.createRef)(),this._refContainer=(0,l.createRef)()}componentDidMount(){var e=this.imgRef.current,t=this._txtRef.current;this.props.animate?((0,p.default)(e,{scale:[1,0],opacity:[1,0]},{delay:1340,duration:180,easing:[.05,1.02,0,1.01]}),(0,p.default)(t,{translateY:[0,80],opacity:[1,0]},{delay:1300,duration:140,easing:[.05,1.02,0,1.01]})):(e&&(e.style.opacity="1"),t&&(t.style.opacity="1"))}animatePanel(e,t){var a,r=null===(a=this._refContainer.current)||void 0===a?void 0:a.clientWidth;return null!=r&&e!==t&&(0,o.animateConversationPanel)(this._refContainer.current,r/(e-t))}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}render(){var e,t,a={[`data-asset-intro-image-${this.context.theme}`]:!0};if(u.default.supportsFeature(u.default.F.MD_BACKEND)){e=l.default.createElement("div",{ref:this.imgRef,className:c.default.mdImageWrapper},l.default.createElement(_,{className:c.default.mdBetaImage,name:"light"===(0,h.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark"}));var r=l.default.createElement("div",{className:c.default.betaIcon},l.default.createElement("b",{className:c.default.betaIconText},f.default.t(263)));t=l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:c.default.betaTitle},l.default.createElement("h1",{"data-a8n":n.default.key("intro-title")},f.default.t(971)),r),l.default.createElement("div",{"data-a8n":n.default.key("intro-text"),className:c.default.betaText},f.default.t(969),l.default.createElement("br",null),f.default.t(970)))}else e=l.default.createElement("div",(0,s.default)({ref:this.imgRef,className:c.default.image},a)),t=l.default.createElement(l.default.Fragment,null,l.default.createElement("h1",{"data-a8n":n.default.key("intro-title"),className:c.default.title},f.default.t(978)),l.default.createElement("div",{"data-a8n":n.default.key("intro-text"),className:c.default.text},f.default.t(972)));return l.default.createElement("div",{className:c.default.intro,ref:this._refContainer},l.default.createElement("div",{className:c.default.body},e,l.default.createElement("div",{ref:this._txtRef,className:c.default.textContainer},t,l.default.createElement(g,null))))}}v.contextType=h.default,v.displayName="IntroPanel";var g=()=>{var e,t=`<a href="https://www.whatsapp.com/download" target="_blank">${f.default.t(975)}</a>`;switch(m.default.os){case d.default.OS_TYPE.MAC:e=f.default.t(976,{get_it_here:t});break;case d.default.OS_TYPE.WINDOWS:e=f.default.t(977,{get_it_here:t})}return e?l.default.createElement(E,null,l.default.createElement("span",{className:c.default.secondaryIcon},l.default.createElement(_,{name:"laptop"})),l.default.createElement("div",{dangerouslySetInnerHTML:{__html:e},className:c.default.secondaryTextBody})):null},E=({children:e})=>l.default.createElement("div",{className:c.default.secondary},l.default.createElement("div",{className:c.default.divider}),l.default.createElement("div",{className:c.default.secondaryText},e)),S=v;t.default=S},85131:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(t=f.default.pttPlaybackSpeedEnabled?p:[],[[u.default.t(1191),s.default.TOGGLE_UNREAD],[u.default.t(1242),s.default.TOGGLE_MUTE],[u.default.t(1182),s.default.TOGGLE_ARCHIVE],[u.default.t(1186),s.default.DELETE_OR_EXIT_CHAT],[u.default.t(1245),s.default.TOGGLE_PIN],[u.default.t(1213),s.default.SEARCH],[u.default.t(1224),s.default.SEARCH_IN_CHAT],[u.default.t(1243),s.default.OPEN_NEW_CHAT],[u.default.t(1244),s.default.OPEN_NEW_GROUP],[u.default.t(1246),s.default.OPEN_PROFILE],...t,[u.default.t(1107),s.default.OPEN_SETTINGS],[u.default.t(983),s.default.OPEN_EMOJI_PANEL],[u.default.t(984),s.default.OPEN_GIF_PANEL],[u.default.t(985),s.default.OPEN_STICKER_PANEL]]).map((([e,t,a=!0],r)=>{var s=i.default.createElement(o.default,{action:t,addModifiers:a});if(s)return i.default.createElement("div",{key:r,className:d.default.section},i.default.createElement("div",{className:d.default.action,title:e},e),i.default.createElement("div",{className:d.default.shortcut},s))}));var t;return i.default.createElement(n.default,{onOK:()=>{l.default.closeModal()},okText:u.default.t(1941),type:c.FlexModalType},i.default.createElement("div",{className:d.default.container},i.default.createElement(h.TextSpan,{theme:"popup-title"},u.default.t(986)),i.default.createElement("div",{className:d.default.list},e)))};var i=r(a(67294)),s=r(a(71556)),l=r(a(33766)),n=r(a(51115)),o=r(a(16305)),d=r(a(95694)),u=r(a(80162)),c=a(26689),f=r(a(43232)),h=a(38245),p=[[u.default.t(968),s.default.INCREASE_PTT_SPEED,!1],[u.default.t(649),s.default.DECREASE_PTT_SPEED,!1]]},6041:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(64120)),n=r(a(39490)),o=i(a(55977)),d=r(a(3128)),u=r(a(59432)),c=r(a(9908)),f=r(a(62886)),h=r(a(35001)),p=r(a(80162)),m=r(a(33913)),_=i(a(26689));class v extends s.Component{constructor(...e){super(...e),this.flatListController=new u.default,this._refList=(0,s.createRef)(),this._refSearch=(0,s.createRef)(),this.handleNext=e=>{e.preventDefault(),e.stopPropagation();var t=this.props.selection;t&&t.setNext(!0)},this.handlePrev=e=>{var t=this.props.selection;t&&(e.preventDefault(),e.stopPropagation(),t.prev()>-1?t.setPrev(!0):(t.unset(),c.default.shouldIndicateFocus(),f.default.focus(this._refSearch.current)))},this.handleFocusList=e=>{this._refList.current&&(e.preventDefault(),e.stopPropagation(),c.default.shouldIndicateFocus(),this.props.selection.setFirst(!0))},this.handleSelectFirst=e=>{e.preventDefault(),e.stopPropagation();var t=this.props.data[0];t&&this.props.onSelect(e,t)},this.handleSearch=e=>{this.props.onSearch(e)},this._isFocusInContainer=e=>{var t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},this._handleFocus=e=>{this._isFocusInContainer(e)&&this.props.selection.setFirst(!0)},this._handleBlur=e=>{this._isFocusInContainer(e)&&this.props.selection.unset()}}componentDidMount(){f.default.focus(this._refSearch.current)}render(){var e,{title:t,onCancel:a,onSearch:r,onRef:i,searchPlaceholder:u,renderItem:c,data:f,emptyState:v}=this.props,g={down:this.handleFocusList},E={down:this.handleNext,up:this.handlePrev};r&&(e=s.default.createElement(h.default,{handlers:g},s.default.createElement(m.default,{ref:this._refSearch,onSearch:this.handleSearch,onEnter:this.handleSelectFirst,placeholder:u||p.default.t(1431)})));var S=f.length?s.default.createElement(h.default,{handlers:E,onFocus:this._handleFocus,onBlur:this._handleBlur,tabIndex:0},s.default.createElement(d.default,{data:f,ref:this._refList,flatListController:this.flatListController,direction:"vertical",renderItem:c})):v;return s.default.createElement(_.default,{type:_.TowerModalType,onRef:i},s.default.createElement(l.default,{key:"contact-modal"},s.default.createElement(o.default,{title:t,type:o.DRAWER_HEADER_TYPE.POPUP,onCancel:a}),e,s.default.createElement(n.default,{flatListControllers:[this.flatListController]},S)))}}t.default=v,v.displayName="ListModal"},17515:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,d.default)(e.chat,["name","isGroup","liveLocation"]),{name:a,isGroup:r}=t,u=r?o.default.t(143,{name:a}):o.default.t(144,{name:a});return i.default.createElement(l.default,{onOK:()=>{var{liveLocation:e}=t;e&&e.stopMyLiveLocation(),s.default.closeModal()},okText:o.default.t(1033),onCancel:()=>{s.default.closeModal()}},i.default.createElement(n.default,{text:u}))};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(20923)),o=r(a(80162)),d=r(a(95607))},60839:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logSessionEvent=function(e,t,a){var r=new i.default.ContactUsSession({contactUsExitState:e,contactUsT:Math.ceil(performance.now()-t)});a&&(r.contactUsAutomaticEmail=!0,r.contactUsProblemDescription=a.subject,r.contactUsScreenshotC=a.numScreenshots);r.commit()};var i=r(a(72462))},42618:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{to:a,participant:r,msg:h}=e;if(a.isUser()){var p=n.default.get(a),m=p?p.formattedName:(0,c.default)(a);t=o.default.t(1906,{name:m})}else if("string"==typeof r&&u.default.isUser(r)){var _=n.default.get((0,f.createWid)(r)),v=_?_.formattedName:(0,c.default)(r);t=o.default.t(1904,{name:u.default.user(v)})}else t=o.default.t(1903);return i.default.createElement(l.default,{onOK:()=>{h.resend().then((e=>{e===d.SendMsgResult.ERROR_UNKNOWN&&__LOG__(2,void 0,void 0,void 0,["messaging"])`MdDowngradeModal:resend: failure with SendMsgResult.ERROR_UNKNOWN`})).catch((function(e){__LOG__(2,void 0,void 0,void 0,["messaging"])`MdDowngradeModal:resend: resend failure ${e}`})),s.default.closeModal()},okText:o.default.t(2050),cancelText:o.default.t(1768),onCancel:()=>{s.default.closeModal()},title:o.default.t(1928)},t)};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(62899)),o=r(a(80162)),d=a(73525),u=r(a(53680)),c=r(a(8745)),f=a(52152)},33509:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t}=e;return i.default.createElement(l.default,{onOK:()=>{t.resend().then((e=>{e===o.SendMsgResult.ERROR_UNKNOWN&&__LOG__(2,void 0,void 0,void 0,["messaging"])`MdSendRetryModal:resend: failure with SendMsgResult.ERROR_UNKNOWN`})).catch((function(e){__LOG__(2,void 0,void 0,void 0,["messaging"])`MdSendRetryModal:resend: resend failure ${e}`})),s.default.closeModal()},okText:n.default.t(2050),cancelText:n.default.t(1768),onCancel:()=>s.default.closeModal()},n.default.t(1928))};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(80162)),o=a(73525)},22039:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r=(0,d.default)(e.msg,["type","isGif","isVcardOverMmsDocument"]),{type:u}=r;switch(u){case n.default.MSG_TYPE.VIDEO:r.isGif?(t=o.default.t(1154),a=o.default.t(1153)):(t=o.default.t(1161),a=o.default.t(1160));break;case n.default.MSG_TYPE.AUDIO:t=o.default.t(1148),a=o.default.t(1147);break;case n.default.MSG_TYPE.IMAGE:t=o.default.t(1157),a=o.default.t(1156);break;case n.default.MSG_TYPE.DOCUMENT:if(r.isVcardOverMmsDocument){t=o.default.t(1150),a=o.default.t(1149);break}t=o.default.t(1152),a=o.default.t(1151);break;case n.default.MSG_TYPE.STICKER:t=o.default.t(1159),a=o.default.t(1158);break;default:t=o.default.t(1155),__LOG__(4,void 0,new Error,!0)`type: ${u}`,SEND_LOGS("MediaMissingModal: unexpected message type")}return i.default.createElement(l.default,{title:t,onOK:()=>{s.default.closeModal()},okText:o.default.t(1941)},a)};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(75444)),o=r(a(80162)),d=r(a(95607))},4290:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=(0,d.default)(e.msg,["type","isGif"]);switch(a.type){case n.default.MSG_TYPE.VIDEO:a.isGif||(t=o.default.t(1253))}return i.default.createElement(l.default,{onOK:()=>{s.default.closeModal()},okText:o.default.t(1941)},t)};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(75444)),o=r(a(80162)),d=r(a(95607))},23843:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t}=e;return i.default.createElement(l.default,{onCancel:()=>s.default.closeModal(),onOK:()=>{s.default.closeModal(),n.default.initDownload(t)},okText:o.default.t(1764),cancelText:o.default.t(1768),title:o.default.t(701)},o.default.t(700))};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=r(a(61900)),o=r(a(80162))},65167:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({altText:e,mediaData:t}){var{preview:a}=(0,l.default)(t,["preview"]),r=null==a?void 0:a.url();return i.default.createElement("div",{className:s.default.mediaViewerBlurCrop,onClick:n},i.default.createElement("img",{className:s.default.mediaViewerBlurImg,src:r,alt:e}))};var i=r(a(67294)),s=r(a(57269)),l=r(a(95607));function n(e){e.stopPropagation()}},83957:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(52087)),o=i(a(65167)),d=i(a(75444)),u=i(a(23152)),c=i(a(89805)),f=a(85063),h=i(a(89958)),p=i(a(72462)),m=i(a(51124)),_=i(a(72765)),v=i(a(26144));class g extends l.PureComponent{constructor(...e){super(...e),this.state={zoomIn:null},this._refObjectFit=(0,l.createRef)(),this.getOutsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.outsideContainer},this.getInsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.insideContainer},this.onImageClick=e=>{e.stopPropagation(),this._onZoomIn(e.pageX,e.pageY)},this.onImageKeyboardZoom=e=>{e.stopPropagation(),this._onZoomIn(window.innerWidth/2,window.innerHeight/2)},this._onZoomIn=(e,t)=>{if(this.state.zoomIn)this._cancelZoomIn();else{var a=this.getInsideContainer(),r=this.getOutsideContainer();if(a instanceof HTMLElement&&r instanceof HTMLElement){this.heightOverflow=a.clientHeight*d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-r.clientHeight,this.widthOverflow=a.clientWidth*d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-r.clientWidth;var{translateX:i,translateY:s}=this.getTranslatePosition(r,e,t);this.props.onImgZoomIn(!0),this.setState({zoomIn:{factor:d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR,translateX:i,translateY:s}})}}},this._cancelZoomIn=()=>{this.props.onImgZoomIn(!1),this.setState({zoomIn:null})},this.getTranslatePosition=(e,t,a)=>{var r=window.innerWidth/2-t,i=window.innerHeight/2-a;return{translateX:this.widthOverflow>0?Math.round(1.2*r*this.widthOverflow/e.clientWidth):0,translateY:this.heightOverflow>0?Math.round(1.2*i*this.heightOverflow/e.clientHeight):0}},this._renderBlurredImage=()=>l.default.createElement(m.default,{type:"scaleDown",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},position:"relative",objectPosition:"relative"},l.default.createElement(o.default,{altText:"",mediaData:this.props.mediaData})),this._renderImage=e=>{var{zoomIn:t}=this.state,{preventDownload:a}=this.props;return l.default.createElement(u.default,{className:(0,s.default)(c.default.mediaViewerImg,{[c.default.cursorZoomIn]:!t,[c.default.isDownloadPrevented]:a}),draggable:!a,onClick:this.onImageClick,disableContextMenu:a,src:e})},this._renderDownloadPreventedImage=e=>{var{zoomIn:t}=this.state;return l.default.createElement("figure",{className:(0,s.default)(c.default.mediaViewerImg,{[c.default.cursorZoomIn]:!t}),draggable:"false",onClick:this.onImageClick,onContextMenu:e=>e.preventDefault()},this._renderImage(e))}}componentDidMount(){var e;null===(e=this.props.msg)||void 0===e||e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg&&this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var{mediaData:e,msg:t,preventDownload:a}=this.props;switch(e.mediaStage){case f.MEDIA_DATA_STAGE.DECRYPTING:if(null==e.progressiveStage)return this._renderBlurredImage();break;case f.MEDIA_DATA_STAGE.RESOLVED:case f.MEDIA_DATA_STAGE.PROGRESSIVE_READY:break;default:return this._renderBlurredImage()}var r={width:e.fullWidth,height:e.fullHeight},i=a?this._renderDownloadPreventedImage:this._renderImage,s=l.default.createElement("div",{className:c.default.mediaViewerImg},null!=t?l.default.createElement(l.default.Fragment,null,l.default.createElement(h.default,{mediaData:e,placeholderRenderer:this._renderBlurredImage,downloadMedia:()=>{if(null!=t.mediaObject)return t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})},renderProgressively:!0},i),t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&l.default.createElement(n.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onAnnotationTooltipDisplay,onTooltipDismiss:this.props.onAnnotationTooltipDismiss})):i(e.renderableUrl));return this.state.zoomIn&&(s=l.default.createElement(v.default,{displayName:"ZoomInImage",escapable:!0,requestDismiss:this._cancelZoomIn},s)),l.default.createElement(m.default,{type:"zoomIn",size:r,position:"relative",objectPosition:"relative",zoomIn:this.state.zoomIn,onObjectLoad:this.props.onLoad,ref:this._refObjectFit},s)}}g.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","renderableUrl","progressiveStage"]},g.displayName="MediaImage";var E=(0,_.default)(g,g.CONCERNS);t.default=class extends E{get heightOverflow(){return this.getComponent().heightOverflow}get widthOverflow(){return this.getComponent().widthOverflow}onImageClick(e){return this.getComponent().onImageClick(e)}onImageKeyboardZoom(e){return this.getComponent().onImageKeyboardZoom(e)}getTranslatePosition(e,t,a){return this.getComponent().getTranslatePosition(e,t,a)}getOutsideContainer(){return this.getComponent().getOutsideContainer()}getInsideContainer(){return this.getComponent().getInsideContainer()}}},81154:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t,mediaData:a}=e,{mediaStage:r,size:i,streamable:h}=(0,f.default)(a,["mediaStage","size","streamable"]);if(h&&a.isStreamable())return null;switch(r){case o.MEDIA_DATA_STAGE.INIT:case o.MEDIA_DATA_STAGE.EXISTS:case o.MEDIA_DATA_STAGE.RESOLVED:case o.MEDIA_DATA_STAGE.ERROR_MISSING:case o.MEDIA_DATA_STAGE.NEED_UPLOAD:case o.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case o.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case o.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return null;case o.MEDIA_DATA_STAGE.NEED_POKE:return s.default.createElement(n.Download,{filesize:i,onClick:e=>function(e,t){e.stopPropagation(),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:u.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}(e,t)});case o.MEDIA_DATA_STAGE.FETCHING:case o.MEDIA_DATA_STAGE.PREPARING:case o.MEDIA_DATA_STAGE.UPLOADING:case o.MEDIA_DATA_STAGE.REUPLOADING:case o.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case o.MEDIA_DATA_STAGE.DECRYPTING:case o.MEDIA_DATA_STAGE.SENDING:return s.default.createElement("div",{onClick:e=>function(e,t){e.stopPropagation(),t.cancelDownload()}(e,t)},s.default.createElement(n.Pending,{cancelable:!0}));case o.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return s.default.createElement(n.Download,{filesize:i,onClick:e=>function(e,t){e.stopPropagation(),l.default.openModal(s.default.createElement(d.default,{msg:(0,c.unproxy)(t)}))}(e,t)})}};var s=i(a(67294)),l=i(a(33766)),n=r(a(73616)),o=a(85063),d=i(a(23843)),u=i(a(72462)),c=a(6578),f=i(a(95607))},29093:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(33766)),o=i(a(51115)),d=i(a(75444)),u=i(a(16520)),c=a(26226),f=i(a(80162)),h=i(a(80896)),p=a(84649),m=i(a(30194)),_=i(a(72462)),v=a(38245),g=i(a(7170)),E={light:{low:a(25321),high:a(17928)},dark:{low:a(2907),high:a(87614)}};class S extends l.PureComponent{constructor(e){super(e),this.onOK=()=>{(0,p.openMessengerRoomUrl)(this.props.chat),n.default.closeModal()},this.onCancel=()=>{var e=_.default.DESTINATION.CANCELLED,t=this.props.chat?_.default.ROOMS_ENTRY_POINT.ATTACHMENT:_.default.ROOMS_ENTRY_POINT.WEB_MENU;new _.default.RoomsCreationFlow({entryResult:e,roomsEntryPoint:t}).commit(),n.default.closeModal()},(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW,{views:0,maxViews:1}),(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING,{views:0,maxViews:5}),e.chat||(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST,{views:0,maxViews:1}),e.chat&&!(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)&&(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN,{views:0,maxViews:1})}componentDidMount(){(0,c.shouldShowNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW)?((0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW),this.props.listeners.add(window,"dpichange",(()=>{this.forceUpdate()}))):(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING),this.props.chat?(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN):(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)}render(){var e=(0,c.shouldShowNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW),t=E[this.context.theme][u.default.currentRes],a=e?l.default.createElement(l.default.Fragment,null,l.default.createElement("img",{alt:"",src:t,className:m.default.illustration}),l.default.createElement(v.TextDiv,{theme:"popup-title",className:(0,s.default)(m.default.title,m.default.block)},f.default.t(1142)),l.default.createElement(v.TextDiv,{theme:"plain",className:m.default.block},f.default.t(1140)),l.default.createElement(v.TextDiv,{theme:"muted-small",className:m.default.block},f.default.t(1141))):l.default.createElement(v.TextDiv,{theme:"plain"},f.default.t(1143));return l.default.createElement(o.default,{okText:f.default.t(1139),onOK:this.onOK,onCancel:this.onCancel},a)}}S.contextType=g.default,S.displayName="MessengerRoomPopup";var C=(0,h.default)(S);t.default=C},82435:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(97066)),n=i(a(24307)),o=r(a(74798)),d=r(a(34720)),u=r(a(33766)),c=r(a(62899)),f=a(92997),h=i(a(3128)),p=r(a(62886)),m=r(a(80162)),_=r(a(7849)),v=r(a(61170)),g=r(a(26802)),E=r(a(43232)),S=i(a(48847)),C=r(a(282)),y="SEC_FREQUENT_CONTACTS",b="SEC_CHATS",M="SEC_CONTACTS",T="ROW_FREQUENT_CONTACTS",I="ROW_CHATS",P="ROW_CONTACTS";class A extends s.Component{constructor(...e){super(...e),this.setSearch=e=>{this.search=e},this.setList=e=>{this.list=e},this.state={filteredData:this.calculateFilteredData(this.props.searchText)},this._handleRef=e=>{this._refHotKey=e},this.handleCancelSelection=()=>{this.props.selections.unsetAll()},this._handleSelect=(e,t,a)=>{var{selections:r,maxChats:i,active:l,onSelectionChanged:n,hasFrequentlyForwarded:o}=this.props;if(t&&"number"==typeof i&&r.getSelected().length>=i){var d=E.default.hfmStringChanges?m.default.t(817,{count:i,_plural:i}):m.default.t(816,{count:i,_plural:i}),c=o?d:m.default.t(815,{count:i,_plural:i});u.default.openToast(s.default.createElement(S.default,{id:(0,S.genId)(),msg:c}))}else r.setVal(e,t,a),l.setVal(e,a),n&&n(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case y:return s.default.createElement(g.default,{header:m.default.t(1815)});case b:return s.default.createElement(g.default,{header:m.default.t(1994)});case M:return s.default.createElement(g.default,{header:m.default.t(1942)});case T:case I:case P:var t,{data:a}=e,r=!1;this.props.hasFrequentlyForwarded&&a.groupMetadata&&a.groupMetadata.noFrequentlyForwarded&&(r=!0,t=m.default.t(822));var i=()=>this._handleChatClick(a);return s.default.createElement(d.default,{key:a.id.toString(),model:a,selections:this.props.selections,tabIndex:-1,disabled:r},a instanceof l.default?s.default.createElement(n.default,{theme:r?"chat-checkbox-no-delete":"chat-checkbox",active:this.props.active,chat:a,mode:n.Mode.INFO,noContext:!0,onClick:r?()=>{}:i,secondary:t,showEphemeralIcon:this.props.showEphemeralIcon}):s.default.createElement(C.default,{contact:a,onSelect:i,customSecondaryText:t,active:this.props.active,showEphemeralIcon:this.props.showEphemeralIcon}));default:throw new h.UnknownDataError(e)}}}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){if(this.props.searchText!==e.searchText){var t=this.calculateFilteredData(this.props.searchText);this.setState({filteredData:t}),this.props.active.init(this._flattenData(t))}}calculateFrequentContacts(e){var{msgType:t,excludeChat:a}=this.props;return e?[]:c.default.frequentContacts(t,a)}_calculateFilteredChats(e){var t=e;if(t){t=m.default.accentFold(t);var a=(0,v.default)(t);return o.default.filter((function(e){return e.canSend&&e.shouldAppearInList&&e.contact.searchMatch(t,a)}))}return o.default.filter((function(e){return e.canSend&&e.shouldAppearInList}))}calculateFilteredContacts(e){var t=e,a=c.default.getFilteredContacts();if(!t)return a;t=m.default.accentFold(e);var r=(0,v.default)(t);return a.filter((function(e){return e.searchMatch(t,r)}))}calculateFilteredData(e){var t={};return{frequentContacts:this.calculateFrequentContacts(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;var a=e.isGroup||e.isBroadcast?o.default.get(e.id):e;return a&&(t[a.id]=!0),a})).filter(Boolean),chats:this._calculateFilteredChats(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;var a=e.isGroup||e.isBroadcast?e:e.contact;return t[a.id]?null:(t[a.id]=!0,a)})).filter(Boolean),contacts:this.calculateFilteredContacts(e).map((e=>t[e.id]?null:e)).filter(Boolean)}}_flattenData(e){var{frequentContacts:t,chats:a,contacts:r}=e;return t.concat(a,r)}_isEmpty(){var{frequentContacts:e,chats:t,contacts:a}=this.state.filteredData;return!e.length&&!t.length&&!a.length}_getData(){var e=[],{frequentContacts:t,chats:a,contacts:r}=this.state.filteredData;return t.length&&(e.push({itemKey:y,type:y}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:T,data:e}))))),a.length&&(e.push({itemKey:b,type:b}),e.push(...a.map((e=>({itemKey:e.id.toString(),type:I,data:e}))))),r.length&&(e.push({itemKey:M,type:M}),e.push(...r.map((e=>({itemKey:e.id.toString(),type:P,data:e}))))),e}toggleFirst(e){var t,{frequentContacts:a,chats:r,contacts:i}=this.state.filteredData;if(a.length)t=a[0];else if(r.length)t=r[0];else{if(!i.length)return;t=i[0]}var s=!this.props.selections.isSelected(t);this._handleSelect(t,s,e)}focus(){this._refHotKey&&p.default.focus(this._refHotKey)}_handleChatClick(e){var t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){return this._isEmpty()?this.props.searchText?s.default.createElement(f.Search,null):s.default.createElement(f.ListChats,null):s.default.createElement(h.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return s.default.createElement(_.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList())}}t.default=A,A.displayName="MultiSelectChatList"},9675:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(34720)),n=r(a(33766)),o=r(a(62899)),d=a(92997),u=i(a(3128)),c=r(a(62886)),f=r(a(80162)),h=r(a(7849)),p=r(a(61170)),m=r(a(26802)),_=i(a(48847)),v=r(a(282)),g="SEC_CONTACTS",E="ROW_CONTACTS";class S extends s.Component{constructor(e){super(e),this.setList=e=>{this.list=e},this._handleRef=e=>{this._refHotKey=e},this._handleSelect=(e,t,a)=>{var{selections:r,maxContacts:i,active:l,onSelectionChanged:o}=this.props;t&&"number"==typeof i&&r.getSelected().length>=i?n.default.openToast(s.default.createElement(_.default,{id:(0,_.genId)(),msg:this.props.maxContactsExceedErrorMsg?this.props.maxContactsExceedErrorMsg:f.default.t(1169,{count:i,_plural:i})})):(r.setVal(e,t,a),l.setVal(e,a),o&&o(e,t))},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case g:return s.default.createElement(m.default,{header:f.default.t(1786)});case E:var{data:t}=e,{isDisabled:a,customSecondaryText:r}=this.props;return s.default.createElement(l.default,{key:t.id.toString(),model:t,selections:this.props.selections,checked:!!this.props.isSelected&&this.props.isSelected(t.id)},s.default.createElement(v.default,{contact:t,disabled:a&&a(t.id),onSelect:()=>this._handleContactClick(t),customSecondaryText:r&&r(t.id),active:this.props.active,allowBlockedContacts:this.props.allowBlockedContacts}));default:throw new u.UnknownDataError(e)}},this.state={filteredData:S.calculateFilteredData(e)}}static getDerivedStateFromProps(e){return{filteredData:S.calculateFilteredData(e)}}static calculateFilteredData(e){return{contacts:S.calculateFilteredContacts(e)}}static calculateFilteredContacts(e){var{filter:t,useAllContacts:a,searchText:r}=e,i=a?o.default.toArray():o.default.getFilteredContacts();if(t&&(i=i.filter((e=>t(e)))),!r)return i;var s=f.default.accentFold(r),l=(0,p.default)(s);return i.filter((e=>e.searchMatch(s,l)))}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){this.props.searchText!==e.searchText&&this.props.active.init(this._flattenData(this.state.filteredData))}_flattenData(e){return e.contacts}_isEmpty(){return!this.state.filteredData.contacts.length}_getData(){var e=[],{contacts:t}=this.state.filteredData;return t.length&&(e.push({itemKey:g,type:g}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:E,data:e}))))),e}toggleFirst(e){if(this.state.filteredData.contacts.length){var t=this.state.filteredData.contacts[0],a=!this.props.selections.isSelected(t);this._handleSelect(t,a,e)}}focus(){this._refHotKey&&c.default.focus(this._refHotKey)}_clearActive(){this.props.active.unset()}_handleContactClick(e){var{isDisabled:t}=this.props;if(!t||!t(e.id)){var a=this.props.selections.isSelected(e);this._handleSelect(e,!a,!1)}}_renderList(){return this._isEmpty()?this.props.searchText?s.default.createElement(d.Search,null):s.default.createElement(d.ListChats,null):s.default.createElement(u.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return s.default.createElement(h.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList())}}t.default=S,S.displayName="MultiSelectContactList"},7849:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{active:t,onIndexChange:a,onLeave:r,onEnter:l}=e,n=e=>{l&&l(e)},o=e=>{var t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)};return i.default.createElement(s.default,{handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),t.setNext(!0),a&&a(t.index)},up:e=>{e.stopPropagation(),e.preventDefault(),t.prev()>-1?(t.setPrev(!0),a&&a(t.index)):r&&(r(e),t.unset())},enter:n,space:n},onRef:e.onRef,onFocus:e=>{o(e)&&t.setFirst(!0)},onBlur:e=>{o(e)&&t.unset()},tabIndex:0},e.children)};var i=r(a(67294)),s=r(a(35001))},45405:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(24788),l=i(a(67294)),n=r(a(75204)),o=r(a(75444)),d=a(92997),u=a(54438),c=r(a(3128)),f=r(a(35128)),h=r(a(62886)),p=a(26226),m=r(a(7849)),_=r(a(85726)),v=r(a(88830)),g=a(56670),E=a(52152);class S extends l.Component{constructor(...e){super(...e),this.setList=e=>{this.list=e},this.state={products:this._getCollectionProducts(),loadingMore:!1,loadedProducts:this._getCollectionProducts().length,canLoadMore:!0,hasCatalog:!0},this._handleRef=e=>{this._refHotKey=e},this.updateForScrollEvent=e=>{var t=e.currentTarget,{scrollTop:a,clientHeight:r,scrollHeight:i}=t;i-r-a<o.default.SCROLL_FUDGE&&!this.state.loadingMore&&this._loadMoreProducts()},this._handleEnter=e=>{e.stopPropagation(),e.preventDefault();var{active:t}=this.props;t.value&&this._handleProductClick(t.value)},this._handleSelect=(e,t,a)=>{var{selections:r,active:i,onSelectionChanged:s}=this.props;r.setVal(e,t,a),i.setVal(e,a),s&&s(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{var{data:t}=e;return l.default.createElement(v.default,{key:t.id.toString(),product:t,selections:this.props.selections,onClick:()=>this._handleProductClick(t),active:this.props.active})}}componentDidMount(){this.props.active.init(this.state.products),this._findProducts()}toggleFirst(e){var t=this.state.products;if(0!==t.length){var a=t[0],r=!this.props.selections.isSelected(a);this._handleSelect(a,r,e)}}focus(){this._refHotKey&&h.default.focus(this._refHotKey)}_findProducts(){this.setState({loadingMore:!0}),n.default.find((0,p.getMaybeMeUser)()).catch((0,s.filteredCatch)(u.ServerStatusCodeError,(()=>this.setState({hasCatalog:!1,loadingMore:!1,canLoadMore:!1})))).then((()=>this._loadMoreProducts()))}_loadMoreProducts(){var e=this._getCatalog();if(e)if(e.afterCursor&&this.state.canLoadMore)this.setState({loadingMore:!0}),n.default.findNextProductPage(e.id).checkpoint(this.props.rejectOnUnmount()).then((e=>{var t=e.length;this.setState((({loadedProducts:a})=>({products:e,loadingMore:!1,loadedProducts:t,canLoadMore:a!==t})),(()=>{this.props.onProductsLoaded&&this.props.onProductsLoaded(e)})),this.props.active.init(e)})).catch((()=>{this.setState({loadingMore:!1,canLoadMore:!0})}));else{var t=e.productCollection.getProductModels();this.setState({products:t,loadingMore:!1,canLoadMore:!1}),this.props.onProductsLoaded&&this.props.onProductsLoaded(t)}}_getCollectionProducts(){var e=this._getCatalog();return null!=e?e.productCollection.getProductModels():[]}_getCatalog(){var e=(0,p.getMaybeMeUser)(),t=(0,g.isString)(e)?(0,E.createWid)(e):e;return n.default.get(t)}_handleProductClick(e){var t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){if(0===this.state.products.length&&!this.state.loadingMore&&!this.state.canLoadMore)return l.default.createElement(d.ListProducts,{hasCatalog:this.state.hasCatalog});var e=this.state.products.map((e=>({itemKey:e.id.toString(),data:e})));return l.default.createElement(c.default,{ref:this.setList,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this._renderItem,flatListController:this.props.flatListController,defaultItemHeight:o.default.PRODUCT_LIST_ITEM_HEIGHT})}render(){return l.default.createElement(m.default,{active:this.props.active,onEnter:this._handleEnter,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList(),this.state.loadingMore&&l.default.createElement(f.default,null))}}S.displayName="MultiSelectProductList";var C=(0,_.default)(S);t.default=class extends C{toggleFirst(e){this.getComponent().toggleFirst(e)}focus(){this.getComponent().focus()}updateForScrollEvent(e){this.getComponent().updateForScrollEvent(e)}}},65691:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{vcards:t}=e;return s.default.createElement(f.default,{type:f.BoxModalType},s.default.createElement(n.default,null,s.default.createElement(d.default,{title:c.default.t(1168,{count:t.length,_plural:t.length}),type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>l.default.closeModal()}),s.default.createElement(o.default,null,s.default.createElement(u.default,null,s.default.createElement("div",{className:h.default.body},t.map(((e,t)=>e?s.default.createElement("div",{className:h.default.vcardWrapper,key:t},s.default.createElement(p.default,{parsedVcard:e,thumbnail:(0,m.vcardThumbnail)(e)})):null)))))))};var s=i(a(67294)),l=i(a(33766)),n=i(a(64120)),o=i(a(39490)),d=r(a(55977)),u=i(a(35001)),c=i(a(80162)),f=r(a(26689)),h=i(a(35664)),p=i(a(16203)),m=a(54865)},79366:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(51115)),o=r(a(20923)),d=a(26226),u=r(a(80162)),c=a(74476),f=r(a(37388)),h=r(a(72765));function p(){l.default.closeModal()}class m extends s.PureComponent{constructor(...e){super(...e),this.state={},this.onChange=({target:e})=>{e instanceof HTMLInputElement&&this.setState({mute:parseFloat(e.value)})},this.onMute=()=>{l.default.closeModal();var e=this._getMuteDuration();(0,d.setLastChatMuteDuration)(e),this.props.onMute((0,c.calculateMuteExpiration)(e),e)}}componentDidUpdate(){null!=this.props.mute.expiration&&0!==this.props.mute.expiration&&p()}_getMuteDuration(){return null!=this.state.mute&&0!==this.state.mute?this.state.mute:(0,d.getLastChatMuteDuration)()||(0,c.getDefaultMuteDuration)()}render(){var e=this.props.onCancel||p,t=this._getMuteDuration(),a=(0,c.getAllMuteDurations)().map((({label:e,duration:a})=>{var r=`duration-${a}`;return s.default.createElement("li",{key:"mute-"+a},s.default.createElement("input",{id:r,type:"radio",name:"duration",className:f.default.input,value:a,checked:t===a,onChange:this.onChange}),s.default.createElement("label",{htmlFor:r,className:f.default.label},e))}));return s.default.createElement(n.default,{title:s.default.createElement(o.default,{text:this.props.title}),okText:u.default.t(1922),onOK:this.onMute,onCancel:e},s.default.createElement("form",null,s.default.createElement("ol",null,a)))}}m.CONCERNS={mute:["id","expiration"]},m.displayName="MutePopup";var _=(0,h.default)(m,m.CONCERNS);t.default=_},39037:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(2860),n=a(95140),o=i(a(33766)),d=i(a(11288)),u=i(a(62899)),c=i(a(49817)),f=a(26226),h=i(a(80162)),p=i(a(72462)),m=a(14823),_=i(a(1680)),v=r(a(25475)),g=i(a(32457)),E=i(a(44563)),S=i(a(98165)),C=m.NuxKeyTypes.COOL_OFF_NUX.INCOMPLETE_BUSINESS_PROFILE_BANNER;class y extends _.default{render(){var{onInteract:e}=this.props,t=new v.default(C,p.default.BANNER_TYPES.SMB_EDIT_PROFILE);return s.default.createElement(c.default,{title:h.default.t(1277),actionText:h.default.t(1276),onDismiss:e,onClick:()=>{var t,a,r,i;t=(0,f.getMaybeMeUser)(),a=S.default.assertGet(t),r=E.default.assertGet(t),i=u.default.assertGet(t),o.default.openDrawerLeft(s.default.createElement(g.default,{status:a,profilePicThumb:r,contact:i,conn:d.default})),e&&e()},nuxManager:t,theme:"nuxGreen"})}static shouldShow(){var e=(0,f.getMaybeMeUser)(),t=u.default.assertGet(e).businessProfile;return!!t&&(0,l.getABPropConfigValue)("web_abprop_business_profile_incomplete_nux_banner")&&d.default.isSMB&&!(0,n.isCompleteBizProfile)(t)&&(0,v.shouldShowNUX)(C)}}t.default=y,y.displayName="BusinessProfileBanner"},4158:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(39037)),n=r(a(81732)),o=r(a(11288)),d=a(26226),u=r(a(80896)),c=r(a(92695)),f=r(a(735));class h extends s.Component{constructor(){super(),this.interactWithBanner=()=>{this.forceUpdate()};var e=n.default.getValid((0,d.getMaybeMeUser)());this.state={isBusinessProfileUpdated:null!=e}}componentDidMount(){if(o.default.isSMB){var e=n.default.get((0,d.getMaybeMeUser)());e&&this.props.listeners.add(e,"change",(()=>{this.setState({isBusinessProfileUpdated:!0})}))}}render(){return this.state.isBusinessProfileUpdated&&s.default.createElement(c.default,null,s.default.createElement(l.default,{onInteract:this.interactWithBanner}),s.default.createElement(f.default,{onInteract:this.interactWithBanner}))}}h.displayName="ChatListPanelNuxBanners";var p=(0,u.default)(h);t.default=p},49817:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,subtitle:t,onDismiss:a,onClick:r,nuxManager:i,theme:o,actionText:d}){var[u,c]=(0,s.useState)(!0);i.show();var f=s.default.createElement(s.default.Fragment,null,t," ",d&&s.default.createElement(l.default,{inline:!0},d));return s.default.createElement(s.default.Fragment,null,u&&s.default.createElement(n.default,{type:o,title:e,text:f,onDismiss:e=>{e.preventDefault(),e.stopPropagation(),i.dismiss(),a&&a(),c(!1)},action:()=>{i.click(),r&&r()}}))};var s=i(a(67294)),l=r(a(38812)),n=r(a(40461))},1680:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(67294);class i extends r.Component{static shouldShow(){return!1}}t.default=i},92695:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e}){var t=s.Children.toArray(e).find((e=>e.type.shouldShow()));return s.default.createElement(l.default,{transitionName:"butterbar"},t)};var s=i(a(67294)),l=(r(a(1680)),r(a(4328)))},735:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=a(2860),n=i(a(81732)),o=a(95140),d=a(73602),u=i(a(11288)),c=i(a(49817)),f=a(26226),h=i(a(80162)),p=i(a(72462)),m=a(14823),_=i(a(1680)),v=r(a(25475)),g=i(a(43232));var E=m.NuxKeyTypes.COOL_OFF_NUX.PRODUCT_CATALOG_BANNER;class S extends _.default{render(){var{onInteract:e}=this.props,t=new v.default(E,p.default.BANNER_TYPES.SMB_CATALOG);return s.default.createElement(c.default,{title:h.default.t(1282),actionText:h.default.t(1281),onDismiss:e,onClick:()=>{(0,d.openCatalogManagementFlow)(null,p.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_NUX),e&&e()},nuxManager:t,theme:"nuxGreen"})}static shouldShow(){var e=(0,f.getMaybeMeUser)(),t=n.default.get(e);return(0,l.getABPropConfigValue)("web_abprop_product_catalog_nux_banner")&&u.default.isSMB&&!function(){if(!u.default.isSMB||!g.default.shopsHeaderDropdownMenuItem)return!1;var e=n.default.get((0,f.getMaybeMeUser)());return(0,o.hasShop)(e)}()&&!(0,o.hasCatalog)(t)&&(0,v.shouldShowNUX)(E)}}t.default=S,S.displayName="ProductCatalogBanner"},97914:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=i(a(55847)),o=i(a(20451)),d=i(a(51115)),u=i(a(77188)),c=i(a(80162)),f=i(a(8863)),h=a(38245);class p extends l.Component{constructor(...e){super(...e),this.state={additionalActions:!0},this._handleToggleAdditionalActions=()=>{this.setState({additionalActions:!this.state.additionalActions})},this.handleReport=()=>{this.state.additionalActions?this.props.isGroupChat?this.props.onReportExitClear():this.props.onReportBlockClear():this.props.onReport()}}render(){var e,t,a;this.props.isGroupChat?(e=c.default.t(1399),t=c.default.t(1398),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1912):c.default.t(1413)):this.props.isBusiness?(e=c.default.t(1392),t=c.default.t(1391),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1914):c.default.t(1415)):(e=c.default.t(1395),t=c.default.t(1394),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1913):c.default.t(1414));var r=l.default.createElement("div",{"data-a8n":n.default.key("menu-icon-report-spam"),className:f.default.control},l.default.createElement(o.default,{onChange:this._handleToggleAdditionalActions,checked:this.state.additionalActions,id:"menu-icon-report-spam"})),i=l.default.createElement("label",{htmlFor:"menu-icon-report-spam",className:f.default.label},t);return u.default.supportsFeature(u.default.F.MD_BACKEND)?l.default.createElement(d.default,{title:e,onOK:this.handleReport,okText:c.default.t(1388),onCancel:this.props.onCancel},l.default.createElement("div",{className:(0,s.default)(f.default.section,f.default.border)},r,i),l.default.createElement(h.TextParagraph,{className:f.default.mdMetaText,theme:"muted"},a)):l.default.createElement(d.default,{onOK:this.handleReport,okText:c.default.t(1388),onCancel:this.props.onCancel},e,l.default.createElement(h.TextDiv,{className:f.default.metaText,theme:"muted"},a),l.default.createElement("div",{className:f.default.section},r,i))}}t.default=p,p.displayName="ReportSpamPopup"},72352:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListType=void 0;var s=i(a(67294)),l=r(a(17938)),n=r(a(33766)),o=r(a(33915)),d=r(a(50291)),u=r(a(64120)),c=r(a(39490)),f=i(a(55977)),h=a(77824),p=r(a(59432)),m=r(a(9908)),_=r(a(62886)),v=i(a(26689)),g=r(a(82435)),E=r(a(9675)),S=r(a(45405)),C=r(a(63611)),y=r(a(43464)),b=r(a(87964)),M={CHAT_SELECT_MODAL:"CHAT_SELECT_MODAL",CONTACT_SELECT_MODAL:"CONTACT_SELECT_MODAL",PARTICIPANT_MANAGE_MODAL:"PARTICIPANT_MANAGE_MODAL",PRODUCT_SELECT_MODAL:"PRODUCT_SELECT_MODAL"};t.ListType=M;class T extends s.Component{constructor(...e){super(...e),this.state={searchText:""},this._setRefSearch=e=>{this._refSearch=e},this._setRefList=e=>{this._refList=e},this.active=new b.default([],(e=>e.id)),this.selections=new C.default([],(e=>e.id.toString())),this.flatListController=new p.default,this._setSearchText=e=>{this.setState({searchText:e})},this.handleFocusList=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.handleDown=()=>{this.active.setFirst(!0)},this.handleScroll=e=>{this._refList instanceof S.default&&this._refList.updateForScrollEvent&&this._refList.updateForScrollEvent(e)},this._indicateSearchFocus=()=>{var e;this.active.unset(),null===(e=this._refSearch)||void 0===e||e.getComponent().indicateFocus()},this.handleLeaveList=()=>{m.default.shouldIndicateFocus(),_.default.focus(this._refSearch)},this.handleEnter=()=>{var e;null===(e=this._refList)||void 0===e||e.toggleFirst(!1)},this._handleForward=()=>{var{onConfirm:e,listType:t}=this.props,a=this.selections.getSelected();t===M.CONTACT_SELECT_MODAL||t===M.PARTICIPANT_MANAGE_MODAL||t===M.PRODUCT_SELECT_MODAL?e(a):Promise.all(a.map((e=>e instanceof o.default?(0,h.findChat)(e.id):e))).then((t=>{e(t)}))},this._handleSelectionChanged=(e,t)=>{var a;null===(a=this._refSearch)||void 0===a||a.select();var{onSelectionChanged:r}=this.props;null!=r&&r(e,t,this.selections.getSelected())},this._handleSelectedListDelete=(e,t)=>{this.selections.setVal(t,!1)},this.handleCancel=this.props.onCancel?this.props.onCancel:()=>n.default.closeModal()}componentDidMount(){_.default.focus(this._refSearch)}_renderList(){switch(this.props.listType){case M.CHAT_SELECT_MODAL:var e=this.props.getInitialItems,t=this.selections;return s.default.createElement(g.default,{ref:this._setRefList,msgType:this.props.msgType,excludeChat:this.props.excludeChat,excludeBroadcast:this.props.excludeBroadcast,getInitialItems:e,searchText:this.state.searchText,active:this.active,selections:t,maxChats:this.props.maxItems,onLeaveList:this.handleLeaveList,onSelectionChanged:this._handleSelectionChanged,hasFrequentlyForwarded:this.props.hasFrequentlyForwarded,flatListController:this.flatListController,showEphemeralIcon:this.props.showEphemeralIcon});case M.PARTICIPANT_MANAGE_MODAL:case M.CONTACT_SELECT_MODAL:var a=this.props.getInitialItems,r=this.selections;return s.default.createElement(E.default,{ref:this._setRefList,useAllContacts:this.props.useAllContacts,getInitialItems:a,searchText:this.state.searchText,active:this.active,selections:r,maxContacts:this.props.maxItems,maxContactsExceedErrorMsg:this.props.maxItemsExceedErrorMsg,onLeaveList:this.handleLeaveList,onSelectionChanged:this._handleSelectionChanged,isDisabled:this.props.isDisabled,isSelected:this.props.isSelected,customSecondaryText:this.props.customSecondaryText,filter:this.props.filter,allowBlockedContacts:this.props.allowBlockedContacts,flatListController:this.flatListController});case M.PRODUCT_SELECT_MODAL:var i=this.selections;return s.default.createElement(S.default,{ref:this._setRefList,flatListController:this.flatListController,active:this.active,selections:i,onSelectionChanged:this._handleSelectionChanged,onProductsLoaded:this.props.onDataLoaded});default:throw new Error(`Invalid list type: ${this.props.listType}`)}}render(){var{listType:e,useShortName:t,singleSelectionFooterType:a,multipleSelectionFooterType:r}=this.props,i=!!this.props.getInitialItems&&0!==this.props.getInitialItems().length,n=e===M.PARTICIPANT_MANAGE_MODAL?s.default.createElement(d.default,{selections:this.selections,useShortName:t,onDelete:this._handleSelectedListDelete,isDisabled:this.props.isDisabled}):null;return s.default.createElement(v.default,{type:v.TowerModalType},s.default.createElement(u.default,{key:"chat-modal"},s.default.createElement(f.default,{title:this.props.title,type:f.DRAWER_HEADER_TYPE.POPUP,onCancel:this.handleCancel}),s.default.createElement(y.default,{searchRef:this._setRefSearch,setSearchText:this._setSearchText,onDown:this.handleDown,onEnter:this.handleEnter,onFocus:this._indicateSearchFocus,enabled:this.props.enableSearchBox}),this.props.customHeader,n,s.default.createElement(c.default,{flatListControllers:[this.flatListController],onScroll:this.handleScroll},this._renderList()),s.default.createElement(l.default,{singleSelectionType:a,multipleSelectionType:r,selections:this.selections,onForward:this._handleForward,startActive:i})))}}t.default=T,T.displayName="SelectModal"},43464:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{enabled:t=!0,setSearchText:a,searchRef:r,onEnter:d}=e,u=(0,o.default)((e=>{a(e)}),100);return t?i.default.createElement(s.default,{handlers:{down:e.onDown},onFocus:e.onFocus},i.default.createElement(n.default,{ref:r,onSearch:u,onEnter:d,placeholder:l.default.t(1431)})):null};var i=r(a(67294)),s=r(a(35001)),l=r(a(80162)),n=r(a(33913)),o=r(a(82415))},11385:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(41609)),l=i(a(94184)),n=a(40896),o=r(a(67294)),d=a(39187),u=i(a(33766)),c=i(a(51115)),f=i(a(11288)),h=i(a(75444)),p=a(15330),m=a(26226),_=i(a(35001)),v=i(a(80162)),g=r(a(66802)),E=i(a(7984)),S=i(a(32885)),C=i(a(5711)),y=r(a(48847)),{SEND_LOGS_MAX_EMAIL_LENGTH:b,SEND_LOGS_MAX_SUBJECT_LENGTH:M,SEND_LOGS_MIN_DESC_LENGTH:T,SEND_LOGS_MAX_DESC_LENGTH:I,SEND_LOGS_MAX_SCREENSHOTS:P,SEND_LOGS_MAX_SCREENSHOT_SIZE:A}=h.default;class N extends o.Component{constructor(...e){var t;super(...e),this.state={email:"",emailError:void 0,confirmEmail:"",confirmEmailError:void 0,subject:f.default.isSMB?v.default.t(1486):v.default.t(1487),subjectError:void 0,description:null!==(t=this.props.description)&&void 0!==t?t:"",descriptionError:void 0,screenshots:[],isDragging:!1},this._setAttachButton=e=>{this._attachButton=e},this._setEmailAddr=e=>{this._emailAddrInput=e},this.handleSend=()=>{var e={},{email:t,confirmEmail:a,subject:r,description:i,screenshots:l}=this.state,c=t.trim(),f=a.trim();if(this._validateEmail(c)||(e.emailError=v.default.t(1473)),this._validateConfirmEmail(f)||(e.confirmEmailError=v.default.t(1474)),this.validateDescription(i)||(e.descriptionError=v.default.t(1485)),this._validateSubject(r)||(e.subjectError=v.default.t(1482)),(0,s.default)(e)){this.setState({email:c,confirmEmail:f,emailError:void 0,confirmEmailError:void 0,descriptionError:void 0,subjectError:void 0}),l.map((e=>{e.url&&(URL.revokeObjectURL(e.url),delete e.url)}));var h=(0,m.getMaybeMeUser)(),p=h?(0,n.formatPhone)(h.user):null,_=r.trim()||v.default.t(1470);(0,d.uploadUserReport)(p,c,_,i,l),this.props.onSend&&this.props.onSend({subject:_,description:i,numScreenshots:l.length}),u.default.closeModal(),u.default.openToast(o.default.createElement(y.default,{msg:v.default.t(1481),id:(0,y.genId)()}))}else e.email=c,e.confirmEmail=f,this.setState(e)},this.handleCancel=()=>{this.props.onCancel&&this.props.onCancel(),u.default.closeModal()},this.handleSubjectChange=e=>{var t={subject:e,subjectError:this.state.subjectError};this.state.subjectError&&this._validateSubject(t.subject)&&(t.subjectError=void 0),this.setState(t)},this._handleSubjectBlur=()=>{var e;this._validateSubject(this.state.subject)||(e=v.default.t(1482)),this.state.subjectError!==e&&this.setState({subjectError:e})},this.handleDescriptionChange=e=>{var t={description:e,descriptionError:this.state.descriptionError};this.state.descriptionError&&this.validateDescription(t.description)&&(t.descriptionError=void 0),this.setState(t)},this._handleDescriptionBlur=()=>{var e;!this.state.description&&!this.state.descriptionError||this.validateDescription(this.state.description)||(e=v.default.t(1485)),this.state.descriptionError!==e&&this.setState({descriptionError:e})},this._handleEmailChange=e=>{var t={email:e,emailError:this.state.emailError};this.state.emailError&&this._validateEmail(t.email)&&(t.emailError=void 0),this.setState(t)},this._handleEmailBlur=()=>{var e,t=this.state.email.trim(),a={};!this.state.email&&!this.state.emailError||this._validateEmail(t)||(e=v.default.t(1473)),this.state.emailError!==e&&(a.emailError=e),this.state.email!==t&&(a.email=t),(0,s.default)(a)||this.setState(a)},this._handleConfirmEmailChange=e=>{var t={confirmEmail:e,confirmEmailError:this.state.confirmEmailError};this.state.confirmEmailError&&this._validateConfirmEmail(t.confirmEmail)&&(t.confirmEmailError=void 0),this.setState(t)},this._handleConfirmEmailBlur=()=>{var e,t=this.state.confirmEmail.trim(),a={};!this.state.confirmEmail&&!this.state.confirmEmailError||this._validateConfirmEmail(t)||(e=v.default.t(1474)),this.state.confirmEmailError!==e&&(a.confirmEmailError=e),this.state.confirmEmail!==t&&(a.confirmEmail=t),(0,s.default)(a)||this.setState(a)},this._validateEmail=e=>g.validateEmail(e),this._validateConfirmEmail=e=>this.state.email===e,this.validateDescription=e=>e.length>T,this._validateSubject=()=>!0,this.handleFilePick=e=>{e.preventDefault(),e.stopPropagation(),this._reachMaxScreenshots()||(0,p.getFiles)(e,"image/*").then((e=>{this._attachButton&&(this._attachButton.value="");var t=e.filter((e=>e.size<=A));t.length<e.length&&u.default.openToast(o.default.createElement(y.default,{msg:v.default.t(1476),id:(0,y.genId)()}));var a=this.state.screenshots.concat(t).slice(0,P);a.map((e=>{e.url||(e.url=URL.createObjectURL(e))})),this.setState({screenshots:a})}))},this.handleDragChange=e=>{this.setState({isDragging:e})},this._handleAttachClick=()=>{this._attachButton&&!this._reachMaxScreenshots()&&this._attachButton.click()},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this._emailAddrInput&&this._emailAddrInput.restoreFocus()}componentWillUnmount(){this.state.screenshots.map((({url:e})=>e&&URL.revokeObjectURL(e)))}_reachMaxScreenshots(){return this.state.screenshots.length>=P}_deleteScreenshot(e){var t=this.state.screenshots.slice(),[a]=t.splice(e,1);a.url&&URL.revokeObjectURL(a.url),this.setState({screenshots:t})}_getScreenshotsList(){var e=this.state.screenshots.map(((e,t)=>{if(!e.url)return null;var a=`url(${e.url})`;return o.default.createElement("div",{key:`screenshot-${t}`,className:E.default.screenshotsImg,style:{backgroundImage:a}},o.default.createElement("button",{className:E.default.btnDelete,onClick:()=>{this._deleteScreenshot(t)}},o.default.createElement(S.default,{name:"x-alt"})))}));return e.length?o.default.createElement("div",{className:E.default.screenshotPreview},e):null}_getScreenshotAction(){if(this._reachMaxScreenshots()){var e=P;return o.default.createElement("div",{className:(0,l.default)(E.default.action,E.default.disabled)},v.default.t(1484,{count:e,_plural:e}))}return this.state.isDragging?o.default.createElement("div",{className:E.default.action},v.default.t(1479)):o.default.createElement("div",{className:E.default.action,onClick:this._handleAttachClick},v.default.t(1480))}render(){var e={enter:this.stopPropagation},t=o.default.createElement("div",{className:E.default.screenshots},this._getScreenshotsList(),this._getScreenshotAction(),o.default.createElement("input",{accept:"image/*",type:"file",multiple:!0,onClick:this.stopPropagation,onChange:this.handleFilePick,ref:this._setAttachButton,disabled:this._reachMaxScreenshots()}));return o.default.createElement(c.default,{title:v.default.t(1483),okText:v.default.t(1469),onOK:this.handleSend,onCancel:this.handleCancel,onDrop:this.handleFilePick,onDragChange:this.handleDragChange},o.default.createElement(_.default,{handlers:e},o.default.createElement(C.default,{ref:this._setEmailAddr,value:this.state.email,error:this.state.emailError,maxLength:b,onChange:this._handleEmailChange,onBlur:this._handleEmailBlur,placeholder:v.default.t(1471)}),o.default.createElement(C.default,{editable:!0,value:this.state.confirmEmail,error:this.state.confirmEmailError,maxLength:b,onChange:this._handleConfirmEmailChange,onBlur:this._handleConfirmEmailBlur,placeholder:v.default.t(1472)}),o.default.createElement(C.default,{value:this.state.subject,error:this.state.subjectError,maxLength:M,onChange:this.handleSubjectChange,onBlur:this._handleSubjectBlur,placeholder:v.default.t(1475)}),o.default.createElement(C.default,{value:this.state.description,error:this.state.descriptionError,maxLength:I,onChange:this.handleDescriptionChange,onBlur:this._handleDescriptionBlur,placeholder:v.default.t(665),multiline:!0}),t))}}t.default=N,N.displayName="SendLogsPopup"},41304:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.createElement(o.default,{type:"columnButtons",title:c.default.t(2102),onCancel:()=>d.default.closeModal(),actions:i.default.createElement(i.default.Fragment,null,i.default.createElement(n.default,{type:"primary",onClick:function(){var e=s.default.get((0,u.getMaybeMeUser)());(0,l.goToShop)(e)}},c.default.t(1655)),i.default.createElement(n.default,{type:"primary",onClick:function(){var e=s.default.get((0,u.getMaybeMeUser)());(0,l.goToCommerceManager)(e)}},c.default.t(599)))},c.default.t(2103))};var i=r(a(67294)),s=r(a(81732)),l=a(95140),n=r(a(62685)),o=r(a(16330)),d=r(a(33766)),u=a(26226),c=r(a(80162))},79582:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(51115)),o=r(a(11288)),d=r(a(80162)),u=r(a(80896)),c=r(a(90117)),f=r(a(13353));class h extends s.Component{constructor(...e){super(...e),this.close=()=>{o.default.smbTos||l.default.closeModal()},this.logout=()=>{__LOG__(2)`SMB: terms of service modal, user clicked logout`,l.default.closeModal(),f.default.logout()}}componentDidMount(){this.props.listeners.add(o.default,"change:smbTos",this.close)}render(){var e=d.default.t(2018),t=d.default.t(1099),a=this.logout;return s.default.createElement(n.default,{onOK:a,okText:t},e," ",s.default.createElement(c.default,null))}}h.displayName="TermsOfServiceModal";var p=(0,u.default)(h);t.default=p},72682:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{link:t}=e,{href:a,domain:r}=e.link,[i,f]=a.split(r);return s.default.createElement(n.default,{title:u.default.t(1548),okText:u.default.t(1768),cancelText:u.default.t(1550),onOK:()=>{l.default.closeModal()},onCancel:()=>{var{href:e}=t;(0,o.openExternalLink)(e),l.default.closeModal()}},s.default.createElement("div",{className:c.default.explanation},u.default.t(1551)+" ",s.default.createElement(o.default,{href:(0,d.getSuspiciousLinkFaqUrl)()},u.default.t(1002))),s.default.createElement("div",{className:c.default.url},i,(()=>{var{suspiciousCharacters:e,domain:a}=t,r=a.split("."),i=[];return r.forEach(((t,a)=>{var l=!1,n=t.split("").map(((t,r)=>{var i=e&&e.has(t);l=i||l;var n=i?c.default.suspiciousCharacter:void 0;return s.default.createElement("span",{key:`${a}-${r}-${t}`,className:n},t)})),o=l?c.default.suspiciousHostname:void 0,d=s.default.createElement("span",{key:`${a}-${t}`,className:o},n);i.push(d),a+1!==r.length&&i.push(s.default.createElement("span",{key:`${a}`},"."))})),i})(),f))};var s=i(a(67294)),l=i(a(33766)),n=i(a(51115)),o=r(a(1886)),d=a(84641),u=i(a(80162)),c=i(a(43047))},73334:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(51115)),o=r(a(11288)),d=r(a(80162)),u=r(a(80896)),c=r(a(13353));class f extends s.Component{constructor(...e){super(...e),this.close=()=>{0===o.default.tos&&l.default.closeModal()},this.logout=()=>{l.default.closeModal(),c.default.logout()}}componentDidMount(){this.props.listeners.add(o.default,"change:tos",this.close)}render(){var e,t,a;switch(o.default.tos){default:case 1:e=d.default.t(2044),t=d.default.t(1289),a=()=>l.default.closeModal();break;case 2:e=d.default.t(2045),t=d.default.t(1099),a=this.logout}return s.default.createElement(n.default,{onOK:a,okText:t},e)}}f.displayName="TermsOfServiceModal";var h=(0,u.default)(f);t.default=h},12202:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(62685)),n=r(a(33766)),o=r(a(11288)),d=a(89852),u=a(57909),c=r(a(35001)),f=r(a(80896)),h=r(a(72462)),p=r(a(26689)),m=r(a(2724)),_=r(a(72765)),v=r(a(32885)),g=a(38245),E=r(a(7170)),S=r(a(91377)),C=r(a(13353)),y=()=>{};class b extends s.PureComponent{constructor(e){super(e),this._shouldShowModal=()=>null!=m.default.noticeId&&null!=m.default.blockingModal&&!0===m.default.blocking,this._handleNoticeBlockingModalChange=()=>{this._shouldShowModal()&&(this.state.blockingModalDisplayed||(new h.default.UserNotice({userNoticeId:m.default.noticeId,userNoticeContentVersion:m.default.policyVersion,userNoticeEvent:h.default.USER_NOTICE_EVENT.BLOCKING_MODAL_APPEAR}).commit(),this.setState({blockingModalDisplayed:!0})))},this.handleNoticeIdChange=()=>{this.setState({blockingModalDisplayed:!1})},this.close=()=>{m.default.blocking||n.default.closeModal()},this.logout=()=>{__LOG__(2)`user notice modal, user clicked logout`,n.default.closeModal(),C.default.logout()},this.refresh=()=>{location.reload()},this.state={blockingModalDisplayed:!1}}componentDidMount(){this.props.listeners.add(m.default,"change:blocking",this.close),this.props.listeners.add(m.default,"change:noticeId",this.handleNoticeIdChange),this.props.listeners.add(m.default,"change:blockingModal change:blocking",this._handleNoticeBlockingModalChange),this._handleNoticeBlockingModalChange()}_getClickHandler(e){if(e){if("logout"===e.action)return this.logout;if("refresh"===e.action)return this.refresh}return y}_renderButton(e,t=!1){if(null==e)return null;var a=`UserNoticeModalPopup-${e.action}Btn`,r=`popup-controls-${e.action}`;return s.default.createElement(l.default,{a8nText:r,type:t?"primary":"secondary",onClick:this._getClickHandler(e),key:a},e.label)}render(){var{notice:e}=this.props,{blockingModal:t}=e;if(!t||!this._shouldShowModal())return null;var a,{iconSvg:r,iconDescription:i="",title:l,body:n,primaryButton:f,secondaryButton:h}=t;r&&(a="light"===this.context.theme?r.light:r.dark);var m=s.default.createElement(v.default,{name:"alert-notice","aria-label":i}),_=a&&(0,d.sanitizeNoticeSVG)(a),E=_?s.default.createElement("span",{"aria-label":i,dangerouslySetInnerHTML:{__html:_}}):m,C=this._renderButton(h),y=this._renderButton(f,!0),b={enter:this._getClickHandler(f)},M=l?(0,d.sanitizeNoticeText)(l):null,T=n?(0,d.sanitizeNoticeText)(n):null;return s.default.createElement(c.default,{handlers:b},s.default.createElement("div",{className:o.default.isSMB?S.default.noticeSmbContainer:S.default.noticeContainer},s.default.createElement(p.default,{actions:[C,y],type:"flex"},s.default.createElement("div",{className:S.default.noticeModalContentWrapper},s.default.createElement(u.FlexRow,{className:S.default.noticeSvgWrapper,align:"center",justify:"center"},E),s.default.createElement(g.TextDiv,{theme:"popup-title",className:S.default.headerText},s.default.createElement("div",{dangerouslySetInnerHTML:{__html:M}})),s.default.createElement(g.TextDiv,{theme:"plain",className:S.default.bodyText},s.default.createElement("div",{dangerouslySetInnerHTML:{__html:T}}))))))}}b.CONCERNS={notice:["noticeId","blocking","blockingModal"]},b.contextType=E.default,b.displayName="UserNoticeModal";var M=(0,f.default)((0,_.default)(b,b.CONCERNS));t.default=M},16203:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{parsedVcard:t,thumbnail:a}=e,r=e.parsedVcard,M=(0,i.default)(r.TEL,(e=>e.properties.waid)),T=(0,i.default)(r.TEL,(e=>!e.properties.waid)),I=(0,s.default)(M,(e=>{var t=e.properties.waid[0],a=l.default.createElement(E.default,{onClick:()=>(e=>{o.default.closeModal(),(0,h.findChat)((0,b.createUserWid)(e)).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))})(t)},l.default.createElement(g.default,{name:"chat",className:S.default.icon})),r=l.default.createElement(v.SelectableSpan,{selectable:!0},(0,y.default)(t));return l.default.createElement(u.default,{title:r,icon:a,key:`vCard-${String(e.index)}`},(0,C.vcardGetType)(e))})),P=(0,s.default)(r.EMAIL,(e=>l.default.createElement(u.default,{title:p.default.forceLTR(e.value),onClick:()=>{return t=e.value,void(0,f.openExternalLink)(`mailto:${t}`);var t},key:`vCard-${String(e.index)}`},(0,C.vcardGetType)(e)))),A=(0,s.default)(r.ADR,(e=>{var t=e.value.join(" ");return l.default.createElement(u.default,{title:t,onClick:()=>(e=>{var t=`https://maps.google.com/maps/search/${(0,s.default)((0,i.default)(e),encodeURIComponent).join(", ")}?hl=${p.default.getLocale()}`;(0,f.openExternalLink)(t)})(e.value),key:`vCard-${String(e.index)}`},(0,C.vcardGetType)(e))})),N=(0,s.default)(T,(e=>l.default.createElement(u.default,{title:p.default.forceLTR(e.value),key:`vCard-${String(e.index)}`},(0,C.vcardGetType)(e)))),O=(0,s.default)(r.SERVICE,(e=>l.default.createElement(u.default,{title:e.value,key:`vCard-${String(e.index)}`},(0,C.vcardGetType)(e)))),D=(0,s.default)(r.BDAY,(e=>l.default.createElement(u.default,{title:(0,C.vcardGetDate)(e.value),key:`vCard-${String(e.index)}`},p.default.t(1611)))),w=(0,s.default)(r.NICKNAME,(e=>l.default.createElement(u.default,{title:e.value,key:`vCard-${String(e.index)}`},p.default.t(1623)))),R=(k=(0,C.vcardWids)(t),L=l.default.createElement(c.default,{text:(0,C.vcardGetNameFromParsed)(t),direction:"auto",titlify:!0,ellipsify:!0,selectable:!0}),x=(0,C.vcardGetOrganizationString)(t),F=l.default.createElement(m.default,{thumb:a,size:d.DETAIL_IMAGE_SIZE.SMALL,wid:_.default.findThumbnailWid(k)}),l.default.createElement(n.default,{image:F,theme:"plain",primary:L,secondary:x}));var k,L,x,F;return l.default.createElement("div",null,R,l.default.createElement("div",{className:S.default.content},I,P,A,N,D,w,O))};var i=r(a(63105)),s=r(a(35161)),l=r(a(67294)),n=r(a(74724)),o=r(a(33766)),d=a(17367),u=r(a(576)),c=r(a(20923)),f=a(1886),h=a(77824),p=r(a(80162)),m=r(a(43395)),_=r(a(44563)),v=a(69519),g=r(a(32885)),E=r(a(32759)),S=r(a(637)),C=a(54865),y=r(a(8745)),b=a(52152)},61525:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{onSelect:t,vcard:a}=e,r=e=>{t(e)};return l.default.createElement(f.default,{type:f.BoxModalType},l.default.createElement(n.default,null,l.default.createElement(d.default,{onCancel:e.onCancel,type:d.DRAWER_HEADER_TYPE.POPUP,title:c.default.t(548)}),l.default.createElement(o.default,null,(0,s.default)(a.TEL,(e=>e.properties.waid)).map((t=>{var a=(0,v.createUserWid)(t.properties.waid[0]),i=e.icon;return i&&(i=l.default.createElement(h.default,{onClick:e=>{((e,t)=>{e.stopPropagation(),r(t)})(e,a)}},i)),l.default.createElement("div",{className:m.default.container,key:`vCard-${t.value}`},l.default.createElement(u.default,{title:(0,_.default)(a),onClick:()=>r(a),icon:i},(0,p.vcardGetType)(t)))})))))};var s=i(a(63105)),l=i(a(67294)),n=i(a(64120)),o=i(a(39490)),d=r(a(55977)),u=i(a(576)),c=i(a(80162)),f=r(a(26689)),h=i(a(32759)),p=a(54865),m=i(a(11927)),_=i(a(8745)),v=a(52152)},83602:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{messageText:t}=e,a=()=>{s.default.closeModal()};return u.default.online?i.default.createElement(l.default,{cancelText:o.default.t(1768),onCancel:a,okText:o.default.t(1446),onOK:()=>{var e=(0,f.firstNEncodedBytes)(t,2e3),a=5===c.default.frequentlyForwardedThreshold?"wa":`wa${c.default.frequentlyForwardedThreshold}`,r=h.default.build("https://www.google.com/search",{ctx:a,q:e});(0,n.openExternalLink)(r),(new d.default.HfmTextSearchComplete).commit(),s.default.closeModal()}},o.default.t(1448)):i.default.createElement(l.default,{okText:o.default.t(1941),onOK:a},o.default.t(1447))};var i=r(a(67294)),s=r(a(33766)),l=r(a(51115)),n=a(1886),o=r(a(80162)),d=r(a(72462)),u=r(a(27418)),c=r(a(43232)),f=a(96769),h=r(a(97439))},16438:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logOrderMessageClick=function({catalogContext:e,catalogOwnerJid:t,orderId:a}){(0,n.createCatalogViewEvent)((0,i.default)({isOwner:(0,n.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_ORDER_MESSAGE_CLICK},(0,l.toDataForCatalogViewEvents)(e))).commit()},t.logOrderListImpression=function({catalogContext:e,catalogOwnerJid:t,orderId:a,productCount:r}){(0,n.createCatalogViewEvent)((0,i.default)((0,i.default)({isOwner:(0,n.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_IMPRESSION},(0,l.toDataForCatalogViewEvents)(e)),{},{bizActionConfig:{orderId:a,productCount:r}})).commit()},t.logOrderListItemClick=function({catalogOwnerJid:e,catalogContext:t,orderId:a}){(0,n.createCatalogViewEvent)((0,i.default)((0,i.default)({isOwner:(0,n.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_ITEM_CLICK},(0,l.toDataForCatalogViewEvents)(t)),{},{bizActionConfig:{orderId:a}})).commit()},t.logSendOrderMessage=function({orderId:e,catalogOwnerJid:t,catalogContext:a,isOrderMsgAttached:r,quantity:o}){(0,n.createCatalogViewEvent)((0,i.default)((0,i.default)({isOwner:(0,n.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SEND_ORDER_MESSAGE,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SEND_ORDER_MESSAGE,isOrderMsgAttached:r},(0,l.toDataForCatalogViewEvents)(a)),{},{bizActionConfig:{orderId:e,quantity:o}})).commit()};var i=r(a(81109)),s=r(a(72462)),l=a(38335),n=a(53121)},69912:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.isFullscreenMode?34:void 0;return i.default.createElement(n.default,{xstyle:[o.closeBtn,e.isFullscreenMode&&o.fullscreen],onClick:e.onClick},i.default.createElement(l.default,{"aria-label":s.default.t(1779),name:"video-x",height:t,width:t}))},a(36702);var i=r(a(67294)),s=(r(a(56720)),r(a(80162))),l=r(a(32885)),n=r(a(32759)),o={closeBtn:{position:"lk2g6yzq",top:"lipdsbtg",end:"qj5h8wb7",zIndex:"rw17bltk",cursor:"obqxa8fb"},fullscreen:{top:"r9ghcwgm",end:"gpspv2f0"}}},13837:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement("div",{className:(0,i.default)(l.default.button,{[l.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick},s.default.createElement(n.default,{name:e.isInstagram?"logo-instagram":"logo-facebook"}))};var i=r(a(94184)),s=r(a(67294)),l=r(a(34984)),n=r(a(32885))},71469:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement(n.default,{xstyle:[o.button,e.isFullscreenMode&&o.fullscreen],onClick:e.onClick},e.isFullscreenMode?i.default.createElement(l.default,{"aria-label":s.default.t(10),name:"video-exit-fullscreen"}):i.default.createElement(l.default,{"aria-label":s.default.t(9),name:"video-fullscreen"}))},a(59703);var i=r(a(67294)),s=(r(a(56720)),r(a(80162))),l=r(a(32885)),n=r(a(32759)),o={button:{position:"lk2g6yzq",top:"lipdsbtg",start:"lczayjcy",zIndex:"rw17bltk",cursor:"obqxa8fb"},fullscreen:{top:"prjsz1u9",start:"dth86vuh"}}},73520:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement("div",{className:(0,i.default)(l.default.pipBtn,{[l.default.player]:e.theme===o.PLAYER,[l.default.preview]:e.theme===o.PREVIEW}),onClick:e.onClick},s.default.createElement(n.default,{name:"video-pip"}))},t.PIP_BUTTON_THEME=void 0;var i=r(a(94184)),s=r(a(67294)),l=r(a(71058)),n=r(a(32885)),o={PLAYER:"PLAYER",PREVIEW:"PREVIEW"};t.PIP_BUTTON_THEME=o},84816:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.icon?i.default.createElement("div",{className:s.default.icon},e.icon):null;return i.default.createElement("div",{className:s.default.note},t,i.default.createElement("div",{className:s.default.noteBody},e.children))};var i=r(a(67294)),s=r(a(64374))},98924:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null;switch(e.theme){case"upper":t=s.default.createElement("div",{key:"upper-shade",className:(0,i.default)(l.default.fullWidthShade,l.default.stripHeightShade,l.default.upperShade)});break;case"lower":t=s.default.createElement("div",{key:"lower-shade",className:(0,i.default)(l.default.fullWidthShade,l.default.stripHeightShade,l.default.lowerShade)});break;case"full-rounded":t=s.default.createElement("div",{key:"full-rounded-shade",className:(0,i.default)(l.default.fullWidthShade,l.default.fullHeightShade,l.default.roundedCorners)});break;case"full-sharp":t=s.default.createElement("div",{key:"full-sharp-shade",className:(0,i.default)(l.default.fullWidthShade,l.default.fullHeightShade)})}return t};var i=r(a(94184)),s=r(a(67294)),l=r(a(46944))},27387:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YOUTUBE_URL_TIME_PARAM_PATTERN=t.YOUTUBE_URL_TIME_PARAM_NAME=t.URL_PATTERNS=t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=t.PLAYER_TYPE=void 0;var r=a(54302).Mirrored(["FLOATER","OG_FLOATER","MEDIA_VIEWER"]);t.PLAYER_TYPE=r;t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=16/9;t.URL_PATTERNS={ONLINE_VIDEO_URL:{YOUTUBE:[/^https?:\/\/youtu\.be\/(.{11})/,/^https?:\/\/youtube\.com\/watch\?v=(.{11})/,/^https?:\/\/m\.youtube\.com\/watch\?v=(.{11})/]}};t.YOUTUBE_URL_TIME_PARAM_NAME="t";t.YOUTUBE_URL_TIME_PARAM_PATTERN=/^(\d+h)?(\d+m)?(\d+s)?(\d+)?$/},72711:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.default)(e.mediaData,["preview","aspectRatio"]),a=t.preview?`url(${t.preview.url()})`:void 0;return i.default.createElement(l.default,{aspectRatio:t.aspectRatio,previewUrl:a,animationStartStyle:e.animationStartStyle},i.default.createElement(n.default,{msg:e.msg,mediaData:t,startTime:e.startTime,onClose:e.onClose,onError:e.onError,onOpenMediaViewer:e.onOpenMediaViewer,onMissingMedia:e.onMissingMedia,onUnsupportedMedia:e.onUnsupportedMedia,autoPlay:e.autoPlay,type:s.PLAYER_TYPE.FLOATER}))};var i=r(a(67294)),s=a(27387),l=r(a(49097)),n=r(a(68081)),o=r(a(95607))},95160:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(74230),l=i(a(67294)),n=r(a(49097)),o=r(a(7607)),d=r(a(43221));class u extends l.Component{constructor(e){super(e),this._handleAspectRatio=e=>{((null==this.state.aspectRatio||0===this.state.aspectRatio)&&e||null!=this.state.aspectRatio&&0!==this.state.aspectRatio&&e&&Math.abs(e-this.state.aspectRatio)>.01)&&this.setState({aspectRatio:e})};var t=(0,o.default)(this.props.ogVideoInfo.previewUrl),a=(0,s.isNonZeroNumber)(t.width)&&(0,s.isNonZeroNumber)(t.height)?t.width/t.height:void 0;this.state={aspectRatio:a}}render(){return l.default.createElement(n.default,{aspectRatio:this.state.aspectRatio,previewUrl:this.props.ogVideoInfo.previewUrl,animationStartStyle:this.props.animationStartStyle},l.default.createElement(d.default,{ogVideoInfo:this.props.ogVideoInfo,startTime:this.props.startTime,onClose:this.props.onClose,onError:this.props.onError,onAspectRatio:this._handleAspectRatio,autoPlay:!0}))}}t.default=u,u.displayName="FloatingOgVideoPlayer"},49097:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=function(e){if(null==e)return 1;switch(!0){case e<c:return c;case e>f:return f;default:return e}}(e.aspectRatio),r=null!==(t=e.initialPiPStyle)&&void 0!==t?t:function(e){var{initialWidth:t,initialHeight:a}=function(e){if(e>1)return{initialWidth:d,initialHeight:d/e};return{initialHeight:d,initialWidth:d*e}}(e),r=function(){var e,t;return s.default.getConversationHeaderOffset((e=>{t=e})),null!==(e=t)&&void 0!==e?e:{right:window.innerWidth,bottom:0}}(),i=r.right<window.innerWidth?r.right-t-o:window.innerWidth-t-o,l=window.innerHeight-10-a-r.bottom;return{width:t,left:i,bottom:l}}(a),m=145*a,_=u<m?m:u;return i.default.createElement(n.default,{aspectRatio:a,margin:p,minWidth:_,className:l.default.videoFloater,initialStyle:r,animationStartStyle:e.animationStartStyle,escapeConversationHeader:!0,bottomContent:e.bottomContent},i.default.createElement(h,{aspectRatio:a,originalAspectRatio:e.aspectRatio,backgroundImage:e.previewUrl}),e.children)},t.MAX_ASPECT_RATIO=t.MIN_ASPECT_RATIO=t.MIN_WIDTH=t.MIN_HEIGHT=t.LONGER_SIDE_DEFAULT_LENGTH=t.MARGIN_Y=t.MARGIN_X=void 0;var i=r(a(67294)),s=r(a(33766)),l=r(a(86182)),n=(r(a(76022)),r(a(64913))),o=10;t.MARGIN_X=o;t.MARGIN_Y=10;var d=330;t.LONGER_SIDE_DEFAULT_LENGTH=d;t.MIN_HEIGHT=145;var u=145;t.MIN_WIDTH=u;var c=.4393939393939394;t.MIN_ASPECT_RATIO=c;var f=2.2758620689655173;function h({aspectRatio:e,originalAspectRatio:t,backgroundImage:a}){if(null==t||0===t)return null;if(!(e===c&&e>t||e===f&&e<t))return null;var r=a?i.default.createElement("div",{className:l.default.bgImg,style:{backgroundImage:a}}):null;return i.default.createElement("div",{className:l.default.bottomLayer},r)}t.MAX_ASPECT_RATIO=f;var p={x:o,y:10}},7607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.createElement("img");return t.src=e,{width:t.naturalWidth,height:t.naturalHeight}}},1697:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isParsableOnlineVideoURL=function(e,t,a){if(!n.default.supportsFeature(n.default.F.VIDEO_PLAYBACK_URL))return!1;if(a)return!1;if(e===l.ExtendedTextMessagePreviewType.VIDEO&&t){var r=o.default.withoutWww(o.default.hostname(t));if(r===s.default.HOSTNAME.INSTAGRAM||r===s.default.HOSTNAME.STREAMABLE||r===s.default.HOSTNAME.FACEBOOK||r===s.default.HOSTNAME.FBWATCH||r===s.default.HOSTNAME.FBWATCH_ALT||r===s.default.HOSTNAME.LASSOVIDEOS||r===s.default.HOSTNAME.LASSO_SHORTENED||r===s.default.HOSTNAME.SHARECHAT)return!0}if(t)for(var d in i.URL_PATTERNS.ONLINE_VIDEO_URL)for(var u=i.URL_PATTERNS.ONLINE_VIDEO_URL[d],c=0;c<u.length;c++)if(u[c].test(o.default.withoutWww(t)))return!0;return!1},t.isParsableYouTubeVideoUrl=function(e,t,a){if(!n.default.supportsFeature(n.default.F.VIDEO_PLAYBACK_URL))return!1;if(a)return!1;if(t){var r=i.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE,s=o.default.withoutWww(t);return r.some((e=>e.test(s)))}return!1};var i=a(27387),s=r(a(75444)),l=a(91591),n=r(a(77188)),o=r(a(97439))},68081:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(22039)),o=r(a(4290)),d=a(85063),u=r(a(23843)),c=r(a(88799)),f=r(a(38127)),h=r(a(72765)),p=a(6578);t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class m extends s.Component{constructor(...e){super(...e),this._setRefVideoPlayer=e=>{this._refVideoPlayer=e},this._handleOpenMediaViewer=()=>{this.props.onOpenMediaViewer&&this.props.onOpenMediaViewer(),l.default.mediaViewerModal({msg:(0,p.unproxy)(this.props.msg),currentTime:this.getCurrentTimeFromVideo()})},this._handleOpenVideoFloater=()=>{this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater(),c.default.openPiP((0,p.unproxy)(this.props.msg),this.getCurrentTimeFromVideo(),null)},this._handleMissingMedia=()=>{this.props.onMissingMedia&&this.props.onMissingMedia(),l.default.openModal(s.default.createElement(n.default,{msg:this.props.msg})),this.props.onClose()},this._handleUnsupportedMedia=()=>{this.props.onUnsupportedMedia&&this.props.onUnsupportedMedia(),l.default.openModal(s.default.createElement(u.default,{msg:this.props.msg})),this.props.onClose()},this._handleNeedPokeMedia=()=>{this.props.onNeedPokeMedia&&this.props.onNeedPokeMedia(),l.default.openModal(s.default.createElement(o.default,{msg:this.props.msg})),this.props.onClose()},this.handleLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}getContainerElement(){var e;return null===(e=this._refVideoPlayer)||void 0===e?void 0:e.getContainerElement()}componentDidUpdate(){switch(this.props.mediaData.mediaStage){case d.MEDIA_DATA_STAGE.ERROR_MISSING:this._handleMissingMedia();break;case d.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:this._handleUnsupportedMedia();break;case d.MEDIA_DATA_STAGE.NEED_POKE:this._handleNeedPokeMedia()}}getCurrentTimeFromVideo(){return this._refVideoPlayer?this._refVideoPlayer.getCurrentTimeFromVideo():0}render(){var e={msg:this.props.msg,mediaData:this.props.mediaData};return s.default.createElement(f.default,{ref:this._setRefVideoPlayer,type:this.props.type,msgVideoInfo:e,startTime:this.props.startTime,onClose:this.props.onClose,onVideoEnded:this.props.onVideoEnded,onError:this.props.onError,onOpenMediaViewer:this._handleOpenMediaViewer,onOpenVideoFloater:this._handleOpenVideoFloater,onMissingMedia:this._handleMissingMedia,onUnsupportedMedia:this._handleUnsupportedMedia,onLoadedMetadata:this.handleLoadedMetadata,onFullscreenToggle:this.props.onFullscreenToggle,autoPlay:this.props.autoPlay,overlays:this.props.overlays,noPip:this.props.noPip})}}m.CONCERNS={msg:["id"],mediaData:["mediaStage","preview","streamable"]},m.displayName="MsgVideoPlayer";var _=(0,h.default)(m,m.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent.getContainerElement()}}},8095:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(75444)),n=a(26226),o=r(a(72765)),d=r(a(31712));class u extends s.PureComponent{constructor(...e){super(...e),this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){var t=(0,n.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onLoadedMetadata=(e,t)=>{var a=this.props.mediaData.aspectRatio,r=0!==e.videoWidth&&0!==e.videoHeight?e.videoWidth/e.videoHeight:void 0;(!a&&null!=r&&0!==r||a&&null!=r&&0!==r&&Math.abs(r-a)>.01)&&this.props.mediaData.set({aspectRatio:r}),this.props.onLoadedMetadata(e,t)},this.play=()=>{var e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{var e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)}}render(){var e,t=this.props,{mediaData:a}=t,r=a.mediaBlob,i=a.streamable&&a.isStreamable();return e=!this.mediaBlobWasDownloadedBeforeMount&&i||!r?a.streamable&&a.isStreamable()?`${l.default.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`:void 0:r.url(),s.default.createElement(d.default,{ref:this.setRefVideo,url:e,startTime:this.props.startTime,poster:this.props.poster,className:this.props.className,onVolumeChange:this.props.onVolumeChange,onEnded:this.props.onEnded,onError:this.props.onError,onPause:this.props.onPause,onPlaying:this.props.onPlaying,onProgress:this.props.onProgress,onTimeUpdate:this.props.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay},t.children)}}u.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable","aspectRatio"]},u.displayName="MsgVideoTag";var c=(0,o.default)(u,u.CONCERNS);t.default=class extends c{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},43221:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement(l.default,{type:s.PLAYER_TYPE.OG_FLOATER,ogVideoInfo:e.ogVideoInfo,startTime:e.startTime,onClose:e.onClose,onVideoEnded:e.onVideoEnded,onError:e.onError,onAspectRatio:e.onAspectRatio,autoPlay:e.autoPlay})};var i=r(a(67294)),s=a(27387),l=r(a(38127))},88799:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(14090));class s extends i.default{constructor(){super(),this.openPiP=(e,t,a)=>{this.manager&&this.manager.openPiP(e,t,a)},this.closePiP=()=>{this.manager&&this.manager.closePiP()},this._pausePiP=()=>{this.manager&&this.manager.pausePiP()},this.openYoutubePiP=(e,t,a,r)=>{this.manager&&this.manager.openYoutubePiP(e,t,a,r)},this.closeYoutubePiP=()=>{this.manager&&this.manager.closeYoutubePiP()},this.openOgVideoPiP=(e,t,a,r,i)=>{this.manager&&this.manager.openOgVideoPiP(e,t,a,r,i)},this.closeOgVideoPiP=()=>{this.manager&&this.manager.closeOgVideoPiP()},this.isOpened=e=>!!this.manager&&this.manager.isOpened(e)}register(e){this.manager=e}unregister(){this.manager=null}didOpen(e){this.trigger(`${e.id.toString()}_pip_did_open`)}didClose(e){this.trigger(`${e.id.toString()}_pip_did_close`)}didError(e){this.trigger(`${e.id.toString()}_pip_did_error`)}}var l=new s;t.default=l},5259:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PiPManager=void 0;var s=i(a(67294)),l=r(a(33766)),n=a(27387),o=r(a(72711)),d=r(a(95160)),u=r(a(49097)),c=r(a(80162)),f=r(a(80896)),h=r(a(72462)),p=r(a(33048)),m=r(a(88799)),_=r(a(59280)),v=i(a(48847)),g=r(a(4328)),E=r(a(41673));class S extends s.Component{constructor(e){super(e),this._handleMediaViewerModal=e=>{var{msg:t}=e;this.state.msg&&this.state.msg.id.equals(t.id)&&this.closePiP()},this._closePiPFromMsg=e=>{this.state.msg&&this.state.msg.id.equals(e.id)?this.closePiP():this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id)?this.closeYoutubePiP():this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id)&&this.closeOgVideoPiP()},this.openPiP=(e,t,a)=>{this._previousPiPDidClose(),m.default.didOpen(e),e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:h.default.WEBC_RMR_REASON_CODE.PIP,isUserInitiated:!0}),this.setState({msg:e,youtubeVideoInfo:null,ogVideoInfo:null,startTime:t,zoomRect:a})},this.closePiP=()=>{this.state.msg&&m.default.didClose(this.state.msg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.pausePiP=()=>{},this.isOpened=e=>!(!this.state.msg||!e.id.equals(this.state.msg.id))||(!(!this.state.youtubeVideoInfo||!e.id.equals(this.state.youtubeVideoInfo.videoMsg.id))||!(!this.state.ogVideoInfo||!e.id.equals(this.state.ogVideoInfo.videoMsg.id))),this.openYoutubePiP=(e,t,a,r)=>{this._previousPiPDidClose(),m.default.didOpen(t),this.setState({msg:null,youtubeVideoInfo:{videoId:e,videoMsg:t},ogVideoInfo:null,startTime:a,zoomRect:r})},this.closeYoutubePiP=()=>{this.state.youtubeVideoInfo&&m.default.didClose(this.state.youtubeVideoInfo.videoMsg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.openOgVideoPiP=(e,t,a,r,i)=>{this._previousPiPDidClose(),m.default.didOpen(a),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:{videoUrl:e,previewUrl:`data:image/jpeg;base64,${t}`,videoMsg:a},startTime:r,zoomRect:i})},this.closeOgVideoPiP=()=>{this.state.ogVideoInfo&&m.default.didClose(this.state.ogVideoInfo.videoMsg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this._previousPiPDidClose=()=>{this.state.msg&&m.default.didClose(this.state.msg),this.state.youtubeVideoInfo&&m.default.didClose(this.state.youtubeVideoInfo.videoMsg),this.state.ogVideoInfo&&m.default.didClose(this.state.ogVideoInfo.videoMsg)},this.handleMsgVideoPiPError=()=>{this.state.msg&&m.default.didError(this.state.msg)},this._handleOgVideoPiPError=()=>{this.state.ogVideoInfo&&m.default.didError(this.state.ogVideoInfo.videoMsg)},this.state={msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null}}componentDidMount(){m.default.register(this),this.props.listeners.add(l.default,"media_viewer_modal",this._handleMediaViewerModal),this.props.listeners.add(p.default,"remove",(e=>{this._closePiPFromMsg(e)})),this.props.listeners.add(p.default,"change:asRevoked",(e=>{if(e.asRevoked){if(!e.isSentByMe){var t=this.state.msg&&this.state.msg.id.equals(e.id),a=this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id),r=this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id);(a||t||r)&&l.default.openToast(s.default.createElement(v.default,{id:(0,v.genId)(),msg:c.default.t(1330)}))}this._closePiPFromMsg(e)}}))}componentWillUnmount(){m.default.unregister()}_renderVideoPlayer(){var{msg:e,youtubeVideoInfo:t,ogVideoInfo:a}=this.state;return e?s.default.createElement(o.default,{key:e.id.toString(),msg:e,mediaData:e.mediaData,animationStartStyle:this._getAnimationStartStyle(),startTime:this.state.startTime,onClose:this.closePiP,onError:this._handleOgVideoPiPError,onOpenMediaViewer:this.closePiP,onMissingMedia:this.closePiP,onUnsupportedMedia:this.closePiP,autoPlay:!0}):t?s.default.createElement(u.default,{key:t.videoId,aspectRatio:n.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO,animationStartStyle:this._getAnimationStartStyle()},s.default.createElement(E.default,{key:t.videoId,youtubeVideoId:t.videoId,startTime:this.state.startTime,onClose:this.closeYoutubePiP,autoPlay:!0})):a?s.default.createElement(d.default,{key:a.videoMsg.id.toString(),ogVideoInfo:a,startTime:this.state.startTime,onClose:this.closeOgVideoPiP,onError:this._handleOgVideoPiPError,animationStartStyle:this._getAnimationStartStyle(),autoPlay:!0}):null}_getAnimationStartStyle(){return this.state.zoomRect?{height:this.state.zoomRect.bottom-this.state.zoomRect.top,width:this.state.zoomRect.right-this.state.zoomRect.left,left:this.state.zoomRect.left,bottom:window.innerHeight-this.state.zoomRect.bottom}:null}render(){return s.default.createElement(g.default,{transitionName:"pip",className:_.default.playerWrapper,component:"div"},this._renderVideoPlayer())}}t.PiPManager=S,S.displayName="PiPManager";var C=(0,f.default)(S);t.default=C},38127:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var s=i(a(81109)),l=i(a(23279)),n=i(a(94184)),o=r(a(67294)),d=i(a(69912)),u=a(27387),c=i(a(1886)),f=i(a(84538)),h=i(a(71469)),p=i(a(80162)),m=i(a(80896)),_=i(a(81154)),v=r(a(73616)),g=a(85063),E=i(a(8095)),S=r(a(73520)),C=i(a(84816)),y=i(a(98924)),b=i(a(33896)),M=i(a(32885)),T=i(a(89848)),I=i(a(31712)),P=i(a(4328)),A=i(a(90439));t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class N extends o.Component{constructor(e){super(e),this._resetMouseMoveRecently=(0,l.default)((()=>{this.setState({mouseMoveRecently:!1})}),3e3),this.buffered=[],this.setRefVideo=e=>{this.refVideo=e},this.setRefContainer=e=>{this.refContainer=e,this.refContainer},this.handleLoadedMetadata=(e,t)=>{var a=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:a,volume:e.volume,muted:e.muted,bufferedTime:0}}),this.props.onAspectRatio&&e.videoWidth&&e.videoHeight&&this.props.onAspectRatio(e.videoWidth/e.videoHeight),this.props.onLoadedMetadata&&this.props.onLoadedMetadata(t)},this.handleTimeUpdate=e=>{var t=null,a=this.state.videoMetadata;if(a){var r=this._getRelevantBufferedTime(this.buffered,e);t=(0,s.default)((0,s.default)({},a),{},{currentTime:e,bufferedTime:r})}this.setState({videoMetadata:t})},this._handleVolumeChange=e=>{var t=null;this.state.videoMetadata&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this._handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded(),this.setState({isVideoPlaying:!1})},this._handleError=e=>{20!==e?(this.setState({isVideoError:!0}),this.props.onError&&this.props.onError()):this.setState({isVideoPlaying:!1})},this.handlePause=()=>{this.setState({isVideoPlaying:!1})},this._handlePlaying=()=>{this.setState({isVideoPlaying:!0})},this.handleProgress=e=>{this.buffered=e;var t=this.state.videoMetadata;if(t){var a=t.currentTime,r=this._getRelevantBufferedTime(e,a),i=(0,s.default)((0,s.default)({},t),{},{bufferedTime:r});this.setState({videoMetadata:i})}},this.handleEnterFullscreen=e=>{e.stopPropagation(),f.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),f.default.exitFullscreen()},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.state={videoMetadata:null,isVideoPlaying:!1,isVideoError:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:f.default.isFullscreenMode}}getContainerElement(){return this.refContainer}componentDidMount(){this.props.listeners.add(f.default,"fullscreen_change",(()=>{f.default.isFullscreenMode&&f.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)})):f.default.isFullscreenMode||this.setState({isFullscreenMode:!1},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)}))}))}componentWillUnmount(){this._resetMouseMoveRecently.cancel()}getCurrentTimeFromVideo(){return this.refVideo?this.refVideo.getCurrentTime():0}getVolumeFromVideo(){return this.refVideo?this.refVideo.getVolume():0}getMutedFromVideo(){return!!this.refVideo&&this.refVideo.getMuted()}_getRelevantBufferedTime(e,t){for(var a=0,r=0;r<e.length;r++)if(t>=e[r][0]&&t<e[r][1]){a=e[r][1];break}return a}_renderMedia(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:return this._renderMsgMedia();case u.PLAYER_TYPE.OG_FLOATER:return this._renderOgMedia()}return null}_renderOgMedia(){var e=this.props.ogVideoInfo;if(!e)return null;var t={backgroundImage:`url(${e.previewUrl})`};return o.default.createElement(o.default.Fragment,null,this.state.isFullscreenMode?null:o.default.createElement("div",{className:b.default.preview,style:t}),""!==e.videoUrl?o.default.createElement(I.default,{ref:this.setRefVideo,key:"floating-media",url:e.videoUrl,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay},p.default.t(1633)):null)}_renderMsgMedia(){var e=this.props.msgVideoInfo;if(!e)return null;var{preview:t}=e.mediaData;if(this._isMediaRenderable()){var a=t?{backgroundImage:`url(${t.url()})`}:void 0;return o.default.createElement(o.default.Fragment,null,this.state.isFullscreenMode||this.props.type!==u.PLAYER_TYPE.FLOATER?null:o.default.createElement("div",{className:b.default.preview,style:a}),o.default.createElement(E.default,{ref:this.setRefVideo,key:"floating-media",msg:e.msg,mediaData:e.mediaData,className:b.default.videoTag,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay},p.default.t(1633)))}return t?o.default.createElement("img",{key:"floating-media",alt:p.default.t(1992),src:t.url(),draggable:"false"}):null}_isMediaRenderable(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:var e=this.props.msgVideoInfo;if(!e)return!1;var t=e.mediaData;return t.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable();case u.PLAYER_TYPE.OG_FLOATER:return!0}return!0}_renderMediaStage(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:var e=this.props.msgVideoInfo;return e?o.default.createElement("div",{className:b.default.mediaStageWrapper},o.default.createElement(_.default,{msg:e.msg,mediaData:e.mediaData})):null;case u.PLAYER_TYPE.OG_FLOATER:var t=this.props.ogVideoInfo;return t&&""===t.videoUrl?o.default.createElement("div",{className:b.default.mediaStageWrapper},o.default.createElement(v.Pending,null)):null}return null}_renderVideoControls(){var e,t;if(!this._isMediaRenderable())return null;var a=this.state.videoMetadata;return a?o.default.createElement(A.default,{refVideo:this.refVideo,videoMetadata:a,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,ctwaSourceUrl:null===(e=this.props.ogVideoInfo)||void 0===e||null===(t=e.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl}):null}renderErrorMessage(){return o.default.createElement(C.default,null,p.default.t(1327),this._renderErrorMessageLink())}_renderErrorMessageLink(){var e,t;if(this.props.type!==u.PLAYER_TYPE.OG_FLOATER)return null;if(!this.props.ogVideoInfo)return null;var a=null!==(e=null===(t=this.props.ogVideoInfo.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl)&&void 0!==e?e:this.props.ogVideoInfo.videoMsg.matchedText;return o.default.createElement(c.default,{className:b.default.errorLink,href:a},o.default.createElement("span",null,p.default.t(1328)),o.default.createElement(M.default,{directional:!0,display:"inline",name:"chevron-right-text",className:b.default.errorLinkChevron}))}render(){var e,t,a,r=this._isMediaRenderable();r&&(t=o.default.createElement(h.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick}));var i,s=o.default.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}});switch(this.props.type){case u.PLAYER_TYPE.OG_FLOATER:case u.PLAYER_TYPE.FLOATER:e=o.default.createElement(o.default.Fragment,null,T.default.isSafari?null:t,s);break;case u.PLAYER_TYPE.MEDIA_VIEWER:var l;l=this.state.isFullscreenMode?s:!this.props.noPip&&r?o.default.createElement(S.default,{onClick:e=>{e.stopPropagation(),this.props.onClose&&this.props.onClose(),this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater()},theme:S.PIP_BUTTON_THEME.PLAYER}):null,e=o.default.createElement(o.default.Fragment,null,t,l),a=e=>{e.stopPropagation(),this.refVideo&&(this.state.isVideoPlaying?this.refVideo.pause():this.refVideo.play())}}i=this.state.isFullscreenMode?o.default.createElement(o.default.Fragment,null,o.default.createElement(y.default,{theme:"upper"}),o.default.createElement(y.default,{theme:"lower"})):this.props.type===u.PLAYER_TYPE.MEDIA_VIEWER?o.default.createElement(y.default,{theme:"full-sharp"}):o.default.createElement(y.default,{theme:"full-rounded"});var c=this.state.isVideoError?this.renderErrorMessage():null;return o.default.createElement("div",{ref:this.setRefContainer,key:"elementsWrapped",className:(0,n.default)(b.default.container,{[b.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this._resetMouseMoveRecently()},onClick:a},o.default.createElement("div",{className:b.default.videoFloaterMedia},this._renderMedia()),this._renderMediaStage(),c,this.props.overlays,o.default.createElement(P.default,{transitionName:"fade-fast"},this.state.isMouseOver&&this.state.mouseMoveRecently?o.default.createElement(o.default.Fragment,null,i,this._renderVideoControls(),e):null))}}N.displayName="SharedVideoPlayer";var O=(0,m.default)(N);t.default=class extends O{constructor(...e){super(...e),this.getCurrentTimeFromVideo=()=>this.getComponent().getCurrentTimeFromVideo(),this.getContainerElement=()=>this.getComponent().getContainerElement()}}},31712:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(78718)),l=i(a(23279)),n=r(a(67294)),o=i(a(30352)),d=i(a(33766)),u=a(26226),c=i(a(80896)),f=(0,l.default)(((e,t)=>{(0,u.setVideoVolumeSettings)(e,t)}),500);class h extends n.PureComponent{constructor(...e){super(...e),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){var t=(0,u.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onVolumeChange=()=>{var e=this.videoRef;if(e){var t=e.getVolume(),a=e.getMuted();f(t,a),this.props.onVolumeChange({volume:t,muted:a})}},this.onOtherPlaying=e=>{e!==this&&this.videoRef&&this.videoRef.pause()},this.onPlaying=()=>{d.default.mediaPlaying(this),this.props.onPlaying()},this.setStartTime=()=>{this.videoRef&&"number"==typeof this.props.startTime&&this.videoRef.setCurrentTime(this.props.startTime)},this.play=()=>{var e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{var e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.onLoadedMetadata=e=>{null!=this.props.startTime&&this.setStartTime();var t=(0,s.default)(e.target,["duration","volume","muted","videoWidth","videoHeight"]);this.props.onLoadedMetadata(t,e)},this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)},this.onProgress=()=>{if(this.videoRef){var e=this.videoRef.getBuffered(),t=[];if(e)for(var a=0;a<e.length;a++)t.push([e.start(a),e.end(a)]);this.props.onProgress(t)}},this.onTimeUpdate=e=>{var t=e.target.currentTime;this.props.onTimeUpdate(t)},this.onError=e=>{var t=this.videoRef&&this.videoRef.refVideo&&this.videoRef.refVideo.error?this.videoRef.refVideo.error.code:null;null!=t||null==e.code?this.props.onError(t):this.props.onError(e.code)}}componentDidMount(){this.props.listeners.add(d.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(d.default,"pttRecording",this.pause)}componentWillUnmount(){f.flush()}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){return n.default.createElement(o.default,{ref:this.setRefVideo,src:this.props.url,poster:this.props.poster,className:this.props.className,onVolumeChange:this.onVolumeChange,onEnded:this.props.onEnded,onError:this.onError,onPause:this.props.onPause,onPlaying:this.onPlaying,onProgress:this.onProgress,onTimeUpdate:this.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay},this.props.children)}}h.displayName="UrlVideoTag";var p=(0,c.default)(h);t.default=class extends p{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},45936:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THUMB_RADIUS_FULLSCREEN=t.THUMB_RADIUS_WINDOW=void 0;var s=i(a(5558)),l=i(a(94184)),n=r(a(67294)),o=i(a(44386)),d=i(a(75444)),u=i(a(13837)),c=a(1886),f=i(a(80162)),h=i(a(74512)),p=i(a(89848)),m=i(a(97439)),_=i(a(2425)),v=parseFloat(_.default["-thumb-radius-window"].replace(/px$/,""));t.THUMB_RADIUS_WINDOW=v;var g=parseFloat(_.default["-thumb-radius-fullscreen"].replace(/px$/,""));t.THUMB_RADIUS_FULLSCREEN=g;function E(e,t){switch(!0){case t:return"video-volume-muted";case e<.5:return"video-volume-1";case e>=1:return"video-volume"}return"video-volume-2"}class S extends n.PureComponent{constructor(e){super(e),this.handlePause=()=>{this.props.onPause()},this._handlePlay=()=>{this.props.onPlay()},this._isVideoPlayingBeforeDrag=null,this._handleProgressChange=e=>{var t=parseFloat(e.target.value);this.props.onProgressChange(t);var a=Math.abs(this.state.bufferedTime-this.props.duration)<.1?this.state.bufferedTime:0;this.setState({progress:t,bufferedTime:a})},this._handleProgressMouseUp=()=>{this.setState({isDraggingProgress:!1}),null!=this._isVideoPlayingBeforeDrag&&(this._isVideoPlayingBeforeDrag&&this._handlePlay(),this._isVideoPlayingBeforeDrag=null)},this._handleProgressMouseDown=()=>{this.setState({isDraggingProgress:!0}),this._isVideoPlayingBeforeDrag=this.props.isVideoPlaying,this._isVideoPlayingBeforeDrag&&this.handlePause()},this._handleVolumeValueChange=e=>{var t=parseFloat(e.target.value);this.props.onVolumeValueChange(t),this.setState({volume:t})},this._handleMute=()=>{this.props.onMutedValueChange(!0),this.setState({muted:!0})},this._handleUnmute=()=>{this.props.onMutedValueChange(!1),this.setState({muted:!1})},this._stopEventPropagation=e=>{e.stopPropagation()},this._renderTooltip=()=>{var e=this.state.mouseOverProgressRatio;if(void 0===e)return n.default.createElement("div",{className:_.default.tooltipWrapper});var t=o.default.durationStr(e*this.props.duration);return n.default.createElement("div",{className:_.default.tooltipWrapper,style:{left:100*e+"%"}},n.default.createElement("div",{className:(0,l.default)(_.default.tooltipTextBoxGeneral,_.default.tooltipTextBoxPosAndSize)},t),n.default.createElement("div",{className:(0,l.default)(_.default.tooltipTailGeneral,_.default.tooltipTailPosAndSize)}))},this._renderVolume=()=>{var e=this.state.muted||0===this.state.volume,t=n.default.createElement(h.default,{"aria-label":e?f.default.t(14):f.default.t(11),name:E(this.state.volume,e),display:"inline",onClick:()=>{e?this._handleUnmute():this._handleMute(),0===this.props.volume&&this.props.onVolumeValueChange(.25)}}),a={width:100*this.state.volume+"%"},r=this.state.isMouseOverVolumeControl&&!this.state.muted,i=r?n.default.createElement("div",{className:_.default.volumeBarContainer},n.default.createElement("div",{className:(0,l.default)(_.default.volumeLowerTrack,{[_.default.lowerTrackLongest]:1===this.state.volume,[_.default.firefoxFix]:p.default.isGecko}),style:a}),n.default.createElement("input",{className:_.default.volumeBar,dir:"ltr",onChange:this._handleVolumeValueChange,type:"range",min:"0",max:1,step:"any",value:this.state.volume})):n.default.createElement("div",{className:_.default.volumeBarContainer});return n.default.createElement("div",{className:(0,l.default)(_.default.volumeContainer,{[_.default.volumePadding]:r}),onClick:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverVolumeControl:!0})},onMouseLeave:()=>{this.setState({isMouseOverVolumeControl:!1}),0!==this.props.volume||this.state.muted||this._handleMute()},onMouseDown:this._stopEventPropagation},t,i)},this._renderProgress=()=>{var e=this.state.progress/this.props.duration;e>1&&(e=1);var t=100*e+"%",a=this.state.bufferedTime/this.props.duration;a>1&&(a=1);var r=100*a+"%";return n.default.createElement("div",{className:(0,l.default)(_.default.progressBarContainer),onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverProgressBar:!0})},onMouseLeave:()=>{this.setState({isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0})},onMouseMove:e=>{var t=this.props.isFullscreenMode?g:v,a=e.currentTarget.getBoundingClientRect().left,r=e.pageX,i=e.currentTarget.offsetWidth-2*t,s=(r-a-t)/i,l=i*(this.state.progress/this.props.duration),n=Math.abs(r-a-t-l)<=t;s<0?s=n?0:void 0:s>1&&(s=n?1:void 0),this.setState({mouseOverProgressRatio:s})}},n.default.createElement("input",{"data-testid":"progress",className:_.default.hiddenProgressBar,dir:"ltr",onChange:this._handleProgressChange,onMouseDown:this._handleProgressMouseDown,onMouseUp:this._handleProgressMouseUp,type:"range",min:"0",max:(0,s.default)(this.props.duration,2),step:"any",value:this.state.progress}),n.default.createElement("div",{className:_.default.displayedProgressBar},n.default.createElement("div",{className:_.default.displayedTrack}),n.default.createElement("div",{className:(0,l.default)(_.default.displayedBuffer,{[_.default.lowerTrackLongest]:1===a}),style:{width:r}}),n.default.createElement("div",{className:(0,l.default)(_.default.displayedProgress,{[_.default.lowerTrackLongest]:1===e}),style:{width:t}}),n.default.createElement("div",{className:(0,l.default)(_.default.thumb,{[_.default.hideThumb]:!this.state.isMouseOverProgressBar}),style:{left:t}}),this._renderTooltip()))},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.props.ctwaSourceUrl&&(0,c.openExternalLink)(this.props.ctwaSourceUrl)},this.state={progress:this.props.progress,volume:this.props.volume,muted:this.props.muted,bufferedTime:this.props.bufferedTime,isMouseOverVolumeControl:!1,isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0,isDraggingProgress:!1,prevPropProgress:this.props.progress,prevPropVolume:this.props.volume,prevPropMuted:this.props.muted,prevPropBufferedTime:this.props.bufferedTime}}componentDidMount(){0!==this.props.volume||this.props.muted||this._handleMute()}static getDerivedStateFromProps(e,t){var a={};return t.prevPropProgress===e.progress||t.isDraggingProgress||(a.progress=e.progress,a.prevPropProgress=e.progress),t.prevPropVolume!==e.volume&&(a.volume=e.volume,a.prevPropVolume=e.volume),t.prevPropMuted!==e.muted&&(a.muted=e.muted,a.prevPropMuted=e.muted),t.prevPropBufferedTime!==e.bufferedTime&&(a.bufferedTime=e.bufferedTime,a.prevPropBufferedTime=e.bufferedTime),a}_renderCtwaSourceIcon(){if(!(this.state.isMouseOverVolumeControl&&!this.state.muted)&&this.props.ctwaSourceUrl){var e=m.default.withoutWww(m.default.hostname(this.props.ctwaSourceUrl));return n.default.createElement(u.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:this.handleCtwaSourceButtonClick,isInstagram:e===d.default.HOSTNAME.INSTAGRAM})}return null}render(){var e=this.props.isFullscreenMode,t=e?n.default.createElement("div",{className:(0,l.default)(_.default.timeText,_.default.currentTime),onClick:this._stopEventPropagation},o.default.durationStr(this.state.progress)):null,a=e?n.default.createElement("div",{className:(0,l.default)(_.default.timeText,_.default.duration),onClick:this._stopEventPropagation},o.default.durationStr(this.props.duration)):null,r=this.props.className?this.props.className:_.default.controls;return n.default.createElement("div",{className:(0,l.default)(r,{[_.default.fullscreen]:e})},n.default.createElement("div",{className:_.default.playpauseBtnContainer,onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseUp:this._stopEventPropagation},n.default.createElement(h.default,{"aria-label":this.props.isVideoPlaying?f.default.t(12):f.default.t(13),name:this.props.isVideoPlaying?"video-pause":"video-play",display:"inline",onClick:this.props.isVideoPlaying?this.handlePause:this._handlePlay})),this._renderProgress(),this._renderVolume(),t,a,this._renderCtwaSourceIcon())}}t.default=S,S.displayName="VideoControls"},90439:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{refVideo:t}=e;if(!e.refVideo)return null;var a=e.videoMetadata;if(!a)return null;return i.default.createElement(s.default,{duration:a.duration,progress:a.currentTime,volume:a.volume,muted:a.muted,bufferedTime:a.bufferedTime,onPlay:()=>{null==t||t.play()},onPause:()=>{null==t||t.pause()},onProgressChange:e.handleSetCurrentTimeByControls?e.handleSetCurrentTimeByControls:e=>{null==t||t.setCurrentTime(e)},onVolumeValueChange:e=>{null==t||t.setVolume(e)},onMutedValueChange:e=>{null==t||t.setMuted(e)},isVideoPlaying:e.isVideoPlaying,isFullscreenMode:e.isFullscreenMode,className:e.controlsClassName,ctwaSourceUrl:e.ctwaSourceUrl})};var i=r(a(67294)),s=r(a(45936))},41673:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(23279)),n=i(a(94184)),o=r(a(67294)),d=i(a(69912)),u=i(a(84538)),c=i(a(71469)),f=i(a(80896)),h=i(a(98924)),p=a(38127),m=i(a(89848)),_=i(a(4328)),v=i(a(90439)),g=i(a(10250)),E=i(a(17531));class S extends o.Component{constructor(e){super(e),this.setRefContainer=e=>{this.refContainer=e},this.setRefVideo=e=>{this.refVideo=e},this.resetMouseMoveRecently=(0,l.default)((()=>{this.setState({mouseMoveRecently:!1})}),p.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT),this.mouseDownCoor=null,this.handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded();var e=this.refVideo;e&&(e.play(),e.pause()),this.setState({isVideoPlaying:!1})},this.handleError=()=>{this.props.onError&&this.props.onError()},this.handlePause=()=>{var e=this.refVideo?this.refVideo.getCurrentTime():null,t=null;this.state.videoMetadata&&null!=e&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!1,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handlePlaying=()=>{var e=this.refVideo?this.refVideo.getCurrentTime():null,t=null;this.state.videoMetadata&&null!=e&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!0,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handleLoadedMetadata=e=>{var t=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:t,volume:e.volume,muted:e.muted,bufferedTime:0}})},this.handleVolumeChange=e=>{var t=null;this.state.videoMetadata&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this.handleTimeUpdate=e=>{if(this.blockTimeUpdateOnce)this.blockTimeUpdateOnce=!1;else{var t=null;this.state.videoMetadata&&(t=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({videoMetadata:t})}},this.handleSetCurrentTimeByControls=e=>{if(this.refVideo){var t=e;this.state.videoMetadata&&e>=this.state.videoMetadata.duration-1&&this.state.videoMetadata.duration>1&&(t=this.state.videoMetadata.duration-1),this.refVideo.setCurrentTime(t)}},this.handleProgress=e=>{var t=e[0][1],a=null;this.state.videoMetadata&&(a=(0,s.default)((0,s.default)({},this.state.videoMetadata),{},{bufferedTime:t})),this.setState({videoMetadata:a})},this.state={videoMetadata:void 0,isVideoPlaying:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:!1,exposeIframeInPiP:!1}}componentDidMount(){this.props.listeners.add(u.default,"fullscreen_change",(()=>{u.default.isFullscreenMode&&u.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):u.default.isFullscreenMode||this.setState({isFullscreenMode:!1})}))}componentWillUnmount(){this.resetMouseMoveRecently.cancel()}renderVideoControls(){var e=null,t=this.state.videoMetadata;if(t){var a=(0,n.default)(g.default.strippedVideoControls,g.default.opacityTransition,{[g.default.dimmed]:!this.state.mouseMoveRecently});e=o.default.createElement(v.default,{refVideo:this.refVideo,videoMetadata:t,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,handleSetCurrentTimeByControls:this.handleSetCurrentTimeByControls,controlsClassName:this.state.isFullscreenMode?a:void 0}),this.state.isFullscreenMode||(e=o.default.createElement("div",{className:g.default.videoControlsWrapper,onMouseDown:e=>{this.mouseDownCoor={x:e.clientX,y:e.clientY}},onMouseUp:e=>{var t=e.clientX,a=e.clientY,r=this.mouseDownCoor?this.mouseDownCoor.x:void 0,i=this.mouseDownCoor?this.mouseDownCoor.y:void 0;null!=r&&null!=i&&Math.abs(t-r)+Math.abs(a-i)<4&&this.setState({exposeIframeInPiP:!0})}},e))}return e}render(){var e,t=this.state.exposeIframeInPiP||this.state.isFullscreenMode?null:o.default.createElement("div",{className:g.default.blockYoutube}),a=o.default.createElement("div",{className:(0,n.default)(g.default.youtubeContainer,{[g.default.fullscreen]:this.state.isFullscreenMode})},t,o.default.createElement(E.default,{ref:this.setRefVideo,youtubeVideoId:this.props.youtubeVideoId,startTime:this.props.startTime,onEnded:this.handleEnded,onError:this.handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this.handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this.handleVolumeChange,autoPlay:this.props.autoPlay})),r=this.renderVideoControls();m.default.isSafari||(e=o.default.createElement(c.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.state.isFullscreenMode?e=>{e.stopPropagation(),u.default.exitFullscreen()}:e=>{e.stopPropagation(),u.default.requestFullscreen(this.refContainer)}}));var i=o.default.createElement(h.default,{theme:"full-rounded"}),s=this.state.isFullscreenMode?o.default.createElement(o.default.Fragment,null,a,r,o.default.createElement("div",{className:(0,n.default)(g.default.widgetsWrapper,g.default.opacityTransition,{[g.default.dimmed]:!this.state.mouseMoveRecently})},e,o.default.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}}))):o.default.createElement(o.default.Fragment,null,a,o.default.createElement(_.default,{transitionName:"fade-fast"},this.state.isMouseOver&&this.state.mouseMoveRecently&&!this.state.exposeIframeInPiP?o.default.createElement(o.default.Fragment,null,i,r,e,o.default.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}})):null));return o.default.createElement("div",{ref:this.setRefContainer,key:"elementsWrapped",className:(0,n.default)(g.default.container,{[g.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{if(this.state.exposeIframeInPiP){if(m.default.isGecko&&this.state.isMouseOver)return;this.setState({exposeIframeInPiP:!1})}this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this.resetMouseMoveRecently()}},s)}}S.displayName="YoutubeVideoPlayer";var C=(0,f.default)(S);t.default=C},17531:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=i(a(82492)),n=i(a(23279)),o=r(a(67294)),d=i(a(33766)),u=i(a(75444)),c=a(26226),f=i(a(80896)),h=i(a(25132)),p=(0,n.default)((e=>{(0,c.setVideoVolumeSetting)(e)}),500),m=(0,n.default)((e=>{(0,c.setVideoMutedSetting)(e)}),500),_=1,v={width:"100%",height:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,controls:0,playsinline:1,rel:0,modestbranding:0,autoplay:0}};class g extends o.PureComponent{constructor(...e){super(...e),this.updateInterval=null,this.player=void 0,this.currentTime=0,this.videoLoadedFraction=0,this.getPlayerState=()=>this.player?this.player.getPlayerState():void 0,this.setStartTime=()=>{this.player&&"number"==typeof this.props.startTime&&this.player.seekTo(this.props.startTime,!0)},this.onOtherPlaying=e=>{e!==this&&this.player&&this.player.pauseVideo()},this.onReady=e=>{this.player=e.target;var t,a,r=this.player,i=(0,c.getVideoVolumeSettings)();i&&("number"==typeof i.volume&&(t=i.volume),"boolean"==typeof i.muted&&(a=i.muted));var s=r.getDuration(),l=null!=t?t:.01*r.getVolume(),n=null!=a?a:r.isMuted(),o=r.getIframe().getBoundingClientRect(),d=o.width,u=o.height;this.videoTagMetadata={duration:s,volume:l,muted:n,videoWidth:d,videoHeight:u},this.props.onLoadedMetadata(this.videoTagMetadata),this.currentTime=r.getCurrentTime(),this.updateInterval=setInterval(this.update,250),null!=this.props.startTime&&this.setStartTime(),null!=t&&this.setVolume(t),null!=a&&this.setMuted(a)},this.update=()=>{var e=this.player;if(e){var t=e.getCurrentTime();t!==this.currentTime&&(this.currentTime=t,this.props.onTimeUpdate(t));var a=e.getVideoLoadedFraction();if(a!==this.videoLoadedFraction){this.videoLoadedFraction=a;var r=this.videoTagMetadata?this.videoTagMetadata.duration*a:0;this.props.onProgress([[0,r]])}var i=this.videoTagMetadata;if(i){var l=.01*e.getVolume(),n=e.isMuted();l===i.volume&&n===i.muted||(this.videoTagMetadata=(0,s.default)((0,s.default)({},i),{},{volume:l,muted:n}),this.props.onVolumeChange({volume:l,muted:n}))}}},this.onPlay=()=>{d.default.mediaPlaying(this),this.props.onPlaying()},this.onPause=()=>{this.props.onPause()},this.onEnd=()=>{this.props.onEnded();var e=this.player;e&&(e.playVideo(),e.pauseVideo())},this.onError=()=>{this.props.onError()},this.onStateChange=e=>{e.target.getPlayerState()!==_&&this.props.onPause()},this.play=()=>{this.player&&this.player.playVideo()},this.pause=()=>{this.player&&this.player.pauseVideo()},this.getPaused=()=>!this.player||this.getPlayerState()!==_,this.getCurrentTime=()=>this.player?this.player.getCurrentTime():0,this.setCurrentTime=e=>{this.player&&this.player.seekTo(e,!0)},this.getDuration=()=>this.player?this.player.getDuration():0,this.getVolume=()=>this.player?.01*this.player.getVolume():0,this.setVolume=e=>{this.player&&(this.player.setVolume(100*e),p(e))},this.getMuted=()=>!!this.player&&this.player.isMuted(),this.setMuted=e=>{var t=this.player;t&&(e?t.mute():t.unMute(),m(e))}}componentDidMount(){this.props.listeners.add(d.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(d.default,"pttRecording",this.pause)}componentWillUnmount(){this.updateInterval&&clearInterval(this.updateInterval)}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){var e=(0,l.default)({},v,{playerVars:{autoplay:this.props.autoPlay?1:0,widget_referrer:u.default.WHATSAPP_ORIGIN,origin:window.location.origin}});return o.default.createElement(h.default,{videoId:this.props.youtubeVideoId,opts:e,onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.onEnd,onError:this.onError,onStateChange:this.onStateChange})}}g.displayName="YoutubeVideoTag";var E=(0,f.default)(g);t.default=class extends E{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},64751:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({productId:e,businessOwnerJid:t,msgT:a}){var r=(0,s.createWid)(t);if(!r)return;var l=i.default.get(r);if(!l)return;var n=l.productCollection.get(e),o=l.msgProductCollection.get(e);if(o&&n){var d=null!=a?a:o.t;return n.t>=d?(l.msgProductCollection.remove(o),n):o}return n||o};var i=r(a(75204)),s=a(52152)},4566:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logBusinessProfileCatalogView=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)((0,i.default)({},(0,o.toDataForCatalogViewEvents)(t)),{},{isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CARD_IMPRESSION,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_CARD_IMPRESSION})).commit()},t.logChatCatalogView=function({catalogOwnerWid:e,catalogContext:t}){new n.default.CatalogView((0,i.default)({catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_CHAT_CATALOG_ICON_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logProfileProductClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CARD_ITEM_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_CARD_ITEM_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logCarouselViewMoreClick=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CARD_MORE_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_CARD_MORE_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogListView=function({catalogOwnerWid:e,catalogContext:t,cartToggle:a}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_LIST_IMPRESSION,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_LIST_IMPRESSION,cartToggle:a},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogShareLinkClick=function({catalogOwnerWid:e,catalogContext:t}){var a=(0,d.isCatalogOwner)({catalogOwnerWid:e});(0,d.createCatalogViewEvent)((0,i.default)({isOwner:a,catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogListDetailClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_LIST_ITEM_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_LIST_ITEM_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logDetailImageClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMAGE_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logDetailLinkClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_LINK_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logImageCarouselModalView=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogSessionId:t}).commit()},t.logImageListClick=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_CLICK,catalogSessionId:t}).commit()},t.logFullImageView=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogSessionId:t}).commit()},t.logImageNavigate=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogSessionId:t}).commit()},t.logProductDetailView=function({product:e,catalogContext:t,cartToggle:a,collectionId:r}){var l=r?(0,s.getProductStatsInFetched)(e.catalogWid.toString(),r,e):void 0,u=null==l?void 0:l.productIndex,c=null==l?void 0:l.collectionIndex;(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMPRESSION,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMPRESSION,cartToggle:a,productIndex:u,collectionIndex:c},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logReportProduct=function({product:e,catalogSessionId:t}){new n.default.CatalogView({catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT,catalogSessionId:t}).commit()},t.logReportProductSuccess=function({product:e,catalogSessionId:t}){new n.default.CatalogView({catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_SUCCESS,catalogSessionId:t}).commit()},t.logReportProductFailure=function({product:e,catalogSessionId:t}){new n.default.CatalogView({catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_FAILURE,catalogSessionId:t}).commit()},t.logProductInquiryClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logProductMsgClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logProductDeepLinkOpen=function({catalogOwnerJid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logProductMessageBusinessClick=function(e,t){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logProductMessageBusinessSend=function(e,t){var a=!1;if(null!=e.businessOwnerJid){var r=e.businessOwnerJid;a=(0,l.getMeUser)().equals((0,c.createWid)(r))}(0,d.createCatalogViewEvent)({isOwner:a,catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogSessionId:t||(new u.default).toString()}).commit()},t.logShareProductCopyLinkClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,productId:e.id.toString()},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logShareProductViaWALinkClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,productId:e.id.toString()},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogAttachmentButtonClick=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CATALOG_IN_CONVERSATION_CLICK,catalogEntryPoint:n.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ATTACHMENT_PANEL,catalogSessionId:e}).commit()},t.logProductMessageSent=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logSendCatalogClick=function({catalogOwnerWid:e,catalogSessionId:t}){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SEND_CATALOG_CLICK,catalogSessionId:t}).commit()},t.logShareCatalogCopyLinkClick=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logShareCatalogViaWALinkClick=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK},(0,o.toDataForCatalogViewEvents)(t))).commit()},t.logAddProductClick=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_CLICKED,catalogSessionId:e.session.toString(),catalogEntryPoint:e.entryPoint}).commit()},t.logAddProductSuccess=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_SUCCESS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logAddProductFailed=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_FAILED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logEditProductClick=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_CLICKED,productId:e.id.toString(),catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString()}).commit()},t.logEditProductSuccess=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_SUCCESS,catalogEntryPoint:t.entryPoint,productId:e.id.toString(),catalogSessionId:t.session.toString()}).commit()},t.logEditProductFailed=function(e,t,a){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_FAILED,catalogEntryPoint:t.entryPoint,productId:e.id.toString(),errorCode:a,catalogSessionId:t.session.toString()}).commit()},t.logDeleteProductClick=function(e,t,a){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_CLICKED,catalogEntryPoint:a.entryPoint,productId:e.id.toString(),productCount:t,catalogSessionId:a.session.toString()}).commit()},t.logDeleteProductSuccess=function(e,t,a){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_SUCCESS,catalogEntryPoint:a.entryPoint,productId:e.id.toString(),productCount:t,catalogSessionId:a.session.toString()}).commit()},t.logDeleteProductFailed=function(e,t,a,r){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_FAILED,catalogEntryPoint:a.entryPoint,productId:e.id.toString(),productCount:t,errorCode:r,catalogSessionId:a.session.toString()}).commit()},t.logCreateProductCatalogClick=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCreateProductCatalogSuccess=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_SUCCESS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCreateProductCatalogFailed=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_FAILED,catalogEntryPoint:e.entryPoint,errorCode:t,catalogSessionId:e.session.toString()}).commit()},t.logAppealProductCatalogClick=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_CLICKED,catalogEntryPoint:n.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogSuccess=function(e){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_SUCCESS,catalogEntryPoint:n.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogFailed=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_FAILED,catalogEntryPoint:n.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logCatalogContextMenuClick=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_MENU_CLICK,catalogEntryPoint:null==t?void 0:t.entryPoint,catalogSessionId:null==t?void 0:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideClick=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideSuccess=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_SUCCESS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideCancelled=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CANCELLED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideFailed=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_FAILED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowClick=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowSuccess=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_SUCCESS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowCancelled=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CANCELLED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowFailed=function(e,t){new n.default.CatalogBiz({catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_FAILED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()};var i=r(a(81109)),s=a(20766),l=a(26226),n=r(a(72462)),o=a(38335),d=a(53121),u=r(a(68290)),c=a(52152)},38335:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildProductCatalogContext=l,t.buildProductCatalogAccidentalContext=n,t.getProductCatalogSessionId=function(e){return o(e).session.toString()},t.getProductCatalogContext=o,t.toDataForCatalogViewEvents=function(e){return{catalogSessionId:e.session.toString(),bizPlatform:e.bizPlatform,catalogEntryPoint:e.entryPoint}};var i=r(a(72462)),s=r(a(68290));function l(e=new s.default,t=i.default.BIZ_PLATFORM.UNKNOWN,a){return{type:"product_catalog",session:e,entryPoint:a,bizPlatform:t}}function n(){return l(new s.default(!0))}function o(e){return"product_catalog"===e.type?e:n()}},53121:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogViewEvent=t.isCatalogOwner=void 0;var i=r(a(81109)),s=r(a(6479)),l=a(26226),n=r(a(72462)),o=r(a(53680)),d=a(52152);t.isCatalogOwner=e=>{var t,a=(0,l.getMeUser)();return e.catalogOwnerJid?t=(0,d.createWid)(e.catalogOwnerJid):e.catalogOwnerWid?t=e.catalogOwnerWid:e.product&&(t=e.product.catalogWid),o.default.equals(a,t)};t.createCatalogViewEvent=e=>{var{isOwner:t,catalogBizAction:a,catalogViewAction:r,bizActionConfig:l,bizPlatform:o}=e,d=(0,s.default)(e,["isOwner","catalogBizAction","catalogViewAction","bizActionConfig","bizPlatform"]);return t?new n.default.CatalogBiz((0,i.default)((0,i.default)({catalogBizAction:a},d),l)):new n.default.CatalogView((0,i.default)({catalogViewAction:r,bizPlatform:o},d))}},72143:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(40118)),n=r(a(70950)),o=r(a(19687)),d=r(a(6448)),u=r(a(49589)),c=r(a(7970)),f=r(a(20923)),h=a(26226),p=r(a(80162)),m=r(a(80896)),_=a(4566),v=a(38335),g=r(a(55722)),E=a(45437),S=r(a(96437)),C=a(53696),y=r(a(34991)),b=a(21529),M=r(a(43232)),T=r(a(72765)),I=a(6578),P=r(a(74512)),A=r(a(32885)),N=r(a(26144)),O=r(a(11918));class D extends s.Component{constructor(...e){super(...e),this.state={active:!1,contextMenu:null},this.handleActiveChange=e=>{this.setState({active:!!e})},this.handleAddToCart=e=>{var{product:t,collectionId:a}=this.props,r=(0,v.getProductCatalogContext)(this.context);r.session.isAccidental()||((0,l.default)(t,r,a),e.preventDefault(),e.stopPropagation())},this.handleProductHideShow=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductHideShow&&this.props.onProductHideShow(this.props.product)},this.handleDeleteProduct=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductDelete&&this.props.onProductDelete(this.props.product)},this.removeContext=()=>{this.setState({contextMenu:null})},this.handleContext=e=>{var t;if(this.state.contextMenu)this.setState({contextMenu:null});else{var a=[],{product:r,onProductShare:i,onCartOpen:l}=this.props,n=(0,v.getProductCatalogContext)(this.context);(0,_.logCatalogContextMenuClick)(r.id.toString(),n.session.isAccidental()?void 0:n),null!=i&&r.reviewStatus===E.PRODUCT_REVIEW_STATUS.APPROVED&&!1===r.isHidden&&a.push(s.default.createElement(c.default,{a8n:"mi-share-label",action:e=>{e.stopPropagation(),i((0,I.unproxy)(r))},key:"ShareLabel"},p.default.t(495)));var o=null===(t=(0,h.getMaybeMeUser)())||void 0===t?void 0:t.equals(r.catalogWid);o&&this.props.onProductHideShow&&(r.isHidden?a.push(s.default.createElement(c.default,{a8n:"mi-show-label",action:this.handleProductHideShow,key:"ShowLabel"},p.default.t(496))):a.push(s.default.createElement(c.default,{a8n:"mi-hide-label",action:this.handleProductHideShow,key:"HideLabel"},p.default.t(494)))),r.isHidden||r.reviewStatus!==E.PRODUCT_REVIEW_STATUS.APPROVED||null==l||a.push(s.default.createElement(c.default,{a8n:"mi-addcart-label",action:this.handleAddToCart,key:"AddToCartLabel"},p.default.t(492))),o&&this.props.onProductDelete&&a.push(s.default.createElement(c.default,{a8n:"mi-edit-label",action:this.handleDeleteProduct,key:"DeleteLabel"},p.default.t(493))),e.event&&e.event.persist(),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})}}}componentDidMount(){var{active:e,listeners:t,product:a}=this.props;e&&t.add(e,a.id.toString(),this.handleActiveChange)}_getShareIcon(){var{product:e,onProductShare:t}=this.props;return null!=t&&e.reviewStatus===E.PRODUCT_REVIEW_STATUS.APPROVED?s.default.createElement(P.default,{"aria-label":"",className:g.default.shareButton,onClick:a=>{a.stopPropagation(),t((0,I.unproxy)(e))},name:"link"}):null}_getAddToCartIcon(){var{onCartOpen:e,product:t}=this.props;return null!=e&&t.reviewStatus===E.PRODUCT_REVIEW_STATUS.APPROVED?s.default.createElement(n.default,{onClick:this.handleAddToCart}):null}_renderDetail(){return M.default.webCatalogProductsOnOff&&this.props.canManageCatalog?null:s.default.createElement("div",{className:g.default.detailContainer},this._getShareIcon(),this._getAddToCartIcon())}render(){var e,t,{product:a,onClick:r,checkbox:i,isMuted:l,disableOutOfStockAppearance:n,theme:u}=this.props,c=null===(e=a.getPreviewImage())||void 0===e?void 0:e.mediaData,h=u||(n||a.availability!==b.ProductAvailability.OUT_OF_STOCK?"product":"product-out-of-stock");switch(a.reviewStatus){case E.PRODUCT_REVIEW_STATUS.NO_REVIEW:case E.PRODUCT_REVIEW_STATUS.OUTDATED:case E.PRODUCT_REVIEW_STATUS.PENDING:t=s.default.createElement(o.default,{theme:"pending",svg:"business-hours"});break;case E.PRODUCT_REVIEW_STATUS.REJECTED:t=s.default.createElement(o.default,{theme:"warning",svg:"error"})}var p,m=M.default.webCatalogProductsOnOff&&a.isHidden?s.default.createElement(A.default,{name:"hide"}):null,_=c?s.default.createElement(y.default,{theme:"list",mediaData:c,badge:t,overlayContent:m}):null,v=s.default.createElement(f.default,{text:a.name,ellipsify:!0,titlify:!0}),T=(0,C.isEmptyPrice)(a)?null:s.default.createElement(S.default,{product:a,showAvailabilityNotice:!0}),I=T||a.description&&a.description.length>0?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:g.default.description},s.default.createElement(f.default,{text:a.description,ellipsify:!0})),s.default.createElement("div",{className:g.default.price},T)):null;return this.state.contextMenu&&(p=s.default.createElement(N.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.removeContext},s.default.createElement(O.default,{contextMenu:this.state.contextMenu}))),s.default.createElement(s.default.Fragment,null,s.default.createElement(d.default,{key:a.id.toString(),customImage:!0,image:_,primary:v,onClick:r,secondary:I,theme:h,active:this.state.active,checkbox:i,idle:l,detail:this._renderDetail(),className:g.default.catalogListItem,contextEnabled:()=>M.default.webCatalogProductsOnOff&&!0===this.props.canManageCatalog,onContext:this.handleContext}),p)}}D.contextType=u.default,D.CONCERNS={product:["id","name","description","availability","url","retailerId","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","reviewStatus","catalogWid","productImageCollection","imageHash","imageCdnUrl","isHidden"]},D.defaultProps={checkbox:!1,isMuted:!1,disableOutOfStockAppearance:!1},D.displayName="ProductCatalogListItem";var w=(0,m.default)((0,T.default)(D,D.CONCERNS));t.default=w},68290:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ACCIDENTAL_SESSION=void 0;var a="accidental_session";t.ACCIDENTAL_SESSION=a;t.default=class{constructor(e){this.accidental=e||!1,this.initSessionId()}isAccidental(){return this.accidental}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}toString(){var e=`${this.sessionId}`;return this.accidental&&(__LOG__(4,void 0,new Error)`Session ID requested without being set, returning a randon accidental session. Please investigate.`,e=`accidental_session_${e}`),e}}},71461:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(80896)),o=a(4566),d=r(a(19714)),u=r(a(50928)),c=r(a(34991)),f=a(6578),h=r(a(59979)),p=r(a(4328));class m extends s.Component{constructor(e){super(e),this.handleKeyDown=e=>{37===e.keyCode?this.handlePrev(e):39===e.keyCode&&this.handleNext(e)},this.handleNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var{productImageCollection:t}=this.props,a=t.length,r=this.state.activeImgIndex;this.handleSelectThumb((r+1)%a)}},this.handlePrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var{productImageCollection:t}=this.props,a=t.length,r=this.state.activeImgIndex,i=r-1<0?a-1:(r-1)%a;this.handleSelectThumb(i)}},this.handleImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{l.default.closeModalMedia()},this.willEndFlow=()=>{this._refThumbsContainer&&(0,h.default)(this._refThumbsContainer,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.handleSelectThumb=e=>{if(e!==this.state.activeImgIndex){var{product:t,sessionId:a}=this.props;(0,o.logImageNavigate)({product:(0,f.unproxy)(t),catalogSessionId:a}),(0,o.logImageListClick)({product:(0,f.unproxy)(t),catalogSessionId:a})}this.setState({activeImgIndex:e})},this.scrollToActive=(e=!1)=>{var t,a,r=this._refThumbsContainer,i=null===(t=this._refScrollContainer)||void 0===t?void 0:t.firstChild,s=null===(a=this._refActiveThumb)||void 0===a?void 0:a.getImageContainerElement();if(r&&i&&s){var l=0;s instanceof HTMLElement&&(l=s.clientWidth/2-r.clientWidth/2),(0,h.default)(s,"stop");var n=0;e&&(n=300),(0,h.default)(s,"scroll",{duration:n,container:i,offset:l,axis:"x",easing:[.1,.82,.25,1]})}},this._setRefActiveThumb=e=>this._refActiveThumb=e,this._setRefThumbsContainer=e=>this._refThumbsContainer=e,this._setRefScrollContainer=e=>{this._refScrollContainer=e},this.getThumbs=()=>{var{productImageCollection:e}=this.props,t=e.toArray().map(((e,t)=>{var a=t===this.state.activeImgIndex;return s.default.createElement(c.default,{theme:"viewerFlow",active:a,ref:a?this._setRefActiveThumb:null,key:`product-image-${t}`,mediaData:e.mediaData,onClick:this.handleSelectThumb.bind(this,t)})}));return[s.default.createElement("div",{className:d.default.thumbPadding,key:"padding-left"}),t,s.default.createElement("div",{className:d.default.thumbPadding,key:"padding-right"})]},this.zoomIn=!0;var{activeProductImage:t,productImageCollection:a}=this.props;this.state={activeImgIndex:a.toArray().indexOf(t),imgZoomed:!1}}componentDidMount(){this.zoomIn=!1,this.props.listeners.add(window,"keydown",this.handleKeyDown),this.scrollToActive(),this._refThumbsContainer&&(0,h.default)(this._refThumbsContainer,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]});var{product:e,sessionId:t}=this.props;(0,o.logFullImageView)({product:(0,f.unproxy)(e),catalogSessionId:t}),(0,o.logImageCarouselModalView)({product:(0,f.unproxy)(e),catalogSessionId:t})}componentDidUpdate(e,t){var{product:a,sessionId:r}=e;t.activeImgIndex!==this.state.activeImgIndex&&(this.scrollToActive(!0),(0,o.logFullImageView)({product:(0,f.unproxy)(a),catalogSessionId:r}))}render(){var e=this.getThumbs(),{product:t,productImageCollection:a}=this.props,r=a.length,i=this.state.activeImgIndex,l=i>0?this.handlePrev:null,n=i+1<r?this.handleNext:null;return s.default.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},s.default.createElement("div",{className:d.default.thumbsContainer,ref:this._setRefThumbsContainer},s.default.createElement("div",{ref:this._setRefScrollContainer,className:d.default.scrollContainer,dir:"ltr"},s.default.createElement(p.default,{className:d.default.viewerThumbs,transitionName:"thumb-scale"},e))),s.default.createElement(u.default,{mediaData:a.toArray()[this.state.activeImgIndex].mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:n,onPrev:l,onImgZoomIn:this.handleImgZoomIn,getZoomNode:this.props.getZoomNode,zoomIn:this.zoomIn,product:t,sessionId:this.props.sessionId}))}}m.displayName="ProductImageViewerFlow";var _=(0,n.default)(m);t.default=_},88858:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,m.default)(e.mediaData,["renderableUrl"]);var t,a=(0,m.default)(e.product,["name","catalogWid"]),r=l.default.get(a.catalogWid);if(r){var _=i.default.createElement(c.default,{contact:r,selectable:!0,useVerifiedName:!0}),v=i.default.createElement(n.default,{id:r.id,size:40}),g=i.default.createElement("div",{className:f.default.productName},i.default.createElement(h.default,{className:f.default.productNameIcon,name:"business-description",display:"inline"}),i.default.createElement(o.default,{text:a.name,titlify:!0,ellipsify:!0}));t=i.default.createElement(s.default,{idle:!0,image:v,primary:_,secondary:g,theme:"media"})}else t=i.default.createElement(p.TextSpan,{theme:"large",className:f.default.infoName},i.default.createElement(o.default,{text:a.name,titlify:!0,ellipsify:!0}));return i.default.createElement("div",{className:f.default.mediaPanelHeader},i.default.createElement("div",{className:f.default.info},t),i.default.createElement("div",{className:f.default.mediaPanelTools},i.default.createElement(u.MenuBar,{key:"media-panel-header",theme:"strong"},i.default.createElement(u.MenuBarItem,{a8nText:"btn-close",icon:i.default.createElement(h.default,{name:"x-viewer"}),title:d.default.t(1779),onClick:e.onClose}))))};var i=r(a(67294)),s=r(a(74724)),l=r(a(62899)),n=r(a(17367)),o=r(a(20923)),d=r(a(80162)),u=a(97713),c=r(a(39148)),f=r(a(63560)),h=r(a(32885)),p=a(38245),m=r(a(95607))},50928:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(23493)),l=i(a(94184)),n=i(a(63337)),o=r(a(67294)),d=r(a(82388)),u=i(a(75444)),c=i(a(20923)),f=i(a(76022)),h=i(a(83957)),p=a(85063),m=i(a(88858)),_=i(a(42290)),v=i(a(72765)),g=a(56670),E=i(a(26144)),S=i(a(59979));class C extends o.PureComponent{constructor(e){super(e),this.setMediaImage=e=>this.mediaImage=e,this.onImageLoad=e=>{if(!this.zoomed){this.zoomed=!0;var t=this.state.zoomElement;t&&e&&this.props.zoomIn&&e instanceof HTMLElement&&this.animateZoom(t,e)}},this.animateZoom=(e,t)=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.top-a.top,s=r.left-a.left,l=e.clientWidth/t.clientWidth;i-=(t.clientHeight-e.clientHeight)/2,s-=(t.clientWidth-e.clientWidth)/2,(0,S.default)(t,{opacity:[1,0],translateX:[0,s],translateY:[0,i],scale:[1,l]},{duration:u.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]}),this._refCaption.current&&(0,S.default)(this._refCaption.current,{opacity:[1,0]},{duration:u.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.onScroll=e=>{Math.abs(e.deltaY)>7&&this.onClose()},this.onImgZoomIn=e=>{var t=this.mediaImage;e&&t&&(this.listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this.onZoomOut=e=>{var t=this.mediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this.onMouseMove=e=>{this.handleMouseMove(e.pageX,e.pageY)},this._handleMouseMove=(e,t)=>{var a=this.mediaImage;if(a){var r=a.getInsideContainer();if(r&&r instanceof HTMLElement){var i=a.getOutsideContainer();if(i&&i instanceof HTMLElement){var{translateX:s,translateY:l}=a.getTranslatePosition(i,e,t);(0,S.default)(r,"stop"),(0,S.default)(r,{translateX:s,translateY:l,scale:u.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}},this.onClose=()=>{var e;if(!this.closing){if(this.closing=!0,(0,g.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation(),!this.props.getZoomNode)return this.props.onBack();var t=this.props.getZoomNode();if(!t)return this.props.onBack();var a=(0,n.default)(null===(e=this.mediaImage)||void 0===e?void 0:e.getInsideContainer(),"this.mediaImage?.getInsideContainer()"),r=a.getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.top-r.top,l=i.left-r.left,o=t.clientWidth/a.clientWidth;s-=(a.clientHeight-t.clientHeight)/2,l-=(a.clientWidth-t.clientWidth)/2,(0,S.default)(a,{translateX:[l,0],translateY:[s,0],scale:[o,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}))}},this.zoomed=!1,this.closing=!1,this._refCaption=(0,o.createRef)();var t=this.props.mediaData.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED&&this.props.zoomIn&&this.props.getZoomNode?this.props.getZoomNode():null;this.state={imgZoomed:!1,zoomElement:t},this.handleMouseMove=(0,s.default)(this._handleMouseMove)}render(){var e,{mediaData:t,product:a}=this.props,r=o.default.createElement(h.default,{key:t.renderableUrl,mediaData:t,onLoad:this.onImageLoad,onImgZoomIn:this.onImgZoomIn,ref:this.setMediaImage});if(a.description){var i=this.props.zoomIn&&(t.isGif||t.type===f.default.TYPE.IMAGE);e=o.default.createElement("span",{className:{[_.default.captionHidden]:i},ref:this._refCaption},o.default.createElement(c.default,{text:a.description,className:_.default.mediaCaption}))}var s=(0,l.default)(_.default.media,{[_.default.mediaWithCaption]:!!e}),n=o.default.createElement("div",{className:(0,l.default)(_.default.btnMediaNext)},o.default.createElement(d.default,{type:d.ButtonType.Next,onClick:this.props.onNext||(e=>e.stopPropagation()),onKeyDown:this.props.onNext||(()=>{}),disabled:!this.props.onNext||this.state.imgZoomed})),u=o.default.createElement("div",{className:(0,l.default)(_.default.btnMediaPrev)},o.default.createElement(d.default,{type:d.ButtonType.Prev,onClick:this.props.onPrev||(e=>e.stopPropagation()),onKeyDown:this.props.onPrev||(()=>{}),disabled:!this.props.onPrev||this.state.imgZoomed})),p=(0,l.default)("overlay",_.default.mediaViewer,{[_.default.mediaViewerAnimate]:this.props.zoomIn,[_.default.cursorZoomOut]:this.state.imgZoomed}),v=this.state.imgZoomed?null:this.onScroll,g=this.state.imgZoomed?null:this.onClose,S=this.state.imgZoomed&&this.listenToMouseMove?this.onMouseMove:null,C=this.state.imgZoomed?this.onZoomOut:null;return o.default.createElement(E.default,{displayName:"ProductViewer",escapable:!0,requestDismiss:this.onClose},o.default.createElement("div",{className:p,"data-animate-media-viewer":!0,onClick:C,onMouseMove:S},o.default.createElement(m.default,{mediaData:t,onClose:this.onClose,product:this.props.product}),o.default.createElement("div",{className:_.default.mediaContent,dir:"ltr",onWheel:v,onClick:g},u,o.default.createElement("div",{className:s},o.default.createElement("div",{className:_.default.media},r),e),n)))}}C.CONCERNS={mediaData:["mediaStage","renderableUrl","isGif","type"],product:["description"]},C.displayName="ProductImageViewerModal";var y=(0,v.default)(C,C.CONCERNS);t.default=y},96437:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{product:t,fallback:a=null,showAvailabilityNotice:r=!1}=e,i=(0,l.default)(e,["product","fallback","showAvailabilityNotice"]),{currency:p,priceAmount1000:m}=t,_=(0,f.getActivePrice)(t);if(!p||null==m||null==_)return a;var v=e=>o.formatAmount1000(p,e),g=v(_),E=(0,f.isSalePriceActive)(t)?`~${v(m)}~ ${g}`:g,S=(e=>e.availability===h.ProductAvailability.OUT_OF_STOCK?u.default.t(1355):null)(t);r&&S&&(E+=" • "+S);return n.default.createElement(d.default,(0,s.default)({},i,{text:E,formatters:[[[c.Strikethrough,{selectable:i.selectable}]]],ellipsify:!0}))};var s=i(a(67154)),l=i(a(6479)),n=i(a(67294)),o=r(a(39017)),d=i(a(20923)),u=i(a(80162)),c=a(12953),f=a(53696),h=a(21529)},34991:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductThumbPlaceholder=c,t.default=void 0;var s=i(a(94184)),l=r(a(67294)),n=a(85063),o=i(a(44347)),d=i(a(32885)),u=i(a(95607));function c({onClick:e,className:t}){return l.default.createElement("div",{className:(0,s.default)(t,o.default.mediaCanvas,o.default.placeholder),onClick:e},l.default.createElement(d.default,{name:"business-description"}))}var f=(0,l.forwardRef)(((e,t)=>{var{theme:a,active:r,onClick:i,badge:d,overlayContent:f,imgRef:h}=e,p=(0,l.useRef)(null),m=(0,l.useRef)(null),_=(0,u.default)(e.mediaData,["mediaStage","mediaBlob","renderableUrl","preview"]);(0,l.useEffect)((()=>(null==h||h(m.current),()=>{null==h||h(null)})),[]);var v,g,E=()=>p.current;(0,l.useImperativeHandle)(t,(()=>({getImageContainerElement:E}))),_.mediaStage===n.MEDIA_DATA_STAGE.RESOLVED?(v=l.default.createElement("div",{className:o.default.mediaCanvas,style:{backgroundImage:`url(${_.renderableUrl})`},onClick:i,ref:m}),null!=f&&(g=l.default.createElement("div",{className:o.default.overlay},f))):v=_.mediaStage===n.MEDIA_DATA_STAGE.PREPARING?l.default.createElement(c,{className:e.className,onClick:e.onClick}):_.mediaStage===n.MEDIA_DATA_STAGE.ERROR_MISSING?null:l.default.createElement("div",{className:o.default.mediaCanvas});var S=(0,s.default)(e.className,{[o.default.canvasSecondRow]:"hideableSecondRow"===a,[o.default.canvasComponent]:"list"!==a,[o.default.canvasComponentLargeGallerySpacing]:"largeGallerySpacing"===a,[o.default.list]:"list"===a,[o.default.viewerFlow]:"viewerFlow"===a,[o.default.active]:!0===r});if(e.large)return l.default.createElement("div",{className:o.default.canvasComponentLarge},v);var C=l.default.createElement("div",{ref:p,className:S},l.default.createElement("div",{className:o.default.canvasBody}),v,g,d);return"list"===a?l.default.createElement("div",{className:o.default.listWrapper},C):C}));t.default=f},88830:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=null===(t=e.product.getPreviewImage())||void 0===t?void 0:t.mediaData;if(!a)return null;return s.default.createElement(u,(0,i.default)({mediaData:a},e))};var i=r(a(67154)),s=r(a(67294)),l=r(a(34720)),n=a(85063),o=r(a(72143)),d=r(a(95607));var u=function(e){var{product:t,selections:a,active:r,onClick:i}=e,u=(0,d.default)(e.mediaData,["mediaStage"]).mediaStage!==n.MEDIA_DATA_STAGE.RESOLVED,c=u?()=>{}:i;return s.default.createElement(l.default,{key:t.id.toString(),model:t,selections:a,disabled:u},s.default.createElement(o.default,{product:t,onClick:c,active:r,checkbox:!0,disableOutOfStockAppearance:!0,isMuted:u}))}},78853:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(75444)),o=r(a(62899)),d=r(a(80162)),u=r(a(80896)),c=a(97713),f=r(a(11818)),h=r(a(98993)),p=r(a(32885));class m extends s.PureComponent{constructor(){super(...arguments),this._onUnreadChange=()=>{var e=f.default.getUnexpired(!0).some((e=>{var t=this._lastViewerTimestamps[e.id.toString()],a=!t||e.t>t;return!e.contact.statusMute&&e.unreadCount>0&&a}));e!==this.state.hasUnread&&this.setState({hasUnread:e})},this._updateViewerTimestamps=()=>{f.default.getUnexpired(!0).forEach((e=>{this._lastViewerTimestamps[e.id.toString()]=e.t}))},this.onFlowEnd=()=>{this._updateViewerTimestamps(),this.setState({hasUnread:!1})},this._onStatus=e=>{e.preventDefault(),l.default.openModalMedia(s.default.createElement(h.default,{onFlowEnd:this.onFlowEnd,removeTopDrawer:!1}),{transition:"status-v3-modal"})};var e=f.default.getUnexpired(!0).some((e=>e.unreadCount>0&&!e.contact.statusMute));this.state={hasUnread:e},this._lastViewerTimestamps={}}componentDidMount(){this.props.listeners.add(f.default,"add remove change:unreadCount change:t",this._onUnreadChange),this.props.listeners.add(o.default,n.default.COLLECTION_HAS_SYNCED,this._onUnreadChange)}render(){var e=this.state.hasUnread?s.default.createElement(p.default,{name:"status-v3-unread",directional:!0}):s.default.createElement(p.default,{name:"status-v3"});return s.default.createElement(c.MenuBarItem,{a8nText:"menu-bar-status",icon:e,title:d.default.t(1927),onClick:this._onStatus})}}m.CONCERNS={statusV3:["unreadCount"]},m.displayName="StatusV3MenuBarItem";var _=(0,u.default)(m);t.default=_},71162:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(33766)),n=r(a(57734)),o=(r(a(76022)),r(a(64913)));class d extends s.Component{constructor(e){super(e),this.state=this.getInitialMediaStyle()}getInitialMediaStyle(){var e,t=.67;if(this.props.initialStyle)return{initialStyle:this.props.initialStyle,aspectRatio:t};l.default.getConversationHeaderOffset((t=>{e=t}));var a=330*t;return e||(e={right:window.innerWidth,bottom:0}),{initialStyle:{width:a,left:e.right<window.innerWidth?e.right-a-10:window.innerWidth-a-10,bottom:window.innerHeight-10-330-e.bottom},aspectRatio:t}}render(){return s.default.createElement(o.default,{aspectRatio:.67,margin:{x:10,y:10},minWidth:145,className:n.default.voipFloater,initialStyle:this.state.initialStyle,escapeConversationHeader:!0},this.props.children)}}t.default=d,d.displayName="FloatingVoipWindow"},710:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(14090));class s extends i.default{constructor(){super(),this.openVoipWindow=()=>{this.manager&&this.manager.openVoipWindow()},this.closeVoipWindow=()=>{this.manager&&this.manager.closeVoipWindow()}}register(e){this.manager=e}unregister(){this.manager&&this.manager.closeVoipWindow(),this.manager=null}}var l=new s;t.default=l},63317:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(71162)),n=r(a(77188)),o=r(a(1824)),d=r(a(80896)),u=r(a(4328)),c=r(a(710)),f=r(a(64333)),h=r(a(6197));class p extends s.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.openVoipWindow=()=>{n.default.supportsFeature(n.default.F.WEB_VOIP_VOICE_CALL)&&this.setState({isOpen:!0})},this.closeVoipWindow=()=>{this.setState({isOpen:!1})},this.handleCallAccept=()=>{},this.handleCallReject=()=>{this.setState({isOpen:!1})},this.handleCallEnd=()=>{this.setState({isOpen:!1})}}componentDidMount(){c.default.register(this)}componentWillUnmount(){c.default.unregister()}render(){return this.state.isOpen?s.default.createElement(u.default,{transitionName:"voip",className:f.default.wrapper,component:"div"},s.default.createElement(l.default,null,s.default.createElement(h.default,{callUi:o.default,onCallAccept:this.handleCallAccept,onCallReject:this.handleCallReject,onCallEnd:this.handleCallEnd}))):null}}p.displayName="VoipModalManager";var m=(0,d.default)(p);t.default=m},6197:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=r(a(62899)),n=i(a(17367)),o=r(a(84538)),d=r(a(71469)),u=r(a(80162)),c=r(a(80896)),f=r(a(39148)),h=r(a(72765)),p=r(a(17245)),m=r(a(87052)),_=a(22052);class v extends s.PureComponent{constructor(...e){super(...e),this.state={isMouseOver:!1,isFullscreenMode:o.default.isFullscreenMode},this._toggleMute=()=>{this.props.callUi.muted=!this.props.callUi.muted,p.default.mute(this.props.callUi.muted)},this.setRefContainer=e=>{this.refContainer=e},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.handleEnterFullscreen=e=>{e.stopPropagation(),o.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),o.default.exitFullscreen()},this._onWebrtcStop=()=>{p.default.endCall(),this.props.onCallEnd()},this._onWebrtcStart=()=>{var e=this.props.callUi.to,t=this.props.callUi.type;if(!e)throw new Error("Callee is null.");p.default.registerWebRTCCallback((e=>{var a=e.type,r=e.data;switch(a){case _.WEB_CALL_EVENTS.AUDIO_TRACK_RECEIVED:this._refAudioElement&&(this._refAudioElement.srcObject=r);break;case _.WEB_CALL_EVENTS.VIDEO_TRACK_RECEIVED:this._refVideoElement&&"video"===t&&(this._refVideoElement.srcObject=r);break;case _.WEB_CALL_EVENTS.MEDIA_READY:"video"===t&&this._refVideoPreviewElement&&(this._refVideoPreviewElement.srcObject=r);break;default:throw new Error(`VoipWindow:onWebrtcStart unsupported webrtc event type: ${a}`)}})),p.default.callStart(e,"video"===t)}}componentDidMount(){this.props.listeners.add(o.default,"fullscreen_change",(()=>{o.default.isFullscreenMode&&o.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):o.default.isFullscreenMode||this.setState({isFullscreenMode:!1})})),this.props.callUi.outgoing&&this._onWebrtcStart()}render(){var e,t,{onCallAccept:r,onCallReject:i,onCallEnd:o}=this.props,{state:c,outgoing:h,from:p,to:v,type:g}=this.props.callUi,E=h?v:p,S=l.default.get(E||""),C=S?s.default.createElement("div",{className:m.default.participantName},s.default.createElement(f.default,{contact:S,titlify:!0,ellipsify:!0})):null,y=S?s.default.createElement(n.default,{id:S.id,size:82,quality:n.DETAIL_IMAGE_QUALITY.HIGH}):null,b=s.default.createElement("div",{className:m.default.actionRow},s.default.createElement("div",{className:m.default.btnGroup},s.default.createElement("button",{className:m.default.btnReject,onClick:i}),s.default.createElement("button",{className:m.default.btnAccept,onClick:r}))),M=s.default.createElement("div",{className:m.default.actionRow},s.default.createElement("div",{className:m.default.btnGroup},s.default.createElement("button",{className:m.default.btnMute,onClick:this._toggleMute}),s.default.createElement("button",{className:m.default.btnEnd,onClick:o}))),T=s.default.createElement("div",{className:m.default.actionRow},s.default.createElement("div",{className:m.default.btnGroup},s.default.createElement("button",{className:m.default.btnEnd,onClick:o}))),I=a(77188).default;if(I.supportsAnyFeature(I.F.WEB_VOIP_VOICE_CALL,I.F.WEB_VOIP_VIDEO_CALL)){T=s.default.createElement("div",{className:m.default.actionRow},s.default.createElement("div",{className:m.default.btnGroup},s.default.createElement("button",{className:m.default.btnEnd,onClick:this._onWebrtcStop}),s.default.createElement("button",{className:m.default.btnAccept,onClick:this._onWebrtcStart})));var P=I.supportsFeature(I.F.WEB_VOIP_VIDEO_CALL)&&"video"===g?s.default.createElement("video",{className:m.default.webrtcVideo,id:"webRtcVideo",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoElement=e}))}):null,A=I.supportsFeature(I.F.WEB_VOIP_VIDEO_CALL)&&"video"===g?s.default.createElement("video",{className:m.default.webrtcVideoPreview,id:"webRtcVideoPreview",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoPreviewElement=e}))}):null;e=s.default.createElement("div",{className:m.default.webrtcCanvas},P,A,s.default.createElement("audio",{className:m.default.webrtcAudio,id:"webRtcAudio",controls:!0,autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refAudioElement=e}))}))}switch(c){case _.CALL_STATES.INCOMING_RING:t=b;break;case _.CALL_STATES.ACTIVE:t=M;break;default:t=T}var N=s.default.createElement("div",{className:m.default.callTitle},"video"===g?u.default.t(2074):u.default.t(2075)),O=s.default.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick});return s.default.createElement("div",{className:m.default.body,ref:this.setRefContainer,onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})}},N,C,y,e,this.state.isMouseOver&&O,t)}}v.CONCERNS={callUi:["state","muted","speaker","outgoing","from","to","type"]},v.displayName="VoipWindowWeb";var g=(0,c.default)((0,h.default)(v,v.CONCERNS));t.default=g},86185:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(74587),l=i(a(1577)),n=r(a(21407));class o extends n.default{constructor(...e){super(...e),this.isMicrophoneAvailable=(0,n.prop)(!1),this.isSpeakerAvailable=(0,n.prop)(!1),this.isVideoAvailable=(0,n.prop)(!1)}initialize(){super.initialize()}refreshDeviceList(e){this._deviceList=e,this.isVideoAvailable=l.default.getAvailableDevices(e,s.AVDeviceType.Video).length>0,this.isMicrophoneAvailable=l.default.getAvailableDevices(e,s.AVDeviceType.AudioInput).length>0,this.isSpeakerAvailable=l.default.getAvailableDevices(e,s.AVDeviceType.AudioOutput).length>0}}var d=new((0,n.defineModel)(o));t.default=d},52059:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CALL_TYPES=void 0;var i=r(a(21407)),s=a(22052);t.CALL_TYPES={VOICE:"VOICE",VIDEO:"VIDEO"};class l extends i.default{constructor(...e){super(...e),this.callId=(0,i.session)(),this.state=(0,i.session)(s.CALL_UI_STATES.NONE),this.from=(0,i.session)(),this.to=(0,i.session)(),this.type=(0,i.session)(),this.muted=(0,i.session)(),this.peerMuted=(0,i.session)(),this.speaker=(0,i.session)(),this.outgoing=(0,i.session)(),this.startTime=(0,i.session)(),this.showFullscreenCallView=(0,i.session)(!1),this.showCallStatusBar=(0,i.session)(!1),this.externalInputAvailable=(0,i.session)(),this.interrupted=(0,i.session)(),this.peerBusy=(0,i.session)(),this.peerVideoState=(0,i.session)(),this.voipWindowId=(0,i.session)(),this.isGroup=(0,i.session)(),this.groupCallParticipants=(0,i.session)()}onStateChange(){}onAudioOutputChange(){}overrideOutputRoute(){return Promise.resolve()}}t.default=l,l.Proxy="callUi"},1824:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OUTPUT_DEVICES",{enumerable:!0,get:function(){return i.OUTPUT_DEVICES}}),Object.defineProperty(t,"CALL_TYPES",{enumerable:!0,get:function(){return s.CALL_TYPES}}),Object.defineProperty(t,"CALL_UI_STATES",{enumerable:!0,get:function(){return n.CALL_UI_STATES}}),t.default=void 0;var i=a(34699),s=r(a(52059)),l=a(21407),n=a(22052),o=new((0,l.defineModel)(s.default));t.default=o},18392:(e,t,a)=>{"use strict";var r=a(95318);t.Z=function(){!o.default.supportsFeature(o.default.F.MD_BACKEND)&&l.default.protoVersion&&E.default.clearBPQueue().catch((()=>{}));(0,c.clearAllMemoizeCache)(),l.default.delete(),f.default.delete(),p.default.delete(),h.default.delete(),v.default.delete(),S.default.delete(),E.default.delete(),C(i.default),C(m.default),_.default.forEach((e=>{C(e.stickers)})),C(_.default);var e=["Chat","StatusV3","StickerPack","Sticker"];Object.keys(s.default).forEach((t=>{e.includes(t)||C(s.default[t])})),(0,u.delistAndDeleteAllMedia)(),(0,n.clearAllTemporaryStorageData)(),d.default.clear(),l.default.blockStoreAdds=!0};var i=r(a(74798)),s=r(a(84726)),l=r(a(11288)),n=a(26226),o=r(a(77188)),d=r(a(65764)),u=a(15112),c=a(81826),f=r(a(2724)),h=r(a(43232)),p=r(a(19826)),m=r(a(11818)),_=r(a(3264)),v=r(a(47644)),g=a(56670),E=r(a(35822)),S=r(a(49107));function C(e){var t=[...e.models];e.reset(),t.forEach((e=>{(0,g.isFunction)(e.delete)&&e.delete()})),e.delete()}},84726:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(27809)),s=r(a(71237)),l=r(a(81732)),n=r(a(57055)),o=r(a(75204)),d=r(a(74798)),u=r(a(51258)),c=r(a(62899)),f=r(a(59208)),h=r(a(37491)),p=r(a(8670)),m=r(a(18627)),_=r(a(95617)),v=r(a(33048)),g=r(a(51321)),E=r(a(70372)),S=r(a(16729)),C=r(a(44603)),y=r(a(44563)),b=r(a(14837)),M=r(a(64867)),T=r(a(58674)),I=r(a(30099)),P=r(a(19368)),A=r(a(60954)),N=r(a(98165)),O=r(a(11818)),D=r(a(12620)),w=r(a(45303)),R=r(a(79492)),k={Blocklist:i.default,BusinessCategoryResult:s.default,BusinessProfile:l.default,Call:n.default,Catalog:o.default,Chat:d.default,ChatPreference:u.default,Contact:c.default,ConversionTuple:f.default,EmojiVariant:h.default,GroupMetadata:p.default,Label:m.default,LiveLocation:_.default,Msg:v.default,MsgInfo:g.default,Mute:E.default,Order:S.default,Presence:C.default,ProfilePicThumb:y.default,QuickReply:b.default,RecentEmoji:M.default,RecentSticker:T.default,StarredGifMsg:I.default,StarredMsg:P.default,StarredSticker:A.default,Status:N.default,StatusV3:O.default,Sticker:D.default,StickerSearch:w.default,RecentStickerMD:R.default};t.default=k},72763:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(92691)),l=i(a(97066)),n=i(a(74798)),o=i(a(85378)),d=a(26226),u=i(a(8670)),c=r(a(13353));class f extends s.default{constructor(e,t){super(),this.stale=!1,this.add(e,{silent:!0}),this.contact=t,this.listenTo(u.default,`group_participant_change_${(0,d.getMaybeMeUser)().toString()}`,this.updateCommonGroups),this.listenTo(u.default,`group_participant_change_${this.contact.toString()}`,this.updateCommonGroups),this.listenTo(c.default,"change:stream",(()=>{c.default.stream===c.STREAM.DISCONNECTED&&(this.stale=!0)}))}updateCommonGroups(e){var t=u.default.assertGet(e).participants,a=(0,d.getMaybeMeUser)();this.get(e)?t.get(this.contact)&&t.get(a)||this.remove(e):t.get(this.contact)&&t.get(a)&&this.add(n.default.assertGet(e))}}t.default=f,f.model=l.default,f.comparator=o.default},98355:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMaybeBizPlatformForLogging=function(e){if(null==e)return s.default.BIZ_PLATFORM.UNKNOWN;var t=i.default.get((0,l.createWid)(e));if(null==t||!t.isBusiness)return s.default.BIZ_PLATFORM.UNKNOWN;return t.isEnterprise?s.default.BIZ_PLATFORM.ENT:s.default.BIZ_PLATFORM.SMB};var i=r(a(62899)),s=r(a(72462)),l=a(52152)},58533:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(21407));class s extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.variant=(0,i.prop)()}}s.Proxy="emojiVariant";var l=(0,i.defineModel)(s);t.default=l},37491:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmojiVariantCollection=void 0;var s=i(a(92691)),l=r(a(75444)),n=r(a(5318)),o=r(a(58533));class d extends s.default{setVariant(e,t){var a=n.default.getSkinToneBase(e);if(!a)throw new Error("attempt to store variantless emoji");this.gadd({id:a,variant:t})}getVariant(e){if(n.default.getSkinToneBase(e)){var t=this.get(e);return t?n.default.normalizeEmoji(t.variant):null}throw new Error("attempt to get variantless emoji")}getVariantIfExists(e){if(n.default.getSkinToneBase(e)){var t=this.get(e);return t?n.default.normalizeEmoji(t.variant):null}return null}}t.EmojiVariantCollection=d,d.model=o.default,d.cachePolicy={id:l.default.KEY_EMOJI_VARIANT_COLLECTION,policy:s.CACHE_POLICY.LOAD,delay:1e3};var u=new d;t.default=u},93769:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(24788),s=r(a(92691)),l=r(a(74798)),n=a(54438),o=r(a(72462)),d=r(a(46169)),u=r(a(33048));class c extends s.default{constructor(e){super(),this.hasMoreMsgs=!0,this.resultPage=0,this.searchPromise=null,this.searchTerm=null,this.searchLabel=null,this.updateFtsAfterMsgLabelUpdate=()=>{if(this.currentLabelSearch){var e=this.filter((e=>!e.labels||!e.labels.includes(this.currentLabelSearch)));this.remove(e,{silent:!0})}};var t=e?e.msgs:u.default;this.listenTo(t,"remove_msgs",(e=>{this.remove(e,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")})),this.listenTo(l.default,"remove",(e=>{var t=[];this.forEach((a=>{a.chat===e&&t.push(a)})),this.remove(t,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")}))}delete(e){e&&this.stopListening(),super.delete()}resetSearch(){this.hasMoreMsgs=!0,this.resultPage=0,this.searchTerm=null,this.searchPromise&&this.searchPromise.cancel()}search({chat:e,count:t,filter:a={},searchTerm:r}){var s=`${r}__${a.label||a.kind||""}`;this.currentLabelSearch=a.label;var l=!1;this.searchTerm!==s?(this.searchTerm&&0===r.indexOf(this.searchTerm)?l=!0:(this.searchTerm=s,this.delete()),this.resultPage=0,this.hasMoreMsgs=!0):l=!0;var d,c=new o.default.UiAction({uiActionType:o.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:l});if(this.searchPromise){if(this.searchTerm===s)return this.searchPromise;this.searchPromise.cancel()}return d=e?e.fts(r,++this.resultPage,t):u.default.search(r,++this.resultPage,t,void 0,a),this.searchPromise=d.cancellable().then((e=>(e.eof&&(this.hasMoreMsgs=!1),this.searchTerm!==s&&this.delete(),this.searchTerm=s,e.messages&&this.add(e.messages.filter((e=>!e.asRevoked))),c.markUiActionT(),c.commit(),e))).catch((0,i.filteredCatch)([n.WebdDrop,Promise.CancellationError],(()=>{}))).finally((()=>{this.searchPromise=null,this.trigger("searchPromise_update")})),this.trigger("searchPromise_update"),this.searchPromise}}t.default=c,c.model=d.default},84891:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(67294).createContext)(null);t.default=r},24029:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(81109)),l=r(a(21407)),n=i(a(78221)),o=i(a(32881));class d extends l.default{constructor(...e){super(...e),this.id=(0,l.prop)(),this.products=(0,l.prop)(),this.itemCount=(0,l.prop)(),this.subtotal=(0,l.prop)(),this.tax=(0,l.prop)(),this.total=(0,l.prop)(),this.currency=(0,l.prop)(),this.createdAt=(0,l.prop)(),this.sellerJid=(0,l.prop)(),this.totalItemCount=(0,l.derived)(this._totalItemCount,["products"])}_totalItemCount(){return this.products.reduce(((e,t)=>e+t.quantity),0)}initialize(){super.initialize(),this.orderItemCollection=new o.default,this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()}triggerItemCollectionUpdate(){this.orderItemCollection.add(this.products.map((e=>new n.default((0,s.default)({},e)))),{merge:!0})}getCollection(){return a(16729).default}}d.Proxy="order";var u=(0,l.defineModel)(d);t.default=u},16729:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderCollection=void 0;var i=r(a(81109)),s=r(a(92691)),l=r(a(24029)),n=a(97733);class o extends s.default{constructor(e,t){super(),this.width=80,this.height=80,null!=e&&(this.width=e),null!=t&&(this.height=t)}findOrder(e,t,a){var r=this.get(e);return null!=r?Promise.resolve(r):this._queryOrder(e,t,a)}_queryOrder(e,t,a){return(0,n.queryOrder)(e,this.width,this.height,a).then((a=>{super.add((0,i.default)({id:e,fetchedFromServer:!0,sellerJid:t},a));var r=this.get(e);if(null!=r)return Promise.resolve(r)}))}}t.OrderCollection=o,o.model=l.default,o.staleCollection=!0;var d=new o;t.default=d},78221:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(21407)),l=r(a(76022)),n=a(85063);class o extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.price=(0,s.prop)(),this.currency=(0,s.prop)(),this.name=(0,s.prop)(),this.quantity=(0,s.prop)(),this.thumbnailId=(0,s.prop)(),this.thumbnailUrl=(0,s.prop)(),this.mediaData=(0,s.derived)(this._mediaData,["thumbnailUrl"])}_mediaData(){return new l.default({mediaStage:null!=this.thumbnailUrl?n.MEDIA_DATA_STAGE.RESOLVED:n.MEDIA_DATA_STAGE.PREPARING,renderableUrl:null!=this.thumbnailUrl?`${this.thumbnailUrl}`:null})}getCollection(){return a(16729).default}}o.Proxy="order-item";var d=(0,s.defineModel)(o);t.default=d},32881:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderItemCollection=void 0;var i=r(a(92691)),s=r(a(78221));class l extends i.default{}t.OrderItemCollection=l,l.model=s.default;var n=l;t.default=n},70046:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PttPrefs=void 0;var s=i(a(74691)),l=a(78840),n=r(a(21407)),o=a(26226),d=i(a(43232)),u=[1,1.5,2];class c extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.playbackRate=(0,n.prop)(1),this.playbackControlMessageId=(0,n.prop)(null)}initialize(){n.default.prototype.initialize.call(this),this._restorePlaybackRate(),this.listenTo(d.default,"change:pttPlaybackSpeedEnabled",(()=>{this._restorePlaybackRate()})),this.on("change:playbackRate",((e,t)=>{(0,o.setPttPlaybackRate)(t)}))}setPlayingMessage(e){this._setPlayingMessage(e);var t=()=>{this._playingMessageId===e.toString()&&this._setPlayingMessage(null)};return()=>{var e;null===(e=t)||void 0===e||e(),t=null}}_setPlayingMessage(e){var t;this._playingMessageId=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:null,null!=this._playingMessageId?(f.cancel(),this.playbackControlMessageId=this._playingMessageId):this._scheduleClearPlaybackRateControl()}_restorePlaybackRate(){this.playbackRate=d.default.pttPlaybackSpeedEnabled?(0,o.getPttPlaybackRate)():1}advancePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!0)}increasePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!1)}decreasePlaybackRateFor(e){this._changePlaybackRateFor(e,-1,!1)}_changePlaybackRateFor(e,t,a){var r=u.indexOf(this.playbackRate),i=a?(r+t+u.length)%u.length:(0,s.default)(r+t,0,u.length-1);this.playbackRate=u[i],null==this._playingMessageId&&(this.playbackControlMessageId=e.toString(),this._scheduleClearPlaybackRateControl())}_scheduleClearPlaybackRateControl(){var{playbackControlMessageId:e}=this;null!=e&&f.onOrAfter(d.default.pttPlaybackSpeedHideDelay,e)}delayClearPlaybackRateControl(){if(f.isScheduled()){var{playbackControlMessageId:e}=this;null!=e&&f.onOrAfter(d.default.pttPlaybackSpeedHideDelay,e)}}}t.PttPrefs=c,c.Proxy="pttPrefs";var f=new l.ShiftTimer((e=>{e===h.playbackControlMessageId&&(h.playbackControlMessageId=null)})),h=new((0,n.defineModel)(c))({id:"1"}),p=h;t.default=p},86146:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showForwarded=function(e){var t=(0,r.unproxy)(e);return t.numTimesForwarded>0&&!t.asRevoked};var r=a(6578)},45303:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerSearchCollection=void 0;var i=r(a(48926)),s=r(a(92691)),l=(a(17657),r(a(5318))),n=r(a(5354)),o=a(49997),d=r(a(89678)),u={HAPPY:["😂","🤣","😀","😁","😆","🙂","😇","☺️","😄","😃"],LOVE:["😍","😘","❤️","💕","🥰","😗","😙","😻","👩‍❤️‍👩","💐","💌","💛","💚","💙","💜","💓","💘","💏","💑","🌹","🤟","🏩"],GREETINGS:["👋","😂","🤣","🙏","✋","🧕","🚶‍♀️","🚶","👠","🥾","🙈","🦛","🌺","⚡","🎯","🚄","🚅","💒","🛕","🛣️","🕉️","🔊"],SAD:["😭","😔","😢","😞","😟","😕","🙁","☹️","😖","😫","😩","🥺","😥","😓","😪","😿","💧","💔"],ANGRY:["😠","😡","😤","👺","💢","🗯️","👿"],CELEBRATE:["🥳","🥂","🎈","🎊","🎉"]};class c extends s.default{constructor(...e){super(...e),this._cache=new Map,this._hasFetched=!1,this._isFetching=!0}isFetchingData(){return this._isFetching}hasFetchedData(){return this._hasFetched}setStartFetching(){this._isFetching=!0,this.trigger("start_fetching")}setStopFetching(){this._isFetching=!1,this.trigger("stop_fetching")}search(e){var t=()=>super.delete,a=this;return(0,i.default)((function*(){a._lastQuery!==e&&a._hasFetched&&t().call(a);var r=e.trim().toUpperCase();if(a._cache.has(e)){var i=a._cache.get(e);if(null!=i)return a.add(i),void(a._lastQuery=e);__LOG__(2)`StickerMoodCollection cache was invalid, re-searching.`}var s=[];if(u.hasOwnProperty(r))s.push(...u[r]);else{var d=l.default.containsOnlyEmoji(r)?l.default.splitEmojis(r):(0,n.default)(r);if(null==d||0===d.length)return a._lastQuery=e,a.setStopFetching(),void t().call(a);s.push(...d)}a.setStartFetching();var c=[];try{c=yield(0,o.searchFirstPartyStickers)(s)}catch(e){return __LOG__(3,void 0,void 0,!0)`Sticker search request failed: error: ${e}`,SEND_LOGS("sticker-search-request-failed"),void a.setStopFetching()}a._cache.set(e,c),a._hasFetched=!0,a._lastQuery=e,a.add(c),a.setStopFetching()}))()}searchMood(e){return this.search(e)}delete(){super.delete(),this._cache=new Map,this._hasFetched=!1,this._isFetching=!1}}t.StickerSearchCollection=c,c.model=d.default;var f=new c;t.default=f},18038:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.canBeGroupedAsAlbum=function(e,t){return(e.isGroupMsg?s.default.equals(e.author,t.author):s.default.equals(e.from,t.from))&&e.isForwarded===t.isForwarded&&t.t-e.t<=i.default.ALBUM_DIFF_INTERVAL},t.canBeGroupedWithNext=function(e,t){if(e.isNotification||t.isNotification)return!1;return e.isGroupMsg?s.default.equals(e.author,t.author)&&e.isSentByMe===t.isSentByMe:s.default.equals(e.from,t.from)};var i=r(a(75444)),s=r(a(53680))},51774:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.animateConversationPanel=function(e,t){return(0,i.default)(e,{scaleX:[1,t]},{duration:300,easing:[.1,.82,.25,1]}),1!==t};var i=r(a(59979))},74296:(e,t,a)=>{"use strict";var r=a(95318);t.Z=function({cmd:e,untypedData:t,isExternal:a}){var r=a?h.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_EXTERNAL:h.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_WA_LINK_CLICK;switch(e){case c.APICmd.GROUP_INVITE:return n.default.closeStatusViewer(),n.default.openModal(s.default.createElement(u.default,{groupCode:t.code})),new h.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_GROUP_INVITE}).commit(),!0;case c.APICmd.CATALOG:var{catalogOwnerJid:y}=t;return function(e){n.default.openModal(s.default.createElement(p.default,{chatId:(0,C.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{n.default.openDrawerRight(s.default.createElement(v.default,{chat:t,catalogOwnerJid:e}),"slide-left",S.default.Manager.top,(0,m.buildProductCatalogContext)())}),100)},msgText:null}),{transition:"modal-flow"})}(y),new h.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_CATALOG}).commit(),!0;case c.APICmd.PRODUCT:var{businessOwnerJid:b,productId:M}=t;return function(e,t){var a=(0,m.buildProductCatalogContext)(new _.default,(0,o.getMaybeBizPlatformForLogging)(e),h.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_DEEPLINK);(0,f.logProductDeepLinkOpen)({catalogOwnerJid:e,catalogContext:a}),n.default.openModal(s.default.createElement(p.default,{chatId:(0,C.createWid)(e),onSuccess:r=>{window.setTimeout((()=>{n.default.openDrawerRight(s.default.createElement(v.default,{chat:r,productInfo:{productId:t,businessOwnerJid:e},refreshCarousel:!0}),"slide-left",S.default.Manager.top,a)}),100)},msgText:null}),{transition:"modal-flow"})}(b,M),new h.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_PRODUCT}).commit(),!0;case c.APICmd.MSG_SEND:n.default.closeStatusViewer();var T=t,{text:I,phone:P,conversionTuple:A}=T,N=E.default.ctwaContextCompose?T.ctwaContextLinkData:void 0;return P?(n.default.openModal(s.default.createElement(p.default,{chatId:(0,C.createWid)(P),msgText:I,onSuccess:e=>{A&&d.default.add((0,i.default)((0,i.default)({},A),{},{id:e.id,timestamp:l.default.globalUnixTime()}),{merge:!0}),I&&(e.urlText=!0),e.urlNumber=!0},ctwaContextLinkData:N}),{transition:"modal-flow"}),new h.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:N?h.default.DEEP_LINK_TYPE.DEEP_LINK_CTWA:h.default.DEEP_LINK_TYPE.DEEP_LINK_CHAT}).commit()):(n.default.openModal(s.default.createElement(g.default,{msgText:I,urlText:!0}),{transition:"modal-flow"}),new h.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_MSG_FORWARD}).commit()),!0;default:return!1}};var i=r(a(81109)),s=r(a(67294)),l=r(a(44386)),n=r(a(33766)),o=a(98355),d=r(a(59208)),u=r(a(59614)),c=a(83990),f=a(4566),h=r(a(72462)),p=r(a(50698)),m=a(38335),_=r(a(68290)),v=r(a(77035)),g=r(a(86871)),E=r(a(43232)),S=r(a(21628)),C=a(52152)},56594:(e,t)=>{"use strict";function a(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r=a){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,a)=>r(e,t[a])))}},83139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=!1;for(a=0;a<e.length;a++)if(e[a]===t){r=!0;break}if(r){var i=e[a];e.splice(a,1),e.unshift(i)}}},34699:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AudioSession=t.OUTPUT_DEVICES=t.AUDIO_EVENTS=void 0;var i=r(a(14090));t.AUDIO_EVENTS={OUTPUT_ROUTES_CHANGED:"OUTPUT_ROUTES_CHANGED"};t.OUTPUT_DEVICES={UNKNOWN:0,LINE_OUT:1,HEADPHONES:2,BLUETOOTH:3,INTERNAL_RECEIVER:4,INTERAL_SPEAKER:5,HDMI:6,REMOTE:7,BLUETOOTH_LE:8,BLUETOOTH_HANDS_FREE:9,USB:10,CAR:11};t.AudioSession=class{constructor(){}startUse(){}endUse(){}};class s extends i.default{constructor(){super()}startAudioSession(){}isRoutingToOutput(){return!1}get isRoutingToSpeaker(){return null}get outputRoutes(){return[]}get isBluetoothInputAvailable(){return null}overrideOutputRoute(){return Promise.resolve()}}var l=new s;t.default=l},88894:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBizPrivacyInfoString=function(e){switch(e){case s.WebMessageInfoBizPrivacyStatus.E2EE:return i.default.t(279);case s.WebMessageInfoBizPrivacyStatus.BSP:return i.default.t(276);case s.WebMessageInfoBizPrivacyStatus.BSP_AND_FB:case s.WebMessageInfoBizPrivacyStatus.FB:return i.default.t(281)}};var i=r(a(80162)),s=a(78089)},9226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(!e)return;var r=[];r.push(e);for(;r.length;){var i=r.shift();if(a(i))return i;r=r.concat(t(i))}}},20766:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductStatsInFetched=function(e,t,a){var r,i,l=s.default.get(e);if(!l)return;if(!t&&a){var o=l.productCollection.get(a.id);return r=o&&l.productCollection.indexOf(o),{productIndex:(0,n.isNumber)(r)&&r>-1?r.toString():void 0}}if(t){var d=t&&l.collections.get(t);i=d&&l.collections.indexOf(d);var u=a&&(null==d?void 0:d.productCollection.get(a.id));r=u&&(null==d?void 0:d.productCollection.indexOf(u))}return{collectionIndex:(0,n.isNumber)(i)&&i>-1?i.toString():void 0,productIndex:(0,n.isNumber)(r)&&r>-1?r.toString():void 0}},t.CatalogListItemScrollHelper=t.CollectionsContentDataSource=t.CollectionsDataSource=t.CatalogWithCollectionsDataSource=t.SingleCollectionDataSource=void 0;var i=r(a(48926)),s=r(a(75204)),l=r(a(75444)),n=a(56670);function o(e){var t=e.getData().length||0;return e.getCanLoadMore()&&d(t,e.listItemHeight)?e.loadMore().then((()=>d(e.getData().length||0,e.listItemHeight)?e.loadInitialItems():Promise.resolve(!0))):Promise.resolve(!0)}t.SingleCollectionDataSource=class{constructor(e,t,a,r){var i;(this.loading=null,this.catalog=e,this.collectionId=t,this.forCatalogManager=a,this.listItemHeight=r,t)?this.canLoadMoreCollectionItems=!(e.collections.length>0)||""!==(null===(i=this.catalog.collections.get(t))||void 0===i?void 0:i.afterCursor):this.canLoadMoreAllItems=!(e.productCollection.length>0)||!!this.catalog.afterCursor}loadMore(){if(this.loading)return this.loading;if(!this.getCanLoadMore())return Promise.resolve();var e=this.collectionId;return this.loading=e?this.catalog.collections.findCollectionProducts(this.catalog.id,e,!1).then((()=>{var t;this.canLoadMoreCollectionItems=!!(null===(t=this.catalog.collections.get(e))||void 0===t?void 0:t.afterCursor),this.loading=null})):s.default.update(this.catalog.id).then((()=>{this.canLoadMoreAllItems=!!this.catalog.afterCursor,this.loading=null})),this.loading}loadInitialItems(){return o(this)}getCanLoadMore(){return this.canLoadMoreCollectionItems||this.canLoadMoreAllItems}getData(){var e,t,a=this.collectionId;a?e=(null===(t=this.catalog.collections.get(a))||void 0===t?void 0:t.productCollection.getProductModels(this.forCatalogManager))||[]:e=this.catalog.productCollection.getProductModels(this.forCatalogManager)||[];return e.map((e=>({product:e,collection:void 0})))}};t.CatalogWithCollectionsDataSource=class{constructor(e,t,a){this.loading=null,this.catalog=e,this.forCatalogManager=t,this.listItemHeight=a,this.canLoadMoreCollections=!(e.collections.length>0)||!!this.catalog.collections.afterCursor,this.canLoadMoreCatalog=!(e.productCollection.length>0)||!!this.catalog.afterCursor}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMoreCollections?this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,3,this.forCatalogManager).then((()=>{this.canLoadMoreCollections=!!this.catalog.collections.afterCursor,this.loading=null})):this.loading=s.default.update(this.catalog.id).then((()=>{this.canLoadMoreCatalog=!!this.catalog.afterCursor,this.loading=null})),this.loading):Promise.resolve()}loadInitialItems(){return o(this)}getCanLoadMore(){return this.canLoadMoreCollections||this.canLoadMoreCatalog}getData(){var e=this.catalog.collections.getCollectionModels(this.forCatalogManager),t=e.length>0,a=e.reduce(((e=[],t)=>{e.push({collection:t,product:void 0});var a=t.productCollection.getProductModels(this.forCatalogManager)||[];return a.length>3&&(a.length=3),e.push(...a.map((e=>({product:e,collection:t})))),e}),[]);if(this.canLoadMoreCollections)return a;t&&a.push({allItems:{totalItemsCount:a.length}});var r=this.catalog.productCollection.getProductModels(this.forCatalogManager).map((e=>({product:e,collection:void 0})));return a.push(...r),a}};t.CollectionsDataSource=class{constructor(e,t,a){this.loading=null,this.canLoadMoreCollections=!0,this.catalog=e,this.forCatalogManager=t,this.listItemHeight=a}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMoreCollections&&(this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,3,this.forCatalogManager).then((()=>{this.canLoadMoreCollections=!!this.catalog.collections.afterCursor,this.loading=null}))),this.loading||Promise.resolve()):Promise.resolve()}loadInitialItems(){return o(this)}getCanLoadMore(){return this.canLoadMoreCollections}getData(){return this.catalog.collections.getCollectionModels(this.forCatalogManager).map((e=>({collection:e,product:void 0})))}};function d(e,t){return e*t<window.innerHeight}t.CollectionsContentDataSource=class{constructor(e,t,a){this.loading=null,this.canLoadMore=!0,this.catalog=e,this.catalog.stale=!0,this.catalog.markProductCollectionOld(),this.catalog.productCollection.reset(),this.listItemHeight=t,this.collectionId=a}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMore&&(this.collectionId?this.loading=s.default.findCollectionMembership(this.catalog.id,this.collectionId).then((()=>{this.canLoadMore=!!this.catalog.afterCursor,this.loading=null})):this.loading=s.default.update(this.catalog.id).then((()=>{this.canLoadMore=!!this.catalog.afterCursor,this.loading=null}))),this.loading||Promise.resolve()):Promise.resolve()}loadInitialItems(){return o(this)}getCanLoadMore(){return this.canLoadMore}getData(){return this.catalog.productCollection.getProductModels(!0).map((e=>({product:e,collection:void 0})))}};t.CatalogListItemScrollHelper=class{constructor(e){this.dataSource=e}isScrollAtBottom(e){return e.scrollTop+l.default.SCROLL_FUDGE>=e.scrollHeight-e.clientHeight}willLoadMore(e){return Boolean(this.dataSource.loading||this.isScrollAtBottom(e))}onScroll(e,t){var a=this;return(0,i.default)((function*(){return a.dataSource.loading?(yield a.dataSource.loading,!0):!!a.isScrollAtBottom(t)&&(yield a.dataSource.loadMore(),!0)}))()}}},3310:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(75444)),s=window.matchMedia(`\nonly screen and (max-width: ${i.default.LAYOUT_2COLUMNS_MAX_WIDTH}px)\n`),l={column:s.matches?2:3};s.addListener((function(e){var t=e.matches?2:3;if(l.column!==t){l.column=t;var a=document.createEvent("Event");a.initEvent("columnChange",!0,!0),window.dispatchEvent(a)}}));var n=l;t.default=n},68270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new class{init(){}get(){return{textsize:0}}set(){}};t.default=a},25206:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=3988292384;function i(e,t){var i=t;for(a||(a=function(){for(var e=new Uint32Array(256),t=0,a=0,i=0;t<256;a=++t){for(i=0;i<8;++i)a=1&a?a>>>1^r:a>>>1;e[t]=a}return e}());e.size();)i=a[255&(i^e.readUint8())]^i>>>8;return~i>>>0}t.default=(e,t=4294967295)=>e.peek(i,t)},39017:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatAmount1000ToParts=function(e,t){var a=o(),r=c(a),i=f(a,e),s=u(e,t).replace(i,"").trim(),l=s.indexOf(r),n=-1===l?s:s.substring(0,l),d=-1===l?"":s.substring(l);return{symbol:i,integer:n,decimal:d}},t.formatLocalSymbol=function(e){return f(n[e],e)},t.valueFromString=h,t.parseValueFromString=p,t.validatePriceString=function(e,t,a,r){var i=o(),l=void 0!==s.CURRENCY_DIGITS[e]?s.CURRENCY_DIGITS[e]:s.DEFAULT_DIGITS,n=h(e,t),d=t.replace(/\D+$/g,""),u=c(i);if(null!=a&&n<a)return!1;if(null!=r&&n>r)return!1;if(isNaN(n)||d!==t||(t.split(u)[1]||"").length>l)return!1;return!0},t.currencyForCountryShortcode=function(e){var t=s.REGION_TO_CURRENCY[e.toUpperCase()];return(null==t?void 0:t.length)>0?t[0]:s.DEFAULT_CURRENCY},t.formatAmount1000=t.formatAmount=void 0;var i=r(a(81109)),s=a(16826),l=r(a(80162)),n={IDR:"in-ID",MXN:"es-MX",INR:"en-IN"},o=()=>[l.default.getFullLocale(),l.default.getLocale()].filter(Boolean),d=(e,t,a,r=o())=>new Intl.NumberFormat(r,(0,i.default)({style:"currency",currency:e},a)).format(t);t.formatAmount=d;var u=(e,t,a,r)=>d(e,t/1e3,a,r);function c(e){return new Intl.NumberFormat(e).format(1.1).substring(1,2)}function f(e,t){return u(t,0,{},e).replace(/\d+([,.]\d+)?/g,"").trim()}function h(e,t){var a=o(),r=f(a,e),i=function(e){return new Intl.NumberFormat(e).format(1e4).substring(2,3)}(a);return p(t,r,c(a),i)}function p(e,t,a,r){var i=e.replace(t,"").trim().split(r).join(""),s=parseFloat(i.replace(a,".")||"0");return Math.round(1e3*s)}t.formatAmount1000=u},16826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGION_TO_CURRENCY=t.CURRENCY_DIGITS=t.DEFAULT_DIGITS=t.MAX_FRACTION_DIGITS=t.DEFAULT_CURRENCY=void 0;t.DEFAULT_CURRENCY="USD";t.MAX_FRACTION_DIGITS=4;t.DEFAULT_DIGITS=2;t.CURRENCY_DIGITS={ADP:0,AFN:0,ALL:0,BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,ESP:0,GNF:0,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MRO:0,OMR:3,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};t.REGION_TO_CURRENCY={AC:["SHP"],AD:["EUR"],AE:["AED"],AF:["AFN"],AG:["XCD"],AI:["XCD"],AL:["ALL"],AM:["AMD"],AO:["AOA"],AR:["ARS"],AS:["USD"],AT:["EUR"],AU:["AUD"],AW:["AWG"],AX:["EUR"],AZ:["AZN"],BA:["BAM"],BB:["BBD"],BD:["BDT"],BE:["EUR"],BF:["XOF"],BG:["BGN"],BH:["BHD"],BI:["BIF"],BJ:["XOF"],BL:["EUR"],BM:["BMD"],BN:["BND"],BO:["BOB"],BQ:["USD"],BR:["BRL"],BS:["BSD"],BT:["BTN","INR"],BV:["NOK"],BW:["BWP"],BY:["BYN"],BZ:["BZD"],CA:["CAD"],CC:["AUD"],CD:["CDF"],CF:["XAF"],CG:["XAF"],CH:["CHF"],CI:["XOF"],CK:["NZD"],CL:["CLP"],CM:["XAF"],CN:["CNY"],CO:["COP"],CR:["CRC"],CU:["CUP","CUC"],CV:["CVE"],CW:["ANG"],CX:["AUD"],CY:["EUR"],CZ:["CZK"],DE:["EUR"],DG:["USD"],DJ:["DJF"],DK:["DKK"],DM:["XCD"],DO:["DOP"],DZ:["DZD"],EA:["EUR"],EC:["USD"],EE:["EUR"],EG:["EGP"],EH:["MAD"],ER:["ERN"],ES:["EUR"],ET:["ETB"],EU:["EUR"],FI:["EUR"],FJ:["FJD"],FK:["FKP"],FM:["USD"],FO:["DKK"],FR:["EUR"],GA:["XAF"],GB:["GBP"],GD:["XCD"],GE:["GEL"],GF:["EUR"],GG:["GBP"],GH:["GHS"],GI:["GIP"],GL:["DKK"],GM:["GMD"],GN:["GNF"],GP:["EUR"],GQ:["XAF"],GR:["EUR"],GS:["GBP"],GT:["GTQ"],GU:["USD"],GW:["XOF"],GY:["GYD"],HK:["HKD"],HM:["AUD"],HN:["HNL"],HR:["HRK"],HT:["HTG","USD"],HU:["HUF"],IC:["EUR"],ID:["IDR"],IE:["EUR"],IL:["ILS"],IM:["GBP"],IN:["INR"],IO:["USD"],IQ:["IQD"],IR:["IRR"],IS:["ISK"],IT:["EUR"],JE:["GBP"],JM:["JMD"],JO:["JOD"],JP:["JPY"],KE:["KES"],KG:["KGS"],KH:["KHR"],KI:["AUD"],KM:["KMF"],KN:["XCD"],KP:["KPW"],KR:["KRW"],KW:["KWD"],KY:["KYD"],KZ:["KZT"],LA:["LAK"],LB:["LBP"],LC:["XCD"],LI:["CHF"],LK:["LKR"],LR:["LRD"],LS:["ZAR","LSL"],LT:["EUR"],LU:["EUR"],LV:["EUR"],LY:["LYD"],MA:["MAD"],MC:["EUR"],MD:["MDL"],ME:["EUR"],MF:["EUR"],MG:["MGA"],MH:["USD"],MK:["MKD"],ML:["XOF"],MM:["MMK"],MN:["MNT"],MO:["MOP"],MP:["USD"],MQ:["EUR"],MR:["MRU"],MS:["XCD"],MT:["EUR"],MU:["MUR"],MV:["MVR"],MW:["MWK"],MX:["MXN"],MY:["MYR"],MZ:["MZN"],NA:["NAD","ZAR"],NC:["XPF"],NE:["XOF"],NF:["AUD"],NG:["NGN"],NI:["NIO"],NL:["EUR"],NO:["NOK"],NP:["NPR"],NR:["AUD"],NU:["NZD"],NZ:["NZD"],OM:["OMR"],PA:["PAB","USD"],PE:["PEN"],PF:["XPF"],PG:["PGK"],PH:["PHP"],PK:["PKR"],PL:["PLN"],PM:["EUR"],PN:["NZD"],PR:["USD"],PS:["ILS","JOD"],PT:["EUR"],PW:["USD"],PY:["PYG"],QA:["QAR"],RE:["EUR"],RO:["RON"],RS:["RSD"],RU:["RUB"],RW:["RWF"],SA:["SAR"],SB:["SBD"],SC:["SCR"],SD:["SDG"],SE:["SEK"],SG:["SGD"],SH:["SHP"],SI:["EUR"],SJ:["NOK"],SK:["EUR"],SL:["SLL"],SM:["EUR"],SN:["XOF"],SO:["SOS"],SR:["SRD"],SS:["SSP"],ST:["STN"],SV:["USD"],SX:["ANG"],SY:["SYP"],SZ:["SZL"],TA:["GBP"],TC:["USD"],TD:["XAF"],TF:["EUR"],TG:["XOF"],TH:["THB"],TJ:["TJS"],TK:["NZD"],TL:["USD"],TM:["TMT"],TN:["TND"],TO:["TOP"],TR:["TRY"],TT:["TTD"],TV:["AUD"],TW:["TWD"],TZ:["TZS"],UA:["UAH"],UG:["UGX"],UM:["USD"],US:["USD"],UY:["UYU"],UZ:["UZS"],VA:["EUR"],VC:["XCD"],VE:["VES"],VG:["USD"],VI:["USD"],VN:["VND"],VU:["VUV"],WF:["XPF"],WS:["WST"],XK:["EUR"],YE:["YER"],YT:["EUR"],ZA:["ZAR"],ZM:["ZMW"],ZW:["USD"]}},69027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/\r\n/g;t.default=class{constructor(e){this.hasText=()=>this.hasType("text/plain"),this.hasType=e=>this.types.includes(e),this.data=e,this.types=e.types?Array.isArray(e.types)?e.types:Object.keys(e.types).map((t=>e.types[t])):[]}getItems(){if(this.data.items)return Array.prototype.slice.call(this.data.items);var e=this._getFileTypes();return this.types.map((t=>({type:t,data:this.data.getData(t),kind:e.includes(t)?"string":"file"})))}_getFileTypes(){return Array.prototype.slice.call(this.data.files).map((({type:e})=>e))}getText(e){return this._getText(e).then((e=>e?e.replace(a,"\n"):null))}_getText(e){var t=e||[];0===t.length&&t.push("text/plain");var a,{data:r}=this;if(r.getData)return t.some((e=>{if(r.getData(e))return a=r.getData(e),!0})),Promise.resolve(a);var i,s,l,n=(i=this.data.items,s=t,l=Array.from(i),s.reduce(((e,t)=>{var a=l.find((e=>e.type===t));return a&&e.push(a),e}),[]));return n.length?Promise.all(n.map((e=>new Promise((t=>e.getAsString(t)))))).then((e=>e.find((e=>e.length)))):Promise.resolve()}getFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).filter((({kind:e})=>"file"===e)).map((e=>e.getAsFile())).filter((e=>!!e)):Array.prototype.slice.call(this.data.files||[])}getData(e){return this.data.getData(e)}hasFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).some((({kind:e})=>"file"===e)):!!Array.prototype.slice.call(this.data.files||[]).length}}},94760:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.startOfDaySkew;if(void 0!==t&&t>s.default.skew-30&&t<s.default.skew+30)return e.startOfDay;return e.startOfDaySkew=s.default.skew,e.startOfDay=i.default.unix(e.t+s.default.skew).startOf("day").unix()};var i=r(a(30381)),s=r(a(44386))},790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.pause(),e.src="",e.remove()}},89852:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.scrollIntoViewIfNeeded=function(e,t=!0,a){if(e.scrollIntoViewIfNeeded&&(0,s.isFunction)(e.scrollIntoViewIfNeeded))return e.scrollIntoViewIfNeeded(t);var r=n(a||e.parentNode),i=window.getComputedStyle(r,null),l=parseInt(i.getPropertyValue("border-top-width"),10),o=e.offsetTop-r.offsetTop<r.scrollTop,d=e.offsetTop-r.offsetTop+e.clientHeight-l>r.scrollTop+r.clientHeight;(o||d)&&t&&(r.scrollTop=e.offsetTop-r.offsetTop-r.clientHeight/2-l+e.clientHeight/2);!o&&!d||t||e.scrollIntoView(o&&!d);return!(o||d)},t.scrollIntoView=function(e,t=!0,a){var r=n(a||e.parentNode),i=window.getComputedStyle(r,null),s=parseInt(i.getPropertyValue("border-top-width"),10),l=e.offsetTop-r.offsetTop<r.scrollTop,o=e.offsetTop-r.offsetTop+e.clientHeight-s>r.scrollTop+r.clientHeight;t?r.scrollTop=e.offsetTop-r.offsetTop-r.clientHeight/2-s+e.clientHeight/2:e.scrollIntoView(l&&!o);return!(l||o)},t.scrollAt=function(e,t,a={}){var r=n(t||e.offsetParent),i=a.pos||"center",s=null!=a.duration&&0!==a.duration?a.duration:1e3,o=a.offset||0;switch(i){case"top":return r.scrollTop=e.offsetTop+o,Promise.resolve();case"bottom":return r.scrollTop=e.offsetTop+e.clientHeight-r.clientHeight,Promise.resolve();case"center":return a.animate?((0,l.default)(e,"stop"),(0,l.default)(r,"stop"),(0,l.default)(e,"scroll",{duration:s,container:r,offset:(e.clientHeight-r.clientHeight)/2,easing:a.easing})):(r.scrollTop=e.offsetTop+e.clientHeight/2-r.clientHeight/2,Promise.resolve());case"offset":return a.animate?((0,l.default)(e,"stop"),(0,l.default)(r,"stop"),(0,l.default)(e,"scroll",{duration:s,container:r,offset:-o,easing:a.easing})):(r.scrollTop=e.offsetTop-o,Promise.resolve())}return Promise.resolve()},t.sanitizeNoticeText=function(e){return i.default.sanitize(e,{ALLOWED_TAGS:["b","i","a","#text"],ALLOWED_ATTR:["href"],KEEP_CONTENT:!1})},t.sanitizeNoticeSVG=function(e){return i.default.sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})};var i=r(a(27856)),s=a(56670),l=r(a(59979));function n(e){if(e&&e instanceof HTMLElement)return e;throw new Error("utils:DOM parent not defined or is not a valid HTMLElement")}},84538:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l=r(a(14090)),n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},o=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],d=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],u=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","msfullscreenchange","msfullscreenerror"];class c extends l.default{constructor(){if(super(),this.requestFullscreen=e=>{e?i?e[i[n.requestFullscreen]]():__LOG__(3)`Your browser does not support fullscreen API.`:__LOG__(3)`The element requesting fullscreen is null or undefined.`},this._fullscreenChangeTrigger=e=>{this.trigger("fullscreen_change",e)},this._fullscreenErrorTrigger=e=>{this.trigger("fullscreen_error",e)},"object"==typeof window&&"object"==typeof window.document){var e=s=window.document;if("fullscreenEnabled"in s?i=Object.keys(n):o[n.fullscreenEnabled]in s?i=o:d[n.fullscreenEnabled]in s?i=d:u[n.fullscreenEnabled]in s&&(i=u),i){var t=i;e.addEventListener(t[n.fullscreenchange],this._fullscreenChangeTrigger),e.addEventListener(t[n.fullscreenerror],this._fullscreenErrorTrigger)}else __LOG__(3)`Your browser does not support fullscreen API.`}else __LOG__(3)`document object does not exist`}get exitFullscreen(){return s?i?s[i[n.exitFullscreen]].bind(s):(__LOG__(3)`Your browser does not support fullscreen API.`,()=>{}):(__LOG__(3)`document object does not exist`,()=>{})}get isFullscreenMode(){return s?i?!!s[i[n.fullscreenElement]]:(__LOG__(3)`Your browser does not support fullscreen API.`,!1):(__LOG__(3)`document object does not exist`,!1)}get fullscreenEnabled(){return s?i?Boolean(s[i[n.fullscreenEnabled]]):(__LOG__(3)`Your browser does not support fullscreen API.`,!1):(__LOG__(3)`document object does not exist`,!1)}get fullscreenElement(){if(s){if(i)return s[i[n.fullscreenElement]];__LOG__(3)`Your browser does not support fullscreen API.`}else __LOG__(3)`document object does not exist`}}var f=new c;t.default=f},13150:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=t.parentNode;if(!a)return;if(t.nextSibling)return void a.insertBefore(e,t.nextSibling);return a.appendChild(e),e}},6200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.parentNode)return;return t.parentNode.insertBefore(e,t),e}},51742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;var a=e.parentElement;if(!a)return!1;var r=t>=0?t:a.childNodes.length+t;return e===a.childNodes[r]}},3399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(e.nodeType===Node.TEXT_NODE&&0===e.textContent.length)}},71152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.parentNode)return;e.parentNode.removeChild(e)}},39747:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var a=t.getRangeAt(0);if(!a.collapsed)return!1;var r=a.endContainer;if(a.startOffset!==function(e){return(0,i.default)(e)?e.textContent.length:e.childNodes.length}(r))return!1;if(e===r)return!0;if(!e.contains(r))return!1;var s=r;do{if(s.nextSibling)return!1;s=s.parentNode}while(s!==e);return!0};var i=r(a(15728))},90747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var a=t.getRangeAt(0);if(!a.collapsed||0!==a.startOffset)return!1;var r=a.startContainer;if(e===r)return!0;if(!e.contains(r))return!1;var i=r;do{if(i.previousSibling)return!1;i=i.parentNode}while(i!==e);return!0}},29843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=window.getSelection();if(1!==e.rangeCount)return!1;var t=e.getRangeAt(0);return!!t.collapsed&&(e.removeAllRanges(),e.addRange(t),!0)}},39415:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e;if(!a)return;do{a=t===s.NEXT?a.nextSibling:a.previousSibling}while(a&&(0,i.default)(a));return a},t.DIR=void 0;var i=r(a(3399)),s={NEXT:"NEXT",PREV:"PREV"};t.DIR=s},51740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.__playPromise)return e.__playPromise;var t=new Promise(((t,a)=>{function r(a){e.removeEventListener("playing",r),e.removeEventListener("error",i),e.videoHeight&&e.videoWidth||r(a),delete e.__playPromise,t(a)}function i(t){e.removeEventListener("playing",r),e.removeEventListener("error",i),delete e.__playPromise,a(t)}e.addEventListener("playing",r),e.addEventListener("error",i);var s,l=e.play();(s=l)&&"function"==typeof s.then&&(e.removeEventListener("playing",r),e.removeEventListener("error",i),l.then((()=>{delete e.__playPromise,t()})).catch((t=>{delete e.__playPromise,a(t)})))}));return e.__playPromise=t,t}},11053:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e===i)return;i=e;var[t,r,n]=e===s.EMOJI_TYPE.APPLE?[a(15327).Z,a(68176).Z,a(91455).default]:[a(225).Z,a(79054).Z,a(53507).Z];l.default.configure({emojiType:e,orderedEmojis:t,legacyToEmoji:r,categorizedEmojis:n})};var i,s=a(42195),l=r(a(5318))},91455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SMILEYS_PEOPLE:["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","☺️","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","🤌","🤏","👈","👉","👆","👇","☝️","✋","🤚","🖐️","🖖","👋","🤙","💪","🦾","🖕","✍️","🙏","🦶","🦵","🦿","💄","💋","👄","🦷","👅","👂","🦻","👃","👣","👁️","👀","🫀","🫁","🧠","🗣️","👤","👥","🫂","👶","👧","🧒","👦","👩","🧑","👨","👩‍🦱","🧑‍🦱","👨‍🦱","👩‍🦰","🧑‍🦰","👨‍🦰","👱‍♀️","👱","👱‍♂️","👩‍🦳","🧑‍🦳","👨‍🦳","👩‍🦲","🧑‍🦲","👨‍🦲","🧔","👵","🧓","👴","👲","👳‍♀️","👳","👳‍♂️","🧕","👮‍♀️","👮","👮‍♂️","👷‍♀️","👷","👷‍♂️","💂‍♀️","💂","💂‍♂️","🕵️‍♀️","🕵️","🕵️‍♂️","👩‍⚕️","🧑‍⚕️","👨‍⚕️","👩‍🌾","🧑‍🌾","👨‍🌾","👩‍🍳","🧑‍🍳","👨‍🍳","👩‍🎓","🧑‍🎓","👨‍🎓","👩‍🎤","🧑‍🎤","👨‍🎤","👩‍🏫","🧑‍🏫","👨‍🏫","👩‍🏭","🧑‍🏭","👨‍🏭","👩‍💻","🧑‍💻","👨‍💻","👩‍💼","🧑‍💼","👨‍💼","👩‍🔧","🧑‍🔧","👨‍🔧","👩‍🔬","🧑‍🔬","👨‍🔬","👩‍🎨","🧑‍🎨","👨‍🎨","👩‍🚒","🧑‍🚒","👨‍🚒","👩‍✈️","🧑‍✈️","👨‍✈️","👩‍🚀","🧑‍🚀","👨‍🚀","👩‍⚖️","🧑‍⚖️","👨‍⚖️","👰‍♀️","👰","👰‍♂️","🤵‍♀️","🤵","🤵‍♂️","👸","🤴","🥷","🦸‍♀️","🦸","🦸‍♂️","🦹‍♀️","🦹","🦹‍♂️","🤶","🧑‍🎄","🎅","🧙‍♀️","🧙","🧙‍♂️","🧝‍♀️","🧝","🧝‍♂️","🧛‍♀️","🧛","🧛‍♂️","🧟‍♀️","🧟","🧟‍♂️","🧞‍♀️","🧞","🧞‍♂️","🧜‍♀️","🧜","🧜‍♂️","🧚‍♀️","🧚","🧚‍♂️","👼","🤰","🤱","👩‍🍼","🧑‍🍼","👨‍🍼","🙇‍♀️","🙇","🙇‍♂️","💁‍♀️","💁","💁‍♂️","🙅‍♀️","🙅","🙅‍♂️","🙆‍♀️","🙆","🙆‍♂️","🙋‍♀️","🙋","🙋‍♂️","🧏‍♀️","🧏","🧏‍♂️","🤦‍♀️","🤦","🤦‍♂️","🤷‍♀️","🤷","🤷‍♂️","🙎‍♀️","🙎","🙎‍♂️","🙍‍♀️","🙍","🙍‍♂️","💇‍♀️","💇","💇‍♂️","💆‍♀️","💆","💆‍♂️","🧖‍♀️","🧖","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯","👯‍♂️","🕴️","👩‍🦽","🧑‍🦽","👨‍🦽","👩‍🦼","🧑‍🦼","👨‍🦼","🚶‍♀️","🚶","🚶‍♂️","👩‍🦯","🧑‍🦯","👨‍🦯","🧎‍♀️","🧎","🧎‍♂️","🏃‍♀️","🏃","🏃‍♂️","🧍‍♀️","🧍","🧍‍♂️","👫","👭","👬","👩‍❤️‍👨","👩‍❤️‍👩","👨‍❤️‍👨","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👨‍👩‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🪢","🧶","🧵","🪡","🧥","🥼","🦺","👚","👕","👖","🩲","🩳","👔","👗","👙","🩱","👘","🥻","🩴","🥿","👠","👡","👢","👞","👟","🥾","🧦","🧤","🧣","🎩","🧢","👒","🎓","⛑️","🪖","👑","💍","👝","👛","👜","💼","🎒","🧳","👓","🕶️","🥽","🌂"],ANIMALS_NATURE:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻‍❄️","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🪱","🐛","🦋","🐌","🐞","🐜","🪰","🪲","🪳","🦟","🦗","🕷️","🕸️","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🦭","🐊","🐅","🐆","🦓","🦍","🦧","🦣","🐘","🦛","🦏","🐪","🐫","🦒","🦘","🦬","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕‍🦺","🐈","🐈‍⬛","🪶","🐓","🦃","🦤","🦚","🦜","🦢","🦩","🕊️","🐇","🦝","🦨","🦡","🦫","🦦","🦥","🐁","🐀","🐿️","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🪵","🌱","🌿","☘️","🍀","🎍","🪴","🎋","🍃","🍂","🍁","🍄","🐚","🪨","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","🪐","💫","⭐","🌟","✨","⚡","☄️","💥","🔥","🌪️","🌈","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","⛈️","🌩️","🌨️","❄️","☃️","⛄","🌬️","💨","💧","💦","☔","☂️","🌊","🌫️"],FOOD_DRINK:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜","🍯","🥛","🍼","🫖","☕","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾","🧊","🥄","🍴","🍽️","🥣","🥡","🥢","🧂"],ACTIVITY:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","🪃","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛹","🛼","🛷","⛸️","🥌","🎿","⛷️","🏂","🪂","🏋️‍♀️","🏋️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸","🤸‍♂️","⛹️‍♀️","⛹️","⛹️‍♂️","🤺","🤾‍♀️","🤾","🤾‍♂️","🏌️‍♀️","🏌️","🏌️‍♂️","🏇","🧘‍♀️","🧘","🧘‍♂️","🏄‍♀️","🏄","🏄‍♂️","🏊‍♀️","🏊","🏊‍♂️","🤽‍♀️","🤽","🤽‍♂️","🚣‍♀️","🚣","🚣‍♂️","🧗‍♀️","🧗","🧗‍♂️","🚵‍♀️","🚵","🚵‍♂️","🚴‍♀️","🚴","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖️","🏵️","🎗️","🎫","🎟️","🎪","🤹‍♀️","🤹","🤹‍♂️","🎭","🩰","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🪘","🎷","🎺","🪗","🎸","🪕","🎻","🎲","♟️","🎯","🎳","🎮","🎰","🧩"],TRAVEL_PLACES:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🦯","🦽","🦼","🛴","🚲","🛵","🏍️","🛺","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩️","💺","🛰️","🚀","🛸","🚁","🛶","⛵","🚤","🛥️","🛳️","⛴️","🚢","⚓","🪝","⛽","🚧","🚦","🚥","🚏","🗺️","🗿","🗽","🗼","🏰","🏯","🏟️","🎡","🎢","🎠","⛲","⛱️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","⛺","🛖","🏠","🏡","🏘️","🏚️","🏗️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛️","⛪","🕌","🕍","🛕","🕋","⛩️","🛤️","🛣️","🗾","🎑","🏞️","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙️","🌃","🌌","🌉","🌁"],OBJECTS:["⌚","📱","📲","💻","⌨️","🖥️","🖨️","🖱️","🖲️","🕹️","🗜️","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽️","🎞️","📞","☎️","📟","📠","📺","📻","🎙️","🎚️","🎛️","🧭","⏱️","⏲️","⏰","🕰️","⌛","⏳","📡","🔋","🔌","💡","🔦","🕯️","🪔","🧯","🛢️","💸","💵","💴","💶","💷","🪙","💰","💳","💎","⚖️","🪜","🧰","🪛","🔧","🔨","⚒️","🛠️","⛏️","🪚","🔩","⚙️","🪤","🧱","⛓️","🧲","🔫","💣","🧨","🪓","🔪","🗡️","⚔️","🛡️","🚬","⚰️","🪦","⚱️","🏺","🔮","📿","🧿","💈","⚗️","🔭","🔬","🕳️","🩹","🩺","💊","💉","🩸","🧬","🦠","🧫","🧪","🌡️","🧹","🪠","🧺","🧻","🚽","🚰","🚿","🛁","🛀","🧼","🪥","🪒","🧽","🪣","🧴","🛎️","🔑","🗝️","🚪","🪑","🛋️","🛏️","🛌","🧸","🪆","🖼️","🪞","🪟","🛍️","🛒","🎁","🎈","🎏","🎀","🪄","🪅","🎊","🎉","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷️","🪧","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","🧾","📊","📈","📉","🗒️","🗓️","📆","📅","🗑️","📇","🗃️","🗳️","🗄️","📋","📁","📂","🗂️","🗞️","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🧷","🔗","📎","🖇️","📐","📏","🧮","📌","📍","✂️","🖊️","🖋️","✒️","🖌️","🖍️","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓"],SYMBOLS:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕","🛑","⛔","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿","🅿️","🛗","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","⚧️","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸️","⏯️","⏹️","⏺️","⏭️","⏮️","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾️","💲","💱","™️","©️","®️","👁️‍🗨️","🔚","🔙","🔛","🔝","🔜","〰️","➰","➿","✔️","☑️","🔘","🔴","🟠","🟡","🟢","🔵","🟣","⚫","⚪","🟤","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾","◽","◼️","◻️","🟥","🟧","🟨","🟩","🟦","🟪","⬛","⬜","🟫","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","💬","💭","🗯️","♠️","♣️","♥️","♦️","🃏","🎴","🀄","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],FLAGS:["🏳️","🏴","🏴‍☠️","🏁","🚩","🏳️‍🌈","🏳️‍⚧️","🇺🇳","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇸🇿","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇰","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇹","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇸","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]}},5354:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,u.default)(e,(0,f.default)(v,"Emoji Trie expected to be loaded."))};var s=i(a(48926)),l=i(a(44908)),n=a(9019),o=a(40515),d=i(a(56594)),u=r(a(65243)),c=i(a(80162)),f=i(a(8238)),h=r(a(47644)),p=r(a(65427)),m=i(a(89586)),_=new Set(["ar","bn","cs","de","en","es","fa","fr","gu","he","hi","hu","id","it","mr","ms","nl","pl","pt","pt-BR","ro","ru","sk","th","tr","uk","ur","zh-CN","zh-TW","zh-HK"]),v=null;var g=null,E=[];function S(){var e=(0,l.default)(["en",c.default.getLocale()]).filter((e=>_.has(e)));if(!(0,d.default)(E,e)){E=e;var t=Promise.all(e.map((e=>function(e){return(0,o.promiseLoop)(function(){var t=(0,s.default)((function*(t,r,i){var s=(0,n.delayMs)(p.expBackoff(i,12e4,1e3,.1));return(yield a(26299)(`./${e}`)).default().then((([,e])=>t(e))).catch((()=>s))}));return function(){return t.apply(this,arguments)}}()).catch((()=>({})))}(e)))).then((e=>{g===t&&(v=(0,u.emojiLocaleDictsToTrie)(e))})).catch((()=>{})).finally((()=>{g===t&&(g=null)}));g=t}}c.default.on("locale_change",(()=>{S()})),(0,m.default)(h.default,"change:mode",(()=>h.default.mode===h.StreamMode.MAIN)).then((()=>{S()}))},68176:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#️⃣":1,"":1,"*️⃣":2,"0️⃣":3,"":3,"1️⃣":4,"":4,"2️⃣":5,"":5,"3️⃣":6,"":6,"4️⃣":7,"":7,"5️⃣":8,"":8,"6️⃣":9,"":9,"7️⃣":10,"":10,"8️⃣":11,"":11,"9️⃣":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":80,"":81,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":93,"":94,"":95,"":96,"":97,"":100,"":109,"":110,"":116,"":117,"":118,"":121,"":127,"":130,"":131,"":133,"":154,"":155,"":156,"":158,"":160,"":166,"":177,"":190,"":191,"":192,"":195,"":197,"":198,"":199,"":200,"":202,"":206,"":208,"":211,"":212,"":213,"":216,"":217,"":219,"":220,"":221,"":222,"":224,"":225,"":226,"":227,"":228,"":230,"":232,"":233,"":235,"":237,"":238,"":287,"":297,"":310,"":318,"":320,"":354,"":358,"":366,"":435,"":479,"🇺🇲":479,"":497,"":498,"":499,"":500,"":502,"":504,"":505,"":506,"":507,"":508,"":509,"":510,"":512,"":514,"":515,"":516,"":517,"":518,"":519,"":520,"":522,"":537,"":543,"":562,"":563,"":565,"":566,"":567,"":568,"":569,"":572,"":574,"":575,"":576,"":577,"":579,"":580,"":583,"":584,"":588,"":593,"":594,"":598,"":599,"":600,"":601,"":602,"":603,"":604,"":605,"":607,"":608,"":609,"":612,"":613,"":622,"":623,"":624,"":625,"":626,"":627,"":628,"":630,"":632,"":633,"":638,"":639,"":640,"":641,"":642,"":643,"":649,"":650,"":651,"":652,"":655,"":656,"":657,"":658,"":659,"":660,"":661,"":662,"":671,"":672,"":674,"":675,"":676,"":677,"":678,"":679,"":681,"":682,"":685,"":686,"":687,"":691,"":692,"":693,"":694,"":696,"":700,"":701,"":702,"":703,"":710,"":728,"":747,"":754,"":756,"":829,"":831,"":832,"":834,"":835,"":836,"":837,"":838,"":839,"":840,"":841,"":842,"":844,"":845,"🇽🇪":851,"🇽🇸":852,"🇽🇼":853,"":878,"":879,"":882,"":883,"":885,"":889,"":890,"":891,"":892,"":893,"":897,"":898,"":902,"":904,"":905,"":906,"":909,"":910,"":911,"":912,"":913,"":914,"":915,"":917,"":918,"":919,"":920,"":921,"":922,"":923,"":924,"":925,"":931,"":934,"":940,"":946,"":948,"":954,"":960,"":966,"":972,"":978,"":984,"":990,"":996,"":1002,"":1008,"":1014,"":1015,"":1017,"":1018,"":1020,"":1021,"":1022,"":1025,"":1028,"":1029,"":1030,"":1031,"":1032,"":1035,"":1041,"":1047,"":1234,"":1439,"":1457,"":1475,"":1496,"":1514,"":1520,"":1538,"":1544,"":1550,"":1556,"":1574,"":1582,"":1583,"":1589,"":1590,"":1591,"":1592,"":1593,"":1611,"":1629,"":1635,"":1636,"":1642,"":1660,"":1678,"":1679,"":1680,"":1681,"":1683,"":1684,"":1685,"":1686,"":1687,"":1688,"":1689,"":1690,"":1693,"":1694,"":1695,"":1696,"":1697,"":1698,"":1699,"":1701,"":1703,"":1704,"":1705,"":1706,"":1708,"":1710,"":1711,"":1712,"":1723,"":1724,"":1732,"":1733,"":1734,"":1735,"":1736,"":1738,"":1739,"":1761,"":1768,"":1771,"":1772,"":1773,"":1774,"":1780,"":1782,"":1785,"":1788,"":1789,"":1790,"":1791,"":1793,"":1794,"":1797,"":1798,"":1799,"":1812,"":1815,"":1819,"":1820,"":1821,"":1822,"":1831,"":1832,"":1839,"":1842,"":1845,"":1849,"":1850,"":1851,"":1852,"":1853,"":1854,"":1870,"":1871,"":1872,"":1873,"":1874,"":1875,"":1876,"":1877,"":1878,"":1879,"":1880,"":1881,"":1975,"":1976,"":1977,"":1981,"":1982,"":1983,"":1984,"":1989,"":1990,"":1992,"":1993,"":1995,"":1998,"":1999,"":2e3,"":2002,"":2004,"":2006,"":2008,"":2009,"":2010,"":2012,"":2013,"":2014,"":2015,"":2017,"":2020,"":2022,"":2025,"":2028,"":2029,"":2030,"":2031,"":2035,"":2049,"":2067,"":2085,"":2124,"":2166,"":2172,"":2175,"":2176,"":2177,"":2179,"":2181,"":2184,"":2187,"":2189,"":2190,"":2191,"":2193,"":2195,"":2197,"":2198,"":2206,"":2225,"":2226,"":2228,"":2233,"":2234,"":2239,"":2277,"":2297,"":2298,"":2299,"":2300,"":2301,"":2302,"":2304}},65243:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=[];if(e){var r=function(e,t){var a=function(e,t){if(!t)return[];if(e.length<=5)return t.getMatches(e);var a=e.substring(0,5).trim(),r=t.getMatches(a);return r=(0,u.default)(r,(t=>t.keyword.startsWith(e)))}(e,t),r=v((0,d.default)(a,(e=>e.value))),i=v((0,d.default)(a.filter((t=>t.keyword===e)),(e=>e.value))),s=(0,o.default)(v(h.default.map((e=>e.id))),r),l=(0,o.default)(v(m),r),c=(0,o.default)((0,n.default)(s,l),i);return(0,n.default)(c,E(i),s,l,E(r))}(e.toLowerCase(),t);a=(0,c.default)(r)}return a},t.emojiLocaleDictsToTrie=function(e){var t=e[0];e.length>1&&(t=(0,i.default)((0,i.default)({},t),e[1]));return function(e,t){var a=p.default.fromForwardsStrings(e.map((e=>e[t])),e);return{getMatches:e=>a.search(e)}}((0,s.default)(t,((e,t)=>{var a=t.toLowerCase(),r=a.substring(0,5);return{value:e,keyword:a,shortKeyword:r}})),"shortKeyword")};var i=r(a(81109)),s=r(a(35161)),l=r(a(51463)),n=r(a(93386)),o=r(a(25325)),d=r(a(94654)),u=r(a(63105)),c=r(a(44908)),f=r(a(5318)),h=r(a(64867)),p=r(a(1699)),m=["😂","😍","😘","🤣","😀","❤️","😉","😊","🤔","😭","😁","😜","👏","😎","👍","😬","😆","🙂","😇","😠","😅","☺️","🤗","😄","😒","😃","😏","😌","👌","😝","🙃","😋","🎂","😡","😱","🙏","😔","😢","😳","😞","🤤","👊","😛","😚","🙄","💕","✌️","💪","💞","🌹"],_=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function v(e){return e.map(f.default.normalizeEmoji).filter(Boolean)}var g=(0,l.default)((()=>{var e=new Map,t=0;for(var a of _){var r=f.default.getEmojisInCategory(a);for(var i of r)e.set(i,t),t++}return e}));function E(e){var t=g();return[...e].sort(((e,a)=>{var r,i;return(null!==(r=t.get(e))&&void 0!==r?r:Number.MAX_SAFE_INTEGER)-(null!==(i=t.get(a))&&void 0!==i?i:Number.MAX_SAFE_INTEGER)}))}},15327:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#️⃣","*️⃣","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","©️","®️","‼️","⁉️","™️","ℹ️","↔️","↕️","↖️","↗️","↘️","↙️","↩️","↪️","⌚","⌛","⌨️","⏏️","⏩","⏪","⏫","⏬","⏭️","⏮️","⏯️","⏰","⏱️","⏲️","⏳","⏸️","⏹️","⏺️","Ⓜ️","▪️","▫️","▶️","◀️","◻️","◼️","◽","◾","☀️","☁️","☂️","☃️","☄️","☎️","☑️","☔","☕","☘️","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","☝️","☠️","☢️","☣️","☦️","☪️","☮️","☯️","☸️","☹️","☺️","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","♟️","♠️","♣️","♥️","♦️","♨️","♻️","♾️","♿","⚒️","⚓","⚔️","⚖️","⚗️","⚙️","⚛️","⚜️","⚠️","⚡","⚧️","⚪","⚫","⚰️","⚱️","⚽","⚾","⛄","⛅","⛈️","⛎","⛏️","⛑️","⛓️","⛔","⛩️","⛪","⛰️","⛱️","⛲","⛳","⛴️","⛵","⛷️","⛸️","⛹🏻","⛹🏻‍♀️","⛹🏻‍♂️","⛹🏼","⛹🏼‍♀️","⛹🏼‍♂️","⛹🏽","⛹🏽‍♀️","⛹🏽‍♂️","⛹🏾","⛹🏾‍♀️","⛹🏾‍♂️","⛹🏿","⛹🏿‍♀️","⛹🏿‍♂️","⛹️","⛹️‍♀️","⛹️‍♂️","⛺","⛽","✂️","✅","✈️","✉️","✊","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","✋","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿","✌️","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿","✍️","✏️","✒️","✔️","✖️","✝️","✡️","✨","✳️","✴️","❄️","❇️","❌","❎","❓","❔","❕","❗","❣️","❤️","➕","➖","➗","➡️","➰","➿","⤴️","⤵️","⬅️","⬆️","⬇️","⬛","⬜","⭐","⭕","〰️","〽️","㊗️","㊙️","🀄","🃏","🅰️","🅱️","🅾️","🅿️","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼","🈁","🈂️","🈚","🈯","🈲","🈳","🈴","🈵","🈶","🈷️","🈸","🈹","🈺","🉐","🉑","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌝","🌞","🌟","🌠","🌡️","🌤️","🌥️","🌦️","🌧️","🌨️","🌩️","🌪️","🌫️","🌬️","🌭","🌮","🌯","🌰","🌱","🌲","🌳","🌴","🌵","🌶️","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🍼","🍽️","🍾","🍿","🎀","🎁","🎂","🎃","🎄","🎅","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎖️","🎗️","🎙️","🎚️","🎛️","🎞️","🎟️","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂","🏂🏻","🏂🏼","🏂🏽","🏂🏾","🏂🏿","🏃","🏃‍♀️","🏃‍♂️","🏃🏻","🏃🏻‍♀️","🏃🏻‍♂️","🏃🏼","🏃🏼‍♀️","🏃🏼‍♂️","🏃🏽","🏃🏽‍♀️","🏃🏽‍♂️","🏃🏾","🏃🏾‍♀️","🏃🏾‍♂️","🏃🏿","🏃🏿‍♀️","🏃🏿‍♂️","🏄","🏄‍♀️","🏄‍♂️","🏄🏻","🏄🏻‍♀️","🏄🏻‍♂️","🏄🏼","🏄🏼‍♀️","🏄🏼‍♂️","🏄🏽","🏄🏽‍♀️","🏄🏽‍♂️","🏄🏾","🏄🏾‍♀️","🏄🏾‍♂️","🏄🏿","🏄🏿‍♀️","🏄🏿‍♂️","🏅","🏆","🏇","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿","🏈","🏉","🏊","🏊‍♀️","🏊‍♂️","🏊🏻","🏊🏻‍♀️","🏊🏻‍♂️","🏊🏼","🏊🏼‍♀️","🏊🏼‍♂️","🏊🏽","🏊🏽‍♀️","🏊🏽‍♂️","🏊🏾","🏊🏾‍♀️","🏊🏾‍♂️","🏊🏿","🏊🏿‍♀️","🏊🏿‍♂️","🏋🏻","🏋🏻‍♀️","🏋🏻‍♂️","🏋🏼","🏋🏼‍♀️","🏋🏼‍♂️","🏋🏽","🏋🏽‍♀️","🏋🏽‍♂️","🏋🏾","🏋🏾‍♀️","🏋🏾‍♂️","🏋🏿","🏋🏿‍♀️","🏋🏿‍♂️","🏋️","🏋️‍♀️","🏋️‍♂️","🏌🏻","🏌🏻‍♀️","🏌🏻‍♂️","🏌🏼","🏌🏼‍♀️","🏌🏼‍♂️","🏌🏽","🏌🏽‍♀️","🏌🏽‍♂️","🏌🏾","🏌🏾‍♀️","🏌🏾‍♂️","🏌🏿","🏌🏿‍♀️","🏌🏿‍♂️","🏌️","🏌️‍♀️","🏌️‍♂️","🏍️","🏎️","🏏","🏐","🏑","🏒","🏓","🏔️","🏕️","🏖️","🏗️","🏘️","🏙️","🏚️","🏛️","🏜️","🏝️","🏞️","🏟️","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🏳️","🏳️‍⚧️","🏳️‍🌈","🏴","🏴‍☠️","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🏵️","🏷️","🏸","🏹","🏺","🏻","🏼","🏽","🏾","🏿","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐈‍⬛","🐉","🐊","🐋","🐌","🐍","🐎","🐏","🐐","🐑","🐒","🐓","🐔","🐕","🐕‍🦺","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐻‍❄️","🐼","🐽","🐾","🐿️","👀","👁️","👁️‍🗨️","👂","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿","👃","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿","👄","👅","👆","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿","👇","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿","👈","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿","👉","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿","👊","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿","👋","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿","👌","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿","👍","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿","👎","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿","👏","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿","👐","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👥","👦","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿","👧","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿","👨","👨‍⚕️","👨‍⚖️","👨‍✈️","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨‍🌾","👨‍🍳","👨‍🍼","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍👦","👨‍👦‍👦","👨‍👧","👨‍👧‍👦","👨‍👧‍👧","👨‍👨‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👩‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👧‍👧","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👨‍🦯","👨‍🦰","👨‍🦱","👨‍🦲","👨‍🦳","👨‍🦼","👨‍🦽","👨🏻","👨🏻‍⚕️","👨🏻‍⚖️","👨🏻‍✈️","👨🏻‍🌾","👨🏻‍🍳","👨🏻‍🍼","👨🏻‍🎓","👨🏻‍🎤","👨🏻‍🎨","👨🏻‍🏫","👨🏻‍🏭","👨🏻‍💻","👨🏻‍💼","👨🏻‍🔧","👨🏻‍🔬","👨🏻‍🚀","👨🏻‍🚒","👨🏻‍🤝‍👨🏼","👨🏻‍🤝‍👨🏽","👨🏻‍🤝‍👨🏾","👨🏻‍🤝‍👨🏿","👨🏻‍🦯","👨🏻‍🦰","👨🏻‍🦱","👨🏻‍🦲","👨🏻‍🦳","👨🏻‍🦼","👨🏻‍🦽","👨🏼","👨🏼‍⚕️","👨🏼‍⚖️","👨🏼‍✈️","👨🏼‍🌾","👨🏼‍🍳","👨🏼‍🍼","👨🏼‍🎓","👨🏼‍🎤","👨🏼‍🎨","👨🏼‍🏫","👨🏼‍🏭","👨🏼‍💻","👨🏼‍💼","👨🏼‍🔧","👨🏼‍🔬","👨🏼‍🚀","👨🏼‍🚒","👨🏼‍🤝‍👨🏻","👨🏼‍🤝‍👨🏽","👨🏼‍🤝‍👨🏾","👨🏼‍🤝‍👨🏿","👨🏼‍🦯","👨🏼‍🦰","👨🏼‍🦱","👨🏼‍🦲","👨🏼‍🦳","👨🏼‍🦼","👨🏼‍🦽","👨🏽","👨🏽‍⚕️","👨🏽‍⚖️","👨🏽‍✈️","👨🏽‍🌾","👨🏽‍🍳","👨🏽‍🍼","👨🏽‍🎓","👨🏽‍🎤","👨🏽‍🎨","👨🏽‍🏫","👨🏽‍🏭","👨🏽‍💻","👨🏽‍💼","👨🏽‍🔧","👨🏽‍🔬","👨🏽‍🚀","👨🏽‍🚒","👨🏽‍🤝‍👨🏻","👨🏽‍🤝‍👨🏼","👨🏽‍🤝‍👨🏾","👨🏽‍🤝‍👨🏿","👨🏽‍🦯","👨🏽‍🦰","👨🏽‍🦱","👨🏽‍🦲","👨🏽‍🦳","👨🏽‍🦼","👨🏽‍🦽","👨🏾","👨🏾‍⚕️","👨🏾‍⚖️","👨🏾‍✈️","👨🏾‍🌾","👨🏾‍🍳","👨🏾‍🍼","👨🏾‍🎓","👨🏾‍🎤","👨🏾‍🎨","👨🏾‍🏫","👨🏾‍🏭","👨🏾‍💻","👨🏾‍💼","👨🏾‍🔧","👨🏾‍🔬","👨🏾‍🚀","👨🏾‍🚒","👨🏾‍🤝‍👨🏻","👨🏾‍🤝‍👨🏼","👨🏾‍🤝‍👨🏽","👨🏾‍🤝‍👨🏿","👨🏾‍🦯","👨🏾‍🦰","👨🏾‍🦱","👨🏾‍🦲","👨🏾‍🦳","👨🏾‍🦼","👨🏾‍🦽","👨🏿","👨🏿‍⚕️","👨🏿‍⚖️","👨🏿‍✈️","👨🏿‍🌾","👨🏿‍🍳","👨🏿‍🍼","👨🏿‍🎓","👨🏿‍🎤","👨🏿‍🎨","👨🏿‍🏫","👨🏿‍🏭","👨🏿‍💻","👨🏿‍💼","👨🏿‍🔧","👨🏿‍🔬","👨🏿‍🚀","👨🏿‍🚒","👨🏿‍🤝‍👨🏻","👨🏿‍🤝‍👨🏼","👨🏿‍🤝‍👨🏽","👨🏿‍🤝‍👨🏾","👨🏿‍🦯","👨🏿‍🦰","👨🏿‍🦱","👨🏿‍🦲","👨🏿‍🦳","👨🏿‍🦼","👨🏿‍🦽","👩","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍👩","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍🌾","👩‍🍳","👩‍🍼","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍👦","👩‍👦‍👦","👩‍👧","👩‍👧‍👦","👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👧‍👧","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👩‍🦯","👩‍🦰","👩‍🦱","👩‍🦲","👩‍🦳","👩‍🦼","👩‍🦽","👩🏻","👩🏻‍⚕️","👩🏻‍⚖️","👩🏻‍✈️","👩🏻‍🌾","👩🏻‍🍳","👩🏻‍🍼","👩🏻‍🎓","👩🏻‍🎤","👩🏻‍🎨","👩🏻‍🏫","👩🏻‍🏭","👩🏻‍💻","👩🏻‍💼","👩🏻‍🔧","👩🏻‍🔬","👩🏻‍🚀","👩🏻‍🚒","👩🏻‍🤝‍👨🏼","👩🏻‍🤝‍👨🏽","👩🏻‍🤝‍👨🏾","👩🏻‍🤝‍👨🏿","👩🏻‍🤝‍👩🏼","👩🏻‍🤝‍👩🏽","👩🏻‍🤝‍👩🏾","👩🏻‍🤝‍👩🏿","👩🏻‍🦯","👩🏻‍🦰","👩🏻‍🦱","👩🏻‍🦲","👩🏻‍🦳","👩🏻‍🦼","👩🏻‍🦽","👩🏼","👩🏼‍⚕️","👩🏼‍⚖️","👩🏼‍✈️","👩🏼‍🌾","👩🏼‍🍳","👩🏼‍🍼","👩🏼‍🎓","👩🏼‍🎤","👩🏼‍🎨","👩🏼‍🏫","👩🏼‍🏭","👩🏼‍💻","👩🏼‍💼","👩🏼‍🔧","👩🏼‍🔬","👩🏼‍🚀","👩🏼‍🚒","👩🏼‍🤝‍👨🏻","👩🏼‍🤝‍👨🏽","👩🏼‍🤝‍👨🏾","👩🏼‍🤝‍👨🏿","👩🏼‍🤝‍👩🏻","👩🏼‍🤝‍👩🏽","👩🏼‍🤝‍👩🏾","👩🏼‍🤝‍👩🏿","👩🏼‍🦯","👩🏼‍🦰","👩🏼‍🦱","👩🏼‍🦲","👩🏼‍🦳","👩🏼‍🦼","👩🏼‍🦽","👩🏽","👩🏽‍⚕️","👩🏽‍⚖️","👩🏽‍✈️","👩🏽‍🌾","👩🏽‍🍳","👩🏽‍🍼","👩🏽‍🎓","👩🏽‍🎤","👩🏽‍🎨","👩🏽‍🏫","👩🏽‍🏭","👩🏽‍💻","👩🏽‍💼","👩🏽‍🔧","👩🏽‍🔬","👩🏽‍🚀","👩🏽‍🚒","👩🏽‍🤝‍👨🏻","👩🏽‍🤝‍👨🏼","👩🏽‍🤝‍👨🏾","👩🏽‍🤝‍👨🏿","👩🏽‍🤝‍👩🏻","👩🏽‍🤝‍👩🏼","👩🏽‍🤝‍👩🏾","👩🏽‍🤝‍👩🏿","👩🏽‍🦯","👩🏽‍🦰","👩🏽‍🦱","👩🏽‍🦲","👩🏽‍🦳","👩🏽‍🦼","👩🏽‍🦽","👩🏾","👩🏾‍⚕️","👩🏾‍⚖️","👩🏾‍✈️","👩🏾‍🌾","👩🏾‍🍳","👩🏾‍🍼","👩🏾‍🎓","👩🏾‍🎤","👩🏾‍🎨","👩🏾‍🏫","👩🏾‍🏭","👩🏾‍💻","👩🏾‍💼","👩🏾‍🔧","👩🏾‍🔬","👩🏾‍🚀","👩🏾‍🚒","👩🏾‍🤝‍👨🏻","👩🏾‍🤝‍👨🏼","👩🏾‍🤝‍👨🏽","👩🏾‍🤝‍👨🏿","👩🏾‍🤝‍👩🏻","👩🏾‍🤝‍👩🏼","👩🏾‍🤝‍👩🏽","👩🏾‍🤝‍👩🏿","👩🏾‍🦯","👩🏾‍🦰","👩🏾‍🦱","👩🏾‍🦲","👩🏾‍🦳","👩🏾‍🦼","👩🏾‍🦽","👩🏿","👩🏿‍⚕️","👩🏿‍⚖️","👩🏿‍✈️","👩🏿‍🌾","👩🏿‍🍳","👩🏿‍🍼","👩🏿‍🎓","👩🏿‍🎤","👩🏿‍🎨","👩🏿‍🏫","👩🏿‍🏭","👩🏿‍💻","👩🏿‍💼","👩🏿‍🔧","👩🏿‍🔬","👩🏿‍🚀","👩🏿‍🚒","👩🏿‍🤝‍👨🏻","👩🏿‍🤝‍👨🏼","👩🏿‍🤝‍👨🏽","👩🏿‍🤝‍👨🏾","👩🏿‍🤝‍👩🏻","👩🏿‍🤝‍👩🏼","👩🏿‍🤝‍👩🏽","👩🏿‍🤝‍👩🏾","👩🏿‍🦯","👩🏿‍🦰","👩🏿‍🦱","👩🏿‍🦲","👩🏿‍🦳","👩🏿‍🦼","👩🏿‍🦽","👪","👫","👫🏻","👫🏼","👫🏽","👫🏾","👫🏿","👬","👬🏻","👬🏼","👬🏽","👬🏾","👬🏿","👭","👭🏻","👭🏼","👭🏽","👭🏾","👭🏿","👮","👮‍♀️","👮‍♂️","👮🏻","👮🏻‍♀️","👮🏻‍♂️","👮🏼","👮🏼‍♀️","👮🏼‍♂️","👮🏽","👮🏽‍♀️","👮🏽‍♂️","👮🏾","👮🏾‍♀️","👮🏾‍♂️","👮🏿","👮🏿‍♀️","👮🏿‍♂️","👯","👯‍♀️","👯‍♂️","👰","👰‍♀️","👰‍♂️","👰🏻","👰🏻‍♀️","👰🏻‍♂️","👰🏼","👰🏼‍♀️","👰🏼‍♂️","👰🏽","👰🏽‍♀️","👰🏽‍♂️","👰🏾","👰🏾‍♀️","👰🏾‍♂️","👰🏿","👰🏿‍♀️","👰🏿‍♂️","👱","👱‍♀️","👱‍♂️","👱🏻","👱🏻‍♀️","👱🏻‍♂️","👱🏼","👱🏼‍♀️","👱🏼‍♂️","👱🏽","👱🏽‍♀️","👱🏽‍♂️","👱🏾","👱🏾‍♀️","👱🏾‍♂️","👱🏿","👱🏿‍♀️","👱🏿‍♂️","👲","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿","👳","👳‍♀️","👳‍♂️","👳🏻","👳🏻‍♀️","👳🏻‍♂️","👳🏼","👳🏼‍♀️","👳🏼‍♂️","👳🏽","👳🏽‍♀️","👳🏽‍♂️","👳🏾","👳🏾‍♀️","👳🏾‍♂️","👳🏿","👳🏿‍♀️","👳🏿‍♂️","👴","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿","👵","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿","👶","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿","👷","👷‍♀️","👷‍♂️","👷🏻","👷🏻‍♀️","👷🏻‍♂️","👷🏼","👷🏼‍♀️","👷🏼‍♂️","👷🏽","👷🏽‍♀️","👷🏽‍♂️","👷🏾","👷🏾‍♀️","👷🏾‍♂️","👷🏿","👷🏿‍♀️","👷🏿‍♂️","👸","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿","👹","👺","👻","👼","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿","👽","👾","👿","💀","💁","💁‍♀️","💁‍♂️","💁🏻","💁🏻‍♀️","💁🏻‍♂️","💁🏼","💁🏼‍♀️","💁🏼‍♂️","💁🏽","💁🏽‍♀️","💁🏽‍♂️","💁🏾","💁🏾‍♀️","💁🏾‍♂️","💁🏿","💁🏿‍♀️","💁🏿‍♂️","💂","💂‍♀️","💂‍♂️","💂🏻","💂🏻‍♀️","💂🏻‍♂️","💂🏼","💂🏼‍♀️","💂🏼‍♂️","💂🏽","💂🏽‍♀️","💂🏽‍♂️","💂🏾","💂🏾‍♀️","💂🏾‍♂️","💂🏿","💂🏿‍♀️","💂🏿‍♂️","💃","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","💄","💅","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿","💆","💆‍♀️","💆‍♂️","💆🏻","💆🏻‍♀️","💆🏻‍♂️","💆🏼","💆🏼‍♀️","💆🏼‍♂️","💆🏽","💆🏽‍♀️","💆🏽‍♂️","💆🏾","💆🏾‍♀️","💆🏾‍♂️","💆🏿","💆🏿‍♀️","💆🏿‍♂️","💇","💇‍♀️","💇‍♂️","💇🏻","💇🏻‍♀️","💇🏻‍♂️","💇🏼","💇🏼‍♀️","💇🏼‍♂️","💇🏽","💇🏽‍♀️","💇🏽‍♂️","💇🏾","💇🏾‍♀️","💇🏾‍♂️","💇🏿","💇🏿‍♀️","💇🏿‍♂️","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿","💫","💬","💭","💮","💯","💰","💱","💲","💳","💴","💵","💶","💷","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📬","📭","📮","📯","📰","📱","📲","📳","📴","📵","📶","📷","📸","📹","📺","📻","📼","📽️","📿","🔀","🔁","🔂","🔃","🔄","🔅","🔆","🔇","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔬","🔭","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕉️","🕊️","🕋","🕌","🕍","🕎","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧","🕯️","🕰️","🕳️","🕴🏻","🕴🏼","🕴🏽","🕴🏾","🕴🏿","🕴️","🕵🏻","🕵🏻‍♀️","🕵🏻‍♂️","🕵🏼","🕵🏼‍♀️","🕵🏼‍♂️","🕵🏽","🕵🏽‍♀️","🕵🏽‍♂️","🕵🏾","🕵🏾‍♀️","🕵🏾‍♂️","🕵🏿","🕵🏿‍♀️","🕵🏿‍♂️","🕵️","🕵️‍♀️","🕵️‍♂️","🕶️","🕷️","🕸️","🕹️","🕺","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿","🖇️","🖊️","🖋️","🖌️","🖍️","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿","🖐️","🖕","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿","🖖","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿","🖤","🖥️","🖨️","🖱️","🖲️","🖼️","🗂️","🗃️","🗄️","🗑️","🗒️","🗓️","🗜️","🗝️","🗞️","🗡️","🗣️","🗨️","🗯️","🗳️","🗺️","🗻","🗼","🗽","🗾","🗿","😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄","🙅","🙅‍♀️","🙅‍♂️","🙅🏻","🙅🏻‍♀️","🙅🏻‍♂️","🙅🏼","🙅🏼‍♀️","🙅🏼‍♂️","🙅🏽","🙅🏽‍♀️","🙅🏽‍♂️","🙅🏾","🙅🏾‍♀️","🙅🏾‍♂️","🙅🏿","🙅🏿‍♀️","🙅🏿‍♂️","🙆","🙆‍♀️","🙆‍♂️","🙆🏻","🙆🏻‍♀️","🙆🏻‍♂️","🙆🏼","🙆🏼‍♀️","🙆🏼‍♂️","🙆🏽","🙆🏽‍♀️","🙆🏽‍♂️","🙆🏾","🙆🏾‍♀️","🙆🏾‍♂️","🙆🏿","🙆🏿‍♀️","🙆🏿‍♂️","🙇","🙇‍♀️","🙇‍♂️","🙇🏻","🙇🏻‍♀️","🙇🏻‍♂️","🙇🏼","🙇🏼‍♀️","🙇🏼‍♂️","🙇🏽","🙇🏽‍♀️","🙇🏽‍♂️","🙇🏾","🙇🏾‍♀️","🙇🏾‍♂️","🙇🏿","🙇🏿‍♀️","🙇🏿‍♂️","🙈","🙉","🙊","🙋","🙋‍♀️","🙋‍♂️","🙋🏻","🙋🏻‍♀️","🙋🏻‍♂️","🙋🏼","🙋🏼‍♀️","🙋🏼‍♂️","🙋🏽","🙋🏽‍♀️","🙋🏽‍♂️","🙋🏾","🙋🏾‍♀️","🙋🏾‍♂️","🙋🏿","🙋🏿‍♀️","🙋🏿‍♂️","🙌","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿","🙍","🙍‍♀️","🙍‍♂️","🙍🏻","🙍🏻‍♀️","🙍🏻‍♂️","🙍🏼","🙍🏼‍♀️","🙍🏼‍♂️","🙍🏽","🙍🏽‍♀️","🙍🏽‍♂️","🙍🏾","🙍🏾‍♀️","🙍🏾‍♂️","🙍🏿","🙍🏿‍♀️","🙍🏿‍♂️","🙎","🙎‍♀️","🙎‍♂️","🙎🏻","🙎🏻‍♀️","🙎🏻‍♂️","🙎🏼","🙎🏼‍♀️","🙎🏼‍♂️","🙎🏽","🙎🏽‍♀️","🙎🏽‍♂️","🙎🏾","🙎🏾‍♀️","🙎🏾‍♂️","🙎🏿","🙎🏿‍♀️","🙎🏿‍♂️","🙏","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣","🚣‍♀️","🚣‍♂️","🚣🏻","🚣🏻‍♀️","🚣🏻‍♂️","🚣🏼","🚣🏼‍♀️","🚣🏼‍♂️","🚣🏽","🚣🏽‍♀️","🚣🏽‍♂️","🚣🏾","🚣🏾‍♀️","🚣🏾‍♂️","🚣🏿","🚣🏿‍♀️","🚣🏿‍♂️","🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴","🚴‍♀️","🚴‍♂️","🚴🏻","🚴🏻‍♀️","🚴🏻‍♂️","🚴🏼","🚴🏼‍♀️","🚴🏼‍♂️","🚴🏽","🚴🏽‍♀️","🚴🏽‍♂️","🚴🏾","🚴🏾‍♀️","🚴🏾‍♂️","🚴🏿","🚴🏿‍♀️","🚴🏿‍♂️","🚵","🚵‍♀️","🚵‍♂️","🚵🏻","🚵🏻‍♀️","🚵🏻‍♂️","🚵🏼","🚵🏼‍♀️","🚵🏼‍♂️","🚵🏽","🚵🏽‍♀️","🚵🏽‍♂️","🚵🏾","🚵🏾‍♀️","🚵🏾‍♂️","🚵🏿","🚵🏿‍♀️","🚵🏿‍♂️","🚶","🚶‍♀️","🚶‍♂️","🚶🏻","🚶🏻‍♀️","🚶🏻‍♂️","🚶🏼","🚶🏼‍♀️","🚶🏼‍♂️","🚶🏽","🚶🏽‍♀️","🚶🏽‍♂️","🚶🏾","🚶🏾‍♀️","🚶🏾‍♂️","🚶🏿","🚶🏿‍♀️","🚶🏿‍♂️","🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛁","🛂","🛃","🛄","🛅","🛋️","🛌","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛖","🛗","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🛻","🛼","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤌","🤌🏻","🤌🏼","🤌🏽","🤌🏾","🤌🏿","🤍","🤎","🤏","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤙","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤚","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤛","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤜","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤝","🤞","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤟","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤠","🤡","🤢","🤣","🤤","🤥","🤦","🤦‍♀️","🤦‍♂️","🤦🏻","🤦🏻‍♀️","🤦🏻‍♂️","🤦🏼","🤦🏼‍♀️","🤦🏼‍♂️","🤦🏽","🤦🏽‍♀️","🤦🏽‍♂️","🤦🏾","🤦🏾‍♀️","🤦🏾‍♂️","🤦🏿","🤦🏿‍♀️","🤦🏿‍♂️","🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤱","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤲","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤳","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤴","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤵","🤵‍♀️","🤵‍♂️","🤵🏻","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏼","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏽","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏾","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏿","🤵🏿‍♀️","🤵🏿‍♂️","🤶","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🤷","🤷‍♀️","🤷‍♂️","🤷🏻","🤷🏻‍♀️","🤷🏻‍♂️","🤷🏼","🤷🏼‍♀️","🤷🏼‍♂️","🤷🏽","🤷🏽‍♀️","🤷🏽‍♂️","🤷🏾","🤷🏾‍♀️","🤷🏾‍♂️","🤷🏿","🤷🏿‍♀️","🤷🏿‍♂️","🤸","🤸‍♀️","🤸‍♂️","🤸🏻","🤸🏻‍♀️","🤸🏻‍♂️","🤸🏼","🤸🏼‍♀️","🤸🏼‍♂️","🤸🏽","🤸🏽‍♀️","🤸🏽‍♂️","🤸🏾","🤸🏾‍♀️","🤸🏾‍♂️","🤸🏿","🤸🏿‍♀️","🤸🏿‍♂️","🤹","🤹‍♀️","🤹‍♂️","🤹🏻","🤹🏻‍♀️","🤹🏻‍♂️","🤹🏼","🤹🏼‍♀️","🤹🏼‍♂️","🤹🏽","🤹🏽‍♀️","🤹🏽‍♂️","🤹🏾","🤹🏾‍♀️","🤹🏾‍♂️","🤹🏿","🤹🏿‍♀️","🤹🏿‍♂️","🤺","🤼","🤼‍♀️","🤼‍♂️","🤽","🤽‍♀️","🤽‍♂️","🤽🏻","🤽🏻‍♀️","🤽🏻‍♂️","🤽🏼","🤽🏼‍♀️","🤽🏼‍♂️","🤽🏽","🤽🏽‍♀️","🤽🏽‍♂️","🤽🏾","🤽🏾‍♀️","🤽🏾‍♂️","🤽🏿","🤽🏿‍♀️","🤽🏿‍♂️","🤾","🤾‍♀️","🤾‍♂️","🤾🏻","🤾🏻‍♀️","🤾🏻‍♂️","🤾🏼","🤾🏼‍♀️","🤾🏼‍♂️","🤾🏽","🤾🏽‍♀️","🤾🏽‍♂️","🤾🏾","🤾🏾‍♀️","🤾🏾‍♂️","🤾🏿","🤾🏿‍♀️","🤾🏿‍♂️","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥲","🥳","🥴","🥵","🥶","🥷","🥷🏻","🥷🏼","🥷🏽","🥷🏾","🥷🏿","🥸","🥺","🥻","🥼","🥽","🥾","🥿","🦀","🦁","🦂","🦃","🦄","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🦒","🦓","🦔","🦕","🦖","🦗","🦘","🦙","🦚","🦛","🦜","🦝","🦞","🦟","🦠","🦡","🦢","🦣","🦤","🦥","🦦","🦧","🦨","🦩","🦪","🦫","🦬","🦭","🦮","🦯","🦰","🦱","🦲","🦳","🦴","🦵","🦵🏻","🦵🏼","🦵🏽","🦵🏾","🦵🏿","🦶","🦶🏻","🦶🏼","🦶🏽","🦶🏾","🦶🏿","🦷","🦸","🦸‍♀️","🦸‍♂️","🦸🏻","🦸🏻‍♀️","🦸🏻‍♂️","🦸🏼","🦸🏼‍♀️","🦸🏼‍♂️","🦸🏽","🦸🏽‍♀️","🦸🏽‍♂️","🦸🏾","🦸🏾‍♀️","🦸🏾‍♂️","🦸🏿","🦸🏿‍♀️","🦸🏿‍♂️","🦹","🦹‍♀️","🦹‍♂️","🦹🏻","🦹🏻‍♀️","🦹🏻‍♂️","🦹🏼","🦹🏼‍♀️","🦹🏼‍♂️","🦹🏽","🦹🏽‍♀️","🦹🏽‍♂️","🦹🏾","🦹🏾‍♀️","🦹🏾‍♂️","🦹🏿","🦹🏿‍♀️","🦹🏿‍♂️","🦺","🦻","🦻🏻","🦻🏼","🦻🏽","🦻🏾","🦻🏿","🦼","🦽","🦾","🦿","🧀","🧁","🧂","🧃","🧄","🧅","🧆","🧇","🧈","🧉","🧊","🧋","🧍","🧍‍♀️","🧍‍♂️","🧍🏻","🧍🏻‍♀️","🧍🏻‍♂️","🧍🏼","🧍🏼‍♀️","🧍🏼‍♂️","🧍🏽","🧍🏽‍♀️","🧍🏽‍♂️","🧍🏾","🧍🏾‍♀️","🧍🏾‍♂️","🧍🏿","🧍🏿‍♀️","🧍🏿‍♂️","🧎","🧎‍♀️","🧎‍♂️","🧎🏻","🧎🏻‍♀️","🧎🏻‍♂️","🧎🏼","🧎🏼‍♀️","🧎🏼‍♂️","🧎🏽","🧎🏽‍♀️","🧎🏽‍♂️","🧎🏾","🧎🏾‍♀️","🧎🏾‍♂️","🧎🏿","🧎🏿‍♀️","🧎🏿‍♂️","🧏","🧏‍♀️","🧏‍♂️","🧏🏻","🧏🏻‍♀️","🧏🏻‍♂️","🧏🏼","🧏🏼‍♀️","🧏🏼‍♂️","🧏🏽","🧏🏽‍♀️","🧏🏽‍♂️","🧏🏾","🧏🏾‍♀️","🧏🏾‍♂️","🧏🏿","🧏🏿‍♀️","🧏🏿‍♂️","🧐","🧑","🧑‍⚕️","🧑‍⚖️","🧑‍✈️","🧑‍🌾","🧑‍🍳","🧑‍🍼","🧑‍🎄","🧑‍🎓","🧑‍🎤","🧑‍🎨","🧑‍🏫","🧑‍🏭","🧑‍💻","🧑‍💼","🧑‍🔧","🧑‍🔬","🧑‍🚀","🧑‍🚒","🧑‍🤝‍🧑","🧑‍🦯","🧑‍🦰","🧑‍🦱","🧑‍🦲","🧑‍🦳","🧑‍🦼","🧑‍🦽","🧑🏻","🧑🏻‍⚕️","🧑🏻‍⚖️","🧑🏻‍✈️","🧑🏻‍🌾","🧑🏻‍🍳","🧑🏻‍🍼","🧑🏻‍🎄","🧑🏻‍🎓","🧑🏻‍🎤","🧑🏻‍🎨","🧑🏻‍🏫","🧑🏻‍🏭","🧑🏻‍💻","🧑🏻‍💼","🧑🏻‍🔧","🧑🏻‍🔬","🧑🏻‍🚀","🧑🏻‍🚒","🧑🏻‍🤝‍🧑🏻","🧑🏻‍🤝‍🧑🏼","🧑🏻‍🤝‍🧑🏽","🧑🏻‍🤝‍🧑🏾","🧑🏻‍🤝‍🧑🏿","🧑🏻‍🦯","🧑🏻‍🦰","🧑🏻‍🦱","🧑🏻‍🦲","🧑🏻‍🦳","🧑🏻‍🦼","🧑🏻‍🦽","🧑🏼","🧑🏼‍⚕️","🧑🏼‍⚖️","🧑🏼‍✈️","🧑🏼‍🌾","🧑🏼‍🍳","🧑🏼‍🍼","🧑🏼‍🎄","🧑🏼‍🎓","🧑🏼‍🎤","🧑🏼‍🎨","🧑🏼‍🏫","🧑🏼‍🏭","🧑🏼‍💻","🧑🏼‍💼","🧑🏼‍🔧","🧑🏼‍🔬","🧑🏼‍🚀","🧑🏼‍🚒","🧑🏼‍🤝‍🧑🏻","🧑🏼‍🤝‍🧑🏼","🧑🏼‍🤝‍🧑🏽","🧑🏼‍🤝‍🧑🏾","🧑🏼‍🤝‍🧑🏿","🧑🏼‍🦯","🧑🏼‍🦰","🧑🏼‍🦱","🧑🏼‍🦲","🧑🏼‍🦳","🧑🏼‍🦼","🧑🏼‍🦽","🧑🏽","🧑🏽‍⚕️","🧑🏽‍⚖️","🧑🏽‍✈️","🧑🏽‍🌾","🧑🏽‍🍳","🧑🏽‍🍼","🧑🏽‍🎄","🧑🏽‍🎓","🧑🏽‍🎤","🧑🏽‍🎨","🧑🏽‍🏫","🧑🏽‍🏭","🧑🏽‍💻","🧑🏽‍💼","🧑🏽‍🔧","🧑🏽‍🔬","🧑🏽‍🚀","🧑🏽‍🚒","🧑🏽‍🤝‍🧑🏻","🧑🏽‍🤝‍🧑🏼","🧑🏽‍🤝‍🧑🏽","🧑🏽‍🤝‍🧑🏾","🧑🏽‍🤝‍🧑🏿","🧑🏽‍🦯","🧑🏽‍🦰","🧑🏽‍🦱","🧑🏽‍🦲","🧑🏽‍🦳","🧑🏽‍🦼","🧑🏽‍🦽","🧑🏾","🧑🏾‍⚕️","🧑🏾‍⚖️","🧑🏾‍✈️","🧑🏾‍🌾","🧑🏾‍🍳","🧑🏾‍🍼","🧑🏾‍🎄","🧑🏾‍🎓","🧑🏾‍🎤","🧑🏾‍🎨","🧑🏾‍🏫","🧑🏾‍🏭","🧑🏾‍💻","🧑🏾‍💼","🧑🏾‍🔧","🧑🏾‍🔬","🧑🏾‍🚀","🧑🏾‍🚒","🧑🏾‍🤝‍🧑🏻","🧑🏾‍🤝‍🧑🏼","🧑🏾‍🤝‍🧑🏽","🧑🏾‍🤝‍🧑🏾","🧑🏾‍🤝‍🧑🏿","🧑🏾‍🦯","🧑🏾‍🦰","🧑🏾‍🦱","🧑🏾‍🦲","🧑🏾‍🦳","🧑🏾‍🦼","🧑🏾‍🦽","🧑🏿","🧑🏿‍⚕️","🧑🏿‍⚖️","🧑🏿‍✈️","🧑🏿‍🌾","🧑🏿‍🍳","🧑🏿‍🍼","🧑🏿‍🎄","🧑🏿‍🎓","🧑🏿‍🎤","🧑🏿‍🎨","🧑🏿‍🏫","🧑🏿‍🏭","🧑🏿‍💻","🧑🏿‍💼","🧑🏿‍🔧","🧑🏿‍🔬","🧑🏿‍🚀","🧑🏿‍🚒","🧑🏿‍🤝‍🧑🏻","🧑🏿‍🤝‍🧑🏼","🧑🏿‍🤝‍🧑🏽","🧑🏿‍🤝‍🧑🏾","🧑🏿‍🤝‍🧑🏿","🧑🏿‍🦯","🧑🏿‍🦰","🧑🏿‍🦱","🧑🏿‍🦲","🧑🏿‍🦳","🧑🏿‍🦼","🧑🏿‍🦽","🧒","🧒🏻","🧒🏼","🧒🏽","🧒🏾","🧒🏿","🧓","🧓🏻","🧓🏼","🧓🏽","🧓🏾","🧓🏿","🧔","🧔🏻","🧔🏼","🧔🏽","🧔🏾","🧔🏿","🧕","🧕🏻","🧕🏼","🧕🏽","🧕🏾","🧕🏿","🧖","🧖‍♀️","🧖‍♂️","🧖🏻","🧖🏻‍♀️","🧖🏻‍♂️","🧖🏼","🧖🏼‍♀️","🧖🏼‍♂️","🧖🏽","🧖🏽‍♀️","🧖🏽‍♂️","🧖🏾","🧖🏾‍♀️","🧖🏾‍♂️","🧖🏿","🧖🏿‍♀️","🧖🏿‍♂️","🧗","🧗‍♀️","🧗‍♂️","🧗🏻","🧗🏻‍♀️","🧗🏻‍♂️","🧗🏼","🧗🏼‍♀️","🧗🏼‍♂️","🧗🏽","🧗🏽‍♀️","🧗🏽‍♂️","🧗🏾","🧗🏾‍♀️","🧗🏾‍♂️","🧗🏿","🧗🏿‍♀️","🧗🏿‍♂️","🧘","🧘‍♀️","🧘‍♂️","🧘🏻","🧘🏻‍♀️","🧘🏻‍♂️","🧘🏼","🧘🏼‍♀️","🧘🏼‍♂️","🧘🏽","🧘🏽‍♀️","🧘🏽‍♂️","🧘🏾","🧘🏾‍♀️","🧘🏾‍♂️","🧘🏿","🧘🏿‍♀️","🧘🏿‍♂️","🧙","🧙‍♀️","🧙‍♂️","🧙🏻","🧙🏻‍♀️","🧙🏻‍♂️","🧙🏼","🧙🏼‍♀️","🧙🏼‍♂️","🧙🏽","🧙🏽‍♀️","🧙🏽‍♂️","🧙🏾","🧙🏾‍♀️","🧙🏾‍♂️","🧙🏿","🧙🏿‍♀️","🧙🏿‍♂️","🧚","🧚‍♀️","🧚‍♂️","🧚🏻","🧚🏻‍♀️","🧚🏻‍♂️","🧚🏼","🧚🏼‍♀️","🧚🏼‍♂️","🧚🏽","🧚🏽‍♀️","🧚🏽‍♂️","🧚🏾","🧚🏾‍♀️","🧚🏾‍♂️","🧚🏿","🧚🏿‍♀️","🧚🏿‍♂️","🧛","🧛‍♀️","🧛‍♂️","🧛🏻","🧛🏻‍♀️","🧛🏻‍♂️","🧛🏼","🧛🏼‍♀️","🧛🏼‍♂️","🧛🏽","🧛🏽‍♀️","🧛🏽‍♂️","🧛🏾","🧛🏾‍♀️","🧛🏾‍♂️","🧛🏿","🧛🏿‍♀️","🧛🏿‍♂️","🧜","🧜‍♀️","🧜‍♂️","🧜🏻","🧜🏻‍♀️","🧜🏻‍♂️","🧜🏼","🧜🏼‍♀️","🧜🏼‍♂️","🧜🏽","🧜🏽‍♀️","🧜🏽‍♂️","🧜🏾","🧜🏾‍♀️","🧜🏾‍♂️","🧜🏿","🧜🏿‍♀️","🧜🏿‍♂️","🧝","🧝‍♀️","🧝‍♂️","🧝🏻","🧝🏻‍♀️","🧝🏻‍♂️","🧝🏼","🧝🏼‍♀️","🧝🏼‍♂️","🧝🏽","🧝🏽‍♀️","🧝🏽‍♂️","🧝🏾","🧝🏾‍♀️","🧝🏾‍♂️","🧝🏿","🧝🏿‍♀️","🧝🏿‍♂️","🧞","🧞‍♀️","🧞‍♂️","🧟","🧟‍♀️","🧟‍♂️","🧠","🧡","🧢","🧣","🧤","🧥","🧦","🧧","🧨","🧩","🧪","🧫","🧬","🧭","🧮","🧯","🧰","🧱","🧲","🧳","🧴","🧵","🧶","🧷","🧸","🧹","🧺","🧻","🧼","🧽","🧾","🧿","🩰","🩱","🩲","🩳","🩴","🩸","🩹","🩺","🪀","🪁","🪂","🪃","🪄","🪅","🪆","🪐","🪑","🪒","🪓","🪔","🪕","🪖","🪗","🪘","🪙","🪚","🪛","🪜","🪝","🪞","🪟","🪠","🪡","🪢","🪣","🪤","🪥","🪦","🪧","🪨","🪰","🪱","🪲","🪳","🪴","🪵","🪶","🫀","🫁","🫂","🫐","🫑","🫒","🫓","🫔","🫕","🫖"]},29989:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDisappearingMessageSettingOthersString=function(e=0,t){return o(n.SettingChangeByOthers,e,t)},t.getDisappearingMessageSettingYouString=function(e=0){return o(n.SettingChangeByYou,e)},t.getDisappearingMessageSettingUnknownString=function(e=0){return o(n.SettingChangeByUnknown,e)},t.getDisappearingMessageSettingOthersAsAdminString=function(e=0,t){return o(n.SettingChangeByOthersAsAdmin,e,t)},t.getDisappearingMessageSettingYouAsAdminString=function(e=0){return o(n.SettingChangeByYouAsAdmin,e)},t.getDisappearingMessageSettingUnknownAsAdminString=function(e=0){return o(n.SettingChangeByUnknownAsAdmin,e)},t.getDisappearingMessageDurationString=function(e=0){return o(n.Duration,e)},t.getDisappearingMessageOutOfSyncInfoString=function(e=0){return o(n.OutOfSyncInfo,e)},t.getDisappearingMessageExplanationString=function(e=0){return o(n.Explanation,e)},t.getDisappearingModeOtherString=function(e=0,t){return o(n.ModeChangeByOthers,e,t)},t.getDisappearingModeYouString=function(e=0){return o(n.ModeChangeByYou,e)},t.EphemeralL10n=function(e){var{type:t,numSeconds:a=0,name:r}=e;if(a<0)return __LOG__(4,void 0,new Error,!0)`getEphemeralL10nComponent ${t} is given invalid duration ${a}`,SEND_LOGS("invalid-duration"),null;if(0===a)return function(e,t){return e===n.SettingChangeByOthers&&null!=t?i.default.createElement(l.default,{id:736,params:{name:t}}):e===n.SettingChangeByYou?i.default.createElement(l.default,{id:731}):e===n.SettingChangeByUnknown?i.default.createElement(l.default,{id:726}):e===n.SettingChangeByOthersAsAdmin&&null!=t?i.default.createElement(l.default,{id:752,params:{name:t}}):e===n.SettingChangeByYouAsAdmin?i.default.createElement(l.default,{id:747}):e===n.SettingChangeByUnknownAsAdmin?i.default.createElement(l.default,{id:742}):e===n.Duration?i.default.createElement(l.default,{id:779}):e===n.OutOfSyncInfo?i.default.createElement(l.default,{id:765}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOffL10nComponent is given invalid type ${e}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,r);if(a<=60)return function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?i.default.createElement(l.default,{id:740,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYou?i.default.createElement(l.default,{id:735,params:{number:t},plural:t}):e===n.SettingChangeByUnknown?i.default.createElement(l.default,{id:730,params:{number:t},plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?i.default.createElement(l.default,{id:756,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYouAsAdmin?i.default.createElement(l.default,{id:751,params:{number:t},plural:t}):e===n.SettingChangeByUnknownAsAdmin?i.default.createElement(l.default,{id:746,params:{number:t},plural:t}):e===n.Duration?i.default.createElement(l.default,{id:784,params:{number:t},plural:t}):e===n.OutOfSyncInfo?i.default.createElement(l.default,{id:769,params:{number:t},plural:t}):e===n.Explanation?i.default.createElement(l.default,{id:762,params:{number:t},plural:t}):e===n.ModeChangeByOthers&&null!=a?i.default.createElement(l.default,{id:681,params:{name:a,number:t},plural:t}):e===n.ModeChangeByYou?i.default.createElement(l.default,{id:685,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnSecondsL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,a,r);if(a<=3600){var s=Math.floor(a/60);return function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?i.default.createElement(l.default,{id:739,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYou?i.default.createElement(l.default,{id:734,params:{number:t},plural:t}):e===n.SettingChangeByUnknown?i.default.createElement(l.default,{id:729,params:{number:t},plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?i.default.createElement(l.default,{id:755,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYouAsAdmin?i.default.createElement(l.default,{id:750,params:{number:t},plural:t}):e===n.SettingChangeByUnknownAsAdmin?i.default.createElement(l.default,{id:745,params:{number:t},plural:t}):e===n.Duration?i.default.createElement(l.default,{id:783,params:{number:t},plural:t}):e===n.OutOfSyncInfo?i.default.createElement(l.default,{id:768,params:{number:t},plural:t}):e===n.Explanation?i.default.createElement(l.default,{id:761,params:{number:t},plural:t}):e===n.ModeChangeByOthers&&null!=a?i.default.createElement(l.default,{id:680,params:{name:a,number:t},plural:t}):e===n.ModeChangeByYou?i.default.createElement(l.default,{id:684,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnMinutesL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,s,r)}if(a<=86400){var o=Math.floor(a/60/60);return function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?i.default.createElement(l.default,{id:738,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYou?i.default.createElement(l.default,{id:733,params:{number:t},plural:t}):e===n.SettingChangeByUnknown?i.default.createElement(l.default,{id:728,params:{number:t},plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?i.default.createElement(l.default,{id:754,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYouAsAdmin?i.default.createElement(l.default,{id:749,params:{number:t},plural:t}):e===n.SettingChangeByUnknownAsAdmin?i.default.createElement(l.default,{id:744,params:{number:t},plural:t}):e===n.Duration?i.default.createElement(l.default,{id:782,params:{number:t},plural:t}):e===n.OutOfSyncInfo?i.default.createElement(l.default,{id:767,params:{number:t},plural:t}):e===n.Explanation?i.default.createElement(l.default,{id:760,params:{number:t},plural:t}):e===n.ModeChangeByOthers&&null!=a?i.default.createElement(l.default,{id:679,params:{name:a,number:t},plural:t}):e===n.ModeChangeByYou?i.default.createElement(l.default,{id:683,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnHoursL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,o,r)}var d=Math.floor(a/24/60/60);return function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?i.default.createElement(l.default,{id:737,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYou?i.default.createElement(l.default,{id:732,params:{number:t},plural:t}):e===n.SettingChangeByUnknown?i.default.createElement(l.default,{id:727,params:{number:t},plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?i.default.createElement(l.default,{id:753,params:{name:a,number:t},plural:t}):e===n.SettingChangeByYouAsAdmin?i.default.createElement(l.default,{id:748,params:{number:t},plural:t}):e===n.SettingChangeByUnknownAsAdmin?i.default.createElement(l.default,{id:743,params:{number:t},plural:t}):e===n.Duration?i.default.createElement(l.default,{id:781,params:{number:t},plural:t}):e===n.OutOfSyncInfo?i.default.createElement(l.default,{id:766,params:{number:t},plural:t}):e===n.Explanation?i.default.createElement(l.default,{id:759,params:{number:t},plural:t}):e===n.ModeChangeByOthers&&null!=a?i.default.createElement(l.default,{id:678,params:{name:a,number:t},plural:t}):e===n.ModeChangeByYou?i.default.createElement(l.default,{id:682,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnDaysL10nComponent is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,d,r)},t.EphemeralStringType=void 0;var i=r(a(67294)),s=r(a(80162)),l=r(a(41849)),n=a(54302).Mirrored(["SettingChangeByOthers","SettingChangeByYou","SettingChangeByUnknown","SettingChangeByOthersAsAdmin","SettingChangeByYouAsAdmin","SettingChangeByUnknownAsAdmin","Duration","OutOfSyncInfo","Explanation","ModeChangeByOthers","ModeChangeByYou"]);function o(e,t=0,a){return t<0?(__LOG__(4,void 0,new Error,!0)`getEphemeralString ${e} is given invalid duration ${t}`,SEND_LOGS("invalid-duration"),""):0===t?function(e,t){return e===n.SettingChangeByOthers&&null!=t?s.default.t(736,{name:t}):e===n.SettingChangeByYou?s.default.t(731):e===n.SettingChangeByUnknown?s.default.t(726):e===n.SettingChangeByOthersAsAdmin&&null!=t?s.default.t(752,{name:t}):e===n.SettingChangeByYouAsAdmin?s.default.t(747):e===n.SettingChangeByUnknownAsAdmin?s.default.t(742):e===n.Duration?s.default.t(779):e===n.OutOfSyncInfo?s.default.t(765):(__LOG__(4,void 0,new Error,!0)`getEphemeralOffString is given invalid type ${e}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,a):t<=60?function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?s.default.t(740,{name:a,number:t,_plural:t}):e===n.SettingChangeByYou?s.default.t(735,{number:t,_plural:t}):e===n.SettingChangeByUnknown?s.default.t(730,{number:t,_plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?s.default.t(756,{name:a,number:t,_plural:t}):e===n.SettingChangeByYouAsAdmin?s.default.t(751,{number:t,_plural:t}):e===n.SettingChangeByUnknownAsAdmin?s.default.t(746,{number:t,_plural:t}):e===n.Duration?s.default.t(784,{number:t,_plural:t}):e===n.OutOfSyncInfo?s.default.t(769,{number:t,_plural:t}):e===n.Explanation?s.default.t(762,{number:t,_plural:t}):e===n.ModeChangeByOthers?s.default.t(681,{name:a,number:t,_plural:t}):e===n.ModeChangeByYou?s.default.t(685,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnSecondsString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,t,a):t<=3600?function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?s.default.t(739,{name:a,number:t,_plural:t}):e===n.SettingChangeByYou?s.default.t(734,{number:t,_plural:t}):e===n.SettingChangeByUnknown?s.default.t(729,{number:t,_plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?s.default.t(755,{name:a,number:t,_plural:t}):e===n.SettingChangeByYouAsAdmin?s.default.t(750,{number:t,_plural:t}):e===n.SettingChangeByUnknownAsAdmin?s.default.t(745,{number:t,_plural:t}):e===n.Duration?s.default.t(783,{number:t,_plural:t}):e===n.OutOfSyncInfo?s.default.t(768,{number:t,_plural:t}):e===n.Explanation?s.default.t(761,{number:t,_plural:t}):e===n.ModeChangeByOthers?s.default.t(680,{name:a,number:t,_plural:t}):e===n.ModeChangeByYou?s.default.t(684,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnMinutesString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60),a):t<=86400?function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?s.default.t(738,{name:a,number:t,_plural:t}):e===n.SettingChangeByYou?s.default.t(733,{number:t,_plural:t}):e===n.SettingChangeByUnknown?s.default.t(728,{number:t,_plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?s.default.t(754,{name:a,number:t,_plural:t}):e===n.SettingChangeByYouAsAdmin?s.default.t(749,{number:t,_plural:t}):e===n.SettingChangeByUnknownAsAdmin?s.default.t(744,{number:t,_plural:t}):e===n.Duration?s.default.t(782,{number:t,_plural:t}):e===n.OutOfSyncInfo?s.default.t(767,{number:t,_plural:t}):e===n.Explanation?s.default.t(760,{number:t,_plural:t}):e===n.ModeChangeByOthers?s.default.t(679,{name:a,number:t,_plural:t}):e===n.ModeChangeByYou?s.default.t(683,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnHoursString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60/60),a):function(e,t,a){return e===n.SettingChangeByOthers&&null!=a?s.default.t(737,{name:a,number:t,_plural:t}):e===n.SettingChangeByYou?s.default.t(732,{number:t,_plural:t}):e===n.SettingChangeByUnknown?s.default.t(727,{number:t,_plural:t}):e===n.SettingChangeByOthersAsAdmin&&null!=a?s.default.t(753,{name:a,number:t,_plural:t}):e===n.SettingChangeByYouAsAdmin?s.default.t(748,{number:t,_plural:t}):e===n.SettingChangeByUnknownAsAdmin?s.default.t(743,{number:t,_plural:t}):e===n.Duration?s.default.t(781,{number:t,_plural:t}):e===n.OutOfSyncInfo?s.default.t(766,{number:t,_plural:t}):e===n.Explanation?s.default.t(759,{number:t,_plural:t}):e===n.ModeChangeByOthers?s.default.t(678,{name:a,number:t,_plural:t}):e===n.ModeChangeByYou?s.default.t(682,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnDaysString is given type ${e} and name ${a}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/24/60/60),a)}t.EphemeralStringType=n},15330:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=function(e,t){var a=e.target.files||e.dataTransfer&&e.dataTransfer.files,r=a?Array.from(a):[];if(t){var n=("string"==typeof t?[t]:t).map((e=>new RegExp(e)));r=r.filter((e=>n.some((t=>e.type.match(t)))))}if(r.length)return Promise.resolve(r);var o=e.dataTransfer;if(o&&o.getData("text/uri-list"))return l.urlToFile(o.getData("text/uri-list")).then((e=>[(0,s.createFile)([e],"",{type:e.type})]));if(o&&o.getData("text/html")){var d=(new DOMParser).parseFromString(o.getData("text/html"),"text/html");if(d.createNodeIterator(d.childNodes[0],NodeFilter.SHOW_TEXT).nextNode()){if(o.getData("text/plain"))return Promise.reject(new i.MediaDragDropError("dropped html has text nodes"))}else{var u=d.getElementsByTagName("img");if(u.length)return l.urlToFile(u[0].src).then((e=>[(0,s.createFile)([e],"",{type:e.type})]))}}return Promise.resolve([])};var i=r(a(12536)),s=a(37470),l=r(a(56898))},61900:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AllowedFileExtensions",{enumerable:!0,get:function(){return h.AllowedFileExtensions}}),t.default=void 0;var i=r(a(67294)),s=r(a(92018)),l=r(a(33766)),n=r(a(51115)),o=r(a(75444)),d=a(35742),u=r(a(86411)),c=r(a(80162)),f=r(a(46842)),h=a(61302);var p=new class{downloadData(e,t,a){var r=window.URL.createObjectURL(e),i=(0,d.createDataLink)(r);return i.style.display="none",i.download=`${t}${a}`,document.body&&document.body.appendChild(i),i.click(),document.body&&document.body.removeChild(i),(0,f.default)(100).then((()=>{window.URL.revokeObjectURL(i.href)})),Promise.resolve()}initDownload(e){var t=e;if(!window.Modernizr.adownload){var a=c.default.t(2092,{chrome_homepage:o.default.BROWSER_LINK.CHROME,firefox_homepage:o.default.BROWSER_LINK.FIREFOX,opera_homepage:o.default.BROWSER_LINK.OPERA});return l.default.openModal(i.default.createElement(n.default,{onOK:()=>l.default.closeModal(),okText:c.default.t(1941)},a)),__LOG__(4,void 0,new Error,!0)`Assertion failed!`,void SEND_LOGS("safari, adownload is false in download mgr")}s.default.startDownloading(),(0,u.default)(t).then((e=>{e.url||e.blob||(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${Array.isArray(t)?"download a zip file":`download ${t.id.toString()} type ${t.type} with state ${t.mediaData&&t.mediaData.mediaStage}`}`,SEND_LOGS("download-url-creation-error"));var a=e.url||window.URL.createObjectURL(e.blob),r=(0,d.createDataLink)(a);r.download=e.name,r.style.display="none",Array.isArray(t)&&1===t.length&&(t=t[0]),r.href||(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${Array.isArray(t)?"download a zip file":`download ${t.id.toString()} type ${t.type} with state ${t.mediaData&&t.mediaData.mediaStage}`}`,SEND_LOGS("no-download-url")),document.body&&document.body.appendChild(r),r.click(),document.body&&document.body.removeChild(r),e.url||(0,f.default)(100).then((()=>{window.URL.revokeObjectURL(r.href)}))})).catch((e=>{__LOG__(3)`Download failed, error: ${String(e)}`}))}};t.default=p},61302:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;var r=a(54302)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=r},53360:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(48403)),s=r(a(30381)),l=r(a(44386)),n=r(a(75444)),o=r(a(80162)),d=a(5106),u=a(54865),c={getDefaultName(e){var t;if(e.type===n.default.MSG_TYPE.DOCUMENT){var a=(e.filename||"").trim();t=a||(e.caption||"").trim()||o.default.t(1598),a&&function(e){return/[\.].{1,4}$/.test(e)}(a)||(t=f(t,e))}else t=e.type===n.default.MSG_TYPE.VCARD?f(t=(e.vcardFormattedName||"").trim()||h(e),e):e.type===n.default.MSG_TYPE.MULTI_VCARD?f(t=e.vcardList?(0,u.getNameString)(e.vcardList):h(e),e):f(t=h(e),e);return t}};function f(e,t){var a=e,r=t.type===n.default.MSG_TYPE.VCARD||t.type===n.default.MSG_TYPE.MULTI_VCARD?"text/vcard":t.mimetype,i=(0,d.getExtension)(r);return a.endsWith(i)||(a+=i),a}function h(e){var t=s.default.unix(e.t).locale("en"),a=`${t.format("YYYY-MM-DD")} at ${t.format(l.default.getIs24Hour()?"HH.mm.ss":"h.mm.ss A")}`;return`WhatsApp ${(0,i.default)(e.type)} ${a}`}t.default=c},79027:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldedContactName=t.HeaderAndFooter=t.UntrustedGroupDesc=t.TrustedGroupDesc=t.FormattedGroupNotification=t.RawGroupNotification=t.FormattedNotification=t.RawNotification=t.ComposeBox=t.QuotedMention=t.Format=t.QuickReply=t.FTSMessage=t.LastMessage=t.SearchName=t.Search=t.Conversation=t.Compatibility=t.StatusV3Caption=t.StatusV3Text=t.LargeEmojiOnly=t.EmojiOnly=void 0;var r=a(12953);t.EmojiOnly=({selectable:e}={})=>[[[r.Emoji,{selectable:e}]]];t.LargeEmojiOnly=({selectable:e}={})=>[[[r.Emoji,{selectable:e,size:"large"}]]];t.StatusV3Text=({links:e,selectable:t}={})=>[[[r.Code,{selectable:t}]],[[r.Link,{links:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t,size:"xlarge"}]]];t.StatusV3Caption=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]];t.Compatibility=({selectable:e}={})=>[[[r.Emoji,{selectable:e}]]];t.Conversation=({mentions:e,links:t,selectable:a,trusted:i}={})=>[[[r.Code,{selectable:a}]],i?[[r.Link,{links:t,selectable:a}]]:null,e?[[r.Mention,{mentions:e,selectable:a}]]:null,[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Emoji,{selectable:a}]]].filter(Boolean);t.Search=({boundary:e,terms:t,selectable:a,mentions:i})=>[[[r.TextMention,{mentions:i,selectable:a}]],[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Highlight,{terms:t,boundary:e,selectable:a,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:a}]]];t.SearchName=({terms:e})=>[[[r.Highlight,{terms:e,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:!1}]]];t.LastMessage=({mentions:e,selectable:t}={})=>[[[r.Code,{selectable:t}]],e?[[r.TextMention,{mentions:e,selectable:t}]]:null,[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]].filter(Boolean);t.FTSMessage=({boundary:e,mentions:t,terms:a,selectable:i})=>[[[r.Code,{selectable:i}]],[[r.TextMention,{mentions:t,selectable:i}]],[[r.Bold,{selectable:i}],[r.Italic,{selectable:i}],[r.Strikethrough,{selectable:i}]],[[r.Highlight,{terms:a,boundary:e,selectable:i}]],[[r.Emoji,{selectable:i}]]];t.QuickReply=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]];t.Format=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.TextMention,{mentions:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]];t.QuotedMention=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.TextMention,{mentions:e,selectable:t,theme:{quoted:!0}}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]].filter(Boolean);t.ComposeBox=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Link,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoticon,{selectable:e}]]];t.RawNotification=({mentions:e,selectable:t})=>[[[r.RawMention,{mentions:e,selectable:t}]]];t.FormattedNotification=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.RawMention,{mentions:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]]].filter(Boolean);t.RawGroupNotification=({mentions:e,selectable:t,groupMetadata:a})=>[[[r.RawGroupMention,{mentions:e,selectable:t,groupMetadata:a}]]];t.FormattedGroupNotification=({mentions:e,selectable:t,groupMetadata:a})=>[[[r.Code,{selectable:t}]],[[r.RawGroupMention,{mentions:e,selectable:t,groupMetadata:a}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]]].filter(Boolean);t.TrustedGroupDesc=({links:e})=>{var t=!0;return[[[r.Code,{selectable:t}]],[[r.Link,{links:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]]};t.UntrustedGroupDesc=()=>{var e=!0;return[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]]};t.HeaderAndFooter=({links:e,selectable:t,trusted:a}={})=>[a?[[r.Link,{links:e,selectable:t}]]:null,[[r.Emoji,{selectable:t}]]].filter(Boolean);t.BoldedContactName=({selectable:e})=>[[[r.BoldFirstWord,{selectable:e}]],[[r.Emoji,{selectable:e}]]]},68666:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,l=1/0){return(0,s.default)(a,(0,i.default)(e,t,l),r)};var i=r(a(65849)),s=r(a(39471))},42338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,a){var r=2*e.length+t[1].length,i=t[0].length-r;return i>0&&(t.index+=i,t[0]=t[0].slice(i)),a.lastIndex--,t}}},67091:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableHeaderAndFooterFormatting=function(e,t){return{formatters:(0,r.HeaderAndFooter)({links:e,selectable:!0,trusted:t}),selectable:!0}};var r=a(79027)},84354:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,a){return class extends s.default{static match(r){return(0,i.default)(r,e,t,a)}}};var i=r(a(86163)),s=r(a(45456))},36e3:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0){var{index:a}=e,[r]=e,i=a+r.length-1,s=[a,a,i,i,e];if(t){var l=e[t];s[1]=a+r.indexOf(l),s[2]=s[1]+l.length-1}return s}},86163:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=0,r){var s,l=[];t.lastIndex=0;for(;(s=t.exec(e))&&t.lastIndex>0;)r&&(s=r(s,t)),s&&l.push((0,i.default)(s,a));return l};var i=r(a(36e3))},99375:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var i=r(a(79027));t.Configuration=i},45456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{static match(){throw new Error("Subclasses of `Mutator` must override `match()`")}static mutate(e){return e}}t.default=a,a.nestable=()=>!0,a.format=!0,a.fragment=!1,a.compatibility=!1,a.mutates=!1},245:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(42338)),l=r(a(25663)),n=r(a(84354)),o=(0,s.default)("*"),d=(0,n.default)(/(?:^|[\s\W_])\*([^\s\u20e3]|[^\s\u20e3][^\n]*?\S)\*(?=$|[[\s\W_])/g,1,o);t.default=class extends d{static jsx(e,t,{selectable:a=!1}){return i.default.createElement(l.default,{selectable:a},e)}}},54821:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(25663)),l=(0,r(a(84354)).default)(/^(\w*)\b/g);t.default=class extends l{static jsx(e,t,{selectable:a=!1}){return i.default.createElement(s.default,{selectable:a},e)}}},58939:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeCodeBlocks=t.isInsideCodeBlock=t.default=void 0;var i=r(a(67294)),s=r(a(3396)),l=r(a(84354)),n=/```([\s\S]*?\S[\s\S]*?)```/g,o=(0,l.default)(n,1),d=new Set(["ListItem","List"]);class u extends o{static jsx(e,t,{selectable:a=!1}){return i.default.createElement(s.default,{selectable:a},e)}}t.default=u,u.nestable=e=>d.has(e),u.format=!1;t.isInsideCodeBlock=e=>{var t=e.split(n).pop();return/```/.test(t)};t.removeCodeBlocks=e=>e.replace(n," ")},25663:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(69519);function l({children:e,selectable:t}){return i.default.createElement(s.SelectableStrong,{selectable:t,appTextTemplate:"*${appText}*"},e)}l.defaultProps={children:""};var n=l;t.default=n},58641:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(70873),n=r(a(67294)),o=i(a(48928)),d=i(a(68666)),u=a(69519),c=a(87167),f=i(a(72765));class h extends n.Component{render(){var{contact:e,onClick:t,theme:a,selectable:r}=this.props,i=e.id,f=!!a&&a.quoted,h=e.displayName,p=(0,l.dir)(h)||"auto",m=(0,d.default)(h,[[[o.default,{selectable:r}]]],c.JSXSerializer,void 0,1/0);return n.default.createElement(n.default.Fragment,null,n.default.createElement(u.SelectableSpan,{"data-jid":i.toString(),"data-display":h,className:(0,s.default)("matched-mention",{"quoted-mention":f,"inactive-mention":!t||f}),onClick:t,plainText:`@${h}`,selectable:r,selectAll:!0,appTextTemplate:`​${i.toString()}​`},n.default.createElement("span",{className:"at-symbol"},"@"),n.default.createElement("span",{dir:p},m)))}}h.CONCERNS={contact:["id","displayName"]},h.displayName="ChatTextMention";var p=(0,f.default)(h,h.CONCERNS);t.default=p},3396:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",selectable:t}){return i.default.createElement(s.SelectableCode,{selectable:t,appTextTemplate:"```${appText}```"},e)};var i=r(a(67294)),s=a(69519)},68153:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),l=i(a(930)),n=r(a(72572));t.default=({emoji:e,selectable:t,size:a})=>"xlarge"===a?s.default.createElement(n.default,{emoji:e,size:n.SIZE.XLARGE,element:"span",selectable:t}):s.default.createElement(l.default,{emoji:e,selectable:t,size:a})},21897:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(94184)),l=a(70873),n=r(a(67294)),o=i(a(48928)),d=i(a(68666)),u=i(a(77188)),c=a(69519),f=a(87167),h=i(a(72765));class p extends n.Component{_getNameToDisplay(){var{contact:e,groupMetadata:t}=this.props;return u.default.isDropLastNameEnabled()&&t&&t.hasUniqueShortNameMention(e)?e.shortName:e.displayName}render(){var{contact:e,onClick:t,theme:a,selectable:r}=this.props,i=e.id,u=!!a&&a.quoted,h=this._getNameToDisplay(),p=(0,l.dir)(h)||"auto",m=(0,d.default)(h,[[[o.default,{selectable:r}]]],f.JSXSerializer,void 0,1/0);return n.default.createElement(n.default.Fragment,null,n.default.createElement(c.SelectableSpan,{"data-jid":i.toString(),"data-display":h,className:(0,s.default)("matched-mention",{"quoted-mention":u,"inactive-mention":!t||u}),onClick:t,plainText:`@${h}`,selectable:r,selectAll:!0,appTextTemplate:`​${i.toString()}​`},n.default.createElement("span",{className:"at-symbol"},"@"),n.default.createElement("span",{dir:p},m)))}}p.CONCERNS={contact:["id","displayName","shortName","isMyContact"],groupMetadata:["uniqueShortNameMap"]},p.displayName="GroupTextMention";var m=(0,h.default)(p,p.CONCERNS);t.default=m},42885:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(69519);function l({children:e,selectable:t}){return i.default.createElement(s.SelectableSpan,{className:"matched-text",selectable:t},e)}l.defaultProps={children:""};var n=l;t.default=n},94067:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.createElement(s.default,e,e.children)};var i=r(a(67294)),s=r(a(76618))},7309:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(69519);function l({children:e,selectable:t}){return i.default.createElement(s.SelectableEm,{selectable:t,appTextTemplate:"_${appText}_"},e)}l.defaultProps={children:""};var n=l;t.default=n},76618:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(69519);function l({href:e,children:t,selectable:a}){return i.default.createElement(s.SelectableLink,{href:e,title:e,target:"_blank",rel:"noopener noreferrer",selectable:a},t)}l.defaultProps={children:""};var n=l;t.default=n},25293:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,isAtStart:a,selectable:r}){return s.default.createElement(s.default.Fragment,null,s.default.createElement(n.SelectableUl,{appTextTemplate:a?"${appText}":"\n${appText}",className:(0,i.default)({[l.default.inline]:t},l.default.ul),selectable:r},e))};var i=r(a(94184)),s=r(a(67294)),l=r(a(52812)),n=a(69519)},92769:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,selectable:a}){return s.default.createElement("li",{className:(0,i.default)({[l.default.inline]:t})},s.default.createElement(n.SelectableSpan,{selectable:a,appTextTemplate:"* ${appText}"},e))};var i=r(a(94184)),s=r(a(67294)),l=r(a(75759)),n=a(69519)},33224:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{mentionMeta:t,theme:a,selectable:r}=e;return i.default.createElement(s.default,{contact:t.contact,theme:a,selectable:r})};var i=r(a(67294)),s=r(a(73006))},20411:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=a(69519);function l({children:e,selectable:t}){return i.default.createElement(s.SelectableDel,{selectable:t,appTextTemplate:"~${appText}~"},e)}l.defaultProps={children:""};var n=l;t.default=n},94163:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(33766)),l=a(69519),n=r(a(72682));function o({link:e,children:t,selectable:a}){return i.default.createElement(l.SelectableLink,{onClick:()=>s.default.openModal(i.default.createElement(n.default,{link:e})),selectable:a,style:{cursor:"pointer"}},t)}o.defaultProps={children:""};var d=o;t.default=d},2496:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,l.useContext)(d.default);if(o.default.isDropLastNameEnabled()&&t)return l.default.createElement(u.default,(0,s.default)({},e,{groupMetadata:t}));return l.default.createElement(n.default,e)};var s=i(a(67154)),l=r(a(67294)),n=i(a(58641)),o=i(a(77188)),d=i(a(84891)),u=i(a(21897))},73006:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,theme:t,selectable:a}){var{isMe:r}=(0,o.default)(e,["id","isMe"]),d=r?void 0:()=>{(0,l.findChat)(e.id).then((e=>s.default.openChatBottom(e)))};return i.default.createElement(n.default,{contact:e,theme:t,selectable:a,onClick:d})};var i=r(a(67294)),s=r(a(33766)),l=a(77824),n=r(a(2496)),o=r(a(95607))},48928:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(5318)),l=r(a(68153)),n=r(a(86163)),o=r(a(45456)),d=a(96769);class u extends o.default{static jsx(e,[t],{size:a,selectable:r=!1}){return i.default.createElement(l.default,{emoji:t,size:a,selectable:r})}static match(e,t,a){var r=null!=a&&0!==a?a:e.length,i=(0,d.firstNCodepoints)(e,r);return(0,n.default)(i,s.default.emojiRegex(),0,c)}}function c(e){return s.default.getGlyphId(e[0])?e:null}t.default=u,u.compatibility=!0},17049:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(3522)),s=r(a(84354)),l=r(a(5318)),n=r(a(37491)),o={"(y)":"👍","(n)":"👎",":-)":"🙂",":-(":"🙁",":-p":"😛",":-|":"😐",":-\\":"😕",":-d":"😀",":-*":"😘","<3":"❤","^_^":"😁",">_<":"😆",";-)":"😉"},d=Object.keys(o).map(i.default).join("|"),u=new RegExp(`(^|\\s|\`\`\`|[*_~])((?:${d})+)(?=$|\\s|\`\`\`|[*_~])`,"ig"),c=new RegExp(`(${d})`,"i"),f=(0,s.default)(u,2,(function(e){var[,t]=e;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));class h extends f{static mutate(e){return e.split(c).map((e=>{var t=o[e.toLowerCase()];return t?l.default.getSkinToneBase(t)&&n.default.getVariant(t)||t:e})).join("")}}t.default=h,h.fragment=!0,h.mutates=!0},58506:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(3522)),s=r(a(67294)),l=r(a(86163)),n=r(a(42885)),o=r(a(80162)),d=r(a(45456));class u extends d.default{static match(e,t){if(!t)return[];var{terms:a,boundary:r=!1,ignoreDiacritics:s=!1}=t;if(!a.length)return[];var n=s&&o.default.isLatinAlphabetLanguage(e)&&a.every((e=>o.default.isLatinAlphabetLanguage(e)))&&!o.default.isRTL(),d=n?o.default.removeAccents(e):e;return(0,l.default)(d,function(e,t,a){var r=(a?e.map((e=>o.default.removeAccents(e))):e).map(i.default).join("|");if(o.default.isRTL())return new RegExp(`${t?"(?:^|\\b)":""}(\\S+)?(${r})(\\S+)?`,"ig");return new RegExp(`${t?"(?:^|\\b)":""}(${r})`,"ig")}(a,r,n))}}t.default=u,u.jsx=(e,t,{selectable:a})=>s.default.createElement(n.default,{selectable:a},e)},12953:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoldFirstWord",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Bold",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Emoji",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Emoticon",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Intern",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Italic",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Mention",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"RawMention",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"Strikethrough",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"TextMention",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"RawGroupMention",{enumerable:!0,get:function(){return E.default}});var i=r(a(54821)),s=r(a(245)),l=r(a(58939)),n=r(a(48928)),o=r(a(17049)),d=r(a(58506)),u=r(a(70815)),c=r(a(69124)),f=r(a(9087)),h=r(a(20559)),p=r(a(3656)),m=r(a(63990)),_=r(a(38648)),v=r(a(24226)),g=r(a(33107)),E=r(a(96609))},70815:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(84354)),l=r(a(94067)),n=(0,s.default)(/(^|\b|\s)(((#|t|T|d|D|p|P|s|S)([0-9]{3,16}))|([0-9a-fA-F]{8,40}))(?=$|\b)/g,2,(function(e){var[,t,,,,,a]=e;if(a&&(!o.test(a)||!d.test(a)))return null;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));t.default=class extends n{static jsx(e,t,{selectable:a=!1}){var r=function([,,,,e,t,a]){if(a)return`${u}${a.toLowerCase()}`;switch(e){case"T":case"t":case"#":return`${c}${t}`;case"D":case"d":return`${f}${t}`;case"P":case"p":return`${h}${t}`;case"S":case"s":return`${p}${t}`;default:return`${m}${e}${t}`}}(t);return i.default.createElement(l.default,{href:r,selectable:a},e)}};var o=/[a-fA-F]/,d=/[0-9]/;var u="https://internalfb.com/intern/bunny/?q=hash%20",c="https://internalfb.com/intern/tasks/?t=",f="https://internalfb.com/intern/diff/D",h="https://internalfb.com/intern/paste/P",p="https://internalfb.com/intern/sevmanager/view/s/",m="https://internalfb.com/intern/"},69124:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(42338)),l=r(a(84354)),n=r(a(7309)),o=(0,s.default)("_"),d=(0,l.default)(/(?:^|\s|_|[^\w\\])_(\S|\S[^\n]*?\S)_(?=$|[[\s\W_])/g,1,o);t.default=class extends d{static jsx(e,t,{selectable:a=!1}){return i.default.createElement(n.default,{selectable:a},e)}}},9087:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(245)),l=r(a(69124)),n=r(a(76618)),o=r(a(45456)),d=r(a(24226)),u=r(a(94163));class c extends o.default{static jsx(e,t,{selectable:a=!1}){var{href:r,suspiciousCharacters:s}=t;return s&&s.size?i.default.createElement(u.default,{link:t,selectable:a},e):i.default.createElement(n.default,{href:r,selectable:a},e)}}function f(e){var{index:t,url:a}=e,r=t+a.length-1;return[t,t,r,r,e]}function h(e,t){for(var a=0,r=0;a<e.length&&r<t.length;){var i=t[r][3]-e[a][3];if(i>0)a++;else if(i<0)r++;else{e[a][2]--,e[a][3]--;var s=e[a][5];s.href=s.href.slice(0,-1),s.path=s.path&&s.path.slice(0,-1),s.url=s.url.slice(0,-1),r++,a++}}}t.default=c,c.format=!1,c.match=(e,t)=>{if(!t)return[];var{links:a=[]}=t;return a.map(f)},c.conflictResolvers=new Map([[s.default,h],[l.default,h],[d.default,h]])},20559:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(84354)),l=r(a(25293)),n=(0,s.default)(/((?:^)(?:\* (?:[^\n]+)(?:\n(?:\* [^\n]+)){0,})(?:\n|$))/gm,0);class o extends n{static jsx(e,t,{selectable:a=!1,inline:r}){var s=0===t.index;return i.default.createElement(l.default,{inline:r,isAtStart:s,selectable:a},e)}}t.default=o,o.nestable=()=>!1},3656:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LAST_LIST_ITEM_REGEX=t.LIST_ITEM_DELIMITER=void 0;var i=r(a(67294)),s=r(a(84354)),l=r(a(92769));t.LIST_ITEM_DELIMITER="* ";t.LAST_LIST_ITEM_REGEX=/(?:^|\n)\* [^\n]+$/;var n=(0,s.default)(/(?:^)\* ([^\n]+(?:$))/gm,1),o=new Set(["List"]);class d extends n{static jsx(e,t,{selectable:a=!1,inline:r}){return i.default.createElement(l.default,{inline:r,selectable:a},e)}}t.default=d,d.nestable=e=>o.has(e),d.unformatDecorations={pre:"• "}},63990:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(3522)),s=r(a(41609)),l=r(a(67294)),n=r(a(86163)),o=r(a(33224)),d=r(a(45456));class u extends d.default{static match(e,t){if(!t)return[];var{mentions:a,groupMetadata:r}=t;if(!a||(0,s.default)(a))return[];for(var l,o,d=(l=a,o=Object.keys(l).map(i.default).join("|"),new RegExp(`(${o})`,"g")),u=(0,n.default)(e,d),c=0;c<u.length;++c)u[c][4]={contact:a[u[c][4][0]],groupMetadata:r};return u}static jsx(e,t,{selectable:a}){return l.default.createElement(o.default,{mentionMeta:t,selectable:a})}}t.default=u,u.format=!1},96609:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(77188)),s=r(a(63990));class l extends s.default{}t.default=l,l.mutates=!0,l.mutate=(e,t)=>{var{contact:a,groupMetadata:r}=t;return i.default.isDropLastNameEnabled()&&r&&r.hasUniqueShortNameMention(a)?`@${a.shortName}`:`@${a.displayName}`}},38648:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(63990));class s extends i.default{}t.default=s,s.mutates=!0,s.mutate=(e,{contact:t})=>`@${t.displayName}`},24226:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(42338)),l=r(a(84354)),n=r(a(20411)),o=(0,s.default)("_"),d=(0,l.default)(/(?:^|[\s\W_])~(\S|\S[^\n]*?\S)~(?=$|[[\s\W_])/g,1,o);t.default=class extends d{static jsx(e,t,{selectable:a}){return i.default.createElement(n.default,{selectable:a},e)}}},33107:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(67294)),s=r(a(63990)),l=r(a(2496));class n extends s.default{static jsx(e,{contact:t},{selectable:a,theme:r}){return i.default.createElement(l.default,{contact:t,selectable:a,theme:r})}}t.default=n},32734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;var a,r=[];for(;a=e.pop();){for(var[i,,,s,l]=a,[{nestable:n,compatibility:o},,d]=t[l],u=!0,{length:c}=r,f=c-1;f>=0;--f){var[,,h,p,m]=r[f];if(i>p)break;var[{mutates:_,format:v,compatibility:g,name:E},,S]=t[m];if(s>h){if(d<S&&r.splice(f,1))continue;u=!1;break}if(_&&!(u=!1))break;if(o)break;if((n(E)||g||!(d<S)||!r.splice(f,1))&&(!o&&!v)){u=!1;break}}u&&r.push(a)}return r}},41022:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],a=0;a<e.length;++a)for(var r=0;r<e[a].length;++r){var[i,s]=e[a][r];t.push([i,s,a])}return t}},65849:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=1/0){return d(e,(0,s.default)(t),a)},t._parse=d;var i=r(a(32734)),s=r(a(41022)),l=r(a(21811)),n=r(a(18212)),o=a(96769);function d(e,t,a=1/0){var r=(0,l.default)(e,t,a),s=r.length?(0,n.default)(e,(0,i.default)(r,t),t):{children:[{type:"text",value:e}]};return a<(0,o.numCodepoints)(e)&&u(s,{limit:a}),s}function u(e,t){if(!(t.limit<=0))if(e.type&&"text"===e.type)if(e.value.length>=t.limit){var a=(0,o.toArray)(e.value);a.length>=t.limit&&(a=a.slice(0,t.limit)),e.value=a.join(""),t.limit=t.limit-a.length}else t.limit=t.limit-e.value.length;else if(!e.type||"delimiter"!==e.type){for(var r=0;r<e.children.length&&(u(e.children[r],t),!(t.limit<=0));)r++;e.children=e.children.slice(0,r+1)}}},21811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=1/0){for(var r=[],i=0;i<t.length;++i){for(var[s,l]=t[i],n=s.match(e,l,a),o=[],{length:d}=n,u=0,c=n[u];u<d;c=n[++u])o[u]=[c[0],c[1],c[2],c[3],i,c[4]];o.length&&r.push(o)}for(var f=0;f<r.length;f++){var{conflictResolvers:h}=t[r[f][0][4]][0];if(h)for(var p=0;p<r.length;p++){var m=t[r[p][0][4]][0],_=h.get(m);_&&_(r[f],r[p])}}for(var v=[],g=0;g<r.length;++g)v[g]=r[g].length-1;var E=[],S=0;for(;r.length;){for(var C=0,y=-1;C<r.length;++C)r[C][v[C]][0]>y&&(S=C,y=r[C][v[C]][0]);E.push(r[S][v[S]]),--v[S]<0&&(r.splice(S,1),v.splice(S,1))}return E}},18212:(e,t,a)=>{"use strict";function r({format:e},t,a){for(var r=[],i=function(e){var t=e,a=[];do{t.mutator&&a.push(t.mutator)}while(t.parent&&(t=t.parent));return a}(a),s=0;s<t.length;++s)(e||t[s][0].compatibility)&&(i.includes(t[s][0])||r.push(t[s]));return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){for(var s={children:[]},l=0,n=s,o=0,d=0;d<t.length;++d){for(var u=t[d],[c,f]=u;n.parent&&c>(o=n.match[2]);){if(l<=o&&n.children.push({type:"text",value:e.substring(l,o+1)}),l=n.match[3]+1,n.mutator.fragment){var{children:h}=n.parent;h.pop(),h.push.apply(h,n.children)}o!==n.match[3]&&n.parent.children.push({type:"delimiter",value:e.substring(o+1,l)}),n=n.parent}l<c&&n.children.push({type:"text",value:e.substring(l,c)});var[p,m]=i[u[4]],{mutates:_}=p;l=f,c!==f&&n.children.push({type:"delimiter",value:e.substring(c,f)});var v={children:[],match:u,mutator:p,opts:m,parent:n};if(_){var g=e.substring(u[1],u[2]+1),E=p.mutate(g,u[5]),S=r(p,i,v),C=(0,a(65849)._parse)(E,S);v.children=C.children,l=u[2]+1}n.children.push(v),n=v}do{if(n.match){var[,,y,b]=n.match;if(l<=y&&n.children.push({type:"text",value:e.substring(l,y+1)}),l=b+1,n.mutator.fragment){var{children:M}=n.parent;M.pop(),M.push.apply(M,n.children)}y!==b&&n.parent.children.push({type:"delimiter",value:e.substring(y+1,l)})}}while(n.parent&&(n=n.parent)&&n.parent);l!==e.length&&n.children.push({type:"text",value:e.substring(l)});return s}},39471:(e,t)=>{"use strict";function a(e,t,r){return t.reduce(((t,i)=>(t.push(function(e,t,r){if(t.type){var{value:i}=t;switch(t.type){case"text":return e.onText(i,r);case"delimiter":return e.onDelimiter(i,r);default:throw new Error("Invalid node type")}}return e.onMutator(t.mutator,a(e,t.children,r),t.match[5],t.opts,r)}(e,i,r)),t)),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return e.onRoot(a(e,t.children,r),r)}},94169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{static onMutator(){throw new Error("Subclasses of `Serializer` must override `onMutator()`")}static onRoot(){throw new Error("Subclasses of `Serializer` must override `onRoot()`")}static onText(){throw new Error("Subclasses of `Serializer` must override `onText()`")}static onDelimiter(){throw new Error("Subclasses of `Serializer` must override `onDelimiter()`")}}},87167:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JSXSerializer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TextSerializer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"UnformatSerializer",{enumerable:!0,get:function(){return l.default}});var i=r(a(8266)),s=r(a(46940)),l=r(a(6099))},8266:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),s=r(a(31146)),l=r(a(94169));class n extends l.default{}function o(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];if(void 0!==r)if("string"!=typeof r){var s=`jsx-child-${a}`;t.push((0,i.cloneElement)(r,{key:s}))}else t.push(r)}return t}t.default=n,n.onText=s.default,n.onDelimiter=()=>{},n.onRoot=e=>o(e),n.onMutator=(e,t,a,r)=>e.jsx(o(t),a,r)},31146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e},46940:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94169));class s extends i.default{}t.default=s,s.onDelimiter=e=>e,s.onMutator=(e,t)=>t.join(""),s.onRoot=e=>e.join(""),s.onText=e=>e},6099:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(94169));class s extends i.default{}function l(e){return e.filter(Boolean).join("")}t.default=s,s.onDelimiter=()=>{},s.onMutator=(e,t)=>null!=e.unformatDecorations?l([e.unformatDecorations.pre,...t,e.unformatDecorations.post]):l(t),s.onRoot=e=>l(e),s.onText=e=>e},76818:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!0,a=!1){var r,i,n=e.safe();if(v.default.supportsFeature(v.default.F.MD_BACKEND)&&e.mdDowngrade&&a)return g.default.t(1905);switch(n.type){case b.BUTTONS_RESPONSE:case b.TEMPLATE_BUTTON_REPLY:case b.HSM:return t?(0,S.default)(e,e.body):e.body;case b.CIPHERTEXT:return g.default.t(1332);case b.REVOKED:return e.isSentByMe?g.default.t(1429):g.default.t(1427);case b.CHAT:if(e.isFromTemplate)return e.title?t?(0,S.default)(e,e.title+" "+e.body):"*"+e.title+"* "+e.body:t?(0,S.default)(e,e.body):e.body;if(e.isDynamicReplyButtonsMsg&&e.title){var T=M(e.body,e);if(null!=T)return t?(0,S.default)(e,e.title+"\n"+T):`*${e.title}*\n${T}`}return t?(0,S.default)(e,e.body):e.body;case b.IMAGE:if(n.isViewOnce)return(0,y.isViewed)(n)?g.default.t(1652):g.default.t(1644);var I=M(e.caption,e);return I?t?(0,S.default)(e,I):I:g.default.t(1801);case b.VIDEO:if(n.isViewOnce)return(0,y.isViewed)(n)?g.default.t(1652):g.default.t(1651);var P=M(e.caption,e);return P?t?(0,S.default)(e,P):P:e.isGif?"GIF":g.default.t(1806);case b.STICKER:return g.default.t(1805);case b.PTT:var A=l.default.durationStr(e.duration);return A||g.default.t(1807);case b.AUDIO:return g.default.t(1797);case b.LOCATION:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){var N=M(e.caption,e);return N?t?(0,S.default)(e,N):N:e.loc||g.default.t(1803)}return e.isLive?e.comment||g.default.t(1802):e.loc||g.default.t(1803);case b.GROUP_NOTIFICATION:case b.GP2:return(0,h.default)(e,a);case b.BROADCAST_NOTIFICATION:return(0,d.default)(e);case b.NOTIFICATION:return e.body;case b.VCARD:return e.vcardFormattedName||g.default.t(1798);case b.GROUPS_V4_INVITE:return v.default.supportsFeature(v.default.F.GROUPS_V_4_JOIN_PERMISSION)?g.default.t(916):g.default.t(545);case b.MULTI_VCARD:return(0,C.getNameString)(e.vcardList);case b.DOCUMENT:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){var O=e.pageCount>0?g.default.t(1799,{count:e.pageCount+"",_plural:e.pageCount}):null,D=M(e.caption,e);return D?t?(0,S.default)(e,D):D:(0,s.default)([D||g.default.t(1800),O]).join(" • ")}if(e.isVcardOverMmsDocument&&e.mediaData.parsedVcards)return function(e){if(e.length>1){var t=e.map((e=>(0,C.vcardGetNameFromParsed)(e))).filter(Boolean);return(0,C.getNameStringFromNames)(t)}return(0,C.vcardGetNameFromParsed)(e[0])||g.default.t(252)}(e.mediaData.parsedVcards);var w=e.pageCount>0?g.default.t(1799,{count:e.pageCount+"",_plural:e.pageCount}):null;return(0,s.default)([e.mediaData.filename||g.default.t(1800),w]).join(" • ");case b.E2E_NOTIFICATION:return(0,c.default)(n);case b.CALL_LOG:return(0,u.default)(e,!1);case b.PRODUCT:return e.text?t?(0,S.default)(e,e.text):e.text:g.default.t(1804);case b.OVERSIZED:return(0,m.formatOversizedMsgText)(e);case b.UNKNOWN:case b.INTERACTIVE:return(0,_.formatUnknownMsgText)(e);case b.PAYMENT:return function(e){switch(e.subtype){case"ciphertext":return g.default.t(1953);case"futureproof":return g.default.t(1955);case"send":var t=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?o.formatAmount1000(e.paymentCurrency,e.paymentAmount1000):g.default.t(1319))+t;case"request":var a=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?o.formatAmount1000(e.paymentCurrency,e.paymentAmount1000):g.default.t(1319))+a;default:return g.default.t(547)}}(e);case b.NOTIFICATION_TEMPLATE:return(0,p.default)(e);case b.PROTOCOL:return"ephemeral_setting"===e.subtype?(0,f.default)(e.ephemeralDuration||0,e.from,e.id.remote):"";case b.ORDER:return e.message||"";case b.LIST:var R,k;return(0,E.listMsgCanRender)(e)?[null===(R=e.list)||void 0===R?void 0:R.title,null===(k=e.list)||void 0===k?void 0:k.description,e.footer].filter(Boolean).join("\n"):(0,_.formatUnknownMsgText)(e);case b.LIST_RESPONSE:return`${(null===(r=e.listResponse)||void 0===r?void 0:r.title)||""} ${(null===(i=e.listResponse)||void 0===i?void 0:i.description)||""}`;default:return""}};var s=i(a(39693)),l=i(a(44386)),n=i(a(75444)),o=r(a(39017)),d=i(a(13429)),u=i(a(66265)),c=i(a(91893)),f=i(a(629)),h=i(a(5933)),p=i(a(76749)),m=a(29395),_=a(29804),v=i(a(77188)),g=i(a(80162)),E=a(75431),S=i(a(1097)),C=a(54865),y=a(69754),b=n.default.MSG_TYPE;function M(e,t){if(null==e)return null;var a=!0===t.isDynamicReplyButtonsMsg;return t.footer&&a?`${e}\n${t.footer}`:e}},29395:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatOversizedMsgText=function(){return s.default.isElectron?i.default.t(1315):i.default.t(1316)},t.formatOversizedMsgNotification=function(){return i.default.t(1316)};var i=r(a(80162)),s=r(a(89848))},13498:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r,i,n,I,P="",A=e.dir,N=e.safe(),O=!(null===(t=N.asViewOnce)||void 0===t?void 0:t.isViewOnce)&&S.default.getGlobalPreviews();!(0,_.getMaybeMeUser)().equals(e.from)&&e.isGroupMsg&&(P=e.displayName());switch(N.type){case T.CHAT:if(O)i=(0,y.default)(e,e.body);else if(e.isGroupMsg)i=P?g.default.t(950,{author:P}):g.default.t(949),P="";else{var D=e.chat;i=g.default.t(951,{unreadCount:g.default.n(D.unreadCount),_plural:D.unreadCount})}break;case T.IMAGE:n="",C.default.hasEmoji&&(n=N.isViewOnce?"1️⃣ ":"📷 "),i=n+(O&&(0,y.default)(e,e.caption)||g.default.t(1801));break;case T.PRODUCT:n=C.default.hasEmoji?"🛒 ":"",i=n+(e.text&&(0,y.default)(e,e.text)||g.default.t(1804));break;case T.STICKER:n=C.default.hasEmoji?"💟 ":"",i=n+g.default.t(1805);break;case T.VIDEO:e.isGif?(n=C.default.hasEmoji?"👾 ":"",I=O&&(0,y.default)(e,e.caption)||"GIF"):(n="",C.default.hasEmoji&&(n=N.isViewOnce?"1️⃣ ":"🎥 "),I=O&&(0,y.default)(e,e.caption)||g.default.t(1806),N.isViewOnce||(I=`${I} (${l.default.durationStr(e.duration)})`)),i=`${n}${I}`;break;case T.PTT:n=C.default.hasEmoji?"🎤 ":"",i=`${n} ${g.default.t(1807)} (${l.default.durationStr(e.duration)})`;break;case T.AUDIO:n=C.default.hasEmoji?"🎵 ":"",i=`${n} ${g.default.t(1797)} (${l.default.durationStr(e.duration)})`;break;case T.LOCATION:n=C.default.hasEmoji?"📍 ":"",I=e.isLive?O&&(0,y.default)(e,e.comment)||g.default.t(1802):O&&e.loc||g.default.t(1803),i=`${n} ${I}`;break;case T.GROUPS_V4_INVITE:i=v.default.supportsFeature(v.default.F.GROUPS_V_4_JOIN_PERMISSION)?g.default.t(916):g.default.t(545);break;case T.GROUP_NOTIFICATION:case T.GP2:i=(0,h.default)(e,!0),P="";break;case T.BROADCAST_NOTIFICATION:i=(0,u.default)(e);break;case T.NOTIFICATION:i=e.body;break;case T.VCARD:n=C.default.hasEmoji?"👤 ":"",i=n+(e.subtype||g.default.t(1798));break;case T.MULTI_VCARD:n=C.default.hasEmoji?"👥 ":"",i=n+(0,b.getNameString)(e.vcardList);break;case T.DOCUMENT:if(e.isVcardOverMmsDocument){n=C.default.hasEmoji?"👤 ":"",i=n+(e.filename||g.default.t(1168,{count:e.pageCount,_plural:e.pageCount}));break}n=C.default.hasEmoji?"📄 ":"",i=n+(e.subtype||g.default.t(1800));break;case T.E2E_NOTIFICATION:i=(0,f.default)(N);break;case T.CALL_LOG:i=(0,c.default)(e,!1);break;case T.CIPHERTEXT:i=g.default.t(1332);break;case T.REVOKED:i=e.isSentByMe?g.default.t(1429):g.default.t(1427);break;case T.PAYMENT:i=function(e){var t;if(!e.paymentCurrency||!e.paymentAmount1000)return g.default.t(1954);if("send"!==e.subtype&&"request"!==e.subtype)return g.default.t(547);var a=d.formatAmount1000(e.paymentCurrency,e.paymentAmount1000),r=(0,M.default)(e.sender),i=(0,M.default)(e.paymentMessageReceiverJid),s=o.default.get(e.paymentMessageReceiverJid),l={senderName:r,receiverName:i,amount:a,_plural:e.paymentAmount1000/1e3};t="send"===e.subtype?e.isGroupMsg?s&&s.isMe?g.default.t(1961,l):g.default.t(1962,l):g.default.t(1960,l):e.isGroupMsg?s&&s.isMe?g.default.t(1958,l):g.default.t(1959,l):g.default.t(1957,l);return t}(e);break;case T.OVERSIZED:i=(0,p.formatOversizedMsgNotification)(e);break;case T.UNKNOWN:i=(0,m.formatUnknownMsgNotification)(e);break;case T.LIST:if((0,E.listMsgCanRender)(N)){var w,R;i=`${(null===(w=e.list)||void 0===w?void 0:w.title)||""} ${(null===(R=e.list)||void 0===R?void 0:R.description)||""}`;break}return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,"";case T.LIST_RESPONSE:i=`${(null===(a=e.listResponse)||void 0===a?void 0:a.title)||""} ${(null===(r=e.listResponse)||void 0===r?void 0:r.description)||""}`;break;default:return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,""}var k=g.default.isRTL()?"rtl":"ltr",L="";if(L=l.default.relativeStr(e.t),P){var x=s.dir(P);return"ltr"!==k||A&&"ltr"!==A||x&&"ltr"!==x?"ltr"!==k||A&&"ltr"!==A?"ltr"!==k||x&&"ltr"!==x?"ltr"===k?(L&&(L=`- ‪${L}‬‬`),`‫${P}‏: ${i}‏${L}`):A&&"rtl"!==A||x&&"rtl"!==x?A&&"rtl"!==A?x&&"rtl"!==x?(L&&(L=`- ‪${L}‬‬`),`‪${P}‎: ${i}‎${L}`):(L&&(L=` - ${L}`),`${P}‏: ‪${i}‬‏`):(L&&(L=` - ${L}`),`‏‪${P}‬: ${i}‏`):(L&&(L=` - ${L}`),`${P}‏: ${i}‏`):(L&&(L=` - ${L}`),`${P}‎: ‫${i}‬‎`):(L&&(L=` - ${L}`),`‎‫${P}‬: ${i}‎`):(L&&(L=` - ${L}`),`${P}‎: ${i}‎`)}return L?"ltr"===k?`${i}‎‏ - ‪${L}‬`:`${i}‏‎ - ‫${L}‬`:i};var s=i(a(70873)),l=r(a(44386)),n=r(a(75444)),o=r(a(62899)),d=i(a(39017)),u=r(a(13429)),c=r(a(66265)),f=r(a(91893)),h=r(a(5933)),p=a(29395),m=a(29804),_=a(26226),v=r(a(77188)),g=r(a(80162)),E=a(75431),S=r(a(70372)),C=r(a(89848)),y=r(a(1097)),b=a(54865),M=r(a(5201)),T=n.default.MSG_TYPE},56765:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=i.default.get(e),r=null==a?void 0:a.name;return!r||r===t};var i=r(a(62899))},13429:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{subtype:t,body:a,recipients:r}=e;if("create"===t){var l=parseInt(a,10);return s.default.t(2080,{_plural:l,count:l})}if("add"===t){var n=r.length;return s.default.t(1899,{_plural:n,name:(0,i.getFormattedNames)(r,!0)})}if("remove"===t){var o=r.length;return s.default.t(1900,{_plural:o,name:(0,i.getFormattedNames)(r,!0)})}return""};var i=a(83056),s=r(a(80162))},66265:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a="";switch(e.subtype){case"miss":a=t?s.default.t(1937,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1936);break;case"miss_video":a=t?s.default.t(1935,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1934);break;case"miss_group":a=t?s.default.t(1933,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1932);break;case"miss_group_video":a=t?s.default.t(1931,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):s.default.t(1930)}return a};var i=r(a(44386)),s=r(a(80162))},91893:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e.subtype){case"identity":var t=null==e.body?null:i.default.get(e.body);if(t&&t.isMe){__LOG__(4,void 0,new Error,!0)`formatE2ENotification: receive identity notification of self`,SEND_LOGS("SelfIdentityNotificationError");var a=e.chat;if(a.isUser){var r=a.contact?a.contact.formattedName:(0,f.default)(a.id);return o.default.t(2002,{contactName:r})}return a.isGroup?o.default.t(1887):a.isBroadcast?o.default.t(1760):""}var h=t?t.formattedName:(0,f.default)(e.body);return o.default.t(2002,{contactName:h});case"device":return(0,s.default)(e);case"encrypt":var p=e.id.remote;if(c.default.isGroup(p))return e.chat.isSupportGroup()?o.default.t(1546):u.default.isGroupCallEnabled()?o.default.t(1851):o.default.t(1848);if((0,n.default)(p.user))return o.default.t(1546);if(c.default.isBroadcast(p))return o.default.t(1758);var m=u.default.isVoiceCallEnabled()||u.default.isVideoCallEnabled()?o.default.t(1785):o.default.t(1781),_=i.default.get(p);if(_&&_.isEnterprise){var v=(0,l.default)(_);return d.default.bspSystemMessageEnabled?m:o.default.t(1782,{businessName:v})}return m;case"encrypt_now":return o.default.t(854);case"e2e_identity_unavailable":return o.default.t(1452);default:return""}};var i=r(a(62899)),s=r(a(34907)),l=r(a(31415)),n=r(a(31170)),o=r(a(80162)),d=r(a(43232)),u=r(a(64624)),c=r(a(53680)),f=r(a(8745))},34907:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){(0,i.default)("device"===e.subtype,"Shouldn't call this function if msg is not a device notification msg");var a,r=e.body?s.default.get(e.body):null,o=1===e.devicesAdded&&0===e.devicesRemoved,d=0===e.devicesAdded&&1===e.devicesRemoved,u=!o&&!d;if(r&&r.isMe){var c=e.chat;if(c.isUser){var f=c.contact.formattedName;t?o?a=e.isThisDeviceAdded?l.default.t(1755,{contactName:f}):l.default.t(1753,{contactName:f}):d?a=l.default.t(1998,{contactName:f}):u&&(a=l.default.t(1773,{contactName:f})):a=l.default.t(2002,{contactName:f})}else c.isGroup?t?o?a=e.isThisDeviceAdded?l.default.t(1817):l.default.t(1754):d?a=l.default.t(1999):u&&(a=l.default.t(1774)):a=l.default.t(1887):c.isBroadcast&&(t?o?a=e.isThisDeviceAdded?l.default.t(1756):l.default.t(1752):d?a=l.default.t(1997):u&&(a=l.default.t(1772)):a=l.default.t(1760))}else{var h=e.body,p=(r=null==h?null:s.default.get(h))?r.formattedName:(0,n.default)(h);t?o?a=l.default.t(1750,{contactName:p}):d?a=l.default.t(1996,{contactName:p}):u&&(a=l.default.t(1771,{contactName:p})):a=l.default.t(2002,{contactName:p})}return(0,i.default)(null!=a,"text shouldn't be null in the end"),a};var i=r(a(41143)),s=r(a(62899)),l=r(a(80162)),n=r(a(8745))},31415:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.verifiedLevel===i.default.VERIFIED_LEVEL.HIGH?e.verifiedName:e.formattedName};var i=r(a(75444))},629:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r,u=i.default.gadd(a),c=o.default.isUser(a)||(null==u||null===(r=u.groupMetadata)||void 0===r?void 0:r.canSetEphemeralSetting());if(!t)return c?(0,n.getDisappearingMessageSettingUnknownAsAdminString)(e):(0,n.getDisappearingMessageSettingUnknownString)(e);var f=s.default.gadd(t);if(o.default.equals(t,(0,l.getMaybeMeUser)()))return c?(0,n.getDisappearingMessageSettingYouAsAdminString)(e):(0,n.getDisappearingMessageSettingYouString)(e);var h=f&&f.isMyContact?f.formattedName:(0,d.default)(t);if(c)return(0,n.getDisappearingMessageSettingOthersAsAdminString)(e,h);return(0,n.getDisappearingMessageSettingOthersString)(e,h)};var i=r(a(74798)),s=r(a(62899)),l=a(26226),n=a(29989),o=r(a(53680)),d=r(a(8745))},5933:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r,c="",f=e.get("type"),h=e.get("subtype"),p=e.displayName(),m=e.get("author"),_=e.get("body"),v=""===p||null==p;if("group_notification"===f){var g=(0,l.getMaybeMeUser)();switch(h){case"add":c=d.default.equals(m,g)?o.default.t(1860):o.default.t(1859,{name:p});break;case"remove":c=d.default.equals(m,g)?o.default.t(1872):o.default.t(1871,{name:p});break;case"leave":c=d.default.equals(m,g)?o.default.t(1868):o.default.t(1867,{name:p});break;case"picture":c="remove"===_?d.default.equals(m,g)?o.default.t(1991):o.default.t(1990,{name:p}):d.default.equals(m,g)?o.default.t(1989):o.default.t(1988,{name:p});break;case"subject":c=d.default.equals(m,g)?o.default.t(1890,{subject:_}):v?o.default.t(1889,{subject:_}):o.default.t(1888,{name:p,subject:_});break;case"modify":a=(0,u.default)(e.get("author")),r=(0,u.default)(_),c=a===p?o.default.t(1862,{name:p,new_number:r}):o.default.t(1861,{name:p});break;default:__LOG__(2)`wa:formatGroupNotification:unknown message subtype: ${h}`}}else if("gp2"===f){var E,S=e.recipients,C=S?(0,n.getFormattedNames)(S,!0):"",y=S?S[0]:void 0,b=y?i.default.get(y):void 0,M=b?b.get("formattedName"):y?(0,u.default)(y):"",T=(0,l.getMaybeMeUser)();switch(h){case"add":c=m?d.default.equals(m,T)?o.default.t(1881,{participants:C}):d.default.equals(y,T)?v?o.default.t(1878):o.default.t(1874,{name:p}):v?o.default.t(1877,{participants:C}):o.default.t(1873,{name:p,participants:C}):d.default.equals(y,T)?o.default.t(1860):o.default.t(1859,{name:M});break;case"remove":c=!d.default.equals(y,T)||!d.default.equals(m,T)&&m?d.default.equals(y,T)&&m?v?o.default.t(1880):o.default.t(1876,{name:p}):d.default.equals(m,T)?o.default.t(1882,{participants:C}):m?v?o.default.t(1879,{participants:C}):o.default.t(1875,{name:p,participants:C}):o.default.t(1871,{name:M}):o.default.t(1872);break;case"leave":c=d.default.equals(y,T)?o.default.t(1868):o.default.t(1867,{name:C});break;case"picture":c="remove"===_?d.default.equals(m,T)?o.default.t(1991):o.default.t(1990,{name:p}):d.default.equals(m,T)?o.default.t(1989):o.default.t(1988,{name:p});break;case"subject":c=d.default.equals(m,T)?o.default.t(1890,{subject:_}):v?o.default.t(1889,{subject:_}):o.default.t(1888,{name:p,subject:_});break;case"modify":a=(0,u.default)(m),r=(0,u.default)(y),c=a===p?o.default.t(1862,{name:p,new_number:r}):o.default.t(1861,{name:p});break;case"create":c=d.default.equals(m,T)?_?o.default.t(1828,{subject:_}):o.default.t(1829):_?v?o.default.t(1827,{subject:_}):o.default.t(1825,{name:p,subject:_}):v?o.default.t(1824):o.default.t(1826,{name:p});break;case"delete":c=e.chat.isSupportGroup()?o.default.t(1535):o.default.t(1844);break;case"promote":E=S.length,c=1===E&&d.default.equals(y,T)?o.default.t(1870):o.default.t(1869,{participants:C,_plural:E});break;case"demote":E=S.length,c=1===E&&d.default.equals(y,T)?o.default.t(1864):o.default.t(1863,{participants:C,_plural:E});break;case"invite":c=d.default.equals(y,T)?o.default.t(1866):o.default.t(1865,{name:M});break;case"revoke_invite":c=d.default.equals(m,T)?o.default.t(1854):o.default.t(1853,{name:p});break;case"description":var I=t?v?o.default.t(1841):o.default.t(1839,{name:p}):v?o.default.t(1840):o.default.t(1838,{name:p});c=d.default.equals(m,T)?o.default.t(1842):I;break;case"announce":c="on"===_?d.default.equals(m,T)?o.default.t(1823):o.default.t(1822,{name:p}):d.default.equals(m,T)?o.default.t(1821):o.default.t(1820,{name:p});break;case"restrict":c="on"===_?d.default.equals(m,T)?o.default.t(1886):o.default.t(1885,{name:p}):d.default.equals(m,T)?o.default.t(1884):o.default.t(1883,{name:p});break;case"no_frequently_forwarded":c="on"===_?d.default.equals(m,T)?o.default.t(1858):o.default.t(1857,{name:p}):d.default.equals(m,T)?o.default.t(1856):o.default.t(1855,{name:p});break;case"announce_msg_bounce":c=o.default.t(1819);break;case"v4_add_invite_sent":c=o.default.t(1609,{participants:C,_plural:S.length});break;case"v4_add_invite_join":c=o.default.t(1608,{participants:C,_plural:S.length});break;case"ephemeral":var P=parseInt(e.templateParams[0],10)||0,A=e.templateParams[1],N=e.id.remote;return(0,s.default)(P,A,N);default:__LOG__(2)`wa:formatGroupNotification:unknown message subtype: ${h}`}}o.default.isRTL()&&(c=o.default.forceRTL(c));return c};var i=r(a(62899)),s=r(a(629)),l=a(26226),n=a(83056),o=r(a(80162)),d=r(a(53680)),u=r(a(8745))},31172:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{id:t}=e;switch(e.subtype){case"non_verified_transition":return o.default.t(1939,{businessName:(0,l.default)(e)});case"unverified_transition":return o.default.t(2053,{businessName:(0,l.default)(e)});case"verified_transition":return o.default.t(2059,{businessName:(0,l.default)(e)});case"verified_low_unknown":return o.default.t(2057,{businessName:(0,l.default)(e)});case"verified_high":return o.default.t(2055,{businessName:(0,l.default)(e)});case"verified_initial_unknown":return o.default.t(2027,{businessName:e.displayName()});case"verified_initial_low":return o.default.t(2025);case"verified_initial_high":return o.default.t(2023);case"verified_transition_any_to_none":return o.default.t(2031);case"verified_transition_any_to_high":return o.default.t(2029);case"verified_transition_high_to_low":return o.default.t(2033,{businessName:(0,l.default)(e)});case"verified_transition_high_to_unknown":return o.default.t(2035,{businessName:(0,l.default)(e)});case"verified_transition_unknown_to_low":return o.default.t(2043);case"verified_transition_low_to_unknown":return o.default.t(2037,{businessName:(0,l.default)(e)});case"verified_transition_none_to_low":return o.default.t(2039,{businessName:(0,l.default)(e)});case"verified_transition_none_to_unknown":return o.default.t(2041,{businessName:e.displayName()});case"biz_verified_transition_top_to_bottom":return o.default.t(298,{businessName:(0,l.default)(e)});case"biz_verified_transition_bottom_to_top":return o.default.t(296,{businessName:(0,l.default)(e)});case"biz_intro_top":var a=(0,l.default)(e),r=d.default.isOfficialBizAccount(t.remote);return(0,s.default)(t.remote,a)?r?o.default.t(1286):o.default.t(268,{businessName:a}):r?o.default.t(1287):o.default.t(269,{businessName:a});case"biz_intro_bottom":return o.default.t(266,{businessName:(0,u.default)(t.remote)});case"biz_name_change":return o.default.t(273,{businessName:(0,l.default)(e)});case"biz_move_to_consumer_app":return o.default.t(271);case"biz_two_tier_migration_top":var i=(0,l.default)(e);return(0,s.default)(t.remote,i)?o.default.t(293,{businessName:i}):o.default.t(294,{businessName:i});case"biz_two_tier_migration_bottom":return o.default.t(291,{businessName:(0,u.default)(t.remote)});case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_verified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_verified_to_bsp_premise_unverified":return o.default.t(306,{businessName:(0,l.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return o.default.t(307);case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_self_fb_unverified":case"blue_msg_to_bsp_fb":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_self_fb_unverified":return o.default.t(308,{businessName:(0,l.default)(e)});case"blue_msg_self_fb_verified":var h=(0,n.default)(e.chat.id.user),p=(0,l.default)(e);return h?o.default.t(309,{businessName:p}):o.default.t(308,{businessName:p});case"blue_msg_self_premise_unverified":return o.default.t(310,{businessName:(0,l.default)(e)});case"blue_msg_self_premise_verified":var m=(0,l.default)(e);return(0,s.default)(t.remote,m)?o.default.t(311,{businessName:m}):o.default.t(312,{businessName:m});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_verified_to_unverified":return o.default.t(315,{businessName:(0,l.default)(e)});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_unverified_to_verified":var _=(0,l.default)(e);return(0,s.default)(t.remote,_)?o.default.t(313,{businessName:_}):o.default.t(314,{businessName:_});case"biz_privacy_mode_init_fb":case"biz_privacy_mode_to_fb":return c();case"biz_privacy_mode_init_bsp":case"biz_privacy_mode_to_bsp":return f();default:return null}},t.formatFbModalText=c,t.formatBspModalText=f;var i=r(a(67294)),s=r(a(56765)),l=r(a(87049)),n=r(a(14942)),o=r(a(80162)),d=r(a(53680)),u=r(a(5201));function c(){return i.default.createElement(i.default.Fragment,null,o.default.t(284),i.default.createElement("br",null),i.default.createElement("br",null),o.default.t(285),i.default.createElement("br",null),i.default.createElement("br",null),o.default.t(286),i.default.createElement("br",null),i.default.createElement("br",null),o.default.t(287))}function f(){return i.default.createElement(i.default.Fragment,null,o.default.t(284),i.default.createElement("br",null),i.default.createElement("br",null),o.default.t(285),i.default.createElement("br",null),i.default.createElement("br",null),o.default.t(287))}},76749:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{templateParams:t,id:a}=e;switch(e.subtype){case"non_verified_transition":return f.default.t(1940);case"unverified_transition":return f.default.t(2054);case"verified_transition":return f.default.t(2060);case"verified_low_unknown":return f.default.t(2058);case"verified_high":return f.default.t(2056);case"verified_initial_unknown":return f.default.t(2026);case"verified_initial_low":return f.default.t(2024,{businessName:(0,u.default)(e)});case"verified_initial_high":return f.default.t(2022,{businessName:(0,u.default)(e)});case"verified_transition_any_to_none":return f.default.t(2030);case"verified_transition_any_to_high":return f.default.t(2028,{businessName:(0,u.default)(e)});case"verified_transition_high_to_low":return f.default.t(2032,{businessName:(0,u.default)(e)});case"verified_transition_high_to_unknown":return f.default.t(2034,{businessName:(0,u.default)(e)});case"verified_transition_unknown_to_low":return f.default.t(2042,{businessName:(0,u.default)(e)});case"verified_transition_low_to_unknown":return f.default.t(2036,{businessName:(0,u.default)(e)});case"verified_transition_none_to_low":return f.default.t(2038);case"verified_transition_none_to_unknown":return f.default.t(2040);case"change_number":var r=t[0],i=l.default.get(r),g=i&&i.isMyContact?i.formattedName:(0,_.default)(r);return m.default.equals(e.chat.id,r)?f.default.t(520,{name:g}):f.default.t(519,{name:g});case"payment_transaction_status_update_failed":return f.default.t(1977,{receiverName:(0,v.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_transaction_request_cancelled":var E=t[0],S=(0,v.default)(E),C=t[1],y=parseInt(t[2],10),b=n.formatAmount1000(C,y),M={contactName:S,currencyAndAmount:b,_plural:y/1e3};return e.id.fromMe?f.default.t(1946,M):f.default.t(1945,M);case"payment_transaction_status_update_refunded":return f.default.t(1979,{receiverName:(0,v.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_transaction_status_update_refund_failed":return f.default.t(1978,{receiverName:(0,v.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_transaction_status_receiver_pending_setup":var T=t[0],I=(0,v.default)(T),P=t[1],A=parseInt(t[2],10),N=n.formatAmount1000(P,A);return f.default.t(1974,{senderName:I,currencyAndAmount:N,_plural:A/1e3});case"payment_transaction_status_receiver_success_after_hiccup":return f.default.t(1975,{senderName:(0,v.default)(t[0]),relativeTime:s.default.paymentTimestampStr(e.t)});case"payment_action_account_setup_reminder":return f.default.t(1944,{senderName:(0,v.default)(t[0])});case"payment_action_send_payment_reminder":return f.default.t(1952,{receiverName:(0,v.default)(t[0])});case"payment_action_send_payment_invitation":return f.default.t(1951,{receiverName:(0,v.default)(t[0])});case"payment_action_request_declined":var O=t[0],D=(0,v.default)(O),w=t[1],R=parseInt(t[2],10),k=n.formatAmount1000(w,R),L={contactName:D,currencyAndAmount:k,_plural:R/1e3};return e.id.fromMe?f.default.t(1948,L):f.default.t(1947,L);case"payment_action_request_expired":var x=t[0],F=(0,v.default)(x),B=t[1],G=(0,v.default)(B),U=t[2],j=parseInt(t[3],10),V=n.formatAmount1000(U,j);return m.default.equals(x,(0,d.getMaybeMeUser)())?f.default.t(1950,{receiverName:G,currencyAndAmount:V,_plural:j/1e3}):f.default.t(1949,{senderName:F,currencyAndAmount:V,_plural:j/1e3});case"biz_verified_transition_top_to_bottom":return f.default.t(297,{businessName:(0,u.default)(e)});case"biz_verified_transition_bottom_to_top":return f.default.t(295,{businessName:(0,u.default)(e)});case"biz_intro_top":var H=e.id.remote;return m.default.isOfficialBizAccount(H)?f.default.t(1285):f.default.t(267,{businessName:(0,u.default)(e)});case"biz_intro_bottom":return f.default.t(265);case"biz_name_change":return f.default.t(272,{businessName:(0,u.default)(e)});case"biz_move_to_consumer_app":return f.default.t(270);case"biz_two_tier_migration_top":return f.default.t(292,{businessName:(0,u.default)(e)});case"biz_two_tier_migration_bottom":return f.default.t(290);case"blue_msg_bsp_fb_to_bsp_premise":return f.default.t(316,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_fb":return f.default.t(317,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_premise":return f.default.t(318,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_unverified":return f.default.t(319);case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":var W=(0,u.default)(e);return(0,o.default)(a.remote,W)?f.default.t(320,{businessName:W}):f.default.t(321,{businessName:W});case"blue_msg_bsp_fb_unverified_to_self_fb_verified":var Y=(0,u.default)(e);return(0,o.default)(a.remote,Y)?f.default.t(322,{businessName:Y}):f.default.t(323,{businessName:Y});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":return f.default.t(324,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified":var K=(0,u.default)(e);return(0,o.default)(a.remote,K)?f.default.t(325,{businessName:K}):f.default.t(326,{businessName:K});case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":return f.default.t(327,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_fb_unverified":return f.default.t(328,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":return f.default.t(329,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_to_self_premise":return f.default.t(330,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_unverified":return f.default.t(331);case"blue_msg_bsp_premise_unverified_to_self_premise_verified":return f.default.t(332,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_verified":var q=(0,u.default)(e);return(0,o.default)(a.remote,q)?f.default.t(333,{businessName:q}):f.default.t(334,{businessName:q});case"blue_msg_bsp_premise_verified_to_self_premise_unverified":return f.default.t(335,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_fb_unverified":return f.default.t(336,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_premise_unverified":return f.default.t(337,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_fb_unverified":return f.default.t(338,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return f.default.t(339,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_bsp_premise":return f.default.t(340,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_self_premise":return f.default.t(341,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_unverified":return f.default.t(342);case"blue_msg_self_fb_unverified_to_bsp_premise_verified":var z=(0,u.default)(e);return(0,o.default)(a.remote,z)?f.default.t(343,{businessName:z}):f.default.t(344,{businessName:z});case"blue_msg_self_fb_unverified_to_self_premise_verified":return f.default.t(345,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified":var $=(0,u.default)(e),Q=(0,c.default)(e.chat.id.user);return(0,o.default)(a.remote,$)?Q?f.default.t(349,{businessName:$}):f.default.t(346,{businessName:$}):Q?f.default.t(348,{businessName:$}):f.default.t(347,{businessName:$});case"blue_msg_self_fb_verified_to_bsp_premise_unverified":return f.default.t(350,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified_to_self_premise_unverified":return f.default.t(351,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_to_bsp_premise":return f.default.t(352,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_unverified":return f.default.t(353);case"blue_msg_self_premise_verified":return f.default.t(354,{businessName:(0,u.default)(e)});case"blue_msg_to_bsp_fb":return f.default.t(355,{businessName:(0,u.default)(e)});case"blue_msg_to_consumer":return f.default.t(356,{businessName:(0,u.default)(e)});case"blue_msg_to_self_fb":return f.default.t(357,{businessName:(0,u.default)(e)});case"blue_msg_unverified_to_bsp_fb_verified":var X=(0,u.default)(e);return(0,o.default)(a.remote,X)?f.default.t(358,{businessName:X}):f.default.t(359,{businessName:X});case"blue_msg_unverified_to_bsp_premise_verified":var J=(0,u.default)(e);return(0,o.default)(a.remote,J)?f.default.t(360,{businessName:J}):f.default.t(361,{businessName:J});case"blue_msg_unverified_to_self_fb_verified":var Z=(0,u.default)(e);return(0,o.default)(a.remote,Z)?f.default.t(362,{businessName:Z}):f.default.t(363,{businessName:Z});case"blue_msg_unverified_to_verified":return f.default.t(364,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_fb_unverified":return f.default.t(365,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_premise_unverified":return f.default.t(366,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_self_fb_unverified":return f.default.t(367,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_unverified":return f.default.t(368,{businessName:(0,u.default)(e)});case"biz_privacy_mode_init_fb":return f.default.t(283);case"biz_privacy_mode_to_fb":return f.default.t(289);case"biz_privacy_mode_init_bsp":return f.default.t(282);case"biz_privacy_mode_to_bsp":return f.default.t(288);case"block_contact":return"true"===t[0]?f.default.t(632):f.default.t(633);case"disappearing_mode":var ee=t[0],te=parseInt(ee,10)||0,ae=t[1];if(m.default.equals(ae,(0,d.getMaybeMeUser)()))return(0,h.getDisappearingModeYouString)(te);var re=l.default.gadd(ae);return(0,h.getDisappearingModeOtherString)(te,re.formattedName);default:return p.default.isElectron?f.default.t(1587):f.default.t(1591)}};var s=i(a(44386)),l=i(a(62899)),n=r(a(39017)),o=i(a(56765)),d=a(26226),u=i(a(87049)),c=i(a(14942)),f=i(a(80162)),h=a(29989),p=i(a(89848)),m=i(a(53680)),_=i(a(8745)),v=i(a(5201))},87049:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.templateParams&&e.templateParams[0]?e.templateParams[0].toString():(0,i.default)(e.id.remote)};var i=r(a(5201))},25404:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"non_verified_transition":return(0,r.getNonVerifiedTransitionFaqUrl)();case"unverified_transition":return(0,r.getUnverifiedTransitionFaqUrl)();case"verified_transition":return(0,r.getVerifiedTransitionFaqUrl)();case"verified_low_unknown":return(0,r.getVerifiedLowUnknownFaqUrl)();case"verified_high":return(0,r.getVerifiedHighFaqUrl)();case"biz_intro_top":case"biz_intro_bottom":case"biz_two_tier_migration_bottom":case"biz_name_change":case"biz_verified_transition_top_to_bottom":case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":return(0,r.getBusinessFaqUrl)();case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_to_self_premise":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_to_self_premise":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_verified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_consumer_to_self_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_to_self_premise":case"blue_msg_self_fb_unverified":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_self_fb_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_self_premise_unverified":case"blue_msg_self_premise_verified":case"blue_msg_to_bsp_fb":case"blue_msg_to_consumer":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_unverified_to_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_bsp_premise_unverified":case"blue_msg_verified_to_self_fb_unverified":case"blue_msg_verified_to_unverified":return(0,r.getE2EEnterpriseFaqUrl)();case"biz_privacy_mode_init_fb":case"biz_privacy_mode_init_bsp":return(0,r.getE2EEnterpriseFaqUrl)();default:return(0,r.getFaqUrl)()}};var r=a(84641)},1097:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=null!=t?t:"",r=e.mentionMap();if(!r)return function(e){return s.default.supportsFeature(s.default.F.RICH_TEXT)?(0,i.default)(e,o,n.UnformatSerializer):e}(a);if(s.default.isDropLastNameEnabled()&&e.chat.groupMetadata){var d=e.chat.groupMetadata,u=s.default.supportsFeature(s.default.F.RICH_TEXT)?l.Configuration.FormattedGroupNotification({mentions:r,groupMetadata:d}):l.Configuration.RawGroupNotification({mentions:r,groupMetadata:d});return(0,i.default)(a,u,n.UnformatSerializer)}var c=s.default.supportsFeature(s.default.F.RICH_TEXT)?l.Configuration.FormattedNotification({mentions:r}):l.Configuration.RawNotification({mentions:r});return(0,i.default)(a,c,n.UnformatSerializer)};var i=r(a(68666)),s=r(a(77188)),l=a(99375),n=a(87167),o=l.Configuration.Format({mentions:{}})},5201:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.get(e);return t?t.formattedName:(0,s.default)(e)};var i=r(a(62899)),s=r(a(8745))},29804:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatUnknownMsgText=function(e){if(e.isSentByMe)return i.default.t(1590);switch(e.subtype){case"phone":return i.default.t(1589);case"phone_only_feature":return s.default.isElectron?i.default.t(1588):i.default.t(1593);default:return s.default.isElectron?i.default.t(1587):i.default.t(1591)}},t.formatUnknownMsgNotification=function(e){switch(e.subtype){case"phone":return i.default.t(1589);case"phone_only_feature":return i.default.t(1593);default:return i.default.t(1591)}};var i=r(a(80162)),s=r(a(89848))},91773:(e,t,a)=>{"use strict";t.Z=void 0;var r=a(97504);var i=new class{constructor(){this._trackers=[],this._currFPS=0,this._numSamples=0,this._totalTime=0,this._startTracking=()=>{this._frameId||(this._prevFrameTS=this._prevUpdateTS=window.performance.now(),this._frameId=requestAnimationFrame(this._handleFrame))},this._stopTracking=()=>{this._frameId&&(this._prevFrameTS=this._prevUpdateTS=void 0,cancelAnimationFrame(this._frameId),this._frameId=void 0)},this._handleFrame=()=>{if(this._trackers.length){var e=this._prevFrameTS,t=this._prevUpdateTS;if(null!=e&&null!=t){var a=window.performance.now();this._numSamples+=1,this._totalTime+=a-e,a-t>=500&&this._update(a),this._prevFrameTS=a,this._frameId=requestAnimationFrame(this._handleFrame)}}}}whenLessThan(e,t){if(e<0||e>60)throw new RangeError("fps must be between 0 and 60");return this._insertTracker([e,t]),()=>{this._removeTracker(t)}}_insertTracker(e){var t=e[0],a=function(e,t){var a=0,r=e.length-1,i=Math.floor((a+r)/2);for(;e[i]!==t&&a<r;)t<e[i]?r=i-1:a=i+1,i=Math.floor((a+r)/2);if(e[i]<t)return i+1;return i}(this._trackers.map((e=>e[0])),t);this._trackers.splice(a,0,e),1===this._trackers.length&&(this._addEventListeners(),this._startTracking())}_removeTracker(e){for(var t=this._trackers.length,a=0;a<t;a++)if(e===this._trackers[a][1]){this._trackers.splice(a,1),0===this._trackers.length&&(this._removeEventListeners(),this._stopTracking());break}}_update(e){var t=1e3/(this._totalTime/this._numSamples),a=Math.min(t,60);if(Math.abs(a-this._currFPS)>1){this._currFPS=a;var r=this._filterCallbacks();r.length&&this._triggerCallbacks(r,a)}this._numSamples=0,this._totalTime=0,this._prevUpdateTS=e}_filterCallbacks(){for(var e=[],t=this._trackers.length-1;t>=0;t--){var[a,r]=this._trackers[t];if(a<=this._currFPS)break;e.push(r)}return e}_triggerCallbacks(e,t){var a=window.performance.now();(0,r.requestIdleCallback)((()=>{e.forEach((e=>e(t,a)))}))}_addEventListeners(){window.addEventListener("focus",this._startTracking),window.addEventListener("blur",this._stopTracking)}_removeEventListeners(){window.removeEventListener("focus",this._startTracking),window.removeEventListener("blur",this._stopTracking)}};t.Z=i},48877:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,date:t,unread:a,album:r},d,u,c,f,h){var p,m=[],_=0;for(_=0;!p&&_<d.length;_++)p=d[_];_--;var v=!1,g=!1,E=p?(0,l.default)(p):0,S=0,C=_;for(;p;){var y=p;g||m.push(t(y,S++)),y===c&&a&&m.push(a(f));for(var b=void 0,M=_+1;!b&&M<d.length;M++)b=d[M];var T=void 0,I=void 0,P=void 0,A=[],N=!1,O=void 0,D=!1,w=null;if(y.asGroupedSticker&&!n(y,h)){A.push(y.asGroupedSticker),D=y===u,w=0;var R=d[C=_+1];R&&R.asGroupedSticker&&(0,i.canBeGroupedAsAlbum)(y,R)&&R!==c&&!n(R,h)&&(A.push(R.asGroupedSticker),b=d[C+1],N=!0,O=!0,R===u&&(D=!0,w=1))}if(y.asAlbumAsset&&!n(y,h)){A.push(y.asAlbumAsset);var k=p,L=void 0;for(D=p===u,C=_;C<d.length-1&&A.length<s.default.ALBUM_MAX_SIZE&&(k=d[C],(L=d[C+1])&&L.asAlbumAsset&&(0,i.canBeGroupedAsAlbum)(k,L)&&L!==c&&!n(L,h));C++)A.push(L.asAlbumAsset),L===u&&(D=!0);A.length>=s.default.ALBUM_MIN_SIZE&&(N=!0,O=!1,b=d[C+1])}if(b){var x=b;P=(0,l.default)(b),T=(I=P===E)&&(0,i.canBeGroupedWithNext)(y,x)&&b!==c}else T=!1,I=!1,P=0;if(N){var F=void 0;F=O?A.reduce(((e,t)=>`${e}-${t.id.toString()}`),"grouped-sticker-"):o(A),m.push(r(A,F,v,T,D,w)),p=d[_=C+1],v=T,g=I,E=P}else m.push(e(y,y===u,v,T)),_++,v=T,g=I,E=P,p=b}return m};var i=a(18038),s=r(a(75444)),l=r(a(94760));function n(e,t){return null==t||e.t>t.t}function o(e){var t=e.length;return`album-${e[0]?e[0].id.toString():""}-${e[t-1]?e[t-1].id.toString():""}-${t}`}},83056:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedName=d,t.getFormattedNames=function(e,t=!1){if(!Array.isArray(e))return d(e,t);var a=e.map((e=>d(e,t)));return(0,o.default)(a,t)};var i=r(a(67294)),s=r(a(33766)),l=r(a(62899)),n=a(77824),o=r(a(33080));function d(e,t=!1){var r,o=l.default.gadd(e,{silent:!0}),d=t?void 0:(r=e,e=>{e&&(e.preventDefault(),e.stopPropagation()),(0,n.findChat)(r).then((e=>{s.default.openChatFromUnread(e).then((t=>{t&&s.default.focusChatTextInput(e)}))}))}),u=a(39148).default;return t?o.formattedUser:i.default.createElement(u,{contact:o,onClick:d})}},14942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.has(e)};var a=new Set(["16505434800","16503130062","16507885324","16508620604","16504228206","16505212669","447710173736","16507885280","19032707825","16505361212","16508129150","16315555102","0"])},31170:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var t=(0,s.getABPropConfigValue)("in_app_support_v2_numbers");return null!=t&&""!==t&&t.split(",").includes(e)}return!1};var i=r(a(77188)),s=a(2860)},86411:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return u.apply(this,arguments)},t.getMsgDownloadData=c;var i=r(a(48926)),s=r(a(75444)),l=r(a(53360)),n=r(a(65764)),o=r(a(72462)),d=r(a(53466));function u(){return(u=(0,i.default)((function*(e){var t=Array.isArray(e)?e:[e];try{var a=yield Promise.all(t.map((e=>c(e))));return a.length>1?{blob:yield(0,d.default)(a),name:l.default.getDefaultName({t:Math.round(Date.now()/1e3),type:"unknown",mimetype:"application/zip",isVcardOverMmsDocument:!1,filename:"",vcardList:[]})}:a[0]}catch(e){throw __LOG__(4,void 0,new Error,!0)`Failed to get msg download data: ${e.message}`,SEND_LOGS("msg-download-data-failed"),e}}))).apply(this,arguments)}function c(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){var t="text/vcard";if(e.type===s.default.MSG_TYPE.VCARD)return{name:l.default.getDefaultName(e),blob:new Blob([e.body],{type:t})};if(e.type===s.default.MSG_TYPE.MULTI_VCARD)return{name:l.default.getDefaultName(e),blob:new Blob([e.vcardList.map((e=>e.vcard)).join("\n")],{type:t})};var a=h(e);if(a)return a;yield e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:o.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD,isUserInitiated:!0});var r=h(e);if(r)return r;throw new Error("Unable to download because blob cannot be found")}))).apply(this,arguments)}function h(e){var{filehash:t,mediaBlob:a,renderableUrl:r}=e.mediaData;if(a)return{name:l.default.getDefaultName(e),url:r,blob:a.forceToBlob()};var i=n.default.get(t);return i?{blob:i,name:l.default.getDefaultName(e),url:n.default.getOrCreateURL(t)}:null}},75950:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s};var i=r(a(23279)),s=window.innerHeight,l=(0,i.default)((()=>{s=window.innerHeight}),500);window.addEventListener("resize",l)},76743:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0;if(!e)return t;e.quotedMsg&&(t+=54);e.caption&&(t+=31);switch(e.type){case o.NOTIFICATION:case o.GROUP_NOTIFICATION:case o.GP2:case o.BROADCAST_NOTIFICATION:case o.E2E_NOTIFICATION:case o.CALL_LOG:case o.CIPHERTEXT:case o.REVOKED:case o.CHAT:e.linkPreview&&(t+=53);var a=(0,n.numCodepoints)(e.body&&e.body.toString());return t+19*Math.ceil(a/100)+13;case o.IMAGE:return t+(e.mediaData&&e.mediaData.fullWidth&&e.mediaData.fullHeight||0)?Math.floor(Math.min(330/e.mediaData.fullWidth*e.mediaData.fullHeight,330)):330;case o.VIDEO:case o.AUDIO:return e.isGif?t+137:t+166;case o.LOCATION:return t+e.isLive?s.MSG_HEIGHT:l.PREVIEW_HEIGHT;case o.PTT:return t+67;case o.VCARD:return t+74;case o.DOCUMENT:return t+188;case o.STICKER:return t+125;case o.UNKNOWN:default:return t}};var i=r(a(75444)),s=a(60478),l=a(81957),n=a(96769),{MSG_TYPE:o}=i.default},71556:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(54302).Mirrored(["CONTACT_US","LICENSES","DECREASE_PTT_SPEED","DELETE_OR_EXIT_CHAT","GO_TO_NEXT_CHAT","GO_TO_PREV_CHAT","INCREASE_PTT_SPEED","LOGOUT","OPEN_NEW_CHAT","OPEN_NEW_GROUP","OPEN_PROFILE","OPEN_SETTINGS","SEARCH","SEARCH_IN_CHAT","TOGGLE_ARCHIVE","TOGGLE_MUTE","TOGGLE_PIN","TOGGLE_UNREAD","ZOOM_IN","ZOOM_OUT","ZOOM_RESET","OPEN_EMOJI_PANEL","OPEN_GIF_PANEL","OPEN_STICKER_PANEL"]);t.default=r},3722:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(19599)),s=a(39562);var l=new class{constructor(){document.addEventListener("keydown",(e=>{var t=(0,s.getAction)(e);t&&(0,i.default)(t)}))}trigger(e,...t){}menuBatchRenderWith(){}};t.default=l},21725:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LIST_FOCUSABLE_ITEM_CLASS_NAME=void 0;var s=i(a(81109)),l=i(a(48926)),n=r(a(67294)),o=i(a(62886)),d=i(a(35001)),u=i(a(34015)),c=i(a(26144)),f="focusable-list-item";t.LIST_FOCUSABLE_ITEM_CLASS_NAME=f;class h extends n.Component{constructor(...e){var t;super(...e),t=this,this._focusedItem=null,this._listIsFocused=!1,this._listHasBeenFocused=!1,this._priorityItemHasBeenFocused=!1,this._setRef=e=>{this._ref=e},this._setRefUIE=e=>{this._refUIE=e},this._handleKeyUp=e=>{e.preventDefault(),this._shiftFocus(-1)},this._handleKeyDown=e=>{e.preventDefault(),this._shiftFocus(1)},this._handleKeyEnd=e=>{e.preventDefault(),this._asyncHandleKeyEnd()},this._asyncHandleKeyEnd=(0,l.default)((function*(){var e,a,{onBeforeEnd:r}=t.props;r&&(yield r());var i=t._getLastItem(),s=null===(e=(a=t.props).getPriorityFocusItem)||void 0===e?void 0:e.call(a);s&&!t._priorityItemHasBeenFocused?t._focusItem(s):i&&t._focusItem(i)})),this._handleFocusGain=e=>{if(this._ref===e.target){var t;if(this._isKeyboardUser()){var a,r,i=null===(a=(r=this.props).getPriorityFocusItem)||void 0===a?void 0:a.call(r);!this._listHasBeenFocused&&i?this._focusItem(i):this._focusCurrentItem()}null===(t=this._refUIE)||void 0===t||t.activate()}else e.target instanceof HTMLElement&&e.target.classList.contains(f)&&this._setFocusedItem(e.target);this._listIsFocused=!0,this._listHasBeenFocused=!0},this._handleBlur=()=>{this._listIsFocused=!1},this._handleFocusRequest=()=>{this._ref&&!this._ref.contains(document.activeElement)&&o.default.focus(this._ref)}}componentDidUpdate(){this._priorityItemHasBeenFocused=!1,this._listIsFocused&&this._focusedItem&&this._ref&&!this._ref.contains(this._focusedItem)&&o.default.focus(this._ref)}_setFocusedItem(e){e.setAttribute("tabIndex","0"),this._focusedItem&&this._focusedItem!==e&&this._focusedItem.setAttribute("tabIndex","-1"),this._focusedItem=e}_isKeyboardUser(){return this.context}_getItems(){return this._ref?Array.from(this._ref.getElementsByClassName(f)):[]}_getLastItem(){var e=this._getItems();return e.length>0?e[e.length-1]:null}_focusItem(e){var t,a,r=null===(t=(a=this.props).getPriorityFocusItem)||void 0===t?void 0:t.call(a);r&&r===e&&(this._priorityItemHasBeenFocused=!0),o.default.focus(e,{preventScroll:!1})}_focusCurrentItem(){this._shiftFocus(0)}_shiftFocus(e){var t=this._getItems();if(0!==t.length){var a;if(this._focusedItem){var r=t.indexOf(this._focusedItem);-1!==r&&(a=r+e<0?t[0]:t[r+e])}a||(a=t[t.length-1]);var i=a;i.hasAttribute("tabIndex")||(__LOG__(3)`Focusable list items should have \`tabIndex\` attribute (that makes it programmatically focusable), but this element did not have it:`,function(e){e.setAttribute("tabIndex","-1")}(i)),this._focusItem(i)}}render(){var{"aria-label":e,className:t,children:a,dataTab:r,handlers:i,role:l}=this.props,o=(0,s.default)((0,s.default)({},i),{},{up:this._handleKeyUp,down:this._handleKeyDown,end:this._handleKeyEnd,"command+down":this._handleKeyEnd});return n.default.createElement(c.default,{displayName:"ListHotKeys",ref:this._setRefUIE,uimState:c.default.State.PASSIVE,requestFocus:this._handleFocusRequest},n.default.createElement(d.default,{handlers:o,className:t,"data-tab":r,onFocus:this._handleFocusGain,onBlur:this._handleBlur,onRef:this._setRef,role:l,"aria-label":e},a))}}t.default=h,h.contextType=u.default,h.displayName="ListHotKeys"},19599:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){switch(e){case s.default.CONTACT_US:return G;case s.default.LICENSES:return U;case s.default.DELETE_OR_EXIT_CHAT:return x;case s.default.GO_TO_NEXT_CHAT:return F;case s.default.GO_TO_PREV_CHAT:return B;case s.default.LOGOUT:return N;case s.default.OPEN_NEW_CHAT:return I;case s.default.OPEN_NEW_GROUP:return P;case s.default.OPEN_PROFILE:return A;case s.default.OPEN_SETTINGS:return T;case s.default.SEARCH:return O;case s.default.SEARCH_IN_CHAT:return L;case s.default.TOGGLE_ARCHIVE:return D;case s.default.TOGGLE_MUTE:return w;case s.default.TOGGLE_PIN:return R;case s.default.TOGGLE_UNREAD:return k;case s.default.ZOOM_IN:return j;case s.default.ZOOM_OUT:return V;case s.default.ZOOM_RESET:return H;case s.default.OPEN_EMOJI_PANEL:return Y;case s.default.OPEN_GIF_PANEL:return K;case s.default.OPEN_STICKER_PANEL:return q;case s.default.INCREASE_PTT_SPEED:case s.default.DECREASE_PTT_SPEED:return null}}(e);if(!t)return;try{t()}catch(t){__LOG__(3)`keyboard:error occurred running action ${e}.`}};var i=r(a(67294)),s=r(a(71556)),l=r(a(74798)),n=r(a(33766)),o=r(a(51115)),d=r(a(11288)),u=r(a(75444)),c=r(a(62899)),f=a(26226),h=r(a(80162)),p=r(a(28482)),m=r(a(33048)),_=r(a(51176)),v=r(a(47572)),g=a(7629),E=r(a(32457)),S=r(a(44563)),C=r(a(82670)),y=r(a(75629)),b=r(a(98165)),M=r(a(13353));function T(){n.default.existsDrawerLeft((e=>{e&&n.default.closeDrawerLeft(),n.default.openDrawerLeft(i.default.createElement(y.default,null))}))}function I(){n.default.existsDrawerLeft((e=>{e&&n.default.closeDrawerLeft(),n.default.openDrawerLeft(i.default.createElement(_.default,null))}))}function P(){n.default.existsDrawerLeft((e=>{e&&n.default.closeDrawerLeft(),n.default.openDrawerLeft(i.default.createElement(v.default,null))}))}function A(){n.default.existsDrawerLeft((e=>{e&&n.default.closeDrawerLeft();var t=(0,f.getMaybeMeUser)(),a=b.default.assertGet(t),r=S.default.assertGet(t),s=c.default.assertGet(t);n.default.openDrawerLeft(i.default.createElement(E.default,{status:a,profilePicThumb:r,contact:s,conn:d.default}))}))}function N(){if(!m.default.some((e=>e.ack===u.default.ACK.CLOCK&&e.local&&e.isSentByMe)))return M.default.logout();n.default.openModal(i.default.createElement(o.default,{title:h.default.t(609),onOK:()=>{__LOG__(2)`Keyboard: user inputs logout`,M.default.logout()},okText:h.default.t(1099),onCancel:()=>n.default.closeModal(),cancelText:h.default.t(1768)},h.default.t(1502)))}function O(){n.default.focusChatSearch()}function D(){var e=W();if(e&&e.canArchive()){var t=e.archive;n.default.archiveChat(e,!t)}}function w(){var e=W();if(e&&e.mute.canMute()){var t=e.mute.isMuted;n.default.muteChat(e,!t)}}function R(){var e=W();if(e&&(null!=e.pin||l.default.filter((e=>e.pin)).length<3)){var t=Boolean(e.pin);n.default.pinChat(e,!t)}}function k(){var e=W();if(e){var t=e.markedUnread;n.default.markChatUnread(e,!t)}}function L(){var e=W();e&&n.default.chatSearch(e)}function x(){var e=W();e&&n.default.deleteOrExitChat(e)}function F(){n.default.focusNextChat(!0)}function B(){n.default.focusPrevChat(!0)}function G(){n.default.openModal(i.default.createElement(C.default,null))}function U(){n.default.openModal(i.default.createElement(p.default,null))}function j(){}function V(){}function H(){}function W(){var e=l.default.filter((e=>e.active));return e.length?e[0]:void 0}function Y(){n.default.openComposeBoxPanel(g.PANELS.EMOJI)}function K(){n.default.openComposeBoxPanel(g.PANELS.GIF)}function q(){n.default.openComposeBoxPanel(g.PANELS.STICKER)}},39562:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAction=function(e){var{key:t,ctrlKey:a,metaKey:r,altKey:i,shiftKey:s}=e;if("Control"===t||"Meta"===t||"Alt"===t||"Shift"===t)return;return a&&r||a&&i?o[function(e,t){if(t&&("Tab"===e||"Enter"===e||"Backspace"===e||" "===e))return`Shift+${e}`;return e}(t,s)]:void 0},t.getKey=function(e){var t=l(e);if(!t.length)return;var{key:a,nativeKey:r,nativeModifier:i}=t[0],s=r||a;return s?d(s,i):void 0},t.getAdditionalShortcuts=function(){var e={};return[...s.default.members()].forEach((t=>{var a=l(t);a.length<=1||a.slice(1).forEach((({key:a,nativeKey:r,nativeModifier:i})=>{var s=r||a;s&&(e[d(s,i)]=t)}))})),e},t.getShortcutKey=function(e){var t=l(e);if(t.length){var{key:a,nativeKey:r,webKey:i}=t[0];return i||a}return};var i=r(a(11700)),s=r(a(71556));function l(e){switch(e){case s.default.CONTACT_US:return[{key:"H"}];case s.default.DELETE_OR_EXIT_CHAT:return[{key:"Backspace",nativeKey:"D"}];case s.default.GO_TO_NEXT_CHAT:return[{key:"Tab",nativeModifier:"Ctrl"},{key:"}"}];case s.default.GO_TO_PREV_CHAT:return[{key:"Shift+Tab",nativeModifier:"Ctrl"},{key:"{"}];case s.default.LOGOUT:return[];case s.default.OPEN_NEW_CHAT:return[{key:"n"}];case s.default.OPEN_NEW_GROUP:return[{key:"N"}];case s.default.OPEN_PROFILE:return[{key:"p"}];case s.default.OPEN_SETTINGS:return[{key:","}];case s.default.SEARCH:return[{webKey:"/",nativeKey:"f"}];case s.default.SEARCH_IN_CHAT:return[{key:"F"}];case s.default.TOGGLE_ARCHIVE:return[{key:"E"}];case s.default.TOGGLE_MUTE:return[{key:"M"}];case s.default.TOGGLE_PIN:return[{key:"P"}];case s.default.TOGGLE_UNREAD:return[{key:"U"}];case s.default.ZOOM_IN:return[{key:"+"},{key:"="}];case s.default.ZOOM_OUT:return[{key:"-"}];case s.default.ZOOM_RESET:return[{key:"0"}];case s.default.INCREASE_PTT_SPEED:return[{key:">"}];case s.default.DECREASE_PTT_SPEED:return[{key:"<"}];case s.default.OPEN_EMOJI_PANEL:return[{key:"e"}];case s.default.OPEN_GIF_PANEL:return[{key:"g"}];case s.default.OPEN_STICKER_PANEL:return[{key:"s"}];default:return[]}}var n,o=(n={},[...s.default.members()].forEach((e=>{l(e).forEach((({key:t,webKey:a})=>{var r=a||t;r&&(n[r]=e)}))})),n);function d(e,t="CmdOrCtrl"){var a="+"!==e?e:"Plus";return 1===a.length&&a.match(/[a-z]/i)?a.match(/[a-z]/)?`${t}+${(0,i.default)(a)}`:`Shift+${t}+${a}`:`${t}+${(0,i.default)(a)}`}},76076:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(48926)),s=r(a(88306)),l=a(83990),n=a(91591),o=r(a(77188)),d=a(81820),u=a(86270),c=r(a(35822));function f(){return(f=(0,i.default)((function*(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND)){var t=(0,u.parseAPICmd)(e);return t.resultType===l.APICmd.CATALOG?(0,d.getProductOrCatalogLinkPreview)(e,t.data.catalogOwnerJid):t.resultType===l.APICmd.PRODUCT?(0,d.getProductOrCatalogLinkPreview)(e,t.data.businessOwnerJid,t.data.productId):null}var{title:a,description:r,canonicalUrl:i,matchedText:s,preview:f,thumbnail:h,doNotPlayInline:p}=yield c.default.queryLinkPreview(e);return s&&(a||r)?{url:e,data:{title:a||void 0,description:r||void 0,canonicalUrl:i||void 0,matchedText:s,richPreviewType:"video"===f?n.ExtendedTextMessagePreviewType.VIDEO:n.ExtendedTextMessagePreviewType.NONE,thumbnail:h||void 0,doNotPlayInline:p}}:null}))).apply(this,arguments)}var h=(0,s.default)((function(){return f.apply(this,arguments)}));t.default=h},81820:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductOrCatalogLinkPreview=function(){return _.apply(this,arguments)};var i=r(a(48926)),s=r(a(75204)),l=r(a(62899)),n=a(39017),o=a(91591),d=a(26226),u=r(a(88037)),c=r(a(80162)),f=a(23332),h=r(a(53680)),p=a(52152),m=100;function _(){return(_=(0,i.default)((function*(e,t,a){var r,i,_,v;if(!h.default.isWid(t))return null;var g,E=(0,p.createWid)(t);try{g=yield s.default.find(E)}catch(e){return null}var S=a?g.productCollection.get(a):g.productCollection.getProductModels().find((e=>"APPROVED"===e.reviewStatus&&!e.isHidden));if(null==S||"APPROVED"!==S.reviewStatus||S.isHidden)return null;var C,y,b,M,T=S.getPreviewImage();if(T&&([C]=yield(0,f.getResizedThumbData)(T.mediaUrl,[{width:m,height:m,imageFormat:"image/jpeg",imageFormatOptions:.75}])),null===(r=(0,d.getMaybeMeUser)())||void 0===r?void 0:r.equals(E)){var I=l.default.get(E);if(null==I)return null;y=I.displayName}else{var P;y=null===(P=(yield(0,u.default)(E)).bizInfo)||void 0===P?void 0:P.verifiedName.name}return a?(b=c.default.t(512,{productName:S.name,catalogOwnerName:y}),S.description&&null!=S.priceAmount1000&&S.currency?M=`${S.description} · ${(0,n.formatAmount1000)(S.currency,S.priceAmount1000)}`:S.description?M=S.description:null!=S.priceAmount1000&&S.currency&&(M=(0,n.formatAmount1000)(S.currency,S.priceAmount1000))):(b=c.default.t(511,{catalogOwnerName:y}),M=c.default.t(510)),{url:e,data:{title:b,description:M||void 0,canonicalUrl:e,matchedText:e,richPreviewType:o.ExtendedTextMessagePreviewType.NONE,thumbnail:null===(i=C)||void 0===i?void 0:i.dataUrl,thumbnailHeight:null===(_=C)||void 0===_?void 0:_.height,thumbnailWidth:null===(v=C)||void 0===v?void 0:v.width,doNotPlayInline:!0}}}))).apply(this,arguments)}},50560:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectionUrl=function(e,t){var a=s.default.getLocale();return`${n}//${e},${t}?hl=${a}`},t.getSearchUrl=function(e){var t=s.default.getLocale();return`${o}/${encodeURIComponent(e)}/z?hl=${t}`},t.getMapUrl=function(e,t,a){var r=s.default.getLocale();return a?`${o}/${encodeURIComponent(a)}/@${e},${t},${u}z?hl=${r}`:l.default.build(d,{q:`${e},${t}`,z:u,hl:r})};var i=r(a(75444)),s=r(a(80162)),l=r(a(97439)),{G_MAPS_DIR_URL:n,G_MAPS_SEARCH_URL:o,G_MAPS_URL:d,SEARCH_ZOOM:u}=i.default},46505:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(e,t){var a,r=!1,i=0,s=!1;function f(){i&&clearTimeout(i),i=setTimeout((()=>{t?t():(!function(e){"camera"===e?n.default.openModal(l.default.createElement(u.default,{messaging:u.Messaging.CAMERA,type:u.default.TYPE.GUIDE_ALLOW})):n.default.openModal(l.default.createElement(u.default,{messaging:u.Messaging.MIC,type:u.default.TYPE.GUIDE_ALLOW}))}(e),s=!0)}),1e3)}return{asyncStream:(0,c.default)((({retry:t,failCount:i})=>new Promise(((s,l)=>{f(),d.default?(0,d.default)(h[e][i]).then((e=>r?void p(e):(a=e,e))).then(s).catch((a=>{"NotReadableError"===a.name&&h[e][i+1]?t():l(a)})):(__LOG__(2)`MediaCapture:start() no ability to capture media`,l(new o.GUM.GUMError))})))).catch((e=>{var t=e&&e.name||e,a=o.GUM[t]||o.GUM.GUMError;return Promise.reject(new a)})).finally((()=>{s&&n.default.closeModal(),i&&clearTimeout(i)})),disposeStream:()=>{r=!0,a&&p(a)}}},t.stop=p,t.isSrcObjectInVideoElement=function(){void 0===s&&(s="srcObject"in document.createElement("video"));return s};var s,l=i(a(67294)),n=i(a(33766)),o=a(12536),d=i(a(14614)),u=r(a(29742)),c=i(a(76017)),f=i(a(43232)),h={camera:[{video:{width:f.default.imageMaxEdge,height:f.default.imageMaxEdge}},{video:{width:Math.min(1280,f.default.imageMaxEdge),height:Math.min(720,f.default.imageMaxEdge)}},{video:!0}],microphone:[{audio:!0}]};function p(e){if("function"==typeof e.stop)e.stop();else for(var t=e.getTracks(),a=0;a<t.length;a++)t[a].stop()}},62132:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);t.yj=function(){if(!f())return;setInterval((()=>{new n.default.WebcMemoryStat((0,s.default)((0,s.default)({},(0,d.default)(f(),"getMemoryInfo()")),{},{hasVerifiedNumber:u.default.mode===u.StreamMode.MAIN,numMessages:o.default.length})).commit()}),l.default.MEMORY_METRIC_INTERVAL)};var s=i(a(81109)),l=i(a(75444)),n=i(a(72462)),o=i(a(33048)),d=i(a(8238)),u=r(a(47644)),c=Date.now();function f(){var e=performance&&performance.memory;if(e)return{uptime:(Date.now()-c)/1e3,jsHeapSizeLimit:e.jsHeapSizeLimit,totalJsHeapSize:e.totalJSHeapSize,usedJsHeapSize:e.usedJSHeapSize}}},21421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResults=function(e,t){var a=t.map((({contact:e})=>e)),r=(e||"").toLowerCase();return a.filter((e=>function(e,t){if(t.isMe)return!1;var a=[t.searchName||t.formattedName];!t.isMyContact&&t.notifyName&&a.push(t.notifyName.toLowerCase());return a.some((t=>function(e,t){var a=-1;do{if(t.indexOf(e,a+1)===a+1)return!0}while(-1!==(a=t.indexOf(" ",a+1)));return!1}(e,t)))}(r,e)))}},84649:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openMessengerRoomUrl=function(e){var t={source:"whatsapp",ep:e?3:4},a=l.default.build("https://messenger.com/groupcall/create",t);(0,i.openExternalLink)(a);var r=s.default.DESTINATION.BROWSER,n=e?s.default.ROOMS_ENTRY_POINT.ATTACHMENT:s.default.ROOMS_ENTRY_POINT.WEB_MENU;new s.default.RoomsCreationFlow({entryResult:r,roomsEntryPoint:n}).commit()};var i=a(1886),s=r(a(72462)),l=r(a(97439))},63611:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(2525)),s=r(a(41609)),l=r(a(14090));class n extends l.default{constructor(e,t){super(),this.list=e,this.selected=e.reduce(((e,t,a)=>(e[a]=!1,e)),{}),this.getter=t}init(e=[]){(0,s.default)(this.selected)||((0,s.default)(e)?this.unsetAll():(this.selected=e.reduce(((e,t,a)=>{var r=this.list.indexOf(t);return e[a]=r>-1&&this.selected[r],e}),{}),this.list=e))}unsetAll(){(0,i.default)(this.selected,((e,t)=>{e&&this.set(t,!1)}))}reset(e=!0){(0,i.default)(this.selected,((t,a)=>{t&&this.trigger(this.getter(this.list[a]),!0,!0,e)}))}set(e,t=!0,a=!0){if(this.list.length){var r=Math.min(Math.max(e,-1),this.list.length-1),i=r>-1?this.list[r]:void 0;i&&(this.selected[r]&&!t||!this.selected[r]&&t)&&(this.selected[r]=t,this.trigger(this.getter(i),t,a))}}setVal(e,t=!0,a=!0){var r=this.list.indexOf(e);-1===r&&(r=this.list.length,this.list.push(e),this.selected[r]=!1),this.set(r,t,a)}setFirst(e=!0){(0,s.default)(this.list)||this.set(0,!0,e)}setLast(e=!0){(0,s.default)(this.list)||this.set(this.list.length-1,!0,e)}getSelected(){return this.list.reduce(((e,t,a)=>(this.selected[a]&&e.push(t),e)),[])}isSelected(e){return!!this.selected[this.list.indexOf(e)]}isInList(e){return this.list.includes(e)}}t.default=n},74476:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllMuteDurations=o,t.getDefaultMuteDuration=function(){return o()[0].duration},t.calculateMuteExpiration=function(e){if(e===Number.POSITIVE_INFINITY)return s.default.MUTE_ALWAYS_EXPIRATION_SENTINEL;return 60*e*60+(0,i.default)().unix()};var i=r(a(30381)),s=r(a(75444)),l=r(a(80162)),n=r(a(43232));function o(e){return e?[{label:l.default.t(1172),duration:1},{label:l.default.t(1175),duration:8},{label:l.default.t(1171),duration:24},{label:l.default.t(1173),duration:168}]:[{label:l.default.t(1175),duration:8},{label:l.default.t(1173),duration:168},n.default.muteAlways?{label:l.default.t(1176),duration:Number.POSITIVE_INFINITY}:{label:l.default.t(1174),duration:8760}]}},78037:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(81109)),s=r(a(6479)),l=r(a(57055)),n=r(a(74798)),o=r(a(33766)),d=r(a(75444)),u=r(a(80162)),c=r(a(33048)),f=a(56670);t.default=class{constructor(e,t,a){this.close=()=>{this.notification&&this._waitForInteractionStop().then((()=>{this.notification&&(0,f.isFunction)(this.notification.close)&&this.notification.close()})).catch((()=>{}))},this._onClose=()=>{this.waitingPromise.resolver(),window.removeEventListener("beforeunload",this.close),this.notification&&(this.notification.removeEventListener("click",this._onClick),this.notification.removeEventListener("close",this._onClose),this.notification.removeEventListener("show",this._onShow)),window.clearTimeout(this._onShowTimeout),this.msg&&this.msg.off("change:type",this._onRevoke)},this._onClick=()=>{window.focus(),this.onClick();var e=this.chat,t=this.msg;if(e){var a=t&&t!==e.msgs.last()?e.getSearchContext(t):void 0;o.default.openChatAt(e,a).then((t=>{t&&o.default.focusChatTextInput(e)})),o.default.closeModalMedia(),this.close()}},this._onShow=()=>{this.msg&&this.msg.on("change:type",this._onRevoke)},this._onRevoke=()=>{this.msg&&this.msg.type===d.default.MSG_TYPE.REVOKED&&this.close()},this.msg=c.default.get(t),this.chat=n.default.get(e);var r=!!l.default.get(t);this._timeoutDuration=r?d.default.CALL_NOTIFICATION_TIMEOUT:d.default.NOTIFICATION_TIMEOUT;var h=new Promise((e=>{this.waitingPromise={resolver:e}}));this.waitingPromise.promise=h;var{title:p,notification:m}=a,_=(0,s.default)(a,["title","notification"]);try{this.notification=new m(p,(0,i.default)({tag:r?t:e.toString(),renotify:!0,dir:"auto",lang:u.default.getLocale(),silent:!0},_)),this.notification.addEventListener("click",this._onClick),this.notification.addEventListener("close",this._onClose),this.notification.addEventListener("show",this._onShow),window.addEventListener("beforeunload",this.close)}catch(e){__LOG__(2)`Failed to create notification: ${e.name}:${e.message}`,this.waitingPromise.resolver()}}onClick(){}_waitForInteractionStop(){return Promise.resolve()}waitForClose(){return this.waitingPromise.promise}detach(){this._onClose()}}},13047:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownAsNeeded=function(){y.forEach(((e,t)=>{P(y,t)})),b.forEach(((e,t)=>{P(b,t)}))},t.showCallNotification=function(e,t,a,r){if(!e||!t||_.default.globalMute().isMuted)return;if(window.Notification&&window.Notification.permission===d.default.PERMISSION_ALLOWED&&_.default.getGlobalNotifications()){var i,s=u.default.get(e),l=s?s.formattedName:(0,C.default)(e);i=r?a?m.default.t(964,{name:l}):m.default.t(965,{name:l}):a?m.default.t(966,{name:l}):m.default.t(967,{name:l});var n=m.default.t(963);T(b,e,t,i,n,d.default.USER_DEFAULT_ICON)}_.default.getGlobalSounds()&&(b.get(e.toString())||Promise.resolve()).then(v.playNotification).catch((()=>{}))},t.showMsgNotification=function(e){var t=e.chat;if(document.hasFocus()&&t.active)return;if(_.default.globalMute().isMuted)return;if(function(e){var t=e.chat;if(!t.mute.isMuted)return!1;if(!t.isGroup)return!0;var a=(0,f.getMaybeMeUser)();if(e.isMentioned(a)||e.isQuoted(a)){var r=o.default.get(e.sender);return!0===(null==r?void 0:r.mute.isMuted)}return!0}(e))return;if(M(e))return;if(function(e){if(!e.isGroup)return!1;if(e.isGroup&&e.isReadOnly)return!1;var t=Date.now(),a=e.squelch||0;if(t>a)return p.default.find(e.id).then((()=>{var t=p.default.get(e.id);if(t){var a=t.participants.length,r=1e3*Math.min(120,30+5*a);e.squelch=Date.now()+r}})).catch((0,i.filteredCatch)(c.WebdDrop,(function(){e.squelch=Date.now()+6e4}))),!1;return!0}(e.chat))return;if(window.Notification&&window.Notification.permission===d.default.PERMISSION_ALLOWED&&_.default.getGlobalNotifications()){var a=(0,n.default)(e);a&&a.charCodeAt(0)>=128&&(a=" "+a);var r=t.isGroup?d.default.GROUP_DEFAULT_ICON:d.default.USER_DEFAULT_ICON,s=t.isGroup?m.default.t(651):m.default.t(650),l=t.contact.formattedName||s;T(y,t.id,e.id.toString(),l,a,r,t.canSend)}_.default.getGlobalSounds()&&(t.id&&y.get(t.id.toString())||Promise.resolve()).then(v.playNotification).catch((()=>{}))},t.cancelCallNotification=function(e){e&&P(b,e.toString())},t.closeNotifications=function(e){if(!e||!e.id)return;P(y,e.id.toString()),P(b,e.id.toString())},t.isArchivedAndNotMentioned=M;var i=a(24788),s=a(79197),l=a(13266),n=r(a(13498)),o=r(a(74798)),d=r(a(75444)),u=r(a(62899)),c=a(54438),f=a(26226),h=a(34605),p=r(a(8670)),m=r(a(80162)),_=r(a(70372)),v=a(83062),g=r(a(35643)),E=r(a(44563)),S=r(a(19826)),C=r(a(8745)),y=new Map,b=new Map;function M(e){var t=e.chat;if(!(0,h.archiveV2Supported)())return!1;if(!S.default.showArchiveV2)return!1;if(!t.archive)return!1;if(!t.isGroup)return!0;var a=(0,f.getMaybeMeUser)();if(e.isMentioned(a)||e.isQuoted(a)){var r=o.default.get(e.sender);return!0===(null==r?void 0:r.mute.isMuted)}return!0}function T(e,t,a,r,n,o,u){var f=(0,s.promiseTimeout)(E.default.find(t).cancellable(),1500,"showNotificationTimeout").then((function(e){var t=e&&e.img?e.img:o;return(0,v.cachePath)(t)})).catch((0,i.filteredCatch)([c.WebdDrop,l.TimeoutError],(function(){return __LOG__(2)`NotificationBackend:IconLoadTimeoutError:${t.toString()}`,(0,v.cachePath)(o)}))).then((i=>{if(window.Notification.permission!==d.default.PERMISSION_ALLOWED)return Promise.reject(new Promise.CancellationError("Permission Denied"));var s=new g.default(t,a,r,n,i,u);return s.waitForClose().then((()=>{I(e,t,s)})),s}));return f.catch((0,i.filteredCatch)(Promise.CancellationError,(function(){I(e,t)}))),e.set(t.toString(),f),f}function I(e,t,a){var r=e.get(t.toString());if(r){if(a){if(r.isFulfilled()&&a!==r.value())return;if(r.isPending())return}e.delete(t.toString())}}function P(e,t){var a=e.get(t);if(a){if(a.isFulfilled())a.value().close();else a.cancel();e.delete(t)}}},83062:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.playNotification=function(){s.play().catch((()=>{}))},t.cachePath=function(e){return Promise.resolve(e)};var i=r(a(75444)),s=new window.Audio(i.default.NOTIFICATION_TONE_PATH)},35643:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(78037)),s=r(a(5318)),l=r(a(97439));class n extends i.default{constructor(e,t,a,r,i){super(e,t,{title:s.default.normalizeAllEmojis(a),notification:window.Notification,body:s.default.normalizeAllEmojis(r),icon:l.default.relToAbs(i)})}}t.default=n},61170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.test(e)?e.replace(/[^0-9]/g,""):null};var a=/^[0-9+()\- ]+$/},86710:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(63337)),s=r(a(14614)),l=r(a(62042));class n{constructor(e){this.duration=0,this.totalLength=0,this.recordedPages=[],this.state="inactive",this._isFirstBuffer=!1,this.storePage=({data:e})=>{if(this.recordedPages.push(e),this.totalLength+=e.length,4&e[5]){(0,i.default)(this.encoder,"this.encoder").removeEventListener("message",this.storePage);for(var t=new Uint8Array(this.totalLength),a=0,r=0;r<this.recordedPages.length;r++)t.set(this.recordedPages[r],a),a+=this.recordedPages[r].length;this._resolveBlobPromise(new Blob([t],{type:"audio/ogg; codecs=opus"})),this.recordedPages=[],this.eventTarget.dispatchEvent(new Event("stop"))}};var t=e;if(!n.isRecordingSupported())throw new Error("Recording is not supported in this browser");this._blobPromise=new Promise((e=>{this._resolveBlobPromise=e})),this.audioContext=new window.AudioContext,this.config=t=t||{},this.config.bufferLength=t.bufferLength||4096,this.config.monitorGain=t.monitorGain||0,this.config.numberOfChannels=t.numberOfChannels||1,this.config.originalSampleRate=this.audioContext.sampleRate,this.config.encoderSampleRate=t.encoderSampleRate||48e3,this.config.leaveStreamOpen=t.leaveStreamOpen||!1,this.config.maxBuffersPerPage=t.maxBuffersPerPage||40,this.config.encoderApplication=t.encoderApplication||2049,this.config.encoderFrameSize=t.encoderFrameSize||20,this.config.streamOptions=t.streamOptions||{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}},this.eventTarget=document.createDocumentFragment(),this.scriptProcessorNode=this.audioContext.createScriptProcessor(this.config.bufferLength,this.config.numberOfChannels,this.config.numberOfChannels),this.scriptProcessorNode.onaudioprocess=e=>{this.encodeBuffers(e.inputBuffer)},this._analyserNode=this.audioContext.createAnalyser(),this._analyserNode.fftSize=32,this._analyserNode.smoothingTimeConstant=0,this._analyserNode.minDecibels=-60,this._analyserNode.maxDecibels=-10,this._analyserData=new Uint8Array(this._analyserNode.frequencyBinCount),this.monitorNode=this.audioContext.createGain(),this.setMonitorGain(this.config.monitorGain),this.config.sampleRate<this.audioContext.sampleRate&&this.createButterworthFilter()}static isRecordingSupported(){return Boolean(window.AudioContext&&s.default)}getCurrentAmplitude(){return this._analyserNode.getByteFrequencyData(this._analyserData),Math.max(...this._analyserData)/255}addEventListener(e,t,a){this.eventTarget.addEventListener(e,t,a)}clearStream(){this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),delete this.stream)}createButterworthFilter(){var e=this.audioContext.createBiquadFilter(),t=this.audioContext.createBiquadFilter(),a=this.audioContext.createBiquadFilter();this.filterNode=e,this.filterNode2=t,this.filterNode3=a,e.type=t.type=a.type="lowpass";var r=this.config.sampleRate/2;e.frequency.value=t.frequency.value=a.frequency.value=r-r/3.5355,e.Q.value=.51764,t.Q.value=.70711,a.Q.value=1.93184,e.connect(t),t.connect(a),a.connect(this.scriptProcessorNode)}encodeBuffers(e){if(this._isFirstBuffer)this._isFirstBuffer=!1;else if("recording"===this.state){for(var t=[],a=0;a<e.numberOfChannels;a++)t[a]=e.getChannelData(a);(0,i.default)(this.encoder,"this.encoder").postMessage({command:"encode",buffers:t}),this.duration+=e.duration,this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration}))}}initStream(e){if(this.stream)this.eventTarget.dispatchEvent(new Event("streamReady"));else{if(e){this.stream=e;var t=this.audioContext.createMediaStreamSource(e);return this.sourceNode=t,t.connect(this.filterNode||this.scriptProcessorNode),t.connect(this.monitorNode),t.connect(this._analyserNode),void this.eventTarget.dispatchEvent(new Event("streamReady"))}if(!s.default)throw new Error("Recorder:initStream no audio capability");(0,s.default)({audio:this.config.streamOptions}).then((e=>{this.stream=e;var t=this.audioContext.createMediaStreamSource(e);this.sourceNode=t,t.connect(this.filterNode||this.scriptProcessorNode),t.connect(this.monitorNode),t.connect(this._analyserNode),this.eventTarget.dispatchEvent(new Event("streamReady"))})).catch((e=>{this.eventTarget.dispatchEvent(new ErrorEvent("streamError",{error:e}))}))}}pause(){"recording"===this.state&&(this.state="paused",this.eventTarget.dispatchEvent(new Event("pause")))}removeEventListener(e,t,a){this.eventTarget.removeEventListener(e,t,a)}resume(){"paused"===this.state&&(this.state="recording",this.eventTarget.dispatchEvent(new Event("resume")))}setMonitorGain(e){this.monitorNode.gain.value=e}start(){if("inactive"===this.state&&this.stream){var e=new l.default;this.encoder=e,this.recordedPages=[],this.totalLength=0,e.addEventListener("message",this.storePage),this._isFirstBuffer=!0,this.duration=0,this.state="recording",this.monitorNode.connect(this.audioContext.destination),this.scriptProcessorNode.connect(this.audioContext.destination),this.eventTarget.dispatchEvent(new Event("start")),this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration})),e.postMessage({command:"encode-init",config:this.config})}}stop(){"inactive"!==this.state&&(this.state="inactive",this.audioContext.close&&this.audioContext.close(),this.monitorNode.disconnect(),this.scriptProcessorNode.disconnect(),this._analyserNode.disconnect(),this.config.leaveStreamOpen||this.clearStream(),(0,i.default)(this.encoder,"this.encoder").postMessage({command:"encode-done"}))}getBlob(){return this._blobPromise}}t.default=n},6463:(e,t,a)=>{"use strict";var r=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.liveLocationIcon=function(e){var t="live-location";e&&(t+="-active");var a=function(){switch(i.default.platform){case i.PLATFORMS.ANDROID:case i.PLATFORMS.SMBA:return"android";case i.PLATFORMS.IPHONE:case i.PLATFORMS.SMBI:case i.PLATFORMS.IPAD:case i.PLATFORMS.IPOD:return"iphone";case i.PLATFORMS.WP7:return"wp";default:return""}}();a&&(t+="-"+a);return t};var i=r(a(11288))},40845:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{constructor(e){this.promise=e,this.lastUsedTime=this.createdTime=+Date.now()}}t.default=class{constructor(e,{maxCached:t=10,maxAge:a=1/0,shouldCache:r}){this._cache={},this._maxCached=t,this._maxAge=a,this._createPromiseFunc=e,this._shouldCacheFunc=r}getOrRun(e,...t){var r=this._cache;if(this._maxAge!==1/0)for(var i=Date.now()-this._maxAge,s=Object.keys(r),l=0;l<s.length;l++){var n=s[l];r[n].createdTime<i&&delete r[n]}var o=r[e];if(o)return o.lastUsedTime=+Date.now(),o.promise;var d=Object.keys(r);if(d.length>=this._maxCached){for(var u,c,f=0;f<d.length;f++){var h=d[f],p=r[h];(null==c||p.lastUsedTime<c)&&(c=p.lastUsedTime,u=h)}u&&delete r[u]}var m=this._createPromiseFunc.apply(void 0,[e,...t]);return r[e]=new a(m),m.then((t=>{var a=this._shouldCacheFunc;a&&this._cache[e]===m&&!a(t)&&delete this._cache[e]})).catch((()=>{this._cache[e]===m&&delete this._cache[e]})),m}}},39417:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(81109)),s=a(18038),l=r(a(75444)),n=a(26226),o=r(a(75950)),d=r(a(76743)),u="before",c="after";function f(e,t,a){var r=t,i=e.toArray(),s=a===u?-1:1;return{hasNext:()=>r>=0&&r<i.length,next(){var e=i[r];return e||__LOG__(3)`Invalid cursor at ${r}, array.length = ${i.length}, element = ${e}`,r+=s,e}}}function h(e,t,a,r=1,i){for(var n,u=(0,o.default)()*r,c=f(e,t,a),h=0,p=0;c.hasNext();){var m=c.next(),_=(0,d.default)(m),v=2*(m.isNotification?1:0)+m.isSentByMe;if(p++,(h+=_+(v&&v===n?2:12))>u)break;if(p>=i)break;var g=m.asGroupedSticker,E=null!=m.asAlbumAsset;if(g||E){var S=[],C=!1,y=1;if(g){var b=void 0;if(c.hasNext()){if(b=c.next(),S.push(b),++p>=i)break;(0,s.canBeGroupedAsAlbum)(m.safe(),b.safe())&&b.asGroupedSticker&&(C=!0)}}if(E)for(var M=m,T=void 0;c.hasNext()&&y<l.default.ALBUM_MAX_SIZE&&(T=c.next(),S.push(T),!(++p>=i))&&(0,s.canBeGroupedAsAlbum)(M.safe(),T.safe())&&T.asAlbumAsset;)y++,M=T;if(g&&!C||E&&y<l.default.ALBUM_MIN_SIZE)if((h+=S.reduce(((e,t)=>e+(0,d.default)(t)),0))>u)break}n=v}return p}function p(e,t,a,r=1,i){for(var u,c=(0,o.default)()*r,h=f(e,t,a),p=0,m=0;h.hasNext();){var _=h.next(),v=(0,d.default)(_),g=_.author||(_.isSentByMe?(0,n.getMaybeMeUser)():void 0);if(m++,(p+=v+(g&&!_.isSentByMe&&g!==u?19:0)+(g&&g===u?2:12))>c)break;if(m>=i)break;var E=_.asGroupedSticker,S=null!=_.asAlbumAsset;if(E||S){var C=[],y=!1,b=1;if(E){var M=void 0;if(h.hasNext()){if(M=h.next(),C.push(M),++m>=i)break;(0,s.canBeGroupedAsAlbum)(_.safe(),M.safe())&&M.asGroupedSticker&&(y=!0)}}if(S)for(var T=_,I=void 0;h.hasNext()&&b<l.default.ALBUM_MAX_SIZE&&(I=h.next(),C.push(I),!(++m>=i))&&(0,s.canBeGroupedAsAlbum)(T.safe(),I.safe())&&null!=I.asAlbumAsset;)b++,T=I;if(E&&!y||S&&b<l.default.ALBUM_MIN_SIZE)if((p+=C.reduce(((e,t)=>e+(0,d.default)(t)),0))>c)break}u=g}return m}function m(e,t,a,r=1,i){for(var s=(0,o.default)()*r,l=f(e,t,a),n=0,u=0;l.hasNext();){var c=l.next();if(u++,(n+=(0,d.default)(c)+65)>s)break;if(u>=i)break}return u}function _(e,t,a=c){for(var r=2*(0,o.default)(),i=f(e,t,a),[s,l,n]=[0,!0,null];i.hasNext();){var u=i.next(),h=(0,d.default)(u),p=2*(u.isNotification?1:0)+u.isSentByMe;if((s+=h+(p&&p===n?2:12))>r){l=!1;break}n=p}return l}class v{static create(e){var{msgCollection:t,focusedMsgKey:a,type:r,maxInitialCount:i=Number.MAX_SAFE_INTEGER}=e;return new v({type:r}).init(a,t,i)}constructor(e){var{type:t,before:a,after:r,focusedMsgKey:i,prevFocusedMsgKey:s}=e;this._type=t,this._focusedMsgKey=i,this._prevFocusedMsgKey=s,this.before=a||0,this.after=r||0}_cloneWith(e){return new v((0,i.default)({type:this._type,before:this.before,after:this.after,focusedMsgKey:this._focusedMsgKey,prevFocusedMsgKey:this._prevFocusedMsgKey},e))}_getCursorSize(e,t,a,r,i){return function(e){switch(e){case l.default.RENDER_CURSOR.CONVERSATION:return h;case l.default.RENDER_CURSOR.GROUP_CONVERSATION:return p;case l.default.RENDER_CURSOR.STARRED_DRAWER:return m;default:return h}}(this._type)(e,t,a,r,i)}getStart(e){return Math.max(g(this._focusedMsgKey,e,this._type)-this.before,0)}getEnd(e){return Math.min(g(this._focusedMsgKey,e,this._type)+this.after+1,e.length)}hasBefore(e){return g(this._focusedMsgKey,e,this._type)-this.before>0}hasAfter(e){return g(this._focusedMsgKey,e,this._type)+this.after<e.length-1}init(e,t,a=Number.MAX_SAFE_INTEGER){return new v({type:this._type,before:0,after:0,focusedMsgKey:e}).loadBefore(t,{factor:1,maxCount:a}).loadAfter(t,{factor:1,maxCount:a})}setFocusedMsgKey(e,t){var a,r,i=g(this._focusedMsgKey,e,this._type),s=g(t,e,this._type);return t?(r=this.after-(s-i),a=this.before+(s-i)):(a=this.before+this.after,r=0),this._cloneWith({focusedMsgKey:t,before:a,after:r})._updatePrev(e)}ensureValidFocus(e){var t=null!=this._prevFocusedMsgKey&&null==e.get(this._prevFocusedMsgKey),a=null!=this._focusedMsgKey&&null==e.get(this._focusedMsgKey),r=this;return t&&(r=r._updatePrev(e)),a&&(r=r.focusBefore(e)),r}_updatePrev(e){var t=g(this._focusedMsgKey,e,this._type);return this._cloneWith({prevFocusedMsgKey:t>0?e.at(t-1).id:void 0})}focusBefore(e){return this._cloneWith({focusedMsgKey:this._prevFocusedMsgKey})._updatePrev(e)}loadBefore(e,t){var{count:a,maxCount:r=Number.MAX_SAFE_INTEGER,factor:i=2}=t||{},s=null!=a&&0!==a?a:this._getCursorSize(e,Math.max(0,this.getStart(e)-1),u,i,r);return this._cloneWith({before:this.before+s})}loadAfter(e,t){var{count:a,maxCount:r=Number.MAX_SAFE_INTEGER,factor:i=2}=t||{},s=null!=a&&0!==a?a:this._getCursorSize(e,this.getEnd(e),c,i,r);return this._cloneWith({after:this.after+s})}loadBeforeCapped(e,t){var{count:a,factor:r=2}=t||{};return _(e,this.getStart(e),c)?this.loadBefore(e,{count:a,factor:r}):this}resetBeforeCursor(e,t=Number.MAX_SAFE_INTEGER){if(!_(e,this.getStart(e),c)){var a=Math.max(0,this.getEnd(e)-1),r=this._getCursorSize(e,a,u,2,t);return this._cloneWith({before:Math.min(this.before,r)})}return this}}function g(e,t,a){if(e){var r=t.get(e),i=t.indexOf(r);if(-1!==i)return i}return function(e){switch(e){case l.default.RENDER_CURSOR.CONVERSATION:case l.default.RENDER_CURSOR.GROUP_CONVERSATION:return l.default.RENDER_CURSOR.RECENT_AT_BOTTOM;case l.default.RENDER_CURSOR.STARRED_DRAWER:return l.default.RENDER_CURSOR.RECENT_AT_TOP;default:return l.default.RENDER_CURSOR.RECENT_AT_BOTTOM}}(a)===l.default.RENDER_CURSOR.RECENT_AT_TOP?0:t.length-1}t.default=v},71571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return/\s\s+/.test(e)?e.replace(/\s\s+/g,(e=>{for(var a="",r=0;r<e.length;r++)a+=t&&"\n"===e[r]?"\n":" ";return a})):e}},56413:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(14090));class s extends i.default{constructor(e){super(),this.isSelectable=e}setSelectable(e){return this.isSelectable=e,this.trigger("update-selectable",e),this.isSelectable}}t.default=s},80498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.initSessionId()}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}}},62738:(e,t,a)=>{"use strict";var r=a(95318),i=a(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.reconnect=void 0;var s=i(a(47644)),l=r(a(13353));var n=(new class{constructor(){this.isReconnecting=!1,this.reconnectIfDisconnected=()=>{this.isReconnecting||s.default.displayInfo!==s.StreamInfo.OFFLINE||(this.isReconnecting=!0,l.default.poke(),l.default.summary(),setTimeout((()=>this.isReconnecting=!1),3e3))}}}).reconnectIfDisconnected;t.reconnect=n},63324:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r,i,{delay:s=0}=null!=t?t:{},l=t=>{(null==i||t-i>=s)&&(e(t),i=t),r||(a=requestAnimationFrame(l))};return a=requestAnimationFrame(l),()=>{r=!0,cancelAnimationFrame(a)}}},74711:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.securityUrl=function(){return l.default.build(i.default.SECURITY_LINK,{lg:s.default.getLocale()})};var i=r(a(75444)),s=r(a(80162)),l=r(a(97439))},80851:(e,t)=>{"use strict";function a(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFromStylesProp=a,t.getIntFromStylesProp=function(e,t){return parseInt(a(e,t),10)},t.getFloatFromStylesProp=function(e,t){return parseFloat(a(e,t))}},12928:(e,t,a)=>{"use strict";var r=a(95318);t.D=function({action:e,message:t}){switch(e){case s.default.REQUEST_STREAMING_INFO:return function(e){var t=o.default.get(e);return t?(0,l.videoStreamingInfo)(t):null}(t.key);case s.default.EXP_BACKOFF:return a(65427).expDelaySec(t.generation,60).then((()=>d.default.waitIfOffline({signal:(new i.default).signal})));case s.default.REQUEST_RMR:return function(e){var t=o.default.get(e.key);return t?t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:n.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING,isUserInitiated:!0}).then((()=>Promise.reject("downloaded media instead of streaming"))):null}(t);case s.default.SEND_STREAMING_CHUNK:var r,f=t.msgKey,h=o.default.get(f);if(!h)return void delete c[f.toString()];c.hasOwnProperty(f)?r=c[f.toString()]:c[f.toString()]=r=new u(h.size),r.push(t.data),r.isComplete()&&((0,l.manuallySetMedia)({msg:h,media:r.serialize(),rmrReason:n.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING}),delete c[f.toString()]);break;default:return Promise.reject("Invalid Video Streaming Action")}};var i=r(a(33364)),s=r(a(85916)),l=a(13162),n=r(a(72462)),o=r(a(33048)),d=r(a(27418));class u{constructor(e){this.ranges=[],this.buffer=[],this.size=e,e||__LOG__(3)`video buffer falsy size: ${e}`}push(e){this.buffer.push(e),this.add(e.start,e.end)}add(e,t){for(var a=e,r=this.ranges,i=0;i<r.length;i++){var[s,l]=r[i];if(!(a>l+1)){if(t+1<s)return r.splice(i,0,[a,t]);for(;i+1<r.length;){var[n,o]=r[i+1];if(t+1<n)break;a=Math.min(a,s),r.splice(i,1),s=n,l=o}return void(r[i]=[Math.min(a,s),Math.max(t,l)])}}return r.push([a,t])}isComplete(){var e=this.ranges,t=this.size;return!!t&&(1===e.length&&0===e[0][0]&&e[0][1]===t-1)}serialize(){for(var e=new Uint8Array(this.size),t=this.buffer,a=0;a<t.length;a++){var{start:r,buffer:i}=t[a];e.set(new Uint8Array(i),r)}return e}}var c={}},53507:(e,t)=>{"use strict";t.Z=void 0;t.Z={SMILEYS_PEOPLE:["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","☺️","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","🤌","🤏","👈","👉","👆","👇","☝️","✋","🤚","🖐️","🖖","👋","🤙","💪","🦾","🖕","✍️","🙏","🦶","🦵","🦿","💄","💋","👄","🦷","👅","👂","🦻","👃","👣","👁️","👀","🫀","🫁","🧠","🗣️","👤","👥","🫂","👶","👧","🧒","👦","👩","🧑","👨","👩‍🦱","🧑‍🦱","👨‍🦱","👩‍🦰","🧑‍🦰","👨‍🦰","👱‍♀️","👱‍♂️","👩‍🦳","🧑‍🦳","👨‍🦳","👩‍🦲","🧑‍🦲","👨‍🦲","🧔","👵","🧓","👴","👲","👳‍♀️","👳‍♂️","🧕","👮‍♀️","👮‍♂️","👷‍♀️","👷‍♂️","💂‍♀️","💂‍♂️","🕵️‍♀️","🕵️‍♂️","👩‍⚕️","🧑‍⚕️","👨‍⚕️","👩‍🌾","🧑‍🌾","👨‍🌾","👩‍🍳","🧑‍🍳","👨‍🍳","👩‍🎓","🧑‍🎓","👨‍🎓","👩‍🎤","🧑‍🎤","👨‍🎤","👩‍🏫","🧑‍🏫","👨‍🏫","👩‍🏭","🧑‍🏭","👨‍🏭","👩‍💻","🧑‍💻","👨‍💻","👩‍💼","🧑‍💼","👨‍💼","👩‍🔧","🧑‍🔧","👨‍🔧","👩‍🔬","🧑‍🔬","👨‍🔬","👩‍🎨","🧑‍🎨","👨‍🎨","👩‍🚒","🧑‍🚒","👨‍🚒","👩‍✈️","🧑‍✈️","👨‍✈️","👩‍🚀","🧑‍🚀","👨‍🚀","👩‍⚖️","🧑‍⚖️","👨‍⚖️","👰‍♀️","👰","👰‍♂️","🤵‍♀️","🤵","🤵‍♂️","👸","🤴","🥷","🦸‍♀️","🦸‍♂️","🦹‍♀️","🦹‍♂️","🤶","🧑‍🎄","🎅","🧙‍♀️","🧙‍♂️","🧝‍♀️","🧝‍♂️","🧛‍♀️","🧛‍♂️","🧟‍♀️","🧟‍♂️","🧞‍♀️","🧞‍♂️","🧜‍♀️","🧜‍♂️","🧚‍♀️","🧚‍♂️","👼","🤰","🤱","👩‍🍼","🧑‍🍼","👨‍🍼","🙇‍♀️","🙇‍♂️","💁‍♀️","💁‍♂️","🙅‍♀️","🙅‍♂️","🙆‍♀️","🙆‍♂️","🙋‍♀️","🙋‍♂️","🧏‍♀️","🧏","🧏‍♂️","🤦‍♀️","🤦‍♂️","🤷‍♀️","🤷‍♂️","🙎‍♀️","🙎‍♂️","🙍‍♀️","🙍‍♂️","💇‍♀️","💇‍♂️","💆‍♀️","💆‍♂️","🧖‍♀️","🧖","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯‍♂️","🕴️","👩‍🦽","🧑‍🦽","👨‍🦽","👩‍🦼","🧑‍🦼","👨‍🦼","🚶‍♀️","🚶","🚶‍♂️","👩‍🦯","🧑‍🦯","👨‍🦯","🧎‍♀️","🧎","🧎‍♂️","🏃‍♀️","🏃","🏃‍♂️","🧍‍♀️","🧍","🧍‍♂️","👫","👭","👬","👩‍❤️‍👨","👩‍❤️‍👩","👨‍❤️‍👨","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👨‍👩‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🪢","🧶","🧵","🪡","🧥","🥼","🦺","👚","👕","👖","🩲","🩳","👔","👗","👙","🩱","👘","🥻","🩴","🥿","👠","👡","👢","👞","👟","🥾","🧦","🧤","🧣","🎩","🧢","👒","🎓","⛑️","🪖","👑","💍","👝","👛","👜","💼","🎒","🧳","👓","🕶️","🥽","🌂"],ANIMALS_NATURE:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻‍❄️","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🪱","🐛","🦋","🐌","🐞","🐜","🪰","🪲","🪳","🦟","🦗","🕷️","🕸️","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🦭","🐊","🐅","🐆","🦓","🦍","🦧","🦣","🐘","🦛","🦏","🐪","🐫","🦒","🦘","🦬","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕‍🦺","🐈","🐈‍⬛","🪶","🐓","🦃","🦤","🦚","🦜","🦢","🦩","🕊️","🐇","🦝","🦨","🦡","🦫","🦦","🦥","🐁","🐀","🐿️","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🪵","🌱","🌿","☘️","🍀","🎍","🪴","🎋","🍃","🍂","🍁","🍄","🐚","🪨","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","🪐","💫","⭐","🌟","✨","⚡","☄️","💥","🔥","🌪️","🌈","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","⛈️","🌩️","🌨️","❄️","☃️","⛄","🌬️","💨","💧","💦","☔","☂️","🌊","🌫️"],FOOD_DRINK:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜","🍯","🥛","🍼","🫖","☕","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾","🧊","🥄","🍴","🍽️","🥣","🥡","🥢","🧂"],ACTIVITY:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","🪃","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛹","🛼","🛷","⛸️","🥌","🎿","⛷️","🏂","🪂","🏋️‍♀️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸","🤸‍♂️","⛹️‍♀️","⛹️","⛹️‍♂️","🤺","🤾‍♀️","🤾","🤾‍♂️","🏌️‍♀️","🏌️","🏌️‍♂️","🏇","🧘‍♀️","🧘","🧘‍♂️","🏄‍♀️","🏄","🏄‍♂️","🏊‍♀️","🏊","🏊‍♂️","🤽‍♀️","🤽","🤽‍♂️","🚣‍♀️","🚣","🚣‍♂️","🧗‍♀️","🧗","🧗‍♂️","🚵‍♀️","🚵","🚵‍♂️","🚴‍♀️","🚴","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖️","🏵️","🎗️","🎫","🎟️","🎪","🤹‍♀️","🤹‍♂️","🎭","🩰","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🪘","🎷","🎺","🪗","🎸","🪕","🎻","🎲","♟️","🎯","🎳","🎮","🎰","🧩"],TRAVEL_PLACES:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🦯","🦽","🦼","🛴","🚲","🛵","🏍️","🛺","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩️","💺","🛰️","🚀","🛸","🚁","🛶","⛵","🚤","🛥️","🛳️","⛴️","🚢","⚓","🪝","⛽","🚧","🚦","🚥","🚏","🗺️","🗿","🗽","🗼","🏰","🏯","🏟️","🎡","🎢","🎠","⛲","⛱️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","⛺","🛖","🏠","🏡","🏘️","🏚️","🏗️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛️","⛪","🕌","🕍","🛕","🕋","⛩️","🛤️","🛣️","🗾","🎑","🏞️","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙️","🌃","🌌","🌉","🌁"],OBJECTS:["⌚","📱","📲","💻","⌨️","🖥️","🖨️","🖱️","🖲️","🕹️","🗜️","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽️","🎞️","📞","☎️","📟","📠","📺","📻","🎙️","🎚️","🎛️","🧭","⏱️","⏲️","⏰","🕰️","⌛","⏳","📡","🔋","🔌","💡","🔦","🕯️","🪔","🧯","🛢️","💸","💵","💴","💶","💷","🪙","💰","💳","💎","⚖️","🪜","🧰","🪛","🔧","🔨","⚒️","🛠️","⛏️","🪚","🔩","⚙️","🪤","🧱","⛓️","🧲","🔫","💣","🧨","🪓","🔪","🗡️","⚔️","🛡️","🚬","⚰️","🪦","⚱️","🏺","🔮","📿","🧿","💈","⚗️","🔭","🔬","🕳️","🩹","🩺","💊","💉","🩸","🧬","🦠","🧫","🧪","🌡️","🧹","🪠","🧺","🧻","🚽","🚰","🚿","🛁","🛀","🧼","🪥","🪒","🧽","🪣","🧴","🛎️","🔑","🗝️","🚪","🪑","🛋️","🛏️","🛌","🧸","🪆","🖼️","🪞","🪟","🛍️","🛒","🎁","🎈","🎏","🎀","🪄","🪅","🎊","🎉","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷️","🪧","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","🧾","📊","📈","📉","🗒️","🗓️","📆","📅","🗑️","📇","🗃️","🗳️","🗄️","📋","📁","📂","🗂️","🗞️","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🧷","🔗","📎","🖇️","📐","📏","🧮","📌","📍","✂️","🖊️","🖋️","✒️","🖌️","🖍️","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓"],SYMBOLS:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕","🛑","⛔","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿","🅿️","🛗","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","⚧️","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸️","⏯️","⏹️","⏺️","⏭️","⏮️","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾️","💲","💱","™️","©️","®️","👁️‍🗨️","🔚","🔙","🔛","🔝","🔜","〰️","➰","➿","✔️","☑️","🔘","🔴","🟠","🟡","🟢","🔵","🟣","⚫","⚪","🟤","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾","◽","◼️","◻️","🟥","🟧","🟨","🟩","🟦","🟪","⬛","⬜","🟫","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","💬","💭","🗯️","♠️","♣️","♥️","♦️","🃏","🎴","🀄","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],FLAGS:["🏳️","🏴","🏴‍☠️","🏁","🚩","🏳️‍🌈","🏳️‍⚧️","🏳‍🟧‍⬛‍🟧","🇺🇳","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇸🇿","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇰","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇹","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇸","🏴󠁵󠁳󠁴󠁸󠁿","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]}},79054:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#️⃣":1,"":1,"*️⃣":2,"0️⃣":3,"":3,"1️⃣":4,"":4,"2️⃣":5,"":5,"3️⃣":6,"":6,"4️⃣":7,"":7,"5️⃣":8,"":8,"6️⃣":9,"":9,"7️⃣":10,"":10,"8️⃣":11,"":11,"9️⃣":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":92,"":93,"":95,"":96,"":97,"":98,"":99,"":102,"":112,"":113,"":119,"":120,"":121,"":124,"":130,"":133,"":134,"":136,"":152,"":153,"":154,"":156,"":158,"":164,"":175,"":188,"":189,"":190,"":193,"":195,"":196,"":197,"":198,"":200,"":204,"":206,"":209,"":210,"":211,"":214,"":215,"":217,"":218,"":219,"":220,"":222,"":223,"":224,"":225,"":226,"":228,"":230,"":231,"":233,"":235,"":236,"":285,"":295,"":308,"":316,"":318,"":352,"":356,"":364,"":433,"":477,"🇺🇲":477,"":495,"":496,"":497,"":498,"":500,"":502,"":503,"":504,"":505,"":506,"":507,"":508,"":510,"":512,"":513,"":514,"":515,"":516,"":517,"":518,"":520,"":535,"":541,"":560,"":561,"":563,"":564,"":565,"":566,"":567,"":570,"":572,"":573,"":574,"":575,"":577,"":578,"":581,"":582,"":586,"":591,"":592,"":596,"":597,"":598,"":599,"":600,"":601,"":602,"":603,"":605,"":606,"":607,"":610,"":611,"":620,"":621,"":622,"":623,"":624,"":625,"":626,"":628,"":630,"":631,"":636,"":637,"":638,"":639,"":640,"":641,"":647,"":648,"":649,"":650,"":653,"":654,"":655,"":656,"":657,"":658,"":659,"":660,"":669,"":670,"":672,"":673,"":674,"":675,"":676,"":677,"":679,"":680,"":683,"":684,"":685,"":689,"":690,"":691,"":692,"":694,"":698,"":699,"":700,"":701,"":703,"":716,"":730,"":737,"":739,"":796,"":798,"":799,"":801,"":802,"":803,"":804,"":805,"":806,"":807,"":808,"":809,"":811,"":812,"🇽🇪":819,"🇽🇸":820,"🇽🇼":821,"🇽🇹":822,"":847,"":848,"":851,"":852,"":854,"":858,"":859,"":860,"":861,"":862,"":866,"":867,"":871,"":873,"":874,"":875,"":878,"":879,"":880,"":881,"":882,"":883,"":884,"":886,"":887,"":888,"":889,"":890,"":891,"":892,"":893,"":894,"":900,"":903,"":909,"":915,"":917,"":923,"":929,"":935,"":941,"":947,"":953,"":959,"":965,"":971,"":977,"":983,"":984,"":986,"":987,"":989,"":990,"":991,"":994,"":997,"":998,"":999,"":1e3,"":1001,"":1004,"":1010,"":1016,"":1193,"":1388,"":1460,"":1478,"":1484,"":1490,"":1508,"":1516,"":1517,"":1523,"":1524,"":1525,"":1526,"":1551,"":1557,"":1558,"":1588,"":1589,"":1590,"":1591,"":1593,"":1594,"":1595,"":1596,"":1597,"":1598,"":1599,"":1600,"":1603,"":1604,"":1605,"":1606,"":1607,"":1608,"":1609,"":1611,"":1613,"":1614,"":1615,"":1616,"":1618,"":1620,"":1621,"":1622,"":1633,"":1634,"":1642,"":1643,"":1644,"":1645,"":1646,"":1648,"":1649,"":1671,"":1678,"":1681,"":1682,"":1683,"":1684,"":1690,"":1692,"":1695,"":1698,"":1699,"":1700,"":1701,"":1703,"":1704,"":1707,"":1708,"":1709,"":1722,"":1725,"":1729,"":1730,"":1731,"":1732,"":1741,"":1742,"":1749,"":1752,"":1755,"":1759,"":1760,"":1761,"":1762,"":1763,"":1764,"":1780,"":1781,"":1782,"":1783,"":1784,"":1785,"":1786,"":1787,"":1788,"":1789,"":1790,"":1791,"":1879,"":1880,"":1881,"":1885,"":1886,"":1887,"":1888,"":1893,"":1894,"":1896,"":1897,"":1899,"":1902,"":1903,"":1904,"":1906,"":1908,"":1910,"":1912,"":1913,"":1914,"":1916,"":1917,"":1918,"":1919,"":1921,"":1924,"":1926,"":1929,"":1932,"":1933,"":1934,"":1935,"":1939,"":2004,"":2034,"":2040,"":2043,"":2044,"":2045,"":2047,"":2049,"":2052,"":2055,"":2057,"":2058,"":2059,"":2061,"":2063,"":2065,"":2066,"":2074,"":2088,"":2089,"":2091,"":2096,"":2097,"":2102,"":2130,"":2145,"":2146,"":2147,"":2148,"":2149,"":2150,"":2152,"":1407,"":1418,"":1449,"":1467,"":1497,"":1527,"":1540,"":1564,"":1576,"":1953,"":1965,"":1978}},225:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#️⃣","*️⃣","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","©️","®️","‼️","⁉️","™️","ℹ️","↔️","↕️","↖️","↗️","↘️","↙️","↩️","↪️","⌚","⌛","⌨️","⏏️","⏩","⏪","⏫","⏬","⏭️","⏮️","⏯️","⏰","⏱️","⏲️","⏳","⏸️","⏹️","⏺️","Ⓜ️","▪️","▫️","▶️","◀️","◻️","◼️","◽","◾","☀️","☁️","☂️","☃️","☄️","☎️","☑️","☔","☕","☘️","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","☝️","☠️","☢️","☣️","☦️","☪️","☮️","☯️","☸️","☹️","☺️","♀️","♂️","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","♟️","♠️","♣️","♥️","♦️","♨️","♻️","♾️","♿","⚒️","⚓","⚔️","⚕️","⚖️","⚗️","⚙️","⚛️","⚜️","⚠️","⚡","⚧️","⚪","⚫","⚰️","⚱️","⚽","⚾","⛄","⛅","⛈️","⛎","⛏️","⛑️","⛓️","⛔","⛩️","⛪","⛰️","⛱️","⛲","⛳","⛴️","⛵","⛷️","⛸️","⛹🏻‍♀️",["⛹🏻‍♂️","⛹🏻"],"⛹🏼‍♀️",["⛹🏼‍♂️","⛹🏼"],"⛹🏽‍♀️",["⛹🏽‍♂️","⛹🏽"],"⛹🏾‍♀️",["⛹🏾‍♂️","⛹🏾"],"⛹🏿‍♀️",["⛹🏿‍♂️","⛹🏿"],"⛹️","⛹️‍♀️","⛹️‍♂️","⛺","⛽","✂️","✅","✈️","✉️","✊","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","✋","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿","✌️","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿","✍️","✏️","✒️","✔️","✖️","✝️","✡️","✨","✳️","✴️","❄️","❇️","❌","❎","❓","❔","❕","❗","❣️","❤️","➕","➖","➗","➡️","➰","➿","⤴️","⤵️","⬅️","⬆️","⬇️","⬛","⬜","⭐","⭕","〰️","〽️","㊗️","㊙️","🀄","🃏","🅰️","🅱️","🅾️","🅿️","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇴🇲","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇶🇦","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇼🇫","🇼🇸","🇽🇰","🇾🇪","🇾🇹","🇿🇦","🇿🇲","🇿🇼","🈁","🈂️","🈚","🈯","🈲","🈳","🈴","🈵","🈶","🈷️","🈸","🈹","🈺","🉐","🉑","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌝","🌞","🌟","🌠","🌡️","🌤️","🌥️","🌦️","🌧️","🌨️","🌩️","🌪️","🌫️","🌬️","🌭","🌮","🌯","🌰","🌱","🌲","🌳","🌴","🌵","🌶️","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🍼","🍽️","🍾","🍿","🎀","🎁","🎂","🎃","🎄","🎅","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎖️","🎗️","🎙️","🎚️","🎛️","🎞️","🎟️","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂","🏃","🏃‍♀️","🏃‍♂️","🏃🏻‍♀️",["🏃🏻‍♂️","🏃🏻"],"🏃🏼‍♀️",["🏃🏼‍♂️","🏃🏼"],"🏃🏽‍♀️",["🏃🏽‍♂️","🏃🏽"],"🏃🏾‍♀️",["🏃🏾‍♂️","🏃🏾"],"🏃🏿‍♀️",["🏃🏿‍♂️","🏃🏿"],"🏄","🏄‍♀️","🏄‍♂️","🏄🏻‍♀️",["🏄🏻‍♂️","🏄🏻"],"🏄🏼‍♀️",["🏄🏼‍♂️","🏄🏼"],"🏄🏽‍♀️",["🏄🏽‍♂️","🏄🏽"],"🏄🏾‍♀️",["🏄🏾‍♂️","🏄🏾"],"🏄🏿‍♀️",["🏄🏿‍♂️","🏄🏿"],"🏅","🏆","🏇","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿","🏈","🏉","🏊","🏊‍♀️","🏊‍♂️","🏊🏻‍♀️",["🏊🏻‍♂️","🏊🏻"],"🏊🏼‍♀️",["🏊🏼‍♂️","🏊🏼"],"🏊🏽‍♀️",["🏊🏽‍♂️","🏊🏽"],"🏊🏾‍♀️",["🏊🏾‍♂️","🏊🏾"],"🏊🏿‍♀️",["🏊🏿‍♂️","🏊🏿"],"🏋🏻‍♀️",["🏋🏻‍♂️","🏋🏻"],"🏋🏼‍♀️",["🏋🏼‍♂️","🏋🏼"],"🏋🏽‍♀️",["🏋🏽‍♂️","🏋🏽"],"🏋🏾‍♀️",["🏋🏾‍♂️","🏋🏾"],"🏋🏿‍♀️",["🏋🏿‍♂️","🏋🏿"],"🏋️‍♀️",["🏋️‍♂️","🏋️"],"🏌🏻‍♀️",["🏌🏻‍♂️","🏌🏻"],"🏌🏼‍♀️",["🏌🏼‍♂️","🏌🏼"],"🏌🏽‍♀️",["🏌🏽‍♂️","🏌🏽"],"🏌🏾‍♀️",["🏌🏾‍♂️","🏌🏾"],"🏌🏿‍♀️",["🏌🏿‍♂️","🏌🏿"],"🏌️","🏌️‍♀️","🏌️‍♂️","🏍️","🏎️","🏏","🏐","🏑","🏒","🏓","🏔️","🏕️","🏖️","🏗️","🏘️","🏙️","🏚️","🏛️","🏜️","🏝️","🏞️","🏟️","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🏳‍🟧‍⬛‍🟧","🏳️","🏳️‍⚧️","🏳️‍🌈","🏴","🏴‍☠️","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🏴󠁵󠁳󠁴󠁸󠁿","🏵️","🏷️","🏸","🏹","🏺","🏻","🏼","🏽","🏾","🏿","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐈‍⬛","🐉","🐊","🐋","🐌","🐍","🐎","🐏","🐐","🐑","🐒","🐓","🐔","🐕","🐕‍🦺","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐻‍❄️","🐼","🐽","🐾","🐿️","👀","👁️","👁️‍🗨️","👂","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿","👃","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿","👄","👅","👆","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿","👇","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿","👈","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿","👉","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿","👊","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿","👋","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿","👌","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿","👍","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿","👎","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿","👏","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿","👐","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👥","👦","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿","👧","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿","👨","👨‍⚕️","👨‍⚖️","👨‍✈️","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨‍🌾","👨‍🍳","👨‍🍼","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍👦","👨‍👦‍👦","👨‍👧","👨‍👧‍👦","👨‍👧‍👧","👨‍👨‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👩‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👧‍👧","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👨‍🦯","👨‍🦰","👨‍🦱","👨‍🦲","👨‍🦳","👨‍🦼","👨‍🦽","👨🏻","👨🏻‍⚕️","👨🏻‍⚖️","👨🏻‍✈️","👨🏻‍🌾","👨🏻‍🍳","👨🏻‍🍼","👨🏻‍🎓","👨🏻‍🎤","👨🏻‍🎨","👨🏻‍🏫","👨🏻‍🏭","👨🏻‍💻","👨🏻‍💼","👨🏻‍🔧","👨🏻‍🔬","👨🏻‍🚀","👨🏻‍🚒","👨🏻‍🦯","👨🏻‍🦰","👨🏻‍🦱","👨🏻‍🦲","👨🏻‍🦳","👨🏻‍🦼","👨🏻‍🦽","👨🏼","👨🏼‍⚕️","👨🏼‍⚖️","👨🏼‍✈️","👨🏼‍🌾","👨🏼‍🍳","👨🏼‍🍼","👨🏼‍🎓","👨🏼‍🎤","👨🏼‍🎨","👨🏼‍🏫","👨🏼‍🏭","👨🏼‍💻","👨🏼‍💼","👨🏼‍🔧","👨🏼‍🔬","👨🏼‍🚀","👨🏼‍🚒","👨🏼‍🤝‍👨🏻","👨🏼‍🦯","👨🏼‍🦰","👨🏼‍🦱","👨🏼‍🦲","👨🏼‍🦳","👨🏼‍🦼","👨🏼‍🦽","👨🏽","👨🏽‍⚕️","👨🏽‍⚖️","👨🏽‍✈️","👨🏽‍🌾","👨🏽‍🍳","👨🏽‍🍼","👨🏽‍🎓","👨🏽‍🎤","👨🏽‍🎨","👨🏽‍🏫","👨🏽‍🏭","👨🏽‍💻","👨🏽‍💼","👨🏽‍🔧","👨🏽‍🔬","👨🏽‍🚀","👨🏽‍🚒","👨🏽‍🤝‍👨🏻","👨🏽‍🤝‍👨🏼","👨🏽‍🦯","👨🏽‍🦰","👨🏽‍🦱","👨🏽‍🦲","👨🏽‍🦳","👨🏽‍🦼","👨🏽‍🦽","👨🏾","👨🏾‍⚕️","👨🏾‍⚖️","👨🏾‍✈️","👨🏾‍🌾","👨🏾‍🍳","👨🏾‍🍼","👨🏾‍🎓","👨🏾‍🎤","👨🏾‍🎨","👨🏾‍🏫","👨🏾‍🏭","👨🏾‍💻","👨🏾‍💼","👨🏾‍🔧","👨🏾‍🔬","👨🏾‍🚀","👨🏾‍🚒","👨🏾‍🤝‍👨🏻","👨🏾‍🤝‍👨🏼","👨🏾‍🤝‍👨🏽","👨🏾‍🦯","👨🏾‍🦰","👨🏾‍🦱","👨🏾‍🦲","👨🏾‍🦳","👨🏾‍🦼","👨🏾‍🦽","👨🏿","👨🏿‍⚕️","👨🏿‍⚖️","👨🏿‍✈️","👨🏿‍🌾","👨🏿‍🍳","👨🏿‍🍼","👨🏿‍🎓","👨🏿‍🎤","👨🏿‍🎨","👨🏿‍🏫","👨🏿‍🏭","👨🏿‍💻","👨🏿‍💼","👨🏿‍🔧","👨🏿‍🔬","👨🏿‍🚀","👨🏿‍🚒","👨🏿‍🤝‍👨🏻","👨🏿‍🤝‍👨🏼","👨🏿‍🤝‍👨🏽","👨🏿‍🤝‍👨🏾","👨🏿‍🦯","👨🏿‍🦰","👨🏿‍🦱","👨🏿‍🦲","👨🏿‍🦳","👨🏿‍🦼","👨🏿‍🦽","👩","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍👩","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩‍🌾","👩‍🍳","👩‍🍼","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍👦","👩‍👦‍👦","👩‍👧","👩‍👧‍👦","👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👧‍👧","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👩‍🦯","👩‍🦰","👩‍🦱","👩‍🦲","👩‍🦳","👩‍🦼","👩‍🦽","👩🏻","👩🏻‍⚕️","👩🏻‍⚖️","👩🏻‍✈️","👩🏻‍🌾","👩🏻‍🍳","👩🏻‍🍼","👩🏻‍🎓","👩🏻‍🎤","👩🏻‍🎨","👩🏻‍🏫","👩🏻‍🏭","👩🏻‍💻","👩🏻‍💼","👩🏻‍🔧","👩🏻‍🔬","👩🏻‍🚀","👩🏻‍🚒","👩🏻‍🤝‍👨🏼","👩🏻‍🤝‍👨🏽","👩🏻‍🤝‍👨🏾","👩🏻‍🤝‍👨🏿","👩🏻‍🦯","👩🏻‍🦰","👩🏻‍🦱","👩🏻‍🦲","👩🏻‍🦳","👩🏻‍🦼","👩🏻‍🦽","👩🏼","👩🏼‍⚕️","👩🏼‍⚖️","👩🏼‍✈️","👩🏼‍🌾","👩🏼‍🍳","👩🏼‍🍼","👩🏼‍🎓","👩🏼‍🎤","👩🏼‍🎨","👩🏼‍🏫","👩🏼‍🏭","👩🏼‍💻","👩🏼‍💼","👩🏼‍🔧","👩🏼‍🔬","👩🏼‍🚀","👩🏼‍🚒","👩🏼‍🤝‍👨🏻","👩🏼‍🤝‍👨🏽","👩🏼‍🤝‍👨🏾","👩🏼‍🤝‍👨🏿","👩🏼‍🤝‍👩🏻","👩🏼‍🦯","👩🏼‍🦰","👩🏼‍🦱","👩🏼‍🦲","👩🏼‍🦳","👩🏼‍🦼","👩🏼‍🦽","👩🏽","👩🏽‍⚕️","👩🏽‍⚖️","👩🏽‍✈️","👩🏽‍🌾","👩🏽‍🍳","👩🏽‍🍼","👩🏽‍🎓","👩🏽‍🎤","👩🏽‍🎨","👩🏽‍🏫","👩🏽‍🏭","👩🏽‍💻","👩🏽‍💼","👩🏽‍🔧","👩🏽‍🔬","👩🏽‍🚀","👩🏽‍🚒","👩🏽‍🤝‍👨🏻","👩🏽‍🤝‍👨🏼","👩🏽‍🤝‍👨🏾","👩🏽‍🤝‍👨🏿","👩🏽‍🤝‍👩🏻","👩🏽‍🤝‍👩🏼","👩🏽‍🦯","👩🏽‍🦰","👩🏽‍🦱","👩🏽‍🦲","👩🏽‍🦳","👩🏽‍🦼","👩🏽‍🦽","👩🏾","👩🏾‍⚕️","👩🏾‍⚖️","👩🏾‍✈️","👩🏾‍🌾","👩🏾‍🍳","👩🏾‍🍼","👩🏾‍🎓","👩🏾‍🎤","👩🏾‍🎨","👩🏾‍🏫","👩🏾‍🏭","👩🏾‍💻","👩🏾‍💼","👩🏾‍🔧","👩🏾‍🔬","👩🏾‍🚀","👩🏾‍🚒","👩🏾‍🤝‍👨🏻","👩🏾‍🤝‍👨🏼","👩🏾‍🤝‍👨🏽","👩🏾‍🤝‍👨🏿","👩🏾‍🤝‍👩🏻","👩🏾‍🤝‍👩🏼","👩🏾‍🤝‍👩🏽","👩🏾‍🦯","👩🏾‍🦰","👩🏾‍🦱","👩🏾‍🦲","👩🏾‍🦳","👩🏾‍🦼","👩🏾‍🦽","👩🏿","👩🏿‍⚕️","👩🏿‍⚖️","👩🏿‍✈️","👩🏿‍🌾","👩🏿‍🍳","👩🏿‍🍼","👩🏿‍🎓","👩🏿‍🎤","👩🏿‍🎨","👩🏿‍🏫","👩🏿‍🏭","👩🏿‍💻","👩🏿‍💼","👩🏿‍🔧","👩🏿‍🔬","👩🏿‍🚀","👩🏿‍🚒","👩🏿‍🤝‍👨🏻","👩🏿‍🤝‍👨🏼","👩🏿‍🤝‍👨🏽","👩🏿‍🤝‍👨🏾","👩🏿‍🤝‍👩🏻","👩🏿‍🤝‍👩🏼","👩🏿‍🤝‍👩🏽","👩🏿‍🤝‍👩🏾","👩🏿‍🦯","👩🏿‍🦰","👩🏿‍🦱","👩🏿‍🦲","👩🏿‍🦳","👩🏿‍🦼","👩🏿‍🦽","👪","👫","👫🏻","👫🏼","👫🏽","👫🏾","👫🏿","👬","👬🏻","👬🏼","👬🏽","👬🏾","👬🏿","👭","👭🏻","👭🏼","👭🏽","👭🏾","👭🏿","👮‍♀️",["👮‍♂️","👮"],"👮🏻‍♀️",["👮🏻‍♂️","👮🏻"],"👮🏼‍♀️",["👮🏼‍♂️","👮🏼"],"👮🏽‍♀️",["👮🏽‍♂️","👮🏽"],"👮🏾‍♀️",["👮🏾‍♂️","👮🏾"],"👮🏿‍♀️",["👮🏿‍♂️","👮🏿"],["👯‍♀️","👯"],"👯‍♂️","👯🏻‍♀️","👯🏻‍♂️","👯🏼‍♀️","👯🏼‍♂️","👯🏽‍♀️","👯🏽‍♂️","👯🏾‍♀️","👯🏾‍♂️","👯🏿‍♀️","👯🏿‍♂️","👰","👰‍♀️","👰‍♂️","👰🏻","👰🏻‍♀️","👰🏻‍♂️","👰🏼","👰🏼‍♀️","👰🏼‍♂️","👰🏽","👰🏽‍♀️","👰🏽‍♂️","👰🏾","👰🏾‍♀️","👰🏾‍♂️","👰🏿","👰🏿‍♀️","👰🏿‍♂️","👱‍♀️",["👱‍♂️","👱"],"👱🏻‍♀️",["👱🏻‍♂️","👱🏻"],"👱🏼‍♀️",["👱🏼‍♂️","👱🏼"],"👱🏽‍♀️",["👱🏽‍♂️","👱🏽"],"👱🏾‍♀️",["👱🏾‍♂️","👱🏾"],"👱🏿‍♀️",["👱🏿‍♂️","👱🏿"],"👲","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿","👳‍♀️",["👳‍♂️","👳"],"👳🏻‍♀️",["👳🏻‍♂️","👳🏻"],"👳🏼‍♀️",["👳🏼‍♂️","👳🏼"],"👳🏽‍♀️",["👳🏽‍♂️","👳🏽"],"👳🏾‍♀️",["👳🏾‍♂️","👳🏾"],"👳🏿‍♀️",["👳🏿‍♂️","👳🏿"],"👴","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿","👵","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿","👶","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿","👷‍♀️",["👷‍♂️","👷"],"👷🏻‍♀️",["👷🏻‍♂️","👷🏻"],"👷🏼‍♀️",["👷🏼‍♂️","👷🏼"],"👷🏽‍♀️",["👷🏽‍♂️","👷🏽"],"👷🏾‍♀️",["👷🏾‍♂️","👷🏾"],"👷🏿‍♀️",["👷🏿‍♂️","👷🏿"],"👸","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿","👹","👺","👻","👼","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿","👽","👾","👿","💀",["💁‍♀️","💁"],"💁‍♂️",["💁🏻‍♀️","💁🏻"],"💁🏻‍♂️",["💁🏼‍♀️","💁🏼"],"💁🏼‍♂️",["💁🏽‍♀️","💁🏽"],"💁🏽‍♂️",["💁🏾‍♀️","💁🏾"],"💁🏾‍♂️",["💁🏿‍♀️","💁🏿"],"💁🏿‍♂️","💂‍♀️",["💂‍♂️","💂"],"💂🏻‍♀️",["💂🏻‍♂️","💂🏻"],"💂🏼‍♀️",["💂🏼‍♂️","💂🏼"],"💂🏽‍♀️",["💂🏽‍♂️","💂🏽"],"💂🏾‍♀️",["💂🏾‍♂️","💂🏾"],"💂🏿‍♀️",["💂🏿‍♂️","💂🏿"],"💃","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","💄","💅","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿",["💆‍♀️","💆"],"💆‍♂️",["💆🏻‍♀️","💆🏻"],"💆🏻‍♂️",["💆🏼‍♀️","💆🏼"],"💆🏼‍♂️",["💆🏽‍♀️","💆🏽"],"💆🏽‍♂️",["💆🏾‍♀️","💆🏾"],"💆🏾‍♂️",["💆🏿‍♀️","💆🏿"],"💆🏿‍♂️",["💇‍♀️","💇"],"💇‍♂️",["💇🏻‍♀️","💇🏻"],"💇🏻‍♂️",["💇🏼‍♀️","💇🏼"],"💇🏼‍♂️",["💇🏽‍♀️","💇🏽"],"💇🏽‍♂️",["💇🏾‍♀️","💇🏾"],"💇🏾‍♂️",["💇🏿‍♀️","💇🏿"],"💇🏿‍♂️","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿","💫","💬","💭","💮","💯","💰","💱","💲","💳","💴","💵","💶","💷","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📬","📭","📮","📯","📰","📱","📲","📳","📴","📵","📶","📷","📸","📹","📺","📻","📼","📽️","📿","🔀","🔁","🔂","🔃","🔄","🔅","🔆","🔇","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔬","🔭","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕉️","🕊️","🕋","🕌","🕍","🕎","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧","🕯️","🕰️","🕳️","🕴🏻","🕴🏼","🕴🏽","🕴🏾","🕴🏿","🕴️","🕵🏻‍♀️",["🕵🏻‍♂️","🕵🏻"],"🕵🏼‍♀️",["🕵🏼‍♂️","🕵🏼"],"🕵🏽‍♀️",["🕵🏽‍♂️","🕵🏽"],"🕵🏾‍♀️",["🕵🏾‍♂️","🕵🏾"],"🕵🏿‍♀️",["🕵🏿‍♂️","🕵🏿"],"🕵️‍♀️",["🕵️‍♂️","🕵️"],"🕶️","🕷️","🕸️","🕹️","🕺","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿","🖇️","🖊️","🖋️","🖌️","🖍️","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿","🖐️","🖕","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿","🖖","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿","🖤","🖥️","🖨️","🖱️","🖲️","🖼️","🗂️","🗃️","🗄️","🗑️","🗒️","🗓️","🗜️","🗝️","🗞️","🗡️","🗣️","🗨️","🗯️","🗳️","🗺️","🗻","🗼","🗽","🗾","🗿","😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄",["🙅‍♀️","🙅"],"🙅‍♂️",["🙅🏻‍♀️","🙅🏻"],"🙅🏻‍♂️",["🙅🏼‍♀️","🙅🏼"],"🙅🏼‍♂️",["🙅🏽‍♀️","🙅🏽"],"🙅🏽‍♂️",["🙅🏾‍♀️","🙅🏾"],"🙅🏾‍♂️",["🙅🏿‍♀️","🙅🏿"],"🙅🏿‍♂️",["🙆‍♀️","🙆"],"🙆‍♂️",["🙆🏻‍♀️","🙆🏻"],"🙆🏻‍♂️",["🙆🏼‍♀️","🙆🏼"],"🙆🏼‍♂️",["🙆🏽‍♀️","🙆🏽"],"🙆🏽‍♂️",["🙆🏾‍♀️","🙆🏾"],"🙆🏾‍♂️",["🙆🏿‍♀️","🙆🏿"],"🙆🏿‍♂️","🙇‍♀️",["🙇‍♂️","🙇"],"🙇🏻‍♀️",["🙇🏻‍♂️","🙇🏻"],"🙇🏼‍♀️",["🙇🏼‍♂️","🙇🏼"],"🙇🏽‍♀️",["🙇🏽‍♂️","🙇🏽"],"🙇🏾‍♀️",["🙇🏾‍♂️","🙇🏾"],"🙇🏿‍♀️",["🙇🏿‍♂️","🙇🏿"],"🙈","🙉","🙊",["🙋‍♀️","🙋"],"🙋‍♂️",["🙋🏻‍♀️","🙋🏻"],"🙋🏻‍♂️",["🙋🏼‍♀️","🙋🏼"],"🙋🏼‍♂️",["🙋🏽‍♀️","🙋🏽"],"🙋🏽‍♂️",["🙋🏾‍♀️","🙋🏾"],"🙋🏾‍♂️",["🙋🏿‍♀️","🙋🏿"],"🙋🏿‍♂️","🙌","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿",["🙍‍♀️","🙍"],"🙍‍♂️",["🙍🏻‍♀️","🙍🏻"],"🙍🏻‍♂️",["🙍🏼‍♀️","🙍🏼"],"🙍🏼‍♂️",["🙍🏽‍♀️","🙍🏽"],"🙍🏽‍♂️",["🙍🏾‍♀️","🙍🏾"],"🙍🏾‍♂️",["🙍🏿‍♀️","🙍🏿"],"🙍🏿‍♂️",["🙎‍♀️","🙎"],"🙎‍♂️",["🙎🏻‍♀️","🙎🏻"],"🙎🏻‍♂️",["🙎🏼‍♀️","🙎🏼"],"🙎🏼‍♂️",["🙎🏽‍♀️","🙎🏽"],"🙎🏽‍♂️",["🙎🏾‍♀️","🙎🏾"],"🙎🏾‍♂️",["🙎🏿‍♀️","🙎🏿"],"🙎🏿‍♂️","🙏","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣","🚣‍♀️","🚣‍♂️","🚣🏻‍♀️",["🚣🏻‍♂️","🚣🏻"],"🚣🏼‍♀️",["🚣🏼‍♂️","🚣🏼"],"🚣🏽‍♀️",["🚣🏽‍♂️","🚣🏽"],"🚣🏾‍♀️",["🚣🏾‍♂️","🚣🏾"],"🚣🏿‍♀️",["🚣🏿‍♂️","🚣🏿"],"🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴","🚴‍♀️","🚴‍♂️","🚴🏻‍♀️",["🚴🏻‍♂️","🚴🏻"],"🚴🏼‍♀️",["🚴🏼‍♂️","🚴🏼"],"🚴🏽‍♀️",["🚴🏽‍♂️","🚴🏽"],"🚴🏾‍♀️",["🚴🏾‍♂️","🚴🏾"],"🚴🏿‍♀️",["🚴🏿‍♂️","🚴🏿"],"🚵","🚵‍♀️","🚵‍♂️","🚵🏻‍♀️",["🚵🏻‍♂️","🚵🏻"],"🚵🏼‍♀️",["🚵🏼‍♂️","🚵🏼"],"🚵🏽‍♀️",["🚵🏽‍♂️","🚵🏽"],"🚵🏾‍♀️",["🚵🏾‍♂️","🚵🏾"],"🚵🏿‍♀️",["🚵🏿‍♂️","🚵🏿"],"🚶","🚶‍♀️","🚶‍♂️","🚶🏻‍♀️",["🚶🏻‍♂️","🚶🏻"],"🚶🏼‍♀️",["🚶🏼‍♂️","🚶🏼"],"🚶🏽‍♀️",["🚶🏽‍♂️","🚶🏽"],"🚶🏾‍♀️",["🚶🏾‍♂️","🚶🏾"],"🚶🏿‍♀️",["🚶🏿‍♂️","🚶🏿"],"🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛁","🛂","🛃","🛄","🛅","🛋️","🛌","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛖","🛗","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🛻","🛼","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤌","🤌🏻","🤌🏼","🤌🏽","🤌🏾","🤌🏿","🤍","🤎","🤏","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤙","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤚","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤛","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤜","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤝","🤝🏻","🤝🏼","🤝🏽","🤝🏾","🤝🏿","🤞","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤟","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤠","🤡","🤢","🤣","🤤","🤥","🤦‍♀️",["🤦‍♂️","🤦"],"🤦🏻‍♀️",["🤦🏻‍♂️","🤦🏻"],"🤦🏼‍♀️",["🤦🏼‍♂️","🤦🏼"],"🤦🏽‍♀️",["🤦🏽‍♂️","🤦🏽"],"🤦🏾‍♀️",["🤦🏾‍♂️","🤦🏾"],"🤦🏿‍♀️",["🤦🏿‍♂️","🤦🏿"],"🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤱","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤲","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤳","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤴","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤵","🤵‍♀️","🤵‍♂️","🤵🏻","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏼","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏽","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏾","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏿","🤵🏿‍♀️","🤵🏿‍♂️","🤶","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿",["🤷‍♀️","🤷"],"🤷‍♂️",["🤷🏻‍♀️","🤷🏻"],"🤷🏻‍♂️",["🤷🏼‍♀️","🤷🏼"],"🤷🏼‍♂️",["🤷🏽‍♀️","🤷🏽"],"🤷🏽‍♂️",["🤷🏾‍♀️","🤷🏾"],"🤷🏾‍♂️",["🤷🏿‍♀️","🤷🏿"],"🤷🏿‍♂️","🤸","🤸‍♀️","🤸‍♂️","🤸🏻‍♀️",["🤸🏻‍♂️","🤸🏻"],"🤸🏼‍♀️",["🤸🏼‍♂️","🤸🏼"],"🤸🏽‍♀️",["🤸🏽‍♂️","🤸🏽"],"🤸🏾‍♀️",["🤸🏾‍♂️","🤸🏾"],"🤸🏿‍♀️",["🤸🏿‍♂️","🤸🏿"],"🤹‍♀️",["🤹‍♂️","🤹"],"🤹🏻‍♀️",["🤹🏻‍♂️","🤹🏻"],"🤹🏼‍♀️",["🤹🏼‍♂️","🤹🏼"],"🤹🏽‍♀️",["🤹🏽‍♂️","🤹🏽"],"🤹🏾‍♀️",["🤹🏾‍♂️","🤹🏾"],"🤹🏿‍♀️",["🤹🏿‍♂️","🤹🏿"],"🤺","🤼","🤼‍♀️","🤼‍♂️","🤽","🤽‍♀️","🤽‍♂️","🤽🏻‍♀️",["🤽🏻‍♂️","🤽🏻"],"🤽🏼‍♀️",["🤽🏼‍♂️","🤽🏼"],"🤽🏽‍♀️",["🤽🏽‍♂️","🤽🏽"],"🤽🏾‍♀️",["🤽🏾‍♂️","🤽🏾"],"🤽🏿‍♀️",["🤽🏿‍♂️","🤽🏿"],"🤾","🤾‍♀️","🤾‍♂️",["🤾🏻‍♀️","🤾🏻"],"🤾🏻‍♂️",["🤾🏼‍♀️","🤾🏼"],"🤾🏼‍♂️",["🤾🏽‍♀️","🤾🏽"],"🤾🏽‍♂️",["🤾🏾‍♀️","🤾🏾"],"🤾🏾‍♂️",["🤾🏿‍♀️","🤾🏿"],"🤾🏿‍♂️","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥲","🥳","🥴","🥵","🥶","🥷","🥷🏻","🥷🏼","🥷🏽","🥷🏾","🥷🏿","🥸","🥺","🥻","🥼","🥽","🥾","🥿","🦀","🦁","🦂","🦃","🦄","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🦒","🦓","🦔","🦕","🦖","🦗","🦘","🦙","🦚","🦛","🦜","🦝","🦞","🦟","🦠","🦡","🦢","🦣","🦤","🦥","🦦","🦧","🦨","🦩","🦪","🦫","🦬","🦭","🦮","🦯","🦴","🦵","🦵🏻","🦵🏼","🦵🏽","🦵🏾","🦵🏿","🦶","🦶🏻","🦶🏼","🦶🏽","🦶🏾","🦶🏿","🦷","🦸‍♀️","🦸‍♂️","🦸🏻‍♀️","🦸🏻‍♂️","🦸🏼‍♀️","🦸🏼‍♂️","🦸🏽‍♀️","🦸🏽‍♂️","🦸🏾‍♀️","🦸🏾‍♂️","🦸🏿‍♀️","🦸🏿‍♂️","🦹‍♀️","🦹‍♂️","🦹🏻‍♀️","🦹🏻‍♂️","🦹🏼‍♀️","🦹🏼‍♂️","🦹🏽‍♀️","🦹🏽‍♂️","🦹🏾‍♀️","🦹🏾‍♂️","🦹🏿‍♀️","🦹🏿‍♂️","🦺","🦻","🦻🏻","🦻🏼","🦻🏽","🦻🏾","🦻🏿","🦼","🦽","🦾","🦿","🧀","🧁","🧂","🧃","🧄","🧅","🧆","🧇","🧈","🧉","🧊","🧋","🧍","🧍‍♀️","🧍‍♂️","🧍🏻","🧍🏻‍♀️","🧍🏻‍♂️","🧍🏼","🧍🏼‍♀️","🧍🏼‍♂️","🧍🏽","🧍🏽‍♀️","🧍🏽‍♂️","🧍🏾","🧍🏾‍♀️","🧍🏾‍♂️","🧍🏿","🧍🏿‍♀️","🧍🏿‍♂️","🧎","🧎‍♀️","🧎‍♂️","🧎🏻","🧎🏻‍♀️","🧎🏻‍♂️","🧎🏼","🧎🏼‍♀️","🧎🏼‍♂️","🧎🏽","🧎🏽‍♀️","🧎🏽‍♂️","🧎🏾","🧎🏾‍♀️","🧎🏾‍♂️","🧎🏿","🧎🏿‍♀️","🧎🏿‍♂️","🧏","🧏‍♀️","🧏‍♂️","🧏🏻","🧏🏻‍♀️","🧏🏻‍♂️","🧏🏼","🧏🏼‍♀️","🧏🏼‍♂️","🧏🏽","🧏🏽‍♀️","🧏🏽‍♂️","🧏🏾","🧏🏾‍♀️","🧏🏾‍♂️","🧏🏿","🧏🏿‍♀️","🧏🏿‍♂️","🧐","🧑","🧑‍⚕️","🧑‍⚖️","🧑‍✈️","🧑‍🌾","🧑‍🍳","🧑‍🍼","🧑‍🎄","🧑‍🎓","🧑‍🎤","🧑‍🎨","🧑‍🏫","🧑‍🏭","🧑‍💻","🧑‍💼","🧑‍🔧","🧑‍🔬","🧑‍🚀","🧑‍🚒","🧑‍🤝‍🧑","🧑‍🦯","🧑‍🦰","🧑‍🦱","🧑‍🦲","🧑‍🦳","🧑‍🦼","🧑‍🦽","🧑🏻","🧑🏻‍⚕️","🧑🏻‍⚖️","🧑🏻‍✈️","🧑🏻‍🌾","🧑🏻‍🍳","🧑🏻‍🍼","🧑🏻‍🎄","🧑🏻‍🎓","🧑🏻‍🎤","🧑🏻‍🎨","🧑🏻‍🏫","🧑🏻‍🏭","🧑🏻‍💻","🧑🏻‍💼","🧑🏻‍🔧","🧑🏻‍🔬","🧑🏻‍🚀","🧑🏻‍🚒","🧑🏻‍🤝‍🧑🏻","🧑🏻‍🦯","🧑🏻‍🦰","🧑🏻‍🦱","🧑🏻‍🦲","🧑🏻‍🦳","🧑🏻‍🦼","🧑🏻‍🦽","🧑🏼","🧑🏼‍⚕️","🧑🏼‍⚖️","🧑🏼‍✈️","🧑🏼‍🌾","🧑🏼‍🍳","🧑🏼‍🍼","🧑🏼‍🎄","🧑🏼‍🎓","🧑🏼‍🎤","🧑🏼‍🎨","🧑🏼‍🏫","🧑🏼‍🏭","🧑🏼‍💻","🧑🏼‍💼","🧑🏼‍🔧","🧑🏼‍🔬","🧑🏼‍🚀","🧑🏼‍🚒","🧑🏼‍🤝‍🧑🏻","🧑🏼‍🤝‍🧑🏼","🧑🏼‍🦯","🧑🏼‍🦰","🧑🏼‍🦱","🧑🏼‍🦲","🧑🏼‍🦳","🧑🏼‍🦼","🧑🏼‍🦽","🧑🏽","🧑🏽‍⚕️","🧑🏽‍⚖️","🧑🏽‍✈️","🧑🏽‍🌾","🧑🏽‍🍳","🧑🏽‍🍼","🧑🏽‍🎄","🧑🏽‍🎓","🧑🏽‍🎤","🧑🏽‍🎨","🧑🏽‍🏫","🧑🏽‍🏭","🧑🏽‍💻","🧑🏽‍💼","🧑🏽‍🔧","🧑🏽‍🔬","🧑🏽‍🚀","🧑🏽‍🚒","🧑🏽‍🤝‍🧑🏻","🧑🏽‍🤝‍🧑🏼","🧑🏽‍🤝‍🧑🏽","🧑🏽‍🦯","🧑🏽‍🦰","🧑🏽‍🦱","🧑🏽‍🦲","🧑🏽‍🦳","🧑🏽‍🦼","🧑🏽‍🦽","🧑🏾","🧑🏾‍⚕️","🧑🏾‍⚖️","🧑🏾‍✈️","🧑🏾‍🌾","🧑🏾‍🍳","🧑🏾‍🍼","🧑🏾‍🎄","🧑🏾‍🎓","🧑🏾‍🎤","🧑🏾‍🎨","🧑🏾‍🏫","🧑🏾‍🏭","🧑🏾‍💻","🧑🏾‍💼","🧑🏾‍🔧","🧑🏾‍🔬","🧑🏾‍🚀","🧑🏾‍🚒","🧑🏾‍🤝‍🧑🏻","🧑🏾‍🤝‍🧑🏼","🧑🏾‍🤝‍🧑🏽","🧑🏾‍🤝‍🧑🏾","🧑🏾‍🦯","🧑🏾‍🦰","🧑🏾‍🦱","🧑🏾‍🦲","🧑🏾‍🦳","🧑🏾‍🦼","🧑🏾‍🦽","🧑🏿","🧑🏿‍⚕️","🧑🏿‍⚖️","🧑🏿‍✈️","🧑🏿‍🌾","🧑🏿‍🍳","🧑🏿‍🍼","🧑🏿‍🎄","🧑🏿‍🎓","🧑🏿‍🎤","🧑🏿‍🎨","🧑🏿‍🏫","🧑🏿‍🏭","🧑🏿‍💻","🧑🏿‍💼","🧑🏿‍🔧","🧑🏿‍🔬","🧑🏿‍🚀","🧑🏿‍🚒","🧑🏿‍🤝‍🧑🏻","🧑🏿‍🤝‍🧑🏼","🧑🏿‍🤝‍🧑🏽","🧑🏿‍🤝‍🧑🏾","🧑🏿‍🤝‍🧑🏿","🧑🏿‍🦯","🧑🏿‍🦰","🧑🏿‍🦱","🧑🏿‍🦲","🧑🏿‍🦳","🧑🏿‍🦼","🧑🏿‍🦽","🧒","🧒🏻","🧒🏼","🧒🏽","🧒🏾","🧒🏿","🧓","🧓🏻","🧓🏼","🧓🏽","🧓🏾","🧓🏿","🧔","🧔🏻","🧔🏼","🧔🏽","🧔🏾","🧔🏿","🧕","🧕🏻","🧕🏼","🧕🏽","🧕🏾","🧕🏿","🧖","🧖‍♀️","🧖‍♂️","🧖🏻‍♀️",["🧖🏻‍♂️","🧖🏻"],"🧖🏼‍♀️",["🧖🏼‍♂️","🧖🏼"],"🧖🏽‍♀️",["🧖🏽‍♂️","🧖🏽"],"🧖🏾‍♀️",["🧖🏾‍♂️","🧖🏾"],"🧖🏿‍♀️",["🧖🏿‍♂️","🧖🏿"],"🧗","🧗‍♀️","🧗‍♂️",["🧗🏻‍♀️","🧗🏻"],"🧗🏻‍♂️",["🧗🏼‍♀️","🧗🏼"],"🧗🏼‍♂️",["🧗🏽‍♀️","🧗🏽"],"🧗🏽‍♂️",["🧗🏾‍♀️","🧗🏾"],"🧗🏾‍♂️",["🧗🏿‍♀️","🧗🏿"],"🧗🏿‍♂️","🧘","🧘‍♀️","🧘‍♂️",["🧘🏻‍♀️","🧘🏻"],"🧘🏻‍♂️",["🧘🏼‍♀️","🧘🏼"],"🧘🏼‍♂️",["🧘🏽‍♀️","🧘🏽"],"🧘🏽‍♂️",["🧘🏾‍♀️","🧘🏾"],"🧘🏾‍♂️",["🧘🏿‍♀️","🧘🏿"],"🧘🏿‍♂️",["🧙‍♀️","🧙"],"🧙‍♂️",["🧙🏻‍♀️","🧙🏻"],"🧙🏻‍♂️",["🧙🏼‍♀️","🧙🏼"],"🧙🏼‍♂️",["🧙🏽‍♀️","🧙🏽"],"🧙🏽‍♂️",["🧙🏾‍♀️","🧙🏾"],"🧙🏾‍♂️",["🧙🏿‍♀️","🧙🏿"],"🧙🏿‍♂️",["🧚‍♀️","🧚"],"🧚‍♂️",["🧚🏻‍♀️","🧚🏻"],"🧚🏻‍♂️",["🧚🏼‍♀️","🧚🏼"],"🧚🏼‍♂️",["🧚🏽‍♀️","🧚🏽"],"🧚🏽‍♂️",["🧚🏾‍♀️","🧚🏾"],"🧚🏾‍♂️",["🧚🏿‍♀️","🧚🏿"],"🧚🏿‍♂️",["🧛‍♀️","🧛"],"🧛‍♂️",["🧛🏻‍♀️","🧛🏻"],"🧛🏻‍♂️",["🧛🏼‍♀️","🧛🏼"],"🧛🏼‍♂️",["🧛🏽‍♀️","🧛🏽"],"🧛🏽‍♂️",["🧛🏾‍♀️","🧛🏾"],"🧛🏾‍♂️",["🧛🏿‍♀️","🧛🏿"],"🧛🏿‍♂️",["🧜‍♀️","🧜"],"🧜‍♂️",["🧜🏻‍♀️","🧜🏻"],"🧜🏻‍♂️",["🧜🏼‍♀️","🧜🏼"],"🧜🏼‍♂️",["🧜🏽‍♀️","🧜🏽"],"🧜🏽‍♂️",["🧜🏾‍♀️","🧜🏾"],"🧜🏾‍♂️",["🧜🏿‍♀️","🧜🏿"],"🧜🏿‍♂️","🧝‍♀️",["🧝‍♂️","🧝"],"🧝🏻‍♀️",["🧝🏻‍♂️","🧝🏻"],"🧝🏼‍♀️",["🧝🏼‍♂️","🧝🏼"],"🧝🏽‍♀️",["🧝🏽‍♂️","🧝🏽"],"🧝🏾‍♀️",["🧝🏾‍♂️","🧝🏾"],"🧝🏿‍♀️",["🧝🏿‍♂️","🧝🏿"],["🧞‍♀️","🧞"],"🧞‍♂️",["🧟‍♀️","🧟"],"🧟‍♂️","🧠","🧡","🧢","🧣","🧤","🧥","🧦","🧧","🧨","🧩","🧪","🧫","🧬","🧭","🧮","🧯","🧰","🧱","🧲","🧳","🧴","🧵","🧶","🧷","🧸","🧹","🧺","🧻","🧼","🧽","🧾","🧿","🩰","🩱","🩲","🩳","🩴","🩸","🩹","🩺","🪀","🪁","🪂","🪃","🪄","🪅","🪆","🪐","🪑","🪒","🪓","🪔","🪕","🪖","🪗","🪘","🪙","🪚","🪛","🪜","🪝","🪞","🪟","🪠","🪡","🪢","🪣","🪤","🪥","🪦","🪧","🪨","🪰","🪱","🪲","🪳","🪴","🪵","🪶","🫀","🫁","🫂","🫐","🫑","🫒","🫓","🫔","🫕","🫖"]},98114:(e,t,a)=>{"use strict";var r=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,a)=>{var r=new s.default;r.onerror=function(e){r.terminate(),a(new l.DecodeWebpResultsError("worker error",e))},r.onmessageerror=function(e){r.terminate(),a(new l.DecodeWebpResultsError("worker message error",e))},r.onmessage=e=>{r.terminate();var a=e.data;t(a)},r.postMessage({webpBuffer:e},[e])}))};var s=i(a(53847)),l=r(a(12536))},50342:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListener=t.SelectionListener=t.WhileFocusedListener=void 0;var i=a(67294),s=r(a(33766)),l=r(a(80896)),n=r(a(72765));class o extends i.PureComponent{constructor(...e){super(...e),this.scrollMsg=(e,t)=>{this.props.parent.scrollMsg(e,t)},this.flashFocusedMsg=()=>{var e,t;null===(e=(t=this.props.parent).highlight)||void 0===e||e.call(t)},this.flashMentionMsg=()=>{var e,t;null===(e=(t=this.props.parent).highlightMention)||void 0===e||e.call(t)}}componentDidMount(){this.props.listeners.add(s.default,"scroll_to_focused_msg",this.scrollMsg),this.props.listeners.add(s.default,"flash_focused_msg",this.flashFocusedMsg),this.props.listeners.add(s.default,"flash_mention_msg",this.flashMentionMsg)}render(){return null}}o.displayName="WhileFocused";var d=(0,l.default)(o);t.WhileFocusedListener=d;class u extends i.PureComponent{constructor(...e){super(...e),this.onSelectChange=e=>{this.props.parent.onSelectChange(e)}}componentDidMount(){var{listeners:e,msgId:t,selectedMessages:a}=this.props;e.add(a,t,this.onSelectChange)}componentDidUpdate(e){var{listeners:t,msgId:a,selectedMessages:r}=this.props;e.selectedMessages!==r&&(t.remove(e.selectedMessages,a,this.onSelectChange),t.add(r,a,this.onSelectChange))}render(){return null}}u.displayName="Selection";var c=(0,l.default)(u);t.SelectionListener=c;class f extends i.PureComponent{componentDidUpdate(){this.props.parent.forceUpdate()}render(){return null}}f.CONCERNS={mediaData:["isGif"]},f.displayName="MediaListenerClass";var h=(0,n.default)(f,f.CONCERNS);t.MediaListener=h},17450:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(26080),s=r(a(25206));function l(e){return(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2}function n(e){return(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}var o=/[^\x00-\x7F]/g;t.default=class{constructor(){this.files=[],this.filenameCount={}}add(e,t,a=new Date){var r=function(e){return e.replace(/\\/,"/").replace(o,"")}(t);this.filenameCount[r]>=0?(this.filenameCount[r]+=1,r=r.replace(/\.(\w+)$/," ("+this.filenameCount[r]+").$1")):this.filenameCount[r]=0,this.files.push([e,{crc:(0,s.default)(e),path:r,date:a}])}create(){var e=0,t=0,a=0,r=[],s=[];this.files.forEach((o=>{var[d]=o,u=d.size(),c=function([e,{path:t,crc:a,date:r}]){var s=new i.Binary(void 0,!0);return s.ensureCapacity(30+t.length),s.writeUint32(67324752),s.writeUint8(10),s.writeUint8(0),s.writeUint16(0),s.writeUint16(0),s.writeUint16(l(r)),s.writeUint16(n(r)),s.writeUint32(a),s.writeUint32(e.size()),s.writeUint32(e.size()),s.writeUint16(t.length),s.writeUint16(0),s.writeString(t),s}(o),f=function([e,{path:t,crc:a,date:r}],s){var o=new i.Binary(void 0,!0);return o.ensureCapacity(46+t.length),o.writeUint32(33639248),o.writeUint8(10),o.writeUint8(0),o.writeUint8(10),o.writeUint8(0),o.writeUint16(0),o.writeUint16(0),o.writeUint16(l(r)),o.writeUint16(n(r)),o.writeUint32(a),o.writeUint32(e.size()),o.writeUint32(e.size()),o.writeUint16(t.length),o.writeUint16(0),o.writeUint16(0),o.writeUint16(0),o.writeUint16(0),o.writeUint32(0),o.writeUint32(s),o.writeString(t),o}(o,a),h=c.size()+u;a+=h,e+=h+f.size(),t+=f.size(),s.push(c,d),r.push(f)}));var o,d,u,c,f=(o=this.files.length,d=t,u=a,(c=new i.Binary(void 0,!0)).ensureCapacity(22),c.writeUint32(101010256),c.writeUint16(0),c.writeUint16(0),c.writeUint16(o),c.writeUint16(o),c.writeUint32(d),c.writeUint32(u),c.writeUint16(0),c),h=new i.Binary(void 0,!0);return h.ensureCapacity(e+f.size()),h.write(...s,...r,f),h}}},53466:(e,t,a)=>{"use strict";var r=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Promise.all(e.map((({blob:e})=>function(e){var t;return new Promise(((a,r)=>{(t=new FileReader).addEventListener("loadend",(()=>{a(i.Binary.build(t.result))})),t.addEventListener("error",(e=>r(e))),t.readAsArrayBuffer(e)}))}(e)))).then((t=>{var a,r=new s.default;return t.forEach(((t,a)=>r.add(t,e[a].name))),a=r.create(),new Blob([a.readByteArray()],{type:"application/zip"})}))};var i=a(26080),s=r(a(17450))},17928:(e,t,a)=>{e.exports=a.p+"img/rooms-2x_909204b15b49fc2ef16b123e8afc3bf0.jpg"},87614:(e,t,a)=>{e.exports=a.p+"img/rooms-dark-2x_e4f7bea856269e5e75cef04bbbf104a4.jpg"},2907:(e,t,a)=>{e.exports=a.p+"img/rooms-dark_88f4fbf81adf3532145c6eb491776f06.jpg"},25321:(e,t,a)=>{e.exports=a.p+"img/rooms_ddca60c97a36e2b80c29bce69502c93b.jpg"},1388:(e,t,a)=>{e.exports=a.p+"img/sticker-empty_9d7feb47a66ef5b59cc731acafd02266.png"},36702:(e,t,a)=>{"use strict";a.r(t)},59703:(e,t,a)=>{"use strict";a.r(t)},12340:(e,t,a)=>{"use strict";a.r(t)},86345:(e,t,a)=>{"use strict";a.r(t)},94118:(e,t,a)=>{"use strict";a.r(t)},46050:(e,t,a)=>{"use strict";a.r(t)},6408:(e,t,a)=>{"use strict";a.r(t)},11975:(e,t,a)=>{"use strict";a.r(t)},49062:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1bJJV",child:"_3IfUe"}},54502:(e,t,a)=>{"use strict";a.r(t),t.default={addToCartIcon:"_1u05M"}},19266:(e,t,a)=>{"use strict";a.r(t),t.default={archivedIcon:"_3u7yy",unreadCountWrapper:"hlFup",wrapper:"_3hD9c"}},95754:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3z9_h"}},40184:(e,t,a)=>{"use strict";a.r(t),t.default={block:"Hbbsz",chevron:"gGn1n",actionText:"_3jR9Y"}},56642:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_1-SiY",wrapper:"_2XcXo",butterbar:"_22XJC",icon:"_384go",body:"_1Yy79",controls:"_3UDm1",controlsIcon:"_1K1wg",title:"_2z7gr",text:"_2BxMU",notification:"_2C_7j",update:"xx0PQ",computer:"f2_qc",phone:"_3C1U5",battery:"_1sNMG",notice:"_3izPF",noticeSmb:"_1d_P-",noticeSvgWrapper:"_2JUqz",fatalSvgWrapper:"afTH_",fatal:"cwVT9",nuxGreenSvgWrapper:"_3aqmZ",nuxGreen:"_3Olve",nuxBlueSvgWrapper:"_2Abc7",nuxBlue:"_3tjOE"}},25433:(e,t,a)=>{"use strict";a.r(t),t.default={btnContext:"_2fQtj",focusAnimation:"_3XzQD",focusAnimationKeyframes:"_3KZWs",product:"_32mRR"}},48491:(e,t,a)=>{"use strict";a.r(t),t.default={chatstateTyping:"_16h0X",loadingIndicate:"_32N7I"}},13506:(e,t,a)=>{"use strict";a.r(t),t.default={markerAdmin:"_3bTNW",markerInvited:"_3Vyb8",chatControls:"_2NICU",screenName:"_1ux8Y",contactSmall:"_2cL8h"}},17613:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1pJ9J",iconPinned:"_2XH9R",archived:"_3f7yK"}},32376:(e,t,a)=>{"use strict";a.r(t),t.default={italic:"_1ZqY2",product:"JZX9V",last:"Hy9nV"}},74558:(e,t,a)=>{"use strict";a.r(t),t.default={ack:"_2qo4q",ackBlue:"_3NIfV"}},57305:(e,t,a)=>{"use strict";a.r(t),t.default={symbol:"_2tHs0",margin:"_3Bn0t",miss:"_3HpRC",pttBlue:"_1ujr9",pttGreen:"_3ryBz"}},40670:(e,t,a)=>{"use strict";a.r(t),t.default={statusLoading:"_1E3Vj"}},6029:(e,t,a)=>{"use strict";a.r(t),t.default={count:"_23LrM",transparentBg:"_3t-zO"}},16072:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3oxzv",btnActive:"_32h6H",btnAction:"_3cwUy",controlsSummary:"_2t-e4",confirm:"ck4rc",summaryText:"_3F8DS",item:"_2qbj2"}},8702:(e,t,a)=>{"use strict";a.r(t),t.default={listUser:"YtmXM",listUserBeta:"_1X8rk",betaIcon:"_2BYrr",betaIconText:"_3hcUV",header:"_1G3Wr",listControls:"_3yZPA",shopsIcon:"_2sN2H"}},96633:(e,t,a)=>{"use strict";a.r(t),t.default={chatListPanel:"_1KDb8",panelBody:"_20c87",panelSearch:"uwk68",spinner:"t7NWw",unreadContainer:"_2Pcmr",unread:"_2ZNpT",unreadBody:"_1tQ8u",unreadIcon:"_1SNuR"}},29439:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxChatWrapper:"_1Oe6M",checkboxChatControl:"_1-gER",labelSelection:"_2OHxv"}},37058:(e,t,a)=>{"use strict";a.r(t),t.default={selectedListContainer:"iH7Ic",bottomDiv:"_1WEqd"}},64968:(e,t,a)=>{"use strict";a.r(t),t.default={iconSpinner:"_1A60C",iconCloseSearch:"_3GYfN",iconLabelSelect:"iy1jQ",iconMorph:"_1KJ7A",inputPlaceholder:"_3Qnsr",labelSearchPlaceholder:"_2S-ZM",listSearch:"_3yWey",contInputSearch:"_1Jn3C",active:"XKmj6",iconSearchMorph:"_28-cz",iconMorphSearch:"bHvlO",iconMorphBack:"_2nifA",kind:"_3mVPR",labels:"_1YvFX",kindName:"_26c7g",filterTitle:"_3lIPP"}},99852:(e,t,a)=>{"use strict";a.r(t),t.default={annotation:"DjLL1",tooltip:"_3xcb4"}},55897:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_27mo0"}},95258:(e,t,a)=>{"use strict";a.r(t),t.default={badge:"_3zy8i",icon:"_3cYWo",pending:"_2UImM",warning:"_2Jofj"}},43153:(e,t,a)=>{"use strict";a.r(t),t.default={border:"bSwEu"}},26150:(e,t,a)=>{"use strict";a.r(t),t.default={chat:"_2nY6U",chatAvatar:"HONz8",image:"_2EU3r",chatBody:"_3OvU8",chatDetails:"_1BgCC",chatMain:"_3vPI2",noDelete:"_3k68H",chatSecondary:"_37FrU",chatTitle:"zoWT4",chatStatus:"_1qB8f",chatMeta:"_1i_wG",unread:"_3C4Vf",active:"_2_TVt",chatDrag:"_2Oquw",idle:"_1ws0F",isMuted:"_3Xgye",themeMessage:"_7qwtH",themeSearch:"_3VUnw",themeDrawerList:"_3A-iD",themeRadioButtonRow:"_16zEN",themeStatus:"_1q2v5",themeCheckbox:"_2OR6D",themeIdentity:"BdOK7",themePlain:"_2gbXd",themeAddItem:"_3xRmF",themeAddItemPlaceholder:"_2ildA",themeListNames:"_3Y0ff",member:"_1Bc31",themeLabel:"CujId",groupV4Invite:"_1p-UT",cartProduct:"V-2Ax",orderProduct:"_1SM19",product:"_16m7g",media:"_1IYWo",listButton:"_3zMLK",productOfCollection:"_2nU2J",collectionEdit:"_2KLau",collectionHeader:"_17-Rm",productOutOfStock:"_3NZY0",listMsg:"_2eixh",archivePanel:"_1frFQ"}},65006:(e,t,a)=>{"use strict";a.r(t),t.default={chatSubtitle:"zzgSd",chatSubtitleHeader:"_3e6xi",chatSubtitleText:"_2YPr_"}},77622:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxContainer:"_2MZaO",containerDisabled:"_20RDY",checkbox:"_3yThi",checkmark:"_2IweK",partialCheckMark:"_1XWr-",checkedCheckbox:"UF5Li",checkedCheckmark:"_2PGX8","checkmark-expand":"_2iPfE",checkmarkExpand:"_2iPfE",uncheckedCheckmark:"_1NdIy",disabled:"_11GT7",a11yHidden:"_1WKtK",a11YHidden:"_1WKtK",itemFocused:"_2Haw6"}},90502:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2wHUf",roundIcon:"_33mBu",unchecked:"_3oogs",passive:"rT1uC",uncheckedSystemColor:"_3ahqr"}},66310:(e,t,a)=>{"use strict";a.r(t),t.default={btn:"_23JDg",overMedia:"_3HNBm",btnMediaPrev:"_3jb3a",btnMediaNext:"_3x1a0",disabledBtn:"_2_1tu"}},49739:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2XifE",defaultWallpaper:"_31Spn",icon:"fxStU",body:"pJIFJ",main:"m9hHr",secondary:"_3oWGj",inConversation:"_3yL8P",inList:"_1WKb_"}},26306:(e,t,a)=>{"use strict";a.r(t),t.default={avatar:"_3GlyB",avatarDefault:"_1lPgH",avatarImage:"_8hzr9",isLoaded:"M0JmA",avatarSquare:"_3eYBS",avatarBorder:"_32GIw",status_v3:"_1DSb6",statusV3:"_1DSb6",wrapper:"_36VU6",badge:"JUffF",badgeIcon:"_1D5Hn"}},88257:(e,t,a)=>{"use strict";a.r(t),t.default={docState:"_3y4sD",spinner:"_3dpj1"}},19328:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_2qR8G",text:"_18oo2",hover:"_19zgN",action:"dJxPU",compact:"_3gcnK",icon:"_26nDl",emoji:"_17jhh",emojiGrid:"_34jUG",ellipsify:"_2oldI",disabled:"_3BFHH",shortcut:"_1wMaz"}},94870:(e,t,a)=>{"use strict";a.r(t),t.default={ellipsify:"_ccCW",inlineblock:"FqYAR",dirMismatch:"J9IUQ",clickable:"_3xSVM",multiline:"_1SjQX",breakWord:"_2Qc5p"}},60350:(e,t,a)=>{"use strict";a.r(t),t.default={empty:"_3Iwj9",emptyTop:"_16QtD",compact:"_2skyp",icon:"_2t_t3",title:"_2Vemb",text:"_1JFry",spinner:"znLut",action:"_2tVx6",iconRetry:"_3wgVc"}},62248:(e,t,a)=>{"use strict";a.r(t),t.default={tooltip:"_1y99G","tooltip-left-ltr":"YpTYF",tooltipLeftLtr:"YpTYF","tooltip-left-rtl":"_31yGq",tooltipLeftRtl:"_31yGq"}},25045:(e,t,a)=>{"use strict";a.r(t),t.default={read_more:"_208p2",readMore:"_208p2"}},25562:(e,t,a)=>{"use strict";a.r(t),t.default={avatar:"_2ji7x",roundBorder:"_2QeZT",avatarWrapper:"_2urgy",avatarSvgWrapper:"srmST",avatarImageWrapper:"Pipu6",transition:"Ao5N0",isLoaded:"_15kIa",centerChild:"_3yoVb",avatarImage:"zlBZO"}},64917:(e,t,a)=>{"use strict";a.r(t),t.default={key:"_3XnBm"}},28662:(e,t,a)=>{"use strict";a.r(t),t.default={viewport:"_3uIPm",verticalListViewport:"WYyr1",horizontalListViewport:"_1iA0_"}},93318:(e,t,a)=>{"use strict";a.r(t),t.default={loadingSpinner:"_1L0jz"}},91021:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_3m_Xw"}},81696:(e,t,a)=>{"use strict";a.r(t),t.default={hidden:"_3BWgW",container:"_2RbXT"}},25201:(e,t,a)=>{"use strict";a.r(t),t.default={controls:"rA7Wy","progress-container":"sF9iS",progressContainer:"sF9iS",spinner:"_1W07j",btnMeta:"dIMN_",button:"_t1Fc",icon:"_2A6Wl",cancel:"_1gk5U",disabled:"_3Y2FH",cursorPointer:"_3yiLE",play:"_27eUl",iconMeta:"_3WLdp"}},5442:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2Z7E4",child:"_32rqz"}},3183:(e,t,a)=>{"use strict";a.r(t),t.default={menu:"_1QVfy",menuDefault:"_3UaCz",menuStrong:"_2aN_u",menuInverse:"_1s6XL",item:"_2cNrC",active:"_1CTfw",selected:"_2V9Ss",disabled:"_2YC8z",itemText:"_2eqEq",menuMediaEditor:"_2rY6b",itemFocused:"M43gW",button:"_26lC3"}},85407:(e,t,a)=>{"use strict";a.r(t),t.default={multiControls:"_37jUe",chatListPanel:"_3pRIl",drawerHeader:"_1ok6W",multiselectIcon:"Pd4jb",multiCount:"_3sYvo",mediaGalleryTheme:"hFRPE"}},617:(e,t,a)=>{"use strict";a.r(t),t.default={moveResizeComponentContainer:"_5h2Mi",moveResizeComponentInnerContainer:"_32d1N",resizer:"_3Ikyy",topResizer:"_1tDOX",bottomResizer:"_3ErRI",leftResizer:"sDbQK",rightResizer:"_2HQO5",topRightResizer:"_3BmU0",topLeftResizer:"Hzoas",bottomRightResizer:"_3F8SQ",bottomLeftResizer:"_1auhr",moveable:"Bjqxx",defaultCursor:"_2OoF8",bottomContent:"_1BIBj"}},8629:(e,t,a)=>{"use strict";a.r(t),t.default={multiControls:"OVz7E",multiselectIcon:"_1fimr",multiCount:"_2k8WS",mediaGalleryTheme:"wdgqh"}},65301:(e,t,a)=>{"use strict";a.r(t),t.default={verified:"_3vLho",psa:"_2A4wP",icon:"_1M6Ay",hasLabels:"_3q9s6",labels:"_3dulN"}},26055:(e,t,a)=>{"use strict";a.r(t),t.default={fit:"_1Lu8G",fitRelative:"Rwf_x",fitScaledown:"_1p0Ic",fitZoomin:"_3n6Y4",nativeCover:"_2rdv3",nativeScaleDown:"_3pDwe"}},40134:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3yg5l",body:"_1TGpC",imageContainer:"_2VMR2",lazyLoadRetry:"_3a7W9",defaultIcon:"_1Jya3"}},96153:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3Bc7H"}},98850:(e,t,a)=>{"use strict";a.r(t),t.default={sensor:"_1lRek"}},37349:(e,t,a)=>{"use strict";a.r(t),t.default={gridContainer:"_2aoOW",baseEmoji:"yz0X-",options:"watw2"}},80359:(e,t,a)=>{"use strict";a.r(t),t.default={button:"ynx4l",buttonIcon:"_17WeP",nextButton:"RMIjM",prevButton:"_27Ool",resizeContainer:"_1MNGY"}},30240:(e,t,a)=>{"use strict";a.r(t),t.default={"-emoji-width":"44px",emojiWidth:"44px","-emoji-height":"44px",emojiHeight:"44px","-side-margin":"12px",sideMargin:"12px",panel:"_2Wd6U",section:"_27GWS"}},98483:(e,t,a)=>{"use strict";a.r(t),t.default={bodyContainer:"_2bgh7",list:"_3Cc11",search:"_1Kk5B",hidden:"VaOo_"}},80325:(e,t,a)=>{"use strict";a.r(t),t.default={"-total-search-height":"62px",totalSearchHeight:"62px","-scrollbar-width":"6px",scrollbarWidth:"6px","-windows-scrollbar-width":"8px",windowsScrollbarWidth:"8px","-section-bottom-margin":"12px",sectionBottomMargin:"12px","-title-height":"27px",titleHeight:"27px",container:"_1rtUb",title:"xfDtH"}},78666:(e,t,a)=>{"use strict";a.r(t),t.default={"-emoji-width":"44px",emojiWidth:"44px",panel:"_2ikL3"}},51460:(e,t,a)=>{"use strict";a.r(t),t.default={emojiPanel:"_1DP8V",panelBody:"_2Gmvm",panelDropdown:"_30SX6"}},45243:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_1YMR5"}},83037:(e,t,a)=>{"use strict";a.r(t),t.default={body:"VNeTl",icon:"_38Dyo",wrapper:"_137vP",container:"_1VzGk",focusBorder:"_7-H4u",preview:"_1iDDZ"}},1659:(e,t,a)=>{"use strict";a.r(t),t.default={searchContainer:"_2uZmp",section:"_10r3b",blank:"_1EQNa",row:"_1ISLd",noResults:"_1YG-A"}},91258:(e,t,a)=>{"use strict";a.r(t),t.default={bodyContainer:"_1TdPb",gifPanel:"_4_8s1",panelBody:"Jcl24",panelBodyError:"_1Z21u"}},26276:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2eA1Q",wrapper:"_1feSF",innerWrapper:"_1jisR",starIcon:"_3Wz0y",thumb:"_2RmLM",blur:"_32XHJ"}},59110:(e,t,a)=>{"use strict";a.r(t),t.default={pager:"_29Hr8",pagerLeft:"_1ZIOd",pagerRight:"AczAh",pagerDisabled:"_3f1Qz",body:"dA_JN",section:"_21CMd",searchRow:"_3YSFd"}},50320:(e,t,a)=>{"use strict";a.r(t),t.default={barContainer:"_2i-wM",movingBar1:"_13HVn",movingBar2:"rgmWD","indeterminate1-ltr":"_2nkMC",indeterminate1Ltr:"_2nkMC","indeterminate1-rtl":"_1R6n4",indeterminate1Rtl:"_1R6n4","indeterminate2-ltr":"KjuiJ",indeterminate2Ltr:"KjuiJ","indeterminate2-rtl":"_3bSf2",indeterminate2Rtl:"_3bSf2"}},64827:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_16kef"}},30462:(e,t,a)=>{"use strict";a.r(t),t.default={tab:"_1zlQ1",highlightOnFocus:"JRJYO",menu:"_-2oTK",carousel:"_3hl6E",carouselEnd:"_3GM_s",selected:"_1v2yz"}},71414:(e,t,a)=>{"use strict";a.r(t),t.default={menuTabsMarker:"NCirl",animate:"_1PHGw",animateWithTransform:"_2TG0r",hide:"_3gVEQ"}},97802:(e,t,a)=>{"use strict";a.r(t),t.default={cancelIcon:"_3pgom",inputContainer:"M1or0",inputEmojiSearch:"_3K9QW",searchRow:"_10mnt",ffFix:"_3KMMv",rowShadow:"_3wgrR",rowInput:"_2VSMU"}},45189:(e,t,a)=>{"use strict";a.r(t),t.default={panelContainer:"_3x7O3",panelDropdown:"_1m0Ug"}},16074:(e,t,a)=>{"use strict";a.r(t),t.default={tabIconOrText:"vwr6Y"}},86537:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1rX68",containerSearch:"_2-e_h",panelHeight:"_3i8Zn",contentContainer:"_2XY3B",contentContainerSearch:"_3ijFX",bodyContainer:"_1NPzg",emptyContainer:"_2YslO",emptySticker:"_1xgRn",emptyText:"_255pA"}},3903:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2elZc",border:"_1QpHK"}},99026:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1u3Az",retryButton:"ek3q4"}},7056:(e,t,a)=>{"use strict";a.r(t),t.default={emptyContainer:"tX668",emptySticker:"_3eX8j",emptyText:"_1ENK0"}},33906:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_268Mf",unscrollable:"nnnSk"}},64750:(e,t,a)=>{"use strict";a.r(t),t.default={shadow:"_1qMTr"}},26590:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2yXP9",stickerPackContainer:"ez5TU",stickerPackIconWrapper:"_1qoGD"}},56051:(e,t,a)=>{"use strict";a.r(t),t.default={input:"_1UWac",placeholder:"_2vbn4",mediaEditorTextInputPlaceholder:"_2it_2",body:"_13NKt",default:"Z2O8p",compose:"_1LbR4",large:"czcZD",status:"_23wR2",media:"oHEu9",invite:"y2xeH",mediaEditorTextInput:"_3pH28",small:"_9SNTl","list-search":"_3hKpJ",listSearch:"_3hKpJ",textInput:"_1aweH"}},75886:(e,t,a)=>{"use strict";a.r(t),t.default={emojiSearch:"yY6AE",searchBody:"dVelf",positioningContainer:"_57r8B",overlayContainer:"_3gMHK",resultsContainer:"ECdkZ",mediaCaption:"_1TBzR",emojiInput:"_30wt2"}},33179:(e,t,a)=>{"use strict";a.r(t),t.default={mentionsResult:"_12x9I",selected:"xVUcj",mediaCaption:"aspBo",textContact:"_1IiiX",textPushname:"_2nhlG",resultImage:"KWld3"}},54794:(e,t,a)=>{"use strict";a.r(t),t.default={positioningContainer:"_3lPuS",resultsContainer:"_3I-Ax",overlayContainer:"_2ERUw",mediaCaption:"_356RS"}},73248:(e,t,a)=>{"use strict";a.r(t),t.default={result:"_5oJyH",selected:"e800t",slash:"_2uNxr",shortcutPrefix:"_3G7pN",shortcutSuffix:"_1hpAY",message:"K_laH"}},99544:(e,t,a)=>{"use strict";a.r(t),t.default={positioningContainer:"_1fzlS",resultsContainer:"_3Jarj",overlayContainer:"_3zovQ"}},12095:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1Y6d8"}},59373:(e,t,a)=>{"use strict";a.r(t),t.default={btn:"_165_h",disabled:"_20QIU",large:"_2HL9j",small:"_3KkV3",inverted:"p0cPs"}},95919:(e,t,a)=>{"use strict";a.r(t),t.default={clickable:"Hme-t",body:"_2l7bQ",main:"_25m4C",mainEllipsify:"_3weqn",side:"qqWrX"}},22268:(e,t,a)=>{"use strict";a.r(t),t.default={container:"YGe90"}},54776:(e,t,a)=>{"use strict";a.r(t),t.default={conversation:"_3mPXD",placeholder:"_28a19",composeBoxQuoted:"_3QSK-",quoted:"_2xrJ4",stickerPanel:"PD3sk",clickable:"_9QB_N",showSticker:"_2afZN",fadeIn:"_37JBw"}},65690:(e,t,a)=>{"use strict";a.r(t),t.default={textInput:"_10Mbz",labelText:"_2Pq6r",hideFloatingLabel:"_1RVBL",float:"_3zbxJ",spacer:"X2s7w",noPlaceholder:"q_gDO",wrapper:"_3mpG7",locked:"_1M8UY",errorText:"_1SeZ5",textError:"_1PQrR",textActive:"_23KyQ",iconMainContainer:"hS9Jh",iconsEditContainer:"_27Wz_",icon:"_27Yui",invite:"_1misX",charCounter:"_17PfY",iconSpinner:"_2NNpn",noErrorInfo:"_1JgEV",infoStrip:"_37xeC",inputLarge:"_1pGaf",active:"_2fOd_",emptyValPlaceholder:"_12vlY",more:"_2mPox",emojiText:"_3-H1x",groupInfoName:"_2KoKm",small:"_3skxK",iconMain:"_8o4MO",desaturated:"bIGyp"}},69275:(e,t,a)=>{"use strict";a.r(t),t.default={tooltip:"_2W0IZ","menu-tooltip":"pYOck",menuTooltip:"pYOck",left:"_3qM-S",right:"_3z1FZ",top:"_29rrz",bottom:"_12zi2"}},60299:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_3DzYC",icon:"bElHk",verifiedText:"_2N5II",divider:"rFHB8"}},82796:(e,t,a)=>{"use strict";a.r(t),t.default={video:"LHFBt"}},99041:(e,t,a)=>{"use strict";a.r(t),t.default={adminBtn:"_3J8YW"}},70744:(e,t,a)=>{"use strict";a.r(t),t.default={container:"D7_Sl",text:"_2bjNw",messageNewNumberButton:"_1SKXZ"}},33492:(e,t,a)=>{"use strict";a.r(t),t.default={"-overlay-border-right":"1px",overlayBorderRight:"1px","-overlay-border-left":"1px",overlayBorderLeft:"1px",footer:"_2cYbV",positioningContainer:"_3A_K1",overlayContainer:"_33f6r",blockCompose:"_2BU3P",pttDraftPreviewDisabled:"_30KVb",inputContainer:"p3_M1",boxPanelWrapper:"_1un-p",pttComposerActive:"_18OWa",attachButtonContainer:"_2jitM",mainContentContainer:"_1SEwr",textMessageComposerContainer:"_6h3Ps",pttComposerContainer:"_2tiyZ",childPadding:"_3HQNh",sendButtonContainer:"_1Ae7k",disabled:"_1g8Im",btnSend:"_4sWnG",focusAnimation:"_1YbbN",focusAnimationKeyframes:"_3RoZE"}},44947:(e,t,a)=>{"use strict";a.r(t),t.default={"-open-menu-width":"110px",openMenuWidth:"110px",menu:"_1uqmP",button:"_3V3JJ",open:"_1PC8N",full:"_3agz_",closeButton:"_6kzle",firstButton:"l9Mer",secondButton:"_3Wl8Y",thirdButton:"_1Eec4"}},5337:(e,t,a)=>{"use strict";a.r(t),t.default={"-item-spacing":"16px",itemSpacing:"16px","-item-width":"26px",itemWidth:"26px",container:"_23sAs",active:"_2ijNh",square24:"_3t9Gs",square26:"_1owZM",top:"_2Bl6V",padding:"_2NlZY"}},84015:(e,t,a)=>{"use strict";a.r(t),t.default={panel:"a-HbF",body:"_1IN0t",cancelButton:"_1Hccy"}},73205:(e,t,a)=>{"use strict";a.r(t),t.default={btnBorder:"_1IP_h",btnBorderIcon:"_6I6m-",btnSend:"_2bJ3z",btnCancel:"_13r35",hovered:"qXuQN",btnStateDefault:"_3YsRd",btnStateHover:"gulXL"}},8546:(e,t,a)=>{"use strict";a.r(t),t.default={tile:"_1PzAL"}},31951:(e,t,a)=>{"use strict";a.r(t),t.default={pane:"_33LGR",selectable:"_1HzbD",empty:"_2AL2u",atMentions:"_1cQWN",incoming:"_1GLVO",buttonGap:"_37rpp",buttonGapRemove:"_1YWBB",iconDown:"_3K42l",iconMentions:"_1ec6v",ffFix:"EnLWz",unread:"_38VQ8",incomingContainer:"_27Uai"}},10715:(e,t,a)=>{"use strict";a.r(t),t.default={footer:"_1YfMk",body:"_1LcQK",filler:"VjtCX",footerMessage:"_31enr",subheader:"_2K2u4"}},62391:(e,t,a)=>{"use strict";a.r(t),t.default={pane:"_1fqrG",previewPane:"M_3Ni",header:"_4KLAo",title:"y67RY"}},78438:(e,t,a)=>{"use strict";a.r(t),t.default={subheader:"_1GHsB",main:"ee09o",closeBtn:"_1_fE7"}},89576:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1v2iU",text:"QoGDK",hidden:"_1JfIG",desc:"_26wVQ",more:"_2SaOr"}},60008:(e,t,a)=>{"use strict";a.r(t),t.default={attachMenuContainer:"_3iTtj",iconsItem:"_2t8DP",iconImage:"_2QbRL"}},97095:(e,t,a)=>{"use strict";a.r(t),t.default={chatControls:"_1yNrt",chatAvatar:"_2YnE3",divider:"qR2GF",chatHeader:"_23P3O",chatBody:"_24-Ff",chatMain:"_2rlF7",chatTitle:"_21nHd"}},71053:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_3tcao",bubbleIn:"_2gZCX",bubbleOut:"_3yKRR",extended:"_3YsnQ",highQualityLayout:"_8CB4o",thumbnailContainer:"_3h4Aa",noThumbContainer:"cTZ5j",noThumbIcon:"_2BwKs",media:"_1hT12",blurred:"UmakP",iconStar:"_2AQbU",isInvite:"_2kdpj",title:"_1C3Ha",description:"_3czJ-",source:"_25gVJ",body:"_1tyuK",isCompose:"_2tmq2"}},83610:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_3M3aq",button:"PWkc7"}},2452:(e,t,a)=>{"use strict";a.r(t),t.default={albumGridClass:"-dRqA",albumTopLeft:"_1JM3j",albumTopRight:"_1u0wN",albumBottomLeft:"_1nyzV",albumBottomRight:"_2qFXR",numberText:"WrYa3"}},37797:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2Gryy"}},62794:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_35n_s",hasAuthor:"FFKC-",forwardedIndicator:"SzXIb",hasQuote:"_2aRIF",author:"_3CM-O",isForwarded:"_3l04q",quote:"_2sNeT",isGallery:"_1ZLsD",ctwaContext:"_3n6X6",meta:"_1w-OG",bubbleLeftAvatar:"_1J6Dz",bubbleRightAvatar:"A8nAT",body:"_2f6-b",player:"MZ2N2",avatarContainer:"_20pN2",playbackRateButtonContainer:"Dtxcu",playbackRateButtonContainerVisible:"BTg57",avatar:"_7eHF6",avatarVisible:"_8X9Yy",status:"rBpS9"}},80425:(e,t,a)=>{"use strict";a.r(t),t.default={audio:"_3GLtT",controls:"_3xGap",body:"_17C8h",scrollPositionDetector:"_3VvAH",button:"_2oSLN",spinner:"_1wvbg",metadata:"_2j9ZT",isGallery:"Wjuil"}},96302:(e,t,a)=>{"use strict";a.r(t),t.default={author:"hooVq",name:"a71At",number:"_1BUvv",screenName:"_1u3M2",verifiedIcon:"_1_7Ir",hoverable:"_1B9Rc"}},77482:(e,t,a)=>{"use strict";a.r(t),t.default={actions:"_38sw1",actionsBtn:"_2qiMb",noDivider:"oUwuU"}},27660:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"rn1U_",withLargeButtonsSpace:"_3bcUY",buttonWrapper:"_31pvq",disabled:"_2BLmN",stacked:"_3R6jb",buttonLabel:"_1U18t",sentByMe:"tLcVC"}},56889:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_1MBzh"}},10989:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"O9jTV",bubbleIn:"_2oGZe",bubbleOut:"_3fYaH",isCompose:"_1gKmE",noThumbContainer:"_1Wg3e",noThumbIcon:"IkAc0",media:"_1mJqX",title:"_3g0R_",description:"y-sQi",source:"wxlf4",body:"_2vpnj"}},21131:(e,t,a)=>{"use strict";a.r(t),t.default={clickable:"_1ElRA"}},40618:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"W9BBw",withBorder:"_1Dp4n",wrapperIn:"_2jSbI",wrapperOut:"_1Uafg",posBottom:"oM9bJ",posTop:"_3qSgK"}},47164:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"Hcx4J",templateBubble:"_17J94",isPreview:"W2dO7",isGallery:"_1JOPv",deepContainerContent:"_2AHlA",docMeta:"_2V7xt",metaValue:"_3pRPb",text:"_2HDxO",icon:"_1FXZ1",filetypeIcon:"_2-Gn2",thumbContainer:"_1iZQW",thumb:"MidYK",ctwaContext:"_3kAh9"}},75140:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2UGGA",error:"_9CNbN",compact:"eKlTB"}},67713:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2tsYl",icon:"_2suca",iconHighlyForwarded:"_1sxwa",text:"_25ont"}},14583:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_36BuW",hover:"_2ZoZ2",current:"_3dZYx",active:"_1GjPw",focusAnimation:"_2AQt_",focusAnimationKeyframes:"-fZFX"}},1565:(e,t,a)=>{"use strict";a.r(t),t.default={"-width-picture-bubble-inner":"330px",widthPictureBubbleInner:"330px","-padding-picture-bubble":"3px",paddingPictureBubble:"3px",bubble:"_1FpDI",vendor:"Z3Htq",meta:"zE8pI",hasCaption:"_2_tMn",author:"_1E1x2",forwarded:"_1niOx",forwardedIndicator:"_1CzZV",hasAuthor:"qS_dv",quote:"_2cHQo",thumb:"_1HqS9",caption:"_3mTJL",isPSA:"_366kD",isPsa:"_366kD",thumbVideo:"_2ugLp",thumbImage:"-tfJt",isGallery:"CGrlN",isInfo:"_3AcU2",ctwaContext:"_1-1zI"}},36437:(e,t,a)=>{"use strict";a.r(t),t.default={notification:"_2ad1k",icon:"zjSQ_"}},66480:(e,t,a)=>{"use strict";a.r(t),t.default={stickerItem:"_1EoEw",stickerMenu:"_38YQn"}},21690:(e,t,a)=>{"use strict";a.r(t),t.default={outerContainer:"_3cBW5",innerContainer:"bcn_I"}},38410:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3wB0E",status:"_3DThG",caption:"FvmtX",linkPreview:"_3ccZe",expired:"fW561",noCaption:"_3Dr0h",meta:"_1crxl"}},57312:(e,t,a)=>{"use strict";a.r(t),t.default={highRes:"_2UdhN",wrapper:"_3R6rC",large:"_3zyju",lowRes:"_2LodA",medium:"_3Ci02",xlarge:"_1xeoG",animation:"KPHJD",invisible:"_1gSQr",heartbeat:"_1jJBG"}},28982:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_34_Xq",title:"_2kYWh",meta:"_2R4Kk",footer:"_2o9mS",actionContainer:"_1Ko4t",action:"XciSv",icon:"_2pUbY",productListPreview:"_2rvnm",productListPreviewForwarded:"_2qh_q"}},32361:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2W7-y",clickable:"_3u-0F",caption:"_34gLy",author:"_3wuG0",meta:"_3y3nx",hasCaption:"_2Uvnb",actionButton:"ZfIV3",thumb:"_1K98J",avatar:"_29KJh",map:"-x5Fr",overlay:"_26ALV",expired:"ZKyI8",thumbBody:"eZEWk",quote:"_2T9UJ",status:"_2DxYf",statusIcon:"_1wRXt",statusText:"_1EdD8",stopLocation:"_1p9qB",viewLocation:"_28sTG",hidden:"_3mCpr"}},327:(e,t,a)=>{"use strict";a.r(t),t.default={hasText:"_3pk8n",noText:"ayWBM",quote:"_1PXpa",forwarded:"_3j_MG",hasAuthor:"_3cXIV"}},68437:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1O7Qw",link:"_2NMzP",title:"a5x1L",address:"_16GEO",hasURL:"_1uGHA",hasUrl:"_1uGHA",text:"_10e3n",author:"_38kO0",forwarded:"_2F595",forwardedIndicator:"_1Ui2Y",hasAuthor:"_3xqkd",meta:"PWnOL",thumb:"_2dClC",thumbBody:"_1cPOs",quote:"mZtXF",hasCaption:"_1cDYl",caption:"_1Kl0h",ctwaContext:"s6NhA",ctwaContainerWidth:"_21LuH"}},7017:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_3syqI",hasCaption:"_40stu",meta:"L3vXB",isPSA:"_2kcyS",isPsa:"_2kcyS",author:"_8gEIp",forwarded:"_396OZ",forwardedIndicator:"_3Sm7S",hasAuthor:"l_Ti4",quote:"ORufR"}},11287:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"fX8hW"}},30532:(e,t,a)=>{"use strict";a.r(t),t.default={context:"_18oGY",contextIn:"_2copG",contextOut:"_1UyGr",contextIcon:"_3e9My",contextSpecial:"_3U8t1",contextInverse:"MAFpw",contextMedia:"_3I4pa",contextMediaLtr:"_3snhK",contextMediaRtl:"u5x7Z",contextMediaDocument:"fsbrQ",contextIconMedia:"_3sryO",contextDoc:"_2t2UT",contextPtt:"_1SfBg",contextPttFix:"_1qLtS",contextMultiVcard:"_3Zf7E",contextStickerAuthor:"_3QvcT",contextStickerTransparent:"fL8od",badge:"_3Vg32",contextStickerInverse:"sXuJ5"}},25410:(e,t,a)=>{"use strict";a.r(t),t.default={author:"_1aJWo",hasForwarded:"_12iIz",caption:"_1WihM",forwardedIndicator:"_1bT9q",hasAuthor:"uStkE",meta:"_1a1gY",hasCaption:"_2L1FC",quote:"_26Orz"}},5511:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_1Gy50",template:"_36bJ3",placeholder:"_3TjU1",spacer:"_20bHr",icons1:"_2ui2p",icons2:"_2k1_e",icons3:"_2c6ge",icons4:"_29c8S"}},47297:(e,t,a)=>{"use strict";a.r(t),t.default={meta:"_15K2I",chromeFix:"_3QDB6",metaLight:"_1OX94",timestamp:"kOrB_",icon:"_2NDV3",status:"_2F01v",labels:"_1-t6k"}},22981:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3BK98",isChecked:"_3vy-1",gallery:"_3b_q4"}},70813:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1x75M",icon:"_3TQyU",text:"fGkSE",containerSmallIcon:"_2GaDw"}},92957:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"JwMbj"}},91948:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"lsgDP",isGallery:"_3g4g6",isPreview:"_37wDH",quote:"_2Cwna",hasAuthor:"_3DJ5p",vcard:"_3JXMS",author:"_1l9dG",hasQuote:"_18WKw",body:"_26ZRH",avatar:"_10G7D",meta:"_10uUU",name:"_1GdIz",image:"_3G9hz"}},63780:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_129rK",bizInfo:"dOOrj",iconE2E:"_3DF-v",iconSupportGroup:"_2yNLS",iconMiss:"_27IZa"}},21730:(e,t,a)=>{"use strict";a.r(t),t.default={orderPreview:"_3Ly8y",meta:"_1Ia-r",messageText:"_1D8u3"}},2550:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_37d07",text:"_3NDmC"}},65450:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3AKvj",thumb:"_1puGD",amount:"_2sFh6",amountCurrency:"_2v-Oh",amountInteger:"dnINe",amountDecimal:"_15T9I",isQuoted:"vmShS",isQuotedInComposeBox:"_1H1Py"}},74789:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2N4Gy",success:"_3aNyY",failed:"_1VIdA",pending:"_1SRza",iconSymbol:"_2xEyu",compact:"_156-W"}},91215:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2oQsk",bubbleIn:"_25qjo",bubbleOut:"_1nlBk",bodyIcon:"_2F85q",bodyIconMultiline:"_31jNG",bodyText:"_11BDX"}},39790:(e,t,a)=>{"use strict";a.r(t),t.default={status:"_3l0Zb",failed:"_28WXG",pending:"_1Cqss",success:"_126yN"}},32402:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_14JTW",isQuoted:"_2C1pR",name:"_32Z_R"}},13651:(e,t,a)=>{"use strict";a.r(t),t.default={hasText:"_1SeXE",noText:"UF5lM",quote:"_3Q47_",forwarded:"_2Qbk-",hasAuthor:"_3ERBM"}},7603:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_33Jbv",portrait:"_3RuOs",isPreview:"_38UIy",author:"_2nOdl",forwarded:"_3E82p",forwardedIndicator:"_3uVBe",hasAuthor:"SXyGp",meta:"_2AKAp",hasCaption:"_3r8ao",caption:"_2t5l8",isPSA:"_3gULZ",isPsa:"_3gULZ",quote:"l9kYZ",thumb:"_10-BC",isAlbum:"_2x8Vu",thumbBody:"_1WrWf",thumbBodyLores:"mFB5y",isGallery:"SzjBD",overlay:"cSicd",overlayAlbumText:"_3iQe5",ctwaContext:"_1tkCp"}},22159:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_3QEso",badge:"_1vaz6"}},71388:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1QYU4",productInfo:"_2yDL5",author:"_16tZk",title:"_2k-9J",subtitle:"_34u6v",thumb:"_3fOqz",productContainer:"yW3W2",bubbleIn:"_33uIf",bubbleOut:"_3hh_M",productCta:"_1x-HA"}},23766:(e,t,a)=>{"use strict";a.r(t),t.default={image:"_3mSTX",default:"LacDz",icon:"_3TcVw",container:"_1JhMF",hasBorder:"_374fh",dimmed:"Qrclb",hasInnerBorder:"_1HLgI",hasLargeInnerBorder:"_2OuQU",square:"_1avFe",col:"_3UWjv",row:"_3nYfM"}},4947:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2sFz4",incoming:"_3NyWk",outgoing:"_1TKVr",blue:"_1_lrh",gray:"_1k-_q",green:"_2PvBP",wrapper:"i87tO"}},66076:(e,t,a)=>{"use strict";a.r(t),t.default={imageWrapper:"_3yqEq",msgImage:"_2W5Qi",composeBox:"NdQ5u",statusV3:"_2CyOs",isPayment:"_3RjjZ",image:"_1HKX6"}},777:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3hPBO",quotedMsg:"_3o5fT",statusV3QuotedMsg:"_2stdY",composeBoxQuotedMsg:"_3XUNQ",hover:"O_MMl",colorBar:"_3jrlM",msgBody:"-gKwI",msgText:"E_Te0"}},15149:(e,t,a)=>{"use strict";a.r(t),t.default={messageText:"eWQsx",composeBoxQuotedMsg:"_2fkyH"}},58821:(e,t,a)=>{"use strict";a.r(t),t.default={hover:"_2Kajt",quotedMsg:"_1apSG",msg:"_3hnu6",colorBar:"_37TOd",msgBody:"_2saPi",composeBoxQuotedMsg:"_3e9sI"}},32744:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2T3DS"}},63459:(e,t,a)=>{"use strict";a.r(t),t.default={caption:"kbh9x",meta:"L-lId"}},6455:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3kxQ0",track:"_1tYaO",containerIncomingPlayed:"_3AEe_",containerIncomingUnplayed:"_2Dnx-",containerOutgoingPlayed:"_3-AGg",containerOutgoingUnplayed:"_1tsJt",thumbTravelContainer:"_2ujFr",thumbContainer:"_2Ni3Y",thumb:"_2yqJw",containerDisabled:"_3P77p",progress:"_9Zdab"}},61948:(e,t,a)=>{"use strict";a.r(t),t.default={title:"_2g2jh",titleMain:"_2PElp",meta:"Ow8Il",chat:"_2NNvx",divider:"_7VvVk",chevron:"_2conS",avatar:"_2BgQo",author:"_19E70"}},61871:(e,t,a)=>{"use strict";a.r(t),t.default={light:"N4ItZ",ackBlue:"_3l4_3"}},92269:(e,t,a)=>{"use strict";a.r(t),t.default={hasAuthor:"_1u9qp",quote:"O2yv0",bubble:"_26F99",meta:"_3Lby7",isTransparent:"_2JUrU",body:"_3BGWx",author:"_3OC33",isFirst:"_2ecOY",ctwaContext:"_1BMHI"}},5138:(e,t,a)=>{"use strict";a.r(t),t.default={cursorAuto:"_1atlx"}},47336:(e,t,a)=>{"use strict";a.r(t),t.default={sticky:"_3Iosq"}},59976:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3tnd4",isLinkMsg:"_3RjPV",icon:"_27ymf",text:"_2p23z",ctwaContainer:"_1FZ6n"}},76368:(e,t,a)=>{"use strict";a.r(t),t.default={actionButton:"_1BRNh",actionText:"_3xFaq",disabled:"_1a7m4",buttonContainer:"_2BdLo",firstButton:"_1ZjA4",quickReply:"_23rhp",callUrl:"_2-SfQ",icon:"_19CsY"}},58606:(e,t,a)=>{"use strict";a.r(t),t.default={footer:"_20thf",isMedia:"prQDN",dirMismatch:"_1_Ort"}},52246:(e,t,a)=>{"use strict";a.r(t),t.default={quote:"_2Fo6S",forwarded:"_3HH9A",hasAuthor:"_2jGOb",hasSuspiciousLinks:"_2bdeW",linkPreview:"GAiYx",meta:"_3GEz5",title:"to3eh"}},20562:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_22Msk",portrait:"_24PSW",landscape:"_2T1i2",meta:"_1beEj",isPSA:"_2kk7U",isPsa:"_2kk7U"}},45613:(e,t,a)=>{"use strict";a.r(t),t.default={shade:"_23IDz"}},38537:(e,t,a)=>{"use strict";a.r(t),t.default={msgUnread:"_5ML0C",msgUnreadBody:"_3cOAM"}},69817:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_1t8dg"}},18082:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1tfap",isGallery:"_2WYy8",isPreview:"_2GU93",quote:"_35w8x",hasAuthor:"_3QaM3",vcard:"_2GhDW",author:"_1tStr",hasQuote:"_2iCgE",body:"_26nhK",avatar:"_1DYXt",meta:"_2YJfd",name:"Wx25u",ctwaContext:"_3sss8",placeholder:"_1eaPn",placeholderAnimation:"_2dH4k","gradient-ltr":"_3Ghom",gradientLtr:"_3Ghom","gradient-rtl":"_1r4eb",gradientRtl:"_1r4eb",placeholderImage:"_1gIrs",placeholderText:"_1RBL5",vcardDownloadStageIcon:"_3Us45",icon:"_37K6A"}},14825:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1t37P",portrait:"_134Es",nonAlbumBubble:"_2xC3a",author:"_2atsY",forwarded:"_1RlD4",forwardedIndicator:"_43alh",hasAuthor:"_20KVs",meta:"_11fZT",hasCaption:"_1SOMD",caption:"_3eos6",isPSA:"_2o8XZ",isPsa:"_2o8XZ",quote:"_1yEuI",thumb:"_1ypsO",inAlbum:"_3PsvI",cursorPointer:"_2Vb1G",thumbBody:"UYCLA",thumbBodyLowQuality:"_3srmQ",duration:"_14Z-M",icon:"_16slm",pipBtn:"_3hdyf",isHover:"_3Qmuz",overlay:"_282B-",overlayAlbumText:"_2Iq8p",ctwaContext:"_1zWXT",ctwaContainerWidth:"_2ttrC",ctwaThumbWidth:"_1cD6W"}},41956:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_39dtd",bubbleIn:"_1L3Ws",bubbleOut:"_1Z4jT",title:"_2p7aG",description:"_20Ubt",source:"_1zFU4",body:"S5xZL",noThumb:"QCZcQ",thumbnailWrapper:"_1ywEL",thumbnail:"_2_uq6",noBlur:"_3V1nv",thumbnailPlaceholder:"lzcge",youtubeThumbnail:"_1EVQk",mediaStateControlsWrapper:"_26bsH",attribution:"_2xLE7"}},47833:(e,t,a)=>{"use strict";a.r(t),t.default={unviewedBubble:"_3vq6v",deepContainerContent:"Iuuun",statusIcon:"erW8R",statusDone:"_3Tm1t",accentIcon:"_128Ua",nonSpinnerIcon:"_1dhgC",content:"_2-m_G",contentMeta:"_11Cmm",labelContainer:"_2x9gu",labelText:"_1f8PP",labelActive:"_2uA_l",labelInactive:"_1PxFw",labelRetry:"_2bElB",quote:"_26O9z",meta:"_3W6bj",dialogTitle:"_3YXCQ"}},20699:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_9RSth",inactive:"Uo1hc",icon:"lwwpK",spinner:"bjI3o"}},1961:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_2wUmf",msgContinuation:"_21bY5",msgSystem:"V-zSs",sticky:"_1bp3Q",message:"cvjcv",hasTail:"_8YVHI",messageBackground:"Nm1g1",tail:"_3nrYb",tailHighlight:"_33ElR",messageTransparent:"_1S-gg",tailOverrideHide:"fe1wa",messageSystem:"EtBAv",messageChat:"_1Ilru",messageCode:"NuMBJ",messageDebugNotification:"b9OGT",messageE2ENotification:"_1p8Qv",messageBizNotification:"EkgRd",messageNonE2ENotification:"tokhT",messagePlaceholder:"_2i2ot",msgGallery:"_1JOu_",messageAudio:"_2G-o1",messageDocument:"_1CJ4I",messageList:"IdKDv",messageMultiVcard:"_1BUp2",messageProduct:"TV0H8",messagePTT:"JZd-w",messagePtt:"JZd-w",messageSticker:"XWVkh",messageVcard:"_3Q9cR",messageGif:"_29jDW",messageImage:"_3QK-g",messageLiveLocation:"_3zfPb",messageLocation:"_3Y4UU",messageVideo:"_3bxPY",msgInfo:"_1fwLN",msgWithQuickAction:"_1q25n",messageHidden:"_2o1bS",msgContainer:"_16Lhn",quickActionButton:"_3JXTQ",msgPSA:"mwr1_",msgPsa:"mwr1_",messageVideoLinkPreview:"R5FJb",placeholder:"_1r2Rq",gridContainer:"_1LCu0",author:"_3Hxe_",forwarded:"_18j3q",albumBubbleContainer:"_3dSQU",forwardedIndicator:"_3Ldzf",hasAuthor:"_3muY2",authorForward:"_3Pc1A",groupStickerContainer:"_1p8l-",singleGroupedStickerContainer:"_3tRFQ",groupStickerAuthor:"_1xswm",transparent:"_14jRh",hasBorderBox:"_22AX6",hasUrlCallButtons:"_3Bwen",stickerWrapperContainer:"_3fAhg",highlightAnimation:"_2Mxoz",highlightAnimationDarkIn:"_24_ZS",highlightAnimationDark:"oT5bl",highlightMentionAnimation:"jvg4k"}},42284:(e,t,a)=>{"use strict";a.r(t),t.default={messageList:"y8WcF",messageListSelectable:"_1RYqc"}},57825:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_1fHaQ",media:"_3wSUT",bubbleIn:"_2Tdav",bubbleOut:"_1C93k",title:"H6KiG",description:"W0fmS",body:"MjVnZ",descriptionIcon:"h7Gvb",titleIcon:"_22uJ6",quoted:"_3njlI"}},85333:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_26S5d",bubbleOut:"KaulV",media:"RwCuI",title:"_3Hadc",description:"_3GhB-",body:"_3KPUU"}},89777:(e,t,a)=>{"use strict";a.r(t),t.default={pttSendButton:"_1Me6x",pttCancelButton:"_1lCb2",pttStopButton:"b01Bg",pttPlayPauseButton:"_1Ppyp",paused:"bxe1M",bounceOnHover:"_2T6uS",bounce:"_3V93w",clipFix:"_2BWjh"}},74459:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3dUfq",previewContainer:"_38ucq",recorderMode:"_1YI1x",previewMode:"Hfklx",timerContainer:"DOFUq",waveformContainer:"_1ofZ4"}},96734:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2CkHc",disabled:"_8IpdG"}},46497:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_22WF5",containerInner:"_3GUzQ"}},4728:(e,t,a)=>{"use strict";a.r(t),t.default={recording:"_3CjUT",pttCounter:"UYzXm","ptt-indicator":"_1HNpL",pttIndicator:"_1HNpL",container:"_1KJY9",active:"_3zg1V",pttStartRecordingButtonContainer:"ocadv"}},45086:(e,t,a)=>{"use strict";a.r(t),t.default={btnPtt:"_30ggS"}},41975:(e,t,a)=>{"use strict";a.r(t),t.default={spam:"_3ImlL",text:"nyOSn",controls:"_3E-9Z",button:"_12bMD"}},78894:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3XVrM",image:"bYfXc",body:"_2LRJ",badge:"_3VTQv",name:"_3RHSW",address:"FUBUr",description:"_0ffS"}},27311:(e,t,a)=>{"use strict";a.r(t),t.default={vcard:"_1q9Fo",controls:"_1FIfN"}},13702:(e,t,a)=>{"use strict";a.r(t),t.default={spinner:"_3_EXz"}},42438:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2J8hu"}},72863:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2RNQH",containerFull:"_39sdI",icon:"r4PR4",containerCircleIconFull:"NdjtU",name:"_2SClx",labelFilter:"_2P0Mi",iconContainer:"_3FLUp",drawerTitle:"_2qNIm",circleIcon:"K-Qhf"}},25879:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2qwDL",circle:"JHRtT",text:"_1FOpn"}},86690:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1ExdJ"}},90907:(e,t,a)=>{"use strict";a.r(t),t.default={closeButton:"_35o6i"}},72681:(e,t,a)=>{"use strict";a.r(t),t.default={controlsSummary:"_2tvYd",container:"uyolZ",btnActive:"_7Q6yp"}},55334:(e,t,a)=>{"use strict";a.r(t),t.default={app:"_1XkO3","app-enter":"_2xtgz",appEnter:"_2xtgz",noAnimation:"_22rDB",drawerManager:"_3ArsE",pane:"ldL67",paneTwo:"_3sh5K",paneThree:"_1bLj8",paneOne:"_2i3T7",chatlistHeader:"_191H_"}},52821:(e,t,a)=>{"use strict";a.r(t),t.default={"-color-bg-light":"#f7f7f7",colorBgLight:"#f7f7f7",panelBody:"pXnLN",searchSpinner:"_3hEhb",panelSearch:"_3K-bg"}},9340:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxSelectableWrapper:"_1Ux09",checkboxSelectableControl:"_1f5_O"}},46937:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_1Y2N1",control:"ovk9m",label:"_1CKaR",note:"_2K2OR"}},36874:(e,t,a)=>{"use strict";a.r(t),t.default={container:"gyxUD",control:"_2xfkv",label:"_2Xa9G",buttons:"_1zS9w",button:"_311E8"}},57067:(e,t,a)=>{"use strict";a.r(t),t.default={drawer:"nBIOd",white:"_3kIRz",drawerGallery:"_1MulP",drawerCapture:"_3pakh",drawerEdit:"_1pz_d",drawerMedia:"_22TsG",drawerCatalog:"_7jJPW",striped:"_2T-Z0",belowHeader:"_1g4QS"}},68276:(e,t,a)=>{"use strict";a.r(t),t.default={container:"KPJpj",noscroll:"_2M_x0",centerItem:"_1-EIp",padding:"_3jVZG",centerColumn:"GiGr9"}},44117:(e,t,a)=>{"use strict";a.r(t),t.default={drawerHeader:"_1PGhQ",drawerTitle:"_1Yy4I",drawerTitleBody:"_1FrBz",side:"_3sr6g",drawerTitleAction:"_2-1k7",multiMediaGallery:"_3ov47",drawerHeaderSmall:"_2mQtw",drawerHeaderOffset:"-bGGW",drawerHeaderPopup:"_1S5wN",btnCloseDrawer:"_18eKe",paneListControls:"_2zjLK",labels:"_1bXem"}},80524:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_1oVqk",itemBody:"hBx4i",row:"_2E0YI",main:"_3fa-x",side:"_6IY10",primary:"_18Bwj",secondary:"_2XZQl"}},90592:(e,t,a)=>{"use strict";a.r(t),t.default={container:"vXLk5"}},17764:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2P1rL",title:"_10vh8","padding-large":"RVTrW",paddingLarge:"RVTrW","padding-small":"_1dqt0",paddingSmall:"_1dqt0","padding-no-margin":"_2FcG4",paddingNoMargin:"_2FcG4",refresh:"BnR7O",padding:"_1zkaQ","group-desc-padding":"mf5g4",groupDescPadding:"mf5g4","no-padding":"_36WbZ",noPadding:"_36WbZ","padding-product":"_2ROcQ",paddingProduct:"_2ROcQ","center-column-fixed-width":"_1-HQq",centerColumnFixedWidth:"_1-HQq",animate:"_1is6W","well-animation2":"_1sr9L",wellAnimation2:"_1sr9L","list-section":"_3-Bxb",listSection:"_3-Bxb","title-larger":"_2zE_D",titleLarger:"_2zE_D"}},7487:(e,t,a)=>{"use strict";a.r(t),t.default={option:"_3WnsF",label:"_34BcH",input:"_1HqB3",footer:"_2cid2",footerText:"_1dR22",nuxHeader:"_3jqp_",nuxContent:"_2DmHt",nuxText:"_1zYm2",nuxAction:"_1K7oE"}},93874:(e,t,a)=>{"use strict";a.r(t),t.default={nuxIllustration:"_2_GUB",nuxIcon:"BoZ4c",chatIcon:"_1XHiQ",chatIcon1:"UEsgv",chatIcon2:"Mg4_z",chatIcon3:"_2N6Ma",chatIcon4:"_17YEq",chatIcon5:"_1cD1O",chatIcon6:"_3PvSL",bannerIcon:"_3_bUO"}},18893:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1q9_k",metadataContainer:"_2a2H4",metadataText:"R3UG9",metadataTitle:"_1gPl9",metadataDesc:"_1PYAC",participantList:"_2zMeO",participantsTitle:"_1A6yW",participantsContainer:"ThClE",participantWrapper:"_19Pam",emptyContentContainer:"_2I2QE",participantsText:"_124as",contactsText:"_3-Rac",participantText:"_52dzE"}},24642:(e,t,a)=>{"use strict";a.r(t),t.default={container:"wkMfH",metadataContainer:"_1-GpK",metadataText:"Ju06N",metadataTitle:"_2Ilb2",metadataDesc:"_3ssy9",participantList:"_3qUpq",participantsTitle:"_1NaaQ",participantsContainer:"_4ULH-",participantWrapper:"oN3jd",emptyContentContainer:"_1n8L6",participantsText:"_2b4hy",contactsText:"_1B4j_",participantText:"_2UPqr",inviteExpiration:"_1iSLZ",inviteExpirationIcon:"TlapI"}},97765:(e,t,a)=>{"use strict";a.r(t),t.default={description:"_2FqEP",containerAllow:"_2BTU8",icon:"_1kXIp",title:"_2hxax",controls:"mtD53",topCenter:"_2ySXX",topLeft:"J0OBZ",bottomCenter:"_361JZ"}},31190:(e,t,a)=>{"use strict";a.r(t),t.default={intro:"zaKsw",body:"_1RAKT",title:"_1vPMT",text:"_2-IT7",betaTitle:"_1vjYt",betaText:"_1y6Yk",betaIcon:"mDUle",betaIconText:"_3Lm9O",image:"_2JIth",textContainer:"_35HSa",mdImageWrapper:"WM0_u",mdBetaImage:"IVxyB",mdImage:"wuLkd",secondary:"_11TMV",divider:"_1_9wz",secondaryText:"_3ZJFu",secondaryTextBody:"_3yRMq",secondaryIcon:"_33d9M"}},95694:(e,t,a)=>{"use strict";a.r(t),t.default={container:"Ph7CX",list:"_3_bJS",section:"_3FmxE",action:"_1rse8",shortcut:"_1Cbf3"}},57269:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerBlurCrop:"_29V76",mediaViewerBlurImg:"_3lbCb"}},89805:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerImg:"_2dXkT",cursorZoomIn:"_1ctu4",isDownloadPrevented:"_3YTjm"}},77375:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelHeader:"_1w-Ol",mediaPanelTools:"_2OBzR",info:"_3ii0l",voIcon:"_3DT5C",highlightClose:"_3tWb8","highlight-ltr":"MOdnb",highlightLtr:"MOdnb","highlight-rtl":"U56ii",highlightRtl:"U56ii"}},80674:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerAnimate:"_1DmUx","media-viewer-animate":"_1DmUx",cursorZoomOut:"ls2-S",mediaViewer:"_3IBSU",viewOnce:"de89i",mediaContent:"zMiDB",btnMediaNext:"_3jdhc",btnMediaPrev:"_1vA6Y",media:"_2E0wf",mediaWithCaption:"_32hvM",captionWrapper:"_2A70N",captionWrapperExpandable:"_1JNVL",mediaCaption:"_2Naut",captionHidden:"EQKPE",expanded:"Y9XL1",mediaCaptionExpanded:"_2p2gD",captionExpanded:"_1aBpn"}},30194:(e,t,a)=>{"use strict";a.r(t),t.default={title:"AHWnp",block:"_29x_V",illustration:"_23H4S"}},35664:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1nYgI",vcardWrapper:"_3loXS"}},37388:(e,t,a)=>{"use strict";a.r(t),t.default={label:"_1F1Ky",input:"_39gup"}},8863:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_3BpxF",control:"JS6_m",label:"oZdoE",metaText:"_3Zvr1",border:"_2C05p",mdMetaText:"_3DIQo"}},7984:(e,t,a)=>{"use strict";a.r(t),t.default={screenshots:"_2N-Sr",action:"_2Z00h",disabled:"_1dCWS",screenshotPreview:"_1aNKD",screenshotsImg:"_1vJ4T",btnDelete:"_1J6XW"}},93326:(e,t,a)=>{"use strict";a.r(t),t.default={listPanel:"_1xTTG",listBody:"_3r7by",listSectionSep:"_2Kk0v",listSectionText:"_2AKL6",listSectionAction:"_3rfc-",panelHeader:"UIGre",headerText:"_3UMOa",primaryHeaderText:"_3cSb-",secondaryHeaderText:"btY4I",headerButtonsPrimary:"_2Ohh0",headerButtonsSecondary:"_2VTZ7"}},64133:(e,t,a)=>{"use strict";a.r(t),t.default={mainWrapper:"_2QTec",v3_x:"_35ycQ",v3X:"_35ycQ",v3_x_mac:"IbXBn",v3XMac:"IbXBn",modalBackground:"_1MKT7"}},39310:(e,t,a)=>{"use strict";a.r(t),t.default={updateWrapper:"Mj2NJ",updateTitle:"_3UOVI",uploadButtons:"_3kEgT",buttonContainer:"_1og7g",buttonIcon:"_1J0rq",outStatusPanel:"FrEHq",outDetail:"_2UERf",seen:"_21t7t",timestamp:"_3bEgA",placeholderIcon:"zfSRK",placeholderText:"_1i0DV",viewWrapper:"_1xUiP",viewTitle:"_88iAO",viewUpdates:"_2N7oy"}},17394:(e,t,a)=>{"use strict";a.r(t),t.default={chevronLeftBg:"_1MFTK",chevronRightBg:"XzUO1",chevronLeft:"_1ElYg",chevronRight:"_1scx6",playerContainer:"ziHaZ",mediaStateControls:"_2om51",viewer:"_3KtSV",v3X:"z4GOz",v3X_mac:"_17UNH",v3XMac:"_17UNH",backIcon:"_2RuoM",backIcon_mac:"_16nW_",backIconMac:"_16nW_"}},43047:(e,t,a)=>{"use strict";a.r(t),t.default={suspiciousHostname:"_1xz_9",suspiciousCharacter:"_2x-Eg",explanation:"_3eYuR",url:"_6nRAy"}},91377:(e,t,a)=>{"use strict";a.r(t),t.default={headerText:"_2T4uY",bodyText:"MClO-",noticeSvgWrapper:"_2xtg4",noticeModalContentWrapper:"gWDq0",noticeSmbContainer:"_3Sqbv",noticeContainer:"_2AgSI"}},637:(e,t,a)=>{"use strict";a.r(t),t.default={content:"_2x3kE",icon:"_2cPNo"}},11927:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3vLeQ"}},42037:(e,t,a)=>{"use strict";a.r(t),t.default={form:"_1_psp",section:"S4s9L","well-animation2":"_3PdLd",wellAnimation2:"_3PdLd",circle:"_1C64q",spinner:"_3Ea-7",container:"xvgoq",show:"_2FUyH",circleContainer:"_28mPV",checkmarkContainer:"_1TMgk",errorContainer:"_1ScAm",checkmark:"qlZ5I",error:"_3Fr6b",errorBanner:"_3PYWJ",code:"xYqL-",row:"hsOn4",block:"_3WPv2",digit:"_3Muc-",explanation:"_37tSc",dragAndDropExplanation:"Lbmtf",photo:"_1Ua6g","drawer-scale":"_2OqK6",drawerScale:"_2OqK6",webcam:"_17NcY",webcamVideo:"PKLd7",btnClose:"_35Nbq",overlay:"_3APck"}},34984:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_1krwj",fullscreen:"_3kq_J"}},71058:(e,t,a)=>{"use strict";a.r(t),t.default={pipBtn:"_1lwah",player:"_3SImV",preview:"_2Wc_a"}},64374:(e,t,a)=>{"use strict";a.r(t),t.default={note:"JnYV-",icon:"_3UuEL",noteBody:"r9R96"}},46944:(e,t,a)=>{"use strict";a.r(t),t.default={fullWidthShade:"_1jlME",stripHeightShade:"_2hBQZ",lowerShade:"_7fWf0",upperShade:"_2I5Pn",fullHeightShade:"_26m2r",roundedCorners:"_11aOe"}},86182:(e,t,a)=>{"use strict";a.r(t),t.default={videoFloater:"_1yCOB",bgImg:"_3KBRF",bottomLayer:"_3U70F"}},59280:(e,t,a)=>{"use strict";a.r(t),t.default={playerWrapper:"_3DJrq"}},33896:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1GTRd",fullscreen:"_2agWE",videoFloaterMedia:"_1L9_f",videoTag:"Nu3Wb",mediaStageWrapper:"YEIj6",preview:"_1U2GK",errorLink:"_1pC8H",errorLinkChevron:"_1Wl8F"}},2425:(e,t,a)=>{"use strict";a.r(t),t.default={"-thumb-radius-window":"4.5px",thumbRadiusWindow:"4.5px","-thumb-radius-fullscreen":"5px",thumbRadiusFullscreen:"5px",controls:"JoCWT",playpauseBtnContainer:"_12yJA",fullscreen:"_3xiak",currentTime:"_2_4KF",duration:"_16nh8",timeText:"_3uSsO",progressBarContainer:"_3jydI",hiddenProgressBar:"_3pwnf",displayedProgressBar:"_21ku_",displayedProgress:"_3BMKG",displayedBuffer:"_30H64",displayedTrack:"hSz6i",thumb:"al2Th",hideThumb:"_3F6-u",volumeContainer:"_2VCkS",volumeBarContainer:"_1HuQo",volumeLowerTrack:"_1doUo",firefoxFix:"_--MFl",lowerTrackLongest:"_2Ui3v",volumeBar:"R14Al",volumePadding:"efDTi",tooltipWrapper:"_2q2Ao",tooltipTextBoxPosAndSize:"_3QlVv",tooltipTextBoxGeneral:"sbESo",tooltipTailGeneral:"_3U6VK",tooltipTailPosAndSize:"_3b4r_"}},10250:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3zkWT",fullscreen:"_2vZwf",youtubeContainer:"_1V2K3",blockYoutube:"_1x9uu",videoControlsWrapper:"_1U1Mw",strippedVideoControls:"_2HmZV",opacityTransition:"_1gTDs",widgetsWrapper:"_3gJPS",dimmed:"_1DumA"}},55722:(e,t,a)=>{"use strict";a.r(t),t.default={description:"_3R1ue",price:"_3m_Hd",shareButton:"_3pVFc",detailContainer:"_3kf37",catalogListItem:"_1fb_h"}},19714:(e,t,a)=>{"use strict";a.r(t),t.default={thumbsContainer:"_3qN7p",scrollContainer:"_1JJ7Z",viewerThumbs:"_258nw",thumbPadding:"_3L1Ml"}},63560:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelHeader:"dFinM",info:"BG-df",productNameIcon:"_28a8d",productName:"_15N7L",mediaPanelTools:"LfZzj",infoName:"_3FYIN"}},42290:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerAnimate:"_2uKUG","media-viewer-animate":"_2uKUG",cursorZoomOut:"_1ySjD",mediaViewer:"XDLQm",mediaContent:"_1ASvF",btnMediaNext:"_1Hcpd",btnMediaPrev:"_1cbLm",media:"_2R0bK",mediaWithCaption:"_3nZnk",mediaCaption:"_2mZu5",captionHidden:"_1rdGM"}},44347:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"_27sCZ",canvasBody:"_1VwnE",list:"_4LH-P",listWrapper:"_1SLfK",canvasComponent:"_2bqRm",canvasComponentLarge:"_12SQt",canvasSecondRow:"_3r1Yv",canvasComponentLargeGallerySpacing:"_3VkTU",viewerFlow:"_1blm3",active:"_3ej1w",overlay:"mrr7z",placeholder:"_3z3XE",gradient:"CjdoI"}},57734:(e,t,a)=>{"use strict";a.r(t),t.default={voipFloater:"_1O6Us"}},64333:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_3xKYi"}},87052:(e,t,a)=>{"use strict";a.r(t),t.default={body:"IHGZG",callTitle:"_3dgg6",participantName:"_3Y4xy",actionRow:"VBnae",btnGroup:"_1UTAJ",btnAccept:"x24Wk",btnReject:"_2OWwK",btnEnd:"_2N43F",btnMute:"_2cngH",webrtcCanvas:"TA3bw",webrtcVideo:"_3eyg5",webrtcVideoPreview:"Nk6pN",webrtcAudio:"_3y1ot"}},52812:(e,t,a)=>{"use strict";a.r(t),t.default={ul:"LP6da",inline:"_1VtNw"}},75759:(e,t,a)=>{"use strict";a.r(t),t.default={inline:"_2ZEMa"}},53847:(e,t,a)=>{"use strict";function r(){return new Worker(a.p+"webp_to_animation_frames.worker.85dd49adef59e4d19f74.worker.js")}a.r(t),a.d(t,{default:()=>r})}}]);