/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[3498],{273925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobBuilder=void 0,t.definePersistedJob=function(){return new i([])};var r=n(811158),s=n(632157);class i{constructor(e){this.steps=e}step(e,t){return this._stepWithOptions(e,"function"==typeof t?{code:t}:t)}_stepWithOptions(e,t){const{stopRetryIf:n,requirements:d,code:p}=t;let a=u(d,p,n);if(n){const{timePassedSeconds:e,appCrashed:t,onStopRetry:i}=n,d=u(null,function(e){return(t,n,s)=>Promise.resolve(e(t,n,s)).then((e=>e instanceof r.InterruptJob?e:new r.InterruptJob(e)))}(i),n);null!=e&&(a=o(((t,n,r)=>{let{jobStartTime:i}=r;return(0,s.happenedWithin)(i,e)}),a,d)),t&&(a=o(((e,t,n)=>{let{afterCrash:r}=n;return!r}),a,d))}return new i([...this.steps,{stepName:e,info:a}])}finalStep(e,t){const n=this.step(e,t);return{end:()=>n.steps}}}function o(e,t,n){return(r,s,i)=>e(r,s,i)?t(r,s,i):n(r,s,i)}function u(e,t,n){const r={requirements:e,code:t,stopRetryIf:n};return()=>r}t.JobBuilder=i},193182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineWebPersistedJob=function(){return(0,r.definePersistedJob)()};var r=n(273925)},223498:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendRequestedKeyShare=void 0;var s=r(n(348926)),i=n(193182),o=n(669050),u=n(766187);const d=(0,i.defineWebPersistedJob)().finalStep("sendRequestedKeyShare",function(){var e=(0,s.default)((function*(e){let{keys:t,orphanKeys:n,peerDeviceId:r}=e;const s={type:"missing_key",keys:t,orphanKeys:n,peerDeviceId:(0,o.createWid)(r)};yield(0,u.workerSafeSendAndReceive)("sendAppStateSyncKeyShare",{keyShare:s})}));return function(){return e.apply(this,arguments)}}()).end();t.sendRequestedKeyShare=d}}]);
//# sourceMappingURL=https://web.whatsapp.com/3498.302b6e2d473f941ae308.js.map
