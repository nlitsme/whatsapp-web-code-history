/*! Copyright (c) 2024 WhatsApp Inc. All Rights Reserved. */(()=>{var __webpack_modules__={14462:(e,t,n)=>{!function(e){"use strict";var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=t(),s=t([1]),l=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function g(e,t,n,r,i){var o,a=0;for(o=0;o<i;o++)a|=e[t+o]^n[r+o];return(1&a-1>>>8)-1}function h(e,t,n,r){return g(e,t,n,r,16)}function A(e,t,n,r){return g(e,t,n,r,32)}function m(e,t,n,r){!function(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,u=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,c=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,_=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,h=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,A=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,m=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,E=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,y=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,S=o,v=a,I=s,T=l,b=u,M=c,P=d,C=p,O=f,R=_,N=g,w=h,D=A,L=m,B=E,k=y,G=0;G<20;G+=2)S^=(i=(D^=(i=(O^=(i=(b^=(i=S+D|0)<<7|i>>>25)+S|0)<<9|i>>>23)+b|0)<<13|i>>>19)+O|0)<<18|i>>>14,M^=(i=(v^=(i=(L^=(i=(R^=(i=M+v|0)<<7|i>>>25)+M|0)<<9|i>>>23)+R|0)<<13|i>>>19)+L|0)<<18|i>>>14,N^=(i=(P^=(i=(I^=(i=(B^=(i=N+P|0)<<7|i>>>25)+N|0)<<9|i>>>23)+B|0)<<13|i>>>19)+I|0)<<18|i>>>14,k^=(i=(w^=(i=(C^=(i=(T^=(i=k+w|0)<<7|i>>>25)+k|0)<<9|i>>>23)+T|0)<<13|i>>>19)+C|0)<<18|i>>>14,S^=(i=(T^=(i=(I^=(i=(v^=(i=S+T|0)<<7|i>>>25)+S|0)<<9|i>>>23)+v|0)<<13|i>>>19)+I|0)<<18|i>>>14,M^=(i=(b^=(i=(C^=(i=(P^=(i=M+b|0)<<7|i>>>25)+M|0)<<9|i>>>23)+P|0)<<13|i>>>19)+C|0)<<18|i>>>14,N^=(i=(R^=(i=(O^=(i=(w^=(i=N+R|0)<<7|i>>>25)+N|0)<<9|i>>>23)+w|0)<<13|i>>>19)+O|0)<<18|i>>>14,k^=(i=(B^=(i=(L^=(i=(D^=(i=k+B|0)<<7|i>>>25)+k|0)<<9|i>>>23)+D|0)<<13|i>>>19)+L|0)<<18|i>>>14;S=S+o|0,v=v+a|0,I=I+s|0,T=T+l|0,b=b+u|0,M=M+c|0,P=P+d|0,C=C+p|0,O=O+f|0,R=R+_|0,N=N+g|0,w=w+h|0,D=D+A|0,L=L+m|0,B=B+E|0,k=k+y|0,e[0]=S>>>0&255,e[1]=S>>>8&255,e[2]=S>>>16&255,e[3]=S>>>24&255,e[4]=v>>>0&255,e[5]=v>>>8&255,e[6]=v>>>16&255,e[7]=v>>>24&255,e[8]=I>>>0&255,e[9]=I>>>8&255,e[10]=I>>>16&255,e[11]=I>>>24&255,e[12]=T>>>0&255,e[13]=T>>>8&255,e[14]=T>>>16&255,e[15]=T>>>24&255,e[16]=b>>>0&255,e[17]=b>>>8&255,e[18]=b>>>16&255,e[19]=b>>>24&255,e[20]=M>>>0&255,e[21]=M>>>8&255,e[22]=M>>>16&255,e[23]=M>>>24&255,e[24]=P>>>0&255,e[25]=P>>>8&255,e[26]=P>>>16&255,e[27]=P>>>24&255,e[28]=C>>>0&255,e[29]=C>>>8&255,e[30]=C>>>16&255,e[31]=C>>>24&255,e[32]=O>>>0&255,e[33]=O>>>8&255,e[34]=O>>>16&255,e[35]=O>>>24&255,e[36]=R>>>0&255,e[37]=R>>>8&255,e[38]=R>>>16&255,e[39]=R>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=w>>>0&255,e[45]=w>>>8&255,e[46]=w>>>16&255,e[47]=w>>>24&255,e[48]=D>>>0&255,e[49]=D>>>8&255,e[50]=D>>>16&255,e[51]=D>>>24&255,e[52]=L>>>0&255,e[53]=L>>>8&255,e[54]=L>>>16&255,e[55]=L>>>24&255,e[56]=B>>>0&255,e[57]=B>>>8&255,e[58]=B>>>16&255,e[59]=B>>>24&255,e[60]=k>>>0&255,e[61]=k>>>8&255,e[62]=k>>>16&255,e[63]=k>>>24&255}(e,t,n,r)}function E(e,t,n,r){!function(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,u=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,c=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,_=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,h=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,A=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,m=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,E=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,y=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,S=0;S<20;S+=2)o^=(i=(A^=(i=(f^=(i=(u^=(i=o+A|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+f|0)<<18|i>>>14,c^=(i=(a^=(i=(m^=(i=(_^=(i=c+a|0)<<7|i>>>25)+c|0)<<9|i>>>23)+_|0)<<13|i>>>19)+m|0)<<18|i>>>14,g^=(i=(d^=(i=(s^=(i=(E^=(i=g+d|0)<<7|i>>>25)+g|0)<<9|i>>>23)+E|0)<<13|i>>>19)+s|0)<<18|i>>>14,y^=(i=(h^=(i=(p^=(i=(l^=(i=y+h|0)<<7|i>>>25)+y|0)<<9|i>>>23)+l|0)<<13|i>>>19)+p|0)<<18|i>>>14,o^=(i=(l^=(i=(s^=(i=(a^=(i=o+l|0)<<7|i>>>25)+o|0)<<9|i>>>23)+a|0)<<13|i>>>19)+s|0)<<18|i>>>14,c^=(i=(u^=(i=(p^=(i=(d^=(i=c+u|0)<<7|i>>>25)+c|0)<<9|i>>>23)+d|0)<<13|i>>>19)+p|0)<<18|i>>>14,g^=(i=(_^=(i=(f^=(i=(h^=(i=g+_|0)<<7|i>>>25)+g|0)<<9|i>>>23)+h|0)<<13|i>>>19)+f|0)<<18|i>>>14,y^=(i=(E^=(i=(m^=(i=(A^=(i=y+E|0)<<7|i>>>25)+y|0)<<9|i>>>23)+A|0)<<13|i>>>19)+m|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=c>>>0&255,e[5]=c>>>8&255,e[6]=c>>>16&255,e[7]=c>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=y>>>0&255,e[13]=y>>>8&255,e[14]=y>>>16&255,e[15]=y>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=p>>>0&255,e[21]=p>>>8&255,e[22]=p>>>16&255,e[23]=p>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=_>>>0&255,e[29]=_>>>8&255,e[30]=_>>>16&255,e[31]=_>>>24&255}(e,t,n,r)}var y=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(e,t,n,r,i,o,a){var s,l,u=new Uint8Array(16),c=new Uint8Array(64);for(l=0;l<16;l++)u[l]=0;for(l=0;l<8;l++)u[l]=o[l];for(;i>=64;){for(m(c,u,a,y),l=0;l<64;l++)e[t+l]=n[r+l]^c[l];for(s=1,l=8;l<16;l++)s=s+(255&u[l])|0,u[l]=255&s,s>>>=8;i-=64,t+=64,r+=64}if(i>0)for(m(c,u,a,y),l=0;l<i;l++)e[t+l]=n[r+l]^c[l];return 0}function v(e,t,n,r,i){var o,a,s=new Uint8Array(16),l=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=r[a];for(;n>=64;){for(m(l,s,i,y),a=0;a<64;a++)e[t+a]=l[a];for(o=1,a=8;a<16;a++)o=o+(255&s[a])|0,s[a]=255&o,o>>>=8;n-=64,t+=64}if(n>0)for(m(l,s,i,y),a=0;a<n;a++)e[t+a]=l[a];return 0}function I(e,t,n,r,i){var o=new Uint8Array(32);E(o,r,i,y);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=r[s+16];return v(e,t,n,a,o)}function T(e,t,n,r,i,o,a){var s=new Uint8Array(32);E(s,o,a,y);for(var l=new Uint8Array(8),u=0;u<8;u++)l[u]=o[u+16];return S(e,t,n,r,i,l,s)}var b=function(e){var t,n,r,i,o,a,s,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|a<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|s<<5),l=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|l<<8),this.r[9]=l>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function M(e,t,n,r,i,o){var a=new b(o);return a.update(n,r,i),a.finish(e,t),0}function P(e,t,n,r,i,o){var a=new Uint8Array(16);return M(a,0,n,r,i,o),h(e,t,a,0)}function C(e,t,n,r,i){var o;if(n<32)return-1;for(T(e,0,t,0,n,r,i),M(e,16,e,32,n-32,e),o=0;o<16;o++)e[o]=0;return 0}function O(e,t,n,r,i){var o,a=new Uint8Array(32);if(n<32)return-1;if(I(a,0,32,r,i),0!==P(t,16,t,32,n-32,a))return-1;for(T(e,0,t,0,n,r,i),o=0;o<32;o++)e[o]=0;return 0}function R(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function N(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function w(e,t,n){for(var r,i=~(n-1),o=0;o<16;o++)r=i&(e[o]^t[o]),e[o]^=r,t[o]^=r}function D(e,n){var r,i,o,a=t(),s=t();for(r=0;r<16;r++)s[r]=n[r];for(N(s),N(s),N(s),i=0;i<2;i++){for(a[0]=s[0]-65517,r=1;r<15;r++)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),o=a[15]>>16&1,a[14]&=65535,w(s,a,1-o)}for(r=0;r<16;r++)e[2*r]=255&s[r],e[2*r+1]=s[r]>>8}function L(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return D(n,e),D(r,t),A(n,0,r,0)}function B(e){var t=new Uint8Array(32);return D(t,e),1&t[0]}function k(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function G(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function U(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function x(e,t,n){var r,i,o=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0,f=0,_=0,g=0,h=0,A=0,m=0,E=0,y=0,S=0,v=0,I=0,T=0,b=0,M=0,P=0,C=0,O=0,R=0,N=0,w=0,D=0,L=0,B=0,k=n[0],G=n[1],U=n[2],x=n[3],F=n[4],K=n[5],Y=n[6],j=n[7],V=n[8],W=n[9],H=n[10],Q=n[11],$=n[12],q=n[13],J=n[14],z=n[15];o+=(r=t[0])*k,a+=r*G,s+=r*U,l+=r*x,u+=r*F,c+=r*K,d+=r*Y,p+=r*j,f+=r*V,_+=r*W,g+=r*H,h+=r*Q,A+=r*$,m+=r*q,E+=r*J,y+=r*z,a+=(r=t[1])*k,s+=r*G,l+=r*U,u+=r*x,c+=r*F,d+=r*K,p+=r*Y,f+=r*j,_+=r*V,g+=r*W,h+=r*H,A+=r*Q,m+=r*$,E+=r*q,y+=r*J,S+=r*z,s+=(r=t[2])*k,l+=r*G,u+=r*U,c+=r*x,d+=r*F,p+=r*K,f+=r*Y,_+=r*j,g+=r*V,h+=r*W,A+=r*H,m+=r*Q,E+=r*$,y+=r*q,S+=r*J,v+=r*z,l+=(r=t[3])*k,u+=r*G,c+=r*U,d+=r*x,p+=r*F,f+=r*K,_+=r*Y,g+=r*j,h+=r*V,A+=r*W,m+=r*H,E+=r*Q,y+=r*$,S+=r*q,v+=r*J,I+=r*z,u+=(r=t[4])*k,c+=r*G,d+=r*U,p+=r*x,f+=r*F,_+=r*K,g+=r*Y,h+=r*j,A+=r*V,m+=r*W,E+=r*H,y+=r*Q,S+=r*$,v+=r*q,I+=r*J,T+=r*z,c+=(r=t[5])*k,d+=r*G,p+=r*U,f+=r*x,_+=r*F,g+=r*K,h+=r*Y,A+=r*j,m+=r*V,E+=r*W,y+=r*H,S+=r*Q,v+=r*$,I+=r*q,T+=r*J,b+=r*z,d+=(r=t[6])*k,p+=r*G,f+=r*U,_+=r*x,g+=r*F,h+=r*K,A+=r*Y,m+=r*j,E+=r*V,y+=r*W,S+=r*H,v+=r*Q,I+=r*$,T+=r*q,b+=r*J,M+=r*z,p+=(r=t[7])*k,f+=r*G,_+=r*U,g+=r*x,h+=r*F,A+=r*K,m+=r*Y,E+=r*j,y+=r*V,S+=r*W,v+=r*H,I+=r*Q,T+=r*$,b+=r*q,M+=r*J,P+=r*z,f+=(r=t[8])*k,_+=r*G,g+=r*U,h+=r*x,A+=r*F,m+=r*K,E+=r*Y,y+=r*j,S+=r*V,v+=r*W,I+=r*H,T+=r*Q,b+=r*$,M+=r*q,P+=r*J,C+=r*z,_+=(r=t[9])*k,g+=r*G,h+=r*U,A+=r*x,m+=r*F,E+=r*K,y+=r*Y,S+=r*j,v+=r*V,I+=r*W,T+=r*H,b+=r*Q,M+=r*$,P+=r*q,C+=r*J,O+=r*z,g+=(r=t[10])*k,h+=r*G,A+=r*U,m+=r*x,E+=r*F,y+=r*K,S+=r*Y,v+=r*j,I+=r*V,T+=r*W,b+=r*H,M+=r*Q,P+=r*$,C+=r*q,O+=r*J,R+=r*z,h+=(r=t[11])*k,A+=r*G,m+=r*U,E+=r*x,y+=r*F,S+=r*K,v+=r*Y,I+=r*j,T+=r*V,b+=r*W,M+=r*H,P+=r*Q,C+=r*$,O+=r*q,R+=r*J,N+=r*z,A+=(r=t[12])*k,m+=r*G,E+=r*U,y+=r*x,S+=r*F,v+=r*K,I+=r*Y,T+=r*j,b+=r*V,M+=r*W,P+=r*H,C+=r*Q,O+=r*$,R+=r*q,N+=r*J,w+=r*z,m+=(r=t[13])*k,E+=r*G,y+=r*U,S+=r*x,v+=r*F,I+=r*K,T+=r*Y,b+=r*j,M+=r*V,P+=r*W,C+=r*H,O+=r*Q,R+=r*$,N+=r*q,w+=r*J,D+=r*z,E+=(r=t[14])*k,y+=r*G,S+=r*U,v+=r*x,I+=r*F,T+=r*K,b+=r*Y,M+=r*j,P+=r*V,C+=r*W,O+=r*H,R+=r*Q,N+=r*$,w+=r*q,D+=r*J,L+=r*z,y+=(r=t[15])*k,a+=38*(v+=r*U),s+=38*(I+=r*x),l+=38*(T+=r*F),u+=38*(b+=r*K),c+=38*(M+=r*Y),d+=38*(P+=r*j),p+=38*(C+=r*V),f+=38*(O+=r*W),_+=38*(R+=r*H),g+=38*(N+=r*Q),h+=38*(w+=r*$),A+=38*(D+=r*q),m+=38*(L+=r*J),E+=38*(B+=r*z),o=(r=(o+=38*(S+=r*G))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),_=(r=_+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),A=(r=A+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),E=(r=E+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),_=(r=_+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),A=(r=A+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),E=(r=E+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=l,e[4]=u,e[5]=c,e[6]=d,e[7]=p,e[8]=f,e[9]=_,e[10]=g,e[11]=h,e[12]=A,e[13]=m,e[14]=E,e[15]=y}function F(e,t){x(e,t,t)}function K(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=253;r>=0;r--)F(i,i),2!==r&&4!==r&&x(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function Y(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=250;r>=0;r--)F(i,i),1!==r&&x(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function j(e,n,r){var i,o,a=new Uint8Array(32),s=new Float64Array(80),u=t(),c=t(),d=t(),p=t(),f=t(),_=t();for(o=0;o<31;o++)a[o]=n[o];for(a[31]=127&n[31]|64,a[0]&=248,k(s,r),o=0;o<16;o++)c[o]=s[o],p[o]=u[o]=d[o]=0;for(u[0]=p[0]=1,o=254;o>=0;--o)w(u,c,i=a[o>>>3]>>>(7&o)&1),w(d,p,i),G(f,u,d),U(u,u,d),G(d,c,p),U(c,c,p),F(p,f),F(_,u),x(u,d,u),x(d,c,f),G(f,u,d),U(u,u,d),F(c,u),U(d,p,_),x(u,d,l),G(u,u,p),x(d,d,u),x(u,p,_),x(p,c,s),F(c,f),w(u,c,i),w(d,p,i);for(o=0;o<16;o++)s[o+16]=u[o],s[o+32]=d[o],s[o+48]=c[o],s[o+64]=p[o];var g=s.subarray(32),h=s.subarray(16);return K(g,g),x(h,h,g),D(e,h),0}function V(e,t){return j(e,t,o)}function W(e,t){return r(t,32),V(e,t)}function H(e,t,n){var r=new Uint8Array(32);return j(r,n,t),E(e,i,r,y)}b.prototype.blocks=function(e,t,n){for(var r,i,o,a,s,l,u,c,d,p,f,_,g,h,A,m,E,y,S,v=this.fin?0:2048,I=this.h[0],T=this.h[1],b=this.h[2],M=this.h[3],P=this.h[4],C=this.h[5],O=this.h[6],R=this.h[7],N=this.h[8],w=this.h[9],D=this.r[0],L=this.r[1],B=this.r[2],k=this.r[3],G=this.r[4],U=this.r[5],x=this.r[6],F=this.r[7],K=this.r[8],Y=this.r[9];n>=16;)p=d=0,p+=(I+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*D,p+=(T+=8191&(r>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*Y),p+=(b+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*K),p+=(M+=8191&(o>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*F),d=(p+=(P+=8191&(a>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*x))>>>13,p&=8191,p+=(C+=s>>>1&8191)*(5*U),p+=(O+=8191&(s>>>14|(l=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*G),p+=(R+=8191&(l>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*k),p+=(N+=8191&(u>>>8|(c=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*B),f=d+=(p+=(w+=c>>>5|v)*(5*L))>>>13,f+=I*L,f+=T*D,f+=b*(5*Y),f+=M*(5*K),d=(f+=P*(5*F))>>>13,f&=8191,f+=C*(5*x),f+=O*(5*U),f+=R*(5*G),f+=N*(5*k),d+=(f+=w*(5*B))>>>13,f&=8191,_=d,_+=I*B,_+=T*L,_+=b*D,_+=M*(5*Y),d=(_+=P*(5*K))>>>13,_&=8191,_+=C*(5*F),_+=O*(5*x),_+=R*(5*U),_+=N*(5*G),g=d+=(_+=w*(5*k))>>>13,g+=I*k,g+=T*B,g+=b*L,g+=M*D,d=(g+=P*(5*Y))>>>13,g&=8191,g+=C*(5*K),g+=O*(5*F),g+=R*(5*x),g+=N*(5*U),h=d+=(g+=w*(5*G))>>>13,h+=I*G,h+=T*k,h+=b*B,h+=M*L,d=(h+=P*D)>>>13,h&=8191,h+=C*(5*Y),h+=O*(5*K),h+=R*(5*F),h+=N*(5*x),A=d+=(h+=w*(5*U))>>>13,A+=I*U,A+=T*G,A+=b*k,A+=M*B,d=(A+=P*L)>>>13,A&=8191,A+=C*D,A+=O*(5*Y),A+=R*(5*K),A+=N*(5*F),m=d+=(A+=w*(5*x))>>>13,m+=I*x,m+=T*U,m+=b*G,m+=M*k,d=(m+=P*B)>>>13,m&=8191,m+=C*L,m+=O*D,m+=R*(5*Y),m+=N*(5*K),E=d+=(m+=w*(5*F))>>>13,E+=I*F,E+=T*x,E+=b*U,E+=M*G,d=(E+=P*k)>>>13,E&=8191,E+=C*B,E+=O*L,E+=R*D,E+=N*(5*Y),y=d+=(E+=w*(5*K))>>>13,y+=I*K,y+=T*F,y+=b*x,y+=M*U,d=(y+=P*G)>>>13,y&=8191,y+=C*k,y+=O*B,y+=R*L,y+=N*D,S=d+=(y+=w*(5*Y))>>>13,S+=I*Y,S+=T*K,S+=b*F,S+=M*x,d=(S+=P*U)>>>13,S&=8191,S+=C*G,S+=O*k,S+=R*B,S+=N*L,I=p=8191&(d=(d=((d+=(S+=w*D)>>>13)<<2)+d|0)+(p&=8191)|0),T=f+=d>>>=13,b=_&=8191,M=g&=8191,P=h&=8191,C=A&=8191,O=m&=8191,R=E&=8191,N=y&=8191,w=S&=8191,t+=16,n-=16;this.h[0]=I,this.h[1]=T,this.h[2]=b,this.h[3]=M,this.h[4]=P,this.h[5]=C,this.h[6]=O,this.h[7]=R,this.h[8]=N,this.h[9]=w},b.prototype.finish=function(e,t){var n,r,i,o,a=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=n,n=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this.h[o]+n,n=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,r=(1^n)-1,o=0;o<10;o++)a[o]&=r;for(r=~r,o=0;o<10;o++)this.h[o]=this.h[o]&r|a[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},b.prototype.update=function(e,t,n){var r,i;if(this.leftover){for((i=16-this.leftover)>n&&(i=n),r=0;r<i;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(i=n-n%16,this.blocks(e,t,i),t+=i,n-=i),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var Q=C,$=O;var q=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function J(e,t,n,r){for(var i,o,a,s,l,u,c,d,p,f,_,g,h,A,m,E,y,S,v,I,T,b,M,P,C,O,R=new Int32Array(16),N=new Int32Array(16),w=e[0],D=e[1],L=e[2],B=e[3],k=e[4],G=e[5],U=e[6],x=e[7],F=t[0],K=t[1],Y=t[2],j=t[3],V=t[4],W=t[5],H=t[6],Q=t[7],$=0;r>=128;){for(v=0;v<16;v++)I=8*v+$,R[v]=n[I+0]<<24|n[I+1]<<16|n[I+2]<<8|n[I+3],N[v]=n[I+4]<<24|n[I+5]<<16|n[I+6]<<8|n[I+7];for(v=0;v<80;v++)if(i=w,o=D,a=L,s=B,l=k,u=G,c=U,x,p=F,f=K,_=Y,g=j,h=V,A=W,m=H,Q,M=65535&(b=Q),P=b>>>16,C=65535&(T=x),O=T>>>16,M+=65535&(b=(V>>>14|k<<18)^(V>>>18|k<<14)^(k>>>9|V<<23)),P+=b>>>16,C+=65535&(T=(k>>>14|V<<18)^(k>>>18|V<<14)^(V>>>9|k<<23)),O+=T>>>16,M+=65535&(b=V&W^~V&H),P+=b>>>16,C+=65535&(T=k&G^~k&U),O+=T>>>16,M+=65535&(b=q[2*v+1]),P+=b>>>16,C+=65535&(T=q[2*v]),O+=T>>>16,T=R[v%16],P+=(b=N[v%16])>>>16,C+=65535&T,O+=T>>>16,C+=(P+=(M+=65535&b)>>>16)>>>16,M=65535&(b=S=65535&M|P<<16),P=b>>>16,C=65535&(T=y=65535&C|(O+=C>>>16)<<16),O=T>>>16,M+=65535&(b=(F>>>28|w<<4)^(w>>>2|F<<30)^(w>>>7|F<<25)),P+=b>>>16,C+=65535&(T=(w>>>28|F<<4)^(F>>>2|w<<30)^(F>>>7|w<<25)),O+=T>>>16,P+=(b=F&K^F&Y^K&Y)>>>16,C+=65535&(T=w&D^w&L^D&L),O+=T>>>16,d=65535&(C+=(P+=(M+=65535&b)>>>16)>>>16)|(O+=C>>>16)<<16,E=65535&M|P<<16,M=65535&(b=g),P=b>>>16,C=65535&(T=s),O=T>>>16,P+=(b=S)>>>16,C+=65535&(T=y),O+=T>>>16,D=i,L=o,B=a,k=s=65535&(C+=(P+=(M+=65535&b)>>>16)>>>16)|(O+=C>>>16)<<16,G=l,U=u,x=c,w=d,K=p,Y=f,j=_,V=g=65535&M|P<<16,W=h,H=A,Q=m,F=E,v%16==15)for(I=0;I<16;I++)T=R[I],M=65535&(b=N[I]),P=b>>>16,C=65535&T,O=T>>>16,T=R[(I+9)%16],M+=65535&(b=N[(I+9)%16]),P+=b>>>16,C+=65535&T,O+=T>>>16,y=R[(I+1)%16],M+=65535&(b=((S=N[(I+1)%16])>>>1|y<<31)^(S>>>8|y<<24)^(S>>>7|y<<25)),P+=b>>>16,C+=65535&(T=(y>>>1|S<<31)^(y>>>8|S<<24)^y>>>7),O+=T>>>16,y=R[(I+14)%16],P+=(b=((S=N[(I+14)%16])>>>19|y<<13)^(y>>>29|S<<3)^(S>>>6|y<<26))>>>16,C+=65535&(T=(y>>>19|S<<13)^(S>>>29|y<<3)^y>>>6),O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,R[I]=65535&C|O<<16,N[I]=65535&M|P<<16;M=65535&(b=F),P=b>>>16,C=65535&(T=w),O=T>>>16,T=e[0],P+=(b=t[0])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[0]=w=65535&C|O<<16,t[0]=F=65535&M|P<<16,M=65535&(b=K),P=b>>>16,C=65535&(T=D),O=T>>>16,T=e[1],P+=(b=t[1])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[1]=D=65535&C|O<<16,t[1]=K=65535&M|P<<16,M=65535&(b=Y),P=b>>>16,C=65535&(T=L),O=T>>>16,T=e[2],P+=(b=t[2])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[2]=L=65535&C|O<<16,t[2]=Y=65535&M|P<<16,M=65535&(b=j),P=b>>>16,C=65535&(T=B),O=T>>>16,T=e[3],P+=(b=t[3])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[3]=B=65535&C|O<<16,t[3]=j=65535&M|P<<16,M=65535&(b=V),P=b>>>16,C=65535&(T=k),O=T>>>16,T=e[4],P+=(b=t[4])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[4]=k=65535&C|O<<16,t[4]=V=65535&M|P<<16,M=65535&(b=W),P=b>>>16,C=65535&(T=G),O=T>>>16,T=e[5],P+=(b=t[5])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[5]=G=65535&C|O<<16,t[5]=W=65535&M|P<<16,M=65535&(b=H),P=b>>>16,C=65535&(T=U),O=T>>>16,T=e[6],P+=(b=t[6])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[6]=U=65535&C|O<<16,t[6]=H=65535&M|P<<16,M=65535&(b=Q),P=b>>>16,C=65535&(T=x),O=T>>>16,T=e[7],P+=(b=t[7])>>>16,C+=65535&T,O+=T>>>16,O+=(C+=(P+=(M+=65535&b)>>>16)>>>16)>>>16,e[7]=x=65535&C|O<<16,t[7]=Q=65535&M|P<<16,$+=128,r-=128}return r}function z(e,t,n){var r,i=new Int32Array(8),o=new Int32Array(8),a=new Uint8Array(256),s=n;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,J(i,o,t,n),n%=128,r=0;r<n;r++)a[r]=t[s-n+r];for(a[n]=128,a[(n=256-128*(n<112?1:0))-9]=0,_(a,n-8,s/536870912|0,s<<3),J(i,o,a,n),r=0;r<8;r++)_(e,8*r,i[r],o[r]);return 0}function X(e,n){var r=t(),i=t(),o=t(),a=t(),s=t(),l=t(),u=t(),d=t(),p=t();U(r,e[1],e[0]),U(p,n[1],n[0]),x(r,r,p),G(i,e[0],e[1]),G(p,n[0],n[1]),x(i,i,p),x(o,e[3],n[3]),x(o,o,c),x(a,e[2],n[2]),G(a,a,a),U(s,i,r),U(l,a,o),G(u,a,o),G(d,i,r),x(e[0],s,l),x(e[1],d,u),x(e[2],u,l),x(e[3],s,d)}function Z(e,t,n){var r;for(r=0;r<4;r++)w(e[r],t[r],n)}function ee(e,n){var r=t(),i=t(),o=t();K(o,n[2]),x(r,n[0],o),x(i,n[1],o),D(e,i),e[31]^=B(r)<<7}function te(e,t,n){var r,i;for(R(e[0],a),R(e[1],s),R(e[2],s),R(e[3],a),i=255;i>=0;--i)Z(e,t,r=n[i/8|0]>>(7&i)&1),X(t,e),X(e,e),Z(e,t,r)}function ne(e,n){var r=[t(),t(),t(),t()];R(r[0],d),R(r[1],p),R(r[2],s),x(r[3],d,p),te(e,r,n)}function re(e,n,i){var o,a=new Uint8Array(64),s=[t(),t(),t(),t()];for(i||r(n,32),z(a,n,32),a[0]&=248,a[31]&=127,a[31]|=64,ne(s,a),ee(e,s),o=0;o<32;o++)n[o+32]=e[o];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)t[i]+=n-16*t[r]*ie[i-(r-32)],n=Math.floor((t[i]+128)/256),t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*ie[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*ie[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function ae(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,n)}function se(e,n,r,i){var o,a,s=new Uint8Array(64),l=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),d=[t(),t(),t(),t()];z(s,i,32),s[0]&=248,s[31]&=127,s[31]|=64;var p=r+64;for(o=0;o<r;o++)e[64+o]=n[o];for(o=0;o<32;o++)e[32+o]=s[32+o];for(z(u,e.subarray(32),r+32),ae(u),ne(d,u),ee(e,d),o=32;o<64;o++)e[o]=i[o];for(z(l,e,r+64),ae(l),o=0;o<64;o++)c[o]=0;for(o=0;o<32;o++)c[o]=u[o];for(o=0;o<32;o++)for(a=0;a<32;a++)c[o+a]+=l[o]*s[a];return oe(e.subarray(32),c),p}function le(e,n,r,i){var o,l=new Uint8Array(32),c=new Uint8Array(64),d=[t(),t(),t(),t()],p=[t(),t(),t(),t()];if(r<64)return-1;if(function(e,n){var r=t(),i=t(),o=t(),l=t(),c=t(),d=t(),p=t();return R(e[2],s),k(e[1],n),F(o,e[1]),x(l,o,u),U(o,o,e[2]),G(l,e[2],l),F(c,l),F(d,c),x(p,d,c),x(r,p,o),x(r,r,l),Y(r,r),x(r,r,o),x(r,r,l),x(r,r,l),x(e[0],r,l),F(i,e[0]),x(i,i,l),L(i,o)&&x(e[0],e[0],f),F(i,e[0]),x(i,i,l),L(i,o)?-1:(B(e[0])===n[31]>>7&&U(e[0],a,e[0]),x(e[3],e[0],e[1]),0)}(p,i))return-1;for(o=0;o<r;o++)e[o]=n[o];for(o=0;o<32;o++)e[o+32]=i[o];if(z(c,e,r),ae(c),te(d,p,c),ne(p,n.subarray(32)),X(d,p),ee(l,d),r-=64,A(n,0,l,0)){for(o=0;o<r;o++)e[o]=0;return-1}for(o=0;o<r;o++)e[o]=n[o+64];return r}var ue=16,ce=64,de=32,pe=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function _e(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:E,crypto_stream_xor:T,crypto_stream:I,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:v,crypto_onetimeauth:M,crypto_onetimeauth_verify:P,crypto_verify_16:h,crypto_verify_32:A,crypto_secretbox:C,crypto_secretbox_open:O,crypto_scalarmult:j,crypto_scalarmult_base:V,crypto_box_beforenm:H,crypto_box_afternm:Q,crypto_box:function(e,t,n,r,i,o){var a=new Uint8Array(32);return H(a,i,o),Q(e,t,n,r,a)},crypto_box_open:function(e,t,n,r,i,o){var a=new Uint8Array(32);return H(a,i,o),$(e,t,n,r,a)},crypto_box_keypair:W,crypto_hash:z,crypto_sign:se,crypto_sign_keypair:re,crypto_sign_open:le,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ce,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:pe,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ie,pack25519:D,unpack25519:k,M:x,A:G,S:F,Z:U,pow2523:Y,add:X,set25519:R,modL:oe,scalarmult:te,scalarbase:ne},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,n){_e(e,t,n),fe(n,t);for(var r=new Uint8Array(32+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+32]=e[o];return C(i,r,r.length,t,n),i.subarray(ue)},e.secretbox.open=function(e,t,n){_e(e,t,n),fe(n,t);for(var r=new Uint8Array(ue+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+ue]=e[o];return r.length<32||0!==O(i,r,r.length,t,n)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(_e(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return j(n,e,t),n},e.scalarMult.base=function(e){if(_e(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return V(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox(t,n,o)},e.box.before=function(e,t){_e(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return H(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox.open(t,n,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return W(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(_e(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return V(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(_e(e,t),t.length!==pe)throw new Error("bad secret key size");var n=new Uint8Array(ce+e.length);return se(n,e,e.length,t),n},e.sign.open=function(e,t){if(_e(e,t),t.length!==de)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=le(n,e,e.length,t);if(r<0)return null;for(var i=new Uint8Array(r),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached=function(t,n){for(var r=e.sign(t,n),i=new Uint8Array(ce),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached.verify=function(e,t,n){if(_e(e,t,n),t.length!==ce)throw new Error("bad signature size");if(n.length!==de)throw new Error("bad public key size");var r,i=new Uint8Array(ce+e.length),o=new Uint8Array(ce+e.length);for(r=0;r<ce;r++)i[r]=t[r];for(r=0;r<e.length;r++)i[r+ce]=e[r];return le(o,i,i.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(pe);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(_e(e),e.length!==pe)throw new Error("bad secret key size");for(var t=new Uint8Array(de),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(_e(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(de),n=new Uint8Array(pe),r=0;r<32;r++)n[r]=e[r];return re(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=de,e.sign.secretKeyLength=pe,e.sign.seedLength=32,e.sign.signatureLength=ce,e.hash=function(e){_e(e);var t=new Uint8Array(64);return z(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return _e(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,n){var r,i=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(i.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=i[r];ge(i)}))}else(t=n(42329))&&t.randomBytes&&e.setPRNG((function(e,n){var r,i=t.randomBytes(n);for(r=0;r<n;r++)e[r]=i[r];ge(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},11504:e=>{function t(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)}))}}},65526:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7914:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},73982:(e,t,n)=>{var r=n(65526);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},66775:(e,t,n)=>{var r=n(15600);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},15600:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},56856:(e,t,n)=>{"use strict";var r=n(45051),i=Uint8Array,o=Uint16Array,a=Uint32Array,s=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(e,t){for(var n=new o(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new a(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},d=c(s,2),p=d[0],f=d[1];p[28]=258,f[258]=28;for(var _=c(l,0),g=_[0],h=_[1],A=new o(32768),m=0;m<32768;++m){var E=(43690&m)>>>1|(21845&m)<<1;E=(61680&(E=(52428&E)>>>2|(13107&E)<<2))>>>4|(3855&E)<<4,A[m]=((65280&E)>>>8|(255&E)<<8)>>>1}var y=function(e,t,n){for(var r=e.length,i=0,a=new o(t);i<r;++i)++a[e[i]-1];var s,l=new o(t);for(i=0;i<t;++i)l[i]=l[i-1]+a[i-1]<<1;if(n){s=new o(1<<t);var u=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],p=l[e[i]-1]++<<d,f=p|(1<<d)-1;p<=f;++p)s[A[p]>>>u]=c}else for(s=new o(r),i=0;i<r;++i)e[i]&&(s[i]=A[l[e[i]-1]++]>>>15-e[i]);return s},S=new i(288);for(m=0;m<144;++m)S[m]=8;for(m=144;m<256;++m)S[m]=9;for(m=256;m<280;++m)S[m]=7;for(m=280;m<288;++m)S[m]=8;var v=new i(32);for(m=0;m<32;++m)v[m]=5;var I=y(S,9,0),T=y(S,9,1),b=y(v,5,0),M=y(v,5,1),P=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},C=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},O=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},R=function(e){return(e/8|0)+(7&e&&1)},N=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof o?o:e instanceof a?a:i)(n-t);return r.set(e.subarray(t,n)),r},w=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new i(0);var o=!t||n,a=!n||n.i;n||(n={}),t||(t=new i(3*r));var c=function(e){var n=t.length;if(e>n){var r=new i(Math.max(2*n,e));r.set(t),t=r}},d=n.f||0,f=n.p||0,_=n.b||0,h=n.l,A=n.d,m=n.m,E=n.n,S=8*r;do{if(!h){n.f=d=C(e,f,1);var v=C(e,f+1,3);if(f+=3,!v){var I=e[(K=R(f)+4)-4]|e[K-3]<<8,b=K+I;if(b>r){if(a)throw"unexpected EOF";break}o&&c(_+I),t.set(e.subarray(K,b),_),n.b=_+=I,n.p=f=8*b;continue}if(1==v)h=T,A=M,m=9,E=5;else{if(2!=v)throw"invalid block type";var w=C(e,f,31)+257,D=C(e,f+10,15)+4,L=w+C(e,f+5,31)+1;f+=14;for(var B=new i(L),k=new i(19),G=0;G<D;++G)k[u[G]]=C(e,f+3*G,7);f+=3*D;var U=P(k),x=(1<<U)-1;if(!a&&f+L*(U+7)>S)break;var F=y(k,U,1);for(G=0;G<L;){var K,Y=F[C(e,f,x)];if(f+=15&Y,(K=Y>>>4)<16)B[G++]=K;else{var j=0,V=0;for(16==K?(V=3+C(e,f,3),f+=2,j=B[G-1]):17==K?(V=3+C(e,f,7),f+=3):18==K&&(V=11+C(e,f,127),f+=7);V--;)B[G++]=j}}var W=B.subarray(0,w),H=B.subarray(w);m=P(W),E=P(H),h=y(W,m,1),A=y(H,E,1)}if(f>S)throw"unexpected EOF"}o&&c(_+131072);for(var Q=(1<<m)-1,$=(1<<E)-1,q=m+E+18;a||f+q<S;){var J=(j=h[O(e,f)&Q])>>>4;if((f+=15&j)>S)throw"unexpected EOF";if(!j)throw"invalid length/literal";if(J<256)t[_++]=J;else{if(256==J){h=null;break}var z=J-254;if(J>264){var X=s[G=J-257];z=C(e,f,(1<<X)-1)+p[G],f+=X}var Z=A[O(e,f)&$],ee=Z>>>4;if(!Z)throw"invalid distance";f+=15&Z;H=g[ee];if(ee>3){X=l[ee];H+=O(e,f)&(1<<X)-1,f+=X}if(f>S)throw"unexpected EOF";o&&c(_+131072);for(var te=_+z;_<te;_+=4)t[_]=t[_-H],t[_+1]=t[_+1-H],t[_+2]=t[_+2-H],t[_+3]=t[_+3-H];_=te}}n.l=h,n.p=f,n.b=_,h&&(d=1,n.m=m,n.d=A,n.n=E)}while(!d);return _==t.length?t:N(t,0,_)},D=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},L=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},B=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,s=n.slice();if(!a)return[Y,0];if(1==a){var l=new i(n[0].s+1);return l[n[0].s]=1,[l,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var u=n[0],c=n[1],d=0,p=1,f=2;for(n[0]={s:-1,f:u.f+c.f,l:u,r:c};p!=a-1;)u=n[n[d].f<n[f].f?d++:f++],c=n[d!=p&&n[d].f<n[f].f?d++:f++],n[p++]={s:-1,f:u.f+c.f,l:u,r:c};var _=s[0].s;for(r=1;r<a;++r)s[r].s>_&&(_=s[r].s);var g=new o(_+1),h=k(n[p-1],g,0);if(h>t){r=0;var A=0,m=h-t,E=1<<m;for(s.sort((function(e,t){return g[t.s]-g[e.s]||e.f-t.f}));r<a;++r){var y=s[r].s;if(!(g[y]>t))break;A+=E-(1<<h-g[y]),g[y]=t}for(A>>>=m;A>0;){var S=s[r].s;g[S]<t?A-=1<<t-g[S]++-1:++r}for(;r>=0&&A;--r){var v=s[r].s;g[v]==t&&(--g[v],++A)}h=t}return[new i(g),h]},k=function(e,t,n){return-1==e.s?Math.max(k(e.l,t,n+1),k(e.r,t,n+1)):t[e.s]=n},G=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new o(++t),r=0,i=e[0],a=1,s=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[l]}return[n.subarray(0,r),t]},U=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},x=function(e,t,n){var r=n.length,i=R(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},F=function(e,t,n,r,i,a,c,d,p,f,_){D(t,_++,n),++i[256];for(var g=B(i,15),h=g[0],A=g[1],m=B(a,15),E=m[0],T=m[1],M=G(h),P=M[0],C=M[1],O=G(E),R=O[0],N=O[1],w=new o(19),k=0;k<P.length;++k)w[31&P[k]]++;for(k=0;k<R.length;++k)w[31&R[k]]++;for(var F=B(w,7),K=F[0],Y=F[1],j=19;j>4&&!K[u[j-1]];--j);var V,W,H,Q,$=f+5<<3,q=U(i,S)+U(a,v)+c,J=U(i,h)+U(a,E)+c+14+3*j+U(w,K)+(2*w[16]+3*w[17]+7*w[18]);if($<=q&&$<=J)return x(t,_,e.subarray(p,p+f));if(D(t,_,1+(J<q)),_+=2,J<q){V=y(h,A,0),W=h,H=y(E,T,0),Q=E;var z=y(K,Y,0);D(t,_,C-257),D(t,_+5,N-1),D(t,_+10,j-4),_+=14;for(k=0;k<j;++k)D(t,_+3*k,K[u[k]]);_+=3*j;for(var X=[P,R],Z=0;Z<2;++Z){var ee=X[Z];for(k=0;k<ee.length;++k){var te=31&ee[k];D(t,_,z[te]),_+=K[te],te>15&&(D(t,_,ee[k]>>>5&127),_+=ee[k]>>>12)}}}else V=I,W=S,H=b,Q=v;for(k=0;k<d;++k)if(r[k]>255){te=r[k]>>>18&31;L(t,_,V[te+257]),_+=W[te+257],te>7&&(D(t,_,r[k]>>>23&31),_+=s[te]);var ne=31&r[k];L(t,_,H[ne]),_+=Q[ne],ne>3&&(L(t,_,r[k]>>>5&8191),_+=l[ne])}else L(t,_,V[r[k]]),_+=W[r[k]];return L(t,_,V[256]),_+W[256]},K=new a([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y=new i(0),j=function(e,t,n,r,u,c){var d=e.length,p=new i(r+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(r,p.length-u),g=0;if(!t||d<8)for(var A=0;A<=d;A+=65535){var m=A+65535;m<d?g=x(_,g,e.subarray(A,m)):(_[A]=c,g=x(_,g,e.subarray(A,d)))}else{for(var E=K[t-1],y=E>>>13,S=8191&E,v=(1<<n)-1,I=new o(32768),T=new o(v+1),b=Math.ceil(n/3),M=2*b,P=function(t){return(e[t]^e[t+1]<<b^e[t+2]<<M)&v},C=new a(25e3),O=new o(288),w=new o(32),D=0,L=0,B=(A=0,0),k=0,G=0;A<d;++A){var U=P(A),j=32767&A,V=T[U];if(I[j]=V,T[U]=j,k<=A){var W=d-A;if((D>7e3||B>24576)&&W>423){g=F(e,_,0,C,O,w,L,B,G,A-G,g),B=D=L=0,G=A;for(var H=0;H<286;++H)O[H]=0;for(H=0;H<30;++H)w[H]=0}var Q=2,$=0,q=S,J=j-V&32767;if(W>2&&U==P(A-J))for(var z=Math.min(y,W)-1,X=Math.min(32767,A),Z=Math.min(258,W);J<=X&&--q&&j!=V;){if(e[A+Q]==e[A+Q-J]){for(var ee=0;ee<Z&&e[A+ee]==e[A+ee-J];++ee);if(ee>Q){if(Q=ee,$=J,ee>z)break;var te=Math.min(J,ee-2),ne=0;for(H=0;H<te;++H){var re=A-J+H+32768&32767,ie=re-I[re]+32768&32767;ie>ne&&(ne=ie,V=re)}}}J+=(j=V)-(V=I[j])+32768&32767}if($){C[B++]=268435456|f[Q]<<18|h[$];var oe=31&f[Q],ae=31&h[$];L+=s[oe]+l[ae],++O[257+oe],++w[ae],k=A+Q,++D}else C[B++]=e[A],++O[e[A]]}}g=F(e,_,c,C,O,w,L,B,G,A-G,g),!c&&7&g&&(g=x(_,g+1,Y))}return N(p,0,r+R(g)+u)},V=function(){for(var e=new a(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),W=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},H=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=n[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return((e%=65521)>>>8<<16|(255&(t%=65521))<<8|t>>>8)+2*((255&e)<<23)}}},Q=function(e,t,n,r,i){return j(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)},$=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},q=function(e,t,n){for(var r=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<r.length;++a){var s=r[a],l=o[a];if("function"==typeof s){t+=";"+l+"=";var u=s.toString();if(s.prototype)if(-1!=u.indexOf("[native code]")){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else for(var d in t+=u,s.prototype)t+=";"+l+".prototype."+d+"="+s.prototype[d].toString();else t+=u}else n[l]=s}return[t,n]},J=[],z=function(e,t,n,s){var l;if(!J[n]){for(var u="",c={},d=e.length-1,p=0;p<d;++p)u=(l=q(e[p],u,c))[0],c=l[1];J[n]=q(e[d],u,c)}var f=$({},J[n][1]);return r.default(J[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,f,function(e){var t=[];for(var n in e)(e[n]instanceof i||e[n]instanceof o||e[n]instanceof a)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(f),s)},X=function(){return[i,o,a,s,l,u,p,g,T,M,A,y,P,C,O,R,N,w,Pe,ie,oe]},Z=function(){return[i,o,a,s,l,u,f,h,I,S,b,v,A,K,Y,y,D,L,B,k,G,U,x,F,R,N,j,Q,Ie,ie]},ee=function(){return[fe,he,pe,W,V]},te=function(){return[_e,ge]},ne=function(){return[Ae,pe,H]},re=function(){return[me]},ie=function(e){return postMessage(e,[e.buffer])},oe=function(e){return e&&e.size&&new i(e.size)},ae=function(e,t,n,r,i,o){var a=z(n,r,i,(function(e,t){a.terminate(),o(e,t)}));return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}},se=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},le=function(e,t,n,r,i){var o,a=z(e,r,i,(function(e,n){e?(a.terminate(),t.ondata.call(t,e)):(n[1]&&a.terminate(),t.ondata.call(t,e,n[0],n[1]))}));a.postMessage(n),t.push=function(e,n){if(o)throw"stream finished";if(!t.ondata)throw"no stream handler";a.postMessage([e,o=n],[e.buffer])},t.terminate=function(){a.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+2*(e[t+3]<<23)},de=function(e,t){return ce(e,t)|4294967296*ce(e,t)},pe=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},fe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&pe(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},ge=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16)+2*(e[t-1]<<23)},he=function(e){return 10+(e.filename&&e.filename.length+1||0)},Ae=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},me=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Ee(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var ye=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(Q(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}();t.Deflate=ye;var Se=function(){return function(e,t){le([Z,function(){return[se,ye]}],this,Ee.call(this,e,t),(function(e){var t=new ye(e.data);onmessage=se(t)}),6)}}();function ve(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ae(e,t,[Z],(function(e){return ie(Ie(e.data[0],e.data[1]))}),0,n)}function Ie(e,t){return Q(e,t||{},0,0)}t.AsyncDeflate=Se,t.deflate=ve,t.deflateSync=Ie;var Te=function(){function e(e){this.s={},this.p=new i(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new i(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=w(this.p,this.o,this.s);this.ondata(N(n,t,this.s.b),this.d),this.o=N(n,this.s.b-32768),this.s.b=this.o.length,this.p=N(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}();t.Inflate=Te;var be=function(){return function(e){this.ondata=e,le([X,function(){return[se,Te]}],this,0,(function(){var e=new Te;onmessage=se(e)}),7)}}();function Me(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ae(e,t,[X],(function(e){return ie(Pe(e.data[0],oe(e.data[1])))}),1,n)}function Pe(e,t){return w(e,t)}t.AsyncInflate=be,t.inflate=Me,t.inflateSync=Pe;var Ce=function(){function e(e,t){this.c=W(),this.l=0,this.v=1,ye.call(this,e,t)}return e.prototype.push=function(e,t){ye.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=Q(e,this.o,this.v&&he(this.o),t&&8,!t);this.v&&(fe(n,this.o),this.v=0),t&&(pe(n,n.length-8,this.c.d()),pe(n,n.length-4,this.l)),this.ondata(n,t)},e}();t.Gzip=Ce,t.Compress=Ce;var Oe=function(){return function(e,t){le([Z,ee,function(){return[se,ye,Ce]}],this,Ee.call(this,e,t),(function(e){var t=new Ce(e.data);onmessage=se(t)}),8)}}();function Re(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ae(e,t,[Z,ee,function(){return[Ne]}],(function(e){return ie(Ne(e.data[0],e.data[1]))}),2,n)}function Ne(e,t){t||(t={});var n=W(),r=e.length;n.p(e);var i=Q(e,t,he(t),8),o=i.length;return fe(i,t),pe(i,o-8,n.d()),pe(i,o-4,r),i}t.AsyncGzip=Oe,t.AsyncCompress=Oe,t.gzip=Re,t.compress=Re,t.gzipSync=Ne,t.compressSync=Ne;var we=function(){function e(e){this.v=1,Te.call(this,e)}return e.prototype.push=function(e,t){if(Te.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Te.prototype.c.call(this,t)},e}();t.Gunzip=we;var De=function(){return function(e){this.ondata=e,le([X,te,function(){return[se,Te,we]}],this,0,(function(){var e=new we;onmessage=se(e)}),9)}}();function Le(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ae(e,t,[X,te,function(){return[Be]}],(function(e){return ie(Be(e.data[0]))}),3,n)}function Be(e,t){return w(e.subarray(_e(e),-8),t||new i(ge(e)))}t.AsyncGunzip=De,t.gunzip=Le,t.gunzipSync=Be;var ke=function(){function e(e,t){this.c=H(),this.v=1,ye.call(this,e,t)}return e.prototype.push=function(e,t){ye.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=Q(e,this.o,this.v&&2,t&&4,!t);this.v&&(Ae(n,this.o),this.v=0),t&&pe(n,n.length-4,this.c.d()),this.ondata(n,t)},e}();t.Zlib=ke;var Ge=function(){return function(e,t){le([Z,ne,function(){return[se,ye,ke]}],this,Ee.call(this,e,t),(function(e){var t=new ke(e.data);onmessage=se(t)}),10)}}();function Ue(e,t){t||(t={});var n=H();n.p(e);var r=Q(e,t,2,4);return Ae(r,t),pe(r,r.length-4,n.d()),r}t.AsyncZlib=Ge,t.zlib=function(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ae(e,t,[Z,ne,function(){return[Ue]}],(function(e){return ie(Ue(e.data[0],e.data[1]))}),4,n)},t.zlibSync=Ue;var xe=function(){function e(e){this.v=1,Te.call(this,e)}return e.prototype.push=function(e,t){if(Te.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Te.prototype.c.call(this,t)},e}();t.Unzlib=xe;var Fe=function(){return function(e){this.ondata=e,le([X,re,function(){return[se,Te,xe]}],this,0,(function(){var e=new xe;onmessage=se(e)}),11)}}();function Ke(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ae(e,t,[X,re,function(){return[Ye]}],(function(e){return ie(Ye(e.data[0],oe(e.data[1])))}),5,n)}function Ye(e,t){return w((me(e),e.subarray(2,-4)),t)}t.AsyncUnzlib=Fe,t.unzlib=Ke,t.unzlibSync=Ye;var je=function(){function e(e){this.G=we,this.I=Te,this.Z=xe,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new i(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,o=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(o):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(o):new this.Z(o),this.s.push(this.p,t),this.p=null}}},e}();t.Decompress=je;var Ve=function(){function e(e){this.G=De,this.I=be,this.Z=Fe,this.ondata=e}return e.prototype.push=function(e,t){je.prototype.push.call(this,e,t)},e}();t.AsyncDecompress=Ve,t.decompress=function(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return 31==e[0]&&139==e[1]&&8==e[2]?Le(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Me(e,t,n):Ke(e,t,n)},t.decompressSync=function(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?Be(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Pe(e,t):Ye(e,t)};var We=function(e,t,n,r){for(var o in e){var a=e[o],s=t+o;a instanceof i?n[s]=[a,r]:Array.isArray(a)?n[s]=[a[0],$(r,a[1])]:We(a,s+"/",n,r)}},He="undefined"!=typeof TextEncoder&&new TextEncoder,Qe="undefined"!=typeof TextDecoder&&new TextDecoder,$e=0;try{Qe.decode(Y,{stream:!0}),$e=1}catch(e){}var qe=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,N(e,n-1)];i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},Je=function(){function e(e){this.ondata=e,$e?this.t=new TextDecoder:this.p=Y}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t||(t=!1),this.t)return this.ondata(this.t.decode(e,{stream:!t}),t);var n=new i(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=qe(n),o=r[0],a=r[1];if(t&&a.length)throw"invalid utf-8 data";this.p=a,this.ondata(o,t)},e}();t.DecodeUTF8=Je;var ze=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";this.ondata(Xe(e),t||!1)},e}();function Xe(e,t){if(t){for(var n=new i(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(He)return He.encode(e);var o=e.length,a=new i(e.length+(e.length>>1)),s=0,l=function(e){a[s++]=e};for(r=0;r<o;++r){if(s+5>a.length){var u=new i(s+8+(o-r<<1));u.set(a),a=u}var c=e.charCodeAt(r);c<128||t?l(c):c<2048?(l(192|c>>6),l(128|63&c)):c>55295&&c<57344?(l(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),l(128|c>>12&63),l(128|c>>6&63),l(128|63&c)):(l(224|c>>12),l(128|c>>6&63),l(128|63&c))}return N(a,0,s)}function Ze(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(Qe)return Qe.decode(e);var i=qe(e),o=i[0];if(i[1].length)throw"invalid utf-8 data";return o}t.EncodeUTF8=ze,t.strToU8=Xe,t.strFromU8=Ze;var et=function(e){return 1==e?3:e<6?2:9==e?1:0},tt=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},nt=function(e,t,n){var r=ue(e,t+28),i=Ze(e.subarray(t+46,t+46+r),!(2048&ue(e,t+8))),o=t+46+r,a=ce(e,t+20),s=n&&4294967295==a?rt(e,o):[a,ce(e,t+24),ce(e,t+42)],l=s[0],u=s[1],c=s[2];return[ue(e,t+10),l,u,i,o+ue(e,t+30)+ue(e,t+32),c]},rt=function(e,t){for(;1!=ue(e,t);t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},it=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},ot=function(e,t,n,r,i,o,a,s){var l=r.length,u=n.extra,c=s&&s.length,d=it(u);pe(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==o&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var p=new Date(null==n.mtime?Date.now():n.mtime),f=p.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(pe(e,t,2*(f<<24)|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),t+=4,null!=o&&(pe(e,t,n.crc),pe(e,t+4,o),pe(e,t+8,n.size)),pe(e,t+12,l),pe(e,t+14,d),t+=16,null!=a&&(pe(e,t,c),pe(e,t+6,n.attrs),pe(e,t+10,a),t+=14),e.set(r,t),t+=l,d)for(var _ in u){var g=u[_],h=g.length;pe(e,t,+_),pe(e,t+2,h),e.set(g,t+4),t+=4+h}return c&&(e.set(s,t),t+=c),t},at=function(e,t,n,r,i){pe(e,t,101010256),pe(e,t+8,n),pe(e,t+10,n),pe(e,t+12,r),pe(e,t+16,i)},st=function(){function e(e){this.filename=e,this.c=W(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}();t.ZipPassThrough=st;var lt=function(){function e(e,t){var n=this;t||(t={}),st.call(this,e),this.d=new ye(t,(function(e,t){n.ondata(null,e,t)})),this.compression=8,this.flag=et(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){st.prototype.push.call(this,e,t)},e}();t.ZipDeflate=lt;var ut=function(){function e(e,t){var n=this;t||(t={}),st.call(this,e),this.d=new Se(t,(function(e,t,r){n.ondata(e,t,r)})),this.compression=8,this.flag=et(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){st.prototype.push.call(this,e,t)},e}();t.AsyncZipDeflate=ut;var ct=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var n=Xe(e.filename),r=n.length,o=e.comment,a=o&&Xe(o),s=r!=e.filename.length||a&&o.length!=a.length,l=r+it(e.extra)+30;if(r>65535)throw"filename too long";var u=new i(l);ot(u,0,e,n,s);var c=[u],d=function(){for(var e=0,n=c;e<n.length;e++){var r=n[e];t.ondata(null,r,!1)}c=[]},p=this.d;this.d=0;var f=this.u.length,_=$(e,{f:n,u:s,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),p){var e=t.u[f+1];e?e.r():t.d=1}p=1}}),g=0;e.ondata=function(n,r,o){if(n)t.ondata(n,r,o),t.terminate();else if(g+=r.length,c.push(r),o){var a=new i(16);pe(a,0,134695760),pe(a,4,e.crc),pe(a,8,g),pe(a,12,e.size),c.push(a),_.c=g,_.b=l+g+16,_.crc=e.crc,_.size=e.size,p&&_.r(),p=1}else p&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,n=0,r=0,o=this.u;r<o.length;r++){n+=46+(u=o[r]).f.length+it(u.extra)+(u.o?u.o.length:0)}for(var a=new i(n+22),s=0,l=this.u;s<l.length;s++){var u=l[s];ot(a,e,u,u.f,u.u,u.c,t,u.o),e+=46+u.f.length+it(u.extra)+(u.o?u.o.length:0),t+=u.b}at(a,e,this.u.length,n,t),this.ondata(null,a,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2},e}();t.Zip=ct,t.zip=function(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";var r={};We(e,"",r,t);var o=Object.keys(r),a=o.length,s=0,l=0,u=a,c=new Array(a),d=[],p=function(){for(var e=0;e<d.length;++e)d[e]()},f=function(){var e=new i(l+22),t=s,r=l-s;l=0;for(var o=0;o<u;++o){var a=c[o];try{var d=a.c.length;ot(e,l,a,a.f,a.u,d);var p=30+a.f.length+it(a.extra),f=l+p;e.set(a.c,f),ot(e,s,a,a.f,a.u,d,l,a.m),s+=16+p+(a.m?a.m.length:0),l=f+d}catch(e){return n(e,null)}}at(e,s,c.length,r,t),n(null,e)};a||f();for(var _=function(e){var t=o[e],i=r[t],u=i[0],_=i[1],g=W(),h=u.length;g.p(u);var A=Xe(t),m=A.length,E=_.comment,y=E&&Xe(E),S=y&&y.length,v=it(_.extra),I=0==_.level?0:8,T=function(r,i){if(r)p(),n(r,null);else{var o=i.length;c[e]=$(_,{size:h,crc:g.d(),c:i,f:A,m:y,u:m!=t.length||y&&E.length!=S,compression:I}),s+=30+m+v+o,l+=76+2*(m+v)+(S||0)+o,--a||f()}};if(m>65535&&T("filename too long",null),I)if(h<16e4)try{T(null,Ie(u,_))}catch(e){T(e,null)}else d.push(ve(u,_,T));else T(null,u)},g=0;g<u;++g)_(g);return p},t.zipSync=function(e,t){t||(t={});var n={},r=[];We(e,"",n,t);var o=0,a=0;for(var s in n){var l=n[s],u=l[0],c=l[1],d=0==c.level?0:8,p=(T=Xe(s)).length,f=c.comment,_=f&&Xe(f),g=_&&_.length,h=it(c.extra);if(p>65535)throw"filename too long";var A=d?Ie(u,c):u,m=A.length,E=W();E.p(u),r.push($(c,{size:u.length,crc:E.d(),c:A,f:T,m:_,u:p!=s.length||_&&f.length!=g,o,compression:d})),o+=30+p+h+m,a+=76+2*(p+h)+(g||0)+m}for(var y=new i(a+22),S=o,v=a-o,I=0;I<r.length;++I){var T=r[I];ot(y,T.o,T,T.f,T.u,T.c.length);var b=30+T.f.length+it(T.extra);y.set(T.c,T.o+b),ot(y,o,T,T.f,T.u,T.c.length,T.o,T.m),o+=16+b+(T.m?T.m.length:0)}return at(y,o,r.length,v,S),y};var dt=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}();t.UnzipPassThrough=dt;var pt=function(){function e(){var e=this;this.i=new Te((function(t,n){e.ondata(null,t,n)}))}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e}();t.UnzipInflate=pt;var ft=function(){function e(e,t){var n=this;t<32e4?this.i=new Te((function(e,t){n.ondata(null,e,t)})):(this.i=new be((function(e,t,r){n.ondata(e,t,r)})),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=N(e,0)),this.i.push(e,t)},e.compression=8,e}();t.AsyncUnzipInflate=ft;var _t=function(){function e(e){this.onfile=e,this.k=[],this.o={0:dt},this.p=Y}return e.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(this.c>0){var r=Math.min(this.c,e.length),o=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(o,!this.c):this.k[0].push(o),(e=e.subarray(r)).length)return this.push(e,t)}else{var a=0,s=0,l=void 0,u=void 0;this.p.length?e.length?((u=new i(this.p.length+e.length)).set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,p=d&&this.d,f=function(){var e,t=ce(u,s);if(67324752==t){a=1,l=s,_.d=null,_.c=0;var r=ue(u,s+6),i=ue(u,s+8),o=2048&r,p=8&r,f=ue(u,s+26),g=ue(u,s+28);if(c>s+30+f+g){var h=[];_.k.unshift(h),a=2;var A=ce(u,s+18),m=ce(u,s+22),E=Ze(u.subarray(s+30,s+=30+f),!o);4294967295==A?(e=p?[-2]:rt(u,s),A=e[0],m=e[1]):p&&(A=-1),s+=g,_.c=A;var y={name:E,compression:i,start:function(){if(!y.ondata)throw"no callback";if(A){var e=n.o[i];if(!e)throw"unknown compression type "+i;var t=A<0?new e(E):new e(E,A,m);t.ondata=function(e,t,n){y.ondata(e,t,n)};for(var r=0,o=h;r<o.length;r++){var a=o[r];t.push(a,!1)}n.k[0]==h?n.d=t:t.push(Y,!0)}else y.ondata(null,Y,!0)},terminate:function(){n.k[0]==h&&n.d.terminate&&n.d.terminate()}};A>=0&&(y.size=A,y.originalSize=m),_.onfile(y)}return"break"}if(d){if(134695760==t)return l=s+=12+(-2==d&&8),a=3,_.c=0,"break";if(33639248==t)return l=s-=4,a=3,_.c=0,"break"}},_=this;s<c-4;++s){if("break"===f())break}if(this.p=Y,d<0){var g=a?u.subarray(0,l-12-(-2==d&&8)-(134695760==ce(u,l-16)&&4)):u.subarray(0,s);p?p.push(g,!!a):this.k[+(2==a)].push(g)}if(2&a)return this.push(u.subarray(s),t);this.p=u.subarray(s)}if(t&&this.c)throw"invalid zip file"},e.prototype.register=function(e){this.o[e.compression]=e},e}();t.Unzip=_t,t.unzip=function(e,t){if("function"!=typeof t)throw"no callback";for(var n=[],r=function(){for(var e=0;e<n.length;++e)n[e]()},o={},a=e.length-22;101010256!=ce(e,a);--a)if(!a||e.length-a>65558)return void t("invalid zip file",null);var s=ue(e,a+8);s||t(null,{});var l=s,u=ce(e,a+16),c=4294967295==u;if(c){if(a=ce(e,a-12),101075792!=ce(e,a))return void t("invalid zip file",null);l=s=ce(e,a+32),u=ce(e,a+48)}for(var d=function(a){var l=nt(e,u,c),d=l[0],p=l[1],f=l[2],_=l[3],g=l[4],h=l[5],A=tt(e,h);u=g;var m=function(e,n){e?(r(),t(e,null)):(o[_]=n,--s||t(null,o))};if(d)if(8==d){var E=e.subarray(A,A+p);if(p<32e4)try{m(null,Pe(E,new i(f)))}catch(e){m(e,null)}else n.push(Me(E,{size:f},m))}else m("unknown compression type "+d,null);else m(null,N(e,A,A+p))},p=0;p<l;++p)d();return r},t.unzipSync=function(e){for(var t={},n=e.length-22;101010256!=ce(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=ue(e,n+8);if(!r)return{};var o=ce(e,n+16),a=4294967295==o;if(a){if(n=ce(e,n-12),101075792!=ce(e,n))throw"invalid zip file";r=ce(e,n+32),o=ce(e,n+48)}for(var s=0;s<r;++s){var l=nt(e,o,a),u=l[0],c=l[1],d=l[2],p=l[3],f=l[4],_=l[5],g=tt(e,_);if(o=f,u){if(8!=u)throw"unknown compression type "+u;t[p]=Pe(e.subarray(g,g+c),new i(d))}else t[p]=N(e,g,g+c)}return t}},45051:(e,t)=>{"use strict";var n={};t.default=function(e,t,r,i,o){var a=n[t]||(n[t]=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))),s=new Worker(a);return s.onerror=function(e){return o(e.error,null)},s.onmessage=function(e){return o(null,e.data)},s.postMessage(r,i),s}},54302:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="function"==typeof WeakMap?new WeakMap:new Map;function r(e){var t=n.get(e);if(void 0!==t)return t;var r=new Map;return Object.getOwnPropertyNames(e).forEach((function(t){r.set(e[t],t)})),n.set(e,r),r}var i=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return r(this).has(e)}},cast:{value:function(e){return this.isValid(e)?e:void 0}},members:{value:function(){return r(this).keys()}},getName:{value:function(e){return r(this).get(e)}}}));function o(e){var n=Object.create(i);for(var r in e)t.call(e,r)&&Object.defineProperty(n,r,{value:e[r]});return Object.freeze(n)}var a=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return"string"==typeof e&&t.call(this,e)}},cast:{value:i.cast},members:{value:function(){return Object.getOwnPropertyNames(this)}},getName:{value:function(e){return e}}}));o.Mirrored=function(e){for(var t=Object.create(a),n=0,r=e.length;n<r;++n)Object.defineProperty(t,e[n],{value:e[n]});return Object.freeze(t)},Object.freeze(o.Mirrored),e.exports=Object.freeze(o)},28770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ucs2decode:()=>f,ucs2encode:()=>_,decode:()=>A,encode:()=>m,toASCII:()=>y,toUnicode:()=>E,default:()=>S});const r=2147483647,i=36,o=/^xn--/,a=/[^\0-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,c=String.fromCharCode;function d(e){throw new RangeError(l[e])}function p(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]);const i=function(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}((e=e.replace(s,".")).split("."),t).join(".");return r+i}function f(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}const _=e=>String.fromCodePoint(...e),g=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},h=function(e,t,n){let r=0;for(e=n?u(e/700):e>>1,e+=u(e/t);e>455;r+=i)e=u(e/35);return u(r+36*e/(e+38))},A=function(e){const t=[],n=e.length;let o=0,a=128,s=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let n=0;n<l;++n)e.charCodeAt(n)>=128&&d("not-basic"),t.push(e.charCodeAt(n));for(let p=l>0?l+1:0;p<n;){let l=o;for(let t=1,a=i;;a+=i){p>=n&&d("invalid-input");const l=(c=e.charCodeAt(p++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:i;(l>=i||l>u((r-o)/t))&&d("overflow"),o+=l*t;const f=a<=s?1:a>=s+26?26:a-s;if(l<f)break;const _=i-f;t>u(r/_)&&d("overflow"),t*=_}const f=t.length+1;s=h(o-l,f,0==l),u(o/f)>r-a&&d("overflow"),a+=u(o/f),o%=f,t.splice(o++,0,a)}var c;return String.fromCodePoint(...t)},m=function(e){const t=[];let n=(e=f(e)).length,o=128,a=0,s=72;for(const n of e)n<128&&t.push(c(n));let l=t.length,p=l;for(l&&t.push("-");p<n;){let n=r;for(const t of e)t>=o&&t<n&&(n=t);const f=p+1;n-o>u((r-a)/f)&&d("overflow"),a+=(n-o)*f,o=n;for(const n of e)if(n<o&&++a>r&&d("overflow"),n==o){let e=a;for(let n=i;;n+=i){const r=n<=s?1:n>=s+26?26:n-s;if(e<r)break;const o=e-r,a=i-r;t.push(c(g(r+o%a,0))),e=u(o/a)}t.push(c(g(e,0))),s=h(a,f,p==l),a=0,++p}++a,++o}return t.join("")},E=function(e){return p(e,(function(e){return o.test(e)?A(e.slice(4).toLowerCase()):e}))},y=function(e){return p(e,(function(e){return a.test(e)?"xn--"+m(e):e}))},S={version:"2.1.0",ucs2:{decode:f,encode:_},decode:A,encode:m,toASCII:y,toUnicode:E}},50944:(e,t)=>{function n(e,t){for(var n=e.length,r=new Array(n),i={},o=n;o--;)i[o]||a(e[o],o,[]);return r;function a(o,s,l){if(l.indexOf(o)>=0)throw new Error("Cyclic dependency: "+JSON.stringify(o));if(!~e.indexOf(o))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(o));if(!i[s]){i[s]=!0;var u=t.filter((function(e){return e[0]===o}));if(s=u.length){var c=l.concat(o);do{var d=u[--s][1];a(d,e.indexOf(d),c)}while(s)}r[--n]=o}}}e.exports=t=function(e){return n(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.indexOf(i[0])<0&&t.push(i[0]),t.indexOf(i[1])<0&&t.push(i[1])}return t}(e),e)},t.array=n},60670:(e,t,n)=>{"use strict";e.exports=n.p+"img/WhatsApp-167x167_3b8f1ab1683315629736.png"},23098:module=>{var e={},aa={},l;for(l in e)e.hasOwnProperty(l)&&(aa[l]=e[l]);function ba(e){eval.call(null,e)}for(l in e.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(e.arguments=arguments),"undefined"!=typeof console?(e.print||(e.print=function(e){console.log(e)}),e.printErr||(e.printErr=function(e){console.log(e)})):e.print||(e.print=function(){}),void 0===e.setWindowTitle&&(e.setWindowTitle=function(e){document.title=e}),!e.load&&e.read&&(e.load=function(t){ba(e.read(t))}),e.print||(e.print=function(){}),e.printErr||(e.printErr=e.print),e.arguments||(e.arguments=[]),e.thisProgram||(e.thisProgram="./this.program"),e.print=e.print,e.S=e.printErr,e.preRun=[],e.postRun=[],aa)aa.hasOwnProperty(l)&&(e[l]=aa[l]);var n={cb:function(e){ca=e},Ua:function(){return ca},na:function(){return m},X:function(e){m=e},Aa:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===e[e.length-1]?n.H:"i"===e[0]?(assert(0==(e=parseInt(e.substr(1)))%8),e/8):0}},Ta:function(e){return Math.max(n.Aa(e),n.H)},dd:16,Bd:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4==(7&e)),e+=4):assert(0==(3&e)),e},od:function(e,t,r){return r||"i64"!=e&&"double"!=e?e?Math.min(t||(e?n.Ta(e):0),n.H):Math.min(t,8):8},J:function(t,n,r){return r&&r.length?(r.splice||(r=Array.prototype.slice.call(r)),r.splice(0,0,n),e["dynCall_"+t].apply(null,r)):e["dynCall_"+t].call(null,n)},U:[],Ma:function(e){for(var t=0;t<n.U.length;t++)if(!n.U[t])return n.U[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},$a:function(e){n.U[(e-2)/2]=null},M:function(t){n.M.ma||(n.M.ma={}),n.M.ma[t]||(n.M.ma[t]=1,e.S(t))},ha:{},rd:function(e,t){assert(t),n.ha[t]||(n.ha[t]={});var r=n.ha[t];return r[e]||(r[e]=function(){return n.J(t,e,arguments)}),r[e]},pd:function(){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},W:function(e){var t=m;return m=(m=m+e|0)+15&-16,t},Ia:function(e){var t=p;return p=(p=p+e|0)+15&-16,t},P:function(e){var t=v;return(e=(v=(v=v+e|0)+15&-16)>=w)&&(z("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+w+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 "),e=!0),e?(v=t,0):t},ea:function(e,t){return Math.ceil(e/(t||16))*(t||16)},xd:function(e,t,n){return n?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)},La:8,H:4,ed:0};e.Runtime=n,n.addFunction=n.Ma,n.removeFunction=n.$a;var A=!1,da,fa,ca,ha,ia,buffer;function assert(e,t){e||z("Assertion failed: "+t)}function ga(a){var b=e["_"+a];if(!b)try{b=eval("_"+a)}catch(e){}return assert(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)"),b}function ma(e,t,n){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":D[e>>0]=t;break;case"i16":E[e>>1]=t;break;case"i32":F[e>>2]=t;break;case"i64":fa=[t>>>0,(da=t,1<=+na(da)?0<da?(0|oa(+pa(da/4294967296),4294967295))>>>0:~~+qa((da-+(~~da>>>0))/4294967296)>>>0:0)],F[e>>2]=fa[0],F[e+4>>2]=fa[1];break;case"float":ra[e>>2]=t;break;case"double":sa[e>>3]=t;break;default:z("invalid type for setValue: "+n)}}function ta(e,t){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return D[e>>0];case"i16":return E[e>>1];case"i32":case"i64":return F[e>>2];case"float":return ra[e>>2];case"double":return sa[e>>3];default:z("invalid type for setValue: "+t)}return null}function G(e,t,r,i){var o,a;"number"==typeof e?(o=!0,a=e):(o=!1,a=e.length);var s,l,u="string"==typeof t?t:null;if(r=4==r?i:[ua,n.W,n.Ia,n.P][void 0===r?2:r](Math.max(a,u?1:t.length)),o){for(i=r,assert(0==(3&r)),e=r+(-4&a);i<e;i+=4)F[i>>2]=0;for(e=r+a;i<e;)D[i++>>0]=0;return r}if("i8"===u)return e.subarray||e.slice?H.set(e,r):H.set(new Uint8Array(e),r),r;for(i=0;i<a;){var c=e[i];"function"==typeof c&&(c=n.sd(c)),0===(o=u||t[i])?i++:("i64"==o&&(o="i32"),ma(r+i,c,o),l!==o&&(s=n.Aa(o),l=o),i+=s)}return r}function la(t,n){if(0===n||!t)return"";for(var r,i=0,o=0;(i|=r=H[t+o>>0],0!=r||n)&&(o++,!n||o!=n););if(n||(n=o),r="",128>i){for(;0<n;)i=String.fromCharCode.apply(String,H.subarray(t,t+Math.min(n,1024))),r=r?r+i:i,t+=1024,n-=1024;return r}return e.UTF8ToString(t)}function za(e,t){for(var n,r,i,o,a,s="";;){if(!(n=e[t++]))return s;128&n?(r=63&e[t++],192==(224&n)?s+=String.fromCharCode((31&n)<<6|r):(i=63&e[t++],224==(240&n)?n=(15&n)<<12|r<<6|i:(o=63&e[t++],240==(248&n)?n=(7&n)<<18|r<<12|i<<6|o:(a=63&e[t++],248==(252&n)?n=(3&n)<<24|r<<18|i<<12|o<<6|a:n=(1&n)<<30|r<<24|i<<18|o<<12|a<<6|63&e[t++])),65536>n?s+=String.fromCharCode(n):(n-=65536,s+=String.fromCharCode(55296|n>>10,56320|1023&n)))):s+=String.fromCharCode(n)}}function Aa(e,t,n,r){if(!(0<r))return 0;var i=n;r=n+r-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),127>=a){if(n>=r)break;t[n++]=a}else{if(2047>=a){if(n+1>=r)break;t[n++]=192|a>>6}else{if(65535>=a){if(n+2>=r)break;t[n++]=224|a>>12}else{if(2097151>=a){if(n+3>=r)break;t[n++]=240|a>>18}else{if(67108863>=a){if(n+4>=r)break;t[n++]=248|a>>24}else{if(n+5>=r)break;t[n++]=252|a>>30,t[n++]=128|a>>24&63}t[n++]=128|a>>18&63}t[n++]=128|a>>12&63}t[n++]=128|a>>6&63}t[n++]=128|63&a}}return t[n]=0,n-i}function Ba(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:2097151>=r?t+4:67108863>=r?t+5:t+6}return t}function Ca(t){var r=!!e.___cxa_demangle;if(r)try{var i=ua(t.length);ka(t.substr(1),i);var o=ua(4),a=e.___cxa_demangle(i,0,0,o);if(0===ta(o,"i32")&&a)return la(a)}catch(e){}finally{i&&Da(i),o&&Da(o),a&&Da(a)}var s=3,l={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},u=[],c=!0;i=t;try{if("Object._main"==t||"_main"==t)return"main()";if("number"==typeof t&&(t=la(t)),"_"!==t[0]||"_"!==t[1]||"Z"!==t[2])return t;switch(t[3]){case"n":return"operator new()";case"d":return"operator delete()"}i=function e(n,r,i){r=r||1/0;var o,a="",d=[];if("N"===t[s]){for(s++,"K"===t[s]&&s++,o=[];"E"!==t[s];)if("S"===t[s]){s++;var p=t.indexOf("_",s);o.push(u[t.substring(s,p)||0]||"?"),s=p+1}else if("C"===t[s])o.push(o[o.length-1]),s+=2;else{var f=(p=parseInt(t.substr(s))).toString().length;if(!p||!f){s--;break}var _=t.substr(s+f,p);o.push(_),u.push(_),s+=f+p}if(s++,o=o.join("::"),0==--r)return n?[o]:o}else("K"===t[s]||c&&"L"===t[s])&&s++,(p=parseInt(t.substr(s)))&&(f=p.toString().length,o=t.substr(s+f,p),s+=f+p);c=!1,"I"===t[s]?(s++,p=e(!0),a+=(f=e(!0,1,!0))[0]+" "+o+"<"+p.join(", ")+">"):a=o;e:for(;s<t.length&&0<r--;)if(o=t[s++],o in l)d.push(l[o]);else switch(o){case"P":d.push(e(!0,1,!0)[0]+"*");break;case"R":d.push(e(!0,1,!0)[0]+"&");break;case"L":s++,p=t.indexOf("E",s)-s,d.push(t.substr(s,p)),s+=p+2;break;case"A":if(p=parseInt(t.substr(s)),s+=p.toString().length,"_"!==t[s])throw"?";s++,d.push(e(!0,1,!0)[0]+" ["+p+"]");break;case"E":break e;default:a+="?"+o;break e}return i||1!==d.length||"void"!==d[0]||(d=[]),n?(a&&d.push(a+"?"),d):a+"("+d.join(", ")+")"}()}catch(e){i+="?"}return 0<=i.indexOf("?")&&!r&&n.M("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),i}function Ea(){return Fa().replace(/__Z[\w\d_]+/g,(function(e){var t=Ca(e);return e===t?e:e+" ["+t+"]"}))}function Fa(){var e=Error();if(!e.stack){try{throw Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Ga(){var e=v;return 0<e%4096&&(e+=4096-e%4096),e}(function(){function a(e){return{arguments:(e=e.toString().match(d).slice(1))[0],body:e[1],returnValue:e[2]}}var b={stackSave:function(){n.na()},stackRestore:function(){n.X()},arrayToC:function(e){var t=n.W(e.length);return ja(e,t),t},stringToC:function(e){var t=0;return null!=e&&0!==e&&ka(e,t=n.W(1+(e.length<<2))),t}},c={string:b.stringToC,array:b.arrayToC};ia=function(e,t,r,i,o){e=ga(e);var a=[],s=0;if(i)for(var l=0;l<i.length;l++){var u=c[r[l]];u?(0===s&&(s=n.na()),a[l]=u(i[l])):a[l]=i[l]}if(r=e.apply(null,a),"string"===t&&(r=la(r)),0!==s){if(o&&o.async)return void EmterpreterAsync.hd.push((function(){n.X(s)}));n.X(s)}return r};var d=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,f={},h;for(h in b)b.hasOwnProperty(h)&&(f[h]=a(b[h]));ha=function(b,c,d){d=d||[];var h=ga(b);b=d.every((function(e){return"number"===e}));var u="string"!==c;if(u&&b)return h;var q=d.map((function(e,t){return"$"+t}));c="(function("+q.join(",")+") {";var y=d.length;if(!b){c+="var stack = "+f.stackSave.body+";";for(var B=0;B<y;B++){var J=q[B],ea=d[B];"number"!==ea&&(ea=f[ea+"ToC"],c+="var "+ea.arguments+" = "+J+";",c+=ea.body+";",c+=J+"="+ea.returnValue+";")}}return d=a((function(){return h})).returnValue,c+="var ret = "+d+"("+q.join(",")+");",u||(d=a((function(){return la})).returnValue,c+="ret = "+d+"(ret);"),b||(c+=f.stackRestore.body.replace("()","(stack)")+";"),eval(c+"return ret})")}})(),e.ccall=ia,e.cwrap=ha,e.setValue=ma,e.getValue=ta,e.ALLOC_NORMAL=0,e.ALLOC_STACK=1,e.ALLOC_STATIC=2,e.ALLOC_DYNAMIC=3,e.ALLOC_NONE=4,e.allocate=G,e.getMemory=function(e){return va?void 0!==wa&&!wa.C||!xa?n.P(e):ua(e):n.Ia(e)},e.Pointer_stringify=la,e.AsciiToString=function(e){for(var t="";;){var n=D[e++>>0];if(!n)return t;t+=String.fromCharCode(n)}},e.stringToAscii=function(e,t){return ya(e,t,!1)},e.UTF8ArrayToString=za,e.UTF8ToString=function(e){return za(H,e)},e.stringToUTF8Array=Aa,e.stringToUTF8=function(e,t,n){return Aa(e,H,t,n)},e.lengthBytesUTF8=Ba,e.UTF16ToString=function(e){for(var t=0,n="";;){var r=E[e+2*t>>1];if(0==r)return n;++t,n+=String.fromCharCode(r)}},e.stringToUTF16=function(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=t;n=(n-=2)<2*e.length?n/2:e.length;for(var i=0;i<n;++i)E[t>>1]=e.charCodeAt(i),t+=2;return E[t>>1]=0,t-r},e.lengthBytesUTF16=function(e){return 2*e.length},e.UTF32ToString=function(e){for(var t=0,n="";;){var r=F[e+4*t>>2];if(0==r)return n;++t,65536<=r?(r-=65536,n+=String.fromCharCode(55296|r>>10,56320|1023&r)):n+=String.fromCharCode(r)}},e.stringToUTF32=function(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=t;n=r+n-4;for(var i=0;i<e.length;++i){if(55296<=(o=e.charCodeAt(i))&&57343>=o)var o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i);if(F[t>>2]=o,(t+=4)+4>n)break}return F[t>>2]=0,t-r},e.lengthBytesUTF32=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t},e.stackTrace=function(){return Ea()};for(var D,H,E,Ha,F,Ia,ra,sa,Ja=0,p=0,va=!1,Ka=0,m=0,La=0,Ma=0,v=0,Na=e.TOTAL_STACK||5242880,w=e.TOTAL_MEMORY||16777216,I=65536;I<w||I<2*Na;)I=16777216>I?2*I:I+16777216;function Oa(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var r=t.Qa;"number"==typeof r?void 0===t.T?n.J("v",r):n.J("vi",r,[t.T]):r(void 0===t.T?null:t.T)}}}I!==w&&(w=I),assert("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support"),buffer=new ArrayBuffer(w),D=new Int8Array(buffer),E=new Int16Array(buffer),F=new Int32Array(buffer),H=new Uint8Array(buffer),Ha=new Uint16Array(buffer),Ia=new Uint32Array(buffer),ra=new Float32Array(buffer),sa=new Float64Array(buffer),F[0]=255,assert(255===H[0]&&0===H[3],"Typed arrays 2 must be run on a little-endian system"),e.HEAP=void 0,e.buffer=buffer,e.HEAP8=D,e.HEAP16=E,e.HEAP32=F,e.HEAPU8=H,e.HEAPU16=Ha,e.HEAPU32=Ia,e.HEAPF32=ra,e.HEAPF64=sa;var Pa=[],Qa=[],Ra=[],K=[],Sa=[],xa=!1;function Ta(e){Pa.unshift(e)}function Ua(e){Sa.unshift(e)}function Va(e,t,n){return e=Aa(e,n=Array(0<n?n:Ba(e)+1),0,n.length),t&&(n.length=e),n}function ka(e,t,n){for(e=Va(e,n),n=0;n<e.length;)D[t+n>>0]=e[n],n+=1}function ja(e,t){for(var n=0;n<e.length;n++)D[t++>>0]=e[n]}function ya(e,t,n){for(var r=0;r<e.length;++r)D[t++>>0]=e.charCodeAt(r);n||(D[t>>0]=0)}e.addOnPreRun=Ta,e.addOnInit=function(e){Qa.unshift(e)},e.addOnPreMain=function(e){Ra.unshift(e)},e.addOnExit=function(e){K.unshift(e)},e.addOnPostRun=Ua,e.intArrayFromString=Va,e.intArrayToString=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];255<r&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")},e.writeStringToMemory=ka,e.writeArrayToMemory=ja,e.writeAsciiToMemory=ya,Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16)|0}),Math.td=Math.imul,Math.clz32||(Math.clz32=function(e){e>>>=0;for(var t=0;32>t;t++)if(e&1<<31-t)return t;return 32}),Math.kd=Math.clz32;var na=Math.abs,qa=Math.ceil,pa=Math.floor,oa=Math.min,L=0,Wa=null,Xa=null;function Ya(){L++,e.monitorRunDependencies&&e.monitorRunDependencies(L)}function Za(){if(L--,e.monitorRunDependencies&&e.monitorRunDependencies(L),0==L&&(null!==Wa&&(clearInterval(Wa),Wa=null),Xa)){var t=Xa;Xa=null,t()}}e.addRunDependency=Ya,e.removeRunDependency=Za,e.preloadedImages={},e.preloadedAudios={},Ja=8,p=Ja+1696,Qa.push(),G([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,164,2,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",4,n.La);var $a=n.ea(G(12,"i8",2),8);function eb(e,t){K.push((function(){n.J("vi",e,[t])})),eb.level=K.length}assert(0==$a%8),e._bitshift64Ashr=ab,e._i64Subtract=bb,e._i64Add=cb,e._memset=db,e._bitshift64Lshr=fb,e._bitshift64Shl=gb;var M={G:1,B:2,Qc:3,Nb:4,F:5,sa:6,gb:7,kc:8,Z:9,ub:10,oa:11,$c:11,Ka:12,Y:13,Gb:14,wc:15,$:16,pa:17,ad:18,ba:19,qa:20,N:21,u:22,fc:23,Ja:24,O:25,Xc:26,Hb:27,sc:28,da:29,Nc:30,Zb:31,Gc:32,Db:33,Kc:34,oc:42,Kb:43,vb:44,Qb:45,Rb:46,Sb:47,Yb:48,Yc:49,ic:50,Pb:51,Ab:35,lc:37,mb:52,pb:53,bd:54,gc:55,qb:56,rb:57,Bb:35,sb:59,uc:60,jc:61,Uc:62,tc:63,pc:64,qc:65,Mc:66,mc:67,jb:68,Rc:69,wb:70,Hc:71,ac:72,Eb:73,ob:74,Bc:76,nb:77,Lc:78,Tb:79,Ub:80,Xb:81,Wb:82,Vb:83,vc:38,ra:39,bc:36,aa:40,Cc:95,Fc:96,zb:104,hc:105,kb:97,Jc:91,zc:88,rc:92,Oc:108,yb:111,hb:98,xb:103,ec:101,cc:100,Vc:110,Ib:112,Jb:113,Mb:115,lb:114,Cb:89,$b:90,Ic:93,Pc:94,ib:99,dc:102,Ob:106,xc:107,Wc:109,Zc:87,Fb:122,Sc:116,Ac:95,nc:123,Lb:84,Dc:75,tb:125,yc:131,Ec:130,Tc:86},hb={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"};function ib(t){return e.___errno_location&&(F[e.___errno_location()>>2]=t),t}function jb(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function N(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=jb(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function kb(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function lb(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function mb(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=jb(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}var nb=[];function ob(e,t){nb[e]={input:[],output:[],L:t},pb(e,qb)}var qb={open:function(e){var t=nb[e.g.rdev];if(!t)throw new O(M.ba);e.tty=t,e.seekable=!1},close:function(e){e.tty.L.flush(e.tty)},flush:function(e){e.tty.L.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.L.Ba)throw new O(M.sa);for(var i=0,o=0;o<r;o++){var a;try{a=e.tty.L.Ba(e.tty)}catch(e){throw new O(M.F)}if(void 0===a&&0===i)throw new O(M.oa);if(null==a)break;i++,t[n+o]=a}return i&&(e.g.timestamp=Date.now()),i},write:function(e,t,n,r){if(!e.tty||!e.tty.L.ja)throw new O(M.sa);for(var i=0;i<r;i++)try{e.tty.L.ja(e.tty,t[n+i])}catch(e){throw new O(M.F)}return r&&(e.g.timestamp=Date.now()),i}},rb={Ba:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&(null!==(t=readline())&&(t+="\n")),!t)return null;e.input=Va(t,!0)}return e.input.shift()},ja:function(t,n){null===n||10===n?(e.print(za(t.output,0)),t.output=[]):0!=n&&t.output.push(n)},flush:function(t){t.output&&0<t.output.length&&(e.print(za(t.output,0)),t.output=[])}},sb={ja:function(t,n){null===n||10===n?(e.printErr(za(t.output,0)),t.output=[]):0!=n&&t.output.push(n)},flush:function(t){t.output&&0<t.output.length&&(e.printErr(za(t.output,0)),t.output=[])}},P={q:null,A:function(){return P.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new O(M.G);return P.q||(P.q={dir:{g:{D:P.k.D,p:P.k.p,lookup:P.k.lookup,V:P.k.V,rename:P.k.rename,unlink:P.k.unlink,rmdir:P.k.rmdir,readdir:P.k.readdir,symlink:P.k.symlink},stream:{I:P.n.I}},file:{g:{D:P.k.D,p:P.k.p},stream:{I:P.n.I,read:P.n.read,write:P.n.write,ta:P.n.ta,Ea:P.n.Ea,Ga:P.n.Ga}},link:{g:{D:P.k.D,p:P.k.p,readlink:P.k.readlink},stream:{}},va:{g:{D:P.k.D,p:P.k.p},stream:tb}}),16384==(61440&(n=ub(e,t,n,r)).mode)?(n.k=P.q.dir.g,n.n=P.q.dir.stream,n.e={}):32768==(61440&n.mode)?(n.k=P.q.file.g,n.n=P.q.file.stream,n.o=0,n.e=null):40960==(61440&n.mode)?(n.k=P.q.link.g,n.n=P.q.link.stream):8192==(61440&n.mode)&&(n.k=P.q.va.g,n.n=P.q.va.stream),n.timestamp=Date.now(),e&&(e.e[t]=n),n},Sa:function(e){if(e.e&&e.e.subarray){for(var t=[],n=0;n<e.o;++n)t.push(e.e[n]);return t}return e.e},qd:function(e){return e.e?e.e.subarray?e.e.subarray(0,e.o):new Uint8Array(e.e):new Uint8Array},ya:function(e,t){if(e.e&&e.e.subarray&&t>e.e.length&&(e.e=P.Sa(e),e.o=e.e.length),!e.e||e.e.subarray){var n=e.e?e.e.buffer.byteLength:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)|0),0!=n&&(t=Math.max(t,256)),n=e.e,e.e=new Uint8Array(t),0<e.o&&e.e.set(n.subarray(0,e.o),0))}else for(!e.e&&0<t&&(e.e=[]);e.e.length<t;)e.e.push(0)},ab:function(e,t){if(e.o!=t)if(0==t)e.e=null,e.o=0;else{if(!e.e||e.e.subarray){var n=e.e;e.e=new Uint8Array(new ArrayBuffer(t)),n&&e.e.set(n.subarray(0,Math.min(t,e.o)))}else if(e.e||(e.e=[]),e.e.length>t)e.e.length=t;else for(;e.e.length<t;)e.e.push(0);e.o=t}},k:{D:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.o:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Pa=4096,t.blocks=Math.ceil(t.size/t.Pa),t},p:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&P.ab(e,t.size)},lookup:function(){throw vb[M.B]},V:function(e,t,n,r){return P.createNode(e,t,n,r)},rename:function(e,t,n){if(16384==(61440&e.mode)){var r;try{r=wb(t,n)}catch(e){}if(r)for(var i in r.e)throw new O(M.ra)}delete e.parent.e[e.name],e.name=n,t.e[n]=e,e.parent=t},unlink:function(e,t){delete e.e[t]},rmdir:function(e,t){var n,r=wb(e,t);for(n in r.e)throw new O(M.ra);delete e.e[t]},readdir:function(e){var t,n=[".",".."];for(t in e.e)e.e.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=P.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new O(M.u);return e.link}},n:{read:function(e,t,n,r,i){var o=e.g.e;if(i>=e.g.o)return 0;if(assert(0<=(e=Math.min(e.g.o-i,r))),8<e&&o.subarray)t.set(o.subarray(i,i+e),n);else for(r=0;r<e;r++)t[n+r]=o[i+r];return e},write:function(e,t,n,r,i,o){if(!r)return 0;if((e=e.g).timestamp=Date.now(),t.subarray&&(!e.e||e.e.subarray)){if(o)return e.e=t.subarray(n,n+r),e.o=r;if(0===e.o&&0===i)return e.e=new Uint8Array(t.subarray(n,n+r)),e.o=r;if(i+r<=e.o)return e.e.set(t.subarray(n,n+r),i),r}if(P.ya(e,i+r),e.e.subarray&&t.subarray)e.e.set(t.subarray(n,n+r),i);else for(o=0;o<r;o++)e.e[i+o]=t[n+o];return e.o=Math.max(e.o,i+r),r},I:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.g.mode)&&(t+=e.g.o),0>t)throw new O(M.u);return t},ta:function(e,t,n){P.ya(e.g,t+n),e.g.o=Math.max(e.g.o,t+n)},Ea:function(e,t,n,r,i,o,a){if(32768!=(61440&e.g.mode))throw new O(M.ba);if(n=e.g.e,2&a||n.buffer!==t&&n.buffer!==t.buffer){if((0<i||i+r<e.g.o)&&(n=n.subarray?n.subarray(i,i+r):Array.prototype.slice.call(n,i,i+r)),e=!0,!(r=ua(r)))throw new O(M.Ka);t.set(n,r)}else e=!1,r=n.byteOffset;return{Cd:r,gd:e}},Ga:function(e,t,n,r,i){if(32768!=(61440&e.g.mode))throw new O(M.ba);return 2&i||P.n.write(e,t,0,r,n,!1),0}}};G(1,"i32*",2),G(1,"i32*",2),G(1,"i32*",2);var xb=null,yb=[null],zb=[],Ab=1,R=null,Cb=!0,S={},O=null,vb={};function T(e,t){if(t=t||{},!(e=mb("/",e)))return{path:"",g:null};var n,r={za:!0,ka:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.ka)throw new O(M.aa);r=jb(e.split("/").filter((function(e){return!!e})),!1);var i=xb;n="/";for(var o=0;o<r.length;o++){var a=o===r.length-1;if(a&&t.parent)break;if(i=wb(i,r[o]),n=N(n+"/"+r[o]),i.R&&(!a||a&&t.za)&&(i=i.R.root),!a||t.ga)for(a=0;40960==(61440&i.mode);)if(i=Db(n),i=T(n=mb(kb(n),i),{ka:t.ka}).g,40<a++)throw new O(M.aa)}return{path:n,g:i}}function U(e){for(var t;;){if(e===e.parent)return e=e.A.Fa,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function Eb(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%R.length}function Fb(e){var t=Eb(e.parent.id,e.name);e.K=R[t],R[t]=e}function wb(e,t){var n;if(n=(n=Gb(e,"x"))?n:e.k.lookup?0:M.Y)throw new O(n,e);for(n=R[Eb(e.id,t)];n;n=n.K){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.k.lookup(e,t)}function ub(e,t,n,r){return Hb||((Hb=function(e,t,n,r){e||(e=this),this.parent=e,this.A=e.A,this.R=null,this.id=Ab++,this.name=t,this.mode=n,this.k={},this.n={},this.rdev=r}).prototype={},Object.defineProperties(Hb.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},Xa:{get:function(){return 16384==(61440&this.mode)}},Ca:{get:function(){return 8192==(61440&this.mode)}}})),Fb(e=new Hb(e,t,n,r)),e}var Ib={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Gb(e,t){return Cb||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:M.Y}function Jb(e,t){try{return wb(e,t),M.pa}catch(e){}return Gb(e,"wx")}function Kb(){for(var e=0;e<=4096;e++)if(!zb[e])return e;throw new O(M.Ja)}function Lb(e){Mb||((Mb=function(){}).prototype={},Object.defineProperties(Mb.prototype,{object:{get:function(){return this.g},set:function(e){this.g=e}},vd:{get:function(){return 1!=(2097155&this.flags)}},wd:{get:function(){return 0!=(2097155&this.flags)}},ud:{get:function(){return 1024&this.flags}}}));var t,n=new Mb;for(t in e)n[t]=e[t];return e=n,n=Kb(),e.fd=n,zb[n]=e}var tb={open:function(e){e.n=yb[e.g.rdev].n,e.n.open&&e.n.open(e)},I:function(){throw new O(M.da)}},Zb;function pb(e,t){yb[e]={n:t}}function Nb(e,t){var n,r="/"===t,i=!t;if(r&&xb)throw new O(M.$);if(!r&&!i){if(t=(n=T(t,{za:!1})).path,(n=n.g).R)throw new O(M.$);if(16384!=(61440&n.mode))throw new O(M.qa)}i={type:e,Ad:{},Fa:t,Ya:[]};var o=e.A(i);o.A=i,i.root=o,r?xb=o:n&&(n.R=i,n.A&&n.A.Ya.push(i))}function Ob(e,t,n){var r=T(e,{parent:!0}).g;if(!(e=lb(e))||"."===e||".."===e)throw new O(M.u);var i=Jb(r,e);if(i)throw new O(i);if(!r.k.V)throw new O(M.G);return r.k.V(r,e,t,n)}function Pb(e,t){return t=4095&(void 0!==t?t:438),Ob(e,t|=32768,0)}function V(e,t){return t=1023&(void 0!==t?t:511),Ob(e,t|=16384,0)}function Qb(e,t,n){return void 0===n&&(n=t,t=438),Ob(e,8192|t,n)}function Rb(e,t){if(!mb(e))throw new O(M.B);var n=T(t,{parent:!0}).g;if(!n)throw new O(M.B);var r=lb(t),i=Jb(n,r);if(i)throw new O(i);if(!n.k.symlink)throw new O(M.G);return n.k.symlink(n,r,e)}function Db(e){if(!(e=T(e).g))throw new O(M.B);if(!e.k.readlink)throw new O(M.u);return mb(U(e.parent),e.k.readlink(e))}function Sb(e,t){var n;if(!(n="string"==typeof e?T(e,{ga:!0}).g:e).k.p)throw new O(M.G);n.k.p(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})}function Tb(t,n){var r,i,o;if(""===t)throw new O(M.B);if("string"==typeof n){if(void 0===(i=Ib[n]))throw Error("Unknown file open mode: "+n)}else i=n;if(r=64&(n=i)?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)o=t;else{t=N(t);try{o=T(t,{ga:!(131072&n)}).g}catch(e){}}if(i=!1,64&n)if(o){if(128&n)throw new O(M.pa)}else o=Ob(t,r,0),i=!0;if(!o)throw new O(M.B);if(8192==(61440&o.mode)&&(n&=-513),65536&n&&16384!=(61440&o.mode))throw new O(M.qa);if(!i&&(o?40960==(61440&o.mode)?r=M.aa:16384==(61440&o.mode)&&(0!=(2097155&n)||512&n)?r=M.N:(r=["r","w","rw"][3&n],512&n&&(r+="w"),r=Gb(o,r)):r=M.B,r))throw new O(r);if(512&n){var a;if(!(a="string"==typeof(r=o)?T(r,{ga:!0}).g:r).k.p)throw new O(M.G);if(16384==(61440&a.mode))throw new O(M.N);if(32768!=(61440&a.mode))throw new O(M.u);if(r=Gb(a,"w"))throw new O(r);a.k.p(a,{size:0,timestamp:Date.now()})}n&=-641,(o=Lb({g:o,path:U(o),flags:n,seekable:!0,position:0,n:o.n,eb:[],error:!1})).n.open&&o.n.open(o),!e.logReadFiles||1&n||(Ub||(Ub={}),t in Ub||(Ub[t]=1,e.printErr("read file: "+t)));try{S.onOpenFile&&(a=0,1!=(2097155&n)&&(a|=1),0!=(2097155&n)&&(a|=2),S.onOpenFile(t,a))}catch(e){console.log("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return o}function Vb(e){e.ia&&(e.ia=null);try{e.n.close&&e.n.close(e)}catch(e){throw e}finally{zb[e.fd]=null}}function Wb(e,t,n){if(!e.seekable||!e.n.I)throw new O(M.da);e.position=e.n.I(e,t,n),e.eb=[]}function Xb(e,t,n,r,i,o){if(0>r||0>i)throw new O(M.u);if(0==(2097155&e.flags))throw new O(M.Z);if(16384==(61440&e.g.mode))throw new O(M.N);if(!e.n.write)throw new O(M.u);1024&e.flags&&Wb(e,0,2);var a=!0;if(void 0===i)i=e.position,a=!1;else if(!e.seekable)throw new O(M.da);t=e.n.write(e,t,n,r,i,o),a||(e.position+=t);try{e.path&&S.onWriteToFile&&S.onWriteToFile(e.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+e.message)}return t}function Yb(){O||((O=function(e,t){this.g=t,this.bb=function(e){for(var t in this.Q=e,M)if(M[t]===e){this.code=t;break}},this.bb(e),this.message=hb[e]}).prototype=Error(),O.prototype.constructor=O,[M.B].forEach((function(e){vb[e]=new O(e),vb[e].stack="<generic error, no stack>"})))}function $b(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}function ac(e,t,n,r){return Pb(e=N(("string"==typeof e?e:U(e))+"/"+t),$b(n,r))}function bc(e,t,n,r,i,o){if(i=Pb(e=t?N(("string"==typeof e?e:U(e))+"/"+t):e,r=$b(r,i)),n){if("string"==typeof n){e=Array(n.length),t=0;for(var a=n.length;t<a;++t)e[t]=n.charCodeAt(t);n=e}Sb(i,146|r),Xb(e=Tb(i,"w"),n,0,n.length,0,o),Vb(e),Sb(i,r)}return i}function W(e,t,n,r){e=N(("string"==typeof e?e:U(e))+"/"+t),t=$b(!!n,!!r),W.Da||(W.Da=64);var i=W.Da++<<8|0;return pb(i,{open:function(e){e.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,i){for(var o=0,a=0;a<i;a++){var s;try{s=n()}catch(e){throw new O(M.F)}if(void 0===s&&0===o)throw new O(M.oa);if(null==s)break;o++,t[r+a]=s}return o&&(e.g.timestamp=Date.now()),o},write:function(e,t,n,i){for(var o=0;o<i;o++)try{r(t[n+o])}catch(e){throw new O(M.F)}return i&&(e.g.timestamp=Date.now()),o}}),Qb(e,t,i)}function cc(t){if(t.Ca||t.Xa||t.link||t.e)return!0;var n=!0;if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!e.read)throw Error("Cannot load without read() or XMLHttpRequest.");try{t.e=Va(e.read(t.url),!0),t.o=t.e.length}catch(e){n=!1}return n||ib(M.F),n}var dc={},Hb,Mb,Ub,ec=0;function X(){return F[(ec+=4)-4>>2]}function fc(){var e;if(e=X(),!(e=zb[e]))throw new O(M.Z);return e}function wa(e){wa.C||(v=Ga(),wa.C=!0,assert(n.P),wa.Ra=n.P,n.P=function(){z("cannot dynamically allocate, sbrk now has control")});var t=v;return 0==e||wa.Ra(e)?t:4294967295}function hc(e,t){if(ic=e,jc=t,!kc)return 1;if(0==e)Y=function(){setTimeout(lc,t)},mc="timeout";else if(1==e)Y=function(){nc(lc)},mc="rAF";else if(2==e){if(!window.setImmediate){var n=[];window.addEventListener("message",(function(e){e.source===window&&"__emcc"===e.data&&(e.stopPropagation(),n.shift()())}),!0),window.setImmediate=function(e){n.push(e),window.postMessage("__emcc","*")}}Y=function(){window.setImmediate(lc)},mc="immediate"}return 0}function oc(t,r,i,o,a){e.noExitRuntime=!0,assert(!kc,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),kc=t,pc=o;var s=qc;if(lc=function(){if(!A)if(0<rc.length){var r=Date.now(),i=rc.shift();if(i.Qa(i.T),sc){var a=sc,l=0==a%1?a-1:Math.floor(a);sc=i.ld?l:(8*a+(l+.5))/9}console.log('main loop blocker "'+i.name+'" took '+(Date.now()-r)+" ms"),tc(),setTimeout(lc,0)}else s<qc||(uc=uc+1|0,1==ic&&1<jc&&0!=uc%jc?Y():("timeout"===mc&&e.fa&&(e.S("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),mc=""),vc((function(){void 0!==o?n.J("vi",t,[o]):n.J("v",t)})),s<qc||("object"==typeof SDL&&SDL.audio&&SDL.audio.Za&&SDL.audio.Za(),Y())))},a||(r&&0<r?hc(0,1e3/r):hc(1,1),Y()),i)throw"SimulateInfiniteLoop"}e._memcpy=gc;var Y=null,mc="",qc=0,kc=null,pc=0,ic=0,jc=0,uc=0,rc=[];function tc(){if(e.setStatus){var t=e.statusMessage||"Please wait...",n=sc,r=wc.nd;n?n<r?e.setStatus(t+" ("+(r-n)+"/"+r+")"):e.setStatus(t):e.setStatus("")}}function vc(t){if(!(A||e.preMainLoop&&!1===e.preMainLoop())){try{t()}catch(t){if(t instanceof xc)return;throw t&&"object"==typeof t&&t.stack&&e.S("exception thrown: "+[t,t.stack]),t}e.postMainLoop&&e.postMainLoop()}}var wc={},lc,sc,yc=!1,zc=!1,Ac=[];function Bc(){function t(){zc=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r||document.msPointerLockElement===r}if(e.preloadPlugins||(e.preloadPlugins=[]),!Cc){Cc=!0;try{Dc=!0}catch(e){Dc=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Ec="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Dc?null:console.log("warning: no BlobBuilder"),Fc="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,e.Ha||void 0!==Fc||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.Ha=!0),e.preloadPlugins.push({canHandle:function(t){return!e.Ha&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},handle:function(t,r,i,o){var a=null;if(Dc)try{(a=new Blob([t],{type:Gc(r)})).size!==t.length&&(a=new Blob([new Uint8Array(t).buffer],{type:Gc(r)}))}catch(e){n.M("Blob constructor present but fails: "+e+"; falling back to blob builder")}a||((a=new Ec).append(new Uint8Array(t).buffer),a=a.getBlob());var s=Fc.createObjectURL(a),l=new Image;l.onload=function(){assert(l.complete,"Image "+r+" could not be decoded");var n=document.createElement("canvas");n.width=l.width,n.height=l.height,n.getContext("2d").drawImage(l,0,0),e.preloadedImages[r]=n,Fc.revokeObjectURL(s),i&&i(t)},l.onerror=function(){console.log("Image "+s+" could not be decoded"),o&&o()},l.src=s}}),e.preloadPlugins.push({canHandle:function(t){return!e.zd&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(t,n,r,i){function o(i){s||(s=!0,e.preloadedAudios[n]=i,r&&r(t))}function a(){s||(s=!0,e.preloadedAudios[n]=new Audio,i&&i())}var s=!1;if(!Dc)return a();try{var l=new Blob([t],{type:Gc(n)})}catch(e){return a()}l=Fc.createObjectURL(l);var u=new Audio;u.addEventListener("canplaythrough",(function(){o(u)}),!1),u.onerror=function(){if(!s){console.log("warning: browser could not fully decode audio "+n+", trying slower base64 approach");for(var e="",r=0,i=0,a=0;a<t.length;a++)for(r=r<<8|t[a],i+=8;6<=i;){var l=r>>i-6&63;i=i-6,e=e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]}2==i?(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&r)<<4],e+="=="):4==i&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&r)<<2],e+="="),u.src="data:audio/x-"+n.substr(-3)+";base64,"+e,o(u)}},u.src=l,Hc((function(){o(u)}))}});var r=e.canvas;r&&(r.la=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock||r.msRequestPointerLock||function(){},r.wa=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},r.wa=r.wa.bind(document),document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("mspointerlockchange",t,!1),e.elementPointerLock&&r.addEventListener("click",(function(e){!zc&&r.la&&(r.la(),e.preventDefault())}),!1))}}function Ic(t,n,r,i){if(n&&e.fa&&t==e.canvas)return e.fa;var o,a;if(n){if(a={antialias:!1,alpha:!1},i)for(var s in i)a[s]=i[s];(a=GL.createContext(t,a))&&(o=GL.getContext(a).cd),t.style.backgroundColor="black"}else o=t.getContext("2d");return o?(r&&(n||assert("undefined"==typeof GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.fa=o,n&&GL.yd(a),e.Dd=n,Ac.forEach((function(e){e()})),Bc()),o):null}var Jc=!1,Kc=void 0,Lc=void 0;function Mc(t,n,r){function i(){yc=!1;var t=o.parentNode;(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===t?(o.ua=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen||document.exitFullscreen||function(){},o.ua=o.ua.bind(document),Kc&&o.la(),yc=!0,Lc&&Nc()):(t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t),Lc&&Oc()),e.onFullScreen&&e.onFullScreen(yc),Pc(o)}void 0===(Kc=t)&&(Kc=!0),void 0===(Lc=n)&&(Lc=!1),void 0===(Qc=r)&&(Qc=null);var o=e.canvas;Jc||(Jc=!0,document.addEventListener("fullscreenchange",i,!1),document.addEventListener("mozfullscreenchange",i,!1),document.addEventListener("webkitfullscreenchange",i,!1),document.addEventListener("MSFullscreenChange",i,!1));var a=document.createElement("div");o.parentNode.insertBefore(a,o),a.appendChild(o),a.C=a.requestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullScreen?function(){a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),r?a.C({Ed:r}):a.C()}var Rc=0;function Sc(e){var t=Date.now();if(0===Rc)Rc=t+1e3/60;else for(;t+2>=Rc;)Rc+=1e3/60;t=Math.max(Rc-t,0),setTimeout(e,t)}function nc(e){"undefined"==typeof window?Sc(e):(window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||Sc),window.requestAnimationFrame(e))}function Hc(t){e.noExitRuntime=!0,setTimeout((function(){A||t()}),1e4)}function Gc(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]}function Tc(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}function Uc(e,t,n){Tc(e,(function(n){assert(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),Za()}),(function(){if(!n)throw'Loading data file "'+e+'" failed.';n()})),Ya()}var Vc=[],Cc,Dc,Ec,Fc,Qc;function Wc(){var t=e.canvas;Vc.forEach((function(e){e(t.width,t.height)}))}function Nc(){if("undefined"!=typeof SDL){var e=Ia[SDL.screen+0*n.H>>2];F[SDL.screen+0*n.H>>2]=8388608|e}Wc()}function Oc(){if("undefined"!=typeof SDL){var e=Ia[SDL.screen+0*n.H>>2];F[SDL.screen+0*n.H>>2]=-8388609&e}Wc()}function Pc(t,n,r){n&&r?(t.fb=n,t.Va=r):(n=t.fb,r=t.Va);var i=n,o=r;if(e.forcedAspectRatio&&0<e.forcedAspectRatio&&(i/o<e.forcedAspectRatio?i=Math.round(o*e.forcedAspectRatio):o=Math.round(i/e.forcedAspectRatio)),(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===t.parentNode&&"undefined"!=typeof screen){var a=Math.min(screen.width/i,screen.height/o);i=Math.round(i*a),o=Math.round(o*a)}Lc?(t.width!=i&&(t.width=i),t.height!=o&&(t.height=o),void 0!==t.style&&(t.style.removeProperty("width"),t.style.removeProperty("height"))):(t.width!=n&&(t.width=n),t.height!=r&&(t.height=r),void 0!==t.style&&(i!=n||o!=r?(t.style.setProperty("width",i+"px","important"),t.style.setProperty("height",o+"px","important")):(t.style.removeProperty("width"),t.style.removeProperty("height"))))}Yb(),R=Array(4096),Nb(P,"/"),V("/tmp"),V("/home"),V("/home/web_user"),function(){var e;if(V("/dev"),pb(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),Qb("/dev/null",259),ob(1280,rb),ob(1536,sb),Qb("/dev/tty",1280),Qb("/dev/tty1",1536),"undefined"!=typeof crypto){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=function(){return 256*Math.random()|0};W("/dev","random",e),W("/dev","urandom",e),V("/dev/shm"),V("/dev/shm/tmp")}(),V("/proc"),V("/proc/self"),V("/proc/self/fd"),Nb({A:function(){var e=ub("/proc/self","fd",16895,73);return e.k={lookup:function(e,t){var n=zb[+t];if(!n)throw new O(M.Z);var r={parent:null,A:{Fa:"fake"},k:{readlink:function(){return n.path}}};return r.parent=r}},e}},"/proc/self/fd"),Qa.unshift((function(){if(!e.noFSInit&&!Zb){assert(!Zb,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Zb=!0,Yb(),e.stdin=e.stdin,e.stdout=e.stdout,e.stderr=e.stderr,e.stdin?W("/dev","stdin",e.stdin):Rb("/dev/tty","/dev/stdin"),e.stdout?W("/dev","stdout",null,e.stdout):Rb("/dev/tty","/dev/stdout"),e.stderr?W("/dev","stderr",null,e.stderr):Rb("/dev/tty1","/dev/stderr");var t=Tb("/dev/stdin","r");assert(0===t.fd,"invalid handle for stdin ("+t.fd+")"),assert(1===(t=Tb("/dev/stdout","w")).fd,"invalid handle for stdout ("+t.fd+")"),assert(2===(t=Tb("/dev/stderr","w")).fd,"invalid handle for stderr ("+t.fd+")")}})),Ra.push((function(){Cb=!1})),K.push((function(){Zb=!1;var t=e._fflush;for(t&&t(0),t=0;t<zb.length;t++){var n=zb[t];n&&Vb(n)}})),e.FS_createFolder=function(e,t,n,r){return V(e=N(("string"==typeof e?e:U(e))+"/"+t),$b(n,r))},e.FS_createPath=function(e,t){e="string"==typeof e?e:U(e);for(var n=t.split("/").reverse();n.length;){var r=n.pop();if(r){var i=N(e+"/"+r);try{V(i)}catch(e){}e=i}}return i},e.FS_createDataFile=bc,e.FS_createPreloadedFile=function(t,n,r,i,o,a,s,l,u,c){function d(r){function d(e){c&&c(),l||bc(t,n,e,i,o,u),a&&a(),Za()}var f=!1;e.preloadPlugins.forEach((function(e){!f&&e.canHandle(p)&&(e.handle(r,p,d,(function(){s&&s(),Za()})),f=!0)})),f||d(r)}Bc();var p=n?mb(N(t+"/"+n)):t;Ya(),"string"==typeof r?Uc(r,(function(e){d(e)}),s):d(r)},e.FS_createLazyFile=function(e,t,n,r,i){if("undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";n={Ca:!1,url:n};var o=ac(e,t,r,i);n.e?o.e=n.e:n.url&&(o.e=null,o.url=n.url),Object.defineProperty(o,"usedBytes",{get:function(){return this.e.length}});var a={};return Object.keys(o.n).forEach((function(e){var t=o.n[e];a[e]=function(){if(!cc(o))throw new O(M.F);return t.apply(null,arguments)}})),a.read=function(e,t,n,r,i){if(!cc(o))throw new O(M.F);if(i>=(e=e.g.e).length)return 0;if(assert(0<=(r=Math.min(e.length-i,r))),e.slice)for(var a=0;a<r;a++)t[n+a]=e[i+a];else for(a=0;a<r;a++)t[n+a]=e.get(i+a);return r},o.n=a,o},e.FS_createLink=function(e,t,n){return Rb(n,e=N(("string"==typeof e?e:U(e))+"/"+t))},e.FS_createDevice=W,e.FS_unlink=function(e){var t,n=T(e,{parent:!0}).g,r=lb(e),i=wb(n,r);e:{try{t=wb(n,r)}catch(e){t=e.Q;break e}var o=Gb(n,"wx");t=o||(16384==(61440&t.mode)?M.N:0)}if(t)throw t===M.N&&(t=M.G),new O(t);if(!n.k.unlink)throw new O(M.G);if(i.R)throw new O(M.$);try{S.willDeletePath&&S.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}if(n.k.unlink(n,r),n=Eb(i.parent.id,i.name),R[n]===i)R[n]=i.K;else for(n=R[n];n;){if(n.K===i){n.K=i.K;break}n=n.K}try{S.onDeletePath&&S.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},Qa.unshift((function(){})),K.push((function(){})),e.requestFullScreen=function(e,t,n){Mc(e,t,n)},e.requestAnimationFrame=function(e){nc(e)},e.setCanvasSize=function(t,n,r){Pc(e.canvas,t,n),r||Wc()},e.pauseMainLoop=function(){Y=null,qc++},e.resumeMainLoop=function(){qc++;var e=ic,t=jc,n=kc;kc=null,oc(n,0,!1,pc,!0),hc(e,t),Y()},e.getUserMedia=function(){window.C||(window.C=navigator.getUserMedia||navigator.mozGetUserMedia),window.C(void 0)},e.createContext=function(e,t,n,r){return Ic(e,t,n,r)},Ka=m=n.ea(p),va=!0,La=Ka+Na,Ma=v=n.ea(La),assert(Ma<w,"TOTAL_MEMORY not big enough for stack");var Xc=G([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",3);e.Na={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},e.Oa={abort:z,assert,invoke_ii:function(t,n){try{return e.dynCall_ii(t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Z.setThrew(1,0)}},invoke_iiii:function(t,n,r,i){try{return e.dynCall_iiii(t,n,r,i)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Z.setThrew(1,0)}},invoke_vi:function(t,n){try{e.dynCall_vi(t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Z.setThrew(1,0)}},_pthread_cleanup_pop:function(){assert(eb.level==K.length,"cannot pop if something else added meanwhile!"),K.pop(),eb.level=K.length},___lock:function(){},_emscripten_set_main_loop:oc,_pthread_self:function(){return 0},___syscall6:function(e,t){ec=t;try{return Vb(fc()),0}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},_emscripten_set_main_loop_timing:hc,_abort:function(){e.abort()},_sbrk:wa,_time:function(e){var t=Date.now()/1e3|0;return e&&(F[e>>2]=t),t},___setErrNo:ib,_emscripten_memcpy_big:function(e,t,n){return H.set(H.subarray(t,t+n),e),e},___syscall54:function(e,t){ec=t;try{var n=fc(),r=X();switch(r){case 21505:case 21506:return n.tty?0:-M.O;case 21519:if(!n.tty)return-M.O;var i=X();return F[i>>2]=0;case 21520:return n.tty?-M.u:-M.O;case 21531:if(i=X(),!n.n.Wa)throw new O(M.O);return n.n.Wa(n,r,i);default:z("bad ioctl syscall "+r)}}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},___unlock:function(){},___syscall140:function(e,t){ec=t;try{var n=fc(),r=X(),i=X(),o=X(),a=X();return assert(0===r),Wb(n,i,a),F[o>>2]=n.position,n.ia&&0===i&&0===a&&(n.ia=null),0}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},_pthread_cleanup_push:eb,_sysconf:function(e){switch(e){case 30:return 4096;case 85:return I/4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return ib(M.u),-1},___syscall146:function(e,t){ec=t;try{var n,r=fc(),i=X();e:{for(var o=X(),a=0,s=0;s<o;s++){var l=Xb(r,D,F[i+8*s>>2],F[i+(8*s+4)>>2],void 0);if(0>l){n=-1;break e}a+=l}n=a}return n}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},STACKTOP:m,STACK_MAX:La,tempDoublePtr:$a,ABORT:A,cttz_i8:Xc};var Z=function(e,t,n){var r=new e.Int8Array(n),i=(new e.Int16Array(n),new e.Int32Array(n)),o=new e.Uint8Array(n),a=(new e.Uint16Array(n),new e.Uint32Array(n),new e.Float32Array(n),new e.Float64Array(n),0|t.STACKTOP),s=(t.STACK_MAX,t.tempDoublePtr,t.ABORT,t.cttz_i8,0),l=(e.NaN,e.Infinity,0),u=(e.Math.floor,e.Math.abs,e.Math.sqrt,e.Math.pow,e.Math.cos,e.Math.sin,e.Math.tan,e.Math.acos,e.Math.asin,e.Math.atan,e.Math.atan2,e.Math.exp,e.Math.log,e.Math.ceil,e.Math.imul),c=(e.Math.min,e.Math.clz32,t.abort),d=(t.assert,t.invoke_ii,t.invoke_iiii,t.invoke_vi,t._pthread_cleanup_pop),p=t.___lock,f=(t._emscripten_set_main_loop,t._pthread_self),_=t.___syscall6,g=(t._emscripten_set_main_loop_timing,t._abort),h=t._sbrk,A=t._time,m=(t.___setErrNo,t._emscripten_memcpy_big),E=t.___syscall54,y=t.___unlock,S=t.___syscall140,v=t._pthread_cleanup_push,I=t._sysconf,T=t.___syscall146;function b(e,t,n){e|=0;var r,o=0,s=0,u=0,c=0,d=0,p=0,f=0,_=0,g=0,h=0,A=0;r=a,a=a+160|0,M(o=r,t|=0,n|=0),t=0|i[(n=o+144|0)>>2],s=0|i[n+4>>2],c=0|i[(u=n=o+64|0)>>2],d=0|i[u+4>>2],u=0|F(0|t,0|s,18,0),p=l,f=0|k(0|c,0|d,0|t,0|s),s=0|k(0|f,0|l,0|u,0|p),i[(p=n)>>2]=s,i[p+4>>2]=l,s=0|i[(p=o+136|0)>>2],n=0|i[p+4>>2],f=0|i[(u=p=o+56|0)>>2],t=0|i[u+4>>2],u=0|F(0|s,0|n,18,0),d=l,c=0|k(0|f,0|t,0|s,0|n),n=0|k(0|c,0|l,0|u,0|d),i[(d=p)>>2]=n,i[d+4>>2]=l,n=0|i[(d=o+128|0)>>2],p=0|i[d+4>>2],c=0|i[(u=d=o+48|0)>>2],s=0|i[u+4>>2],u=0|F(0|n,0|p,18,0),t=l,f=0|k(0|c,0|s,0|n,0|p),p=0|k(0|f,0|l,0|u,0|t),i[(t=d)>>2]=p,i[t+4>>2]=l,p=0|i[(t=o+120|0)>>2],d=0|i[t+4>>2],f=0|i[(u=t=o+40|0)>>2],n=0|i[u+4>>2],u=0|F(0|p,0|d,18,0),s=l,c=0|k(0|f,0|n,0|p,0|d),d=0|k(0|c,0|l,0|u,0|s),i[(s=t)>>2]=d,i[s+4>>2]=l,d=0|i[(s=o+112|0)>>2],t=0|i[s+4>>2],c=0|i[(u=s=o+32|0)>>2],p=0|i[u+4>>2],u=0|F(0|d,0|t,18,0),n=l,f=0|k(0|c,0|p,0|d,0|t),t=0|k(0|f,0|l,0|u,0|n),i[(n=s)>>2]=t,i[n+4>>2]=l,t=0|i[(n=o+104|0)>>2],s=0|i[n+4>>2],f=0|i[(u=n=o+24|0)>>2],d=0|i[u+4>>2],u=0|F(0|t,0|s,18,0),p=l,c=0|k(0|f,0|d,0|t,0|s),s=0|k(0|c,0|l,0|u,0|p),i[(p=n)>>2]=s,i[p+4>>2]=l,s=0|i[(p=o+96|0)>>2],n=0|i[p+4>>2],c=0|i[(u=p=o+16|0)>>2],t=0|i[u+4>>2],u=0|F(0|s,0|n,18,0),d=l,f=0|k(0|c,0|t,0|s,0|n),n=0|k(0|f,0|l,0|u,0|d),i[(d=p)>>2]=n,i[d+4>>2]=l,n=0|i[(d=o+88|0)>>2],p=0|i[d+4>>2],f=0|i[(u=d=o+8|0)>>2],s=0|i[u+4>>2],u=0|F(0|n,0|p,18,0),t=l,c=0|k(0|f,0|s,0|n,0|p),p=0|k(0|c,0|l,0|u,0|t),i[(t=d)>>2]=p,i[t+4>>2]=l,u=0|i[(p=t=o+80|0)>>2],c=0|i[p+4>>2],n=0|i[(p=o)>>2],s=0|i[p+4>>2],p=0|F(0|u,0|c,18,0),f=l,_=0|k(0|n,0|s,0|u,0|c),c=0|k(0|_,0|l,0|p,0|f),f=l,i[(p=o)>>2]=c,i[p+4>>2]=f,i[(p=t)>>2]=0,i[p+4>>2]=0,p=f,f=c,c=0;do{n=0|B(0|f,0|p,0|(s=0|x(0|(u=0|L(0|(_=0|k(p>>31>>>6|0,0,0|f,0|p)),0|l,26)),0|(_=l),26)),0|l),i[(s=o+(c<<3)|0)>>2]=n,i[s+4>>2]=l,A=0|B(0|(g=0|k(0|u,0|_,0|i[(n=s=o+((1|c)<<3)|0)>>2],0|i[n+4>>2])),0|(n=l),0|(h=0|x(0|(u=0|L(0|(_=0|k(n>>31>>>7|0,0,0|g,0|n)),0|l,25)),0|(_=l),25)),0|l),i[(h=s)>>2]=A,i[h+4>>2]=l,f=0|k(0|u,0|_,0|i[(A=h=o+((c=c+2|0)<<3)|0)>>2],0|i[A+4>>2]),p=l,i[(A=h)>>2]=f,i[A+4>>2]=p}while(c>>>0<10);p=0|i[(c=t)>>2],f=0|i[c+4>>2],A=0|i[(c=o)>>2],h=0|i[c+4>>2],c=0|F(0|p,0|f,18,0),_=l,u=0|k(0|A,0|h,0|p,0|f),f=0|k(0|u,0|l,0|c,0|_),_=l,i[(c=t)>>2]=0,i[c+4>>2]=0,p=0|B(0|f,0|_,0|(u=0|x(0|(t=0|L(0|(c=0|k(_>>31>>>6|0,0,0|f,0|_)),0|l,26)),0|(c=l),26)),0|l),i[(u=o)>>2]=p,i[u+4>>2]=l,p=0|k(0|t,0|c,0|i[(u=d)>>2],0|i[u+4>>2]),i[(u=d)>>2]=p,i[u+4>>2]=l,u=e,e=o,o=u+80|0;do{i[u>>2]=i[e>>2],u=u+4|0,e=e+4|0}while((0|u)<(0|o));a=r}function M(e,t,n){e|=0,n|=0;var r=0,o=0,a=0,s=0,u=0,c=0,d=0,p=0,f=0,_=0,g=0,h=0,A=0,m=0,E=0,y=0,S=0,v=0,I=0,T=0,b=0,M=0,P=0;r=0|L(0,0|i[(t|=0)>>2],32),o=l,s=0|F(0|(a=0|L(0,0|i[n>>2],32)),0|l,0|r,0|o),i[(o=e)>>2]=s,i[o+4>>2]=l,o=0|L(0,0|i[t>>2],32),s=l,u=0|F(0|(a=0|L(0,0|i[(r=n+8|0)>>2],32)),0|l,0|o,0|s),s=l,a=0|L(0,0|i[(o=t+8|0)>>2],32),c=l,c=0|k(0|(p=0|F(0|(d=0|L(0,0|i[n>>2],32)),0|l,0|a,0|c)),0|l,0|u,0|s),i[(s=e+8|0)>>2]=c,i[s+4>>2]=l,s=0|L(0,0|i[o>>2],31),c=l,p=0|F(0|(u=0|L(0,0|i[r>>2],32)),0|l,0|s,0|c),c=l,s=0|L(0,0|i[t>>2],32),u=l,u=0|k(0|(f=0|F(0|(d=0|L(0,0|i[(a=n+16|0)>>2],32)),0|l,0|s,0|u)),0|l,0|p,0|c),c=l,f=0|L(0,0|i[(p=t+16|0)>>2],32),s=l,s=0|k(0|u,0|c,0|(_=0|F(0|(d=0|L(0,0|i[n>>2],32)),0|l,0|f,0|s)),0|l),i[(_=e+16|0)>>2]=s,i[_+4>>2]=l,_=0|L(0,0|i[o>>2],32),s=l,u=0|F(0|(c=0|L(0,0|i[a>>2],32)),0|l,0|_,0|s),s=l,_=0|L(0,0|i[p>>2],32),c=l,c=0|k(0|(d=0|F(0|(f=0|L(0,0|i[r>>2],32)),0|l,0|_,0|c)),0|l,0|u,0|s),s=l,u=0|L(0,0|i[t>>2],32),d=l,d=0|k(0|c,0|s,0|(g=0|F(0|(f=0|L(0,0|i[(_=n+24|0)>>2],32)),0|l,0|u,0|d)),0|l),g=l,c=0|L(0,0|i[(s=t+24|0)>>2],32),u=l,u=0|k(0|d,0|g,0|(h=0|F(0|(f=0|L(0,0|i[n>>2],32)),0|l,0|c,0|u)),0|l),i[(h=e+24|0)>>2]=u,i[h+4>>2]=l,h=0|L(0,0|i[p>>2],32),u=l,d=0|F(0|(g=0|L(0,0|i[a>>2],32)),0|l,0|h,0|u),u=l,h=0|L(0,0|i[o>>2],32),g=l,f=0|F(0|(c=0|L(0,0|i[_>>2],32)),0|l,0|h,0|g),g=l,h=0|L(0,0|i[s>>2],32),c=l,c=0|k(0|(m=0|F(0|(A=0|L(0,0|i[r>>2],32)),0|l,0|h,0|c)),0|l,0|f,0|g),c=0|k(0|(g=0|x(0|c,0|l,1)),0|l,0|d,0|u),u=l,d=0|L(0,0|i[t>>2],32),g=l,g=0|k(0|c,0|u,0|(h=0|F(0|(m=0|L(0,0|i[(f=n+32|0)>>2],32)),0|l,0|d,0|g)),0|l),h=l,c=0|L(0,0|i[(u=t+32|0)>>2],32),d=l,d=0|k(0|g,0|h,0|(A=0|F(0|(m=0|L(0,0|i[n>>2],32)),0|l,0|c,0|d)),0|l),i[(A=e+32|0)>>2]=d,i[A+4>>2]=l,A=0|L(0,0|i[p>>2],32),d=l,g=0|F(0|(h=0|L(0,0|i[_>>2],32)),0|l,0|A,0|d),d=l,A=0|L(0,0|i[s>>2],32),h=l,h=0|k(0|(m=0|F(0|(c=0|L(0,0|i[a>>2],32)),0|l,0|A,0|h)),0|l,0|g,0|d),d=l,g=0|L(0,0|i[o>>2],32),m=l,m=0|k(0|h,0|d,0|(c=0|F(0|(A=0|L(0,0|i[f>>2],32)),0|l,0|g,0|m)),0|l),c=l,d=0|L(0,0|i[u>>2],32),h=l,h=0|k(0|m,0|c,0|(A=0|F(0|(g=0|L(0,0|i[r>>2],32)),0|l,0|d,0|h)),0|l),A=l,c=0|L(0,0|i[t>>2],32),m=l,m=0|k(0|h,0|A,0|(E=0|F(0|(g=0|L(0,0|i[(d=n+40|0)>>2],32)),0|l,0|c,0|m)),0|l),E=l,h=0|L(0,0|i[(A=t+40|0)>>2],32),c=l,c=0|k(0|m,0|E,0|(y=0|F(0|(g=0|L(0,0|i[n>>2],32)),0|l,0|h,0|c)),0|l),i[(y=e+40|0)>>2]=c,i[y+4>>2]=l,y=0|L(0,0|i[s>>2],32),c=l,m=0|F(0|(E=0|L(0,0|i[_>>2],32)),0|l,0|y,0|c),c=l,y=0|L(0,0|i[o>>2],32),E=l,E=0|k(0|(g=0|F(0|(h=0|L(0,0|i[d>>2],32)),0|l,0|y,0|E)),0|l,0|m,0|c),c=l,m=0|L(0,0|i[A>>2],32),g=l,h=0|x(0|(g=0|k(0|E,0|c,0|(h=0|F(0|(y=0|L(0,0|i[r>>2],32)),0|l,0|m,0|g)),0|l)),0|l,1),g=l,c=0|L(0,0|i[p>>2],32),E=l,E=0|k(0|h,0|g,0|(y=0|F(0|(m=0|L(0,0|i[f>>2],32)),0|l,0|c,0|E)),0|l),y=l,g=0|L(0,0|i[u>>2],32),h=l,h=0|k(0|E,0|y,0|(m=0|F(0|(c=0|L(0,0|i[a>>2],32)),0|l,0|g,0|h)),0|l),m=l,y=0|L(0,0|i[t>>2],32),E=l,E=0|k(0|h,0|m,0|(S=0|F(0|(c=0|L(0,0|i[(g=n+48|0)>>2],32)),0|l,0|y,0|E)),0|l),S=l,h=0|L(0,0|i[(m=t+48|0)>>2],32),y=l,y=0|k(0|E,0|S,0|(v=0|F(0|(c=0|L(0,0|i[n>>2],32)),0|l,0|h,0|y)),0|l),i[(v=e+48|0)>>2]=y,i[v+4>>2]=l,v=0|L(0,0|i[s>>2],32),y=l,E=0|F(0|(S=0|L(0,0|i[f>>2],32)),0|l,0|v,0|y),y=l,v=0|L(0,0|i[u>>2],32),S=l,S=0|k(0|(c=0|F(0|(h=0|L(0,0|i[_>>2],32)),0|l,0|v,0|S)),0|l,0|E,0|y),y=l,E=0|L(0,0|i[p>>2],32),c=l,c=0|k(0|S,0|y,0|(h=0|F(0|(v=0|L(0,0|i[d>>2],32)),0|l,0|E,0|c)),0|l),h=l,y=0|L(0,0|i[A>>2],32),S=l,S=0|k(0|c,0|h,0|(v=0|F(0|(E=0|L(0,0|i[a>>2],32)),0|l,0|y,0|S)),0|l),v=l,h=0|L(0,0|i[o>>2],32),c=l,c=0|k(0|S,0|v,0|(E=0|F(0|(y=0|L(0,0|i[g>>2],32)),0|l,0|h,0|c)),0|l),E=l,v=0|L(0,0|i[m>>2],32),S=l,S=0|k(0|c,0|E,0|(y=0|F(0|(h=0|L(0,0|i[r>>2],32)),0|l,0|v,0|S)),0|l),y=l,E=0|L(0,0|i[t>>2],32),c=l,c=0|k(0|S,0|y,0|(I=0|F(0|(h=0|L(0,0|i[(v=n+56|0)>>2],32)),0|l,0|E,0|c)),0|l),I=l,S=0|L(0,0|i[(y=t+56|0)>>2],32),E=l,E=0|k(0|c,0|I,0|(T=0|F(0|(h=0|L(0,0|i[n>>2],32)),0|l,0|S,0|E)),0|l),i[(T=e+56|0)>>2]=E,i[T+4>>2]=l,T=0|L(0,0|i[u>>2],32),E=l,c=0|F(0|(I=0|L(0,0|i[f>>2],32)),0|l,0|T,0|E),E=l,T=0|L(0,0|i[s>>2],32),I=l,h=0|F(0|(S=0|L(0,0|i[d>>2],32)),0|l,0|T,0|I),I=l,T=0|L(0,0|i[A>>2],32),S=l,S=0|k(0|(M=0|F(0|(b=0|L(0,0|i[_>>2],32)),0|l,0|T,0|S)),0|l,0|h,0|I),I=l,h=0|L(0,0|i[o>>2],32),M=l,M=0|k(0|S,0|I,0|(b=0|F(0|(T=0|L(0,0|i[v>>2],32)),0|l,0|h,0|M)),0|l),b=l,I=0|L(0,0|i[y>>2],32),S=l,S=0|k(0|M,0|b,0|(T=0|F(0|(h=0|L(0,0|i[r>>2],32)),0|l,0|I,0|S)),0|l),S=0|k(0|(T=0|x(0|S,0|l,1)),0|l,0|c,0|E),E=l,c=0|L(0,0|i[p>>2],32),T=l,T=0|k(0|S,0|E,0|(M=0|F(0|(b=0|L(0,0|i[g>>2],32)),0|l,0|c,0|T)),0|l),M=l,E=0|L(0,0|i[m>>2],32),S=l,S=0|k(0|T,0|M,0|(b=0|F(0|(c=0|L(0,0|i[a>>2],32)),0|l,0|E,0|S)),0|l),b=l,M=0|L(0,0|i[t>>2],32),T=l,T=0|k(0|S,0|b,0|(I=0|F(0|(c=0|L(0,0|i[(E=n+64|0)>>2],32)),0|l,0|M,0|T)),0|l),I=l,S=0|L(0,0|i[(b=t+64|0)>>2],32),M=l,M=0|k(0|T,0|I,0|(h=0|F(0|(c=0|L(0,0|i[n>>2],32)),0|l,0|S,0|M)),0|l),i[(h=e+64|0)>>2]=M,i[h+4>>2]=l,h=0|L(0,0|i[u>>2],32),M=l,T=0|F(0|(I=0|L(0,0|i[d>>2],32)),0|l,0|h,0|M),M=l,h=0|L(0,0|i[A>>2],32),I=l,I=0|k(0|(c=0|F(0|(S=0|L(0,0|i[f>>2],32)),0|l,0|h,0|I)),0|l,0|T,0|M),M=l,T=0|L(0,0|i[s>>2],32),c=l,c=0|k(0|I,0|M,0|(S=0|F(0|(h=0|L(0,0|i[g>>2],32)),0|l,0|T,0|c)),0|l),S=l,M=0|L(0,0|i[m>>2],32),I=l,I=0|k(0|c,0|S,0|(h=0|F(0|(T=0|L(0,0|i[_>>2],32)),0|l,0|M,0|I)),0|l),h=l,S=0|L(0,0|i[p>>2],32),c=l,c=0|k(0|I,0|h,0|(T=0|F(0|(M=0|L(0,0|i[v>>2],32)),0|l,0|S,0|c)),0|l),T=l,h=0|L(0,0|i[y>>2],32),I=l,I=0|k(0|c,0|T,0|(M=0|F(0|(S=0|L(0,0|i[a>>2],32)),0|l,0|h,0|I)),0|l),M=l,T=0|L(0,0|i[o>>2],32),c=l,c=0|k(0|I,0|M,0|(S=0|F(0|(h=0|L(0,0|i[E>>2],32)),0|l,0|T,0|c)),0|l),S=l,M=0|L(0,0|i[b>>2],32),I=l,I=0|k(0|c,0|S,0|(h=0|F(0|(T=0|L(0,0|i[r>>2],32)),0|l,0|M,0|I)),0|l),h=l,S=0|L(0,0|i[t>>2],32),c=l,c=0|k(0|I,0|h,0|(P=0|F(0|(T=0|L(0,0|i[(M=n+72|0)>>2],32)),0|l,0|S,0|c)),0|l),P=l,t=0|L(0,0|i[(h=t+72|0)>>2],32),I=l,I=0|k(0|c,0|P,0|(n=0|F(0|(S=0|L(0,0|i[n>>2],32)),0|l,0|t,0|I)),0|l),i[(n=e+72|0)>>2]=I,i[n+4>>2]=l,n=0|L(0,0|i[A>>2],32),I=l,c=0|F(0|(P=0|L(0,0|i[d>>2],32)),0|l,0|n,0|I),I=l,n=0|L(0,0|i[s>>2],32),P=l,P=0|k(0|(S=0|F(0|(t=0|L(0,0|i[v>>2],32)),0|l,0|n,0|P)),0|l,0|c,0|I),I=l,c=0|L(0,0|i[y>>2],32),S=l,S=0|k(0|P,0|I,0|(t=0|F(0|(n=0|L(0,0|i[_>>2],32)),0|l,0|c,0|S)),0|l),t=l,I=0|L(0,0|i[o>>2],32),o=l,o=0|k(0|S,0|t,0|(c=0|F(0|(P=0|L(0,0|i[M>>2],32)),0|l,0|I,0|o)),0|l),c=l,t=0|L(0,0|i[h>>2],32),S=l,r=0|x(0|(S=0|k(0|o,0|c,0|(r=0|F(0|(I=0|L(0,0|i[r>>2],32)),0|l,0|t,0|S)),0|l)),0|l,1),S=l,c=0|L(0,0|i[u>>2],32),o=l,o=0|k(0|r,0|S,0|(I=0|F(0|(t=0|L(0,0|i[g>>2],32)),0|l,0|c,0|o)),0|l),I=l,S=0|L(0,0|i[m>>2],32),r=l,r=0|k(0|o,0|I,0|(t=0|F(0|(c=0|L(0,0|i[f>>2],32)),0|l,0|S,0|r)),0|l),t=l,I=0|L(0,0|i[p>>2],32),o=l,o=0|k(0|r,0|t,0|(c=0|F(0|(S=0|L(0,0|i[E>>2],32)),0|l,0|I,0|o)),0|l),c=l,t=0|L(0,0|i[b>>2],32),r=l,r=0|k(0|o,0|c,0|(S=0|F(0|(I=0|L(0,0|i[a>>2],32)),0|l,0|t,0|r)),0|l),i[(S=e+80|0)>>2]=r,i[S+4>>2]=l,S=0|L(0,0|i[A>>2],32),r=l,o=0|F(0|(c=0|L(0,0|i[g>>2],32)),0|l,0|S,0|r),r=l,S=0|L(0,0|i[m>>2],32),c=l,c=0|k(0|(I=0|F(0|(t=0|L(0,0|i[d>>2],32)),0|l,0|S,0|c)),0|l,0|o,0|r),r=l,o=0|L(0,0|i[u>>2],32),I=l,I=0|k(0|c,0|r,0|(t=0|F(0|(S=0|L(0,0|i[v>>2],32)),0|l,0|o,0|I)),0|l),t=l,r=0|L(0,0|i[y>>2],32),c=l,c=0|k(0|I,0|t,0|(S=0|F(0|(o=0|L(0,0|i[f>>2],32)),0|l,0|r,0|c)),0|l),S=l,t=0|L(0,0|i[s>>2],32),I=l,I=0|k(0|c,0|S,0|(o=0|F(0|(r=0|L(0,0|i[E>>2],32)),0|l,0|t,0|I)),0|l),o=l,S=0|L(0,0|i[b>>2],32),c=l,c=0|k(0|I,0|o,0|(r=0|F(0|(t=0|L(0,0|i[_>>2],32)),0|l,0|S,0|c)),0|l),r=l,o=0|L(0,0|i[p>>2],32),p=l,p=0|k(0|c,0|r,0|(S=0|F(0|(I=0|L(0,0|i[M>>2],32)),0|l,0|o,0|p)),0|l),S=l,r=0|L(0,0|i[h>>2],32),c=l,c=0|k(0|p,0|S,0|(a=0|F(0|(o=0|L(0,0|i[a>>2],32)),0|l,0|r,0|c)),0|l),i[(a=e+88|0)>>2]=c,i[a+4>>2]=l,a=0|L(0,0|i[m>>2],32),c=l,p=0|F(0|(S=0|L(0,0|i[g>>2],32)),0|l,0|a,0|c),c=l,a=0|L(0,0|i[A>>2],32),S=l,o=0|F(0|(r=0|L(0,0|i[v>>2],32)),0|l,0|a,0|S),S=l,a=0|L(0,0|i[y>>2],32),r=l,r=0|k(0|(t=0|F(0|(I=0|L(0,0|i[d>>2],32)),0|l,0|a,0|r)),0|l,0|o,0|S),S=l,o=0|L(0,0|i[s>>2],32),s=l,s=0|k(0|r,0|S,0|(a=0|F(0|(t=0|L(0,0|i[M>>2],32)),0|l,0|o,0|s)),0|l),a=l,S=0|L(0,0|i[h>>2],32),r=l,r=0|k(0|s,0|a,0|(_=0|F(0|(o=0|L(0,0|i[_>>2],32)),0|l,0|S,0|r)),0|l),r=0|k(0|(_=0|x(0|r,0|l,1)),0|l,0|p,0|c),c=l,p=0|L(0,0|i[u>>2],32),_=l,_=0|k(0|r,0|c,0|(s=0|F(0|(a=0|L(0,0|i[E>>2],32)),0|l,0|p,0|_)),0|l),s=l,c=0|L(0,0|i[b>>2],32),r=l,r=0|k(0|_,0|s,0|(a=0|F(0|(p=0|L(0,0|i[f>>2],32)),0|l,0|c,0|r)),0|l),i[(a=e+96|0)>>2]=r,i[a+4>>2]=l,a=0|L(0,0|i[m>>2],32),r=l,_=0|F(0|(s=0|L(0,0|i[v>>2],32)),0|l,0|a,0|r),r=l,a=0|L(0,0|i[y>>2],32),s=l,s=0|k(0|(p=0|F(0|(c=0|L(0,0|i[g>>2],32)),0|l,0|a,0|s)),0|l,0|_,0|r),r=l,_=0|L(0,0|i[A>>2],32),p=l,p=0|k(0|s,0|r,0|(c=0|F(0|(a=0|L(0,0|i[E>>2],32)),0|l,0|_,0|p)),0|l),c=l,r=0|L(0,0|i[b>>2],32),s=l,s=0|k(0|p,0|c,0|(a=0|F(0|(_=0|L(0,0|i[d>>2],32)),0|l,0|r,0|s)),0|l),a=l,c=0|L(0,0|i[u>>2],32),u=l,u=0|k(0|s,0|a,0|(r=0|F(0|(p=0|L(0,0|i[M>>2],32)),0|l,0|c,0|u)),0|l),r=l,a=0|L(0,0|i[h>>2],32),s=l,s=0|k(0|u,0|r,0|(f=0|F(0|(c=0|L(0,0|i[f>>2],32)),0|l,0|a,0|s)),0|l),i[(f=e+104|0)>>2]=s,i[f+4>>2]=l,f=0|L(0,0|i[y>>2],32),s=l,u=0|F(0|(r=0|L(0,0|i[v>>2],32)),0|l,0|f,0|s),s=l,f=0|L(0,0|i[A>>2],32),A=l,A=0|k(0|(a=0|F(0|(r=0|L(0,0|i[M>>2],32)),0|l,0|f,0|A)),0|l,0|u,0|s),s=l,u=0|L(0,0|i[h>>2],32),a=l,d=0|x(0|(a=0|k(0|A,0|s,0|(d=0|F(0|(f=0|L(0,0|i[d>>2],32)),0|l,0|u,0|a)),0|l)),0|l,1),a=l,s=0|L(0,0|i[m>>2],32),A=l,A=0|k(0|d,0|a,0|(f=0|F(0|(u=0|L(0,0|i[E>>2],32)),0|l,0|s,0|A)),0|l),f=l,a=0|L(0,0|i[b>>2],32),d=l,d=0|k(0|A,0|f,0|(u=0|F(0|(s=0|L(0,0|i[g>>2],32)),0|l,0|a,0|d)),0|l),i[(u=e+112|0)>>2]=d,i[u+4>>2]=l,u=0|L(0,0|i[y>>2],32),d=l,A=0|F(0|(f=0|L(0,0|i[E>>2],32)),0|l,0|u,0|d),d=l,u=0|L(0,0|i[b>>2],32),f=l,f=0|k(0|(s=0|F(0|(a=0|L(0,0|i[v>>2],32)),0|l,0|u,0|f)),0|l,0|A,0|d),d=l,A=0|L(0,0|i[m>>2],32),m=l,m=0|k(0|f,0|d,0|(u=0|F(0|(s=0|L(0,0|i[M>>2],32)),0|l,0|A,0|m)),0|l),u=l,d=0|L(0,0|i[h>>2],32),f=l,f=0|k(0|m,0|u,0|(g=0|F(0|(A=0|L(0,0|i[g>>2],32)),0|l,0|d,0|f)),0|l),i[(g=e+120|0)>>2]=f,i[g+4>>2]=l,g=0|L(0,0|i[b>>2],32),f=l,m=0|F(0|(u=0|L(0,0|i[E>>2],32)),0|l,0|g,0|f),f=l,g=0|L(0,0|i[y>>2],32),y=l,d=0|F(0|(u=0|L(0,0|i[M>>2],32)),0|l,0|g,0|y),y=l,g=0|L(0,0|i[h>>2],32),u=l,u=0|k(0|(v=0|F(0|(A=0|L(0,0|i[v>>2],32)),0|l,0|g,0|u)),0|l,0|d,0|y),u=0|k(0|(y=0|x(0|u,0|l,1)),0|l,0|m,0|f),i[(f=e+128|0)>>2]=u,i[f+4>>2]=l,f=0|L(0,0|i[b>>2],32),b=l,m=0|F(0|(u=0|L(0,0|i[M>>2],32)),0|l,0|f,0|b),b=l,f=0|L(0,0|i[h>>2],32),u=l,u=0|k(0|(E=0|F(0|(y=0|L(0,0|i[E>>2],32)),0|l,0|f,0|u)),0|l,0|m,0|b),i[(b=e+136|0)>>2]=u,i[b+4>>2]=l,b=0|L(0,0|i[h>>2],31),h=l,M=0|F(0|(u=0|L(0,0|i[M>>2],32)),0|l,0|b,0|h),i[(h=e+144|0)>>2]=M,i[h+4>>2]=l}function P(e,t){e|=0;var n,r,o,s=0,u=0,c=0,d=0,p=0,f=0,_=0,g=0,h=0,A=0,m=0,E=0,y=0,S=0,v=0,I=0,T=0,b=0,M=0,P=0,C=0,O=0,R=0,N=0,w=0,D=0,G=0,U=0,K=0,Y=0,j=0,V=0,W=0,H=0,Q=0,$=0,q=0;n=a,a=a+160|0,s=n,d=0|F(0|(r=0|L(0,0|(u=0|i[(t|=0)>>2]),32)),0|(c=l),0|r,0|c),i[(p=s)>>2]=d,i[p+4>>2]=l,p=0|L(0,0|u,31),u=l,h=0|F(0|(_=0|L(0,0|(f=0|i[(d=t+8|0)>>2]),32)),0|(g=l),0|p,0|u),i[(A=o=s+8|0)>>2]=h,i[A+4>>2]=l,A=0|F(0|_,0|g,0|_,0|g),h=l,h=0|x(0|(v=0|k(0|(S=0|F(0|(E=0|L(0,0|i[(m=t+16|0)>>2],32)),0|(y=l),0|r,0|c)),0|l,0|A,0|h)),0|l,1),i[(A=v=s+16|0)>>2]=h,i[A+4>>2]=l,A=0|F(0|E,0|y,0|_,0|g),h=l,h=0|x(0|(M=0|k(0|(b=0|F(0|(I=0|L(0,0|i[(S=t+24|0)>>2],32)),0|(T=l),0|r,0|c)),0|l,0|A,0|h)),0|l,1),i[(A=M=s+24|0)>>2]=h,i[A+4>>2]=l,A=0|F(0|E,0|y,0|E,0|y),h=l,b=0|k(0|(P=0|F(0|I,0|T,0|(b=0|L(0,0|f,30)),0|l)),0|l,0|A,0|h),u=0|k(0|b,0|(h=l),0|(O=0|F(0|(P=0|L(0,0|i[(A=t+32|0)>>2],32)),0|(C=l),0|p,0|u)),0|l),i[(h=O=s+32|0)>>2]=u,i[h+4>>2]=l,h=0|F(0|I,0|T,0|E,0|y),u=l,p=0|k(0|(b=0|F(0|P,0|C,0|_,0|g)),0|l,0|h,0|u),N=0|x(0|(w=0|k(0|p,0|(u=l),0|(N=0|F(0|(b=0|L(0,0|i[(h=t+40|0)>>2],32)),0|(R=l),0|r,0|c)),0|l)),0|l,1),i[(u=w=s+40|0)>>2]=N,i[u+4>>2]=l,u=0|F(0|I,0|T,0|I,0|T),N=l,D=0|k(0|(p=0|F(0|P,0|C,0|E,0|y)),0|l,0|u,0|N),K=0|k(0|D,0|(N=l),0|(U=0|F(0|(p=0|L(0,0|i[(u=t+48|0)>>2],32)),0|(G=l),0|r,0|c)),0|l),f=0|x(0|(N=0|k(0|K,0|(U=l),0|(f=0|F(0|b,0|R,0|(N=0|L(0,0|f,31)),0|l)),0|l)),0|l,1),i[(U=N=s+48|0)>>2]=f,i[U+4>>2]=l,U=0|F(0|P,0|C,0|I,0|T),f=l,D=0|k(0|(K=0|F(0|b,0|R,0|E,0|y)),0|l,0|U,0|f),K=0|k(0|D,0|(f=l),0|(U=0|F(0|p,0|G,0|_,0|g)),0|l),j=0|x(0|(V=0|k(0|K,0|(U=l),0|(j=0|F(0|(D=0|L(0,0|i[(f=t+56|0)>>2],32)),0|(Y=l),0|r,0|c)),0|l)),0|l,1),i[(U=V=s+56|0)>>2]=j,i[U+4>>2]=l,U=0|F(0|P,0|C,0|P,0|C),j=l,K=0|F(0|p,0|G,0|E,0|y),W=l,c=0|k(0|(q=0|F(0|(Q=0|L(0,0|i[(H=t+64|0)>>2],32)),0|($=l),0|r,0|c)),0|l,0|K,0|W),W=l,K=0|F(0|D,0|Y,0|_,0|g),g=l,q=0|k(0|(_=0|F(0|b,0|R,0|I,0|T)),0|l,0|K,0|g),q=0|k(0|c,0|W,0|(g=0|x(0|q,0|l,1)),0|l),q=0|k(0|(g=0|x(0|q,0|l,1)),0|l,0|U,0|j),i[(U=j=s+64|0)>>2]=q,i[U+4>>2]=l,U=0|F(0|b,0|R,0|P,0|C),q=l,T=0|k(0|(g=0|F(0|p,0|G,0|I,0|T)),0|l,0|U,0|q),y=0|k(0|T,0|(q=l),0|(U=0|F(0|D,0|Y,0|E,0|y)),0|l),E=0|k(0|y,0|(U=l),0|(T=0|F(0|Q,0|$,0|(q=0|L(0,0|i[d>>2],32)),0|(d=l))),0|l),T=l,U=0|L(0,0|i[t>>2],32),y=l,W=0|x(0|(y=0|k(0|E,0|T,0|(W=0|F(0|(t=0|L(0,0|(g=0|i[t+72>>2]),32)),0|(I=l),0|U,0|y)),0|l)),0|l,1),i[(y=s+72|0)>>2]=W,i[y+4>>2]=l,y=0|F(0|b,0|R,0|b,0|R),W=l,C=0|k(0|(T=0|F(0|p,0|G,0|P,0|C)),0|l,0|y,0|W),P=0|k(0|C,0|(W=l),0|(T=0|F(0|Q,0|$,0|(y=0|L(0,0|i[m>>2],32)),0|(m=l))),0|l),T=l,C=0|F(0|D,0|Y,0|(W=0|L(0,0|i[S>>2],32)),0|(S=l)),E=l,E=0|x(0|(d=0|k(0|(U=0|F(0|t,0|I,0|q,0|d)),0|l,0|C,0|E)),0|l,1),E=0|x(0|(d=0|k(0|P,0|T,0|E,0|l)),0|l,1),i[(T=d=s+80|0)>>2]=E,i[T+4>>2]=l,T=0|F(0|p,0|G,0|b,0|R),R=l,P=0|k(0|(E=0|F(0|D,0|Y,0|(b=0|L(0,0|i[A>>2],32)),0|(A=l))),0|l,0|T,0|R),E=0|k(0|P,0|(R=l),0|(T=0|F(0|Q,0|$,0|W,0|S)),0|l),T=0|x(0|(m=0|k(0|E,0|(T=l),0|(R=0|F(0|t,0|I,0|y,0|m)),0|l)),0|(R=l),1),E=l,i[(y=s+88|0)>>2]=T,i[y+4>>2]=E,y=0|F(0|p,0|G,0|p,0|G),G=l,p=0|F(0|Q,0|$,0|b,0|A),P=l,q=0|F(0|D,0|Y,0|(h=0|L(0,0|(C=0|i[h>>2]),32)),0|(U=l)),c=l,S=0|k(0|(K=0|F(0|t,0|I,0|W,0|S)),0|l,0|q,0|c),S=0|k(0|(c=0|x(0|S,0|l,1)),0|l,0|p,0|P),S=0|k(0|(P=0|x(0|S,0|l,1)),0|l,0|y,0|G),G=l,i[(y=s+96|0)>>2]=S,i[y+4>>2]=G,P=0|F(0|D,0|Y,0|(y=0|L(0,0|i[u>>2],32)),0|(u=l)),Y=l,U=0|k(0|(D=0|F(0|Q,0|$,0|h,0|U)),0|l,0|P,0|Y),Y=0|x(0|(A=0|k(0|U,0|(Y=l),0|(P=0|F(0|t,0|I,0|b,0|A)),0|l)),0|(P=l),1),U=l,i[(b=s+104|0)>>2]=Y,i[b+4>>2]=U,h=0|F(0|(f=0|L(0,0|(b=0|i[f>>2]),32)),0|(D=l),0|f,0|D),p=l,$=0|k(0|(c=0|F(0|Q,0|$,0|y,0|u)),0|l,0|h,0|p),p=0|x(0|(h=0|k(0|$,0|(p=l),0|(C=0|F(0|t,0|I,0|(h=0|L(0,0|C,31)),0|l)),0|l)),0|(C=l),1),$=l,i[(c=s+112|0)>>2]=p,i[c+4>>2]=$,q=0|F(0|(H=0|L(0,0|(c=0|i[H>>2]),32)),0|(Q=l),0|f,0|D),D=l,q=0|x(0|(u=0|k(0|(f=0|F(0|t,0|I,0|y,0|u)),0|l,0|q,0|D)),0|(D=l),1),f=l,i[(y=s+120|0)>>2]=q,i[y+4>>2]=f,y=0|F(0|H,0|Q,0|H,0|Q),Q=l,H=0|k(0|(b=0|F(0|t,0|I,0|(H=0|L(0,0|b,30)),0|l)),0|l,0|y,0|Q),Q=l,i[(y=s+128|0)>>2]=H,i[y+4>>2]=Q,c=0|F(0|t,0|I,0|(y=0|L(0,0|c,31)),0|l),y=l,i[(b=s+136|0)>>2]=c,i[b+4>>2]=y,g=0|F(0|(b=0|L(0,0|g,31)),0|l,0|t,0|I),I=l,i[(t=s+144|0)>>2]=g,i[t+4>>2]=I,b=0|i[(t=j)>>2],K=0|i[t+4>>2],t=0|F(0|g,0|I,18,0),W=l,_=0|k(0|g,0|I,0|b,0|K),K=0|k(0|_,0|l,0|t,0|W),i[(W=j)>>2]=K,i[W+4>>2]=l,K=0|i[(W=V)>>2],j=0|i[W+4>>2],W=0|F(0|c,0|y,18,0),t=l,_=0|k(0|K,0|j,0|c,0|y),y=0|k(0|_,0|l,0|W,0|t),i[(t=V)>>2]=y,i[t+4>>2]=l,y=0|i[(t=N)>>2],V=0|i[t+4>>2],t=0|F(0|H,0|Q,18,0),W=l,_=0|k(0|y,0|V,0|H,0|Q),Q=0|k(0|_,0|l,0|t,0|W),i[(W=N)>>2]=Q,i[W+4>>2]=l,Q=0|i[(W=w)>>2],N=0|i[W+4>>2],W=0|F(0|u,0|D,36,0),D=l,u=0|k(0|Q,0|N,0|q,0|f),f=0|k(0|u,0|l,0|W,0|D),i[(D=w)>>2]=f,i[D+4>>2]=l,f=0|i[(D=O)>>2],w=0|i[D+4>>2],D=0|F(0|h,0|C,36,0),C=l,h=0|k(0|f,0|w,0|p,0|$),$=0|k(0|h,0|l,0|D,0|C),i[(C=O)>>2]=$,i[C+4>>2]=l,$=0|i[(C=M)>>2],O=0|i[C+4>>2],C=0|F(0|A,0|P,36,0),P=l,A=0|k(0|$,0|O,0|Y,0|U),U=0|k(0|A,0|l,0|C,0|P),i[(P=M)>>2]=U,i[P+4>>2]=l,U=0|i[(P=v)>>2],M=0|i[P+4>>2],P=0|F(0|S,0|G,18,0),C=l,A=0|k(0|U,0|M,0|S,0|G),G=0|k(0|A,0|l,0|P,0|C),i[(C=v)>>2]=G,i[C+4>>2]=l,G=0|i[(C=o)>>2],v=0|i[C+4>>2],C=0|F(0|m,0|R,36,0),R=l,m=0|k(0|G,0|v,0|T,0|E),E=0|k(0|m,0|l,0|C,0|R),i[(R=o)>>2]=E,i[R+4>>2]=l,E=0|i[(R=d)>>2],C=0|i[R+4>>2],m=0|i[(R=s)>>2],T=0|i[R+4>>2],R=0|F(0|E,0|C,18,0),v=l,G=0|k(0|m,0|T,0|E,0|C),C=0|k(0|G,0|l,0|R,0|v),v=l,i[(R=s)>>2]=C,i[R+4>>2]=v,i[(R=d)>>2]=0,i[R+4>>2]=0,R=v,v=C,C=0;do{m=0|B(0|v,0|R,0|(T=0|x(0|(E=0|L(0|(G=0|k(R>>31>>>6|0,0,0|v,0|R)),0|l,26)),0|(G=l),26)),0|l),i[(T=s+(C<<3)|0)>>2]=m,i[T+4>>2]=l,S=0|B(0|(P=0|k(0|E,0|G,0|i[(m=T=s+((1|C)<<3)|0)>>2],0|i[m+4>>2])),0|(m=l),0|(A=0|x(0|(E=0|L(0|(G=0|k(m>>31>>>7|0,0,0|P,0|m)),0|l,25)),0|(G=l),25)),0|l),i[(A=T)>>2]=S,i[A+4>>2]=l,v=0|k(0|E,0|G,0|i[(S=A=s+((C=C+2|0)<<3)|0)>>2],0|i[S+4>>2]),R=l,i[(S=A)>>2]=v,i[S+4>>2]=R}while(C>>>0<10);R=0|i[(C=d)>>2],v=0|i[C+4>>2],S=0|i[(C=s)>>2],A=0|i[C+4>>2],C=0|F(0|R,0|v,18,0),G=l,E=0|k(0|S,0|A,0|R,0|v),v=0|k(0|E,0|l,0|C,0|G),G=l,i[(C=d)>>2]=0,i[C+4>>2]=0,R=0|B(0|v,0|G,0|(E=0|x(0|(d=0|L(0|(C=0|k(G>>31>>>6|0,0,0|v,0|G)),0|l,26)),0|(C=l),26)),0|l),i[(E=s)>>2]=R,i[E+4>>2]=l,R=0|k(0|d,0|C,0|i[(E=o)>>2],0|i[E+4>>2]),i[(E=o)>>2]=R,i[E+4>>2]=l,E=e,e=s,s=E+80|0;do{i[E>>2]=i[e>>2],E=E+4|0,e=e+4|0}while((0|E)<(0|s));a=n}function C(){return 0|(0|i[2]?0|i[60+(0|f())>>2]:56)}function O(e){var t=0;return(e|=0)>>>0>4294963200?(i[(0|C())>>2]=0-e,t=-1):t=e,0|t}function R(e){return 0,0}function N(e){0}function w(e,t,n){t|=0,n|=0;var r,o,s,l,u,c=0,p=0,f=0,_=0,g=0,h=0,A=0,m=0,E=0,y=0,S=0,I=0,b=0,M=0,P=0,C=0;for(r=a,a=a+48|0,o=r+16|0,s=r,c=r+32|0,p=0|i[(l=(e|=0)+28|0)>>2],i[c>>2]=p,f=(0|i[(u=e+20|0)>>2])-p|0,i[c+4>>2]=f,i[c+8>>2]=t,i[c+12>>2]=n,t=e+60|0,p=e+44|0,_=c,c=2,g=f+n|0;;){if(0|i[2]?(v(1,0|e),i[s>>2]=i[t>>2],i[s+4>>2]=_,i[s+8>>2]=c,f=0|O(0|T(146,0|s)),d(0),h=f):(i[o>>2]=i[t>>2],i[o+4>>2]=_,i[o+8>>2]=c,h=0|O(0|T(146,0|o))),(0|g)==(0|h)){A=6;break}if((0|h)<0){m=_,E=c,A=8;break}f=g-h|0,h>>>0<=(y=0|i[_+4>>2])>>>0?2==(0|c)?(i[l>>2]=(0|i[l>>2])+h,S=y,I=h,b=_,M=2):(S=y,I=h,b=_,M=c):(P=0|i[p>>2],i[l>>2]=P,i[u>>2]=P,S=0|i[_+12>>2],I=h-y|0,b=_+8|0,M=c+-1|0),i[b>>2]=(0|i[b>>2])+I,i[b+4>>2]=S-I,_=b,c=M,g=f}return 6==(0|A)?(g=0|i[p>>2],i[e+16>>2]=g+(0|i[e+48>>2]),p=g,i[l>>2]=p,i[u>>2]=p,C=n):8==(0|A)&&(i[e+16>>2]=0,i[l>>2]=0,i[u>>2]=0,i[e>>2]=32|i[e>>2],C=2==(0|E)?0:n-(0|i[m+4>>2])|0),a=r,0|C}function D(e){var t,n,r=0,o=0,a=0,s=0,l=0;return n=(e|=0)+28|0,(0|i[(t=e+20|0)>>2])>>>0>(0|i[n>>2])>>>0&&(Y[3&i[e+36>>2]](e,0,0),0==(0|i[t>>2]))?r=-1:((a=0|i[(o=e+4|0)>>2])>>>0<(l=0|i[(s=e+8|0)>>2])>>>0&&Y[3&i[e+40>>2]](e,a-l|0,1),i[e+16>>2]=0,i[n>>2]=0,i[t>>2]=0,i[s>>2]=0,i[o>>2]=0,r=0),0|r}function L(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(l=t>>n,e>>>n|(t&(1<<n)-1)<<32-n):(l=(0|t)<0?-1:0,t>>n-32|0)}function B(e,t,n,r){return(t|=0)-(r|=0)>>>0,0|(l=t-r-((n|=0)>>>0>(e|=0)>>>0|0)>>>0,e-n>>>0|0)}function k(e,t,n,r){var i;return 0|(l=(t|=0)+(r|=0)+((i=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0,0|i)}function G(e,t,n){t|=0;var o,a=0,s=0,l=0;if(o=(e|=0)+(n|=0)|0,(0|n)>=20){if(s=(t&=255)|t<<8|t<<16|t<<24,l=-4&o,a=3&e)for(a=e+4-a|0;(0|e)<(0|a);)r[e>>0]=t,e=e+1|0;for(;(0|e)<(0|l);)i[e>>2]=s,e=e+4|0}for(;(0|e)<(0|o);)r[e>>0]=t,e=e+1|0;return e-n|0}function U(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(l=t>>>n,e>>>n|(t&(1<<n)-1)<<32-n):(l=0,t>>>n-32|0)}function x(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(l=t<<n|(e&(1<<n)-1<<32-n)>>>32-n,e<<n):(l=e<<n-32,0)}function F(e,t,n,r){t|=0,r|=0;var i,o;return n=0|function(e,t){var n,r,i,o=0;return e=((r=0|u(o=65535&(t|=0),n=65535&(e|=0)))>>>16)+(0|u(o,i=e>>>16))|0,t=0|u(o=t>>>16,n),0|(l=(e>>>16)+(0|u(o,i))+(((65535&e)+t|0)>>>16)|0,e+t<<16|65535&r|0)}(i=e|=0,e=n|=0),o=l,0|(l=(0|u(t,e))+(0|u(r,i))+o|0&o,0|n)}var K=[function(e){return 0,c(0),0},function(e){var t,n;return e|=0,t=a,a=a+16|0,i[(n=t)>>2]=i[e+60>>2],e=0|O(0|_(6,0|n)),a=t,0|e}],Y=[function(e,t,n){return 0,0,0,c(1),0},function(e,t,n){t|=0,n|=0;var o,s=0;return o=a,a=a+80|0,s=o,i[(e|=0)+36>>2]=3,0==(64&i[e>>2]|0)&&(i[s>>2]=i[e+60>>2],i[s+4>>2]=21505,i[s+8>>2]=o+12,0!=(0|E(54,0|s)))&&(r[e+75>>0]=-1),s=0|w(e,t,n),a=o,0|s},function(e,t,n){e|=0,t|=0,n|=0;var r,o,s,l=0;return r=a,a=a+32|0,s=r+20|0,i[(o=r)>>2]=i[e+60>>2],i[o+4>>2]=0,i[o+8>>2]=t,i[o+12>>2]=s,i[o+16>>2]=n,(0|O(0|S(140,0|o)))<0?(i[s>>2]=-1,l=-1):l=0|i[s>>2],a=r,0|l},w],j=[function(e){c(2)},function(e){0|i[(e|=0)+68>>2]||N()}];return{_curve25519_donna:function(e,t,n){e|=0,n|=0;var s,c,d,p,f,_,g,h,A,m,E,y,S,v,I,T,C,O,R,N,w,D,K,Y,j,V,W,H,Q,$,q,J,z,X,Z,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,pe,fe,_e,ge,he,Ae,me,Ee,ye,Se,ve,Ie,Te=0,be=0,Me=0,Pe=0,Ce=0,Oe=0,Re=0,Ne=0,we=0,De=0,Le=0,Be=0,ke=0,Ge=0,Ue=0,xe=0,Fe=0,Ke=0,Ye=0,je=0,Ve=0,We=0,He=0,Qe=0,$e=0,qe=0,Je=0,ze=0,Xe=0,Ze=0,et=0,tt=0,nt=0,rt=0,it=0,ot=0,at=0,st=0,lt=0,ut=0,ct=0,dt=0,pt=0,ft=0,_t=0,gt=0,ht=0,At=0,mt=0,Et=0,yt=0,St=0,vt=0,It=0,Tt=0,bt=0,Mt=0,Pt=0,Ct=0,Ot=0,Rt=0,Nt=0,wt=0,Dt=0,Lt=0,Bt=0,kt=0,Gt=0,Ut=0,xt=0,Ft=0,Kt=0,Yt=0,jt=0,Vt=0,Wt=0,Ht=0,Qt=0,$t=0,qt=0,Jt=0,zt=0,Xt=0,Zt=0,en=0,tn=0,nn=0,rn=0,on=0,an=0,sn=0,ln=0,un=0,cn=0,dn=0,pn=0,fn=0,_n=0,gn=0,hn=0,An=0,mn=0,En=0,yn=0,Sn=0,vn=0,In=0,Tn=0,bn=0,Mn=0,Pn=0,Cn=0,On=0,Rn=0,Nn=0,wn=0,Dn=0,Ln=0;s=a,a=a+2640|0,Te=s+2456|0,be=s+2304|0,Me=s+2152|0,Pe=s+2e3|0,Ce=s+1848|0,Oe=s+1696|0,Re=s+1544|0,Ne=s+1392|0,we=s+1240|0,De=s+1088|0,Le=s+936|0,Be=s+784|0,ke=s+632|0,Ge=s+480|0,Ue=s+328|0,c=s+248|0,xe=s+168|0,Fe=s+80|0,Ke=s,je=t|=0,t=(Ye=d=s+2608|0)+32|0;do{r[Ye>>0]=0|r[je>>0],Ye=Ye+1|0,je=je+1|0}while((0|Ye)<(0|t));r[d>>0]=248&(0|o[d>>0]),r[(Ve=d+31|0)>>0]=63&(0|o[Ve>>0])|64,Ve=0|o[n>>0],We=0|x(0|o[n+1>>0],0,8),He=l,Qe=0|x(0|o[n+2>>0],0,16),$e=He|l,qe=0|x(0|(He=0|o[n+3>>0]),0,24),i[(Je=c)>>2]=We|Ve|Qe|50331648&qe,i[Je+4>>2]=$e,$e=0|x(0|o[n+4>>0],0,8),Je=l,qe=0|x(0|o[n+5>>0],0,16),Qe=Je|l,We=0|U($e|He|qe|(Ve=0|x(0|(Je=0|o[n+6>>0]),0,24))|0,Qe|l|0,2),i[(Qe=c+8|0)>>2]=33554431&We,i[Qe+4>>2]=0,Qe=0|x(0|o[n+7>>0],0,8),We=l,Ve=0|x(0|o[n+8>>0],0,16),qe=We|l,$e=0|U(Qe|Je|Ve|(He=0|x(0|(We=0|o[n+9>>0]),0,24))|0,qe|l|0,3),i[(qe=c+16|0)>>2]=67108863&$e,i[qe+4>>2]=0,qe=0|x(0|o[n+10>>0],0,8),$e=l,He=0|x(0|o[n+11>>0],0,16),Ve=$e|l,Qe=0|U(qe|We|He|(Je=0|x(0|($e=0|o[n+12>>0]),0,24))|0,Ve|l|0,5),i[(Ve=c+24|0)>>2]=33554431&Qe,i[Ve+4>>2]=0,Ve=0|x(0|o[n+13>>0],0,8),Qe=l,Je=0|x(0|o[n+14>>0],0,16),He=Qe|l,We=0|U(Ve|$e|Je|(Qe=0|x(0|o[n+15>>0],0,24))|0,He|l|0,6),i[(He=c+32|0)>>2]=67108863&We,i[He+4>>2]=0,He=0|o[n+16>>0],We=0|x(0|o[n+17>>0],0,8),Qe=l,Je=0|x(0|o[n+18>>0],0,16),$e=Qe|l,Ve=0|x(0|(Qe=0|o[n+19>>0]),0,24),i[(qe=c+40|0)>>2]=We|He|Je|16777216&Ve,i[qe+4>>2]=$e,$e=0|x(0|o[n+20>>0],0,8),qe=l,Ve=0|x(0|o[n+21>>0],0,16),Je=qe|l,We=0|U($e|Qe|Ve|(He=0|x(0|(qe=0|o[n+22>>0]),0,24))|0,Je|l|0,1),i[(Je=c+48|0)>>2]=67108863&We,i[Je+4>>2]=0,Je=0|x(0|o[n+23>>0],0,8),We=l,He=0|x(0|o[n+24>>0],0,16),Ve=We|l,$e=0|U(Je|qe|He|(Qe=0|x(0|(We=0|o[n+25>>0]),0,24))|0,Ve|l|0,3),i[(Ve=c+56|0)>>2]=33554431&$e,i[Ve+4>>2]=0,Ve=0|x(0|o[n+26>>0],0,8),$e=l,Qe=0|x(0|o[n+27>>0],0,16),He=$e|l,Je=0|U(Ve|We|Qe|(qe=0|x(0|($e=0|o[n+28>>0]),0,24))|0,He|l|0,4),i[(He=c+64|0)>>2]=67108863&Je,i[He+4>>2]=0,He=0|x(0|o[n+29>>0],0,8),Je=l,qe=0|x(0|o[n+30>>0],0,16),Qe=Je|l,n=0|U(He|$e|qe|(Je=0|x(0|o[n+31>>0],0,24))|0,Qe|l|0,6),i[(Qe=c+72|0)>>2]=33554431&n,i[Qe+4>>2]=0,G(0|we,0,152),i[(Qe=we)>>2]=1,i[Qe+4>>2]=0,G(0|De,0,152),i[(Qe=De)>>2]=1,i[Qe+4>>2]=0,G(0|Le,0,152),G(0|Be,0,152),G(0|ke,0,152),i[(Qe=ke)>>2]=1,i[Qe+4>>2]=0,G(0|Ge,0,152),G(0|Ue,0,152),i[(Qe=Ue)>>2]=1,i[Qe+4>>2]=0,t=(Ye=Ne+80|0)+72|0;do{i[Ye>>2]=0,Ye=Ye+4|0}while((0|Ye)<(0|t));je=c,t=(Ye=Ne)+80|0;do{i[Ye>>2]=i[je>>2],Ye=Ye+4|0,je=je+4|0}while((0|Ye)<(0|t));for(Qe=Pe+144|0,n=Pe+64|0,Je=Pe+136|0,qe=Pe+56|0,$e=Pe+128|0,He=Pe+48|0,We=Pe+120|0,Ve=Pe+40|0,p=Pe+112|0,f=Pe+32|0,_=Pe+104|0,g=Pe+24|0,h=Pe+96|0,A=Pe+16|0,m=Pe+88|0,E=Pe+8|0,y=Pe+80|0,S=Ce+144|0,v=Ce+64|0,I=Ce+136|0,T=Ce+56|0,C=Ce+128|0,O=Ce+48|0,R=Ce+120|0,N=Ce+40|0,w=Ce+112|0,D=Ce+32|0,K=Ce+104|0,Y=Ce+24|0,j=Ce+96|0,V=Ce+16|0,W=Ce+88|0,H=Ce+8|0,Q=Ce+80|0,$=Pe+72|0,q=Ce+72|0,J=be+8|0,z=Me+8|0,X=be+16|0,Z=Me+16|0,ee=be+24|0,te=Me+24|0,ne=be+32|0,re=Me+32|0,ie=be+40|0,oe=Me+40|0,ae=be+48|0,se=Me+48|0,le=be+56|0,ue=Me+56|0,ce=be+64|0,de=Me+64|0,pe=be+72|0,fe=Me+72|0,_e=Te+80|0,ge=Te+8|0,he=Te+16|0,Ae=Te+24|0,me=Te+32|0,Ee=Te+40|0,ye=Te+48|0,Se=Te+56|0,ve=Te+64|0,Ie=Te+72|0,ze=0,Xe=Ne,Ze=Be,Be=we,et=ke,ke=De,tt=Ge,Ge=Le,Le=Ue;;){for(Ue=0|r[d+(31-ze)>>0],nt=0,rt=Xe,it=Ze,ot=Be,at=et,st=ke,lt=tt,ut=Ge,ct=Le;;){pt=0|B(0,0,(dt=255&Ue)>>>7|0,0),ft=l,_t=0;do{At=0|i[(ht=gt=st+(_t<<3)|0)>>2],mt=0|i[ht+4>>2],yt=0|i[(Et=ht=rt+(_t<<3)|0)>>2],vt=((St=0|i[Et+4>>2])^mt)&ft,mt=0|L(0,(Et=(yt^At)&pt)^At|0,32),i[(At=gt)>>2]=mt,i[At+4>>2]=l,At=0|L(0,Et^yt|0,32),i[(yt=ht)>>2]=At,i[yt+4>>2]=l,_t=_t+1|0}while(10!=(0|_t));It=0;do{At=0|i[(yt=_t=ut+(It<<3)|0)>>2],ht=0|i[yt+4>>2],mt=0|i[(Et=yt=ot+(It<<3)|0)>>2],St=((gt=0|i[Et+4>>2])^ht)&ft,ht=0|L(0,(Et=(mt^At)&pt)^At|0,32),i[(At=_t)>>2]=ht,i[At+4>>2]=l,At=0|L(0,Et^mt|0,32),i[(mt=yt)>>2]=At,i[mt+4>>2]=l,It=It+1|0}while(10!=(0|It));At=0|i[(mt=st)>>2],yt=0|i[mt+4>>2],ht=0|i[(Et=mt=st+8|0)>>2],_t=0|i[Et+4>>2],St=0|i[(gt=Et=st+16|0)>>2],vt=0|i[gt+4>>2],bt=0|i[(Tt=gt=st+24|0)>>2],Mt=0|i[Tt+4>>2],Ct=0|i[(Pt=Tt=st+32|0)>>2],Ot=0|i[Pt+4>>2],Nt=0|i[(Rt=Pt=st+40|0)>>2],wt=0|i[Rt+4>>2],Lt=0|i[(Dt=Rt=st+48|0)>>2],Bt=0|i[Dt+4>>2],Gt=0|i[(kt=Dt=st+56|0)>>2],Ut=0|i[kt+4>>2],Ft=0|i[(xt=kt=st+64|0)>>2],Kt=0|i[xt+4>>2],jt=0|i[(Yt=xt=st+72|0)>>2],Vt=0|i[Yt+4>>2],Yt=0|k(0|(Wt=0|i[(Yt=ut)>>2]),0|(Ht=0|i[Yt+4>>2]),0|At,0|yt),i[(Qt=st)>>2]=Yt,i[Qt+4>>2]=l,Yt=0|k(0|($t=0|i[(Yt=Qt=ut+8|0)>>2]),0|(qt=0|i[Yt+4>>2]),0|ht,0|_t),i[(Jt=mt)>>2]=Yt,i[Jt+4>>2]=l,Yt=0|k(0|(mt=0|i[(Yt=Jt=ut+16|0)>>2]),0|(zt=0|i[Yt+4>>2]),0|St,0|vt),i[(Xt=Et)>>2]=Yt,i[Xt+4>>2]=l,Yt=0|k(0|(Et=0|i[(Yt=Xt=ut+24|0)>>2]),0|(Zt=0|i[Yt+4>>2]),0|bt,0|Mt),i[(en=gt)>>2]=Yt,i[en+4>>2]=l,Yt=0|k(0|(gt=0|i[(Yt=en=ut+32|0)>>2]),0|(tn=0|i[Yt+4>>2]),0|Ct,0|Ot),i[(nn=Tt)>>2]=Yt,i[nn+4>>2]=l,Yt=0|k(0|(Tt=0|i[(Yt=nn=ut+40|0)>>2]),0|(rn=0|i[Yt+4>>2]),0|Nt,0|wt),i[(on=Pt)>>2]=Yt,i[on+4>>2]=l,Yt=0|k(0|(Pt=0|i[(Yt=on=ut+48|0)>>2]),0|(an=0|i[Yt+4>>2]),0|Lt,0|Bt),i[(sn=Rt)>>2]=Yt,i[sn+4>>2]=l,Yt=0|k(0|(Rt=0|i[(Yt=sn=ut+56|0)>>2]),0|(ln=0|i[Yt+4>>2]),0|Gt,0|Ut),i[(un=Dt)>>2]=Yt,i[un+4>>2]=l,Yt=0|k(0|(Dt=0|i[(Yt=un=ut+64|0)>>2]),0|(cn=0|i[Yt+4>>2]),0|Ft,0|Kt),i[(dn=kt)>>2]=Yt,i[dn+4>>2]=l,Yt=0|k(0|(kt=0|i[(Yt=dn=ut+72|0)>>2]),0|(pn=0|i[Yt+4>>2]),0|jt,0|Vt),i[(fn=xt)>>2]=Yt,i[fn+4>>2]=l,fn=0|B(0|At,0|yt,0|Wt,0|Ht),i[(Ht=ut)>>2]=fn,i[Ht+4>>2]=l,Ht=0|B(0|ht,0|_t,0|$t,0|qt),i[(qt=Qt)>>2]=Ht,i[qt+4>>2]=l,qt=0|B(0|St,0|vt,0|mt,0|zt),i[(zt=Jt)>>2]=qt,i[zt+4>>2]=l,zt=0|B(0|bt,0|Mt,0|Et,0|Zt),i[(Zt=Xt)>>2]=zt,i[Zt+4>>2]=l,Zt=0|B(0|Ct,0|Ot,0|gt,0|tn),i[(tn=en)>>2]=Zt,i[tn+4>>2]=l,tn=0|B(0|Nt,0|wt,0|Tt,0|rn),i[(rn=nn)>>2]=tn,i[rn+4>>2]=l,rn=0|B(0|Lt,0|Bt,0|Pt,0|an),i[(an=on)>>2]=rn,i[an+4>>2]=l,an=0|B(0|Gt,0|Ut,0|Rt,0|ln),i[(ln=sn)>>2]=an,i[ln+4>>2]=l,ln=0|B(0|Ft,0|Kt,0|Dt,0|cn),i[(cn=un)>>2]=ln,i[cn+4>>2]=l,cn=0|B(0|jt,0|Vt,0|kt,0|pn),i[(pn=dn)>>2]=cn,i[pn+4>>2]=l,cn=0|i[(pn=rt)>>2],dn=0|i[pn+4>>2],Vt=0|i[(kt=pn=rt+8|0)>>2],jt=0|i[kt+4>>2],un=0|i[(ln=kt=rt+16|0)>>2],Dt=0|i[ln+4>>2],Ft=0|i[(Kt=ln=rt+24|0)>>2],an=0|i[Kt+4>>2],Rt=0|i[(sn=Kt=rt+32|0)>>2],Ut=0|i[sn+4>>2],rn=0|i[(Gt=sn=rt+40|0)>>2],on=0|i[Gt+4>>2],Bt=0|i[(Pt=Gt=rt+48|0)>>2],Lt=0|i[Pt+4>>2],nn=0|i[(tn=Pt=rt+56|0)>>2],Tt=0|i[tn+4>>2],Nt=0|i[(wt=tn=rt+64|0)>>2],Zt=0|i[wt+4>>2],gt=0|i[(en=wt=rt+72|0)>>2],Ot=0|i[en+4>>2],en=0|k(0|(Ct=0|i[(en=ot)>>2]),0|(zt=0|i[en+4>>2]),0|cn,0|dn),i[(Xt=rt)>>2]=en,i[Xt+4>>2]=l,en=0|k(0|(Et=0|i[(en=Xt=ot+8|0)>>2]),0|(Mt=0|i[en+4>>2]),0|Vt,0|jt),i[(bt=pn)>>2]=en,i[bt+4>>2]=l,en=0|k(0|(pn=0|i[(en=bt=ot+16|0)>>2]),0|(qt=0|i[en+4>>2]),0|un,0|Dt),i[(Jt=kt)>>2]=en,i[Jt+4>>2]=l,en=0|k(0|(kt=0|i[(en=Jt=ot+24|0)>>2]),0|(mt=0|i[en+4>>2]),0|Ft,0|an),i[(vt=ln)>>2]=en,i[vt+4>>2]=l,en=0|k(0|(ln=0|i[(en=vt=ot+32|0)>>2]),0|(St=0|i[en+4>>2]),0|Rt,0|Ut),i[(Ht=Kt)>>2]=en,i[Ht+4>>2]=l,en=0|k(0|(Kt=0|i[(en=Ht=ot+40|0)>>2]),0|(Qt=0|i[en+4>>2]),0|rn,0|on),i[($t=sn)>>2]=en,i[$t+4>>2]=l,en=0|k(0|(sn=0|i[(en=$t=ot+48|0)>>2]),0|(_t=0|i[en+4>>2]),0|Bt,0|Lt),i[(ht=Gt)>>2]=en,i[ht+4>>2]=l,en=0|k(0|(Gt=0|i[(en=ht=ot+56|0)>>2]),0|(fn=0|i[en+4>>2]),0|nn,0|Tt),i[(Wt=Pt)>>2]=en,i[Wt+4>>2]=l,en=0|k(0|(Pt=0|i[(en=Wt=ot+64|0)>>2]),0|(yt=0|i[en+4>>2]),0|Nt,0|Zt),i[(At=tn)>>2]=en,i[At+4>>2]=l,en=0|k(0|(tn=0|i[(en=At=ot+72|0)>>2]),0|(Yt=0|i[en+4>>2]),0|gt,0|Ot),i[(xt=wt)>>2]=en,i[xt+4>>2]=l,xt=0|B(0|cn,0|dn,0|Ct,0|zt),i[(zt=ot)>>2]=xt,i[zt+4>>2]=l,zt=0|B(0|Vt,0|jt,0|Et,0|Mt),i[(Mt=Xt)>>2]=zt,i[Mt+4>>2]=l,Mt=0|B(0|un,0|Dt,0|pn,0|qt),i[(qt=bt)>>2]=Mt,i[qt+4>>2]=l,qt=0|B(0|Ft,0|an,0|kt,0|mt),i[(mt=Jt)>>2]=qt,i[mt+4>>2]=l,mt=0|B(0|Rt,0|Ut,0|ln,0|St),i[(St=vt)>>2]=mt,i[St+4>>2]=l,St=0|B(0|rn,0|on,0|Kt,0|Qt),i[(Qt=Ht)>>2]=St,i[Qt+4>>2]=l,Qt=0|B(0|Bt,0|Lt,0|sn,0|_t),i[(_t=$t)>>2]=Qt,i[_t+4>>2]=l,_t=0|B(0|nn,0|Tt,0|Gt,0|fn),i[(fn=ht)>>2]=_t,i[fn+4>>2]=l,fn=0|B(0|Nt,0|Zt,0|Pt,0|yt),i[(yt=Wt)>>2]=fn,i[yt+4>>2]=l,yt=0|B(0|gt,0|Ot,0|tn,0|Yt),i[(Yt=At)>>2]=yt,i[Yt+4>>2]=l,M(Pe,rt,ut),M(Ce,st,ot),yt=0|i[(Yt=Qe)>>2],At=0|i[Yt+4>>2],tn=0|i[(Yt=n)>>2],Ot=0|i[Yt+4>>2],Yt=0|F(0|yt,0|At,18,0),gt=l,fn=0|k(0|tn,0|Ot,0|yt,0|At),At=0|k(0|fn,0|l,0|Yt,0|gt),i[(gt=n)>>2]=At,i[gt+4>>2]=l,At=0|i[(gt=Je)>>2],Yt=0|i[gt+4>>2],fn=0|i[(gt=qe)>>2],yt=0|i[gt+4>>2],gt=0|F(0|At,0|Yt,18,0),Ot=l,tn=0|k(0|fn,0|yt,0|At,0|Yt),Yt=0|k(0|tn,0|l,0|gt,0|Ot),i[(Ot=qe)>>2]=Yt,i[Ot+4>>2]=l,Yt=0|i[(Ot=$e)>>2],gt=0|i[Ot+4>>2],tn=0|i[(Ot=He)>>2],At=0|i[Ot+4>>2],Ot=0|F(0|Yt,0|gt,18,0),yt=l,fn=0|k(0|tn,0|At,0|Yt,0|gt),gt=0|k(0|fn,0|l,0|Ot,0|yt),i[(yt=He)>>2]=gt,i[yt+4>>2]=l,gt=0|i[(yt=We)>>2],Ot=0|i[yt+4>>2],fn=0|i[(yt=Ve)>>2],Yt=0|i[yt+4>>2],yt=0|F(0|gt,0|Ot,18,0),At=l,tn=0|k(0|fn,0|Yt,0|gt,0|Ot),Ot=0|k(0|tn,0|l,0|yt,0|At),i[(At=Ve)>>2]=Ot,i[At+4>>2]=l,Ot=0|i[(At=p)>>2],yt=0|i[At+4>>2],tn=0|i[(At=f)>>2],gt=0|i[At+4>>2],At=0|F(0|Ot,0|yt,18,0),Yt=l,fn=0|k(0|tn,0|gt,0|Ot,0|yt),yt=0|k(0|fn,0|l,0|At,0|Yt),i[(Yt=f)>>2]=yt,i[Yt+4>>2]=l,yt=0|i[(Yt=_)>>2],At=0|i[Yt+4>>2],fn=0|i[(Yt=g)>>2],Ot=0|i[Yt+4>>2],Yt=0|F(0|yt,0|At,18,0),gt=l,tn=0|k(0|fn,0|Ot,0|yt,0|At),At=0|k(0|tn,0|l,0|Yt,0|gt),i[(gt=g)>>2]=At,i[gt+4>>2]=l,At=0|i[(gt=h)>>2],Yt=0|i[gt+4>>2],tn=0|i[(gt=A)>>2],yt=0|i[gt+4>>2],gt=0|F(0|At,0|Yt,18,0),Ot=l,fn=0|k(0|tn,0|yt,0|At,0|Yt),Yt=0|k(0|fn,0|l,0|gt,0|Ot),i[(Ot=A)>>2]=Yt,i[Ot+4>>2]=l,Yt=0|i[(Ot=m)>>2],gt=0|i[Ot+4>>2],fn=0|i[(Ot=E)>>2],At=0|i[Ot+4>>2],Ot=0|F(0|Yt,0|gt,18,0),yt=l,tn=0|k(0|fn,0|At,0|Yt,0|gt),gt=0|k(0|tn,0|l,0|Ot,0|yt),i[(yt=E)>>2]=gt,i[yt+4>>2]=l,gt=0|i[(yt=y)>>2],Ot=0|i[yt+4>>2],tn=0|i[(yt=Pe)>>2],Yt=0|i[yt+4>>2],yt=0|F(0|gt,0|Ot,18,0),At=l,fn=0|k(0|tn,0|Yt,0|gt,0|Ot),Ot=0|k(0|fn,0|l,0|yt,0|At),At=l,i[(yt=Pe)>>2]=Ot,i[yt+4>>2]=At,i[(yt=y)>>2]=0,i[yt+4>>2]=0,yt=At,At=Ot,Ot=0;do{tn=0|B(0|At,0|yt,0|(Yt=0|x(0|(gt=0|L(0|(fn=0|k(yt>>31>>>6|0,0,0|At,0|yt)),0|l,26)),0|(fn=l),26)),0|l),i[(Yt=Pe+(Ot<<3)|0)>>2]=tn,i[Yt+4>>2]=l,Zt=0|B(0|(Wt=0|k(0|gt,0|fn,0|i[(tn=Yt=Pe+((1|Ot)<<3)|0)>>2],0|i[tn+4>>2])),0|(tn=l),0|(Pt=0|x(0|(gt=0|L(0|(fn=0|k(tn>>31>>>7|0,0,0|Wt,0|tn)),0|l,25)),0|(fn=l),25)),0|l),i[(Pt=Yt)>>2]=Zt,i[Pt+4>>2]=l,At=0|k(0|gt,0|fn,0|i[(Zt=Pt=Pe+((Ot=Ot+2|0)<<3)|0)>>2],0|i[Zt+4>>2]),yt=l,i[(Zt=Pt)>>2]=At,i[Zt+4>>2]=yt}while(Ot>>>0<10);yt=0|i[(Ot=y)>>2],At=0|i[Ot+4>>2],Zt=0|i[(Ot=Pe)>>2],Pt=0|i[Ot+4>>2],Ot=0|F(0|yt,0|At,18,0),fn=l,gt=0|k(0|Zt,0|Pt,0|yt,0|At),At=0|k(0|gt,0|l,0|Ot,0|fn),fn=l,i[(Ot=y)>>2]=0,i[Ot+4>>2]=0,Pt=0|B(0|At,0|fn,0|(yt=0|x(0|(gt=0|L(0|(Ot=0|k(fn>>31>>>6|0,0,0|At,0|fn)),0|l,26)),0|(Ot=l),26)),0|l),yt=l,i[(fn=Pe)>>2]=Pt,i[fn+4>>2]=yt,At=0|k(0|gt,0|Ot,0|i[(fn=E)>>2],0|i[fn+4>>2]),fn=l,i[(Ot=E)>>2]=At,i[Ot+4>>2]=fn,gt=0|i[(Ot=S)>>2],Zt=0|i[Ot+4>>2],Yt=0|i[(Ot=v)>>2],tn=0|i[Ot+4>>2],Ot=0|F(0|gt,0|Zt,18,0),Wt=l,Nt=0|k(0|Yt,0|tn,0|gt,0|Zt),Zt=0|k(0|Nt,0|l,0|Ot,0|Wt),i[(Wt=v)>>2]=Zt,i[Wt+4>>2]=l,Zt=0|i[(Wt=I)>>2],Ot=0|i[Wt+4>>2],Nt=0|i[(Wt=T)>>2],gt=0|i[Wt+4>>2],Wt=0|F(0|Zt,0|Ot,18,0),tn=l,Yt=0|k(0|Nt,0|gt,0|Zt,0|Ot),Ot=0|k(0|Yt,0|l,0|Wt,0|tn),i[(tn=T)>>2]=Ot,i[tn+4>>2]=l,Ot=0|i[(tn=C)>>2],Wt=0|i[tn+4>>2],Yt=0|i[(tn=O)>>2],Zt=0|i[tn+4>>2],tn=0|F(0|Ot,0|Wt,18,0),gt=l,Nt=0|k(0|Yt,0|Zt,0|Ot,0|Wt),Wt=0|k(0|Nt,0|l,0|tn,0|gt),i[(gt=O)>>2]=Wt,i[gt+4>>2]=l,Wt=0|i[(gt=R)>>2],tn=0|i[gt+4>>2],Nt=0|i[(gt=N)>>2],Ot=0|i[gt+4>>2],gt=0|F(0|Wt,0|tn,18,0),Zt=l,Yt=0|k(0|Nt,0|Ot,0|Wt,0|tn),tn=0|k(0|Yt,0|l,0|gt,0|Zt),i[(Zt=N)>>2]=tn,i[Zt+4>>2]=l,tn=0|i[(Zt=w)>>2],gt=0|i[Zt+4>>2],Yt=0|i[(Zt=D)>>2],Wt=0|i[Zt+4>>2],Zt=0|F(0|tn,0|gt,18,0),Ot=l,Nt=0|k(0|Yt,0|Wt,0|tn,0|gt),gt=0|k(0|Nt,0|l,0|Zt,0|Ot),i[(Ot=D)>>2]=gt,i[Ot+4>>2]=l,gt=0|i[(Ot=K)>>2],Zt=0|i[Ot+4>>2],Nt=0|i[(Ot=Y)>>2],tn=0|i[Ot+4>>2],Ot=0|F(0|gt,0|Zt,18,0),Wt=l,Yt=0|k(0|Nt,0|tn,0|gt,0|Zt),Zt=0|k(0|Yt,0|l,0|Ot,0|Wt),i[(Wt=Y)>>2]=Zt,i[Wt+4>>2]=l,Zt=0|i[(Wt=j)>>2],Ot=0|i[Wt+4>>2],Yt=0|i[(Wt=V)>>2],gt=0|i[Wt+4>>2],Wt=0|F(0|Zt,0|Ot,18,0),tn=l,Nt=0|k(0|Yt,0|gt,0|Zt,0|Ot),Ot=0|k(0|Nt,0|l,0|Wt,0|tn),i[(tn=V)>>2]=Ot,i[tn+4>>2]=l,Ot=0|i[(tn=W)>>2],Wt=0|i[tn+4>>2],Nt=0|i[(tn=H)>>2],Zt=0|i[tn+4>>2],tn=0|F(0|Ot,0|Wt,18,0),gt=l,Yt=0|k(0|Nt,0|Zt,0|Ot,0|Wt),Wt=0|k(0|Yt,0|l,0|tn,0|gt),i[(gt=H)>>2]=Wt,i[gt+4>>2]=l,Wt=0|i[(gt=Q)>>2],tn=0|i[gt+4>>2],Yt=0|i[(gt=Ce)>>2],Ot=0|i[gt+4>>2],gt=0|F(0|Wt,0|tn,18,0),Zt=l,Nt=0|k(0|Yt,0|Ot,0|Wt,0|tn),tn=0|k(0|Nt,0|l,0|gt,0|Zt),Zt=l,i[(gt=Ce)>>2]=tn,i[gt+4>>2]=Zt,i[(gt=Q)>>2]=0,i[gt+4>>2]=0,gt=Zt,Zt=tn,tn=0;do{Yt=0|B(0|Zt,0|gt,0|(Ot=0|x(0|(Wt=0|L(0|(Nt=0|k(gt>>31>>>6|0,0,0|Zt,0|gt)),0|l,26)),0|(Nt=l),26)),0|l),i[(Ot=Ce+(tn<<3)|0)>>2]=Yt,i[Ot+4>>2]=l,Gt=0|B(0|(_t=0|k(0|Wt,0|Nt,0|i[(Yt=Ot=Ce+((1|tn)<<3)|0)>>2],0|i[Yt+4>>2])),0|(Yt=l),0|(ht=0|x(0|(Wt=0|L(0|(Nt=0|k(Yt>>31>>>7|0,0,0|_t,0|Yt)),0|l,25)),0|(Nt=l),25)),0|l),i[(ht=Ot)>>2]=Gt,i[ht+4>>2]=l,Zt=0|k(0|Wt,0|Nt,0|i[(Gt=ht=Ce+((tn=tn+2|0)<<3)|0)>>2],0|i[Gt+4>>2]),gt=l,i[(Gt=ht)>>2]=Zt,i[Gt+4>>2]=gt}while(tn>>>0<10);gt=0|i[(tn=Q)>>2],Zt=0|i[tn+4>>2],Gt=0|i[(tn=Ce)>>2],ht=0|i[tn+4>>2],tn=0|F(0|gt,0|Zt,18,0),Nt=l,Wt=0|k(0|Gt,0|ht,0|gt,0|Zt),Zt=0|k(0|Wt,0|l,0|tn,0|Nt),Nt=l,i[(tn=Q)>>2]=0,i[tn+4>>2]=0,ht=0|B(0|Zt,0|Nt,0|(gt=0|x(0|(Wt=0|L(0|(tn=0|k(Nt>>31>>>6|0,0,0|Zt,0|Nt)),0|l,26)),0|(tn=l),26)),0|l),gt=l,Zt=0|k(0|Wt,0|tn,0|i[(Nt=H)>>2],0|i[Nt+4>>2]),Nt=l,Wt=0|i[(tn=A)>>2],Gt=0|i[tn+4>>2],Ot=0|i[(tn=g)>>2],Yt=0|i[tn+4>>2],_t=0|i[(tn=f)>>2],Tt=0|i[tn+4>>2],nn=0|i[(tn=Ve)>>2],Qt=0|i[tn+4>>2],$t=0|i[(tn=He)>>2],sn=0|i[tn+4>>2],Lt=0|i[(tn=qe)>>2],Bt=0|i[tn+4>>2],St=0|i[(tn=n)>>2],Ht=0|i[tn+4>>2],Kt=0|i[(tn=$)>>2],on=0|i[tn+4>>2],tn=0|k(0|ht,0|gt,0|Pt,0|yt),i[(rn=Pe)>>2]=tn,i[rn+4>>2]=l,rn=0|k(0|Zt,0|Nt,0|At,0|fn),i[(tn=E)>>2]=rn,i[tn+4>>2]=l,tn=0|k(0|(rn=0|i[(tn=V)>>2]),0|(mt=0|i[tn+4>>2]),0|Wt,0|Gt),i[(vt=A)>>2]=tn,i[vt+4>>2]=l,vt=0|k(0|(tn=0|i[(vt=Y)>>2]),0|(ln=0|i[vt+4>>2]),0|Ot,0|Yt),i[(Ut=g)>>2]=vt,i[Ut+4>>2]=l,Ut=0|k(0|(vt=0|i[(Ut=D)>>2]),0|(Rt=0|i[Ut+4>>2]),0|_t,0|Tt),i[(qt=f)>>2]=Ut,i[qt+4>>2]=l,qt=0|k(0|(Ut=0|i[(qt=N)>>2]),0|(Jt=0|i[qt+4>>2]),0|nn,0|Qt),i[(kt=Ve)>>2]=qt,i[kt+4>>2]=l,kt=0|k(0|(qt=0|i[(kt=O)>>2]),0|(an=0|i[kt+4>>2]),0|$t,0|sn),i[(Ft=He)>>2]=kt,i[Ft+4>>2]=l,Ft=0|k(0|(kt=0|i[(Ft=T)>>2]),0|(Mt=0|i[Ft+4>>2]),0|Lt,0|Bt),i[(bt=qe)>>2]=Ft,i[bt+4>>2]=l,bt=0|k(0|(Ft=0|i[(bt=v)>>2]),0|(pn=0|i[bt+4>>2]),0|St,0|Ht),i[(Dt=n)>>2]=bt,i[Dt+4>>2]=l,Dt=0|k(0|(bt=0|i[(Dt=q)>>2]),0|(un=0|i[Dt+4>>2]),0|Kt,0|on),i[(zt=$)>>2]=Dt,i[zt+4>>2]=l,zt=0|B(0|Pt,0|yt,0|ht,0|gt),i[(gt=Ce)>>2]=zt,i[gt+4>>2]=l,gt=0|B(0|At,0|fn,0|Zt,0|Nt),i[(Nt=H)>>2]=gt,i[Nt+4>>2]=l,Nt=0|B(0|Wt,0|Gt,0|rn,0|mt),i[(mt=V)>>2]=Nt,i[mt+4>>2]=l,mt=0|B(0|Ot,0|Yt,0|tn,0|ln),i[(ln=Y)>>2]=mt,i[ln+4>>2]=l,ln=0|B(0|_t,0|Tt,0|vt,0|Rt),i[(Rt=D)>>2]=ln,i[Rt+4>>2]=l,Rt=0|B(0|nn,0|Qt,0|Ut,0|Jt),i[(Jt=N)>>2]=Rt,i[Jt+4>>2]=l,Jt=0|B(0|$t,0|sn,0|qt,0|an),i[(an=O)>>2]=Jt,i[an+4>>2]=l,an=0|B(0|Lt,0|Bt,0|kt,0|Mt),i[(Mt=T)>>2]=an,i[Mt+4>>2]=l,Mt=0|B(0|St,0|Ht,0|Ft,0|pn),i[(pn=v)>>2]=Mt,i[pn+4>>2]=l,pn=0|B(0|Kt,0|on,0|bt,0|un),i[(un=q)>>2]=pn,i[un+4>>2]=l,P(Re,Pe),P(Oe,Ce),M(Ce,Oe,c),pn=0|i[(un=S)>>2],bt=0|i[un+4>>2],on=0|i[(un=v)>>2],Kt=0|i[un+4>>2],un=0|F(0|pn,0|bt,18,0),Mt=l,Ft=0|k(0|on,0|Kt,0|pn,0|bt),bt=0|k(0|Ft,0|l,0|un,0|Mt),i[(Mt=v)>>2]=bt,i[Mt+4>>2]=l,bt=0|i[(Mt=I)>>2],un=0|i[Mt+4>>2],Ft=0|i[(Mt=T)>>2],pn=0|i[Mt+4>>2],Mt=0|F(0|bt,0|un,18,0),Kt=l,on=0|k(0|Ft,0|pn,0|bt,0|un),un=0|k(0|on,0|l,0|Mt,0|Kt),i[(Kt=T)>>2]=un,i[Kt+4>>2]=l,un=0|i[(Kt=C)>>2],Mt=0|i[Kt+4>>2],on=0|i[(Kt=O)>>2],bt=0|i[Kt+4>>2],Kt=0|F(0|un,0|Mt,18,0),pn=l,Ft=0|k(0|on,0|bt,0|un,0|Mt),Mt=0|k(0|Ft,0|l,0|Kt,0|pn),i[(pn=O)>>2]=Mt,i[pn+4>>2]=l,Mt=0|i[(pn=R)>>2],Kt=0|i[pn+4>>2],Ft=0|i[(pn=N)>>2],un=0|i[pn+4>>2],pn=0|F(0|Mt,0|Kt,18,0),bt=l,on=0|k(0|Ft,0|un,0|Mt,0|Kt),Kt=0|k(0|on,0|l,0|pn,0|bt),i[(bt=N)>>2]=Kt,i[bt+4>>2]=l,Kt=0|i[(bt=w)>>2],pn=0|i[bt+4>>2],on=0|i[(bt=D)>>2],Mt=0|i[bt+4>>2],bt=0|F(0|Kt,0|pn,18,0),un=l,Ft=0|k(0|on,0|Mt,0|Kt,0|pn),pn=0|k(0|Ft,0|l,0|bt,0|un),i[(un=D)>>2]=pn,i[un+4>>2]=l,pn=0|i[(un=K)>>2],bt=0|i[un+4>>2],Ft=0|i[(un=Y)>>2],Kt=0|i[un+4>>2],un=0|F(0|pn,0|bt,18,0),Mt=l,on=0|k(0|Ft,0|Kt,0|pn,0|bt),bt=0|k(0|on,0|l,0|un,0|Mt),i[(Mt=Y)>>2]=bt,i[Mt+4>>2]=l,bt=0|i[(Mt=j)>>2],un=0|i[Mt+4>>2],on=0|i[(Mt=V)>>2],pn=0|i[Mt+4>>2],Mt=0|F(0|bt,0|un,18,0),Kt=l,Ft=0|k(0|on,0|pn,0|bt,0|un),un=0|k(0|Ft,0|l,0|Mt,0|Kt),i[(Kt=V)>>2]=un,i[Kt+4>>2]=l,un=0|i[(Kt=W)>>2],Mt=0|i[Kt+4>>2],Ft=0|i[(Kt=H)>>2],bt=0|i[Kt+4>>2],Kt=0|F(0|un,0|Mt,18,0),pn=l,on=0|k(0|Ft,0|bt,0|un,0|Mt),Mt=0|k(0|on,0|l,0|Kt,0|pn),i[(pn=H)>>2]=Mt,i[pn+4>>2]=l,Mt=0|i[(pn=Q)>>2],Kt=0|i[pn+4>>2],on=0|i[(pn=Ce)>>2],un=0|i[pn+4>>2],pn=0|F(0|Mt,0|Kt,18,0),bt=l,Ft=0|k(0|on,0|un,0|Mt,0|Kt),Kt=0|k(0|Ft,0|l,0|pn,0|bt),bt=l,i[(pn=Ce)>>2]=Kt,i[pn+4>>2]=bt,i[(pn=Q)>>2]=0,i[pn+4>>2]=0,pn=bt,bt=Kt,Kt=0;do{on=0|B(0|bt,0|pn,0|(un=0|x(0|(Mt=0|L(0|(Ft=0|k(pn>>31>>>6|0,0,0|bt,0|pn)),0|l,26)),0|(Ft=l),26)),0|l),i[(un=Ce+(Kt<<3)|0)>>2]=on,i[un+4>>2]=l,an=0|B(0|(Ht=0|k(0|Mt,0|Ft,0|i[(on=un=Ce+((1|Kt)<<3)|0)>>2],0|i[on+4>>2])),0|(on=l),0|(St=0|x(0|(Mt=0|L(0|(Ft=0|k(on>>31>>>7|0,0,0|Ht,0|on)),0|l,25)),0|(Ft=l),25)),0|l),i[(St=un)>>2]=an,i[St+4>>2]=l,bt=0|k(0|Mt,0|Ft,0|i[(an=St=Ce+((Kt=Kt+2|0)<<3)|0)>>2],0|i[an+4>>2]),pn=l,i[(an=St)>>2]=bt,i[an+4>>2]=pn}while(Kt>>>0<10);pn=0|i[(Kt=Q)>>2],bt=0|i[Kt+4>>2],fn=0|i[(Kt=Ce)>>2],At=0|i[Kt+4>>2],Kt=0|F(0|pn,0|bt,18,0),yt=l,Pt=0|k(0|fn,0|At,0|pn,0|bt),bt=0|k(0|Pt,0|l,0|Kt,0|yt),yt=l,i[(Kt=Q)>>2]=0,i[Kt+4>>2]=0,At=0|B(0|bt,0|yt,0|(pn=0|x(0|(Pt=0|L(0|(Kt=0|k(yt>>31>>>6|0,0,0|bt,0|yt)),0|l,26)),0|(Kt=l),26)),0|l),i[(pn=Ce)>>2]=At,i[pn+4>>2]=l,At=0|k(0|Pt,0|Kt,0|i[(pn=H)>>2],0|i[pn+4>>2]),i[(pn=H)>>2]=At,i[pn+4>>2]=l,je=Re,t=(Ye=it)+80|0;do{i[Ye>>2]=i[je>>2],Ye=Ye+4|0,je=je+4|0}while((0|Ye)<(0|t));je=Ce,t=(Ye=at)+80|0;do{i[Ye>>2]=i[je>>2],Ye=Ye+4|0,je=je+4|0}while((0|Ye)<(0|t));P(be,st),P(Me,ut),M(lt,be,Me),At=0|i[(pn=lt+144|0)>>2],Kt=0|i[pn+4>>2],yt=0|i[(Pt=pn=lt+64|0)>>2],bt=0|i[Pt+4>>2],Pt=0|F(0|At,0|Kt,18,0),fn=l,an=0|k(0|yt,0|bt,0|At,0|Kt),Kt=0|k(0|an,0|l,0|Pt,0|fn),i[(fn=pn)>>2]=Kt,i[fn+4>>2]=l,Kt=0|i[(fn=lt+136|0)>>2],pn=0|i[fn+4>>2],an=0|i[(Pt=fn=lt+56|0)>>2],At=0|i[Pt+4>>2],Pt=0|F(0|Kt,0|pn,18,0),bt=l,yt=0|k(0|an,0|At,0|Kt,0|pn),pn=0|k(0|yt,0|l,0|Pt,0|bt),i[(bt=fn)>>2]=pn,i[bt+4>>2]=l,pn=0|i[(bt=lt+128|0)>>2],fn=0|i[bt+4>>2],yt=0|i[(Pt=bt=lt+48|0)>>2],Kt=0|i[Pt+4>>2],Pt=0|F(0|pn,0|fn,18,0),At=l,an=0|k(0|yt,0|Kt,0|pn,0|fn),fn=0|k(0|an,0|l,0|Pt,0|At),i[(At=bt)>>2]=fn,i[At+4>>2]=l,fn=0|i[(At=lt+120|0)>>2],bt=0|i[At+4>>2],an=0|i[(Pt=At=lt+40|0)>>2],pn=0|i[Pt+4>>2],Pt=0|F(0|fn,0|bt,18,0),Kt=l,yt=0|k(0|an,0|pn,0|fn,0|bt),bt=0|k(0|yt,0|l,0|Pt,0|Kt),i[(Kt=At)>>2]=bt,i[Kt+4>>2]=l,bt=0|i[(Kt=lt+112|0)>>2],At=0|i[Kt+4>>2],yt=0|i[(Pt=Kt=lt+32|0)>>2],fn=0|i[Pt+4>>2],Pt=0|F(0|bt,0|At,18,0),pn=l,an=0|k(0|yt,0|fn,0|bt,0|At),At=0|k(0|an,0|l,0|Pt,0|pn),i[(pn=Kt)>>2]=At,i[pn+4>>2]=l,At=0|i[(pn=lt+104|0)>>2],Kt=0|i[pn+4>>2],an=0|i[(Pt=pn=lt+24|0)>>2],bt=0|i[Pt+4>>2],Pt=0|F(0|At,0|Kt,18,0),fn=l,yt=0|k(0|an,0|bt,0|At,0|Kt),Kt=0|k(0|yt,0|l,0|Pt,0|fn),i[(fn=pn)>>2]=Kt,i[fn+4>>2]=l,Kt=0|i[(fn=lt+96|0)>>2],pn=0|i[fn+4>>2],yt=0|i[(Pt=fn=lt+16|0)>>2],At=0|i[Pt+4>>2],Pt=0|F(0|Kt,0|pn,18,0),bt=l,an=0|k(0|yt,0|At,0|Kt,0|pn),pn=0|k(0|an,0|l,0|Pt,0|bt),i[(bt=fn)>>2]=pn,i[bt+4>>2]=l,pn=0|i[(bt=lt+88|0)>>2],fn=0|i[bt+4>>2],an=0|i[(Pt=bt=lt+8|0)>>2],Kt=0|i[Pt+4>>2],Pt=0|F(0|pn,0|fn,18,0),At=l,yt=0|k(0|an,0|Kt,0|pn,0|fn),fn=0|k(0|yt,0|l,0|Pt,0|At),i[(At=bt)>>2]=fn,i[At+4>>2]=l,Pt=0|i[(fn=At=lt+80|0)>>2],yt=0|i[fn+4>>2],pn=0|i[(fn=lt)>>2],Kt=0|i[fn+4>>2],fn=0|F(0|Pt,0|yt,18,0),an=l,St=0|k(0|pn,0|Kt,0|Pt,0|yt),yt=0|k(0|St,0|l,0|fn,0|an),an=l,i[(fn=lt)>>2]=yt,i[fn+4>>2]=an,i[(fn=At)>>2]=0,i[fn+4>>2]=0,fn=an,an=yt,yt=0;do{pn=0|B(0|an,0|fn,0|(Kt=0|x(0|(Pt=0|L(0|(St=0|k(fn>>31>>>6|0,0,0|an,0|fn)),0|l,26)),0|(St=l),26)),0|l),i[(Kt=lt+(yt<<3)|0)>>2]=pn,i[Kt+4>>2]=l,un=0|B(0|(Ft=0|k(0|Pt,0|St,0|i[(pn=Kt=lt+((1|yt)<<3)|0)>>2],0|i[pn+4>>2])),0|(pn=l),0|(Mt=0|x(0|(Pt=0|L(0|(St=0|k(pn>>31>>>7|0,0,0|Ft,0|pn)),0|l,25)),0|(St=l),25)),0|l),i[(Mt=Kt)>>2]=un,i[Mt+4>>2]=l,an=0|k(0|Pt,0|St,0|i[(un=Mt=lt+((yt=yt+2|0)<<3)|0)>>2],0|i[un+4>>2]),fn=l,i[(un=Mt)>>2]=an,i[un+4>>2]=fn}while(yt>>>0<10);fn=0|i[(yt=At)>>2],an=0|i[yt+4>>2],un=0|i[(yt=lt)>>2],Mt=0|i[yt+4>>2],yt=0|F(0|fn,0|an,18,0),St=l,Pt=0|k(0|un,0|Mt,0|fn,0|an),an=0|k(0|Pt,0|l,0|yt,0|St),St=l,i[(yt=At)>>2]=0,i[yt+4>>2]=0,Mt=0|B(0|an,0|St,0|(fn=0|x(0|(Pt=0|L(0|(yt=0|k(St>>31>>>6|0,0,0|an,0|St)),0|l,26)),0|(yt=l),26)),0|l),i[(fn=lt)>>2]=Mt,i[fn+4>>2]=l,Mt=0|k(0|Pt,0|yt,0|i[(fn=bt)>>2],0|i[fn+4>>2]),i[(fn=bt)>>2]=Mt,i[fn+4>>2]=l,Pt=0|B(0|(Mt=0|i[(fn=be)>>2]),0|(yt=0|i[fn+4>>2]),0|i[(fn=Me)>>2],0|i[fn+4>>2]),fn=l,i[(St=Me)>>2]=Pt,i[St+4>>2]=fn,Kt=0|B(0|(an=0|i[(St=J)>>2]),0|(un=0|i[St+4>>2]),0|i[(St=z)>>2],0|i[St+4>>2]),St=l,i[(pn=z)>>2]=Kt,i[pn+4>>2]=St,Ht=0|B(0|(Ft=0|i[(pn=X)>>2]),0|(on=0|i[pn+4>>2]),0|i[(pn=Z)>>2],0|i[pn+4>>2]),pn=l,i[(kt=Z)>>2]=Ht,i[kt+4>>2]=pn,Jt=0|B(0|(Bt=0|i[(kt=ee)>>2]),0|(Lt=0|i[kt+4>>2]),0|i[(kt=te)>>2],0|i[kt+4>>2]),kt=l,i[(qt=te)>>2]=Jt,i[qt+4>>2]=kt,Rt=0|B(0|(sn=0|i[(qt=ne)>>2]),0|($t=0|i[qt+4>>2]),0|i[(qt=re)>>2],0|i[qt+4>>2]),qt=l,i[(Ut=re)>>2]=Rt,i[Ut+4>>2]=qt,ln=0|B(0|(Qt=0|i[(Ut=ie)>>2]),0|(nn=0|i[Ut+4>>2]),0|i[(Ut=oe)>>2],0|i[Ut+4>>2]),Ut=l,i[(vt=oe)>>2]=ln,i[vt+4>>2]=Ut,mt=0|B(0|(Tt=0|i[(vt=ae)>>2]),0|(_t=0|i[vt+4>>2]),0|i[(vt=se)>>2],0|i[vt+4>>2]),vt=l,i[(tn=se)>>2]=mt,i[tn+4>>2]=vt,Nt=0|B(0|(Yt=0|i[(tn=le)>>2]),0|(Ot=0|i[tn+4>>2]),0|i[(tn=ue)>>2],0|i[tn+4>>2]),tn=l,i[(rn=ue)>>2]=Nt,i[rn+4>>2]=tn,gt=0|B(0|(Gt=0|i[(rn=ce)>>2]),0|(Wt=0|i[rn+4>>2]),0|i[(rn=de)>>2],0|i[rn+4>>2]),rn=l,i[(Zt=de)>>2]=gt,i[Zt+4>>2]=rn,Dt=0|B(0|(zt=0|i[(Zt=pe)>>2]),0|(ht=0|i[Zt+4>>2]),0|i[(Zt=fe)>>2],0|i[Zt+4>>2]),Zt=l,i[(Xt=fe)>>2]=Dt,i[Xt+4>>2]=Zt,t=(Ye=_e)+72|0;do{i[Ye>>2]=0,Ye=Ye+4|0}while((0|Ye)<(0|t));bt=0|F(0|Pt,0|fn,121665,0),At=l,i[(Xt=Te)>>2]=bt,i[Xt+4>>2]=At,Xt=0|F(0|Kt,0|St,121665,0),i[(Et=ge)>>2]=Xt,i[Et+4>>2]=l,Et=0|F(0|Ht,0|pn,121665,0),i[(Xt=he)>>2]=Et,i[Xt+4>>2]=l,Xt=0|F(0|Jt,0|kt,121665,0),i[(Et=Ae)>>2]=Xt,i[Et+4>>2]=l,Et=0|F(0|Rt,0|qt,121665,0),i[(Xt=me)>>2]=Et,i[Xt+4>>2]=l,Xt=0|F(0|ln,0|Ut,121665,0),i[(Et=Ee)>>2]=Xt,i[Et+4>>2]=l,Et=0|F(0|mt,0|vt,121665,0),i[(Xt=ye)>>2]=Et,i[Xt+4>>2]=l,Xt=0|F(0|Nt,0|tn,121665,0),i[(Et=Se)>>2]=Xt,i[Et+4>>2]=l,Et=0|F(0|gt,0|rn,121665,0),i[(Xt=ve)>>2]=Et,i[Xt+4>>2]=l,Xt=0|F(0|Dt,0|Zt,121665,0),i[(Et=Ie)>>2]=Xt,i[Et+4>>2]=l,i[(Et=_e)>>2]=0,i[Et+4>>2]=0,Et=At,At=bt,bt=0;do{xt=0|B(0|At,0|Et,0|(Vt=0|x(0|(jt=0|L(0|(Xt=0|k(Et>>31>>>6|0,0,0|At,0|Et)),0|l,26)),0|(Xt=l),26)),0|l),i[(Vt=Te+(bt<<3)|0)>>2]=xt,i[Vt+4>>2]=l,cn=0|B(0|(Ct=0|k(0|jt,0|Xt,0|i[(xt=Vt=Te+((1|bt)<<3)|0)>>2],0|i[xt+4>>2])),0|(xt=l),0|(dn=0|x(0|(jt=0|L(0|(Xt=0|k(xt>>31>>>7|0,0,0|Ct,0|xt)),0|l,25)),0|(Xt=l),25)),0|l),i[(dn=Vt)>>2]=cn,i[dn+4>>2]=l,At=0|k(0|jt,0|Xt,0|i[(cn=dn=Te+((bt=bt+2|0)<<3)|0)>>2],0|i[cn+4>>2]),Et=l,i[(cn=dn)>>2]=At,i[cn+4>>2]=Et}while(bt>>>0<10);Et=0|i[(bt=_e)>>2],At=0|i[bt+4>>2],Zt=0|i[(bt=Te)>>2],Dt=0|i[bt+4>>2],bt=0|F(0|Et,0|At,18,0),rn=l,gt=0|k(0|Zt,0|Dt,0|Et,0|At),At=0|k(0|gt,0|l,0|bt,0|rn),rn=l,i[(bt=_e)>>2]=0,i[bt+4>>2]=0,Et=0|x(0|(gt=0|L(0|(bt=0|k(rn>>31>>>6|0,0,0|At,0|rn)),0|l,26)),0|(bt=l),26),Dt=l,tn=0|i[(Zt=ge)>>2],Nt=0|i[Zt+4>>2],rn=0|B(0|(Zt=0|k(0|At,0|rn,0|Mt,0|yt)),0|l,0|Et,0|Dt),i[(Dt=Te)>>2]=rn,i[Dt+4>>2]=l,Dt=0|k(0|tn,0|Nt,0|an,0|un),Nt=0|k(0|Dt,0|l,0|gt,0|bt),i[(bt=ge)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=he)>>2],0|i[bt+4>>2],0|Ft,0|on),i[(bt=he)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=Ae)>>2],0|i[bt+4>>2],0|Bt,0|Lt),i[(bt=Ae)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=me)>>2],0|i[bt+4>>2],0|sn,0|$t),i[(bt=me)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=Ee)>>2],0|i[bt+4>>2],0|Qt,0|nn),i[(bt=Ee)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=ye)>>2],0|i[bt+4>>2],0|Tt,0|_t),i[(bt=ye)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=Se)>>2],0|i[bt+4>>2],0|Yt,0|Ot),i[(bt=Se)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=ve)>>2],0|i[bt+4>>2],0|Gt,0|Wt),i[(bt=ve)>>2]=Nt,i[bt+4>>2]=l,Nt=0|k(0|i[(bt=Ie)>>2],0|i[bt+4>>2],0|zt,0|ht),i[(bt=Ie)>>2]=Nt,i[bt+4>>2]=l,M(ct,Me,Te),Nt=0|i[(bt=ct+144|0)>>2],gt=0|i[bt+4>>2],tn=0|i[(Dt=bt=ct+64|0)>>2],rn=0|i[Dt+4>>2],Dt=0|F(0|Nt,0|gt,18,0),Et=l,Zt=0|k(0|tn,0|rn,0|Nt,0|gt),gt=0|k(0|Zt,0|l,0|Dt,0|Et),i[(Et=bt)>>2]=gt,i[Et+4>>2]=l,gt=0|i[(Et=ct+136|0)>>2],bt=0|i[Et+4>>2],Zt=0|i[(Dt=Et=ct+56|0)>>2],Nt=0|i[Dt+4>>2],Dt=0|F(0|gt,0|bt,18,0),rn=l,tn=0|k(0|Zt,0|Nt,0|gt,0|bt),bt=0|k(0|tn,0|l,0|Dt,0|rn),i[(rn=Et)>>2]=bt,i[rn+4>>2]=l,bt=0|i[(rn=ct+128|0)>>2],Et=0|i[rn+4>>2],tn=0|i[(Dt=rn=ct+48|0)>>2],gt=0|i[Dt+4>>2],Dt=0|F(0|bt,0|Et,18,0),Nt=l,Zt=0|k(0|tn,0|gt,0|bt,0|Et),Et=0|k(0|Zt,0|l,0|Dt,0|Nt),i[(Nt=rn)>>2]=Et,i[Nt+4>>2]=l,Et=0|i[(Nt=ct+120|0)>>2],rn=0|i[Nt+4>>2],Zt=0|i[(Dt=Nt=ct+40|0)>>2],bt=0|i[Dt+4>>2],Dt=0|F(0|Et,0|rn,18,0),gt=l,tn=0|k(0|Zt,0|bt,0|Et,0|rn),rn=0|k(0|tn,0|l,0|Dt,0|gt),i[(gt=Nt)>>2]=rn,i[gt+4>>2]=l,rn=0|i[(gt=ct+112|0)>>2],Nt=0|i[gt+4>>2],tn=0|i[(Dt=gt=ct+32|0)>>2],Et=0|i[Dt+4>>2],Dt=0|F(0|rn,0|Nt,18,0),bt=l,Zt=0|k(0|tn,0|Et,0|rn,0|Nt),Nt=0|k(0|Zt,0|l,0|Dt,0|bt),i[(bt=gt)>>2]=Nt,i[bt+4>>2]=l,Nt=0|i[(bt=ct+104|0)>>2],gt=0|i[bt+4>>2],Zt=0|i[(Dt=bt=ct+24|0)>>2],rn=0|i[Dt+4>>2],Dt=0|F(0|Nt,0|gt,18,0),Et=l,tn=0|k(0|Zt,0|rn,0|Nt,0|gt),gt=0|k(0|tn,0|l,0|Dt,0|Et),i[(Et=bt)>>2]=gt,i[Et+4>>2]=l,gt=0|i[(Et=ct+96|0)>>2],bt=0|i[Et+4>>2],tn=0|i[(Dt=Et=ct+16|0)>>2],Nt=0|i[Dt+4>>2],Dt=0|F(0|gt,0|bt,18,0),rn=l,Zt=0|k(0|tn,0|Nt,0|gt,0|bt),bt=0|k(0|Zt,0|l,0|Dt,0|rn),i[(rn=Et)>>2]=bt,i[rn+4>>2]=l,bt=0|i[(rn=ct+88|0)>>2],Et=0|i[rn+4>>2],Zt=0|i[(Dt=rn=ct+8|0)>>2],gt=0|i[Dt+4>>2],Dt=0|F(0|bt,0|Et,18,0),Nt=l,tn=0|k(0|Zt,0|gt,0|bt,0|Et),Et=0|k(0|tn,0|l,0|Dt,0|Nt),i[(Nt=rn)>>2]=Et,i[Nt+4>>2]=l,Dt=0|i[(Et=Nt=ct+80|0)>>2],tn=0|i[Et+4>>2],bt=0|i[(Et=ct)>>2],gt=0|i[Et+4>>2],Et=0|F(0|Dt,0|tn,18,0),Zt=l,At=0|k(0|bt,0|gt,0|Dt,0|tn),tn=0|k(0|At,0|l,0|Et,0|Zt),Zt=l,i[(Et=ct)>>2]=tn,i[Et+4>>2]=Zt,i[(Et=Nt)>>2]=0,i[Et+4>>2]=0,Et=Zt,Zt=tn,tn=0;do{bt=0|B(0|Zt,0|Et,0|(gt=0|x(0|(Dt=0|L(0|(At=0|k(Et>>31>>>6|0,0,0|Zt,0|Et)),0|l,26)),0|(At=l),26)),0|l),i[(gt=ct+(tn<<3)|0)>>2]=bt,i[gt+4>>2]=l,Ut=0|B(0|(vt=0|k(0|Dt,0|At,0|i[(bt=gt=ct+((1|tn)<<3)|0)>>2],0|i[bt+4>>2])),0|(bt=l),0|(mt=0|x(0|(Dt=0|L(0|(At=0|k(bt>>31>>>7|0,0,0|vt,0|bt)),0|l,25)),0|(At=l),25)),0|l),i[(mt=gt)>>2]=Ut,i[mt+4>>2]=l,Zt=0|k(0|Dt,0|At,0|i[(Ut=mt=ct+((tn=tn+2|0)<<3)|0)>>2],0|i[Ut+4>>2]),Et=l,i[(Ut=mt)>>2]=Zt,i[Ut+4>>2]=Et}while(tn>>>0<10);Et=0|i[(tn=Nt)>>2],Zt=0|i[tn+4>>2],ht=0|i[(tn=ct)>>2],zt=0|i[tn+4>>2],tn=0|F(0|Et,0|Zt,18,0),Wt=l,Gt=0|k(0|ht,0|zt,0|Et,0|Zt),Zt=0|k(0|Gt,0|l,0|tn,0|Wt),Wt=l,i[(tn=Nt)>>2]=0,i[tn+4>>2]=0,zt=0|B(0|Zt,0|Wt,0|(Et=0|x(0|(Gt=0|L(0|(tn=0|k(Wt>>31>>>6|0,0,0|Zt,0|Wt)),0|l,26)),0|(tn=l),26)),0|l),i[(Et=ct)>>2]=zt,i[Et+4>>2]=l,zt=0|k(0|Gt,0|tn,0|i[(Et=rn)>>2],0|i[Et+4>>2]),i[(Et=rn)>>2]=zt,i[Et+4>>2]=l,Et=0;do{Gt=0|i[(tn=zt=lt+(Et<<3)|0)>>2],Wt=0|i[tn+4>>2],ht=0|i[(Zt=tn=it+(Et<<3)|0)>>2],Yt=((Ot=0|i[Zt+4>>2])^Wt)&ft,Wt=0|L(0,(Zt=(ht^Gt)&pt)^Gt|0,32),i[(Gt=zt)>>2]=Wt,i[Gt+4>>2]=l,Gt=0|L(0,Zt^ht|0,32),i[(ht=tn)>>2]=Gt,i[ht+4>>2]=l,Et=Et+1|0}while(10!=(0|Et));_n=0;do{Nt=0|i[(rn=Et=ct+(_n<<3)|0)>>2],ht=0|i[rn+4>>2],tn=0|i[(Gt=rn=at+(_n<<3)|0)>>2],Wt=((Zt=0|i[Gt+4>>2])^ht)&ft,ht=0|L(0,(Gt=(tn^Nt)&pt)^Nt|0,32),i[(Nt=Et)>>2]=ht,i[Nt+4>>2]=l,Nt=0|L(0,Gt^tn|0,32),i[(tn=rn)>>2]=Nt,i[tn+4>>2]=l,_n=_n+1|0}while(10!=(0|_n));if(8==(0|(nt=nt+1|0))){gn=rt,hn=it,An=ot,mn=at,En=st,yn=lt,Sn=ut,vn=ct;break}ft=ct,pt=lt,tn=at,Nt=it,Ue=dt<<1&255,ct=ut,ut=ft,lt=st,st=pt,at=ot,ot=tn,it=rt,rt=Nt}if(32==(0|(rt=ze+1|0))){In=yn,Tn=vn;break}ze=rt,Xe=hn,Ze=gn,Be=mn,et=An,ke=yn,tt=En,Ge=vn,Le=Sn}je=In,t=(Ye=xe)+80|0;do{i[Ye>>2]=i[je>>2],Ye=Ye+4|0,je=je+4|0}while((0|Ye)<(0|t));je=Tn,t=(Ye=Fe)+80|0;do{i[Ye>>2]=i[je>>2],Ye=Ye+4|0,je=je+4|0}while((0|Ye)<(0|t));P(Te,Fe),P(De,Te),P(we,De),b(be,we,Fe),b(Me,be,Te),P(we,Me),b(Pe,we,be),P(we,Pe),P(De,we),P(we,De),P(De,we),P(we,De),b(Ce,we,Pe),P(we,Ce),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),b(Oe,De,Ce),P(we,Oe),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),b(we,De,Oe),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),P(we,De),b(Re,we,Ce),P(we,Re),P(De,we),Ce=2;do{P(we,De),P(De,we),Ce=Ce+2|0}while((0|Ce)<50);b(Ne,De,Re),P(De,Ne),P(we,De),Ce=2;do{P(De,we),P(we,De),Ce=Ce+2|0}while((0|Ce)<100);b(De,we,Ne),P(we,De),P(De,we),Ne=2;do{P(we,De),P(De,we),Ne=Ne+2|0}while((0|Ne)<50);for(b(we,De,Re),P(De,we),P(we,De),P(De,we),P(we,De),P(De,we),b(Ke,De,Me),b(Fe,xe,Ke),Ke=0|i[Fe>>2],i[Te>>2]=Ke,i[(xe=Te+4|0)>>2]=i[Fe+8>>2],i[(Me=Te+8|0)>>2]=i[Fe+16>>2],i[(De=Te+12|0)>>2]=i[Fe+24>>2],i[(we=Te+16|0)>>2]=i[Fe+32>>2],i[(Re=Te+20|0)>>2]=i[Fe+40>>2],i[(Ne=Te+24|0)>>2]=i[Fe+48>>2],i[(Ce=Te+28|0)>>2]=i[Fe+56>>2],i[(Oe=Te+32|0)>>2]=i[Fe+64>>2],i[(Pe=Te+36|0)>>2]=i[Fe+72>>2],Fe=Ke,Ke=0;be=Te+(Ke<<2)|0,je=Fe>>31&Fe,1&Ke?(t=je>>25,i[be>>2]=(0|u(t,-33554432))+Fe,In=(0|i[(je=Te+((be=Ke+1|0)<<2)|0)>>2])+t|0,i[je>>2]=In,bn=In,Mn=be):(Ye=je>>26,i[be>>2]=(0|u(Ye,-67108864))+Fe,In=(0|i[(Tn=Te+((t=Ke+1|0)<<2)|0)>>2])+Ye|0,i[Tn>>2]=In,bn=In,Mn=t),9!=(0|Mn);)Fe=bn,Ke=Mn;for(Ke=((Mn=0|i[Pe>>2])>>31&Mn)>>25,i[Pe>>2]=(0|u(Ke,-33554432))+Mn,Mn=(19*Ke|0)+(0|i[Te>>2])|0,i[Te>>2]=Mn,Ke=Mn,Mn=0;bn=Te+(Mn<<2)|0,Fe=Ke>>31&Ke,1&Mn?(t=Fe>>25,i[bn>>2]=(0|u(t,-33554432))+Ke,In=(0|i[(Fe=Te+((bn=Mn+1|0)<<2)|0)>>2])+t|0,i[Fe>>2]=In,Pn=bn,Cn=In):(be=Fe>>26,i[bn>>2]=(0|u(be,-67108864))+Ke,t=(0|i[(je=Te+((In=Mn+1|0)<<2)|0)>>2])+be|0,i[je>>2]=t,Pn=In,Cn=t),9!=(0|Pn);)Ke=Cn,Mn=Pn;for(Mn=((Pn=0|i[Pe>>2])>>31&Pn)>>25,i[Pe>>2]=(0|u(Mn,-33554432))+Pn,Pn=(19*Mn|0)+(0|i[Te>>2])|0,Cn=(0|u(Mn=(Pn>>31&Pn)>>26,-67108864))+Pn|0,i[Te>>2]=Cn,i[xe>>2]=Mn+(0|i[xe>>2]),Mn=Cn,Cn=0;Pn=Te+(Cn<<2)|0,1&Cn?(i[Pn>>2]=33554431&Mn,Ke=(0|i[(bn=Te+((Pn=Cn+1|0)<<2)|0)>>2])+(Mn>>25)|0,i[bn>>2]=Ke,On=Pn,Rn=Ke):(i[Pn>>2]=67108863&Mn,bn=(0|i[(In=Te+((Ke=Cn+1|0)<<2)|0)>>2])+(Mn>>26)|0,i[In>>2]=bn,On=Ke,Rn=bn),9!=(0|On);)Mn=Rn,Cn=On;for(On=0|i[Pe>>2],i[Pe>>2]=33554431&On,Cn=(19*(On>>25)|0)+(0|i[Te>>2])|0,i[Te>>2]=Cn,On=Cn,Cn=0;Rn=Te+(Cn<<2)|0,1&Cn?(i[Rn>>2]=33554431&On,Mn=(0|i[(Pn=Te+((Rn=Cn+1|0)<<2)|0)>>2])+(On>>25)|0,i[Pn>>2]=Mn,Nn=Rn,wn=Mn):(i[Rn>>2]=67108863&On,Pn=(0|i[(Ke=Te+((Mn=Cn+1|0)<<2)|0)>>2])+(On>>26)|0,i[Ke>>2]=Pn,Nn=Mn,wn=Pn),9!=(0|Nn);)On=wn,Cn=Nn;for(Cn=33554431&(Nn=0|i[Pe>>2]),i[Pe>>2]=Cn,wn=(19*(Nn>>25)|0)+(0|i[Te>>2])|0,i[Te>>2]=wn,Nn=1,On=~(wn+-67108845>>31);;){if(Mn=0|i[Te+(Nn<<2)>>2],Dn=1&Nn?(Mn=(Pn=(Mn=(Pn=Mn<<16&(-33554432^Mn))<<8&Pn)<<4&Mn)<<2&Pn)<<1&Mn:(Pn=(Rn=(Pn=(Rn=Mn<<16&(-67108864^Mn))<<8&Rn)<<4&Pn)<<2&Rn)<<1&Pn,Mn=Dn>>31&On,10==(0|(Nn=Nn+1|0))){Ln=Mn;break}On=Mn}return On=wn-(67108845&Ln)|0,i[Te>>2]=On,Te=67108863&Ln,wn=33554431&Ln,Dn=(Nn=(0|i[xe>>2])-wn|0)<<2,Pn=(Mn=(0|i[Me>>2])-Te|0)<<3,Ke=(Rn=(0|i[De>>2])-wn|0)<<5,Ln=(bn=(0|i[we>>2])-Ln|0)<<6,In=(0|i[Re>>2])-wn|0,i[Re>>2]=In,Fe=(Re=(0|i[Ne>>2])-Te|0)<<1,je=(t=(0|i[Ce>>2])-wn|0)<<3,be=(0|i[Oe>>2])-Te<<4,i[xe>>2]=Dn,i[Me>>2]=Pn,i[De>>2]=Ke,i[we>>2]=Ln,i[Ne>>2]=Fe,i[Ce>>2]=je,i[Oe>>2]=be,i[Pe>>2]=Cn-wn<<6,r[e>>0]=On,r[e+1>>0]=On>>>8,r[e+2>>0]=On>>>16,r[e+3>>0]=Dn|On>>>24,r[e+4>>0]=Nn>>>6,r[e+5>>0]=Nn>>>14,r[e+6>>0]=Pn|Nn>>>22,r[e+7>>0]=Mn>>>5,r[e+8>>0]=Mn>>>13,r[e+9>>0]=Ke|Mn>>>21,r[e+10>>0]=Rn>>>3,r[e+11>>0]=Rn>>>11,r[e+12>>0]=Ln|Rn>>>19,r[e+13>>0]=bn>>>2,r[e+14>>0]=bn>>>10,r[e+15>>0]=bn>>>18,r[e+16>>0]=In,r[e+17>>0]=In>>>8,r[e+18>>0]=In>>>16,r[e+19>>0]=In>>>24|Fe,r[e+20>>0]=Re>>>7,r[e+21>>0]=Re>>>15,r[e+22>>0]=Re>>>23|je,r[e+23>>0]=t>>>5,r[e+24>>0]=t>>>13,je=0|i[Oe>>2],r[e+25>>0]=t>>>21|je,r[e+26>>0]=je>>>8,r[e+27>>0]=je>>>16,t=0|i[Pe>>2],r[e+28>>0]=je>>>24|t,r[e+29>>0]=t>>>8,r[e+30>>0]=t>>>16,r[e+31>>0]=t>>>24,a=s,0},_free:function(e){var t,n,r=0,o=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0,f=0,_=0,h=0,A=0,m=0,E=0,y=0,S=0,v=0,I=0,T=0,b=0,M=0,P=0,C=0,O=0,R=0,N=0,w=0,D=0,L=0,B=0,k=0,G=0,U=0;if(e|=0){(r=e+-8|0)>>>0<(o=0|i[47])>>>0&&g(),1==(0|(e=3&(t=0|i[e+-4>>2])))&&g(),n=r+(a=-8&t)|0;do{if(1&t)p=r,f=a;else{if(s=0|i[r>>2],!e)return;if(u=s+a|0,(l=r+(0-s)|0)>>>0<o>>>0&&g(),(0|l)==(0|i[48])){if(3!=(3&(d=0|i[(c=n+4|0)>>2])|0)){p=l,f=u;break}return i[45]=u,i[c>>2]=-2&d,i[l+4>>2]=1|u,void(i[l+u>>2]=u)}if(d=s>>>3,s>>>0<256){if(s=0|i[l+8>>2],c=0|i[l+12>>2],(0|s)!=(0|(_=212+(d<<1<<2)|0))&&(s>>>0<o>>>0&&g(),(0|i[s+12>>2])!=(0|l)&&g()),(0|c)==(0|s)){i[43]=i[43]&~(1<<d),p=l,f=u;break}(0|c)!=(0|_)?(c>>>0<o>>>0&&g(),(0|i[(_=c+8|0)>>2])==(0|l)?h=_:g()):h=c+8|0,i[s+12>>2]=c,i[h>>2]=s,p=l,f=u;break}s=0|i[l+24>>2],c=0|i[l+12>>2];do{if((0|c)==(0|l)){if(A=0|i[(d=(_=l+16|0)+4|0)>>2])y=A,S=d;else{if(!(m=0|i[_>>2])){E=0;break}y=m,S=_}for(;;)if(A=0|i[(d=y+20|0)>>2])y=A,S=d;else{if(!(A=0|i[(d=y+16|0)>>2])){v=y,I=S;break}y=A,S=d}if(!(I>>>0<o>>>0)){i[I>>2]=0,E=v;break}g()}else{if((d=0|i[l+8>>2])>>>0<o>>>0&&g(),(0|i[(A=d+12|0)>>2])!=(0|l)&&g(),(0|i[(_=c+8|0)>>2])==(0|l)){i[A>>2]=c,i[_>>2]=d,E=c;break}g()}}while(0);if(s){if(c=0|i[l+28>>2],(0|l)==(0|i[(d=476+(c<<2)|0)>>2])){if(i[d>>2]=E,!E){i[44]=i[44]&~(1<<c),p=l,f=u;break}}else if(s>>>0<(0|i[47])>>>0&&g(),(0|i[(c=s+16|0)>>2])==(0|l)?i[c>>2]=E:i[s+20>>2]=E,!E){p=l,f=u;break}E>>>0<(c=0|i[47])>>>0&&g(),i[E+24>>2]=s,_=0|i[(d=l+16|0)>>2];do{if(_){if(!(_>>>0<c>>>0)){i[E+16>>2]=_,i[_+24>>2]=E;break}g()}}while(0);if(_=0|i[d+4>>2]){if(!(_>>>0<(0|i[47])>>>0)){i[E+20>>2]=_,i[_+24>>2]=E,p=l,f=u;break}g()}else p=l,f=u}else p=l,f=u}}while(0);if(p>>>0>=n>>>0&&g(),1&(r=0|i[(a=n+4|0)>>2])||g(),2&r)i[a>>2]=-2&r,i[p+4>>2]=1|f,i[p+f>>2]=f,R=f;else{if((0|n)==(0|i[49])){if(E=(0|i[46])+f|0,i[46]=E,i[49]=p,i[p+4>>2]=1|E,(0|p)!=(0|i[48]))return;return i[48]=0,void(i[45]=0)}if((0|n)==(0|i[48]))return E=(0|i[45])+f|0,i[45]=E,i[48]=p,i[p+4>>2]=1|E,void(i[p+E>>2]=E);E=(-8&r)+f|0,o=r>>>3;do{if(r>>>0>=256){v=0|i[n+24>>2],I=0|i[n+12>>2];do{if((0|I)==(0|n)){if(h=0|i[(y=(S=n+16|0)+4|0)>>2])b=h,M=y;else{if(!(e=0|i[S>>2])){T=0;break}b=e,M=S}for(;;)if(h=0|i[(y=b+20|0)>>2])b=h,M=y;else{if(!(h=0|i[(y=b+16|0)>>2])){P=b,C=M;break}b=h,M=y}if(!(C>>>0<(0|i[47])>>>0)){i[C>>2]=0,T=P;break}g()}else{if((y=0|i[n+8>>2])>>>0<(0|i[47])>>>0&&g(),(0|i[(h=y+12|0)>>2])!=(0|n)&&g(),(0|i[(S=I+8|0)>>2])==(0|n)){i[h>>2]=I,i[S>>2]=y,T=I;break}g()}}while(0);if(v){if(I=0|i[n+28>>2],(0|n)==(0|i[(u=476+(I<<2)|0)>>2])){if(i[u>>2]=T,!T){i[44]=i[44]&~(1<<I);break}}else if(v>>>0<(0|i[47])>>>0&&g(),(0|i[(I=v+16|0)>>2])==(0|n)?i[I>>2]=T:i[v+20>>2]=T,!T)break;T>>>0<(I=0|i[47])>>>0&&g(),i[T+24>>2]=v,l=0|i[(u=n+16|0)>>2];do{if(l){if(!(l>>>0<I>>>0)){i[T+16>>2]=l,i[l+24>>2]=T;break}g()}}while(0);if(l=0|i[u+4>>2]){if(!(l>>>0<(0|i[47])>>>0)){i[T+20>>2]=l,i[l+24>>2]=T;break}g()}}}else{if(l=0|i[n+8>>2],I=0|i[n+12>>2],(0|l)!=(0|(v=212+(o<<1<<2)|0))&&(l>>>0<(0|i[47])>>>0&&g(),(0|i[l+12>>2])!=(0|n)&&g()),(0|I)==(0|l)){i[43]=i[43]&~(1<<o);break}(0|I)!=(0|v)?(I>>>0<(0|i[47])>>>0&&g(),(0|i[(v=I+8|0)>>2])==(0|n)?O=v:g()):O=I+8|0,i[l+12>>2]=I,i[O>>2]=l}}while(0);if(i[p+4>>2]=1|E,i[p+E>>2]=E,(0|p)==(0|i[48]))return void(i[45]=E);R=E}if(f=R>>>3,R>>>0<256)return r=212+(f<<1<<2)|0,(a=0|i[43])&(E=1<<f)?(O=0|i[(f=r+8|0)>>2])>>>0<(0|i[47])>>>0?g():(N=f,w=O):(i[43]=a|E,N=r+8|0,w=r),i[N>>2]=p,i[w+12>>2]=p,i[p+8>>2]=w,void(i[p+12>>2]=r);D=(r=R>>>8)?R>>>0>16777215?31:R>>>((a=14-((r=((N=r<<(w=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|w|(N=((E=N<<r)+245760|0)>>>16&2))+(E<<N>>>15)|0)+7|0)&1|a<<1:0,a=476+(D<<2)|0,i[p+28>>2]=D,i[p+20>>2]=0,i[p+16>>2]=0,N=0|i[44],E=1<<D;do{if(N&E){for(w=R<<(31==(0|D)?0:25-(D>>>1)|0),r=0|i[a>>2];;){if((-8&i[r+4>>2]|0)==(0|R)){L=r,B=130;break}if(!(f=0|i[(O=r+16+(w>>>31<<2)|0)>>2])){k=O,G=r,B=127;break}w<<=1,r=f}if(127==(0|B)){if(!(k>>>0<(0|i[47])>>>0)){i[k>>2]=p,i[p+24>>2]=G,i[p+12>>2]=p,i[p+8>>2]=p;break}g()}else if(130==(0|B)){if((w=0|i[(r=L+8|0)>>2])>>>0>=(u=0|i[47])>>>0&L>>>0>=u>>>0){i[w+12>>2]=p,i[r>>2]=p,i[p+8>>2]=w,i[p+12>>2]=L,i[p+24>>2]=0;break}g()}}else i[44]=N|E,i[a>>2]=p,i[p+24>>2]=a,i[p+12>>2]=p,i[p+8>>2]=p}while(0);if(p=(0|i[51])-1|0,i[51]=p,!p){for(U=628;p=0|i[U>>2];)U=p+8|0;i[51]=-1}}},_i64Add:k,_bitshift64Ashr:L,_i64Subtract:B,_memset:G,_malloc:function(e){e|=0;var t=0,n=0,r=0,o=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0,f=0,_=0,m=0,E=0,y=0,S=0,v=0,T=0,b=0,M=0,P=0,O=0,R=0,N=0,w=0,D=0,L=0,B=0,k=0,G=0,U=0,x=0,F=0,K=0,Y=0,j=0,V=0,W=0,H=0,Q=0,$=0,q=0,J=0,z=0,X=0,Z=0,ee=0,te=0,ne=0,re=0,ie=0,oe=0,ae=0,se=0,le=0,ue=0,ce=0,de=0,pe=0,fe=0,_e=0,ge=0,he=0,Ae=0,me=0,Ee=0,ye=0,Se=0,ve=0,Ie=0,Te=0,be=0,Me=0,Pe=0,Ce=0,Oe=0,Re=0,Ne=0,we=0,De=0,Le=0,Be=0,ke=0,Ge=0,Ue=0,xe=0,Fe=0,Ke=0,Ye=0;do{if(e>>>0<245){if(n=(t=e>>>0<11?16:e+11&-8)>>>3,3&(o=(r=0|i[43])>>>n)){u=0|i[(l=(s=212+((a=(1&o^1)+n|0)<<1<<2)|0)+8|0)>>2],d=0|i[(c=u+8|0)>>2];do{if((0|s)!=(0|d)){if(d>>>0<(0|i[47])>>>0&&g(),(0|i[(p=d+12|0)>>2])==(0|u)){i[p>>2]=s,i[l>>2]=d;break}g()}else i[43]=r&~(1<<a)}while(0);return d=a<<3,i[u+4>>2]=3|d,i[(l=u+d+4|0)>>2]=1|i[l>>2],0|c}if(t>>>0>(l=0|i[45])>>>0){if(o){f=0|i[(m=(_=212+((E=((d=(p=(d=((s=o<<n&((d=2<<n)|0-d))&0-s)-1|0)>>>(s=d>>>12&16))>>>5&8)|s|(p=(f=p>>>d)>>>2&4)|(f=(_=f>>>p)>>>1&2)|(_=(m=_>>>f)>>>1&1))+(m>>>_)|0)<<1<<2)|0)+8|0)>>2],s=0|i[(p=f+8|0)>>2];do{if((0|_)!=(0|s)){if(s>>>0<(0|i[47])>>>0&&g(),(0|i[(d=s+12|0)>>2])==(0|f)){i[d>>2]=_,i[m>>2]=s,y=0|i[45];break}g()}else i[43]=r&~(1<<E),y=l}while(0);return l=(E<<3)-t|0,i[f+4>>2]=3|t,i[(r=f+t|0)+4>>2]=1|l,i[r+l>>2]=l,y&&(s=0|i[48],_=212+((m=y>>>3)<<1<<2)|0,(n=0|i[43])&(o=1<<m)?(c=0|i[(m=_+8|0)>>2])>>>0<(0|i[47])>>>0?g():(S=m,v=c):(i[43]=n|o,S=_+8|0,v=_),i[S>>2]=s,i[v+12>>2]=s,i[s+8>>2]=v,i[s+12>>2]=_),i[45]=l,i[48]=r,0|p}if(r=0|i[44]){for(c=0|i[476+(((l=(_=(l=(r&0-r)-1|0)>>>(r=l>>>12&16))>>>5&8)|r|(_=(s=_>>>l)>>>2&4)|(s=(o=s>>>_)>>>1&2)|(o=(n=o>>>s)>>>1&1))+(n>>>o)<<2)>>2],o=(-8&i[c+4>>2])-t|0,n=c,s=c;;){if(c=0|i[n+16>>2])M=c;else{if(!(_=0|i[n+20>>2])){T=o,b=s;break}M=_}o=(_=(c=(-8&i[M+4>>2])-t|0)>>>0<o>>>0)?c:o,n=M,s=_?M:s}b>>>0<(s=0|i[47])>>>0&&g(),b>>>0>=(n=b+t|0)>>>0&&g(),o=0|i[b+24>>2],p=0|i[b+12>>2];do{if((0|p)==(0|b)){if(E=0|i[(f=b+20|0)>>2])O=E,R=f;else{if(!(c=0|i[(_=b+16|0)>>2])){P=0;break}O=c,R=_}for(;;)if(E=0|i[(f=O+20|0)>>2])O=E,R=f;else{if(!(E=0|i[(f=O+16|0)>>2])){N=O,w=R;break}O=E,R=f}if(!(w>>>0<s>>>0)){i[w>>2]=0,P=N;break}g()}else{if((f=0|i[b+8>>2])>>>0<s>>>0&&g(),(0|i[(E=f+12|0)>>2])!=(0|b)&&g(),(0|i[(_=p+8|0)>>2])==(0|b)){i[E>>2]=p,i[_>>2]=f,P=p;break}g()}}while(0);do{if(o){if(p=0|i[b+28>>2],(0|b)==(0|i[(s=476+(p<<2)|0)>>2])){if(i[s>>2]=P,!P){i[44]=i[44]&~(1<<p);break}}else if(o>>>0<(0|i[47])>>>0&&g(),(0|i[(p=o+16|0)>>2])==(0|b)?i[p>>2]=P:i[o+20>>2]=P,!P)break;P>>>0<(p=0|i[47])>>>0&&g(),i[P+24>>2]=o,s=0|i[b+16>>2];do{if(s){if(!(s>>>0<p>>>0)){i[P+16>>2]=s,i[s+24>>2]=P;break}g()}}while(0);if(s=0|i[b+20>>2]){if(!(s>>>0<(0|i[47])>>>0)){i[P+20>>2]=s,i[s+24>>2]=P;break}g()}}}while(0);return T>>>0<16?(o=T+t|0,i[b+4>>2]=3|o,i[(s=b+o+4|0)>>2]=1|i[s>>2]):(i[b+4>>2]=3|t,i[n+4>>2]=1|T,i[n+T>>2]=T,(s=0|i[45])&&(o=0|i[48],s=212+((p=s>>>3)<<1<<2)|0,(f=0|i[43])&(_=1<<p)?(E=0|i[(p=s+8|0)>>2])>>>0<(0|i[47])>>>0?g():(D=p,L=E):(i[43]=f|_,D=s+8|0,L=s),i[D>>2]=o,i[L+12>>2]=o,i[o+8>>2]=L,i[o+12>>2]=s),i[45]=T,i[48]=n),0|(b+8|0)}B=t}else B=t}else if(e>>>0<=4294967231)if(o=-8&(s=e+11|0),_=0|i[44]){f=0-o|0,k=(E=s>>>8)?o>>>0>16777215?31:o>>>((r=14-((E=((p=E<<(s=(E+1048320|0)>>>16&8))+520192|0)>>>16&4)|s|(p=((c=p<<E)+245760|0)>>>16&2))+(c<<p>>>15)|0)+7|0)&1|r<<1:0,r=0|i[476+(k<<2)>>2];e:do{if(r)for(p=f,c=0,s=o<<(31==(0|k)?0:25-(k>>>1)|0),E=r,l=0;;){if((u=(m=-8&i[E+4>>2])-o|0)>>>0<p>>>0){if((0|m)==(0|o)){K=u,Y=E,j=E,F=90;break e}V=u,W=E}else V=p,W=l;if(m=0==(0|(u=0|i[E+20>>2]))|(0|u)==(0|(E=0|i[E+16+(s>>>31<<2)>>2]))?c:u,u=0==(0|E)){G=V,U=m,x=W,F=86;break}p=V,c=m,s<<=1&u^1,l=W}else G=f,U=0,x=0,F=86}while(0);if(86==(0|F)){if(0==(0|U)&0==(0|x)){if(!(f=_&((r=2<<k)|0-r))){B=o;break}H=0|i[476+(((r=(t=(r=(f&0-f)-1|0)>>>(f=r>>>12&16))>>>5&8)|f|(t=(n=t>>>r)>>>2&4)|(n=(l=n>>>t)>>>1&2)|(l=(s=l>>>n)>>>1&1))+(s>>>l)<<2)>>2]}else H=U;H?(K=G,Y=H,j=x,F=90):(Q=G,$=x)}if(90==(0|F))for(;;)if(F=0,n=(s=(l=(-8&i[Y+4>>2])-o|0)>>>0<K>>>0)?l:K,l=s?Y:j,s=0|i[Y+16>>2])K=n,Y=s,j=l,F=90;else{if(!(Y=0|i[Y+20>>2])){Q=n,$=l;break}K=n,j=l,F=90}if(0!=(0|$)&&Q>>>0<((0|i[45])-o|0)>>>0){$>>>0<(_=0|i[47])>>>0&&g(),$>>>0>=(l=$+o|0)>>>0&&g(),n=0|i[$+24>>2],s=0|i[$+12>>2];do{if((0|s)==(0|$)){if(f=0|i[(t=$+20|0)>>2])J=f,z=t;else{if(!(c=0|i[(r=$+16|0)>>2])){q=0;break}J=c,z=r}for(;;)if(f=0|i[(t=J+20|0)>>2])J=f,z=t;else{if(!(f=0|i[(t=J+16|0)>>2])){X=J,Z=z;break}J=f,z=t}if(!(Z>>>0<_>>>0)){i[Z>>2]=0,q=X;break}g()}else{if((t=0|i[$+8>>2])>>>0<_>>>0&&g(),(0|i[(f=t+12|0)>>2])!=(0|$)&&g(),(0|i[(r=s+8|0)>>2])==(0|$)){i[f>>2]=s,i[r>>2]=t,q=s;break}g()}}while(0);do{if(n){if(s=0|i[$+28>>2],(0|$)==(0|i[(_=476+(s<<2)|0)>>2])){if(i[_>>2]=q,!q){i[44]=i[44]&~(1<<s);break}}else if(n>>>0<(0|i[47])>>>0&&g(),(0|i[(s=n+16|0)>>2])==(0|$)?i[s>>2]=q:i[n+20>>2]=q,!q)break;q>>>0<(s=0|i[47])>>>0&&g(),i[q+24>>2]=n,_=0|i[$+16>>2];do{if(_){if(!(_>>>0<s>>>0)){i[q+16>>2]=_,i[_+24>>2]=q;break}g()}}while(0);if(_=0|i[$+20>>2]){if(!(_>>>0<(0|i[47])>>>0)){i[q+20>>2]=_,i[_+24>>2]=q;break}g()}}}while(0);do{if(Q>>>0>=16){if(i[$+4>>2]=3|o,i[l+4>>2]=1|Q,i[l+Q>>2]=Q,n=Q>>>3,Q>>>0<256){_=212+(n<<1<<2)|0,(s=0|i[43])&(t=1<<n)?(r=0|i[(n=_+8|0)>>2])>>>0<(0|i[47])>>>0?g():(ee=n,te=r):(i[43]=s|t,ee=_+8|0,te=_),i[ee>>2]=l,i[te+12>>2]=l,i[l+8>>2]=te,i[l+12>>2]=_;break}if(ne=(_=Q>>>8)?Q>>>0>16777215?31:Q>>>((n=14-((_=((s=_<<(t=(_+1048320|0)>>>16&8))+520192|0)>>>16&4)|t|(s=((r=s<<_)+245760|0)>>>16&2))+(r<<s>>>15)|0)+7|0)&1|n<<1:0,n=476+(ne<<2)|0,i[l+28>>2]=ne,i[(s=l+16|0)+4>>2]=0,i[s>>2]=0,!((s=0|i[44])&(r=1<<ne))){i[44]=s|r,i[n>>2]=l,i[l+24>>2]=n,i[l+12>>2]=l,i[l+8>>2]=l;break}for(r=Q<<(31==(0|ne)?0:25-(ne>>>1)|0),s=0|i[n>>2];;){if((-8&i[s+4>>2]|0)==(0|Q)){re=s,F=148;break}if(!(t=0|i[(n=s+16+(r>>>31<<2)|0)>>2])){ie=n,oe=s,F=145;break}r<<=1,s=t}if(145==(0|F)){if(!(ie>>>0<(0|i[47])>>>0)){i[ie>>2]=l,i[l+24>>2]=oe,i[l+12>>2]=l,i[l+8>>2]=l;break}g()}else if(148==(0|F)){if((r=0|i[(s=re+8|0)>>2])>>>0>=(t=0|i[47])>>>0&re>>>0>=t>>>0){i[r+12>>2]=l,i[s>>2]=l,i[l+8>>2]=r,i[l+12>>2]=re,i[l+24>>2]=0;break}g()}}else r=Q+o|0,i[$+4>>2]=3|r,i[(s=$+r+4|0)>>2]=1|i[s>>2]}while(0);return 0|($+8|0)}B=o}else B=o;else B=-1}while(0);if(($=0|i[45])>>>0>=B>>>0)return Q=$-B|0,re=0|i[48],Q>>>0>15?(oe=re+B|0,i[48]=oe,i[45]=Q,i[oe+4>>2]=1|Q,i[oe+Q>>2]=Q,i[re+4>>2]=3|B):(i[45]=0,i[48]=0,i[re+4>>2]=3|$,i[(Q=re+$+4|0)>>2]=1|i[Q>>2]),0|(re+8|0);if((re=0|i[46])>>>0>B>>>0)return Q=re-B|0,i[46]=Q,$=(re=0|i[49])+B|0,i[49]=$,i[$+4>>2]=1|Q,i[re+4>>2]=3|B,0|(re+8|0);do{if(!(0|i[161])){if(!((re=0|I(30))+-1&re)){i[163]=re,i[162]=re,i[164]=-1,i[165]=-1,i[166]=0,i[154]=0,i[161]=-16&(0|A(0))^1431655768;break}g()}}while(0);if(re=B+48|0,(Q=(oe=(Q=0|i[163])+($=B+47|0)|0)&(ie=0-Q|0))>>>0<=B>>>0)return 0|0;if(0!=(0|(ne=0|i[153]))&&(ee=(te=0|i[151])+Q|0)>>>0<=te>>>0|ee>>>0>ne>>>0)return 0|0;e:do{if(4&i[154])F=190;else{ne=0|i[49];t:do{if(ne){for(ee=620;;){if((te=0|i[ee>>2])>>>0<=ne>>>0&&(te+(0|i[(q=ee+4|0)>>2])|0)>>>0>ne>>>0){ae=ee,se=q;break}if(!(ee=0|i[ee+8>>2])){F=173;break t}}if((ee=oe-(0|i[46])&ie)>>>0<2147483647)if((0|(q=0|h(0|ee)))==((0|i[ae>>2])+(0|i[se>>2])|0)){if(-1!=(0|q)){le=q,ue=ee,F=193;break e}}else ce=q,de=ee,F=183}else F=173}while(0);do{if(173==(0|F)&&-1!=(0|(ne=0|h(0)))&&(o=ne,pe=(q=(ee=0|i[162])+-1|0)&o?Q-o+(q+o&0-ee)|0:Q,o=(ee=0|i[151])+pe|0,pe>>>0>B>>>0&pe>>>0<2147483647)){if(0!=(0|(q=0|i[153]))&&o>>>0<=ee>>>0|o>>>0>q>>>0)break;if((0|(q=0|h(0|pe)))==(0|ne)){le=ne,ue=pe,F=193;break e}ce=q,de=pe,F=183}}while(0);t:do{if(183==(0|F)){q=0-de|0;do{if(re>>>0>de>>>0&de>>>0<2147483647&-1!=(0|ce)&&(o=$-de+(ne=0|i[163])&0-ne)>>>0<2147483647){if(-1==(0|h(0|o))){h(0|q);break t}fe=o+de|0;break}fe=de}while(0);if(-1!=(0|ce)){le=ce,ue=fe,F=193;break e}}}while(0);i[154]=4|i[154],F=190}}while(0);if(190==(0|F)&&Q>>>0<2147483647&&(fe=0|h(0|Q))>>>0<(Q=0|h(0))>>>0&-1!=(0|fe)&-1!=(0|Q)&&(ce=Q-fe|0)>>>0>(B+40|0)>>>0&&(le=fe,ue=ce,F=193),193==(0|F)){ce=(0|i[151])+ue|0,i[151]=ce,ce>>>0>(0|i[152])>>>0&&(i[152]=ce),ce=0|i[49];do{if(ce){fe=620;do{if((0|le)==((Q=0|i[fe>>2])+($=0|i[(de=fe+4|0)>>2])|0)){_e=Q,ge=de,he=$,Ae=fe,F=203;break}fe=0|i[fe+8>>2]}while(0!=(0|fe));if(203==(0|F)&&0==(8&i[Ae+12>>2]|0)&&ce>>>0<le>>>0&ce>>>0>=_e>>>0){i[ge>>2]=he+ue,fe=ce+($=0==(7&(fe=ce+8|0)|0)?0:0-fe&7)|0,de=ue-$+(0|i[46])|0,i[49]=fe,i[46]=de,i[fe+4>>2]=1|de,i[fe+de+4>>2]=40,i[50]=i[165];break}for(le>>>0<(de=0|i[47])>>>0?(i[47]=le,me=le):me=de,de=le+ue|0,fe=620;;){if((0|i[fe>>2])==(0|de)){Ee=fe,ye=fe,F=211;break}if(!(fe=0|i[fe+8>>2])){Se=620;break}}if(211==(0|F)){if(!(8&i[ye+12>>2])){i[Ee>>2]=le,i[(fe=ye+4|0)>>2]=(0|i[fe>>2])+ue,$=le+(0==(7&(fe=le+8|0)|0)?0:0-fe&7)|0,Q=de+(0==(7&(fe=de+8|0)|0)?0:0-fe&7)|0,fe=$+B|0,re=Q-$-B|0,i[$+4>>2]=3|B;do{if((0|Q)!=(0|ce)){if((0|Q)==(0|i[48])){pe=(0|i[45])+re|0,i[45]=pe,i[48]=fe,i[fe+4>>2]=1|pe,i[fe+pe>>2]=pe;break}if(1==(3&(pe=0|i[Q+4>>2])|0)){se=-8&pe,ae=pe>>>3;e:do{if(pe>>>0>=256){ie=0|i[Q+24>>2],oe=0|i[Q+12>>2];do{if((0|oe)==(0|Q)){if(ne=0|i[(o=(q=Q+16|0)+4|0)>>2])Ie=ne,Te=o;else{if(!(ee=0|i[q>>2])){ve=0;break}Ie=ee,Te=q}for(;;)if(ne=0|i[(o=Ie+20|0)>>2])Ie=ne,Te=o;else{if(!(ne=0|i[(o=Ie+16|0)>>2])){be=Ie,Me=Te;break}Ie=ne,Te=o}if(!(Me>>>0<me>>>0)){i[Me>>2]=0,ve=be;break}g()}else{if((o=0|i[Q+8>>2])>>>0<me>>>0&&g(),(0|i[(ne=o+12|0)>>2])!=(0|Q)&&g(),(0|i[(q=oe+8|0)>>2])==(0|Q)){i[ne>>2]=oe,i[q>>2]=o,ve=oe;break}g()}}while(0);if(!ie)break;o=476+((oe=0|i[Q+28>>2])<<2)|0;do{if((0|Q)==(0|i[o>>2])){if(i[o>>2]=ve,ve)break;i[44]=i[44]&~(1<<oe);break e}if(ie>>>0<(0|i[47])>>>0&&g(),(0|i[(q=ie+16|0)>>2])==(0|Q)?i[q>>2]=ve:i[ie+20>>2]=ve,!ve)break e}while(0);ve>>>0<(oe=0|i[47])>>>0&&g(),i[ve+24>>2]=ie,q=0|i[(o=Q+16|0)>>2];do{if(q){if(!(q>>>0<oe>>>0)){i[ve+16>>2]=q,i[q+24>>2]=ve;break}g()}}while(0);if(!(q=0|i[o+4>>2]))break;if(!(q>>>0<(0|i[47])>>>0)){i[ve+20>>2]=q,i[q+24>>2]=ve;break}g()}else{q=0|i[Q+8>>2],oe=0|i[Q+12>>2],ie=212+(ae<<1<<2)|0;do{if((0|q)!=(0|ie)){if(q>>>0<me>>>0&&g(),(0|i[q+12>>2])==(0|Q))break;g()}}while(0);if((0|oe)==(0|q)){i[43]=i[43]&~(1<<ae);break}do{if((0|oe)==(0|ie))Pe=oe+8|0;else{if(oe>>>0<me>>>0&&g(),(0|i[(o=oe+8|0)>>2])==(0|Q)){Pe=o;break}g()}}while(0);i[q+12>>2]=oe,i[Pe>>2]=q}}while(0);Ce=Q+se|0,Oe=se+re|0}else Ce=Q,Oe=re;if(i[(ae=Ce+4|0)>>2]=-2&i[ae>>2],i[fe+4>>2]=1|Oe,i[fe+Oe>>2]=Oe,ae=Oe>>>3,Oe>>>0<256){pe=212+(ae<<1<<2)|0,ie=0|i[43],o=1<<ae;do{if(ie&o){if((ne=0|i[(ae=pe+8|0)>>2])>>>0>=(0|i[47])>>>0){Re=ae,Ne=ne;break}g()}else i[43]=ie|o,Re=pe+8|0,Ne=pe}while(0);i[Re>>2]=fe,i[Ne+12>>2]=fe,i[fe+8>>2]=Ne,i[fe+12>>2]=pe;break}o=Oe>>>8;do{if(o){if(Oe>>>0>16777215){we=31;break}we=Oe>>>((ee=14-((ne=((se=o<<(ie=(o+1048320|0)>>>16&8))+520192|0)>>>16&4)|ie|(se=((ae=se<<ne)+245760|0)>>>16&2))+(ae<<se>>>15)|0)+7|0)&1|ee<<1}else we=0}while(0);if(o=476+(we<<2)|0,i[fe+28>>2]=we,i[(pe=fe+16|0)+4>>2]=0,i[pe>>2]=0,!((pe=0|i[44])&(ee=1<<we))){i[44]=pe|ee,i[o>>2]=fe,i[fe+24>>2]=o,i[fe+12>>2]=fe,i[fe+8>>2]=fe;break}for(ee=Oe<<(31==(0|we)?0:25-(we>>>1)|0),pe=0|i[o>>2];;){if((-8&i[pe+4>>2]|0)==(0|Oe)){De=pe,F=281;break}if(!(se=0|i[(o=pe+16+(ee>>>31<<2)|0)>>2])){Le=o,Be=pe,F=278;break}ee<<=1,pe=se}if(278==(0|F)){if(!(Le>>>0<(0|i[47])>>>0)){i[Le>>2]=fe,i[fe+24>>2]=Be,i[fe+12>>2]=fe,i[fe+8>>2]=fe;break}g()}else if(281==(0|F)){if((ee=0|i[(pe=De+8|0)>>2])>>>0>=(se=0|i[47])>>>0&De>>>0>=se>>>0){i[ee+12>>2]=fe,i[pe>>2]=fe,i[fe+8>>2]=ee,i[fe+12>>2]=De,i[fe+24>>2]=0;break}g()}}else ee=(0|i[46])+re|0,i[46]=ee,i[49]=fe,i[fe+4>>2]=1|ee}while(0);return 0|($+8|0)}Se=620}for(;;){if((fe=0|i[Se>>2])>>>0<=ce>>>0&&(re=fe+(0|i[Se+4>>2])|0)>>>0>ce>>>0){ke=re;break}Se=0|i[Se+8>>2]}fe=($=(fe=($=ke+-47|0)+(0==(7&(re=$+8|0)|0)?0:0-re&7)|0)>>>0<(re=ce+16|0)>>>0?ce:fe)+8|0,Q=le+(de=0==(7&(Q=le+8|0)|0)?0:0-Q&7)|0,ee=ue+-40-de|0,i[49]=Q,i[46]=ee,i[Q+4>>2]=1|ee,i[Q+ee+4>>2]=40,i[50]=i[165],i[(ee=$+4|0)>>2]=27,i[fe>>2]=i[155],i[fe+4>>2]=i[156],i[fe+8>>2]=i[157],i[fe+12>>2]=i[158],i[155]=le,i[156]=ue,i[158]=0,i[157]=fe,fe=$+24|0;do{i[(fe=fe+4|0)>>2]=7}while((fe+4|0)>>>0<ke>>>0);if((0|$)!=(0|ce)){if(fe=$-ce|0,i[ee>>2]=-2&i[ee>>2],i[ce+4>>2]=1|fe,i[$>>2]=fe,Q=fe>>>3,fe>>>0<256){de=212+(Q<<1<<2)|0,(pe=0|i[43])&(se=1<<Q)?(o=0|i[(Q=de+8|0)>>2])>>>0<(0|i[47])>>>0?g():(Ge=Q,Ue=o):(i[43]=pe|se,Ge=de+8|0,Ue=de),i[Ge>>2]=ce,i[Ue+12>>2]=ce,i[ce+8>>2]=Ue,i[ce+12>>2]=de;break}if(xe=(de=fe>>>8)?fe>>>0>16777215?31:fe>>>((Q=14-((de=((pe=de<<(se=(de+1048320|0)>>>16&8))+520192|0)>>>16&4)|se|(pe=((o=pe<<de)+245760|0)>>>16&2))+(o<<pe>>>15)|0)+7|0)&1|Q<<1:0,Q=476+(xe<<2)|0,i[ce+28>>2]=xe,i[ce+20>>2]=0,i[re>>2]=0,!((pe=0|i[44])&(o=1<<xe))){i[44]=pe|o,i[Q>>2]=ce,i[ce+24>>2]=Q,i[ce+12>>2]=ce,i[ce+8>>2]=ce;break}for(o=fe<<(31==(0|xe)?0:25-(xe>>>1)|0),pe=0|i[Q>>2];;){if((-8&i[pe+4>>2]|0)==(0|fe)){Fe=pe,F=307;break}if(!(se=0|i[(Q=pe+16+(o>>>31<<2)|0)>>2])){Ke=Q,Ye=pe,F=304;break}o<<=1,pe=se}if(304==(0|F)){if(!(Ke>>>0<(0|i[47])>>>0)){i[Ke>>2]=ce,i[ce+24>>2]=Ye,i[ce+12>>2]=ce,i[ce+8>>2]=ce;break}g()}else if(307==(0|F)){if((o=0|i[(pe=Fe+8|0)>>2])>>>0>=(fe=0|i[47])>>>0&Fe>>>0>=fe>>>0){i[o+12>>2]=ce,i[pe>>2]=ce,i[ce+8>>2]=o,i[ce+12>>2]=Fe,i[ce+24>>2]=0;break}g()}}}else{0==(0|(o=0|i[47]))|le>>>0<o>>>0&&(i[47]=le),i[155]=le,i[156]=ue,i[158]=0,i[52]=i[161],i[51]=-1,o=0;do{i[(pe=212+(o<<1<<2)|0)+12>>2]=pe,i[pe+8>>2]=pe,o=o+1|0}while(32!=(0|o));o=le+(pe=0==(7&(o=le+8|0)|0)?0:0-o&7)|0,fe=ue+-40-pe|0,i[49]=o,i[46]=fe,i[o+4>>2]=1|fe,i[o+fe+4>>2]=40,i[50]=i[165]}}while(0);if((ue=0|i[46])>>>0>B>>>0)return le=ue-B|0,i[46]=le,ce=(ue=0|i[49])+B|0,i[49]=ce,i[ce+4>>2]=1|le,i[ue+4>>2]=3|B,0|(ue+8|0)}return i[(0|C())>>2]=12,0|0},_memcpy:function(e,t,n){var o;if(e|=0,t|=0,(0|(n|=0))>=4096)return 0|m(0|e,0|t,0|n);if(o=0|e,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|o;r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(;(0|n)>=4;)i[e>>2]=i[t>>2],e=e+4|0,t=t+4|0,n=n-4|0}for(;(0|n)>0;)r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0;return 0|o},_bitshift64Lshr:U,_fflush:function e(t){t|=0;var n=0,r=0,o=0,a=0,s=0,l=0,u=0;do{if(t){if((0|i[t+76>>2])<=-1){n=0|D(t);break}r=0==(0|R()),o=0|D(t),r||N(),n=o}else{if(a=0|i[13]?0|e(0|i[13]):0,p(36),o=0|i[8])for(r=o,o=a;;){if(l=(0|i[r+76>>2])>-1?0|R():0,u=(0|i[r+20>>2])>>>0>(0|i[r+28>>2])>>>0?0|D(r)|o:o,l&&N(),!(r=0|i[r+56>>2])){s=u;break}o=u}else s=a;y(36),n=s}}while(0);return 0|n},___errno_location:C,_bitshift64Shl:x,runPostSets:function(){},stackAlloc:function(e){var t;return t=a,a=(a=a+(e|=0)|0)+15&-16,0|t},stackSave:function(){return 0|a},stackRestore:function(e){a=e|=0},establishStackSpace:function(e,t){a=e|=0,t|=0},setThrew:function(e,t){e|=0,t|=0,s||(s=e,t)},setTempRet0:function(e){l=e|=0},getTempRet0:function(){return 0|l},dynCall_ii:function(e,t){return t|=0,0|K[1&(e|=0)](0|t)},dynCall_iiii:function(e,t,n,r){return t|=0,n|=0,r|=0,0|Y[3&(e|=0)](0|t,0|n,0|r)},dynCall_vi:function(e,t){t|=0,j[1&(e|=0)](0|t)}}}(e.Na,e.Oa,buffer);e._curve25519_donna=Z._curve25519_donna;var Da=e._free=Z._free;e.runPostSets=Z.runPostSets;var cb=e._i64Add=Z._i64Add,ab=e._bitshift64Ashr=Z._bitshift64Ashr,bb=e._i64Subtract=Z._i64Subtract,db=e._memset=Z._memset,ua=e._malloc=Z._malloc,gc=e._memcpy=Z._memcpy,fb=e._bitshift64Lshr=Z._bitshift64Lshr;e._fflush=Z._fflush,e.___errno_location=Z.___errno_location;var gb=e._bitshift64Shl=Z._bitshift64Shl;function xc(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}e.dynCall_ii=Z.dynCall_ii,e.dynCall_iiii=Z.dynCall_iiii,e.dynCall_vi=Z.dynCall_vi,n.W=Z.stackAlloc,n.na=Z.stackSave,n.X=Z.stackRestore,n.md=Z.establishStackSpace,n.cb=Z.setTempRet0,n.Ua=Z.getTempRet0,xc.prototype=Error(),xc.prototype.constructor=xc;var Yc=null,Xa=function t(){e.calledRun||$c(),e.calledRun||(Xa=t)};function $c(t){function n(){if(!e.calledRun&&(e.calledRun=!0,!A)){if(xa||(xa=!0,Oa(Qa)),Oa(Ra),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e._main&&bd&&e.callMain(t),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)Ua(e.postRun.shift());Oa(Sa)}}if(t=t||e.arguments,null===Yc&&(Yc=Date.now()),!(0<L)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)Ta(e.preRun.shift());Oa(Pa),0<L||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n())}}function ad(t,n){if(!n||!e.noExitRuntime)throw!e.noExitRuntime&&(A=!0,m=void 0,Oa(K),e.onExit)&&e.onExit(t),new xc(t)}e.callMain=e.jd=function(t){function n(){for(var e=0;3>e;e++)i.push(0)}assert(0==L,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==Pa.length,"cannot call main when preRun functions remain to be called"),t=t||[],xa||(xa=!0,Oa(Qa));var r=t.length+1,i=[G(Va(e.thisProgram),"i8",0)];n();for(var o=0;o<r-1;o+=1)i.push(G(Va(t[o]),"i8",0)),n();i.push(0),i=G(i,"i32",0);try{ad(e._main(r,i,0),!0)}catch(t){if(!(t instanceof xc)){if("SimulateInfiniteLoop"!=t)throw t&&"object"==typeof t&&t.stack&&e.S("exception thrown: "+[t,t.stack]),t;e.noExitRuntime=!0}}},e.run=e.run=$c,e.exit=e.exit=ad;var cd=[];function z(t){void 0!==t?(e.print(t),e.S(t),t=JSON.stringify(t)):t="",A=!0;var n="abort("+t+") at "+Ea()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";throw cd&&cd.forEach((function(e){n=e(n,t)})),n}if(e.abort=e.abort=z,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();var bd=!0;e.noInitialRun&&(bd=!1),$c(),module.exports=e},54242:(e,t,n)=>{"use strict";
/**
 * Apache License
 *
 * Version 2.0, January 2004
 *
 * http://www.apache.org/licenses/
 *
 * TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *
 * 1. Definitions.
 *
 * "License" shall mean the terms and conditions for use, reproduction, and dist
 * ribution as defined by Sections 1 through 9 of this document.
 *
 * "Licensor" shall mean the copyright owner or entity authorized by the copyrig
 * ht owner that is granting the License.
 *
 * "Legal Entity" shall mean the union of the acting entity and all other entiti
 * es that control, are controlled by, or are under common control with that ent
 * ity. For the purposes of this definition, "control" means (i) the power, dire
 * ct or indirect, to cause the direction or management of such entity, whether
 * by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of
 *  the outstanding shares, or (iii) beneficial ownership of such entity.
 *
 * "You" (or "Your") shall mean an individual or Legal Entity exercising permiss
 * ions granted by this License.
 *
 * "Source" form shall mean the preferred form for making modifications, includi
 * ng but not limited to software source code, documentation source, and configu
 * ration files.
 *
 * "Object" form shall mean any form resulting from mechanical transformation or
 *  translation of a Source form, including but not limited to compiled object c
 * ode, generated documentation, and conversions to other media types.
 *
 * "Work" shall mean the work of authorship, whether in Source or Object form, m
 * ade available under the License, as indicated by a copyright notice that is i
 * ncluded in or attached to the work (an example is provided in the Appendix be
 * low).
 *
 * "Derivative Works" shall mean any work, whether in Source or Object form, tha
 * t is based on (or derived from) the Work and for which the editorial revision
 * s, annotations, elaborations, or other modifications represent, as a whole, a
 * n original work of authorship. For the purposes of this License, Derivative W
 * orks shall not include works that remain separable from, or merely link (or b
 * ind by name) to the interfaces of, the Work and Derivative Works thereof.
 *
 * "Contribution" shall mean any work of authorship, including the original vers
 * ion of the Work and any modifications or additions to that Work or Derivative
 *  Works thereof, that is intentionally submitted to Licensor for inclusion in
 * the Work by the copyright owner or by an individual or Legal Entity authorize
 * d to submit on behalf of the copyright owner. For the purposes of this defini
 * tion, "submitted" means any form of electronic, verbal, or written communicat
 * ion sent to the Licensor or its representatives, including but not limited to
 *  communication on electronic mailing lists, source code control systems, and
 * issue tracking systems that are managed by, or on behalf of, the Licensor for
 *  the purpose of discussing and improving the Work, but excluding communicatio
 * n that is conspicuously marked or otherwise designated in writing by the copy
 * right owner as "Not a Contribution."
 *
 * "Contributor" shall mean Licensor and any individual or Legal Entity on behal
 * f of whom a Contribution has been received by Licensor and subsequently incor
 * porated within the Work.
 *
 * 2. Grant of Copyright License. Subject to the terms and conditions of this Li
 * cense, each Contributor hereby grants to You a perpetual, worldwide, non-excl
 * usive, no-charge, royalty-free, irrevocable copyright license to reproduce, p
 * repare Derivative Works of, publicly display, publicly perform, sublicense, a
 * nd distribute the Work and such Derivative Works in Source or Object form.
 *
 * 3. Grant of Patent License. Subject to the terms and conditions of this Licen
 * se, each Contributor hereby grants to You a perpetual, worldwide, non-exclusi
 * ve, no-charge, royalty-free, irrevocable (except as stated in this section) p
 * atent license to make, have made, use, offer to sell, sell, import, and other
 * wise transfer the Work, where such license applies only to those patent claim
 * s licensable by such Contributor that are necessarily infringed by their Cont
 * ribution(s) alone or by combination of their Contribution(s) with the Work to
 *  which such Contribution(s) was submitted. If You institute patent litigation
 *  against any entity (including a cross-claim or counterclaim in a lawsuit) al
 * leging that the Work or a Contribution incorporated within the Work constitut
 * es direct or contributory patent infringement, then any patent licenses grant
 * ed to You under this License for that Work shall terminate as of the date suc
 * h litigation is filed.
 *
 * 4. Redistribution. You may reproduce and distribute copies of the Work or Der
 * ivative Works thereof in any medium, with or without modifications, and in So
 * urce or Object form, provided that You meet the following conditions:
 *
 *      (a) You must give any other recipients of the Work or Derivative Works a
 *  copy of this License; and
 *
 *      (b) You must cause any modified files to carry prominent notices stating
 *  that You changed the files; and
 *
 *      (c) You must retain, in the Source form of any Derivative Works that You
 *  distribute, all copyright, patent, trademark, and attribution notices from t
 * he Source form of the Work, excluding those notices that do not pertain to an
 * y part of the Derivative Works; and
 *
 *      (d) If the Work includes a "NOTICE" text file as part of its distributio
 * n, then any Derivative Works that You distribute must include a readable copy
 *  of the attribution notices contained within such NOTICE file, excluding thos
 * e notices that do not pertain to any part of the Derivative Works, in at leas
 * t one of the following places: within a NOTICE text file distributed as part
 * of the Derivative Works; within the Source form or documentation, if provided
 *  along with the Derivative Works; or, within a display generated by the Deriv
 * ative Works, if and wherever such third-party notices normally appear. The co
 * ntents of the NOTICE file are for informational purposes only and do not modi
 * fy the License. You may add Your own attribution notices within Derivative Wo
 * rks that You distribute, alongside or as an addendum to the NOTICE text from
 * the Work, provided that such additional attribution notices cannot be constru
 * ed as modifying the License.
 *
 *      You may add Your own copyright statement to Your modifications and may p
 * rovide additional or different license terms and conditions for use, reproduc
 * tion, or distribution of Your modifications, or for any such Derivative Works
 *  as a whole, provided Your use, reproduction, and distribution of the Work ot
 * herwise complies with the conditions stated in this License.
 *
 * 5. Submission of Contributions. Unless You explicitly state otherwise, any Co
 * ntribution intentionally submitted for inclusion in the Work by You to the Li
 * censor shall be under the terms and conditions of this License, without any a
 * dditional terms or conditions. Notwithstanding the above, nothing herein shal
 * l supersede or modify the terms of any separate license agreement you may hav
 * e executed with Licensor regarding such Contributions.
 *
 * 6. Trademarks. This License does not grant permission to use the trade names,
 *  trademarks, service marks, or product names of the Licensor, except as requi
 * red for reasonable and customary use in describing the origin of the Work and
 *  reproducing the content of the NOTICE file.
 *
 * 7. Disclaimer of Warranty. Unless required by applicable law or agreed to in
 * writing, Licensor provides the Work (and each Contributor provides its Contri
 * butions) on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, e
 * ither express or implied, including, without limitation, any warranties or co
 * nditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTIC
 * ULAR PURPOSE. You are solely responsible for determining the appropriateness
 * of using or redistributing the Work and assume any risks associated with Your
 *  exercise of permissions under this License.
 *
 * 8. Limitation of Liability. In no event and under no legal theory, whether in
 *  tort (including negligence), contract, or otherwise, unless required by appl
 * icable law (such as deliberate and grossly negligent acts) or agreed to in wr
 * iting, shall any Contributor be liable to You for damages, including any dire
 * ct, indirect, special, incidental, or consequential damages of any character
 * arising as a result of this License or out of the use or inability to use the
 *  Work (including but not limited to damages for loss of goodwill, work stoppa
 * ge, computer failure or malfunction, or any and all other commercial damages
 * or losses), even if such Contributor has been advised of the possibility of s
 * uch damages.
 *
 * 9. Accepting Warranty or Additional Liability. While redistributing the Work
 * or Derivative Works thereof, You may choose to offer, and charge a fee for, a
 * cceptance of support, warranty, indemnity, or other liability obligations and
 * /or rights consistent with this License. However, in accepting such obligatio
 * ns, You may act only on Your own behalf and on Your sole responsibility, not
 * on behalf of any other Contributor, and only if You agree to indemnify, defen
 * d, and hold each Contributor harmless for any liability incurred by, or claim
 * s asserted against, such Contributor by reason of your accepting any such war
 * ranty or additional liability.
 *
 * END OF TERMS AND CONDITIONS
 *
 * APPENDIX: How to apply the Apache License to your work.
 *
 * To apply the Apache License to your work, attach the following boilerplate no
 * tice, with the fields enclosed by brackets "[]" replaced with your own identi
 * fying information. (Don't include the brackets!)  The text should be enclosed
 *  in the appropriate comment syntax for the file format. We also recommend tha
 * t a file or class name and description of purpose be included on the same "pr
 * inted page" as the copyright notice for easier identification within third-pa
 * rty archives.
 *
 * Copyright [yyyy] [name of copyright owner]
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 *
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 *
 * distributed under the License is distributed on an "AS IS" BASIS,
 *
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *
 * See the License for the specific language governing permissions and
 *
 * limitations under the License.
 *
 * THIS FILE HAS BEEN AUTOMATICALLY GENERATED AND IS NOT MEANT TO BE
 * EDITED THROUGH NORMAL MEANS. PLEASE CHECK THE DOCUMENTATION FOR
 * DETAILS AND GUIDANCE: http://fburl.com/js-libs-www
 *
 * @preserve-header
 * @noflow
 * @nolint
 */var r={},i={exports:r};function o(){var e,t;e=this,t=function(){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function t(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,i=Object.keys,o=Array.isArray;function a(e,t){return"object"!=typeof t||i(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);var s=Object.getPrototypeOf,l={}.hasOwnProperty;function u(e,t){return l.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach((function(n){p(e,n,t[n])}))}var d=Object.defineProperty;function p(e,t,n,r){d(e,t,a(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}var _=Object.getOwnPropertyDescriptor;function g(e,t){var n;return _(e,t)||(n=s(e))&&g(n,t)}var h=[].slice;function A(e,t,n){return h.call(e,t,n)}function m(e,t){return t(e)}function E(e){if(!e)throw new Error("Assertion Failed")}function y(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function S(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function v(e,t){if(u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=v(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:v(s,t.substr(a+1))}}function I(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){E("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)I(e,t[r],n[r])}else{var a=t.indexOf(".");if(-1!==a){var s=t.substr(0,a),l=t.substr(a+1);if(""===l)void 0===n?o(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];c&&u(e,s)||(c=e[s]={}),I(c,l,n)}}else void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function T(e){var t={};for(var n in e)u(e,n)&&(t[n]=e[n]);return t}var b=[].concat;function M(e){return b.apply([],e)}var P="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(M([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return r[e]})),C=P.map((function(e){return r[e]}));S(P,(function(e){return[e,!0]}));var O=null;function R(e){O="undefined"!=typeof WeakMap&&new WeakMap;var t=N(e);return O=null,t}function N(e){if(!e||"object"!=typeof e)return e;var t=O&&O.get(e);if(t)return t;if(o(e)){t=[],O&&O.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(N(e[n]))}else if(C.indexOf(e.constructor)>=0)t=e;else{var i=s(e);for(var a in t=i===Object.prototype?{}:Object.create(i),O&&O.set(e,t),e)u(e,a)&&(t[a]=N(e[a]))}return t}var w={}.toString;function D(e){return w.call(e).slice(8,-1)}var L="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",B="symbol"==typeof L?function(e){var t;return null!=e&&(t=e[L])&&t.apply(e)}:function(){return null},k={};function G(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===k&&"string"==typeof e)return[e];if(i=B(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var U="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},x="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(e,t){x=e,K=t}var K=function(){return!0},Y=!new Error("").stack;function j(){if(Y)try{throw new Error}catch(e){return e}return new Error}function V(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(K).map((function(e){return"\n"+e})).join("")):""}var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],H=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this._e=j(),this.name=e,this.message=t}function q(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function J(e,t,n,r){this._e=j(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=q(e,t)}function z(e,t){this._e=j(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=q(e,t)}f($).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+V(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(J).from($),f(z).from($);var X=H.reduce((function(e,t){return e[t]=t+"Error",e}),{}),Z=$,ee=H.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=j(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Q[t]||n,this.inner=null)}return f(r).from(Z),e[t]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=W.reduce((function(e,t){return e[t+"Error"]=ee[t],e}),{}),ne=H.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e}),{});function re(){}function ie(e){return e}function oe(e,t){return null==e||e===ie?t:function(n){return t(e(n))}}function ae(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ae(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ae(i,this.onerror):i),void 0!==o?o:n}}function le(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ae(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ae(r,this.onerror):r)}}function ue(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ae(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ae(o,this.onerror):o),void 0===r?void 0===s?void 0:s:a(r,s)}}function ce(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function de(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ne.ModifyError=J,ne.DexieError=$,ne.BulkError=z;var pe={},fe="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]}(),_e=fe[0],ge=fe[1],he=fe[2],Ae=ge&&ge.then,me=_e&&_e.constructor,Ee=!!he,ye=!1,Se=he?function(){he.then(Ve)}:r.setImmediate?setImmediate.bind(null,Ve):r.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Ve(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ve,0)},ve=function(e,t){Ne.push([e,t]),Te&&(Se(),Te=!1)},Ie=!0,Te=!0,be=[],Me=[],Pe=null,Ce=ie,Oe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:gt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{gt(e[0],e[1])}catch(e){}}))}},Re=Oe,Ne=[],we=0,De=[];function Le(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var t=this._PSD=Re;if(x&&(this._stackHolder=j(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==pe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ue(this,this._value))}this._state=null,this._value=null,++t.ref,Ge(this,e)}var Be={get:function(){var e=Re,t=et;function n(n,r){var i=this,o=!e.global&&(e!==Re||t!==et),a=o&&!it(),s=new Le((function(t,s){Fe(i,new ke(pt(n,e,o,a),pt(r,e,o,a),t,s,e))}));return x&&je(s,this),s}return n.prototype=pe,n},set:function(e){p(this,"then",e&&e.prototype===pe?Be:{get:function(){return e},set:Be.set})}};function ke(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ge(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&We();t&&"function"==typeof t.then?Ge(e,(function(e,n){t instanceof Le?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,xe(e)),n&&He()}}),Ue.bind(null,e))}catch(t){Ue(e,t)}}function Ue(e,t){if(Me.push(t),null===e._state){var n=e._lib&&We();t=Ce(t),e._state=!1,e._value=t,x&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=g(t,"stack");t._promise=e,p(t,"stack",{get:function(){return ye?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){be.some((function(t){return t._value===e._value}))||be.push(e)}(e),xe(e),n&&He()}}function xe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Fe(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===we&&(++we,ve((function(){0==--we&&Qe()}),[]))}function Fe(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,ve(Ke,[n,e,t])}else e._listeners.push(t)}function Ke(e,t,n){try{Pe=t;var r,i=t._value;t._state?r=e(i):(Me.length&&(Me=[]),r=e(i),-1===Me.indexOf(i)&&function(e){for(var t=be.length;t;)if(be[--t]._value===e._value)return void be.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Pe=null,0==--we&&Qe(),--n.psd.ref||n.psd.finalize()}}function Ye(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=V(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return x&&((r=V(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Ye(e._prev,t,n)),t}function je(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ve(){We()&&He()}function We(){var e=Ie;return Ie=!1,Te=!1,e}function He(){var e,t,n;do{for(;Ne.length>0;)for(e=Ne,Ne=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Ne.length>0);Ie=!0,Te=!0}function Qe(){var e=be;be=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=De.slice(0),n=t.length;n;)t[--n]()}function $e(e){return new Le(pe,!1,e)}function qe(e,t){var n=Re;return function(){var r=We(),i=Re;try{return lt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{lt(i,!1),r&&He()}}}c(Le.prototype,{then:Be,_then:function(e,t){Fe(this,new ke(null,null,e,t,Re))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):$e(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):$e(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),$e(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{ye=!0;var e=Ye(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ye=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Le((function(r,i){var o=setTimeout((function(){return i(new ee.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(Le.prototype,Symbol.toStringTag,"Dexie.Promise"),Oe.env=ut(),c(Le,{all:function(){var e=G.apply(null,arguments).map(ot);return new Le((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Le.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Le)return e;if(e&&"function"==typeof e.then)return new Le((function(t,n){e.then(t,n)}));var t=new Le(pe,!0,e);return je(t,Pe),t},reject:$e,race:function(){var e=G.apply(null,arguments).map(ot);return new Le((function(t,n){e.map((function(e){return Le.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Re},set:function(e){return Re=e}},totalEchoes:{get:function(){return et}},newPSD:nt,usePSD:ct,scheduler:{get:function(){return ve},set:function(e){ve=e}},rejectionMapper:{get:function(){return Ce},set:function(e){Ce=e}},follow:function(e,t){return new Le((function(n,r){return nt((function(t,n){var r=Re;r.unhandleds=[],r.onunhandled=n,r.finalize=ae((function(){var e=this;!function(e){function t(){e(),De.splice(De.indexOf(t),1)}De.push(t),++we,ve((function(){0==--we&&Qe()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),me&&(me.allSettled&&p(Le,"allSettled",(function(){var e=G.apply(null,arguments).map(ot);return new Le((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Le.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),me.any&&"undefined"!=typeof AggregateError&&p(Le,"any",(function(){var e=G.apply(null,arguments).map(ot);return new Le((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Le.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var Je={awaits:0,echoes:0,id:0},ze=0,Xe=[],Ze=0,et=0,tt=0;function nt(e,t,n,r){var i=Re,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++tt;var s=Oe.env;o.env=Ee?{Promise:Le,PromiseProp:{value:Le,configurable:!0,writable:!0},all:Le.all,race:Le.race,allSettled:Le.allSettled,any:Le.any,resolve:Le.resolve,reject:Le.reject,nthen:ft(s.nthen,o),gthen:ft(s.gthen,o)}:{},t&&a(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=ct(o,e,n,r);return 0===o.ref&&o.finalize(),l}function rt(){return Je.id||(Je.id=++ze),++Je.awaits,Je.echoes+=100,Je.id}function it(){return!!Je.awaits&&(0==--Je.awaits&&(Je.id=0),Je.echoes=100*Je.awaits,!0)}function ot(e){return Je.echoes&&e&&e.constructor===me?(rt(),e.then((function(e){return it(),e}),(function(e){return it(),ht(e)}))):e}function at(e){++et,Je.echoes&&0!=--Je.echoes||(Je.echoes=Je.id=0),Xe.push(Re),lt(e,!0)}function st(){var e=Xe[Xe.length-1];Xe.pop(),lt(e,!1)}function lt(e,t){var n=Re;if((t?!Je.echoes||Ze++&&e===Re:!Ze||--Ze&&e===Re)||dt(t?at.bind(null,e):st),e!==Re&&(Re=e,n===Oe&&(Oe.env=ut()),Ee)){var i=Oe.env.Promise,o=e.env;ge.then=o.nthen,i.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject,o.allSettled&&(i.allSettled=o.allSettled),o.any&&(i.any=o.any))}}function ut(){var e=r.Promise;return Ee?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:ge.then,gthen:e.prototype.then}:{}}function ct(e,t,n,r,i){var o=Re;try{return lt(e,!0),t(n,r,i)}finally{lt(o,!1)}}function dt(e){Ae.call(_e,e)}function pt(e,t,n,r){return"function"!=typeof e?e:function(){var i=Re;n&&rt(),lt(t,!0);try{return e.apply(this,arguments)}finally{lt(i,!1),r&&dt(it)}}}function ft(e,t){return function(n,r){return e.call(this,pt(n,t),pt(r,t))}}-1===(""+Ae).indexOf("[native code]")&&(rt=it=re);var _t="unhandledrejection";function gt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var i,o={promise:t,reason:e};if(r.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(_t,!0,!0),a(i,o)):r.CustomEvent&&a(i=new CustomEvent(_t,{detail:o}),o),i&&r.dispatchEvent&&(dispatchEvent(i),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(i)}catch(e){}x&&i&&!i.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var ht=Le.reject;function At(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Re.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return At(e,t,n,r)}))):ht(i)}return i._promise(t,(function(e,t){return nt((function(){return Re.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return ht(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new ee.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then((function(){return At(e,t,n,r)}))}var mt="3.2.2",Et=String.fromCharCode(65535),yt=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",vt="String expected.",It=[],Tt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bt=Tt,Mt=Tt,Pt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Ct="__dbnames",Ot="readonly",Rt="readwrite";function Nt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dt(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=R(t))[e],t}}var Lt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Re.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=We();try{return r&&r.db===this.db?r===Re.trans?r._promise(e,o,n):nt((function(){return r._promise(e,o,n)}),{trans:r,transless:Re.transless||Re}):At(this.db,e,[this.name],o)}finally{a&&He()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==Et)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&x&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,a=this.db._deps.indexedDB;function s(e,t){try{return 0===a.cmp(e,t)}catch(e){return!1}}var l=t.reduce((function(t,n){var i=t[0],a=t[1],l=r[n],u=e[n];return[i||l,i||!l?Nt(a,l&&l.multi?function(e){var t=v(e,n);return o(t)&&t.some((function(e){return s(u,e)}))}:function(e){return s(u,v(e,n))}):a]}),[null,null]),u=l[0],c=l[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(u(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){a(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Dt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{I(e,o,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof e||o(e))return this.where(":id").equals(e).modify(t);var n=v(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?i(t).forEach((function(n){I(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Dt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{I(e,o,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:wt})})).then((function(e){return e.numFailures?Le.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=s&&a?e.map(Dt(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new z(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",a)}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&i)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=s&&a?e.map(Dt(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new z(r.name+".bulkPut(): "+t+" of "+l+" operations failed",a)}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new z(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function Bt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var r=1,a=arguments.length;r<a;++r)s(arguments[r]);return n;function s(e,r,i){if("object"==typeof e)return l(e);r||(r=ce),i||(i=re);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function l(e){i(e).forEach((function(t){var n=e[t];if(o(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new ee.InvalidArgument("Invalid event config");var r=s(t,ie,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){y((function(){e.apply(null,t)}))}))}))}}))}}function kt(e,t){return f(t).from({prototype:e}),t}function Gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ut(e,t){e.filter=Nt(e.filter,t)}function xt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Nt(r(),t())}:t,e.justLimit=n&&!r}function Ft(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Kt(e,t,n){var r=Ft(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){var i=e.replayFilter?Nt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),u(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),jt(Kt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return jt(Kt(e,r,n),Nt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function jt(e,t,n,r){var i=qe(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=re}),(function(t){e.fail(t),n=re}))||i(e.value,e,(function(e){return n=e})),n()}))}))}function Vt(e,t){try{var n=Wt(e),r=Wt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(Ht(e),Ht(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=Vt(e[o],t[o]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Wt(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=D(e);return"ArrayBuffer"===n?"binary":n}function Ht(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Qt=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Nt(t.algorithm,e)},e.prototype._iterate=function(e,t){return Yt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return Yt(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Gt(n,!0))return r.count({trans:e,query:{index:Ft(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return Yt(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Gt(n,!0)&&n.limit>0){var r=n.valueMapper,i=Ft(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return Yt(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Gt(t)?xt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):xt(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),xt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Ut(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return Ut(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Nt(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Gt(t,!0)&&t.limit>0)return this._read((function(e){var n=Ft(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ut(this._ctx,(function(e){var t=e.primaryKey.toString(),r=u(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var o;if("function"==typeof e)o=e;else{var a=i(e),s=a.length;o=function(t){for(var n=!1,r=0;r<s;++r){var i=a[r],o=e[i];v(t,i)!==o&&(I(t,i,o),n=!0)}return n}}var l=n.table.core,u=l.schema.primaryKey,c=u.outbound,d=u.extractKey,p=t.db._options.modifyChunkSize||200,f=[],_=0,g=[],h=function(e,t){var n=t.failures,r=t.numFailures;_+=e-r;for(var o=0,a=i(n);o<a.length;o++){var s=a[o];f.push(n[s])}};return t.clone().primaryKeys().then((function(t){var i=function(a){var s=Math.min(p,t.length-a);return l.getMany({trans:r,keys:t.slice(a,a+s),cache:"immutable"}).then((function(u){for(var f=[],_=[],g=c?[]:null,A=[],m=0;m<s;++m){var E=u[m],y={value:R(E),primKey:t[a+m]};!1!==o.call(y,y.value,y)&&(null==y.value?A.push(t[a+m]):c||0===Vt(d(E),d(y.value))?(_.push(y.value),c&&g.push(t[a+m])):(A.push(t[a+m]),f.push(y.value)))}var S=Gt(n)&&n.limit===1/0&&("function"!=typeof e||e===$t)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&l.mutate({trans:r,type:"add",values:f}).then((function(e){for(var t in e.failures)A.splice(parseInt(t),1);h(f.length,e)}))).then((function(){return(_.length>0||S&&"object"==typeof e)&&l.mutate({trans:r,type:"put",keys:g,values:_,criteria:S,changeSpec:"function"!=typeof e&&e}).then((function(e){return h(_.length,e)}))})).then((function(){return(A.length>0||S&&e===$t)&&l.mutate({trans:r,type:"delete",keys:A,criteria:S}).then((function(e){return h(A.length,e)}))})).then((function(){return t.length>a+s&&i(a+p)}))}))};return i(0).then((function(){if(f.length>0)throw new J("Error modifying one or more objects",f,_,g);return t.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Gt(e)&&(e.isPrimKey&&!Mt||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new J("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify($t)},e}(),$t=function(e,t){return t.value=null};function qt(e,t){return e<t?-1:e===t?0:1}function Jt(e,t){return e>t?-1:e===t?0:1}function zt(e,t,n){var r=e instanceof rn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Xt(e){return new e.Collection(e,(function(){return nn("")})).limit(0)}function Zt(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],u)<0&&(s=l)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function en(e,t,n,r){var i,o,a,s,l,u,c,d=n.length;if(!n.every((function(e){return"string"==typeof e})))return zt(e,vt);function p(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?qt:Jt;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),u=e,c="next"===e?"":r}p("next");var f=new e.Collection(e,(function(){return tn(s[0],l[d-1]+r)}));f._ondirectionchange=function(e){p(e)};var _=0;return f._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var p=o(i);if(t(p,l,_))return!0;for(var f=null,g=_;g<d;++g){var h=Zt(i,p,s[g],l[g],a,u);null===h&&null===f?_=g+1:(null===f||a(f,h)>0)&&(f=h)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function tn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function nn(e){return{type:1,lower:e,upper:e}}var rn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Xt(this):new this.Collection(this,(function(){return tn(e,t,!n,!r)}))}catch(e){return zt(this,St)}},e.prototype.equals=function(e){return null==e?zt(this,St):new this.Collection(this,(function(){return nn(e)}))},e.prototype.above=function(e){return null==e?zt(this,St):new this.Collection(this,(function(){return tn(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?zt(this,St):new this.Collection(this,(function(){return tn(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?zt(this,St):new this.Collection(this,(function(){return tn(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?zt(this,St):new this.Collection(this,(function(){return tn(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?zt(this,vt):this.between(e,e+Et,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):en(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Et)},e.prototype.equalsIgnoreCase=function(e){return en(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=G.apply(k,arguments);return 0===e.length?Xt(this):en(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=G.apply(k,arguments);return 0===e.length?Xt(this):en(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Et)},e.prototype.anyOf=function(){var e=this,t=G.apply(k,arguments),n=this._cmp;try{t.sort(n)}catch(e){return zt(this,St)}if(0===t.length)return Xt(this);var r=new this.Collection(this,(function(){return tn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[yt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=G.apply(k,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return zt(this,St)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[yt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return Xt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,d=i;function p(e,t){return d(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(p)}catch(e){return zt(this,St)}var f=0,_=c?function(e){return i(e,l[f][1])>0}:function(e){return i(e,l[f][1])>=0},g=u?function(e){return o(e,l[f][0])>0}:function(e){return o(e,l[f][0])>=0},h=_,A=new this.Collection(this,(function(){return tn(l[0][0],l[l.length-1][1],!u,!c)}));return A._ondirectionchange=function(e){"next"===e?(h=_,d=i):(h=g,d=o),l.sort(p)},A._addAlgorithm((function(e,t,r){for(var o=e.key;h(o);)if(++f===l.length)return t(r),!1;return!!function(e){return!_(e)&&!g(e)}(o)||(0===n._cmp(o,l[f][1])||0===n._cmp(o,l[f][0])||t((function(){d===i?e.continue(l[f][0]):e.continue(l[f][1])})),!1)})),A},e.prototype.startsWithAnyOf=function(){var e=G.apply(k,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Xt(this):this.inAnyRange(e.map((function(e){return[e,e+Et]}))):zt(this,"startsWithAnyOf() only works with strings")},e}();function on(e){return qe((function(t){return an(t),e(t.target.error),!1}))}function an(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var sn="storagemutated",ln="x-storagemutated-1",un=Bt(null,sn),cn=function(){function e(){}return e.prototype._lock=function(){return E(!Re.global),++this._reculock,1!==this._reculock||Re.global||(Re.lockOwnerFor=this),this},e.prototype._unlock=function(){if(E(!Re.global),0==--this._reculock)for(Re.global||(Re.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ct(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(E(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(r);case"MissingAPIError":throw new ee.MissingAPI(r.message,r);default:throw new ee.OpenFailed(r)}if(!this.active)throw new ee.TransactionInactive;return E(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:"relaxed"}):n.transaction(this.storeNames,this.mode,{durability:"relaxed"}))).onerror=qe((function(n){an(n),t._reject(e.error)})),e.onabort=qe((function(n){an(n),t.active&&t._reject(new ee.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=qe((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&un.storagemutated.fire(e.mutatedParts)})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return ht(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new ee.TransactionInactive);if(this._locked())return new Le((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Re])}));if(n)return nt((function(){var e=new Le((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Le((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Le.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Le((function(e,r){n.then((function(n){return t._waitingQueue.push(qe(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(qe(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function dn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+pn(t)}}function pn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function fn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:S(n,(function(e){return[e.name,e]}))}}var _n=function(e){try{return e.only([[]]),_n=function(){return[[]]},[[]]}catch(e){return _n=function(){return Et},Et}};function gn(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return v(t,e)}}(e):function(t){return v(t,e)}}function hn(e){return[].slice.call(e)}var An=0;function mn(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function En(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}var i=function(e,t){var n=hn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),i=null==t,a={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:gn(t)},indexes:hn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,s={name:t,compound:o(i),keyPath:i,unique:n,multiEntry:r,extractKey:gn(i)};return a[mn(i)]=s,s})),getIndexByKeyPath:function(e){return a[mn(e)]}};return a[":id"]=s.primaryKey,null!=t&&(a[mn(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=i.schema,s=i.hasGetAll,l=a.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,i=e.type,o=e.keys,a=e.values,s=e.range;return new Promise((function(e,l){e=qe(e);var u=n.objectStore(t),c=null==u.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var p,f=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var _=[],g=[],h=0,A=function(e){++h,an(e)};if("deleteRange"===i){if(4===s.type)return e({numFailures:h,failures:g,results:[],lastResult:void 0});3===s.type?_.push(p=u.clear()):_.push(p=u.delete(r(s)))}else{var m=d?c?[a,o]:[a,null]:[o,null],E=m[0],y=m[1];if(d)for(var S=0;S<f;++S)_.push(p=y&&void 0!==y[S]?u[i](E[S],y[S]):u[i](E[S])),p.onerror=A;else for(S=0;S<f;++S)_.push(p=u[i](E[S])),p.onerror=A}var v=function(t){var n=t.target.result;_.forEach((function(e,t){return null!=e.error&&(g[t]=e.error)})),e({numFailures:h,failures:g,results:"delete"===i?o:_.map((function(e){return e.result})),lastResult:n})};p.onerror=function(e){A(e),v(e)},p.onsuccess=v}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=qe(e);for(var o,a=n.objectStore(t),s=r.length,l=new Array(s),u=0,c=0,d=function(t){var n=t.target;l[n._pos]=n.result,++c===u&&e(l)},p=on(i),f=0;f<s;++f)null!=r[f]&&((o=a.get(r[f]))._pos=f,o.onsuccess=d,o.onerror=p,++u);0===u&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=qe(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=on(i)}))},query:function(e){return function(n){return new Promise((function(i,o){i=qe(i);var a=n.trans,s=n.values,l=n.limit,u=n.query,c=l===1/0?void 0:l,d=u.index,p=u.range,f=a.objectStore(t),_=d.isPrimaryKey?f:f.index(d.name),g=r(p);if(0===l)return i({result:[]});if(e){var h=s?_.getAll(g,c):_.getAllKeys(g,c);h.onsuccess=function(e){return i({result:e.target.result})},h.onerror=on(o)}else{var A=0,m=s||!("openKeyCursor"in _)?_.openCursor(g):_.openKeyCursor(g),E=[];m.onsuccess=function(e){var t=m.result;return t?(E.push(s?t.value:t.primaryKey),++A===l?i({result:E}):void t.continue()):i({result:E})},m.onerror=on(o)}}))}}(s),openCursor:function(e){var n=e.trans,i=e.values,o=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=qe(e);var u=o.index,c=o.range,d=n.objectStore(t),p=u.isPrimaryKey?d:d.index(u.name),f=a?s?"prevunique":"prev":s?"nextunique":"next",_=i||!("openKeyCursor"in p)?p.openCursor(r(c),f):p.openKeyCursor(r(c),f);_.onerror=on(l),_.onsuccess=qe((function(t){var r=_.result;if(r){r.___id=++An,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=qe(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=qe(e),_.onerror=on(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=s,e(t)}})),n=function(){if(_.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return _.onsuccess=qe((function(e){_.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,i=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var s=i.objectStore(t),l=o.isPrimaryKey?s:s.index(o.name),u=r(a),c=u?l.count(u):l.count();c.onsuccess=qe((function(t){return e(t.target.result)})),c.onerror=on(n)}))}}}(e)})),u={};return l.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '"+e+"' not found");return u[e]},MIN_KEY:-1/0,MAX_KEY:_n(t),schema:a}}function yn(t,n,r,i){var o=r.IDBKeyRange;return r.indexedDB,{dbcore:function(t,n){return n.reduce((function(t,n){var r=n.create;return e(e({},t),r(t))}),t)}(En(n,o,i),t.dbcore)}}function Sn(e,t){var n=e._novip,r=t.db,i=yn(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function vn(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=g(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?p(t,e,{get:function(){return this.table(e)},set:function(t){d(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function In(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function Tn(e,t){return e._cfg.version-t._cfg.version}function bn(e,t,n,r){var o=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),l=Re.transless||Re;nt((function(){Re.trans=a,Re.transless=l,0===t?(i(o).forEach((function(e){Pn(n,e,o[e].primKey,o[e].indexes)})),Sn(e,n),Le.follow((function(){return e.on.populate.fire(a)})).catch(s)):function(e,t,n,r){var o=e._novip,a=[],s=o._versions,l=o._dbSchema=On(0,o.idbdb,r),u=!1;function c(){return a.length?Le.resolve(a.shift()(n.idbtrans)).then(c):Le.resolve()}return s.filter((function(e){return e._cfg.version>=t})).forEach((function(e){a.push((function(){var a=l,s=e._cfg.dbschema;Rn(o,a,r),Rn(o,s,r),l=o._dbSchema=s;var c=Mn(a,s);c.add.forEach((function(e){Pn(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Cn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Cn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var d=e._cfg.contentUpgrade;if(d&&e._cfg.version>t){Sn(o,r),n._memoizedTables={},u=!0;var p=T(s);c.del.forEach((function(e){p[e]=a[e]})),In(o,[o.Transaction.prototype]),vn(o,[o.Transaction.prototype],i(p),p),n.schema=p;var f,_=U(d);_&&rt();var g=Le.follow((function(){if((f=d(n))&&_){var e=it.bind(null,null);f.then(e,e)}}));return f&&"function"==typeof f.then?Le.resolve(f):g.then((function(){return f}))}})),a.push((function(t){u&&bt||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t),In(o,[o.Transaction.prototype]),vn(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),n.schema=o._dbSchema}))})),c().then((function(){var e,t;t=r,i(e=l).forEach((function(n){t.db.objectStoreNames.contains(n)||Pn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,a,n).catch(s)}))}function Mn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Tt)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,l=o.idxByName,u=void 0;for(u in s)l[u]||a.del.push(u);for(u in l){var c=s[u],d=l[u];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function Pn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Cn(i,e)})),i}function Cn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function On(e,t,n){var r={};return A(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=dn(pn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],s=0;s<t.indexNames.length;++s){var l=t.index(t.indexNames[s]);i=l.keyPath;var u=dn(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(u)}r[e]=fn(e,o,a)})),r}function Rn(e,t,n){for(var i=e._novip,o=n.db.objectStoreNames,a=0;a<o.length;++a){var s=o[a],l=n.objectStore(s);i._hasGetAll="getAll"in l;for(var u=0;u<l.indexNames.length;++u){var c=l.indexNames[u],d=l.index(c).keyPath,p="string"==typeof d?d:"["+A(d).join("+")+"]";if(t[s]){var f=t[s].idxByName[p];f&&(f.name=c,delete t[s].idxByName[p],t[s].idxByName[c]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}var Nn=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){i(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return dn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)})),i=r.shift();if(i.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=fn(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach((function(e){a(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,In(t,[t._allTables,t,t.Transaction.prototype]),vn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||re,e),this},e}();function wn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ir(Ct,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Dn(e){return e&&"function"==typeof e.databases}function Ln(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Dn(n)&&t!==Ct&&wn(n,r).delete(t).catch(re)}function Bn(e){return nt((function(){return Re.letThrough=!0,e()}))}function kn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Gn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?ht(t.dbOpenError):e}));x&&(t.openCanceller._stackHolder=j()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,s=null,l=!1;return Le.race([r,("undefined"==typeof navigator?Le.resolve():kn()).then((function(){return new Le((function(r,a){if(o(),!n)throw new ee.MissingAPI;var u=e.name,c=t.autoSchema?n.open(u):n.open(u,Math.round(10*e.verno));if(!c)throw new ee.MissingAPI;c.onerror=on(a),c.onblocked=qe(e._fireOnBlocked),c.onupgradeneeded=qe((function(r){if(s=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=an,s.abort(),c.result.close();var i=n.deleteDatabase(u);i.onsuccess=i.onerror=qe((function(){a(new ee.NoSuchDatabase("Database "+u+" doesnt exist"))}))}else{s.onerror=on(a);var o=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;l=o<1,e._novip.idbdb=c.result,bn(e,o/10,s,a)}}),a),c.onsuccess=qe((function(){s=null;var n,o=e._novip.idbdb=c.result,a=A(o.objectStoreNames);if(a.length>0)try{var d=o.transaction(1===(n=a).length?n[0]:n,"readonly",{durability:"relaxed"});t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var o=r._dbSchema=On(0,t,n);r._storeNames=A(t.objectStoreNames,0),vn(r,[r._allTables],i(o),o)}(e,o,d):(Rn(e,e._dbSchema,d),function(e,t){var n=Mn(On(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Sn(e,d)}catch(e){}It.push(e),o.onversionchange=qe((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),o.onclose=qe((function(t){e.on("close").fire(t)})),l&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Dn(n)&&t!==Ct&&wn(n,r).put({name:t}).catch(re)}(e._deps,u),r()}),a)}))}))]).then((function(){return o(),t.onReadyBeingFired=[],Le.resolve(Bn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(de,re);return t.onReadyBeingFired=[],Le.resolve(Bn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),ht(n)})).finally((function(){t.openComplete=!0,a()}))}function Un(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(n,r):o(a)?Promise.all(a).then(n,r):n(a)}}return i(t)()}function xn(e,t,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=M(i);return[e,o,n]}function Fn(e,t,n,r,i){return Le.resolve().then((function(){var o=Re.transless||Re,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return Fn(e,t,n,null,i)}))):ht(r)}var l,u=U(i);u&&rt();var c=Le.follow((function(){if(l=i.call(a,a))if(u){var e=it.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=Un(l))}),s);return(l&&"function"==typeof l.then?Le.resolve(l).then((function(e){return a.active?e:ht(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return l}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),ht(e)}))}))}function Kn(e,t,n){for(var r=o(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Yn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return e(e({},t),{table:function(n){var r=t.table(n),i=r.schema,o={},a=[];function s(t,n,r){var i=mn(t),l=o[i]=o[i]||[],u=null==t?0:"string"==typeof t?1:t.length,c=n>0,d=e(e({},r),{isVirtual:c,keyTail:n,keyLength:u,extractKey:gn(t),unique:!c&&r.unique});return l.push(d),d.isPrimaryKey||a.push(d),u>1&&s(2===u?t[0]:t.slice(0,u-1),n+1,r),l.sort((function(e,t){return e.keyTail-t.keyTail})),d}var l=s(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[l];for(var u=0,c=i.indexes;u<c.length;u++){var d=c[u];s(d.keyPath,0,d)}function p(n){var r,i,o=n.query.index;return o.isVirtual?e(e({},n),{query:{index:o,range:(r=n.query.range,i=o.keyTail,{type:1===r.type?2:r.type,lower:Kn(r.lower,r.lowerOpen?t.MAX_KEY:t.MIN_KEY,i),lowerOpen:!0,upper:Kn(r.upper,r.upperOpen?t.MIN_KEY:t.MAX_KEY,i),upperOpen:!0})}}):n}return e(e({},r),{schema:e(e({},i),{primaryKey:l,indexes:a,getIndexByKeyPath:function(e){var t=o[mn(e)];return t&&t[0]}}),count:function(e){return r.count(p(e))},query:function(e){return r.query(p(e))},openCursor:function(e){var n=e.query.index,i=n.keyTail,o=n.isVirtual,a=n.keyLength;return o?r.openCursor(p(e)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Kn(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,a).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(Kn(e,t.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}(n)})):r.openCursor(e)}})}})}};function jn(e,t,n,r){return n=n||{},r=r||"",i(e).forEach((function(i){if(u(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=D(o);s!==D(a)?n[r+i]=t[i]:"Object"===s?jn(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),i(t).forEach((function(i){u(e,i)||(n[r+i]=t[i])})),n}var Vn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return e(e({},n),{table:function(r){var i=n.table(r),o=i.schema.primaryKey;return e(e({},i),{mutate:function(n){var a=Re.trans,s=a.table(r).hook,l=s.deleting,c=s.creating,d=s.updating;switch(n.type){case"add":if(c.fire===re)break;return a._promise("readwrite",(function(){return p(n)}),!0);case"put":if(c.fire===re&&d.fire===re)break;return a._promise("readwrite",(function(){return p(n)}),!0);case"delete":if(l.fire===re)break;return a._promise("readwrite",(function(){return p(n)}),!0);case"deleteRange":if(l.fire===re)break;return a._promise("readwrite",(function(){return function(e){return f(e.trans,e.range,1e4)}(n)}),!0)}return i.mutate(n);function p(n){var r=Re.trans,a=n.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(o,n);if(!a)throw new Error("Keys missing");return"delete"!==(n="add"===n.type||"put"===n.type?e(e({},n),{keys:a}):e({},n)).type&&(n.values=t([],n.values,!0)),n.keys&&(n.keys=t([],n.keys,!0)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(i,n,a).then((function(e){var t=a.map((function(t,i){var a=e[i],s={onerror:null,onsuccess:null};if("delete"===n.type)l.fire.call(s,t,a,r);else if("add"===n.type||void 0===a){var p=c.fire.call(s,t,n.values[i],r);null==t&&null!=p&&(t=p,n.keys[i]=t,o.outbound||I(n.values[i],o.keyPath,t))}else{var f=jn(a,n.values[i]),_=d.fire.call(s,f,t,a,r);if(_){var g=n.values[i];Object.keys(_).forEach((function(e){u(g,e)?g[e]=_[e]:I(g,e,_[e])}))}}return s}));return i.mutate(n).then((function(r){for(var i=r.failures,o=r.results,s=r.numFailures,l=r.lastResult,u=0;u<a.length;++u){var c=o?o[u]:a[u],d=t[u];null==c?d.onerror&&d.onerror(i[u]):d.onsuccess&&d.onsuccess("put"===n.type&&e[u]?n.values[u]:c)}return{failures:i,results:o,numFailures:s,lastResult:l}})).catch((function(e){return t.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function f(t,n,r){return i.query({trans:t,values:!1,query:{index:o,range:n},limit:r}).then((function(i){var o=i.result;return p({type:"delete",keys:o,trans:t}).then((function(i){return i.numFailures>0?Promise.reject(i.failures[0]):o.length<r?{failures:[],numFailures:0,lastResult:void 0}:f(t,e(e({},n),{lower:o[o.length-1],lowerOpen:!0}),r)}))}))}}})}})}};function Wn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===Vt(t.keys[i],e[o])&&(r.push(n?R(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var Hn,Qn={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var r=t.table(n);return e(e({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Wn(e.keys,e.trans._cache,"clone"===e.cache);return t?Le.resolve(t):r.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?R(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function $n(e){return!("from"in e)}var qn=function(e,t){if(!this){var n=new qn;return e&&"d"in e&&a(n,e),n}a(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Jn(e,t,n){var r=Vt(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if($n(e))return a(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Vt(n,e.from)<0)return i?Jn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},er(e);if(Vt(t,e.to)>0)return o?Jn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},er(e);Vt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Vt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;i&&!e.l&&zn(e,i),o&&s&&zn(e,o)}}function zn(e,t){$n(t)||function e(t,n){var r=n.from,i=n.to,o=n.l,a=n.r;Jn(t,r,i),o&&e(t,o),a&&e(t,a)}(e,t)}function Xn(e,t){var n=Zn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Zn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(Vt(s.from,i.to)<=0&&Vt(s.to,i.from)>=0)return!0;Vt(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Zn(e){var t=$n(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Vt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Vt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function er(t){var n,r,i=((null===(n=t.r)||void 0===n?void 0:n.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var a="r"===o?"l":"r",s=e({},t),l=t[o];t.from=l.from,t.to=l.to,t[o]=l[o],s[o]=l[a],t[a]=s,s.d=tr(s)}t.d=tr(t)}function tr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}c(qn.prototype,((Hn={add:function(e){return zn(this,e),this},addKey:function(e){return Jn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return Jn(t,e,e)})),this}})[L]=function(){return Zn(this)},Hn));var nr,rr={stack:"dbcore",level:0,create:function(t){var n=t.schema.name,r=new qn(t.MIN_KEY,t.MAX_KEY);return e(e({},t),{table:function(a){var s=t.table(a),l=s.schema,u=l.primaryKey,c=u.extractKey,d=u.outbound,p=e(e({},s),{mutate:function(e){var t=e.trans,i=t.mutatedParts||(t.mutatedParts={}),u=function(e){var t="idb://"+n+"/"+a+"/"+e;return i[t]||(i[t]=new qn)},c=u(""),d=u(":dels"),p=e.type,f="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],_=f[0],g=f[1],h=e.trans._cache;return s.mutate(e).then((function(e){if(o(_)){"delete"!==p&&(_=e.results),c.addKeys(_);var t=Wn(_,h);t||"add"===p||d.addKeys(_),(t||g)&&function(e,t,n,r){function i(t){var i=e(t.name||"");function a(e){return null!=e?t.extractKey(e):null}var s=function(e){return t.multiEntry&&o(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&a(n[t]),o=r&&a(r[t]);0!==Vt(i,o)&&(null!=i&&s(i),null!=o&&s(o))}))}t.indexes.forEach(i)}(u,l,t,g)}else if(_){var n={from:_.lower,to:_.upper};d.add(n),c.add(n)}else c.add(r),d.add(r),l.indexes.forEach((function(e){return u(e.name).add(r)}));return e}))}}),f=function(e){var n,r,i=e.query,o=i.index,a=i.range;return[o,new qn(null!==(n=a.lower)&&void 0!==n?n:t.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:t.MAX_KEY)]},_={get:function(e){return[u,new qn(e.key)]},getMany:function(e){return[u,(new qn).addKeys(e.keys)]},count:f,query:f,openCursor:f};return i(_).forEach((function(t){p[t]=function(i){var o=Re.subscr;if(o){var l=function(e){var t="idb://"+n+"/"+a+"/"+e;return o[t]||(o[t]=new qn)},u=l(""),p=l(":dels"),f=_[t](i),g=f[0],h=f[1];if(l(g.name||"").add(h),!g.isPrimaryKey){if("count"!==t){var A="query"===t&&d&&i.values&&s.query(e(e({},i),{values:!1}));return s[t].apply(this,arguments).then((function(e){if("query"===t){if(d&&i.values)return A.then((function(t){var n=t.result;return u.addKeys(n),e}));var n=i.values?e.result.map(c):e.result;i.values?u.addKeys(n):p.addKeys(n)}else if("openCursor"===t){var r=e,o=i.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return p.addKey(e),e}},value:{get:function(){return o&&u.addKey(r.primaryKey),r.value}}})}return e}))}p.add(r)}}return s[t].apply(this,arguments)}})),p}})}},ir=function(){function t(n,r){var i=this;this._middlewares={},this.verno=0;var o=t.dependencies;this._options=r=e({addons:t.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};l.dbReadyPromise=new Le((function(e){l.dbReadyResolve=e})),l.openCanceller=new Le((function(e,t){l.cancelOpen=t})),this._state=l,this.name=n,this.on=Bt(this,"populate","blocked","versionchange","close",{ready:[de,re]}),this.on.ready.subscribe=m(this.on.ready.subscribe,(function(e){return function(n,r){t.vip((function(){var t=i._state;if(t.openComplete)t.dbOpenError||Le.resolve().then(n),r&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),r&&e(n);else{e(n);var o=i;r||e((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(s=this,kt(Qt.prototype,(function(e,t){this.db=s;var n=wt,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table,a=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a!==ie?a:null}}))),this.Table=function(e){return kt(Lt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Bt(null,{creating:[se,re],reading:[oe,ie],updating:[ue,re],deleting:[le,re]})}))}(this),this.Transaction=function(e){return kt(cn.prototype,(function(t,n,r,i,o){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Le((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return kt(Nn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return kt(rn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new ee.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=_n(r.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),It.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Yn),this.use(Vn),this.use(rr),this.use(Qn),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach((function(e){return e(i)}))}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Tn),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?e():new Le((function(e,n){if(t._state.openComplete)return n(new ee.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new ee.DatabaseClosed);t.open().catch(re)}t._state.dbReadyPromise.then(e,n)})).then(e)},t.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},t.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},t.prototype.open=function(){return Gn(this)},t.prototype._close=function(){var e=this._state,t=It.indexOf(this);if(t>=0&&It.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Le((function(t){e.dbReadyResolve=t})),e.openCanceller=new Le((function(t,n){e.cancelOpen=n}))},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Le((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=qe((function(){Ln(e._deps,e.name),r()})),t.onerror=on(i),t.onblocked=e._fireOnBlocked};if(t)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=xn.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,t,n){var r=this,i=Re.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Ot)o=Ot;else{if("rw"!=e&&e!=Rt)throw new ee.InvalidArgument("Invalid transaction mode: "+e);o=Rt}if(i){if(i.mode===Ot&&o===Rt){if(!s)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):ht(e)}var l=Fn.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):Re.trans?ct(Re.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},t.prototype.table=function(e){if(!u(this._allTables,e))throw new ee.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),or="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ar=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},e.prototype[or]=function(){return this},e}();function sr(e,t){return i(t).forEach((function(n){zn(e[n]||(e[n]=new qn),t[n])})),e}function lr(e){return new ar((function(t){var n=U(e),r=!1,o={},a={},s={get closed(){return r},unsubscribe:function(){r=!0,un.storagemutated.unsubscribe(d)}};t.start&&t.start(s);var l=!1,u=!1;function c(){return i(a).some((function(e){return o[e]&&Xn(o[e],a[e])}))}var d=function(e){sr(o,e),c()&&p()},p=function(){if(!l&&!r){o={};var i={},f=function(t){n&&rt();var r=function(){return nt(e,{subscr:t,trans:null})},i=Re.trans?ct(Re.transless,r):r();return n&&i.then(it,it),i}(i);u||(un(sn,d),u=!0),l=!0,Promise.resolve(f).then((function(e){l=!1,r||(c()?p():(o={},a=i,t.next&&t.next(e)))}),(function(e){l=!1,t.error&&t.error(e),s.unsubscribe()}))}};return p(),s}))}try{nr={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(e){nr={indexedDB:null,IDBKeyRange:null}}var ur=ir;function cr(e){var t=dr;try{dr=!0,un.storagemutated.fire(e)}finally{dr=t}}c(ur,e(e({},ne),{delete:function(e){return new ur(e,{addons:[]}).delete()},exists:function(e){return new ur(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return Dn(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Ct}))})):wn(t,n).toCollection().primaryKeys()}(ur.dependencies).then(e)}catch(e){return ht(new ee.MissingAPI)}},defineClass:function(){return function(e){a(this,e)}},ignoreTransaction:function(e){return Re.trans?ct(Re.transless,e):e()},vip:Bn,async:function(e){return function(){try{var t=Un(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Le.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=Un(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Le.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(e,t){var n=Le.resolve("function"==typeof e?ur.ignoreTransaction(e):e).timeout(t||6e4);return Re.trans?Re.trans.waitFor(n):n},Promise:Le,debug:{get:function(){return x},set:function(e){F(e,"dexie"===e?function(){return!0}:Pt)}},derive:f,extend:a,props:c,override:m,Events:Bt,on:un,liveQuery:lr,extendObservabilitySet:sr,getByKeyPath:v,setByKeyPath:I,delByKeyPath:function(e,t){"string"==typeof t?I(e,t,void 0):"length"in t&&[].map.call(t,(function(t){I(e,t,void 0)}))},shallowClone:T,deepClone:R,getObjectDiff:jn,cmp:Vt,asap:y,minKey:yt,addons:[],connections:It,errnames:X,dependencies:nr,semVer:mt,version:mt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),ur.maxKey=_n(ur.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(un(sn,(function(e){var t;dr||(Tt?(t=document.createEvent("CustomEvent")).initCustomEvent(ln,!0,!0,e):t=new CustomEvent(ln,{detail:e}),dr=!0,dispatchEvent(t),dr=!1)})),addEventListener(ln,(function(e){var t=e.detail;dr||cr(t)})));var dr=!1;if("undefined"!=typeof BroadcastChannel){var pr=new BroadcastChannel(ln);un(sn,(function(e){dr||pr.postMessage(e)})),pr.onmessage=function(e){e.data&&cr(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){un(sn,(function(e){try{dr||("undefined"!=typeof localStorage&&localStorage.setItem(ln,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&t([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach((function(t){return t.postMessage({type:ln,changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if(e.key===ln){var t=JSON.parse(e.newValue);t&&cr(t.changedParts)}}));var fr=self.document&&navigator.serviceWorker;fr&&fr.addEventListener("message",(function(e){var t=e.data;t&&t.type===ln&&cr(t.changedParts)}))}return Le.rejectionMapper=function(e,t){if(!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&p(n,"stack",{get:function(){return this.inner.stack}}),n},F(x,Pt),e(ir,Object.freeze({__proto__:null,Dexie:ir,liveQuery:lr,default:ir,RangeSet:qn,mergeRanges:zn,rangesOverlap:Xn}),{default:ir}),ir},"object"==typeof r&&void 0!==i?i.exports=t():(e="undefined"!=typeof globalThis?globalThis:e||self).Dexie=t()}var a=!1;e.exports=function(e){switch(e){case void 0:return a||(a=!0,o()),i.exports}}},52251:(e,t,n)=>{!function(){var t=void 0,r={};self.libsignal={};var o,a=void 0!==a?a:{},s={};for(o in a)a.hasOwnProperty(o)&&(s[o]=a[o]);var l=[],u=!1,c=!1,d=!1,p=!1;u="object"==typeof window,c="function"==typeof importScripts,d="object"==typeof t&&"object"==typeof t.versions&&"string"==typeof t.versions.node,p=!u&&!d&&!c;var f,_,g,h,A="";function m(e){return a.locateFile?a.locateFile(e,A):A+e}d?(A=c?n(26470).dirname(A)+"/":"//",f=function(e,t){var r=ue(e);return r?t?r:r.toString():(g||(g=n(35747)),h||(h=n(26470)),e=h.normalize(e),g.readFileSync(e,t?null:"utf8"))},_=function(e){var t=f(e,!0);return t.buffer||(t=new Uint8Array(t)),T(t.buffer),t},t.argv.length>1&&t.argv[1].replace(/\\/g,"/"),l=t.argv.slice(2),e.exports=a,t.on("uncaughtException",(function(e){if(!(e instanceof fe))throw e})),t.on("unhandledRejection",W),function(e){t.exit(e)},a.inspect=function(){return"[Emscripten Module object]"}):p?("undefined"!=typeof read&&(f=function(e){var t=ue(e);return t?ae(t):read(e)}),_=function(e){var t;return(t=ue(e))?t:"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(T("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),"function"==typeof quit&&function(e){quit(e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||c)&&(c?A=self.location.href:document.currentScript&&(A=document.currentScript.src),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",f=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){var n=ue(e);if(n)return ae(n);throw t}},c&&(_=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){var n=ue(e);if(n)return n;throw t}}),function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=ue(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)});a.print||console.log.bind(console);var E=a.printErr||console.warn.bind(console);for(o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);s=null,a.arguments&&(l=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit;var y,S;a.wasmBinary&&(y=a.wasmBinary),a.noExitRuntime&&a.noExitRuntime,"object"!=typeof WebAssembly&&W("no native wasm support detected");var v=new WebAssembly.Table({initial:1,maximum:1,element:"anyfunc"}),I=!1;function T(e,t){e||W("Assertion failed: "+t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8");"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var b,M,P=65536;function C(e){b=e,a.HEAP8=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=M=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var O=a.INITIAL_MEMORY||16777216;(S=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:O/P,maximum:O/P}))&&(b=S.buffer),O=b.byteLength,C(b);var R=[],N=[],w=[],D=[];function L(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)U(a.preRun.shift());te(R)}function B(){!0,te(N)}function k(){te(w)}function G(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)x(a.postRun.shift());te(D)}function U(e){R.unshift(e)}function x(e){D.unshift(e)}Math.abs,Math.ceil,Math.floor,Math.min;var F=0,K=null,Y=null;function j(e){F++,a.monitorRunDependencies&&a.monitorRunDependencies(F)}function V(e){if(F--,a.monitorRunDependencies&&a.monitorRunDependencies(F),0==F&&(null!==K&&(clearInterval(K),K=null),Y)){var t=Y;Y=null,t()}}function W(e){throw a.onAbort&&a.onAbort(e),E(e+=""),I=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function H(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};var Q="data:application/octet-stream;base64,";function $(e){return H(e,Q)}var q="file://";function J(e){return H(e,q)}var z="data:application/octet-stream;base64,AGFzbQEAAAABTw1gAn9/AGADf39/AGABfwBgAX8Bf2ADf39/AX9gBH9/f38AYAN/f34AYAABf2ACf38Bf2AAAGAFf39/fn8AYAR/f39/AX9gBX9/f35/AX8CSwMDZW52FWVtc2NyaXB0ZW5fbWVtY3B5X2JpZwAEA2VudhZlbXNjcmlwdGVuX3Jlc2l6ZV9oZWFwAAMDZW52Bm1lbW9yeQIBgAKAAgM+PQkIBQsGCgQGAQIAAgIBAQAAAAMDAQAAAAABAAEFCAEBAAAAAAAAAAABAQwFAgIBAAAABAAEBwMDAgcCAwMGEAJ/AUGwisICC38AQaiKAgsH+gEOEV9fd2FzbV9jYWxsX2N0b3JzAAIsY3J5cHRvX3NpZ25fZWQyNTUxOV9yZWYxMF9nZV9zY2FsYXJtdWx0X2Jhc2UAKQ9jdXJ2ZTI1NTE5X3NpZ24ABBFjdXJ2ZTI1NTE5X3ZlcmlmeQAFD3NwaF9zaGE1MTJfaW5pdAAvEGN1cnZlMjU1MTlfZG9ubmEACBBfX2Vycm5vX2xvY2F0aW9uADcJc3RhY2tTYXZlADsMc3RhY2tSZXN0b3JlADwKc3RhY2tBbGxvYwA9Bm1hbGxvYwA5BGZyZWUAOgpfX2RhdGFfZW5kAwEQX19ncm93V2FzbU1lbW9yeQA+Co/VAj0DAAELjQMAIAEtAAEgAC0AAXMgAS0AACAALQAAc3IgAS0AAiAALQACc3IgAS0AAyAALQADc3IgAS0ABCAALQAEc3IgAS0ABSAALQAFc3IgAS0ABiAALQAGc3IgAS0AByAALQAHc3IgAS0ACCAALQAIc3IgAS0ACSAALQAJc3IgAS0ACiAALQAKc3IgAS0ACyAALQALc3IgAS0ADCAALQAMc3IgAS0ADSAALQANc3IgAS0ADiAALQAOc3IgAS0ADyAALQAPc3IgAS0AECAALQAQc3IgAS0AESAALQARc3IgAS0AEiAALQASc3IgAS0AEyAALQATc3IgAS0AFCAALQAUc3IgAS0AFSAALQAVc3IgAS0AFiAALQAWc3IgAS0AFyAALQAXc3IgAS0AGCAALQAYc3IgAS0AGSAALQAZc3IgAS0AGiAALQAac3IgAS0AGyAALQAbc3IgAS0AHCAALQAcc3IgAS0AHSAALQAdc3IgAS0AHiAALQAec3IgAS0AHyAALQAfc3JBf2pBCHZBAXFBf2oL5wEBAn8jAEHwAWsiBCQAIAQgA0HPAGpBcHFrIgUkACAEQgA3AwggBCABKQAQNwMgIAQgASkAGDcDKCAEIAEpAAA3AxAgBCABKQAINwMYIARB0ABqIAEQKSAEQTBqIARB0ABqECggBC0ATyEBIAUgBEEIaiACIAOtIARBEGoQByAAIAUpADg3ADggACAFKQAwNwAwIAAgBSkAKDcAKCAAIAUpACA3ACAgACAFKQAYNwAYIAAgBSkAEDcAECAAIAUpAAg3AAggACAFKQAANwAAIAAgAC0APyABQYABcXI6AD8gBEHwAWokAAuzAgEEfyMAQdACayIHJAAgByADQc8AakFwcSIEayIFIgYkACAGIARrIgYkACAHIgRBoAJqIAEQEiAEQeAAahAOIARB8AFqIARBoAJqIARB4ABqEBsgBEHAAWogBEGgAmogBEHgAGoQDyAEQZABaiAEQcABahATIARBMGogBEHwAWogBEGQAWoQFiAEQRBqIARBMGoQHCAEIAQtAC8gAC0APyIBQYABcXI6AC8gACABQf8AcToAPyAFIAApADA3ADAgBSAAKQAoNwAoIAUgACkAIDcAICAFIAApABg3ABggBSAAKQAQNwAQIAUgACkACDcACCAFIAApAAA3AAAgBSAAKQA4NwA4IAVBQGsgAiADEDQaIAYgBEEIaiAFIANBQGutIARBEGoQLCEAIARB0AJqJAAgAAsyAQF/IwBB0AFrIgMkACADQQhqEC8gA0EIaiABIAKnEDAgA0EIaiAAEDMgA0HQAWokAAumAgIFfwR+IwBBwAJrIgUkACAFQbACaiIGIAQpADA3AwAgBUG4AmoiByAEKQA4NwMAIAUgBCkAIDcDoAIgBSAEKQAoNwOoAiABIANCQH0iCjcDACAAQUBrIAIgA6cQNhogBCkACCELIAQpABAhDCAEKQAAIQ0gAEE4aiICIAQpABg3AAAgAEEwaiIBIAw3AAAgAEEoaiIIIAs3AAAgACANNwAgIAVB4AFqIABBIGoiCSADQiB8EAYgAiAHKQMANwAAIAEgBikDADcAACAIIAUpA6gCNwAAIAAgBSkDoAI3ACAgBUHgAWoQLiAFIAVB4AFqECkgACAFECggBUGgAWogACAKEAYgBUGgAWoQLiAJIAVBoAFqIAQgBUHgAWoQLSAFQcACaiQAC6pNAhN/FX4jAEGgFGsiAyQAIAMgASkAGDcDGCADIAEpABA3AxAgAyABKQAINwMIIAMgASkAADcDACADIAIxAAMiFkIYhkKAgIAYgyACMwAAIAIxAAJCEIaEhDcDcCADIBYgAjEABEIIhoQgAjEABUIQhoQgAjEABiIWQhiGhEICiEL///8PgzcDeCADIBYgAjEAB0IIhoQgAjEACEIQhoQgAjEACSIWQhiGhEIDiEL///8fgzcDgAEgAyAWIAIxAApCCIaEIAIxAAtCEIaEIAIxAAwiFkIYhoRCBYhC////D4M3A4gBIAMgFiACMQANQgiGhCACMQAOQhCGhCACMQAPQhiGhEIGiDcDkAEgAyACMQATIhZCGIZCgICACIMgAjMAECACMQASQhCGhIQ3A5gBIAMgFiACMQAUQgiGhCACMQAVQhCGhCACMQAWIhZCGIaEQgGIQv///x+DNwOgASADIBYgAjEAF0IIhoQgAjEAGEIQhoQgAjEAGSIWQhiGhEIDiEL///8PgzcDqAEgAyAWIAIxABpCCIaEIAIxABtCEIaEIAIxABwiFkIYhoRCBIhC////H4M3A7ABIAMgFiACMQAdQgiGhCACMQAeQhCGhCACMQAfQhiGhEIGiEL///8PgzcDuAEgA0GgCmpBmAEQNSADQgE3A6AKIANBgAlqQZgBEDUgA0IBNwOACSADQeAHakGYARA1IANBwAZqQZgBEDUgA0GgBWpBmAEQNSADQgE3A6AFIANBgARqQZgBEDUgA0HgAmpBmAEQNSADQgE3A+ACIANBkAxqQcgAEDUgA0HAC2ogA0HwAGpB0AAQNBogA0GQAmohESADQYAEaiEHIANBwAZqIQQgA0HgAmohDCADQaAFaiEIIANB4AdqIQIgA0HAC2ohDSADQYAJaiEBIANBoApqIQ8DQCADIA5rLQAfIQlBACEQA0AgBCEGIAEiCiANIgQgCUGAAXFBB3atIhYQCSACIgsgDyIFIBYQCSABIAIpAwAiFyABKQMAIhh8NwMAIAEgAikDCCIZIAEpAwgiGnw3AwggASACKQMQIhsgASkDECIcfDcDECABIAIpAxgiHSABKQMYIh58NwMYIAEgAikDICIfIAEpAyAiIHw3AyAgASACKQMoIiEgASkDKCIifDcDKCABIAIpAzAiIyABKQMwIiR8NwMwIAEgAikDOCIlIAEpAzgiJnw3AzggASACKQNAIicgASkDQCIofDcDQCABIAIpA0giKSABKQNIIip8NwNIIAIgKiApfTcDSCACICggJ303A0AgAiAmICV9NwM4IAIgJCAjfTcDMCACICIgIX03AyggAiAgIB99NwMgIAIgHiAdfTcDGCACIBwgG303AxAgAiAaIBl9NwMIIAIgGCAXfTcDACAEIAUpAwAiFyAEKQMAIhh8NwMAIAQgBSkDCCIZIAQpAwgiGnw3AwggBCAFKQMQIhsgBCkDECIcfDcDECAEIAUpAxgiHSAEKQMYIh58NwMYIAQgBSkDICIfIAQpAyAiIHw3AyAgBCAFKQMoIiEgBCkDKCIifDcDKCAEIAUpAzAiIyAEKQMwIiR8NwMwIAQgBSkDOCIlIAQpAzgiJnw3AzggBCAFKQNAIicgBCkDQCIofDcDQCAEIAUpA0giKSAEKQNIIip8NwNIIAUgKiApfTcDSCAFICggJ303A0AgBSAmICV9NwM4IAUgJCAjfTcDMCAFICIgIX03AyggBSAgIB99NwMgIAUgHiAdfTcDGCAFIBwgG303AxAgBSAaIBl9NwMIIAUgGCAXfTcDACADQcAQaiAEIAIQCiADQaAPaiABIAUQCiADIAMpA9ARIhcgAykDgBF8IBdCEn58NwOAESADIAMpA8gRIhcgAykD+BB8IBdCEn58NwP4ECADIAMpA8ARIhcgAykD8BB8IBdCEn58NwPwECADIAMpA7gRIhcgAykD6BB8IBdCEn58NwPoECADIAMpA7ARIhcgAykD4BB8IBdCEn58NwPgECADIAMpA6gRIhcgAykD2BB8IBdCEn58NwPYECADIAMpA6ARIhcgAykD0BB8IBdCEn58NwPQECADIAMpA5gRIhcgAykDyBB8IBdCEn58NwPIECADIAMpA5ARIhcgAykDwBB8IBdCEn58NwPAECADQcAQahALIAMgAykDsBAiFyADKQPgD3wgF0ISfnw3A+APIAMgAykDqBAiFyADKQPYD3wgF0ISfnw3A9gPIAMgAykDoBAiFyADKQPQD3wgF0ISfnw3A9APIAMgAykDmBAiFyADKQPID3wgF0ISfnw3A8gPIAMgAykDkBAiFyADKQPAD3wgF0ISfnw3A8APIAMgAykDiBAiFyADKQO4D3wgF0ISfnw3A7gPIAMgAykDgBAiFyADKQOwD3wgF0ISfnw3A7APIAMgAykD+A8iFyADKQOoD3wgF0ISfnw3A6gPIAMgAykD8A8iFyADKQOgD3wgF0ISfnw3A6APIANBoA9qEAsgAyADKQOgDyIbIAMpA8AQIhx8NwPAECADIAMpA6gPIh0gAykDyBAiHnw3A8gQIAMgAykDsA8iHyADKQPQECIgfDcD0BAgAyADKQO4DyIhIAMpA9gQIiJ8NwPYECADIAMpA8APIiMgAykD4BAiJHw3A+AQIAMpA4gRIRcgAykDgBEhGCADKQP4ECEZIAMpA/AQIRogAyADKQPIDyIlIAMpA+gQIiZ8NwPoECADIBogAykD0A8iJ3w3A/AQIAMgGSADKQPYDyIofDcD+BAgAyAYIAMpA+APIil8NwOAESADIBcgAykD6A8iKnw3A4gRIAMgJCAjfTcDwA8gAyAeIB19NwOoDyADICAgH303A7APIAMgIiAhfTcDuA8gAyAmICV9NwPIDyADIBogJ303A9APIAMgGSAofTcD2A8gAyAYICl9NwPgDyADIBcgKn03A+gPIAMgHCAbfTcDoA8gA0HgDGogA0HAEGoQDCADQYAOaiADQaAPahAMIANBoA9qIANBgA5qIANB8ABqEAogAyADKQOwECIXIAMpA+APfCAXQhJ+fDcD4A8gAyADKQOoECIXIAMpA9gPfCAXQhJ+fDcD2A8gAyADKQOgECIXIAMpA9APfCAXQhJ+fDcD0A8gAyADKQOYECIXIAMpA8gPfCAXQhJ+fDcDyA8gAyADKQOQECIXIAMpA8APfCAXQhJ+fDcDwA8gAyADKQOIECIXIAMpA7gPfCAXQhJ+fDcDuA8gAyADKQOAECIXIAMpA7APfCAXQhJ+fDcDsA8gAyADKQP4DyIXIAMpA6gPfCAXQhJ+fDcDqA8gAyADKQPwDyIXIAMpA6APfCAXQhJ+fDcDoA8gA0GgD2oQCyAGIANB4AxqQdAAEDQhBiAIIg8gA0GgD2pB0AAQNCEIIANBgBNqIAEQDCADQeARaiACEAwgByIBIANBgBNqIANB4BFqEAogASABKQOQASIXIAEpA0B8IBdCEn58NwNAIAEgASkDiAEiFyABKQM4fCAXQhJ+fDcDOCABIAEpA4ABIhcgASkDMHwgF0ISfnw3AzAgASABKQN4IhcgASkDKHwgF0ISfnw3AyggASABKQNwIhcgASkDIHwgF0ISfnw3AyAgASABKQNoIhcgASkDGHwgF0ISfnw3AxggASABKQNgIhcgASkDEHwgF0ISfnw3AxAgASABKQNYIhcgASkDCHwgF0ISfnw3AwggASABKQNQIhcgASkDAHwgF0ISfnw3AwAgARALIAMgAykDgBMiFyADKQPgEX0iGDcD4BEgAyADKQOIEyIZIAMpA+gRfSIaNwPoESADIAMpA5ATIhsgAykD8BF9Ihw3A/ARIAMgAykDmBMiHSADKQP4EX0iHjcD+BEgAyADKQOgEyIfIAMpA4ASfSIgNwOAEiADIAMpA6gTIiEgAykDiBJ9IiI3A4gSIAMgAykDsBMiIyADKQOQEn0iJDcDkBIgAyADKQO4EyIlIAMpA5gSfSImNwOYEiADIAMpA8ATIicgAykDoBJ9Iig3A6ASIAMgAykDyBMiKSADKQOoEn0iKjcDqBIgEUHIABA1IAMgKkLBtgd+NwOIAiADIChCwbYHfjcDgAIgAyAmQsG2B343A/gBIAMgJELBtgd+NwPwASADICJCwbYHfjcD6AEgAyAgQsG2B343A+ABIAMgHkLBtgd+NwPYASADIBxCwbYHfjcD0AEgAyAaQsG2B343A8gBIAMgGELBtgd+NwPAASADQcABahALIAMgFyADKQPAAXw3A8ABIAMgGSADKQPIAXw3A8gBIAMgGyADKQPQAXw3A9ABIAMgHSADKQPYAXw3A9gBIAMgHyADKQPgAXw3A+ABIAMgISADKQPoAXw3A+gBIAMgIyADKQPwAXw3A/ABIAMgJSADKQP4AXw3A/gBIAMgJyADKQOAAnw3A4ACIAMgKSADKQOIAnw3A4gCIAwiAiADQeARaiADQcABahAKIAIgAikDkAEiFyACKQNAfCAXQhJ+fDcDQCACIAIpA4gBIhcgAikDOHwgF0ISfnw3AzggAiACKQOAASIXIAIpAzB8IBdCEn58NwMwIAIgAikDeCIXIAIpAyh8IBdCEn58NwMoIAIgAikDcCIXIAIpAyB8IBdCEn58NwMgIAIgAikDaCIXIAIpAxh8IBdCEn58NwMYIAIgAikDYCIXIAIpAxB8IBdCEn58NwMQIAIgAikDWCIXIAIpAwh8IBdCEn58NwMIIAIgAikDUCIXIAIpAwB8IBdCEn58NwMAIAIQCyABIAYgFhAJIAIgCCAWEAkgCUEBdCEJIAYhDSALIQwgCiEHIAUhCCAQQQFqIhBBCEcNAAsgDkEBaiIOQSBHDQALIANBIGogAUHQABA0GiADQYATaiACQdAAEDQaIANB4BFqIANBgBNqEAwgA0HABmogA0HgEWoQDCADQeAHaiADQcAGahAMIANBwAFqIANB4AdqIANBgBNqEAogAyADKQPQAiIWIAMpA4ACfCAWQhJ+fDcDgAIgAyADKQPIAiIWIAMpA/gBfCAWQhJ+fDcD+AEgAyADKQPAAiIWIAMpA/ABfCAWQhJ+fDcD8AEgAyADKQO4AiIWIAMpA+gBfCAWQhJ+fDcD6AEgAyADKQOwAiIWIAMpA+ABfCAWQhJ+fDcD4AEgAyADKQOoAiIWIAMpA9gBfCAWQhJ+fDcD2AEgAyADKQOgAiIWIAMpA9ABfCAWQhJ+fDcD0AEgAyADKQOYAiIWIAMpA8gBfCAWQhJ+fDcDyAEgAyADKQOQAiIWIAMpA8ABfCAWQhJ+fDcDwAEgA0HAAWoQCyADQcAQaiADQcABakHQABA0GiADQcABaiADQcAQaiADQeARahAKIAMgAykD0AIiFiADKQOAAnwgFkISfnw3A4ACIAMgAykDyAIiFiADKQP4AXwgFkISfnw3A/gBIAMgAykDwAIiFiADKQPwAXwgFkISfnw3A/ABIAMgAykDuAIiFiADKQPoAXwgFkISfnw3A+gBIAMgAykDsAIiFiADKQPgAXwgFkISfnw3A+ABIAMgAykDqAIiFiADKQPYAXwgFkISfnw3A9gBIAMgAykDoAIiFiADKQPQAXwgFkISfnw3A9ABIAMgAykDmAIiFiADKQPIAXwgFkISfnw3A8gBIAMgAykDkAIiFiADKQPAAXwgFkISfnw3A8ABIANBwAFqEAsgA0GgD2ogA0HAAWpB0AAQNBogA0HgB2ogA0GgD2oQDCADQcABaiADQeAHaiADQcAQahAKIAMgAykD0AIiFiADKQOAAnwgFkISfnw3A4ACIAMgAykDyAIiFiADKQP4AXwgFkISfnw3A/gBIAMgAykDwAIiFiADKQPwAXwgFkISfnw3A/ABIAMgAykDuAIiFiADKQPoAXwgFkISfnw3A+gBIAMgAykDsAIiFiADKQPgAXwgFkISfnw3A+ABIAMgAykDqAIiFiADKQPYAXwgFkISfnw3A9gBIAMgAykDoAIiFiADKQPQAXwgFkISfnw3A9ABIAMgAykDmAIiFiADKQPIAXwgFkISfnw3A8gBIAMgAykDkAIiFiADKQPAAXwgFkISfnw3A8ABIANBwAFqEAsgA0GADmogA0HAAWpB0AAQNBogA0HgB2ogA0GADmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAFqIANB4AdqIANBgA5qEAogAyADKQPQAiIWIAMpA4ACfCAWQhJ+fDcDgAIgAyADKQPIAiIWIAMpA/gBfCAWQhJ+fDcD+AEgAyADKQPAAiIWIAMpA/ABfCAWQhJ+fDcD8AEgAyADKQO4AiIWIAMpA+gBfCAWQhJ+fDcD6AEgAyADKQOwAiIWIAMpA+ABfCAWQhJ+fDcD4AEgAyADKQOoAiIWIAMpA9gBfCAWQhJ+fDcD2AEgAyADKQOgAiIWIAMpA9ABfCAWQhJ+fDcD0AEgAyADKQOYAiIWIAMpA8gBfCAWQhJ+fDcDyAEgAyADKQOQAiIWIAMpA8ABfCAWQhJ+fDcDwAEgA0HAAWoQCyADQeAMaiADQcABakHQABA0GiADQeAHaiADQeAMahAMIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANBwAFqIANBwAZqIANB4AxqEAogAyADKQPQAiIWIAMpA4ACfCAWQhJ+fDcDgAIgAyADKQPIAiIWIAMpA/gBfCAWQhJ+fDcD+AEgAyADKQPAAiIWIAMpA/ABfCAWQhJ+fDcD8AEgAyADKQO4AiIWIAMpA+gBfCAWQhJ+fDcD6AEgAyADKQOwAiIWIAMpA+ABfCAWQhJ+fDcD4AEgAyADKQOoAiIWIAMpA9gBfCAWQhJ+fDcD2AEgAyADKQOgAiIWIAMpA9ABfCAWQhJ+fDcD0AEgAyADKQOYAiIWIAMpA8gBfCAWQhJ+fDcDyAEgAyADKQOQAiIWIAMpA8ABfCAWQhJ+fDcDwAEgA0HAAWoQCyADQcALaiADQcABakHQABA0GiADQeAHaiADQcALahAMIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAZqIANB4AdqEAwgA0HAAWogA0HABmogA0HAC2oQCiADIAMpA9ACIhYgAykDgAJ8IBZCEn58NwOAAiADIAMpA8gCIhYgAykD+AF8IBZCEn58NwP4ASADIAMpA8ACIhYgAykD8AF8IBZCEn58NwPwASADIAMpA7gCIhYgAykD6AF8IBZCEn58NwPoASADIAMpA7ACIhYgAykD4AF8IBZCEn58NwPgASADIAMpA6gCIhYgAykD2AF8IBZCEn58NwPYASADIAMpA6ACIhYgAykD0AF8IBZCEn58NwPQASADIAMpA5gCIhYgAykDyAF8IBZCEn58NwPIASADIAMpA5ACIhYgAykDwAF8IBZCEn58NwPAASADQcABahALIANB4AdqIANBwAFqQdAAEDQaIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAZqIANB4AdqEAwgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HAAWogA0HgB2ogA0HgDGoQCiADIAMpA9ACIhYgAykDgAJ8IBZCEn58NwOAAiADIAMpA8gCIhYgAykD+AF8IBZCEn58NwP4ASADIAMpA8ACIhYgAykD8AF8IBZCEn58NwPwASADIAMpA7gCIhYgAykD6AF8IBZCEn58NwPoASADIAMpA7ACIhYgAykD4AF8IBZCEn58NwPgASADIAMpA6gCIhYgAykD2AF8IBZCEn58NwPYASADIAMpA6ACIhYgAykD0AF8IBZCEn58NwPQASADIAMpA5gCIhYgAykDyAF8IBZCEn58NwPIASADIAMpA5ACIhYgAykDwAF8IBZCEn58NwPAASADQcABahALIANBoApqIANBwAFqQdAAEDQaIANB4AdqIANBoApqEAwgA0HABmogA0HgB2oQDEECIQIDQCACQTBJIQEgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIAJBAmohAiABDQALIANBwAFqIANBwAZqIANBoApqEAogAyADKQPQAiIWIAMpA4ACfCAWQhJ+fDcDgAIgAyADKQPIAiIWIAMpA/gBfCAWQhJ+fDcD+AEgAyADKQPAAiIWIAMpA/ABfCAWQhJ+fDcD8AEgAyADKQO4AiIWIAMpA+gBfCAWQhJ+fDcD6AEgAyADKQOwAiIWIAMpA+ABfCAWQhJ+fDcD4AEgAyADKQOoAiIWIAMpA9gBfCAWQhJ+fDcD2AEgAyADKQOgAiIWIAMpA9ABfCAWQhJ+fDcD0AEgAyADKQOYAiIWIAMpA8gBfCAWQhJ+fDcDyAEgAyADKQOQAiIWIAMpA8ABfCAWQhJ+fDcDwAEgA0HAAWoQCyADQYAJaiADQcABakHQABA0GiADQcAGaiADQYAJahAMIANB4AdqIANBwAZqEAxBAiECA0AgAkHiAEkhASADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgAkECaiECIAENAAsgA0HAAWogA0HgB2ogA0GACWoQCiADIAMpA9ACIhYgAykDgAJ8IBZCEn58NwOAAiADIAMpA8gCIhYgAykD+AF8IBZCEn58NwP4ASADIAMpA8ACIhYgAykD8AF8IBZCEn58NwPwASADIAMpA7gCIhYgAykD6AF8IBZCEn58NwPoASADIAMpA7ACIhYgAykD4AF8IBZCEn58NwPgASADIAMpA6gCIhYgAykD2AF8IBZCEn58NwPYASADIAMpA6ACIhYgAykD0AF8IBZCEn58NwPQASADIAMpA5gCIhYgAykDyAF8IBZCEn58NwPIASADIAMpA5ACIhYgAykDwAF8IBZCEn58NwPAASADQcABahALIANBwAZqIANBwAFqQdAAEDQaIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDEECIQIDQCACQTBJIQEgA0HgB2ogA0HABmoQDCADQcAGaiADQeAHahAMIAJBAmohAiABDQALIANBwAFqIANBwAZqIANBoApqEAogAyADKQPQAiIWIAMpA4ACfCAWQhJ+fDcDgAIgAyADKQPIAiIWIAMpA/gBfCAWQhJ+fDcD+AEgAyADKQPAAiIWIAMpA/ABfCAWQhJ+fDcD8AEgAyADKQO4AiIWIAMpA+gBfCAWQhJ+fDcD6AEgAyADKQOwAiIWIAMpA+ABfCAWQhJ+fDcD4AEgAyADKQOoAiIWIAMpA9gBfCAWQhJ+fDcD2AEgAyADKQOgAiIWIAMpA9ABfCAWQhJ+fDcD0AEgAyADKQOYAiIWIAMpA8gBfCAWQhJ+fDcDyAEgAyADKQOQAiIWIAMpA8ABfCAWQhJ+fDcDwAEgA0HAAWoQCyADQeAHaiADQcABakHQABA0GiADQcAGaiADQeAHahAMIANB4AdqIANBwAZqEAwgA0HABmogA0HgB2oQDCADQeAHaiADQcAGahAMIANBwAZqIANB4AdqEAwgA0HAAWogA0HABmogA0GgD2oQCiADIAMpA9ACIhYgAykDgAJ8IBZCEn58NwOAAiADIAMpA8gCIhYgAykD+AF8IBZCEn58NwP4ASADIAMpA8ACIhYgAykD8AF8IBZCEn58NwPwASADIAMpA7gCIhYgAykD6AF8IBZCEn58NwPoASADIAMpA7ACIhYgAykD4AF8IBZCEn58NwPgASADIAMpA6gCIhYgAykD2AF8IBZCEn58NwPYASADIAMpA6ACIhYgAykD0AF8IBZCEn58NwPQASADIAMpA5gCIhYgAykDyAF8IBZCEn58NwPIASADIAMpA5ACIhYgAykDwAF8IBZCEn58NwPAASADQcABahALIANBoAVqIANBwAFqQdAAEDQaIANBwAFqIANBIGogA0GgBWoQCiADIAMpA9ACIhYgAykDgAJ8IBZCEn58NwOAAiADIAMpA8gCIhYgAykD+AF8IBZCEn58NwP4ASADIAMpA8ACIhYgAykD8AF8IBZCEn58NwPwASADIAMpA7gCIhYgAykD6AF8IBZCEn58NwPoASADIAMpA7ACIhYgAykD4AF8IBZCEn58NwPgASADIAMpA6gCIhYgAykD2AF8IBZCEn58NwPYASADIAMpA6ACIhYgAykD0AF8IBZCEn58NwPQASADIAMpA5gCIhYgAykDyAF8IBZCEn58NwPIASADIAMpA5ACIhYgAykDwAF8IBZCEn58NwPAASADQcABahALIANBgBNqIANBwAFqQdAAEDQaIAAgAygCyBMgAygCwBMgAygCuBMgAygCsBMgAygCqBMgAygCoBMgAygCmBMgAygCkBMgAygCiBMgAygCgBMiAkEfdSACcSIIQRp1aiIBQR91IAFxIg1BGXVqIgpBH3UgCnEiEEEadWoiC0EfdSALcSIPQRl1aiIFQR91IAVxIhFBGnVqIgRBH3UgBHEiDkEZdWoiCUEfdSAJcSISQRp1aiIGQR91IAZxIhNBGXVqIgdBH3UgB3EiFEEadWoiDEEfdSAMcSIVQRl1QRNsIAIgCEGAgIBgcWtqIgJBH3UgAnEiCEEadSABIA1BgICAcHFraiIBQR91IAFxIg1BGXUgCiAQQYCAgGBxa2oiCkEfdSAKcSIQQRp1IAsgD0GAgIBwcWtqIgtBH3UgC3EiD0EZdSAFIBFBgICAYHFraiIFQR91IAVxIhFBGnUgBCAOQYCAgHBxa2oiBEEfdSAEcSIOQRl1IAkgEkGAgIBgcWtqIglBH3UgCXEiEkEadSAGIBNBgICAcHFraiIGQR91IAZxIhNBGXUgByAUQYCAgGBxa2oiB0EfdSAHcSIUQRp1IAwgFUGAgIBwcWtqIgxBH3UgDHEiFUEZdUETbCACIAhBgICAYHFraiICIAIgAkEfdXEiAkGAgIBgcWsiCEEadSABIA1BgICAcHFrIAJBGnVqaiICQRl1IAogEEGAgIBgcWtqIgpBGnUgCyAPQYCAgHBxa2oiC0EZdSAFIBFBgICAYHFraiIFQRp1IAQgDkGAgIBwcWtqIgRBGXUgCSASQYCAgGBxa2oiCUEadSAGIBNBgICAcHFraiIGQRl1IAcgFEGAgIBgcWtqIgdBGnUgDCAVQYCAgHBxa2oiDEEZdUETbCAIQf///x9xaiIIQRp1IAJB////D3FqIgFBGXUgCkH///8fcWoiCkEadSALQf///w9xaiILQRl1IAVB////H3FqIgVBGnUgBEH///8PcWoiAkH///8PcSAKQYCAgGByIApBEHRxIgRBCHQgBHEiBEEEdCAEcSIEQQJ0IARxIgRBAXQgBHEgAUGAgIBwciABQRB0cSIEQQh0IARxIgRBBHQgBHEiBEECdCAEcSIEQQF0IARxcSALQYCAgHByIAtBEHRxIgRBCHQgBHEiBEEEdCAEcSIEQQJ0IARxIgRBAXQgBHFxIAVBgICAYHIgBUEQdHEiBEEIdCAEcSIEQQR0IARxIgRBAnQgBHEiBEEBdCAEcXEgAkGAgIBwciACQRB0cSIEQQh0IARxIgRBBHQgBHEiBEECdCAEcSIEQQF0IARxcUEfdSAMQf///w9xIAdB////H3EgBkH///8PcSAJQf///x9xIAJBGXVqIgRBGnVqIglBGXVqIgZBGnVqIgdBGXVBE2wgCEH///8fcWoiCEGTgIBgakEfdUF/c3EgBEGAgIBgciAEQRB0cSICQQh0IAJxIgJBBHQgAnEiAkECdCACcSICQQF0IAJxQR91cSAJQYCAgHByIAlBEHRxIgJBCHQgAnEiAkEEdCACcSICQQJ0IAJxIgJBAXQgAnFBH3VxIAZBgICAYHIgBkEQdHEiAkEIdCACcSICQQR0IAJxIgJBAnQgAnEiAkEBdCACcUEfdXEgB0GAgIBwciAHQRB0cSICQQh0IAJxIgJBBHQgAnEiAkECdCACcSICQQF0IAJxQR91cSINQf///w9xIgJrIgw6ABAgACAIIA1B7f//H3FrIgg6AAAgACAHQf///w9xIAJrIgdBEnY6AB8gACAHQQp2OgAeIAAgB0ECdjoAHSAAIAZB////H3EgDUH///8fcSIGayINQQx2OgAbIAAgDUEEdjoAGiAAIAlB////D3EgAmsiCUENdjoAGCAAIAlBBXY6ABcgACAEQf///x9xIAZrIgRBD3Y6ABUgACAEQQd2OgAUIAAgDEEQdjoAEiAAIAxBCHY6ABEgACAFQf///x9xIAZrIgVBEnY6AA8gACAFQQp2OgAOIAAgBUECdjoADSAAIAtB////D3EgAmsiC0ELdjoACyAAIAtBA3Y6AAogACAKQf///x9xIAZrIgpBDXY6AAggACAKQQV2OgAHIAAgAUH///8PcSACayICQQ52OgAFIAAgAkEGdjoABCAAIAhBEHY6AAIgACAIQQh2OgABIAAgB0EGdCANQRR2cjoAHCAAIA1BBHQgCUEVdnI6ABkgACAJQQN0IARBF3ZyOgAWIAAgBEEBdCAMQRh2cjoAEyAAIAVBBnQgC0ETdnI6AAwgACALQQV0IApBFXZyOgAJIAAgCkEDdCACQRZ2cjoABiAAIAJBAnQgCEEYdnI6AAMgA0GgFGokAEEAC7gDAQJ/IABBACACp2siBCAAKQMAIgIgASkDAIWncSIDIAKnc6w3AwAgASADIAEoAgBzrDcDACAAIAApAwgiAiABKQMIhacgBHEiAyACp3OsNwMIIAEgAyABKAIIc6w3AwggACAAKQMQIgIgASkDEIWnIARxIgMgAqdzrDcDECABIAMgASgCEHOsNwMQIAAgACkDGCICIAEpAxiFpyAEcSIDIAKnc6w3AxggASADIAEoAhhzrDcDGCAAIAApAyAiAiABKQMghacgBHEiAyACp3OsNwMgIAEgAyABKAIgc6w3AyAgACAAKQMoIgIgASkDKIWnIARxIgMgAqdzrDcDKCABIAMgASgCKHOsNwMoIAAgACkDMCICIAEpAzCFpyAEcSIDIAKnc6w3AzAgASADIAEoAjBzrDcDMCAAIAApAzgiAiABKQM4hacgBHEiAyACp3OsNwM4IAEgAyABKAI4c6w3AzggACAAKQNAIgIgASkDQIWnIARxIgMgAqdzrDcDQCABIAMgASgCQHOsNwNAIAAgACkDSCICIAEpA0iFpyAEcSIEIAKnc6w3A0ggASAEIAEoAkhzrDcDSAuiCgAgACACNAIAIAE0AgB+NwMAIAAgAjQCACABNAIIfiACNAIIIAE0AgB+fDcDCCAAIAI0AhAgATQCAH4gAjQCCCABKQMIQiCGQh+HfnwgAjQCACABNAIQfnw3AxAgACACNAIIIAE0AhB+IAI0AhAgATQCCH58IAI0AhggATQCAH58IAI0AgAgATQCGH58NwMYIAAgAjQCECABNAIQfiACNAIIIAE0Ahh+IAI0AhggATQCCH58QgGGfCACNAIgIAE0AgB+fCACNAIAIAE0AiB+fDcDICAAIAI0AhAgATQCGH4gAjQCGCABNAIQfnwgAjQCICABNAIIfnwgAjQCCCABNAIgfnwgAjQCKCABNAIAfnwgAjQCACABNAIofnw3AyggACACNAIgIAE0AhB+IAI0AiggATQCCH4gAjQCGCABNAIYfnwgAjQCCCABNAIofnxCAYZ8IAI0AhAgATQCIH58IAI0AjAgATQCAH58IAI0AgAgATQCMH58NwMwIAAgAjQCGCABNAIgfiACNAIgIAE0Ahh+fCACNAIoIAE0AhB+fCACNAIQIAE0Aih+fCACNAIwIAE0Agh+fCACNAIIIAE0AjB+fCACNAI4IAE0AgB+fCACNAIAIAE0Ajh+fDcDOCAAIAI0AiAgATQCIH4gAjQCGCABNAIofiACNAIoIAE0Ahh+fCACNAI4IAE0Agh+fCACNAIIIAE0Ajh+fEIBhnwgAjQCMCABNAIQfnwgAjQCECABNAIwfnwgAjQCQCABNAIAfnwgAjQCACABNAJAfnw3A0AgACACNAIgIAE0Aih+IAI0AiggATQCIH58IAI0AjAgATQCGH58IAI0AhggATQCMH58IAI0AjggATQCEH58IAI0AhAgATQCOH58IAI0AkAgATQCCH58IAI0AgggATQCQH58IAI0AkggATQCAH58IAI0AgAgATQCSH58NwNIIAAgAjQCMCABNAIgfiACNAI4IAE0Ahh+IAI0AiggATQCKH58IAI0AhggATQCOH58IAI0AkggATQCCH58IAI0AgggATQCSH58QgGGfCACNAIgIAE0AjB+fCACNAJAIAE0AhB+fCACNAIQIAE0AkB+fDcDUCAAIAI0AiggATQCMH4gAjQCMCABNAIofnwgAjQCOCABNAIgfnwgAjQCICABNAI4fnwgAjQCQCABNAIYfnwgAjQCGCABNAJAfnwgAjQCSCABNAIQfnwgAjQCECABNAJIfnw3A1ggACACNAIwIAE0AjB+IAI0AiggATQCOH4gAjQCOCABNAIofnwgAjQCSCABNAIYfnwgAjQCGCABNAJIfnxCAYZ8IAI0AkAgATQCIH58IAI0AiAgATQCQH58NwNgIAAgAjQCMCABNAI4fiACNAI4IAE0AjB+fCACNAJAIAE0Aih+fCACNAIoIAE0AkB+fCACNAJIIAE0AiB+fCACNAIgIAE0Akh+fDcDaCAAIAI0AkAgATQCMH4gAjQCSCABNAIofiACNAI4IAE0Ajh+fCACNAIoIAE0Akh+fEIBhnwgAjQCMCABNAJAfnw3A3AgACACNAI4IAE0AkB+IAI0AkAgATQCOH58IAI0AkggATQCMH58IAI0AjAgATQCSH58NwN4IAAgAjQCQCABNAJAfiACNAI4IAE0Akh+IAI0AkggATQCOH58QgGGfDcDgAEgACACNAJAIAE0Akh+IAI0AkggATQCQH58NwOIASAAIAI0AkggASkDSEIghkIfh343A5ABC4YEAQN+IABCADcDUCAAIAApAwAiASABIAFCIIinQR91QQZ2rXwiAUKAgIBgg30iAjcDACAAIAApAwggAUIah3wiASABIAFCIIinQR91QQd2rXwiAUKAgIBwg303AwggACAAKQMQIAFCGYd8IgEgASABQiCIp0EfdUEGdq18IgFCgICAYIN9NwMQIAAgACkDGCABQhqHfCIBIAEgAUIgiKdBH3VBB3atfCIBQoCAgHCDfTcDGCAAIAApAyAgAUIZh3wiASABIAFCIIinQR91QQZ2rXwiAUKAgIBgg303AyAgACAAKQMoIAFCGod8IgEgASABQiCIp0EfdUEHdq18IgFCgICAcIN9NwMoIAAgACkDMCABQhmHfCIBIAEgAUIgiKdBH3VBBnatfCIBQoCAgGCDfTcDMCAAIAApAzggAUIah3wiASABIAFCIIinQR91QQd2rXwiAUKAgIBwg303AzggACAAKQNAIAFCGYd8IgEgASABQiCIp0EfdUEGdq18IgFCgICAYIN9NwNAIAAgACkDSCABQhqHfCIBIAEgAUIgiKdBH3VBB3atfCIBQoCAgHCDfTcDSCAAKQNQIQMgAEIANwNQIAAgAiADIAFCGYd8IgF8IAFCEn58IgEgASABQiCIp0EfdUEGdq18IgFCgICAYIN9NwMAIAAgACkDCCABQhqHfDcDCAuaBgIBfxZ+IwBBoAFrIgIkACACIAEpAwBCIIYiBUIghyIDIAN+Ig43AwAgAiABKQMIQiCGIgZCIIciDSAFQh+HIgh+Ig83AwggAiABNAIQIgUgA34gDSANfnxCAYYiEDcDECACIAE0AhgiByADfiAFIA1+fEIBhiIRNwMYIAIgByAGQh6HfiAFIAV+fCABNAIgIgkgCH58IhI3AyAgAiAJIA1+IAUgB358IAEpAyhCIIYiE0IghyIIIAN+fEIBhiIUNwMoIAIgBSAJfiAHIAd+fCAIIAZCH4d+fCABNAIwIgYgA358QgGGIhU3AzAgAiAFIAh+IAcgCX58IAYgDX58IAEpAzhCIIYiFkIghyIKIAN+fEIBhiIXNwM4IAIgBiAHfiAIIAl+fCAFIAp+fCABKQNAQiCGIgRCIIciCyANfnwgASkDSEIghiIYQiCHIgwgA358QgGGNwNIIAIgDCAEQh+HfiIENwOIASACIAQgF3wgBEISfnw3AzggAiAMIBZCHod+IAsgC358IgQ3A4ABIAIgBCAVfCAEQhJ+fDcDMCACIBhCH4cgDH4iBDcDkAEgAiAJIAl+IAMgC34gBSAGfnwgCiANfiAHIAh+fEIBhnxCAYZ8IARCE358NwNAIAIgBiAMfiAKIAt+fCIDQgGGIgQ3A3ggAiAEIBR8IANCJH58NwMoIAIgBiALfiAKIAp+fCAMIBNCH4d+fCIDQgGGIgQ3A3AgAiAEIBJ8IANCJH58NwMgIAIgCCALfiAGIAp+fCAJIAx+fCIDQgGGIgQ3A2ggAiAEIBF8IANCJH58NwMYIAIgCSAKfiAGIAh+fCAHIAt+fCAFIAx+fCIDQgGGIgQ3A1ggAiAEIA98IANCJH58NwMIIAIgBiAGfiAJIAt+IAcgDH4gCCAKfnxCAYZ8QgGGfCIDNwNgIAIgAyAQfCADQhJ+fDcDECACIAYgCX4gCCAIfnwgBSALfnwgDCANfiAHIAp+fEIBhnwiBUIBhiIHNwNQIAIgByAOfCAFQiR+fDcDACACEAsgACACQdAAEDQaIAJBoAFqJAALJQAgAEIANwIAIABCADcCICAAQgA3AhggAEIANwIQIABCADcCCAssACAAQgA3AgQgAEEBNgIAIABCADcCDCAAQgA3AhQgAEIANwIcIABBADYCJAvsAQESfyACKAIAIQMgASgCACEEIAIoAgQhBSABKAIEIQYgAigCCCEHIAEoAgghCCACKAIMIQkgASgCDCEKIAIoAhAhCyABKAIQIQwgAigCFCENIAEoAhQhDiACKAIYIQ8gASgCGCEQIAIoAhwhESABKAIcIRIgAigCICETIAEoAiAhFCAAIAIoAiQgASgCJGo2AiQgACATIBRqNgIgIAAgESASajYCHCAAIA8gEGo2AhggACANIA5qNgIUIAAgCyAMajYCECAAIAkgCmo2AgwgACAHIAhqNgIIIAAgBSAGajYCBCAAIAMgBGo2AgALrwIBE38gASgCACEMIAAoAgAhAyABKAIEIQ0gACgCBCEEIAEoAgghDiAAKAIIIQUgASgCDCEPIAAoAgwhBiABKAIQIRAgACgCECEHIAEoAhQhESAAKAIUIQggASgCGCESIAAoAhghCSABKAIcIRMgACgCHCEKIAEoAiAhFCAAKAIgIQsgACAAKAIkIhUgASgCJHNBACACayIBcSAVczYCJCAAIAsgCyAUcyABcXM2AiAgACAKIAogE3MgAXFzNgIcIAAgCSAJIBJzIAFxczYCGCAAIAggCCARcyABcXM2AhQgACAHIAcgEHMgAXFzNgIQIAAgBiAGIA9zIAFxczYCDCAAIAUgBSAOcyABcXM2AgggACAEIAQgDXMgAXFzNgIEIAAgAyADIAxzIAFxczYCAAtGAQR+IAEpAgAhAiABKQIIIQMgASkCECEEIAEpAhghBSAAIAEpAiA3AiAgACAFNwIYIAAgBDcCECAAIAM3AgggACACNwIAC/QEARl+IAE1AAAhByABMQAfIQIgATEAHiENIAExAB0hDiABMQAGIQggATEABSEJIAExAAQhAyABMQAJIQ8gATEACCEQIAExAAchESABMQAMIQogATEACyELIAExAAohBCABMQAPIRIgATEADiETIAExAA0hFCABMQAcIQUgATEAGyEVIAExABohFiABMQAZIQYgATEAGCEXIAExABchGCAAIAExABVCD4YgATEAFEIHhoQgATEAFkIXhoQgATUAECIZQoCAgAh8IhpCGYh8IgwgDEKAgIAQfCIMQoCAgOAPg30+AhggACAXQg2GIBhCBYaEIAZCFYaEIgYgDEIaiHwgBkKAgIAIfCIGQoCAgPADg30+AhwgACAVQgyGIBZCBIaEIAVCFIaEIAZCGYh8IgUgBUKAgIAQfCIFQoCAgOAPg30+AiAgACATQgqGIBRCAoaEIBJCEoaEIAtCC4YgBEIDhoQgCkIThoQiCkKAgIAIfCILQhmIfCIEIARCgICAEHwiBEKAgIDgD4N9PgIQIAAgEEINhiARQgWGhCAPQhWGhCAJQg6GIANCBoaEIAhCFoaEIghCgICACHwiCUIZiHwiAyADQoCAgBB8IgNCgICA4A+DfT4CCCAAIAJCEoZCgIDwD4MgDUIKhiAOQgKGhIQiAiAFQhqIfCACQoCAgAh8IgJCgICAEIN9PgIkIAAgGSAEQhqIfCAaQoCAgPAPg30+AhQgACADQhqIIAp8IAtCgICA8ACDfT4CDCAAIAggCUKAgIDwB4N9IAcgAkIZiEITfnwiB0KAgIAQfCICQhqIfD4CBCAAIAcgAkKAgIDgD4N9PgIAC/IGAQF/IwBBwAFrIgIkACACQZABaiABEBkgAkHgAGogAkGQAWoQGSACQeAAaiACQeAAahAZIAJB4ABqIAEgAkHgAGoQFiACQZABaiACQZABaiACQeAAahAWIAJBMGogAkGQAWoQGSACQeAAaiACQeAAaiACQTBqEBYgAkEwaiACQeAAahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJB4ABqIAJBMGogAkHgAGoQFiACQTBqIAJB4ABqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqIAJB4ABqEBYgAiACQTBqEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAiACEBkgAkEwaiACIAJBMGoQFiACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQeAAaiACQTBqIAJB4ABqEBYgAkEwaiACQeAAahAZQQEhAQNAIAJBMGogAkEwahAZIAFBAWoiAUEyRw0ACyACQTBqIAJBMGogAkHgAGoQFiACIAJBMGoQGUEBIQEDQCACIAIQGSABQQFqIgFB5ABHDQALIAJBMGogAiACQTBqEBYgAkEwaiACQTBqEBlBASEBA0AgAkEwaiACQTBqEBkgAUEBaiIBQTJHDQALIAJB4ABqIAJBMGogAkHgAGoQFiACQeAAaiACQeAAahAZIAJB4ABqIAJB4ABqEBkgAkHgAGogAkHgAGoQGSACQeAAaiACQeAAahAZIAJB4ABqIAJB4ABqEBkgACACQeAAaiACQZABahAWIAJBwAFqJAALJgEBfyMAQSBrIgEkACABIAAQHCABLQAAIQAgAUEgaiQAIABBAXELJQEBfyMAQSBrIgEkACABIAAQHCABQYAIEAMhACABQSBqJAAgAAudCQIMfyd+IAAgAigCBCIDrCIXIAEoAhQiBEEBdKwiIH4gAjQCACIPIAE0AhgiEn58IAIoAggiBawiGSABNAIQIhN+fCACKAIMIgasIhwgASgCDCIHQQF0rCIhfnwgAigCECIIrCIdIAE0AggiFH58IAIoAhQiCawiIiABKAIEIgpBAXSsIiN+fCACKAIYIgusIiwgATQCACIVfnwgAigCHCIMQRNsrCIYIAEoAiQiDUEBdKwiJH58IAIoAiAiDkETbKwiECABNAIgIhZ+fCACKAIkIgJBE2ysIhEgASgCHCIBQQF0rCIlfnwgEyAXfiAPIASsIiZ+fCAZIAesIid+fCAUIBx+fCAdIAqsIih+fCAVICJ+fCALQRNsrCIaIA2sIil+fCAWIBh+fCAQIAGsIip+fCARIBJ+fCAXICF+IA8gE358IBQgGX58IBwgI358IBUgHX58IAlBE2ysIisgJH58IBYgGn58IBggJX58IBAgEn58IBEgIH58Ii5CgICAEHwiL0Iah3wiMEKAgIAIfCIxQhmHfCIeIB5CgICAEHwiH0KAgIDgD4N9PgIYIAAgFyAjfiAPIBR+fCAVIBl+fCAGQRNsrCIbICR+fCAWIAhBE2ysIh5+fCAlICt+fCASIBp+fCAYICB+fCAQIBN+fCARICF+fCAVIBd+IA8gKH58IAVBE2ysIi0gKX58IBYgG358IB4gKn58IBIgK358IBogJn58IBMgGH58IBAgJ358IBEgFH58IANBE2ysICR+IA8gFX58IBYgLX58IBsgJX58IBIgHn58ICAgK358IBMgGn58IBggIX58IBAgFH58IBEgI358Ii1CgICAEHwiMkIah3wiM0KAgIAIfCI0QhmHfCIbIBtCgICAEHwiNUKAgIDgD4N9PgIIIAAgEiAXfiAPICp+fCAZICZ+fCATIBx+fCAdICd+fCAUICJ+fCAoICx+fCAVIAysIht+fCAQICl+fCARIBZ+fCAfQhqHfCIfIB9CgICACHwiH0KAgIDwD4N9PgIcIAAgFCAXfiAPICd+fCAZICh+fCAVIBx+fCAeICl+fCAWICt+fCAaICp+fCASIBh+fCAQICZ+fCARIBN+fCA1QhqHfCIQIBBCgICACHwiEEKAgIDwD4N9PgIMIAAgFyAlfiAPIBZ+fCASIBl+fCAcICB+fCATIB1+fCAhICJ+fCAUICx+fCAbICN+fCAVIA6sIhh+fCARICR+fCAfQhmHfCIRIBFCgICAEHwiEUKAgIDgD4N9PgIgIAAgMCAxQoCAgPAPg30gLiAvQoCAgGCDfSAQQhmHfCIQQoCAgBB8IhpCGoh8PgIUIAAgECAaQoCAgOAPg30+AhAgACAWIBd+IA8gKX58IBkgKn58IBIgHH58IB0gJn58IBMgIn58ICcgLH58IBQgG358IBggKH58IBUgAqx+fCARQhqHfCIPIA9CgICACHwiD0KAgIDwD4N9PgIkIAAgMyA0QoCAgPAPg30gLSAyQoCAgGCDfSAPQhmHQhN+fCIPQoCAgBB8IhJCGoh8PgIEIAAgDyASQoCAgOAPg30+AgALqgEBCX8gASgCACECIAEoAgQhAyABKAIIIQQgASgCDCEFIAEoAhAhBiABKAIUIQcgASgCGCEIIAEoAhwhCSABKAIgIQogAEEAIAEoAiRrNgIkIABBACAKazYCICAAQQAgCWs2AhwgAEEAIAhrNgIYIABBACAHazYCFCAAQQAgBms2AhAgAEEAIAVrNgIMIABBACAEazYCCCAAQQAgA2s2AgQgAEEAIAJrNgIAC78GAQJ/IwBBkAFrIgIkACACQeAAaiABEBkgAkEwaiACQeAAahAZIAJBMGogAkEwahAZIAJBMGogASACQTBqEBYgAkHgAGogAkHgAGogAkEwahAWIAJB4ABqIAJB4ABqEBkgAkHgAGogAkEwaiACQeAAahAWIAJBMGogAkHgAGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQTBqIAJBMGoQGSACQeAAaiACQTBqIAJB4ABqEBYgAkEwaiACQeAAahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwahAZIAJBMGogAkEwaiACQeAAahAWIAIgAkEwahAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAIgAhAZIAJBMGogAiACQTBqEBYgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkEwaiACQTBqEBkgAkHgAGogAkEwaiACQeAAahAWIAJBMGogAkHgAGoQGUEBIQMDQCACQTBqIAJBMGoQGSADQQFqIgNBMkcNAAsgAkEwaiACQTBqIAJB4ABqEBYgAiACQTBqEBlBASEDA0AgAiACEBkgA0EBaiIDQeQARw0ACyACQTBqIAIgAkEwahAWIAJBMGogAkEwahAZQQEhAwNAIAJBMGogAkEwahAZIANBAWoiA0EyRw0ACyACQeAAaiACQTBqIAJB4ABqEBYgAkHgAGogAkHgAGoQGSACQeAAaiACQeAAahAZIAAgAkHgAGogARAWIAJBkAFqJAALywYCB38bfiAAIAEoAgwiAkEBdKwiDiACrCIafiABKAIQIgWsIg0gASgCCCIGQQF0rCISfnwgASgCFCICQQF0rCIPIAEoAgQiB0EBdKwiCX58IAEoAhgiBKwiECABKAIAIghBAXSsIgx+fCABKAIgIgNBE2ysIgogA6wiF358IAEoAiQiA0EmbKwiCyABKAIcIgFBAXSsIht+fCAJIA1+IBIgGn58IAKsIhggDH58IAogG358IAsgEH58IAkgDn4gBqwiFSAVfnwgDCANfnwgAUEmbKwiFiABrCIcfnwgCiAEQQF0rH58IAsgD358Ih5CgICAEHwiH0Iah3wiIEKAgIAIfCIhQhmHfCIRIBFCgICAEHwiE0KAgIDgD4N9PgIYIAAgDCAVfiAJIAesIhR+fCAEQRNsrCIRIBB+fCAPIBZ+fCAKIAVBAXSsIh1+fCALIA5+fCAPIBF+IAwgFH58IA0gFn58IAogDn58IAsgFX58IAJBJmysIBh+IAisIhQgFH58IBEgHX58IA4gFn58IAogEn58IAkgC358IhFCgICAEHwiFEIah3wiIkKAgIAIfCIjQhmHfCIZIBlCgICAEHwiGUKAgIDgD4N9PgIIIAAgEiAYfiANIA5+fCAJIBB+fCAMIBx+fCALIBd+fCATQhqHfCITIBNCgICACHwiE0KAgIDwD4N9PgIcIAAgDCAafiAJIBV+fCAQIBZ+fCAKIA9+fCALIA1+fCAZQhqHfCIKIApCgICACHwiCkKAgIDwD4N9PgIMIAAgECASfiANIA1+fCAOIA9+fCAJIBt+fCAMIBd+fCALIAOsIg1+fCATQhmHfCILIAtCgICAEHwiC0KAgIDgD4N9PgIgIAAgICAhQoCAgPAPg30gHiAfQoCAgGCDfSAKQhmHfCIKQoCAgBB8Ig9CGoh8PgIUIAAgCiAPQoCAgOAPg30+AhAgACAOIBB+IBggHX58IBIgHH58IAkgF358IAwgDX58IAtCGod8IgkgCUKAgIAIfCIJQoCAgPAPg30+AiQgACAiICNCgICA8A+DfSARIBRCgICAYIN9IAlCGYdCE358IglCgICAEHwiDEIaiHw+AgQgACAJIAxCgICA4A+DfT4CAAvpBgIJfxx+IAAgASgCDCIEQQF0rCIRIAEoAgQiBUEBdKwiC34gASgCCCIGrCIWIBZ+fCABKAIQIgesIhAgASgCACIIQQF0rCIOfnwgASgCHCICQSZsrCIXIAKsIhp+fCABKAIgIglBE2ysIgwgASgCGCIDQQF0rH58IAEoAiQiCkEmbKwiDSABKAIUIgFBAXSsIhJ+fEIBhiIeQoCAgBB8Ih9CGocgCyAQfiAGQQF0rCIUIASsIht+fCABrCIYIA5+fCAMIAJBAXSsIhx+fCANIAOsIhN+fEIBhnwiIEKAgIAIfCIhQhmHIBEgG34gECAUfnwgCyASfnwgDiATfnwgDCAJrCIZfnwgDSAcfnxCAYZ8Ig8gD0KAgIAQfCIVQoCAgOAPg30+AhggACABQSZsrCAYfiAIrCIPIA9+fCADQRNsrCIPIAdBAXSsIh1+fCARIBd+fCAMIBR+fCALIA1+fEIBhiIiQoCAgBB8IiNCGocgDyASfiAOIAWsIiR+fCAQIBd+fCAMIBF+fCANIBZ+fEIBhnwiJUKAgIAIfCImQhmHIA4gFn4gCyAkfnwgDyATfnwgEiAXfnwgDCAdfnwgDSARfnxCAYZ8Ig8gD0KAgIAQfCIPQoCAgOAPg30+AgggACAUIBh+IBAgEX58IAsgE358IA4gGn58IA0gGX58QgGGIBVCGod8IhUgFUKAgIAIfCIVQoCAgPAPg30+AhwgACAOIBt+IAsgFn58IBMgF358IAwgEn58IA0gEH58QgGGIA9CGod8IgwgDEKAgIAIfCIMQoCAgPAPg30+AgwgACATIBR+IBAgEH58IBEgEn58IAsgHH58IA4gGX58IA0gCqwiEH58QgGGIBVCGYd8Ig0gDUKAgIAQfCINQoCAgOAPg30+AiAgACAgICFCgICA8A+DfSAeIB9CgICAYIN9IAxCGYd8IgxCgICAEHwiEkIaiHw+AhQgACAMIBJCgICA4A+DfT4CECAAIBEgE34gGCAdfnwgFCAafnwgCyAZfnwgDiAQfnxCAYYgDUIah3wiCyALQoCAgAh8IgtCgICA8A+DfT4CJCAAICUgJkKAgIDwD4N9ICIgI0KAgIBgg30gC0IZh0ITfnwiC0KAgIAQfCIOQhqIfD4CBCAAIAsgDkKAgIDgD4N9PgIAC+wBARJ/IAIoAgAhAyABKAIAIQQgAigCBCEFIAEoAgQhBiACKAIIIQcgASgCCCEIIAIoAgwhCSABKAIMIQogAigCECELIAEoAhAhDCACKAIUIQ0gASgCFCEOIAIoAhghDyABKAIYIRAgAigCHCERIAEoAhwhEiACKAIgIRMgASgCICEUIAAgASgCJCACKAIkazYCJCAAIBQgE2s2AiAgACASIBFrNgIcIAAgECAPazYCGCAAIA4gDWs2AhQgACAMIAtrNgIQIAAgCiAJazYCDCAAIAggB2s2AgggACAGIAVrNgIEIAAgBCADazYCAAv2BAEKfyAAIAEoAiAiBiABKAIcIgcgASgCGCIIIAEoAhQiCSABKAIQIgogASgCDCILIAEoAggiBCABKAIEIgMgASgCACICIAEoAiQiBUETbEGAgIAIakEZdWpBGnVqQRl1akEadWpBGXVqQRp1akEZdWpBGnVqQRl1akEadSAFakEZdUETbCACaiIBOgAAIAAgAUEQdjoAAiAAIAFBCHY6AAEgACADIAFBGnVqIgJBDnY6AAUgACACQQZ2OgAEIAAgBCACQRl1aiIDQQ12OgAIIAAgA0EFdjoAByAAIAFBGHZBA3EgAkH///8PcSIEQQJ0cjoAAyAAIAsgA0EadWoiAkELdjoACyAAIAJBA3Y6AAogACADQf///x9xIgNBA3QgBEEWdnI6AAYgACAKIAJBGXVqIgFBEnY6AA8gACABQQp2OgAOIAAgAUECdjoADSAAIAJB////D3EiBEEFdCADQRV2cjoACSAAIAkgAUEadWoiAjoAECAAIAFBBnQgBEETdnI6AAwgACACQRB2OgASIAAgAkEIdjoAESAAIAggAkEZdWoiAUEPdjoAFSAAIAFBB3Y6ABQgACAHIAFBGnVqIgNBDXY6ABggACADQQV2OgAXIAAgAkEYdkEBcSABQf///x9xIgRBAXRyOgATIAAgBiADQRl1aiIBQQx2OgAbIAAgAUEEdjoAGiAAIANB////D3EiA0EDdCAEQRd2cjoAFiAAIAUgAUEadWoiAkEKdjoAHiAAIAJBAnY6AB0gACABQf///x9xIgFBBHQgA0EVdnI6ABkgACACQf///w9xIgJBEnY6AB8gACACQQZ0IAFBFHZyOgAcC5UBAQR/IwBBMGsiBSQAIAAgAUEoaiIDIAEQDyAAQShqIgQgAyABEBsgAEHQAGoiAyAAIAIQFiAEIAQgAkEoahAWIABB+ABqIgYgAkH4AGogAUH4AGoQFiAAIAFB0ABqIAJB0ABqEBYgBSAAIAAQDyAAIAMgBBAbIAQgAyAEEA8gAyAFIAYQDyAGIAUgBhAbIAVBMGokAAucCgEKfyMAQeARayIEJAADQCAEQeAPaiAFaiABIAVBA3ZqLQAAIAVBB3F2QQFxOgAAIAVBAWoiBUGAAkcNAAsDQCAHIgZBAWohBwJAIAYgBEHgD2pqIggtAABFDQAgBkH+AUsNAEEBIQFB/gEgBmsiBUEFIAVBBUkbQQFqIQogByEFA0AgASEJAkAgBEHgD2ogBWoiCywAACIBRQ0AIAEgCXQiASAILAAAIgxqIg1BD0wEQCAIIA06AAAgC0EAOgAADAELIAwgAWsiAUFxSA0CIAggAToAAANAIARB4A9qIAVqIgEtAABFBEAgAUEBOgAADAILIAFBADoAACAFQf8BSSEBIAVBAWohBSABDQALCyAJQQFqIgEgBmohBSAJIApHDQALCyAHQYACRw0AC0EAIQUDQCAEQeANaiAFaiADIAVBA3ZqLQAAIAVBB3F2QQFxOgAAIAVBAWoiBUGAAkcNAAtBACEHA0AgByIGQQFqIQcCQCAGIARB4A1qaiIILQAARQ0AIAZB/gFLDQBBASEBQf4BIAZrIgVBBSAFQQVJG0EBaiEKIAchBQNAIAEhCQJAIARB4A1qIAVqIgssAAAiAUUNACABIAl0IgEgCCwAACIMaiINQQ9MBEAgCCANOgAAIAtBADoAAAwBCyAMIAFrIgFBcUgNAiAIIAE6AAADQCAEQeANaiAFaiIBLQAARQRAIAFBAToAAAwCCyABQQA6AAAgBUH/AUkhASAFQQFqIQUgAQ0ACwsgCUEBaiIBIAZqIQUgCSAKRw0ACwsgB0GAAkcNAAsgBEHgA2ogAhAmIARBwAJqIAIQJSAEIARBwAJqECMgBEHAAmogBCAEQeADahAdIARBoAFqIARBwAJqECMgBEGABWoiBSAEQaABahAmIARBwAJqIAQgBRAdIARBoAFqIARBwAJqECMgBEGgBmoiBSAEQaABahAmIARBwAJqIAQgBRAdIARBoAFqIARBwAJqECMgBEHAB2oiBSAEQaABahAmIARBwAJqIAQgBRAdIARBoAFqIARBwAJqECMgBEHgCGoiBSAEQaABahAmIARBwAJqIAQgBRAdIARBoAFqIARBwAJqECMgBEGACmoiBSAEQaABahAmIARBwAJqIAQgBRAdIARBoAFqIARBwAJqECMgBEGgC2oiBSAEQaABahAmIARBwAJqIAQgBRAdIARBoAFqIARBwAJqECMgBEHADGogBEGgAWoQJiAAEA0gAEEoahAOIABB0ABqEA5B/wEhAQJAA0ACQCABIgUgBEHgD2pqLQAADQAgBEHgDWogBWotAAANACAFQX9qIQEgBQ0BDAILCyAFQQBIDQADQCAEQcACaiAAECQCQCAFIgEgBEHgD2pqLAAAIgVBAU4EQCAEQaABaiAEQcACahAjIARBwAJqIARBoAFqIARB4ANqIAVB/gFxQQF2QaABbGoQHQwBCyAFQX9KDQAgBEGgAWogBEHAAmoQIyAEQcACaiAEQaABaiAEQeADakEAIAVrQf4BcUEBdkGgAWxqECsLAkAgBEHgDWogAWosAAAiBUEBTgRAIARBoAFqIARBwAJqECMgBEHAAmogBEGgAWogBUH+AXFBAXZB+ABsQfAOahAgDAELIAVBf0oNACAEQaABaiAEQcACahAjIARBwAJqIARBoAFqQQAgBWtB/gFxQQF2QfgAbEHwDmoQIQsgACAEQcACahAiIAFBf2ohBSABQQBKDQALCyAEQeARaiQAC8UCAQN/IwBB8AFrIgIkACAAQShqIgQgARASIABB0ABqIgMQDiACQcABaiAEEBkgAkGQAWogAkHAAWpBoAgQFiACQcABaiACQcABaiADEBsgAkGQAWogAkGQAWogAxAPIAJB4ABqIAJBkAFqEBkgAkHgAGogAkHgAGogAkGQAWoQFiAAIAJB4ABqEBkgACAAIAJBkAFqEBYgACAAIAJBwAFqEBYgACAAEBggACAAIAJB4ABqEBYgACAAIAJBwAFqEBYgAkEwaiAAEBkgAkEwaiACQTBqIAJBkAFqEBYgAiACQTBqIAJBwAFqEBsCfyACEBUEQCACIAJBMGogAkHAAWoQD0F/IAIQFQ0BGiAAIABB0AgQFgsgABAUIAEtAB9BB3ZGBEAgACAAEBcLIABB+ABqIAAgBBAWQQALIQMgAkHwAWokACADC4sBAQR/IwBBMGsiBSQAIAAgAUEoaiIDIAEQDyAAQShqIgQgAyABEBsgAEHQAGoiAyAAIAIQFiAEIAQgAkEoahAWIABB+ABqIgYgAkHQAGogAUH4AGoQFiAFIAFB0ABqIgEgARAPIAAgAyAEEBsgBCADIAQQDyADIAUgBhAPIAYgBSAGEBsgBUEwaiQAC4sBAQR/IwBBMGsiBSQAIAAgAUEoaiIDIAEQDyAAQShqIgQgAyABEBsgAEHQAGoiAyAAIAJBKGoQFiAEIAQgAhAWIABB+ABqIgYgAkHQAGogAUH4AGoQFiAFIAFB0ABqIgEgARAPIAAgAyAEEBsgBCADIAQQDyADIAUgBhAbIAYgBSAGEA8gBUEwaiQACzIBAX8gACABIAFB+ABqIgIQFiAAQShqIAFBKGogAUHQAGoiARAWIABB0ABqIAEgAhAWC0ABA38gACABIAFB+ABqIgIQFiAAQShqIAFBKGoiAyABQdAAaiIEEBYgAEHQAGogBCACEBYgAEH4AGogASADEBYLbgEFfyMAQTBrIgMkACAAIAEQGSAAQdAAaiICIAFBKGoiBhAZIABB+ABqIgUgAUHQAGoQGiAAQShqIgQgASAGEA8gAyAEEBkgBCACIAAQDyACIAIgABAbIAAgAyAEEBsgBSAFIAIQGyADQTBqJAALKAEBfyMAQYABayICJAAgAkEIaiABECcgACACQQhqECQgAkGAAWokAAs7AQF/IAAgAUEoaiICIAEQDyAAQShqIAIgARAbIABB0ABqIAFB0ABqEBEgAEH4AGogAUH4AGpBgAkQFgsiACAAIAEQESAAQShqIAFBKGoQESAAQdAAaiABQdAAahARC10BAX8jAEGQAWsiAiQAIAJB4ABqIAFB0ABqEBMgAkEwaiABIAJB4ABqEBYgAiABQShqIAJB4ABqEBYgACACEBwgACACQTBqEBRBB3QgAC0AH3M6AB8gAkGQAWokAAu4AwEFfyMAQdADayICJAADQCADQQF0IgUgAkGQA2pqIAEgA2otAAAiBkEPcToAACACQZADaiAFQQFyaiAGQQR2OgAAIANBAWoiA0EgRw0AC0EAIQMDQCACQZADaiAEaiIFIAUtAAAgA2oiAyADQRh0QYCAgEBrIgNBGHVB8AFxazoAACADQRx1IQMgBEEBaiIEQT9HDQALIAIgAi0AzwMgA2o6AM8DIAAQDSAAQShqEA4gAEHQAGoQDiAAQfgAahANQQEhAwNAIAIgA0EBdiACQZADaiADaiwAABAqIAJB8AFqIAAgAhAgIAAgAkHwAWoQIyADQT5JIQQgA0ECaiEDIAQNAAsgAkHwAWogABAlIAJB+ABqIAJB8AFqECIgAkHwAWogAkH4AGoQJCACQfgAaiACQfABahAiIAJB8AFqIAJB+ABqECQgAkH4AGogAkHwAWoQIiACQfABaiACQfgAahAkIAAgAkHwAWoQI0EAIQMDQCACIANBAXYgAkGQA2ogA2osAAAQKiACQfABaiAAIAIQICAAIAJB8AFqECMgA0E+SSEEIANBAmohAyAEDQALIAJB0ANqJAALpAQBBX8jAEGAAWsiByQAIAAQDiAAQShqEA4gAEHQAGoQDSAAIAFBwAdsIgFBsBZqIAIgAkEHdSACcUEBdGsiBEEBc0H/AXFBf2pBH3YiAxAQIABBKGoiBSABQdgWaiADEBAgAEHQAGoiBiABQYAXaiADEBAgACABQagXaiAEQQJzQf8BcUF/akEfdiIDEBAgBSABQdAXaiADEBAgBiABQfgXaiADEBAgACABQaAYaiAEQQNzQf8BcUF/akEfdiIDEBAgBSABQcgYaiADEBAgBiABQfAYaiADEBAgACABQZgZaiAEQQRzQf8BcUF/akEfdiIDEBAgBSABQcAZaiADEBAgBiABQegZaiADEBAgACABQZAaaiAEQQVzQf8BcUF/akEfdiIDEBAgBSABQbgaaiADEBAgBiABQeAaaiADEBAgACABQYgbaiAEQQZzQf8BcUF/akEfdiIDEBAgBSABQbAbaiADEBAgBiABQdgbaiADEBAgACABQYAcaiAEQQdzQf8BcUF/akEfdiIDEBAgBSABQagcaiADEBAgBiABQdAcaiADEBAgACABQfgcaiAEQQhzQf8BcUF/akEfdiIEEBAgBSABQaAdaiAEEBAgBiABQcgdaiAEEBAgB0EIaiAFEBEgB0EwaiIEIAAQESAHQdgAaiIDIAYQFyAAIAdBCGogAkGAAXFBB3YiARAQIAUgBCABEBAgBiADIAEQECAHQYABaiQAC5UBAQR/IwBBMGsiBSQAIAAgAUEoaiIDIAEQDyAAQShqIgQgAyABEBsgAEHQAGoiAyAAIAJBKGoQFiAEIAQgAhAWIABB+ABqIgYgAkH4AGogAUH4AGoQFiAAIAFB0ABqIAJB0ABqEBYgBSAAIAAQDyAAIAMgBBAbIAQgAyAEEA8gAyAFIAYQGyAGIAUgBhAPIAVBMGokAAu1AwEDfyMAQeADayIFJAACfwJAIANCwABUDQAgAi0AP0EfSw0AIAVBgAFqIAQQHw0AIAVB2ANqIgYgBCkAGDcDACAFQdADaiIHIAQpABA3AwAgBSAEKQAANwPAAyAFIAQpAAg3A8gDIAUgAikAEDcDsAMgBSACKQAYNwO4AyAFIAIpAAA3A6ADIAUgAikACDcDqAMgBSACKQAwNwOQAyAFIAIpADg3A5gDIAUgAikAIDcDgAMgBSACKQAoNwOIAyAAIAIgA6ciBBA2IgIgBikDADcAOCACIAcpAwA3ADAgAiAFKQPIAzcAKCACIAUpA8ADNwAgIAVBwAJqIAIgAxAGIAVBwAJqEC4gBUEIaiAFQcACaiAFQYABaiAFQYADahAeIAVBoAJqIAVBCGoQKCAFQaACaiAFQaADahADDQAgAiACQUBrIANCQHwiA6cQNiAEakFAaiICQgA3ADggAkIANwAwIAJCADcAKCACQgA3ACAgAkIANwAYIAJCADcAECACQgA3AAggAkIANwAAIAEgAzcDAEEADAELIAFCfzcDACAAIAOnEDVBfwshAiAFQeADaiQAIAILmSMBOH4gACACMQAXIgQgAjEAGEIIhoQgAjEAGUIQhoQgAjEAGiIIQhiGhEIFiEL///8AgyIGIAExABoiCiABMQAbQgiGhCABMQAcIgdCEIaEQgKIQv///wCDIgV+IAIzABUgBEIQhkKAgPwAg4QiBCABMQAdQgiGIAeEIAExAB5CEIaEIAExAB9CGIaEQgeIIgd+fCACMQAbQgiGIAiEIAIxABwiCUIQhoRCAohC////AIMiCCABMQAXIgsgATEAGEIIhoQgATEAGUIQhoQgCkIYhoRCBYhC////AIMiCn58IAIxAB1CCIYgCYQgAjEAHkIQhoQgAjEAH0IYhoRCB4giCSABMwAVIAtCEIZCgID8AIOEIgt+fCAEIAV+IAIxABIiDCACMQATQgiGhCACMQAUQhCGhEIDiCIRIAd+fCAGIAp+fCAIIAt+fCAJIAExABIiDyABMQATQgiGhCABMQAUQhCGhEIDiCISfnwiF0KAgEB9IhNCFYd8Ig1CgIBAfSIQQhWHIAUgCH4gBiAHfnwgCSAKfnwiDiAOQoCAQH0iDkKAgID///////8Ag318IiFCmNocfiAFIAl+IAcgCH58IA5CFYh8Ig4gDkKAgEB9Ih9CgICA////////AIN9IiJCk9gofnwgDSAQQoCAgH+DfSIjQuf2J358IBcgE0KAgIB/g30gBSARfiACMQAPIg0gAjEAEEIIhoQgAjEAEUIQhoQgDEIYhoRCBohC////AIMiDCAHfnwgBCAKfnwgBiALfnwgCCASfnwgCSABMQAPIhAgATEAEEIIhoQgATEAEUIQhoQgD0IYhoRCBohC////AIMiD358IAUgDH4gAjEADSIUIAIxAA5CCIaEIA1CEIaEQgGIQv///wCDIg0gB358IAogEX58IAQgC358IAYgEn58IAggD358IAkgATEADSIYIAExAA5CCIaEIBBCEIaEQgGIQv///wCDIhB+fCIgQoCAQH0iHUIVh3wiGUKAgEB9IipCFYd8IiRC04xDfnwgAjEAAiITIAIxAANCCIaEIAIxAARCEIaEIAIxAAUiDkIYhoRCBYhC////AIMiFyALfiACMwAAIBNCEIZCgID8AIOEIhMgCn58IAIxAAZCCIYgDoQgAjEAByIVQhCGhEICiEL///8AgyIOIBJ+fCACMQAIQgiGIBWEIAIxAAlCEIaEIAIxAAoiFkIYhoRCB4hC////AIMiFSAPfnwgAjEAC0IIhiAWhCACMQAMQhCGhCAUQhiGhEIEiEL///8AgyIUIBB+fCANIAExAAoiFiABMQALQgiGhCABMQAMQhCGhCAYQhiGhEIEiEL///8AgyIYfnwgDCABMQAHIhogATEACEIIhoQgATEACUIQhoQgFkIYhoRCB4hC////AIMiFn58IBEgATEABSIbIAExAAZCCIaEIBpCEIaEQgKIQv///wCDIhp+fCAEIAExAAIiHCABMQADQgiGhCABMQAEQhCGhCAbQhiGhEIFiEL///8AgyIbfnwgBiABMwAAIBxCEIZCgID8AIOEIhx+fCADMQAXIh4gAzEAGEIIhoQgAzEAGUIQhoQgAzEAGiIrQhiGhEIFiEL///8Ag3wgEiAXfiALIBN+fCAOIA9+fCAQIBV+fCAUIBh+fCANIBZ+fCAMIBp+fCARIBt+fCAEIBx+fCADMwAVIB5CEIZCgID8AIOEfCIeQoCAQH0iJUIVh3wiJnwgJkKAgEB9IiZCgICAf4N9ICNCmNocfiAhQpPYKH58ICRC5/YnfnwgDyAXfiASIBN+fCAOIBB+fCAVIBh+fCAUIBZ+fCANIBp+fCAMIBt+fCARIBx+fCADMQASIicgAzEAE0IIhoQgAzEAFEIQhoRCA4h8IBAgF34gDyATfnwgDiAYfnwgFSAWfnwgFCAafnwgDSAbfnwgDCAcfnwgAzEADyIsIAMxABBCCIaEIAMxABFCEIaEICdCGIaEQgaIQv///wCDfCInQoCAQH0iLUIVh3wiKEKAgEB9Ii5CFYd8IB58ICVCgICAf4N9IiVCgIBAfSIvQhWHfCIwQoCAQH0iMUIVhyAZICpCgICAf4N9ICAgByAJfiIpQoCAQH0iMkIViCIeQoOhVn58IB1CgICAf4N9IAUgDX4gByAUfnwgCiAMfnwgCyARfnwgBCASfnwgBiAPfnwgCCAQfnwgCSAYfnwgBSAUfiAHIBV+fCAKIA1+fCALIAx+fCARIBJ+fCAEIA9+fCAGIBB+fCAIIBh+fCAJIBZ+fCIdQoCAQH0iM0IVh3wiNEKAgEB9IjVCFYd8IjZCgIBAfSI3QhWHfCIgQoOhVn58IAogF34gBSATfnwgCyAOfnwgEiAVfnwgDyAUfnwgDSAQfnwgDCAYfnwgESAWfnwgBCAafnwgBiAbfnwgCCAcfnwgAzEAG0IIhiArhCADMQAcIipCEIaEQgKIQv///wCDfCIZICJCmNocfiApIDJCgICA////////AIN9IB9CFYh8Ih9Ck9gofnwgIULn9id+fCAjQtOMQ358ICRC0asIfnwgJkIVh3x8IBlCgIBAfSIrQoCAgH+DfSIZfCAZQoCAQH0iJkKAgIB/g30iKSA2IDdCgICAf4N9IB9Cg6FWfiAeQtGrCH58IDR8IDVCgICAf4N9IB0gHkLTjEN+fCAfQtGrCH58ICJCg6FWfnwgM0KAgIB/g30gBSAVfiAHIA5+fCAKIBR+fCALIA1+fCAMIBJ+fCAPIBF+fCAEIBB+fCAGIBh+fCAIIBZ+fCAJIBp+fCAFIA5+IAcgF358IAogFX58IAsgFH58IA0gEn58IAwgD358IBAgEX58IAQgGH58IAYgFn58IAggGn58IAkgG358IjJCgIBAfSIzQhWHfCI0QoCAQH0iNUIVh3wiOUKAgEB9IjpCFYd8IhlCgIBAfSI4QhWHfCIdQoOhVn4gIELRqwh+fCAwfCAxQoCAgH+DfSAdQtGrCH4gIELTjEN+fCAZIDhCgICAf4N9IhlCg6FWfnwgJEKY2hx+ICNCk9gofnwgKHwgLkKAgIB/g30gJEKT2Ch+IBcgGH4gECATfnwgDiAWfnwgFSAafnwgFCAbfnwgDSAcfnwgAzEADSIoIAMxAA5CCIaEICxCEIaEQgGIQv///wCDfCAWIBd+IBMgGH58IA4gGn58IBUgG358IBQgHH58IAMxAAoiLCADMQALQgiGhCADMQAMQhCGhCAoQhiGhEIEiEL///8Ag3wiKEKAgEB9Ii5CFYd8IjBCgIBAfSIxQhWHfCAnfCAtQoCAgH+DfSInQoCAQH0iLUIVh3wiNkKAgEB9IjdCFYd8ICV8IC9CgICAf4N9IiVCgIBAfSIvQhWHfCI4QoCAQH0iO0IVh3wgKUKAgEB9IilCgICAf4N9IDggO0KAgIB/g30gJSAvQoCAgH+DfSAdQtOMQ34gIELn9id+fCAZQtGrCH58IDZ8IDdCgICAf4N9IDkgOkKAgIB/g30gH0LTjEN+IB5C5/YnfnwgIkLRqwh+fCAhQoOhVn58IDR8IDVCgICAf4N9IB9C5/YnfiAeQpjaHH58ICJC04xDfnwgMnwgIULRqwh+fCAjQoOhVn58IDNCgICAf4N9IAUgF34gByATfnwgCiAOfnwgCyAVfnwgEiAUfnwgDSAPfnwgDCAQfnwgESAYfnwgBCAWfnwgBiAafnwgCCAbfnwgCSAcfnwgAzEAHUIIhiAqhCADMQAeQhCGhCADMQAfQhiGhEIHiHwgK0IVh3wiBEKAgEB9IgdCFYd8IghCgIBAfSIKQhWHfCIFQoCAQH0iCUIVh3wiBkKDoVZ+fCAdQuf2J34gIEKY2hx+fCAZQtOMQ358ICd8IC1CgICAf4N9IAZC0asIfnwgBSAJQoCAgH+DfSIFQoOhVn58IglCgIBAfSILQhWHfCIRQoCAQH0iEkIVh3wgESASQoCAgH+DfSAJIAtCgICAf4N9IB1CmNocfiAgQpPYKH58IBlC5/YnfnwgMHwgMUKAgIB/g30gCCAKQoCAgH+DfSAfQpjaHH4gHkKT2Ch+fCAiQuf2J358ICFC04xDfnwgI0LRqwh+fCAkQoOhVn58IAR8IAdCgICAf4N9ICZCFYd8IgdCgIBAfSIJQhWHfCIEQoOhVn58IAZC04xDfnwgBULRqwh+fCAoIBcgGn4gEyAWfnwgDiAbfnwgFSAcfnwgAzEAByIIIAMxAAhCCIaEIAMxAAlCEIaEICxCGIaEQgeIQv///wCDfCAXIBt+IBMgGn58IA4gHH58IAMxAAUiCiADMQAGQgiGhCAIQhCGhEICiEL///8Ag3wiCEKAgEB9IgtCFYh8IgxCgIBAfSIPQhWHfCAuQoCAgH+DfSAdQpPYKH58IBlCmNocfnwgBELRqwh+fCAGQuf2J358IAVC04xDfnwiDUKAgEB9IhBCFYd8Ig5CgIBAfSIVQhWHfCAOIAcgCUKAgIB/g30gKUIVh3wiCUKAgEB9IhRCFYciB0KDoVZ+fCAVQoCAgH+DfSANIAdC0asIfnwgEEKAgIB/g30gDCAPQoCAgH+DfSAZQpPYKH58IARC04xDfnwgBkKY2hx+fCAFQuf2J358IAggFyAcfiATIBt+fCATIBx+IAMzAAAgAzEAAiIMQhCGQoCA/ACDhHwiD0KAgEB9Ig1CFYh8IAMxAANCCIYgDIQgAzEABEIQhoQgCkIYhoRCBYhC////AIN8IgpCgIBAfSIMQhWIfCALQoCAgH+DfSAEQuf2J358IAZCk9gofnwgBUKY2hx+fCIGQoCAQH0iCEIVh3wiC0KAgEB9IhBCFYd8IAsgB0LTjEN+fCAQQoCAgH+DfSAGIAdC5/YnfnwgCEKAgIB/g30gCiAMQoCAgH+DfSAEQpjaHH58IAVCk9gofnwgDyANQoCAgP///wODfSAEQpPYKH58IgZCgIBAfSIFQhWHfCIEQoCAQH0iCEIVh3wgBCAHQpjaHH58IAhCgICAf4N9IAYgBUKAgIB/g30gB0KT2Ch+fCIFQhWHfCIEQhWHfCIHQhWHfCIIQhWHfCIKQhWHfCILQhWHfCIMQhWHfCIRQhWHfCISQhWHfCIPQhWHfCINQhWHIAkgFEKAgIB/g318IglCFYciBkKT2Ch+IAVC////AIN8IgU8AAAgACAFQgiIPAABIAAgBkKY2hx+IARC////AIN8IAVCFYd8IgRCC4g8AAQgACAEQgOIPAADIAAgBkLn9id+IAdC////AIN8IARCFYd8IgdCBog8AAYgACAFQhCIQh+DIARC////AIMiBEIFhoQ8AAIgACAGQtOMQ34gCEL///8Ag3wgB0IVh3wiBUIJiDwACSAAIAVCAYg8AAggACAHQv///wCDIgdCAoYgBEITiIQ8AAUgACAGQtGrCH4gCkL///8Ag3wgBUIVh3wiBEIMiDwADCAAIARCBIg8AAsgACAFQv///wCDIghCB4YgB0IOiIQ8AAcgACAGQoOhVn4gC0L///8Ag3wgBEIVh3wiBUIHiDwADiAAIARC////AIMiBEIEhiAIQhGIhDwACiAAIAxC////AIMgBUIVh3wiBkIKiDwAESAAIAZCAog8ABAgACAFQv///wCDIgdCAYYgBEIUiIQ8AA0gACARQv///wCDIAZCFYd8IgVCDYg8ABQgACAFQgWIPAATIAAgBkL///8AgyIEQgaGIAdCD4iEPAAPIAAgEkL///8AgyAFQhWHfCIGPAAVIAAgBUIDhiAEQhKIhDwAEiAAIAZCCIg8ABYgACAPQv///wCDIAZCFYd8IgVCC4g8ABkgACAFQgOIPAAYIAAgDUL///8AgyAFQhWHfCIEQgaIPAAbIAAgBkIQiEIfgyAFQv///wCDIgVCBYaEPAAXIAAgCUL///8AgyAEQhWHfCIGQhGIPAAfIAAgBkIJiDwAHiAAIAZCAYg8AB0gACAEQv///wCDIgRCAoYgBUITiIQ8ABogACAGQgeGIARCDoiEPAAcC6AVARh+IAAgADEALyIHIAAxADBCCIaEIAAxADEiAUIQhoRCAohC////AIMiAkLRqwh+IAAxABoiCCAAMQAbQgiGhCAAMQAcIg5CEIaEQgKIQv///wCDfCAAMQAyQgiGIAGEIAAxADNCEIaEIAAxADQiA0IYhoRCB4hC////AIMiAULTjEN+fCAAMQA1QgiGIAOEIAAxADZCEIaEIAAxADciBEIYhoRCBIhC////AIMiA0Ln9id+fCAAMQA4QgiGIASEIAAxADkiBUIQhoRCAYhC////AIMiBEKY2hx+fCAAMQA6QgiGIAWEIAAxADtCEIaEIAAxADwiBkIYhoRCBohC////AIMiBUKT2Ch+fCIKIAJC04xDfiAAMQAXIgkgADEAGEIIhoQgADEAGUIQhoQgCEIYhoRCBYhC////AIN8IAFC5/YnfnwgA0KY2hx+fCAEQpPYKH58IAJC5/YnfiAAMwAVIAlCEIZCgID8AIOEfCABQpjaHH58IANCk9gofnwiCUKAgEB9IgtCFYh8Ig1CgIBAfSIMQhWHfCAKQoCAQH0iF0KAgIB/g30gADEAPUIIhiAGhCAAMQA+QhCGhCAAMQA/QhiGhEIDiCIIQoOhVn4gADMAKiAAMQAsIgZCEIZCgID8AIOEfCIKQoCAQH0iD0IVhyAAMQAtQgiGIAaEIAAxAC5CEIaEIAdCGIaEQgWIQv///wCDfCIHQoOhVn58IgYgBkKAgEB9IhhCgICAf4N9IA0gDEKAgIB/g30gB0LRqwh+fCAKIA9CgICAf4N9IAVCg6FWfiAAMQAnIgYgADEAKEIIhoQgADEAKUIQhoRCA4h8IAhC0asIfnwgBEKDoVZ+IAAxACQiDSAAMQAlQgiGhCAAMQAmQhCGhCAGQhiGhEIGiEL///8Ag3wgBULRqwh+fCAIQtOMQ358IgxCgIBAfSIQQhWHfCIRQoCAQH0iEkIVh3wiBkKDoVZ+fCAJIAJCmNocfiAAMQASIgogADEAE0IIhoQgADEAFEIQhoRCA4h8IAJCk9gofiAAMQAPIg8gADEAEEIIhoQgADEAEUIQhoQgCkIYhoRCBohC////AIN8IhNCgIBAfSIUQhWIfCABQpPYKH58IhVCgIBAfSIWQhWIfCALQoCAgP///weDfSAHQtOMQ358IAZC0asIfnwgESASQoCAgH+DfSIKQoOhVn58IglCgIBAfSILQhWHfCIRQoCAQH0iEkIVh3wgESASQoCAgH+DfSAJIAtCgICAf4N9IBUgFkKAgIB/g30gB0Ln9id+fCAGQtOMQ358IApC0asIfnwgDCAQQoCAgH+DfSADQoOhVn4gADEAIiIJIAAxACNCCIaEIA1CEIaEQgGIQv///wCDfCAEQtGrCH58IAVC04xDfnwgCELn9id+fCABQoOhVn4gADEAHyINIAAxACBCCIaEIAAxACFCEIaEIAlCGIaEQgSIQv///wCDfCADQtGrCH58IARC04xDfnwgBULn9id+fCAIQpjaHH58IhVCgIBAfSIWQhWHfCILQoCAQH0iDEIVh3wiCUKDoVZ+fCATIBRCgICA////AYN9IAdCmNocfnwgBkLn9id+fCAKQtOMQ358IAlC0asIfnwgCyAMQoCAgH+DfSILQoOhVn58IgxCgIBAfSIQQhWHfCITQoCAQH0iFEIVh3wgEyAUQoCAgH+DfSAMIBBCgICAf4N9IAdCk9gofiAAMQANIgcgADEADkIIhoQgD0IQhoRCAYhC////AIN8IAZCmNocfnwgCkLn9id+fCAVIBZCgICAf4N9IAJCg6FWfiAAMQAdQgiGIA6EIAAxAB5CEIaEIA1CGIaEQgeIQv///wCDfCABQtGrCH58IANC04xDfnwgBELn9id+fCAFQpjaHH58IAhCk9gofnwgF0IVh3wiAUKAgEB9IgNCFYd8IgJCg6FWfnwgCULTjEN+fCALQtGrCH58IAZCk9gofiAAMQAKIgQgADEAC0IIhoQgADEADEIQhoQgB0IYhoRCBIhC////AIN8IApCmNocfnwgAkLRqwh+fCAJQuf2J358IAtC04xDfnwiBUKAgEB9IghCFYd8IgdCgIBAfSIGQhWHfCAHIAEgA0KAgIB/g30gGEIVh3wiA0KAgEB9Ig5CFYciAUKDoVZ+fCAGQoCAgH+DfSAFIAFC0asIfnwgCEKAgIB/g30gCkKT2Ch+IAAxAAciBSAAMQAIQgiGhCAAMQAJQhCGhCAEQhiGhEIHiEL///8Ag3wgAkLTjEN+fCAJQpjaHH58IAtC5/YnfnwgAkLn9id+IAAxAAUiBCAAMQAGQgiGhCAFQhCGhEICiEL///8Ag3wgCUKT2Ch+fCALQpjaHH58IgVCgIBAfSIIQhWHfCIHQoCAQH0iBkIVh3wgByABQtOMQ358IAZCgICAf4N9IAUgAULn9id+fCAIQoCAgH+DfSACQpjaHH4gADEAAiIFIAAxAANCCIaEIAAxAARCEIaEIARCGIaEQgWIQv///wCDfCALQpPYKH58IAJCk9gofiAAMwAAIAVCEIZCgID8AIOEfCICQoCAQH0iBEIVh3wiBUKAgEB9IghCFYd8IAUgAUKY2hx+fCAIQoCAgH+DfSACIARCgICAf4N9IAFCk9gofnwiAUIVh3wiBEIVh3wiBUIVh3wiCEIVh3wiB0IVh3wiBkIVh3wiCkIVh3wiCUIVh3wiC0IVh3wiDUIVh3wiDEIVhyADIA5CgICAf4N9fCIOQhWHIgJCk9gofiABQv///wCDfCIBPAAAIAAgAUIIiDwAASAAIAJCmNocfiAEQv///wCDfCABQhWHfCIDQguIPAAEIAAgA0IDiDwAAyAAIAJC5/YnfiAFQv///wCDfCADQhWHfCIEQgaIPAAGIAAgAUIQiEIfgyADQv///wCDIgNCBYaEPAACIAAgAkLTjEN+IAhC////AIN8IARCFYd8IgFCCYg8AAkgACABQgGIPAAIIAAgBEL///8AgyIEQgKGIANCE4iEPAAFIAAgAkLRqwh+IAdC////AIN8IAFCFYd8IgNCDIg8AAwgACADQgSIPAALIAAgAUL///8AgyIFQgeGIARCDoiEPAAHIAAgAkKDoVZ+IAZC////AIN8IANCFYd8IgFCB4g8AA4gACADQv///wCDIgNCBIYgBUIRiIQ8AAogACAKQv///wCDIAFCFYd8IgJCCog8ABEgACACQgKIPAAQIAAgAUL///8AgyIEQgGGIANCFIiEPAANIAAgCUL///8AgyACQhWHfCIBQg2IPAAUIAAgAUIFiDwAEyAAIAJC////AIMiA0IGhiAEQg+IhDwADyAAIAtC////AIMgAUIVh3wiAjwAFSAAIAFCA4YgA0ISiIQ8ABIgACACQgiIPAAWIAAgDUL///8AgyACQhWHfCIBQguIPAAZIAAgAUIDiDwAGCAAIAxC////AIMgAUIVh3wiA0IGiDwAGyAAIAJCEIhCH4MgAUL///8AgyIBQgWGhDwAFyAAIA5C////AIMgA0IVh3wiAkIRiDwAHyAAIAJCCYg8AB4gACACQgGIPAAdIAAgA0L///8AgyIDQgKGIAFCE4iEPAAaIAAgAkIHhiADQg6IhDwAHAtqACAAQegJKQMANwO4ASAAQeAJKQMANwOwASAAQdgJKQMANwOoASAAQdAJKQMANwOgASAAQcgJKQMANwOYASAAQcAJKQMANwOQASAAQbgJKQMANwOIASAAQbAJKQMANwOAASAAQgA3A8ABC3YBA38gAgRAIABBgAFqIQUgACgCwAFB/wBxIQMDQCAAIANqIAEgAkGAASADayIEIAQgAksbIgQQNBogAiAEayECIAMgBGoiA0GAAUYEQCAAIAUQMUEAIQMLIAEgBGohASAAIAApA8ABIAStfDcDwAEgAg0ACwsLtwkCA38RfiMAQYAFayIDJAADQCADIAJBA3QiBGogACAEaikAACIFQjiGIAVCKIZCgICAgICAwP8Ag4QgBUIYhkKAgICAgOA/gyAFQgiGQoCAgIDwH4OEhCAFQgiIQoCAgPgPgyAFQhiIQoCA/AeDhCAFQiiIQoD+A4MgBUI4iISEhDcDACACQQFqIgJBEEcNAAtBECEEIAMpAwAhBQNAIAMgBEEDdGoiAiAFIAJBSGopAwB8IAJBcGopAwAiBUIDiSAFQgaIhSAFQi2JhXwgAkGIf2opAwAiBUI4iSAFQgeIhSAFQj+JhXw3AwAgBEEBaiIEQdAARw0AC0EAIQQgASkDACIOIQUgASkDCCIPIQcgASkDECIQIQggASkDGCIRIQkgASkDICISIQYgASkDKCITIQogASkDMCIUIQsgASkDOCIVIQwDQCAEQQN0IgJB8AlqKQMAIAogC4UgBoMgC4UgDHwgBkIyiSAGQi6JhSAGQheJhXx8IAIgA2opAwB8Ig0gBSAHhCAIgyAFIAeDhCAFQiSJIAVCHomFIAVCGYmFfHwiDEIkiSAMQh6JhSAMQhmJhSAFIAyEIAeDIAUgDIOEfCACQQhyIgBB8AlqKQMAIAt8IAAgA2opAwB8IAkgDXwiCSAGIAqFgyAKhXwgCUIyiSAJQi6JhSAJQheJhXwiDXwiC0IkiSALQh6JhSALQhmJhSALIAyEIAWDIAsgDIOEfCACQRByIgBB8AlqKQMAIAp8IAAgA2opAwB8IAggDXwiCCAGIAmFgyAGhXwgCEIyiSAIQi6JhSAIQheJhXwiDXwiCkIkiSAKQh6JhSAKQhmJhSAKIAuEIAyDIAogC4OEfCACQRhyIgBB8AlqKQMAIAZ8IAAgA2opAwB8IAcgDXwiByAIIAmFgyAJhXwgB0IyiSAHQi6JhSAHQheJhXwiDXwiBkIkiSAGQh6JhSAGQhmJhSAGIAqEIAuDIAYgCoOEfCACQSByIgBB8AlqKQMAIAl8IAAgA2opAwB8IAUgDXwiBSAHIAiFgyAIhXwgBUIyiSAFQi6JhSAFQheJhXwiDXwiCUIkiSAJQh6JhSAJQhmJhSAGIAmEIAqDIAYgCYOEfCADIAJBKHIiAGopAwAgAEHwCWopAwB8IAh8IAwgDXwiDCAFIAeFgyAHhXwgDEIyiSAMQi6JhSAMQheJhXwiDXwiCEIkiSAIQh6JhSAIQhmJhSAIIAmEIAaDIAggCYOEfCADIAJBMHIiAGopAwAgAEHwCWopAwB8IAd8IAsgDXwiCyAFIAyFgyAFhXwgC0IyiSALQi6JhSALQheJhXwiDXwiB0IkiSAHQh6JhSAHQhmJhSAHIAiEIAmDIAcgCIOEfCADIAJBOHIiAmopAwAgAkHwCWopAwB8IAV8IAogDXwiCiALIAyFgyAMhXwgCkIyiSAKQi6JhSAKQheJhXwiDXwhBSAGIA18IQYgBEHIAEkhAiAEQQhqIQQgAg0ACyABIAwgFXw3AzggASALIBR8NwMwIAEgCiATfDcDKCABIAYgEnw3AyAgASAJIBF8NwMYIAEgCCAQfDcDECABIAcgD3w3AwggASAFIA58NwMAIANBgAVqJAAL2wICAn8BfiAAIAAoAsABQf8AcSICaiIDQYABOgAAIANBAWohAwJAIAJB8ABPBEAgAyACQf8AcxA1IAAgAEGAAWoQMSAAQfAAEDUMAQsgA0HvACACaxA1C0EAIQIgAEEANgBwIABBADYAcyAAIAApA8ABIgRCPYg8AHcgACAEQgOGQgB8IgQ8AH8gACAEQgiIPAB+IAAgBEIQiDwAfSAAIARCGIg8AHwgACAEQiCIPAB7IAAgBEIoiDwAeiAAIARCMIg8AHkgACAEQjiIPAB4IAAgAEGAAWoiAxAxA0AgASACQQN0IgBqIAAgA2opAwAiBEI4hiAEQiiGQoCAgICAgMD/AIOEIARCGIZCgICAgIDgP4MgBEIIhkKAgICA8B+DhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIQ3AAAgAkEBaiICQQhHDQALC3AAIAAgARAyIABB6AkpAwA3A7gBIABB4AkpAwA3A7ABIABB2AkpAwA3A6gBIABB0AkpAwA3A6ABIABByAkpAwA3A5gBIABBwAkpAwA3A5ABIABBuAkpAwA3A4gBIABBsAkpAwA3A4ABIABCADcDwAELggQBA38gAkGABE8EQCAAIAEgAhAAGiAADwsgACACaiEDAkAgACABc0EDcUUEQAJAIAJBAUgEQCAAIQIMAQsgAEEDcUUEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA08NASACQQNxDQALCwJAIANBfHEiBEHAAEkNACACIARBQGoiBUsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIAVNDQALCyACIARPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAESQ0ACwwBCyADQQRJBEAgACECDAELIANBfGoiBCAASQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLIAAL1gIBAn8CQCABRQ0AIAAgAWoiAkF/akEAOgAAIABBADoAACABQQNJDQAgAkF+akEAOgAAIABBADoAASACQX1qQQA6AAAgAEEAOgACIAFBB0kNACACQXxqQQA6AAAgAEEAOgADIAFBCUkNACAAQQAgAGtBA3EiA2oiAkEANgIAIAIgASADa0F8cSIDaiIBQXxqQQA2AgAgA0EJSQ0AIAJBADYCCCACQQA2AgQgAUF4akEANgIAIAFBdGpBADYCACADQRlJDQAgAkEANgIYIAJBADYCFCACQQA2AhAgAkEANgIMIAFBcGpBADYCACABQWxqQQA2AgAgAUFoakEANgIAIAFBZGpBADYCACADIAJBBHFBGHIiA2siAUEgSQ0AIAIgA2ohAgNAIAJCADcDGCACQgA3AxAgAkIANwMIIAJCADcDACACQSBqIQIgAUFgaiIBQR9LDQALCwvpAgEBfwJAIAAgAUYNACABIABrIAJrQQAgAkEBdGtNBEAgACABIAIQNA8LIAAgAXNBA3EhAwJAAkAgACABSQRAIAMEQCAAIQMMAwsgAEEDcUUEQCAAIQMMAgsgACEDA0AgAkUNBCADIAEtAAA6AAAgAUEBaiEBIAJBf2ohAiADQQFqIgNBA3ENAAsMAQsCQCADDQAgACACakEDcQRAA0AgAkUNBSAAIAJBf2oiAmoiAyABIAJqLQAAOgAAIANBA3ENAAsLIAJBA00NAANAIAAgAkF8aiICaiABIAJqKAIANgIAIAJBA0sNAAsLIAJFDQIDQCAAIAJBf2oiAmogASACai0AADoAACACDQALDAILIAJBA00NAANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIAJBfGoiAkEDSw0ACwsgAkUNAANAIAMgAS0AADoAACADQQFqIQMgAUEBaiEBIAJBf2oiAg0ACwsgAAsGAEGwhgILbwEBfwJAIABBA2pBfHEiAUEBTkEAAn9BtIYCKAIAIgBFBEBBtIYCQbCKwgI2AgBBsIrCAiEACyAAIAFqIgEgAE0LGw0AIAE/AEEQdEsEQCABEAFFDQELQbSGAiABNgIAIAAPC0GwhgJBMDYCAEF/C/cuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBBuIYCKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiBEEDdCIDQeiGAmooAgAiAUEIaiEAAkAgASgCCCICIANB4IYCaiIDRgRAQbiGAiAGQX4gBHdxNgIADAELQciGAigCABogAiADNgIMIAMgAjYCCAsgASAEQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDQsgBEHAhgIoAgAiCU0NASAABEACQCAAIAF0QQIgAXQiAEEAIABrcnEiAEEAIABrcUF/aiIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqIgJBA3QiA0HohgJqKAIAIgEoAggiACADQeCGAmoiA0YEQEG4hgIgBkF+IAJ3cSIGNgIADAELQciGAigCABogACADNgIMIAMgADYCCAsgAUEIaiEAIAEgBEEDcjYCBCABIARqIgMgAkEDdCIFIARrIgJBAXI2AgQgASAFaiACNgIAIAkEQCAJQQN2IgVBA3RB4IYCaiEEQcyGAigCACEBAn8gBkEBIAV0IgVxRQRAQbiGAiAFIAZyNgIAIAQMAQsgBCgCCAshBSAEIAE2AgggBSABNgIMIAEgBDYCDCABIAU2AggLQcyGAiADNgIAQcCGAiACNgIADA0LQbyGAigCACIIRQ0BIAhBACAIa3FBf2oiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEHoiAJqKAIAIgMoAgRBeHEgBGshASADIQIDQAJAIAIoAhAiAEUEQCACKAIUIgBFDQELIAAoAgRBeHEgBGsiAiABIAIgAUkiAhshASAAIAMgAhshAyAAIQIMAQsLIAMgBGoiCyADTQ0CIAMoAhghCiADIAMoAgwiBUcEQEHIhgIoAgAgAygCCCIATQRAIAAoAgwaCyAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEG8hgIoAgAiCUUNAAJ/QQAgAEEIdiIARQ0AGkEfIARB////B0sNABogACAAQYD+P2pBEHZBCHEiAXQiACAAQYDgH2pBEHZBBHEiAHQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcagshB0EAIARrIQECQAJAAkAgB0ECdEHoiAJqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAlxIgBFDQMgAEEAIABrcUF/aiIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QeiIAmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFBwIYCKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCCAFIAUoAgwiA0cEQEHIhgIoAgAgBSgCCCIATQRAIAAoAgwaCyAAIAM2AgwgAyAANgIIDAoLIAVBFGoiAigCACIARQRAIAUoAhAiAEUNBCAFQRBqIQILA0AgAiEGIAAiA0EUaiICKAIAIgANACADQRBqIQIgAygCECIADQALIAZBADYCAAwJC0HAhgIoAgAiACAETwRAQcyGAigCACEBAkAgACAEayICQRBPBEBBwIYCIAI2AgBBzIYCIAEgBGoiAzYCACADIAJBAXI2AgQgACABaiACNgIAIAEgBEEDcjYCBAwBC0HMhgJBADYCAEHAhgJBADYCACABIABBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQLIAFBCGohAAwLC0HEhgIoAgAiAyAESwRAQcSGAiADIARrIgE2AgBB0IYCQdCGAigCACIAIARqIgI2AgAgAiABQQFyNgIEIAAgBEEDcjYCBCAAQQhqIQAMCwtBACEAIARBL2oiCQJ/QZCKAigCAARAQZiKAigCAAwBC0GcigJCfzcCAEGUigJCgKCAgICABDcCAEGQigIgDEEMakFwcUHYqtWqBXM2AgBBpIoCQQA2AgBB9IkCQQA2AgBBgCALIgFqIgZBACABayIHcSIFIARNDQpB8IkCKAIAIgEEQEHoiQIoAgAiAiAFaiIIIAJNDQsgCCABSw0LC0H0iQItAABBBHENBQJAAkBB0IYCKAIAIgEEQEH4iQIhAANAIAAoAgAiAiABTQRAIAIgACgCBGogAUsNAwsgACgCCCIADQALC0EAEDgiA0F/Rg0GIAUhBkGUigIoAgAiAEF/aiIBIANxBEAgBSADayABIANqQQAgAGtxaiEGCyAGIARNDQYgBkH+////B0sNBkHwiQIoAgAiAARAQeiJAigCACIBIAZqIgIgAU0NByACIABLDQcLIAYQOCIAIANHDQEMCAsgBiADayAHcSIGQf7///8HSw0FIAYQOCIDIAAoAgAgACgCBGpGDQQgAyEACwJAIARBMGogBk0NACAAQX9GDQBBmIoCKAIAIgEgCSAGa2pBACABa3EiAUH+////B0sEQCAAIQMMCAsgARA4QX9HBEAgASAGaiEGIAAhAwwIC0EAIAZrEDgaDAULIAAhAyAAQX9HDQYMBAsAC0EAIQUMBwtBACEDDAULIANBf0cNAgtB9IkCQfSJAigCAEEEcjYCAAsgBUH+////B0sNASAFEDgiA0EAEDgiAE8NASADQX9GDQEgAEF/Rg0BIAAgA2siBiAEQShqTQ0BC0HoiQJB6IkCKAIAIAZqIgA2AgAgAEHsiQIoAgBLBEBB7IkCIAA2AgALAkACQAJAQdCGAigCACIBBEBB+IkCIQADQCADIAAoAgAiAiAAKAIEIgVqRg0CIAAoAggiAA0ACwwCC0HIhgIoAgAiAEEAIAMgAE8bRQRAQciGAiADNgIAC0EAIQBB/IkCIAY2AgBB+IkCIAM2AgBB2IYCQX82AgBB3IYCQZCKAigCADYCAEGEigJBADYCAANAIABBA3QiAUHohgJqIAFB4IYCaiICNgIAIAFB7IYCaiACNgIAIABBAWoiAEEgRw0AC0HEhgIgBkFYaiIAQXggA2tBB3FBACADQQhqQQdxGyIBayICNgIAQdCGAiABIANqIgE2AgAgASACQQFyNgIEIAAgA2pBKDYCBEHUhgJBoIoCKAIANgIADAILIAAtAAxBCHENACADIAFNDQAgAiABSw0AIAAgBSAGajYCBEHQhgIgAUF4IAFrQQdxQQAgAUEIakEHcRsiAGoiAjYCAEHEhgJBxIYCKAIAIAZqIgMgAGsiADYCACACIABBAXI2AgQgASADakEoNgIEQdSGAkGgigIoAgA2AgAMAQsgA0HIhgIoAgAiBUkEQEHIhgIgAzYCACADIQULIAMgBmohAkH4iQIhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtB+IkCIQADQCAAKAIAIgIgAU0EQCACIAAoAgRqIgIgAUsNAwsgACgCCCEADAAACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiAyAHayAEayEAIAQgB2ohAiABIANGBEBB0IYCIAI2AgBBxIYCQcSGAigCACAAaiIANgIAIAIgAEEBcjYCBAwDCyADQcyGAigCAEYEQEHMhgIgAjYCAEHAhgJBwIYCKAIAIABqIgA2AgAgAiAAQQFyNgIEIAAgAmogADYCAAwDCyADKAIEIgFBA3FBAUYEQCABQXhxIQkCQCABQf8BTQRAIAMoAggiBiABQQN2IghBA3RB4IYCakcaIAMoAgwiBCAGRgRAQbiGAkG4hgIoAgBBfiAId3E2AgAMAgsgBiAENgIMIAQgBjYCCAwBCyADKAIYIQgCQCADIAMoAgwiBkcEQCAFIAMoAggiAU0EQCABKAIMGgsgASAGNgIMIAYgATYCCAwBCwJAIANBFGoiASgCACIEDQAgA0EQaiIBKAIAIgQNAEEAIQYMAQsDQCABIQUgBCIGQRRqIgEoAgAiBA0AIAZBEGohASAGKAIQIgQNAAsgBUEANgIACyAIRQ0AAkAgAyADKAIcIgRBAnRB6IgCaiIBKAIARgRAIAEgBjYCACAGDQFBvIYCQbyGAigCAEF+IAR3cTYCAAwCCyAIQRBBFCAIKAIQIANGG2ogBjYCACAGRQ0BCyAGIAg2AhggAygCECIBBEAgBiABNgIQIAEgBjYCGAsgAygCFCIBRQ0AIAYgATYCFCABIAY2AhgLIAMgCWohAyAAIAlqIQALIAMgAygCBEF+cTYCBCACIABBAXI2AgQgACACaiAANgIAIABB/wFNBEAgAEEDdiIBQQN0QeCGAmohAAJ/QbiGAigCACIEQQEgAXQiAXFFBEBBuIYCIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCAwDCyACAn9BACAAQQh2IgRFDQAaQR8gAEH///8HSw0AGiAEIARBgP4/akEQdkEIcSIBdCIEIARBgOAfakEQdkEEcSIEdCIDIANBgIAPakEQdkECcSIDdEEPdiABIARyIANyayIBQQF0IAAgAUEVanZBAXFyQRxqCyIBNgIcIAJCADcCECABQQJ0QeiIAmohBAJAQbyGAigCACIDQQEgAXQiBXFFBEBBvIYCIAMgBXI2AgAgBCACNgIAIAIgBDYCGAwBCyAAQQBBGSABQQF2ayABQR9GG3QhASAEKAIAIQMDQCADIgQoAgRBeHEgAEYNAyABQR12IQMgAUEBdCEBIAQgA0EEcWpBEGoiBSgCACIDDQALIAUgAjYCACACIAQ2AhgLIAIgAjYCDCACIAI2AggMAgtBxIYCIAZBWGoiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHQhgIgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB1IYCQaCKAigCADYCACABIAJBJyACa0EHcUEAIAJBWWpBB3EbakFRaiIAIAAgAUEQakkbIgVBGzYCBCAFQYCKAikCADcCECAFQfiJAikCADcCCEGAigIgBUEIajYCAEH8iQIgBjYCAEH4iQIgAzYCAEGEigJBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QeCGAmohAAJ/QbiGAigCACIDQQEgAnQiAnFFBEBBuIYCIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwECyABQgA3AhAgAQJ/QQAgBkEIdiICRQ0AGkEfIAZB////B0sNABogAiACQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiAyADQYCAD2pBEHZBAnEiA3RBD3YgACACciADcmsiAEEBdCAGIABBFWp2QQFxckEcagsiADYCHCAAQQJ0QeiIAmohAgJAQbyGAigCACIDQQEgAHQiBXFFBEBBvIYCIAMgBXI2AgAgAiABNgIAIAEgAjYCGAwBCyAGQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQMDQCADIgIoAgRBeHEgBkYNBCAAQR12IQMgAEEBdCEAIAIgA0EEcWpBEGoiBSgCACIDDQALIAUgATYCACABIAI2AhgLIAEgATYCDCABIAE2AggMAwsgBCgCCCIAIAI2AgwgBCACNgIIIAJBADYCGCACIAQ2AgwgAiAANgIICyAHQQhqIQAMBQsgAigCCCIAIAE2AgwgAiABNgIIIAFBADYCGCABIAI2AgwgASAANgIIC0HEhgIoAgAiACAETQ0AQcSGAiAAIARrIgE2AgBB0IYCQdCGAigCACIAIARqIgI2AgAgAiABQQFyNgIEIAAgBEEDcjYCBCAAQQhqIQAMAwtBsIYCQTA2AgBBACEADAILAkAgCEUNAAJAIAUoAhwiAkECdEHoiAJqIgAoAgAgBUYEQCAAIAM2AgAgAw0BQbyGAiAJQX4gAndxIgk2AgAMAgsgCEEQQRQgCCgCECAFRhtqIAM2AgAgA0UNAQsgAyAINgIYIAUoAhAiAARAIAMgADYCECAAIAM2AhgLIAUoAhQiAEUNACADIAA2AhQgACADNgIYCwJAIAFBD00EQCAFIAEgBGoiAEEDcjYCBCAAIAVqIgAgACgCBEEBcjYCBAwBCyAFIARBA3I2AgQgByABQQFyNgIEIAEgB2ogATYCACABQf8BTQRAIAFBA3YiAUEDdEHghgJqIQACf0G4hgIoAgAiAkEBIAF0IgFxRQRAQbiGAiABIAJyNgIAIAAMAQsgACgCCAshASAAIAc2AgggASAHNgIMIAcgADYCDCAHIAE2AggMAQsgBwJ/QQAgAUEIdiICRQ0AGkEfIAFB////B0sNABogAiACQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcagsiADYCHCAHQgA3AhAgAEECdEHoiAJqIQICQAJAIAlBASAAdCIEcUUEQEG8hgIgBCAJcjYCACACIAc2AgAgByACNgIYDAELIAFBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhBANAIAQiAigCBEF4cSABRg0CIABBHXYhBCAAQQF0IQAgAiAEQQRxakEQaiIDKAIAIgQNAAsgAyAHNgIAIAcgAjYCGAsgByAHNgIMIAcgBzYCCAwBCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLIAVBCGohAAwBCwJAIApFDQACQCADKAIcIgJBAnRB6IgCaiIAKAIAIANGBEAgACAFNgIAIAUNAUG8hgIgCEF+IAJ3cTYCAAwCCyAKQRBBFCAKKAIQIANGG2ogBTYCACAFRQ0BCyAFIAo2AhggAygCECIABEAgBSAANgIQIAAgBTYCGAsgAygCFCIARQ0AIAUgADYCFCAAIAU2AhgLAkAgAUEPTQRAIAMgASAEaiIAQQNyNgIEIAAgA2oiACAAKAIEQQFyNgIEDAELIAMgBEEDcjYCBCALIAFBAXI2AgQgASALaiABNgIAIAkEQCAJQQN2IgRBA3RB4IYCaiECQcyGAigCACEAAn9BASAEdCIEIAZxRQRAQbiGAiAEIAZyNgIAIAIMAQsgAigCCAshBCACIAA2AgggBCAANgIMIAAgAjYCDCAAIAQ2AggLQcyGAiALNgIAQcCGAiABNgIACyADQQhqIQALIAxBEGokACAAC6oNAQd/AkAgAEUNACAAQXhqIgIgAEF8aigCACIBQXhxIgBqIQUCQCABQQFxDQAgAUEDcUUNASACIAIoAgAiAWsiAkHIhgIoAgAiBEkNASAAIAFqIQAgAkHMhgIoAgBHBEAgAUH/AU0EQCACKAIIIgcgAUEDdiIGQQN0QeCGAmpHGiAHIAIoAgwiA0YEQEG4hgJBuIYCKAIAQX4gBndxNgIADAMLIAcgAzYCDCADIAc2AggMAgsgAigCGCEGAkAgAiACKAIMIgNHBEAgBCACKAIIIgFNBEAgASgCDBoLIAEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QeiIAmoiASgCAEYEQCABIAM2AgAgAw0BQbyGAkG8hgIoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQcCGAiAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgBSACTQ0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHQhgIoAgBGBEBB0IYCIAI2AgBBxIYCQcSGAigCACAAaiIANgIAIAIgAEEBcjYCBCACQcyGAigCAEcNA0HAhgJBADYCAEHMhgJBADYCAA8LIAVBzIYCKAIARgRAQcyGAiACNgIAQcCGAkHAhgIoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIMIQQgBSgCCCIDIAFBA3YiBUEDdEHghgJqIgFHBEBByIYCKAIAGgsgAyAERgRAQbiGAkG4hgIoAgBBfiAFd3E2AgAMAgsgASAERwRAQciGAigCABoLIAMgBDYCDCAEIAM2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEBByIYCKAIAIAUoAggiAU0EQCABKAIMGgsgASADNgIMIAMgATYCCAwBCwJAIAVBFGoiASgCACIEDQAgBUEQaiIBKAIAIgQNAEEAIQMMAQsDQCABIQcgBCIDQRRqIgEoAgAiBA0AIANBEGohASADKAIQIgQNAAsgB0EANgIACyAGRQ0AAkAgBSAFKAIcIgRBAnRB6IgCaiIBKAIARgRAIAEgAzYCACADDQFBvIYCQbyGAigCAEF+IAR3cTYCAAwCCyAGQRBBFCAGKAIQIAVGG2ogAzYCACADRQ0BCyADIAY2AhggBSgCECIBBEAgAyABNgIQIAEgAzYCGAsgBSgCFCIBRQ0AIAMgATYCFCABIAM2AhgLIAIgAEEBcjYCBCAAIAJqIAA2AgAgAkHMhgIoAgBHDQFBwIYCIAA2AgAPCyAFIAFBfnE2AgQgAiAAQQFyNgIEIAAgAmogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RB4IYCaiEAAn9BuIYCKAIAIgRBASABdCIBcUUEQEG4hgIgASAEcjYCACAADAELIAAoAggLIQEgACACNgIIIAEgAjYCDCACIAA2AgwgAiABNgIIDwsgAkIANwIQIAICf0EAIABBCHYiBEUNABpBHyAAQf///wdLDQAaIAQgBEGA/j9qQRB2QQhxIgF0IgQgBEGA4B9qQRB2QQRxIgR0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAEgBHIgA3JrIgFBAXQgACABQRVqdkEBcXJBHGoLIgE2AhwgAUECdEHoiAJqIQQCQAJAAkBBvIYCKAIAIgNBASABdCIFcUUEQEG8hgIgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQdiGAkHYhgIoAgBBf2oiAjYCACACDQBBgIoCIQIDQCACKAIAIgBBCGohAiAADQALQdiGAkF/NgIACwsEACMACwYAIAAkAAsQACMAIABrQXBxIgAkACAACwYAIABAAAsLmf4BBABBoAgLV7Z4Wf+FctMAvW4V/w8KagApwAEAmOh5/7w8oP+Zcc7/ALfi/rQNSP8AAAAAAAAAALCgDv7TyYb/nhiPAH9pNQBgDL0Ap9f7/59MgP5qZeH/HvwEAJIMrgBBgAkLJ1nxsv4K5ab/e90q/h4U1ABSgAMAMNHzAHd5QP8y45z/AG7FAWcbkABBsAkLwAUIybzzZ+YJajunyoSFrme7K/iU/nLzbjzxNh1fOvVPpdGC5q1/Ug5RH2w+K4xoBZtrvUH7q9mDH3khfhMZzeBbIq4o15gvikLNZe8jkUQ3cS87TezP+8C1vNuJgaXbtek4tUjzW8JWORnQBbbxEfFZm08Zr6SCP5IYgW3a1V4cq0ICA6OYqgfYvm9wRQFbgxKMsuROvoUxJOK0/9XDfQxVb4l78nRdvnKxlhY7/rHegDUSxyWnBtyblCZpz3Txm8HSSvGewWmb5OMlTziGR77vtdWMi8adwQ9lnKx3zKEMJHUCK1lvLOktg+SmbqqEdErU+0G93KmwXLVTEYPaiPl2q99m7lJRPpgQMrQtbcYxqD8h+5jIJwOw5A7vvsd/Wb/Cj6g98wvgxiWnCpNHkafVb4ID4FFjygZwbg4KZykpFPwv0kaFCrcnJskmXDghGy7tKsRa/G0sTd+zlZ0TDThT3mOvi1RzCmWosnc8uwpqduau7UcuycKBOzWCFIUscpJkA/FMoei/ogEwQrxLZhqokZf40HCLS8IwvlQGo1FsxxhS79YZ6JLREKllVSQGmdYqIHFXhTUO9LjRuzJwoGoQyNDSuBbBpBlTq0FRCGw3Hpnrjt9Md0gnqEib4bW8sDRjWsnFswwcOcuKQeNKqthOc+Njd0/KnFujuLLW828uaPyy713ugo90YC8XQ29jpXhyq/ChFHjIhOw5ZBoIAseMKB5jI/r/vpDpvYLe62xQpBV5xrL3o/m+K1Ny4/J4ccacYSbqzj4nygfCwCHHuIbRHuvgzdZ92up40W7uf0999bpvF3KqZ/AGppjIosV9YwquDfm+BJg/ERtHHBM1C3EbhH0EI/V32yiTJMdAe6vKMry+yRUKvp48TA0QnMRnHUO2Qj7LvtTFTCp+ZfycKX9Z7PrWOqtvy18XWEdKjBlEbABB8A4Lv/cBhTuMAb3xJP/4JcMBYNw3ALdMPv/DQj0AMkykAeGkTP9MPaP/dT4fAFGRQP92QQ4AonPW/waKLgB85vT/CoqPADQawgC49EwAgY8pAb70E/97qnr/YoFEAHnVkwBWZR7/oWebAIxZQ//v5b4BQwu1AMbwif7uRbz/Q5fuABMqbP/lVXEBMkSH/xFqCQAyZwH/UAGoASOYHv8QqLkBOFno/2XS/AAp+kcAzKpP/w4u7/9QTe8AvdZL/xGN+QAmUEz/vlV1AFbkqgCc2NABw8+k/5ZCTP+v4RD/jVBiAUzb8gDGonIALtqYAJsr8f6boGj/M7ulAAIRrwBCVKAB9zoeACNBNf5F7L8ALYb1AaN73QAgbhT/NBelALrWRwDpsGAA8u82ATlZigBTAFT/iKBkAFyOeP5ofL4AtbE+//opVQCYgioBYPz2AJeXP/7vhT4AIDicAC2nvf+OhbMBg1bTALuzlv76qg7/0qNOACU0lwBjTRoA7pzV/9XA0QFJLlQAFEEpATbOTwDJg5L+qm8Y/7EhMv6rJsv/Tvd0ANHdmQCFgLIBOiwZAMknOwG9E/wAMeXSAXW7dQC1s7gBAHLbADBekwD1KTgAfQ3M/vStdwAs3SD+VOoUAPmgxgHsfur/L2Oo/qrimf9ms9gA4o16/3pCmf629YYA4+QZAdY56//YrTj/tefSAHeAnf+BX4j/bn4zAAKpt/8HgmL+RbBe/3QE4wHZ8pH/yq0fAWkBJ/8ur0UA5C86/9fgRf7POEX/EP6L/xfP1P/KFH7/X9Vg/wmwIQDIBc//8SqA/iMhwP/45cQBgRF4APtnl/8HNHD/jDhC/yji9f/ZRiX+rNYJ/0hDhgGSwNb/LCZwAES4S//OWvsAleuNALWqOgB09O8AXJ0CAGatYgDpiWABfzHLAAWblAAXlAn/03oMACKGGv/bzIgAhggp/+BTK/5VGfcAbX8A/qmIMADud9v/563VAM4S/v4Iugf/fgkHAW8qSABvNOz+YD+NAJO/f/7NTsD/DmrtAbvbTACv87v+aVmtAFUZWQGi85QAAnbR/iGeCQCLoy7/XUYoAGwqjv5v/I7/m9+QADPlp/9J/Jv/XnQM/5ig2v+c7iX/s+rP/8UAs/+apI0A4cRoAAojGf7R1PL/Yf3e/rhl5QDeEn8BpIiH/x7PjP6SYfMAgcAa/slUIf9vCk7/k1Gy/wQEGACh7tf/Bo0hADXXDv8ptdD/54udALPL3f//uXEAveKs/3FC1v/KPi3/ZkAI/06uEP6FdUT/hTuMAb3xJP/4JcMBYNw3ALdMPv/DQj0AMkykAeGkTP9MPaP/dT4fAFGRQP92QQ4AonPW/waKLgB85vT/CoqPADQawgC49EwAgY8pAb70E/97qnr/YoFEAHnVkwBWZR7/oWebAIxZQ//v5b4BQwu1AMbwif7uRbz/6nE8/yX/Of9Fsrb+gNCzAHYaff4DB9b/8TJN/1XLxf/Th/r/GTBk/7vVtP4RWGkAU9GeAQVzYgAErjz+qzdu/9m1Ef8UvKoAkpxm/lfWrv9yepsB6SyqAH8I7wHW7OoArwXbADFqPf8GQtD/Ampu/1HqE//Xa8D/Q5fuABMqbP/lVXEBMkSH/xFqCQAyZwH/UAGoASOYHv8QqLkBOFno/2XS/AAp+kcAzKpP/w4u7/9QTe8AvdZL/xGN+QAmUEz/vlV1AFbkqgCc2NABw8+k/5ZCTP+v4RD/jVBiAUzb8gDGonIALtqYAJsr8f6boGj/sgn8/mRu1AAOBacA6e+j/xyXnQFlkgr//p5G/kf55ABYHjIARDqg/78YaAGBQoH/wDJV/wiziv8m+skAc1CgAIPmcQB9WJMAWkTHAP1MngAc/3YAcfr+AEJLLgDm2isA5Xi6AZREKwCIfO4Bu2vF/1Q19v8zdP7/M7ulAAIRrwBCVKAB9zoeACNBNf5F7L8ALYb1AaN73QAgbhT/NBelALrWRwDpsGAA8u82ATlZigBTAFT/iKBkAFyOeP5ofL4AtbE+//opVQCYgioBYPz2AJeXP/7vhT4AIDicAC2nvf+OhbMBg1bTALuzlv76qg7/RHEV/966O/9CB/EBRQZIAFacbP43p1kAbTTb/g2wF//ELGr/75VH/6SMff+frQEAMynnAJE+IQCKb10BuVNFAJBzLgBhlxD/GOQaADHZ4gBxS+r+wZkM/7YwYP8ODRoAgMP5/kXBOwCEJVH+fWo8ANbwqQGk40IA0qNOACU0lwBjTRoA7pzV/9XA0QFJLlQAFEEpATbOTwDJg5L+qm8Y/7EhMv6rJsv/Tvd0ANHdmQCFgLIBOiwZAMknOwG9E/wAMeXSAXW7dQC1s7gBAHLbADBekwD1KTgAfQ3M/vStdwAs3SD+VOoUAPmgxgHsfur/jz7dAIFZ1v83iwX+RBS//w7MsgEjw9kALzPOASb2pQDOGwb+nlckANk0kv99e9f/VTwf/6sNBwDa9Vj+/CM8ADfWoP+FZTgA4CAT/pNA6gAakaIBcnZ9APj8+gBlXsT/xo3i/jMqtgCHDAn+bazS/8XswgHxQZoAMJwv/5lDN//apSL+SrSzANpCRwFYemMA1LXb/1wq5//vAJoA9U23/15RqgES1dgAq11HADRe+AASl6H+xdFC/670D/6iMLcAMT3w/rZdwwDH5AYByAUR/4kt7f9slAQAWk/t/yc/Tf81Us8BjhZ2/2XoEgFcGkMABchY/yGoiv+V4UgAAtEb/yz1qAHc7RH/HtNp/o3u3QCAUPX+b/4OAN5fvgHfCfEAkkzU/2zNaP8/dZkAkEUwACPkbwDAIcH/cNa+/nOYlwAXZlgAM0r4AOLHj/7MomX/0GG9AfVoEgDm9h7/F5RFAG5YNP7itVn/0C9a/nKhUP8hdPgAs5hX/0WQsQFY7hr/OiBxAQFNRQA7eTT/mO5TADQIwQDnJ+n/xyKKAN5ErQBbOfL+3NJ//8AH9v6XI7sAw+ylAG9dzgDU94UBmoXR/5vnCgBATiYAevlkAR4TYf8+W/kB+IVNAMU/qP50ClIAuOxx/tTLwv89ZPz+JAXK/3dbmf+BTx0AZ2er/u3Xb//YNUUA7/AXAMKV3f8m4d4A6P+0/nZShf850bEBi+iFAJ6wLv7Ccy4AWPflARxnvwDd3q/+lessAJfkGf7aaWcAjlXSAJWBvv/VQV7+dYbg/1LGdQCd3dwAo2UkAMVyJQBorKb+C7YAAFFIvP9hvBD/RQYKAMeTkf8ICXMBQdav/9mt0QBQf6YA9+UE/qe3fP9aHMz+rzvw/wsp+AFsKDP/kLHD/pb6fgCKW0EBeDze//XB7wAd1r3/gAIZAFCaogBN3GsB6s1K/zamZ/90SAkA5F4v/x7IGf8j1ln/PbCM/1Pio/9LgqwAgCYRAF+JmP/XfJ8BT10AAJRSnf7Dgvv/KMpM//t+4ACdYz7+zwfh/2BEwwCMup3/gxPn/yqA/gA02z3+ZstIAI0HC/+6pNUAH3p3AIXykQDQ/Oj/W9W2/48E+v7510oApR5vAasJ3wDleyIBXIIa/02bLQHDixz/O+BOAIgR9wBseSAAT/q9/2Dj/P4m8T4APq59/5tvXf8K5s4BYcUo/wAxOf5B+g0AEvuW/9xt0v8Frqb+LIG9AOsjk/8l943/SI0E/2dr/wD3WgQANSwqAAIe8AAEOz8AWE4kAHGntAC+R8H/x56k/zoIrABNIQwAQT8DAJlNIf+s/mYB5N0E/1ce/gGSKVb/iszv/myNEf+78ocA0tB/AEQtDv5JYD4AUTwY/6oGJP8D+RoAI9VtABaBNv8VI+H/6j04/zrZBgCPfFgA7H5CANEmt/8i7gb/rpFmAF8W0wDED5n+LlTo/3UikgHn+kr/G4ZkAVy7w/+qxnAAeBwqANFGQwAdUR8AHahkAamtoABrI3UAPmA7/1EMRQGH777/3PwSAKPcOv+Jibz/U2ZtAGAGTADq3tL/ua7NATye1f8N8dYArIGMAF1o8gDAnPsAK3UeAOFRngB/6NoA4hzLAOkbl/91KwX/8g4v/yEUBgCJ+yz+Gx/1/7fWff4oeZUAup7V/1kI4wBFWAD+y4fhAMmuywCTR7gAEnkp/l4FTgDg1vD+JAW0APuH5wGjitQA0vl0/liBuwATCDH+Pg6Q/59M0wDWM1IAbXXk/mffy/9L/A8Bmkfc/xcNWwGNqGD/tbaFAPozNwDq6tT+rz+eACfwNAGevST/1ShVASC09/8TZhoBVBhh/0UV3gCUi3r/3NXrAejL/wB5OZMA4weaADUWkwFIAeEAUoYw/lM8nf+RSKkAImfvAMbpLwB0EwT/uGoJ/7eBUwAksOYBImdIANuihgD1Kp4AIJVg/qUskADK70j+15YFACpCJAGE168AVq5W/xrFnP8x6If+Z7ZSAP2AsAGZsnoA9foKAOwYsgCJaoQAKB0pADIemP98aSYA5r9LAI8rqgAsgxT/LA0X/+3/mwGfbWT/cLUY/2jcbAA304MAYwzV/5iXkf/uBZ8AYZsIACFsUQABA2cAPm0i//qbtAAgR8P/JkaRAZ9f9QBF5WUBiBzwAE/gGQBObnn/+Kh8ALuA9wACk+v+TwuEAEY6DAG1CKP/T4mF/yWqC/+N81X/sOfX/8yWpP/v1yf/Llec/gijWP+sIugAQixm/xs2Kf7sY1f/KXupATRyKwB1higAm4YaAOfPW/4jhCb/E2Z9/iTjhf92A3H/HQ18AJhgSgFYks7/p7/c/qISWP+2ZBcAH3U0AFEuagEMAgcARVDJAdH2rAAMMI0B4NNYAHTinwB6YoIAQezqAeHiCf/P4nsBWdY7AHCHWAFa9Mv/MQsmAYFsugBZcA8BZS7M/3/MLf5P/93/M0kS/38qZf/xFcoAoOMHAGky7ABPNMX/aMrQAbQPEABlxU7/Yk3LACm58QEjwXwAI5sX/881wAALfaMB+Z65/wSDMAAVXW//PXnnAUXIJP+5MLn/b+4V/ycyGf9j16P/V9Qe/6STBf+ABiMBbN9u/8JMsgBKZbQA8y8wAK4ZK/9Srf0BNnLA/yg3WwDXbLD/CzgHAODpTADRYsr+8hl9ACzBXf7LCLEAh7ATAHBH1f/OO7ABBEMaAA6P1f4qN9D/PEN4AMEVowBjpHMAChR2AJzU3v6gB9n/cvVMAXU7ewCwwlb+1Q+wAE7Oz/7VgTsA6fsWAWA3mP/s/w//xVlU/12VhQCuoHEA6mOp/5h0WACQpFP/Xx3G/yIvD/9jeIb/BezBAPn3fv+Tux4AMuZ1/2zZ2/+jUab/SBmp/pt5T/8cm1n+B34RAJNBIQEv6v0AGjMSAGlTx/+jxOYAcfikAOL+2gC90cv/pPfe/v8jpQAEvPMBf7NHACXt/v9kuvAABTlH/mdISf/0ElH+5dKE/+4GtP8L5a7/493AARExHACj18T+CXYE/zPwRwBxgW3/TPDnALyxfwB9RywBGq/zAF6pGf4b5h0AD4t3Aaiquv+sxUz//Eu8AIl8xABIFmD/LZf5AdyRZABAwJ//eO/iAIGykgAAwH0A64rqALedkgBTx8D/uKxI/0nhgABNBvr/ukFDAGj2zwC8IIr/2hjyAEOKUf7tgXn/FM+WASnHEP8GFIAAn3YFALUQj//cJg8AF0CT/kkaDQBX5DkBzHyAACsY3wDbY8cAFksU/xMbfgCdPtcAbh3mALOn/wE2/L4A3cy2/rOeQf9RnQMAwtqfAKrfAADgCyD/JsViAKikJQAXWAcBpLpuAGAkhgDq8uUA+nkTAPL+cP8DL14BCe8G/1GGmf7W/aj/Q3zgAPVfSgAcHiz+AW3c/7JZWQD8JEwAGMYu/0xNbwCG6oj/J14dALlI6v9GRIf/52YH/k3njACnLzoBlGF2/xAb4QGmzo//brLW/7SDogCPjeEBDdpO/3KZIQFiaMwAr3J1AafOSwDKxFMBOkBDAIovbwHE94D/ieDg/p5wzwCaZP8BhiVrAMaAT/9/0Zv/o/65/jwO8wAf23D+HdlBAMgNdP57PMT/4Du4/vJZxAB7EEv+lRDOAEX+MAHndN//0aBBAchQYgAlwrj+lD8iAIvwQf/ZkIT/OCYt/sd40gBssab/oN4EANx+d/6la6D/Utz4AfGviACQjRf/qYpUAKCJTv/idlD/NBuE/z9gi/+Y+icAvJsPAOgzlv4oD+j/8OUJ/4mvG/9LSWEB2tQLAIcFogFrudUAAvlr/yjyRgDbyBkAGZ0NAENSUP/E+Rf/kRSVADJIkgBeTJQBGPtBAB/AFwC41Mn/e+miAfetSACiV9v+foZZAJ8LDP6maR0ASRvkAXF4t/9Co20B1I8L/5/nqAH/gFoAOQ46/lk0Cv/9CKMBAJHS/wqBVQEutRsAZ4ig/n680f8iI28A19sY/9QL1v5lBXYA6MWF/9+nbf/tUFb/RoteAJ7BvwGbDzP/D75zAE6Hz//5ChsBtX3pAF+sDf6q1aH/J+yK/19dV/++gF8AfQ/OAKaWnwDjD57/zp54/yqNgABlsngBnG2DANoOLP73qM7/1HAcAHAR5P9aECUBxd5sAP7PU/8JWvP/8/SsABpYc//NdHoAv+bBALRkCwHZJWD/mk6cAOvqH//OsrL/lcD7ALb6hwD2FmkAfMFt/wLSlf+pEaoAAGBu/3UJCAEyeyj/wb1jACLjoAAwUEb+0zPsAC169f4srggArSXp/55BqwB6Rdf/WlAC/4NqYP7jcocAzTF3/rA+QP9SMxH/8RTz/4INCP6A2fP/ohsB/lp28QD2xvb/NxB2/8ifnQCjEQEAjGt5AFWhdv8mAJUAnC/uAAmmpgFLYrX/MkoZAEIPLwCL4Z8ATAOO/w7uuAALzzX/t8C6Aasgrv+/TN0B96rbABmsMv7ZCekAy35E/7dcMAB/p7cBQTH+ABA/fwH+Far/O+B//hYwP/8bToL+KMMdAPqEcP4jy5AAaKmoAM/9Hv9oKCb+XuRYAM4QgP/UN3r/3xbqAN/FfwD9tbUBkWZ2AOyZJP/U2Uj/FCYY/oo+PgCYjAQA5txj/wEV1P+UyecA9HsJ/gCr0gAzOiX/Af8O//S3kf4A8qYAFkqEAHnYKQBfw3L+hRiX/5zi5//3BU3/9pRz/uFcUf/eUPb+qntZ/0rHjQAdFAj/iohG/11LXADdkzH+NH7iAOV8FwAuCbUAzUA0AYP+HACXntQAg0BOAM4ZqwAA5osAv/1u/mf3pwBAKCgBKqXx/ztL5P58873/xFyy/4KMVv+NWTgBk8YF/8v4nv6Qoo0AC6ziAIIqFf8Bp4//kCQk/zBYpP6oqtwAYkfWAFvQTwCfTMkBpirW/0X/AP8GgH3/vgGMAJJT2v/X7kgBen81AL10pf9UCEL/1gPQ/9VuhQDDqCwBnudFAKJAyP5bOmgAtjq7/vnkiADLhkz+Y93pAEv+1v5QRZoAQJj4/uyIyv+daZn+la8UABYjE/98eekAuvrG/oTliwCJUK7/pX1EAJDKlP7r7/gAh7h2AGVeEf96SEb+RYKSAH/e+AFFf3b/HlLX/rxKE//lp8L+dRlC/0HqOP7VFpwAlztd/i0cG/+6fqT/IAbvAH9yYwHbNAL/Y2Cm/j6+fv9s3qgBS+KuAObixwA8ddr//PgUAda8zAAfwob+e0XA/6mtJP43YlsA3ypm/okBZgCdWhkA73pA//wG6QAHNhT/UnSuAIclNv8Pun0A43Cv/2S04f8q7fT/9K3i/vgSIQCrY5b/Susy/3VSIP5qqO0Az23QAeQJugCHPKn+s1yPAPSqaP/rLXz/RmO6AHWJtwDgH9cAKAlkABoQXwFE2VcACJcU/xpkOv+wpcsBNHZGAAcg/v70/vX/p5DC/31xF/+webUAiFTRAIoGHv9ZMBwAIZsO/xnwmgCNzW0BRnM+/xQoa/6Kmsf/Xt/i/52rJgCjsRn+LXYD/w7eFwHRvlH/dnvoAQ3VZf97N3v+G/alADJjTP+M1iD/YUFD/xgMHACuVk4BQPdgAKCHQwBCN/P/k8xg/xoGIf9iM1MBmdXQ/wK4Nv8Z2gsAMUP2/hKVSP8NGUgAKk/WACoEJgEbi5D/lbsXABKkhAD1VLj+eMZo/37aYAA4der/DR3W/kQvCv+nmoT+mCbGAEKyWf/ILqv/DWNT/9K7/f+qLSoBitF8ANaijQAM5pwAZiRw/gOTQwA013v/6as2/2KJPgD32if/59rsAPe/fwDDklQApbBc/xPUXv8RSuMAWCiZAcaTAf/OQ/X+8APa/z2N1f9ht2oAw+jr/l9WmgDRMM3+dtHx//B43wHVHZ8Ao3+T/w3aXQBVGET+RhRQ/70FjAFSYf7/Y2O//4RUhf9r2nT/cHouAGkRIADCoD//RN4nAdj9XACxac3/lcnDACrhC/8oonMACQdRAKXa2wC0FgD+HZL8/5LP4QG0h2AAH6NwALEL2/+FDMH+K04yAEFxeQE72Qb/bl4YAXCsbwAHD2AAJFV7AEeWFf/QSbwAwAunAdX1IgAJ5lwAoo4n/9daGwBiYVkAXk/TAFqd8ABf3H4BZrDiACQe4P4jH38A5+hzAVVTggDSSfX/L49y/0RBxQA7SD7/t4Wt/l15dv87sVH/6kWt/82AsQDc9DMAGvTRAUneTf+jCGD+lpXTAJ7+ywE2f4sAoeA7AARtFv/eKi3/0JJm/+yOuwAyzfX/CkpZ/jBPjgDeTIL/HqY/AOwMDf8xuPQAu3FmANpl/QCZObb+IJYqABnGkgHt8TgAjEQFAFukrP9Okbr+QzTNANvPgQFtcxEANo86ARX4eP+z/x4AwexC/wH/B//9wDD/E0XZAQPWAP9AZZIB330j/+tJs//5p+IA4a8KAWGiOgBqcKsBVKwF/4WMsv+G9Y4AYVp9/7rLuf/fTRf/wFxqAA/Gc//ZmPgAq7J4/+SGNQCwNsEB+vs1ANUKZAEix2oAlx/0/qzgV/8O7Rf//VUa/38ndP+saGQA+w5G/9TQiv/90/oAsDGlAA9Me/8l2qD/XIcQAQp+cv9GBeD/9/mNAEQUPAHx0r3/w9m7AZcDcQCXXK4A5z6y/9u34QAXFyH/zbVQADm4+P9DtAH/Wntd/ycAov9g+DT/VEKMACJ/5P/CigcBpm68ABURmwGavsb/1lA7/xIHjwBIHeIBx9n5AOihRwGVvskA2a9f/nGTQ/+Kj8f/f8wBAB22UwHO5pv/usw8AAp9Vf/oYBn//1n3/9X+rwHowVEAHCuc/gxFCACTGPgAEsYxAIY8IwB29hL/MVj+/uQVuv+2QXAB2xYB/xZ+NP+9NTH/cBmPACZ/N//iZaP+0IU9/4lFrgG+dpH/PGLb/9kN9f/6iAoAVP7iAMkffQHwM/v/H4OC/wKKMv/X17EB3wzu//yVOP98W0T/SH6q/nf/ZACCh+j/Dk+yAPqDxQCKxtAAediL/ncSJP8dwXoAECot/9Xw6wHmvqn/xiPk/m6tSADW3fH/OJSHAMB1Tv6NXc//j0GVABUSYv9fLPQBar9NAP5VCP7WbrD/Sa0T/qDEx//tWpAAwaxx/8ibiP7kWt0AiTFKAaTd1//RvQX/aew3/yofgQHB/+wALtk8AIpYu//iUuz/UUWX/46+EAENhggAf3ow/1FAnACr84sA7SP2AHqPwf7UepIAXyn/AVeETQAE1B8AER9OACctrf4Yjtn/XwkG/+NTBgBiO4L+Ph4hAAhz0wGiYYD/B7gX/nQcqP/4ipf/YvTwALp2ggBy+Ov/aa3IAaB8R/9eJKQBr0GS/+7xqv7KxsUA5EeK/i32bf/CNJ4AhbuwAFP8mv5Zvd3/qkn8AJQ6fQAkRDP+KkWx/6hMVv8mZMz/JjUjAK8TYQDh7v3/UVGHANIb//7rSWsACM9zAFJ/iABUYxX+zxOIAGSkZQBQ0E3/hM/t/w8DD/8hpm4AnF9V/yW5bwGWaiP/ppdMAHJXh/+fwkAADHof/+gHZf6td2IAmkfc/r85Nf+o6KD/4CBj/9qcpQCXmaMA2Q2UAcVxWQCVHKH+zxceAGmE4/825l7/ha3M/1y3nf9YkPz+ZiFaAJ9hAwC12pv/8HJ3AGrWNf+lvnMBmFvh/1hqLP/QPXEAlzR8AL8bnP9uNuwBDh6m/yd/zwHlxxwAvOS8/mSd6wD22rcBaxbB/86gXwBM75MAz6F1ADOmAv80dQr+STjj/5jB4QCEXoj/Zb/RACBr5f/GK7QBZNJ2AHJDmf8XWBr/WZpcAdx4jP+Qcs///HP6/yLOSACKhX//CLJ8AVdLYQAP5Vz+8EOD/3Z74/6SeGj/kdX/AYG7Rv/bdzYAAROtAC2WlAH4U0gAy+mpAY5rOAD3+SYBLfJQ/x7pZwBgUkYAF8lvAFEnHv+ht07/wuoh/0TjjP7YznQARhvr/2iQTwCk5l3+1oecAJq78v68FIP/JG2uAJ9w8QAFbpUBJKXaAKYdEwGyLkkAXSsg/vi97QBmm40AyV3D//GL/f8Pb2L/bEGj/ptPvv9JrsH+9igw/2tYC/7KYVX//cwS/3HyQgBuoML+0BK6AFEVPAC8aKf/fKZh/tKFjgA48on+KW+CAG+XOgFv1Y3/t6zx/yYGxP+5B3v/Lgv2APVpdwEPAqH/CM4t/xLKSv9TfHMB1I2dAFMI0f6LD+j/rDat/jL3hADWvdUAkLhpAN/++AD/k/D/F7xIAAczNgC8GbT+3LQA/1OgFACjvfP/OtHC/1dJPABqGDEA9fncABatpwB2C8P/E37tAG6fJf87Ui8AtLtWALyU0AFkJYX/B3DBAIG8nP9UaoH/heHKAA7sb/8oFGUArKwx/jM2Sv/7ubj/XZvg/7T54AHmspIASDk2/rI+uAB3zUgAue/9/z0P2gDEQzj/6iCrAS7b5ADQbOr/FD/o/6U1xwGF5AX/NM1rAErujP+WnNv+76yy//u93/4gjtP/2g+KAfHEUAAcJGL+FurHAD3t3P/2OSUAjhGO/50+GgAr7l/+A9kG/9UZ8AEn3K7/ms0w/hMNwP/0Ijb+jBCbAPC1Bf6bwTwApoAE/ySROP+W8NsAeDORAFKZKgGM7JIAa1z4Ab0KAwA/iPIA0ycYABPKoQGtG7r/0szv/inRov+2/p//rHQ0AMNn3v7NRTsANRYpAdowwgBQ0vIA0rzPALuhof7YEQEAiOFxAPq4PwDfHmL+TaiiADs1rwATyQr/i+DCAJPBmv/UvQz+Aciu/zKFcQFes1oArbaHAF6xcQArWdf/iPxq/3uGU/4F9UL/UjEnAdwC4ABhgbEATTtZAD0dmwHLq9z/XE6LAJEhtf+pGI0BN5azAIs8UP/aJ2EAApNr/zz4SACt5i8BBlO2/xBpov6J1FH/tLiGASfepP/dafsB73B9AD8HYQA/aOP/lDoMAFo84P9U1PwAT9eoAPjdxwFzeQEAJKx4ACCiu/85azH/kyoVAGrGKwE5SlcAfstR/4GHwwCMH7EA3YvCAAPe1wCDROcAsVay/nyXtAC4fCYBRqMRAPn7tQEqN+MA4qEsABfsbgAzlY4BXQXsANq3av5DGE0AKPXR/955mQClOR4AU308AEYmUgHlBrwAbd6d/zd2P//Nl7oA4yGV//6w9gHjseMAImqj/rArTwBqX04BufF6/7kOPQAkAcoADbKi//cLhACh5lwBQQG5/9QypQGNkkD/nvLaABWkfQDVi3oBQ0dXAMuesgGXXCsAmG8F/ycD7//Z//r/sD9H/0r1TQH6rhL/IjHj//Yu+/+aIzABfZ09/2okTv9h7JkAiLt4/3GGq/8T1dn+2F7R//wFPQBeA8oAAxq3/0C/K/8eFxUAgY1N/2Z4BwHCTIwAvK80/xFRlADoVjcB4TCsAIYqKv/uMi8AqRL+ABSTV/8Ow+//RfcXAO7lgP+xMXAAqGL7/3lH+ADzCJH+9uOZ/9upsf77i6X/DKO5/6Qoq/+Znxv+821b/94YcAES1ucAa521/sOTAP/CY2j/WYy+/7FCfv5quUIAMdofAPyungC8T+YB7ingANTqCAGIC7UApnVT/0TDXgAuhMkA8JhYAKQ5Rf6g4Cr/O9dD/3fDjf8ktHn+zy8I/67S3wBlxUT//1KNAfqJ6QBhVoUBEFBFAISDnwB0XWQALY2LAJisnf9aK1sAR5kuACcQcP/ZiGH/3MYZ/rE1MQDeWIb/gA88AM/Aqf/AdNH/ak7TAcjVt/8HDHr+3ss8/yFux/77anUA5OEEAXg6B//dwVT+cIUbAL3Iyf+Lh5YA6jew/z0yQQCYbKn/3FUB/3CH4wCiGroAz2C5/vSIawBdmTIBxmGXAG4LVv+Pda7/c9TIAAXKtwDtpAr+ue8+AOx4Ev5ie2P/qMnC/i7q1gC/hTH/Y6l3AL67IwFzFS3/+YNIAHAGe//WMbX+pukiAFzFZv795M3/AzvJASpiLgDbJSP/qcMmAF58wQGcK98AX0iF/njOvwB6xe//sbtP//4uAgH6p74AVIETAMtxpv/5H73+SJ3K/9BHSf/PGEgAChASAdJRTP9Y0MD/fvNr/+6NeP/Heer/iQw7/yTce/+Uszz+8AwdAEIAYQEkHib/cwFd/2Bn5//FnjsBwKTwAMrKOf8YrjAAWU2bASpM1wD0l+kAFzBRAO9/NP7jgiX/+HRdAXyEdgCt/sABButT/26v5wH7HLYAgfld/lS4gABMtT4Ar4C6AGQ1iP5tHeIA3ek6ARRjSgAAFqAAhg0VAAk0N/8RWYwAryI7AFSld//g4ur/B0im/3tz/wES1vYA+gdHAdncuQDUI0z/Jn2vAL1h0gBy7iz/Kbyp/i26mgBRXBYAhKDBAHnQYv8NUSz/y5xSAEc6Ff/Qcr/+MiaTAJrYwwBlGRIAPPrX/+mE6/9nr44BEA5cAI0fbv7u8S3/mdnvAWGoL//5VRABHK8+/zn+NgDe534Api11/hK9YP/kTDIAyPReAMaYeAFEIkX/DEGg/mUTWgCnxXj/RDa5/ynavABxqDAAWGm9ARpSIP+5XaQB5PDt/0K2NQCrxVz/awnpAcd4kP9OMQr/bapp/1oEH/8c9HH/SjoLAD7c9v95msj+kNKy/345gQEr+g7/ZW8cAS9W8f89Rpb/NUkF/x4angDRGlYAiu1KAKRfvACOPB3+onT4/7uvoACXEhAA0W9B/suGJ/9YbDH/gxpH/90b1/5oaV3/H+wf/ocA0/+Pf24B1EnlAOlDp/7DAdD/hBHd/zPZWgBD6zL/39KPALM1ggHpasYA2a3c/3DlGP+vml3+R8v2/zBChf8DiOb/F91x/utv1QCqeF/++90CAC2Cnv5pXtn/8jS0/tVELf9oJhwA9J5MAKHIYP/PNQ3/u0OUAKo2+AB3orL/UxQLACoqwAGSn6P/t+hvAE3lFf9HNY8AG0wiAPaIL//bJ7b/XODJAROODv9FtvH/o3b1AAltagGqtff/Ti/u/1TSsP/Va4sAJyYLAEgVlgBIgkUAzU2b/o6FFQBHb6z+4io7/7MA1wEhgPEA6vwNAbhPCABuHkn/9o29AKrP2gFKmkX/ivYx/5sgZAB9Smn/WlU9/yPlsf8+fcH/mVa8AUl41ADRe/b+h9Em/5c6LAFcRdb/DgxY//yZpv/9z3D/PE5T/+N8bgC0YPz/NXUh/qTcUv8pARv/JqSm/6Rjqf49kEb/wKYSAGv6QgDFQTIAAbMS//9oAf8rmSP/UG+oAG6vqAApaS3/2w7N/6TpjP4rAXYA6UPDALJSn/+KV3r/1O5a/5AjfP4ZjKQA+9cs/oVGa/9l41D+XKk3ANcqMQBytFX/IegbAazVGQA+sHv+IIUY/+G/PgBdRpkAtSpoARa/4P/IyIz/+eolAJU5jQDDOND//oJG/yCt8P8d3McAbmRz/4Tl+QDk6d//JdjR/rKx0f+3LaX+4GFyAIlhqP/h3qwApQ0xAdLrzP/8BBz+RqCXAOi+NP5T+F3/PtdNAa+vs/+gMkIAeTDQAD+p0f8A0sgA4LssAUmiUgAJsI//E0zB/x07pwEYK5oAHL6+AI28gQDo68v/6gBt/zZBnwA8WOj/ef2W/vzpg//GbikBU01H/8gWO/5q/fL/FQzP/+1CvQBaxsoB4ax/ADUWygA45oQAAVa3AG2+KgDzRK4BbeSaAMixegEjoLf/sTBV/1raqf/4mE4Ayv5uAAY0KwCOYkH/P5EWAEZqXQDoimsBbrM9/9OB2gHy0VwAI1rZAbaPav90Zdn/cvrd/63MBgA8lqMASaws/+9uUP/tTJn+oYz5AJXo5QCFHyj/rqR3AHEz1gCB5AL+QCLzAGvj9P+uasj/VJlGATIjEAD6Stj+7L1C/5n5DQDmsgT/3SnuAHbjef9eV4z+/ndcAEnv9v51V4AAE9OR/7Eu/ADlW/YBRYD3/8pNNgEICwn/mWCmANnWrf+GwAIBAM8AAL2uawGMhmQAnsHzAbZmqwDrmjMAjgV7/zyoWQHZDlz/E9YFAdOn/gAsBsr+eBLs/w9xuP+434sAKLF3/rZ7Wv+wpbAA903CABvqeADnANb/OyceAH1jkf+WREQBjd74AJl70v9uf5j/5SHWAYfdxQCJYQIADI/M/1EpvABzT4L/XgOEAJivu/98jQr/fsCz/wtnxgCVBi0A21W7AeYSsv9ItpgAA8a4/4Bw4AFhoeYA/mMm/zqfxQCXQtsAO0WP/7lw+QB3iC//e4KEAKhHX/9xsCgB6LmtAM9ddQFEnWz/ZgWT/jFhIQBZQW/+9x6j/3zZ3QFm+tgAxq5L/jk3EgDjBewB5dWtAMlt2gEx6e8AHjeeARmyagCbb7wBXn6MANcf7gFN8BAA1fIZASZHqADNul3+MdOM/9sAtP+GdqUAoJOG/266I//G8yoA85J3AIbrowEE8Yf/wS7B/me0T//hBLj+8naCAJKHsAHqbx4ARULV/ilgewB5Xir/sr/D/y6CKgB1VAj/6THW/u56bQAGR1kB7NN7APQNMP53lA4AchxW/0vtGf+R5RD+gWQ1/4aWeP6onTIAF0ho/+AxDgD/exb/l7mX/6pQuAGGthQAKWRlAZkhEABMmm8BVs7q/8CgpP6le13/Adik/kMRr/+pCzv/nik9/0m8Dv/DBon/FpMd/xRnA//2guP/eiiAAOIvGP4jJCAAmLq3/0XKFADDhcMA3jP3AKmrXgG3AKD/QM0SAZxTD//FOvn++1lu/zIKWP4zK9gAYvLGAfWXcQCr7MIBxR/H/+VRJgEpOxQA/WjmAJhdDv/28pL+1qnw//BmbP6gp+wAmtq8AJbpyv8bE/oBAkeF/68MPwGRt8YAaHhz/4L79wAR1Kf/PnuE//dkvQCb35gAj8UhAJs7LP+WXfABfwNX/19HzwGnVQH/vJh0/woXFwCJw10BNmJhAPAAqP+UvH8AhmuXAEz9qwBahMAAkhY2AOBCNv7muuX/J7bEAJT7gv9Bg2z+gAGgAKkxp/7H/pT/+waDALv+gf9VUj4Ashc6//6EBQCk1ScAhvyS/iU1Uf+bhlIAzafu/14ttP+EKKEA/m9wATZL2QCz5t0B616//xfzMAHKkcv/J3Yq/3WN/QD+AN4AK/syADap6gFQRNAAlMvz/pEHhwAG/gAA/Ll/AGIIgf8mI0j/0yTcASgaWQCoQMX+A97v/wJT1/60n2kAOnPCALp0av/l99v/gXbBAMqutwGmoUgAyWuT/u2ISgDp5moBaW+oAEDgHgEB5QMAZpev/8Lu5P/++tQAu+15AEP7YAHFHgsAt1/MAM1ZigBA3SUB/98e/7Iw0//xyFr/p9Fg/zmC3QAucsj/PbhCADe2GP5utiEAq77o/3JeHwAS3QgAL+f+AP9wUwB2D9f/rRko/sDBH//uFZL/q8F2/2XqNf6D1HAAWcBrAQjQGwC12Q//55XoAIzsfgCQCcf/DE+1/pO2yv8Tbbb/MdThAEqjywCv6ZQAGnAzAMHBCf8Ph/kAluOCAMwA2wEY8s0A7tB1/xb0cAAa5SIAJVC8/yYtzv7wWuH/HQMv/yrgTAC686cAIIQP/wUzfQCLhxgABvHbAKzlhf/21jIA5wvP/79+UwG0o6r/9TgYAbKk0/8DEMoBYjl2/42DWf4hMxgA85Vb//00DgAjqUP+MR5Y/7MbJP+ljLcAOr2XAFgfAABLqUIAQmXH/xjYxwF5xBr/Dk/L/vDiUf9eHAr/U8Hw/8zBg/9eD1YA2iidADPB0QAA8rEAZrn3AJ5tdAAmh1sA36+VANxCAf9WPOgAGWAl/+F6ogHXu6j/np0uADirogDo8GUBehYJADMJFf81Ge7/2R7o/n2plAAN6GYAlAklAKVhjQHkgykA3g/z//4SEQAGPO0BagNxADuEvQBccB4AadDVADBUs/+7eef+G9ht/6Lda/5J78P/+h85/5WHWf+5F3MBA6Od/xJw+gAZObv/oWCkAC8Q8wAMjfv+Q+q4/ykSoQCvBmD/oKw0/hiwt//GwVUBfHmJ/5cycv/cyzz/z+8FAQAma/837l7+RpheANXcTQF4EUX/VaS+/8vqUQAmMSX+PZB8AIlOMf6o9zAAX6T8AGmphwD95IYAQKZLAFFJFP/P0goA6mqW/14iWv/+nzn+3IVjAIuTtP4YF7kAKTke/71hTABBu9//4Kwl/yI+XwHnkPAATWp+/kCYWwAdYpsA4vs1/+rTBf+Qy97/pLDd/gXnGACzes0AJAGG/31Gl/5h5PwArIEX/jBa0f+W4FIBVIYeAPHELgBncer/LmV5/ih8+v+HLfL+Cfmo/4xsg/+Po6sAMq3H/1jejv/IX54AjsCj/wd1hwBvfBYA7AxB/kQmQf/jrv4A9PUmAPAy0P+hP/oAPNHvAHojEwAOIeb+Ap9xAGoUf//kzWAAidKu/rTUkP9ZYpoBIliLAKeicAFBbsUA8SWpAEI4g/8KyVP+hf27/7FwLf7E+wAAxPqX/+7o1v+W0c0AHPB2AEdMUwHsY1sAKvqDAWASQP923iMAcdbL/3p3uP9CEyQAzED5AJJZiwCGPocBaOllALxUGgAx+YEA0NZL/8+CTf9zr+sAqwKJ/6+RugE39Yf/mla1AWQ69v9txzz/UsyG/9cx5gGM5cD/3sH7/1GID/+zlaL/Fycd/wdfS/6/Ud4A8VFa/2sxyf/0050A3oyV/0HbOP699lr/sjudATDbNABiItcAHBG7/6+pGABcT6H/7MjCAZOP6gDl4QcBxagOAOszNQH9eK4AxQao/8p1qwCjFc4AclVa/w8pCv/CE2MAQTfY/qKSdAAyztT/QJId/56egwFkpYL/rBeB/301Cf8PwRIBGjEL/7WuyQGHyQ7/ZBOVANtiTwAqY4/+YAAw/8X5U/5olU//626I/lKALP9BKST+WNMKALt5uwBihscAq7yz/tIL7v9Ce4L+NOo9ADBxF/4GVnj/d7L1AFeByQDyjdEAynJVAJQWoQBnwzAAGTGr/4pDggC2SXr+lBiCANPlmgAgm54AVGk9ALHCCf+mWVYBNlO7APkodf9tA9f/NZIsAT8vswDC2AP+DlSIAIixDf9I87r/dRF9/9M60/9dT98AWlj1/4vRb/9G3i8ACvZP/8bZsgDj4QsBTn6z/z4rfgBnlCMAgQil/vXwlAA9M44AUdCGAA+Jc//Td+z/n/X4/wKGiP/mizoBoKT+AHJVjf8xprb/kEZUAVW2BwAuNV0ACaah/zeisv8tuLwAkhws/qlaMQB4svEBDnt//wfxxwG9QjL/xo9l/r3zh/+NGBj+S2FXAHb7mgHtNpwAq5LP/4PE9v+IQHEBl+g5APDacwAxPRv/QIFJAfypG/8ohAoBWsnB//x58AG6zikAK8ZhAJFktwDM2FD+rJZBAPnlxP5oe0n/TWhg/oK0CABoezkA3Mrl/2b50wBWDuj/tk7RAO/hpABqDSD/eEkR/4ZD6QBT/rUAt+xwATBAg//x2PP/QcHiAM7xZP5khqb/7crFADcNUQAgfGb/KOSxAHa1HwHnoIb/d7vKAACOPP+AJr3/psmWAM94GgE2uKwADPLM/oVC5gAiJh8BuHBQACAzpf6/8zcAOkmS/punzf9kaJj/xf7P/60T9wDuCsoA75fyAF47J//wHWb/Clya/+VU2/+hgVAA0FrMAfDbrv+eZpEBNbJM/zRsqAFT3msA0yRtAHY6OAAIHRYA7aDHAKrRnQCJRy8Aj1YgAMbyAgDUMIgBXKy6AOaXaQFgv+UAilC//vDYgv9iKwb+qMQxAP0SWwGQSXkAPZInAT9oGP+4pXD+futiAFDVYv97PFf/Uoz1Ad94rf8PxoYBzjzvAOfqXP8h7hP/pXGOAbB3JgCgK6b+71tpAGs9wgEZBEQAD4szAKSEav8idC7+qF/FAInUFwBInDoAiXBF/pZpmv/syZ0AF9Sa/4hS4/7iO93/X5XAAFF2NP8hK9cBDpNL/1mcef4OEk8Ak9CLAZfaPv+cWAgB0rhi/xSve/9mU+UA3EF0AZb6BP9cjtz/IvdC/8zhs/6XUZcARyjs/4o/PgAGT/D/t7m1AHYyGwA/48AAe2M6ATLgm/8R4d/+3OBN/w4sewGNgK8A+NTIAJY7t/+TYR0Alsy1AP0lRwCRVXcAmsi6AAKA+f9TGHwADlePAKgz9QF8l+f/0PDFAXy+uQAwOvYAFOnoAH0SYv8N/h//9bGC/2yOIwCrffL+jAwi/6WhogDOzWUA9xkiAWSROQAnRjkAdszL//IAogCl9B4AxnTiAIBvmf+MNrYBPHoP/5s6OQE2MsYAq9Md/2uKp/+ta8f/baHBAFlI8v/Oc1n/+v6O/rHKXv9RWTIAB2lC/xn+//7LQBf/T95s/yf5SwDxfDIA75iFAN3xaQCTl2IA1aF5/vIxiQDpJfn+KrcbALh35v/ZIKP/0PvkAYk+g/9PQAn+XjBxABGKMv7B/xYA9xLFAUM3aAAQzV//MCVCADecPwFAUkr/yDVH/u9DfQAa4N4A34ld/x7gyv8J3IQAxibrAWaNVgA8K1EBiBwaAOkkCP7P8pQApKI/ADMu4P9yME//Ca/iAN4Dwf8voOj//11p/g4q5gAailIB0Cv0ABsnJv9i0H//QJW2/wX60QC7PBz+MRna/6l0zf93EngAnHST/4Q1bf8NCsoAblOnAJ3bif8GA4L/Mqce/zyfL/+BgJ3+XgO9AAOmRABT39cAllrCAQ+oQQDjUzP/zatC/za7PAGYZi3/d5rhAPD3iABkxbL/i0ff/8xSEAEpzir/nMDd/9h79P/a2rn/u7rv//ysoP/DNBYAkK61/rtkc//TTrD/GwfBAJPVaP9ayQr/UHtCARYhugABB2P+Hs4KAOXqBQA1HtIAigjc/kc3pwBI4VYBdr68AP7BZQGr+az/Xp63/l0CbP+wXUz/SWNP/0pAgf72LkEAY/F//vaXZv8sNdD+O2bqAJqvpP9Y8iAAbyYBAP+2vv9zsA/+qTyBAHrt8QBaTD8APkp4/3rDbgB3BLIA3vLSAIIhLv6cKCkAp5JwATGjb/95sOsATM8O/wMZxgEp69UAVSTWATFcbf/IGB7+qOzDAJEnfAHsw5UAWiS4/0NVqv8mIxr+g3xE/++bI/82yaQAxBZ1/zEPzQAY4B0BfnGQAHUVtgDLn40A34dNALDmsP++5df/YyW1/zMViv8ZvVn/MTCl/pgt9wCqbN4AUMoFABtFZ/7MFoH/tPw+/tIBW/+Sbv7/26IcAN/81QE7CCEAzhD0AIHTMABroNAAcDvRAG1N2P4iFbn/9mM4/7OLE/+5HTL/VFkTAEr6Yv/hKsj/wNnN/9IQpwBjhF8BK+Y5AP4Ly/9jvD//d8H7/lBpNgDotb0Bt0Vw/9Crpf8vbbT/e1OlAJKiNP+aCwT/l+Na/5KJYf496Sn/Xio3/2yk7ACYRP4ACoyD/wpqT/7znokAQ7JC/rF7xv8PPiIAxVgq/5Vfsf+YAMb/lf5x/+Fao/992fcAEhHgAIBCeP7AGQn/Mt3NADHURgDp/6QAAtEJAN002/6s4PT/XjjOAfKzAv8fW6QB5i6K/73m3AA5Lz3/bwudALFbmAAc5mIAYVd+AMZZkf+nT2sA+U2gAR3p5v+WFVb+PAvBAJclJP65lvP/5NRTAayXtADJqZsA9DzqAI7rBAFD2jwAwHFLAXTzz/9BrJsAUR6c/1BIIf4S523/jmsV/n0ahP+wEDv/lsk6AM6pyQDQeeIAKKwO/5Y9Xv84OZz/jTyR/y1slf/ukZv/0VUf/sAM0gBjYl3+mBCXAOG53ACN6yz/oKwV/kcaH/8NQF3+HDjGALE++AG2CPEApmWU/05Rhf+B3tcBvKmB/+gHYQAxcDz/2eX7AHdsigAnE3v+gzHrAIRUkQCC5pT/GUq7AAX1Nv+52/EBEsLk//HKZgBpccoAm+tPABUJsv+cAe8AyJQ9AHP30v8x3YcAOr0IASMuCQBRQQX/NJ65/310Lv9KjA3/0lys/pMXRwDZ4P3+c2y0/5E6MP7bsRj/nP88AZqT8gD9hlcANUvlADDD3v8frzL/nNJ4/9Aj3v8S+LMBAgpl/53C+P+ezGX/aP7F/08+BACyrGUBYJL7/0EKnAACiaX/dATnAPLXAQATIx3/K6FPADuV9gH7QrAAyCED/1Bujv/DoREB5DhC/3svkf6EBKQAQ66sABn9cgBXYVcB+txUAGBbyP8lfTsAE0F2AKE08f/trAb/sL///wFBgv7fvuYAZf3n/5IjbQD6HU0BMQATAHtamwEWViD/2tVBAG9dfwA8Xan/CH+2ABG6Dv79ifb/1Rkw/kzuAP/4XEb/Y+CLALgJ/wEHpNAAzYPGAVfWxwCC1l8A3ZXeABcmq/7FbtUAK3OM/texdgBgNEIBdZ7tAA5Atv8uP67/nl++/+HNsf8rBY7/rGPU//S7kwAdM5n/5HQY/h5lzwAT9pb/hucFAH2G4gFNQWIA7IIh/wVuPgBFbH//B3EWAJEUU/7Coef/g7U8ANnRsf/llNT+A4O4AHWxuwEcDh//sGZQADJUl/99Hzb/FZ2F/xOziwHg6BoAInWq/6f8q/9Jjc7+gfojAEhP7AHc5RT/Kcqt/2NM7v/GFuD/bMbD/ySNYAHsnjv/amRXAG7iAgDj6t4Aml13/0pwpP9DWwL/FZEh/2bWif+v5mf+o/amAF33dP6n4Bz/3AI5AavOVAB75BH/G3h3AHcLkwG0L+H/aMi5/qUCcgBNTtQALZqx/xjEef5SnbYAWhC+AQyTxQBf75j/C+tHAFaSd/+shtYAPIPEAKHhgQAfgnj+X8gzAGnn0v86CZT/K6jd/3ztjgDG0zL+LvVnAKT4VACYRtD/tHWxAEZPuQDzSiAAlZzPAMXEoQH1Ne8AD132/ovwMf/EWCT/oiZ7AIDInQGuTGf/raki/tgBq/9yMxEAiOTCAG6WOP5q9p8AE7hP/5ZN8P+bUKIAADWp/x2XVgBEXhAAXAdu/mJ1lf/5Teb//QqMANZ8XP4jdusAWTA5ARY1pgC4kD3/s//CANb4Pf47bvYAeRVR/qYD5ABqQBr/ReiG//LcNf4u3FUAcZX3/2GzZ/++fwsAh9G2AF80gQGqkM7/esjM/6hkkgA8kJX+RjwoAHo0sf/202X/ru0IAAczeAATH60Afu+c/4+9ywDEgFj/6YXi/x59rf/JbDIAe2Q7//6jAwHdlLX/1og5/t60if/PWDb/HCH7/0PWNAHS0GQAUapeAJEoNQDgb+f+Ixz0/+LHw/7uEeYA2dmk/qmd3QDaLqIBx8+j/2xzogEOYLv/djxMALifmADR50f+KqS6/7qZM/7dq7b/oo6tAOsvwQAHixABX6RA/xDdpgDbxRAAhB0s/2RFdf8861j+KFGtAEe+Pf+7WJ0A5wsXAO11pADhqN//mnJ0/6OY8gEYIKoAfWJx/qgTTAARndz+mzQFABNvof9HWvz/rW7wAArGef/9//D/QnvSAN3C1/55oxH/4QdjAL4xtgBzCYUB6BqK/9VEhAAsd3r/s2IzAJVaagBHMub/Cpl2/7FGGQClV80AN4rqAO4eYQBxm88AYpl/ACJr2/51cqz/TLT//vI5s//dIqz+OKIx/1MD//9x3b3/vBnk/hBYWf9HHMb+FhGV//N5/v9rymP/Cc4OAdwvmQBriScBYTHC/5Uzxf66Ogv/ayvoAcgGDv+1hUH+3eSr/3s+5wHj6rP/Ir3U/vS7+QC+DVABglkBAN+FrQAJ3sb/Qn9KAKfYXf+bqMYBQpEAAERmLgGsWpoA2IBL/6AoMwCeERsBfPAxAOzKsP+XfMD/JsG+AF+2PQCjk3z//6Uz/xwoEf7XYE4AVpHa/h8kyv9WCQUAbynI/+1sYQA5PiwAdbgPAS3xdACYAdz/naW8APoPgwE8LH3/Qdz7/0syuAA1WoD/51DC/4iBfwEVErv/LTqh/0eTIgCu+Qv+I40dAO9Esf9zbjoA7r6xAVf1pv++Mff/klO4/60OJ/+S12gAjt94AJXIm//Uz5EBELXZAK0gV///I7UAd9+hAcjfXv9GBrr/wENV/zKpmACQGnv/OPOz/hREiAAnjLz+/dAF/8hzhwErrOX/nGi7AJf7pwA0hxcAl5lIAJPFa/6UngX/7o/OAH6Zif9YmMX+B0SnAPyfpf/vTjb/GD83/ybeXgDttwz/zszSABMn9v4eSucAh2wdAbNzAAB1dnQBhAb8/5GBoQFpQ40AUiXi/+7i5P/M1oH+ontk/7l56gAtbOcAQgg4/4SIgACs4EL+r528AObf4v7y20UAuA53AVKiOAByexQAomdV/zHvY/6ch9cAb/+n/ifE1gCQJk8B+ah9AJthnP8XNNv/lhaQACyVpf8of7cAxE3p/3aB0v+qh+b/1nfGAOnwIwD9NAf/dWYw/xXMmv+ziLH/FwIDAZWCWf/8EZ8BRjwaAJBrEQC0vjz/OLY7/25HNv/GEoH/leBX/98VmP+KFrb/+pzNAOwt0P9PlPIBZUbRAGdOrgBlkKz/mIjtAb/CiABxUH0BmASNAJuWNf/EdPUA73JJ/hNSEf98fer/KDS/ACrSnv+bhKUAsgUqAUBcKP8kVU3/suR2AIlCYP5z4kIAbvBF/pdvUACnruz/42xr/7zyQf+3Uf8AOc61/y8itf/V8J4BR0tfAJwoGP9m0lEAq8fk/5oiKQDjr0sAFe/DAIrlXwFMwDEAdXtXAePhggB9Pj//AsarAP4kDf6Rus4AlP/0/yMApgAeltsBXOTUAFzGPP4+hcj/ySk7AH3ubf+0o+4BjHpSAAkWWP/FnS//mV45AFgetgBUoVUAspJ8AKamB/8V0N8AnLbyAJt5uQBTnK7+mhB2/7pT6AHfOnn/HRdYACN9f/+qBZX+pAyC/5vEHQChYIgAByMdAaIl+wADLvL/ANm8ADmu4gHO6QIAObuI/nu9Cf/JdX//uiTMAOcZ2ABQTmkAE4aB/5TLRACNUX3++KXI/9aQhwCXN6b/JutbABUumgDf/pb/I5m0/32wHQErYh7/2Hrm/+mgDAA5uQz+8HEH/wUJEP4aW2wAbcbLAAiTKACBhuT/fLoo/3JihP6mhBcAY0UsAAny7v+4NTsAhIFm/zQg8/6T38j/e1Oz/oeQyf+NJTgBlzzj/1pJnAHLrLsAUJcv/16J5/8kvzv/4dG1/0rX1f4GdrP/mTbBATIA5wBonUgBjOOa/7biEP5g4Vz/cxSq/gb6TgD4S63/NVkG/wC0dgBIrQEAQAjOAa6F3wC5PoX/1gtiAMUf0ACrp/T/Fue1AZbauQD3qWEBpYv3/y94lQFn+DMAPEUc/hmzxAB8B9r+OmtRALjpnP/8SiQAdrxDAI1fNf/eXqX+Lj01AM47c/8v7Pr/SgUgAYGa7v9qIOIAebs9/wOm8f5Dqqz/Hdiy/xfJ/AD9bvMAyH05AG3AYP80c+4AJnnz/8k4IQDCdoIAS2AZ/6oe5v4nP/0AJC36//sB7wCg1FwBLdHtAPMhV/7tVMn/1BKd/tRjf//ZYhD+i6zvAKjJgv+Pwan/7pfBAddoKQDvPaX+AgPyABbLsf6xzBYAlYHV/h8LKf8An3n+oBly/6JQyACdlwsAmoZOAdg2/AAwZ4UAadzFAP2oTf41sxcAGHnwAf8uYP9rPIf+Ys35/z/5d/94O9P/crQ3/ltV7QCV1E0BOEkxAFbGlgBd0aAARc22//RaKwAUJLAAenTdADOnJwHnAT//DcWGAAPRIv+HO8oAp2ROAC/fTAC5PD4AsqZ7AYQMof89risAw0WQAH8vvwEiLE4AOeo0Af8WKP/2XpIAU+SAADxO4P8AYNL/ma/sAJ8VSQC0c8T+g+FqAP+nhgCfCHD/eETC/7DExv92MKj/XakBAHDIZgFKGP4AE40E/o4+PwCDs7v/TZyb/3dWpACq0JL/0IWa/5SbOv+ieOj+/NWbAPENKgBeMoMAs6pwAIxTl/83d1QBjCPv/5ktQwHsrycANpdn/54qQf/E74f+VjXLAJVhL/7YIxH/RgNGAWckWv8oGq0AuDANAKPb2f9RBgH/3aps/unQXQBkyfn+ViQj/9GaHgHjyfv/Ar2n/mQ5AwANgCkAxWRLAJbM6/+RrjsAePiV/1U34QBy0jX+x8x3AA73SgE/+4EAQ2iXAYeCUABPWTf/dead/xlgjwDVkQUARfF4AZXzX/9yKhQAg0gCAJo1FP9JPm0AxGaYACkMzP96JgsB+gqRAM99lAD29N7/KSBVAXDVfgCi+VYBR8Z//1EJFQFiJwT/zEctAUtviQDqO+cAIDBf/8wfcgEdxLX/M/Gn/l1tjgBokC0A6wy1/zRwpABM/sr/rg6iAD3rk/8rQLn+6X3ZAPNYp/5KMQgAnMxCAHzWewAm3XYBknDsAHJisQCXWccAV8VwALmVoQAsYKUA+LMU/7zb2P4oPg0A846NAOXjzv+syiP/dbDh/1JuJgEq9Q7/FFNhADGrCgDyd3gAGeg9ANTwk/8Eczj/kRHv/soR+//5EvX/Y3XvALgEs//27TP/Je+J/6Zwpv9RvCH/ufqO/za7rQDQcMkA9ivkAWi4WP/UNMT/M3Vs//51mwAuWw//Vw6Q/1fjzABTGlMBn0zjAJ8b1QEYl2wAdZCz/onRUgAmnwoAc4XJAN+2nAFuxF3/OTzpAAWnaf+axaQAYCK6/5OFJQHcY74AAadU/xSRqwDCxfv+X06F//z48//hXYP/u4bE/9iZqgAUdp7+jAF2AFaeDwEt0yn/kwFk/nF0TP/Tf2wBZw8wAMEQZgFFM1//a4CdAImr6QBafJABaqG2AK9M7AHIjaz/ozpoAOm0NP/w/Q7/onH+/ybviv40LqYA8WUh/oO6nABv0D7/fF6g/x+s/gBwrjj/vGMb/0OK+wB9OoABnJiu/7IM9//8VJ4AUsUO/qzIU/8lJy4Bas+nABi9IgCDspAAztUEAKHi0gBIM2n/YS27/0643/+wHfsAT6BW/3QlsgBSTdUBUlSN/+Jl1AGvWMf/9V73Aax2bf+mub4Ag7V4AFf+Xf+G8En/IPWP/4uiZ/+zYhL+2cxwAJPfeP81CvMApoyWAH1QyP8Obdv/W9oB//z8L/5tnHT/czF/AcxX0/+Uytn/GlX5/w71hgFMWan/8i3mADtirP9ySYT+Tpsx/55+VAAxryv/ELZU/51nIwBowW3/Q92aAMmsAf4IolgApQEd/32b5f8emtwBZ+9cANwBbf/KxgEAXgKOASQ2LADr4p7/qvvW/7lNCQBhSvIA26OV//Ajdv/fclj+wMcDAGolGP/JoXb/YVljAeA6Z/9lx5P+3jxjAOoZOwE0hxsAZgNb/qjY6wDl6IgAaDyBAC6o7gAnv0MAS6MvAI9hYv842KgBqOn8/yNvFv9cVCsAGshXAVv9mADKOEYAjghNAFAKrwH8x0wAFm5S/4EBwgALgD0BVw6R//3evgEPSK4AVaNW/jpjLP8tGLz+Gs0PABPl0v74Q8MAY0e4AJrHJf+X83n/JjNL/8lVgv4sQfoAOZPz/pIrO/9ZHDUAIVQY/7MzEv69RlMAC5yzAWKGdwCeb28Ad5pJ/8g/jP4tDQ3/msAC/lFIKgAuoLn+LHAGAJLXlQEasGgARBxXAewymf+zgPr+zsG//6Zcif41KO8A0gHM/qitIwCN8y0BJDJt/w/ywv/jn3r/sK/K/kY5SAAo3zgA0KI6/7diXQAPbwwAHghM/4R/9v8t8mcARbUP/wrRHgADs3kA8ejaAXvHWP8C0soBvIJR/15l0AFnJC0ATMEYAV8a8f+lorsAJHKMAMpCBf8lOJMAmAvzAX9V6P/6h9QBubFxAFrcS/9F+JIAMm8yAFwWUAD0JHP+o2RS/xnBBgF/PSQA/UMe/kHsqv+hEdf+P6+MADd/BABPcOkAbaAoAI9TB/9BGu7/2amM/05evf8Ak77/k0e6/mpNf//pnekBh1ft/9AN7AGbbST/tGTaALSjEgC+bgkBET97/7OItP+le3v/kLxR/kfwbP8ZcAv/49oz/6cy6v9yT2z/HxNz/7fwYwDjV4//SNn4/2apXwGBlZUA7oUMAePMIwDQcxoBZgjqAHBYjwGQ+Q4A8J6s/mRwdwDCjZn+KDhT/3mwLgAqNUz/nr+aAFvRXACtDRABBUji/8z+lQBQuM8AZAl6/nZlq//8ywD+oM82ADhI+QE4jA3/CkBr/ltlNP/htfgBi/+EAOaREQDpOBcAdwHx/9Wpl/9jYwn+uQ+//61nbQGuDfv/slgH/hs7RP8KIQL/+GE7ABoekgGwkwoAX3nPAbxYGAC5Xv7+czfJABgyRgB4NQYAjkKSAOTi+f9owN4BrUTbAKK4JP+PZon/nQsXAH0tYgDrXeH+OHCg/0Z08wGZ+Tf/gScRAfFQ9ABXRRUBXuRJ/05CQf/C4+cAPZJX/62bF/9wdNv+2CYL/4O6hQBe1LsAZC9bAMz+r//eEtf+rURs/+PkT/8m3dUAo+OW/h++EgCgswsBClpe/9yuWACj0+X/x4g0AIJf3f+MvOf+i3GA/3Wr7P4x3BT/OxSr/+RtvAAU4SD+wxCuAOP+iAGHJ2kAlk3O/9Lu4gA31IT+7zl8AKrCXf/5EPf/GJc+/wqXCgBPi7L/ePLKABrb1QA+fSP/kAJs/+YhU/9RLdgB4D4RANbZfQBimZn/s7Bq/oNdiv9tPiT/snkg/3j8RgDc+CUAzFhnAYDc+//s4wcBajHG/zw4awBjcu4A3MxeAUm7AQBZmiIATtml/w7D+f8J5v3/zYf1ABr8B/9UzRsBhgJwACWeIADnW+3/v6rM/5gH3gBtwDEAwaaS/+gTtf9pjjT/ZxAbAf3IpQDD2QT/NL2Q/3uboP5Xgjb/Tng9/w44KQAZKX3/V6j1ANalRgDUqQb/29PC/khdpP/FIWf/K46NAIPhrAD0aRwAREThAIhUDf+COSj+i004AFSWNQA2X50AkA2x/l9zugB1F3b/9Kbx/wu6hwCyasv/YdpdACv9LQCkmAQAi3bvAGABGP7rmdP/qG4U/zLvsAByKegAwfo1AP6gb/6Iein/YWxDANeYF/+M0dQAKr2jAMoqMv9qar3/vkTZ/+k6dQDl3PMBxQMEACV4Nv4EnIb/JD2r/qWIZP/U6A4AWq4KANjGQf8MA0AAdHFz//hnCADnfRL/oBzFAB64IwHfSfn/exQu/oc4Jf+tDeUBd6Ei//U9SQDNfXAAiWiGANn2Hv/tjo8AQZ9m/2ykvgDbda3/IiV4/shFUAAffNr+Shug/7qax/9Hx/wAaFGfARHIJwDTPcABGu5bAJTZDAA7W9X/C1G3/4Hmev9yy5EBd7RC/0iKtADglWoAd1Jo/9CMKwBiCbb/zWWG/xJlJgBfxab/y/GTAD7Qkf+F9vsAAqkOAA33uACOB/4AJMgX/1jN3wBbgTT/FboeAI/k0gH36vj/5kUf/rC6h//uzTQBi08rABGw2f4g80MA8m/pACwjCf/jclEBBEcM/yZpvwAHdTL/UU8QAD9EQf+dJG7/TfED/+It+wGOGc4AeHvRARz+7v8FgH7/W97X/6IPvwBW8EkAh7lR/izxowDU29L/cKKbAM9ldgCoSDj/xAU0AEis8v9+Fp3/kmA7/6J5mP6MEF8Aw/7I/lKWogB3K5H+zKxO/6bgnwBoE+3/9X7Q/+I71QB12cUAmEjtANwfF/4OWuf/vNRAATxl9v9VGFYAAbFtAJJTIAFLtsAAd/HgALntG/+4ZVIB6yVN//2GEwDo9noAPGqzAMMLDABtQusBfXE7AD0opACvaPAAAi+7/zIMjQDCi7X/h/poAGFc3v/Zlcn/y/F2/0+XQwB6jtr/lfXvAIoqyP5QJWH/fHCn/ySKV/+CHZP/8VdO/8xhEwGx0Rb/9+N//mN3U//UGcYBELOzAJFNrP5ZmQ7/2r2nAGvpO/8jIfP+LHBw/6F/TwHMrwoAKBWK/mh05ADHX4n/hb6o/5Kl6gG3YycAt9w2/v/ehQCi23n+P+8GAOFmNv/7EvYABCKBAYckgwDOMjsBD2G3AKvYh/9lmCv/lvtbACaRXwAizCb+soxT/xmB8/9MkCUAaiQa/naQrP9EuuX/a6HV/y6jRP+Vqv0AuxEPANqgpf+rI/YBYA0TAKXLdQDWa8D/9HuxAWQDaACy8mH/+0yC/9NNKgH6T0b/P/RQAWll9gA9iDoB7lvVAA47Yv+nVE0AEYQu/jmvxf+5PrgATEDPAKyv0P6vSiUAihvT/pR9wgAKWVEAqMtl/yvV0QHr9TYAHiPi/wl+RgDifV7+nHUU/zn4cAHmMED/pFymAeDW5v8keI8ANwgr//sB9QFqYqUASmtq/jUENv9aspYBA3h7//QFWQFy+j3//plSAU0PEQA57loBX9/mAOw0L/5nlKT/ec8kARIQuf9LFEoAuwtlAC4wgf8W79L/TeyB/29NzP89SGH/x9n7/yrXzACFkcn/OeaSAetkxgCSSSP+bMYU/7ZP0v9SZ4gA9mywACIRPP8TSnL+qKpO/53vFP+VKagAOnkcAE+zhv/neYf/rtFi//N6vgCrps0A1HQwAB1sQv+i3rYBDncVANUn+f/+3+T/t6XGAIW+MAB80G3/d69V/wnReQEwq73/w0eGAYjbM/+2W43+MZ9IACN29f9wuuP/O4kfAIksowByZzz+CNWWAKIKcf/CaEgA3IN0/7JPXADL+tX+XcG9/4L/Iv7UvJcAiBEU/xRlU//UzqYA5e5J/5dKA/+oV9cAm7yF/6aBSQDwT4X/stNR/8tIo/7BqKUADqTH/h7/zABBSFsBpkpm/8gqAP/CceP/QhfQAOXYZP8Y7xoACuk+/3sKsgEaJK7/d9vHAS2jvgAQqCoApjnG/xwaGgB+pecA+2xk/z3lef86dooATM8RAA0icP5ZEKgAJdBp/yPJ1/8oamX+Bu9yAChn4v72f27/P6c6AITwjgAFnlj/gUme/15ZkgDmNpIACC2tAE+pAQBzuvcAVECDAEPg/f/PvUAAmhxRAS24Nv9X1OD/AGBJ/4Eh6wE0QlD/+66b/wSzJQDqpF3+Xa/9AMZFV//gai4AYx3SAD68cv8s6ggAqa/3/xdtif/lticAwKVe/vVl2QC/WGAAxF5j/2ruC/41fvMAXgFl/y6TAgDJfHz/jQzaAA2mnQEw++3/m/p8/2qUkv+2DcoAHD2nANmYCP7cgi3/yOb/ATdBV/9dv2H+cvsOACBpXAEaz40AGM8N/hUyMP+6lHT/0yvhACUiov6k0ir/RBdg/7bWCP/1dYn/QsMyAEsMU/5QjKQACaUkAeRu4wDxEVoBGTTUAAbfDP+L8zkADHFLAfa3v//Vv0X/5g+OAAHDxP+Kqy//QD9qARCp1v/PrjgBWEmF/7aFjACxDhn/k7g1/wrjof942PT/SU3pAJ3uiwE7QekARvvYASm4mf8gy3AAkpP9AFdlbQEsUoX/9JY1/16Y6P87XSf/WJPc/05RDQEgL/z/oBNy/11rJ/92ENMBuXfR/+Pbf/5Yaez/om4X/ySmbv9b7N3/Qup0AG8T9P4K6RoAILcG/gK/8gDanDX+KTxG/6jsbwB5uX7/7o7P/zd+NADcgdD+UMyk/0MXkP7aKGz/f8qkAMshA/8CngAAJWC8/8AxSgBtBAAAb6cK/lvah//LQq3/lsLiAMn9Bv+uZnkAzb9uADXCBABRKC3+I2aP/wxsxv8QG+j//Ee6AbBucgCOA3UBcU2OABOcxQFcL/wANegWATYS6wAuI73/7NSBAAJg0P7I7sf/O6+k/5Ir5wDC2TT/A98MAIo2sv5V688A6M8iADE0Mv+mcVn/Ci3Y/z6tHABvpfYAdnNb/4BUPACnkMsAVw3zABYe5AGxcZL/garm/vyZgf+R4SsARucF/3ppfv5W9pT/biWa/tEDWwBEkT4A5BCl/zfd+f6y0lsAU5Li/kWSugBd0mj+EBmtAOe6JgC9eoz/+w1w/2luXQD7SKoAwBff/xgDygHhXeQAmZPH/m2qFgD4Zfb/snwM/7L+Zv43BEEAfda0ALdgkwAtdRf+hL/5AI+wy/6Itzb/kuqxAJJlVv8se48BIdGYAMBaKf5TD33/1axSANepkAAQDSIAINFk/1QS+QHFEez/2brmADGgsP9vdmH/7WjrAE87XP5F+Qv/I6xKARN2RADefKX/tEIj/1au9gArSm//fpBW/+TqWwDy1Rj+RSzr/9y0IwAI+Af/Zi9c//DNZv9x5qsBH7nJ/8L2Rv96EbsAhkbH/5UDlv91P2cAQWh7/9Q2EwEGjVgAU4bz/4g1ZwCpG7QAsTEYAG82pwDDPdf/HwFsATwqRgC5A6L/wpUo//Z/Jv6+dyb/PXcIAWCh2/8qy90BsfKk//WfCgB0xAAABV3N/oB/swB97fb/laLZ/1clFP6M7sAACQnBAGEB4gAdJgoAAIg//+VI0v4mhlz/TtrQAWgkVP8MBcH/8q89/7+pLgGzk5P/cb6L/n2sHwADS/z+1yQPAMEbGAH/RZX/boF2AMtd+QCKiUD+JkYGAJl03gChSnsAwWNP/3Y7Xv89DCsBkrGdAC6TvwAQ/yYACzMfATw6Yv9vwk0Bmlv0AIwokAGtCvsAy9Ey/myCTgDktFoArgf6AB+uPAApqx4AdGNS/3bBi/+7rcb+2m84ALl72AD5njQANLRd/8kJW/84Lab+hJvL/zrobgA001n//QCiAQlXtwCRiCwBXnr1AFW8qwGTXMYAAAhoAB5frgDd5jQB9/fr/4muNf8jFcz/R+PWAehSwgALMOP/qkm4/8b7/P4scCIAg2WD/0iouwCEh33/imhh/+64qP/zaFT/h9ji/4uQ7QC8iZYBUDiM/1app//CThn/3BG0/xENwQB1idT/jeCXADH0rwDBY6//E2OaAf9BPv+c0jf/8vQD//oOlQCeWNn/nc+G/vvoHAAunPv/qzi4/+8z6gCOioP/Gf7zAQrJwgA/YUsA0u+iAMDIHwF11vMAGEfe/jYo6P9Mt2/+kA5X/9ZPiP/YxNQAhBuM/oMF/QB8bBP/HNdLAEzeN/7ptj8ARKu//jRv3v8KaU3/UKrrAI8YWP8t53kAlIHgAT32VAD9Ltv/70whADGUEv7mJUUAQ4YW/o6bXgAfndP+1Soe/wTk9/78sA3/JwAf/vH0//+qLQr+/d75AN5yhAD/Lwb/tKOzAVRel/9Z0VL+5TSp/9XsAAHWOOT/h3eX/3DJwQBToDX+BpdCABKiEQDpYVsAgwVOAbV4Nf91Xz//7XW5AL9+iP+Qd+kAtzlhAS/Ju/+npXcBLWR+ABViBv6Rll//eDaYANFiaACPbx7+uJT5AOvYLgD4ypT/OV8WAPLhowDp9+j/R6sT/2f0Mf9UZ13/RHn0AVLgDQApTyv/+c6n/9c0Ff7AIBb/9288AGVKJv8WW1T+HRwN/8bn1/70msgA34ntANOEDgBfQM7/ET73/+mDeQFdF00Azcw0/lG9iAC024oBjxJeAMwrjP68r9sAb2KP/5c/ov/TMkf+E5I1AJItU/6yUu7/EIVU/+LGXf/JYRT/eHYj/3Iy5/+i5Zz/0xoMAHInc//O1IYAxdmg/3SBXv7H19v/S9/5Af10tf/o12j/5IL2/7l1VgAOBQgA7x09Ae1Xhf99kon+zKjfAC6o9QCaaRYA3NSh/2tFGP+J2rX/8VTG/4J60/+NCJn/vrF2AGBZsgD/EDD+emBp/3U26P8ifmn/zEOmAOg0iv/TkwwAGTYHACwP1/4z7C0AvkSBAWqT4QAcXS3+7I0P/xE9oQDcc8AA7JEY/m+oqQDgOj//f6S8AFLqSwHgnoYA0URuAdmm2QBG4aYBu8GP/xAHWP8KzYwAdcCcARE4JgAbfGwBq9c3/1/91ACbh6j/9rKZ/ppESgDoPWD+aYQ7ACFMxwG9sIL/CWgZ/kvGZv/pAXAAbNwU/3LmRgCMwoX/OZ6k/pIGUP+pxGEBVbeCAEae3gE77er/YBka/+ivYf8Lefj+WCPCANu0/P5KCOMAw+NJAbhuof8x6aQBgDUvAFIOef/BvjoAMK51/4QXIAAoCoYBFjMZ//ALsP9uOZIAdY/vAZ1ldv82VEwAzbgS/y8ESP9OcFX/wTJCAV0QNP8IaYYADG1I/zqc+wCQI8wALKB1/jJrwgABRKX/b26iAJ5TKP5M1uoAOtjN/6tgk/8o43IBsOPxAEb5twGIVIv/PHr3/o8Jdf+xron+SfePAOy5fv8+Gff/LUA4/6H0BgAiOTgBacpTAICT0AAGZwr/SopB/2FQZP/WriH/MoZK/26Xgv5vVKwAVMdL/vg7cP8I2LIBCbdfAO4bCP6qzdwAw+WHAGJM7f/iWxoBUtsn/+G+xwHZyHn/UbMI/4xBzgCyz1f++vwu/2hZbgH9vZ7/kNae/6D1Nv81t1wBFcjC/5IhcQHRAf8A62or/6c06ACd5d0AMx4ZAPrdGwFBk1f/T3vEAEHE3/9MLBEBVfFEAMq3+f9B1NT/CSGaAUc7UACvwjv/jUgJAGSg9ADm0DgAOxlL/lDCwgASA8j+oJ9zAISP9wFvXTn/Ou0LAYbeh/96o2wBeyu+//u9zv5Qtkj/0PbgARE8CQChzyYAjW1bANgP0/+ITm4AYqNo/xVQef+tsrcBf48EAGg8Uv7WEA3/YO4hAZ6U5v9/gT7/M//S/z6N7P6dN+D/cif0AMC8+v/kTDUAYlRR/63LPf6TMjf/zOu/ADTF9ABYK9P+G793ALznmgBCUaEAXMGgAfrjeAB7N+IAuBFIAIWoCv4Wh5z/KRln/zDKOgC6lVH/vIbvAOu1vf7Zi7z/SjBSAC7a5QC9/fsAMuUM/9ONvwGA9Bn/qed6/lYvvf+Etxf/JbKW/zOJ/QDITh8AFmkyAII8AACEo1v+F+e7AMBP7wCdZqT/wFIUARi1Z//wCeoAAXuk/4XpAP/K8vIAPLr1APEQx//gdJ7+v31b/+BWzwB5Jef/4wnG/w+Z7/956Nn+S3BSAF8MOf4z1mn/lNxhAcdiJACc0Qz+CtQ0ANm0N/7Uquj/2BRU/536hwCdY3/+Ac4pAJUkRgE2xMn/V3QA/uurlgAbo+oAyoe0ANBfAP57nF0Atz5LAInrtgDM4f//1ovS/wJzCP8dDG8ANJwBAP0V+/8lpR/+DILTAGoSNf4qY5oADtk9/tgLXP/IxXD+kybHACT8eP5rqU0AAXuf/89LZgCjr8QALAHwAHi6sP4NYkz/7Xzx/+iSvP/IYOAAzB8pANDIDQAV4WD/r5zEAPfQfgA+uPT+AqtRAFVzngA2QC3/E4pyAIdHzQDjL5MB2udCAP3RHAD0D63/Bg92/hCW0P+5FjL/VnDP/0tx1wE/kiv/BOET/uMXPv8O/9b+LQjN/1fFl/7SUtf/9fj3/4D4RgDh91cAWnhGANX1XAANheIAL7UFAVyjaf8GHoX+6LI9/+aVGP8SMZ4A5GQ9/nTz+/9NS1wBUduT/0yj/v6N1fYA6CWY/mEsZADJJTIB1PQ5AK6rt//5SnAAppweAN7dYf/zXUn++2Vk/9jZXf/+irv/jr40/zvLsf/IXjQAc3Ke/6WYaAF+Y+L/dp30AWvIEADBWuUAeQZYAJwgXf598dP/Du2d/6WaFf+44Bb/+hiY/3FNHwD3qxf/7bHM/zSJkf/CtnIA4OqVAApvZwHJgQQA7o5OADQGKP9u1aX+PM/9AD7XRQBgYQD/MS3KAHh5Fv/rizABxi0i/7YyGwGD0lv/LjaAAK97af/GjU7+Q/Tv//U2Z/5OJvL/Alz5/vuuV/+LP5AAGGwb/yJmEgEiFpgAQuV2/jKPYwCQqZUBdh6YALIIeQEInxIAWmXm/4EddwBEJAsB6Lc3ABf/YP+hKcH/P4veAA+z8wD/ZA//UjWHAIk5lQFj8Kr/Fubk/jG0Uv89UisAbvXZAMd9PQAu/TQAjcXbANOfwQA3eWn+txSBAKl3qv/Lsov/hyi2/6wNyv9BspQACM8rAHo1fwFKoTAA49aA/lYL8/9kVgcB9USG/z0rFQGYVF7/vjz6/u926P/WiCUBcUxr/11oZAGQzhf/bpaaAeRnuQDaMTL+h02L/7kBTgAAoZT/YR3p/8+Ulf+gqAAAW4Cr/wYcE/4Lb/cAJ7uW/4rolQB1PkT/P9i8/+vqIP4dOaD/GQzxAak8vwAgg43/7Z97/17FXv50/gP/XLNh/nlhXP+qcA4AFZX4APjjAwBQYG0AS8BKAQxa4v+hakQB0HJ//3Iq//5KGkr/97OW/nmMPACTRsj/1iih/6G8yf+NQYf/8nP8AD4vygC0lf/+gjftAKURuv8KqcIAnG3a/3CMe/9ogN/+sY5s/3kl2/+ATRL/b2wXAVvASwCu9Rb/BOw+/ytAmQHjrf4A7XqEAX9Zuv+OUoD+/FSuAFqzsQHz1lf/Zzyi/9CCDv8LgosAzoHb/17Znf/v5ub/dHOf/qRrXwAz2gIB2H3G/4zKgP4LX0T/Nwld/q6ZBv/MrGAARaBuANUmMf4bUNUAdn1yAEZGQ/8Pjkn/g3q5//MUMv6C7SgA0p+MAcWXQf9UmUIAw35aABDu7AF2u2b/AxiF/7tF5gA4xVwB1UVe/1CK5QHOB+YA3m/mAVvpd/8JWQcBAmIBAJRKhf8z9rT/5LFwATq9bP/Cy+3+FdHDAJMKIwFWneIAH6OL/jgHS/8+WnQAtTypAIqi1P5Rpx8AzVpw/yFw4wBTl3UBseBJ/66Q2f/mzE//Fk3o/3JO6gDgOX7+CTGNAPKTpQFotoz/p4QMAXtEfwDhVycB+2wIAMbBjwF5h8//rBZGADJEdP9lryj/+GnpAKbLBwBuxdoA1/4a/qji/QAfj2AAC2cpALeBy/5k90r/1X6EANKTLADH6hsBlC+1AJtbngE2aa//Ak6R/maaXwCAz3/+NHzs/4JURwDd89MAmKrPAN5qxwC3VF7+XMg4/4q2cwGOYJIAhYjkAGESlgA3+0IAjGYEAMpnlwAeE/j/M7jPAMrGWQA3xeH+qV/5/0JBRP+86n4Apt9kAXDv9ACQF8IAOie2APQsGP6vRLP/mHaaAbCiggDZcsz+rX5O/yHeHv8kAlv/Ao/zAAnr1wADq5cBGNf1/6gvpP7xks8ARYG0AETzcQCQNUj++y0OABduqABERE//bkZf/q5bkP8hzl//iSkH/xO7mf4j/3D/CZG5/jKdJQALcDEBZgi+/+rzqQE8VRcASie9AHQx7wCt1dIALqFs/5+WJQDEeLn/ImIG/5nDPv9h5kf/Zj1MABrU7P+kYRAAxjuSAKMXxAA4GD0AtWLBAPuT5f9ivRj/LjbO/+pS9gC3ZyYBbT7MAArw4ACSFnX/jpp4AEXUIwDQY3YBef8D/0gGwgB1EcX/fQ8XAJpPmQDWXsX/uTeT/z7+Tv5/UpkAbmY//2xSof9pu9QBUIonADz/Xf9IDLoA0vsfAb6nkP/kLBP+gEPoANb5a/6IkVb/hC6wAL274//QFowA2dN0ADJRuv6L+h8AHkDGAYebZACgzhf+u6LT/xC8PwD+0DEAVVS/APHA8v+ZfpEB6qKi/+Zh2AFAh34AvpTfATQAK/8cJ70BQIjuAK/EuQBi4tX/f5/0AeKvPACg6Y4BtPPP/0WYWQEfZRUAkBmk/ou/0QBbGXkAIJMFACe6e/8/c+b/XafG/4/V3P+znBP/GUJ6ANag2f8CLT7/ak+S/jOJY/9XZOf/r5Ho/2W4Af+uCX0AUiWhASRyjf8w3o7/9bqaAAWu3f4/cpv/hzegAVAfhwB++rMB7NotABQckQEQk0kA+b2EARG9wP/fjsb/SBQP//o17f4PCxIAG9Nx/tVrOP+uk5L/YH4wABfBbQElol4Ax535/hiAu//NMbL+XaQq/yt36wFYt+3/2tIB/2v+KgDmCmP/ogDiANvtWwCBsssA0DJf/s7QX//3v1n+bupP/6U98wAUenD/9va5/mcEewDpY+YB21v8/8feFv+z9en/0/HqAG/6wP9VVIgAZToy/4OtnP53LTP/dukQ/vJa1gBen9sBAwPq/2JMXP5QNuYABeTn/jUY3/9xOHYBFIQB/6vS7AA48Z7/unMT/wjlrgAwLAABcnKm/wZJ4v/NWfQAieNLAfitOABKePb+dwML/1F4xv+IemL/kvHdAW3CTv/f8UYB1sip/2G+L/8vZ67/Y1xI/nbptP/BI+n+GuUg/978xgDMK0f/x1SsAIZmvgBv7mH+5ijmAOPNQP7IDOEAphneAHFFM/+PnxgAp7hKAB3gdP6e0OkAwXR+/9QLhf8WOowBzCQz/+geKwDrRrX/QDiS/qkSVP/iAQ3/yDKw/zTV9f6o0WEAv0c3ACJOnADokDoBuUq9ALqOlf5ARX//ocuT/7CXvwCI58v+o7aJAKF++/7pIEIARM9CAB4cJQBdcmAB/lz3/yyrRQDKdwv/vHYyAf9TiP9HUhoARuMCACDreQG1KZoAR4bl/sr/JAApmAUAmj9J/yK2fAB53Zb/GszVASmsVwBanZL/bYIUAEdryP/zZr0AAcOR/i5YdQAIzuMAv279/22AFP6GVTP/ibFwAdgiFv+DEND/eZWqAHITFwGmUB//cfB6AOiz+gBEbrT+0qp3AN9spP/PT+n/G+Xi/tFiUf9PRAcAg7lkAKodov8Romv/ORULAWTItf9/QaYBpYbMAGinqAABpE8Akoc7AUYygP9mdw3+4waHAKKOs/+gZN4AG+DbAZ5dw//qjYkAEBh9/+7OL/9hEWL/dG4M/2BzTQBb4+j/+P5P/1zlBv5YxosAzkuBAPpNzv+N9HsBikXcACCXBgGDpxb/7USn/se9lgCjq4r/M7wG/18dif6U4rMAtWvQ/4YfUv+XZS3/gcrhAOBIkwAwipf/w0DO/u3angBqHYn+/b3p/2cPEf/CYf8Asi2p/sbhmwAnMHX/h2pzAGEmtQCWL0H/U4Ll/vYmgQBc75r+W2N/AKFvIf/u2fL/g7nD/9W/nv8pltoAhKmDAFlU/AGrRoD/o/jL/gEytP98TFUB+29QAGNC7/+a7bb/3X6F/krMY/9Bk3f/Yzin/0/4lf90m+T/7SsO/kWJC/8W+vEBW3qP/8358wDUGjz/MLawATAXv//LeZj+LUrV/z5aEv71o+b/uWp0/1MjnwAMIQL/UCI+ABBXrv+tZVUAyiRR/qBFzP9A4bsAOs5eAFaQLwDlVvUAP5G+ASUFJwBt+xoAiZPqAKJ5kf+QdM7/xei5/7e+jP9JDP7/ixTy/6pa7/9hQrv/9bWH/t6INAD1BTP+yy9OAJhl2ABJF30A/mAhAevSSf8r0VgBB4FtAHpo5P6q8ssA8syH/8oc6f9BBn8An5BHAGSMXwBOlg0A+2t2AbY6ff8BJmz/jb3R/wibfQFxo1v/eU++/4bvbP9ML/gAo+TvABFvCgBYlUv/1+vvAKefGP8vl2z/a9G8AOnnY/4cypT/riOK/24YRP8CRbUAa2ZSAGbtBwBcJO3/3aJTATfKBv+H6of/GPreAEFeqP71+NL/p2zJ/v+hbwDNCP4AiA10AGSwhP8r137/sYWC/55PlABD4CUBDM4V/z4ibgHtaK//UIRv/46uSABU5bT+abOMAED4D//pihAA9UN7/tp51P8/X9oB1YWJ/4+2Uv8wHAsA9HKNAdGvTP+dtZb/uuUD/6SdbwHnvYsAd8q+/9pqQP9E6z/+YBqs/7svCwHXEvv/UVRZAEQ6gABecQUBXIHQ/2EPU/4JHLwA7wmkADzNmADAo2L/uBI8ANm2iwBtO3j/BMD7AKnS8P8lrFz+lNP1/7NBNAD9DXMAua7OAXK8lf/tWq0AK8fA/1hscQA0I0wAQhmU/90EB/+X8XL/vtHoAGIyxwCXltX/EkokATUoBwATh0H/GqxFAK7tVQBjXykAAzgQACegsf/Iatr+uURU/1u6Pf5Dj43/DfSm/2NyxgDHbqP/wRK6AHzv9gFuRBYAAusuAdQ8awBpKmkBDuaYAAcFgwCNaJr/1QMGAIPkov+zZBwB53tV/84O3wH9YOYAJpiVAWKJegDWzQP/4piz/waFiQCeRYz/caKa/7TzrP8bvXP/jy7c/9WG4f9+HUUAvCuJAfJGCQBazP//56qTABc4E/44fZ3/MLPa/0+2/f8m1L8BKet8AGCXHACHlL4Azfkn/jRgiP/ULIj/Q9GD//yCF//bgBT/xoF2AGxlCwCyBZIBPgdk/7XsXv4cGqQATBZw/3hmTwDKwOUByLDXAClA9P/OuE4Apy0/AaAjAP87DI7/zAmQ/9te5QF6G3AAvWlt/0DQSv/7fzcBAuLGACxM0QCXmE3/0hcuAcmrRf8s0+cAviXg//XEPv+ptd7/ItMRAHfxxf/lI5gBFUUo/7LioQCUs8EA28L+ASjOM//nXPoBQ5mqABWU8QCqRVL/eRLn/1xyAwC4PuYA4clX/5Jgov+18twArbvdAeI+qv84ftkBdQ3j/7Ms7wCdjZv/kN1TAOvR0AAqEaUB+1GFAHz1yf5h0xj/U9amAJokCf/4L38AWtuM/6HZJv7Ukz//QlSUAc8DAQDmhlkBf056/+CbAf9SiEoAspzQ/7oZMf/eA9IB5Za+/1WiNP8pVI3/SXtU/l0RlgB3ExwBIBbX/xwXzP+O8TT/5DR9AB1MzwDXp/r+r6TmADfPaQFtu/X/oSzcASllgP+nEF4AXdZr/3ZIAP5QPer/ea99AIup+wBhJ5P++sQx/6Wzbv7fRrv/Fo59AZqziv92sCoBCq6ZAJxcZgCoDaH/jxAgAPrFtP/LoywBVyAkAKGZFP97/A8AGeNQADxYjgARFskBms1N/yc/LwAIeo0AgBe2/swnE/8EcB3/FySM/9LqdP41Mj//eato/6DbXgBXUg7+5yoFAKWLf/5WTiYAgjxC/sseLf8uxHoB+TWi/4iPZ/7X0nIA5weg/qmYKv9vLfYAjoOH/4NHzP8k4gsAABzy/+GK1f/3Ltj+9QO3AGz8SgHOGjD/zTb2/9PGJP95IzIANNjK/yaLgf7ySZQAQ+eN/yovzABOdBkBBOG//waT5AA6WLEAeqXl//xTyf/gp2ABsbie//JpswH4xvAAhULLAf4kLwAtGHP/dz7+AMThuv57jawAGlUp/+JvtwDV55cABDsH/+6KlABCkyH/H/aN/9GNdP9ocB8AWKGsAFPX5v4vb5cALSY0AYQtzACKgG3+6XWG//O+rf7x7PAAUn/s/ijfof9utuH/e67vAIfykQEz0ZoAlgNz/tmk/P83nEUBVF7//+hJLQEUE9T/YMU7/mD7IQAmx0kBQKz3/3V0OP/kERIAPopnAfblpP/0dsn+ViCf/20iiQFV07oACsHB/nrCsQB67mb/otqrAGzZoQGeqiIAsC+bAbXkC/8InAAAEEtdAM5i/wE6miMADPO4/kN1Qv/m5XsAySpuAIbksv66bHb/OhOa/1KpPv9yj3MB78Qy/60wwf+TAlT/loaT/l/oSQBt4zT+v4kKACjMHv5MNGH/pOt+AP58vABKthUBeR0j//EeB/5V2tb/B1SW/lEbdf+gn5j+Qhjd/+MKPAGNh2YA0L2WAXWzXACEFoj/eMccABWBT/62CUEA2qOpAPaTxv9rJpABTq/N/9YF+v4vWB3/pC/M/ys3Bv+Dhs/+dGTWAGCMSwFq3JAAwyAcAaxRBf/HszT/JVTLAKpwrgALBFsARfQbAXWDXAAhmK//jJlr//uHK/5XigT/xuqT/nmYVP/NZZsBnQkZAEhqEf5smQD/veW6AMEIsP+uldEA7oIdAOnWfgE94mYAOaMEAcZvM/8tT04Bc9IK/9oJGf+ei8b/01K7/lCFUwCdgeYB84WG/yiIEABNa0//t1VcAbHMygCjR5P/mEW+AKwzvAH60qz/0/JxAVlZGv9AQm/+dJgqAKEnG/82UP4AatFzAWd8YQDd5mL/H+cGALLAeP4P2cv/fJ5PAHCR9wBc+jABo7XB/yUvjv6QvaX/LpLwAAZLgAApncj+V3nVAAFx7AAFLfoAkAxSAB9s5wDh73f/pwe9/7vkhP9uvSIAXizMAaI0xQBOvPH+ORSNAPSSLwHOZDMAfWuU/hvDTQCY/VoBB4+Q/zMlHwAidyb/B8V2AJm80wCXFHT+9UE0/7T9bgEvsdEAoWMR/3beygB9s/wBezZ+/5E5vwA3unkACvOKAM3T5f99nPH+lJy5/+MTvP98KSD/HyLO/hE5UwDMFiX/KmBiAHdmuAEDvhwAblLa/8jMwP/JkXYAdcySAIQgYgHAwnkAaqH4Ae1YfAAX1BoAzata//gw2AGNJeb/fMsA/p6oHv/W+BUAcLsH/0uF7/9K4/P/+pNGANZ4ogCnCbP/Fp4SANpN0QFhbVH/9CGz/zk0Of9BrNL/+UfR/46p7gCevZn/rv5n/mIhDgCNTOb/cYs0/w861ACo18n/+MzXAd9EoP85mrf+L+d5AGqmiQBRiIoApSszAOeLPQA5Xzv+dmIZ/5c/7AFevvr/qblyAQX6Ov9LaWEB19+GAHFjowGAPnAAY2qTAKPDCgAhzbYA1g6u/4Em5/81tt8AYiqf//cNKAC80rEBBhUA//89lP6JLYH/WRp0/n4mcgD7MvL+eYaA/8z5p/6l69cAyrHzAIWNPgDwgr4Bbq//AAAUkgEl0nn/ByeCAI76VP+NyM8ACV9o/wv0rgCG6H4ApwF7/hDBlf/o6e8B1UZw//x0oP7y3tz/zVXjAAe5OgB29z8BdE2x/z71yP4/EiX/azXo/jLd0wCi2wf+Al4rALY+tv6gTsj/h4yqAOu45ACvNYr+UDpN/5jJAgE/xCIABR64AKuwmgB5O84AJmMnAKxQTf4AhpcAuiHx/l793/8scvwAbH45/8koDf8n5Rv/J+8XAZd5M/+ZlvgACuqu/3b2BP7I9SYARaHyARCylgBxOIIAqx9pABpYbP8xKmoA+6lCAEVdlQAUOf4ApBlvAFq8Wv/MBMUAKNUyAdRghP9YirT+5JJ8/7j29wBBdVb//WbS/v55JACJcwP/PBjYAIYSHQA74mEAsI5HAAfRoQC9VDP+m/pIANVU6/8t3uAA7pSP/6oqNf9Op3UAugAo/32xZ/9F4UIA4wdYAUusBgCpLeMBECRG/zICCf+LwRYAj7fn/tpFMgDsOKEB1YMqAIqRLP6I5Sj/MT8j/z2R9f9lwAL+6KdxAJhoJgF5udoAeYvT/nfwIwBBvdn+u7Oi/6C75gA++A7/PE5hAP/3o//hO1v/a0c6//EvIQEydewA27E//vRaswAjwtf/vUMy/xeHgQBovSX/uTnCACM+5//c+GwADOeyAI9QWwGDXWX/kCcCAf/6sgAFEez+iyAuAMy8Jv71czT/v3FJ/r9sRf8WRfUBF8uyAKpjqgBB+G8AJWyZ/0AlRQAAWD7+WZSQ/79E4AHxJzUAKcvt/5F+wv/dKv3/GWOXAGH93wFKczH/Bq9I/zuwywB8t/kB5ORjAIEMz/6owMP/zLAQ/pjqqwBNJVX/IXiH/47C4wEf1joA1bt9/+guPP++dCr+l7IT/zM+7f7M7MEAwug8AKwinf+9ELj+ZwNf/43pJP4pGQv/FcOmAHb1LQBD1ZX/nwwS/7uk4wGgGQUADE7DASvF4QAwjin+xJs8/9/HEgGRiJwA/HWp/pHi7gDvF2sAbbW8/+ZwMf5Jqu3/57fj/1DcFADCa38Bf81lAC40xQHSqyT/WANa/ziXjQBgu///Kk7IAP5GRgH0fagAzESKAXzXRgBmQsj+ETTkAHXcj/7L+HsAOBKu/7qXpP8z6NABoOQr//kdGQFEvj8=";function X(){try{if(y)return new Uint8Array(y);var e=ue(z);if(e)return e;if(_)return _(z);throw"both async and sync fetching of the wasm failed"}catch(e){W(e)}}function Z(){return y||!u&&!c||"function"!=typeof fetch||J(z)?Promise.resolve().then(X):fetch(z,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+z+"'";return e.arrayBuffer()})).catch((function(){return X()}))}function ee(){var e={env:de,wasi_snapshot_preview1:de};function t(e,t){var n=e.exports;a.asm=n,V()}function n(e){t(e.instance)}function r(t){return Z().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){E("failed to asynchronously prepare wasm: "+e),W(e)}))}if(j(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return E("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(y||"function"!=typeof WebAssembly.instantiateStreaming||$(z)||J(z)||"function"!=typeof fetch)return r(n);fetch(z,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return E("wasm streaming compile failed: "+e),E("falling back to ArrayBuffer instantiation"),r(n)}))}))}(),{}}function te(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?v.get(n)():v.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function ne(e,t,n){M.copyWithin(e,t,t+n)}function re(e){W("OOM")}function ie(e){re()}$(z)||(z=m(z)),N.push({func:function(){pe()}});var oe=!1;function ae(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(oe&&T(!1,"Character code "+r+" ("+String.fromCharCode(r)+")  at offset "+n+" not in 0x00-0xFF."),r&=255),t.push(String.fromCharCode(r))}return t.join("")}var se="function"==typeof atob?atob:function(e){var t,n,r,i,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(u++))<<2|(i=s.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(o=s.indexOf(e.charAt(u++)))>>2,r=(3&o)<<6|(a=s.indexOf(e.charAt(u++))),l+=String.fromCharCode(t),64!==o&&(l+=String.fromCharCode(n)),64!==a&&(l+=String.fromCharCode(r))}while(u<e.length);return l};function le(e){if("boolean"==typeof d&&d){var t;try{t=Buffer.from(e,"base64")}catch(n){t=new Buffer(e,"base64")}return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}try{for(var n=se(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ue(e){if($(e))return le(e.slice(Q.length))}var ce,de={__indirect_function_table:v,emscripten_memcpy_big:ne,emscripten_resize_heap:ie,memory:S},pe=(ee(),a.___wasm_call_ctors=function(){return(pe=a.___wasm_call_ctors=a.asm.__wasm_call_ctors).apply(null,arguments)});a._crypto_sign_ed25519_ref10_ge_scalarmult_base=function(){return(a._crypto_sign_ed25519_ref10_ge_scalarmult_base=a.asm.crypto_sign_ed25519_ref10_ge_scalarmult_base).apply(null,arguments)},a._curve25519_sign=function(){return(a._curve25519_sign=a.asm.curve25519_sign).apply(null,arguments)},a._curve25519_verify=function(){return(a._curve25519_verify=a.asm.curve25519_verify).apply(null,arguments)},a._sph_sha512_init=function(){return(a._sph_sha512_init=a.asm.sph_sha512_init).apply(null,arguments)},a._curve25519_donna=function(){return(a._curve25519_donna=a.asm.curve25519_donna).apply(null,arguments)},a.___errno_location=function(){return(a.___errno_location=a.asm.__errno_location).apply(null,arguments)},a.stackSave=function(){return(a.stackSave=a.asm.stackSave).apply(null,arguments)},a.stackRestore=function(){return(a.stackRestore=a.asm.stackRestore).apply(null,arguments)},a.stackAlloc=function(){return(a.stackAlloc=a.asm.stackAlloc).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.malloc).apply(null,arguments)},a._free=function(){return(a._free=a.asm.free).apply(null,arguments)},a.__growWasmMemory=function(){return(a.__growWasmMemory=a.asm.__growWasmMemory).apply(null,arguments)};function fe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function _e(e){function t(){ce||(ce=!0,a.calledRun=!0,I||(B(),k(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),G()))}e=e||l,F>0||(L(),F>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(Y=function e(){ce||_e(),ce||(Y=e)},a.run=_e,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();_e();var ge;r=r||{};!function(){"use strict";function e(e){var t=a._malloc(e.length);return a.HEAPU8.set(e,t),t}function t(e,t,n){n.set(a.HEAPU8.subarray(e,e+t))}var n=new Uint8Array(32);n[0]=9,r.curve25519={keyPair:function(r){var i=new Uint8Array(r);i[0]&=248,i[31]&=127,i[31]|=64;var o=a._malloc(32),s=e(i),l=e(n),u=(a._curve25519_donna(o,s,l),new Uint8Array(32));return t(o,32,u),a._free(o),a._free(s),a._free(l),{pubKey:u.buffer,privKey:i.buffer}},sharedSecret:function(n,r){var i=a._malloc(32),o=e(new Uint8Array(r)),s=e(new Uint8Array(n)),l=(a._curve25519_donna(i,o,s),new Uint8Array(32));return t(i,32,l),a._free(i),a._free(o),a._free(s),l.buffer},sign:function(n,r){var i=a._malloc(64),o=e(new Uint8Array(n)),s=e(new Uint8Array(r)),l=(a._curve25519_sign(i,o,s,r.byteLength),new Uint8Array(64));return t(i,64,l),a._free(i),a._free(o),a._free(s),l.buffer},verify:function(t,n,r){var i=e(new Uint8Array(t)),o=e(new Uint8Array(r)),s=e(new Uint8Array(n)),l=a._curve25519_verify(o,i,s,n.byteLength);return a._free(i),a._free(o),a._free(s),0!==l}},r.curve25519_async={keyPair:function(e){return new Promise((function(t){t(r.curve25519.keyPair(e))}))},sharedSecret:function(e,t){return new Promise((function(n){n(r.curve25519.sharedSecret(e,t))}))},sign:function(e,t){return new Promise((function(n){n(r.curve25519.sign(e,t))}))},verify:function(e,t,n){return new Promise((function(i,o){r.curve25519.verify(e,t,n)?o(new Error("Invalid signature")):i()}))}}}(),function(){"use strict";var e=r.curve25519_async;function t(e){this.jobs={},this.jobId=0,this.worker=new Worker(e),this.worker.onmessage=function(e){var t=this.jobs[e.data.id];e.data.error&&"function"==typeof t.onerror?t.onerror(new Error(e.data.error)):"function"==typeof t.onsuccess&&t.onsuccess(e.data.result),delete this.jobs[e.data.id]}.bind(this)}r.startWorker=function(e){r.stopWorker(),r.curve25519_async=new t(e)},r.stopWorker=function(){if(r.curve25519_async instanceof t){var n=r.curve25519_async.worker;r.curve25519_async=e,n.terminate()}},libsignal.worker={startWorker:r.startWorker,stopWorker:r.stopWorker},t.prototype={constructor:t,postMessage:function(e,t,n,r){return new Promise(function(n,r){this.jobs[this.jobId]={onsuccess:n,onerror:r},this.worker.postMessage({id:this.jobId,methodName:e,args:t}),this.jobId++}.bind(this))},keyPair:function(e){return this.postMessage("keyPair",[e])},sharedSecret:function(e,t){return this.postMessage("sharedSecret",[e,t])},sign:function(e,t){return this.postMessage("sign",[e,t])},verify:function(e,t,n){return this.postMessage("verify",[e,t,n])}}}(),((
/**
 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/long.js for details
 */
ge=this||self).dcodeIO=ge.dcodeIO||{}).Long=function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},r={};function i(e,t){var i,o,s;return t?(s=0<=(e>>>=0)&&e<256)&&(o=r[e])?o:(i=a(e,(0|e)<0?-1:0,!0),s&&(r[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(o=n[e])?o:(i=a(e,e<0?-1:0,!1),s&&(n[e]=i),i)}function o(e,t){if(isNaN(e)||!isFinite(e))return t?h:g;if(t){if(e<0)return h;if(e>=p)return S}else{if(e<=-f)return v;if(e+1>=f)return y}return e<0?o(-e,t).neg():a(e%d|0,e/d|0,t)}function a(t,n,r){return new e(t,n,r)}e.fromInt=i,e.fromNumber=o,e.fromBits=a;var s=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var i=o(s(n,8)),a=g,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),d=parseInt(e.substring(u,u+c),n);if(c<8){var p=o(s(n,c));a=a.mul(p).add(o(d))}else a=(a=a.mul(i)).add(o(d))}return a.unsigned=t,a}function u(t){return t instanceof e?t:"number"==typeof t?o(t):"string"==typeof t?l(t):a(t.low,t.high,t.unsigned)}e.fromString=l,e.fromValue=u;var c=65536,d=c*c,p=d*d,f=p/2,_=i(1<<24),g=i(0);e.ZERO=g;var h=i(0,!0);e.UZERO=h;var A=i(1);e.ONE=A;var m=i(1,!0);e.UONE=m;var E=i(-1);e.NEG_ONE=E;var y=a(-1,2147483647,!1);e.MAX_VALUE=y;var S=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=S;var v=a(0,-2147483648,!1);e.MIN_VALUE=v;var I=e.prototype;return I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(v)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=o(s(e,6),this.unsigned),a=this,l="";;){var u=a.div(i),c=(a.sub(u.mul(i)).toInt()>>>0).toString(e);if((a=u).isZero())return c+l;for(;c.length<6;)c="0"+c;l=""+c+l}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(v)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(v)?v:this.not().add(A)},I.neg=I.negate,I.add=function(e){t(e)||(e=u(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,l=65535&e.high,c=e.low>>>16,d=0,p=0,f=0,_=0;return f+=(_+=o+(65535&e.low))>>>16,p+=(f+=i+c)>>>16,d+=(p+=r+l)>>>16,d+=n+s,a((f&=65535)<<16|(_&=65535),(d&=65535)<<16|(p&=65535),this.unsigned)},I.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(t(e)||(e=u(e)),e.isZero())return g;if(this.eq(v))return e.isOdd()?v:g;if(e.eq(v))return this.isOdd()?v:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(_)&&e.lt(_))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,h=0,A=0,m=0;return A+=(m+=s*p)>>>16,h+=(A+=i*p)>>>16,A&=65535,h+=(A+=s*d)>>>16,f+=(h+=r*p)>>>16,h&=65535,f+=(h+=i*d)>>>16,h&=65535,f+=(h+=s*c)>>>16,f+=n*p+r*d+i*c+s*l,a((A&=65535)<<16|(m&=65535),(f&=65535)<<16|(h&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?h:g;var n,r,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return h;if(e.gt(this.shru(1)))return m;i=h}else{if(this.eq(v))return e.eq(A)||e.eq(E)?v:e.eq(v)?A:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?A:E:(r=this.sub(e.mul(n)),i=n.add(r.div(e)));if(e.eq(v))return this.unsigned?h:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:s(2,a-48),c=o(n),d=c.mul(e);d.isNegative()||d.gt(r);)d=(c=o(n-=l,this.unsigned)).mul(e);c.isZero()&&(c=A),i=i.add(c),r=r.sub(d)}return i},I.div=I.divide,I.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.not=function(){return a(~this.low,~this.high,this.unsigned)},I.and=function(e){return t(e)||(e=u(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return t(e)||(e=u(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return t(e)||(e=u(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?a(this.low>>>e|n<<32-e,n>>>e,this.unsigned):a(32===e?n:n>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e}(),
/**
 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
 * This version of ByteBuffer.js uses an ArrayBuffer as its backing buffer which is accessed through a DataView and is
 * compatible with modern browsers.
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/ByteBuffer.js for details
 */
function(e){"use strict";(e.dcodeIO=e.dcodeIO||{}).ByteBuffer=function(e){var t=function(e,n,i){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===n&&(n=t.DEFAULT_ENDIAN),void 0===i&&(i=t.DEFAULT_NOASSERT),!i){if((e|=0)<0)throw RangeError("Illegal capacity");n=!!n,i=!!i}this.buffer=0===e?r:new ArrayBuffer(e),this.view=0===e?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=void 0!==n&&!!n,this.noAssert=!!i};t.VERSION="3.5.5",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var n=t.prototype,r=new ArrayBuffer(0),o=String.fromCharCode;function a(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function s(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+o.apply(String,e);e.length+arguments.length>1024&&(t.push(o.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}t.allocate=function(e,n,r){return new t(e,n,r)},t.concat=function(e,n,r,i){"boolean"!=typeof n&&"string"==typeof n||(i=r,r=n,n=void 0);for(var o,a=0,s=0,l=e.length;s<l;++s)t.isByteBuffer(e[s])||(e[s]=t.wrap(e[s],n)),(o=e[s].limit-e[s].offset)>0&&(a+=o);if(0===a)return new t(0,r,i);var u,c=new t(a,r,i),d=new Uint8Array(c.buffer);for(s=0;s<l;)(o=(u=e[s++]).limit-u.offset)<=0||(d.set(new Uint8Array(u.buffer).subarray(u.offset,u.limit),c.offset),c.offset+=o);return c.limit=c.offset,c.offset=0,c},t.isByteBuffer=function(e){return!0===(e&&e instanceof t)},t.type=function(){return ArrayBuffer},t.wrap=function(e,r,o,a){if("string"!=typeof r&&(a=o,o=r,r=void 0),"string"==typeof e)switch(void 0===r&&(r="utf8"),r){case"base64":return t.fromBase64(e,o);case"hex":return t.fromHex(e,o);case"binary":return t.fromBinary(e,o);case"utf8":return t.fromUTF8(e,o);case"debug":return t.fromDebug(e,o);default:throw Error("Unsupported encoding: "+r)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var s;if(t.isByteBuffer(e))return(s=n.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new t(0,o,a),e.length>0&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.length,s.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)s=new t(0,o,a),e.byteLength>0&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=e.byteLength>0?new DataView(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for((s=new t(e.length,o,a)).limit=e.length,i=0;i<e.length;++i)s.view.setUint8(i,e[i])}return s},n.writeInt8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view.setInt8(t,e),n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view.getInt8(e);return t&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view.setUint8(t,e),n&&(this.offset+=1),this},n.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view.getUint8(e);return t&&(this.offset+=1),n},n.writeInt16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.view.setInt16(t,e,this.littleEndian),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=this.view.getInt16(e,this.littleEndian);return t&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.view.setUint16(t,e,this.littleEndian),n&&(this.offset+=2),this},n.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=this.view.getUint16(e,this.littleEndian);return t&&(this.offset+=2),n},n.writeInt32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.view.setInt32(t,e,this.littleEndian),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=this.view.getInt32(e,this.littleEndian);return t&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.view.setUint32(t,e,this.littleEndian),n&&(this.offset+=4),this},n.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=this.view.getUint32(e,this.littleEndian);return t&&(this.offset+=4),n},e&&(n.writeInt64=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;return n>i&&this.resize((i*=2)>n?i:n),n-=8,this.littleEndian?(this.view.setInt32(n,t.low,!0),this.view.setInt32(n+4,t.high,!0)):(this.view.setInt32(n,t.high,!1),this.view.setInt32(n+4,t.low,!1)),r&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=this.littleEndian?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!1):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!1);return n&&(this.offset+=8),r},n.readLong=n.readInt64,n.writeUint64=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;return n>i&&this.resize((i*=2)>n?i:n),n-=8,this.littleEndian?(this.view.setInt32(n,t.low,!0),this.view.setInt32(n+4,t.high,!0)):(this.view.setInt32(n,t.high,!1),this.view.setInt32(n+4,t.low,!1)),r&&(this.offset+=8),this},n.readUint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=this.littleEndian?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!0):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!0);return n&&(this.offset+=8),r}),n.writeFloat32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.view.setFloat32(t,e,this.littleEndian),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=this.view.getFloat32(e,this.littleEndian);return t&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=8,this.view.setFloat64(t,e,this.littleEndian),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=this.view.getFloat64(e,this.littleEndian);return t&&(this.offset+=8),n},n.readDouble=n.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},n.writeVarint32=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o=t.calculateVarint32(e);n+=o;var a=this.buffer.byteLength;return n>a&&this.resize((a*=2)>n?a:n),n-=o,this.view.setUint8(n,i=128|e),(e>>>=0)>=128?(i=e>>7|128,this.view.setUint8(n+1,i),e>=16384?(i=e>>14|128,this.view.setUint8(n+2,i),e>=1<<21?(i=e>>21|128,this.view.setUint8(n+3,i),e>=1<<28?(this.view.setUint8(n+4,e>>28&15),o=5):(this.view.setUint8(n+3,127&i),o=4)):(this.view.setUint8(n+2,127&i),o=3)):(this.view.setUint8(n+1,127&i),o=2)):(this.view.setUint8(n,127&i),o=1),r?(this.offset+=o,this):o},n.writeVarint32ZigZag=function(e,n){return this.writeVarint32(t.zigZagEncode32(e),n)},n.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r,i=0,o=0;do{if(r=e+i,!this.noAssert&&r>this.limit){var a=Error("Truncated");throw a.truncated=!0,a}n=this.view.getUint8(r),i<5&&(o|=(127&n)<<7*i>>>0),++i}while(128==(128&n));return o|=0,t?(this.offset+=i,o):{value:o,length:i}},n.readVarint32ZigZag=function(e){var n=this.readVarint32(e);return"object"==typeof n?n.value=t.zigZagDecode32(n.value):n=t.zigZagDecode32(n),n},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof n)n=e.fromNumber(n);else if("string"==typeof n)n=e.fromString(n);else if(!(n&&n instanceof e))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof n?n=e.fromNumber(n,!1):"string"==typeof n?n=e.fromString(n,!1):!1!==n.unsigned&&(n=n.toSigned());var o=t.calculateVarint64(n),a=n.toInt()>>>0,s=n.shiftRightUnsigned(28).toInt()>>>0,l=n.shiftRightUnsigned(56).toInt()>>>0;r+=o;var u=this.buffer.byteLength;switch(r>u&&this.resize((u*=2)>r?u:r),r-=o,o){case 10:this.view.setUint8(r+9,l>>>7&1);case 9:this.view.setUint8(r+8,9!==o?128|l:127&l);case 8:this.view.setUint8(r+7,8!==o?s>>>21|128:s>>>21&127);case 7:this.view.setUint8(r+6,7!==o?s>>>14|128:s>>>14&127);case 6:this.view.setUint8(r+5,6!==o?s>>>7|128:s>>>7&127);case 5:this.view.setUint8(r+4,5!==o?128|s:127&s);case 4:this.view.setUint8(r+3,4!==o?a>>>21|128:a>>>21&127);case 3:this.view.setUint8(r+2,3!==o?a>>>14|128:a>>>14&127);case 2:this.view.setUint8(r+1,2!==o?a>>>7|128:a>>>7&127);case 1:this.view.setUint8(r,1!==o?128|a:127&a)}return i?(this.offset+=o,this):o},n.writeVarint64ZigZag=function(e,n){return this.writeVarint64(t.zigZagEncode64(e),n)},n.readVarint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=t,i=0,o=0,a=0,s=0;if(i=127&(s=this.view.getUint8(t++)),128&s&&(i|=(127&(s=this.view.getUint8(t++)))<<7,128&s&&(i|=(127&(s=this.view.getUint8(t++)))<<14,128&s&&(i|=(127&(s=this.view.getUint8(t++)))<<21,128&s&&(o=127&(s=this.view.getUint8(t++)),128&s&&(o|=(127&(s=this.view.getUint8(t++)))<<7,128&s&&(o|=(127&(s=this.view.getUint8(t++)))<<14,128&s&&(o|=(127&(s=this.view.getUint8(t++)))<<21,128&s&&(a=127&(s=this.view.getUint8(t++)),128&s&&(a|=(127&(s=this.view.getUint8(t++)))<<7,128&s))))))))))throw Error("Buffer overrun");var l=e.fromBits(i|o<<28,o>>>4|a<<24,!1);return n?(this.offset=t,l):{value:l,length:t-r}},n.readVarint64ZigZag=function(n){var r=this.readVarint64(n);return r&&r.value instanceof e?r.value=t.zigZagDecode64(r.value):r=t.zigZagDecode64(r),r}),n.writeCString=function(e,t){var n=void 0===t;n&&(t=this.offset);var r,i=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(r=0;r<i;++r)if(0===e.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}i=u.calculateUTF16asUTF8(a(e))[1],t+=i+1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=i+1,u.encodeUTF16toUTF8(a(e),function(e){this.view.setUint8(t++,e)}.bind(this)),this.view.setUint8(t++,0),n?(this.offset=t,this):i},n.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=e,i=-1;return u.decodeUTF8toUTF16(function(){if(0===i)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(i=this.view.getUint8(e++))?null:i}.bind(this),n=s(),!0),t?(this.offset=e,n()):{string:n(),length:e-r}},n.writeIString=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=t;r=u.calculateUTF16asUTF8(a(e),this.noAssert)[1],t+=4+r;var o=this.buffer.byteLength;if(t>o&&this.resize((o*=2)>t?o:t),t-=4+r,this.view.setUint32(t,r,this.littleEndian),t+=4,u.encodeUTF16toUTF8(a(e),function(e){this.view.setUint8(t++,e)}.bind(this)),t!==i+4+r)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+r));return n?(this.offset=t,this):t-i},n.readIString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n,r,i=e;n=this.view.getUint32(e,this.littleEndian);var o,a=(e+=4)+n;return u.decodeUTF8toUTF16(function(){return e<a?this.view.getUint8(e++):null}.bind(this),o=s(),this.noAssert),r=o(),t?(this.offset=e,r):{string:r,length:e-i}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",n.writeUTF8String=function(e,t){var n,r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i=t;n=u.calculateUTF16asUTF8(a(e))[1],t+=n;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=n,u.encodeUTF16toUTF8(a(e),function(e){this.view.setUint8(t++,e)}.bind(this)),r?(this.offset=t,this):t-i},n.writeString=n.writeUTF8String,t.calculateUTF8Chars=function(e){return u.calculateUTF16asUTF8(a(e))[0]},t.calculateUTF8Bytes=function(e){return u.calculateUTF16asUTF8(a(e))[1]},n.readUTF8String=function(e,n,r){"number"==typeof n&&(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),void 0===n&&(n=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o,a=0,l=r;if(n===t.METRICS_CHARS){if(o=s(),u.decodeUTF8(function(){return a<e&&r<this.limit?this.view.getUint8(r++):null}.bind(this),function(e){++a,u.UTF8toUTF16(e,o)}.bind(this)),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return i?(this.offset=r,o()):{string:o(),length:r-l}}if(n===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+e+") <= "+this.buffer.byteLength)}var c=r+e;if(u.decodeUTF8toUTF16(function(){return r<c?this.view.getUint8(r++):null}.bind(this),o=s(),this.noAssert),r!==c)throw RangeError("Illegal range: Truncated data, "+r+" == "+c);return i?(this.offset=r,o()):{string:o(),length:r-l}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o,s=n;i=u.calculateUTF16asUTF8(a(e),this.noAssert)[1],o=t.calculateVarint32(i),n+=o+i;var l=this.buffer.byteLength;if(n>l&&this.resize((l*=2)>n?l:n),n-=o+i,n+=this.writeVarint32(i,n),u.encodeUTF16toUTF8(a(e),function(e){this.view.setUint8(n++,e)}.bind(this)),n!==s+i+o)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+o));return r?(this.offset=n,this):n-s},n.readVString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=this.readVarint32(e),i=e;e+=r.length,r=r.value;var o=e+r,a=s();return u.decodeUTF8toUTF16(function(){return e<o?this.view.getUint8(e++):null}.bind(this),a,this.noAssert),n=a(),t?(this.offset=e,n):{string:n,length:e-i}},n.append=function(e,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var o=e.limit-e.offset;if(o<=0)return this;r+=o;var a=this.buffer.byteLength;return r>a&&this.resize((a*=2)>r?a:r),r-=o,new Uint8Array(this.buffer,r).set(new Uint8Array(e.buffer).subarray(e.offset,e.limit)),e.offset+=o,i&&(this.offset+=o),this},n.appendTo=function(e,t){return e.append(this,t),this},n.assert=function(e){return this.noAssert=!e,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(e){var n=new t(0,this.littleEndian,this.noAssert);if(e){var r=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(r).set(this.buffer),n.buffer=r,n.view=new DataView(r)}else n.buffer=this.buffer,n.view=this.view;return n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=r,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(n);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},n.copy=function(e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e===n)return new t(0,this.littleEndian,this.noAssert);var r=n-e,i=new t(r,this.littleEndian,this.noAssert);return i.offset=0,i.limit=r,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,n),i},n.copyTo=function(e,n,r,i){var o,a;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(n=(a=void 0===n)?e.offset:0|n,r=(o=void 0===r)?this.offset:0|r,i=void 0===i?this.limit:0|i,n<0||n>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+e.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var s=i-r;return 0===s?e:(e.ensureCapacity(n+s),new Uint8Array(e.buffer).set(new Uint8Array(this.buffer).subarray(r,i),n),o&&(this.offset+=s),a&&(e.offset+=s),this)},n.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},n.fill=function(e,t,n){var r=void 0===t;if(r&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;t<n;)this.view.setUint8(t++,e);return r&&(this.offset=t),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},n.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},n.LE=function(e){return this.littleEndian=void 0===e||!!e,this},n.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},n.prepend=function(e,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var o=e.limit-e.offset;if(o<=0)return this;var a,s=o-r;if(s>0){var l=new ArrayBuffer(this.buffer.byteLength+s);(a=new Uint8Array(l)).set(new Uint8Array(this.buffer).subarray(r,this.buffer.byteLength),o),this.buffer=l,this.view=new DataView(l),this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,r+=s}else a=new Uint8Array(this.buffer);return a.set(new Uint8Array(e.buffer).subarray(e.offset,e.limit),r-o),e.offset=e.limit,i&&(this.offset-=o),this},n.prependTo=function(e,t){return e.prepend(this,t),this},n.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},n.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(e,t)),this.view=new DataView(this.buffer)),this},n.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},n.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},n.toBuffer=function(e){var t=this.offset,n=this.limit;if(t>n){var i=t;t=n,n=i}if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return r;var o=new ArrayBuffer(n-t);return new Uint8Array(o).set(new Uint8Array(this.buffer).subarray(t,n),0),o},n.toArrayBuffer=n.toBuffer,n.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var l=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],r=0,i=t.length;r<i;++r)n[t[r]]=r;return e.encode=function(e,n){for(var r,i;null!==(r=e());)n(t[r>>2&63]),i=(3&r)<<4,null!==(r=e())?(n(t[63&((i|=r>>4&15)|r>>4&15)]),i=(15&r)<<2,null!==(r=e())?(n(t[63&(i|r>>6&3)]),n(t[63&r])):(n(t[63&i]),n(61))):(n(t[63&i]),n(61),n(61))},e.decode=function(e,t){var r,i,o;function a(e){throw Error("Illegal character code: "+e)}for(;null!==(r=e());)if(void 0===(i=n[r])&&a(r),null!==(r=e())&&(void 0===(o=n[r])&&a(r),t(i<<2>>>0|(48&o)>>4),null!==(r=e()))){if(void 0===(i=n[r])){if(61===r)break;a(r)}if(t((15&o)<<4>>>0|(60&i)>>2),null!==(r=e())){if(void 0===(o=n[r])){if(61===r)break;a(r)}t((3&i)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();n.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;return l.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),n=s()),n()},t.fromBase64=function(e,n,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var i=new t(e.length/4*3,n,r),o=0;return l.decode(a(e),(function(e){i.view.setUint8(o++,e)})),i.limit=o,i},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},n.toBinary=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";for(var n=[],r=[];e<t;)n.push(this.view.getUint8(e++)),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},t.fromBinary=function(e,n,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");for(var i,o=0,a=e.length,s=new t(a,n,r);o<a;){if(i=e.charCodeAt(o),!r&&i>255)throw RangeError("Illegal charCode at "+o+": 0 <= "+i+" <= 255");s.view.setUint8(o++,i)}return s.limit=a,s},n.toDebug=function(e){for(var t,n=-1,r=this.buffer.byteLength,i="",o="",a="";n<r;){if(-1!==n&&(i+=(t=this.view.getUint8(n))<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(o+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==r){for(;i.length<51;)i+=" ";a+=i+o+"\n",i=o=""}n===this.offset&&n===this.limit?i+=n===this.markedOffset?"!":"|":n===this.offset?i+=n===this.markedOffset?"[":"<":n===this.limit?i+=n===this.markedOffset?"]":">":i+=n===this.markedOffset?"'":e||0!==n&&n!==r?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";a+=i+o+"\n"}return e?a:i},t.fromDebug=function(e,n,r){for(var i,o,a=e.length,s=new t((a+1)/3|0,n,r),l=0,u=0,c=!1,d=!1,p=!1,f=!1,_=!1;l<a;){switch(i=e.charAt(l++)){case"!":if(!r){if(d||p||f){_=!0;break}d=p=f=!0}s.offset=s.markedOffset=s.limit=u,c=!1;break;case"|":if(!r){if(d||f){_=!0;break}d=f=!0}s.offset=s.limit=u,c=!1;break;case"[":if(!r){if(d||p){_=!0;break}d=p=!0}s.offset=s.markedOffset=u,c=!1;break;case"<":if(!r){if(d){_=!0;break}d=!0}s.offset=u,c=!1;break;case"]":if(!r){if(f||p){_=!0;break}f=p=!0}s.limit=s.markedOffset=u,c=!1;break;case">":if(!r){if(f){_=!0;break}f=!0}s.limit=u,c=!1;break;case"'":if(!r){if(p){_=!0;break}p=!0}s.markedOffset=u,c=!1;break;case" ":c=!1;break;default:if(!r&&c){_=!0;break}if(o=parseInt(i+e.charAt(l++),16),!r&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");s.view.setUint8(u++,o),c=!0}if(_)throw TypeError("Illegal str: Invalid symbol at "+l)}if(!r){if(!d||!f)throw TypeError("Illegal str: Missing offset or limit");if(u<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+a)}return s},n.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,r=new Array(t-e);e<t;)(n=this.view.getUint8(e++))<16?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},t.fromHex=function(e,n,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,o=e.length,a=new t(o/2|0,n),s=0,l=0;s<o;s+=2){if(i=parseInt(e.substring(s,s+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");a.view.setUint8(l++,i)}return a.limit=l,a};var u=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},decodeUTF8:function(e,t){for(var n,r,i,o,a=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(r=e())&&a([n,r]),t((31&n)<<6|63&r);else if(224==(240&n))(null===(r=e())||null===(i=e()))&&a([n,r,i]),t((15&n)<<12|(63&r)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=e())||null===(i=e())||null===(o=e()))&&a([n,r,i,o]),t((7&n)<<18|(63&r)<<12|(63&i)<<6|63&o)}},UTF16toUTF8:function(e,t){for(var n,r=null;null!==(n=null!==r?r:e());)n>=55296&&n<=57343&&null!==(r=e())&&r>=56320&&r<=57343?(t(1024*(n-55296)+r-56320+65536),r=null):t(n);null!==r&&t(r)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(t){for(var n,r=0;null!==(n=t());)r+=e.calculateCodePoint(n);return r},calculateUTF16asUTF8:function(t){var n=0,r=0;return e.UTF16toUTF8(t,(function(t){++n,r+=e.calculateCodePoint(t)})),[n,r]}};return e}();return n.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;try{u.decodeUTF8toUTF16(function(){return e<t?this.view.getUint8(e++):null}.bind(this),n=s())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},t.fromUTF8=function(e,n,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new t(u.calculateUTF16asUTF8(a(e),!0)[1],n,r),o=0;return u.encodeUTF16toUTF8(a(e),(function(e){i.view.setUint8(o++,e)})),i.limit=o,i},t}(e.dcodeIO.Long)}(this||self),
/**
 * @license protobuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/protobuf.js for details
 */
function(e,r){(e.dcodeIO=e.dcodeIO||{}).ProtoBuf=function(e,r){"use strict";var i={};return i.ByteBuffer=e,i.Long=e.Long||null,i.VERSION="5.0.1",i.WIRE_TYPES={},i.WIRE_TYPES.VARINT=0,i.WIRE_TYPES.BITS64=1,i.WIRE_TYPES.LDELIM=2,i.WIRE_TYPES.STARTGROUP=3,i.WIRE_TYPES.ENDGROUP=4,i.WIRE_TYPES.BITS32=5,i.PACKABLE_WIRE_TYPES=[i.WIRE_TYPES.VARINT,i.WIRE_TYPES.BITS64,i.WIRE_TYPES.BITS32],i.TYPES={int32:{name:"int32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},uint64:{name:"uint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.UZERO:void 0},sint64:{name:"sint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},bool:{name:"bool",wireType:i.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:i.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:i.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.ZERO:void 0},float:{name:"float",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:i.WIRE_TYPES.STARTGROUP,defaultValue:null}},i.MAP_KEY_TYPES=[i.TYPES.int32,i.TYPES.sint32,i.TYPES.sfixed32,i.TYPES.uint32,i.TYPES.fixed32,i.TYPES.int64,i.TYPES.sint64,i.TYPES.sfixed64,i.TYPES.uint64,i.TYPES.fixed64,i.TYPES.bool,i.TYPES.string,i.TYPES.bytes],i.ID_MIN=1,i.ID_MAX=536870911,i.convertFieldsToCamelCase=!1,i.populateAccessors=!0,i.populateDefaults=!0,i.Util=function(){"use strict";var e={};return e.IS_NODE=!("object"!=typeof t||t+""!="[object process]"||t.browser),e.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,n=0;n<e.length;n++){try{t=e[n]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},e.fetch=function(t,r){if(r&&"function"!=typeof r&&(r=null),e.IS_NODE){var i=n(35747);if(r)i.readFile(t,(function(e,t){r(e?null:""+t)}));else try{return i.readFileSync(t)}catch(e){return null}}else{var o=e.XHR();if(o.open("GET",t,!!r),o.setRequestHeader("Accept","text/plain"),"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),!r)return o.send(null),200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null;if(o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0==o.status&&"string"==typeof o.responseText?r(o.responseText):r(null))},4==o.readyState)return;o.send(null)}},e.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},e}(),i.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},i.DotProto=function(e,t){"use strict";var n={},r=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},i=r.prototype;i._readString=function(){var e='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;e.lastIndex=this.index-1;var n=e.exec(this.source);if(!n)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},i.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,n,r;do{for(e=!1;t.WHITESPACE.test(r=this.source.charAt(this.index));)if("\n"===r&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(r=this.source.charAt(this.index)))return"/";do{if("\n"===r&&++this.line,++this.index===this.source.length)return null;n=r,r=this.source.charAt(this.index)}while("*"!==n||"/"!==r);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;if(t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(i++)))for(;i<this.source.length&&!t.DELIM.test(this.source.charAt(i));)++i;var o=this.source.substring(this.index,this.index=i);return'"'!==o&&"'"!==o||(this._stringOpen=o),o},i.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},i.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},i.omit=function(e){return this.peek()===e&&(this.next(),!0)},i.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},n.Tokenizer=r;var o=function(e){this.tn=new r(e),this.proto3=!1},a=o.prototype;function s(e,n){var r=-1,i=1;if("-"==e.charAt(0)&&(i=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))r=parseInt(e);else if(t.NUMBER_HEX.test(e))r=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(i<0?"-":"")+e);r=parseInt(e.substring(1),8)}if(r=i*r|0,!n&&r<0)throw Error("illegal id value: "+(i<0?"-":"")+e);return r}function l(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return n*(1/0);if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function u(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}return a.parse=function(){var e,n,r={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!i||null!==r.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),r.package=e;break;case"import":if(!i)throw Error("unexpected 'import'");("public"===(e=this.tn.peek())||(n="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n||r.imports.push(e);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(r.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(r,null),i=!1;break;case"enum":this._parseEnum(r),i=!1;break;case"option":this._parseOption(r);break;case"service":this._parseService(r);break;case"extend":this._parseExtend(r);break;default:throw Error("unexpected '"+e+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete r.name,r},o.parse=function(e){return new o(e).parse()},a._readString=function(){var e,t,n="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},a._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return l(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},a._parseOption=function(e,n){var r=this.tn.next(),i=!1;if("("===r&&(i=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal option name: "+r);var o=r;i&&(this.tn.skip(")"),o="("+o+")",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(o+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,o),n||this.tn.skip(";")},a._parseOptionValue=function(e,n){var r=this.tn.peek();if("{"!==r)u(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(r=this.tn.next());){if(!t.NAME.test(r))throw Error("illegal option name: "+n+"."+r);this.tn.omit(":")?u(e.options,n+"."+r,this._readValue(!0)):this._parseOptionValue(e,n+"."+r)}},a._parseService=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var r={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(r);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(r)}this.tn.omit(";"),e.services.push(r)},a._parseServiceRPC=function(e){var n="rpc",r=this.tn.next();if(!t.NAME.test(r))throw Error("illegal rpc service method name: "+r);var i=r,o={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(r=this.tn.next()).toLowerCase()&&(o.request_stream=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal rpc service request type: "+r);if(o.request=r,this.tn.skip(")"),"returns"!==(r=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+r);if(this.tn.skip("("),"stream"===(r=this.tn.next()).toLowerCase()&&(o.response_stream=!0,r=this.tn.next()),o.response=r,this.tn.skip(")"),"{"===(r=this.tn.peek())){for(this.tn.next();"}"!==(r=this.tn.next());){if("option"!==r)throw Error("illegal rpc service token: "+r);this._parseOption(o)}this.tn.omit(";")}else this.tn.skip(";");void 0===e[n]&&(e[n]={}),e[n][i]=o},a._parseMessage=function(e,n){var r=!!n,i=this.tn.next(),o={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(i))throw Error("illegal "+(r?"group":"message")+" name: "+i);for(o.name=i,r&&(this.tn.skip("="),n.id=s(this.tn.next()),o.isGroup=!0),"["===(i=this.tn.peek())&&n&&this._parseFieldOptions(n),this.tn.skip("{");"}"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(o,i);else if("oneof"===i)this._parseMessageOneOf(o);else if("enum"===i)this._parseEnum(o);else if("message"===i)this._parseMessage(o);else if("option"===i)this._parseOption(o);else if("service"===i)this._parseService(o);else if("extensions"===i)o.extensions=this._parseExtensionRanges();else if("reserved"===i)this._parseIgnored();else if("extend"===i)this._parseExtend(o);else{if(!t.TYPEREF.test(i))throw Error("illegal message token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(o,"optional",i)}return this.tn.omit(";"),e.messages.push(o),o},a._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},a._parseMessageField=function(e,n,r){if(!t.RULE.test(n))throw Error("illegal message field rule: "+n);var i,o={rule:n,type:"",name:"",options:{},id:0};if("map"===n){if(r)throw Error("illegal type: "+r);if(this.tn.skip("<"),i=this.tn.next(),!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(o.keytype=i,this.tn.skip(","),i=this.tn.next(),!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field: "+i);if(o.type=i,this.tn.skip(">"),i=this.tn.next(),!t.NAME.test(i))throw Error("illegal message field name: "+i);o.name=i,this.tn.skip("="),o.id=s(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}else if("group"===(r=void 0!==r?r:this.tn.next())){var a=this._parseMessage(e,o);if(!/^[A-Z]/.test(a.name))throw Error("illegal group name: "+a.name);o.type=a.name,o.name=a.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(o.type=r,i=this.tn.next(),!t.NAME.test(i))throw Error("illegal message field name: "+i);o.name=i,this.tn.skip("="),o.id=s(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}return e.fields.push(o),o},a._parseMessageOneOf=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal oneof name: "+n);var r,i=n,o=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)(r=this._parseMessageField(e,"optional",n)).oneof=i,o.push(r.id);this.tn.omit(";"),e.oneofs[i]=o},a._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},a._parseEnum=function(e){var n={name:"",values:[],options:{}},r=this.tn.next();if(!t.NAME.test(r))throw Error("illegal name: "+r);for(n.name=r,this.tn.skip("{");"}"!==(r=this.tn.next());)if("option"===r)this._parseOption(n);else{if(!t.NAME.test(r))throw Error("illegal name: "+r);this.tn.skip("=");var i={name:r,id:s(this.tn.next(),!0)};"["===(r=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),n.values.push(i)}this.tn.omit(";"),e.enums.push(n)},a._parseExtensionRanges=function(){var t,n,r,i=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":r=e.ID_MIN;break;case"max":r=e.ID_MAX;break;default:r=l(t)}if(n.push(r),2===n.length)break;if("to"!==this.tn.peek()){n.push(r);break}this.tn.next()}i.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),i},a._parseExtend=function(e){var n=this.tn.next();if(!t.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var r={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(t.RULE.test(n))this._parseMessageField(r,n);else{if(!t.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(r,"optional",n)}return this.tn.omit(";"),e.messages.push(r),r},a.toString=function(){return"Parser at line "+this.tn.line},n.Parser=o,n}(i,i.Lang),i.Reflect=function(t){"use strict";var n={},r=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},i=r.prototype;i.fqn=function(){for(var e=this.name,t=this;;){if(null==(t=t.parent))break;e=t.name+"."+e}return e},i.toString=function(e){return(e?this.className+" ":"")+this.fqn()},i.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=r;var o=function(e,t,n,i,o){r.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=i||{},this.syntax=o||"proto2"},a=o.prototype=Object.create(r.prototype);a.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],n=0,r=this.children.length;n<r;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},a.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof d.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof d.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},a.getChild=function(e){for(var t="number"==typeof e?"id":"name",n=0,r=this.children.length;n<r;++n)if(this.children[n][t]===e)return this.children[n];return null},a.resolve=function(e,t){var r,i="string"==typeof e?e.split("."):e,o=this,a=0;if(""===i[a]){for(;null!==o.parent;)o=o.parent;a++}do{do{if(!(o instanceof n.Namespace)){o=null;break}if(!(r=o.getChild(i[a]))||!(r instanceof n.T)||t&&!(r instanceof n.Namespace)){o=null;break}o=r,a++}while(a<i.length);if(null!=o)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=o);return o},a.qn=function(e){var t=[],r=e;do{t.unshift(r.name),r=r.parent}while(null!==r);for(var i=1;i<=t.length;i++){var o=t.slice(t.length-i);if(e===this.resolve(o,e instanceof n.Namespace))return o.join(".")}return e.fqn()},a.build=function(){for(var e,t={},n=this.children,r=0,i=n.length;r<i;++r)(e=n[r])instanceof o&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},a.buildOpt=function(){for(var e={},t=Object.keys(this.options),n=0,r=t.length;n<r;++n){var i=t[n],o=this.options[t[n]];e[i]=o}return e},a.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},n.Namespace=o;var s=function(e,n,r,i){if(this.type=e,this.resolvedType=n,this.isMapKey=r,this.syntax=i,r&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},l=s.prototype;function u(n){if("string"==typeof n&&(n=t.TYPES[n]),void 0===n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==t.TYPES.bytes?new e(0):n.defaultValue}function c(e,n){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if("string"==typeof e)return t.Long.fromString(e,n||!1,10);if("number"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error("not convertible to Long")}s.defaultFieldValue=u,l.verifyValue=function(n){var r=this;function i(e,t){throw Error("Illegal value for "+r.toString(!0)+" of type "+r.type.name+": "+e+" ("+t+")")}switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return c(n,!1)}catch(e){i(typeof n,e.message)}else i(typeof n,"requires Long.js");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return c(n,!0)}catch(e){i(typeof n,e.message)}else i(typeof n,"requires Long.js");case t.TYPES.bool:return"boolean"!=typeof n&&i(typeof n,"not a boolean"),n;case t.TYPES.float:case t.TYPES.double:return"number"!=typeof n&&i(typeof n,"not a number"),n;case t.TYPES.string:return"string"==typeof n||n&&n instanceof String||i(typeof n,"not a string"),""+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n,"base64");case t.TYPES.enum:var o=this.resolvedType.getChildren(t.Reflect.Enum.Value);for(s=0;s<o.length;s++){if(o[s].name==n)return o[s].id;if(o[s].id==n)return o[s].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),(n>4294967295||n<0)&&i(typeof n,"not in range for uint32"),n;i(n,"not a valid enum value");case t.TYPES.group:case t.TYPES.message:if(n&&"object"==typeof n||i(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){var a={};for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);n=a}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},l.calculateLength=function(n,r){if(null===r)return 0;var i;switch(this.type){case t.TYPES.int32:return r<0?e.calculateVarint64(r):e.calculateVarint32(r);case t.TYPES.uint32:return e.calculateVarint32(r);case t.TYPES.sint32:return e.calculateVarint32(e.zigZagEncode32(r));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return e.calculateVarint64(r);case t.TYPES.sint64:return e.calculateVarint64(e.zigZagEncode64(r));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return e.calculateVarint32(r);case t.TYPES.double:return 8;case t.TYPES.string:return i=e.calculateUTF8Bytes(r),e.calculateVarint32(i)+i;case t.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");return e.calculateVarint32(r.remaining())+r.remaining();case t.TYPES.message:return i=this.resolvedType.calculate(r),e.calculateVarint32(i)+i;case t.TYPES.group:return(i=this.resolvedType.calculate(r))+e.calculateVarint32(n<<3|t.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},l.encodeValue=function(n,r,i){if(null===r)return i;switch(this.type){case t.TYPES.int32:r<0?i.writeVarint64(r):i.writeVarint32(r);break;case t.TYPES.uint32:i.writeVarint32(r);break;case t.TYPES.sint32:i.writeVarint32ZigZag(r);break;case t.TYPES.fixed32:i.writeUint32(r);break;case t.TYPES.sfixed32:i.writeInt32(r);break;case t.TYPES.int64:case t.TYPES.uint64:i.writeVarint64(r);break;case t.TYPES.sint64:i.writeVarint64ZigZag(r);break;case t.TYPES.fixed64:i.writeUint64(r);break;case t.TYPES.sfixed64:i.writeInt64(r);break;case t.TYPES.bool:"string"==typeof r?i.writeVarint32("false"===r.toLowerCase()?0:!!r):i.writeVarint32(r?1:0);break;case t.TYPES.enum:i.writeVarint32(r);break;case t.TYPES.float:i.writeFloat32(r);break;case t.TYPES.double:i.writeFloat64(r);break;case t.TYPES.string:i.writeVString(r);break;case t.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");var o=r.offset;i.writeVarint32(r.remaining()),i.append(r),r.offset=o;break;case t.TYPES.message:var a=(new e).LE();this.resolvedType.encode(r,a),i.writeVarint32(a.offset),i.append(a.flip());break;case t.TYPES.group:this.resolvedType.encode(r,i),i.writeVarint32(n<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return i},l.decode=function(e,n,r){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var i,o;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(o=e.readVarint32(),e.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+e.remaining());return(i=e.clone()).limit=i.offset+o,e.offset+=o,i;case t.TYPES.message:return o=e.readVarint32(),this.resolvedType.decode(e,o);case t.TYPES.group:return this.resolvedType.decode(e,-1,r)}throw Error("[INTERNAL] Illegal decode type")},l.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(n));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(n);case t.TYPES.bool:return"true"===n;case t.TYPES.string:return this.verifyValue(n);case t.TYPES.bytes:return e.fromBinary(n)}},l.valueToString=function(e){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===t.TYPES.bytes?e.toString("binary"):e.toString()},n.Element=s;var d=function(e,t,n,r,i,a){o.call(this,e,t,n,r,a),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},p=d.prototype=Object.create(o.prototype);function f(e,n){var r=n.readVarint32(),i=7&r,o=r>>>3;switch(i){case t.WIRE_TYPES.VARINT:do{r=n.readUint8()}while(128==(128&r));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:r=n.readVarint32(),n.offset+=r;break;case t.WIRE_TYPES.STARTGROUP:f(o,n);break;case t.WIRE_TYPES.ENDGROUP:if(o===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+e+" expected)");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+i)}return!0}p.build=function(n){if(this.clazz&&!n)return this.clazz;var r=function(t,n){var r=n.getChildren(t.Reflect.Message.Field),i=n.getChildren(t.Reflect.Message.OneOf),o=function(a,s){t.Builder.Message.call(this);for(var l=0,u=i.length;l<u;++l)this[i[l].name]=null;for(l=0,u=r.length;l<u;++l){var c=r[l];this[c.name]=c.repeated?[]:c.map?new t.Map(c):null,!c.required&&"proto3"!==n.syntax||null===c.defaultValue||(this[c.name]=c.defaultValue)}var d;if(arguments.length>0)if(1!==arguments.length||null===a||"object"!=typeof a||!("function"!=typeof a.encode||a instanceof o)||Array.isArray(a)||a instanceof t.Map||e.isByteBuffer(a)||a instanceof ArrayBuffer||t.Long&&a instanceof t.Long)for(l=0,u=arguments.length;l<u;++l)void 0!==(d=arguments[l])&&this.$set(r[l].name,d);else this.$set(a)},a=o.prototype=Object.create(t.Builder.Message.prototype);a.add=function(e,r,i){var o=n._fieldsByName[e];if(!i){if(!o)throw Error(this+"#"+e+" is undefined");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));if(!o.repeated)throw Error(this+"#"+e+" is not a repeated field");r=o.verifyValue(r,!0)}return null===this[e]&&(this[e]=[]),this[e].push(r),this},a.$add=a.add,a.set=function(e,r,i){if(e&&"object"==typeof e){for(var o in i=r,e)e.hasOwnProperty(o)&&void 0!==(r=e[o])&&this.$set(o,r,i);return this}var a=n._fieldsByName[e];if(i)this[e]=r;else{if(!a)throw Error(this+"#"+e+" is not a field: undefined");if(!(a instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+a.toString(!0));this[a.name]=r=a.verifyValue(r)}if(a&&a.oneof){var s=this[a.oneof.name];null!==r?(null!==s&&s!==a.name&&(this[s]=null),this[a.oneof.name]=a.name):s===e&&(this[a.oneof.name]=null)}return this},a.$set=a.set,a.get=function(e,r){if(r)return this[e];var i=n._fieldsByName[e];if(!(i&&i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));return this[i.name]},a.$get=a.get;for(var s=0;s<r.length;s++){var l=r[s];l instanceof t.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace("_","")}));t=t.substring(0,1).toUpperCase()+t.substring(1);var r=e.originalName.replace(/([A-Z])/g,(function(e){return"_"+e})),i=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},o=function(){return this[e.name]};null===n.getChild("set"+t)&&(a["set"+t]=i),null===n.getChild("set_"+r)&&(a["set_"+r]=i),null===n.getChild("get"+t)&&(a["get"+t]=o),null===n.getChild("get_"+r)&&(a["get_"+r]=o)}(l)}function u(n,r,i,o){if(null===n||"object"!=typeof n){if(o&&o instanceof t.Reflect.Enum){var a=t.Reflect.Enum.getName(o.object,n);if(null!==a)return a}return n}if(e.isByteBuffer(n))return r?n.toBase64():n.toBuffer();if(t.Long.isLong(n))return i?n.toString():t.Long.fromValue(n);var s;if(Array.isArray(n))return s=[],n.forEach((function(e,t){s[t]=u(e,r,i,o)})),s;if(s={},n instanceof t.Map){for(var l=n.entries(),c=l.next();!c.done;c=l.next())s[n.keyElem.valueToString(c.value[0])]=u(c.value[1],r,i,n.valueElem.resolvedType);return s}var d=n.$type,p=void 0;for(var f in n)n.hasOwnProperty(f)&&(d&&(p=d.getChild(f))?s[f]=u(n[f],r,i,p.resolvedType):s[f]=u(n[f],r,i));return s}return a.encode=function(t,r){"boolean"==typeof t&&(r=t,t=void 0);var i=!1;t||(t=new e,i=!0);var o=t.littleEndian;try{return n.encode(this,t.LE(),r),(i?t.flip():t).LE(o)}catch(e){throw t.LE(o),e}},o.encode=function(e,t,n){return new o(e).encode(t,n)},a.calculate=function(){return n.calculate(this)},a.encodeDelimited=function(t,r){var i=!1;t||(t=new e,i=!0);var o=(new e).LE();return n.encode(this,o,r).flip(),t.writeVarint32(o.remaining()),t.append(o),i?t.flip():t},a.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},a.toArrayBuffer=a.encodeAB,a.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},a.toBuffer=a.encodeNB,a.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},a.toBase64=a.encode64,a.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},a.toHex=a.encodeHex,a.toRaw=function(e,t){return u(this,!!e,!!t,this.$type)},a.encodeJSON=function(){return JSON.stringify(u(this,!0,!0,this.$type))},o.decode=function(t,r,i){"string"==typeof r&&(i=r,r=-1),"string"==typeof t&&(t=e.wrap(t,i||"base64"));var o=(t=e.isByteBuffer(t)?t:e.wrap(t)).littleEndian;try{var a=n.decode(t.LE());return t.LE(o),a}catch(e){throw t.LE(o),e}},o.decodeDelimited=function(t,r){if("string"==typeof t&&(t=e.wrap(t,r||"base64")),(t=e.isByteBuffer(t)?t:e.wrap(t)).remaining()<1)return null;var i=t.offset,o=t.readVarint32();if(t.remaining()<o)return t.offset=i,null;try{var a=n.decode(t.slice(t.offset,t.offset+o).LE());return t.offset+=o,a}catch(e){throw t.offset+=o,e}},o.decode64=function(e){return o.decode(e,"base64")},o.decodeHex=function(e){return o.decode(e,"hex")},o.decodeJSON=function(e){return new o(JSON.parse(e))},a.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(o,"$options",{value:n.buildOpt()}),Object.defineProperty(a,"$options",{value:o.$options}),Object.defineProperty(o,"$type",{value:n}),Object.defineProperty(a,"$type",{value:n})),o}(t,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var i,o=0,a=this.children.length;o<a;o++)if((i=this.children[o])instanceof m||i instanceof d||i instanceof S){if(r.hasOwnProperty(i.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i.toString(!0)+" cannot override static property '"+i.name+"'");r[i.name]=i.build()}else if(i instanceof d.Field)i.build(),this._fields.push(i),this._fieldsById[i.id]=i,this._fieldsByName[i.name]=i;else if(!(i instanceof d.OneOf||i instanceof y))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[o].toString(!0));return this.clazz=r},p.encode=function(e,t,n){for(var r,i,o=null,a=0,s=this._fields.length;a<s;++a)i=e[(r=this._fields[a]).name],r.required&&null===i?null===o&&(o=r):r.encode(n?i:r.verifyValue(i),t,e);if(null!==o){var l=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw l.encoded=t,l}return t},p.calculate=function(e){for(var t,n,r=0,i=0,o=this._fields.length;i<o;++i){if(n=e[(t=this._fields[i]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);r+=t.calculate(n,e)}return r},p.decode=function(e,n,r){n="number"==typeof n?n:-1;for(var i,o,a,s,l=e.offset,u=new this.clazz;e.offset<l+n||-1===n&&e.remaining()>0;){if(a=(i=e.readVarint32())>>>3,(o=7&i)===t.WIRE_TYPES.ENDGROUP){if(a!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(r?r+" expected":"not a group")+")");break}if(s=this._fieldsById[a]){if(s.repeated&&!s.options.packed)u[s.name].push(s.decode(o,e));else if(s.map){var c=s.decode(o,e);u[s.name].set(c[0],c[1])}else if(u[s.name]=s.decode(o,e),s.oneof){var d=u[s.oneof.name];null!==d&&d!==s.name&&(u[d]=null),u[s.oneof.name]=s.name}}else switch(o){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:var p=e.readVarint32();e.offset+=p;break;case t.WIRE_TYPES.STARTGROUP:for(;f(a,e););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+o)}}for(var _=0,g=this._fields.length;_<g;++_)if(null===u[(s=this._fields[_]).name])if("proto3"===this.syntax)u[s.name]=s.defaultValue;else{if(s.required){var h=Error("Missing at least one required field for "+this.toString(!0)+": "+s.name);throw h.decoded=u,h}t.populateDefaults&&null!==s.defaultValue&&(u[s.name]=s.defaultValue)}return u},n.Message=d;var _=function(e,n,i,o,a,s,l,u,c,p){r.call(this,e,n,s),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=o||null,this.type=a,this.resolvedType=null,this.id=l,this.options=u||{},this.defaultValue=null,this.oneof=c||null,this.syntax=p||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof d.ExtensionField||(this.name=t.Util.toCamelCase(this.name))},g=_.prototype=Object.create(r.prototype);g.build=function(){this.element=new s(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new s(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=s.defaultFieldValue(this.type)},g.verifyValue=function(e,n){n=n||!1;var r,i=this;function o(e,t){throw Error("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+e+" ("+t+")")}if(null===e)return this.required&&o(typeof e,"required"),"proto3"===this.syntax&&this.type!==t.TYPES.message&&o(typeof e,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){Array.isArray(e)||(e=[e]);var a=[];for(r=0;r<e.length;r++)a.push(this.element.verifyValue(e[r]));return a}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||o(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&o(typeof e,"no array expected"),this.element.verifyValue(e))},g.hasWirePresence=function(e,n){if("proto3"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},g.encode=function(n,r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return r;try{var o;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var a=r.offset;for(o=0;o<n.length;o++)this.element.encodeValue(this.id,n[o],r);var s=r.offset-a,l=e.calculateVarint32(s);if(l>1){var u=r.slice(a,r.offset);a+=l-1,r.offset=a,r.append(u)}r.writeVarint32(s,a-l)}else for(o=0;o<n.length;o++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[o],r);else this.map?n.forEach((function(n,i,o){var a=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.writeVarint32(a),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,i,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,r)}),this):this.hasWirePresence(n,i)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,r))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return r},g.calculate=function(n,r){if(n=this.verifyValue(n),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var i=0;try{var o,a;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),a=0,o=0;o<n.length;o++)a+=this.element.calculateLength(this.id,n[o]);i+=e.calculateVarint32(a),i+=a}else for(o=0;o<n.length;o++)i+=e.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n[o]);else this.map?n.forEach((function(n,r,o){var a=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);i+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i+=e.calculateVarint32(a),i+=a}),this):this.hasWirePresence(n,r)&&(i+=e.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return i},g.decode=function(e,n,r){var i,o;if(!(!this.map&&e==this.type.wireType||!r&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){o=n.readVarint32(),o=n.offset+o;for(var a=[];n.offset<o;)a.push(this.decode(this.type.wireType,n,!0));return a}if(this.map){var l=s.defaultFieldValue(this.keyType);if(i=s.defaultFieldValue(this.type),o=n.readVarint32(),n.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+n.remaining());var u=n.clone();for(u.limit=u.offset+o,n.offset+=o;u.remaining()>0;){var c=u.readVarint32();e=7&c;var d=c>>>3;if(1===d)l=this.keyElement.decode(u,e,d);else{if(2!==d)throw Error("Unexpected tag in map field key/value submessage");i=this.element.decode(u,e,d)}}return[l,i]}return this.element.decode(n,e,this.id)},n.Message.Field=_;var h=function(e,t,n,r,i,o,a){_.call(this,e,t,n,null,r,i,o,a),this.extension};h.prototype=Object.create(_.prototype),n.Message.ExtensionField=h;var A=function(e,t,n){r.call(this,e,t,n),this.fields=[]};n.Message.OneOf=A;var m=function(e,t,n,r,i){o.call(this,e,t,n,r,i),this.className="Enum",this.object=null};m.getName=function(e,t){for(var n,r=Object.keys(e),i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(m.prototype=Object.create(o.prototype)).build=function(e){if(this.object&&!e)return this.object;for(var n=new t.Builder.Enum,r=this.getChildren(m.Value),i=0,o=r.length;i<o;++i)n[r[i].name]=r[i].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},n.Enum=m;var E=function(e,t,n,i){r.call(this,e,t,n),this.className="Enum.Value",this.id=i};E.prototype=Object.create(r.prototype),n.Enum.Value=E;var y=function(e,t,n,i){r.call(this,e,t,n),this.field=i};y.prototype=Object.create(r.prototype),n.Extension=y;var S=function(e,t,n,r){o.call(this,e,t,n,r),this.className="Service",this.clazz=null};(S.prototype=Object.create(o.prototype)).build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(t,n){for(var r=function(e){t.Builder.Service.call(this),this.rpcImpl=e||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},i=r.prototype=Object.create(t.Builder.Service.prototype),o=n.getChildren(t.Reflect.Service.RPCMethod),a=0;a<o.length;a++)!function(t){i[t.name]=function(r,i){try{try{r=t.resolvedRequestType.clazz.decode(e.wrap(r))}catch(e){if(!(e instanceof TypeError))throw e}if(null===r||"object"!=typeof r)throw Error("Illegal arguments");r instanceof t.resolvedRequestType.clazz||(r=new t.resolvedRequestType.clazz(r)),this.rpcImpl(t.fqn(),r,(function(e,r){if(e)i(e);else{null===r&&(r="");try{r=t.resolvedResponseType.clazz.decode(r)}catch(e){}r&&r instanceof t.resolvedResponseType.clazz?i(null,r):i(Error("Illegal response type received in service method "+n.name+"#"+t.name))}}))}catch(e){setTimeout(i.bind(this,e),0)}},r[t.name]=function(e,n,i){new r(e)[t.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[t.name],"$options",{value:t.buildOpt()}),Object.defineProperty(i[t.name],"$options",{value:r[t.name].$options}))}(o[a]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:n.buildOpt()}),Object.defineProperty(i,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:n}),Object.defineProperty(i,"$type",{value:n})),r}(t,this)},n.Service=S;var v=function(e,t,n,i){r.call(this,e,t,n),this.className="Service.Method",this.options=i||{}};(v.prototype=Object.create(r.prototype)).buildOpt=a.buildOpt,n.Service.Method=v;var I=function(e,t,n,r,i,o,a,s){v.call(this,e,t,n,s),this.className="Service.RPCMethod",this.requestName=r,this.responseName=i,this.requestStream=o,this.responseStream=a,this.resolvedRequestType=null,this.resolvedResponseType=null};return I.prototype=Object.create(v.prototype),n.Service.RPCMethod=I,n}(i),i.Builder=function(e,t,r){"use strict";var i=function(e){this.ns=new r.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},o=i.prototype;function a(e){e.messages&&e.messages.forEach((function(t){t.syntax=e.syntax,a(t)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}return i.isMessage=function(e){return"string"==typeof e.name&&(void 0===e.values&&void 0===e.rpc)},i.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},i.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},i.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},i.isExtend=function(e){return"string"==typeof e.ref},o.reset=function(){return this.ptr=this.ns,this},o.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new r.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},o.create=function(t){if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(var n=[t];n.length>0;){if(t=n.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var o=t.shift();if(i.isMessage(o)){var a=new r.Message(this,this.ptr,o.name,o.options,o.isGroup,o.syntax),s={};o.oneofs&&Object.keys(o.oneofs).forEach((function(e){a.addChild(s[e]=new r.Message.OneOf(this,a,e))}),this),o.fields&&o.fields.forEach((function(e){if(null!==a.getChild(0|e.id))throw Error("duplicate or invalid field id in "+a.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+a.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=s[e.oneof]))throw Error("illegal oneof in "+a.name+"#"+e.name+": "+e.oneof);e=new r.Message.Field(this,a,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,o.syntax),t&&t.fields.push(e),a.addChild(e)}),this);var l=[];if(o.enums&&o.enums.forEach((function(e){l.push(e)})),o.messages&&o.messages.forEach((function(e){l.push(e)})),o.services&&o.services.forEach((function(e){l.push(e)})),o.extensions&&("number"==typeof o.extensions[0]?a.extensions=[o.extensions]:a.extensions=o.extensions),this.ptr.addChild(a),l.length>0){n.push(t),t=l,l=null,this.ptr=a,a=null;continue}l=null}else if(i.isEnum(o))a=new r.Enum(this,this.ptr,o.name,o.options,o.syntax),o.values.forEach((function(e){a.addChild(new r.Enum.Value(this,a,e.name,e.id))}),this),this.ptr.addChild(a);else if(i.isService(o))a=new r.Service(this,this.ptr,o.name,o.options),Object.keys(o.rpc).forEach((function(e){var t=o.rpc[e];a.addChild(new r.Service.RPCMethod(this,a,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(a);else{if(!i.isExtend(o))throw Error("not a valid definition: "+JSON.stringify(o));if(a=this.ptr.resolve(o.ref,!0))o.fields.forEach((function(t){if(null!==a.getChild(0|t.id))throw Error("duplicate extended field id in "+a.name+": "+t.id);if(a.extensions){var n=!1;if(a.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(n=!0)})),!n)throw Error("illegal extended field id in "+a.name+": "+t.id+" (not within valid ranges)")}var i=t.name;this.options.convertFieldsToCamelCase&&(i=e.Util.toCamelCase(i));var o=new r.Message.ExtensionField(this,a,t.rule,t.type,this.ptr.fqn()+"."+i,t.id,t.options),s=new r.Extension(this,this.ptr,t.name,o);o.extension=s,this.ptr.addChild(s),a.addChild(o)}),this);else if(!/\.?google\.protobuf\./.test(o.ref))throw Error("extended message "+o.ref+" is not defined")}o=null,a=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},o.import=function(t,r){var i="/";if("string"==typeof r){if(e.Util.IS_NODE&&(r=n(26470).resolve(r)),!0===this.files[r])return this.reset();this.files[r]=!0}else if("object"==typeof r){var o=r.root;e.Util.IS_NODE&&(o=n(26470).resolve(o)),(o.indexOf("\\")>=0||r.file.indexOf("\\")>=0)&&(i="\\");var s=o+i+r.file;if(!0===this.files[s])return this.reset();this.files[s]=!0}if(t.imports&&t.imports.length>0){var l,u=!1;"object"==typeof r?(this.importRoot=r.root,u=!0,l=this.importRoot,r=r.file,(l.indexOf("\\")>=0||r.indexOf("\\")>=0)&&(i="\\")):"string"==typeof r?this.importRoot?l=this.importRoot:r.indexOf("/")>=0?""===(l=r.replace(/\/[^\/]*$/,""))&&(l="/"):r.indexOf("\\")>=0?(l=r.replace(/\\[^\\]*$/,""),i="\\"):l=".":l=null;for(var c=0;c<t.imports.length;c++)if("string"==typeof t.imports[c]){if(!l)throw Error("cannot determine import root");var d=t.imports[c];if("google/protobuf/descriptor.proto"===d)continue;if(d=l+i+d,!0===this.files[d])continue;/\.proto$/i.test(d)&&!e.DotProto&&(d=d.replace(/\.proto$/,".json"));var p=e.Util.fetch(d);if(null===p)throw Error("failed to import '"+d+"' in '"+r+"': file not found");/\.json$/i.test(d)?this.import(JSON.parse(p+""),d):this.import(e.DotProto.Parser.parse(p),d)}else r?/\.(\w+)$/.test(r)?this.import(t.imports[c],r.replace(/^(.+)\.(\w+)$/,(function(e,t,n){return t+"_import"+c+"."+n}))):this.import(t.imports[c],r+"_import"+c):this.import(t.imports[c]);u&&(this.importRoot=null)}t.package&&this.define(t.package),t.syntax&&a(t);var f=this.ptr;return t.options&&Object.keys(t.options).forEach((function(e){f.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=f),t.enums&&(this.create(t.enums),this.ptr=f),t.services&&(this.create(t.services),this.ptr=f),t.extends&&this.create(t.extends),this.reset()},o.resolveAll=function(){var n;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof r.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof r.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(n=(this.ptr instanceof r.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=n,n instanceof r.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==n.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(n instanceof r.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=n.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((n=this.ptr.parent.resolve(this.ptr.requestName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=n,!((n=this.ptr.parent.resolve(this.ptr.responseName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=n}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},o.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,n=this.result,r=0;r<t.length;r++){if(!n[t[r]]){n=null;break}n=n[t[r]]}return n},o.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},o.toString=function(){return"Builder"},i.Message=function(){},i.Enum=function(){},i.Service=function(){},i}(i,i.Lang,i.Reflect),i.Map=function(e,t){"use strict";var n=function(e,n){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=this.keyElem.valueFromString(r[i]),a=this.valueElem.verifyValue(n[r[i]]);this.map[this.keyElem.valueToString(o)]={key:o,value:a}}},r=n.prototype;function i(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){for(var e,t=[],n=Object.keys(this.map),r=0;r<n.length;r++)t.push([(e=this.map[n[r]]).key,e.value]);return i(t)},r.keys=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].key);return i(e)},r.values=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].value);return i(e)},r.forEach=function(e,t){for(var n,r=Object.keys(this.map),i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),r=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:r},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},n}(0,i.Reflect),i.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),i.loadJson(i.DotProto.Parser.parse(e),t,n)},i.protoFromString=i.loadProto,i.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(r){if(null!==r)try{t(null,i.loadProto(r,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var r=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:i.loadProto(r,n,e)},i.protoFromFile=i.loadProtoFile,i.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=i.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=i.populateAccessors),new i.Builder(e)},i.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=i.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},i.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(r){if(null!==r)try{t(null,i.loadJson(JSON.parse(r),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var r=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:i.loadJson(JSON.parse(r),n,e)},i}(e.dcodeIO.ByteBuffer)}(this||self),function(){"use strict";function e(e){if(void 0===e||!(e instanceof ArrayBuffer)||32!=e.byteLength)throw new Error("Invalid private key")}function t(e){if(void 0===e||(33!=e.byteLength||5!=new Uint8Array(e)[0])&&32!=e.byteLength)throw new Error("Invalid public key");return 33==e.byteLength?e.slice(1):(__LOG__(4)`libsignal: WARNING: Expected pubkey of length 33, please report the ST and client that generated the pubkey`,e)}function n(e){var t=new Uint8Array(e.pubKey),n=new Uint8Array(33);return n.set(t,1),n[0]=5,{pubKey:n.buffer,privKey:e.privKey}}function i(r){return{createKeyPair:function(t){e(t);var i=r.keyPair(t);return i instanceof Promise?i.then(n):n(i)},ECDHE:function(n,i){if(n=t(n),e(i),void 0===n||32!=n.byteLength)throw new Error("Invalid public key");return r.sharedSecret(n,i)},Ed25519Sign:function(t,n){if(e(t),void 0===n)throw new Error("Invalid message");return r.sign(t,n)},Ed25519Verify:function(e,n,i){if(void 0===(e=t(e))||32!=e.byteLength)throw new Error("Invalid public key");if(void 0===n)throw new Error("Invalid message");if(void 0===i||64!=i.byteLength)throw new Error("Invalid signature");return r.verify(e,n,i)}}}function o(e){return{generateKeyPair:function(){var t=r.crypto.getRandomBytes(32);return e.createKeyPair(t)},createKeyPair:function(t){return e.createKeyPair(t)},calculateAgreement:function(t,n){return e.ECDHE(t,n)},verifySignature:function(t,n,r){return e.Ed25519Verify(t,n,r)},calculateSignature:function(t,n){return e.Ed25519Sign(t,n)}}}r.Curve=i(r.curve25519),r.Curve.async=i(r.curve25519_async),libsignal.Curve=o(r.Curve),libsignal.Curve.async=o(r.Curve.async)}();r=r||{};!function(){"use strict";var e=self.crypto;if(!e||!e.subtle||"function"!=typeof e.getRandomValues)throw new Error("WebCrypto not found");r.crypto={getRandomBytes:function(t){var n=new Uint8Array(t);return e.getRandomValues(n),n.buffer},getRandomValues:function(t){return e.getRandomValues(t)},encrypt:function(t,n,r){return e.subtle.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt"]).then((function(t){return e.subtle.encrypt({name:"AES-CBC",iv:new Uint8Array(r)},t,n)}))},decrypt:function(t,n,r){return e.subtle.importKey("raw",t,{name:"AES-CBC"},!1,["decrypt"]).then((function(t){return e.subtle.decrypt({name:"AES-CBC",iv:new Uint8Array(r)},t,n)}))},sign:function(t,n){return e.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]).then((function(t){return e.subtle.sign({name:"HMAC",hash:"SHA-256"},t,n)}))},hash:function(t){return e.subtle.digest({name:"SHA-512"},t)},HKDF:function(e,t,n){return r.crypto.sign(t,e).then((function(e){var t=new ArrayBuffer(n.byteLength+1+32),i=new Uint8Array(t);return i.set(new Uint8Array(n),32),i[i.length-1]=1,r.crypto.sign(e,t.slice(32)).then((function(n){return i.set(new Uint8Array(n)),i[i.length-1]=2,r.crypto.sign(e,t).then((function(o){return i.set(new Uint8Array(o)),i[i.length-1]=3,r.crypto.sign(e,t).then((function(e){return[n,o,e]}))}))}))}))},createKeyPair:function(e){return void 0===e&&(e=r.crypto.getRandomBytes(32)),r.Curve.async.createKeyPair(e)},ECDHE:function(e,t){return r.Curve.async.ECDHE(e,t)},Ed25519Sign:function(e,t){return r.Curve.async.Ed25519Sign(e,t)},Ed25519Verify:function(e,t,n){return r.Curve.async.Ed25519Verify(e,t,n)}},r.HKDF=function(e,t,n){if(32!=t.byteLength)throw new Error("Got salt of incorrect length");return r.crypto.HKDF(e,t,he.toArrayBuffer(n))},r.verifyMAC=function(e,t,n,i){return r.crypto.sign(t,e).then((function(e){if(n.byteLength!=i||e.byteLength<i)throw new Error("Bad MAC length");for(var t=new Uint8Array(e),r=new Uint8Array(n),o=0,a=0;a<n.byteLength;++a)o|=t[a]^r[a];if(0!==o)throw new Error("Bad MAC")}))},libsignal.HKDF={deriveSecrets:function(e,t,n){return r.HKDF(e,t,n)}},libsignal.crypto={encrypt:function(e,t,n){return r.crypto.encrypt(e,t,n)},decrypt:function(e,t,n){return r.crypto.decrypt(e,t,n)},calculateMAC:function(e,t){return r.crypto.sign(e,t)},verifyMAC:function(e,t,n,i){return r.verifyMAC(e,t,n,i)},getRandomBytes:function(e){return r.crypto.getRandomBytes(e)}}}();var he=function(){"use strict";var e=(new ArrayBuffer).__proto__;return{toString:function(e){return"string"==typeof e?e:new dcodeIO.ByteBuffer.wrap(e).toString("binary")},toArrayBuffer:function(t){if(void 0!==t){if(t===Object(t)&&t.__proto__==e)return t;if("string"!=typeof t)throw new Error("Tried to convert a non-string of type "+typeof t+" to an array buffer");return t,new dcodeIO.ByteBuffer.wrap(t,"binary").toArrayBuffer()}},isEqual:function(e,t){if(void 0===e||void 0===t)return!1;e=he.toString(e),t=he.toString(t);var n=Math.max(e.length,t.length);if(n<5)throw new Error("a/b compare too short");return e.substring(0,Math.min(n,e.length))==t.substring(0,Math.min(n,t.length))}}}();function Ae(e){return"number"==typeof e&&e%1==0&&e>=0}var me={generateIdentityKeyPair:function(){return r.crypto.createKeyPair()},generateSenderKey:()=>r.crypto.getRandomBytes(32),generateSenderKeyId(){const e=r.crypto.getRandomValues(new Int32Array(1))[0];return e>=0?e:1+~e},generateRegistrationId:function(){return 16383&new Uint16Array(r.crypto.getRandomBytes(2))[0]},generateSignedPreKey:function(e,t){if(!(e.privKey instanceof ArrayBuffer&&32==e.privKey.byteLength&&e.pubKey instanceof ArrayBuffer&&33==e.pubKey.byteLength))throw new TypeError("Invalid argument for identityKeyPair");if(!Ae(t))throw new TypeError("Invalid argument for signedKeyId: "+t);return r.crypto.createKeyPair().then((function(n){return r.crypto.Ed25519Sign(e.privKey,n.pubKey).then((function(e){return{keyId:t,keyPair:n,signature:e}}))}))},generatePreKey:function(e){if(!Ae(e))throw new TypeError("Invalid argument for keyId: "+e);return r.crypto.createKeyPair().then((function(t){return{keyId:e,keyPair:t}}))}};function Ee(e,t){this.name=e,this.deviceId=t}function ye(e,t){this.remoteAddress=t,this.storage=e}function Se(e,t){this.remoteAddress=t,this.storage=e}function ve(e,t,n){this.remoteAddress=t,this.groupId=n,this.storage=e}function Ie(e,t,n){this.remoteAddress=n,this.groupId=t,this.storage=e}function Te(e,t){this.remoteAddress=t,this.storage=e}libsignal.KeyHelper=me,(r=r||{}).protoText={"protos/WhisperTextProtocol.proto":'package textsecure;\noption java_package = "org.whispersystems.libsignal.protocol";\noption java_outer_classname = "WhisperProtos";\nmessage WhisperMessage {\n  optional bytes  ephemeralKey    = 1;\n  optional uint32 counter         = 2;\n  optional uint32 previousCounter = 3;\n  optional bytes  ciphertext      = 4; // PushMessageContent\n}\nmessage PreKeyWhisperMessage {\n  optional uint32 registrationId = 5;\n  optional uint32 preKeyId       = 1;\n  optional uint32 signedPreKeyId = 6;\n  optional bytes  baseKey        = 2;\n  optional bytes  identityKey    = 3;\n  optional bytes  message        = 4; // WhisperMessage\n}\nmessage KeyExchangeMessage {\n  optional uint32 id               = 1;\n  optional bytes  baseKey          = 2;\n  optional bytes  ephemeralKey     = 3;\n  optional bytes  identityKey      = 4;\n  optional bytes  baseKeySignature = 5;\n}\n// https://github.com/signalapp/libsignal-protocol-java/blob/master/protobuf/WhisperTextProtocol.proto#L30\nmessage SenderKeyMessage {\n  optional uint32 id         = 1;\n  optional uint32 iteration  = 2;\n  optional bytes  ciphertext = 3;\n}\n// https://github.com/signalapp/libsignal-protocol-java/blob/master/protobuf/WhisperTextProtocol.proto#L36\nmessage SenderKeyDistributionMessage {\n  optional uint32 id         = 1;\n  optional uint32 iteration  = 2;\n  optional bytes  chainKey   = 3;\n  optional bytes  signingKey = 4;\n}\n'},(r=r||{}).protobuf=function(){"use strict";var e,t=(e="WhisperTextProtocol.proto",dcodeIO.ProtoBuf.loadProto(r.protoText["protos/"+e]).build("textsecure"));return{WhisperMessage:t.WhisperMessage,PreKeyWhisperMessage:t.PreKeyWhisperMessage,SenderKeyMessage:t.SenderKeyMessage,SenderKeyDistributionMessage:t.SenderKeyDistributionMessage}}(),libsignal.Protobuf={PreKeyWhisperMessage:r.protobuf.PreKeyWhisperMessage},(r=r||{}).BaseKeyType={OURS:1,THEIRS:2},r.ChainType={SENDING:1,RECEIVING:2},r.SessionRecord=function(){"use strict";var e=[{version:"v1",migrate:function(e){var t,n=e.sessions;if(e.registrationId)for(t in n)n[t].registrationId||(n[t].registrationId=e.registrationId);else for(t in n)-1===n[t].indexInfo.closed&&__LOG__(2)`libsignal: V1 session storage migration error: registrationId`}}];var t=function(){this.sessions={},this.version="v1"};return t.initRecordFromData=function(n){"v1"!==n.version&&function(t){for(var n=void 0===t.version,r=0;r<e.length;++r)n?e[r].migrate(t):e[r].version===t.version&&(n=!0);if(!n)throw new Error("Error migrating SessionRecord")}(n);var r=new t;if(r.sessions=n.sessions,void 0===r.sessions||null===r.sessions||"object"!=typeof r.sessions||Array.isArray(r.sessions))throw new Error("Error deserializing SessionRecord");return r},t.prototype={prepareRecord:function(){return{sessions:this.sessions,version:this.version}},haveOpenSession:function(){var e=this.getOpenSession();return!!e&&"number"==typeof e.registrationId},getSessionByBaseKey:function(e){var t=this.sessions[he.toString(e)];if(!t||t.indexInfo.baseKeyType!==r.BaseKeyType.OURS)return t;__LOG__(2)`libsignal: Tried to lookup a session using our basekey`},getSessionByRemoteEphemeralKey:function(e){this.detectDuplicateOpenSessions();var t,n=this.sessions,r=he.toString(e);for(var i in n)if(-1==n[i].indexInfo.closed&&(t=n[i]),void 0!==n[i][r])return n[i];if(void 0!==t)return t},getOpenSession:function(){var e=this.sessions;if(void 0!==e)for(var t in this.detectDuplicateOpenSessions(),e)if(-1==e[t].indexInfo.closed)return e[t]},detectDuplicateOpenSessions:function(){var e,t=this.sessions;for(var n in t)if(-1==t[n].indexInfo.closed){if(void 0!==e)throw new Error("Datastore inconsistensy: multiple open sessions");e=t[n]}},updateSessionState:function(e){var t=this.sessions;this.removeOldChains(e),t[he.toString(e.indexInfo.baseKey)]=e,this.removeOldSessions()},getSessions:function(){var e,t=[];for(var n in this.sessions)-1===this.sessions[n].indexInfo.closed?e=this.sessions[n]:t.push(this.sessions[n]);return t=t.sort((function(e,t){return e.indexInfo.closed-t.indexInfo.closed})),e&&t.push(e),t},archiveCurrentState:function(){var e=this.getOpenSession();void 0!==e&&(__LOG__(2)`libsignal: closing session`,e.indexInfo.closed=Date.now(),this.updateSessionState(e))},promoteState:function(e){__LOG__(2)`libsignal: promoting session`,e.indexInfo.closed=-1},removeOldChains:function(e){for(;e.oldRatchetList.length>10;){for(var t=0,n=e.oldRatchetList[0],r=0;r<e.oldRatchetList.length;r++)e.oldRatchetList[r].added<n.added&&(n=e.oldRatchetList[r],t=r);__LOG__(2)`libsignal: Deleting chain closed`,delete e[he.toString(n.ephemeralKey)],e.oldRatchetList.splice(t,1)}},removeOldSessions:function(){for(var e,t,n=this.sessions;Object.keys(n).length>40;){for(var r in n){var i=n[r];i.indexInfo.closed>-1&&(!t||i.indexInfo.closed<t.indexInfo.closed)&&(e=r,t=i)}__LOG__(2)`libsignal: Deleting session closed at`,delete n[he.toString(e)]}},deleteAllSessions:function(){this.sessions={}}},t}(),Ee.prototype={getName:function(){return this.name},getDeviceId:function(){return this.deviceId},toString:function(){return this.name+"."+this.deviceId},equals:function(e){return e instanceof Ee&&(e.name===this.name&&e.deviceId===this.deviceId)}},libsignal.SignalProtocolAddress=function(e,t){var n=new Ee(e,t);["getName","getDeviceId","toString","equals"].forEach(function(e){this[e]=n[e].bind(n)}.bind(this))},libsignal.SignalProtocolAddress.fromString=function(e){if("string"!=typeof e||!e.match(/.*\.\d+/))throw new Error("Invalid SignalProtocolAddress string");var t=e.split(".");return new libsignal.SignalProtocolAddress(t[0],parseInt(t[1]))},ye.prototype={processPreKey:function(e){return r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){return this.storage.isTrustedIdentity(this.remoteAddress.toString(),e.identityKey,this.storage.Direction.SENDING).then((function(t){if(!t)throw new Error("Identity key changed");return r.crypto.Ed25519Verify(e.identityKey,e.signedPreKey.publicKey,e.signedPreKey.signature)})).then((function(){return r.crypto.createKeyPair()})).then(function(t){var n;return e.preKey&&(n=e.preKey.publicKey),this.initSession(!0,t,void 0,e.identityKey,n,e.signedPreKey.publicKey,e.registrationId).then((function(n){return n.pendingPreKey={signedKeyId:e.signedPreKey.keyId,baseKey:t.pubKey},e.preKey&&(n.pendingPreKey.preKeyId=e.preKey.keyId),n}))}.bind(this)).then(function(e){var t=this.remoteAddress.toString();return this.storage.loadSession(t).then(function(n){var i;return(i=void 0!==n?r.SessionRecord.initRecordFromData(n):new r.SessionRecord).archiveCurrentState(),i.updateSessionState(e),Promise.all([this.storage.storeSession(t,i.prepareRecord()),this.storage.saveIdentity(this.remoteAddress.toString(),e.indexInfo.remoteIdentityKey)])}.bind(this))}.bind(this))}.bind(this))},processV3:function(e,t){var n,r,i;return this.storage.isTrustedIdentity(this.remoteAddress.toString(),t.identityKey.toArrayBuffer(),this.storage.Direction.RECEIVING).then(function(e){if(!e){var i=new Error("Unknown identity key");throw i.identityKey=t.identityKey.toArrayBuffer(),i}return Promise.all([this.storage.loadPreKey(t.preKeyId),this.storage.loadSignedPreKey(t.signedPreKeyId)]).then((function(e){n=e[0],r=e[1]}))}.bind(this)).then(function(){if(!(i=e.getSessionByBaseKey(t.baseKey))){if(i=e.getOpenSession(),void 0===r){if(void 0!==i&&void 0!==i.currentRatchet)return;throw new Error("Missing Signed PreKey for PreKeyWhisperMessage")}return void 0!==i&&e.archiveCurrentState(),t.preKeyId&&!n&&__LOG__(2)`libsignal: Invalid prekey id`,this.initSession(!1,n,r,t.identityKey.toArrayBuffer(),t.baseKey.toArrayBuffer(),void 0,t.registrationId).then(function(n){return i&&n&&!he.isEqual(i.indexInfo.remoteIdentityKey,n.indexInfo.remoteIdentityKey)&&(__LOG__(2)`libsignal: deleting all sessions because identity has changed`,e.deleteAllSessions()),e.updateSessionState(n),this.storage.saveIdentity(this.remoteAddress.toString(),t.identityKey.toArrayBuffer()).then((function(){return t.preKeyId}))}.bind(this))}}.bind(this))},initSession:function(e,t,n,i,o,a,s){return this.storage.getIdentityKeyPair().then(function(l){if(e){if(void 0!==n)throw new Error("Invalid call to initSession");n=t}else{if(void 0!==a)throw new Error("Invalid call to initSession");a=o}var u;u=void 0===t||void 0===o?new Uint8Array(128):new Uint8Array(160);for(var c=0;c<32;c++)u[c]=255;return Promise.all([r.crypto.ECDHE(a,l.privKey),r.crypto.ECDHE(i,n.privKey),r.crypto.ECDHE(a,n.privKey)]).then((function(n){if(e?(u.set(new Uint8Array(n[0]),32),u.set(new Uint8Array(n[1]),64)):(u.set(new Uint8Array(n[0]),64),u.set(new Uint8Array(n[1]),32)),u.set(new Uint8Array(n[2]),96),void 0!==t&&void 0!==o)return r.crypto.ECDHE(o,t.privKey).then((function(e){u.set(new Uint8Array(e),128)}))})).then((function(){return r.HKDF(u.buffer,new ArrayBuffer(32),"WhisperText")})).then(function(l){var u={registrationId:s,currentRatchet:{rootKey:l[0],lastRemoteEphemeralKey:a,previousCounter:0},indexInfo:{remoteIdentityKey:i,closed:-1},oldRatchetList:[]};return e?(u.indexInfo.baseKey=t.pubKey,u.indexInfo.baseKeyType=r.BaseKeyType.OURS,r.crypto.createKeyPair().then(function(e){return u.currentRatchet.ephemeralKeyPair=e,this.calculateSendingRatchet(u,a).then((function(){return u}))}.bind(this))):(u.indexInfo.baseKey=o,u.indexInfo.baseKeyType=r.BaseKeyType.THEIRS,u.currentRatchet.ephemeralKeyPair=n,u)}.bind(this))}.bind(this))},calculateSendingRatchet:function(e,t){var n=e.currentRatchet;return r.crypto.ECDHE(t,he.toArrayBuffer(n.ephemeralKeyPair.privKey)).then((function(e){return r.HKDF(e,he.toArrayBuffer(n.rootKey),"WhisperRatchet")})).then((function(t){e[he.toString(n.ephemeralKeyPair.pubKey)]={messageKeys:{},chainKey:{counter:-1,key:t[1]},chainType:r.ChainType.SENDING},n.rootKey=t[0]}))}},libsignal.SessionBuilder=function(e,t){var n=new ye(e,t);this.processPreKey=n.processPreKey.bind(n),this.processV3=n.processV3.bind(n)},Se.prototype={getRecord:function(e){return this.storage.loadSession(e).then((function(e){if(void 0!==e)return r.SessionRecord.initRecordFromData(e)}))},encrypt:function(e,t){return e=dcodeIO.ByteBuffer.wrap(e,t).toArrayBuffer(),r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){if(!(e instanceof ArrayBuffer))throw new Error("Expected buffer to be an ArrayBuffer");var t,n,i,o,a,s=this.remoteAddress.toString(),l=new r.protobuf.WhisperMessage;return Promise.all([this.storage.getIdentityKeyPair(),this.storage.getLocalRegistrationId(),this.getRecord(s)]).then(function(e){if(t=e[0],n=e[1],!(i=e[2]))throw new Error("No record for "+s);if(!(o=i.getOpenSession()))throw new Error("No session to encrypt message for "+s);if(l.ephemeralKey=he.toArrayBuffer(o.currentRatchet.ephemeralKeyPair.pubKey),(a=o[he.toString(l.ephemeralKey)]).chainType===r.ChainType.RECEIVING)throw new Error("Tried to encrypt on a receiving chain");return this.fillMessageKeys(a,a.chainKey.counter+1)}.bind(this)).then((function(){return r.HKDF(he.toArrayBuffer(a.messageKeys[a.chainKey.counter]),new ArrayBuffer(32),"WhisperMessageKeys")})).then(function(n){return delete a.messageKeys[a.chainKey.counter],l.counter=a.chainKey.counter,l.previousCounter=o.currentRatchet.previousCounter,r.crypto.encrypt(n[0],e,n[2].slice(0,16)).then(function(e){l.ciphertext=e;var a=l.toArrayBuffer(),u=new Uint8Array(a.byteLength+66+1);return u.set(new Uint8Array(he.toArrayBuffer(t.pubKey))),u.set(new Uint8Array(he.toArrayBuffer(o.indexInfo.remoteIdentityKey)),33),u[66]=51,u.set(new Uint8Array(a),67),r.crypto.sign(n[1],u.buffer).then(function(e){var t=new Uint8Array(a.byteLength+9);return t[0]=51,t.set(new Uint8Array(a),1),t.set(new Uint8Array(e,0,8),a.byteLength+1),this.storage.isTrustedIdentity(this.remoteAddress.toString(),he.toArrayBuffer(o.indexInfo.remoteIdentityKey),this.storage.Direction.SENDING).then((function(e){if(!e)throw new Error("Identity key changed")})).then(function(){return this.storage.saveIdentity(this.remoteAddress.toString(),o.indexInfo.remoteIdentityKey)}.bind(this)).then(function(){return i.updateSessionState(o),this.storage.storeSession(s,i.prepareRecord()).then((function(){return t}))}.bind(this))}.bind(this))}.bind(this))}.bind(this)).then((function(e){if(void 0!==o.pendingPreKey){var i=new r.protobuf.PreKeyWhisperMessage;return i.identityKey=he.toArrayBuffer(t.pubKey),i.registrationId=n,i.baseKey=he.toArrayBuffer(o.pendingPreKey.baseKey),o.pendingPreKey.preKeyId&&(i.preKeyId=o.pendingPreKey.preKeyId),i.signedPreKeyId=o.pendingPreKey.signedKeyId,i.message=e,{type:3,body:String.fromCharCode(51)+he.toString(i.encode()),registrationId:o.registrationId}}return{type:1,body:he.toString(e),registrationId:o.registrationId}}))}.bind(this))},decryptWithSessionList:function(e,t,n){if(0===t.length)return Promise.reject(n[0]);var r=t.pop();return this.doDecryptWhisperMessage(e,r).then((function(e){return{plaintext:e,session:r}})).catch(function(r){return"MessageCounterError"===r.name?Promise.reject(r):(n.push(r),this.decryptWithSessionList(e,t,n))}.bind(this))},decryptWhisperMessage:function(e,t){return e=dcodeIO.ByteBuffer.wrap(e,t).toArrayBuffer(),r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){var t=this.remoteAddress.toString();return this.getRecord(t).then(function(n){if(!n)throw new Error("No record for device "+t);return this.decryptWithSessionList(e,n.getSessions(),[]).then(function(e){return this.getRecord(t).then(function(n){return e.session.indexInfo.baseKey!==n.getOpenSession().indexInfo.baseKey&&(n.archiveCurrentState(),n.promoteState(e.session)),this.storage.isTrustedIdentity(this.remoteAddress.getName(),he.toArrayBuffer(e.session.indexInfo.remoteIdentityKey),this.storage.Direction.RECEIVING).then((function(e){if(!e)throw new Error("Identity key changed")})).then(function(){return this.storage.saveIdentity(this.remoteAddress.toString(),e.session.indexInfo.remoteIdentityKey)}.bind(this)).then(function(){return n.updateSessionState(e.session),this.storage.storeSession(t,n.prepareRecord()).then((function(){return e.plaintext}))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))},decryptPreKeyWhisperMessage:function(e,t){var n=(e=dcodeIO.ByteBuffer.wrap(e,t)).readUint8();if((15&n)>3||n>>4<3)throw new Error("Incompatible version number on PreKeyWhisperMessage");return r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){var t=this.remoteAddress.toString();return this.getRecord(t).then(function(n){var i=r.protobuf.PreKeyWhisperMessage.decode(e);if(!n){if(void 0===i.registrationId)throw new Error("No registrationId");n=new r.SessionRecord(i.registrationId)}return new ye(this.storage,this.remoteAddress).processV3(n,i).then(function(e){var r=n.getSessionByBaseKey(i.baseKey);return this.doDecryptWhisperMessage(i.message.toArrayBuffer(),r).then(function(e){n.updateSessionState(r);var i=n.getOpenSession();return r&&i&&!he.isEqual(r.indexInfo.remoteIdentityKey,i.indexInfo.remoteIdentityKey)?(__LOG__(2)`libsignal: promote the old session and update identity`,n.archiveCurrentState(),n.promoteState(r),this.storage.saveIdentity(t,r.indexInfo.remoteIdentityKey).then((function(){return e}))):e}.bind(this)).then(function(r){return this.storage.storeSession(t,n.prepareRecord()).then(function(){if(null!=e)return this.storage.removePreKey(e)}.bind(this)).then((function(){return r}))}.bind(this))}.bind(this))}.bind(this))}.bind(this))},doDecryptWhisperMessage:function(e,t){if(!(e instanceof ArrayBuffer))throw new Error("Expected messageBytes to be an ArrayBuffer");var n=new Uint8Array(e)[0];if((15&n)>3||n>>4<3)throw new Error("Incompatible version number on WhisperMessage");var i=e.slice(1,e.byteLength-8),o=e.slice(e.byteLength-8,e.byteLength),a=r.protobuf.WhisperMessage.decode(i),s=a.ephemeralKey.toArrayBuffer();return void 0===t?Promise.reject(new Error("No session found to decrypt message from "+this.remoteAddress.toString())):(-1!=t.indexInfo.closed&&__LOG__(2)`libsignal: decrypting message for closed session`,this.maybeStepRatchet(t,s,a.previousCounter).then(function(){var e=t[he.toString(a.ephemeralKey)];if(e.chainType===r.ChainType.SENDING)throw new Error("Tried to decrypt on a sending chain");return this.fillMessageKeys(e,a.counter).then((function(){var t=e.messageKeys[a.counter];if(void 0===t){var n=new Error("Message key not found. The counter was repeated or the key was not filled.");throw n.name="MessageCounterError",n}return delete e.messageKeys[a.counter],r.HKDF(he.toArrayBuffer(t),new ArrayBuffer(32),"WhisperMessageKeys")}))}.bind(this)).then(function(e){return this.storage.getIdentityKeyPair().then(function(n){var a=new Uint8Array(i.byteLength+66+1);return a.set(new Uint8Array(he.toArrayBuffer(t.indexInfo.remoteIdentityKey))),a.set(new Uint8Array(he.toArrayBuffer(n.pubKey)),33),a[66]=51,a.set(new Uint8Array(i),67),r.verifyMAC(a.buffer,e[1],o,8)}.bind(this)).then((function(){return r.crypto.decrypt(e[0],a.ciphertext.toArrayBuffer(),e[2].slice(0,16))}))}.bind(this)).then((function(e){return delete t.pendingPreKey,e})))},fillMessageKeys:function(e,t){if(e.chainKey.counter>=t)return Promise.resolve();if(t-e.chainKey.counter>2e3)throw new Error("Over 2000 messages into the future!");if(void 0===e.chainKey.key)throw new Error("Got invalid request to extend chain after it was already closed");var n=he.toArrayBuffer(e.chainKey.key),i=new Uint8Array(1);return i[0]=1,r.crypto.sign(n,i.buffer).then(function(o){return i[0]=2,r.crypto.sign(n,i.buffer).then(function(n){return e.messageKeys[e.chainKey.counter+1]=o,e.chainKey.key=n,e.chainKey.counter+=1,this.fillMessageKeys(e,t)}.bind(this))}.bind(this))},maybeStepRatchet:function(e,t,n){if(void 0!==e[he.toString(t)])return Promise.resolve();__LOG__(2)`libsignal: New remote ephemeral key`;var i=e.currentRatchet;return Promise.resolve().then(function(){var t=e[he.toString(i.lastRemoteEphemeralKey)];if(void 0!==t)return this.fillMessageKeys(t,n).then((function(){delete t.chainKey.key,e.oldRatchetList[e.oldRatchetList.length]={added:Date.now(),ephemeralKey:i.lastRemoteEphemeralKey}}))}.bind(this)).then(function(){return this.calculateRatchet(e,t,!1).then(function(){var n=he.toString(i.ephemeralKeyPair.pubKey);return void 0!==e[n]&&(i.previousCounter=e[n].chainKey.counter,delete e[n]),r.crypto.createKeyPair().then(function(n){return i.ephemeralKeyPair=n,this.calculateRatchet(e,t,!0).then(function(){i.lastRemoteEphemeralKey=t}.bind(this))}.bind(this))}.bind(this))}.bind(this))},calculateRatchet:function(e,t,n){var i=e.currentRatchet;return r.crypto.ECDHE(t,he.toArrayBuffer(i.ephemeralKeyPair.privKey)).then((function(o){return r.HKDF(o,he.toArrayBuffer(i.rootKey),"WhisperRatchet").then((function(o){var a;a=n?i.ephemeralKeyPair.pubKey:t,e[he.toString(a)]={messageKeys:{},chainKey:{counter:-1,key:o[1]},chainType:n?r.ChainType.SENDING:r.ChainType.RECEIVING},i.rootKey=o[0]}))}))},getRemoteRegistrationId:function(){return r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){return this.getRecord(this.remoteAddress.toString()).then((function(e){if(void 0!==e){var t=e.getOpenSession();return void 0===t?null:t.registrationId}}))}.bind(this))},hasOpenSession:function(){return r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){return this.getRecord(this.remoteAddress.toString()).then((function(e){return void 0!==e&&e.haveOpenSession()}))}.bind(this))},closeOpenSessionForDevice:function(){var e=this.remoteAddress.toString();return r.SessionLock.queueJobForNumber(e,function(){return this.getRecord(e).then(function(t){if(void 0!==t&&void 0!==t.getOpenSession())return t.archiveCurrentState(),this.storage.storeSession(e,t.prepareRecord())}.bind(this))}.bind(this))},deleteAllSessionsForDevice:function(){var e=this.remoteAddress.toString();return r.SessionLock.queueJobForNumber(e,function(){return this.getRecord(e).then(function(t){if(void 0!==t)return t.deleteAllSessions(),this.storage.storeSession(e,t.prepareRecord())}.bind(this))}.bind(this))}},libsignal.SessionCipher=function(e,t){var n=new Se(e,t);this.encrypt=n.encrypt.bind(n),this.decryptPreKeyWhisperMessage=n.decryptPreKeyWhisperMessage.bind(n),this.decryptWhisperMessage=n.decryptWhisperMessage.bind(n),this.getRemoteRegistrationId=n.getRemoteRegistrationId.bind(n),this.hasOpenSession=n.hasOpenSession.bind(n),this.closeOpenSessionForDevice=n.closeOpenSessionForDevice.bind(n),this.deleteAllSessionsForDevice=n.deleteAllSessionsForDevice.bind(n)},function(){"use strict";r.SessionLock={};var e={};r.SessionLock.queueJobForNumber=function(t,n){var r=e[t]||Promise.resolve(),i=e[t]=r.then(n,n),o=function(){e[t]===i&&delete e[t]};return i.then(o,o),i}}(),function(){function e(t,n,i){return t=dcodeIO.ByteBuffer.concat([t,n]).toArrayBuffer(),r.crypto.hash(t).then((function(t){return 0==--i?t:e(t,n,i)}))}function t(e,t){for(var n=((e[t]*Math.pow(2,32)+e[t+1]*Math.pow(2,24)+e[t+2]*Math.pow(2,16)+e[t+3]*Math.pow(2,8)+e[t+4])%1e5).toString();n.length<5;)n="0"+n;return n}function n(n,r,i){var o;return e(dcodeIO.ByteBuffer.concat([(o=0,new Uint16Array([o]).buffer),r,n]).toArrayBuffer(),r,i).then((function(e){return t(e=new Uint8Array(e),0)+t(e,5)+t(e,10)+t(e,15)+t(e,20)+t(e,25)}))}libsignal.FingerprintGenerator=function(e){this.iterations=e},libsignal.FingerprintGenerator.prototype={createFor:function(e,t,r,i){if(!("string"==typeof e&&"string"==typeof r&&t instanceof ArrayBuffer&&i instanceof ArrayBuffer))throw new Error("Invalid arguments");return Promise.all([n(e,t,this.iterations),n(r,i,this.iterations)]).then((function(e){return e.sort().join("")}))}}}(),(r=r||{}).SenderKeyRecord=function(){"use strict";var e=function(){this.sessions=[],this.version="v1"};return e.initRecordFromData=function(t){"v1"!==t.version&&function(e){throw new Error("Error migrating GroupSessionRecord")}();var n=new e;return n.sessions=t.sessions,n},e.prototype={prepareRecord:function(){return{sessions:this.sessions,version:this.version}},makeSenderKeyRecord:function(e,t,n,r){return{keyId:e,signatureKey:r,chainKey:{counter:t,key:n},messageKeys:[]}},addSenderKeyState:function(e,t,n,r){this.sessions.push(this.makeSenderKeyRecord(e,t,n,r)),this.sessions.length>5&&(this.sessions=this.sessions.slice(1))},getSenderKeyDistMsgData:function(){var e=this.sessions[this.sessions.length-1];return{id:e.keyId,iteration:e.chainKey.counter,chainKey:e.chainKey.key,signingKey:e.signatureKey.pubKey}},getSession:function(e){for(var t=0;t<this.sessions.length;t++)if(this.sessions[t].keyId===e)return this.sessions[t]},getOpenSession:function(){return this.sessions[this.sessions.length-1]},deleteAllSessions:function(){this.sessions={}}},e}(),ve.prototype={process:function(e,t,n){return t.addSenderKeyState(n.id,n.iteration,dcodeIO.ByteBuffer.wrap(n.chainKey).toArrayBuffer(),dcodeIO.ByteBuffer.wrap(n.signingKey).toArrayBuffer()),this.storage.storeSenderKey(e,t.prepareRecord())},create:function(e){var t=`${this.groupId}::${this.remoteAddress.toString()}`;0==e.sessions.length&&e.addSenderKeyState(libsignal.KeyHelper.generateSenderKeyId(),0,libsignal.KeyHelper.generateSenderKey(),libsignal.Curve.generateKeyPair());var n=e.getSenderKeyDistMsgData(),i=new r.protobuf.SenderKeyDistributionMessage;i.id=n.id,i.iteration=n.iteration,i.chainKey=he.toArrayBuffer(n.chainKey),i.signingKey=he.toArrayBuffer(n.signingKey);var o=i.encodeAB(),a=new Uint8Array(o.byteLength+1);return a[0]=51,a.set(new Uint8Array(o),1),this.storage.storeSenderKey(t,e.prepareRecord()).then((function(){return a}))}},libsignal.GroupSessionBuilder=function(e,t,n){var r=new ve(e,t,n);this.process=r.process.bind(r)},function(){"use strict";r.GroupSessionLock={};var e={};r.GroupSessionLock.queueJobForNumber=function(t,n){var r=e[t]||Promise.resolve(),i=e[t]=r.then(n,n),o=function(){e[t]===i&&delete e[t]};return i.then(o,o),i}}(),Ie.prototype={getRecord:function(){return this.storage.loadSenderKey(this.getSenderKeyName()).then((function(e){if(void 0!==e)return r.SenderKeyRecord.initRecordFromData(e)}))},hkdkOutputToSymmetricMaterial(e,t){var n=new Uint8Array(32);return n.set(new Uint8Array(e.slice(16))),n.set(new Uint8Array(t.slice(0,16)),16),{key:n.buffer,iv:e.slice(0,16)}},getSenderKeyName:function(){return`${this.groupId}::${this.remoteAddress.toString()}`},encrypt:function(e){return e=dcodeIO.ByteBuffer.wrap(e).toArrayBuffer(),r.GroupSessionLock.queueJobForNumber(this.getSenderKeyName(),function(){return this.getRecord().then(function(t){if(void 0===t)throw new Error("No session senderKeyRecord");var n=t.getOpenSession();if(!n)throw new Error("No session to encrypt message for "+address);var i=new r.protobuf.SenderKeyMessage,o=0===n.chainKey.counter?0:n.chainKey.counter+1;return this.fillMessageKeys(n,o).then(function(){var e=n.messageKeys[o];return i.id=n.keyId,i.iteration=o,delete n.messageKeys[o],r.HKDF(he.toArrayBuffer(e),new ArrayBuffer(32),"WhisperGroup")}.bind(this)).then(function(o){var a=this.hkdkOutputToSymmetricMaterial(o[0],o[1]);return r.crypto.encrypt(a.key,e,a.iv).then(function(e){i.ciphertext=e;var o=i.toArrayBuffer(),a=new Uint8Array(o.byteLength+1);a[0]=51,a.set(new Uint8Array(o),1);var s=he.toArrayBuffer(n.signatureKey.privKey);return r.crypto.Ed25519Sign(s,a.buffer).then(function(e){var n=new Uint8Array(o.byteLength+65);return n[0]=51,n.set(new Uint8Array(o),1),n.set(new Uint8Array(e,0,64),o.byteLength+1),this.storage.storeSenderKey(this.getSenderKeyName(),t.prepareRecord()).then((function(){return n}))}.bind(this))}.bind(this))}.bind(this)).then(function(e){return he.toString(e)}.bind(this))}.bind(this))}.bind(this))},decryptSenderKeyMessage:function(e,t){e=dcodeIO.ByteBuffer.wrap(e,t).toArrayBuffer();var n=new Uint8Array(e)[0];if((15&n)>3||n>>4<3)throw new Error("Incompatible version number on SenderKeyMessage");var i=e.slice(1,e.byteLength-64),o=e.slice(0,e.byteLength-64),a=e.slice(e.byteLength-64),s=r.protobuf.SenderKeyMessage.decode(i),l=s.id;return r.GroupSessionLock.queueJobForNumber(this.getSenderKeyName(),function(){return this.getRecord().then(function(e){if(void 0===e)return Promise.reject(new Error("No session found to decrypt message from "+this.remoteAddress.toString()));var t=e.getSession(l),n=he.toArrayBuffer(t.signatureKey);return r.crypto.Ed25519Verify(new Uint8Array(n),new Uint8Array(o),new Uint8Array(a)).then(function(){return this.fillMessageKeys(t,s.iteration).then(function(){var e=t.messageKeys[s.iteration];if(void 0===e){var n=new Error("Message key not found. The counter was repeated or the key was not filled.");throw n.name="MessageCounterError",n}return delete t.messageKeys[s.iteration],r.HKDF(he.toArrayBuffer(e),new ArrayBuffer(32),"WhisperGroup")}.bind(this)).then(function(e){var t=this.hkdkOutputToSymmetricMaterial(e[0],e[1]);return r.crypto.decrypt(t.key,s.ciphertext.toArrayBuffer(),t.iv)}.bind(this)).then(function(t){return this.storage.storeSenderKey(this.getSenderKeyName(),e.prepareRecord()).then((function(){return t}))}.bind(this))}.bind(this))}.bind(this))}.bind(this))},fillMessageKeys:function(e,t){if(e.chainKey.counter>t)return Promise.resolve();if(t-e.chainKey.counter>2e3)throw new Error("Over 2000 messages into the future!");if(void 0===e.chainKey.key)throw new Error("Got invalid request to extend chain after it was already closed");var n=he.toArrayBuffer(e.chainKey.key),i=new Uint8Array(1);return i[0]=1,r.crypto.sign(n,i.buffer).then(function(o){return e.messageKeys[e.chainKey.counter]=o,i[0]=2,r.crypto.sign(n,i.buffer).then(function(n){return e.chainKey.key=n,e.chainKey.counter+=1,this.fillMessageKeys(e,t)}.bind(this))}.bind(this))},createSenderKeyDistributionMsg:function(){var e=new ve(this.storage,this.remoteAddress.toString(),this.groupId.toString());return this.getRecord().then(function(t){return t||(t=new r.SenderKeyRecord),e.create(t)}.bind(this))},decryptSenderKeyDistributionMessage:function(e){var t=(e=dcodeIO.ByteBuffer.wrap(e)).readUint8();if((15&t)>3||t>>4<3)throw new Error("Incompatible version number on PreKeyWhisperMessage");this.remoteAddress.toString();return r.GroupSessionLock.queueJobForNumber(this.getSenderKeyName(),function(){return this.getRecord().then(function(t){t||(t=new r.SenderKeyRecord);var n=r.protobuf.SenderKeyDistributionMessage.decode(e);return new ve(this.storage,this.remoteAddress.toString(),this.groupId.toString()).process(this.getSenderKeyName(),t,n)}.bind(this))}.bind(this))}},libsignal.GroupCipher=function(e,t,n){var r=new Ie(e,t,n);this.decryptSenderKeyDistributionMessage=r.decryptSenderKeyDistributionMessage.bind(r),this.createSenderKeyDistributionMsg=r.createSenderKeyDistributionMsg.bind(r),this.encrypt=r.encrypt.bind(r),this.fillMessageKeys=r.fillMessageKeys.bind(r),this.getSenderKeyName=r.getSenderKeyName.bind(r),this.decryptSenderKeyMessage=r.decryptSenderKeyMessage.bind(r),this.getRecord=r.getRecord.bind(r)},Te.prototype={getRecord:function(e){return this.storage.loadSession(e).then((function(e){if(void 0!==e)return r.SessionRecord.initRecordFromData(e)}))},getSessionBaseKey:function(){return r.SessionLock.queueJobForNumber(this.remoteAddress.toString(),function(){return this.getRecord(this.remoteAddress.toString()).then((function(e){if(void 0!==e){var t=e.getOpenSession();if(void 0!==t)return he.toArrayBuffer(t.indexInfo.baseKey)}}))}.bind(this))}},libsignal.SessionInfo=function(e,t){var n=new Te(e,t);this.getSessionBaseKey=n.getSessionBaseKey.bind(n)}}()},12712:(e,t,n)=>{var r={"./WAWebCountriesLocaleAF.js":[70821,3561],"./WAWebCountriesLocaleAR.js":[91884,7799],"./WAWebCountriesLocaleAZ.js":[13248,1762],"./WAWebCountriesLocaleBG.js":[8530,4986],"./WAWebCountriesLocaleBN.js":[2550,6679],"./WAWebCountriesLocaleCA.js":[19974,5245],"./WAWebCountriesLocaleCS.js":[4546,2830],"./WAWebCountriesLocaleDA.js":[21679,8531],"./WAWebCountriesLocaleDE.js":[59497,5888],"./WAWebCountriesLocaleEL.js":[33380,5942],"./WAWebCountriesLocaleEN.js":[23161,2565],"./WAWebCountriesLocaleES.js":[84335,2615],"./WAWebCountriesLocaleET.js":[56219,9662],"./WAWebCountriesLocaleFA.js":[96191,8195],"./WAWebCountriesLocaleFI.js":[38748,5468],"./WAWebCountriesLocaleFIL.js":[7037,2179],"./WAWebCountriesLocaleFR.js":[76711,3625],"./WAWebCountriesLocaleGU.js":[27994,3932],"./WAWebCountriesLocaleHE.js":[3099,3191],"./WAWebCountriesLocaleHI.js":[24199,919],"./WAWebCountriesLocaleHR.js":[28302,9554],"./WAWebCountriesLocaleHU.js":[23527,8920],"./WAWebCountriesLocaleID.js":[73620,321],"./WAWebCountriesLocaleIT.js":[78215,3701],"./WAWebCountriesLocaleJA.js":[58999,5807],"./WAWebCountriesLocaleKK.js":[10454,6416],"./WAWebCountriesLocaleKN.js":[77280,2571],"./WAWebCountriesLocaleKO.js":[75487,7286],"./WAWebCountriesLocaleLT.js":[18535,9086],"./WAWebCountriesLocaleLV.js":[99294,6999],"./WAWebCountriesLocaleMK.js":[37034,6327],"./WAWebCountriesLocaleML.js":[19784,3370],"./WAWebCountriesLocaleMR.js":[53648,3106],"./WAWebCountriesLocaleMS.js":[46882,5285],"./WAWebCountriesLocaleNB.js":[55421,4085],"./WAWebCountriesLocaleNL.js":[69670,1649],"./WAWebCountriesLocalePA.js":[40900,2400],"./WAWebCountriesLocalePL.js":[5360,5710],"./WAWebCountriesLocalePT.js":[68356,513],"./WAWebCountriesLocaleRO.js":[42880,7303],"./WAWebCountriesLocaleRU.js":[78977,1370],"./WAWebCountriesLocaleSK.js":[23874,2105],"./WAWebCountriesLocaleSL.js":[8531,9115],"./WAWebCountriesLocaleSQ.js":[97283,7548],"./WAWebCountriesLocaleSR.js":[46802,9721],"./WAWebCountriesLocaleSV.js":[79957,1843],"./WAWebCountriesLocaleSW.js":[81755,2189],"./WAWebCountriesLocaleTA.js":[7170,7107],"./WAWebCountriesLocaleTE.js":[69518,9342],"./WAWebCountriesLocaleTH.js":[97994,6286],"./WAWebCountriesLocaleTR.js":[82477,8163],"./WAWebCountriesLocaleUK.js":[16573,9919],"./WAWebCountriesLocaleUR.js":[23113,371],"./WAWebCountriesLocaleUZ.js":[20636,2752],"./WAWebCountriesLocaleVI.js":[40080,326],"./WAWebCountriesLocaleZH-CN.js":[39250,6336],"./WAWebCountriesLocaleZH-HK.js":[62969,743],"./WAWebCountriesLocaleZH-TW.js":[76699,7637]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(r),i.id=12712,e.exports=i},64175:(e,t,n)=>{"use strict";function r(e){return n(46990)(`./${e}`)}function i(e){return n(51937)(`./${e}`)}function o(){return n.e(5211).then(n.bind(n,43738))}function a(e){return n(12712)(`./WAWebCountriesLocale${e.toUpperCase()}.js`)}n.r(t),n.d(t,{getLangModule:()=>r,getMomentLocaleModule:()=>i,getSupportedLocales:()=>o,getCountryData:()=>a})},46990:(e,t,n)=>{var r={"./af":[84583,6365],"./af.js":[84583,6365],"./ar":[16854,8054],"./ar-XB":[8266,9995],"./ar-XB.js":[8266,9995],"./ar.js":[16854,8054],"./az":[83205,7072],"./az.js":[83205,7072],"./bg":[2510,7102],"./bg.js":[2510,7102],"./bn":[29040,8700],"./bn.js":[29040,8700],"./ca":[94010,5632],"./ca.js":[94010,5632],"./cs":[54843,165],"./cs.js":[54843,165],"./da":[61245,1628],"./da.js":[61245,1628],"./de":[47819,7216],"./de.js":[47819,7216],"./el":[14566,1204],"./el.js":[14566,1204],"./en":[62833,6933],"./en.js":[62833,6933],"./es":[20024,673],"./es.js":[20024,673],"./et":[20126,792],"./et.js":[20126,792],"./fa":[50630,9999],"./fa.js":[50630,9999],"./fi":[94317,9613],"./fi.js":[94317,9613],"./fil":[50354,907],"./fil.js":[50354,907],"./fr":[18225,6293],"./fr.js":[18225,6293],"./gu":[4937,6038],"./gu.js":[4937,6038],"./he":[26315,5729],"./he.js":[26315,5729],"./hi":[28211,3722],"./hi.js":[28211,3722],"./hr":[42833,5708],"./hr.js":[42833,5708],"./hu":[87900,2556],"./hu.js":[87900,2556],"./id":[12946,5128],"./id.js":[12946,5128],"./it":[80208,4901],"./it.js":[80208,4901],"./ja":[4198,5182],"./ja.js":[4198,5182],"./kk":[7469,9719],"./kk.js":[7469,9719],"./kn":[57828,155],"./kn.js":[57828,155],"./ko":[89322,820],"./ko.js":[89322,820],"./lt":[41661,1529],"./lt.js":[41661,1529],"./lv":[60093,4708],"./lv.js":[60093,4708],"./mk":[74709,6651],"./mk.js":[74709,6651],"./ml":[38497,6655],"./ml.js":[38497,6655],"./mr":[26878,1248],"./mr.js":[26878,1248],"./ms":[69988,5443],"./ms.js":[69988,5443],"./nb":[28232,7749],"./nb.js":[28232,7749],"./nl":[50693,9750],"./nl.js":[50693,9750],"./pa":[96240,9815],"./pa.js":[96240,9815],"./pl":[76936,8628],"./pl.js":[76936,8628],"./pt":[67004,6953],"./pt-BR":[74186,2091],"./pt-BR.js":[74186,2091],"./pt.js":[67004,6953],"./ro":[55671,7162],"./ro.js":[55671,7162],"./ru":[12953,8292],"./ru.js":[12953,8292],"./sk":[4831,1770],"./sk.js":[4831,1770],"./sl":[10331,4259],"./sl.js":[10331,4259],"./sq":[61660,9737],"./sq.js":[61660,9737],"./sr":[78928,6331],"./sr.js":[78928,6331],"./sv":[78986,2944],"./sv.js":[78986,2944],"./sw":[68063,3998],"./sw.js":[68063,3998],"./ta":[59344,2739],"./ta.js":[59344,2739],"./te":[74002,5650],"./te.js":[74002,5650],"./th":[32164,2135],"./th.js":[32164,2135],"./tr":[2598,248],"./tr.js":[2598,248],"./uk":[35734,906],"./uk.js":[35734,906],"./ur":[60689,4361],"./ur.js":[60689,4361],"./uz":[37761,4873],"./uz.js":[37761,4873],"./vi":[94742,8598],"./vi.js":[94742,8598],"./zh-CN":[17385,6483],"./zh-CN.js":[17385,6483],"./zh-HK":[60719,1081],"./zh-HK.js":[60719,1081],"./zh-TW":[55281,7542],"./zh-TW.js":[55281,7542]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(r),i.id=46990,e.exports=i},51937:(e,t,n)=>{var r={"./af":[46703,3748],"./af.js":[46703,3748],"./ar":[27431,1473],"./ar-DZ":[33438,6884],"./ar-DZ.js":[33438,6884],"./ar-KW":[85143,6282],"./ar-KW.js":[85143,6282],"./ar-LY":[68709,5671],"./ar-LY.js":[68709,5671],"./ar-MA":[4330,2966],"./ar-MA.js":[4330,2966],"./ar-SA":[43960,9646],"./ar-SA.js":[43960,9646],"./ar-TN":[83993,9289],"./ar-TN.js":[83993,9289],"./ar-XB":[36448,3934],"./ar-XB.js":[36448,3934],"./ar.js":[27431,1473],"./az":[51725,5740],"./az.js":[51725,5740],"./bn":[17564,7728],"./bn.js":[17564,7728],"./ca":[57129,9817],"./ca.js":[57129,9817],"./cs":[99439,2023],"./cs.js":[99439,2023],"./da":[22707,7315],"./da.js":[22707,7315],"./de":[51823,5862],"./de.js":[51823,5862],"./el":[3161,1055],"./el.js":[3161,1055],"./en-AU":[47547,8678],"./en-AU.js":[47547,8678],"./en-CA":[27915,4616],"./en-CA.js":[27915,4616],"./en-GB":[85762,9227],"./en-GB.js":[85762,9227],"./en-IE":[52315,2979],"./en-IE.js":[52315,2979],"./en-NZ":[45661,3892],"./en-NZ.js":[45661,3892],"./es":[36573,1791],"./es-DO":[33415,2394],"./es-DO.js":[33415,2394],"./es.js":[36573,1791],"./et":[86804,4473],"./et.js":[86804,4473],"./fa":[79081,7662],"./fa.js":[79081,7662],"./fi":[13699,7386],"./fi.js":[13699,7386],"./fr":[57132,2445],"./fr-CA":[3525,9765],"./fr-CA.js":[3525,9765],"./fr-CH":[1037,8799],"./fr-CH.js":[1037,8799],"./fr.js":[57132,2445],"./gu":[95055,4468],"./gu.js":[95055,4468],"./he":[9359,5027],"./he.js":[9359,5027],"./hi":[66887,6709],"./hi.js":[66887,6709],"./hr":[16321,1381],"./hr.js":[16321,1381],"./hu":[86724,4339],"./hu.js":[86724,4339],"./id":[31702,6511],"./id.js":[31702,6511],"./it":[48895,5247],"./it.js":[48895,5247],"./kk":[74388,7074],"./kk.js":[74388,7074],"./kn":[74443,6568],"./kn.js":[74443,6568],"./ko":[26217,4818],"./ko.js":[26217,4818],"./lt":[2483,6920],"./lt.js":[2483,6920],"./mk":[2419,9545],"./mk.js":[2419,9545],"./ml":[63586,3113],"./ml.js":[63586,3113],"./mr":[85570,3422],"./mr.js":[85570,3422],"./ms":[26891,7739],"./ms-MY":[78386,1520],"./ms-MY.js":[78386,1520],"./ms.js":[26891,7739],"./nb":[69116,5959],"./nb.js":[69116,5959],"./nl":[67394,319],"./nl.js":[67394,319],"./pa-IN":[2458,8132],"./pa-IN.js":[2458,8132],"./pl":[51557,4980],"./pl.js":[51557,4980],"./pt":[27677,9116],"./pt-BR":[89908,6547],"./pt-BR.js":[89908,6547],"./pt.js":[27677,9116],"./ro":[3247,3569],"./ro.js":[3247,3569],"./ru":[17315,2957],"./ru.js":[17315,2957],"./sk":[87385,5965],"./sk.js":[87385,5965],"./sl":[21495,3501],"./sl.js":[21495,3501],"./sq":[95648,6496],"./sq.js":[95648,6496],"./sr":[63884,5170],"./sr-CYRL":[33680,5790],"./sr-CYRL.js":[33680,5790],"./sr.js":[63884,5170],"./sv":[60824,1069],"./sv.js":[60824,1069],"./sw":[12352,2017],"./sw.js":[12352,2017],"./ta":[66621,8634],"./ta.js":[66621,8634],"./te":[8070,5201],"./te.js":[8070,5201],"./th":[70736,951],"./th.js":[70736,951],"./tr":[28392,9313],"./tr.js":[28392,9313],"./uk":[95483,9682],"./uk.js":[95483,9682],"./ur":[8652,6163],"./ur.js":[8652,6163],"./uz":[46789,3017],"./uz-LATN":[52046,8117],"./uz-LATN.js":[52046,8117],"./uz.js":[46789,3017],"./zh-CN":[67704,3047],"./zh-CN.js":[67704,3047],"./zh-TW":[7504,5125],"./zh-TW.js":[7504,5125]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(r),i.id=51937,e.exports=i},29657:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={a11y_product_context_menu:"Open the product context menu",a11y_product_context_menu_comment:"Accessibility: label for product context menu button, this is a button that opens menu dropdown when contact is focused. [A11y]",a11y_send_as_sticker_label_off:"Turn off send as sticker",a11y_send_as_sticker_label_off_comment:"Accessibility label for turning off send as sticker toggle button. [A11y]",a11y_send_as_sticker_label_on:"Turn on send as sticker",a11y_send_as_sticker_label_on_comment:"Accessibility label for turning on send as sticker toggle button. [A11y]",action_spam_report:"Reporting spam",action_spam_report_failed:"Couldn't report spam",action_spam_reported:"Reported spam",add_a_caption:"Add a caption",add_group_icon:"Add group icon",add_profile_photo:"Add profile photo",attach_document:"Document",biz_privacy_info_bsp:"__businessName__ used other companies to store and manage this message.",biz_privacy_info_bsp_and_fb:"__businessName__ used Facebook and other companies to store and manage this message.",biz_privacy_info_bsp_and_fb_comment:"Body copy for a dialog that explains whether the business was using a third party to manage the message.",biz_privacy_info_bsp_comment:"Body copy for a dialog that explains whether the business was using a third party to manage the message.",biz_privacy_info_e2ee_from_biz:"This message was delivered directly from __businessName__.",biz_privacy_info_e2ee_from_biz_comment:"Body copy for a dialog that explains whether the business was using a third party to manage the message.",biz_privacy_info_e2ee_to_biz:"This message was delivered directly to __businessName__.",biz_privacy_info_e2ee_to_biz_comment:"Body copy for a dialog that explains whether the business was using a third party to manage the message.",biz_privacy_info_fb:"__businessName__ used Facebook to store and manage this message.",biz_privacy_info_fb_comment:"Body copy for a dialog that explains whether the business was using a third party to manage the message.",blocked_description:"List of contacts that you have blocked",broadcast_deleted:"Broadcast list deleted",browser_not_supported:"Browser not supported",browser_not_supported_comment:"Title for a page we show when the user using a browser we don't support",business_hours_edit_end_time:"End Time",business_hours_edit_end_time_comment:"Label for business hours edit end time",business_hours_edit_start_time:"Start Time",business_hours_edit_start_time_comment:"Label for business hours edit start time",business_not_a_contact:"This verified business is not in your contact list.",business_not_a_contact_comment:"UI shown when receiving first message from a verified business",business_profile_confirmed_as:"Confirmed as __businessName__",business_profile_confirmed_as_comment:"(business_profile_confirmed) as businessName in business profile",business_profile_edit_end_time:"End Time",business_profile_edit_end_time_comment:"Label for business hours edit end time",business_profile_edit_name_description:"This name will be visible to your WhatsApp customers and can be edited from the app on your mobile device.",business_profile_edit_name_description_comment:"Business profile edit screen, business name section. Currently this field is not editable in the web.",business_profile_verified_as:"__verified__ as __businessName__",business_profile_verified_as_comment:"(business_profile_verified) as businessName in business profile",cannot_forward_capability_contact:"__count__ message couldn't be forwarded because __contact__ is on a version of WhatsApp that doesn't support it.",cannot_forward_capability_contact_plural:"__count__ messages couldn't be forwarded because __contact__ is on a version of WhatsApp that doesn't support them.",cannot_forward_file_missing_and_capability_contact:"__count__ message couldn't be forwarded because the file is missing or __contact__ is on a version of WhatsApp that doesn't support it.",cannot_forward_file_missing_and_capability_contact_comment:"Shown when trying to forward a message to another user",cannot_forward_file_missing_and_capability_contact_plural:"__count__ messages couldn't be forwarded because the file is missing or __contact__ is on a version of WhatsApp that doesn't support them.",cart_item_quantity:"Qty __quantity__",cart_item_quantity_comment:"Quantity shown by each item in the Cart",cart_received_detail_drawer_title:"Received cart",cart_received_detail_drawer_title_comment:"Title for the Order Details Drawer, displayed after click on Order message",catalog_view_all:"View all",catalog_view_all_comment:"Label shown on view all CTA of catalog preview section, leading to full catalog view",change_group_icon:"Change group icon",change_profile_photo:"Change profile photo",charge_phone_description:"Charge your phone to keep using WhatsApp",click_to_reload_qr_code:"Click to reload QR code",community_groups_added:"Group __formattedNames__ was added",community_groups_added_comment:"System message displayed in default subgroup when a groups are added to a community, we know the group names but we don't know the author, __formattedNames__ will be the names of the added groups as a comma separated list [COM] {private}",community_groups_added_plural:"Groups __formattedNames__ were added",community_groups_removed:"The group __formattedNames__ was removed",community_groups_removed_comment:"System message displayed in default subgroup when groups are removed from a community, we know the group names but we don't know the author, __formattedNames__ will be the names of the removed groups as a comma separated list [COM] {private}",community_groups_removed_plural:"The groups __formattedNames__ were removed",confirm_unblock_contact_and_forward:"Unblock __chat__ and forward messages?",contact_info_groups_in_common_plural:"__number__ groups in common",content_placeholder_incomplete_msgs:"Older messages may be available",content_placeholder_incomplete_msgs_comment:"A placeholder card because some messages may not be synced from phone.",content_placeholder_search_phone:"Use WhatsApp on your phone to search messages from before __date__.",content_placeholder_search_phone_comment:"Secondary text in a placeholder card to search for messages on phone because some messages may not be synced from phone.",conversation_placeholder_check_phone:"Use WhatsApp on your phone to see the complete chat history.",conversation_placeholder_check_phone_comment:"Secondary text in a placeholder card shown on the top of conversation panel because some messages are not synced from phone.",dismiss:"Dismiss",dismiss_comment:"Displayed as the button text in the spam panel to not report spam",e2e_encrypted:"End-to-end encrypted",e2e_encrypted_comment:"Generic message about encryption, placed alongside lock icon. Used when we want to emphasize that communication is encrypted.",edit_image_add_text:"Add text to your image",edit_image_add_text_comment:"Displayed as placeholder text when the user opens up the text overlay tool in the image editor",enumeration_and:"& ",enumeration_and_comment:"punctuation used for joining the last item in a list e.g.: Adam, John, Jane & Mary",enumeration_bullet:"  ",enumeration_bullet_comment:"punctuation used for joining the last item in a list e.g.: Adam  John  Jane  Mary",enumeration_comma:", ",enumeration_comma_comment:"punctuation used for separating words in a list e.g.: Adam, John, Jane and Mary",ephemeral_explanation:"Turning on this setting will make new messages disappear from this chat after 7 days. Recipients can still save these messages elsewhere.",ephemeral_explanation_comment:"Body copy description that explains what happens when disappearing messages are turned on. [EPH]",ephemeral_explanation_generic:"Turning on this setting will make new messages disappear from this chat after a selected amount of time. Recipients can still save these messages elsewhere.",ephemeral_explanation_generic_comment:"Body copy description that explains what happens when disappearing messages are turned on for a selected amount of time (for example, 7 days, 24 hours). [EPH]",ephemeral_group_permission_chat:"Anyone in this chat can change this setting.",ephemeral_group_permission_chat_comment:"Text in the disappearing messages drawer for 1:1 chats informing users everyone is allowed to change the setting. [EPH]",ephemeral_group_permission_group:"Group admins control who can change this setting.",ephemeral_group_permission_group_comment:"Text in the disappearing messages drawer for group chats informing users group admins control who are allowed to change the setting. [EPH]",ephemeral_setting_on:"On",ephemeral_setting_on_comment:"Copy under a menu label in chat settings that shows disappearing messages are turned on. [EPH]",fts_search_placeholder_results_incomplete:"Older results may be available",fts_search_placeholder_results_incomplete_comment:"A placeholder card shown with the message search results because not all chat history has been synced yet.",get_edge:"Microsoft Edge",get_google_chrome:"Google Chrome",get_mozilla_firefox:"Mozilla Firefox",get_opera:"Opera",get_safari:"Safari (macOS 11+ Only)",get_safari_comment:"Safari minimum version browser description",gif_files_not_supported:"Custom GIF animations are currently not supported. Please use provided GIF selection feature.",gif_files_not_supported_comment:"Warn user that animated GIF file will be sent as a regular image",global_call_unmute:"Incoming calls off. Click to restore.",global_call_unmute_comment:"Toast message displayed asking user whether to restore incoming call",group_admin_not_a_contact:"You were added by someone who's not in your contacts",group_deleted:"Group deleted",group_invite_cancel:"Cancel",group_invite_link_description:"Anyone with WhatsApp can follow this link to join this group. Only share it with people you trust.",group_invite_revoke_confirmation_text:"Are you sure you want to reset the invite link for __groupName__? If you reset the link, no one will be able to use it to join this group.",group_invite_revoke_confirmation_text_comment:"Confirmation link for dialog when user wants to reset the group invite link. The parameter is the group name.",group_invite_v4_cant_join_body_desktop:"Joining group invites from Desktop is not yet available on the multi-device beta. Use your phone instead.",group_invite_v4_cant_join_body_desktop_comment:"Main text of modal shown to user to inform them that they can't use group invite to join the group from desktop",group_invite_v4_cant_join_body_web:"Joining group invites from Web is not yet available on the multi-device beta. Use your phone instead.",group_invite_v4_cant_join_body_web_comment:"Main text of modal shown to user to inform them that they can't use group invite to join the group from web",group_invite_v4_cant_join_title:"Can't join group",group_invite_v4_cant_join_title_comment:"Title of modal shown to user to inform them that they can't use group invite to join the group from web/desktop",group_invite_v4_cant_revoke_body_desktop:"Viewing and revoking group invites from Desktop is not yet available on the multi-device beta. Use your phone instead.",group_invite_v4_cant_revoke_body_desktop_comment:"Main text of modal shown to user to inform them that they can't view or revoke group invite from desktop",group_invite_v4_cant_revoke_body_web:"Viewing and revoking group invites from Web is not yet available on the multi-device beta. Use your phone instead.",group_invite_v4_cant_revoke_body_web_comment:"Main text of modal shown to user to inform them that they can't view or revoke group invite from web",group_invite_v4_cant_revoke_title:"Can't view group invite details",group_invite_v4_cant_revoke_title_comment:"Title of modal shown to user to inform them that they can't view or revoke group invite from web/desktop",group_muted:"Group muted",hidden_group_message_text_with_author:"Message from __author__",if_unchecked_you_will_be_logged_out_afterawhile:"You'll be logged out after several minutes of inactivity",intro_connection:"WhatsApp connects to your phone to sync messages. To reduce data usage, connect your phone to Wi-Fi.",intro_description_upgrade_to_md:"With this update, your phone won't need to stay online to use WhatsApp on web, desktop or other devices. Up to 4 linked devices and 1 phone can be used at the same time. __learn_more__",intro_description_upgrade_to_md_biz:"With this update, your phone won't need to stay online to use WhatsApp Business on web, desktop or other devices. Up to 4 linked devices and 1 phone can be used at the same time. __learn_more__",intro_description_upgrade_to_md_biz_comment:"Text shown on landing page to encourage user to upgrade to MD when paired to WA Business [MD-BIZ]",intro_description_upgrade_to_md_comment:"Text shown on landing page to encourage user to upgrade to MD",intro_description_upgrade_to_md_countdown_time:"This version will expire today at __time__. With the update, your phone won't need to stay online to use WhatsApp on other devices. Up to 4 linked devices and 1 phone can be used at the same time. __learn_more__",intro_description_upgrade_to_md_countdown_time_biz:"This version will expire today at __time__. With the update, your phone won't need to stay online to use WhatsApp Business on other devices. Up to 4 linked devices and 1 phone can be used at the same time. __learn_more__",intro_description_upgrade_to_md_countdown_time_biz_comment:"Text shown on landing page to encourage user to upgrade to MD [MD-BIZ]",intro_description_upgrade_to_md_countdown_time_comment:"Text shown on landing page to encourage user to upgrade to MD",intro_native_mac:"WhatsApp is available for Mac. __get_it_here__.",intro_native_mac_comment:"Desktop client promotion on web client intro screen. __get_it_here__ is replaced with download link.",intro_native_mac_md:"Make calls from desktop with WhatsApp for Mac. __get_it_here__.",intro_native_mac_md_comment:"Desktop client promotion on web client intro screen. __get_it_here__ is replaced with download link. Shown to users post md v1.1 rollout.",intro_native_windows:"WhatsApp is available for Windows. __get_it_here__.",intro_native_windows_comment:"Desktop client promotion on web client intro screen. __get_it_here__ is replaced with download link.",intro_native_windows_md:"Make calls from desktop with WhatsApp for Windows. __get_it_here__.",intro_native_windows_md_comment:"Desktop client promotion on web client intro screen. __get_it_here__ is replaced with download link. Shown to users post md v1.1 rollout.",intro_title:"Keep your phone connected",invite_exp_at:"Expires at __time__",invite_exp_at_comment:"Group invite expiration time shown in the groups v4 invite modal",login_android_menu:"Menu __android_menu_icon__",login_android_menu_comment:"WhatsApp Web login instructions for Android, show the Menu icon that users need to tap",login_iphone_settings:"Settings __iphone_settings_icon__",login_iphone_settings_comment:"WhatsApp Web login instructions for iPhone, show the Settings icon that users need to tap",login_step_2:"Tap __android_menu__ or __iphone_settings__ and select __whatsapp_web_menu_item__",login_step_2_comment:"WhatsApp Web login instructions, step 2, placeholders will be replaced with icons and 'WhatsApp Web' (menu item in mobile apps)",login_step_3_md:"Tap on __login_step_3_md_link_device__",login_step_3_md_comment:"WhatsApp Web login instructions post MD upgrade after transition UI, the 'new' step 3",login_whatsapp_web:"WhatsApp Web",login_whatsapp_web_comment:"App name in the top left on login page",low_storage_warning:"More than 1GB storage usage detected. Please be aware that remaining storage is low.",low_storage_warning_comment:"UI shown when internal users have more than 1GB storage consumption",low_storage_warning_title:"Low storage warning",low_storage_warning_title_comment:"UI title shown when internal users have more than 1GB storage consumption",md_upgrade_butterbar_countdown_today_text:"This version will expire today at __time__. Update to use WhatsApp Web without keeping your phone online.",md_upgrade_butterbar_countdown_today_text_comment:"Text of butterbar indicating when they'll be force upgraded to new WhatsApp Web (MD)",md_upgrade_butterbar_countdown_today_text_desktop:"This version will expire today at __time__. Update to use WhatsApp Desktop without keeping your phone online.",md_upgrade_butterbar_countdown_today_text_desktop_comment:"Text of butterbar indicating when they'll be force upgraded to new WhatsApp Desktop (MD)",media_editor_add_caption:"Add a caption",media_editor_add_caption_comment:"Text for a button to add caption for an image in the media editor.",media_file_changed:"This file was changed from original.",media_file_changed_comment:"Warning message displayed in case if uploaded media file was changed from the original, for example gif is replaced with static image.",menuitem_blocked:"Blocked",menuitem_help:"Help",menuitem_keep_me_signed_in:"Keep me signed in",menuitem_notifications:"Notifications",menuitem_profile:"Profile",msg_send_title:"Send message to",mute_time:'Mute "__name__" for',mute_time_comment:"Dialog title for muting a chat or group chat",new_chat_flow_title:"New chat",no_contacts:"No contacts",no_groups:"No groups",not_spam:"Not spam",num_images_not_rendered:"+__number__",num_images_not_rendered_comment:"Number of images not rendered in an image album grid",option_auto_launch:"Start WhatsApp at Login",order_detail_drawer_title:"Order Detail",order_detail_drawer_title_comment:"Title of Drawer containing an order detail view [SOD]",order_detail_drawer_title_owner:"Your Order",order_detail_drawer_title_owner_comment:"Title of Drawer containing an order detail view, when user is the creator of the Order [SOD]",order_message_estimated_total:"__total__ (estimated total)",order_message_estimated_total_comment:"Estimated total shown on Order Message [SOD]",phone_disconnected_md_upgrade:"Update now to use WhatsApp Web on other devices without keeping your phone online.",phone_disconnected_md_upgrade_comment:"String shown on butterbar to create awareness about new version of WhatsApp Web.",remove_group_icon:"Remove this group's icon?",remove_photo:"Remove photo",remove_profile_photo:"Remove your profile photo?",report_spam:"Report spam",resend_message:"Click to resend",scan_db:"Scan Database Usage",scan_db_comment:"Request to scan datatbase title text",security_drawer_learn_more:"Learn which chats are end to end encrypted",security_drawer_learn_more_comment:"Learn more link in Settings > Security",security_drawer_setting_title:"Show security notifications",security_drawer_setting_title_comment:"Label for security notifications checkbox (Settings > Security)",send_as_sticker_tooltip_photo:"Photo set to send as sticker",send_as_sticker_tooltip_photo_comment:"Will appear in a tooltip after the send as sticker setting is turned on.",send_contact:"Send contact",send_contact_comment:"Title of modal dialog when forwarding a single contact to existing chat threads",send_contacts:"Send contacts",sender_not_a_contact:"The sender is not in your contact list",starred_empty:"No starred messages",starred_flow_title:"Starred messages",trying_to_reach_phone:"Trying to reach phone",unblock_contact:"Unblock Contact",unblock_contact_comment:"Button to unblock a specific contact",update_edge:"Download Microsoft Edge",update_edge_comment:"Text content on button that links to the Microsoft Edge browser download page",update_google_chrome:"Update Google Chrome",update_mozilla_firefox:"Update Mozilla Firefox",update_oculus:"Update Meta Quest Browser",update_oculus_comment:"Text content on button that links to the Meta Quest Browser download page",update_safari:"Update Safari",update_samsung:"Update Samsung Internet",update_samsung_comment:"Text content on button that links to the Samsung Internet browser download page",upgrade_to_md_modal_awareness_content_1:"Your phone will no longer need to stay online to use WhatsApp on web, desktop or other devices. __learn_more__",upgrade_to_md_modal_awareness_content_1_biz:"Your phone will no longer need to stay online to use WhatsApp Business on web, desktop or other devices. __learn_more__",upgrade_to_md_modal_awareness_content_1_biz_comment:"Text shown to user when they click on 'get update' link on the butterbar [MD-BIZ]",upgrade_to_md_modal_awareness_content_1_comment:"Text shown to user when they click on 'get update' link on the butterbar",upload_photo:"Upload photo",viewed_by_count:"Viewed by __count__",viewed_by_count_comment:"Denotes number of contacts who have viewed the users status",voip_active_call_action_turn_off_screen_sharing:"Stop screen sharing",voip_active_call_action_turn_off_screen_sharing_comment:"Screen sharing buttom tooltip text when screen sharing is off",voip_active_call_action_turn_on_screen_sharing:"Start screen sharing",voip_active_call_action_turn_on_screen_sharing_comment:"Screen sharing buttom tooltip text when screen sharing is on",voip_active_call_microphone_and_speaker_hardware_disconnected:"Your call will end in a few seconds because your microphone and sound output device were disconnected.",voip_active_call_microphone_and_speaker_hardware_disconnected_comment:"Notification displayed when call is about to end in few seconds because microphone and sound output device were disconnected",voip_active_call_microphone_hardware_disconnected:"Your call will end in a few seconds because your microphone was disconnected.",voip_active_call_microphone_hardware_disconnected_comment:"Notification displayed when call is about to end in few seconds because microphone was disconnected",voip_active_call_speaker_hardware_disconnected:"Your call will end in a few seconds because your sound output device was disconnected.",voip_active_call_speaker_hardware_disconnected_comment:"Notification displayed when call is about to end in few seconds because sounds output device was disconnected",voip_permission_camera_usage:"WhatsApp will use your computer's camera for video calls and taking photos. You can always change this later in your computer's settings.",voip_permission_camera_usage_comment:"When WhatsApp needs to use the camera for the first time (to take a picture or to make a desktop video call), a native MacOS modal appears with this message and prompting the user to either allow or deny WhatsApp permission to use the camera. NOTE: This string was accidentally deleted and re-inserted, please use any existing translations. Thanks!",voip_permission_microphone_usage:"WhatsApp will use your computer's microphone for calls and voice messages. You can always change this later in your computer's settings.",voip_permission_microphone_usage_comment:"When WhatsApp needs to use the microphone for the first time (to record a PTT message of make a desktop call), a native MacOS modal appears with this message and prompting the user to either allow or deny WhatsApp permission to use the microphone.  NOTE: This string was accidentally deleted and re-inserted, please use any existing translations. Thanks!",voip_window_title:"__contactName__ - WhatsApp voice call",voip_window_title_comment:"Title of the VOIP window during voice call",voip_window_title_video:"__contactName__ - WhatsApp video call",voip_window_title_video_comment:"Title of the VOIP window during video call",web_add_device_from_you:"Your security code with __contactName__ changed because you logged into a new device.",web_add_device_from_you_comment:"Text displayed when a user logged into a new device",web_business_profile_high_alert:'WhatsApp has verified that this is the official business account of "__businessName__".',web_business_profile_high_alert_comment:"text shown in alert when Official Business Account clicked in business profile and name matches contact",web_business_profile_high_mismatch_alert:"WhatsApp has verified that this is the official business account of __businessName__. This account is saved with a different name in your contacts.",web_business_profile_high_mismatch_alert_comment:"text shown in alert when Official Business Account clicked in business profile and name doesn't match contact",web_can_not_verify_security_code_adv_v2:"Your security code could not be verified with __contactName__. Click to learn more.",web_can_not_verify_security_code_adv_v2_comment:"Text shown when a security code can't be verified due to error in device list, rolled out with adv v2",web_can_not_verify_security_code_adv_v2_description:"Verify your security code with __contactName__ because there was an error with their list of linked devices.",web_can_not_verify_security_code_adv_v2_description_comment:"Text shown on dialog when user taps on self-device notification, rolled out with adv v2",web_contact_info_encrypted_enterprise:"Messages to this chat are secured with end-to-end encryption. __businessName__ may use another company to store, read and respond to your messages. Click to learn more.",web_contact_info_encrypted_enterprise_comment:"Shown in contact system message to indicate the encryption state for chats with enterprise users",web_delete_group:"Delete group",web_exit:"Exit",web_exit_comment:"Confirmation button",web_group_creation_date_at_support:"Created __date__ at __time__",web_group_creation_date_at_support_comment:"The date and time the Group was created [support]",web_group_creation_today_at_support:"Created today at __time__",web_group_creation_today_at_support_comment:"The time a Group was created, if today [support]",web_group_creation_weekday_at_support:"Created __day__ at __time__",web_group_creation_weekday_at_support_comment:"The day and time a Group was created, if less than a week ago. For example, Monday at 3:00 PM [support]",web_group_creation_yesterday_at_support:"Created yesterday at __time__",web_group_creation_yesterday_at_support_comment:"The time a Group was created, if yesterday [support]",web_groups_participation_you_and_name:"Groups in common",web_individual_chat_encryption_state_change_description_enterprise:"Messages to this chat and calls are secured with end-to-end encryption, which means that WhatsApp and third parties can't read or listen to them. __businessName__ may use a service to store, read and respond to your messages and calls. Contact __businessName__ for information on their privacy practices.",web_individual_chat_encryption_state_change_description_enterprise_comment:"Shown in popup when the encryption state change system message is clicked on in a chat with an enterprise user",web_md_downgrade_group_with_participant:"__name__ and possibly other group members are using an old version of WhatsApp that cannot receive messages sent from web/desktop using the multi-device beta. Use your phone to message this group.",web_md_downgrade_group_with_participant_comment:"Shown in the pop up when failed to delivery message due to md downgrade for group chat, similar to web_md_downgrade_group",web_md_downgrade_user:"__name__ is using an old version of WhatsApp that cannot receive messages sent from web/desktop using the multi-device beta. Use your phone to message them.",web_md_downgrade_user_comment:"Shown in the pop up when failed to delivery message due to md downgrade for 1:1 chat",web_md_verify_explanation:"To verify that messages and calls with __contactName__ are end-to-end encrypted, open this screen on your phone, and follow the instructions.",web_md_verify_explanation_comment:"A short paragraph explaining to users how to verify security code on multi-device",web_menuitem_status:"About",web_menuitem_status_comment:"Refers to old status which is now called About",web_psa_title:"OFFICIAL ANNOUNCEMENTS",web_verify_error_local_mismatched:'You opened "Verify security code" for the wrong phone number. Open it for the correct number to verify __contact__.',web_verify_error_local_mismatched_comment:"Error to display if the QR code has the incorrect local identity and the correct remote identity",web_verify_error_remote_mismatched:'__contact__ opened "Verify security code" for the wrong phone number. Ask __contact__ to open it for your phone number.',web_verify_error_remote_mismatched_comment:"Error to display if the QR code has the correct local identity and the incorrect remote identity",whatsapp_chrome_instructions:"To use WhatsApp, update __chrome_update__ or use __firefox_homepage__, __safari_homepage__, __edge_homepage__ or __opera_homepage__.",whatsapp_chrome_instructions_comment:"Chrome instructions for telling users how to upgrade to a supported browser version.",whatsapp_chrome_version:"WhatsApp works with Google Chrome __min_version_chrome__+",whatsapp_chrome_version_comment:"Specifies the minimum version of the Chrome browser required to use WhatsApp. (The parameter is the minimum browser version.)",whatsapp_edge_instructions:"To use WhatsApp, update __edge_homepage__ or use __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.",whatsapp_edge_instructions_comment:"Edge instructions for telling users how to upgrade to a supported browser version.",whatsapp_edge_version:"WhatsApp works with Microsoft Edge __min_version_edge__+",whatsapp_edge_version_comment:"Specifies the minimum version of the Edge browser required to use WhatsApp. (The parameter is the minimum browser version.)",whatsapp_firefox_instructions:"To use WhatsApp, update __firefox_update__ or use __chrome_homepage__, __safari_homepage__, __edge_homepage__ or __opera_homepage__.",whatsapp_firefox_instructions_comment:"Firefox instructions for telling users how to upgrade to a supported browser version.",whatsapp_firefox_version:"WhatsApp works with Mozilla Firefox __min_version_firefox__+",whatsapp_firefox_version_comment:"Specifies the minimum version of the Firefox browser required to use WhatsApp. (The parameter is the minimum browser version.)",whatsapp_group_invite:"WhatsApp group invite",whatsapp_group_invite_comment:"Description in group invite message bubble",whatsapp_oculus_instructions:"To use WhatsApp, update __oculus_homepage__.",whatsapp_oculus_instructions_comment:"Meta Quest Browser instructions for telling users how to upgrade to a supported web browser version.",whatsapp_oculus_version:"WhatsApp works with Meta Quest Browser __min_version_oculus__+",whatsapp_oculus_version_comment:"Specifies the minimum version of the Meta Quest Browser required to use WhatsApp. (The parameter is the minimum browser version.)",whatsapp_safari_instructions:"To use WhatsApp, update __safari_update__ or use __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.",whatsapp_safari_instructions_comment:"Safari instructions for telling users how to upgrade to a supported browser version.",whatsapp_safari_limited:"To use all of WhatsApp's features like photo capturing and Voice Message recording, we recommend using __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.",whatsapp_safari_limited_title:"Using Safari",whatsapp_safari_version:"WhatsApp works with Safari __min_version_safari__+",whatsapp_safari_version_comment:"Specifies the minimum version of the Safari browser required to use WhatsApp. (The parameter is the minimum browser version.)",whatsapp_samsung_instructions:"To use WhatsApp, update __samsung_update__ or use __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.",whatsapp_samsung_instructions_comment:"Samsung Internet instructions for telling users how to upgrade to a supported browser version.",whatsapp_samsung_version:"WhatsApp works with Samsung Internet __min_version_samsung__+",whatsapp_samsung_version_comment:"Specifies the minimum version of the Samsung Internet browser required to use WhatsApp. (The parameter is the minimum browser version.)",whatsapp_web:"WhatsApp",whatsapp_web_description:"Send and receive WhatsApp messages right from your computer.",whatsapp_web_desktop_display_name:"WhatsApp (old)",whatsapp_web_desktop_display_name_comment:"This is the name of the Electron-based desktop app. We're adding '(old)' to indicate to users that this app will expire soon, and that they need to either start using the native Mac app or start using WhatsApp Web. [ELECTRON_UWP]",whatsapp_web_meta_description:"Quickly send and receive WhatsApp messages right from your computer.",whatsapp_web_requirements:"We recommend using WhatsApp with one of the following browsers:",whatsapp_web_supports:"WhatsApp also supports:",you_cant_add_more_than_x_labels:"You can't add more than __count__ labels",you_cant_add_more_than_x_labels_comment:"Popup text telling the user that they have reached the max label count",your_hop_on_whatsapp_message_comment:"Message shown on a modal before letting Users go to Commerce Manager"}},48926:e=>{function t(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},59713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},81109:(e,t,n)=>{var r=n(59713);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0},6479:(e,t,n)=>{var r=n(37316);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},37316:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.default=e.exports,e.exports.__esModule=!0},95762:e=>{"use strict";
/**
 * @author Titus Wormer
 * @copyright 2016 Titus Wormer
 * @license MIT
 * @module bcp-47
 * @fileoverview Parse and stringify BCP 47 language tags.
 */var t={}.hasOwnProperty,n="-".charCodeAt(0),r="x".charCodeAt(0),i="a".charCodeAt(0),o="z".charCodeAt(0),a="0".charCodeAt(0),s="9".charCodeAt(0),l={1:"Too long variant, expected at most 8 characters",2:"Too long extension, expected at most 8 characters",3:"Too many extended language subtags, expected at most 3 subtags",4:"Empty extension, extensions must have at least 2 characters of content",5:"Too long private-use area, expected at most 8 characters",6:"Found superfluous content after tag"},u=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],c={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"};function d(e){return e>=a&&e<=s}function p(e){return e>=i&&e<=o}function f(e){return d(e)||p(e)}function _(e){return e===r}function g(e){return e===n}var h={parse:function e(n,r){var i,o,a,s,h,A,m=r||{},E=m.warning,y=m.forgiving,S=m.normalize,v={};if(null==S&&(S=!0),null==n)throw new Error("Expected string, got `"+n+"`");function I(e){return n.charCodeAt(e)}function T(e,t){return E&&E(l[t],t,e),y?v:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}if(v={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},i=n=String(n),n=n.toLowerCase(),t.call(c,n))return S&&c[n]?e(c[n]):(v[-1===u.indexOf(n)?"irregular":"regular"]=i,v);for(o=I(a=0);p(o);)o=I(++a);if(a<2||a>8)a=0;else{if(a>4)v.language=i.slice(0,a);else if(a>3)v.language=i.slice(0,a);else for(h=0,v.language=i.slice(0,a);g(I(a))&&p(I(a+1))&&p(I(a+2))&&p(I(a+3))&&!p(I(a+4));){if(h>=3)return T(a,3);v.extendedLanguageSubtags.push(i.slice(a+1,a+4)),a+=4,h++}for(g(I(a))&&p(I(a+1))&&p(I(a+2))&&p(I(a+3))&&p(I(a+4))&&!p(I(a+5))&&(v.script=i.slice(a+1,a+5),a+=5),g(I(a))&&(p(I(a+1))&&p(I(a+2))&&!p(I(a+3))?(v.region=i.slice(a+1,a+3),a+=3):d(I(a+1))&&d(I(a+2))&&d(I(a+3))&&!d(I(a+4))&&(v.region=i.slice(a+1,a+4),a+=4));g(I(a));){for(A=a+1,s=0;f(I(A));)if(A++,++s>8)return T(A,1);if(s>=5)v.variants.push(i.slice(a+1,A)),a=A;else{if(!(d(I(a+1))&&s>=4))break;v.variants.push(i.slice(a+1,A)),a=A}}for(;g(I(a))&&!_(I(a+1))&&f(I(a+1))&&g(I(a+2))&&f(I(a+3));){for(A=a+2,h=0;g(I(A))&&f(I(A+1))&&f(I(A+2));)for(A+=2,s=2,h++;f(I(A));){if(s>8)return T(A,2);A++,s++}if(!h)return T(A,4);v.extensions.push({singleton:i.charAt(a+1),extensions:i.slice(a+3,A).split("-")}),a=A}}if(0===a&&_(I(0))||1!==a&&g(I(a))&&_(I(a+1)))for(A=a=a?a+2:1;g(I(A))&&f(I(A+1));){for(A+=2,s=1;f(I(A));){if(s>=8)return T(A,5);A++,s++}v.privateuse.push(i.slice(a+1,A)),a=A}return a!==n.length?T(a,6):v},stringify:function(e){var t,n,r,i,o=[];if(e&&(e.irregular||e.regular))return e.irregular||e.regular;if(e&&e.language)for(o=o.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]),n=-1,i=(t=e.extensions||[]).length;++n<i;)(r=t[n]).singleton&&r.extensions&&r.extensions.length&&(o=o.concat(r.singleton,r.extensions));return e&&e.privateuse&&e.privateuse.length&&(o=o.concat("x",e.privateuse)),o.join("-")}};e.exports=h},86128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>xt});var r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g;function a(e,t){return"object"!=typeof t||r(t).forEach((function(n){e[n]=t[n]})),e}var s=Object.getPrototypeOf,l={}.hasOwnProperty;function u(e,t){return l.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),r(t).forEach((function(n){p(e,n,t[n])}))}var d=Object.defineProperty;function p(e,t,n,r){d(e,t,a(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}var _=Object.getOwnPropertyDescriptor;function g(e,t){var n;return _(e,t)||(n=s(e))&&g(n,t)}var h=[].slice;function A(e,t,n){return h.call(e,t,n)}function m(e,t){return t(e)}function E(e){if(!e)throw new Error("Assertion Failed")}function y(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function S(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function v(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function I(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function T(e,t){if(u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=T(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:T(s,t.substr(a+1))}}function b(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){E("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)b(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var l=e[a];l||(l=e[a]={}),b(l,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function M(e){var t={};for(var n in e)u(e,n)&&(t[n]=e[n]);return t}var P=[].concat;function C(e){return P.apply([],e)}var O="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(C([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return o[e]})).map((function(e){return o[e]}));function R(e){if(!e||"object"!=typeof e)return e;var t;if(i(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(R(e[n]))}else if(O.indexOf(e.constructor)>=0)t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)u(e,o)&&(t[o]=R(e[o]));return t}function N(e,t,n,i){return n=n||{},i=i||"",r(e).forEach((function(r){if(u(t,r)){var o=e[r],a=t[r];"object"==typeof o&&"object"==typeof a&&o&&a&&""+o.constructor==""+a.constructor?N(o,a,n,i+r+"."):o!==a&&(n[i+r]=t[r])}else n[i+r]=void 0})),r(t).forEach((function(r){u(e,r)||(n[i+r]=t[r])})),n}var w="undefined"!=typeof Symbol&&Symbol.iterator,D=w?function(e){var t;return null!=e&&(t=e[w])&&t.apply(e)}:function(){return null},L={};function B(e){var t,n,r,o;if(1===arguments.length){if(i(e))return e.slice();if(this===L&&"string"==typeof e)return[e];if(o=D(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var k="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function G(e,t){k=e,U=t}var U=function(){return!0},x=!new Error("").stack;function F(){if(x)try{throw F.arguments,new Error}catch(e){return e}return new Error}function K(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(U).map((function(e){return"\n"+e})).join("")):""}var Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],j=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function W(e,t){this._e=F(),this.name=e,this.message=t}function H(e,t,n,r){this._e=F(),this.failures=t,this.failedKeys=r,this.successCount=n}function Q(e,t){this._e=F(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map((function(e){return e.toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}(e,t)}f(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+K(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(H).from(W),f(Q).from(W);var $=j.reduce((function(e,t){return e[t]=t+"Error",e}),{}),q=W,J=j.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=F(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=V[t]||n,this.inner=null)}return f(r).from(q),e[t]=r,e}),{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var z=Y.reduce((function(e,t){return e[t+"Error"]=J[t],e}),{});var X=j.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=J[t]),e}),{});function Z(){}function ee(e){return e}function te(e,t){return null==e||e===ee?t:function(n){return t(e(n))}}function ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function re(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ne(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ne(i,this.onerror):i),void 0!==o?o:n}}function ie(e,t){return e===Z?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ne(r,this.onerror):r)}}function oe(e,t){return e===Z?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ne(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ne(o,this.onerror):o),void 0===r?void 0===s?void 0:s:a(r,s)}}function ae(e,t){return e===Z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function se(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}X.ModifyError=H,X.DexieError=W,X.BulkError=Q;var le={},ue=function(){try{return[Ne.resolve(),Ne.prototype,Ne.resolve(),Function.constructor]}catch(t){var e=o.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),ce=ue[0],de=ue[1],pe=ue[2],fe=de&&de.then,_e=ce&&ce.constructor,ge=ue[3],he=!!pe,Ae=!1,me=pe?function(){pe.then(Ke)}:o.setImmediate?setImmediate.bind(null,Ke):o.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Ke(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ke,0)},Ee=function(e,t){Ce.push([e,t]),Se&&(me(),Se=!1)},ye=!0,Se=!0,ve=[],Ie=[],Te=null,be=ee,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dt,txRelaxedDurabilityEnabled:!1,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{dt(e[0],e[1])}catch(e){}}))}},Pe=Me,Ce=[],Oe=0,Re=[];function Ne(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var t=this._PSD=Pe;if(k&&(this._stackHolder=F(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==le)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,Le(this,e)}var we={get:function(){var e=Pe,t=ze;function n(n,r){var i=this,o=!e.global&&(e!==Pe||t!==ze);o&&tt();var a=new Ne((function(t,a){Ge(i,new De(lt(n,e,o),lt(r,e,o),t,a,e))}));return k&&Fe(a,this),a}return n.prototype=le,n},set:function(e){p(this,"then",e&&e.prototype===le?we:{get:function(){return e},set:we.set})}};function De(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Le(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ye();t&&"function"==typeof t.then?Le(e,(function(e,n){t instanceof Ne?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,ke(e)),n&&je()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(Ie.push(t),null===e._state){var n=e._lib&&Ye();t=be(t),e._state=!1,e._value=t,k&&null!==t&&"object"==typeof t&&!t._promise&&I((function(){var n=g(t,"stack");t._promise=e,p(t,"stack",{get:function(){return Ae?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){ve.some((function(t){return t._value===e._value}))||ve.push(e)}(e),ke(e),n&&je()}}function ke(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ge(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Oe&&(++Oe,Ee((function(){0==--Oe&&Ve()}),[]))}function Ge(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Oe,Ee(Ue,[n,e,t])}else e._listeners.push(t)}function Ue(e,t,n){try{Te=t;var r,i=t._value;t._state?r=e(i):(Ie.length&&(Ie=[]),r=e(i),-1===Ie.indexOf(i)&&function(e){var t=ve.length;for(;t;)if(ve[--t]._value===e._value)return void ve.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Te=null,0==--Oe&&Ve(),--n.psd.ref||n.psd.finalize()}}function xe(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=K(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return k&&((r=K(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&xe(e._prev,t,n)),t}function Fe(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ke(){Ye()&&je()}function Ye(){var e=ye;return ye=!1,Se=!1,e}function je(){var e,t,n;do{for(;Ce.length>0;)for(e=Ce,Ce=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Ce.length>0);ye=!0,Se=!0}function Ve(){var e=ve;ve=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Re.slice(0),n=t.length;n;)t[--n]()}function We(e){return new Ne(le,!1,e)}function He(e,t){var n=Pe;return function(){var r=Ye(),i=Pe;try{return ot(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ot(i,!1),r&&je()}}}c(Ne.prototype,{then:we,_then:function(e,t){Ge(this,new De(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):We(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):We(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),We(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Ae=!0;var e=xe(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ae=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Ne((function(r,i){var o=setTimeout((function(){return i(new J.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(Ne.prototype,Symbol.toStringTag,"Promise"),Me.env=at(),c(Ne,{all:function(){var e=B.apply(null,arguments).map(nt);return new Ne((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Ne.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Ne)return e;if(e&&"function"==typeof e.then)return new Ne((function(t,n){e.then(t,n)}));var t=new Ne(le,!0,e);return Fe(t,Te),t},reject:We,race:function(){var e=B.apply(null,arguments).map(nt);return new Ne((function(t,n){e.map((function(e){return Ne.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Pe},set:function(e){return Pe=e}},newPSD:Ze,usePSD:st,scheduler:{get:function(){return Ee},set:function(e){Ee=e}},rejectionMapper:{get:function(){return be},set:function(e){be=e}},follow:function(e,t){return new Ne((function(n,r){return Ze((function(t,n){var r=Pe;r.unhandleds=[],r.onunhandled=n,r.finalize=ne((function(){var e=this;!function(e){function t(){e(),Re.splice(Re.indexOf(t),1)}Re.push(t),++Oe,Ee((function(){0==--Oe&&Ve()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}});var Qe={awaits:0,echoes:0,id:0},$e=0,qe=[],Je=0,ze=0,Xe=0;function Ze(e,t,n,r){var i=Pe,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xe;var s=Me.env;o.env=he?{Promise:Ne,PromiseProp:{value:Ne,configurable:!0,writable:!0},all:Ne.all,race:Ne.race,resolve:Ne.resolve,reject:Ne.reject,nthen:ut(s.nthen,o),gthen:ut(s.gthen,o)}:{},t&&a(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=st(o,e,n,r);return 0===o.ref&&o.finalize(),l}function et(){return Qe.id||(Qe.id=++$e),++Qe.awaits,Qe.echoes+=7,Qe.id}function tt(e){!Qe.awaits||e&&e!==Qe.id||(0==--Qe.awaits&&(Qe.id=0),Qe.echoes=7*Qe.awaits)}function nt(e){return Qe.echoes&&e&&e.constructor===_e?(et(),e.then((function(e){return tt(),e}),(function(e){return tt(),pt(e)}))):e}function rt(e){++ze,Qe.echoes&&0!=--Qe.echoes||(Qe.echoes=Qe.id=0),qe.push(Pe),ot(e,!0)}function it(){var e=qe[qe.length-1];qe.pop(),ot(e,!1)}function ot(e,t){var n,r=Pe;if((t?!Qe.echoes||Je++&&e===Pe:!Je||--Je&&e===Pe)||(n=t?rt.bind(null,e):it,fe.call(ce,n)),e!==Pe&&(Pe=e,r===Me&&(Me.env=at()),he)){var i=Me.env.Promise,a=e.env;de.then=a.nthen,i.prototype.then=a.gthen,(r.global||e.global)&&(Object.defineProperty(o,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject)}}function at(){var e=o.Promise;return he?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:de.then,gthen:e.prototype.then}:{}}function st(e,t,n,r,i){var o=Pe;try{return ot(e,!0),t(n,r,i)}finally{ot(o,!1)}}function lt(e,t,n){return"function"!=typeof e?e:function(){var r=Pe;n&&et(),ot(t,!0);try{return e.apply(this,arguments)}finally{ot(r,!1)}}}function ut(e,t){return function(n,r){return e.call(this,lt(n,t,!1),lt(r,t,!1))}}var ct="unhandledrejection";function dt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ct,!0,!0),a(r,i)):o.CustomEvent&&a(r=new CustomEvent(ct,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var pt=Ne.reject;function ft(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var o=1,a=arguments.length;o<a;++o)s(arguments[o]);return n;function s(e,r,i){if("object"==typeof e)return l(e);r||(r=ae),i||(i=Z);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function l(e){r(e).forEach((function(t){var n=e[t];if(i(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new J.InvalidArgument("Invalid event config");var r=s(t,ee,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){y((function(){e.apply(null,t)}))}))}))}}))}}var _t,gt="{version}",ht=String.fromCharCode(65535),At=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return ht}}(),mt=-1/0,Et="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt="String expected.",St=[],vt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),It=vt,Tt=vt,bt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Mt(e,t){var n,s,l,d,f,_=Mt.dependencies,g=a({addons:Mt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange},t),h=g.addons,y=g.autoOpen,P=g.indexedDB,O=g.IDBKeyRange,w=this._dbSchema={},D=[],G=[],U={},x=null,Y=null,j=!1,V=null,W=!1,$="readonly",q="readwrite",z=this,X=new Ne((function(e){n=e})),ne=new Ne((function(e,t){s=t})),ae=!0,le=!!Ut(P);function ue(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ce(e,t,n){var i=z._createTransaction(q,G,w);i.create(t),i._completion.catch(n);var o=i._reject.bind(i);Ze((function(){Pe.trans=i,0===e?(r(w).forEach((function(e){de(t,e,w[e].primKey,w[e].indexes)})),Ne.follow((function(){return z.on.populate.fire(i)})).catch(o)):function(e,t,n){var i=[],o=D.filter((function(t){return t._cfg.version===e}))[0];if(!o)throw new J.Upgrade("Dexie specification of currently installed DB version is missing");w=z._dbSchema=o._cfg.dbschema;var a=!1;function s(){return i.length?Ne.resolve(i.shift()(t.idbtrans)).then(s):Ne.resolve()}return D.filter((function(t){return t._cfg.version>e})).forEach((function(e){i.push((function(){var r=w,i=e._cfg.dbschema;ke(r,n),ke(i,n),w=z._dbSchema=i;var o=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,l=o.idxByName;for(var u in s)l[u]||a.del.push(u);for(u in l){var c=s[u],d=l[u];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,o])}return n}(r,i);if(o.add.forEach((function(e){de(n,e[0],e[1].primKey,e[1].indexes)})),o.change.forEach((function(e){if(e.recreate)throw new J.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach((function(e){pe(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),pe(t,e)})),e.del.forEach((function(e){t.deleteIndex(e)}))})),e._cfg.contentUpgrade)return a=!0,Ne.follow((function(){e._cfg.contentUpgrade(t)}))})),i.push((function(t){a&&It||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)}))})),s().then((function(){!function(e,t){r(e).forEach((function(n){t.db.objectStoreNames.contains(n)||de(t,n,e[n].primKey,e[n].indexes)}))}(w,n)}))}(e,i,t).catch(o)}))}function de(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){pe(i,e)})),i}function pe(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function fe(e,t,n){if(W||Pe.letThrough){var r=z._createTransaction(e,t,w);try{r.create()}catch(e){return pt(e)}return r._promise(e,(function(e,t){return Ze((function(){return Pe.trans=r,n(e,t,r)}))})).then((function(e){return r._completion.then((function(){return e}))}))}if(!j){if(!y)return pt(new J.DatabaseClosed);z.open().catch(Z)}return X.then((function(){return fe(e,t,n)}))}function he(e,t,n){var r=arguments.length;if(r<2)throw new J.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=C(i);return[e,o,n]}function Ae(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=U[e]?U[e].hook:ft(null,{creating:[re,Z],reading:[te,ee],updating:[oe,Z],deleting:[ie,Z]})}function me(e,t,n){return(n?wt:Rt)((function(n){e.push(n),t&&t()}))}function Ee(e,t,n,r,i){return new Ne((function(o,a){var s=n.length,l=s-1;if(0===s)return o();if(r){var u,c=wt(a),d=Ot(null);I((function(){for(var r=0;r<s;++r){u={onsuccess:null,onerror:null};var a=n[r];i.call(u,a[0],a[1],t);var p=e.delete(a[0]);p._hookCtx=u,p.onerror=c,p.onsuccess=r===l?Ot(o):d}}),(function(e){throw u.onerror&&u.onerror(e),e}))}else for(var p=0;p<s;++p){var f=e.delete(n[p]);f.onerror=Rt(a),p===l&&(f.onsuccess=He((function(){return o()})))}}))}function ye(e,t,n,r){var i=this;this.db=z,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=ft(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ne((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),pt(e)}))}function Se(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function ve(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function Ie(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Te(e,t){return e._cfg.version-t._cfg.version}function be(e,t,n){t.forEach((function(t){var r=n[t];e.forEach((function(e){t in e||(e===ye.prototype||e instanceof ye?p(e,t,{get:function(){return this.table(t)}}):e[t]=new Ae(t,r))}))}))}function Me(e,t,n,r,i,o){var a=He(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=Rt(i)),e.onsuccess=v(t?function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,(function(e){o=e}),r,i)&&a(n.value,n,(function(e){o=e})),o()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};a(t.value,t,(function(e){n=e})),n()}else r()},i)}function Ce(e,t){return P.cmp(e,t)}function Oe(e,t){return Ce(e,t)>0?e:t}function Re(e,t){return P.cmp(e,t)}function we(e,t){return P.cmp(t,e)}function De(e,t){return e<t?-1:e===t?0:1}function Le(e,t){return e>t?-1:e===t?0:1}function Be(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function ke(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],a=t.objectStore(i);l="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var u=a.indexNames[s],c=a.index(u).keyPath,d="string"==typeof c?c:"["+A(c).join("+")+"]";if(e[i]){var p=e[i].idxByName[d];p&&(p.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l=!1)}function Ge(e){z.on("blocked").fire(e),St.filter((function(e){return e.name===z.name&&e!==z&&!e._vcFired})).map((function(t){return t.on("versionchange").fire(e)}))}this.version=function(e){if(x||j)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=D.filter((function(t){return t._cfg.version===e}))[0];return t||(t=new ue(e),D.push(t),D.sort(Te),ae=!1,t)},a(ue.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var t={};D.forEach((function(e){a(t,e._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),w=z._dbSchema=n,[U,z,ye.prototype].forEach((function(e){for(var t in e)e[t]instanceof Ae&&delete e[t]})),be([U,z,ye.prototype,this._cfg.tables],r(n),n),G=r(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){r(e).forEach((function(n){if(null!==e[n]){var r={},o=function(e){var t=[];return e.split(",").forEach((function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Bt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),/\./.test(e)))})),t}(e[n]),a=o.shift();if(a.multi)throw new J.Schema("Primary key cannot be multi-valued");a.keyPath&&b(r,a.keyPath,a.auto?0:a.keyPath),o.forEach((function(e){if(e.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string");b(r,e.keyPath,e.compound?e.keyPath.map((function(){return""})):"")})),t[n]=new kt(n,a,o,r)}}))}}),this._allTables=U,this._createTransaction=function(e,t,n,r){return new ye(e,t,n,r)},this._whenReady=function(e){return W||Pe.letThrough?e():new Ne((function(e,t){if(!j){if(!y)return void t(new J.DatabaseClosed);z.open().catch(Z)}X.then(e,t)})).then(e)},this.verno=0,this.open=function(){if(j||x)return X.then((function(){return Y?pt(Y):z}));k&&(ne._stackHolder=F()),j=!0,Y=null,W=!1;var t=n,i=null;return Ne.race([ne,new Ne((function(t,n){if(!P)throw new J.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=ae?P.open(e):P.open(e,Math.round(10*z.verno));if(!o)throw new J.MissingAPI("IndexedDB API not available");o.onerror=Rt(n),o.onblocked=He(Ge),o.onupgradeneeded=He((function(t){if(i=o.transaction,ae&&!z._allowEmptyDB){o.onerror=Dt,i.abort(),o.result.close();var r=P.deleteDatabase(e);r.onsuccess=r.onerror=He((function(){n(new J.NoSuchDatabase("Database "+e+" doesnt exist"))}))}else{i.onerror=Rt(n),ce((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,i,n)}}),n),o.onsuccess=He((function(){if(i=null,x=o.result,St.push(z),ae)!function(){if(z.verno=x.version/10,z._dbSchema=w={},0===(G=A(x.objectStoreNames,0)).length)return;const e=Pe.txRelaxedDurabilityEnabled?{durability:"relaxed"}:{durability:"default"};var t=x.transaction(Gt(G),"readonly",e);G.forEach((function(e){for(var n=t.objectStore(e),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Bt(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],s=0;s<n.indexNames.length;++s){var l=n.index(n.indexNames[s]);i=(r=l.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var u=new Bt(l.name,r,!!l.unique,!!l.multiEntry,!1,r&&"string"!=typeof r,i);a.push(u)}w[e]=new kt(e,o,a,{})})),be([U],r(w),w)}();else if(x.objectStoreNames.length>0)try{const e=Pe.txRelaxedDurabilityEnabled?{durability:"relaxed"}:{durability:"default"};ke(w,x.transaction(Gt(x.objectStoreNames),$,e))}catch(e){}x.onversionchange=He((function(e){z._vcFired=!0,z.on("versionchange").fire(e)})),le||"__dbnames"===e||_t.dbnames.put({name:e}).catch(Z),t()}),n)}))]).then((function(){return V=[],Ne.resolve(Mt.vip(z.on.ready.fire)).then((function e(){if(V.length>0){var t=V.reduce(se,Z);return V=[],Ne.resolve(Mt.vip(t)).then(e)}}))})).finally((function(){V=null})).then((function(){return j=!1,z})).catch((function(e){try{i&&i.abort()}catch(e){}return j=!1,z.close(),pt(Y=e)})).finally((function(){W=!0,t()}))},this.close=function(){var e=St.indexOf(z);if(e>=0&&St.splice(e,1),x){try{x.close()}catch(e){}x=null}y=!1,Y=new J.DatabaseClosed,j&&s(Y),X=new Ne((function(e){n=e})),ne=new Ne((function(e,t){s=t}))},this.delete=function(){var t=arguments.length>0;return new Ne((function(n,r){if(t)throw new J.InvalidArgument("Arguments not allowed in db.delete()");function i(){z.close();var t=P.deleteDatabase(e);t.onsuccess=He((function(){le||_t.dbnames.delete(e).catch(Z),n()})),t.onerror=Rt(r),t.onblocked=Ge}j?X.then(i):i()}))},this.backendDB=function(){return x},this.isOpen=function(){return null!==x},this.hasBeenClosed=function(){return Y&&Y instanceof J.DatabaseClosed},this.hasFailed=function(){return null!==Y},this.dynamicallyOpened=function(){return ae},this.name=e,c(this,{tables:{get:function(){return r(U).map((function(e){return U[e]}))}}}),this.on=ft(this,"populate","blocked","versionchange",{ready:[se,Z]}),this.on.ready.subscribe=m(this.on.ready.subscribe,(function(e){return function(t,n){Mt.vip((function(){W?(Y||Ne.resolve().then(t),n&&e(t)):V?(V.push(t),n&&e(t)):(e(t),n||e((function e(){z.on.ready.unsubscribe(t),z.on.ready.unsubscribe(e)})))}))}})),this.transaction=function(){var e=he.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Pe.trans;r&&r.db===z&&-1===e.indexOf("!")||(r=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var o=t.map((function(e){var t=e instanceof Ae?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==e||e==$)e=$;else{if("rw"!=e&&e!=q)throw new J.InvalidArgument("Invalid transaction mode: "+e);e=q}if(r){if(r.mode===$&&e===q){if(!i)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach((function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new J.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(function(t,n){n(e)})):pt(e)}return r?r._promise(e,a,"lock"):Pe.trans?st(Pe.transless,(function(){return z._whenReady(a)})):z._whenReady(a);function a(){return Ne.resolve().then((function(){var t,i=Pe.transless||Pe,a=z._createTransaction(e,o,w,r),s={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===ge&&et();var l=Ne.follow((function(){if(t=n.call(a,a))if(t.constructor===_e){var e=tt.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Lt(t))}),s);return(t&&"function"==typeof t.then?Ne.resolve(t).then((function(e){return a.active?e:pt(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return t}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),pt(e)}))}))}},this.table=function(e){if(!u(U,e))throw new J.InvalidTable("Table "+e+" does not exist");return U[e]},c(Ae.prototype,{_trans:function(e,t,n){var r=this._tx||Pe.trans;return r&&r.db===z?r===Pe.trans?r._promise(e,t,n):Ze((function(){return r._promise(e,t,n)}),{trans:r,transless:Pe.transless||Pe}):fe(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,(function(e,n,i){if(-1===i.storeNames.indexOf(r))throw new J.NotFound("Table"+r+" not part of transaction");return t(e,n,i.idbtrans.objectStore(r),i)}),n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore($,(function(t,r,i){var o=i.get(e);o.onerror=Rt(r),o.onsuccess=He((function(){t(n.hook.reading.fire(o.result))}),r)})).then(t)},where:function(e){if("string"==typeof e)return new Se(this,e);if(i(e))return new Se(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&At!==ht)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var o=this.schema.idxByName,a=t.reduce((function(t,n){return[t[0]||o[n],t[0]||!o[n]?Be(t[1],(function(t){return""+T(t,n)==""+e[n]})):t[1]]}),[null,null]),s=a[0];return s?this.where(s.name).equals(e[s.keyPath]).filter(a[1]):n?this.filter(a[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new ve(new Se(this,i(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new ve(new Se(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&Ct(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(u(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(Mt.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Z?this._idbstore(q,(function(t,n,r,i){t(Ee(r,i,e,!1,Z))})):this.where(":id").anyOf(e).delete().then((function(){}))},bulkPut:function(e,t){var n=this;return this._idbstore(q,(function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new J.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,l=function(e){0===u.length?r(e):i(new Q(n.name+".bulkPut(): "+u.length+" of "+c+" operations failed",u))},u=[],c=e.length,d=n;if(n.hook.creating.fire===Z&&n.hook.updating.fire===Z){s=me(u);for(var p=0,f=e.length;p<f;++p)(a=t?o.put(e[p],t[p]):o.put(e[p])).onerror=s;a.onerror=me(u,l),a.onsuccess=Nt(l)}else{var _=t||o.keyPath&&e.map((function(e){return T(e,o.keyPath)})),g=_&&S(_,(function(t,n){return null!=t&&[t,e[n]]}));(_?d.where(":id").anyOf(_.filter((function(e){return null!=e}))).modify((function(){this.value=g[this.primKey],g[this.primKey]=null})).catch(H,(function(e){u=e.failures})).then((function(){for(var n=[],r=t&&[],i=_.length-1;i>=0;--i){var o=_[i];(null==o||g[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(g[o]=null))}return n.reverse(),t&&r.reverse(),d.bulkAdd(n,r)})).then((function(e){var t=_[_.length-1];return null!=t?t:e})):d.bulkAdd(e)).then(l).catch(Q,(function(e){u=u.concat(e.failures),l()})).catch(i)}}),"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(q,(function(i,o,a,s){if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new J.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function l(e){0===p.length?i(e):o(new Q(n.name+".bulkAdd(): "+p.length+" of "+f+" operations failed",p))}var u,c,d,p=[],f=e.length;if(r!==Z){var _,g=a.keyPath;c=me(p,null,!0),d=Ot(null),I((function(){for(var n=0,i=e.length;n<i;++n){_={onerror:null,onsuccess:null};var o=t&&t[n],l=e[n],p=t?o:g?T(l,g):void 0,f=r.call(_,p,l,s);null==p&&null!=f&&(g?b(l=R(l),g,f):o=f),(u=null!=o?a.add(l,o):a.add(l))._hookCtx=_,n<i-1&&(u.onerror=c,_.onsuccess&&(u.onsuccess=d))}}),(function(e){throw _.onerror&&_.onerror(e),e})),u.onerror=me(p,l,!0),u.onsuccess=Ot(l)}else{c=me(p);for(var h=0,A=e.length;h<A;++h)(u=t?a.add(e[h],t[h]):a.add(e[h])).onerror=c;u.onerror=me(p,l),u.onsuccess=Nt(l)}}))},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(q,(function(r,i,o,a){var s={onsuccess:null,onerror:null};if(n!==Z){var l=null!=t?t:o.keyPath?T(e,o.keyPath):void 0,u=n.call(s,l,e,a);null==l&&null!=u&&(o.keyPath?b(e,o.keyPath,u):t=u)}try{var c=null!=t?o.add(e,t):o.add(e);c._hookCtx=s,c.onerror=wt(i),c.onsuccess=Ot((function(t){var n=o.keyPath;n&&b(e,n,t),r(t)}))}catch(e){throw s.onerror&&s.onerror(e),e}}))},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Z||i!==Z){var o=this.schema.primKey.keyPath,a=void 0!==t?t:o&&T(e,o);return null==a?this.add(e):(e=R(e),this._trans(q,(function(){return n.where(":id").equals(a).modify((function(){this.value=e})).then((function(r){return 0===r?n.add(e,t):a}))}),"locked"))}return this._idbstore(q,(function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=Rt(r),o.onsuccess=He((function(t){var r=i.keyPath;r&&b(e,r,t.target.result),n(o.result)}))}))},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(q,(function(t,n,r){var i=r.delete(e);i.onerror=Rt(n),i.onsuccess=He((function(){t(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(q,(function(e,t,n){var r=n.clear();r.onerror=Rt(t),r.onsuccess=He((function(){e(r.result)}))}))},update:function(e,t){if("object"!=typeof t||i(t))throw new J.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);r(t).forEach((function(n){b(e,n,t[n])}));var n=T(e,this.schema.primKey.keyPath);return void 0===n?pt(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),c(ye.prototype,{_lock:function(){return E(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this},_unlock:function(){if(E(!Pe.global),0==--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{st(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Pe.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(E(!this.idbtrans),!e&&!x)switch(Y&&Y.name){case"DatabaseClosedError":throw new J.DatabaseClosed(Y);case"MissingAPIError":throw new J.MissingAPI(Y.message,Y);default:throw new J.OpenFailed(Y)}if(!this.active)throw new J.TransactionInactive;E(null===this._completion._state);const n=Pe.txRelaxedDurabilityEnabled?{durability:"relaxed"}:{durability:"default"};return(e=this.idbtrans=e||x.transaction(Gt(this.storeNames),this.mode,n)).onerror=He((function(n){Dt(n),t._reject(e.error)})),e.onabort=He((function(n){Dt(n),t.active&&t._reject(new J.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=He((function(){t.active=!1,t._resolve()})),this},_promise:function(e,t,n){var r=this;if(e===q&&this.mode!==q)return pt(new J.ReadOnly("Transaction is readonly"));if(!this.active)return pt(new J.TransactionInactive);if(this._locked())return new Ne((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Pe])}));if(n)return Ze((function(){var e=new Ne((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ne((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Ne.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return e}));else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Ne((function(n,i){e.then((function(e){return t._waitingQueue.push(He(n.bind(null,e)))}),(function(e){return t._waitingQueue.push(He(i.bind(null,e)))})).finally((function(){t._waitingFor===r&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new J.Abort),this.active=!1},tables:{get:(d="Transaction.tables",f=function(){return U},function(){return console.warn(d+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+K(F(),1)),f.apply(this,arguments)})},table:function(e){return new Ae(e,z.table(e).schema,this)}}),c(Se.prototype,(function(){function e(e,t,n){var r=e instanceof Se?new ve(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new ve(e,(function(){return O.only("")})).limit(0)}function n(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],u)<0&&(s=l)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function r(t,r,i,o){var a,s,l,u,c,d,p,f=i.length;if(!i.every((function(e){return"string"==typeof e})))return e(t,yt);function _(e){a=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),s=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),l="next"===e?De:Le;var t=i.map((function(e){return{lower:s(e),upper:a(e)}})).sort((function(e,t){return l(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),c=t.map((function(e){return e.lower})),d=e,p="next"===e?"":o}_("next");var g=new ve(t,(function(){return O.bound(u[0],c[f-1]+o)}));g._ondirectionchange=function(e){_(e)};var h=0;return g._addAlgorithm((function(e,t,i){var o=e.key;if("string"!=typeof o)return!1;var a=s(o);if(r(a,c,h))return!0;for(var _=null,g=h;g<f;++g){var A=n(o,a,u[g],c[g],l,d);null===A&&null===_?h=g+1:(null===_||l(_,A)>0)&&(_=A)}return t(null!==_?function(){e.continue(_+p)}:i),!1})),g}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return Ce(n,r)>0||0===Ce(n,r)&&(i||o)&&(!i||!o)?t(this):new ve(this,(function(){return O.bound(n,r,!i,!o)}))}catch(t){return e(this,Et)}},equals:function(e){return new ve(this,(function(){return O.only(e)}))},above:function(e){return new ve(this,(function(){return O.lowerBound(e,!0)}))},aboveOrEqual:function(e){return new ve(this,(function(){return O.lowerBound(e)}))},below:function(e){return new ve(this,(function(){return O.upperBound(e,!0)}))},belowOrEqual:function(e){return new ve(this,(function(){return O.upperBound(e)}))},startsWith:function(t){return"string"!=typeof t?e(this,yt):this.between(t,t+ht,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],ht)},equalsIgnoreCase:function(e){return r(this,(function(e,t){return e===t[0]}),[e],"")},anyOfIgnoreCase:function(){var e=B.apply(L,arguments);return 0===e.length?t(this):r(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},startsWithAnyOfIgnoreCase:function(){var e=B.apply(L,arguments);return 0===e.length?t(this):r(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,ht)},anyOf:function(){var n=B.apply(L,arguments),r=Re;try{n.sort(r)}catch(t){return e(this,Et)}if(0===n.length)return t(this);var i=new ve(this,(function(){return O.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(e){r="next"===e?Re:we,n.sort(r)};var o=0;return i._addAlgorithm((function(e,t,i){for(var a=e.key;r(a,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(a,n[o])||(t((function(){e.continue(n[o])})),!1)})),i},notEqual:function(e){return this.inAnyRange([[mt,e],[e,At]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=B.apply(L,arguments);if(0===t.length)return new ve(this);try{t.sort(Re)}catch(t){return e(this,Et)}var n=t.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[mt,t]]}),null);return n.push([t[t.length-1],At]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&Re(e[0],e[1])<=0})))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var a,s=Re;function l(e,t){return s(e[0],t[0])}try{(a=n.reduce((function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(Ce(t[0],i[1])<0&&Ce(t[1],i[0])>0){i[0]=Ce(o=i[0],a=t[0])<0?o:a,i[1]=Oe(i[1],t[1]);break}}var o,a;return n===r&&e.push(t),e}),[])).sort(l)}catch(t){return e(this,Et)}var u=0,c=o?function(e){return Re(e,a[u][1])>0}:function(e){return Re(e,a[u][1])>=0},d=i?function(e){return we(e,a[u][0])>0}:function(e){return we(e,a[u][0])>=0};var p=c,f=new ve(this,(function(){return O.bound(a[0][0],a[a.length-1][1],!i,!o)}));return f._ondirectionchange=function(e){"next"===e?(p=c,s=Re):(p=d,s=we),a.sort(l)},f._addAlgorithm((function(e,t,n){for(var r=e.key;p(r);)if(++u===a.length)return t(n),!1;return!!function(e){return!c(e)&&!d(e)}(r)||(0===Ce(r,a[u][1])||0===Ce(r,a[u][0])||t((function(){s===Re?e.continue(a[u][0]):e.continue(a[u][1])})),!1)})),f},startsWithAnyOf:function(){var n=B.apply(L,arguments);return n.every((function(e){return"string"==typeof e}))?0===n.length?t(this):this.inAnyRange(n.map((function(e){return[e,e+ht]}))):e(this,"startsWithAnyOf() only works with strings")}}})),c(ve.prototype,(function(){function e(e,t){e.filter=Be(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Be(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new J.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function i(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function o(e,t,n,r,o){var a=e.replayFilter?Be(e.filter,e.replayFilter()):e.filter;e.or?function(){var s={},l=0;function c(){2==++l&&n()}function d(e,n,i){if(!a||a(n,i,c,r)){var o=n.primaryKey,l=""+o;"[object ArrayBuffer]"===l&&(l=""+new Uint8Array(o)),u(s,l)||(s[l]=!0,t(e,n,i))}}e.or._iterate(d,c,r,o),Me(i(e,o),e.algorithm,d,c,r,!e.keysOnly&&e.valueMapper)}():Me(i(e,o),Be(e.algorithm,a),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,pt.bind(null,n.error)):n.table._idbstore($,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,pt.bind(null,t.error)):t.table._idbstore(q,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Be(t.algorithm,e)},_iterate:function(e,t,n,r){return o(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read((function(n,r,i){o(t,e,n,r,i)}))},count:function(e){var t=this._ctx;if(Ie(t,!0))return this._read((function(e,r,i){var o=n(t,i),a=t.range?o.count(t.range):o.count();a.onerror=Rt(r),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}}),e);var r=0;return this._read((function(e,n,i){o(t,(function(){return++r,!1}),(function(){e(r)}),n,i)}),e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)},toArray:function(e){var t=this._ctx;return this._read((function(e,r,i){if(l&&"next"===t.dir&&Ie(t,!0)&&t.limit>0){var a=t.table.hook.reading.fire,s=n(t,i),u=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);u.onerror=Rt(r),u.onsuccess=Nt(a===ee?e:function(t){try{e(t.map(a))}catch(e){r(e)}})}else{var c=[];o(t,(function(e){c.push(e)}),(function(){e(c)}),r,i)}}),e)},offset:function(e){var n=this._ctx;return e<=0||(n.offset+=e,Ie(n)?t(n,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):t(n,(function(){var t=e;return function(){return--t<0}}))),this},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},until:function(t,n){return e(this._ctx,(function(e,r,i){return!t(e.value)||(r(i),n)})),this},first:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return e(this._ctx,(function(e){return t(e.value)})),function(e,t){e.isMatch=Be(e.isMatch,t)}(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new Se(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},primaryKeys:function(e){var t=this._ctx;if(l&&"next"===t.dir&&Ie(t,!0)&&t.limit>0)return this._read((function(e,r,i){var o=n(t,i),a=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);a.onerror=Rt(r),a.onsuccess=Nt(e)})).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,(function(e){var t=e.primaryKey.toString(),n=u(r,t);return r[t]=!0,!n})),this},modify:function(e){var t=this,n=this._ctx.table.hook,i=n.updating.fire,o=n.deleting.fire;return this._write((function(n,s,l,c){var d;if("function"==typeof e)d=i===Z&&o===Z?e:function(t){var n=R(t);if(!1===e.call(this,t,this))return!1;if(u(this,"value")){var a=N(n,this.value),s=i.call(this,a,this.primKey,n,c);s&&(t=this.value,r(s).forEach((function(e){b(t,e,s[e])})))}else o.call(this,this.primKey,t,c)};else if(i===Z){var p=r(e),f=p.length;d=function(t){for(var n=!1,r=0;r<f;++r){var i=p[r],o=e[i];T(t,i)!==o&&(b(t,i,o),n=!0)}return n}}else{var _=e;e=M(_),d=function(t){var n=!1,o=i.call(this,e,this.primKey,R(t),c);return o&&a(e,o),r(e).forEach((function(r){var i=e[r];T(t,r)!==i&&(b(t,r,i),n=!0)})),o&&(e=M(_)),n}}var g=0,h=0,A=!1,m=[],E=[],y=null;function S(e){return e&&(m.push(e),E.push(y)),s(new H("Error modifying one or more objects",m,h,E))}function v(){A&&h+m.length===g&&(m.length>0?S():n(h))}t.clone().raw()._iterate((function(e,t){y=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return m.push(e),E.push(n.primKey),v(),!0}if(!1!==d.call(n,e,n)){var i=!u(n,"value");++g,I((function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=wt(r),e.onsuccess=Ot((function(){++h,v()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){A=!0,v()}),S,l)}))},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==Z;if(!i&&Ie(t)&&(t.isPrimKey&&!Tt||!n))return this._write((function(e,t,r){var i=Rt(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;I((function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(a)}}),(function(e){return t(e)}))}}));var o=i?2e3:1e4;return this._write((function(n,a,s,l){var u=0,c=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),d=[],p=function(){return c.each(i?function(e,t){d.push([t.primaryKey,t.value])}:function(e,t){d.push(t.primaryKey)}).then((function(){return i?d.sort((function(e,t){return Re(e[0],t[0])})):d.sort(Re),Ee(s,l,d,i,r)})).then((function(){var e=d.length;return u+=e,d=[],e<o?u:p()}))};n(p())}))}}})),a(this,{Collection:ve,Table:Ae,Transaction:ye,Version:ue,WhereClause:Se}),z.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+z.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+z.name+"'. Closing db now to resume the delete request."),z.close()})),z.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+z.name+"') was blocked"):console.warn("Upgrade '"+z.name+"' blocked by other connection holding version "+e.oldVersion/10)})),h.forEach((function(e){e(z)}))}function Pt(e){if("function"==typeof e)return new e;if(i(e))return[Pt(e[0])];if(e&&"object"==typeof e){var t={};return Ct(t,e),t}return e}function Ct(e,t){return r(t).forEach((function(n){var r=Pt(t[n]);e[n]=r})),e}function Ot(e){return He((function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),e&&e(i)}),e)}function Rt(e){return He((function(t){return Dt(t),e(t.target.error),!1}))}function Nt(e){return He((function(t){e(t.target.result)}))}function wt(e){return He((function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),Dt(t),e(r),!1}))}function Dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Lt(e){var t=function(t){return e.next(t)},n=o(t),r=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),a=o.value;return o.done?a:a&&"function"==typeof a.then?a.then(n,r):i(a)?Ne.all(a).then(n,r):n(a)}}return o(t)()}function Bt(e,t,n,r,i,o,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+s}function kt(e,t,n,r){this.name=e,this.primKey=t||new Bt,this.indexes=n||[new Bt],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=S(n,(function(e){return[e.name,e]}))}function Gt(e){return 1===e.length?e[0]:e}function Ut(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}G(k,bt),c(Mt,X),c(Mt,{delete:function(e){var t=new Mt(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new Mt(e).open().then((function(e){return e.close(),!0})).catch(Mt.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(e){var t=Ut(Mt.dependencies.indexedDB);return t?new Ne((function(e,n){var r=t();r.onsuccess=function(t){e(A(t.target.result,0))},r.onerror=Rt(n)})).then(e):_t.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&a(this,e)}},applyStructure:Ct,ignoreTransaction:function(e){return Pe.trans?st(Pe.transless,e):e()},vip:function(e){return Ze((function(){return Pe.letThrough=!0,e()}))},async:function(e){return function(){try{var t=Lt(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ne.resolve(t)}catch(e){return pt(e)}}},spawn:function(e,t,n){try{var r=Lt(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ne.resolve(r)}catch(e){return pt(e)}},currentTransaction:{get:function(){return Pe.trans||null}},waitFor:function(e,t){var n=Ne.resolve("function"==typeof e?Mt.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(n):n},Promise:Ne,debug:{get:function(){return k},set:function(e){G(e,"dexie"===e?function(){return!0}:bt)}},derive:f,extend:a,props:c,override:m,Events:ft,getByKeyPath:T,setByKeyPath:b,delByKeyPath:function(e,t){"string"==typeof t?b(e,t,void 0):"length"in t&&[].map.call(t,(function(t){b(e,t,void 0)}))},shallowClone:M,deepClone:R,getObjectDiff:N,asap:y,maxKey:At,minKey:mt,addons:[],connections:St,MultiModifyError:J.Modify,errnames:$,IndexSpec:Bt,TableSchema:kt,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:gt,version:gt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Mt,Dexie:Mt}),Ne.rejectionMapper=function(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!z[e.name])return e;var n=new z[e.name](t||e.message,e);return"stack"in e&&p(n,"stack",{get:function(){return this.inner.stack}}),n},(_t=new Mt("__dbnames")).version(1).stores({dbnames:"name"}),function(){var e="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem(e)||"[]").forEach((function(e){return _t.dbnames.put({name:e}).catch(Z)})),localStorage.removeItem(e))}catch(e){}}();const xt=Mt},11841:e=>{"use strict";var t={bp_IN:"bho",bv_DE:"bar",cb_IQ:"ckb",ck_US:"chr",cx_PH:"ceb",eh_IN:"hi",em_ZM:"bem",fb_AA:"en",fb_AC:"en",fb_AR:"ar",fb_HA:"en",fb_HX:"en",fb_LL:"en",fb_LS:"en",fb_RL:"en",fb_ZH:"zh",fbt_AC:"en",fn_IT:"fur",fv_NG:"fuv",gx_GR:"grc",lr_IT:"lij",nh_MX:"nah",ns_ZA:"nso",qb_DE:"hsb",qc_GT:"quc",qe_US:"esu",qk_DZ:"kab",qr_GR:"rup",qs_DE:"dsb",qt_US:"tli",qv_IT:"vec",qz_MM:"my",sy_SY:"syr",sz_PL:"szl",tl_PH:"fil",tl_ST:"tlh",tq_AR:"tob",tz_MA:"tzm",zz_TR:"zza"},n={get:function(e){if(t[e])return t[e];var n=e.indexOf("_");return n>=0?e.substr(0,n):e}};e.exports=n},6463:e=>{"use strict";e.exports={setupOnce:function(){}}},48041:(e,t,n)=>{"use strict";var r=n(6463),i=n(56884);e.exports=i,r.setupOnce()},56884:(e,t,n)=>{"use strict";var r=n(27418),i={},o={getErrorListener:function(e){var t;return null===(t=i.errorListener)||void 0===t?void 0:t.call(i,e)},logImpression:function(e){var t;null===(t=i.logImpression)||void 0===t||t.call(i,e)},onTranslationOverride:function(e){var t;null===(t=i.onTranslationOverride)||void 0===t||t.call(i,e)},getFbsResult:function(e){return i.getFbsResult(e)},getFbtResult:function(e){return i.getFbtResult(e)},getNumberFormatConfigOverride:function(){var e;return null===(e=i.getNumberFormatConfigOverride)||void 0===e?void 0:e.call(i)},getTranslatedInput:function(e){var t,n;return null!==(t=null===(n=i.getTranslatedInput)||void 0===n?void 0:n.call(i,e))&&void 0!==t?t:e},getViewerContext:function(){return i.getViewerContext()},register:function(e){r(i,e)}};e.exports=o},48360:(e,t,n)=>{"use strict";var r=n(94348),i=n(52995),o=n(78050),a=n(38814),s=n(94705),l=n(75748),u={__esModule:!0,default:l,fbs:s,fbt:l,FbtResult:r,FbtTranslations:i,GenderConst:o,init:n(24204),IntlVariations:a};e.exports=u},81536:(e,t,n)=>{"use strict";var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(n(94348));e.exports=r},62258:e=>{"use strict";e.exports={overrides:{}}},20741:e=>{"use strict";var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;var n={REACT_ELEMENT_TYPE:t,injectReactShim:function(e){var t={validated:!0};e._store=t}};e.exports=n},94348:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(20741),a=n(1117),s=function(e){return e.content},l=function(e){var t,n;function a(t,n){var a;return i(r(a=e.call(this,t,n)||this),"$$typeof",o.REACT_ELEMENT_TYPE),i(r(a),"key",null),i(r(a),"props",void 0),i(r(a),"ref",null),i(r(a),"type",s),a.props={content:t},a}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.get=function(e){return new a(e.contents,e.errorListener)},a}(a);e.exports=l},1117:e=>{"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function e(e,n){t(this,"_contents",void 0),t(this,"_stringValue",void 0),t(this,"_isSerializing",void 0),t(this,"__errorListener",void 0),t(this,"anchor",void 0),t(this,"big",void 0),t(this,"blink",void 0),t(this,"bold",void 0),t(this,"charAt",void 0),t(this,"charCodeAt",void 0),t(this,"codePointAt",void 0),t(this,"contains",void 0),t(this,"endsWith",void 0),t(this,"fixed",void 0),t(this,"fontcolor",void 0),t(this,"fontsize",void 0),t(this,"includes",void 0),t(this,"indexOf",void 0),t(this,"italics",void 0),t(this,"lastIndexOf",void 0),t(this,"link",void 0),t(this,"localeCompare",void 0),t(this,"match",void 0),t(this,"normalize",void 0),t(this,"repeat",void 0),t(this,"replace",void 0),t(this,"search",void 0),t(this,"slice",void 0),t(this,"small",void 0),t(this,"split",void 0),t(this,"startsWith",void 0),t(this,"strike",void 0),t(this,"sub",void 0),t(this,"substr",void 0),t(this,"substring",void 0),t(this,"sup",void 0),t(this,"toLocaleLowerCase",void 0),t(this,"toLocaleUpperCase",void 0),t(this,"toLowerCase",void 0),t(this,"toUpperCase",void 0),t(this,"trim",void 0),t(this,"trimLeft",void 0),t(this,"trimRight",void 0),this._contents=e,this.__errorListener=n,this._isSerializing=!1,this._stringValue=null}var n=e.prototype;return n.flattenToArray=function(){return e.flattenToArray(this._contents)},n.getContents=function(){return this._contents},n.toString=function(){if(Object.isFrozen(this))return this._toString();if(this._isSerializing)return"<<Reentering fbt.toString() is forbidden>>";this._isSerializing=!0;try{return this._toString()}finally{this._isSerializing=!1}},n._toString=function(){if(null!=this._stringValue)return this._stringValue;for(var t="",n=this.flattenToArray(),r=0;r<n.length;++r){var i,o,a=n[r];if("string"==typeof a||a instanceof e)t+=a.toString();else null===(i=this.__errorListener)||void 0===i||null===(o=i.onStringSerializationError)||void 0===o||o.call(i,a)}return Object.isFrozen(this)||(this._stringValue=t),t},n.toJSON=function(){return this.toString()},e.flattenToArray=function(t){for(var n=[],r=0;r<t.length;++r){var i=t[r];Array.isArray(i)?n.push.apply(n,e.flattenToArray(i)):i instanceof e?n.push.apply(n,i.flattenToArray()):n.push(i)}return n},e}();["anchor","big","blink","bold","charAt","charCodeAt","codePointAt","contains","endsWith","fixed","fontcolor","fontsize","includes","indexOf","italics","lastIndexOf","link","localeCompare","match","normalize","repeat","replace","search","slice","small","split","startsWith","strike","sub","substr","substring","sup","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"].forEach((function(e){n.prototype[e]=function(){var t,n;null===(t=this.__errorListener)||void 0===t||null===(n=t.onStringMethodUsed)||void 0===n||n.call(t,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return String.prototype[e].apply(this,i)}})),e.exports=n},77038:(e,t,n)=>{"use strict";var r=n(41143),i={ARG:{INDEX:0,SUBSTITUTION:1},access:function(e,t,n){if(n>=t.length)return"string"==typeof e||Array.isArray(e)||r(!1),e;var o=t[n][i.ARG.INDEX];if(null==o)return i.access(e,t,n+1);("string"==typeof e||Array.isArray(e))&&r(!1);for(var a=0;a<o.length;++a){var s=e[o[a]];if(null!=s){var l=i.access(s,t,n+1);if(null!=l)return l}}return null}};e.exports=i},86369:e=>{"use strict";e.exports={getEnumResult:function(e){return[[e],null]},getGenderResult:function(e,t,n){return[e,t]},getNumberResult:function(e,t,n){return[e,t]},getSubstitution:function(e){return[null,e]},getPronounResult:function(e){return[[e,"*"],null]}}},52995:(e,t,n)=>{"use strict";var r=n(27418),i=n(48041),o={},a={getTranslatedInput:function(e){var t=e.args,n=e.options,r=null==n?void 0:n.hk,a=i.getViewerContext().locale,s=o[a];return null==r||null==(null==s?void 0:s[r])?null:{table:s[r],args:t}},registerTranslations:function(e){o=e},getRegisteredTranslations:function(){return o},mergeTranslations:function(e){Object.keys(e).forEach((function(t){var n;o[t]=r(null!==(n=o[t])&&void 0!==n?n:{},e[t])}))}};e.exports=a},78050:e=>{"use strict";var t=Object.freeze({NOT_A_PERSON:0,FEMALE_SINGULAR:1,MALE_SINGULAR:2,FEMALE_SINGULAR_GUESS:3,MALE_SINGULAR_GUESS:4,MIXED_UNKNOWN:5,NEUTER_SINGULAR:6,UNKNOWN_SINGULAR:7,FEMALE_PLURAL:8,MALE_PLURAL:9,NEUTER_PLURAL:10,UNKNOWN_PLURAL:11});e.exports=t},57505:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return r.NUMBER_OTHER}};e.exports=i},57725:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e||1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},19196:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e||1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},99061:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e>=0&&e<=1?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},54345:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},90568:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e||1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},74510:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e>=0&&e<=1?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},79395:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e>=0&&e<=1||e>=11&&e<=99?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},68640:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},61230:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},53214:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},25002:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},82322:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e||2===e||3===e||e%10!=4&&e%10!=6&&e%10!=9?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},38013:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==0||e%100>=11&&e%100<=19?r.NUMBER_ZERO:e%10==1&&e%100!=11?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},64180:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e?r.NUMBER_ZERO:1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},24822:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e?r.NUMBER_ZERO:1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},18536:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:r.NUMBER_OTHER}};e.exports=i},53066:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e||1===e?r.NUMBER_ONE:e>=2&&e<=10?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},88207:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:0===e||1!==e&&e%100>=1&&e%100<=19?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},20089:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11?r.NUMBER_ONE:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},62458:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e||11===e?r.NUMBER_ONE:2===e||12===e?r.NUMBER_TWO:e>=3&&e<=10||e>=13&&e<=19?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},51077:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%100==1?r.NUMBER_ONE:e%100==2?r.NUMBER_TWO:e%100>=3&&e%100<=4?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},44168:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%100==1?r.NUMBER_ONE:e%100==2?r.NUMBER_TWO:e%100>=3&&e%100<=4?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},82881:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:(e<0||e>10)&&e%10==0?r.NUMBER_MANY:r.NUMBER_OTHER}};e.exports=i},81287:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:e>=2&&e<=4?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},2126:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?r.NUMBER_FEW:r.NUMBER_MANY}};e.exports=i},9916:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11?r.NUMBER_ONE:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?r.NUMBER_FEW:r.NUMBER_MANY}};e.exports=i},34521:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&(e%100<11||e%100>19)?r.NUMBER_ONE:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},31786:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:0===e||e%100>=2&&e%100<=10?r.NUMBER_FEW:e%100>=11&&e%100<=19?r.NUMBER_MANY:r.NUMBER_OTHER}};e.exports=i},13609:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11?r.NUMBER_ONE:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?r.NUMBER_FEW:r.NUMBER_MANY}};e.exports=i},95953:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11&&e%100!=71&&e%100!=91?r.NUMBER_ONE:e%10==2&&e%100!=12&&e%100!=72&&e%100!=92?r.NUMBER_TWO:(e%10>=3&&e%10<=4||e%10==9)&&(e%100<10||e%100>19)&&(e%100<70||e%100>79)&&(e%100<90||e%100>99)?r.NUMBER_FEW:0!==e&&e%1e6==0?r.NUMBER_MANY:r.NUMBER_OTHER}};e.exports=i},32329:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:e>=3&&e<=6?r.NUMBER_FEW:e>=7&&e<=10?r.NUMBER_MANY:r.NUMBER_OTHER}};e.exports=i},80828:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1?r.NUMBER_ONE:e%10==2?r.NUMBER_TWO:e%100==0||e%100==20||e%100==40||e%100==60||e%100==80?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},53091:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e?r.NUMBER_ZERO:1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:e%100>=3&&e%100<=10?r.NUMBER_FEW:e%100>=11&&e%100<=99?r.NUMBER_MANY:r.NUMBER_OTHER}};e.exports=i},12134:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e?r.NUMBER_ZERO:1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:3===e?r.NUMBER_FEW:6===e?r.NUMBER_MANY:r.NUMBER_OTHER}};e.exports=i},6438:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e||1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},44547:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},8561:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 0===e||1===e?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},12638:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return r.NUMBER_OTHER}};e.exports=i},62324:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:r.NUMBER_OTHER}};e.exports=i},85343:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==1&&e%100!=11?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},19932:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return r.NUMBER_OTHER}};e.exports=i},72954:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?r.NUMBER_FEW:r.NUMBER_MANY}};e.exports=i},20184:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e>=0&&e<=1?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},65118:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:2===e?r.NUMBER_TWO:r.NUMBER_OTHER}};e.exports=i},53370:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return 1===e?r.NUMBER_ONE:0===e||1!==e&&e%100>=1&&e%100<=19?r.NUMBER_FEW:r.NUMBER_OTHER}};e.exports=i},89380:(e,t,n)=>{"use strict";var r=n(38814),i={getVariation:function(e){return e%10==0||e%100>=11&&e%100<=19?r.NUMBER_ZERO:e%10==1&&e%100!=11?r.NUMBER_ONE:r.NUMBER_OTHER}};e.exports=i},9344:(e,t,n)=>{"use strict";var r=n(57505),i=n(57725),o=n(19196),a=n(99061),s=n(54345),l=n(90568),u=n(74510),c=n(79395),d=n(68640),p=n(61230),f=n(53214),_=n(25002),g=n(82322),h=n(38013),A=n(64180),m=n(24822),E=n(18536),y=n(53066),S=n(88207),v=n(20089),I=n(62458),T=n(51077),b=n(44168),M=n(82881),P=n(81287),C=n(2126),O=n(9916),R=n(34521),N=n(31786),w=n(13609),D=n(95953),L=n(32329),B=n(80828),k=n(53091),G=n(12134),U=n(6438),x=n(44547),F=n(8561),K=n(12638),Y=n(62324),j=n(85343),V=n(19932),W=n(72954),H=n(20184),Q=n(65118),$=n(53370),q=n(89380),J={pt_PT:s},z={bm:r,bo:r,dz:r,id:r,ig:r,ii:r,in:r,ja:r,jbo:r,jv:r,jw:r,kde:r,kea:r,km:r,ko:r,lkt:r,lo:r,ms:r,my:r,nqo:r,root:r,sah:r,ses:r,sg:r,th:r,to:r,vi:r,wo:r,yo:r,yue:r,zh:r,am:i,as:i,bn:i,fa:i,gu:i,hi:i,kn:i,mr:i,zu:i,ff:o,fr:o,hy:o,kab:o,pt:a,ast:s,ca:s,de:s,en:s,et:s,fi:s,fy:s,gl:s,ia:s,io:s,it:s,ji:s,nl:s,sc:s,scn:s,sv:s,sw:s,ur:s,yi:s,si:l,ak:u,bh:u,guw:u,ln:u,mg:u,nso:u,pa:u,ti:u,wa:u,tzm:c,af:d,asa:d,az:d,bem:d,bez:d,bg:d,brx:d,ce:d,cgg:d,chr:d,ckb:d,dv:d,ee:d,el:d,eo:d,es:d,eu:d,fo:d,fur:d,gsw:d,ha:d,haw:d,hu:d,jgo:d,jmc:d,ka:d,kaj:d,kcg:d,kk:d,kkj:d,kl:d,ks:d,ksb:d,ku:d,ky:d,lb:d,lg:d,mas:d,mgo:d,ml:d,mn:d,nah:d,nb:d,nd:d,ne:d,nn:d,nnh:d,no:d,nr:d,ny:d,nyn:d,om:d,or:d,os:d,pap:d,ps:d,rm:d,rof:d,rwk:d,saq:d,sd:d,sdh:d,seh:d,sn:d,so:d,sq:d,ss:d,ssy:d,st:d,syr:d,ta:d,te:d,teo:d,tig:d,tk:d,tn:d,tr:d,ts:d,ug:d,uz:d,ve:d,vo:d,vun:d,wae:d,xh:d,xog:d,da:p,is:f,mk:_,fil:g,tl:g,lv:h,prg:h,lag:A,ksh:m,iu:E,kw:E,naq:E,se:E,sma:E,smi:E,smj:E,smn:E,sms:E,shi:y,mo:S,ro:S,bs:v,hr:v,sh:v,sr:v,gd:I,sl:T,dsb:b,hsb:b,he:M,iw:M,cs:P,sk:P,pl:C,be:O,lt:R,mt:N,ru:w,uk:w,br:D,ga:L,gv:B,ar:k,ars:k,cy:G,ceb:U,fuv:U,su:U,gn:x,fb:x,la:x,li:x,tlh:x,grc:x,rw:x,zza:x,co:x,ht:x,quc:x,mi:F,tg:F,tt:K,sa:Y,qu:j,ay:V,szl:W,bho:H,ik:Q,rup:$,tob:q},X=n(11841);function Z(e){return z[e]||r}function ee(e){return J[e]||Z(X.get(e))}function te(e){return ee(e)}var ne={_getNumberModuleForLang:Z,_getNumberModuleForLocale:ee,forLanguage:function(e){return Z(e)},forLocale:te,get:te};e.exports=ne},80605:e=>{"use strict";function t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){n(e,t,r[t])}))}return e}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={en_GB:{meta:{},patterns:{"/(.*)('|&#039;)s(?:'|&#039;)s(.*)/":"$1$2s$3"}},en_IN:{meta:{},patterns:{"/(.*)('|&#039;)s(?:'|&#039;)s(.*)/":"$1$2s$3"}},en_PI:{meta:{},patterns:{"/(.*)('|&#039;)s(?:'|&#039;)s(.*)/":"$1$2s$3"}},en_US:{meta:{},patterns:{"/(.*)('|&#039;)s(?:'|&#039;)s(.*)/":"$1$2s$3"}},tr_TR:{meta:{"/_C/":"(||b|c|d|f|g||h|j|k|l|m|n|p|q|r|s|t|v|w|x|y|z|B|C|D|F|G||H|J|K|L|M|N|P|Q|R|S|T|V|W|X|Y|Z)","/_T/":"(||p|t|k|s)","/_V/":"(a|e|i|o|u|A|E|I|O|U|||y|||Y)"},patterns:{"/&#039;/":"'","/(|)/":"'","/((a||A|I|u|o|U|O)_C*) de\\/da_E/":"$1 da$4","/((e|i|E|||||)_C*) de\\/da_E/":"$1 de$4","/((a||A|I|u|o|U|O)_C*_T)'Da(ki|n|)_E/":"$1'ta$5$6","/((e|i|E|||||)_C*_T)'Da(ki|n|)_E/":"$1'te$5$6","/((a||A|I|u|o|U|O)_C*)'Da(ki|n|)_E/":"$1'da$4$5","/((e|i|E|||||)_C*)'Da(ki|n|)_E/":"$1'de$4$5","/(e|i|E|)'\\(n\\)in_E/":"$1'nin$2","/(a||A|I)'\\(n\\)in_E/":"$1'nn$2","/(|||)'\\(n\\)in_E/":"$1'nn$2","/([uoUO])'\\(n\\)in_E/":"$1'nun$2","/(_Cy)'\\(n\\)in_E/":"$1'nin$3","/((e|i|E|)_C+)'\\(n\\)in_E/":"$1'in$4","/((a||A|I)_C+)'\\(n\\)in_E/":"$1'n$4","/((|||)_C+)'\\(n\\)in_E/":"$1'n$4","/([uoUO]_C+)'\\(n\\)in_E/":"$1'un$3","/(e|i|E|)'\\(y\\)e_E/":"$1'ye$2","/(a||A|I)'\\(y\\)e_E/":"$1'ya$2","/(|||)'\\(y\\)e_E/":"$1'ye$2","/([uoUO])'\\(y\\)e_E/":"$1'ya$2","/(_Cy)'\\(y\\)e_E/":"$1'ye$3","/((e|i|E|)_C+)'\\(y\\)e_E/":"$1'e$4","/((a||A|I)_C+)'\\(y\\)e_E/":"$1'a$4","/((|||)_C+)'\\(y\\)e_E/":"$1'e$4","/([uoUO]_C+)'\\(y\\)e_E/":"$1'a$3","/(e|i|E|)'\\(y\\)i_E/":"$1'yi$2","/(a||A|I)'\\(y\\)i_E/":"$1'y$2","/(|||)'\\(y\\)i_E/":"$1'y$2","/([uoUO])'\\(y\\)i_E/":"$1'yu$2","/(_Cy)'\\(y\\)i_E/":"$1'yi$3","/((e|i|E|)_C+)'\\(y\\)i_E/":"$1'i$4","/((a||A|I)_C+)'\\(y\\)i_E/":"$1'$4","/((|||)_C+)'\\(y\\)i_E/":"$1'$4","/([uoUO]_C+)'\\(y\\)i_E/":"$1'u$3","/'Da(ki|n|)_E/":"'da$1$2","/'\\(n\\)in_E/":"'in$1","/'\\(y\\)e_E/":"'e$1","/'\\(y\\)i_E/":"'i$1","/ de\\/da_E/":" de$1"}},sv_SE:{meta:{},patterns:{"/([szx])s_E/":"$1$2"}},de_DE:{meta:{},patterns:{"/(|s|z|x)s_E/":"$1$2"}},nb_NO:{meta:{},patterns:{"/([szx])s_E/":"$1'$2"}},da_DK:{meta:{"/_U/":"(||)"},patterns:{"/([szxSZX])s_E/":"$1'$2","/([A-Z]|[0-9]|_U)s_E/":"$1's$3"}},ar_AR:{meta:{"/_RTL/":"(([-]|[-]))","/_Delim/":"()"},patterns:{"/_Delim_RTL/":"$2","/_RTL_Delim(\\s*)_RTL/":"$1$4$5"}},ca_ES:{meta:{"/_C/":"[b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|w|x|y|z|B|C|D|F|G|H|J|K|L|M|N|P|Q|R|S|T|V|W|X|Y|Z]","/_V/":"[a|e|i|o|u|A|E|I|O|U]"},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"},male:{"/(.)(_C.*)/":"$1el $2","/(.)(_V.*)/":"$1l'$2","/^(_C.*)/":"El $1","/^(_V.*)/":"L'$1"},female:{"/(.)(_C.*)/":"$1la $2","/(.)(_V.*)/":"$1l'$2","/^(_C.*)/":"La $1","/^(_V.*)/":"L'$1"},unknown:{"/(.)(_C.*)/":"$1el $2","/(.)(_V.*)/":"$1l'$2","/^(_C.*)/":"El $1","/^(_V.*)/":"L'$1"}},es_LA:{meta:{},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"}},es_CL:{meta:{},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"}},es_CO:{meta:{},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"}},es_ES:{meta:{},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"}},es_MX:{meta:{},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"}},es_VE:{meta:{},patterns:{"/_By ([Ii]|[Hh]i[^e])/":"$1e $2","/_Bo ([Oo]|[Hh]o)/":"$1u $2"}},sk_SK:{meta:{},patterns:{"/_B(s|z|S|Z) (s||z||S||Z|)/":"$1$2o $3","/_B(v|V) (f|v|F|V)/":"$1$2o $3","/_B(k|K) (g|k|G|K)/":"$1$2u $3"}},bg_BG:{meta:{},patterns:{"/_B(|) (|||)/":"$1$2 $3","/_B(|) (|||)/":"$1$2 $3"}},fb_HX:{meta:{"/_C/":"[||b|c|d|f|g||h|j|k|l|m|n|p|q|r|s|t|v|w|x|y|z|B|C|D|F|G||H|J|K|L|M|N|P|Q|R|S|T|V|W|X|Y|Z]","/_T/":"[||p|t|k|s]","/_V/":"[a|e|i|o|u|A|E|I|O|U|||y|||Y]"},patterns:{"/_By _C/":"$1i $2","/_By _V/":"$1e $2","/(_C[^\\s]*)/":"el $1","/(_C[^\\s]*)/":"la $1","/(_V[^\\s]*)/":"l'$1"}}},i={"/_B/":"([.,!?\\s]|^)","/_E/":"([.,!?\\s]|$)"},o={"/_([^]*)/":"javascript"},a={meta:{},patterns:{}},s={get:function(e){var n=r[null==e?"en_US":e]||a;return{meta:t({},n.meta,i),patterns:t({},n.patterns,o)}}};e.exports=s},25612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPhonologicalRules=function(e){for(var t=function(e){var t=null!=e?e:"",n=u[t];null==n&&(n=u[t]=function(e){var t=[],n=i.default.get(e);for(var r in n.patterns){var o=n.patterns[r];for(var a in n.meta){var s=new RegExp(a.slice(1,-1),"g"),l=n.meta[a];r=r.replace(s,l),o=o.replace(s,l)}"javascript"===o&&(o=function(e){return e.slice(1).toLowerCase()}),t.push([new RegExp(r.slice(1,-1),"g"),o])}return t}(e));return n}(r.default.getViewerContext().locale),n=e,o=0;o<t.length;o++){var a=t[o],s=a[0],l=a[1];n=n.replace(s,l)}return n.replace(/\x01/g,"")},t.dedupeStops=function(e,t){return function(e,t){var n,r=c.get(e),i=c.get(t);return!0===(null===(n=g.get(r))||void 0===n?void 0:n.has(i))}(e[e.length-1],t)?"":t},t.PUNCT_CHAR_CLASS=void 0;var r=a(n(48041)),i=a(n(80605)),o=a(n(4983));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.PUNCT_CHAR_CLASS="[.!?]";var u={};var c=new Map;for(var d in o.default.equivalencies){var p,f=s([d].concat(o.default.equivalencies[d]));try{for(f.s();!(p=f.n()).done;){var _=p.value;c.set(_,d)}}catch(e){f.e(e)}finally{f.f()}}var g=new Map;for(var h in o.default.redundancies)g.set(h,new Set(o.default.redundancies[h]))},4983:e=>{"use strict";e.exports=Object.freeze({equivalencies:{".":["","",""],"":["","",""],"!":[""],"?":[""]},redundancies:{"?":["?",".","!",""],"!":["!","?","."],".":[".","!"],"":["",".","!"]}})},9808:(e,t,n)=>{"use strict";e.exports=n(55032)},55032:(e,t,n)=>{"use strict";var r=n(48041),i=n(9344),o=n(38814),a=n(41143),s={EXACTLY_ONE:"_1",getNumberVariations:function(e){var t=i.get(r.getViewerContext().locale).getVariation(e);return t&o.BITMASK_NUMBER||a(!1),1===e?["_1",t,"*"]:[t,"*"]},getGenderVariations:function(e){return e&o.BITMASK_GENDER||a(!1),[e,"*"]}};e.exports=s},38814:e=>{"use strict";var t=Object.freeze({BITMASK_NUMBER:28,BITMASK_GENDER:3,NUMBER_ZERO:16,NUMBER_ONE:4,NUMBER_TWO:8,NUMBER_FEW:20,NUMBER_MANY:12,NUMBER_OTHER:24,GENDER_MALE:1,GENDER_FEMALE:2,GENDER_UNKNOWN:3});e.exports=t},35577:(e,t,n)=>{"use strict";var r={GENDER:n(38814).GENDER_UNKNOWN,regionalLocale:"en_US",locale:"en_US"};e.exports=r},85903:e=>{"use strict";var t={decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:0,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null},n=[{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null},{decimalSeparator:",",numberDelimiter:"",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null},{decimalSeparator:"",numberDelimiter:"",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:{digits:""}},{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:2},numberingSystemData:{digits:""}},{decimalSeparator:",",numberDelimiter:".",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null},{decimalSeparator:",",numberDelimiter:"",minDigitsForThousandsSeparator:5,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null},{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:2},numberingSystemData:null},{decimalSeparator:",",numberDelimiter:".",minDigitsForThousandsSeparator:5,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null},{decimalSeparator:"",numberDelimiter:"",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:{digits:""}},{decimalSeparator:"",numberDelimiter:"",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:2},numberingSystemData:{digits:""}},{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:2},numberingSystemData:{digits:""}},{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:{digits:""}},{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:{digits:""}},{decimalSeparator:".",numberDelimiter:"",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null}],r={en_US:0,af_ZA:1,ak_GH:0,am_ET:0,ar_AR:2,as_IN:3,ay_BO:0,az_AZ:4,be_BY:5,bg_BG:5,bn_IN:6,bp_IN:0,br_FR:1,bs_BA:4,bv_DE:0,ca_ES:5,cb_IQ:2,ck_US:0,co_FR:0,cs_CZ:1,cx_PH:0,cy_GB:0,da_DK:7,de_DE:4,eh_IN:0,el_GR:4,em_ZM:0,en_GB:0,en_IN:6,en_OP:0,en_PI:0,en_UD:0,eo_EO:1,es_CL:4,es_CO:4,es_ES:5,es_LA:4,es_MX:0,es_VE:4,et_EE:5,eu_ES:4,fa_IR:8,fb_AA:0,fb_AC:0,fb_AR:2,fb_HA:0,fb_HX:0,fb_LL:0,fb_LS:0,fb_LT:0,fb_RL:0,fb_ZH:0,fbt_AC:0,ff_NG:1,fi_FI:1,fn_IT:0,fo_FO:4,fr_CA:1,fr_FR:1,fv_NG:0,fy_NL:4,ga_IE:0,gl_ES:4,gn_PY:4,gu_IN:6,gx_GR:0,ha_NG:0,he_IL:0,hi_FB:6,hi_IN:6,hr_HR:7,ht_HT:0,hu_HU:5,hy_AM:1,id_ID:4,ig_NG:0,ik_US:0,is_IS:4,it_IT:7,iu_CA:0,ja_JP:0,ja_KS:0,jv_ID:0,ka_GE:5,kk_KZ:1,km_KH:4,kn_IN:0,ko_KR:0,ks_IN:9,ku_TR:0,ky_KG:1,la_VA:0,lg_UG:0,li_NL:0,ln_CD:4,lo_LA:4,lr_IT:0,lt_LT:1,lv_LV:5,mg_MG:0,mi_NZ:0,mk_MK:4,ml_IN:6,mn_MN:0,mr_IN:10,ms_MY:0,mt_MT:0,my_MM:11,nb_NO:1,nd_ZW:0,ne_NP:12,nh_MX:0,nl_BE:4,nl_NL:4,nn_NO:1,nr_ZA:0,ns_ZA:0,ny_MW:0,om_ET:0,or_IN:6,pa_IN:6,pl_PL:5,ps_AF:8,pt_BR:4,pt_PT:5,qb_DE:0,qc_GT:0,qe_US:0,qk_DZ:0,qr_GR:0,qs_DE:0,qt_US:0,qu_PE:0,qv_IT:0,qz_MM:11,rm_CH:13,ro_RO:4,ru_RU:1,rw_RW:4,sa_IN:0,sc_IT:0,se_NO:1,si_LK:0,sk_SK:1,sl_SI:4,sn_ZW:0,so_SO:0,sq_AL:1,sr_RS:4,ss_SZ:0,st_ZA:0,su_ID:0,sv_SE:1,sw_KE:0,sy_SY:0,sz_PL:0,ta_IN:6,te_IN:6,tg_TJ:0,th_TH:0,tk_TM:1,tl_PH:0,tl_ST:0,tn_BW:0,tq_AR:0,tr_TR:4,ts_ZA:0,tt_RU:1,tz_MA:1,uk_UA:1,ur_PK:0,uz_UZ:1,ve_ZA:0,vi_VN:4,wo_SN:4,xh_ZA:0,yi_DE:0,yo_NG:0,zh_CN:0,zh_HK:0,zh_TW:0,zu_ZA:0,zz_TR:0},i={get:function(e){var i=r[null==e?"en_US":e];return void 0!==i?n[i]:t}};e.exports=i},83455:e=>{"use strict";e.exports=function(e){return e.replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")}},94705:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(48041),o=n(81536),a=n(75748),s=n(41143),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},a,{_param:function(e,t,n){return"string"==typeof t||t instanceof o||s(!1),a._param(e,t,n)},_plural:function(e,t,n){return null==n||"string"==typeof n||n instanceof o||s(!1),a._plural(e,t,n)},_wrapContent:function(e,t,n,r){var o="string"==typeof e?[e]:e,a=i.getErrorListener({hash:n,translation:t});return i.getFbsResult({contents:o,errorListener:a,extraOptions:r,patternHash:n,patternString:t})}});e.exports=l},75748:(e,t,n)=>{"use strict";n(6463).setupOnce();var r=n(48041),i=n(62258).overrides,o=n(1117),a=n(77038),s=n(86369),l=n(78050),u=n(9808),c=u.getGenderVariations,d=u.getNumberVariations,p=n(33651),f=n(41143),_=n(40306),g=Object.prototype.hasOwnProperty,h=!1,A=a.ARG,m=0,E=1,y=0,S=2,v={};var I=function(){};I._=function(e,t,n){if(((null==n?void 0:n.hk)||(null==n?void 0:n.ehk))&&h)return{text:e,fbt:!0,hashKey:n.hk};var o,l,u=r.getTranslatedInput({table:e,args:t,options:n}),d=u.args,p=u.table,m={};if(null!=p.__vcg){d=d||[];var E=r.getViewerContext().GENDER,y=c(E);d.unshift(s.getGenderResult(y,null,E))}if(d&&("string"!=typeof p&&(p=a.access(p,d,0)),m=function(e){var t={};return e.forEach((function(e){var n=e[A.SUBSTITUTION];if(n)for(var r in n)g.call(n,r)&&(null!=t[r]&&f(!1),t[r]=n[r])})),t}(d),null===p&&f(!1)),Array.isArray(p)){o=p[0];var S="1_"+(l=p[1]);null!=i[S]&&""!==i[S]&&(o=i[S],r.onTranslationOverride(l)),r.logImpression(l)}else{if("string"!=typeof p)throw new Error("Table access did not result in string: "+(void 0===p?"undefined":JSON.stringify(p))+", Type: "+typeof p);o=p}var I=v[o],T=function(e){for(var t in e)return!0;return!1}(m);if(I&&!T)return I;var b=_(o,m),M=this._wrapContent(b,o,l,null==n?void 0:n.eo);return T||(v[o]=M),M},I._enum=function(e,t){return s.getEnumResult(e)},I._implicitParam=function(e,t,n){return this._param(e,t,n)},I._name=function(e,t,n){var r=c(n),i={};return i[e]=t,s.getGenderResult(r,i,n)},I._param=function(e,t,n){var r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t);if(!n)return s.getSubstitution(r);if(n[0]===m){var i=n.length>1?n[1]:t;"number"!=typeof i&&f(!1);var o=d(i);return"number"==typeof t&&(r[e]=p.formatNumberWithThousandDelimiters(t)),s.getNumberResult(o,r,i)}if(n[0]===E){var a=n[1];return null==a&&f(!1),s.getGenderResult(c(a),r,a)}f(!1)},I._plural=function(e,t,n){var r=d(e),i={};return t&&(i[t]="number"==typeof n?p.formatNumberWithThousandDelimiters(n):n||p.formatNumberWithThousandDelimiters(e)),s.getNumberResult(r,i,e)},I._pronoun=function(e,t,n){t===l.NOT_A_PERSON&&n&&n.human&&f(!1);var r=function(e,t){switch(t){case l.NOT_A_PERSON:return e===y||e===S?l.NOT_A_PERSON:l.UNKNOWN_PLURAL;case l.FEMALE_SINGULAR:case l.FEMALE_SINGULAR_GUESS:return l.FEMALE_SINGULAR;case l.MALE_SINGULAR:case l.MALE_SINGULAR_GUESS:return l.MALE_SINGULAR;case l.MIXED_UNKNOWN:case l.FEMALE_PLURAL:case l.MALE_PLURAL:case l.NEUTER_PLURAL:case l.UNKNOWN_PLURAL:return l.UNKNOWN_PLURAL;case l.NEUTER_SINGULAR:case l.UNKNOWN_SINGULAR:return e===S?l.NOT_A_PERSON:l.UNKNOWN_PLURAL}return l.NOT_A_PERSON}(e,t);return s.getPronounResult(r)},I._subject=function(e){return s.getGenderResult(c(e),null,e)},I._wrapContent=function(e,t,n,i){var o="string"==typeof e?[e]:e,a=r.getErrorListener({translation:t,hash:n});return r.getFbtResult({contents:o,errorListener:a,extraOptions:i,patternHash:n,patternString:t})},I.disableJsonExportMode=function(){h=!1},I.enableJsonExportMode=function(){h=!0},I.isFbtInstance=function(e){return e instanceof o},e.exports=I},24204:(e,t,n)=>{"use strict";var r=n(48041),i=n(94348),o=n(52995),a=n(35577),s=n(25336),l=i.get.bind(i);e.exports=function(e){var t;o.registerTranslations(e.translations);var n=null!==(t=e.hooks)&&void 0!==t?t:{};null==n.getFbtResult&&(n.getFbtResult=l),null==n.getFbsResult&&(n.getFbsResult=s),null==n.getTranslatedInput&&(n.getTranslatedInput=o.getTranslatedInput),null==n.getViewerContext&&(n.getViewerContext=function(){return a}),r.register(n)}},25336:(e,t,n)=>{"use strict";var r=n(81536);e.exports=function(e){return new r(e.contents,e.errorListener)}},33651:(e,t,n)=>{"use strict";var r=n(48041),i=n(85903),o=n(83455),a={};function s(e){return a[e]||(a[e]=new RegExp(e,"i")),a[e]}var l=s([".",".",".",".",".","..","..","..","..","..","..","..","..","..","..","..","..","..","..","..","..",".","B/.","Bs.","Fr.","kr.","L.","p.","S/."].reduce((function(e,t,n){return e+(n?"|":"")+"("+o(t)+")"}),""));function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{primaryGroupSize:3,secondaryGroupSize:3},l=arguments.length>6?arguments[6]:void 0,u=a.primaryGroupSize||3,d=a.secondaryGroupSize||u,p=l&&l.digits,f=(null==t?e.toString():"string"==typeof e?g(e,t):_(e,t)).split("."),h=f[0],A=f[1];if(Math.abs(parseInt(h,10)).toString().length>=i){var m="",E="$1"+n+"$2$3",y="(\\d)(\\d{"+(u-0)+"})($|\\D)";if((m=h.replace(s(y),E))!=h){h=m;for(var S="(\\d)(\\d{"+(d-0)+"})("+o(n)+")",v=s(S);(m=h.replace(v,E))!=h;)h=m}}null!=p&&(h=c(h,p),A=A&&c(A,p));var I=h;return A&&(I+=r+A),I}function c(e,t){for(var n="",r=0;r<e.length;++r){var i=t[e.charCodeAt(r)-48];n+=void 0!==i?i:e[r]}return n}function d(){var e=r.getNumberFormatConfigOverride();return e||i.get(r.getViewerContext().locale)}function p(e,t){var n=d();return u(e,t,n.numberDelimiter,n.decimalSeparator,n.minDigitsForThousandsSeparator,n.standardDecimalPatternInfo,n.numberingSystemData)}function f(e){return e&&Math.floor(Math.log10(Math.abs(e)))}function _(e,t){var n=null==t?0:t,r=Math.pow(10,n),i=e;if(i=Math.round(i*r)/r,i+="",!n)return i;if(-1!==i.indexOf("e-"))return i;var o=i.indexOf("."),a=0;-1==o?(i+=".",a=n):a=n-(i.length-o-1);for(var s=0,l=a;s<l;s++)i+="0";return i}function g(e,t){var n=e.indexOf("."),r=-1===n?e:e.slice(0,n),i=-1===n?"":e.slice(n+1);return null!=t?r+"."+function(e,t){for(var n=e,r=0;r<t;r++)n+="0";return n}(i.slice(0,t),t-i.length):r}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=m(),i=e;r&&(i=e.split("").map((function(e){return r[e]||e})).join("").trim()),i=(i=i.replace(/^[^\d]*\-/,"")).replace(l,"");var a=o(t),u=o(n),c=s("^[^\\d]*\\d.*"+a+".*\\d[^\\d]*$");if(!c.test(i)){var d=s("(^[^\\d]*)"+a+"(\\d*[^\\d]*$)");if(d.test(i))return A(i=i.replace(d,"$1$2"));var p=s("^[^\\d]*[\\d "+o(u)+"]*[^\\d]*$");return p.test(i)||(i=""),A(i)}var f=s("(^[^\\d]*[\\d "+u+"]*)"+a+"(\\d*[^\\d]*$)");return A(i=f.test(i)?i.replace(f,"$1$2"):"")}function A(e){var t=e.replace(/[^0-9\u0001\u0002]/g,"").replace("",".").replace("","-"),n=Number(t);return""===t||isNaN(n)?null:n}function m(){var e=d(),t={},n=e.numberingSystemData&&e.numberingSystemData.digits;if(null==n)return null;for(var r=0;r<n.length;r++)t[n.charAt(r)]=r.toString();return t}var E={formatNumber:function(e,t){var n=d();return u(e,t,"",n.decimalSeparator,n.minDigitsForThousandsSeparator,n.standardDecimalPatternInfo,n.numberingSystemData)},formatNumberRaw:u,formatNumberWithThousandDelimiters:p,formatNumberWithLimitedSigFig:function(e,t,n){var r=f(e),i=e;r<n&&(i=e*Math.pow(10,-r+n));var o=Math.pow(10,f(i)-n+1),a=Math.round(i/o)*o;return r<n&&(a/=Math.pow(10,-r+n),null==t)?p(a,n-r-1):p(a,t)},parseNumber:function(e){var t=d();return h(e,t.decimalSeparator||".",t.numberDelimiter)},parseNumberRaw:h,truncateLongNumber:g,getFloatString:function(e,t,n){var r=String(e).split("."),i=E.getIntegerString(r[0],t);return 1===r.length?i:i+n+r[1]},getIntegerString:function(e,t){var n=t;""===n&&(n=",");for(var r=String(e),i=/(\d+)(\d{3})/;i.test(r);)r=r.replace(i,"$1"+n+"$2");return r}};e.exports=E},40306:(e,t,n)=>{"use strict";var r,i=n(25612);(r=n(41143))&&r.__esModule;Object.prototype.hasOwnProperty;var o=new RegExp("\\{([^}]+)\\}("+i.PUNCT_CHAR_CLASS+"*)","g");e.exports=function(e,t){if(null==t)return e;"object"!=typeof t&&invariant(!1);var n=[],r=[],a=e.replace(o,(function(e,o,a){var s=t[o];return null!=s&&"object"==typeof s?(n.push(s),r.push(o),""+a):null===s?"":String(s)+(0,i.dedupeStops)(String(s),a)})).split("").map(i.applyPhonologicalRules);if(1===a.length)return a[0];for(var s=""!==a[0]?[a[0]]:[],l=0;l<n.length;l++)s.push(n[l]),""!==a[l+1]&&s.push(a[l+1]);return s}},97769:e=>{"use strict";e.exports=function(e){return e&&e.length>1?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&109===e[30]&&105===e[31]&&109===e[32]&&101===e[33]&&116===e[34]&&121===e[35]&&112===e[36]&&101===e[37]&&97===e[38]&&112===e[39]&&112===e[40]&&108===e[41]&&105===e[42]&&99===e[43]&&97===e[44]&&116===e[45]&&105===e[46]&&111===e[47]&&110===e[48]&&47===e[49]&&101===e[50]&&112===e[51]&&117===e[52]&&98===e[53]&&43===e[54]&&122===e[55]&&105===e[56]&&112===e[57]?{ext:"epub",mime:"application/epub+zip"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&77===e[30]&&69===e[31]&&84===e[32]&&65===e[33]&&45===e[34]&&73===e[35]&&78===e[36]&&70===e[37]&&47===e[38]&&109===e[39]&&111===e[40]&&122===e[41]&&105===e[42]&&108===e[43]&&108===e[44]&&97===e[45]&&46===e[46]&&114===e[47]&&115===e[48]&&97===e[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80!==e[0]||75!==e[1]||3!==e[2]&&5!==e[2]&&7!==e[2]||4!==e[3]&&6!==e[3]&&8!==e[3]?117===e[257]&&115===e[258]&&116===e[259]&&97===e[260]&&114===e[261]?{ext:"tar",mime:"application/x-tar"}:82!==e[0]||97!==e[1]||114!==e[2]||33!==e[3]||26!==e[4]||7!==e[5]||0!==e[6]&&1!==e[6]?31===e[0]&&139===e[1]&&8===e[2]?{ext:"gz",mime:"application/gzip"}:66===e[0]&&90===e[1]&&104===e[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===e[0]&&122===e[1]&&188===e[2]&&175===e[3]&&39===e[4]&&28===e[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===e[0]&&1===e[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===e[0]&&0===e[1]&&0===e[2]&&(24===e[3]||32===e[3])&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||51===e[0]&&103===e[1]&&112===e[2]&&53===e[3]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&109===e[16]&&112===e[17]&&52===e[18]&&49===e[19]&&109===e[20]&&112===e[21]&&52===e[22]&&50===e[23]&&105===e[24]&&115===e[25]&&111===e[26]&&109===e[27]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&105===e[8]&&115===e[9]&&111===e[10]&&109===e[11]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]?{ext:"mp4",mime:"video/mp4"}:0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&86===e[10]?{ext:"m4v",mime:"video/x-m4v"}:77===e[0]&&84===e[1]&&104===e[2]&&100===e[3]?{ext:"mid",mime:"audio/midi"}:109===e[31]&&97===e[32]&&116===e[33]&&114===e[34]&&111===e[35]&&115===e[36]&&107===e[37]&&97===e[38]?{ext:"mkv",mime:"video/x-matroska"}:26===e[0]&&69===e[1]&&223===e[2]&&163===e[3]?{ext:"webm",mime:"video/webm"}:0===e[0]&&0===e[1]&&0===e[2]&&20===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]?{ext:"mov",mime:"video/quicktime"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&65===e[8]&&86===e[9]&&73===e[10]?{ext:"avi",mime:"video/x-msvideo"}:48===e[0]&&38===e[1]&&178===e[2]&&117===e[3]&&142===e[4]&&102===e[5]&&207===e[6]&&17===e[7]&&166===e[8]&&217===e[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===e[0]&&0===e[1]&&1===e[2]&&"b"===e[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&251===e[1]?{ext:"mp3",mime:"audio/mpeg"}:102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&65===e[10]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]?{ext:"m4a",mime:"audio/m4a"}:79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]?{ext:"opus",mime:"audio/opus"}:79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]?{ext:"ogg",mime:"audio/ogg"}:102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]?{ext:"flac",mime:"audio/x-flac"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]?{ext:"wav",mime:"audio/x-wav"}:35===e[0]&&33===e[1]&&65===e[2]&&77===e[3]&&82===e[4]&&10===e[5]?{ext:"amr",mime:"audio/amr"}:37===e[0]&&80===e[1]&&68===e[2]&&70===e[3]?{ext:"pdf",mime:"application/pdf"}:77===e[0]&&90===e[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||87!==e[1]||83!==e[2]?123===e[0]&&92===e[1]&&114===e[2]&&116===e[3]&&102===e[4]?{ext:"rtf",mime:"application/rtf"}:119===e[0]&&79===e[1]&&70===e[2]&&70===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff",mime:"application/font-woff"}:119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff2",mime:"application/font-woff"}:76===e[34]&&80===e[35]&&(0===e[8]&&0===e[9]&&1===e[10]||1===e[8]&&0===e[9]&&2===e[10]||2===e[8]&&0===e[9]&&2===e[10])?{ext:"eot",mime:"application/octet-stream"}:0===e[0]&&1===e[1]&&0===e[2]&&0===e[3]&&0===e[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===e[0]&&84===e[1]&&84===e[2]&&79===e[3]&&0===e[4]?{ext:"otf",mime:"application/font-sfnt"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:70===e[0]&&76===e[1]&&86===e[2]&&1===e[3]?{ext:"flv",mime:"video/x-flv"}:37===e[0]&&33===e[1]?{ext:"ps",mime:"application/postscript"}:253===e[0]&&55===e[1]&&122===e[2]&&88===e[3]&&90===e[4]&&0===e[5]?{ext:"xz",mime:"application/x-xz"}:83===e[0]&&81===e[1]&&76===e[2]&&105===e[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===e[0]&&69===e[1]&&83===e[2]&&26===e[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===e[0]&&114===e[1]&&50===e[2]&&52===e[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===e[0]&&83===e[1]&&67===e[2]&&70===e[3]||73===e[0]&&83===e[1]&&99===e[2]&&40===e[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]&&10===e[7]&&100===e[8]&&101===e[9]&&98===e[10]&&105===e[11]&&97===e[12]&&110===e[13]&&45===e[14]&&98===e[15]&&105===e[16]&&110===e[17]&&97===e[18]&&114===e[19]&&121===e[20]?{ext:"deb",mime:"application/x-deb"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===e[0]&&171===e[1]&&238===e[2]&&219===e[3]?{ext:"rpm",mime:"application/x-rpm"}:31===e[0]&&160===e[1]||31===e[0]&&157===e[1]?{ext:"Z",mime:"application/x-compress"}:76===e[0]&&90===e[1]&&73===e[2]&&80===e[3]?{ext:"lz",mime:"application/x-lzip"}:208===e[0]&&207===e[1]&&17===e[2]&&224===e[3]&&161===e[4]&&177===e[5]&&26===e[6]&&225===e[7]?{ext:"msi",mime:"application/x-msi"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null}},56755:function(e){
/*!
 2022 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 8.0.7
*/
e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(i){var o,a,s,l,u,c,d,p,f,_,g,h,A,m,E,y,S,v,I,T,b,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},P=[],C=0;if(isNaN(i))throw new TypeError("Invalid number");if(s=!0===M.bits,E=!0===M.unix,h=!0===M.pad,a=M.base||10,A=void 0!==M.round?M.round:E?1:2,d=void 0!==M.locale?M.locale:"",p=M.localeOptions||{},y=void 0!==M.separator?M.separator:"",S=void 0!==M.spacer?M.spacer:E?"":" ",I=M.symbols||{},v=2===a?M.standard||"iec":"jedec",g=M.output||"string",u=!0===M.fullform,c=M.fullforms instanceof Array?M.fullforms:[],o=void 0!==M.exponent?M.exponent:-1,T=r[M.roundingMethod]||Math.round,f=(_=Number(i))<0,l=a>2?1e3:1024,b=!1===isNaN(M.precision)?parseInt(M.precision,10):0,f&&(_=-_),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(_)/Math.log(l)))<0&&(o=0),o>8&&(b>0&&(b+=8-o),o=8),"exponent"===g)return o;if(0===_)P[0]=0,m=P[1]=E?"":t[v][s?"bits":"bytes"][o];else{C=_/(2===a?Math.pow(2,10*o):Math.pow(1e3,o)),s&&(C*=8)>=l&&o<8&&(C/=l,o++);var O=Math.pow(10,o>0?A:0);P[0]=T(C*O)/O,P[0]===l&&o<8&&void 0===M.exponent&&(P[0]=1,o++),m=P[1]=10===a&&1===o?s?"kbit":"kB":t[v][s?"bits":"bytes"][o],E&&(P[1]=P[1].charAt(0),e.test(P[1])&&(P[0]=Math.floor(P[0]),P[1]=""))}if(f&&(P[0]=-P[0]),b>0&&(P[0]=P[0].toPrecision(b)),P[1]=I[P[1]]||P[1],!0===d?P[0]=P[0].toLocaleString():d.length>0?P[0]=P[0].toLocaleString(d,p):y.length>0&&(P[0]=P[0].toString().replace(".",y)),h&&!1===Number.isInteger(P[0])&&A>0){var R=y||".",N=P[0].toString().split(R),w=N[1]||"",D=w.length,L=A-D;P[0]="".concat(N[0]).concat(R).concat(w.padEnd(D+L,"0"))}return u&&(P[1]=c[o]?c[o]:n[v][o]+(s?"bit":"byte")+(1===P[0]?"":"s")),"array"===g?P:"object"===g?{value:P[0],symbol:P[1],exponent:o,unit:m}:P.join(S)}return i.partial=function(e){return function(t){return i(t,e)}},i}()},76672:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="function"==typeof WeakMap?new WeakMap:new Map;function r(e){var t=n.get(e);if(void 0!==t)return t;var r=new Map;return Object.getOwnPropertyNames(e).forEach((function(t){r.set(e[t],t)})),n.set(e,r),r}var i=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return r(this).has(e)}},cast:{value:function(e){return this.isValid(e)?e:void 0}},members:{value:function(){return r(this).keys()}},getName:{value:function(e){return r(this).get(e)}}}));function o(e){var n=Object.create(i);for(var r in e)t.call(e,r)&&Object.defineProperty(n,r,{value:e[r]});return Object.freeze(n)}var a=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return"string"==typeof e&&t.call(this,e)}},cast:{value:i.cast},members:{value:function(){return Object.getOwnPropertyNames(this)}},getName:{value:function(e){return e}}}));o.Mirrored=function(e){for(var t=Object.create(a),n=0,r=e.length;n<r;++n)Object.defineProperty(t,e[n],{value:e[n]});return Object.freeze(t)},Object.freeze(o.Mirrored),e.exports=Object.freeze(o)},41143:e=>{"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},97331:(e,t,n)=>{var r=n(19810);function i(e){return e.replace(/[^A-Za-z0-9]/g,(function(e){return r[e]||e}))}i.isLatin=function(e){return e===i(e)},e.exports=i},19810:e=>{e.exports={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AA",:"AE",:"AE",:"AE",:"AO",:"AU",:"AV",:"AV",:"AY",:"B",:"B",:"B",:"B",:"B",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"DZ",:"DZ",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"ET",:"F",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"F",:"G",:"R",:"S",:"T",:"IS",:"J",:"J",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"LJ",:"M",:"M",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"NJ",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"OI",:"OO",:"E",:"O",:"OU",:"P",:"P",:"P",:"P",:"P",:"P",:"P",:"Q",:"Q",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"C",:"E",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"SS",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"A",:"L",:"M",:"V",:"TZ",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"V",:"V",:"V",:"VY",:"W",:"W",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"IJ",:"OE",:"A",:"AE",:"B",:"B",:"C",:"D",:"E",:"F",:"G",:"G",:"H",:"I",:"R",:"J",:"K",:"L",:"L",:"M",:"N",:"O",:"OE",:"O",:"OU",:"P",:"R",:"N",:"R",:"S",:"T",:"E",:"R",:"U",:"V",:"W",:"Y",:"Z",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"aa",:"ae",:"ae",:"ae",:"ao",:"au",:"av",:"av",:"ay",:"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b",:"o",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"i",:"j",:"j",:"j",:"dz",:"dz",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"et",:"f",:"f",:"f",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"hv",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"f",:"g",:"r",:"s",:"t",:"is",:"j",:"j",:"j",:"j",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"lj",:"s",:"s",:"s",:"s",:"m",:"m",:"m",:"m",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"nj",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"oi",:"oo",:"e",:"e",:"o",:"o",:"ou",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"q",:"q",:"q",:"q",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"c",:"c",:"e",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"g",:"ss",:"o",:"o",:"u",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"th",:"a",:"ae",:"e",:"g",:"h",:"h",:"h",:"i",:"k",:"l",:"m",:"m",:"oe",:"r",:"r",:"r",:"r",:"t",:"v",:"w",:"y",:"tz",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"ue",:"um",:"v",:"v",:"v",:"v",:"v",:"v",:"v",:"vy",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"ff",:"ffi",:"ffl",:"fi",:"fl",:"ij",:"oe",:"st",:"a",:"e",:"i",:"j",:"o",:"r",:"u",:"v",:"x",:"YO",:"I",:"TS",:"U",:"K",:"E",:"N",:"G",:"SH",:"SCH",:"Z",:"H",:"",:"yo",:"i",:"ts",:"u",:"k",:"e",:"n",:"g",:"sh",:"sch",:"z",:"h",:"",:"F",:"I",:"V",:"A",:"P",:"R",:"O",:"L",:"D",:"ZH",:"E",:"f",:"i",:"v",:"a",:"p",:"r",:"o",:"l",:"d",:"zh",:"e",:"Ya",:"CH",:"S",:"M",:"I",:"T",:"",:"B",:"YU",:"ya",:"ch",:"s",:"m",:"i",:"t",:"",:"b",:"yu"}},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},88668:(e,t,n)=>{var r=n(83369),i=n(90619),o=n(72385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),l=n(34309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},96874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},47443:(e,t,n)=>{var r=n(42118);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),l=n(36719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),d=!n&&!c&&a(e),p=!n&&!c&&!d&&l(e),f=n||c||d||p,_=f?r(e.length,String):[],g=_.length;for(var h in e)!t&&!u.call(e,h)||f&&("length"==h||d&&("offset"==h||"parent"==h)||p&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||s(h,g))||_.push(h);return _}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},82908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},34865:(e,t,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},71631:(e,t,n)=>{var r=n(98363),i=n(3674);e.exports=function(e,t){return e&&r(t,i(t),e)}},63886:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e,t){return e&&r(t,i(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),i=n(77412),o=n(34865),a=n(71631),s=n(63886),l=n(64626),u=n(278),c=n(18805),d=n(1911),p=n(58234),f=n(46904),_=n(64160),g=n(43824),h=n(29148),A=n(38517),m=n(1469),E=n(44144),y=n(56688),S=n(13218),v=n(72928),I=n(3674),T=n(81704),b="[object Arguments]",M="[object Function]",P="[object Object]",C={};C[b]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[P]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[M]=C["[object WeakMap]"]=!1,e.exports=function e(t,n,O,R,N,w){var D,L=1&n,B=2&n,k=4&n;if(O&&(D=N?O(t,R,N,w):O(t)),void 0!==D)return D;if(!S(t))return t;var G=m(t);if(G){if(D=g(t),!L)return u(t,D)}else{var U=_(t),x=U==M||"[object GeneratorFunction]"==U;if(E(t))return l(t,L);if(U==P||U==b||x&&!N){if(D=B||x?{}:A(t),!L)return B?d(t,s(D,t)):c(t,a(D,t))}else{if(!C[U])return N?t:{};D=h(t,U,L)}}w||(w=new r);var F=w.get(t);if(F)return F;w.set(t,D),v(t)?t.forEach((function(r){D.add(e(r,n,O,r,t,w))})):y(t)&&t.forEach((function(r,i){D.set(i,e(r,n,O,i,t,w))}));var K=G?void 0:(k?B?f:p:B?T:I)(t);return i(K||t,(function(r,i){K&&(r=t[i=r]),o(D,i,e(r,n,O,i,t,w))})),D}},3118:(e,t,n)=>{var r=n(13218),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},20731:(e,t,n)=>{var r=n(88668),i=n(47443),o=n(1196),a=n(29932),s=n(7518),l=n(74757);e.exports=function(e,t,n,u){var c=-1,d=i,p=!0,f=e.length,_=[],g=t.length;if(!f)return _;n&&(t=a(t,s(n))),u?(d=o,p=!1):t.length>=200&&(d=l,p=!1,t=new r(t));e:for(;++c<f;){var h=e[c],A=null==n?h:n(h);if(h=u||0!==h?h:0,p&&A==A){for(var m=g;m--;)if(t[m]===A)continue e;_.push(h)}else d(t,A,u)||_.push(h)}return _}},89881:(e,t,n)=>{var r=n(47816),i=n(99291)(r);e.exports=i},41848:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},21078:(e,t,n)=>{var r=n(62488),i=n(37285);e.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},28483:(e,t,n)=>{var r=n(25063)();e.exports=r},47816:(e,t,n)=>{var r=n(28483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},97786:(e,t,n)=>{var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},42118:(e,t,n)=>{var r=n(41848),i=n(62722),o=n(42351);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},90939:(e,t,n)=>{var r=n(2492),i=n(37005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:(e,t,n)=>{var r=n(46384),i=n(67114),o=n(18351),a=n(16096),s=n(64160),l=n(1469),u=n(44144),c=n(36719),d="[object Arguments]",p="[object Array]",f="[object Object]",_=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,h,A){var m=l(e),E=l(t),y=m?p:s(e),S=E?p:s(t),v=(y=y==d?f:y)==f,I=(S=S==d?f:S)==f,T=y==S;if(T&&u(e)){if(!u(t))return!1;m=!0,v=!1}if(T&&!v)return A||(A=new r),m||c(e)?i(e,t,n,g,h,A):o(e,t,y,n,g,h,A);if(!(1&n)){var b=v&&_.call(e,"__wrapped__"),M=I&&_.call(t,"__wrapped__");if(b||M){var P=b?e.value():e,C=M?t.value():t;return A||(A=new r),h(P,C,n,g,A)}}return!!T&&(A||(A=new r),a(e,t,n,g,h,A))}},25588:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},2958:(e,t,n)=>{var r=n(46384),i=n(90939);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],d=e[c],p=u[1];if(l&&u[2]){if(void 0===d&&!(c in e))return!1}else{var f=new r;if(o)var _=o(d,p,c,e,t,f);if(!(void 0===_?i(p,d,3,o,f):_))return!1}}return!0}},62722:e=>{e.exports=function(e){return e!=e}},28458:(e,t,n)=>{var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:s).test(a(e))}},29221:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},67206:(e,t,n)=>{var r=n(91573),i=n(16432),o=n(6557),a=n(1469),s=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var r=n(13218),i=n(25726),o=n(33498),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},69199:(e,t,n)=>{var r=n(89881),i=n(98612);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},91573:(e,t,n)=>{var r=n(2958),i=n(1499),o=n(42634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),i=n(27361),o=n(79095),a=n(15403),s=n(89162),l=n(42634),u=n(40327);e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},82689:(e,t,n)=>{var r=n(29932),i=n(97786),o=n(67206),a=n(69199),s=n(71131),l=n(7518),u=n(85022),c=n(6557),d=n(1469);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var p=-1;t=r(t,l(o));var f=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++p,value:e}}));return s(f,(function(e,t){return u(e,t,n)}))}},63012:(e,t,n)=>{var r=n(97786),i=n(10611),o=n(71811);e.exports=function(e,t,n){for(var a=-1,s=t.length,l={};++a<s;){var u=t[a],c=r(e,u);n(c,u)&&i(l,o(u,e),c)}return l}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},5976:(e,t,n)=>{var r=n(6557),i=n(45357),o=n(30061);e.exports=function(e,t){return o(i(e,t,r),e+"")}},10611:(e,t,n)=>{var r=n(34865),i=n(71811),o=n(65776),a=n(13218),s=n(40327);e.exports=function(e,t,n,l){if(!a(e))return e;for(var u=-1,c=(t=i(t,e)).length,d=c-1,p=e;null!=p&&++u<c;){var f=s(t[u]),_=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(u!=d){var g=p[f];void 0===(_=l?l(g,f,p):void 0)&&(_=a(g)?g:o(t[u+1])?[]:{})}r(p,f,_),p=p[f]}return e}},56560:(e,t,n)=>{var r=n(75703),i=n(38777),o=n(6557),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},14259:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},71131:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},27561:(e,t,n)=>{var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},45652:(e,t,n)=>{var r=n(88668),i=n(47443),o=n(1196),a=n(74757),s=n(23593),l=n(21814);e.exports=function(e,t,n){var u=-1,c=i,d=e.length,p=!0,f=[],_=f;if(n)p=!1,c=o;else if(d>=200){var g=t?null:s(e);if(g)return l(g);p=!1,c=a,_=new r}else _=t?[]:f;e:for(;++u<d;){var h=e[u],A=t?t(h):h;if(h=n||0!==h?h:0,p&&A==A){for(var m=_.length;m--;)if(_[m]===A)continue e;t&&_.push(A),f.push(h)}else c(_,A,n)||(_!==f&&_.push(A),f.push(h))}return f}},57406:(e,t,n)=>{var r=n(71811),i=n(10928),o=n(40292),a=n(40327);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},47415:(e,t,n)=>{var r=n(29932);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},1757:e=>{e.exports=function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}},74757:e=>{e.exports=function(e,t){return e.has(t)}},54290:(e,t,n)=>{var r=n(6557);e.exports=function(e){return"function"==typeof e?e:r}},71811:(e,t,n)=>{var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},26393:(e,t,n)=>{var r=n(33448);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),s=void 0!==t,l=null===t,u=t==t,c=r(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&e<t||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},85022:(e,t,n)=>{var r=n(26393);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=l?u:u*("desc"==n[i]?-1:1)}return e.index-t.index}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),i=n(89465);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=o?o(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?i(n,u,c):r(n,u,c)}return n}},18805:(e,t,n)=>{var r=n(98363),i=n(99551);e.exports=function(e,t){return r(e,i(e),t)}},1911:(e,t,n)=>{var r=n(98363),i=n(51442);e.exports=function(e,t){return r(e,i(e),t)}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},21463:(e,t,n)=>{var r=n(5976),i=n(16612);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t}))}},99291:(e,t,n)=>{var r=n(98612);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},25063:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},67740:(e,t,n)=>{var r=n(67206),i=n(98612),o=n(3674);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},23593:(e,t,n)=>{var r=n(58525),i=n(50308),o=n(21814),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},60696:(e,t,n)=>{var r=n(68630);e.exports=function(e){return r(e)?void 0:e}},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},67114:(e,t,n)=>{var r=n(88668),i=n(82908),o=n(74757);e.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,d=t.length;if(c!=d&&!(u&&d>c))return!1;var p=l.get(e),f=l.get(t);if(p&&f)return p==t&&f==e;var _=-1,g=!0,h=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++_<c;){var A=e[_],m=t[_];if(a)var E=u?a(m,A,_,t,e,l):a(A,m,_,e,t,l);if(void 0!==E){if(E)continue;g=!1;break}if(h){if(!i(t,(function(e,t){if(!o(h,t)&&(A===e||s(A,e,n,a,l)))return h.push(t)}))){g=!1;break}}else if(A!==m&&!s(A,m,n,a,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},18351:(e,t,n)=>{var r=n(62705),i=n(11149),o=n(77813),a=n(67114),s=n(68776),l=n(21814),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var _=1&r;if(f||(f=l),e.size!=t.size&&!_)return!1;var g=p.get(e);if(g)return g==t;r|=2,p.set(e,t);var h=a(f(e),f(t),r,u,d,p);return p.delete(e),h;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},16096:(e,t,n)=>{var r=n(58234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var d=c;d--;){var p=u[d];if(!(l?p in t:i.call(t,p)))return!1}var f=s.get(e),_=s.get(t);if(f&&_)return f==t&&_==e;var g=!0;s.set(e,t),s.set(t,e);for(var h=l;++d<c;){var A=e[p=u[d]],m=t[p];if(o)var E=l?o(m,A,p,t,e,s):o(A,m,p,e,t,s);if(!(void 0===E?A===m||a(A,m,n,o,s):E)){g=!1;break}h||(h="constructor"==p)}if(g&&!h){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(g=!1)}return s.delete(e),s.delete(t),g}},99021:(e,t,n)=>{var r=n(85564),i=n(45357),o=n(30061);e.exports=function(e){return o(i(e,void 0,r),e+"")}},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},46904:(e,t,n)=>{var r=n(68866),i=n(51442),o=n(81704);e.exports=function(e){return r(e,o,i)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:(e,t,n)=>{var r=n(89162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},51442:(e,t,n)=>{var r=n(62488),i=n(85924),o=n(99551),a=n(70479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),l=n(44239),u=n(80346),c="[object Map]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",_="[object DataView]",g=u(r),h=u(i),A=u(o),m=u(a),E=u(s),y=l;(r&&y(new r(new ArrayBuffer(1)))!=_||i&&y(new i)!=c||o&&y(o.resolve())!=d||a&&y(new a)!=p||s&&y(new s)!=f)&&(y=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case g:return _;case h:return c;case A:return d;case m:return p;case E:return f}return t}),e.exports=y},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,n)=>{var r=n(71811),i=n(35694),o=n(1469),a=n(65776),s=n(41780),l=n(40327);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,d=!1;++u<c;){var p=l(t[u]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&s(c)&&a(p,c)&&(o(e)||i(e))}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),i=n(57157),o=n(93147),a=n(40419),s=n(77133);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Set]":return new l;case"[object Symbol]":return a(e)}}},38517:(e,t,n)=>{var r=n(3118),i=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},37285:(e,t,n)=>{var r=n(62705),i=n(35694),o=n(1469),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},16612:(e,t,n)=>{var r=n(77813),i=n(98612),o=n(65776),a=n(13218);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},15403:(e,t,n)=>{var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},68776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},24523:(e,t,n)=>{var r=n(88306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},45357:(e,t,n)=>{var r=n(96874),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},40292:(e,t,n)=>{var r=n(97786),i=n(14259);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},21814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},30061:(e,t,n)=>{var r=n(56560),i=n(21275)(r);e.exports=i},21275:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},42351:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},55514:(e,t,n)=>{var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:(e,t,n)=>{var r=n(33448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3045:(e,t,n)=>{var r=n(98363),i=n(21463),o=n(81704),a=i((function(e,t){r(t,o(t),e)}));e.exports=a},89567:(e,t,n)=>{var r=n(40554);e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},50361:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,5)}},75703:e=>{e.exports=function(e){return function(){return e}}},23279:(e,t,n)=>{var r=n(13218),i=n(7771),o=n(14841),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,u,c,d,p,f,_=0,g=!1,h=!1,A=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=l,r=u;return l=u=void 0,_=t,d=e.apply(r,n)}function E(e){return _=e,p=setTimeout(S,t),g?m(e):d}function y(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-_>=c}function S(){var e=i();if(y(e))return v(e);p=setTimeout(S,function(e){var n=t-(e-f);return h?s(n,c-(e-_)):n}(e))}function v(e){return p=void 0,A&&l?m(e):(l=u=void 0,d)}function I(){var e=i(),n=y(e);if(l=arguments,u=this,f=e,n){if(void 0===p)return E(f);if(h)return clearTimeout(p),p=setTimeout(S,t),m(f)}return void 0===p&&(p=setTimeout(S,t)),d}return t=o(t)||0,r(n)&&(g=!!n.leading,c=(h="maxWait"in n)?a(o(n.maxWait)||0,t):c,A="trailing"in n?!!n.trailing:A),I.cancel=function(){void 0!==p&&clearTimeout(p),_=0,l=f=u=p=void 0},I.flush=function(){return void 0===p?d:v(i())},I}},91747:(e,t,n)=>{var r=n(5976),i=n(77813),o=n(16612),a=n(81704),s=Object.prototype,l=s.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&o(t[0],t[1],u)&&(r=1);++n<r;)for(var c=t[n],d=a(c),p=-1,f=d.length;++p<f;){var _=d[p],g=e[_];(void 0===g||i(g,s[_])&&!l.call(e,_))&&(e[_]=c[_])}return e}));e.exports=u},91966:(e,t,n)=>{var r=n(20731),i=n(21078),o=n(5976),a=n(29246),s=o((function(e,t){return a(e)?r(e,i(t,1,a,!0)):[]}));e.exports=s},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3522:(e,t,n)=>{var r=n(79833),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},22205:(e,t,n)=>{e.exports=n(3045)},30988:(e,t,n)=>{var r=n(67740)(n(7436));e.exports=r},7436:(e,t,n)=>{var r=n(41848),i=n(67206),o=n(40554),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var u=l-1;return void 0!==n&&(u=o(n),u=n<0?a(l+u,0):s(u,l-1)),r(e,i(t,3),u,!0)}},94654:(e,t,n)=>{var r=n(21078),i=n(35161);e.exports=function(e,t){return r(i(e,t),1)}},85564:(e,t,n)=>{var r=n(21078);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},84486:(e,t,n)=>{var r=n(77412),i=n(89881),o=n(54290),a=n(1469);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},2525:(e,t,n)=>{var r=n(47816),i=n(54290);e.exports=function(e,t){return e&&r(e,i(t))}},27361:(e,t,n)=>{var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},79095:(e,t,n)=>{var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:e=>{e.exports=function(e){return e}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},29246:(e,t,n)=>{var r=n(98612),i=n(37005);e.exports=function(e){return i(e)&&r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},41609:(e,t,n)=>{var r=n(280),i=n(64160),o=n(35694),a=n(1469),s=n(98612),l=n(44144),u=n(25726),c=n(36719),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},18446:(e,t,n)=>{var r=n(90939);e.exports=function(e,t){return r(e,t)}},23560:(e,t,n)=>{var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var r=n(25588),i=n(7518),o=n(31167),a=o&&o.isMap,s=a?i(a):r;e.exports=s},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},68630:(e,t,n)=>{var r=n(44239),i=n(85924),o=n(37005),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},72928:(e,t,n)=>{var r=n(29221),i=n(7518),o=n(31167),a=o&&o.isSet,s=a?i(a):r;e.exports=s},33448:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},81704:(e,t,n)=>{var r=n(14636),i=n(10313),o=n(98612);e.exports=function(e){return o(e)?r(e,!0):i(e)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},35161:(e,t,n)=>{var r=n(29932),i=n(67206),o=n(69199),a=n(1469);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},66604:(e,t,n)=>{var r=n(89465),i=n(47816),o=n(67206);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},88306:(e,t,n)=>{var r=n(83369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},94885:e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},50308:e=>{e.exports=function(){}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},57557:(e,t,n)=>{var r=n(29932),i=n(85990),o=n(57406),a=n(71811),s=n(98363),l=n(60696),u=n(99021),c=n(46904),d=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=a(t,e),u||(u=t.length>1),t})),s(e,c(e),n),u&&(n=i(n,7,l));for(var d=t.length;d--;)o(n,t[d]);return n}));e.exports=d},14176:(e,t,n)=>{var r=n(67206),i=n(94885),o=n(35937);e.exports=function(e,t){return o(e,i(r(t)))}},51463:(e,t,n)=>{var r=n(89567);e.exports=function(e){return r(2,e)}},35937:(e,t,n)=>{var r=n(29932),i=n(67206),o=n(63012),a=n(46904);e.exports=function(e,t){if(null==e)return{};var n=r(a(e),(function(e){return[e]}));return t=i(t),o(e,n,(function(e,n){return t(e,n[0])}))}},39601:(e,t,n)=>{var r=n(40371),i=n(79152),o=n(15403),a=n(40327);e.exports=function(e){return o(e)?r(a(e)):i(e)}},89734:(e,t,n)=>{var r=n(21078),i=n(82689),o=n(5976),a=n(16612),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},23493:(e,t,n)=>{var r=n(23279),i=n(13218);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},18601:(e,t,n)=>{var r=n(14841),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},40554:(e,t,n)=>{var r=n(18601);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},14841:(e,t,n)=>{var r=n(27561),i=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},93386:(e,t,n)=>{var r=n(21078),i=n(5976),o=n(45652),a=n(29246),s=i((function(e){return o(r(e,1,a,!0))}));e.exports=s},44908:(e,t,n)=>{var r=n(45652);e.exports=function(e){return e&&e.length?r(e):[]}},73955:(e,t,n)=>{var r=n(79833),i=0;e.exports=function(e){var t=++i;return r(e)+t}},40690:(e,t,n)=>{var r=n(34963),i=n(29932),o=n(40371),a=n(22545),s=n(29246),l=Math.max;e.exports=function(e){if(!e||!e.length)return[];var t=0;return e=r(e,(function(e){if(s(e))return t=l(e.length,t),!0})),a(t,(function(t){return i(e,o(t))}))}},52628:(e,t,n)=>{var r=n(47415),i=n(3674);e.exports=function(e){return null==e?[]:r(e,i(e))}},82569:(e,t,n)=>{var r=n(20731),i=n(5976),o=n(29246),a=i((function(e,t){return o(e)?r(e,t):[]}));e.exports=a},4788:(e,t,n)=>{var r=n(5976)(n(40690));e.exports=r},7287:(e,t,n)=>{var r=n(34865),i=n(1757);e.exports=function(e,t){return i(e||[],t||[],r)}},30381:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function u(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t,n,r){return $n(e,t,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=g()),e._pf}function A(e){if(null==e._isValid){var t=h(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=_(NaN);return null!=e?f(h(t),e):h(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var E=r.momentProperties=[],y=!1;function S(e,t){var n,r,i,o=E.length;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=h(t)),u(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)u(i=t[r=E[n]])||(e[r]=i);return e}function v(e){S(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function I(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function T(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function b(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,a,l=[],u=arguments.length;for(o=0;o<u;o++){if(i="","object"==typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];l.push(i)}T(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var M,P={};function C(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),P[e]||(T(t),P[e]=!0)}function O(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e){var t,n;for(n in e)s(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function N(e,t){var n,r=f({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(r[n]=f({},r[n]));return r}function w(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,M=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var D={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return O(r)?r.call(t,n):r}function B(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var k=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},x={};function F(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(x[e]=i),t&&(x[t[0]]=function(){return B(i.apply(this,arguments),t[1],t[2])}),n&&(x[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function K(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(e){var t,n,r=e.match(k);for(t=0,n=r.length;t<n;t++)x[r[t]]?r[t]=x[r[t]]:r[t]=K(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=O(r[i])?r[i].call(t,e):r[i];return o}}function j(e,t){return e.isValid()?(t=V(t,e.localeData()),U[t]=U[t]||Y(t),U[t](e)):e.localeData().invalidDate()}function V(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;n>=0&&G.test(e);)e=e.replace(G,r),G.lastIndex=0,n-=1;return e}var W={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(k).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var Q="Invalid date";function $(){return this._invalidDate}var q="%d",J=/\d{1,2}/;function z(e){return this._ordinal.replace("%d",e)}var X={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,n,r){var i=this._relativeTime[n];return O(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function re(e){return"string"==typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)s(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var oe={};function ae(e,t){oe[e]=t}function se(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:oe[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function le(e){return e%4==0&&e%100!=0||e%400==0}function ue(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ce(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ue(t)),n}function de(e,t){return function(n){return null!=n?(fe(this,e,n),r.updateOffset(this,t),this):pe(this,e)}}function pe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&le(e.year())&&1===e.month()&&29===e.date()?(n=ce(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ze(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function _e(e){return O(this[e=re(e)])?this[e]():this}function ge(e,t){if("object"==typeof e){var n,r=se(e=ie(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(O(this[e=re(e)]))return this[e](t);return this}var he,Ae=/\d/,me=/\d\d/,Ee=/\d{3}/,ye=/\d{4}/,Se=/[+-]?\d{6}/,ve=/\d\d?/,Ie=/\d\d\d\d?/,Te=/\d\d\d\d\d\d?/,be=/\d{1,3}/,Me=/\d{1,4}/,Pe=/[+-]?\d{1,6}/,Ce=/\d+/,Oe=/[+-]?\d+/,Re=/Z|[+-]\d\d:?\d\d/gi,Ne=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[+-]?\d+(\.\d{1,3})?/,De=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Le(e,t,n){he[e]=O(t)?t:function(e,r){return e&&n?n:t}}function Be(e,t){return s(he,e)?he[e](t._strict,t._locale):new RegExp(ke(e))}function ke(e){return Ge(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Ge(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}he={};var Ue={};function xe(e,t){var n,r,i=t;for("string"==typeof e&&(e=[e]),c(t)&&(i=function(e,n){n[t]=ce(e)}),r=e.length,n=0;n<r;n++)Ue[e[n]]=i}function Fe(e,t){xe(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Ke(e,t,n){null!=t&&s(Ue,e)&&Ue[e](t,n._a,n,e)}var Ye,je=0,Ve=1,We=2,He=3,Qe=4,$e=5,qe=6,Je=7,ze=8;function Xe(e,t){return(e%t+t)%t}function Ze(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Xe(t,12);return e+=(t-n)/12,1===n?le(e)?29:28:31-n%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",(function(){return this.month()+1})),F("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),F("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),ae("month",8),Le("M",ve),Le("MM",ve,me),Le("MMM",(function(e,t){return t.monthsShortRegex(e)})),Le("MMMM",(function(e,t){return t.monthsRegex(e)})),xe(["M","MM"],(function(e,t){t[Ve]=ce(e)-1})),xe(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Ve]=i:h(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=De,it=De;function ot(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function at(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function st(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=_([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))||-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))||-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}function lt(e,t,n){var r,i,o;if(this._monthsParseExact)return st.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=_([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ut(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=ce(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ze(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ct(e){return null!=e?(ut(this,e),r.updateOffset(this,!0),this):pe(this,"Month")}function dt(){return Ze(this.year(),this.month())}function pt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||_t.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(e){return this._monthsParseExact?(s(this,"_monthsRegex")||_t.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _t(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=_([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=Ge(r[t]),i[t]=Ge(i[t]);for(t=0;t<24;t++)o[t]=Ge(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function gt(e){return le(e)?366:365}F("Y",0,0,(function(){var e=this.year();return e<=9999?B(e,4):"+"+e})),F(0,["YY",2],0,(function(){return this.year()%100})),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),ae("year",1),Le("Y",Oe),Le("YY",ve,me),Le("YYYY",Me,ye),Le("YYYYY",Pe,Se),Le("YYYYYY",Pe,Se),xe(["YYYYY","YYYYYY"],je),xe("YYYY",(function(e,t){t[je]=2===e.length?r.parseTwoDigitYear(e):ce(e)})),xe("YY",(function(e,t){t[je]=r.parseTwoDigitYear(e)})),xe("Y",(function(e,t){t[je]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return ce(e)+(ce(e)>68?1900:2e3)};var ht=de("FullYear",!0);function At(){return le(this.year())}function mt(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}function Et(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function yt(e,t,n){var r=7+t-n;return-(7+Et(e,0,r).getUTCDay()-t)%7+r-1}function St(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+yt(e,r,i);return s<=0?a=gt(o=e-1)+s:s>gt(e)?(o=e+1,a=s-gt(e)):(o=e,a=s),{year:o,dayOfYear:a}}function vt(e,t,n){var r,i,o=yt(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+It(i=e.year()-1,t,n):a>It(e.year(),t,n)?(r=a-It(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function It(e,t,n){var r=yt(e,t,n),i=yt(e+1,t,n);return(gt(e)-r+i)/7}function Tt(e){return vt(e,this._week.dow,this._week.doy).week}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),ae("week",5),ae("isoWeek",5),Le("w",ve),Le("ww",ve,me),Le("W",ve),Le("WW",ve,me),Fe(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=ce(e)}));var bt={dow:0,doy:6};function Mt(){return this._week.dow}function Pt(){return this._week.doy}function Ct(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ot(e){var t=vt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Rt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Nt(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function wt(e,t){return e.slice(t,7).concat(e.slice(0,t))}F("d",0,"do","day"),F("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),F("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),F("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),ae("day",11),ae("weekday",11),ae("isoWeekday",11),Le("d",ve),Le("e",ve),Le("E",ve),Le("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Le("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Le("dddd",(function(e,t){return t.weekdaysRegex(e)})),Fe(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:h(n).invalidWeekday=e})),Fe(["d","e","E"],(function(e,t,n,r){t[r]=ce(e)}));var Dt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Lt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Bt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),kt=De,Gt=De,Ut=De;function xt(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?wt(n,this._week.dow):e?n[e.day()]:n}function Ft(e){return!0===e?wt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Kt(e){return!0===e?wt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Yt(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=_([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))||-1!==(i=Ye.call(this._shortWeekdaysParse,a))||-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))||-1!==(i=Ye.call(this._weekdaysParse,a))||-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))||-1!==(i=Ye.call(this._weekdaysParse,a))||-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}function jt(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Yt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=_([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Vt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Rt(e,this.localeData()),this.add(e-t,"d")):t}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ht(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Nt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=kt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function $t(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ut),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Jt(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],l=[],u=[];for(t=0;t<7;t++)n=_([2e3,1]).day(t),r=Ge(this.weekdaysMin(n,"")),i=Ge(this.weekdaysShort(n,"")),o=Ge(this.weekdays(n,"")),a.push(r),s.push(i),l.push(o),u.push(r),u.push(i),u.push(o);a.sort(e),s.sort(e),l.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function zt(){return this.hours()%12||12}function Xt(){return this.hours()||24}function Zt(e,t){F(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,zt),F("k",["kk",2],0,Xt),F("hmm",0,0,(function(){return""+zt.apply(this)+B(this.minutes(),2)})),F("hmmss",0,0,(function(){return""+zt.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)})),F("Hmm",0,0,(function(){return""+this.hours()+B(this.minutes(),2)})),F("Hmmss",0,0,(function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),ne("hour","h"),ae("hour",13),Le("a",en),Le("A",en),Le("H",ve),Le("h",ve),Le("k",ve),Le("HH",ve,me),Le("hh",ve,me),Le("kk",ve,me),Le("hmm",Ie),Le("hmmss",Te),Le("Hmm",Ie),Le("Hmmss",Te),xe(["H","HH"],He),xe(["k","kk"],(function(e,t,n){var r=ce(e);t[He]=24===r?0:r})),xe(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),xe(["h","hh"],(function(e,t,n){t[He]=ce(e),h(n).bigHour=!0})),xe("hmm",(function(e,t,n){var r=e.length-2;t[He]=ce(e.substr(0,r)),t[Qe]=ce(e.substr(r)),h(n).bigHour=!0})),xe("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[He]=ce(e.substr(0,r)),t[Qe]=ce(e.substr(r,2)),t[$e]=ce(e.substr(i)),h(n).bigHour=!0})),xe("Hmm",(function(e,t,n){var r=e.length-2;t[He]=ce(e.substr(0,r)),t[Qe]=ce(e.substr(r))})),xe("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[He]=ce(e.substr(0,r)),t[Qe]=ce(e.substr(r,2)),t[$e]=ce(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=de("Hours",!0);function on(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,sn={calendar:D,longDateFormat:W,invalidDate:Q,ordinal:q,dayOfMonthOrdinalParse:J,relativeTime:X,months:et,monthsShort:tt,week:bt,weekdays:Dt,weekdaysMin:Bt,weekdaysShort:Lt,meridiemParse:nn},ln={},un={};function cn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function dn(e){return e?e.toLowerCase().replace("_","-"):e}function pn(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=dn(e[o]).split("-")).length,n=(n=dn(e[o+1]))?n.split("-"):null;t>0;){if(r=_n(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&cn(i,n)>=t-1)break;t--}o++}return an}function fn(e){return null!=e.match("^[^/\\\\]*$")}function _n(t){var n=null;if(void 0===ln[t]&&e&&e.exports&&fn(t))try{n=an._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),gn(n)}catch(e){ln[t]=null}return ln[t]}function gn(e,t){var n;return e&&((n=u(t)?mn(e):hn(e,t))?an=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function hn(e,t){if(null!==t){var n,r=sn;if(t.abbr=e,null!=ln[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ln[e]._config;else if(null!=t.parentLocale)if(null!=ln[t.parentLocale])r=ln[t.parentLocale]._config;else{if(null==(n=_n(t.parentLocale)))return un[t.parentLocale]||(un[t.parentLocale]=[]),un[t.parentLocale].push({name:e,config:t}),null;r=n._config}return ln[e]=new w(N(r,t)),un[e]&&un[e].forEach((function(e){hn(e.name,e.config)})),gn(e),ln[e]}return delete ln[e],null}function An(e,t){if(null!=t){var n,r,i=sn;null!=ln[e]&&null!=ln[e].parentLocale?ln[e].set(N(ln[e]._config,t)):(null!=(r=_n(e))&&(i=r._config),t=N(i,t),null==r&&(t.abbr=e),(n=new w(t)).parentLocale=ln[e],ln[e]=n),gn(e)}else null!=ln[e]&&(null!=ln[e].parentLocale?(ln[e]=ln[e].parentLocale,e===gn()&&gn(e)):null!=ln[e]&&delete ln[e]);return ln[e]}function mn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!o(e)){if(t=_n(e))return t;e=[e]}return pn(e)}function En(){return M(ln)}function yn(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[Ve]<0||n[Ve]>11?Ve:n[We]<1||n[We]>Ze(n[je],n[Ve])?We:n[He]<0||n[He]>24||24===n[He]&&(0!==n[Qe]||0!==n[$e]||0!==n[qe])?He:n[Qe]<0||n[Qe]>59?Qe:n[$e]<0||n[$e]>59?$e:n[qe]<0||n[qe]>999?qe:-1,h(e)._overflowDayOfYear&&(t<je||t>We)&&(t=We),h(e)._overflowWeeks&&-1===t&&(t=Je),h(e)._overflowWeekday&&-1===t&&(t=ze),h(e).overflow=t),e}var Sn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,In=/Z|[+-]\d\d(?::?\d\d)?/,Tn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],bn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Mn=/^\/?Date\((-?\d+)/i,Pn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function On(e){var t,n,r,i,o,a,s=e._i,l=Sn.exec(s)||vn.exec(s),u=Tn.length,c=bn.length;if(l){for(h(e).iso=!0,t=0,n=u;t<n;t++)if(Tn[t][1].exec(l[1])){i=Tn[t][0],r=!1!==Tn[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=c;t<n;t++)if(bn[t][1].exec(l[3])){o=(l[2]||" ")+bn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!In.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),Kn(e)}else e._isValid=!1}function Rn(e,t,n,r,i,o){var a=[Nn(e),tt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function Nn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function wn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Dn(e,t,n){return!e||Lt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(h(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Ln(e,t,n){if(e)return Cn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Bn(e){var t,n=Pn.exec(wn(e._i));if(n){if(t=Rn(n[4],n[3],n[2],n[5],n[6],n[7]),!Dn(n[1],t,e))return;e._a=t,e._tzm=Ln(n[8],n[9],n[10]),e._d=Et.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),h(e).rfc2822=!0}else e._isValid=!1}function kn(e){var t=Mn.exec(e._i);null===t?(On(e),!1===e._isValid&&(delete e._isValid,Bn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Gn(e,t,n){return null!=e?e:null!=t?t:n}function Un(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function xn(e){var t,n,r,i,o,a=[];if(!e._d){for(r=Un(e),e._w&&null==e._a[We]&&null==e._a[Ve]&&Fn(e),null!=e._dayOfYear&&(o=Gn(e._a[je],r[je]),(e._dayOfYear>gt(o)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),n=Et(o,0,e._dayOfYear),e._a[Ve]=n.getUTCMonth(),e._a[We]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[He]&&0===e._a[Qe]&&0===e._a[$e]&&0===e._a[qe]&&(e._nextDay=!0,e._a[He]=0),e._d=(e._useUTC?Et:mt).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[He]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(h(e).weekdayMismatch=!0)}}function Fn(e){var t,n,r,i,o,a,s,l,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=Gn(t.GG,e._a[je],vt(qn(),1,4).year),r=Gn(t.W,1),((i=Gn(t.E,1))<1||i>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,u=vt(qn(),o,a),n=Gn(t.gg,e._a[je],u.year),r=Gn(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o),r<1||r>It(n,o,a)?h(e)._overflowWeeks=!0:null!=l?h(e)._overflowWeekday=!0:(s=St(n,r,i,o,a),e._a[je]=s.year,e._dayOfYear=s.dayOfYear)}function Kn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],h(e).empty=!0;var t,n,i,o,a,s,l,u=""+e._i,c=u.length,d=0;for(l=(i=V(e._f,e._locale).match(k)||[]).length,t=0;t<l;t++)o=i[t],(n=(u.match(Be(o,e))||[])[0])&&((a=u.substr(0,u.indexOf(n))).length>0&&h(e).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),d+=n.length),x[o]?(n?h(e).empty=!1:h(e).unusedTokens.push(o),Ke(o,n,e)):e._strict&&!n&&h(e).unusedTokens.push(o);h(e).charsLeftOver=c-d,u.length>0&&h(e).unusedInput.push(u),e._a[He]<=12&&!0===h(e).bigHour&&e._a[He]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[He]=Yn(e._locale,e._a[He],e._meridiem),null!==(s=h(e).era)&&(e._a[je]=e._locale.erasConvertYear(s,e._a[je])),xn(e),yn(e)}else Bn(e);else On(e)}function Yn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function jn(e){var t,n,r,i,o,a,s=!1,l=e._f.length;if(0===l)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<l;i++)o=0,a=!1,t=S({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Kn(t),A(t)&&(a=!0),o+=h(t).charsLeftOver,o+=10*h(t).unusedTokens.length,h(t).score=o,s?o<r&&(r=o,n=t):(null==r||o<r||a)&&(r=o,n=t,a&&(s=!0));f(e,n||t)}function Vn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=p([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),xn(e)}}function Wn(e){var t=new v(yn(Hn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Hn(e){var t=e._i,n=e._f;return e._locale=e._locale||mn(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),I(t)?new v(yn(t)):(d(t)?e._d=t:o(n)?jn(e):n?Kn(e):Qn(e),A(e)||(e._d=null),e))}function Qn(e){var t=e._i;u(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"==typeof t?kn(e):o(t)?(e._a=p(t.slice(0),(function(e){return parseInt(e,10)})),xn(e)):a(t)?Vn(e):c(t)?e._d=new Date(t):r.createFromInputFallback(e)}function $n(e,t,n,r,i){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&l(e)||o(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,Wn(s)}function qn(e,t,n,r){return $n(e,t,n,r,!1)}r.createFromInputFallback=b("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Jn=b("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),zn=b("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Xn(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return qn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Zn(){return Xn("isBefore",[].slice.call(arguments,0))}function er(){return Xn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(s(e,t)&&(-1===Ye.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==ce(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function or(){return Cr(NaN)}function ar(e){var t=ie(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=mn(),this._bubble()}function sr(e){return e instanceof ar}function lr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ur(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&ce(e[r])!==ce(t[r]))&&a++;return a+o}function cr(e,t){F(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+B(~~(e/60),2)+t+B(~~e%60,2)}))}cr("Z",":"),cr("ZZ",""),Le("Z",Ne),Le("ZZ",Ne),xe(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=pr(Ne,e)}));var dr=/([\+\-]|\d\d)/gi;function pr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(dr)||["-",0,0])[1]+ce(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(I(e)||d(e)?e.valueOf():qn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):qn(e).local()}function _r(e){return-Math.round(e._d.getTimezoneOffset())}function gr(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=pr(Ne,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=_r(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?Dr(this,Cr(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:_r(this)}function hr(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ar(e){return this.utcOffset(0,e)}function mr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_r(this),"m")),this}function Er(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=pr(Re,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function yr(e){return!!this.isValid()&&(e=e?qn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Sr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function vr(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return S(t,this),(t=Hn(t))._a?(e=t._isUTC?_(t._a):qn(t._a),this._isDSTShifted=this.isValid()&&ur(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ir(){return!!this.isValid()&&!this._isUTC}function Tr(){return!!this.isValid()&&this._isUTC}function br(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Mr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Pr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cr(e,t){var n,r,i,o=e,a=null;return sr(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(a=Mr.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:ce(a[We])*n,h:ce(a[He])*n,m:ce(a[Qe])*n,s:ce(a[$e])*n,ms:ce(lr(1e3*a[qe]))*n}):(a=Pr.exec(e))?(n="-"===a[1]?-1:1,o={y:Or(a[2],n),M:Or(a[3],n),w:Or(a[4],n),d:Or(a[5],n),h:Or(a[6],n),m:Or(a[7],n),s:Or(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Nr(qn(o.from),qn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new ar(o),sr(e)&&s(e,"_locale")&&(r._locale=e._locale),sr(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Or(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Rr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Nr(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Rr(e,t):((n=Rr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function wr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Dr(this,Cr(n,r),e),this}}function Dr(e,t,n,i){var o=t._milliseconds,a=lr(t._days),s=lr(t._months);e.isValid()&&(i=null==i||i,s&&ut(e,pe(e,"Month")+s*n),a&&fe(e,"Date",pe(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,a||s))}Cr.fn=ar.prototype,Cr.invalid=or;var Lr=wr(1,"add"),Br=wr(-1,"subtract");function kr(e){return"string"==typeof e||e instanceof String}function Gr(e){return I(e)||d(e)||kr(e)||c(e)||xr(e)||Ur(e)||null==e}function Ur(e){var t,n,r=a(e)&&!l(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u=o.length;for(t=0;t<u;t+=1)n=o[t],i=i||s(e,n);return r&&i}function xr(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!c(t)&&kr(e)})).length),t&&n}function Fr(e){var t,n,r=a(e)&&!l(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],i=i||s(e,n);return r&&i}function Kr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Yr(e,t){1===arguments.length&&(arguments[0]?Gr(arguments[0])?(e=arguments[0],t=void 0):Fr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||qn(),i=fr(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=t&&(O(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,qn(n)))}function jr(){return new v(this)}function Vr(e,t){var n=I(e)?e:qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Wr(e,t){var n=I(e)?e:qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Hr(e,t,n,r){var i=I(e)?e:qn(e),o=I(t)?t:qn(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Qr(e,t){var n,r=I(e)?e:qn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function $r(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function qr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Jr(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":o=zr(this,r)/12;break;case"month":o=zr(this,r);break;case"quarter":o=zr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:ue(o)}function zr(e,t){if(e.date()<t.date())return-zr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Xr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?j(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(n,"Z")):j(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=j(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(I(e)&&e.isValid()||qn(e).isValid())?Cr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(qn(),e)}function ii(e,t){return this.isValid()&&(I(e)&&e.isValid()||qn(e).isValid())?Cr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oi(e){return this.to(qn(),e)}function ai(e){var t;return void 0===e?this._locale._abbr:(null!=(t=mn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var si=b("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function li(){return this._locale}var ui=1e3,ci=60*ui,di=60*ci,pi=3506328*di;function fi(e,t){return(e%t+t)%t}function _i(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-pi:new Date(e,t,n).valueOf()}function gi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-pi:Date.UTC(e,t,n)}function hi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gi:_i,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*ci),di);break;case"minute":t=this._d.valueOf(),t-=fi(t,ci);break;case"second":t=this._d.valueOf(),t-=fi(t,ui)}return this._d.setTime(t),r.updateOffset(this,!0),this}function Ai(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gi:_i,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=di-fi(t+(this._isUTC?0:this.utcOffset()*ci),di)-1;break;case"minute":t=this._d.valueOf(),t+=ci-fi(t,ci)-1;break;case"second":t=this._d.valueOf(),t+=ui-fi(t,ui)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function mi(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function yi(){return new Date(this.valueOf())}function Si(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function vi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ii(){return this.isValid()?this.toISOString():null}function Ti(){return A(this)}function bi(){return f({},h(this))}function Mi(){return h(this).overflow}function Pi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(e,t){var n,i,o,a=this._eras||mn("en")._eras;for(n=0,i=a.length;n<i;++n){switch(typeof a[n].since){case"string":o=r(a[n].since).startOf("day"),a[n].since=o.valueOf()}switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=r(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a}function Oi(e,t,n){var r,i,o,a,s,l=this.eras();for(e=e.toUpperCase(),r=0,i=l.length;r<i;++r)if(o=l[r].name.toUpperCase(),a=l[r].abbr.toUpperCase(),s=l[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[r];break;case"NNNN":if(o===e)return l[r];break;case"NNNNN":if(s===e)return l[r]}else if([o,a,s].indexOf(e)>=0)return l[r]}function Ri(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Ni(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function wi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Li(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()}function Bi(e){return s(this,"_erasNameRegex")||Yi.call(this),e?this._erasNameRegex:this._erasRegex}function ki(e){return s(this,"_erasAbbrRegex")||Yi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Gi(e){return s(this,"_erasNarrowRegex")||Yi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ui(e,t){return t.erasAbbrRegex(e)}function xi(e,t){return t.erasNameRegex(e)}function Fi(e,t){return t.erasNarrowRegex(e)}function Ki(e,t){return t._eraYearOrdinalRegex||Ce}function Yi(){var e,t,n=[],r=[],i=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)r.push(Ge(a[e].name)),n.push(Ge(a[e].abbr)),i.push(Ge(a[e].narrow)),o.push(Ge(a[e].name)),o.push(Ge(a[e].abbr)),o.push(Ge(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function ji(e,t){F(0,[e,e.length],0,t)}function Vi(e){return Ji.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Wi(e){return Ji.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Hi(){return It(this.year(),1,4)}function Qi(){return It(this.isoWeekYear(),1,4)}function $i(){var e=this.localeData()._week;return It(this.year(),e.dow,e.doy)}function qi(){var e=this.localeData()._week;return It(this.weekYear(),e.dow,e.doy)}function Ji(e,t,n,r,i){var o;return null==e?vt(this,r,i).year:(t>(o=It(e,r,i))&&(t=o),zi.call(this,e,t,n,r,i))}function zi(e,t,n,r,i){var o=St(e,t,n,r,i),a=Et(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Xi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),Le("N",Ui),Le("NN",Ui),Le("NNN",Ui),Le("NNNN",xi),Le("NNNNN",Fi),xe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?h(n).era=i:h(n).invalidEra=e})),Le("y",Ce),Le("yy",Ce),Le("yyy",Ce),Le("yyyy",Ce),Le("yo",Ki),xe(["y","yy","yyy","yyyy"],je),xe(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[je]=n._locale.eraYearOrdinalParse(e,i):t[je]=parseInt(e,10)})),F(0,["gg",2],0,(function(){return this.weekYear()%100})),F(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),ji("gggg","weekYear"),ji("ggggg","weekYear"),ji("GGGG","isoWeekYear"),ji("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),ae("weekYear",1),ae("isoWeekYear",1),Le("G",Oe),Le("g",Oe),Le("GG",ve,me),Le("gg",ve,me),Le("GGGG",Me,ye),Le("gggg",Me,ye),Le("GGGGG",Pe,Se),Le("ggggg",Pe,Se),Fe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=ce(e)})),Fe(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),F("Q",0,"Qo","quarter"),ne("quarter","Q"),ae("quarter",7),Le("Q",Ae),xe("Q",(function(e,t){t[Ve]=3*(ce(e)-1)})),F("D",["DD",2],"Do","date"),ne("date","D"),ae("date",9),Le("D",ve),Le("DD",ve,me),Le("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),xe(["D","DD"],We),xe("Do",(function(e,t){t[We]=ce(e.match(ve)[0])}));var Zi=de("Date",!0);function eo(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}F("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),ae("dayOfYear",4),Le("DDD",be),Le("DDDD",Ee),xe(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=ce(e)})),F("m",["mm",2],0,"minute"),ne("minute","m"),ae("minute",14),Le("m",ve),Le("mm",ve,me),xe(["m","mm"],Qe);var to=de("Minutes",!1);F("s",["ss",2],0,"second"),ne("second","s"),ae("second",15),Le("s",ve),Le("ss",ve,me),xe(["s","ss"],$e);var no,ro,io=de("Seconds",!1);for(F("S",0,0,(function(){return~~(this.millisecond()/100)})),F(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),F(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),F(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),F(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),F(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),F(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),ae("millisecond",16),Le("S",be,Ae),Le("SS",be,me),Le("SSS",be,Ee),no="SSSS";no.length<=9;no+="S")Le(no,Ce);function oo(e,t){t[qe]=ce(1e3*("0."+e))}for(no="S";no.length<=9;no+="S")xe(no,oo);function ao(){return this._isUTC?"UTC":""}function so(){return this._isUTC?"Coordinated Universal Time":""}ro=de("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var lo=v.prototype;function uo(e){return qn(1e3*e)}function co(){return qn.apply(null,arguments).parseZone()}function po(e){return e}lo.add=Lr,lo.calendar=Yr,lo.clone=jr,lo.diff=Jr,lo.endOf=Ai,lo.format=ti,lo.from=ni,lo.fromNow=ri,lo.to=ii,lo.toNow=oi,lo.get=_e,lo.invalidAt=Mi,lo.isAfter=Vr,lo.isBefore=Wr,lo.isBetween=Hr,lo.isSame=Qr,lo.isSameOrAfter=$r,lo.isSameOrBefore=qr,lo.isValid=Ti,lo.lang=si,lo.locale=ai,lo.localeData=li,lo.max=zn,lo.min=Jn,lo.parsingFlags=bi,lo.set=ge,lo.startOf=hi,lo.subtract=Br,lo.toArray=Si,lo.toObject=vi,lo.toDate=yi,lo.toISOString=Zr,lo.inspect=ei,"undefined"!=typeof Symbol&&null!=Symbol.for&&(lo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),lo.toJSON=Ii,lo.toString=Xr,lo.unix=Ei,lo.valueOf=mi,lo.creationData=Pi,lo.eraName=Ni,lo.eraNarrow=wi,lo.eraAbbr=Di,lo.eraYear=Li,lo.year=ht,lo.isLeapYear=At,lo.weekYear=Vi,lo.isoWeekYear=Wi,lo.quarter=lo.quarters=Xi,lo.month=ct,lo.daysInMonth=dt,lo.week=lo.weeks=Ct,lo.isoWeek=lo.isoWeeks=Ot,lo.weeksInYear=$i,lo.weeksInWeekYear=qi,lo.isoWeeksInYear=Hi,lo.isoWeeksInISOWeekYear=Qi,lo.date=Zi,lo.day=lo.days=Vt,lo.weekday=Wt,lo.isoWeekday=Ht,lo.dayOfYear=eo,lo.hour=lo.hours=rn,lo.minute=lo.minutes=to,lo.second=lo.seconds=io,lo.millisecond=lo.milliseconds=ro,lo.utcOffset=gr,lo.utc=Ar,lo.local=mr,lo.parseZone=Er,lo.hasAlignedHourOffset=yr,lo.isDST=Sr,lo.isLocal=Ir,lo.isUtcOffset=Tr,lo.isUtc=br,lo.isUTC=br,lo.zoneAbbr=ao,lo.zoneName=so,lo.dates=b("dates accessor is deprecated. Use date instead.",Zi),lo.months=b("months accessor is deprecated. Use month instead",ct),lo.years=b("years accessor is deprecated. Use year instead",ht),lo.zone=b("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",hr),lo.isDSTShifted=b("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",vr);var fo=w.prototype;function _o(e,t,n,r){var i=mn(),o=_().set(r,t);return i[n](o,e)}function go(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return _o(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=_o(e,r,n,"month");return i}function ho(e,t,n,r){"boolean"==typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var i,o=mn(),a=e?o._week.dow:0,s=[];if(null!=n)return _o(t,(n+a)%7,r,"day");for(i=0;i<7;i++)s[i]=_o(t,(i+a)%7,r,"day");return s}function Ao(e,t){return go(e,t,"months")}function mo(e,t){return go(e,t,"monthsShort")}function Eo(e,t,n){return ho(e,t,n,"weekdays")}function yo(e,t,n){return ho(e,t,n,"weekdaysShort")}function So(e,t,n){return ho(e,t,n,"weekdaysMin")}fo.calendar=L,fo.longDateFormat=H,fo.invalidDate=$,fo.ordinal=z,fo.preparse=po,fo.postformat=po,fo.relativeTime=Z,fo.pastFuture=ee,fo.set=R,fo.eras=Ci,fo.erasParse=Oi,fo.erasConvertYear=Ri,fo.erasAbbrRegex=ki,fo.erasNameRegex=Bi,fo.erasNarrowRegex=Gi,fo.months=ot,fo.monthsShort=at,fo.monthsParse=lt,fo.monthsRegex=ft,fo.monthsShortRegex=pt,fo.week=Tt,fo.firstDayOfYear=Pt,fo.firstDayOfWeek=Mt,fo.weekdays=xt,fo.weekdaysMin=Kt,fo.weekdaysShort=Ft,fo.weekdaysParse=jt,fo.weekdaysRegex=Qt,fo.weekdaysShortRegex=$t,fo.weekdaysMinRegex=qt,fo.isPM=tn,fo.meridiem=on,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ce(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=b("moment.lang is deprecated. Use moment.locale instead.",gn),r.langData=b("moment.langData is deprecated. Use moment.localeData instead.",mn);var vo=Math.abs;function Io(){var e=this._data;return this._milliseconds=vo(this._milliseconds),this._days=vo(this._days),this._months=vo(this._months),e.milliseconds=vo(e.milliseconds),e.seconds=vo(e.seconds),e.minutes=vo(e.minutes),e.hours=vo(e.hours),e.months=vo(e.months),e.years=vo(e.years),this}function To(e,t,n,r){var i=Cr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function bo(e,t){return To(this,e,t,1)}function Mo(e,t){return To(this,e,t,-1)}function Po(e){return e<0?Math.floor(e):Math.ceil(e)}function Co(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Po(Ro(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=ue(o/1e3),l.seconds=e%60,t=ue(e/60),l.minutes=t%60,n=ue(t/60),l.hours=n%24,a+=ue(n/24),s+=i=ue(Oo(a)),a-=Po(Ro(i)),r=ue(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function Oo(e){return 4800*e/146097}function Ro(e){return 146097*e/4800}function No(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Oo(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ro(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function wo(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ce(this._months/12):NaN}function Do(e){return function(){return this.as(e)}}var Lo=Do("ms"),Bo=Do("s"),ko=Do("m"),Go=Do("h"),Uo=Do("d"),xo=Do("w"),Fo=Do("M"),Ko=Do("Q"),Yo=Do("y");function jo(){return Cr(this)}function Vo(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Wo(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ho=Wo("milliseconds"),Qo=Wo("seconds"),$o=Wo("minutes"),qo=Wo("hours"),Jo=Wo("days"),zo=Wo("months"),Xo=Wo("years");function Zo(){return ue(this.days()/7)}var ea=Math.round,ta={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function na(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ra(e,t,n,r){var i=Cr(e).abs(),o=ea(i.as("s")),a=ea(i.as("m")),s=ea(i.as("h")),l=ea(i.as("d")),u=ea(i.as("M")),c=ea(i.as("w")),d=ea(i.as("y")),p=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(p=p||c<=1&&["w"]||c<n.w&&["ww",c]),(p=p||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d])[2]=t,p[3]=+e>0,p[4]=r,na.apply(null,p)}function ia(e){return void 0===e?ea:"function"==typeof e&&(ea=e,!0)}function oa(e,t){return void 0!==ta[e]&&(void 0===t?ta[e]:(ta[e]=t,"s"===e&&(ta.ss=t-1),!0))}function aa(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=ta;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(o=Object.assign({},ta,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=ra(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var sa=Math.abs;function la(e){return(e>0)-(e<0)||+e}function ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,a,s,l=sa(this._milliseconds)/1e3,u=sa(this._days),c=sa(this._months),d=this.asSeconds();return d?(e=ue(l/60),t=ue(e/60),l%=60,e%=60,n=ue(c/12),c%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",o=la(this._months)!==la(d)?"-":"",a=la(this._days)!==la(d)?"-":"",s=la(this._milliseconds)!==la(d)?"-":"",i+"P"+(n?o+n+"Y":"")+(c?o+c+"M":"")+(u?a+u+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+r+"S":"")):"P0D"}var ca=ar.prototype;return ca.isValid=ir,ca.abs=Io,ca.add=bo,ca.subtract=Mo,ca.as=No,ca.asMilliseconds=Lo,ca.asSeconds=Bo,ca.asMinutes=ko,ca.asHours=Go,ca.asDays=Uo,ca.asWeeks=xo,ca.asMonths=Fo,ca.asQuarters=Ko,ca.asYears=Yo,ca.valueOf=wo,ca._bubble=Co,ca.clone=jo,ca.get=Vo,ca.milliseconds=Ho,ca.seconds=Qo,ca.minutes=$o,ca.hours=qo,ca.days=Jo,ca.weeks=Zo,ca.months=zo,ca.years=Xo,ca.humanize=aa,ca.toISOString=ua,ca.toString=ua,ca.toJSON=ua,ca.locale=ai,ca.localeData=li,ca.toIsoString=b("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ca.lang=si,F("X",0,0,"unix"),F("x",0,0,"valueOf"),Le("x",Oe),Le("X",we),xe("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),xe("x",(function(e,t,n){n._d=new Date(ce(e))})),
//! moment.js
r.version="2.29.4",i(qn),r.fn=lo,r.min=Zn,r.max=er,r.now=tr,r.utc=_,r.unix=uo,r.months=Ao,r.isDate=d,r.locale=gn,r.invalid=m,r.duration=Cr,r.isMoment=I,r.weekdays=Eo,r.parseZone=co,r.localeData=mn,r.isDuration=sr,r.monthsShort=mo,r.weekdaysMin=So,r.defineLocale=hn,r.updateLocale=An,r.locales=En,r.weekdaysShort=yo,r.normalizeUnits=re,r.relativeTimeRounding=ia,r.relativeTimeThreshold=oa,r.calendarFormat=Kr,r.prototype=lo,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},27418:e=>{"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},26470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=s,a=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,s):r=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),t(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var l=n.length-s,u=a<l?a:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===n.charCodeAt(s+d))return n.slice(s+d+1);if(0===d)return n.slice(s+d)}else a>u&&(47===e.charCodeAt(i+d)?c=d:0===d&&(c=0));break}var p=e.charCodeAt(i+d);if(p!==n.charCodeAt(s+d))break;47===p&&(c=d)}var f="";for(d=i+c+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===f.length?f+="..":f+="/..");return f.length>0?f+n.slice(s+c):(s+=c,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(n=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,a=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,l=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!a){i=r+1;break}}else-1===l&&(a=!1,l=r+1),s>=0&&(u===n.charCodeAt(s)?-1==--s&&(o=r):(s=-1,o=l))}return i===o?o=l:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===i&&(o=!1,i=s+1),46===l?-1===n?n=s:1!==a&&(a=1):-1!==n&&(a=-1);else if(!o){r=s+1;break}}return-1===n||-1===i||0===a||1===a&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var a=-1,s=0,l=-1,u=!0,c=e.length-1,d=0;c>=r;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==d&&(d=1):-1!==a&&(d=-1);else if(!u){s=c+1;break}return-1===a||-1===l||0===d||1===d&&a===l-1&&a===s+1?-1!==l&&(n.base=n.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(s,a),n.base=e.slice(s,l)),n.ext=e.slice(a,l)),s>0?n.dir=e.slice(0,s-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},94633:(e,t)=>{function n(e,t){for(var n=e.length,r=new Array(n),i={},o=n;o--;)i[o]||a(e[o],o,[]);return r;function a(o,s,l){if(l.indexOf(o)>=0)throw new Error("Cyclic dependency: "+JSON.stringify(o));if(!~e.indexOf(o))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(o));if(!i[s]){i[s]=!0;var u=t.filter((function(e){return e[0]===o}));if(s=u.length){var c=l.concat(o);do{var d=u[--s][1];a(d,e.indexOf(d),c)}while(s)}r[--n]=o}}}e.exports=t=function(e){return n(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.indexOf(i[0])<0&&t.push(i[0]),t.indexOf(i[1])<0&&t.push(i[1])}return t}(e),e)},t.array=n},42238:function(e,t,n){var r;!function(i,o){"use strict";var a="function",s="undefined",l="object",u="string",c="model",d="name",p="type",f="vendor",_="version",g="architecture",h="console",A="mobile",m="tablet",E="smarttv",y="wearable",S="embedded",v="Amazon",I="Apple",T="ASUS",b="BlackBerry",M="Firefox",P="Google",C="Huawei",O="LG",R="Microsoft",N="Motorola",w="Opera",D="Samsung",L="Sony",B="Xiaomi",k="Zebra",G="Facebook",U=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},x=function(e,t){return typeof e===u&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},K=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},Y=function(e,t){for(var n,r,i,s,u,c,d=0;d<t.length&&!u;){var p=t[d],f=t[d+1];for(n=r=0;n<p.length&&!u;)if(u=p[n++].exec(e))for(i=0;i<f.length;i++)c=u[++r],typeof(s=f[i])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):o:this[s[0]]=c?s[1].call(this,c,s[2]):o:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):o):this[s]=c||o;d+=2}},j=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(x(t[n][r],e))return"?"===n?o:n}else if(x(t[n],e))return"?"===n?o:n;return e},V={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,_],[/opios[\/ ]+([\w\.]+)/i],[_,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[_,[d,w]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[d,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[_,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[_,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[_,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],_],[/\bfocus\/([\w\.]+)/i],[_,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[_,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[_,[d,M]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],_],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,_],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,G],_],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,_],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[_,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[_,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[_,j,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,_]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,F]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[f,D],[p,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[f,D],[p,A]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[f,I],[p,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[f,I],[p,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[f,C],[p,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[f,C],[p,A]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[f,B],[p,A]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[f,B],[p,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[f,"OPPO"],[p,A]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[f,"Vivo"],[p,A]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[f,"Realme"],[p,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[f,N],[p,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[f,N],[p,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[f,O],[p,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[f,O],[p,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[f,"Lenovo"],[p,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[f,"Nokia"],[p,A]],[/(pixel c)\b/i],[c,[f,P],[p,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[f,P],[p,A]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[f,L],[p,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[f,L],[p,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[f,"OnePlus"],[p,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[f,v],[p,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[f,v],[p,A]],[/(playbook);[-\w\),; ]+(rim)/i],[c,f,[p,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[f,b],[p,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[f,T],[p,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[f,T],[p,A]],[/(nexus 9)/i],[c,[f,"HTC"],[p,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[f,[c,/_/g," "],[p,A]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[f,"Acer"],[p,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[f,"Meizu"],[p,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[f,"Sharp"],[p,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,c,[p,A]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,c,[p,m]],[/(surface duo)/i],[c,[f,R],[p,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[f,"Fairphone"],[p,A]],[/(u304aa)/i],[c,[f,"AT&T"],[p,A]],[/\bsie-(\w*)/i],[c,[f,"Siemens"],[p,A]],[/\b(rct\w+) b/i],[c,[f,"RCA"],[p,m]],[/\b(venue[\d ]{2,7}) b/i],[c,[f,"Dell"],[p,m]],[/\b(q(?:mv|ta)\w+) b/i],[c,[f,"Verizon"],[p,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[f,"Barnes & Noble"],[p,m]],[/\b(tm\d{3}\w+) b/i],[c,[f,"NuVision"],[p,m]],[/\b(k88) b/i],[c,[f,"ZTE"],[p,m]],[/\b(nx\d{3}j) b/i],[c,[f,"ZTE"],[p,A]],[/\b(gen\d{3}) b.+49h/i],[c,[f,"Swiss"],[p,A]],[/\b(zur\d{3}) b/i],[c,[f,"Swiss"],[p,m]],[/\b((zeki)?tb.*\b) b/i],[c,[f,"Zeki"],[p,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],c,[p,m]],[/\b(ns-?\w{0,9}) b/i],[c,[f,"Insignia"],[p,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[f,"NextBook"],[p,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],c,[p,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],c,[p,A]],[/\b(ph-1) /i],[c,[f,"Essential"],[p,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[f,"Envizen"],[p,m]],[/\b(trio[-\w\. ]+) b/i],[c,[f,"MachSpeed"],[p,m]],[/\btu_(1491) b/i],[c,[f,"Rotor"],[p,m]],[/(shield[\w ]+) b/i],[c,[f,"Nvidia"],[p,m]],[/(sprint) (\w+)/i],[f,c,[p,A]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[f,R],[p,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[f,k],[p,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[f,k],[p,A]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,c,[p,h]],[/droid.+; (shield) bui/i],[c,[f,"Nvidia"],[p,h]],[/(playstation [345portablevi]+)/i],[c,[f,L],[p,h]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[f,R],[p,h]],[/smart-tv.+(samsung)/i],[f,[p,E]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[f,D],[p,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,O],[p,E]],[/(apple) ?tv/i],[f,[c,"Apple TV"],[p,E]],[/crkey/i],[[c,"Chromecast"],[f,P],[p,E]],[/droid.+aft(\w)( bui|\))/i],[c,[f,v],[p,E]],[/\(dtv[\);].+(aquos)/i],[c,[f,"Sharp"],[p,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,K],[c,K],[p,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,E]],[/((pebble))app/i],[f,c,[p,y]],[/droid.+; (glass) \d/i],[c,[f,P],[p,y]],[/droid.+; (wt63?0{2,3})\)/i],[c,[f,k],[p,y]],[/(quest( 2)?)/i],[c,[f,G],[p,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[p,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[p,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,m]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[p,A]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,_],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[_,j,V]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[_,j,V]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[_,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,_],[/\(bb(10);/i],[_,[d,b]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[_,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],_],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,_],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,_]]},H=function(e,t){if(typeof e===l&&(t=e,e=o),!(this instanceof H))return new H(e,t).getResult();var n=e||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(W,t):W;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,Y.call(t,n,r.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,Y.call(e,n,r.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,Y.call(e,n,r.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,Y.call(e,n,r.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,Y.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>255?K(e,255):e,this},this.setUA(n),this};H.VERSION="0.7.31",H.BROWSER=U([d,_,"major"]),H.CPU=U([g]),H.DEVICE=U([c,f,p,h,A,E,m,y,S]),H.ENGINE=H.OS=U([d,_]),typeof t!==s?(e.exports&&(t=e.exports=H),t.UAParser=H):n.amdO?(r=function(){return H}.call(t,n,t,e))===o||(e.exports=r):typeof i!==s&&(i.UAParser=H);var Q=typeof i!==s&&(i.jQuery||i.Zepto);if(Q&&!Q.ua){var $=new H;Q.ua=$.getResult(),Q.ua.get=function(){return $.getUA()},Q.ua.set=function(e){$.setUA(e);var t=$.getResult();for(var n in t)Q.ua[n]=t[n]}}}("object"==typeof window?window:this)},35449:function(e,t,n){
/**
 *
 *
 * @author Jerry Bendy <jerry@icewingcc.com>
 * @licence MIT
 *
 */
!function(e){"use strict";var t,n=e.URLSearchParams&&e.URLSearchParams.prototype.get?e.URLSearchParams:null,r=n&&"a=1"===new n({a:1}).toString(),i=n&&"+"===new n("s=%2B").get("s"),o=!n||((t=new n).append("s"," &"),"s=+%26"===t.toString()),a=c.prototype,s=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&r&&i&&o)){a.append=function(e,t){g(this.__URLSearchParams__,e,t)},a.delete=function(e){delete this.__URLSearchParams__[e]},a.get=function(e){var t=this.__URLSearchParams__;return e in t?t[e][0]:null},a.getAll=function(e){var t=this.__URLSearchParams__;return e in t?t[e].slice(0):[]},a.has=function(e){return e in this.__URLSearchParams__},a.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},a.toString=function(){var e,t,n,r,i=this.__URLSearchParams__,o=[];for(t in i)for(n=d(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+d(r[e]));return o.join("&")};var l=!!i&&n&&!r&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:l?new Proxy(n,{construct:function(e,t){return new e(new c(t[0]).toString())}}):c});var u=e.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(e,t){var n=_(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},u.sort=u.sort||function(){var e,t,n,r=_(this.toString()),i=[];for(e in r)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var o=i[t],a=r[o];for(n=0;n<a.length;n++)this.append(o,a[n])}},u.keys=u.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},u.values=u.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},u.entries=u.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},s&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries)}function c(e){((e=e||"")instanceof URLSearchParams||e instanceof c)&&(e=e.toString()),this.__URLSearchParams__=_(e)}function d(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function p(e){return decodeURIComponent(e.replace(/\+/g," "))}function f(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s&&(n[e.Symbol.iterator]=function(){return n}),n}function _(e){var t={};if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&g(t,n,e[n]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var r=e.split("&"),i=0;i<r.length;i++){var o=r[i],a=o.indexOf("=");-1<a?g(t,p(o.slice(0,a)),p(o.slice(a+1))):o&&g(t,p(o),"")}}return t}function g(e,t,n){var r="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);t in e?e[t].push(r):e[t]=[r]}}(void 0!==n.g?n.g:"undefined"!=typeof window?window:this)},74493:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SINGLE_BYTE_TOKEN=t.DICT_VERSION=t.DICTIONARY_3_TOKEN=t.DICTIONARY_2_TOKEN=t.DICTIONARY_1_TOKEN=t.DICTIONARY_0_TOKEN=t.DICTIONARIES=void 0;t.DICT_VERSION=3;t.SINGLE_BYTE_TOKEN=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","notification","disappearing_mode","status","jid","broadcast","user","devices","device_hash","to","offline","message","result","class","xmlns","duration","notify","iq","t","ack","g.us","enc","urn:xmpp:whatsapp:push","presence","config_value","picture","verified_name","config_code","key-index-list","contact","mediatype","routing_info","edge_routing","get","read","urn:xmpp:ping","fallback_hostname","0","chatstate","business_hours_config","unavailable","download_buckets","skmsg","verified_level","composing","handshake","device-list","media","text","fallback_ip4","media_conn","device","creation","location","config","item","fallback_ip6","count","w:profile:picture","image","business","2","hostname","call-creator","display_name","relaylatency","platform","abprops","success","msg","offline_preview","prop","key-index","v","day_of_week","pkmsg","version","1","ping","w:p","download","video","set","specific_hours","props","primary","unknown","hash","commerce_experience","last","subscribe","max_buckets","call","profile","member_since_text","close_time","call-id","sticker","mode","participants","value","query","profile_options","open_time","code","list","host","ts","contacts","upload","lid","preview","update","usync","w:stats","delivery","auth_ttl","context","fail","cart_enabled","appdata","category","atn","direct_connection","decrypt-fail","relay_id","mmg-fallback.whatsapp.net","target","available","name","last_id","mmg.whatsapp.net","categories","401","is_new","index","tctoken","ip4","token_id","latency","recipient","edit","ip6","add","thumbnail-document","26","paused","true","identity","stream:error","key","sidelist","background","audio","3","thumbnail-image","biz-cover-photo","cat","gcm","thumbnail-video","error","auth","deny","serial","in","registration","thumbnail-link","remove","00","gif","thumbnail-gif","tag","capability","multicast","item-not-found","description","business_hours","config_expo_key","md-app-state","expiration","fallback","ttl","300","md-msg-hist","device_orientation","out","w:m","open_24h","side_list","token","inactive","01","document","te2","played","encrypt","msgr","hide","direct_path","12","state","not-authorized","url","terminate","signature","status-revoke-delay","02","te","linked_accounts","trusted_contact","timezone","ptt","kyc-id","privacy_token","readreceipts","appointment_only","address","expected_ts","privacy","7","android","interactive","device-identity","enabled","attribute_padding","1080","03","screen_height"];const n=["read-self","active","fbns","protocol","reaction","screen_width","heartbeat","deviceid","2:47DEQpj8","uploadfieldstat","voip_settings","retry","priority","longitude","conflict","false","ig_professional","replaced","preaccept","cover_photo","uncompressed","encopt","ppic","04","passive","status-revoke-drop","keygen","540","offer","rate","opus","latitude","w:gp2","ver","4","business_profile","medium","sender","prev_v_id","email","website","invited","sign_credential","05","transport","skey","reason","peer_abtest_bucket","America/Sao_Paulo","appid","refresh","100","06","404","101","104","107","102","109","103","member_add_mode","105","transaction-id","110","106","outgoing","108","111","tokens","followers","ig_handle","self_pid","tue","dec","thu","joinable","peer_pid","mon","features","wed","peer_device_presence","pn","delete","07","fri","audio_duration","admin","connected","delta","rcat","disable","collection","08","480","sat","phash","all","invite","accept","critical_unblock_low","group_update","signed_credential","blinded_credential","eph_setting","net","09","background_location","refresh_id","Asia/Kolkata","privacy_mode_ts","account_sync","voip_payload_type","service_areas","acs_public_key","v_id","0a","fallback_class","relay","actual_actors","metadata","w:biz","5","connected-limit","notice","0b","host_storage","fb_page","subject","privatestats","invis","groupadd","010","note.m4r","uuid","0c","8000","sun","372","1020","stage","1200","720","canonical","fb","011","video_duration","0d","1140","superadmin","012","Opening.m4r","keystore_attestation","dleq_proof","013","timestamp","ab_key","w:sync:app:state","0e","vertical","600","p_v_id","6","likes","014","500","1260","creator","0f","rte","destination","group","group_info","syncd_anti_tampering_fatal_exception_enabled","015","dl_bw","Asia/Jakarta","vp8/h.264","online","1320","fb:multiway","10","timeout","016","nse_retry","urn:xmpp:whatsapp:dirty","017","a_v_id","web_shops_chat_header_button_enabled","nse_call","inactive-upgrade","none","web","groups","2250","mms_hot_content_timespan_in_seconds","contact_blacklist","nse_read","suspended_group_deletion_notification","binary_version","018","https://www.whatsapp.com/otp/copy/","reg_push","shops_hide_catalog_attachment_entrypoint","server_sync",".","ephemeral_messages_allowed_values","019","mms_vcache_aggregation_enabled","iphone","America/Argentina/Buenos_Aires","01a","mms_vcard_autodownload_size_kb","nse_ver","shops_header_dropdown_menu_item","dhash","catalog_status","communities_mvp_new_iqs_serverprop","blocklist","default","11","ephemeral_messages_enabled","01b","original_dimensions","8","mms4_media_retry_notification_encryption_enabled","mms4_server_error_receipt_encryption_enabled","original_image_url","sync","multiway","420","companion_enc_static","shops_profile_drawer_entrypoint","01c","vcard_as_document_size_kb","status_video_max_duration","request_image_url","01d","regular_high","s_t","abt","share_ext_min_preliminary_image_quality","01e","32","syncd_key_rotation_enabled","data_namespace","md_downgrade_read_receipts2","patch","polltype","ephemeral_messages_setting","userrate","15","partial_pjpeg_bw_threshold","played-self","catalog_exists","01f","mute_v2"];t.DICTIONARY_0_TOKEN=n;const r=["reject","dirty","announcement","020","13","9","status_video_max_bitrate","fb:thrift_iq","offline_batch","022","full","ctwa_first_business_reply_logging","h.264","smax_id","group_description_length","https://www.whatsapp.com/otp/code","status_image_max_edge","smb_upsell_business_profile_enabled","021","web_upgrade_to_md_modal","14","023","s_o","smaller_video_thumbs_status_enabled","media_max_autodownload","960","blocking_status","peer_msg","joinable_group_call_client_version","group_call_video_maximization_enabled","return_snapshot","high","America/Mexico_City","entry_point_block_logging_enabled","pop","024","1050","16","1380","one_tap_calling_in_group_chat_size","regular_low","inline_joinable_education_enabled","hq_image_max_edge","locked","America/Bogota","smb_biztools_deeplink_enabled","status_image_quality","1088","025","payments_upi_intent_transaction_limit","voip","w:g2","027","md_pin_chat_enabled","026","multi_scan_pjpeg_download_enabled","shops_product_grid","transaction_id","ctwa_context_enabled","20","fna","hq_image_quality","alt_jpeg_doc_detection_quality","group_call_max_participants","pkey","America/Belem","image_max_kbytes","web_cart_v1_1_order_message_changes_enabled","ctwa_context_enterprise_enabled","urn:xmpp:whatsapp:account","840","Asia/Kuala_Lumpur","max_participants","video_remux_after_repair_enabled","stella_addressbook_restriction_type","660","900","780","context_menu_ios13_enabled","mute-state","ref","payments_request_messages","029","frskmsg","vcard_max_size_kb","sample_buffer_gif_player_enabled","match_last_seen","510","4983","video_max_bitrate","028","w:comms:chat","17","frequently_forwarded_max","groups_privacy_blacklist","Asia/Karachi","02a","web_download_document_thumb_mms_enabled","02b","hist_sync","biz_block_reasons_version","1024","18","web_is_direct_connection_for_plm_transparent","view_once_write","file_max_size","paid_convo_id","online_privacy_setting","video_max_edge","view_once_read","enhanced_storage_management","multi_scan_pjpeg_encoding_enabled","ctwa_context_forward_enabled","video_transcode_downgrade_enable","template_doc_mime_types","hq_image_bw_threshold","30","body","u_aud_limit_sil_restarts_ctrl","other","participating","w:biz:directory","1110","vp8","4018","meta","doc_detection_image_max_edge","image_quality","1170","02c","smb_upsell_chat_banner_enabled","key_expiry_time_second","pid","stella_interop_enabled","19","linked_device_max_count","md_device_sync_enabled","02d","02e","360","enhanced_block_enabled","ephemeral_icon_in_forwarding","paid_convo_status","gif_provider","project_name","server-error","canonical_url_validation_enabled","wallpapers_v2","syncd_clear_chat_delete_chat_enabled","medianotify","02f","shops_required_tos_version","vote","reset_skey_on_id_change","030","image_max_edge","multicast_limit_global","ul_bw","21","25","5000","poll","570","22","031","1280","WhatsApp","032","bloks_shops_enabled","50","upload_host_switching_enabled","web_ctwa_context_compose_enabled","ptt_forwarded_features_enabled","unblocked","partial_pjpeg_enabled","fbid:devices","height","ephemeral_group_query_ts","group_join_permissions","order","033","alt_jpeg_status_quality","migrate","popular-bank","win_uwp_deprecation_killswitch_enabled","web_download_status_thumb_mms_enabled","blocking","url_text","035","web_forwarding_limit_to_groups","1600","val","1000","syncd_msg_date_enabled","bank-ref-id","max_subject","payments_web_enabled","web_upload_document_thumb_mms_enabled","size","request","ephemeral","24","receipt_agg","ptt_remember_play_position","sampling_weight","enc_rekey","mute_always","037","034","23","036","action","click_to_chat_qr_enabled","width","disabled","038","md_blocklist_v2","played_self_enabled","web_buttons_message_enabled","flow_id","clear","450","fbid:thread","bloks_session_state","America/Lima","attachment_picker_refresh","download_host_switching_enabled","1792","u_aud_limit_sil_restarts_test2","custom_urls","device_fanout","optimistic_upload","2000","key_cipher_suite","web_smb_upsell_in_biz_profile_enabled","e","039","siri_post_status_shortcut","pair-device","lg","lc","stream_attribution_url","model","mspjpeg_phash_gen","catalog_send_all","new_multi_vcards_ui","share_biz_vcard_enabled","-","clean","200","md_blocklist_v2_server","03b","03a","web_md_migration_experience","ptt_conversation_waveform","u_aud_limit_sil_restarts_test1"];t.DICTIONARY_1_TOKEN=r;const i=["64","ptt_playback_speed_enabled","web_product_list_message_enabled","paid_convo_ts","27","manufacturer","psp-routing","grp_uii_cleanup","ptt_draft_enabled","03c","business_initiated","web_catalog_products_onoff","web_upload_link_thumb_mms_enabled","03e","mediaretry","35","hfm_string_changes","28","America/Fortaleza","max_keys","md_mhfs_days","streaming_upload_chunk_size","5541","040","03d","2675","03f","...","512","mute","48","041","alt_jpeg_quality","60","042","md_smb_quick_reply","5183","c","1343","40","1230","043","044","mms_cat_v1_forward_hot_override_enabled","user_notice","ptt_waveform_send","047","Asia/Calcutta","250","md_privacy_v2","31","29","128","md_messaging_enabled","046","crypto","690","045","enc_iv","75","failure","ptt_oot_playback","AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk","w","048","2201","web_large_files_ui","Asia/Makassar","812","status_collapse_muted","1334","257","2HP4dm","049","patches","1290","43cY6T","America/Caracas","web_sticker_maker","campaign","ptt_pausable_enabled","33","42","attestation","biz","04b","query_linked","s","125","04a","810","availability","1411","responsiveness_v2_m1","catalog_not_created","34","America/Santiago","1465","enc_p","04d","status_info","04f","key_version","..","04c","04e","md_group_notification","1598","1215","web_cart_enabled","37","630","1920","2394","-1","vcard","38","elapsed","36","828","peer","pricing_category","1245","invalid","stella_ios_enabled","2687","45","1528","39","u_is_redial_audio_1104_ctrl","1025","1455","58","2524","2603","054","bsp_system_message_enabled","web_pip_redesign","051","verify_apps","1974","1272","1322","1755","052","70","050","1063","1135","1361","80","1096","1828","1851","1251","1921","key_config_id","1254","1566","1252","2525","critical_block","1669","max_available","w:auth:backup:token","product","2530","870","1022","participant_uuid","web_cart_on_off","1255","1432","1867","41","1415","1440","240","1204","1608","1690","1846","1483","1687","1749","69","url_number","053","1325","1040","365","59","Asia/Riyadh","1177","test_recommended","057","1612","43","1061","1518","1635","055","1034","1375","750","1430","event_code","1682","503","55","865","78","1309","1365","44","America/Guayaquil","535","LIMITED","1377","1613","1420","1599","1822","05a","1681","password","1111","1214","1376","1478","47","1082","4282","Europe/Istanbul","1307","46","058","1124","256","rate-overlimit","retail","u_a_socket_err_fix_succ_test","1292","1370","1388","520","861","psa","regular","1181","1766","05b","1183","1213","1304","1537"];t.DICTIONARY_2_TOKEN=i;const o=["1724","profile_picture","1071","1314","1605","407","990","1710","746","pricing_model","056","059","061","1119","6027","65","877","1607","05d","917","seen","1516","49","470","973","1037","1350","1394","1480","1796","keys","794","1536","1594","2378","1333","1524","1825","116","309","52","808","827","909","495","1660","361","957","google","1357","1565","1967","996","1775","586","736","1052","1670","bank","177","1416","2194","2222","1454","1839","1275","53","997","1629","6028","smba","1378","1410","05c","1849","727","create","1559","536","1106","1310","1944","670","1297","1316","1762","en","1148","1295","1551","1853","1890","1208","1784","7200","05f","178","1283","1332","381","643","1056","1238","2024","2387","179","981","1547","1705","05e","290","903","1069","1285","2436","062","251","560","582","719","56","1700","2321","325","448","613","777","791","51","488","902","Asia/Almaty","is_hidden","1398","1527","1893","1999","2367","2642","237","busy","065","067","233","590","993","1511","54","723","860","363","487","522","605","995","1321","1691","1865","2447","2462","NON_TRANSACTIONAL","433","871","432","1004","1207","2032","2050","2379","2446","279","636","703","904","248","370","691","700","1068","1655","2334","060","063","364","533","534","567","1191","1210","1473","1827","069","701","2531","514","prev_dhash","064","496","790","1046","1139","1505","1521","1108","207","544","637","final","1173","1293","1694","1939","1951","1993","2353","2515","504","601","857","modify","spam_request","p_121_aa_1101_test4","866","1427","1502","1638","1744","2153","068","382","725","1704","1864","1990","2003","Asia/Dubai","508","531","1387","1474","1632","2307","2386","819","2014","066","387","1468","1706","2186","2261","471","728","1147","1372","1961"];t.DICTIONARY_3_TOKEN=o;const a=[n,r,i,o];t.DICTIONARIES=a},85997:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QplSampleMethod=void 0;const r=n(54302)({EVENT_BASED_SAMPLING:1,USER_BASED_SAMPLING:3});t.QplSampleMethod=r},81834:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markerEnded=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=`${e}|${t}`;n.delete(i),r.delete(i)},t.validateAnnotations=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const o=`${e}|${t}`,a=n.get(o)||0;let s=0;function l(n,r){return s+=r,!(s+a>1e3)||(null==i||i.annotationSizeLimitExceeded(e,t,n),!1)}function u(n){for(let r=0;r<n.length;r++)return!(n[r].length>50)||(null==i||i.annotationKeyTooLong(e,t,n[r]),!1)}if(null==r?void 0:r.bool){const e=Object.keys(r.bool);if(!l("bool",e.length)||!u(e))return!1}if(null==r?void 0:r.int){const e=Object.keys(r.int);if(!l("int",e.length)||!u(e))return!1}if(null==r?void 0:r.double){const e=Object.keys(r.double);if(!l("double",e.length)||!u(e))return!1}if(null==r?void 0:r.bool_array){const e=r.bool_array,t=Object.keys(e);for(let n=0;n<t.length;n++){const r=e[t[n]];if(r&&!l(t[n],r.length))return!1}if(!u(t))return!1}if(null==r?void 0:r.int_array){const e=r.int_array,t=Object.keys(e);for(let n=0;n<t.length;n++){const r=e[t[n]];if(r&&!l(t[n],r.length))return!1}if(!u(t))return!1}if(null==r?void 0:r.double_array){const e=r.double_array,t=Object.keys(e);for(let n=0;n<t.length&&r.double_array;n++){const r=e[t[n]];if(r&&!l(t[n],r.length))return!1}if(!u(t))return!1}if(null==r?void 0:r.string){const e=r.string,t=Object.keys(e);for(let n=0;n<t.length&&r.string;n++){const r=e[t[n]];if(null!=r&&!l(t[n],r.length))return!1}if(!u(t))return!1}if(null==r?void 0:r.string_array){const e=r.string_array,t=Object.keys(e);for(let n=0;n<t.length&&r.string_array;n++){const r=e[t[n]];if(r)for(let e=0;e<r.length;e++)if(!l(t[n],r[e].length))return!1}if(!u(t))return!1}return n.set(o,a+s),!0},t.validatePoints=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n.length>50)return null==i||i.pointNameTooLong(e,t,n),!1;const o=`${e}|${t}`,a=r.get(o)||0;if(a+1>1e3)return null==i||i.maxPointCountExceeded(e,t),!1;return r.set(o,a+1),!0};const n=new Map,r=new Map},86606:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inplaceTruncateEventPrecision=function(e,t){const n=1e6*t;e.duration_ns=Math.round(e.duration_ns/n)*n,e.points&&e.points.map((e=>{e.timeSinceStart=Math.round(e.timeSinceStart/t)*t}))}},44369:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickLogMarkerType=t.QuickLogActionType=t.QplServerStatusCodeError=t.QplInstanceKeyOptions=t.QPLDataEventLevel=void 0;const r=n(54302)({SUCCESS:2,FAIL:3,CANCEL:4,ABORTED:105});t.QuickLogActionType=r;const i=n(54302)({REGULAR:1,USER_FLOW:2});t.QuickLogMarkerType=i;const o=n(54302).Mirrored(["AUTO_INCREMENT","MANUAL_INCREMENT","REUSE_INSTANCE"]);t.QplInstanceKeyOptions=o;const a=n(54302)({FATAL:1,ERROR:3,CRITICAL:4,WARN:5,INFO:7,DEBUG:9});t.QPLDataEventLevel=a;class s extends Error{constructor(e,t){super(t),this.name="QplServerStatusCodeError",this.name="QplServerStatusCodeError",this.status=e,this.statusCode=e}}t.QplServerStatusCodeError=s},17906:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.QPL=void 0;var i=r(n(11504)),o=n(85997),a=r(n(49725)),s=n(81834),l=n(86606),u=n(44369);let c;class d{static setAllowListDevVerboseLogging(e){d.allowListDevVerboseLogging=e}static setStartupAllowListEventFilter(e){d._startupAllowListEventFilter=e}static setQplReducePrecisionMapMs(e){d._qplReducePrecisionMapMs=e}static resetQplSettings(){d._qplSettings=d._SETTINGS_ON_STARTUP}static setIsDev(e){d.isDev=e}static setEnumConversion(e){d._enumConversion=e}static setStorageApi(e){d._storageApi=e}static setHealthLogger(e){d._healthLogger=e}static init(e,t,n){d._qplSettings={sendEvent:e,isQplEnabled:n,getEventDetails:t}}static getInstance(){return c||(c=new a.default(d._qplSettingsDecorator)),c}static setInstance(e){c=e}static clearInstance(){c=null,Object.assign(d._qplSettings,d._SETTINGS_ON_STARTUP),d.markerInstanceHelper.clear()}static getNextMarkerInstanceValue(e){d.markerInstanceHelper.get(e)||d.markerInstanceHelper.set(e,d._instanceKeyGenerator());const t=d.markerInstanceHelper.get(e),n=void 0!==t?t.next().value:0;return void 0!==n?n:0}static*_instanceKeyGenerator(){let e=0;for(;;)yield e++}static throwKillswitch(e){d._qplSettings.isQplEnabled=()=>!e,d.isDev}static clearStorage(){d._storageApi.clear()}static logActiveQplMarkers(){const e=d.getInstance().getActiveMarkerIDs({type:u.QuickLogMarkerType.REGULAR});e.length&&e.forEach((e=>{var t,n;const r=null===(t=(n=d._enumConversion).getName)||void 0===t?void 0:t.call(n,e);__LOG__(3)`QPL [${r}] There are ${d._numberOfMarkersOpen(e)} active markers remaining. You need to call markerEnd`}))}static markerStart(e,t){var n,r,i,o;d.isDev&&d.allowListDevVerboseLogging.includes(e)&&(null===(n=(r=d._enumConversion).getName)||void 0===n||n.call(r,e),d._qplSettings.isQplEnabled()||__LOG__(3)`QPL [${null===(i=(o=d._enumConversion).getName)||void 0===i?void 0:i.call(o,e)}] markerStart called but killSwitch is ON, this call will be ignored, no marker will be instantiated`);let a;if(a=(null==t?void 0:t.instanceKeyOption)===u.QplInstanceKeyOptions.AUTO_INCREMENT?d.getNextMarkerInstanceValue(e):void 0!==(null==t?void 0:t.instanceKey)?t.instanceKey:0,null==t?void 0:t.closePreviousInstanceWithAction){const n=[u.QplInstanceKeyOptions.AUTO_INCREMENT,u.QplInstanceKeyOptions.MANUAL_INCREMENT].includes(t.instanceKeyOption)?a-1:a;if(d._markerInstanceExists(e,n)){const r=t.closePreviousInstanceWithAction||u.QuickLogActionType.ABORTED;var l,c;if(d.isDev&&d.allowListDevVerboseLogging.includes(e))null===(l=(c=d._enumConversion).getName)||void 0===l||l.call(c,e);d.markerEnd(e,r,{instanceKey:n})}}if(d._markerExists(e)){const t=d._numberOfMarkersOpen(e);var p,f,_,g,h,A;if(t<d._SOFT_MAX_CONCURRENT_OPEN_MARKERS){if(d.isDev&&d.allowListDevVerboseLogging.includes(e))__LOG__(3,void 0,void 0,void 0,["qpl"])`QPL [${null===(p=(f=d._enumConversion).getName)||void 0===p?void 0:p.call(f,e)}] is already opened ${t} time(s), attempting ${t+1}, not a problem if intended`}else __LOG__(3,void 0,void 0,!0,["qpl"])`QPL [${null===(_=(g=d._enumConversion).getName)||void 0===_?void 0:_.call(g,e)}] already has ${t} open markers`,SEND_LOGS(`QPL [${(null===(h=(A=d._enumConversion).getName)||void 0===h?void 0:h.call(A,e))||"unknown"}] has ${d._SOFT_MAX_CONCURRENT_OPEN_MARKERS} or more open markers`,1,"qpl")}if(d.getInstance().markerStart(e,a,null==t?void 0:t.timestamp),(null==t?void 0:t.annotations)&&(0,s.validateAnnotations)(e,a,t.annotations,d._healthLogger)){const n=t.annotations;d.getInstance().markerAnnotate(e,n,{instanceKey:a})}return{instanceKey:a,annotate:t=>{d.markerAnnotate(e,t,{instanceKey:a})},addPoint:(t,n)=>{d.markerPoint(e,t,{data:null==n?void 0:n.data,instanceKey:a,timestamp:null==n?void 0:n.timestamp})},end:(t,n)=>{d.markerEnd(e,t,{instanceKey:a,timestamp:null==n?void 0:n.timestamp})},drop:()=>{d.markerDrop(e,{instanceKey:a})}}}static markerAnnotate(e,t,n){var r,i;d.isDev&&d.allowListDevVerboseLogging.includes(e)&&(null===(r=(i=d._enumConversion).getName)||void 0===r||r.call(i,e),d._warnIfMarkerDoesntExist(e,n?n.instanceKey:0,"markerAnnotate"));(0,s.validateAnnotations)(e,null==n?void 0:n.instanceKey,t,d._healthLogger)&&d.getInstance().markerAnnotate(e,t,{instanceKey:null==n?void 0:n.instanceKey})}static markerPoint(e,t,n){var r,i;d.isDev&&d.allowListDevVerboseLogging.includes(e)&&(null===(r=(i=d._enumConversion).getName)||void 0===r||r.call(i,e),n&&JSON.stringify(n),d._warnIfMarkerDoesntExist(e,n?n.instanceKey:0,"markerPoint"));(null==n?void 0:n.data)&&(0,s.validateAnnotations)(e,n.instanceKey,n.data,d._healthLogger),(0,s.validatePoints)(e,(null==n?void 0:n.instanceKey)||0,t,d._healthLogger)&&d.getInstance().markerPoint(e,t,n)}static markerEnd(e,t,n){this.genMarkerEnd(e,t,n)}static genMarkerEnd(e,t,n){return(0,i.default)((function*(){var r,i;d.isDev&&d.allowListDevVerboseLogging.includes(e)&&(null===(r=(i=d._enumConversion).getName)||void 0===r||r.call(i,e),u.QuickLogActionType.getName(t),d._warnIfMarkerDoesntExist(e,null==n?void 0:n.instanceKey,"markerEnd"));yield d.getInstance().genMarkerEnd(e,t,null==n?void 0:n.instanceKey,null==n?void 0:n.timestamp),(0,s.markerEnded)(e,null==n?void 0:n.instanceKey)}))()}static markerDrop(e,t){var n,r;d.isDev&&d.allowListDevVerboseLogging.includes(e)&&(null===(n=(r=d._enumConversion).getName)||void 0===n||n.call(r,e),d._warnIfMarkerDoesntExist(e,null==t?void 0:t.instanceKey,"markerDrop"));d.getInstance().markerDrop(e,null==t?void 0:t.instanceKey),(0,s.markerEnded)(e,null==t?void 0:t.instanceKey)}static getActiveMarkerIDs(e){return d.getInstance().getActiveMarkerIDs({type:e.type})}static getMarker(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d.getInstance().getMarker(e,t)}static getMarkerInstances(e){return d.getInstance().getMarkerInstances(e)}static _markerExists(e){const t=d.getMarkerInstances(e);return!!t&&0!==t.size}static _markerInstanceExists(e,t){const n=d.getMarkerInstances(e);return!!n&&void 0!==n.get(t)}static _numberOfMarkersOpen(e){const t=d.getMarkerInstances(e);return t?t.size:0}static _warnIfMarkerDoesntExist(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;var r,i;d._markerInstanceExists(e,t)||__LOG__(3)`QPL [${null===(r=(i=d._enumConversion).getName)||void 0===r?void 0:r.call(i,e)}] calling ${n} without a corresponding open marker for instance: ${t}`}}t.QPL=d,d._defaultSettings={sendEvent:e=>{if(d.isDev){var t,n;const r=null===(t=(n=d._enumConversion).cast)||void 0===t?void 0:t.call(n,e.marker_id);null!=r&&d.allowListDevVerboseLogging.includes(r)}return d._storageApi.add([e]),Promise.resolve()},getEventDetails:e=>({sampleRate:d._startupAllowListEventFilter.includes(e)?1:0,samplingMethod:o.QplSampleMethod.EVENT_BASED_SAMPLING}),isQplEnabled:()=>!0},d._SETTINGS_ON_STARTUP={sendEvent:e=>{if(d.isDev){var t,n;const r=null===(t=(n=d._enumConversion).cast)||void 0===t?void 0:t.call(n,e.marker_id);null!=r&&d.allowListDevVerboseLogging.includes(r)}return d._storageApi.add([e]),Promise.resolve()},getEventDetails:e=>({sampleRate:d._startupAllowListEventFilter.includes(e)?1:0,samplingMethod:o.QplSampleMethod.EVENT_BASED_SAMPLING}),isQplEnabled:()=>!1},d._qplSettingsDecorator={performanceNow:()=>performance.now(),moduleLoadTimestamp:performance.now(),logger:{debug:()=>{},warn:()=>{}},sendEvent:(e,t)=>{const n=d._qplReducePrecisionMapMs.get(e.marker_id);return null!=n&&0!==n&&(0,l.inplaceTruncateEventPrecision)(e,n),d._qplSettings.sendEvent(e,t)},quickLogConfigHelper:{getEventDetails:e=>d._qplSettings.getEventDetails(e),isKillswitchOn:()=>!d._qplSettings.isQplEnabled()}},d.markerInstanceHelper=new Map,d._SOFT_MAX_CONCURRENT_OPEN_MARKERS=100,d._startupAllowListEventFilter=[],d.allowListDevVerboseLogging=[],d.isDev=!1,d._qplReducePrecisionMapMs=new Map,d.resetQplSettings()},49725:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(73982)),o=r(n(51517));const a=Object.freeze({TRUST_CLIENT_REPORTED_SAMPLE_RATE:1}),s=Object.freeze({API_CALL:27787270,CRASH_RESILIENCE:27787276,LOCKLESS_IS_MARKER_ON_ACCURACY:27787269,LOCKLESS_MARKER_START:27787266,LOCKLESS_QUEUE_SIZE:27787265,LOCKLESS_STARTED_MARKERS_MAP_COLLISIONS:27787273,LOSS_TRACKING_MARKER_RECEIVED:27787272,LOSS_TRACKING_MARKER_STARTED:27787271,QPL_CONFIG_LOAD:27799150,QPL_CONFIG_SAVE:27791744,QPL_HEARTBEAT_HARDCODED_CONFIG:27792138,QPL_HEARTBEAT_SEVER_CONFIG:27803336,USAGE:27791726,ZERO_SAMPLE_RATE_DUE_MISSING_CONFIG:27787268,ZERO_SAMPLE_RATE_DUE_MISSING_EVENT_IN_CONFIG:27787267}),l=Object.freeze({REGULAR:1,USER_FLOW:2});function u(e,t){const n=t-e;if(0===n)return"0";const[r,i]=n.toFixed(6).split(".",2);return"0"===r?i.replace(/^0+/,""):r+i}function c(e,t,n,r){const o=t[e];if(!o||0===Object.entries(o).length)return null;const a={};return Object.keys(o).forEach((e=>{const t=o[e];null==t||0===t.length?delete o[e]:a[e]=r?r(t):t})),{[e]:(0,i.default)((0,i.default)({},null==n?void 0:n[e]),a)}}function d(e,t){if(null==e)return t;const n=(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},t),c("string",e,t)),c("int",e,t,Math.trunc)),c("double",e,t)),c("bool",e,t)),c("string_array",e,t)),c("int_array",e,t,(e=>e.map(Math.trunc)))),c("double_array",e,t)),c("bool_array",e,t));return Object.keys(n).forEach((e=>{const t=n[e];null!=t&&0!==Object.entries(t).length||delete n[e]})),0!==Object.entries(n).length?n:null}function p(e,t){if(!t)return e;const n={};return t.string&&(n.annotations=t.string),t.int&&(n.annotations_int=t.int),t.double&&(n.annotations_double=t.double),t.bool&&(n.annotations_bool=t.bool),t.string_array&&(n.annotations_string_array=t.string_array),t.int_array&&(n.annotations_int_array=t.int_array),t.double_array&&(n.annotations_double_array=t.double_array),t.bool_array&&(n.annotations_bool_array=t.bool_array),(0,i.default)((0,i.default)({},e),n)}const f=new Map([[1,"random_sampling"],[3,"per_user"]]);function _(e,t){return 0!==e&&(e<=1||("string"==typeof t?0==(n=t,((0,o.default)(n)>>>0)%e):Math.random()*e<=1));var n}t.default=class{constructor(e){let t;this._nextListenerId=1,this._defaultSampleRate=100,this._listeners=new Map,this._listenersWithMarker=new Map,this._debuggingId=null,this._markerSampleRate={},this.activeMarkers=new Map,this._settings=e,this._logger=e.logger,this._listenersWithMarker=null!==(t=e.listenersWithMarker)&&void 0!==t?t:new Map}getMarker(e,t){const n=this._getMarkerInstances(e);if(!n)return null;const r=n.get(t);return r||null}getMarkerInstances(e){return this._getMarkerInstances(e)}_getMarkerInstances(e){let t;return(null===(t=this._settings.quickLogConfigHelper)||void 0===t?void 0:t.isKillswitchOn())?null:this.activeMarkers.get(e)}addMarker(e,t,n){let r=this.activeMarkers.get(e);r||(r=new Map,this.activeMarkers.set(e,r)),r.set(t,n)}deleteMarker(e,t){let n;null===(n=this.activeMarkers.get(e))||void 0===n||n.delete(t)}markerStart(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentTimestamp(),{cancelOnUnload:i=!1,trackedForLoss:o=!1,type:a=l.REGULAR,samplingBasis:u=null}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null===(t=this._settings.quickLogConfigHelper)||void 0===t?void 0:t.isKillswitchOn())return;this.getMarker(e,n)&&this._logger.warn(`Duplicate QPL markerId: ${e} & instanceKey: ${n}`);const[c,d,p]=this._getSamplingPolicy(e,u),f={passesSampling:c,timestamp:r,sampleRate:d,samplingMethod:p,points:[],cancelOnUnload:i,trackedForLoss:o,type:a};this._listeners.forEach((t=>{t.onMarkerStart(e,n,r)})),this._listenersWithMarker.forEach((t=>{t.onMarkerStartWithMarker(e,n,r,f)})),c&&this.addMarker(e,n,f),c&&!0===o&&this._uploadEvent({marker_id:s.LOSS_TRACKING_MARKER_STARTED,action_id:0,sample_rate:1,annotations_int:{tracked_marker_id:e},marker_type:l.REGULAR})}markerAnnotate(e,t){let{instanceKey:n=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._listeners.forEach((r=>{Object.keys(t).forEach((i=>{const o=t[i];o&&Object.keys(o).forEach((t=>{r.onAnnotation(e,n,t,o[t])}))}))}));const r=this.getMarker(e,n);r&&(r.annotations=d(t,r.annotations))}markerPoint(e,t){let{instanceKey:n=0,data:r,timestamp:i=this.currentTimestamp()}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._listeners.forEach((o=>{let a;return o.onMarkerPoint(e,n,t,null==r||null===(a=r.string)||void 0===a?void 0:a.__key,i)}));const o=this.getMarker(e,n);if(!o)return;const a={name:t,timeSinceStart:Math.trunc(i-o.timestamp)},s=d(r);s&&(a.data=s),o.points.push(a)}markerEnd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.currentTimestamp();this.genMarkerEnd(e,t,n,r)}genMarkerEnd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.currentTimestamp();this._listeners.forEach((i=>i.onMarkerEnd(t,e,n,r)));const o=this.getMarker(e,n);if(!o)return Promise.resolve();let s=Promise.resolve();if(o.passesSampling){if(!0!==o.timestampIsApproximate){const c=o.type===l.USER_FLOW?o.points:function(e){return Array.from(new Set(e.map((e=>e.name)))).map((t=>e.find((e=>e.name===t)))).filter(Boolean)}(o.points),d=function(e,t){return!0===t?(0,i.default)((0,i.default)({},e),{},{tracked_for_loss:!0}):e}(p({marker_id:e,action_id:t,instance_id:n,sample_rate:o.sampleRate,method:f.get(o.samplingMethod),duration_ns:u(o.timestamp,r),points:c,metadata:{application_analytics:{time_since_qpl_module_init:r-this._settings.moduleLoadTimestamp}},marker_type:o.type,flags:a.TRUST_CLIENT_REPORTED_SAMPLE_RATE},o.annotations),o.trackedForLoss);s=this._uploadEvent(d)}this._debuggingId===e&&this._settings.onDebuggingIdEnded&&this._settings.onDebuggingIdEnded()}return this.deleteMarker(e,n),s}markerDrop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.deleteMarker(e,t);const n=this.currentTimestamp();this._listeners.forEach((r=>{r.onMarkerDrop&&r.onMarkerDrop(e,t,n)}))}markEvent(e,t,n){let r,{timestamp:i=this.currentTimestamp(),annotations:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null===(r=this._settings.quickLogConfigHelper)||void 0===r?void 0:r.isKillswitchOn())return;const[s,u,c]=this._getSamplingPolicy(e);if(!s)return;const _=d("function"==typeof o?o():o),g={marker_id:e,action_id:0,instance_id:0,sample_rate:u,method:f.get(c),da_type:t,da_level:n,metadata:{application_analytics:{time_since_qpl_module_init:i-this._settings.moduleLoadTimestamp}},marker_type:l.REGULAR,flags:a.TRUST_CLIENT_REPORTED_SAMPLE_RATE};this._uploadEvent(p(g,_))}dropAllMarkers(){this.activeMarkers.clear()}setAlwaysOnSampleRate(e,t){this._markerSampleRate[e]=t}currentTimestamp(){return this._settings.performanceNow()}enableDebug(e){this._debuggingId=parseInt(e,10)}disableDebug(){this._debuggingId=null}addListener(e){const t=this._nextListenerId++;return this._listeners.set(t,e),{dispose:()=>{this._listeners.delete(t)}}}_getSamplingPolicy(e,t){let n,r,i,o,a;if(this._settings.unsampleAllEvents&&this._settings.unsampleAllEvents()||this._debuggingId===e)return[!0,1,1];const s=null!==(n=null===(r=this._settings.quickLogConfigHelper)||void 0===r?void 0:r.getEventDetails(e))&&void 0!==n?n:{sampleRate:0,samplingMethod:1};if(null==this._markerSampleRate[e]&&0!==s.sampleRate&&3===s.samplingMethod){let e;return[!0,null!==(e=s.sampleRate)&&void 0!==e?e:1,3]}const l=null!==(i=null!==(o=this._markerSampleRate[e])&&void 0!==o?o:s.sampleRate)&&void 0!==i?i:this._defaultSampleRate,u=null!==(a=s.samplingMethod)&&void 0!==a?a:1;return[_(l,t),l,u]}_uploadEvent(e){const t=this._settings.decorateEventBeforeUpload?this._settings.decorateEventBeforeUpload(e):e;return this._settings.sendEvent(e,t)}getActiveMarkerIDs(e){let{type:t}=e;const n=new Set;return this.activeMarkers.forEach(((e,r)=>{e.forEach((e=>{e.type===t&&n.add(r)}))})),Array.from(n)}forEachMarkerInstance(e,t){const n=this._getMarkerInstances(e);if(n)for(const e of n.keys())t(e)}}},51517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=-1;for(let r=0,i=e.length;r<i;r++)t=t>>>8^n[255&(t^e.charCodeAt(r))];return~t};let n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];Int32Array&&(n=new Int32Array(n))},63274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Offline=t.MaxRetries=t.Disconnected=t.BufferTooLargeError=void 0;var r=n(66911);const i=(0,r.customError)("BufferTooLarge",!1);t.BufferTooLargeError=i;const o=(0,r.customError)("Disconnected",!1);t.Disconnected=o;const a=(0,r.customError)("Offline",!1,o);t.Offline=a;const s=(0,r.customError)("MaxRetries",!1);t.MaxRetries=s},42298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onWebSocketCloseEvent=function(e,t){(0,i.startMetric)(r.PRE_METRIC.WA_DISCONNECT).endSuccess({string:{key:`code${t.code}`}});const n=null!=e?`WebSocket ${e} closed. code: ${t.code}`:`WebSocket closed connection during initialization. Code: ${t.code}`;switch(t.code){case 1e3:case 1001:case 1006:__LOG__(2)`[Connectivity]: ${n}`;break;case 1002:case 1003:case 1007:case 1008:case 1009:case 1010:case 1011:case 1015:__LOG__(4,void 0,new Error)`[Connectivity]: ${n}`;break;default:__LOG__(4,void 0,new Error)`[Connectivity]: ${n}. Reason: ${t.reason}, clean: ${t.wasClean}`}};var r=n(89623),i=n(90649)},49542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketClosed=t.FrameSocket=void 0;var r=n(89323),i=n(63274);class o extends Error{constructor(e){const t="SocketClosed";super(null!=e?e:t),this.name=t}}t.SocketClosed=o;function a(e){if(e.size()<3)return!1;return s(e)<=e.size()}function s(e){return e.readUint8()<<16|e.readUint16()}t.FrameSocket=class{constructor(e,t){this._incoming=new r.Binary,this.closed=!1,this._draining=!1,this.onFrame=null,this.onClose=null,this._handleData=e=>{this._incoming.writeByteArray(e),this.convertBufferedToFrames()},this._handleClose=()=>{if(this._incoming.peek(a))return __LOG__(2)`FrameSocket closed, waiting for pending processing`,void(this._draining=!0);this._doClose()},this._handleError=()=>{},this._introToSend=t,this._socket=e,e.onData=this._handleData,e.onClose=this._handleClose,e.onError=this._handleError}sendFrame(e){if(this._draining)return;this.throwIfClosed();const t=this._introToSend,n=e.byteLength,r=this._socket.dataToSend;t?(this._introToSend=null,r.ensureAdditionalCapacity(t.length+3+n),r.writeByteArray(t)):r.ensureAdditionalCapacity(3+n),this._assertMaxPayloadSize(n),r.writeUint8(n>>16),r.writeUint16(65535&n),r.write(e),this._socket.requestSend()}_doClose(){if(this.closed)return;__LOG__(2)`FrameSocket closed`,this._draining=!1,this.closed=!0;const e=this.onClose;e&&e()}_assertMaxPayloadSize(e){if(e>=1<<24)throw __LOG__(3)`Buffer to send: ${e}`,new i.BufferTooLargeError(`Buffer too large: ${e}`)}convertBufferedToFrames(){const e=this._incoming;let t=this.onFrame;for(;t&&e.peek(a);){const n=s(e);t(e.readByteArray(n)),t=this.onFrame}this._draining&&!e.peek(a)&&this._doClose(),t&&e.size()&&__LOG__(2)`FrameSocket: queueing partial frame of ${e.size()} bytes`}throwIfClosed(){if(this.closed)throw new o}close(){this._socket.close()}}},84402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoiseHandshake=void 0;var r=n(89323),i=n(47784),o=n(70238),a=n(15720),s=n(63274),l=n(4689),u=n(31630);const c=Promise.reject("UNINITIALIZED HANDSHAKE"),d=new Uint8Array(0);c.catch((()=>{}));function p(e){const t=new ArrayBuffer(12);return new DataView(t).setUint32(8,e),new Uint8Array(t)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["encrypt","decrypt"];return(0,i.getCrypto)().subtle.importKey("raw",new Uint8Array(e),"AES-GCM",!1,t)}function _(e,t){return(0,o.extractWithSaltAndExpand)(t,new Uint8Array(e),"",64).then((e=>[e.slice(0,32),e.slice(32)]))}function g(e){e.catch((()=>{}))}t.NoiseHandshake=class{constructor(e){this._hash=c,this._salt=c,this._cryptoKey=c,this._counter=0,this._socket=e,this._rejectOnClose=new u.Resolvable,e.onClose=()=>{this._rejectOnClose.reject(new s.Disconnected("NoiseHandshake: SocketClosed"))},g(this._rejectOnClose.promise)}start(e,t){const n=r.Binary.build(e).readBuffer(),i=32===n.byteLength?Promise.resolve(n):(0,a.sha256)(n);this._hash=i,this._salt=i,this._cryptoKey=i.then(f),this.authenticate(t)}sendAndReceive(e){const t=this._socket,n=new Promise((n=>{t.onFrame=e=>{t.onFrame=null,n(e)},t.sendFrame(e)}));return this._orRejectOnClose(n)}send(e){this._socket.sendFrame(e)}authenticate(e){this._hash=Promise.all([this._hash,e]).then((e=>{let[t,n]=e;const i=r.Binary.build(t,n).readByteArray();return(0,a.sha256)(i)}))}encrypt(e){const t=this._counter++,n=Promise.all([this._cryptoKey,this._hash,e]).then((e=>{let[n,r,o]=e;return function(e,t,n,r){return(0,i.getCrypto)().subtle.encrypt({name:"AES-GCM",iv:p(t),additionalData:n?new Uint8Array(n):d},e,r)}(n,t,r,o)}));return this.authenticate(n),this._orRejectOnClose(n)}decrypt(e){const t=this._counter++,n=Promise.all([this._cryptoKey,this._hash]).then((n=>{let[r,o]=n;return function(e,t,n,r){return(0,i.getCrypto)().subtle.decrypt({name:"AES-GCM",iv:p(t),additionalData:n?new Uint8Array(n):d},e,r)}(r,t,o,e)}));return this.authenticate(e),this._orRejectOnClose(n)}finish(){const e=this._salt.then((e=>_(e,new Uint8Array(0)))).then((e=>{let[t,n]=e;return Promise.all([f(t,["encrypt"]),f(n,["decrypt"])])})).then((e=>{let[t,n]=e;return new l.NoiseSocket(this._socket,t,n)}));return this._orRejectOnClose(e)}mixIntoKey(e){this._counter=0;const t=Promise.all([this._salt,e]).then((e=>{let[t,n]=e;return _(t,new Uint8Array(n))}));this._salt=t.then((e=>e[0])),this._cryptoKey=t.then((e=>f(e[1]))),g(this._salt),g(this._cryptoKey)}_orRejectOnClose(e){return Promise.race([e,this._rejectOnClose.promise]).then((e=>this._rejectOnClose.resolveWasCalled()?this._rejectOnClose.promise:e))}}},4689:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.NoiseSocket=void 0;var i=r(n(11504)),o=n(47784),a=n(39528);const s=Promise.reject("UNINITIALIZED HANDSHAKE"),l=new Uint8Array(0);s.catch((()=>{}));function u(e){const t=new ArrayBuffer(12);return new DataView(t).setUint32(8,e),new Uint8Array(t)}t.NoiseSocket=class{constructor(e,t,n){this._incoming=[],this._readQueue=new a.PromiseQueue,this._sendQueue=new a.PromiseQueue,this._readCounter=0,this._writeCounter=0,this._draining=!1,this._sendCiphertextFrame=e=>{this._socket.closed?__LOG__(2)`NoiseSocket socket closed while encrypting frame`:this._socket.sendFrame(e)},this._handleCiphertext=e=>{const t=this._readCounter++;this._readQueue.enqueueHandlers(function(e,t,n,r){return(0,o.getCrypto)().subtle.decrypt({name:"AES-GCM",iv:u(t),additionalData:n?new Uint8Array(n):l},e,r)}(this._readKey,t,void 0,e),this._handlePlaintext)},this._handleOnClose=()=>{this._draining=!0,this._readQueue.wait().then((()=>{this._draining=!1;const e=this._onClose;e&&e()}))},this._handlePlaintext=e=>{this._onFrame?this._onFrame(e):this._incoming.push(e)},this._socket=e,this._writeKey=t,this._readKey=n,e.onFrame=this._handleCiphertext,this._socket.onClose=this._handleOnClose,e.convertBufferedToFrames()}sendFrameAsync(e){var t=this;return(0,i.default)((function*(){return yield t.sendFrame(e)}))()}sendFrame(e){if(this._draining)return Promise.resolve();this._socket.throwIfClosed();const t=this._writeCounter++;return this._sendQueue.enqueueHandlers((n=this._writeKey,r=t,i=void 0,a=e,(0,o.getCrypto)().subtle.encrypt({name:"AES-GCM",iv:u(r),additionalData:i?new Uint8Array(i):l},n,a)),this._sendCiphertextFrame);var n,r,i,a}setOnFrame(e){this._onFrame=e}setOnClose(e){this._onClose=e}close(){this._socket.close()}}},31859:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.doFullHandshake=_,t.openChatSocket=function(e,t,n){return e.openSocket(n).then((0,c.onResult)(function(){var n=(0,i.default)((function*(n){let r;Promise.resolve().then(t);const i=e.edgeInfo;if(i){const e=new o.Binary;e.write("ED",0,1),e.writeUint8(i.byteLength>>16),e.writeUint16(65535&i.byteLength),e.writeBuffer(i),r=e.readByteArray(),__LOG__(2)`openChatSocket preIntro ${r}`}const c=r?o.Binary.build(r,e.protoHeader).readByteArray():e.protoHeader,g=new l.FrameSocket(n,c),h=yield e.getClientPayload(),A=new a.Curve25519(e.curveSignalDependencies),m=e.serverStaticKeyIfKnown();var E,y,S,v;return m?(__LOG__(2)`openChatSocket performing resume handshake`,null===(E=e.preLogging)||void 0===E||null===(y=E.onBeforeResumeHandshakeStarted)||void 0===y||y.call(E),function(e,t,n,r,i){const o=new u.NoiseHandshake(e);o.start(d,i.protoHeader);const a=r.generatePublicKey();o.authenticate(n),o.authenticate(a),o.mixIntoKey(r.generateSharedSecret(n));const l=o.encrypt(i.staticKeyPair.generatePublicKey());o.mixIntoKey(i.staticKeyPair.generateSharedSecret(n));const c=o.encrypt(Promise.resolve(t));return Promise.all([a,c,l]).then((e=>{let[t,n,r]=e;return __LOG__(2)`resumeNoiseHandshake send hello`,o.sendAndReceive(i.encodeHandshakeHello({ephemeral:t,payload:n,static:r}))})).then((n=>{__LOG__(2)`resumeNoiseHandshake rcv hello`;const a=i.decodeServerHello(n),{ephemeral:l,static:c,payload:d}=a||{};if(null==c){if(__LOG__(2)`resumeNoiseHandshake continuing resume handshake`,!l)throw(0,s.default)("serverHello missing serverEphemeral");if(!d)throw(0,s.default)("serverHello missing certificateCiphertext");return o.authenticate(l),o.mixIntoKey(r.generateSharedSecret(l)),o.mixIntoKey(i.staticKeyPair.generateSharedSecret(l)),o.decrypt(d).then((()=>(__LOG__(2)`resumeNoiseHandshake deriving secrets`,o.finish())))}return __LOG__(2)`resumeNoiseHandshake performing fallback handshake`,function(e,t,n,r,i){const o=new u.NoiseHandshake(e);o.start(p,i.protoHeader);const a=r.generatePublicKey();return o.authenticate(a),__LOG__(2)`doFallbackHandshake continuing handshake with given server hello`,f(o,t,n,r,i)}(e,a,t,r,i)}))}(g,h,m,A,e).then((t=>{var n,r;return null===(n=e.preLogging)||void 0===n||null===(r=n.onAfterResumeHandshakeCompleted)||void 0===r||r.call(n),t})).catch((t=>{var n,r;return null===(n=e.preLogging)||void 0===n||null===(r=n.onHandshakeError)||void 0===r||r.call(n),Promise.reject(t)}))):(__LOG__(2)`openChatSocket performing full handshake`,null===(S=e.preLogging)||void 0===S||null===(v=S.onBeforeFullHandshakeStarted)||void 0===v||v.call(S),_(g,h,A,e).then((t=>{var n,r;return null===(n=e.preLogging)||void 0===n||null===(r=n.onAfterFullHandshakeCompleted)||void 0===r||r.call(n),t})).catch((t=>{var n,r;return null===(n=e.preLogging)||void 0===n||null===(r=n.onHandshakeError)||void 0===r||r.call(n),Promise.reject(t)})))}));return function(){return n.apply(this,arguments)}}()))};var i=r(n(11504)),o=n(89323),a=n(18445),s=r(n(82065)),l=n(49542),u=n(84402),c=n(22207);const d="Noise_IK_25519_AESGCM_SHA256\0\0\0\0",p="Noise_XXfallback_25519_AESGCM_SHA256";function f(e,t,n,r,i){const{ephemeral:o,static:a,payload:l}=t||{};if(null==o||null==a||null==l)return Promise.reject((0,s.default)("doFullHandshakeCore server hello invalid proto"));e.authenticate(o),e.mixIntoKey(r.generateSharedSecret(o));const u=e.decrypt(a);e.mixIntoKey(u.then((e=>r.generateSharedSecret(e))));const c=e.decrypt(l);return Promise.all([u,c]).then((e=>{let[t,n]=e;return __LOG__(2)`doFullHandshakeCore parsing and verifying server certificate`,i.processCertificate({certificate:n,serverStatic:t})})).then((()=>{const t=e.encrypt(i.staticKeyPair.generatePublicKey());e.mixIntoKey(i.staticKeyPair.generateSharedSecret(o));const r=e.encrypt(Promise.resolve(n));return Promise.all([t,r])})).then((t=>{let[n,r]=t;return __LOG__(2)`doFullHandshakeCore client finish and deriving secrets`,e.send(i.encodeHandshakeFinish({static:n,payload:r})),e.finish()}))}function _(e,t,n,r){const i=new u.NoiseHandshake(e);i.start("Noise_XX_25519_AESGCM_SHA256\0\0\0\0",r.protoHeader);const o=n.generatePublicKey();return i.authenticate(o),o.then((e=>(__LOG__(2)`fullNoiseHandshake send hello`,i.sendAndReceive(r.encodeHandshakeHello({ephemeral:e}))))).then((e=>{__LOG__(2)`fullNoiseHandshake rcv hello`;const o=r.decodeServerHello(e);return f(i,o,t,n,r)}))}},43548:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.openWebSocket=function(e){const t=new WebSocket(e);return t.binaryType="arraybuffer",new Promise(((e,n)=>{t.onopen=e,t.onclose=e=>{(0,o.onWebSocketCloseEvent)(null,e),n((0,a.default)(`WebSocket closed immediately: ${e.reason} ${e.code}`))}})).then((()=>new l(t)))};var i=n(89323),o=n(42298),a=r(n(82065));let s=1;class l{constructor(e){this._closed=!1,this.onData=null,this.onClose=null,this.onError=null,this.dataToSend=new i.Binary,this._handleData=e=>{if(this._closed)return;const t=new Uint8Array(e.data);this.onData?this.onData(t):__LOG__(4,void 0,new Error)`WebSocket #${this.id} dropped ${t.length} bytes`},this._handleClose=e=>{(0,o.onWebSocketCloseEvent)(this.id,e),this._closed||this._doClose()},this._handleError=e=>{if(this._closed)return;const t=this.onError;t&&t(String(e))};const t=s++;this.id=t,this._socket=e,e.onmessage=this._handleData,e.onclose=this._handleClose,e.onerror=this._handleError}close(){this._closed||(this._socket.close(),this._doClose())}requestSend(){this._closed?__LOG__(4,void 0,new Error)`WebSocket #${this.id} not opened`:this.dataToSend.size()&&this._socket.send(this.dataToSend.readBuffer())}_doClose(){this._closed=!0,this.onClose&&this.onClose()}}},30866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CA=void 0,t.parseCertificateWA6=p,t.verifyChainCertificateWA6=function(e,t){__LOG__(2)`verifyChainCertificateWA6: extract leaf and intermediate certificate`;const n=(0,c.decodeProtobuf)(r.CertChainSpec,e),o=n.intermediate,l=n.leaf;if(null==o||null==l)return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6: missing leaf and/or intermediate certificate`,(0,a.makeError)("missing-certificate");__LOG__(2)`verifying intermediate certificate`;const u=p(o);if(!u.success)return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6: invalid intermediate certificate`,(0,a.makeError)("invalid-certificate");if(u.value.issuerSerial!==d.SERIAL)return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6 intermediate certificate was not issued by RootCA`,(0,a.makeError)("invalid-certificate");if(!f(u.value,d.PUBLIC_KEY))return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6: intermediate certificate is poorly signed`,(0,a.makeError)("invalid-certificate");__LOG__(2)`verifying leaf certificate`;const _=p(l);if(!_.success)return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6: invalid leaf certificate`,(0,a.makeError)("invalid-certificate");if(_.value.issuerSerial!==u.value.serial)return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6 leaf certificate was not issued by RootCA`,(0,a.makeError)("invalid-certificate");const g=(0,s.serializeIdentity)(new Uint8Array(u.value.key));if(!f(_.value,g))return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6: leaf certificate is poorly signed`,(0,a.makeError)("invalid-certificate");if(!(0,i.arrayBuffersEqual)(_.value.key,t))return __LOG__(4,void 0,new Error)`verifyChainCertificateWA6 leafCert.key does not match handshake server.hello.static`,(0,a.makeError)("invalid-certificate");return(0,a.makeResult)({leaf:_.value,intermediate:u.value})};var r=n(13548),i=n(44379),o=n(65982),a=n(22207),s=n(39876),l=n(75739),u=n(29299),c=n(33655);const d={SERIAL:0,ISSUER:"WhatsAppLongTerm1",PUBLIC_KEY:(0,s.serializeIdentity)(new Uint8Array((0,o.parseHex)("142375574d0a587166aae71ebe516437c4a28b73e3695c6ce1f7f9545da8ee6b")))};function p(e){const t=e.details,n=e.signature;if(!t)return __LOG__(4,void 0,new Error)`parseCertificateWA6 certificate is missing "details"`,(0,a.makeError)("invalid-certificate");if(!n)return __LOG__(4,void 0,new Error)`parseCertificateWA6 certificate is missing "signature"`,(0,a.makeError)("invalid-certificate");const i=(0,c.decodeProtobuf)(r.CertChain$NoiseCertificate$DetailsSpec,t),{issuerSerial:o,serial:s,key:u,notAfter:d,notBefore:p}=i;if(null==o)return __LOG__(4,void 0,new Error)`parseCertificateWA6 certificate is missing "issuer_serial"`,(0,a.makeError)("invalid-certificate");if(null==s)return __LOG__(4,void 0,new Error)`parseCertificateWA6 certificate is missing "serial"`,(0,a.makeError)("invalid-certificate");if(null==u)return __LOG__(4,void 0,new Error)`parseCertificateWA6 certificate is missing "key"`,(0,a.makeError)("invalid-certificate");const f=(0,l.ensureSize)(new Uint8Array(n),64);return(0,a.makeResult)({serial:s,issuerSerial:o,key:u,notBefore:p,notAfter:d,details:t,signature:f})}function f(e,t){return(0,u.verifyMsgSignalVariant)(t,new Uint8Array(e.details),e.signature)}t.ROOT_CA=d},38032:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACK=void 0;t.ACK={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4}},87115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toStanzaId=function(e){return e}},44400:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.NOT_HANDLED=t.DynamicRouter=void 0;var i=r(n(82065));const o={sentinel:"RESPONSE_NAMESPACE"},a={sentinel:"NOT_HANDLED"};t.NOT_HANDLED=a;function s(e,t){const n=t.namespace;return n===o?l:e.get(n)}function l(e,t,n){n(t)}function u(e){if(null!=e&&("object"==typeof e||"function"==typeof e)){const t=e.then;return"function"==typeof t?t:null}return null}t.DynamicRouter=class{constructor(){var e=this;this._basePromise=Promise.resolve(),this._handlers=new Map,this._handlerChangeCount=0,this._firstRoute=null,this._nextRoute=null,this._lastRoute=null,this.fireAndForget=function(t,n,r){var i;let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null===(i=e._onRouteCalled)||void 0===i||i.call(e,t,n,r),e._schedule(t,n,r,null,o)},this.sendAndReceive=function(t,n,r){var i;let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null===(i=e._onRouteCalled)||void 0===i||i.call(e,t,n,r),new Promise(((i,s)=>{e._schedule(t,n,r,(t=>{try{const n=u(t);n?n.call(t,(t=>{e._schedule(o,"",t,i,a)}),(t=>{e._schedule(o,"",t,s,!1)})):e._schedule(o,"",t,i,a)}catch(t){e._schedule(o,"",t,s,!1)}}),a)}))},this._run=()=>{let e=this._nextRoute;if(!e)return;const t=this._handlers;let n;for(;e&&!(n=s(t,e));)this._nextRoute=e=e.nextRoute;if(!e||!n)return;const r=this._runHandler(n,e);let i=!0;if(r!==a){const t=e.prevRoute,n=e.nextRoute;this._nextRoute===e&&(this._nextRoute=n),t?t.nextRoute=n:this._firstRoute=n,n?n.prevRoute=t:(i=!1,this._lastRoute=t)}return i&&this._basePromise.then(this._run),r}}hasHandlerForNamespace(e){return this._handlers.has(e)}getHandledNamespaces(){return Array.from(this._handlers.keys())}setOnRouteCalled(e){this._onRouteCalled=e}setNamespaceHandler(e,t){const n=this._handlers,r=n.get(e);if(r!==t&&(++this._handlerChangeCount,n.set(e,t),!r)){const e=this._firstRoute;e&&(this._nextRoute||this._basePromise.then(this._run),this._nextRoute=e)}}setHandlers(e,t){this.setNamespaceHandler(e,(function(n,r,o){if(null==t[n])throw __LOG__(4,void 0,new Error)`${n} is not defined for ${e}`,(0,i.default)(`${n} is not defined for ${e}`);const a=t[n](r);o&&o(a)}))}_schedule(e,t,n,r,i){const o=this._lastRoute,a={namespace:e,route:t,arg:n,resolver:r,prevRoute:o,nextRoute:null,silentLog:i};this._lastRoute=a;let l=!0;o?(o.nextRoute=a,l=!this._nextRoute):this._firstRoute=a,l&&s(this._handlers,a)&&(this._nextRoute=a,this._basePromise.then(this._run))}_runHandler(e,t){const{route:n,arg:r,resolver:o,silentLog:s}=t,l=this._handlerChangeCount;let u=null,c=null;try{u=e(n,r,o,s)}catch(e){c=Promise.reject(e)}if(u===a){if(l!==this._handlerChangeCount)return a;c=Promise.reject((0,i.default)("DynamicRouter: NOT_HANDLED can only be used when updating handlers"))}if(!o)return c;c&&o(c)}}},16009:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.AckParser=void 0,t.ackMatchesTemplate=function(e,t){return e.id===t.id&&(void 0===t.class||e.class===t.class)&&(void 0===t.type||e.type===t.type)&&(void 0===t.from||a(e.from,t.from))&&(void 0===t.participant||e.participant===t.participant)&&(void 0===t.recipient||e.recipient===t.recipient)&&(void 0===t.ts||e.ts===t.ts)},t.fromJidsAreEqual=a;var i=n(44037);const o=new(r(n(82601)).default)("ack",(e=>(e.assertTag("ack"),{id:e.attrString("id"),ts:e.maybeAttrString("t"),class:e.attrString("class"),type:e.maybeAttrString("type"),from:e.attrJidWithType(),participant:e.hasAttr("participant")?e.attrDeviceJid("participant"):null,recipient:e.hasAttr("recipient")?e.attrUserJid("recipient"):null})));function a(e,t){if((0,i.extractFromJid)(e)===t)return!0;if(null!=e.userJid)return(0,i.defaultDeviceJidForUser)(e.userJid)===t;if(null!=e.deviceJid){const{deviceJid:n}=e;return 0===(0,i.extractDeviceId)(n)&&(0,i.extractUserJid)(n)===t}return!1}t.AckParser=o},93042:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SOCKET_ID=void 0,t._sendIq=C,t.cancelDeadSocketTimer=function(){y&&y.deadSocketTimer.cancel()},t.castSmaxStanza=function(e,t){const n=O("castStanza");n.socket?n.castStanza(e,t):__LOG__(2)`Comms has no open socket`},t.closeSocket=P,t.closeSocketAndPreventRetry=function(){const e=O("closeSocketAndPreventRetry");e.socketLoop.endWithValue(),e.socket&&(__LOG__(2)`Comms: closeSocketAndPreventRetry called`,P())},t.forceAbortSocketConnection=function(){var e,t;const n=O("socketAbortController");null===(e=n.socketAbortController)||void 0===e||e.abort(),null===(t=n.softCloseSocket)||void 0===t||t.call(n)},t.forceResetSocketLoop=function(){O("forceResetSocketLoop").socketLoop.reset()},t.getAndIncrementNextOrderedId=function(){return v++},t.getComms=function(){return y},t.isActiveSocket=function(e){return O("castStanza").socketId===e},t.isSocketConnected=b,t.maybeResetSocketLoop=function(){__LOG__(2)`Comms: maybeResetSocketLoop`,b()||O("maybeResetSocketLoop").socketLoop.reset()},t.onStreamErrorReceived=function(){O("onStreamErrorReceived").socketLoop.cancelReset()},t.openSocketLoop=T,t.resetStateForTests=function(){y=null,S=new p.Resolvable,v=1},t.sendPing=function(){return O("sendPing").sendPing()},t.sendSmaxStanza=function(e,t){var n,r,i;const o=null!==(n=null==t?void 0:t.withoutRetry)&&void 0!==n&&n,a=null!==(r=null==t?void 0:t.timeoutSeconds)&&void 0!==r?r:0,s=null!==(i=null==t?void 0:t.signal)&&void 0!==i?i:null;return C(e,o,a,s,"smax")},t.singletonOrThrowIfUninitialized=O,t.socketLoopIteration=M,t.startComms=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(y)return;y=new I(e,t,n),r&&setTimeout(T,0)},t.startHandlingRequests=function(){return O("startHandlingRequests").startHandlingRequests()},t.stopComms=function(){const e=O("stopComms");e.socketLoop.endWithValue(),e.socket&&P();y=null},t.waitForConnection=function(){O("waitForConnection").sendPing(),S||(S=new p.Resolvable);return S.promise};var o=i(n(73982)),a=i(n(11504)),s=n(43558),l=i(n(82065)),u=n(63274),c=n(69143),d=n(82521),p=n(31630),f=n(22207),_=n(78494),g=n(15029),h=n(68991),A=n(26679),m=n(29987),E=n(42811);let y=null,S=null,v=1;t.DEFAULT_SOCKET_ID=0;class I{constructor(e,t,n){var r,i;this.nextSocketId=1,this.pendingIqs=new Map,this.ackHandlers=[],this.pendingSmaxStanzas=new Map,this._recvBlocker=new p.Resolvable,this.socketAbortController=null,this.activePing=null,this._pending=new Set,this.socketId=0,this.socket=null,this.softCloseSocket=null,this.handleStanza=(e,t,n)=>{const r=(0,A.attrString)(e,"id");if(r.success&&"receipt"!==e.tag){const t=r.value,n=this.pendingSmaxStanzas.get(t);if(n)return this.pendingSmaxStanzas.delete(t),n.resolve(e),this.maybeScheduleHealthCheck(),"NO_ACK"}const i=R(e);if(null!=i){const t=this.pendingIqs.get(i);t?(this.pendingIqs.delete(i),t.resolve(e),this.maybeScheduleHealthCheck()):(__LOG__(3)`handleIq no handler for iq with id ${i}`,__LOG__(4,void 0,new Error)`handleIq no handler for iq`)}else{if("ack"!==e.tag)return"failure"===e.tag&&this.config.shouldBlockReceivingUntilSuccess?this._handleStanza(e,t,n):this._recvBlocker.promise.then((()=>this._handleStanza(e,t,n)));this.handleAck(e)}return"NO_ACK"},this.healthCheckTimer=new _.ShiftTimer((()=>{this.socketId&&this.sendPing()})),this.deadSocketTimer=new _.ShiftTimer((e=>{__LOG__(2)`Comms: Socket ${e} expired`,e===this.socketId&&this.softCloseSocket&&this.softCloseSocket()})),this.sendPing=(0,a.default)((function*(){const e=O("sendPing");if(!e.socketId)return __LOG__(2)`Comms: sendPing when socket dead`,Promise.resolve();if(e.activePing&&e.activePing.socketId===e.socketId)return __LOG__(2)`Comms: sendPing ping still pending`,Promise.resolve();e.activePing&&e.activePing.handler.resolve();const t=(0,h.makeClientRequest)(),n=t.attrs.id;if("string"!=typeof n)return __LOG__(4,void 0,new Error)`Comms: No stanzaId in ping request stanza`,Promise.resolve();const r=new p.Resolvable;e.activePing={socketId:e.socketId,stanzaId:n,handler:r},e.callStanza(t);const i=yield r.promise;if(i){const n=(0,g.parseClientResponseServerResponse)(i,t);if(n.success){var o,a;const t=(0,m.castToUnixTime)(n.value.t),r=Math.round(Date.now()/1e3-t);null===(o=(a=e.config.handlers).onClockSkewUpdate)||void 0===o||o.call(a,r)}}})),this._handleStanza=e,this.onConnectionChange=(0,c.notifyConnectionChangeFactory)(null!==(r=t.handlers.onConnectionChange)&&void 0!==r?r:()=>{},null!==(i=t.handlers.onOptimisticConnectionChange)&&void 0!==i?i:()=>{}),this.gzipInflate=n,this.config=t,this.socketLoop=new d.PromiseRetryLoop({name:"MainSocketLoop",code:M,timer:{jitter:.1,max:t.maxSocketLoopWaitTime,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4})}filterPending(e){const t=[];function n(n){e(n)&&t.push(n)}return this.pendingIqs.forEach(n),this.ackHandlers.forEach(n),this.pendingSmaxStanzas.forEach(n),t}sendPendingStanza(e){var t;null===(t=e.cleanup)||void 0===t||t.call(e),e.cleanup=void 0,this.callStanza(e.stanza)}maybeSendPendingStanza(e){var t,n,r;e.attempt>=this.config.maxRetries?(null===(t=(n=this.config.handlers).onDropStanza)||void 0===t||t.call(n,e),null===(r=e.cleanup)||void 0===r||r.call(e),e.cleanup=void 0,this.removeHandler(e,"max-retries")):this.socket?(e.attempt+=1,this.sendPendingStanza(e)):__LOG__(2)`Comms has no open socket, will resend stanza when socket opens`}callStanzaAsync(e,t){var n=this;return(0,a.default)((function*(){return yield n.callStanza(e,t)}))()}callStanza(e,t){const n=this.castStanza(e,t);return this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId),this.healthCheckTimer.cancel(),n}castStanzaAsync(e){var t=this;return(0,a.default)((function*(){return yield t.castStanza(e)}))()}castStanza(e,t){try{var n,r;const i=null===(n=(r=this.config.handlers).onBeforeCastStanzaForE2E)||void 0===n?void 0:n.call(r,e,t);if(null!=i)return __LOG__(4,void 0,new Error)`Dropping stanza since onBeforeCastStanza matched. We return mock response directly.`,Array.isArray(i)?Promise.all(i.map((e=>Promise.resolve(this.handleStanza(e,this.socketId,0))))):(this.handleStanza(i,this.socketId,0),Promise.resolve())}catch(e){}const i=this.socketOrThrow("castStanza");try{return i.sendFrame((0,E.encodeStanza)(e)).then((()=>{var n,r;null===(n=(r=this.config.handlers).onCastStanza)||void 0===n||n.call(r,e,t)})).catch((e=>{if(__LOG__(4,void 0,new Error)`castStanza async error ${e}`,e instanceof u.BufferTooLargeError)return Promise.reject(e)}))}catch(e){__LOG__(4,void 0,new Error)`castStanza error ${e}`}return Promise.resolve()}socketOrThrow(e){const t=this.socket;if(t)return t;throw(0,l.default)(`Comms.${e} called while no socket`)}startHandlingRequests(){return __LOG__(2)`Comms.startHandlingRequests`,this._recvBlocker.resolve(),this._recvBlocker.promise.then((()=>{}))}parseAndHandleStanza(e,t){e===this.socketId&&(this.deadSocketTimer.cancel(),S&&(S.resolve(),S=null));const n=(0,E.decodeStanza)(t,this.gzipInflate).catch((e=>{throw __LOG__(4,void 0,new Error)`Failure parsing stanza!`,e})).then((n=>{var r,i;null===(r=(i=this.config.handlers).onHandleStanza)||void 0===r||r.call(i,n,e,t.byteLength);const o=this.activePing;return o&&o.socketId===e&&o.stanzaId===R(n)?(this.activePing=null,o.handler.resolve(n),this.maybeScheduleHealthCheck(),"NO_ACK"):this.handleStanza(n,e,t.byteLength)})).then((t=>{if(e===this.socketId){if("CLOSE_SOCKET"===t){__LOG__(2)`Comms: job response is CLOSE_SOCKET`;const e=this.socket;e&&e.close()}else"NO_ACK"===t||this.castStanza(t);return"NO_ACK"}}));this._pending.add(n),n.finally((()=>{this._pending.delete(n)}))}handleAck(e){const t=this.ackHandlers;let n=-1,r=null;for(;!r&&++n<t.length;)r=t[n].parseAndTest(e);if(r){var i,o;const a=t[n];(0,s.removeIndexWithoutPreservingOrder)(t,n),null===(i=(o=this.config.handlers).onHandleAck)||void 0===i||i.call(o,e),a.resolve(r),this.maybeScheduleHealthCheck()}else __LOG__(3)`handleAck: unrecognized ${e}`}removeHandler(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disconnect";if("iq"===e.type||"smax"===e.type){const t=e.stanza.attrs.id;if(!t||"string"!=typeof t)return;if("iq"===e.type&&!this.pendingIqs.delete(t)||"smax"===e.type&&!this.pendingSmaxStanzas.delete(t))return}else{e.type;const t=this.ackHandlers.indexOf(e);if(-1===t)return;(0,s.removeIndexWithoutPreservingOrder)(this.ackHandlers,t)}"disconnect"===t?e.resolve(Promise.reject(new u.Disconnected)):e.resolve(Promise.reject(new u.MaxRetries))}maybeScheduleHealthCheck(){if(this.healthCheckTimer.isScheduled())return;if(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)return;const e=this.config.healthCheckInterval,t=Math.ceil(1e3*e*(1+Math.random()));this.healthCheckTimer.onOrBefore(t)}}function T(){O("openSocketLoop").socketLoop.start()}function b(){var e;return!!(null===(e=y)||void 0===e?void 0:e.socket)}function M(){var e,t,n;const i=O("socketLoopIteration"),o=i.nextSocketId++;return __LOG__(2)`Comms: Socket ${o} opening`,null===(e=(t=i.config.handlers).onSocketLoopIteration)||void 0===e||e.call(t,i.socketAbortController),"function"==typeof r&&(i.socketAbortController=new r),i.config.openChatSocket((()=>{i.onConnectionChange("in_handshake")}),null===(n=i.socketAbortController)||void 0===n?void 0:n.signal).then((0,f.onResult)((e=>{var t,n,r,a;null===(t=(n=i.config.handlers).onSocketOpen)||void 0===t||t.call(n);const s=new p.Resolvable;return __LOG__(2)`Comms: Socket ${o} opened`,i.socketId=o,i.socket=e,i.softCloseSocket=()=>{i.softCloseSocket=null,i.socket&&i.config.shouldCloseStaleSocket&&(P(),i.socket=null),s.resolve()},i.socketLoop.resetTimeoutAfter(1e4),i.deadSocketTimer.cancel(),i.maybeScheduleHealthCheck(),e.setOnFrame((e=>i.parseAndHandleStanza(o,e))),e.setOnClose((()=>{var e,t;__LOG__(2)`Comms: Socket ${o} closed`,i.activePing&&o===i.activePing.socketId&&(i.activePing.handler.resolve(),i.activePing=null),i.filterPending((e=>e.attachedToSocketId===o)).forEach((e=>{i.removeHandler(e)})),o===i.socketId&&(i.socketId=0,i.socket=null,i.onConnectionChange("disconnected"),null===(e=(t=i.config.handlers).onDisconnect)||void 0===e||e.call(t),s.resolve())})),i.onConnectionChange("connected"),null===(r=(a=i.config.handlers).onConnect)||void 0===r||r.call(a),i.filterPending((e=>!e.attachedToSocketId)).sort(((e,t)=>e.orderedId-t.orderedId)).forEach((e=>{switch(e.type){case"smax":case"iq":i.maybeSendPendingStanza(e);break;case"ack":i.callStanza(e.stanza);break;default:e.type}})),s.promise}))).then((0,f.catchError)((e=>{switch(e){case"max-hunters":__LOG__(3)`Comms: socketLoopIteration socket closed while in noise handshake using treasureHunt strategy`;break;case"disconnected":__LOG__(3)`Comms: socketLoopIteration socket disconnected while in noise handshake`}}))).catch((e=>{e instanceof u.Disconnected?__LOG__(2)`Comms: socketLoopIteration socket closed while in noise handshake`:__LOG__(4,void 0,new Error)`Comms: socketLoopIteration failed ${e}`}))}function P(){const e=O("closeSocket");e.socket&&(__LOG__(2)`Comms: Socket ${e.socketId} closed`,__LOG__(2)`Comms: closeSocket called`,e.socket.close())}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"iq";return new Promise((a=>{const s=O("sendIq"),c=e.attrs.id;if(!c||"string"!=typeof c)throw(0,l.default)(`Comms:sendIq given iq without id: ${String(e)}`);const d=s.socketId;if(t&&!d)return void a(Promise.reject(new u.Offline));const p=()=>{const e="iq"===i?s.pendingIqs.get(c):s.pendingSmaxStanzas.get(c);e?s.removeHandler(e):a(Promise.reject((0,l.default)(`Comms:_sendIq unexisting stanza to be cancelled: ${c}`)))};let f=null;if(n>0){const e=setTimeout(p,1e3*n);f=()=>{clearTimeout(e)}}if(null!=r){if(r.aborted)return void a(Promise.reject(new u.Disconnected));r.addEventListener("abort",p),f=()=>{r.removeEventListener("abort",p)}}const _={resolve:a,stanza:e,attachedToSocketId:t?d:0,orderedId:v++,attempt:0,cleanup:f};if("iq"===i){var g,h;const t=(0,o.default)({type:i},_);s.pendingIqs.set(c,t),null===(g=(h=s.config.handlers).onSendIq)||void 0===g||g.call(h,e),s.maybeSendPendingStanza(t)}else{const e=(0,o.default)({type:i},_);s.pendingSmaxStanzas.set(c,e),s.maybeSendPendingStanza(e)}}))}function O(e){if(y)return y;throw(0,l.default)(`Comms::${e} called before startComms`)}function R(e){if("iq"===e.tag){const t=e.attrs.type;if("result"===t||"error"===t)return(0,E.decodeAsString)(e.attrs.id)||null}return null}},82749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deprecatedCastStanza=function(e,t){(0,o.castSmaxStanza)(e,t)},t.deprecatedSendIq=function(e,t){return(0,o._sendIq)(e,!1).then((e=>(0,a.parseIqResponse)(e,t)))},t.deprecatedSendIqErrorParser=function(e,t,n){return(0,o._sendIq)(e,!1).then((e=>(0,a.parseIqResponse)(e,t,n)))},t.deprecatedSendIqIfConnectedWithin=function(e,t,n){return(0,o._sendIq)(e,!1,n).then((e=>(0,a.parseIqResponse)(e,t)))},t.deprecatedSendIqWithoutRetry=function(e,t){return(0,o._sendIq)(e,!0).then((e=>(0,a.parseIqResponse)(e,t)))},t.deprecatedSendStanzaAndReturnAck=s,t.deprecatedSendStanzaAndWaitForAck=function(e,t){return s(e,t).then((()=>{}))};var r=n(16009),i=n(43558),o=n(93042),a=n(90395);function s(e,t){return new Promise((n=>{const a=(0,o.singletonOrThrowIfUninitialized)("deprecatedSendStanzaAndReturnAck"),s={type:"ack",parseAndTest:e=>{const n=r.AckParser.parse(e);return!n.error&&(0,r.ackMatchesTemplate)(n.success,t)?e:null},resolve:n,stanza:e,attachedToSocketId:o.DEFAULT_SOCKET_ID,orderedId:(0,o.getAndIncrementNextOrderedId)()};a.ackHandlers.push(s),a.socket?a.callStanza(e).catch((e=>{const t=a.ackHandlers.indexOf(s);-1!==t&&((0,i.removeIndexWithoutPreservingOrder)(a.ackHandlers,t),s.resolve(Promise.reject(e)))})):__LOG__(2)`Comms has no open socket, will send stanza when socket opens`}))}},82601:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(82065)),o=n(85739);t.default=class{constructor(e,t){this._name=e,this._parser=t}parse(e){const t=new o.ParsableWapNode(this._name,e);try{return{success:this._parser(t)}}catch(e){if(e instanceof o.XmppParsingFailure)return{error:e};throw e}}parseOrThrow(e){const t=this.parse(e);if(t.error)throw(0,i.default)(String(t.error));return t.success}}},69143:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyConnectionChangeFactory=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3;const r={timeoutID:null,connectionStatus:"disconnected",optimismLevel:"optimist"},i=()=>{const{optimismLevel:e,connectionStatus:i}=r;"optimist"===e?r.timeoutID=setTimeout((()=>{r.optimismLevel="realist",t(i)}),n):t(i)};return n=>{r.connectionStatus=n,"disconnected"===n||"in_handshake"===n?i():(null!=r.timeoutID&&(clearTimeout(r.timeoutID),r.timeoutID=null),t(n)),e(n)}}},85739:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.XmppParsingFailure=t.ParsableWapNode=void 0;var i=n(89323),o=r(n(82065)),a=n(44037),s=n(22101),l=n(78481),u=n(39876),c=n(29987),d=n(42811),p=n(40471);class f extends Error{constructor(e,t){super(`XmppParsingFailure: ${e}: ${t}`),this.name="XmppParsingFailure",this.parser=e,this.reason=t}toString(){return`XmppParsingFailure: ${this.parser}: ${this.reason}`}}t.XmppParsingFailure=f;class _ extends l.ParsableXmlNode{constructor(e,t){super(e,t)}assertFromServer(){const e=this.attrString("from");e!==a.WA_SERVER_JID_SUFFIX&&this.throw(`to have "from"="s.whatsapp.net", but instead has "${e}"`)}attrUserJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return null==n.userJid?this.throw(`to have "${e}"={UserJid}, but instead has "${t}"`):n.userJid}attrPhoneUserJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"phoneUser"===n.jidType?n.userJid:this.throw(`to have "${e}"={PhoneUserJid}, but instead has "${t}"`)}attrLidUserJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"lidUser"===n.jidType?n.userJid:this.throw(`to have "${e}"={LidUserJid}, but instead has "${t}"`)}maybeAttrUserJid(e){return this.hasAttr(e)?this.attrUserJid(e):null}maybeAttrPhoneUserJid(e){return this.hasAttr(e)?this.attrPhoneUserJid(e):null}maybeAttrLidUserJid(e){return this.hasAttr(e)?this.attrLidUserJid(e):null}attrGroupJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return null==n.groupJid?this.throw(`to have "${e}"={GroupJid}, but instead has "${t}"`):n.groupJid}maybeAttrGroupJid(e){return this.hasAttr(e)?this.attrGroupJid(e):null}attrChatJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return null!=n.userJid?n.userJid:null!=n.groupJid?n.groupJid:this.throw(`to have "${e}"={ChatJid}, but instead has "${t}"`)}attrPhoneChatJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"phoneUser"===n.jidType?n.userJid:"group"===n.jidType?n.groupJid:this.throw(`to have "${e}"={ChatJid}, but instead has "${t}"`)}attrDeviceJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return null!=n.deviceJid?n.deviceJid:null!=n.userJid?(0,a.defaultDeviceJidForUser)(n.userJid):null!=n.hostedDeviceJid?n.hostedDeviceJid:null!=n.hostedLidDeviceJid?n.hostedLidDeviceJid:this.throw(`to have "${e}"={DeviceJid}, but instead has "${t}"`)}attrPhoneDeviceJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"phoneDevice"===n.jidType?n.deviceJid:"phoneUser"===n.jidType?(0,a.defaultPhoneDeviceJidForUser)(n.userJid):this.throw(`to have "${e}"={PhoneDeviceJid}, but instead has "${t}"`)}attrLidDeviceJid(e){const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"lidDevice"===n.jidType?n.deviceJid:"lidUser"===n.jidType?(0,a.defaultLidDeviceJidForLidUserJid)(n.userJid):this.throw(`to have "${e}"={LidDeviceJid}, but instead has "${t}"`)}attrDeviceId(e){const t=this.attrInt(e);return(0,a.interpretAsDeviceId)(t)}attrFromJidChat(){const e=this.attrJidWithType();switch(e.jidType){case"msgrUser":{const t=e.userJid,n=(0,a.defaultDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"interopUser":{const t=e.userJid,n=(0,a.defaultDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneUser":{const t=e.userJid,n=(0,a.defaultDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"lidUser":{const t=e.userJid,n=(0,a.defaultLidDeviceJidForLidUserJid)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneDevice":{const t=e.deviceJid;return{type:"device",chat:(0,a.extractUserJid)(t),deviceJid:t,author:t}}case"msgrDevice":{const t=e.deviceJid;return{type:"device",chat:(0,a.extractUserJid)(t),deviceJid:t,author:t}}case"interopDevice":{const t=e.deviceJid;return{type:"device",chat:(0,a.extractUserJid)(t),deviceJid:t,author:t}}case"lidDevice":{const t=e.deviceJid;return{type:"device",chat:(0,a.extractUserJid)(t),deviceJid:t,author:t}}case"group":{const t=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"group",chat:e.groupJid,groupJid:e.groupJid,author:t}}case"broadcast":{const t=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"broadcast",broadcastJid:e.broadcastJid,chat:(0,a.extractUserJid)(t),author:t}}case"hosted":{const t=e.hostedDeviceJid;return{type:"device",chat:(0,a.extractUserJid)(t),deviceJid:t,author:t}}case"hostedLid":{const t=e.hostedLidDeviceJid;return{type:"device",chat:(0,a.extractUserJid)(t),deviceJid:t,author:t}}case"call":throw __LOG__(4,void 0,new Error)`ParsableWapNode: attrFromJid() is called with ${e.callJid}`,(0,o.default)("ParsableWapNode: attrFromJid() does not support CallJid");default:return e.jidType,this.throw(`attrFromJidChat should not be used with jid of type ${e.jidType}`)}}attrFromJidPhoneChat(){const e=this.attrJidWithType();switch(e.jidType){case"phoneUser":{const t=e.userJid,n=(0,a.defaultPhoneDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneDevice":{const t=e.deviceJid;return{type:"device",chat:(0,a.extractPhoneUserJid)(t),deviceJid:t,author:t}}case"group":{const t=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"group",chat:e.groupJid,groupJid:e.groupJid,author:t}}case"broadcast":{const t=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"broadcast",broadcastJid:e.broadcastJid,chat:(0,a.extractPhoneUserJid)(t),author:t}}case"call":throw __LOG__(4,void 0,new Error)`ParsableWapNode: attrFromJid() is called with ${e.callJid}`,(0,o.default)("ParsableWapNode: attrFromJid() does not support CallJid");default:return e.jidType,this.throw(`attrFromJidChat should not be used with jid of type ${e.jidType}`)}}attrFromPhoneJid(){if("status"===this.attrJidWithType().jidType){const e=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==e?this.throw("to have participant for status msg"):{type:"status",author:e}}return this.attrFromJidPhoneChat()}attrFromJid(){const e=this.attrJidWithType();if("status"===e.jidType){const e=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==e?this.throw("to have participant for status msg"):{type:"status",author:e}}return"newsletter"===e.jidType?{type:"newsletter",newsletterJid:e.newsletterJid}:"hosted"===e.jidType?{type:"hosted",hostedDeviceJid:e.hostedDeviceJid}:"hostedLid"===e.jidType?{type:"hostedLid",hostedLidDeviceJid:e.hostedLidDeviceJid}:this.attrFromJidChat()}attrJidWithType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"unknown"===n.jidType?this.throw(`to have "${e}"={Jid}, but instead has "${t}"`):n}attrWapJid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";const t=this.attrString(e),n=(0,a.interpretAndValidateJid)(t);return"unknown"===n.jidType?p.WapJid.create(null,t):(0,d.JID)((0,a.extractFromJid)(n))}attrLongInt(e){const t=this.attrString(e);return(0,s.decimalStringToLongInt)(t)}attrTime(e){return(0,c.castToUnixTime)(this.attrInt(e))}attrFutureTime(e){const t=this.attrInt(e);return(0,c.futureUnixTime)(t)}contentString(){if(this.hasChildren())return this.throw("to have string content, but has children instead");if(this.hasContent()){const e=new i.Binary(this.contentBytes());return e.readString(e.size())}return this.throw("to have content")}decodeAsString(e){return(0,d.decodeAsString)(e)}contentSerializedPubKey(){return this.hasContent()?(0,u.serializeIdentity)(this.contentBytes()):this.throw("to have content")}createParseError(e){return new f(this.name(),`expected <${this.tag()}> ${e}`)}throw(e){throw this.createParseError(e)}}t.ParsableWapNode=_},90395:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIqResponse=function(e,t,n){const o=e.content;if(o&&Array.isArray(o)&&o[0]){const t=o[0];if("error"===t.tag){const o=t.attrs||{};let a;n&&(a="function"==typeof n?n(e):n.parseOrThrow(t));const s=a;return{success:!1,errorCode:parseInt(o.code,10),errorText:(0,r.decodeAsString)(o.text)||"",errorType:(0,r.decodeAsString)(o.type)||"",errorBackoff:parseInt(o.backoff,10),toString:i,customError:s}}}return"function"==typeof t?{success:!0,result:t(e)}:{success:!0,result:t.parseOrThrow(e)}};var r=n(42811);function i(){return`IqError ${this.errorCode}: ${this.errorText}`}},42811:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.BIG_ENDIAN_CONTENT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e;const r=new Uint8Array(t);for(let e=t-1;e>=0;e--)r[e]=255&n,n>>>=8;return r},t.BROADCAST_JID=function(e){return re(e)},t.CALL_JID=function(e){return re(e)},t.CUSTOM_STRING=function(e){return e},t.DEVICE_JID=function(e){return re(e)},t.DOMAIN_JID=ie,t.DROP_ATTR=void 0,t.GROUP_JID=function(e){return re(e)},t.HOSTED_LID=t.HOSTED=t.G_US=void 0,t.INT=function(e){return e.toString()},t.JID=re,t.LONG_INT=function(e){return(0,u.longIntToDecimalString)(e)},t.MAYBE_CUSTOM_STRING=function(e){if(null==e)return C;return e},t.NEWSLETTER=void 0,t.NEWSLETTER_JID=function(e){return re(e)},t.PARTICIPANT_JID=function(e){return"status"===e.type||"group"===e.type||"broadcast"===e.type?re(e.author):C},t.SMAX_ID=function(e){return e.toString()},t.STANZA_ID=function(e){return e},t.S_WHATSAPP_NET=t.STATUS_BROADCAST=void 0,t.TO_JID=function(e){return re(ne(e))},t.TO_WAP_JID=function(e){return"phoneDevice"===e.jidType||"msgrDevice"===e.jidType||"lidDevice"===e.jidType?re(e.deviceJid):"phoneUser"===e.jidType||"msgrUser"===e.jidType||"lidUser"===e.jidType?re(e.userJid):"group"===e.jidType?re(e.groupJid):"status"===e.jidType?re(e.statusJid):"call"===e.jidType?re(e.callJid):"interopDevice"===e.jidType?re(e.deviceJid):"interopUser"===e.jidType?re(e.userJid):"newsletter"===e.jidType?re(e.newsletterJid):"hosted"===e.jidType?re(e.hostedDeviceJid):"hostedLid"===e.jidType?re(e.hostedLidDeviceJid):(e.jidType,re(e.broadcastJid))},t.USER_JID=function(e){return re(e)},t.WapNode=void 0,t.decodeAsString=function(e){if(e instanceof p.WapJid)return e.toString();return e},t.decodeStanza=function(e,t){const n=new o.Binary(e);if(2&n.readUint8())return __LOG__(2)`Decoding compressed stanza`,t(n.readByteArray()).then((e=>X(new o.Binary(e))));return Promise.resolve(X(n))},t.decodeStanzaDebug=function(e){const t=new o.Binary(e);if(2&t.readUint8())throw(0,s.default)("Cannot pass compressed stanza to decodeStanzaDebug");return X(t)},t.enableXMLFormat=function(){k=!0},t.encodeStanza=function(e){const t=e instanceof U?e:K(e),n=new o.Binary;Y(t,n);const r=n.readByteArray(),i=new Uint8Array(1+r.length);return i[0]=0,i.set(r,1),i},t.extractParticipantJid=function(e){switch(e.type){case"group":case"status":case"broadcast":return e.author;default:return e.type,null}},t.extractToJid=ne,t.generateId=function(){if(!M){const e=new Uint16Array(2);(0,a.getCrypto)().getRandomValues(e),M=`${String(e[0])}.${String(e[1])}-`}return`${M}${P++}`},t.makeStanza=K,t.makeWapNode=x,t.wap=void 0;var i=r(n(7537)),o=n(89323),a=n(47784),s=r(n(82065)),l=n(44037),u=n(22101),c=n(75556),d=n(74493),p=n(40471),f=r(n(78132)),_=n(63260);const g=l.MSGR_USER_DOMAIN.replace("@",""),h=l.WA_USER_DOMAIN.replace("@",""),A=l.LID_DOMAIN.replace("@",""),m=l.INTEROP_DOMAIN.replace("@",""),E=l.HOSTED_DOMAIN.replace("@",""),y=l.HOSTED_LID_SUFFIX,S=[236,237,238,239],v=248,I=249,T=["0","1","2","3","4","5","6","7","8","9","-",".","","","",""],b=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];let M="",P=1;const C={sentinel:"DROP_ATTR"};t.DROP_ATTR=C;const O=p.WapJid.create(null,"g.us");t.G_US=O;const R=p.WapJid.create(null,l.WA_SERVER_JID_SUFFIX);t.S_WHATSAPP_NET=R;const N=p.WapJid.create("status","broadcast");t.STATUS_BROADCAST=N;const w=p.WapJid.create(null,"newsletter");t.NEWSLETTER=w;const D=p.WapJid.create(null,"hosted");t.HOSTED=D;const L=p.WapJid.create(null,"hosted.lid");t.HOSTED_LID=L;const B={};let k=!1;const G=(0,c.newTextEncoder)();class U{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.tag=e,this.attrs=t,this.content=n}toString(){let e="<"+this.tag;e+=(0,_.attrsToString)(this.attrs);const t=this.content;return Array.isArray(t)?e+=`>${t.map(String).join("")}</${this.tag}>`:e+=t?`>${(0,_.uint8ArrayToDebugString)(t)}</${this.tag}>`:" />",k&&(e=(0,f.default)(e)),e}}function x(e,t,n){let r=null;if(t&&null!=t.children)throw(0,s.default)('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(n))r=n.filter(Boolean);else if("string"==typeof n)r=o.Binary.build(n).readByteArray();else if(n instanceof ArrayBuffer)r=new Uint8Array(n);else if(n instanceof Uint8Array)r=n;else{const e=[];for(let t=2;t<arguments.length;t++){const n=arguments[t];n&&e.push(n)}r=e}Array.isArray(r)&&0===r.length&&(r=null);const i={};if(t){const n=t;Object.keys(n).forEach((t=>{if(["__self","__source"].includes(t))return;const r=n[t];if(null==r)throw(0,s.default)(`Attr ${t} in <${e}> is null`);r!==C&&(i[t]=r)}))}return new U(e,i,r)}t.WapNode=U;const F=x;function K(e){let t=e.content;return Array.isArray(t)?t=t.map(K):"string"==typeof t&&(t=o.Binary.build(t).readByteArray()),new U(e.tag,e.attrs||B,t)}function Y(e,t){if(null==e)t.writeUint8(0);else if(e instanceof U)j(e,t);else if(e instanceof p.WapJid)!function(e,t){const n=e.getInnerJid();if(n.type===p.WAP_JID_SUBTYPE.JID_U){const{user:e,device:r,domainType:i}=n;t.writeUint8(247),t.writeUint8(i),t.writeUint8(r),Y(e,t)}else if(n.type===p.WAP_JID_SUBTYPE.JID_FB){const{user:e,device:r}=n;t.writeUint8(246),Y(e,t),t.writeUint16(r),Y(g,t)}else if(n.type===p.WAP_JID_SUBTYPE.JID_INTEROP){const{user:e,device:r,integrator:i}=n;t.writeUint8(245),Y(e,t),t.writeUint16(r),t.writeUint16(i)}else{const{user:e,server:r}=n;t.writeUint8(250),null!=e?Y(e,t):t.writeUint8(0),Y(r,t)}}(e,t);else if("string"==typeof e)Q(e,t);else{if(!(e instanceof Uint8Array))throw(0,s.default)("Invalid payload type "+typeof e);!function(e,t){q(e.length,t),t.writeByteArray(e)}(e,t)}}function j(e,t){if(void 0===e.tag)return t.writeUint8(v),void t.writeUint8(0);let n=1;e.attrs&&(n+=2*Object.keys(e.attrs).length),e.content&&n++,n<256?(t.writeUint8(v),t.writeUint8(n)):n<65536&&(t.writeUint8(I),t.writeUint16(n)),Y(e.tag,t),e.attrs&&Object.keys(e.attrs).forEach((n=>{Q(n,t),Y(e.attrs[n],t)}));const r=e.content;if(Array.isArray(r)){r.length<256?(t.writeUint8(v),t.writeUint8(r.length)):r.length<65536&&(t.writeUint8(I),t.writeUint16(r.length));for(let e=0;e<r.length;e++)j(r[e],t)}else r&&Y(r,t)}let V,W;function H(e){const t=new Map;for(let n=0;n<e.length;n++)t.set(e[n],n);return t}function Q(e,t){if(""===e)return t.writeUint8(252),void t.writeUint8(0);null==V&&(V=H(d.SINGLE_BYTE_TOKEN));const n=V.get(e);if(null!=n)return void t.writeUint8(n+1);if(null==W){W=[];for(let e=0;e<d.DICTIONARIES.length;++e)W.push(H(d.DICTIONARIES[e]))}for(let n=0;n<W.length;++n){const r=W[n].get(e);if(null!=r)return t.writeUint8(S[n]),void t.writeUint8(r)}const r=(0,o.numUtf8Bytes)(e);if(r<128){if(!/[^0-9.-]+?/.exec(e))return void $(e,255,t);if(!/[^0-9A-F]+?/.exec(e))return void $(e,251,t)}q(r,t),t.writeString(e)}function $(e,t,n){const r=e.length%2==1;n.writeUint8(t);let i=Math.ceil(e.length/2);r&&(i|=128),n.writeUint8(i);let o=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);let a=null;if(48<=i&&i<=57?a=i-48:255===t?45===i?a=10:46===i&&(a=11):251===t&&65<=i&&i<=70&&(a=i-55),null==a)throw(0,s.default)(`Cannot nibble encode ${i}`);r%2==0?(o=a<<4,r===e.length-1&&(o|=15,n.writeUint8(o))):(o|=a,n.writeUint8(o))}}function q(e,t){if(e<256)t.writeUint8(252),t.writeUint8(e);else if(e<1048576)t.writeUint8(253),t.writeUint8(e>>>16&255),t.writeUint8(e>>>8&255),t.writeUint8(255&e);else{if(!(e<4294967296))throw(0,s.default)(`Binary with length ${e} is too big for WAP protocol`);t.writeUint8(254),t.writeUint32(e)}}function J(e,t){const n=e.readUint8();if(0===n)return null;if(n===v)return z(e,e.readUint8());if(n===I)return z(e,e.readUint16());if(252===n){const n=e.readUint8();return ee(e,n,t)}if(253===n){const n=e.readUint8(),r=e.readUint8(),i=e.readUint8();return ee(e,((15&n)<<16)+(r<<8)+i,t)}if(254===n){const n=e.readUint32();return ee(e,n,t)}if(250===n)return function(e){const t=function(e){const t=J(e,!0);if(null!=t&&"string"!=typeof t)throw(0,s.default)("WAWap:decodeNullableString got invalid value, string expected");return t}(e),n=Z(e);return p.WapJid.create(t,n)}(e);if(246===n)return function(e){const t=Z(e),n=e.readUint16();return Z(e),p.WapJid.createFbJid(t,n)}(e);if(245===n)return function(e){const t=Z(e),n=e.readUint16(),r=e.readUint16();return Z(e),p.WapJid.createInteropJid(t,n,r)}(e);if(247===n)return function(e){let t=null;const n=e.readUint8();if(0===n)t=p.DomainType.WHATSAPP;else if(1===n)t=p.DomainType.LID;else if(0==(1&n)&&0!=(128&n))t=p.DomainType.HOSTED;else{if(129!==n)throw(0,s.default)(`decodeJidU - Invalid domain type encoding ${n}`);t=p.DomainType.HOSTED_LID}const r=e.readUint8(),i=Z(e);return p.WapJid.createJidU(i,t,r)}(e);if(255===n){const t=e.readUint8();return te(e,T,t>>>7,127&t)}if(251===n){const t=e.readUint8();return te(e,b,t>>>7,127&t)}if(n<=0||n>=240)throw(0,s.default)("Unable to decode WAP buffer");if(n>=236&&n<=239){const t=n-236,r=d.DICTIONARIES[t];if(void 0===r)throw(0,s.default)(`Missing WAP dictionary ${t}`);const i=e.readUint8(),o=r[i];if(void 0===o)throw(0,s.default)(`Invalid value index ${i} in dict ${t}`);return o}const r=d.SINGLE_BYTE_TOKEN[n-1];if(void 0===r)throw(0,s.default)(`Undefined token with index ${n}`);return r}function z(e,t){const n=[];for(let r=0;r<t;r++)n.push(X(e));return n}function X(e){const t=e.readUint8();let n,r;if(t===v)n=e.readUint8();else{if(t!==I)throw(0,s.default)(`Failed to decode node since type byte ${String(t)} is invalid`);n=e.readUint16()}let i=null;if(0===n)throw(0,s.default)("Failed to decode node, list cannot be empty");const o=Z(e);for(n-=1;n>1;){r||(r={});const t=Z(e),i=J(e,!0);r[t]=i,n-=2}return 1===n&&(i=J(e,!1),i instanceof p.WapJid&&(i=String(i)),"string"==typeof i&&(i=G.encode(i))),new U(o,r,i)}function Z(e){const t=J(e,!0);if("string"!=typeof t)throw(0,s.default)("WAWap:decodeString got invalid value, string expected");return t}function ee(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e.readString(t):e.readByteArray(t)}function te(e,t,n,r){const i=new Array(2*r-n);for(let n=0;n<i.length-1;n+=2){const r=e.readUint8();i[n]=t[r>>>4],i[n+1]=t[15&r]}if(n){const n=e.readUint8();i[i.length-1]=t[n>>>4]}return i.join("")}function ne(e){switch(e.type){case"group":return e.groupJid;case"status":return l.STATUS_JID;case"device":return e.deviceJid;case"newsletter":return e.newsletterJid;case"hosted":return e.hostedDeviceJid;case"hostedLid":return e.hostedLidDeviceJid;default:return e.type,e.broadcastJid}}function re(e){const t=(0,l.validateDomainJid)(e);if(null!=t)return ie(t);const n=e.split("@");let r=n[0];const i=n[1];let o=null,a=null;if(i!==h&&i!==g&&i!==m&&i!==A&&i!==E&&i!==y||-1!==r.indexOf(":")&&([r,o]=r.split(":"),a=parseInt(o,10)),i===m){const[e,t]=r.split("-");return p.WapJid.createInteropJid(t,a,parseInt(e,10))}if(i===g)return p.WapJid.createFbJid(r,a);let u=null;if(i===A)u=p.DomainType.LID;else if(i===E){if(99!==a)throw(0,s.default)("wid unexpected deviceId");u=p.DomainType.HOSTED}else if(i===y){if(99!==a)throw(0,s.default)("lid invalid deviceId");u=p.DomainType.HOSTED_LID}else u=p.DomainType.WHATSAPP;return null!=a&&0!==a?p.WapJid.createJidU(r,u,a):p.WapJid.create(r,i)}function ie(e){return"s.whatsapp.net"===e?R:"g.us"===e?O:"newsletter"===e?w:(0,i.default)(e)}t.wap=F},56389:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(54302)({SupportContactForm:3,CtwaGetContext:4,QueryOrder:5,CreateOrder:10,RefreshCart:11,CatalogGetProductList:21,SetCatalogVisibility:23,CommerceSettingsSet:25,CatalogGetSingleCollection:30,CatalogGetCollections:35,CatalogCreateCollection:36,CatalogUpdateCollection:40,CatalogDeleteCollections:43,CatalogAppealCollection:48,BizGetPublicKey:52,MerchantGetComplianceInfo:53,MerchantSetComplianceInfo:54,CatalogVerifyPostcode:70,BtmCustomUrlGet:78,BtmCustomUrlGetUser:79,QuerySubscription:90,UpdateCollectionList:92});t.default=r},40471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WapJid=t.WAP_JID_SUBTYPE=t.DomainType=void 0;var r=n(44037);const i={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4};t.WAP_JID_SUBTYPE=i;const o=n(54302)({WHATSAPP:0,LID:1,HOSTED:128,HOSTED_LID:129});t.DomainType=o;class a{constructor(e){this._jid=e}static createAD(e,t,n){return new a({type:i.JID_AD,user:e,device:null==n?0:n,agent:null==t?0:t,domainType:o.WHATSAPP})}static createJidU(e,t,n){return new a({type:i.JID_U,user:e,device:null==n?0:n,domainType:null==t?o.WHATSAPP:t})}static createFbJid(e,t){return new a({type:i.JID_FB,user:e,device:null==t?0:t})}static createInteropJid(e,t,n){return new a({type:i.JID_INTEROP,user:e,device:null==t?0:t,integrator:n})}static create(e,t){return new a({type:i.JID,user:e,server:t})}toString(){if(this._jid.type===i.JID_AD||this._jid.type===i.JID_U){const{user:e,device:t,domainType:n}=this._jid;let i="";return i=n===o.WHATSAPP?r.WA_USER_JID_SUFFIX:n===o.HOSTED?r.HOSTED_SUFFIX:n===o.HOSTED_LID?r.HOSTED_LID_SUFFIX:r.LID_SUFFIX,0===t?`${e}@${i}`:`${e}:${t}@${i}`}if(this._jid.type===i.JID_FB){const{user:e,device:t}=this._jid;return`${e}:${t}@${r.MSGR_USER_JID_SUFFIX}`}if(this._jid.type===i.JID_INTEROP){const{user:e,device:t,integrator:n}=this._jid;return`${n}-${e}:${t}@${r.INTEROP_USER_JID_SUFFIX}`}{this._jid.type;const{user:e,server:t}=this._jid;return null!=e?`${e}@${t}`:t}}getInnerJid(){return this._jid}}t.WapJid=a},2379:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.AesCbcStream=t.AES_CBC_BLOCK_SIZE=void 0,t.aesCbcDecrypt=h,t.aesCbcDecryptSplit=function(e,t){return Promise.resolve().then((()=>{const n=t.slice(0,16),r=t.slice(16);return h(e,n,r)}))},t.aesCbcEncrypt=function(e,t,n){return Promise.resolve().then((()=>{const r=_(n),i=p(r);return Promise.resolve(f(e)).then((e=>(0,a.getCrypto)().subtle.encrypt(i,e,t))).then((e=>(0,u.concatTypedArrays)(Uint8Array,[r,new Uint8Array(e)]).buffer))}))},t.aesCbcEncryptChunk=m,t.aesCbcEncryptWithChunking=function(){return A.apply(this,arguments)},t.getIv=_,t.importRawKey=f;var i=r(n(11504)),o=n(89323),a=n(47784),s=r(n(82065)),l=n(50029),u=n(58358);const c=16;t.AES_CBC_BLOCK_SIZE=c;const d=16777216;function p(e){return{name:"AES-CBC",iv:(0,l.castTypedArrays)(Uint8Array,e)}}function f(e){return(0,a.getCrypto)().subtle.importKey("raw",(0,l.castTypedArrays)(Uint8Array,e),"AES-CBC",!1,["encrypt"])}function _(e){if(e)return(0,l.castTypedArrays)(Uint8Array,e);const t=new Uint8Array(16);return(0,a.getCrypto)().getRandomValues(t),t}function g(e){const t=e.byteLength,n=c-t%c;return Number.isNaN(n)?t:t+n}function h(e,t,n){const r=p(t);return Promise.resolve((0,a.getCrypto)().subtle.importKey("raw",(0,l.castTypedArrays)(Uint8Array,e),"AES-CBC",!1,["decrypt"])).then((e=>(0,a.getCrypto)().subtle.decrypt(r,e,n)))}function A(){return(A=(0,i.default)((function*(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;if(r%c!=0)throw(0,s.default)(`chunkSize must be a multiple of 16, ${r} received`);const i=yield f(e),o=new Uint8Array(t),a=Math.ceil(o.byteLength/r),l=_(n),u=new Uint8Array(g(o)+l.byteLength);u.set(l);for(let e,t=0,n=l;t<a;t++){const s=t===a-1,c=t*r;e=o.subarray(c,c+r);const{encryptedChunk:d,nextIv:p}=yield m(s,e,n,i);u.set(d,l.byteLength+t*r),n=p}return u.buffer}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t,n,r){const i=yield(0,a.getCrypto)().subtle.encrypt(p(n),r,t).then((t=>e?new Uint8Array(t):new Uint8Array(t).subarray(0,-16))),o=i.slice(-16);return{encryptedChunk:i,nextIv:o}}))).apply(this,arguments)}t.AesCbcStream=class{constructor(e,t,n,r){this._input=null,this._finished=!1,this._output=e,this._type=t,this._rawKey=n;const i={name:"AES-CBC",iv:r};this._promise=(0,a.getCrypto)().subtle.importKey("raw",n,"AES-CBC",!1,[t]).then((e=>({algo:i,key:e})))}append(e){let t;this._throwIfFinished("append");const n=this._input;if(n)if(n.writeByteArray(e),n.size()>1024){const e=n.size()%c;t=n.readByteArray(n.size()-e),n.size()||(this._input=null)}else t=null;else if(e.length>1024){const n=e.length%c;n?(this._input=new o.Binary(e),t=this._input.readByteArray(e.length-n)):t=e}else this._input=new o.Binary(e),t=null;const r=t;return r&&(this._promise=this._promise.then((e=>{let{key:t,algo:n}=e;if("encrypt"===this._type)return(0,a.getCrypto)().subtle.encrypt(n,t,r).then((e=>(this._output.writeByteArray(new Uint8Array(e,0,e.byteLength-c)),new Uint8Array(e,e.byteLength-32,c))));{const e=r.slice(-16);return(0,a.getCrypto)().subtle.decrypt(n,t,r).then((t=>(this._output.writeBuffer(t),e)))}})).then((e=>{const t={name:"AES-CBC",iv:e};return(0,a.getCrypto)().subtle.importKey("raw",this._rawKey,"AES-CBC",!1,[this._type]).then((e=>({algo:t,key:e})))}))),this._promise.then((()=>{}))}finalize(e){let t;if(this._throwIfFinished("finalize"),this._input){const n=this._input;e&&n.writeByteArray(e),t=n.readByteArray(),this._input=null}else e&&(t=e);if(t){const e=t;return this._promise.then((t=>{let{algo:n,key:r}=t;return"encrypt"===this._type?(0,a.getCrypto)().subtle.encrypt(n,r,e):(0,a.getCrypto)().subtle.decrypt(n,r,e)})).then((e=>{this._output.writeBuffer(e)}))}return this._promise.then((()=>{}))}_throwIfFinished(e){if(this._finished)throw(0,s.default)(`AesCbcStream.${e} called after finalize`)}}},70362:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.gcmDecrypt=function(){return l.apply(this,arguments)},t.gcmEncrypt=function(){return s.apply(this,arguments)};var i=r(n(11504)),o=n(89323),a=n(47784);function s(){return(s=(0,i.default)((function*(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16;const o={name:"AES-GCM",iv:c(t),tagLength:8*i};return null!=r&&(o.additionalData=c(r)),(0,a.getCrypto)().subtle.encrypt(o,yield u(e),n)}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16;const o={name:"AES-GCM",iv:c(t),tagLength:8*i};return null!=r&&(o.additionalData=c(r)),(0,a.getCrypto)().subtle.decrypt(o,yield u(e),n)}))).apply(this,arguments)}function u(e){return(0,a.getCrypto)().subtle.importKey("raw",e,"AES-GCM",!1,["encrypt","decrypt"])}function c(e){if(e instanceof Uint8Array)return e;if("string"==typeof e){const t=new o.Binary;return t.writeString(e),t.readByteArray()}return new Uint8Array(e)}},18445:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Curve25519=void 0;t.Curve25519=class{constructor(e,t){this.signalDependencies=e,this.keyPair=t?Promise.resolve(t):this.signalDependencies.generateIdentityKeyPair()}generatePublicKey(){return this.keyPair.then((e=>e.publicKey))}generateSharedSecret(e){return this.keyPair.then((t=>{let{privateKey:n}=t;return __LOG__(2)`Curve25519.generateSharedSecret pubkey:${e}`,this.signalDependencies.calculateAgreement(new Uint8Array(e),n)}))}}},7280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CURVE25519_SIGNAL_DEPENDENCIES=void 0,t.calculateAgreement=a;var r=n(65461),i=n(39876),o=n(75739);function a(e,t){return Promise.resolve().then((()=>(0,r.scalarMult)((0,o.ensureSize)(t,32),(0,o.ensureSize)(e,32)).buffer))}const s={generateIdentityKeyPair:function(){return Promise.resolve().then((()=>(0,i.makeKeyPair)()))},calculateAgreement:a};t.CURVE25519_SIGNAL_DEPENDENCIES=s},47784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCrypto=function(){return i},t.setCrypto=function(e){i=e;(0,r.setPRNG)((function(t,n){let r;const i=new Uint8Array(n);for(r=0;r<n;r+=65536)e.getRandomValues(i.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)t[r]=i[r];for(let e=0;e<i.length;e++)i[e]=0}))};var r=n(14462);let i=self.crypto},73102:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.allocate=l,t.elligator=b,t.fieldElement=u,t.hashSha512=function(e,t,n){i.lowlevel.crypto_hash(e,t,n)},t.hashToPoint=function(e){return s((()=>function(e){const{unpack25519:t}=i.lowlevel,n=(0,i.hash)(e),r=(128&n[31])>>7;n[31]&=127;const o=u();t(o,n);const a=u();b(a,o);const s=f();!function(e,t,n){const{unpack25519:r,M:o}=i.lowlevel,a=u();r(a,I);const s=u();!function(e,t){const{Z:n,A:r,M:o}=i.lowlevel,a=p(),s=u(),l=u(),c=u();n(s,t,a),r(l,t,a),P(c,l),o(e,s,c)}(s,t);const c=u();A(c,t);const d=u();!function(e,t){const{unpack25519:n,pow2523:r,M:o,S:a}=i.lowlevel,s=u();n(s,E);const l=u();r(l,t);const c=u();o(c,t,l);const d=u();a(d,c);const p=u();o(p,c,s),m(c,p,1^(f=d,_=t,C(f,_)?0:1)),e.set(c);var f,_}(d,c);const f=u();o(f,t,a);const _=u();P(_,d);const g=u();o(g,f,_);const h=u();y(h,g),m(g,h,function(e){const{pack25519:t}=i.lowlevel,n=l(Uint8Array,32);return t(n,e),1&n[0]}(g)^n),e[0].set(g),e[1].set(s),e[2].set(p()),o(e[3],e[0],e[1])}(s,a,r);const c=f();return function(e,t){const n=[u(),u(),u(),u()],r=_();(function(e,t){const n=_();(function(e,t){e[0].set(t[0]),e[1].set(t[1]),e[2].set(t[2])})(n,t),v(e,n)})(n,t),S(r,n),v(n,r),S(r,n),v(n,r),function(e,t){const{M:n}=i.lowlevel;n(e[0],t[0],t[3]),n(e[1],t[1],t[2]),n(e[2],t[2],t[3]),n(e[3],t[0],t[1])}(e,n)}(c,s),c}(e)))},t.inv25519=P,t.modL=c,t.p3Element=f,t.pack=M,t.reduce=function(e,t){for(let n=0;n<64;++n)t[n]=e[n],e[n]=0;c(e,t),t.fill(0)},t.runInAllocationScope=s,t.scalarmultBase=function(e,t){const n=[u(),u(),u(),u()];i.lowlevel.scalarbase(n,t),M(e,n)},t.unpack=function(e,t){const n=f();if(0!==O(n,t))return-1;return function(e,t){y(e[0],t[0]),e[1].set(t[1]),e[2].set(t[2]),y(e[3],t[3])}(e,n),0},t.unpackneg=O;var i=n(65461),o=r(n(82065));let a=null;function s(e){const t=a;a=[];try{return e()}finally{var n;(null!==(n=a)&&void 0!==n?n:[]).forEach((e=>{e.fill(0)})),a=t}}function l(e,t){if(null==a)throw(0,o.default)("allocate called outside of active scope");return new e(t)}function u(e){const t=l(Float64Array,16);if(e){if(e.length>16)throw(0,o.default)("Incorrect initialiser array provided to the fieldElement");for(let n=0;n<e.length;n++)t[n]=e[n]}return t}function c(e,t){i.lowlevel.modL(e,t)}const d=()=>u([0]),p=()=>u([1]);function f(){return[u(),u(),u(),u()]}function _(){return[u(),u(),u()]}function g(e,t){let n=0,r=t;for(;r>0;){const t=r%65536;e[n]=t,r=(r-t)/65536,n++}}function h(e,t){const{S:n,M:r}=i.lowlevel,o=u([2]),a=u();n(a,t),r(e,o,a)}function A(e,t){const{S:n,M:r,A:o}=i.lowlevel,a=d(),s=p(),l=u(),c=u(),f=u(),_=u();g(a,486662),n(l,t),r(c,a,t),o(f,l,c),o(_,f,s),r(e,t,_)}function m(e,t,n){1===n&&e.set(t)}const E=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function y(e,t){const{Z:n}=i.lowlevel;n(e,d(),t)}function S(e,t){const{M:n}=i.lowlevel;n(e[0],t[0],t[3]),n(e[1],t[1],t[2]),n(e[2],t[2],t[3])}function v(e,t){const{S:n,A:r,Z:o}=i.lowlevel;n(e[0],t[0]),n(e[2],t[1]),h(e[3],t[2]),r(e[1],t[0],t[1]);const a=u();n(a,e[1]),r(e[1],e[2],e[0]),o(e[2],e[2],e[0]),o(e[0],a,e[1]),o(e[3],e[3],e[2])}const I=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function T(e,t){const{M:n,A:r}=i.lowlevel,o=p(),a=d();g(a,486662);const s=u();h(s,t);const l=u();r(l,s,o);const c=u();P(c,l);const f=u();n(f,c,a);const _=u();y(_,f);const E=u();A(E,_);const S=function(e){const{S:t,M:n,pow2523:r,pack25519:o}=i.lowlevel,a=u(),s=u(),l=u(),c=u(),d=u();r(a,e),t(s,a),t(l,s),n(c,l,e),n(d,c,e);const p=new Uint8Array(32);return o(p,d),1&p[31]}(E),v=u([0]);m(v,a,S);const I=u();r(I,_,v);const T=u();y(T,I),m(I,T,S),e.set(I)}function b(e,t){return s((()=>T(e,t)))}function M(e,t){const n=u(),r=u(),o=u(),{M:a,pack25519:s}=i.lowlevel;P(o,t[2]),a(n,t[0],o),a(r,t[1],o),s(e,r);const l=new Uint8Array(32);s(l,n),e[31]^=(1&l[0])<<7}function P(e,t){const n=u();n.set(t);const{M:r,S:o}=i.lowlevel;for(let e=253;e>=0;--e)o(n,n),2!==e&&4!==e&&r(n,n,t);e.set(n)}function C(e,t){const{pack25519:n,crypto_verify_32:r}=i.lowlevel,o=new Uint8Array(32),a=new Uint8Array(32);return n(o,e),n(a,t),r(o,0,a,0)}function O(e,t){const{set25519:n,S:r,M:o,Z:a,A:s,D:l,unpack25519:c,pow2523:f}=i.lowlevel,_=u(),g=u(),h=u(),A=u(),m=u(),E=u(),y=u();return n(e[2],p()),c(e[1],t),r(h,e[1]),o(A,h,l),a(h,h,e[2]),s(A,e[2],A),r(m,A),r(E,m),o(y,E,m),o(_,y,h),o(_,_,A),f(_,_),o(_,_,h),o(_,_,A),o(_,_,A),o(e[0],_,A),r(g,e[0]),o(g,g,A),C(g,h)&&o(e[0],e[0],u([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])),r(g,e[0]),o(g,g,A),C(g,h)?-1:(function(e){const{pack25519:t}=i.lowlevel,n=new Uint8Array(32);return t(n,e),1&n[0]}(e[0])===t[31]>>7&&a(e[0],d(),e[0]),o(e[3],e[0],e[1]),0)}},70238:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.expand=l,t.extractAndExpand=function(e,t,n){return(0,o.extractSha256)(null,e).then((e=>l(new Uint8Array(e),t,n)))},t.extractWithSaltAndExpand=function(e,t,n,r){return(0,o.extractSha256)(t,e).then((e=>l(new Uint8Array(e),n,r)))};var i=n(89323),o=n(83599),a=r(n(82065));const s=255*o.SHA256_BYTE_LENGTH;function l(e,t,n){if(n<0||n>s)return Promise.reject((0,a.default)(`HKDF::expand given bad length ${n}`));let r;const l=Math.ceil(n/o.SHA256_BYTE_LENGTH),u=i.Binary.build(t).readByteArray(),c=new i.Binary;let d=(0,o.encodeKeySha256)(e).then((e=>(r=e,new Uint8Array(0))));for(let e=1;e<=l;e++)d=d.then((t=>(0,o.sign)(r,i.Binary.build(t,u,e).readByteArray()))).then((e=>{const t=new Uint8Array(e);return c.writeByteArray(t),t}));return d.then((()=>c.readBuffer(n)))}},83599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA256_BYTE_LENGTH=t.DEFAULT_SALT=void 0,t.encodeKeySha256=function(e){return u(a,e)},t.extractSha256=function(e,t){return u(a,null!=e?e:o).then((e=>c(e,t)))},t.hmacSha1=function(e,t,n){return u(l,e).then((e=>c(e,t,n)))},t.hmacSha256=function(e,t,n){return u(a,e).then((e=>c(e,t,n)))},t.hmacSha512=function(e,t,n){return u(s,e).then((e=>c(e,t,n)))},t.sign=c;var r=n(47784),i=n(50029);t.SHA256_BYTE_LENGTH=32;const o=new Uint8Array(32);t.DEFAULT_SALT=o;const a={name:"HMAC",hash:"SHA-256"},s={name:"HMAC",hash:"SHA-512"},l={name:"HMAC",hash:"SHA-1"};function u(e,t){const n=(0,i.castTypedArrays)(Uint8Array,t);return(0,r.getCrypto)().subtle.importKey("raw",n,e,!1,["sign"]).then((t=>({key:t,algo:e})))}function c(e,t,n){let{key:i,algo:o}=e;return(0,r.getCrypto)().subtle.sign(o,i,t).then((e=>null!=n&&0!==n?e.slice(0,n):e))}},17242:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.LtHash16=t.LT_HASH_ANTI_TAMPERING=t.KEY_LENGTH_BYTES=t.EMPTY_LT_HASH=void 0;var i=r(n(11504)),o=n(70238);const a=128;t.KEY_LENGTH_BYTES=a;const s=new ArrayBuffer(a);t.EMPTY_LT_HASH=s;class l{constructor(e){this.salt=e}add(e,t){var n=this;return t.reduce(function(){var e=(0,i.default)((function*(e,t){return n._addSingle(yield e,t)}));return function(){return e.apply(this,arguments)}}(),Promise.resolve(e))}subtract(e,t){var n=this;return t.reduce(function(){var e=(0,i.default)((function*(e,t){return n._subtractSingle(yield e,t)}));return function(){return e.apply(this,arguments)}}(),Promise.resolve(e))}subtractThenAdd(e,t,n){var r=this;return(0,i.default)((function*(){const i=yield r.subtract(e,n);return{ltHash:yield r.add(i,t),subtractResult:i}}))()}_addSingle(e,t){var n=this;return(0,i.default)((function*(){const r=yield(0,o.extractAndExpand)(t,n.salt,a);return n.performPointwiseWithOverflow(e,r,((e,t)=>e+t))}))()}_subtractSingle(e,t){var n=this;return(0,i.default)((function*(){const r=yield(0,o.extractAndExpand)(t,n.salt,a);return n.performPointwiseWithOverflow(e,r,((e,t)=>e-t))}))()}performPointwiseWithOverflow(e,t,n){const r=new DataView(e),i=new DataView(t),o=new ArrayBuffer(r.byteLength),a=new DataView(o);for(let e=0;e<r.byteLength;e+=2)a.setUint16(e,n(r.getUint16(e,!0),i.getUint16(e,!0)),!0);return o}}t.LtHash16=l;const u=new l("WhatsApp Patch Integrity");t.LT_HASH_ANTI_TAMPERING=u},71808:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.unpadPkcs7=function(e){if(0===e.length)throw(0,o.default)("unpadPkcs7 given empty bytes");const t=e[e.length-1];if(t>e.length)throw(0,o.default)(`unpadPkcs7 given ${e.length} bytes, but pad is ${t}`);return new Uint8Array(e.buffer,e.byteOffset,e.length-t)},t.writePad=a,t.writeRandomPad=function(e){const t=new Uint8Array(1);do{(0,i.getCrypto)().getRandomValues(t)}while(0===t[0]);a(e,t[0])},t.writeRandomPadMax16=function(e){const t=new Uint8Array(1);(0,i.getCrypto)().getRandomValues(t),a(e,1+(15&t[0]))};var i=n(47784),o=r(n(82065));function a(e,t){for(let n=0;n<t;n++)e.writeUint8(t)}},65461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hash",{enumerable:!0,get:function(){return r.hash}}),t.lowlevel=t.keypairFromSecretKey=t.keyPair=void 0,Object.defineProperty(t,"scalarMult",{enumerable:!0,get:function(){return r.scalarMult}}),t.signDetachedVerify=void 0,Object.defineProperty(t,"verify",{enumerable:!0,get:function(){return r.verify}});var r=n(14462);const i={scalarbase:r.lowlevel.scalarbase,crypto_hash:r.lowlevel.crypto_hash,modL:r.lowlevel.modL,pack25519:r.lowlevel.pack25519,S:r.lowlevel.S,M:r.lowlevel.M,A:r.lowlevel.A,Z:r.lowlevel.Z,D:r.lowlevel.D,unpack25519:r.lowlevel.unpack25519,pow2523:r.lowlevel.pow2523,crypto_verify_32:r.lowlevel.crypto_verify_32,set25519:r.lowlevel.set25519,add:r.lowlevel.add,scalarmult:r.lowlevel.scalarmult};t.lowlevel=i;const o=r.box.keyPair.fromSecretKey;t.keypairFromSecretKey=o;const a=r.box.keyPair;t.keyPair=a;const s=r.sign.detached.verify;t.signDetachedVerify=s},15720:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha256=o,t.sha256Base64=a,t.sha256Str=function(e){return a(function(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)n[t]=e.charCodeAt(t);return t}(e))};var r=n(62089),i=n(47784);function o(e){return Promise.resolve((0,i.getCrypto)().subtle.digest({name:"SHA-256"},e))}function a(e){return Promise.resolve(o(e).then(r.encodeB64))}},25204:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UseCaseSecretModificationType=void 0,t.createUseCaseSecret=function(e){const{messageSecret:t,stanzaId:n,parentMsgOriginalSender:o,modificationSender:a,modificationType:s}=e,l=r.Binary.build(n,o,a,s).readBuffer();return(0,i.extractAndExpand)(t instanceof ArrayBuffer?new Uint8Array(t):t,l,32)};var r=n(89323),i=n(70238);const o=n(54302)({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit"});t.UseCaseSecretModificationType=o},75556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newTextDecoder=function(){return new o},t.newTextEncoder=function(){return new i},t.setTextDecoderClass=function(e){o=e},t.setTextEncoderClass=function(e){i=e};const n=TextEncoder,r=TextDecoder;let i=n,o=r},77095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobBuilder=void 0,t.definePersistedJob=function(){return new o([])};var r=n(29261),i=n(29987);class o{constructor(e){this.steps=e}step(e,t){return this._stepWithOptions(e,"function"==typeof t?{code:t}:t)}_stepWithOptions(e,t){const{stopRetryIf:n,requirements:l,code:u}=t;let c=s(l,u,n);if(n){const{timePassedSeconds:e,appCrashed:t,onStopRetry:o}=n,l=s(null,function(e){return(t,n,i)=>Promise.resolve(e(t,n,i)).then((e=>e instanceof r.InterruptJob?e:new r.InterruptJob(e)))}(o),n);null!=e&&(c=a(((t,n,r)=>{let{jobStartTime:o}=r;return(0,i.happenedWithin)(o,e)}),c,l)),t&&(c=a(((e,t,n)=>{let{afterCrash:r}=n;return!r}),c,l))}return new o([...this.steps,{stepName:e,info:c}])}finalStep(e,t){const n=this.step(e,t);return{end:()=>n.steps}}}function a(e,t,n){return(r,i,o)=>e(r,i,o)?t(r,i,o):n(r,i,o)}function s(e,t,n){const r={requirements:e,code:t,stopRetryIf:n};return()=>r}t.JobBuilder=o},85500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsatisfiableJobRequirement=t.JobRequirement=void 0,t.joinRequirements=function(e,t){const n=e.filter((e=>!e.isSatisfiable()));if(n.length>0){const e=n.map((e=>e.name));return r=>(null==t||t("unsatisfiable",e,r),n[0].waitUntilSatisfied())}let r=e.map((()=>Promise.resolve())),i=Promise.resolve(),o=null;const a=()=>{if(r.every(((t,n)=>t===e[n].waitUntilSatisfied())))return void(o=null);const t=[],n=e.map((e=>{const n=e.waitUntilSatisfied();return e.isSatisfied()||(t.push(e.name),n.then((()=>{const n=t.indexOf(e.name);t.splice(n,1)}))),n}));return r=n,o=t,Promise.all(n).then(a)};return e=>{if(null==o){const e=a();null!=e&&(i=i.then((()=>e)))}return null==t||t(null==o?"satisfied":"unsatisfied",o,e),i}};class n{constructor(e){this._waitingOn=Promise.resolve(),this._satisfied=!0,this._newBlockers=null,this._blockersFinished=()=>{const e=this._newBlockers;if(null!=e)return this._newBlockers=null,Promise.all(e).then(this._blockersFinished);this._satisfied=!0},this.name=e}addBlocker(e){const t=e.catch((e=>{__LOG__(4,void 0,new Error,!0)`JobRequirement[${this.name}] blocker errored ${e}`,SEND_LOGS("job-blocker-rejected")}));if(this._satisfied)this._satisfied=!1,this._waitingOn=Promise.all([this._waitingOn,t]).then(this._blockersFinished);else{const e=this._newBlockers;null!=e?e.push(t):this._newBlockers=[t]}}waitUntilSatisfied(){return this._waitingOn}isSatisfied(){return this._satisfied}isSatisfiable(){return!0}}t.JobRequirement=n;t.UnsatisfiableJobRequirement=class extends n{constructor(e){super(e),super.addBlocker(new Promise((()=>{})))}addBlocker(){}isSatisfiable(){return!1}}},29261:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.UNSTARTED_JOB=t.RetryOnBackoff=t.RequiresPage=t.PersistedJobManager=t.InterruptJob=t.FINISHED_JOB=void 0;var i=r(n(11504)),o=n(85500),a=n(39959),s=n(29987);class l{constructor(e){this.feature=e}toString(){return`RequiresPage: ${this.feature}`}}t.RequiresPage=l;class u{constructor(e){this.backoffOptions=e}toString(){return"RetryOnBackoff"}}t.RetryOnBackoff=u;class c{constructor(e){this.result=e}}t.InterruptJob=c;const d="$unstarted";t.UNSTARTED_JOB=d;const p="$finished";t.FINISHED_JOB=p;function f(e){return`Job[${e.jobId}] (${e.type})`}function _(e){return`Job[${e.jobId}] (${e.type}.${e.step})`}function g(e,t,n){"unsatisfiable"===e?__LOG__(2)`${_(n)} halting because of ${t}`:"unsatisfied"===e&&__LOG__(2)`${_(n)} waiting on ${t}`}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{jobStartTime:e.startTime,afterCrash:t,interruptJob:A}}function A(e){return new c(e)}t.PersistedJobManager=class{constructor(e){const{isRestartAfterCrash:t,accessors:n,unfinishedJobEntries:r}=e,i=new Map,o=r.then((e=>{const r=[],o=[];return e.forEach((e=>{e.stepHardStartCountAfterTimeout>=5?r.push(e):o.push(e)})),Promise.all(r.map((e=>{var t;return __LOG__(4,void 0,new Error,!0)`${t=e,`[Job ${t.type}] `}: stuck on the step ${e.step}, aborting the job`,SEND_LOGS(`job-stuck-${e.type}`),n.deletePersistedJob(e.jobId)}))).then((()=>{o.forEach((e=>{i.has(e.jobId)||(__LOG__(2)`${f(e)}: restarting`,i.set(e.jobId,this._runJob(e,t)))}))}))}));this.implementationLoaders=new Map,this.implementations=new Map,this.stepBlockers=new WeakMap,this.accessors=n,this.activeJobs=i,this.initialJobsPromise=o,this.listeners=e.listeners,this.deprecatedJobs=e.deprecatedJobs}loadAndRunJobFromId(e){const t=this.activeJobs.get(e);if(null!=t)return t;const n=this._loadAndRunJobFromId(e);return this.activeJobs.set(e,n),n}_loadAndRunJobFromId(e){var t=this;return(0,i.default)((function*(){const{initialJobsPromise:n,accessors:r}=t;yield n;const i=yield r.readPersistedJob(e);return i?t._runJob(i,!1):(__LOG__(3)`Persisted job missing for given ID`,null)}))()}_getJobImplementation(e){const{implementations:t,implementationLoaders:n}=this,r=t.get(e);if(r)return r;const i=n.get(e);if(!i)return null;const o=i();return t.set(e,o),o}_waitForBlockers(e,t){if(null==t||0===t.length)return Promise.resolve();const{stepBlockers:n}=this;let r=n.get(t);return null==r&&(r=(0,o.joinRequirements)(t.map((e=>e())),g),n.set(t,r)),r(e)}_runRemainingSteps(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;const{step:i}=e,o=t.findIndex((e=>e.stepName===i)),{requirements:a,code:l}=t[o].info(e.current,e.original,h(e,n));let u=this._waitForBlockers(e,a);return r&&(u=u.then(r)),u.then((()=>(__LOG__(2)`${_(e)}: running step`,l(e.current,e.original,h(e,n))))).then((r=>{if(r instanceof c)return __LOG__(2)`${_(e)}: InterruptJob`,r.result;const i=o+1;if(i>=t.length)return r;const a=t[i];return e.step=a.stepName,e.current=r,e.stepHardStartCountAfterTimeout=0,e.stepFirstStartTime=(0,s.unixTime)(),e.stepUnexpectedErrorCount=0,e.waitUntil=null,e.backedOffCount=0,this.accessors.updatePersistedJob(e).then((()=>this._runRemainingSteps(e,t,n)))}))}_runJob(e,t){var n=this;return(0,i.default)((function*(){var r;const{accessors:o,activeJobs:c,deprecatedJobs:g,listeners:{onJobFinished:A,onJobStarted:m}}=n;let E=yield n._getJobImplementation(e.type);const y=g[e.type];if(!E){if(!y)return __LOG__(4,void 0,new Error,!0)`No implementation for ${e.type}. Maybe it should have been put to the deprecated list?`,SEND_LOGS("missing-job-implementation"),yield o.deletePersistedJob(e.jobId),null;if("NOOP"===y)return __LOG__(3)`No implementation for deprecated ${e.type}, job deleted`,yield o.deletePersistedJob(e.jobId),null;E=yield y()}const S=E;y&&__LOG__(2)`Running deprecated job ${e.type}`;const v=null!==(r=e.stepFirstStartTime)&&void 0!==r?r:(0,s.unixTime)();if(e.stepFirstStartTime=v,e.stepUnexpectedErrorCount=e.stepUnexpectedErrorCount||0,e.backedOffCount=e.backedOffCount||0,e.step===p){let t=e.waitUntil;const r=(0,s.secondsUntil)(v);return null!=t&&(0,s.isInFuture)(t)&&r>0&&(__LOG__(2)`${f(e)}: skew detected, adjusting accordingly`,t=(0,s.castToUnixTime)(t-r),(0,s.isInFuture)(t)&&(e.stepFirstStartTime=(0,s.castToUnixTime)(v-r),e.waitUntil=t,yield n.accessors.updatePersistedJob(e))),null!=t&&(0,s.isInFuture)(t)||(__LOG__(2)`${f(e)}: removing completed, expired job from db`,yield o.deletePersistedJob(e.jobId)),c.delete(e.jobId),e.current}const I=e.step!==d?E.find((t=>t.stepName===e.step)):E[0];if(!I)return __LOG__(4,void 0,new Error,!0)`No implementation for ${e.type}.${e.step}`,SEND_LOGS("missing-job-step"),yield o.deletePersistedJob(e.jobId),null;e.step=I.stepName;const T=()=>{const r=e.waitUntil;let i=Promise.resolve();if(null!=r){const t=(0,s.futureUnixTime)(s.DAY_SECONDS);r>t?(__LOG__(2)`${_(e)}: trim wait from ${r} to ${t}`,e.waitUntil=t,i=n.accessors.updatePersistedJob(e).then((()=>(0,s.delayUntil)(t)))):(__LOG__(2)`${_(e)}: delaying until ${r}`,i=(0,s.delayUntil)(r))}return i.then((()=>n._runRemainingSteps(e,S,t,(()=>(e.waitUntil=null,(0,s.happenedWithin)(v,s.DAY_SECONDS)||e.stepHardStartCountAfterTimeout++,n.accessors.updatePersistedJob(e)))).catch((t=>{if(t instanceof l)return __LOG__(2)`${_(e)}: requires page`,e.stepHardStartCountAfterTimeout>0&&(--e.stepHardStartCountAfterTimeout,n.accessors.updatePersistedJob(e)),new Promise((()=>{}));if(t instanceof u){__LOG__(2)`${_(e)}: RetryOnBackoff`;const r=(0,a.getDelay)(++e.backedOffCount,t.backoffOptions);return e.waitUntil=(0,s.futureUnixTime)(Math.ceil(r/1e3)),e.stepHardStartCountAfterTimeout>0&&--e.stepHardStartCountAfterTimeout,n.accessors.updatePersistedJob(e).then(T)}if(e.stepUnexpectedErrorCount<1)return __LOG__(3)`${_(e)}: Unhandled exception. Tried ${e.stepUnexpectedErrorCount} times`,__LOG__(3)`${_(e)}: Unhandled exception: ${t}`,e.stepUnexpectedErrorCount++,n.accessors.updatePersistedJob(e).then(T);throw t}))))},b=T(),M=b.then(function(){var t=(0,i.default)((function*(t){__LOG__(2)`${_(e)}: finished job`;let r=null;try{r=A(e.jobId,e.type,e.original,t)}catch(t){__LOG__(4,void 0,new Error,!0)`onJobFinished for ${e.type} threw exception ${t}`,SEND_LOGS("onJobFinished-threw")}null!=r&&r>0?(e.waitUntil=(0,s.futureUnixTime)(Math.ceil(r/1e3)),e.step=p,e.current=t,e.stepFirstStartTime=(0,s.unixTime)(),yield n.accessors.updatePersistedJob(e)):(yield o.deletePersistedJob(e.jobId),c.delete(e.jobId))}));return function(){return t.apply(this,arguments)}}(),function(){var n=(0,i.default)((function*(n){__LOG__(4,void 0,new Error,!0)`${e.type} failed with error ${n}`,SEND_LOGS(`job-threw-exception-${e.type}`);const r=S.find((t=>t.stepName===e.step));if(r){const n=r.info(e.current,e.original,h(e,t));null!=n.stopRetryIf&&(yield n.stopRetryIf.onStopRetry(e.current,e.original,h(e,t)))}else __LOG__(4,void 0,new Error)`${e.type}: ${e.step} step not found`;yield o.deletePersistedJob(e.jobId),c.delete(e.jobId)}));return function(){return n.apply(this,arguments)}}());try{m(e.jobId,e.type,e.original)}catch(t){__LOG__(4,void 0,new Error,!0)`onJobStarted for ${e.type} threw exception ${t}`,SEND_LOGS("onJobStarted-threw")}return M.then((()=>b))}))()}addPersistedJobImplementation(e,t){const{implementationLoaders:n,deprecatedJobs:r}=this;if(n.has(e))return __LOG__(4,void 0,new Error,!0)`addPersistedJobImplementation called twice for ${e}`,void SEND_LOGS("repeat-job-loader");r&&r[e],n.set(e,t)}fireAndForget(e){this.accessors.maybeCreateJob(e).then((e=>{let{id:t}=e;return this.loadAndRunJobFromId(t)}))}waitUntilPersisted(e){return this.accessors.maybeCreateJob(e).then((e=>{let{id:t}=e;this.loadAndRunJobFromId(t)}))}waitUntilCompleted(e){return this.accessors.maybeCreateJob(e).then((e=>{let{id:t}=e;return this.loadAndRunJobFromId(t)}))}fireAndForgetNonPersisted(){__LOG__(2)`fireAndForgetNonPersisted not implemented in PersistedJobManager`}waitUntilCompletedNonPersisted(){return Promise.resolve((()=>__LOG__(2)`waitUntilCompletedNonPersisted not implemented in PersistedJobManager`))}}},75419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JOB_PRIORITY=t.DEFAULT_JOB_TIMEOUT_MS=t.DEFAULT_JOB_PRIORITY=t.DEFAULT_CONCURRENCY=void 0;const r=n(54302)({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});t.JOB_PRIORITY=r;t.DEFAULT_CONCURRENCY=1;const i=r.LOW;t.DEFAULT_JOB_PRIORITY=i;t.DEFAULT_JOB_TIMEOUT_MS=1e4},31758:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WAConcurrentBucketJobQueue=void 0;var i=r(n(11504)),o=r(n(73982)),a=n(62089),s=n(66911),l=r(n(82065)),u=n(75419),c=n(70453),d=n(9612),p=r(n(49619)),f=n(77689);const _=new Map([[u.JOB_PRIORITY.HIGH,5],[u.JOB_PRIORITY.LOW,1]]);t.WAConcurrentBucketJobQueue=class{constructor(){this._isInitialized=!1,this._maxThreadsCount=0,this._availableThreadsCount=0,this._bestEffortBucketWaitTimeoutSec=0,this._jobBucketsMap=new Map,this._remainingJobCountMap=new Map,this._jobQuotaConfig=new Map,this._initTimestampMs=0}init(e,t){var n,r,i,o,a,s;if(this._isInitialized)throw(0,l.default)("WAConcurrentBucketJobQueue has already initialized");this._bestEffortBucketWaitTimeoutSec=null!==(n=null==e?void 0:e.bestEffortWaitTimeoutSec)&&void 0!==n?n:30,this._maxThreadsCount=e.maxConcurrency,this._availableThreadsCount=e.maxConcurrency,this._jobLogger=t,this._jobQuotaConfig=this._getMergedQuotaConfig(null==e?void 0:e.jobPrioritiesQuota),this._remainingJobCountMap=new Map(this._jobQuotaConfig),this._jobBucketsMap=new Map,this._initTimestampMs=Date.now();const d=new c.BaseJobBucket({jobMaxConcurrencyMap:null!==(r=e.maxConcurrencyPerJob)&&void 0!==r?r:{}}),p=new c.LowJobBucket({jobMaxConcurrencyMap:null!==(i=e.maxConcurrencyPerJob)&&void 0!==i?i:{}}),f=new c.LowJobBucket({jobMaxConcurrencyMap:null!==(o=e.maxConcurrencyPerJob)&&void 0!==o?o:{}}),_=new c.BaseJobBucket({jobMaxConcurrencyMap:null!==(a=e.maxConcurrencyPerJob)&&void 0!==a?a:{}}),g=new c.BaseJobBucket({jobMaxConcurrencyMap:null!==(s=e.maxConcurrencyPerJob)&&void 0!==s?s:{}});this._jobBucketsMap.set(u.JOB_PRIORITY.UI_ACTION,d),this._jobBucketsMap.set(u.JOB_PRIORITY.HIGH,d),this._jobBucketsMap.set(u.JOB_PRIORITY.OFFLINE,_),this._jobBucketsMap.set(u.JOB_PRIORITY.HISTORY_SYNC,g),this._jobBucketsMap.set(u.JOB_PRIORITY.LOW,p),this._jobBucketsMap.set(u.JOB_PRIORITY.BEST_EFFORT,f),this._isInitialized=!0}updateConfig(e){this._availableThreadsCount+=e.maxConcurrency-this._maxThreadsCount,this._maxThreadsCount=e.maxConcurrency,this._jobBucketsMap.forEach((t=>{var n;return t.updateConfig({jobMaxConcurrencyMap:null!==(n=e.maxConcurrencyPerJob)&&void 0!==n?n:{}})})),this._jobQuotaConfig=this._getMergedQuotaConfig(null==e?void 0:e.jobPrioritiesQuota),__LOG__(2)`[job-orchestator]: updated WAConcurrentBucketJobQueue config`}isInitialized(){return this._isInitialized}clearQueue(){if(!this._isInitialized)throw(0,l.default)("WAConcurrentBucketJobQueue not initialized");this._jobBucketsMap.forEach((e=>e.clear()))}clearQueueByPriority(e){var t;if(!this._isInitialized)throw(0,l.default)("WAConcurrentBucketJobQueue not initialized");null===(t=this._jobBucketsMap.get(e))||void 0===t||t.clearWaitingTasks()}getIntStats(){const e=e=>{var t,n;const r=this._jobBucketsMap.get(e);return(null!==(t=null==r?void 0:r.count())&&void 0!==t?t:0)+(null!==(n=null==r?void 0:r.pendingCount())&&void 0!==n?n:0)};return{highPriorityBucketSize:e(u.JOB_PRIORITY.HIGH),lowPriorityBucketSize:e(u.JOB_PRIORITY.LOW),bestEffortPriorityBucketSize:e(u.JOB_PRIORITY.BEST_EFFORT)}}getStringStats(){const e=e=>{var t,n;const r=null!==(t=null===(n=this._jobBucketsMap.get(e))||void 0===n?void 0:n.getStats())&&void 0!==t?t:{},[,i]=Object.keys(r).reduce(((e,t)=>{let[n,i]=e;const o=r[t];return o>n?[o,t]:[n,i]}),[0,null]);return i};return{highPriorityMaxJob:e(u.JOB_PRIORITY.HIGH),lowPriorityMaxJob:e(u.JOB_PRIORITY.LOW),bestEffortPriorityMaxJob:e(u.JOB_PRIORITY.BEST_EFFORT)}}enqueue(e,t,n,r){var c,p,f=this;if(!this._isInitialized)return Promise.reject((0,l.default)("WAConcurrentBucketJobQueue not initialized"));let _,g;const h=new Promise(((e,t)=>{_=e,g=t})),A=(0,o.default)({priority:u.DEFAULT_JOB_PRIORITY},n),m=this.getJobBucketByType(A.priority);if(!m)return Promise.reject((0,l.default)(`WAConcurrentBucketJobQueue no bucket for job with name ${e} was found.`));(0,d.getEventLoopDelay)().then((e=>{(null==r?void 0:r.isActive())&&(null==r||r.addPoint("measure_event_loop_delay",{int:{eventLoopDelay:e}}))})),null==r||r.addPoint("scheduling_job",{string:(0,o.default)((0,o.default)({},this.getStringStats()),{},{priority:A.priority}),int:(0,o.default)((0,o.default)({},this.getIntStats()),{},{maxTimeoutMs:null!==(c=null==n?void 0:n.maxTimeoutMs)&&void 0!==c?c:0})});const E=`${A.priority}-${e}-${null!==(p=null==n?void 0:n.jobId)&&void 0!==p?p:(0,a.randomBase64)(8)}`,y=m.add(e,A,E,(0,i.default)((function*(){try{f._jobLogger.logJobStarted(E);const e=yield f._promiseTimeoutWrapper(t(),null==n?void 0:n.maxTimeoutMs);f._jobLogger.logJobCompleted(E),_(e)}catch(e){e instanceof s.TimeoutError?f._jobLogger.logJobTimeout(E):f._jobLogger.logJobError(E),g(e)}})));return this._jobLogger.logJobCreated({jobId:E,jobName:e,jobPriority:A.priority,pendingJobsCount:m.count()}),n&&n.priority===u.JOB_PRIORITY.UI_ACTION&&this._runJobTask(y),this._runJobTasks(),h}getAvailableThreadsCount(){return this._availableThreadsCount}getJobQuotaConfig(){return this._jobQuotaConfig}getRemainingJobCountMap(){return this._remainingJobCountMap}getJobBucketByType(e){return this._jobBucketsMap.get(e)}getSnapshot(e){const t=this.getJobBucketByType(e);return t?t.getStats():null}_getMergedQuotaConfig(e){let t;return t=e?new Map(e):new Map(_),t.set(u.JOB_PRIORITY.BEST_EFFORT,0),t}_getJobsRemainingQuota(e){var t;return null!==(t=this._remainingJobCountMap.get(e))&&void 0!==t?t:0}_refreshJobsRemainingQuota(){this._remainingJobCountMap=new Map(this._jobQuotaConfig)}_getNextJobBucket(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0,n=null,r=0;this._jobBucketsMap.forEach(((e,i)=>{t+=null==e?void 0:e.count(),r+=this._getJobsRemainingQuota(i),null==n&&e.count()>0&&this._getJobsRemainingQuota(i)>0&&(n=e)}));const i=null==n||0===r;return i&&this._refreshJobsRemainingQuota(),this._shouldRunBestEffortBucket(t,i)?this.getJobBucketByType(u.JOB_PRIORITY.BEST_EFFORT):null==n&&e?this._getNextJobBucket(!1):n}_shouldRunBestEffortBucket(e,t){var n;function r(e,t){const n=Date.now();return!(e>n)&&n-e<1e3*t}const i=this.getJobBucketByType(u.JOB_PRIORITY.BEST_EFFORT),o=e-(null!==(n=null==i?void 0:i.count())&&void 0!==n?n:0),a=null==i?void 0:i.getLastJobStartedTimestamp();if(0===(null==i?void 0:i.count()))return!1;if(null==a&&r(this._initTimestampMs,this._bestEffortBucketWaitTimeoutSec)){if(null==this._bestEffortScheduledRun){const e=function(e,t){const n=Math.ceil(e-Date.now())+1e3*t;return n>0?n:0}(this._initTimestampMs,this._bestEffortBucketWaitTimeoutSec);this._bestEffortScheduledRun=setTimeout((()=>{this._runJobTasks(),this._bestEffortScheduledRun=null}),e)}return!1}return!(o>0&&null!=a&&r(a,this._bestEffortBucketWaitTimeoutSec))&&t}_getJobBucketByJobId(e){const t=this._getJobBucketTypeByJobId(e);return(0,p.default)(this._jobBucketsMap.get(t),"this._jobBucketsMap.get((type: JOB_PRIORITY))")}_getJobBucketTypeByJobId(e){const t=e.split("-")[0],n=u.JOB_PRIORITY.cast(t);if(!n)throw(0,l.default)(`ConcurrentBucketQueue cannot extract known job priority type from id: ${e}`);return n}_decrementJobsQuota(e){const t=this._getJobBucketTypeByJobId(e);this._getJobsRemainingQuota(t)>0?this._remainingJobCountMap.set(t,this._getJobsRemainingQuota(t)-1):this._remainingJobCountMap.set(t,0)}_runJobTasks(){for(;this._availableThreadsCount>0;){const e=this._getNextJobBucket(),t=null==e?void 0:e.next();if(null==t)break;t.forEach((e=>{this._decrementJobsQuota(e.jobId),this._runJobTask(e)}))}}_promiseTimeoutWrapper(e,t){return void 0!==t?(0,f.promiseTimeout)(e,t):e}_runJobTask(e){var t=this;return(0,i.default)((function*(){const n=t._getJobBucketByJobId(e.jobId);t._availableThreadsCount--,n.markJobTaskPending(e);const{run:r,jobId:i,jobName:o}=e;try{var a;yield t._promiseTimeoutWrapper(r(),void 0===(null===(a=e.jobInfo)||void 0===a?void 0:a.maxTimeoutMs)?u.DEFAULT_JOB_TIMEOUT_MS:void 0)}catch(e){if(!(e instanceof s.TimeoutError))throw e;t._jobLogger.logJobTimeout(i),__LOG__(2)`[job-orchestator]: ${o} exceeding the timeout, release the thread.`}finally{t._availableThreadsCount++,n.markJobTaskDone(i),t._availableThreadsCount>0&&setTimeout((()=>t._runJobTasks()),0)}}))()}}},81531:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WADefaultJobNoQueue=void 0;var i=r(n(11504)),o=r(n(82065)),a=n(65982),s=n(75419);t.WADefaultJobNoQueue=class{constructor(){this._isInitialized=!1}init(e,t){if(this._isInitialized)throw(0,o.default)("DefaultNoQueue has already initialized");this._jobLogger=t,this._isInitialized=!0}updateConfig(){}isInitialized(){return this._isInitialized}clearQueue(){}clearQueueByPriority(){}getSnapshot(){throw(0,o.default)("getSnapshot is not implemented for DefaultNoQueue")}enqueue(e,t,n){var r=this;return(0,i.default)((function*(){var i,o;const l=null!==(i=null==n?void 0:n.jobId)&&void 0!==i?i:(0,a.randomHex)(8).substr(0,64);r._jobLogger.logJobCreated({jobId:l,jobName:e,jobPriority:null!==(o=null==n?void 0:n.priority)&&void 0!==o?o:s.JOB_PRIORITY.LOW,pendingJobsCount:0});try{r._jobLogger.logJobStarted(l);const e=yield t();return r._jobLogger.logJobCompleted(l),e}catch(e){throw r._jobLogger.logJobError(l),e}}))()}}},70453:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LowJobBucket=t.BaseJobBucket=void 0;var r=n(75419);class i{constructor(e){var t;this.tasks=[],this.pendingTasks=[],this.lastJobStartedTimestampMs=null,this.jobMaxConcurrency=null!==(t=e.jobMaxConcurrencyMap)&&void 0!==t?t:{}}updateConfig(e){var t;this.jobMaxConcurrency=null!==(t=e.jobMaxConcurrencyMap)&&void 0!==t?t:{}}getStats(){return[...this.tasks,...this.pendingTasks].reduce(((e,t)=>{var n;const r=null!==(n=e[t.jobName])&&void 0!==n?n:0;return e[t.jobName]=r+1,e}),{})}next(){if(0===this.tasks.length)return null;const e=this.pendingTasks.reduce(((e,t)=>{var n;const r=null!==(n=e.get(t.jobName))&&void 0!==n?n:0;return e.set(t.jobName,r+1),e}),new Map),t=this.tasks.filter((t=>{var n,i;return(null!==(n=e.get(t.jobName))&&void 0!==n?n:0)<(null!==(i=this.jobMaxConcurrency[t.jobName])&&void 0!==i?i:r.DEFAULT_CONCURRENCY)}));return t.length>0?[t[0]]:null}add(e,t,n,r){const i={jobId:n,jobInfo:t,jobName:e,run:r};return this.tasks.push(i),i}markJobTaskPending(e){this.pendingTasks.includes((t=>t.jobId===e.jobId))&&(__LOG__(4,void 0,new Error,!0)`Assertion failed::markJobTaskPending found jobId: ${e.jobId} in pending tasks`,SEND_LOGS("JobOrchestrator::markJobTaskPending")),this.lastJobStartedTimestampMs=Date.now(),this.pendingTasks.push(e),this.tasks=this.tasks.filter((t=>t.jobId!==e.jobId))}markJobTaskDone(e){this.pendingTasks=this.pendingTasks.filter((t=>t.jobId!==e)),this.tasks.includes((t=>t.jobId===e))&&(__LOG__(4,void 0,new Error,!0)`Assertion failed::markJobTaskDone found jobId: ${e} in scheduled tasks`,SEND_LOGS("JobOrchestrator::markJobTaskDone"))}count(){return this.tasks.length}pendingCount(){return this.pendingTasks.length}clearWaitingTasks(){this.tasks=[]}clear(){this.tasks=[],this.pendingTasks=[]}getLastJobStartedTimestamp(){return this.lastJobStartedTimestampMs}}t.BaseJobBucket=i;t.LowJobBucket=class extends i{next(){var e,t;if(0===this.tasks.length)return null;const n=this.pendingTasks.reduce(((e,t)=>{var n;const r=null!==(n=e.get(t.jobName))&&void 0!==n?n:0;return e.set(t.jobName,r+1),e}),new Map),r=this.tasks.filter((e=>{var t,r;return(null!==(t=n.get(e.jobName))&&void 0!==t?t:0)<(null!==(r=this.jobMaxConcurrency[e.jobName])&&void 0!==r?r:1)}));if(0===r.length)return null;const i=null!==(e=this.jobMaxConcurrency[r[0].jobName])&&void 0!==e?e:1,o=null!==(t=n.get(r[0].jobName))&&void 0!==t?t:0;if(i>1&&o<i){const e=r.filter((e=>e.jobName===r[0].jobName)),t=Math.min(e.length,i-o);return e.slice(0,t)}return[r[0]]}}},72279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateFilehash=function(e){return(0,i.sha256Base64)(e)},t.getRandomFilehash=function(){const{buffer:e}=(0,r.getCrypto)().getRandomValues(new Uint8Array(20));return(0,i.sha256Base64)(e)};var r=n(47784),i=n(15720)},22101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decimalStringToLongInt=function(e){if(!/^-?\d+$/.test(e))throw __LOG__(2)`"${e}" is not a valid decimal string`,new Error("decimalStringToLongInt is given an invalid decimal string");const t="-"===e[0],n=e.replace(/^-?0*/,""),i=n.length;if(i<16||16===i&&n<="9007199254740991")return t?-Number(n):Number(n);if(i>20||20===i&&n>"18446744073709551615"||t&&(i>19||19===i&&n>"9223372036854775807"))throw __LOG__(2)`"${e}" is over 64 bits`,new Error("decimalStringToHexLong is given value over 64 bits");let o=0,a=0;for(let e=0;e<i;e++)o=10*o+Number(n[e]),a=10*a+Math.floor(o/4294967296),o%=4294967296;return(0,r.createHexLongFrom32Bits)(a,o,t)},t.isBiggerLongInt=function(e,t){if("number"==typeof e&&"number"==typeof t)return e>t;const n="number"==typeof e?(0,r.hexLongFromNumber)(e):e,i="number"==typeof t?(0,r.hexLongFromNumber)(t):t;return(0,r.isBiggerHexLong)(n,i)},t.longIntToDecimalString=function(e){if("number"==typeof e)return e.toString(10);const t=(0,r.hexLongToHex)(e),n=[0];let i=0;for(let e=0;e<t.length;e++){i=(0,r.hexAt)(t,e);for(let e=0;e<n.length;e++)n[e]=16*n[e]+i,i=n[e]/10|0,n[e]%=10;for(;i>0;)n.push(i%10),i=i/10|0}const o=n.reverse().join("");return(0,r.hexLongIsNegative)(e)?"-"+o:o},t.maybeNumberOrThrowIfTooLarge=void 0,t.numberOrThrowIfTooLarge=i;var r=n(65982);function i(e){if("number"!=typeof e)throw __LOG__(2)`${e} is not a safe integer`,new Error("numberOrThrowIfTooLarge is given a non-safe integer");return e}t.maybeNumberOrThrowIfTooLarge=e=>null==e?e:i(e)},22732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spec=void 0,t.compileSpec=function(e){if(e.internalCompiledSpec)return e.internalCompiledSpec;const t=e.internalSpec;if(!t)throw new Error(`Message Class ${String(e)} does not have internalSpec`);const n=e.internalDefaults||{},a=Object.keys(t).filter((e=>e!==r.KEYS.ONEOF)),s=new Array(a.length),l=[],u=[],c=new Array(a.length),d=t[r.KEYS.ONEOF]||{};a.sort(((e,n)=>{const r=o(t,e),i=o(t,n);return r[0]-i[0]}));for(let e=0;e<a.length;e++){const i=a[e],d=o(t,i);c[e]=n[i];const p=d[1],f=d[0];if(l.push(f),u.push(p),(p&r.TYPE_MASK)===r.TYPES.MESSAGE)s[e]=d[2];else if((p&r.TYPE_MASK)===r.TYPES.ENUM){const t=d[2];if("function"==typeof t.cast)s[e]=t;else{let n,r=!0,i=0;for(const e in t)r&&e!==i++&&(r=!1);if(r){n=[];for(let e=0;e<i;e++)n.push(!0)}else{n={};for(const e in t)n[t[e]]=!0}s[e]=n}}else s[e]=null}const p={};for(const e in d)d[e].forEach((t=>{p[t]||(p[t]=[]),p[t].push(e)}));const f=t[r.KEYS.RESERVED]&&t[r.KEYS.RESERVED][r.KEYS.RESERVED_TAGS],_=t[r.KEYS.RESERVED]&&t[r.KEYS.RESERVED][r.KEYS.RESERVED_FIELDS],g=new i(a,l,u,c,s,d,p,f,_);return e.internalCompiledSpec=g,g};var r=n(91451);class i{constructor(e,t,n,r,i,o,a,s,l){this.names=e,this.fields=t,this.types=n,this.defaults=r,this.meta=i,this.oneofToFields=o,this.fieldToOneof=a,this.reservedTags=s?s.reduce(((e,t)=>(e[t]=!0,e)),{}):{},this.reservedFields=l?l.reduce(((e,t)=>(e[t]=!0,e)),{}):{}}}function o(e,t){const n=e[t];if(null==n)throw new Error(`fieldData of ${t} is missing`);return n}t.Spec=i},91451:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_MASK=t.TYPES=t.KEYS=t.FLAGS=t.ENC=void 0;t.FLAGS={REPEATED:64,PACKED:128,REQUIRED:256};t.TYPE_MASK=31;t.TYPES={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};t.ENC={VARINT:0,BIT64:1,BINARY:2,BIT32:5};t.KEYS={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"}},96119:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeToEncType=function(e){if(e&o.PACKED)return l.BINARY;const t=e&s;return t<=a.ENUM?l.VARINT:t<=a.DOUBLE?l.BIT64:t<=a.MESSAGE?l.BINARY:l.BIT32};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(91451));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const{FLAGS:o,TYPES:a,TYPE_MASK:s,ENC:l}=r},77909:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.checkRequirements=l,t.checkValid=function(e,t){l(e,t);const n=g(t,e);if(n)throw n.path.reverse(),new TypeError(`Invalid value at ${n.path.join(".")}: ${n.error}`)};var i=r(n(9028)),o=n(22732),a=n(91451);const s=Number.MAX_SAFE_INTEGER;function l(e,t){const n=u(e,t);if(n)throw n.reverse(),new TypeError(`Message missing required value ${n.join(".")}`)}function u(e,t){const{names:n,types:r,meta:s}=(0,o.compileSpec)(e);let l;for(let e=0;e<r.length&&!l;e++){const o=r[e],c=n[e],d=(0,i.default)(t,c)?t[c]:void 0;if(o&a.FLAGS.REQUIRED&&null==d)l=[c];else if((o&a.TYPE_MASK)===a.TYPES.MESSAGE&&o&a.FLAGS.REPEATED&&null!=d){const t=s[e];let n;for(n=0;n<d.length&&!l;n++)l=u(t,d[n]);l&&l.push(`${c}[${n}]`)}else(o&a.TYPE_MASK)===a.TYPES.MESSAGE&&null!=d&&(l=u(s[e],d),l&&l.push(c))}return l}function c(e,t,n){return"string"==typeof e?!/^-?0x[0-9a-f]{16}$/i.test(e)&&(__LOG__(2)`"${f(e)}" is not a valid long`,{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}):d(e,t,n)}function d(e,t,n){return"number"!=typeof e||e!=e||Math.floor(e)!==e?(__LOG__(2)`"${f(e)}" is not a valid int`,{path:[],error:"value must be an int"}):(e<t||e>=n)&&(__LOG__(2)`"${f(e)}" is out of range`,{path:[],error:"value is out of range"})}function p(e,t,n){return e?void 0:(__LOG__(2)`"${f(n)}" is not ${t}`,{path:[],error:"value is invalid"})}function f(e){return"string"==typeof e?`"${e}"`:Array.isArray(e)?`[${e.join(", ")}]`:`${e}`}const _=[void 0,e=>d(e,-2147483648,2147483648),e=>c(e,-s,s+1),e=>d(e,0,4294967296),e=>c(e,0,s+1),e=>d(e,-2147483648,2147483648),e=>c(e,-s,s+1),e=>p("boolean"==typeof e,"boolean",e),(e,t)=>p("number"==typeof e&&(t[e]||void 0!==t.cast(e)),"in enum",e),e=>c(e,0,s+1),e=>c(e,-s,s+1),e=>p("number"==typeof e,"number",e),e=>p("string"==typeof e,"string",e),e=>p(e instanceof ArrayBuffer||e instanceof Uint8Array,"ArrayBuffer or Uint8Array",e),g,e=>d(e,0,4294967296),e=>d(e,-2147483648,2147483648),e=>p("number"==typeof e,"number",e)];function g(e,t){const{names:n,fields:r,types:i,meta:s,oneofToFields:l,fieldToOneof:u,reservedTags:c,reservedFields:d}=(0,o.compileSpec)(t);let p;for(let t=0;t<n.length&&!p;t++){const o=n[t],g=i[t],h=e[o],A=g&a.TYPE_MASK,m=_[A];if(void 0===m)throw new Error(`Can not find the validator for type ${A}`);if(g&(a.FLAGS.PACKED|a.FLAGS.REPEATED)&&null!=h)if(Array.isArray(h)){const e=s[t];for(let t=0;t<h.length&&!p;t++)p=m(h[t],e),p&&p.path.push(`${o}[${t}]`)}else __LOG__(2)`"${f(h)}" is not an array`,p={path:[o],error:"repeated field must be array"};else if(null!=h){p=m(h,s[t]),p&&p.path.push(o);const n=u[o];n&&n.forEach((t=>{l[t].filter((e=>e!==o)).forEach((n=>{void 0!==e[n]&&(p={path:[t],error:`oneof '${t}' has fields '${o}' and '${n}' set`})}))})),c[r[t]]&&(p={path:[o],error:`tag ${r[t]} is reserved`}),d[o]&&(p={path:[o],error:`field ${o} is reserved`})}}return p}},33655:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtobuf=function(e,t){const n=new o.Binary(t),r=m(e,n,void 0,!1);return(0,d.checkRequirements)(e,r),r},t.decodeProtobufWithUnknowns=function(e,t){const n=new o.Binary(t),r=m(e,n,void 0,!0);return(0,d.checkRequirements)(e,r),r},t.getUnknownFields=function(e){return(0,a.default)(e,"$$unsafeUnknownFields")?e.$$unsafeUnknownFields:null};var i=r(n(73982)),o=n(89323),a=r(n(9028)),s=n(65982),l=n(22732),u=n(91451),c=n(96119),d=n(77909);function p(e,t,n){if(e!==(0,c.typeToEncType)(t))throw new Error(`FormatError: ${n} encoded with wire type ${e}`)}function f(e,t,n){switch(t){case u.TYPES.INT32:return _(n,-2147483648,2147483648,e,o.parseInt64OrThrow);case u.TYPES.INT64:return n.readVarInt(g);case u.TYPES.UINT32:return _(n,0,4294967296,e,o.parseUint64OrThrow);case u.TYPES.UINT64:return n.readVarInt(h);case u.TYPES.SINT32:{const t=_(n,0,4294967296,e,o.parseInt64OrThrow);return 1&t?~(t>>>1):t>>>1}case u.TYPES.SINT64:return n.readVarInt(A);case u.TYPES.BOOL:return!!_(n,0,2,e,o.parseUint64OrThrow);case u.TYPES.ENUM:return n.readVarInt(o.parseInt64OrThrow);case u.TYPES.FIXED64:return n.readLong(h,!0);case u.TYPES.SFIXED64:return n.readLong(g,!0);case u.TYPES.DOUBLE:return n.readFloat64(!0);case u.TYPES.STRING:return n.readString(n.readVarInt(o.parseUint64OrThrow));case u.TYPES.BYTES:return n.readBuffer(n.readVarInt(o.parseUint64OrThrow));case u.TYPES.FIXED32:return n.readUint32(!0);case u.TYPES.SFIXED32:return n.readInt32(!0);case u.TYPES.FLOAT:return n.readFloat32(!0)}}function _(e,t,n,r,i){const o=e.readVarInt(i);if(o<t||o>=n)throw new Error(`FormatError: ${r} encoded with out-of-range value ${o}`);return o}function g(e,t){if((0,o.longFitsInDouble)(!0,e,t)){return 4294967296*e+E(t)}{const n=e<0;let r;r=n?0===t?-e:~e:e;const i=n?-t:t;return(0,s.createHexLongFrom32Bits)(r,i,n)}}function h(e,t){if((0,o.longFitsInDouble)(!1,e,t)){return 4294967296*E(e)+E(t)}return(0,s.createHexLongFrom32Bits)(e,t)}function A(e,t){let n=e>>>1,r=e<<31|t>>>1;return 1&t&&(n=~n,r=~r),g(n,r)}function m(e,t,n,r){var a;const{names:s,fields:c,types:d,meta:g,oneofToFields:h,fieldToOneof:A,reservedTags:E,reservedFields:y}=(0,l.compileSpec)(e),{internalDefaults:S}=e,v=n||(0,i.default)({},S)||{};v.$$unknownFieldCount=null!==(a=null==n?void 0:n.$$unknownFieldCount)&&void 0!==a?a:0;for(let e=0;e<s.length;e++)d[e]&u.FLAGS.REPEATED&&(v[s[e]]=[]);let I=0;const T=c.length>0;let b=c[0];for(;t.size();){const e=_(t,0,4294967296,"field and enc type",o.parseInt64OrThrow),n=7&e,i=e>>>3;if(T&&i!==b){const e=I;do{++I===c.length&&(I=0),b=c[I]}while(i!==b&&I!==e)}if(T&&i===b){const e=s[I],a=d[I];p(n,a,e);const l=a&u.TYPE_MASK,c=g[I];if(a&u.FLAGS.PACKED){const n=t.readVarInt(o.parseUint64OrThrow),r=t.readBinary(n);for(;r.size();){var M;const t=f(e,l,r);(l!==u.TYPES.ENUM||c[t]||void 0!==(null===(M=c.cast)||void 0===M?void 0:M.call(c,t)))&&v[e].push(t)}}else if(l===u.TYPES.MESSAGE){const n=t.readVarInt(o.parseUint64OrThrow),i=t.readBinary(n);if(a&u.FLAGS.REPEATED)v[e].push(m(c,i,void 0,r));else{const t=v[e];v[e]=m(c,i,t,r)}}else{var P;const n=f(e,l,t);(l!==u.TYPES.ENUM||c[n]||void 0!==(null===(P=c.cast)||void 0===P?void 0:P.call(c,n)))&&(a&u.FLAGS.REPEATED?v[e].push(n):v[e]=n)}const _=A[e];_&&void 0!==v[e]&&_.forEach((t=>{h[t].filter((t=>t!==e)).forEach((e=>{delete v[e]}))})),(E[i]||y[e])&&delete v[e]}else if(v.$$unknownFieldCount++,r){let e;switch(v.$$unsafeUnknownFields||(v.$$unsafeUnknownFields={}),n){case u.ENC.VARINT:e=t.readVarInt(o.parseInt64OrThrow);break;case u.ENC.BIT64:e=t.readBinary(8);break;case u.ENC.BINARY:e=t.readBinary(t.readVarInt(o.parseUint64OrThrow));break;case u.ENC.BIT32:e=t.readBinary(4)}v.$$unsafeUnknownFields[i]=e}else n===u.ENC.VARINT?t.readVarInt(o.parseInt64OrThrow):n===u.ENC.BIT64?t.advance(8):n===u.ENC.BINARY?t.advance(t.readVarInt(o.parseUint64OrThrow)):n===u.ENC.BIT32&&t.advance(4)}return v}function E(e){return e>=0?e:4294967296+e}},86881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeErrorInfo=function(){return void 0!==u?`Last encoded value for ${u}`:"No information known"},t.encodeProtobuf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Binary;return(0,l.checkValid)(e,t),g(n,t,e),u=void 0,n};var r=n(89323),i=n(65982),o=n(22732),a=n(91451),s=n(96119),l=n(77909);let u;function c(e,t){e.writeVarInt(t)}function d(e,t){if("number"==typeof t&&t<4503599627370496&&t>=-4503599627370496)e.writeVarInt(t>=0?2*t:2*-t-1);else{const n=new r.Binary;let o;"number"==typeof t?(o=t<0,n.writeVarInt(o?-t:t)):(o=(0,i.hexLongIsNegative)(t),n.writeVarIntFromHexLong(o?(0,i.negateHexLong)(t):t));const a=n.peek((()=>n.readByteArray())),s=a.byteLength;if(o){let e,t=0;do{e=a[t],a[t]=128&e|(127&e)-1&127,t++}while(255===a[t-1])}let l=o?1:0;for(let e=0;e<s;e++){const t=a[e],n=128&t|(63&t)<<1|l;l=(64&t)>>6,a[e]=n}1===l&&(a[s-1]|=128,n.writeInt8(1)),e.writeBinary(n)}}function p(e,t){"number"==typeof t?e.writeVarInt(t):e.writeVarIntFromHexLong(t)}const f=[void 0,c,p,c,p,d,d,(e,t)=>{e.writeVarInt(t?1:0)},c,(e,t)=>{"number"==typeof t?e.writeUint64(t,!0):e.writeHexLong(t,!0)},(e,t)=>{"number"==typeof t?e.writeInt64(t,!0):e.writeHexLong(t,!0)},(e,t)=>{e.writeFloat64(t,!0)},function(e,t){e.writeVarInt((0,r.numUtf8Bytes)(t)),e.writeString(t)},function(e,t){e.writeVarInt(t.byteLength),e.writeBuffer(t)},function(e,t,n){e.writeWithVarIntLength(((e,t)=>g(e,t,n)),t)},(e,t)=>{e.writeUint32(t,!0)},(e,t)=>{e.writeInt32(t,!0)},(e,t)=>{e.writeFloat32(t,!0)}],_=f.map((e=>{if(null!=e)return(e,n)=>{e.writeWithVarIntLength(t,n)};function t(t,n){for(let r=0;r<n.length;r++)e(t,n[r])}}));function g(e,t,n){const{names:r,fields:i,types:l,meta:c}=(0,o.compileSpec)(n),{internalDefaults:d}=n;for(let n=0;n<r.length;n++){const o=r[n];let p=t[o];if(null==p&&d&&(p=d[o]),null!=p){u=o;const t=i[n],r=l[n],d=r&a.TYPE_MASK,g=c[n],h=8*t|(0,s.typeToEncType)(r);if(r&a.FLAGS.PACKED){if(p.length>0){e.writeVarInt(h);(0,_[d])(e,p,g)}}else if(r&a.FLAGS.REPEATED)for(let t=0;t<p.length;t++){e.writeVarInt(h);(0,f[d])(e,p[t],g)}else{e.writeVarInt(h);(0,f[d])(e,p,g)}}}}},13548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoiseCertificateSpec=t.NoiseCertificate$DetailsSpec=t.CertChainSpec=t.CertChain$NoiseCertificateSpec=t.CertChain$NoiseCertificate$DetailsSpec=void 0;var r=n(91451);const i={};t.NoiseCertificateSpec=i;const o={};t.NoiseCertificate$DetailsSpec=o;const a={};t.CertChainSpec=a;const s={};t.CertChain$NoiseCertificateSpec=s;const l={};t.CertChain$NoiseCertificate$DetailsSpec=l,i.internalSpec={details:[1,r.TYPES.BYTES],signature:[2,r.TYPES.BYTES]},o.internalSpec={serial:[1,r.TYPES.UINT32],issuer:[2,r.TYPES.STRING],expires:[3,r.TYPES.UINT64],subject:[4,r.TYPES.STRING],key:[5,r.TYPES.BYTES]},a.internalSpec={leaf:[1,r.TYPES.MESSAGE,s],intermediate:[2,r.TYPES.MESSAGE,s]},s.internalSpec={details:[1,r.TYPES.BYTES],signature:[2,r.TYPES.BYTES]},l.internalSpec={serial:[1,r.TYPES.UINT32],issuerSerial:[2,r.TYPES.UINT32],key:[3,r.TYPES.BYTES],notBefore:[4,r.TYPES.UINT64],notAfter:[5,r.TYPES.UINT64]}},13146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatLockSettingsSpec=void 0;var r=n(91451),i=n(87096);const o={};t.ChatLockSettingsSpec=o,o.internalSpec={hideLockedChats:[1,r.TYPES.BOOL],secretCode:[2,r.TYPES.MESSAGE,i.UserPasswordSpec]}},53955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceCapabilitiesSpec=t.DeviceCapabilities$ChatLockSupportLevel=void 0;var r=n(91451);const i=n(54302)({NONE:0,MINIMAL:1,FULL:2});t.DeviceCapabilities$ChatLockSupportLevel=i;const o={};t.DeviceCapabilitiesSpec=o,o.internalSpec={chatLockSupportLevel:[1,r.TYPES.ENUM,i]}},87096:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserPasswordSpec=t.UserPassword$TransformerArgSpec=t.UserPassword$TransformerArg$ValueSpec=t.UserPassword$Transformer=t.UserPassword$Encoding=void 0;var r=n(91451);const i=n(54302)({NONE:0,PBKDF2_HMAC_SHA512:1,PBKDF2_HMAC_SHA384:2});t.UserPassword$Transformer=i;const o=n(54302)({UTF8:0});t.UserPassword$Encoding=o;const a={};t.UserPasswordSpec=a;const s={};t.UserPassword$TransformerArgSpec=s;const l={};t.UserPassword$TransformerArg$ValueSpec=l,a.internalSpec={encoding:[1,r.TYPES.ENUM,o],transformer:[2,r.TYPES.ENUM,i],transformerArg:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,s],transformedData:[4,r.TYPES.BYTES]},s.internalSpec={key:[1,r.TYPES.STRING],value:[2,r.TYPES.MESSAGE,l]},l.internalSpec={asBlob:[1,r.TYPES.BYTES],asUnsignedInteger:[2,r.TYPES.UINT32],__oneofs__:{value:["asBlob","asUnsignedInteger"]}}},39282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageKeySpec=void 0;var r=n(91451);const i={};t.MessageKeySpec=i,i.internalSpec={remoteJid:[1,r.TYPES.STRING],fromMe:[2,r.TYPES.BOOL],id:[3,r.TYPES.STRING],participant:[4,r.TYPES.STRING]}},91866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdVersionSpec=t.SyncdValueSpec=t.SyncdSnapshotSpec=t.SyncdRecordSpec=t.SyncdPatchSpec=t.SyncdMutationsSpec=t.SyncdMutationSpec=t.SyncdMutation$SyncdOperation=t.SyncdIndexSpec=t.KeyIdSpec=t.ExternalBlobReferenceSpec=t.ExitCodeSpec=void 0;var r=n(91451);const i=n(54302)({SET:0,REMOVE:1});t.SyncdMutation$SyncdOperation=i;const o={};t.SyncdVersionSpec=o;const a={};t.ExitCodeSpec=a;const s={};t.SyncdIndexSpec=s;const l={};t.SyncdValueSpec=l;const u={};t.KeyIdSpec=u;const c={};t.SyncdRecordSpec=c;const d={};t.ExternalBlobReferenceSpec=d;const p={};t.SyncdSnapshotSpec=p;const f={};t.SyncdMutationsSpec=f;const _={};t.SyncdMutationSpec=_;const g={};t.SyncdPatchSpec=g,o.internalSpec={version:[1,r.TYPES.UINT64]},a.internalSpec={code:[1,r.TYPES.UINT64],text:[2,r.TYPES.STRING]},s.internalSpec={blob:[1,r.TYPES.BYTES]},l.internalSpec={blob:[1,r.TYPES.BYTES]},u.internalSpec={id:[1,r.TYPES.BYTES]},c.internalSpec={index:[1,r.TYPES.MESSAGE,s],value:[2,r.TYPES.MESSAGE,l],keyId:[3,r.TYPES.MESSAGE,u]},d.internalSpec={mediaKey:[1,r.TYPES.BYTES],directPath:[2,r.TYPES.STRING],handle:[3,r.TYPES.STRING],fileSizeBytes:[4,r.TYPES.UINT64],fileSha256:[5,r.TYPES.BYTES],fileEncSha256:[6,r.TYPES.BYTES]},p.internalSpec={version:[1,r.TYPES.MESSAGE,o],records:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,c],mac:[3,r.TYPES.BYTES],keyId:[4,r.TYPES.MESSAGE,u]},f.internalSpec={mutations:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,_]},_.internalSpec={operation:[1,r.TYPES.ENUM,i],record:[2,r.TYPES.MESSAGE,c]},g.internalSpec={version:[1,r.TYPES.MESSAGE,o],mutations:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,_],externalMutations:[3,r.TYPES.MESSAGE,d],snapshotMac:[4,r.TYPES.BYTES],patchMac:[5,r.TYPES.BYTES],keyId:[6,r.TYPES.MESSAGE,u],exitCode:[7,r.TYPES.MESSAGE,a],deviceIndex:[8,r.TYPES.UINT32],clientDebugData:[9,r.TYPES.BYTES]}},36379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignedPreKeyRecordStructureSpec=t.SessionStructureSpec=t.SessionStructure$PendingPreKeySpec=t.SessionStructure$PendingKeyExchangeSpec=t.SessionStructure$ChainSpec=t.SessionStructure$Chain$MessageKeySpec=t.SessionStructure$Chain$ChainKeySpec=t.SenderKeyStateStructureSpec=t.SenderKeyStateStructure$SenderSigningKeySpec=t.SenderKeyStateStructure$SenderMessageKeySpec=t.SenderKeyStateStructure$SenderChainKeySpec=t.SenderKeyRecordStructureSpec=t.RecordStructureSpec=t.PreKeyRecordStructureSpec=t.IdentityKeyPairStructureSpec=void 0;var r=n(91451);const i={};t.SessionStructureSpec=i;const o={};t.SessionStructure$PendingPreKeySpec=o;const a={};t.SessionStructure$PendingKeyExchangeSpec=a;const s={};t.SessionStructure$ChainSpec=s;const l={};t.SessionStructure$Chain$MessageKeySpec=l;const u={};t.SessionStructure$Chain$ChainKeySpec=u;const c={};t.RecordStructureSpec=c;const d={};t.PreKeyRecordStructureSpec=d;const p={};t.SignedPreKeyRecordStructureSpec=p;const f={};t.IdentityKeyPairStructureSpec=f;const _={};t.SenderKeyStateStructureSpec=_;const g={};t.SenderKeyStateStructure$SenderSigningKeySpec=g;const h={};t.SenderKeyStateStructure$SenderMessageKeySpec=h;const A={};t.SenderKeyStateStructure$SenderChainKeySpec=A;const m={};t.SenderKeyRecordStructureSpec=m,i.internalSpec={sessionVersion:[1,r.TYPES.UINT32],localIdentityPublic:[2,r.TYPES.BYTES],remoteIdentityPublic:[3,r.TYPES.BYTES],rootKey:[4,r.TYPES.BYTES],previousCounter:[5,r.TYPES.UINT32],senderChain:[6,r.TYPES.MESSAGE,s],receiverChains:[7,r.FLAGS.REPEATED|r.TYPES.MESSAGE,s],pendingKeyExchange:[8,r.TYPES.MESSAGE,a],pendingPreKey:[9,r.TYPES.MESSAGE,o],remoteRegistrationId:[10,r.TYPES.UINT32],localRegistrationId:[11,r.TYPES.UINT32],needsRefresh:[12,r.TYPES.BOOL],aliceBaseKey:[13,r.TYPES.BYTES]},o.internalSpec={preKeyId:[1,r.TYPES.UINT32],signedPreKeyId:[3,r.TYPES.INT32],baseKey:[2,r.TYPES.BYTES]},a.internalSpec={sequence:[1,r.TYPES.UINT32],localBaseKey:[2,r.TYPES.BYTES],localBaseKeyPrivate:[3,r.TYPES.BYTES],localRatchetKey:[4,r.TYPES.BYTES],localRatchetKeyPrivate:[5,r.TYPES.BYTES],localIdentityKey:[7,r.TYPES.BYTES],localIdentityKeyPrivate:[8,r.TYPES.BYTES]},s.internalSpec={senderRatchetKey:[1,r.TYPES.BYTES],senderRatchetKeyPrivate:[2,r.TYPES.BYTES],chainKey:[3,r.TYPES.MESSAGE,u],messageKeys:[4,r.FLAGS.REPEATED|r.TYPES.MESSAGE,l]},l.internalSpec={index:[1,r.TYPES.UINT32],cipherKey:[2,r.TYPES.BYTES],macKey:[3,r.TYPES.BYTES],iv:[4,r.TYPES.BYTES]},u.internalSpec={index:[1,r.TYPES.UINT32],key:[2,r.TYPES.BYTES]},c.internalSpec={currentSession:[1,r.TYPES.MESSAGE,i],previousSessions:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,i]},d.internalSpec={id:[1,r.TYPES.UINT32],publicKey:[2,r.TYPES.BYTES],privateKey:[3,r.TYPES.BYTES]},p.internalSpec={id:[1,r.TYPES.UINT32],publicKey:[2,r.TYPES.BYTES],privateKey:[3,r.TYPES.BYTES],signature:[4,r.TYPES.BYTES],timestamp:[5,r.TYPES.FIXED64]},f.internalSpec={publicKey:[1,r.TYPES.BYTES],privateKey:[2,r.TYPES.BYTES]},_.internalSpec={senderKeyId:[1,r.TYPES.UINT32],senderChainKey:[2,r.TYPES.MESSAGE,A],senderSigningKey:[3,r.TYPES.MESSAGE,g],senderMessageKeys:[4,r.FLAGS.REPEATED|r.TYPES.MESSAGE,h]},g.internalSpec={public:[1,r.TYPES.BYTES],private:[2,r.TYPES.BYTES]},h.internalSpec={iteration:[1,r.TYPES.UINT32],seed:[2,r.TYPES.BYTES]},A.internalSpec={iteration:[1,r.TYPES.UINT32],seed:[2,r.TYPES.BYTES]},m.internalSpec={senderKeyStates:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,_]}},77589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignalMessageSpec=t.SenderKeyMessageSpec=t.SenderKeyDistributionMessageSpec=t.PreKeySignalMessageSpec=t.KeyExchangeMessageSpec=t.DeviceConsistencyCodeMessageSpec=void 0;var r=n(91451);const i={};t.SignalMessageSpec=i;const o={};t.PreKeySignalMessageSpec=o;const a={};t.KeyExchangeMessageSpec=a;const s={};t.SenderKeyMessageSpec=s;const l={};t.SenderKeyDistributionMessageSpec=l;const u={};t.DeviceConsistencyCodeMessageSpec=u,i.internalSpec={ratchetKey:[1,r.TYPES.BYTES],counter:[2,r.TYPES.UINT32],previousCounter:[3,r.TYPES.UINT32],ciphertext:[4,r.TYPES.BYTES]},o.internalSpec={registrationId:[5,r.TYPES.UINT32],preKeyId:[1,r.TYPES.UINT32],signedPreKeyId:[6,r.TYPES.UINT32],baseKey:[2,r.TYPES.BYTES],identityKey:[3,r.TYPES.BYTES],message:[4,r.TYPES.BYTES]},a.internalSpec={id:[1,r.TYPES.UINT32],baseKey:[2,r.TYPES.BYTES],ratchetKey:[3,r.TYPES.BYTES],identityKey:[4,r.TYPES.BYTES],baseKeySignature:[5,r.TYPES.BYTES]},s.internalSpec={id:[1,r.TYPES.UINT32],iteration:[2,r.TYPES.UINT32],ciphertext:[3,r.TYPES.BYTES]},l.internalSpec={id:[1,r.TYPES.UINT32],iteration:[2,r.TYPES.UINT32],chainKey:[3,r.TYPES.BYTES],signingKey:[4,r.TYPES.BYTES]},u.internalSpec={generation:[1,r.TYPES.UINT32],signature:[2,r.TYPES.BYTES]}},91205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncActionValueSpec=t.SyncActionValue$WamoUserIdentifierActionSpec=t.SyncActionValue$UserStatusMuteActionSpec=t.SyncActionValue$UnarchiveChatsSettingSpec=t.SyncActionValue$TimeFormatActionSpec=t.SyncActionValue$SyncActionMessageSpec=t.SyncActionValue$SyncActionMessageRangeSpec=t.SyncActionValue$SubscriptionActionSpec=t.SyncActionValue$StickerActionSpec=t.SyncActionValue$StatusPrivacyActionSpec=t.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=t.SyncActionValue$StarActionSpec=t.SyncActionValue$SecurityNotificationSettingSpec=t.SyncActionValue$RemoveRecentStickerActionSpec=t.SyncActionValue$RecentEmojiWeightsActionSpec=t.SyncActionValue$QuickReplyActionSpec=t.SyncActionValue$PushNameSettingSpec=t.SyncActionValue$PrivacySettingRelayAllCallsSpec=t.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=t.SyncActionValue$PrimaryVersionActionSpec=t.SyncActionValue$PrimaryFeatureSpec=t.SyncActionValue$PnForLidChatActionSpec=t.SyncActionValue$PinActionSpec=t.SyncActionValue$PaymentInfoActionSpec=t.SyncActionValue$NuxActionSpec=t.SyncActionValue$NoteEditActionSpec=t.SyncActionValue$NoteEditAction$NoteType=t.SyncActionValue$MuteActionSpec=t.SyncActionValue$MarketingMessageBroadcastActionSpec=t.SyncActionValue$MarketingMessageActionSpec=t.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=t.SyncActionValue$MarkChatAsReadActionSpec=t.SyncActionValue$LockChatActionSpec=t.SyncActionValue$LocaleSettingSpec=t.SyncActionValue$LabelReorderingActionSpec=t.SyncActionValue$LabelEditActionSpec=t.SyncActionValue$LabelAssociationActionSpec=t.SyncActionValue$KeyExpirationSpec=t.SyncActionValue$ExternalWebBetaActionSpec=t.SyncActionValue$DeleteMessageForMeActionSpec=t.SyncActionValue$DeleteIndividualCallLogActionSpec=t.SyncActionValue$DeleteChatActionSpec=t.SyncActionValue$CustomPaymentMethodsActionSpec=t.SyncActionValue$CustomPaymentMethodSpec=t.SyncActionValue$CustomPaymentMethodMetadataSpec=t.SyncActionValue$ContactActionSpec=t.SyncActionValue$ClearChatActionSpec=t.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=t.SyncActionValue$ChatAssignmentActionSpec=t.SyncActionValue$CallLogActionSpec=t.SyncActionValue$BotWelcomeRequestActionSpec=t.SyncActionValue$ArchiveChatActionSpec=t.SyncActionValue$AndroidUnsupportedActionsSpec=t.SyncActionValue$AgentActionSpec=t.SyncActionDataSpec=t.RecentEmojiWeightSpec=t.PatchDebugDataSpec=t.PatchDebugData$Platform=t.CallLogRecordSpec=t.CallLogRecord$SilenceReason=t.CallLogRecord$ParticipantInfoSpec=t.CallLogRecord$CallType=t.CallLogRecord$CallResult=void 0;var r=n(91451),i=n(13146),o=n(53955),a=n(39282);const s=n(54302)({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});t.CallLogRecord$CallType=s;const l=n(54302)({NONE:0,SCHEDULED:1,PRIVACY:2,LIGHTWEIGHT:3});t.CallLogRecord$SilenceReason=l;const u=n(54302)({CONNECTED:0,REJECTED:1,CANCELLED:2,ACCEPTEDELSEWHERE:3,MISSED:4,INVALID:5,UNAVAILABLE:6,UPCOMING:7,FAILED:8,ABANDONED:9,ONGOING:10});t.CallLogRecord$CallResult=u;const c=n(54302)({UNSTRUCTURED:1,STRUCTURED:2});t.SyncActionValue$NoteEditAction$NoteType=c;const d=n(54302)({ALLOW_LIST:0,DENY_LIST:1,CONTACTS:2});t.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=d;const p=n(54302)({PERSONALIZED:0});t.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=p;const f=n(54302)({ANDROID:0,SMBA:1,IPHONE:2,SMBI:3,WEB:4,UWP:5,DARWIN:6});t.PatchDebugData$Platform=f;const _={};t.RecentEmojiWeightSpec=_;const g={};t.CallLogRecordSpec=g;const h={};t.CallLogRecord$ParticipantInfoSpec=h;const A={};t.SyncActionValueSpec=A;const m={};t.SyncActionValue$NoteEditActionSpec=m;const E={};t.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=E;const y={};t.SyncActionValue$WamoUserIdentifierActionSpec=y;const S={};t.SyncActionValue$LockChatActionSpec=S;const v={};t.SyncActionValue$CustomPaymentMethodsActionSpec=v;const I={};t.SyncActionValue$CustomPaymentMethodSpec=I;const T={};t.SyncActionValue$CustomPaymentMethodMetadataSpec=T;const b={};t.SyncActionValue$PaymentInfoActionSpec=b;const M={};t.SyncActionValue$LabelReorderingActionSpec=M;const P={};t.SyncActionValue$DeleteIndividualCallLogActionSpec=P;const C={};t.SyncActionValue$BotWelcomeRequestActionSpec=C;const O={};t.SyncActionValue$StatusPrivacyActionSpec=O;const R={};t.SyncActionValue$CallLogActionSpec=R;const N={};t.SyncActionValue$PrivacySettingRelayAllCallsSpec=N;const w={};t.SyncActionValue$ExternalWebBetaActionSpec=w;const D={};t.SyncActionValue$MarketingMessageBroadcastActionSpec=D;const L={};t.SyncActionValue$MarketingMessageActionSpec=L;const B={};t.SyncActionValue$PnForLidChatActionSpec=B;const k={};t.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=k;const G={};t.SyncActionValue$ChatAssignmentActionSpec=G;const U={};t.SyncActionValue$StickerActionSpec=U;const x={};t.SyncActionValue$RemoveRecentStickerActionSpec=x;const F={};t.SyncActionValue$PrimaryVersionActionSpec=F;const K={};t.SyncActionValue$NuxActionSpec=K;const Y={};t.SyncActionValue$TimeFormatActionSpec=Y;const j={};t.SyncActionValue$UserStatusMuteActionSpec=j;const V={};t.SyncActionValue$SubscriptionActionSpec=V;const W={};t.SyncActionValue$AgentActionSpec=W;const H={};t.SyncActionValue$AndroidUnsupportedActionsSpec=H;const Q={};t.SyncActionValue$PrimaryFeatureSpec=Q;const $={};t.SyncActionValue$KeyExpirationSpec=$;const q={};t.SyncActionValue$SyncActionMessageSpec=q;const J={};t.SyncActionValue$SyncActionMessageRangeSpec=J;const z={};t.SyncActionValue$UnarchiveChatsSettingSpec=z;const X={};t.SyncActionValue$DeleteChatActionSpec=X;const Z={};t.SyncActionValue$ClearChatActionSpec=Z;const ee={};t.SyncActionValue$MarkChatAsReadActionSpec=ee;const te={};t.SyncActionValue$DeleteMessageForMeActionSpec=te;const ne={};t.SyncActionValue$ArchiveChatActionSpec=ne;const re={};t.SyncActionValue$RecentEmojiWeightsActionSpec=re;const ie={};t.SyncActionValue$LabelEditActionSpec=ie;const oe={};t.SyncActionValue$LabelAssociationActionSpec=oe;const ae={};t.SyncActionValue$QuickReplyActionSpec=ae;const se={};t.SyncActionValue$LocaleSettingSpec=se;const le={};t.SyncActionValue$PushNameSettingSpec=le;const ue={};t.SyncActionValue$SecurityNotificationSettingSpec=ue;const ce={};t.SyncActionValue$PinActionSpec=ce;const de={};t.SyncActionValue$MuteActionSpec=de;const pe={};t.SyncActionValue$ContactActionSpec=pe;const fe={};t.SyncActionValue$StarActionSpec=fe;const _e={};t.SyncActionDataSpec=_e;const ge={};t.PatchDebugDataSpec=ge,_.internalSpec={emoji:[1,r.TYPES.STRING],weight:[2,r.TYPES.FLOAT]},g.internalSpec={callResult:[1,r.TYPES.ENUM,u],isDndMode:[2,r.TYPES.BOOL],silenceReason:[3,r.TYPES.ENUM,l],duration:[4,r.TYPES.INT64],startTime:[5,r.TYPES.INT64],isIncoming:[6,r.TYPES.BOOL],isVideo:[7,r.TYPES.BOOL],isCallLink:[8,r.TYPES.BOOL],callLinkToken:[9,r.TYPES.STRING],scheduledCallId:[10,r.TYPES.STRING],callId:[11,r.TYPES.STRING],callCreatorJid:[12,r.TYPES.STRING],groupJid:[13,r.TYPES.STRING],participants:[14,r.FLAGS.REPEATED|r.TYPES.MESSAGE,h],callType:[15,r.TYPES.ENUM,s]},h.internalSpec={userJid:[1,r.TYPES.STRING],callResult:[2,r.TYPES.ENUM,u]},A.internalSpec={timestamp:[1,r.TYPES.INT64],starAction:[2,r.TYPES.MESSAGE,fe],contactAction:[3,r.TYPES.MESSAGE,pe],muteAction:[4,r.TYPES.MESSAGE,de],pinAction:[5,r.TYPES.MESSAGE,ce],securityNotificationSetting:[6,r.TYPES.MESSAGE,ue],pushNameSetting:[7,r.TYPES.MESSAGE,le],quickReplyAction:[8,r.TYPES.MESSAGE,ae],recentEmojiWeightsAction:[11,r.TYPES.MESSAGE,re],labelEditAction:[14,r.TYPES.MESSAGE,ie],labelAssociationAction:[15,r.TYPES.MESSAGE,oe],localeSetting:[16,r.TYPES.MESSAGE,se],archiveChatAction:[17,r.TYPES.MESSAGE,ne],deleteMessageForMeAction:[18,r.TYPES.MESSAGE,te],keyExpiration:[19,r.TYPES.MESSAGE,$],markChatAsReadAction:[20,r.TYPES.MESSAGE,ee],clearChatAction:[21,r.TYPES.MESSAGE,Z],deleteChatAction:[22,r.TYPES.MESSAGE,X],unarchiveChatsSetting:[23,r.TYPES.MESSAGE,z],primaryFeature:[24,r.TYPES.MESSAGE,Q],androidUnsupportedActions:[26,r.TYPES.MESSAGE,H],agentAction:[27,r.TYPES.MESSAGE,W],subscriptionAction:[28,r.TYPES.MESSAGE,V],userStatusMuteAction:[29,r.TYPES.MESSAGE,j],timeFormatAction:[30,r.TYPES.MESSAGE,Y],nuxAction:[31,r.TYPES.MESSAGE,K],primaryVersionAction:[32,r.TYPES.MESSAGE,F],stickerAction:[33,r.TYPES.MESSAGE,U],removeRecentStickerAction:[34,r.TYPES.MESSAGE,x],chatAssignment:[35,r.TYPES.MESSAGE,G],chatAssignmentOpenedStatus:[36,r.TYPES.MESSAGE,k],pnForLidChatAction:[37,r.TYPES.MESSAGE,B],marketingMessageAction:[38,r.TYPES.MESSAGE,L],marketingMessageBroadcastAction:[39,r.TYPES.MESSAGE,D],externalWebBetaAction:[40,r.TYPES.MESSAGE,w],privacySettingRelayAllCalls:[41,r.TYPES.MESSAGE,N],callLogAction:[42,r.TYPES.MESSAGE,R],statusPrivacy:[44,r.TYPES.MESSAGE,O],botWelcomeRequestAction:[45,r.TYPES.MESSAGE,C],deleteIndividualCallLog:[46,r.TYPES.MESSAGE,P],labelReorderingAction:[47,r.TYPES.MESSAGE,M],paymentInfoAction:[48,r.TYPES.MESSAGE,b],customPaymentMethodsAction:[49,r.TYPES.MESSAGE,v],lockChatAction:[50,r.TYPES.MESSAGE,S],chatLockSettings:[51,r.TYPES.MESSAGE,i.ChatLockSettingsSpec],wamoUserIdentifierAction:[52,r.TYPES.MESSAGE,y],privacySettingDisableLinkPreviewsAction:[53,r.TYPES.MESSAGE,E],deviceCapabilities:[54,r.TYPES.MESSAGE,o.DeviceCapabilitiesSpec],noteEditAction:[55,r.TYPES.MESSAGE,m]},m.internalSpec={type:[1,r.TYPES.ENUM,c],chatJid:[2,r.TYPES.STRING],createdAt:[3,r.TYPES.INT64],deleted:[4,r.TYPES.BOOL],unstructuredContent:[5,r.TYPES.STRING]},E.internalSpec={isPreviewsDisabled:[1,r.TYPES.BOOL]},y.internalSpec={identifier:[1,r.TYPES.STRING]},S.internalSpec={locked:[1,r.TYPES.BOOL]},v.internalSpec={customPaymentMethods:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,I]},I.internalSpec={credentialId:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],country:[2,r.FLAGS.REQUIRED|r.TYPES.STRING],type:[3,r.FLAGS.REQUIRED|r.TYPES.STRING],metadata:[4,r.FLAGS.REPEATED|r.TYPES.MESSAGE,T]},T.internalSpec={key:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],value:[2,r.FLAGS.REQUIRED|r.TYPES.STRING]},b.internalSpec={cpi:[1,r.TYPES.STRING]},M.internalSpec={sortedLabelIds:[1,r.FLAGS.REPEATED|r.TYPES.INT32]},P.internalSpec={peerJid:[1,r.TYPES.STRING],isIncoming:[2,r.TYPES.BOOL]},C.internalSpec={isSent:[1,r.TYPES.BOOL]},O.internalSpec={mode:[1,r.TYPES.ENUM,d],userJid:[2,r.FLAGS.REPEATED|r.TYPES.STRING]},R.internalSpec={callLogRecord:[1,r.TYPES.MESSAGE,g]},N.internalSpec={isEnabled:[1,r.TYPES.BOOL]},w.internalSpec={isOptIn:[1,r.TYPES.BOOL]},D.internalSpec={repliedCount:[1,r.TYPES.INT32]},L.internalSpec={name:[1,r.TYPES.STRING],message:[2,r.TYPES.STRING],type:[3,r.TYPES.ENUM,p],createdAt:[4,r.TYPES.INT64],lastSentAt:[5,r.TYPES.INT64],isDeleted:[6,r.TYPES.BOOL],mediaId:[7,r.TYPES.STRING]},B.internalSpec={pnJid:[1,r.TYPES.STRING]},k.internalSpec={chatOpened:[1,r.TYPES.BOOL]},G.internalSpec={deviceAgentID:[1,r.TYPES.STRING]},U.internalSpec={url:[1,r.TYPES.STRING],fileEncSha256:[2,r.TYPES.BYTES],mediaKey:[3,r.TYPES.BYTES],mimetype:[4,r.TYPES.STRING],height:[5,r.TYPES.UINT32],width:[6,r.TYPES.UINT32],directPath:[7,r.TYPES.STRING],fileLength:[8,r.TYPES.UINT64],isFavorite:[9,r.TYPES.BOOL],deviceIdHint:[10,r.TYPES.UINT32],isLottie:[11,r.TYPES.BOOL]},x.internalSpec={lastStickerSentTs:[1,r.TYPES.INT64]},F.internalSpec={version:[1,r.TYPES.STRING]},K.internalSpec={acknowledged:[1,r.TYPES.BOOL]},Y.internalSpec={isTwentyFourHourFormatEnabled:[1,r.TYPES.BOOL]},j.internalSpec={muted:[1,r.TYPES.BOOL]},V.internalSpec={isDeactivated:[1,r.TYPES.BOOL],isAutoRenewing:[2,r.TYPES.BOOL],expirationDate:[3,r.TYPES.INT64]},W.internalSpec={name:[1,r.TYPES.STRING],deviceID:[2,r.TYPES.INT32],isDeleted:[3,r.TYPES.BOOL]},H.internalSpec={allowed:[1,r.TYPES.BOOL]},Q.internalSpec={flags:[1,r.FLAGS.REPEATED|r.TYPES.STRING]},$.internalSpec={expiredKeyEpoch:[1,r.TYPES.INT32]},q.internalSpec={key:[1,r.TYPES.MESSAGE,a.MessageKeySpec],timestamp:[2,r.TYPES.INT64]},J.internalSpec={lastMessageTimestamp:[1,r.TYPES.INT64],lastSystemMessageTimestamp:[2,r.TYPES.INT64],messages:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,q]},z.internalSpec={unarchiveChats:[1,r.TYPES.BOOL]},X.internalSpec={messageRange:[1,r.TYPES.MESSAGE,J]},Z.internalSpec={messageRange:[1,r.TYPES.MESSAGE,J]},ee.internalSpec={read:[1,r.TYPES.BOOL],messageRange:[2,r.TYPES.MESSAGE,J]},te.internalSpec={deleteMedia:[1,r.TYPES.BOOL],messageTimestamp:[2,r.TYPES.INT64]},ne.internalSpec={archived:[1,r.TYPES.BOOL],messageRange:[2,r.TYPES.MESSAGE,J]},re.internalSpec={weights:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,_]},ie.internalSpec={name:[1,r.TYPES.STRING],color:[2,r.TYPES.INT32],predefinedId:[3,r.TYPES.INT32],deleted:[4,r.TYPES.BOOL],orderIndex:[5,r.TYPES.INT32]},oe.internalSpec={labeled:[1,r.TYPES.BOOL]},ae.internalSpec={shortcut:[1,r.TYPES.STRING],message:[2,r.TYPES.STRING],keywords:[3,r.FLAGS.REPEATED|r.TYPES.STRING],count:[4,r.TYPES.INT32],deleted:[5,r.TYPES.BOOL]},se.internalSpec={locale:[1,r.TYPES.STRING]},le.internalSpec={name:[1,r.TYPES.STRING]},ue.internalSpec={showNotification:[1,r.TYPES.BOOL]},ce.internalSpec={pinned:[1,r.TYPES.BOOL]},de.internalSpec={muted:[1,r.TYPES.BOOL],muteEndTimestamp:[2,r.TYPES.INT64],autoMuted:[3,r.TYPES.BOOL]},pe.internalSpec={fullName:[1,r.TYPES.STRING],firstName:[2,r.TYPES.STRING],lidJid:[3,r.TYPES.STRING],saveOnPrimaryAddressbook:[4,r.TYPES.BOOL]},fe.internalSpec={starred:[1,r.TYPES.BOOL]},_e.internalSpec={index:[1,r.TYPES.BYTES],value:[2,r.TYPES.MESSAGE,A],padding:[3,r.TYPES.BYTES],version:[4,r.TYPES.INT32]},ge.internalSpec={currentLthash:[1,r.TYPES.BYTES],newLthash:[2,r.TYPES.BYTES],patchVersion:[3,r.TYPES.BYTES],collectionName:[4,r.TYPES.BYTES],firstFourBytesFromAHashOfSnapshotMacKey:[5,r.TYPES.BYTES],newLthashSubtract:[6,r.TYPES.BYTES],numberAdd:[7,r.TYPES.INT32],numberRemove:[8,r.TYPES.INT32],numberOverride:[9,r.TYPES.INT32],senderPlatform:[10,r.TYPES.ENUM,f],isSenderPrimary:[11,r.TYPES.BOOL]}},17075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initTagsLogger=function(){(0,r.initializeWaLogger)({debug:i,info:i,logRestricted:i,warn:i,error:i,devConsole:i})};var r=n(8415);function i(){}},35389:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.createOutgoingSession=y,t.createSenderKeyDistributionMsg=function(){return b.apply(this,arguments)},t.decryptContent=function(e,t,n,r,i){let{loadSession:a,handleNewSession:l,loadSignedPreKey:d,loadOneTimePreKey:p}=e;return E("decryptContent"),A.lock([(0,s.extractUserJid)(n)],(0,o.default)((function*(){let e=!1;const o=yield a(n,"decryptContent");let s;if("pkmsg"===r.type){const e=(0,c.deserializePkMsg)(r.ciphertext);if(!e.success)return E("decryptContent: errCryptoDeserialization"),(0,u.makeError)("errCryptoDeserialization");const n=e.value,i=yield function(){return I.apply(this,arguments)}({loadSignedPreKey:d,loadOneTimePreKey:p},t,n,o);if(!i.success)return i;s=i.value}else{r.type;const e=(0,c.deserializeMsg)(r.ciphertext);if(!e.success)return E("decryptContent: errCryptoDeserialization"),(0,u.makeError)("errCryptoDeserialization");const t=e.value,n=yield(0,c.decryptMsg)(o,t);if(!n.success)return n;s=n.value}const{newSessionInfo:f}=s;if(!f||null==f.newIdentity&&null==f.usedPreKey||(yield l(n,f.baseSession,f.newIdentity,f.usedPreKey)),!e){const t=null==f?void 0:f.baseSession.remote.pubKey;yield i(new Uint8Array(s.plaintext),t),e=!0}return yield l(n,s.updatedSession,s.updatedSession.remote.pubKey),(0,u.makeResult)()})))},t.decryptGroupContent=function(e,t,n,r,i){let{loadSenderKeySession:a,saveSenderKeySession:l}=e;return E("decryptGroupContent"),A.lock([t,(0,s.extractUserJid)(n)],(0,o.default)((function*(){let e=!1;const o=yield a(t,n);if(!o.success)return(0,u.makeError)(o.error);const s=(0,d.deserializeSenderKeyMsg)(r);if(!s.success)return E("decryptGroupContent: errCryptoDeserialization"),(0,u.makeError)("errCryptoDeserialization");const c=o.value,p=yield(0,d.decryptSenderKeyMsgFromSession)(c,s.value);if(!p.success)return p;const[f,_]=p.value;return e||(yield i(new Uint8Array(_)),e=!0),yield l(t,n,f),(0,u.makeResult)()})))},t.encryptContent=function(e,t,n,r){let{loadSession:l,handleNewSession:d}=e;return E("encryptContent"),A.lock([(0,s.extractUserJid)(t)],(0,o.default)((function*(){let e=null;do{const o=yield l(t,"cryptoLibraryEncryptContent");if(null==o)return E("encryptContent: errSignalInvalidKey"),(0,u.makeError)("errSignalInvalidKey");if(null!=r&&!(0,a.uint8ArraysEqual)(r,o.remote.pubKey))return E("encryptContent: identity-mismatch"),(0,u.makeError)("identity-mismatch");const[s,p]=yield(0,c.encryptMsg)(o,n),f=yield d(t,s,s.remote.pubKey);f.success?e=(0,u.makeResult)((0,i.default)((0,i.default)({},p),{},{baseKey:s.aliceBaseKey})):f.error}while(null==e);return e})))},t.encryptGroupContent=function(e,t,n,r){let{loadSenderKeySession:i,saveSenderKeySession:a}=e;return E("encryptGroupContent"),A.lock([t,(0,s.extractUserJid)(n)],(0,o.default)((function*(){let e=null;do{const o=yield i(t,n);if(!o.success)return(0,u.makeError)(o.error);const s=o.value,l=yield(0,d.encryptSenderKeyMsgWithSession)(s,r);if(!l.success)return E("encryptGroupContent: sender-key-no-session"),(0,u.makeError)("sender-key-no-session");{const[r,i]=l.value;yield a(t,n,r);const o=s.senderKeyStates[s.senderKeyStates.length-1];e=(0,u.makeResult)({ciphertext:{ciphertext:i,type:"skmsg"},senderKeyId:o.senderKeyId,senderKeyDistributionProto:(0,d.createSenderKeyDistributionProto)((0,p.convertFromRawToSenderKeyState)(o))})}}while(null==e);return e})))},t.establishOutgoingSession=function(){return v.apply(this,arguments)},t.publishLogs=function(e){e(m),m=[]},t.rotateGroupSenderKey=T,t.saveSenderKeySession=function(e,t,n,r){let{loadSenderKeySession:i,saveSenderKeySession:a}=e;return E("saveSenderKeySession"),A.lock([t,(0,s.extractUserJid)(n)],(0,o.default)((function*(){let e=null;if(i){const r=yield i(t,n);e=r.success?r.value:null}const o=yield(0,d.processSenderKeyDistributionMsg)(r,e);if(!o.success)return o;const s=o.value;return yield a(t,n,s),(0,u.makeResult)()})))};var i=r(n(73982)),o=r(n(11504)),a=n(44379),s=n(44037),l=n(22699),u=n(22207),c=n(37344),d=n(3659),p=n(22558),f=n(39876),_=n(75739),g=n(29299),h=n(43313);const A=(0,l.makeLockMap)(6e4);let m=[];function E(e){m.push(e),m.length>=300&&m.shift()}function y(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e,t){E("createOutgoingSession");const n=M(t),{signedKey:r}=n;if(!(yield(0,g.verifyMsgSignalVariant)(n.identity,r.publicKey,r.signature)))return E("createOutgoingSession: errSignalInvalidKey"),(0,u.makeError)("errSignalInvalidKey");const i=yield(0,h.initiateSessionOutgoing)(e,n,(0,f.makeKeyPair)());return(0,u.makeResult)(i)}))).apply(this,arguments)}function v(){return(v=(0,o.default)((function*(e,t,n,r,i){let{handleNewSession:o}=e;E("establishOutgoingSession");const a=yield y(t,r);if(!a.success)return a;const s=a.value;return o(n,s,s.remote.pubKey,null,i)}))).apply(this,arguments)}function I(){return(I=(0,o.default)((function*(e,t,n,r){let{loadSignedPreKey:i,loadOneTimePreKey:o}=e;E("decryptPkMsg");const a=r&&(0,c.findMatchingSession)(r,n.sessionBaseKey);if(a){const e=yield(0,c.decryptMsgFromSession)(a,n);if(!e.success)return e;const[t,r]=e.value;return(0,u.makeResult)({newSessionInfo:null,updatedSession:t,plaintext:r})}{const e=n.localOneTimeKeyId,a=yield i(n.localSignedPreKeyId),s=null==e?null:yield o(e),l=yield(0,c.decryptPkMsgWithNewSession)(t,r,n,{localSignedPreKey:a,localOneTimeKey:s});if(!l.success)return l;const{newIdentity:d,baseSession:p,updatedSession:f,plaintext:_}=l.value;return(0,u.makeResult)({newSessionInfo:{newIdentity:d,baseSession:p,usedPreKey:e},updatedSession:f,plaintext:_})}}))).apply(this,arguments)}function T(e,t,n,r){let{saveSenderKeySession:i}=e;return E("rotateGroupSenderKey"),A.lock([t,(0,s.extractUserJid)(n)],(0,o.default)((function*(){const e=yield(0,h.initiateSenderKeySessionOutgoing)(r),o=e.senderKeyStates[0].senderKeyId;return yield i(t,n,e),{senderKeyId:o}})))}function b(){return(b=(0,o.default)((function*(e,t,n){let{loadSenderKeySession:r,saveSenderKeySession:i}=e;E("createSenderKeyDistributionMsg");let o=yield r(t,n);const a=o.error;if(!o.success&&"errLoadSenderKeySession"===a){const e=yield(0,f.makeKeyPair)();yield T({saveSenderKeySession:i},t,n,e),o=yield r(t,n)}if(o.success){const e=o.value.senderKeyStates.slice(-1);if(e.length>0)return(0,u.makeResult)((0,d.createSenderKeyDistributionProto)((0,p.convertFromRawToSenderKeyState)(e[0])))}return E("createSenderKeyDistributionMsg: errGetSenderKeyProto"),(0,u.makeError)("errGetSenderKeyProto")}))).apply(this,arguments)}function M(e){let{regId:t,identity:n,signedKey:r,oneTimeKey:i}=e;E("sanitizeInitialSessionInfo");const o=(0,f.castToSerializedPubKey)(r.publicKey);return{regId:(0,_.castRegistrationId)(t),identity:(0,f.castToSerializedPubKey)(n),signedKey:{id:(0,f.castToSignedPreKeyId)(r.id),publicKey:o,signature:(0,_.ensureSize)(r.signature,64)},oneTimeKey:i&&{id:(0,f.castToPreKeyId)(i.id),publicKey:(0,f.castToSerializedPubKey)(i.publicKey)},ratchetKey:o}}},37344:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_UNUSED_KEYS=void 0,t.decryptMsg=function(){return S.apply(this,arguments)},t.decryptMsgFromSession=T,t.decryptPkMsgWithNewSession=function(){return v.apply(this,arguments)},t.deserializeMsg=I,t.deserializePkMsg=function(e){const t=C(e,f.FORMAT_VERSION,0);if(!t.success)return t;let n,r,o,a,s;try{const e=(0,A.decodeProtobuf)(g.PreKeySignalMessageSpec,t.value),{registrationId:i,preKeyId:l,signedPreKeyId:u,baseKey:f,identityKey:_,message:h}=e;if(null==i||null==u||null==f||null==_||null==h)return(0,c.makeError)("errSignalDeserializePkInvalidProtoFormat");a=(0,d.castToSerializedPubKey)(new Uint8Array(f)),n={regId:(0,p.castRegistrationId)(i),pubKey:(0,d.castToSerializedPubKey)(new Uint8Array(_))},o=null!=l?(0,d.castToPreKeyId)(l):null,r=(0,d.castToSignedPreKeyId)(u),s=new Uint8Array(h)}catch(e){return(0,c.makeError)("errSignalDeserializePkKeyBadFormat")}const l=I(s);if(!l.success)return l;return(0,c.makeResult)((0,i.default)((0,i.default)({},l.value),{},{remote:n,sessionBaseKey:a,localSignedPreKeyId:r,localOneTimeKeyId:o}))},t.encryptMsg=function(){return y.apply(this,arguments)},t.findMatchingSession=function(e,t){if(D(e,t))return e;const{prevSessions:n}=e;for(let r=0;r<n.length;r++){const i=(0,f.parseSession)(n[r]);if(D(i,t))return(0,f.setPrevSessions)(i,[(0,f.detachSession)(e),...n.slice(0,r),...n.slice(r+1)])}return null},t.readContent=C,t.versionByte=O;var i=r(n(73982)),o=r(n(11504)),a=n(58117),s=n(89323),l=n(47784),u=n(44379),c=n(22207),d=n(39876),p=n(75739),f=n(1674),_=n(29299),g=n(77589),h=n(43313),A=n(33655),m=n(86881);const E=2e3;function y(){return(y=(0,o.default)((function*(e,t){const n=e.sendChain,[r,i]=yield(0,h.deriveMsgKey)(n.nextMsgIndex,n.chainKey),{cipherKey:o,macKey:a}=yield w(i),u=yield(0,l.getCrypto)().subtle.encrypt({name:"AES-CBC",iv:i.iv},o,t),c=new s.Binary;c.writeByteArray(e.local.pubKey),c.writeByteArray(e.remote.pubKey);const d=c.size();c.writeUint8(O(f.FORMAT_VERSION,f.FORMAT_VERSION)),(0,m.encodeProtobuf)(g.SignalMessageSpec,{ratchetKey:n.ratchetKey.serializedPubKey,counter:i.index,previousCounter:e.prevSendChainHighestIndex,ciphertext:u},c);const p=c.readByteArray(),_=yield N(a,p),A=p.subarray(d),E=s.Binary.build(A,new Uint8Array(_,0,8)).readByteArray();let y,S;const v=e.initialExchangeInfo;if(null!=v){var I;const t=new s.Binary;t.writeUint8(O(f.FORMAT_VERSION,f.FORMAT_VERSION)),(0,m.encodeProtobuf)(g.PreKeySignalMessageSpec,{registrationId:e.local.regId,preKeyId:null!==(I=v.remoteOneTimeId)&&void 0!==I?I:void 0,signedPreKeyId:v.remoteSignedId,baseKey:v.localOneTimePubKey,identityKey:e.local.pubKey,message:E},t),y="pkmsg",S=t.readByteArray()}else y="msg",S=E;const T=(0,f.makeSendChain)(n.ratchetKey,i.index+1,r);return[(0,f.updateChains)(e,e.recvChains,T),{type:y,ciphertext:S}]}))).apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e,t){if(null==e)return(0,c.makeError)("errSignalNoSession");const n=yield T(e,t);if(n.success){const[e,t]=n.value;return(0,c.makeResult)({newSessionInfo:null,updatedSession:e,plaintext:t})}{const{prevSessions:r}=e;let i=n;for(let n=0;!i.success&&n<r.length;n++){const o=(0,f.parseSession)(r[n]),a=yield T(o,t);if(a.success){const[t,s]=a.value,l=(0,f.setPrevSessions)(t,[(0,f.detachSession)(e),...r.slice(0,n),...r.slice(n+1)]),d=e&&(0,u.serializedPubKeysEqual)(l.remote.pubKey,e.remote.pubKey)?null:l.remote.pubKey;i=(0,c.makeResult)({newSessionInfo:{newIdentity:d,baseSession:o,usedPreKey:null},updatedSession:l,plaintext:s})}}return i}}))).apply(this,arguments)}function v(){return(v=(0,o.default)((function*(e,t,n,r){var i;const{localSignedPreKey:o}=r;if(null==o)return(0,c.makeError)("errSignalInvalidSignedPreKey");const a=(0,_.deserializeSignedPreKey)(o);if(null==a)return(0,c.makeError)("errSignalSignedPreKeyDeserialization");if(a.id!==n.localSignedPreKeyId)return(0,c.makeError)("errSignalSignedPreKeyIdMismatch");let s=null;if(null!=n.localOneTimeKeyId){const{localOneTimeKey:e}=r;if(null==e)return(0,c.makeError)("errSignalInvalidOneTimeKey");if(s=(0,d.deserializePreKey)(e),null==s)return(0,c.makeError)("errSignalOneTimeKeyDeserialization");if(s.id!==n.localOneTimeKeyId)return(0,c.makeError)("errSignalOneTimeKeyMismatch")}let l=yield(0,h.initiateSessionIncoming)(e,n.remote,n.sessionBaseKey,{signed:a.keyPair,oneTime:null===(i=s)||void 0===i?void 0:i.keyPair,ratchet:(0,d.toSerializedKeyPair)(a.keyPair)});const p=l.remote.pubKey,g=t&&(0,u.serializedPubKeysEqual)(p,t.remote.pubKey)?null:p;t&&!g&&(l=(0,f.setPrevSessions)(l,[(0,f.detachSession)(t),...t.prevSessions.slice(0,39)]));const A=yield T(l,n);if(!A.success)return A;const[m,E]=A.value;return(0,c.makeResult)({newIdentity:g,baseSession:l,updatedSession:m,plaintext:E})}))).apply(this,arguments)}function I(e){let t,n,r=null;try{const i=C(e,f.FORMAT_VERSION,8);if(!i.success)return i;const o=(0,A.decodeProtobuf)(g.SignalMessageSpec,i.value),a=o.ratchetKey;if(r=o.counter,n=o.ciphertext,null==a||null==r||null==n)return(0,c.makeError)("errSignalDeserializeInvalidProtoFormat");t=(0,d.castToSerializedPubKey)(new Uint8Array(a))}catch(e){return(0,c.makeError)("errSignalDeserializeRatchetKeyBadFormat")}const i={ratchetPubKey:t,counter:r,ciphertext:new Uint8Array(n),versionContentMac:e};return(0,c.makeResult)(i)}function T(){return b.apply(this,arguments)}function b(){return(b=(0,o.default)((function*(e,t){let{ratchetPubKey:n,counter:r,ciphertext:i,versionContentMac:o}=t;const a=e.recvChains,p=e.recvChains.findIndex((e=>(0,u.serializedPubKeysEqual)(e.ratchetPubKey,n)));let _,g;if(-1===p){const t=yield(0,h.calculateRatchet)(e.rootKey,e.sendChain.ratchetKey,n),i=(0,f.makeFreshRecvChain)(n,t.chainKey),o=yield M(i,r);if(!o.success)return o;const s=o.value,l=(0,d.makeSerializedKeyPair)(),u=yield(0,h.calculateRatchet)(t.rootKey,l,n),c=a.slice(-4);c.push(s.updatedChain),g=s.msgKey,_=(0,f.ratchetSession)(e,c,(0,f.makeFreshSendChain)(l,u.chainKey),u.rootKey)}else{const t=yield M(a[p],r);if(!t.success)return t;const n=t.value,i=a.slice();i[p]=n.updatedChain,g=n.msgKey,_=(0,f.updateChains)(e,i,e.sendChain)}const{cipherKey:A,macKey:m}=yield w(g),E=s.Binary.build(e.remote.pubKey,e.local.pubKey,o.subarray(0,-8)).readByteArray(),y=yield N(m,E),S=o.subarray(-8),v=!(0,u.uint8ArraysEqual)(new Uint8Array(y,0,8),S);let I=null;try{I=yield(0,l.getCrypto)().subtle.decrypt({name:"AES-CBC",iv:g.iv},A,i)}catch(e){}return v&&null==I?-1===p?(0,c.makeError)("errInvalidMacInvalidCipherKeyNewChain"):(0,c.makeError)("errInvalidMacInvalidCipherKey"):v?(0,c.makeError)("errInvalidMacWithDecryptedPlaintext"):null==I?(0,c.makeError)("errUnknownInvalidCipherKey"):(0,c.makeResult)([_,I])}))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=(0,o.default)((function*(e,t){const n=t-e.nextMsgIndex;let r=2e3;try{r=(0,a.getConfig)().getSignalFutureMessagesMax()}catch(e){__LOG__(4,void 0,new Error)`This would only fail if config is not initialised`}if(n>r)return(0,c.makeError)("errSignalTooManyMessagesInFuture");const i=e.unusedMsgKeys;if(n<0){const n=i.findIndex((e=>e.index===t));return-1===n?(0,c.makeError)("errDuplicateMsg"):(0,c.makeResult)({msgKey:i[n],updatedChain:(0,f.makeRecvChain)(e.ratchetPubKey,e.nextMsgIndex,e.chainKey,R(i,n))})}const o=e.nextMsgIndex;let[s,l]=yield(0,h.deriveMsgKey)(o,e.chainKey),u=null;if(n>0){let e=n+i.length-E;e>0?(u=i.slice(e),e-=i.length):u=i.slice();for(let n=o+1;n<=t;n++){e>0?e--:u.push(l);const t=yield(0,h.deriveMsgKey)(n,s);s=t[0],l=t[1]}}return(0,c.makeResult)({msgKey:l,updatedChain:(0,f.makeRecvChain)(e.ratchetPubKey,t+1,s,u||i)})}))).apply(this,arguments)}function C(e,t,n){if(e.length<1)return(0,c.makeError)("errSignalEmptyVersionContentSuffix");const r=e[0]>>>4;if(r!==t)return r<t?(0,c.makeError)("errSignalLegacyMsg"):(0,c.makeError)("errSignalInvalidVersion");const i=e.length-n;return i<1?(0,c.makeError)("errSignalContentExceededExpectedLength"):(0,c.makeResult)(e.subarray(1,i))}function O(e,t){return 255&(e<<4|t)}function R(e,t){const n=[];for(let r=0;r<e.length;r++)r!==t&&n.push(e[r]);return n}function N(e,t){return(0,l.getCrypto)().subtle.sign(p.HMAC_SHA256,e,t)}function w(e){return Promise.all([(0,p.makeCryptoKey)(e.cipherKey,"aes-cbc"),(0,p.makeCryptoKey)(e.macKey,"hmac-sha256")]).then((e=>{let[t,n]=e;return{cipherKey:t,macKey:n}}))}function D(e,t){const{aliceBaseKey:n}=e;return!!n&&(0,u.serializedPubKeysEqual)(n,t)}t.MAX_UNUSED_KEYS=E},39876:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_TYPE=void 0,t.castToPreKeyId=h,t.castToSerializedPubKey=A,t.castToSignedPreKeyId=function(e){return(0,l.ensureIntInRange)(e,0,c)},t.deserializePreKey=function(e){try{const{id:t,publicKey:n,privateKey:r}=(0,u.decodeProtobuf)(s.PreKeyRecordStructureSpec,e);return null==t||null==n||null==r?null:{id:h(t),keyPair:f((0,l.toBytes)(r,32),A(new Uint8Array(n)))}}catch(e){return null}},t.ecdh=function(e,t){return(0,o.scalarMult)(e,t.subarray(1)).buffer},t.makeKeyPair=p,t.makeKeyPairFrom=function(e){const{publicKey:t,secretKey:n}=(0,o.keypairFromSecretKey)(e);return d((0,l.ensureSize)(t,32),(0,l.ensureSize)(n,32))},t.makeKeyPairFromArrayBuffers=function(e,t){return{publicKey:(0,l.toBytes)(e,32),privateKey:(0,l.toBytes)(t,32)}},t.makeKeyPairFromSerialized=f,t.makePreKeys=function(e,t){let n=(e-1)%c;n<=0&&(n+=c);const r=[];for(let e=0;e<t;e++){const e=n===c?1:n+1,t=p(),i=(0,l.encodeSignalProto)(s.PreKeyRecordStructureSpec,{id:e,publicKey:g(t),privateKey:t.privateKey});r.push({plainObject:{id:e,keyPair:t},record:i}),n=e}return r},t.makeRawSenderKey=function(){const e=(0,l.makeBytes)(32);return(0,i.getCrypto)().getRandomValues(e),e},t.makeSerializedKeyPair=function(){const e=p();return _(e.privateKey,g(e))},t.makeSerializedKeyPairFrom=_,t.serializeIdentity=function(e){const t=(0,l.makeBytes)(33);return t[0]=5,t.set((0,l.ensureSize)(e,32),1),t},t.serializePubKey=g,t.toSerializedKeyPair=function(e){return _(e.privateKey,g(e))};var i=n(47784),o=n(65461),a=r(n(82065)),s=n(36379),l=n(75739),u=n(33655);t.KEY_TYPE=5;const c=16777215;function d(e,t){return{publicKey:e,privateKey:t}}function p(){const{publicKey:e,secretKey:t}=(0,o.keyPair)();return t[0]&=248,t[31]=64|63&t[31],d((0,l.ensureSize)(e,32),(0,l.ensureSize)(t,32))}function f(e,t){return d((0,l.sliceBytes)(t,1,32),e)}function _(e,t){return{serializedPubKey:t,privateKey:e}}function g(e){const t=(0,l.makeBytes)(33);return t[0]=5,t.set(e.publicKey,1),t}function h(e){return(0,l.ensureIntInRange)(e,1,c)}function A(e){if(0===e.length||5!==e[0])throw(0,a.default)("Unrecognized public key type");return(0,l.ensureSize)(e,33)}},75739:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.HMAC_SHA256=t.AES_CBC=void 0,t.areSessionHashesEqual=function(e,t){return(0,a.arrayBuffersEqual)(e,t)},t.castRegistrationId=function(e){return _(e)},t.castRegistrationIdFromBytes=function(e){return(0,l.convertBytesToUint)(e,4)},t.castSenderKeyId=function(e){return _(e)},t.castToByteEncoded=function(e){return e},t.castToSessionHash=function(e){return e},t.decodeSignalProto=function(e,t,n){return n((0,u.decodeProtobuf)(e,t))},t.encodeSignalProto=function(e,t){return(0,c.encodeProtobuf)(e,t).readByteArray()},t.ensureIntInRange=_,t.ensureSize=f,t.hkdf=function(e,t,n,r){return(0,o.extractWithSaltAndExpand)(e,t,n,r).then((e=>new Uint8Array(e)))},t.makeBytes=function(e){return new Uint8Array(e)},t.makeCryptoKey=function(e,t){let n,r;"hmac-sha256"===t?(n=p,r=["sign"]):(n=d,r=["encrypt","decrypt"]);return(0,i.getCrypto)().subtle.importKey("raw",e,n,!1,r)},t.makeRegistrationId=function(e){const t="extendedRange"===e?2147483646:16380;return(0,a.randomNumberLessThan)(t)+1},t.makeSenderKeyId=function(){return(0,a.randomNumberLessThan)(-1>>>1)+1},t.readBytes=function(e,t){return e.readByteArray(t)},t.sliceBytes=function(e,t,n){if(e.length-t<n)throw(0,s.default)(`Can not split off ${n} bytes from index ${t} of ${e.length} bytes`);return e.slice(t,t+n)},t.toBuffer=function(e){const t=e.buffer,n=e.byteOffset,r=e.length;return 0===n&&r===t.byteLength?t:t.slice(n,n+r)},t.toBytes=function(e,t){return f(new Uint8Array(e),t)};var i=n(47784),o=n(70238),a=n(44379),s=r(n(82065)),l=n(78481),u=n(33655),c=n(86881);const d={name:"AES-CBC"};t.AES_CBC=d;const p={name:"HMAC",hash:"SHA-256"};function f(e,t){if(e.length!==t)throw(0,s.default)(`Signal expected ${t} bytes, given ${e.length}`);return e}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4294967296;if("number"==typeof e&&t<=e&&e<n&&Math.floor(e)===e)return e;throw(0,s.default)(`Expected integer in range [${t}, ${n}), given ${String(e)}`)}t.HMAC_SHA256=p},1674:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.FORMAT_VERSION=void 0,t._parseSession=_,t.bytesOrThrow=h,t.definedOrThrow=A,t.detachSession=function(e){const{local:t,remote:n,sendChain:r,initialExchangeInfo:i}=e;let o;if(i){const{remoteOneTimeId:e}=i;o={preKeyId:null!=e?e:void 0,signedPreKeyId:i.remoteSignedId,baseKey:(0,s.toBuffer)(i.localOneTimePubKey)}}return{sessionVersion:3,localIdentityPublic:(0,s.toBuffer)(t.pubKey),remoteIdentityPublic:(0,s.toBuffer)(n.pubKey),rootKey:(0,s.toBuffer)(e.rootKey),previousCounter:e.prevSendChainHighestIndex,senderChain:{senderRatchetKey:(0,s.toBuffer)(r.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:(0,s.toBuffer)(r.ratchetKey.privateKey),chainKey:{index:r.nextMsgIndex,key:(0,s.toBuffer)(r.chainKey)},messageKeys:[]},receiverChains:e.recvChains.map((e=>({senderRatchetKey:(0,s.toBuffer)(e.ratchetPubKey),chainKey:{index:e.nextMsgIndex,key:(0,s.toBuffer)(e.chainKey)},messageKeys:e.unusedMsgKeys.map((e=>({index:e.index,cipherKey:(0,s.toBuffer)(e.cipherKey),macKey:(0,s.toBuffer)(e.macKey),iv:(0,s.toBuffer)(e.iv)})))}))),pendingPreKey:o,remoteRegistrationId:n.regId,localRegistrationId:t.regId,aliceBaseKey:null==e.aliceBaseKey?void 0:(0,s.toBuffer)(e.aliceBaseKey)}},t.makeFreshRecvChain=function(e,t){return l(e,0,t,[])},t.makeFreshSendChain=function(e,t){return u(e,0,t)},t.makeFreshSession=function(e,t,n,r,i,o,a){return d(e,t,n,r,i,o,0,[],a)},t.makeInitialExchangeInfo=c,t.makeRecvChain=l,t.makeSendChain=u,t.makeSession=d,t.parseSession=function(e){return _(e,[])},t.parseSessionFromRecord=function(e){return _(A(e.currentSession,"currentSession"),e.previousSessions)},t.ratchetSession=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.sendChain,r=arguments.length>3?arguments[3]:void 0;return d(e.local,e.remote,r,t,n,null,Math.max(e.sendChain.nextMsgIndex-1,0),e.prevSessions,e.aliceBaseKey)},t.serializeSession=function(e){const{local:t,remote:n,initialExchangeInfo:r}=e;let i;if(r){const{remoteOneTimeId:e}=r;i={preKeyId:null!=e?e:void 0,signedPreKeyId:r.remoteSignedId,baseKey:r.localOneTimePubKey}}return{currentSession:{sessionVersion:3,localIdentityPublic:t.pubKey,remoteIdentityPublic:n.pubKey,rootKey:e.rootKey,previousCounter:e.prevSendChainHighestIndex,senderChain:f(e.sendChain),receiverChains:e.recvChains.map(p),pendingPreKey:i,remoteRegistrationId:n.regId,localRegistrationId:t.regId,aliceBaseKey:e.aliceBaseKey},previousSessions:e.prevSessions}},t.setPrevSessions=function(e,t){return d(e.local,e.remote,e.rootKey,e.recvChains,e.sendChain,e.initialExchangeInfo,e.prevSendChainHighestIndex,t,e.aliceBaseKey)},t.splitMsgKey=function(e,t){const n=new i.Binary(t),r=(0,s.readBytes)(n,32),o=(0,s.readBytes)(n,32),a=(0,s.readBytes)(n,16);return function(e,t,n,r){return{index:e,cipherKey:t,macKey:n,iv:r}}(e,r,o,a)},t.updateChains=function(e,t,n){return d(e.local,e.remote,e.rootKey,t,n,e.initialExchangeInfo,e.prevSendChainHighestIndex,e.prevSessions,e.aliceBaseKey)};var i=n(89323),o=r(n(82065)),a=n(39876),s=n(75739);function l(e,t,n,r){return{ratchetPubKey:e,nextMsgIndex:t,chainKey:n,unusedMsgKeys:r}}function u(e,t,n){return{ratchetKey:e,nextMsgIndex:t,chainKey:n}}function c(e,t,n){return{remoteOneTimeId:e,remoteSignedId:t,localOneTimePubKey:n}}function d(e,t,n,r,i,o,a,s,l){return{local:e,remote:t,rootKey:n,sendChain:i,recvChains:r,initialExchangeInfo:o,prevSendChainHighestIndex:a,prevSessions:s,aliceBaseKey:l}}function p(e){return{senderRatchetKey:e.ratchetPubKey,chainKey:{index:e.nextMsgIndex,key:e.chainKey},messageKeys:e.unusedMsgKeys}}function f(e){const t=e.ratchetKey;return{senderRatchetKey:t.serializedPubKey,senderRatchetKeyPrivate:t.privateKey,chainKey:{index:e.nextMsgIndex,key:e.chainKey}}}function _(e,t){const n=A(e.sessionVersion,"sessionVersion");if(3!==n)throw(0,o.default)(`Signal: bad session version ${n}`);const r=A(e.senderChain,"senderChain"),i=A(r.chainKey,"senderChain.chainKey"),p=u((0,a.makeSerializedKeyPairFrom)(h(r.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),g(r.senderRatchetKey,"senderRatchetKey")),A(i.index,"senderChain.chainKey.index"),h(i.key,32,"senderChain.chainKey.key")),f=A(e.receiverChains,"receiverChains").map((e=>{const t=A(e.chainKey,"receiverChains[].chainKey");return l(g(e.senderRatchetKey,"receiverChains[].senderRatchetKey"),A(t.index,"receiverChains[].chainKey.index"),h(t.key,32,"receiverChains[].chainKey.key"),e.messageKeys.map((e=>({index:A(e.index,"messageKeys[].index"),cipherKey:h(e.cipherKey,32,"messageKeys[].cipherKey"),macKey:h(e.macKey,32,"messageKeys[].macKey"),iv:h(e.iv,16,"messageKeys[].iv")}))))})),_={regId:(0,s.castRegistrationId)(A(e.localRegistrationId,"localRegistrationId")),pubKey:g(e.localIdentityPublic,"localIdentityPublic")},m={regId:(0,s.castRegistrationId)(A(e.remoteRegistrationId,"remoteRegistrationId")),pubKey:g(e.remoteIdentityPublic,"remoteIdentityPublic")},E=e.pendingPreKey;let y=null;if(E){const e=E.preKeyId;y=c(null!=e?(0,a.castToPreKeyId)(e):null,(0,a.castToSignedPreKeyId)(A(E.signedPreKeyId,"pendingPreKey.signedPreKeyId")),g(E.baseKey,"pendingPreKey.baseKey"))}const S=null==e.aliceBaseKey?null:g(e.aliceBaseKey,"aliceBaseKey");return d(_,m,h(e.rootKey,32,"rootKey"),f,p,y,e.previousCounter||0,t,S)}function g(e,t){return(0,a.castToSerializedPubKey)(new Uint8Array(A(e,t)))}function h(e,t,n){return(0,s.toBytes)(A(e,n),t)}function A(e,t){if(null==e)throw(0,o.default)(`Signal: protobuf is missing ${t}`);return e}t.FORMAT_VERSION=3},29299:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.convertPublicKeyHexToUint8Array=function(e){return new Uint8Array((0,l.parseHex)(e))},t.convertPublicKeyToSerializedPubKey=function(e){if(33===e.length)return(0,c.castToSerializedPubKey)(e);if(32===e.length)return(0,c.serializeIdentity)(e);throw(0,s.default)("verifyCertificate publicKey incorrect length")},t.deserializeSignedPreKey=function(e){try{const{id:t,publicKey:n,privateKey:r,signature:i,timestamp:o}=(0,f.decodeProtobuf)(d.SignedPreKeyRecordStructureSpec,e);return null==t||null==n||null==r||null==i||null==o?null:{id:(0,c.castToSignedPreKeyId)(t),ts:(0,u.numberOrThrowIfTooLarge)(o),keyPair:(0,c.makeKeyPairFromSerialized)((0,p.toBytes)(r,32),(0,c.castToSerializedPubKey)(new Uint8Array(n))),signature:(0,p.toBytes)(i,64)}}catch(e){return null}},t.generateSignedPreKey=function(e,t,n){return Promise.resolve().then((()=>{const r=g(e,t,n);return{plainObject:r,record:h(r)}}))},t.makeSignature=_,t.makeSignedPreKey=g,t.serializeSignedPreKeyForPrivateStorage=h,t.signMsg=function(e,t){return Promise.resolve().then((()=>{const n=(0,p.makeBytes)(64);return(0,i.getCrypto)().getRandomValues(n),_(e,t,n)}))},t.signSenderKeyMessage=function(e,t){const n=(0,p.makeBytes)(64);return(0,i.getCrypto)().getRandomValues(n),_(e,t,n)},t.verifyMsgSignalVariant=function(e,t,n){const r=n[63];if(96&r)return!1;return(0,o.runInAllocationScope)((()=>{const{A:i,M:s,Z:l,pack25519:u,unpack25519:c}=a.lowlevel,d=(0,o.allocate)(Uint8Array,64);d.set(n),d[63]=127&r;const p=(0,o.fieldElement)(),f=(0,o.fieldElement)(),_=(0,o.fieldElement)(),g=(0,o.fieldElement)(),h=(0,o.fieldElement)(),A=(0,o.allocate)(Uint8Array,32),m=(0,o.fieldElement)();return m[0]=1,c(p,e.subarray(1)),l(f,p,m),i(_,p,m),(0,o.inv25519)(g,_),s(h,f,g),u(A,h),A[31]=127&A[31]|128&r,(0,a.signDetachedVerify)(t,d,A)}))};var i=n(47784),o=n(73102),a=n(65461),s=r(n(82065)),l=n(65982),u=n(22101),c=n(39876),d=n(36379),p=n(75739),f=n(33655);function _(e,t,n){const r=function(e,t,n){return(0,o.runInAllocationScope)((()=>{const r=t.length,i=e.privateKey,a=new Uint8Array(32);(0,o.scalarmultBase)(a,i);const s=128&a[31],l=new Uint8Array(r+128);l[0]=254,l.fill(255,1,32),l.set(i,32),l.set(t,64),l.set(n,r+64);const u=(0,o.allocate)(Uint8Array,64);(0,o.hashSha512)(u,l,r+128),l.set(a,32);const c=(0,o.allocate)(Float64Array,64);(0,o.reduce)(u,c),(0,o.scalarmultBase)(l,u);const d=(0,o.allocate)(Uint8Array,64);let p,f;for((0,o.hashSha512)(d,l,r+64),(0,o.reduce)(d,c),p=0;p<32;++p)c[p]=u[p];for(p=0;p<32;++p)for(f=0;f<32;++f)c[p+f]+=d[p]*i[f];return(0,o.modL)(l.subarray(32,64),c),{pubKeyNegative:0!==s,signedMsg:l}}))}(e,t,n),i=(0,p.sliceBytes)(r.signedMsg,0,64);return i[63]=127&i[63]|(r.pubKeyNegative?128:0),i}function g(e,t,n){const r=(0,c.makeKeyPair)(),o=(0,p.makeBytes)(64);(0,i.getCrypto)().getRandomValues(o);const a=_(n,(0,c.serializePubKey)(r),o);if(!Number.isSafeInteger(t))throw(0,s.default)(`Expected timestamp to be a safe integer, given ${String(t)}`);return{id:(0,c.castToPreKeyId)(e),ts:t,keyPair:r,signature:a}}function h(e){const{id:t,keyPair:n}=e;return(0,p.encodeSignalProto)(d.SignedPreKeyRecordStructureSpec,{id:t,publicKey:(0,c.serializePubKey)(n),privateKey:n.privateKey,signature:e.signature,timestamp:e.ts})}},43313:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRatchet=m,t.deriveMsgKey=function(){return h.apply(this,arguments)},t.deriveSenderKeyMsgKey=function(){return A.apply(this,arguments)},t.initiateSenderKeySessionIncoming=function(e,t,n,r,i){const o=(0,s.makeSenderKeyState)(n,void 0,(0,s.makeSenderKeyChainKey)(t,r),e,[]);let a=null;a=i?(0,s.updateSessionWithNewSenderKeyState)(i,o):(0,s.makeNewSenderKeySession)(o);return Promise.resolve(a)},t.initiateSenderKeySessionOutgoing=function(e){const t=(0,s.makeSenderKeyState)((0,l.serializePubKey)(e),e.privateKey,(0,s.makeSenderKeyChainKey)(0,(0,l.makeRawSenderKey)()),(0,u.makeSenderKeyId)(),[]);return Promise.resolve((0,s.makeNewSenderKeySession)(t))},t.initiateSessionIncoming=function(){return g.apply(this,arguments)},t.initiateSessionOutgoing=function(){return _.apply(this,arguments)};var i=r(n(11504)),o=n(89323),a=n(47784),s=n(22558),l=n(39876),u=n(75739),c=n(1674);const d=new Uint8Array(32);d.fill(255);const p=new Uint8Array([1]),f=new Uint8Array([2]);function _(){return(_=(0,i.default)((function*(e,t,n){var r;let{regId:i,staticKeyPair:a}=e;const s=t.identity,u=t.signedKey.publicKey,p=n.privateKey,f=a.privateKey,_=null===(r=t.oneTimeKey)||void 0===r?void 0:r.publicKey,g=o.Binary.build(d,v(f,u),v(p,s),v(p,u),_&&v(p,_)).readByteArray(),[h,A]=yield y(g,"WhisperText"),E=t.ratchetKey,S=(0,c.makeFreshRecvChain)(E,A),I=(0,l.makeSerializedKeyPair)(),T=yield m(h,I,E),b=(0,c.makeInitialExchangeInfo)(null==t.oneTimeKey?null:t.oneTimeKey.id,t.signedKey.id,(0,l.serializePubKey)(n));return(0,c.makeFreshSession)({regId:i,pubKey:(0,l.serializePubKey)(a)},{regId:t.regId,pubKey:s},T.rootKey,[S],(0,c.makeFreshSendChain)(I,T.chainKey),b,(0,l.serializePubKey)(n))}))).apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e,t,n,r){var i;let{regId:a,staticKeyPair:s}=e;const u=s.privateKey,p=r.signed.privateKey,f=n,_=t.pubKey,g=null===(i=r.oneTime)||void 0===i?void 0:i.privateKey,h=o.Binary.build(d,I(_,p),I(f,u),I(f,p),g&&I(f,g)).readByteArray(),[A,m]=yield y(h,"WhisperText"),E=r.ratchet,S=(0,c.makeFreshSendChain)(E,m);return(0,c.makeSession)({regId:a,pubKey:(0,l.serializePubKey)(s)},t,A,[],S,null,0,[],n)}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e,t){const n=yield(0,u.makeCryptoKey)(t,"hmac-sha256"),r=e=>(0,a.getCrypto)().subtle.sign({name:"HMAC",hash:"SHA-256"},n,e),i=r(p).then((e=>(0,u.hkdf)(new Uint8Array(e),null,"WhisperMessageKeys",80))).then((t=>(0,c.splitMsgKey)(e,t))),o=r(f).then((e=>(0,u.toBytes)(e,32)));return Promise.all([o,i])}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e,t){const n=yield(0,u.makeCryptoKey)(t,"hmac-sha256"),r=e=>(0,a.getCrypto)().subtle.sign({name:"HMAC",hash:"SHA-256"},n,e),i=r(p).then((e=>(0,u.hkdf)(new Uint8Array(e),null,"WhisperGroup",50))).then((t=>(0,s.makeSenderKeyMsgKey)(e,t))),o=r(f).then((e=>(0,u.toBytes)(e,32)));return Promise.all([o,i])}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t,n){const r=t.privateKey,i=(0,l.ecdh)(r,n),[o,a]=yield y(new Uint8Array(i),"WhisperRatchet",e);return{rootKey:o,chainKey:a}}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=yield(0,u.hkdf)(e,n,t,64);return[(0,u.sliceBytes)(r,0,32),(0,u.sliceBytes)(r,32,32)]}))).apply(this,arguments)}function v(e,t){return new Uint8Array((0,l.ecdh)(e,t))}function I(e,t){return v(t,e)}},3659:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.createSenderKeyDistributionProto=function(e){const t=(0,c.serializeSenderKeyState)(e),n=new a.Binary;return n.writeUint8((0,u.versionByte)(c.FORMAT_VERSION,c.FORMAT_VERSION)),(0,m.encodeProtobuf)(g.SenderKeyDistributionMessageSpec,{id:t.senderKeyId,iteration:(0,f.definedOrThrow)(t.senderChainKey,"senderChainKey").iteration,chainKey:(0,f.definedOrThrow)(t.senderChainKey,"senderChainKey").seed,signingKey:(0,f.definedOrThrow)(t.senderSigningKey,"senderSigningKey").public},n),n.readByteArray()},t.decryptSenderKeyMsgFromSession=function(){return S.apply(this,arguments)},t.deserializeSenderKeyMsg=function(e){if(e.length<1)return(0,l.makeError)("errSignalGrpVersionContentEmpty");const t=e[0]>>>4;if(t!==c.FORMAT_VERSION)return t<c.FORMAT_VERSION?(0,l.makeError)("errSignalLegacyMsg"):(0,l.makeError)("errSignalInvalidVersion");if(e.length<65)return(0,l.makeError)("errSignalGrpInvalidVersionContentLength");let n,r,i;try{const t=e.subarray(1,-64),o=(0,A.decodeProtobuf)(g.SenderKeyMessageSpec,t);if(n=o.id,r=o.iteration,i=o.ciphertext,null==n||null==r||null==i)return(0,l.makeError)("errSignalGrpSenderKeyInvalidProtoFormat")}catch(e){return __LOG__(4,void 0,new Error)`Exception caught during SenderKeyMessageSpec Proto: ${e}`,(0,l.makeError)("errSignalGrpSenderKeyProtoError")}return(0,l.makeResult)({senderKeyMessageId:n,iteration:r,ciphertext:new Uint8Array(i),versionContentMac:e})},t.encryptSenderKeyMsgWithSession=function(){return y.apply(this,arguments)},t.processSenderKeyDistributionMsg=function(){return E.apply(this,arguments)};var i=r(n(11504)),o=n(58117),a=n(89323),s=n(47784),l=n(22207),u=n(37344),c=n(22558),d=n(39876),p=n(75739),f=n(1674),_=n(29299),g=n(77589),h=n(43313),A=n(33655),m=n(86881);function E(){return(E=(0,i.default)((function*(e,t){const n=v(e);if(!n.success)return n;const{senderKeyId:r,iteration:i,signingKeyPublic:o,chainKey:a}=n.value,s=yield(0,h.initiateSenderKeySessionIncoming)(r,i,o,a,t);return(0,l.makeResult)(s)}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){if(!e.senderKeyStates||0===e.senderKeyStates.length)return(0,l.makeError)("errSignalNoSession");const n=e.senderKeyStates[e.senderKeyStates.length-1],[r,i]=yield(0,h.deriveSenderKeyMsgKey)(n.senderKeyChainKey.nextMsgIndex,n.senderKeyChainKey.chainKey),[o,p]=yield I(i.seed),A=yield(0,s.getCrypto)().subtle.encrypt({name:"AES-CBC",iv:p},o,t),E=new a.Binary;(0,m.encodeProtobuf)(g.SenderKeyMessageSpec,{id:n.senderKeyId,iteration:i.iteration,ciphertext:A},E);const y=new a.Binary;y.writeUint8((0,u.versionByte)(c.FORMAT_VERSION,c.FORMAT_VERSION)),y.writeBinary(E);const S=(0,d.makeKeyPairFromSerialized)((0,f.definedOrThrow)(n.senderSigningKeyPrivate,"senderSigningKeyPrivate"),n.senderSigningKeyPublic),v=(0,_.signSenderKeyMessage)(S,y.readByteArray()),T=new a.Binary;T.writeUint8((0,u.versionByte)(c.FORMAT_VERSION,c.FORMAT_VERSION)),T.writeBinary(E),T.writeByteArray(v);const b=(0,c.makeSenderKeyChainKey)(i.iteration+1,r),M=(0,c.updateSessionWithUpdatedSenderKeyState)(e,(0,c.makeSenderKeyState)(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,b,n.senderKeyId,n.unusedMsgKeys));return(0,l.makeResult)([M,T.readByteArray()])}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e,t){let{senderKeyMessageId:n,iteration:r,ciphertext:i,versionContentMac:o}=t;const a=(0,c.findSenderKeyState)(e,n);if(null==a)return(0,l.makeError)("errSignalNoSession");if(!b(o,a.senderSigningKeyPublic))return(0,l.makeError)("errSignalInvalidKey");const u=yield M(a,r);if(!u.success)return u;const d=u.value,p=d.msgKey,f=(0,c.updateSessionWithUpdatedSenderKeyState)(e,d.updatedSenderKeyState),[_,g]=yield I(p.seed),h=yield(0,s.getCrypto)().subtle.decrypt({name:"AES-CBC",iv:g},_,i);return(0,l.makeResult)([f,h])}))).apply(this,arguments)}function v(e){let t,n,r,i,o;try{if(o=(0,u.readContent)(e,c.FORMAT_VERSION,0),!o.success)return o;const a=(0,A.decodeProtobuf)(g.SenderKeyDistributionMessageSpec,o.value);t=a.id,n=a.iteration;const s=(0,f.bytesOrThrow)(a.signingKey,33,"signingKey");if(r=(0,d.castToSerializedPubKey)(s),i=(0,f.bytesOrThrow)(a.chainKey,32,"chainKey"),null==t||null==n)return(0,l.makeError)("errSignalGrpInvalidProtoFormat")}catch(e){return(0,l.makeError)("errSignalGrpInvalidKeyFormat")}return(0,l.makeResult)({senderKeyId:t,iteration:n,signingKeyPublic:r,chainKey:i})}function I(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e){const t=new a.Binary(e),n=(0,p.readBytes)(t,16),r=(0,p.readBytes)(t,32);return[yield(0,p.makeCryptoKey)(r,"aes-cbc"),n]}))).apply(this,arguments)}function b(e,t){const n=e.subarray(e.length-64),r=e.subarray(0,e.length-64);return(0,_.verifyMsgSignalVariant)(t,r,(0,p.toBytes)((0,p.toBuffer)(n),64))}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t){const n=e,r=t-n.senderKeyChainKey.nextMsgIndex;let i=2e3;try{i=(0,o.getConfig)().getSignalFutureMessagesMax()}catch(e){__LOG__(4,void 0,new Error)`This would only fail if config is not initialised`}if(r>i)return(0,l.makeError)("errSignalGrpTooManyMessagesInFuture");const a=e.unusedMsgKeys||[];if(r<0){const e=a.findIndex((e=>e.iteration===t));return-1===e?(0,l.makeError)("errDuplicateMsg"):(0,l.makeResult)({msgKey:a[e],updatedSenderKeyState:(0,c.makeSenderKeyState)(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,n.senderKeyChainKey,n.senderKeyId,C(a,e))})}const s=n.senderKeyChainKey.nextMsgIndex;let[d,p]=yield(0,h.deriveSenderKeyMsgKey)(s,n.senderKeyChainKey.chainKey),f=null;if(r>0){let e=r+a.length-u.MAX_UNUSED_KEYS;e>0?(f=a.slice(e),e-=a.length):f=a.slice();for(let n=s+1;n<=t;n++){e>0?e--:f.push(p);const t=yield(0,h.deriveSenderKeyMsgKey)(n,d);d=t[0],p=t[1]}}return(0,l.makeResult)({msgKey:p,updatedSenderKeyState:(0,c.makeSenderKeyState)(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,(0,c.makeSenderKeyChainKey)(t+1,d),e.senderKeyId,f||a)})}))).apply(this,arguments)}function C(e,t){const n=[];for(let r=0;r<e.length;r++)r!==t&&n.push(e[r]);return n}},22558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORMAT_VERSION=void 0,t._parseSession=s,t.convertFromRawToSenderKeyState=function(e){return e},t.findSenderKeyState=function(e,t){const n=e.senderKeyStates.findIndex((e=>e.senderKeyId===t));if(-1===n)return;return e.senderKeyStates[n]},t.makeNewSenderKeySession=function(e){return{senderKeyStates:[e]}},t.makeSenderKeyChainKey=a,t.makeSenderKeyMsgKey=o,t.makeSenderKeySessionFromRecord=l,t.makeSenderKeyState=function(e,t,n,r,i){return{senderSigningKeyPublic:e,senderSigningKeyPrivate:t,senderKeyChainKey:n,senderKeyId:r,unusedMsgKeys:null==i?[]:i}},t.parseSessionFromRecord=function(e){return s((0,i.definedOrThrow)(e.senderKeyStates,"senderKeyStates"))},t.serializeSenderKeyState=u,t.serializeSession=function(e){return{senderKeyStates:e.senderKeyStates.map((e=>u(e)))}},t.updateSessionWithNewSenderKeyState=function(e,t){const n=e.senderKeyStates.slice(e.senderKeyStates.length>4?1:0);return n.push(t),{senderKeyStates:n}},t.updateSessionWithUpdatedSenderKeyState=function(e,t){const n=e.senderKeyStates.findIndex((e=>e.senderKeyId===t.senderKeyId));return{senderKeyStates:e.senderKeyStates.map(((e,r)=>r===n?t:e))}};var r=n(39876),i=n(1674);function o(e,t){return{iteration:e,seed:t}}function a(e,t){return{nextMsgIndex:e,chainKey:t}}function s(e){return l(e)}function l(e){return{senderKeyStates:e.map((e=>function(e){const t=(0,i.definedOrThrow)(e.senderSigningKey,"senderSigningKey"),n=(0,i.definedOrThrow)(e.senderMessageKeys,"senderMessageKeys"),r=(0,i.definedOrThrow)(e.senderChainKey,"senderChainKey");return{senderSigningKeyPublic:c(t.public,"public"),senderSigningKeyPrivate:t.private?(0,i.bytesOrThrow)(t.private,32,"private"):void 0,senderKeyId:(0,i.definedOrThrow)(e.senderKeyId,"senderKeyId"),unusedMsgKeys:n.map((e=>o((0,i.definedOrThrow)(e.iteration,"iteration"),(0,i.bytesOrThrow)(e.seed,50,"seed")))),senderKeyChainKey:a((0,i.definedOrThrow)(r.iteration,"iteration"),(0,i.bytesOrThrow)(r.seed,32,"seed"))}}(e)))}}function u(e){return{senderKeyId:e.senderKeyId,senderChainKey:{iteration:e.senderKeyChainKey.nextMsgIndex,seed:e.senderKeyChainKey.chainKey},senderSigningKey:{public:e.senderSigningKeyPublic,private:e.senderSigningKeyPrivate},senderMessageKeys:e.unusedMsgKeys.map((e=>{let{iteration:t,seed:n}=e;return{iteration:t,seed:n}}))}}function c(e,t){return(0,r.castToSerializedPubKey)(new Uint8Array((0,i.definedOrThrow)(e,t)))}t.FORMAT_VERSION=3},66413:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendRequestSilentNonceRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(93069),s=n(72823),l=n(90314),u=n(58047),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeRequestSilentNonceRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseRequestSilentNonceResponseSuccess)(r,n);if(i.success)return{name:"RequestSilentNonceResponseSuccess",value:i.value};const p=(0,s.parseRequestSilentNonceResponseRecoveryRequired)(r,n);if(p.success)return{name:"RequestSilentNonceResponseRecoveryRequired",value:p.value};const f=(0,a.parseRequestSilentNonceResponseError)(r,n);if(f.success)return{name:"RequestSilentNonceResponseError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("RequestSilentNonce",{Success:i,RecoveryRequired:p,Error:f}))}))).apply(this,arguments)}},95972:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseHackBaseIQErrorResponseMixin=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.optional)(s.attrUserJid,e,"to");if(!r.success)return r;const u=(0,a.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({to:r.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(11048),s=n(25162),l=n(26679)},86332:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseHackBaseIQResultResponseMixin=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.optional)(s.attrUserJid,e,"to");if(!r.success)return r;const u=(0,a.parseIQResultResponseMixin)(e,t);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({to:r.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(40035),s=n(25162),l=n(26679)},96859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","bad-request");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",400);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},51092:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,o.parseIQErrorForbiddenMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorForbidden",value:n.value});const u=(0,a.parseIQErrorInternalServerErrorMixin)(e);if(u.success)return(0,r.makeResult)({name:"IQErrorInternalServerError",value:u.value});const c=(0,s.parseIQErrorServiceUnavailableMixin)(e);if(c.success)return(0,r.makeResult)({name:"IQErrorServiceUnavailable",value:c.value});return(0,l.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[t,n,u,c])};var r=n(22207),i=n(96859),o=n(1594),a=n(6357),s=n(45274),l=n(26679)},1594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorForbiddenMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","forbidden");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",403);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},6357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorInternalServerErrorMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","internal-server-error");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",500);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},11048:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","error");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},45274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorServiceUnavailableMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","service-unavailable");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",503);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},40035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQResultResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","result");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},93069:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseRequestSilentNonceResponseError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseHackBaseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,s.parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup:c.value}))};var i=r(n(73982)),o=n(22207),a=n(95972),s=n(51092),l=n(26679)},72823:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseRequestSilentNonceResponseRecoveryRequired=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const r=(0,s.flattenedChildWithTag)(e,"result");if(!r.success)return r;const l=(0,s.literal)(s.attrString,r.value,"status","RecoveryRequired");if(!l.success)return l;const u=(0,s.attrString)(r.value,"email");if(!u.success)return u;const c=(0,a.parseHackBaseIQResultResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({resultStatus:l.value,resultEmail:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(86332),s=n(26679)},90314:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseRequestSilentNonceResponseSuccess=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const r=(0,s.flattenedChildWithTag)(e,"result");if(!r.success)return r;const l=(0,s.literal)(s.attrString,r.value,"status","Success");if(!l.success)return l;const u=(0,a.parseHackBaseIQResultResponseMixin)(e,t);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({resultStatus:l.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(86332),s=n(26679)},16021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQGetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"get"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},94719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeHackBaseIQGetRequestMixin=function(e,t){const n=function(e){const{iqFrom:t}=e;return(0,a.mergeBaseIQGetRequestMixin)((0,i.smax)("iq",{from:(0,r.OPTIONAL)(s.USER_JID,t),to:s.S_WHATSAPP_NET}))}(t);return(0,o.mergeStanzas)(e,n)};var r=n(73538),i=n(73415),o=n(62046),a=n(16021),s=n(42811)},58047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRequestSilentNonceRequest=function(e){return(0,i.mergeHackBaseIQGetRequestMixin)((0,r.smax)("iq",{xmlns:"fb:thrift_iq",smax_id:(0,o.INT)(118)}),e)};var r=n(73415),i=n(94719),o=n(42811)},26330:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetAccessTokenAndSessionCookiesRPC=function(){return f.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(84194),s=n(72638),l=n(14923),u=n(48842),c=n(4157),d=n(75988),p=n(99407);function f(){return(f=(0,i.default)((function*(e,t){const n=(0,c.makeGetAccessTokenAndSessionCookiesRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseGetAccessTokenAndSessionCookiesResponseSuccess)(r,n);if(i.success)return{name:"GetAccessTokenAndSessionCookiesResponseSuccess",value:i.value};const f=(0,u.parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts)(r,n);if(f.success)return{name:"GetAccessTokenAndSessionCookiesResponseTooManyAttempts",value:f.value};const _=(0,s.parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce)(r,n);if(_.success)return{name:"GetAccessTokenAndSessionCookiesResponseIncorrectNonce",value:_.value};const g=(0,a.parseGetAccessTokenAndSessionCookiesResponseError)(r,n);if(g.success)return{name:"GetAccessTokenAndSessionCookiesResponseError",value:g.value};throw new d.SmaxParsingFailure((0,p.errorMessageRpcParsing)("GetAccessTokenAndSessionCookies",{Success:i,TooManyAttempts:f,IncorrectNonce:_,Error:g}))}))).apply(this,arguments)}},84194:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetAccessTokenAndSessionCookiesResponseError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseHackBaseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,s.parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup:c.value}))};var i=r(n(73982)),o=n(22207),a=n(66895),s=n(87658),l=n(26679)},72638:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const r=(0,s.flattenedChildWithTag)(e,"error");if(!r.success)return r;const l=(0,s.literal)(s.attrString,r.value,"code","432");if(!l.success)return l;const u=(0,s.literal)(s.attrString,r.value,"text","INCORRECT_NONCE");if(!u.success)return u;const c=(0,a.parseHackBaseIQErrorResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({errorCode:l.value,errorText:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(66895),s=n(26679)},14923:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetAccessTokenAndSessionCookiesResponseSuccess=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const r=(0,s.flattenedChildWithTag)(e,"access_token");if(!r.success)return r;const l=(0,s.flattenedChildWithTag)(e,"session_cookies");if(!l.success)return l;const u=(0,s.flattenedChildWithTag)(e,"business_person");if(!u.success)return u;const c=(0,s.contentString)(r.value);if(!c.success)return c;const d=(0,s.contentString)(l.value);if(!d.success)return d;const p=(0,s.attrString)(u.value,"id");if(!p.success)return p;const f=(0,a.parseHackBaseIQResultResponseMixin)(e,t);if(!f.success)return f;return(0,o.makeResult)((0,i.default)({accessTokenElementValue:c.value,sessionCookiesElementValue:d.value,businessPersonId:p.value},f.value))};var i=r(n(73982)),o=n(22207),a=n(22737),s=n(26679)},48842:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const r=(0,s.flattenedChildWithTag)(e,"error");if(!r.success)return r;const l=(0,s.literal)(s.attrString,r.value,"code","431");if(!l.success)return l;const u=(0,s.literal)(s.attrString,r.value,"text","TOO_MANY_ATTEMPTS");if(!u.success)return u;const c=(0,a.parseHackBaseIQErrorResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({errorCode:l.value,errorText:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(66895),s=n(26679)},66895:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseHackBaseIQErrorResponseMixin=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.optional)(s.attrUserJid,e,"to");if(!r.success)return r;const u=(0,a.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({to:r.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(80737),s=n(25162),l=n(26679)},22737:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseHackBaseIQResultResponseMixin=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.optional)(s.attrUserJid,e,"to");if(!r.success)return r;const u=(0,a.parseIQResultResponseMixin)(e,t);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({to:r.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(34203),s=n(25162),l=n(26679)},763:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","bad-request");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",400);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},87658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestOrForbiddenOrInternalServerErrorOrServiceUnavailableMixinGroup=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,o.parseIQErrorForbiddenMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorForbidden",value:n.value});const u=(0,a.parseIQErrorInternalServerErrorMixin)(e);if(u.success)return(0,r.makeResult)({name:"IQErrorInternalServerError",value:u.value});const c=(0,s.parseIQErrorServiceUnavailableMixin)(e);if(c.success)return(0,r.makeResult)({name:"IQErrorServiceUnavailable",value:c.value});return(0,l.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[t,n,u,c])};var r=n(22207),i=n(763),o=n(69461),a=n(15846),s=n(30472),l=n(26679)},69461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorForbiddenMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","forbidden");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",403);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},15846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorInternalServerErrorMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","internal-server-error");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",500);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},80737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","error");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},30472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorServiceUnavailableMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","service-unavailable");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",503);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},34203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQResultResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","result");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},6614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQGetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"get"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},4157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetAccessTokenAndSessionCookiesRequest=function(e){const{codeElementValue:t}=e;return(0,i.mergeHackBaseIQGetRequestMixin)((0,r.smax)("iq",{xmlns:"fb:thrift_iq",smax_id:(0,o.INT)(104)},(0,r.smax)("parameters",null,(0,r.smax)("code",null,t))),e)};var r=n(73415),i=n(39606),o=n(42811)},39606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeHackBaseIQGetRequestMixin=function(e,t){const n=function(e){const{iqFrom:t}=e;return(0,a.mergeBaseIQGetRequestMixin)((0,i.smax)("iq",{from:(0,r.OPTIONAL)(s.USER_JID,t),to:s.S_WHATSAPP_NET}))}(t);return(0,o.mergeStanzas)(e,n)};var r=n(73538),i=n(73415),o=n(62046),a=n(6614),s=n(42811)},99124:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendBatchGetGroupInfoRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(29252),s=n(6e4),l=n(49535),u=n(36956),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeBatchGetGroupInfoRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseBatchGetGroupInfoResponseSuccess)(r,n);if(i.success)return{name:"BatchGetGroupInfoResponseSuccess",value:i.value};const p=(0,a.parseBatchGetGroupInfoResponseClientError)(r,n);if(p.success)return{name:"BatchGetGroupInfoResponseClientError",value:p.value};const f=(0,s.parseBatchGetGroupInfoResponseServerError)(r,n);if(f.success)return{name:"BatchGetGroupInfoResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("BatchGetGroupInfo",{Success:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},66065:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetInviteGroupInfoRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(25985),s=n(65070),l=n(36926),u=n(63497),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeGetInviteGroupInfoRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseGetInviteGroupInfoResponseSuccess)(r,n);if(i.success)return{name:"GetInviteGroupInfoResponseSuccess",value:i.value};const p=(0,a.parseGetInviteGroupInfoResponseClientError)(r,n);if(p.success)return{name:"GetInviteGroupInfoResponseClientError",value:p.value};const f=(0,s.parseGetInviteGroupInfoResponseServerError)(r,n);if(f.success)return{name:"GetInviteGroupInfoResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("GetInviteGroupInfo",{Success:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},19356:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetMembershipApprovalRequestsRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(84035),s=n(57815),l=n(51423),u=n(2307),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeGetMembershipApprovalRequestsRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseGetMembershipApprovalRequestsResponseSuccess)(r,n);if(i.success)return{name:"GetMembershipApprovalRequestsResponseSuccess",value:i.value};const p=(0,a.parseGetMembershipApprovalRequestsResponseClientError)(r,n);if(p.success)return{name:"GetMembershipApprovalRequestsResponseClientError",value:p.value};const f=(0,s.parseGetMembershipApprovalRequestsResponseServerError)(r,n);if(f.success)return{name:"GetMembershipApprovalRequestsResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("GetMembershipApprovalRequests",{Success:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},45487:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetParticipatingGroupsRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(20915),s=n(20913),l=n(37510),u=n(98197),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeGetParticipatingGroupsRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseGetParticipatingGroupsResponseSuccess)(r,n);if(i.success)return{name:"GetParticipatingGroupsResponseSuccess",value:i.value};const p=(0,a.parseGetParticipatingGroupsResponseClientError)(r,n);if(p.success)return{name:"GetParticipatingGroupsResponseClientError",value:p.value};const f=(0,s.parseGetParticipatingGroupsResponseServerError)(r,n);if(f.success)return{name:"GetParticipatingGroupsResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("GetParticipatingGroups",{Success:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},46837:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetSubGroupSuggestionsRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(86653),s=n(42076),l=n(272),u=n(87002),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeGetSubGroupSuggestionsRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseGetSubGroupSuggestionsResponseSuccess)(r,n);if(i.success)return{name:"GetSubGroupSuggestionsResponseSuccess",value:i.value};const p=(0,a.parseGetSubGroupSuggestionsResponseClientError)(r,n);if(p.success)return{name:"GetSubGroupSuggestionsResponseClientError",value:p.value};const f=(0,s.parseGetSubGroupSuggestionsResponseServerError)(r,n);if(f.success)return{name:"GetSubGroupSuggestionsResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("GetSubGroupSuggestions",{Success:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},22043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.receiveGroupsDirtyNotificationRPC=function(e){const t=(0,r.parseGroupsDirtyNotificationRequest)(e);if(!t.success)throw new o.SmaxParsingFailure((0,a.errorMessageRpcParsing)("GroupsDirtyNotification",{Request:t}));return{parsedRequest:t.value,makeGroupsDirtyNotificationResponseAck:()=>(0,i.makeGroupsDirtyNotificationResponseAck)(e)}};var r=n(25523),i=n(36805),o=n(75988),a=n(99407)},90913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAdminAddModeMixin=function(e){const t=(0,i.assertTag)(e,"member_add_mode");if(!t.success)return t;const n=(0,i.literalContent)(i.contentString,e,"admin_add");if(!n.success)return n;return(0,r.makeResult)({elementValue:n.value})};var r=n(22207),i=n(26679)},25172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAdminOrAllMembersOrUnknownAddModeMixinGroup=function(e){const t=(0,i.parseAdminAddModeMixin)(e);if(t.success)return(0,r.makeResult)({name:"AdminAddMode",value:t.value});const n=(0,o.parseAllMembersAddModeMixin)(e);if(n.success)return(0,r.makeResult)({name:"AllMembersAddMode",value:n.value});const l=(0,a.parseUnknownAddModeMixin)(e);if(l.success)return(0,r.makeResult)({name:"UnknownAddMode",value:l.value});return(0,s.errorMixinDisjunction)(e,["AdminAddMode","AllMembersAddMode","UnknownAddMode"],[t,n,l])};var r=n(22207),i=n(90913),o=n(85622),a=n(73847),s=n(26679)},85622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAllMembersAddModeMixin=function(e){const t=(0,i.assertTag)(e,"member_add_mode");if(!t.success)return t;const n=(0,i.literalContent)(i.contentString,e,"all_member_add");if(!n.success)return n;return(0,r.makeResult)({elementValue:n.value})};var r=n(22207),i=n(26679)},83060:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseBaseServerErrorMixin=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,s.parseServerErrors)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorServerErrors:c.value}))};var i=r(n(73982)),o=n(22207),a=n(37502),s=n(87166),l=n(26679)},59304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchGetGroupInfoClientErrors=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,o.parseIQErrorRateOverlimitMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorRateOverlimit",value:n.value});return(0,a.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorRateOverlimit"],[t,n])};var r=n(22207),i=n(65356),o=n(76033),a=n(26679)},29252:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchGetGroupInfoResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,s.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,a.parseBatchGetGroupInfoClientErrors)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorBatchGetGroupInfoClientErrors:c.value}))};var i=r(n(73982)),o=n(22207),a=n(59304),s=n(37502),l=n(26679)},6e4:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchGetGroupInfoResponseServerError=function(e,t){const n=(0,i.assertTag)(e,"iq");if(!n.success)return n;const o=(0,r.parseBaseServerErrorMixin)(e,t);if(!o.success)return o;return o};var r=n(83060),i=n(26679)},49535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBatchGetGroupInfoResponseSuccess=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const i=(0,s.flattenedChildWithTag)(e,"groups");if(!i.success)return i;const o=(0,a.attrStringFromReference)(t,["to"]);if(!o.success)return o;const u=(0,s.literal)(s.attrString,e,"from",o.value);if(!u.success)return u;const c=(0,s.literal)(s.attrString,e,"type","result");if(!c.success)return c;const d=(0,a.attrStringFromReference)(t,["id"]);if(!d.success)return d;const p=(0,s.literal)(s.attrString,e,"id",d.value);if(!p.success)return p;const f=(0,s.mapChildrenWithTag)(i.value,"group",1,1e4,l);if(!f.success)return f;return(0,r.makeResult)({type:c.value,groupsGroup:f.value})},t.parseBatchGetGroupInfoResponseSuccessGroupsGroup=l;var r=n(22207),i=n(39556),o=n(36657),a=n(19077),s=n(26679);function l(e){const t=(0,s.assertTag)(e,"group");if(!t.success)return t;const n=(0,i.parseDedupAttrsMixin)(e),a=(0,o.parseGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup)(e);return a.success?(0,r.makeResult)({dedupAttrsMixin:n.success?n.value:null,groupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup:a.value}):a}},39556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDedupAttrsMixin=function(e){const t=(0,o.attrString)(e,"key");if(!t.success)return t;const n=(0,o.optional)(o.attrStringEnum,e,"create_ctx",i.ENUM_E2EEMIGRATION_REGULAR_RTC);if(!n.success)return n;return(0,r.makeResult)({key:t.value,createCtx:n.value})};var r=n(22207),i=n(56305),o=n(26679)},2318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDisplayNameMixin=function(e){const t=(0,i.attrString)(e,"display_name");if(!t.success)return t;return(0,r.makeResult)({displayName:t.value})};var r=n(22207),i=n(26679)},56305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_PARENTGROUP_SIBLINGGROUP_SUBGROUP=t.ENUM_LID_PN=t.ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD=t.ENUM_IMAGE_PREVIEW=t.ENUM_FALSE_TRUE=t.ENUM_E2EEMIGRATION_REGULAR_RTC=t.ENUM_DELETEPARENT_INTEGRITYDELETEPARENT_UNLINKGROUP=t.ENUM_DELETEPARENT_INTEGRITYDELETEPARENT=t.ENUM_APPROVED_CANCELLED_REJECTED=t.ENUM_ADMIN_SUPERADMIN=t.ENUM_ADMIN_CREATOR=t.ENUM_ACCOUNTSETTING_BULKCHANGE_CHATSETTING=t.ENUM_ACCEPT_DEFAULTSUBGROUPPROMOTE_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN=t.ENUM_ACCEPT_AUTOADD_DEFAULTSUBGROUPADMINADD_GENERALCHATAUTOADD_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN_SUBGROUPSUGGESTIONAPPROVED=t.ENUM_406_500=t.ENUM_404_419=t.ENUM_404_406=t.ENUM_403_404_406_419=t.ENUM_304_419=t.DOMAINJID_GROUPJID=void 0;var r=n(44037);t.ENUM_304_419={304:"304",419:"419"};t.ENUM_403_404_406_419={403:"403",404:"404",406:"406",419:"419"};t.ENUM_404_406={404:"404",406:"406"};t.ENUM_404_419={404:"404",419:"419"};t.ENUM_406_500={406:"406",500:"500"};t.ENUM_ACCEPT_AUTOADD_DEFAULTSUBGROUPADMINADD_GENERALCHATAUTOADD_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN_SUBGROUPSUGGESTIONAPPROVED={accept:"accept",auto_add:"auto_add",default_sub_group_admin_add:"default_sub_group_admin_add",general_chat_auto_add:"general_chat_auto_add",invite:"invite",invite_auto_add:"invite_auto_add",linked_group_join:"linked_group_join",sub_group_suggestion_approved:"sub_group_suggestion_approved"};t.ENUM_ACCEPT_DEFAULTSUBGROUPPROMOTE_INVITE_INVITEAUTOADD_LINKEDGROUPJOIN={accept:"accept",default_sub_group_promote:"default_sub_group_promote",invite:"invite",invite_auto_add:"invite_auto_add",linked_group_join:"linked_group_join"};t.ENUM_ACCOUNTSETTING_BULKCHANGE_CHATSETTING={account_setting:"account_setting",bulk_change:"bulk_change",chat_setting:"chat_setting"};t.ENUM_ADMIN_CREATOR={admin:"admin",creator:"creator"};t.ENUM_ADMIN_SUPERADMIN={admin:"admin",superadmin:"superadmin"};t.ENUM_APPROVED_CANCELLED_REJECTED={approved:"approved",cancelled:"cancelled",rejected:"rejected"};t.ENUM_DELETEPARENT_INTEGRITYDELETEPARENT={delete_parent:"delete_parent",integrity_delete_parent:"integrity_delete_parent"};t.ENUM_DELETEPARENT_INTEGRITYDELETEPARENT_UNLINKGROUP={delete_parent:"delete_parent",integrity_delete_parent:"integrity_delete_parent",unlink_group:"unlink_group"};t.ENUM_E2EEMIGRATION_REGULAR_RTC={e2ee_migration:"e2ee_migration",regular:"regular",rtc:"rtc"};t.ENUM_FALSE_TRUE={false:"false",true:"true"};t.ENUM_IMAGE_PREVIEW={image:"image",preview:"preview"};t.ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD={invite_link:"invite_link",linked_group_join:"linked_group_join",non_admin_add:"non_admin_add"};t.ENUM_LID_PN={lid:"lid",pn:"pn"};t.ENUM_PARENTGROUP_SIBLINGGROUP_SUBGROUP={parent_group:"parent_group",sibling_group:"sibling_group",sub_group:"sub_group"};const i={validators:[r.validateDomainJid,r.validateGroupJid],typeName:"DomainJid|GroupJid"};t.DOMAINJID_GROUPJID=i},23288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetInviteGroupInfoClientErrors=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,l.parseIQErrorItemNotFoundMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorItemNotFound",value:n.value});const f=(0,a.parseIQErrorGoneMixin)(e);if(f.success)return(0,r.makeResult)({name:"IQErrorGone",value:f.value});const _=(0,d.parseIQErrorNotAuthorizedMixin)(e);if(_.success)return(0,r.makeResult)({name:"IQErrorNotAuthorized",value:_.value});const g=(0,c.parseIQErrorNotAcceptableMixin)(e);if(g.success)return(0,r.makeResult)({name:"IQErrorNotAcceptable",value:g.value});const h=(0,u.parseIQErrorLockedMixin)(e);if(h.success)return(0,r.makeResult)({name:"IQErrorLocked",value:h.value});const A=(0,s.parseIQErrorGrowthLockedMixin)(e);if(A.success)return(0,r.makeResult)({name:"IQErrorGrowthLocked",value:A.value});const m=(0,o.parseIQErrorFallbackClientMixin)(e);if(m.success)return(0,r.makeResult)({name:"IQErrorFallbackClient",value:m.value});return(0,p.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorGone","IQErrorNotAuthorized","IQErrorNotAcceptable","IQErrorLocked","IQErrorGrowthLocked","IQErrorFallbackClient"],[t,n,f,_,g,h,A,m])};var r=n(22207),i=n(65356),o=n(7917),a=n(92906),s=n(99354),l=n(46242),u=n(96625),c=n(30681),d=n(89533),p=n(26679)},25985:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetInviteGroupInfoResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,s.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,a.parseGetInviteGroupInfoClientErrors)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorGetInviteGroupInfoClientErrors:c.value}))};var i=r(n(73982)),o=n(22207),a=n(23288),s=n(37502),l=n(26679)},65070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetInviteGroupInfoResponseServerError=function(e,t){const n=(0,i.assertTag)(e,"iq");if(!n.success)return n;const o=(0,r.parseBaseServerErrorMixin)(e,t);if(!o.success)return o;return o};var r=n(83060),i=n(26679)},36926:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetInviteGroupInfoResponseSuccess=function(e,t){const n=(0,a.assertTag)(e,"iq");if(!n.success)return n;const s=(0,a.flattenedChildWithTag)(e,"group");if(!s.success)return s;const l=(0,o.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,a.literal)(a.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,a.literal)(a.attrString,e,"type","result");if(!c.success)return c;const d=(0,o.attrStringFromReference)(t,["id"]);if(!d.success)return d;const p=(0,a.literal)(a.attrString,e,"id",d.value);if(!p.success)return p;const f=(0,a.attrIntRange)(s.value,"size",0,19999);if(!f.success)return f;const _=(0,i.parseInviteLinkGroupInfoMixin)(s.value);if(!_.success)return _;return(0,r.makeResult)({type:c.value,groupSize:f.value,groupInviteLinkGroupInfoMixin:_.value})};var r=n(22207),i=n(40112),o=n(19077),a=n(26679)},98346:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetMembershipApprovalRequestsClientErrors=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,s.parseIQErrorItemNotFoundMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorItemNotFound",value:n.value});const p=(0,u.parseIQErrorNotAuthorizedMixin)(e);if(p.success)return(0,r.makeResult)({name:"IQErrorNotAuthorized",value:p.value});const f=(0,a.parseIQErrorForbiddenMixin)(e);if(f.success)return(0,r.makeResult)({name:"IQErrorForbidden",value:f.value});const _=(0,c.parseIQErrorRateOverlimitMixin)(e);if(_.success)return(0,r.makeResult)({name:"IQErrorRateOverlimit",value:_.value});const g=(0,l.parseIQErrorLockedMixin)(e);if(g.success)return(0,r.makeResult)({name:"IQErrorLocked",value:g.value});const h=(0,o.parseIQErrorFallbackClientMixin)(e);if(h.success)return(0,r.makeResult)({name:"IQErrorFallbackClient",value:h.value});return(0,d.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorItemNotFound","IQErrorNotAuthorized","IQErrorForbidden","IQErrorRateOverlimit","IQErrorLocked","IQErrorFallbackClient"],[t,n,p,f,_,g,h])};var r=n(22207),i=n(65356),o=n(7917),a=n(69348),s=n(46242),l=n(96625),u=n(89533),c=n(76033),d=n(26679)},95386:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetMembershipApprovalRequestsMembershipApprovalRequestMixin=function(e){const t=(0,l.assertTag)(e,"membership_approval_request");if(!t.success)return t;const n=(0,s.attrUserJid)(e,"jid");if(!n.success)return n;const r=(0,l.optional)(s.attrUserJid,e,"requestor");if(!r.success)return r;const u=(0,l.optional)(s.attrGroupJid,e,"parent_group_jid");if(!u.success)return u;const c=(0,l.attrIntRange)(e,"request_time",0,void 0);if(!c.success)return c;const d=(0,a.parseMembershipRequestMethodAttributeMixin)(e);if(!d.success)return d;return(0,o.makeResult)((0,i.default)({jid:n.value,requestor:r.value,parentGroupJid:u.value,requestTime:c.value},d.value))};var i=r(n(73982)),o=n(22207),a=n(28494),s=n(25162),l=n(26679)},92006:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetMembershipApprovalRequestsRequestorFetchMixin=function(e){const t=(0,i.literal)(i.attrString,e,"requestor_fetch","true");if(!t.success)return t;return(0,r.makeResult)({requestorFetch:t.value})};var r=n(22207),i=n(26679)},84035:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetMembershipApprovalRequestsResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,s.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,a.parseGetMembershipApprovalRequestsClientErrors)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorGetMembershipApprovalRequestsClientErrors:c.value}))};var i=r(n(73982)),o=n(22207),a=n(98346),s=n(37502),l=n(26679)},57815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetMembershipApprovalRequestsResponseServerError=function(e,t){const n=(0,i.assertTag)(e,"iq");if(!n.success)return n;const o=(0,r.parseBaseServerErrorMixin)(e,t);if(!o.success)return o;return o};var r=n(83060),i=n(26679)},51423:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetMembershipApprovalRequestsResponseSuccess=function(e,t){const n=(0,d.assertTag)(e,"iq");if(!n.success)return n;const r=(0,d.flattenedChildWithTag)(e,"membership_approval_requests");if(!r.success)return r;const a=(0,s.parseGetMembershipApprovalRequestsRequestorFetchMixin)(r.value),c=(0,u.parseIQResultResponseMixin)(e,t);if(!c.success)return c;const f=(0,l.parseGroupAddressingModeMixin)(e),_=(0,d.mapChildrenWithTag)(r.value,"membership_approval_request",0,19999,p);if(!_.success)return _;return(0,o.makeResult)((0,i.default)((0,i.default)({membershipApprovalRequestsGetMembershipApprovalRequestsRequestorFetchMixin:a.success?a.value:null},c.value),{},{groupAddressingModeMixin:f.success?f.value:null,membershipApprovalRequestsMembershipApprovalRequest:_.value}))},t.parseGetMembershipApprovalRequestsResponseSuccessMembershipApprovalRequestsMembershipApprovalRequest=p;var i=r(n(73982)),o=n(22207),a=n(95386),s=n(92006),l=n(54905),u=n(26499),c=n(28562),d=n(26679);function p(e){const t=(0,d.assertTag)(e,"membership_approval_request");if(!t.success)return t;const n=(0,a.parseGetMembershipApprovalRequestsMembershipApprovalRequestMixin)(e);if(!n.success)return n;const r=(0,c.parsePhoneNumberMixin)(e);return(0,o.makeResult)((0,i.default)((0,i.default)({},n.value),{},{phoneNumberMixin:r.success?r.value:null}))}},20915:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetParticipatingGroupsResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,s.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,a.parseIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup:c.value}))};var i=r(n(73982)),o=n(22207),a=n(14478),s=n(37502),l=n(26679)},20913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetParticipatingGroupsResponseServerError=function(e,t){const n=(0,i.assertTag)(e,"iq");if(!n.success)return n;const o=(0,r.parseBaseServerErrorMixin)(e,t);if(!o.success)return o;return o};var r=n(83060),i=n(26679)},37510:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetParticipatingGroupsResponseSuccess=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const i=(0,s.flattenedChildWithTag)(e,"groups");if(!i.success)return i;const o=(0,a.attrStringFromReference)(t,["to"]);if(!o.success)return o;const u=(0,s.literal)(s.attrString,e,"from",o.value);if(!u.success)return u;const c=(0,s.literal)(s.attrString,e,"type","result");if(!c.success)return c;const d=(0,a.attrStringFromReference)(t,["id"]);if(!d.success)return d;const p=(0,s.literal)(s.attrString,e,"id",d.value);if(!p.success)return p;const f=(0,s.mapChildrenWithTag)(i.value,"group",0,1e4,l);if(!f.success)return f;return(0,r.makeResult)({type:c.value,groupsGroup:f.value})},t.parseGetParticipatingGroupsResponseSuccessGroupsGroup=l;var r=n(22207),i=n(39556),o=n(43742),a=n(19077),s=n(26679);function l(e){const t=(0,s.assertTag)(e,"group");if(!t.success)return t;const n=(0,i.parseDedupAttrsMixin)(e),a=(0,o.parseGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup)(e);return a.success?(0,r.makeResult)({dedupAttrsMixin:n.success?n.value:null,groupInfoOrTruncatedGroupInfoGroupInfoMixinGroup:a.value}):a}},62528:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetSubGroupSuggestionsClientErrors=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,a.parseIQErrorForbiddenMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorForbidden",value:n.value});const c=(0,s.parseIQErrorItemNotFoundMixin)(e);if(c.success)return(0,r.makeResult)({name:"IQErrorItemNotFound",value:c.value});const d=(0,l.parseIQErrorRateOverlimitMixin)(e);if(d.success)return(0,r.makeResult)({name:"IQErrorRateOverlimit",value:d.value});const p=(0,o.parseIQErrorFallbackClientMixin)(e);if(p.success)return(0,r.makeResult)({name:"IQErrorFallbackClient",value:p.value});return(0,u.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorForbidden","IQErrorItemNotFound","IQErrorRateOverlimit","IQErrorFallbackClient"],[t,n,c,d,p])};var r=n(22207),i=n(65356),o=n(7917),a=n(69348),s=n(46242),l=n(76033),u=n(26679)},28358:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetSubGroupSuggestionsFetchByViewMixin=function(e){const t=(0,o.attrStringEnum)(e,"view",i.ENUM_ADMIN_CREATOR);if(!t.success)return t;return(0,r.makeResult)({view:t.value})};var r=n(22207),i=n(56305),o=n(26679)},86653:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetSubGroupSuggestionsResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,s.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,a.parseGetSubGroupSuggestionsClientErrors)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorGetSubGroupSuggestionsClientErrors:c.value}))};var i=r(n(73982)),o=n(22207),a=n(62528),s=n(37502),l=n(26679)},42076:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetSubGroupSuggestionsResponseServerError=function(e,t){const n=(0,i.assertTag)(e,"iq");if(!n.success)return n;const o=(0,r.parseBaseServerErrorMixin)(e,t);if(!o.success)return o;return o};var r=n(83060),i=n(26679)},272:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetSubGroupSuggestionsResponseSuccess=function(e,t){const n=(0,d.assertTag)(e,"iq");if(!n.success)return n;const r=(0,d.flattenedChildWithTag)(e,"sub_group_suggestions");if(!r.success)return r;const a=(0,s.parseGetSubGroupSuggestionsFetchByViewMixin)(r.value);if(!a.success)return a;const u=(0,l.parseIQResultResponseMixin)(e,t);if(!u.success)return u;const c=(0,d.mapChildrenWithTag)(r.value,"sub_group_suggestion",0,1e3,g);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({subGroupSuggestionsGetSubGroupSuggestionsFetchByViewMixin:a.value},u.value),{},{subGroupSuggestionsSubGroupSuggestion:c.value}))},t.parseGetSubGroupSuggestionsResponseSuccessSubGroupSuggestionsSubGroupSuggestion=g,t.parseGetSubGroupSuggestionsResponseSuccessSubGroupSuggestionsSubGroupSuggestionDescription=p,t.parseGetSubGroupSuggestionsResponseSuccessSubGroupSuggestionsSubGroupSuggestionIsExistingGroup=f,t.parseGetSubGroupSuggestionsResponseSuccessSubGroupSuggestionsSubGroupSuggestionParticipantCount=_;var i=r(n(73982)),o=n(22207),a=n(56305),s=n(28358),l=n(26499),u=n(53557),c=n(18605),d=n(26679);function p(e){const t=(0,d.assertTag)(e,"description");if(!t.success)return t;const n=(0,u.parseSubGroupSuggestionDescriptionMixin)(e);return n.success,n}function f(e){const t=(0,d.assertTag)(e,"is_existing_group");if(!t.success)return t;const n=(0,d.contentStringEnum)(e,a.ENUM_FALSE_TRUE);return n.success?(0,o.makeResult)({elementValue:n.value}):n}function _(e){const t=(0,d.assertTag)(e,"participant_count");if(!t.success)return t;const n=(0,d.contentInt)(e);return n.success?(0,o.makeResult)({elementValue:n.value}):n}function g(e){const t=(0,d.assertTag)(e,"sub_group_suggestion");if(!t.success)return t;const n=(0,d.flattenedChildWithTag)(e,"subject");if(!n.success)return n;const r=(0,d.optionalChildWithTag)(e,"description",p);if(!r.success)return r;const a=(0,d.optionalChildWithTag)(e,"is_existing_group",f);if(!a.success)return a;const s=(0,d.optionalChildWithTag)(e,"participant_count",_);if(!s.success)return s;const l=(0,d.attrIntRange)(e,"creation",0,void 0);if(!l.success)return l;const u=(0,d.contentString)(n.value);if(!u.success)return u;const g=(0,c.parseSubGroupSuggestionMixin)(e);return g.success?(0,o.makeResult)((0,i.default)((0,i.default)({creation:l.value,subjectElementValue:u.value},g.value),{},{description:r.value,isExistingGroup:a.value,participantCount:s.value})):g}},54905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupAddressingModeMixin=function(e){const t=(0,o.attrStringEnum)(e,"addressing_mode",i.ENUM_LID_PN);if(!t.success)return t;return(0,r.makeResult)({addressingMode:t.value})};var r=n(22207),i=n(56305),o=n(26679)},68406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupForbiddenMixin=function(e){const t=(0,i.assertTag)(e,"group");if(!t.success)return t;const n=(0,i.attrString)(e,"id");if(!n.success)return n;const o=(0,i.literal)(i.attrString,e,"error","403");if(!o.success)return o;return(0,r.makeResult)({id:n.value,error:o.value})};var r=n(22207),i=n(26679)},96799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoAttributesMixin=function(e){const t=(0,s.assertTag)(e,"group");if(!t.success)return t;const n=(0,s.attrString)(e,"id");if(!n.success)return n;const l=(0,s.optional)(a.attrUserJid,e,"creator");if(!l.success)return l;const u=(0,s.optional)(a.attrUserJid,e,"creator_pn");if(!u.success)return u;const c=(0,s.attrIntRange)(e,"creation",0,void 0);if(!c.success)return c;const d=(0,s.optional)(s.attrString,e,"p_v_id");if(!d.success)return d;const p=(0,s.optional)(s.attrString,e,"a_v_id");if(!p.success)return p;const f=(0,s.optional)(s.attrIntRange,e,"s_t",0,void 0);if(!f.success)return f;const _=(0,s.optional)(a.attrUserJid,e,"s_o");if(!_.success)return _;const g=(0,s.optional)(a.attrUserJid,e,"s_o_pn");if(!g.success)return g;const h=(0,s.optional)(s.attrString,e,"open_thread_id");if(!h.success)return h;const A=(0,i.parseGroupAddressingModeMixin)(e),m=(0,o.parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup)(e);if(!m.success)return m;return(0,r.makeResult)({id:n.value,creator:l.value,creatorPn:u.value,creation:c.value,pVId:d.value,aVId:p.value,sT:f.value,sO:_.value,sOPn:g.value,openThreadId:h.value,groupAddressingModeMixin:A.success?A.value:null,namedSubjectOrUnnamedSubjectFallbackMixinGroup:m.value})};var r=n(22207),i=n(54905),o=n(63763),a=n(25162),s=n(26679)},74531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoDescriptionMixin=function(e){const t=(0,o.assertTag)(e,"description");if(!t.success)return t;const n=(0,o.flattenedChildWithTag)(e,"body");if(!n.success)return n;const a=(0,o.attrString)(e,"id");if(!a.success)return a;const s=(0,o.optional)(i.attrUserJid,e,"participant");if(!s.success)return s;const l=(0,o.optional)(i.attrUserJid,e,"participant_pn");if(!l.success)return l;const u=(0,o.attrIntRange)(e,"t",0,void 0);if(!u.success)return u;const c=(0,o.contentString)(n.value);if(!c.success)return c;return(0,r.makeResult)({id:a.value,participant:s.value,participantPn:l.value,t:u.value,bodyElementValue:c.value})};var r=n(22207),i=n(25162),o=n(26679)},98310:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoDescription=A,t.parseGroupInfoEphemeral=E,t.parseGroupInfoGrowthLocked=y,t.parseGroupInfoLinkedParent=v,t.parseGroupInfoMembershipApprovalMode=S,t.parseGroupInfoMixin=function(e){const t=(0,g.assertTag)(e,"group");if(!t.success)return t;const n=(0,g.optionalChildWithTag)(e,"description",A);if(!n.success)return n;const r=(0,g.optionalChild)(e,"locked");if(!r.success)return r;const a=(0,g.optionalChild)(e,"announcement");if(!a.success)return a;const l=(0,g.optionalChildWithTag)(e,"parent",m);if(!l.success)return l;const u=(0,g.optionalChild)(e,"no_frequently_forwarded");if(!u.success)return u;const d=(0,g.optionalChild)(e,"support");if(!d.success)return d;const p=(0,g.optionalChildWithTag)(e,"ephemeral",E);if(!p.success)return p;const f=(0,g.optionalChild)(e,"suspended");if(!f.success)return f;const _=(0,g.optionalChildWithTag)(e,"growth_locked",y);if(!_.success)return _;const I=(0,g.optionalChild)(e,"default_sub_group");if(!I.success)return I;const T=(0,g.optionalChild)(e,"shadow");if(!T.success)return T;const b=(0,g.optionalChildWithTag)(e,"membership_approval_mode",S);if(!b.success)return b;const M=(0,g.optionalChild)(e,"incognito");if(!M.success)return M;const P=(0,g.optionalChild)(e,"allow_admin_reports");if(!P.success)return P;const C=(0,g.optionalChild)(e,"allow_non_admin_sub_group_creation");if(!C.success)return C;const O=(0,g.optionalChild)(e,"general_chat");if(!O.success)return O;const R=(0,g.optionalChild)(e,"auto_add_disabled");if(!R.success)return R;const N=(0,g.optionalChild)(e,"group_history");if(!N.success)return N;const w=(0,g.optionalChildWithTag)(e,"linked_parent",v);if(!w.success)return w;const D=(0,g.optionalChild)(e,"capi");if(!D.success)return D;const L=(0,g.optionalLiteral)(g.attrString,e,"ack","false");if(!L.success)return L;const B=(0,s.parseGroupInfoAttributesMixin)(e);if(!B.success)return B;const k=(0,c.parseGroupMemberAddModeMixin)(e),G=(0,g.mapChildrenWithTag)(e,"participant",0,19999,h);if(!G.success)return G;return(0,o.makeResult)((0,i.default)((0,i.default)({ack:L.value},B.value),{},{groupMemberAddModeMixin:k.success?k.value:null,description:n.value,hasLocked:null!=r.value,hasAnnouncement:null!=a.value,parent:l.value,hasNoFrequentlyForwarded:null!=u.value,hasSupport:null!=d.value,ephemeral:p.value,hasSuspended:null!=f.value,growthLocked:_.value,hasDefaultSubGroup:null!=I.value,hasShadow:null!=T.value,membershipApprovalMode:b.value,hasIncognito:null!=M.value,hasAllowAdminReports:null!=P.value,hasAllowNonAdminSubGroupCreation:null!=C.value,hasGeneralChat:null!=O.value,hasAutoAddDisabled:null!=R.value,hasGroupHistory:null!=N.value,linkedParent:w.value,hasCapi:null!=D.value,participant:G.value}))},t.parseGroupInfoParent=m,t.parseGroupInfoParticipant=h;var i=r(n(73982)),o=n(22207),a=n(56305),s=n(96799),l=n(74531),u=n(87020),c=n(56328),d=n(61990),p=n(72093),f=n(84451),_=n(25162),g=n(26679);function h(e){const t=(0,g.assertTag)(e,"participant");if(!t.success)return t;const n=(0,u.parseGroupInfoParticipantMixin)(e);if(!n.success)return n;const r=(0,f.parseParticipantNotAddressableMixin)(e);return(0,o.makeResult)((0,i.default)((0,i.default)({},n.value),{},{participantNotAddressableMixin:r.success?r.value:null}))}function A(e){const t=(0,g.assertTag)(e,"description");if(!t.success)return t;const n=(0,l.parseGroupInfoDescriptionMixin)(e);return(0,o.makeResult)({groupInfoDescriptionMixin:n.success?n.value:null})}function m(e){const t=(0,g.assertTag)(e,"parent");if(!t.success)return t;const n=(0,p.parseParentGroupDefaultMembershipApprovalModeMixin)(e);return(0,o.makeResult)({parentGroupDefaultMembershipApprovalModeMixin:n.success?n.value:null})}function E(e){const t=(0,g.assertTag)(e,"ephemeral");if(!t.success)return t;const n=(0,g.attrIntRange)(e,"expiration",0,2147483647);if(!n.success)return n;const r=(0,g.optional)(g.attrStringEnum,e,"trigger",a.ENUM_ACCOUNTSETTING_BULKCHANGE_CHATSETTING);if(!r.success)return r;const i=(0,g.optional)(g.attrStringEnum,e,"initiated_by_me",a.ENUM_FALSE_TRUE);return i.success?(0,o.makeResult)({expiration:n.value,trigger:r.value,initiatedByMe:i.value}):i}function y(e){const t=(0,g.assertTag)(e,"growth_locked");if(!t.success)return t;const n=(0,g.literal)(g.attrString,e,"type","invite");if(!n.success)return n;const r=(0,g.attrIntRange)(e,"expiration",0,void 0);return r.success?(0,o.makeResult)({type:n.value,expiration:r.value}):r}function S(e){const t=(0,g.assertTag)(e,"membership_approval_mode");if(!t.success)return t;const n=(0,d.parseMembershipApprovalGroupJoinModeEnabledMixin)(e);return(0,o.makeResult)({membershipApprovalGroupJoinModeEnabledMixin:n.success?n.value:null})}function v(e){const t=(0,g.assertTag)(e,"linked_parent");if(!t.success)return t;const n=(0,_.attrGroupJid)(e,"jid");return n.success?(0,o.makeResult)({jid:n.value}):n}},43742:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoOrTruncatedGroupInfoGroupInfoMixinGroup=function(e){const t=(0,i.parseGroupInfoMixin)(e);if(t.success)return(0,r.makeResult)({name:"GroupInfo",value:t.value});const n=(0,o.parseTruncatedGroupInfoMixin)(e);if(n.success)return(0,r.makeResult)({name:"TruncatedGroupInfo",value:n.value});return(0,a.errorMixinDisjunction)(e,["GroupInfo","TruncatedGroupInfo"],[t,n])};var r=n(22207),i=n(98310),o=n(79465),a=n(26679)},36657:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup=function(e){const t=(0,o.parseGroupInfoMixin)(e);if(t.success)return(0,r.makeResult)({name:"GroupInfo",value:t.value});const n=(0,s.parseTruncatedGroupInfoMixin)(e);if(n.success)return(0,r.makeResult)({name:"TruncatedGroupInfo",value:n.value});const u=(0,i.parseGroupForbiddenMixin)(e);if(u.success)return(0,r.makeResult)({name:"GroupForbidden",value:u.value});const c=(0,a.parseGroupNotExistMixin)(e);if(c.success)return(0,r.makeResult)({name:"GroupNotExist",value:c.value});return(0,l.errorMixinDisjunction)(e,["GroupInfo","TruncatedGroupInfo","GroupForbidden","GroupNotExist"],[t,n,u,c])};var r=n(22207),i=n(68406),o=n(98310),a=n(7331),s=n(79465),l=n(26679)},15957:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoParticipantAdminMixin=function(e){const t=(0,a.assertTag)(e,"participant");if(!t.success)return t;const n=(0,a.attrStringEnum)(e,"type",i.ENUM_ADMIN_SUPERADMIN);if(!n.success)return n;const s=(0,o.parseGroupInfoParticipantAdminMixins)(e);if(!s.success)return s;return(0,r.makeResult)({type:n.value,groupInfoParticipantAdminMixins:s.value})};var r=n(22207),i=n(56305),o=n(44533),a=n(26679)},44533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoParticipantAdminMixins=function(e){const t=(0,a.parseParticipantWithJidLidAndDisplayNameMixin)(e);if(t.success)return(0,r.makeResult)({name:"ParticipantWithJidLidAndDisplayName",value:t.value});const n=(0,i.parseParticipantWithJidAndLidMixin)(e);if(n.success)return(0,r.makeResult)({name:"ParticipantWithJidAndLid",value:n.value});const u=(0,o.parseParticipantWithJidAndPnMixin)(e);if(u.success)return(0,r.makeResult)({name:"ParticipantWithJidAndPn",value:u.value});const c=(0,s.parseParticipantWithJidMixin)(e);if(c.success)return(0,r.makeResult)({name:"ParticipantWithJid",value:c.value});return(0,l.errorMixinDisjunction)(e,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndPn","ParticipantWithJid"],[t,n,u,c])};var r=n(22207),i=n(65661),o=n(31093),a=n(93020),s=n(72186),l=n(26679)},87020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoParticipantMixin=function(e){const t=(0,o.assertTag)(e,"participant");if(!t.success)return t;const n=(0,i.parseGroupInfoParticipantMixins)(e);if(!n.success)return n;return(0,r.makeResult)({groupInfoParticipantMixins:n.value})};var r=n(22207),i=n(87478),o=n(26679)},87478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoParticipantMixins=function(e){const t=(0,i.parseGroupInfoParticipantAdminMixin)(e);if(t.success)return(0,r.makeResult)({name:"GroupInfoParticipantAdmin",value:t.value});const n=(0,o.parseGroupInfoParticipantNonAdminMixin)(e);if(n.success)return(0,r.makeResult)({name:"GroupInfoParticipantNonAdmin",value:n.value});return(0,a.errorMixinDisjunction)(e,["GroupInfoParticipantAdmin","GroupInfoParticipantNonAdmin"],[t,n])};var r=n(22207),i=n(15957),o=n(77924),a=n(26679)},77924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupInfoParticipantNonAdminMixin=function(e){const t=(0,i.assertTag)(e,"participant");if(!t.success)return t;const n=(0,r.parseParticipantMixin)(e);if(!n.success)return n;return n};var r=n(93066),i=n(26679)},16023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupJoinMembershipApprovalModeEnabledMixin=function(e){const t=(0,i.assertTag)(e,"group_join");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"state","on");if(!n.success)return n;return(0,r.makeResult)({state:n.value})};var r=n(22207),i=n(26679)},56328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupMemberAddModeMixin=function(e){const t=(0,o.flattenedChildWithTag)(e,"member_add_mode");if(!t.success)return t;const n=(0,i.parseAdminOrAllMembersOrUnknownAddModeMixinGroup)(t.value);if(!n.success)return n;return(0,r.makeResult)({memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup:n.value})};var r=n(22207),i=n(25172),o=n(26679)},7331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupNotExistMixin=function(e){const t=(0,i.assertTag)(e,"group");if(!t.success)return t;const n=(0,i.attrString)(e,"id");if(!n.success)return n;const o=(0,i.literal)(i.attrString,e,"error","404");if(!o.success)return o;return(0,r.makeResult)({id:n.value,error:o.value})};var r=n(22207),i=n(26679)},25523:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGroupsDirtyNotificationRequest=function(e){const t=(0,l.assertTag)(e,"notification");if(!t.success)return t;const n=(0,l.flattenedChildWithTag)(e,"groups_dirty");if(!n.success)return n;const r=(0,l.literal)(l.attrString,e,"type","w:gp2");if(!r.success)return r;const c=(0,s.literalJid)(s.attrDomainJid,e,"from","g.us");if(!c.success)return c;const d=(0,a.parseServerNotificationMixin)(e);if(!d.success)return d;const p=(0,l.mapChildrenWithTag)(n.value,"group",1,500,u);if(!p.success)return p;return(0,o.makeResult)((0,i.default)((0,i.default)({type:r.value,from:c.value},d.value),{},{groupsDirtyGroup:p.value}))},t.parseGroupsDirtyNotificationRequestGroupsDirtyGroup=u;var i=r(n(73982)),o=n(22207),a=n(67568),s=n(25162),l=n(26679);function u(e){const t=(0,l.assertTag)(e,"group");if(!t.success)return t;const n=(0,s.attrGroupJid)(e,"jid");return n.success?(0,o.makeResult)({jid:n.value}):n}},65356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","bad-request");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",400);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},14478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,a.parseIQErrorRateOverlimitMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorRateOverlimit",value:n.value});const l=(0,o.parseIQErrorFallbackClientMixin)(e);if(l.success)return(0,r.makeResult)({name:"IQErrorFallbackClient",value:l.value});return(0,s.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorRateOverlimit","IQErrorFallbackClient"],[t,n,l])};var r=n(22207),i=n(65356),o=n(7917),a=n(76033),s=n(26679)},7917:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorFallbackClientMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.attrString)(e,"text");if(!n.success)return n;const o=(0,i.attrIntRange)(e,"code",400,499);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},71529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorFallbackServerMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.attrString)(e,"text");if(!n.success)return n;const o=(0,i.attrIntRange)(e,"code",500,599);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},69348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorForbiddenMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","forbidden");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",403);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},92906:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorGoneMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","gone");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",410);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},99354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorGrowthLockedGrowthLocked=o,t.parseIQErrorGrowthLockedMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.optionalChildWithTag)(e,"growth_locked",o);if(!n.success)return n;const a=(0,i.literal)(i.attrString,e,"text","growth-locked");if(!a.success)return a;const s=(0,i.literal)(i.attrInt,e,"code",436);if(!s.success)return s;return(0,r.makeResult)({text:a.value,code:s.value,growthLocked:n.value})};var r=n(22207),i=n(26679);function o(e){const t=(0,i.assertTag)(e,"growth_locked");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"type","invite");if(!n.success)return n;const o=(0,i.attrIntRange)(e,"expiration",0,void 0);return o.success?(0,r.makeResult)({type:n.value,expiration:o.value}):o}},69095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorInternalServerErrorMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","internal-server-error");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",500);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},46242:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorItemNotFoundMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","item-not-found");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",404);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},96625:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorLockedMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","locked");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",423);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},30681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorNotAcceptableField=o,t.parseIQErrorNotAcceptableMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.optionalChildWithTag)(e,"field",o);if(!n.success)return n;const a=(0,i.literal)(i.attrString,e,"text","not-acceptable");if(!a.success)return a;const s=(0,i.literal)(i.attrInt,e,"code",406);if(!s.success)return s;return(0,r.makeResult)({text:a.value,code:s.value,field:n.value})};var r=n(22207),i=n(26679);function o(e){const t=(0,i.assertTag)(e,"field");if(!t.success)return t;const n=(0,i.attrString)(e,"name");if(!n.success)return n;const o=(0,i.attrString)(e,"reason");return o.success?(0,r.makeResult)({name:n.value,reason:o.value}):o}},89533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorNotAuthorizedMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","not-authorized");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",401);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},4032:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorPartialServerErrorMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","partial-server-error");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",530);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},76033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorRateOverlimitMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","rate-overlimit");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",429);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},37502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","error");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},3333:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorServiceUnavailableMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","service-unavailable");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",503);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},26499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQResultResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","result");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},40112:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseInviteLinkGroupInfoLinkedParent=g,t.parseInviteLinkGroupInfoMembershipApprovalMode=h,t.parseInviteLinkGroupInfoMembershipApprovalRequest=A,t.parseInviteLinkGroupInfoMixin=function(e){const t=(0,p.assertTag)(e,"group");if(!t.success)return t;const n=(0,p.flattenedChildWithTag)(e,"description");if(!n.success)return n;const r=(0,p.optionalChildWithTag)(e,"parent",_);if(!r.success)return r;const l=(0,p.optionalChildWithTag)(e,"linked_parent",g);if(!l.success)return l;const u=(0,p.optionalChild)(e,"default_sub_group");if(!u.success)return u;const c=(0,p.optionalChild)(e,"general_chat");if(!c.success)return c;const d=(0,p.optionalChildWithTag)(e,"membership_approval_mode",h);if(!d.success)return d;const m=(0,p.optionalChildWithTag)(e,"membership_approval_request",A);if(!m.success)return m;const E=(0,p.attrIntRange)(e,"size",0,19999);if(!E.success)return E;const y=(0,s.parseGroupInfoDescriptionMixin)(n.value),S=(0,a.parseGroupInfoAttributesMixin)(e);if(!S.success)return S;const v=(0,p.mapChildrenWithTag)(e,"participant",0,19999,f);if(!v.success)return v;return(0,o.makeResult)((0,i.default)((0,i.default)({size:E.value,descriptionGroupInfoDescriptionMixin:y.success?y.value:null},S.value),{},{parent:r.value,linkedParent:l.value,hasDefaultSubGroup:null!=u.value,hasGeneralChat:null!=c.value,membershipApprovalMode:d.value,membershipApprovalRequest:m.value,participant:v.value}))},t.parseInviteLinkGroupInfoParent=_,t.parseInviteLinkGroupInfoParticipant=f;var i=r(n(73982)),o=n(22207),a=n(96799),s=n(74531),l=n(87020),u=n(61990),c=n(18131),d=n(25162),p=n(26679);function f(e){const t=(0,p.assertTag)(e,"participant");if(!t.success)return t;const n=(0,l.parseGroupInfoParticipantMixin)(e);return n.success,n}function _(e){const t=(0,p.assertTag)(e,"parent");if(!t.success)return t;const n=(0,p.attrIntRange)(e,"num_sub_groups",1,1e3);return n.success?(0,o.makeResult)({numSubGroups:n.value}):n}function g(e){const t=(0,p.assertTag)(e,"linked_parent");if(!t.success)return t;const n=(0,d.attrGroupJid)(e,"jid");if(!n.success)return n;const r=(0,c.parseNamedSubjectMixin)(e);return r.success?(0,o.makeResult)((0,i.default)({jid:n.value},r.value)):r}function h(e){const t=(0,p.assertTag)(e,"membership_approval_mode");if(!t.success)return t;const n=(0,u.parseMembershipApprovalGroupJoinModeEnabledMixin)(e);return n.success,n}function A(e){const t=(0,p.assertTag)(e,"membership_approval_request");if(!t.success)return t;const n=(0,p.optionalLiteral)(p.attrString,e,"error","304");return n.success?(0,o.makeResult)({error:n.value}):n}},61990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMembershipApprovalGroupJoinModeEnabledMixin=function(e){const t=(0,i.assertTag)(e,"membership_approval_mode");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"group_join");if(!n.success)return n;const o=(0,r.parseGroupJoinMembershipApprovalModeEnabledMixin)(n.value);if(!o.success)return o;return o};var r=n(16023),i=n(26679)},28494:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMembershipRequestMethodAttributeMixin=function(e){const t=(0,o.attrStringEnum)(e,"request_method",i.ENUM_INVITELINK_LINKEDGROUPJOIN_NONADMINADD);if(!t.success)return t;return(0,r.makeResult)({requestMethod:t.value})};var r=n(22207),i=n(56305),o=n(26679)},18131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNamedSubjectMixin=function(e){const t=(0,i.attrString)(e,"subject");if(!t.success)return t;return(0,r.makeResult)({subject:t.value})};var r=n(22207),i=n(26679)},63763:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNamedSubjectOrUnnamedSubjectFallbackMixinGroup=function(e){const t=(0,i.parseNamedSubjectMixin)(e);if(t.success)return(0,r.makeResult)({name:"NamedSubject",value:t.value});const n=(0,o.parseUnnamedSubjectFallbackMixin)(e);if(n.success)return(0,r.makeResult)({name:"UnnamedSubjectFallback",value:n.value});return(0,a.errorMixinDisjunction)(e,["NamedSubject","UnnamedSubjectFallback"],[t,n])};var r=n(22207),i=n(18131),o=n(46234),a=n(26679)},72093:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParentGroupDefaultMembershipApprovalModeMixin=function(e){const t=(0,i.assertTag)(e,"parent");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"default_membership_approval_mode","request_required");if(!n.success)return n;return(0,r.makeResult)({defaultMembershipApprovalMode:n.value})};var r=n(22207),i=n(26679)},93066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantMixin=function(e){const t=(0,o.assertTag)(e,"participant");if(!t.success)return t;const n=(0,i.parseParticipantMixins)(e);if(!n.success)return n;return(0,r.makeResult)({participantMixins:n.value})};var r=n(22207),i=n(60373),o=n(26679)},60373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantMixins=function(e){const t=(0,s.parseParticipantWithJidLidAndDisplayNameMixin)(e);if(t.success)return(0,r.makeResult)({name:"ParticipantWithJidLidAndDisplayName",value:t.value});const n=(0,a.parseParticipantWithJidContainingLidAndDisplayNameMixin)(e);if(n.success)return(0,r.makeResult)({name:"ParticipantWithJidContainingLidAndDisplayName",value:n.value});const c=(0,i.parseParticipantWithJidAndLidMixin)(e);if(c.success)return(0,r.makeResult)({name:"ParticipantWithJidAndLid",value:c.value});const d=(0,o.parseParticipantWithJidAndPnMixin)(e);if(d.success)return(0,r.makeResult)({name:"ParticipantWithJidAndPn",value:d.value});const p=(0,l.parseParticipantWithJidMixin)(e);if(p.success)return(0,r.makeResult)({name:"ParticipantWithJid",value:p.value});return(0,u.errorMixinDisjunction)(e,["ParticipantWithJidLidAndDisplayName","ParticipantWithJidContainingLidAndDisplayName","ParticipantWithJidAndLid","ParticipantWithJidAndPn","ParticipantWithJid"],[t,n,c,d,p])};var r=n(22207),i=n(65661),o=n(31093),a=n(12204),s=n(93020),l=n(72186),u=n(26679)},84451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantNotAddressableMixin=function(e){const t=(0,i.assertTag)(e,"participant");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"addressable","false");if(!n.success)return n;return(0,r.makeResult)({addressable:n.value})};var r=n(22207),i=n(26679)},65661:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantWithJidAndLidMixin=function(e){const t=(0,l.assertTag)(e,"participant");if(!t.success)return t;const n=(0,a.parseParticipantWithJidMixin)(e);if(!n.success)return n;const r=(0,s.parseParticipantWithLidMixin)(e);if(!r.success)return r;return(0,o.makeResult)((0,i.default)((0,i.default)({},n.value),r.value))};var i=r(n(73982)),o=n(22207),a=n(72186),s=n(98552),l=n(26679)},31093:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantWithJidAndPnMixin=function(e){const t=(0,l.assertTag)(e,"participant");if(!t.success)return t;const n=(0,a.parseParticipantWithJidMixin)(e);if(!n.success)return n;const r=(0,s.parsePhoneNumberMixin)(e);if(!r.success)return r;return(0,o.makeResult)((0,i.default)((0,i.default)({},n.value),r.value))};var i=r(n(73982)),o=n(22207),a=n(72186),s=n(28562),l=n(26679)},12204:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantWithJidContainingLidAndDisplayNameMixin=function(e){const t=(0,l.assertTag)(e,"participant");if(!t.success)return t;const n=(0,s.attrUserJid)(e,"jid");if(!n.success)return n;const r=(0,a.parseDisplayNameMixin)(e);if(!r.success)return r;return(0,o.makeResult)((0,i.default)({jid:n.value},r.value))};var i=r(n(73982)),o=n(22207),a=n(2318),s=n(25162),l=n(26679)},93020:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantWithJidLidAndDisplayNameMixin=function(e){const t=(0,l.assertTag)(e,"participant");if(!t.success)return t;const n=(0,s.parseParticipantWithJidAndLidMixin)(e);if(!n.success)return n;const r=(0,a.parseDisplayNameMixin)(e);if(!r.success)return r;return(0,o.makeResult)((0,i.default)((0,i.default)({},n.value),r.value))};var i=r(n(73982)),o=n(22207),a=n(2318),s=n(65661),l=n(26679)},72186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantWithJidMixin=function(e){const t=(0,o.assertTag)(e,"participant");if(!t.success)return t;const n=(0,i.attrUserJid)(e,"jid");if(!n.success)return n;return(0,r.makeResult)({jid:n.value})};var r=n(22207),i=n(25162),o=n(26679)},98552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParticipantWithLidMixin=function(e){const t=(0,o.assertTag)(e,"participant");if(!t.success)return t;const n=(0,i.attrUserJid)(e,"lid");if(!n.success)return n;return(0,r.makeResult)({lid:n.value})};var r=n(22207),i=n(25162),o=n(26679)},28562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePhoneNumberMixin=function(e){const t=(0,i.attrUserJid)(e,"phone_number");if(!t.success)return t;return(0,r.makeResult)({phoneNumber:t.value})};var r=n(22207),i=n(25162)},87166:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseServerErrors=function(e){const t=(0,o.parseIQErrorInternalServerErrorMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorInternalServerError",value:t.value});const n=(0,s.parseIQErrorServiceUnavailableMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorServiceUnavailable",value:n.value});const u=(0,a.parseIQErrorPartialServerErrorMixin)(e);if(u.success)return(0,r.makeResult)({name:"IQErrorPartialServerError",value:u.value});const c=(0,i.parseIQErrorFallbackServerMixin)(e);if(c.success)return(0,r.makeResult)({name:"IQErrorFallbackServer",value:c.value});return(0,l.errorMixinDisjunction)(e,["IQErrorInternalServerError","IQErrorServiceUnavailable","IQErrorPartialServerError","IQErrorFallbackServer"],[t,n,u,c])};var r=n(22207),i=n(71529),o=n(69095),a=n(4032),s=n(3333),l=n(26679)},67568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseServerNotificationMixin=function(e){const t=(0,i.assertTag)(e,"notification");if(!t.success)return t;const n=(0,i.attrIntRange)(e,"t",0,void 0);if(!n.success)return n;const o=(0,i.attrStanzaId)(e,"id");if(!o.success)return o;const a=(0,i.optional)(i.attrIntRange,e,"offline",0,1024);if(!a.success)return a;return(0,r.makeResult)({t:n.value,id:o.value,offline:a.value})};var r=n(22207),i=n(26679)},53557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubGroupSuggestionDescriptionMixin=function(e){const t=(0,i.assertTag)(e,"description");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"body");if(!n.success)return n;const o=(0,i.contentString)(n.value);if(!o.success)return o;return(0,r.makeResult)({bodyElementValue:o.value})};var r=n(22207),i=n(26679)},18605:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubGroupSuggestionMixin=function(e){const t=(0,l.assertTag)(e,"sub_group_suggestion");if(!t.success)return t;const n=(0,s.attrUserJid)(e,"creator");if(!n.success)return n;const r=(0,a.parseSubGroupSuggestionWithoutCreatorMixin)(e);if(!r.success)return r;return(0,o.makeResult)((0,i.default)({creator:n.value},r.value))};var i=r(n(73982)),o=n(22207),a=n(67204),s=n(25162),l=n(26679)},67204:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubGroupSuggestionWithoutCreatorMixin=function(e){const t=(0,o.assertTag)(e,"sub_group_suggestion");if(!t.success)return t;const n=(0,i.attrGroupJid)(e,"jid");if(!n.success)return n;return(0,r.makeResult)({jid:n.value})};var r=n(22207),i=n(25162),o=n(26679)},79465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTruncatedGroupInfoMixin=function(e){const t=(0,i.assertTag)(e,"group");if(!t.success)return t;const n=(0,i.attrString)(e,"id");if(!n.success)return n;const o=(0,i.literal)(i.attrString,e,"truncated","true");if(!o.success)return o;const a=(0,i.attrIntRange)(e,"size",0,19999);if(!a.success)return a;return(0,r.makeResult)({id:n.value,truncated:o.value,size:a.value})};var r=n(22207),i=n(26679)},73847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownAddModeMixin=function(e){const t=(0,i.assertTag)(e,"member_add_mode");if(!t.success)return t;const n=(0,i.contentString)(e);if(!n.success)return n;return(0,r.makeResult)({elementValue:n.value})};var r=n(22207),i=n(26679)},46234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnnamedSubjectFallbackMixin=function(e){const t=(0,i.optional)(i.attrString,e,"subject");if(!t.success)return t;return(0,r.makeResult)({subject:t.value})};var r=n(22207),i=n(26679)},83173:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseGetGroupMixin=function(e,t){const n=function(e){const{iqTo:t}=e;return(0,o.mergeBaseIQGetRequestMixin)((0,r.smax)("iq",{to:(0,a.GROUP_JID)(t),xmlns:"w:g2"}))}(t);return(0,i.mergeStanzas)(e,n)};var r=n(73415),i=n(62046),o=n(88388),a=n(42811)},94557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseGetServerMixin=function(e){const t=(0,o.mergeBaseIQGetRequestMixin)((0,r.smax)("iq",{to:a.G_US,xmlns:"w:g2"}));return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(88388),a=n(42811)},88388:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQGetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"get"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},36956:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBatchGetGroupInfoRequest=function(e){const{groupArgs:t,queryContext:n}=e;return(0,a.mergeBaseGetServerMixin)((0,o.smax)("iq",null,(0,o.smax)("query",{context:(0,r.OPTIONAL)(s.CUSTOM_STRING,n)},(0,i.REPEATED_CHILD)(l,t,1,1e4))))},t.makeBatchGetGroupInfoRequestQueryGroup=l;var r=n(73538),i=n(47396),o=n(73415),a=n(94557),s=n(42811);function l(e){const{groupJid:t}=e;return(0,o.smax)("group",{jid:(0,s.GROUP_JID)(t)})}},63497:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetInviteGroupInfoRequest=function(e){const{inviteCode:t}=e;return(0,i.mergeBaseGetServerMixin)((0,r.smax)("iq",null,(0,r.smax)("invite",{code:(0,o.CUSTOM_STRING)(t)})))};var r=n(73415),i=n(94557),o=n(42811)},2307:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetMembershipApprovalRequestsRequest=function(e){const{hasGetMembershipApprovalRequestsRequestorFetch:t}=e;return(0,o.mergeBaseGetGroupMixin)((0,r.smax)("iq",null,(0,i.optionalMerge)(a.mergeGetMembershipApprovalRequestsRequestorFetchMixin,(0,r.smax)("membership_approval_requests",null),t)),e)};var r=n(73415),i=n(62046),o=n(83173),a=n(79965)},79965:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeGetMembershipApprovalRequestsRequestorFetchMixin=function(e){const t=(0,r.smax)("smax$any",{requestor_fetch:"true"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046)},98197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetParticipatingGroupsRequest=function(e){const{hasParticipants:t,hasDescription:n}=e;return(0,o.mergeBaseGetServerMixin)((0,i.smax)("iq",null,(0,i.smax)("participating",null,(0,r.HAS_OPTIONAL_CHILD)(a,t),(0,r.HAS_OPTIONAL_CHILD)(s,n))))},t.makeGetParticipatingGroupsRequestParticipatingDescription=s,t.makeGetParticipatingGroupsRequestParticipatingParticipants=a;var r=n(47396),i=n(73415),o=n(94557);function a(){return(0,i.smax)("participants",null)}function s(){return(0,i.smax)("description",null)}},87002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetSubGroupSuggestionsRequest=function(e){const{subGroupMixinArgs:t}=e;return(0,i.mergeBaseGetGroupMixin)((0,r.smax)("iq",null,(0,o.mergeSubGroupMixin)((0,r.smax)("sub_group_suggestions",null),t)),e)};var r=n(73415),i=n(83173),o=n(63750)},36805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGroupsDirtyNotificationResponseAck=function(e){return(0,i.mergeNotificationClientAckMixin)((0,r.smax)("ack",null),e)};var r=n(73415),i=n(19735)},19735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeNotificationClientAckMixin=function(e,t){const n=function(e){const t=(0,s.attrFromReference)(l.attrStanzaId,e,["id"]);if(!t.success)throw new u.SmaxParsingFailure(t.error);const n=(0,s.attrFromReference)(a.attrJidEnum,e,["from"],r.DOMAINJID_GROUPJID);if(!n.success)throw new u.SmaxParsingFailure(n.error);const o=(0,s.attrFromReference)(l.attrString,e,["type"]);if(!o.success)throw new u.SmaxParsingFailure(o.error);return(0,i.smax)("ack",{id:(0,c.STANZA_ID)(t.value),to:(0,c.JID)(n.value),class:"notification",type:(0,c.CUSTOM_STRING)(o.value)})}(t);return(0,o.mergeStanzas)(e,n)};var r=n(56305),i=n(73415),o=n(62046),a=n(25162),s=n(19077),l=n(26679),u=n(75988),c=n(42811)},63750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeSubGroupMixin=function(e,t){const n=function(e){const{anySubGroupJid:t}=e;return(0,r.smax)("smax$any",{sub_group_jid:(0,o.GROUP_JID)(t)})}(t);return(0,i.mergeStanzas)(e,n)};var r=n(73415),i=n(62046),o=n(42811)},40621:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendEventRPC=function(){return d.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(75612),s=n(52565),l=n(16026),u=n(75988),c=n(99407);function d(){return(d=(0,i.default)((function*(e,t){const n=(0,l.makeEventRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,s.parseEventResponseSuccess)(r,n);if(i.success)return{name:"EventResponseSuccess",value:i.value};const d=(0,a.parseEventResponseError)(r,n);if(d.success)return{name:"EventResponseError",value:d.value};throw new u.SmaxParsingFailure((0,c.errorMessageRpcParsing)("Event",{Success:i,Error:d}))}))).apply(this,arguments)}},75612:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventResponseError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,s.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,a.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup:c.value}))};var i=r(n(73982)),o=n(22207),a=n(8817),s=n(25945),l=n(26679)},52565:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventResponseSuccess=function(e,t){const n=(0,i.assertTag)(e,"iq");if(!n.success)return n;const o=(0,r.parseIQResultResponseMixin)(e,t);if(!o.success)return o;return o};var r=n(45085),i=n(26679)},45220:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorInternalServerErrorMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","internal-server-error");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",500);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},8817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup=function(e){const t=(0,i.parseIQErrorInternalServerErrorMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorInternalServerError",value:t.value});const n=(0,o.parseIQErrorRequestTimeoutMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorRequestTimeout",value:n.value});const l=(0,a.parseIQErrorServiceUnavailableMixin)(e);if(l.success)return(0,r.makeResult)({name:"IQErrorServiceUnavailable",value:l.value});return(0,s.errorMixinDisjunction)(e,["IQErrorInternalServerError","IQErrorRequestTimeout","IQErrorServiceUnavailable"],[t,n,l])};var r=n(22207),i=n(45220),o=n(61812),a=n(51689),s=n(26679)},61812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorRequestTimeoutMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","request-timeout");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",408);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},25945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","error");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},51689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorServiceUnavailableMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","service-unavailable");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",503);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},45085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQResultResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","result");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},72655:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQSetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"set"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},16026:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventRequest=function(e){const{eventPromotionId:t,eventType:n,eventTimestampSec:a,eventLogdata:s}=e;return(0,i.mergeBaseIQSetRequestMixin)((0,r.smax)("iq",{xmlns:"w:comms",to:o.S_WHATSAPP_NET},(0,r.smax)("event",{promotion_id:(0,o.CUSTOM_STRING)(t),type:(0,o.CUSTOM_STRING)(n),timestamp_sec:(0,o.INT)(a),logdata:(0,o.CUSTOM_STRING)(s)})))};var r=n(73415),i=n(72655),o=n(42811)},32864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.receiveNewsletterRPC=function(e){const t=(0,r.parseNewsletterRequest)(e);if(!t.success)throw new a.SmaxParsingFailure((0,s.errorMessageRpcParsing)("Newsletter",{Request:t}));return{parsedRequest:t.value,makeNewsletterResponseError:()=>(0,i.makeNewsletterResponseError)(e),makeNewsletterResponseSuccess:()=>(0,o.makeNewsletterResponseSuccess)(e)}};var r=n(34754),i=n(5131),o=n(77804),a=n(75988),s=n(99407)},70671:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAdminEditMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"edit","3");if(!n.success)return n;return(0,r.makeResult)({edit:n.value})};var r=n(22207),i=n(26679)},26601:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAdminRevokeMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"edit","8");if(!n.success)return n;return(0,r.makeResult)({edit:n.value})};var r=n(22207),i=n(26679)},19803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentTypeMediaMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"type","media");if(!n.success)return n;return(0,r.makeResult)({type:n.value})};var r=n(22207),i=n(26679)},1685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentTypePollCreationMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"meta");if(!n.success)return n;const o=(0,i.literal)(i.attrString,e,"type","poll");if(!o.success)return o;const a=(0,i.literal)(i.attrString,n.value,"polltype","creation");if(!a.success)return a;return(0,r.makeResult)({type:o.value,metaPolltype:a.value})};var r=n(22207),i=n(26679)},1067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentTypePollVoteMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"meta");if(!n.success)return n;const o=(0,i.literal)(i.attrString,e,"type","poll");if(!o.success)return o;const a=(0,i.literal)(i.attrString,n.value,"polltype","vote");if(!a.success)return a;return(0,r.makeResult)({type:o.value,metaPolltype:a.value})};var r=n(22207),i=n(26679)},57972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentTypeReactionMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"type","reaction");if(!n.success)return n;return(0,r.makeResult)({type:n.value})};var r=n(22207),i=n(26679)},73621:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentTypeTextMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"type","text");if(!n.success)return n;return(0,r.makeResult)({type:n.value})};var r=n(22207),i=n(26679)},13399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GROUPJID_USERJID=t.ENUM_REQUEST_SEND=t.ENUM_MSG_PKMSG=t.ENUM_MATCHED_UNMATCHED=t.ENUM_LID_PN=t.ENUM_INCENTIVE_P2M_P2P_PAYOUT=t.ENUM_HPPPAYMENTLINK_UPI=t.ENUM_HIGH_LOW_UNKNOWN=t.ENUM_HIGH_HIGHFORCE_LOW=t.ENUM_FULL_MISSINGFIELDNOTPARTIAL_PARTIAL=t.ENUM_FIRST_FULL_INNER_LAST=t.ENUM_FBPAY_NOVI_P2MLITE_UPI=t.ENUM_FALSE_TRUE=t.ENUM_FAILURE_INIT_SUCCESS=t.ENUM_EXACT_MAX=t.ENUM_CTWA_USERNAME=t.ENUM_CREATION_EDIT_RESPONSE=t.ENUM_CREATION_EDIT=t.ENUM_CATALOGMESSAGE_LANELINECALL_MENUOPTIONS_NOVICOMPLETETRANSACTION_NOVIHUB_NOVILOGIN_NOVIREPORTTRANSACTION_NOVIVIEWBANKDETAIL_NOVIVIEWCARDDETAIL_NOVIVIEWCODE_NOVIVIEWTRANSACTION_ORDERDETAILS_ORDERSTATUS_OTP_PAYMENTMETHOD_PAYMENTSTATUS_VOICECALL=t.ENUM_CARD_NETBANKING_UPI_WALLET=t.ENUM_BUYER_SELLER=t.ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO=t.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA=t.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GENAISTICKER_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA=t.ENUM_ASPRESENTED_BIMONTHLY_DAILY_FORTNIGHTLY_HALFYEARLY_MONTHLY_ONETIME_QUARTERLY_UNKNOWN_WEEKLY_YEARLY=t.ENUM_ALLOW_BYPASS_DENY_ERROR=t.ENUM_ALLOWLIST_CONTACTS_DENYLIST=t.ENUM_ADDRESSMESSAGE_GALAXYMESSAGE=t.ENUM_ADDRESSMESSAGE_FORMMESSAGE_GALAXYMESSAGE_MENUOPTIONS=t.ENUM_ACCEPT_REJECT_UNKNOWN=t.ENUM_1_3=t.ENUM_1_2=t.ENUM_0_1=t.DEVICEJID_DEVICEJID_DEVICEJID=t.DEVICEJID_DEVICEJID=t.DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_STATUSJID=void 0;var r=n(44037);t.ENUM_0_1={0:"0",1:"1"};t.ENUM_1_2={1:"1",2:"2"};t.ENUM_1_3={1:"1",3:"3"};t.ENUM_ACCEPT_REJECT_UNKNOWN={ACCEPT:"ACCEPT",REJECT:"REJECT",UNKNOWN:"UNKNOWN"};t.ENUM_ADDRESSMESSAGE_FORMMESSAGE_GALAXYMESSAGE_MENUOPTIONS={address_message:"address_message",form_message:"form_message",galaxy_message:"galaxy_message",menu_options:"menu_options"};t.ENUM_ADDRESSMESSAGE_GALAXYMESSAGE={address_message:"address_message",galaxy_message:"galaxy_message"};t.ENUM_ALLOWLIST_CONTACTS_DENYLIST={allowlist:"allowlist",contacts:"contacts",denylist:"denylist"};t.ENUM_ALLOW_BYPASS_DENY_ERROR={allow:"allow",bypass:"bypass",deny:"deny",error:"error"};t.ENUM_ASPRESENTED_BIMONTHLY_DAILY_FORTNIGHTLY_HALFYEARLY_MONTHLY_ONETIME_QUARTERLY_UNKNOWN_WEEKLY_YEARLY={ASPRESENTED:"ASPRESENTED",BIMONTHLY:"BIMONTHLY",DAILY:"DAILY",FORTNIGHTLY:"FORTNIGHTLY",HALFYEARLY:"HALFYEARLY",MONTHLY:"MONTHLY",ONETIME:"ONETIME",QUARTERLY:"QUARTERLY",UNKNOWN:"UNKNOWN",WEEKLY:"WEEKLY",YEARLY:"YEARLY"};t.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GENAISTICKER_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA={audio:"audio",avatar_sticker:"avatar_sticker",buttons_response:"buttons_response",cataloglink:"cataloglink",contact:"contact",contact_array:"contact_array",document:"document",genai_sticker:"genai_sticker",gif:"gif",history:"history",image:"image",list_response:"list_response",location:"location",native_flow_response:"native_flow_response",order:"order",product:"product",productlink:"productlink",ptt:"ptt",ptv:"ptv",sticker:"sticker",url:"url",vcard:"vcard",video:"video",xma:"xma"};t.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA={audio:"audio",avatar_sticker:"avatar_sticker",buttons_response:"buttons_response",cataloglink:"cataloglink",contact:"contact",contact_array:"contact_array",document:"document",gif:"gif",history:"history",image:"image",list_response:"list_response",location:"location",native_flow_response:"native_flow_response",order:"order",product:"product",productlink:"productlink",ptt:"ptt",ptv:"ptv",sticker:"sticker",url:"url",vcard:"vcard",video:"video",xma:"xma"};t.ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO={audio:"audio",avatar_sticker:"avatar_sticker",cataloglink:"cataloglink",document:"document",genai_sticker:"genai_sticker",gif:"gif",image:"image",productlink:"productlink",ptt:"ptt",sticker:"sticker",url:"url",vcard:"vcard",video:"video"};t.ENUM_BUYER_SELLER={buyer:"buyer",seller:"seller"};t.ENUM_CARD_NETBANKING_UPI_WALLET={card:"card","net-banking":"net-banking",upi:"upi",wallet:"wallet"};t.ENUM_CATALOGMESSAGE_LANELINECALL_MENUOPTIONS_NOVICOMPLETETRANSACTION_NOVIHUB_NOVILOGIN_NOVIREPORTTRANSACTION_NOVIVIEWBANKDETAIL_NOVIVIEWCARDDETAIL_NOVIVIEWCODE_NOVIVIEWTRANSACTION_ORDERDETAILS_ORDERSTATUS_OTP_PAYMENTMETHOD_PAYMENTSTATUS_VOICECALL={catalog_message:"catalog_message",laneline_call:"laneline_call",menu_options:"menu_options",novi_complete_transaction:"novi_complete_transaction",novi_hub:"novi_hub",novi_login:"novi_login",novi_report_transaction:"novi_report_transaction",novi_view_bank_detail:"novi_view_bank_detail",novi_view_card_detail:"novi_view_card_detail",novi_view_code:"novi_view_code",novi_view_transaction:"novi_view_transaction",order_details:"order_details",order_status:"order_status",otp:"otp",payment_method:"payment_method",payment_status:"payment_status",voice_call:"voice_call"};t.ENUM_CREATION_EDIT={creation:"creation",edit:"edit"};t.ENUM_CREATION_EDIT_RESPONSE={creation:"creation",edit:"edit",response:"response"};t.ENUM_CTWA_USERNAME={ctwa:"ctwa",username:"username"};t.ENUM_EXACT_MAX={EXACT:"EXACT",MAX:"MAX"};t.ENUM_FAILURE_INIT_SUCCESS={FAILURE:"FAILURE",INIT:"INIT",SUCCESS:"SUCCESS"};t.ENUM_FALSE_TRUE={false:"false",true:"true"};t.ENUM_FBPAY_NOVI_P2MLITE_UPI={FBPAY:"FBPAY",NOVI:"NOVI",P2M_LITE:"P2M_LITE",UPI:"UPI"};t.ENUM_FIRST_FULL_INNER_LAST={first:"first",full:"full",inner:"inner",last:"last"};t.ENUM_FULL_MISSINGFIELDNOTPARTIAL_PARTIAL={FULL:"FULL",MISSING_FIELD_NOT_PARTIAL:"MISSING_FIELD_NOT_PARTIAL",PARTIAL:"PARTIAL"};t.ENUM_HIGH_HIGHFORCE_LOW={high:"high",high_force:"high_force",low:"low"};t.ENUM_HIGH_LOW_UNKNOWN={high:"high",low:"low",unknown:"unknown"};t.ENUM_HPPPAYMENTLINK_UPI={HPP_PAYMENT_LINK:"HPP_PAYMENT_LINK",UPI:"UPI"};t.ENUM_INCENTIVE_P2M_P2P_PAYOUT={incentive:"incentive",p2m:"p2m",p2p:"p2p",payout:"payout"};t.ENUM_LID_PN={lid:"lid",pn:"pn"};t.ENUM_MATCHED_UNMATCHED={matched:"matched",unmatched:"unmatched"};t.ENUM_MSG_PKMSG={msg:"msg",pkmsg:"pkmsg"};t.ENUM_REQUEST_SEND={request:"request",send:"send"};const i={validators:[r.validateDeviceJid,r.validateBroadcastJid,r.validateDeviceJid,r.validateGroupJid,r.validateStatusJid],typeName:"DeviceJid|BroadcastJid|DeviceJid|GroupJid|StatusJid"};t.DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_STATUSJID=i;const o={validators:[r.validateDeviceJid,r.validateDeviceJid],typeName:"DeviceJid|DeviceJid"};t.DEVICEJID_DEVICEJID=o;const a={validators:[r.validateDeviceJid,r.validateDeviceJid,r.validateDeviceJid],typeName:"DeviceJid|DeviceJid|DeviceJid"};t.DEVICEJID_DEVICEJID_DEVICEJID=a;const s={validators:[r.validateGroupJid,r.validateUserJid],typeName:"GroupJid|UserJid"};t.GROUPJID_USERJID=s},65059:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterEditMixin=function(e){const t=(0,l.assertTag)(e,"message");if(!t.success)return t;const n=(0,a.parseAdminEditMixin)(e);if(!n.success)return n;const r=(0,s.parseNewsletterTextOrMediaMixinGroup)(e);if(!r.success)return r;return(0,o.makeResult)((0,i.default)((0,i.default)({},n.value),{},{newsletterTextOrMediaMixinGroup:r.value}))};var i=r(n(73982)),o=n(22207),a=n(70671),s=n(98156),l=n(26679)},27589:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterMediaMixin=function(e){const t=(0,u.assertTag)(e,"message");if(!t.success)return t;const n=(0,u.flattenedChildWithTag)(e,"plaintext");if(!n.success)return n;const r=(0,u.attrStringEnum)(n.value,"mediatype",s.ENUM_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_URL_VCARD_VIDEO);if(!r.success)return r;const c=(0,l.parsePayloadMixin)(n.value);if(!c.success)return c;const d=(0,a.parseContentTypeMediaMixin)(e);if(!d.success)return d;return(0,o.makeResult)((0,i.default)({plaintextMediatype:r.value,plaintextPayloadMixin:c.value},d.value))};var i=r(n(73982)),o=n(22207),a=n(19803),s=n(13399),l=n(13702),u=n(26679)},77826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterMessageFanoutContent=function(e){const t=(0,i.parseNewsletterEditMixin)(e);if(t.success)return(0,r.makeResult)({name:"NewsletterEdit",value:t.value});const n=(0,c.parseNewsletterRevokeMixin)(e);if(n.success)return(0,r.makeResult)({name:"NewsletterRevoke",value:n.value});const f=(0,d.parseNewsletterTextMixin)(e);if(f.success)return(0,r.makeResult)({name:"NewsletterText",value:f.value});const _=(0,o.parseNewsletterMediaMixin)(e);if(_.success)return(0,r.makeResult)({name:"NewsletterMedia",value:_.value});const g=(0,l.parseNewsletterReactionMixin)(e);if(g.success)return(0,r.makeResult)({name:"NewsletterReaction",value:g.value});const h=(0,u.parseNewsletterReactionRevokeMixin)(e);if(h.success)return(0,r.makeResult)({name:"NewsletterReactionRevoke",value:h.value});const A=(0,a.parseNewsletterPollCreationMixin)(e);if(A.success)return(0,r.makeResult)({name:"NewsletterPollCreation",value:A.value});const m=(0,s.parseNewsletterPollVoteMixin)(e);if(m.success)return(0,r.makeResult)({name:"NewsletterPollVote",value:m.value});return(0,p.errorMixinDisjunction)(e,["NewsletterEdit","NewsletterRevoke","NewsletterText","NewsletterMedia","NewsletterReaction","NewsletterReactionRevoke","NewsletterPollCreation","NewsletterPollVote"],[t,n,f,_,g,h,A,m])};var r=n(22207),i=n(65059),o=n(27589),a=n(94580),s=n(26279),l=n(97545),u=n(66506),c=n(78075),d=n(26177),p=n(26679)},9966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterMessageFanoutMixin=function(e){const t=(0,s.assertTag)(e,"message");if(!t.success)return t;const n=(0,s.attrStanzaId)(e,"id");if(!n.success)return n;const l=(0,s.attrIntRange)(e,"server_id",99,2147476647);if(!l.success)return l;const u=(0,s.attrIntRange)(e,"t",0,void 0);if(!u.success)return u;const c=(0,s.optionalLiteral)(s.attrString,e,"is_sender","true");if(!c.success)return c;const d=(0,a.parseNewsletterMessageOriginalTimestampMixin)(e),p=(0,o.parseNewsletterMessageLastEditTimestampMixin)(e),f=(0,i.parseNewsletterMessageFanoutContent)(e);if(!f.success)return f;return(0,r.makeResult)({id:n.value,serverId:l.value,t:u.value,isSender:c.value,newsletterMessageOriginalTimestampMixin:d.success?d.value:null,newsletterMessageLastEditTimestampMixin:p.success?p.value:null,newsletterMessageFanoutContent:f.value})};var r=n(22207),i=n(77826),o=n(93098),a=n(84846),s=n(26679)},93098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterMessageLastEditTimestampMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"meta");if(!n.success)return n;const o=(0,i.optional)(i.attrIntRange,n.value,"msg_edit_t",0,void 0);if(!o.success)return o;return(0,r.makeResult)({metaMsgEditT:o.value})};var r=n(22207),i=n(26679)},84846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterMessageOriginalTimestampMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"meta");if(!n.success)return n;const o=(0,i.optional)(i.attrIntRange,n.value,"original_msg_t",0,void 0);if(!o.success)return o;return(0,r.makeResult)({metaOriginalMsgT:o.value})};var r=n(22207),i=n(26679)},84312:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterMessageWithJIDMixin=function(e){const t=(0,u.assertTag)(e,"message");if(!t.success)return t;const n=(0,l.attrNewsletterJid)(e,"from");if(!n.success)return n;const r=(0,a.parseNewsletterMessageFanoutMixin)(e);if(!r.success)return r;const c=(0,s.parseOfflineMixin)(e);return(0,o.makeResult)((0,i.default)((0,i.default)({from:n.value},r.value),{},{offlineMixin:c.success?c.value:null}))};var i=r(n(73982)),o=n(22207),a=n(9966),s=n(43852),l=n(25162),u=n(26679)},94580:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterPollCreationMixin=function(e){const t=(0,l.assertTag)(e,"message");if(!t.success)return t;const n=(0,l.flattenedChildWithTag)(e,"plaintext");if(!n.success)return n;const r=(0,s.parsePayloadMixin)(n.value);if(!r.success)return r;const u=(0,a.parseContentTypePollCreationMixin)(e);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({plaintextPayloadMixin:r.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(1685),s=n(13702),l=n(26679)},26279:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterPollVoteMixin=function(e){const t=(0,s.assertTag)(e,"message");if(!t.success)return t;const n=(0,s.flattenedChildWithTag)(e,"votes");if(!n.success)return n;const r=(0,a.parseContentTypePollVoteMixin)(e);if(!r.success)return r;const u=(0,s.mapChildrenWithTag)(n.value,"vote",0,1e3,l);if(!u.success)return u;return(0,o.makeResult)((0,i.default)((0,i.default)({},r.value),{},{votesVote:u.value}))},t.parseNewsletterPollVoteVotesVote=l;var i=r(n(73982)),o=n(22207),a=n(1067),s=n(26679);function l(e){const t=(0,s.assertTag)(e,"vote");if(!t.success)return t;const n=(0,s.contentBytesRange)(e,32,32);return n.success?(0,o.makeResult)({elementValue:n.value}):n}},97545:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterReactionMixin=function(e){const t=(0,s.assertTag)(e,"message");if(!t.success)return t;const n=(0,s.flattenedChildWithTag)(e,"reaction");if(!n.success)return n;const r=(0,s.attrString)(n.value,"code");if(!r.success)return r;const l=(0,a.parseContentTypeReactionMixin)(e);if(!l.success)return l;return(0,o.makeResult)((0,i.default)({reactionCode:r.value},l.value))};var i=r(n(73982)),o=n(22207),a=n(57972),s=n(26679)},66506:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterReactionRevokeMixin=function(e){const t=(0,l.assertTag)(e,"message");if(!t.success)return t;const n=(0,l.flattenedChildWithTag)(e,"reaction");if(!n.success)return n;const r=(0,s.parseRevokeMixin)(e);if(!r.success)return r;const u=(0,a.parseContentTypeReactionMixin)(e);if(!u.success)return u;return(0,o.makeResult)((0,i.default)((0,i.default)({},r.value),u.value))};var i=r(n(73982)),o=n(22207),a=n(57972),s=n(71754),l=n(26679)},34754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterRequest=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,r.parseNewsletterMessageWithJIDMixin)(e);if(!n.success)return n;return n};var r=n(84312),i=n(26679)},78075:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterRevokeMixin=function(e){const t=(0,l.assertTag)(e,"message");if(!t.success)return t;const n=(0,l.flattenedChildWithTag)(e,"plaintext");if(!n.success)return n;const r=(0,a.parseAdminRevokeMixin)(e);if(!r.success)return r;const u=(0,s.parseContentTypeTextMixin)(e);if(!u.success)return u;return(0,o.makeResult)((0,i.default)((0,i.default)({},r.value),u.value))};var i=r(n(73982)),o=n(22207),a=n(26601),s=n(73621),l=n(26679)},26177:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterTextMixin=function(e){const t=(0,l.assertTag)(e,"message");if(!t.success)return t;const n=(0,l.flattenedChildWithTag)(e,"plaintext");if(!n.success)return n;const r=(0,s.parsePayloadMixin)(n.value);if(!r.success)return r;const u=(0,a.parseContentTypeTextMixin)(e);if(!u.success)return u;return(0,o.makeResult)((0,i.default)({plaintextPayloadMixin:r.value},u.value))};var i=r(n(73982)),o=n(22207),a=n(73621),s=n(13702),l=n(26679)},98156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNewsletterTextOrMediaMixinGroup=function(e){const t=(0,o.parseNewsletterTextMixin)(e);if(t.success)return(0,r.makeResult)({name:"NewsletterText",value:t.value});const n=(0,i.parseNewsletterMediaMixin)(e);if(n.success)return(0,r.makeResult)({name:"NewsletterMedia",value:n.value});return(0,a.errorMixinDisjunction)(e,["NewsletterText","NewsletterMedia"],[t,n])};var r=n(22207),i=n(27589),o=n(26177),a=n(26679)},43852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOfflineMixin=function(e){const t=(0,i.attrIntRange)(e,"offline",0,12);if(!t.success)return t;return(0,r.makeResult)({offline:t.value})};var r=n(22207),i=n(26679)},13702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePayloadMixin=function(e){const t=(0,i.assertTag)(e,"plaintext");if(!t.success)return t;const n=(0,i.contentBytesRange)(e,1,1048576);if(!n.success)return n;return(0,r.makeResult)({elementValue:n.value})};var r=n(22207),i=n(26679)},71754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRevokeMixin=function(e){const t=(0,i.assertTag)(e,"message");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"edit","7");if(!n.success)return n;return(0,r.makeResult)({edit:n.value})};var r=n(22207),i=n(26679)},68695:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeCommonAckMixin=function(e,t){const n=function(e){const t=(0,a.attrFromReference)(o.attrNewsletterJid,e,["from"]);if(!t.success)throw new l.SmaxParsingFailure(t.error);const n=(0,a.attrFromReference)(s.attrStanzaId,e,["id"]);if(!n.success)throw new l.SmaxParsingFailure(n.error);const i=(0,a.attrFromReference)(s.attrString,e,["type"]);if(!i.success)throw new l.SmaxParsingFailure(i.error);return(0,r.smax)("ack",{to:(0,u.JID)(t.value),class:"message",id:(0,u.STANZA_ID)(n.value),type:(0,u.CUSTOM_STRING)(i.value)})}(t);return(0,i.mergeStanzas)(e,n)};var r=n(73415),i=n(62046),o=n(25162),a=n(19077),s=n(26679),l=n(75988),u=n(42811)},5131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeNewsletterResponseError=function(e){return(0,i.mergeCommonAckMixin)((0,r.smax)("ack",{error:"406"}),e)};var r=n(73415),i=n(68695)},77804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeNewsletterResponseSuccess=function(e){return(0,i.mergeCommonAckMixin)((0,r.smax)("ack",null),e)};var r=n(73415),i=n(68695)},94048:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendBatchRPC=function(){return s.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(98252);function s(){return(s=(0,i.default)((function*(e){const t=(0,a.makeBatchRequest)(e);yield(0,o.castSmaxStanza)(t)}))).apply(this,arguments)}},98252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBatchRequest=function(e){const{offlineBatchCount:t}=e;return(0,r.smax)("ib",null,(0,r.smax)("offline_batch",{count:(0,i.INT)(t)}))};var r=n(73415),i=n(42811)},15029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClientResponseServerResponse=function(e,t){const n=(0,s.assertTag)(e,"iq");if(!n.success)return n;const l=(0,o.attrJidEnum)(e,"from",i.DOMAINJID_USERJID);if(!l.success)return l;const u=(0,s.literal)(s.attrString,e,"type","result");if(!u.success)return u;const c=(0,a.attrStringFromReference)(t,["id"]);if(!c.success)return c;const d=(0,s.literal)(s.attrString,e,"id",c.value);if(!d.success)return d;const p=(0,s.attrInt)(e,"t");if(!p.success)return p;return(0,r.makeResult)({from:l.value,type:u.value,t:p.value})};var r=n(22207),i=n(71022),o=n(25162),a=n(19077),s=n(26679)},71022:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMAINJID_USERJID=void 0;var r=n(44037);const i={validators:[r.validateDomainJid,r.validateUserJid],typeName:"DomainJid|UserJid"};t.DOMAINJID_USERJID=i},68991:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeClientRequest=function(){return(0,i.mergeClientWellFormedToMixin)((0,r.smax)("iq",{id:(0,o.generateId)(),type:"get",xmlns:"w:p"}))};var r=n(73415),i=n(13388),o=n(42811)},13388:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClientWellFormedToMixin=function(e){const t=(0,r.smax)("iq",{to:o.S_WHATSAPP_NET});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},74653:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendFetchKeyBundlesRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(26656),s=n(19802),l=n(70042),u=n(31614),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeFetchKeyBundlesRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseFetchKeyBundlesResponseSuccess)(r,n);if(i.success)return{name:"FetchKeyBundlesResponseSuccess",value:i.value};const p=(0,a.parseFetchKeyBundlesResponseRequestError)(r,n);if(p.success)return{name:"FetchKeyBundlesResponseRequestError",value:p.value};const f=(0,s.parseFetchKeyBundlesResponseServerError)(r,n);if(f.success)return{name:"FetchKeyBundlesResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("FetchKeyBundles",{Success:i,RequestError:p,ServerError:f}))}))).apply(this,arguments)}},82688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDeviceIdentityMixin=function(e){const t=(0,i.flattenedChildWithTag)(e,"device-identity");if(!t.success)return t;const n=(0,i.contentBytes)(t.value);if(!n.success)return n;return(0,r.makeResult)({deviceIdentityElementValue:n.value})};var r=n(22207),i=n(26679)},2635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USERJID_USERJID=t.DEVICEJID_DOMAINJID=t.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=t.DEVICEJID_DEVICEJID=void 0;var r=n(44037);const i={validators:[r.validateDeviceJid,r.validateDeviceJid],typeName:"DeviceJid|DeviceJid"};t.DEVICEJID_DEVICEJID=i;const o={validators:[r.validateDeviceJid,r.validateDeviceJid,r.validateInteropDeviceJid,r.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"};t.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=o;const a={validators:[r.validateDeviceJid,r.validateDomainJid],typeName:"DeviceJid|DomainJid"};t.DEVICEJID_DOMAINJID=a;const s={validators:[r.validateUserJid,r.validateUserJid],typeName:"UserJid|UserJid"};t.USERJID_USERJID=s},26656:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchKeyBundlesResponseRequestError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,s.parseRequestErrorsFetch)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorRequestErrorsFetch:c.value}))};var i=r(n(73982)),o=n(22207),a=n(5778),s=n(27681),l=n(26679)},19802:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchKeyBundlesResponseServerError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorResponseMixin)(e,t);if(!u.success)return u;const c=(0,s.parseServerErrors)(r.value);if(!c.success)return c;return(0,o.makeResult)((0,i.default)((0,i.default)({},u.value),{},{errorServerErrors:c.value}))};var i=r(n(73982)),o=n(22207),a=n(5778),s=n(58260),l=n(26679)},70042:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchKeyBundlesResponseSuccess=function(e,t){const n=(0,c.assertTag)(e,"iq");if(!n.success)return n;const r=(0,c.flattenedChildWithTag)(e,"list");if(!r.success)return r;const a=(0,s.parseIQResultResponseMixin)(e,t);if(!a.success)return a;const l=(0,c.mapChildrenWithTag)(r.value,"user",0,1e5,d);if(!l.success)return l;return(0,o.makeResult)((0,i.default)((0,i.default)({},a.value),{},{listUser:l.value}))},t.parseFetchKeyBundlesResponseSuccessListUser=d;var i=r(n(73982)),o=n(22207),a=n(2635),s=n(3599),l=n(1387),u=n(25162),c=n(26679);function d(e){const t=(0,c.assertTag)(e,"user");if(!t.success)return t;const n=(0,u.attrJidEnum)(e,"jid",a.DEVICEJID_DEVICEJID);if(!n.success)return n;const r=(0,l.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup)(e);return r.success?(0,o.makeResult)({jid:n.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:r.value}):r}},4567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchKeyBundlesUserErrorFallbackMixin=function(e){const t=(0,i.assertTag)(e,"user");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"error");if(!n.success)return n;const o=(0,i.attrString)(n.value,"text");if(!o.success)return o;const a=(0,i.attrIntRange)(n.value,"code",500,599);if(!a.success)return a;return(0,r.makeResult)({errorText:o.value,errorCode:a.value})};var r=n(22207),i=n(26679)},79950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchKeyBundlesUserErrorMixin=function(e){const t=(0,i.assertTag)(e,"user");if(!t.success)return t;const n=(0,i.flattenedChildWithTag)(e,"error");if(!n.success)return n;const o=(0,i.attrString)(n.value,"text");if(!o.success)return o;const a=(0,i.literal)(i.attrInt,n.value,"code",500);if(!a.success)return a;return(0,r.makeResult)({errorText:o.value,errorCode:a.value})};var r=n(22207),i=n(26679)},17257:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseFetchKeyBundlesUserSuccessMixin=function(e){const t=(0,p.assertTag)(e,"user");if(!t.success)return t;const n=(0,p.optional)(p.attrIntRange,e,"t",0,void 0);if(!n.success)return n;const r=(0,p.optionalLiteral)(p.attrString,e,"is_cloud_api","true");if(!r.success)return r;const f=(0,c.parseRegistrationIDMixin)(e);if(!f.success)return f;const _=(0,l.parseKeyTypeMixin)(e),g=(0,s.parseIdentityKeyMixin)(e);if(!g.success)return g;const h=(0,u.parsePreKeyMixin)(e),A=(0,d.parseSignedPreKeyMixin)(e);if(!A.success)return A;const m=(0,a.parseDeviceIdentityMixin)(e);return(0,o.makeResult)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({t:n.value,isCloudApi:r.value},f.value),{},{keyTypeMixin:_.success?_.value:null},g.value),{},{preKeyMixin:h.success?h.value:null},A.value),{},{deviceIdentityMixin:m.success?m.value:null}))};var i=r(n(73982)),o=n(22207),a=n(82688),s=n(40321),l=n(71113),u=n(61183),c=n(18022),d=n(77835),p=n(26679)},59321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","bad-request");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",400);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},26638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorFallbackClientMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.attrString)(e,"text");if(!n.success)return n;const o=(0,i.attrIntRange)(e,"code",400,499);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},17071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorFallbackServerMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.attrString)(e,"text");if(!n.success)return n;const o=(0,i.attrIntRange)(e,"code",500,599);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},80752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorNoValidJIDMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","not-acceptable");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",406);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},5778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","error");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},90297:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorServiceUnavailableMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","service-unavailable");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",503);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},3599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQResultResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","result");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},40321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIdentityKeyMixin=function(e){const t=(0,i.flattenedChildWithTag)(e,"identity");if(!t.success)return t;const n=(0,r.parseKeyDataMixin)(t.value);if(!n.success)return n;return n};var r=n(49362),i=n(26679)},49362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyDataMixin=function(e){const t=(0,i.contentBytesRange)(e,32,32);if(!t.success)return t;return(0,r.makeResult)({elementValue:t.value})};var r=n(22207),i=n(26679)},32440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyIDMixin=function(e){const t=(0,i.assertTag)(e,"id");if(!t.success)return t;const n=(0,i.contentBytesRange)(e,3,3);if(!n.success)return n;return(0,r.makeResult)({elementValue:n.value})};var r=n(22207),i=n(26679)},71113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyTypeMixin=function(e){const t=(0,i.flattenedChildWithTag)(e,"type");if(!t.success)return t;const n=(0,i.contentLiteralBytes)(t.value,new Uint8Array([5]));if(!n.success)return n;return(0,r.makeResult)({typeElementValue:n.value})};var r=n(22207),i=n(26679)},61183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePreKeyMixin=function(e){const t=(0,a.flattenedChildWithTag)(e,"key");if(!t.success)return t;const n=(0,a.flattenedChildWithTag)(t.value,"id");if(!n.success)return n;const s=(0,a.flattenedChildWithTag)(t.value,"value");if(!s.success)return s;const l=(0,o.parseKeyIDMixin)(n.value);if(!l.success)return l;const u=(0,i.parseKeyDataMixin)(s.value);if(!u.success)return u;return(0,r.makeResult)({keyIdKeyIDMixin:l.value,keyValueKeyDataMixin:u.value})};var r=n(22207),i=n(49362),o=n(32440),a=n(26679)},18022:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRegistrationIDMixin=function(e){const t=(0,i.flattenedChildWithTag)(e,"registration");if(!t.success)return t;const n=(0,i.contentBytesRange)(t.value,4,4);if(!n.success)return n;return(0,r.makeResult)({registrationElementValue:n.value})};var r=n(22207),i=n(26679)},27681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRequestErrorsFetch=function(e){const t=(0,i.parseIQErrorBadRequestMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorBadRequest",value:t.value});const n=(0,a.parseIQErrorNoValidJIDMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorNoValidJID",value:n.value});const l=(0,o.parseIQErrorFallbackClientMixin)(e);if(l.success)return(0,r.makeResult)({name:"IQErrorFallbackClient",value:l.value});return(0,s.errorMixinDisjunction)(e,["IQErrorBadRequest","IQErrorNoValidJID","IQErrorFallbackClient"],[t,n,l])};var r=n(22207),i=n(59321),o=n(26638),a=n(80752),s=n(26679)},58260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseServerErrors=function(e){const t=(0,o.parseIQErrorServiceUnavailableMixin)(e);if(t.success)return(0,r.makeResult)({name:"IQErrorServiceUnavailable",value:t.value});const n=(0,i.parseIQErrorFallbackServerMixin)(e);if(n.success)return(0,r.makeResult)({name:"IQErrorFallbackServer",value:n.value});return(0,a.errorMixinDisjunction)(e,["IQErrorServiceUnavailable","IQErrorFallbackServer"],[t,n])};var r=n(22207),i=n(17071),o=n(90297),a=n(26679)},77835:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSignedPreKeyMixin=function(e){const t=(0,a.flattenedChildWithTag)(e,"skey");if(!t.success)return t;const n=(0,a.flattenedChildWithTag)(t.value,"id");if(!n.success)return n;const s=(0,a.flattenedChildWithTag)(t.value,"value");if(!s.success)return s;const l=(0,a.flattenedChildWithTag)(t.value,"signature");if(!l.success)return l;const u=(0,a.contentBytesRange)(l.value,64,64);if(!u.success)return u;const c=(0,o.parseKeyIDMixin)(n.value);if(!c.success)return c;const d=(0,i.parseKeyDataMixin)(s.value);if(!d.success)return d;return(0,r.makeResult)({skeySignatureElementValue:u.value,skeyIdKeyIDMixin:c.value,skeyValueKeyDataMixin:d.value})};var r=n(22207),i=n(49362),o=n(32440),a=n(26679)},1387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=function(e){const t=(0,a.parseFetchKeyBundlesUserSuccessMixin)(e);if(t.success)return(0,r.makeResult)({name:"FetchKeyBundlesUserSuccess",value:t.value});const n=(0,o.parseFetchKeyBundlesUserErrorMixin)(e);if(n.success)return(0,r.makeResult)({name:"FetchKeyBundlesUserError",value:n.value});const l=(0,i.parseFetchKeyBundlesUserErrorFallbackMixin)(e);if(l.success)return(0,r.makeResult)({name:"FetchKeyBundlesUserErrorFallback",value:l.value});return(0,s.errorMixinDisjunction)(e,["UserSuccess","UserError","UserErrorFallback"],[t,n,l])};var r=n(22207),i=n(4567),o=n(79950),a=n(17257),s=n(26679)},84562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClientRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),xmlns:"encrypt",to:o.S_WHATSAPP_NET});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},31614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeFetchKeyBundlesRequest=function(e){const{userArgs:t}=e;return(0,a.mergeClientRequestMixin)((0,o.smax)("iq",{type:"get"},(0,o.smax)("key",null,(0,i.REPEATED_CHILD)(l,t,1,1e5))))},t.makeFetchKeyBundlesRequestKeyUser=l;var r=n(73538),i=n(47396),o=n(73415),a=n(84562),s=n(42811);function l(e){const{userJid:t,hasUserReasonIdentity:n}=e;return(0,o.smax)("user",{jid:(0,s.JID)(t),reason:(0,r.OPTIONAL_LITERAL)("identity",n)})}},90945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQGetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"get"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},78427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetV2Request=function(e){const{propsHash:t}=e;return(0,i.mergeBaseIQGetRequestMixin)((0,r.smax)("iq",{to:o.S_WHATSAPP_NET,xmlns:"w"},(0,r.smax)("props",{protocol:"2",hash:(0,o.CUSTOM_STRING)(t)})))};var r=n(73415),i=n(90945),o=n(42811)},90400:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetDisclosuresRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(87141),s=n(98058),l=n(79421),u=n(48683),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeGetDisclosuresRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,s.parseGetDisclosuresResponseClientSuccess)(r,n);if(i.success)return{name:"GetDisclosuresResponseClientSuccess",value:i.value};const p=(0,a.parseGetDisclosuresResponseClientError)(r,n);if(p.success)return{name:"GetDisclosuresResponseClientError",value:p.value};const f=(0,l.parseGetDisclosuresResponseServerError)(r,n);if(f.success)return{name:"GetDisclosuresResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("GetDisclosures",{ClientSuccess:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},82725:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetRPC=function(){return p.apply(this,arguments)};var i=r(n(11504)),o=n(93042),a=n(45307),s=n(24180),l=n(80909),u=n(68942),c=n(75988),d=n(99407);function p(){return(p=(0,i.default)((function*(e,t){const n=(0,u.makeSetRequest)(e),r=yield(0,o.sendSmaxStanza)(n,t),i=(0,l.parseSetResponseSuccess)(r,n);if(i.success)return{name:"SetResponseSuccess",value:i.value};const p=(0,a.parseSetResponseClientError)(r,n);if(p.success)return{name:"SetResponseClientError",value:p.value};const f=(0,s.parseSetResponseServerError)(r,n);if(f.success)return{name:"SetResponseServerError",value:f.value};throw new c.SmaxParsingFailure((0,d.errorMessageRpcParsing)("Set",{Success:i,ClientError:p,ServerError:f}))}))).apply(this,arguments)}},87141:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetDisclosuresResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorBadRequestMixin)(r.value);if(!u.success)return u;const c=(0,s.parseIQErrorResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({errorIQErrorBadRequestMixin:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(53927),s=n(52516),l=n(26679)},98058:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetDisclosuresResponseClientSuccess=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,a.parseIQResultResponseMixin)(e,t);if(!r.success)return r;const s=(0,l.mapChildrenWithTag)(e,"notice",0,1/0,u);if(!s.success)return s;return(0,o.makeResult)((0,i.default)((0,i.default)({},r.value),{},{notice:s.value}))},t.parseGetDisclosuresResponseClientSuccessNotice=u;var i=r(n(73982)),o=n(22207),a=n(11470),s=n(64360),l=n(26679);function u(e){const t=(0,l.assertTag)(e,"notice");if(!t.success)return t;const n=(0,l.attrIntRange)(e,"t",0,void 0);if(!n.success)return n;const r=(0,l.attrIntRange)(e,"version",1,void 0);if(!r.success)return r;const a=(0,l.attrIntRange)(e,"type",0,void 0);if(!a.success)return a;const u=(0,s.parseStageMixin)(e);return u.success?(0,o.makeResult)((0,i.default)({t:n.value,version:r.value,type:a.value},u.value)):u}},79421:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseGetDisclosuresResponseServerError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorInternalServerErrorMixin)(r.value);if(!u.success)return u;const c=(0,s.parseIQErrorResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({errorIQErrorInternalServerErrorMixin:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(91637),s=n(52516),l=n(26679)},53927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorBadRequestMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","bad-request");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",400);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},91637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorInternalServerErrorMixin=function(e){const t=(0,i.assertTag)(e,"error");if(!t.success)return t;const n=(0,i.literal)(i.attrString,e,"text","internal-server-error");if(!n.success)return n;const o=(0,i.literal)(i.attrInt,e,"code",500);if(!o.success)return o;return(0,r.makeResult)({text:n.value,code:o.value})};var r=n(22207),i=n(26679)},52516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQErrorResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","error");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},11470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIQResultResponseMixin=function(e,t){const n=(0,o.assertTag)(e,"iq");if(!n.success)return n;const a=(0,i.attrStringFromReference)(t,["id"]);if(!a.success)return a;const s=(0,o.literal)(o.attrString,e,"id",a.value);if(!s.success)return s;const l=(0,i.attrStringFromReference)(t,["to"]);if(!l.success)return l;const u=(0,o.literal)(o.attrString,e,"from",l.value);if(!u.success)return u;const c=(0,o.literal)(o.attrString,e,"type","result");if(!c.success)return c;return(0,r.makeResult)({type:c.value})};var r=n(22207),i=n(19077),o=n(26679)},45307:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetResponseClientError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorBadRequestMixin)(r.value);if(!u.success)return u;const c=(0,s.parseIQErrorResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({errorIQErrorBadRequestMixin:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(53927),s=n(52516),l=n(26679)},24180:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetResponseServerError=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.flattenedChildWithTag)(e,"error");if(!r.success)return r;const u=(0,a.parseIQErrorInternalServerErrorMixin)(r.value);if(!u.success)return u;const c=(0,s.parseIQErrorResponseMixin)(e,t);if(!c.success)return c;return(0,o.makeResult)((0,i.default)({errorIQErrorInternalServerErrorMixin:u.value},c.value))};var i=r(n(73982)),o=n(22207),a=n(91637),s=n(52516),l=n(26679)},80909:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetResponseSuccess=function(e,t){const n=(0,l.assertTag)(e,"iq");if(!n.success)return n;const r=(0,l.optionalChildWithTag)(e,"notice",u);if(!r.success)return r;const s=(0,a.parseIQResultResponseMixin)(e,t);if(!s.success)return s;return(0,o.makeResult)((0,i.default)((0,i.default)({},s.value),{},{notice:r.value}))},t.parseSetResponseSuccessNotice=u;var i=r(n(73982)),o=n(22207),a=n(11470),s=n(64360),l=n(26679);function u(e){const t=(0,l.assertTag)(e,"notice");if(!t.success)return t;const n=(0,l.attrIntRange)(e,"t",0,void 0);if(!n.success)return n;const r=(0,s.parseStageMixin)(e);return r.success?(0,o.makeResult)((0,i.default)({t:n.value},r.value)):r}},64360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStageMixin=function(e){const t=(0,i.assertTag)(e,"notice");if(!t.success)return t;const n=(0,i.attrIntRange)(e,"id",0,void 0);if(!n.success)return n;const o=(0,i.attrIntRange)(e,"stage",0,1e3);if(!o.success)return o;return(0,r.makeResult)({id:n.value,stage:o.value})};var r=n(22207),i=n(26679)},66181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQGetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"get"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},83336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBaseIQSetRequestMixin=function(e){const t=(0,r.smax)("iq",{id:(0,o.generateId)(),type:"set"});return(0,i.mergeStanzas)(e,t)};var r=n(73415),i=n(62046),o=n(42811)},48683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetDisclosuresRequest=function(e){const{getUserDisclosuresT:t}=e;return(0,i.mergeBaseIQGetRequestMixin)((0,r.smax)("iq",{to:o.S_WHATSAPP_NET,xmlns:"tos"},(0,r.smax)("get_user_disclosures",{t:(0,o.INT)(t)})))};var r=n(73415),i=n(66181),o=n(42811)},68942:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSetRequest=function(e){const{stageMixinArgs:t}=e;return(0,i.mergeBaseIQSetRequestMixin)((0,r.smax)("iq",{to:a.S_WHATSAPP_NET,xmlns:"tos"},(0,o.mergeStageMixin)((0,r.smax)("notice",null),t)))};var r=n(73415),i=n(83336),o=n(17338),a=n(42811)},17338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStageMixin=function(e,t){const n=function(e){const{noticeId:t,noticeStage:n}=e;return(0,r.smax)("notice",{id:(0,o.INT)(t),stage:(0,o.INT)(n)})}(t);return(0,i.mergeStanzas)(e,n)};var r=n(73415),i=n(62046),o=n(42811)},25162:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attrBroadcastJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateBroadcastJid,"BroadcastJid")},t.attrCallJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateCallJid,"CallJid")},t.attrDeviceJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateDeviceJid,"DeviceJid")},t.attrDomainJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateDomainJid,"DomainJid")},t.attrGroupJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateGroupJid,"GroupJid")},t.attrJidEnum=function(e,t,n){const r=(0,o.attrString)(e,t);if(!r.success)return r;const{validators:a,typeName:s}=n;for(let e=0;e<a.length;e++){const t=a[e](r.value);if(null!=t)return(0,i.makeResult)(t)}return(0,o.errorMessage)(e,`to have "${t}"={${s}}, but instead has "${r.value}"`)},t.attrNewsletterJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateNewsletterJid,"NewsletterJid")},t.attrStatusJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateStatusJid,"StatusJid")},t.attrUserJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateUserJid,"UserJid")},t.literalJid=function(e,t,n,r){const i=e(t,n);if(!i.success)return i;if(i.value===r)return i;return(0,o.errorMessage)(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)},t.optionalLiteralJid=function(e,t,n,r){const i=(0,o.optional)(e,t,n);if(!i.success)return i;if(null==i.value||i.value===r)return i;return(0,o.errorMessage)(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)};var r=n(44037),i=n(22207),o=n(26679)},19077:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.attrFromReference=s,t.attrStringFromReference=l,t.contentStringFromReference=function(e,t){const n=u(e,t);if(!n.success)return d(n);const r=(0,a.contentString)(n.value);if(!r.success)return d(r);return r},t.optionalAttrFromReference=function(e,t,n,r,i){return c(t,n)?s(e,t,n,r,i):a.voidSuccess},t.optionalAttrStringFromReference=function(e,t){return c(e,t)?l(e,t):a.voidSuccess};var i=r(n(9028)),o=n(22207),a=n(26679);function s(e,t,n,r,i){const o=u(t,n);if(!o.success)return d(o);const a=e(o.value,n[n.length-1],r,i);return a.success?a:d(a)}function l(e,t){return s(a.attrString,e,t)}function u(e,t){const n=t.length;let r=e;for(let e=0;e<n-1;e++){const n=t[e],i=(0,a.flattenedChildWithTag)(r,n);if(!i.success)return i;r=i.value}return(0,o.makeResult)(r)}function c(e,t){const n=u(e,t);return n.success&&(0,i.default)(n.value.attrs,t[t.length-1])}function d(e){return(0,o.makeError)(`in the reference, ${e.error}`)}},26679:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.assertAttr=function(e,t,n){const r=f(e,t);if(!r.success)return r;if(r.value!==n)return b(e,`to have "${t}"="${n}", but instead has "${r.value}"`);return p},t.assertTag=function(e,t){if(e.tag!==t)return b(e,`to be <${t}>`);return p},t.attrInt=h,t.attrIntRange=function(e,t,n,r){const i=h(e,t);if(!i.success)return i;const o=i.value;if(void 0!==n&&o<n)return b(e,`to have "${t}"={at least ${n}} but has value ${o}`);if(void 0!==r&&o>r)return b(e,`to have "${t}"={at most ${r}} but has value ${o}`);return(0,u.makeResult)(o)},t.attrStanzaId=function(e,t){return _(e,t,c.toStanzaId,"stanzaID")},t.attrString=f,t.attrStringEnum=function(e,t,n){const r=f(e,t);if(!r.success)return r;const i=n[r.value];if(null!=i)return(0,u.makeResult)(i);const o=Object.values(n).join("|");return b(e,`to have "${t}"={${o}}, but instead has "${r.value}"`)},t.attrValidate=_,t.childWithTag=function(e,t,n){const r=E(e,t,n);if(!r.success)return r;const i=r.value;if(null==i)return b(e,`to have 1 child <${t}>, but found 0`);return(0,u.makeResult)(i)},t.contentBytes=T,t.contentBytesRange=function(e,t,n){const{content:r}=e;if(null==r)return void 0===t||t<1?(0,u.makeResult)(new Uint8Array([])):b(e,"to have content");if(Array.isArray(r))return b(e,"to have content, but has children instead");{const i=r.length;return void 0!==t&&i<t?b(e,`to have binary content at least ${t} bytes but has ${i} bytes`):void 0!==n&&i>n?b(e,`to have binary content at most ${n} bytes but has ${i} bytes`):(0,u.makeResult)(r)}},t.contentInt=function(e){return g(e,P,"integer")},t.contentLiteralBytes=function(e,t){const n=T(e);if(!n.success)return n;if((0,a.uint8ArraysEqual)(n.value,t))return(0,u.makeResult)(t);return b(e,`to have content ":binary:${(0,i.encodeB64)(t)}", but instead has ":binary:${(0,i.encodeB64)(n.value)}"`)},t.contentString=I,t.contentStringEnum=function(e,t){const n=I(e);if(!n.success)return n;const r=t[n.value];if(null!=r)return(0,u.makeResult)(r);const i=Object.values(t).join("|");return b(e,`to have content "${i}", but instead has "${n.value}"`)},t.contentValidate=g,t.countChildrenWithTag=function(e,t,n,r,i){const o=C(e,t,n,r);if(!o.success)return o;const a=o.value.length;for(let e=0;e<a;e++){const t=i(o.value[e]);if(!t.success)return t}return(0,u.makeResult)(a)},t.countHomogeneousChildrenWithTag=function(e,t,n){const r=S(e,t,n);if(!r.success)return r;return(0,u.makeResult)(r.value.length)},t.emptyObject=void 0,t.errorMessage=b,t.errorMixinDisjunction=function(e,t,n){const r=t.map(((e,t)=>`${e}: ${n[t].error}`));return b(e,[`to match any of following mixins: ${t.join(", ")}, but all mixins failed.`,...r].join(" "))},t.flattenedChildWithTag=function(e,t){const n=m(e,t);if(!n.success)return n;if(null==n.value)return b(e,`to have 1 child <${t}>, but found 0`);return(0,u.makeResult)(n.value)},t.identity=function(e){return e},t.literal=function(e,t,n,r){const i=e(t,n);if(!i.success)return i;if(i.value===r)return(0,u.makeResult)(r);return b(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)},t.literalContent=function(e,t,n){const r=e(t);if(!r.success)return r;if(r.value===n)return(0,u.makeResult)(n);return b(t,`to have content "${n}", but instead has "${r.value}"`)},t.mapChildrenWithTag=y,t.mapHomogeneousChildrenWithTag=S,t.maybeChildren=A,t.optional=v,t.optionalChild=m,t.optionalChildWithTag=E,t.optionalLiteral=function(e,t,n,r){if(null==r)return p;const i=v(e,t,n);if(!i.success)return i;if(i.value===r)return(0,u.makeResult)(r);if(null==i.value)return p;return b(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)},t.voidSuccess=void 0;var i=n(62089),o=n(89323),a=n(44379),s=n(52924),l=r(n(9028)),u=n(22207),c=n(87115),d=n(40471);const p=(0,u.makeResult)();function f(e,t){return M(e,t)?function(e,t){if(t instanceof d.WapJid)return(0,u.makeResult)(t.toString());if("string"==typeof t)return(0,u.makeResult)(t);return b(e,`decodeAsString: attribute is ${typeof t} not a string: ${String(t)}`)}(e,e.attrs[t]):b(e,`to have attribute "${t}"`)}function _(e,t,n,r){const i=f(e,t);if(!i.success)return i;const o=n(i.value);return null!=o?(0,u.makeResult)(o):b(e,`to have "${t}"={${r}}, but instead has "${i.value}"`)}function g(e,t,n){const r=I(e);if(!r.success)return r;const i=t(r.value);return null!=i?(0,u.makeResult)(i):b(e,`to have ${n} content, but instead has "${r.value}"`)}function h(e,t){return _(e,t,P,"integer")}function A(e){const t=e.content;return t instanceof Uint8Array?b(e,"to have children"):(0,u.makeResult)(t)}function m(e,t){const n=A(e);if(!n.success)return n;const r=n.value;if(null==r)return p;let i=null;for(let n=0;n<r.length;n++){const o=r[n];if(o.tag===t){if(null!=i)return b(e,`to have 1 child <${t}>, but found more than 1`);i=o}}return(0,u.makeResult)(i)}function E(e,t,n){const r=m(e,t);return r.success?null==r.value?p:n(r.value):r}function y(e,t,n,r,i){const o=C(e,t,n,r);if(!o.success)return o;const a=[];for(let e=0;e<o.value.length;e++){const t=i(o.value[e]);if(!t.success)return t;a.push(t.value)}return(0,u.makeResult)(a)}function S(e,t,n){const r=y(e,t,0,1/0,n);if(!r.success)return r;for(let t=0;t<r.value.length;t++)if(!(0,s.deepEqual)(r.value[0],r.value[t]))return b(e,"to have homogeneous children, but found two children that are not equal");return r}function v(e,t,n,r,i){return M(t,n)?e(t,n,r,i):p}function I(e){const t=T(e);if(!t.success)return t;try{const e=new o.Binary(t.value),n=e.readString(e.size());return(0,u.makeResult)(n)}catch(t){return b(e,`to have string content, but run into decoding error: ${t.message}`)}}function T(e){const{content:t}=e;return null==t?b(e,"to have content"):Array.isArray(t)?b(e,"to have content, but has children instead"):(0,u.makeResult)(t)}function b(e,t){return(0,u.makeError)(`expected <${e.tag}>: ${t}`)}function M(e,t){return(0,l.default)(e.attrs,t)}function P(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}function C(e,t,n,r){const i=A(e);if(!i.success)return i;const o=i.value;if(null==o)return 0!==n?b(e,`to have at least ${n} <${t}> children, but found 0`):(0,u.makeResult)([]);const a=[];for(let e=0;e<o.length;e++){const n=o[e];n.tag===t&&a.push(n)}const s=a.length;return s<n?b(e,`to have at least ${n} <${t}> children, but found ${s}`):s>r?b(e,`to have at most ${r} <${t}> children, but found ${s}`):(0,u.makeResult)(a)}t.voidSuccess=p;t.emptyObject={}},73538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPTIONAL=function(e,t){return null==t?r.DROP_ATTR:e(t)},t.OPTIONAL_LITERAL=function(e,t){return t?e:r.DROP_ATTR};var r=n(42811)},47396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HAS_OPTIONAL_CHILD=function(e,t){if(null==t)return null;if(t)return e()},t.HOMOGENEOUS_CHILD=function(e,t){if(t)for(let e=1;e<t.length;e++)if(!(0,r.deepEqual)(t[e],t[0]))throw new Error("expected all homogeneous children to be equal, but they were not");return i(e,t,0,1/0)},t.HOMOGENEOUS_CHILD_COUNT=function(e,t){return o(e,t,0,1/0)},t.OPTIONAL_CHILD=function(e,t){return null==t?null:e(t)},t.REPEATED_CHILD=i,t.REPEATED_CHILD_COUNT=o;var r=n(52924);function i(e,t,n,r){if(null==t){if(n>0)throw new Error(`expected at least ${n} children, but none provided`);return[]}const i=t.length;if(i<n)throw new Error(`expected at least ${n} children, but found ${i}`);if(i>r)throw new Error(`expected at most ${r} children, but found ${i}`);return t.map((t=>e(t)))}function o(e,t,n,r){if(0===t){if(n>0)throw new Error(`expected at least ${n} children, but none provided`);return[]}if(t<n)throw new Error(`expected at least ${n} children, but found ${t}`);if(t>r)throw new Error(`expected at most ${r} children, but found ${t}`);const i=[];for(let n=0;n<t;n++)i.push(e());return i}},73415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.smax=void 0;const r=n(42811).wap;t.smax=r},62046:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStanzas=a,t.optionalMerge=function(e,t,n,r){if(null!=n)return e(t,n,r);return t};var r=n(54080),i=n(40471);const o="smax$any";function a(e,t){return function(e,t){const n=e.tag,r=t.tag;if(r===o)return;if(n!==r)throw new Error(`tag mismatch: ${n} != ${r}`)}(e,t),function(e,t){const n=e.attrs,r=t.attrs;Object.keys(r).forEach((e=>{const t=r[e],o=n[e];if(null!=t&&null!=o){if(function(e,t){if("string"==typeof e&&"string"==typeof t)return e===t;if(e instanceof i.WapJid&&t instanceof i.WapJid)return e.toString()===t.toString();return!1}(t,o))return;throw new Error(`conflict for key: ${e}`)}n[e]=t}))}(e,t),t.content instanceof Uint8Array?function(e,t){const n=e.content;if(n instanceof Uint8Array){if(!(0,r.uint8ArraysEqualUNSAFE)(n,t))throw new Error("elementValue mismatch: bytes dose not equal");return}if(null!=n)throw new Error("elementValue mismatch: destination has children");e.content=t}(e,t.content):null!=t.content&&function(e,t){const n=e.content;if(n instanceof Uint8Array)throw new Error("children mismatch: destination has element value");if(null==n||0===n.length)return void(e.content=t);if(!function(e,t){const n=s(t),r=s(e),i=Object.keys(n);for(let e=0;e<i.length;e++){const t=i[e],o=n[t],a=r[t];if(null!=o&&null!=a&&o!==a)return!1}return!0}(n,t))throw new Error("children mismatch: child counts are not compatible");const r=[],i=Array.from(n);t.forEach((e=>{const t=i.findIndex((t=>t.tag===e.tag));if(-1===t)r.push(e);else{const n=a(i.splice(t,1)[0],e);r.push(n)}})),i.forEach((e=>r.push(e))),e.content=r}(e,t.content),e}function s(e){return e.reduce(((e,t)=>{const n=t.tag,r=e[n];return e[n]=null==r?1:r+1,e}),{})}},75988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmaxParsingFailure=void 0;class n extends Error{constructor(e){super(`SmaxParsingFailure: ${e}`),this.name="SmaxParsingFailure",this.reason=e}toString(){return`SmaxParsingFailure: ${this.reason}`}}t.SmaxParsingFailure=n},99407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorMessageRpcParsing=function(e,t){const n=Object.keys(t).map((e=>`Tried ${"Request"===e?"<request>":`<response name="${e}">`}, but failed with ${t[e].error}.`)).join(" ");return`Failed to parse incoming stanza of <rpc name="${e}">. ${n}`}},73218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={1:'[334,-1,"($1) $2-$3"],10',20:'["Ah","[23]"],[334,"1[0125]|[89]00"],["Bg","1[35]|[4-6]|[89][2-9]"],[9,10]',211:"333,9",212:'["[5-7]BF","5(2[015-7]|3[0-4])|[67]",1],["[58]CE",["5(2[2-489]|3[5-9]|92)|892","5(2([2-48]|9[0-7])|3([5-79]|8[0-7])|924)|892"],1],["5DD",["5(29|38)","5(29|38)[89]"],1],["[5]BBBB","5(4[067]|5[03])"],["8[09];G","8(0|9[013-9])",1],9',213:'["[5-8]BBBB","[5-8]"],["9ACBB",9],9',216:"233,8",218:'[27,"[25-79]",1],9',220:"34,7",221:'[2322,"[379]"],[3222,8],9',222:'"[2-48]ABBB",8',223:'[2222,"[246-9]"],8',224:'[2222,3],[3222,"[67]"],[8,9]',225:"2222,8",226:'[2222,"[025-7]"],8',227:'[233,"08"],[2222,"[0289]"],8',228:'[2222,"[279]"],8',229:"2222,8",230:'[34,"[2-46]|8[013]"],[44,5],[7,8]',231:'[133,"[45]"],[233,2],[234,"[23578]"],[7,8,9]',232:"26,8",233:'[234,"[235]"],9',234:'["CCd","[7-9]"],["CDe","[78]"],["CEf","[78]"],10',235:"2222,8",236:"2222,8",237:'[2222,88],[12222,"[26]"],[8,9]',238:"322,7",239:"34,7",240:'[333,"[235]"],[36,"[89]"],9',241:"[2222,0],8",242:'[234,"[02]"],[144,8],9',243:'[234,1],[333,"[89]"],9',244:'[333,"[29]"],9',245:'[333,"44|9[567]"],[34,40],[7,9]',246:"[34,3],7",247:"5",248:'[133,"[246]"],7',249:'[234,"[19]"],9',250:'["2BCC",2],["[7-9]BCC","[7-9]"],9',251:'"[1-59]ACD",9',252:'[17,"24|[67]"],["BA{5,7}","15|28|6[1-35-9]|799|9[2-9]"],[333,"3[59]|4[89]|6[24-6]|79|8[08]|90"],[8,9]',253:"2222,8",254:'["BA{5,7}","[24-6]"],[36,7],["CCd","[89]"],9',255:'["[24]ACD","[24]"],["[67]BCC","[67]"],["[89]BBD","[89]"],9',256:'[45,[202,2024]],[36,"[27-9]|4(6[45]|[7-9])"],[27,"[34]"],9',257:"2222,8",258:'["[28]ACd","2|8[2-7]"],["80ACC",80],9',260:'["[29]AG","[29]"],["800;CC",8],9',261:'[2232,"[23]"],9',262:'"[268]BBBB",9',263:'["7ACd",7],["86BCC","86[24]"],["CCd","2(1[39]|2[0157]|6[14]|7[35]|84)|329"],["[235]ACd","[23]9|54"],["[25]CA{3,5}",["(25|54)8","258[23]|5483"]],["8CF",86],["80ACD",80],[9,10]',264:'["8ACD","8[1235]"],["6ACd",6],["870;CC",870],9',265:'["2BCC",2],[3222,"[1789]"],9',266:"44,8",267:'["7ACC",7],8',268:'[44,"[027]"],8',269:"322,7",27:'[333,860],[234,"[1-9]"],9',290:"[4,5]",291:"133,7",297:"34,7",298:"6,6",299:"222,6",30:'[244,"21|7"],[46,"2(2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])"],[334,"[2689]"],10',31:'["[1-578]ACD","1[035]|2[0346]|3[03568]|4[0356]|5[0358]|7|8[4578]"],["[1-5]BCC","1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],["6;H","6[0-57-9]"],["66;G",66],["[89]0AA{4,7}","80|9"],[9,11]',32:"[3222,4],9",33:'[3222,8],[12222,"[1-79]"],9',34:'["[89]00;CC","[89]00"],["[5-9]BBBB","[568]|[79][0-8]"],9',350:"[35,2],8",351:'["2ACD","2[12]"],["[2-46-9]BCC","2[3-9]|[346-9]"],9',352:'[2223,20],[333,6],["BBBBb","2([0367]|4[3-8])"],["BBBA{1,5}","[3-57]|8[13-9]|9(0[89]|[2-579])|(2|80)[2-9]"],9',353:'["AdD",1],["BCd","[2569]|4[1-69]|7[14]"],[333,70],[333,81],[234,"[78]"],[433,1],[2134,8],[244,4],9',354:'[34,"[4-9]"],["3BCC",3],[7,8,9]',355:'["6[6-9];CD",6],9',356:'[44,"[2357-9]"],8',357:"26,8",358:'["CA{3,7}","([1-3]00|[6-8]0)"],["116C",116],["BA{4,10}","[14]|2[09]|50|7[135]"],["AA{4,11}","[25689][1-8]|3"],[6,7,8,9,10,11]',359:'[333,999],["BCd","48|8[7-9]|9[08]"],9',36:'["BCd","[2-9]"],9',370:'[134,"52[0-79]"],[323,"[7-9]"],[26,"37|4([15]|6[1-8])"],[35,"[3-6]"],8',371:'[233,"[269]|8[01]"],8',372:'["[3-79]BD",["[369]|4[3-8]|5([0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5([02]|1([0-8]|95)|5[0-478]|6(4[0-4]|5[1-589]))|7[1-9]"]],["70;BD",70],["8000;CC",[800,8000]],["[458]Cd",["40|5|8(00|[1-5])","40|5|8(00[1-9]|[1-5])"]],[7,8]',373:'[233,"22|3"],["[25-7]BBC","2[13-9]|[5-7]"],["[89]BE","[89]"],8',374:'[26,"1|47"],[26,"4[1349]|[5-7]|9[1-9]"],[35,"[23]"],[323,"8|90"],8',375:'[2322,["17[0-3589]|2[4-9]|[34]","17([02358]|1[0-2]|9[0189])|2[4-9]|[34]"],"$1 $2-$3-$4"],[3222,["1(5[24]|6[235]|7[467])|2(1[246]|2[25]|3[26])","1(5[24]|6(2|3[04-9]|5[0346-9])|7([46]|7[37-9]))|2(1[246]|2[25]|3[26])"],"$1 $2-$3-$4"],[423,["1(5[169]|6[3-5]|7[179])|2(1[35]|2[34]|3[3-5])","1(5[169]|6(3[1-3]|4|5[125])|7(1[3-9]|7[0-24-6]|9[2-7]))|2(1[35]|2[34]|3[3-5])"],"$1 $2-$3"],["[89]BCD","8[01]|9"],["82ADD",82],["800;BA{2,4}",800],9',376:'[33,"[135-9]"],[44,1],[333,6],[6,9]',377:'[2222,"[39]"],[233,4],["6;BBBB",6],[332,8],[8,9]',378:'[2222,"[5-7]"],["0549;F",0,"($1) $2"],8',379:"10",380:'[333,["6[12][29]|(3[1-8]|4[136-8]|5[12457]|6[49])2|(56|65)[24]","6[12][29]|(35|4[1378]|5[12457]|6[49])2|(56|65)[24]|(3[1-46-8]|46)2[013-9]"]],[234,["4[45][0-5]|5(0|6[37])|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]","4[45][0-5]|5(0|6(3[14-7]|7))|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]"]],[45,"[3-6]"],["CCd","[89]"],9',381:'["[23]BA{4,9}","(2[389]|39)0"],["[1-3]AA{5,10}","1|2([0-24-7]|[389][1-9])|3([0-8]|9[1-9])"],["6AA{6,8}",6],["[89]BA{3,9}","[89]"],["7[26];A{4,9}","7[26]"],["7[08]AA{4,9}","7[08]"],[8,9,10]',382:'[233,"[2-57-9]|6[036-9]"],[8,9]',383:'[233,"[23][89]|4[3-79]"],[35,"[89]00"],333,8',385:'["1;DC",1],["[2-5]ACd","[2-5]"],["9ACd",9],["[67]ACd","[67]"],["80[01];Bc",8],["80[01];CC",8],[8,9]',386:'[1322,"[12]|3[24-8]|4[24-8]|5[2-8]|7[3-8]"],["[3-7]ACC","[37][01]|4[0139]|51|6"],["[89][09];A{3,6}","[89][09]"],["[58]BE","59|8[1-3]"],8',387:'[233,"6[1-356]|[7-9]"],[233,"[3-5]","$1 $2-$3"],[2223,6],[8,9]',389:'["2;CD",2],["[347]ACC","[347]"],["[58]BABB","[58]"],8',39:'["BdD","0[26]|55"],["0[26];DE","0[26]"],["0BdD","0[13-57-9][0159]"],["CA{3,6}",["0[13-57-9][0159]|8(03|4[17]|9[245])","0[13-57-9][0159]|8(03|4[17]|9(2|[45][0-4]))"]],["0CCD","0[13-57-9][2-46-8]"],["0CA{2,6}","0[13-57-9][2-46-8]"],["CCd",["[13]|8(00|4[08]|9[59])","[13]|8(00|4[08]|9(5[5-9]|9))"]],[344,3],[9,10]',40:'[234,"[23]1"],[333,"[23][3-7]|[7-9]"],9',41:'["[2-9]ACBB","[2-7]|[89]1"],["[89]BCC","8[047]|90"],[32322,860],9',420:'["[2-9]BCC","[2-8]|9[015-7]"],["96ACCC",96],["9ACCC","9[36]"],9',421:'["2;CCB",2,"$1/$2 $3 $4"],["[3-5]ACBB","[3-5]","$1/$2 $3 $4"],["[689]BCC","[689]"],9',423:'[322,"[237-9]"],[234,69],[333,6],7',43:'["1;A{3,12}",1],["5ADA{4,7}","5[079]"],["CA{3,10}","316|46|51|732|6(5[0-3579]|[6-9])|7([28]0)|[89]"],["DA{3,9}","2|3(1[1-578]|[3-8])|4[2378]|5[2-6]|6([12]|4[1-9]|5[468])|7(2[1-8]|35|4[1-8]|[5-79])"],[10,11,12,13]',44:'["Ee",["1(38|5[23]|69|76|94)","1((38|69)7|5(24|39)|768|946)","1(3873|5(242|39[4-6])|(697|768)[347]|9467)"]],["Df","1([2-69][02-9]|[78])"],[244,["[25]|7(0|6[024-9])","[25]|7(0|6([04-9]|2[356]))"]],[46,7],[334,"[1389]"],10',45:"2222,8",46:'["8;ccB",8],["[1-69]AcBB","1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90"],[3222,"1[2457]|2([247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6([124-689]|7[0-2])|9([125-8]|3[0-5]|4[0-3])"],["7ACBB",7],["9[034]ABBC","9[034]"],[32322,"25[245]|67[3-6]"],9',47:'["[489]BBC","[489]"],["[235-7]ABBB","[235-7]"],8',48:'[2322,"[14]|2[0-57-9]|3[2-4]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145]"],[333,"26|39|5[0137]|6[0469]|7[02389]|8[08]"],9',49:'["BA{3,13}","3[02]|40|[68]9"],["CA{3,12}",["2(0[1-389]|1[124]|2[18]|3[14])|3([35-9][15]|4[015])|906|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(0[1-389]|12[0-8])|3([35-9][15]|4[015])|906|2([13][14]|2[18])|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"]],["DA{2,11}",["[24-6]|3([3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(3(0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(2[135]|4[13578]|9[1346])|5(0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(2[1-7]|4[145]|6[1-5]|7[1-4])|8(21|3[1468]|6|7[1467]|8[136])|9(0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(47|60)[1356]|3(3[46]|46|5[49])[1246]|3[4579]3[1357]"]],[34,138],["EA{2,10}",3],["CA{5,11}",181],["CAA{4,10}","1(3|80)|9"],["Ch","1[67]"],["CA{7,12}",8],[56,[185,1850,18500]],[344,7],[47,"18[68]"],[56,"15[0568]"],[47,"15[1279]"],[38,18],["CBh","1(6[023]|7)"],[427,"15[279]"],[328,15],[7,8,9,10,11,12]',500:"5",501:'[34,"[2-8]",1],["0;800;DC",0,1],7',502:'[44,"[2-7]"],[434,1],8',503:'[44,"[267]"],[344,"[89]"],8',504:'[44,"[237-9]",1],8',505:"44,8",506:'[44,"[24-7]|8[3-9]"],[334,"[89]0",1],8',507:"[44,6,1],8",508:'"[45]ABB",6',509:"224,8",51:"[333,9],9",52:'[244,"33|5[56]|81"],[334,"[2-9]"],[1244,"1(33|5[56]|81)"],[1334,1],[10,11]',53:'["Ag",7],["BA{4,6}","[2-4]"],[17,5],8',54:'[424,["2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(2[24-9]|3[1-59]|47)","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5[56][46]|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(4[35][56]|58[45]|8([38]5|54|76))[4-6]","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|58|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|54(4|5[13-7]|6[89])|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(454|85[56])[46]|3(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2-$3"],[244,1,"$1 $2-$3"],[334,"[23]","$1 $2-$3"],[334,"[68]",1],[1424,["9(2[2-469]|3[3-578])","9(2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(2[24-9]|3[1-59]|47)","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5([56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4[35][56]|58[45]|8([38]5|54|76))[4-6]","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|5(4[46]|8)|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|5(4(4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2 $3-$4"],[1244,91,"$1 $2 $3-$4"],[1334,9,"$1 $2 $3-$4"],[10,11]',55:'[244,"[1-9][1-9]","$1 $2-$3"],[254,"([14689][1-9]|2[12478]|3[1-578]|5[1-5]|7[13-579])9","$1 $2-$3"],["[3589]00;cD","[3589]00"],[10,11]',56:'[144,"2[23]"],[234,"[357]|4[1-35]|6[13-57]"],["9;DD",9],["44;CD",44],["[68]00;Cd","60|8"],["600;CBC",60],["1230;CD",1],[54,219],9',57:'[17,["1(8[2-9]|9[0-3]|[2-7])|[24-8]","1(8[2-9]|9(09|[1-3])|[2-7])|[24-8]"]],[37,3],["1;CG",["1(80|9[04])","1(800|9(0[01]|4[78]))"]],[8,10]',58:"[37,-1,1],10",590:'["[56]90;BD",-1,"$1 $2-$3"],9',591:'[17,"[23]|4[46]"],[8,"[67]"],[324,8],8',592:"34,7",593:'[134,"[247]|[356][2-8]",1],[234,9],["1800;Cd",1],[8,9]',594:"3222,9",595:'["BCd","([26]1|3[289]|4[124678]|7[123]|8[1236])"],["CA{3,6}","[2-9]0"],[36,"9[1-9]"],[234,8700],[333,"[2-8][1-9]"],9',596:"3222,9",597:'[34,"[6-8]",1],7',598:'[233,9],[44,"[24]"],8',599:'[34,"[13-7]"],["9;CD",9],[7,8]',60:'["3;DD",3,"$1-$2 $3"],["[18]ACd","1[02-46-9][1-9]|8","$1-$2 $3"],["1;[36-8]00;BD","1[36-8]0",1],["11;DD",11,"$1-$2 $3"],["15[49];CD",15,"$1-$2 $3"],[9,10]',61:'["BCA{2,4}",16],[333,"14|[45]"],[144,"[2378]"],[433,"1(30|[89])"],9',62:'["BA{5,9}","2[124]|[36]1"],["CA{5,7}",800],["CA{5,8}","[2-79]"],["CdC","8[1-35-9]",1],["CA{6,8}",1],[334,804],[3133,80],["CDe",8,1],[2434,0],[9,10,11,12]',63:'["DA{4,6}",["3(23|39|46)|4(2[3-6]|[35]9|4[26]|76)|544|88[245]|(52|64|86)2","3(230|397|461)|4(2(35|[46]4|51)|396|4(22|63)|59[347]|76[15])|5(221|446)|642[23]|8(622|8([24]2|5[13]))"]],[334,"[89]"],[434,1],["DbCD",1],10',64:'[323,"[89]0"],[134,"24|[346]|7[2-57-9]|9[2-9]","$1-$2 $3"],["CCd","2(10|74)|[59]|80"],["BdD","2[028]"],["BCA{3,5}","2([169]|7[0-35-9])|7|86"],[8,9,10]',65:'["[3689]CD","[369]|8[1-9]"],["1[89]00;CD","1[89]"],["7000;DC",70],["800;CD",80],8',66:'["BCd","14|[3-9]"],[433,1],9',670:"[44,7],8",672:"[24,1],[15,3],[5,6]",673:'"[2-578]BD",7',674:"34,7",675:'[34,"[13-689]|27"],[44,"20|7"],[7,8]',676:'[34,"7[5-9]|8[47-9]"],[43,0],7',677:'[25,"[7-9]"],7',678:'[34,"[579]"],7',679:'[34,"[35-9]"],[434,0],7',680:"34,7",681:"222,6",682:"23,5",683:"4",685:'["8Bd",8],["7AE",7],[6,7]',686:"8",687:'[222,"[2-46-9]|5[0-4]","$1.$2.$3"],6',688:"[6,7]",689:'[2222,"4[09]|8[79]"],[222,44],[6,8]',690:"[4,5,6,7]",691:"34,7",692:"[34,-1,1],7",7:'[4222,["7(1[0-8]|2[1-9])","7(1([0-6]2|7|8[27])|2(1[23]|[2-9]2))","7(1([0-6]2|7|8[27])|2(13[03-69]|62[013-9]))|72[1-57-9]2"]],[5122,["7(1[0-68]|2[1-9])","7(1([06][3-6]|[18]|2[35]|[3-5][3-5])|2([13][3-5]|[24-689]|7[457]))","7(1(0([356]|4[023])|[18]|2(3[013-9]|5)|3[45]|43[013-79]|5(3[1-8]|4[1-7]|5)|6(3[0-35-9]|[4-6]))|2(1(3[178]|[45])|[24-689]|3[35]|7[457]))|7(14|23)4[0-8]|71(33|45)[1-79]"]],[334,7],[3322,"[3489]","$1 $2-$3-$4"],10',81:'[334,800,1],["DBd","0077",1],[424,"0088",1],["DCd","00(37|66)",1],["DDe","00(37|66)",1],["DEf","00(37|66)",1],["DFg","00(37|66)",1],[244,"[2579]0|80[1-9]",1],10',82:'["AdD",2,1],[234,"60|8",1],["BdD","[1346]|5[1-5]",1],[244,"[57]",1],[533,["003","0030"]],[254,5,1],["EdD",0],[5234,0],[9,10]',84:'[244,"2[48]"],[343,"2[0-35-79]"],["[89]ACBB","8(8|9[89])|9"],["1[2689]ACD","1([26]|8[68]|99)"],["[3578]ACD","[357]|8[1-5]"],["86[89];CC","86[89]"],["1[89]00;A{4,6}",["1[89]0","1[89]00"]],[9,10]',850:"[334,1],10",852:'[44,"[235-7]|[89](0[1-9]|[1-9])"],["800;CC",800],["900;BCC",900],["900;A{2,5}",900],8',853:'"[268]CD",8',855:'["BCd","[1-9]"],[433,1],[8,9]',856:"[2233,2],10",86:'["21;DA{4,6}",21],[344,"3(11|7[179])|4([15]1|3[1-35])|5(1|2[37]|3[12]|51|7[13-79]|9[15])|7(31|5[457]|6[09]|91)|8([57]1|98)"],[434,[807,8078]],[344,"1[3-578]"],["10800;CD",[108,1080,10800]],["Ch",950],11',880:'["CA{3,7}","3([67]|8[013-9])|4(6[168]|7|[89][18])|5(6[128]|9)|6(28|4[14]|5)|7[2-589]|8(0[014-9]|[12])|9[358]|(3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(44|66)[01346-9]",1],["DA{3,6}","[13-9]",1],10',886:'["AdD","[25][2-8]|[346]|7[1-9]|8[237-9]"],[234,"[258]"],[333,9],[244,7],9',90:'[334,"512|8[0589]|90"],[3322,["5([0-59]|61)","5([0-59]|616)","5([0-59]|6161)"]],[3322,"[24][1-8]|3[1-9]"],10',91:'[55,["600|7([02-8]|19|9[037-9])|8(0[015-9]|[1-9]|20)|9","600|7([078]|19[0-5]|2([02356-9]|[14][017-9]|9[389])|3([025-9]|1[07-9]|[34][017-9])|4([0-35689]|[47][017-9])|5([02346-9]|1[017-9]|5[017-9])|6([02-9]|1[0-257-9])|9([089]|31|7[02-9]))|8(0([01589]|6[67]|7[02-9])|1([0-57-9]|6[07-9])|2(0[078]|[14][07-9]|[235-9])|3([0357-9]|[126][07-9]|4[1-9])|[45]|6([02457-9]|[136][07-9])|7([078][07-9]|[1-69])|8([0-25-9]|3[07-9]|4[047-9])|9([02-9]|1[027-9]))|9","600|7(0|19[0-5]|2([0235679]|[14][017-9]|8([0-569]|[78][089])|9[389])|3([05-8]|1([089]|7[5-9])|2([5-8]|[0-49][089])|3[017-9]|4([07-9]|11)|9([01689]|[2345][089]|40|7[0189]))|4([056]|1([0135-9]|[23][089]|2[089]|4[089])|2(0[089]|[1-7][089]|[89])|3([0-8][089]|9)|4([089]|11|7[02-8])|7([089]|11|7[02-8])|8([0-24-7][089]|[389])|9([0-7][089]|[89]))|5([0346-9]|1[017-9]|2([03-9]|[12][089])|5[017-9])|6([0346-9]|1[0-257-9]|2([0-4].|[5-9][089])|5([0-367][089]|[4589]))|7(0([02-9]|1[089])|[1-9])|8([0-79]|8(0[0189]|11|8[013-9]|9))|9([089]|313|7([02-8]|9[07-9])))|8(0([01589]|6[67]|7([02-8]|9[05-9]))|1([02-57-9]|1([0-35-9]|4[0-46-9])|6([089]|7[02-8]))|2(0([08]|7[02])|[14]([089]|7[02-8])|[235-9])|3([0357-9]|1([089]|7[02-6])|2([09]|77|8[0-689])|4[1-9]|6([089]|7[02-7]))|[45]|6([02457-9]|1([089]|7[02-8])|3([089]|7[02358])|6([08]|7[02-8]|9[01]))|7(0[07-9]|[1-69]|7([089]|7[02-8])|8([089]|7[02-8]))|8([0-25-9]|3([089]|7[02-8])|4([0489]|7[02-68]))|9([02-9]|1([0289]|7[2-6])))|9"]],[244,"11|2[02]|33|4[04]|79[1-9]|80[2-46]"],[334,"1(2[0-249]|3[0-25]|4[145]|[569][14]|7[1257]|8[1346]|[68][1-9])|2(1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|[36][25]|22|4[28]|5[12]|[78]1|9[15])|6(12|[2345]1|57|6[13]|7[14]|80)|7(12|2[14]|3[134]|4[47]|5[15]|[67]1|88)|8(16|2[014]|3[126]|6[136]|7[078]|8[34]|91)"],[433,"1([23579]|[468][1-9])|[2-8]"],[2343,"008"],[334,140],[424,[160,1600]],["DA{2,4};D",[180,1800]],["DdD",[186,1860]],[4333,"18[06]"],10',92:'["Bh","(2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],["Cg",["2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(2[3-8]|98)|(2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"]],[55,58],[37,3],[2333,"2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],[3333,"[24-9]"],10',93:'["[2-7]ACD","[2-7]"],9',94:'[234,7],[333,"[1-689]"],9',95:'["ACd","[12]"],["BCd","[4-7]|8[1-35]"],["ACA{4,6}","9(2[0-4]|[35-9]|4[137-9])"],[144,2],[334,8],[1333,92],[154,9],[8,9,10]',960:'[34,"[3467]|9([1-9]|0[1-9])",1],[334,"[89]00"],7',961:'[133,"[13-69]|7([2-57]|62|8[0-7]|9[04-9])|8[02-9]"],[233,"[7-9]"],[7,8]',962:'["7;DD","7[457-9]"],["Cf","70|8[0158]|9"],9',963:'["BCd","[1-5]"],["9BCC",9],9',964:'["BCd","[2-6]"],[334,7],[9,10]',965:'["Dd","[169]|2([235]|4[1-35-9])|52"],[35,"[25]"],8',966:'[45,9],[234,1],[234,5],["CCd",81],[334,8],9',967:'["7BCC","7[0137]"],9',968:'["CA{4,6}","[58]"],[26,2],[44,"[79]"],8',970:'["5[69]ACC",5],["1[78]00;CC","1[78]"],9',971:'["CA{2,9}","60|8"],[315,"[479]"],[234,5],9',972:'[234,"[57]",1],[433,12,1],[46,159,1],[1333,"1[7-9]",1],["CbCD",15,"$1-$2 $3-$4"],9',973:"44,8",974:'["[3-7]CD","[3-7]"],8',975:'[2222,"1|77"],8',976:'["[12]ABD","[12]1"],["[12]2Af","[12]2[1-3]"],["[12]CE",["[12](27|[3-5])","[12](27|[3-5].)2"]],[44,"[57-9]"],["[12]De",["[12](27|[3-5])","[12](27|[3-5].)[4-9]"]],8',977:'["9BG","9(6[013]|7[245]|8)",1],10',98:'[244,"[1-8]"],["CCd",9],10',992:'[612,[331,3317]],[324,"[34]7|91[78]"],[414,3],[234,"[457-9]"],9',993:'[2222,12,"$1 $2-$3-$4"],[26,6],[3122,"13|[2-5]","$1 $2-$3-$4"],8',994:'[3222,9],[2322,["[12]|365","[12]|365","[12]|365([0-46-9]|5[0-35-9])"]],[2322,"[3-8]"],9',995:'[3222,"[348]"],[333,7],[3222,5],9',996:'[45,"3(1[346]|[24-79])"],[333,"[235-79]"],["CCAc",8],9',998:'[2322,"[679]"],[7,8,9]'}},9228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TLD=void 0;const n=new Set(["abb","abbott","abudhabi","ac","academy","accountants","ad","ads","adult","ae","aero","af","afl","africa","ag","agency","ai","aig","al","am","amsterdam","anz","ao","apartments","app","aq","ar","army","art","as","asia","at","au","auction","audi","audio","auto","autos","aw","aws","ax","axa","az","ba","baby","band","bank","bar","barclays","basketball","bb","bbva","bd","be","beauty","beer","berlin","best","bet","bf","bg","bh","bi","bible","bid","bike","bingo","bio","biz","bj","black","blog","blue","bm","bmw","bn","bnpparibas","bo","bond","bot","boutique","box","br","bradesco","broker","brussels","bs","bt","build","builders","business","buzz","bw","by","bz","bzh","ca","cab","cafe","cam","camera","camp","canon","capital","car","cards","care","career","careers","cars","casa","cash","casino","cat","cc","cd","center","ceo","cern","cf","cfd","cg","ch","chat","cheap","church","ci","city","ck","cl","claims","click","clinic","clothing","cloud","club","cm","cn","co","coach","codes","coffee","com","community","company","condos","consulting","contact","contractors","cool","coop","country","coupons","courses","cpa","cr","credit","cricket","crs","cu","cv","cw","cx","cy","cyou","cz","dance","date","dating","day","de","deals","delivery","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","dj","dk","dm","do","doctor","dog","domains","download","dvag","dz","earth","ec","eco","edu","education","ee","eg","email","energy","engineer","engineering","equipment","es","estate","et","eu","eus","events","exchange","expert","express","fail","faith","family","fan","fans","farm","fashion","fi","film","finance","financial","fish","fishing","fit","fitness","fj","flights","flowers","fm","fo","football","forex","forum","foundation","fr","frl","fun","fund","futbol","fyi","ga","gal","gallery","game","games","garden","gay","gd","gdn","ge","gent","gg","gh","gi","gift","gifts","gives","gl","glass","gle","global","gm","gmbh","gold","golf","goog","google","gop","gov","gp","gq","gr","graphics","gratis","green","group","gs","gt","guide","guru","gy","hair","hamburg","haus","health","healthcare","help","hk","hn","holdings","holiday","homes","horse","hospital","host","hosting","hot","house","how","hr","ht","hu","icu","id","ie","il","im","immo","in","inc","info","ink","institute","insure","int","international","investments","io","iq","ir","is","ist","istanbul","it","java","je","jewelry","jm","jo","jobs","jp","ke","kg","kh","ki","kim","kitchen","kiwi","kn","kp","kpmg","kpn","kr","krd","kred","kw","ky","kz","la","land","lat","law","lawyer","lb","lc","leclerc","legal","lgbt","li","lidl","life","limited","limo","link","live","lk","llc","loan","loans","lol","london","love","lr","ls","lt","ltd","ltda","lu","luxe","lv","ly","ma","madrid","makeup","management","market","marketing","markets","mba","mc","md","me","media","melbourne","men","menu","mg","miami","mil","mk","ml","mm","mn","mo","mobi","moda","moe","mom","monash","money","monster","mortgage","moscow","movie","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","name","navy","nc","ne","net","network","neustar","new","news","nf","ng","ngo","ni","nico","ninja","nl","no","np","nr","nrw","ntt","nu","nyc","nz","observer","om","one","ong","onl","online","ooo","org","ovh","pa","page","paris","partners","parts","party","pay","pe","pet","pf","pg","ph","pharmacy","photo","photography","photos","physio","pics","pictet","pictures","pink","pioneer","pizza","pk","pl","place","plus","pm","pn","poker","porn","post","pr","press","pro","productions","promo","properties","ps","pt","pub","pw","py","qa","quebec","quest","racing","radio","re","realtor","recipes","red","ren","rent","repair","report","rest","restaurant","review","reviews","rio","rip","ro","rocks","rodeo","rs","ru","run","rw","sa","sale","salon","sap","saxo","sb","sbi","sbs","sc","school","science","scot","sd","se","security","services","sex","sexy","sg","sh","sharp","shiksha","shoes","shop","shopping","show","si","site","sk","ski","skin","sky","sl","sm","sn","sncf","so","social","softbank","software","solar","solutions","sony","soy","space","sport","spot","sr","srl","st","statebank","storage","store","stream","studio","study","style","su","sucks","supply","support","surf","sv","swiss","sx","sy","sydney","systems","sz","taipei","tatar","tax","taxi","tc","td","team","tech","technology","tel","tf","tg","th","tickets","tienda","tips","tires","tj","tk","tl","tm","tn","to","today","tokyo","tools","top","tours","town","toyota","toys","tr","trade","trading","training","travel","tt","tube","tv","tw","tz","ua","ug","uk","university","uno","us","uy","uz","va","vc","ve","vegas","ventures","vet","vg","vi","video","vin","vip","vision","vn","vote","voto","vu","wales","wang","watch","webcam","weber","website","wedding","wf","wien","wiki","win","wine","work","works","world","ws","wtf","xin","xyz","yandex","ye","yoga","yokohama","youtube","yt","za","zip","zm","zone","zw","","","","","","","","","","","","","",""]);t.TLD=n},61835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildDBEntry=function(e,t,n,r,i){return{ftsRowId:e,id:t,chatId:n,timestamp:r,prefixes:i}},t.buildEntry=function(e,t,n,r){return{id:e,chatId:t,timestamp:n,prefixes:r}}},58117:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=function(){return a().config},t.getDbImpls=function(){return a().db},t.getJidUtilsApi=function(){return a().jidUtils},t.getMyDeviceJid=function(){var e;const t=null===(e=a().myJids)||void 0===e?void 0:e.deviceJid;if(null==t)throw(0,i.default)("Trying to access myDeviceJid, but it's not set");return t},t.getMyUserJid=function(){var e;const t=null===(e=a().myJids)||void 0===e?void 0:e.userJid;if(null==t)throw(0,i.default)("Trying to access myUserJid, but it's not set");return t},t.getQplConfig=function(){return a().qpl},t.runInTransaction=function(e,t){return a().runInTransaction(e,t)},t.setGlobals=function(e){o=e},t.setMyJids=function(e){a().myJids=e};var i=r(n(82065));let o=null;function a(){if(null==o)throw(0,i.default)("Trying to access WAGlobals before being set");return o}},2560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=t.ABORT_ERROR=void 0,t.catchAbort=function(e){return t=>{if(t.name===o)return e(t);throw t}};var r=n(66911);class i extends((0,r.customError)("AbortError")){}t.AbortError=i;const o="AbortError";t.ABORT_ERROR=o},90387:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.asyncSleep=a,t.asyncSleepAfterGivenLoopIteration=function(){return o.apply(this,arguments)};var i=r(n(11504));function o(){return(o=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;e>0&&e%t==0&&(yield a(n))}))).apply(this,arguments)}function a(e){return new Promise((t=>setTimeout(t,e)))}},41650:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.backoff=function(e,t){const{signal:n,timeoutIterator:r,timeoutIncludesTaskDuration:l}=(0,i.default)((0,i.default)({},s),e);return(0,a.default)((e=>{let{retry:n,failCount:i}=e;return new Promise(((e,a)=>{const s=Date.now();try{t((function(e){return Promise.reject(new o.default(e))}),i).then(e).catch(u)}catch(e){return void u(e)}function u(e){if(!(e instanceof o.default))return void a(e);const t=r.next();if(t.done)return void a(e.source);const i=Date.now()-s,u=l?Math.max(t.value-i,0):t.value;n(u)}}))}),n)},t.defaults=void 0;var i=r(n(73982)),o=r(n(30892)),a=r(n(45618));const s=Object.freeze({timeoutIncludesTaskDuration:!0});t.defaults=s},66210:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.batch=function(e,t){const n=a(e,t);return e=>n.accept(e)},t.createBatcher=function(e){let t=[],n=new o.Resolvable;return{accept:e=>(t.push(e),n.promise.then((t=>{const n=t.get(e);if(null==n)throw(0,i.default)("This should not happen because we just added it to the batch");return n}))),runActiveBatch:r=>{if(0===t.length)return Promise.resolve(new Map);const i=t,a=n;return t=[],n=new o.Resolvable,Promise.resolve(e(i,r)).then((e=>(a.resolve(e),e)))}}},t.createSimpleBatcher=a;var i=r(n(82065)),o=n(31630);function a(e,t){let{delayMs:n,maxSize:r}=e,o=null;function a(e){return o&&o.args===e&&(o=null),t(e)}const s=()=>{if(null==o)return Promise.resolve();const e=o;return o=null,clearTimeout(e.timer),e.run(),e.batchPromise};return{accept:e=>{if(o)o.args.push(e);else{let t;const r=[e],i=new Promise((e=>{t=()=>{e(r)}})).then(a);o={args:r,batchPromise:i,run:t,timer:setTimeout(t,n)}}if(null==o)throw(0,i.default)("activeBatch should not be null here");const{args:t,batchPromise:l}=o,u=t.length-1;return null!=r&&t.length>=r&&s(),l.then((e=>e[u]))},runActiveBatch:s}}},5865:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.exponentialBackoff=function(e,t){const n=(0,o.default)((0,o.default)({},u),e),{signal:r,timeoutIncludesTaskDuration:c}=n,d=(0,i.default)(n,l),p=(0,s.exponentialBackoffIterator)(d);return(0,a.backoff)({signal:r,timeoutIterator:p,timeoutIncludesTaskDuration:c},t)};var i=r(n(66775)),o=r(n(73982)),a=n(41650),s=n(76941);const l=["signal","timeoutIncludesTaskDuration"],u=(0,o.default)((0,o.default)({},s.defaults),a.defaults)},81408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filteredCatch=function(e,t){return n=>{if(Array.isArray(e)?e.some((e=>n instanceof e)):n instanceof e)return t(n);throw n}}},91009:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=new Map;return function(i){if(i.signal.aborted)return Promise.reject(new a.AbortError);const u=e.call(this,i);let c=n.get(u);if(null==c||c.aggregator.signal.aborted){const e=new l.default,r=(0,o.default)((0,o.default)({},i),{},{signal:e.signal});c={aggregator:e,promise:t.call(this,r).finally((()=>{e.dispose(),n.delete(u)}))},n.set(u,c)}const d=i.signal||(new r).signal;return c.aggregator.add(d),(0,s.default)(c.promise,d)}};var o=i(n(73982)),a=n(2560),s=i(n(91054)),l=i(n(21642))},39959:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.createPromiseTimer=function(e){const t=o(e);return function(e){return new Promise((n=>{const r=t();r>0?setTimeout(n,r,e):n(e)}))}},t.createTimer=o,t.getDelay=function(e,t){if(0===e)return 0;const n=s(t.algo);for(let t=1;t<e;t++)n();return a(t,n())};var i=r(n(82065));function o(e){const{relativeDelay:t=!1}=e;let n=null;const r=s(e.algo);return function(){const i=n;if(null==i)return n=t?Date.now():0,0;let o=a(e,r());if(t){const e=Date.now(),t=e-i;t>0&&(o=Math.max(0,o-t)),n=e}return o}}function a(e,t){let{max:n,min:r,jitter:i=.1}=e,o=t;return null!=n&&o>n&&(o=n),null!=r&&o<r&&(o=r),0!==i&&(o=Math.ceil(o*(1+i*Math.random()))),o}function s(e){switch(e.type){case"fibonacci":return function(e){let t=e.second-e.first,n=e.first-t;return function(){const e=t+n;return n=t,t=e,e}}(e);case"exponential":return function(e){const{base:t=2}=e;let n=e.first;return function(){const e=n;return n*=t,e}}(e);case"constant":return function(e){const t=e.delay;return function(){return t}}(e);case"adjust":return function(e){const{toMs:t,backoff:n}=e,r=s(n);return function(){return t(r())}}(e);default:throw(0,i.default)(`makeTimeFunc unrecognized backoff ${e.type}`)}}},55068:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayMs=function(e,t){return new Promise(((n,i)=>{if(null==t?void 0:t.aborted)throw new r.AbortError;const o=setTimeout((function(){null==t||t.removeEventListener("abort",a),n()}),e);function a(){null==t||t.removeEventListener("abort",a),clearTimeout(o),i(new r.AbortError)}null==t||t.addEventListener("abort",a)}))},t.withTimeout=function(e,t,n){return new Promise(((r,i)=>{const o=setTimeout((()=>{try{r(n())}catch(e){i(e)}}),t);e.then((e=>{clearTimeout(o),r(e)}),(e=>{clearTimeout(o),i(e)}))}))};var r=n(2560)},91897:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.promiseEach=void 0;var i=r(n(11504));const o=function(){var e=(0,i.default)((function*(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(yield t(e[r]));return n}));return function(){return e.apply(this,arguments)}}();t.promiseEach=o},73471:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.promiseLoop=function(){return o.apply(this,arguments)};var i=r(n(11504));function o(){return(o=(0,i.default)((function*(e,t){let n,r=!1;const i=e=>{r=!0,n=e};let o=0,a=t;for(;!r;)a=yield e(i,a,o),o++;return n}))).apply(this,arguments)}},21212:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMap=function(e,t){return Promise.resolve(e).then((e=>Promise.all(e.map(((e,n)=>t(e,n))))))}},39528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseQueueMap=t.PromiseQueue=void 0;t.PromiseQueue=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._promise=Promise.resolve(),this._size=0,this._maxDelay=e}wait(){return this._promise}enqueueHandlers(e,t,r){this._size++;const i=this._promise.then((()=>e)).then(t,r),o=i.then();return this._promise=n(i,this._maxDelay).finally((()=>{this._size--})),o}enqueue(e){this._size++;const t=this._promise.then(e),r=t.then();return this._promise=n(t,this._maxDelay).finally((()=>{this._size--})),r}size(){return this._size}};function n(e,t){return t>=0?new Promise((n=>{const r=()=>{n()};e.then(r,r),setTimeout(r,t)})):e.then(r,r)}function r(){}t.PromiseQueueMap=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._map=new Map,this._maxDelay=e}waitIfPending(e){return this._map.get(e)}wait(e){return this._map.get(e)||Promise.resolve()}enqueueHandlers(e,t,n,r){const i=this.wait(e).then((()=>t)).then(n,r);return this._addToMap(e,i)}enqueue(e,t){const n=this.wait(e).then(t);return this._addToMap(e,n)}_addToMap(e,t){const r=t.then();let i;const o=()=>{this._map.get(e)===i&&this._map.delete(e)};return i=n(t,this._maxDelay).then(o,o),this._map.set(e,i),r}}},91054:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==t)return e;let n;const i=t.aborted?Promise.reject(new r.AbortError):new Promise(((e,i)=>{const o=()=>{i(new r.AbortError)};t.addEventListener("abort",o),n=()=>{t.removeEventListener("abort",o)}}));return Promise.race([i,e]).finally((()=>{var e;null===(e=n)||void 0===e||e(),n=null}))};var r=n(2560)},13350:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.promiseReduce=void 0;var i=r(n(11504));const o=function(){var e=(0,i.default)((function*(e,t,n){let r=n;const i=e.length;for(let n=0;n<i;n++)r=yield t(r,e[n],n);return r}));return function(){return e.apply(this,arguments)}}();t.promiseReduce=o},82521:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseRetryLoop=void 0;var i=r(n(82065)),o=n(39959),a=n(55068),s=n(31630);t.PromiseRetryLoop=class{constructor(e){this._resolvable=new s.Resolvable,this._promise=null,this._resetTime=null,this._currentLoopIdentificator=0,this.endWithValue=e=>{this._currentLoopIdentificator++,this._resolvable.resolve(e)},this._options=e}resetTimeoutAfter(e){this._resetTime=Date.now()+e}cancelReset(){this._resetTime=null}reset(){this._resolvable.resolveWasCalled()||(__LOG__(2)`PromiseRetryLoop: resetting ${this._options.name}`,this._currentLoopIdentificator++,this._runLoop())}start(){this._resolvable.resolveWasCalled()||(__LOG__(2)`PromiseRetryLoop: starting ${this._options.name}`,0!==this._currentLoopIdentificator&&__LOG__(4,void 0,new Error)`PromiseRetryLoop was called several times. You may have race conditions`,this._currentLoopIdentificator++,this._runLoop())}_runLoop(){const e=this._options,t=this._currentLoopIdentificator;let n=(0,o.createTimer)(this._options.timer);n();const r=()=>{if(this._resolvable.resolveWasCalled())return;if(t!==this._currentLoopIdentificator)return;const i=Date.now();return this._promise=(0,e.code)(this.endWithValue).then((()=>{if(this._resolvable.resolveWasCalled())return;const{resetDelay:t}=e;(void 0!==t&&Date.now()>=i+t||null!=this._resetTime&&this._resetTime<=Date.now())&&(__LOG__(2)`PromiseRetryLoop: resetting ${e.name}`,n=(0,o.createTimer)(this._options.timer)),this._resetTime=null;const s=n();return __LOG__(2)`PromiseRetryLoop: retrying ${e.name} in ${s}ms`,(0,a.delayMs)(s).then(r)})),this._promise};this._promise=Promise.resolve().then(r)}promise(){return this._resolvable.resolveWasCalled()?this._resolvable.promise:this._promise?Promise.race([this._resolvable.promise,this._promise.then((()=>this._resolvable.promise))]):Promise.reject((0,i.default)(`PromiseRetryLoop ${this._options.name} had promise() called before start()`))}}},77689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseTimeout=void 0;var r=n(66911);t.promiseTimeout=(e,t,n)=>{let i=null;const o=new Promise(((e,o)=>{i=setTimeout((()=>{o(new r.TimeoutError(n)),clearTimeout(i)}),t)}));return Promise.race([e,o]).finally((()=>{clearTimeout(i)}))}},31630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resolvable=void 0;t.Resolvable=class{constructor(){this._resolve=()=>{},this._isResolved=!1,this.promise=new Promise((e=>{this._resolve=e}))}resolve(e){this._isResolved=!0,this._resolve(e)}reject(e){this.resolve(Promise.reject(e))}resolveWasCalled(){return this._isResolved}}},45618:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise(((n,r)=>{let a,s=0,l=!1;if(t){const e=()=>{t.removeEventListener("abort",e),l=!0,null!=a&&clearTimeout(a),r(new i.AbortError)};if(t.aborted)return void e();t.addEventListener("abort",e)}!function t(){let i=!1,u=!1;a=null;try{const c=e({retry:e=>{if(!l&&!u){if(i=!0,s++,null==e)return t();a=setTimeout(t,e)}},failCount:s});if(!(c instanceof Promise))throw(0,o.default)("TypeError: task must return a promise");c.then((e=>{l||i||(u=!0,n(e))})).catch((e=>{l||i||(u=!0,r(e))}))}catch(e){if(l||i)return;r(e)}}()}))};var i=n(2560),o=r(n(82065))},30892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(66911);class i extends((0,r.customError)("RetryableError")){constructor(e){super("see error at this.source"),this.source=e}}t.default=i},38918:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;var i=r(n(82065));t.Semaphore=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._count=0,this._queue=[],this._size=e}acquire(){return new Promise(((e,t)=>{this._performAcquisition(e,t)}))}availablePermits(){return this._size-this._count}_performRelease(){this._count--,this._dequeue()}_performAcquisition(e,t){if(this._count<this._size){this._count++;let t=!1;e({release:()=>{if(t)throw(0,i.default)("Permit has already been released");t=!0,this._performRelease()}})}else this._enqueue(e,t)}_enqueue(e,t){this._queue.push([e,t])}_dequeue(){if(0===this._queue.length)return;const[e,t]=this._queue.shift();this._performAcquisition(e,t)}}},21642:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(82065));t.default=class{constructor(){this._disposed=!1,this._controller=new r,this._signals=new Set,this.signal=this._controller.signal,this._handleAbort=e=>{this.delete(e.currentTarget),this._checkAborted()}}add(){this._throwIfDisposed();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const e of t)e.aborted||(e.addEventListener("abort",this._handleAbort),this._signals.add(e));this._checkAborted()}_checkAborted(){if(this._disposed)return;Array.from(this._signals).every((e=>e.aborted))&&(this.dispose(),this._controller.abort())}delete(){this._throwIfDisposed(),this._delete(...arguments)}_delete(){let e=!1;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const t of n)this._signals.delete(t)&&(e=!0,t.removeEventListener("abort",this._handleAbort));e&&this._checkAborted()}_throwIfDisposed(){if(this._disposed)throw(0,o.default)("Attempt to modify disposed SignalAggregator")}dispose(){if(!this._disposed){this._disposed=!0;for(const e of this._signals)this._delete(e)}}getSignals__INTERNAL(){return this._signals}}},74448:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.treasureHunt=function(e,t,n,o){let a=0,s=0,l=!1,u=null,c=null;function d(e){return l?(null==o||o(e),i):(l=!0,null!=u&&(clearTimeout(u),u=null),(0,r.makeResult)(e))}function p(){if(l)return i;if(s++,s===t)return Promise.resolve((0,r.makeError)("max-hunters"));const e=c;return null!=e&&s===a&&(null!=u&&(clearTimeout(u),u=null),e()),i}return function r(){const i=a++,o=e(i).then(d,p);if(a<t){const e=new Promise((e=>{u=setTimeout(e,n),c=e})).then(r);return Promise.race([o,e])}return o}()};var r=n(22207);const i=new Promise((()=>{}))},22473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLock=function(e){return{lock(t,n){const o=new r.Resolvable,a=t.map((e=>[e,new r.Resolvable]));return Promise.all(a.map((t=>{let[n,r]=t;return e.enqueue(n,(()=>(r.resolve(),o.promise)))}))).catch((()=>{(0,i.TAGS)(["WALock"]).ERROR`Lock failed for ${t}`})),Promise.all(a.map((e=>{let[t,n]=e;return n.promise}))).then((()=>n())).finally((()=>{o.resolve()}))},wait:t=>e.wait(t)}};var r=n(31630),i=n(8415)},22699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLockMap=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const t=new i.PromiseQueueMap(e);return(0,r.makeLock)(t)};var r=n(22473),i=n(39528)},75619:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.clearSyncdData=function(){return(0,o.runInTransaction)({SyncActionStore:!0,CollectionVersionStore:!0,PendingMutationStore:!0,MissingKeyStore:!0,SyncKeyStore:!0},(e=>{let{SyncActionStore:t,CollectionVersionStore:n,PendingMutationStore:r,MissingKeyStore:i,SyncKeyStore:o}=e;return Promise.all([t.clear(),n.clear(),r.clear(),i.clear(),o.clear()]).then((()=>{c.default.clean(),(0,f.clearSyncKeysCache)()}))}))},t.initializeStateMachine=function(){return c.default.loadStatesFromDb().then((()=>k()))},t.logKeysInfoInIntern=function(){return w.apply(this,arguments)},t.markCollectionsForSync=P,t.processOnAppResume=function(){return F.apply(this,arguments)},t.reportWam=function(){return N.apply(this,arguments)},t.syncBlockedCollections=function(){const e=c.default.getCollectionsInStateBlocked();return __LOG__(2)`syncd: sync blocked collections: ${e}`,c.default.moveCollectionsToDirty(e),I=new Set([...Array.from(I),...Array.from(v)]),__LOG__(2)`syncd: syncBlockedCollections:
\tmoving blocked collections to dirty: [${e}]
\tadding inflight collections to pending: [${Array.from(v)}]`,D()};var i=r(n(11504)),o=n(58117),a=n(47958),s=n(34027),l=n(75285),u=n(77485),c=(n(90485),r(n(39062))),d=n(71903),p=(n(49982),n(99205)),f=n(77758),_=n(70922),g=n(78761),h=n(92271),A=n(2625),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(80005));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}const y=36e5;let S,v=new Set,I=new Set,T=!1,b=0,M=0;function P(){return C.apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e,t){const n=null!=t?yield O(e,t):e;return __LOG__(2)`syncd: marking for sync: ${n}`,n.forEach((e=>{const t=c.default.getCollectionState(e);__LOG__(2)`syncd: ${e} state before sync: ${t}`,t===d.CollectionSyncState.UpToDate?c.default.moveCollectionsToDirty([e]):t===d.CollectionSyncState.Dirty&&(I=new Set([...Array.from(I),e]))})),yield c.default.persistToDb(),D()}))).apply(this,arguments)}function O(){return R.apply(this,arguments)}function R(){return(R=(0,i.default)((function*(e,t){__LOG__(2)`syncd: start filter collections: ${e}`;const n=yield(0,a.bulkGetCollectionVersionsInTransaction)(e),r=new Map(e.map(((e,t)=>{var r;return[e,null===(r=n[t])||void 0===r?void 0:r.version]})));return e.filter((e=>{const n=r.get(e);if(null==n)return __LOG__(2)`syncd: local version for ${e} missing; will mark for sync.`,!0;const i=t.get(e);return null==i?(__LOG__(2)`syncd: server version for ${e} missing; will mark for sync.`,!0):n<i?(__LOG__(2)`syncd: local version (${n}) for ${e} less than server version (${i}); will mark for sync.`,!0):(__LOG__(2)`syncd: local version (${n})for ${e} >= server version (${i}); will not mark for sync.`,!1)}))}))).apply(this,arguments)}function N(){return(N=(0,i.default)((function*(){const e=yield(0,u.countSyncActionsInTransaction)();m.setStoredMutationCount(e);const t=yield(0,u.getSyncActionsByActionStatesInTransaction)([d.SyncActionState.Malformed]);m.setInvalidActionCount(t.length);const n=yield(0,u.getSyncActionsByActionStatesInTransaction)([d.SyncActionState.Unsupported]);m.setUnsupportedActionCount(n.length);const r=yield(0,s.getMissingKeyCountTransaction)();m.setMissingKeyCount(r)}))).apply(this,arguments)}function w(){return(w=(0,i.default)((function*(){}))).apply(this,arguments)}function D(){return L.apply(this,arguments)}function L(){return(L=(0,i.default)((function*(){if((0,p.isSyncdDisabled)())return Promise.resolve();const e=c.default.getCollectionsInStateDirty();__LOG__(2)`syncd: dirty collections: ${e}`;const t=new Set(e.filter((e=>!v.has(e))));if(0===t.size)return __LOG__(2)`syncd: no collections to sync`,Promise.resolve();let n=[];try{v=new Set([...Array.from(v),...Array.from(t)]),__LOG__(2)`syncd: initiate server sync`,n=yield(0,A.serverSync)(Array.from(t)),__LOG__(2)`syncd: server sync successful`;const e=n.filter((e=>e.state===d.CollectionState.ErrorRetry));e.length>0&&(M=e[0].serverBackoff||0,b=0),G(n)}catch(e){__LOG__(2)`syncd: exception during sync(): ${e}`,c.default.moveCollectionsToFiniteRetry(Array.from(t))}finally{__LOG__(2)`syncd: cleanup after sync()`,c.default.persistToDb(),v=new Set(Array.from(v).filter((e=>!t.has(e)))),k(),yield(0,o.getDbImpls)().handleSyncCompleted(n)}}))).apply(this,arguments)}function B(){if((0,p.isSyncdDisabled)())return;const e=new Set(c.default.getCollectionsInStateRetry());var t,n;0!==e.size&&(S=setTimeout((0,i.default)((function*(){try{T=!0,b+=1,__LOG__(2)`syncd: initiate server sync retry`;const t=yield(0,A.serverSync)(Array.from(e));__LOG__(2)`syncd: server sync retry successful`,G(t)}catch(t){__LOG__(2)`syncd: exception during handleRetry(): ${t}`,c.default.moveCollectionsToFiniteRetry(Array.from(e))}finally{__LOG__(2)`syncd: cleanup after handleRetry()`,function(){const e=c.default.getExpiredCollections();e.length>0&&(c.default.moveCollectionsToFatal(e),__LOG__(4,void 0,new Error,!0)`syncd: fatal error: expired collections`,SEND_LOGS("syncd: fatal error: expired collections"),(0,g.reportSyncdFatalError)(g.SyncdFatalErrorType.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D))}(),c.default.persistToDb(),T=!1,k()}})),(t=b,n=M,Math.min(Math.max(2**t*1e3,n),y))))}function k(){__LOG__(2)`syncd: state machine tick`,c.default.getCollectionsInStateDirty().length>0&&(I=new Set(Array.from(I).filter((e=>v.has(e)))),D());const e=c.default.getCollectionsInStateRetry();if(e.length>0){if(T)return void __LOG__(2)`syncd: retry is in flight`;null!=S&&clearTimeout(S),I=new Set(Array.from(I).filter((t=>!e.includes(t)))),B()}c.default.getCollectionsInStateFatal().length>0&&(0,o.getDbImpls)().handleSyncdFatal({collections:c.default.getCollectionsInStateFatal()})}function G(e){return e.forEach((e=>e.state!==d.CollectionState.Success||I.has(e.name)?e.state===d.CollectionState.ErrorRetry?((0,_.reportSyncdCriticalBootstrapStage)(_.SyncdCriticalBootstrapStageType.ENTERED_RETRY_MODE),c.default.moveCollectionsToFiniteRetry([e.name])):e.state===d.CollectionState.ErrorFatal?c.default.moveCollectionsToFatal([e.name]):e.state!==d.CollectionState.Blocked||I.has(e.name)?void 0:c.default.moveCollectionsToBlocked([e.name]):c.default.moveCollectionsToUpToDate([e.name])))}function U(){return x.apply(this,arguments)}function x(){return(x=(0,i.default)((function*(){__LOG__(2)`syncd: syncPendingMutationsAndBlockedCollections`;const e=yield(0,l.getAllSyncPendingMutationsInTransaction)(),t=c.default.getCollectionsInStateBlocked();c.default.moveCollectionsToDirty(t);const n=e.map((e=>e.collection)).concat(t);n.length>0&&(__LOG__(2)`syncd: syncPendingMutationsAndBlockedCollections: [${n}]`,P(n))}))).apply(this,arguments)}function F(){return(F=(0,i.default)((function*(){yield(0,h.applyAllOrphansAndUnsupported)(),__LOG__(2)`syncd: syncing pending mutations and blocked collections due to app resume`,yield U()}))).apply(this,arguments)}},15644:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdPatchDirection=void 0,t.checkLtHash=B,t.computeLtHash=D,t.computeLtHashAndValidatePatch=function(){return b.apply(this,arguments)},t.computeLtHashAndValidateSnapshot=function(){return T.apply(this,arguments)},t.computeOutgoingSnapshotAndPatchMacs=function(){return w.apply(this,arguments)},t.logMacsInSnapshot=F,t.reportCollectionInconsistency=function(){return Y.apply(this,arguments)};var i=r(n(11504)),o=n(58117),a=n(17242),s=n(44379),l=n(47958),u=n(77485),c=n(91897),d=n(91866),p=n(71903),f=n(94678),_=n(49982),g=n(21061),h=n(77758),A=n(93189),m=n(78761),E=n(70982),y=n(75556);const S=n(54302).Mirrored(["Incoming","Outgoing"]);function v(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="string"==typeof e?e:(0,_.arrayBufferToHexPadded)(e),i="string"==typeof t?t:(0,_.arrayBufferToHexPadded)(t),o=n?-16:0;return`${r.slice(o)}:${i.slice(o)}`}t.SyncdPatchDirection=S;const I=(0,y.newTextDecoder)();function T(){return(T=(0,i.default)((function*(e,t){const{mac:n,version:r,keyId:i,records:o}=t,s=yield(0,h.getKeyData)(i.id);if(!s)throw new g.SyncdMissingKeyError;const l=new Map(o.map((e=>[(0,_.arrayBufferToHexPadded)(e.index.blob),(0,f.valueMacFromIndexAndValueCipherText)(e.value.blob)])));__LOG__(2)`syncd:
${e} snapshot macsToAdd:
    ${Array.from(l.entries()).map((e=>{let[t,n]=e;return v(t,n)})).join("\n\t")}`;const u=yield a.LT_HASH_ANTI_TAMPERING.add(a.EMPTY_LT_HASH,Array.from(l.values())),{snapshotMacKey:c}=yield(0,f.generateEncryptionKeys)(s),d=(0,_.to64BitNetworkOrder)(r.version),p=(0,_.toUtf8)(e).buffer;return __LOG__(2)`syncd: validating snapshot mac for ${e} snapshot v${r.version}:
ltHash: ${(0,_.arrayBufferToHexPadded)(u)}
encoded version: ${(0,_.arrayBufferToHexPadded)(d)}
encoded collection: ${(0,_.arrayBufferToHexPadded)(p)}
expected snapshotMAC: ${(0,_.arrayBufferToHexPadded)(n)}`,yield C(e,n,c,u,d,p,!0,o.length,t.version.version,null,null,null,null),u}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t,n){__LOG__(2)`syncd: computeLtHashAndValidatePatch for ${e}`;const{version:r,mutations:a,snapshotMac:s,patchMac:u,keyId:c}=t,p=c.id,m=yield(0,h.getKeyData)(p);if(!m)throw new g.SyncdMissingKeyError;const{snapshotMacKey:E,patchMacKey:y}=yield(0,f.generateEncryptionKeys)(m),I=a.map((e=>({operation:e.operation,indexMac:e.record.index.blob,valueMac:(0,f.valueMacFromIndexAndValueCipherText)(e.record.value.blob)}))),T=yield(0,o.runInTransaction)({SyncActionStore:!0},function(){var t=(0,i.default)((function*(t){let{SyncActionStore:n}=t;return yield n.getByCollections([e])}));return function(){return t.apply(this,arguments)}}()),b=(0,o.getConfig)().syncShouldCalculateLtHashFromScratch()&&T&&T.length<1e3;__LOG__(2)`syncd: shouldRecalculateLtHash: ${b}`;const M=b?yield G(T):yield(0,l.getCollectionVersionLtHashInTransaction)(e),P=yield D(e,I,n,t.version.version,S.Incoming,M),O=(0,_.to64BitNetworkOrder)(r.version),N=(0,_.toUtf8)(e).buffer;__LOG__(2)`syncd: validating snapshot and patch mac for ${e} v${r.version}:
expected snapshotMAC: ${(0,_.arrayBufferToHexPadded)(s)}
expected patchMAC: ${(0,_.arrayBufferToHexPadded)(u)}
encoded version: ${(0,_.arrayBufferToHexPadded)(O)}
encoded collection: ${(0,_.arrayBufferToHexPadded)(N)}
key ID: ${(0,_.arrayBufferToHexPadded)((0,A.fromSyncKeyId)(p))}`;try{yield R(e,u,y,s,I.map((e=>e.valueMac)),O,N,a.length,r.version),yield C(e,s,E,P.ltHash,O,N,!1,a.length,r.version,t.clientDebugData,M,P,t.deviceIndex)}catch(e){throw yield function(){return w.apply(this,arguments)}(),e}return P.ltHash;function w(){return(w=(0,i.default)((function*(){const t=yield F(e,!1),n=new Map(t.map((e=>{let{indexMac:t,valueMac:n}=e;return[(0,_.arrayBufferToHexPadded)(t),(0,_.arrayBufferToHexPadded)(n)]})));__LOG__(2)`syncd: error on incoming records:
\t${I.map((e=>{let{operation:t,indexMac:r,valueMac:i}=e;return`${t===d.SyncdMutation$SyncdOperation.SET?"set":"remove"} | ${v(r,i,!1)} | ${n.has((0,_.arrayBufferToHexPadded)(r))?"found":"did not find"} indexMAC in the above logged macs`})).join("\n\t")}`}))).apply(this,arguments)}}))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t){const n=yield(0,l.getCollectionVersionInTransaction)(e).then((e=>{var t;return null!==(t=null==e?void 0:e.version)&&void 0!==t?t:0}));if(n!==t-1){const r=n>t-1?"greater-than-expected":"less-than-expected";throw __LOG__(3,void 0,void 0,!0)`syncd: ${e} received patch v${t} !== latest local version (v${n}) + 1`,SEND_LOGS(`syncd-version-check-error-local-version-${r}`),new g.SyncdRetryableError(`syncd-version-check-error-local-version-${r}`)}const r=yield(0,l.getCollectionVersionLtHashInTransaction)(e);if((0,s.arrayBuffersEqual)(r,a.EMPTY_LT_HASH)&&1!==t)throw __LOG__(3,void 0,void 0,!0)`syncd: empty local lthash found when processing ${e} patch v${t}`,SEND_LOGS("syncd-empty-lthash-on-mac-mismatch"),new g.SyncdRetryableError("empty lthash")}))).apply(this,arguments)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e,t,n,r,i,a,u,c,d,p,_,h,A){var E;const y=(0,o.getConfig)().syncdShouldNotFatalOnSnapshotMacMismatchInPatches()&&!u,S=null!==(E=yield(0,l.getIsCollectionInMacMismatchFatalInTransaction)(e))&&void 0!==E&&E;if(y&&S)return void __LOG__(2)`syncd: collection ${e} is already in snapshot mac mismatch so not checking again`;const v=yield(0,f.generateSnapshotMac)(n,r,i,a);if(!(0,s.arrayBuffersEqual)(v,t)){__LOG__(3,void 0,void 0,!0)`syncd: unable to validate snapshot mac.`,SEND_LOGS("syncd: unable to validate snapshot mac.",0),u||(yield M(e,d)),yield(0,o.getDbImpls)().writeSyncdLog(e,"failed validate snapshot mac");const{isLtHashConsistent:t,scratchLtHash:n}=yield B(e),f=u?m.SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:m.SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_PATCH,E=(null==p?void 0:p.collectionName)&&!(0,s.arrayBuffersEqual)(a,null==p?void 0:p.collectionName),S=(null==p?void 0:p.newLthash)&&!(0,s.arrayBuffersEqual)(r,null==p?void 0:p.newLthash),v=(null==p?void 0:p.patchVersion)&&!(0,s.arrayBuffersEqual)(i,null==p?void 0:p.patchVersion),I=(null==p?void 0:p.currentLthash)&&_&&!(0,s.arrayBuffersEqual)(_,null==p?void 0:p.currentLthash),T=(null==p?void 0:p.newLthashSubtract)&&(null==h?void 0:h.subtractResult)&&!(0,s.arrayBuffersEqual)(null==h?void 0:h.subtractResult,null==p?void 0:p.newLthashSubtract),b=null==h?void 0:h.hasOverride,P=null==h?void 0:h.numAdd,C=null==h?void 0:h.numRemove,O=(null==p?void 0:p.currentLthash)&&n&&!(0,s.arrayBuffersEqual)(n,null==p?void 0:p.currentLthash),R=null!=(null==p?void 0:p.numberAdd)&&null!=(null==h?void 0:h.numAdd)&&(null==h?void 0:h.numAdd)!==(null==p?void 0:p.numberAdd),N=null!=(null==p?void 0:p.numberRemove)&&null!=(null==h?void 0:h.numRemove)&&(null==h?void 0:h.numRemove)!==(null==p?void 0:p.numberRemove),w=null==h?void 0:h.didUseFallback,D=null==h?void 0:h.hasMissingRemove,L=yield(0,l.getCollectionVersionInTransaction)(e),k=null==L?void 0:L.didLastPatchFailPostValidation,G=(null==p?void 0:p.currentLthash)&&(null==L?void 0:L.lastPatchNewLtHashFromPatchDebugData)&&!(0,s.arrayBuffersEqual)(null==L?void 0:L.lastPatchNewLtHashFromPatchDebugData,null==p?void 0:p.currentLthash),U=null==L?void 0:L.isLastPatchAnIncomingPatch,x=null==L?void 0:L.isLastPatchSenderAPrimaryDevice,F=null==L?void 0:L.didBootstrapFromSnapshot,K=null!=(null==L?void 0:L.lastPatchSenderDeviceId)&&null!=A&&A===(null==L?void 0:L.lastPatchSenderDeviceId),Y=yield(0,o.getConfig)().getAreThereMoreCompanions();if((0,m.reportSyncdFatalError)(f,e,c,d,!y,t,E,I,S,v,T,b,P,C,O,0===A,w,D,R,N,k,G,U,x,K,F,Y),y)return yield(0,l.updateIsCollectionInMacMismatchFatalInTransaction)(e),void __LOG__(2)`syncd: skip fatal after snapshot mac mismatch for collection ${e}`;throw new g.SyncdFatalError("unable to validate snapshot mac")}}))).apply(this,arguments)}function R(){return N.apply(this,arguments)}function N(){return(N=(0,i.default)((function*(e,t,n,r,i,a,l,u,c){const d=yield(0,f.generatePatchMac)(n,r,i,a,l);if(!(0,s.arrayBuffersEqual)(d,t))throw yield M(e,c),yield(0,o.getDbImpls)().writeSyncdLog(e,"failed validate patch mac"),(0,m.reportSyncdFatalError)(m.SyncdFatalErrorType.MAC_MISMATCH_PATCH,e,u,c),__LOG__(3,void 0,void 0,!0)`syncd: unable to validate patch mac.`,SEND_LOGS("syncd: unable to validate patch mac."),new g.SyncdFatalError("unable to validate patch mac")}))).apply(this,arguments)}function w(){return(w=(0,i.default)((function*(e,t,n,r){const i=(yield(0,l.getCollectionVersionInTransaction)(e).then((e=>{var t;return null!==(t=null==e?void 0:e.version)&&void 0!==t?t:p.DEFAULT_COLLECTION_VERSION})))+1,{patchMacKey:o,snapshotMacKey:a}=yield(0,f.generateEncryptionKeys)(r),s=(0,_.to64BitNetworkOrder)(i),u=(0,_.toUtf8)(e).buffer,c=yield(0,f.generateSnapshotMac)(a,t,s,u),d=yield(0,f.generatePatchMac)(o,c,n.map((e=>e.valueMac)),s,u);return __LOG__(2)`syncd: computing snapshot and patch macs for outgoing patch ${e} v${i}:
encoded version: ${(0,_.arrayBufferToHexPadded)(s)}
encoded collection: ${(0,_.arrayBufferToHexPadded)(u)}
snapshotMAC: ${(0,_.arrayBufferToHexPadded)(c)}
patchMAC: ${(0,_.arrayBufferToHexPadded)(d)}`,{snapshotMac:c,patchMac:d}}))).apply(this,arguments)}function D(){return L.apply(this,arguments)}function L(){return(L=(0,i.default)((function*(e,t,n,r,s,u){const p=null!=u?u:yield(0,l.getCollectionVersionLtHashInTransaction)(e),f=yield U(t.map((e=>e.indexMac))),g=new Map,h=new Map,A=new Map;let m=!1,y=!1;yield(0,c.promiseEach)(t,function(){var t=(0,i.default)((function*(t){const{indexMac:i,valueMac:a,operation:l}=t,u=I.decode(i),c=f.get(u);if(c)l===d.SyncdMutation$SyncdOperation.REMOVE?h.set((0,_.arrayBufferToHexPadded)(i),c):A.set((0,_.arrayBufferToHexPadded)(i),c);else if(l===d.SyncdMutation$SyncdOperation.REMOVE){const t=yield function(e){if(null==n)return Promise.resolve(null);return n(e)}(i);var p,S;if(null!=t)h.set((0,_.arrayBufferToHexPadded)(i),t),y=!0,__LOG__(3,void 0,void 0,!0,["non-sad"])`syncd: had to use fallbackQueryForValueMac in collection ${e} for platform ${null!==(p=(0,o.getConfig)().primaryPlatform())&&void 0!==p?p:"[empty]"}: ${(0,_.arrayBufferToHexPadded)(i).slice(-16)}
}`,SEND_LOGS("syncd: fallback query",1,"non-sad");else m=!0,(0,E.reportSyncdCriticalEvent)(E.SyncdCriticalEventType.MISSING_MUTATION_TO_REMOVE,e),__LOG__(4,void 0,new Error,!0)`syncd: missing indexMAC in sync-actions table for REMOVE mutation in collection ${e} version ${r} direction ${s} for platform ${null!==(S=(0,o.getConfig)().primaryPlatform())&&void 0!==S?S:"[empty]"}:
${(0,_.arrayBufferToHexPadded)(i).slice(-16)}`,SEND_LOGS("syncd: missing indexMAC from REMOVE",0)}l===d.SyncdMutation$SyncdOperation.SET&&g.set((0,_.arrayBufferToHexPadded)(i),a)}));return function(){return t.apply(this,arguments)}}());const{ltHash:S,subtractResult:T}=yield a.LT_HASH_ANTI_TAMPERING.subtractThenAdd(p,Array.from(g.values()),Array.from(h.values()).concat(Array.from(A.values())));return __LOG__(2)`syncd: computing ltHash for ${e}:
currentLtHash: ${(0,_.arrayBufferToHexPadded)(p)}
macsToAdd:
    ${Array.from(g.entries()).map((e=>{let[t,n]=e;return v(t,n)})).join("\n\t")}
macsToRemove:
    ${Array.from(h.entries()).map((e=>{let[t,n]=e;return v(t,n)})).join("\n\t")}
macsToOverwrite (also remove):
    ${Array.from(A.entries()).map((e=>{let[t,n]=e;return v(t,n)})).join("\n\t")}
newLtHash: ${(0,_.arrayBufferToHexPadded)(S)}`,{ltHash:S,numAdd:g.size,numRemove:h.size,hasOverride:A.size>0,subtractResult:T,hasMissingRemove:m,didUseFallback:y}}))).apply(this,arguments)}function B(){return k.apply(this,arguments)}function k(){return(k=(0,i.default)((function*(e,t){const n=yield(0,o.runInTransaction)({SyncActionStore:!0,CollectionVersionStore:!0},function(){var t=(0,i.default)((function*(t){let{SyncActionStore:n,CollectionVersionStore:r}=t;const o=null==e?yield r.getAll():[yield r.get(e)];return Promise.all(o.filter(Boolean).map(function(){var e=(0,i.default)((function*(e){let{collection:t,ltHash:r}=e;return{collection:t,ltHash:r,mutations:yield n.getByCollections([t])}}));return function(){return e.apply(this,arguments)}}()))}));return function(){return t.apply(this,arguments)}}());let r=0;if(n.map((e=>{let{collection:t,ltHash:n,mutations:i}=e;r+=i.length})),void 0!==t&&r>t)return{isLtHashConsistent:void 0,scratchLtHash:void 0,cachedLtHash:void 0};let a=null,l=null,u=!0;return yield Promise.all(n.map(function(){var e=(0,i.default)((function*(e){let{collection:t,ltHash:n,mutations:r}=e;const i=yield G(r);null==a&&(a=i),null==l&&(l=n),(0,s.arrayBuffersEqual)(n,i)||(u=!1,__LOG__(4,!0,new Error,!0)`syncd: failed LtHash check for ${t}`,SEND_LOGS("LtHash check failed",0))}));return function(){return e.apply(this,arguments)}}())),{isLtHashConsistent:u,scratchLtHash:a,cachedLtHash:l}}))).apply(this,arguments)}function G(e){const t=new Map(e.map((e=>[(0,_.arrayBufferToHexPadded)(e.indexMac),e.valueMac])));return a.LT_HASH_ANTI_TAMPERING.add(a.EMPTY_LT_HASH,Array.from(t.values()))}function U(){return x.apply(this,arguments)}function x(){return(x=(0,i.default)((function*(e){const t=yield(0,u.getSyncActionsByIndexMacsInTransaction)(e);return new Map(t.map((e=>[I.decode(e.indexMac),e.valueMac])))}))).apply(this,arguments)}function F(){return K.apply(this,arguments)}function K(){return(K=(0,i.default)((function*(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t?20:1;__LOG__(2)`syncd: logMacs: ${e}: prepare`;const[r,i]=yield(0,o.runInTransaction)({SyncActionStore:!0,CollectionVersionStore:!0},(t=>{let{SyncActionStore:n,CollectionVersionStore:r}=t;return Promise.all([r.get(e).then((e=>null==e?void 0:e.version)),n.getByCollections([e])])}));if(__LOG__(2)`syncd: current snapshot ${e} v${r} with ${i.length} mutations:`,t&&i.length>100)return i;const a=i.reduce(((e,r,i)=>(i%n==0&&e.push(""),e[e.length-1]+=v(r.indexMac,r.valueMac,t)+" | ",e)),[]);return a.forEach((e=>__LOG__(2)`|${e}`)),i}))).apply(this,arguments)}function Y(){return(Y=(0,i.default)((function*(e,t){const{isLtHashConsistent:n,scratchLtHash:r,cachedLtHash:i}=yield B(e,300),a=null==r?"":(0,_.arrayBufferToHexPadded)(r).slice(-16),s=null==i?"":(0,_.arrayBufferToHexPadded)(i).slice(-16);if(!0===(yield(0,l.getIsCollectionLthashInconsistentInTransaction)(e)))return yield(0,o.getDbImpls)().writeSyncdLog(e,`lthash already inconsistent. scratchLtHash: ${a}, cachedLtHash: ${s}, context: ${t}`),!0;if(!1===n){yield(0,o.getDbImpls)().writeSyncdLog(e,`lthash first time inconsistent. scratchLtHash: ${a}, cachedLtHash: ${s}, context: ${t}`);const{isLtHashConsistent:n,scratchLtHash:r,cachedLtHash:i}=yield B(e,300),u=null==r?"":(0,_.arrayBufferToHexPadded)(r).slice(-16),c=null==i?"":(0,_.arrayBufferToHexPadded)(i).slice(-16),d=null==n?"[undefined]":(!n).toString();return yield(0,o.getDbImpls)().writeSyncdLog(e,`lthash inconsistency second run. is inconsistent? ${d} scratchLtHash: ${u}, cachedLtHash: ${c}, context: ${t}`),yield(0,o.getDbImpls)().printSyncdLog(),yield(0,l.updateIsCollectionLthashInconsistentInTransaction)(e),__LOG__(4,!0,new Error,!0)`syncd: lthash inconsistent for ${e}`,SEND_LOGS("syncd: lthash inconsistent",0),!0}if(!0===n)return yield(0,o.getDbImpls)().writeSyncdLog(e,`lthash consistent. scratchLtHash: ${a}, cachedLtHash: ${s}, context: ${t}`),!1;yield(0,o.getDbImpls)().writeSyncdLog(e,`lthash unknown if consistent. scratchLtHash: ${a}, cachedLtHash: ${s}, context: ${t}`)}))).apply(this,arguments)}},71903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncModelType=t.SyncDataType=t.SyncActionState=t.MIN_PATCH_SIZE=t.MIN_INLINE_MUTATIONS=t.MAX_PATCH_SIZE=t.MAX_INLINE_MUTATIONS=t.LABEL_ASSOCIATION_SYNC_VERSION=t.FINITE_FAILURE_EXPIRY_DURATION=t.DEFAULT_COLLECTION_VERSION=t.ConflictResolutionState=t.CollectionSyncState=t.CollectionState=t.CollectionName=t.CHAT_ASSIGNMENT_SYNC_VERSION=t.BACKOFF_MIN_TIMEOUT=t.BACKOFF_MAX_TIMEOUT=t.BACKOFF_BASE=t.Actions=void 0;var r=n(29987);t.BACKOFF_MIN_TIMEOUT=1e3;t.BACKOFF_MAX_TIMEOUT=36e5;t.BACKOFF_BASE=2;const i=2*r.DAY_MILLISECONDS;t.FINITE_FAILURE_EXPIRY_DURATION=i;t.MIN_INLINE_MUTATIONS=100;t.MAX_INLINE_MUTATIONS=2e3;t.MIN_PATCH_SIZE=10;t.MAX_PATCH_SIZE=100;t.DEFAULT_COLLECTION_VERSION=0;t.LABEL_ASSOCIATION_SYNC_VERSION=3;t.CHAT_ASSIGNMENT_SYNC_VERSION=7;const o=n(54302)({Star:"star",Contact:"contact",Mute:"mute",PinDEPRECATED:"pin",Pin:"pin_v1",SettingPushName:"setting_pushName",LabelEdit:"label_edit",LabelMessage:"label_message",LabelJid:"label_jid",QuickReply:"quick_reply",LocaleSetting:"setting_locale",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChat:"clearChat",DeleteMessageForMe:"deleteMessageForMe",Sentinel:"sentinel",UnarchiveChatsSetting:"setting_unarchiveChats",DeleteChat:"deleteChat",AndroidUnsupportedActions:"android_unsupported_actions",PrimaryFeature:"primary_feature",Subscription:"subscription",Nux:"nux",Agent:"deviceAgent",TimeFormat:"time_format",UserStatusMute:"userStatusMute",PrimaryVersion:"primary_version",RemoveRecentSticker:"removeRecentSticker",ChatAssignment:"agentChatAssignment",ChatAssignmentOpenedStatus:"agentChatAssignmentOpenedStatus",FavoriteSticker:"favoriteSticker",PnForLidChat:"pnForLidChat",ShareOwnPn:"shareOwnPn",ExternalWebBeta:"external_web_beta",MarketingMessage:"marketingMessage",MarketingMessageBroadcast:"marketingMessageBroadcast",StatusPrivacy:"status_privacy",BotWelcomeRequest:"bot_welcome_request",LabelReordering:"label_reordering",PaymentInfo:"payment_info",CustomPaymentMethods:"custom_payment_methods",LockChat:"lock",ChatLockSettings:"setting_chatLock",DeviceCapabilities:"device_capabilities",DisableLinkPreviews:"setting_disableLinkPreviews"});t.Actions=o;const a=n(54302)({Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"});t.CollectionName=a;const s=n(54302).Mirrored(["Success","SuccessHasMore","Conflict","ConflictHasMore","ErrorRetry","ErrorFatal","Blocked"]);t.CollectionState=s;const l=n(54302).Mirrored(["UpToDate","Dirty","FailingFiniteRetry","Fatal","Blocked"]);t.CollectionSyncState=l;const u=n(54302).Mirrored(["Success","Malformed","Orphan","Unsupported","Skipped","Failed"]);t.SyncActionState=u;const c=n(54302).Mirrored(["Msg","Chat","Agent","ChatAssignment","UserStatusMute"]);t.SyncModelType=c;const d=n(54302).Mirrored(["ApplyRemoteAndDropLocal","SkipRemote","SkipRemoteAndDropLocal"]);t.ConflictResolutionState=d;const p=n(54302).Mirrored(["Patch","Snapshot","Local"]);t.SyncDataType=p},99205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSyncdDisabled=function(){return(0,r.getConfig)().syncdDisabled()};var r=n(58117)},21061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdRetryableError=t.SyncdMissingKeyError=t.SyncdFatalError=void 0;class n extends Error{constructor(){super(...arguments),this.name="SyncdMissingKeyError"}}t.SyncdMissingKeyError=n;class r extends Error{constructor(e,t){super(e),this.name="SyncdRetryableError",this.backoff=t,this.message=e}}t.SyncdRetryableError=r;class i extends Error{constructor(e){super(e),this.name="SyncdFatalError",this.message=e}}t.SyncdFatalError=i},92271:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.applyAllOrphansAndUnsupported=function(){return h.apply(this,arguments)},t.checkOrphanAgents=function(){return A.apply(this,arguments)},t.checkOrphanChatAssignments=function(){return m.apply(this,arguments)},t.checkOrphanChats=p,t.checkOrphanMessages=c,t.checkOrphanMutations=function(){return u.apply(this,arguments)},t.checkOrphanUserStatusMutes=function(){return E.apply(this,arguments)};var i=r(n(11504)),o=n(77485),a=n(37454),s=n(71903),l=n(99205);function u(){return(u=(0,i.default)((function*(e,t){if((0,l.isSyncdDisabled)())return Promise.resolve();yield Promise.all([c(e),p(t)])}))).apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){yield _(e,s.SyncModelType.Msg)}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){yield _(e,s.SyncModelType.Chat)}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e,t){if((0,l.isSyncdDisabled)())return Promise.resolve();const n=yield(0,o.getSyncActionsByModelInfosInTransaction)(e.map((e=>[e,t,s.SyncActionState.Orphan])));yield(0,a.applyIndividualMutations)(n)}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(){if((0,l.isSyncdDisabled)())return Promise.resolve();__LOG__(2)`syncd: start applyAllOrphansAndUnsupported`;const e=yield(0,o.getSyncActionsByActionStatesInTransaction)([s.SyncActionState.Orphan,s.SyncActionState.Unsupported]);yield(0,a.applyIndividualMutations)(e),__LOG__(2)`syncd: end applyAllOrphansAndUnsupported`}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){yield _(e,s.SyncModelType.Agent)}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){yield _(e,s.SyncModelType.ChatAssignment)}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){yield _(e,s.SyncModelType.UserStatusMute)}))).apply(this,arguments)}},90963:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.syncResponseParser=void 0;var i=r(n(73982)),o=n(71903),a=n(85237),s=n(21061),l=n(78761);const u=new(r(n(82601)).default)("syncResponseParser",(e=>{__LOG__(2)`syncd: start parsing syncd collections`;const t=[];return e.child("sync").mapChildrenWithTag("collection",(e=>{const n=(0,i.default)({},null),r=o.CollectionName.cast(e.attrString("name"));if(!r)throw new s.SyncdFatalError("invalid collection name");n.name=r,n.state=function(e,t){if(!e.hasAttr("type")||"error"!==e.attrString("type"))return e.hasAttr("has_more_patches")?(__LOG__(2)`syncd: collection ${t} got server code has_more_patches`,o.CollectionState.SuccessHasMore):(__LOG__(2)`syncd: collection ${t} did not get server error`,o.CollectionState.Success);{const n=e.child("error"),r=n.attrString("code"),i=n.attrString("text");switch(__LOG__(2)`syncd: collection ${t} got server error: ${r}`,r){case"409":return e.hasAttr("has_more_patches")?o.CollectionState.ConflictHasMore:o.CollectionState.Conflict;case"400":return(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.XMPP_BAD_REQUEST_FOR_COLLECTION),__LOG__(4,void 0,new Error,!0)`syncd: fatal error: collection ${String(t)} throws ${i}`,SEND_LOGS(`syncd: fatal error 400: collection ${String(t)}`),o.CollectionState.ErrorFatal;case"404":return(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.XMPP_NOT_FOUND_FOR_COLLECTION),__LOG__(4,void 0,new Error,!0)`syncd: fatal error 404: collection ${String(t)} throws ${i}`,SEND_LOGS(`syncd: fatal error: collection ${String(t)}`),o.CollectionState.ErrorFatal;default:return __LOG__(3,void 0,void 0,!0)`syncd: retryable error: collection ${String(t)} throws ${i}`,SEND_LOGS(`syncd: retryable error: collection ${String(t)}`),o.CollectionState.ErrorRetry}}}(e,n.name),e.hasAttr("version")&&(n.version=parseInt(e.attrString("version"),10)),e.hasChild("patches")&&(n.patches=e.child("patches").mapChildrenWithTag("patch",(e=>(0,a.decodeSyncdPatch)(r,e.contentBytes())))),e.hasChild("snapshot")&&(n.snapshot=(0,a.decodeExternalBlobReference)(r,e.child("snapshot").contentBytes())),t.push(n),null==n.version&&null==n.patches&&null==n.snapshot&&__LOG__(2)`syncd: collection ${r} has no version, patches or snapshot`,__LOG__(2)`syncd: successfully parsed collection ${r}`})),t}));t.syncResponseParser=u},2625:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.serverSync=function(){return y.apply(this,arguments)};var i=r(n(11504)),o=n(58117),a=n(82749),s=n(47958),l=n(75285),u=n(37454),c=n(71903),d=n(21061),p=n(70922),f=n(78761),_=n(70982),g=r(n(62539)),h=n(90963),A=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(80005)),m=n(29987);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function y(){return(y=(0,i.default)((function*(e){yield C(e,"start serverSync");let t=[],n=[...e],r=0;for(;(r<5||n.length>0&&r<500)&&0!==n.length;){const{doneCollections:e,refetchCollections:i}=yield S(n);yield Promise.all(e.map((e=>C([e.name],`done collection, state: ${e.state}`)))),n=i,t=t.concat(e),r++}return n.length>0&&(yield C(n,"error: max iterations"),__LOG__(4,void 0,new Error,!0,["syncd"])`syncd: reached max iterations for collections: ${n}`,SEND_LOGS("syncd: max iteration",1,"syncd"),t=t.concat(n.map((e=>({state:c.CollectionState.ErrorRetry,name:e}))))),t}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){if(0===e.length)return{doneCollections:[],refetchCollections:[]};yield M(e);try{const{collectionDetails:t,localCollectionVersions:n,collectionsToUpload:r}=yield I(e);r.length>0&&__LOG__(2)`syncd: deferred local mutation upload for ${r}`,__LOG__(2)`syncd: local collection versions:`,n.forEach(((e,t)=>{__LOG__(2)`\n\t${t} v${null!=e?e:"(undefined)}"}`}));const o=[],a=[];t.forEach((e=>{switch(e.state){case c.CollectionState.ErrorRetry:case c.CollectionState.ErrorFatal:case c.CollectionState.Blocked:return void a.push(e);default:o.push(e)}e.state!==c.CollectionState.Conflict&&e.state!==c.CollectionState.ConflictHasMore||A.incConflict()})),__LOG__(2)`syncd: start apply collections: ${o.map((e=>e.name))}`;const d=new _.SyncdEventFlow,p=yield Promise.all(o.map((e=>(0,u.applyAppStateSyncResponse)(e,n.get(e.name),d))));d.end(),__LOG__(2)`syncd: end apply collections: ${o.map((e=>e.name))}`;const f=[];return yield Promise.all(p.map(function(){var e=(0,i.default)((function*(e){if(e.state===c.CollectionState.Conflict){(yield(0,l.getSyncPendingMutationsByCollectionInTransaction)(e.name)).length>0?f.push(e.name):(e.state=c.CollectionState.Success,a.push(e))}else e.state===c.CollectionState.ConflictHasMore||e.state===c.CollectionState.SuccessHasMore||e.state===c.CollectionState.Success&&r.some((t=>t===e.name))?f.push(e.name):(a.push(e),yield(0,s.updateLastSuccessfulSyncEndTimeInTransaction)(e.name))}));return function(){return e.apply(this,arguments)}}())),{doneCollections:a,refetchCollections:f}}catch(t){if(t instanceof d.SyncdFatalError){__LOG__(4,void 0,new Error,!0)`syncd: fatal error: syncd global throws ${t.message}`,SEND_LOGS(`syncd: fatal error: syncd global throws ${t.message}`),yield C(e,`moving to fatal state: ${t.name} ${t.message} ${t.stack}`);return{doneCollections:e.map((e=>({state:c.CollectionState.ErrorFatal,name:e}))),refetchCollections:[]}}__LOG__(3,void 0,void 0,!0)`syncd: retryable error: syncd global throws ${t.message}`,SEND_LOGS(`syncd: retryable error: syncd global throws ${t.message}`),yield C(e,`retryable error: ${t}`);return{doneCollections:e.map((e=>({state:c.CollectionState.ErrorRetry,name:e,serverBackoff:t.errorBackoff}))),refetchCollections:[]}}}))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e){const{syncIqNode:t,collectionWithPendingMutationsIds:n,collectionWithEncryptedMutations:r,localCollectionVersions:i,collectionsToSkip:o}=yield(0,g.default)(e);(0,p.reportSyncdCriticalBootstrapStage)(p.SyncdCriticalBootstrapStageType.REQUEST_BUILT),__LOG__(2)`syncd: sending sync request for collections: ${e.map((e=>{var t,r,o;return`\n\t${e} v${null!==(t=i.get(e))&&void 0!==t?t:"(undefined)"} ${(null!==(r=null===(o=n.get(e))||void 0===o?void 0:o.length)&&void 0!==r?r:0)>0&&null!=i.get(e)?" with local changes":""}`}))}`,yield C(e,"before sendIq");const s=yield(0,a.deprecatedSendIq)(t,h.syncResponseParser);if(__LOG__(2)`syncd: completed network operation for collections: ${e}`,(0,p.reportSyncdCriticalBootstrapStage)(p.SyncdCriticalBootstrapStageType.RESPONSE_RECEIVED),s.success){(0,p.reportSyncdCriticalBootstrapStage)(p.SyncdCriticalBootstrapStageType.RESPONSE_PARSED_VALID),yield C(e,"after sendIq success");const t=s.result;return __LOG__(2)`syncd: received sync response for collections: ${t.map((e=>{let t=`\n${e.name}`;return null!=e.version&&(t+=`\n\tupdated to version ${e.version}`),null!=e.snapshot&&(t+="\n\tcontains snapshot"),null!=e.patches&&(t+=`\n\tcontains ${e.patches.length} patches`),t}))}`,t.forEach((e=>{const t=n.get(e.name);t&&(e.syncedPendingMutationsId=t);const i=r.get(e.name);i&&(e.syncedEncryptedMutations=i)})),{collectionDetails:t,localCollectionVersions:i,collectionsToUpload:o}}const{errorCode:l,errorText:u,errorBackoff:c}=s;throw b(l,u,c)}))).apply(this,arguments)}function b(e,t,n){switch(e){case 400:return(0,f.reportSyncdFatalError)(f.SyncdFatalErrorType.XMPP_BAD_REQUEST_GLOBAL_ERROR),new d.SyncdFatalError(t);case 404:return(0,f.reportSyncdFatalError)(f.SyncdFatalErrorType.XMPP_NOT_FOUND_GLOBAL_ERROR),new d.SyncdFatalError(t);case 405:return(0,f.reportSyncdFatalError)(f.SyncdFatalErrorType.XMPP_BAD_METHOD_GLOBAL_ERROR),new d.SyncdFatalError(t);case 406:return(0,f.reportSyncdFatalError)(f.SyncdFatalErrorType.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR),new d.SyncdFatalError(t);default:return new d.SyncdRetryableError(t,n)}}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e){try{const t=(yield(0,s.bulkGetCollectionVersionsInTransaction)(e)).filter(Boolean).map((e=>{var t;const n=(null!==(t=e.lastSyncAttemptStartTimes)&&void 0!==t?t:[]).slice(-4);return{collection:e.collection,lastSyncAttemptStartTimes:[...n,(0,m.unixTimeMs)()]}}));yield(0,s.bulkSetCollectionSyncAttemptStartTimesInTransaction)(t)}catch(e){__LOG__(4,void 0,new Error,!0,["syncd"])`syncd: cannot log collection sync start: ${e}`,SEND_LOGS("syncd: cannot log collection sync start",1,"syncd")}}))).apply(this,arguments)}function C(e,t){return Promise.all(e.map((e=>(0,o.getDbImpls)().writeSyncdLog(e,t))))}},4348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncActionBase=void 0;var r=n(71903);t.SyncActionBase=class{getChatJidAndMessageKey(){}resolveConflicts(e,t){return t.timestamp>=e.timestamp?Promise.resolve(r.ConflictResolutionState.ApplyRemoteAndDropLocal):Promise.resolve(r.ConflictResolutionState.SkipRemote)}dropMutationDueToCrossIndexConflict(){return Promise.resolve(!1)}}},59454:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.buildIndex=s,t.buildMessageKey=function(e){let{remoteJid:t,id:n,fromMe:r,participant:i}=e;return[t,n,r?"1":"0",null==i||r?"0":i]},t.buildPendingMutation=function(e){let{action:t,indexArgs:n,collection:r,value:l,version:u,operation:c,timestamp:d}=e;return{collection:r,index:s(t,n),binarySyncAction:(0,a.encodeProtobuf)(o.SyncActionValueSpec,(0,i.default)((0,i.default)({},l),{},{timestamp:d})).readBuffer(),version:u,operation:c,timestamp:d,action:t}};var i=r(n(73982)),o=n(91205),a=n(86881);function s(e,t){return JSON.stringify([e,...t])}},23347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActionHandler=function(e){null==i&&(i=new Map((0,r.getConfig)().syncdActionHandlers().map((e=>[e.getAction(),e]))));return i.get(e)},t.maxSupportedVersion=function(){null==o&&(o=Math.max(...(0,r.getConfig)().syncdActionHandlers().map((e=>e.getVersion()))));return o};var r=n(58117);let i=null,o=null},37454:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.applyAppStateSyncResponse=function(){return G.apply(this,arguments)},t.applyIndividualMutations=function(){return k.apply(this,arguments)};var i=r(n(73982)),o=r(n(11504)),a=n(58117),s=n(44379),l=r(n(82065)),u=n(47958),c=n(34027),d=n(77485),p=n(22101),f=r(n(49619)),_=n(91866),g=n(91205),h=n(15644),A=n(51768),m=n(17596),E=n(71903),y=n(93532),S=n(21061),v=n(23347),I=n(10539),T=n(70922),b=n(78761),M=n(70982),P=n(19748),C=n(43658),O=n(21648),R=r(n(58697)),N=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(80005)),w=n(29987),D=n(33655);function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}const B=new ArrayBuffer(128);function k(){return(k=(0,o.default)((function*(e){if(0===e.length)return Promise.resolve();const t=e.sort(((e,t)=>e.timestamp-t.timestamp));__LOG__(2)`syncd: start applyIndividualMutations`;const n=(0,A.syncActionsToDecryptedMutation)(t).reduce(((e,t)=>{var n;const r=null!==(n=e.get(t.collection))&&void 0!==n?n:[];return r.push(t),e.set(t.collection,r),e}),new Map),r=Array.from(n.keys()).map(function(){var e=(0,o.default)((function*(e){__LOG__(2)`syncd: apply individual mutations for collection ${e}`;const t=n.get(e);if(void 0===t)return;const{setMutationsToPersist:r,pendingMutationsToDrop:i}=yield ie(e,t,E.SyncDataType.Local,null),s=r.map((e=>({action:e.action,actionState:e.actionState,binarySyncData:e.binarySyncData,collection:e.collection,index:e.index,keyId:e.keyId,modelId:e.modelId,modelType:e.modelType,timestamp:e.timestamp,version:e.version})));__LOG__(2)`syncd: end apply individual mutations for collection ${e}`,yield(0,a.runInTransaction)({SyncActionStore:!0,PendingMutationStore:!0},function(){var e=(0,o.default)((function*(e){let{SyncActionStore:t,PendingMutationStore:n}=e;yield t.bulkUpdate(s),yield n.bulkRemove(i)}));return function(){return e.apply(this,arguments)}}()),__LOG__(2)`syncd: end update db after apply individual mutations for collection ${e}`}));return function(){return e.apply(this,arguments)}}());yield Promise.all(r),__LOG__(2)`syncd: end applyIndividualMutations`}))).apply(this,arguments)}function G(){return(G=(0,o.default)((function*(e,t,n){const{name:r,version:i,patches:o,snapshot:s,syncedPendingMutationsId:l,syncedEncryptedMutations:d}=e;__LOG__(2)`syncd: start applying collection ${r}`;try{var p,f;null==n||n.mark("external_mutations_download_start",{patchCount:null===(p=e.patches)||void 0===p?void 0:p.length,snapshotSizeBytes:null===(f=e.snapshot)||void 0===f?void 0:f.fileSizeBytes});const[_,g]=yield V(r,o,s,t);null==n||n.mark("external_mutations_download_end",{patchesWithMutationsCount:null==g?void 0:g.length,snapshotRecordsCount:null==_?void 0:_.records.length});const A=performance.now();if(null!=_)yield $(r,_,g,n),__LOG__(2)`syncd: ${r} snapshot and patches applied successfully`;else if(null!=g){const e=Math.min.apply(Math,g.map((e=>e.version.version)));if(null!=t&&e>t+1&&g.length>0){yield(0,a.getDbImpls)().writeSyncdLog(r,"has missing patches");const n=yield(0,c.getAllMissingKeysInTransaction)();if(__LOG__(2)`syncd: missing keys: [${n.map((e=>e.keyHex+":"+e.timestamp))}]`,__LOG__(2)`syncd: has missing patches. collection: ${r}, localVersion: ${t},
minPatch: ${e}`,yield U(r,g[0]),yield(0,a.getDbImpls)().printSyncdLog(),yield F(),__LOG__(4,void 0,new Error,!0)`syncd: has missing patches`,SEND_LOGS("syncd: has missing patches"),(0,a.getConfig)().syncdShouldFatalOnMissingPatch())throw(0,b.reportSyncdFatalError)(b.SyncdFatalErrorType.SERVER_DID_NOT_SEND_ALL_PATCHES,r,void 0,null!=t?t:0),new S.SyncdFatalError("syncd: has missing patches")}yield X(r,g,n),__LOG__(2)`syncd: ${r} patches applied successfully`}else null!=i?(yield(0,a.getDbImpls)().writeSyncdLog(r,`start upload patches. version: ${i}. mutation count: ${d.length}`),yield Y(r,i,l,d),yield(0,a.getDbImpls)().writeSyncdLog(r,"end upload patches"),__LOG__(2)`syncd: ${r} v${i} uploaded successfully`):((0,m.isBootstrap)(t)&&(yield(0,u.updateCollectionVersionAndLtHashInTransaction)(r,0,B)),__LOG__(2)`syncd: sync ${r} but there are no updates`);const E=Math.floor(performance.now()-A);return __LOG__(2)`syncd: applyAppStateSyncResponse: finished applying ${r} in ${E}ms`,(g||_)&&(0,m.isBootstrap)(t)&&!(0,m.isCriticalCollection)(r)&&(0,M.reportSyncdBootstrapDataApplied)(r,null!=_?M.SyncdBootstrapDataAppliedSnapshotUsed.SNAPSHOT_USED:M.SyncdBootstrapDataAppliedSnapshotUsed.SNAPSHOT_NOT_USED,E),yield(0,h.logMacsInSnapshot)(e.name),e}catch(e){const t=e.message;return yield(0,a.getDbImpls)().writeSyncdLog(r,`error (maybe retryable): ${e}`),e instanceof S.SyncdMissingKeyError?(__LOG__(3)`syncd: key error: ${r} missing keys`,{name:r,state:E.CollectionState.Blocked}):e instanceof S.SyncdFatalError?(__LOG__(4,void 0,new Error,!0)`syncd: fatal error: ${r} throws ${t}`,SEND_LOGS(`syncd: fatal error: ${String(r)} throws ${t}`),{name:r,state:E.CollectionState.ErrorFatal}):(__LOG__(3,void 0,void 0,!0)`syncd: retryable error: ${r} throws ${t}`,SEND_LOGS(`syncd: retryable error: ${String(r)} throws ${t}`),{name:r,state:E.CollectionState.ErrorRetry})}}))).apply(this,arguments)}function U(){return x.apply(this,arguments)}function x(){return(x=(0,o.default)((function*(e,t){try{const n=(yield(0,y.tryDecryptPatch)(e,t)).filter((e=>e.operation===_.SyncdMutation$SyncdOperation.SET)),r=(0,O.validateAndTypeSetMutations)(e,n),i=r.length>0?r[0].timestamp:null,o=null==i?null:(0,w.daysDiff)((0,w.unixTimeMs)(),i);yield(0,a.getDbImpls)().writeSyncdLog(e,`max timestamp in first patch: ${null!=o?o:"n/a"} days ago`)}catch(e){__LOG__(3)`syncd: could not log max timestamp: ${e}`}}))).apply(this,arguments)}function F(){return K.apply(this,arguments)}function K(){return(K=(0,o.default)((function*(){__LOG__(2)`syncd: missing patch info:`;(yield(0,u.getAllCollectionVersionsInTransaction)()).forEach((e=>{var t;const n=(null!==(t=e.lastSyncAttemptStartTimes)&&void 0!==t?t:[]).map((e=>(0,w.daysDiff)((0,w.unixTimeMs)(),e))),r=e.lastSuccessfulSyncEndTime,i=null==r?null:(0,w.daysDiff)((0,w.unixTimeMs)(),r);__LOG__(2)`${e.collection}:
lastSuccessfulSyncEndTime = ${e.lastSuccessfulSyncEndTime} (${i} days ago))
lastSyncAttemptStartTimes = ${e.lastSyncAttemptStartTimes}
lastSyncAttemptStartTimes by days ago: ${n}`}))}))).apply(this,arguments)}function Y(){return j.apply(this,arguments)}function j(){return(j=(0,o.default)((function*(e,t,n,r){var i;yield(0,h.logMacsInSnapshot)(e);const s=r.map((e=>({indexMac:e.indexMac,valueMac:e.valueMac,operation:e.operation}))),{ltHash:l}=yield(0,h.computeLtHash)(e,s,null,t,h.SyncdPatchDirection.Outgoing),c=(0,A.encryptedUploadMutationsToSyncActions)(r.filter((e=>e.operation===_.SyncdMutation$SyncdOperation.SET)),E.SyncActionState.Success),d=null!==(i=yield(0,u.getCollectionVersionInTransaction)(e).then((e=>null==e?void 0:e.version)))&&void 0!==i?i:0;t!==d+1&&(__LOG__(4,void 0,new Error,!0)`syncd: _uploadSuccessful: unexpected server version (${t}) after patch upload, expected ${d+1}`,SEND_LOGS("syncd: unexpected server version after patch upload")),__LOG__(2)`syncd: _uploadSuccessful: write to db for ${e}`;const p=(0,a.getConfig)().syncdShouldParsePatchDebugData();if(p&&(yield(0,h.reportCollectionInconsistency)(e,`pre-processing outgoing patch ${t}`)),yield(0,a.runInTransaction)({SyncActionStore:!0,PendingMutationStore:!0,CollectionVersionStore:!0},function(){var r=(0,o.default)((function*(r){let{SyncActionStore:i,PendingMutationStore:o,CollectionVersionStore:a}=r;yield i.bulkSet(c),yield o.bulkRemove(n),yield a.update(e,{version:t,ltHash:l,isLastPatchAnIncomingPatch:!1,lastPatchNewLtHashFromPatchDebugData:void 0,isLastPatchSenderAPrimaryDevice:void 0,didLastPatchFailPostValidation:void 0,lastPatchSenderDeviceId:void 0})}));return function(){return r.apply(this,arguments)}}()),__LOG__(2)`syncd: end _uploadSuccessful for ${e}`,p){const n=yield(0,h.reportCollectionInconsistency)(e,`post-processing outgoing patch ${t}`);yield ne(e,n)}}))).apply(this,arguments)}function V(){return W.apply(this,arguments)}function W(){return(W=(0,o.default)((function*(e,t,n,r){let i=Promise.resolve(),a=0;const s=(0,w.unixTimeMs)();if(null!=n){var l;const t=R.default.validateExternalBlobReference(e,n);a+=(0,p.numberOrThrowIfTooLarge)(null!==(l=t.fileSizeBytes)&&void 0!==l?l:0),__LOG__(2)`syncd: download snapshot for ${e}`,i=(0,P.downloadSnapshot)(e,t)}let u,c,d=Promise.resolve();if(null!=t&&t.length>0){const n=t.map((t=>R.default.validatePatchProtobuf(e,t)));d=Promise.all(n.map(function(){var t=(0,o.default)((function*(t){let n=t.mutations||[];const r=t.externalMutations;var i;r&&(__LOG__(2)`syncd: download patch for ${e}`,n=yield(0,P.downloadExternalPatch)(e,r),__LOG__(2)`syncd: ${e}'s external patch downloaded`,a+=(0,p.numberOrThrowIfTooLarge)(null!==(i=r.fileSizeBytes)&&void 0!==i?i:0));return{mutations:n,version:t.version,snapshotMac:t.snapshotMac,patchMac:t.patchMac,keyId:t.keyId,exitCode:t.exitCode,deviceIndex:t.deviceIndex,clientDebugData:t.clientDebugData}}));return function(){return t.apply(this,arguments)}}()))}try{[u,c]=yield Promise.all([i,d]),(0,m.isBootstrap)(r)&&(0,M.reportSyncdBootstrapAppStateDownloadMetric)({collection:e,downloadStartTs:s,downloadSize:a,isSuccess:"success"})}catch(t){throw(0,m.isBootstrap)(r)&&(0,M.reportSyncdBootstrapAppStateDownloadMetric)({collection:e,downloadStartTs:s,downloadSize:a,isSuccess:"failure"}),t}return[u,c]}))).apply(this,arguments)}function H(e){return{measuredComputeLtHashAndValidateSnapshot:function(){var t=(0,o.default)((function*(t,n){null==e||e.mark("anti_tampering_start",{source:E.SyncDataType.Snapshot});const r=yield(0,h.computeLtHashAndValidateSnapshot)(t,n);return null==e||e.mark("anti_tampering_end",{source:E.SyncDataType.Snapshot}),r}));return function(){return t.apply(this,arguments)}}(),measuredTryDecryptSnapshot:function(){var t=(0,o.default)((function*(t,n){null==e||e.mark("decryption_start",{source:E.SyncDataType.Snapshot});const r=yield(0,y.tryDecryptSnapshot)(t,n);return null==e||e.mark("decryption_end",{source:E.SyncDataType.Snapshot}),r}));return function(){return t.apply(this,arguments)}}()}}function Q(e){return{measuredComputeLtHashAndValidatePatch:function(){var t=(0,o.default)((function*(t,n,r){null==e||e.mark("anti_tampering_start",{source:E.SyncDataType.Patch});const i=yield(0,h.computeLtHashAndValidatePatch)(t,n,r);return null==e||e.mark("anti_tampering_end",{source:E.SyncDataType.Patch}),i}));return function(){return t.apply(this,arguments)}}(),measuredTryDecryptPatch:function(){var t=(0,o.default)((function*(t,n){null==e||e.mark("decryption_start",{source:E.SyncDataType.Patch});const r=yield(0,y.tryDecryptPatch)(t,n);return null==e||e.mark("decryption_end",{source:E.SyncDataType.Patch}),r}));return function(){return t.apply(this,arguments)}}()}}function $(){return q.apply(this,arguments)}function q(){return(q=(0,o.default)((function*(e,t,n,r){yield(0,a.getDbImpls)().writeSyncdLog(e,`start _applySnapshotAndPatches. mutation count: ${t.records.length}, version: ${t.version.version}`),yield(0,h.logMacsInSnapshot)(e);try{const{measuredComputeLtHashAndValidateSnapshot:n,measuredTryDecryptSnapshot:i}=H(r);null==r||r.mark("apply_start",{source:E.SyncDataType.Snapshot,snapshotRecordsCount:t.records.length}),__LOG__(2)`syncd: start validate ${e}'s snapshot`;const s=yield n(e,t);__LOG__(2)`syncd: collection ${e}'s snapshot validated`;const l=yield i(e,t);__LOG__(2)`syncd: collection ${e}'s snapshot decrypted`,N.addMutationCount(t.records.length),(0,T.reportSyncdDecryptedMutations)(T.SyncdDecryptMutationsType.SNAPSHOT_MUTATIONS,l),(0,O.validateNoSameIndexForMultipleMutations)(e,l,E.SyncDataType.Snapshot);const u=t.version.version,{setMutationsToPersist:c,pendingMutationsToDrop:d}=yield ie(e,l,E.SyncDataType.Snapshot,r);__LOG__(2)`syncd: processed ${l.length} mutations in snapshot of collection ${e} v${u}`,__LOG__(2)`syncd: collection ${e}'s snapshot v${u} applied`,null==r||r.mark("update_DB_start",{source:E.SyncDataType.Snapshot,setMutationsToPersistCount:c.length,pendingMutationsToDropCount:d.length}),yield(0,a.runInTransaction)({SyncActionStore:!0,PendingMutationStore:!0,CollectionVersionStore:!0},function(){var t=(0,o.default)((function*(t){let{SyncActionStore:n,PendingMutationStore:r,CollectionVersionStore:i}=t;yield n.bulkSet(c),yield r.bulkRemove(d),yield i.update(e,{version:u,ltHash:s,isLastPatchAnIncomingPatch:!0,lastPatchNewLtHashFromPatchDebugData:void 0,isLastPatchSenderAPrimaryDevice:void 0,didLastPatchFailPostValidation:void 0,lastPatchSenderDeviceId:void 0,didBootstrapFromSnapshot:!0})}));return function(){return t.apply(this,arguments)}}()),null==r||r.mark("update_DB_end",{source:E.SyncDataType.Snapshot}),__LOG__(2)`syncd: completed applying snapshot for ${e}`,null==r||r.mark("apply_end",{source:E.SyncDataType.Snapshot,decryptedMutationsCount:l.length})}catch(n){throw yield(0,a.getDbImpls)().writeSyncdLog(e,"exception "+n.message),n instanceof S.SyncdMissingKeyError&&(yield(0,I.handleMissingKeysInSnapshot)(e,t)),n}yield(0,a.getDbImpls)().writeSyncdLog(e,"done applying snapshot"),n&&(null==r||r.mark("apply_start",{source:E.SyncDataType.Patch,patchCount:n.length}),yield X(e,n,r),null==r||r.mark("apply_end",{source:E.SyncDataType.Patch,patchCount:n.length}))}))).apply(this,arguments)}function J(){return z.apply(this,arguments)}function z(){return(z=(0,o.default)((function*(e){if(e>(0,a.getConfig)().syncdMaxMutationsToProcessDuringResume()){const t=Date.now();__LOG__(2)`syncd: patches have ${e} mutations, wait for UI unblock`,yield(0,a.getDbImpls)().handleSyncDelayApplyingPatchUntilUIUnblocks(),__LOG__(2)`syncd: UI is unblocked, waited for ${Date.now()-t}ms`}}))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.default)((function*(e,t,n){const r=0===t.length?"n/a":t[t.length-1].version.version;if(yield(0,a.getDbImpls)().writeSyncdLog(e,`start apply patches. count: ${t.length}, last patch version: ${r}`),0===t.length)return __LOG__(2)`syncd: no patches for collection ${e}`,Promise.resolve();(0,O.validateNoDuplicatePatchVersionInCollection)(e,t),t.sort(((e,t)=>e.version.version>t.version.version?1:-1));try{const r=t.reduce(((e,t)=>e+t.mutations.length),0);yield J(r);for(let r=0;r<t.length;r++)(r<=4||r%10==0)&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`start applying patch ${t[r].version.version} with ${t[r].mutations.length} mutations`)),yield ee(e,t[r],n,r<=1),(r<=4||r%10==0)&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`finished applying patch ${t[r].version.version} with ${t[r].mutations.length} mutations`));yield(0,a.getDbImpls)().writeSyncdLog(e,`after apply patches (total mutations: ${r})`)}catch(n){throw yield(0,a.getDbImpls)().writeSyncdLog(e,"exception"+n.message),n instanceof S.SyncdMissingKeyError&&(yield(0,I.handleMissingKeysInPatches)(e,t)),n}}))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=(0,o.default)((function*(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];yield(0,h.logMacsInSnapshot)(e);const i=(0,a.getConfig)().syncdShouldParsePatchDebugData();if(i&&(yield(0,h.reportCollectionInconsistency)(e,`pre-processing incoming patch ${t.version.version}`)),t.exitCode){var l;const n=t.exitCode.code;switch(yield(0,a.getDbImpls)().writeSyncdLog(e,"patch exit code "+(null!=n?n:"")),n){case 100:(0,b.reportSyncdFatalError)(b.SyncdFatalErrorType.TERMINAL_PATCH_MISSING_DATA,e);break;case 101:(0,b.reportSyncdFatalError)(b.SyncdFatalErrorType.TERMINAL_PATCH_DESERIALIZATION_ERROR,e);break;default:(0,b.reportSyncdFatalError)(b.SyncdFatalErrorType.TERMINAL_PATCH_UNKNOWN,e)}throw new S.SyncdFatalError(`received terminal patch with exit code:  ${String(n)} text: ${String(null===(l=t.exitCode)||void 0===l?void 0:l.text)}  `)}yield(0,a.getDbImpls)().handleSyncBeforeApplyPatch(t);const u=t.mutations.filter((e=>e.operation===_.SyncdMutation$SyncdOperation.SET)).length,c=t.mutations.length-u;__LOG__(2)`syncd: applying patch ${e} v${t.version.version} from device ${t.deviceIndex}
SET count: ${u}
REMOVE count: ${c}`,0===u&&0===c&&(__LOG__(3,void 0,void 0,!0)`syncd: ${e}: empty patch found`,SEND_LOGS(`syncd: ${e}: empty patch found`));const{measuredComputeLtHashAndValidatePatch:p,measuredTryDecryptPatch:f}=Q(n),g=yield p(e,t,C);__LOG__(2)`syncd: completed computeLtHashAndValidatePatch for ${e} v${t.version.version}`;const A=yield f(e,t);(0,T.reportSyncdDecryptedMutations)(T.SyncdDecryptMutationsType.PATCH_MUTATIONS,A),r&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`after decrypt patch ${t.version.version}`)),N.addMutationCount(A.length),(0,O.validateNoSameIndexForMultipleMutations)(e,A,E.SyncDataType.Patch);const m=ue(A),y=m.filter((e=>e.operation===_.SyncdMutation$SyncdOperation.REMOVE));yield ae(e,y),__LOG__(2)`syncd: completed _applyRemoveMutations for ${e} v${t.version.version}`;const v=m.filter((e=>e.operation===_.SyncdMutation$SyncdOperation.SET)),{setMutationsToPersist:I,pendingMutationsToDrop:M}=yield ie(e,v,E.SyncDataType.Patch,n,r);__LOG__(2)`syncd: processed ${A.length} mutations in patch version ${t.version.version} of collection ${e}`,null==n||n.mark("update_DB_start",{source:E.SyncDataType.Patch,setMutationsToPersistCount:I.length,pendingMutationsToDropCount:M.length});const P=t.version.version;if(yield(0,a.runInTransaction)({SyncActionStore:!0,PendingMutationStore:!0,CollectionVersionStore:!0},function(){var n=(0,o.default)((function*(n){var r;let{SyncActionStore:i,PendingMutationStore:o,CollectionVersionStore:a}=n;yield i.bulkRemove(y.map((e=>e.index))),yield i.bulkSet(I),yield o.bulkRemove(M),yield a.update(e,{version:P,ltHash:g,lastPatchNewLtHashFromPatchDebugData:null===(r=t.clientDebugData)||void 0===r?void 0:r.newLthash,isLastPatchAnIncomingPatch:!0,isLastPatchSenderAPrimaryDevice:0===t.deviceIndex,didLastPatchFailPostValidation:void 0,lastPatchSenderDeviceId:t.deviceIndex})}));return function(){return n.apply(this,arguments)}}()),i){const n=yield(0,h.reportCollectionInconsistency)(e,`post-processing incoming patch ${t.version.version}. has remove: ${(c>0).toString()}`);yield ne(e,n)}function C(){return R.apply(this,arguments)}function R(){return(R=(0,o.default)((function*(t){var n;return null===(n=(yield(0,d.getSyncActionsByCollectionsInTransaction)([e])).filter((e=>(0,s.arrayBuffersEqual)(t,e.indexMac))).pop())||void 0===n?void 0:n.valueMac}))).apply(this,arguments)}null==n||n.mark("update_DB_end",{source:E.SyncDataType.Patch}),__LOG__(2)`syncd: completed final transaction in _applyPatch for ${e} v${t.version.version}`,r&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`after final transaction for patch ${t.version.version}`))}))).apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=(0,o.default)((function*(e,t){yield(0,a.runInTransaction)({CollectionVersionStore:!0},function(){var n=(0,o.default)((function*(n){let{CollectionVersionStore:r}=n;yield r.update(e,{didLastPatchFailPostValidation:t})}));return function(){return n.apply(this,arguments)}}())}))).apply(this,arguments)}function ie(){return oe.apply(this,arguments)}function oe(){return(oe=(0,o.default)((function*(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,T.reportSyncdCriticalBootstrapStage)(T.SyncdCriticalBootstrapStageType.ABOUT_TO_APPLY_MUTATIONS);const s=n===E.SyncDataType.Local?" (individual mutations)":"",l=[],u=(0,O.validateAndTypeSetMutations)(e,t),{supportedMutations:c,unsupportedMutations:d}=ce(e,u);d.forEach((e=>l.push((0,A.setMutationToSyncAction)(e,E.SyncActionState.Unsupported)))),null==r||r.mark("conflict_resolution_start",{source:n,collectionName:e,count:c.length});const{remoteMutationsToApply:p,pendingMutationsToDrop:_}=yield(0,C.resolveConflict)(e,c),h=c.filter((e=>!p.includes(e)));null==r||r.mark("conflict_resolution_end",{source:n,collectionName:e,apply:p.length,drop:h.length}),h.forEach((e=>l.push((0,A.setMutationToSyncAction)(e,E.SyncActionState.Skipped,e.actionName)))),null==r||r.mark("apply_set_mutations_start",{source:n,collectionName:e,count:p.length});const m=de(p);let y=null;for(let t=0;t<m.length;t++){const n=o&&t<=1,r=m[t][0].actionHandler,i=m[t].map((e=>{let t;return t=e.binarySyncData?(0,f.default)((0,D.decodeProtobuf)(g.SyncActionDataSpec,e.binarySyncData).value,"decodeProtobuf(SyncActionDataSpec, m.binarySyncData).value"):(0,D.decodeProtobuf)(g.SyncActionValueSpec,e.binarySyncAction),(null==y||y<e.timestamp)&&(y=e.timestamp),{operation:"set",indexParts:e.indexArr,value:t,timestamp:e.timestamp}}));n&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`after deserialize. mutationsToApply length: ${i.length}`));let u=[],c=!1;try{__LOG__(2)`syncd: before apply mutation batch for ${e}. mutations count: ${i.length}  ${s}`,u=yield r.applyMutations(i,{setMutationsPendingToPersist:l,allSupportedSetMutations:p},n),n&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`after apply. result length: ${u.length}`))}catch(t){if(t instanceof S.SyncdFatalError||e===E.CollectionName.CriticalBlock)throw t;c=!0,__LOG__(3)`synd: catching error during _applySetMutations: ${t}`}__LOG__(2)`syncd: after apply mutation batch for ${e}  ${s}`;for(let e=0;e<m[t].length;e++){var v,I;const n=c?E.SyncActionState.Failed:u[e].actionState;l.push((0,A.setMutationToSyncAction)(m[t][e],n,m[t][e].actionName,c||null===(v=u[e].orphanModel)||void 0===v?void 0:v.modelId,c||null===(I=u[e].orphanModel)||void 0===I?void 0:I.modelType))}}const b=y,M=null==b?null:(0,w.daysDiff)((0,w.unixTimeMs)(),b);__LOG__(2)`syncd: max timestamp from recent patch: ${null!=M?M:"n/a"} days agp`,o&&(yield(0,a.getDbImpls)().writeSyncdLog(e,`max timestamp from recent patch: ${null!=M?M:"n/a"} days ago`));const P=l.reduce(((e,t)=>{const n=t.actionState;return null==e[n]&&(e[n]=0),e[n]++,e}),{});return null==r||r.mark("apply_set_mutations_end",(0,i.default)({source:n,collectionName:e,count:p.length},P)),(0,T.reportSyncdCriticalBootstrapStage)(T.SyncdCriticalBootstrapStageType.APPLIED_MUTATIONS),__LOG__(2)`syncd: completed apply set mutations for ${e}  ${s}`,{setMutationsToPersist:l,pendingMutationsToDrop:_}}))).apply(this,arguments)}function ae(){return se.apply(this,arguments)}function se(){return(se=(0,o.default)((function*(e,t){const{supportedMutations:n}=le(t),r=de(n);__LOG__(2)`syncd: before apply remove mutations for ${e}`;for(let t=0;t<r.length;t++){const n=r[t][0].actionHandler;yield n.applyMutations(r[t].map((t=>({operation:"remove",indexParts:pe(e,t.index)}))),{setMutationsPendingToPersist:[],allSupportedSetMutations:[]})}__LOG__(2)`syncd: after apply remove mutations for ${e}`}))).apply(this,arguments)}function le(e){const t=e.map((e=>{if(e.version>(0,v.maxSupportedVersion)())return{unsupported:e};const t=pe(e.collection,e.index),n=E.Actions.cast(t[0]);if(!n)return __LOG__(3)`syncd: invalid action ${t[0]}`,{unsupported:e};const r=(0,v.getActionHandler)(n);if(!r)return __LOG__(3)`syncd: no handler for action ${n}`,{unsupported:e};return{supported:{collection:e.collection,index:e.index,indexMac:e.indexMac,keyId:e.keyId,binarySyncData:e.binarySyncData,valueMac:e.valueMac,version:e.version,indexArr:t,actionName:n,actionHandler:r}}})),n=[],r=[];return t.map((e=>{let{supported:t,unsupported:i}=e;null!=t?n.push(t):null!=i&&r.push(i)})),{supportedMutations:n,unsupportedMutations:r}}function ue(e){const t=e.filter((e=>e.operation===_.SyncdMutation$SyncdOperation.SET)),n=new Set(t.map((e=>e.index)));return e.filter((e=>e.operation===_.SyncdMutation$SyncdOperation.REMOVE)).forEach((e=>{n.has(e.index)||t.push(e)})),t}function ce(e,t){const n=t.map((t=>{if(t.version>(0,v.maxSupportedVersion)())return{unsupported:t};const n=pe(e,t.index),r=E.Actions.cast(n[0]);if(!r)return __LOG__(3)`syncd: invalid action ${n[0]}`,{unsupported:t};const i=(0,v.getActionHandler)(r);return i?{supported:{collection:t.collection,index:t.index,indexMac:t.indexMac,keyId:t.keyId,timestamp:t.timestamp,binarySyncData:t.binarySyncData,valueMac:t.valueMac,version:t.version,indexArr:n,actionName:r,actionHandler:i}}:(__LOG__(3)`syncd: no handler for action ${r}`,{unsupported:t})})),r=[],i=[];return n.map((e=>{let{supported:t,unsupported:n}=e;null!=t?r.push(t):null!=n&&i.push(n)})),{supportedMutations:r,unsupportedMutations:i}}function de(e){return e.reduce(((e,t)=>(0!==e.length&&t.actionName===e[e.length-1][0].actionName?e[e.length-1].push(t):e.push([t]),e)),[])}function pe(e,t){try{const e=JSON.parse(t);if(e.length<1)throw(0,l.default)();return e}catch(t){throw(0,b.reportSyncdFatalError)(b.SyncdFatalErrorType.INVALID_ACTION_INDEX,e),new S.SyncdFatalError("invalid action index")}}},51768:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedUploadMutationsToSyncActions=function(e,t){return e.map((e=>{const n=s(e.binarySyncAction);return{index:e.index,action:e.action,binarySyncData:n,actionState:t,version:e.version,keyId:e.keyId,indexMac:e.indexMac,valueMac:e.valueMac,collection:e.collection,timestamp:e.timestamp}}))},t.setMutationToSyncAction=function(e,t,n,r,i){return{index:e.index,binarySyncData:e.binarySyncData,version:e.version,keyId:e.keyId,indexMac:e.indexMac,valueMac:e.valueMac,collection:e.collection,timestamp:e.timestamp,action:n,actionState:t,modelId:r,modelType:null!=i?i:void 0}},t.syncActionToSyncData=s,t.syncActionsToDecryptedMutation=function(e){return e.map((e=>({collection:e.collection,index:e.index,action:e.action,indexMac:e.indexMac,keyId:e.keyId,operation:r.SyncdMutation$SyncdOperation.SET,binarySyncData:e.binarySyncData,valueMac:e.valueMac,version:e.version})))};var r=n(91866),i=n(91205),o=n(33655),a=n(86881);function s(e){const t=(0,o.decodeProtobuf)(i.SyncActionValueSpec,e);return(0,a.encodeProtobuf)(i.SyncActionDataSpec,{value:t}).readBuffer()}},39062:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(11504)),o=n(47958),a=n(71903),s=n(29987);class l{static loadStatesFromDb(){var e=this;return(0,i.default)((function*(){(yield(0,o.getAllCollectionVersionsInTransaction)()).forEach((t=>e.collectionStates.set(t.collection,{collection:t.collection,state:t.state,finiteFailureStartTime:t.finiteFailureStartTime})))}))()}static persistToDb(){const e=[];return this.collectionStates.forEach((t=>e.push(t))),__LOG__(2)`syncd: state machine persistToDb. states:`,e.forEach((e=>{const t=null==e.finiteFailureStartTime?"":`(failure start: ${e.finiteFailureStartTime})`;__LOG__(2)`syncd: ${e.collection}: ${e.state} ${t}`})),(0,o.bulkUpdateCollectionVersionInTransaction)(e)}static clean(){this.collectionStates=new Map}static getCollectionState(e){const t=this.collectionStates.get(e);return t?t.state:(this.moveCollectionsToUpToDate([e]),a.CollectionSyncState.UpToDate)}static getCollectionsInStateDirty(){const e=[];return this.collectionStates.forEach((t=>{t.state===a.CollectionSyncState.Dirty&&e.push(t.collection)})),e}static getCollectionsInStateRetry(){const e=[];return this.collectionStates.forEach((t=>{t.state===a.CollectionSyncState.FailingFiniteRetry&&e.push(t.collection)})),e}static getCollectionsInStateFatal(){const e=[];return this.collectionStates.forEach((t=>{t.state===a.CollectionSyncState.Fatal&&e.push(t.collection)})),e}static getCollectionsInStateBlocked(){const e=[];return this.collectionStates.forEach((t=>{t.state===a.CollectionSyncState.Blocked&&e.push(t.collection)})),e}static moveCollectionsToUpToDate(e){e.forEach((e=>this.collectionStates.set(e,{collection:e,state:a.CollectionSyncState.UpToDate,finiteFailureStartTime:void 0})))}static moveCollectionsToDirty(e){e.forEach((e=>{var t;return this.collectionStates.set(e,{collection:e,state:a.CollectionSyncState.Dirty,finiteFailureStartTime:null===(t=this.collectionStates.get(e))||void 0===t?void 0:t.finiteFailureStartTime})}))}static moveCollectionsToFiniteRetry(e){e.forEach((e=>{var t,n;return this.collectionStates.set(e,{collection:e,state:a.CollectionSyncState.FailingFiniteRetry,finiteFailureStartTime:null!==(t=null===(n=this.collectionStates.get(e))||void 0===n?void 0:n.finiteFailureStartTime)&&void 0!==t?t:(0,s.unixTimeMs)()})}))}static moveCollectionsToFatal(e){e.forEach((e=>this.collectionStates.set(e,{collection:e,state:a.CollectionSyncState.Fatal})))}static moveCollectionsToBlocked(e){e.forEach((e=>{var t;return this.collectionStates.set(e,{collection:e,state:a.CollectionSyncState.Blocked,finiteFailureStartTime:null===(t=this.collectionStates.get(e))||void 0===t?void 0:t.finiteFailureStartTime})}))}static getExpiredCollections(){const e=[];return this.collectionStates.forEach((t=>{if(t.state===a.CollectionSyncState.FailingFiniteRetry){let n;null==t.finiteFailureStartTime?(n=1/0,__LOG__(3)`Collection ${t.collection} is in finite retry state with no failure start time`):n=t.finiteFailureStartTime;n+a.FINITE_FAILURE_EXPIRY_DURATION<(0,s.unixTimeMs)()&&e.push(t.collection)}})),e}static getCollectionMinFailureTime(){const e=Array.from(this.collectionStates.values()).filter((e=>e.state===a.CollectionSyncState.FailingFiniteRetry)).map((e=>e.finiteFailureStartTime)).filter(Boolean);return 0===e.length?null:Math.min(...e)}}t.default=l,l.collectionStates=new Map},85237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeExternalBlobReference=function(e,t){try{return(0,s.decodeProtobuf)(r.ExternalBlobReferenceSpec,t)}catch(t){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED,e),new o.SyncdFatalError("external blob reference protobuf deserialization failed")}},t.decodeSyncActionData=function(e,t){try{return(0,s.decodeProtobuf)(i.SyncActionDataSpec,t)}catch(t){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED,e),new o.SyncdFatalError("action data protobuf deserialization failed")}},t.decodeSyncdMutations=function(e,t){try{return(0,s.decodeProtobuf)(r.SyncdMutationsSpec,t)}catch(t){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED,e),new o.SyncdFatalError("mutations protobuf deserialization failed")}},t.decodeSyncdPatch=function(e,t){try{return(0,s.decodeProtobuf)(r.SyncdPatchSpec,t)}catch(t){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.PATCH_PROTOBUF_DESERIALIZATION_FAILED,e),new o.SyncdFatalError("patch protobuf deserialization failed")}},t.decodeSyncdSnapshot=function(e,t){try{return(0,s.decodeProtobuf)(r.SyncdSnapshotSpec,t)}catch(t){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED,e),new o.SyncdFatalError("snapshot protobuf deserialization failed")}};var r=n(91866),i=n(91205),o=n(21061),a=n(78761),s=n(33655)},93532:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.tryDecryptPatch=function(e,t){return Promise.all(t.mutations.map((t=>A(e,t.operation,t.record))))},t.tryDecryptSnapshot=function(e,t){return Promise.all(t.records.map((t=>A(e,s.SyncdMutation$SyncdOperation.SET,t))))};var i=r(n(11504)),o=n(58117),a=n(44379),s=n(91866),l=n(94678),u=n(58508),c=n(49982),d=n(85237),p=n(21061),f=n(77758),_=n(78761),g=r(n(18213));const h=(0,n(75556).newTextDecoder)();function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t,n){const r=n.keyId.id,i=yield(0,f.getKeyData)(r);if(!i){if(t===s.SyncdMutation$SyncdOperation.REMOVE)throw yield(0,o.getDbImpls)().writeSyncdLog(e,"exception: no key data for remove mutations"),new p.SyncdFatalError("no key data for remove mutations");throw new p.SyncdMissingKeyError}const{syncAction:a,indexMac:l,valueMac:u,indexValueBinary:c}=yield E(e,r,i,t,n),{index:d,version:_}=a;return{index:h.decode(d),action:null,version:_,keyId:r,operation:t,indexMac:l,valueMac:u,collection:e,binarySyncData:c}}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t,n,r,i){const o=i.index.blob,s=i.value.blob,f=(0,l.valueMacFromIndexAndValueCipherText)(s),h=(0,c.split)(s,u.IV_LENGTH,s.byteLength-u.MAC_LENGTH-u.IV_LENGTH),A=h[0],m=h[1],E=h[2],y=yield(0,l.generateEncryptionKeys)(n),{indexKey:S,valueEncryptionKey:v,valueMacKey:I}=y,T=(0,c.combine)([A,m]),b=(0,l.generateAssociatedData)(r,t),M=yield(0,l.generateMac)(b,T,I);if(!(0,a.arrayBuffersEqual)(E,M))throw(0,_.reportSyncdFatalError)(_.SyncdFatalErrorType.DECRYPTION_FAILED,e),new p.SyncdFatalError("decryption failure: valueMAC mismatch");const P=yield(0,l.decryptCipherText)(new Uint8Array(A),v,m),C=(0,d.decodeSyncActionData)(e,P),O=g.default.validateSyncActionDataProtobuf(e,C),R=yield(0,l.generateIndexMac)(S,O.index);if(!(0,a.arrayBuffersEqual)(o,R))throw(0,_.reportSyncdFatalError)(_.SyncdFatalErrorType.DECRYPTION_FAILED,e),new p.SyncdFatalError("decryption failure: indexMAC mismatch");return{syncAction:O,indexMac:o,valueMac:f,indexValueBinary:P}}))).apply(this,arguments)}},19748:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.downloadExternalPatch=function(){return u.apply(this,arguments)},t.downloadSnapshot=function(){return l.apply(this,arguments)};var i=r(n(11504)),o=n(58117),a=n(85237),s=r(n(58697));function l(){return(l=(0,i.default)((function*(e,t){const n=yield(0,o.getDbImpls)().downloadSyncBlob(t,"snapshot",e),r=(0,a.decodeSyncdSnapshot)(e,n);return s.default.validateSnapshotProtobuf(e,r)}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e,t){const n=yield(0,o.getDbImpls)().downloadSyncBlob(t,"patch",e);return(0,a.decodeSyncdMutations)(e,n).mutations.map((t=>s.default.validateMutationProtobuf(e,t)))}))).apply(this,arguments)}},43658:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.resolveConflict=function(){return c.apply(this,arguments)};var i=r(n(11504)),o=n(75285),a=n(71903),s=n(14468);function l(){return u.apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e,t){const n=yield Promise.all(e.map(function(){var e=(0,i.default)((function*(e){const n=t.get(e.index);if(n){const t=e.actionHandler;return{remoteMutationIndex:e.index,conflictResolutionState:yield t.resolveConflicts(n,e)}}}));return function(){return e.apply(this,arguments)}}())),r=new Map;return n.forEach((e=>{e&&r.set(e.remoteMutationIndex,e.conflictResolutionState)})),r}))).apply(this,arguments)}function c(){return(c=(0,i.default)((function*(e,t){const n=[];let r=[];const i=yield(0,o.getSyncPendingMutationsByCollectionInTransaction)(e),u=new Map(i.map((e=>[e.index,e]))),c=yield l(t,u);t.forEach((e=>{const t=c.get(e.index);if(t)switch(t){case a.ConflictResolutionState.SkipRemote:break;case a.ConflictResolutionState.ApplyRemoteAndDropLocal:n.push(e),r=r.concat(i.filter((t=>t.index===e.index)));break;case a.ConflictResolutionState.SkipRemoteAndDropLocal:r=r.concat(i.filter((t=>t.index===e.index)))}else n.push(e)}));const d=(0,s.sort)(n),p=[];for(let e=0;e<d.length;e++){const t=d[e].actionHandler;(yield t.dropMutationDueToCrossIndexConflict(d[e],u))||p.push(d[e])}return{remoteMutationsToApply:p,pendingMutationsToDrop:r.map((e=>e.id)).filter(Boolean)}}))).apply(this,arguments)}},14468:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t._setDependency=function(e,t){s.set(e,t)},t.sort=function(e){const t=[],n=[];try{return e.forEach((r=>{t.push(r);const i=s.get(r.actionName);null!=i&&e.forEach((e=>{e!==r&&i.includes(e.actionName)&&function(e,t){const n=e.actionHandler.getChatJidAndMessageKey(e),r=t.actionHandler.getChatJidAndMessageKey(t);if(n&&r)return n.chatJid===r.chatJid&&(null==n.messageKey||null==r.messageKey||n.messageKey===r.messageKey);return!1}(e,r)&&(e.timestamp<r.timestamp?n.push([e,r]):n.push([r,e]))}))})),a.default.array(t,n)}catch(e){throw(0,o.reportSyncdFatalError)(o.SyncdFatalErrorType.CYCLIC_MUTATION_DEPENDENCY_IN_PATCH),new i.SyncdFatalError("cyclic mutation dependency in patch")}};var i=n(21061),o=n(78761),a=r(n(50944));const s=new Map},21648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndTypeSetMutations=function(e,t){return t.map((t=>{const n=(0,u.decodeProtobuf)(o.SyncActionDataSpec,t.binarySyncData).value;if(!n)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_ACTION_VALUE,e),new s.SyncdFatalError("missing action value");const i=(0,r.maybeNumberOrThrowIfTooLarge)(n.timestamp);if(null==i)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_ACTION_TIMESTAMP,e),new s.SyncdFatalError("missing action timestamp");return{index:t.index,version:t.version,keyId:t.keyId,indexMac:t.indexMac,valueMac:t.valueMac,collection:t.collection,binarySyncData:t.binarySyncData,timestamp:i}}))},t.validateNoDuplicatePatchVersionInCollection=function(e,t){const n=new Set;t.forEach((t=>{const r=t.version.version;if(n.has(r))throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.DUPLICATE_PATCH_VERSION_IN_COLLECTION,e),new s.SyncdFatalError("duplicate patch version in collection");n.add(r)}))},t.validateNoSameIndexForMultipleMutations=function(e,t,n){const r=new Set,o=new Set;t.forEach((t=>{let u=!1;if(t.operation===i.SyncdMutation$SyncdOperation.SET&&(r.has(t.index)?u=!0:r.add(t.index)),t.operation===i.SyncdMutation$SyncdOperation.REMOVE&&(o.has(t.index)?u=!0:o.add(t.index)),u)switch(n){case a.SyncDataType.Patch:throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH,e),new s.SyncdFatalError("same index for multiple mutations in patch");case a.SyncDataType.Snapshot:throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT,e),new s.SyncdFatalError("same index for multiple mutations in snapshot");case a.SyncDataType.Local:__LOG__(3)`validation not required for local mutations`}}))};var r=n(22101),i=n(91866),o=n(91205),a=n(71903),s=n(21061),l=n(78761),u=n(33655)},58697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(58117),i=n(22101),o=n(91205),a=n(21061),s=n(93189),l=n(78761),u=n(33655);class c{static validateSnapshotProtobuf(e,t){const{version:n,records:r,mac:o,keyId:s}=t,u=null==n?void 0:n.version;if(!n||null==u)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_SNAPSHOT_VERSION,e),new a.SyncdFatalError("missing snapshot version");const d=r.map((t=>c.validateRecordProtobuf(e,t)));if(!o)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_SNAPSHOT_MAC,e),new a.SyncdFatalError("missing snapshot mac");const p=c.validateKeyIdProtobuf(e,s,l.SyncdFatalErrorType.MISSING_SNAPSHOT_KEY_ID);return{version:{version:(0,i.numberOrThrowIfTooLarge)(u)},records:d,mac:o,keyId:p}}static validatePatchProtobuf(e,t){const{version:n,mutations:s,externalMutations:d,snapshotMac:p,patchMac:f,keyId:_,exitCode:g,deviceIndex:h,clientDebugData:A}=t,m=null==n?void 0:n.version;if(!n||null==m)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_PATCH_VERSION,e),new a.SyncdFatalError("missing patch version");if(s&&s.length>0&&d)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS,e),new a.SyncdFatalError("patch with both inline and external mutations");if(!p)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_PATCH_SNAPSHOT_MAC,e),new a.SyncdFatalError("missing patch snapshot mac");if(!f)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_PATCH_MAC,e),new a.SyncdFatalError("missing patch mac");const E=c.validateKeyIdProtobuf(e,_,l.SyncdFatalErrorType.MISSING_PATCH_KEY_ID);let y;const S=(0,r.getConfig)().syncdShouldParsePatchDebugData();if(null!=A&&S&&(y=(0,u.decodeProtobuf)(o.PatchDebugDataSpec,A)),d){const t=c.validateExternalBlobReference(e,d);return{version:{version:(0,i.numberOrThrowIfTooLarge)(m)},mutations:void 0,externalMutations:t,snapshotMac:p,patchMac:f,keyId:E,deviceIndex:h,clientDebugData:y}}const v=s.map((t=>c.validateMutationProtobuf(e,t)));return{version:{version:(0,i.numberOrThrowIfTooLarge)(m)},mutations:v,externalMutations:void 0,exitCode:g,snapshotMac:p,patchMac:f,keyId:E,deviceIndex:h,clientDebugData:y}}static validateExternalBlobReference(e,t){const{mediaKey:n,directPath:r,handle:i,fileSizeBytes:o,fileSha256:s,fileEncSha256:u}=t;if(!n)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY,e),new a.SyncdFatalError("missing external blob reference media key");if(null==r)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH,e),new a.SyncdFatalError("missing external blob reference direct path");if(!s)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256,e),new a.SyncdFatalError("missing external blob reference file SHA256");if(!u)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256,e),new a.SyncdFatalError("missing external blob reference file enc SHA256");return{mediaKey:n,directPath:r,handle:i,fileSizeBytes:o,fileSha256:s,fileEncSha256:u}}static validateMutationProtobuf(e,t){const{operation:n,record:r}=t;if(null==n)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_MUTATION_OPERATION,e),new a.SyncdFatalError("missing mutation operation");if(!r)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_MUTATION_RECORD,e),new a.SyncdFatalError("missing mutation record");return{operation:n,record:c.validateRecordProtobuf(e,r)}}static validateRecordProtobuf(e,t){const{index:n,value:r,keyId:i}=t,o=null==n?void 0:n.blob,s=null==r?void 0:r.blob;if(!n||!o)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_MUTATION_INDEX,e),new a.SyncdFatalError("missing mutation index");if(!r||!s)throw(0,l.reportSyncdFatalError)(l.SyncdFatalErrorType.MISSING_MUTATION_VALUE,e),new a.SyncdFatalError("missing mutation value");return{index:{blob:o},value:{blob:s},keyId:c.validateKeyIdProtobuf(e,i,l.SyncdFatalErrorType.MISSING_MUTATION_KEY_ID)}}static validateKeyIdProtobuf(e,t,n){const r=null==t?void 0:t.id;if(!t||!r)throw(0,l.reportSyncdFatalError)(n,e),new a.SyncdFatalError("missing mutation key id");return{id:(0,s.toSyncKeyId)(r)}}}t.default=c},18213:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(21061),i=n(78761);t.default=class{static validateSyncActionDataProtobuf(e,t){const{index:n,value:o,padding:a,version:s}=t;if(!n)throw(0,i.reportSyncdFatalError)(i.SyncdFatalErrorType.MISSING_ACTION_INDEX,e),new r.SyncdFatalError("missing action index");if(null==s)throw(0,i.reportSyncdFatalError)(i.SyncdFatalErrorType.MISSING_ACTION_VERSION,e),new r.SyncdFatalError("missing action version");return{index:n,value:o,padding:a,version:s}}}},94678:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptCipherText=function(e,t,n){return(0,o.aesCbcDecrypt)(t,e,n)},t.generateAssociatedData=function(e,t){const n=(0,_.fromSyncKeyId)(t);let r;switch(e){case c.SyncdMutation$SyncdOperation.SET:r=d.OPERATION_SET_HEX;break;case c.SyncdMutation$SyncdOperation.REMOVE:r=d.OPERATION_REMOVE_HEX}if(r){const e=new Uint8Array([parseInt(r,16)]).buffer,t=new Uint8Array(e.byteLength+n.byteLength);return t.set(new Uint8Array(e)),t.set(new Uint8Array(n),e.byteLength),t.buffer}throw(0,l.default)("invalid mutation operation value")},t.generateCipherText=function(e,t,n){return(0,o.aesCbcEncrypt)(t,n,e)},t.generateEncryptionKeys=void 0,t.generateIndexMac=function(e,t){return(0,s.hmacSha256)(new Uint8Array(e),new Uint8Array(t))},t.generateMac=function(e,t,n){const r=new Uint8Array(d.OCTET_LENGTH);r.set([e.byteLength],r.byteLength-1);const i=(0,f.combine)([e,t,r.buffer]);return(0,s.hmacSha512)(n,i,d.MAC_LENGTH)},t.generatePadding=function(e,t){const n=Math.max(0,d.MAX_OF_MIN_DATA_LENGTH-e-t),r=new Uint8Array(n);return(0,a.getCrypto)().getRandomValues(r),r.buffer},t.generatePatchMac=function(e,t,n,r,i){return(0,s.hmacSha256)(e,(0,f.combine)([t,...n,r,i]))},t.generateSnapshotMac=function(e,t,n,r){return(0,s.hmacSha256)(e,(0,f.combine)([t,n,r]))},t.valueMacFromIndexAndValueCipherText=function(e){const t=e.byteLength;return new Uint8Array(e).slice(t-d.MAC_LENGTH).buffer};var i=n(62089),o=n(2379),a=n(47784),s=n(83599),l=r(n(82065)),u=n(45753),c=n(91866),d=n(58508),p=n(53428),f=n(49982),_=n(93189);const g=(0,u.memoizeWithArgs)(p.generateEncryptionKeysUnmemoized,(e=>(0,i.encodeB64)((0,_.fromSyncKeyData)(e))));t.generateEncryptionKeys=g},58508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALUE_MAC_KEY_LENGTH=t.VALUE_MAC_KEY_END=t.VALUE_ENCRYPTION_KEY_LENGTH=t.VALUE_ENCRYPTION_KEY_END=t.SNAPSHOT_MAC_KEY_LENGTH=t.SNAPSHOT_MAC_KEY_END=t.PATCH_MAC_KEY_LENGTH=t.PATCH_MAC_KEY_END=t.OPERATION_SET_HEX=t.OPERATION_REMOVE_HEX=t.OCTET_LENGTH=t.MAX_OF_MIN_DATA_LENGTH=t.MAC_LENGTH=t.IV_LENGTH=t.INDEX_KEY_LENGTH=t.INDEX_KEY_END=t.HKDF_INFO=t.EMPTY_MUTATION_MAC=t.DERIVED_KEY_LENGTH=void 0;t.HKDF_INFO="WhatsApp Mutation Keys";t.DERIVED_KEY_LENGTH=160;t.INDEX_KEY_LENGTH=32;t.VALUE_ENCRYPTION_KEY_LENGTH=32;t.VALUE_MAC_KEY_LENGTH=32;t.SNAPSHOT_MAC_KEY_LENGTH=32;t.PATCH_MAC_KEY_LENGTH=32;t.INDEX_KEY_END=32;t.VALUE_ENCRYPTION_KEY_END=64;t.VALUE_MAC_KEY_END=96;t.SNAPSHOT_MAC_KEY_END=128;t.PATCH_MAC_KEY_END=160;t.OPERATION_SET_HEX="0x01";t.OPERATION_REMOVE_HEX="0x02";t.MAX_OF_MIN_DATA_LENGTH=0;t.MAC_LENGTH=32;t.OCTET_LENGTH=8;t.IV_LENGTH=16;const n=new ArrayBuffer(32);t.EMPTY_MUTATION_MAC=n},53428:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.generateEncryptionKeysUnmemoized=function(){return l.apply(this,arguments)};var i=r(n(11504)),o=n(70238),a=n(58508),s=n(93189);function l(){return(l=(0,i.default)((function*(e){const t=yield u(e);return{indexKey:t.slice(0,a.INDEX_KEY_END),valueEncryptionKey:t.slice(a.INDEX_KEY_END,a.VALUE_ENCRYPTION_KEY_END),valueMacKey:t.slice(a.VALUE_ENCRYPTION_KEY_END,a.VALUE_MAC_KEY_END),snapshotMacKey:t.slice(a.VALUE_MAC_KEY_END,a.SNAPSHOT_MAC_KEY_END),patchMacKey:t.slice(a.SNAPSHOT_MAC_KEY_END,a.PATCH_MAC_KEY_END)}}))).apply(this,arguments)}function u(e){return(0,o.extractAndExpand)((0,s.fromSyncKeyData)(e),a.HKDF_INFO,a.DERIVED_KEY_LENGTH)}},49982:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.arrayBufferToHexPadded=function(e){return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")},t.combine=function(e){if(0===e.length)throw(0,o.default)("buffers length is zero");if(1===e.length)return e[0];const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t)),n=new Uint8Array(t);let r,i=0;for(r=0;r<e.length;r++)n.set(new Uint8Array(e[r]),i),i+=e[r].byteLength;return n.buffer},t.hexToUint8Array=function(e){return Uint8Array.from(e.split(" ").map((e=>parseInt(e,16))))},t.split=function(e,t,n){if(t<0||n<0)throw(0,o.default)("buffers length is zero");const r=new Array(3),i=new Uint8Array(e);return r[0]=i.slice(0,t).buffer,r[1]=i.slice(t,t+n).buffer,r[2]=i.slice(t+n).buffer,r},t.syncKeyIdToHex=function(e){return Array.from(new Uint8Array((0,a.fromSyncKeyId)(e))).map((e=>e.toString(16))).toString().replace(/,/g," ")},t.syncKeyIdsEqual=function(e,t){return(0,i.arrayBuffersEqual)((0,a.fromSyncKeyId)(e),(0,a.fromSyncKeyId)(t))},t.to64BitNetworkOrder=function(e){const t=new ArrayBuffer(8);return new DataView(t).setUint32(4,e,!1),t},t.toUtf8=function(e){return s.encode(e)};var i=n(44379),o=r(n(82065)),a=n(93189);const s=(0,n(75556).newTextEncoder)()},10539:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.handleMissingKeysInPatches=function(){return _.apply(this,arguments)},t.handleMissingKeysInSnapshot=function(){return f.apply(this,arguments)},t.requestAllMissingKeys=function(){return A.apply(this,arguments)};var i=r(n(11504)),o=n(58117),a=n(34027),s=n(90485),l=n(49982),u=n(21061),c=n(93189),d=n(7934);const p=(0,c.toSyncKeyId)(new ArrayBuffer(0));function f(){return(f=(0,i.default)((function*(e,t){const n=new Set,r=(yield(0,s.getAllSyncKeysInTransaction)()).map((e=>(0,l.syncKeyIdToHex)(e.keyId)));t.records.forEach((e=>{const t=e.keyId.id;if((0,l.syncKeyIdsEqual)(t,p))throw new u.SyncdFatalError("snapshot has empty key");const i=(0,l.syncKeyIdToHex)(t);r.includes(i)||n.add(i)})),__LOG__(2)`syncd: collection ${e}'s snapshot has missing keys ${Array.from(n)}`,yield g(n)}))).apply(this,arguments)}function _(){return(_=(0,i.default)((function*(e,t){const n=new Set,r=(yield(0,s.getAllSyncKeysInTransaction)()).map((e=>(0,l.syncKeyIdToHex)(e.keyId)));t.forEach((e=>{const t=e.keyId.id;if((0,l.syncKeyIdsEqual)(t,p))throw new u.SyncdFatalError("syncd: patch has empty key. patch device id: ${p.deviceIndex}");const i=(0,l.syncKeyIdToHex)(t);r.includes(i)||(__LOG__(2)`syncd: handleMissingKeysInPatches: missing key: keyId: ${i}, patch version: ${e.version.version}, patch device id: ${e.deviceIndex}`,n.add(i))})),__LOG__(2)`syncd: collection ${e}'s patches has missing keys ${Array.from(n)}`,yield g(n)}))).apply(this,arguments)}function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){if("idle"!==(0,o.getConfig)().offlineProcessingState())return void __LOG__(2)`syncd: _handleMissingKeys: skipping due to resume from restart in progress`;const t=Array.from(e);__LOG__(2)`syncd: _handleMissingKeys: missing keys [${t}]`;const n=new Set((yield(0,a.bulkGetMissingKeysInTransaction)(t)).filter(Boolean).map((e=>e.keyHex))),r=t.filter((e=>!n.has(e)));if(__LOG__(2)`syncd: _handleMissingKeys: missing keys after filter: [${r}]`,0===r.length)return Promise.resolve();const i=r.map((e=>(0,c.toSyncKeyId)((0,l.hexToUint8Array)(e).buffer))),s=yield(0,o.getDbImpls)().sendSyncdKeyRequest(i);yield(0,d.addMissingKeys)(i,s)}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){const e=yield(0,a.getAllMissingKeysInTransaction)();__LOG__(2)`syncd: requestAllMissingKeys: missing keys: [${e.map((e=>e.keyHex))}]`,0!==e.length&&(yield(0,o.getDbImpls)().sendSyncdKeyRequest(e.map((e=>e.keyId))))}))).apply(this,arguments)}},77758:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.clearSyncKeysCache=function(){l=new Map},t.getKeyData=function(){return u.apply(this,arguments)};var i=r(n(11504)),o=n(62089),a=n(90485),s=n(93189);let l=new Map;function u(){return(u=(0,i.default)((function*(e){var t;const n=(0,o.encodeB64)((0,s.fromSyncKeyId)(e));let r=l.get(n);return r?r.keyData:(r=yield(0,a.getSyncKeyInTransaction_DO_NOT_USE)(e),r&&l.set(n,r),null===(t=r)||void 0===t?void 0:t.keyData)}))).apply(this,arguments)}},80747:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveKey=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return f.enqueue((()=>_(e)))},t.getNewestKeyPair=h;var i=r(n(11504)),o=n(58117),a=r(n(82065)),s=n(90485),l=n(39528),u=n(49982),c=n(35229),d=n(70982),p=n(97978);const f=new l.PromiseQueue;function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=yield h(),n=yield(0,o.getDbImpls)().getDeviceFingerprint();let r=!1,i=!1;if(null!=t){if(r=(0,p.hasKeyExpired)(t),i=(0,p.hasADeviceBeenRemoved)(t,n),!e||!r&&!i)return{keyId:t.keyId,keyData:t.keyData}}else if(!e||(0,o.getConfig)().isCompanion())throw(0,a.default)("syncd: No sync key available");const l=(0,p.rotateKey)(n,t);return __LOG__(2)`syncd: stored key rotation key id ${(0,u.syncKeyIdToHex)(l.keyId)}`,yield(0,s.setSyncKeyInTransaction)(l),yield(0,o.getDbImpls)().sendSyncdKeyRotation([l]),r&&(__LOG__(2)`syncd: key rotation due to key expiry`,(0,d.reportSyncdKeyRotationEvent)(d.SyncdKeyRotationEventType.APP_STATE_SYNC_KEY_EXPIRY)),i&&(__LOG__(2)`syncd: key rotation due to device removal`,(0,d.reportSyncdKeyRotationEvent)(d.SyncdKeyRotationEventType.DEVICE_DEREGISTERATION)),null==t&&(__LOG__(2)`syncd: key rotation due to no key present`,(0,d.reportSyncdKeyRotationEvent)(d.SyncdKeyRotationEventType.NO_KEYS)),_(e)}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){const e=yield(0,s.getAllSyncKeysInTransaction)();if(0===e.length)return null;const t=e.map((e=>(0,c.getKeyEpoch)(e.keyId))),n=Math.max(...t),r=e.filter((e=>(0,c.getKeyEpoch)(e.keyId)===n)),i=r.map((e=>(0,c.getKeyDeviceId)(e.keyId))),o=Math.min(...i);return r[i.indexOf(o)]}))).apply(this,arguments)}},35229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateNewKeyEpoch=function(e){return i(e)+1},t.getKeyDeviceId=function(e){return new DataView((0,r.fromSyncKeyId)(e)).getUint16(0)},t.getKeyEpoch=i;var r=n(93189);function i(e){return new DataView((0,r.fromSyncKeyId)(e)).getUint32(2)}},93189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromSyncKeyData=function(e){return e},t.fromSyncKeyId=function(e){return e},t.toSyncKeyData=function(e){return e},t.toSyncKeyId=function(e){return e}},97978:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.hasADeviceBeenRemoved=function(e,t){const n=e.fingerprint,{rawId:r,currentIndex:i,deviceIndexes:o}=t,a=new Set(n.deviceIndexes);for(let e=n.currentIndex+1;e<=i;e++)a.add(e);return n.rawId!==r||!(0,p.default)(a,new Set(o))},t.hasKeyExpired=function(e){const t=e.timestamp,n=Math.min(90,Math.max(1,(0,o.getConfig)().syncdKeyMaxUseDays()));return(0,d.unixTimeMs)()-t>n*d.DAY_MILLISECONDS},t.rotateKey=function(e,t){const{keyId:n,keyEpoch:r}=function(e){let t;if(null==e){const e=new Uint8Array(16);(0,s.getCrypto)().getRandomValues(e),t=(0,u.generateNewKeyEpoch)((0,c.toSyncKeyId)(e.buffer))}else t=(0,u.generateNewKeyEpoch)(e.keyId);const n=(0,l.interpretAsNumber)((0,l.extractDeviceId)((0,o.getMyDeviceJid)()));return{keyId:(0,c.toSyncKeyId)(new Uint8Array((0,i.concatArrayBuffers)((0,a.intToBytes)(2,n).buffer,(0,a.intToBytes)(4,t).buffer)).buffer),keyEpoch:t}}(t),p=(0,c.toSyncKeyData)((0,s.getCrypto)().getRandomValues(new Uint8Array(32)).buffer),f=(0,d.unixTimeMs)();return{keyId:n,keyEpoch:r,keyData:p,fingerprint:e,timestamp:f}};var i=n(52210),o=n(58117),a=n(89738),s=n(47784),l=n(44037),u=n(35229),c=n(93189),d=n(29987),p=r(n(38916))},7934:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.addMissingKeys=function(){return I.apply(this,arguments)},t.hasExpiredKeys=E,t.setMissingKeyTimeoutInTransaction=_,t.updateMissingKeyDevices=function(){return f.apply(this,arguments)},t.updateMissingKeys=function(e,t){const n=[],r=[];return e.forEach((e=>{const t=e.keyData,i=(0,u.syncKeyIdToHex)(e.keyId);t?n.push(i):r.push(i)})),__LOG__(2)`syncd: updateMissingKeys from device ${t}
\tkeys with keyData: ${n}
\tkeys without keyData: ${r}`,(0,a.runInTransaction)({MissingKeyStore:!0},function(){var e=(0,i.default)((function*(e){let{MissingKeyStore:i}=e;if(n.length>0&&(yield i.bulkRemove(n),yield g({MissingKeyStore:i})),r.length>0){const e=(yield i.bulkGet(r)).filter(Boolean);e.forEach((e=>e.deviceResponses.set(t,!1))),__LOG__(2)`syncd: updateMissingKeys: begin updating missing keys from device ${t}
\tmissingKeys: [${r}]`,yield i.bulkUpdate(e),__LOG__(2)`syncd: updateMissingKeys: finish updating missing keys from device ${t}`,yield S({MissingKeyStore:i})}}));return function(){return e.apply(this,arguments)}}())};var i=r(n(11504)),o=n(90387),a=n(58117),s=n(34027),l=n(90485),u=n(49982),c=n(78761),d=n(29987);let p;function f(){return(f=(0,i.default)((function*(){const e=(yield(0,a.getDbImpls)().getDeviceFingerprint()).deviceIndexes;return(0,a.runInTransaction)({MissingKeyStore:!0},function(){var t=(0,i.default)((function*(t){let{MissingKeyStore:n}=t;const r=yield n.getAll();if(0===r.length)return Promise.resolve();r.forEach((t=>{t.deviceResponses.forEach(((n,r)=>{e.includes(r)||t.deviceResponses.delete(r)}))})),yield n.bulkUpdate(r),yield S({MissingKeyStore:n})}));return function(){return t.apply(this,arguments)}}())}))).apply(this,arguments)}function _(){return(0,a.runInTransaction)({MissingKeyStore:!0},(e=>{let{MissingKeyStore:t}=e;return g({MissingKeyStore:t})}))}function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){let{MissingKeyStore:t}=e;clearTimeout(p),p=null;const n=yield t.getAll();if(0===n.length)return;__LOG__(2)`syncd: _setMissingKeyTimeout: missing keys: ${n.map((e=>(0,u.syncKeyIdToHex)(e.keyId)))}`;const r=n.reduce(((e,t)=>e.timestamp<t.timestamp?e:t)),i=(0,a.getConfig)().syncdWaitForKeyTimeoutDays()*d.DAY_MILLISECONDS-(-r.timestamp+(0,d.unixTimeMs)());__LOG__(2)`syncd: earliest missing key: ${(0,u.syncKeyIdToHex)(r.keyId)}, timestamp=${r.timestamp}, timeoutMs=${i}`,p=setTimeout(A,i)}))).apply(this,arguments)}function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(){__LOG__(2)`syncd: _timeoutWhileWaitingForMissingKey`,(yield E())?((0,c.reportSyncdFatalError)(c.SyncdFatalErrorType.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY),__LOG__(4,void 0,new Error,!0)`syncd: fatal error: timeout while waiting for missing key`,SEND_LOGS("syncd fatal error: timeout while waiting for missing key"),(0,a.getDbImpls)().handleSyncdFatal()):__LOG__(2)`syncd: _timeoutWhileWaitingForMissingKey: no expired keys`}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(){__LOG__(2)`syncd: check if has expired keys`;const e=(yield(0,l.getAllSyncKeysInTransaction)()).map((e=>(0,u.syncKeyIdToHex)(e.keyId)));__LOG__(2)`syncd: all keys: ${e}`;const t=yield(0,s.getAllMissingKeysInTransaction)();__LOG__(2)`syncd: missing keys: ${t.map((e=>(0,u.syncKeyIdToHex)(e.keyId)))}`;const n=t.filter((t=>!e.includes(t.keyHex)));__LOG__(2)`syncd: actually missing keys: ${t.map((e=>(0,u.syncKeyIdToHex)(e.keyId)))}`;const r=n.filter((e=>(0,a.getConfig)().syncdWaitForKeyTimeoutDays()*d.DAY_MILLISECONDS<(0,d.unixTimeMs)()-e.timestamp));return __LOG__(2)`syncd: expired keys: ${r.map((e=>(0,u.syncKeyIdToHex)(e.keyId)))}`,r.length>0}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){let{MissingKeyStore:t}=e;const n=yield t.getAll();for(const e of n){let t=!0;for(const n of e.deviceResponses.values())if(null==n){t=!1;break}if(t)return __LOG__(4,void 0,new Error,!0)`syncd: fatal error: missing key on all clients`,SEND_LOGS("syncd: fatal error: missing key on all clients"),(0,c.reportSyncdFatalError)(c.SyncdFatalErrorType.MISSING_KEY_ON_ALL_CLIENTS),yield(0,o.asyncSleep)(5e3),void(0,a.getDbImpls)().handleSyncdFatal()}}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e,t){const n=()=>{const e=new Map;return t.forEach((t=>e.set(t,null))),e},r=e.map((e=>({keyHex:(0,u.syncKeyIdToHex)(e),keyId:e,timestamp:(0,d.unixTimeMs)(),deviceResponses:n()})));yield(0,s.bulkUpdateMissingKeysInTransaction)(r),yield _()}))).apply(this,arguments)}},70922:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdDecryptMutationsType=t.SyncdCriticalBootstrapStageType=void 0,t.convertSyncdCriticalBootstrapStageFromAnnotations=function(e){var t;const n=null==e||null===(t=e.string)||void 0===t?void 0:t.criticalBootstrapStage;if(null==n)return __LOG__(4,void 0,new Error)`syncd: missing bootstrap stage for critical bootstrap stage`,null;const r=s.cast(n);if(null==r)return __LOG__(4,void 0,new Error)`syncd: unknown bootstrap stage: ${n} for critical bootstrap stage`,null;return{type:r}},t.convertSyncdDecryptMutationsMetricsFromAnnotations=function(e){var t,n,r,i;const o=null==e||null===(t=e.string)||void 0===t?void 0:t.mutationType,a=null==e||null===(n=e.int)||void 0===n?void 0:n.count,s=null==e||null===(r=e.int)||void 0===r?void 0:r.totalAdditionalMessagesCount,u=null==e||null===(i=e.int_array)||void 0===i?void 0:i.messageRangeLengths;if(null==o)return __LOG__(4,void 0,new Error)`syncd: missing type for DecryptMutations`,null;if(null==a)return __LOG__(4,void 0,new Error)`syncd: missing count for DecryptMutations`,null;if(null==s)return __LOG__(4,void 0,new Error)`syncd: missing totalAdditionalMessagesCount for DecryptMutations`,null;if(null==u)return __LOG__(4,void 0,new Error)`syncd: missing decryptedMutationMessageRangeCountArray for DecryptMutations`,null;const c=l.cast(o);if(null==c)return __LOG__(4,void 0,new Error)`syncd: unknown SyncdDecryptMutationsType for DecryptMutations`,null;return{type:c,count:a,totalAdditionalMessagesCount:s,decryptedMutationMessageRangeCountArray:u}},t.reportSyncdCriticalBootstrapStage=u,t.reportSyncdDecryptedMutations=function(e,t){u(s.MUTATIONS_DECRYPTED),(0,i.startMetric)(r.PRE_METRIC.SYNCD_DECRYPT_MUTATIONS).endSuccess(function(e){const{type:t,mutations:n}=e;let r,i=0;const s=[];return n.forEach((e=>{const{binarySyncData:t}=e,n=(0,a.decodeProtobuf)(o.SyncActionDataSpec,t).value;null!=n&&(n.archiveChatAction?r=n.archiveChatAction.messageRange:n.markChatAsReadAction?r=n.markChatAsReadAction.messageRange:n.clearChatAction?r=n.clearChatAction.messageRange:n.deleteChatAction&&(r=n.deleteChatAction.messageRange),null!=r&&(i+=r.messages.length,s.push(r.messages.length)))})),{string:{mutationType:t},int:{count:n.length,totalAdditionalMessagesCount:i},int_array:{messageRangeLengths:s}}}({type:e,mutations:t}))};var r=n(89623),i=n(90649),o=n(91205),a=n(33655);const s=n(54302).Mirrored(["ABOUT_TO_APPLY_MUTATIONS","APPLIED_MUTATIONS","MUTATIONS_DECRYPTED","REQUEST_BUILT","RESPONSE_RECEIVED","RESPONSE_PARSED_VALID","ENTERED_RETRY_MODE","MISSING_KEYS_RECEIVED"]);t.SyncdCriticalBootstrapStageType=s;const l=n(54302).Mirrored(["PATCH_MUTATIONS","SNAPSHOT_MUTATIONS"]);function u(e){(0,i.startMetric)(r.PRE_METRIC.SYNCD_CRITICAL_BOOTSTRAP_STAGE).endSuccess({string:{criticalBootstrapStage:{type:e}.type}})}t.SyncdDecryptMutationsType=l},78761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdFatalErrorType=void 0,t.convertSyncdFatalErrorFromAnnotations=function(e){var t,n,r,i,s,l,u,c,d,p,f,_,g,h,A,m,E,y,S,v,I,T,b,M,P,C,O;const R=null==e||null===(t=e.string)||void 0===t?void 0:t.errorCode;if(null==R)return __LOG__(4,void 0,new Error)`syncd: missing error code for syncd fatal error`,null;const N=a.cast(R);if(null==N)return __LOG__(4,void 0,new Error)`syncd: unknown error code: ${R} for syncd fatal error`,null;return{type:N,collection:o.CollectionName.cast(null==e||null===(n=e.string)||void 0===n?void 0:n.collection),patchSnapshotMutationCount:null==e||null===(r=e.int)||void 0===r?void 0:r.patchSnapshotMutationCount,patchVersion:null==e||null===(i=e.int)||void 0===i?void 0:i.patchVersion,isFatal:null==e||null===(s=e.bool)||void 0===s?void 0:s.isFatal,isLtHashConsistent:null==e||null===(l=e.bool)||void 0===l?void 0:l.isLtHashConsistent,macFatalCollectionNameMismatch:null==e||null===(u=e.bool)||void 0===u?void 0:u.macFatalCollectionNameMismatch,macFatalCurrentLthashMismatch:null==e||null===(c=e.bool)||void 0===c?void 0:c.macFatalCurrentLthashMismatch,macFatalNewLthashMismatch:null==e||null===(d=e.bool)||void 0===d?void 0:d.macFatalNewLthashMismatch,macFatalPatchVersionMismatch:null==e||null===(p=e.bool)||void 0===p?void 0:p.macFatalPatchVersionMismatch,macFatalNewLthashSubtractMismatch:null==e||null===(f=e.bool)||void 0===f?void 0:f.macFatalNewLthashSubtractMismatch,macFatalNumberHasOverrideMutation:null==e||null===(_=e.bool)||void 0===_?void 0:_.macFatalNumberHasOverrideMutation,macFatalNumberNumAddMutation:null==e||null===(g=e.int)||void 0===g?void 0:g.macFatalNumberNumAddMutation,macFatalNumberNumRemoveMutation:null==e||null===(h=e.int)||void 0===h?void 0:h.macFatalNumberNumRemoveMutation,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:null==e||null===(A=e.bool)||void 0===A?void 0:A.macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch,isPatchSenderPrimary:null==e||null===(m=e.bool)||void 0===m?void 0:m.isPatchSenderPrimary,macFatalDidUseMacFetchFallback:null==e||null===(E=e.bool)||void 0===E?void 0:E.macFatalDidUseMacFetchFallback,macFatalHasMissingRemove:null==e||null===(y=e.bool)||void 0===y?void 0:y.macFatalHasMissingRemove,macFatalNumberAddMismatch:null==e||null===(S=e.bool)||void 0===S?void 0:S.macFatalNumberAddMismatch,macFatalNumberRemoveMismatch:null==e||null===(v=e.bool)||void 0===v?void 0:v.macFatalNumberRemoveMismatch,macFatalDidPreviousPatchFailPostSaveValidation:null==e||null===(I=e.bool)||void 0===I?void 0:I.macFatalDidPreviousPatchFailPostSaveValidation,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:null==e||null===(T=e.bool)||void 0===T?void 0:T.macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash,isPreviousPatchAnIncomingPatch:null==e||null===(b=e.bool)||void 0===b?void 0:b.isPreviousPatchAnIncomingPatch,isLastPatchSenderAPrimaryDevice:null==e||null===(M=e.bool)||void 0===M?void 0:M.isLastPatchSenderAPrimaryDevice,isSenderIndexSameAsPreviousSenderIndex:null==e||null===(P=e.bool)||void 0===P?void 0:P.isSenderIndexSameAsPreviousSenderIndex,didBootstrapFromSnapshot:null==e||null===(C=e.bool)||void 0===C?void 0:C.didBootstrapFromSnapshot,isThereAnotherSyncdCompanion:null==e||null===(O=e.bool)||void 0===O?void 0:O.isThereAnotherSyncdCompanion}},t.reportSyncdFatalError=function(e,t,n,o,a,s,l,u,c,d,p,f,_,g,h,A,m,E,y,S,v,I,T,b,M,P,C){(0,i.startMetric)(r.PRE_METRIC.SYNCD_FATAL_ERROR).endFail("syncd fatal error: "+e,function(e){const{type:t,collection:n,patchSnapshotMutationCount:r,patchVersion:i,isFatal:o,isLtHashConsistent:a,macFatalCollectionNameMismatch:s,macFatalCurrentLthashMismatch:l,macFatalNewLthashMismatch:u,macFatalPatchVersionMismatch:c,macFatalNewLthashSubtractMismatch:d,macFatalNumberHasOverrideMutation:p,macFatalNumberNumAddMutation:f,macFatalNumberNumRemoveMutation:_,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:g,isPatchSenderPrimary:h,macFatalDidUseMacFetchFallback:A,macFatalHasMissingRemove:m,macFatalNumberAddMismatch:E,macFatalNumberRemoveMismatch:y,macFatalDidPreviousPatchFailPostSaveValidation:S,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:v,isPreviousPatchAnIncomingPatch:I,isLastPatchSenderAPrimaryDevice:T,isSenderIndexSameAsPreviousSenderIndex:b,didBootstrapFromSnapshot:M,isThereAnotherSyncdCompanion:P}=e;return{string:{errorCode:t,collection:null==n?null:n},int:{patchSnapshotMutationCount:r,patchVersion:i,macFatalNumberNumAddMutation:f,macFatalNumberNumRemoveMutation:_},bool:{isFatal:o,isLtHashConsistent:a,macFatalCollectionNameMismatch:s,macFatalCurrentLthashMismatch:l,macFatalNewLthashMismatch:u,macFatalPatchVersionMismatch:c,macFatalNewLthashSubtractMismatch:d,macFatalNumberHasOverrideMutation:p,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:g,isPatchSenderPrimary:h,macFatalDidUseMacFetchFallback:A,macFatalHasMissingRemove:m,macFatalNumberAddMismatch:E,macFatalNumberRemoveMismatch:y,macFatalDidPreviousPatchFailPostSaveValidation:S,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:v,isPreviousPatchAnIncomingPatch:I,isLastPatchSenderAPrimaryDevice:T,isSenderIndexSameAsPreviousSenderIndex:b,didBootstrapFromSnapshot:M,isThereAnotherSyncdCompanion:P}}}({type:e,collection:t,patchSnapshotMutationCount:n,patchVersion:o,isFatal:a,isLtHashConsistent:s,macFatalCollectionNameMismatch:l,macFatalCurrentLthashMismatch:u,macFatalNewLthashMismatch:c,macFatalPatchVersionMismatch:d,macFatalNewLthashSubtractMismatch:p,macFatalNumberHasOverrideMutation:f,macFatalNumberNumAddMutation:_,macFatalNumberNumRemoveMutation:g,macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch:h,isPatchSenderPrimary:A,macFatalDidUseMacFetchFallback:m,macFatalHasMissingRemove:E,macFatalNumberAddMismatch:y,macFatalNumberRemoveMismatch:S,macFatalDidPreviousPatchFailPostSaveValidation:v,macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash:I,isPreviousPatchAnIncomingPatch:T,isLastPatchSenderAPrimaryDevice:b,isSenderIndexSameAsPreviousSenderIndex:M,didBootstrapFromSnapshot:P,isThereAnotherSyncdCompanion:C}))};var r=n(89623),i=n(90649),o=n(71903);const a=n(54302).Mirrored(["PATCH_PROTOBUF_SERIALIZATION_FAILED","MUTATIONS_PROTOBUF_SERIALIZATION_FAILED","ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED","ENCRYPTION_FAILED","MISSING_SNAPSHOT_VERSION","MISSING_SNAPSHOT_MAC","MISSING_SNAPSHOT_KEY_ID","MISSING_PATCH_VERSION","PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS","MISSING_PATCH_SNAPSHOT_MAC","MISSING_PATCH_MAC","MISSING_PATCH_KEY_ID","MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY","MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH","MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256","MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256","MISSING_MUTATION_OPERATION","MISSING_MUTATION_RECORD","MISSING_MUTATION_INDEX","MISSING_MUTATION_VALUE","MISSING_MUTATION_KEY_ID","EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED","SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED","PATCH_PROTOBUF_DESERIALIZATION_FAILED","MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED","ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED","MISSING_ACTION_INDEX","MISSING_ACTION_VERSION","SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT","SNAPSHOT_MAC_MISMATCH_IN_PATCH","MAC_MISMATCH_PATCH","DECRYPTION_FAILED","DUPLICATE_PATCH_VERSION_IN_COLLECTION","SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH","SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT","MISSING_ACTION_VALUE","MISSING_ACTION_TIMESTAMP","XMPP_BAD_REQUEST_FOR_COLLECTION","XMPP_NOT_FOUND_FOR_COLLECTION","CYCLIC_MUTATION_DEPENDENCY_IN_PATCH","SERVER_DID_NOT_SEND_ALL_PATCHES","TERMINAL_PATCH_MISSING_DATA","TERMINAL_PATCH_DESERIALIZATION_ERROR","TERMINAL_PATCH_UNKNOWN","INVALID_ACTION_INDEX","XMPP_BAD_REQUEST_GLOBAL_ERROR","XMPP_NOT_FOUND_GLOBAL_ERROR","XMPP_BAD_METHOD_GLOBAL_ERROR","XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR","TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D","TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY","MISSING_KEY_ON_ALL_CLIENTS"]);t.SyncdFatalErrorType=a},70982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdKeyRotationEventType=t.SyncdEventFlow=t.SyncdCriticalEventType=t.SyncdBootstrapDataAppliedSnapshotUsed=void 0,t.constructAnnotationsFromContext=c,t.convertSyncdBootstrapAppStateDownloadFromAnnotations=function(e){var t,n,r,i;const a=null==e||null===(t=e.string)||void 0===t?void 0:t.collection,s=null==e||null===(n=e.int)||void 0===n?void 0:n.downloadSize,l=null==e||null===(r=e.int)||void 0===r?void 0:r.downloadStartTs,u=null==e||null===(i=e.bool)||void 0===i?void 0:i.isSuccess;if(null==a)return __LOG__(4,void 0,new Error)`syncd: missing collection for bootstrap app state download metric`,null;if(null==l)return __LOG__(4,void 0,new Error)`syncd: missing downloadStartTs for bootstrap app state download metric`,null;if(null==u)return __LOG__(4,void 0,new Error)`syncd: missing isSuccess for bootstrap app state download metric`,null;const c=o.CollectionName.cast(a);if(null==c)return __LOG__(4,void 0,new Error)`syncd: unknown collection ${a} for bootstrap app state download metric`,null;return{collection:c,downloadStartTs:l,downloadSize:s,isSuccess:u?"success":"failure"}},t.convertSyncdBootstrapDataAppliedFromAnnotations=function(e){var t,n,r;const i=null==e||null===(t=e.string)||void 0===t?void 0:t.collection,a=null==e||null===(n=e.bool)||void 0===n?void 0:n.snapshot,l=null==e||null===(r=e.int)||void 0===r?void 0:r.durationMs;if(null==i)return __LOG__(4,void 0,new Error)`syncd: missing collection for bootstrap data applied event`,null;if(null==a)return __LOG__(4,void 0,new Error)`syncd: missing snapshotUsed for bootstrap data applied event`,null;if(null==l)return __LOG__(4,void 0,new Error)`syncd: missing durationMs for bootstrap data applied event`,null;const u=o.CollectionName.cast(i);if(null==u)return __LOG__(4,void 0,new Error)`syncd: unknown collection ${i} for bootstrap data applied event`,null;const c=a?s.SNAPSHOT_USED:s.SNAPSHOT_NOT_USED;return{collection:u,snapshotUsed:c,durationMs:l}},t.convertSyncdCriticalEventFromAnnotations=function(e){var t,n;const r=null==e||null===(t=e.string)||void 0===t?void 0:t.criticalEventCode;if(null==r)return __LOG__(4,void 0,new Error)`syncd: missing error code for critical event`,null;const i=a.cast(r);if(null==i)return __LOG__(4,void 0,new Error)`syncd: unknown error code: ${r} for critical event`,null;return{type:i,collection:o.CollectionName.cast(null==e||null===(n=e.string)||void 0===n?void 0:n.collection)}},t.convertSyncdKeyRotationEventFromAnnotations=function(e){var t;const n=null==e||null===(t=e.string)||void 0===t?void 0:t.keyRotationEventCode;if(null==n)return __LOG__(4,void 0,new Error)`syncd: missing error code for key rotation event`,null;const r=l.cast(n);if(null==r)return __LOG__(4,void 0,new Error)`syncd: unknown error code: ${n} for key rotation event`,null;return{type:r}},t.reportSyncdBootstrapAppStateDownloadMetric=function(e){const t=(0,i.startMetric)(r.PRE_METRIC.SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD);"success"!==e.isSuccess?t.endFail("syncd error: Error downloading snapshot or patches",u(e)):t.endSuccess(u(e))},t.reportSyncdBootstrapDataApplied=function(e,t,n){(0,i.startMetric)(r.PRE_METRIC.SYNCD_BOOTSTRAP_DATA_APPLIED).endSuccess((o={collection:e,snapshotUsed:t,durationMs:n},{string:{collection:o.collection},bool:{snapshot:o.snapshotUsed===s.SNAPSHOT_USED},int:{durationMs:o.durationMs}}));var o},t.reportSyncdCriticalEvent=function(e,t){(0,i.startMetric)(r.PRE_METRIC.SYNCD_CRITICAL_EVENT).endFail("syncd critical event: "+e,(n={type:e,collection:t},{string:{criticalEventCode:n.type,collection:null==n.collection?null:n.collection}}));var n},t.reportSyncdKeyRotationEvent=function(e){(0,i.startMetric)(r.PRE_METRIC.SYNCD_KEY_ROTATION).endSuccess((t={type:e},{string:{keyRotationEventCode:t.type}}));var t};var r=n(89623),i=n(90649),o=n(71903);const a=n(54302).Mirrored(["MISSING_MUTATION_TO_REMOVE"]);t.SyncdCriticalEventType=a;const s=n(54302).Mirrored(["SNAPSHOT_USED","SNAPSHOT_NOT_USED"]);t.SyncdBootstrapDataAppliedSnapshotUsed=s;const l=n(54302).Mirrored(["APP_STATE_SYNC_KEY_EXPIRY","DEVICE_DEREGISTERATION","NO_KEYS"]);function u(e){const{collection:t,downloadSize:n,downloadStartTs:r,isSuccess:i}=e;return{string:{collection:t},int:{downloadSize:n,downloadStartTs:r},bool:{isSuccess:"success"===i}}}function c(e){const t={};return Object.keys(e).forEach((n=>{"number"==typeof e[n]?(null==t.int&&(t.int={}),t.int[n]=e[n]):"string"==typeof e[n]&&(null==t.string&&(t.string={}),t.string[n]=e[n])})),Object.keys(t).length>0?t:void 0}t.SyncdKeyRotationEventType=l;t.SyncdEventFlow=class{constructor(){this.event=(0,i.startMetric)(r.PRE_METRIC.SYNCD)}end(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.event.endFail("syncd failed"):this.event.endSuccess()}mark(e,t){this.event.addPoint(e,c(t))}}},80005:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.addKeyRotationRemoveCount=function(e){if(0===e)return;l.keyRotationRemoveCount+=e,d()},t.addMutationCount=function(e){if(0===e)return;l.mutationCount+=e,d()},t.addUnsetActionCount=function(e){if(0===e)return;l.unsetActionCount+=e,d()},t.clear=c,t.convertAppStateSyncDailyFromAnnotations=function(e){var t,n,r,i,o,a,s,l;return{mutationCount:(null==e||null===(t=e.int)||void 0===t?void 0:t.mutationCount)||0,invalidActionCount:(null==e||null===(n=e.int)||void 0===n?void 0:n.invalidActionCount)||0,unsupportedActionCount:(null==e||null===(r=e.int)||void 0===r?void 0:r.unsupportedActionCount)||0,keyRotationRemoveCount:(null==e||null===(i=e.int)||void 0===i?void 0:i.keyRotationRemoveCount)||0,storedMutationCount:(null==e||null===(o=e.int)||void 0===o?void 0:o.storedMutationCount)||0,uploadConflictCount:(null==e||null===(a=e.int)||void 0===a?void 0:a.uploadConflictCount)||0,unsetActionCount:(null==e||null===(s=e.int)||void 0===s?void 0:s.unsetActionCount)||0,missingKeyCount:(null==e||null===(l=e.int)||void 0===l?void 0:l.missingKeyCount)||0}},t.forceCommitAppState=function(){u.isScheduled()&&u.forceRunNow()},t.incConflict=function(){l.uploadConflictCount++,d()},t.setInvalidActionCount=function(e){l.invalidActionCount=e,d()},t.setMissingKeyCount=function(e){l.missingKeyCount=e,d()},t.setStoredMutationCount=function(e){l.storedMutationCount=e,d()},t.setUnsupportedActionCount=function(e){l.unsupportedActionCount=e,d()};var i=r(n(73982)),o=n(89623),a=n(90649),s=n(78494);let l={mutationCount:0,invalidActionCount:0,unsupportedActionCount:0,keyRotationRemoveCount:0,storedMutationCount:0,uploadConflictCount:0,unsetActionCount:0,missingKeyCount:0};const u=new s.ShiftTimer((function(){const e=(t=l,{int:(0,i.default)({},t)});var t;c(),(0,a.startMetric)(o.PRE_METRIC.APP_STATE_SYNC_DAILY).endSuccess(e)}));function c(){l={mutationCount:0,invalidActionCount:0,unsupportedActionCount:0,keyRotationRemoveCount:0,storedMutationCount:0,uploadConflictCount:0,unsetActionCount:0,missingKeyCount:0}}function d(){u.onOrBefore(3e5)}},97508:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptMutation=function(){return E.apply(this,arguments)};var i=r(n(73982)),o=r(n(11504)),a=n(54080),s=n(47784),l=n(77485),u=n(91866),c=n(91205),d=n(94678),p=n(58508),f=n(49982),_=n(21061),g=n(77758),h=n(78761),A=n(93940),m=n(33655);function E(){return(E=(0,o.default)((function*(e,t){const{index:n,operation:r}=e;let o=t.keyId,a=t.keyData;switch(r){case u.SyncdMutation$SyncdOperation.SET:break;case u.SyncdMutation$SyncdOperation.REMOVE:{const e=yield(0,l.getSyncActionInTransaction)(n);if(!e)throw new _.SyncdFatalError("no corresponding set mutation");const t=e.keyId,r=yield(0,g.getKeyData)(t);if(null==r)throw new _.SyncdFatalError("no key data for corresponding mutation");o=t,a=r}}const{indexMac:s,indexAndValueCipherText:c}=yield y(e,o,a),p=(0,d.valueMacFromIndexAndValueCipherText)(c);return(0,i.default)((0,i.default)({},e),{},{keyId:o,keyData:a,indexMac:s,indexAndValueCipherText:c,valueMac:p})}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e,t,n){try{const{index:r,binarySyncAction:i,operation:o,version:l}=e,u=(0,a.stringToArrayBuffer)(r),c=yield(0,d.generateEncryptionKeys)(n),{indexKey:_,valueEncryptionKey:g,valueMacKey:h}=c,A=yield(0,s.getCrypto)().getRandomValues(new Uint8Array(p.IV_LENGTH)),m=v(u,i,(0,d.generatePadding)(u.byteLength,i.byteLength),l),E=yield(0,d.generateCipherText)(A,g,m),y=(0,d.generateAssociatedData)(o,t),S=yield(0,d.generateMac)(y,E,h),I=(0,f.combine)([E,S]);return{indexMac:yield(0,d.generateIndexMac)(_,u),indexAndValueCipherText:I}}catch(e){throw(0,h.reportSyncdFatalError)(h.SyncdFatalErrorType.ENCRYPTION_FAILED),new _.SyncdFatalError("encryption failure")}}))).apply(this,arguments)}function v(e,t,n,r){return(0,A.encodeSyncActionData)({index:e,value:(0,m.decodeProtobuf)(c.SyncActionValueSpec,t),padding:n,version:r})}},4159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exceedInlineMutationCount=function(e){const t=Math.min(2e3,Math.max((0,r.getConfig)().syncdInlineMutationsMaxCount(),100));return e.length>t},t.exceedPatchProtobufSize=function(e){const t=1e3*Math.min(100,Math.max((0,r.getConfig)().syncdPatchProtobufMaxSize(),10));return e.byteLength>t};var r=n(58117)},62539:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return l.apply(this,arguments)};var i=r(n(11504)),o=n(75285),a=n(43783),s=n(94197);function l(){return(l=(0,i.default)((function*(e){const t=new Map,n=new Map;yield Promise.all(e.map(function(){var e=(0,i.default)((function*(e){const r=yield(0,o.getSyncPendingMutationsByCollectionInTransaction)(e),i=r.map((e=>e.id)).filter(Boolean);n.set(e,i);const a=(0,s.compactPatch)(r);t.set(e,a)}));return function(){return e.apply(this,arguments)}}()));const r=yield(0,a.buildSyncIqNode)(t);return{syncIqNode:r.syncIqNode,collectionWithPendingMutationsIds:n,collectionWithEncryptedMutations:r.collectionWithEncryptedMutations,localCollectionVersions:r.localCollectionVersions,collectionsToSkip:r.collectionsToSkip}}))).apply(this,arguments)}},43783:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t._generateMutationsToUpload=x,t.buildDeleteAllIqNode=function(){return P((0,I.wap)("delete_all_data",null))},t.buildSyncIqNode=function(){return M.apply(this,arguments)};var i=r(n(11504)),o=n(62089),a=n(58117),s=n(47958),l=n(77485),u=n(44037),c=n(72279),d=n(91866),p=n(15644),f=n(71903),_=n(49982),g=n(97508),h=n(80747),A=n(35229),m=n(93189),E=n(4159),y=n(98953),S=n(93940),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(80005)),I=n(42811),T=r(n(43303));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function M(){return(M=(0,i.default)((function*(e){const{collectionNodes:t,collectionWithEncryptedMutations:n,localCollectionVersions:r,collectionsToSkip:i}=yield C(e);return{syncIqNode:P((0,I.wap)("sync",null,t)),collectionWithEncryptedMutations:n,localCollectionVersions:r,collectionsToSkip:i}}))).apply(this,arguments)}function P(e){return(0,I.wap)("iq",{to:I.S_WHATSAPP_NET,xmlns:"w:sync:app:state",type:"set",id:(0,I.generateId)()},e)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e){__LOG__(2)`syncd: start _buildCollectionNodes`;const t=[],n=function(){var e=(0,i.default)((function*(e,n){const r=yield(0,s.getCollectionVersionInTransaction)(e).then((e=>null==e?void 0:e.version));let i,o;if(null!=n&&n.length>0)if(null==r)__LOG__(2)`syncd: skipping ${e} in sync iq patch because initial full sync
is incomplete`,t.push(e);else{const{patchNode:t,encryptedMutations:r}=yield R(e,n);i=t,o=r}return{collection:e,version:r,patchNode:i,encryptedMutations:o}}));return function(){return e.apply(this,arguments)}}(),r=new Map,o=new Map,a=[];e.forEach(((e,t)=>a.push(n(t,e))));const l=(yield Promise.all(a)).map((e=>{const{collection:t,version:n,patchNode:i,encryptedMutations:a}=e;return a&&o.set(t,a),r.set(t,n),(0,I.wap)("collection",{name:(0,I.CUSTOM_STRING)(t),version:(0,I.INT)(null!=n?n:f.DEFAULT_COLLECTION_VERSION),return_snapshot:void 0===n?"true":"false"},i)}));return __LOG__(2)`syncd: end _buildCollectionNodes`,{collectionNodes:l,collectionWithEncryptedMutations:o,localCollectionVersions:r,collectionsToSkip:t}}))).apply(this,arguments)}function R(){return N.apply(this,arguments)}function N(){return(N=(0,i.default)((function*(e,t){const n=yield(0,h.getActiveKey)(!w(t)),r=(yield x(e,t,n)).map((e=>(0,g.encryptMutation)(e,n))),o=yield Promise.all(r),s=o.map((e=>({indexMac:e.indexMac,valueMac:e.valueMac,operation:e.operation}))),{ltHash:l}=yield(0,p.computeLtHash)(e,s),{snapshotMac:u,patchMac:c}=yield(0,p.computeOutgoingSnapshotAndPatchMacs)(e,l,o,n.keyData),d=o.map((e=>U(e.keyId,e.operation,e.indexMac,e.indexAndValueCipherText))),f=G(d),_=function(){var e=(0,i.default)((function*(){const e=yield(0,a.getDbImpls)().uploadSyncExternalPatch(f);return B(yield D(e,f),n.keyId,u,c)}));return function(){return e.apply(this,arguments)}}();let A;(0,E.exceedInlineMutationCount)(d)?A=yield _():(A=k(d,n.keyId,u,c),(0,E.exceedPatchProtobufSize)(A)&&(A=yield _()));return{patchNode:(0,I.wap)("patch",null,A),encryptedMutations:o}}))).apply(this,arguments)}function w(e){return(0,a.getConfig)().logoutInProgress()&&e.some((e=>JSON.parse(e.index)[0]===f.Actions.Sentinel))}function D(){return L.apply(this,arguments)}function L(){return(L=(0,i.default)((function*(e,t){const{mediaKey:n,directPath:r,encFilehash:i,handle:a}=e,s=yield(0,c.calculateFilehash)(t);return{mediaKey:n,directPath:r,handle:a,fileSizeBytes:t.byteLength,fileSha256:(0,o.decodeB64)(s),fileEncSha256:i}}))).apply(this,arguments)}function B(e,t,n,r){const i=(0,a.getConfig)().syncdPatchDeviceIndexIncluded()?(0,u.extractDeviceId)((0,a.getMyDeviceJid)()):void 0;return(0,S.encodeSyncdPatch)({keyId:{id:(0,m.fromSyncKeyId)(t)},externalMutations:e,snapshotMac:n,patchMac:r,deviceIndex:i})}function k(e,t,n,r){const i=(0,a.getConfig)().syncdPatchDeviceIndexIncluded()?(0,u.extractDeviceId)((0,a.getMyDeviceJid)()):void 0;return(0,S.encodeSyncdPatch)({keyId:{id:(0,m.fromSyncKeyId)(t)},mutations:e,snapshotMac:n,patchMac:r,deviceIndex:i})}function G(e){return(0,S.encodeSyncdMutations)({mutations:e})}function U(e,t,n,r){return{operation:t,record:{keyId:{id:(0,m.fromSyncKeyId)(e)},index:{blob:n},value:{blob:r}}}}function x(){return F.apply(this,arguments)}function F(){return(F=(0,i.default)((function*(e,t,n){const r=yield(0,l.getSyncActionsByCollectionsInTransaction)([e]);let i=t;const o=K(r,t,n.keyId);i=i.concat(o);const a=Y(r,i,n.keyId);return v.addKeyRotationRemoveCount(a.length),i=i.concat(a),i}))).apply(this,arguments)}function K(e,t,n){let r=e.filter((e=>!t.map((e=>e.index)).includes(e.index)&&!(0,_.syncKeyIdsEqual)(e.keyId,n)));r=(0,T.default)(r,(e=>(0,A.getKeyEpoch)(e.keyId)));const i=Math.min(5,(0,a.getConfig)().syncdAdditionalMutations());return r=r.slice(0,i),(0,y.syncActionsToPendingMutations)(r,d.SyncdMutation$SyncdOperation.SET)}function Y(e,t,n){const r=t.map((e=>e.index)),i=e.filter((e=>r.includes(e.index))).filter((e=>!(0,_.syncKeyIdsEqual)(e.keyId,n)));return(0,y.syncActionsToPendingMutations)(i,d.SyncdMutation$SyncdOperation.REMOVE)}},98953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncActionsToPendingMutations=function(e,t){return e.map((e=>{const n=(0,i.decodeProtobuf)(r.SyncActionDataSpec,e.binarySyncData).value,a=(0,o.encodeProtobuf)(r.SyncActionValueSpec,n).readBuffer();return{collection:e.collection,index:e.index,binarySyncAction:a,operation:t,version:e.version,timestamp:e.timestamp,action:e.action}}))};var r=n(91205),i=n(33655),o=n(86881)},94197:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactPatch=function(e){return function(e,t){const n=new Set;return e.filter((e=>{const r=t(e);return!n.has(r)&&(n.add(r),!0)}))}(e.reverse(),(e=>e.index)).reverse()}},93940:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeSyncActionData=function(e){try{return(0,s.encodeProtobuf)(i.SyncActionDataSpec,e).readBuffer()}catch(e){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED),new o.SyncdFatalError("action data protobuf serialization failed")}},t.encodeSyncdMutations=function(e){try{return(0,s.encodeProtobuf)(r.SyncdMutationsSpec,e).readBuffer()}catch(e){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED),new o.SyncdFatalError("mutations protobuf serialization failed")}},t.encodeSyncdPatch=function(e){try{return(0,s.encodeProtobuf)(r.SyncdPatchSpec,e).readBuffer()}catch(e){throw(0,a.reportSyncdFatalError)(a.SyncdFatalErrorType.PATCH_PROTOBUF_SERIALIZATION_FAILED),new o.SyncdFatalError("patch protobuf serialization failed")}};var r=n(91866),i=n(91205),o=n(21061),a=n(78761),s=n(86881)},47958:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetCollectionVersionsInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.bulkGet(e)}))},t.bulkSetCollectionSyncAttemptStartTimesInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},function(){var t=(0,i.default)((function*(t){let{CollectionVersionStore:n}=t;yield Promise.all((t=>e.map((e=>t.update(e.collection,{lastSyncAttemptStartTimes:e.lastSyncAttemptStartTimes}))))(n))}));return function(){return t.apply(this,arguments)}}())},t.bulkUpdateCollectionVersionInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.bulkUpdate(e)}))},t.getAllCollectionVersionsInTransaction=function(){return(0,o.runInTransaction)({CollectionVersionStore:!0},(e=>{let{CollectionVersionStore:t}=e;return t.getAll()}))},t.getCollectionVersionInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.get(e)}))},t.getCollectionVersionLtHash=l,t.getCollectionVersionLtHashInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return l({CollectionVersionStore:n},e)}))},t.getIsCollectionInMacMismatchFatalInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.get(e).then((e=>null==e?void 0:e.isCollectionInMacMismatchFatal))}))},t.getIsCollectionLthashInconsistentInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.get(e).then((e=>null==e?void 0:e.isCollectionLthashInconsistent))}))},t.updateCollectionVersionAndLtHashInTransaction=function(e,t,n){return(0,o.runInTransaction)({CollectionVersionStore:!0},(r=>{let{CollectionVersionStore:i}=r;return i.update(e,{version:t,ltHash:n})}))},t.updateIsCollectionInMacMismatchFatalInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.update(e,{isCollectionInMacMismatchFatal:!0})}))},t.updateIsCollectionLthashInconsistentInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.update(e,{isCollectionLthashInconsistent:!0})}))},t.updateLastSuccessfulSyncEndTimeInTransaction=function(e){return(0,o.runInTransaction)({CollectionVersionStore:!0},(t=>{let{CollectionVersionStore:n}=t;return n.update(e,{lastSuccessfulSyncEndTime:(0,s.unixTimeMs)()})}))};var i=r(n(11504)),o=n(58117),a=n(17242),s=n(29987);function l(e,t){let{CollectionVersionStore:n}=e;return n.get(t).then((e=>{var t;return null!==(t=null==e?void 0:e.ltHash)&&void 0!==t?t:new ArrayBuffer(a.KEY_LENGTH_BYTES)}))}},34027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetMissingKeysInTransaction=function(e){return(0,r.runInTransaction)({MissingKeyStore:!0},(t=>{let{MissingKeyStore:n}=t;return n.bulkGet(e)}))},t.bulkUpdateMissingKeysInTransaction=function(e){return(0,r.runInTransaction)({MissingKeyStore:!0},(t=>{let{MissingKeyStore:n}=t;return n.bulkUpdate(e)}))},t.getAllMissingKeysInTransaction=function(){return(0,r.runInTransaction)({MissingKeyStore:!0},(e=>{let{MissingKeyStore:t}=e;return t.getAll()}))},t.getMissingKeyCountTransaction=function(){return(0,r.runInTransaction)({MissingKeyStore:!0},(e=>{let{MissingKeyStore:t}=e;return t.count()}))};var r=n(58117)},75285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkCreateSyncPendingMutationsInTransaction=function(e){return(0,r.runInTransaction)({PendingMutationStore:!0},(t=>{let{PendingMutationStore:n}=t;return n.bulkCreate(e)}))},t.getAllSyncPendingMutationsInTransaction=function(){return(0,r.runInTransaction)({PendingMutationStore:!0},(e=>{let{PendingMutationStore:t}=e;return t.getAll()}))},t.getSyncPendingMutationsByCollectionInTransaction=function(e){return(0,r.runInTransaction)({PendingMutationStore:!0},(t=>{let{PendingMutationStore:n}=t;return n.getByCollection(e)}))};var r=n(58117)},77485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkUpdateSyncActionsInTransaction=function(e){return(0,r.runInTransaction)({SyncActionStore:!0},(t=>{let{SyncActionStore:n}=t;return n.bulkUpdate(e)}))},t.countSyncActionsInTransaction=function(){return(0,r.runInTransaction)({SyncActionStore:!0},(e=>{let{SyncActionStore:t}=e;return t.count()}))},t.getAllSyncActions=function(){return(0,r.runInTransaction)({SyncActionStore:!0},(e=>{let{SyncActionStore:t}=e;return t.getAll()}))},t.getSyncActionInTransaction=function(e){return(0,r.runInTransaction)({SyncActionStore:!0},(t=>{let{SyncActionStore:n}=t;return n.get(e)}))},t.getSyncActionsByActionStatesInTransaction=function(e){return(0,r.runInTransaction)({SyncActionStore:!0},(t=>{let{SyncActionStore:n}=t;return n.getByActionStates(e)}))},t.getSyncActionsByCollectionsInTransaction=function(e){return(0,r.runInTransaction)({SyncActionStore:!0},(t=>{let{SyncActionStore:n}=t;return n.getByCollections(e)}))},t.getSyncActionsByIndexMacsInTransaction=function(e){return(0,r.runInTransaction)({SyncActionStore:!0},(t=>{let{SyncActionStore:n}=t;return n.getByIndexMacs(e)}))},t.getSyncActionsByModelInfosInTransaction=function(e){return(0,r.runInTransaction)({SyncActionStore:!0},(t=>{let{SyncActionStore:n}=t;return n.getByModelInfos(e)}))};var r=n(58117)},90485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expireSyncKeyInTransaction=function(e){return(0,r.runInTransaction)({SyncKeyStore:!0},(t=>{let{SyncKeyStore:n}=t;return n.expire(e)}))},t.getAllSyncKeysInTransaction=function(){return(0,r.runInTransaction)({SyncKeyStore:!0},(e=>{let{SyncKeyStore:t}=e;return t.getAll()}))},t.getSyncKeyInTransaction_DO_NOT_USE=function(e){return(0,r.runInTransaction)({SyncKeyStore:!0},(t=>{let{SyncKeyStore:n}=t;return n.get(e)}))},t.setSyncKeyInTransaction=function(e){return(0,r.runInTransaction)({SyncKeyStore:!0},(t=>{let{SyncKeyStore:n}=t;return n.set(e)}))};var r=n(58117)},17596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBootstrap=function(e){return null==e},t.isCriticalCollection=function(e){switch(e){case r.CollectionName.CriticalBlock:case r.CollectionName.CriticalUnblockLow:return!0;case r.CollectionName.Regular:case r.CollectionName.RegularHigh:case r.CollectionName.RegularLow:return!1}};var r=n(71903)},54080:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.arrayBufferMod=function(e,t){const n=new Uint8Array(e);if(t>8388607)throw(0,i.default)("Divisor is too big");let r=0;for(let e=0;e<n.length;++e)r=((r<<8)+n[e])%t;return r},t.arrayBufferToString=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},t.arrayBuffersEqualUNSAFE=function(e,t){const n=new Uint8Array(e),r=new Uint8Array(t);return o(n,r)},t.concatBuffers=function(e){const t=e.map((e=>new Uint8Array(e))),n=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(n);return t.reduce(((e,t)=>(r.set(t,e),e+t.byteLength)),0),r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)},t.largeStringToArrayBuffer=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e5;return new Promise((n=>{const r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);let a=0;setTimeout((function s(){const l=Math.min(a+t,r);for(;a<l;)o[a]=e.charCodeAt(a),a++;if(a===r)return void n(i);setTimeout(s,16)}),0)}))},t.stringToArrayBuffer=function(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);let r,i;for(r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n.buffer},t.uint8ArraysEqualUNSAFE=o;var i=r(n(82065));function o(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n!==e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}},43558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.peekEvery=function*(e,t){for(let n=0;n<e.length;n+=t)yield e.slice(n,n+t)},t.removeIndexWithoutPreservingOrder=function(e,t){const n=e.pop();t<e.length&&(e[t]=n)}},7537:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){throw(0,i.default)(`Impossible value, the default statement should never be reached for value: ${e}`)};var i=r(n(82065))},27363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expBackoff=i,t.expDelaySec=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return(0,r.delayMs)(Math.floor(1e3*i(e,t,n,o)))};var r=n(55068);function i(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return r=0===e?n||0:2**e,Number.isFinite(t)&&r>t&&(r=t),"number"==typeof n&&Number.isFinite(n)&&r<n&&(r=n),i&&(r*=1+i*Math.random()),r}},62089:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.BASE64_DATA_URL_SCHEME=void 0,t.decodeB64=function(e){const t=c(e,43,47,61);if(t)return t.buffer;throw(0,o.default)("Base64.decode given invalid string")},t.decodeB64ToJsArray=function(e){const t=e instanceof ArrayBuffer?new Uint8Array(e):c(e,43,47,61);return t&&Array.from(t)},t.decodeB64UrlSafe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=c(e,45,95,t?61:-1);if(n)return n.buffer;throw(0,o.default)("Base64.decode given invalid string")},t.encodeB64=s,t.encodeB64UrlSafe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(e,45,95,t)},t.isBase64=void 0,t.randomBase64=function(e){const t=new Uint8Array(e);return(0,i.getCrypto)().getRandomValues(t),s(t)},t.sizeWhenB64Decoded=function(e){return Math.floor(3*e.length/4)};var i=n(47784),o=r(n(82065));const a=3e3;t.BASE64_DATA_URL_SCHEME="data:image/jpeg;base64,";function s(e){return l(e,43,47,!0)}function l(e,t,n,r){const i=Array.isArray(e)||e instanceof ArrayBuffer?new Uint8Array(e):e;if(i.length<=a)return u(i,t,n,r);{const e=[];for(let o=0;o<i.length;o+=a)e.push(u(i.subarray(o,o+a),t,n,r));return e.join("")}}function u(e,t,n,r){const i=Math.ceil(4*e.length/3),o=4*Math.ceil(e.length/3),a=new Array(o);for(let t=0,n=0;t<o;t+=4,n+=3){const r=e[n]<<16|e[n+1]<<8|e[n+2];a[t]=r>>18,a[t+1]=r>>12&63,a[t+2]=r>>6&63,a[t+3]=63&r}for(let e=0;e<i;e++){const r=a[e];a[e]=r<26?65+r:r<52?71+r:r<62?r-4:62===r?t:n}for(let e=i;e<o;e++)a[e]=61;const s=String.fromCharCode.apply(String,a);return r?s:s.substring(0,i)}function c(e,t,n,r){let i=e.length;const o=new Int32Array(i+i%4);for(let a=0;a<i;a++){const s=e.charCodeAt(a);if(65<=s&&s<=90)o[a]=s-65;else if(97<=s&&s<=122)o[a]=s-71;else if(48<=s&&s<=57)o[a]=s+4;else if(s===t)o[a]=62;else{if(s!==n){if(s===r){i=a;break}return null!=self.ERROR&&__LOG__(4,void 0,new Error)`Found unexpected character code while decoding B64 at index ${a}, length ${i}: ${s}`,null}o[a]=63}}const a=o.length/4;for(let e=0,t=0;e<a;e++,t+=4)o[e]=o[t]<<18|o[t+1]<<12|o[t+2]<<6|o[t+3];const s=Math.floor(3*i/4),l=new Uint8Array(s);let u=0,c=0;for(;c+3<=s;u++,c+=3){const e=o[u];l[c]=e>>16,l[c+1]=e>>8&255,l[c+2]=255&e}switch(s-c){case 2:l[c]=o[u]>>16,l[c+1]=o[u]>>8&255;break;case 1:l[c]=o[u]>>16}return l}t.isBase64=e=>"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},89323:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.Binary=void 0,t.longFitsInDouble=f,t.numUtf8Bytes=p,t.parseInt64OrThrow=W,t.parseUint64OrThrow=H;var i=r(n(82065)),o=n(65982);const a=65533,s=new Uint8Array(10),l=new Uint8Array(0);class u{constructor(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._buffer=new Uint8Array(0),this._readEndIndex=0,this._writeIndex=0,this.write=function(){for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];"string"==typeof n?e.writeString(n):"number"==typeof n?e.writeUint8(n):n instanceof u?e.writeBinary(n):n instanceof ArrayBuffer?e.writeBuffer(n):n instanceof Uint8Array&&e.writeByteArray(n)}},t instanceof ArrayBuffer?(this._buffer=new Uint8Array(t),this._readEndIndex=this._writeIndex=t.byteLength):t instanceof Uint8Array&&(this._buffer=t,this._readEndIndex=this._writeIndex=t.length),this._bytesTrashed=0,this._earliestIndex=this._readIndex=0,this._view=null,this._littleEndian=n,this._hiddenReads=0,this._hiddenWrites=0}size(){return this._readEndIndex-this._readIndex}peek(e,t){this._hiddenReads++;const n=this._readIndex,r=this._bytesTrashed;try{return e(this,t)}finally{this._hiddenReads--,this._readIndex=n-(this._bytesTrashed-r)}}advance(e){this._shiftReadOrThrow(e)}readWithViewParser(e,t,n,r){return t(this._getView(),this._shiftReadOrThrow(e),e,n,r)}readWithBytesParser(e,t,n,r){return t(this._buffer,this._shiftReadOrThrow(e),e,n,r)}readUint8(){return _(this,1,h,!1)}readInt8(){return _(this,1,h,!0)}readUint16(){return _(this,2,A,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readInt32(){return _(this,4,m,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readUint32(){return _(this,4,E,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readInt64(){return _(this,8,y,W,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readUint64(){return _(this,8,y,H,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readLong(e){return _(this,8,y,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}readFloat32(){return _(this,4,S,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readFloat64(){return _(this,8,v,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readVarInt(e){const t=g(this,0,I,this.size());return g(this,t,T,e)}readBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size();return 0===e?new ArrayBuffer(0):g(this,e,b)}readByteArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size();return 0===e?new Uint8Array(0):g(this,e,M)}readBinary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;if(0===e)return new u(void 0,t);const n=g(this,e,M);return new u(n,t)}indexOf(e){if(0===e.length)return 0;const t=this._buffer,n=this._readEndIndex,r=this._readIndex;let i=0,o=r;for(let a=r;a<n;a++)if(t[a]===e[i]){if(0===i&&(o=a),i++,i===e.byteLength)return a-r-e.byteLength+1}else i>0&&(i=0,a=o);return-1}readString(e){return g(this,e,P)}ensureCapacity(e){this._maybeReallocate(this._readIndex+e)}ensureAdditionalCapacity(e){this._maybeReallocate(this._writeIndex+e)}writeToView(e,t,n,r){const i=this._shiftWriteMaybeReallocate(e);return t(this._getView(),i,e,n,r)}writeToBytes(e,t,n,r){const i=this._shiftWriteMaybeReallocate(e);return t(this._buffer,i,e,n,r)}writeUint8(e){j(e,0,256,"uint8"),O(this,1,R,e,!1)}writeInt8(e){j(e,-128,128,"signed int8"),O(this,1,R,e,!0)}writeUint16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;j(e,0,65536,"uint16"),C(this,2,N,e,t)}writeInt16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;j(e,-32768,32768,"signed int16"),C(this,2,w,e,t)}writeUint32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;j(e,0,4294967296,"uint32"),C(this,4,D,e,t)}writeInt32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;j(e,-2147483648,2147483648,"signed int32"),C(this,4,L,e,t)}writeUint64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;j(e,0,0x10000000000000000,"uint64"),C(this,8,B,e,t)}writeInt64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;j(e,-0x8000000000000000,0x8000000000000000,"signed int64"),C(this,8,B,e,t)}writeFloat32(e){C(this,4,k,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}writeFloat64(e){C(this,8,G,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}writeVarInt(e){j(e,-0x8000000000000000,0x8000000000000000,"varint (signed int64)");const t=e<0,n=t?-e:e;let r=Math.floor(n/4294967296),i=n-4294967296*r;t&&(r=~r,0===i?r++:i=-i);O(this,Y(r,i),U,r,i)}writeVarIntFromHexLong(e){const t=(0,o.hexLongIsNegative)(e),n=t?(0,o.negateHexLong)(e):e,r=(0,o.hexLongToHex)(n);let i=0,a=0;for(let e=0;e<o.NUM_HEX_IN_LONG;e++)i=i<<4|a>>>28,a=a<<4|(0,o.hexAt)(r,e);t&&(i=~i,0===a?i++:a=-a);O(this,Y(i,a),U,i,a)}writeBinary(e){const t=e.peek((e=>e.readByteArray()));if(t.length){const e=this._shiftWriteMaybeReallocate(t.length);this._buffer.set(t,e)}}writeBuffer(e){this.writeByteArray(new Uint8Array(e))}writeByteArray(e){const t=this._shiftWriteMaybeReallocate(e.length);this._buffer.set(e,t)}writeBufferView(e){this.writeByteArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}writeString(e){O(this,p(e),x,e)}writeHexLong(e){C(this,8,F,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}writeBytes(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e=0;e<t.length;e++)j(t[e],0,256,"byte");O(this,t.length,K,t)}writeAtomically(e,t){this._hiddenWrites++;let n=this._writeIndex,r=this._bytesTrashed;try{const i=e(this,t);return n=this._writeIndex,r=this._bytesTrashed,i}finally{this._hiddenWrites--,this._writeIndex=n-(this._bytesTrashed-r)}}writeWithVarIntLength(e,t){const n=this._writeIndex,r=this.writeAtomically(e,t),i=this._writeIndex;this.writeVarInt(i-n);const o=this._writeIndex-i,a=this._buffer;for(let e=0;e<o;e++)s[e]=a[i+e];for(let e=i-1;e>=n;e--)a[e+o]=a[e];for(let e=0;e<o;e++)a[n+e]=s[e];return r}static build(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0;for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n?r+=p(n):"number"==typeof n?r++:n instanceof u?r+=n.size():n instanceof ArrayBuffer?r+=n.byteLength:n instanceof Uint8Array&&(r+=n.length)}const i=new u;return i.ensureCapacity(r),i.write.apply(i,arguments),i}_getView(){return this._view||(this._view=new DataView(this._buffer.buffer,this._buffer.byteOffset))}_shiftReadOrThrow(e){if(e<0)throw(0,i.default)("ReadError: given negative number of bytes to read");const t=this._readIndex,n=t+e;if(n>this._readEndIndex)throw(0,i.default)(t===this._readEndIndex?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");return this._readIndex=n,this._hiddenReads||(this._earliestIndex=n),t}_maybeReallocate(e){const t=this._buffer;if(e<=t.length)return e;{const n=this._earliestIndex,r=e-n,i=Math.max(r,2*(t.length-n),64),o=new Uint8Array(i);return n?(o.set(t.subarray(n)),this._bytesTrashed+=n,this._readIndex-=n,this._readEndIndex-=n,this._writeIndex-=n,this._earliestIndex=0):o.set(t),this._buffer=o,this._view=null,r}}_shiftWriteMaybeReallocate(e){const t=this._maybeReallocate(this._writeIndex+e),n=this._writeIndex;return this._writeIndex=t,this._hiddenWrites||(this._readEndIndex=t),n}}t.Binary=u;let c="",d=0;function p(e){if(e===c)return d;const t=e.length;let n=0;for(let r=0;r<t;r++){const i=e.charCodeAt(r);if(i<128)n++;else if(i<2048)n+=2;else if(i<55296||57344<=i&&i<=65535)n+=3;else if(55296<=i&&i<56320&&r+1!==t){const t=e.charCodeAt(r+1);56320<=t&&t<57344?(r++,n+=4):n+=3}else n+=3}return c=e,d=n}function f(e,t,n){const r=t>>21;if(e){const e=Boolean(2097151&t||n);return 0===r||-1===r&&e}return 0===r}function _(e,t,n,r,i){return e.readWithViewParser(t,n,r,i)}function g(e,t,n,r,i){return e.readWithBytesParser(t,n,r,i)}function h(e,t,n,r){return r?e.getInt8(t):e.getUint8(t)}function A(e,t,n,r){return e.getUint16(t,r)}function m(e,t,n,r){return e.getInt32(t,r)}function E(e,t,n,r){return e.getUint32(t,r)}function y(e,t,n,r,i){return r(e.getInt32(i?t+4:t,i),e.getInt32(i?t:t+4,i))}function S(e,t,n,r){return e.getFloat32(t,r)}function v(e,t,n,r){return e.getFloat64(t,r)}function I(e,t,n,r){const o=Math.min(r,10);let a=0,s=128;for(;a<o&&128&s;)s=e[t+a++];if(10===a&&s>1)throw(0,i.default)("ParseError: varint exceeds 64 bits");return 128&s?a+1:a}function T(e,t,n,r){let i=0,o=0,a=n;10===n&&(a--,o=1&e[t+a]);for(let n=a-1;n>=0;n--)i=i<<7|o>>>25,o=o<<7|127&e[t+n];return r(i,o)}function b(e,t,n){const r=t+e.byteOffset,i=e.buffer;return 0===r&&n===i.byteLength?i:i.slice(r,r+n)}function M(e,t,n){return e.subarray(t,t+n)}function P(e,t,n){const r=t+n;let i=[],o=null;for(let n=t;n<r;n++){i.length>5e3&&(o||(o=[]),o.push(String.fromCharCode.apply(String,i)),i=[]);const t=0|e[n];if(0==(128&t))i.push(t);else if(192==(224&t)){const o=Q(e,n+1,r);if(o){n++;const e=(31&t)<<6|63&o;e>=128?i.push(e):i.push(a)}else i.push(a)}else if(224==(240&t)){const o=Q(e,n+1,r),s=Q(e,n+2,r);if(o&&s){n+=2;const e=(15&t)<<12|(63&o)<<6|63&s;e>=2048&&!(55296<=e&&e<57344)?i.push(e):i.push(a)}else o?(n++,i.push(a)):i.push(a)}else if(240==(248&t)){const o=Q(e,n+1,r),s=Q(e,n+2,r),l=Q(e,n+3,r);if(o&&s&&l){n+=3;const e=(7&t)<<18|(63&o)<<12|(63&s)<<6|63&l;if(e>=65536&&e<=1114111){const t=e-65536;i.push(55296|t>>10,56320|1023&t)}else i.push(a)}else o&&s?(n+=2,i.push(a)):o?(n++,i.push(a)):i.push(a)}else i.push(a)}const s=String.fromCharCode.apply(String,i);return o?(o.push(s),o.join("")):s}function C(e,t,n,r,i){return e.writeToView(t,n,r,i)}function O(e,t,n,r,i){return e.writeToBytes(t,n,r,i)}function R(e,t,n,r){e[t]=r}function N(e,t,n,r,i){e.setUint16(t,r,i)}function w(e,t,n,r,i){e.setInt16(t,r,i)}function D(e,t,n,r,i){e.setUint32(t,r,i)}function L(e,t,n,r,i){e.setInt32(t,r,i)}function B(e,t,n,r,i){const o=r<0,a=o?-r:r;let s=Math.floor(a/4294967296),l=a-4294967296*s;o&&(s=~s,0===l?s++:l=-l),e.setUint32(i?t+4:t,s,i),e.setUint32(i?t:t+4,l,i)}function k(e,t,n,r,i){e.setFloat32(t,r,i)}function G(e,t,n,r,i){e.setFloat64(t,r,i)}function U(e,t,n,r,i){let o=r,a=i;const s=t+n-1;for(let n=t;n<s;n++)e[n]=128|127&a,a=o<<25|a>>>7,o>>>=7;e[s]=a}function x(e,t,n,r){let i=t;const o=r.length;for(let t=0;t<o;t++){const n=r.charCodeAt(t);if(n<128)e[i++]=n;else if(n<2048)e[i++]=192|n>>6,e[i++]=128|63&n;else if(n<55296||57344<=n)e[i++]=224|n>>12,e[i++]=128|n>>6&63,e[i++]=128|63&n;else if(55296<=n&&n<56320&&t+1!==o){const o=r.charCodeAt(t+1);if(56320<=o&&o<57344){t++;const r=65536+((1023&n)<<10|1023&o);e[i++]=240|r>>18,e[i++]=128|r>>12&63,e[i++]=128|r>>6&63,e[i++]=128|63&r}else e[i++]=239,e[i++]=191,e[i++]=189}else e[i++]=239,e[i++]=191,e[i++]=189}}function F(e,t,n,r,i){const a=(0,o.hexLongIsNegative)(r),s=(0,o.hexLongToHex)(r);let l=0,u=0;for(let e=0;e<16;e++)l=l<<4|u>>>28,u=u<<4|(0,o.hexAt)(s,e);a&&(l=~l,0===u?l++:u=-u),e.setUint32(i?t+4:t,l,i),e.setUint32(i?t:t+4,u,i)}function K(e,t,n,r){for(let i=0;i<n;i++)e[t+i]=r[i]}function Y(e,t){let n,r;for(e?(n=5,r=e>>>3):(n=1,r=t>>>7);r;)n++,r>>>=7;return n}function j(e,t,n,r){if("number"!=typeof e||e!=e||Math.floor(e)!==e||e<t||e>=n)throw(0,i.default)("string"==typeof e?`TyperError WriteError: string "${e}" is not a valid ${r}`:`TypeError WriteError: ${String(e)} is not a valid ${r}`)}function V(e,t,n){let r;r=t>=0||e?t:4294967296+t;const o=4294967296*r+(n>=0?n:4294967296+n);if(!f(e,t,n))throw(0,i.default)(`ReadError: integer exceeded 53 bits (${o})`);return o}function W(e,t){return V(!0,e,t)}function H(e,t){return V(!1,e,t)}function Q(e,t,n){if(t>=n)return 0;const r=0|e[t];return 128==(192&r)?r:0}},89738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareArrayBuffer=function(e,t){if(!e||!t)return!1;const n=new Uint8Array(e),r=new Uint8Array(t),i=n.length,o=r.length;if(i!==o)return!1;for(let e=0;e<i;e++)if(n[e]!==r[e])return!1;return!0},t.intToBytes=function(e,t){let n=t;const r=new Uint8Array(e);for(let t=e-1;t>=0;t--)r[t]=255&n,n>>>=8;return r},t.uint8ArrayToBuffer=function(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}},21802:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.wrapArrayBuffer=function(e){if(e instanceof ArrayBuffer){const t=new a(0);return e.byteLength>0&&(t.buffer=e,t.offset=0,t.limit=e.byteLength,t.view=e.byteLength>0?new DataView(e):null),t.toArrayBuffer()}throw(0,i.default)("TypeError: Illegal input => not an ArrayBuffer but "+typeof e)},t.wrapBufferToString=function(e){const t=new a(0);e.byteLength>0&&(t.buffer=e,t.offset=0,t.limit=e.byteLength,t.view=e.byteLength>0?new DataView(e):null);return t.toBinaryString()},t.wrapString=function(e){if("string"!=typeof e)throw(0,i.default)("TypedError: Illegal input => not a string");const t=e.length,n=new a(t);for(let o=0;o<t;o++){var r;const t=e.charCodeAt(o);if(t>255)throw(0,i.default)(`RangeError: Illegal charCode at ${o}: 0 <= ${t} <= 255`);null===(r=n.view)||void 0===r||r.setUint8(o,t)}return n.limit=t,n.toArrayBuffer()},t.wrapUint8Array=function(e){if(e instanceof Uint8Array){const t=new a(0);return e.length>0&&(t.buffer=e.buffer,t.offset=e.byteOffset,t.limit=e.byteOffset+e.length,t.view=e.length>0?new DataView(e.buffer):null),t.toArrayBuffer()}throw(0,i.default)("TypeError: Illegal input => not an Uint8Array but "+typeof e)};var i=r(n(82065));const o=new ArrayBuffer(0);class a{constructor(e){if(this.offset=0,this.limit=0,this.capacity=null!=e?e:16,null==e||e<0)throw(0,i.default)("RangeError: Illegal capacity");this.buffer=0===this.capacity?o:new ArrayBuffer(this.capacity),this.view=0===this.capacity?null:new DataView(this.buffer)}toArrayBuffer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.offset,n=this.limit;if(t>n){const e=t;t=n,n=e}if(null==t||t%1!=0)throw(0,i.default)("TypeError: Illegal offset: Not a valid integer");if(t>>>=0,null==n||n%1!=0)throw(0,i.default)("TypeError: Illegal limit: Not a valid integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw(0,i.default)(`RangeError: Illegal range: 0 <= ${t} <= ${n} <= ${this.buffer.byteLength}`);if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return o;const r=new ArrayBuffer(n-t);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t,n),0),r}toBinaryString(e,t){let n=null!=e?e:this.offset,r=null!=t?t:this.limit;if(null==n||n%1!=0)throw(0,i.default)("TypeError: Illegal begin: Not a valid integer");if(n>>>=0,null==r||r%1!=0)throw(0,i.default)("TypeError: Illegal end: Not a valid integer");if(r>>>=0,n<0||n>r||r>this.buffer.byteLength)throw(0,i.default)(`RangeError: Illegal range: 0 <= ${n} <= ${r} <= ${this.buffer.byteLength}`);if(n===r)return"";let o=[];const a=[];for(;n<r;){var s;o.push(null===(s=this.view)||void 0===s?void 0:s.getUint8(n++)),o.length>=1024&&(a.push(String.fromCharCode.apply(String,o)),o=[])}return a.join("")+String.fromCharCode.apply(String,o)}}},44379:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.arrayBuffersEqual=function(e,t){return s(new Uint8Array(e),new Uint8Array(t))},t.randomNumberLessThan=function(e){if(e!==(0|e))throw(0,a.default)("bound must be int32");if(e<=0)throw(0,a.default)("bound must not be positive");const t=new Int32Array(1),n=e*Math.floor((-1>>>1)/e);let r=-1;for(;-1===r;){(0,i.getCrypto)().getRandomValues(t);const o=t[0]>>>1;o<n&&(r=o%e)}return r},t.rawKeysEqual=function(e,t){return 0===e.length&&0===t.length||(0,o.verify)(e,t)},t.serializedPubKeysEqual=function(e,t){return 0===e.length&&0===t.length||(0,o.verify)(e,t)},t.uint8ArraysEqual=s;var i=n(47784),o=n(65461),a=r(n(82065));function s(e,t){return 0===e.length&&0===t.length||(0,o.verify)(e,t)}},66911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedError=t.UnimplementedMethod=t.TimeoutError=t.HttpError=t.AggregateError=void 0,t.customError=r,t.hasSupressedQuotaExceededError=function(){return l},t.obtainErrorSummary=function(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))},t.supressQuotaExceededError=function(e){if(null==e||"QuotaExceededError"!==e.name)throw e;l=!0};const n=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;function i(n){const r=Error.call(this,n);this.message=n,r.name=e,this.name=e,t&&(this.stack=r.stack)}return i.prototype=Object.create(r?r.prototype:n),i.prototype.constructor=i,i}class i extends(r("AggregateError",!0)){constructor(e,t){super(null!=t&&t.length>0?t:function(e){return 0===e.length?"No errors":1===e.length?e[0].message:e.map((e=>"- "+e.message)).join("\n")}(e)),this.errors=e}}t.AggregateError=i;class o extends(r("TimeoutError",!1)){}t.TimeoutError=o;class a extends(r("HttpError",!1)){constructor(e,t){super(e),this.code=t}}t.HttpError=a;class s extends(r("UnimplementedMethod")){}t.UnimplementedMethod=s;let l=!1;class u extends Error{constructor(e,t){super(e),this.inner=t}}t.WrappedError=u},52924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=function e(t,n){if(t===n)return!0;if(!t||!n||"object"!=typeof t&&"object"!=typeof n)return!1;const r=Array.isArray(t),i=Array.isArray(n);if(r!==i)return!1;let o=!0;if(r){const r=t.length;if(r!==n.length)return!1;for(let i=0;o&&i<r;i++)o=e(t[i],n[i]);return o}const a=Object.keys(t);for(let r=0;o&&r<a.length;r++){const i=a[r];o=n.propertyIsEnumerable(i)&&e(t[i],n[i])}return o&&Object.keys(n).length===a.length}},82065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=new Error(e);if(void 0===t.stack)try{throw t}catch(e){}return t}},66218:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.GzipWrapper=void 0,t.createDeflate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new a(e)},t.gzipInflate=function(e){return Promise.resolve(s(e))},t.inflate=s;var i=r(n(82065)),o=n(56856);class a extends o.Gzip{constructor(e){super(e),this._chunks=[],this.ondata=(e,t)=>{if(this._chunks.push(e),!t)return;let n=0;this._chunks.forEach((e=>{n+=e.length}));const r=new Uint8Array(n);let i=0;this._chunks.forEach((e=>{r.set(e,i),i+=e.length})),this._result=r}}push(e,t){if(null!=this._result)throw(0,i.default)("Tried to push chunk to compressor after final block");e instanceof Uint8Array?super.push(e,t):e instanceof ArrayBuffer?super.push(new Uint8Array(e),t):super.push((0,o.strToU8)(e),t)}result(){if(null==this._result)throw(0,i.default)("Tried to access result before adding final block");return this._result}}function s(e){return(0,o.decompressSync)(e)}t.GzipWrapper=a},9028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},65982:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.NUM_HEX_IN_LONG=t.HEX_LOWER=void 0,t.bytesToBuffer=function(e){const t=e.buffer;return 0===e.byteOffset&&e.length===t.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.length)},t.bytesToDebugString=function(e){let t=!0,n=e.length;for(;t&&n;){const r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):l(e)},t.createHexLong=d,t.createHexLongFrom32Bits=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=h(e),i=h(t);return`${n?"-":""}0x${r}${i}`},t.hexAt=u,t.hexLongFromNumber=function(e){const t=e<0;return d(t?(-e).toString(16):e.toString(16),t)},t.hexLongIsNegative=_,t.hexLongToHex=f,t.hexOrThrow=c,t.isBiggerHexLong=function(e,t){const n=_(e),r=_(t);if(n!==r)return!n;const i=f(e)>f(t);return n?!i:i},t.negateHexLong=function(e){return _(e)?e.slice(1):"-"+e},t.parseHex=function(e){const t=c(e);if(t.length%2!=0)throw(0,o.default)(`parseHex given hex "${t}" which is not a multiple of 8-bits.`);const n=new Uint8Array(t.length>>1);for(let e=0,r=0;e<t.length;e+=2,r++)n[r]=u(t,e)<<4|u(t,e+1);return n.buffer},t.randomHex=function(e){const t=new Uint8Array(e);return(0,i.getCrypto)().getRandomValues(t),l(t)},t.toHex=l,t.toLowerCaseHex=function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(s[r>>4],s[15&r])}return String.fromCharCode.apply(String,t)};var i=n(47784),o=r(n(82065));t.NUM_HEX_IN_LONG=16;const a=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],s=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function l(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(a[r>>4],a[15&r])}return String.fromCharCode.apply(String,t)}function u(e,t){const n=e.charCodeAt(t);return n<=57?n-48:n<=70?10+n-65:10+n-97}function c(e){if(/[^0-9a-fA-F]/.test(e))throw(0,o.default)(`"${e}" is not a valid hex`);return e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=c(e);return g(n,16),`${t?"-":""}0x${p(n,16)}`}function p(e,t){const n=t-e.length;let r=e;for(let e=0;e<n;e++)r="0"+r;return r}function f(e){return e.substring(e.indexOf("0x")+2)}function _(e){return"-"===e[0]}function g(e,t){if(e.length>t)throw(0,o.default)(`"${e}" is longer than ${4*t} bits.`)}function h(e){if(e>4294967295||e<-4294967296)throw(0,o.default)("uint32ToLowerCaseHex given number over 32 bits");return p((e>=0?e:4294967296+e).toString(16),8)}t.HEX_LOWER=s},13897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inflatePhoneRegex=function(e){let t;t="number"==typeof e?String(e).split("").map((e=>".".repeat(Number(e)))).join(")("):e.replace(/;|[a-zA-Z]+/g,(e=>";"===e?")(":e.split("").map((e=>{const t=e.charCodeAt(0);return t>=97?".".repeat(t-96)+"?":".".repeat(t-64)})).join(")(")));return`(${t})`}},44037:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WA_USER_JID_SUFFIX=t.WA_USER_DOMAIN=t.WA_SERVER_JID_SUFFIX=t.WA_NEWSLETTER_JID_DOMAIN=t.WA_LID_SUFFIX=t.SURVEY_USER_JID=t.STATUS_JID=t.PSA_JID=t.MSGR_USER_JID_SUFFIX=t.MSGR_USER_DOMAIN=t.LID_SUFFIX=t.LID_DOMAIN=t.INTEROP_USER_JID_SUFFIX=t.INTEROP_DOMAIN=t.HOSTED_SUFFIX=t.HOSTED_LID_SUFFIX=t.HOSTED_LID_DOMAIN=t.HOSTED_DOMAIN=t.DEFAULT_DEVICE_ID=t.AUTHOR_SYSTEM=t.AUTHOR_ME=void 0,t.asChatJid=function(e){return e===l?null:e},t.asMulticastJid=function(e){return null==j(e)?e:null},t.asPhoneChatJid=function(e){return e===l?null:e},t.asStatusJid=function(e){return e===l?l:null},t.authorAsPhoneUserJid=function(e){if(e===a||e===s)return null;if(!e.endsWith(m))return null;return e},t.authorAsUserJid=function(e){if(e===a||e===s)return null;return e},t.authorToUserId=function(e,t){return e===a||e===s?t:x(e)},t.createJidUtils=function(e){let{platform:t}=e;const n="msgr"===t?d:m;return{toUserJid:function(e){return`${e}${n}`},getUserDomain:function(){return n},getGroupCallDomain:function(){return"@call"}}},t.defaultDeviceJidForUser=oe,t.defaultLidDeviceJidForLidUserJid=function(e){return U(e,0)},t.defaultMsgrDeviceJidForUser=function(e){return`${G(e)}:0@msgr`},t.defaultPhoneDeviceJidForUser=function(e){return`${G(e)}:0@s.whatsapp.net`},t.extractDeviceIDParts=F,t.extractDeviceId=K,t.extractFromJid=Q,t.extractJidFromJidWithType=function(e){return"phoneDevice"===e.jidType||"interopDevice"===e.jidType||"lidDevice"===e.jidType||"msgrDevice"===e.jidType?e.deviceJid:"lidUser"===e.jidType||"interopUser"===e.jidType||"msgrUser"===e.jidType||"phoneUser"===e.jidType?e.userJid:"group"===e.jidType?e.groupJid:"status"===e.jidType?e.statusJid:"call"===e.jidType?e.callJid:"newsletter"===e.jidType?e.newsletterJid:"hosted"===e.jidType?e.hostedDeviceJid:"hostedLid"===e.jidType?e.hostedLidDeviceJid:(e.jidType,e.broadcastJid)},t.extractLidUserJid=function(e){return W(e)},t.extractPhoneUserJid=function(e){return W(e)},t.extractUserId=x,t.extractUserJid=W,t.fullFormDeviceJidString=function(e){const{user:t,agent:n="0",device:r="0",server:i}=H(e);return`${t}.${n}:${r}@${i}`},t.getGroupDomain=function(){return u},t.getMsgrUserDomain=function(){return d},t.getServerDomain=function(){return"@s.whatsapp.net"},t.getWhatsappUserDomain=function(){return m},t.groupIdFromJid=Z,t.interpretAndValidateJid=$,t.interpretAsDeviceId=function(e){return e},t.interpretAsGroupJid=te,t.interpretAsNumber=function(e){return e},t.interpretAsPhoneUserJid=function(e){return e.endsWith(m)?e:null},t.interpretAsUserJid=j,t.isAuthorMe=function(e){return"@me"===e},t.isAuthorSystem=function(e){return"@system"===e},t.isLidUser=function(e){return e.endsWith(T)},t.isPrimaryDevice=function(e){return 0===K(e)},t.lidFromLidUserJid=V,t.lidOrPhoneFromUserJid=function(e){if(e.endsWith(m))return Y(e);if(e.endsWith(T))return V(e);throw(0,o.default)(`lidOrPhoneFromUserJid called with non phone or lid jid "${e}"`)},t.maybeSanitizeLogLineText=function(e){if(!e.includes("@"))return e;return e.replace(B,ee)},t.parseJidParts=H,t.phoneNumberFromJid=Y,t.sanitizeJidForLogging=ee,t.stripAgentIdFromPhoneDeviceJid=function(e){const{user:t,device:n="0",server:r}=H(e);return`${t}:${n}@${r}`},t.switchOnChatJidType=ne,t.switchOnJidType=function(e,t){if(e===l)return t.status();return ne(e,{interopUser:t.interopUser,phoneUser:t.phoneUser,msgrUser:t.msgrUser,lidUser:t.lidUser,group:t.group})},t.switchOnMsgrChatJidType=function(e,t){if(e.endsWith(d))return t.user(e);if(null!=te(e))return t.group(e);throw(0,o.default)(`Can not switch on chat jid ${e}`)},t.switchOnMulticastJidType=function(e,t){if(e===l)return t.multicast(l);return re(e,{user:t.user,group:t.multicast})},t.switchOnPhoneChatJidType=re,t.switchOnPhoneJidType=function(e,t){if(e===l)return t.status();return re(e,{user:t.user,group:t.group})},t.switchOnUserChatJidType=function(e,t){return ne(e,{lidUser:e=>t.user(e),interopUser:e=>t.user(e),msgrUser:e=>t.user(e),phoneUser:e=>t.user(e),group:e=>t.group(e)})},t.threadIdForChatJid=function(e){return ne(e,{group:e=>Z(e),lidUser:e=>G(e),interopUser:e=>G(e),phoneUser:e=>G(e),msgrUser:e=>G(e)})},t.toBroadcastJid=function(e){return`${e}@broadcast`},t.toDeviceJid=function(e,t){return`${G(e)}:${t}${ie(e)}`},t.toGroupJid=function(e){if(e.endsWith(u))return e;return`${e}@g.us`},t.toHostedDeviceJid=function(e){if(e.endsWith(O))return e;return`${e}@hosted`},t.toHostedLidDeviceJid=function(e){if(e.endsWith(w))return e;return`${e}@hosted.lid`},t.toLidDeviceJid=U,t.toLidUserJid=function(e){return`${e}@lid`},t.toMsgrDeviceJid=function(e,t){return`${G(e)}:${t}@msgr`},t.toMsgrUserJid=k,t.toNewsletterJid=function(e){if(e.endsWith(y))return e;return`${e}@newsletter`},t.toPhoneDeviceJid=function(e,t){return`${G(e)}:${t}@s.whatsapp.net`},t.toPhoneUserJid=function(e){return`${e}@s.whatsapp.net`},t.unsafeCoerceToChatJid=function(e){return e},t.unsafeCoerceToDeviceId=he,t.unsafeCoerceToDeviceJid=ae,t.unsafeCoerceToGroupJid=ge,t.unsafeCoerceToHostedDeviceJid=function(e){return e},t.unsafeCoerceToHostedLidDeviceJid=function(e){return e},t.unsafeCoerceToInteropDeviceJid=ue,t.unsafeCoerceToInteropUserJid=fe,t.unsafeCoerceToLidDeviceJid=ce,t.unsafeCoerceToMsgrDeviceJid=le,t.unsafeCoerceToMsgrUserJid=_e,t.unsafeCoerceToNewsletterJid=function(e){return e},t.unsafeCoerceToPhoneDeviceJid=se,t.unsafeCoerceToPhoneUserJid=pe,t.unsafeCoerceToUserJid=de,t.userIdFromJid=G,t.validateBroadcastJid=z,t.validateCallJid=function(e){return C.test(e)?e:null},t.validateChatJid=function(e){return J(e)||X(e)},t.validateDeviceJid=function(e){if(v.test(e)||g.test(e)||f.test(e)||M.test(e)||N.test(e)||L.test(e))return e;if(I.test(e))return oe(e);return null},t.validateDomainJid=function(e){return"s.whatsapp.net"===e||"g.us"===e?e:null},t.validateGroupJid=X,t.validateHostedDeviceJid=function(e){return N.test(e)?e:null},t.validateHostedLidDeviceJid=function(e){return L.test(e)?e:null},t.validateInteropDeviceJid=function(e){if(f.test(e))return e;return null},t.validateMulticastJid=function(e){return q(e)||X(e)||z(e)?e:null},t.validateNewsletterJid=function(e){return S.test(e)?e:null},t.validateStatusJid=q,t.validateUserJid=J;var i=r(n(7537)),o=r(n(82065));t.DEFAULT_DEVICE_ID=0;const a="@me";t.AUTHOR_ME=a;const s="@system";t.AUTHOR_SYSTEM=s;const l="status@broadcast";t.STATUS_JID=l;t.PSA_JID="0@s.whatsapp.net";const u="@g.us",c=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,d="@msgr";t.MSGR_USER_DOMAIN=d;t.MSGR_USER_JID_SUFFIX="msgr";const p="@interop";t.INTEROP_DOMAIN=p;t.INTEROP_USER_JID_SUFFIX="interop";const f=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,_=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,g=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,h=/^([1-9][0-9]{0,19})@msgr$/,A=/^([1-9][0-9]{0,19})(:0)?@msgr$/;t.WA_SERVER_JID_SUFFIX="s.whatsapp.net";const m="@s.whatsapp.net";t.WA_USER_DOMAIN=m;const E="s.whatsapp.net";t.WA_USER_JID_SUFFIX=E;t.WA_LID_SUFFIX="lid";const y="@newsletter";t.WA_NEWSLETTER_JID_DOMAIN=y;const S=/^([1-9][0-9]{0,19})@newsletter$/,v=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,I=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,T="@lid";t.LID_DOMAIN=T;t.LID_SUFFIX="lid";const b=/^([1-9][0-9]{0,14})@lid$/,M=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,P=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,C=/^([0-9a-fA-F]{18,32})@call$/,O="@hosted";t.HOSTED_DOMAIN=O;const R="hosted";t.HOSTED_SUFFIX=R;const N=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,w="@hosted.lid";t.HOSTED_LID_DOMAIN=w;const D="hosted.lid";t.HOSTED_LID_SUFFIX=D;const L=/^([1-9][0-9]{0,14}):99@hosted.lid$/;t.SURVEY_USER_JID="16505361212@s.whatsapp.net";const B=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function k(e){return`${e}@msgr`}function G(e){if(e.endsWith(m))return e.slice(0,-m.length);if(e.endsWith(d))return e.slice(0,-d.length);if(e.endsWith(p))return e.slice(0,-p.length);if(e.endsWith(T))return e.slice(0,-T.length);throw(0,o.default)(`userIdFromJid called with non-user jid "${e}"`)}function U(e,t){return`${V(e)}:${t}@lid`}function x(e){return e.split("@")[0]}function F(e){const t=e.split("@")[0].split(":"),n=t[0],r=t[1];return{userId:n,deviceID:parseInt(r,10)}}function K(e){return F(e).deviceID}function Y(e){if(!e.endsWith(m))throw(0,o.default)(`phoneNumberFromJid called with non-user jid "${e}"`);return e.slice(0,-m.length)}function j(e){return e.endsWith(m)||e.endsWith(p)||e.endsWith(d)||e.endsWith(T)?e:null}function V(e){if(!e.endsWith(T))throw(0,o.default)(`lidFromLidUserJid called with non-LidUserJid "${e}"`);return e.slice(0,-T.length)}function W(e){const t=e.split("@");let n=t[0],r=t[1];return n=n.split(":")[0],n=n.split(".")[0],r===R&&(r=E),r===D&&(r="lid"),`${n}@${r}`}function H(e){const[t,n]=e.split("@"),[r,i]=t.split(":"),[o,a]=r.split(".");return{user:o,device:i,agent:a,server:n}}function Q(e){switch(e.jidType){case"interopUser":case"lidUser":case"msgrUser":case"phoneUser":return e.userJid;case"group":return e.groupJid;case"status":return e.statusJid;case"interopDevice":case"lidDevice":case"msgrDevice":case"phoneDevice":return e.deviceJid;case"broadcast":return e.broadcastJid;case"call":return e.callJid;case"newsletter":return e.newsletterJid;case"hosted":return e.hostedDeviceJid;case"hostedLid":return e.hostedLidDeviceJid;default:return(0,i.default)(e.jidType)}}function $(e){if(e===l)return{jidType:"status",statusJid:l};if(I.test(e))return{jidType:"phoneUser",userJid:e};if(_.test(e))return{jidType:"interopUser",userJid:e};if(h.test(e))return{jidType:"msgrUser",userJid:e};if(A.test(e)){return{jidType:"msgrUser",userJid:k(e.substr(0,e.indexOf(":")))}}return v.test(e)?{jidType:"phoneDevice",deviceJid:e}:f.test(e)?{jidType:"interopDevice",deviceJid:e}:g.test(e)?{jidType:"msgrDevice",deviceJid:e}:c.test(e)?{jidType:"group",groupJid:e.endsWith(u)?e:`${e}@g.us`}:P.test(e)?{jidType:"broadcast",broadcastJid:e}:C.test(e)?{jidType:"call",callJid:e}:b.test(e)?{jidType:"lidUser",userJid:e}:M.test(e)?{jidType:"lidDevice",deviceJid:e}:S.test(e)?{jidType:"newsletter",newsletterJid:e}:N.test(e)?{jidType:"hosted",hostedDeviceJid:e}:L.test(e)?{jidType:"hostedLid",hostedLidDeviceJid:e}:{jidType:"unknown"}}function q(e){return"status@broadcast"===e?e:null}function J(e){if(I.test(e)||_.test(e)||h.test(e)||b.test(e))return e;if(A.test(e)){return k(e.substr(0,e.indexOf(":")))}return null}function z(e){return P.test(e)?e:null}function X(e){return c.test(e)?e:null}function Z(e){if(e.endsWith(u))return e.slice(0,-u.length);throw(0,o.default)(`groupId called with non-group jid "${e}"`)}function ee(e){const t=$(e);return"unknown"===t.jidType?e:"status"===t.jidType?t.statusJid:(t.jidType,Q(t).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3"))}function te(e){return e.endsWith(u)?e:null}function ne(e,t){if(e.endsWith(m))return t.phoneUser(e);if(e.endsWith(d))return t.msgrUser(e);if(e.endsWith(p))return t.interopUser(e);if(e.endsWith(T))return t.lidUser(e);if(null!=te(e))return t.group(e);throw(0,o.default)(`Can not switch on chat jid ${e}`)}function re(e,t){if(e.endsWith(m))return t.user(e);if(null!=te(e))return t.group(e);throw(0,o.default)(`Can not switch on chat jid ${e}`)}function ie(e){if(e.endsWith(m))return m;if(e.endsWith(d))return d;if(e.endsWith(T))return T;throw(0,o.default)(`userDomainFromJid called with non-user jid "${e}"`)}function oe(e){return`${G(e)}:0${ie(e)}`}function ae(e){return e}function se(e){return e}function le(e){return e}function ue(e){return e}function ce(e){return e}function de(e){return e}function pe(e){return e}function fe(e){return e}function _e(e){return e}function ge(e){return e}function he(e){return e}},27522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(62089),i=(0,n(45753).memoizeWithArgs)((function(e){return(0,r.encodeB64)(function(e,t){let n,r,i,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let d=1732584193,p=-271733879,f=-1732584194,_=271733878;for(let t=0;t<e.length;t+=16)n=d,r=p,i=f,a=_,d=s(d,p,f,_,e[t],7,-680876936),_=s(_,d,p,f,e[t+1],12,-389564586),f=s(f,_,d,p,e[t+2],17,606105819),p=s(p,f,_,d,e[t+3],22,-1044525330),d=s(d,p,f,_,e[t+4],7,-176418897),_=s(_,d,p,f,e[t+5],12,1200080426),f=s(f,_,d,p,e[t+6],17,-1473231341),p=s(p,f,_,d,e[t+7],22,-45705983),d=s(d,p,f,_,e[t+8],7,1770035416),_=s(_,d,p,f,e[t+9],12,-1958414417),f=s(f,_,d,p,e[t+10],17,-42063),p=s(p,f,_,d,e[t+11],22,-1990404162),d=s(d,p,f,_,e[t+12],7,1804603682),_=s(_,d,p,f,e[t+13],12,-40341101),f=s(f,_,d,p,e[t+14],17,-1502002290),p=s(p,f,_,d,e[t+15],22,1236535329),d=l(d,p,f,_,e[t+1],5,-165796510),_=l(_,d,p,f,e[t+6],9,-1069501632),f=l(f,_,d,p,e[t+11],14,643717713),p=l(p,f,_,d,e[t],20,-373897302),d=l(d,p,f,_,e[t+5],5,-701558691),_=l(_,d,p,f,e[t+10],9,38016083),f=l(f,_,d,p,e[t+15],14,-660478335),p=l(p,f,_,d,e[t+4],20,-405537848),d=l(d,p,f,_,e[t+9],5,568446438),_=l(_,d,p,f,e[t+14],9,-1019803690),f=l(f,_,d,p,e[t+3],14,-187363961),p=l(p,f,_,d,e[t+8],20,1163531501),d=l(d,p,f,_,e[t+13],5,-1444681467),_=l(_,d,p,f,e[t+2],9,-51403784),f=l(f,_,d,p,e[t+7],14,1735328473),p=l(p,f,_,d,e[t+12],20,-1926607734),d=u(d,p,f,_,e[t+5],4,-378558),_=u(_,d,p,f,e[t+8],11,-2022574463),f=u(f,_,d,p,e[t+11],16,1839030562),p=u(p,f,_,d,e[t+14],23,-35309556),d=u(d,p,f,_,e[t+1],4,-1530992060),_=u(_,d,p,f,e[t+4],11,1272893353),f=u(f,_,d,p,e[t+7],16,-155497632),p=u(p,f,_,d,e[t+10],23,-1094730640),d=u(d,p,f,_,e[t+13],4,681279174),_=u(_,d,p,f,e[t],11,-358537222),f=u(f,_,d,p,e[t+3],16,-722521979),p=u(p,f,_,d,e[t+6],23,76029189),d=u(d,p,f,_,e[t+9],4,-640364487),_=u(_,d,p,f,e[t+12],11,-421815835),f=u(f,_,d,p,e[t+15],16,530742520),p=u(p,f,_,d,e[t+2],23,-995338651),d=c(d,p,f,_,e[t],6,-198630844),_=c(_,d,p,f,e[t+7],10,1126891415),f=c(f,_,d,p,e[t+14],15,-1416354905),p=c(p,f,_,d,e[t+5],21,-57434055),d=c(d,p,f,_,e[t+12],6,1700485571),_=c(_,d,p,f,e[t+3],10,-1894986606),f=c(f,_,d,p,e[t+10],15,-1051523),p=c(p,f,_,d,e[t+1],21,-2054922799),d=c(d,p,f,_,e[t+8],6,1873313359),_=c(_,d,p,f,e[t+15],10,-30611744),f=c(f,_,d,p,e[t+6],15,-1560198380),p=c(p,f,_,d,e[t+13],21,1309151649),d=c(d,p,f,_,e[t+4],6,-145523070),_=c(_,d,p,f,e[t+11],10,-1120210379),f=c(f,_,d,p,e[t+2],15,718787259),p=c(p,f,_,d,e[t+9],21,-343485551),d=o(d,n),p=o(p,r),f=o(f,i),_=o(_,a);return new Uint8Array([255&d,d>>>8&255,d>>>16&255,d>>>24&255,255&p,p>>>8&255,p>>>16&255,p>>>24&255,255&f,f>>>8&255,f>>>16&255,f>>>24&255,255&_,_>>>8&255,_>>>16&255,_>>>24&255])}(function(e){let t;const n=[];for(n[(e.length>>2)-1]=0,t=0;t<n.length;t+=1)n[t]=0;const r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length))}),(e=>e));function o(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,i,a){return o((s=o(o(t,e),o(r,a)))<<(l=i)|s>>>32-l,n);var s,l}function s(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)}function l(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)}function u(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)}function c(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)}t.default=i},9612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventLoopDelay=function(){const e=(0,r.performanceAbsoluteNow)();return new Promise((t=>{setTimeout((()=>{t((0,r.performanceAbsoluteNow)()-e)}),0)}))};var r=n(29987)},49619:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";if(null==e)throw(0,i.default)(`Unexpected null or undefined: ${t}`);return e};var i=r(n(82065))},25398:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=n;const r=function(){if(t===n){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=e.call(this,...i)}return t};return r.reset=()=>{t=n},r};const n={}},38672:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.compileCountryRegexes=d,t.extractDigits=function(e){const t=e.match(/\d+/g);return null!=t?t.join(""):""},t.findCC=p,t.formatPhone=f,t.formattedPhoneNumber=function(e){return f((0,a.phoneNumberFromJid)(e))},t.isPotentiallyPhoneNumber=function(e){return _.test(e)},t.isPotentiallyValid=function(e,t){if(!/^\d+$/.test(t))return!1;const n=d(e);if(!n)return!1;return"number"==typeof n.lengths?n.lengths===t.length:n.lengths.includes(t.length)},t.phoneCC=function(e){return p(e)};var i=r(n(73218)),o=n(13897),a=n(44037);const s=/^(1|2[07]|3[0-469]|4[013-9]|5[1-8]|6[0-6]|7|8[1246]|9[0-58])/,l=new Map;class u{constructor(e){let t;if(Array.isArray(e)){t=e[0];let n=e[1];null!=n&&-1!==n&&(Array.isArray(n)||(n=[n]),this._leadins=n.map((function(e){return new RegExp("^("+e+")")}))),this._formatString=e[2]}else t=e;this._regex=new RegExp(`^${(0,o.inflatePhoneRegex)(t)}$`)}testAndFormat(e){if(!this._regex.test(e)||!this._checkLeadins(e))return;if("string"==typeof this._formatString)return e.replace(this._regex,this._formatString);const t=this._regex.exec(e);return null!=t?t.slice(1).join(null!=this._formatString?"-":" "):void 0}_checkLeadins(e){return!this._leadins||this._leadins.some((function(t){return t.test(e)}))}}const c={};function d(e){if(null!=c[e])return c[e];const t=null!=i.default[e]?JSON.parse(`[${i.default[e]}]`):null;if(null==t)return null;const n=t.pop();return c[e]={lengths:n,formats:t.map((function(e){return new u(e)}))}}function p(e){const t=e.match(s);return t?t[0]:e.length>=3?e.substring(0,3):e}function f(e){let t=l.get(e);return null==t&&(t=function(e){const t=e.length>0&&"+"===e[0]?e.substring(1):e,n=p(t);if(!n)return t;const r=t.substring(n.length),i=d(n);if(!i)return"+"+n+" "+r;const o=i.formats;for(let e=0;e<o.length;e++){const t=o[e].testAndFormat(r);if(null!=t&&""!==t)return"+"+n+" "+t}return"+"+n+" "+r}(e),l.set(e,t)),t}const _=/^\+*[\d ()]+$/},22207:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.asyncChain=function(e,t){if(e.success)return t(e.value);return Promise.resolve(e)},t.asyncMapError=c,t.asyncMapResult=l,t.catchError=function(e){return function(){var t=(0,i.default)((function*(t){yield c(t,e)}));return function(){return t.apply(this,arguments)}}()},t.chain=function(e,t){if(e.success)return t(e.value);return e},t.makeError=o,t.makeResult=a,t.mapAsyncResult=function(){return s.apply(this,arguments)},t.mapError=function(e,t){if(e.success)return a(e.value);return o(t(e.error),e.payload)},t.mapResult=function(e,t){if(!e.success)return e;return a(t(e.value))},t.onResult=function(e){return t=>l(t,e)};var i=r(n(11504));function o(e,t){return null!=t?{success:!1,error:e,payload:t}:{success:!1,error:e}}function a(e){return{success:!0,value:e}}function s(){return(s=(0,i.default)((function*(e,t){const n=yield e;return n.success?a(t(n.value)):n}))).apply(this,arguments)}function l(){return u.apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e,t){if(!e.success)return e;return a(yield t(e.value))}))).apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e,t){if(e.success)return a(e.value);return o(yield t(e.error),e.payload)}))).apply(this,arguments)}},78494:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ShiftTimer=void 0;var i=r(n(82065));function o(e){if(!(e>=0))throw(0,i.default)("ShiftTimer must be given delay >= 0")}t.ShiftTimer=class{constructor(e){this._timer=0,this._rafId=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0,this._run=()=>{const e=this._arg,t=this._foo;this._rafId=0,this._timer=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0,t(e)},this.onOrBefore=(e,t)=>{o(e);const n=Date.now()+e,r=this._upperBound;if(0!==r&&r<n)return;const i=this._lowerBound;0!==i&&n<i||(this._upperBound=n,this._rafId||this._timer&&!(n<this.ts)||this._setDelay(n,e,t))},this.forceRunNow=e=>{this._timer&&clearTimeout(this._timer),this._rafId&&cancelAnimationFrame(this._rafId),this._arg=e,this._run()},this.cancel=()=>{this._timer&&clearTimeout(this._timer),this._rafId&&cancelAnimationFrame(this._rafId),this._timer=0,this._rafId=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0},this._foo=e}onOrBeforeRepaint(e){if(this._rafId)return;const t=Date.now(),n=this._lowerBound;if(0!==n&&t<n)return;const r=this._upperBound;(0===r||t<r)&&(this._upperBound=t),this._timer&&(clearTimeout(this._timer),this._timer=0),(!this.ts||this.ts>t)&&(this.ts=t),this._arg=e,this._rafId=requestAnimationFrame(this._run)}onOrAfter(e,t){o(e);const n=Date.now()+e,r=this._lowerBound;if(0!==r&&n<r)return;const i=this._upperBound;0!==i&&i<n||(this._lowerBound=n,(!this._timer||this.ts<n)&&this._setDelay(n,e,t))}debounce(e,t){o(e),this._debounce(Date.now(),e,t)}debounceAndCap(e,t,n){o(e),o(t);const r=Date.now(),i=r+t,a=this._lowerBound,s=this._upperBound;(0===a||a<=i)&&(0===s||i<s)&&(this._upperBound=i),this._debounce(r,e,n)}forceRunNowIfScheduled(){this._timer?(clearTimeout(this._timer),this._run()):this._rafId&&(cancelAnimationFrame(this._rafId),this._run())}isScheduled(){return 0!==this._timer||0!==this._rafId}_debounce(e,t,n){const r=e+t,i=this._lowerBound;if(0!==i&&r<i)return;const o=this.ts,a=this._upperBound;0!==a&&a<r?o<a&&this._setDelay(a,a-e,n):o<r&&this._setDelay(r,t,n)}_setDelay(e,t,n){if(this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._arg=n,this.ts=e,this._timer){const t=e-this._timerTs;if(-16<t&&t<16)return;clearTimeout(this._timer)}this._timer=setTimeout(this._run,t),this._timerTs=e}}},29987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YEAR_SECONDS=t.WEEK_SECONDS=t.WEEK_MILLISECONDS=t.MonotonicTimer=t.MINUTE_SECONDS=t.MINUTE_MILLISECONDS=t.MAX_INT=t.HOUR_SECONDS=t.HOUR_MILLISECONDS=t.FIVE_MINUTES=t.DEFAULT_UNIXTIME=t.DAY_SECONDS=t.DAY_MILLISECONDS=void 0,t.cappedMillisecondsUntil=h,t.castLongIntToUnixTime=function(e){return"number"!=typeof e?(0,r.hexLongIsNegative)(e)?c:u:f(e)},t.castMilliSecondsToUnixTime=_,t.castMillisTimeToUnixTime=function(e){if(null==e)return e;return e>u?_(e):f(e)},t.castToMillisTime=g,t.castToUnixTime=f,t.castUnixTimeToMillisTime=function(e){return 1e3*e},t.convertHexToDate=function(e){const t=Number.parseInt(e,16);if(Number.isFinite(t))return new Date(1e3*f(t));return null},t.daysDiff=function(e,t){const n=Math.abs(e-t);return Math.ceil(n/s)},t.delayUntil=function(e){const t=h(e);return new Promise((e=>{setTimeout(e,t)}))},t.fromMillisTime=function(e){return e},t.futureUnixTime=function(e,t){const n=null!=t?t:A();return f(Math.ceil(n+Math.max(e,0)))},t.getClockSkew=function(){return p},t.happenedWithin=function(e,t){return S(A(),e,t)},t.happenedWithinAt=S,t.isInFuture=function(e){return m(e)>0},t.isOverflowTime=function(e){return e<c||e>u},t.isWithinNext24h=function(e){return e-A()<=o},t.midnight=function(){return f((new Date).setHours(0,0,0,0)/1e3-p)},t.midnightOn=function(e){return f(v(e).setHours(0,0,0,0)/1e3-p)},t.millisTime=function(){return I()-1e3*p},t.monotonicTime=E,t.monotonicTimeSince=y,t.oldest=function(e,t){return e<t?e:t},t.pastUnixTime=function(e,t){const n=null!=t?t:A();return f(Math.ceil(n-Math.max(e,0)))},t.performanceAbsoluteNow=I,t.sameDay=function(e,t){if(Math.abs(e-t)>o)return!1;const n=d.time===e?d.day:v(e+p).getDay(),r=d.time===t?d.day:v(t+p).getDay();return d.time=t,d.day=r,n===r},t.secondsUntil=m,t.setClockSkew=function(e){p=e},t.timeSince_USE_ONLY_IF_APPROVED=function(e){return Math.max(A()-e,0)},t.timeoutFor=function(e,t){const n=A(),r=Math.max(e+t-n,0);return Math.min(1e3*r,~(1<<31))},t.toDate=v,t.toHttpHeaderDate=function(e){return v(e).toUTCString()},t.unixTime=A,t.unixTimeMs=function(){return Date.now()-1e3*p},t.unixTimeWithoutClockSkewCorrection=function(){return f(Date.now()/1e3)},t.unskewedDate_USE_ONLY_IF_APPROVED=function(){return new Date};var r=n(65982);t.MINUTE_SECONDS=60;t.FIVE_MINUTES=300;const i=3600;t.HOUR_SECONDS=i;const o=86400;t.DAY_SECONDS=o;t.WEEK_SECONDS=604800;t.YEAR_SECONDS=31536e3;t.MINUTE_MILLISECONDS=6e4;const a=36e5;t.HOUR_MILLISECONDS=a;const s=864e5;t.DAY_MILLISECONDS=s;t.WEEK_MILLISECONDS=6048e5;const l=1<<31;t.DEFAULT_UNIXTIME=l;const u=2147483647;t.MAX_INT=u;const c=-2147483647,d={time:0,day:-4};let p=0;function f(e){return Math.max(c,Math.min(0|e,u))}function _(e){return f(e/1e3)}function g(e){return e}function h(e){const t=Math.max(e-A(),0);return Math.min(1e3*t,~(1<<31))}function A(){return f(Date.now()/1e3-p)}function m(e){return Math.max(e-A(),0)}function E(){return performance.now()}function y(e){return Math.floor(performance.now()-e)}function S(e,t,n){return Math.abs(e-t)<=n}function v(e){return new Date(1e3*e)}function I(){return Date.now()}t.MonotonicTimer=class{constructor(){const e=E();this._initTime=e,this._startTime=e}reset(){this._startTime=E()}elapsed(){return y(this._startTime)}cumulative(){return y(this._initTime)}}},25303:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBoolean=function(e){return"boolean"==typeof e},t.isFunction=function(e){return"function"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e}},52210:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatArrayBuffers=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e+t.byteLength),0),i=new Uint8Array(r);let o=0;return t.forEach((e=>{i.set(new Uint8Array(e),o),o+=e.byteLength})),i.buffer}},20170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=function(e,t){const n=new Map;for(let r=0;r<e.length;r++){const i=t(e[r]),o=n.get(i);null==o?n.set(i,[e[r]]):o.push(e[r])}return Array.from(n.entries())}},77791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=[],r=e.length,i=t.length,o=Math.max(r,i);for(let a=0;a<o;a++)a<r&&n.push(e[a]),a<i&&n.push(t[a]);return n}},78957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null==e)return null;const t=e.replace(/\s+$/,"");e!==t&&Math.random()<1e-5&&(__LOG__(3,void 0,void 0,!0)`base64 sanitized due to extra whitespace`,SEND_LOGS("media-key-sanitize"));return t}},60180:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(82065));t.default=class{constructor(e){if(e<=0)throw(0,i.default)("BitArray:numBits should be positive");this._numBits=e,this._array=new Uint8Array(Math.ceil(this._numBits/8))}get(e){const[t,n]=this._getArrayIndexOffset(e);return Boolean(this._array[t]>>n&1)}set(e){const[t,n]=this._getArrayIndexOffset(e);this._array[t]|=1<<n}unset(e){const[t,n]=this._getArrayIndexOffset(e);this._array[t]&=~(1<<n)}toggle(e){const[t,n]=this._getArrayIndexOffset(e);this._array[t]^=1<<n}clear(){this._array=new Uint8Array(Math.ceil(this._numBits/8))}toArray(){const e=[];for(let t=0;t<this._numBits;t++)e.push(this.get(t));return e}toString(){return this.toArray().map((e=>e?"1":"0")).join("")}_getArrayIndexOffset(e){if(e<0||e>=this._numBits)throw(0,i.default)("BitArray:index out of bounds");const t=Math.floor(e/8);return[t,e-8*t]}}},83946:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.LruCache=void 0;var i=r(n(82065)),o=n(78494);class a{constructor(e,t){this.key=e,this.value=t,this.prev=null,this.next=null}}t.LruCache=class{constructor(e){var t;this._keyToNode=new Map,this.purgeNow=()=>{for(let e=this._placeholderTail.prev;this._currentSize>this._sizeLimit&&e!==this._placeholderHead;e=e?e.prev:null){if(null==e)throw(0,i.default)("The linked list is not constructed properly.");const{key:t,value:n}=e;this._shouldEvict(t,n)&&(this.delete(t),this._onEvict&&this._onEvict(t,n))}this._onPurge&&this._onPurge(this._keyToNode)},this._sizeLimit=e.sizeLimit,this._getSize=e.getSize,this._onPurge=e.onPurge,this._shouldEvict=null!==(t=e.shouldEvict)&&void 0!==t?t:()=>!0,this._onEvict=e.onEvict,this._onAdd=e.onAdd,this._onDelete=e.onDelete,this._currentSize=0,this._placeholderHead=new a("placeholder-head",null),this._placeholderTail=new a("placeholder-tail",null),this._placeholderHead.next=this._placeholderTail,this._placeholderTail.prev=this._placeholderHead,this._purgeTimer=new o.ShiftTimer((()=>this.purgeNow()))}get(e){if(!this._keyToNode.has(e))return null;const t=this._keyToNode.get(e);if(null==t)return null;const n=t.prev,r=t.next;n&&(n.next=r),r&&(r.prev=n);const o=this._placeholderHead.next;if(null==o)throw(0,i.default)("The linked list is not constructed properly.");return this._placeholderHead.next=t,o.prev=t,t.prev=this._placeholderHead,t.next=o,t.value}has(e){return this._keyToNode.has(e)}touch(e){this.get(e)}put(e,t){0!==this._sizeLimit&&(this._getSize(t)>this._sizeLimit?__LOG__(3)`Blob size is larger than the limit of the whole store.`:(this.delete(e),this._add(e,t),this.schedulePurge()))}_add(e,t){const n=new a(e,t);this._keyToNode.set(e,n);const r=this._placeholderHead.next;if(null==r)throw(0,i.default)("The linked list is not constructed properly.");this._placeholderHead.next=n,r.prev=n,n.prev=this._placeholderHead,n.next=r,this._currentSize+=this._getSize(t),this._onAdd&&this._onAdd(e,t)}delete(e){if(!this._keyToNode.has(e))return;const t=this._keyToNode.get(e);if(null==t)return;this._currentSize-=this._getSize(t.value);const n=t.prev,r=t.next;n&&(n.next=r),r&&(r.prev=n),this._keyToNode.delete(e),this._onDelete&&this._onDelete(e,t.value)}clear(){this._keyToNode.clear(),this._currentSize=0,this._placeholderHead.next=this._placeholderTail,this._placeholderTail.prev=this._placeholderHead,this._onClear&&this._onClear()}schedulePurge(){this._purgeTimer.onOrBefore(1e3)}getCurrentSize(){return this._currentSize}getPlaceholderHead(){return this._placeholderHead}}},49910:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(49619));class o{constructor(e){this._children={},this._indices=[],e&&(this._data=e)}static fromBackwardsStrings(e,t){return e.reduce(((e,t,n)=>e.addBackwardsString(t,n)),new o(t))._optimize()}addBackwardsString(e,t){let n=e.length-1,r=this;for(;n>=0;){const i=e.charAt(n);r._addIndex(t),r=r.get(i)||r.set(i,new o),n--}return r._addIndex(t),this}static fromForwardsStrings(e,t){return e.reduce(((e,t,n)=>e.addForwardsString(t,n)),new o(t))._optimize()}addForwardsString(e,t){let n=0,r=this;for(;n<e.length;){const i=e.charAt(n);r._addIndex(t),r=r.get(i)||r.set(i,new o),n++}return r._addIndex(t),this}set(e,t){return this._children[e]=t,t}get(e){return this._children[e]}getChildren(){return Object.keys(this._children).map((e=>({prefix:e,node:(0,i.default)(this.get(e),"this.get(prefix)")})))}hasChildren(){return!function(e){for(const t in e)return!1;return!0}(this._children)}search(e){const t=this._data;if(!t)return[];let n=this;for(let t=0;t<e.length&&n;t++){const r=e[t];n=n.get(r)}if(!n)return[];return n.getIndices().map((e=>t[e]))}_addIndex(e){this._indices.push(e)}getIndices(){const e=this._indices,t=Object.keys(this._children);return 1===t.length&&0===this._indices.length?this._children[t[0]].getIndices():e}_optimize(){if(!this.hasChildren())return this;const e=Object.keys(this._children),t=this._children[e[0]]._indices;return e.forEach((e=>{this._children[e]._optimize()})),1===e.length&&this._indices.length===t.length&&(this._indices=[]),this}testOnlyGetChildrenProperty(){return this._children}testOnlyGetIndicesProperty(){return this._indices}}t.default=o},22194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,n)=>e===t[n]))}},76941:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.exponentialBackoffIterator=function*(e){const{factor:t,jitter:n,maxTimeout:r,minTimeout:s,retries:l}=(0,i.default)((0,i.default)({},a),e);let u=0;for(const e of(0,o.default)(t)){if(u++,u>l)return;const t=Math.random()*n*2-n+1;yield Math.min(s*e*t,r)}};var i=r(n(73982)),o=r(n(17154));const a={factor:2,jitter:0,maxTimeout:1/0};t.defaults=a},17154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function*(e){let t=1;for(;;)yield t,t*=e}},50872:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.findLink=I,t.findLinks=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!S.test(e))return[];y.lastIndex=0;const n=[];let r;for(;r=v(e);){const e=T(r,t);e&&n.push(e)}return n},t.validateEmail=function(e){const t=I(e);return!t||t.url!==e||"mailto:"!==t.scheme||null==t.username||""===t.username||null!=t.params&&""!==t.params||null!=t.anchor&&""!==t.anchor?null:t};var i=n(9228),o=r(n(28770));const a=Array.from(i.TLD).join("|"),s=/^https?:\/\/$/gi,l="\\w|[^\\s\0-]|%[0-9a-f][0-9a-f]",u=`${a}|xn--(?:${l})+`,c=`(?:${l})|(?:${l})(?:${l}|-)*(?:${l})`,d=`(?:${l}|[^\\s%])`,p=`[@!.?,(\\[{<:]*(?!${d}|#)`,f="0-9a-z!#$%&'*+/=?^_`{|}~\\-",_=`(^|\\W\\.|[^/\\w.]|_)((?:http|https)://|mailto:)?(${`\\b\\w[${f}]*(?:\\.[${f}]+)*`}@)?(${`(?!_)(?:(?:${c})\\.)+(${u})(?!\\.${c})`})(?:(?!${c})|(?=_))(?:(?=[^:/?#])|(:\\d{1,5})?(${`/${d}*?`})?(${`\\?(?!${p})${d}*?`})?(${`#${d}*?`})?(?=${p}))`,g=7,h=8,A=9,m=new Map([[34,34],[41,40],[62,60],[93,91],[125,123],[187,171],[8217,8216],[8221,8220]]),E=new Map([[34,34],[40,41],[60,62],[91,93],[123,125],[171,187],[8216,8217],[8220,8221]]),y=new RegExp(`${_}`,"ig"),S=new RegExp(`\\.(?:${u})`,"i");function v(e){try{return y.exec(e)}catch(t){return __LOG__(4,void 0,new Error,!0)`text size: ${e.length}, error: ${String(t)}`,SEND_LOGS("linkify-regex-error"),null}}function I(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return S.test(e)?(y.lastIndex=0,T(v(e),t)):null}function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;const n=e[1].length;let r=e[0];const a=e.index+n,{index:l}=e,u="_"===e[1];if(u&&l-1&&/\S/.test(e.input[l-1]))return null;const c=e[5];if(c&&c.startsWith("xn--")&&!i.TLD.has(o.default.toUnicode(c)))return null;if(e[6]){const t=parseInt(e[6].slice(1),10);if("0"===e[6][1]||!(0<t&&t<65536))return null}const d=[A,h,g].find((t=>e&&e[t]))||0;if(d){const t=[];let i=e[d];"_"===i.slice(-1)&&"_"===r[a-1]&&(r=r.slice(0,-1),e[d]=i=i.slice(0,-1));let o=0,s=0;for(let e=0;e<i.length;e++){const n=i.charCodeAt(e);n===s?(s=t.pop()||0,0===s&&(o=e)):E.has(n)?(0!==s&&t.push(s),s=E.get(n)):m.has(n)||0===s&&(o=e)}if(o!==i.length-1){const t=e.slice(2,d);t.splice(3,1),r=t.filter((e=>e)).join("")+i.slice(0,o+1),y.lastIndex=a+r.length}else r=r.slice(n)}else r=r.slice(n);let p=r,f=e[2];const _=Boolean(f&&f.match(s));if(t&&!_)return null;f?f=f.toLowerCase():(f=0===p.toLowerCase().indexOf("irc.")?"irc://":0===p.toLowerCase().indexOf("ftp.")?"ftp://":e[3]?"mailto:":"http://",p=f+p);const S=e[4];return{href:p,url:r,index:a,input:e.input,scheme:f,username:e[3],domain:S,port:e[6],path:e[g],params:e[h],anchor:e[A],isHttp:_}}},58273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToDebugString=o,t.debugStr=i,t.rebuildTemplate=function(e,t){const n=[e[0]];return t.forEach(((t,r)=>{n.push(i(t),e[r+1])})),n.join("")};var r=n(65982);function i(e){if("string"==typeof e)return`'${e}'`;if(null==e||"object"!=typeof e)return String(e);if(Array.isArray(e))return`[${e.join(",")}]`;if(e instanceof Uint8Array){if(e.length<64)return`<<${o(e)}>>`;{const t=e.subarray(0,32);return`<<${o(t)}, ${e.length-t.length} more bytes>>`}}return e instanceof Error?e.name?`(${e.name})`:"":e.toString===Object.prototype.toString?JSON.stringify(e,((e,t)=>e?String(t):t)):String(e)}function o(e){let t=!0,n=e.length;for(;t&&n;){const r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):(0,r.toHex)(e)}},8415:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.TAGS=p,t.getWaLoggerAdditionalOptions=f,t.initializeWaLogger=function(e){var t;c=e,null===(t=s)||void 0===t||t(),s=null},t.whenReady=function(){return u.apply(this,arguments)};var i=r(n(11504)),o=n(58273),a=r(n(49619));let s;const l=new Promise((e=>{s=e}));function u(){return(u=(0,i.default)((function*(){yield l}))).apply(this,arguments)}let c=null;function d(){return(0,a.default)(c,"WALogger called before initialization")}function p(e){return{TAGS:t=>p([...e,...t]),DEV:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"DEV",template:t,expressions:r,logString:a};return d().debug(a,e,s),f(s)},DEV_XMPP:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"DEV_XMPP",template:t,expressions:r,logString:a};return d().logRestricted(a,e,s),f(s)},LOG:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"LOG",template:t,expressions:r,logString:a};return d().info(a,e,s),f(s)},WARN:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"WARN",template:t,expressions:r,logString:a};return d().warn(a,e,s),f(s)},ERROR:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"ERROR",template:t,expressions:r,logString:a};let l;for(const e of r)if(e instanceof Error){l=e;break}return null!=l?d().error(a,e,l,s):d().error(a,e,void 0,s),f(s)},CATCHING:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"CATCHING",template:t,expressions:r,logString:a};return d().error(a,e,void 0,s),f(s)},EXPECTED_ERROR:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=(0,o.rebuildTemplate)(t,r),s={level:"ERROR",template:t,expressions:r,logString:a,tags:[...e]};return f(s)}}}function f(e){return{verbose:()=>(e.verbose=!0,f(e)),color:t=>(e.color=t,f(e)),devConsole:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d().devConsole(e.level,e.logString,[],...n),f(e)},sendLogs:(t,n)=>{var r,i;if(null!=d().sendLogs)e.sendLogs={reason:t,sampling:n},null===(r=(i=d()).sendLogs)||void 0===r||r.call(i,e);else if("ERROR"!==e.level&&"CATCHING"!==e.level)return p([]).ERROR`[${t}] ${e.logString}`;return f(e)},tags:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o;(e.tags=n,null!=d().tags)&&(null===(i=(o=d()).tags)||void 0===i||i.call(o,n));return f(e)},expect:t=>{var n,r,i,o,a,s,l;if("ERROR"!==e.level)return f(e);let u;for(const t of e.expressions)if(t instanceof Error){u=t;break}const c=null!==(n=null!==(r=null===(i=u)||void 0===i?void 0:i.message)&&void 0!==r?r:null===(o=u)||void 0===o?void 0:o.name)&&void 0!==n?n:null===(a=u)||void 0===a?void 0:a.description;for(const n of t){var p,_;if(null==c?void 0:c.includes(n))return d().error(e.logString,[...null!==(p=e.tags)&&void 0!==p?p:[],"expected-error-log"],null!==(_=u)&&void 0!==_?_:void 0,e),f(e)}return d().error(e.logString,null!==(s=null==e?void 0:e.tags)&&void 0!==s?s:[],null!==(l=u)&&void 0!==l?l:void 0,e),f(e)}}}},45753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoizeCache=r,t.clearAllMemoizeCache=function(){n.forEach((e=>e.clear()))},t.memoizeWithArgs=function(e,t){let n;return function(){n||(n=r());const i=t(...arguments);let o=n.get(i);return null==o&&(o=e(...arguments),n.set(i,o)),o}};const n=[];function r(){const e=new Map;return n.push(e),e}},36432:(e,t)=>{"use strict";function n(e,t){const r=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const a=t?t.apply(this,i):i[0];if(null==a)return e.apply(this,i);const s=r.cache;if(s.has(a))return s.get(a);const l=e.apply(this,i);return r.cache=s.set(a,l)||s,l};return r.cache=new(n.Cache||Map),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.Cache=Map},89623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRE_METRIC=void 0;const r=n(54302)({DECRYPT_MESSAGE_FINAL:"decrypt_message_final",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",DELETE_THREAD:"delete_thread",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ICDC_ERROR:"icdc_error",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RETRY_RECEIPTS_SENT:"retry_receipts_sent",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",APP_STATE_SYNC_DAILY:"app_state_sync_daily",SYNCD:"syncd",SEND_MESSAGE:"send_message",RECEIVE_MESSAGE:"receive_message",SYNCD_KEY_ROTATION:"syncd_key_rotation",REMOVE_PARTICIPANTS:"remove_participants",CREATE_GROUP:"create_group",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_DISCONNECT:"wa_disconnect",WA_JOB_MANAGER:"wa_job_manager",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",ONE_QUEUE:"one_queue",PROTOCOL_QUEUE_CONSUMER:"protocol_queue_consumer"});t.PRE_METRIC=r},90649:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=void 0,t.startMetric=function(e,t,r){null==r&&n++;const o=null!=r?r:n;let a="open";i(null==r?{name:e,stage:"START",instanceKey:o,annotations:t}:{name:e,stage:"RESUME",instanceKey:o,annotations:t});return{addPoint(t,n){i({name:e,stage:"POINT",reason:t,instanceKey:o,annotations:n})},addAnnotations(t){i({name:e,stage:"ANNOTATE",instanceKey:o,annotations:t})},endSuccess(t){i({name:e,stage:"SUCCESS",instanceKey:o,annotations:t}),a="closed"},endFail(t,n){i({name:e,stage:"FAIL",reason:t,instanceKey:o,annotations:n}),a="closed"},getFlowDetails:()=>({name:e,instanceKey:o}),isActive:()=>"open"===a}},t.subscribe=void 0;let n=0;const r=function(){const e=[];return{subscribe:function(t){e.push(t)},notify:function(t){0===e.length&&__LOG__(3)`[PRE] There are no subscribers to PRE events`,e.forEach((e=>{e(t)}))},clear:function(){__LOG__(3)`Removing all listeners from PRE_METRICS`,e.length=0}}}(),i=r.notify,o=r.clear;t.clear=o;const a=r.subscribe;t.subscribe=a},75993:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.astralRange=void 0,t.length=function(e){const t=e.match(n);return t?t.length:0},t.substring=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;const i=e.match(n);if(!i)return"";return i.slice(Math.max(0,t),Math.max(0,r)).join("")},t.toArray=function(e){return e.match(n)||[]};const n=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;t.astralRange=n},8450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},51746:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSuspiciousCharacters=function(e,t,n,s){const l=e.split(".");let p,f=!1;if(l.forEach((e=>{if(f=!e.match(d),f){if(p)return null;p=e}})),null==p||f)return null;const _=[];let g=!0;const h=(0,i.toArray)(p);for(let e=0;e<h.length;e++){const t=h[e];if(g=g&&c(t),!g&&o[t]){if(_.length>=2)return null;_.push(t)}}if(g)return u(n)||u(t)||s.some((e=>function(e){return a.has(e)}(e)))?null:new Set(h);if(!_.length)return null;const A=_.filter((e=>{const i=o[e];if(null==i)return!1;if(s.some((e=>i.includes(e))))return!1;const a=new Set;for(let e=0;e<i.length;e++){const t=r.LANGUAGE_TO_REGIONS[i[e]];if(null!=t)for(let e=0;e<t.length;e++)a.add(t[e])}return!a.has(n)&&!a.has(t)}));return A.length?new Set(A):null};var r=n(5570),i=n(75993);const o={:["ast","ksf","bas","ca","cs","dua","nl","ee","ewo","fo","fr","gl","kl","hu","is","ga","dyo","kea","kkj","nmg","lkt","lag","ln","lu","mas","nnh","jgo","pt","qu","seh","sk","es","to","vai","vi","wae","cy","fy","yav","yo"],:["af","agq","bss","bfd","bas","bkv","btt","nl","igb","ewo","fr","fur","gaj","gby","kl","jab","atg","jbu","kkj","naq","ksh","ku","nmb","lmp","ln","mda","mg","mas","mzm","jgo","nin","ann","ro","sg","scn","srn","yer","tr","wa","cy","yav","yle"],:["agg","ast","az","br","ca","co","cs","nl","etr","et","fr","gl","de","tof","god","hu","tbd","geb","ksh","kup","nds","lb","arn","oc","sg","sk","es","gsw","dts","tr","tk","vo","wa","wae","fy","yll"],:["mt"],:["agq","bss","bfd","bas","bkv","btt","ddn","igb","kjy","ich","gux","haw","jab","iby","idu","jbu","kub","nmg","lv","mda","mi","mas","mql","nin","prg","gd","to","yba","yav"],:["az","crh","tr"],:["lv"],:["dsb","nv","pl","hsb"],:["bs","hr","cs","dzg","et","fi","smn","geb","khq","ses","kun","lkt","lv","lt","dsb","se","nso","prg","sr","sh","sms","sk","sl","taq","twq","tuq","hsb","wqe","dje"],:["ckl","ank","ha","ikx","kai","hia","mbu","anc","nin","pip","tal","tan","wja","wji"],:["naq"],:["naq"],:["liv"],:["fmp","dud","tmh"],:["fub","yay","bkc","bjt","bcn","bas","bsq","bmq","fue","bys","bwr","cky","fuq","ckl","asg","dbq","dnj","dgh","dow","dua","enn","ff","gby","gba","gmm","ank","gde","gkp","jgk","ha","hbb","ikx","kkj","hig","kzr","kai","kpe","nmg","hia","ffm","mbo","mbu","mif","mzm","mua","sur","anc","fuv","nin","dgi","pbi","pip","fuf","cla","sav","srr","sld","sok","tal","tan","yer","ttr","tik","kdl","tsw","vai","vut","wja","wji","fuh","gnd"],:["tzm","kab","okr","shi","tmh","taq"],:["tzm","kab","shi"],:["tzm","kab","shi","tmh","taq"],:[],:["izi","yaz","blt","vi"],:["yay","bom","bin","mfn","dzg","igb","enn","gkn","iby","ikk","ikw","izi","okr","yaz","blt","tan","tuq","vi","yo"],:["avu","mfn","igb","enn","iby","ig","ige","ikk","ikw","izi","okr","blt","tan","vi"]},a=new Set(["abq","ab","ady","av","az","ba","be","bs","bg","bua","ce","ckt","cu","cv","crh","dar","dng","myv","evn","gag","inh","kbd","xal","krc","kaa","kk","kjh","kca","ky","kv","koi","kpy","kum","lbe","lez","mk","mns","chm","mdf","mn","ttt","gld","yrk","nog","os","ru","rue","sr","sh","cjs","alt","tab","tg","tt","tkr","tk","tyv","ude","udm","uk","uz","mrj","sah"]),s=new Set(["374","994","375","387","359","995","7","383","996","389","373","976","382","381","992","993","380","998"]),l="";function u(e){return s.has(e)}function c(e){return l.includes(e)}const d=new RegExp("^[a-z0-9-]+$")},5570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LANGUAGE_TO_REGIONS=void 0;t.LANGUAGE_TO_REGIONS={fub:["237","235","234"],af:["237","27"],agq:["237"],yay:["234"],bss:["237"],agg:["675"],ast:["34"],avu:["243","211"],az:["994"],bkc:["237","241"],ksf:["237"],bfd:["237"],bjt:["221"],bcn:["234"],bas:["237"],bsq:["231"],bkv:["234"],bom:["234"],btt:["234"],bin:["234"],bmq:["226","223"],bs:["387","385","383","382","381"],fue:["229","228"],br:["33"],bys:["234"],bwr:["234"],cky:["234"],ca:["376","33","39","34"],tzm:["212"],fuq:["234"],ckl:["234"],asg:["234"],co:["33","39"],crh:["7"],hr:["387","385","383","382","381"],mfn:["234"],cs:["420","421"],dbq:["237","234"],dnj:["225","231"],dzg:["235","227"],ddn:["229"],dgh:["234"],dow:["237"],dua:["229"],nl:["297","32","599","31","1","597"],igb:["234"],etr:["675"],enn:["234"],kgy:["675"],et:["372"],ich:["234"],ee:["229","233","228"],ewo:["237"],fo:["298"],fmp:["237"],fi:["358","46"],fr:["32","229","226","257","237","1","236","242","243","235","269","253","240","33","241","509","225","352","261","223","377","227","250","221","248","41","228","678"],fur:["39"],ff:["237","224","222","221"],gaj:["675"],gl:["34"],gby:["234"],gba:["236"],gmm:["237"],de:["43","32","49","423","352","41"],tof:["675"],god:["225"],ank:["234"],gkn:["234"],gux:["229","226","227","228"],gde:["237","234"],gkp:["224"],kl:["299"],jgk:["234"],ha:["229","237","235","233","225","227","234","249","228"],haw:["1"],hbb:["234"],hu:["36"],dud:["234"],jab:["234"],iby:["234"],is:["354"],idu:["234"],ig:["240"],ige:["234"],ikx:["256"],ikk:["234"],ikq:["234"],smn:["358"],ga:["353","44"],atg:["234"],izi:["234"],dyo:["220","221"],jbu:["237","234"],kab:["213"],kea:["238"],tbd:["675"],hig:["234"],kai:["234"],kkj:["237","236","242"],kzr:["237","235"],naq:["264"],geb:["675"],okr:["234"],ksh:["49"],ses:["223"],khq:["223"],kun:["291","251"],kup:["675"],kub:["237","234"],kpe:["224","231"],nmg:["237","240"],ku:["963","90"],lkt:["1"],hia:["234"],lag:["255"],lv:["371"],lmp:["237"],ln:["242","243"],liv:[],lt:["370"],yaz:["234"],nds:["55","49","31"],dsb:["49"],lu:["243"],lb:["32","33","49","352"],mda:["234"],mb:["261"],mt:["356"],mi:["64"],arn:["56"],mas:["254","255"],ffm:["223"],mql:["229","228"],mbo:["237"],mbu:["234"],mif:["237"],mzm:["234"],mua:["237","235"],sur:["234"],nv:["1"],anc:["234"],nnh:["237"],jgo:["237"],fuv:["237","234"],nin:["234"],dgi:["226"],se:["358","46","47"],nso:["27"],ann:["234"],oc:["33","39","377","34"],pbi:["237"],pip:["234"],pl:["48"],pt:["244","55","238","240","245","853","258","351","239","670"],prg:[],fuf:["224","223","221","232"],qu:["54","591","57","593","51"],ro:["373","40"],cla:["234"],sav:["221"],sg:["236","235","243"],gd:["44"],seh:["258"],sr:["387","385","383","382","381"],sh:["387","385","383","382","381"],srr:["220","221"],sch:["39"],sld:["226"],sms:["358"],sk:["420","421"],sl:["386"],sok:["235"],es:["54","501","591","56","57","506","53","593","503","240","502","504","52","505","507","595","51","34","1","598","58"],srn:["597"],gsw:["43","33","49","423","41"],shi:["212"],tal:["234"],tmh:["223"],taq:["226","223"],tan:["234"],twq:["227"],blt:["856","84"],yer:["234"],tuq:["235","218","227","234"],ttr:["234"],tik:["237"],to:["676"],dts:["223"],kdl:["234"],tsw:["234"],tr:["90"],tk:["993"],hsb:["49"],vai:["231","232"],vi:["855","84"],vo:[],vut:["237","234"],wja:["234"],wa:["32"],wae:["43","39","423","41"],wji:["234"],cy:["44"],fy:["31"],fuh:["229","226","227"],yba:["234"],yav:["237"],yle:["675"],yll:["675"],yo:["229","234"],dje:["227"],gnd:["237"]}},35685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSuspiciousCharacters=function(e,t,n,s){const l=e.match(a),u=l&&l[1];if(null==u)return null;const c=(0,o.phoneCC)(n);let d;if("whatsapp"===t)d="";else{const e=(0,i.interpretAndValidateJid)(t.toString());d="lidUser"!==e.jidType?(0,o.phoneCC)((0,i.toPhoneUserJid)(t)):"ZZ"}const p=s.map((e=>e.toLowerCase()));return(0,r.findSuspiciousCharacters)(u,d,c,p)};var r=n(51746),i=n(44037),o=n(38672);const a=/^(?:https?:\/\/)?([^/?#]+)(?:[/?#]|$)/i},50029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.castTypedArrays=function(e,t){if(t instanceof e)return t;if("string"==typeof t)return new e((0,r.decodeB64)(t));return new e(t)};var r=n(62089)},58358:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatTypedArrays=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.reduce(((e,t)=>e+t.length),n),i=new e(r);let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}},78481:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableXmlNode=void 0,t.convertBytesToUint=s;var i=r(n(82065)),o=r(n(9028)),a=n(57448);function s(e,t){let n=0;for(let r=0;r<t;r++)n=256*n+e[r];return n}t.ParsableXmlNode=class{constructor(e,t){this._name=e,this._node=t,this._children=Array.isArray(t.content)?t.content.map((t=>new this.constructor(e,t))):null}name(){return this._name}node(){return this._node}hasAttr(e){return(0,o.default)(this._node.attrs,e)}assertTag(e){this._node.tag!==e&&this.throw(`to be <${e}>`)}tag(){return this._node.tag}maybeChild(e){const t=this._children;if(!t)return null;for(let n=0;n<t.length;n++)if(t[n].tag()===e)return t[n];return null}hasChild(e){return!!this.maybeChild(e)}child(e){const t=this.maybeChild(e);return t||this.throw(`to have child <${e}>`)}assertAttr(e,t){const n=this.attrString(e);n!==t&&this.throw(`to have "${e}"="${t}", but instead has "${n}"`)}attrString(e){return(0,o.default)(this._node.attrs,e)?this.decodeAsString(this._node.attrs[e]):this.throw(`to have attribute "${e}"`)}forEachAttributeKey(e){const t=this._node.attrs;Object.keys(t).forEach((t=>e(t)))}maybeAttrString(e){return this.hasAttr(e)?this.decodeAsString(this._node.attrs[e]):null}maybeAttrInt(e,t,n){return this.hasAttr(e)?this.attrInt(e,t,n):null}attrEnumValues(e,t,n){const r=new Set(t),i=this.attrString(e);if(!r.has(i)){if(null!=n)return n;const t=Array.from(r).join("|");return this.throw(`to have "${e}"={${t}} but has value "${i}"`)}return i}attrEnum(e,t){const n=this.attrString(e);if(!(0,o.default)(t,n)){const r=Object.keys(t).join("|");return this.throw(`to have "${e}"={${r}} but has value "${n}"`)}return t[n]}attrEnumOrNullIfUnknown(e,t){const n=this.attrString(e);return(0,o.default)(t,n)?t[n]:null}attrEnumOrDefault(e,t,n){return this.hasAttr(e)?this.attrEnum(e,t):n}attrInt(e,t,n){const r=this.attrString(e);return this._parseInt(r,e,t,n)}_parseInt(e,t,n,r){const i=parseInt(e,10);return Number.isNaN(i)?this.throw(`to have "${t}"={integer} but has value "${e}"`):void 0!==n&&i<n?this.throw(`to have "${t}"={at least ${n}} but has value ${i}`):void 0!==r&&i>=r?this.throw(`to have "${t}"={below ${r}} but has value ${i}`):i}forEachChild(e){const t=this._children;if(t)t.forEach((t=>e(t)));else if(null!=this._node.content)return this.throw("to have children")}forEachChildWithTag(e,t){this.forEachChild((n=>{n.tag()===e&&t(n)}))}mapChildren(e){const t=this._children;return t||null==this._node.content?t?t.map((t=>e(t))):[]:this.throw("to have children")}mapChildrenWithTag(e,t){const n=this._children;return n||null==this._node.content?n?n.filter((t=>t.tag()===e)).map((e=>t(e))):[]:this.throw("to have children")}mapFirstChild(e){const t=this._children;return t&&0!==t.length?e(t[0]):this.throw("to have children")}hasContent(){return!this._children&&!!this._node.content}hasChildren(){return null!=this._children}getChildren(){return this._children}mapAttrKeys(e){const t=this.getAttrKeys();return t&&t.length?t.map(e):[]}getAttrKeys(){return Object.keys(this._node.attrs)}hasAttrs(){return(this._node.attrs?Object.keys(this._node.attrs):[]).length>0}getNode(){return this._node}unsafeSetChildren(e){this._children=e}unsafeSetNodeContent(e){this._node.content=e}contentUint(e){return s(this.contentBytes(e),e)}contentBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this._children)return this.throw("to have binary content, but has children instead");if(null!=this._node.content){const t=this._node.content;return-1!==e&&t.length!==e?this.throw(`to be ${e} bytes, but got ${t.length} instead`):t}return this.throw("to have content")}contentString(){return this._children?this.throw("to have string content, but has children instead"):null!=this._node.content?this._node.content:this.throw("to have content")}contentInt(e,t){const n=this.contentString();return this._parseInt(n,"content",e,t)}contentEnum(e){const t=this.contentString();if(!(0,o.default)(e,t)){const n=Object.keys(e).join("|");return this.throw(`to have content {${n}} but has value "${t}"`)}return e[t]}decodeAsString(e){if("string"!=typeof e)throw(0,i.default)(`decodeAsString: attribute is ${typeof e} not a string: ${e}`);return e}throw(e){throw new a.XmlParsingFailure(this._name,`expected <${this._node.tag}> ${e}`)}toString(){return this._node.toString()}}},78132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~"),n=t.length;let r=!1,i=0,o="",a=0;const s=["\n"];for(a=0;a<100;a++)s.push(s[a]+"    ");const l=function(e,t){const n=/^<[\w:\-.,]+/.exec(e[t-1]),r=/^<\/[\w:\-.,]+/.exec(e[t]);return null!=n&&null!=r&&n[0]===r[0]};for(a=0;a<n;a++)t[a].search(/<!/)>-1?(o+=s[i]+t[a],r=!0,(t[a].search(/-->/)>-1||t[a].search(/\]>/)>-1||t[a].search(/!DOCTYPE/)>-1)&&(r=!1)):t[a].search(/-->/)>-1||t[a].search(/\]>/)>-1?(o+=t[a],r=!1):l(t,a)?(o+=t[a],r||i--):t[a].search(/<\w/)>-1&&-1===t[a].search(/<\//)&&-1===t[a].search(/\/>/)?o=o+=r?t[a]:s[i++]+t[a]:t[a].search(/<\w/)>-1&&t[a].search(/<\//)>-1?o=o+=r?t[a]:s[i]+t[a]:t[a].search(/<\//)>-1?o=o+=r?t[a]:s[0===i?i:--i]+t[a]:t[a].search(/\/>/)>-1?o=o+=r?t[a]:s[i]+t[a]:t[a].search(/<\?/)>-1||t[a].search(/xmlns:/)>-1||t[a].search(/xmlns=/)>-1?o+=s[i]+t[a]:o+=t[a];return"\n"===o[0]?o.slice(1):o}},63260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlNode=void 0,t.attrsToString=o,t.uint8ArrayToDebugString=a;var r=n(65982);const i={};function o(e){const t=Object.keys(e);let n="";for(let r=0;r<t.length;r++){const i=t[r];n+=` ${i}="${e[i].toString()}"`}return n}function a(e){let t="";return t=0===e.length?"\x3c!-- empty binary --\x3e":e.length<50?(0,r.bytesToDebugString)(e):`\x3c!-- ${e.length} bytes --\x3e`,t}t.XmlNode=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.tag=e,this.attrs=t,this.content=n}toString(){let e="<"+this.tag;e+=o(this.attrs);const t=this.content;return Array.isArray(t)?e+=`>${t.map(String).join("")}</${this.tag}>`:t instanceof Uint8Array?e+=`>${a(t)}</${this.tag}>`:e+=null!=t?`>${String(t)}</${this.tag}>`:" />",e}}},57448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlParsingFailure=void 0;t.XmlParsingFailure=class{constructor(e,t){this.parser=e,this.reason=t}toString(){return`XmlParsingFailure: ${this.parser}: ${this.reason}`}}},53965:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptAddOn=function(){return m.apply(this,arguments)},t.encryptAddOn=function(){return A.apply(this,arguments)},t.getAddOnMessageSpec=_,t.getAdditionalAuthenticatedData=g,t.getMessageMediaType=h;var i=r(n(48926)),o=n(70362),a=r(n(49619)),s=n(25204),l=n(63020),u=n(77026),c=n(76757),d=n(67948),p=n(14356),f=n(86881);function _(e){switch(e){case"reaction":return{spec:u.Message$ReactionMessageSpec,usecase:s.UseCaseSecretModificationType.ENC_REACTION};case"poll_vote":return{spec:u.Message$PollVoteMessageSpec,usecase:s.UseCaseSecretModificationType.POLL_VOTE};case"comment":return{spec:u.MessageSpec,usecase:s.UseCaseSecretModificationType.ENC_COMMENT};case"event_response":return{spec:u.Message$EventResponseMessageSpec,usecase:s.UseCaseSecretModificationType.EVENT_RESPONSE};case"event_edit_encrypted":return{spec:u.MessageSpec,usecase:s.UseCaseSecretModificationType.EVENT_EDIT_ENCRYPTED}}}function g(e,t){switch(e){case"poll_vote":case"event_response":return`${t.stanzaId}\0${t.addOnSenderJid}`}}function h(e){switch(e){case"poll_vote":return c.MEDIA_TYPE.POLL_VOTE;case"reaction":return c.MEDIA_TYPE.REACTION;case"event_response":return c.MEDIA_TYPE.EVENT_RESPOND;default:return c.MEDIA_TYPE.NONE}}function A(){return(A=(0,i.default)((function*(e,t){try{const{messageSecret:n,iv:r,stanzaId:i,originalMessageSender:l,addOnSender:u}=t,c=(0,p.widToUserJid)(u),{spec:d,usecase:h}=(0,a.default)(_(e.type),"getAddOnMessageSpec(addOn.type)"),A=yield(0,s.createUseCaseSecret)({messageSecret:n,stanzaId:i,parentMsgOriginalSender:(0,p.widToUserJid)(l),modificationSender:c,modificationType:h}),m=(0,f.encodeProtobuf)(d,e.encode).readBuffer();return yield(0,o.gcmEncrypt)(A,r,m,g(e.type,{stanzaId:i,addOnSenderJid:c}))}catch(t){throw new l.MessageSecretErrorsWamEvent({messageSecretError:d.MESSAGE_SECRET_ERROR_TYPE.ENCRYPTION_ERROR,messageMediaType:h(e.type)}).commit(),t}}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t){try{const{messageSecret:n,iv:r,stanzaId:i,originalMessageSender:l,addOnSender:u}=t,c=(0,p.widToUserJid)(u),{usecase:d}=(0,a.default)(_(e.type),"getAddOnMessageSpec(addOn.type)"),f=yield(0,s.createUseCaseSecret)({messageSecret:n,stanzaId:i,parentMsgOriginalSender:(0,p.widToUserJid)(l),modificationSender:c,modificationType:d});return yield(0,o.gcmDecrypt)(f,r,e.encryptedAddOn,g(e.type,{stanzaId:i,addOnSenderJid:c}))}catch(t){throw new l.MessageSecretErrorsWamEvent({messageSecretError:d.MESSAGE_SECRET_ERROR_TYPE.DECRYPTION_ERROR,messageMediaType:h(e.type)}).commit(),t}}))).apply(this,arguments)}},45414:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddonTableMode=t.AddonProcessMode=void 0;const r=n(76672).Mirrored(["Unified","Pin","Comment","PollVote","Reaction","EventResponse","None"]);t.AddonTableMode=r;const i=n(76672).Mirrored(["OnlineReceive","HistorySync","Send"]);t.AddonProcessMode=i},21130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAddonMsgProcessor=function(e){return e},t.createAddonMsgProcessorDualEncrypted=function(e){return e},t.createAddonMsgProcessorWithRevokes=function(e){return e}},73641:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteAddonMsgsByParentKeys=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(45414),a=n(12554),s=n(91504),l=n(39056),u=n(64409),c=r(n(60001));function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t){let n;try{n=yield Promise.all(t.map((t=>a.addonInternalDBTable.bulkGetByParentMsgKey(e,[t])))).then((e=>[].concat(...e)))}catch(e){return}if(0===n.length)return;const r=yield(0,l.createAddonQplMarker)(l.AddonQplMarkerType.UI,{mode:e,type:l.AnnotationRequestType.BulkRemoveByParents,size:n.length});try{yield a.addonInternalDBTable.bulkRemoveByMsgKey(e,n.map((e=>e.id))),yield Promise.all((0,u.groupAddonsByProcessor)(n).map(function(){var e=(0,i.default)((function*(e){let{processor:t,addons:n}=e;yield t.updateCollection({add:[],remove:n.map((e=>e.id))})}));return function(){return e.apply(this,arguments)}}())),null==r||r.success()}catch(t){throw __LOG__(3)`deleteAddonMsgsByParentKeys for ${e}: ${t}`,null==r||r.fail(),t}}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){let{chatId:t,parentMsgKeys:n}=e;__LOG__(2)`deleteAddons job started for ${t}`;const r=n.map((e=>c.default.fromString(e))),i=[];for(const e of o.AddonTableMode.members())e!==o.AddonTableMode.None&&i.push(d(e,r));const a=yield Promise.allSettled(i);(0,s.hasSettledWithError)(a)?(__LOG__(3,void 0,void 0,!0,["addons","messaging"])`delete addons finished with errors`,SEND_LOGS("deleteAddonMsgsByParentKeys",1,"addons","messaging")):__LOG__(2)`deleteAddons job finished for ${t}`}))).apply(this,arguments)}},23071:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processMarkAsRead=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(12554),s=n(91504),l=n(64409);function u(){return c.apply(this,arguments)}function c(){return(c=(0,o.default)((function*(e){const t=Array.from((0,l.groupAddonsByProcessor)(e)).map(function(){var e=(0,o.default)((function*(e){return e.processor.updateCollection({add:e.addons,remove:[]}).catch((e=>{__LOG__(4,void 0,new Error)`failed updating UI collection: ${e}`}))}));return function(){return e.apply(this,arguments)}}());yield Promise.allSettled(t)}))).apply(this,arguments)}function d(){return(d=(0,o.default)((function*(e){const t=Array.from((0,l.groupAddonsByTableMode)(e)).map(function(){var e=(0,o.default)((function*(e){let[t,n]=e;return a.addonInternalDBTable.bulkUpsert(t,n).then((()=>u(n))).catch((e=>{throw __LOG__(2)`failed updating UI collection: ${e}`,e}))}));return function(){return e.apply(this,arguments)}}()),n=yield Promise.allSettled(t);(0,s.hasSettledWithError)(n)&&(__LOG__(4,void 0,new Error,!0,["addons","messaging"])`processMarkAsRead update failed`,SEND_LOGS("processMarkAsRead",1,"addons","messaging"))}))).apply(this,arguments)}const p=function(){var e=(0,o.default)((function*(e){const t=e.map((e=>null!=e.read?(0,i.default)((0,i.default)({},e),{},{read:!0}):e));yield function(){return d.apply(this,arguments)}(t)}));return function(){return e.apply(this,arguments)}}();t.processMarkAsRead=p},23041:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processHistoryMsgs=function(){return E.apply(this,arguments)},t.processMsgs=function(){return A.apply(this,arguments)},t.processOutgoingMsg=function(){return m.apply(this,arguments)};var i=r(n(48926)),o=n(45414),a=n(12554),s=n(91504),l=n(39056),u=n(68593),c=n(64409);function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t,n,r){var i,o;let{addons:a,processor:s}=n;const{upsert:l,result:u}=yield s.beforeUpsert(a,t,e);return null==r||null===(i=r.sendPerfReporter)||void 0===i||i.startRenderedStage(),yield s.updateCollection({add:u,remove:[]}),null==r||null===(o=r.sendPerfReporter)||void 0===o||o.postRenderedStage(),{upsertAddons:l,finishUpsert:()=>s.afterUpsert(u,e,t)}}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t,n,r,i){const s=yield Promise.all((0,c.groupAddonsByProcessor)(n).map((t=>d(e,r,t,i))));if(t!==o.AddonTableMode.None){const n=[].concat(...s.map((e=>{let{upsertAddons:t}=e;return t})));if(n.length){var u,p;null==i||null===(u=i.sendPerfReporter)||void 0===u||u.startSavedStage();const r=yield(0,l.createAddonQplMarker)(e.mode===o.AddonProcessMode.Send?l.AddonQplMarkerType.Outgoing:l.AddonQplMarkerType.Incoming,{mode:t,type:l.AnnotationRequestType.BulkUpsert,size:n.length});try{yield a.addonInternalDBTable.bulkUpsert(t,n),null==r||r.success()}catch(e){throw null==r||r.fail(),e}null==i||null===(p=i.sendPerfReporter)||void 0===p||p.postSavedStage()}}yield Promise.all(s.map((e=>{let{finishUpsert:t}=e;return t()})))}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){if(0===e.length)return;const{storeMessageOrphans:t}=n(6751);yield t(e,(e=>(0,u.getAddonParentMsgKey)(e)))}))).apply(this,arguments)}function h(e,t,n,r){return Array.from((0,c.groupAddonsByTableMode)(t)).map((t=>{let[i,o]=t;return function(){return f.apply(this,arguments)}(e,i,o,n,r).catch((e=>{throw __LOG__(2)`[AddonInfraError] failed saving addons in ${i} with ${e}]`,e}))}))}function A(){return(A=(0,i.default)((function*(e,t){if(0===e.length)return;const n={mode:o.AddonProcessMode.OnlineReceive},[r,i]=yield(0,u.queryAddonParentMsgs)(e,n.mode),{validAddons:a,orphans:l}=(0,c.collectValidAndOrphanAddons)(i,r),d=h(n,a,r,t);0!==l.length&&d.push(_(l));const p=yield Promise.allSettled(d);(0,s.hasSettledWithError)(p)&&(__LOG__(4,void 0,new Error,!0,["addons","messaging"])`failed incoming addons processing`,SEND_LOGS("processAddonMsgs",1,"addons","messaging"))}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t,n){const r={mode:o.AddonProcessMode.Send};try{const i=h(r,[e],t,n);yield Promise.all(i)}catch(e){throw __LOG__(4,void 0,new Error,!0,["addons","messaging"])`process addon msg: ${e}`,SEND_LOGS("sendingAddonMsgs",1,"addons","messaging"),e}}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){if(0===e.length)return;const t=h({mode:o.AddonProcessMode.HistorySync},e,new Map),n=yield Promise.allSettled(t);(0,s.hasSettledWithError)(n)&&(__LOG__(4,void 0,new Error,!0,["addons","messaging"])`failed history sync addons processing`,SEND_LOGS("processHistoryAddonMsgs",1,"addons","messaging"))}))).apply(this,arguments)}},68593:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.castToAddonMsgData=h,t.getAddonParentMsgKey=g,t.getAddonTargetMsgKeyName=_,t.parseHistorySyncMsg=function(){return E.apply(this,arguments)},t.queryAddonParentMsgs=function(){return m.apply(this,arguments)},t.sortAddonOrphans=function(e){const t=[],n=[],r=[];for(const i of e){const{parsedMsgPayload:e}=i;if((0,s.isUnifiedInfraEnabledForType)(e.type)){const r=h(e);null!=r?t.push(r):n.push(i)}else e.kind===f.MsgKind.ReactionDecrypted?r.push(e):n.push(i)}return{unifiedAddons:t,otherOrphans:n,legacyReactionAddons:r}};var i=r(n(48926)),o=r(n(81109)),a=n(45414),s=n(21193),l=n(4512),u=n(39056),c=n(16054),d=n(32117),p=r(n(60001)),f=n(73602);function _(e){return null!=e.targetMessageKey?"targetMessageKey":null!=e.pinParentKey?"pinParentKey":null!=e.pollUpdateParentKey?"pollUpdateParentKey":null!=e.reactionParentKey?"reactionParentKey":(0,c.getAddonProcessor)(e.type).parentKey_DEPRECATED}function g(e){var t,n,r;const i=null!==(t=null!==(n=null!==(r=e.targetMessageKey)&&void 0!==r?r:e.pinParentKey)&&void 0!==n?n:e.pollUpdateParentKey)&&void 0!==t?t:e.reactionParentKey;if(i instanceof p.default)return i;const{parentKey_DEPRECATED:o}=(0,c.getAddonProcessor)(e.type),a=e[o];if(a instanceof p.default)return a;throw __LOG__(4,void 0,new Error,!0,["addons","messaging"])`Addon ${e.type} parent key should be an instance of MsgKey instead of ${typeof i}`,SEND_LOGS("getAddonParentMsgKey",1,"addons","messaging"),new l.AddonInfraError(l.AddonInfraErrorCode.InvalidParentMsgKey)}function h(e){if((0,c.hasAddonProcessor)(e.type))return e}function A(e,t){const n=g(e);if(n instanceof p.default){const r=t.get(n.toString());if(null!=r&&!n.equals(r.id)){t.delete(n.toString()),t.set(r.id.toString(),r);const i=_(e);return(0,o.default)((0,o.default)({},e),{},{[i]:r.id})}}return e}function m(){return(m=(0,i.default)((function*(e,t){const n=e.map(g);let r;t===a.AddonProcessMode.OnlineReceive&&(r=yield(0,u.createMessagesQplMarker)(u.AddonQplMarkerType.Incoming,{type:u.AnnotationRequestType.BulkGetParentMsgs,size:n.length}));try{var i;const t=yield(0,d.getParentMsgsByMsgKey)(n),o=e.map((e=>A(e,t)));return null===(i=r)||void 0===i||i.success(),[t,o]}catch(e){var o;throw null===(o=r)||void 0===o||o.fail(),e}}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){try{const t=[];for(const[n,r]of(0,c.getAddonProcessorsMap)().entries())(0,s.isUnifiedInfraEnabledForType)(n)&&t.push(r.convert.fromHistorySyncMsg(e));return yield Promise.all(t).then((e=>[].concat(...e)))}catch(e){return __LOG__(3,void 0,void 0,!0,["addons","messaging"])`parseHistorySyncMsg: error:${e}`,SEND_LOGS("parseHistorySyncMsg",1,"addons","messaging"),[]}}))).apply(this,arguments)}},22038:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processRevokeMsgs=function(){return m.apply(this,arguments)};var i=r(n(48926)),o=r(n(81109)),a=n(45414),s=n(12554),l=n(21193),u=n(4512),c=n(16054),d=n(67789),p=n(54468),f=n(26368),_=n(97087),g=n(73602),h=n(3885);const A=(e,t)=>{var n;if(t.kind!==g.MsgKind.CommentDecrypted)throw new u.AddonInfraError(u.AddonInfraErrorCode.NotSupportedMsgType);return(0,o.default)((0,o.default)({id:e.newMsgKey,type:g.MSG_TYPE.REVOKED,kind:g.MsgKind.RevokedAddon,subtype:"admin_revoke"===e.subtype?"admin":"sender",revokeSender:e.sender,revokeTimestamp:null!==(n=e.revokeTimestamp)&&void 0!==n?n:void 0},(0,_.msgKeyToTargetInfo)(t.id,p.TranslateMsgKeyType.Addon)),{},{protocolMessageKey:t.id,t:(0,f.getT)(t),parentMsgKey:t.parentMsgKey})};function m(){return(m=(0,i.default)((function*(e){const t=[];if(!(0,l.isUnifiedInfraEnabledForType)(g.MSG_TYPE.COMMENT))return t;try{const n=[],r=[],i=[],o=e.map((e=>e.revokeMsgKey)),l=yield s.addonInternalDBTable.bulkGetByMsgKey(a.AddonTableMode.Comment,o,!1),u=new Map(l.filter(Boolean).map((e=>[e.id.toString(),e])));for(const o of e){const e=u.get(o.revokeMsgKey.toString());if(null==e){t.push(o);continue}const a=A(o,e);n.push(e.id),r.push(a),(0,h.isMeAccount)((0,f.getFrom)(e))&&i.push([e,a])}yield Promise.all([s.addonInternalDBTable.bulkRemoveByMsgKey(a.AddonTableMode.Comment,n),s.addonInternalDBTable.bulkUpsert(a.AddonTableMode.Comment,r),(0,d.replaceSelfMessageTypeRows)(i)]);const p=(0,c.getAddonProcessor)(g.MSG_TYPE.COMMENT);return yield p.updateCollection({add:r,remove:n}),t}catch(e){throw __LOG__(4,void 0,new Error,!0,["addons","messaging"])`process addon revokes: ${e}`,SEND_LOGS("processAddonRevokes",1,"addons","messaging"),e}}))).apply(this,arguments)}},32117:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getParentMsgsByMsgKey=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(87946),a=n(33365),s=n(41843),l=n(42347);function u(){return(u=(0,i.default)((function*(e){const t=yield(0,o.getMsgsByMsgKey)(e.map(String)),n=new Map(t.map((e=>[e.id.toString(),e])));if(n.size===e.length)return n;if((0,a.allowReferenceByAltJid)()){const t=e.filter((e=>!n.has(e.toString()))).map(s.getAlternateMsgKey).filter(Boolean);if(t.length>0){(yield(0,o.getMsgsByMsgKey)(t.map(String))).forEach((e=>{(0,l.ifSome)((0,s.getAlternateMsgKey)(e.id),(t=>{n.set(t.toString(),e)}))}))}}return n}))).apply(this,arguments)}},67789:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSentAddonMsgRecord=function(){return E.apply(this,arguments)},t.hasSentAddonMsg=g,t.replaceSelfMessageTypeRows=function(){return m.apply(this,arguments)},t.storeSelfMessageTypeRow=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(77630),s=n(45414),l=n(12554),u=n(16054),c=n(68593),d=n(37134),p=n(64409),f=n(74557),_=n(43987);function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){return(yield(0,_.getSelfAddonMessageTypeTable)().equals(["msgId"],e.id))[0]}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){if(null==(yield g(e.id))){const t={msgId:e.id.id,msgType:e.type};yield(0,_.getSelfAddonMessageTypeTable)().createOrReplace(t)}}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){if(0!==e.length)return(0,f.getStorage)().lock(["self-addon-message-type"],function(){var t=(0,i.default)((function*(t){let[n]=t;const r=yield n.anyOf(["msgId"],e.map((e=>{let[t]=e;return t.id.id}))),i=e.map((e=>{let[t,n]=e;return{msgId:n.id.id,msgType:t.type}}));yield n.bulkRemove(r.map((e=>e.rowId)).filter(Boolean)),yield n.bulkCreateOrReplace(i)}));return function(){return t.apply(this,arguments)}}())}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){const t=yield g(e);if(null==t)return;const n=(0,d.getTableModeByMsgType)(t.msgType),r=yield l.addonInternalDBTable.getByMsgKey(n,e);if(null==r)return void __LOG__(3)`msg-retry: can not find addon ${e.toString()}.`;if(!(0,u.hasAddonProcessor)(r.type))return{msgData:r,selfMsgRow:t};const{ack:i}=r;if(null==i||i<a.ACK.SENT)return __LOG__(3,void 0,void 0,!0)`msg-retry: can not find addon ${e.toString()}.`,void SEND_LOGS("msg-retry");const{toDualEncryptedMsgData:f}=(0,u.getAddonProcessor)(r.type).convert;if(null!=f){const[e,n]=yield(0,c.queryAddonParentMsgs)([r],s.AddonProcessMode.Send),{validAddons:i}=(0,p.collectValidAndOrphanAddons)(n,e),a=i[0],l=(0,o.default)(e.get((0,c.getAddonParentMsgKey)(a).toString()),"parents.get(getAddonParentMsgKey(decryptedMsgData).toString())");return{msgData:yield f(a,l),selfMsgRow:t}}return{msgData:r,selfMsgRow:t}}))).apply(this,arguments)}},24622:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.commentTableMode=void 0;var i=r(n(48926)),o=n(45414),a=n(4512),s=n(76415),l=n(22206),u=n(73602);const c={mode:o.AddonTableMode.Comment,bulkUpsert:(y=(0,i.default)((function*(e){const t=e.map((e=>{if(e.kind===u.MsgKind.CommentDecrypted)return(0,l.dbRowFromCommentMessage)(e);if(e.kind===u.MsgKind.RevokedAddon)return(0,l.dbRowFromRevokedMsgData)(e);throw new a.AddonInfraError(a.AddonInfraErrorCode.UnexpectedMsgType)}));yield(0,s.getTable)().bulkCreateOrReplace(t)})),function(){return y.apply(this,arguments)}),bulkGetByParentAndSender:(E=(0,i.default)((function*(){throw new a.AddonInfraError(a.AddonInfraErrorCode.NotSupportedFeature)})),function(){return E.apply(this,arguments)}),bulkGetByMsgKey:(m=(0,i.default)((function*(e,t){return(yield(0,s.getTable)().bulkGet(e.map((e=>e.toString())),t)).map((e=>null==e?e:(0,l.commentMessageFromDbRow)(e)))})),function(){return m.apply(this,arguments)}),bulkGetByParentMsgKey:(A=(0,i.default)((function*(e){return(yield(0,s.getTable)().anyOf(["parentMsgKey"],e.map((e=>e.toString())))).map(l.commentMessageFromDbRow)})),function(){return A.apply(this,arguments)}),bulkGetByChatWid:(h=(0,i.default)((function*(){throw new a.AddonInfraError(a.AddonInfraErrorCode.NotSupportedFeature)})),function(){return h.apply(this,arguments)}),bulkRemoveByMsgKey:(g=(0,i.default)((function*(e){return(0,s.getTable)().bulkRemove(e.map((e=>e.toString())))})),function(){return g.apply(this,arguments)}),getByMsgKey:(_=(0,i.default)((function*(e){const t=yield(0,s.getTable)().get(e.toString());return null==t?null:(0,l.commentMessageFromDbRow)(t)})),function(){return _.apply(this,arguments)}),updateAck:(f=(0,i.default)((function*(e,t){yield(0,s.getTable)().merge(e.id.toString(),{ack:t})})),function(){return f.apply(this,arguments)}),markAsRead:(p=(0,i.default)((function*(e){yield(0,s.getTable)().merge(e.toString(),{read:!0})})),function(){return p.apply(this,arguments)}),getTableSize:(d=(0,i.default)((function*(){return(0,s.getTable)().count()})),function(){return d.apply(this,arguments)})};var d,p,f,_,g,h,A,m,E,y;t.commentTableMode=c},12554:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addonInternalDBTable=t.addonDBTable=void 0;var i=r(n(48926)),o=n(24622),a=n(45414),s=n(49130),l=n(4512),u=n(27772),c=n(11217),d=n(84658),p=n(37134);const f=e=>{switch(e){case a.AddonTableMode.Pin:return u.pinTableMode;case a.AddonTableMode.PollVote:return c.pollVoteTableMode;case a.AddonTableMode.Comment:return o.commentTableMode;case a.AddonTableMode.Reaction:return d.reactionTableMode;case a.AddonTableMode.EventResponse:return s.eventResponseTableMode;case a.AddonTableMode.None:case a.AddonTableMode.Unified:throw new l.AddonInfraError(l.AddonInfraErrorCode.UnexpectedError)}},_={bulkUpsert:(I=(0,i.default)((function*(e,t){if(0!==t.length)return f(e).bulkUpsert(t)})),function(){return I.apply(this,arguments)}),bulkGetByParentAndSender:(v=(0,i.default)((function*(e,t){return 0===t.length?[]:f(e).bulkGetByParentAndSender(t)})),function(){return v.apply(this,arguments)}),bulkGetByMsgKey:(S=(0,i.default)((function*(e,t,n){return f(e).bulkGetByMsgKey(t,n)})),function(){return S.apply(this,arguments)}),bulkGetByParentMsgKey:(y=(0,i.default)((function*(e,t){return f(e).bulkGetByParentMsgKey(t)})),function(){return y.apply(this,arguments)}),bulkGetByChatWid:(E=(0,i.default)((function*(e,t){return f(e).bulkGetByChatWid(t)})),function(){return E.apply(this,arguments)}),bulkRemoveByMsgKey:(m=(0,i.default)((function*(e,t){if(0!==t.length)return f(e).bulkRemoveByMsgKey(t)})),function(){return m.apply(this,arguments)}),updateAck:(A=(0,i.default)((function*(e,t,n){return f(e).updateAck(t,n)})),function(){return A.apply(this,arguments)}),getByMsgKey:(h=(0,i.default)((function*(e,t){return f(e).getByMsgKey(t)})),function(){return h.apply(this,arguments)}),getTableSize:(g=(0,i.default)((function*(e){return f(e).getTableSize()})),function(){return g.apply(this,arguments)})};var g,h,A,m,E,y,S,v,I;t.addonInternalDBTable=_;const T={bulkGetByParentAndSender:(M=(0,i.default)((function*(e,t){return _.bulkGetByParentAndSender((0,p.getTableModeByMsgType)(e),t)})),function(){return M.apply(this,arguments)}),getByMsgKey:(b=(0,i.default)((function*(e,t){return _.getByMsgKey((0,p.getTableModeByMsgType)(e),t)})),function(){return b.apply(this,arguments)})};var b,M;t.addonDBTable=T},49130:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eventResponseTableMode=void 0;var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(45414),l=n(4512),u=n(4981),c=n(70243),d=n(26368),p=n(73602);const f={mode:s.AddonTableMode.EventResponse,bulkUpsert:(I=(0,o.default)((function*(e){yield(0,c.getTable)().bulkCreateOrReplace(e.map((e=>{if(e.kind!==p.MsgKind.EventResponseDecrypted)throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedMsgType);return(0,u.dbRowFromEventResponseMessage)(e)})))})),function(){return I.apply(this,arguments)}),bulkGetByParentAndSender:(v=(0,o.default)((function*(e){return(yield(0,c.getTable)().anyOf(["parentMsgKey","sender"],e.map((e=>[e[0].toString(),e[1].toString()])))).map(u.eventResponseMessageFromDBRow)})),function(){return v.apply(this,arguments)}),bulkGetByMsgKey:(S=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedFeature)})),function(){return S.apply(this,arguments)}),bulkGetByParentMsgKey:(y=(0,o.default)((function*(e){return(yield(0,c.getTable)().anyOf(["parentMsgKey"],e.map((e=>e.toString())))).map(u.eventResponseMessageFromDBRow)})),function(){return y.apply(this,arguments)}),bulkGetByChatWid:(E=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedFeature)})),function(){return E.apply(this,arguments)}),bulkRemoveByMsgKey:(m=(0,o.default)((function*(e){yield(0,c.getTable)().bulkRemoveByIndex(["msgKey"],e.map((e=>e.toString())))})),function(){return m.apply(this,arguments)}),getByMsgKey:(A=(0,o.default)((function*(e){var t;const n=null===(t=yield(0,c.getTable)().equals(["msgKey"],e.toString()))||void 0===t?void 0:t[0];return null==n?n:(0,u.eventResponseMessageFromDBRow)(n)})),function(){return A.apply(this,arguments)}),updateAck:(h=(0,o.default)((function*(e,t){let n;if(e.kind===p.MsgKind.EventResponseEncrypted)n=e.targetMessageKey;else{if(e.kind!==p.MsgKind.EventResponseDecrypted)throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedMsgType);n=e.parentMsgKey}yield(0,c.getTable)().merge([n.toString(),(0,a.default)((0,d.getSender)(e),"getSender(inputRow)").toString()],{ack:t})})),function(){return h.apply(this,arguments)}),markAsRead:(g=(0,o.default)((function*(e){const t=yield f.getByMsgKey(e);if(null!=t)return f.bulkUpsert([(0,i.default)((0,i.default)({},t),{},{read:!0})])})),function(){return g.apply(this,arguments)}),getTableSize:(_=(0,o.default)((function*(){return(0,c.getTable)().count()})),function(){return _.apply(this,arguments)})};var _,g,h,A,m,E,y,S,v,I;t.eventResponseTableMode=f},27772:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pinTableMode=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(45414),s=n(4512),l=n(28901),u=n(96869),c=n(11333),d=n(96513);const p={mode:a.AddonTableMode.Pin,bulkUpsert:(v=(0,o.default)((function*(e){const t=e.map((e=>(0,d.serializePinInChatMsgData)((0,l.assertPinInChatMsgData)(e))));yield(0,u.createOrUpdatePinInChat)(e[0].id.remote,t)})),function(){return v.apply(this,arguments)}),bulkGetByParentAndSender:(S=(0,o.default)((function*(){throw new s.AddonInfraError(s.AddonInfraErrorCode.UnexpectedError)})),function(){return S.apply(this,arguments)}),bulkGetByMsgKey:(y=(0,o.default)((function*(){throw new s.AddonInfraError(s.AddonInfraErrorCode.UnexpectedError)})),function(){return y.apply(this,arguments)}),bulkGetByParentMsgKey:(E=(0,o.default)((function*(e){if(1!==e.length)return[];const t=yield(0,c.getTable)().get(e[0].toString());return null==t?[]:[(0,d.deserializePinInChatMsgData)(t)]})),function(){return E.apply(this,arguments)}),bulkGetByChatWid:(m=(0,o.default)((function*(e){return(yield(0,c.getTable)().equals(["chatId"],e.toString())).map(d.deserializePinInChatMsgData)})),function(){return m.apply(this,arguments)}),bulkRemoveByMsgKey:(A=(0,o.default)((function*(e){yield(0,c.getTable)().bulkRemoveByIndex(["msgKey"],e.map((e=>e.toString())))})),function(){return A.apply(this,arguments)}),getByMsgKey:(h=(0,o.default)((function*(e){const t=(yield(0,c.getTable)().equals(["msgKey"],e.toString()))[0];return null==t?t:(0,d.deserializePinInChatMsgData)(t)})),function(){return h.apply(this,arguments)}),updateAck:(g=(0,o.default)((function*(e,t){const n=(0,d.serializePinInChatMsgData)((0,l.assertPinInChatMsgData)(e));yield(0,c.getTable)().merge(n.parentMsgKey,{ack:t})})),function(){return g.apply(this,arguments)}),markAsRead:(_=(0,o.default)((function*(e){const t=yield p.getByMsgKey(e);if(null!=t)return p.bulkUpsert([(0,i.default)((0,i.default)({},t),{},{read:!0})])})),function(){return _.apply(this,arguments)}),getTableSize:(f=(0,o.default)((function*(){return(0,c.getTable)().count()})),function(){return f.apply(this,arguments)})};var f,_,g,h,A,m,E,y,S,v;t.pinTableMode=p},11217:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pollVoteTableMode=void 0;var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(45414),l=n(4512),u=n(32602),c=n(73602),d=n(32797),p=n(45997),f=n(6431);const _=e=>(0,p.voteDataToPollVoteMsgData)((0,d.voteFromDbRow)(e)),g={mode:s.AddonTableMode.PollVote,bulkUpsert:(b=(0,o.default)((function*(e){const t=e.map((e=>{if(e.kind!==c.MsgKind.PollVoteDecrypted)throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedMsgType);return(0,p.pollVoteMsgDataToVoteData)(e)}));yield(0,u.upsertVotesDb)(t)})),function(){return b.apply(this,arguments)}),bulkGetByParentAndSender:(T=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.UnexpectedError)})),function(){return T.apply(this,arguments)}),bulkGetByMsgKey:(I=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.UnexpectedError)})),function(){return I.apply(this,arguments)}),bulkGetByParentMsgKey:(v=(0,o.default)((function*(e){return(yield(0,f.getTable)().anyOf(["parentMsgKey"],e.map((e=>e.toString())))).map(_)})),function(){return v.apply(this,arguments)}),bulkGetByChatWid:(S=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedFeature)})),function(){return S.apply(this,arguments)}),bulkRemoveByMsgKey:(y=(0,o.default)((function*(e){yield(0,f.getTable)().bulkRemoveByIndex(["msgKey"],e.map((e=>e.toString())))})),function(){return y.apply(this,arguments)}),getByMsgKey:(E=(0,o.default)((function*(e){const t=(yield(0,f.getTable)().equals(["msgKey"],e.toString()))[0];return null==t?t:_(t)})),function(){return E.apply(this,arguments)}),updateAck:(m=(0,o.default)((function*(e,t){if(e.kind!==c.MsgKind.PollVoteDecrypted&&e.kind!==c.MsgKind.PollVoteEncrypted)throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedMsgType);yield(0,f.getTable)().merge([e.pollUpdateParentKey.toString(),(0,a.default)(e.from,"row.from").toString()],{ack:t})})),function(){return m.apply(this,arguments)}),markAsRead:(A=(0,o.default)((function*(e){const t=yield g.getByMsgKey(e);if(null!=t)return g.bulkUpsert([(0,i.default)((0,i.default)({},t),{},{read:!0})])})),function(){return A.apply(this,arguments)}),getTableSize:(h=(0,o.default)((function*(){return(0,f.getTable)().count()})),function(){return h.apply(this,arguments)})};var h,A,m,E,y,S,v,I,T,b;t.pollVoteTableMode=g},84658:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.reactionTableMode=void 0;var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(45414),l=n(4512),u=n(86725),c=n(26368),d=n(73602),p=n(61515),f=n(24936);const _={mode:s.AddonTableMode.Reaction,bulkUpsert:(T=(0,o.default)((function*(e){const t=e.map((e=>(0,p.reactionMsgDataToReactionRow)((0,u.assertReactionMsgData)(e))));yield(0,f.getReactionsTable)().bulkCreateOrReplace(t)})),function(){return T.apply(this,arguments)}),bulkGetByParentAndSender:(I=(0,o.default)((function*(e){return(yield(0,f.getReactionsTable)().anyOf(["parentMsgKey","senderUserJid"],e.map((e=>{let[t,n]=e;return[t.toString(),n.toString()]})))).map(p.reactionRowToReactionMsgData)})),function(){return I.apply(this,arguments)}),bulkGetByMsgKey:(v=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.UnexpectedError)})),function(){return v.apply(this,arguments)}),bulkGetByParentMsgKey:(S=(0,o.default)((function*(e){return(yield(0,f.getReactionsTable)().anyOf(["parentMsgKey"],e.map((e=>e.toString())))).map(p.reactionRowToReactionMsgData)})),function(){return S.apply(this,arguments)}),bulkGetByChatWid:(y=(0,o.default)((function*(){throw new l.AddonInfraError(l.AddonInfraErrorCode.NotSupportedFeature)})),function(){return y.apply(this,arguments)}),bulkRemoveByMsgKey:(E=(0,o.default)((function*(e){yield(0,f.getReactionsTable)().bulkRemoveByIndex(["msgKey"],e.map((e=>e.toString())))})),function(){return E.apply(this,arguments)}),getByMsgKey:(m=(0,o.default)((function*(e){const t=(yield(0,f.getReactionsTable)().equals(["msgKey"],e.toString()))[0];return null==t?t:(0,p.reactionRowToReactionMsgData)(t)})),function(){return m.apply(this,arguments)}),updateAck:(A=(0,o.default)((function*(e,t){let n;if(e.kind===d.MsgKind.ReactionEncrypted)n=e.targetMessageKey;else{if(e.kind!==d.MsgKind.ReactionDecrypted)throw new l.AddonInfraError(l.AddonInfraErrorCode.UnexpectedMsgType);n=e.reactionParentKey}yield(0,f.getReactionsTable)().merge([n.toString(),(0,a.default)((0,c.getSender)(e),"getSender(row)").toString()],{ack:t})})),function(){return A.apply(this,arguments)}),markAsRead:(h=(0,o.default)((function*(e){const t=yield _.getByMsgKey(e);if(null!=t)return _.bulkUpsert([(0,i.default)((0,i.default)({},t),{},{read:!0})])})),function(){return h.apply(this,arguments)}),getTableSize:(g=(0,o.default)((function*(){return(0,f.getReactionsTable)().count()})),function(){return g.apply(this,arguments)})};var g,h,A,m,E,y,S,v,I,T;t.reactionTableMode=_},29162:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildAddonMsgKey=function(e,t,n){const r=!!e.fromMe,i=(0,a.decodeJid)(e.remoteJid);let c,d;r?null==i||"string"==typeof i||i.isUser()||(c=!0===t?(0,l.getMaybeMeLidUser)():(0,l.getMeUser)()):c=null!=n?(0,a.decodeJid)(n):(0,a.decodeJid)(e.participant);if("string"==typeof i||null==i)return null;d=null!=c&&"string"!=typeof c?new s.default({id:(0,o.default)(e.id,"key.id"),fromMe:r,remote:i,participant:c}):new s.default({id:(0,o.default)(e.id,"key.id"),fromMe:r,remote:i});const p=!0===t?(0,o.default)((0,l.getMaybeMeLidUser)(),"getMaybeMeLidUser()"):(0,l.getMeUser)(),f=d.participant||d.remote,_=(0,u.toUserWid)(!0===r?p:f);return{msgKey:d,sender:_}},t.getAddonServerTimestamp=function(e){return null==e?null:Math.floor((0,i.numberOrThrowIfTooLarge)(e)/1e3)};var i=n(22101),o=r(n(49619)),a=n(54468),s=r(n(60001)),l=n(3885),u=n(51017)},21193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnifiedInfraEnabledForType=function(e){if((0,r.hasAddonProcessor)(e))return(0,r.getAddonProcessor)(e).isEnabled();return!1};var r=n(16054)},4512:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddonInfraErrorCode=t.AddonInfraError=void 0;var r=n(66911);const i=n(76672)({UnexpectedError:"unexpected_error",NotSupportedFeature:"not_supported_feature",NotSupportedMsgType:"not_supported_msg_type",UnexpectedMsgType:"unexpected_msg_type",InvalidParentMsgKey:"invalid_parent_msg_key",MissingParentMsg:"missing_parent_msg"});t.AddonInfraErrorCode=i;class o extends((0,r.customError)("AddonInfraError")){constructor(e,t){let n=`errorCode: ${String(e)}`;null!=t&&(n+=` comment: ${t}`),super(n)}}t.AddonInfraError=o},91504:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSettledWithError=function(e){return e.some((e=>"rejected"===e.status))}},39056:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationRequestType=t.AddonQplMarkerType=void 0,t.createAddonQplMarker=function(){return T.apply(this,arguments)},t.createMessagesQplMarker=function(){return b.apply(this,arguments)},t.getAddonAnnotations=y,t.getCachedMessagesTableSize=m,t.getCachedTableSize=h;var i=r(n(48926)),o=n(44369),a=n(83741),s=n(45414),l=n(12554),u=n(41307),c=n(62162),d=n(10139);const p=n(76672)({BulkUpsert:"bulk_upsert",BulkRemoveByParents:"bulk_remove_by_parents",BulkGetByParentMsgKeys:"bulk_get_by_parent_msg_keys",BulkGetByChatWid:"bulk_get_by_chat_wid",BulkGetParentMsgs:"bulk_get_parent_msgs"});t.AnnotationRequestType=p;const f=n(76672).Mirrored(["Incoming","Outgoing","UI"]);function _(e){return e<10001?1e4:e<30001?3e4:e<500001?5e4:e<1000001?1e5:e<3000001?3e5:e<5000001?5e5:e<8000001?8e5:1e6}t.AddonQplMarkerType=f;const g={date:0,values:new Map};function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){const t=g,n=(new Date).setHours(0,0,0,0);if(t.date===n){const n=t.values.get(e);if(null==n){const n=_(yield l.addonInternalDBTable.getTableSize(e));return t.values.set(e,n),n}return n}t.date=n,t.values.clear();const r=_(yield l.addonInternalDBTable.getTableSize(e));return t.values.set(e,r),r}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){const e="messages",t=g,n=(new Date).setHours(0,0,0,0);if(t.date===n){const n=t.values.get(e);if(null==n){const n=_(yield(0,d.getMessageTable)().count());return t.values.set(e,n),n}return n}t.date=n,t.values.clear();const r=_(yield(0,d.getMessageTable)().count());return t.values.set(e,r),r}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){return{string:{request_type:p.getName(e.type),table_mode:s.AddonTableMode.getName(e.mode)},int:{request_size:e.size,table_size:yield h(e.mode)}}}))).apply(this,arguments)}function v(){return(0,a.getABPropConfigValue)("addon_infra_enable_perf_logging")}function I(e){return{success:()=>null==e?void 0:e.end(o.QuickLogActionType.SUCCESS),fail:()=>null==e?void 0:e.end(o.QuickLogActionType.FAIL)}}function T(){return(T=(0,i.default)((function*(e,t){if(v())switch(e){case f.Incoming:return I(c.QPL.markerStart(u.QuickLogMarkerId.ADDON_PROCESS_INCOMING,{annotations:yield y(t)}));case f.Outgoing:return I(c.QPL.markerStart(u.QuickLogMarkerId.ADDON_PROCESS_OUTGOING,{annotations:yield y(t)}));case f.UI:return I(c.QPL.markerStart(u.QuickLogMarkerId.ADDON_CHAT_REQUEST,{annotations:yield y(t)}))}}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t){}))).apply(this,arguments)}},37134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTableModeByMsgType=function(e){switch(e){case o.MSG_TYPE.PIN_MESSAGE:return r.AddonTableMode.Pin;case o.MSG_TYPE.COMMENT:return r.AddonTableMode.Comment;case o.MSG_TYPE.POLL_UPDATE:return r.AddonTableMode.PollVote;case o.MSG_TYPE.REACTION_ENC:case o.MSG_TYPE.REACTION:return r.AddonTableMode.Reaction;case o.MSG_TYPE.EVENT_RESPONSE:return r.AddonTableMode.EventResponse;case o.MSG_TYPE.EVENT_EDIT_ENCRYPTED:return r.AddonTableMode.None;default:throw new i.AddonInfraError(i.AddonInfraErrorCode.NotSupportedMsgType,`received ${e} msgType`)}};var r=n(45414),i=n(4512),o=n(73602)},64409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectValidAndOrphanAddons=function(e,t){const n=[],r=[];for(const o of e){const e=t.get((0,i.getAddonParentMsgKey)(o).toString());null==e||e.type===a.MSG_TYPE.UNKNOWN?n.push(o):r.push(o)}return{orphans:n,validAddons:r}},t.groupAddonsByProcessor=function(e){const t=new Map;for(const i of e){var n;if(!t.has(i.type)){const e=(0,r.getAddonProcessor)(i.type);t.set(i.type,{processor:e,addons:[],existingAddons:[]})}null===(n=t.get(i.type))||void 0===n||n.addons.push(i)}return Array.from(t.values())},t.groupAddonsByTableMode=function(e){const t=new Map;for(const r of e){var n;const e=(0,o.getTableModeByMsgType)(r.type);t.has(e)||t.set(e,[]),null===(n=t.get(e))||void 0===n||n.push(r)}return t};var r=n(16054),i=n(68593),o=n(37134),a=n(73602)},1619:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fireAndForgetInternalDoNotUse=a,t.frontendFireAndForget=function(e,t){a("event",e,t)},t.frontendSendAndReceive=function(e,t){return s("event",e,t)},t.sendAndReceiveInternalDoNotUse=s,t.setApi=function(e){o=e};var i=r(n(89482));let o=null;function a(e,t,n){if(!o)throw(0,i.default)("fireAndForget called before setApi!");o.fireAndForget(e,t,n)}function s(e,t,n){return o?o.sendAndReceive(e,t,n):Promise.reject((0,i.default)("sendAndReceive called before setApi!"))}},58715:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBridge=function(){return new r.DynamicRouter};var r=n(44400)},49625:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workerSafeFireAndForget=function(e,t){(0,r.fireAndForgetInternalDoNotUse)("workerSafeEvent",e,t)},t.workerSafeSendAndReceive=function(e,t){return(0,r.sendAndReceiveInternalDoNotUse)("workerSafeEvent",e,t)};var r=n(1619)},7184:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.areGlobalsReady=function(){return null!=s},t.getConfig=function(){return l().config},t.getMyDeviceJid=function(){var e;const t=null===(e=l().myJids)||void 0===e?void 0:e.deviceJid;if(null==t)throw(0,a.default)("Trying to access myDeviceJid, but it's not set");return(0,o.unsafeCoerceToPhoneDeviceJid)(t)},t.getMyDisplayName=function(){return l().displayName},t.getMyLidDeviceJid=function(){return l().lidDeviceJid},t.setGlobals=function(e){s=e,(0,i.setGlobals)(e)},t.setMyDisplayName=function(e){l().displayName=e},t.setMyLidDeviceJid=function(e){l().lidDeviceJid=e};var i=n(58117),o=n(44037),a=r(n(89482));let s=null;function l(){if(null==s)throw(0,a.default)("globals api called before set");return s}},47038:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.runInTransaction=void 0;var i=r(n(46808)),o=n(65675),a=n(2987),s=n(74557),l=n(18721),u=n(37092),c=n(28992),d=r(n(89482));const p={SyncActionStore:u.WAWebSyncActionStore,CollectionVersionStore:o.WAWebCollectionVersionStore,PendingMutationStore:l.WAWebPendingMutationStore,MissingKeyStore:a.WAWebMissingKeyStore,SyncKeyStore:c.WAWebSyncKeyStore};t.runInTransaction=(e,t)=>{if(null!=i.default.currentTransaction)return Promise.reject((0,d.default)("Calling runInTransaction recursively. This is not allowed."));const n=Object.keys(e),r=n.flatMap((e=>p[e].locks));return(0,s.getStorage)().lock(r,(()=>{const e={};for(const t of n)e[t]=new p[t];return t(e)}))}},65675:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebCollectionVersionStore=void 0;var i=r(n(81109)),o=n(39618);class a{get(e){return(0,o.getCollectionVersionTable)().get(e)}bulkGet(e){return(0,o.getCollectionVersionTable)().bulkGet(e)}getAll(){return(0,o.getCollectionVersionTable)().all()}update(e,t){return(0,o.getCollectionVersionTable)().createOrMerge(e,(0,i.default)({collection:e},t))}bulkUpdate(e){return(0,o.getCollectionVersionTable)().bulkCreateOrMerge(e)}clear(){return(0,o.getCollectionVersionTable)().clear()}}t.WAWebCollectionVersionStore=a,a.locks=["collection-version"]},2987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebMissingKeyStore=void 0;var r=n(45232),i=n(19294);class o{getAll(){return(0,i.getAllMissingKeys)()}bulkGet(e){return(0,i.bulkGetMissingKeys)(e)}count(){return(0,i.getMissingKeyCount)()}bulkUpdate(e){return(0,i.createOrUpdateMissingKeys)(e)}bulkRemove(e){return(0,i.bulkRemoveMissingKeys)(e)}clear(){return(0,r.getMissingKeysTable)().clear()}}t.WAWebMissingKeyStore=o,o.locks=["missing-keys"]},18721:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebPendingMutationStore=void 0;var i=r(n(48926)),o=n(9920),a=n(19294);class s{getByCollection(e){return(0,i.default)((function*(){return(yield(0,a.getPendingMutationsRows)(["collection"],e)).map(o.convertToPendingMutationFromRow)}))()}getAll(){return(0,a.getAllPendingMutationsRows)()}bulkCreate(e){return(0,a.appendPendingMutationsRows)(e).then((()=>{}))}bulkRemove(e){return(0,a.bulkRemovePendingMutations)(e)}clear(){return(0,o.getPendingMutationsTable)().clear()}}t.WAWebPendingMutationStore=s,s.locks=["pending-mutations"]},37092:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebSyncActionStore=void 0;var i=r(n(48926)),o=n(62792),a=n(19294);class s{count(){return(0,o.getSyncActionsTable)().count()}get(e){return(0,i.default)((function*(){const t=yield(0,a.getSyncAction)(e);return null==t?null:(0,o.convertToSyncActionFromRow)(t)}))()}getByCollections(e){return(0,i.default)((function*(){return(yield(0,a.getSyncActionsRows)(["collection"],e.map((e=>e)))).map(o.convertToSyncActionFromRow)}))()}getByIndexMacs(e){return(0,i.default)((function*(){return(yield(0,a.getSyncActionsRows)(["indexMac"],e.map((e=>e)))).map(o.convertToSyncActionFromRow)}))()}getByActionStates(e){return(0,i.default)((function*(){return(yield(0,a.getSyncActionsRows)(["actionState"],e.map((e=>e)))).map(o.convertToSyncActionFromRow)}))()}getByModelInfos(e){return(0,i.default)((function*(){return(yield(0,a.getSyncActionsRows)(["modelId","modelType","actionState"],e.map((e=>e)))).map(o.convertToSyncActionFromRow)}))()}getAll(){return(0,o.getSyncActionsTable)().all().then((e=>e.map(o.convertToSyncActionFromRow)))}bulkSet(e){return(0,a.setSyncActionRows)(e.map(o.convertFromSyncActionToRow))}bulkUpdate(e){return(0,a.updateSyncActionRows)(e.map(o.convertFromSyncActionToRow))}bulkRemove(e){return(0,a.deleteSyncActionRows)(e)}clear(){return(0,o.getSyncActionsTable)().clear()}}t.WAWebSyncActionStore=s,s.locks=["sync-actions"]},28992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebSyncKeyStore=void 0;var r=n(9419),i=n(19294);class o{get(e){return(0,i.getSyncKey)(e)}getAll(){return(0,i.getAllSyncKeys)()}set(e){return(0,i.createSyncKey)(e).then((()=>{}))}expire(e){return(0,i.expireSyncKey)(e)}clear(){return(0,r.getSyncKeysTable)().clear()}}t.WAWebSyncKeyStore=o,o.locks=["sync-keys"]},92615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DIRECT_CONNECTION_FLAG=void 0,t.getBusinessProfileQueryVersion=function(){return o(i.ServerProps.webBizProfileOptions)},t.getBusinessProfileQueryVersionWithCustomBizProfileOptions=o;var r=n(56660),i=n(52143);t.DIRECT_CONNECTION_FLAG=128;function o(e){let t=247;return(0,r.bizLinkedAccountsEnabled)()&&(t|=256),e&t}},56806:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MISMATCH_ORIGIN_TYPE",{enumerable:!0,get:function(){return d.MISMATCH_ORIGIN_TYPE}}),t.handleAddressingModeMismatch=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(2505),s=n(81532),l=n(61246),u=n(33351),c=n(16130),d=n(98563);const p=(0,l.logDuplicateRequestsWrapper)(s.sendQueryGroup);function f(){return(f=(0,i.default)((function*(e,t){(0,c.logAddressingModeMismatch)(t);const n=t.serverAddressingMode===u.STANZA_MSG_ADDRESSING_MODE.lid;(yield(0,a.migrateParticipantInfoAddressingMode)(e,n))===a.AddressingModeMigrationResult.Success?(0,o.frontendFireAndForget)("updateGroupAddressingMode",{id:e,isLidAddressingMode:n}):yield p(e,t.mismatchOrigin)}))).apply(this,arguments)}},81532:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroup=function(){return d.apply(this,arguments)},t.sendQueryGroupInvite=function(e){return(0,c.queryGroupInvite)(e).then((e=>(0,i.default)({status:200},e)))},t.updateSubject=p;var i=r(n(81109)),o=r(n(48926)),a=n(25303),s=n(1619),l=n(91563),u=n(69002),c=n(37246);function d(){return(d=(0,o.default)((function*(e){__LOG__(2,void 0,void 0,void 0,["groups"])`querying server for groupMetadata of group id ${e.toLogString()}`;const t=(0,u.queryGroupJob)(e);try{const l=yield t;var n,r,i,o,a,s,c,d,_,g,h,A,m,E;if(null==l?void 0:l.id)return p(e,l.subject),f(e,null!==(n=l.isLidAddressingMode)&&void 0!==n&&n),{id:l.id,owner:l.owner,creation:l.creation,subject:l.subject,desc:l.desc,descId:l.descId,descOwner:l.descOwner,descTime:l.descTime,restrict:null!==(r=l.restrict)&&void 0!==r&&r,announce:null!==(i=l.announce)&&void 0!==i&&i,noFrequentlyForwarded:null!==(o=l.noFrequentlyForwarded)&&void 0!==o&&o,ephemeralDuration:null!==(a=l.ephemeralDuration)&&void 0!==a?a:0,membershipApprovalMode:l.membershipApprovalMode,participants:l.participants,support:null!==(s=l.support)&&void 0!==s&&s,suspended:null!==(c=l.suspended)&&void 0!==c&&c,terminated:null!==(d=l.terminated)&&void 0!==d&&d,parentGroup:l.parentGroup,isParentGroup:null!==(_=l.isParentGroup)&&void 0!==_&&_,isParentGroupClosed:null!==(g=l.isParentGroupClosed)&&void 0!==g&&g,defaultSubgroup:null!==(h=l.defaultSubgroup)&&void 0!==h&&h,generalSubgroup:null!==(A=l.generalSubgroup)&&void 0!==A&&A,incognito:null!==(m=l.incognito)&&void 0!==m&&m,isLidAddressingMode:null!==(E=l.isLidAddressingMode)&&void 0!==E&&E,allowNonAdminSubGroupCreation:l.allowNonAdminSubGroupCreation,generalChatAutoAddDisabled:l.generalChatAutoAddDisabled};__LOG__(3)`Store:GroupMetadata Unexpected server response`}catch(t){if(t instanceof l.ServerStatusCodeError&&t.status>=400)return{id:e,stale:!1};throw t}}))).apply(this,arguments)}function p(e,t){(0,a.isString)(t)&&(0,s.frontendFireAndForget)("updateGroupSubject",{id:e,subject:t})}function f(e,t){(0,s.frontendFireAndForget)("updateGroupAddressingMode",{id:e,isLidAddressingMode:t})}},61246:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logDuplicateRequestsWrapper=function(e){const t=new l;return function(){var n=(0,i.default)((function*(n,r){if(!(0,o.getABPropConfigValue)("web_extra_lid_group_logging_attributes"))return e(n);t.increment(n)>1&&(__LOG__(4,void 0,new Error,!0)`lid_migration - ${s[r]}`,SEND_LOGS("GroupLidInfra/one_in_flight_group_info_mismatch"));try{const r=yield e(n);return t.decrement(n),r}catch(e){throw t.decrement(n),e}}));return function(){return n.apply(this,arguments)}}()};var i=r(n(48926)),o=n(83741),a=n(98563);const s=Object.fromEntries(Object.entries(a.MISMATCH_ORIGIN_TYPE).map((e=>{let[t,n]=e;return[n,t]})));class l{constructor(){this._counts=new Map}_get(e){var t;return null!==(t=this._counts.get(e))&&void 0!==t?t:0}increment(e){const t=e.toString(),n=this._get(t)+1;return this._counts.set(t,n),n}decrement(e){const t=e.toString();this._counts.set(t,Math.max(this._get(t)-1,0))}}},55373:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.toCoreAckTemplate=function(e){const t=(0,o.extractJidFromJidWithType)((0,a.widToJidWithType)(e.from)),n=null==e.participant?void 0:(0,a.widToDeviceJid)(e.participant),r=null==e.recipient?void 0:(0,a.widToUserJid)(e.recipient);return(0,i.default)((0,i.default)({},e),{},{from:t,participant:n,recipient:r})};var i=r(n(81109)),o=n(96955),a=n(14356)},57610:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleWorkerCompatibleStanza=function(e){const{attrs:t}=e;switch(e.tag){case"notification":switch(t.type){case"w:gp2":return m((0,l.handleGroupNotification)(e)).catch((t=>y(e,t)));case"encrypt":{const t=e.content;if(!Array.isArray(t)||!t.length)break;switch(t[0].tag){case"identity":return m((0,u.handleE2eIdentityChange)(e)).catch((t=>y(e,t)))}break}}break;case"message":{const{from:t}=e.attrs;return A.default.isNewsletter(null==t?void 0:t.toString())?(0,p.default)(e).catch((t=>S(e,t))):(0,c.default)(e).catch((t=>S(e,t)))}case"receipt":try{if(function(e){if(Array.isArray(e.content)&&e.content.length>0){const t=e.content[0].tag;return"offer"===t||"accept"===t||"reject"===t}return!1}(e))return(0,f.handleCallReceipt)(e);if("retry"!==t.type&&"enc_rekey_retry"!==t.type)return(0,d.default)(e)}catch(t){return t instanceof o.XmppParsingFailure?((0,g.postUnknownStanzaMetric)(e),(0,s.createNackFromStanza)(e,s.NackReason.ParsingError)):(0,s.createNackFromStanza)(e,s.NackReason.UnhandledError)}}};var i=r(n(48926)),o=n(85739),a=r(n(46808)),s=n(12020),l=n(26458),u=n(68281),c=r(n(67865)),d=r(n(90751)),p=r(n(60387)),f=n(50599),_=n(17067),g=n(11206),h=n(95160),A=r(n(27112));function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){if(!(0,h.isWorker)())return e;const t=yield e;return n(68231).WorkerOfflineResumeReporter.updateProcessedNotificationCount(),t}))).apply(this,arguments)}function y(e,t){return t instanceof o.XmppParsingFailure?((0,g.postUnknownStanzaMetric)(e),(0,s.createNackFromStanza)(e,s.NackReason.ParsingError)):(0,s.createNackFromStanza)(e,s.NackReason.UnhandledError)}function S(e,t){return t instanceof o.XmppParsingFailure?((0,g.postUnknownStanzaMetric)(e),(0,_.postIncomingMessageDropInvalidStanza)(e),(0,s.createNackFromStanza)(e,s.NackReason.ParsingError)):t instanceof a.default.DexieError?((0,_.postIncomingMessageDropDBOperationFailed)(e),__LOG__(4,void 0,new Error,!0)`handleMsg: drop incoming message due to an internal error: ${t.name}, message: ${t.message}, stack: ${t.stack}`,void SEND_LOGS("incoming-message-drop-db-operation-failed",.1)):(__LOG__(4,void 0,new Error,!0)`handleMsg: drop incoming message due to an internal error: ${t.name}, message: ${t.message}, stack: ${t.stack}`,SEND_LOGS("incoming-message-drop-internal-error",.1),(0,_.postIncomingMessageDropInternalError)(e),(0,s.createNackFromStanza)(e,s.NackReason.UnhandledError))}},85512:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.blockSendPing=function(){return s.apply(this,arguments)},t.updateClockSkew=function(e){(0,a.setClockSkew)(e)};var i=r(n(48926)),o=n(93042),a=n(29987);function s(){return(s=(0,i.default)((function*(){yield(0,o.sendPing)()}))).apply(this,arguments)}},11439:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_JID=function(e){if(!(e instanceof s.default&&(e.isUser()||e.isGroup()||e.isBroadcast()||e.isNewsletter())))throw(0,u.default)(`CHAT_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return o.WapJid.create(e.user,e.getJidServer())},t.DEVICE_JID=function(e){if(!(e instanceof s.default&&e.isUser()))throw(0,u.default)(`DEVICE_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);if(e.isPSA())throw __LOG__(4,void 0,new Error,!0)`DEVICE_JID: invalid PSA jid`,SEND_LOGS("invalid-psa-user-jid"),(0,u.default)("USER_JID: invalid PSA jid");return o.WapJid.createJidU(e.user,c(e),e.device)},t.GROUP_CALL_JID=function(e){if(!(e instanceof s.default&&e.isGroupCall()))throw(0,u.default)(`GROUP_CALL_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return o.WapJid.create(e.user,l.Domains.CALL)},t.GROUP_JID=function(e){if(!(e instanceof s.default&&e.isGroup()))throw(0,u.default)(`GROUP_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return o.WapJid.create(e.user,l.Domains.G_US)},t.JID=function(e){if(!(e instanceof s.default))throw(0,u.default)(`JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);if(null!=e.device&&0!==e.device)return o.WapJid.createJidU(e.user,c(e),e.device);return o.WapJid.create(e.user,e.getJidServer())},t.USER_JID=function(e){if(!(e instanceof s.default&&e.isUser()))throw(0,u.default)(`USER_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);if(e.isPSA())throw __LOG__(4,void 0,new Error,!0)`USER_JID: invalid PSA jid`,SEND_LOGS("invalid-psa-user-jid"),(0,u.default)("USER_JID: invalid PSA jid");return o.WapJid.create(e.user,e.getJidServer())},t.wapNodeToVoipXml=t.voipXmlToWapNode=void 0;var i=n(42811),o=n(40471),a=n(41404),s=r(n(27112)),l=n(60050),u=r(n(89482));function c(e){if((0,a.bizHostedDevicesEnabled)()){if("hosted"===e.server)return o.DomainType.HOSTED;if("hosted.lid"===e.server)return o.DomainType.HOSTED_LID}return"lid"===e.server?o.DomainType.LID:o.DomainType.WHATSAPP}t.voipXmlToWapNode=e=>{if(!e||!Array.isArray(e)||3!==e.length)throw(0,u.default)("Invalid VOIP xml node");return function e(t){if(!t)return null;if(Array.isArray(t)){const n=t[0],r=t[1];let a;r&&Object.keys(r).map((e=>{a||(a={});let t=r[e];if(!t)throw(0,u.default)("Attribute value is null");if("object"==typeof t){if(t.type!==o.WAP_JID_SUBTYPE.JID&&!o.WAP_JID_SUBTYPE.JID_AD&&!o.WAP_JID_SUBTYPE.JID_U)throw(0,u.default)("Invalid attribute value type");t=new o.WapJid(t)}a[e]=t}));const s=t[2];let l=null;Array.isArray(s)&&s.length>0&&(l="number"==typeof s[0]?new Uint8Array(s):s.map(e).filter((e=>e)));const c=l;return new i.WapNode(n,a,c)}return t}(e)};t.wapNodeToVoipXml=e=>function e(t){const n=[];return n.push(t.tag),n.push(t.attrs||{}),Array.isArray(t.content)&&0===t.content.filter((e=>!Array.isArray(e)))?n.push(t.content):Array.isArray(t.content)?n.push(t.content.map((t=>e(t)))):null!=t.content?t.content instanceof Uint8Array?n.push(Array.from(t.content)):n.push(t.content):n.push(null),n}(e)},12020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NackReason=void 0,t.createNackFromStanza=function(e,t){var n,a,s;const l=null==e?void 0:e.tag,u=null==e||null===(n=e.attrs)||void 0===n?void 0:n.id,c=null==e||null===(a=e.attrs)||void 0===a||null===(s=a.type)||void 0===s?void 0:s.toString(),d=o.getName(t);try{var p;if(__LOG__(2)`createNackFromStanza: class: '${l}' type: '${c}' id: '${u}' reason: '${d}'`,null!=u&&null!=(null==e||null===(p=e.attrs)||void 0===p?void 0:p.from))return function(e,t){const{attrs:n}=e;if(t===o.UnrecognizedStanza)return(0,r.wap)("ack",{class:e.tag,id:n.id,to:n.from,type:n.type||r.DROP_ATTR,participant:n.participant||r.DROP_ATTR,error:(0,r.INT)(t)});switch(e.tag){case"notification":return(0,r.wap)("ack",{class:"notification",id:n.id,to:n.from,type:n.type||r.DROP_ATTR,participant:n.participant||r.DROP_ATTR,error:(0,r.INT)(t)});case"message":return(0,r.wap)("ack",{class:"message",id:n.id,to:n.from,type:n.type||r.DROP_ATTR,participant:n.participant||r.DROP_ATTR,error:(0,r.INT)(t)});case"receipt":return(0,r.wap)("ack",{class:"receipt",id:n.id,to:n.from,type:n.type||r.DROP_ATTR,participant:n.participant||r.DROP_ATTR,error:(0,r.INT)(t)});default:return __LOG__(3,void 0,void 0,!0)`sendNack called with unsupported stanza tag: ${e.tag}`,SEND_LOGS("unsupported-nack"),(0,i.postUnknownStanzaMetric)(e),"NO_ACK"}}(e,t);__LOG__(4,void 0,new Error)`createNackFromStanza: failed: 'id' or 'form' is null for class: '${l}' type: '${c}' reason: '${d}'`,(0,i.postUnknownStanzaMetric)(e)}catch(e){var f;__LOG__(4,void 0,new Error)`createNackFromStanza: failed for class: '${l}' type: '${c}' id: '${u}' reason: '${d}'`,__LOG__(4,void 0,new Error,!0)`createNackFromStanza: failed with unhandled reason: ${null!==(f=e.message)&&void 0!==f?f:e}`,SEND_LOGS("send-nack-exception")}return"NO_ACK"};var r=n(42811),i=n(11206);const o=n(76672)({ParsingError:487,UnrecognizedStanza:488,UnrecognizedStanzaClass:489,UnrecognizedStanzaType:490,InvalidProtobuf:491,InvalidHostedCompanionStanza:493,MissingMessageSecret:495,SignalErrorOldCounter:496,MessageDeletedOnPeer:499,UnhandledError:500,UnsupportedAdminRevoke:550,UnsupportedLIDGroup:551,DBOperationFailed:552});t.NackReason=o},52894:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateSignature=function(){return _.apply(this,arguments)},t.isValidCurveKeyPair=c,t.keyPair=function(e){let t;void 0===e?(t=new Uint8Array(32),self.crypto.getRandomValues(t)):t=new Uint8Array(e);return t[0]&=248,t[31]&=127,t[31]|=64,f({pubKey:32,privKey:t,basepoint:l},(function(e){const n=s._curve25519_donna(e.pubKey,e.privKey,e.basepoint);if(n)throw(0,a.default)(`Curve25519:keyPair Error Code ${n}`);return{pubKey:p(e.pubKey,32),privKey:t.buffer}}))},t.sharedSecret=function(e,t){return Promise.resolve().then((()=>f({sharedKey:32,pubKey:e,privKey:t},(function(e){const t=s._curve25519_donna(e.sharedKey,e.privKey,e.pubKey);if(t)throw(0,a.default)(`Curve25519:sharedSecret Error Code ${t}`);return p(e.sharedKey,32)}))))},t.toCurveKeyPair=function(e){if(c(e))return e;if(33!==e.pubKey.byteLength||32!==e.privKey.byteLength)throw(0,a.default)("Invalid key pair type");const t=new Uint8Array(32),n=new Uint8Array(32);return t.set(new Uint8Array(e.pubKey).subarray(1)),n.set(new Uint8Array(e.privKey)),{pubKey:t.buffer,privKey:n.buffer}},t.toCurveKeyPubKey=function(e){if(33!==e.byteLength)throw(0,a.default)("Invalid key type");const t=new Uint8Array(32);return t.set(new Uint8Array(e).subarray(1)),t.buffer},t.toSignalCurveKeyPair=function(e){if(function(e){return 33===e.pubKey.byteLength&&32===e.privKey.byteLength}(e))return e;if(32!==e.pubKey.byteLength||32!==e.privKey.byteLength)throw(0,a.default)("Invalid key pair type");const t=u(e.pubKey),n=new Uint8Array(32);return n.set(new Uint8Array(e.privKey)),{pubKey:t,privKey:n.buffer}},t.toSignalCurvePubKey=u,t.verifySignature=function(e,t,n){if(32!==e.byteLength)throw(0,a.default)(`Invalid public key length: ${e.byteLength}`);const r=new Uint8Array(33);return r[0]=5,r.set(e,1),o.default.verifySignature(r,t,n)};var i=r(n(48926)),o=r(n(43534)),a=r(n(89482));let s;const l=new Uint8Array(32);l[0]=9;function u(e){if(32!==e.byteLength)throw(0,a.default)("Invalid key type");const t=new Uint8Array(33);return t[0]=5,t.set(new Uint8Array(e),1),t.buffer}function c(e){return 32===e.privKey.byteLength&&32===e.pubKey.byteLength}function d(e){if("number"==typeof e)return s._malloc(e);const t=new Uint8Array(e.buffer||e),n=s._malloc(t.length);return s.HEAPU8.set(t,n),n}function p(e,t){const n=new Uint8Array(t);return n.set(s.HEAPU8.subarray(e,e+t)),n.buffer}function f(e,t){s||(s=n(43859));const r={};try{for(const t in e)r[t]=d(e[t]);return t(r)}finally{for(const e in r)s._free(r[e])}}function _(){return(_=(0,i.default)((function*(e,t){return yield o.default.signMsg(e.pubKey,e.privKey,t)}))).apply(this,arguments)}},42083:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getChatThreadID=function(){return y.apply(this,arguments)},t.getChatThreadIDHMAC=function(){return S.apply(this,arguments)},t.getChatThreadLoggingStateDebug=function(){},t.handleActivitiesForChatThreadLogging=function(e){var t;__LOG__(2)`chat_thread_logging: handling ${e.length} message(s)`,null===(t=f())||void 0===t||t.eventStore.handleMessages(e).catch((()=>{__LOG__(4,void 0,new Error)`chat_thread_logging: error handling activities`}))},t.initChatThreadLogging=function(){return _.apply(this,arguments)},t.setThreadDsTimeframeOffset=function(){return g.apply(this,arguments)},t.setThreadIdUserSecret=function(e){var t,n;return __LOG__(2)`chat_thread_logging: setting thread_id_user_secret`,null!==(t=null===(n=f())||void 0===n?void 0:n.metadataStore.setSecret(e))&&void 0!==t?t:Promise.resolve(!1)},t.uploadChatThreadLoggingEvents=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(83741),s=n(35334),l=n(56256),u=n(23956),c=n(80127),d=n(56333);let p=null;function f(){return null==p&&__LOG__(4,void 0,new Error)`getChatThreadLoggingState: init incomplete!`,p}function _(){return(_=(0,i.default)((function*(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=e&&(0,a.getABPropConfigValue)("message_count_logging_md_enabled");null==(yield(0,d.getChatThreadLoggingLastUploadedStartTs)())&&(yield(0,d.setChatThreadLoggingLastUploadedStartTs)(0));const n=new u.ChatThreadLoggingMetadataLocalStorage,r=t?new s.ChatThreadLoggingEventStoreImpl(n):{handleMessages:()=>Promise.resolve(),getEvent:()=>Promise.resolve(),getBeforeInclusive:()=>Promise.resolve([]),deleteBeforeInclusive:()=>Promise.resolve(0)},i=t?new l.ChatThreadLoggingEventUploaderImpl(n,r):{uploadEvents:()=>Promise.resolve(0)},o=yield n.getOffset();null!=o&&A(o),p={metadataStore:n,eventStore:r,eventUploader:i},__LOG__(2)`chat thread logging initialized`}))).apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){var t,n;__LOG__(2)`chat_thread_logging: setting offset`;const r=null!==(t=yield null===(n=f())||void 0===n?void 0:n.metadataStore.setOffset(e))&&void 0!==t&&t;return r&&A(e),r}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){var t,n,r;if(null==(yield null===(t=f())||void 0===t?void 0:t.metadataStore.getOffset()))return void __LOG__(4,void 0,new Error)`chat_thread_logging: attempting to upload but offset is unset.`;null!=(yield null===(n=f())||void 0===n?void 0:n.metadataStore.getSecret())?yield null===(r=f())||void 0===r?void 0:r.eventUploader.uploadEvents(e):__LOG__(4,void 0,new Error)`chat_thread_logging: attempting to upload but secret is unset.`}))).apply(this,arguments)}function A(e){const t=(0,o.unixTime)();let n=t-t%86400+e-t;n<0&&(n+=o.DAY_SECONDS),self.setTimeout((0,i.default)((function*(){var t;yield null===(t=f())||void 0===t?void 0:t.eventUploader.uploadEvents(),A(e)})),1e3*n)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){const e=yield f(),t=yield null==e?void 0:e.metadataStore.getSecret();return null==t?(__LOG__(3,void 0,void 0,!0)`chat_thread_logging: cannot get user secret from the thread logging metadata store`,SEND_LOGS("ctl-secret-unset"),null):t}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){const n=yield m();if(null==n)return void __LOG__(3)`chat_thread_logging: cannot generate getChatThreadID because secret is unset.`;const r=(0,c.getThreadDs)(null!=t?t:(0,o.unixTime)());return(0,c.generateThreadID)(n,e,r)}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){const t=yield m();return null==t?(__LOG__(3,void 0,void 0,!0)`[ctwa] labels: cannot generate getChatThreadIDHMAC because secret is unset`,SEND_LOGS("ctwa-labels-thread-id-hmac-error"),null):(0,c.generateThreadIDHMAC)(t,e)}))).apply(this,arguments)}},39026:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLAG_FIELD_NAMES=t.FLAG_FIELDS=void 0,t.toMaybeBoolFlagActionType=function(e){if(!r.hasOwnProperty(e))return null;return e};const n={isCartAddClicked:!1,isCtaOnPdpClicked:!1,isCommerceViewed:!1,viaContactlessChats:!1},r=Object.freeze(n);t.FLAG_FIELDS=r;const i=Object.freeze(Object.keys(n));t.FLAG_FIELD_NAMES=i},71050:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COUNT_FIELD_NAMES=t.COUNT_FIELDS=void 0,t.toMaybeCountActionType=function(e){if(!r.hasOwnProperty(e))return null;return e};const n={profileViews:0,statusViews:0,statusReplies:0,groupMembershipReplies:0,groupPrivateReplies:0,profileReplies:0,chatOverflowClicks:0,pdpViews:0,ordersSent:0,repliesSent:0,commentsReceived:0},r=Object.freeze(n);t.COUNT_FIELDS=r;const i=Object.freeze(Object.keys(n));t.COUNT_FIELD_NAMES=i},35334:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatThreadLoggingEventStoreImpl=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(78494),s=n(93040),l=n(94598),u=n(42247),c=n(42467),d=n(39026),p=n(71050),f=n(80127),_=n(46804),g=n(71507),h=n(22582),A=n(98051),m=n(18638),E=n(23440),y=n(3885),S=r(n(27112)),v=n(51017);t.ChatThreadLoggingEventStoreImpl=class{constructor(e,t){this.metadataStore=e,this._cachedChanges=new Map,this._updateIntervalSeconds=null!=t?t:5,this._shiftTimer=new a.ShiftTimer((()=>{this._flush()}))}handleMessages(e){var t=this;return(0,o.default)((function*(){const n=yield t.metadataStore.getOffset();if(null==n)return void __LOG__(2)`ChatThreadLoggingEventStoreImpl: handleMessages: offset unset.`;const r=yield t.metadataStore.getLastUploadedStartTs();__LOG__(2)`ChatThreadLoggingEventStoreImpl: lastUploadedStartTs=${r}`,e.forEach((e=>{if(!(0,f.shouldUpdateChatEvent)(n,e.ts,r))return;const o=(0,f.computeStartTs)(n,e.ts),a=e.chatId.toString({legacy:!0}),s=a+"_"+String(o),l=t._cachedChanges.get(s),u=null!=l?l:(0,i.default)((0,i.default)((0,i.default)({},p.COUNT_FIELDS),d.FLAG_FIELDS),{},{startTs:o,chatId:a,addMsgsSent:0,addMsgsReceived:0,addMsgsRead:0,addViewOnceMsgsSent:0,addViewOnceMsgsReceived:0,addViewOnceMsgsOpened:0,addCallOffersSent:0,addCallOffersReceived:0,addTotalCallDuration:0,addCommerceMsgsSent:0,addCommerceMsgsReceived:0,addPdpInquiriesSent:0,addReactionsSent:0,addReactionsReceived:0,addForwardMessagesSent:0,addForwardMessagesReceived:0,addEditedMsgsSent:0,addBotMessagesSent:0,addBotMessagesReceived:0,addBotMessagesEdited:0});null==l&&t._cachedChanges.set(s,u);const c=(0,p.toMaybeCountActionType)(e.activityType),_=(0,d.toMaybeBoolFlagActionType)(e.activityType);if(null!=c)u[c]+=1;else if(null!=_)u[_]=void 0===e.boolValue||e.boolValue;else switch(e.activityType){case"msgSend":u.addMsgsSent+=1,e.isViewOnce&&(u.addViewOnceMsgsSent+=1),!0===e.isCommerceMessage&&(u.addCommerceMsgsSent+=1),!0===e.isPdpInquiry&&(u.addPdpInquiriesSent+=1),e.isReply&&(u.repliesSent+=1),e.isReaction&&(u.addReactionsSent+=1),e.isForwarded&&(u.addForwardMessagesSent+=1),e.isEdit&&(u.addEditedMsgsSent+=1),e.isBot&&(u.addBotMessagesSent+=1);break;case"msgReceive":u.addMsgsReceived+=1,e.isViewOnce&&(u.addViewOnceMsgsReceived+=1),!0===e.isCommerceMessage&&(u.addCommerceMsgsReceived+=1),e.isReaction&&(u.addReactionsReceived+=1),e.isForwarded&&(u.addForwardMessagesReceived+=1),e.isBot&&(e.isEdit?u.addBotMessagesEdited+=1:u.addBotMessagesReceived+=1);break;case"msgRead":u.addMsgsRead+=e.readCount;break;case"viewOnceOpen":u.addViewOnceMsgsOpened+=1;break;case"voipCall":e.outgoing?u.addCallOffersSent+=1:u.addCallOffersReceived+=1,u.addTotalCallDuration+=e.durationInSeconds;break;default:__LOG__(3)`Passed event store info type not valid: ${e.activityType}`}})),yield t._setFlushIfNecessary()}))()}_setFlushIfNecessary(){this._shiftTimer.onOrBefore(1e3*this._updateIntervalSeconds)}_flush(){var e=this;return(0,o.default)((function*(){const t=Array.from(e._cachedChanges.values());e._cachedChanges.clear(),yield(0,l.createOrUpdateChatEvents)(t)}))()}_populateEvents(e){return(0,o.default)((function*(){const t=(0,s.bulkGetChats)(e.map((e=>(0,v.createWid)(e.chatId)))),n=t.then((e=>function(e){return Promise.all(e.map(function(){var e=(0,o.default)((function*(e){return null==e?0:(yield(0,g.getStarredMessagesForChat)((0,v.createWid)(e.id),Number.MAX_SAFE_INTEGER)).length}));return function(){return e.apply(this,arguments)}}()))}(e))),r=t.then((e=>function(e){return(0,_.bulkGetIsContactABusiness)(e.map((e=>null==e?null:(0,v.createWid)(e.id))))}(e))),a=t.then((e=>function(e){return(0,h.bulkGetGroupMetadata)(e.map((e=>null==e?null:(0,v.createWid)(e.id))))}(e))),l=t.then((e=>function(e){return(0,m.getBusinessProfileTable)().bulkGet(e.map((e=>null==e?"":(0,v.createWid)(e.id).toString())))}(e))),d=t.then((function(e){return(0,E.getParticipantTable)().bulkGet(e.map((e=>null==e?"":(0,v.createWid)(e.id).toString())))})),[p,I,T,b,M,P]=yield Promise.all([t,n,r,a,d,l]);return Promise.all(e.map(function(){var e=(0,o.default)((function*(e,t){var n,r,o,a,s,l,d,_;const g=p[t],h=S.default.isGroup(e.chatId),m=b[t],E=c.BizBotAutomatedType.cast(null===(n=P[t])||void 0===n?void 0:n.automatedType),C=h?{isAGroup:h,groupSize:null!==(r=null===(o=M[t])||void 0===o||null===(a=o.participants)||void 0===a?void 0:a.length)&&void 0!==r?r:1,groupType:null==m?A.GroupType.DEFAULT:(0,A.getGroupTypeFromGroupMetadata)(m)}:{isAGroup:h,isAContact:yield(0,u.isAddressBookContact)(e.chatId),automatedType:E},O=(0,v.createWid)(e.chatId),R=(null!==(s=null==g?void 0:g.pin)&&void 0!==s?s:0)>0,N=null!==(l=null==g?void 0:g.archive)&&void 0!==l&&l,w=I[t],D=null!==(d=null==g?void 0:g.unreadCount)&&void 0!==d?d:0,L=0!==(null!==(_=null==g?void 0:g.muteExpiration)&&void 0!==_?_:0),B=T[t]?yield(0,f.getBizCatalogType)(O):null,k=S.default.isLid(e.chatId)||!0===(null==m?void 0:m.defaultSubgroup)&&!0===(null==m?void 0:m.incognito),G=(0,y.isMeAccount)(O),U=O.isBot(),x=(0,f.getWamDisappearingModeInitiatedByMe)(null==g?void 0:g.disappearingModeInitiatedByMe),F=(0,f.getWamDisappearingModeTrigger)(null==g?void 0:g.disappearingModeTrigger);return(0,i.default)((0,i.default)({},e),{},{isPinned:R,isArchived:N,contactInfo:C,messagesStarred:w,messagesUnread:D,isMuted:L,bizCatalogType:B,isPnhEnabledChat:k,isMessageYourself:G,isUserAgent:U,ephemeralityInitiator:x,ephemeralityTriggerAction:F})}));return function(){return e.apply(this,arguments)}}()))}))()}getEvent(e,t){var n=this;return(0,o.default)((function*(){n._cachedChanges.size>0&&(yield n._flush());const r=yield(0,l.getChatEvent)(e,t);return null==r?null:(yield n._populateEvents([r]))[0]}))()}getBeforeInclusive(e){var t=this;return(0,o.default)((function*(){return t._cachedChanges.size>0&&(yield t._flush()),t._populateEvents(yield(0,l.getBeforeInclusive)(e))}))()}deleteBeforeInclusive(e){var t=this;return(0,o.default)((function*(){return t._cachedChanges.size>0&&(yield t._flush()),(0,l.deleteBeforeInclusive)(e)}))()}}},56256:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatThreadLoggingEventUploaderImpl=void 0;var i=r(n(48926)),o=r(n(49619)),a=n(29987),s=n(83741),l=n(63007),u=n(42467),c=n(47710),d=n(39026),p=n(71050),f=n(80127),_=n(98051),g=n(43063);t.ChatThreadLoggingEventUploaderImpl=class{constructor(e,t){this.eventStore=t,this.metadataStore=e}uploadEvents(e){var t=this;return(0,i.default)((function*(){var n,r;const h=null===(n=null==e?void 0:e.purgeAfter)||void 0===n||n,A=yield t.metadataStore.getOffset();if(null==A)return __LOG__(3)`ChatThreadLoggingBatchEventUploader: offset not in store!`,-1;const m=null!==(r=null==e?void 0:e.lastStartTs)&&void 0!==r?r:(0,f.computeStartTs)(A,(0,a.unixTime)()-a.DAY_SECONDS);if(null==t.secret){const e=yield t.metadataStore.getSecret();if(null==e)return __LOG__(3)`ChatThreadLoggingBatchEventUploader: secret not in store!`,-1;t.secret=e}const E=yield t.eventStore.getBeforeInclusive(m);try{yield Promise.all(E.map(function(){var e=(0,i.default)((function*(e){const n=(0,f.getThreadDs)(e.startTs),r=e.contactInfo,i=new c.ChatMessageCountsWamEvent({messagesSent:e.msgsSent,messagesReceived:e.msgsReceived,commentsReceived:e.commentsReceived,viewOnceMessagesSent:e.viewOnceMsgsSent,viewOnceMessagesReceived:e.viewOnceMsgsReceived,viewOnceMessagesOpened:e.viewOnceMessagesOpened,threadDs:n,threadId:yield(0,f.generateThreadID)((0,o.default)(t.secret,"_this.secret"),e.chatId,n),isAGroup:e.contactInfo.isAGroup,groupSize:r.isAGroup?r.groupSize:void 0,isAContact:r.isAGroup?void 0:r.isAContact,isArchived:e.isArchived,isPinned:e.isPinned,messagesStarred:e.messagesStarred,messagesRead:e.msgsRead,messagesUnread:e.messagesUnread,chatMuted:e.isMuted?g.CHAT_MUTED_TYPE.MUTED_NO_NOTIFICATIONS:g.CHAT_MUTED_TYPE.NOT_MUTED,callOffersSent:e.callOffersSent,callOffersReceived:e.callOffersReceived,totalCallDuration:e.totalCallDuration,typeOfGroup:null!=e.contactInfo.groupType?(0,_.groupTypeToWamEnum)(e.contactInfo.groupType):void 0,isPnhEnabledChat:e.isPnhEnabledChat,reactionsSent:e.reactionsSent,reactionsReceived:e.reactionsReceived,isMessageYourself:e.isMessageYourself,forwardMessagesSent:e.forwardMessagesSent,forwardMessagesReceived:e.forwardMessagesReceived,editedMsgsSent:e.editedMsgsSent,totalMessageToAgentCnt:e.botMessagesSent,totalMessageFromAgentCnt:e.botMessagesReceived,totalMessageEditsFromAgentCnt:e.botMessagesEdited,isUserAgent:e.isUserAgent});(0,s.getABPropConfigValue)("dm_initiator_trigger")&&(null!=e.ephemeralityTriggerAction&&(i.ephemeralityTriggerAction=e.ephemeralityTriggerAction),null!=e.ephemeralityInitiator&&(i.ephemeralityInitiator=e.ephemeralityInitiator)),p.COUNT_FIELD_NAMES.forEach((t=>{i[t]=e[t]})),d.FLAG_FIELD_NAMES.forEach((t=>{i[t]=e[t]})),r.isAGroup||((0,l.isBizBot3pEnabled)()&&(i.isUser3pBotChat=r.automatedType===u.BizBotAutomatedType.FULL_3P),(0,l.isBizBot1pEnabled)()&&(i.isUser1pBizBotChat=r.automatedType===u.BizBotAutomatedType.PARTIAL_1P)),i.commit()}));return function(){return e.apply(this,arguments)}}()))}catch(e){__LOG__(4,void 0,new Error,!0)`chat_thread_logging: error uploading events: ${e.toString()}`,SEND_LOGS("thread-logging-upload-failure")}if(h){const e=yield t.eventStore.deleteBeforeInclusive(m);e!==E.length&&__LOG__(4,void 0,new Error)`uploadEvents: uploaded ${E.length} events but only deleted ${e} (they should be the same!)`}return yield t.metadataStore.setLastUploadedStartTs(m),E.length}))()}}},23956:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ChatThreadLoggingMetadataLocalStorage=void 0;var i=r(n(48926)),o=n(62089),a=n(56333);t.ChatThreadLoggingMetadataLocalStorage=class{setOffset(e){return(0,i.default)((function*(){return yield(0,a.setChatThreadLoggingOffset)(e),!0}))()}getOffset(){return Promise.resolve((0,a.getChatThreadLoggingOffset)())}setSecret(e){return(0,i.default)((function*(){return yield(0,a.setChatThreadLoggingSecretB64)((0,o.encodeB64)(e)),!0}))()}getSecret(){return(0,i.default)((function*(){const e=yield(0,a.getChatThreadLoggingSecretB64)();return null==e?null:(0,o.decodeB64)(e)}))()}setLastUploadedStartTs(e){return(0,i.default)((function*(){return yield(0,a.setChatThreadLoggingLastUploadedStartTs)(e),!0}))()}getLastUploadedStartTs(){return(0,i.default)((function*(){const e=yield(0,a.getChatThreadLoggingLastUploadedStartTs)();return null!=e?e:0}))()}}},80127:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.computeStartTs=v,t.generateThreadID=function(){return y.apply(this,arguments)},t.generateThreadIDHMAC=function(){return S.apply(this,arguments)},t.getBizCatalogType=function(){return I.apply(this,arguments)},t.getThreadDs=function(e){return(0,s.toDate)((0,s.castToUnixTime)(e-8*s.HOUR_SECONDS)).toISOString().split("T")[0].replace(/-/g,"/")},t.getWamDisappearingModeInitiatedByMe=function(e){if(null==e)return null;if(e)return _.EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_ME;return _.EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_OTHER},t.getWamDisappearingModeTrigger=function(e){if(null==e)return null;switch(e){case c.DisappearingModeTrigger.AccountSettings:return g.EPHEMERALITY_TRIGGER_ACTION_TYPE.ACCOUNT_SETTINGS;case c.DisappearingModeTrigger.ChatSettings:return g.EPHEMERALITY_TRIGGER_ACTION_TYPE.CHAT_SETTINGS;case c.DisappearingModeTrigger.BulkChange:return g.EPHEMERALITY_TRIGGER_ACTION_TYPE.BULK_CHANGE;default:return null}},t.isCommerceMessage=function(e){var t;const n=new Set([p.MSG_TYPE.PRODUCT,p.MSG_TYPE.ORDER,p.MSG_TYPE.LIST]);return n.has(e.type)||n.has(null===(t=e.quotedMsg)||void 0===t?void 0:t.type)||!(null==e.matchedText||""===e.matchedText||(r=e.matchedText,!(0,l.matchCatalogUrl)(r)&&!(0,l.matchProductUrl)(r)))||e.type===p.MSG_TYPE.NATIVE_FLOW&&(e.nativeFlowName===d.default.ORDER_DETAILS||e.nativeFlowName===d.default.ORDER_STATUS);var r},t.shouldIncrementMsgSendAndReceive=function(e){if([p.MSG_TYPE.KEEP_IN_CHAT].includes(e.type))return!1;return!0},t.shouldUpdateChatEvent=function(e,t,n){return v(e,t)>n};var i=r(n(48926)),o=n(62089),a=n(83599),s=n(29987),l=n(42017),u=n(20938),c=n(28626),d=r(n(718)),p=n(73602),f=n(39235),_=n(16295),g=n(85646);const h=new TextEncoder,A=e=>h.encode(e).buffer;function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t){const n=yield(0,a.hmacSha256)(e,t);return(0,o.encodeB64)(n)}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t,n){return m(e,A(t+n))}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e,t){return m(e,A(t))}))).apply(this,arguments)}function v(e,t){const n=t%s.DAY_SECONDS,r=t-n;return n>=e?r+e:r-s.DAY_SECONDS+e}function I(){return(I=(0,i.default)((function*(e){var t,n;let r;try{r=yield(0,f.queryBusinessProfile)([{wid:e}])}catch(e){return __LOG__(4,!0,new Error,!0)`Thread Logging: Failed to query business profile to set "biz_catalog_type"`,SEND_LOGS("query-business-profile-fail"),null}const i=r[0];if(!i)return null;const o=null===(t=i.profile)||void 0===t||null===(n=t.profile_options)||void 0===n?void 0:n.commerce_experience;return o===u.CommerceExperienceTypes.CATALOG?"native":o===u.CommerceExperienceTypes.SHOP?"shop":null}))).apply(this,arguments)}},2537:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addOnProviders=void 0,t.getAddOnProviderForFutureproofMsg=function(e){return c.find((t=>t.matchesFutureproof(e)))},t.getAddOnProviderForMsg=function(e){return c.find((t=>t.matches(e)))},t.getProviderForAddOnType=function(e){var t;return null!==(t=c.find((t=>t.type===e)))&&void 0!==t?t:null};var r=n(8119),i=n(29724),o=n(45929),a=n(19563),s=n(47828),l=n(79441),u=n(66483);const c=[s.pollVotesAddOnProvider,i.keepInChatAddOnProvider,l.reactionsAddOnProvider,u.reactionsEncAddOnProvider,o.messageEditAddOnProvider,a.pinInChatAddOnProvider,r.commentsAddOnProvider];t.addOnProviders=c},29724:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.keepInChatAddOnProvider=void 0;var i=r(n(48926)),o=n(1619),a=n(7339),s=n(22666),l=n(25882),u=n(73602);const c={type:s.MessageAddOnType.KeepInChat,matches:e=>e.type===u.MSG_TYPE.KEEP_IN_CHAT,matchesFutureproof:e=>e.type===u.MSG_TYPE.UNKNOWN&&e.futureproofType===u.MSG_TYPE.KEEP_IN_CHAT,canRenderInUi:()=>!0,processOrphansForNewMsg:(e,t,n)=>(0,i.default)((function*(){const e=n.map((e=>e.parsedMsgPayload)),t=(0,a.runKeepInChatTieBreaker)(e);if(__LOG__(2)`keepInChatAddOnProvider: found orphan`,null!=t){const e=(0,l.msgDataFromMsgModel)(t);yield(0,o.frontendSendAndReceive)("processKeepInChatMessage",{keepInChatMessage:e,allowNotification:!1})}}))()};t.keepInChatAddOnProvider=c},98297:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapOrphansToProviders=function(e){const t=new Map;for(const i of e){var n;const e=(0,r.getProviderForAddOnType)(i.type);if(!e)continue;const o=null!==(n=t.get(e))&&void 0!==n?n:[];o.push(i),t.set(e,o)}return t};var r=n(2537)},88930:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markAsReadForTable=function(e,t){return(0,a.getStorage)().lock([e],function(){var e=(0,o.default)((function*(e){let[n]=e;const r=yield n.anyOf(["msgKey"],t);return 0!==r.length&&(yield n.bulkCreateOrReplace(r.map((e=>(0,i.default)((0,i.default)({},e),{},{read:!0}))))),r.map((e=>{let{msgKey:t}=e;return s.default.from(t)}))}));return function(){return e.apply(this,arguments)}}())};var i=r(n(81109)),o=r(n(48926)),a=n(74557),s=r(n(60001))},45929:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.messageEditAddOnProvider=void 0;var i=r(n(48926)),o=n(7103),a=n(22666),s=n(68214),l=n(34473),u=n(73602);const c={type:a.MessageAddOnType.MessageEdit,matches:e=>e.type===u.MSG_TYPE.PROTOCOL&&"message_edit"===e.subtype,matchesFutureproof:e=>e.type===u.MSG_TYPE.UNKNOWN&&e.futureproofType===u.MSG_TYPE.PROTOCOL&&"message_edit"===e.futureproofSubtype,canRenderInUi(e){const t=e.editMsgType?(0,l.getMsgEditType)(e.editMsgType):l.MsgEditType.TextEdit;if(!t)return!1;switch(t){case l.MsgEditType.TextEdit:return(0,s.receiveTextEditEnabled)();case l.MsgEditType.CaptionEdit:return(0,s.receiveCaptionEditEnabled)()}},processOrphansForNewMsg:(e,t,n)=>(0,i.default)((function*(){var t;const r=null===(t=(yield(0,o.processEditProtocolMsgs)(n.map((e=>e.parsedMsgPayload)))).find((t=>t.parentMsg.id.equals(e.id))))||void 0===t?void 0:t.editedMsgData;r&&Object.assign(e,r)}))()};t.messageEditAddOnProvider=c},19563:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pinInChatAddOnProvider=void 0;var i=r(n(48926)),o=n(52626),a=n(22666),s=n(73602),l=n(15553),u=n(61627);const c={type:a.MessageAddOnType.PinMessage,matches:e=>e.type===s.MSG_TYPE.PIN_MESSAGE,matchesFutureproof:e=>e.type===s.MSG_TYPE.UNKNOWN&&e.futureproofType===s.MSG_TYPE.PIN_MESSAGE,canRenderInUi:()=>(0,u.isPinnedMessagesM1ReceiverEnabled)(),processOrphansForNewMsg:(e,t,n)=>(0,i.default)((function*(){const t=n.map((e=>e.parsedMsgPayload));yield(0,l.processPinMessages)(e.id.remote,t)}))(),updateAcks:(e,t)=>(0,o.updateAddOnAcksForTable)("pinned-messages",e,t)};t.pinInChatAddOnProvider=c},47828:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pollVotesAddOnProvider=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(88930),s=n(82740),l=n(52626),u=n(22666),c=n(73602),d=r(n(89482));const p={type:u.MessageAddOnType.PollVote,matches:e=>e.type===c.MSG_TYPE.POLL_UPDATE&&"poll_vote"===e.subtype,matchesFutureproof:e=>e.type===c.MSG_TYPE.UNKNOWN&&e.futureproofType===c.MSG_TYPE.POLL_UPDATE,canRenderInUi:()=>!0,processOrphansForNewMsg:(e,t,n)=>(0,o.default)((function*(){const e=new Map;for(const t of n)e.set(t.msgKey,t);return(yield(0,s.processPollUpdateMsgs)(n.map((e=>{let{parsedMsgPayload:t}=e;if(t.type===c.MSG_TYPE.POLL_UPDATE&&t.addonEncrypted)return t;throw(0,d.default)("Invalid poll vote orphan type")})))).map((t=>{var n,r;const o=t.read||null!==(n=null===(r=e.get(t.msgKey.toString()))||void 0===r?void 0:r.read)&&void 0!==n&&n;return t.read===o?t:(0,i.default)((0,i.default)({},t),{},{read:o})}))}))(),updateAcks:(e,t)=>(0,l.updateAddOnAcksForTable)("poll-votes",e,t),markAsRead:e=>(0,a.markAsReadForTable)("poll-votes",e.map(String))};t.pollVotesAddOnProvider=p},68389:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processOrphansForNewMsg=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=r(n(85564)),a=n(23041),s=n(68593),l=n(30593),u=n(98297),c=n(70867),d=n(73482);function p(){return(p=(0,i.default)((function*(e,t){const n=yield(0,l.getMessageOrphansByParentMsgKey)(e.id);n.length&&__LOG__(2)`processOrphansForNewMsg: found orphans`;const{unifiedAddons:r,otherOrphans:i,legacyReactionAddons:p}=(0,s.sortAddonOrphans)(n),f=yield(0,u.mapOrphansToProviders)(i),_=[(0,a.processMsgs)(r),(0,c.processReactionMsgs)(p)];for(const[n,r]of f.entries())_.push(n.processOrphansForNewMsg(e,t,r));yield Promise.all(_);let g=(0,o.default)(Array.from(f.values())).map((e=>e.msgKey));g=g.concat(r.map((e=>e.id.toString()))),p.length&&(g=g.concat(p.map((e=>e.id.toString())))),yield(0,d.getMessageOrphanTable)().bulkRemove(g)}))).apply(this,arguments)}},52626:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateAddOnAcksForTable=function(e,t,n){return(0,s.getStorage)().lock([e],function(){var e=(0,o.default)((function*(e){let[r]=e;const o=[],s=new Map;for(const e of t){const t=e.msgKey.toString();o.push(t),s.set(e.msgKey.toString(),e)}const l=yield r.anyOf(["msgKey"],o,{shouldDecrypt:!1}),u=[],c=[];for(const e of l){const t=(0,a.default)(s.get(e.msgKey),"updatesByMsgKey.get(row.msgKey)");if(!n(e,t))continue;const r=(0,i.default)((0,i.default)({},e),{},{ack:t.ack});u.push(r),c.push(t)}return yield r.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(u),c}));return function(){return e.apply(this,arguments)}}())};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(74557)},86854:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_OPAQUE_DATA_KEYS=void 0,t.deserializeChat=function(e){const t=(0,i.default)({},e);return function(e){const t=(0,a.decodeProtobuf)(o.ChatRowOpaqueDataSpec,e.chatRowOpaqueData);l.forEach((n=>{null!=(null==t?void 0:t[n])&&(e[n]=null==t?void 0:t[n])}))}(t),t},t.serializeChat=function(e){const t=(0,i.default)({},e);return function(e){const t={};l.forEach((n=>{t[n]=e[n],delete e[n]}));const n=(0,s.encodeProtobuf)(o.ChatRowOpaqueDataSpec,t);e.chatRowOpaqueData=n.readBuffer()}(t),t};var i=r(n(81109)),o=n(44277),a=n(33655),s=n(86881);const l=["draftMessage"];t.CHAT_OPAQUE_DATA_KEYS=l},58681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EphemeralExemptionType=void 0;const r=n(76672)({UNSET:0,ORDERS_AND_PAYMENTS:1});t.EphemeralExemptionType=r},71507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStarredMessagesForChat=function(e,t,n){return Promise.resolve().then((()=>{if(null!=n)return(0,o.getMessageTable)().get(n.toString())})).then((n=>{const a=null==n?[(0,i.endOfChat)(e),1/0]:[n.internalId,n.isStarred],s=[(0,i.beginningOfChat)(e),0];return(0,o.getMessageTable)().between(["internalId","isStarred"],s,a,{lowerInclusive:!1,upperInclusive:!1,reverse:!0,limit:t}).then((e=>e.map((e=>(0,r.messageFromDbRow)(e)))))}))};var r=n(74773),i=n(62505),o=n(10139)},31125:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateChatTable=function(e,t){return(0,o.getChatTable)().merge(e.toString(),t).catch((e=>{if(e instanceof i.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`updateChatTable: failed to update in storage`,SEND_LOGS("updateChatTable failed"),(0,a.default)("updateChatTable failed")}))};var i=n(91329),o=n(94007),a=r(n(89482))},48840:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDatabaseForLastAddOnPreview=function(e){return(0,r.bulkUpdateChatLastAddOnPreview)(e)};var r=n(93040)},64071:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.lastAddOnPreviewCandidateFromCommentRowType=function(e){return{msgKey:e.msgKey,parentMsgKey:e.parentMsgKey,sender:e.sender,timestamp:1e3*e.t,isOrphan:!1,type:"comment"}},t.lastAddOnPreviewCandidateFromReactionRowType=function(e){return{msgKey:e.msgKey,parentMsgKey:e.parentMsgKey,sender:e.senderUserJid,reactionText:e.reactionText,timestamp:e.timestamp,isOrphan:1===e.orphan,type:"reaction"}},t.lastAddOnPreviewCandidateFromVoteData=function(e,t){return{msgKey:e.msgKey.toString(),isOrphan:t,selectedOptionsCount:e.selectedOptionLocalIds.length,parentMsgKey:e.parentMsgKey.toString(),sender:e.sender.toString(),timestamp:e.senderTimestampMs,type:"poll_vote"}},t.lastAddOnPreviewFromCandidate=function(e){switch(e.type){case"reaction":return{type:"reaction",msgKey:e.msgKey,parentMsgKey:e.parentMsgKey,reactionText:e.reactionText,sender:e.sender,timestamp:e.timestamp};case"poll_vote":return{type:"poll_vote",msgKey:e.msgKey,parentMsgKey:e.parentMsgKey,sender:e.sender,timestamp:e.timestamp};case"comment":return{type:"comment",msgKey:e.msgKey,parentMsgKey:e.parentMsgKey,sender:e.sender,timestamp:e.timestamp}}},t.lastAddOnPreviewFromDeprecatedLastReactionPreview=function(e){return{msgKey:e.msgKey,parentMsgKey:e.parentMsgKey,sender:e.senderUserJid,timestamp:e.timestamp,reactionText:(0,i.default)(e.reactionText,"lastReactionPreview.reactionText"),type:"reaction"}};var i=r(n(49619))},94568:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isMessageTypeExemptedFromDisappearing=function(e,t,n){return(0,i.inOrderMessagesEphemeralExceptionEnabled)()&&e===l.MSG_TYPE.INTERACTIVE&&t===s.default.NATIVE_FLOW&&(n===a.default.ORDER_DETAILS||n===a.default.ORDER_STATUS||n===a.default.PAYMENT_METHOD||n===a.default.PAYMENT_STATUS)},t.shouldShowOrderExemptionSystemMessage=function(e){let{id:t,ephemeralDuration:n,ephemeralDisplayedExemptions:r}=e;return null!=t&&0!==n&&null!=n&&o.EphemeralExemptionType.ORDERS_AND_PAYMENTS!==r},t.shouldUnsetChatEphemeralDisplayedExemption=function(e){let{id:t,ephemeralDuration:n,ephemeralDisplayedExemptions:r}=e;return null!=t&&(0===n||null==n)&&o.EphemeralExemptionType.ORDERS_AND_PAYMENTS===r};var i=n(56660),o=n(58681),a=r(n(718)),s=r(n(38090)),l=n(73602)},42247:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkUpdateUsernamesInDb=function(e){return(0,h.getStorage)().lock(["contact"],(t=>{let[n]=t;return n.bulkCreateOrMerge(e)}))},t.checkPnToLidMapping=function(e){if(!(0,d.getABPropConfigValue)("web_single_signal_session_and_identity_read_using_lid"))return;const t=new Set;e.forEach((e=>{e.isLid()||t.add((0,S.toUserWid)(e).toString())}));const n=new Set;t.forEach((e=>{null==C((0,S.createUserWid)(e))&&n.add(e)})),n.size>0&&(__LOG__(4,void 0,new Error,!0)`LID is null - fetching ${t.size} PN records. Mapping is missing for :${n.size}`,SEND_LOGS("lidInfraAccount"))},t.clearLidPnMappingCache=function(){v.clear(),I.clear()},t.createLidPnMappings=M,t.createOrMergeAddressBookContacts=function(e){return(0,m.getContactTable)().bulkCreateOrMerge(e)},t.deleteAddressBookContacts=function(e){return(0,m.getContactTable)().bulkRemove(e)},t.flushLidPnMappingsToDb=function(){return M({mappings:[],flushImmediately:!0}).catch((()=>{__LOG__(4,void 0,new Error,!0)`flushLidPnMappingsToDb failed!`,SEND_LOGS("Failed to flushLidPnMappingsToDb")}))},t.getAllLidContacts=function(){return v.getAllLids()},t.getAlternateDeviceWid=function(e){const t=P((0,S.toUserWid)(e));var n;if(null!=t)return(0,S.createDeviceWidFromUserAndDevice)(t.user,t.server,null!==(n=e.device)&&void 0!==n?n:l.DEFAULT_DEVICE_ID)},t.getAlternateUserWid=P,t.getAlternateWidBulk=function(e){const t=new Map;return e.forEach((e=>{const n=P(e);null!=n&&t.set(n.toString(),e)})),t},t.getAlternateWidBulkForLids=function(e){const t=new Map;return e.forEach((e=>{const n=(0,S.createWid)(e);if(y.default.isLid(n)){const e=O(n);if(null!=e){const r=[];if(r.push(e.toString()),!e.isLid()){const t=C(e);null==t||y.default.equals(n,t)||r.push(t.toString())}t.set(n.toString(),r)}}})),t},t.getContactHash=b,t.getContactRecord=R,t.getContactUsername=function(){return N.apply(this,arguments)},t.getCurrentLid=C,t.getPhoneNumber=O,t.isAddressBookContact=function(){return T.apply(this,arguments)},t.lidPnCacheDirtySet=t.lidPnCache=void 0,t.setNotAddressBookContacts=function(e){return(0,h.getStorage)().lock(["contact"],(t=>{let[n]=t;const r=e.map((e=>({id:e,isAddressBookContact:0,name:void 0,shortName:void 0,type:"out",contactHash:b(e)})));return n.bulkCreateOrMerge(r)}))},t.updateContactAdvHostedType=function(){return w.apply(this,arguments)},t.updateLidMetadata=function(e){return(0,h.getStorage)().lock(["contact"],(t=>{let[n]=t;const r=e.map((e=>{const{lid:t,data:n}=e;return(0,i.default)({id:t.toString()},n)}));return n.bulkCreateOrMerge(r)}))},t.warmUpLidPnMapping=function(e,t,n){v.add(e,{lid:e,phoneNumber:t,phoneNumberCreatedAt:n})};var i=r(n(81109)),o=r(n(48926)),a=n(62089),s=r(n(82065)),l=n(44037),u=r(n(27522)),c=n(29987),d=n(83741),p=n(1619),f=n(41404),_=n(96955),g=n(10386),h=n(74557),A=n(59266),m=n(93769),E=n(3885),y=r(n(27112)),S=n(51017);const v=new g.LidPnCache;t.lidPnCache=v;const I=new Set;function T(){return(T=(0,o.default)((function*(e){const t=yield(0,m.getContactTable)().get(e);return null!=t&&1===t.isAddressBookContact}))).apply(this,arguments)}function b(e){const t=(0,S.createWid)(e).user,n=(0,a.decodeB64)((0,u.default)(t+"WA_ADD_NOTIF"));return(0,a.encodeB64)(n.slice(0,3))}function M(e){let{mappings:t,flushImmediately:n}=e;const r=[],o=new Map(t.map((e=>[e.pn,e.lid]))),a=(0,c.unixTime)();if(t.forEach((e=>{const t=e.lid,s=v.getPhoneNumber(t),l=null!=s?v.getCurrentLid(s):null;if(null==s||null!=l&&!l.equals(e.lid)){const s=o.get(e.pn)===t?a:(0,c.castToUnixTime)(0);v.add(t,{lid:t,phoneNumber:e.pn,phoneNumberCreatedAt:s}),n?r.push((0,i.default)((0,i.default)({},e),{},{phoneNumberCreatedAt:s})):I.add(t.toString())}})),n&&I.size>0&&(__LOG__(2)`flush lidPnCacheDirtySet: get dirty updates for ${Array.from(I).join(",")}`,I.forEach((e=>{const t=(0,S.createUserWid)(e),n=v.getLidEntry(t);null!=n&&r.push({lid:t,pn:(0,S.toUserWid)(n.phoneNumber),phoneNumberCreatedAt:(0,c.castToUnixTime)(n.phoneNumberCreatedAt)})})),__LOG__(2)`lidPnCacheDirtySet: ${I.size} flushed`,I.clear()),0===r.length)return Promise.resolve();const s=r.map((e=>{let{lid:t,pn:n,phoneNumberCreatedAt:r}=e;return{id:t.toString(),phoneNumber:n.toString(),phoneNumberCreatedAt:r}}));return(0,m.getContactTable)().bulkCreateOrMerge(s)}function P(e){if(null!=e.device)throw(0,s.default)("getAlternateUserWid - Invalid get call using deviceWid");return e.isLid()?O(e):C(e)}function C(e){const t=(0,E.getMaybeMeUser)(),n=(0,E.getMaybeMeLidUser)();return null!=n&&null!=t&&e.equals(t)?n:v.getCurrentLid(e)}function O(e){const t=(0,E.getMaybeMeLidUser)(),n=(0,E.getMaybeMeUser)();return null!=n&&null!=t&&e.equals(t)?n:v.getPhoneNumber(e)}function R(e){return(0,m.getContactTable)().get(e.toJid())}function N(){return(N=(0,o.default)((function*(e){const t=yield R(e);return null==t?void 0:t.username}))).apply(this,arguments)}function w(){return(w=(0,o.default)((function*(e,t){if((0,f.bizHostedDevicesEnabled)()){if(null==t)return;const n=e.isLid()?(0,_.toLidUserJid)(e.user):(0,_.toPhoneUserJid)(e.user);yield(0,m.getContactTable)().merge(n,{isHosted:t===A.ADVEncryptionType.HOSTED}).catch((e=>{throw __LOG__(4,!0,new Error)`updateContactAdvHostedTypefailed`,e})),(0,p.frontendFireAndForget)("updateContactAdvAccountType",{contactId:e,advAccountType:t})}return Promise.resolve()}))).apply(this,arguments)}t.lidPnCacheDirtySet=I},46804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetIsContactABusiness=function(e){return(0,r.getVerifiedBusinessNameTable)().bulkGet(e.map((e=>{var t;return null!==(t=null==e?void 0:e.user)&&void 0!==t?t:""}))).then((e=>e.map((e=>null!=e))))};var r=n(99801)},42775:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.persistContactUpdateBatched=function(e,t){return l((0,i.default)((0,i.default)({},t),{},{id:e.toJid()}))};var i=r(n(81109)),o=r(n(48926)),a=n(66210),s=n(93769);const l=(0,a.batch)({delayMs:3e3},function(){var e=(0,o.default)((function*(e){return yield function(){return u.apply(this,arguments)}(e),e.map((()=>{}))}));return function(){return e.apply(this,arguments)}}());function u(){return(u=(0,o.default)((function*(e){const t=Array.from(e.reduce(((e,t)=>{var n;return e.set(t.id,(0,i.default)((0,i.default)({},null!==(n=e.get(t.id))&&void 0!==n?n:{}),t)),e}),new Map).values());yield(0,s.getContactTable)().bulkCreateOrMerge(t)}))).apply(this,arguments)}},10386:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LidPnCache=void 0;var i=n(51017),o=r(n(89482));t.LidPnCache=class{constructor(){this._lidMap=new Map,this._pnMap=new Map}getPhoneNumber(e){var t;return null===(t=this.getLidEntry(e))||void 0===t?void 0:t.phoneNumber}getLidEntry(e){if(!e.isUser()||!e.isLid())throw(0,o.default)("WaWebLidPnCache - Invalid get call");const t=e.toString();if(this._lidMap.has(t))return this._lidMap.get(t)}getCurrentLid(e){if(!e.isUser()||e.isLid())throw(0,o.default)("WaWebLidPnCache - Invalid get call");const t=e.toString();var n;if(this._pnMap.has(t))return null===(n=this._pnMap.get(t))||void 0===n?void 0:n.lid}add(e,t){if(!e.isLid())throw(0,o.default)("WaWebLidPnCache - Invalid add call");const n=e.toString();this._lidMap.set(n,t);const{phoneNumber:r}=t;null!=r&&this._addInvertedIndex(r,t)}_addInvertedIndex(e,t){if(e.isLid())throw(0,o.default)("WaWebLidPnCache - Invalid _updatePnMap call");const n=e.toString();if(this._pnMap.has(n)){const e=this._pnMap.get(n);null!=e&&(null==e?void 0:e.phoneNumberCreatedAt)<t.phoneNumberCreatedAt&&this._pnMap.set(n,t)}else this._pnMap.set(n,t)}getAllLids(){return Array.from(this._lidMap.keys()).sort().map((e=>(0,i.createWid)(e)))}clear(){this._lidMap.clear(),this._pnMap.clear()}}},79247:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultSubgroup=function(){return y.apply(this,arguments)},t.getDefaultSubgroupMetadata=m,t.getJoinedSubgroups=I,t.getJoinedSubgroupsMetadata=S,t.getSubgroups=function(){return A.apply(this,arguments)},t.getUnjoinedSubgroups=function(){return M.apply(this,arguments)},t.getUnjoinedSubgroupsMetadata=b,t.isLastJoinedSubgroup=function(){return P.apply(this,arguments)},t.persistCommunityLink=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={chatId:e,subgroups:t,action:n};if(r)return g(i);return f([i])};var i=r(n(81109)),o=r(n(48926)),a=n(66210),s=n(505),l=n(78440),u=n(94007),c=n(35872),d=n(31304),p=n(51017);function f(){return _.apply(this,arguments)}function _(){return(_=(0,o.default)((function*(e){const t=new Map,n=new Map;e.forEach((e=>{switch(e.subgroups.forEach((e=>{n.set(String(e.id),null)})),e.action){case s.CommunityLinkOperation.SiblingGroupLink:case s.CommunityLinkOperation.SiblingGroupUnlink:t.set(String(e.chatId),null)}})),(yield(0,c.getGroupMetadataTable)().bulkGet(Array.from(t.keys()))).forEach((e=>{e&&null!=e.parentGroup&&t.set(e.id,String(e.parentGroup))})),(yield(0,u.getChatTable)().bulkGet(Array.from(n.keys()))).forEach((e=>{e&&n.set(e.id,e)}));const r=new Map,o=new Map,a=new Set;e.forEach((e=>{let i=null,l=!1;switch(e.action){case s.CommunityLinkOperation.SiblingGroupLink:i=t.get(String(e.chatId)),l=!0;break;case s.CommunityLinkOperation.SiblingGroupUnlink:i=t.get(String(e.chatId)),l=!1;break;case s.CommunityLinkOperation.SubGroupLink:i=String(e.chatId),l=!0;break;case s.CommunityLinkOperation.SubGroupUnlink:i=String(e.chatId),l=!1}null!=i&&((e,t,i)=>{t.forEach((t=>{const s=String(t.id),l=n.get(s);if(null==l||l.isReadOnly)if(i){var u;a.delete(s);const n={id:s,subject:t.subject,subjectTime:null!==(u=t.subjectTime)&&void 0!==u?u:0,parentGroup:e},r=o.get(s);r&&r.subjectTime>n.subjectTime&&(n.subject=r.subject,n.subjectTime=r.subjectTime),o.set(s,n)}else o.delete(s),a.add(s);else r.set(s,{id:s,parentGroup:i?e:void 0})}))})(i,e.subgroups,l)})),yield Promise.all([(0,c.getGroupMetadataTable)().bulkCreateOrMerge(Array.from(r.values())),(0,d.getUnjoinedSubgroupMetadataTable)().bulkRemove(Array.from(a)),(0,d.getUnjoinedSubgroupMetadataTable)().bulkGet(Array.from(o.keys())).then((e=>(e.forEach((e=>{if(!e)return;const t=o.get(e.id);t&&null!=e.subjectTime&&e.subjectTime>t.subjectTime&&(t.subjectTime=e.subjectTime,t.subject=e.subject)})),(0,d.getUnjoinedSubgroupMetadataTable)().bulkCreateOrMerge(Array.from(o.values()).map((e=>(0,i.default)({},e)))))))])}))).apply(this,arguments)}const g=(0,a.batch)({delayMs:5e3},function(){var e=(0,o.default)((function*(e){return yield f(e),Promise.resolve(e.map((()=>{})))}));return function(){return e.apply(this,arguments)}}());function h(e){return(0,c.getGroupMetadataTable)().equals(["parentGroup"],e.toString())}function A(){return(A=(0,o.default)((function*(e){return(yield h(e)).map((e=>(0,p.createWid)(e.id)))}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,o.default)((function*(e){return(yield h(e)).find((e=>!0===e.defaultSubgroup))}))).apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e){const t=yield m(e);return null==t?null:(0,p.createWid)(t.id)}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,o.default)((function*(e){const t=yield h(e);return(yield(0,l.bulkCheckMyMembership)(t.map((e=>{let{id:t}=e;return(0,p.createWid)(t)})))).map(((e,n)=>[t[n],e])).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t}))}))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=(0,o.default)((function*(e){return(yield S(e)).map((e=>{let{id:t}=e;return(0,p.createWid)(t)}))}))).apply(this,arguments)}function b(e){return(0,d.getUnjoinedSubgroupMetadataTable)().equals(["parentGroup"],e.toString())}function M(){return(M=(0,o.default)((function*(e){return(yield b(e)).map((e=>(0,p.createWid)(e.id)))}))).apply(this,arguments)}function P(){return(P=(0,o.default)((function*(e){const t=e.parentGroup;if(null==t)return!1;const n=(0,p.createWid)(e.id),r=yield I((0,p.createWid)(t));return 1===r.length&&r[0].equals(n)}))).apply(this,arguments)}},42417:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeMembershipApprovalRequests=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return s({id:e,requests:t});const r=e.toString();return(0,a.getStorage)().lock(["pending-membership-approval-request"],(e=>{let[n]=e;return n.bulkRemove(t.map((e=>[r,e.toString()])))}))};var i=r(n(48926)),o=n(66210),a=n(74557);const s=(0,o.batch)({delayMs:3e3},function(){var e=(0,i.default)((function*(e){const t=e.flatMap((e=>{const t=e.id.toString();return e.requests.map((e=>[t,e.toString()]))}));return yield(0,a.getStorage)().lock(["pending-membership-approval-request"],(e=>{let[n]=e;return n.bulkRemove(t)})),t.map((()=>{}))}));return function(){return e.apply(this,arguments)}}())},2505:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AddressingModeMigrationResult=void 0,t.addParticipantInfo=b,t.addParticipantInfoIncognitoCag=M,t.addPastParticipants=function(e){return(0,f.getStorage)().lock(["participant"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=yield n.bulkGet(e.map((e=>e.groupId))),i=e.map(((e,t)=>{let{groupId:n,pastParticipants:i}=e;const o=r[t];return o?function(e,t){return{groupId:e.groupId,senderKey:e.senderKey,participants:e.participants,pastParticipants:t.map((e=>{let{id:t,leaveReason:n,leaveTs:r}=e;return{jid:t.toString(),leaveTs:r,leaveReason:n}})),admins:e.admins,rotateKey:e.rotateKey,staleType:e.staleType}}(o,i):w(n,{pastParticipants:i})}));return n.bulkCreateOrReplace(i)}));return function(){return t.apply(this,arguments)}}())},t.bulkMarkGroupParticipantStale=function(e){let{groupIds:t}=e;return(0,f.getStorage)().lock(["participant"],(e=>{let[n]=e;return n.bulkCreateOrMerge(t.map((e=>({groupId:String(e),staleType:u.STALE_TYPES.PARTICIPANT}))))}))},t.changeParticipantAdminInfoIncognitoCag=R,t.createParticipantInfo=w,t.getGroupParticipant=function(){return U.apply(this,arguments)},t.markGroupParticipantStale=function(e){let{group:t}=e;return(0,f.getStorage)().lock(["participant"],(e=>{let[n]=e;return n.merge(String(t),{staleType:u.STALE_TYPES.PARTICIPANT})}))},t.migrateParticipantInfoAddressingMode=function(){return B.apply(this,arguments)},t.modifyGroupParticipant=function(e){let{group:t,oldId:n,newId:r}=e;const a=String(t);return(0,f.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[t]=e;const o=yield t.get(a);if(!o)throw new u.GroupUnSyncedError("modifyGroupParticipant: group participant info missing");return t.createOrReplace(function(e,t,n){const r=String(t),o=String(n),a=new Map(e.senderKey),s=e.participants.filter((e=>e!==r)).concat(o);Array.from(a.keys()).forEach((e=>{const n=(0,y.createWid)(e).user;t.user===n?a.delete(e):a.set(e,!1)})),a.set(o,!1);const l=e.admins.map((e=>e===r?o:e));return(0,i.default)((0,i.default)({},e),{},{participants:s,senderKey:a,admins:l,rotateKey:!0})}(o,n,r))}));return function(){return e.apply(this,arguments)}}())},t.removeParticipantInfo=P,t.removeParticipantInfoIncognitoCag=C,t.replaceParticipantInfo=D,t.replaceParticipantInfoIncognitoCag=G,t.replaceParticipants=function(e){let{group:t,participants:n,admins:r,deviceIds:i,groupInfo:a}=e,s=!1;null!=a&&(s=Boolean(a.incognito)&&Boolean(a.defaultSubgroup));const l=t.toString();return(0,f.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[t]=e;const o=yield t.get(l);if(!o)return t.create(w(l,{participants:n,admins:r,deviceIds:i}));yield t.createOrReplace(s?G(o,{participants:n,admins:r,deviceIds:i}):D(o,{participants:n,admins:r,deviceIds:i}))}));return function(){return e.apply(this,arguments)}}())},t.updateCommunityParticipants=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return T({id:String(e),data:t});const{participants:r}=t,i=e.toString();return(0,f.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[n]=e;const o=yield n.get(i);if(!o)throw new u.GroupUnSyncedError(`updateCommunityParticipants: group participant info missing for action ${t.action}`);switch(t.action){case u.PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE:return n.createOrReplace(N(o,r,u.PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE));case u.PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE:return n.createOrReplace(N(o,r,u.PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE));default:throw(0,S.default)(`updateCommunityParticipants: failed with unknown action ${t.action}`)}}));return function(){return e.apply(this,arguments)}}())},t.updateDBParticipants=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=Boolean(null==n?void 0:n.defaultSubgroup)&&Boolean(null==n?void 0:n.incognito);if(r)return I({id:String(e),data:t,groupMetadata:n});const{participants:a}=t,s=e.toString();return(0,f.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[n]=e;const r=yield n.get(s);if(!r)throw new u.GroupUnSyncedError(`updateParticipants: group participant info missing for action ${t.action}`);switch(t.action){case u.PARTICIPANT_OPERATION.ADD:return n.createOrReplace(i?M(r,a,t.deviceIds):b(r,a,t.deviceIds));case u.PARTICIPANT_OPERATION.REMOVE:return n.createOrReplace(i?C(r,a,t.timestamp,t.author,t.reason):P(r,a,t.timestamp,t.author,t.reason));case u.PARTICIPANT_OPERATION.DEMOTE:return n.createOrReplace(i?R(r,a,t.deviceIds,u.PARTICIPANT_OPERATION.DEMOTE):O(r,a,t.deviceIds,u.PARTICIPANT_OPERATION.DEMOTE));case u.PARTICIPANT_OPERATION.PROMOTE:return n.createOrReplace(i?R(r,a,t.deviceIds,u.PARTICIPANT_OPERATION.PROMOTE):O(r,a,t.deviceIds,u.PARTICIPANT_OPERATION.PROMOTE));default:throw(0,S.default)(`updateParticipants: failed with unknown action ${t.action}`)}}));return function(){return e.apply(this,arguments)}}())},t.updateGroupParticipantTableWithoutDeviceSync=function(){return v.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(66210),s=n(44037),l=r(n(49619)),u=n(88470),c=n(98051),d=n(5991),p=n(41843),f=n(74557),_=n(20601),g=n(97575),h=n(23440),A=n(3885),m=n(58798),E=n(98701),y=n(51017),S=r(n(89482));function v(){return(v=(0,o.default)((function*(e){let{groupInfos:t}=e;const n=yield(0,h.getParticipantTable)().bulkGet(t.map((e=>e.id.toString()))),r=new Map;n.forEach((e=>e&&r.set(e.groupId,e.senderKey)));const i=t.map((e=>{var t,n,i;const o=[],a=[],s=e.id.toString(),l=r.get(s)||new Map;null===(t=e.participants)||void 0===t||t.forEach((e=>{e.isAdmin&&a.push(e.id),o.push(e.id)}));const c=null!==(n=null===(i=e.pastParticipants)||void 0===i?void 0:i.map((e=>{let{id:t,leaveTs:n,leaveReason:r}=e;return{jid:t.toString(),leaveTs:n,leaveReason:r}})))&&void 0!==n?n:[];if(Boolean(e.incognito)&&Boolean(e.defaultSubgroup)){const t=a.some((e=>(0,A.isMeAccount)(e)));(0,_.augmentedCagGroupParticipantList)(t,e.participants).forEach((function(e){const t=String(e);l.has(t)||l.set(t,!1)}))}else{var d;null===(d=e.participants)||void 0===d||d.forEach((e=>{l.set(String(e.id),!1)}))}return{groupId:s,participants:o.map(String),pastParticipants:c,admins:a.map(String),senderKey:l,rotateKey:!1,staleType:u.STALE_TYPES.DEVICE}}));return(0,h.getParticipantTable)().bulkCreateOrReplace(i)}))).apply(this,arguments)}const I=(0,a.batch)({delayMs:3e3},function(){var e=(0,o.default)((function*(e){const t=Array.from(new Set(e.map((e=>e.id))));return yield(0,f.getStorage)().lock(["participant"],function(){var n=(0,o.default)((function*(n){let[r]=n;const i=new Map((yield r.bulkGet(t)).filter(Boolean).map((e=>[e.groupId,e])));return e.forEach((e=>{let{id:t,data:n,groupMetadata:r}=e;const o=Boolean(null==r?void 0:r.defaultSubgroup)&&Boolean(null==r?void 0:r.incognito),a=i.get(t);if(!a)return void __LOG__(2)`updateParticipantsBatched: no local record found for group ${t}`;const{participants:s}=n;let l=null;switch(n.action){case u.PARTICIPANT_OPERATION.ADD:l=o?M(a,s,n.deviceIds):b(a,s,n.deviceIds);break;case u.PARTICIPANT_OPERATION.REMOVE:l=o?C(a,s,n.timestamp,n.author,n.reason):P(a,s,n.timestamp,n.author,n.reason);break;case u.PARTICIPANT_OPERATION.DEMOTE:l=o?R(a,s,n.deviceIds,u.PARTICIPANT_OPERATION.DEMOTE):O(a,s,n.deviceIds,u.PARTICIPANT_OPERATION.DEMOTE);break;case u.PARTICIPANT_OPERATION.PROMOTE:l=o?R(a,s,n.deviceIds,u.PARTICIPANT_OPERATION.PROMOTE):O(a,s,n.deviceIds,u.PARTICIPANT_OPERATION.PROMOTE);break;default:__LOG__(2)`updateParticipants: failed with unknown action ${n.action}`}null!=l&&i.set(l.groupId,l)})),r.bulkCreateOrReplace(Array.from(i.values()))}));return function(){return n.apply(this,arguments)}}()),e.map((()=>{}))}));return function(){return e.apply(this,arguments)}}()),T=(0,a.batch)({delayMs:3e3},function(){var e=(0,o.default)((function*(e){const t=Array.from(new Set(e.map((e=>e.id))));return yield(0,f.getStorage)().lock(["participant"],function(){var n=(0,o.default)((function*(n){let[r]=n;const i=new Map((yield r.bulkGet(t)).filter(Boolean).map((e=>[e.groupId,e])));return e.forEach((e=>{let{id:t,data:n}=e;const r=i.get(t);if(!r)return void __LOG__(2)`updateCommunityParticipantsBatched: no local record found for group ${t}`;const{participants:o}=n;let a=null;switch(n.action){case u.PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE:a=N(r,o,u.PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE);break;case u.PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE:a=N(r,o,u.PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE);break;default:__LOG__(2)`updateCommunityParticipantsBatched: failed with unknown action ${n.action}`}null!=a&&i.set(a.groupId,a)})),r.bulkCreateOrReplace(Array.from(i.values()))}));return function(){return n.apply(this,arguments)}}()),e.map((()=>{}))}));return function(){return e.apply(this,arguments)}}());function b(e,t,n){var r,i;const o=new Map(e.senderKey);n.forEach((e=>{if((0,A.isMeDevice)(e))return;if(e.isHosted())return;const t=String(e);o.set(t,!1)}));const a=new Set;for(const{id:e}of t)a.add(String(e));const s=null!==(r=null===(i=e.pastParticipants)||void 0===i?void 0:i.filter((e=>!a.has(e.jid))))&&void 0!==r?r:[],l=e.participants;for(const e of a.values())l.push(e);return{groupId:e.groupId,senderKey:o,participants:l,pastParticipants:s,admins:e.admins,rotateKey:e.rotateKey,staleType:e.staleType}}function M(e,t,n){var r,i;const o=new Map(e.senderKey);n.forEach((e=>{if((0,A.isMeDevice)(e))return;if(e.isHosted())return;const t=String(e);o.set(t,!1)}));const a=new Set,s=new Set;for(const{id:e,lid:n}of t)s.add(String(e)),null==n||e.isLid()||a.add(String(n));const l=null!==(r=null===(i=e.pastParticipants)||void 0===i?void 0:i.filter((e=>!s.has(e.jid))))&&void 0!==r?r:[],u=e.participants.filter((e=>!a.has(e)));for(const e of s.values())u.push(e);return{groupId:e.groupId,senderKey:o,participants:u,pastParticipants:l,admins:e.admins,rotateKey:e.rotateKey,staleType:e.staleType}}function P(e,t,n,r){var i,o;const a=new Map(e.senderKey);let s=e.rotateKey;a.forEach(((e,n)=>{const r=(0,y.createWid)(n);t.some((e=>e.id.isSameAccount(r)))&&(s=s||e,a.delete(n))})),s&&a.forEach(((e,t)=>{a.set(t,!1)}));const l=t.map((e=>{let{id:t}=e;return String(t)})),u=null===(i=e.pastParticipants)||void 0===i?void 0:i.concat(null!==(o=t.map((e=>({jid:e.id.toString(),leaveTs:n,leaveReason:e.id.equals(r)?d.LeaveReason.Left:d.LeaveReason.Removed}))))&&void 0!==o?o:[]);!e.rotateKey&&s&&(0,g.postSenderKeyExpiredMetric)({chatId:e.groupId,deviceCount:e.senderKey.size,expiryReason:m.EXPIRY_REASON.USER_LEAVE});const c=e.admins.filter((e=>!l.includes(e))),p=e.participants.filter((e=>!l.includes(e)));return{groupId:e.groupId,senderKey:a,participants:p,pastParticipants:u,admins:c,rotateKey:s,staleType:e.staleType}}function C(e,t,n,r,i){var o,a;const s=new Map(e.senderKey);let l=e.rotateKey;const u=t.map((e=>e.id.isLid()?e.id:e.lid)).filter(Boolean);s.forEach(((e,n)=>{const r=(0,y.createWid)(n);if(r.isLid()&&i!==c.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){return void(u.some((e=>e.isSameAccount(r)))&&s.delete(n))}if(!r.isLid()&&i===c.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE)return void s.delete(n);t.some((e=>e.id.user===r.user&&e.id.server===r.server))&&(l=l||e,s.delete(n))})),l&&s.forEach(((e,t)=>{(0,y.createWid)(t).isLid()||s.set(t,!1)}));const p=t.map((e=>{let{id:t}=e;return String(t)})),f=null===(o=e.pastParticipants)||void 0===o?void 0:o.concat(null!==(a=t.map((e=>({jid:e.id.toString(),leaveTs:n,leaveReason:e.id.equals(r)?d.LeaveReason.Left:d.LeaveReason.Removed}))))&&void 0!==a?a:[]);!e.rotateKey&&l&&(0,g.postSenderKeyExpiredMetric)({chatId:e.groupId,deviceCount:e.senderKey.size,expiryReason:m.EXPIRY_REASON.USER_LEAVE});const _=e.admins.filter((e=>!p.includes(e)));let h=e.participants;if(i===c.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){const e=t.reduce(((e,t)=>{let{lid:n,id:r}=t;return null==n||r.isLid()?e:e.set(r.toString(),n.toString())}),new Map);h=h.map((t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:t}))}else h=h.filter((e=>!p.includes(e)));return{groupId:e.groupId,senderKey:s,participants:h,pastParticipants:f,admins:_,rotateKey:l,staleType:e.staleType}}function O(e,t,n,r){let i=e.admins;const o=t.map((e=>{let{id:t}=e;return String(t)}));if(r===u.PARTICIPANT_OPERATION.DEMOTE)i=e.admins.filter((e=>!o.includes(e)));else if(r===u.PARTICIPANT_OPERATION.PROMOTE){const t=new Set(e.admins);o.forEach((e=>t.add(e))),i=Array.from(t)}return{groupId:e.groupId,senderKey:e.senderKey,participants:e.participants,pastParticipants:e.pastParticipants,admins:i,rotateKey:e.rotateKey,staleType:e.staleType}}function R(e,t,n,r){let i=e.admins;const o=t.map((e=>{let{id:t}=e;return String(t)})),a=new Map(e.senderKey);null!=n&&n.length>0&&n.forEach((e=>{if((0,A.isMeDevice)(e))return;if(e.isHosted())return;const t=String(e);a.set(t,!1)}));let s=e.participants;if(r===u.PARTICIPANT_OPERATION.DEMOTE){i=e.admins.filter((e=>!o.includes(e)));if(!i.some((e=>(0,A.isMeAccount)((0,y.createWid)(e))))){const e=t.reduce(((e,t)=>{let{lid:n,id:r}=t;return null==n||r.isLid()?e:e.set(r.toString(),n.toString())}),new Map);s=s.map((t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:t}))}}else if(r===u.PARTICIPANT_OPERATION.PROMOTE){const n=t.reduce(((e,t)=>{let{lid:n,id:r}=t;return null==n||r.isLid()?e:e.set(n.toString(),r.toString())}),new Map);i=e.admins.concat(o),s=s.map((e=>{var t;return null!==(t=n.get(e))&&void 0!==t?t:e}))}return{groupId:e.groupId,senderKey:a,participants:s,pastParticipants:e.pastParticipants,admins:i,rotateKey:e.rotateKey,staleType:e.staleType}}function N(e,t,n){let r=e.admins,i=e.participants;const o=t.map((e=>{let{id:t}=e;return String(t)}));if(n===u.PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE)r=e.admins.filter((e=>!o.includes(e))),i=r;else if(n===u.PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE){const t=o.filter((t=>!e.admins.includes(t)));r=e.admins.concat(t),i=r}return{groupId:e.groupId,senderKey:e.senderKey,participants:i,pastParticipants:e.pastParticipants,admins:r,rotateKey:e.rotateKey,staleType:e.staleType}}function w(e,t){const{participants:n=[],pastParticipants:r=[],admins:i=[],deviceIds:o=[]}=t,a=new Map;return o.forEach((e=>{if((0,A.isMeDevice)(e))return;if(e.isHosted())return;const t=String(e);a.has(t)||a.set(t,!1)})),{groupId:e,senderKey:a,participants:n.map((e=>{let{id:t}=e;return String(t)})),pastParticipants:r.map((e=>{let{id:t,leaveReason:n,leaveTs:r}=e;return{jid:t.toString(),leaveTs:r,leaveReason:n}})),admins:i.map(String),rotateKey:!1,staleType:0===n.length?u.STALE_TYPES.PARTICIPANT:void 0}}function D(e,t){const{participants:n,admins:r,deviceIds:i}=t;let o=e.rotateKey;const a=e.senderKey,s=new Map;i.forEach((e=>{if((0,A.isMeDevice)(e))return;if(e.isHosted())return;const t=String(e),n=a.get(t);null==n?s.set(t,!1):(s.set(t,n),a.delete(t))}));for(const e of a.values())o=o||e;return{groupId:e.groupId,senderKey:s,participants:n.map((e=>{let{id:t}=e;return String(t)})),pastParticipants:e.pastParticipants,admins:r.map(String),rotateKey:o}}const L=n(76672).Mirrored(["Success","Error"]);function B(){return(B=(0,o.default)((function*(e,t){let n=L.Error;return yield(0,f.getStorage)().lock(["participant","group-metadata"],function(){var r=(0,o.default)((function*(r){let[i,o]=r;const a=t?p.normalizeWidToLid:p.normalizeWidToPn;try{const r=(0,l.default)(yield i.get(e.toString()),"missing participant record to migrate"),s=Array.from(r.senderKey.entries()),u={admins:r.admins.map((e=>(0,l.default)(a((0,y.createWid)(e)),"admin missing a LID-PN mapping").toString())),participants:r.participants.map((e=>(0,l.default)(a((0,y.createWid)(e)),"participant missing a LID-PN mapping").toString())),senderKey:new Map(s.map((e=>{let[t,n]=e;return[k(t,a).toString(),!1]})))};yield Promise.all([i.merge(e.toString(),u),o.merge(e.toString(),{isLidAddressingMode:t})]),n=L.Success}catch(t){__LOG__(4,void 0,new Error)`addressing mode migration failed for ${e}: ${t.message}`}}));return function(){return r.apply(this,arguments)}}()),n}))).apply(this,arguments)}function k(e,t){var n;const r=(0,y.createDeviceWid)(e),i=(0,l.default)(t((0,y.toUserWid)(r)),"senderkey device missing a LID-PN mapping");return(0,y.createDeviceWidFromUserAndDevice)(i.user,i.server,null!==(n=r.device)&&void 0!==n?n:s.DEFAULT_DEVICE_ID).toString()}function G(e,t){const{participants:n,admins:r,deviceIds:i}=t;let o=e.rotateKey;const a=e.senderKey,s=new Map;i.forEach((e=>{if((0,A.isMeDevice)(e))return;if(e.isHosted())return;const t=String(e),n=a.get(t);null==n?s.set(t,!1):(s.set(t,n),a.delete(t))}));for(const[e,t]of a.entries())if(t&&!(0,y.createWid)(e).isLid()){o=!0;break}return{groupId:e.groupId,senderKey:s,participants:n.map((e=>{let{id:t}=e;return String(t)})),pastParticipants:e.pastParticipants,admins:r.map(String),rotateKey:o}}function U(){return(U=(0,o.default)((function*(e){var t,n,r,i,o;let{groupWid:a}=e;const s=yield(0,h.getParticipantTable)().get(String(a));if(!s)return null;const l=new Set(s.admins),c=null!==(t=null===(n=s.participants)||void 0===n?void 0:n.map((e=>({id:(0,y.createWid)(e),isAdmin:l.has(e),isSuperAdmin:!1}))))&&void 0!==t?t:[],d=null!==(r=null===(i=s.pastParticipants)||void 0===i?void 0:i.map((e=>{let{jid:t,leaveTs:n,leaveReason:r}=e;return{id:(0,y.createWid)(t),leaveTs:n,leaveReason:r}})))&&void 0!==r?r:[];(0,E.cacheGroupMetrics)(s);const p=null==s.deviceSyncComplete||s.deviceSyncComplete?void 0:u.STALE_TYPES.PARTICIPANT;return{participants:c,pastParticipants:d,staleType:null!==(o=s.staleType)&&void 0!==o?o:p,deviceCount:s.senderKey.size}}))).apply(this,arguments)}t.AddressingModeMigrationResult=L},22582:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetGroupMetadata=function(e){if(0===e.length)return Promise.resolve([]);return(0,l.getGroupMetadataTable)().bulkGet(e.map((e=>null==e?"":e.toString())))},t.getGroupMetadata=function(e){return(0,l.getGroupMetadataTable)().get(e.toString())},t.getGroupMetadataUNSAFE=function(){return d.apply(this,arguments)},t.persistGroupMetadata=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return p((0,i.default)({id:e.toString()},t));return(0,l.getGroupMetadataTable)().createOrMerge(e.toString(),(0,i.default)({id:e.toString()},t))},t.updateGroupMetadataTable=function(){return c.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(66210),s=n(74557),l=n(35872),u=n(51017);function c(){return(c=(0,o.default)((function*(e){let{groupInfos:t}=e,n=[];yield(0,s.getStorage)().lock(["group-metadata"],function(){var e=(0,o.default)((function*(e){let[r]=e;const o=yield r.bulkGet(t.map((e=>e.id.toString())));return n=t.map(((e,t)=>{var n,r,a,s,l,u,c,d,p;const f=o[t];let _={subject:e.subject,subjectTime:e.subjectTime||0},g={announce:e.announce,a_v_id:e.a_v_id||0},h={desc:e.desc,descId:e.descId,descOwner:null===(n=e.descOwner)||void 0===n?void 0:n.toString(),descTime:e.descTime||0};if(f){const e=f.subjectTime||0,t=f.a_v_id||0,n=f.descTime||0;e>_.subjectTime&&(_={subject:f.subject,subjectTime:e}),t>g.a_v_id&&(g={announce:f.announce,a_v_id:t}),n>h.descTime&&(h={desc:f.desc,descId:f.descId,descOwner:f.descOwner,descTime:n})}return(0,i.default)((0,i.default)((0,i.default)({id:e.id.toString(),creation:e.creation,owner:null===(r=e.owner)||void 0===r?void 0:r.toString(),restrict:e.restrict,noFrequentlyForwarded:e.noFrequentlyForwarded,ephemeralDuration:e.ephemeralDuration||0,membershipApprovalMode:e.membershipApprovalMode,memberAddMode:e.memberAddMode,growthLockExpiration:e.growthLockExpiration,growthLockType:e.growthLockType,size:e.size||0,support:null!==(a=e.support)&&void 0!==a&&a,suspended:null!==(s=e.suspended)&&void 0!==s&&s,terminated:null!==(l=e.terminated)&&void 0!==l&&l,parentGroup:null===(u=e.parentGroup)||void 0===u?void 0:u.toString(),isParentGroup:e.isParentGroup,isParentGroupClosed:e.isParentGroupClosed,defaultSubgroup:e.defaultSubgroup,generalSubgroup:e.generalSubgroup,lastActivityTimestamp:null!==(c=null==f?void 0:f.lastActivityTimestamp)&&void 0!==c?c:0,lastSeenActivityTimestamp:null!==(d=null==f?void 0:f.lastSeenActivityTimestamp)&&void 0!==d?d:0,incognito:e.incognito,isLidAddressingMode:e.isLidAddressingMode,reportToAdminMode:null!==(p=e.reportToAdminMode)&&void 0!==p&&p,lastReportToAdminTimestamp:null==f?void 0:f.lastReportToAdminTimestamp,allowNonAdminSubGroupCreation:e.allowNonAdminSubGroupCreation,generalChatAutoAddDisabled:e.generalChatAutoAddDisabled},_),h),g)})),r.bulkCreateOrMerge(n)}));return function(){return e.apply(this,arguments)}}())}))).apply(this,arguments)}function d(){return(d=(0,o.default)((function*(e){var t,n,r,i,o,a,s,c,d;let{groupWid:p}=e;const f=yield(0,l.getGroupMetadataTable)().get(String(p));return f?{id:p,owner:null==f.owner?null:(0,u.createWid)(f.owner),creation:f.creation,desc:null!==(t=f.desc)&&void 0!==t?t:void 0,descId:null!==(n=f.descId)&&void 0!==n?n:void 0,descOwner:null==f.descOwner?null:(0,u.createWid)(f.descOwner),descTime:null!==(r=f.descTime)&&void 0!==r?r:void 0,restrict:f.restrict||!1,announce:f.announce||!1,noFrequentlyForwarded:f.noFrequentlyForwarded||!1,ephemeralDuration:f.ephemeralDuration||0,membershipApprovalMode:null!==(i=f.membershipApprovalMode)&&void 0!==i&&i,memberAddMode:f.memberAddMode,subject:f.subject,support:!0===f.support,lastActivityTimestamp:null!==(o=f.lastActivityTimestamp)&&void 0!==o?o:0,lastSeenActivityTimestamp:null!==(a=f.lastSeenActivityTimestamp)&&void 0!==a?a:0,lastReportToAdminTimestamp:null!==(s=f.lastReportToAdminTimestamp)&&void 0!==s?s:null,incognito:f.incognito,isLidAddressingMode:f.isLidAddressingMode,allowNonAdminSubGroupCreation:null!==(c=f.allowNonAdminSubGroupCreation)&&void 0!==c&&c,generalChatAutoAddDisabled:null!==(d=f.generalChatAutoAddDisabled)&&void 0!==d&&d}:null}))).apply(this,arguments)}const p=(0,a.batch)({delayMs:3e3},function(){var e=(0,o.default)((function*(e){const t=Array.from(e.reduce(((e,t)=>{var n;return e.set(t.id,(0,i.default)((0,i.default)({},null!==(n=e.get(t.id))&&void 0!==n?n:{}),t)),e}),new Map).values());return yield(0,l.getGroupMetadataTable)().bulkCreateOrMerge(t),e.map((()=>{}))}));return function(){return e.apply(this,arguments)}}())},51458:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.revokeGroupInviteV4=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(18625),a=n(1619),s=n(87946),l=n(37653);function u(){return(u=(0,i.default)((function*(e,t,n,r){const i=yield(0,o.revokeGroupInvites)(e,t,n,r),u=(null==i?void 0:i.map((e=>e.id)))||[],c=yield(0,s.getMsgsByMsgKey)(u,(e=>{e.inviteCodeExp="0"}));for(const e of c)(0,a.frontendFireAndForget)("expireGroupInviteV4",{inviteMsgId:e.id}),(0,l.updateExistingMessages)([e],e.id.remote)}))).apply(this,arguments)}},27021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=new class{constructor(){this._cagGroups=new Set}add(e){this._cagGroups.add(e.toString())}remove(e){this._cagGroups.delete(e.toString())}isCag(e){return this._cagGroups.has(e.toString())}clear(){this._cagGroups.clear()}};t.default=n},1370:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndRemoveLocalLabelAssociation=function(){return s.apply(this,arguments)},t.queryLocalLabelAssociation=a;var i=r(n(48926)),o=n(84566);function a(e){return(0,o.getLabelAssociationTable)().anyOf(["associationId","type"],e.map((e=>{let{associationId:t,type:n}=e;return[t,n]})))}function s(){return(s=(0,i.default)((function*(e){const t=yield a(e);yield(0,o.getLabelAssociationTable)().bulkRemove(t.map((e=>{let{labelId:t,associationId:n,type:r}=e;return[t,n,r]})))}))).apply(this,arguments)}},30593:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageOrphansByParentMsgKey=function(e){return(0,a.getMessageOrphanTable)().equals(["parentMsgKey"],String(e)).then((e=>e.filter(Boolean).map(o.orphanFromDbRow)))},t.getMessageOrphansByParentMsgKeys=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(64707),a=n(73482);function s(){return(s=(0,i.default)((function*(e){const t=new Set(e.map((e=>String(e)))),n=yield(0,a.getMessageOrphanTable)().anyOf(["parentMsgKey"],Array.from(t)),r=new Map;return n.forEach((e=>{const t=r.get(e.parentMsgKey)||[];t.push(e),r.set(e.parentMsgKey,t)})),r}))).apply(this,arguments)}},64707:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.orphanFromDbRow=function(e){return(0,i.default)((0,i.default)({},e),{},{sender:null==e.sender?null:(0,a.createUserWid)(e.sender),parsedMsgPayload:(0,o.messageFromDbRow)(e.parsedMsgPayload)})};var i=r(n(81109)),o=n(74773),a=n(51017)},6751:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.storeMessageOrphans=function(){return d.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(2537),s=n(74773),l=n(22666),u=n(26368),c=n(73482);function d(){return(d=(0,o.default)((function*(e,t){__LOG__(2)`storeMessageOrphans:`;const n=e.map((e=>{var n,r;return{msgKey:e.id.toString(),parentMsgKey:t(e).toString(),sender:(0,u.getSender)(e).toString(),parsedMsgPayload:(0,s.dbRowFromMessage)((0,i.default)({},e)),type:null!==(n=null===(r=a.addOnProviders.find((t=>t.matches(e))))||void 0===r?void 0:r.type)&&void 0!==n?n:l.MessageAddOnType.Unknown,senderTimestampMs:e.senderTimestampMs,t:e.t}}));yield(0,c.getMessageOrphanTable)().bulkCreateOrReplace(n)}))).apply(this,arguments)}},63857:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetRootMsgs=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(93040),a=r(n(60001)),s=n(463),l=n(10139);function u(){return(u=(0,i.default)((function*(e){const t=yield p(e);return yield c(e,t),t}))).apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e,t){const n=new Map;for(let r=0;r<t.length;r++)null==t[r]&&n.set(e[r],r);if(0===n.size||!(0,s.isMatFullyEnabled)())return;const r=Array.from(n.keys()).map((e=>a.default.from(e))),i=yield(0,o.getMatChatBulk)(r.map((e=>e.remote))),l=r.map((e=>{const t=i.get(e.remote);return null==t||!e.remote.isUser()||e.remote.equals(t)?null:[e.toString(),new a.default({fromMe:e.fromMe,remote:t,id:e.id})]})).filter(Boolean);if(0===l.length)return;const u=yield p(l.map((e=>{let[,t]=e;return t.toString()})));for(let e=0;e<u.length;e++)if(null!=u[e]){const r=l[e][0],i=n.get(r);null!=i&&(t[i]=u[e])}}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){const t=yield(0,l.getMessageTable)().bulkGet(e),n=new Map;for(let r=0;r<e.length;r++)null!=t[r]&&"message_edit"!==t[r].subtype||(n.set(e[r],r),t[r]=null);const r=yield(0,l.getMessageTable)().anyOf(["latestEditMsgKey"],Array.from(n.keys()));for(const e of r){if(null==e.latestEditMsgKey||"message_edit"===e.subtype)continue;const r=n.get(e.latestEditMsgKey);null!=r&&(t[r]=e)}return t}))).apply(this,arguments)}},66236:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DroppingMsgRowDueToLogout=void 0,t.encryptMultipleDBMsgs=function(){return _.apply(this,arguments)},t.processAndEncryptSingleMsgRow=g;var i=r(n(81109)),o=r(n(48926)),a=n(90387),s=r(n(45647)),l=n(56858),u=n(74773),c=n(62505),d=n(31565),p=n(10139);class f extends Error{constructor(){super(...arguments),this.name="DroppingMsgRowDueToLogout"}}function _(){return(_=(0,o.default)((function*(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(yield l.DbEncKeyStore.waitForFinalDbMsgEncKey(),yield new Promise((e=>self.setTimeout(e,0))),n){t=[];for(let n=0;n<e.length;n++)try{const r=e[n],i=yield g(r,n);t.push(i)}catch(e){if(e instanceof f)throw e;__LOG__(4,void 0,new Error,void 0,["message-store"])`processAndEncryptSingleMsgRow with throttle failed with error: ${e.name}, message: ${e.message}, stack: ${e.stack}`}}else{t=(yield Promise.all(e.map(function(){var e=(0,o.default)((function*(e){return yield g(e).catch((e=>{if(e instanceof f)throw e;__LOG__(4,void 0,new Error,void 0,["message-store"])`processAndEncryptSingleMsgRow without throttle failed with error: ${e.name}, message: ${e.message}, stack: ${e.stack}`})).finally((()=>{}))}));return function(){return e.apply(this,arguments)}}()))).filter(Boolean)}return t}))).apply(this,arguments)}function g(){return h.apply(this,arguments)}function h(){return(h=(0,o.default)((function*(e,t){if(s.default.isLogoutInProgress)return Promise.reject(new f);null!=t&&(yield(0,a.asyncSleepAfterGivenLoopIteration)(t,35,100));const n=(0,p.getMessageTable)(),r=(0,c.getVcardWids)(e),o=(0,u.dbRowFromMessage)(e),l=yield n.preflightEncryptSingleRecord((0,i.default)({},o));return[(0,i.default)((0,i.default)((0,i.default)({},o),l),{},{vcardWAids:r}),(0,d.hasHttpLink)(e)]}))).apply(this,arguments)}t.DroppingMsgRowDueToLogout=f},94903:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pruneExpiredMessages=function(){return u.apply(this,arguments)},t.removeExpiredMessagesFromHistory=function(e){return(0,a.removeMessagesFromHistory)(e.map((e=>e.id.toString())))};var i=r(n(48926)),o=n(29987),a=n(89688),s=n(7339),l=n(10139);function u(){return(u=(0,i.default)((function*(){__LOG__(2,void 0,void 0,void 0,["ephemeral-messages"])`pruneExpiredMessages started`;const e=(yield(0,l.getMessageTable)().lessThan(["expiredTimestamp"],(0,o.unixTime)(),{shouldDecrypt:!1})).filter((e=>!(0,s.isKept)(e.kicState)));return yield(0,a.removeMessagesFromHistory)(e.map((e=>e.id.toString()))),__LOG__(2,void 0,void 0,void 0,["ephemeral-messages"])`pruneExpiredMessages completed`,e}))).apply(this,arguments)}},58351:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markFutureproofMessagesReparsed=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(73602),a=n(10139);function s(){return(s=(0,i.default)((function*(e){try{if(0===e.length)return;const t=(yield(0,a.getMessageTable)().bulkGet(e)).filter(Boolean).filter((e=>e.type===o.MSG_TYPE.UNKNOWN));if(0===t.length)return;const n=t.map((e=>({id:e.id.toString(),futureproofReparsed:!0})));yield(0,a.getMessageTable)().bulkCreateOrMerge(n)}catch(e){throw __LOG__(4,void 0,new Error)`markFutureproofMessagesReparsed: error ${e}`,e}}))).apply(this,arguments)}},29365:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.persistNewMessagesInBulk=function(){return g.apply(this,arguments)},t.persistNewNewsletterMessagesInBulk=function(){return m.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(42247),s=n(66236),l=n(4489),u=n(21826),c=n(74557),d=n(26368),p=n(463),f=n(94007),_=n(34326);function g(){return(g=(0,i.default)((function*(e,t){try{yield h(e,t)}catch(n){if(!(0,l.isEligibleForFallback)(e.length,n))throw n;yield h(e,t,!0)}}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[r,o]=yield Promise.all([E(e),(0,s.encryptMultipleDBMsgs)(e,!1)]);yield(0,c.getStorage)().lock(["chat","message","fts-indexing-queue"],function(){var e=(0,i.default)((function*(e){let[i,a,s]=e;yield i.bulkCreateOrMerge(r),yield(0,l.storeEncryptedDBMessages)(o,t,!1,n)}));return function(){return e.apply(this,arguments)}}())}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){const[t,n]=yield Promise.all([E(e),(0,s.encryptMultipleDBMsgs)(e,!1)]);return(0,c.getStorage)().lock(["chat","message"],function(){var e=(0,i.default)((function*(e){let[r]=e;yield r.bulkCreateOrMerge(t),yield(0,u.storeEncryptedNewsletterMessages)(n)}));return function(){return e.apply(this,arguments)}}())}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=new Map;e.forEach((e=>{const n=e.id,r=n.remote.toString();if(r!==o.STATUS_JID&&(0,d.getIsUnreadType)(e)){const i=t.get(r)||{unread:0,t:0,unreadMentionsOfMe:[]};if(!n.fromMe&&(i.unread+=1,(0,d.getIsImportantMessage)(e))){const t={id:e.id.toString(),timestamp:e.t};i.unreadMentionsOfMe?i.unreadMentionsOfMe.push(t):i.unreadMentionsOfMe=[t]}null!=e.t&&e.t>i.t&&(i.t=Math.max(e.t,i.t)),t.set(r,i)}}));const n=Array.from(t.keys());let r,i;if((0,p.isMatFullyEnabled)()){i=(0,a.getAlternateWidBulkForLids)(n);const e=[];for(const t of i.values())e.push(...t);r=yield(0,f.getChatTable)().bulkGet(e)}const s=(yield(0,f.getChatTable)().bulkGet(n)).map(((e,o)=>{var a,s,l;const u=n[o],c=t.get(u),d=(null==c?void 0:c.unread)||0,f=Math.max(0,e?e.unreadCount:0);let g=(null==c?void 0:c.t)||void 0;e&&null!=e.t&&(null==g||e.t>g)&&(g=e.t);let h=[],A=null!==(a=null==e?void 0:e.archiveAtMentionViewedInDrawer)&&void 0!==a&&a;const m=null!==(s=null==c?void 0:c.unreadMentionsOfMe)&&void 0!==s?s:[],E=null!==(l=null==e?void 0:e.unreadMentionsOfMe)&&void 0!==l?l:[];m.length>0&&(A=!1),h=m.concat(E);let y=null==e?void 0:e.isDeprecated;if(!0!==y&&(0,p.isMatFullyEnabled)()&&null!=e){var S;(0,_.shouldDeprecateLidThread)(e,null!==(S=i.get(e.id.toString()))&&void 0!==S?S:[],r)&&(y=!0)}return{id:u,unreadCount:f+d,t:g,unreadMentionsOfMe:h,archiveAtMentionViewedInDrawer:A,isDeprecated:y}}));return __LOG__(2)`[offline-resume][msg-cache]: storing chat updates: ${JSON.stringify(s)}`,s}))).apply(this,arguments)}},89688:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessagesFromHistory=function(e){const t=[],n=[];return(0,u.initializeWithoutGKs)().then((()=>{if(e.length>0)return(0,p.getMessageTable)().bulkGet(e,!1).then((e=>{e.forEach((e=>{null!=(null==e?void 0:e.rowId)&&t.push(String(e.rowId));const r=null==e?void 0:e.botResponseTargetId,i=null==e?void 0:e.internalId;null!=(null==e?void 0:e.botPluginSearchProvider)&&null!=(null==e?void 0:e.botPluginSearchUrl)&&null!=r&&null!=i&&n.push({internalId:i,targetId:r})}))}))})).then((()=>(0,c.getStorage)().lock(["message","label-association"],function(){var t=(0,i.default)((function*(){const t=(0,a.queryAndRemoveLocalLabelAssociation)(e.map((e=>({associationId:e,type:d.LabelAssociationType.Message}))));try{(0,o.isBotReceiveEnabled)()&&n.length>0&&(__LOG__(2)`[bot] Removing bot plugin msgs after delete for self`,yield(0,s.findAndDeleteAssociatedPluginMsg)(n))}catch(e){__LOG__(4,void 0,new Error,!0)`[bot] findAndDeleteAssociatedPluginMsg failed with error: ${e.name}, stack: ${e.stack}`,SEND_LOGS("Plugin carousel delete failed")}return Promise.all([(0,p.getMessageTable)().bulkRemove(e),t])}));return function(){return t.apply(this,arguments)}}()))).then((()=>{t.length>0&&l.ftsLightClient.purge(t).catch((()=>{}))})).then((()=>{})).catch((e=>{throw __LOG__(4,void 0,new Error)`removeMessagesFromHistory: error ${e}`,e}))},t.removeStatusMessage=function(e){const t=e.filter((e=>e.includes("status@broadcast")));if(t.length>0)return(0,p.getMessageTable)().bulkRemove(t);return Promise.resolve()};var i=r(n(48926)),o=n(63007),a=n(1370),s=n(78891),l=n(69242),u=n(54204),c=n(74557),d=n(84566),p=n(10139)},74773:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dbRowFromMessage=function(e){var t;const n=(0,i.default)({},e);e.quotedMsg&&(n.quotedMsg=(0,i.default)({},e.quotedMsg));(null===(t=e.quotedMsg)||void 0===t?void 0:t.paymentNoteMsg)&&(n.quotedMsg.paymentNoteMsg=(0,i.default)({},e.quotedMsg.paymentNoteMsg));e.paymentNoteMsg&&(n.paymentNoteMsg=(0,i.default)({},e.paymentNoteMsg));e.from&&(n.from=e.from.toString());return y.forEach((e=>{null!=n[e]&&(n[e]=n[e].toString())})),delete n.notifyName,delete n.isNewMsg,delete n.clearMedia,delete n.multicast,delete n.urlNumber,delete n.urlText,delete n.linkPreview,delete n.star,delete n.forwardedFromWeb,v(n),n},t.messageFromDbRow=function(e,t){var n,r,o,l;const d=(0,i.default)({},e);e.quotedMsg&&(d.quotedMsg=(0,i.default)({},e.quotedMsg));(null===(n=e.quotedMsg)||void 0===n?void 0:n.paymentNoteMsg)&&(d.quotedMsg.paymentNoteMsg=(0,i.default)({},e.quotedMsg.paymentNoteMsg));e.paymentNoteMsg&&(d.paymentNoteMsg=(0,i.default)({},e.paymentNoteMsg));e.paymentBackground&&(d.paymentBackground=(0,i.default)({},e.paymentBackground));e.groupMentions&&(d.groupMentions=e.groupMentions.map((e=>({groupSubject:e.groupSubject,groupJid:(0,_.createWidFromWidLike)(e.groupJid)}))));d.star=void 0!==d.isStarred,d.isMdHistoryMsg=d.rowId<1e9,null==d.internalId||"newsletter"!==(null===(r=d.to)||void 0===r?void 0:r.server)&&!(null===(o=d.from)||void 0===o?void 0:o.endsWith("@newsletter"))||(d.serverId=(0,s.getInChatMsgId)(d.internalId));delete d.internalId,delete d.isStarred,delete d.count,delete d.hasLink,delete d.isMediaMsg,delete d.isDocMsg,delete d.isCarouselMsg,delete d.expiredTimestamp,delete d.pendingReadReceipt,S(d),(0,a.hydrateWids)(d),y.forEach((e=>{null!=d[e]&&(d[e]=u.default.from(d[e]))})),null!=(null===(l=d.quotedMsg)||void 0===l?void 0:l.id)&&(d.quotedMsg.id=u.default.from(d.quotedMsg.id));null!=d.messageSecret&&(d.messageSecret=new Uint8Array(d.messageSecret));null!=d.botMessageSecret&&(d.botMessageSecret=new Uint8Array(d.botMessageSecret));const[p,f,g]=function(e){let{futureproofType:t,futureproofSubtype:n,subtype:r}=e;if(e.type===c.MSG_TYPE.UNKNOWN&&null==e.futureproofType&&null!=e.subtype){switch(e.subtype){case"poll_update":t=c.MSG_TYPE.POLL_UPDATE,n="poll_vote";break;case"message_edit":t=c.MSG_TYPE.PROTOCOL,n="message_edit";break;case"phone":case"phone_only_feature":break;default:(0,m.default)(E.has(e.subtype),"WAWebDBMessageSerialization: Unsupported message subtype being set to futureproofType"),t=e.subtype}e.type===c.MSG_TYPE.UNKNOWN&&null!=t&&(r=void 0)}e.type===c.MSG_TYPE.POLL_UPDATE&&null==r&&(r="poll_vote");return[t,n,r]}(d);d.futureproofType=p,d.futureproofSubtype=f,d.subtype=null!=g?g:void 0,null!=d.carouselCardsParsed&&(d.carouselCardsParsed=d.carouselCardsParsed.map((e=>(0,i.default)((0,i.default)({},e),{},{id:e.id instanceof u.default?e.id:new u.default(e.id),parentMsgId:e.parentMsgId instanceof u.default?e.parentMsgId:new u.default(e.parentMsgId)}))));null!=d.self&&(d.local="out"===d.self,delete d.self);return null==t||t(d),d},t.movEncFieldToOpaqueData=v,t.movFieldFromOpaqueDataBackToMsg=S;var i=r(n(81109)),o=n(44037),a=n(35678),s=n(62505),l=n(34878),u=r(n(60001)),c=n(73602),d=n(662),p=n(34801),f=r(n(27112)),_=n(51017),g=n(14356),h=n(33655),A=n(86881),m=r(n(41143));const E=new Set(Object.values(c.MSG_TYPE)),y=["id","parentMsgId","protocolMessageKey","paymentRequestMessageKey","keptMessageKey","pollUpdateParentKey","kicKey","latestEditMsgKey","targetMessageKey","pinParentKey","reactionParentKey"];function S(e){const t=(0,h.decodeProtobuf)(p.MsgRowOpaqueDataSpec,e.msgRowOpaqueData);if(t.currentMsg){var n,r,i;if(t.currentMsg.paymentNoteMsgBody&&e.paymentNoteMsg)e.paymentNoteMsg.body=null===(i=t.currentMsg)||void 0===i?void 0:i.paymentNoteMsgBody;l.MSG_OPAQUE_DATA_KEYS.forEach((n=>{var r;e[n]=null===(r=t.currentMsg)||void 0===r?void 0:r[(0,l.getKey)(e.type,n)]})),e.pollOptions=(0,d.expandPollOptions)(null===(n=t.currentMsg)||void 0===n?void 0:n.pollOptions);const o=null===(r=t.currentMsg)||void 0===r?void 0:r.originalSelfAuthor;null!=o&&f.default.isWid(o)&&(e.originalSelfAuthor=(0,_.createWid)(o))}var o;e.quotedMsg&&t.quotedMsg&&(t.quotedMsg.paymentNoteMsgBody&&(e.quotedMsg.paymentNoteMsg.body=t.quotedMsg.paymentNoteMsgBody),l.MSG_OPAQUE_DATA_KEYS.forEach((n=>{var r;e.quotedMsg[n]=null===(r=t.quotedMsg)||void 0===r?void 0:r[(0,l.getKey)(e.type,n)]})),e.quotedMsg.pollOptions=(0,d.expandPollOptions)(null===(o=t.quotedMsg)||void 0===o?void 0:o.pollOptions))}function v(e){var t,n,r;const i={currentMsg:{},quotedMsg:{}};var a;(null===(t=e.paymentNoteMsg)||void 0===t?void 0:t.body)&&(i.currentMsg.paymentNoteMsgBody=e.paymentNoteMsg.body,null===(a=e.paymentNoteMsg)||void 0===a||delete a.body);(null===(n=e.quotedMsg)||void 0===n||null===(r=n.paymentNoteMsg)||void 0===r?void 0:r.body)&&(i.quotedMsg.paymentNoteMsgBody=e.quotedMsg.paymentNoteMsg.body,delete e.quotedMsg.paymentNoteMsg.body),l.MSG_OPAQUE_DATA_KEYS.forEach((t=>{i.currentMsg[(0,l.getKey)(e.type,t)]=e[t],delete e[t]})),e.originalSelfAuthor&&(i.currentMsg.originalSelfAuthor=(0,o.extractUserJid)((0,g.widToDeviceJid)(e.originalSelfAuthor)),delete e.originalSelfAuthor),i.currentMsg.pollOptions=(0,d.compressPollOptions)(e.pollOptions),delete e.pollOptions,e.quotedMsg&&(l.MSG_OPAQUE_DATA_KEYS.forEach((t=>{i.quotedMsg[t]=e.quotedMsg[t],delete e.quotedMsg[t]})),i.quotedMsg.pollOptions=(0,d.compressPollOptions)(e.quotedMsg.pollOptions),delete e.quotedMsg.pollOptions);const s=(0,A.encodeProtobuf)(p.MsgRowOpaqueDataSpec,i);e.msgRowOpaqueData=s.readBuffer()}},62505:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePropertyType=void 0,t.beginningOfChat=function(e){return`${e.toString()}_/`},t.craftInternalId=function(e,t){const n=i(t);return`${e}_${n}_m`},t.craftMessageRangeIndex=function(e,t,n,o){let a;a=n?r.SystemMessage:t?r.IncomingChatMessage:r.Outgoing;return`${e}_${a}_${null!=o?i(o):""}`},t.endOfChat=function(e){return`${e.toString()}_g`},t.getInChatMsgId=function(e){return o(e.split("_")[1])},t.getVcardWids=function(e){let t=[];if("vcard"===e.type)t=[e.body];else{if("multi_vcard"!==e.type)return;t=e.vcardList.map((e=>e.vcard))}const{parseVcard:r,vcardWids:i}=n(44245);return t.filter(Boolean).reduce(((e,t)=>{const n=i(r(t));return e.concat(n.map((e=>e.toString())))}),[])},t.undoOrderPreservingHex=o;const r=n(76672)({IncomingChatMessage:"1",Outgoing:"2",SystemMessage:"3"});function i(e){const t=e.toString(16);return(t.length-1).toString(16)+t}function o(e){return parseInt(e.substring(1),16)}t.MessagePropertyType=r},34878:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgKeyFieldsInOpaqueData=t.MSG_OPAQUE_DATA_KEYS=void 0,t.getKey=function(e,t){if("reaction_enc"===e)return n[t];return t};t.MSG_OPAQUE_DATA_KEYS=["body","caption","paymentAmount1000","futureproofBuffer","messageSecret","clientUrl","loc","lng","lat","isLive","canonicalUrl","matchedText","title","description","pollName","pollSelectableOptionsCount","isSentCagPollCreation","pollUpdateParentKey","encPollVote","senderTimestampMs","targetMessageKey","encIv","encPayload","eventName","isEventCanceled","eventDescription","eventJoinLink","eventStartTime","eventLocation"];t.MsgKeyFieldsInOpaqueData=["targetMessageKey","pollUpdateParentKey"];const n={targetMessageKey:"encReactionTargetMessageKey",encIv:"encReactionEncIv",encPayload:"encReactionEncPayload",encReactionTargetMessageKey:"targetMessageKey",encReactionEncIv:"encIv",encReactionEncPayload:"encPayload"}},87946:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PendingReadReceiptType=void 0,t.filterReceivedMessagesInRange=function(){return h.apply(this,arguments)},t.getMsgByMsgKey=_,t.getMsgByMsgKeyMat=function(){return g.apply(this,arguments)},t.getMsgsByChatId=function(e){return(0,d.getMessageTable)().between(["internalId"],(0,l.beginningOfChat)(e),(0,l.endOfChat)(e))},t.getMsgsByMsgIdsAndChatId=function(e,t){const n=[];return e.forEach((e=>{const r=new c.default({fromMe:!0,remote:t,id:e});n.push(r.toString());const i=new c.default({fromMe:!1,remote:t,id:e});n.push(i.toString())})),(0,d.getMessageTable)().startsWithAnyOf(["id"],n)},t.getMsgsByMsgKey=function(e,t){return(0,d.getMessageTable)().bulkGet(e).then((e=>e.filter(Boolean).map((e=>(0,s.messageFromDbRow)(e,t)))))},t.getMsgsExistByMsgKey=function(e){return(0,d.getMessageTable)().bulkGet(e,!1).then((e=>e.map(Boolean)))};var i=r(n(48926)),o=r(n(49619)),a=n(93040),s=n(74773),l=n(62505),u=n(54468),c=r(n(60001)),d=n(10139),p=n(49625);const f=n(76672)({Message:1,MessageEdit:2});function _(e,t){let n;return n=e instanceof c.default?e.toString():e,(0,d.getMessageTable)().get(n).then((e=>e?(0,s.messageFromDbRow)(e,t):null))}function g(){return(g=(0,i.default)((function*(e,t){const n=yield _(e,t);if(n)return n;const r=e instanceof c.default?e:c.default.from(e);if(r.remote.isUser()){const e=yield(0,a.getMatChat)(r.remote),n=new c.default({fromMe:r.fromMe,remote:e,id:r.id});return(0,p.workerSafeFireAndForget)("incrementPnhCtwaDailyCount",{chatId:e}),_(n,t)}}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e,t){if(0===t.length)return t;const n=t.map((e=>(0,u.protobufToMsgKey)((0,o.default)(e.key,"syncActionMessage.key")).toString())),r=yield(0,d.getMessageTable)().bulkGet(n,!1);return t.filter(((e,t)=>null!=r[t]))}))).apply(this,arguments)}t.PendingReadReceiptType=f},7103:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditedMentionOfMe=void 0,t.generateMessageEdit=x,t.processEditProtocolMsgs=function(){return C.apply(this,arguments)},t.updateMessageEditsLocally=O;var i=r(n(81109)),o=r(n(48926)),a=r(n(44908)),s=n(38032),l=r(n(49619)),u=n(29987),c=r(n(46808)),d=n(32117),p=n(93040),f=n(1619),_=n(63007),g=n(74773),h=n(87946),A=n(69242),m=n(41843),E=n(68214),y=n(34473),S=n(74557),v=n(26368),I=n(97087),T=n(73602),b=n(3885),M=r(n(27112));const P=n(76672).Mirrored(["Added","Removed"]);function C(){return(C=(0,o.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return[];const r=yield(0,d.getParentMsgsByMsgKey)(e.map((e=>e.protocolMessageKey)).filter(Boolean)),i=N(e,r),o=[],a=[];i.sort(((e,t)=>(0,l.default)(t.latestEditSenderTimestampMs,"b.latestEditSenderTimestampMs")-(0,l.default)(e.latestEditSenderTimestampMs,"a.latestEditSenderTimestampMs")));for(const e of i){const t=e.protocolMessageKey&&r.get(e.protocolMessageKey.toString());t&&t.type!==T.MSG_TYPE.CIPHERTEXT?a.push(x(t,e)):o.push(e)}yield w(o);const s=a.filter((e=>e.isLatest));if(yield O(a,s),t){const{markFutureproofMessagesReparsed:t}=n(58351);yield t(e.map((e=>e.id.toString())))}return s}))).apply(this,arguments)}function O(){return R.apply(this,arguments)}function R(){return(R=(0,o.default)((function*(e,t){e.length&&(yield L(e),k(e.filter((e=>e.isLatest&&!(0,v.getIsNewsletterMsg)(e.parentMsg))).map((e=>e.parentMsg))),yield F(e)),t.length&&(0,f.frontendFireAndForget)("updateEditedMessagesAction",{messageEdits:t})}))).apply(this,arguments)}function N(e,t){return e.filter((e=>{const n=e.protocolMessageKey;if(!n)return __LOG__(4,void 0,new Error,!0)`[message-edit] protocol msg is missing original msg key`,SEND_LOGS("message-edit-missing-original-msg-key"),!1;const r=t.get(n.toString());if(r){if(!((0,y.msgTypeSupportsEditing)(r.type)||r.type===T.MSG_TYPE.CIPHERTEXT))return __LOG__(4,void 0,new Error,!0)`[message-edit] original message msgId::${r.id} type is ${r.type} which cannot be edited`,SEND_LOGS("message-edit-unsupported-msg-type"),!1;if(!0===r.isForwarded)return __LOG__(4,void 0,new Error,!0)`[message-edit] original message cannot be a forwarded message`,SEND_LOGS("message-edit-forwarded-message"),!1;const t=(0,l.default)(r.t,"parentMsg.t"),n=(0,l.default)(e.t,"protocolMsg.t");if(!(0,y.isParentWithinEditProcessingWindow)({parentTsInSeconds:t,editTsInSeconds:n,msgKey:r.id}))return __LOG__(3)`[message-edit] protocol msg exceeds edit window, will be dropped`,!1;const i=(0,v.getSender)(r),o=(0,v.getSender)(e);if(!((0,v.getIsNewsletterMsg)(r)||i&&o&&M.default.equals(...(0,m.normalizeUserWidsToLidOrPn)(i,o))))return __LOG__(4,void 0,new Error,!0)`[message-edit] sender is not the parent msg sender`,SEND_LOGS("message-edit-sender-mismatch"),!1}return null!=e.latestEditSenderTimestampMs||(__LOG__(4,void 0,new Error,!0)`[message-edit] protocol msg does not have a valid sender timestamp`,SEND_LOGS("message-edit-missing-timestamp"),!1)}))}function w(){return D.apply(this,arguments)}function D(){return(D=(0,o.default)((function*(e){if(!e.length)return;const{storeMessageOrphans:t}=n(6751);yield t(e,(e=>e.protocolMessageKey))}))).apply(this,arguments)}function L(){return B.apply(this,arguments)}function B(){return(B=(0,o.default)((function*(e){e.length&&(yield(0,S.getStorage)().lock(["message","chat"],function(){var t=(0,o.default)((function*(t){let[n,r]=t;const o=[],a=new Set;e.forEach((e=>{const{parentMsg:t,editedMsgData:n,isLatest:r,protocolMsg:s}=e;if(r&&(o.push((0,i.default)((0,i.default)({},t),n)),!(0,v.getIsSentByMe)(s))){const e=s.id.remote.toString();a.add(e)}}));const s=[];if(o.length&&s.push(n.bulkCreateOrMerge(o.map(g.dbRowFromMessage))),a.size){const e=Array.from(a).map((e=>({id:e,unreadEditTimestampMs:(0,u.unixTimeMs)()})));s.push(r.bulkCreateOrMerge(e))}yield Promise.all(s)}));return function(){return t.apply(this,arguments)}}()))}))).apply(this,arguments)}function k(e){if(!e.length)return;const t=(0,a.default)(e.map((e=>String((0,l.default)(e.rowId,"msg.rowId")))));A.ftsLightClient.purge(t).catch((()=>{})),c.default.ignoreTransaction((0,o.default)((function*(){yield A.ftsLightClient.addToIndexingTable(t),A.ftsLightClient.index().catch((()=>{}))})))}function G(e,t){if((0,v.getIsSentByMe)(e))return!0===e.local?(0,v.getIsNewsletterMsg)(e)&&!(0,b.isMeAccount)(t.from)?s.ACK.SENT:s.ACK.CLOCK:(0,I.isNoteToSelf)(e.id)?s.ACK.READ:s.ACK.SENT}t.EditedMentionOfMe=P;const U=new Map;function x(e,t){var n,r,o,a;const s=Boolean(t.matchedText)||Boolean(t.canonicalUrl)||Boolean(t.description)||Boolean(t.title),u={latestEditMsgKey:t.latestEditMsgKey,latestEditSenderTimestampMs:t.latestEditSenderTimestampMs,errorCode:t.errorCode,ack:G(e,t),pendingReadReceipt:(0,v.getIsSentByMe)(e)?void 0:h.PendingReadReceiptType.MessageEdit},c=(0,y.getMsgEditType)(e.type);let d,p,f;var g,A,m,E,S;c===y.MsgEditType.TextEdit?d=(0,i.default)((0,i.default)({},u),{},{subtype:s?"url":void 0,body:t.body,mentionedJidList:t.mentionedJidList,groupMentions:t.groupMentions,title:t.title,description:t.description,canonicalUrl:t.canonicalUrl,matchedText:t.matchedText,inviteGrpType:t.inviteGrpType,thumbnail:t.thumbnail,richPreviewType:t.richPreviewType,doNotPlayInline:t.doNotPlayInline,thumbnailDirectPath:null!==(g=t.thumbnailDirectPath)&&void 0!==g?g:void 0,thumbnailSha256:null!==(A=t.thumbnailSha256)&&void 0!==A?A:void 0,thumbnailEncSha256:null!==(m=t.thumbnailEncSha256)&&void 0!==m?m:void 0,thumbnailHeight:null!==(E=t.thumbnailHeight)&&void 0!==E?E:void 0,thumbnailWidth:null!==(S=t.thumbnailWidth)&&void 0!==S?S:void 0,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp,botPluginSearchUrl:t.botPluginSearchUrl,botPluginSearchProvider:t.botPluginSearchProvider,botPluginReferenceIndex:t.botPluginReferenceIndex,botPluginType:t.botPluginType,botPluginMaybeParent:t.botPluginMaybeParent,botReelPluginThumbnailCdnUrl:t.botReelPluginThumbnailCdnUrl}):c===y.MsgEditType.CaptionEdit?p=(0,i.default)((0,i.default)({},u),{},{caption:t.caption,mentionedJidList:t.mentionedJidList,groupMentions:t.groupMentions,isCaptionByUser:!0}):e.type===T.MSG_TYPE.EVENT_CREATION&&(f=(0,i.default)((0,i.default)({},u),{},{eventName:t.eventName,eventDescription:t.eventDescription,eventLocation:t.eventLocation,eventStartTime:t.eventStartTime,eventJoinLink:t.eventJoinLink,isEventCanceled:t.isEventCanceled}));const I=(0,l.default)(null!==(n=null!==(r=d)&&void 0!==r?r:p)&&void 0!==n?n:f,"editedTextMsgData ?? editedCaptionMsgData ?? editedEventMsgData");(0,v.getIsSentByMe)(e)&&null!=t.count&&(I.count=t.count);const b=null!==(o=null!==(a=U.get(e.id.toString()))&&void 0!==a?a:e.latestEditSenderTimestampMs)&&void 0!==o?o:0,M=(0,l.default)(t.latestEditSenderTimestampMs,"protocolMsg.latestEditSenderTimestampMs"),C=M>=b;let O;if(C&&U.set(e.id.toString(),M),!(0,v.getIsSentByMe)(e)){const t=(0,v.getHasMentionOfMe)(e),n=(0,v.getHasMentionOfMe)((0,i.default)((0,i.default)({},e),I));t&&!n?O=P.Removed:!t&&n&&(O=P.Added)}return(0,_.isBotReceiveEnabled)()&&((0,v.getIsMetaBotResponse)(e)||null!=e.botEditType)&&(I.botEditType=t.botEditType,I.botEditTargetId=t.botEditTargetId),{parentMsg:e,protocolMsg:t,editedMsgData:I,isLatest:C,mentionOfMe:O}}function F(){return K.apply(this,arguments)}function K(){return(K=(0,o.default)((function*(e){if(!(0,E.receiveCaptionEditEnabled)())return;const t=new Map,n=new Map;for(const r of e){const{parentMsg:e,mentionOfMe:i}=r,o=e.id.remote.toString();if(i)switch(i){case P.Removed:{const n=e.id.toString();let r=t.get(o);r||(r=[],t.set(o,r)),r.push(n);break}case P.Added:{let t=n.get(o);t||(t=[],n.set(o,t));const r={id:e.id.toString(),timestamp:e.t};t.push(r)}}}t.size&&(yield(0,p.removeUnreadMentionChat)(t)),n.size&&(yield(0,p.addUnreadMentionChat)(n))}))).apply(this,arguments)}},25078:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processGroupInviteMessages=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(18625);function s(){return(s=(0,i.default)((function*(e){yield(0,a.persistGroupInviteV4Msgs)(e.map((e=>({id:e.id.toString(),from:e.from.toString(),to:e.to.toString(),groupId:e.inviteGrp,expiration:parseInt(e.inviteCodeExp,10),expired:(0,o.unixTime)()>=parseInt(e.inviteCodeExp,10)}))))}))).apply(this,arguments)}},37653:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PreviousMsgNotUpdatableError=t.DuplicateMessageError=void 0,t.processGroupInviteMessages=function(){return I.apply(this,arguments)},t.starMessages=function(e){return(0,A.getMessageTable)().bulkGet(e).then((e=>{const t=e.filter(Boolean).map((e=>({id:e.id,isStarred:(0,m.shouldPopulateStarMessageWithTimestamp)()?e.t:e.rowId})));return(0,A.getMessageTable)().bulkCreateOrMerge(t)}))},t.storeMessages=function(){return v.apply(this,arguments)},t.unstarMessages=function(e){return(0,A.getMessageTable)().bulkCreateOrMerge(e.map((e=>({id:e,isStarred:void 0}))))},t.updateExistingMessages=function(e,t){var n;const r=null==t?null===(n=e[0])||void 0===n?void 0:n.id.remote:t;if(r){const t=e.map((e=>{const t=(0,d.dbRowFromMessage)(e);return(0,p.addMsgMetadataToMsgRow)({msg:t,chatId:r.toString(),hasLink:(0,g.hasHttpLink)(e),pendingReadReceipt:!1})}));return Promise.resolve((0,A.getMessageTable)().bulkCreateOrMerge(t)).then((()=>{f.ftsLightClient.index().catch((()=>{}))})).catch((e=>{throw __LOG__(3)`Error storing messages`,e}))}return Promise.resolve()},t.updateMessage=function(e){if((0,u.isPlaceholderMsg)(e.type))return Promise.resolve(e);return(0,h.getStorage)().lock(["message"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=yield n.get(e.id.toString());if(!r)throw(0,E.default)(`[messaging] updateMessage: msgId::${e.id.toString()}, Failed to find previous message row in message table`);if(!(0,u.isPlaceholderMsg)(r.type)&&!(0,u.isFutureproofMsg)(r.type))throw __LOG__(2,void 0,void 0,void 0,["messaging"])`updateMessage: msgId::${e.id.toString()}, Previous row in message table is not a placeholder or futureproof`,new S;const o=e.from,a=(0,i.default)({},e);null!=r.t&&(a.t=r.t),r.ack>e.ack&&(a.ack=r.ack);const s=(0,p.addMsgMetadataToMsgRow)({msg:(0,d.dbRowFromMessage)(a),chatId:o.toString(),hasLink:(0,g.hasHttpLink)(a),rowId:void 0,inChatMsgId:void 0,pendingReadReceipt:r.pendingReadReceipt});if(s.rowId=r.rowId,s.internalId=r.internalId,null==s.rowId||null==s.internalId)throw(0,E.default)(`[messaging] updateMessage: msgId::${e.id.toString()}, missing rowId or internalId`);return yield n.createOrReplace(s),(0,u.isPlaceholderMsg)(r.type)&&(0,_.populatePlaceholderWam)([(0,d.messageFromDbRow)(r)]),f.ftsLightClient.index().catch((()=>{})),a}));return function(){return t.apply(this,arguments)}}())};var i=r(n(81109)),o=r(n(48926)),a=n(29987),s=r(n(46808)),l=n(18625),u=n(24992),c=n(56858),d=n(74773),p=n(39066),f=n(69242),_=n(50374),g=n(31565),h=n(74557),A=n(10139),m=n(88159),E=r(n(89482));class y extends Error{constructor(){super(...arguments),this.name="DuplicateMessageError"}}t.DuplicateMessageError=y;class S extends Error{constructor(){super(...arguments),this.name="PreviousMsgNotUpdatableError"}}function v(){return(v=(0,o.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,u.logUndefinedMessage)(e),yield c.DbEncKeyStore.waitForFinalDbMsgEncKey(),Promise.resolve((0,p.storeMessageInTransaction)(e,t,n)).then((()=>{f.ftsLightClient.index().catch((()=>{}))})).catch((e=>{throw e instanceof s.default.BulkError||e instanceof s.default.ConstraintError?new y:(__LOG__(3)`Error storing messages`,e)}))}))).apply(this,arguments)}function I(){return(I=(0,o.default)((function*(e){return yield Promise.all(e.map((e=>(0,l.persistGroupInviteV4Msg)(e.id.toString(),{id:e.id.toString(),from:e.from.toString(),to:e.to.toString(),groupId:e.inviteGrp,expiration:parseInt(e.inviteCodeExp,10),expired:(0,a.unixTime)()>=parseInt(e.inviteCodeExp,10)})))),Promise.resolve()}))).apply(this,arguments)}t.PreviousMsgNotUpdatableError=S},82740:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processPollUpdateMsgs=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(78013),s=n(32602),l=n(48840),u=n(64071),c=n(68569),d=n(69785);function p(){return(p=(0,i.default)((function*(e){if(0===e.length)return[];const{pollUpdateMsgsToParentMsgs:t,orphans:r}=yield(0,a.getParentMessages)(e);for(const[e,n]of t.entries())n.pollInvalidated&&t.delete(e);const[,p]=yield Promise.all([(0,i.default)((function*(){if(0===r.length)return;const{storeMessageOrphans:e}=n(6751);yield e(r,(e=>e.pollUpdateParentKey));const t=r.map((e=>e.id.toString())),{markFutureproofMessagesReparsed:i}=n(58351);yield i(t)}))(),(0,i.default)((function*(){if(0===t.size)return;const e=yield(0,s.upsertVotesDb)(yield(0,c.extractVotes)(t));yield(0,o.frontendSendAndReceive)("upsertVotesModelCollection",{votes:e,votesToRemove:null,restoredFromDb:!1});const r=e.map((e=>e.msgKey.toString())),{markFutureproofMessagesReparsed:i}=n(58351);yield i(r);const a=yield(0,d.filterChatsWithAddOnPreviewUpdates)(e.map((e=>(0,u.lastAddOnPreviewCandidateFromVoteData)(e,!1))));return a.size>0&&(yield(0,l.updateDatabaseForLastAddOnPreview)(a),(0,o.frontendFireAndForget)("updateChatLastAddOnPreview",{chatMap:a})),e}))()]);return null!=p?p:[]}))).apply(this,arguments)}},93444:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processReplyMsgs=function(){return E.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=r(n(18446)),s=r(n(91747)),l=r(n(35937)),u=r(n(49619)),c=n(74773),d=n(87946),p=n(98051),f=n(68214),_=n(34473),g=n(74557),h=n(26368),A=r(n(60001)),m=n(3885);function E(){return(E=(0,o.default)((function*(e){if(!(0,f.processReplyMessagesEnabled)()||!e.length)return;const t=yield(0,g.getStorage)().lock(["message"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=new Set;e.forEach((e=>{r.add(y(e).toString())}));const o=(yield(0,d.getMsgsByMsgKey)(Array.from(r.values()))).filter((e=>{const t=(0,_.getMsgEditType)(e.type);if(!t)return!1;switch(t){case _.MsgEditType.TextEdit:return(0,f.receiveTextEditEnabled)();case _.MsgEditType.CaptionEdit:return(0,f.receiveCaptionEditEnabled)()}})),a=new Map(o.map((e=>[e.id.toString(),e]))),s=e.filter((e=>a.has(y(e).toString())));if(!s.length)return;const l=[];return s.forEach((e=>{const t=(0,u.default)(a.get(y(e).toString()),"quotedMsgsByKey.get(createQuotedMsgKey(msg).toString())");v((0,u.default)(e.quotedMsg,"msg.quotedMsg"),t)&&l.push((0,i.default)((0,i.default)({},e),{},{quotedMsg:t}))})),l.length?(yield n.bulkCreateOrMerge(l.map(c.dbRowFromMessage)),l):void 0}));return function(){return t.apply(this,arguments)}}());(null==t?void 0:t.length)&&t.forEach((t=>{(0,u.default)(e.find((e=>e.id.equals(t.id))),"replyMsgs.find(m => m.id.equals(updatedMsg.id))").quotedMsg=t.quotedMsg}))}))).apply(this,arguments)}function y(e){var t,n;const r=null!==(t=e.quotedParticipant)&&void 0!==t?t:void 0,i=null!==(n=e.quotedRemoteJid)&&void 0!==n?n:e.id.remote;return new A.default({id:(0,u.default)(e.quotedStanzaID,"msg.quotedStanzaID"),fromMe:(0,m.isMeAccount)(r),remote:i,participant:(0,h.getIsGroupMsg)(e)||(null==r?void 0:r.isBot())?r:void 0})}const S={inviteGrpType:p.GroupType.DEFAULT,thumbnail:"",body:"",caption:"",interactiveAnnotations:[],scanLengths:[],staticUrl:"",pageCount:0};function v(e,t){const n=(0,l.default)(e,(e=>null!=e)),r=(0,l.default)(t,((e,t)=>n.hasOwnProperty(t)));return(0,s.default)(n,S),(0,s.default)(r,S),!(0,a.default)(n,r)}},99224:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RT_CLEANUP_OLDER_THAN_DAYS=void 0,t.cleanupReportingTokenTable=function(){return f.apply(this,arguments)},t.getReportingTokenRowFromMsg=function(){return p.apply(this,arguments)},t.handleAddReportingTokenInfos=function(){return _.apply(this,arguments)},t.maybeStoreReportingTag=function(e,t){if(!(0,u.isReportingTokenReceivingEnabled)())return;if(null==t||null==t.reportingTag)return;(0,s.getMessageCache)().addAdditionalInfo({type:l.MsgAdditionalInfoType.ReportingTokenInfo,data:{id:e.toString(),reportingTag:t.reportingTag,ts:(0,a.unixTimeMs)()}})},t.msgToReportingTokenRow=function(e){const t=e.reportingTokenInfo;if(null==t)return null;const{reportingTag:n,reportingTokenContent:r,version:i}=t,o={id:e.id.toString(),ts:(0,a.unixTimeMs)()};null!=n&&(o.reportingTag=n);null!=r&&(o.reportingTokenContent=r);null!=i&&(o.version=i);return o};var i=r(n(6479)),o=r(n(48926)),a=n(29987),s=n(91360),l=n(9120),u=n(19909),c=n(32392);const d=["reportingTag"];function p(){return(p=(0,o.default)((function*(e){return yield(0,c.getReportingTokenTable)().get(e)}))).apply(this,arguments)}function f(){return(f=(0,o.default)((function*(e){if(null==e||e<=-1)return;if(0===e)return(0,c.getReportingTokenTable)().clear();const t=(0,a.unixTimeMs)()-e*a.DAY_MILLISECONDS,n=yield(0,c.getReportingTokenTable)().lessThan(["ts"],t);yield(0,c.getReportingTokenTable)().bulkRemove(n.map((e=>e.id)))}))).apply(this,arguments)}function _(){return(_=(0,o.default)((function*(e){const t=e.map((e=>e.id)),n=yield(0,c.getReportingTokenTable)().bulkGet(t),r=[];e.forEach(((e,t)=>{const o=n[t];if(null==o||null==o.reportingTag)r.push(e);else{const{reportingTag:t}=e,n=(0,i.default)(e,d);null!=t&&(__LOG__(3,void 0,void 0,!0,["messaging","wa-ice","report-token"])`reporting tag is already stored for the msgKey`,SEND_LOGS("report-token-reporting-tag-existed-for-msgKey",.01,"messaging","wa-ice","report-token")),r.push(n)}})),yield(0,c.getReportingTokenTable)().bulkCreateOrMerge(r)}))).apply(this,arguments)}t.DEFAULT_RT_CLEANUP_OLDER_THAN_DAYS=-1},4489:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isEligibleForFallback=A,t.storeEncryptedDBMessages=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,f.getStorage)().lock(["message"],function(){var d=(0,i.default)((function*(d){let[p]=d,f=e;if(r){const t=yield(0,l.getMsgsExistByMsgKey)(e.map((e=>{let[t]=e;return t.id.toString()})));if(f=e.filter(((e,n)=>!t[n])),__LOG__(3)`storeEncryptedDBMessages: perform fallback for ${f.length} out of original ${e.length} messages`,0===f.length)return}const g=yield(0,c.getLastRowId)(p,n),E=new Map;yield Promise.all(t.map((e=>{const t=(0,h.createWid)(e),r=(0,s.beginningOfChat)(t),i=(0,s.endOfChat)(t);return p.between(["internalId"],r,i,{limit:1,reverse:!n,returnKeyType:"keys"}).then((e=>{const n=0===e.length?c.INLINE_MESSAGE_STARTING_INDEX:(0,s.getInChatMsgId)(e[0]);E.set(t.toString(),n)}))})));const y=n?-1:1,S=(yield(0,o.promiseMap)(f,function(){var e=(0,i.default)((function*(e,t){let[r,i]=e;n&&(r.isMdHistoryMsg=!0);const o=_.default.fromString(r.id),a=o.remote.toString(),s=E.get(a);if(null==s||Number.isNaN(s))return;const l=s+1*y;E.set(a,l);const c=!n&&(yield(0,u.isPendingUnreadReceipt)(o,r));return(0,u.addMsgMetadataToMsgRow)({msg:r,chatId:a,hasLink:i,rowId:g+y*(t+1),inChatMsgId:l,pendingReadReceipt:c})}));return function(){return e.apply(this,arguments)}}())).filter(Boolean);try{yield p.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(S)}catch(t){if(!(n&&t instanceof a.default.BulkError))throw!r&&A(e.length,t)||m(S,t),t;__LOG__(4,void 0,new Error)`storeEncryptedDBMessages: BulkError in bulkCreate for history sync msgs, retrying with bulk create or replace`,yield p.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(S)}return S}));return function(){return d.apply(this,arguments)}}()).then((e=>{e&&e.length>0&&a.default.ignoreTransaction((0,i.default)((function*(){yield d.ftsLightClient.addToIndexingTable(e.map((e=>null!=e.rowId?String(e.rowId):null)).filter(Boolean)),d.ftsLightClient.index().catch((()=>{}))})))}))};var i=r(n(48926)),o=n(21212),a=r(n(46808)),s=n(62505),l=n(87946),u=n(39066),c=n(34066),d=n(69242),p=n(19909),f=n(74557),_=r(n(60001)),g=n(17067),h=n(51017);function A(e,t){return e>1&&t instanceof a.default.BulkError&&(0,p.isMessageDropBulkDbOperationFallbackEnabled)()}function m(e,t){a.default.ignoreTransaction((0,i.default)((function*(){let n=e;if(t instanceof a.default.BulkError){const t=e.map((e=>{let{id:t}=e;return t.toString()})),r=yield(0,l.getMsgsExistByMsgKey)(t);n=e.filter(((e,t)=>!r[t]))}n.length>0?(__LOG__(3)`storeEncryptedDBMessages: dropping ${n.length} out of ${e.length} message(s): ${n.map((e=>{let{id:t}=e;return t}))}, due to DB error: ${t}`,(0,g.postIncomingMessageDropDBOperationFailedForMsgRows)(n)):__LOG__(3)`storeEncryptedDBMessages: all ${e.length} message(s) are already in the DB`}))).catch((e=>{__LOG__(4,void 0,new Error,!0)`storeEncryptedDBMessages: failed to post db error metrics: ${e}`,SEND_LOGS("failed-to-post-db-error-metrics")}))}},39066:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addMsgMetadataToMsgRow=M,t.isPendingUnreadReceipt=T,t.storeMessageInTransaction=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=null==t?e[0].id.remote:t,i=(0,d.beginningOfChat)(r),a=(0,d.endOfChat)(r),u=P(`storeMessageInTransaction: ${e.length} message(s), chat ${(null==r?void 0:r.toString())||"-"}`);return(0,_.getStorage)().lock(["chat","message"],function(){var t=(0,o.default)((function*(t){let[l,p]=t;u.addStage("got table lock");const _=yield l.get(r.toString());if(u.addStage("got chat"),!r.isStatusV3()&&(null!=_||I(e))){const t=b(_,e,r);yield l.createOrMerge(r.toString(),t)}u.addStage("got messages meta");const g=p.all({reverse:!n,limit:1,index:["rowId"],returnKeyType:"keys"}).then((e=>(u.addStage("got boundary row id"),0===e.length?v:e[0]))),A=p.between(["internalId"],i,a,{limit:1,reverse:!n,returnKeyType:"keys"}).then((e=>(u.addStage("got chat msg boundary id"),0===e.length?v:(0,d.getInChatMsgId)(e[0])))),[m,y]=yield Promise.all([g,A]);u.addStage("got boundaries");const S=n?m-e.length:m+1,P=n?y-e.length:y+1,C=yield(0,s.promiseMap)(e,function(){var e=(0,o.default)((function*(e,t){var i;const o=(0,c.dbRowFromMessage)(e),a=!n&&(yield T(e.id,e));return M({msg:o,chatId:r.toString(),hasLink:(0,f.hasHttpLink)(e),rowId:S+t,inChatMsgId:(0,h.getIsNewsletterMsg)(e)?null!==(i=e.serverId)&&void 0!==i?i:yield(0,E.getTemporaryServerId)(r):P+t,pendingReadReceipt:a})}));return function(){return e.apply(this,arguments)}}());return u.addStage("messages ready for storing in db"),p.bulkCreate(C).then((()=>C))}));return function(){return t.apply(this,arguments)}}()).then((e=>{u.done(),l.default.ignoreTransaction((()=>{(0,y.getFtsIndexingQueueTable)().bulkCreateOrReplace(e.map((e=>({id:String(e.rowId)}))))}))}))};var i=r(n(81109)),o=r(n(48926)),a=n(44037),s=n(21212),l=r(n(46808)),u=n(24992),c=n(74773),d=n(62505),p=n(87946),f=n(31565),_=n(74557),g=n(70760),h=n(26368),A=r(n(60001)),m=n(73602),E=n(48678),y=n(97659),S=n(88159);const v=1e9;function I(e){return e.some((e=>e.type!==m.MSG_TYPE.NOTIFICATION_TEMPLATE))}function T(e,t){if(e.fromMe||e.remote.isStatusV3())return!1;const n=(0,g.eventTypeFromMsgType)(t);return n===u.EventType.AMBIENT||n===u.EventType.DEFAULT}function b(e,t,n){var r,i;let o,a=Math.max(0,null!==(r=null==e?void 0:e.unreadCount)&&void 0!==r?r:0);const s=null!==(i=null==e?void 0:e.unreadMentionsOfMe)&&void 0!==i?i:[];return t.forEach((e=>{const t=(0,g.eventTypeFromMsgType)(e);if(t===u.EventType.IGNORE)return;e&&null!=e.t&&(null==o||e.t>o)&&(o=e.t),t!==u.EventType.AMBIENT&&t!==u.EventType.DEFAULT||e.id.fromMe||(a+=1);if(T(e.id,e)&&(0,h.getIsImportantMessage)(e)){const t={id:e.id.toString(),timestamp:e.t};s.push(t)}})),e&&null!=e.t&&(null==o||e.t>o)&&(o=e.t),{id:n.toString(),unreadCount:a,t:o,unreadMentionsOfMe:s}}function M(e){var t;const{msg:n,chatId:r,hasLink:o,rowId:s,inChatMsgId:l,pendingReadReceipt:u}=e,c=[m.MSG_TYPE.IMAGE,m.MSG_TYPE.VIDEO,m.MSG_TYPE.AUDIO].includes(n.type),f=(0,S.shouldPopulateStarMessageWithTimestamp)()?n.t:s,_=(0,i.default)((0,i.default)({},n),{},{vcardWAids:n.vcardWAids||(0,d.getVcardWids)(n),id:n.id.toString(),isStarred:n.star?f:void 0,hasLink:"chat"===n.type&&o?s:void 0,isMediaMsg:c?s:void 0,isDocMsg:n.type===m.MSG_TYPE.DOCUMENT?s:void 0,isCarouselMsg:null!=n.carouselCardsParsed?s:void 0,expiredTimestamp:null!==(t=(0,h.getEphemeralExpirationTimestamp)(n))&&void 0!==t?t:void 0});null!=s&&(_.rowId=s),null!=l&&(_.internalId=(0,d.craftInternalId)(r,l)),u&&r!==a.STATUS_JID&&(_.pendingReadReceipt=p.PendingReadReceiptType.Message);let g=n.c2sTimestamp;var E;n.id.fromMe?g=null!==(E=n.c2sTimestamp)&&void 0!==E?E:n.t:g=n.t;try{n.type!==m.MSG_TYPE.REACTION&&(_.messageRangeIndex=(0,d.craftMessageRangeIndex)(r,!A.default.fromString(n.id).fromMe,m.SYSTEM_MESSAGE_TYPES.includes(n.type),g))}catch(e){__LOG__(4,void 0,new Error)`[process-msg] craftMessageRangeIndex failed with error ${e}`}return _}function P(e){const t=Date.now(),n=[];return{addStage(e){n.push([e,Date.now()-t])},done(){if(Date.now()-t>5e3){for(const[e,t]of n);__LOG__(3)`${e}: completed in ${Date.now()-t}ms`}}}}},34066:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INLINE_MESSAGE_STARTING_INDEX=void 0,t.getLastRowId=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.all({reverse:!t,limit:1,index:["rowId"],returnKeyType:"keys"}).then((e=>0===e.length?n:e[0]))};const n=1e9;t.INLINE_MESSAGE_STARTING_INDEX=n},78891:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findAndDeleteAssociatedPluginMsg=y,t.findAssociatedPluginMsgs=v,t.processRevokeMsgs=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(22038),a=n(93040),s=n(31654),l=n(1619),u=n(63007),c=n(69242),d=n(41843),p=n(74557),f=n(26368),_=r(n(60001)),g=n(73602),h=n(10139),A=r(n(27112)),m=n(51017);function E(){return(E=(0,i.default)((function*(e){const t=[],n=[],r=[],l=new Map,E=[],S=[],v=[],I=e.filter((e=>{const{revokeMsgKey:t,newMsgKey:n,subtype:r}=e;let i=!0;return"admin_revoke"===r?A.default.isGroup(t.remote)||A.default.isNewsletter(t.remote)?A.default.equals(t.remote,n.remote)||(i=!1,__LOG__(2)`processRevokeMsgs: ${String(t)} has not been revoked`,__LOG__(3,void 0,void 0,!0)`processRevokeMsgs: admin revoke came for the different group than the original message was in`,SEND_LOGS("process-admin-revoke-message")):(i=!1,__LOG__(2)`processRevokeMsgs: ${String(t)} has not been revoked`,__LOG__(3,void 0,void 0,!0)`processRevokeMsgs: admin revoke has to be sent to a group or newsletter chat`,SEND_LOGS("process-admin-revoke-message")):(i=A.default.equals(t.remote,n.remote)&&A.default.equals(...(0,d.normalizeUserWidsToLidOrPn)(t.participant,n.participant))&&t.fromMe===n.fromMe,i||(__LOG__(2)`processRevokeMsgs: invalid revoke request ${String(t)}, ${String(n)}`,(0,u.isBotReceiveEnabled)()&&(__LOG__(2)`processRevokeMsgs: sending invalid revoke for secondary validation as bot invoker revoke`,E.push(e)))),i}));if((0,u.isBotReceiveEnabled)()&&E.length>0)try{const e=E.map((e=>e.revokeMsgKey.toString()));(yield(0,h.getMessageTable)().bulkGet(e,!1)).forEach(((e,t)=>{let n=!1;const r=E[t],{newMsgKey:i,subtype:o,sender:a}=r;if(null==(null==e?void 0:e.id)||null==r||"admin_revoke"===o)return;const s=_.default.from(e.id).remote,l=e.botTargetSenderJid?(0,m.createWidFromWidLike)(e.botTargetSenderJid):null;if(null==l||null==s)return;const c=null!=e.botPluginSearchUrl&&null!=e.botResponseTargetId,d=!c&&!0===e.botPluginMaybeParent;if(s.isGroup()?A.default.equals(l,i.participant)&&(n=!0):s.isBot()||A.default.equals(l,a)&&(n=!0),n){S.push(r);const{internalId:t,botResponseTargetId:n}=e;(0,u.isBotCarouselEnabled)()&&(c||d)&&null!=t&&null!=n&&v.push({internalId:t,targetId:n})}})),I.push(...S)}catch(e){__LOG__(4,void 0,new Error,!0)`Store Revoked Msg: re-validate bot revoke failed with error: ${e.name}, stack: ${e.stack}`,SEND_LOGS("Re-validate revoke failed")}if((0,u.isBotCarouselEnabled)()&&v.length>0)try{yield y(v)}catch(e){__LOG__(4,void 0,new Error,!0)`Store Revoked Msg: delete associated carousel revoke failed with error: ${e.name}, stack: ${e.stack}`,SEND_LOGS("Plugin carousel delete revoke failed")}const[T,b]=yield Promise.all([(0,p.getStorage)().lock(["message"],function(){var e=(0,i.default)((function*(e){let[i]=e;const o=yield i.bulkGet([...I.map((e=>e.revokeMsgKey.toString())),...I.map((e=>{var t,n;return null!==(t=null===(n=(0,d.getAlternateMsgKey)(e.revokeMsgKey))||void 0===n?void 0:n.toString())&&void 0!==t?t:""})),...I.map((e=>e.newMsgKey.toString()))],!1),a=[],s=I.length,u=o.slice(0,s),c=o.slice(s,2*s),p=o.slice(2*s);I.forEach(((e,i)=>{var o;const s=null!==(o=u[i])&&void 0!==o?o:c[i],d=p[i];if(null==s)return __LOG__(2)`processRevokeMsg: orphan revoke message key ${e.revokeMsgKey}`,void a.push(e);if(t.push(s.id),r.push(String(s.rowId)),n.push({id:e.newMsgKey.toString(),to:s.to,author:s.author,type:g.MSG_TYPE.REVOKED,subtype:"admin_revoke"===e.subtype?"admin":"sender",revokeSender:e.sender,protocolMessageKey:s.id,protocolMessageRowId:null==d?void 0:d.rowId,from:s.from,t:s.t,rowId:s.rowId,internalId:s.internalId,messageRangeIndex:s.messageRangeIndex,revokeTimestamp:e.revokeTimestamp,disappearingModeInitiator:e.disappearingModeInitiator,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp}),(0,f.getIsImportantMessage)(s)){const e=_.default.fromString(s.id).remote.toString();if(l.has(e)){var h;const t=null!==(h=l.get(e))&&void 0!==h?h:[];l.set(e,[...t,s.id])}else l.set(e,[s.id])}}));const h=[];return t.length>0&&h.push(i.bulkRemove(t)),n.length>0&&h.push(i.bulkCreateOrReplace(n)),yield Promise.all(h),a}));return function(){return e.apply(this,arguments)}}()),(0,o.processRevokeMsgs)(I)]);if(T.length>0){const e=T.map((e=>{var t;return{msgKey:e.revokeMsgKey.toString(),sender:e.sender,timestamp:e.timestamp,subtype:null!==(t=e.subtype)&&void 0!==t?t:"sender_revoke"}}));yield(0,s.addOrphanRevokes)(e)}c.ftsLightClient.purge(r).catch((()=>{})),l.size>0&&(0,a.removeUnreadMentionChat)(l)}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){let t=[],n=[];const r=e.map(function(){var e=(0,i.default)((function*(e){const{pluginLinkMsgIds:r,pluginLinkMsgIdsRowIds:i}=yield v(e);t=[...t,...r],n=[...n,...i],yield(0,h.getMessageTable)().bulkRemove(t)}));return function(){return e.apply(this,arguments)}}());yield Promise.all(r),c.ftsLightClient.purge(n).catch((()=>{})),(0,l.frontendFireAndForget)("deleteAssociatedBotCarouselMsgs",{msgKeys:t})}))).apply(this,arguments)}function v(){return I.apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){const t=[],n=[],{internalId:r,targetId:i}=e,o=r.split("_")[0];return yield(0,h.getMessageTable)().between(["internalId"],r,`${o}_g`,{reverse:!1,limit:20,shouldDecrypt:!1},(e=>e.botResponseTargetId!==i||(t.push(e.id),n.push(String(e.rowId)),!1))),{pluginLinkMsgIds:t,pluginLinkMsgIdsRowIds:n}}))).apply(this,arguments)}},505:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommunityLinkOperation=void 0;const r=n(76672).Mirrored(["SubGroupLink","SiblingGroupLink","SubGroupUnlink","SiblingGroupUnlink"]);t.CommunityLinkOperation=r},88470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STALE_TYPES=t.PARTICIPANT_OPERATION=t.GroupUnSyncedError=void 0;n(98051);const r=Object.freeze({ADD:"add",REMOVE:"remove",DEMOTE:"demote",PROMOTE:"promote",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote"});t.PARTICIPANT_OPERATION=r;const i=Object.freeze({DEVICE:"device",PARTICIPANT:"participant"});t.STALE_TYPES=i;class o extends Error{constructor(){super(...arguments),this.name="GroupUnSyncedError"}}t.GroupUnSyncedError=o},69242:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ftsLightClient=void 0;var i=r(n(48926)),o=n(33633),a=n(95160),s=n(97659),l=n(49625);let u=null;function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){return null!=u||(u=yield(0,l.workerSafeSendAndReceive)("getFtsClientInstance")),u}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){var t;if((0,a.isWorker)())return(0,o.getIndexV3Table)().bulkRemoveByIndex(["id"],e);const n=null!==(t=u)&&void 0!==t?t:yield c();yield n.purge(e)}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){var e;if((0,a.isWorker)())return Promise.resolve();const t=null!==(e=u)&&void 0!==e?e:yield c();yield t.index()}))).apply(this,arguments)}const _={purge:function(){return p.apply(this,arguments)},index:function(){return f.apply(this,arguments)},addToIndexingTable:function(e){return(0,s.getFtsIndexingQueueTable)().bulkCreateOrReplace(e.map((e=>({id:e}))))}};t.ftsLightClient=_},50452:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WHATSAPP_GRAPHQL_ENDPOINT=t.WHATSAPP_GRAPHQL_ACCESS_TOKEN=t.FACEBOOK_GRAPHQL_ENDPOINT=void 0;t.FACEBOOK_GRAPHQL_ENDPOINT="https://graph.facebook.com/graphql";t.WHATSAPP_GRAPHQL_ENDPOINT="https://graph.whatsapp.com/graphql/catalog";t.WHATSAPP_GRAPHQL_ACCESS_TOKEN="WA|787118555984857|7bb1544a3599aa180ac9a3f7688ba243"},37537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueries=void 0;t.PersistedQueries={WAWebQueryCatalogHasCategoriesQuery:"5247905281934978",WAWebQueryCatalogProductQuery:"3975937262530766",WAWebQueryCatalogQuery:"5456143974442934",WAWebQueryProductCollectionsQuery:"5349138355174780",WAWebQueryProductListCatalogJobQuery:"5431107963648273",WAWebQueryProductSingleCollectionQuery:"5797153010317042",queryProductListCatalogQuery:"5127568407281377"}},30837:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.graphQLRemapLocale=void 0;var i=r(n(68630));t.graphQLRemapLocale=(e,t)=>{try{const n=JSON.parse(t);return(0,i.default)(n)?Object.keys(n).find((t=>{const r=n[t];return!!Array.isArray(r)&&r.includes(e)}))||e:(__LOG__(3)`Invalid json locale mapping`,e)}catch(t){return __LOG__(3)`Invalid json locale mapping`,e}}},56110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLServerError=t.GraphQLErrorCode=void 0;const r=n(76672)({INVALID_ACCESS_TOKEN:190});t.GraphQLErrorCode=r;class i extends Error{constructor(e){super(),this.name="GraphQLServerError",this.source=e}}t.GraphQLServerError=i},69481:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.commitMutation=function(){return f.apply(this,arguments)},t.fetchQuery=function(){return p.apply(this,arguments)},t.graphql=function(){throw(0,u.default)("Invariant Violation")};var i=r(n(81109)),o=r(n(6479)),a=r(n(48926)),s=n(56110),l=n(17823),u=r(n(89482));const c=["eventLogger","environmentType","accessToken","getInlineDataReader"],d=["eventLogger","environmentType","accessToken","getInlineDataReader"];function p(){return(p=(0,a.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{eventLogger:r,environmentType:i,accessToken:a,getInlineDataReader:u}=n,d=(0,o.default)(n,c);const{fetchQuery:p,readInlineData:f}=yield(0,l.requireRelayRuntime)();try{const n=yield(0,l.getEnvironment)({environmentType:i,accessToken:a}),o=(yield p)(n,e,t,d).toPromise();return null==r||r.success(),null==u||u(f),o}catch(e){throw e instanceof s.GraphQLServerError&&(null==r||r.failure(e.source.errors)),e}}))).apply(this,arguments)}function f(){return(f=(0,a.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{eventLogger:r,environmentType:a,accessToken:u,getInlineDataReader:c}=n,p=(0,o.default)(n,d);const{commitMutation:f,readInlineData:_}=yield(0,l.requireRelayRuntime)();try{const n=yield(0,l.getEnvironment)({environmentType:a,accessToken:u});return new Promise(((o,a)=>{f(n,(0,i.default)((0,i.default)({mutation:e,variables:t},p),{},{onCompleted:e=>{null==r||r.success(),null==c||c(_),o(e)},onError:e=>{a(e)}}))}))}catch(e){throw e instanceof s.GraphQLServerError&&(null==r||r.failure(e.source.errors)),e}}))).apply(this,arguments)}},17823:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironment=function(){return h.apply(this,arguments)},t.requireRelayRuntime=d;var i=r(n(48926)),o=n(50452),a=n(37537),s=n(30837),l=n(56110),u=r(n(14950)),c=n(67454);function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(){const e=yield n.e(5085).then(n.t.bind(n,44311,23));return{Environment:e.Environment,RecordSource:e.RecordSource,Store:e.Store,Network:e.Network,fetchQuery:e.fetchQuery,readInlineData:e.readInlineData,commitMutation:e.commitMutation}}))).apply(this,arguments)}function f(e){switch(e){case"facebook":return o.FACEBOOK_GRAPHQL_ENDPOINT;default:return o.WHATSAPP_GRAPHQL_ENDPOINT}}function _(e){switch(e){case"facebook":return"locale";default:return"lang"}}const g=new Map;function h(){return(h=(0,i.default)((function*(e){var t;const n=null!==(t=e.environmentType)&&void 0!==t?t:"whatsapp",r=g.get(n);if(null!=r)return r;const{Environment:p,Network:h,RecordSource:A,Store:m}=yield d(),E={Accept:"application/json","Content-Type":"application/json"},y=function(){var t=(0,i.default)((function*(t,n){var r,i,d;const p=null!==(r=e.environmentType)&&void 0!==r?r:"whatsapp",g=null!==(i=a.PersistedQueries[t.name])&&void 0!==i?i:t.id,h=_(p),A={access_token:null!==(d=null==e?void 0:e.accessToken)&&void 0!==d?d:o.WHATSAPP_GRAPHQL_ACCESS_TOKEN,doc_id:g,variables:n,[h]:(0,s.graphQLRemapLocale)(u.default.getFullLocale().replace("-","_"),(0,c.getGraphqlLocaleRemapping)())},m=yield self.fetch(f(p),{method:"POST",headers:E,body:JSON.stringify(A)});if(!m.ok)throw new l.GraphQLServerError({errors:[{code:m.status,message:m.statusText}]});const y=yield m.json();if(null!=(null==y?void 0:y.errors))throw new l.GraphQLServerError({errors:y.errors});return y}));return function(){return t.apply(this,arguments)}}(),S=new p({network:h.create(y),store:new m(new A)});return g.set(n,S),S}))).apply(this,arguments)}},65810:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchQuery=function(){return s.apply(this,arguments)},Object.defineProperty(t,"graphql",{enumerable:!0,get:function(){return a.graphql}});var i=r(n(48926)),o=n(55406),a=n(69481);function s(){return(s=(0,i.default)((function*(e,t){return(0,o.fetchQuery)(e,t)}))).apply(this,arguments)}},57967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MexPerfTracker=void 0,t.createLoggingClientError=function(e,t){return{code:e,detail:t,type:"CLIENT"}},t.createLoggingExtensionError=i,t.createLoggingTransportError=function(e,t){return{code:e,detail:t,type:"TRANSPORT"}};var r=n(63479);function i(e,t){return{code:e,detail:t,type:"EXTENSION"}}t.MexPerfTracker=class{constructor(e){this._isMex=!1,this._operationName="",this._queryId="",this._startTime=-1,this._endTime=-1,this._duration=-1,this._hasData=!1,this._errors="",this._errorCodes="",this._isMex=e}start(){this._startTime=Date.now()}stop(){this._endTime=Date.now(),this._duration=this._endTime-this._startTime}setQueryId(e){null!=e&&(this._queryId=e)}setOperationName(e){null!=e&&(this._operationName=e)}setHasData(e){this._hasData=e}setErrors(e){if(null!=e){const t=this.parseErrorsAndCodes(e);this._errors=t.errors,this._errorCodes=t.errorCodes}}setExtensionErrors(e){if(null!=e){const t=e.filter((e=>{var t;return null!=(null===(t=e.extensions)||void 0===t?void 0:t.error_code)})).map((e=>i(e.extensions.error_code,e.message)));this.setErrors(t)}}logEvent(){const e={mexEventV2DurationMs:this._duration,mexEventV2EndTime:this._endTime,mexEventV2ErrorCodes:this._errorCodes,mexEventV2Errors:this._errors,mexEventV2HasData:this._hasData,mexEventV2IsMex:this._isMex,mexEventV2OperationName:this._operationName,mexEventV2QueryId:this._queryId,mexEventV2StartTime:this._startTime};new r.MexEventV2WamEvent(e).commit()}parseErrorsAndCodes(e){const t=e.map((e=>e.code));return{errors:JSON.stringify(e),errorCodes:JSON.stringify(t)}}}},55406:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchQuery=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(57967),a=n(54189),s=n(69641),l=r(n(89482));function u(){return(u=(0,i.default)((function*(e,t){const n=new o.MexPerfTracker(!0);n.start();try{const r=(0,a.convertToConcreteRequest)(e),i=r.params;n.setQueryId(i.id),n.setOperationName(i.name);const o=c(yield(0,s.fetchFunc)(r.params,t,{metadata:{mexPerfTracker:n}}),n);return n.setHasData(!0),n.stop(),n.logEvent(),o.data}catch(e){throw e instanceof s.MexIqError||e instanceof s.MexPayloadParsingError||e instanceof s.MexFatalExtensionError?e instanceof s.MexFatalExtensionError||(__LOG__(4,void 0,new Error,!0,["mex","native-client"])`[mex][native-client] infra error: ${e.message}`,SEND_LOGS("mex-native-client-infra-error",1,"mex","native-client")):(__LOG__(4,void 0,new Error,!0,["mex","native-client"])`[mex][native-client] unexpected error: ${e.message}`,SEND_LOGS("mex-native-client-unexpected-error",1,"mex","native-client"),n.setHasData(!1),n.setErrors([(0,o.createLoggingClientError)(417,e.message)])),n.stop(),n.logEvent(),e}}))).apply(this,arguments)}function c(e,t){if(null!=e.data)return{data:e.data};if(Array.isArray(e)){const e="mex response is an array";throw t.setErrors([(0,o.createLoggingClientError)(472,e)]),new s.MexPayloadParsingError((0,l.default)(e))}const n="data is missing in mex response";throw t.setErrors([(0,o.createLoggingClientError)(472,n)]),new s.MexPayloadParsingError((0,l.default)(n))}},54189:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToConcreteRequest=d,t.deprecatedFetchQuery=function(){return u.apply(this,arguments)},Object.defineProperty(t,"graphql",{enumerable:!0,get:function(){return l.graphql}});var i=r(n(81109)),o=r(n(48926)),a=n(57967),s=n(69641),l=n(69481);function u(){return(u=(0,o.default)((function*(e,t){const n=new a.MexPerfTracker(!0);n.start();try{const r=d(e);c(r,n);const{fetchQuery:i}=yield(0,s.requireRelayRuntime)(),o=yield i(yield(0,s.getEnvironment)(),p(r),t,{fetchPolicy:"network-only",networkCacheConfig:{force:!0,metadata:{mexPerfTracker:n}}}).toPromise();return n.setHasData(!0),n.stop(),n.logEvent(),o}catch(e){throw __LOG__(4,void 0,new Error,void 0,["GQL","MEX"])`[MEX][v2] RelayClient Error:`,e instanceof s.MexIqError||e instanceof s.MexPayloadParsingError||e instanceof s.MexFatalExtensionError||(n.setHasData(!1),n.setErrors([(0,a.createLoggingClientError)(417,e.message)])),n.stop(),n.logEvent(),e}}))).apply(this,arguments)}function c(e,t){var n,r;t.setQueryId(null===(n=e.params)||void 0===n?void 0:n.id),t.setOperationName(null===(r=e.params)||void 0===r?void 0:r.name)}function d(e){var t;if("Request"===e.kind)return e;const n=new Error(`operation kind ${null!==(t=JSON.stringify(e.kind))&&void 0!==t?t:""} is not 'Request'`);throw n.stack,n}function p(e){return(0,i.default)((0,i.default)({},e),{},{params:(0,i.default)((0,i.default)({},e.params),{},{operationKind:"query"})})}},69641:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MexPayloadParsingError=t.MexIqError=t.MexFatalExtensionError=void 0,t.fetchFunc=E,t.getEnvironment=function(){return g.apply(this,arguments)},t.parseFatalExtensionError=S,t.requireRelayRuntime=d,t.sendMexIq=f;var i=r(n(48926)),o=n(89323),a=n(82749),s=r(n(82601)),l=r(n(49619)),u=n(42811),c=n(57967);function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(){const e=yield n.e(5085).then(n.t.bind(n,44311,23));return{Environment:e.Environment,RecordSource:e.RecordSource,Store:e.Store,Network:e.Network,fetchQuery:e.fetchQuery,readInlineData:e.readInlineData,commitMutation:e.commitMutation}}))).apply(this,arguments)}function f(e,t){let n;return null!=t&&(n={query_id:(0,u.CUSTOM_STRING)(t)}),(0,a.deprecatedSendIq)((0,u.wap)("iq",{id:(0,u.generateId)(),to:u.S_WHATSAPP_NET,type:"get",xmlns:"w:mex"},new u.WapNode("query",n,o.Binary.build(JSON.stringify(e)).readByteArray())),new s.default("mexParser",(e=>new TextDecoder("utf-8").decode(e.child("result").contentBytes()))))}let _;function g(){return(g=(0,i.default)((function*(){if(null==_){const{Environment:e,Network:t,RecordSource:n,Store:r}=yield d(),i=t.create(E),o=new r(new n,{queryCacheExpirationTime:0});_=new e({network:i,store:o,getDataID:()=>{}})}return _}))).apply(this,arguments)}class h extends Error{constructor(e,t){super(),this.name="MexIqError",this.code=e,this.message=t}}t.MexIqError=h;class A extends Error{constructor(e){super(),this.name="MexPayloadParsingError",this.error=e}}t.MexPayloadParsingError=A;class m extends Error{constructor(e){super(),this.name="MexFatalExtensionError",this.error=e}}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t,n){var r;const i=null===(r=n.metadata)||void 0===r?void 0:r.mexPerfTracker;null!=i&&(i.setQueryId(e.id),i.setOperationName(e.name));const o=yield v({variables:t},(0,l.default)(e.id,"operation.id"),i);if(!o.success)throw null!=i&&(i.setHasData(!1),i.setErrors([(0,c.createLoggingTransportError)(o.errorCode,o.errorText)])),new h(o.errorCode,o.errorText);let a={};try{a=JSON.parse(o.result)}catch(e){throw null!=i&&(i.setHasData(!1),i.setErrors([(0,c.createLoggingClientError)(472,e.message)])),new A(e)}const s=a;null!=i&&(i.setHasData(null!=s.data),i.setExtensionErrors(s.errors));const u=S(s.errors);if(null!=u)throw new m(u);return a}))).apply(this,arguments)}function S(e){var t;if(null==e||0===e.length)return null;const n=null!==(t=e.find((e=>{var t;return!0===(null===(t=e.extensions)||void 0===t?void 0:t.is_summary)})))&&void 0!==t?t:e.find((e=>{var t;return null!=(null===(t=e.extensions)||void 0===t?void 0:t.error_code)}));if(null==n){const t=e[0];return t.extensions.error_code=500,t}return n}function v(){return I.apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e,t,n){try{return yield f(e,t)}catch(e){throw null!=n&&(n.setHasData(!1),n.setErrors([(0,c.createLoggingClientError)(471,e.message)])),new h(500,e.message)}}))).apply(this,arguments)}t.MexFatalExtensionError=m},26458:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleAction=Q,t.handleGroupNotification=function(e){const t=e.content;if(null!=t&&Array.isArray(t)&&t.length>0){const n=t[0];if("groups_dirty"===n.tag)return Promise.resolve((0,b.handleGroupsDirtyNotificationJob)(e))}const n=K.parse(e);if(n.error)return __LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,Promise.reject(n.error);const r=n.success,o=Boolean(r.offline)&&!O.OfflineMessageHandler.isResumeFromRestartComplete();if(function(){Z.apply(this,arguments)}(r.chatId),(0,T.isGroupNotificationOptimizationEligible)(r,o)&&o)return(0,T.handleGroupNotificationV2)(r,o);return(0,C.handleMessage)(r.chatId.toString(),o,(0,i.default)((function*(){return yield Promise.all(r.actions.map((e=>Q(r,e,o)))),(0,l.wap)("ack",{to:(0,p.GROUP_JID)(r.chatId),id:(0,l.CUSTOM_STRING)(r.externalId),class:"notification",type:"w:gp2",participant:r.author?(0,p.USER_JID)(r.author):l.DROP_ATTR})})))};var i=r(n(48926)),o=r(n(81109)),a=r(n(82601)),s=r(n(49619)),l=n(42811),u=n(83741),c=n(64002),d=n(1619),p=n(11439),f=n(18106),_=n(80780),g=n(22582),h=n(91360),A=n(58849),m=n(37246),E=n(22296),y=n(42469),S=n(98051),v=n(67594),I=n(28728),T=n(85783),b=n(75635),M=n(5707),P=n(15610),C=n(75674),O=n(1723),R=n(41984),N=n(94007),w=n(35872),D=n(23670),L=n(27176),B=n(3885);function k(e){return e.mapChildrenWithTag("participant",(e=>{const t=e.attrEnumOrDefault("type",A.GROUP_PARTICIPANT_TYPES,"participant"),n=e.maybeAttrLidUserJid("lid"),r=e.maybeAttrPhoneUserJid("phone_number");return{displayName:e.maybeAttrString("display_name"),id:(0,P.userJidToUserWid)(e.attrUserJid("jid")),isSuperAdmin:t===A.GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:t===A.GROUP_PARTICIPANT_TYPES.admin||t===A.GROUP_PARTICIPANT_TYPES.superadmin,lid:null!=n?(0,P.userJidToUserWid)(n):null,phoneNumber:null!=r?(0,P.userJidToUserWid)(r):null}}))}const G={invite:S.ADD_REASON.INVITE,linked_group_join:S.ADD_REASON.LINKED_GROUP_JOIN,auto_add:S.ADD_REASON.AUTO_ADD,default_sub_group_admin_add:S.ADD_REASON.DEFAULT_SUBGROUP_ADMIN_ADD,default_sub_group_promote:S.ADD_REASON.DEFAULT_SUBGROUP_PROMOTE,invite_auto_add:S.ADD_REASON.INVITE_AUTO_ADD,general_chat_auto_add:S.ADD_REASON.GENERAL_CHAT_AUTO_ADD},U={default_sub_group_demote:S.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE},x={invite_link:R.RequestMethod.InviteLink,linked_group_join:R.RequestMethod.LinkedGroupJoin,non_admin_add:R.RequestMethod.NonAdminAdd},F={approved:S.RevokedSubGroupSuggestionReason.APPROVED,rejected:S.RevokedSubGroupSuggestionReason.REJECTED,cancelled:S.RevokedSubGroupSuggestionReason.CANCELLED};const K=new a.default("groupNotificationParser",(e=>{e.assertTag("notification"),e.hasAttr("to")&&e.assertAttr("to",(0,B.assertGetMe)().toJid());const t=(0,P.groupJidToWid)(e.attrGroupJid("from")),n=e.hasAttr("participant")?(0,P.userJidToUserWid)(e.attrUserJid("participant")):null;let r=null;try{const t=e.maybeAttrPhoneUserJid("participant_pn");r=null!=t?(0,P.userJidToUserWid)(t):null}catch(e){__LOG__(4,void 0,new Error)`Known error T150827746: ${e.toString()}`}const i=e.attrTime("t"),a=!!e.hasAttr("addressing_mode")&&"lid"===e.attrString("addressing_mode");function l(e){return{jid:e.hasAttr("jid")?(0,P.groupJidToWid)(e.attrGroupJid("jid")):void 0}}const c=e.mapChildren((r=>{var c;const d=r.tag();switch(d){case I.GROUP_NOTIFICATION_TAG.CREATE:return function(e){var t,n,r,i;const o=e.child("group"),a=k(o),s=function(e){if(e.hasChild("description")){const t=e.child("description");if(t.hasChild("body")){const e=t.child("body");if(e.hasContent())return{content:e.contentString(),id:t.attrString("id")}}}return null}(o),l=function(e){if(e.hasChild("ephemeral")){const t=e.child("ephemeral");if(t.hasAttr("expiration"))return{ephemeralDuration:t.attrInt("expiration")}}return null}(o),u=(0,E.extractLinkedParent)(o),c={subject:o.attrString("subject"),restrict:o.hasChild("locked"),announce:o.hasChild("announcement"),noFrequentlyForwarded:o.hasChild("no_frequently_forwarded"),ephemeralDuration:l?l.ephemeralDuration:void 0,owner:o.hasAttr("creator")?(0,P.userJidToUserWid)(o.attrUserJid("creator")):void 0,creation:o.attrTime("creation"),participants:a,desc:s?s.content:void 0,descId:s?s.id:void 0,subjectOwner:o.hasAttr("s_o")?(0,P.userJidToUserWid)(o.attrUserJid("s_o")):void 0,subjectTime:o.hasAttr("s_t")?o.attrTime("s_t"):void 0,support:o.hasChild("support"),isParentGroup:o.hasChild("parent"),isParentGroupClosed:"request_required"===(null===(t=o.maybeChild("parent"))||void 0===t?void 0:t.maybeAttrString("default_membership_approval_mode")),parentGroup:u?u.parentGroup:void 0,defaultSubgroup:o.hasChild("default_sub_group"),generalSubgroup:o.hasChild("general_chat"),size:o.hasAttr("size")?o.attrInt("size"):void 0,incognito:o.hasChild("incognito"),membershipApprovalMode:"on"===(null==o||null===(n=o.maybeChild("membership_approval_mode"))||void 0===n||null===(r=n.maybeChild("group_join"))||void 0===r?void 0:r.maybeAttrString("state")),allowNonAdminSubGroupCreation:null==o?void 0:o.hasChild("allow_non_admin_sub_group_creation"),generalChatAutoAddDisabled:null!==(i=e.hasChild("auto_add_disabled"))&&void 0!==i?i:void 0};return{actionType:I.GROUP_NOTIFICATION_TAG.CREATE,reason:e.hasAttr("reason")?G[e.attrString("reason")]:null,contextGroupId:e.hasAttr("context_group_jid")?(0,P.groupJidToWid)(e.attrGroupJid("context_group_jid")):null,groupInfo:c}}(r);case I.GROUP_NOTIFICATION_TAG.ADD:return{actionType:S.GROUP_ACTIONS.ADD,participants:k(r),reason:r.hasAttr("reason")?G[r.attrString("reason")]:null,isLidAddressingMode:a};case I.GROUP_NOTIFICATION_TAG.DELETE:{const e={integrity_delete_parent:S.DELETE_REASON.INTEGRITY_DELETE_PARENT,delete_parent:S.DELETE_REASON.DELETE_PARENT};return{actionType:S.GROUP_ACTIONS.DELETE,reason:r.hasAttr("reason")?e[r.attrString("reason")]:null,groupDatas:[{id:t,subject:""}]}}case I.GROUP_NOTIFICATION_TAG.REMOVE:return{actionType:I.GROUP_NOTIFICATION_TAG.REMOVE,participants:k(r),reason:r.hasAttr("reason")?U[r.attrString("reason")]:null,isLidAddressingMode:a};case I.GROUP_NOTIFICATION_TAG.PROMOTE:return{actionType:I.GROUP_NOTIFICATION_TAG.PROMOTE,participants:k(r)};case I.GROUP_NOTIFICATION_TAG.DEMOTE:return{actionType:I.GROUP_NOTIFICATION_TAG.DEMOTE,participants:k(r)};case I.GROUP_NOTIFICATION_TAG.LINKED_GROUP_PROMOTE:return(0,o.default)({actionType:I.GROUP_NOTIFICATION_TAG.LINKED_GROUP_PROMOTE,participants:k(r)},l(r));case I.GROUP_NOTIFICATION_TAG.LINKED_GROUP_DEMOTE:return(0,o.default)({actionType:I.GROUP_NOTIFICATION_TAG.LINKED_GROUP_DEMOTE,participants:k(r)},l(r));case I.GROUP_NOTIFICATION_TAG.MODIFY:return{actionType:S.GROUP_ACTIONS.MODIFY,participants:k(r)};case I.GROUP_NOTIFICATION_TAG.SUBJECT:return{actionType:S.GROUP_ACTIONS.SUBJECT,subject:r.attrString("subject"),s_o:r.hasAttr("s_o")?(0,P.userJidToUserWid)(r.attrUserJid("s_o")):null,s_t:r.hasAttr("s_t")?r.attrTime("s_t"):null};case I.GROUP_NOTIFICATION_TAG.DESC:return r.hasChild("delete")?{actionType:S.GROUP_ACTIONS.DESC_REMOVE,descId:r.attrString("id")}:{actionType:S.GROUP_ACTIONS.DESC_ADD,descId:r.attrString("id"),desc:r.hasChild("body")?r.child("body").contentString():null,descTime:i};case I.GROUP_NOTIFICATION_TAG.SUSPENDED:return{actionType:S.GROUP_ACTIONS.SUSPEND,value:!0};case I.GROUP_NOTIFICATION_TAG.UNSUSPENDED:return{actionType:S.GROUP_ACTIONS.SUSPEND,value:!1};case I.GROUP_NOTIFICATION_TAG.LOCKED:return{actionType:S.GROUP_ACTIONS.RESTRICT,value:!0,threshold:null!==(c=r.maybeAttrString("threshold"))&&void 0!==c?c:void 0};case I.GROUP_NOTIFICATION_TAG.UNLOCKED:return{actionType:S.GROUP_ACTIONS.RESTRICT,value:!1};case I.GROUP_NOTIFICATION_TAG.ANNOUNCE:return{actionType:S.GROUP_ACTIONS.ANNOUNCE,value:!0};case I.GROUP_NOTIFICATION_TAG.NOT_ANNOUNCE:return{actionType:S.GROUP_ACTIONS.ANNOUNCE,value:!1};case I.GROUP_NOTIFICATION_TAG.NO_FREQUENTLY_FORWARDED:return{actionType:S.GROUP_ACTIONS.NO_FORWARD,value:!0};case I.GROUP_NOTIFICATION_TAG.FREQUENTLY_FORWARDED_OK:return{actionType:S.GROUP_ACTIONS.NO_FORWARD,value:!1};case I.GROUP_NOTIFICATION_TAG.INVITE:return{actionType:S.GROUP_ACTIONS.INVITE_CODE,code:r.attrString("code")};case I.GROUP_NOTIFICATION_TAG.EPHEMERAL:return{actionType:S.GROUP_ACTIONS.EPHEMERAL,duration:r.attrInt("expiration")};case I.GROUP_NOTIFICATION_TAG.NOT_EPHEMERAL:return{actionType:S.GROUP_ACTIONS.EPHEMERAL,duration:0};case I.GROUP_NOTIFICATION_TAG.REVOKE_INVITE:return{actionType:S.GROUP_ACTIONS.REVOKE_INVITE,participants:r.mapChildrenWithTag("participant",(e=>({id:(0,P.userJidToUserWid)(e.attrUserJid("jid")),expiration:e.attrInt("expiration")})))};case I.GROUP_NOTIFICATION_TAG.GROWTH_UNLOCKED:return{actionType:S.GROUP_ACTIONS.GROWTH_UNLOCKED};case I.GROUP_NOTIFICATION_TAG.GROWTH_LOCKED:return{actionType:S.GROUP_ACTIONS.GROWTH_LOCKED,expiration:r.attrInt("expiration"),type:r.attrString("type")};case I.GROUP_NOTIFICATION_TAG.LINK:{const e=r.attrString("link_type");return{actionType:{sub_group:S.GROUP_ACTIONS.SUB_GROUP_LINK,parent_group:S.GROUP_ACTIONS.PARENT_GROUP_LINK,sibling_group:S.GROUP_ACTIONS.SIBLING_GROUP_LINK}[e],groupDatas:r.mapChildrenWithTag("group",(e=>({id:(0,P.groupJidToWid)(e.attrGroupJid("jid")),subject:e.attrString("subject"),subjectTime:e.attrInt("s_t")})))}}case I.GROUP_NOTIFICATION_TAG.UNLINK:{const e=r.attrString("unlink_type"),t=r.hasAttr("unlink_reason")?r.attrString("unlink_reason"):null,n=r.mapChildrenWithTag("group",(e=>({id:(0,P.groupJidToWid)(e.attrGroupJid("jid")),subject:e.attrString("subject"),subjectTime:e.attrInt("s_t")})));if("parent_group"===e){if(t===S.DELETE_REASON.DELETE_PARENT)return{actionType:S.GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK,groupDatas:n};if(t===S.DELETE_REASON.INTEGRITY_DELETE_PARENT)return{actionType:S.GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK,groupDatas:n}}else if("sub_group"===e){if(t===S.DELETE_REASON.DELETE_PARENT)return{actionType:S.GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK,groupDatas:n};if(t===S.DELETE_REASON.INTEGRITY_DELETE_PARENT)return{actionType:S.GROUP_ACTIONS.INTEGRITY_SUB_GROUP_UNLINK,groupDatas:n}}return{actionType:{sub_group:S.GROUP_ACTIONS.SUB_GROUP_UNLINK,parent_group:S.GROUP_ACTIONS.PARENT_GROUP_UNLINK,sibling_group:S.GROUP_ACTIONS.SIBLING_GROUP_UNLINK}[e],groupDatas:n}}case I.GROUP_NOTIFICATION_TAG.MEMBERSHIP_APPROVAL_MODE:var p;return{actionType:S.GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE,value:"on"===(null===(p=r.child("group_join"))||void 0===p?void 0:p.attrString("state")),triggered:r.hasAttr("triggered")?r.attrString("triggered"):void 0};case I.GROUP_NOTIFICATION_TAG.MEMBERSHIP_APPROVAL_REQUEST:var f;return{actionType:S.GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST,requestMethod:null!==(f=x[r.attrString("request_method")])&&void 0!==f?f:R.RequestMethod.InviteLink,parentGroupId:r.hasAttr("parent_group_jid")?(0,P.groupJidToWid)(r.attrGroupJid("parent_group_jid")):void 0};case I.GROUP_NOTIFICATION_TAG.ALLOW_ADMIN_REPORTS:return{actionType:S.GROUP_ACTIONS.ALLOW_ADMIN_REPORTS,shouldSkipGenMsg:!(0,u.getABPropConfigValue)("report_to_admin_kill_switch"),value:!0,author:n,triggered:r.hasAttr("triggered")?r.attrString("triggered"):void 0};case I.GROUP_NOTIFICATION_TAG.NOT_ALLOW_ADMIN_REPORTS:return{actionType:S.GROUP_ACTIONS.ALLOW_ADMIN_REPORTS,shouldSkipGenMsg:!(0,u.getABPropConfigValue)("report_to_admin_kill_switch"),value:!1,author:n,triggered:r.hasAttr("triggered")?r.attrString("triggered"):void 0};case I.GROUP_NOTIFICATION_TAG.REPORTS:return{actionType:S.GROUP_ACTIONS.ADMIN_REPORT_RECIEVED,shouldSkipGenMsg:!0,value:i};case I.GROUP_NOTIFICATION_TAG.CREATED_MEMBERSHIP_REQUESTS:var _;return{actionType:S.GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS,requestMethod:null!==(_=x[r.attrString("request_method")])&&void 0!==_?_:R.RequestMethod.InviteLink,parentGroupId:r.hasAttr("parent_group_jid")?(0,P.groupJidToWid)(r.attrGroupJid("parent_group_jid")):void 0,requests:r.hasChildren()?r.mapChildrenWithTag("requested_user",(e=>(0,P.userJidToUserWid)(e.attrUserJid("jid")))):[(0,s.default)(n,"author")],skipGenMsg:"true"===r.maybeAttrString("suppress_sys_msg")};case I.GROUP_NOTIFICATION_TAG.REVOKED_MEMBERSHIP_REQUESTS:return{actionType:S.GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS,requests:r.mapChildrenWithTag("participant",(e=>(0,P.userJidToUserWid)(e.attrUserJid("jid"))))};case I.GROUP_NOTIFICATION_TAG.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:return{actionType:S.GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION,value:!0};case I.GROUP_NOTIFICATION_TAG.NOT_ALLOW_NON_ADMIN_SUB_GROUP_CREATION:return{actionType:S.GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION,value:!1};case I.GROUP_NOTIFICATION_TAG.CREATED_SUBGROUP_SUGGESTION:return(0,o.default)({actionType:S.GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION,parentGroupId:t},function(e){var t;const n=e.child("sub_group_suggestion"),r=(0,P.groupJidToWid)(n.attrGroupJid("jid")),i=(0,P.userJidToUserWid)(n.attrUserJid("creator")),o=n.attrTime("creation"),a=n.child("subject").contentString();let s,l,u;if(n.hasChild("description")){const e=n.child("description");if(e.hasChild("body")){const t=e.child("body");t.hasContent()&&(s=t.contentString())}}if(n.hasChild("is_existing_group")){const e=n.child("is_existing_group");e.hasContent()&&(l="true"===e.contentString())}if(n.hasChild("participant_count")){const e=n.child("participant_count");e.hasContent()&&(u=e.contentInt())}return{id:r,owner:i,subject:a,description:s,t:o,isExistingGroup:null!==(t=l)&&void 0!==t&&t,participantCount:u}}(r));case I.GROUP_NOTIFICATION_TAG.REVOKED_SUB_GROUP_SUGGESTIONS:return{actionType:S.GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS,parentGroupId:t,subgroupSuggestions:r.mapChildrenWithTag("sub_group_suggestion",(e=>({id:(0,P.groupJidToWid)(e.attrGroupJid("jid")),owner:(0,P.userJidToUserWid)(e.attrUserJid("creator")),reason:e.hasAttr("reason")?F[e.attrString("reason")]:void 0})))};case I.GROUP_NOTIFICATION_TAG.CHANGE_NUMBER:return{actionType:S.GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER,subgroupSuggestions:r.mapChildrenWithTag("sub_group_suggestion",(e=>(0,P.groupJidToWid)(e.attrGroupJid("jid")))),parentGroupId:t,oldOwner:(0,P.userJidToUserWid)(e.attrUserJid("participant")),newOwner:(0,P.userJidToUserWid)(r.attrUserJid("jid"))};case I.GROUP_NOTIFICATION_TAG.MEMBER_ADD_MODE:if((0,u.getABPropConfigValue)("web_anyone_can_add_group_setting_enabled"))return{actionType:S.GROUP_ACTIONS.MEMBER_ADD_MODE,memberAddMode:w.MemberAddMode.cast(r.contentString())};throw e.createParseError(`Unrecognized group action ${d}`);case I.GROUP_NOTIFICATION_TAG.AUTO_ADD_DISABLED:return{actionType:S.GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED};default:throw e.createParseError(`Unrecognized group action ${d}`)}}));return{externalId:e.attrString("id"),chatId:t,isLidAddressingMode:a,author:n,authorPhoneNumber:r,ts:e.attrTime("t"),pushname:e.hasAttr("notify")?e.attrString("notify"):null,offline:e.hasAttr("offline")?e.attrString("offline"):null,actions:c}}));function Y(){return j.apply(this,arguments)}function j(){return(j=(0,i.default)((function*(e){const[t,n]=yield Promise.all([(0,g.getGroupMetadata)(e),(0,N.getChatTable)().get(e.toString(),!1)]);return!!t||!!n&&!!n.t}))).apply(this,arguments)}function V(){return W.apply(this,arguments)}function W(){return(W=(0,i.default)((function*(e,t){return t.participants.some((e=>{let{id:t}=e;return t.isLid()}))&&!0===(yield(0,I.getIsIncognitoCagById)(e.chatId))?t.participants.filter((e=>{let{id:t}=e;return!t.isLid()})):t.participants}))).apply(this,arguments)}function H(e){let{author:t,authorPhoneNumber:n}=e;return null!=t?{id:t,phoneNumber:n}:null}function Q(){return $.apply(this,arguments)}function $(){return($=(0,i.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return;__LOG__(2,void 0,void 0,void 0,["groups"])`handle action ${t.actionType}`;const r=[];try{if(yield(0,_.createOrReplaceDisplayNamesAndLidPnMappings)([H(e)].concat(t.participants),!n),t.actionType===I.GROUP_NOTIFICATION_TAG.CREATE){const i=(0,o.default)((0,o.default)({},t.groupInfo),{},{id:e.chatId,isLidAddressingMode:e.isLidAddressingMode}),a=X(e,t,i),s=yield Y(i.id);__LOG__(2,void 0,void 0,void 0,["groups"])`group id ${i.id} exists in storage = ${s}`,yield J(e,i,n,a,"invite"===t.reason),__LOG__(2,void 0,void 0,void 0,["groups"])`handleGroupCreation done for group id ${i.id}`;const l=yield(0,y.genMsgsForGroupCreation)(e,i,s,a);r.push(...l)}else if(t.actionType===S.GROUP_ACTIONS.ADD){const i=yield(0,I.notAlreadyInGroup)(e.chatId,t.participants);if(yield(0,D.shouldTriggerQueryGroupInfo)(e.chatId,t))yield(0,m.queryAndUpdateGroupMetadataById)(e.chatId);else if(yield(0,L.updateDBForGroupAction)(e,t,n),q(e,t),i.length||t.reason){const n=yield V(e,t);n.length>0&&r.push(yield(0,y.genGroupNotificationMsg)(e,(0,o.default)((0,o.default)({},t),{},{participants:n})))}}else if(t.actionType===S.GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK||t.actionType===S.GROUP_ACTIONS.INTEGRITY_SUB_GROUP_UNLINK);else if(t.actionType===S.GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK||t.actionType===S.GROUP_ACTIONS.DELETE_PARENT_SUB_GROUP_UNLINK);else if(t.actionType===S.GROUP_ACTIONS.DELETE&&t.reason===S.DELETE_REASON.INTEGRITY_DELETE_PARENT){if((0,f.communitiesEnabled)()){(yield(0,y.genIntegrityDeleteParentNotificationMsgs)(e,t)).forEach((e=>{r.push(e)}))}yield(0,L.updateDBForGroupAction)(e,t,n),q(e,t)}else if(t.actionType===S.GROUP_ACTIONS.DESC_ADD||t.actionType===S.GROUP_ACTIONS.DESC_REMOVE)r.push(yield(0,y.genDescriptionNotificationMsg)(e,t)),yield(0,L.updateDBForGroupAction)(e,t,n),q(e,t);else if(t.actionType===S.GROUP_ACTIONS.DELETE&&t.reason===S.DELETE_REASON.DELETE_PARENT){if((0,f.communitiesEnabled)()){const t=yield(0,y.generateDeleteParentNotificationMessages)(e);if(0===t.length)return;t.forEach((e=>{r.push(e)}))}yield(0,L.updateDBForGroupAction)(e,t,n),q(e,t)}else{let i=!1;if(t.actionType===S.GROUP_ACTIONS.REMOVE&&(yield(0,D.shouldTriggerQueryGroupInfo)(e.chatId,t))&&(i=!0,(0,m.queryAndUpdateGroupMetadataById)(e.chatId)),!i){const i=yield(0,I.shouldSkipGenMsg)(e,t);if(yield(0,L.updateDBForGroupAction)(e,t,n),q(e,t),!i){const n=yield(0,c.isCurrentUserGroupAdmin)(e.chatId.toString());if(t.actionType===S.GROUP_ACTIONS.REMOVE){const i=yield V(e,t);i.length>0&&r.push(yield(0,y.genGroupNotificationMsg)((0,o.default)((0,o.default)({},e),{},{isAdmin:n}),(0,o.default)((0,o.default)({},t),{},{participants:i})))}else if(t.actionType===S.GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION){const n=yield(0,y.genCreatedSubgroupSuggestionNotificationMsg)(e,t);n&&r.push(n)}else if(t.actionType===S.GROUP_ACTIONS.PROMOTE||t.actionType===S.GROUP_ACTIONS.DEMOTE||t.actionType===S.GROUP_ACTIONS.MODIFY||t.actionType===S.GROUP_ACTIONS.LINKED_GROUP_PROMOTE||t.actionType===S.GROUP_ACTIONS.LINKED_GROUP_DEMOTE){const i=yield V(e,t);i.length>0&&r.push(yield(0,y.genGroupNotificationMsg)((0,o.default)((0,o.default)({},e),{},{isAdmin:n}),(0,o.default)((0,o.default)({},t),{},{participants:i})))}else if(t.actionType===S.GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION){const n=yield(0,y.genAllowNonAdminSubGroupCreationNotificationMsg)(e,t);n&&r.push(n)}else r.push(yield(0,y.genGroupNotificationMsg)((0,o.default)((0,o.default)({},e),{},{isAdmin:n}),t));t.actionType===S.GROUP_ACTIONS.PARENT_GROUP_LINK&&(0,u.getABPropConfigValue)("group_join_request_m0_anyone_can_join")&&r.push(yield(0,y.genParentGroupLinkMembershipApprovalNotif)(e,t.groupDatas,n))}}}n?(0,h.getMessageCache)().addMessages(r.map((e=>({msg:e}))),!1):yield Promise.all(r.map((e=>(0,M.handleSingleMsg)(e.from,e))))}catch(e){__LOG__(2)`handleGroupNotification: failed with ${e}`}}))).apply(this,arguments)}function q(e,t){return(0,d.frontendSendAndReceive)("updateModelForGroupAction",{groupMeta:e,groupAction:t})}function J(){return z.apply(this,arguments)}function z(){return(z=(0,i.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];yield(0,v.handleGroupCreation)(e,t,n,i),null!=r&&(yield(0,L.updateDBForGroupAction)(e,r,n),q(e,r))}))).apply(this,arguments)}function X(e,t,n){if(!(0,B.isMeAccount)(e.author)||t.reason===S.ADD_REASON.INVITE_AUTO_ADD){var r;const e=null===(r=n.participants.find((e=>e.id.equals((0,B.getMaybeMeUser)()))))||void 0===r?void 0:r.isAdmin;return{actionType:S.GROUP_ACTIONS.ADD,participants:[{id:!0===n.defaultSubgroup&&!0===n.incognito||!0===n.isLidAddressingMode?(0,B.getMaybeMeLidUser)():(0,B.getMaybeMeUser)(),isAdmin:e,isSuperAdmin:!1}],reason:t.reason,parentGroupId:n.parentGroup,isParentGroup:n.isParentGroup,contextGroupId:t.contextGroupId,groupName:n.subject,defaultSubgroup:n.defaultSubgroup,generalSubgroup:n.generalSubgroup}}}function Z(){return(Z=(0,i.default)((function*(e){if(!(0,u.getABPropConfigValue)("web_extra_lid_group_logging_attributes"))return;const t=yield(0,g.getGroupMetadata)(e);null!=t&&!0===t.defaultSubgroup&&!0===t.incognito&&!0===t.isLidAddressingMode&&(__LOG__(4,void 0,new Error,!0)`${e.toString()} is a CAG with LID addressing mode`,SEND_LOGS("GroupLidInfra/cag_lid_addressing_mode"))}))).apply(this,arguments)}},68281:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleE2eIdentityChange=function(e){const t=T.parse(e);if(t.error)return __LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,Promise.reject(t.error);const{wid:n,stanzaId:r,displayName:s,delay:p,lid:b,offline:M}=t.success,P=(0,a.wap)("ack",{to:(0,u.DEVICE_JID)(n),id:(0,a.CUSTOM_STRING)(r),class:"notification"});if(null!=n.device&&n.device!==o.DEFAULT_DEVICE_ID)return __LOG__(2)`handleNewIdentity: ignore identity change from companion device`,Promise.resolve(P);if((0,S.isMePrimary)(n))return(0,l.frontendFireAndForget)("handleSelfPrimaryIdentityChange",{}),Promise.resolve(P);const C=!!M&&!g.OfflineMessageHandler.isResumeFromRestartComplete();return(0,_.handleMessage)(String(n),C,(0,i.default)((function*(){yield(0,d.clearDeviceRecordForIdentityChange)(n,C);return(yield(0,y.getSignalProtocolStore)().loadIdentityKey((0,E.createSignalAddress)(n).toString()))&&(__LOG__(2)`handleE2eIdentityChange: ${n.toString()} has old identity, establishing new session`,yield m.Session.deleteRemoteInfo(n),(0,h.addSecurityCodeChangedNotifications)(n,C),(0,A.sendTcTokenWhenDeviceIdentityChange)(n),v.default.markStatusSenderKeyRotate([n]),C||(null!=p?(0,f.ensureE2ESessionsWithDelay)([n],p,!0):(0,f.ensureE2ESessions)([n],!0)),yield(0,c.createOrReplaceDisplayNamesAndLidPnMappings)([{id:(0,I.toUserWid)(n),lid:b?(0,I.toUserWid)(b):null,displayName:s}],!M)),P})))};var i=r(n(48926)),o=n(44037),a=n(42811),s=r(n(82601)),l=n(1619),u=n(11439),c=n(80780),d=n(98458),p=n(15610),f=n(25614),_=n(75674),g=n(1723),h=n(86584),A=n(86031),m=n(74600),E=n(49178),y=n(4830),S=n(3885),v=r(n(92640)),I=n(51017);const T=new s.default("identityChange",(e=>{e.assertTag("notification"),e.assertAttr("type","encrypt"),e.child("identity");const t=parseInt(e.maybeAttrString("delay"),10);return{wid:(0,p.deviceJidToDeviceWid)(e.attrDeviceJid("from")),stanzaId:e.attrString("id"),delay:Number.isFinite(t)&&t>0?t:null,displayName:e.maybeAttrString("display_name"),lid:e.hasAttr("lid")?(0,p.deviceJidToDeviceWid)(e.attrDeviceJid("lid")):null,offline:e.hasAttr("offline")?e.attrString("offline"):null}}))},46206:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePushname=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,l.toUserWid)(e);return u.enqueue((0,i.default)((function*(){let e;n||(e=yield c(r,t)),!0!==e&&void 0!==e||(__LOG__(2)`updatePushName: set pushname for ${r.toLogString()}`,(0,s.persistContactUpdateBatched)(r,{pushname:t}))})))};var i=r(n(48926)),o=n(39528),a=n(1619),s=n(42775),l=n(51017);const u=new o.PromiseQueue;function c(e,t){return(0,a.frontendSendAndReceive)("updatePushname",{contactId:e,pushname:t})}},35798:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.extractCertificateDetailsParams=function(e){return{serial:e.serial,name:e.verifiedName,isApi:"ent:wa"===e.issuer,isSmb:"smb:wa"===e.issuer}},t.getParsedProtoObjects=function(e){if(!e)return null;const t=(0,o.decodeProtobuf)(i.VerifiedNameCertificateSpec,e);if(!t.details)throw(0,a.default)("verifyCertificate cert missing details");const n=(0,o.decodeProtobuf)(i.VerifiedNameCertificate$DetailsSpec,t.details);return{cert:t,details:n}};var i=n(4012),o=n(33655),a=r(n(89482))},67594:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupCreation=function(){return g.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(93040),s=n(1619),l=n(98869),u=n(94645),c=n(83302),d=n(92143),p=n(46206),f=n(3885),_=n(49625);function g(){return(g=(0,o.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];__LOG__(2,void 0,void 0,void 0,["groups"])`inside handleGroupCreation`;const{chatId:o,author:g,pushname:h}=e,{id:A,participants:m,subject:E,creation:y}=t;null!=e.author&&e.author.equals((0,f.getMaybeMeUser)())||(new c.GroupJoinCWamEvent).commit(),g&&h&&(0,p.updatePushname)(g,h,n),yield Promise.all([(0,u.updateGroupMetadataTableJob)([t]),(0,d.updateParticipantsJob)({group:A,participants:m,isOffline:n,groupInfo:t})]),__LOG__(2,void 0,void 0,void 0,["groups"])`updated GroupMetadata and participants tables`,null!=(yield(0,a.getChatRecord)(o))?(0,s.frontendFireAndForget)("updateGroupSubject",{id:o,subject:E}):(yield(0,l.createChat)(o,"groupCreation",(0,i.default)({t:y,pendingInitialLoading:!1,createdLocally:!1},!0===r&&{notSpam:!0}),{createdOffline:n}),__LOG__(2,void 0,void 0,void 0,["groups"])`updated chat model and table`,(0,s.frontendFireAndForget)("updateContactName",{contactId:A,name:E})),(0,s.frontendFireAndForget)("setGroupMetadata",t),(0,s.frontendFireAndForget)("markProfilePicStale",{profilePicThumbWid:A}),n||(0,_.workerSafeFireAndForget)("maybeSendKeyDistributionMsgToNewGroup",{groupId:A})}))).apply(this,arguments)}},28728:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GROUP_NOTIFICATION_TAG=void 0,t.getIsIncognitoCagById=S,t.notAlreadyInGroup=function(){return y.apply(this,arguments)},t.shouldSkipGenMsg=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(83741),s=n(64002),l=n(1619),u=n(18106),c=n(22582),d=n(78440),p=n(98051),f=n(95160),_=n(3885),g=r(n(27112));const h=Object.freeze({REMOVE:"remove",ADD:"add",DEMOTE:"demote",DELETE:"delete",PROMOTE:"promote",MODIFY:"modify",CREATE:"create",SUBJECT:"subject",DESC:"description",LOCKED:"locked",UNLOCKED:"unlocked",ANNOUNCE:"announcement",NOT_ANNOUNCE:"not_announcement",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",FREQUENTLY_FORWARDED_OK:"frequently_forwarded_ok",INVITE:"invite",EPHEMERAL:"ephemeral",NOT_EPHEMERAL:"not_ephemeral",REVOKE_INVITE:"revoke",SUSPENDED:"suspended",UNSUSPENDED:"unsuspended",GROWTH_LOCKED:"growth_locked",GROWTH_UNLOCKED:"growth_unlocked",LINK:"link",UNLINK:"unlink",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",MEMBERSHIP_APPROVAL_REQUEST:"membership_approval_request",CREATED_MEMBERSHIP_REQUESTS:"created_membership_requests",REVOKED_MEMBERSHIP_REQUESTS:"revoked_membership_requests",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",NOT_ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"not_allow_non_admin_sub_group_creation",ALLOW_ADMIN_REPORTS:"allow_admin_reports",NOT_ALLOW_ADMIN_REPORTS:"not_allow_admin_reports",REPORTS:"reports",CREATED_SUBGROUP_SUGGESTION:"created_sub_group_suggestion",REVOKED_SUB_GROUP_SUGGESTIONS:"revoked_sub_group_suggestions",CHANGE_NUMBER:"change_number",MEMBER_ADD_MODE:"member_add_mode",AUTO_ADD_DISABLED:"auto_add_disabled"});function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t){var n;const r=yield(0,c.getGroupMetadata)(e);return!!r&&r.growthLockType===t&&(null!==(n=r.growthLockExpiration)&&void 0!==n?n:0)>(0,o.unixTime)()}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t){if(t.actionType===p.GROUP_ACTIONS.REVOKE_INVITE||t.actionType===p.GROUP_ACTIONS.SUSPEND||t.actionType===p.GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS||t.actionType===p.GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS||t.actionType===p.GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER)return!0;if(t.actionType===p.GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION&&!(0,u.memberAddedGroupsM1Enabled)())return!0;if(t.actionType===p.GROUP_ACTIONS.GROWTH_LOCKED||t.actionType===p.GROUP_ACTIONS.GROWTH_UNLOCKED){if(t.actionType===p.GROUP_ACTIONS.GROWTH_LOCKED){if("invite"!==t.type)return!0;if(yield A(e.chatId,t.type))return!0}return!(yield(0,s.isCurrentUserGroupAdmin)(e.chatId.toString()))}if((t.actionType===p.GROUP_ACTIONS.SUB_GROUP_LINK||t.actionType===p.GROUP_ACTIONS.PARENT_GROUP_LINK||t.actionType===p.GROUP_ACTIONS.SIBLING_GROUP_LINK||t.actionType===p.GROUP_ACTIONS.SUB_GROUP_UNLINK||t.actionType===p.GROUP_ACTIONS.SIBLING_GROUP_UNLINK||t.actionType===p.GROUP_ACTIONS.PARENT_GROUP_UNLINK||t.actionType===p.GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK||t.actionType===p.GROUP_ACTIONS.DELETE_PARENT_GROUP||t.actionType===p.GROUP_ACTIONS.LINKED_GROUP_PROMOTE||t.actionType===p.GROUP_ACTIONS.LINKED_GROUP_DEMOTE)&&!(0,u.communitiesEnabled)())return!0;if((0,u.communitiesEnabled)()&&(t.actionType===p.GROUP_ACTIONS.PROMOTE||t.actionType===p.GROUP_ACTIONS.DEMOTE)&&!0===(yield S(e.chatId)))return!0;if(t.actionType===p.GROUP_ACTIONS.PROMOTE||t.actionType===p.GROUP_ACTIONS.DEMOTE){if(!(1===t.participants.length&&(0,_.isMeAccount)(t.participants[0].id)))return!0}if(t.actionType===p.GROUP_ACTIONS.LINKED_GROUP_DEMOTE&&1===t.participants.length&&!(0,_.isMeAccount)(t.participants[0].id)){if(!(yield(0,s.isCurrentUserGroupAdmin)(e.chatId.toString())))return!0}if(t.actionType===p.GROUP_ACTIONS.REMOVE&&1===t.participants.length&&g.default.equals(e.author,t.participants[0].id)){const t=yield(0,s.isCurrentUserGroupAdmin)(e.chatId.toString()),n=(0,_.isMeAccount)(e.author);if(!t||n)return!0}if(t.actionType===p.GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION){if(!(yield(0,s.isCurrentUserGroupAdmin)(e.chatId.toString()))||!0===t.isExistingGroup&&!(0,u.memberSuggestedGroupsM3ReceiverEnabled)())return!0}if(t.actionType===p.GROUP_ACTIONS.DELETE){const n=yield(0,c.getGroupMetadata)(e.chatId),r=null!=n?(0,p.getGroupTypeFromGroupMetadata)(n):null;return(t.reason!==p.DELETE_REASON.INTEGRITY_DELETE_PARENT||r!==p.GroupType.LINKED_ANNOUNCEMENT_GROUP||!(0,a.getABPropConfigValue)("community_suspend_v0_enabled"))&&(t.reason===p.DELETE_REASON.DELETE_PARENT&&p.GroupType.LINKED_ANNOUNCEMENT_GROUP,!0)}if(t.actionType===((0,a.getABPropConfigValue)("group_join_request_m3")?p.GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST:p.GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS))return!0;if((0,a.getABPropConfigValue)("web_anyone_can_add_group_setting_enabled")&&t.actionType===p.GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS){if(!(yield(0,s.isCurrentUserGroupAdmin)(e.chatId.toString())))return!0}if(t.actionType===p.GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS&&t.skipGenMsg)return!0;if(t.actionType===p.GROUP_ACTIONS.ALLOW_ADMIN_REPORTS&&!0===t.shouldSkipGenMsg)return!0;if(t.actionType===p.GROUP_ACTIONS.ADMIN_REPORT_RECIEVED&&!0===t.shouldSkipGenMsg)return!0;if((t.actionType===p.GROUP_ACTIONS.REMOVE||t.actionType===p.GROUP_ACTIONS.PROMOTE||t.actionType===p.GROUP_ACTIONS.DEMOTE||t.actionType===p.GROUP_ACTIONS.MODIFY)&&!0===(yield S(e.chatId)))return!0;if(t.actionType===p.GROUP_ACTIONS.LINKED_GROUP_PROMOTE||t.actionType===p.GROUP_ACTIONS.LINKED_GROUP_DEMOTE){if(t.participants.every((e=>{let{id:t}=e;return t.isLid()})))return!0}return!1}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){var n,r;if(!(0,f.isWorker)())return(0,l.frontendSendAndReceive)("notAlreadyInGroup",{groupId:e,participants:t});const i=new Set(null!==(n=null===(r=yield(0,d.getParticipants)(e))||void 0===r?void 0:r.participants)&&void 0!==n?n:[]);return t.filter((e=>{let{id:t}=e;return!i.has(String(t))}))}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){const t=yield(0,c.getGroupMetadata)(e);return null!=t&&!0===t.defaultSubgroup&&!0===t.incognito}))).apply(this,arguments)}t.GROUP_NOTIFICATION_TAG=h},85783:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupNotificationV2=function(){return E.apply(this,arguments)},t.isGroupNotificationOptimizationEligible=function(e,t){return null!=y(e,t)};var i=r(n(81109)),o=r(n(48926)),a=n(42811),s=n(1619),l=n(46316),u=n(11439),c=n(91360),d=n(94645),p=n(42469),f=n(28728),_=n(5707),g=n(75674),h=n(23670),A=n(27176);function m(e){return(0,a.wap)("ack",{to:(0,u.GROUP_JID)(e.chatId),id:(0,a.CUSTOM_STRING)(e.externalId),class:"notification",type:"w:gp2",participant:e.author?(0,u.USER_JID)(e.author):a.DROP_ATTR})}function E(){return(E=(0,o.default)((function*(e,t){const n=y(e,t);return null==n?(__LOG__(3)`no handler for group notification ${e.chatId.toLogString()}`,m(e)):(yield Promise.all([n.writeSystemMessages(),n.writeGroupInfoUpdates()]),m(e))}))).apply(this,arguments)}function y(e,t){const n=[];for(const t of e.actions){const r=a(e,t);if(null==r)return null;n.push(r)}return{writeSystemMessages:(i=(0,o.default)((function*(){yield Promise.all(n.map((e=>e.writeSystemMessages())))})),function(){return i.apply(this,arguments)}),writeGroupInfoUpdates:(r=(0,o.default)((function*(){yield Promise.all(n.map((e=>e.writeGroupInfoUpdates())))})),function(){return r.apply(this,arguments)})};var r,i;function a(e,n){return n.actionType===f.GROUP_NOTIFICATION_TAG.CREATE?null:{writeGroupInfoUpdates:(i=(0,o.default)((function*(){n.actionType!==f.GROUP_NOTIFICATION_TAG.ADD&&n.actionType!==f.GROUP_NOTIFICATION_TAG.REMOVE||!(yield(0,h.shouldTriggerQueryGroupInfo)(e.chatId,n))?(yield(0,A.updateDBForGroupAction)(e,n,t),(0,s.frontendSendAndReceive)("updateModelForGroupAction",{groupMeta:e,groupAction:n})):(0,d.markGroupParticipantStaleJob)(e.chatId)})),function(){return i.apply(this,arguments)}),writeSystemMessages:(r=(0,o.default)((function*(){return function(e,t,n,r){let i=()=>{};const a=new Promise((e=>i=e));return(0,g.handleMessage)(e.toString(),n,(0,o.default)((function*(){if(yield r())return void i();const e=u(t).then((()=>{i()}));return n?Promise.resolve():e}))),a;function u(){return d.apply(this,arguments)}function d(){return(d=(0,o.default)((function*(e){if(0!==e.length)return n?(l.Cmd.isMainStreamReadyMd&&e.forEach((e=>{(0,s.frontendFireAndForget)("updateMessageUI",{chatId:e.id.remote,msg:e})})),(0,c.getMessageCache)().addMessages(e.map((e=>({msg:e}))),!1)):void(yield Promise.all(e.map((e=>(0,_.handleSingleMsg)(e.from,e)))))}))).apply(this,arguments)}}(e.chatId,yield function(){return S.apply(this,arguments)}(e,n),t,(()=>(0,f.shouldSkipGenMsg)(e,n)))})),function(){return r.apply(this,arguments)})};var r,i}}function S(){return(S=(0,o.default)((function*(e,t){let n=[];if((t.actionType===f.GROUP_NOTIFICATION_TAG.ADD||t.actionType===f.GROUP_NOTIFICATION_TAG.REMOVE)&&(yield(0,h.shouldTriggerQueryGroupInfo)(e.chatId,t)))return[];if(t.actionType===f.GROUP_NOTIFICATION_TAG.ADD){const r=(yield(0,f.notAlreadyInGroup)(e.chatId,t.participants)).filter((e=>{let{id:t}=e;return!t.isLid()}));r.length>0&&(n=[yield(0,p.genGroupNotificationMsg)(e,(0,i.default)((0,i.default)({},t),{},{participants:r}))])}else t.actionType!==f.GROUP_NOTIFICATION_TAG.CREATE&&(n=[yield(0,p.genGroupNotificationMsg)(e,t)]);return n}))).apply(this,arguments)}},75635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupsDirtyNotificationJob=function(e){const{makeGroupsDirtyNotificationResponseAck:t,parsedRequest:n}=(0,r.receiveGroupsDirtyNotificationRPC)(e);__LOG__(2)`handleGroupsDirtyNotification: received groups dirty bit notification`;return o(n.groupsDirtyGroup.map((e=>e.jid))),t()},t.queryAndUpdateDirtyGroupsMetadata=o;var r=n(22043),i=n(29409);function o(e){(0,n(74e3).getJobManager)().fireAndForget(i.jobSerializers.queryAndUpdateGroupsMetadataByJids(e))}},6684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAddressingModeMismatch=function(e,t){if(!(0,r.getABPropConfigValue)("lid_groups_handle_server_addressing_mode"))return!1;if(!0===Boolean(e.defaultSubgroup))return!1;return Boolean(t.isLidAddressingMode)!==Boolean(e.isLidAddressingMode)};var r=n(83741)},50664:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPnhCagInLimboState=function(e,t){if(!(0,r.pnhCagBlockLidInLimbo)())return!1;if(!t.some((e=>{let{id:t}=e;return t.isLid()})))return!1;if(!0!==e.defaultSubgroup)return!1;return!0!==(null==e?void 0:e.incognito)};var r=n(67454)},23670:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldTriggerQueryGroupInfo=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(6684),a=n(50664),s=n(35872);function l(){return(l=(0,i.default)((function*(e,t){const n=yield(0,s.getGroupMetadataTable)().get(e.toString());return null!=n&&(!1===Boolean(n.defaultSubgroup)?(0,o.isAddressingModeMismatch)(n,t):(0,a.isPnhCagInLimboState)(n,t.participants))}))).apply(this,arguments)}},56812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INFO_TYPE=void 0;const n=Object.freeze({DIRTY:"dirty",ROUTING:"edge_routing",OFFLINE:"offline",OFFLINE_PREVIEW:"offline_preview",TOS:"tos",THREAD_META:"thread_metadata",CLIENT_EXPIRATION:"client_expiration",OFFLINE_PRIORITY_COMPLETE:"priority_offline_complete"});t.INFO_TYPE=n},41581:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DOMAINS=void 0,t.handleRoutingInfo=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(65982),a=n(56333);const s={fb:"fb",sl:"sl"};function l(){return(l=(0,i.default)((function*(e){let t=e.domain;if(!t){const e=yield(0,a.getRoutingInfo)();t=e?e.domain:s.fb}const n=(0,o.bytesToBuffer)(e.edgeRouting);yield(0,a.setRoutingInfo)({domain:t,edgeRouting:n}),__LOG__(2)`handleInfoBulletin setting and domain: ${t} and edgeRouting:`}))).apply(this,arguments)}t.DOMAINS=s},67865:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return P.apply(this,arguments)};var i=r(n(48926)),o=n(85739),a=n(29987),s=n(12020),l=n(99224),u=n(91360),c=n(33351),d=n(24513),p=n(62086),f=n(52253),_=n(8826),g=n(12987),h=n(25976),A=n(35765),m=n(36632),E=n(75674),y=n(67621),S=n(98267),v=n(73602),I=n(1723),T=n(17067),b=n(11206),M=n(25810);function P(){return(P=(0,i.default)((function*(e){const t=p.incomingMsgParser.parse(e);if(t.error){var n;__LOG__(3,void 0,void 0,void 0,["messaging"])`handleMsg: error while parsing message stanza`,(0,b.postUnknownStanzaMetric)(e);const r=p.incomingMsgParserForAckOnly.parse(e);if(r.error)return __LOG__(2,void 0,void 0,void 0,["messaging"])`handleMsg: error while parsing message for ack only: ${r.error}`,(0,T.postIncomingMessageDropInvalidStanza)(e),Promise.resolve((0,s.createNackFromStanza)(e,s.NackReason.ParsingError));const{type:i,externalId:a,msgInfo:l,offline:u}=r.success;let c=s.NackReason.ParsingError;return null==i?(c=s.NackReason.UnrecognizedStanzaType,(0,T.postIncomingMessageDropUnknownMessageType)(e)):t.error instanceof o.XmppParsingFailure&&(null===(n=t.error)||void 0===n?void 0:n.reason)===`${s.NackReason.InvalidHostedCompanionStanza}`?(c=s.NackReason.InvalidHostedCompanionStanza,(0,T.postIncomingMessageDropInvalidHostedCompanionStanza)(e)):(0,T.postIncomingMessageDropInvalidStanza)(e),(0,m.maybeInsertDebugPlaceholder)({externalId:a,nackReason:c,msgInfo:l,offline:u}),Promise.resolve((0,s.createNackFromStanza)(e,c))}const r=t.success;(0,h.maybePostOfflineCountTooHigh)(r);const{msgMeta:d,msgInfo:P,msgBotInfo:O,encs:R}=r,N=(0,y.messageInfoToKey)(P);return P.clientReceivedTsMillis=(0,a.unixTimeMs)(),null!=P.offline&&(I.OfflineMessageHandler.addOfflinePendingMessage(),I.OfflineMessageHandler.offlineStanzaReceivedAfterComplete(),(0,A.isMessageDedupEnabled)()&&(0,A.isMessagePending)(N,P.ts,R))?(__LOG__(2)`message-dedup: skip progressing duplicate`,void I.OfflineMessageHandler.processMessageDecryptResult(g.E2EProcessResult.SUCCESS)):((0,A.isMessageDedupEnabled)()&&(0,A.addToPendingMessage)(N,P.ts,R),I.OfflineMessageHandler.isResumeFromRestartComplete()&&delete r.msgInfo.offline,(0,E.handleMessage)(P.chat.toString(),!!r.msgInfo.offline,(0,i.default)((function*(){var e;if(P.msgProcessStartTsMillis=(0,a.unixTimeMs)(),(0,M.processPhoneNumberMapping)(P,d,null==P.offline),d.isUnavailable){(0,l.maybeStoreReportingTag)(N,r.reportingTokenInfo),__LOG__(2,void 0,void 0,void 0,["messaging"])`handleMessage: msgId::${P.externalId}, get fanout placeholder`;let e=g.PlaceholderType.FANOUT;return null!=O?e=g.PlaceholderType.BOT_UNAVAILABLE_FANOUT:!0===d.isHostedMsgUnavailable&&(e=g.PlaceholderType.HOSTED_UNAVAILABLE_FANOUT),yield(0,f.processPlaceholderMsg)({type:v.MSG_TYPE.CIPHERTEXT,msgInfo:P,placeholderType:e}),(0,_.sendReceipt)(P,d,{result:g.E2EProcessResult.BACKFILL}),void((0,A.isMessageDedupEnabled)()&&(0,A.removeFromPendingMessage)(N,P.ts,R))}__LOG__(2,void 0,void 0,void 0,["messaging"])`handleMessage: msgId::${P.externalId}, start processing message, offline="${null!==(e=P.offline)&&void 0!==e?e:""}"`;const t=yield(0,S.decryptE2EPayload)(r,f.processDecryptedMessageProto);null!=P.offline&&I.OfflineMessageHandler.processMessageDecryptResult(t.result),t.result!==g.E2EProcessResult.SUCCESS&&(0,l.maybeStoreReportingTag)(N,r.reportingTokenInfo),t.result===g.E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR&&C(r)?(0,u.getMessageCache)().addMessages([{duplicateMsgReceiptInfo:{externalId:P.externalId,from:(0,y.getFrom)(P),author:P.author,msgInfo:P,msgMeta:d,enc:t.failedEnc||R[0],hasHideFailEnc:R.some((e=>e.hideFail))}}],null==P.offline).finally((()=>{(0,A.isMessageDedupEnabled)()&&(0,A.removeFromPendingMessage)(N,P.ts,R)})):null==P.offline||P.category===c.CATEGORY_PEER||t.result!==g.E2EProcessResult.SUCCESS&&t.result!==g.E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR?((0,_.sendReceipt)(P,d,t),(0,A.isMessageDedupEnabled)()&&(0,A.removeFromPendingMessage)(N,P.ts,R)):(0,u.getMessageCache)().addMessages([{receiptInfo:{externalId:P.externalId,from:(0,y.getFrom)(P),author:P.author}}],!1).finally((()=>{(0,A.isMessageDedupEnabled)()&&(0,A.removeFromPendingMessage)(N,P.ts,R)}))}))))}))).apply(this,arguments)}function C(e){const{msgMeta:t,encs:n}=e;return n.some((e=>e.hideFail))?(0,d.isReactionMsgMeta)(t)||(0,d.isPollVoteMsgMeta)(t):t.type===c.STANZA_MSG_TYPES.text||t.type===c.STANZA_MSG_TYPES.media||t.type===c.STANZA_MSG_TYPES.poll}},33351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STANZA_MSG_TYPES=t.STANZA_MSG_ORIGIN=t.STANZA_MSG_ADDRESSING_MODE=t.POLL_TYPES=t.PAY_NODE_TYPES=t.MSG_VERIFIED_LEVEL=t.HsmMismatchError=t.EVENT_TYPES=t.CATEGORY_PEER=t.BIZ_SOURCE_ATTR=void 0;var r=n(66911);t.STANZA_MSG_TYPES={text:"text",media:"media",pay:"pay",poll:"poll",reaction:"reaction",event:"event"};t.STANZA_MSG_ORIGIN={ctwa:"ctwa",username:"username"};t.STANZA_MSG_ADDRESSING_MODE={pn:"pn",lid:"lid"};t.POLL_TYPES={creation:"creation",vote:"vote"};t.EVENT_TYPES={creation:"creation",response:"response",edit:"edit"};t.MSG_VERIFIED_LEVEL={high:"high",low:"low",unknown:"unknown"};t.CATEGORY_PEER="peer";class i extends((0,r.customError)("HSMMismatchError")){}t.HsmMismatchError=i;t.PAY_NODE_TYPES={send:"send",request:"request",futureproof:"futureproof","request-decline":"request-decline","request-cancel":"request-cancel",invite:"invite"};t.BIZ_SOURCE_ATTR="biz_source"},22495:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMessageDropValidationEnabled=t.UnknownDeviceMessageError=t.MessageValidationError=t.MessageSentAckError=t.MessageProtobufMismatchErrorCode=t.MessageProtobufMismatchError=t.MessageProtobufInvalidMessageTypes=t.DeviceSentMessageError=t.BizNodeValidationError=void 0;var r=n(66911),i=n(83741),o=n(77426),a=n(59032),s=n(57095);class l extends((0,r.customError)("DeviceSentMessageError")){constructor(e,t){t===a.DSM_ERROR.MISSING_DSM?super("message should be deviceSentMessage"):t===a.DSM_ERROR.INVALID_SENDER?super("message should not be deviceSentMessage"):t===a.DSM_ERROR.INVALID_DSM?super("invalid deviceSentMessage"):super("unknown deviceSentMessage error"),new o.MdBadDeviceSentMessageWamEvent({peerType:e,dsmError:t}).commit(),this.peerType=e,this.dsmError=t}}t.DeviceSentMessageError=l;class u extends((0,r.customError)("UnknownDeviceMessageError")){}t.UnknownDeviceMessageError=u;class c extends((0,r.customError)("MessageValidationError")){constructor(e,t,n){var r;super("string"==typeof e?e:String(e)),this.code=e,this.e2eFailureReason=t,this.sendLogs=null===(r=null==n?void 0:n.sendLogs)||void 0===r||r}}t.MessageValidationError=c;class d extends((0,r.customError)("MessageSentAckError")){constructor(e){super(`Received Nack error code ${null!=e?e:""} from Server on message sent`),this.ackErrorCode=e}}t.MessageSentAckError=d;class p extends((0,r.customError)("BizNodeValidationError")){}t.BizNodeValidationError=p;const f=n(76672)({INVALID_POLL_UPDATE_STANZA:"poll_update_message_stanza_invalid",INVALID_REACTION_STANZA:"reaction_message_stanza_invalid",INVALID_PIN_IN_CHAT_STANZA:"pin_in_chat_message_stanza_invalid",INVALID_COMMENT_STANZA:"comment_message_stanza_invalid",INVALID_EVENT_RESPONSE_STANZA:"event_response_message_stanza_invalid",INVALID_EVENT_EDIT_STANZA:"event_edit_message_stanza_invalid"});t.MessageProtobufMismatchErrorCode=f;t.MessageProtobufMismatchError=class extends c{constructor(e){super(e,s.E2E_FAILURE_REASON.MESSAGE_TYPE_MISMATCH),this.name="MessageProtobufMismatchError"}};t.MessageProtobufInvalidMessageTypes=class extends c{constructor(e){super(`Received ${e.length} message keys: ${e.join(", ")}`,s.E2E_FAILURE_REASON.INVALID_NUMBER_OF_MESSAGE_TYPES),this.name="MessageProtobufInvalidMessageTypes"}};t.isMessageDropValidationEnabled=e=>"outgoing"===e?(0,i.getABPropConfigValue)("web_abort_building_e2e_proto_on_error"):"relay"===e&&(0,i.getABPropConfigValue)("web_abort_decrypting_e2e_on_error")},62086:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.incomingMsgParserForAckOnly=t.incomingMsgParser=void 0,t.parseBizInfo=C,t.parseMessageBotInfo=P,t.parseMessageInfo=b,t.parseMessageMeta=M;var i=r(n(81109)),o=r(n(82601)),a=r(n(49619)),s=n(85739),l=n(96193),u=n(41404),c=n(63007),d=n(42467),p=n(12020),f=n(33351),_=n(12987),g=n(76989),h=n(15610),A=n(19909),m=n(30883),E=n(45665),y=n(38601),S=n(79251),v=n(3885),I=n(51017);const T=new o.default("incomingMsgParser",(e=>{var t,n;e.assertTag("message"),e.hasAttr("to")&&e.assertAttr("to",(0,v.assertGetMe)().toJid());const r=e.maybeChild("plaintext");null!=r&&r.throw("not to be present in e2ee messages");const i=e.mapChildrenWithTag("enc",(e=>({e2eType:e.attrEnumValues("type",l.CiphertextType.members()),encMediaType:l.EncMediaType.cast(e.maybeAttrString("mediatype")),ciphertext:e.contentBytes(),retryCount:e.hasAttr("count")?e.attrInt("count"):0,hideFail:"hide"===e.maybeAttrString("decrypt-fail")}))),o=e.maybeChild("device-identity"),a=o?o.contentBytes():null,s=P(e),u=M(e,i),c=b(e,i,s,u),d=C(e,c),p=function(e){let t=null;const n=e.hasChild("pay")?e.child("pay"):null,r=e.hasChild("transaction")?e.child("transaction"):null,i=(0,h.jidWithTypeToWid)(e.attrJidWithType("from")).isGroup(),o=e.hasAttr("participant")?(0,h.jidWithTypeToWid)(e.attrJidWithType("participant")):null;if((0,m.isNoviTransaction)(n)||(0,m.isNoviTransaction)(r))t={futureproofed:!0};else if(r){const e=(0,m.parseTransactionNode)(r);e&&(t=O(i,o,(0,I.createWid)(e.receiver.toString()))?{receiverJid:e.receiver.toString(),currency:e.currency,amount1000:e.amount1000,transactionTimestamp:e.ts,txnStatus:(0,E.getPaymentTxnWebStatus)(e.status)}:{receiverJid:e.receiver.toString(),currency:e.currency,amount1000:e.amount1000,transactionTimestamp:e.ts})}else if(n){switch(n.attrEnum("type",f.PAY_NODE_TYPES)){case f.PAY_NODE_TYPES.send:{const{amount1000:r,currency:a}=(0,g.getAmount1000AndCurrency)(n),s=n.hasAttr("receiver")?n.attrString("receiver"):e.attrString("recipient");t=O(i,o,(0,I.createWid)(s))?{receiverJid:s,currency:a,amount1000:r,transactionTimestamp:e.attrInt("t"),txnStatus:y.PaymentInfo$TxnStatus.INIT}:{receiverJid:s,currency:a,amount1000:r,transactionTimestamp:e.attrInt("t")};break}case f.PAY_NODE_TYPES.request:case f.PAY_NODE_TYPES.invite:}}return t}(e),_=function(e){const t=e.maybeChild("hsm");if(null!=t){const e=t.maybeAttrString("tag"),n=t.maybeAttrString("category");if(null!=e||null!=n)return{tag:e,category:n}}return null}(e),S=function(e){if(!(0,A.isReportingTokenReceivingEnabled)())return null;const t=e.maybeChild("reporting");if(null==t)return null;const n={},r=t.maybeChild("reporting_token"),i=t.maybeChild("reporting_tag");null!=r&&(n.reportingToken=r.contentBytes());null!=i&&(n.reportingTag=i.contentBytes());return n}(e);return{encs:i,msgInfo:c,msgMeta:u,bizInfo:d,hsmInfo:_,paymentInfo:p,deviceIdentity:a,rcat:null!==(t=null===(n=e.maybeChild("rcat"))||void 0===n?void 0:n.contentBytes())&&void 0!==t?t:null,msgBotInfo:s,reportingTokenInfo:S}}));function b(e,t,n,r){const o={externalId:e.attrString("id"),ts:e.attrTime("t"),edit:e.hasAttr("edit")?e.attrInt("edit"):-1,isHsm:e.hasChild("hsm"),count:e.hasAttr("count")?e.attrInt("count"):null,pushname:e.hasAttr("notify")?e.attrString("notify"):null,username:e.hasAttr("username")?e.attrString("username"):null,displayName:e.hasAttr("display_name")?e.attrString("display_name"):null,senderPn:e.hasAttr("sender_pn")?(0,h.userJidToUserWid)(e.attrUserJid("sender_pn")):null,senderLid:e.hasAttr("sender_lid")?(0,h.userJidToUserWid)(e.attrUserJid("sender_lid")):null,recipientLid:e.hasAttr("recipient_lid")?(0,h.userJidToUserWid)(e.attrUserJid("recipient_lid")):null,recipientPn:e.hasAttr("recipient_pn")?(0,h.userJidToUserWid)(e.attrUserJid("recipient_pn")):null,recipientUsername:e.hasAttr("recipient_username")?e.attrString("recipient_username"):null,participantLid:e.hasAttr("participant_lid")?(0,h.userJidToUserWid)(e.attrLidUserJid("participant_lid")):null,participantPn:e.hasAttr("participant_pn")?(0,h.userJidToUserWid)(e.attrUserJid("participant_pn")):null,category:e.hasAttr("category")?e.attrString("category"):null,offline:e.hasAttr("offline")?e.attrString("offline"):null},d=(0,h.jidWithTypeToWid)(e.attrJidWithType("from"));d.isNewsletter()&&e.throw("unexpected `from` attribute with newsletter Jid");const g=e.hasAttr("participant")?(0,h.deviceJidToDeviceWid)(e.attrDeviceJid("participant")):null,A=e.hasAttr("recipient")?(0,h.userJidToUserWid)(e.attrUserJid("recipient")):null;if((0,u.bizHostedDevicesEnabled)()){if(Boolean((null==g?void 0:g.isHosted())&&(d.isStatusV3()||d.isGroup()||d.isBroadcast())))throw new s.XmppParsingFailure("incomingMsgParser",`${p.NackReason.InvalidHostedCompanionStanza}`)}const m=t.every((e=>e.e2eType!==l.CiphertextType.Skmsg)),E=t.some((e=>e.retryCount>0)),y=d.isGroup()||d.isBroadcast()?g:d;if(null!=A&&null!=y&&!(0,v.isMeAccount)(y))return e.throw("Invalid recipient from non peer device");let T;const b={},M=e.maybeChild("participants");if(M){const e=[];M.forEachChildWithTag("to",(t=>{const n=(0,h.deviceJidToDeviceWid)(t.attrDeviceJid("jid")),r=t.maybeAttrString("eph_setting");e.push(n),null!=r&&(b[n.toString()]=r)})),T=e}if((0,c.isBotMsgParseEnabledForFutureproofOrFullRecv)()&&n&&r&&d.isBot()&&null!=r.targetChatJid)return(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.CHAT},o),{},{chat:(0,I.toUserWid)((0,a.default)(r.targetChatJid,"msgMeta.targetChatJid")),author:d,botParticipant:d});if(d.isUser())return null!=A?(0,v.isMeAccount)(d)?(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.CHAT},o),{},{chat:(0,I.toUserWid)(A),author:d}):e.throw("recipient on non peer chat message"):(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.CHAT},o),{},{chat:(0,I.toUserWid)(d),author:d});if(d.isGroup()){if(null==g)return e.throw("group message with no participant");const t=e.attrEnumOrDefault("addressing_mode",f.STANZA_MSG_ADDRESSING_MODE,f.STANZA_MSG_ADDRESSING_MODE.pn);return(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.GROUP},o),{},{chat:d,author:g,isDirect:m,addressingMode:t})}if(d.isBroadcast()&&!d.isStatusV3()){if(null==g)return e.throw("broadcast message with no participant");if((0,v.isMeAccount)(g)){if(null==T){if(!E)return e.throw("peer broadcast message with no participants node");T=[]}return(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.PEER_BROADCAST},o),{},{chat:d,author:g,isDirect:m,bclParticipants:T,bclHashValidated:!1,bclEphSettings:b})}return(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.OTHER_BROADCAST},o),{},{chat:d,author:g,isDirect:m,ephSetting:e.maybeAttrString("eph_setting")})}if(d.isBroadcast()&&d.isStatusV3()){if(null==g)return e.throw("status message with no participant");let t;var P,C;if((0,S.isStatusPostingEnabled)())t=null!==(P=null===(C=e.maybeChild("meta"))||void 0===C?void 0:C.maybeAttrString("status_setting"))&&void 0!==P?P:void 0;return(0,v.isMeAccount)(g)&&m?null==T?(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.DIRECT_PEER_STATUS},o),{},{chat:d,author:g,isDirect:m,statusSetting:t}):(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.DIRECT_PEER_STATUS},o),{},{chat:d,author:g,bclParticipants:T,bclHashValidated:!1,statusSetting:t}):(0,i.default)((0,i.default)({type:_.MESSAGE_TYPE.OTHER_STATUS},o),{},{chat:d,author:g,isDirect:m,statusSetting:t})}return e.throw("Unrecognized message type")}function M(e,t){const n=e.hasChild("unavailable");n||0!==t.length||e.throw("incomingMsgParser: to have enc node children");let r=!1;if(n){const t=e.maybeChild("unavailable");r="true"===(null==t?void 0:t.maybeAttrString("hosted"))}const i=e.attrEnum("type",f.STANZA_MSG_TYPES),o=e.maybeChild("meta"),a={isUnavailable:n,isHostedMsgUnavailable:r,type:i,pollType:i===f.STANZA_MSG_TYPES.poll?null==o?void 0:o.attrEnumOrNullIfUnknown("polltype",f.POLL_TYPES):null,origin:null==o?void 0:o.attrEnumOrDefault("origin",f.STANZA_MSG_ORIGIN,null),rawTs:e.attrString("t"),urlNumber:e.hasChild("url_number"),urlText:e.hasChild("url_text")};return o&&o.hasAttr(f.BIZ_SOURCE_ATTR)&&(a.bizSource=o.attrString(f.BIZ_SOURCE_ATTR)),o&&o.hasAttr("thread_msg_id")&&(a.threadMsgId=o.attrString("thread_msg_id")),o&&o.hasAttr("thread_msg_sender_jid")&&(a.threadMsgSenderJid=(0,h.jidWithTypeToWid)(o.attrJidWithType("thread_msg_sender_jid"))),o&&o.hasAttr("target_id")&&(a.targetId=o.attrString("target_id")),o&&o.hasAttr("target_sender_jid")&&(a.targetSenderJid=(0,h.jidWithTypeToWid)(o.attrJidWithType("target_sender_jid"))),o&&o.hasAttr("target_chat_jid")&&(a.targetChatJid=(0,h.jidWithTypeToWid)(o.attrJidWithType("target_chat_jid"))),i===f.STANZA_MSG_TYPES.event&&o&&o.hasAttr("event_type")&&(a.eventType=o.attrEnum("event_type",f.EVENT_TYPES)),a}function P(e){const t=e.maybeChild("bot");if(!(0,c.isBotMsgParseEnabledForFutureproofOrFullRecv)()||!t)return;const n=t.maybeAttrString("sender_timestamp_ms"),r=t.maybeAttrString("edit_target_id"),i=d.BotMsgEditType.cast(t.maybeAttrString("edit"));let o;t.hasAttr("biz_bot")&&("1"===t.attrString("biz_bot")?o=d.BizBotType.BIZ_1P:"3"===t.attrString("biz_bot")&&(o=d.BizBotType.BIZ_3P));return{botSenderTimestampMs:n,botEditTargetId:r,botEditType:i,bizBotType:o}}function C(e,t){var n,r;const o=Boolean(null==t||null===(n=t.author)||void 0===n?void 0:n.isBot());if(!Boolean(null==t||null===(r=t.chat)||void 0===r?void 0:r.isBot())&&o)return{verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,nativeFlowName:null,campaignId:null};const a=e.hasChild("verified_name")?e.child("verified_name").contentBytes():null,s=e.attrEnumOrDefault("verified_level",f.MSG_VERIFIED_LEVEL,null),l=e.hasAttr("verified_name")?e.attrInt("verified_name"):-1,u=e.maybeChild("biz");let c=null;if(null!=u){const e=_.ActualActorsEnumType.cast(u.maybeAttrInt("actual_actors")),t=_.HostStorageEnumType.cast(u.maybeAttrInt("host_storage")),n=u.maybeAttrInt("privacy_mode_ts");null==e||null==t||null==n||o||(c={actualActors:e,hostStorage:t,privacyModeTs:n})}const d=null==u?void 0:u.maybeAttrString("native_flow_name"),p=null==u?void 0:u.maybeAttrString("campaign_id");return(0,i.default)({verifiedNameCert:a,verifiedLevel:s,verifiedNameSerial:l,privacyMode:c,nativeFlowName:d,campaignId:p},u&&{verifiedButtonsEnvelope:u.hasChild("buttons"),verifiedListEnvelope:u.hasChild("list"),verifiedHsmEnvelope:e.hasChild("hsm")})}function O(e,t,n){if(e&&null!=t&&null!=n){const e=(0,v.getMeUser)();if(!e.equals(t)&&!e.equals(n))return!1}return!0}t.incomingMsgParser=T;const R=new o.default("incomingMsgParserForAckOnly",(e=>{e.assertTag("message");let t=null;try{t=e.attrEnum("type",f.STANZA_MSG_TYPES)}catch(e){}let n=null;try{n=""!==e.attrString("offline")}catch(e){}let r=null;try{r=b(e,[],P(e))}catch(e){}return{type:t,externalId:e.attrString("id"),from:(0,h.jidWithTypeToWid)(e.attrJidWithType("from")),participant:e.hasAttr("participant")?(0,h.deviceJidToDeviceWid)(e.attrDeviceJid("participant")):null,msgInfo:r,offline:n}}));t.incomingMsgParserForAckOnly=R},52253:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processDecryptedMessageProto=function(){return $.apply(this,arguments)},t.processMsgs=q,t.processPlaceholderMsg=function(e){return P.processPlaceholderMessage(e)},t.processPollUpdateVoteMsg=Z,t.processReactionMsg=X,t.processRenderableMsg=J;var i=r(n(48926)),o=n(71808),a=n(83741),s=n(21193),l=n(68593),u=r(n(20386)),c=n(1619),d=n(96193),p=n(41404),f=n(86725),_=n(46316),g=n(2537),h=n(87946),A=n(45304),m=n(91360),E=n(22495),y=n(20330),S=n(12987),v=n(39600),I=n(46206),T=n(95862),b=n(43823),M=n(68214),P=Q(n(33379)),C=n(27893),O=n(67621),R=n(73602),N=n(59024),w=n(61627),D=n(463),L=n(17167),B=n(77026),k=n(95160),G=n(35872),U=Q(n(74600)),x=n(3885),F=n(55017),K=n(84385),Y=n(59032),j=r(n(27112)),V=n(49625),W=n(33655);function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}function Q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function $(){return($=(0,i.default)((function*(e){const{decrypted:t,info:n,paymentInfo:r,e2eInfo:i,bizInfo:a,hsmInfo:l,isPadded:c=!0,msgMeta:f,reparsing:_=!1,msgBotInfo:A,reportingTokenInfo:m}=e,M=i.e2eType!==d.CiphertextType.Msmsg&&c?(0,o.unpadPkcs7)(new Uint8Array(t)):new Uint8Array(t),P=(0,W.decodeProtobuf)(B.MessageSpec,M);(0,K.verifyProtobufMessageObjectKeys)(P);const w=(0,O.getFrom)(n),D=i.retryCount>0&&(0,O.placeholderCheck)(n)||_?S.MessageOverwriteOption.RETRY:S.MessageOverwriteOption.NO_OVERWRITE;if(_){__LOG__(2,void 0,void 0,void 0,["messaging"])`Reparsing processDecryptedMessageProto: msgId::${n.externalId}, message decrypted:`;const t=yield(0,O.parseMessage)({info:n,ciphertextType:i.e2eType,msgProtobuf:P,paymentInfo:r,bizInfo:a,hsmInfo:l,hidePlaceholder:i.hideFail,processDecryptedProtoParams:e,msgBotInfo:A,reportingTokenInfo:m,meta:f});if(null!=t.renderableMsgs){const e=t.renderableMsgs,[i]=e,o=(0,s.isUnifiedInfraEnabledForType)(i.type)||Boolean((0,g.getAddOnProviderForMsg)(i)),l=[R.MSG_TYPE.DOCUMENT,R.MSG_TYPE.POLL_CREATION,R.MSG_TYPE.PTV,R.MSG_TYPE.STICKER];if(!o&&!l.includes(i.type))return{hasInactiveMsg:!1};(0,v.renderableMessagesValidation)({renderableMsgs:e,msgMeta:f,info:n,proto:P,bizInfo:a,reportingTokenInfo:m});const{tasks:u,hasInactiveMsg:c}=q({renderableMsgs:e,reparsing:_,bizInfo:a,msgMeta:f,paymentInfo:r,info:n,messageOverwriteOption:D});return yield Promise.all(u),__LOG__(2,void 0,void 0,void 0,["messaging"])`Reparsed processDecryptedMessageProto: msgId::${n.externalId}, message decrypted:`,{hasInactiveMsg:c}}__LOG__(4,void 0,new Error)`parsed render able msgs not reparsed as expected`}const L=yield(0,y.preProcessMsg)(n,P);if((0,p.bizHostedDevicesEnabled)()&&(!0===(null==L?void 0:L.senderOrRecipientAccountTypeHosted)&&(n.senderOrRecipientAccountTypeHosted=!0),!0===(null==L?void 0:L.hostedBizEncMismatch)&&(n.hostedBizEncStateMismatch=!0)),n.type===S.MESSAGE_TYPE.PEER_BROADCAST&&i.retryCount>0){const e=yield(0,h.getMsgByMsgKey)((0,O.messageInfoToKey)(n));null!=(null==e?void 0:e.broadcastParticipants)&&(n.bclParticipants=e.broadcastParticipants,null!=e.broadcastEphSettings&&(n.bclEphSettings=e.broadcastEphSettings))}const G=yield(0,O.parseMessage)({info:n,ciphertextType:i.e2eType,msgProtobuf:P,paymentInfo:r,bizInfo:a,hsmInfo:l,hidePlaceholder:i.hideFail,processDecryptedProtoParams:e,msgBotInfo:A,reportingTokenInfo:m,meta:f});let H=null;if(G.history?H=N.PARSED_PROTOCOL_MESSAGE_TYPE.HISTORY:G.appStateSyncKeyShare?H=N.PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_SHARE:G.appStateSyncKeyRequest?H=N.PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_REQUEST:G.peerDataOperationRequestResponseMessage?H=N.PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:G.peerDataOperationRequestMessage&&(H=N.PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_MESSAGE),(0,k.isWorker)()&&H)yield u.default.updateDeferredMessages([{id:n.externalId,type:H,plaintext:M,info:n,paymentInfo:r,bizInfo:a}]);else if(G.history)(0,V.workerSafeSendAndReceive)("handleHistorySyncNotification",{historySyncMetaData:G.history,from:w,externalId:n.externalId});else if(G.appStateSyncKeyShare)yield(0,V.workerSafeSendAndReceive)("handleAppStateSyncKeyShare",{keyShare:G.appStateSyncKeyShare,from:w});else if(G.appStateSyncKeyRequest)(0,V.workerSafeSendAndReceive)("handleAppStateSyncKeyRequest",{keyRequest:G.appStateSyncKeyRequest,from:w});else if(G.peerDataOperationRequestResponseMessage)(0,V.workerSafeSendAndReceive)("handlePeerDataOperationRequestResponse",{stanzaId:n.externalId,response:G.peerDataOperationRequestResponseMessage});else if(G.peerDataOperationRequestMessage)(0,V.workerSafeSendAndReceive)("handlePeerDataOperationRequest",{stanzaId:n.externalId,request:G.peerDataOperationRequestMessage});else{if(!G.securityNotificationEnabled){let e=!1;if(null==G.deviceSent?e=!0:G.deviceSent.phash?e=yield(0,v.validateBclHash)(G.deviceSent.phash,G.deviceSent.info):G.deviceSent.destination&&(e=yield(0,v.validateMsgDestination)(G.deviceSent.destination,n)),!e)throw new E.DeviceSentMessageError((0,O.getDeviceType)(n.author),Y.DSM_ERROR.INVALID_DSM);const{renderableMsgs:t}=G;(0,v.renderableMessagesValidation)({renderableMsgs:t,msgMeta:f,info:n,proto:P,bizInfo:a,reportingTokenInfo:m});const{tasks:i,hasInactiveMsg:o}=q({renderableMsgs:t,reparsing:_,bizInfo:a,msgMeta:f,paymentInfo:r,info:n,messageOverwriteOption:D});null!=G.storeMsg&&C.messageProcessorCache.addMessages([{msg:G.storeMsg}],!1),null!=G.senderKey&&i.push(U.Session.createGroupSignalSession(n.author,G.senderKey.groupId,G.senderKey.key)),n.pushname&&(0,I.updatePushname)(n.author,n.pushname,null!=n.offline);const s=ne(n.chat);yield Promise.all(i);const l=yield s;return(0,T.logMissingGroupParticipantMappings)(n.chat,n.author,n.addressingMode,l),(0,b.logReceivedMessagesInWAM)(G.renderableMsgs,null!=n.offline,1e3*n.ts,n.clientReceivedTsMillis,n.msgProcessStartTsMillis,n.addressingMode,l),{hasInactiveMsg:o}}null==(0,x.getMe)()?(__LOG__(4,void 0,new Error,!0)`Me wid is empty during security notification parsing`,SEND_LOGS("Me wid is empty during security notification parsing")):null!=w&&w instanceof j.default?(0,x.isMePrimaryNonLid)(w)?(0,F.setGlobalSecurityNotifications)(G.securityNotificationEnabled.isEnabled):(__LOG__(4,void 0,new Error,!0)`Handle security notification payload wid error`,SEND_LOGS("Handle security notification payload wid error")):(__LOG__(4,void 0,new Error,!0)`Handle security notification empty wid error`,SEND_LOGS("Handle security notification empty wid error"))}return{hasInactiveMsg:!1}}))).apply(this,arguments)}function q(e){var t,n,r,i,o,a,u;let{renderableMsgs:c,reparsing:d,bizInfo:p,msgMeta:_,paymentInfo:g,info:h,messageOverwriteOption:A}=e;const m=[];let E=!1;const S=c[0];return(0,s.isUnifiedInfraEnabledForType)(null===(t=c[0])||void 0===t?void 0:t.type)&&null!=(0,l.castToAddonMsgData)(c[0])?(E=!0,m.push(function(){return te.apply(this,arguments)}(c[0],h,d,A))):null!=c[0]&&null!=(0,f.castToReactionEncMsgData)(c[0])?(E=!0,m.push(function(){return z.apply(this,arguments)}((0,f.assertReactionEncMsgData)(c[0]),h,d))):null!=S&&S.kind===R.MsgKind.PollVoteEncrypted?m.push(Z(S,h,d)):(null===(n=c[0])||void 0===n?void 0:n.type)===R.MSG_TYPE.KEEP_IN_CHAT?(E=!0,m.push((0,y.processKeepInChatMsg)(c[0],h,d))):(0,M.receiveTextEditEnabled)()&&(null===(r=c[0])||void 0===r?void 0:r.type)===R.MSG_TYPE.PROTOCOL&&"message_edit"===(null===(i=c[0])||void 0===i?void 0:i.subtype)?m.push((0,y.processEditProtocolMsg)(c[0],h,d)):(null===(o=c[0])||void 0===o?void 0:o.type)===R.MSG_TYPE.PROTOCOL&&"ephemeral_sync_response"===(null===(a=c[0])||void 0===a?void 0:a.subtype)?m.push((0,y.processEphemeralSyncResponseMsg)(c[0],h,d)):(0,w.isPinnedMessagesM1ReceiverEnabled)()&&(null===(u=c[0])||void 0===u?void 0:u.type)===R.MSG_TYPE.PIN_MESSAGE?(E=!0,m.push((0,y.processPinMsg)(c[0],h,d))):null!=c[0]&&null!=(0,f.castToReactionMsgData)(c[0])?(E=!0,m.push(X((0,f.assertReactionMsgData)(c[0]),h,d))):c.length>0&&m.push(J(c,h,g,p,_,A,d)),{tasks:m,hasInactiveMsg:E}}function J(e,t,n,r,i,o,a){return P.processRenderableMessages(e,t,n,r,i,o,a)}function z(){return(z=(0,i.default)((function*(e,t,n){const r=yield(0,G.getGroupMetadataTable)().get(t.chat.toString());if(Boolean(null==r?void 0:r.incognito)&&Boolean(null==r?void 0:r.defaultSubgroup)){const r=yield(0,y.convertEncReactionToReaction)(e);if(null!=r)return X(r,t,n)}}))).apply(this,arguments)}function X(e,t,n){return P.processReactionMessage(e,t,n)}function Z(){return ee.apply(this,arguments)}function ee(){return(ee=(0,i.default)((function*(e,t,n){const r=null!=t.offline&&!n,i=(0,D.isMatFullyEnabled)()?yield(0,L.processPollUpdateMatMessages)(e):e,o=(0,m.getMessageCache)().addMessages([{msg:i}],!r);(n||_.Cmd.isMainStreamReadyMd&&_.Cmd.isOfflineDeliveryEnd)&&(yield o)}))).apply(this,arguments)}function te(){return(te=(0,i.default)((function*(e,t,n,r){const i=null!=t.offline&&!n;let o;const a=(0,l.castToAddonMsgData)(e);o=(0,D.isMatFullyEnabled)()&&null!=a?yield(0,L.processAddonMatMessages)(a,(0,l.getAddonTargetMsgKeyName)(a)):e;const s=(0,m.getMessageCache)().addMessages([{msg:o}],!i);(n||_.Cmd.isMainStreamReadyMd&&_.Cmd.isOfflineDeliveryEnd)&&(yield s),r===S.MessageOverwriteOption.RETRY&&(0,c.frontendFireAndForget)("removePlaceholder",{msg:e})}))).apply(this,arguments)}function ne(e){if((0,a.getABPropConfigValue)("web_extra_lid_group_logging_attributes"))return(0,A.getGroupAddressingMode)(e)}},37995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAck=function(e,t,n,s){(0,r.deprecatedCastStanza)((0,i.wap)("ack",{id:(0,i.CUSTOM_STRING)(e),class:"message",from:(0,o.DEVICE_JID)((0,a.assertGetMe)()),to:t?(0,o.JID)(t):i.DROP_ATTR,participant:s?(0,o.DEVICE_JID)(s):i.DROP_ATTR,type:null!=n?n:i.DROP_ATTR}))},t.sendNack=function(e,t,n,s,l){(0,r.deprecatedCastStanza)((0,i.wap)("ack",{id:(0,i.CUSTOM_STRING)(e),class:"message",from:(0,o.DEVICE_JID)((0,a.assertGetMe)()),to:t?(0,o.JID)(t):i.DROP_ATTR,participant:s?(0,o.DEVICE_JID)(s):i.DROP_ATTR,type:null!=n?n:i.DROP_ATTR,error:(0,i.INT)(l)}))};var r=n(82749),i=n(42811),o=n(11439),a=n(3885)},8826:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendReceipt=function(){return g.apply(this,arguments)};var i=r(n(48926)),o=n(12020),a=n(33351),s=n(37995),l=n(12987),u=n(67621),c=n(51337),d=n(84360),p=n(83752),f=n(48362),_=n(3885);function g(){return(g=(0,i.default)((function*(e,t,n){const{externalId:r}=e,{rawTs:i,type:g}=t,h=(0,u.getFrom)(e),A=e.type===l.MESSAGE_TYPE.CHAT&&(0,_.isMeAccount)(e.author)?e.chat:null,m=e.type===l.MESSAGE_TYPE.CHAT?null:e.author,E=e.category===a.CATEGORY_PEER,y=!e.chat.isBot()&&e.author.isBot();switch(n.result){case l.E2EProcessResult.SUCCESS:case l.E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR:if(y){let t,n,i;return e.type===l.MESSAGE_TYPE.CHAT?(t=e.author,n=e.chat):(t=e.chat,i=e.author),(0,p.sendBotInvokeResponseAcks)([r],t,n,i)}return(0,d.sendDeliveryReceiptsAfterDecryption)(r,h,A,m,E,n);case l.E2EProcessResult.HSM_MISMATCH:return __LOG__(3,void 0,void 0,!0)`sendReceipt: HSM mismatch, no receipt sent for "${r}"`,void SEND_LOGS("send-receipt-skipping-hsm-mismatch-result");case l.E2EProcessResult.RETRY:{const t=null==n.retryCount?1:n.retryCount+1;return yield(0,f.sendRetryReceipt)({retryCount:t,to:h,participant:m,recipient:A,externalId:r,rawTs:i,isPeer:E,retryReason:n.retryReason}),void(0,c.maybePostMessageHighRetryCountMetric)(t,e)}case l.E2EProcessResult.BACKFILL:return(0,s.sendAck)(r,h,g,m);case l.E2EProcessResult.PARSE_VALIDATION_ERROR:return(0,s.sendNack)(r,h,g,m,o.NackReason.InvalidProtobuf);case l.E2EProcessResult.PARSE_ERROR:return(0,s.sendNack)(r,h,g,m,o.NackReason.ParsingError)}return __LOG__(4,void 0,new Error,!0)`sendReceipt: invalid e2eProcessResult "${n.result}"`,SEND_LOGS("send-receipt-missing-e2e-process-result"),(0,s.sendAck)(r,h,g,m)}))).apply(this,arguments)}},12987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaceholderType=t.MessageOverwriteOption=t.MESSAGE_TYPE=t.HostStorageEnumType=t.E2EProcessResult=t.ActualActorsEnumType=void 0;const r=n(76672)({Self:1,Bsp:2});t.ActualActorsEnumType=r;const i=n(76672)({OnPremise:1,Facebook:2});t.HostStorageEnumType=i;const o=n(76672).Mirrored(["SUCCESS","RETRY","HSM_MISMATCH","BACKFILL","PARSE_ERROR","PARSE_VALIDATION_ERROR","SIGNAL_OLD_COUNTER_ERROR"]);t.E2EProcessResult=o;const a=n(76672).Mirrored(["E2E","FANOUT","BOT_UNAVAILABLE_FANOUT","HOSTED_UNAVAILABLE_FANOUT"]);t.PlaceholderType=a;const s=n(76672)({NO_OVERWRITE:0,RETRY:1,FUTURE_PROOF:2,PEER_RETRY:3});t.MessageOverwriteOption=s;const l=Object.freeze({CHAT:"chat",GROUP:"group",PEER_BROADCAST:"peer_broadcast",OTHER_BROADCAST:"other_broadcast",DIRECT_PEER_STATUS:"direct_peer_status",OTHER_STATUS:"other_status"});t.MESSAGE_TYPE=l},39600:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isFromKnownDevice=function(){return m.apply(this,arguments)},t.renderableMessagesValidation=function(e){let{renderableMsgs:t,msgMeta:n,info:r,proto:i,bizInfo:o,reportingTokenInfo:s}=e;if(t.length>0&&!E(i,o))throw new u.BizNodeValidationError("[messaging] Biz node validation failed due to absence of biz node in SMAX");const f=t[0];if((0,c.isReactionMsgMeta)(n)&&null!=f&&f.type!==p.MSG_TYPE.REACTION&&f.type!==p.MSG_TYPE.REACTION_ENC)throw new u.MessageProtobufMismatchError(u.MessageProtobufMismatchErrorCode.INVALID_REACTION_STANZA);if((0,c.isPollVoteMsgMeta)(n)&&null!=f){const e=f.type===p.MSG_TYPE.UNKNOWN&&f.futureproofType===p.MSG_TYPE.POLL_UPDATE,t=f.type===p.MSG_TYPE.POLL_UPDATE&&"poll_vote"===f.subtype;if(!e&&!t)throw new u.MessageProtobufMismatchError(u.MessageProtobufMismatchErrorCode.INVALID_POLL_UPDATE_STANZA)}if(null!=f&&(0,c.isCommentMsgMeta)(n)){const e=f.type===p.MSG_TYPE.UNKNOWN&&f.futureproofType===p.MSG_TYPE.COMMENT,t=new Set([p.MsgKind.CommentEncrypted,p.MsgKind.CommentDecrypted,p.MsgKind.RevokedAddon,p.MsgKind.ProtocolRevoke]);if(!e&&!t.has(f.kind))throw new u.MessageProtobufMismatchError(u.MessageProtobufMismatchErrorCode.INVALID_COMMENT_STANZA)}if(r.edit===a.EDIT_ATTR.PIN_IN_CHAT&&null!=f){const e=f.type===p.MSG_TYPE.UNKNOWN&&f.futureproofType===p.MSG_TYPE.PIN_MESSAGE;if(f.type!==p.MSG_TYPE.PIN_MESSAGE&&!e)throw new u.MessageProtobufMismatchError(u.MessageProtobufMismatchErrorCode.INVALID_PIN_IN_CHAT_STANZA)}if((0,c.isEventResponseMsgMeta)(n)&&null!=f){const e=f.type===p.MSG_TYPE.UNKNOWN&&f.futureproofType===p.MSG_TYPE.EVENT_RESPONSE,t=f.type===p.MSG_TYPE.EVENT_RESPONSE;if(!e&&!t)throw new u.MessageProtobufMismatchError(u.MessageProtobufMismatchErrorCode.INVALID_EVENT_RESPONSE_STANZA)}if((0,c.isEventEditMsgMeta)(n)&&null!=f){const e=f.type===p.MSG_TYPE.UNKNOWN&&f.futureproofType===p.MSG_TYPE.EVENT_EDIT_ENCRYPTED,t=f.type===p.MSG_TYPE.EVENT_EDIT_ENCRYPTED;if(!e&&!t)throw new u.MessageProtobufMismatchError(u.MessageProtobufMismatchErrorCode.INVALID_EVENT_EDIT_STANZA)}const g=(0,l.typeAttributeFromProtobuf)(i);null!=f&&(null==n?void 0:n.type)!==g&&(0,d.isMsgTypeValidationEnabled)()&&(__LOG__(4,void 0,new Error,!0,["messaging","wa-ice","report-token","non-sad"])`Type in stanza [${null==n?void 0:n.type}] is different from the one derived from protobuf [${g}]. Message type: ${f.type}`,SEND_LOGS("report-token-stanza-protobuf-type-mismatched",.001,"messaging","wa-ice","report-token","non-sad"));null!=f&&(0,_.validateReportingTokenInfo)(f,s)},t.validateBclHash=function(){return A.apply(this,arguments)},t.validateBizNode=E,t.validateMsgDestination=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(77630),s=n(97183),l=n(54468),u=n(22495),c=n(24513),d=n(19909),p=n(73602),f=n(30304),_=n(90268),g=n(3885);function h(){return(h=(0,i.default)((function*(e,t){var n;const r=t.chat;if(!e.equals(r))return __LOG__(4,void 0,new Error,!0)`encDestination: ${String(e)}, destination: ${r.toString()}`,SEND_LOGS("validateMsgDestination: drop due to the deviceSentMessage meta mismatch."),!1;const i=t.author;if(!(0,g.isMeAccount)(i))return __LOG__(4,void 0,new Error,!0)`sender: ${i.toString()}`,SEND_LOGS("validateMsgDestination: drop due to msg is not sent from your own device."),!1;const o=yield(0,s.hasDevice)(i,null!==(n=i.device)&&void 0!==n?n:0);return o||(__LOG__(4,void 0,new Error,!0)`no record found for sender: ${i.toString()}`,SEND_LOGS("validateMsgDestination:drop due to invalid device")),o}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e,t){var n;const r=null!==(n=t.bclParticipants)&&void 0!==n?n:[],i=yield(0,f.phashV2)(r);return i!==e?(__LOG__(4,void 0,new Error,!0)`expected: ${e}, got: ${i}`,SEND_LOGS("validateBclHash: drop due to invalid hash."),!1):(t.bclHashValidated=!0,!0)}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){const t=null==e.device?o.DEFAULT_DEVICE_ID:e.device;if(t===o.DEFAULT_DEVICE_ID)return!0;const[n]=yield(0,s.getDeviceIds)([e]);return null!=n&&n.devices.some((e=>e.id===t))}))).apply(this,arguments)}function E(e,t){const{listMessage:n,buttonsMessage:r,highlyStructuredMessage:i}=e;if(n&&!0!==(null==t?void 0:t.verifiedListEnvelope))return __LOG__(4,void 0,new Error,!0)`no biz node found in list message`,SEND_LOGS("validateBizNode:drop due to missing biz node in invalid SMAX in list message"),!1;if(r){var o,a;const e=!0===(null==t?void 0:t.verifiedButtonsEnvelope)||null!=(null==t?void 0:t.nativeFlowName)||!0===(null===(o=r.contextInfo)||void 0===o?void 0:o.isForwarded)&&0===(null==r||null===(a=r.buttons)||void 0===a?void 0:a.length);return e||(__LOG__(4,void 0,new Error,!0)`button message is invalid`,SEND_LOGS("validateBizNode:drop due to invalid SMAX for buttons message")),e}return!i||!0===(null==t?void 0:t.verifiedHsmEnvelope)||(__LOG__(4,void 0,new Error,!0)`no biz node found in HSM`,SEND_LOGS("validateBizNode:drop due to missing biz node in invalid SMAX in HSM"),!1)}},50374:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addPlaceholderWam=function(){return E.apply(this,arguments)},t.populatePlaceholderWam=function(){return S.apply(this,arguments)},t.viewPlaceholderWam=function(){return y.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(22582),s=n(74773),l=n(98051),u=n(16839),c=n(26368),d=n(3271),p=n(7625),f=n(39463),_=n(5440),g=n(80668),h=n(98701),A=n(93828),m=r(n(27112));function E(){return(E=(0,i.default)((function*(e){(yield T(e)).forEach((e=>{e.placeholderActionInd=p.PLACEHOLDER_ACTION.ADD,e.commit()}))}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=e.map((e=>(0,s.messageFromDbRow)(e)));(yield T(t)).forEach((e=>{e.placeholderActionInd=p.PLACEHOLDER_ACTION.VIEW,e.commit()}))}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){(yield T(e,!0)).forEach((e=>{e.placeholderActionInd=p.PLACEHOLDER_ACTION.POPULATE,e.commit()}))}))).apply(this,arguments)}function v(){return I.apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e,t,n){var r;const i=e.id.remote,a=new d.PlaceholderActivityWamEvent({placeholderChatTypeInd:R(i),placeholderTimePeriod:Math.max((0,o.unixTime)()-(null!==(r=e.t)&&void 0!==r?r:0),0),placeholderTypeInd:"fanout"===e.subtype?_.PLACEHOLDER_TYPE.FANOUT:_.PLACEHOLDER_TYPE.CIPHERTEXT,messageIsRevoke:(0,c.getIsRevoke)(e),messageMediaType:(0,A.getWamMediaType)(e),messageType:(0,A.getWamMessageType)(e)});return null!=e.placeholderAddReason&&(a.placeholderAddReason=e.placeholderAddReason),n&&null!=e.placeholderPopulationType&&(a.placeholderPopulationType=e.placeholderPopulationType),null!=e.e2eSenderType&&(a.e2eSenderType=e.e2eSenderType),m.default.isGroup(i)?yield M(a,e,t):m.default.isUser(i)&&(a.isLid=i.isLid()),yield C(a,e),a}))).apply(this,arguments)}function T(){return b.apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],r=[];for(const t of e)(0,c.getIsGroupMsg)(t)?r.push(t):n.push(t);const i=(yield(0,a.bulkGetGroupMetadata)(r.map((e=>e.id.remote)))).map(((e,t)=>[r[t],e]));return Promise.all([...n.map((e=>v(e,null,t))),...i.map((e=>{let[n,r]=e;return v(n,r,t)}))])}))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t,n){const r=yield(0,h.getGroupMetrics)(t.id.remote);if(null!=r&&(null!=r.participantCount&&(e.participantCount=r.participantCount),null!=r.deviceCount&&(e.deviceCount=r.deviceCount),null!=r.deviceSizeBucket&&(e.deviceSizeBucket=r.deviceSizeBucket)),n){const r=(0,g.isCagIncognitoFromGroupMetadata)(n);e.isLid=r&&(0,c.getIsReaction)(t),e.typeOfGroup=(0,l.groupTypeToWamEnum)((0,l.getGroupTypeFromGroupMetadata)(n))}}))).apply(this,arguments)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e,t){if((0,u.messageKeyHashEnabled)()){const n=yield(0,u.getMessageKeyHash)(t);null!=n&&(e.messageKeyHash=n)}}))).apply(this,arguments)}function R(e){return m.default.isGroup(e)?f.PLACEHOLDER_CHAT_TYPE.GROUP:m.default.isStatusV3(e)?f.PLACEHOLDER_CHAT_TYPE.STATUS:m.default.isBroadcast(e)?f.PLACEHOLDER_CHAT_TYPE.BROADCAST:m.default.isUser(e)?f.PLACEHOLDER_CHAT_TYPE.INDIVIDUAL:m.default.isNewsletter(e)?f.PLACEHOLDER_CHAT_TYPE.CHANNEL:f.PLACEHOLDER_CHAT_TYPE.OTHER}},5707:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleSingleMsg=function(){return b.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(27363),s=n(55068),l=n(73471),u=n(92271),c=n(29987),d=n(18625),p=n(31654),f=n(1619),_=n(91563),g=n(70817),h=n(37653),A=n(78891),m=n(53952),E=n(20919),y=n(12987),S=n(50374),v=n(73602),I=n(29409),T=r(n(27112));function b(){return(b=(0,o.default)((function*(e,t,r){let b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.MessageOverwriteOption.NO_OVERWRITE,M=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const P=b!==y.MessageOverwriteOption.NO_OVERWRITE,C={add:"after",update:P,isHistory:!1},O=t.type===v.MSG_TYPE.PROTOCOL&&["sender_revoke","admin_revoke"].includes(t.subtype);let R=t;if(!O){const e=yield(0,p.applyOrphanRevokes)([R]);if(0===e.length)return;R=e[0]}const N=yield(0,m.handleForActiveMessageRange)(e,R);if(N.has(E.ActiveRangeHandlerAction.DropMessage))return;const w=N.has(E.ActiveRangeHandlerAction.SkipUI);try{T.default.isStatusV3(e)&&(yield(0,f.frontendSendAndReceive)("handleStatusV3Update",{rawMsg:R,checksum:null,isMsgUpdate:!1})),yield(0,l.promiseLoop)(function(){var t=(0,o.default)((function*(t,r,i){const o=(0,s.delayMs)((0,a.expBackoff)(i,12e4,1e3,.1));try{if(P)R=yield(0,h.updateMessage)(R),__LOG__(2,void 0,void 0,void 0,["handleSingleMsg"])`placeholder populate successful`;else if(O){yield(0,A.processRevokeMsgs)([{revokeMsgKey:R.protocolMessageKey,newMsgKey:R.id,timestamp:R.t,subtype:R.subtype,sender:R.author,revokeTimestamp:R.t}]),(0,f.frontendFireAndForget)("deleteModelsForLastAddOnPreview",{messagesIds:[R.protocolMessageKey.toString()]});const t=n(74e3).getJobManager;yield t().waitUntilPersisted(I.jobSerializers.deleteAddOns(e.toString(),[R.protocolMessageKey.toString()]))}else try{yield(0,h.storeMessages)([R],e),R.type===v.MSG_TYPE.CIPHERTEXT&&(0,S.addPlaceholderWam)([R])}catch(e){if(!(e instanceof h.DuplicateMessageError))throw e;R.type===v.MSG_TYPE.CIPHERTEXT?__LOG__(2)`processPlaceholderMsg: skip creating duplicate placeholder`:(__LOG__(2)`storeMessages loop: detect resend message`,R=yield(0,h.updateMessage)(R),C.update=!0)}if(R.type===v.MSG_TYPE.GROUPS_V4_INVITE){const e=R.id.toString();yield(0,d.persistGroupInviteV4Msg)(e,{id:e,from:R.from.toString(),to:R.to.toString(),groupId:R.inviteGrp,expiration:parseInt(R.inviteCodeExp,10),expired:(0,c.unixTime)()>=parseInt(R.inviteCodeExp,10)})}__LOG__(2,void 0,void 0,void 0,["handleSingleMsg"])`storeMessages loop`,t()}catch(e){return __LOG__(2,void 0,void 0,void 0,["handleSingleMsg"])`storeMessages loop: failed with error ${e}.`,i>3?(__LOG__(3)`storeMessages loop: Gave up after ${i} tries`,Promise.reject(e)):o}}));return function(){return t.apply(this,arguments)}}()),__LOG__(2,void 0,void 0,void 0,["messaging"])`handleSingleMsg: msgId::${R.id.id}, write message to db done, overwrite: ${P}, skipUI: ${w}`;try{yield(0,u.checkOrphanMutations)([R.id.toString()],[e.toString()]),yield(0,g.checkUpdateForOrphanReactions)([R.id.toString()])}catch(t){__LOG__(4,void 0,new Error)`handleSingleMsg: checkOrphanMutations failed during handleSingleMsg for: ${String(R.id)} chat: ${String(e)} Error: ${t.name}, message: ${t.message}, stack: ${t.stack}`}w||(yield(0,f.frontendSendAndReceive)("processMultipleMessages",{chatId:e,msgObjs:[(0,i.default)((0,i.default)({},R),{},{recvFresh:!0,isNewMsg:!0})],meta:C,processMessagesOrigin:r,chatMsgsCollection:null,preserveOrder:M}))}catch(t){if(t instanceof _.LogoutDrop)return;if(t instanceof h.PreviousMsgNotUpdatableError)return void __LOG__(3)`Msg: ${String(R.id)} chat: ${String(e)} Error: PreviousMsgNotUpdatableError`;__LOG__(3,void 0,void 0,void 0,["messaging"])`Msg: ${String(R.id)} chat: ${String(e)} Error: ${t.name}, message: ${t.message}, stack: ${t.stack}`}}))).apply(this,arguments)}},95862:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logMissingGroupParticipantMappings=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(83741),a=n(42247),s=n(78440),l=r(n(27021)),u=n(51017);function c(){return(c=(0,i.default)((function*(e,t,n,r){if(!(0,o.getABPropConfigValue)("web_extra_lid_group_logging_attributes"))return;if(!e.isGroup()||l.default.isCag(e)||t.isBot())return;const i=(0,u.toUserWid)(t);if(null!=(0,a.getAlternateUserWid)(i))return;const c=yield(0,s.getParticipants)(e);null==c||c.participants.includes(i.toString())||(__LOG__(4,void 0,new Error,!0)`participant missing mapping, addressing mode mismatch = ${String(r!==n)}`,SEND_LOGS("GroupLidInfra/incoming_group_message_unknown"))}))).apply(this,arguments)}},43823:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logReceivedMessagesInWAM=function(e,t,n,r,i,o,a){(function(){return C.apply(this,arguments)})(e).then((s=>Promise.all([M(e,t,n,s,r,i,o,a),O(e,s),R(e),N(e)]))).catch((e=>{__LOG__(3)`error logging received messages: ${e}`}))};var i=r(n(48926)),o=n(29987),a=n(83741),s=n(1619),l=n(42083),u=n(80127),c=n(10473),d=n(62413),p=n(14105),f=n(26368),_=n(73602),g=n(95160),h=n(93769),A=n(3885),m=n(69320),E=n(70644),y=n(13087),S=n(80668),v=n(98701),I=n(93828),T=n(51017),b=n(49625);function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t,n,r,s,l,u,c){var d;const g=(0,o.unixTimeMs)(),h=null===(d=r.get((0,A.assertGetMeUser)().toJid()))||void 0===d?void 0:d.ephemeralDuration;yield Promise.all(e.map(function(){var e=(0,i.default)((function*(e){const i=e.from;if(null==i)return;const o=new p.MessageReceiveWamEvent({messageType:(0,I.getWamMessageType)(e),messageMediaType:(0,I.getWamMediaType)(e),messageIsInternational:(0,f.getIsInternational)(e),messageIsOffline:t,isViewOnce:Boolean(e.isViewOnce),isForwardedForward:(0,f.getNumTimesForwarded)(e)>1,isAReply:(0,f.getIsReply)(e),editType:(0,f.getWamEditType)(e),botType:(0,I.getWamBotType)(i,e.bizBotType),isAComment:(0,f.getType)(e)===_.MSG_TYPE.COMMENT});if(!i.isGroup()){var d;const e=null===(d=r.get(i.toJid()))||void 0===d?void 0:d.ephemeralDuration;null!=e&&(o.senderDefaultDisappearingDuration=e),null!=h&&(o.receiverDefaultDisappearingDuration=h),o.isLid=i.isLid()}(0,f.getIsRevoke)(e)&&(o.revokeType="admin_revoke"===e.subtype?y.REVOKE_TYPE.ADMIN:y.REVOKE_TYPE.SENDER),null!=s&&(o.messageReceiveT0=s-n,o.messageReceiveT1=g-s,null!=l&&(o.messageQueueTime=l-s)),null!=e.ephemeralDuration&&e.ephemeralDuration>0&&(o.ephemeralityDuration=e.ephemeralDuration);const A=(0,f.getWamDisappearingModeInitiator)(e);if(null!=A&&(o.disappearingChatInitiator=A),(0,a.getABPropConfigValue)("dm_initiator_trigger")){const t=(0,f.getWamDisappearingModeTrigger)(e);null!=t&&(o.ephemeralityTriggerAction=t);const n=(0,f.getWamDisappearingModeInitiatedByMe)(e);null!=n&&(o.ephemeralityInitiator=n)}const E=(0,I.getWamAgentEngagementType)(e);null!=E&&(o.agentEngagementType=E);const T=yield(0,S.getGroupTypeFromChatWid)(i);if(null!=T&&(o.typeOfGroup=T),(0,a.getABPropConfigValue)("web_extra_lid_group_logging_attributes")&&(null!=u&&(o.serverAddressingMode=(0,m.getWamAddressingModeFromString)(u)),null!=c&&(o.localAddressingMode=(0,m.getWamAddressingModeFromString)(c))),null==i?void 0:i.isGroup()){const t=yield(0,S.isCagIncognitoFromChatWid)(i),n=(0,f.getIsReaction)(e);null!=t&&null!=n&&(o.isLid=t&&n);const r=yield(0,v.getGroupMetrics)(i);null!=(null==r?void 0:r.participantCount)&&(o.participantCount=r.participantCount),null!=(null==r?void 0:r.deviceCount)&&(o.deviceCount=r.deviceCount),null!=(null==r?void 0:r.deviceSizeBucket)&&(o.deviceSizeBucket=r.deviceSizeBucket)}o.commit()}));return function(){return e.apply(this,arguments)}}()))}))).apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e){const t=new Set(e.filter((e=>e.id.remote.isUser())).map((e=>e.id.remote.toJid())));t.add((0,A.assertGetMeUser)().toJid());const n=Array.from(t);let r;return(0,g.isWorker)()?(r=yield(0,h.getContactTable)().bulkGet(n),new Map(r.map(((e,t)=>[n[t],{ephemeralDuration:(0,c.getEphemeralDurationForUser)(e),shouldBlockByCountry:()=>!1,shouldBlockByTos:()=>!1}])))):(0,b.workerSafeSendAndReceive)("getContactData",{ids:n.map(T.createWid)})}))).apply(this,arguments)}function O(e,t){for(const n of e){const e=t.get(n.id.remote.toJid());e&&!(0,f.getIsSentByMe)(n)&&(e.shouldBlockByCountry()?new d.GatedMessageReceivedWamEvent({chatGatedReason:E.CHAT_GATED_REASON.COUNTRY}).commit():e.shouldBlockByTos()&&new d.GatedMessageReceivedWamEvent({chatGatedReason:E.CHAT_GATED_REASON.TOS3}).commit())}}function R(e){(0,l.handleActivitiesForChatThreadLogging)(e.filter(u.shouldIncrementMsgSendAndReceive).map((e=>{var t;return(0,f.getType)(e)===_.MSG_TYPE.COMMENT?{activityType:"commentsReceived",ts:null!==(t=e.t)&&void 0!==t?t:(0,o.unixTimeMs)(),chatId:e.id.remote}:{activityType:e.id.fromMe?"msgSend":"msgReceive",ts:e.t,chatId:e.id.remote,isViewOnce:!0===e.isViewOnce,isReaction:(0,f.getIsReaction)(e),isForwarded:!0===e.isForwarded,isCommerceMessage:(0,u.isCommerceMessage)(e),isReply:(0,f.getIsReply)(e),isEdit:(0,f.getIsEditProtocolMsg)(e),isBot:(0,f.getIsBotQuery)(e)||(0,f.getIsMetaBotResponse)(e)}})))}function N(e){e.filter(f.getIsAuthenticationMessage).forEach((e=>{(0,s.frontendFireAndForget)("logOTPMessageReceivedActions",{msgData:e})}))}},45304:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetGroupAddressingMode=function(){return l.apply(this,arguments)},t.getGroupAddressingMode=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(22582),a=n(33351);function s(){return(s=(0,i.default)((function*(e){if(!e.isGroup())return;const t=yield(0,o.getGroupMetadata)(e);return null==t?null:null==t.isLidAddressingMode?a.STANZA_MSG_ADDRESSING_MODE.pn:t.isLidAddressingMode?a.STANZA_MSG_ADDRESSING_MODE.lid:a.STANZA_MSG_ADDRESSING_MODE.pn}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(e){const t=new Map,n=yield(0,o.bulkGetGroupMetadata)(e);return e.map(((e,r)=>{if(!e.isGroup())return void t.set(e.toString(),null);const i=n[r];null!=i?t.set(i.id,!0===i.isLidAddressingMode?a.STANZA_MSG_ADDRESSING_MODE.lid:a.STANZA_MSG_ADDRESSING_MODE.pn):t.set(e.toString(),null)})),t}))).apply(this,arguments)}},83661:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPrivacyModeWhenSent=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(12166),a=n(12987),s=n(60019),l=n(95160),u=n(3885),c=n(49625);function d(){return(d=(0,i.default)((function*(e,t){if(e.type!==a.MESSAGE_TYPE.CHAT)return;if(!(0,u.isMeAccount)(e.author))return t.privacyMode;const n=t.privacyMode,r=(0,l.isWorker)()?yield(0,o.getPrivacyMode)(e.chat):yield(0,c.workerSafeSendAndReceive)("getPrivacyMode",{id:e.chat});return(0,s.getLatestPrivacyMode)(r,n)}))).apply(this,arguments)}},24513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactionMsgMeta=t.isPollVoteMsgMeta=t.isEventResponseMsgMeta=t.isEventEditMsgMeta=t.isCommentMsgMeta=void 0;var r=n(33351);t.isReactionMsgMeta=e=>(null==e?void 0:e.type)===r.STANZA_MSG_TYPES.reaction;t.isPollVoteMsgMeta=e=>(null==e?void 0:e.type)===r.STANZA_MSG_TYPES.poll&&(null==e?void 0:e.pollType)===r.POLL_TYPES.vote;t.isCommentMsgMeta=e=>(null==e?void 0:e.type)===r.STANZA_MSG_TYPES.text&&null!=(null==e?void 0:e.threadMsgId)&&null!=(null==e?void 0:e.threadMsgSenderJid);t.isEventResponseMsgMeta=e=>(null==e?void 0:e.type)===r.STANZA_MSG_TYPES.event&&(null==e?void 0:e.eventType)===r.EVENT_TYPES.response;t.isEventEditMsgMeta=e=>(null==e?void 0:e.type)===r.STANZA_MSG_TYPES.event&&(null==e?void 0:e.eventType)===r.EVENT_TYPES.edit},20330:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertEncReactionToReaction=function(){return N.apply(this,arguments)},t.preProcessMsg=function(){return R.apply(this,arguments)},t.processEditProtocolMsg=function(){return L.apply(this,arguments)},t.processEphemeralSyncResponseMsg=function(){return w.apply(this,arguments)},t.processKeepInChatMsg=function(){return D.apply(this,arguments)},t.processPinMsg=function(){return B.apply(this,arguments)},t.storePollVotesBulk=function(){return k.apply(this,arguments)},t.storeReactionMsgBulk=function(){return x.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(41404),s=n(58755),l=n(87946),u=n(32602),c=n(7103),d=n(48840),p=n(91360),f=n(33351),_=n(22495),g=n(39600),h=n(8941),A=n(64071),m=n(75968),E=n(15553),y=n(463),S=n(17167),v=n(61515),I=n(66450),T=n(98554),b=n(69785),M=n(60223),P=n(57095),C=n(51017);function O(e,t){const n={msg:e,receiptInfo:{externalId:e.id.id,from:e.from,author:t.author}};(0,p.getMessageCache)().addMessages([n],!1)}function R(){return(R=(0,i.default)((function*(e,t){if(null==e.offline&&__LOG__(2,void 0,void 0,void 0,["messaging"])`processDecryptedMessageProto: msgId::${e.externalId}, message decrypted: `,!e.isHsm&&t.highlyStructuredMessage)throw new f.HsmMismatchError;let n=null;if(!(yield(0,g.isFromKnownDevice)(e.author))){const t=(0,C.toUserWid)(e.author);throw null==e.offline?(0,M.syncDeviceListJob)([t],null,null):m.OfflinePendingDeviceCache.addOfflinePendingDevice(String(t),null),new _.UnknownDeviceMessageError(`[messaging] msgId::${e.externalId}, processDecryptedMessageProto: reject message from unknown device`)}return t.messageContextInfo&&((0,a.bizHostedDevicesEnabled)()&&(n=e.chat.isUser()?yield(0,h.handleHostedIcdcMetadataInline)(e.chat,e.author,t.messageContextInfo):null),(0,h.handleICDCData)(e.author,e.chat.isUser()?e.chat:null,t.messageContextInfo)),n}))).apply(this,arguments)}function N(){return(N=(0,i.default)((function*(e){const{targetMessageKey:t}=e;if(null==(e.author?e.author:e.id.participant))throw new I.ReactionEncMessageValidationError(I.ReactionEncValidationErrorCode.MISSING_SENDER,P.E2E_FAILURE_REASON.INVALID_MESSAGE);const r=yield(0,l.getMsgByMsgKey)(t);if(null==r){const{storeMessageOrphans:t}=n(6751);return yield t([e],(e=>e.targetMessageKey)),Promise.resolve()}return(0,T.decryptReactionMsgData)(e,r)}))).apply(this,arguments)}function w(){return(w=(0,i.default)((function*(e,t,n){if(null!=t.offline&&!n)return O(e,t);yield(0,o.frontendSendAndReceive)("processEphemeralSyncResponse",{msg:e})}))).apply(this,arguments)}function D(){return(D=(0,i.default)((function*(e,t,n){if(null!=t.offline&&!n)return O(e,t);yield(0,o.frontendSendAndReceive)("processKeepInChatMessage",{keepInChatMessage:e,allowNotification:!0})}))).apply(this,arguments)}function L(){return(L=(0,i.default)((function*(e,t,n){const r=(0,y.isMatFullyEnabled)()?yield(0,S.processEditMatMessages)(e):e;if(null!=t.offline&&!n)return O(r,t);yield(0,c.processEditProtocolMsgs)([r],n)}))).apply(this,arguments)}function B(){return(B=(0,i.default)((function*(e,t,n){if(null!=t.offline&&!n)return O(e,t);yield(0,E.processPinMessages)(e.id.remote,[e])}))).apply(this,arguments)}function k(){return(k=(0,i.default)((function*(e){const t=yield(0,u.upsertVotesDb)(e);(0,o.frontendFireAndForget)("upsertVotesModelCollection",{votes:t,votesToRemove:null,restoredFromDb:!0}),yield G(t.map((e=>(0,A.lastAddOnPreviewCandidateFromVoteData)(e,!1))))}))).apply(this,arguments)}function G(){return U.apply(this,arguments)}function U(){return(U=(0,i.default)((function*(e){const t=yield(0,b.filterChatsWithAddOnPreviewUpdates)(e);t.size>0&&(yield(0,d.updateDatabaseForLastAddOnPreview)(t),(0,o.frontendFireAndForget)("updateChatLastAddOnPreview",{chatMap:t}))}))).apply(this,arguments)}function x(){return(x=(0,i.default)((function*(e){const t=e.map((e=>(0,v.webMsgInfoReactionTypeToReactionsRow)(e)));t.map((e=>`${e.msgKey.toString()} to ${e.parentMsgKey}`)).toString();const n=yield(0,s.createOrUpdateReactions)(t);return n&&(yield G(n.map((e=>(0,A.lastAddOnPreviewCandidateFromReactionRowType)(e))))),n}))).apply(this,arguments)}},16839:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageKeyHash=function(){return f.apply(this,arguments)},t.messageKeyHashEnabled=function(){return(0,s.getABPropConfigValue)("placeholder_message_key_hash_logging")};var i=r(n(48926)),o=n(62089),a=n(83599),s=n(83741),l=n(56333);let u=null;const c=new TextEncoder,d=e=>c.encode(e).buffer;function p(){return u||(u=(0,l.getChatThreadLoggingSecretB64)().then((e=>null==e?null:(0,o.decodeB64)(e)))),u}function f(){return(f=(0,i.default)((function*(e){var t,n,r,i;const s=yield p();if(!s)return null;const l=d(String(e.id.id+(e.id.fromMe?"1":"0")+(null!==(t=null===(n=e.id.remote)||void 0===n?void 0:n.toString({legacy:!0}))&&void 0!==t?t:"")+(null!==(r=null===(i=e.id.participant)||void 0===i?void 0:i.toString({legacy:!0}))&&void 0!==r?r:""))),u=yield(0,a.hmacSha256)(s,l);return(0,o.encodeB64)(u)}))).apply(this,arguments)}},25976:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFLINE_COUNT_TOO_HIGH_THRESHOLD=void 0,t.maybePostOfflineCountTooHigh=function(e){var t;const{msgInfo:n,msgMeta:s,encs:l}=e,u=parseInt(n.offline,10);if(Number.isNaN(u)||u<11)return;const c=new i.OfflineCountTooHighWamEvent({offlineCount:u,stanzaType:o.STANZA_TYPE.MESSAGE,mediaType:(0,r.getMetricMediaType)({encMediaType:null===(t=l.find((e=>null!=e.encMediaType)))||void 0===t?void 0:t.encMediaType,msgType:s.type,msgPollType:s.pollType})}),d=(0,a.getMessageTypeFromMsgInfoType)(n.type);null!=d&&(c.messageType=d);c.commitAndWaitForFlush().catch((e=>{__LOG__(3,void 0,void 0,void 0,["messaging"])`Failed to post OfflineCountTooHigh metric: ${e}`}))};var r=n(50055),i=n(30984),o=n(63510),a=n(93828);t.OFFLINE_COUNT_TOO_HIGH_THRESHOLD=11},35765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addToPendingMessage=function(e,t,n){const r=(0,i.createPendingMessageKey)(e,t,n);o.add(r),__LOG__(2)`message-dedup: add message cacheKey: ${r}`},t.isMessageDedupEnabled=function(){return(0,r.getABPropConfigValue)("web_message_dedup_enabled")},t.isMessagePending=function(e,t,n){const r=(0,i.createPendingMessageKey)(e,t,n),a=o.has(r);a&&__LOG__(2)`message-dedup: message with ${r} is pending`;return a},t.removeFromPendingMessage=function(e,t,n){const r=(0,i.createPendingMessageKey)(e,t,n);__LOG__(2)`message-dedup: remove message cacheKey: ${r}`,o.delete(r)};var r=n(83741),i=n(53587);const o=new Set},53587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPendingMessageKey=function(e,t,n){const r=n.map((e=>`${String(e.e2eType)}:${e.retryCount}`)).join(",");return`${e.toString()}_${t.toString()}_${r}`}},69785:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGetChatLastAddOnPreviewMap=d,t.filterChatsWithAddOnPreviewUpdates=function(){return g.apply(this,arguments)},t.isAddOnPreviewUpdateCandidate=c;var i=r(n(48926)),o=n(64071),a=r(n(60001)),s=n(56074),l=n(94007),u=n(3885);function c(e){const t=a.default.fromString(e.parentMsgKey);return"comment"===e.type||((0,u.isSerializedWidMe)(e.sender)||t.fromMe)&&!e.isOrphan}function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){const t=new Map;return(yield(0,l.getChatTable)().bulkGet(e)).forEach((e=>{var n;null!=e&&t.set(e.id.toString(),null!==(n=e.chatlistPreview)&&void 0!==n?n:e.lastReactionPreview)})),t}))).apply(this,arguments)}function f(e){return a.default.fromString(e.parentMsgKey).remote.toString()}function _(e,t){return!!h(e)&&(e.sender===t.sender&&e.parentMsgKey===t.parentMsgKey&&e.timestamp>=t.timestamp)}function g(){return(g=(0,i.default)((function*(e){const t=e.filter((e=>c(e))),n=new Map;if(!t.length)return n;const r=new Set(t.map((e=>a.default.fromString(e.parentMsgKey).remote.toString()))),i=yield d(Array.from(r));return t.forEach((e=>{const t=f(e),r=i.get(t),a=n.get(t),s=null!=a?a:r;h(e)?s&&_(e,s)&&e.timestamp>=s.timestamp&&n.set(t,void 0):s?e.timestamp>=s.timestamp&&n.set(t,(0,o.lastAddOnPreviewFromCandidate)(e)):n.set(t,(0,o.lastAddOnPreviewFromCandidate)(e))})),n}))).apply(this,arguments)}function h(e){switch(e.type){case"poll_vote":return 0===e.selectedOptionsCount;case"reaction":default:return e.reactionText===s.REVOKED_REACTION_TEXT}}},84385:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndeclaredMessageType=void 0,t.getProtobufMessageTypesToKeys=u,t.verifyProtobufMessageObjectKeys=function(e){if(!(0,r.getABPropConfigValue)("web_invalid_message_count_validation"))return;const t=u(e);if(!(1===t.length||2===t.length&&function(e){return Boolean(e.find((e=>{let[t]=e;return"number"==typeof t&&t===a.SenderKeyDistribution})))}(t)))throw new i.MessageProtobufInvalidMessageTypes(t.map((e=>{let[t,n]=e;return n})))};var r=n(83741),i=n(22495),o=n(73602);const a=n(76672)({Buttons:1,Template:2,SenderKeyDistribution:3,UnknownMessageKey:4});function s(e,t){switch(e){case"$$unknownFieldCount":return 0===t[e]?null:o.MSG_TYPE.UNKNOWN;case"messageContextInfo":return null;case"contactMessage":return o.MSG_TYPE.VCARD;case"contactsArrayMessage":return o.MSG_TYPE.MULTI_VCARD;case"conversation":case"extendedTextMessage":return o.MSG_TYPE.CHAT;case"imageMessage":return o.MSG_TYPE.IMAGE;case"locationMessage":case"liveLocationMessage":return o.MSG_TYPE.LOCATION;case"documentMessage":return o.MSG_TYPE.DOCUMENT;case"audioMessage":return o.MSG_TYPE.AUDIO;case"videoMessage":return o.MSG_TYPE.VIDEO;case"protocolMessage":case"highlyStructuredMessage":return o.MSG_TYPE.PROTOCOL;case"sendPaymentMessage":case"requestPaymentMessage":case"paymentInviteMessage":return o.MSG_TYPE.PAYMENT;case"declinePaymentRequestMessage":case"cancelPaymentRequestMessage":return o.MSG_TYPE.UNKNOWN;case"stickerMessage":return o.MSG_TYPE.STICKER;case"groupInviteMessage":return o.MSG_TYPE.GROUPS_V4_INVITE;case"templateButtonReplyMessage":return o.MSG_TYPE.TEMPLATE_BUTTON_REPLY;case"productMessage":return o.MSG_TYPE.PRODUCT;case"listMessage":return o.MSG_TYPE.LIST;case"orderMessage":return o.MSG_TYPE.ORDER;case"listResponseMessage":return o.MSG_TYPE.LIST_RESPONSE;case"buttonsResponseMessage":return o.MSG_TYPE.BUTTONS_RESPONSE;case"interactiveMessage":return o.MSG_TYPE.INTERACTIVE;case"interactiveResponseMessage":return o.MSG_TYPE.INTERACTIVE_RESPONSE;case"reactionMessage":return o.MSG_TYPE.REACTION;case"encReactionMessage":return o.MSG_TYPE.REACTION_ENC;case"encCommentMessage":return o.MSG_TYPE.COMMENT;case"pinInChatMessage":return o.MSG_TYPE.PIN_MESSAGE;case"pollCreationMessage":case"pollCreationMessageV2":case"pollCreationMessageV3":return o.MSG_TYPE.POLL_CREATION;case"pollUpdateMessage":return o.MSG_TYPE.POLL_UPDATE;case"keepInChatMessage":return o.MSG_TYPE.KEEP_IN_CHAT;case"requestPhoneNumberMessage":return o.MSG_TYPE.REQUEST_PHONE_NUMBER;case"ptvMessage":return o.MSG_TYPE.PTV;case"callLogMesssage":return o.MSG_TYPE.CALL_LOG;case"buttonsMessage":return a.Buttons;case"templateMessage":return a.Template;case"senderKeyDistributionMessage":case"fastRatchetKeySenderKeyDistributionMessage":return a.SenderKeyDistribution;case"newsletterAdminInviteMessage":return o.MSG_TYPE.NEWSLETTER_ADMIN_INVITE;case"eventMessage":return o.MSG_TYPE.EVENT_CREATION;case"encEventResponseMessage":return o.MSG_TYPE.EVENT_RESPONSE;default:return a.UnknownMessageKey}}function l(e){if(null!=e&&"object"==typeof e&&"message"in e){const t=e.message;if(null!=t&&"object"==typeof t)return t}return null}function u(e){const t=[];for(const n of Object.keys(e)){const r=l(e[n]);if(null!=r){0===u(r).length?t.push([o.MSG_TYPE.UNKNOWN,n]):t.push(...u(r))}else{const r=s(n,e);null!=r&&t.push([r,n])}}return t}t.UndeclaredMessageType=a},80668:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupTypeFromChatWid=function(){return s.apply(this,arguments)},t.isCagIncognitoFromChatWid=function(){return l.apply(this,arguments)},t.isCagIncognitoFromGroupMetadata=u;var i=r(n(48926)),o=n(22582),a=n(98051);function s(){return(s=(0,i.default)((function*(e){if(null!=e&&e.isGroup()){const t=yield(0,o.getGroupMetadata)(e);if(null!=t)return(0,a.groupTypeToWamEnum)((0,a.getGroupTypeFromGroupMetadata)(t))}}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(e){const t=yield(0,o.getGroupMetadata)(e);return null==t?null:u(t)}))).apply(this,arguments)}function u(e){return(0,a.getGroupTypeFromGroupMetadata)(e)===a.GroupType.LINKED_ANNOUNCEMENT_GROUP&&!0===(null==e?void 0:e.incognito)}},73289:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleAckPeerSimpleReceipt=function(){return a.apply(this,arguments)};var i=r(n(48926)),o=n(20797);function a(){return(a=(0,i.default)((function*(e){yield(0,o.deletePeerMessage)(e.stanzaId)}))).apply(this,arguments)}},26940:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleBotOneToOneInvokeSimpleReadReceipt=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(77630),a=n(9567),s=r(n(60001)),l=n(1723),u=n(51280),c=r(n(89482));function d(){return(d=(0,i.default)((function*(e){const{ack:t,from:n,externalIds:r,ts:i,ackString:d,recipient:p,offline:f}=e,_=null!=f&&!l.OfflineMessageHandler.isResumeFromRestartComplete();if(d!==o.ACK_STRING.READ||null==p||!n.isBot())throw(0,c.default)("handleBotOneToOneInvokeSimpleReadReceipt: unexpected receipt");const g=r.map((e=>new s.default({id:e,remote:p,fromMe:!0}))).map((e=>e.toString())),h=a.receiptBatcher.acceptOtherReceipt({ack:t,ts:i,receiverId:n,msgKeys:g,isBotInvoke:!0});return _||(yield(0,u.createNonPersistedJob)("receiptBatcherRunActiveBatches",(()=>a.receiptBatcher.runActiveBatches())).waitUntilCompleted()),h}))).apply(this,arguments)}},62962:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleChatSimpleReceipt=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(83741),s=n(77630),l=n(37956),u=n(83365),c=n(9567),d=r(n(60001)),p=n(1723),f=n(17657),_=n(59356),g=n(3885),h=r(n(27112)),A=n(51017),m=r(n(89482));function E(){return(E=(0,i.default)((function*(e){const{from:t,externalIds:n,ts:r,recipient:i,ackString:E,offline:y,biz:S}=e;let{ack:v}=e;const I=E===s.ACK_STRING.SENDER,T=!I&&(0,A.toUserWid)(t).equals((0,g.getMeUser)());let b,M;if(T||I){if(!i)throw __LOG__(3)`error: invalid sender/peer receipt without recipient`,(0,m.default)("handleChatSimpleReceipt: invalid sender/peer receipt without recipient");b=i}else{var P;b=(0,A.toUserWid)(t);"none"===(null===(P=f.userPrefsIdb.get(_.HASHED_KEYS.USER_PRIVACY_SETTINGS))||void 0===P?void 0:P.readReceipts)&&(v===s.ACK.READ||v===s.ACK.PLAYED&&(0,a.getABPropConfigValue)("played_self_enabled"))&&(v=s.ACK.RECEIVED)}null!=b&&h.default.isWid(b)&&b===(0,A.createWid)(o.PSA_JID)&&(M=(0,A.createWid)(o.PSA_JID));const C=n.map((e=>new d.default({id:e,remote:b,fromMe:!T,participant:M})));T&&v===s.ACK.PLAYED&&(0,l.handleViewOnceOpenedIfNecessary)(C);const O=C.map((e=>e.toString()));null!=y&&p.OfflineMessageHandler.offlineStanzaReceivedAfterComplete();const R=null!=y&&!p.OfflineMessageHandler.isResumeFromRestartComplete();let N=Promise.resolve();return T?null!=i&&(0,u.isReadOrPlayedReceipt)(E)&&n.length>0&&(N=c.receiptBatcher.acceptPeerReceipt({ack:v,ts:r,msgKeys:O,isOffline:R,remote:b})):N=c.receiptBatcher.acceptOtherReceipt({ack:v,ts:r,receiverId:t,msgKeys:O,privacyMode:S,isSender:I}),R||c.receiptBatcher.runActiveBatches(),N}))).apply(this,arguments)}},13877:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupSimpleReceipt=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(83741),a=n(77630),s=n(37956),l=n(83365),u=n(9567),c=r(n(60001)),d=n(1723),p=n(51280),f=n(3885),_=n(51017),g=r(n(89482));function h(){return(h=(0,i.default)((function*(e){const{ack:t,from:n,externalIds:r,ts:i,ackString:h,participant:A,recipient:m,offline:E}=e;if(!A)throw __LOG__(4,void 0,new Error,!0)`error: got group ack without participant.`,SEND_LOGS("handleGroupSimpleReceipt: failed"),(0,g.default)("handleGroupSimpleReceipt: got group ack without participant.");const y=(0,f.getMeUser)(),S=(0,_.toUserWid)(A),v=!(h===a.ACK_STRING.SENDER)&&S.equals(y);let I;if(v){if(!m)throw __LOG__(3)`error: invalid sender/peer receipt without recipient`,(0,g.default)("handleGroupSimpleReceipt: invalid sender/peer receipt without recipient");I=m}else I=y;const T=r.map((e=>new c.default({id:e,remote:n,fromMe:!v,participant:I})));v&&t===a.ACK.PLAYED&&(0,s.handleViewOnceOpenedIfNecessary)(T);const b=T.map((e=>e.toString()));null!=E&&d.OfflineMessageHandler.offlineStanzaReceivedAfterComplete();const M=null!=E&&!d.OfflineMessageHandler.isResumeFromRestartComplete();let P;return v?null!=m&&(0,l.isReadOrPlayedReceipt)(h)&&r.length>0&&(P=u.receiptBatcher.acceptPeerReceipt({isOffline:M,ack:t,ts:i,msgKeys:b,remote:n})):P=u.receiptBatcher.acceptOtherReceipt({ack:t,ts:i,receiverId:A,msgKeys:b}),M||(0,o.getABPropConfigValue)("web_batch_online_read_receipts_enabled")||(yield(0,p.createNonPersistedJob)("receiptBatcherRunActiveBatches",(()=>u.receiptBatcher.runActiveBatches())).waitUntilCompleted()),P}))).apply(this,arguments)}},90751:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return E.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(77630),s=n(935),l=n(73289),u=n(26940),c=n(62962),d=n(13877),p=n(77966),f=n(83365),_=n(40961),g=n(39347),h=n(88504),A=n(24368),m=r(n(89482));function E(){return(E=(0,o.default)((function*(e){const t=(0,s.createReceiptStanzaReceiveMetric)(),n=p.msgReceiptParser.parse(e);if(n.error)throw __LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,n.error;const r=n.success,{ack:i,ackString:o,from:l,stanzaId:u,offline:c}=r;let d;if(r.type===p.RECEIPT_TYPE.SIMPLE)if(i===a.ACK.CONTENT_GONE)d=(0,A.buildReceiptAck)(l,u,o,null);else{try{__LOG__(2)`handleSimpleReceipt: got receipt ${r.ack} for msg ${r.stanzaId}`,yield y(r)}catch(e){__LOG__(3,void 0,void 0,void 0,["messaging"])`handleSimpleReceipt: got error for receipt ${r.ack} for msg ${r.stanzaId}: ${e}`}d=(0,A.buildReceiptAck)(l,u,o,r.participant)}else if(r.type===p.RECEIPT_TYPE.AGGREGATE){try{__LOG__(2)`handleAggregateReceipt: got ${r.receipts.length} receipts of ack type ${r.ack} for msg ${r.externalId}`,yield S(r)}catch(e){}d=(0,A.buildReceiptAck)(l,u,o,null)}else __LOG__(4,void 0,new Error,!0)`type: ${r.type}`,SEND_LOGS("handleMsgReceipt: Invalid receipt type"),d=(0,A.buildReceiptAck)(l,u,o,null);return null==c&&t(r),d}))).apply(this,arguments)}function y(e){const{from:t,ack:n,recipient:r,ackString:o}=e;if(n===a.ACK.PEER)return(0,l.handleAckPeerSimpleReceipt)(e);if(t.isNewsletter())return(0,h.isNewsletterEnabled)()?(0,_.handleNewsletterSimpleReceipt)(e):Promise.resolve();if(t.isBot()&&null!=r&&o===a.ACK_STRING.READ)return(0,u.handleBotOneToOneInvokeSimpleReadReceipt)(e);if(t.isStatusV3())return(0,g.handleStatusSimpleReceipt)(e);if(t.isUser())return(0,c.handleChatSimpleReceipt)(e);if(t.isGroup())return(0,d.handleGroupSimpleReceipt)(e);if(t.isBroadcast()){if(!e.participant)return __LOG__(4,void 0,new Error,!0)`error: missing participant for broadcast receipt ${t.toString()}`,SEND_LOGS("handleSimpleReceipt: failed"),Promise.reject((0,m.default)(`handleSimpleReceipt: missing participant for broadcast receipt ${t.toString()}`));const n=(0,i.default)((0,i.default)({},e),{},{from:e.participant,participant:null});return(0,c.handleChatSimpleReceipt)(n)}return __LOG__(4,void 0,new Error,!0)`error: unsupported type for ${t.toString()}`,SEND_LOGS("handleSimpleReceipt: failed"),Promise.reject((0,m.default)(`handleSimpleReceipt: unsupported type for ${t.toString()}`))}function S(e){const{ack:t,from:n}=e;return t===a.ACK.CONTENT_GONE?(__LOG__(4,void 0,new Error,!0)`error: reupload receipts cannot be aggregated`,SEND_LOGS("handleAggregateReceipt: failed"),Promise.reject((0,m.default)("handleAggregateReceipt: failed"))):n.isGroup()||n.isBroadcast()?Promise.all((0,f.deaggregateReceipt)(e).map(y)):(__LOG__(4,void 0,new Error,!0)`handleAggregateReceipt: aggregate receipts should come only from group, broadcast`,SEND_LOGS("handleAggregateReceipt: failed"),Promise.reject((0,m.default)("handleAggregateReceipt: failed")))}},37956:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleViewOnceOpenedIfNecessary=function(){return O.apply(this,arguments)},t.processOrphanPeerReceipt=function(e){return I.enqueue((0,i.default)((function*(){const t=yield(0,p.getOrphanReceipt)(String(e));t?(null!=t[l.ACK_STRING.PLAYED]&&(__LOG__(2)`processOrphanPeerReceipt: orphan played ack found for incoming ${e}`,yield(0,f.frontendSendAndReceive)("updateMsgPeerAcks",{msgKeys:[e],ack:l.ACK.PLAYED,t:t[l.ACK_STRING.PLAYED]})),null!=t[l.ACK_STRING.READ]&&(__LOG__(2)`processOrphanPeerReceipt: orphan read ack found for incoming ${e}`,M(e.remote,[e])),yield(0,p.removeOrphanReceipt)(String(e))):__LOG__(2)`processOrphanPeerReceipt: no orphan ack found for incoming ${e}`})))},t.processReactionOrphanPeerReceipt=function(e){return I.enqueue((0,i.default)((function*(){const t=yield(0,p.getOrphanReceipt)(String(e));t?(null!=t[l.ACK_STRING.READ]&&(__LOG__(2)`processReactionOrphanPeerReceipt: orphan read ack found for incoming ${e}`,yield(0,A.markAddOnsAsReadJob)(new Map([[m.MessageAddOnType.Reaction,[E.default.fromString(t.msgKey)]]]))),yield(0,p.removeOrphanReceipt)(String(e))):__LOG__(2)`processReactionOrphanPeerReceipt: no orphan ack found for incoming ${e}`})))},t.updateChatPeerRead=M,t.updateMsgViewed=function(){return C.apply(this,arguments)},t.updateOrphanPeerReceipt=function(e,t,n){I.enqueue((()=>{__LOG__(2)`updateMsgAcks: store ${e.length} orphan acks`;let r=null;if(t===l.ACK.PLAYED?r=l.ACK_STRING.PLAYED:t===l.ACK.READ&&(r=l.ACK_STRING.READ),r)return(0,p.createOrUpdateOrphanReceipt)(r,n,e.map(String))}))};var i=r(n(48926)),o=r(n(85564)),a=n(39528),s=n(29987),l=n(77630),u=n(70118),c=n(4339),d=n(93040),p=n(5266),f=n(1619),_=n(42083),g=n(74773),h=n(62505),A=n(11779),m=n(22666),E=r(n(60001)),y=n(48678),S=n(88504),v=n(10139);const I=new a.PromiseQueue;function T(){return b.apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t){const n=(yield(0,c.getActiveMessageRanges)(e)).filter((e=>"markChatAsRead"===e.action&&!1===e.actionValue.read&&null!=e.actionValue.messageRange));if(0===n.length)return!0;const r=n[0];return t.some((e=>!(0,u.rangeContainsMessage)(r.actionValue.messageRange,{id:E.default.fromString(e.id),t:e.t})))}))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t){const n=t.map(String);let r=null;const i=yield(0,v.getMessageTable)().bulkGet(n,!1),a=[];let s;if(i.forEach(((e,t)=>{e?null==e.pendingReadReceipt||null!=e.rowId&&(null==r||e.rowId>r)&&(r=e.rowId):a.push(n[t])})),a.length>0&&__LOG__(2)`updateChatPeerRead: maybeOrphans ${a.length}`,0===a.length)s=new Set;else{const{updatedAddOns:e,updatedOrphans:t}=yield(0,A.markUnclassifiedAddOnsAsReadJob)(a.map((e=>E.default.from(e))));s=new Set([...t,...(0,o.default)(Array.from(e.values()))].map(String))}const u=a.filter((e=>!s.has(e)));I.enqueue((()=>(__LOG__(2)`updateChatPeerRead: storing ${u.length} orphan acks`,(0,p.createOrUpdateOrphanReceipt)(l.ACK_STRING.READ,0,u)))),yield(0,d.markMessageAndChatAsRead)(r,String(e),!(yield T(e.toString(),i.filter(Boolean)))),e.isNewsletter()?(0,S.isNewsletterEnabled)()&&(yield(0,f.frontendSendAndReceive)("updateNewsletterUnreadMsgCount",{id:e})):yield(0,f.frontendSendAndReceive)("updateChatUnreadMsgCountAndClearMentions",{remote:e})}))).apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e,t){const n=e.map((e=>(0,h.craftInternalId)(t.toJid(),e))),r=(yield(0,v.getMessageTable)().anyOf(["internalId"],n)).map((e=>E.default.fromString(e.id)));return yield(0,y.updateMsgViewReceipt)(r),(0,f.frontendFireAndForget)("updateMsgsViewed",{ids:r})}))).apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e){const t=e.map(String),n=yield(0,v.getMessageTable)().bulkGet(t,!1);(0,_.handleActivitiesForChatThreadLogging)(n.filter(Boolean).map((e=>(0,g.messageFromDbRow)(e))).filter((e=>e.isViewOnce)).map((e=>{var t;return{activityType:"viewOnceOpen",ts:null!==(t=e.t)&&void 0!==t?t:(0,s.unixTime)(),chatId:e.id.remote}})))}))).apply(this,arguments)}},77966:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.msgReceiptParser=t.RECEIPT_TYPES_TO_ACK=t.RECEIPT_TYPE=void 0;var i=r(n(81109)),o=r(n(82601)),a=n(77630),s=n(12987),l=n(15610),u=n(3885);const c={read:a.ACK.READ,played:a.ACK.PLAYED,inactive:a.ACK.INACTIVE,"server-error":a.ACK.CONTENT_GONE,sender:a.ACK.RECEIVED,"read-self":a.ACK.READ,"played-self":a.ACK.PLAYED,peer_msg:a.ACK.PEER};t.RECEIPT_TYPES_TO_ACK=c;const d={SIMPLE:"simple",AGGREGATE:"aggregate"};t.RECEIPT_TYPE=d;const p=new o.default("incomingMsgReceiptParser",(e=>{e.assertTag("receipt"),e.hasAttr("to")&&e.assertAttr("to",(0,u.assertGetMe)().toJid());const t={ack:(e.hasAttr("type")?e.attrEnumOrNullIfUnknown("type",c):a.ACK.RECEIVED)||a.ACK.RECEIVED,stanzaId:e.attrString("id"),from:(0,l.jidWithTypeToWid)(e.attrJidWithType("from")),ackString:e.hasAttr("type")?e.attrString("type"):null,offline:e.hasAttr("offline")?e.attrString("offline"):null},n=e.maybeChild("error");null!=n&&n.hasAttr("reason")&&"lid"===n.attrString("reason")&&"feature-incapable"===n.attrString("type")&&(t.ack=a.ACK.SENT);const r=e.maybeChild("participants");return r?function(e,t){const n=t.mapChildrenWithTag("user",(e=>{try{const t=(0,l.deviceJidToDeviceWid)(e.attrDeviceJid("jid"));return{participant:t,ts:e.attrTime("t")}}catch(e){return null}})).filter(Boolean);return(0,i.default)((0,i.default)({},e),{},{type:d.AGGREGATE,externalId:t.attrString("key"),receipts:n})}(t,r):function(e,t){const n=t.hasAttr("participant")?(0,l.deviceJidToDeviceWid)(t.attrDeviceJid("participant")):null,r=t.hasAttr("recipient")?(0,l.userJidToUserWid)(t.attrUserJid("recipient")):null,o="view"===t.maybeAttrString("type");let a,u;a=t.hasChild("list")?t.child("list").mapChildrenWithTag("item",(e=>o?e.attrString("server_id"):e.attrString("id"))):[];if(t.hasChild("biz")){const e=t.child("biz"),n=s.ActualActorsEnumType.cast(e.maybeAttrInt("actual_actors")),r=s.HostStorageEnumType.cast(e.maybeAttrInt("host_storage")),i=e.maybeAttrInt("privacy_mode_ts");null!=n&&null!=r&&null!=i&&(u={actualActors:n,hostStorage:r,privacyModeTs:i})}o||a.push(e.stanzaId);return(0,i.default)((0,i.default)({},e),{},{type:d.SIMPLE,externalIds:a,participant:n,recipient:r,ts:t.attrTime("t"),biz:u})}(t,e)}));t.msgReceiptParser=p},83365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deaggregateReceipt=function(e){return e.receipts.map((t=>({type:i.RECEIPT_TYPE.SIMPLE,stanzaId:e.externalId,externalIds:[e.externalId],from:e.from,participant:t.participant,recipient:null,ts:t.ts,ack:e.ack,ackString:e.ackString,offline:e.offline,biz:null})))},t.isReadOrPlayedReceipt=function(e){return e===r.ACK_STRING.READ||e===r.ACK_STRING.READ_SELF||e===r.ACK_STRING.PLAYED||e===r.ACK_STRING.PLAYED_SELF};var r=n(77630),i=n(77966)},40961:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleNewsletterSimpleReceipt=function(){return _.apply(this,arguments)};var i=r(n(48926)),o=n(38032),a=n(77630),s=n(37956),l=n(9567),u=r(n(60001)),c=n(1723),d=n(3885),p=n(51017),f=r(n(89482));function _(){return(_=(0,i.default)((function*(e){const{ack:t,from:n,externalIds:r,ts:i,ackString:_,participant:g,offline:h,stanzaId:A}=e,m=`[receipt][newsletter][${A}]`;if("view"===_)return(0,s.updateMsgViewed)(r.map((e=>parseInt(e,10))),n);if(t!==o.ACK.READ&&t!==o.ACK.PLAYED)throw __LOG__(3)`${m} ACK should be READ or PLAYED, ${t} received instead`,(0,f.default)("handleNewsletterSimpleReceipt: only READ/PLAYED ack for newsletters");if(!((_===a.ACK_STRING.READ_SELF||_===a.ACK_STRING.PLAYED_SELF)&&null!=g&&(0,p.toUserWid)(g).equals((0,d.getMeUser)())))throw __LOG__(3)`${m} only peer receipts are accepted`,(0,f.default)("handleNewsletterSimpleReceipt: only peer receipts for newsletters");const E=r.map((e=>new u.default({id:e,remote:n,fromMe:!1}))).map((e=>e.toString()));null!=h&&c.OfflineMessageHandler.offlineStanzaReceivedAfterComplete();const y=null!=h&&!c.OfflineMessageHandler.isResumeFromRestartComplete(),S=l.receiptBatcher.acceptPeerReceipt({isOffline:y,ack:t,ts:i,remote:n,msgKeys:E});return y||(yield l.receiptBatcher.runActiveBatches()),S}))).apply(this,arguments)}},39347:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleStatusSimpleReceipt=function(){return _.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(77630),s=n(9567),l=r(n(60001)),u=n(1723),c=n(17657),d=n(59356),p=n(3885),f=n(51017);function _(){return(_=(0,i.default)((function*(e){var t;const{externalIds:n,ts:r,ackString:i,ack:_,participant:g,recipient:h,offline:A}=e,m=n[0];if(!g)return __LOG__(4,void 0,new Error,!0)`error: got status ack without participant`,void SEND_LOGS("handleStatusSimpleReceipt: failed");const E=(0,p.getMeUser)(),y=(0,f.toUserWid)(g),S=y.equals(E),v="none"===(null===(t=c.userPrefsIdb.get(d.HASHED_KEYS.USER_PRIVACY_SETTINGS))||void 0===t?void 0:t.readReceipts);if(!S&&(v||i!==a.ACK_STRING.READ))return;const I=(0,f.createWid)(o.STATUS_JID),T=[new l.default({id:m,remote:I,fromMe:!S,participant:null!=h?h:E}).toString()],b=null!=A&&!u.OfflineMessageHandler.isResumeFromRestartComplete();let M=Promise.resolve();return M=S?s.receiptBatcher.acceptPeerReceipt({ts:r,msgKeys:T,ack:_,isOffline:b,remote:I}):s.receiptBatcher.acceptOtherReceipt({ack:_,ts:r,receiverId:y,msgKeys:T}),b||s.receiptBatcher.runActiveBatches(),M}))).apply(this,arguments)}},24368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildReceiptAck=function(e,t,n,o){return(0,r.wap)("ack",{to:(0,i.JID)(e),id:(0,r.CUSTOM_STRING)(t),class:"receipt",type:(0,r.MAYBE_CUSTOM_STRING)(n),participant:o&&o!==e?(0,i.DEVICE_JID)(o):r.DROP_ATTR})};var r=n(42811),i=n(11439)},935:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createReceiptStanzaReceiveMetric=function(){const e=new a.ReceiptStanzaReceiveWamEvent({receiptStanzaStage:l.RECEIPT_STANZA_STAGE.OVERALL,receiptStanzaTotalCount:1});return t=>{let{ackString:n,from:r,offline:a,receipts:l}=t;if(e.messageType=function(e){if(u.default.isStatusV3(e))return s.MESSAGE_TYPE.STATUS;if(u.default.isGroup(e))return s.MESSAGE_TYPE.GROUP;if(u.default.isBroadcast(e))return s.MESSAGE_TYPE.BROADCAST;if(u.default.isNewsletter(e))return s.MESSAGE_TYPE.CHANNEL;return s.MESSAGE_TYPE.INDIVIDUAL}(r),null!=a){const t=parseInt(a,10);Number.isNaN(t)||(e.receiptStanzaOfflineCount=t)}null==n?e.receiptStanzaType=i.ACK_STRING.DELIVERY:null!=o.RECEIPT_TYPES_TO_ACK[n]&&(e.receiptStanzaType=n),null!=(null==l?void 0:l.length)&&(e.receiptStanzaTotalCount=l.length),e.markReceiptStanzaDuration(),e.commit()}};var i=n(77630),o=n(77966),a=n(94115),s=n(24771),l=n(73291),u=r(n(27112))},65953:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearDanglingReceipts=_,t.sendAndClearDanglingReceipts=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(85512),s=r(n(69353)),l=n(63552),u=n(59516),c=n(83752),d=n(56203),p=n(51017);function f(){return(f=(0,i.default)((function*(){const e=yield(0,u.getTable)().all();__LOG__(2)`sendAndClearDanglingReceipts: get ${e.length} danglingRecords`;const t=new Map;let n=[],r=0;e.forEach((e=>{r+=e.receipts.length;const{receipts:i,acks:o}=e;i.forEach((e=>{const n=(0,p.createWid)(e.from),r=(0,p.createWid)(e.author);let i=t.get(n);i||(i=new Map,t.set(n,i));let o=i.get(r);o||(o=[],i.set(r,o)),o.push(e.externalId)})),n=n.concat(o)}));const i=String((0,o.unixTime)()),a=Array.from(t.keys()).map((e=>{const n=t.get(e);if(n)return(0,c.sendAggregateReceipts)({to:e,type:c.RECEIPT_TYPE.DELIVERY,t:i,groupedReceipt:n})})),s=n.map((e=>(0,l.sendOfflinePreAck)(e)));__LOG__(2)`sendAndClearDanglingReceipts: starting sending ${a.length} receipts,  ${s.length} preAcks`,yield Promise.all(a),__LOG__(2)`sendAndClearDanglingReceipts: complete sending ${a.length} receipts`,yield Promise.all(s),__LOG__(2)`sendAndClearDanglingReceipts: complete sending  ${s.length} preAcks`,yield _(),d.OfflineResumeReporter.logOfflinePreackCount(r),__LOG__(2)`sendAndClearDanglingReceipts: complete`}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(){if(!s.default.online)return __LOG__(2)`[offline-resume][utils] clearDanglingReceipts: skip due to offline.`,Promise.resolve();__LOG__(2)`clearDanglingReceipts: starting sending ping`,yield(0,a.blockSendPing)(),__LOG__(2)`clearDanglingReceipts: starting clean receipts`,yield(0,u.getTable)().clear()}))).apply(this,arguments)}},9120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgAdditionalInfoType=void 0;const n=Object.freeze({ReportingTokenInfo:"reporting_token_info"});t.MsgAdditionalInfoType=n},95735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonBlockingOfflineResumeMaxMessageCount=function(){return(0,r.getABPropConfigValue)("web_non_blocking_offline_resume_max_message_count")},t.getOfflineDynamicBatchConfig=function(){const e=JSON.parse((0,r.getABPropConfigValue)("web_offline_dynamic_batch_config")),t=parseFloat(e.multiplier),n=e.version||"default";return{multiplier:Number.isNaN(t)?.2:t,version:n}},t.getOfflineResumeMaxBatchSize=function(){const e=parseInt((0,r.getABPropConfigValue)("web_offline_resume_max_batch_size"),10);return!Number.isNaN(e)&&e>0?e:i.DEFAULT_MAX_BATCH_SIZE},t.isNonBlockingResumeFromOpenTabEnabled=function(){return!0},t.isOfflineDynamicBatchSizeEnabled=function(){return!(0,o.isServiceWorker)()&&(0,r.getABPropConfigValue)("web_offline_dynamic_batch_size_enabled")},t.isOfflineResumeMaxBatchSizeEnabled=function(){return(0,r.getABPropConfigValue)("web_offline_resume_max_batch_size_enabled")};var r=n(83741),i=n(1723),o=n(95160)},75968:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OfflinePendingDeviceCache=void 0;var i=r(n(48926)),o=n(93042),a=n(82749),s=n(39528),l=n(78494),u=n(99692);const c=new class{constructor(){this.pendingDeviceCache=new Set,this.pendingAcks=[],this.snapshotTimer=new l.ShiftTimer((()=>{this.createSnapshot()})),this.checkpointQueue=new s.PromiseQueue}addOfflinePendingDevice(e,t){this.pendingDeviceCache.add(e),t&&this.pendingAcks.push(t),this.snapshotTimer.isScheduled()||(__LOG__(2)`[offline-resume][device-cache]: creating snapshot: schedule in ${3e3} ms`,this.snapshotTimer.onOrAfter(3e3))}createSnapshot(){this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();const e=Array.from(this.pendingDeviceCache),t=this.pendingAcks;__LOG__(2)`[offline-resume][device-cache]: creating snapshot for pending devices ${e.join(",")}`,this.checkpointQueue.enqueue((0,i.default)((function*(){yield(0,u.addUserToPendingDeviceSync)(e),t.forEach((e=>(0,a.deprecatedCastStanza)(e))),(0,o.cancelDeadSocketTimer)()}))),this.pendingDeviceCache=new Set,this.pendingAcks=[]}};t.OfflinePendingDeviceCache=c},1723:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineMessageHandlerImpl=t.OfflineMessageHandler=t.DEFAULT_MAX_BATCH_SIZE=void 0;var i=r(n(48926)),o=n(94048),a=n(46316),s=n(43926),l=n(95735),u=n(67606),c=n(82192),d=r(n(41143));const p=200,f=200;t.DEFAULT_MAX_BATCH_SIZE=f;const _=new Map([[0,200],[1,100],[2,50],[3,10]]),g=function(){let e=null;return(t,n)=>{const{version:r,multiplier:i}=(0,l.getOfflineDynamicBatchConfig)(),o=e;switch(e=t,r){case"progressive":return function(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;if(0===e){if((0,l.isOfflineResumeMaxBatchSizeEnabled)()){if(null==t||t>0)return f;const e=(0,l.getOfflineResumeMaxBatchSize)();return Math.min(e,Math.floor(.45*n)+n)}return f}if(e>3)return 10;let o=null;if(e-(null!=t?t:0)==0){var a;o=Math.floor(n*i)+n,(null!==(a=_.get(e-1))&&void 0!==a?a:f)<=o&&(o=n)}else o=_.get(e);return(0,d.default)(null!=o,"[getBatchSizeByProgress] unexpected value for batch size with retryCount %s, prevRetryCount %s, currentSize %s",e,null!=t?t:"N/A",n),null!==(r=o)&&void 0!==r?r:f}(t,o,n,i);default:return f}}}();class h{constructor(){this._offlineManagerInitialized=!1,this._pendingMessageCount=0,this._isPendingPrevBatch=!1,this._isPendingCurrentBatch=!1,this._currentBatchSize=p,this._runningMaxOfflineRetry=0,this._isOfflineDynamicBatchSizeEnabled=!1,this._lastBatchRequestTimestamp=0}initState(e){null!=this._offlineResumeManager&&__LOG__(4,void 0,new Error)`[offline-resume] initState called more than once`,this._offlineResumeManager=e.createBlockingStageManager(),(0,c.addPageLoadQplAnnotation)({blocking_resume:!0}),this._createNonblockingStageManager=e.createNonblockingStageManager}processOfflinePreviewIb(e){if((0,c.addPageLoadQplPoint)("offline_preview_received"),this._resetBatchState(),this._isOfflineDynamicBatchSizeEnabled=(0,l.isOfflineDynamicBatchSizeEnabled)(),null!=this._createNonblockingStageManager){const t=this._createNonblockingStageManager;(0,l.isNonBlockingResumeFromOpenTabEnabled)()&&a.Cmd.isMainStreamReadyMd&&this.isResumeFromRestartComplete()?A(e.message)?(__LOG__(2)`[resume-from-open-tab][non-blocking] resume from current state of app`,this._offlineResumeManager=t({mainScreenLoaded:!0})):(__LOG__(2)`[resume-from-open-tab] restart client due to exceed the LIMIT, message: ${e.message}`,(0,u.refreshWindow)()):this._offlineManagerInitialized||this.isResumeFromRestartComplete()||!A(e.message)||((0,c.addPageLoadQplAnnotation)({blocking_resume:!1}),this._offlineResumeManager=t())}this._offlineManagerInitialized=!0,this._offlineResumeManager.processOfflinePreview(e)}processMessageDecryptResult(e){this._offlineResumeManager.processDecryptResult(e),this._pendingMessageCount-=1,this._maybeRequestMoreStanza()}addOfflinePendingMessage(){this.isResumeFromRestartComplete()||(this._pendingMessageCount+=1)}newOfflineStanza(e,t,n){return this._isPendingPrevBatch=!1,this._runningMaxOfflineRetry=Math.max(this._runningMaxOfflineRetry,n),null==this._endBatchCheck&&(this._endBatchCheck=self.setTimeout((()=>{this._maybeRequestMoreStanza(),this._endBatchCheck=null,__LOG__(2)`[offline-resume][adaptive] _endBatchCheck: done`}),0)),this._offlineResumeManager.newOfflineStanza(e,t,n)}offlineStanzaReceivedAfterComplete(){return this._offlineResumeManager.offlineStanzaReceivedAfterComplete()}getOfflineDeliveryProgress(){return this._offlineResumeManager.getOfflineDeliveryProgress()}getOfflineMessageCount(){return Math.max(this._offlineResumeManager.offlineMessagePreviewCounter,0)}isResumeOnSocketDisconnectInProgress(){return this._offlineResumeManager.isResumeOnSocketDisconnectInProgress()}isResumeFromRestartComplete(){return this._offlineResumeManager.isResumeFromRestartComplete()}getHasMessagesToDownload(){return this._offlineResumeManager.getHasMessagesToDownload()}getFinishedDownloading(){return 100===this.getOfflineDeliveryProgress()}processOfflineIb(e){return(0,c.addPageLoadQplPoint)("offline_received"),this._offlineResumeManager.processOfflineSessionComplete(e)}shouldUseOfflineResumeScreen(){return this._offlineResumeManager.shouldUseOfflineResumeScreen()}getResumeUIProgressBarType(){return this._offlineResumeManager.getResumeUIProgressBarType()}hasInitOfflineResumeManager(){return null!=this._offlineResumeManager}_resetBatchState(){this._isPendingPrevBatch=!1,this._isPendingCurrentBatch=!1,this._lastBatchRequestTimestamp=0}_sendBatchRequestIBDebounced(e){const t=!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||0===this._lastBatchRequestTimestamp;null!=this._batchIBCheckTimer&&self.clearTimeout(this._batchIBCheckTimer),t?(__LOG__(2)`[offline-resume][adaptive][debounced] _maybeRequestMoreStanza: request next batch, pending message ${this._pendingMessageCount}`,(0,o.sendBatchRPC)({offlineBatchCount:e}),this._lastBatchRequestTimestamp=Date.now(),this._runningMaxOfflineRetry=0,this._isPendingPrevBatch=!0,this._isPendingCurrentBatch=!1):this._batchIBCheckTimer=self.setTimeout((()=>{this._maybeRequestMoreStanzaDebounced()}),100)}_maybeRequestMoreStanzaDebounced(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.default)((function*(){const n=Date.now()-e._lastBatchRequestTimestamp,r=t||!e.isResumeFromRestartComplete()&&e._pendingMessageCount<=p&&n>=100&&!1===e._isPendingPrevBatch&&!0===e._isPendingCurrentBatch;if((!(e.isResumeFromRestartComplete()||e._isPendingPrevBatch||e._isPendingCurrentBatch)||(e.isResumeFromRestartComplete()||__LOG__(2)`[offline-resume][adaptive][debounced] _maybeRequestMoreStanzaDebounced: skipDebouncing: ${r}, prevPending: ${e._isPendingPrevBatch}, currentPending: ${e._isPendingCurrentBatch}, complete: ${e.isResumeFromRestartComplete()}`,!1!==r))&&e._pendingMessageCount<=p){__LOG__(2)`[offline-resume][adaptive][debounced] _maybeRequestMoreStanzaDebounced: start request next batch`,e._isPendingCurrentBatch=!0,yield(0,s.waitForOfflineProcessReady)();let t=p;t=g(e._runningMaxOfflineRetry,e._currentBatchSize),e._currentBatchSize=t,e._sendBatchRequestIBDebounced(t,r)}}))()}_maybeRequestMoreStanza(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.default)((function*(){if(e._isOfflineDynamicBatchSizeEnabled)return e._maybeRequestMoreStanzaDebounced(t);e.isResumeFromRestartComplete()||e._isPendingPrevBatch||e._isPendingCurrentBatch?e.isResumeFromRestartComplete()||__LOG__(2)`[offline-resume][adaptive] _maybeRequestMoreStanza: skip, prevPending: ${e._isPendingPrevBatch}, currentPending: ${e._isPendingCurrentBatch}, complete: ${e.isResumeFromRestartComplete()}`:e._pendingMessageCount<=p&&(__LOG__(2)`[offline-resume][adaptive] _maybeRequestMoreStanza: start request next batch`,e._isPendingCurrentBatch=!0,yield(0,s.waitForOfflineProcessReady)(),(0,o.sendBatchRPC)({offlineBatchCount:p}),e._isPendingCurrentBatch=!1,e._isPendingPrevBatch=!0,__LOG__(2)`[offline-resume][adaptive] _maybeRequestMoreStanza: request next batch, pending message ${e._pendingMessageCount}`)}))()}}function A(e){return!(e>=(0,l.getNonBlockingOfflineResumeMaxMessageCount)())}t.OfflineMessageHandlerImpl=h;const m=new h;t.OfflineMessageHandler=m},63552:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseAndSerializeOfflinePreAck=function(){return p.apply(this,arguments)},t.sendOfflinePreAck=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(66210),a=n(82749),s=n(42811),l=n(11439),u=n(59516),c=n(51017);const d=s.S_WHATSAPP_NET.toString();function p(){return(p=(0,i.default)((function*(e){var t,n,r,i;const o=e.attrs.class.toString();if("notification"!==o&&"receipt"!==o)return;const a=e.attrs.id.toString(),s=e.tag,l=e.attrs.to.toString(),u=null===(t=e.attrs.participant)||void 0===t?void 0:t.toString(),c=null===(n=e.attrs.type)||void 0===n?void 0:n.toString(),d=(null===(r=e.attrs)||void 0===r?void 0:r.error)?parseInt(null===(i=e.attrs)||void 0===i?void 0:i.error.toString(),10):void 0;_({ackClass:o,ackId:a,to:l,tag:s,participant:u,type:c,error:d})}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){try{var t;const n=(0,s.wap)("ack",{id:(0,s.CUSTOM_STRING)(e.ackId),class:e.ackClass,to:e.to===d?s.S_WHATSAPP_NET:(0,l.JID)((0,c.createWidFromWidLike)(e.to)),type:null!==(t=e.type)&&void 0!==t?t:s.DROP_ATTR,participant:null!=e.participant?(0,l.DEVICE_JID)((0,c.createWid)(e.participant)):s.DROP_ATTR,error:null!=e.error?(0,s.INT)(e.error):s.DROP_ATTR});return(0,a.deprecatedCastStanza)(n,{preAck:!0})}catch(t){__LOG__(4,void 0,new Error,!0)`Failed to send offline pre-ack for envelope: ${e.ackClass} with error: ${t}`,SEND_LOGS("offline-pre-ack")}}))).apply(this,arguments)}const _=(0,o.batch)({delayMs:3e3,maxSize:400},function(){var e=(0,i.default)((function*(e){return yield(0,u.getTable)().create({receipts:[],acks:e}),[]}));return function(){return e.apply(this,arguments)}}())},23389:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addOnlineDanglingReceipts=function(e,t,n){var r;p.has(e)||p.set(e,new Map);const i=p.get(e);(null==i?void 0:i.has(t))||null==i||i.set(t,[]);null==i||null===(r=i.get(t))||void 0===r||r.push(n),f||(f=self.setTimeout((()=>{m(),f=null}),12e4))},t.clearOnlineDanglingReceiptsAfterSending=h,t.clearOrFlushOnlineDanglingReceipts=m,t.hasOnlineDanglingReceipts=_,t.sendAndClearOnlineDanglingReceipts=function(){return g.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(83741),s=n(85512),l=r(n(69353)),u=n(59516),c=n(83752),d=n(56203);const p=new Map;let f=null;function _(){return p.size>0&&(0,a.getABPropConfigValue)("web_pre_acks_m3_receipts_enabled")}function g(){return(g=(0,i.default)((function*(){const e=String((0,o.unixTime)());let t=0;const n=Array.from(p.keys()).map((n=>{const r=p.get(n);if(r)return r.forEach((e=>{t+=e.length})),__LOG__(2)`[online-preacks]: sending online dangling grouped receipts: ${r.size}`,(0,c.sendAggregateReceipts)({to:n,type:c.RECEIPT_TYPE.DELIVERY,t:e,groupedReceipt:r})}));yield Promise.all(n),d.OfflineResumeReporter.logOfflinePreackCount(t,!0),h()}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){return l.default.online?0===p.size?(__LOG__(2)`[online-preacks]: clearOnlineDanglingReceipts: skip due to empty receipts.`,Promise.resolve()):(__LOG__(2)`[online-preacks]: clearOnlineDanglingReceipts: starting sending ping`,yield(0,s.blockSendPing)(),__LOG__(2)`[online-preacks]: clearOnlineDanglingReceipts: starting clean receipts`,void p.clear()):(__LOG__(2)`[online-preacks]: clearOnlineDanglingReceipts: skip due to offline.`,Promise.resolve())}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){if(__LOG__(2)`[online-preacks]: start to clean online dangling receipts due to timeout`,0===p.size)return __LOG__(2)`[online-preacks]: skip due to empty receipts.`,Promise.resolve();if(!l.default.online)return y();__LOG__(2)`[online-preacks]: clearOrFlushOnlineDanglingReceipts: starting sending ping`;try{yield(0,s.blockSendPing)(),__LOG__(2)`[online-preacks]: clearOrFlushOnlineDanglingReceipts: starting clean receipts`,p.clear()}catch(e){__LOG__(2)`[online-preacks]: clearOrFlushOnlineDanglingReceipts: failed to send ping`,y()}}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(){if(!_()||!(0,a.getABPropConfigValue)("web_pre_acks_m3_enabled"))return;__LOG__(2)`[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush due to offline.`;const e=[];p.forEach(((t,n)=>{t.forEach(((t,r)=>{t.forEach((t=>{e.push({from:String(n),author:String(r),externalId:t})}))}))})),e.length>0&&(__LOG__(2)`[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush ${e.length} receipts`,yield(0,u.getTable)().create({receipts:e,acks:[]}),p.clear())}))).apply(this,arguments)}},65068:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.classifyMsgs=x,t.storeMsgs=function(){return k.apply(this,arguments)};var i=r(n(48926)),o=n(92271),a=n(21193),s=n(23041),l=n(68593),u=n(31654),c=n(1619),d=n(41404),p=n(63007),f=n(15208),_=n(86725),g=n(70817),h=n(24992),A=n(29365),m=n(74773),E=n(7103),y=n(25078),S=n(12364),v=n(82740),I=n(70867),T=n(93444),b=n(78891),M=n(53952),P=n(50374),C=n(26368),O=n(73602),R=n(29409),N=n(15553),w=n(61627),D=n(10139);function L(){return B.apply(this,arguments)}function B(){return(B=(0,i.default)((function*(e){yield(0,D.getMessageTable)().bulkRemove(e.map((e=>e.id.toString())))}))).apply(this,arguments)}function k(){return(k=(0,i.default)((function*(e){if(0!==e.length)try{const t=yield x(e),n=Object.entries(t).map((e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0&&`${t}: ${n.length}`})).filter(Boolean).join(", ");__LOG__(2)`[store-msgs] start: ${n}`;const{newMsgs:r,replaceMsgs:i,revokeMsgs:a,paymentMsgs:l,reactionMsgs:d,groupInviteMsgs:f,chatsWithNewOfflineMsg:_,pollUpdateMsgs:h,removedPlaceholders:m,keepInChatMessages:b,editProtocolMsgs:P,replyMsgs:C,newsletterMsgs:O,pinMsgs:R,unifiedAddons:B,botInvokeSystemMsgs:k,replaceCommentMsgs:F}=t,K=yield(0,u.applyOrphanRevokes)(r);if(yield(0,A.persistNewMessagesInBulk)(K,_),yield(0,A.persistNewNewsletterMessagesInBulk)(O),yield(0,D.getMessageTable)().bulkCreateOrReplace(i),yield L(F),yield U(a),yield(0,S.processPaymentMessages)(l),yield(0,I.processReactionMsgs)(d),yield(0,y.processGroupInviteMessages)(f),yield(0,c.frontendSendAndReceive)("processKeepInChatMessages",{keepInChatMessages:b,allowNotification:!1}),yield(0,E.processEditProtocolMsgs)(P),yield(0,T.processReplyMsgs)(C),yield(0,v.processPollUpdateMsgs)(h),(0,w.isPinnedMessagesM1ReceiverEnabled)()&&(yield(0,N.groupAndProcessPinMessages)(R)),yield(0,s.processMsgs)(B),yield(0,M.handleOfflineForMessageRange)(e),(0,p.isBotReceiveEnabled)()&&k.length>0){const e=new Set;k.forEach((t=>{e.has(t.id.remote.toString())||(e.add(t.id.remote.toString()),(0,c.frontendFireAndForget)("updateBotInvokeSystemMsgCreated",{chatId:t.id.remote}))}))}const Y=e.map((e=>e.id.toString()));try{yield(0,o.checkOrphanMutations)(Y,_),yield(0,g.checkUpdateForOrphanReactions)(Y)}catch(t){__LOG__(4,void 0,new Error)`storeMsgs: checkOrphanMutations failed during handleSingleMsg for: ${String(Y.join(" "))} chat: ${String(e[0].id.remote)} Error: ${t.name}, message: ${t.message}, stack: ${t.stack}`}G(r,m),__LOG__(2)`[store-msgs] done: ${n}`}catch(e){__LOG__(4,void 0,new Error,!0)`[store-msgs] Error: ${e.name}, message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("storeMsgs-error",.01)}}))).apply(this,arguments)}function G(e,t){const n=e.filter((e=>(0,h.isPlaceholderMsg)(e.type)));n.length>0&&(0,P.addPlaceholderWam)(n),t.length>0&&(0,P.populatePlaceholderWam)(t)}function U(e){const t=[];return e.forEach((e=>{e.protocolMessageKey&&t.push({revokeMsgKey:e.protocolMessageKey,newMsgKey:e.id,timestamp:e.t,subtype:e.subtype,sender:(0,C.getSender)(e),revokeTimestamp:e.t,disappearingModeInitiator:e.disappearingModeInitiator,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp})})),(0,b.processRevokeMsgs)(t).then(function(){var e=(0,i.default)((function*(e){if(t.length>0){const e=[],r=new Set;t.forEach((t=>{e.push(t.revokeMsgKey.toString());const n=t.revokeMsgKey.remote.toString();r.add(n)}));const i=n(74e3).getJobManager;yield i().waitUntilPersisted(R.jobSerializers.deleteAddOns(Array.from(r.values()).join(","),e))}return e}));return function(){return e.apply(this,arguments)}}())}function x(){return F.apply(this,arguments)}function F(){return(F=(0,i.default)((function*(e){const t=yield(0,D.getMessageTable)().bulkGet(e.map((e=>String(e.id))),!1),n=[],r=[],i=[],o=[],s=[],u=[],c=[],p=[],g=[],A=[],E=[],y=[],S=[],v=new Set,I=new Map,T=new Map,b=[],M=[];return e.forEach(((e,P)=>{const R=e,N=String(e.id),w=t[P];if(null!=w&&Y(e,w)){if(e.type===O.MSG_TYPE.COMMENT){const t=(0,l.castToAddonMsgData)(R);(0,a.isUnifiedInfraEnabledForType)(e.type)&&null!=t&&S.push(t),M.push(e)}else{const e=(0,m.dbRowFromMessage)(R);e.t=w.t,e.internalId=w.internalId,e.rowId=w.rowId,e.pendingReadReceipt=w.pendingReadReceipt,(0,d.bizHostedDevicesEnabled)()&&!0!==w.placeholderCreatedWhenAccountIsHosted&&!0===e.senderOrRecipientAccountTypeHosted&&(e.hostedBizEncStateMismatch=!0),r.push(e)}(0,h.isPlaceholderMsg)(w.type)&&T.set(N,R)}else if(!w||(0,h.isFutureproofMsg)(w.type)&&K(e)){const t=I.get(N);if(t&&!(0,h.isPlaceholderMsg)(t.type))n.push(e.id.id);else if(e.type===O.MSG_TYPE.NOTIFICATION_TEMPLATE&&"bot_invoke_disclaimer"===e.subtype&&b.push(R),(0,C.getIsNewsletterMsg)(e)&&e.type!==O.MSG_TYPE.PROTOCOL&&"admin_revoke"!==e.subtype)E.push(R);else if((0,a.isUnifiedInfraEnabledForType)(e.type)&&null!=(0,l.castToAddonMsgData)(R)){const e=(0,l.castToAddonMsgData)(R);null!=e&&S.push(e)}else e.type===O.MSG_TYPE.KEEP_IN_CHAT?c.push(R):null!=(0,_.castToReactionMsgData)(R)?o.push((0,_.assertReactionMsgData)(R)):e.kind===O.MsgKind.PollVoteEncrypted?u.push(e):e.type===O.MSG_TYPE.PIN_MESSAGE?y.push(R):(0,f.castToProtocolRevokeMsgData)(R)?i.push((0,f.assertProtocolRevokeMsgData)(R)):["sender_revoke","admin_revoke"].includes(e.subtype)?(i.push(e),__LOG__(4,void 0,new Error,!0,["messaging"])`storeMsgs: receive a protocol message with a type ${e.type}`,SEND_LOGS("storeMsgs-protocol",.01,"messaging")):e.type===O.MSG_TYPE.PAYMENT&&"send"===e.subtype||"payment_action_request_declined"===e.subtype||"payment_transaction_request_cancelled"===e.subtype?(s.push(R),I.set(N,R),v.add(String(e.id.remote))):e.type===O.MSG_TYPE.GROUPS_V4_INVITE?(p.push(R),I.set(N,R),v.add(String(e.id.remote))):e.type===O.MSG_TYPE.PROTOCOL&&"message_edit"===e.subtype?g.push(R):e.quotedMsg?(A.push(R),I.set(N,R),v.add(String(e.id.remote))):e.type!==O.MSG_TYPE.PROTOCOL&&(I.set(N,R),v.add(String(e.id.remote)))}else n.push(e.id.id)})),n.length>0&&__LOG__(2)`[store-msgs] [classify-msgs]: skip for ${n.length} duplicate messages, with id ${n}`,{newMsgs:Array.from(I.values()),chatsWithNewOfflineMsg:Array.from(v),removedPlaceholders:Array.from(T.values()),replaceMsgs:r,revokeMsgs:i,paymentMsgs:s,reactionMsgs:o,pollUpdateMsgs:u,keepInChatMessages:c,groupInviteMsgs:p,editProtocolMsgs:g,replyMsgs:A,newsletterMsgs:E,pinMsgs:y,unifiedAddons:S,botInvokeSystemMsgs:b,replaceCommentMsgs:M}}))).apply(this,arguments)}function K(e){if((0,a.isUnifiedInfraEnabledForType)(e.type))return!0;const{getAddOnProviderForMsg:t}=n(2537);return Boolean(t(e))}function Y(e,t){return(0,h.isPlaceholderMsg)(t.type)&&!(0,h.isPlaceholderMsg)(e.type)||(0,h.isFutureproofMsg)(t.type)&&!(0,h.isFutureproofMsg)(e.type)&&!K(e)}},88411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateClockSkew=function(e){const t=Date.now()/1e3,n=Math.round(t-e),s=Math.round(n/r.HOUR_SECONDS);0!==s&&(0,i.getABPropConfigValue)("log_clock_skew")&&new a.ClockSkewDifferenceTWamEvent({clockSkewHourly:-1*s}).commit();(0,r.setClockSkew)(n),(0,o.frontendFireAndForget)("setWebClockSkew",{newClockSkew:n})};var r=n(29987),i=n(83741),o=n(1619),a=n(87452)},79388:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMeLid=function(e){const t=(0,o.getMaybeMeLid)(!1);if(null==t&&null==e)return;if(null==t&&null!=e)return void(0,o.setMeLid)(e);if(null!=t&&null==e)return;if((0,i.default)(t,"lid").equals(e))return;(0,o.setMeLid)((0,i.default)(e,"nextLid"))};var i=r(n(49619)),o=n(3885)},50599:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleCallReceipt=function(e){const t=u.parse(e);if(t.error)return __LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,Promise.reject(t.error);const{stanzaId:n,type:r,from:o}=t.success;return Promise.resolve((0,i.wap)("ack",{id:(0,i.CUSTOM_STRING)(n),to:(0,a.JID)(o),from:(0,a.JID)((0,l.getMaybeMeUser)()),class:"receipt",type:(0,i.MAYBE_CUSTOM_STRING)(r)}))};var i=n(42811),o=r(n(82601)),a=n(11439),s=n(15610),l=n(3885);const u=new o.default("callReceiptParser",(e=>{e.assertTag("receipt");if(!(e.maybeChild("offer")||e.maybeChild("accept")||e.maybeChild("reject")))throw e.createParseError("Unrecognized call stanza");return{stanzaId:e.attrString("id"),type:e.hasAttr("type")?e.attrString("type"):null,from:(0,s.jidWithTypeToWid)(e.attrJidWithType("from"))}}))},87116:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,l;const u=e.maybeChild("address"),c=u?u.contentString():void 0;let d;const p=e.maybeChild("description");p&&(d=p.contentString());const f=e.maybeChild("email"),_=f?f.contentString():void 0,g=e.maybeChild("latitude"),h=g?parseFloat(g.contentString()):void 0,A=e.maybeChild("longitude"),m=A?parseFloat(A.contentString()):void 0,E=e.maybeChild("vertical");let y;if(E){const e=E.maybeAttrString("canonical"),t=E.hasContent()?E.contentString():void 0;y={name:t,canonical:e}}let S=[];e.forEachChildWithTag("website",(e=>{S.push(e.contentString())}));const v=[],I=e.maybeChild("categories");I&&I.forEachChildWithTag("category",(e=>{const t=e.attrString("id");v.push({id:t,localized_display_name:e.contentString()})}));let T;const b=e.maybeChild("business_hours");if(b){const e=b.maybeAttrString("timezone"),t=[];b.forEachChildWithTag("business_hours_config",(e=>{t.push({day_of_week:e.attrString("day_of_week"),mode:e.attrString("mode"),open_time:e.hasAttr("open_time")?parseInt(e.attrString("open_time"),10):0,close_time:e.hasAttr("close_time")?parseInt(e.attrString("close_time"),10):0})})),T={config:t,timezone:e}}let M;const P=e.maybeChild("profile_options");if(P){M={};const e=P.maybeChild("commerce_experience");var C;if(e)M.commerce_experience=null!==(C=a.CommerceExperienceTypes.cast(e.contentString()))&&void 0!==C?C:a.CommerceExperienceTypes.NONE;const t=P.maybeChild("cart_enabled");t&&(M.cart_enabled="true"===t.contentString());const n=P.maybeChild("shop_url");n&&(M.shop_url=n.contentString());const r=P.maybeChild("commerce_manager_url");r&&(M.commerce_manager_url=r.contentString());const i=P.maybeChild("is_banned");i&&(M.is_banned="true"===i.contentString());const o=P.maybeChild("direct_connection");o&&(M.direct_connection="true"===o.contentString());const s=P.maybeChild("is_profile_edit_disabled");s&&(M.is_profile_edit_disabled="true"===s.contentString())}const O=e.maybeChild("direct_connection");let R;if(O){const e=O.maybeChild("default_postcode");R={enabled:"true"===O.maybeAttrString("enabled"),defaultPostcode:e?{code:e.attrString("code"),locationName:e.attrString("location_name")}:void 0}}const N=e.maybeChild("catalog_status"),w=N?N.attrString("status"):void 0;let D,L={},B={},k=!1;const G=e.maybeChild("linked_accounts");if(G){k=!0;const e=G.maybeChild("fb_page");if(e){const t=e.maybeChild("display_name"),n=e.maybeChild("likes");L={displayName:null==t?void 0:t.contentString(),likes:null==n?void 0:n.contentString(),id:e.maybeAttrString("id")}}const t=G.maybeChild("ig_professional");if(t){const e=t.maybeChild("ig_handle"),n=t.maybeChild("followers");B={handle:null==e?void 0:e.contentString(),followers:null==n?void 0:n.contentString()}}}const U=e.maybeChild("cover_photo"),x=U?{id:U.attrString("id"),url:new URL(U.contentString())}:void 0;if((0,i.isCustomURLViaBizProfileEnabled)()){const t=e.maybeChild("custom_url");t&&(D=null==t?void 0:t.contentString())}const F=o.BizBotAutomatedType.cast(null===(t=e.maybeChild("automated_type"))||void 0===t?void 0:t.contentString());let K,Y=o.BotWelcomeMsgProtocolModeType.cast(null===(n=e.maybeChild("welcome_message_protocol_mode"))||void 0===n?void 0:n.contentString());const j=e.maybeChild("prompts");j&&(K=function(e){const t=[];return e.forEachChildWithTag("prompt",(e=>{var n,r;const i=e.maybeChild("emoji"),o=null!==(n=null==i?void 0:i.contentString())&&void 0!==n?n:"",a=e.maybeChild("text"),s=null!==(r=null==a?void 0:a.contentString())&&void 0!==r?r:"";t.push({emoji:o,text:s})})),t}(j));let V,W=null===(r=e.maybeChild("commands"))||void 0===r||null===(l=r.maybeChild("description"))||void 0===l?void 0:l.contentString();const H=e.maybeChild("commands");H&&(V=function(e){const t=[];return e.forEachChildWithTag("command",(e=>{var n,r;const i=e.maybeChild("name"),o=null!==(n=null==i?void 0:i.contentString())&&void 0!==n?n:"",a=e.maybeChild("description"),s=null!==(r=null==a?void 0:a.contentString())&&void 0!==r?r:"";t.push({name:o,description:s})})),t}(H));const Q={address:c,description:d,email:_,latitude:h,longitude:m,vertical:y,website:S,categories:v,business_hours:T,catalog_status:w,profile_options:M,fbPage:L,igProfessional:B,isProfileLinked:k,directConnection:R,cover_photo:x,customUrlPath:D,prompts:K,commands:V,commands_description:W,automated_type:F,welcome_message_protocol_mode:Y};return(0,s.default)(Q)};var i=n(56660),o=n(42467),a=n(20938),s=r(n(8316))},2718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.attrEnum("verified_level",r.MSG_VERIFIED_LEVEL),n=e.hasContent()?e.contentBytes():null,s=(0,o.asMaybeNonEmptyString)(e.maybeAttrString("serial")),{serial:l,name:u,isApi:c,isSmb:d}=n&&function(e){const t=(0,a.getParsedProtoObjects)(e);if(null==t?void 0:t.details){const{name:e,serial:n,isApi:r,isSmb:i}=(0,a.extractCertificateDetailsParams)(t.details);return{name:e,serial:String(n),isApi:r,isSmb:i}}}(n)||{},p=i.ActualActorsEnumType.cast(e.maybeAttrInt("actual_actors")),f=i.HostStorageEnumType.cast(e.maybeAttrInt("host_storage")),_=e.maybeAttrInt("privacy_mode_ts");return{level:t,serial:null!=s?s:l,name:u,isApi:!0===c,isSmb:!0===d,privacyMode:null!=p&&null!=f&&null!=_?{actualActors:p,hostStorage:f,privacyModeTs:_}:null}};var r=n(33351),i=n(12987),o=n(29163),a=n(35798)},26134:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseProductNode=void 0,t.productModelToNode=function(e){var t,n;const r=e.id?(0,o.wap)("id",null,e.id.toString()):void 0,a=e.description?(0,o.wap)("description",null,e.description):void 0,c=e.url?(0,o.wap)("url",null,e.url):void 0,d=e.retailerId?(0,o.wap)("retailer_id",null,e.retailerId):void 0,p=null!=e.priceAmount1000?(0,o.wap)("currency",null,e.currency):void 0,f=null!=e.priceAmount1000?(0,o.wap)("price",null,e.priceAmount1000.toString()):void 0,_=[(0,o.wap)("image",null,(0,o.wap)("url",null,e.imageCdnUrl))].concat(null===(t=e.additionalImageCdnUrl)||void 0===t?void 0:t.map((e=>(0,o.wap)("image",null,(0,o.wap)("url",null,e))))),g=function(e){var t,n,r,i,a,s;const{isExempt:l,hasCountryCodeOrigin:c,hasImporterName:d,hasImporterAddress:p}=u(e);return!l&&(c||d||p)?(0,o.wap)("compliance_info",null,c?(0,o.wap)("country_code_origin",null,null==e?void 0:e.countryCodeOrigin):void 0,d?(0,o.wap)("importer_name",null,null==e?void 0:e.importerName):void 0,p?(0,o.wap)("importer_address",null,(null==e||null===(t=e.importerAddress)||void 0===t?void 0:t.street1)?(0,o.wap)("street1",null,e.importerAddress.street1):void 0,(null==e||null===(n=e.importerAddress)||void 0===n?void 0:n.street2)?(0,o.wap)("street2",null,e.importerAddress.street2):void 0,(null==e||null===(r=e.importerAddress)||void 0===r?void 0:r.city)?(0,o.wap)("city",null,e.importerAddress.city):void 0,(null==e||null===(i=e.importerAddress)||void 0===i?void 0:i.region)?(0,o.wap)("region",null,e.importerAddress.region):void 0,(null==e||null===(a=e.importerAddress)||void 0===a?void 0:a.postalCode)?(0,o.wap)("postal_code",null,e.importerAddress.postalCode):void 0,(null==e||null===(s=e.importerAddress)||void 0===s?void 0:s.countryCode)?(0,o.wap)("country_code",null,e.importerAddress.countryCode):void 0):void 0):void 0}(e.complianceInfo),h=(0,i.default)({is_hidden:e.isHidden?"true":"false"},(null===(n=e.complianceInfo)||void 0===n?void 0:n.countryCodeOrigin)===String(l.SyntheticCountryCode.NotApplicable)?{compliance_category:s.ProductComplianceCategory.CountryOriginExempt}:void 0);return(0,o.wap)("product",h,r,(0,o.wap)("name",null,e.name),a,c,d,(0,o.wap)("media",null,_),f,p,g)},t.scanComplianceInfoForMissingData=u;var i=r(n(81109)),o=n(42811),a=n(46292),s=n(90002),l=n(47344);function u(e){const t=(null==e?void 0:e.countryCodeOrigin)===String(l.SyntheticCountryCode.NotApplicable),n=!t&&void 0!==(null==e?void 0:e.countryCodeOrigin),r=!t&&void 0!==(null==e?void 0:e.importerName);return{isExempt:t,hasImporterAddress:!t&&void 0!==(null==e?void 0:e.importerAddress)&&[e.importerAddress.street1,e.importerAddress.street2,e.importerAddress.city,e.importerAddress.region,e.importerAddress.postalCode,e.importerAddress.countryCode].some((e=>e)),hasImporterName:r,hasCountryCodeOrigin:n}}t.parseProductNode=e=>{var t,n,r;const o=e.child("id").contentString(),u=e.maybeChild("url");let c="";u&&u.hasContent()&&(c=u.contentString());const d=e.child("name").contentString(),p=null!==(t=e.maybeAttrString("availability"))&&void 0!==t?t:s.ProductAvailability.UNKNOWN;let f=a.CART_ITEM_MAX_QUANTITY;const _=e.maybeAttrString("max_available");null!=_&&(f=Number(_));const g=e.maybeChild("max_available"),h=null==g?void 0:g.contentString();null!=h&&(f=Number(h));const A=e.maybeChild("description"),m=A?A.contentString():"",E=e.maybeChild("belongs_to"),y="true"===(null==E?void 0:E.contentString())||!1,S=[],v=[],I=[],T=e.child("media");let b=!0;T.forEachChildWithTag("image",(e=>{if(b)b=!1,S.push({key:"requested",value:e.child("request_image_url").contentString()}),S.push({key:"full",value:e.child("original_image_url").contentString()}),I.push(e.child("id").contentString());else{const t=[];t.push({key:"requested",value:e.child("request_image_url").contentString()}),t.push({key:"full",value:e.child("original_image_url").contentString()}),v.push(t),I.push(e.child("id").contentString())}}));const M=e.maybeChild("status_info"),P=(null==M?void 0:M.child("status").contentString())||"APPROVED",C=null==M||null===(n=M.maybeChild("can_appeal"))||void 0===n?void 0:n.contentString(),O=e.maybeChild("currency"),R=O?O.contentString():void 0,N=e.maybeChild("price"),w=null==N?void 0:N.contentString(),D=e.maybeChild("retailer_id"),L=D?D.contentString():"",B=!!e.hasAttr("is_hidden")&&"true"===e.attrString("is_hidden"),k=e.hasAttr("compliance_category")?s.ProductComplianceCategory.cast(e.attrString("compliance_category")):s.ProductComplianceCategory.Default,G=e.maybeChild("sale_price"),U=G?(0,i.default)({sale_price:null===(r=G.maybeChild("price"))||void 0===r?void 0:r.contentString()},G.hasChild("start_date")&&G.hasChild("end_date")?{sale_start_date:G.child("start_date").contentString(),sale_end_date:G.child("end_date").contentString()}:null):null,x=(0,i.default)({id:o,is_hidden:B,url:c,name:d,description:m,availability:p,max_available:f,additional_image_cdn_urls:v,image_cdn_urls:S,capability_to_review_status:[{key:"WHATSAPP",value:P}],whatsapp_product_can_appeal:"true"===C,image_hashes_for_whatsapp:I,currency:R,price:w,retailer_id:L,checkmark:y},U),F=e.maybeChild("compliance_info");return k===s.ProductComplianceCategory.CountryOriginExempt?x.compliance_info={country_code_origin:String(l.SyntheticCountryCode.NotApplicable)}:F&&(x.compliance_info=function(e){var t;const n=e.child("country_code_origin").contentString(),r=null===(t=e.maybeChild("importer_name"))||void 0===t?void 0:t.contentString(),i=e.maybeChild("importer_address"),o={country_code_origin:n,importer_name:r};var a,s,l;i&&(o.importer_address={street1:i.child("street1").contentString(),street2:null===(a=i.maybeChild("street2"))||void 0===a?void 0:a.contentString(),postal_code:null===(s=i.maybeChild("postal_code"))||void 0===s?void 0:s.contentString(),city:i.child("city").contentString(),region:null===(l=i.maybeChild("region"))||void 0===l?void 0:l.contentString(),country_code:i.child("country_code").contentString()});return o}(F)),x}},9022:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseProductGraphQL=function(e){var t,n,r,p,f,_,g,h,A;let{status_info:m,sale_price:E,product_availability:y,compliance_info:S}=e,v=(0,o.default)(e,c);const[I,...T]=null!==(t=null===(n=v.media)||void 0===n?void 0:n.images)&&void 0!==t?t:[],b=(0,i.default)((0,i.default)({id:(0,a.default)(v.id,"product.id"),retailer_id:null!==(r=v.retailer_id)&&void 0!==r?r:"",name:(0,a.default)(v.name,"product.name"),description:null!==(p=v.description)&&void 0!==p?p:"",url:null!==(f=v.url)&&void 0!==f?f:"",currency:v.currency,price:v.price,is_hidden:"ISHIDDEN_TRUE"===v.is_hidden,max_available:null!==(_=v.max_available)&&void 0!==_?_:s.CART_ITEM_MAX_QUANTITY,availability:y&&y in d?d[y]:l.ProductAvailability.UNKNOWN},null!=(null==E?void 0:E.price)?(0,i.default)({sale_price:E.price},null!=E.start_date&&null!=E.end_date?{sale_start_date:E.start_date,sale_end_date:E.end_date}:null):null),{},{checkmark:"true"===v.belongs_to,image_hashes_for_whatsapp:(null!==(g=null===(h=v.media)||void 0===h?void 0:h.images)&&void 0!==g?g:[]).map((e=>(0,a.default)(e.id,"img.id"))),image_cdn_urls:I?[{key:"requested",value:(0,a.default)(I.request_image_url,"firstImage.request_image_url")},{key:"full",value:(0,a.default)(I.original_image_url,"firstImage.original_image_url")}]:[],additional_image_cdn_urls:T.map((e=>[{key:"requested",value:(0,a.default)(e.request_image_url,"img.request_image_url")},{key:"full",value:(0,a.default)(e.original_image_url,"img.original_image_url")}])),whatsapp_product_can_appeal:"true"===(null==m?void 0:m.can_appeal),capability_to_review_status:[{key:"WHATSAPP",value:null!==(A=null==m?void 0:m.status)&&void 0!==A?A:"APPROVED"}]});if(null!=S){var M,P,C,O,R;const{importer_address:e}=S;b.compliance_info="COMPLIANCECATEGORY_COUNTRYORIGINEXEMPT"===v.compliance_category?{country_code_origin:u.SyntheticCountryCode.NotApplicable}:{country_code_origin:null!==(M=S.country_code_origin)&&void 0!==M?M:void 0,importer_name:null!==(P=S.importer_name)&&void 0!==P?P:void 0,importer_address:{street1:(0,a.default)(null==e?void 0:e.street1,"importerAddress?.street1"),street2:null!==(C=null==e?void 0:e.street2)&&void 0!==C?C:void 0,postal_code:null!==(O=null==e?void 0:e.postal_code)&&void 0!==O?O:void 0,city:(0,a.default)(null==e?void 0:e.city,"importerAddress?.city"),region:null!==(R=null==e?void 0:e.region)&&void 0!==R?R:void 0,country_code:(0,a.default)(null==e?void 0:e.country_code,"importerAddress?.country_code")}}}return b};var i=r(n(81109)),o=r(n(6479)),a=r(n(49619)),s=n(46292),l=n(90002),u=(n(69481),n(47344));const c=["status_info","sale_price","product_availability","compliance_info"];const d={AVAILABLE_FOR_ANOTHER_POSTCODE:l.ProductAvailability.AVAILABLE_FOR_ANOTHER_POSTCODE,IN_STOCK:l.ProductAvailability.IN_STOCK,OUT_OF_STOCK:l.ProductAvailability.OUT_OF_STOCK}},79920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogEventLogger=t.GRAPHQL_CATALOG_ENDPOINT=void 0;var r=n(60731),i=n(16586),o=n(94035);const a=i.GRAPHQL_CATALOG_ENDPOINT;t.GRAPHQL_CATALOG_ENDPOINT=a;t.createCatalogEventLogger=e=>{const t=new r.GraphqlCatalogRequestWamEvent({graphqlCatalogEndpoint:e});return{success:()=>{t.set({graphqlErrorCode:-1,graphqlRequestResult:o.GRAPHQL_REQUEST_RESULT.SUCCESS}),t.commit()},failure:e=>{let[n]=e;t.set({graphqlErrorCode:n.code,graphqlRequestResult:o.GRAPHQL_REQUEST_RESULT.FAILURE}),t.commit()}}}},43976:(e,t,n)=>{"use strict";var r=n(95318);t.O=void 0;var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(42811),l=r(n(56389)),u=n(91563),c=n(11439),d=n(85074),p=n(51017);const f=new a.default("getPublicKeyResponse",(e=>{var t,n;e.assertTag("iq"),e.assertFromServer();return{certificate:null===(t=e.maybeChild("public_key"))||void 0===t||null===(n=t.maybeChild("pem"))||void 0===n?void 0:n.contentString()}})),_=(0,d.defineWebPersistedJob)().finalStep("sendStanza",function(){var e=(0,i.default)((function*(e){let{businessJid:t}=e;const n=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,type:"get",smax_id:(0,s.SMAX_ID)(l.default.BizGetPublicKey),xmlns:"w:biz:catalog",id:(0,s.generateId)()},(0,s.wap)("public_key",{jid:(0,c.USER_JID)((0,p.createWid)(t))})),r=yield(0,o.deprecatedSendIq)(n,f);if(r.success)return r.result;throw new u.ServerStatusCodeError(r.errorCode)}));return function(){return e.apply(this,arguments)}}()).end();t.O=_},94088:(e,t,n)=>{"use strict";var r=n(95318);t.Y=void 0;var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(42811),l=n(91563),u=n(11439),c=n(85074),d=n(51017);function p(e,t){var n;return null==e||null===(n=e.maybeChild(t))||void 0===n?void 0:n.contentString()}const f=new a.default("getSignedUserInfoResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.maybeChild("signed_user_info");return{phoneNumber:p(t,"phone_number"),phoneNumberSignatureExpiration:p(t,"ttl_timestamp"),phoneNumberSignature:p(t,"phone_number_signature"),businessDomain:p(t,"business_domain")}})),_=(0,c.defineWebPersistedJob)().finalStep("sendStanza",function(){var e=(0,i.default)((function*(e){let{businessJid:t}=e;const n=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:(0,s.generateId)()},(0,s.wap)("signed_user_info",{biz_jid:(0,u.USER_JID)((0,d.createWid)(t))})),r=yield(0,o.deprecatedSendIq)(n,f);if(!r.success)throw new l.ServerStatusCodeError(r.errorCode);return r.result}));return function(){return e.apply(this,arguments)}}()).end();t.Y=_},32686:(e,t,n)=>{"use strict";var r=n(95318);t.K=void 0;var i,o=r(n(48926)),a=n(82749),s=r(n(82601)),l=r(n(49619)),u=n(42811),c=r(n(56389)),d=n(91563),p=n(26134),f=n(56660),_=n(9022),g=n(79920),h=n(11439),A=n(85074),m=n(56110),E=r(n(58230)),y=n(49755),S=n(69481),v=n(51017),I=r(n(9539));const T=new s.default("productListResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("product_list"),n=[];return t.forEachChildWithTag("product",(e=>{const t=e.maybeChild("id");if(!t)return;const r=e.maybeChild("status");(null==r?void 0:r.contentString())===y.INVALID_PRODUCT_TOKEN?n.push({id:t.contentString(),status:y.INVALID_PRODUCT_TOKEN}):n.push((0,p.parseProductNode)(e))})),n})),b=function(){var e=(0,o.default)((function*(e){let{catalogWid:t,productIds:n,width:r,height:i,directConnectionEncryptedInfo:o}=e;const s=(0,u.wap)("iq",{to:u.S_WHATSAPP_NET,type:"get",smax_id:(0,u.SMAX_ID)(c.default.CatalogGetProductList),xmlns:"w:biz:catalog",id:(0,u.generateId)()},(0,u.wap)("product_list",{jid:(0,h.USER_JID)((0,v.createWid)(t))},n.map((e=>(0,u.wap)("product",null,(0,u.wap)("id",null,e)))).concat((0,I.default)([(0,u.wap)("width",null,r.toString()),(0,u.wap)("height",null,i.toString()),o?(0,u.wap)("direct_connection_encrypted_info",null,o):null])))),l=yield(0,a.deprecatedSendIq)(s,T);if(l.success)return l.result;throw new d.ServerStatusCodeError(l.errorCode)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,o.default)((function*(e){try{var t,r;const{catalogWid:o,productIds:a,width:s,height:u,directConnectionEncryptedInfo:c}=e,d=yield(0,S.fetchQuery)(void 0!==i?i:i=n(74489),{request:{product_list:{jid:o.toString(),products:a.map((e=>({id:e}))),width:String(s),height:String(u),direct_connection_encrypted_info:c}}},{eventLogger:(0,g.createCatalogEventLogger)(g.GRAPHQL_CATALOG_ENDPOINT.GET_PRODUCT_LIST)});return(0,l.default)(null==d||null===(t=d.xwa_product_catalog_get_product_list)||void 0===t||null===(r=t.product_list)||void 0===r?void 0:r.products.map(_.parseProductGraphQL),"data?.xwa_product_catalog_get_product_list?.product_list?.products.map(parseProductGraphQL)")}catch(t){return t instanceof m.GraphQLServerError&&(0,E.default)(t),__LOG__(3)`GraphQL: Failed fetching xwa_product_catalog_get_product_list query. Falling back to IQ.`,b(e)}}));return function(){return e.apply(this,arguments)}}(),P=(0,A.defineWebPersistedJob)().finalStep("sendStanza",(e=>((0,f.graphQLForCatalogM1Enabled)()?M:b)(e))).end();t.K=P},25180:(e,t,n)=>{"use strict";var r=n(95318);t.r=void 0;var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(42811),l=r(n(56389)),u=n(91563),c=n(11439),d=n(85074),p=n(51017);const f=new a.default("productResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("result_code"),n=e.maybeChild("encrypted_location_name"),r=null==n?void 0:n.contentString();return{resultCode:t.contentString(),encryptedLocationName:r}})),_=(0,d.defineWebPersistedJob)().finalStep("sendStanza",function(){var e=(0,i.default)((function*(e){let{businessJid:t,directConnectionEncryptedInfo:n}=e;const r=(0,s.wap)("iq",{id:(0,s.generateId)(),xmlns:"w:biz:catalog",type:"get",to:s.S_WHATSAPP_NET,smax_id:(0,s.SMAX_ID)(l.default.CatalogVerifyPostcode)},(0,s.wap)("verify_postcode",{biz_jid:(0,c.USER_JID)((0,p.createWid)(t))},(0,s.wap)("direct_connection_encrypted_info",null,n))),i=yield(0,o.deprecatedSendIq)(r,f);if(i.success)return i.result;throw new u.ServerStatusCodeError(i.errorCode)}));return function(){return e.apply(this,arguments)}}()).end();t.r=_},74489:e=>{"use strict";const t={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"request"}],kind:"Fragment",metadata:null,name:"WAWebQueryProductListCatalogJobQuery",selections:o=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetProductListResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_product_list",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogGetProductListResponseSuccessProductList",kind:"LinkedField",name:"product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XWACatalogProduct",kind:"LinkedField",name:"products",plural:!0,selections:[r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_available",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"WAWebQueryProductListCatalogJobQuery",selections:o},params:{id:"WAWebQueryProductListCatalogJobQuery",metadata:{},name:"WAWebQueryProductListCatalogJobQuery",operationKind:"query",text:null}};var n,r,i,o;t.hash="5d3b936da25c831ffeb17f59668da9c4",e.exports=t},1802:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMerchantCompliance=function(){return _.apply(this,arguments)},t.setMerchantCompliance=function(){return g.apply(this,arguments)};var i=r(n(48926)),o=r(n(81109)),a=n(82749),s=r(n(82601)),l=n(42811),u=r(n(56389)),c=n(91563),d=n(11439);const p=e=>{var t,n,r;return{email:(null==e||null===(t=e.maybeChild("email"))||void 0===t?void 0:t.contentString())||"",landline_number:(null==e||null===(n=e.maybeChild("landline_number"))||void 0===n?void 0:n.contentString())||"",mobile_number:(null==e||null===(r=e.maybeChild("mobile_number"))||void 0===r?void 0:r.contentString())||""}},f=new s.default("merchantComplianceResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=[];return e.forEachChildWithTag("merchant_info",(e=>{var n,r,i,a;const s=(null===(n=e.maybeChild("entity_name"))||void 0===n?void 0:n.contentString())||"",l=(null===(r=e.maybeChild("entity_type"))||void 0===r?void 0:r.contentString())||"",u=null===(i=e.maybeChild("entity_type_custom"))||void 0===i?void 0:i.contentString(),c="true"===e.attrString("is_registered"),d=e.maybeChild("customer_care_details"),f=e.maybeChild("grievance_officer_details"),_=(0,o.default)({},p(d)),g=(0,o.default)({name:(null==f||null===(a=f.maybeChild("name"))||void 0===a?void 0:a.contentString())||""},p(f));t.push({entity_name:s,entity_type:l,is_registered:c,entity_type_custom:u,customer_care_details:_,grievance_officer_details:g})})),t}));function _(){return(_=(0,i.default)((function*(e){const t=(0,l.wap)("iq",{to:l.S_WHATSAPP_NET,xmlns:"w:biz:merchant_info",id:(0,l.generateId)(),type:"get",smax_id:(0,l.SMAX_ID)(u.default.MerchantGetComplianceInfo)},e.map((e=>(0,l.wap)("merchant_info",{jid:(0,d.USER_JID)(e.wid)})))),n=yield(0,a.deprecatedSendIq)(t,f);if(n.success)return n.result;throw new c.ServerStatusCodeError(n.errorCode)}))).apply(this,arguments)}function g(){return(g=(0,i.default)((function*(){let{entityName:e,entityType:t,isRegistered:n=!1,entityTypeCustom:r,customerCareDetails:i,grievanceOfficerDetails:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,l.wap)("iq",{to:l.S_WHATSAPP_NET,xmlns:"w:biz:merchant_info",id:(0,l.generateId)(),type:"set",smax_id:(0,l.SMAX_ID)(u.default.MerchantSetComplianceInfo)},(0,l.wap)("merchant_info",{is_registered:n?"true":"false"},void 0!==e?(0,l.wap)("entity_name",null,e):null,void 0!==t?(0,l.wap)("entity_type",null,t):null,void 0!==r?(0,l.wap)("entity_type_custom",null,r):null,i?(0,l.wap)("customer_care_details",null,void 0!==i.email?(0,l.wap)("email",null,i.email):null,void 0!==i.landlineNumber?(0,l.wap)("landline_number",null,i.landlineNumber):null,void 0!==i.mobileNumber?(0,l.wap)("mobile_number",null,i.mobileNumber):null):null,o?(0,l.wap)("grievance_officer_details",null,void 0!==o.name?(0,l.wap)("name",null,o.name):null,void 0!==o.email?(0,l.wap)("email",null,o.email):null,void 0!==o.landlineNumber?(0,l.wap)("landline_number",null,o.landlineNumber):null,void 0!==o.mobileNumber?(0,l.wap)("mobile_number",null,o.mobileNumber):null):null)),d=yield(0,a.deprecatedSendIq)(s,f);if(d.success)return d.result;throw new c.ServerStatusCodeError(d.errorCode)}))).apply(this,arguments)}},39235:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBusinessProfileAndCompliance=u,t.queryBusinessProfile=function(e,t){const n=(0,a.getBusinessProfileQueryVersion)();let r;r=t?Promise.all([(0,l.default)(e,n),(0,s.getMerchantCompliance)(e)]).then(u):(0,l.default)(e,n);return(0,o.attachErrorLogger)(r,"Query business profile failed")};var i=r(n(81109)),o=n(91563),a=n(92615),s=n(1802),l=r(n(24840));function u(e){let[t,n]=e;return t.map(((e,t)=>(0,i.default)((0,i.default)({},e),{},{profile:(0,i.default)((0,i.default)({},e.profile),{},{legal_entity_details:n[t]})})))}},24840:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(82749),a=n(42811),s=r(n(82601)),l=n(91563),u=r(n(87116)),c=n(11439),d=n(15610);const p=new s.default("businessProfileResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("business_profile"),n=[];return t.forEachChildWithTag("profile",(e=>{const t=(0,d.jidWithTypeToWid)(e.attrJidWithType("jid")),r=e.attrString("tag"),i=(0,u.default)(e);Object.keys(i).length?n.push({wid:t,tag:r,profile:i}):n.push({wid:t,tag:r})})),n}));function f(){return(f=(0,i.default)((function*(e,t){const n=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"w:biz",id:(0,a.generateId)(),type:"get"},(0,a.wap)("business_profile",{v:(0,a.INT)(t)},e.map((e=>(0,a.wap)("profile",{jid:(0,c.USER_JID)(e.wid),tag:null!=e.tag?(0,a.INT)(e.tag):a.DROP_ATTR}))))),r=yield(0,o.deprecatedSendIq)(n,p);if(r.success)return r.result;throw new l.ServerStatusCodeError(r.errorCode)}))).apply(this,arguments)}},73850:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TOS_REFRESH_INTERVAL=void 0,t.deleteTosState=function(){return d.apply(this,arguments)},t.queryTosState=function(){return c.apply(this,arguments)},t.updateTosState=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(82749),a=n(42811),s=r(n(82601)),l=n(91563);t.DEFAULT_TOS_REFRESH_INTERVAL=86400;const u=new s.default("tosNotices",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("tos"),n={refresh:t.attrInt("refresh"),notice:[]};return t.forEachChildWithTag("notice",(e=>{const t="false"!==e.maybeAttrString("state"),r=e.attrString("id");n.notice.push({id:r,state:t})})),(n.refresh>259200||n.refresh<7200)&&(n.refresh=86400),n}));function c(){return(c=(0,i.default)((function*(e){const t=(0,a.wap)("iq",{xmlns:"tos",id:(0,a.generateId)(),type:"get",to:a.S_WHATSAPP_NET},(0,a.wap)("request",null,e.map((e=>(0,a.wap)("notice",{id:(0,a.CUSTOM_STRING)(e)}))))),n=yield(0,o.deprecatedSendIq)(t,u);if(n.success)return n.result;throw new l.ServerStatusCodeError(n.errorCode,n.errorText)}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){const t=new s.default("tosNoticesSet",(()=>{})),n=(0,a.wap)("iq",{xmlns:"tos",id:(0,a.generateId)(),type:"set",to:a.S_WHATSAPP_NET},(0,a.wap)("request",{type:"session_update"},e.map((e=>(0,a.wap)("notice",{id:(0,a.CUSTOM_STRING)(e)})))));yield(0,o.deprecatedSendIq)(n,t)}))).apply(this,arguments)}},37122:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndUpdateAllGroupMetadata=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(93040),s=n(64002),l=n(1619),u=n(80780),c=n(94645),d=n(37246),p=n(42469),f=n(5707),_=n(30304),g=n(73682),h=n(94007),A=n(98120),m=n(51017);function E(){return(E=(0,i.default)((function*(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(null!=n){if(e=yield(0,d.queryGroupsById)(n,"per_group_dirty_recovery"),null==e||0===e.length)return}else if(e=yield(0,d.queryAllGroups)(),0===e.length)return;const r=yield(0,s.injectPastParticipantsFromDB)(e),i=[],o=[];r.forEach((e=>{(0,l.frontendFireAndForget)("createOrUpdateGroupMetadataFromQuery",{groupInfo:e}),t&&v(e),i.push((0,d.maybeQueryAndUpdateMembershipApprovalRequests)(e))})),yield(0,c.updateGroupMetadataTableJob)(r),yield(0,c.updateGroupParticipantTableWithoutDeviceSyncJob)(r),t&&(yield y(r));const a=[];r.forEach((e=>{const t=e.participants.map((e=>({id:(0,m.toUserWid)(e.id),lid:e.lid?(0,m.toUserWid)(e.lid):null,displayName:e.displayName})));a.concat(t),o.push((0,g.maybeQueryAndUpdateSubgroupSuggestions)(e))})),yield(0,u.createOrReplaceDisplayNamesAndLidPnMappings)(a,!0),yield Promise.all(i)}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){__LOG__(2,void 0,void 0,void 0,["history-sync","groups"])`Start updateGroupEndOfHistorySyncFlag`;const t=n(71188).L8,r=(0,A.getInitialGroupPhashMap)(),i=[];for(const n of e){if(yield(0,a.getChatRecord)(n.id))continue;null==(null==r?void 0:r[n.id.toString()])&&i.push({unreadCount:0,muteExpiration:0,isAutoMuted:!1,id:n.id,endOfHistoryTransferType:t.NOT_INCLUDED_IN_HIST_SYNC})}yield(0,l.frontendSendAndReceive)("chatCollectionAdd",{things:i,options:{merge:!0}}),yield(0,h.getChatTable)().bulkCreate(i.map((e=>{let{endOfHistoryTransferType:t,id:n}=e;return{endOfHistoryTransferType:t,id:n.toString(),unreadCount:0,muteExpiration:0,isAutoMuted:!1}}))).catch((e=>{__LOG__(2,void 0,void 0,void 0,["history-sync","groups"])`One ore more chat create failed for group not synced in initial sync with error: ${e.message} `})),__LOG__(2,void 0,void 0,void 0,["history-sync","groups"])`Completed updateGroupEndOfHistorySyncFlag`}))).apply(this,arguments)}function v(){return I.apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){const t=(0,A.getInitialGroupPhash)(e.id.toString());if(null==t)return;const n=yield(0,_.phashV1)(e.participants.map((e=>e.id))),r=n.substring(2);null!=t&&t!==n&&t!==r&&(0,f.handleSingleMsg)(e.id,(0,p.genInitialPhashMismatchMsg)(e.id,(0,o.unixTime)()),"pHashMismatchMsg")}))).apply(this,arguments)}},93802:(e,t,n)=>{"use strict";var r=n(95318);t.W=void 0;var i=r(n(48926)),o=n(85074),a=n(37122);const s=(0,o.defineWebPersistedJob)().finalStep("queryAndUpdateGroupsMetadataByJids",function(){var e=(0,i.default)((function*(e){__LOG__(2)`queryAndUpdateGroupsMetadataByJidsJob: started persisted job`,yield(0,a.queryAndUpdateAllGroupMetadata)(!1,e)}));return function(){return e.apply(this,arguments)}}()).end();t.W=s},73682:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.maybeQueryAndUpdateSubgroupSuggestions=function(){return f.apply(this,arguments)},t.queryAndUpdateSubgroupSuggestions=d;var i=r(n(48926)),o=n(7429),a=n(1619),s=n(18106),l=n(79247),u=n(23076),c=n(3885);function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t){const n=yield(0,u.querySubgroupSuggestions)(e,t),r=(yield(0,o.getSubgroupSuggestions)(e)).filter((e=>!n.some((t=>t.id.equals(e.id)&&t.owner.equals(e.owner)))));yield(0,o.removeSubgroupSuggestions)(r.map((t=>{let{id:n,owner:r}=t;return{parentGroupId:e,id:n,owner:r}}))),yield(0,o.addSubgroupSuggestions)(e,n),(0,a.frontendFireAndForget)("createOrUpdateSubgroupSuggestions",{parentGroupId:e,subgroupSuggestions:n})}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){if(!0===e.isParentGroup&&!1===e.allowNonAdminSubGroupCreation&&e.participants.some((e=>(0,c.isMeAccount)(e.id)&&e.isAdmin))&&(0,s.memberSuggestedGroupsEnabled)()){const t=yield(0,l.getJoinedSubgroups)(e.id);if(t.length)return d(e.id,t[0])}}))).apply(this,arguments)}},89358:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.loadPrimaryFeatures=function(){return d.apply(this,arguments)},t.primaryFeatureEnabled=function(e){if(null==u)return __LOG__(4,void 0,new Error)`primaryFeatureEnabled: primary features have not been initialized!`,!1;return u.has(e)},t.setPrimaryFeatures=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(17657),s=n(59356),l=r(n(61112));let u=null;function c(){return(c=(0,i.default)((function*(e){l.default.set(s.KEYS.PRIMARY_FEATURES,e),yield a.userPrefsIdb.set(s.KEYS.PRIMARY_FEATURES,e),u=new Set(p(e)),(0,o.frontendFireAndForget)("setPrimaryFeatures",{primaryFeatures:Array.from(u)})}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){var e;let t=null!==(e=a.userPrefsIdb.get(s.KEYS.PRIMARY_FEATURES))&&void 0!==e?e:[];t=p(t),u=new Set(t),(0,o.frontendFireAndForget)("setPrimaryFeatures",{primaryFeatures:t}),__LOG__(2)`primary features loaded`}))).apply(this,arguments)}function p(e){return e}},9529:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(78427),l=n(97023);const u=new a.default("serverProps",(e=>{e.assertTag("iq"),e.assertAttr("from","s.whatsapp.net");const t=e.child("props"),n={serverPropsVersion:t.attrInt("version")};return t.forEachChildWithTag("prop",(e=>{switch(e.attrString("name")){case"ephemeral_messages_allowed_values":n.ephemeralMessagesAllowedValues=e.attrString("value");break;case"gif_provider":n.gifProvider=1===e.attrInt("value")?"giphy":"tenor";break;case"group_call_max_participants":n.groupCallMaxParticipants=e.attrInt("value",0);break;case"group_description_length":n.groupDescLength=e.attrInt("value");break;case"hfm_string_changes":n.hfmStringChanges=1===e.attrInt("value");break;case"image_quality":n.imageQuality=e.attrInt("value")/100;break;case"max_participants":n.maxParticipants=e.attrInt("value")-1;break;case"max_subject":n.maxSubject=e.attrInt("value");break;case"max_keys":n.maxKeys=e.attrInt("value");break;case"media":n.media=1024*e.attrInt("value")*1024;break;case"mms_media_key_ttl":n.mmsMediaKeyTTL=e.attrInt("value");break;case"wallpapers_v2":n.wallpapersV2=1===e.attrInt("value");break;case"shops_product_grid":n.shopsProductGrid=1===e.attrInt("value",0);break;case"syncd_inline_mutations_max_count":n.syncdInlineMutationsMaxCount=e.attrInt("value");break;case"syncd_patch_protobuf_max_size":n.syncdPatchProtobufMaxSize=e.attrInt("value");break;case"syncd_key_max_use_days":n.syncdKeyMaxUseDays=e.attrInt("value");break;case"syncd_wait_for_key_timeout_days":n.syncdWaitForKeyTimeoutDays=e.attrInt("value");break;case"syncd_additional_mutations":n.syncdAdditionalMutations=e.attrInt("value");break;case"syncd_sentinel_timeout_seconds":n.syncdSentinelTimeoutSeconds=e.attrInt("value");break;case"md_pin_chat_enabled":n.syncdPinChatEnabled=1===e.attrInt("value");break;case"syncd_qpl_logging_enabled":n.syncdQPLLoggingEnabled=1===e.attrInt("value");break;case"web_biz_profile_options":n.webBizProfileOptions=e.attrInt("value");break;case"web_download_status_thumb_mms_enabled":n.webDownloadStatusThumbMmsEnabled=1===e.attrInt("value");break;case"web_send_document_thumb_in_message_disabled":n.webSendDocumentThumbInMessageDisabled=1===e.attrInt("value");break;case"web_voip_mac_os_min_version":n.webVoipMacOsMinVersion=e.attrString("value");break;case"web_voip_windows_os_min_version":n.webVoipWindowsOsMinVersion=e.attrString("value");break;case"mms_cat_v1_forward_hot_override_enabled":n.mmsCatV1ForwardHotOverrideEnabled=1===e.attrInt("value");break;case"ptt_conversation_waveform":n.pttConversationWaveform=1===e.attrInt("value");break;case"ptt_oot_playback":n.pttOotPlayback=1===e.attrInt("value");break;case"ptt_pausable_enabled":n.pttPausableEnabled=1===e.attrInt("value");break;case"ptt_playback_speed_enabled":n.pttPlaybackSpeedEnabled=1===e.attrInt("value");break;case"web_product_list_message_page_size":n.webProductListMessagePageSize=e.attrInt("value");break;case"ptt_remember_play_position":n.pttRememberPlayPosition=1===e.attrInt("value");break;case"max_electron_file_size":n.maxElectronFileSize=1024*e.attrInt("value")*1024;break;case"max_file_size":n.maxFileSize=1024*e.attrInt("value")*1024;break;case"web_log_upload_download_crashes":n.webLogUploadDownloadCrashes=1===e.attrInt("value");break;case"web_graphql_for_catalog_m1":n.webGraphQLForCatalogM1=1===e.attrInt("value");break;case"web_md_mms_sync_deletion_request":n.webMdMmsSyncDeletionRequest=1===e.attrInt("value");break;case"web_payment_background_enabled":n.webPaymentBackgroundEnabled=1===e.attrInt("value");break;case"streaming_upload_chunk_size":n.streamingUploadChunkSize=1024*e.attrInt("value")*1024}})),{values:n,attributes:{protocol:t.maybeAttrInt("protocol"),version:t.attrInt("version"),hash:t.maybeAttrString("hash"),refresh:t.maybeAttrInt("refresh")}}}));function c(){return(c=(0,i.default)((function*(){var e;const t=yield(0,l.getServerPropsAttributes)(),n=(0,s.makeGetV2Request)({propsHash:null!==(e=null==t?void 0:t.hash)&&void 0!==e?e:""});return(0,o.deprecatedSendIq)(n,u)}))).apply(this,arguments)}},53519:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryServerProps=function(){if(c)return c;return c=(0,s.default)().then((e=>{if(e.success)return e.result;throw new a.ServerStatusCodeError(e.errorCode,e.errorText)})).then(function(){var e=(0,i.default)((function*(e){const t=e.values,n=e.attributes;if(2===n.protocol){var r,i,o;const e=yield(0,u.getServerPropsAttributes)();(0,u.setServerPropsAttributes)({version:n.version,hash:null!==(r=null!==(i=n.hash)&&void 0!==i?i:null==e?void 0:e.hash)&&void 0!==r?r:"",refresh:null!==(o=n.refresh)&&void 0!==o?o:86400,lastSyncTimeSeconds:Math.floor(Date.now()/1e3)})}else(0,u.setServerPropsAttributes)({version:n.version,hash:"",refresh:86400,lastSyncTimeSeconds:Math.floor(Date.now()/1e3)});if(2===n.protocol)if(null==n.hash){const e=yield(0,u.getServerProps)();null==e?((0,u.setServerPropsAttributes)({version:n.version,hash:"",refresh:86400,lastSyncTimeSeconds:0}),__LOG__(4,void 0,new Error,!0)`Server props failure: empty server props table`,SEND_LOGS("read-from-empty-server-props-table")):l.ServerProps.updateProps(e)}else(0,u.setServerProps)(t),l.ServerProps.updateProps(t);else l.ServerProps.updateProps(t)}));return function(){return e.apply(this,arguments)}}()).catch((0,o.filteredCatch)(a.ServerStatusCodeError,(()=>{}))).finally((()=>{c=null})),c};var i=r(n(48926)),o=n(81408),a=n(91563),s=r(n(9529)),l=n(52143),u=n(97023);let c},63300:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=e?_:g,n=h();let r;if(y[t])return(0,u.hasConfigChanged)(m,n)&&(__LOG__(2)`[job-orchestrator] config changed `,m=n,y[t].updateConfig(n)),y[t];switch(t){case"bucket":r=new i.WAConcurrentBucketJobQueue;break;default:r=new o.WADefaultJobNoQueue}return r.init(n,E()),y[t]=r,m=n,r};var i=n(31758),o=n(81531),a=n(75419),s=n(29987),l=r(n(45647)),u=n(7550),c=n(78637),d=n(83647);const p={maxConcurrency:1,bestEffortWaitTimeoutSec:s.FIVE_MINUTES,jobPrioritiesQuota:new Map([[a.JOB_PRIORITY.HIGH,5],[a.JOB_PRIORITY.LOW,1],[a.JOB_PRIORITY.OFFLINE,3],[a.JOB_PRIORITY.HISTORY_SYNC,1]])},f={maxConcurrency:1,bestEffortWaitTimeoutSec:s.FIVE_MINUTES,jobPrioritiesQuota:new Map([[a.JOB_PRIORITY.HIGH,5],[a.JOB_PRIORITY.LOW,1],[a.JOB_PRIORITY.OFFLINE,1],[a.JOB_PRIORITY.HISTORY_SYNC,1]])},_="default",g="bucket";function h(){const e=l.default.getCurrentScenario();return e===d.WEBC_SCENARIO_TYPE.IDLE?p:e===d.WEBC_SCENARIO_TYPE.OFFLINE_RESUME?f:p}let A,m=p;function E(){return A||(A=new c.JobStatsLogger),A}const y={}},7550:(e,t)=>{"use strict";function n(e,t){return t instanceof Map||t instanceof Set?Array.from(t):t}Object.defineProperty(t,"__esModule",{value:!0}),t.hasConfigChanged=function(e,t){var r,i,o,a;if(e.maxConcurrency!==t.maxConcurrency)return!0;if((null===(r=e.jobPrioritiesQuota)||void 0===r?void 0:r.size)!==(null===(i=t.jobPrioritiesQuota)||void 0===i?void 0:i.size))return!0;if(Object.keys(null!==(o=e.maxConcurrencyPerJob)&&void 0!==o?o:{}).length!==Object.keys(null!==(a=t.maxConcurrencyPerJob)&&void 0!==a?a:{}).length)return!0;return JSON.stringify(e,n)!==JSON.stringify(t,n)}},67091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobInfoEvent=void 0;t.JobInfoEvent=class{constructor(e,t,n,r){this.jobName=e,this.scenario=r,this.pendingJobsCount=n,this.jobPriority=t}logJobAdded(){this.webcJobAddedT=Date.now()}logJobStarted(){this.webcJobStartedT=Date.now()}logJobCompleted(e){this.webcJobCompletedT=Date.now(),this.jobResultType=e}}},78637:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.JobStatsLogger=void 0;r(n(45647)),n(67091);var i=n(93112),o=n(83647),a=n(44160);t.JobStatsLogger=class{constructor(){this._jobEventMap=new Map}logJobCreated(e){}logJobStarted(e){}logJobCompleted(e){this._logJobFinished(e,i.WEBC_JOB_RESULT_TYPE_CODE.COMPLETED)}logJobError(e){this._logJobFinished(e,i.WEBC_JOB_RESULT_TYPE_CODE.ERROR)}logJobTimeout(e){this._logJobFinished(e,i.WEBC_JOB_RESULT_TYPE_CODE.TIMEOUT)}logJobAborted(e){this._logJobFinished(e,i.WEBC_JOB_RESULT_TYPE_CODE.ABORTED)}_logJobFinished(e,t){}_maybeCommitJobEvent(e){if(!e)return;const{jobName:t,webcJobCompletedT:n,webcJobStartedT:r,webcJobAddedT:s,jobResultType:l}=e,u=l===i.WEBC_JOB_RESULT_TYPE_CODE.COMPLETED;__LOG__(2)`[job-orchestrator] ${t} execution time: ${n-r} ms, waiting time: ${r-s} ms, success: ${u}`;const c=new a.WebcJobInfoWamEvent({jobName:e.jobName,jobPriority:e.jobPriority,jobResultType:e.jobResultType,pendingJobsCount:e.pendingJobsCount,scenario:e.scenario,webcJobAddedT:e.webcJobAddedT,webcJobCompletedT:e.webcJobCompletedT,webcJobStartedT:e.webcJobStartedT});if(c.scenario===o.WEBC_SCENARIO_TYPE.IDLE){const e=(void 0,1);c.weight=e}c.commit()}}},51280:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createNonPersistedJob=function(e,t,n){if("function"!=typeof t)throw(0,a.default)("getNonPersistJob got invalid function param");const r=(0,o.getInstance)((null==n?void 0:n.priority)===i.JOB_PRIORITY.SKIP);return{fireAndForget(){r.enqueue(e,(()=>t.apply(null,arguments)),n)},waitUntilCompleted(){return r.enqueue(e,(()=>t.apply(null,arguments)),n)}}};var i=n(75419),o=n(63300),a=r(n(89482))},85074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineWebPersistedJob=function(){return(0,r.definePersistedJob)()};var r=n(77095)},50413:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t){Object.keys(t).forEach((n=>{t.hasOwnProperty(n)&&e.addPersistedJobImplementation(n,t[n])}))}(e,{rotateKey:()=>Promise.resolve(n(52351).K),setAbout:()=>Promise.resolve(n(88117).z),setTextStatus:()=>Promise.resolve(n(28346).e),queryProductList:()=>Promise.resolve(n(32686).K),getPublicKey:()=>Promise.resolve(n(43976).O),getSignedUserInfo:()=>Promise.resolve(n(94088).Y),verifyPostcode:()=>Promise.resolve(n(25180).r),deleteReactions:()=>Promise.resolve(n(42626).D),deleteReactionsV2:()=>Promise.resolve(n(82726).fA),deleteAddOns:()=>Promise.resolve(n(82726).IK),sendRequestedKeyShare:()=>Promise.resolve(n(68960).c),dismissQuickPromotion:()=>Promise.resolve(n(19578).l),primaryActionClickInQuickPromotion:()=>Promise.resolve(n(84745).S),impressionOnQuickPromotion:()=>Promise.resolve(n(57882).$),userExposureToQuickPromotion:()=>Promise.resolve(n(7471).J),queryAndUpdateGroupsMetadataByJids:()=>Promise.resolve(n(93802).W)})}},29409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jobSerializers=void 0;var r=n(29987),i=n(91563),o=n(56660);const a={rotateKey:()=>({type:"rotateKey",args:{},uniqKey:"rotateKey"}),setAbout:e=>({type:"setAbout",args:{content:e},uniqKey:"setAbout"}),queryProductList(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if((0,o.commerceFeaturesDisabledBySanctions)())throw new i.E451;return{type:"queryProductList",args:{catalogWid:e.toString(),productIds:t,width:r,height:a,directConnectionEncryptedInfo:n},uniqKey:`queryProductList:${t.slice().sort().join(",")}:${r}:${a}`}},getPublicKey:e=>({type:"getPublicKey",args:{businessJid:e.toString()},uniqKey:`getPublicKey:${e.toString()}`}),getSignedUserInfo:e=>({type:"getSignedUserInfo",args:{businessJid:e.toString()},uniqKey:`getSignedUserInfo:${e.toString()}`}),verifyPostcode:(e,t)=>({type:"verifyPostcode",args:{businessJid:e.toString(),directConnectionEncryptedInfo:t},uniqKey:`verifyPostcode:${e.toString()}:${t}`}),deleteReactions:(e,t)=>({type:"deleteReactions",args:{chatId:e,parentMsgKeys:t},uniqKey:`deleteReactions:${e}`}),deleteReactionsV2:(e,t)=>({type:"deleteReactionsV2",args:{chatId:e,parentMsgKeys:t}}),deleteAddOns:(e,t)=>({type:"deleteAddOns",args:{chatId:e,parentMsgKeys:t}}),sendRequestedKeyShare:(e,t,n)=>({type:"sendRequestedKeyShare",args:{keys:e,orphanKeys:t,peerDeviceId:n.toString()}}),dismissQuickPromotion(e){const t=(0,r.unixTime)();return{type:"dismissQuickPromotion",args:{id:e,ts:t},uniqKey:`dismissQuickPromotion-${e}-${t}`}},primaryActionClickInQuickPromotion(e){const t=(0,r.unixTime)();return{type:"primaryActionClickInQuickPromotion",args:{id:e,ts:t},uniqKey:`primaryActionClickInQuickPromotion-${e}-${t}`}},impressionOnQuickPromotion(e){const t=(0,r.unixTime)();return{type:"impressionOnQuickPromotion",args:{id:e,ts:t},uniqKey:`impressionOnQuickPromotion-${e}-${t}`}},userExposureToQuickPromotion(e,t,n){const i=(0,r.unixTime)();return{type:"userExposureToQuickPromotion",args:{id:e,ts:i,experimentKey:t,exposureHoldout:n},uniqKey:`userExposureToQuickPromotion-${e}-${i}`}},setTextStatus:(e,t,n,r)=>({type:"setTextStatus",args:{id:e,text:t,emoji:n,ephemeralDurationSeconds:r},uniqKey:"setTextStatus"}),queryAndUpdateGroupsMetadataByJids:e=>({type:"queryAndUpdateGroupsMetadataByJids",args:e,uniqKey:"handleGroupsDirtyNotification"})};t.jobSerializers=a},74e3:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getJobManager=function(){if(null==p)throw(0,d.default)("jobs manager has not been initialized");return p},t.maybeCreateJob=g,t.startWebPersistedJobManager=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(65982),a=n(29261),s=n(29987),l=n(1420),u=r(n(50413)),c=n(51766),d=r(n(89482));let p=null;function f(){return(f=(0,i.default)((function*(){yield(0,l.initialize)();const e=(0,c.getTable)();p=new a.PersistedJobManager({accessors:_(),unfinishedJobEntries:e.all(),isRestartAfterCrash:!1,listeners:{onJobStarted:()=>{},onJobFinished:()=>null},deprecatedJobs:{}}),(0,u.default)(p)}))).apply(this,arguments)}function _(){return{deletePersistedJob:e=>(0,c.getTable)().remove(e),updatePersistedJob:e=>(0,c.getTable)().createOrReplace(e),readPersistedJob:e=>(0,c.getTable)().get(e),loadAllJobs:()=>(0,c.getTable)().all(),maybeCreateJob:g}}function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){var t,n;const r=(0,c.getTable)(),i=JSON.stringify([e.type,null!==(t=e.uniqKey)&&void 0!==t?t:(0,o.randomHex)(32)]),l={type:e.type,uniqKey:i,startTime:(0,s.unixTime)(),version:null!==(n=e.version)&&void 0!==n?n:1,original:e.args,current:e.args,step:a.UNSTARTED_JOB,waitUntil:null,stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,backedOffCount:0};if(null==e.uniqKey)return r.createOrReplace(l).then((e=>({id:e,newlyCreated:!0})));const u=yield r.equals(["uniqKey"],[e.uniqKey]);if(0===u.length)return r.createOrReplace(l).then((e=>({id:e,newlyCreated:!0})));const d=[];let p=null;for(const e of u)e.step!==a.FINISHED_JOB?p=e:d.push(r.remove(e.jobId));return yield Promise.all(d),null!=p?{id:p.jobId,newlyCreated:!1}:r.createOrReplace(l).then((e=>({id:e,newlyCreated:!0})))}))).apply(this,arguments)}},82726:(e,t,n)=>{"use strict";var r=n(95318);t.fA=t.IK=void 0;var i=r(n(48926)),o=n(73641),a=n(21193),s=n(96869),l=n(74260),u=n(91336),c=n(89688),d=n(23800),p=n(85074),f=n(60627),_=r(n(60001)),g=n(73602),h=n(61627);const A=(0,p.defineWebPersistedJob)().finalStep("deleteAddOns",function(){var e=(0,i.default)((function*(e){let{chatId:t,parentMsgKeys:n}=e;const r=[(0,o.deleteAddonMsgsByParentKeys)({chatId:t,parentMsgKeys:n})];(0,a.isUnifiedInfraEnabledForType)(g.MSG_TYPE.PIN_MESSAGE)||r.push(function(){return v.apply(this,arguments)}({chatId:t,parentMsgKeys:n})),(0,a.isUnifiedInfraEnabledForType)(g.MSG_TYPE.REACTION)||r.push(E({chatId:t,parentMsgKeys:n})),(0,a.isUnifiedInfraEnabledForType)(g.MSG_TYPE.POLL_UPDATE)||r.push(function(){return S.apply(this,arguments)}({chatId:t,parentMsgKeys:n}));const i=yield Promise.allSettled(r);for(const e of i)if("rejected"===e.status)throw e.reason}));return function(){return e.apply(this,arguments)}}()).end();t.IK=A;const m=(0,p.defineWebPersistedJob)().finalStep("deleteReactionsV2",(e=>{let{chatId:t,parentMsgKeys:n}=e;return E({chatId:t,parentMsgKeys:n})})).end();function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){let{chatId:t,parentMsgKeys:n}=e;__LOG__(2)`Persisted: deleteReactionsV2 persisted job started for ${t}`;const r=yield(0,u.getAllReactionsFromParentMsgs)(n),i=r.map((e=>e.msgKey));if(0===i.length)return void __LOG__(2)`Persisted: deleteReactionsV2 finished, no reactionsMsgKeys`;const o=[];i.forEach((e=>{_.default.fromString(e).fromMe&&o.push(e)})),o.length>0&&(yield(0,c.removeMessagesFromHistory)(o));const a=r.map((e=>[e.parentMsgKey,e.senderUserJid]));yield(0,l.deleteReactionsByRecords)(a),yield(0,f.deleteLastAddOnsPreview)(n),__LOG__(2)`Persisted: deleteReactionsV2 finished`}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){let{chatId:t,parentMsgKeys:n}=e;__LOG__(2)`Persisted: deletePollVotes job started for ${t}`,yield(0,d.deleteVotesByParentMsgKeys)(n),__LOG__(2)`Persisted: deletePollVotes job finished for ${t}`}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){let{chatId:t,parentMsgKeys:n}=e;(0,h.isPinnedMessagesM1ReceiverEnabled)()&&(__LOG__(2)`Persisted deletePins persisted job started for ${t}`,yield(0,s.removePinInChatByParentMsgKeys)(n),__LOG__(2)`Persisted: deletePins finished`)}))).apply(this,arguments)}t.fA=m},11779:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markAddOnsAsReadJob=function(){return c.apply(this,arguments)},t.markAddOnsAsReadUsingAddonInfraJob=function(){return d.apply(this,arguments)},t.markUnclassifiedAddOnsAsReadJob=function(e){if(0===e.length)return Promise.resolve({updatedAddOns:new Map,updatedOrphans:[]});return(0,u.createNonPersistedJob)("markUnclassifiedAddOnsAsRead",function(){var e=(0,i.default)((function*(e){const t=yield(0,s.markUnclassifiedAddOnsAsReadDb)(e.msgKeys);return(0,l.frontendFireAndForget)("markAddOnsAsReadUi",{updatedMsgKeys:t.updatedAddOns}),t}));return function(){return e.apply(this,arguments)}}(),{priority:o.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({msgKeys:e})};var i=r(n(48926)),o=n(75419),a=n(23071),s=n(63169),l=n(1619),u=n(51280);function c(){return(c=(0,i.default)((function*(e){yield(0,u.createNonPersistedJob)("markAddOnsAsRead",function(){var e=(0,i.default)((function*(e){yield(0,s.markAddOnsAsReadDb)(e.updates),(0,l.frontendFireAndForget)("markAddOnsAsReadUi",{updatedMsgKeys:e.updates})}));return function(){return e.apply(this,arguments)}}(),{priority:o.JOB_PRIORITY.LOW}).waitUntilCompleted({updates:e})}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){yield(0,u.createNonPersistedJob)("markAddOnsAsReadUsingAddonInfra",function(){var e=(0,i.default)((function*(e){return(0,a.processMarkAsRead)(e.addons)}));return function(){return e.apply(this,arguments)}}(),{priority:o.JOB_PRIORITY.LOW}).waitUntilCompleted({addons:e})}))).apply(this,arguments)}},3620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALID_USERNAME_ORIGINS=t.VALID_LID_ORIGINS=void 0;const n=new Set(["createChat","createChatOnNewMsg","debugOpenChatFlow","debugConvertToLidChat","debugCreateChat","jest","updateDeviceTableApi","fixturesChatFactory","securityCodeApi","restoreMessagesForChat","processUnreadMessage","loadLastMessagesFromDb","processPreviewMessageInChat","historyMsgHandlerAction","updateMessageUIAction","msgCollectionFindQuery","msgCollectionGetStarred","msgCollectionGetMessagesById","msgCollectionQueryVCard","msgCollectionIncrementalStarredUpdate","msgCollectionQueryMedia","msgCollectionSearch","msgCollectionGetContext","username_change_notification","username_contactless_search"]);t.VALID_LID_ORIGINS=n;const r=new Set(["username_change_notification","username_contactless_search"]);t.VALID_USERNAME_ORIGINS=r},98869:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createChat=function(){return G.apply(this,arguments)},t.createChatObjectForStorage=U,t.createNewsletterObjectForStorage=function(e){const t=U(e);return(0,a.default)(t,(e=>null!=e))};var i=r(n(81109)),o=r(n(48926)),a=r(n(35937)),s=n(83741),l=n(85321),u=n(4945),c=n(93040),d=n(42247),p=n(87010),f=n(12166),_=n(1619),g=n(42467),h=n(3620),A=n(45218),m=n(10473),E=n(28626),y=n(11363),S=n(29309),v=n(91360),I=n(12987),T=n(5707),b=r(n(63118)),M=n(20217),P=n(60019),C=n(39235),O=n(71170),R=n(93769),N=n(42778),w=n(3885),D=n(63415),L=n(63703),B=n(51017),k=n(49625);function G(){return(G=(0,o.default)((function*(e,t,n,r){const{forceUsync:o=!1,firstIncomingMsg:a,nextPrivacyMode:u,createdOffline:m=!1}=null!=r?r:{};let E=e;if(e.isLid()){const n=(0,d.getPhoneNumber)(e),r=null==t||!h.VALID_LID_ORIGINS.has(t),i=null!=t&&h.VALID_USERNAME_ORIGINS.has(t)&&e.isLid()&&null!=n;null==t||i?(i?(__LOG__(2,void 0,void 0,!0)`createChat: ${t} trying to create new username chat when phone number is known.`,SEND_LOGS("unexpected-username-lid-chat")):(__LOG__(2)`lid: ${e.toLogString()}`,__LOG__(4,void 0,new Error,!0)`createChat: ${t} trying to create new lid chat without abprop pnh_1on1_lid_expected`,SEND_LOGS("create-lid-chat-without-pnh-1on1-lid-expected")),null!=n&&(E=n)):r&&(__LOG__(2)`lid: ${e.toLogString()}`,__LOG__(4,void 0,new Error,!0)`createChat: ${t} unexpected lid chat created`,SEND_LOGS("unexpected-lid-chat"));const o=yield(0,d.getContactRecord)((0,w.assertGetMeUser)());"username_contactless_search"===t&&null==(null==o?void 0:o.username)&&(yield(0,N.updateLidMetadataJob)([{lid:(0,B.toUserWid)(e),data:{shareOwnPn:!0}}]))}const M=E.isUser()&&o?yield(0,k.workerSafeSendAndReceive)("getOrQueryUsyncInfo",{wid:E}):null,C=null==M?E:M.wid;if(!E.equals(C)){if(null!=(yield(0,c.getChatRecord)(C)))return}let G=!1,K=!1,j=null;var V,W;if(null!=(null==M?void 0:M.bizInfo))G=null===(V=M.bizInfo)||void 0===V?void 0:V.verifiedName.isApi,K=null===(W=M.bizInfo)||void 0===W?void 0:W.verifiedName.isSmb,j=(0,P.getPrivacyModeFromQueryExistResponse)(M);else if(null==M){const e=yield(0,f.getVerifiedBusinessNameRecord)(C);null!=e&&(K=e.isSmb,G=e.isApi,j=null!=e.privacyMode?(0,f.convertPrivacyModeFromStorageType)(e.privacyMode):null)}const H=null!=n?(0,i.default)((0,i.default)({},n),{},{id:C}):{id:C},Q=yield F(C,G,a);null!=Q&&(__LOG__(2)`[DMResolve] DM settings found for new chat`,H.ephemeralDuration=Q.duration,H.ephemeralSettingTimestamp=Q.settingTimestamp,H.disappearingModeInitiator=Q.initiator,(0,s.getABPropConfigValue)("dm_initiator_trigger")&&(H.disappearingModeTrigger=Q.disappearingModeTrigger,H.disappearingModeInitiatedByMe=Q.initiatedByMe));const $=(0,P.getLatestPrivacyMode)(u,j);let q,J;(0,_.frontendFireAndForget)("updateBusinessInfo",{contactId:C,businessInfo:{privacyMode:$}}),"ephemeral_setting"!==(null==a?void 0:a.subtype)&&(q=x(C,null==Q?void 0:Q.duration,null==Q?void 0:Q.initiator)),C.isCAPISupportAccount()&&(0,l.getIsSagaEnabled)()&&(J=(0,O.genSagaInitSystemMsg)(C));const z=null!=(null==a?void 0:a.ctwaContext)&&(0,S.getCTWAEligibilityFromConversion)({conversionData:a.ctwaContext.conversionData,conversionSource:a.ctwaContext.conversionSource}),X=yield(0,A.genContactInfoCardMsg)(C,{isBiz:K||G,iAmStartingChat:null==a||a.id.fromMe,isWASupportStartingChat:null!=a&&C.isCAPISupportAccount(),isFromCTWA:null!=z});let Z;null!=X&&new y.FmxActionWamEvent({fmxEntryPoint:D.FMX_ENTRY_POINT.FMX_CARD,fmxEvent:L.FMX_EVENT.FMX_CARD_INSERTED,isSenderSmb:K}).commit(),(K||G)&&(Z=yield Y(C));const ee=yield(0,b.default)(C,$,Z);ee.some((e=>"biz_bot_3p_disclosure"===e.subtype))?H.bizBotSystemMsgType=g.BizBotType.BIZ_3P:ee.some((e=>"biz_bot_1p_disclosure"===e.subtype))&&(H.bizBotSystemMsgType=g.BizBotType.BIZ_1P);const te=yield(0,p.getOrphanTcToken)(C.toString());var ne,re;te&&(H.tcToken=null!==(ne=te.tcToken)&&void 0!==ne?ne:null,H.tcTokenTimestamp=null!==(re=te.tcTokenTimestamp)&&void 0!==re?re:null,yield(0,p.removeOrphanTcToken)(C.toString()));yield(0,_.frontendFireAndForget)("chatCollectionGadd",{chat:H}),yield(0,c.createChatRecord)(C,U(H));const ie=I.MessageOverwriteOption.NO_OVERWRITE;if(m){const e=[X,...ee,q,J].filter(Boolean);(0,v.getMessageCache)().addMessages(e.map((e=>({msg:e}))),!1)}else{const e=[X,...ee,q,J].filter(Boolean);for(const t of e)yield(0,T.handleSingleMsg)(C,t,"createChat",ie,!1)}if(e.isUser()){const t=(0,B.createUserWid)(e.toString()).toJid(),n=(0,d.getContactHash)(t);yield(0,R.getContactTable)().createOrMerge(t,{id:t,contactHash:n})}}))).apply(this,arguments)}function U(e){var t,n,r,i;const o={id:e.id.toString(),t:e.t,isAutoMuted:!1,unreadCount:null!==(t=e.unreadCount)&&void 0!==t?t:0,notSpam:e.notSpam,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp,disappearingModeInitiator:(e.disappearingModeInitiator,e.disappearingModeInitiator),tcToken:null!==(n=e.tcToken)&&void 0!==n?n:void 0,tcTokenTimestamp:null!==(r=e.tcTokenTimestamp)&&void 0!==r?r:void 0,tcTokenSenderTimestamp:null!==(i=e.tcTokenSenderTimestamp)&&void 0!==i?i:void 0,bizBotSystemMsgType:e.bizBotSystemMsgType,lidOriginType:e.lidOriginType};var a;(0,s.getABPropConfigValue)("dm_initiator_trigger")&&(o.disappearingModeTrigger=(e.disappearingModeTrigger,e.disappearingModeTrigger),o.disappearingModeInitiatedByMe=null!==(a=e.disappearingModeInitiatedByMe)&&void 0!==a?a:void 0);return null!=e.name&&(o.name=e.name),null!=e.isReadOnly&&(o.isReadOnly=e.isReadOnly),null!=e.muteExpiration&&(o.muteExpiration=e.muteExpiration),o}function x(e,t,n){let r=null;return null!=t&&(r=n===E.DisappearingModeInitiator.ChangedInChat?(0,A.genDisappearingModeUpdateSystemMsg)(e,t,null):(0,A.genDefaultDisappearingModeSystemMsg)(e,t,n===E.DisappearingModeInitiator.InitiatedByMe)),r}function F(){return K.apply(this,arguments)}function K(){return(K=(0,o.default)((function*(e,t,n){const[r,i]=yield Promise.all([(0,d.getContactRecord)((0,w.assertGetMeUser)()),(0,d.getContactRecord)(e)]);if(!t&&e.isUser()&&!e.isPSA()){if(null==n||n.id.fromMe)return(0,m.resolveNewChatDMSettings)(r,i);const e=(0,m.getEphemeralDurationForUser)(r);return(0,m.resolveNewIncomingChatDMSettings)(n?(0,M.getMsgEphemeralitySettings)(n):null,e)}}))).apply(this,arguments)}function Y(){return j.apply(this,arguments)}function j(){return(j=(0,o.default)((function*(e){var t,n;const r=yield(0,u.getBusinessProfileRow)(e.toString());if(r)return g.BizBotAutomatedType.cast(r.automatedType);return null===(t=(yield(0,C.queryBusinessProfile)([{wid:e}]))[0])||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.automated_type}))).apply(this,arguments)}},88117:(e,t,n)=>{"use strict";var r=n(95318);t.z=void 0;var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(42811),l=n(85074);const u=new a.default("aboutResponse",(e=>(e.assertAttr("type","result"),{id:e.attrInt("id")}))),c=(0,l.defineWebPersistedJob)().finalStep("sendStanza",function(){var e=(0,i.default)((function*(e){let{content:t}=e;const n=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,type:"set",xmlns:"status",id:(0,s.generateId)()},(0,s.wap)("status",null,t)),r=yield(0,o.deprecatedSendIq)(n,u);return r.success?{status:200}:{status:r.errorCode}}));return function(){return e.apply(this,arguments)}}()).end();t.z=c},23076:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.querySubgroupSuggestions=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(46837),a=n(91563),s=n(15610),l=n(63570),u=n(21380),c=n(14356);function d(){return(d=(0,i.default)((function*(e,t){if(!(0,u.getMexGroupSwitch)().isMexEnabledForSubgroupSuggestions())return p(e,t);try{return(0,l.mexFetchSubgroupSuggestions)(e.toJid(),t.toJid(),"INTERACTIVE")}catch(e){var n;const t=null!==(n=e.code)&&void 0!==n?n:e.status,r=e.message;return __LOG__(2)`querySubgroupSuggestions failed: ${t}:${r}`,e instanceof a.ServerStatusCodeError?Promise.reject(e):Promise.reject(new a.ServerStatusCodeError(Number(t),r))}}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t){const n=yield(0,o.sendGetSubGroupSuggestionsRPC)({iqTo:(0,c.widToGroupJid)(e),subGroupMixinArgs:{anySubGroupJid:(0,c.widToGroupJid)(t)}});switch(n.name){case"GetSubGroupSuggestionsResponseSuccess":return n.value.subGroupSuggestionsSubGroupSuggestion.map((t=>{var n,r,i;return{id:(0,s.groupJidToWid)(t.jid),parentGroupId:e,subject:t.subjectElementValue,desc:null===(n=t.description)||void 0===n?void 0:n.bodyElementValue,owner:(0,s.userJidToUserWid)(t.creator),t:t.creation,isExistingGroup:"true"===(null===(r=t.isExistingGroup)||void 0===r?void 0:r.elementValue),participantCount:null===(i=t.participantCount)||void 0===i?void 0:i.elementValue}}));case"GetSubGroupSuggestionsResponseClientError":return _(n.value.errorGetSubGroupSuggestionsClientErrors.value);default:return n.name,_(n.value.errorServerErrors.value)}}))).apply(this,arguments)}function _(e){let{code:t,text:n}=e;return __LOG__(2)`querySubgroupSuggestions failed: ${t}:${n}`,Promise.reject(new a.ServerStatusCodeError(Number(t),n))}},94645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkMarkGroupParticipantStaleJob=function(e){return(0,a.createNonPersistedJob)("bulkMarkGroupParticipantStale",(e=>(0,i.bulkMarkGroupParticipantStale)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({groupIds:e})},t.getGroupMetadataJob=function(e){return(0,a.createNonPersistedJob)("getGroupMetadata",(e=>(0,o.getGroupMetadataUNSAFE)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({groupWid:e})},t.getGroupParticipantJob=function(e){return(0,a.createNonPersistedJob)("getGroupParticipant",(e=>(0,i.getGroupParticipant)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({groupWid:e})},t.markGroupParticipantStaleJob=function(e){return(0,a.createNonPersistedJob)("markGroupParticipantStale",(e=>(0,i.markGroupParticipantStale)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e})},t.modifyGroupParticipantJob=function(e,t,n){return(0,a.createNonPersistedJob)("modifyGroupParticipant",(e=>(0,i.modifyGroupParticipant)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,oldId:t,newId:n})},t.updateGroupMetadataTableJob=function(e){return(0,a.createNonPersistedJob)("updateGroupMetadataTable",(e=>(0,o.updateGroupMetadataTable)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({groupInfos:e})},t.updateGroupParticipantTableWithoutDeviceSyncJob=function(e){return(0,a.createNonPersistedJob)("updateGroupParticipantTableWithoutDeviceSync",(e=>(0,i.updateGroupParticipantTableWithoutDeviceSync)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({groupInfos:e})};var r=n(75419),i=n(2505),o=n(22582),a=n(51280)},49189:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndUpdateGroupMembershipApprovalRequests=function(){return h.apply(this,arguments)},t.queryMembershipApprovalRequests=p;var i=r(n(48926)),o=n(19356),a=n(60585),s=n(1619),l=n(91563),u=n(15610),c=n(41984),d=n(14356);function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){const t=yield(0,o.sendGetMembershipApprovalRequestsRPC)({iqTo:(0,d.widToGroupJid)(e)});switch(t.name){case"GetMembershipApprovalRequestsResponseSuccess":return t.value.membershipApprovalRequestsMembershipApprovalRequest.map((e=>{const t=(0,u.userJidToUserWid)(e.jid);return{id:t,t:e.requestTime,addedBy:null!=e.requestor?(0,u.userJidToUserWid)(e.requestor):t,requestMethod:_(e.requestMethod),parentGroupId:null!=e.parentGroupJid?(0,u.groupJidToWid)(e.parentGroupJid):void 0}}));case"GetMembershipApprovalRequestsResponseClientError":return g(t.value.errorGetMembershipApprovalRequestsClientErrors.value);default:return t.name,g(t.value.errorServerErrors.value)}}))).apply(this,arguments)}function _(e){switch(e){case"invite_link":return c.RequestMethod.InviteLink;case"linked_group_join":return c.RequestMethod.LinkedGroupJoin;case"non_admin_add":return c.RequestMethod.NonAdminAdd}}function g(e){let{code:t,text:n}=e;return __LOG__(2)`queryMembershipApprovalRequests failed: ${t}:${n}`,Promise.reject(new l.ServerStatusCodeError(Number(t),n))}function h(){return(h=(0,i.default)((function*(e){const t=yield p(e),n=(yield(0,a.getMembershipApprovalRequests)(e)).filter((e=>!t.some((t=>t.id.equals(e.id)))));yield(0,a.removeMembershipApprovalRequests)(e,n.map((e=>e.id))),yield(0,a.addMembershipApprovalRequests)(e,t),(0,s.frontendFireAndForget)("removeMembershipApprovalRequests",{groupId:e,requestIds:n.map((e=>e.id))}),(0,s.frontendFireAndForget)("addMembershipApprovalRequests",{groupId:e,requests:t})}))).apply(this,arguments)}},22356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMembershipApprovalRequestsJob=function(e,t,n){return(0,o.createNonPersistedJob)("removeMembershipApprovalRequests",(e=>(0,i.removeMembershipApprovalRequests)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,requests:t,isOffline:n})};var r=n(75419),i=n(90425),o=n(51280)},92143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipantsJob=function(e,t,n,a){return(0,o.createNonPersistedJob)("addParticipants",(e=>(0,i.addParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,participants:t,isOffline:n,reason:a})},t.demoteCommunityParticipantsJob=function(e,t,n){return(0,o.createNonPersistedJob)("demoteCommunityParticipants",(e=>(0,i.demoteCommmunityParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,participants:t,isOffline:n})},t.demoteParticipantsJob=function(e,t,n,a){return(0,o.createNonPersistedJob)("demoteParticipants",(e=>(0,i.demoteParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,participants:t,groupMetadata:n,isOffline:a})},t.promoteCommunityParticipantsJob=function(e,t,n){return(0,o.createNonPersistedJob)("promoteCommunityParticipants",(e=>(0,i.promoteCommmunityParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,participants:t,isOffline:n})},t.promoteParticipantsJob=function(e,t,n,a){return(0,o.createNonPersistedJob)("promoteParticipants",(e=>(0,i.promoteParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,participants:t,groupMetadata:n,isOffline:a})},t.removeParticipantsJob=function(e,t,n,a,s,l,u){return(0,o.createNonPersistedJob)("removeParticipants",(e=>(0,i.removeParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({group:e,participants:t,timestamp:n,author:a,reason:s,groupMetadata:l,isOffline:u})},t.updateParticipantsJob=function(e){return(0,o.createNonPersistedJob)("updateParticipants",(e=>(0,i.updateParticipants)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted(e)};var r=n(75419),i=n(78440),o=(n(98051),n(51280))},69002:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupJob=function(e,t,n){return(0,p.createNonPersistedJob)("queryGroup",function(){var n=(0,i.default)((function*(n){var r;const i=yield(0,s.getGroupMetadata)(e);if(null!=i&&i.terminated)return;let p;if((0,d.xmlGroupInfoEnabled)()||(0,d.groupInfoShadowTestingEnabled)()){if(p=yield(0,u.queryGroup)(n),(0,d.groupInfoShadowTestingEnabled)()){yield(0,c.mexGetGroupInfo)(e.toString(),t).catch((()=>{__LOG__(3)`groupQueryGroupJob: xml query succeeded but mex group info failed ${e}`}))}}else(0,d.mexGetGroupInfoEnabled)()&&(p=yield(0,c.mexGetGroupInfo)(e.toString(),t));if(null===(r=p)||void 0===r?void 0:r.id){const e=p.participants.map((e=>({id:(0,f.toUserWid)(e.id),lid:e.lid?(0,f.toUserWid)(e.lid):null,displayName:e.displayName,phoneNumber:e.phoneNumber?(0,f.toUserWid)(e.phoneNumber):null}))),{owner:t,creatorPn:n,subjectOwner:r,subjectOwnerPn:i}=p;t&&n&&e.push({id:(0,f.toUserWid)(t),lid:(0,f.toUserWid)(t),phoneNumber:(0,f.toUserWid)(n)}),r&&i&&e.push({id:(0,f.toUserWid)(r),lid:(0,f.toUserWid)(r),phoneNumber:(0,f.toUserWid)(i)}),yield Promise.all([(0,s.updateGroupMetadataTable)({groupInfos:[p]}),(0,l.updateParticipants)({group:p.id,participants:p.participants,groupInfo:p}),(0,a.createOrReplaceDisplayNamesAndLidPnMappings)(e,!0)]),(0,o.clearAdminshipCache)(p.id.toString())}return p}));return function(){return n.apply(this,arguments)}}()).waitUntilCompleted({groupWid:e,request:t,phash:n})};var i=r(n(48926)),o=n(64002),a=n(80780),s=n(22582),l=n(78440),u=n(22296),c=n(73358),d=n(52425),p=n(51280),f=n(51017)},37246:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.maybeQueryAndUpdateMembershipApprovalRequests=S,t.queryAllGroups=function(){return m.apply(this,arguments)},t.queryAndUpdateGroupMetadataById=function(){return y.apply(this,arguments)},t.queryGroupInvite=function(){return E.apply(this,arguments)},t.queryGroupsById=function(){return I.apply(this,arguments)};var i=r(n(48926)),o=n(99124),a=n(66065),s=n(45487),l=n(83741),u=n(93040),c=n(64002),d=n(1619),p=n(91563),f=n(94645),_=n(49189),g=n(69002),h=n(22296),A=n(3885);function m(){return(m=(0,i.default)((function*(){(0,c.clearAdminshipCache)();const e=yield(0,s.sendGetParticipatingGroupsRPC)({hasParticipants:!0,hasDescription:!0});switch(e.name){case"GetParticipatingGroupsResponseSuccess":return e.value.groupsGroup.map((e=>{let{groupInfoOrTruncatedGroupInfoGroupInfoMixinGroup:t}=e;return(0,h.parseGroupSmax)(t.value)}));case"GetParticipatingGroupsResponseClientError":{const{code:t,text:n}=e.value.errorIQErrorBadRequestOrRateOverlimitOrFallbackClientMixinGroup.value;return __LOG__(2)`queryAllGroups failed: ${t}:${n}`,Promise.reject(new p.ServerStatusCodeError(Number(t),n))}case"GetParticipatingGroupsResponseServerError":{const{code:t,text:n}=e.value.errorServerErrors.value;return __LOG__(2)`queryAllGroups failed: ${t}:${n}`,Promise.reject(new p.ServerStatusCodeError(Number(t),n))}}}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){const t=yield(0,a.sendGetInviteGroupInfoRPC)({inviteCode:e});switch(t.name){case"GetInviteGroupInfoResponseSuccess":return(0,h.parseGroupSmax)(t.value.groupInviteLinkGroupInfoMixin);case"GetInviteGroupInfoResponseClientError":{const{code:e,text:n}=t.value.errorGetInviteGroupInfoClientErrors.value;return __LOG__(2)`queryGroupInvite failed: ${e}:${n}`,Promise.reject(new p.ServerStatusCodeError(Number(e),n))}case"GetInviteGroupInfoResponseServerError":{const{code:e,text:n}=t.value.errorServerErrors.value;return __LOG__(2)`queryGroupInvite failed: ${e}:${n}`,Promise.reject(new p.ServerStatusCodeError(Number(e),n))}}}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){const n=yield(0,g.queryGroupJob)(e,t);if(null==n)return;if(n.phashMatch)return void __LOG__(2)`queryAndUpdateGroupMetadataById: skip update due to phash match`;const[r]=yield(0,c.injectPastParticipantsFromDB)([n]);yield(0,f.updateGroupParticipantTableWithoutDeviceSyncJob)([r]),(0,d.frontendFireAndForget)("createOrUpdateGroupMetadataFromQuery",{groupInfo:r}),yield S(r)}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){if(e.membershipApprovalMode&&e.participants.some((e=>(0,A.isMeAccount)(e.id)&&e.isAdmin))&&(0,l.getABPropConfigValue)("group_join_request_m2")){if(!(yield(0,u.getChatRecord)(e.id)))return;return(0,_.queryAndUpdateGroupMembershipApprovalRequests)(e.id)}}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e,t){const n=yield(0,o.sendBatchGetGroupInfoRPC)({queryContext:t,groupArgs:e.map((e=>({groupJid:e})))});switch(n.name){case"BatchGetGroupInfoResponseSuccess":return __LOG__(2)`queryGroupsById: successfully received batch group info for ${e.length}`,(0,h.parseBatchGroupInfoSmax)(t,n.value.groupsGroup);case"BatchGetGroupInfoResponseClientError":{const{code:e,text:t}=n.value.errorBatchGetGroupInfoClientErrors.value;return __LOG__(2)`queryGroupsById failed: ${e}:${t}`,Promise.reject(new p.ServerStatusCodeError(Number(e),t))}case"BatchGetGroupInfoResponseServerError":{const{code:e,text:t}=n.value.errorServerErrors.value;return __LOG__(2)`queryGroupsById failed: ${e}:${t}`,Promise.reject(new p.ServerStatusCodeError(Number(e),t))}}}))).apply(this,arguments)}},20383:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUnjoinedSubgroupsJob=function(e,t){return(0,o.createNonPersistedJob)("cleanUnjoinedSubgroups",(e=>(0,i.cleanUnjoinedSubgroups)(e)),{priority:r.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({unjoinedSubgroupIds:e,parentGroupId:t})},t.updateUnjoinedSubgroupsJob=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,o.createNonPersistedJob)("updateUnjoinedSubgroups",(e=>(0,i.updateUnjoinedSubgroups)(e)),{priority:r.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted({unjoinedSubgroups:e,parentGroupId:t,link:n})};var r=n(75419),i=n(80251),o=n(51280)},90894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSubgroupSuggestionsJob=function(e,t){return(0,o.createNonPersistedJob)("removeSubgroupSuggestions",(e=>(0,i.removeSubgroupSuggestionsWithOfflineOption)(e)),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted({subgroupSuggestions:e,isOffline:t})};var r=n(75419),i=n(7429),o=n(51280)},63190:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.digestKey=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(82749),s=r(n(82601)),l=n(42811),u=n(83986),c=n(42728),d=r(n(89482));const p=new s.default("digestResponseParser",(e=>{const t=e.child("digest"),n=t.child("skey");return{regId:t.child("registration").contentUint(4),type:t.child("type").contentUint(1),identity:t.child("identity").contentBytes(32),skey:{id:n.child("id").contentUint(3),pubkey:n.child("value").contentBytes(32),signature:n.child("signature").contentBytes(64)},keys:t.child("list").mapChildren((e=>e.contentUint(3))),hash:t.child("hash").contentBytes(20)}}));function f(){return(f=(0,i.default)((function*(){const e=(0,l.wap)("iq",{xmlns:"encrypt",type:"get",to:l.S_WHATSAPP_NET,id:(0,l.generateId)()},(0,l.wap)("digest",null)),t=yield(0,a.deprecatedSendIq)(e,p);let n=null;if(t.success)try{yield _(t.result),n=!1}catch(e){n=!1}else{const e=t.errorCode;404===e?(__LOG__(3)`digestKey: no record found for current user`,n=!0):406===e?(__LOG__(3)`digestKey: malformed request`,n=!1):503===e?(__LOG__(3)`digestKey: service unavailable`,n=!1):(__LOG__(3)`digestKey: server error ${e}`,n=!1)}if(null!=n&&n)return __LOG__(2)`digestKey: validate key bundle failed, upload prekeys again`,(0,c.uploadPreKeys)()}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){const[t,n]=yield Promise.all([u.waSignalStore.getRegistrationInfo(),u.waSignalStore.getSignedPreKey()]);if(!t||!n)throw(0,d.default)("validateLocalKeyBundle: No registration info is available");if(e.regId!==t.registrationId)throw(0,d.default)("validateLocalKeyBundle: registation id mismatch");const r=t.identityKeyPair.pubKey,a=n.keyPair.pubKey,s=r.byteLength+a.byteLength+n.signature.byteLength+32*e.keys.length,l=new Uint8Array(s);let c=0;[r,a,n.signature].forEach((e=>{l.set(new Uint8Array(e),c),c+=e.byteLength}));const p=e.keys.map(function(){var e=(0,i.default)((function*(e){const t=yield u.waSignalStore.getPreKeyById(e);if(!t)throw(0,d.default)(`validateLocalKeyBundle: missing prekey record for id ${e}`);return t.keyPair.pubKey}));return function(){return e.apply(this,arguments)}}());(yield Promise.all(p)).forEach((e=>{l.set(new Uint8Array(e),c),c+=e.byteLength}));const f=yield self.crypto.subtle.digest("SHA-1",l),_=(0,o.encodeB64)(f),g=(0,o.encodeB64)(e.hash);if(_!==g)throw(0,d.default)(`validateLocalKeyBundle: hash mismatch remote:${g} local:${_}`);__LOG__(2)`validateLocalKeyBundle: success`}))).apply(this,arguments)}},7163:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPrekeys=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(78481),a=n(74653),s=n(91563),l=n(64371),u=n(51017),c=n(14356),d=r(n(89482));function p(){return(p=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=yield(0,a.sendFetchKeyBundlesRPC)({userArgs:e.map((e=>({userJid:(0,c.widToDeviceJid)(e),hasUserReasonIdentity:t})))});if("FetchKeyBundlesResponseServerError"===n.name){const e=n.value.errorServerErrors.value;throw new s.ServerStatusCodeError(Number(e.code),`fetchPrekeys: server error: ${e.code} ${e.text}`)}if("FetchKeyBundlesResponseRequestError"===n.name){const e=n.value.errorRequestErrorsFetch.value;throw new s.ServerStatusCodeError(Number(e.code),`fetchPrekeys: request error: ${e.code} ${e.text}`)}const r=n.value.listUser.map((e=>{const t=e.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;switch(t.name){case"FetchKeyBundlesUserSuccess":{var n,r;const{preKeyMixin:i,elementValue:a,deviceIdentityMixin:s,skeyIdKeyIDMixin:l,skeyValueKeyDataMixin:c,skeySignatureElementValue:d,registrationElementValue:p}=t.value;return{deviceIdentity:null!==(n=null==s?void 0:s.deviceIdentityElementValue)&&void 0!==n?n:null,identity:a,skey:{id:(0,o.convertBytesToUint)(l.elementValue,3),pubkey:c.elementValue,signature:d},key:i?{id:(0,o.convertBytesToUint)(i.keyIdKeyIDMixin.elementValue,3),pubkey:null===(r=i.keyValueKeyDataMixin)||void 0===r?void 0:r.elementValue}:null,regId:(0,o.convertBytesToUint)(p,4),wid:(0,u.createWid)(e.jid)}}case"FetchKeyBundlesUserErrorFallback":case"FetchKeyBundlesUserError":{const{errorCode:e,errorText:n}=t.value;return(0,d.default)(`fetchPrekeys: list item error: ${e} ${n}`)}}}));if(0===r.length)throw(0,d.default)("fetchPrekeys: empty key info");const{depletedPrekeyCount:i,processedPrekeyCount:p}=yield(0,l.processKeyBundles)(r);return __LOG__(2)`fetchPrekeys: successfully established ${p} E2E sessions out of ${e.length} requested`,{depletedPrekeyCount:i}}))).apply(this,arguments)}},16157:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAndStoreIdentityKeys=function(){return g.apply(this,arguments)},t.getIdentityKeys=h;var i=r(n(48926)),o=n(82749),a=n(42811),s=r(n(82601)),l=n(11439),u=n(52894),c=n(15610),d=n(49178),p=n(4830),f=r(n(89482));const _=new s.default("identityKeysParser",(e=>e.child("list").mapChildren((e=>{if(e.hasChild("error")){const t=e.child("error"),n=t.attrInt("code"),r=t.attrString("text");throw(0,f.default)(`identityKeysParser bad response: ${n} ${r}`)}return{type:e.child("type").contentBytes(1),identity:e.child("identity").contentBytes(32),user:(0,c.deviceJidToDeviceWid)(e.attrDeviceJid("jid"))}}))));function g(){return(g=(0,i.default)((function*(e){const t=yield(0,p.getPersistSignalProtocolStore)().bulkLoadIdentityKey(e.map((e=>String((0,d.createSignalAddress)(e))))),n=e.filter(((e,n)=>null==t[n]));if(0===n.length)return void __LOG__(2)`getAndStoreIdentityKeys: got 0 missing keys`;__LOG__(2)`getAndStoreIdentityKeys: query ${n.length} missing keys for ${e.length} contacts`;const r=(yield h(n)).map((e=>{const t=e.identity,n=(0,u.toSignalCurvePubKey)(t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset));return{identityKey:(0,d.bufferToStr)(n),identifier:(0,d.createSignalAddress)(e.user).toString()}}));return(0,p.getPersistSignalProtocolStore)().bulkCreateIdentity(r)}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){const t=e.map((e=>(0,a.wap)("user",{jid:(0,l.DEVICE_JID)(e)}))),n=(0,a.wap)("iq",{xmlns:"encrypt",type:"get",to:a.S_WHATSAPP_NET,id:(0,a.generateId)()},(0,a.wap)("identity",null,t)),r=yield(0,o.deprecatedSendIq)(n,_);if(!r.success)throw(0,f.default)(`getIdentityKeys bad response ${String(r)}`);return r.result}))).apply(this,arguments)}},25614:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureE2ESessions=p,t.ensureE2ESessionsWithDelay=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new a.ShiftTimer((()=>{p(e,n)}));e.forEach((e=>{c.set(String(e),r)})),r.onOrAfter(1e3*t)};var i=r(n(48926)),o=n(31630),a=n(78494),s=n(74700),l=n(7163),u=n(74600);const c=new Map,d=new Map;function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];yield(0,s.waitForOfflineDeliveryEnd)(),__LOG__(2)`ensureE2ESessions: ${e.length} wids: ${e.map((e=>e.toString())).join()}`;const n=new o.Resolvable,r=[],i=[];e.forEach((e=>{if(!e.isUserNotPSA())return void __LOG__(2)`ensureE2ESessions: can only estabilish session with user wid`;const t=c.get(e.toString());t&&(t.cancel(),c.delete(e.toString()));const o=d.get(e.toString());o?r.push(o):(i.push(e),d.set(e.toString(),n.promise))}));let a=0,p=0;try{if(i.length>0){const e=yield u.Session.hasSignalSessions(i),n=i.filter(((t,n)=>!e[n]));if(n.length>0){var f;p=null!==(f=(yield(0,l.fetchPrekeys)(n,t)).depletedPrekeyCount)&&void 0!==f?f:0,a=n.length}}n.resolve()}catch(t){throw __LOG__(3)`ensureE2ESessions: ${e.length} wids: request failed: ${t}`,n.resolve(t),t}finally{i.forEach((e=>d.delete(e.toString())))}try{const e=(yield Promise.all(r)).find(Boolean);if(e)throw e}catch(t){throw __LOG__(3)`ensureE2ESessions: ${e.length} wids: deduped requests failed: ${t}`,t}return __LOG__(2)`ensureE2ESessions: ${e.length} wids: ${i.length-a} existing sessions, ${a} requested, ${r.length} requests deduplicated`,{missedPrekeyCount:a,depletedPrekeyCount:p}}))).apply(this,arguments)}},52351:(e,t,n)=>{"use strict";var r=n(95318);t.K=void 0;var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(42811),l=n(52894),u=n(85074),c=n(63190),d=n(84015),p=n(83986),f=n(89924),_=r(n(89482));const g=new a.default("rotateKeyResponseParser",(e=>{e.assertFromServer()})),h=(0,u.defineWebPersistedJob)().step("uploadKeys",(0,i.default)((function*(){const e=yield p.waSignalStore.getRegistrationInfo().then((e=>{if(!e)throw(0,_.default)("No registration info is available");return p.waSignalStore.rotateSignedPreKey((0,l.toSignalCurveKeyPair)(e.identityKeyPair),d.generateSignedKeyPair)}));__LOG__(2)`rotateKey: signedPreKey uploading`;const t=(0,s.wap)("iq",{xmlns:"encrypt",type:"set",to:s.S_WHATSAPP_NET,id:(0,s.generateId)()},(0,s.wap)("rotate",null,(0,f.xmppSignedPreKey)(e))),n=yield(0,o.deprecatedSendIq)(t,g);if(n.success)return{shouldDigestKey:!1};let r=!1;const i=n.errorCode;return 406===i?__LOG__(3)`rotateKey generated bad key`:409===i?(__LOG__(3)`skey does not pass server validation`,r=!0):i>=500?__LOG__(2)`rotateKey server error ${i}, wait a day`:(__LOG__(2)`rotateKey unrecognized error ${i}`,r=!0),{shouldDigestKey:r}}))).finalStep("maybeDigestKey",(e=>{const{shouldDigestKey:t}=e;if(t)return(0,c.digestKey)()})).end();t.K=h},42728:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.uploadPreKeyResParser=void 0,t.uploadPreKeys=function(){const e=new s.PromiseRetryLoop({name:"uploadPreKeys",timer:E,code:e=>(0,i.default)((function*(){__LOG__(2)`uploadPreKeys: running`;const t=yield function(){return m.apply(this,arguments)}();!0===(null==t?void 0:t.success)?(__LOG__(2)`uploadPreKeys: done`,e()):__LOG__(2)`uploadPreKeys: retrying (after delay)`}))()});return e.start(),e.promise()};var i=r(n(48926)),o=n(93042),a=n(82749),s=n(82521),l=n(42811),u=r(n(82601)),c=r(n(44423)),d=n(52143),p=n(84015),f=n(83986),_=n(89924),g=r(n(89482));const h={error:!1,result:!0},A=new u.default("uploadPreKeyResParser",(e=>{e.assertTag("iq"),e.assertFromServer();if(e.attrEnum("type",h))return{success:!0};const t=e.child("error");return{errorCode:t.attrInt("code"),errorText:t.hasAttr("text")?t.attrString("text"):""}}));function m(){return(m=(0,i.default)((function*(){const e=d.ServerProps.maxKeys,[t,n]=yield Promise.all([f.waSignalStore.getRegistrationInfo(),f.waSignalStore.getSignedPreKey()]);if(!t||!n)throw(0,g.default)("No signal info is available");const{registrationId:r,identityKeyPair:i}=t,[s,u]=yield f.waSignalStore.getOrGenPreKeys(e,p.generatePreKeyPair).then((e=>{if(0===e.length)throw(0,g.default)("No preKey is available");return[(0,l.wap)("iq",{id:(0,l.generateId)(),xmlns:"encrypt",type:"set",to:l.S_WHATSAPP_NET},(0,l.wap)("registration",null,(0,l.BIG_ENDIAN_CONTENT)(r)),(0,l.wap)("type",null,c.default.KEY_BUNDLE_TYPE),(0,l.wap)("identity",null,i.pubKey),(0,l.wap)("list",null,e.map(_.xmppPreKey)),(0,_.xmppSignedPreKey)(n)),e[e.length-1].keyId]}));try{const t=yield(0,o.waitForConnection)().then((()=>f.waSignalStore.markKeyAsUploaded(u))).then((()=>(0,a.deprecatedSendIqWithoutRetry)(s,A)));if(t.success)return f.waSignalStore.setServerHasPreKeys(!0),__LOG__(2)`_uploadPreKeys: ${e} keys uploaded, raw stanza size: ${s.toString().length}b`,{success:!0};const n=t.errorCode;return n>=500?__LOG__(3)`_uploadPreKeys: server requested backoff ${n} (count: ${e}, size: ${s.toString().length}b)`:406===n?__LOG__(3)`_uploadPreKeys: uploaded invalid keys (count: ${e}, size: ${s.toString().length}b)`:__LOG__(3)`_uploadPreKeys: unrecognized error ${n} (count: ${e}, size: ${s.toString().length}b)`,{errorCode:t.errorCode,errorText:t.errorText}}catch(t){__LOG__(3)`_uploadPreKeys: disconnected, unclear if on server: ${t} (count: ${e}, size: ${s.toString().length}b)`}}))).apply(this,arguments)}t.uploadPreKeyResParser=A;const E={algo:{type:"fibonacci",first:1e3,second:2e3},max:61e4}},69707:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateDeliveryReceipts=function(){return y.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(46316),s=n(87946),l=n(24513),u=n(67621),c=n(6431),d=n(24936);const p=n(76672).Mirrored(["Message","Reaction","PollVote","NotSupportedAddon"]);function f(e){const t=new Map;return e.forEach((e=>{var n;const r=(e=>e.hasHideFailEnc?(0,l.isPollVoteMsgMeta)(e.msgMeta)?p.PollVote:(0,l.isReactionMsgMeta)(e.msgMeta)?p.Reaction:p.NotSupportedAddon:p.Message)(e),i=null!==(n=t.get(r))&&void 0!==n?n:t.set(r,[]).get(r);null==i||i.push(e)})),t}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e,t,n){const r=e.map((e=>{let{msgInfo:t}=e;return(0,u.messageInfoToKey)(t)})),i=a.Cmd.isMainStreamReadyMd?yield t(r):r.map((()=>!1)),o=new Set,s=[];for(const[e,t]of i.entries())t?o.add(r[e].toString()):s.push(r[e].toString());if(0===s.length)return o;const l=yield n(s);return new Set([...Array.from(o),...Array.from(l)])}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e,t){switch(e){case p.Message:return _(t,(e=>(0,o.frontendSendAndReceive)("hasMsgsInCollection",{msgKeys:e})),function(){var e=(0,i.default)((function*(e){const t=new Set;return(0,s.getMsgsExistByMsgKey)(e).then((n=>{for(const[r,i]of n.entries())i&&t.add(e[r]);return t}))}));return function(){return e.apply(this,arguments)}}());case p.Reaction:return _(t,(e=>(0,o.frontendSendAndReceive)("hasReactionsInCollection",{msgKeys:e})),(e=>{const t=new Set;return(0,d.getReactionsTable)().anyOf(["msgKey"],e).then((e=>{for(const n of e)t.add(n.msgKey);return t}))}));case p.PollVote:return _(t,(e=>(0,o.frontendSendAndReceive)("hasPollVotesInCollection",{msgKeys:e})),(e=>(0,c.getTable)().anyOf(["msgKey"],e,{shouldDecrypt:!1}).then((e=>{const t=new Set;for(const n of e)t.add(n.msgKey);return t}))));case p.NotSupportedAddon:{const e=new Set;for(const{msgInfo:n}of t)e.add((0,u.messageInfoToKey)(n).toString());return e}}}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){let[t,n]=e;const r=yield h(t,n);return n.map((e=>({isInDB:r.has((0,u.messageInfoToKey)(e.msgInfo).toString()),receipt:e})))}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=f(e),n=yield Promise.all(Array.from(t.entries()).map(m));return[].concat(...n)}))).apply(this,arguments)}},84360:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDeliveryReceiptsAfterDecryption=function(){return h.apply(this,arguments)},t.sendDeliveryReceiptsAfterPresence=function(){return(0,d.getInactiveReceiptTable)().all().then(function(){var e=(0,i.default)((function*(e){const t=new Map,n=Date.now().toString();return e.forEach((e=>{const{msgId:n,chatId:r,participantId:i}=e,o=(0,_.createWid)(r),a=(i?(0,_.createWid)(i):null)||o;let s=t.get(o);s||(s=new Map,t.set(o,s));let l=s.get(a);l||(l=[],s.set(a,l)),l.push(n)})),yield Promise.all(Array.from(t.keys()).map((e=>{const r=t.get(e);if(r)return(0,p.sendAggregateReceipts)({to:e,type:p.RECEIPT_TYPE.DELIVERY,t:n,groupedReceipt:r})}))),(0,d.getInactiveReceiptTable)().bulkRemove(e.map((e=>e.msgId)))}));return function(){return e.apply(this,arguments)}}())};var i=r(n(48926)),o=n(82749),a=n(42811),s=n(11439),l=n(96955),u=n(19909),c=n(23389),d=n(12186),p=n(83752),f=n(3885),_=n(51017),g=n(14356);function h(){return(h=(0,i.default)((function*(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=(0,f.assertGetMe)(),s=t.isUser()&&(0,_.toUserWid)(a).equals((0,_.toUserWid)(t))||null!=r&&(0,_.toUserWid)(a).equals((0,_.toUserWid)(r)),l=!0===o.hasInactiveMsg&&!s,c=!l;let p=Promise.resolve();if(!c&&!(0,u.isInactiveReceiptsV2Enabled)()){const n={msgId:e,chatId:t.toString(),participantId:r?r.toString():null};p=(0,d.getInactiveReceiptTable)().createOrReplace(n)}return p.then((()=>{if(A(e,t,n,r,c,s,i),c)return(0,d.getInactiveReceiptTable)().remove(e)}))}))).apply(this,arguments)}function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t,n,r,i,u,d){let f=a.DROP_ATTR;d?f=(0,a.CUSTOM_STRING)(p.RECEIPT_TYPE.PEER_MSG):u?f=(0,a.CUSTOM_STRING)(p.RECEIPT_TYPE.SENDER):i||(f=(0,a.CUSTOM_STRING)(p.RECEIPT_TYPE.INACTIVE));const _=yield(0,p.shouldRequestTcToken)(t,f,a.DROP_ATTR),h=(0,l.extractJidFromJidWithType)((0,g.widToJidWithType)(t)),A=(0,a.wap)("receipt",{id:(0,a.CUSTOM_STRING)(e),to:(0,a.JID)(h),participant:(t.isGroup()||t.isBroadcast())&&r?(0,s.DEVICE_JID)(r):a.DROP_ATTR,recipient:!d&&u&&n?(0,s.USER_JID)(n):a.DROP_ATTR,type:f,privacy_token:_?(0,a.CUSTOM_STRING)("false"):a.DROP_ATTR});(0,c.addOnlineDanglingReceipts)(t,r||t,e),(0,o.deprecatedCastStanza)(A)}))).apply(this,arguments)}},48495:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateMsgReceipts=g,t.sendAggregateOfflineReceipts=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=n(93042),a=n(29987),s=n(12020),l=n(37995),u=n(17067),c=n(59516),d=n(69707),p=n(83752),f=n(3885),_=n(51017);function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){const t=[];if(0===e.length)return t;const n=yield(0,d.aggregateDeliveryReceipts)(e);for(const{receipt:e,isInDB:r}of n){const{externalId:n,from:i,author:o,msgMeta:a,msgInfo:c,enc:d}=e;if(r)__LOG__(2)`sendAggregateOfflineReceipts: duplicate message exists in the db: ${n}`,(0,u.postIncomingMessageDropDuplicateMessage)({msgMeta:a,msgInfo:c,enc:d}),t.push({externalId:n,from:i,author:o});else{__LOG__(2)`sendAggregateOfflineReceipts: duplicate message does not exist in the db: ${n}`,(0,u.postIncomingMessageDropOldCounter)({msgMeta:a,msgInfo:c,enc:d});const e=i.isUser()||i.isNewsletter()?null:o;(0,l.sendNack)(n,i,a.type,e,s.NackReason.SignalErrorOldCounter)}}return t}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){let t=[];const n=[];for(const{receiptInfo:r,duplicateMsgReceiptInfo:i}of e)null!=i&&n.push(i),null!=r&&t.push(r);t=t.concat(yield g(n));const r=new Map,i=[];t.forEach((e=>{const{from:t,author:n,externalId:o}=e;let a=r.get(t);a||(a=new Map,r.set(t,a));let s=a.get(n);s||(s=[],a.set(n,s)),s.push(o),i.push({from:String(t),author:String(n),externalId:o})}));const s=(0,f.getMeUser)(),l=String((0,a.unixTime)());Promise.all(Array.from(r.keys()).map((e=>{const t=r.get(e);if(!t)return;const n=e.isUser()&&s.equals((0,_.toUserWid)(e));return(0,p.sendAggregateReceipts)({to:e,type:n?p.RECEIPT_TYPE.SENDER:p.RECEIPT_TYPE.DELIVERY,t:l,groupedReceipt:t,recipient:n?s:null})}))),(0,o.cancelDeadSocketTimer)(),i.length>0&&(yield(0,c.getTable)().create({receipts:i,acks:[]}))}))).apply(this,arguments)}},83752:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RECEIPT_TYPE=void 0,t.resetRequestedTcTokens=function(){h.clear()},t.sendAggregateReceipts=function(){return S.apply(this,arguments)},t.sendBotInvokeResponseAcks=y,t.sentTokenRequests=void 0,t.shouldRequestTcToken=v;var i=r(n(81109)),o=r(n(48926)),a=r(n(85564)),s=n(82749),l=r(n(82601)),u=n(42811),c=n(83741),d=n(55373),p=n(11439),f=n(94273),_=n(94007),g=n(97023);const h=new Set;t.sentTokenRequests=h;const A=Object.freeze({INACTIVE:"inactive",SENDER:"sender",DELIVERY:"delivery",READ:"read",READ_SELF:"read-self",PLAYED:"played",PLAYED_SELF:"played-self",HISTORY_SYNC_COMPLETION:"hist_sync",SERVER_ERROR:"server-error",PEER_MSG:"peer_msg"});t.RECEIPT_TYPE=A;const m=new l.default("readReceiptAckParser",(e=>(e.assertTag("ack"),{readReceipts:e.hasAttr("readreceipts")?e.attrEnum("readreceipts",f.ALL_NONE):null})));function E(e,t){const[n,...r]=(0,a.default)(Array.from(t.values())),i=r.length>0?(0,u.wap)("list",null,r.map((e=>(0,u.wap)("item",{id:(0,u.CUSTOM_STRING)(e)})))):null,o=(0,u.wap)("ack",{id:(0,u.CUSTOM_STRING)(n),to:(0,p.JID)(e),class:(0,u.CUSTOM_STRING)("message"),type:(0,u.CUSTOM_STRING)("text")},i);return(0,s.deprecatedCastStanza)(o)}function y(e,t,n,r){const[i,...o]=e,a=o.length>0?(0,u.wap)("list",null,o.map((e=>(0,u.wap)("item",{id:(0,u.CUSTOM_STRING)(e)})))):null,l=(0,u.wap)("ack",{id:(0,u.CUSTOM_STRING)(i),to:(0,p.JID)(t),recipient:null!=n?(0,p.USER_JID)(n):u.DROP_ATTR,participant:null!=r?(0,p.USER_JID)(r):u.DROP_ATTR,class:(0,u.CUSTOM_STRING)("message"),type:(0,u.CUSTOM_STRING)("text")},a);return(0,s.deprecatedCastStanza)(l)}function S(){return(S=(0,o.default)((function*(e){let{to:t,type:n,groupedReceipt:r,t:a,recipient:l}=e;if(t.isNewsletter()&&n===A.DELIVERY)return E(t,r);const c=n===A.READ||n===A.PLAYED||n===A.READ_SELF||n===A.PLAYED_SELF||n===A.HISTORY_SYNC_COMPLETION,f=yield v(t,n,A.DELIVERY);yield Promise.all(Array.from(r.keys()).map((e=>{const _=r.get(e);if(!_||0===_.length)return;const h=!t.isBot()&&e.isBot();if(n===A.DELIVERY&&h){let n,r,i;return t.isUser()?(n=e,r=t):(n=t,i=e),void y(_,n,r,i)}const E=t.isUser()||t.isNewsletter()?null:e;let S=t,v=l;null==v&&t.isUser()&&!t.isBot()&&e.isBot()&&(S=e,v=t);const I=[];for(;_.length>0;){const e=_.splice(0,256);let t=null;e.length>1&&(t=(0,u.wap)("list",null,e.slice(1).map((e=>(0,u.wap)("item",{id:(0,u.CUSTOM_STRING)(e)})))));const r=(0,u.wap)("receipt",{to:(0,p.JID)(S),type:n===A.DELIVERY?u.DROP_ATTR:(0,u.CUSTOM_STRING)(n),id:(0,u.CUSTOM_STRING)(e[0]),t:null!=a?(0,u.CUSTOM_STRING)(a):u.DROP_ATTR,participant:E?(0,p.DEVICE_JID)(E):u.DROP_ATTR,recipient:v?(0,p.USER_JID)(v):u.DROP_ATTR,privacy_token:f?(0,u.CUSTOM_STRING)("false"):u.DROP_ATTR},t);if(c){const t=function(){var t=(0,o.default)((function*(){const t={id:e[0],from:S,class:"receipt",type:n,participant:E,recipient:v};if(n!==A.READ&&n!==A.READ_SELF)return(0,s.deprecatedSendStanzaAndWaitForAck)(r,(0,d.toCoreAckTemplate)(t));{const e=yield(0,s.deprecatedSendStanzaAndReturnAck)(r,(0,d.toCoreAckTemplate)(t)),n=m.parse(e);if(n.error)__LOG__(4,void 0,new Error,!0)`[messaging] sendAggregateReceipts: Invalid ack from server`,SEND_LOGS("Invalid-Receipt-Ack");else{const{readReceipts:e}=n.success;null!=e&&(0,g.setUserPrivacySettings)((0,i.default)((0,i.default)({},(0,g.getUserPrivacySettings)()),{},{readReceipts:e}))}}}));return function(){return t.apply(this,arguments)}}();I.push(t())}else I.push((0,s.deprecatedCastStanza)(r))}return Promise.all(I)})))}))).apply(this,arguments)}function v(){return I.apply(this,arguments)}function I(){return(I=(0,o.default)((function*(e,t,n){var r;if(!(0,c.getABPropConfigValue)("include_privacy_token_flag_in_delivery_receipt"))return!1;const i=null===(r=yield(0,_.getChatTable)().get(e.toString()))||void 0===r?void 0:r.tcToken,o=e.isUser()&&t===n&&null==i&&!h.has(e);return o&&h.add(e),null!=i&&h.has(e)&&h.delete(e),o}))).apply(this,arguments)}},48362:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RetryReason=void 0,t.getRetryReasonFromError=function(e){if(e instanceof p.UnknownDeviceMessageError)return v.UnknownCompanionNoPrekey;if(e instanceof _.SignalDecryptionError)switch(e.message){case"errSignalNoSession":case"errLoadSenderKeySession":return v.SignalErrorNoSession;case"errSignalInvalidMsg":return v.SignalErrorInvalidMessage;case"errSignalInvalidKey":return v.SignalErrorInvalidKey;case"errSignalTooManyMessagesInFuture":case"errSignalGrpTooManyMessagesInFuture":return v.SignalErrorFutureMessage;case"errInvalidMacWithDecryptedPlaintext":case"errInvalidMacInvalidCipherKey":case"errInvalidMacInvalidCipherKeyNewChain":return v.SignalErrorBadMac}},t.prepareKeysForRetry=T,t.sendRetryReceipt=function(){return I.apply(this,arguments)};var i=r(n(48926)),o=n(82749),a=n(42811),s=n(47648),l=n(55373),u=n(11439),c=r(n(44423)),d=n(52894),p=n(22495),f=n(19909),_=n(88515),g=n(84015),h=n(4830),A=n(83986),m=n(89924),E=n(3885),y=n(51017),S=r(n(89482));const v=n(76672)({UnknownError:0,SignalErrorNoSession:1,SignalErrorInvalidKey:2,SignalErrorInvalidKeyId:3,SignalErrorInvalidMessage:4,SignalErrorInvalidSignature:5,SignalErrorFutureMessage:6,SignalErrorBadMac:7,SignalErrorInvalidSession:8,SignalErrorInvalidMsgKey:9,BadBroadcastEphemeralSetting:10,UnknownCompanionNoPrekey:11,AdvFailure:12,StatusRevokeDelay:13});function I(){return(I=(0,i.default)((function*(e){let{retryCount:t,to:n,participant:r,recipient:i,externalId:s,rawTs:c,isPeer:p=!1,retryReason:_}=e;try{const e=(0,h.getSignalProtocolStore)(),[g,A]=yield Promise.all([e.getLocalRegistrationId(),e.getIdentityKeyPair()]);if(null==g||null==A)throw(0,S.default)("No registration info found");let m;try{m=yield T(t,(0,d.toCurveKeyPair)(A))}catch(e){__LOG__(4,void 0,new Error,!0)`error: ${e}`,SEND_LOGS("sendRetryReceipt: error while creating key section in retry receipt")}if(!n.isBot()&&Boolean(null==r?void 0:r.isBot()))return;let v,I=a.DROP_ATTR,b=a.DROP_ATTR,M=a.DROP_ATTR;if(n.isUser()){if(v=(0,u.DEVICE_JID)(n),(0,E.getMeUser)().equals((0,y.toUserWid)(n)))if(p)I=(0,a.CUSTOM_STRING)("peer");else{if(!i)return Promise.reject((0,S.default)("sendRetryReceipt: send retry to peer device without recipient"));b=(0,u.USER_JID)(i)}}else v=(0,u.CHAT_JID)(n),M=r?(0,u.DEVICE_JID)(r):a.DROP_ATTR;const P=(0,a.wap)("receipt",{id:(0,a.CUSTOM_STRING)(s),to:v,participant:M,recipient:b,type:"retry",category:I},(0,a.wap)("retry",{v:"1",count:(0,a.INT)(t),id:(0,a.CUSTOM_STRING)(s),t:(0,a.CUSTOM_STRING)(c),error:(0,f.isRetryReceiptErrorCodeEnabled)()&&null!=_?(0,a.INT)(_):a.DROP_ATTR}),(0,a.wap)("registration",null,(0,a.BIG_ENDIAN_CONTENT)(g)),m);return(0,o.deprecatedSendStanzaAndWaitForAck)(P,(0,l.toCoreAckTemplate)({id:s,class:"receipt",from:n,participant:r,type:"retry"}))}catch(e){__LOG__(4,void 0,new Error,!0)`error: ${e}`,SEND_LOGS("sendRetryReceipt: error while creating or sending the retry message")}}))).apply(this,arguments)}function T(){return b.apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t){const[n,r]=yield M(e,t);return r&&(yield A.waSignalStore.markKeyAsUploaded(r.keyId),yield A.waSignalStore.markPreKeyAsDirectDistribution(r.keyId)),n}))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t){if(e<2)return Promise.resolve([null,null]);try{const[e,n,r]=yield Promise.all([A.waSignalStore.getSignedPreKey(),A.waSignalStore.getOrGenSinglePreKey(g.generatePreKeyPair),(0,s.getADVEncodedIdentity)().then((e=>(0,a.wap)("device-identity",null,e)))]);if(!e)throw(0,S.default)("Signed pre key is not available");return[(0,a.wap)("keys",null,(0,a.wap)("type",null,c.default.KEY_BUNDLE_TYPE),(0,a.wap)("identity",null,t.pubKey),(0,m.xmppPreKey)(n),(0,m.xmppSignedPreKey)(e),r),n]}catch(e){throw(0,S.default)("Could not create keys section for retry")}}))).apply(this,arguments)}t.RetryReason=v},90268:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.REPORTING_TOKEN_VERSION=void 0,t.genReportingTokenBody=function(){return m.apply(this,arguments)},t.genReportingTokenKeyFromMessageSecret=function(){return A.apply(this,arguments)},t.getMediaReportingTokenContent=function(e){var t,n;if(null==e.encFilehash&&null==e.caption)return null;const r=new Uint8Array((0,o.decodeB64)(null!==(t=e.encFilehash)&&void 0!==t?t:"")),i=(new TextEncoder).encode(null!==(n=e.caption)&&void 0!==n?n:""),a=new Uint8Array(r.length+i.length);return a.set(r),a.set(i,r.length),self.crypto.getRandomValues(new Uint8Array(a.length))},t.validateReportingTokenInfo=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(89323),s=n(70238),l=n(83599),u=n(44379),c=n(25204),d=n(42811),p=n(44100),f=n(19909),_=n(26368),g=n(14356);const h="Report Token";function A(){return(A=(0,i.default)((function*(e){const t=new a.Binary(e).readByteArray();return yield(0,s.extractAndExpand)(new Uint8Array(t),h,32)}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t){var n;if(!(0,f.isReportingTokenSendingEnabled)()||!(0,p.isMsgTypeReportingTokenCompatible)(e.type,e.subtype))return null;const r=null===(n=t.messageContextInfo)||void 0===n?void 0:n.messageSecret,i=(0,_.getSender)(e);if(null==r)return __LOG__(4,void 0,new Error,!0,["messaging","wa-ice","report-token"])`messageSecret cannot be null for generating reporting token body ${e.type}-${e.subtype}`,SEND_LOGS("report-token-null-message-secret",1,"messaging","wa-ice","report-token"),null;if(null==i)return __LOG__(4,void 0,new Error,!0,["messaging","wa-ice","report-token"])`senderWid cannot be null for generating reporting token body`,SEND_LOGS("report-token-null-sender",1,"messaging","wa-ice","report-token"),null;const o=yield(0,c.createUseCaseSecret)({messageSecret:r,stanzaId:e.id.id,parentMsgOriginalSender:(0,g.widToUserJid)(i),modificationSender:(0,g.widToUserJid)(i),modificationType:c.UseCaseSecretModificationType.REPORT_TOKEN}),a=(0,p.generateReportingTokenContent)(e),s=yield(0,l.hmacSha256)(new Uint8Array(o),null!=a?a:new Uint8Array(0));return(0,d.wap)("reporting",null,(0,d.wap)("reporting_token",null,new Uint8Array(s)))}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t){var n,r;if(!(0,f.isReportingTokenReceivingEnabled)())return!0;if(null==t||0===Object.keys(t).length)return!0;if(null==t.reportingTag)return!0;const i=t.reportingToken;if(null==i)return!0;if(!(0,p.isMsgTypeReportingTokenCompatible)(e.type,e.subtype))return!0;const o=(0,_.getSender)(e);if(null==o)return __LOG__(4,void 0,new Error,!0,["messaging","wa-ice","report-token"])`senderWid cannot be null for validating reporting token info`,SEND_LOGS("report-token-null-sender",1,"messaging","wa-ice","report-token"),!1;const a=yield(0,c.createUseCaseSecret)({messageSecret:null!==(n=e.messageSecret)&&void 0!==n?n:i.subarray(32,64),stanzaId:e.id.id,parentMsgOriginalSender:(0,g.widToUserJid)(o),modificationSender:(0,g.widToUserJid)(o),modificationType:c.UseCaseSecretModificationType.REPORT_TOKEN}),s=(0,p.generateReportingTokenContent)(e),d=new Uint8Array(yield(0,l.hmacSha256)(new Uint8Array(a),null!=s?s:new Uint8Array(0)));return(0,u.uint8ArraysEqual)(d,null!==(r=i.subarray(0,32))&&void 0!==r?r:new Uint8Array(0))}))).apply(this,arguments)}t.REPORTING_TOKEN_VERSION={DEFAULT:0,HISTORY_SYNC:-1}},38564:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.futureproofEditInCAG=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(98051),a=n(68214),s=n(35872);function l(){return(l=(0,i.default)((function*(e){const t=yield(0,s.getGroupMetadataTable)().get(e.toString());if(!t)return!1;return(0,o.getGroupTypeFromGroupMetadata)(t)===o.GroupType.LINKED_ANNOUNCEMENT_GROUP&&!(0,a.receiveCagMsgEditEnabled)()}))).apply(this,arguments)}},7192:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQlPerfTracker=void 0;var r=n(83741),i=n(80722);class o{constructor(e){this._isMex=!1,this._operation="not provided",this._startTime=-1,this._endTime=-1,this._errorCode=-1,this._iqResponseStatus=-1,this._gqlResponseStatus=-1,this._operation=e,this._isMex=o.isGraphQLenabled()}toUseGraphQL(){return this._isMex}start(){this._startTime=Date.now()}stop(){this._endTime=Date.now()}logEvent(e){let{envelopeResponseStatus:t,payloadResponseStatus:n}=e;o.isExperimentEnabled()&&new i.MexEventWamEvent({isMex:this._isMex,mexEventOperation:this._operation,mexEventStartTime:this._startTime,mexEventEndTime:this._endTime,mexEventPayloadResponseStatus:n,mexEventEnvelopeResponseStatus:t,mexEventRequestSize:1}).commit()}static isExperimentEnabled(){return(0,r.getABPropConfigValue)("mex_phase3_enabled")}static isGraphQLenabled(){return o.isExperimentEnabled()&&o.isGraphQLFlagSet()}static isGraphQLFlagSet(){return o.isFlagSet(1)}static isFlagSet(e){return((0,r.getABPropConfigValue)("mex_phase3_status_flags")&e)===e}}t.GraphQlPerfTracker=o},5245:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mexUpdateTextStatus=function(){return l.apply(this,arguments)};var i,o=r(n(48926)),a=n(65810),s=n(40797);function l(){return(l=(0,o.default)((function*(e,t,r){const o=void 0!==i?i:i=n(95131),l=(0,s.createTextStatusObjectForUpdateRequest)({textStatusString:e,textStatusEmoji:t,textStatusEphemeralDuration:r});return yield(0,a.fetchQuery)(o,{input:l})}))).apply(this,arguments)}},95131:e=>{"use strict";var t,n,r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"WAWebMexUpdateTextStatusJobMutation",selections:n=[{alias:null,args:[{kind:"Variable",name:"text_status_input",variableName:"input"}],concreteType:"XWA2TextStatusMutationResponse",kind:"LinkedField",name:"xwa2_update_text_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"result",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"WAWebMexUpdateTextStatusJobMutation",selections:n},params:{id:"6995196977195668",metadata:{},name:"WAWebMexUpdateTextStatusJobMutation",operationKind:"mutation",text:null}};e.exports=r},73358:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mexGetGroupInfo=function(){return f.apply(this,arguments)};var i,o=r(n(48926)),a=n(65810),s=n(55127),l=n(63810),u=n(58479);const c=void 0!==i?i:i=n(47696);function d(){return p.apply(this,arguments)}function p(){return(p=(0,o.default)((function*(e,t){return(0,u.runWithBackoff)((0,o.default)((function*(){return(0,l.runWithErrorHandler)((0,o.default)((function*(){const n=yield(0,a.fetchQuery)(c,{id:e,query_context:t});return __LOG__(2,void 0,void 0,void 0,["GQL","MEX"])`[MEX][GROUP] fetched get group info for ${e}`,n})),l.MexSupportedFeature.Group)})))}))).apply(this,arguments)}function f(){return(f=(0,o.default)((function*(e,t){const n=(0,s.toMexQueryContext)(t),r=yield d(e,n);if(null==r)return;return(0,s.parseMexGroupResponse)(r)}))).apply(this,arguments)}},63570:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mexFetchSubgroupSuggestions=function(){return d.apply(this,arguments)};var i,o=r(n(48926)),a=n(91563),s=n(65810),l=n(63810),u=r(n(27112));const c=void 0!==i?i:i=n(89801);function d(){return(d=(0,o.default)((function*(e,t,n){const r={group_id:e,query_context:n,sub_group_hint_id:t};return(0,l.runWithErrorHandler)((0,o.default)((function*(){var t,n;const i=yield(0,s.fetchQuery)(c,r),o=new u.default(e,{intentionallyUsePrivateConstructor:!0}),l=null===(t=i.xwa2_group_query_by_id)||void 0===t||null===(n=t.sub_group_suggestions)||void 0===n?void 0:n.edges;if(null==l)throw new a.ServerStatusCodeError(500,"missing edges in response");return l.map((e=>{const t=e.node;if(null!=t)return p(o,t);throw new a.ServerStatusCodeError(500,"null node in sub_group_suggestions")}))})),l.MexSupportedFeature.Community)}))).apply(this,arguments)}function p(e,t){var n,r,i;let o,s,l;if(null==t.is_existing_group)throw new a.ServerStatusCodeError(500,"missing is_existing_group in response");if(l=t.is_existing_group,null==t.id)throw new a.ServerStatusCodeError(500,"missing id in response");if(o=new u.default(t.id,{intentionallyUsePrivateConstructor:!0}),null==t.creator.id)throw new a.ServerStatusCodeError(500,"missing creator.id in response");return s=new u.default(t.creator.id,{intentionallyUsePrivateConstructor:!0}),{id:o,parentGroupId:e,subject:null!==(n=null===(r=t.subject)||void 0===r?void 0:r.value)&&void 0!==n?n:"",desc:null===(i=t.description)||void 0===i?void 0:i.value,owner:s,t:parseInt(t.creation_time,10),isExistingGroup:l,participantCount:t.total_participants_count}}},47696:e=>{"use strict";var t,n,r,i,o,a,s,l,u,c,d,p,f,_,g,h,A,m,E,y,S={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"query_context"}],kind:"Fragment",metadata:null,name:"WAWebMexFetchGroupInfoJobQuery",selections:[{alias:null,args:n=[{fields:[{kind:"Variable",name:"group_id",variableName:"id"},{kind:"Variable",name:"query_context",variableName:"query_context"}],kind:"ObjectValue",name:"group_input"}],concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[i={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"allow_admin_reports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"auto_add_disabled",storageKey:null}],storageKey:null}],type:"XWA2CommunitySubGroup",abstractKey:null},o={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunityProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"allow_non_admin_sub_group_creation",storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null},{kind:"InlineFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},l={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"notify_name",storageKey:null}],storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},d={alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[a],storageKey:null},s,c={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},p={alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[a,s,{alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"pn",storageKey:null}],storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"picture",plural:!1,selections:[a,f={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"direct_path",storageKey:null}],storageKey:null},h={alias:null,args:null,concreteType:"XWA2GroupParticipantsConnection",kind:"LinkedField",name:"participants",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2GroupParticipantEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"lid",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null}],storageKey:null}],storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"total_participants_count",storageKey:null},E={alias:null,args:null,concreteType:"XWA2GroupRegularGroupProperties",kind:"LinkedField",name:"properties",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ack",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"announcement",storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupEphemeralSetting",kind:"LinkedField",name:"ephemeral",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_sec",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupGrowthLocked",kind:"LinkedField",name:"growth_locked2",plural:!1,selections:[m={alias:null,args:null,kind:"ScalarField",name:"locked",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupLIDMigrationState",kind:"LinkedField",name:"lid_migration_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"addressing_mode",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internal",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"member_add_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"membership_approval_mode_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"support",storageKey:null}],storageKey:null}],type:"XWA2GroupRegularGroup",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"WAWebMexFetchGroupInfoJobQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[y={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,i,o,{kind:"InlineFragment",selections:[s,l,u,d,p,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"picture",plural:!1,selections:[y,a,f,_,g],storageKey:null},h,A,E],type:"XWA2GroupRegularGroup",abstractKey:null}],storageKey:null}]},params:{id:"7678599278839455",metadata:{},name:"WAWebMexFetchGroupInfoJobQuery",operationKind:"query",text:null}};e.exports=S},89801:e=>{"use strict";var t,n,r,i,o,a,s,l,u,c,d,p,f={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"group_id"},n={defaultValue:null,kind:"LocalArgument",name:"query_context"},r={defaultValue:null,kind:"LocalArgument",name:"sub_group_hint_id"}],kind:"Fragment",metadata:null,name:"WAWebMexFetchSubgroupSuggestionsJobQuery",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"group_id",variableName:"group_id"},{kind:"Variable",name:"query_context",variableName:"query_context"},{kind:"Variable",name:"sub_group_hint",variableName:"sub_group_hint_id"}],kind:"ObjectValue",name:"group_input"}],concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionConnection",kind:"LinkedField",name:"sub_group_suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestion",kind:"LinkedField",name:"node",plural:!1,selections:[o,l={alias:null,args:null,concreteType:"XWA2GroupSubject",kind:"LinkedField",name:"subject",plural:!1,selections:s=[a={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:s,storageKey:null},u={alias:null,args:null,concreteType:"XWA2User",kind:"LinkedField",name:"creator",plural:!1,selections:[o],storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"total_participants_count",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"is_existing_group",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,r,n],kind:"Operation",name:"WAWebMexFetchSubgroupSuggestionsJobQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"xwa2_group_query_by_id",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionConnection",kind:"LinkedField",name:"sub_group_suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XWA2CommunitySubGroupSuggestion",kind:"LinkedField",name:"node",plural:!1,selections:[o,l,{alias:null,args:null,concreteType:"XWA2GroupDescription",kind:"LinkedField",name:"description",plural:!1,selections:[a,o],storageKey:null},u,c,d,p],storageKey:null}],storageKey:null}],storageKey:null}],type:"XWA2CommunityGroup",abstractKey:null}],storageKey:null}]},params:{id:"7476606999039338",metadata:{},name:"WAWebMexFetchSubgroupSuggestionsJobQuery",operationKind:"query",text:null}};e.exports=f},55127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMexGroupResponse=function(e){var t,n,r,i,u,c,d,p,f,_,g,h,A;const m=e.xwa2_group_query_by_id,E=null==m?void 0:m.id,y=null==m?void 0:m.creation_time,S=null==m?void 0:m.creator,v=null==m?void 0:m.description,I=null==m||null===(t=m.participants)||void 0===t?void 0:t.edges,T=null==m||null===(n=m.properties)||void 0===n?void 0:n.allow_admin_reports,b=null==m||null===(r=m.properties)||void 0===r?void 0:r.allow_non_admin_sub_group_creation,M=null==m||null===(i=m.properties)||void 0===i?void 0:i.auto_add_disabled,P=null==m||null===(u=m.properties)||void 0===u?void 0:u.announcement,C=null==m||null===(c=m.properties)||void 0===c||null===(d=c.ephemeral)||void 0===d?void 0:d.expiration_time_in_sec,O=null==m||null===(p=m.properties)||void 0===p||null===(f=p.lid_migration_state)||void 0===f?void 0:f.addressing_mode,R=null==m||null===(_=m.properties)||void 0===_?void 0:_.locked,N=null==m||null===(g=m.properties)||void 0===g?void 0:g.member_add_mode,w=null==m||null===(h=m.properties)||void 0===h?void 0:h.membership_approval_mode_enabled,D=null==m||null===(A=m.properties)||void 0===A?void 0:A.support,L=null==m?void 0:m.state,B=null==m?void 0:m.subject,k=null==m?void 0:m.total_participants_count;if(null!=E&&null!=y&&null!=v&&null!=(null==B?void 0:B.value)){var G,U,x,F,K;return{id:(0,o.createWid)(E),owner:null!=(null==S?void 0:S.id)?(0,o.createWid)(null==S?void 0:S.id):void 0,subject:B.value,creation:Number(y),participants:l(I),subjectTime:Number(null==B?void 0:B.creation_time),subjectOwner:null!=(null==B||null===(G=B.creator)||void 0===G?void 0:G.id)?(0,o.createWid)(null==B||null===(U=B.creator)||void 0===U?void 0:U.id):void 0,allowNonAdminSubGroupCreation:b,generalChatAutoAddDisabled:null!=M&&M,restrict:!0===R,announce:null!=P&&P,support:null!=D?D:void 0,desc:null==v?void 0:v.value,descId:null!==(x=null==v?void 0:v.id)&&void 0!==x?x:void 0,descOwner:null!=(null==v||null===(F=v.creator)||void 0===F?void 0:F.id)?(0,o.createWid)(null==v||null===(K=v.creator)||void 0===K?void 0:K.id):void 0,descTime:null!=(null==v?void 0:v.creation_time)?Number(null==v?void 0:v.creation_time):void 0,size:k,noFrequentlyForwarded:!1,a_v_id:void 0,incognito:void 0,ephemeralDuration:C,membershipApprovalMode:null!=w&&w,memberAddMode:a(N),suspended:s("suspended",L),terminated:s("terminated",L),isLidAddressingMode:"lid"===O,reportToAdminMode:null!=T?T:void 0}}},t.toMexQueryContext=function(e){switch(e){case"interactive":return"INTERACTIVE";case"phash":return"PHASH";case"prefetch":return"PRE_FETCH";default:return"UNKNOWN"}};var r=n(91563),i=n(35872),o=n(51017);function a(e){if(null!=e){if("admin_add"===e.toLowerCase())return i.MemberAddMode.ADMIN_ADD;if("all_members_add"===e.toLowerCase())return i.MemberAddMode.ALL_MEMBER_ADD}}function s(e,t){switch(e){case"terminated":return"NON_EXISTENT"===t;case"suspended":return"SUSPENDED"===t;default:return!1}}function l(e){if(null==e)throw new r.ServerStatusCodeError(500,"missing participants in group info participant response");return e.map((e=>{let t,n,{node:i,role:a}=e;if(null==i.id)throw new r.ServerStatusCodeError(500,"missing id in group info participant response");var s;(t=(0,o.createWid)(i.id),null!=i.lid)&&(n=null!==(s=(0,o.createWid)(null==i?void 0:i.lid))&&void 0!==s?s:void 0);return{id:t,lid:n,isAdmin:"ADMIN"===a,isSuperAdmin:"SUPERADMIN_MEMBER"===a}}))}},21380:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMexGroupSwitch=function(){null==o&&(o=new i);return o};var r=n(90660);class i extends r.MexSwitch{constructor(){super("mex_group_migration_enabled","mex_group_flags"),this._subgroupSuggestionsTarget=(0,r.createValueForBitPosition)(1)}isMexEnabledForSubgroupSuggestions(){return this.isMexEnabled(this._subgroupSuggestionsTarget)}}let o},82512:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mexSetUsernameQueryJob=function(){return l.apply(this,arguments)};var i,o=r(n(48926)),a=n(65810),s=n(69641);function l(){return(l=(0,o.default)((function*(e){const t=void 0!==i?i:i=n(29846);try{var r;return{isUsernameApproved:"SUCCESS"===(null===(r=(yield(0,a.fetchQuery)(t,null!=e?{input:e}:{})).xwa2_username_set)||void 0===r?void 0:r.result)}}catch(e){if(__LOG__(4,void 0,new Error,void 0,["GQL","MEX"])`[MEX][USERNAME] Failed to set username via mex`,e instanceof s.MexIqError)return{isUsernameApproved:!1,error:{code:e.code,text:"MexIqError:"+e.message}};if(e instanceof s.MexFatalExtensionError)return{isUsernameApproved:!1,error:{code:e.error.extensions.error_code,text:"MexFatalExtensionError:"+e.error.message}};throw e}}))).apply(this,arguments)}},29846:e=>{"use strict";var t,n,r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"WAWebMexSetUsernameJobMutation",selections:n=[{alias:null,args:[{kind:"Variable",name:"username",variableName:"input"}],concreteType:"XWA2UsernameSetMutationResponse",kind:"LinkedField",name:"xwa2_username_set",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"result",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"WAWebMexSetUsernameJobMutation",selections:n},params:{id:"7107616276002412",metadata:{},name:"WAWebMexSetUsernameJobMutation",operationKind:"mutation",text:null}};e.exports=r},90660:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MexSwitch=void 0,t.createValueForBitPosition=function(e){return 2**(e-1)};var r=n(83741);t.MexSwitch=class{constructor(e,t){this._killSwitch=e,this._flag=t}isMexEnabled(e){return this._isExperimentEnabled()&&this._isFlagSet(e)}_isExperimentEnabled(){return!0===(0,r.getABPropConfigValue)(this._killSwitch)}_isFlagSet(e){const t=(0,r.getABPropConfigValue)(this._flag);return!!Number.isInteger(t)&&(t&e)===e}}},63810:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MexSupportedFeature=void 0,t.runWithErrorHandler=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(91563),a=n(69641);const s=n(76672)({Newsletter:"NEWSLETTER",Group:"GROUP",Community:"COMMUNITY"});function l(e,t){if(__LOG__(4,void 0,new Error,void 0,["GQL","MEX"])`[MEX][${t}] fetch query error`,e instanceof a.MexFatalExtensionError){const t=e.error.extensions.error_code;throw new o.ServerStatusCodeError(Number(t),"MexFatalExtensionError:"+e.error.message)}if(e instanceof a.MexIqError)throw new o.ServerStatusCodeError(e.code,"MexIqError");throw e}function u(){return(u=(0,i.default)((function*(e,t){try{return yield e()}catch(e){throw l(e,t),e}}))).apply(this,arguments)}t.MexSupportedFeature=s},80780:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReplaceDisplayNamesAndLidPnMappings=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(72827),a=n(51017);function s(){return(s=(0,i.default)((function*(e,t){const n=[],r=[];for(const t of e){if(null==t)continue;const{id:e,displayName:i}=t;let{lid:o,phoneNumber:s}=t;e.isLid()?o=e:s=e,null!=o&&(o=(0,a.toUserWid)(o),null!=i&&n.push({lid:o,data:{displayNameLID:i}}),null!=s&&r.push({lid:o,pn:(0,a.toUserWid)(s)}))}yield Promise.all([n.length>0?(0,o.updateLidMetadata)({updates:n}):null,r.length>0?(0,o.createLidPnMappings)({mappings:r,flushImmediately:t}):null].filter(Boolean))}))).apply(this,arguments)}},42778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLidPnMappingsJob=function(e,t){return(0,r.createNonPersistedJob)("createLidPnMappings",(e=>(0,i.createLidPnMappings)(e))).waitUntilCompleted({mappings:e,flushImmediately:t})},t.updateLidMetadataJob=function(e){return(0,r.createNonPersistedJob)("updateLidMetadata",(e=>(0,i.updateLidMetadata)(e))).waitUntilCompleted({updates:e})};var r=n(51280),i=n(72827)},86031:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendTcTokenWhenDeviceIdentityChange=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(83741),s=n(93040),l=n(1619),u=n(95160),c=n(23609),d=n(28612);function p(){return(p=(0,i.default)((function*(e){let t;if(t=(0,u.isWorker)()||(0,a.getABPropConfigValue)("web_tc_token_db_read_enabled")?yield(0,s.getChatRecord)(e):yield(0,l.frontendSendAndReceive)("getChat",{chatId:e}),null==t)return;const n=t.tcTokenSenderTimestamp;if(null!=n&&!(0,d.isTokenExpired)(n,d.TcTokenMode.Sender))try{yield(0,c.setPrivacyTokens)(e,[c.TokenType.TrustedContact],(0,o.castToUnixTime)(n))}catch(e){__LOG__(3,!0,void 0,!0)`sendTcTokenWhenDeviceIdentityChange failed - ${e}`,SEND_LOGS("send-tc-token-device-identity-change-failed")}}))).apply(this,arguments)}},23609:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,t.setPrivacyTokens=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(82749),a=r(n(82601)),s=n(42811),l=n(91563),u=n(11439);const c=new a.default("setPrivacyTokensParser",(e=>({stanzaId:e.attrString("id")}))),d=n(76672)({TrustedContact:"trusted_contact"});function p(){return(p=(0,i.default)((function*(e,t,n){const r=t.map((t=>(0,s.wap)("token",{jid:(0,u.USER_JID)(e),t:(0,s.CUSTOM_STRING)(String(n)),type:(0,s.CUSTOM_STRING)(t)}))),i=yield(0,o.deprecatedSendIq)((0,s.wap)("iq",{to:s.S_WHATSAPP_NET,type:"set",xmlns:"privacy",id:(0,s.generateId)()},(0,s.wap)("tokens",null,r)),c);if(!i.success)throw new l.ServerStatusCodeError(i.errorCode,i.errorText)}))).apply(this,arguments)}t.TokenType=d},41183:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBotWaitlistState=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(82749),a=n(29987),s=n(42811),l=r(n(82601)),u=n(63007),c=n(46316),d=n(74700),p=n(25993),f=n(95160),_=n(63342);let g=!0,h=null;const A=1e3*a.HOUR_SECONDS,m=new l.default("botWaitlistStateQueryParser",(e=>{let t=!1;const n=e.maybeChild("user");if(n){"AI available"===n.maybeAttrString("state")&&(t=!0)}return{isBotAvailable:t}}));function E(){return(E=(0,i.default)((function*(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===g&&!n)return void __LOG__(2)`Ad hoc Bot Available skipped, interval less than threshold`;if(g=!1,h=self.setTimeout((()=>{g=!0}),A),(0,_.getBotWaitlistState)()===p.HistorySync$BotAIWaitListState.AI_AVAILABLE)return __LOG__(2)`Ad hoc Bot Available skipped, state is already available`,void self.clearTimeout(h);yield(0,d.waitForOfflineDeliveryEnd)();const r=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,xmlns:"bot",type:"get",id:(0,s.generateId)()},(0,s.wap)("user_state",null)),i=yield(0,o.deprecatedSendIq)(r,m);i.success?(__LOG__(2)`Ad hoc Bot Available state query returned result : ${null===(e=i.result)||void 0===e?void 0:e.isBotAvailable}`,!0===(null===(t=i.result)||void 0===t?void 0:t.isBotAvailable)&&(yield(0,_.setBotWaitlistState)(p.HistorySync$BotAIWaitListState.AI_AVAILABLE),!(0,f.isWorker)()&&(0,u.isBotEnabled)()&&c.Cmd.botWaitlistStateUpdated())):__LOG__(4,void 0,new Error)`Could not send IQ in queryBotWaitlistState`}))).apply(this,arguments)}},7870:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryExist=h,t.queryPhoneExists=function(e){return h({type:"phone",phone:e})},t.queryUsernameExists=function(){return E.apply(this,arguments)},t.queryWidExists=function(e){const t=e.isLid()?"":`+${e.toString()}`;if(e.isLid())return h({type:"lid",wid:e});return h({type:"phone",phone:t})},t.queryWidUsernameExists=function(){return m.apply(this,arguments)};var i=r(n(48926)),o=n(38672),a=n(42247),s=n(91563),l=n(54111),u=n(42778),c=n(27799),d=n(30633),p=n(49673),f=r(n(27112)),_=n(51017),g=r(n(89482));function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){if("lid"===e.type&&!e.wid.isLid())throw(0,g.default)("queryExist is provided with invalid lid");const t=new p.USyncUser,n=new d.USyncQuery;if("phone"===e.type?(n.withContactProtocol(),t.withPhone(e.phone)):t.withId(e.wid),n.withLidProtocol(),"phone"===e.type){const n=`${(0,o.extractDigits)(e.phone)}@c.us`;if(f.default.isWid(n)){const e=(0,a.getCurrentLid)((0,_.createUserWid)(n));e&&t.withLid(e)}}n.withUser(t),n.withBusinessProtocol(),n.withDisappearingModeProtocol(),(0,c.usernameUsyncEnabled)()&&n.withUsernameProtocol();const r=yield n.execute(),i=r.error.all||r.error.contact;if(i)throw new s.ServerStatusCodeError(i.errorCode,i.errorText);const{list:h}=r;if(1!==h.length)return null;const{id:A,contact:m,business:E,disappearing_mode:y,lid:S,username:v}=h[0];if("phone"===e.type&&"in"!==(null==m?void 0:m.type))return null;const I={wid:A,biz:null!=E,bizInfo:E};return y&&(I.disappearingMode={duration:y.duration,settingTimestamp:y.t}),null!=S&&(yield(0,u.createLidPnMappingsJob)([{pn:A,lid:(0,_.createUserWid)(S,"lid")}],!0)),(0,c.usernameUsyncEnabled)()&&null!=v?yield(0,l.setUsernamesJob)([{userId:A,username:v}]):yield(0,l.setUsernamesJob)([{userId:A,username:void 0}]),I}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){if(!e.isLid())return;__LOG__(2)`[usync] querying contact: ${e} for username info`;const t=new p.USyncUser,n=new d.USyncQuery;t.withId(e),n.withUser(t),n.withUsernameProtocol();const r=yield n.execute(),i=r.error.all||r.error.contact;if(__LOG__(2)`[usync] username info response`,i)throw new s.ServerStatusCodeError(i.errorCode,i.errorText);const{list:o}=r;if(1!==o.length)return null;const a=o[0],{id:u,username:c}=a;return null!=c?yield(0,l.setUsernamesJob)([{userId:u,username:c}]):a.hasOwnProperty("username")||(yield(0,l.setUsernamesJob)([{userId:u,username:void 0}])),{wid:u,username:c,biz:!1}}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){__LOG__(2)`[usync] querying username: ${e} for contact info`;const t=new p.USyncUser,n=new d.USyncQuery;n.withUser(t),n.withContactProtocol(),t.withUsername(e);const r=yield n.execute(),i=r.error.all||r.error.contact;if(__LOG__(2)`[usync] username info response`,i)throw new s.ServerStatusCodeError(i.errorCode,i.errorText);const{list:o}=r;if(1!==o.length)return null;const a=o[0],{id:u,contact:c}=a,{username:f,type:_}=c;return"out"===_?null:(null!=f?yield(0,l.setUsernamesJob)([{userId:u,username:f}]):yield(0,l.setUsernamesJob)([{userId:u,username:void 0}]),{wid:u,username:f,biz:!1})}))).apply(this,arguments)}},28346:(e,t,n)=>{"use strict";var r=n(95318);t.e=void 0;var i=r(n(48926)),o=n(85074),a=n(85300);const s=(0,o.defineWebPersistedJob)().finalStep("sendMex",function(){var e=(0,i.default)((function*(e){let{id:t,text:n,emoji:r,ephemeralDurationSeconds:i}=e;return yield(0,a.updateTextStatus)(t,n,r,i)}));return function(){return e.apply(this,arguments)}}()).end();t.e=s},85300:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateTextStatus=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(7192),a=n(5245);function s(){return(s=(0,i.default)((function*(e,t,n,r){var i;const s=new o.GraphQlPerfTracker("update-text-status");s.start(),s.toUseGraphQL();const l=null===(i=(yield(0,a.mexUpdateTextStatus)(t,n,r)).xwa2_update_text_status)||void 0===i?void 0:i.result;return s.stop(),__LOG__(2)`updateTextStatus:${e.toString()}`,{id:e,result:l}}))).apply(this,arguments)}},54111:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setUsernameQueryJob=function(e){return(0,c.createNonPersistedJob)("setUsernameQueryJob",(0,i.default)((function*(){const t=yield(0,u.mexSetUsernameQueryJob)(e),{isUsernameApproved:n,error:r}=t;if(n){const t=(0,d.assertGetMeUser)();return yield p([{userId:t,username:null!=e?e:void 0}]),!0}if(null!=r)throw new l.ServerStatusCodeError(r.code,r.text);return!1})),{priority:o.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()},t.setUsernamesJob=p;var i=r(n(48926)),o=n(75419),a=n(42247),s=n(1619),l=n(91563),u=n(82512),c=n(51280),d=n(3885);function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){const t=e.map((e=>{let{userId:t,username:n}=e;const r=t.toJid();return __LOG__(2)`[username] ${t.toLogString()}: updating ${null==n||""===n?"empty":"non-empty"} username in db + collection`,{id:r,username:n}}));yield(0,a.bulkUpdateUsernamesInDb)(t),yield(0,s.frontendSendAndReceive)("bulkUpdateUsernames",{usernameUpdates:t})}))).apply(this,arguments)}},60223:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncDeviceListJob=function(e,t,n){return(0,o.createNonPersistedJob)("syncDeviceList",(e=>(0,i.syncDeviceList)(e))).waitUntilCompleted({wids:e,context:t,phash:n})},t.syncMyDeviceListJob=function(){return(0,o.createNonPersistedJob)("syncMyDeviceList",(()=>(0,i.syncMyDeviceList)()),{priority:r.JOB_PRIORITY.SKIP}).waitUntilCompleted()};var r=n(75419),i=n(87167),o=n(51280)},68960:(e,t,n)=>{"use strict";var r=n(95318);t.c=void 0;var i=r(n(48926)),o=n(85074),a=n(51017),s=n(49625);const l=(0,o.defineWebPersistedJob)().finalStep("sendRequestedKeyShare",function(){var e=(0,i.default)((function*(e){let{keys:t,orphanKeys:n,peerDeviceId:r}=e;const i={type:"missing_key",keys:t,orphanKeys:n,peerDeviceId:(0,a.createWid)(r)};yield(0,s.workerSafeSendAndReceive)("sendAppStateSyncKeyShare",{keyShare:i})}));return function(){return e.apply(this,arguments)}}()).end();t.c=l},96193:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LidOriginType=t.EncMediaType=t.DecryptFailType=t.CiphertextType=void 0;const r=n(76672)({Skmsg:"skmsg",Pkmsg:"pkmsg",Msg:"msg",Msmsg:"msmsg"});t.CiphertextType=r;const i=n(76672)({CTWA:"ctwa",USERNAME:"username"});t.LidOriginType=i;const o=n(76672)({Image:"image",Video:"video",Ptv:"ptv",Audio:"audio",Ptt:"ptt",Location:"location",VCard:"vcard",Document:"document",Url:"url",Call:"call",Gif:"gif",Future:"future",ContactArray:"contact_array",LiveLocation:"livelocation",ProfilePic:"profile_pic",Sticker:"sticker",Hsm:"hsm",ProductImage:"product_image",Template:"template",MdAppState:"md_app_state",MdHistorySync:"md_history_sync",List:"list",ListResponse:"list_response",Button:"button",ButtonResponse:"button_response",Order:"order",Product:"product",NativeFlowResponse:"native_flow_response"});t.EncMediaType=o;const a=n(76672)({Hide:"hide",Show:"show"});t.DecryptFailType=a},50055:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CIPHERTEXT_VERSION=void 0,t.encodeMaybeDecryptFail=function(e){switch(e){case s.DecryptFailType.Show:return o.DROP_ATTR;case s.DecryptFailType.Hide:return(0,o.CUSTOM_STRING)("hide")}},t.encodeMaybeNativeFlowName=t.encodeMaybeMediaType=void 0,t.getMetricE2eCiphertextType=function(e){switch(e){case s.CiphertextType.Skmsg:return p.E2E_CIPHERTEXT_TYPE.SENDER_KEY_MESSAGE;case s.CiphertextType.Pkmsg:return p.E2E_CIPHERTEXT_TYPE.PREKEY_MESSAGE;case s.CiphertextType.Msg:return p.E2E_CIPHERTEXT_TYPE.MESSAGE;case s.CiphertextType.Msmsg:return p.E2E_CIPHERTEXT_TYPE.MESSAGE_SECRET_MESSAGE}},t.getMetricE2eDestination=function(e){if(e.isUser())return f.E2E_DESTINATION.INDIVIDUAL;if(e.isGroup())return f.E2E_DESTINATION.GROUP;if(e.isStatusV3())return f.E2E_DESTINATION.STATUS;if(e.isBroadcast())return f.E2E_DESTINATION.LIST;if(e.isNewsletter())return f.E2E_DESTINATION.CHANNEL},t.getMetricEditType=function(e){switch(e){case a.EDIT_ATTR.SENDER_REVOKE:return _.EDIT_TYPE.SENDER_REVOKE;case a.EDIT_ATTR.ADMIN_REVOKE:return _.EDIT_TYPE.ADMIN_REVOKE;case a.EDIT_ATTR.MESSAGE_EDIT:return _.EDIT_TYPE.EDITED;default:return _.EDIT_TYPE.NOT_EDITED}},t.getMetricEditTypeFromMsg=function(e,t){if((0,c.isRevokeMsg)(e))return"admin_revoke"===t.subtype?_.EDIT_TYPE.ADMIN_REVOKE:_.EDIT_TYPE.SENDER_REVOKE;return(0,c.isEditMsg)(e)?_.EDIT_TYPE.EDITED:_.EDIT_TYPE.NOT_EDITED},t.getMetricMediaType=function(e){let{encMediaType:t,msgType:n,msgPollType:r}=e;if(n===l.STANZA_MSG_TYPES.reaction)return g.MEDIA_TYPE.REACTION;if(r===l.POLL_TYPES.creation)return g.MEDIA_TYPE.POLL_CREATE;if(r===l.POLL_TYPES.vote)return g.MEDIA_TYPE.POLL_VOTE;if(t)switch(t){case s.EncMediaType.Image:return g.MEDIA_TYPE.PHOTO;case s.EncMediaType.Video:return g.MEDIA_TYPE.VIDEO;case s.EncMediaType.Ptv:return g.MEDIA_TYPE.PUSH_TO_VIDEO;case s.EncMediaType.Audio:return g.MEDIA_TYPE.AUDIO;case s.EncMediaType.Ptt:return g.MEDIA_TYPE.PTT;case s.EncMediaType.Location:return g.MEDIA_TYPE.LOCATION;case s.EncMediaType.VCard:return g.MEDIA_TYPE.CONTACT;case s.EncMediaType.Document:return g.MEDIA_TYPE.DOCUMENT;case s.EncMediaType.Url:return g.MEDIA_TYPE.URL;case s.EncMediaType.Call:return g.MEDIA_TYPE.CALL;case s.EncMediaType.Gif:return g.MEDIA_TYPE.GIF;case s.EncMediaType.Future:return g.MEDIA_TYPE.FUTURE;case s.EncMediaType.ContactArray:return g.MEDIA_TYPE.CONTACT_ARRAY;case s.EncMediaType.LiveLocation:return g.MEDIA_TYPE.LIVE_LOCATION;case s.EncMediaType.ProfilePic:return g.MEDIA_TYPE.PROFILE_PIC;case s.EncMediaType.Sticker:return g.MEDIA_TYPE.STICKER;case s.EncMediaType.Hsm:return g.MEDIA_TYPE.HSM;case s.EncMediaType.ProductImage:return g.MEDIA_TYPE.PRODUCT_IMAGE;case s.EncMediaType.Template:return g.MEDIA_TYPE.TEMPLATE;case s.EncMediaType.MdAppState:return g.MEDIA_TYPE.MD_APP_STATE;case s.EncMediaType.MdHistorySync:return g.MEDIA_TYPE.MD_HISTORY_SYNC;case s.EncMediaType.List:return g.MEDIA_TYPE.LIST;case s.EncMediaType.ListResponse:return g.MEDIA_TYPE.LIST_REPLY;case s.EncMediaType.Button:return g.MEDIA_TYPE.BUTTON_MESSAGE;case s.EncMediaType.ButtonResponse:return g.MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;case s.EncMediaType.Order:return g.MEDIA_TYPE.ORDER;case s.EncMediaType.Product:return g.MEDIA_TYPE.PRODUCT_IMAGE;case s.EncMediaType.NativeFlowResponse:return g.MEDIA_TYPE.INTERACTIVE_RESPONSE_NFM}return g.MEDIA_TYPE.NONE},t.getNonCriticalNotificationPriority=function(e){if(e)return i.JOB_PRIORITY.OFFLINE;return i.JOB_PRIORITY.LOW},t.getPlaceholderAddReason=function(e){if(e instanceof u.UnknownDeviceMessageError)return h.PLACEHOLDER_REASON_TYPE.UNKNOWN_COMPANION_NO_PREKEY;if(e instanceof d.SignalDecryptionError){const t=.001;switch(e.message){case"errSignalNoSession":case"errLoadSenderKeySession":return h.PLACEHOLDER_REASON_TYPE.SIGNAL_NO_SESSION;case"errSignalInvalidMsg":return h.PLACEHOLDER_REASON_TYPE.SIGNAL_INVALID_MESSAGE;case"errSignalInvalidKey":return h.PLACEHOLDER_REASON_TYPE.SIGNAL_INVALID_KEY;case"errSignalTooManyMessagesInFuture":case"errSignalGrpTooManyMessagesInFuture":return h.PLACEHOLDER_REASON_TYPE.SIGNAL_FUTURE_MESSAGE;case"errInvalidMacWithDecryptedPlaintext":case"errInvalidMacInvalidCipherKey":case"errInvalidMacInvalidCipherKeyNewChain":{const n=`MsgPlaceholderBadMac-${e.message}`;return __LOG__(4,void 0,new Error,!0)`getPlaceholderAddReason SignalBadMac reason`,SEND_LOGS(n,t),h.PLACEHOLDER_REASON_TYPE.SIGNAL_BAD_MAC}}const n=`MsgPlaceholderOther-${e.message}`;return __LOG__(4,void 0,new Error,!0)`getPlaceholderAddReason Other reason`,SEND_LOGS(n,t),h.PLACEHOLDER_REASON_TYPE.OTHER}},t.mediaTypeFromProtobuf=function e(t){var n;if(t.deviceSentMessage){const{message:n}=t.deviceSentMessage;return n?e(n):null}if(t.ephemeralMessage){const{message:n}=t.ephemeralMessage;return n?e(n):null}if(t.groupMentionedMessage){const{message:n}=t.groupMentionedMessage;return n?e(n):null}if(t.viewOnceMessageV2Extension){const{message:n}=t.viewOnceMessageV2Extension;return n?e(n):null}if(t.viewOnceMessage){const{message:n}=t.viewOnceMessage;return n?e(n):null}if(t.documentWithCaptionMessage){const{message:n}=t.documentWithCaptionMessage;return n?e(n):null}if(t.botInvokeMessage){const{message:n}=t.botInvokeMessage;return n?e(n):null}if(t.imageMessage)return s.EncMediaType.Image;if(t.stickerMessage)return s.EncMediaType.Sticker;if(t.lottieStickerMessage)return s.EncMediaType.Sticker;if(t.locationMessage)return!0===t.locationMessage.isLive?s.EncMediaType.LiveLocation:s.EncMediaType.Location;if(t.contactMessage)return s.EncMediaType.VCard;if(t.contactsArrayMessage)return s.EncMediaType.ContactArray;if(t.documentMessage)return s.EncMediaType.Document;if(t.audioMessage)return t.audioMessage.ptt?s.EncMediaType.Ptt:s.EncMediaType.Audio;if(t.videoMessage)return t.videoMessage.gifPlayback?s.EncMediaType.Gif:s.EncMediaType.Video;if(t.ptvMessage)return s.EncMediaType.Ptv;if(t.buttonsMessage)return s.EncMediaType.Button;if(t.buttonsResponseMessage)return s.EncMediaType.ButtonResponse;if(t.listMessage)return s.EncMediaType.List;if(t.listResponseMessage)return s.EncMediaType.ListResponse;if(t.orderMessage)return s.EncMediaType.Order;if(t.productMessage)return s.EncMediaType.Product;if(t.groupInviteMessage)return s.EncMediaType.Url;if(t.interactiveResponseMessage)return s.EncMediaType.NativeFlowResponse;if(null!=(null===(n=t.extendedTextMessage)||void 0===n?void 0:n.canonicalUrl)&&""!==t.extendedTextMessage.canonicalUrl.trim())return s.EncMediaType.Url;return null},t.nativeFlowNameTypeFromProtobuf=function(e){var t;return e.interactiveResponseMessage?null===(t=e.interactiveResponseMessage.nativeFlowResponseMessage)||void 0===t?void 0:t.name:null};var i=n(75419),o=n(42811),a=n(77630),s=n(96193),l=n(33351),u=n(22495),c=n(92760),d=n(88515),p=n(85334),f=n(7356),_=n(37060),g=n(76757),h=n(4925),A=r(n(89482));function m(e){return t=>null==t?o.DROP_ATTR:e(t)}t.CIPHERTEXT_VERSION=2;const E=m((function(e){const t=(()=>{switch(e){case s.EncMediaType.Image:return"image";case s.EncMediaType.Video:return"video";case s.EncMediaType.Ptv:return"ptv";case s.EncMediaType.Audio:return"audio";case s.EncMediaType.Ptt:return"ptt";case s.EncMediaType.VCard:return"vcard";case s.EncMediaType.Document:return"document";case s.EncMediaType.Gif:return"gif";case s.EncMediaType.ContactArray:return"contact_array";case s.EncMediaType.Location:return"location";case s.EncMediaType.LiveLocation:return"livelocation";case s.EncMediaType.Sticker:return"sticker";case s.EncMediaType.List:return"list";case s.EncMediaType.ListResponse:return"list_response";case s.EncMediaType.ButtonResponse:return"buttons_response";case s.EncMediaType.Order:return"order";case s.EncMediaType.Product:return"product";case s.EncMediaType.Url:return"url";case s.EncMediaType.NativeFlowResponse:return"native_flow_response";default:return null}})();if(t)return(0,o.CUSTOM_STRING)(t);throw(0,A.default)("Unsupported type")}));t.encodeMaybeMediaType=E;const y=m((e=>(0,o.CUSTOM_STRING)(e)));t.encodeMaybeNativeFlowName=y},75674:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t._online=void 0,t.handleMessage=function(){return _.apply(this,arguments)},t.waitForOfflineMsgThread=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)return f.chatQueue.wait(e);return f.allChatQueue.wait()},t.waitForOnlineMsgThread=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e)return p.chatQueue.wait(e);return p.allChatQueue.wait()};var i=r(n(48926)),o=n(66911),a=n(39528),s=n(77689),l=n(74700),u=n(43926),c=n(1723);const d=2e4,p={allChatQueue:new a.PromiseQueue,chatQueue:new a.PromiseQueueMap};t._online=p;const f={allChatQueue:new a.PromiseQueue,chatQueue:new a.PromiseQueueMap};function _(){return(_=(0,i.default)((function*(e,t,n){return t&&!c.OfflineMessageHandler.isResumeFromRestartComplete()?f.allChatQueue.enqueue((()=>f.chatQueue.enqueue(e,(0,i.default)((function*(){return yield(0,u.waitForOfflineProcessReady)(),(0,s.promiseTimeout)(n(),d).catch((e=>{if(!(e instanceof o.TimeoutError))throw e;__LOG__(2,void 0,void 0,void 0,["messaging"])`Offline chat queue MAX_MESSAGE_DELAY exceeded`}))}))))):(yield(0,l.waitForOfflineDeliveryEnd)(),p.allChatQueue.enqueue((()=>p.chatQueue.enqueue(e,(()=>(0,s.promiseTimeout)(n(),d).catch((e=>{if(!(e instanceof o.TimeoutError))throw e;__LOG__(2,void 0,void 0,void 0,["messaging"])`Online chat queue MAX_MESSAGE_DELAY exceeded`})))))))}))).apply(this,arguments)}},82572:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.socketLogout=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(95160),s=n(97023);function l(){return(l=(0,i.default)((function*(e){if((0,a.isServiceWorker)())try{yield Promise.all([(0,s.setOfflinePushDisabled)(!0),(0,s.setLogoutReason)({reason:e})])}catch(e){return __LOG__(4,void 0,new Error,!0)`Socket logout failed, err: ${e}`,void SEND_LOGS("sw-socket-logout-failed")}(0,o.frontendFireAndForget)("socketLogout",{reason:e})}))).apply(this,arguments)}},63169:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markAddOnsAsReadDb=function(){return l.apply(this,arguments)},t.markUnclassifiedAddOnsAsReadDb=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(2537),s=n(88930);function l(){return(l=(0,i.default)((function*(e){const{getProviderForAddOnType:t}=n(2537),r=yield Promise.allSettled(Array.from(e.entries()).map((e=>{var n;let[r,i]=e;const a=(0,o.default)(t(r),"getProviderForAddOnType(addOnType)");return null===(n=a.markAsRead)||void 0===n?void 0:n.call(a,i)})));for(const e of r)if("rejected"===e.status)throw e.reason}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e){const t=new Map,n=a.addOnProviders.map(function(){var n=(0,i.default)((function*(n){var r;const i=yield null===(r=n.markAsRead)||void 0===r?void 0:r.call(n,e);t.set(n.type,null!=i?i:[])}));return function(){return n.apply(this,arguments)}}()),r=[],o=(0,s.markAsReadForTable)("message-orphans",e.map(String)).then((e=>{r.push(...e)})),l=yield Promise.allSettled([...n,o]);for(const e of l)if("rejected"===e.status)throw e.reason;return{updatedAddOns:t,updatedOrphans:r}}))).apply(this,arguments)}},31919:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkGenerateDeviceAndAdvAccountTypeChangeNotifications=function(){return I.apply(this,arguments)},t.bulkGenerateDeviceNotifications=function(){return v.apply(this,arguments)},t.createAndStoreDeviceNotifications=function(){return S.apply(this,arguments)},t.generateAdvAccountTypeChangeNotifications=E,t.generateDeviceNotifications=A;var i=r(n(48926)),o=n(44037),a=n(83741),s=n(21639),l=n(41404),u=n(45218),c=n(39066),d=n(94007),p=n(23440),f=n(3885),_=n(55017),g=n(51017),h=r(n(89482));function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t,n){const r={notifications:[],chatIds:[]};if(!(0,_.getGlobalSecurityNotifications)())return r;if((0,a.getABPropConfigValue)("adv_v2_m6"))return r;if(!(t.length>0||n.length>0))return r;let i=[];if(e.equals((0,f.getMeUser)()))try{(yield(0,d.getChatTable)().all()).forEach((e=>{e.id!==o.STATUS_JID&&i.push((0,g.createWid)(e.id))}))}catch(e){throw __LOG__(4,!0,new Error,!0)`get all from chat table failed`,SEND_LOGS("get all from chat table failed when creating device notification"),(0,h.default)("get all from chat table failed")}else try{const t=yield(0,d.getChatTable)().get(String(e),!1),n=yield(0,p.getParticipantTable)().equals(["participants"],String(e));i=n.map((e=>(0,g.createWid)(e.groupId))),t&&i.push((0,g.createWid)(t.id))}catch(e){throw __LOG__(4,!0,new Error,!0)`get chats failed`,SEND_LOGS("get chats failed when creating device notification"),(0,h.default)("get chays failed")}const s=i.map((r=>(0,u.genDeviceNotificationMsg)(r,e,t,n)));return r.notifications=s,r.chatIds=i.map(String),r}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){const n={notifications:[],chatIds:[]};if((0,l.bizHostedDevicesEnabled)()){const r=[];if(e.equals((0,f.getMeUser)()))__LOG__(4,void 0,new Error,void 0,["generateAdvAccountTypeChangeNotifications"])`SMB unexpected self adv system msg`;else try{const t=yield(0,d.getChatTable)().get(String(e),!1);t&&r.push((0,g.createWid)(t.id))}catch(e){throw(0,h.default)("get chays failed")}const i=r.map((n=>(0,s.genAdvAccountTypeChangeNotificationMsg)(n,e,t))).filter(Boolean);return n.notifications=i,n.chatIds=r.map(String),n}return n}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e,t,n){const{notifications:r}=yield A(e,t,n);yield Promise.all(r.map((e=>(0,c.storeMessageInTransaction)([e]))))}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){let t=[];const n=new Set;if((0,_.getGlobalSecurityNotifications)()){(yield Promise.all(e.map((e=>{let{wid:t,added:n,removed:r,isNewRecord:i}=e;return i?Promise.resolve(null):A(t,n,r)})))).forEach((e=>{e&&(t=t.concat(e.notifications),e.chatIds.forEach((e=>n.add(e))))}))}return t.length>0?{notifications:t,chatIds:Array.from(n)}:{notifications:[],chatIds:[]}}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){if(!(0,l.bizHostedDevicesEnabled)())throw(0,h.default)("hosted system msg gen: unexpected env");let t=[];const n=new Set;return(yield Promise.all(e.map((e=>{let{wid:t,added:n,removed:r,isNewRecord:i,newAdvAccountType:o}=e;return null!=o?E(t,o):(0,_.getGlobalSecurityNotifications)()?i?Promise.resolve(null):A(t,n,r):void 0})))).forEach((e=>{e&&(t=t.concat(e.notifications),e.chatIds.forEach((e=>n.add(e))))})),t.length>0?{notifications:t,chatIds:Array.from(n)}:{notifications:[],chatIds:[]}}))).apply(this,arguments)}},17802:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleADVDeviceNotification=function(e){let{wid:t,devices:n,type:r}=e;if(null==r)return Promise.reject((0,g.default)("handleADVDeviceNotification: notification without type"));return function(){return A.apply(this,arguments)}(t,n,r)},t.handleADVDeviceSyncResult=function(e){return function(){return m.apply(this,arguments)}(e)},t.handleADVDeviceUpdateForMessage=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(97183),a=n(41404),s=n(32080),l=n(52894),u=n(53098),c=n(49328),d=n(31852),p=n(51688),f=n(49178),_=n(4830),g=r(n(89482));function h(){return(h=(0,i.default)((function*(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6?arguments[6]:void 0;const s=yield(0,p.getLastADVDeviceInfoCheckTime)();return(0,c.handleADVDeviceUpdateForMessage)(e,t,n,r,i,o,s,a)}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e,t,r){let i=null;if("add"===r){const n=yield(0,_.getPersistSignalProtocolStore)().loadIdentityKey((0,f.createSignalAddress)(e).toString());var u;if(i=n?(0,l.toCurveKeyPubKey)((0,f.strToBuffer)(n)):null,!(0,a.bizHostedDevicesEnabled)()&&null!=t.deviceList)t.deviceList=null===(u=t.deviceList)||void 0===u?void 0:u.filter((e=>e.id!==s.HOSTED_DEVICE_ID))}const c=yield(0,o.getDeviceRecord)(e),g=yield(0,p.getLastADVDeviceInfoCheckTime)(),h=(0,n(21684).handleDeviceNotification)(e,r,t,i,c,g);if(h){var A;if(h.clearRecord)yield(0,d.clearDeviceRecord)(e,(null==c?void 0:c.devices)||[],!1,null==c?void 0:c.advAccountType,null==h||null===(A=h.update)||void 0===A?void 0:A.advAccountType);return(0,d.bulkApplyDeviceUpdate)([{wid:e,update:h.update,currentRecord:c}])}}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){(0,a.bizHostedDevicesEnabled)()||e.forEach((e=>{var t,n;null!=(null==e||null===(t=e.devices)||void 0===t?void 0:t.deviceList)&&(e.devices.deviceList=null===(n=e.devices.deviceList)||void 0===n?void 0:n.filter((e=>e.id!==s.HOSTED_DEVICE_ID)))})),__LOG__(2)`handleADVDeviceSyncResultImpl: start to handling ${e.length} updates`;const t=e.map((e=>e.wid)),r=e.filter((e=>{var t;return null===(t=e.devices.keyIndex)||void 0===t?void 0:t.signedKeyIndexBytes})),i=yield(0,_.getPersistSignalProtocolStore)().bulkLoadIdentityKey(r.map((e=>(0,f.createSignalAddress)(e.wid).toString()))),c=new Map;r.forEach(((e,t)=>{c.set((0,u.createDeviceListPK)(e.wid),i[t])}));const p=yield(0,o.bulkGetDeviceRecord)(t),g=[],h=[],A=n(21684).handleADVSyncResult;e.forEach(((e,t)=>{const n=c.get((0,u.createDeviceListPK)(e.wid)),r=n?(0,l.toCurveKeyPubKey)((0,f.strToBuffer)(n)):null,i=p[t],o=A(e.wid,e.devices,r,i);var a;null!=o&&(o.clearRecord?(g.push({wid:e.wid,currentList:(null==i?void 0:i.devices)||[],currentAdvAccountType:null==i?void 0:i.advAccountType,incomingAdvAccountType:null===(a=o.update)||void 0===a?void 0:a.advAccountType}),h.push({wid:e.wid,currentRecord:{id:(0,u.createDeviceListPK)(e.wid),deleted:!0},update:o.update})):h.push({wid:e.wid,currentRecord:i,update:o.update}))})),yield Promise.all(g.map((e=>{let{wid:t,currentList:n,currentAdvAccountType:r,incomingAdvAccountType:i}=e;return(0,d.clearDeviceRecord)(t,n,!1,r,i)}))),yield(0,d.bulkApplyDeviceUpdate)(h)}))).apply(this,arguments)}},47648:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ADV_HOSTED_PREFIX_DEVICE_IDENTITY_ACCOUNT_SIGNATURE=void 0,t.clearADVSecretKey=function(){return K.apply(this,arguments)},t.generateADVSecretKey=function(){return N.apply(this,arguments)},t.generateDeviceSignature=function(e,t,n){const r=e.details,i=a.Binary.build(O,r,t.pubKey,n).readByteArray().buffer;return(0,d.calculateSignature)(t,i)},t.getADVEncodedIdentity=function(){return D.apply(this,arguments)},t.getADVSecretKey=function(){return w.apply(this,arguments)},t.setADVSignedIdentity=function(e){if(null==e)return Promise.reject((0,S.default)("MD advSignedDeviceIdentity is null or undefined"));if(null==e.deviceSignature)return Promise.reject((0,S.default)("MD advSignedDeviceIdentity is missing deviceSignature"));return g.waSignalStore.putADVSignedIdentity(e)},t.validateADVwithEncs=function(){return b.apply(this,arguments)},t.validateADVwithIdentityKey=I,t.verifyDeviceIdentityAccountSignature=L,t.verifyHostedDeviceIdentityAccountSignature=function(e,t,n){if((0,c.bizHostedDevicesEnabled)()){const{accountSignatureKey:r,accountSignature:i,advDeviceIdentityDetails:o}=k(e,n);return F(e),B(o,i,t,r)}return!1},t.verifyHostedDeviceSignature=function(e,t,n){if((0,c.bizHostedDevicesEnabled)()){F(e);const{accountSignatureKey:r,deviceSignature:i,advDeviceIdentityDetails:o}=U(e,n);return G(o,t,p.ADVEncryptionType.E2EE,i,r)}return!1},t.verifyKeyIndexListAccountSignature=function(e,t){const n=e.details,r=e.accountSignature;(0,v.default)(null!=r,"accountSignature should not be null");const i=a.Binary.build(R,n).readByteArray();return(0,d.verifySignature)(new Uint8Array(t),i,new Uint8Array(r))};var i=r(n(48926)),o=n(62089),a=n(89323),s=n(89738),l=n(17802),u=n(96193),c=n(41404),d=n(52894),p=n(59266),f=n(49178),_=n(4830),g=n(83986),h=n(89924),A=n(56333),m=n(51017),E=n(33655),y=n(86881),S=r(n(89482)),v=r(n(41143));function I(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!1;(0,c.bizHostedDevicesEnabled)()&&(i=e.isHosted());try{const o=(0,m.toUserWid)(e),a=(0,s.uint8ArrayToBuffer)(n),u=yield(0,_.getSignalProtocolStore)().loadIdentityKey((0,f.createSignalAddress)(e).toString());if(u){const e=(0,d.toCurveKeyPubKey)((0,f.strToBuffer)(u));if((0,f.bufferEqual)(e,a))return!0}const g=(0,E.decodeProtobuf)(p.ADVSignedDeviceIdentitySpec,t);(0,v.default)(null!=g,"advSignedDeviceIdentity should not be null");const h=yield(0,_.getSignalProtocolStore)().loadIdentityKey((0,f.createSignalAddress)(o).toString()),A=h?(0,d.toCurveKeyPubKey)((0,f.strToBuffer)(h)):null;if(!L(g,a,A))return __LOG__(3)`validateADVIdentity: invalid account signature`,!1;if(!x(g,a,A,i))return __LOG__(3)`validateADVIdentity: invalid device signature`,!1;const y=(0,E.decodeProtobuf)(p.ADVDeviceIdentitySpec,g.details);(0,v.default)(null!=y,"advDeviceIdentity should not be null");let S=g.accountSignatureKey;(0,c.bizHostedDevicesEnabled)()&&(S=S&&S.byteLength>0?S:void 0);try{yield(0,l.handleADVDeviceUpdateForMessage)(e,y,A,S,a,r,y.accountType)}catch(e){return __LOG__(3)`validateADVIdentity: process adv device identity failed`,!1}return __LOG__(2)`validateADVIdentity: successfully verified accountSignature and deviceSignature`,!0}catch(e){return __LOG__(3)`validateADVIdentity: failed`,!1}}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.find((e=>e.e2eType===u.CiphertextType.Pkmsg));if(!i)return!0;__LOG__(2)`validateADVwithEncs: start validate prekey msg `;try{(0,v.default)(null!=e,"author should not be null");const n=(0,h.extractIdentityKey)(i.ciphertext);(0,v.default)(null!=n,"identityKey should not be null");const o=yield I(e,t,new Uint8Array(n),r);return yield(0,_.getSignalProtocolStore)().flushBufferToDiskIfNotMemOnlyMode(),o}catch(e){return __LOG__(3)`validateADVwithEncs: failed ${e}`,!1}}))).apply(this,arguments)}const M=new Uint8Array([6,5]);t.ADV_HOSTED_PREFIX_DEVICE_IDENTITY_ACCOUNT_SIGNATURE=M;const P=new Uint8Array([6,6]),C=new Uint8Array([6,0]),O=new Uint8Array([6,1]),R=new Uint8Array([6,2]);function N(){return(N=(0,i.default)((function*(){const e=new Uint8Array(32);self.crypto.getRandomValues(e);const t=(0,o.encodeB64)(e);return yield(0,A.setADVSecretKey)(t),t}))).apply(this,arguments)}function w(){return(w=(0,i.default)((function*(){const e=yield(0,A.getADVSecretKey)();if(null==e)throw(0,S.default)("MD secretKey is null or undefined");return e}))).apply(this,arguments)}function D(){return(D=(0,i.default)((function*(){const e=yield g.waSignalStore.getADVSignedIdentity();if(null==e)throw(0,S.default)("MD advSignedDeviceIdentity is null or undefined");if(null==e.deviceSignature)throw(0,S.default)("MD advSignedDeviceIdentity is missing deviceSignature");return(0,y.encodeProtobuf)(p.ADVSignedDeviceIdentitySpec,e).readByteArray()}))).apply(this,arguments)}function L(e,t,n){const{accountSignatureKey:r,accountSignature:i,advDeviceIdentityDetails:o}=k(e,n);return B(o,i,t,r)}function B(e,t,n,r){let i=C;if((0,c.bizHostedDevicesEnabled)()){(0,E.decodeProtobuf)(p.ADVDeviceIdentitySpec,e).deviceType===p.ADVEncryptionType.HOSTED&&(i=M)}(0,v.default)(null!=r,"accountSignatureKey should not be null"),(0,v.default)(null!=t,"accountSignature should not be null");const o=a.Binary.build(i,e,n).readByteArray();return(0,d.verifySignature)(new Uint8Array(r),o,new Uint8Array(t))}function k(e,t){const n=e.details;let r=e.accountSignatureKey||t;(0,c.bizHostedDevicesEnabled)()&&(r=r&&r.byteLength>0?r:t),(0,v.default)(null!=r,"accountSignatureKey should not be null");const i=e.accountSignature;return(0,v.default)(null!=i,"accountSignature should not be null"),(0,v.default)(null!=n,"advDeviceIdentityDetails should not be null"),{accountSignatureKey:r,accountSignature:i,advDeviceIdentityDetails:n}}function G(e,t,n,r,i){let o=O;(0,c.bizHostedDevicesEnabled)()&&n===p.ADVEncryptionType.HOSTED&&(o=P);const s=a.Binary.build(o,e,t,i).readByteArray();return(0,d.verifySignature)(new Uint8Array(t),s,new Uint8Array(r))}function U(e,t){const n=e.details,r=e.deviceSignature;(0,v.default)(null!=r,"deviceSignature should not be null");let i=e.accountSignatureKey||t;return(0,c.bizHostedDevicesEnabled)()&&(i=i&&i.byteLength>0?i:t),(0,v.default)(null!=i,"accountSignatureKey should not be null"),(0,v.default)(null!=n,"advDeviceIdentityDetails should not be null"),{accountSignatureKey:i,deviceSignature:r,advDeviceIdentityDetails:n}}function x(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{accountSignatureKey:i,deviceSignature:o,advDeviceIdentityDetails:a}=U(e,n);let s=p.ADVEncryptionType.E2EE;return(0,c.bizHostedDevicesEnabled)()&&r&&(s=p.ADVEncryptionType.HOSTED),G(a,t,s,o,i)}function F(e){if((0,c.bizHostedDevicesEnabled)()){const t=(0,E.decodeProtobuf)(p.ADVDeviceIdentitySpec,e.details);(0,v.default)(null!=t,"advDeviceIdentity should not be null");const n=t.accountType,r=t.deviceType;(0,v.default)(n!==p.ADVEncryptionType.E2EE,"Hosted account with unexpected adv type"),(0,v.default)(r!==p.ADVEncryptionType.E2EE,"Hosted device with unexpected adv type")}}function K(){return(K=(0,i.default)((function*(){yield(0,A.setADVSecretKey)(void 0)}))).apply(this,arguments)}},97421:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkUpdateGroupParticipantsInTransaction=function(){return f.apply(this,arguments)},t.updateGroupParticipantsInTransaction=function(){return p.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(44037),s=n(97575),l=n(23440),u=n(3885),c=n(58798),d=n(51017);function p(){return(p=(0,o.default)((function*(e,t,n){let r;try{r=yield(0,l.getParticipantTable)().equals(["participants"],String(e))}catch(e){throw e.toString().includes("Failed to read large IndexedDB value")&&(__LOG__(4,void 0,new Error,!0)`updateGroupParticipantsInTransaction: error: ${e}`,SEND_LOGS("indexeddb-participant-read-large-value")),e}const o=r.map((r=>{let o=r.rotateKey;const a=new Map(r.senderKey);return n.forEach((t=>{var n;const r=String((0,d.createDeviceWidFromUserAndDevice)(e.user,e.server,t));o=o||null!==(n=a.get(r))&&void 0!==n&&n,a.delete(r)})),o&&a.forEach(((e,t)=>a.set(t,!1))),t.forEach((t=>{a.set(String((0,d.createDeviceWidFromUserAndDevice)(e.user,e.server,t)),!1)})),_(e,o,r,t,n),(0,i.default)((0,i.default)({},r),{},{senderKey:a,rotateKey:o})}));return(0,l.getParticipantTable)().bulkCreateOrReplace(o)}))).apply(this,arguments)}function f(){return(f=(0,o.default)((function*(e){if(0===e.length)return;let t;try{t=yield(0,l.getParticipantTable)().anyOf(["participants"],e.map((e=>String(e.wid))))}catch(e){throw e.toString().includes("Failed to read large IndexedDB value")&&(__LOG__(4,void 0,new Error,!0)`bulkUpdateGroupParticipantsInTransaction: error: ${e}`,SEND_LOGS("indexeddb-participant-bulk-read-large-value")),e}if(0===t.length)return;const n=new Map;e.forEach((e=>{n.set(String(e.wid),e)}));const r=t.map((e=>{let t=e.rotateKey;const r=new Map(e.senderKey);return e.participants.forEach((i=>{const o=n.get(i);if(!o)return;const{wid:a,added:s,removed:l}=o;l.forEach((e=>{var n;const i=String((0,d.createDeviceWidFromUserAndDevice)(o.wid.user,o.wid.server,e));t=t||null!==(n=r.get(i))&&void 0!==n&&n,r.delete(i)})),t&&r.forEach(((e,t)=>r.set(t,!1))),s.forEach((e=>{r.set(String((0,d.createDeviceWidFromUserAndDevice)(o.wid.user,o.wid.server,e)),!1)})),_(a,t,e,s,l)})),(0,i.default)((0,i.default)({},e),{},{senderKey:r,rotateKey:t})}));return(0,l.getParticipantTable)().bulkCreateOrReplace(r)}))).apply(this,arguments)}function _(e,t,n,r,i){if(t&&!n.rotateKey){var o;let t;t=i.includes(a.DEFAULT_DEVICE_ID)&&r.includes(a.DEFAULT_DEVICE_ID)?c.EXPIRY_REASON.IDENTITY_CHANGE:(null===(o=(0,u.getMaybeMeUser)())||void 0===o?void 0:o.equals(e))?c.EXPIRY_REASON.PEER_COMPANION_UNPAIR:c.EXPIRY_REASON.OTHER_DEVICE_UNPAIR,(0,s.postSenderKeyExpiredMetric)({chatId:n.groupId,deviceCount:n.senderKey.size,expiryReason:t})}}},51688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastADVDeviceInfoCheckTime=function(){null==i&&(i=(0,r.getTaskScheduledTime)("advDeviceInfoCheck"));return i},t.setLastADVDeviceInfoCheckTime=function(e){i=Promise.resolve(e)};var r=n(13929);let i},15131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeExpectedTsForDeviceRecord=function(e,t,n){const r=null==t?void 0:t.timestamp;if(null==r)return{expectedTs:void 0,expectedTsLastDeviceJobTs:void 0,expectedTsUpdateTs:void 0};let o,a,s;null==t||t.deleted||(o=t.expectedTs,a=t.expectedTsLastDeviceJobTs,s=t.expectedTsUpdateTs);return i(e,r,n,o,a,s)},t.computeNewExpectedTs=i,t.shouldClearExpectedTs=function(e,t,n,r){if(null==n||n.deleted)return!1;if(null==n.expectedTs)return!1;if(e>=n.expectedTs)return!0;if(e<n.expectedTs&&t===n.expectedTs&&null!=r&&(null==n.expectedTsLastDeviceJobTs||r>n.expectedTsLastDeviceJobTs))return!0;return!1};var r=n(29987);function i(e,t,n,i,o,a){const s={expectedTs:i,expectedTsLastDeviceJobTs:o,expectedTsUpdateTs:a};return t>=e||null!=i&&i>=e||(s.expectedTs=e,s.expectedTsLastDeviceJobTs=null!=n?n:void 0,(null==i||t>=i)&&(s.expectedTsUpdateTs=(0,r.unixTimeWithoutClockSkewCorrection)())),s}},8941:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleHostedIcdcMetadataInline=function(){return I.apply(this,arguments)},t.handleICDCData=function(e,t,n){if(null==n)return Promise.resolve();return v.enqueue((()=>function(){return T.apply(this,arguments)}(e,t,n)))};var i=r(n(81109)),o=r(n(48926)),a=n(44037),s=n(22101),l=n(39528),u=n(29987),c=n(15131),d=n(97183),p=n(99692),f=n(41404),_=n(26075),g=n(46316),h=n(21684),A=n(31852),m=n(51688),E=n(59266),y=n(60223),S=n(3885);const v=new l.PromiseQueue;function I(){return(I=(0,o.default)((function*(e,t,n){var r,i;const o={hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!1};if(!(0,f.bizHostedDevicesEnabled)())return o;if(e.isSameAccount((0,S.getMeUser)()))return o;if(!e.isUser())return o;const a=null==n?void 0:n.deviceListMetadata;if(null==a)return o;const l=t.isSameAccount((0,S.getMeUser)()),u=l?a.receiverAccountType:a.senderAccountType,c=l?e:t;if(null==u)return o;if(u===E.ADVEncryptionType.E2EE)return(0,_.removeFromOfflineBizHostedSenderICDCProcessedCache)(c),o;if(u!==E.ADVEncryptionType.HOSTED)return o;if((0,_.hasOfflineBizHostedSenderICDCProcessedForSender)(c))return{hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!0};(0,_.addToOfflineBizHostedSenderICDCProcessedCache)(c);const h=yield(0,d.getDeviceRecord)(c);var m;if((0,s.numberOrThrowIfTooLarge)(null!==(r=a.senderTimestamp)&&void 0!==r?r:0)>(null!==(i=null==h?void 0:h.timestamp)&&void 0!==i?i:0)&&(null==h?void 0:h.advAccountType)!==E.ADVEncryptionType.HOSTED)return yield(0,A.clearDeviceRecord)(c,null!==(m=null==h?void 0:h.devices)&&void 0!==m?m:[],!g.Cmd.isOfflineDeliveryEnd,E.ADVEncryptionType.E2EE,E.ADVEncryptionType.HOSTED),g.Cmd.isOfflineDeliveryEnd?(0,y.syncDeviceListJob)([c],null,null):yield(0,p.addUserToPendingDeviceSync)([c.toString()]),{hostedBizEncMismatch:(null==h?void 0:h.advAccountType)===E.ADVEncryptionType.E2EE||!0!==(null==h?void 0:h.deletedChangedToHost),senderOrRecipientAccountTypeHosted:!0};return o}))).apply(this,arguments)}function T(){return(T=(0,o.default)((function*(e,t,n){const{deviceListMetadata:r}=n;if(null==r)return void __LOG__(2,void 0,void 0,void 0,["handleICDCData"])`get empty device list metadata`;if((null==e.device||e.device===a.DEFAULT_DEVICE_ID)&&null!=r.senderTimestamp&&null==r.senderKeyHash){const t=(0,s.numberOrThrowIfTooLarge)(r.senderTimestamp)+1;return void(0,h.handleADVSyncResult)(e,{deviceList:[{id:a.DEFAULT_DEVICE_ID,keyIndex:0}],keyIndex:{ts:(0,u.castToUnixTime)(t),signedKeyIndexBytes:null}},null,null)}const o=[],l=e.user===(0,S.getMeUser)().user;o.push({id:e,ts:r.senderTimestamp}),l&&null!=t&&o.push({id:t,ts:r.recipientTimestamp});const p=yield(0,m.getLastADVDeviceInfoCheckTime)(),f=yield(0,d.bulkGetDeviceRecord)(o.map((e=>e.id))),_=[];return f.forEach(((e,t)=>{const n=o[t].ts;if(null==e||e.deleted||null==n)return;const r=(0,c.computeExpectedTsForDeviceRecord)((0,s.numberOrThrowIfTooLarge)(n),e,p);r.expectedTs===e.expectedTs&&r.expectedTsLastDeviceJobTs===e.expectedTsLastDeviceJobTs&&e.expectedTsUpdateTs==e.expectedTsUpdateTs||(__LOG__(2)`handleICDCData: update expectd timestamp for ${e.id}`,_.push((0,i.default)((0,i.default)({},e),r)))})),_.length>0?(0,d.bulkCreateOrReplaceDeviceRecord)(_):void 0}))).apply(this,arguments)}},49328:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleADVDeviceUpdateForMessage=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(97183),s=n(3225),l=n(88101),u=n(49178),c=n(51017),d=r(n(41143));function p(){return(p=(0,i.default)((function*(e,t,n,r,i){let p=arguments.length>5&&void 0!==arguments[5]&&arguments[5],f=arguments.length>6?arguments[6]:void 0,_=arguments.length>7?arguments[7]:void 0;const{rawId:g,timestamp:h,keyIndex:A}=t;(0,d.default)(null!=g,"handleADVDeviceIdentity: rawId of deviceIdentity should not be null"),(0,d.default)(null!=h,"handleADVDeviceIdentity: timestamp of deviceIdentity should not be null"),(0,d.default)(null!=A,"handleADVDeviceIdentity: keyIndex of deviceIdentity should not be null");const m={rawId:g,timestamp:h,keyIndex:A},E=e.device;(0,d.default)(null!=E&&E!==o.DEFAULT_DEVICE_ID,"handleADVDeviceIdentity: called for primary device");const y=(0,c.toUserWid)(e),S=yield(0,a.getDeviceRecord)(y),v=null==n||null!=r&&!(0,u.bufferEqual)(n,r);return!S||S.deleted||S.rawId!==g||v?(0,s.handleListReset)(e,m,v?r:null,i,S,p,f,_):(0,l.handleNoListReset)(e,m,i,S,p,f,_)}))).apply(this,arguments)}},3225:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleListReset=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(22101),s=n(29987),l=n(83741),u=n(15131),c=n(41404),d=n(52894),p=n(53098),f=n(31852),_=n(49178),g=n(4830),h=n(51017),A=r(n(89482)),m=r(n(41143));function E(){return(E=(0,i.default)((function*(e,t,n,r,i){var E;let y=arguments.length>5&&void 0!==arguments[5]&&arguments[5],S=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0;const{rawId:I,timestamp:T,keyIndex:b}=t,M=(0,a.numberOrThrowIfTooLarge)(T),P=e.device;(0,m.default)(null!=P&&P!==o.DEFAULT_DEVICE_ID,"handleADVDeviceIdentity: called for primary device");const C=(0,h.toUserWid)(e);let O=0;if(O=null!==(E=null==i?void 0:i.timestamp)&&void 0!==E?E:(0,s.pastUnixTime)(((0,l.getABPropConfigValue)("num_days_key_index_list_expiration")-1)*s.DAY_SECONDS),null!=i&&!i.deleted){if(i.timestamp>M)throw(0,A.default)("handleADVDeviceIdentity: out-of-order timestamp detected");yield(0,f.clearDeviceRecord)(C,i.devices,y)}n&&(yield(0,g.getSignalProtocolStore)().saveIdentity((0,_.createSignalAddress)(C).toString(),(0,d.toSignalCurvePubKey)(n)));const R={id:(0,p.createDeviceListPK)(e),rawId:I,timestamp:O,devices:[{id:P,keyIndex:b},{id:o.DEFAULT_DEVICE_ID,keyIndex:0}],validIndexes:null,currentIndex:null,deleted:!1},N=(0,u.computeExpectedTsForDeviceRecord)(M,R,S);R.expectedTs=N.expectedTs,R.expectedTsLastDeviceJobTs=N.expectedTsLastDeviceJobTs,R.expectedTsUpdateTs=N.expectedTsUpdateTs,(0,c.bizHostedDevicesEnabled)()&&null!=v&&(R.advAccountType=v),yield(0,f.bulkApplyDeviceUpdate)([{wid:C,update:R,currentRecord:null}],y),yield(0,g.getSignalProtocolStore)().saveIdentity((0,_.createSignalAddress)(e).toString(),(0,d.toSignalCurvePubKey)(r))}))).apply(this,arguments)}},88101:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleNoListReset=function(){return A.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(44037),s=n(22101),l=n(15131),u=n(41404),c=n(52894),d=n(31852),p=n(49178),f=n(4830),_=n(51017),g=r(n(89482)),h=r(n(41143));function A(){return(A=(0,o.default)((function*(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],A=arguments.length>5?arguments[5]:void 0,m=arguments.length>6?arguments[6]:void 0;const{timestamp:E,keyIndex:y}=t,S=(0,s.numberOrThrowIfTooLarge)(E),v=e.device;if((0,h.default)(null!=v&&v!==a.DEFAULT_DEVICE_ID,"handleADVDeviceIdentity: called for primary device"),r.timestamp>=S&&r.validIndexes&&!r.validIndexes.includes(y))throw(0,g.default)("handleADVDeviceIdentity: out-of-order timestamp detected");const I=new Map(r.devices.map((e=>[e.id,e.keyIndex])));if(!I.has(v)||I.get(v)!==y){I.set(v,y);const t=Array.from(I.entries()).map((e=>{let[t,n]=e;return{id:t,keyIndex:n}})),a=(0,i.default)((0,i.default)({},r),{},{devices:t,deleted:!1}),s=(0,l.computeExpectedTsForDeviceRecord)(S,a,A);a.expectedTs=s.expectedTs,a.expectedTsLastDeviceJobTs=s.expectedTsLastDeviceJobTs,a.expectedTsUpdateTs=s.expectedTsUpdateTs,(0,u.bizHostedDevicesEnabled)()&&(a.advAccountType=m),yield(0,d.bulkApplyDeviceUpdate)([{wid:(0,_.toUserWid)(e),update:a,currentRecord:r}],o),yield(0,f.getSignalProtocolStore)().saveIdentity((0,p.createSignalAddress)(e).toString(),(0,c.toSignalCurvePubKey)(n))}}))).apply(this,arguments)}},60614:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleDeviceAddNotification=function(e,t,n,r,i,p,f){if(!p||p.deleted)return(0,l.bizHostedDevicesEnabled)()&&(0,u.triggerUsyncForCoexDeviceAdd)(t,e),null;if(n<p.timestamp)return null;if(null==i)return null;const _=(0,d.decodeSignedKeyIndexBytes)(i,r);if(!_)return null;const g=_.rawId,h=(0,a.numberOrThrowIfTooLarge)(_.timestamp);let A=null;(0,l.bizHostedDevicesEnabled)()&&(A=_.accountType);if(h!==n)return null;let m=!1,E=null;const y=p.timestamp;p.rawId!==g?m=!0:E=p.devices;(0,l.bizHostedDevicesEnabled)()&&null!=p.advAccountType&&p.advAccountType!==A&&(m=!0);const S=new Set(_.validIndexes),v=_.currentIndex||0,I=null==E?[]:E.filter((e=>e.id!==o.DEFAULT_DEVICE_ID&&(S.has(e.keyIndex)||e.keyIndex>v)));t.forEach((e=>{const{id:t,keyIndex:n}=e;t!==o.DEFAULT_DEVICE_ID&&null!=n&&S.has(n)&&I.push({id:t,keyIndex:n})})),I.push({id:o.DEFAULT_DEVICE_ID,keyIndex:0});const T={id:(0,c.createDeviceListPK)(e),rawId:g,timestamp:y,validIndexes:Array.from(S),devices:I,currentIndex:_.currentIndex,deleted:!1},b=(0,s.computeExpectedTsForDeviceRecord)(h,T,f);T.expectedTs=b.expectedTs,T.expectedTsLastDeviceJobTs=b.expectedTsLastDeviceJobTs,T.expectedTsUpdateTs=b.expectedTsUpdateTs,(0,l.bizHostedDevicesEnabled)()&&null!=A&&(T.advAccountType=A);return{update:T,clearRecord:m}},t.handleDeviceRemoveNotification=function(e,t,n){if(null==n||n.deleted)return null;if(t<n.timestamp)return null;const r=new Map(e.map((e=>[e.id,e.keyIndex]))),a=n.devices.filter((e=>{if(e.id!==o.DEFAULT_DEVICE_ID){const t=r.get(e.id);return null==t||t!==e.keyIndex}return!1}));return a.push({id:o.DEFAULT_DEVICE_ID,keyIndex:0}),{update:(0,i.default)((0,i.default)({},n),{},{devices:a}),clearRecord:!1}};var i=r(n(81109)),o=n(44037),a=n(22101),s=n(15131),l=n(41404),u=n(32080),c=n(53098),d=n(98897)},98897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSignedKeyIndexBytes=function(e,t){let n,a;try{n=(0,o.decodeProtobuf)(i.ADVSignedKeyIndexListSpec,t)}catch(e){return null}if(!(0,r.verifyKeyIndexListAccountSignature)(n,e))return null;try{a=(0,o.decodeProtobuf)(i.ADVKeyIndexListSpec,n.details)}catch(e){return null}const{timestamp:s,rawId:l,validIndexes:u,currentIndex:c,accountType:d}=a;if(null==s)return null;if(null==l)return null;return{timestamp:s,rawId:l,validIndexes:u,currentIndex:c,accountType:d}};var r=n(47648),i=n(59266),o=n(33655)},21684:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleADVSyncResult=function(e,t,n,r,o){const{deviceList:l,keyIndex:u}=t;if(null==u||null==u.signedKeyIndexBytes)return null!=l&&l.some((e=>e.id!==i.DEFAULT_DEVICE_ID))?void __LOG__(2)`processADVSyncResult: drop response with companion device but no keyIndexbytes`:(0,s.handleOmittedResult)(null==u?void 0:u.ts,r,null==u?void 0:u.expectedTs,o);const{ts:c,expectedTs:d,signedKeyIndexBytes:p}=u;return(0,a.handleKeyIndexResult)(e,l,c,p,n,r,o,d)},t.handleDeviceNotification=function(e,t,n,r,i,a){const{deviceList:s,keyIndex:u}=n;(0,l.default)(null!=s,"handleDeviceNotification: device list should not be none for device %s notification",t),(0,l.default)(null!=u,"handleDeviceNotification: keyIndex should not be none for device %s notification",t);const{ts:c,signedKeyIndexBytes:d}=u;if("add"===t)return(0,l.default)(null!=d,"handleDeviceNotification: signedKeyIndexBytes should not be none for device %s notification",t),(0,o.handleDeviceAddNotification)(e,s,c,d,r,i,a);if("remove"===t)return(0,o.handleDeviceRemoveNotification)(s,u.ts,i)};var i=n(44037),o=n(60614),a=n(81201),s=n(88029),l=r(n(41143))},81201:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyIndexResult=function(e,t,n,r,p,f,_,g){if(null!=(null==f?void 0:f.timestamp)&&n<f.timestamp)return null;if(null==p)return null;const h=(0,u.decodeSignedKeyIndexBytes)(p,r);if(!h)return null;const A=h.rawId,m=(0,o.numberOrThrowIfTooLarge)(h.timestamp);let E=null;(0,s.bizHostedDevicesEnabled)()&&(E=h.accountType);if(m!==n)return null;let y=!1,S=null,v=t;if(f&&!f.deleted){if(null==v&&(v=f.devices),f.rawId!==A?y=!0:S=f.devices,(0,s.bizHostedDevicesEnabled)()){null!=f.advAccountType&&f.advAccountType!==E&&(y=!0)}}else if((0,s.bizHostedDevicesEnabled)()){E===c.ADVEncryptionType.HOSTED&&!0!==(null==f?void 0:f.deletedChangedToHost)&&(y=!0)}const I=new Map,T=new Set(h.validIndexes),b=h.currentIndex||0;v&&v.forEach((e=>{null!=e.keyIndex&&T.has(e.keyIndex)&&((0,s.bizHostedDevicesEnabled)()&&99===e.id&&(0,d.default)(!0===e.isHosted,"Hosted device missing isHosted flag"),I.set(e.id,e.keyIndex))}));null!=S&&S.forEach((e=>{e.keyIndex>b&&I.set(e.id,e.keyIndex)}));I.set(i.DEFAULT_DEVICE_ID,0);const M=Array.from(I.entries()).map((e=>{let[t,n]=e;return(0,s.bizHostedDevicesEnabled)()&&99===t?{id:t,keyIndex:n,isHosted:!0}:{id:t,keyIndex:n}})),P={id:(0,l.createDeviceListPK)(e),rawId:A,timestamp:m,validIndexes:Array.from(T),devices:M,currentIndex:h.currentIndex,deleted:!1,advAccountType:E};y||(0,a.shouldClearExpectedTs)(m,g,f,_)||f&&!f.deleted&&(P.expectedTs=f.expectedTs,P.expectedTsLastDeviceJobTs=f.expectedTsLastDeviceJobTs,P.expectedTsUpdateTs=f.expectedTsUpdateTs);return{update:P,clearRecord:y}};var i=n(44037),o=n(22101),a=n(15131),s=n(41404),l=n(53098),u=n(98897),c=n(59266),d=r(n(41143))},88029:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleOmittedResult=function(e,t,n,r){if(!t||t.deleted)return null;if(null!=e&&e<t.timestamp)return null;const s=(0,i.default)({},t);null!=e&&(s.timestamp=e,(0,a.shouldClearExpectedTs)(e,n,t,r)&&(s.expectedTs=void 0,s.expectedTsLastDeviceJobTs=void 0,s.expectedTsUpdateTs=void 0));return s.devices=[{id:o.DEFAULT_DEVICE_ID,keyIndex:0}],{update:s,clearRecord:!1}};var i=r(n(81109)),o=n(44037),a=n(15131)},96536:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchive=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(94007),s=n(51017);function l(){return(l=(0,i.default)((function*(e){yield(0,a.getChatTable)().bulkCreateOrMerge(e);const t=e.map((e=>({id:(0,s.createWid)(e.id),archive:e.archive})));(0,o.frontendFireAndForget)("chatCollectionUpdate",{updates:t})}))).apply(this,arguments)}},48901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=new class{constructor(){this.chatEphemeralExemptionMap=new Map}has(e){return this.chatEphemeralExemptionMap.has(e)}get(e){var t;return null!==(t=this.chatEphemeralExemptionMap.get(e))&&void 0!==t?t:null}add(e,t){this.chatEphemeralExemptionMap.set(e,t)}clear(){this.chatEphemeralExemptionMap.clear()}};t.default=n},35182:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getChatEphemeralExemptionDataFromChat=function(){return l.apply(this,arguments)},t.persistsEphemeralDisplayedExemptions=function(e,t,n){const r=e.toString();o.default.add(r,{id:r,ephemeralDuration:t,ephemeralDisplayedExemptions:n}),(0,a.updateChatTable)(e,{ephemeralDisplayedExemptions:n}).catch((()=>{}))},t.updateEphemeralDurationCache=function(e,t){var n;const r=e.toString(),i=o.default.get(r),a={id:r,ephemeralDuration:t,ephemeralDisplayedExemptions:null!==(n=null==i?void 0:i.ephemeralDisplayedExemptions)&&void 0!==n?n:null};o.default.add(r,a)};var i=r(n(48926)),o=r(n(48901)),a=n(31125),s=n(94007);function l(){return(l=(0,i.default)((function*(e){const t=e.toString();if(o.default.has(t))return o.default.get(t);const n=yield(0,s.getChatTable)().get(e.toString(),!1),r=null==n?null:{id:t,ephemeralDuration:null==n?void 0:n.ephemeralDuration,ephemeralDisplayedExemptions:null==n?void 0:n.ephemeralDisplayedExemptions};return o.default.add(t,r),r}))).apply(this,arguments)}},40797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTextStatusObjectForGetRequest=function(e){var t;return{jid:e.id.toJid(),last_update_time:null===(t=e.textStatusLastUpdateTime)||void 0===t?void 0:t.toString()}},t.createTextStatusObjectForUpdateRequest=function(e){let t=e.textStatusString;""===e.textStatusString&&(t=null);let n,r=e.textStatusEphemeralDuration;null==r&&(r=0);null==t&&null==e.textStatusEmoji&&0!==r&&(r=0);null!=e.textStatusEmoji&&(n={content:e.textStatusEmoji});return{text:t,emoji:n,ephemeral_duration_sec:r}},t.parseTextStatusServerResponse=function(e){var t;return{id:(0,r.createWid)(e.jid),textStatusString:e.text,textStatusEmoji:null===(t=e.emoji)||void 0===t?void 0:t.content,textStatusEphemeralDuration:e.ephemeral_duration_sec,textStatusLastUpdateTime:null!=e.last_update_time?Number(e.last_update_time):void 0}};var r=n(51017)},81790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageAlertType=void 0;const r=n(76672)({LOW_QUOTA_EXCEEDED:"low_quota_exceed",HIGH_QUOTA_EXCEEDED:"high_quota_exceed",NO_ALERT:"no_alert"});t.StorageAlertType=r},58849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GROUP_PARTICIPANT_TYPES=void 0;t.GROUP_PARTICIPANT_TYPES={superadmin:"superadmin",admin:"admin",participant:"participant"}},90425:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMembershipApprovalRequests=function(e){let{group:t,requests:n,isOffline:i}=e;return(0,r.removeMembershipApprovalRequests)(t,n,i)};var r=n(42417)},78440:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipants=function(){return A.apply(this,arguments)},t.bulkCheckMyMembership=function(){return b.apply(this,arguments)},t.bulkGetParticipants=S,t.checkMyMembership=function(){return T.apply(this,arguments)},t.demoteCommmunityParticipants=function(e){let{group:t,participants:n,isOffline:r}=e;return(0,a.updateCommunityParticipants)(t,{action:s.PARTICIPANT_OPERATION.LINKED_GROUP_DEMOTE,participants:n},r)},t.demoteParticipants=function(e){let{group:t,participants:n,groupMetadata:r,isOffline:i}=e;return(0,a.updateDBParticipants)(t,{action:s.PARTICIPANT_OPERATION.DEMOTE,participants:n},r,i)},t.getParticipants=v,t.promoteCommmunityParticipants=function(e){let{group:t,participants:n,isOffline:r}=e;return(0,a.updateCommunityParticipants)(t,{action:s.PARTICIPANT_OPERATION.LINKED_GROUP_PROMOTE,participants:n},r)},t.promoteParticipants=function(){return m.apply(this,arguments)},t.removeParticipants=function(e){let{group:t,participants:n,timestamp:r,author:i,reason:o,groupMetadata:l,isOffline:u}=e;return(0,a.updateDBParticipants)(t,{action:s.PARTICIPANT_OPERATION.REMOVE,participants:n,timestamp:r,author:i,reason:o},l,u)},t.updateParticipants=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(87167),a=n(2505),s=n(88470),l=n(98051),u=n(75968),c=n(20601),d=n(35872),p=n(23440),f=n(3885),_=n(51017),g=r(n(89482));function h(){return(h=(0,i.default)((function*(e){let{group:t,participants:n,isOffline:r,groupInfo:i,skipDeviceSync:o=!1}=e;const s=[];n.forEach((e=>{e.isAdmin&&s.push(e.id)}));const l=(0,f.getMaybeMeUser)(),u=s.some((e=>l&&l.equals(e)));let d=!1;null!=i&&(d=Boolean(i.incognito)&&Boolean(i.defaultSubgroup));const p=d?(0,c.augmentedCagGroupParticipantList)(u,n):n.map((e=>{let{id:t}=e;return t}));let _;return _=o?p:yield E(p,r),(0,a.replaceParticipants)({group:t,participants:n,admins:s,deviceIds:_,groupInfo:i})}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){let{group:t,participants:n,isOffline:r,reason:i}=e,o=!1;const u=t.toString();let h=!1,A=[];const m=(0,f.assertGetMeUser)(),y=yield(0,d.getGroupMetadataTable)().get(u);if(null==y)throw(0,g.default)("addParticipants: groupMetadataRecord is null");const S=!0===y.isLidAddressingMode,v=n.some((e=>e.id.isLid())),I=yield(0,p.getParticipantTable)().get(u);if(null!=I&&(o=Boolean(y.incognito)&&Boolean(y.defaultSubgroup),A=I.admins.map((e=>(0,_.createWid)(e))),h=A.some((e=>m&&m.equals(e)))||i===l.ADD_REASON.DEFAULT_SUBGROUP_PROMOTE),v&&!o&&!S)return;let T=n.map((e=>{let{id:t}=e;return t}));o&&(T=i===l.ADD_REASON.DEFAULT_SUBGROUP_PROMOTE?[...A,...T,m]:(0,c.augmentedCagGroupParticipantList)(h,n));const b=yield E(T,r);return(0,a.updateDBParticipants)(t,{action:s.PARTICIPANT_OPERATION.ADD,participants:n,deviceIds:b},y,r)}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){let{group:t,participants:n,groupMetadata:r,isOffline:i}=e,o=!1;const l=t.toString();let u=[];const c=(0,f.assertGetMeUser)();let d;if(n.some((e=>c.equals(e.id)))){const e=yield(0,p.getParticipantTable)().get(l);null!=e&&(o=Boolean(r.incognito)&&Boolean(r.defaultSubgroup),o&&(u=e.admins.map((e=>(0,_.createWid)(e))),d=yield E([...u,c],i)))}return(0,a.updateDBParticipants)(t,{action:s.PARTICIPANT_OPERATION.PROMOTE,participants:n,deviceIds:d},r,i)}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(t)return e.forEach((e=>{u.OfflinePendingDeviceCache.addOfflinePendingDevice(String(e))})),e;n=yield(0,o.syncAndGetDeviceList)(e);let r=[];return n.forEach(((t,n)=>{if(t){const{id:e,devices:n}=t;r=r.concat(n.map((t=>(0,_.createDeviceWidFromDeviceListPk)(e,t.id,t.isHosted))))}else r.push(e[n])})),r}))).apply(this,arguments)}function S(e){return(0,p.getParticipantTable)().bulkGet(e.map((e=>e.toString())))}function v(e){return(0,p.getParticipantTable)().get(e.toString())}function I(e){const t=null==e?void 0:e.participants;if(null==t)return!1;const n=(0,f.getMaybeMeUser)();if(null!=n&&t.includes(n.toString()))return!0;const r=(0,f.getMaybeMeLidUser)();return!(null==r||!t.includes(r.toString()))}function T(){return(T=(0,i.default)((function*(e){return I(yield v(e))}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e){return(yield S(e)).map(I)}))).apply(this,arguments)}},22296:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.extractDescription=m,t.extractLinkedParent=E,t.parseBatchGroupInfoSmax=function(e,t){const n=[];return t.forEach((t=>{const r=t.groupInfoOrTruncatedGroupInfoOrGroupForbiddenOrGroupNotExistMixinGroup;"per_group_dirty_recovery"===e&&"TruncatedGroupInfo"===r.name&&(__LOG__(3,void 0,void 0,!0)`parseBatchGroupInfoSmax: unexpected truncated group info received from server when querying dirty groups metadata`,SEND_LOGS("unexpected-truncated-group-info-for-dirty-group-request")),"GroupInfo"!==r.name&&"TruncatedGroupInfo"!==r.name||n.push(A(r.value))})),n},t.parseGroupNode=y,t.parseGroupSmax=A,t.queryGroup=function(){return v.apply(this,arguments)};var i=r(n(48926)),o=r(n(81109)),a=n(82749),s=r(n(82601)),l=n(29987),u=n(42811),c=n(91563),d=n(11439),p=n(58849),f=n(15610),_=n(35872),g=n(51017),h=r(n(89482));function A(e){var t,n,r,i,a;const{groupAddressingModeMixin:s,creator:u,creation:c,id:d,hasLocked:p,hasAnnouncement:A,hasNoFrequentlyForwarded:m,hasSupport:E,hasSuspended:y,parent:S,hasDefaultSubGroup:v,hasGeneralChat:I,hasIncognito:T,membershipApprovalMode:b,membershipApprovalRequest:M,hasAllowAdminReports:P,ephemeral:C,growthLocked:O,linkedParent:R,description:N,descriptionGroupInfoDescriptionMixin:w,namedSubjectOrUnnamedSubjectFallbackMixinGroup:D,participant:L,sT:B,size:k,groupMemberAddModeMixin:G,hasAllowNonAdminSubGroupCreation:U,hasAutoAddDisabled:x}=e;if(null==d)throw(0,h.default)("parseGroupSmax: invalid group id");const F=null==D?void 0:D.value.subject;if(null==F)throw(0,h.default)("parseGroupSmax: invalid group subject");const K=null!=L?L.map((e=>{if("GroupInfoParticipantAdmin"===e.groupInfoParticipantMixins.name){const{type:t,groupInfoParticipantAdminMixins:n}=e.groupInfoParticipantMixins.value,r="admin"===t||"superadmin"===t,i="superadmin"===t;return"ParticipantWithJid"===n.name||"ParticipantWithJidAndPn"===n.name?{isAdmin:r,isSuperAdmin:i,id:(0,f.userJidToUserWid)(n.value.jid),displayName:null,lid:null}:"ParticipantWithJidAndLid"===n.name?{isAdmin:r,isSuperAdmin:i,id:(0,f.userJidToUserWid)(n.value.jid),lid:(0,f.userJidToUserWid)(n.value.lid),displayName:null}:(n.name,{isAdmin:r,isSuperAdmin:i,id:(0,f.userJidToUserWid)(n.value.jid),lid:(0,f.userJidToUserWid)(n.value.lid),displayName:n.value.displayName})}e.groupInfoParticipantMixins.name;const t=e.groupInfoParticipantMixins.value.participantMixins;return"ParticipantWithJid"===t.name||"ParticipantWithJidAndPn"===t.name?{isAdmin:!1,isSuperAdmin:!1,id:(0,f.userJidToUserWid)(t.value.jid),displayName:null,lid:null}:"ParticipantWithJidAndLid"===t.name?{isAdmin:!1,isSuperAdmin:!1,id:(0,f.userJidToUserWid)(t.value.jid),lid:(0,f.userJidToUserWid)(t.value.lid),displayName:null}:"ParticipantWithJidContainingLidAndDisplayName"===t.name?{isAdmin:!1,isSuperAdmin:!1,id:(0,f.userJidToUserWid)(t.value.jid),displayName:t.value.displayName,lid:null}:(t.name,{isAdmin:!1,isSuperAdmin:!1,id:(0,f.userJidToUserWid)(t.value.jid),lid:(0,f.userJidToUserWid)(t.value.lid),displayName:t.value.displayName})})):[];const Y=null!==(t=null==b||null===(n=b.membershipApprovalGroupJoinModeEnabledMixin)||void 0===n?void 0:n.state)&&void 0!==t?t:null==b?void 0:b.state,j=_.MemberAddMode.cast(null==G||null===(r=G.memberAddModeAdminOrAllMembersOrUnknownAddModeMixinGroup)||void 0===r?void 0:r.value.elementValue),V=null!==(i=null==N?void 0:N.groupInfoDescriptionMixin)&&void 0!==i?i:w;return(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({id:(0,g.createWid)(`${d}@g.us`),owner:null!=u?(0,f.userJidToUserWid)(u):void 0,creation:c,restrict:Boolean(p),announce:Boolean(A),noFrequentlyForwarded:Boolean(m),support:E,suspended:y,isParentGroup:null!=S,numSubgroups:null==S?void 0:S.numSubGroups,participants:K,isParentGroupClosed:"request_required"===(null==S||null===(a=S.parentGroupDefaultMembershipApprovalModeMixin)||void 0===a?void 0:a.defaultMembershipApprovalMode),defaultSubgroup:v,generalSubgroup:I,incognito:T,membershipApprovalMode:"on"===Y,reportToAdminMode:P,membershipApprovalRequest:M,isLidAddressingMode:"lid"===(null==s?void 0:s.addressingMode),memberAddMode:j,allowNonAdminSubGroupCreation:U},V&&function(e){if(!e)return null;const{bodyElementValue:t,id:n,participant:r,t:i}=e;return{desc:t,descId:n,descOwner:null!=r?(0,f.userJidToUserWid)(r):void 0,descTime:(0,l.castToUnixTime)(i)}}(V)),C&&function(e){if(!e)return null;const{expiration:t}=e;return{ephemeralDuration:t}}(C)),function(e){if(null==e)return null;const{expiration:t,type:n}=e;return{growthLockExpiration:t,growthLockType:n}}(O)),function(e){return null==e?null:{parentGroup:(0,f.groupJidToWid)(e.jid),parentGroupSubject:e.subject}}(R)),{},{subject:F,subjectTime:B,size:k,generalChatAutoAddDisabled:Boolean(x)})}function m(e){if(e.hasChild("description")){const t=e.child("description");if(t.hasChild("body")){const e=t.child("body");if(e.hasContent()){const n={desc:e.contentString(),descId:t.attrString("id")};return t.hasAttr("participant")&&(n.descOwner=(0,f.userJidToUserWid)(t.attrUserJid("participant"))),t.hasAttr("t")&&(n.descTime=t.attrTime("t")),n}}}return null}function E(e){const t=e.maybeChild("linked_parent"),n=null==t?void 0:t.maybeAttrGroupJid("jid");return null==n?null:{parentGroup:(0,f.groupJidToWid)(n),parentGroupSubject:null==t?void 0:t.maybeAttrString("subject")}}function y(e){var t,n,r,i,a,s,l,u;const c=m(e),d=function(e){const t={subject:e.attrString("subject")};return e.hasAttr("s_o")&&(t.subjectOwner=(0,f.userJidToUserWid)(e.attrUserJid("s_o"))),e.hasAttr("s_o_pn")&&(t.subjectOwnerPn=(0,f.userJidToUserWid)(e.attrPhoneUserJid("s_o_pn"))),e.hasAttr("s_t")&&(t.subjectTime=e.attrTime("s_t")),t}(e),A=function(e){if(e.hasChild("ephemeral")){const t=e.child("ephemeral");if(t.hasAttr("expiration"))return{ephemeralDuration:t.attrInt("expiration")}}return null}(e),y=function(e){const t=e.maybeChild("growth_locked"),n=null==t?void 0:t.maybeAttrInt("expiration"),r=null==t?void 0:t.maybeAttrString("type");return null==n||null==r?null:{growthLockExpiration:n,growthLockType:r}}(e),S=E(e);let v,I;try{v=(0,g.createWid)(`${e.attrString("id")}@g.us`)}catch(e){}if(null==v)throw(0,h.default)("createGroupReplyParser: invalid group id");e.hasChild("member_add_mode")&&(I=_.MemberAddMode.cast(e.child("member_add_mode").contentString()));const T=e.mapChildrenWithTag("participant",(e=>{const t=e.attrEnumOrDefault("type",p.GROUP_PARTICIPANT_TYPES,p.GROUP_PARTICIPANT_TYPES.participant),n=e.maybeAttrLidUserJid("lid"),r=e.maybeAttrPhoneUserJid("phone_number");return{displayName:e.maybeAttrString("display_name"),id:(0,f.userJidToUserWid)(e.attrUserJid("jid")),isSuperAdmin:t===p.GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:t===p.GROUP_PARTICIPANT_TYPES.admin||t===p.GROUP_PARTICIPANT_TYPES.superadmin,lid:null!=n?(0,f.userJidToUserWid)(n):null,phoneNumber:null!=r?(0,f.userJidToUserWid)(r):null}})),b=(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({id:v,owner:e.hasAttr("creator")?(0,f.userJidToUserWid)(e.attrUserJid("creator")):void 0,creatorPn:e.hasAttr("creator_pn")?(0,f.userJidToUserWid)(e.attrPhoneUserJid("creator_pn")):void 0,creation:e.attrTime("creation"),restrict:e.hasChild("locked"),announce:e.hasChild("announcement"),noFrequentlyForwarded:e.hasChild("no_frequently_forwarded"),participants:T,support:e.hasChild("support"),size:e.hasAttr("size")?e.attrInt("size"):void 0,suspended:e.hasChild("suspended"),isParentGroup:null!==(t=e.hasChild("parent"))&&void 0!==t?t:void 0,isParentGroupClosed:"request_required"===(null===(n=e.maybeChild("parent"))||void 0===n?void 0:n.maybeAttrString("default_membership_approval_mode")),numSubgroups:null!==(r=null===(i=e.maybeChild("parent"))||void 0===i?void 0:i.maybeAttrInt("num_sub_groups"))&&void 0!==r?r:0,defaultSubgroup:null!==(a=e.hasChild("default_sub_group"))&&void 0!==a?a:void 0,generalSubgroup:null!==(s=e.hasChild("general_chat"))&&void 0!==s?s:void 0,generalChatAutoAddDisabled:e.hasChild("auto_add_disabled"),incognito:e.hasChild("incognito"),isLidAddressingMode:!!e.maybeAttrString("addressing_mode")&&"lid"===e.attrString("addressing_mode"),membershipApprovalMode:"on"===(null==e||null===(l=e.maybeChild("membership_approval_mode"))||void 0===l||null===(u=l.maybeChild("group_join"))||void 0===u?void 0:u.maybeAttrString("state")),memberAddMode:I,membershipApprovalRequest:e.hasChild("membership_approval_request"),reportToAdminMode:e.hasChild("allow_admin_reports"),allowNonAdminSubGroupCreation:e.hasChild("allow_non_admin_sub_group_creation")},c),A),y),d),S),M=b.defaultSubgroup&&b.incognito,P=b.isLidAddressingMode;return!1===M&&!1===P&&(b.participants=b.participants.filter((e=>{let{id:t}=e;return!t.isLid()}))),b}const S=new s.default("queryGroupParser",(e=>e.hasChild("group")?y(e.child("group")):{phashMatch:!0}));function v(){return(v=(0,i.default)((function*(e){const{groupWid:t,request:n,phash:r}=e,i=(0,u.wap)("iq",{to:(0,d.GROUP_JID)(t),type:"get",xmlns:"w:g2",id:(0,u.generateId)()},(0,u.wap)("query",{request:n||u.DROP_ATTR,phash:(0,u.MAYBE_CUSTOM_STRING)(r)})),o=yield(0,a.deprecatedSendIq)(i,S);if(!o.success)throw __LOG__(2)`queryGroup failed: ${o.errorCode}:${o.errorType}`,new c.ServerStatusCodeError(o.errorCode,o.errorText);return o.result}))).apply(this,arguments)}},70079:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.databaseUpdatesForDeactivateCommunity=function(){return v.apply(this,arguments)},t.databaseUpdatesForExitedCommunity=function(){return I.apply(this,arguments)},t.databaseUpdatesForIntegrityDeactivateCommunity=function(){return y.apply(this,arguments)},t.databaseUpdatesForSubgroupUnlink=f,t.partitionSubgroups=E;var i=r(n(48926)),o=n(79247),a=n(22582),s=n(78440),l=n(20383),u=n(94007),c=n(35872),d=n(3885),p=n(51017);function f(e,t){return function(){return h.apply(this,arguments)}(e,t,!1)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e,t,n){const[r,i]=yield Promise.all([(0,o.getJoinedSubgroupsMetadata)((0,p.createWid)(e.id)).then((e=>e.filter((e=>!(0,p.createWid)(e.id).equals(t))))),(0,o.getUnjoinedSubgroupsMetadata)((0,p.createWid)(e.id))]);return f(n,r.concat(i).map((e=>{let{id:t,subject:n}=e;return{id:(0,p.createWid)(t),subject:n}})))}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e,t,n){t.forEach((t=>{t.parentGroupId=n?e:void 0,t.generalSubgroup=n?t.generalSubgroup:void 0}));const{joinedSubgroups:r,unjoinedSubgroups:i}=E(t,yield A(t.map((e=>e.id))));return[...r.map((t=>(0,a.persistGroupMetadata)(t.id,{parentGroup:n?e.toString():void 0,generalSubgroup:n?t.generalSubgroup:void 0}))),(0,l.updateUnjoinedSubgroupsJob)(i,e,n)]}))).apply(this,arguments)}function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){const t=new Map((yield(0,s.bulkGetParticipants)(e)).filter(Boolean).map((e=>[e.groupId,e.participants]))),n=(0,d.assertGetMeUser)().toString();return e=>{var r,i;return null!==(r=null===(i=t.get(e.toString()))||void 0===i?void 0:i.includes(n))&&void 0!==r&&r}}))).apply(this,arguments)}function E(e,t){return e.reduce(((e,n)=>(t(n.id)?e.joinedSubgroups=e.joinedSubgroups.concat(n):e.unjoinedSubgroups=e.unjoinedSubgroups.concat(n),e)),{joinedSubgroups:[],unjoinedSubgroups:[]})}function y(){return(y=(0,i.default)((function*(e,t){const n=[],r=yield(0,a.getGroupMetadata)(e);if(!0!==(null==r?void 0:r.isParentGroup))return n;const i={suspended:!0,terminated:!0};n.push((0,a.persistGroupMetadata)(e,i,t));const l=yield(0,o.getDefaultSubgroup)(e);null!=l&&(yield(0,s.checkMyMembership)(l))&&n.push((0,a.persistGroupMetadata)(l,i,t));const u=yield _(r,l,e);return n.push(...u),n}))).apply(this,arguments)}function S(e){const t=[];return t.push((0,c.getGroupMetadataTable)().remove(e.toString())),t.push((0,u.getChatTable)().remove(e.toString())),t}function v(){return(v=(0,i.default)((function*(e,t){const n=[],r=yield(0,a.getGroupMetadata)(e);if(null==r||!0!==r.isParentGroup)return n;const i=yield(0,o.getDefaultSubgroup)(e);null!=i&&(yield(0,s.checkMyMembership)(i))&&n.push((0,a.persistGroupMetadata)(i,{terminated:!0,parentGroup:void 0},t));const l=yield _(r,i,e);return n.push(...l),n.push(...S(e)),n}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){const t=[];if(!e)return t;const n=yield(0,a.getGroupMetadata)(e);if(!n||!0!==n.isParentGroup)return t;const r=yield(0,o.getDefaultSubgroup)(e),i=null==r?[]:yield _(n,r,e);return t.push(...i),t.push(...S(e)),t}))).apply(this,arguments)}},27176:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateDBForGroupAction=function(){return D.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(81408),s=r(n(49619)),l=n(29987),u=n(83741),c=n(60585),d=n(64002),p=n(7429),f=n(18106),_=n(79247),g=n(505),h=n(22582),A=n(88470),m=n(51458),E=n(94645),y=n(22356),S=n(92143),v=n(81532),I=n(98051),T=n(46206),b=n(57705),M=n(16123),P=n(73682),C=n(90894),O=n(70079),R=n(97023),N=n(3885),w=n(51017);function D(){return(D=(0,o.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];__LOG__(2,void 0,void 0,void 0,["groups"])`inside _handleGroupActionMD`;const{chatId:r,author:o,pushname:v,ts:P=Date.now()/1e3}=e;o&&v&&(0,T.updatePushname)(o,v,n);const D=[];switch(t.actionType){case I.GROUP_ACTIONS.ADD:D.push((0,S.addParticipantsJob)(r,t.participants,n,t.reason).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`addParticipants: out-of-sync group notification`,k(r,n)})))),(0,u.getABPropConfigValue)("group_join_request_m2")&&D.push((0,y.removeMembershipApprovalRequestsJob)(e.chatId,t.participants.map((e=>e.id)),n));break;case I.GROUP_ACTIONS.REMOVE:{const i=yield(0,h.getGroupMetadata)(r);if(null==i)break;const o=t.reason!==I.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE&&t.participants.some((e=>{let{id:t}=e;return(0,N.isMeAccount)(t)}))&&(yield(0,_.isLastJoinedSubgroup)(i));D.push((0,S.removeParticipantsJob)(r,t.participants,P,e.author,t.reason,i,n).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`removeParticipants: out-of-sync group notification`,k(r,n)}))));const s=(0,N.getMaybeMeUser)();if(s&&t.participants.find((e=>{let{id:t}=e;return t.equals(s)}))&&((0,R.removeUserSentMessageToChat)(r),(0,d.setAdminshipCache)(r.toString(),!1)),o){const e=null==i?void 0:i.parentGroup,t=yield(0,O.databaseUpdatesForExitedCommunity)(null!=e?(0,w.createWid)(e):null);D.push(...t)}break}case I.GROUP_ACTIONS.DEMOTE:{const e=yield(0,h.getGroupMetadata)(r);if(null==e)break;const i=(0,N.getMaybeMeUser)();i&&t.participants.find((e=>{let{id:t}=e;return t.equals(i)}))&&((0,d.setAdminshipCache)(r.toString(),!1),(0,u.getABPropConfigValue)("group_join_request_m2")&&D.push((0,c.removeAllMembershipApprovalRequests)(r)),yield L(e,r)),D.push((0,S.demoteParticipantsJob)(r,t.participants,e,n).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`removeParticipants: out-of-sync group notification`,k(r,n)}))));break}case I.GROUP_ACTIONS.PROMOTE:{const e=yield(0,h.getGroupMetadata)(r);if(null==e)break;const i=(0,N.getMaybeMeUser)();if(i&&t.participants.find((e=>{let{id:t}=e;return t.equals(i)}))){if((0,f.communityAdminPromotionOneTimePromptEnabled)()&&null!=e&&(0,I.getGroupTypeFromGroupMetadata)(e)===I.GroupType.COMMUNITY){const t=(0,b.getCommunityAdminPromotionNuxKey)(e.id.toString());(0,M.resetNux)(t)}(0,d.setAdminshipCache)(r.toString(),!0),yield L(e,r)}D.push((0,S.promoteParticipantsJob)(r,t.participants,e,n).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`removeParticipants: out-of-sync group notification`,k(r,n)}))));break}case I.GROUP_ACTIONS.LINKED_GROUP_PROMOTE:{if(!t.jid)break;const e=t.jid;(yield(0,d.isCurrentUserGroupAdmin)(e.toString()))||D.push((0,S.promoteCommunityParticipantsJob)(e,t.participants,n).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`linkedGroupPromote: out-of-sync group notification`,k(e,n)}))));break}case I.GROUP_ACTIONS.LINKED_GROUP_DEMOTE:{if(!t.jid)break;const e=t.jid;(yield(0,d.isCurrentUserGroupAdmin)(e.toString()))||D.push((0,S.demoteCommunityParticipantsJob)(e,t.participants,n).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`linkedGroupDemote: out-of-sync group notification`,k(e,n)}))));break}case I.GROUP_ACTIONS.REVOKE_INVITE:{var B;const e=null===(B=(0,N.getMaybeMeUser)())||void 0===B?void 0:B.toString();if(!e)return void __LOG__(3)`getMaybeMeUser returned null, can't process action ${t}`;const n=null==o?void 0:o.toString();let i=[];if(null==n)return void __LOG__(3)`Received revoke without an admin jid ${t}`;if(n===e)i=t.participants.map((t=>({from:e,to:t.id.toString(),groupId:r.toString(),expiration:t.expiration})));else{const o=t.participants.find((t=>t.id.toString()===e));if(!o)return __LOG__(4,void 0,new Error,!0)`Received group invite revokation from ${n}, but user not in participants list`,void SEND_LOGS("bad-revoke");i=[{from:n,to:e,groupId:r.toString(),expiration:o.expiration}]}yield Promise.all(i.map((e=>(0,m.revokeGroupInviteV4)(e.from,e.to,e.groupId,e.expiration))));break}case I.GROUP_ACTIONS.MODIFY:if(1!==t.participants.length){__LOG__(3)`_handleGroupActionMD: participants length should be 1, but is ${t.participants.length}`;break}D.push((0,E.modifyGroupParticipantJob)(r,(0,s.default)(o,"author"),t.participants[0].id).catch((0,a.filteredCatch)(A.GroupUnSyncedError,(()=>{__LOG__(3)`modifyGroupParticipant: out-of-sync group notification`,k(r,n)}))));break;case I.GROUP_ACTIONS.SUBJECT:D.push((0,h.persistGroupMetadata)(r,{subject:t.subject},n));break;case I.GROUP_ACTIONS.DESC_ADD:D.push((0,h.persistGroupMetadata)(r,{desc:t.desc,descId:t.descId,descTime:t.descTime,descOwner:null==o?void 0:o.toString()},n));break;case I.GROUP_ACTIONS.DESC_REMOVE:D.push((0,h.persistGroupMetadata)(r,{desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0},n));break;case I.GROUP_ACTIONS.RESTRICT:D.push((0,h.persistGroupMetadata)(r,{restrict:!!t.value},n));break;case I.GROUP_ACTIONS.SUSPEND:D.push((0,h.persistGroupMetadata)(r,{suspended:!!t.value},n));break;case I.GROUP_ACTIONS.ANNOUNCE:D.push((0,h.persistGroupMetadata)(r,{announce:!!t.value},n));break;case I.GROUP_ACTIONS.NO_FORWARD:D.push((0,h.persistGroupMetadata)(r,{noFrequentlyForwarded:!!t.value},n));break;case I.GROUP_ACTIONS.EPHEMERAL:D.push((0,h.persistGroupMetadata)(r,{ephemeralDuration:t.duration},n));break;case I.GROUP_ACTIONS.INVITE_CODE:case I.GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK:break;case I.GROUP_ACTIONS.DELETE:if(t.reason===I.DELETE_REASON.INTEGRITY_DELETE_PARENT){const e=yield(0,O.databaseUpdatesForIntegrityDeactivateCommunity)(r,n);D.push(...e)}else if(t.reason===I.DELETE_REASON.DELETE_PARENT){const e=yield(0,O.databaseUpdatesForDeactivateCommunity)(r,n);D.push(...e)}else D.push((0,h.persistGroupMetadata)(r,{terminated:!0},n));break;case I.GROUP_ACTIONS.GROWTH_UNLOCKED:D.push((0,h.persistGroupMetadata)(r,{growthLockExpiration:void 0,growthLockType:void 0},n));break;case I.GROUP_ACTIONS.GROWTH_LOCKED:"invite"===t.type&&D.push((0,h.persistGroupMetadata)(r,{growthLockExpiration:t.expiration,growthLockType:t.type},n));break;case I.GROUP_ACTIONS.PARENT_GROUP_LINK:{const e=t.groupDatas[0].id;D.push((0,h.persistGroupMetadata)(r,{parentGroup:e.toString()},n));break}case I.GROUP_ACTIONS.SUB_GROUP_LINK:D.push((0,_.persistCommunityLink)(r,t.groupDatas,g.CommunityLinkOperation.SubGroupLink,n),(0,h.persistGroupMetadata)(r,{lastActivityTimestamp:(0,l.unixTime)()},n));break;case I.GROUP_ACTIONS.SIBLING_GROUP_LINK:D.push((0,_.persistCommunityLink)(r,t.groupDatas,g.CommunityLinkOperation.SiblingGroupLink,n));break;case I.GROUP_ACTIONS.PARENT_GROUP_UNLINK:D.push((0,h.persistGroupMetadata)(r,{parentGroup:void 0},n));break;case I.GROUP_ACTIONS.SUB_GROUP_UNLINK:D.push((0,_.persistCommunityLink)(r,t.groupDatas,g.CommunityLinkOperation.SubGroupUnlink,n));break;case I.GROUP_ACTIONS.SIBLING_GROUP_UNLINK:D.push((0,_.persistCommunityLink)(r,t.groupDatas,g.CommunityLinkOperation.SiblingGroupUnlink,n));break;case I.GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE:(0,u.getABPropConfigValue)("group_join_request_m2")&&(D.push((0,h.persistGroupMetadata)(r,{membershipApprovalMode:t.value},n)),t.value||D.push((0,c.removeAllMembershipApprovalRequests)(r)));break;case I.GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST:if((0,u.getABPropConfigValue)("group_join_request_m2")&&!(0,u.getABPropConfigValue)("group_join_request_m3")){D.push((0,c.addMembershipApprovalRequests)(e.chatId,[{id:(0,s.default)(o,"author"),t:P,addedBy:(0,s.default)(o,"author"),requestMethod:t.requestMethod,parentGroupId:t.parentGroupId}]));const n=(0,b.getMembershipApprovalRequestsBannerNuxKey)(e.chatId.toString());(0,M.resetNux)(n)}break;case I.GROUP_ACTIONS.ALLOW_ADMIN_REPORTS:D.push((0,h.persistGroupMetadata)(r,(0,i.default)({reportToAdminMode:t.value},!t.value&&{lastReportToAdminTimestamp:null}),n));break;case I.GROUP_ACTIONS.ADMIN_REPORT_RECIEVED:D.push((0,h.persistGroupMetadata)(r,{lastReportToAdminTimestamp:t.value},n));break;case I.GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS:if((0,u.getABPropConfigValue)("group_join_request_m2")&&(0,u.getABPropConfigValue)("group_join_request_m3")){D.push((0,c.addMembershipApprovalRequests)(e.chatId,t.requests.map((e=>({id:e,t:P,addedBy:(0,s.default)(o,"author"),requestMethod:t.requestMethod,parentGroupId:t.parentGroupId})))));const n=(0,b.getMembershipApprovalRequestsBannerNuxKey)(e.chatId.toString());(0,M.resetNux)(n)}break;case I.GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS:(0,u.getABPropConfigValue)("group_join_request_m2")&&D.push((0,y.removeMembershipApprovalRequestsJob)(e.chatId,t.requests,n));break;case I.GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:D.push((0,h.persistGroupMetadata)(r,{allowNonAdminSubGroupCreation:!!t.value},n));break;case I.GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION:{var G;D.push((0,p.addSubgroupSuggestions)(e.chatId,[{id:t.id,parentGroupId:t.parentGroupId,subject:t.subject,desc:t.description,owner:t.owner,t:t.t,isExistingGroup:null!==(G=t.isExistingGroup)&&void 0!==G&&G,participantCount:t.participantCount}]));const n=(0,b.getSubgroupSuggestionsBannerNuxKey)(e.chatId.toString());(0,M.resetNux)(n);break}case I.GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS:D.push((0,C.removeSubgroupSuggestionsJob)(t.subgroupSuggestions.map((e=>{let{id:n,owner:r}=e;return{parentGroupId:t.parentGroupId,id:n,owner:r}})),n));break;case I.GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER:D.push((0,p.updateOwnerInSubgroupSuggestions)(t.parentGroupId,t.subgroupSuggestions,t.oldOwner,t.newOwner));break;case I.GROUP_ACTIONS.MEMBER_ADD_MODE:(0,u.getABPropConfigValue)("web_anyone_can_add_group_setting_enabled")&&D.push((0,h.persistGroupMetadata)(r,{memberAddMode:t.memberAddMode},n));break;case I.GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED:D.push((0,h.persistGroupMetadata)(r,{generalChatAutoAddDisabled:!0},n));break;default:__LOG__(4,void 0,new Error,void 0,["groups"])`unhandled group notif action in handleGroupActionMD for action ${JSON.stringify(t)}`}yield Promise.all(D),__LOG__(2,void 0,void 0,void 0,["groups"])`finished all storageTasks`}))).apply(this,arguments)}function L(){return B.apply(this,arguments)}function B(){return(B=(0,o.default)((function*(e,t){if(!0===e.isParentGroup&&!0!==e.allowNonAdminSubGroupCreation&&(0,f.memberSuggestedGroupsEnabled)()){const e=yield(0,_.getJoinedSubgroups)(t);e[0]&&(0,P.queryAndUpdateSubgroupSuggestions)(t,e[0])}}))).apply(this,arguments)}function k(e,t){return t?(0,E.markGroupParticipantStaleJob)(e):(0,v.sendQueryGroup)(e)}},25566:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(93042),a=r(n(82601)),s=n(66253),l=n(97023),u=r(n(89482));const c=new a.default("failureParser",(e=>(e.assertTag("failure"),{reason:e.attrInt("reason",400,599)})));function d(){return(d=(0,i.default)((function*(e){const t=c.parse(e);if(t.error)return __LOG__(4,void 0,new Error)`${t.error.toString()} parsing ${e.toString()}`,Promise.reject(t.error);switch(t.success.reason){case s.FAILURE_REASON.REASON_TEMP_BANNED:case s.FAILURE_REASON.REASON_LOCKED:case s.FAILURE_REASON.REASON_BANNED:__LOG__(4,void 0,new Error,!0)`received failure stanza, reason: ${t.success.reason}, banned users should not receive push notifications`,SEND_LOGS(`should-not-push-to-banned-users: reason: ${t.success.reason}`),(0,o.stopComms)(),(0,l.setOfflinePushDisabled)(!0);break;case s.FAILURE_REASON.REASON_NOT_AUTHORIZED:__LOG__(2)`received failure stanza, reason: 401 - not authorized`,(0,o.stopComms)(),(0,l.setOfflinePushDisabled)(!0);break;case s.FAILURE_REASON.REASON_CLIENT_TOO_OLD:case s.FAILURE_REASON.REASON_BAD_USER_AGENT:__LOG__(2)`Client too old or bad user agent, deferring the update to the next time app reopens`,(0,o.stopComms)(),(0,l.setOfflinePushDisabled)(!0);break;case s.FAILURE_REASON.REASON_GENERIC_FAILURE:case s.FAILURE_REASON.REASON_INTERNAL_SERVER_ERROR:case s.FAILURE_REASON.REASON_EXPERIMENTAL:__LOG__(3)`handleFailure: got failure code ${t.success.reason}`;break;default:return __LOG__(3)`failure reason ${t.success.reason} not implemented yet`,Promise.reject((0,u.default)(`failure reason ${t.success.reason} not implemented yet`))}}))).apply(this,arguments)}},55595:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=r(n(82601)),a=n(56812),s=n(41581),l=n(1723);const u=new o.default("infoBulletinParser",(e=>{if(e.assertTag("ib"),e.assertFromServer(),e.hasChild(a.INFO_TYPE.ROUTING)){const t=e.child(a.INFO_TYPE.ROUTING);return{type:a.INFO_TYPE.ROUTING,edgeRouting:t.child("routing_info").contentBytes(),domain:t.hasChild("dns_domain")?t.child("dns_domain").contentEnum(s.DOMAINS):null}}return e.hasChild(a.INFO_TYPE.OFFLINE)?{count:e.child(a.INFO_TYPE.OFFLINE).attrInt("count"),type:a.INFO_TYPE.OFFLINE}:e.hasChild(a.INFO_TYPE.OFFLINE_PREVIEW)?{count:{message:e.child(a.INFO_TYPE.OFFLINE_PREVIEW).attrInt("message"),receipt:e.child(a.INFO_TYPE.OFFLINE_PREVIEW).attrInt("receipt"),notification:e.child(a.INFO_TYPE.OFFLINE_PREVIEW).attrInt("notification")},type:a.INFO_TYPE.OFFLINE_PREVIEW}:null}));function c(){return(c=(0,i.default)((function*(e){const t=u.parse(e);if(t.error)throw __LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,t.error;const n=t.success;if(n)switch(n.type){case a.INFO_TYPE.ROUTING:return yield(0,s.handleRoutingInfo)(n),"NO_ACK";case a.INFO_TYPE.OFFLINE:return l.OfflineMessageHandler.processOfflineIb(n.count),"NO_ACK";case a.INFO_TYPE.OFFLINE_PREVIEW:return yield l.OfflineMessageHandler.processOfflinePreviewIb(n.count),"NO_ACK"}else __LOG__(3)`[worker] handleInfoBulletin unrecognized info bulletin`}))).apply(this,arguments)}},33583:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=r(n(82601)),a=n(56858),s=n(88411),l=n(79388),u=n(53519),c=n(97023),d=n(3885),p=n(32103),f=n(65904),_=n(51017);const g=new o.default("successParser",(e=>(e.assertTag("success"),{ts:e.attrTime("t"),propsVersion:e.attrInt("props"),companionEncStatic:e.maybeAttrString("companion_enc_static")||"NULL",lid:e.maybeAttrString("lid"),displayName:e.maybeAttrString("display_name")})));function h(){return(h=(0,i.default)((function*(e){var t;const n=g.parse(e);if(n.error)return __LOG__(4,void 0,new Error)`handleSuccess: failed to parse ${n.error}`,Promise.reject(n.error);const r=n.success;(0,s.updateClockSkew)(r.ts),(0,l.updateMeLid)(null!=r.lid?(0,_.createWid)(r.lid):null),null!=r.displayName&&(0,d.setMeDisplayName)(r.displayName),(0,c.setOfflinePushDisabled)(!1);const i=r.companionEncStatic;a.DbEncKeyStore.generateFinalDbEncryptionAndFtsKey(i);const o=yield(0,c.getServerPropsAttributes)();if((null!==(t=null==o?void 0:o.version)&&void 0!==t?t:-1)<r.propsVersion)return(0,u.queryServerProps)();yield(0,f.logLoginSuccess)(p.CONNECTION_ORIGIN_TYPE.PUSH)}))).apply(this,arguments)}},63384:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildMsgKey=v,t.parseMsgStubProto=I,t.parseMsgStubTemplate=T,t.parseWebMessageInfo=function(e){var t,n,r,i,o;const a=e.key,s=(0,p.decodeJid)(a.remoteJid),l=(0,E.getMaybeMeUser)(),g=a.fromMe?s:l,A=a.fromMe?l:s,y=v(e,a);if(null==y)return;const{msgKey:S,author:T}=y;let b="in";l.equals(s)&&(b=a.fromMe?"out":"in");if("broadcast"===g)return void __LOG__(3)`drop: broadcast`;let M=!1;M=e.reactions.some((e=>null!=e.text));const P={id:S,from:A,to:g,self:b,participant:S.participant,type:h.MSG_TYPE.UNKNOWN,t:e.messageTimestamp||0,ack:e.status-1,author:T,invis:!!e.ignore,star:!!e.starred,broadcast:a.fromMe&&e.broadcast,notifyName:e.pushName||"",encFilehash:(0,d.decodeBytes)(e.mediaCiphertextSha256),shareDuration:e.duration,labels:e.labels,ephemeralStartTimestamp:e.ephemeralStartTimestamp,ephemeralOutOfSync:e.ephemeralOutOfSync,bizPrivacyStatus:e.bizPrivacyStatus,verifiedBizName:e.verifiedBizName,reactions:e.reactions,hasReaction:M,agentId:e.agentId,revokeTimestamp:e.revokeMessageTimestamp,kicKey:void 0,kicState:void 0,pollInvalidated:!0===(null===(t=e.pollAdditionalMetadata)||void 0===t?void 0:t.pollInvalidated),eventInvalidated:!0===(null===(n=e.eventAdditionalMetadata)||void 0===n?void 0:n.isStale),replyCount:null===(r=e.commentMetadata)||void 0===r?void 0:r.replyCount,originalSelfAuthor:(0,p.decodeJid)(e.originalSelfAuthorUserJidString),kicTimestampMs:void 0,pinInChat:e.pinInChat,pmCampaignId:null===(i=e.premiumMessageInfo)||void 0===i?void 0:i.serverCampaignId,bizSource:null!=(null===(o=e.premiumMessageInfo)||void 0===o?void 0:o.serverCampaignId)?"smb_promo":void 0,bizBotType:!0===e.is1PBizBotMessage?u.BizBotType.BIZ_1P:null,botTargetSenderJid:null!=e.botMessageInvokerJid?(0,p.decodeJid)(e.botMessageInvokerJid):null};var C;(0,_.isReportingTagSyncingEnabled)()&&(P.reportingTokenInfo=null!=e.reportingTokenInfo?{reportingTag:null===(C=e.reportingTokenInfo)||void 0===C?void 0:C.reportingTag,version:m.REPORTING_TOKEN_VERSION.HISTORY_SYNC}:null);if(null!=e.keepInChat)try{const t=(0,f.parseKeepInChatHistorySyncMessage)(e);null!=t&&Object.assign(P,t)}catch(e){__LOG__(3)`parseWebMessageInfo: KIC fields are malformed`}if(e.message)return(0,c.parseMsgProto)(e.message,P,"history",e.paymentInfo,e.finalLiveLocation,e.quotedPaymentInfo,null,null,null,P.bizSource);return I(e,P)};var i=r(n(81109)),o=n(44037),a=r(n(49619)),s=n(83741),l=n(41404),u=n(42467),c=n(18431),d=n(57305),p=n(54468),f=n(3288),_=n(19909),g=r(n(60001)),h=n(73602),A=n(38601),m=n(90268),E=n(3885),y=r(n(27112)),S=n(51017);function v(e,t){const n=(0,p.decodeJid)(t.remoteJid);let r=(0,p.decodeJid)(t.participant);const i=(0,E.getMaybeMeUser)();let s=(0,p.decodeJid)(e.participant);null==r&&null!=n&&y.default.isWid(n)&&n===(0,S.createWid)(o.PSA_JID)&&(r=(0,S.createWid)(o.PSA_JID)),(y.default.isGroup(n)||y.default.isStatusV3(n))&&(null==r&&(!0===t.fromMe?r=i:null!=e.participant&&(r=(0,p.decodeJid)(e.participant))),s=s||r);try{return{msgKey:new g.default({fromMe:(0,a.default)(t.fromMe,"key.fromMe"),remote:n,id:(0,a.default)(t.id,"key.id"),participant:r}),author:s}}catch(e){__LOG__(3)`drop: cannot create MsgKey: ${e.stack}`}}function I(e,t){if(null==e.messageStubType)return;const n=A.WebMessageInfo$StubType;switch(e.messageStubType){case n.REVOKE:{t.type="revoked",t.subtype="sender";const n=e.messageStubParameters[0];var r;if(null!=n)t.protocolMessageKey=null===(r=v(e,(0,i.default)((0,i.default)({},e.key),{},{id:n})))||void 0===r?void 0:r.msgKey;return t}case n.CIPHERTEXT:return t.type="ciphertext",t;case n.OVERSIZED:return t.type="oversized",t;case n.FUTUREPROOF:return t.subtype="phone",t;default:return T(e,t)}}function T(e,t){var n,r,i,o;if(null==e.messageStubType)return;const a=A.WebMessageInfo$StubType;if(t.type="notification_template",t.templateParams=Array.isArray(e.messageStubParameters)?e.messageStubParameters.map((t=>e.messageStubType===a.GROUP_CREATE||e.messageStubType===a.GROUP_CHANGE_SUBJECT?t:(0,p.decodeJid)(t))):void 0,null==e.messageStubType)return t.templateParams=void 0,t;switch(e.messageStubType){case a.NON_VERIFIED_TRANSITION:t.subtype="non_verified_transition";break;case a.UNVERIFIED_TRANSITION:t.subtype="unverified_transition";break;case a.VERIFIED_TRANSITION:t.subtype="verified_transition";break;case a.VERIFIED_LOW_UNKNOWN:t.subtype="verified_low_unknown";break;case a.VERIFIED_HIGH:t.subtype="verified_high";break;case a.VERIFIED_INITIAL_UNKNOWN:t.subtype="verified_initial_unknown";break;case a.VERIFIED_INITIAL_LOW:t.subtype="verified_initial_low";break;case a.VERIFIED_INITIAL_HIGH:t.subtype="verified_initial_high";break;case a.VERIFIED_TRANSITION_ANY_TO_NONE:t.subtype="verified_transition_any_to_none";break;case a.VERIFIED_TRANSITION_ANY_TO_HIGH:t.subtype="verified_transition_any_to_high";break;case a.VERIFIED_TRANSITION_HIGH_TO_LOW:t.subtype="verified_transition_high_to_low";break;case a.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:t.subtype="verified_transition_high_to_unknown";break;case a.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:t.subtype="verified_transition_unknown_to_low";break;case a.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:t.subtype="verified_transition_low_to_unknown";break;case a.VERIFIED_TRANSITION_NONE_TO_LOW:t.subtype="verified_transition_none_to_low";break;case a.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:t.subtype="verified_transition_none_to_unknown";break;case a.GROUP_CREATE:t.type="gp2",t.subtype="create",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.REPORT_TO_ADMIN_ENABLED_STATUS:t.type="gp2",t.subtype="allow_admin_reports";break;case a.GROUP_DELETE:t.type="gp2",t.subtype="delete",t.templateParams=void 0;break;case a.GROUP_CHANGE_SUBJECT:t.type="gp2",t.subtype="subject",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.GROUP_CHANGE_ICON:t.type="gp2",t.subtype="picture",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.GROUP_CHANGE_INVITE_LINK:t.type="gp2",t.subtype="revoke_invite";break;case a.GROUP_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="description",t.body=t.templateParams[0];break;case a.GROUP_CHANGE_RESTRICT:t.type="gp2",t.subtype="restrict",t.body=t.templateParams[0];break;case a.GROUP_CHANGE_ANNOUNCE:t.type="gp2",t.subtype="announce",t.body=t.templateParams[0];break;case a.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:t.type="gp2",t.subtype="no_frequently_forwarded",t.body=t.templateParams[0];break;case a.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:t.type="gp2",t.subtype="announce_msg_bounce",t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD:t.type="gp2",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0,Array.isArray(t.recipients)&&1===t.recipients.length&&t.author===t.recipients[0]&&(t.author=void 0);break;case a.GROUP_PARTICIPANT_REMOVE:t.type="gp2",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_INVITE:t.type="gp2",t.subtype="invite",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_LEAVE:t.type="gp2",t.subtype="leave",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_CHANGE_NUMBER:t.type="gp2",t.subtype="modify",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_V4_ADD_INVITE_SENT:t.type="gp2",t.subtype="v4_add_invite_sent",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:t.type="gp2",t.subtype="v4_add_invite_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_INVITE_LINK_GROWTH_LOCKED:t.type="gp2",t.subtype="true"===t.templateParams[0]?"growth_locked":"growth_unlocked",t.body="invite",t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_LINKED_GROUP_JOIN:t.type="gp2",t.subtype="linked_group_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_CREATE:t.type="broadcast_notification",t.subtype="create",t.body=t.templateParams[0]||"0",t.templateParams=void 0;break;case a.BROADCAST_ADD:t.type="broadcast_notification",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_REMOVE:t.type="broadcast_notification",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GENERIC_NOTIFICATION:t.type="notification",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_CHANGED:t.type="e2e_notification",t.subtype="identity",t.body=t.templateParams[0]instanceof y.default?t.templateParams[0].toString():t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_UNAVAILABLE:t.type="e2e_notification",t.subtype="e2e_identity_unavailable";break;case a.CHAT_PSA:t.type="e2e_notification",t.subtype="chat_psa";break;case a.E2E_DEVICE_CHANGED:t.type="e2e_notification",t.subtype="device",t.body=t.templateParams[0]instanceof y.default?t.templateParams[0].toString():t.templateParams[0],t.devicesAdded=parseInt(t.templateParams[1],10),t.devicesRemoved=parseInt(t.templateParams[2],10),t.templateParams=void 0;break;case a.E2E_ENCRYPTED:t.type="e2e_notification",t.subtype="encrypt";break;case a.E2E_ENCRYPTED_NOW:t.type="e2e_notification",t.subtype="encrypt_now";break;case a.CALL_MISSED_VOICE:t.type="call_log",t.subtype="miss";break;case a.CALL_MISSED_VIDEO:t.type="call_log",t.subtype="miss_video";break;case a.CALL_MISSED_GROUP_VOICE:t.type="call_log",t.subtype="miss_group";break;case a.CALL_MISSED_GROUP_VIDEO:t.type="call_log",t.subtype="miss_group_video";break;case a.SILENCED_UNKNOWN_CALLER_AUDIO:case a.SILENCED_UNKNOWN_CALLER_VIDEO:t.type="call_log",t.subtype="silence";break;case a.INDIVIDUAL_CHANGE_NUMBER:t.subtype="change_number";break;case a.SENDER_INVITE:t.subtype="sender_invite";break;case a.RECEIVER_INVITE:t.subtype="receiver_invite";break;case a.MASKED_THREAD_CREATED:t.subtype="masked_thread_created";break;case a.CAG_MASKED_THREAD_CREATED:t.subtype="cag_masked_thread_created";break;case a.CHANGE_EPHEMERAL_SETTING:t.type="gp2",t.subtype="ephemeral",t.author=t.templateParams[1];break;case a.PAYMENT_CIPHERTEXT:if(t.type="payment",t.subtype="ciphertext",null!=e.paymentInfo){const n=(0,p.parseMsgPaymentInfo)(e.paymentInfo);t.paymentStatus=n.paymentStatus,t.paymentTxnStatus=n.paymentTxnStatus,t.paymentCurrency=n.paymentCurrency,t.paymentAmount1000=n.paymentAmount1000,t.paymentMessageReceiverJid=n.paymentMessageReceiverJid,t.paymentExpiryTimestamp=n.paymentExpiryTimestamp,t.paymentTransactionTimestamp=n.paymentTransactionTimestamp}break;case a.PAYMENT_FUTUREPROOF:if(t.type="payment",t.subtype="futureproof",null!=e.paymentInfo){const n=(0,p.parseMsgPaymentInfo)(e.paymentInfo);t.paymentStatus=n.paymentStatus,t.paymentTxnStatus=n.paymentTxnStatus,t.paymentCurrency=n.paymentCurrency,t.paymentAmount1000=n.paymentAmount1000,t.paymentMessageReceiverJid=n.paymentMessageReceiverJid,t.paymentExpiryTimestamp=n.paymentExpiryTimestamp,t.paymentTransactionTimestamp=n.paymentTransactionTimestamp}break;case a.PAYMENT_ACTION_REQUEST_CANCELLED:t.subtype="payment_transaction_request_cancelled";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:t.subtype="payment_transaction_status_update_failed";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:t.subtype="payment_transaction_status_update_refunded";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:t.subtype="payment_transaction_status_update_refund_failed";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:t.subtype="payment_transaction_status_receiver_pending_setup";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:t.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case a.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:t.subtype="payment_action_account_setup_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:t.subtype="payment_action_send_payment_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:t.subtype="payment_action_send_payment_invitation";break;case a.PAYMENT_ACTION_REQUEST_DECLINED:t.subtype="payment_action_request_declined";break;case a.PAYMENT_ACTION_REQUEST_EXPIRED:t.subtype="payment_action_request_expired";break;case a.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:t.subtype="biz_verified_transition_top_to_bottom";break;case a.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:t.subtype="biz_verified_transition_bottom_to_top";break;case a.BIZ_INTRO_TOP:t.subtype="biz_intro_top";break;case a.BIZ_INTRO_BOTTOM:t.subtype="biz_intro_bottom";break;case a.BIZ_NAME_CHANGE:t.subtype="biz_name_change";break;case a.BIZ_MOVE_TO_CONSUMER_APP:t.subtype="biz_move_to_consumer_app";break;case a.BIZ_TWO_TIER_MIGRATION_TOP:t.subtype="biz_two_tier_migration_top";break;case a.BIZ_TWO_TIER_MIGRATION_BOTTOM:t.subtype="biz_two_tier_migration_bottom";break;case a.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:t.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case a.BLUE_MSG_BSP_FB_TO_SELF_FB:t.subtype="blue_msg_bsp_fb_to_self_fb";break;case a.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_fb_to_self_premise";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_unverified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_premise_to_self_premise";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:t.subtype="blue_msg_self_fb_to_bsp_premise";break;case a.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:t.subtype="blue_msg_self_fb_to_self_premise";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED:t.subtype="blue_msg_self_fb_unverified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED:t.subtype="blue_msg_self_fb_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:t.subtype="blue_msg_self_premise_to_bsp_premise";break;case a.BLUE_MSG_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_premise_verified";break;case a.BLUE_MSG_TO_BSP_FB:t.subtype="blue_msg_to_bsp_fb";break;case a.BLUE_MSG_TO_CONSUMER:t.subtype="blue_msg_to_consumer";break;case a.BLUE_MSG_TO_SELF_FB:t.subtype="blue_msg_to_self_fb";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_unverified_to_self_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_VERIFIED:t.subtype="blue_msg_unverified_to_verified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_self_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_UNVERIFIED:t.subtype="blue_msg_verified_to_unverified";break;case a.BIZ_PRIVACY_MODE_INIT_FB:t.subtype="biz_privacy_mode_init_fb",(null===(n=t.id)||void 0===n||null===(r=n.remote)||void 0===r?void 0:r.isBot())&&(t.subtype="bot_init");break;case a.BIZ_PRIVACY_MODE_INIT_BSP:t.subtype="biz_privacy_mode_init_bsp";break;case a.BIZ_PRIVACY_MODE_TO_FB:t.subtype="biz_privacy_mode_to_fb",(null===(i=t.id)||void 0===i||null===(o=i.remote)||void 0===o?void 0:o.isBot())&&(t.subtype="bot_init");break;case a.BIZ_PRIVACY_MODE_TO_BSP:t.subtype="biz_privacy_mode_to_bsp";break;case a.DISAPPEARING_MODE:t.subtype="disappearing_mode";break;case a.BLOCK_CONTACT:t.subtype="block_contact";break;case a.ADMIN_REVOKE:{var u;t.type="revoked",t.subtype="admin",t.revokeSender=t.templateParams[1]instanceof y.default?t.templateParams[1]:void 0,t.revokeSender||__LOG__(2)`ProtocolParser: admin revoke came without admin JID`;const n=t.templateParams[0];t.protocolMessageKey=null===(u=v(e,{remoteJid:e.key.remoteJid,fromMe:(0,E.isMeAccount)(t.from),id:n,participant:e.key.participant}))||void 0===u?void 0:u.msgKey,t.templateParams=void 0;break}case a.COMMUNITY_LINK_PARENT_GROUP:t.type="gp2",t.subtype="parent_group_link";break;case a.COMMUNITY_LINK_SIBLING_GROUP:t.type="gp2",t.subtype="sibling_group_link";break;case a.COMMUNITY_LINK_SUB_GROUP:t.type="gp2",t.subtype="sub_group_link";break;case a.COMMUNITY_CREATE:t.type="gp2",t.subtype="community_create";break;case a.COMMUNITY_UNLINK_PARENT_GROUP:t.type="gp2",t.subtype="parent_group_unlink";break;case a.INTEGRITY_UNLINK_PARENT_GROUP:t.type="gp2",t.subtype="integrity_parent_group_unlink";break;case a.COMMUNITY_UNLINK_SIBLING_GROUP:t.type="gp2",t.subtype="sibling_group_unlink";break;case a.COMMUNITY_UNLINK_SUB_GROUP:t.type="gp2",t.subtype="sub_group_unlink";break;case a.COMMUNITY_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="linked_group_promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.COMMUNITY_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="linked_group_demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.EPHEMERAL_KEEP_IN_CHAT:t.type="gp2",t.subtype="ephemeral_keep_in_chat";break;case a.GROUP_MEMBERSHIP_JOIN_APPROVAL_MODE:t.type="gp2",t.subtype="membership_approval_mode";break;case a.GROUP_MEMBER_ADD_MODE:if(!(0,s.getABPropConfigValue)("web_anyone_can_add_group_setting_enabled")){t.templateParams=void 0;break}t.type="gp2",t.subtype="member_add_mode";break;case a.GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST_NON_ADMIN_ADD:t.type="gp2",t.recipients=t.templateParams,t.subtype="created_membership_requests";break;case a.GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST:t.type="gp2",t.subtype="membership_approval_request";break;case a.COMMUNITY_LINK_PARENT_GROUP_MEMBERSHIP_APPROVAL:t.type="gp2",t.subtype="parent_group_link_membership_approval";break;case a.GROUP_PARTICIPANT_JOINED_GROUP_AND_PARENT_GROUP:t.type="gp2",t.subtype="auto_add";break;case a.COMMUNITY_PARENT_GROUP_DELETED:t.type="gp2",t.subtype="delete_parent_group";break;case a.BIZ_CHAT_ASSIGNMENT:t.subtype="chat_assignment";break;case a.BIZ_CHAT_ASSIGNMENT_UNASSIGN:t.subtype="chat_assignment_unassign";break;case a.COMMUNITY_PARENT_GROUP_SUBJECT_CHANGED:t.type="gp2",t.subtype="subject",t.body=t.templateParams[1];break;case a.CAG_INVITE_AUTO_ADD:t.type="gp2",t.subtype="invite_auto_add",t.recipients=[(0,E.getMaybeMeUser)()];break;case a.CAG_INVITE_AUTO_JOINED:t.type="gp2",t.subtype="invite_auto_add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.COMMUNITY_PARTICIPANT_ADD_RICH:t.type="gp2",t.subtype="community_participant_add_rich";break;case a.SUB_GROUP_PARTICIPANT_ADD_RICH:t.type="gp2",t.subtype="sub_group_participant_add_rich";break;case a.SUB_GROUP_INVITE_RICH:t.type="gp2",t.subtype="sub_group_invite_rich",t.author=void 0;break;case a.COMMUNITY_INVITE_AUTO_ADD_RICH:t.type="gp2",t.subtype="community_invite_auto_add_rich",t.author=void 0;break;case a.COMMUNITY_INVITE_RICH:t.type="gp2",t.subtype="community_invite_rich",t.author=void 0;break;case a.COMMUNITY_LINK_PARENT_GROUP_RICH:t.type="gp2",t.subtype="community_link_parent_group_rich";break;case a.COMMUNITY_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="parent_group_description",t.body=t.templateParams[0];break;case a.PINNED_MESSAGE_IN_CHAT:t.type="pinned_message";break;case a.COMMUNITY_ALLOW_MEMBER_ADDED_GROUPS:t.type="gp2",t.subtype="allow_non_admin_sub_group_creation";break;case a.EMPTY_SUBGROUP_CREATE:t.type="gp2",t.subtype="empty_subgroup_create";break;case a.SUGGESTED_SUBGROUP_ANNOUNCE:t.type="gp2",t.subtype="created_subgroup_suggestion";break;case a.SUBGROUP_ADMIN_TRIGGERED_AUTO_ADD_RICH:t.type="gp2",t.subtype="subgroup_admin_triggered_auto_add";break;case a.GENERAL_CHAT_ADD:t.type="gp2",t.subtype="general_chat_add";break;case a.GENERAL_CHAT_AUTO_ADD_DISABLED:t.type="gp2",t.subtype="general_chat_auto_add_disabled";break;case a.BIZ_BOT_1P_MESSAGING_ENABLED:t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="biz_bot_1p_disclosure";break;case a.BIZ_BOT_3P_MESSAGING_ENABLED:t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="biz_bot_3p_disclosure";break;case a.CHANGE_USERNAME:t.subtype="change_username";break;case a.BIZ_COEX_PRIVACY_INIT_SELF:if(!(0,l.bizHostedDevicesEnabled)()){t.templateParams=void 0;break}t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="biz_me_account_type_is_hosted";break;case a.BIZ_COEX_PRIVACY_TRANSITION_SELF:if(!(0,l.bizHostedDevicesEnabled)()){t.templateParams=void 0;break}t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="biz_me_account_type_is_hosted_transition";break;case a.BIZ_COEX_PRIVACY_INIT:if(!(0,l.bizHostedDevicesEnabled)()){t.templateParams=void 0;break}t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="biz_account_type_is_hosted";break;case a.BIZ_COEX_PRIVACY_TRANSITION:if(!(0,l.bizHostedDevicesEnabled)()){t.templateParams=void 0;break}t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="biz_account_type_changed_to_hosted";break;case a.SUPPORT_AI_EDUCATION:t.type=h.MSG_TYPE.NOTIFICATION_TEMPLATE,t.subtype="saga_init";break;default:t.templateParams=void 0}return t}},98458:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearDeviceRecordForIdentityChange=I,t.handleNewIdentity=function(){return v.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=r(n(49619)),s=n(31919),l=n(97421),u=n(42247),c=n(97183),d=n(41404),p=n(32080),f=n(45218),_=n(53098),g=(r(n(91262)),n(12987)),h=n(5707),A=n(74557),m=n(75968),E=n(59266),y=n(86031),S=n(51017);function v(){return(v=(0,i.default)((function*(e){var t;const r=(0,S.widFromSignalAddress)(e),i=null!==(t=r.device)&&void 0!==t?t:o.DEFAULT_DEVICE_ID,a=(0,S.toUserWid)(r);if(i===o.DEFAULT_DEVICE_ID){const e=n(86584).addSecurityCodeChangedNotifications;yield I(a),yield e(a),(0,y.sendTcTokenWhenDeviceIdentityChange)(a)}else yield(0,s.createAndStoreDeviceNotifications)(a,[i],[i])}))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=[o.DEFAULT_DEVICE_ID],i=[o.DEFAULT_DEVICE_ID];let s=!1;if(t)m.OfflinePendingDeviceCache.addOfflinePendingDevice(String(e),null),yield(0,A.getStorage)().lock(["participant"],(()=>(0,l.updateGroupParticipantsInTransaction)(e,i,r)));else{const t=yield(0,c.getDeviceRecord)(e);t&&!t.deleted&&(t.devices.forEach((e=>{e.id!==o.DEFAULT_DEVICE_ID&&r.push(e.id)})),(0,d.bizHostedDevicesEnabled)()&&t.advAccountType===E.ADVEncryptionType.HOSTED&&(s=!0));const m=n(74600).Session;if(Promise.all(r.map((t=>t===o.DEFAULT_DEVICE_ID?Promise.resolve():m.deleteRemoteInfo((0,S.createDeviceWidFromUserAndDevice)(e.user,e.server,t))))),yield Promise.all([(0,A.getStorage)().lock(["participant"],(()=>(0,l.updateGroupParticipantsInTransaction)(e,i,r))),(0,c.createOrReplaceDeviceRecord)({id:(0,_.createDeviceListPK)(e),deleted:!0})]),(0,d.bizHostedDevicesEnabled)()&&!0===s){yield(0,u.updateContactAdvHostedType)(e,E.ADVEncryptionType.E2EE);const t=(0,f.genNotificationMsg)(e,{type:"e2e_notification",subtype:"encrypt_now",templateParams:[]});yield(0,h.handleSingleMsg)((0,a.default)(t.from,"fields.from"),t,"bizStateChangeNotification",g.MessageOverwriteOption.NO_OVERWRITE),(0,p.triggerUsyncForCoexUpdate)(e)}}}))).apply(this,arguments)}},31852:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkApplyDeviceUpdate=function(){return P.apply(this,arguments)},t.clearDeviceRecord=function(){return M.apply(this,arguments)},t.getAdvAccountTypeIfChanged=b;var i=r(n(81109)),o=r(n(48926)),a=r(n(91966)),s=n(44037),l=n(7934),u=n(31919),c=n(97421),d=n(42247),p=n(97183),f=n(63439),_=n(1619),g=n(41404),h=n(32080),A=n(66236),m=n(4489),E=n(53098),y=n(91360),S=n(59266),v=n(3885),I=n(51017),T=r(n(89482));function b(e,t){if((0,g.bizHostedDevicesEnabled)()){if(null==e)return t===S.ADVEncryptionType.HOSTED?t:null;switch(e){case S.ADVEncryptionType.HOSTED:return t===S.ADVEncryptionType.E2EE?t:null;case S.ADVEncryptionType.E2EE:return t===S.ADVEncryptionType.HOSTED?t:null}}if(t===S.ADVEncryptionType.HOSTED)throw(0,T.default)("Unexpected account type");return null}function M(){return(M=(0,o.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;yield Promise.all(t.filter((e=>e.id!==s.DEFAULT_DEVICE_ID)).map((t=>R((0,I.createDeviceWidFromUserAndDevice)(e.user,e.server,t.id)))));const a=[],l=t.map((e=>e.id)).filter((e=>e!==s.DEFAULT_DEVICE_ID)),u=b(r,i),{encryptedNotifications:_,chatIds:h}=yield C([{wid:e,added:a,removed:l,isNewRecord:!1,newAdvAccountType:u}],n,!0);yield(0,f.getDeviceUpdateLock)((0,o.default)((function*(){const t=_.length>0?(0,m.storeEncryptedDBMessages)(_,h,!1):Promise.resolve(),n=(0,c.updateGroupParticipantsInTransaction)(e,a,l),r={id:(0,E.createDeviceListPK)(e),deleted:!0};(0,g.bizHostedDevicesEnabled)()&&u===S.ADVEncryptionType.HOSTED&&(r.deletedChangedToHost=!0);const i=(0,p.createOrReplaceDeviceRecord)(r).catch((()=>{throw __LOG__(4,!0,new Error,!0)`remove from device list table failed`,SEND_LOGS("remove from device list table failed when clearing device record"),(0,T.default)("remove from device list table failed")}));let o=Promise.resolve();(0,g.bizHostedDevicesEnabled)()&&null!=u&&(o=(0,d.updateContactAdvHostedType)(e,u)),yield Promise.all([t,n,i,o])})),_.length>0,!1,null!=u)}))).apply(this,arguments)}function P(){return(P=(0,o.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],r=[];let i=!1;e.forEach((e=>{let{wid:t,update:o,currentRecord:l}=e;const{devices:u}=o,c=u.map((e=>e.id)),d=l&&!l.deleted?l.devices.map((e=>e.id)):[],p=(0,a.default)(c,d).filter((e=>e!==s.DEFAULT_DEVICE_ID)),f=(0,a.default)(d,c).filter((e=>e!==s.DEFAULT_DEVICE_ID)),_=(0,g.bizHostedDevicesEnabled)()?b(null==l?void 0:l.advAccountType,null==o?void 0:o.advAccountType):null;n.push({wid:t,added:p,removed:f,isNewRecord:null==l,newAdvAccountType:_}),f.forEach((e=>{r.push((0,I.createDeviceWidFromUserAndDevice)(t.user,t.server,e))})),(0,E.createDeviceListPK)(t)===(0,E.createDeviceListPK)((0,v.getMeUser)())&&f.length>0&&(i=!0)}));const{encryptedNotifications:u,chatIds:_}=yield C(n,t,t);Promise.all(r.map((e=>R(e))));const h=(0,g.bizHostedDevicesEnabled)()&&(null==u?void 0:u.length)>0;yield(0,f.getDeviceUpdateLock)((0,o.default)((function*(){const t=u.length>0?(0,m.storeEncryptedDBMessages)(u,_,!1):Promise.resolve(),r=(0,c.bulkUpdateGroupParticipantsInTransaction)(n),o=(0,p.bulkCreateOrReplaceDeviceRecord)(e.map((e=>e.update))).catch((()=>{throw __LOG__(4,!0,new Error,!0)`bulkCreateOrReplace into device list table failed`,SEND_LOGS("bulkCreateOrReplace into device list table failed when applying device update"),(0,T.default)("bulkCreateOrReplace into device list table failed")})),a=i?o.then((()=>(0,l.updateMissingKeyDevices)().catch((e=>{__LOG__(3)`syncd: updateMissingKeyDevices failed with error:
${e}`})))):Promise.resolve(),s=[];(0,g.bizHostedDevicesEnabled)()&&h&&n.forEach((e=>{let{wid:t,newAdvAccountType:n}=e;null!=n&&s.push((0,d.updateContactAdvHostedType)(t,n))})),yield Promise.all([t,r,o,a,...s])})),u.length>0,i,h)}))).apply(this,arguments)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,o.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,g.bizHostedDevicesEnabled)()&&n,{notifications:i,chatIds:o}=!0===r?yield(0,u.bulkGenerateDeviceAndAdvAccountTypeChangeNotifications)(e):yield(0,u.bulkGenerateDeviceNotifications)(e),a=r&&i.some((e=>(0,h.isCoexSystemMsgType)(e.subtype)));if(!t||a){const e=yield(0,A.encryptMultipleDBMsgs)(i);return w(i),{chatIds:o,encryptedNotifications:e}}return(0,y.getMessageCache)().addMessages(i.map((e=>({msg:e}))),!1),{chatIds:[],encryptedNotifications:[]}}))).apply(this,arguments)}function R(){return N.apply(this,arguments)}function N(){return(N=(0,o.default)((function*(e){const{deleteDeviceSenderKey:t,deleteRemoteInfo:r}=n(38353);try{yield Promise.all([r(e),t(e)])}catch(t){__LOG__(2)`handleDevicesNotification: failed to clean the signal info for ${e.user}`}}))).apply(this,arguments)}function w(e){return Promise.all(e.map((e=>(0,_.frontendSendAndReceive)("processMultipleMessages",{chatId:e.from,msgObjs:[(0,i.default)((0,i.default)({},e),{},{recvFresh:!0,isNewMsg:!0})],meta:{add:"after",isHistory:!1},processMessagesOrigin:"updateDeviceTableApi"}))))}},64371:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processKeyBundles=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(74600),s=n(49178),l=n(4830),u=r(n(89482));function c(){return(c=(0,i.default)((function*(e){let t=null,n=0,r=0;const i=[],c=[];if(e.forEach((e=>{e instanceof Error?(__LOG__(3)`establishE2ESession: error: ${e}`,t=e):(null!=e.wid.device&&e.wid.device!==o.DEFAULT_DEVICE_ID?c.push(e):i.push(e),e.key||n++)})),0===i.length&&0===c.length)throw(0,u.default)("establishE2ESession: no keys in the response");try{const e=[...i,...c].map((e=>(0,s.createSignalAddress)(e.wid).toString()));yield(0,l.getPersistSignalProtocolStore)().bulkLoadIdentityKey(e),__LOG__(2)`establishE2ESession: warmed up identity cache: ${e.length} records`}catch(e){__LOG__(3)`establishE2ESession: failed to warm up identity cache: ${e}`}const d=e=>a.Session.createSignalSession(e).then((()=>{r++})).catch((t=>{__LOG__(3,void 0,void 0,!0)`createSignalSession: failed for device ${e.wid} with error ${t}`,SEND_LOGS("createSignalSession-fail")}));if(yield Promise.all(i.map(d)),yield Promise.all(c.map(d)),null!=t)throw t;return{depletedPrekeyCount:n,processedPrekeyCount:r}}))).apply(this,arguments)}},86584:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addSecurityCodeChangedNotifications=function(){return A.apply(this,arguments)},t.generateSecurityCodeChangedNotifications=m;var i=r(n(81109)),o=r(n(48926)),a=n(1619),s=n(45218),l=n(66236),u=n(4489),c=n(91360),d=n(94007),p=n(35872),f=n(23440),_=n(55017),g=n(51017),h=r(n(89482));function A(){return(A=(0,o.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isBot())return;const n=yield m(e);let r=n.notifications;const o=n.chatIds;if(0!==r.length){if(!t){r=r.map((e=>(0,i.default)((0,i.default)({},e),{},{recvFresh:!0,isNewMsg:!0})));for(const e of r)(0,a.frontendSendAndReceive)("processMultipleMessages",{chatId:e.from,msgObjs:[e],meta:{add:"after",isHistory:!1},processMessagesOrigin:"securityCodeApi"});const e=yield(0,l.encryptMultipleDBMsgs)(r);return(0,u.storeEncryptedDBMessages)(e,o,!1)}(0,c.getMessageCache)().addMessages(r.map((e=>({msg:e}))),!1)}}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,o.default)((function*(e){const t={notifications:[],chatIds:[]};if(!(0,_.getGlobalSecurityNotifications)())return t;const n=[];try{const t=yield(0,d.getChatTable)().get(e.toString(),!1);t&&n.push((0,g.createWid)(t.id));const r=yield(0,f.getParticipantTable)().equals(["participants"],String(e)),i=new Map;if(r.length>0){const e=r.map((e=>e.groupId));(yield(0,p.getGroupMetadataTable)().bulkGet(e)).forEach((e=>{null!=e&&i.set(e.id,e)}))}r.forEach((t=>{const r=i.get(t.groupId);!0===Boolean(null==r?void 0:r.defaultSubgroup)&&e.isLid()||n.push((0,g.createWid)(t.groupId))}))}catch(e){throw __LOG__(4,!0,new Error,!0)`get chats failed`,SEND_LOGS("get chats failed when creating device notification"),(0,h.default)("get chats failed")}const r=n.map((t=>(0,s.genSecurityCodeNotificationMsg)(t,e)));return t.notifications=r,t.chatIds=n.map(String),t}))).apply(this,arguments)}},75784:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.msgToBaseMsgInfo=t.msgDataToBaseMsgInfo=void 0;var i=r(n(49619)),o=r(n(89482));t.msgToBaseMsgInfo=e=>{var t;return{id:e.id,from:e.from,to:e.to,type:e.type,t:e.t,ack:e.ack,count:null,author:e.author,notifyName:e.notifyName,invis:null!==(t=e.invis)&&void 0!==t&&t,subtype:e.subtype}};t.msgDataToBaseMsgInfo=e=>{try{return{id:(t=e).id,from:t.from,to:t.to,type:t.type,t:(0,i.default)(t.t,"t"),ack:(0,i.default)(t.ack,"ack"),count:null,author:t.author,notifyName:t.notifyName,invis:null!==(n=t.invis)&&void 0!==n&&n,subtype:t.subtype}}catch(t){throw __LOG__(3,void 0,void 0,!0,["messaging"])`msgData: type:${e.type} error:${t}`,SEND_LOGS("BaseMsgInfo: MsgData doesn't have required fields",1,"messaging"),(0,o.default)("Invalid MsgData object")}var t,n}},67621:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genDebugPlaceholderMsg=function(e,t){return(0,o.default)((0,o.default)({},ie(e)),{},{type:C.MSG_TYPE.DEBUG_PLACEHOLDER,kind:C.MsgKind.DebugPlaceholder,body:t.toString()})},t.genPlaceholderMsg=function(){return ne.apply(this,arguments)},t.generateBaseMsg=ie,t.getDeviceType=ue,t.getFrom=ce,t.messageInfoToKey=le,t.parseMessage=function(){return j.apply(this,arguments)},t.parseProtocolMessage=Y,t.placeholderCheck=te;var i=r(n(6479)),o=r(n(81109)),a=r(n(48926)),s=n(44037),l=r(n(49619)),u=n(29987),c=n(77630),d=n(96193),p=n(41404),f=n(63007),_=n(37653),g=n(28296),h=n(18431),A=n(9545),m=n(5850),E=n(91360),y=n(38564),S=n(9120),v=n(22495),I=n(12987),T=n(44100),b=n(19909),M=r(n(60001)),P=n(97087),C=n(73602),O=n(75784),R=n(90268),N=n(3885),w=n(3729),D=n(59032),L=n(93828),B=r(n(27112)),k=n(51017),G=r(n(89482));const U=["msgProtobuf"],x=["msgProtobuf"],F=["msgProtobuf"],K=["decrypted","reparsing"];function Y(e){var t,n,r,i,o,a;let s,{info:u,msgProtobuf:c,paymentInfo:d,bizInfo:p,msgBotInfo:f}=e;const _=ce(u);if((0,N.isMeAccountNonLid)(_)){if(null!=(null===(t=c.protocolMessage)||void 0===t?void 0:t.historySyncNotification)){const e=(0,h.parseMsgProto)(c,ie(u),"relay",d,void 0,void 0,p);oe(e,f),s={history:(0,l.default)(e.historySyncMetaData,"msg.historySyncMetaData")}}else if(null!=(null===(n=c.protocolMessage)||void 0===n?void 0:n.initialSecurityNotificationSettingSync)){var g;s={securityNotificationEnabled:{isEnabled:null===(g=c.protocolMessage.initialSecurityNotificationSettingSync.securityNotificationEnabled)||void 0===g||g}}}else if(null!=(null===(r=c.protocolMessage)||void 0===r?void 0:r.appStateSyncKeyShare))s={appStateSyncKeyShare:c.protocolMessage.appStateSyncKeyShare};else if(null!=(null===(i=c.protocolMessage)||void 0===i?void 0:i.appStateSyncKeyRequest))s={appStateSyncKeyRequest:c.protocolMessage.appStateSyncKeyRequest};else if(null!=(null===(o=c.protocolMessage)||void 0===o?void 0:o.peerDataOperationRequestResponseMessage)){var A;s={peerDataOperationRequestResponseMessage:null===(A=c.protocolMessage)||void 0===A?void 0:A.peerDataOperationRequestResponseMessage}}else if(null!=(null===(a=c.protocolMessage)||void 0===a?void 0:a.peerDataOperationRequestMessage)){var m;s={peerDataOperationRequestMessage:null===(m=c.protocolMessage)||void 0===m?void 0:m.peerDataOperationRequestMessage}}return s}!function(e){var t,n,r,i,o,a;let s="";null!=(null===(t=e.protocolMessage)||void 0===t?void 0:t.historySyncNotification)?s="historySyncNotification":null!=(null===(n=e.protocolMessage)||void 0===n?void 0:n.initialSecurityNotificationSettingSync)?s="initialSecurityNotificationSettingSync":null!=(null===(r=e.protocolMessage)||void 0===r?void 0:r.appStateSyncKeyRequest)?s="appStateSyncKeyRequest":null!=(null===(i=e.protocolMessage)||void 0===i?void 0:i.appStateSyncKeyShare)?s="appStateSyncKeyShare":null!=(null===(o=e.protocolMessage)||void 0===o?void 0:o.peerDataOperationRequestResponseMessage)?s="peerDataOperationRequestResponseMessage":null!=(null===(a=e.protocolMessage)||void 0===a?void 0:a.peerDataOperationRequestMessage)&&(s="peerDataOperationRequestMessage"),__LOG__(4,void 0,new Error,!0)`protocol message: wid error in type ${s}`,SEND_LOGS("wid error")}(c)}function j(){return(j=(0,a.default)((function*(e){var t,n,r,i,o,a;const{msgProtobuf:s,info:l}=e;if(null!=(null===(t=s.protocolMessage)||void 0===t?void 0:t.historySyncNotification)||null!=(null===(n=s.protocolMessage)||void 0===n?void 0:n.initialSecurityNotificationSettingSync)||null!=(null===(r=s.protocolMessage)||void 0===r?void 0:r.appStateSyncKeyShare)||null!=(null===(i=s.protocolMessage)||void 0===i?void 0:i.appStateSyncKeyRequest)||null!=(null===(o=s.protocolMessage)||void 0===o?void 0:o.peerDataOperationRequestResponseMessage)||null!=(null===(a=s.protocolMessage)||void 0===a?void 0:a.peerDataOperationRequestMessage))return Y({info:l,msgProtobuf:s,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo,hsmInfo:e.hsmInfo});switch(l.type){case I.MESSAGE_TYPE.CHAT:return(0,N.isMeAccount)(l.author)?H(e):J(e);case I.MESSAGE_TYPE.GROUP:return(0,N.isMeAccount)(l.author)&&l.isDirect?H(e):J(e);case I.MESSAGE_TYPE.PEER_BROADCAST:if(e.ciphertextType===d.CiphertextType.Skmsg){if(!l.bclHashValidated)throw(0,G.default)("parseMessage: participants for peer broadcast message is not validated");return J(e)}return $(e);case I.MESSAGE_TYPE.OTHER_BROADCAST:return J(e);case I.MESSAGE_TYPE.DIRECT_PEER_STATUS:return!0===l.isDirect?V(e):$(e);case I.MESSAGE_TYPE.OTHER_STATUS:return J(e);default:throw(0,G.default)("Unrecognized MESSAGE_TYPE")}}))).apply(this,arguments)}function V(){return W.apply(this,arguments)}function W(){return(W=(0,a.default)((function*(e){try{return yield H(e)}catch(t){if(t instanceof v.DeviceSentMessageError){const t=Object.keys(e.msgProtobuf).filter((e=>"$$unknownFieldCount"!==e&&"messageContextInfo"!==e));if(1===t.length&&"senderKeyDistributionMessage"===t[0])return J(e)}throw t}}))).apply(this,arguments)}function H(){return Q.apply(this,arguments)}function Q(){return(Q=(0,a.default)((function*(e){let{msgProtobuf:t}=e,n=(0,i.default)(e,U);const{deviceSentMessage:r}=t;if(null==r)throw new v.DeviceSentMessageError(ue(n.info.author),D.DSM_ERROR.MISSING_DSM);if(null==r.destinationJid)throw new v.DeviceSentMessageError(ue(n.info.author),D.DSM_ERROR.INVALID_DSM);const{destinationJid:a}=r,s=yield X((0,g.unwrapDeviceSentMessage)(t),n);return(0,o.default)({deviceSent:{destination:(0,k.createWid)(a)}},s)}))).apply(this,arguments)}function $(){return q.apply(this,arguments)}function q(){return(q=(0,a.default)((function*(e){let{msgProtobuf:t}=e,n=(0,i.default)(e,x);const{info:r}=n,{deviceSentMessage:a}=t;if(null==a)throw new v.DeviceSentMessageError(ue(r.author),D.DSM_ERROR.MISSING_DSM);if(null==a.phash)throw new v.DeviceSentMessageError(ue(r.author),D.DSM_ERROR.INVALID_DSM);const{phash:s}=a,l=yield X((0,g.unwrapDeviceSentMessage)(t),n);return(0,o.default)({deviceSent:{phash:s,info:r}},l)}))).apply(this,arguments)}function J(){return z.apply(this,arguments)}function z(){return(z=(0,a.default)((function*(e){let{msgProtobuf:t}=e,n=(0,i.default)(e,F);if(null!=t.deviceSentMessage)throw new v.DeviceSentMessageError(ue(n.info.author),D.DSM_ERROR.INVALID_SENDER);const r=yield X(t,n);return(0,o.default)({deviceSent:null},r)}))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.default)((function*(e,t){var n,r,a,s;let{info:c,paymentInfo:d,bizInfo:p,hidePlaceholder:f,processDecryptedProtoParams:_,hsmInfo:g,msgBotInfo:v,reportingTokenInfo:M}=t;if(null==e)return{senderKey:null,storeMsg:null,renderableMsgs:[]};let P=(0,o.default)({},(0,h.parseMsgProto)(e,ie(c),"relay",d,void 0,void 0,p,c.edit,null==_?void 0:_.rcat,null==_||null===(n=_.msgMeta)||void 0===n?void 0:n.bizSource,null==_?void 0:_.msgMeta));var w,D,L;(oe(P,v,null==_||null===(r=_.msgMeta)||void 0===r?void 0:r.targetSenderJid,null==_||null===(a=_.msgMeta)||void 0===a?void 0:a.targetId),null!=M&&(0,b.isReportingTokenReceivingEnabled)())&&(0,E.getMessageCache)().addAdditionalInfo({type:S.MsgAdditionalInfoType.ReportingTokenInfo,data:{id:P.id.toString(),reportingTag:M.reportingTag,reportingTokenContent:null!=M.reportingToken?(0,T.generateReportingTokenContent)(P):null,version:null!=M.reportingToken?null!==(w=null===(D=e.messageContextInfo)||void 0===D?void 0:D.reportingTokenVersion)&&void 0!==w?w:R.REPORTING_TOKEN_VERSION.DEFAULT:null,ts:(0,u.unixTimeMs)()}});(null!=g&&(P.hsmTag=g.tag,P.hsmCategory=g.category),null!=(null==_||null===(s=_.msgMeta)||void 0===s?void 0:s.bizSource))&&(P.bizSource=null==_||null===(L=_.msgMeta)||void 0===L?void 0:L.bizSource);const B=null!=e.senderKeyDistributionMessage?ee(c,e.senderKeyDistributionMessage):null;if("message_edit"===P.subtype&&"message_edit"!==P.futureproofSubtype&&(yield(0,y.futureproofEditInCAG)(c.chat))){const e=(0,O.msgDataToBaseMsgInfo)(P);P=(0,o.default)({},(0,m.futureproofEdit)(e))}const k=P.type===C.MSG_TYPE.UNKNOWN&&null==B,G=P.type===C.MSG_TYPE.UNKNOWN&&null!=B;let U=null;if(k&&null!=_){const{decrypted:e,reparsing:t}=_,n=(0,i.default)(_,K);P.futureproofParams=n,P.futureproofBuffer=e}if(c.type===I.MESSAGE_TYPE.OTHER_STATUS&&(P.campaignId=c.campaignId,P.campaignDuration=c.campaignDuration),c.type===I.MESSAGE_TYPE.PEER_BROADCAST&&(P.broadcastId=c.chat,P.broadcastParticipants=c.bclParticipants,P.broadcastEphSettings=c.bclEphSettings,U=P),c.type===I.MESSAGE_TYPE.OTHER_BROADCAST){P.broadcastId=c.chat;const e=c.ephSetting,t=P.ephemeralSharedSecret;if(null!=e&&null!=t){const{ephemeralDuration:n,ephemeralSettingTimestamp:r}=yield(0,A.decodeBroadcastEphemeralSetting)(c.chat,c.author.isLid()?(0,l.default)((0,N.getMaybeMeLidUser)(),"getMaybeMeLidUser()"):(0,N.getMeUser)(),c.author,e,t);P.ephemeralDuration=n,P.ephemeralSettingTimestamp=r}}let x=[];const F=P.type===C.MSG_TYPE.UNKNOWN;return G||F&&!0===f&&null==P.futureproofType||(c.type===I.MESSAGE_TYPE.PEER_BROADCAST?x=yield ae(P,c.bclParticipants,c.bclEphSettings):("payment_transaction_request_cancelled"!==P.subtype&&"payment_action_request_declined"!==P.subtype||null!=P.paymentRequestMessageKey)&&(x=[P])),{senderKey:B,storeMsg:U,renderableMsgs:x}}))).apply(this,arguments)}function ee(e,t){if(!e.chat.isGroup()&&!e.chat.isBroadcast())throw(0,G.default)("should not have senderkey");const{groupId:n,axolotlSenderKeyDistributionMessage:r}=t;if(null==n||e.chat.toString({legacy:!0})!==n)throw(0,G.default)(`senderKeyDistributionMessage: from ${e.chat.toString()} mismatched to ${n||"null"}`);if(!r)throw(0,G.default)(`senderKeyDistributionMessage: from ${e.author.toString()} has no content`);return{groupId:n,key:r}}function te(e){return(e.edit!==c.EDIT_ATTR.SENDER_REVOKE||e.type===I.MESSAGE_TYPE.PEER_BROADCAST)&&e.edit!==c.EDIT_ATTR.ADMIN_REVOKE}function ne(){return(ne=(0,a.default)((function*(e,t,n){if(!te(e))return[];let r=null;switch(t){case I.PlaceholderType.E2E:r=void 0;break;case I.PlaceholderType.BOT_UNAVAILABLE_FANOUT:r="bot_unavailable_fanout";break;case I.PlaceholderType.HOSTED_UNAVAILABLE_FANOUT:r="hosted_unavailable_fanout";break;default:r="fanout"}const i=(0,o.default)((0,o.default)({},ie(e)),{},{type:C.MSG_TYPE.CIPHERTEXT,kind:C.MsgKind.Ciphertext,subtype:r,e2eSenderType:(0,L.getWamE2eSenderType)(e.author),placeholderAddReason:n,broadcastParticipants:e.type===I.MESSAGE_TYPE.PEER_BROADCAST?e.bclParticipants:void 0,broadcastEphSettings:e.type===I.MESSAGE_TYPE.PEER_BROADCAST?e.bclEphSettings:void 0});return e.type===I.MESSAGE_TYPE.PEER_BROADCAST?((0,_.storeMessages)([i],i.id.remote),e.edit===c.EDIT_ATTR.SENDER_REVOKE?[]:ae(i,e.bclParticipants)):[i]}))).apply(this,arguments)}function re(e,t){return(0,f.isBotMsgParseEnabledForFutureproofOrFullRecv)()&&null!=t.botParticipant?t.botParticipant:!e.fromMe&&B.default.isGroup(e.remote)||B.default.isStatusV3(e.remote)?e.participant:!(0,N.isMeDevice)(t.author)&&(0,N.isMeAccount)(t.author)?t.author:void 0}function ie(e){const t=le(e),n=(0,N.getMeUser)(),r=(0,N.getMaybeMeLidUser)();let i;i=t.fromMe&&B.default.isGroup(t.remote)&&e.author.isLid()&&null!=r?r:n;const o={id:t,from:t.fromMe?i:t.remote,to:t.fromMe?t.remote:n,type:C.MSG_TYPE.UNKNOWN,t:e.ts||0,ack:(0,P.isNoteToSelf)(t)?c.ACK.READ:c.ACK.SENT,author:re(t,e),notifyName:e.pushname||"",invis:!1,count:e.count};return(0,p.bizHostedDevicesEnabled)()&&!0===e.hostedBizEncStateMismatch&&(o.hostedBizEncStateMismatch=!0),(0,p.bizHostedDevicesEnabled)()&&!0===e.senderOrRecipientAccountTypeHosted&&(o.senderOrRecipientAccountTypeHosted=!0),o}function oe(e,t,n,r){null!=t&&(0,f.isBotMsgParseEnabledForFutureproofOrFullRecv)()&&Object.assign(e,{botEditTargetId:t.botEditTargetId,botEditType:t.botEditType,bizBotType:t.bizBotType,botTargetSenderJid:n,botResponseTargetId:r})}function ae(){return se.apply(this,arguments)}function se(){return(se=(0,a.default)((function*(e,t,n){return(yield Promise.all(t.map(function(){var t=(0,a.default)((function*(t){let r,i,a;try{r=new M.default({remote:t,fromMe:!0,id:e.id.id})}catch(e){return __LOG__(3)`drop: cannot create MsgKey: ${e.stack}`,null}const s=n?n[t.toString()]:null,u=e.ephemeralSharedSecret,c=e.broadcastId;null!=c&&null!=s&&null!=u&&({ephemeralDuration:i,ephemeralSettingTimestamp:a}=yield(0,A.decodeBroadcastEphemeralSetting)(c,t,t.isLid()?(0,l.default)((0,N.getMaybeMeLidUser)(),"getMaybeMeLidUser()"):(0,N.getMeUser)(),s,u));return(0,o.default)((0,o.default)({},e),{},{id:r,from:(0,N.getMeUser)(),to:t,broadcast:!0,ephemeralDuration:i,ephemeralSettingTimestamp:a,protocolMessageKey:null==e.protocolMessageKey?void 0:new M.default({remote:t,fromMe:!0,id:e.protocolMessageKey.id})})}));return function(){return t.apply(this,arguments)}}()))).filter(Boolean)}))).apply(this,arguments)}function le(e){return e.type===I.MESSAGE_TYPE.OTHER_BROADCAST?new M.default({remote:(0,k.toUserWid)(e.author),fromMe:!1,id:e.externalId}):e.type===I.MESSAGE_TYPE.CHAT?(0,f.isBotMsgParseEnabledForFutureproofOrFullRecv)()&&null!=e.botParticipant?new M.default({remote:e.chat,fromMe:(0,N.isMeAccount)(e.author),id:e.externalId,participant:(0,k.toUserWid)((0,l.default)(e.botParticipant,"info.botParticipant"))}):new M.default({remote:e.chat,fromMe:(0,N.isMeAccount)(e.author),id:e.externalId}):new M.default({remote:e.chat,fromMe:(0,N.isMeAccount)(e.author),participant:(0,k.toUserWid)(e.author),id:e.externalId})}function ue(e){return null==e.device||e.device===s.DEFAULT_DEVICE_ID?w.DEVICE_TYPE.PRIMARY:w.DEVICE_TYPE.COMPANION}function ce(e){return e.type===I.MESSAGE_TYPE.CHAT?e.author:e.chat}},98267:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptE2EPayload=function(){return _.apply(this,arguments)};var i=r(n(48926)),o=n(47648),a=n(96193),s=n(12987),l=n(67621),u=n(69626),c=n(21381),d=n(65642),p=n(48362),f=n(4830);function _(){return(_=(0,i.default)((function*(e,t){const{bizInfo:n,msgInfo:r,paymentInfo:i,deviceIdentity:a,encs:_,msgMeta:h,rcat:A,hsmInfo:m,msgBotInfo:E,reportingTokenInfo:y}=e,S=(0,l.getFrom)(r);if(g(_,r),null!=r.author.device&&0!==r.author.device){if(!(yield(0,o.validateADVwithEncs)(r.author,a,_,!!r.offline)))return __LOG__(3,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${r.externalId}, validateADVIdentity failed`,{result:s.E2EProcessResult.RETRY,retryCount:_[0].retryCount,retryReason:p.RetryReason.AdvFailure}}let v=!1;const I=(0,c.createDecryptionHandler)(e);for(const o of _)try{if(!I.canDecryptNext(o))continue;const a=yield(0,u.decryptEnc)(o,S,r.author,e);__LOG__(2,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${r.externalId} e2eType:${o.e2eType} done`,(0,d.postSuccessE2eMessageRecvMetric)({enc:o,from:S,msgMeta:h,msgInfo:r,msgBotInfo:E,error:null});const s={retryCount:o.retryCount,e2eType:o.e2eType,encMediaType:o.encMediaType,hideFail:o.hideFail};(yield t({decrypted:a,info:r,paymentInfo:i,e2eInfo:s,bizInfo:n,hsmInfo:m,msgMeta:h,rcat:A,msgBotInfo:E,reportingTokenInfo:y})).hasInactiveMsg&&(v=!0),__LOG__(2,void 0,void 0,void 0,["messaging"])`processDecryptedProto: msgId::${r.externalId} e2eType:${o.e2eType} done`}catch(e){I.handleError(o,e)}return yield(0,f.getSignalProtocolStore)().flushBufferToDiskIfNotMemOnlyMode(),I.getResult(v)}))).apply(this,arguments)}function g(e,t){2===e.length&&e[0].e2eType===a.CiphertextType.Skmsg&&(__LOG__(4,void 0,new Error,!0,["messaging"])`decryptE2EPayload: msgId::${t.externalId} skMsg is out of order`,SEND_LOGS("handleMsg: invalid encs order",.1,"messaging"))}},69626:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEnc=function(e,t,n,r){const{e2eType:u,ciphertext:c}=e;switch(u){case i.CiphertextType.Skmsg:return t.isGroup()||t.isBroadcast()?n?s.Cipher.decryptGroupSignalProto(t,n,c):Promise.reject((0,l.default)(`['messaging'] decryptEnc: receive msg from ${t.toString()} without participant`)):Promise.reject((0,l.default)(`['messaging'] decryptEnc: Can not do skmsg for non group ${t.toString()}`));case i.CiphertextType.Pkmsg:case i.CiphertextType.Msg:{const e=t.isUser()?t:n;return e?s.Cipher.decryptSignalProto(e,u,c):Promise.reject((0,l.default)(`['messaging'] decryptEnc: receive msg from ${t.toString()} without participant`))}case i.CiphertextType.Msmsg:return(0,o.isBotReceiveEnabled)()?(0,a.decryptMsmsgBotMessage)(c,r):Promise.reject((0,l.default)("[messaging] decryptEnc: Msmsg unsupported"))}};var i=n(96193),o=n(63007),a=n(82447),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(74600)),l=r(n(89482));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}},21381:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DecryptionErrorType=void 0,t.createDecryptionHandler=function(e){const t={accessedEncs:new Set,pkOrMsgFailedEnc:null,skMsgFailedEnc:null};return{handleError(n,r){const i=function(e){if(e instanceof d.UnknownDeviceMessageError)return S.UnknownDevice;if(e instanceof y.SignalDecryptionError)return function(e){if("errDuplicateMsg"===e.message)return S.SignalDuplicateMessage;return S.SignalRetryable}(e);if(e instanceof y.SignalMessageCounterError)return S.SignalDuplicateMessage;if(e instanceof d.DeviceSentMessageError)return S.DeviceSentMessage;if(e instanceof d.MessageValidationError)return S.InvalidProtobuf;if(e instanceof c.HsmMismatchError)return S.HsmMismatch;return S.Unknown}(r);n.e2eType===s.CiphertextType.Skmsg?t.skMsgFailedEnc={enc:n,error:r,errorType:i}:t.pkOrMsgFailedEnc={enc:n,error:r,errorType:i},function(e,t){const{msgInfo:n,msgMeta:r,msgBotInfo:i}=e,{enc:o,error:a,errorType:s}=t,l=(0,g.getFrom)(n);switch((0,A.postFailureE2eMessageRecvMetric)({enc:o,from:l,msgMeta:r,msgInfo:n,msgBotInfo:i,error:a instanceof d.MessageValidationError?a:null}),__LOG__(3,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${n.externalId} e2eType:${o.e2eType} error:${a.stack}`,s){case S.SignalDuplicateMessage:break;case S.SignalRetryable:case S.UnknownDevice:break;case S.InvalidProtobuf:a instanceof d.MessageValidationError&&(__LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: e2eType:${o.e2eType} error:${a}`,SEND_LOGS(`handleMsg: ${a.name}`,!0===a.sendLogs?void 0:a.sendLogs,"messaging"));break;case S.DeviceSentMessage:__LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: e2eType:${o.e2eType} infoType:${n.type} isDirect:${n.isDirect} error:${a}`,SEND_LOGS("handleMsg: parse device sent message error",1,"messaging");break;case S.HsmMismatch:__LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: e2eType:${o.e2eType} error:${a}`,SEND_LOGS("handleMsg: hsm mismatch error",1,"messaging");break;case S.Unknown:__LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: e2eType:${o.e2eType} error:${a}`,SEND_LOGS("handleMsg: parse decrypted message error",1,"messaging")}}(e,{enc:n,error:r,errorType:i})},canDecryptNext(e){var n;const r=null===(n=t.pkOrMsgFailedEnc)||void 0===n?void 0:n.errorType;return(null==r||!v.has(r))&&(t.accessedEncs.add(e.e2eType),!0)},getResult:n=>function(){return T.apply(this,arguments)}(e,t,n)}};var i=r(n(48926)),o=n(29987),a=n(83741),s=n(96193),l=n(50055),u=n(12020),c=n(33351),d=n(22495),p=n(52253),f=n(12987),_=n(19909),g=n(67621),h=n(73602),A=n(65642),m=n(17067),E=n(48362),y=n(88515);n(57095);const S=n(76672).Mirrored(["SignalRetryable","SignalDuplicateMessage","UnknownDevice","DeviceSentMessage","InvalidProtobuf","HsmMismatch","Unknown"]);t.DecryptionErrorType=S;const v=new Set([S.SignalRetryable]);function I(e){let{msgInfo:t,encs:n}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{chat:i,ts:a}=t;if(i.isStatusV3()){const e=(0,o.unixTimeWithoutClockSkewCorrection)()-(a+o.DAY_SECONDS),t=e>0;if(t&&r&&2===n.length){const t=(0,o.unixTime)()-(a+o.DAY_SECONDS);__LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: expired status has 2 encs and expired for ${e}s client time or for ${t}s with a clock skew`,SEND_LOGS("handleMsg: expired status multiple encs",.01,"messaging")}return t}return!1}function T(){return(T=(0,i.default)((function*(e,t,n){var r;const i=null!==(r=t.skMsgFailedEnc)&&void 0!==r?r:t.pkOrMsgFailedEnc,o=null!=i&&t.accessedEncs.has(s.CiphertextType.Skmsg)&&null==t.skMsgFailedEnc;if(null==i||o||I(e,!0)&&(0,a.getABPropConfigValue)("web_skip_expired_status_error"))return{result:f.E2EProcessResult.SUCCESS,hasInactiveMsg:n};b(e,t),M(e,t);const{enc:u,error:c,errorType:_}=i;let g;switch((c instanceof y.SignalDecryptionError||c instanceof d.UnknownDeviceMessageError)&&(g=(0,E.getRetryReasonFromError)(c),_!==S.SignalDuplicateMessage&&(u.hideFail||(yield(0,p.processPlaceholderMsg)({type:h.MSG_TYPE.CIPHERTEXT,msgInfo:e.msgInfo,placeholderType:f.PlaceholderType.E2E,placeholderAddReason:(0,l.getPlaceholderAddReason)(c)})))),_){case S.SignalRetryable:case S.UnknownDevice:return{result:f.E2EProcessResult.RETRY,retryCount:u.retryCount,retryReason:g};case S.SignalDuplicateMessage:return{result:f.E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR,failedEnc:u};case S.InvalidProtobuf:case S.DeviceSentMessage:return{result:f.E2EProcessResult.PARSE_VALIDATION_ERROR};case S.HsmMismatch:return{result:f.E2EProcessResult.HSM_MISMATCH};case S.Unknown:return{result:f.E2EProcessResult.PARSE_ERROR}}}))).apply(this,arguments)}function b(e,t){let{skMsgFailedEnc:n,pkOrMsgFailedEnc:r}=t;const{msgInfo:i,msgMeta:o}=e,s=null!=n?n:r;if(null==s)return;const{enc:l,errorType:u,error:c}=s;if(I(e))(0,a.getABPropConfigValue)("web_skip_expired_status_error")||(0,m.postIncomingMessageDropExpired)({msgInfo:i,msgMeta:o,enc:l,error:c instanceof d.MessageValidationError?c:void 0});else switch(u){case S.SignalRetryable:case S.UnknownDevice:case S.HsmMismatch:case S.SignalDuplicateMessage:break;case S.InvalidProtobuf:case S.DeviceSentMessage:(0,m.postIncomingMessageDropInvalidProtobuf)({msgInfo:i,msgMeta:o,enc:l,error:c instanceof d.MessageValidationError?c:void 0});break;case S.Unknown:(0,m.postIncomingMessageDropInvalidStanzaFromDecryptedMessageInfo)({msgInfo:i,msgMeta:o,enc:l})}}function M(e,t){let{skMsgFailedEnc:n,pkOrMsgFailedEnc:r}=t;const i=null!=n?n:r;if(null==i)return;if(!(0,_.isMessageDropPlaceholderEnabled)())return;const{chat:o}=e.msgInfo;if(!o.isUser()&&!o.isGroup())return;if(I(e))return;let a=null;switch(i.errorType){case S.SignalRetryable:case S.SignalDuplicateMessage:case S.UnknownDevice:break;case S.DeviceSentMessage:case S.InvalidProtobuf:a=u.NackReason.InvalidProtobuf;break;case S.HsmMismatch:case S.Unknown:a=u.NackReason.ParsingError}if(null!=a){const t=e.msgInfo.externalId;__LOG__(3,void 0,void 0,void 0,["messaging"])`messageDrop: insert a debug placeholder for ${t}, reason: ${i.errorType}`,(0,p.processPlaceholderMsg)({type:h.MSG_TYPE.DEBUG_PLACEHOLDER,msgInfo:e.msgInfo,nackReason:a})}}},65642:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.postFailureE2eMessageRecvMetric=function(){return A.apply(this,arguments)},t.postSuccessE2eMessageRecvMetric=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(83741),a=n(1619),s=n(50055),l=n(85551),u=n(98051),c=n(33351),d=n(69320),p=n(2775),f=n(93828);function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){let{enc:t,from:n,msgMeta:r,msgInfo:i,msgBotInfo:_,error:g}=e;const h=r.type===c.STANZA_MSG_TYPES.reaction,A=i.chat,m=new l.E2eMessageRecvWamEvent({e2eCiphertextType:(0,s.getMetricE2eCiphertextType)(t.e2eType),e2eCiphertextVersion:s.CIPHERTEXT_VERSION,e2eFailureReason:null==g?void 0:g.e2eFailureReason,e2eSuccessful:!1,messageMediaType:(0,s.getMetricMediaType)({encMediaType:t.encMediaType,msgType:r.type,msgPollType:r.pollType}),retryCount:t.retryCount,editType:(0,s.getMetricEditType)(i.edit),botType:(0,f.getWamBotType)(A,null==_?void 0:_.bizBotType)}),E=(0,s.getMetricE2eDestination)(n);if(E&&(m.e2eDestination=E),(0,o.getABPropConfigValue)("web_extra_lid_group_logging_attributes")&&null!=i.addressingMode&&(m.serverAddressingMode=(0,d.getWamAddressingModeFromString)(i.addressingMode)),A.isGroup()){const e=yield(0,a.frontendSendAndReceive)("getGroupMetadata",{groupWid:A});if(null!=e){const t=e.isIncognitoCag;null!=t&&(m.isLid=t&&h);const n=(0,u.groupTypeToWamEnum)((0,u.getGroupTypeFromGroupMetadata)(e));m.typeOfGroup=n,Object.assign(m,(0,d.getAddressingModeMetricsFromGroupMetadata)(e))}}else m.isLid=A.isLid();return i.author.isBot()&&(i.chat.isBot()?m.agentEngagementType=p.AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:m.agentEngagementType=p.AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED),m}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){const t=yield _(e);t.e2eSuccessful=!0,t.weight=1e3,t.commit()}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){const t=yield _(e);t.e2eSuccessful=!1,t.weight=1,t.commit()}))).apply(this,arguments)}},17067:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.postIncomingMessageDropDBOperationFailed=function(e){S({messageDropReason:A.MESSAGE_DROP_REASON_TYPE.DB_OPERATION_FAILED,stanza:e})},t.postIncomingMessageDropDBOperationFailedForMsgRows=function(e){for(const t of e){const e=(0,l.messageFromDbRow)(t),n=new c.IncomingMessageDropWamEvent({messageDropReason:A.MESSAGE_DROP_REASON_TYPE.DB_OPERATION_FAILED,messageMediaType:(0,E.getWamMediaType)(e)}),r=(0,p.getTo)(e),i=(0,p.getFrom)(e);null!=r&&null!=i&&(r.isStatusV3()?n.e2eDestination=h.E2E_DESTINATION.STATUS:null!=(0,p.getBroadcastId)(e)?n.e2eDestination=h.E2E_DESTINATION.LIST:i.isGroup()?n.e2eDestination=h.E2E_DESTINATION.GROUP:i.isUser()&&(n.e2eDestination=h.E2E_DESTINATION.INDIVIDUAL)),n.commit()}},t.postIncomingMessageDropDuplicateMessage=function(e){v(e,A.MESSAGE_DROP_REASON_TYPE.DUPLICATE_MESSAGE)},t.postIncomingMessageDropExpired=function(e){v(e,A.MESSAGE_DROP_REASON_TYPE.EXPIRED)},t.postIncomingMessageDropInternalError=function(e){S({messageDropReason:A.MESSAGE_DROP_REASON_TYPE.INTERNAL_ERROR,stanza:e})},t.postIncomingMessageDropInvalidHostedCompanionStanza=function(e){S({messageDropReason:A.MESSAGE_DROP_REASON_TYPE.INVALID_HOSTED_COMPANION_STANZA,stanza:e})},t.postIncomingMessageDropInvalidProtobuf=function(e){v(e,A.MESSAGE_DROP_REASON_TYPE.INVALID_PROTOBUF)},t.postIncomingMessageDropInvalidStanza=function(e){S({messageDropReason:A.MESSAGE_DROP_REASON_TYPE.INVALID_STANZA,stanza:e})},t.postIncomingMessageDropInvalidStanzaFromDecryptedMessageInfo=function(e){v(e,A.MESSAGE_DROP_REASON_TYPE.INVALID_STANZA)},t.postIncomingMessageDropOldCounter=function(e){v(e,A.MESSAGE_DROP_REASON_TYPE.RECEIVED_WITH_OLD_COUNTER)},t.postIncomingMessageDropUnknownMessageType=function(e){S({messageDropReason:A.MESSAGE_DROP_REASON_TYPE.UNKNOWN_MESSAGE_TYPE,stanza:e})};var i=r(n(82601)),o=n(77630),a=n(96193),s=n(50055),l=n(74773),u=n(33351),c=n(27856),d=n(15610),p=n(26368),f=n(67621),_=n(2775),g=n(35347),h=n(7356),A=n(26446),m=n(13087),E=n(93828);const y=new i.default("incomingMsgParserForMetric",(e=>{const t={};try{t.type=e.attrEnum("type",u.STANZA_MSG_TYPES)}catch(e){}try{t.pollType=t.type===u.STANZA_MSG_TYPES.poll?e.child("meta").attrEnumOrNullIfUnknown("polltype",u.POLL_TYPES):null}catch(e){}try{var n,r;t.from=(0,d.jidWithTypeToWid)(e.attrJidWithType("from")),(null===(n=t.from)||void 0===n?void 0:n.isUser())?t.author=t.from:(null===(r=t.from)||void 0===r?void 0:r.isGroup())&&(t.author=e.hasAttr("participant")?(0,d.deviceJidToDeviceWid)(e.attrDeviceJid("participant")):null)}catch(e){}try{t.offline=""!==e.attrString("offline")}catch(e){}try{t.edit=e.attrInt("edit")}catch(e){}try{const n=e.attrString("category"),r=(0,E.getWamInvisibleMessageCatgoryType)(n);null!=r&&(t.invisibleMessageCategoryType=r)}catch(e){}const i=e.maybeChild("enc");if(null!=i){try{t.e2eType=i.attrEnumValues("type",a.CiphertextType.members())}catch(e){}try{t.encMediaType=a.EncMediaType.cast(i.maybeAttrString("mediatype"))}catch(e){}try{t.retryCount=i.attrInt("count")}catch(e){}}try{var o;if(t.botType=g.BOT_TYPE.UNKNOWN,null===(o=t.author)||void 0===o?void 0:o.isBot())t.botType=g.BOT_TYPE.METABOT;else{var s;const n=null===(s=e.maybeChild("bot"))||void 0===s?void 0:s.maybeAttrString("biz_bot");"1"===n?t.botType=g.BOT_TYPE.BOT_1P_BIZ:"3"===n&&(t.botType=g.BOT_TYPE.BOT_3P_BIZ)}}catch(e){}return t}));function S(e){var t,n,r,i,a,l,u,d,p,f,g,h,A,S,v;let{messageDropReason:I,stanza:T}=e,b=null;try{b=y.parse(T).success}catch(e){}const M=new c.IncomingMessageDropWamEvent({messageDropReason:I,offline:null!==(t=null===(n=b)||void 0===n?void 0:n.offline)&&void 0!==t&&t,messageMediaType:(0,s.getMetricMediaType)({encMediaType:null===(r=b)||void 0===r?void 0:r.encMediaType,msgType:null===(i=b)||void 0===i?void 0:i.type,msgPollType:null===(a=b)||void 0===a?void 0:a.pollType})});if(null!=(null===(l=b)||void 0===l?void 0:l.from)){const e=(0,s.getMetricE2eDestination)(b.from);null!=e&&(M.e2eDestination=e)}if(null!=(null===(u=b)||void 0===u?void 0:u.author)){const e=(0,E.getWamE2eSenderType)(b.author);null!=e&&(M.e2eSenderType=e)}var P,C,O,R,N;(null!=(null===(d=b)||void 0===d?void 0:d.e2eType)&&(M.e2eCiphertextType=(0,s.getMetricE2eCiphertextType)(b.e2eType)),null!=(null===(p=b)||void 0===p?void 0:p.retryCount)&&(M.retryCount=b.retryCount),(null===(f=b)||void 0===f?void 0:f.edit)===o.EDIT_ATTR.ADMIN_REVOKE?M.revokeType=m.REVOKE_TYPE.ADMIN:(null===(g=b)||void 0===g?void 0:g.edit)===o.EDIT_ATTR.SENDER_REVOKE&&(M.revokeType=m.REVOKE_TYPE.SENDER),null!=(null===(h=b)||void 0===h?void 0:h.from)&&null!=(null===(A=b)||void 0===A?void 0:A.author))&&(!0===(null===(P=b)||void 0===P||null===(C=P.author)||void 0===C?void 0:C.isBot())&&(!0===(null===(O=b)||void 0===O||null===(R=O.from)||void 0===R?void 0:R.isBot())?M.agentEngagementType=_.AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:M.agentEngagementType=_.AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED));(null===(S=b)||void 0===S?void 0:S.botType)&&(M.botType=null===(N=b)||void 0===N?void 0:N.botType);null!=(null===(v=b)||void 0===v?void 0:v.invisibleMessageCategoryType)&&(M.invisibleMessageCategory=b.invisibleMessageCategoryType),M.commit()}function v(e,t){let{msgInfo:n,msgMeta:r,enc:i,error:a}=e;const l=new c.IncomingMessageDropWamEvent({messageDropReason:t,e2eCiphertextType:(0,s.getMetricE2eCiphertextType)(i.e2eType),messageMediaType:(0,s.getMetricMediaType)({encMediaType:i.encMediaType,msgType:r.type,msgPollType:r.pollType}),retryCount:i.retryCount,offline:null!=n.offline,e2eFailureReason:null==a?void 0:a.e2eFailureReason}),u=(0,f.getFrom)(n),d=(0,s.getMetricE2eDestination)(u);if(d&&(l.e2eDestination=d),u){const e=(0,E.getWamE2eSenderType)(u);null!=e&&(l.e2eSenderType=e)}n.edit===o.EDIT_ATTR.ADMIN_REVOKE?l.revokeType=m.REVOKE_TYPE.ADMIN:n.edit===o.EDIT_ATTR.SENDER_REVOKE&&(l.revokeType=m.REVOKE_TYPE.SENDER);const p=(0,E.getWamInvisibleMessageCatgoryType)(n.category);null!=p&&(l.invisibleMessageCategory=p),l.commit()}},91360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageCache=function(){null==r&&(r=n(27893).messageProcessorCache);return r};let r=null},77749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI_UPDATE_TIME_MS=t.ResumeStatus=t.OFFLINE_STANZA_TIMEOUT_MS=t.OFFLINE_STANZA_COUNT_LIMIT=t.OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS=t.OFFLINE_PREVIEW_PERIOD_MS=t.OFFLINE_DEVICE_SYNC_DELAY=void 0;const r=n(76672).Mirrored(["INIT","RESUME_ON_RESTART","RESUME_WITH_OPEN_TAB","COMPLETE"]);t.ResumeStatus=r;t.OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS=2e4;t.OFFLINE_STANZA_COUNT_LIMIT=100;t.OFFLINE_DEVICE_SYNC_DELAY=2e3;t.OFFLINE_STANZA_TIMEOUT_MS=6e4;t.OFFLINE_PREVIEW_PERIOD_MS=1e3;t.UI_UPDATE_TIME_MS=1e3},6268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResumeUIProgressBarType=void 0;const r=n(76672)({Toastbar:"toastbar",ButterBar:"butterbar",None:"none"});t.ResumeUIProgressBarType=r},67606:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearOfflineSnapShot=function(){return P.apply(this,arguments)},t.exceedResumeWithOpenTabLimit=function(e,t){return e+t>M||e>T&&e+t>b},t.loadMainScreen=function(){return R.apply(this,arguments)},t.refreshWindow=function(){var e;(null===(e=window.location)||void 0===e?void 0:e.reload)&&window.location.reload()},t.restoreDataFromStorage=C,t.runReceiptCleanUpLoop=function(){if((0,l.getABPropConfigValue)("web_enable_open_tab_pre_ack")&&!_.default.online)return __LOG__(2)`[offline-resume][utils] runReceiptCleanUpLoop: skip due to offline.`,Promise.resolve();return(0,s.promiseLoop)(function(){var e=(0,i.default)((function*(e,t,n){const r=(0,a.delayMs)((0,o.expBackoff)(n,12e4,1e3,.1));try{return yield(0,u.clearDanglingReceipts)(),__LOG__(2)`[offline-resume][utils] runReceiptCleanUpLoop: done.`,e()}catch(t){return __LOG__(2)`[offline-resume][utils] runReceiptCleanUpLoop: failed with error ${t}.`,n>3?(__LOG__(3)`[offline-resume][utils] runReceiptCleanUpLoop: Gave up clean up receipts ${n} tries`,e()):r}}));return function(){return e.apply(this,arguments)}}())};var i=r(n(48926)),o=n(27363),a=n(55068),s=n(73471),l=n(83741),u=n(65953),c=n(46316),d=n(91360),p=n(56457),f=n(9567),_=r(n(69353)),g=n(85995),h=n(75968),A=n(82192),m=n(20577),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(70249)),y=n(82572),S=n(56203),v=n(49625);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}const T=20,b=50,M=200;function P(){return(P=(0,i.default)((function*(){(0,d.getMessageCache)().createSnapshot(),h.OfflinePendingDeviceCache.createSnapshot();const e=[(0,d.getMessageCache)().checkpointQueue.wait(),h.OfflinePendingDeviceCache.checkpointQueue.wait()];e.push(f.receiptBatcher.runActiveBatches()),yield Promise.all(e)}))).apply(this,arguments)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e){(0,A.startPageLoadQplMeasure)("restoreDataFromStorage");try{const{shouldUpdateReceipts:t=!1,shouldRestoreChatsAndMsgs:n=!0}=e;__LOG__(2)`[offline-resume] restoreDataFromStorage.`;const r=(t?(0,g.updatePeerReceipts)():Promise.resolve()).then((()=>n?(0,v.workerSafeSendAndReceive)("restoreChatsAndMessages"):Promise.resolve())),i=(0,v.workerSafeSendAndReceive)("restoreGroupsAndContacts"),o=(0,v.workerSafeSendAndReceive)("restoreProfilePictures");yield Promise.all([r,i,o])}catch(e){__LOG__(4,!0,new Error,!0,["logout"])`[offline-resume] restoreDataFromStorage failed with error ${e}.`,SEND_LOGS("offline-resume-fatal-error",1,"logout"),(0,y.socketLogout)(p.LogoutReason.ClientFatalError)}(0,A.endPageLoadQplMeasure)("restoreDataFromStorage")}))).apply(this,arguments)}function R(){return(R=(0,i.default)((function*(e){try{yield(0,m.pruneExpiredMessagesWithAddOns)()}catch(e){throw __LOG__(4,void 0,new Error)`[offline-resume] loadMainScreen: pruneExpiredMessages message failed with error: ${e}`,e}yield C(e),N(),c.Cmd.readyForProcessOffline(),__LOG__(2)`[offline-resume] loadMainScreen complete`}))).apply(this,arguments)}function N(){c.Cmd.readyForMainStreamMode(),S.OfflineResumeReporter.logMainScreenLoadT(),E.setMainStreamModeReadyT()}},82192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPageLoadQplAnnotation=function(e){return n.addPageLoadQplAnnotation(e)},t.addPageLoadQplPoint=function(e){return n.addPageLoadQplPoint(e)},t.addPageLoadValidationData=function(e,t){return n.addPageLoadValidationData(e,t)},t.endPageLoadQpl=function(e){return n.endPageLoadQpl(e)},t.endPageLoadQplMeasure=function(e){return n.endPageLoadQplMeasure(e)},t.incrementPageLoadQplSocketError=function(){return n.incrementPageLoadQplSocketError()},t.setImpl=function(e){n=e},t.setWamCompleteForValidation=function(){return n.setWamCompleteForValidation()},t.startPageLoadQplMeasure=function(e){return n.startPageLoadQplMeasure(e)};let n={endPageLoadQpl(){},endPageLoadQplMeasure(){},startPageLoadQplMeasure(){},addPageLoadQplPoint(){},addPageLoadQplAnnotation(){},incrementPageLoadQplSocketError(){},addPageLoadValidationData(){},setWamCompleteForValidation(){}}},20577:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pruneExpiredMessagesWithAddOns=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(94903),s=r(n(60001)),l=n(82192),u=n(29409);function c(){return(c=(0,i.default)((function*(){(0,l.startPageLoadQplMeasure)("pruneExpiredMessagesWithAddOns");const e=yield(0,a.pruneExpiredMessages)(),t=e.length;if(t>0){const r=n(74e3).getJobManager,i=[],a=new Set;e.forEach((e=>{const t=e.id.toString();a.add(s.default.fromString(t).remote.toString()),i.push(t)}));const l=Array.from(a.values()).join(",").toString();(0,o.frontendFireAndForget)("deleteModelsForLastAddOnPreview",{messagesIds:i}),yield r().waitUntilPersisted(u.jobSerializers.deleteAddOns(l,i)),__LOG__(2)`[offline-resume][utils] pruneExpiredMessagesWithAddOns: pruneExpiredMessages pruned ${t} msg(s)`}(0,l.endPageLoadQplMeasure)("pruneExpiredMessagesWithAddOns")}))).apply(this,arguments)}},61071:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineWorkerResumeStageManager=void 0;var i=r(n(48926)),o=n(93042),a=n(78494),s=n(46316),l=n(12987),u=n(33442),c=n(75674),d=n(77749),p=n(6268),f=n(67606),_=n(95160),g=n(4830),h=n(68231);t.OfflineWorkerResumeStageManager=class{constructor(){this._offlineCompleteTimer=null,this._maxProgress=100,this._initState()}_initState(){this.offlineMessagePreviewCounter=-1,this._decryptedMessageCount=0,this._decryptionErrorCount=0,this._finishedDownloading=!1,this._hasMessagesToDownload=null,this._status=d.ResumeStatus.INIT}_setStatus(e){__LOG__(2)`[offline-resume][worker] offline resume stage: ${this._status} -> ${e}`,this._status=e}processOfflinePreview(e){if(h.WorkerOfflineResumeReporter.logOfflinePreview(),this._status===d.ResumeStatus.INIT)h.WorkerOfflineResumeReporter.updateOfflineCount(e),this.offlineMessagePreviewCounter=e.message,this._hasMessagesToDownload=!1,this._finishedDownloading=!0,this._decryptedMessageCount=0,this._firstPreviewReceivedT=Date.now(),(0,g.enableMemSignalStore)(),u.jsHaltDetector.restartDetection(),this._setStatus(d.ResumeStatus.RESUME_ON_RESTART),s.Cmd.readyForProcessOffline(),this._startOfflineCompleteTimer(e.message,e.receipt);else{const t=this._firstPreviewReceivedT;if(null!=t){const n=Date.now()-t;n<d.OFFLINE_PREVIEW_PERIOD_MS?(__LOG__(2)`[offline-resume][worker] Accept multiple offline preview ibs during offline resume, delay ${n}.`,this.offlineMessagePreviewCounter+=e.message,this._hasMessagesToDownload=!1,this._finishedDownloading=!0,h.WorkerOfflineResumeReporter.updateOfflineCount(e)):__LOG__(2)`[offline-resume][worker] Reject multiple offline preview ib during offline resume, delay ${n}.`}this._refreshOfflineCompleteTimer()}}processOfflineThreadMeta(){__LOG__(2)`[offline-resume][worker] processOfflineThreadMeta not applicable`}getOfflineDeliveryProgress(){return 0===this.offlineMessagePreviewCounter?this._maxProgress:Math.min(Math.ceil(100*this._decryptedMessageCount/this.offlineMessagePreviewCounter),this._maxProgress)}processOfflineSessionComplete(){var e;return null===(e=this._offlineCompleteTimer)||void 0===e||e.cancel(),this._offlineCompleteTimer=null,this._status===d.ResumeStatus.COMPLETE?(__LOG__(2)`[offline-resume][worker] processOfflineSessionComplete already complete`,Promise.resolve()):this._status===d.ResumeStatus.RESUME_WITH_OPEN_TAB?(__LOG__(2)`[offline-resume][worker] RESUME_WITH_OPEN_TAB stage not applicable`,Promise.resolve()):(this._status===d.ResumeStatus.INIT&&(this._hasMessagesToDownload=!1,this._finishedDownloading=!0),this._setStatus(d.ResumeStatus.COMPLETE),this._handleOfflineComplete())}isResumeFromRestartComplete(){return this._status!==d.ResumeStatus.RESUME_ON_RESTART&&this._status!==d.ResumeStatus.INIT}isResumeFromRestartInProgress(){return this._status!==d.ResumeStatus.INIT&&!s.Cmd.isOfflineDeliveryEnd}isResumeOnSocketDisconnectInProgress(){return this._status===d.ResumeStatus.RESUME_WITH_OPEN_TAB}getHasMessagesToDownload(){return this._hasMessagesToDownload}getFinishedDownloading(){return 100===this.getOfflineDeliveryProgress()}shouldUseOfflineResumeScreen(){return this.offlineMessagePreviewCounter>this._decryptedMessageCount}processDecryptResult(e){this._decryptedMessageCount+=1,e===l.E2EProcessResult.RETRY&&(this._decryptionErrorCount+=1)}offlineStanzaReceivedAfterComplete(){this.isResumeFromRestartComplete()&&__LOG__(2)`[offline-resume][worker] offlineStanzaReceivedAfterComplete stage not applicable`}newOfflineStanza(e){h.WorkerOfflineResumeReporter.updateOldestStanzaTime(e),this._refreshOfflineCompleteTimer()}getResumeUIProgressBarType(){return p.ResumeUIProgressBarType.None}_refreshOfflineCompleteTimer(){this._offlineCompleteTimer&&this._offlineCompleteTimer.onOrAfter(d.OFFLINE_STANZA_TIMEOUT_MS)}_startOfflineCompleteTimer(e,t){var n;null===(n=this._offlineCompleteTimer)||void 0===n||n.cancel(),this._offlineCompleteTimer=new a.ShiftTimer((()=>{this._status!==d.ResumeStatus.COMPLETE&&(__LOG__(2)`[offline-resume][worker]: offline session completed by timeout`,this.processOfflineSessionComplete(e+t),this._offlineCompleteTimer=null)})),this._offlineCompleteTimer.onOrAfter(d.OFFLINE_STANZA_TIMEOUT_MS)}_handleOfflineComplete(){var e=this;return(0,i.default)((function*(){yield(0,c.waitForOfflineMsgThread)(),h.WorkerOfflineResumeReporter.updateOfflineDecryptionErrorCount(e._decryptionErrorCount),__LOG__(2)`[offline-resume][worker] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ${e._decryptionErrorCount}`,yield(0,f.clearOfflineSnapShot)(),h.WorkerOfflineResumeReporter.logProcessComplete(),e._decryptionErrorCount=0,__LOG__(2)`[offline-resume][worker] _onOfflineComplete: clearOfflineSnapShot done.`,(0,_.isServiceWorker)()?(yield(0,f.runReceiptCleanUpLoop)(),(0,o.stopComms)()):(s.Cmd.offlineDeliveryEnd(),(0,f.runReceiptCleanUpLoop)())}))()}}},72827:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createLidPnMappings=function(){return u.apply(this,arguments)},t.updateLidMetadata=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(42247),a=n(1619),s=n(51017);function l(){return(l=(0,i.default)((function*(e){let{updates:t}=e;const n=t.map((e=>{var t,n,r,i;let{lid:o,data:a}=e;return{lid:(0,s.toUserWid)(o),shareOwnPn:null!==(t=a.shareOwnPn)&&void 0!==t?t:null,displayNameLID:null!==(n=a.displayNameLID)&&void 0!==n?n:null,requestedPnTimestamp:null!==(r=a.requestedPnTimestamp)&&void 0!==r?r:null,username:null!==(i=a.username)&&void 0!==i?i:null}}));yield(0,a.frontendSendAndReceive)("bulkUpdateLidContactState",{lidContactDataMappings:n}),yield(0,o.updateLidMetadata)(t)}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e){let{mappings:t,flushImmediately:n}=e;const r=t.map((e=>{let{lid:t,pn:n}=e;return{lid:t.toString(),phoneNumber:n.toString()}}));yield(0,a.frontendSendAndReceive)("bulkUpdatePhoneNumberJids",{lidPhoneNumberMappings:r}),yield(0,o.createLidPnMappings)({mappings:t,flushImmediately:n})}))).apply(this,arguments)}},57305:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBytes=function(e){return e?(0,i.encodeB64)(e):void 0},t.decodeUrl=function(e){return e&&!e.includes("/u/")?e:void 0},t.parseInviteGrpType=function(e){switch(e){case s.Message$ExtendedTextMessage$InviteLinkGroupType.PARENT:return o.GroupType.COMMUNITY;case s.Message$ExtendedTextMessage$InviteLinkGroupType.SUB:return o.GroupType.LINKED_SUBGROUP;case s.Message$ExtendedTextMessage$InviteLinkGroupType.DEFAULT_SUB:return o.GroupType.LINKED_ANNOUNCEMENT_GROUP;default:return o.GroupType.DEFAULT}},t.shouldLogE2eProtoValidation=u,t.validateRequiredMediaProperties=function(e,t){if(!u(e,t))return;const n=e.type;if(!(0,a.isMediaCryptoExpectedForMsg)(e))return void(null==t.directPath&&(__LOG__(2,void 0,void 0,!0)`directPath missing from msg type ${n}`,SEND_LOGS(`${n}-unencrypted-message-missing-direct-path`)));null==t.directPath&&null==t.fileEncSha256?(__LOG__(2,void 0,void 0,!0)`directPath and fileEncSha256 missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-direct-path-and-file-enc`)):null==t.directPath?(__LOG__(2,void 0,void 0,!0)`directPath missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-direct-path`)):null==t.fileEncSha256&&(__LOG__(2,void 0,void 0,!0)`fileEncSha256 missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-file-enc`));null==t.url&&(__LOG__(2,void 0,void 0,!0)`url(deprecatedMms3Url) is missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-mms3-url`));null==t.mediaKey&&(__LOG__(2,void 0,void 0,!0)`mediaKey is missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-media-key`))};var i=n(62089),o=n(98051),a=n(82150),s=n(77026),l=r(n(27112));function u(e,t){var n;return!(Math.random()>.001)&&(!!e.id&&("status"!==(null===(n=e.id.remote)||void 0===n?void 0:n.user)||!l.default.isPSA(e.author)||null!=t.staticUrl))}},70249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMainStreamModeReadyT=function(){(0,r.canSupportOfflineNotifications)()&&!o&&null!=a&&self.performance.now()-a>1e4&&(0,i.setOfflineNotificationsBBStatus)({isLongResumeTime:!0})},t.setStartCommsT=function(){(0,r.canSupportOfflineNotifications)()&&(o=!1,a=self.performance.now())};var r=n(17761),i=n(55017);let o=!0,a=null},92760:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.editAttribute=function(e,t){if(S(e)){const e="admin_revoke"===t?u.EDIT_ATTR.ADMIN_REVOKE:u.EDIT_ATTR.SENDER_REVOKE;return(0,s.CUSTOM_STRING)(String(e))}if(function(e){return null!=e.reactionMessage&&e.reactionMessage.text===f.REVOKED_REACTION_TEXT}(e))return(0,s.CUSTOM_STRING)(String(u.EDIT_ATTR.SENDER_REVOKE));if(function(e){return null!=e.keepInChatMessage&&null!=e.keepInChatMessage.key&&!0===e.keepInChatMessage.key.fromMe&&e.keepInChatMessage.keepType===p.KeepType.UNDO_KEEP_FOR_ALL}(e))return(0,s.CUSTOM_STRING)(String(u.EDIT_ATTR.SENDER_REVOKE));if(v(e))return(0,s.CUSTOM_STRING)(String(u.EDIT_ATTR.MESSAGE_EDIT));if(function(e){return null!=e.pinInChatMessage}(e))return(0,s.CUSTOM_STRING)(String(u.EDIT_ATTR.PIN_IN_CHAT));return s.DROP_ATTR},t.encodeAndPad=function(e){const t=(0,E.encodeProtobuf)(p.MessageSpec,e);return(0,h.writeRandomPadMax16)(t),t.readByteArray()},t.filterDeviceWithChangedIdentity=function(){return P.apply(this,arguments)},t.getResendTimeoutInSeconds=function(){return 60*((0,l.getABPropConfigValue)("web_e2e_backfill_expire_time")||5)},t.isEditMsg=v,t.isPrimaryDevice=function(e){return null==e.device||e.device===a.DEFAULT_DEVICE_ID},t.isRevokeMsg=S,t.sendMsgAckSyncParser=void 0,t.updateIdentityRange=function(){return T.apply(this,arguments)};var i=r(n(48926)),o=r(n(82601)),a=n(44037),s=n(42811),l=n(83741),u=n(77630),c=n(67789),d=n(53098),p=n(77026),f=n(56074),_=n(10139),g=n(215),h=n(49178),A=n(4830),m=n(51017),E=n(86881),y=r(n(89482));function S(e){return null!=e.protocolMessage&&e.protocolMessage.type===p.Message$ProtocolMessage$Type.REVOKE}function v(e){var t,n,r,i,o;return(null!==(t=null===(n=e.protocolMessage)||void 0===n?void 0:n.type)&&void 0!==t?t:null===(r=e.editedMessage)||void 0===r||null===(i=r.message)||void 0===i||null===(o=i.protocolMessage)||void 0===o?void 0:o.type)===p.Message$ProtocolMessage$Type.MESSAGE_EDIT}const I=new o.default("sendMsgAckSyncParser",(e=>(e.assertTag("ack"),{t:e.attrTime("t"),sync:e.hasAttr("sync")?e.attrString("sync"):null,phash:e.hasAttr("phash")?e.attrString("phash"):null,addressingMode:e.hasAttr("addressing_mode")?e.attrString("addressing_mode"):null,count:e.hasAttr("count")?e.attrInt("count"):null,error:e.hasAttr("error")?e.attrInt("error"):null})));function T(){return(T=(0,i.default)((function*(e,t){const n=e.data.id;if(e.type===g.SendMessageRecordType.Addon){const e=yield(0,c.hasSentAddonMsg)(n);if(null!=e)return(0,A.getPersistSignalProtocolStore)().updateIdentityRangeAfterEncryption("sentAddonRowId",e.rowId,t.map((e=>(0,h.createSignalAddress)(e).toString())))}else if(e.type===g.SendMessageRecordType.Message){const e=yield(0,_.getMessageTable)().get(String(n),!1),r=null==e?void 0:e.rowId;if(null!=r)return(0,A.getPersistSignalProtocolStore)().updateIdentityRangeAfterEncryption("rowId",r,t.map((e=>(0,h.createSignalAddress)(e).toString())))}}))).apply(this,arguments)}function b(){return M.apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e){const t=e.data.id;if(e.type===g.SendMessageRecordType.Addon){const e=yield(0,c.hasSentAddonMsg)(t);return e||__LOG__(3)`filterDeviceWithChangedIdentity: addon not found: ${t}`,null==e?void 0:e.rowId}if(e.type===g.SendMessageRecordType.Message){const e=yield(0,_.getMessageTable)().get(String(t),!1);return e||__LOG__(3)`filterDeviceWithChangedIdentity: message not found: ${t}`,null==e?void 0:e.rowId}}))).apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t){const n=yield b(e);if(null==n)throw __LOG__(3)`filterDeviceWithChangedIdentity: cannot determine rowId for message: ${e.data.id}, type: ${e.data.type}`,(0,y.default)("filterDeviceWithChangedIdentity: cannot determine message rowId");const r=new Map;t.forEach((e=>{r.set((0,d.createDeviceListPK)(e),e)}));const i=Array.from(r.values()).map((e=>(0,m.createDeviceWidFromUserAndDevice)(e.user,e.server,a.DEFAULT_DEVICE_ID))),o=yield(0,A.getPersistSignalProtocolStore)().bulkGetIdentityWithRowId(i.map((e=>(0,h.createSignalAddress)(e).toString()))),s=new Set;return o.forEach(((t,r)=>{const o=e.type===g.SendMessageRecordType.Addon?null==t?void 0:t.sentAddonRowId:null==t?void 0:t.rowId,a=i[r];(null==o||o>n)&&s.add((0,d.createDeviceListPK)(a))})),t.filter((e=>!s.has((0,d.createDeviceListPK)(e))))}))).apply(this,arguments)}t.sendMsgAckSyncParser=I},215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendMessageRecordType=void 0;const n=Object.freeze({Message:"message",Addon:"addon"});t.SendMessageRecordType=n},74600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.Cipher=void 0;var r=a(n(8374)),i=a(n(38353));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}const s=r;t.Cipher=s;const l=i;t.Session=l},8374:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptGroupSignalProto=function(){return l.apply(this,arguments)},t.decryptSignalProto=function(){return a.apply(this,arguments)},t.encryptSenderKeyMsgSignalProto=function(){return u.apply(this,arguments)},t.encryptSignalProto=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(78283);n(88515);function a(){return(a=(0,i.default)((function*(e,t,n){return(0,o.decryptSignalProto)(e,t,n)}))).apply(this,arguments)}function s(){return(s=(0,i.default)((function*(e,t){return(0,o.encryptSignalProto)(e,t)}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(e,t,n){return(0,o.decryptGroupSignalProto)(e,t,n)}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e,t,n){return(0,o.encryptSenderKeyMsgSignalProto)(e,t,n)}))).apply(this,arguments)}},20962:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.maybeConvertSenderKey=function(e){try{return null!=e&&p(e)?(__LOG__(2,void 0,void 0,!0)`maybeConvertSenderKey: converting to crypto library`,SEND_LOGS("libsignal-to-cryptolib-senderkey",0),(0,a.toCryptoManagerSenderKeySession)(e)):e}catch(e){throw __LOG__(4,void 0,new Error,!0)`maybeConvertSenderKey: failed with error ${e}`,SEND_LOGS("senderkey-convert-error"),e}},t.maybeConvertSession=function(){return d.apply(this,arguments)},t.shouldConvertSenderKey=p,t.shouldConvertSession=c;var i=r(n(48926)),o=n(52894),a=n(19070),s=n(18304),l=n(4830),u=r(n(89482));function c(e){return null!=e.sessions}function d(){return(d=(0,i.default)((function*(e){try{if(null==e||!c(e))return e;const[t,n]=yield Promise.all([(0,l.getSignalProtocolStore)().getIdentityKeyPair(),(0,l.getSignalProtocolStore)().getLocalRegistrationId()]);if(!t||null==n)throw(0,u.default)("Attempted to loadSession without registration info");const r={identityKeyPair:(0,o.toCurveKeyPair)(t),registrationId:n};return __LOG__(2,void 0,void 0,!0)`maybeConvertSession: converting to crypto library`,SEND_LOGS("libsignal-to-cryptolib-session",0),(0,s.toCryptoLibrarySessionPrevSessions)(e,r)}catch(e){throw __LOG__(4,void 0,new Error,!0)`maybeConvertSession: failed with error ${e}`,SEND_LOGS("session-convert-error"),e}}))).apply(this,arguments)}function p(e){return null!=e.sessions}},84015:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateIdentityKeyPair=function(){return u.apply(this,arguments)},t.generatePreKeyPair=function(){return s.apply(this,arguments)},t.generateSignedKeyPair=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(52894),a=r(n(43534));function s(){return(s=(0,i.default)((function*(e){const t=a.default.makePreKey(e),{preKeyId:n,privKey:r,pubKey:i}=t;return{keyId:n,keyPair:{privKey:r,pubKey:i},isDirectDistribution:0}}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(e,t){const n=a.default.makeSignedPreKey((0,o.toCurveKeyPair)(e),t),{preKeyId:r,privKey:i,pubKey:s,signature:l}=n;return{keyId:r,keyPair:(0,o.toCurveKeyPair)({privKey:i,pubKey:s}),signature:l}}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(){return a.default.makeKeyPair()}))).apply(this,arguments)}},38353:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupSignalSession=function(){return b.apply(this,arguments)},t.createSignalSession=function(){return m.apply(this,arguments)},t.deleteDeviceSenderKey=function(e){const t=String((0,f.createSignalAddress)(e));return g.waSignalStore.removeSenderKeyBySenderId(t)},t.deleteGroupSenderKeyInfo=function(e,t){const n=(0,f.createSignalAddress)(t),r=`${e.toString({legacy:!0})}::${n.toString()}`;return g.waSignalStore.removeSenderKey(r)},t.deleteRemoteInfo=function(){return y.apply(this,arguments)},t.deleteRemoteSession=function(e){const t=(0,f.createSignalAddress)(e).toString();return(0,_.getSignalProtocolStore)().removeSession(t)},t.getGroupSenderKeyInfo=function(){return M.apply(this,arguments)},t.getRemoteRegId=function(){return E.apply(this,arguments)},t.hasSameBaseKey=function(){return T.apply(this,arguments)},t.hasSignalSessions=function(e){return(0,_.getPersistSignalProtocolStore)().containSessions(e.map((e=>(0,f.createSignalAddress)(e).toString())))},t.maybeDeleteUnconvertedSession=function(e){const t=(0,f.createSignalAddress)(e).toString();return(0,_.getPersistSignalProtocolStore)().maybeCleanUpUnconvertedSession(t)},t.saveSessionBaseKey=function(){return I.apply(this,arguments)};var i=r(n(48926)),o=n(89323),a=n(44037),s=n(47648),l=n(52894),u=n(78283),c=n(92445),d=n(80219),p=r(n(43534)),f=n(49178),_=n(4830),g=n(83986),h=n(51017),A=r(n(89482));function m(){return(m=(0,i.default)((function*(e){const{wid:t,identity:n,deviceIdentity:r}=e;if(__LOG__(2)`Signal::createSignalSession`,null!=t.device&&t.device!==a.DEFAULT_DEVICE_ID){if(!r)throw(0,A.default)("Signal::createSignalSession: expected device-identity in keyBundle for companion device");if(!(yield(0,s.validateADVwithIdentityKey)(t,r,n)))throw(0,A.default)("Signal::createSignalSession: invalid identityKey fetched")}let i,u,c;try{i=(0,l.toSignalCurvePubKey)(new o.Binary(e.identity).readBuffer())}catch(e){throw __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Signal::createSignalSession: invalid identityKey fetched"),e}try{u=(0,l.toSignalCurvePubKey)(new o.Binary(e.skey.pubkey).readBuffer())}catch(e){throw __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Signal::createSignalSession: invalid signedPreKey fetched"),e}if(e.key)try{c=(0,l.toSignalCurvePubKey)(new o.Binary(e.key.pubkey).readBuffer())}catch(e){__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Signal::createSignalSession: invalid preKey fetched")}const p={registrationId:e.regId,identityKey:i,signedPreKey:{keyId:e.skey.id,publicKey:u,signature:new o.Binary(e.skey.signature).readBuffer()}};return e.key&&c&&(p.preKey={keyId:e.key.id,publicKey:c}),(0,d.createSignalSession)(p,t)}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){return(0,d.getRemoteRegId)(e)}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=(0,f.createSignalAddress)(e).toString();yield Promise.all([(0,_.getSignalProtocolStore)().removeIdentity(t),(0,_.getSignalProtocolStore)().removeSession(t)])}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){const t=(0,a.unsafeCoerceToDeviceJid)(e.toJid()),n=yield p.default.getSessionAliceBaseKey(t,(0,c.getCryptoDbCallbacks)().loadSession);return!0===n.success?n.value:null}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e,t){const n=(0,f.createSignalAddress)(e),r=yield S(e);r?yield g.waSignalStore.saveBaseKey(n.toString(),t,r):__LOG__(2)`saveSessionBaseKey: for ${t}, no basekey provided`}))).apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e,t){const n=(0,f.createSignalAddress)(e),[r,i]=yield Promise.all([S(e),g.waSignalStore.loadBaseKey(n.toString(),t)]);return i?r?(0,f.bufferEqual)(i,r)?(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, savedBaseKey and sessionBaseKey is same`,!0):(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, savedBaseKey and sessionBaseKey is different `,!1):(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, no session has been saved locally `,!1):(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, no base key has been saved locally `,!1)}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t,n){return(0,d.createGroupSenderSignalSession)((0,h.createWid)(t),e,n)}))).apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e,t){return(0,u.getGroupSenderKeyInfo)(e,t)}))).apply(this,arguments)}},89924:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.extractIdentityKey=function(e){const t=a.default.extractIdentityKey(e);return!0===t.success?(0,o.toCurveKeyPubKey)(t.value):null},t.xmppPreKey=function(e){return(0,i.wap)("key",null,(0,i.wap)("id",null,(0,i.BIG_ENDIAN_CONTENT)(e.keyId,3)),(0,i.wap)("value",null,e.keyPair.pubKey))},t.xmppSignedPreKey=function(e){return(0,i.wap)("skey",null,(0,i.wap)("id",null,(0,i.BIG_ENDIAN_CONTENT)(e.keyId,3)),(0,i.wap)("value",null,e.keyPair.pubKey),(0,i.wap)("signature",null,e.signature))};var i=n(42811),o=n(52894),a=r(n(43534))},88515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignalMessageCounterError=t.SignalDecryptionError=void 0;var r=n(66911);class i extends((0,r.customError)("SignalDecryptionError")){}t.SignalDecryptionError=i;class o extends((0,r.customError)("SignalMessageCounterError")){}t.SignalMessageCounterError=o},49178:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bufferEqual=function(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;const n=new DataView(e),r=new DataView(t);for(let e=0;e<n.byteLength;e++)if(n.getUint8(e)!==r.getUint8(e))return!1;return!0},t.bufferToStr=function(e){return(0,i.wrapBufferToString)(e)},t.createSignalAddress=a,t.createSignalLikeSenderKeyName=function(e,t){return e+"::"+a(t)},t.decryptRegistrationMaterial=function(e){return self.crypto.subtle.decrypt(s,e.encKey,e.value)},t.encryptRegistrationMaterial=function(e){return self.crypto.subtle.generateKey({name:s.name,length:s.length},!1,["encrypt","decrypt"]).then((t=>self.crypto.subtle.encrypt(s,t,e).then((e=>({encKey:t,value:e})))))},t.getSignalLikeAddressName=function(e){if("string"!=typeof e||!e.match(/.*\.\d+/))throw(0,o.default)("Invalid SignalLikeProtocolAddress string");return e.split(".")[0]},t.strToBuffer=function(e){return function(e){if("string"==typeof e)return(0,i.wrapString)(e);if(e instanceof Uint8Array)return(0,i.wrapUint8Array)(e);if(e instanceof ArrayBuffer)return(0,i.wrapArrayBuffer)(e);throw(0,o.default)("[wrapToArrayBuffer] Unknown input type "+typeof e)}(e)},t.writeRandomPadMax16=function(e){const t=new Uint8Array(1);self.crypto.getRandomValues(t),function(e,t){for(let n=0;n<t;n++)e.writeUint8(t)}(e,1+(15&t[0]))};var i=n(21802),o=r(n(89482));function a(e){if(!(e.isUser()||e.isServer()||e.isPSA()))throw(0,o.default)(`Jid ${e.toString({legacy:!0})} is not fully qualified, jid.server should be "s.whatsapp.net"`);return function(e){return`${e.getSignalAddress()}.0`}(e)}const s={name:"AES-CTR",length:128,counter:new Uint8Array(16)}},4258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.META_KEYS=void 0;t.META_KEYS={REG_ID:"signal_reg_id",STATIC_PUBKEY:"signal_static_pubkey",STATIC_PRIVKEY:"signal_static_privkey",NEXT_PK_ID:"signal_next_pk_id",LAST_SPK_ID:"signal_last_spk_id",FIRST_UNUPLOAD_PK_ID:"signal_first_unupload_pk_id",SERVER_HAS_KEY:"signal_sever_has_pre_keys",ADV_SIGNED_IDENTITY:"adv_signed_identity"}},83986:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.waSignalStore=void 0;var i=r(n(48926)),o=n(49178),a=n(4258),s=n(73804),l=n(32954),u=r(n(89482));const c=new class{constructor(){this.idToSignedPreKey=new Map}getMeta(e){return(0,s.getMetaTable)().get(e).then((e=>e?e.value:null))}putMeta(e){return(0,i.default)((function*(){const t=(0,s.getMetaTable)(),n=e.map((e=>t.createOrReplace(e)));yield Promise.all(n)}))()}setServerHasPreKeys(e){this.putMeta([{key:a.META_KEYS.SERVER_HAS_KEY,value:e}])}getServerHasPreKeys(){return this.getMeta(a.META_KEYS.SERVER_HAS_KEY)}putADVSignedIdentity(e){return this.putMeta([{key:a.META_KEYS.ADV_SIGNED_IDENTITY,value:e}])}getADVSignedIdentity(){return this.getMeta(a.META_KEYS.ADV_SIGNED_IDENTITY)}getPreKeysByRange(e,t){return(0,s.getPreKeyTable)().greaterThan(["keyId"],e-1,{limit:t})}getPreKeyById(e){return(0,s.getPreKeyTable)().get(e)}removePreKeyById(e){return(0,s.getPreKeyTable)().remove(e)}bulkRemovePreKey(e){return(0,s.getPreKeyTable)().bulkRemove(e)}putPreKeys(e){return(0,s.getPreKeyTable)().bulkCreateOrReplace(e)}markPreKeyAsDirectDistribution(e){return(0,s.getPreKeyTable)().merge(e,{isDirectDistribution:1})}getSignedPreKey(){return this.getMeta(a.META_KEYS.LAST_SPK_ID).then((e=>this.getSignedPreKeyById(e)))}getSignedPreKeyById(e){if(this.idToSignedPreKey.has(e))return Promise.resolve(this.idToSignedPreKey.get(e));return(0,s.getSignedPreKeyTable)().get(e).then((t=>(this.idToSignedPreKey.set(e,t),t)))}putSignedPreKeys(e){return(0,i.default)((function*(){const t=(0,s.getSignedPreKeyTable)(),n=e.map((e=>{const{keyId:n,keyPair:r,signature:i}=e;return t.get(n).then((e=>{if(e)throw(0,u.default)(`signed preKey id ${n} already exists`);return t.create({keyId:n,keyPair:r,signature:i})}))}));yield Promise.all(n)}))()}putSession(e,t){return(0,s.getSessionTable)().createOrReplace({address:e,session:t})}bulkPutSession(e){return(0,s.getSessionTable)().bulkCreateOrReplace(e)}removeSession(e){return(0,s.getSessionTable)().remove(e)}bulkRemoveSession(e){return(0,s.getSessionTable)().bulkRemove(e)}getSession(e){return(0,s.getSessionTable)().get(e).then((e=>e?e.session:null))}bulkGetSession(e){return(0,s.getSessionTable)().bulkGet(e).then((e=>e.map((e=>e?e.session:null))))}putIdentity(e,t){return(0,s.getIdentityTable)().createOrReplace({identifier:e,identityKey:t})}bulkPutIdentity(e){return(0,s.getIdentityTable)().bulkCreateOrReplace(e)}bulkGetIdentity(e){return(0,s.getIdentityTable)().bulkGet(e).then((e=>e.map((e=>e?e.identityKey:null))))}getIdentity(e){return(0,s.getIdentityTable)().get(e).then((e=>e?e.identityKey:null))}removeIdentity(e){return(0,s.getIdentityTable)().remove(e)}bulkRemoveIdentity(e){return(0,s.getIdentityTable)().bulkRemove(e)}getIdentityKeyWithRowId(e){return(0,s.getIdentityTable)().get(e).then((e=>e?{identityKey:e.identityKey,rowId:e.rowId,sentAddonRowId:e.sentAddonRowId}:null))}bulkGetIdentityKeyWithRowId(e){return(0,s.getIdentityTable)().bulkGet(e).then((e=>e.map((e=>e?{identityKey:e.identityKey,rowId:e.rowId}:null))))}bulkPutIdentityKeyWithRowId(e){return(0,s.getIdentityTable)().bulkCreateOrReplace(e)}saveBaseKey(e,t,n){return(0,s.getBaseKeyTable)().createOrReplace({address:e,originalMsgId:t,baseKey:n})}loadBaseKey(e,t){return(0,s.getBaseKeyTable)().equals(["address","originalMsgId"],[e,t]).then((e=>e&&0!==e.length?e[0].baseKey:null))}deleteBaseKey(e,t){const n=(0,s.getBaseKeyTable)();return n.equals(["address","originalMsgId"],[e,t]).then((e=>{if(e&&0!==e.length)return n.remove(e[0].id)}))}putSenderKey(e,t,n){return(0,s.getSenderKeyTable)().createOrReplace({senderKeyName:e,senderId:t,senderKey:n})}bulkPutSenderKey(e){return(0,s.getSenderKeyTable)().bulkCreateOrReplace(e)}removeSenderKey(e){return(0,s.getSenderKeyTable)().remove(e)}getSenderKey(e){return(0,s.getSenderKeyTable)().get(e).then((e=>e?e.senderKey:null))}removeSenderKeyBySenderId(e){const t=(0,s.getSenderKeyTable)();return t.equals(["senderId"],e).then((e=>t.bulkRemove(e.map((e=>e.senderKeyName)))))}clearCredential(){const e=[(0,s.getIdentityTable)(),(0,s.getMetaTable)(),(0,s.getPreKeyTable)(),(0,s.getSessionTable)(),(0,s.getSignedPreKeyTable)()];return Promise.all(e.map((e=>e.clear()))).then((()=>{}))}getRegistrationInfo(){return null!=this.registrationInfo?Promise.resolve(this.registrationInfo):Promise.all([this.getMeta(a.META_KEYS.REG_ID),this.getMeta(a.META_KEYS.STATIC_PUBKEY),this.getMeta(a.META_KEYS.STATIC_PRIVKEY)]).then((e=>{let[t,n,r]=e;if(t&&n&&r)return Promise.all([(0,o.decryptRegistrationMaterial)(n),(0,o.decryptRegistrationMaterial)(r)]).then((e=>{let[n,r]=e;return this.registrationInfo={registrationId:t,identityKeyPair:{pubKey:n,privKey:r}},this.registrationInfo}))}))}setRegistrationInfo(e){var t=this;return(0,i.default)((function*(){yield Promise.all([(0,o.encryptRegistrationMaterial)(e.identityKeyPair.pubKey),(0,o.encryptRegistrationMaterial)(e.identityKeyPair.privKey)]).then((n=>{let[r,i]=n;return Promise.all([t.putMeta([{key:a.META_KEYS.REG_ID,value:e.registrationId},{key:a.META_KEYS.STATIC_PUBKEY,value:r},{key:a.META_KEYS.STATIC_PRIVKEY,value:i}])])}))}))()}getOrGenPreKeys(e,t){return(0,l.getStorage)().lock(["signal-meta-store","prekey-store"],(()=>Promise.all([this.getMeta(a.META_KEYS.FIRST_UNUPLOAD_PK_ID),this.getMeta(a.META_KEYS.NEXT_PK_ID)]).then((n=>{let[r,i]=n;const o=r||1,a=i||1,s=a-o,l=e-s;if(l<=0)return __LOG__(2)`getPreKeys: no prekey needs to be generated, available: ${s}, need: ${e}`,this.getPreKeysByRange(o,e);const u=function(e,t){const n=[];for(let r=e;r<t;r++)n.push(r);return n}(a,a+l).map((e=>t(e)));return Promise.all(u).then((e=>this.savePreKeys(e))).then((()=>this.getPreKeysByRange(o,e)))}))))}getOrGenSinglePreKey(e){return this.getOrGenPreKeys(1,e).then((e=>{if(1!==e.length)throw(0,u.default)(`Expected to get exactly one key but got ${e.length}`);return e[0]}))}savePreKeys(e){var t=this;return(0,i.default)((function*(){if(0===e.length)return;const n=e[e.length-1];yield Promise.all([t.putMeta([{key:a.META_KEYS.NEXT_PK_ID,value:n.keyId+1}]),t.putPreKeys(e)])}))()}markKeyAsUploaded(e){return Promise.all([this.getMeta(a.META_KEYS.FIRST_UNUPLOAD_PK_ID),this.getMeta(a.META_KEYS.NEXT_PK_ID)]).then((t=>{let[n,r]=t;if(e<0||!r||e>=r)throw(0,u.default)(`markKeyAsUploaded: key ${e} is out of boundary.`);const i=n?Math.max(n,e+1):e+1;return this.putMeta([{key:a.META_KEYS.FIRST_UNUPLOAD_PK_ID,value:i}])}))}rotateSignedPreKey(e,t){return(0,l.getStorage)().lock(["signal-meta-store","signed-prekey-store"],(()=>this.getMeta(a.META_KEYS.LAST_SPK_ID).then((n=>{const r=null==n?1:n+1;return t(e,r).then((e=>(this.putSignedPreKeys([e]),this.putMeta([{key:a.META_KEYS.LAST_SPK_ID,value:r}]),e)))}))))}};t.waSignalStore=c},78283:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSignalSession=function(){return m.apply(this,arguments)},t.decryptGroupSignalProto=function(e,t,n){__LOG__(2)`CryptoLibrarySignal::decryptGroupSignalProto`;let r=null;return A().decryptGroupContent({loadSenderKeySession:h.loadSenderKeySession,saveSenderKeySession:h.saveSenderKeySession},(0,f.widToMulticastJid)(e),(0,f.widToDeviceJid)(t),n,(e=>(r=(0,o.uint8ArrayToBuffer)(e),Promise.resolve()))).then((e=>{if(e.success){if(null==r)throw new p.SignalDecryptionError("Null result on successful decryption of group msg");return r}const{error:t}=e;throw __LOG__(3)`CryptoLibrarySignal::decryptGroupMessage failed ${t}`,"errDuplicateMsg"===t?new p.SignalMessageCounterError(t):new p.SignalDecryptionError(t)})).catch((e=>{if(e instanceof p.SignalDecryptionError||e instanceof p.SignalMessageCounterError)throw e;throw __LOG__(4,void 0,new Error)`CryptoLibrarySignal::decryptGroupSignalProto failed to decrypt: ${e}`,new p.SignalDecryptionError("Unexpected decryption error")}))},t.decryptSignalProto=function(){return E.apply(this,arguments)},t.encryptSenderKeyMsgSignalProto=function(){return S.apply(this,arguments)},t.encryptSignalProto=function(e,t){return __LOG__(2)`CryptoLibrarySignal::encryptSignalProto`,A().encryptContent({handleNewSession:h.handleNewSession,loadSession:h.loadSession},(0,f.widToDeviceJid)(e),t,null).then((e=>{if(e.success){var t;const{type:n,ciphertext:r}=e.value;return{type:null!==(t=u.CiphertextType.cast(n))&&void 0!==t?t:u.CiphertextType.Msg,ciphertext:(0,o.uint8ArrayToBuffer)(r)}}throw __LOG__(3)`CryptoLibrarySignal::encryptSignalProto:failed with error ${e.error}`,(0,_.default)(e.error)}))},t.getCryptoLibModule=A,t.getGroupSenderKeyInfo=function(){return v.apply(this,arguments)},t.getRemoteRegId=function(){return y.apply(this,arguments)},t.processSenderKeyDistributionMsg=function(e,t,n){return __LOG__(2)`CryptoLibrarySignal::processSenderKeyDistributionMsg`,A().saveSenderKeySession({loadSenderKeySession:h.loadSenderKeySession,saveSenderKeySession:h.saveSenderKeySession},e,(0,f.widToDeviceJid)(t),new Uint8Array(n)).then((e=>{if(!e.success)throw __LOG__(3)`CryptoLibrarySignal::processSenderKeyDistributionMsg failed with error ${e.error}`,(0,_.default)(e.error)}))};var i=r(n(48926)),o=n(89738),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(35389)),s=n(44037),l=n(39876),u=n(96193),c=n(92445),d=r(n(43534)),p=n(88515),f=n(14356),_=r(n(89482));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const h=(0,c.getCryptoDbCallbacks)();function A(){return{establishOutgoingSession:a.establishOutgoingSession,decryptContent:a.decryptContent,encryptContent:a.encryptContent,encryptGroupContent:a.encryptGroupContent,decryptGroupContent:a.decryptGroupContent,saveSenderKeySession:a.saveSenderKeySession,rotateGroupSenderKey:a.rotateGroupSenderKey}}function m(){return(m=(0,i.default)((function*(e,t){__LOG__(2)`CryptoLibrarySignal::createSignalSession`;const n=yield h.getRegistrationInfo();if(!n)throw(0,_.default)("No registration info found");return A().establishOutgoingSession({handleNewSession:h.handleNewSession},n,(0,f.widToDeviceJid)(e),t).then((e=>{if(!e.success)throw __LOG__(3)`CryptoLibrarySignal::createSignalSession failed with error ${e.error}`,(0,_.default)(e.error)}))}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t,n){__LOG__(2)`CryptoLibrarySignal::decryptSignalProto`;const r=t===u.CiphertextType.Pkmsg?"pkmsg":"msg";let i;const a=yield h.getRegistrationInfo();return a?A().decryptContent({handleNewSession:h.handleNewSession,loadOneTimePreKey:h.loadOneTimePreKey,loadSession:h.loadSession,loadSignedPreKey:h.loadSignedPreKey},a,(0,f.widToDeviceJid)(e),{ciphertext:n,type:r},(e=>(i=(0,o.uint8ArrayToBuffer)(e),Promise.resolve()))).then((e=>{if(e.success){if(null==i)throw new p.SignalDecryptionError("Null result on successful decryption");return i}const{error:t}=e;throw __LOG__(3)`CryptoLibrarySignal::decryptMessage failed with error ${t}`,"errDuplicateMsg"===t?new p.SignalMessageCounterError(t):new p.SignalDecryptionError(t)})).catch((e=>{if(e instanceof p.SignalDecryptionError||e instanceof p.SignalMessageCounterError)throw e;throw __LOG__(4,void 0,new Error)`CryptoLibrarySignal::decryptSignalProto failed to decrypt: ${e.stack}`,new p.SignalDecryptionError("Unexpected decryption error")})):Promise.reject((0,_.default)("No registration info found"))}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=yield h.loadSession((0,f.widToDeviceJid)(e));return null==t?void 0:t.remote}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e,t,n){var r;const i=(0,f.widToMulticastJid)(e),a=null!==(r=(0,s.validateGroupJid)(i))&&void 0!==r?r:(0,s.validateStatusJid)(i);if(null==a)throw(0,_.default)("Broadcast JIDs are not supported by WACryptoManager yet.");const u=(0,f.widToDeviceJid)(t);let c=yield A().encryptGroupContent({loadSenderKeySession:h.loadSenderKeySession,saveSenderKeySession:h.saveSenderKeySession},a,u,n);if(!c.success&&"errLoadSenderKeySession"===c.error){c.error,__LOG__(2)`CryptoLibrarySignal::encryptGroupMessage no sender key, generating a new one`;const e=yield(0,l.makeKeyPair)();yield A().rotateGroupSenderKey({saveSenderKeySession:h.saveSenderKeySession},a,u,e),c=yield A().encryptGroupContent({loadSenderKeySession:h.loadSenderKeySession,saveSenderKeySession:h.saveSenderKeySession},a,u,n)}if(c.success){const{ciphertext:e}=c.value.ciphertext,{senderKeyDistributionProto:t}=c.value;return{ciphertext:(0,o.uint8ArrayToBuffer)(e),senderKeyBytes:(0,o.uint8ArrayToBuffer)(t)}}throw __LOG__(3)`CryptoLibrarySignal::encryptGroupMessage failed with error ${c.error}`,(0,_.default)(c.error)}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e,t){__LOG__(2)`CryptoLibrarySignal::getGroupSenderKeyInfo`;const n=yield d.default.createSenderKeyDistributionMsg(h.loadSenderKeySession,h.saveSenderKeySession,(0,s.toGroupJid)(e.toString({legacy:!0})),(0,f.widToDeviceJid)(t));if(n.success)return(0,o.uint8ArrayToBuffer)(n.value);throw __LOG__(3)`CryptoLibrarySignal::getGroupSenderKeyInfo failed with error ${n.error}`,(0,_.default)(n.error)}))).apply(this,arguments)}},92445:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCryptoDbCallbacks=function(){return{loadSession:function(){var e=(0,i.default)((function*(e){const t=(0,c.createSignalAddress)((0,p.createDeviceWid)(e)),n=yield(0,d.getSignalProtocolStore)().loadSession(t);return null!=n?n:null}));return function(){return e.apply(this,arguments)}}(),handleNewSession:(e,t,n,r)=>{const i=(0,c.createSignalAddress)((0,p.createDeviceWid)(e));return Promise.all([(0,d.getSignalProtocolStore)().storeSession(i,t),n&&(0,d.getSignalProtocolStore)().saveIdentity(i,(0,o.uint8ArrayToBuffer)(n)),null!=r&&(0,d.getSignalProtocolStore)().removePreKey(r)]).then((()=>(0,a.makeResult)()))},loadSignedPreKey:e=>(0,d.getSignalProtocolStore)().loadSignedPreKey(e).then((t=>{if(null==t)return null;const n=(0,s.makeKeyPairFromArrayBuffers)(t.pubKey,t.privKey),r=(0,u.encodeSignalProto)(l.SignedPreKeyRecordStructureSpec,{id:e,publicKey:(0,s.serializePubKey)(n),privateKey:n.privateKey,signature:new Uint8Array(t.signature),timestamp:0});return(0,u.castToByteEncoded)(r)})),loadOneTimePreKey:e=>(0,d.getSignalProtocolStore)().loadPreKey(e).then((t=>{if(null==t)return null;const n=(0,s.makeKeyPairFromArrayBuffers)(t.pubKey,t.privKey),r=(0,u.encodeSignalProto)(l.PreKeyRecordStructureSpec,{id:e,publicKey:(0,s.serializePubKey)(n),privateKey:n.privateKey});return(0,u.castToByteEncoded)(r)})),loadSenderKeySession:(e,t)=>{const n=(0,c.createSignalLikeSenderKeyName)(e,(0,p.createDeviceWid)(t));return(0,d.getSignalProtocolStore)().loadSenderKey(n).then((e=>null==e?(0,a.makeError)("errLoadSenderKeySession"):(0,a.makeResult)(e)))},saveSenderKeySession:(e,t,n)=>{const r=(0,c.createSignalLikeSenderKeyName)(e,(0,p.createDeviceWid)(t));return(0,d.getSignalProtocolStore)().storeSenderKey(r,n)},getRegistrationInfo:(e=(0,i.default)((function*(){const e=yield(0,d.getSignalProtocolStore)().getLocalRegistrationId(),t=yield(0,d.getSignalProtocolStore)().getIdentityKeyPair();if(null!=e&&null!=t)return e&&t?{regId:(0,u.castRegistrationId)(e),staticKeyPair:(0,s.makeKeyPairFromArrayBuffers)(t.pubKey.slice(1),t.privKey)}:void 0})),function(){return e.apply(this,arguments)})};var e};var i=r(n(48926)),o=n(89738),a=n(22207),s=n(39876),l=n(36379),u=n(75739),c=n(49178),d=n(4830),p=n(51017)},19070:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.toCryptoManagerSenderKeySession=function(){return d.apply(this,arguments)},t.toSignalSenderKeySession=function(e){const t=e.senderKeyStates.map((e=>_(e)));return(0,u.makeNewLibsignalSenderKeySession)(t)},t.toSignalSenderKeyState=_;var i=r(n(48926)),o=n(89738),a=n(13350),s=n(22558),l=n(75739),u=n(4458),c=r(n(41143));function d(){return(d=(0,i.default)((function*(e){const t=e.sessions,n=yield(0,a.promiseReduce)(t,function(){var e=(0,i.default)((function*(e,t){const n=yield p(t);return null==e?(0,s.makeNewSenderKeySession)(n):(0,s.updateSessionWithNewSenderKeyState)(e,n)}));return function(){return e.apply(this,arguments)}}(),null);return(0,c.default)(null!=n,"toCryptoManagerSenderKeySession: empty session after conversion"),n}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){const t=void 0!==e.signatureKey.pubKey?new Uint8Array(e.signatureKey.pubKey):new Uint8Array(e.signatureKey),n=e.signatureKey.privKey?(0,l.ensureSize)(new Uint8Array(e.signatureKey.privKey),32):void 0,r=(0,s.makeSenderKeyChainKey)(e.chainKey.counter,(0,l.ensureSize)(new Uint8Array(e.chainKey.key),32)),i=e.keyId,o=[];for(let t=0;t<e.messageKeys.length;t++)if(e.messageKeys[t]){const n=e.messageKeys[t],r=yield(0,l.hkdf)(new Uint8Array(n),null,"WhisperGroup",50).then((e=>(0,s.makeSenderKeyMsgKey)(t,e)));o.push(r)}return(0,s.makeSenderKeyState)(t,n,r,i,o)}))).apply(this,arguments)}function _(e){const t=(0,u.makeLibsignalSenderKeyChainKey)(e.senderKeyChainKey.nextMsgIndex,(0,o.uint8ArrayToBuffer)(e.senderKeyChainKey.chainKey)),n=e.senderKeyId,r=e.senderSigningKeyPrivate,i=null!=r?(0,u.makeLibsignalSenderKeySignatureKey)((0,o.uint8ArrayToBuffer)(e.senderSigningKeyPublic),(0,o.uint8ArrayToBuffer)(r)):(0,u.makeLibsignalSenderKeySignatureKey)((0,o.uint8ArrayToBuffer)(e.senderSigningKeyPublic));return(0,u.makeLibsignalSenderKeyState)(i,t,n,[])}},80219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupSenderSignalSession=function(e,t,n){return r.processSenderKeyDistributionMsg(e,t,n)},t.createSignalSession=function(e,t){var n,i,o;const a={identity:new Uint8Array(e.identityKey),oneTimeKey:e.preKey&&{id:null===(n=e.preKey)||void 0===n?void 0:n.keyId,publicKey:(null===(i=e.preKey)||void 0===i?void 0:i.publicKey)&&new Uint8Array(null===(o=e.preKey)||void 0===o?void 0:o.publicKey)},regId:e.registrationId,signedKey:{id:e.signedPreKey.keyId,publicKey:new Uint8Array(e.signedPreKey.publicKey),signature:new Uint8Array(e.signedPreKey.signature)}};return r.createSignalSession(t,a)},t.getRemoteRegId=function(e){return r.getRemoteRegId(e).then((e=>null==e?void 0:e.regId))};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(78283));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}},18304:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.toCryptoLibrarySessionPrevSessions=function(){return c.apply(this,arguments)},t.toCryptoManagerSession=d;var i=r(n(48926)),o=n(54080),a=n(39876),s=n(75739),l=n(1674),u=r(n(89482));function c(){return(c=(0,i.default)((function*(e,t){const n=f(e),r=yield d(n,t),i=[];for(const n in e.sessions)if(-1!==e.sessions[n].indexInfo.closed){const r=yield d(e.sessions[n],t),o=(0,l.detachSession)(r);i.push(o)}return(0,l.setPrevSessions)(r,i)}))).apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t){try{const n=[];if(e.currentRatchet.lastRemoteEphemeralKey){const t=e[(0,o.arrayBufferToString)(e.currentRatchet.lastRemoteEphemeralKey)];if(t){const r=[];for(let e=0;e<t.messageKeys.length;e++){const n=t.messageKeys[e],i=yield(0,s.hkdf)(new Uint8Array(n),null,"WhisperMessageKeys",80).then((t=>(0,l.splitMsgKey)(e,t)));r.push(i)}const i=e.currentRatchet.lastRemoteEphemeralKey,o=t.chainKey.key;if(null!=i&&null!=o){const e=(0,l.makeRecvChain)((0,a.castToSerializedPubKey)(new Uint8Array(i)),t.chainKey.counter+1,(0,s.toBytes)(o,32),r);n.push(e)}}}const r=e[(0,o.arrayBufferToString)(e.currentRatchet.ephemeralKeyPair.pubKey)],i=(0,a.castToSerializedPubKey)(new Uint8Array(e.currentRatchet.ephemeralKeyPair.pubKey)),u=r.chainKey.key,c=(0,s.toBytes)(e.currentRatchet.ephemeralKeyPair.privKey,32),d=(0,a.makeSerializedKeyPairFrom)(c,i),p=(0,l.makeSendChain)(d,r.chainKey.counter+1,(0,s.toBytes)(u,32)),f=t&&{regId:t.registrationId,pubKey:(0,a.serializeIdentity)(new Uint8Array(t.identityKeyPair.pubKey))},_=t&&{regId:e.registrationId,pubKey:new Uint8Array(e.indexInfo.remoteIdentityKey)},g=e.indexInfo.baseKey&&(0,a.castToSerializedPubKey)(new Uint8Array(e.indexInfo.baseKey)),h=e.currentRatchet.previousCounter,A=(0,s.toBytes)(e.currentRatchet.rootKey,32);let m;null!=e.pendingPreKey&&(m=(0,l.makeInitialExchangeInfo)(e.pendingPreKey.preKeyId,e.pendingPreKey.signedKeyId,(0,a.castToSerializedPubKey)(new Uint8Array(e.pendingPreKey.baseKey))));return(0,l.makeSession)(f,_,A,n,p,m,Math.max(h,0),[],g)}catch(e){throw e}}))).apply(this,arguments)}function f(e){const t=e.sessions;for(const e in t)if(-1===t[e].indexInfo.closed)return t[e];throw(0,u.default)("getOpenSession: There are no open session")}},4458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLibsignalSenderKeyChainKey=function(e,t){return{counter:e,key:t}},t.makeLibsignalSenderKeyMsgKey=function(e){return e},t.makeLibsignalSenderKeySignatureKey=function(e,t){if(null!=t)return{pubKey:e,privKey:t};return e},t.makeLibsignalSenderKeyState=function(e,t,n,r){return{signatureKey:e,chainKey:t,keyId:n,messageKeys:null==r?[]:r}},t.makeNewLibsignalSenderKeySession=function(e){return{sessions:e,version:"v1"}}},43534:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(65461),a=n(22207),s=n(37344),l=n(3659),u=n(22558),c=n(39876),d=n(75739),p=n(1674),f=n(29299),_=n(77589),g=n(29987),h=n(78283),A=n(33655);class m{createSenderKeyDistributionMsg(e,t,n,r){return(0,i.default)((function*(){let i=yield e(n,r);if(!i.success&&"errLoadSenderKeySession"===i.error){const o=yield(0,c.makeKeyPair)();yield(0,h.getCryptoLibModule)().rotateGroupSenderKey({saveSenderKeySession:t},n,r,o),i=yield e(n,r)}if(i.success){const e=i.value.senderKeyStates.slice(-1);if(e.length>0)return(0,a.makeResult)((0,l.createSenderKeyDistributionProto)((0,u.convertFromRawToSenderKeyState)(e[0])))}return(0,a.makeError)("errGetSenderKeyProto")}))()}getSessionAliceBaseKey(e,t){return(0,i.default)((function*(){const n=yield t(e);return(null==n?void 0:n.aliceBaseKey)?(0,a.makeResult)((0,d.toBuffer)(n.aliceBaseKey)):(0,a.makeError)("errSessionExists")}))()}extractIdentityKey(e){const t=(0,s.readContent)(e,p.FORMAT_VERSION,0);if(!t.success)return t;try{const e=(0,A.decodeProtobuf)(_.PreKeySignalMessageSpec,t.value),{registrationId:n,signedPreKeyId:r,baseKey:i,identityKey:o,message:s}=e;return null==n||null==r||null==i||null==o||null==s?(0,a.makeError)("errSignalDeserializePkInvalidProtoFormat"):((0,d.ensureSize)(new Uint8Array(o),33),(0,a.makeResult)(o))}catch(e){return __LOG__(3)`extractIdentityKey: parse proto failed`,(0,a.makeError)("errSignalDeserializePkKeyBadFormat")}}verifySignature(e,t,n){const r=(0,f.convertPublicKeyToSerializedPubKey)(e),i=(0,d.ensureSize)(n,64);return(0,f.verifyMsgSignalVariant)(r,t,i)}signMsg(e,t,n){return(0,i.default)((function*(){const r=(0,c.makeKeyPairFromArrayBuffers)(e,t),i=yield(0,f.signMsg)(r,new Uint8Array(n));return(0,d.toBuffer)(i)}))()}makePreKey(e){const t=(0,c.makePreKeys)(e,1),{id:n,keyPair:r}=t[0].plainObject;return{preKeyId:n,privKey:(0,d.toBuffer)(r.privateKey),pubKey:(0,d.toBuffer)(r.publicKey)}}makeSignedPreKey(e,t){const n=(0,c.makeKeyPairFromArrayBuffers)(e.pubKey,e.privKey),r=(0,f.makeSignedPreKey)(t,(0,g.unixTimeMs)(),n);return{preKeyId:r.id,signature:(0,d.toBuffer)(r.signature),pubKey:(0,d.toBuffer)(r.keyPair.publicKey),privKey:(0,d.toBuffer)(r.keyPair.privateKey)}}makeKeyPair(){const{privateKey:e,publicKey:t}=(0,c.makeKeyPair)();return{privKey:(0,d.toBuffer)(e),pubKey:(0,d.toBuffer)(t)}}}m.prototype.verify=o.verify,m.prototype.makeRegistrationId=d.makeRegistrationId,m.prototype.makeSenderKeyId=d.makeSenderKeyId;var E=new m;t.default=E},73688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyIdentityKey=function(e){if(e instanceof ArrayBuffer)return(0,r.bufferToStr)(e);return e};var r=n(49178)},4830:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.enableMemSignalStore=function(){i.default.switchToMemMode()},t.enablePersistSignalStore=function(){i.default.switchToPersistMode()},t.getPersistSignalProtocolStore=function(){return i.default},t.getSignalProtocolStore=function(){return i.default};var i=r(n(96035))},79442:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SignalStoreCache=void 0;var i=r(n(50361)),o=n(38918);t.SignalStoreCache=class{constructor(){this.RegistrationInfo=null,this.SignedPreKeyStore=new Map,this.PrekeyStore=new Map,this.SessionStore=new Map,this.IdentityStore=new Map,this.SenderKeyStore=new Map,this.Mutex={session:new o.Semaphore,identity:new o.Semaphore,senderKey:new o.Semaphore,preKey:new o.Semaphore},this.Dirty={session:new Set,identity:new Set,senderKey:new Set,preKey:new Set}}_generateSessionUpdate(){const e=[],t=[];return this.Dirty.session.forEach((n=>{const r=this.SessionStore.get(n);r&&(r.deleted?t.push(n):e.push({address:n,session:(0,i.default)(r.session)}))})),{update:e,remove:t}}_generateSenderKeyUpdate(){const e=[];return this.Dirty.senderKey.forEach((t=>{const n=this.SenderKeyStore.get(t);if(n){const r=t.split("::");2===r.length&&e.push({senderKeyName:t,senderId:r[1],senderKey:(0,i.default)(n)})}})),e}_generateIdentityUpdate(){const e=[],t=[];return this.Dirty.identity.forEach((n=>{const r=this.IdentityStore.get(n);r&&(r.deleted?t.push(n):e.push({identifier:n,identityKey:r.identityKey,rowId:r.rowId,sentAddonRowId:r.sentAddonRowId}))})),{update:e,remove:t}}_generatePreKeyUpdate(){const e=[];return this.Dirty.preKey.forEach((t=>{const n=this.PrekeyStore.get(t);(null==n?void 0:n.deleted)&&e.push(parseInt(t,10))})),e}generateCacheUpdate(){const e=this._generateIdentityUpdate(),t=this._generateSessionUpdate(),n={sessionUpdate:t.update,sessionRemove:t.remove,identityUpdate:e.update,identityRemove:e.remove,senderKeyUpdate:this._generateSenderKeyUpdate(),preKeyRemove:this._generatePreKeyUpdate()};return n}clearDirty(){this.Dirty={session:new Set,identity:new Set,senderKey:new Set,preKey:new Set}}clear(){this.RegistrationInfo=null,this.SignedPreKeyStore.clear(),this.PrekeyStore.clear(),this.SessionStore.clear(),this.IdentityStore.clear(),this.SenderKeyStore.clear(),this.clearDirty()}}},96035:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(42247),s=n(1619),l=n(52894),u=n(98458),c=n(73688),d=n(49178),p=n(20962),f=n(79442),_=n(32954),g=n(83986),h=n(3885),A=n(51017),m=r(n(89482));const E=n(76672).Mirrored(["Persist","Memory"]);var y=new class{constructor(){this.Direction={SENDING:1,RECEIVING:2},this._cache=new f.SignalStoreCache,this._mode=E.Persist}getIdentityKeyPair(){var e=this;return(0,o.default)((function*(){var t;return e._cache.RegistrationInfo||(e._cache.RegistrationInfo=yield g.waSignalStore.getRegistrationInfo()),(null===(t=e._cache.RegistrationInfo)||void 0===t?void 0:t.identityKeyPair)?(0,l.toSignalCurveKeyPair)(e._cache.RegistrationInfo.identityKeyPair):void 0}))()}getLocalRegistrationId(){var e=this;return(0,o.default)((function*(){var t;return e._cache.RegistrationInfo||(e._cache.RegistrationInfo=yield g.waSignalStore.getRegistrationInfo()),(null===(t=e._cache.RegistrationInfo)||void 0===t?void 0:t.registrationId)||void 0}))()}isTrustedIdentity(){return Promise.resolve(!0)}_loadIdentityKeyImpl(e){var t=this;return(0,o.default)((function*(){var n;if(null==e)throw(0,m.default)("Tried to get identity key for undefined/null key");if(!t._cache.IdentityStore.has(e)){const n=yield g.waSignalStore.getIdentityKeyWithRowId(e);t._cache.IdentityStore.set(e,n)}return(null===(n=t._cache.IdentityStore.get(e))||void 0===n?void 0:n.identityKey)||void 0}))()}loadIdentityKey(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.identity.acquire();try{return yield t._loadIdentityKeyImpl(e)}finally{n.release()}}))()}_putIdentityImpl(e,t){this._cache.IdentityStore.set(e,{identityKey:t}),this._cache.Dirty.identity.add(e)}putIdentity(e,t){var n=this;return(0,o.default)((function*(){const r=yield n._cache.Mutex.identity.acquire();try{n._putIdentityImpl(e,t)}finally{r.release()}}))()}_saveIdentity(e,t){var n=this;return(0,o.default)((function*(){const r=(0,c.stringifyIdentityKey)(t),i=yield n.loadIdentityKey(e);if(!i||i!==r){if(i){if(e===(0,d.createSignalAddress)((0,h.getMeUser)()).toString())return void(0,s.frontendFireAndForget)("handleSelfPrimaryIdentityChange",{});null!=e&&(yield(0,u.handleNewIdentity)(e))}yield n.putIdentity(e,r)}}))()}saveIdentity(e,t){var n=this;return(0,o.default)((function*(){if(null==e)throw(0,m.default)("Tried to put identity key for undefined/null key");if(yield n._saveIdentity(e,t),e!==(0,d.createSignalAddress)((0,h.getMeUser)()).toString()){const r=(0,A.widFromSignalAddress)(e),i=(0,a.getAlternateDeviceWid)(r),o=null!=i?(0,d.createSignalAddress)(i).toString():null;null!=o&&(yield n._saveIdentity(o,t))}}))()}getIdentityWithRowId(e){var t=this;return(0,o.default)((function*(){if(null==e)throw(0,m.default)("Tried to get identity key for undefined/null key");yield t.loadIdentityKey(e);const n=t._cache.IdentityStore.get(e);if(null!=n&&void 0===n.deleted)return n}))()}bulkGetIdentityWithRowId(e){var t=this;return(0,o.default)((function*(){if(null==e)throw(0,m.default)("Tried to get identity key for undefined/null key");return 0===e.length?[]:(yield t.bulkLoadIdentityKey(e),e.map((e=>{const n=t._cache.IdentityStore.get(e);if(null!=n&&void 0===n.deleted)return n})))}))()}_bulkLoadIdentityKeyImpl(e){var t=this;return(0,o.default)((function*(){if(null==e)throw(0,m.default)("Tried to get identity key for undefined/null key");if(0===e.length)return[];const n=new Array(e.length),r=[];if(e.forEach(((e,i)=>{var o;t._cache.IdentityStore.has(e)?n[i]=null===(o=t._cache.IdentityStore.get(e))||void 0===o?void 0:o.identityKey:r.push({id:e,pos:i})})),r.length>0){(yield g.waSignalStore.bulkGetIdentityKeyWithRowId(r.map((e=>e.id)))).forEach(((e,i)=>{const o=r[i];t._cache.IdentityStore.set(o.id,e),n[o.pos]=null==e?void 0:e.identityKey}))}return n}))()}bulkLoadIdentityKey(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.identity.acquire();try{return yield t._bulkLoadIdentityKeyImpl(e)}finally{n.release()}}))()}expandNewIdentitiesList(e){const t=new Map;return e.forEach((e=>{t.set(e.identifier,{identifier:e.identifier,identityKey:e.identityKey})})),e.forEach((e=>{const n=(0,A.widFromSignalAddress)(e.identifier),r=(0,a.getAlternateDeviceWid)(n);if(null==r)return;const i=(0,d.createSignalAddress)(r).toString();t.set(i,{identifier:i,identityKey:e.identityKey})})),Array.from(t.values())}_bulkCreateIdentityImpl(e){var t=this;return(0,o.default)((function*(){if(null==e)throw(0,m.default)("Tried to bulk put identity key with undefined/null");__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]bulkCreateIdentity: store ${e.length} value(s): start`,yield(0,_.getStorage)().lock(["identity-store"],(0,o.default)((function*(){const n=e.map((e=>e.identifier)),r=yield t._bulkLoadIdentityKeyImpl(n);let i=e.filter(((e,t)=>!r[t]));i.length>0&&(i=t.expandNewIdentitiesList(i),yield g.waSignalStore.bulkPutIdentity(i),i.forEach((e=>{let{identifier:n,identityKey:r}=e;t._cache.IdentityStore.set(n,{identityKey:r})}))),__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]bulkCreateIdentity: store ${e.length} value(s) (new: ${i.length}): end`})))}))()}bulkCreateIdentity(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.identity.acquire();try{yield t._bulkCreateIdentityImpl(e)}finally{n.release()}}))()}_removeIdentityImpl(e){this._cache.IdentityStore.set(e,{deleted:!0}),this._cache.Dirty.identity.add(e)}removeIdentity(e){var t=this;return(0,o.default)((function*(){if(null==e)return Promise.reject((0,m.default)("Tried to remove identity key for undefined/null key"));const n=yield t._cache.Mutex.identity.acquire();try{yield t._removeIdentityImpl(e)}finally{n.release()}}))()}_loadPreKeyImpl(e){var t=this;return(0,o.default)((function*(){if(null==e)return;if(!t._cache.PrekeyStore.has(e)){var n;const r=null===(n=yield g.waSignalStore.getPreKeyById(e))||void 0===n?void 0:n.keyPair;t._cache.PrekeyStore.set(e,{keyPair:r})}const r=t._cache.PrekeyStore.get(e);return(null==r?void 0:r.keyPair)||void 0}))()}loadPreKey(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.preKey.acquire();try{return yield t._loadPreKeyImpl(e)}finally{n.release()}}))()}_removePreKeyImpl(e){return null==e?Promise.reject((0,m.default)("Tried to remove pre key without keyId")):(this._cache.PrekeyStore.set(e,{deleted:!0}),this._cache.Dirty.preKey.add(e),Promise.resolve())}removePreKey(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.preKey.acquire();try{yield t._removePreKeyImpl(e)}finally{n.release()}}))()}loadSignedPreKey(e){var t=this;return(0,o.default)((function*(){if(null!=e){if(!t._cache.SignedPreKeyStore.has(e)){const n=yield g.waSignalStore.getSignedPreKeyById(e),r=n?{pubKey:n.keyPair.pubKey,privKey:n.keyPair.privKey,signature:n.signature}:null;t._cache.SignedPreKeyStore.set(e,r)}return t._cache.SignedPreKeyStore.get(e)||void 0}}))()}_loadSessionImpl(e){var t=this;return(0,o.default)((function*(){var n;if(null!=e){if(!t._cache.SessionStore.has(e)){const n=yield g.waSignalStore.getSession(e);t._cache.SessionStore.set(e,n?{session:n}:void 0)}return(yield(0,p.maybeConvertSession)(null===(n=t._cache.SessionStore.get(e))||void 0===n?void 0:n.session))||void 0}}))()}loadSession(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.session.acquire();try{return yield t._loadSessionImpl(e)}finally{n.release()}}))()}_storeSessionImpl(e,t){if(null==e)throw(0,m.default)("Tried to put session without identifier");this._cache.SessionStore.set(e,{session:t}),this._cache.Dirty.session.add(e)}storeSession(e,t){var n=this;return(0,o.default)((function*(){const r=yield n._cache.Mutex.session.acquire();try{n._storeSessionImpl(e,t)}finally{r.release()}}))()}_removeSessionImpl(e){if(null==e)throw(0,m.default)("Tried to remove session without identifier");this._cache.SessionStore.set(e,{deleted:!0}),this._cache.Dirty.session.add(e)}removeSession(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.session.acquire();try{t._removeSessionImpl(e)}finally{n.release()}}))()}_containSessionsImpl(e){var t=this;return(0,o.default)((function*(){const n=[];for(const r of e)t._cache.SessionStore.has(r)||n.push(r);if(n.length>0){(yield g.waSignalStore.bulkGetSession(n)).forEach(((e,r)=>{const i=n[r];t._cache.SessionStore.set(i,e?{session:e}:void 0)}))}return e.map((e=>{const n=t._cache.SessionStore.get(e);return null!=n&&!(null==n?void 0:n.deleted)}))}))()}containSessions(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.session.acquire();try{return yield t._containSessionsImpl(e)}finally{n.release()}}))()}_storeSenderKeyImpl(e,t){return null==e?Promise.reject((0,m.default)("Tried to put session without identifier")):(this._cache.SenderKeyStore.set(e,t),this._cache.Dirty.senderKey.add(e),Promise.resolve())}storeSenderKey(e,t){var n=this;return(0,o.default)((function*(){const r=yield n._cache.Mutex.senderKey.acquire();try{yield n._storeSenderKeyImpl(e,t)}finally{r.release()}}))()}_loadSenderKeyImpl(e){var t=this;return(0,o.default)((function*(){if(null!=e){if(!t._cache.SenderKeyStore.has(e)){const n=yield g.waSignalStore.getSenderKey(e);t._cache.SenderKeyStore.set(e,n)}return(0,p.maybeConvertSenderKey)(t._cache.SenderKeyStore.get(e))||void 0}}))()}loadSenderKey(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.senderKey.acquire();try{return yield t._loadSenderKeyImpl(e)}finally{n.release()}}))()}switchToMemMode(){this._mode=E.Memory}switchToPersistMode(){this._mode=E.Persist}generateSnapshot(){if(this._mode===E.Memory)return this._cache.generateCacheUpdate()}deleteAllCache(){__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]deleteAllCache`,this._cache.clear()}flushBufferToDiskIfNotMemOnlyMode(){var e=this;return(0,o.default)((function*(){if(e._mode===E.Memory)return __LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]flushBufferToDiskIfNotMemOnlyMode: skip for memory mode`,Promise.resolve();__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]flushBufferToDiskIfNotMemOnlyMode: start`;const t=[yield e._cache.Mutex.identity.acquire(),yield e._cache.Mutex.session.acquire(),yield e._cache.Mutex.senderKey.acquire(),yield e._cache.Mutex.preKey.acquire()];__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]flushBufferToDiskIfNotMemOnlyMode: lock complete`;const n=e._cache.generateCacheUpdate();try{yield(0,_.getStorage)().lock(["session-store","identity-store","prekey-store","senderkey-store"],(0,o.default)((function*(){yield Promise.all([g.waSignalStore.bulkPutSession(n.sessionUpdate),g.waSignalStore.bulkPutIdentityKeyWithRowId(n.identityUpdate),g.waSignalStore.bulkPutSenderKey(n.senderKeyUpdate),g.waSignalStore.bulkRemovePreKey(n.preKeyRemove),g.waSignalStore.bulkRemoveSession(n.sessionRemove),g.waSignalStore.bulkRemoveIdentity(n.identityRemove)])}))),e._cache.clearDirty()}finally{t.forEach((e=>e.release()))}__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]flushBufferToDiskIfNotMemOnlyMode: done`}))()}_updateIdentityRangeAfterEncryptionImpl(e,t,n){var r=this;return(0,o.default)((function*(){__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]updateIdentityRangeAfterEncryption: start`,yield r._bulkLoadIdentityKeyImpl(n);const o=[];n.forEach((n=>{const a=r._cache.IdentityStore.get(n);if(a&&!a.deleted&&(null==a[e]||a[e]>t)){const s=(0,i.default)({},a);s[e]=t,r._cache.IdentityStore.set(n,s),r._cache.Dirty.identity.add(n),o.push(n)}})),__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]updateIdentityRangeAfterEncryption: ${o.length} updated`}))()}updateIdentityRangeAfterEncryption(e,t,n){var r=this;return(0,o.default)((function*(){const i=yield r._cache.Mutex.identity.acquire();try{yield r._updateIdentityRangeAfterEncryptionImpl(e,t,n)}finally{i.release()}}))()}_maybeCleanUpUnconvertedSessionAfterEncryption(e){if(null==e)return Promise.resolve();const t=this._cache.SessionStore.get(e);return t&&(0,p.shouldConvertSession)(t.session)&&(__LOG__(2,void 0,void 0,void 0,["unified-store"])`[Signal]maybeCleanUpUnconvertedSession: delete unconverted session`,this._removeSessionImpl(e)),Promise.resolve()}maybeCleanUpUnconvertedSession(e){var t=this;return(0,o.default)((function*(){const n=yield t._cache.Mutex.session.acquire();try{return yield t._maybeCleanUpUnconvertedSessionAfterEncryption(e)}finally{n.release()}}))()}};t.default=y},87167:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncAndGetDeviceList=function(){return v.apply(this,arguments)},t.syncDeviceList=A,t.syncMyDeviceList=function(){return S.apply(this,arguments)};var i=r(n(48926)),o=r(n(94654)),a=n(17802),s=n(97183),l=n(53098),u=n(16157),c=n(30304),d=n(3885),p=n(30633),f=n(49673),_=n(51017),g=r(n(89482));const h=new Map;function A(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){let{wids:t,context:n,phash:r}=e;if(null!=r){const e=(yield(0,s.getDeviceIds)(t)).map((e=>null==e?[]:e.devices.map((t=>(0,_.createDeviceWidFromDeviceListPk)(e.id,t.id,t.isHosted))))),n=(0,o.default)(e,(e=>e));if(r===(yield(0,c.phashV2)(n)))return}const i=new Set,a=[];if(t.forEach((e=>{const t=h.get((0,l.createDeviceListPK)(e));t?i.add(t):a.push(e)})),0===a.length)return void(yield Promise.all(Array.from(i)));const u=E(a,n);a.map((e=>{h.set((0,l.createDeviceListPK)(e),u)})),yield Promise.all([u,...Array.from(i)])}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){try{const n=yield(0,s.getDeviceInfoForSync)(e),r=n.map((e=>null==e?[]:e.devices.map((t=>(0,_.createDeviceWidFromDeviceListPk)(e.id,t.id,t.isHosted))))),i=yield Promise.all(r.map((e=>0===e.length?"":(0,c.phashV2)(e))));return I(e.map(((e,t)=>{var r,o;return{id:e,hash:i[t],ts:null===(r=n[t])||void 0===r?void 0:r.timestamp,expectedTs:null===(o=n[t])||void 0===o?void 0:o.expectedTs}})),t)}catch(e){__LOG__(4,void 0,new Error)`Failed to sync device list with error: ${e}`}finally{e.map((e=>{h.delete((0,l.createDeviceListPK)(e))}))}}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(){yield A({wids:(0,d.getMePNandLIDWids)(),context:null,phash:null})}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){return yield A({wids:e,context:null,phash:null}),(0,s.getDeviceIds)(e)}))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e,t){if(0===e.length)return;const n=(new p.USyncQuery).withContext(t||"interactive").withDeviceProtocol();e.forEach((e=>{0!==e.id.user&&n.withUser((new f.USyncUser).withId(e.id).withDeviceHash(String(e.hash)).withTs(e.ts).withExpectedTs(e.expectedTs))}));const r=yield n.execute();if(r.error.all)throw(0,g.default)(`syncDeviceList: error ${r.error.all.errorCode}: ${r.error.all.errorText}`);r.error.devices&&__LOG__(3)`syncDeviceList: error ${r.error.devices.errorCode}: ${r.error.devices.errorText}`;let i=r.list.filter((e=>!("errorCode"in e.devices)));i=i.map((e=>({wid:e.id,devices:e.devices})));const o=i.filter((e=>{var t;return null===(t=e.devices.keyIndex)||void 0===t?void 0:t.signedKeyIndexBytes})).map((e=>e.wid));return __LOG__(2)`syncDeviceList: skipping ${r.list.length-o.length} out of ${r.list.length} records`,yield(0,u.getAndStoreIdentityKeys)(o),(0,a.handleADVDeviceSyncResult)(i)}))).apply(this,arguments)}},60627:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLastAddOnsPreview=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(93040),a=r(n(60001)),s=n(69785);function l(){return(l=(0,i.default)((function*(e){const t=new Set(e.map((e=>a.default.fromString(e).remote.toString()))),n=yield(0,s.bulkGetChatLastAddOnPreviewMap)(Array.from(t)),r=new Map;n.forEach(((t,n)=>{e.includes(null==t?void 0:t.parentMsgKey)&&r.set(n,void 0)})),yield(0,o.bulkUpdateChatLastAddOnPreview)(r)}))).apply(this,arguments)}},18615:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handlePrivacyModeChangeAndCreateChat=function(){return E.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(93040),s=n(12166),l=n(1619),u=n(76376),c=n(20938),d=n(98869),p=n(46408),f=n(67454),_=n(463),g=n(60019),h=n(95160),A=n(3885),m=n(49625);function E(){return(E=(0,o.default)((function*(e,t,n,r){let i=t.chat;if(!i.isUser())return;(0,_.isMatFullyEnabled)()&&(i=yield(0,a.getMatChat)(i));const s=yield b(i),l=(0,g.getLatestPrivacyMode)(n.privacyMode,s.privacyMode),h=function(){var t=(0,o.default)((function*(){yield(0,d.createChat)(i,"createChatOnNewMsg",{createdLocally:!1,lidOriginType:i.isLid()&&null!=(null==r?void 0:r.origin)?null==r?void 0:r.origin:void 0},{firstIncomingMsg:e[0],nextPrivacyMode:l})}));return function(){return t.apply(this,arguments)}}(),E=yield I(i,h),y=!0!==E||(0,f.queryVerifiedNameWhenMsgDiffers)()&&s.verifiedLevel!==(0,c.convertLevel)(n.verifiedLevel);try{E&&null!=l&&(yield(0,p.handlePrivacyModeTransition)(i,l));return()=>{y&&(0,u.queryAndUpdateContactPropertiesOnNewChat)(i).catch((()=>{__LOG__(3)`query contact info on new chat failed`})),(0,A.isMeAccount)(t.author)||null==l||(0,m.workerSafeSendAndReceive)("updateBizPrivacyStatus",{msgIds:e.map((e=>e.id)),privacyMode:l}).catch((e=>{__LOG__(4,void 0,new Error)`handlePrivacyModeChange: failed to update biz privacy status with error ${e}`}))}}catch(e){__LOG__(4,void 0,new Error,!0,["messaging","non-sad"])`handlePrivacyModeChange for ${i.toLogString()}, failed with error: ${e}`,SEND_LOGS("handlePrivacyModeChange failed",.001,"messaging","non-sad")}}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e){return(0,h.isWorker)()?null!=(yield(0,a.getChatRecord)(e)):(0,l.frontendSendAndReceive)("hasChat",{chatId:e})}))).apply(this,arguments)}const v=new Map;function I(){return T.apply(this,arguments)}function T(){return(T=(0,o.default)((function*(e,t){const n=e.toString(),r=v.get(n);null!=r&&(yield r);const s=(0,o.default)((function*(){const r=yield y(e);if(!0!==r)try{yield t()}catch(t){if(!(0,h.isWorker)()&&t instanceof a.CreateChatDuplicateError){const t=yield(0,a.getChatRecord)(e);if(null!=t){yield(0,l.frontendFireAndForget)("chatCollectionGadd",{chat:(0,i.default)((0,i.default)({},t),{},{id:e})});const n=yield y(e);return n||(__LOG__(4,void 0,new Error,!0,["messaging"])`handlePrivacyModeChange for ${e.toLogString()}, unable to restore chat from DB`,SEND_LOGS("handlePrivacyModeChange failed to restore chat",.01,"messaging")),n}}__LOG__(4,void 0,new Error,!0,["messaging"])`handlePrivacyModeChange for ${e.toLogString()}, failed with error: ${t}`,SEND_LOGS("handlePrivacyModeChange failed",.001,"messaging")}return v.delete(n),r}))();return v.set(n,s),s}))).apply(this,arguments)}function b(){return M.apply(this,arguments)}function M(){return(M=(0,o.default)((function*(e){if(!(0,h.isWorker)())return(0,m.workerSafeSendAndReceive)("getChatPrivacyInfoOnNewMsg",{chatId:e});const t=yield(0,s.getVerifiedBusinessNameRecord)(e);return{privacyMode:null!=(null==t?void 0:t.privacyMode)?(0,s.convertPrivacyModeFromStorageType)(t.privacyMode):null,verifiedLevel:(0,c.convertLevel)(null==t?void 0:t.level)}}))).apply(this,arguments)}},36632:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.maybeInsertDebugPlaceholder=function(e){if(!(0,u.isMessageDropPlaceholderEnabled)())return;!function(){p.apply(this,arguments)}(e)};var i=r(n(81109)),o=r(n(48926)),a=n(1619),s=n(46316),l=n(27893),u=n(19909),c=n(67621),d=n(73602);function p(){return(p=(0,o.default)((function*(e){let{externalId:t,msgInfo:n,offline:r,nackReason:o}=e;if(null==n)return void __LOG__(3,void 0,void 0,void 0,["messaging"])`_insertDebugPlaceholder: msgId::${t}, could not parse message info`;const u=(0,i.default)((0,i.default)({},(0,c.generateBaseMsg)(n)),{},{type:d.MSG_TYPE.DEBUG_PLACEHOLDER,kind:d.MsgKind.DebugPlaceholder,body:o.toString()});try{yield l.messageProcessorCache.addMessages([{msg:u}],!0!==r),s.Cmd.isMainStreamReadyMd&&(yield(0,a.frontendSendAndReceive)("updateMessageUI",{chatId:u.id.remote,msg:u}))}catch(e){__LOG__(3,void 0,void 0,void 0,["messaging"])`_insertDebugPlaceholder: msgId::${t}, failed to insert with error: ${e}`}}))).apply(this,arguments)}},12176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messagePostProcessBatcher=void 0;var r=n(66210),i=n(1619),o=n(73602),a=n(49625);const s={delayMs:1e3};const l=new class{constructor(){this._batcher=(0,r.createSimpleBatcher)(s,(e=>(this._processOrphanReadReceipts(e),Promise.resolve([]))))}acceptMessage(e){return this._batcher.accept(e)}runActiveBatches(){return this._batcher.runActiveBatch().then((()=>{}))}_processOrphanReadReceipts(e){(0,i.frontendFireAndForget)("processOrphanReadReceipts",{msgIds:e.map((e=>e.id))});const t=e.filter((e=>e.type===o.MSG_TYPE.PAYMENT&&"send"===e.subtype));t.length>0&&(0,a.workerSafeFireAndForget)("processOrphanPaymentNotifications",{msgs:t})}};t.messagePostProcessBatcher=l},87772:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.postprocessRenderableMessages=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(12176);function s(){return(s=(0,i.default)((function*(e){const{msgInfo:t,messageOverwriteOption:n,preprocessedMessages:r,handlePrivacyModeChangeAfterMsgProcessing:s,isOffline:l}=e;return yield Promise.all(r.map(function(){var e=(0,i.default)((function*(e){yield(0,o.frontendSendAndReceive)("updateMessageUI",{chatId:e.id.remote,msg:e,messageOverwriteOption:n}),a.messagePostProcessBatcher.acceptMessage(e),l||a.messagePostProcessBatcher.runActiveBatches()}));return function(){return e.apply(this,arguments)}}())),s&&s(),(0,o.frontendSendAndReceive)("updateUnattributedMessages",{messageInfo:t,messages:r})}))).apply(this,arguments)}},8719:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processPlaceholderMessage=function(){return m.apply(this,arguments)};var i=r(n(48926)),o=n(97183),a=n(1619),s=n(41404),l=n(46316),u=n(33351),c=n(12987),d=n(27893),p=n(67621),f=n(73602),_=n(463),g=n(17167),h=n(59266),A=n(68231);function m(){return(m=(0,i.default)((function*(e){const{msgInfo:t}=e;if(t.category===u.CATEGORY_PEER)return void __LOG__(2,void 0,void 0,void 0,["messaging"])`processPlaceHolderMessage: msgId:${t.externalId}, skip placeholder for peer message`;const n=null!=t.offline;try{var r;let u;if((0,s.bizHostedDevicesEnabled)()&&(null===(r=t.chat)||void 0===r?void 0:r.isUser())&&e.placeholderType===c.PlaceholderType.E2E){const e=yield(0,o.getDeviceRecord)(t.author);(null==e?void 0:e.advAccountType)===h.ADVEncryptionType.HOSTED&&(t.placeholderCreatedWhenAccountIsHosted=!0)}if(e.type===f.MSG_TYPE.CIPHERTEXT){if(u=yield(0,p.genPlaceholderMsg)(t,e.placeholderType,e.placeholderAddReason),0===u.length)return}else u=[(0,p.genDebugPlaceholderMsg)(t,e.nackReason)];const m=(0,_.isMatFullyEnabled)()?yield(0,g.processRenderableMatMessages)(u):u,E=d.messageProcessorCache.addMessages(m.map((e=>({msg:e}))),!n).then((()=>{A.WorkerOfflineResumeReporter.updateProcessedMessageCount()}));l.Cmd.isMainStreamReadyMd&&(l.Cmd.isOfflineDeliveryEnd&&(yield E),yield Promise.all(m.map(function(){var e=(0,i.default)((function*(e){const t=e.id.remote;yield(0,a.frontendSendAndReceive)("updateMessageUI",{chatId:t,msg:e})}));return function(){return e.apply(this,arguments)}}())))}catch(e){__LOG__(4,void 0,new Error,!0,["messaging"])`processPlaceholderMsg: msgId::${t.externalId}, failed with error: ${e}`,SEND_LOGS("handle_msg: error storing/processing single message",1,"messaging")}}))).apply(this,arguments)}},76197:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processRenderableMessages=function(){return N.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(31654),s=n(63007),l=n(68739),u=n(46316),c=n(68389),d=n(83661),p=n(26099),f=n(12987),_=n(18615),g=n(87772),h=n(27893),A=n(26368),m=n(90928),E=n(463),y=n(66301),S=n(17167),v=n(25993),I=n(41183),T=n(79251),b=r(n(69356)),M=n(63342),P=n(95861),C=n(68231);function O(){return R.apply(this,arguments)}function R(){return(R=(0,o.default)((function*(e,t,n,r){let o=e;(0,E.isMatFullyEnabled)()&&(o=yield(0,S.processRenderableMatMessages)(e));const l=yield(0,d.getPrivacyModeWhenSent)(t,n),u=w(r);null!=u&&(o=o.map((e=>(0,i.default)((0,i.default)({},e),{},{placeholderPopulationType:u})))),o=null==l?o:o.map((e=>(0,i.default)((0,i.default)({},e),{},{privacyModeWhenSent:l})));const c=t.addressingMode;return o=null==c?o:o.map((e=>(0,i.default)((0,i.default)({},e),{},{groupAddressingMode:c}))),o=yield(0,y.preProcessOrderEphemeralExemption)(o),(0,s.isBotReceiveEnabled)()&&(o=o.map((e=>{var t;const n=null!=e.messageSecret?null===(t=e.mentionedJidList)||void 0===t?void 0:t.find((e=>e.isBot())):null;return null!=n?(0,i.default)((0,i.default)({},e),{},{invokedBotWid:n}):e}))),(0,a.applyOrphanRevokes)(o)}))).apply(this,arguments)}function N(){return(N=(0,o.default)((function*(e,t,n,r,i,o,a){if(0!==e.length){try{const n=null!=t.offline&&!a,d=yield O(e,t,r,o);if((0,s.isBotReceiveEnabled)()){let e=null;const r=(yield(0,M.getBotWaitlistStateFromIdb)())===v.HistorySync$BotAIWaitListState.AI_AVAILABLE;if(d.forEach((i=>{var o,a,s;const l=i.messageSecret,u=Boolean(l&&(null===(o=i.id.remote)||void 0===o?void 0:o.isBot())),c=null!==(a=null===(s=i.invokedBotWid)||void 0===s?void 0:s.isBot())&&void 0!==a&&a;l&&(u||c)&&!0!==i.isForwarded&&(c&&(e=i.id.remote),m.msmsgMsgSecretCache.addMsmsgMsgSecretToCache(i.id.toString(),l),r||!0!==i.id.fromMe||(0,I.queryBotWaitlistState)()),(0,T.isStatusPostingEnabled)()&&i.id.fromMe&&b.default.updatePeerStatusReceiptInfo(i.id,n,t.statusSetting)})),e){const t=yield(0,l.createSysMsgForIncomingBotInvoke)(e);t&&d.unshift(t)}}if((0,s.isBotEnabled)()){const e=d.filter((e=>Boolean(e.bizBotType)&&!(0,A.getIsCAPISupport)(e)));if(e.length){const t=yield(0,p.handleBizBotMsgs)(e);d.unshift(...t)}}const f=yield(0,_.handlePrivacyModeChangeAndCreateChat)(d,t,r,i),E=h.messageProcessorCache.addMessages(d.map((e=>({msg:e}))),!n).then((()=>{if(C.WorkerOfflineResumeReporter.updateProcessedMessageCount(),!n)return Promise.all(d.map((e=>(0,c.processOrphansForNewMsg)(e,t))))})).catch((e=>{__LOG__(4,void 0,new Error,!0,["messaging"])`processRenderableMessages write to DB from cache, failed with error: ${e}`,SEND_LOGS("processRenderableMessages write to DB from cache, failed",1,"messaging")}));if(u.Cmd.isMainStreamReadyMd||a)return u.Cmd.isOfflineDeliveryEnd&&(yield E),(0,g.postprocessRenderableMessages)({msgInfo:t,messageOverwriteOption:o,preprocessedMessages:d,handlePrivacyModeChangeAfterMsgProcessing:f,isOffline:n})}catch(e){__LOG__(4,void 0,new Error,!0,["messaging"])`processRenderableMessage: msgId:${t.externalId}, failed with error: ${e}`,SEND_LOGS("handle_msg: error storing/processing single message",1,"messaging")}return Promise.resolve()}}))).apply(this,arguments)}function w(e){switch(e){case f.MessageOverwriteOption.NO_OVERWRITE:case f.MessageOverwriteOption.FUTURE_PROOF:return null;case f.MessageOverwriteOption.RETRY:return P.PLACEHOLDER_POPULATION_TYPE.RETRY;case f.MessageOverwriteOption.PEER_RETRY:return P.PLACEHOLDER_POPULATION_TYPE.PEER_MESSAGE}}},33379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"processPlaceholderMessage",{enumerable:!0,get:function(){return r.processPlaceholderMessage}}),Object.defineProperty(t,"processReactionMessage",{enumerable:!0,get:function(){return o.processReactionMessage}}),Object.defineProperty(t,"processRenderableMessages",{enumerable:!0,get:function(){return i.processRenderableMessages}});var r=n(8719),i=n(76197),o=n(64338)},27893:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.messageProcessorCache=void 0;var i=r(n(48926)),o=r(n(49619)),a=n(39528),s=n(78494),l=n(83741),u=n(99224),c=n(45304),d=n(94645),p=n(56806),f=n(9120),_=n(48495),g=n(4830),h=n(32954),A=n(83986),m=n(65068),E=n(51017);const y=new class{constructor(){this.cache=[],this.additionalInfoCache=[],this.checkpointQueue=new a.PromiseQueue,this.nextCheckpointIndex=0,this.snapshotTimer=new s.ShiftTimer((()=>{this.createSnapshot()})),this.checkpointPromises=new Map,this.flushImmediately=!1}addMessages(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cache.push(...e);const n=this._getOrCreateCurrentCheckpointPromise();return t?(this.flushImmediately=!0,this.createSnapshot(),n):(this.flushImmediately=!1,this.cache.length>=(0,l.getABPropConfigValue)("web_message_processing_cache_size")?(this.createSnapshot(),n):n)}addAdditionalInfo(e){this.additionalInfoCache.push(e)}handleChangedAddressingMode(e){var t=this;return(0,i.default)((function*(){const n=new Map;e.forEach((e=>{let{msg:t}=e;if(null!=t&&t.id.remote.isGroup()){const e=null==t?void 0:t.groupAddressingMode;null!=e&&n.set(t.id.remote.toString(),e)}}));const r=yield(0,c.bulkGetGroupAddressingMode)(Array.from(n.keys()).map(E.createWid)),i=[];for(const[e,t]of n.entries())r.get(e)!==t&&i.push((0,E.createWid)(e));t.flushImmediately||(yield(0,d.bulkMarkGroupParticipantStaleJob)(i)),yield Promise.all(i.map((e=>(0,p.handleAddressingModeMismatch)(e,{localAddressingMode:(0,o.default)(r.get(e.toString()),"clientGroupAddressingModes.get(groupId.toString())"),serverAddressingMode:(0,o.default)(n.get(e.toString()),"serverGroupAddressingModes.get(groupId.toString())"),mismatchOrigin:p.MISMATCH_ORIGIN_TYPE.INCOMING_GROUP_MESSAGE}))))}))()}_getOrCreateCurrentCheckpointPromise(){if(!this.checkpointPromises.has(this.nextCheckpointIndex)){let e,t=()=>{};this.checkpointPromises.set(this.nextCheckpointIndex,{promise:new Promise(((n,r)=>{e=n,t=r})),markCheckpointDone:n=>{this.checkpointPromises.delete(this.nextCheckpointIndex),null==n?e():t(n)}})}return(0,o.default)(this.checkpointPromises.get(this.nextCheckpointIndex),"this.checkpointPromises.get(this.nextCheckpointIndex)").promise}_addToMessageTable(e){const t=[];return e.forEach((e=>{const n=e.msg;null!=n&&t.push(n)})),(0,m.storeMsgs)(t)}_processMsgAdditionalInfo(e){return(0,i.default)((function*(){const t=e.filter((e=>e.type===f.MsgAdditionalInfoType.ReportingTokenInfo)).map((e=>e.data));(0,u.handleAddReportingTokenInfos)(t)}))()}createSnapshot(){var e,t,n=this;const r=this.cache,o=this.additionalInfoCache;this.cache=[],this.additionalInfoCache=[],this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();const a=this.nextCheckpointIndex,s=a+r.length;if(this.nextCheckpointIndex=s,__LOG__(2)`[unify][message-cache]: creating snapshot for ${a} - ${s} messages`,0===r.length)return;const u=null!==(e=null===(t=this.checkpointPromises.get(a))||void 0===t?void 0:t.markCheckpointDone)&&void 0!==e?e:()=>{__LOG__(4,void 0,new Error,!0)`MessageProcessorCache: missing doneFn`,SEND_LOGS("message-cache-missing-doneFn")},c=(0,g.getSignalProtocolStore)().generateSnapshot();this.checkpointQueue.enqueue((0,i.default)((function*(){try{yield n._addToMessageTable(r),__LOG__(2)`[unify][message-cache]: messages added to table for ${a} - ${s}`,null!=c&&(yield(0,h.getStorage)().lock(["session-store","identity-store","prekey-store","senderkey-store"],(0,i.default)((function*(){yield Promise.all([A.waSignalStore.bulkPutSession(c.sessionUpdate),A.waSignalStore.bulkPutIdentityKeyWithRowId(c.identityUpdate),A.waSignalStore.bulkPutSenderKey(c.senderKeyUpdate),A.waSignalStore.bulkRemovePreKey(c.preKeyRemove),A.waSignalStore.bulkRemoveSession(c.sessionRemove),A.waSignalStore.bulkRemoveIdentity(c.identityRemove)])}))),__LOG__(2)`[unify][message-cache]: signal key store updated for ${a} - ${s}`),yield(0,_.sendAggregateOfflineReceipts)(r),yield n._processMsgAdditionalInfo(o),__LOG__(2)`[unify][message-cache]: aggregated receipts sent for ${a} - ${s}`}catch(e){return void u(e)}u()}))),(0,l.getABPropConfigValue)("lid_groups_handle_server_addressing_mode")&&this.handleChangedAddressingMode(r)}};t.messageProcessorCache=y},9567:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.receiptBatcher=void 0;var i=r(n(48926)),o=r(n(94654)),a=n(66210),s=n(44037),l=n(21212),u=n(77630),c=n(89055),d=n(1619),p=n(63857),f=n(37956),_=n(46408),g=n(74557),h=r(n(60001)),A=n(10139),m=n(24377),E=n(91123),y=n(3885),S=n(51017),v=n(49625);const I=Object.freeze({[u.ACK.SENT]:u.ACK_STRING.DELIVERY,[u.ACK.RECEIVED]:u.ACK_STRING.DELIVERY,[u.ACK.READ]:u.ACK_STRING.READ,[u.ACK.PLAYED]:u.ACK_STRING.PLAYED,[u.ACK.INACTIVE]:u.ACK_STRING.INACTIVE}),T={delayMs:1e3};function b(){return M.apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e){const t=e.msgKeys.map((e=>h.default.from(e)));if(e.remote.isStatusV3())return(0,d.frontendFireAndForget)("handleReadStatus",{msgKeys:t}),(0,d.frontendSendAndReceive)("updateMsgPeerAcks",{msgKeys:t,ack:u.ACK.READ,t:e.ts});if((e.remote.isUser()||e.remote.isGroup()||e.remote.isNewsletter())&&e.ack>=u.ACK.RECEIVED){if(e.ack===u.ACK.READ)return(0,f.updateChatPeerRead)(e.remote,t);if(e.ack===u.ACK.PLAYED)return(0,d.frontendSendAndReceive)("updateMsgPeerAcks",{msgKeys:t,ack:e.ack,t:e.ts})}}))).apply(this,arguments)}function P(e,t){if(null!=e&&null!=t)return Math.min(e,t);const n=null!=e?e:t;return null!=n?n:void 0}const C=new class{constructor(){this._peerReceiptBatcher=(0,a.createSimpleBatcher)(T,(e=>this._processPeerReceipts(e).then((()=>[])))),this._otherReceiptBatcher=(0,a.createSimpleBatcher)(T,(e=>this._processOtherReceipts(e).then((()=>[]))))}acceptPeerReceipt(e){return this._peerReceiptBatcher.accept(e)}acceptOtherReceipt(e){return this._otherReceiptBatcher.accept(e)}runActiveBatches(){return Promise.all([this._peerReceiptBatcher.runActiveBatch(),this._otherReceiptBatcher.runActiveBatch()]).then((()=>{}))}_extractPrivacyModeUpdates(e){const t=[];for(const{ack:n,privacyMode:r,msgKeys:i,receiverId:o}of e)n===u.ACK.RECEIVED&&null!=r&&t.push({remote:o,deliveryPrivacyMode:r,msgKeys:i.map((e=>h.default.from(e)))});return t}_processPrivacyModeUpdates(e){return(0,i.default)((function*(){yield(0,l.promiseMap)(e,function(){var e=(0,i.default)((function*(e){yield(0,_.handlePrivacyModeTransition)(e.remote,e.deliveryPrivacyMode),yield(0,v.workerSafeSendAndReceive)("updateBizPrivacyStatus",{msgIds:e.msgKeys,privacyMode:e.deliveryPrivacyMode})}));return function(){return e.apply(this,arguments)}}())}))()}_getHighestAcks(e,t){var n=this;return(0,i.default)((function*(){const r=n._getDirectChatAcks(e),i=t.map((e=>h.default.from(e))).filter((e=>e.remote.isGroup()||e.remote.isStatusV3()||e.remote.isBot())),o=yield(0,c.getHighestMsgAcks)(i);for(const[e,t]of o.entries())r.set(e,t);return r}))()}_getDirectChatAcks(e){const t=new Map;for(const{msgKeys:r,ack:i,isBotInvoke:o,isSender:a}of e)for(const e of r){var n;if(h.default.from(e).remote.isUser()&&!0!==o&&!0!==a)t.set(e,Math.max(i,null!==(n=t.get(e))&&void 0!==n?n:Number.NEGATIVE_INFINITY))}return t}_getMsgInfoUpdatesForOtherReceipts(e){const t=new Map;return e.forEach((e=>{var n;const{ack:r,ts:i,receiverId:o,msgKeys:a}=e,l=o.isNewsletter()?o.toJid():(0,S.toUserWid)(o).toString(),c=null!==(n=o.device)&&void 0!==n?n:s.DEFAULT_DEVICE_ID;a.forEach((e=>{const n=I[r];if(null==n)return void __LOG__(3)`[unify][batcher]: receipt has unsupported ack type ${r}`;const o=`${e},${l}`,a=t.get(o);a?(n!==I[u.ACK.INACTIVE]&&(a[n]=P(a[n],i)),a.deviceDelivered.add(c)):t.set(o,{[n]:i,deviceDelivered:new Set([c])})}))})),Array.from(t,(e=>{let[t,n]=e;const[r,i]=t.split(",");return[[r,i],n]}))}_processOtherReceipts(e){var t=this;return(0,i.default)((function*(){const n=t._getMsgInfoUpdatesForOtherReceipts(e),r=Array.from(new Set((0,o.default)(e,(e=>e.msgKeys)))),a=yield(0,g.getStorage)().lock(["message-info","message","chat"],(0,i.default)((function*(){const[i,o]=yield Promise.all([(0,m.getMessageInfoTable)().bulkGet(n.map((e=>{let[t,n]=e;return t}))),(0,p.bulkGetRootMsgs)(r)]),a=new Map(r.map(((e,t)=>[e,o[t]]))),s=i.map(((e,t)=>{const[[r,i],o]=n[t];if(!o)return null;if(!e)return{delivery:o.delivery,read:o.read,played:o.played,msgKey:r,receiverUserJid:i,deviceDelivered:Array.from(o.deviceDelivered),deviceNotDelivered:[]};const a=o.deviceDelivered;return e.deviceDelivered.forEach((e=>a.add(e))),{delivery:P(e.delivery,o.delivery),read:P(e.read,o.read),played:P(e.played,o.played),msgKey:e.msgKey,receiverUserJid:e.receiverUserJid,deviceDelivered:Array.from(a),deviceNotDelivered:e.deviceNotDelivered.filter((e=>!a.has(e)))}})).filter(Boolean);yield(0,m.getMessageInfoTable)().bulkCreateOrReplace(s);const l=yield t._getHighestAcks(e,r);return{ackUpdates:Array.from(l.entries()).map((e=>{let[t,n]=e;const{remote:r}=h.default.fromString(t);if(r.isUser()||r.isGroup()||r.isStatusV3()){var i;const e=a.get(t);if(null==e)return;if(n>(null!==(i=e.ack)&&void 0!==i?i:Number.NEGATIVE_INFINITY))return{id:e.id.toString(),ack:n}}})).filter(Boolean),receiptMsgKeyToMsg:a}})));yield(0,A.getMessageTable)().bulkCreateOrMerge(a.ackUpdates),(0,d.frontendFireAndForget)("updateMsgModelAcks",{updates:a.ackUpdates.map((e=>{let{id:t,ack:n}=e;return{id:h.default.from(t),ack:n}}))}),(0,d.frontendFireAndForget)("updateMsgInfo",{updates:(0,o.default)(e,(e=>{let{msgKeys:t,ack:n,ts:r,receiverId:i}=e;return t.map((e=>{const t=a.receiptMsgKeyToMsg.get(e);if(null==t)return;const o=h.default.from(t.id);if(!o.fromMe)return;if(!(o.remote.isUser()||o.remote.isGroup()||o.remote.isStatusV3()))return;const s=(0,S.toUserWid)(i);return s.equals((0,y.getMeUser)())?void 0:{msgKey:o,ts:r,participant:s,ack:n}}))})).filter(Boolean)}),t._processPrivacyModeUpdates(t._extractPrivacyModeUpdates(e)).catch((()=>{__LOG__(4,void 0,new Error)`_processOtherReceipts: failed to process privacy mode updates`}))}))()}_processPeerReceipts(e){return(0,i.default)((function*(){if(e.some((e=>!e.isOffline)))return void(yield(0,l.promiseMap)(e,b));const t=e.map((e=>{const{ts:t,msgKeys:n,ack:r}=e;return{ts:t,msgKeys:n,ack:r}}));yield(0,E.getTable)().bulkCreate(t)}))()}};t.receiptBatcher=C},90928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.msmsgMsgSecretCache=void 0;var r=n(46316);const i=new class{constructor(){this.cache=new Map,r.Cmd.on("logout",(()=>this.clearCache()))}addMsmsgMsgSecretToCache(e,t){this.cache.set(e,t)}getMsmsgMsgSecretFromCache(e){return this.cache.get(e)}clearCache(){this.cache=new Map}};t.msmsgMsgSecretCache=i},66301:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.preProcessOrderEphemeralExemption=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(56660),a=n(35182),s=n(58681),l=n(94568),u=n(21132);function c(){return(c=(0,i.default)((function*(e){var t,n,r,i;if(!(0,o.inOrderMessagesEphemeralExceptionEnabled)())return e;const c=e.findIndex((e=>{const{nativeFlowName:t,interactiveType:n,type:r}=e;return(0,l.isMessageTypeExemptedFromDisappearing)(r,n,t)}));if(-1===c||null==(null===(t=e.at(c))||void 0===t||null===(n=t.id)||void 0===n?void 0:n.remote))return e;const d=null===(r=e.at(c))||void 0===r||null===(i=r.id)||void 0===i?void 0:i.remote;if(null==d)return e;const p=yield(0,a.getChatEphemeralExemptionDataFromChat)(d);if(null!=p&&(0,l.shouldShowOrderExemptionSystemMessage)(p)){var f;(0,a.persistsEphemeralDisplayedExemptions)(d,null!==(f=p.ephemeralDuration)&&void 0!==f?f:0,s.EphemeralExemptionType.ORDERS_AND_PAYMENTS);return[...e.slice(0,c),(0,u.getOrderEphemeralExemptionSystemMsg)(d),...e.slice(c,e.length)]}var _;return null!=p&&(0,l.shouldUnsetChatEphemeralDisplayedExemption)(p)&&(0,a.persistsEphemeralDisplayedExemptions)(d,null!==(_=p.ephemeralDuration)&&void 0!==_?_:0,s.EphemeralExemptionType.UNSET),e}))).apply(this,arguments)}},17167:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAlternateWidMapForPolls=function(e){const t=new Set,n=new Map;(0,d.isMatFullyEnabled)()&&e.forEach((e=>{const r=(0,a.default)(e.pollUpdateParentKey,"pollMsg.pollUpdateParentKey"),i=(0,l.getOriginalSender)(e);if(null!=r&&null!=i&&r.remote.isUser()&&!i.isSameAccount(r.remote)){const e=u.default.from({fromMe:r.fromMe,id:r.id,participant:r.participant,remote:i});t.add(e.toString()),n.set(r.toString(),e)}}));return{matParentMsgKeys:t,alternateWidMap:n}},t.processAddonMatMessages=E,t.processEditMatMessages=function(){return A.apply(this,arguments)},t.processPollUpdateMatMessages=function(){return m.apply(this,arguments)},t.processReactionMatMessages=function(){return h.apply(this,arguments)},t.processRenderableMatMessages=function(){return _.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(93040),l=n(26368),u=r(n(60001)),c=n(73602),d=n(463),p=r(n(27112)),f=n(49625);function _(){return(_=(0,o.default)((function*(e){const t=[],n=[],r=e.filter((e=>{var r;const i=null!==(r=e.id.remote)&&void 0!==r?r:e.from;var o;i.isUser()?n.push(null!==(o=e.id.remote)&&void 0!==o?o:e.from):t.push(e);return i.isUser()})),a=r.filter((e=>"sender_revoke"===e.subtype)),l=[];a.forEach((e=>{const t=e.protocolMessageKey;t&&(l.push(t),t.remote.isUser()&&n.push(t.remote))}));const d=yield(0,s.getMatChatBulk)(n),_=new Map;return a.forEach(function(){var e=(0,o.default)((function*(e){const t=e.protocolMessageKey;if(null!=t){const n=yield d.get(t.remote);if(null!=n&&!p.default.equals(n,t.remote)){const r=u.default.from({fromMe:t.fromMe,id:t.id,participant:t.participant,remote:n});_.set(e.id.id,r)}}}));return function(){return e.apply(this,arguments)}}()),r.forEach(function(){var e=(0,o.default)((function*(e){var n,r;const o=null!==(n=yield d.get(null!==(r=e.id.remote)&&void 0!==r?r:e.from))&&void 0!==n?n:e.id.remote;if(o.isSameAccount(e.id.remote))return void t.push(e);const a=u.default.from({fromMe:e.id.fromMe,id:e.id.id,participant:e.id.participant,remote:o});var s;"sender_revoke"===e.subtype?t.push((0,i.default)((0,i.default)({},e),{},{id:a,kind:c.MsgKind.ProtocolRevoke,protocolMessageKey:null!==(s=_.get(e.id.id))&&void 0!==s?s:e.protocolMessageKey,from:e.id.fromMe?e.from:o})):t.push((0,i.default)((0,i.default)({},e),{},{id:a,from:e.id.fromMe?e.from:o}));(0,f.workerSafeFireAndForget)("incrementPnhCtwaDailyCount",{chatId:o})}));return function(){return e.apply(this,arguments)}}()),t}))).apply(this,arguments)}function g(e,t,n){const r=u.default.from({fromMe:n.fromMe,id:n.id,participant:n.participant,remote:t});return{newMsgKey:u.default.from({fromMe:e.fromMe,id:e.id,participant:e.participant,remote:t}),newParentMsgKey:r}}function h(){return(h=(0,o.default)((function*(e){return E(e,"reactionParentKey")}))).apply(this,arguments)}function A(){return(A=(0,o.default)((function*(e){return E(e,"protocolMessageKey")}))).apply(this,arguments)}function m(){return(m=(0,o.default)((function*(e){return E(e,"pollUpdateParentKey")}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e,t){var n;const r=null!==(n=e.id.remote)&&void 0!==n?n:e.from;if(!r.isUser())return e;const o=yield(0,s.getMatChat)(r),a=e[t];if(null==o||null==a||!(a instanceof u.default)||o.isSameAccount(r))return e;const{newMsgKey:l,newParentMsgKey:c}=g(e.id,o,a);return(0,f.workerSafeFireAndForget)("incrementPnhCtwaDailyCount",{chatId:o}),(0,i.default)((0,i.default)({},e),{},{id:l,[t]:c,from:e.id.fromMe?e.from:o})}))).apply(this,arguments)}},25810:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processGroupOrStatusBroadcastMessage=h,t.processPhoneNumberMapping=function(){return m.apply(this,arguments)},t.processUserMessage=_;var i=r(n(48926)),o=n(42247),a=n(54111),s=n(42778),l=n(3885),u=n(51017);function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e,t,n){const{recipientPn:r,recipientUsername:i,chat:c,author:d}=e;if((0,l.isMeAccount)(d)){if(null!=i&&(yield(0,a.setUsernamesJob)([{userId:(0,u.toUserWid)(c),username:i}])),"username"!==(null==t?void 0:t.origin))if(null!=r)yield Promise.all([(0,s.createLidPnMappingsJob)([{lid:(0,u.toUserWid)(c),pn:(0,u.toUserWid)(r)}],n),(0,s.updateLidMetadataJob)([{lid:(0,u.toUserWid)(c),data:{shareOwnPn:!1}}])]);else{const e=yield(0,o.getContactRecord)(c);null!=e&&!0===(null==e?void 0:e.shareOwnPn)||(0,s.updateLidMetadataJob)([{lid:(0,u.toUserWid)(c),data:{shareOwnPn:!0}}])}return}const{displayName:p}=e;if(null!=p&&(yield(0,s.updateLidMetadataJob)([{lid:(0,u.toUserWid)(d),data:{displayNameLID:p}}])),"username"===(null==t?void 0:t.origin)){const{username:t}=e,n=[],r=(0,u.toUserWid)(d);null!=t?n.push({userId:r,username:t}):n.push({userId:r}),yield(0,a.setUsernamesJob)(n)}const{senderPn:f}=e;null!=f&&(yield(0,s.createLidPnMappingsJob)([{lid:(0,u.toUserWid)(d),pn:(0,u.toUserWid)(f)}],n)),"username"!==(null==t?void 0:t.origin)&&null==f&&(yield(0,s.updateLidMetadataJob)([{lid:(0,u.toUserWid)(d),data:{shareOwnPn:!0}}]))}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t,n){const{recipientLid:r,chat:i,author:o}=e;(0,l.isMeAccount)(o)&&null!=r&&(yield(0,s.createLidPnMappingsJob)([{lid:(0,u.toUserWid)(r),pn:(0,u.toUserWid)(i)}],n));const{senderLid:a}=e;null!=a&&(yield(0,s.createLidPnMappingsJob)([{lid:(0,u.toUserWid)(a),pn:(0,u.toUserWid)(o)}],n))}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e,t,n){const{author:r}=e;return r.isLid()?c(e,t,n):p(e,t,n)}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e,t){const{participantPn:n,participantLid:r,author:i}=e;null!=n&&(yield(0,s.createLidPnMappingsJob)([{lid:(0,u.toUserWid)(i),pn:(0,u.toUserWid)(n)}],t)),null!=r&&(yield(0,s.createLidPnMappingsJob)([{lid:(0,u.toUserWid)(r),pn:(0,u.toUserWid)(i)}],t));const{displayName:o}=e;(0,l.isMeAccount)(i)||null==o||(yield(0,s.updateLidMetadataJob)([{lid:(0,u.toUserWid)(i),data:{displayNameLID:o}}]))}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e,t,n){const{chat:r}=e;return r.isUser()?_(e,t,n):r.isGroup()||r.isBroadcast()?h(e,n):void 0}))).apply(this,arguments)}},70854:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getReleaseChannel=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(16219),a=n(97023);function s(){return(s=(0,i.default)((function*(){return(yield(0,a.getWhatsAppWebExternalBetaJoinedIdb)())?(__LOG__(2)`[Web Beta] Enabling BETA features`,o.ClientPayload$UserAgent$ReleaseChannel.BETA):o.ClientPayload$UserAgent$ReleaseChannel.RELEASE}))).apply(this,arguments)}},91548:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WA_WEB_PROTO_HEADER=void 0,t.decodeServerHello=function(e){return(0,l.decodeProtobuf)(s.HandshakeMessageSpec,e).serverHello},t.encodeHandshakeFinish=function(e){return(0,u.encodeProtobuf)(s.HandshakeMessageSpec,{clientFinish:e}).readByteArray()},t.encodeHandshakeHello=function(e){return(0,u.encodeProtobuf)(s.HandshakeMessageSpec,{clientHello:e}).readByteArray()},t.makeServerInfoIfKnown=function(e){return function(){if(null==e)return null;const{intermediate:t,leaf:n}=null!=e?e:{};return n&&t?n.key:null}},t.processCertificate=function(){return p.apply(this,arguments)},t.serverInfoIfKnown=function(){return null};var i=r(n(48926)),o=n(30866),a=n(74493),s=n(16219),l=n(33655),u=n(86881),c=r(n(89482));const d=new Uint8Array([87,65,6,a.DICT_VERSION]);function p(){return(p=(0,i.default)((function*(e){let{certificate:t,serverStatic:n}=e;__LOG__(2)`processCertificate start`;const r=yield(0,o.verifyChainCertificateWA6)(t,n);if(!r.success)throw(0,c.default)(`verifyCertificateWA6 - ${r.error}`)}))).apply(this,arguments)}t.WA_WEB_PROTO_HEADER=d},10414:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ConnImpl=t.Conn=void 0;var i=r(n(44908)),o=n(43175),a=n(46316),s=r(n(95643)),l=r(n(14950)),u=n(51698),c=n(77556),d=n(43744),p=n(97023),f=n(3885),_=r(n(37396)),g=n(53476),h=n(53047);n(84751);class A extends o.BaseModel{constructor(){super(...arguments),this.id=(0,o.prop)(),this.ref=(0,o.prop)(),this.refTTL=(0,o.prop)(),this.refId=(0,o.prop)(),this.wid=(0,o.prop)(),this.connected=(0,o.prop)(),this.protoVersion=(0,o.prop)(),this.clientToken=(0,o.prop)(),this.serverToken=(0,o.prop)(),this.secret=(0,o.prop)(),this.isResponse=(0,o.prop)(),this.lc=(0,o.prop)(),this.lg=(0,o.prop)(),this.locales=(0,o.prop)(),this.is24h=(0,o.prop)(),this.platform=(0,o.prop)(),this.phone=(0,o.prop)(),this.tos=(0,o.prop)(),this.smbTos=(0,o.prop)(0),this.pushname=(0,o.prop)(),this.blockStoreAdds=(0,o.session)(!1),this.meReadyTriggered=(0,o.session)(!1),this.isVoipInitialized=(0,o.session)(!1),this.refExpiry=(0,o.derived)((function(){return Date.now()+this.refTTL}),["ref","refTTL"]),this.locale=(0,o.derived)((function(){return this.formatLocale(this.lg,this.lc)}),["lg","lc"]),this.localesList=(0,o.derived)((function(){return this.locales&&this.locales.length?this.locales.split(",").map((e=>{const[t,n]=e.split("-");return t?[t,n]:null})).filter(Boolean):this.lg?[[this.lg,this.lc]]:[]}),["locales","lg","lc"]),this.allLocales=(0,o.derived)((function(){return(0,i.default)(this.localesList.map((e=>{let[t,n]=e;return this.formatLocale(t,n)}))).filter(Boolean)}),["localesList"]),this.allLanguages=(0,o.derived)((function(){return(0,i.default)(this.localesList.map((e=>{let[t,n]=e;return t})))}),["localesList"]),this.platformField=(0,o.derived)((function(){return"wp7"===this.platform?g.PLATFORM_TYPE.WP:this.platform&&g.PLATFORM_TYPE[this.platform.toUpperCase()]||g.PLATFORM_TYPE.UNKNOWN}),["platform"]),this.tosShowCallNotification=(0,o.derived)((function(){return!0}),["tos"]),this.isSMB=(0,o.derived)((function(){return this.platform===d.PLATFORMS.SMBA||this.platform===d.PLATFORMS.SMBI}),["platform"])}initialize(){o.BaseModel.prototype.initialize.call(this),this.listenTo(this,"change:locale",(function(e,t){l.default.setLocale(t,u.L10N_PRIORITY.PHONE)})),this.listenTo(this,"change:phone",(()=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{mcc:t,mnc:n}=e;t&&"string"==typeof t&&(t=parseInt(t,10));n&&"string"==typeof n&&(n=parseInt(n,10));h.Global.set({mcc:null!=t?t:null,mnc:null!=n?n:null,webcPhoneDeviceManufacturer:e.device_manufacturer||null,webcPhoneDeviceModel:e.device_model||null,webcPhoneOsBuildNumber:e.os_build_number||null,webcPhoneOsVersion:e.os_version||null,webcPhoneAppVersion:e.wa_version||null})}(this.phone)})),this.listenTo(this,"change:platform",this._handlePlatformChange),this.listenTo(a.Cmd,"main_stream_mode_ready_legacy",this.updateVoipAvailability)}delete(){(0,p.setPushname)(),this.clear()}canSetMyPushname(){return!this.isSMB}updateVoipAvailability(){__LOG__(2)`Conn: updateVoipAvailability`,(0,c.requireVoip)().then((e=>{if(!_.default.isVoiceCallEnabled()&&!_.default.isVideoCallEnabled())return __LOG__(2)`Conn: updateVoipAvailability, Voip GK false`,e.cleanup(),void(this.isVoipInitialized=!1);this.id&&(0,f.getMaybeMeUser)()?(0,s.default)().then((t=>{t?(__LOG__(2)`Conn: updateVoipAvailability, isSystemCapableOfVoip true`,e.init().then((t=>{__LOG__(2)`Conn: updateVoipAvailability, Voip initialized: ${t}`,this.isVoipInitialized=t,t&&e.updateAudioVideoSwitch()}))):(__LOG__(2)`Conn: updateVoipAvailability, isSystemCapableOfVoip false`,e.cleanup(),this.isVoipInitialized=!1)})):(__LOG__(2)`Conn: updateVoipAvailability, getMaybeMeUser undefined`,e.cleanup(),this.isVoipInitialized=!1)}))}_handlePlatformChange(){__LOG__(2)`Conn: platform change: ${this.platform}`,this.platform&&h.Global.set({webcPhonePlatform:this.platformField})}formatLocale(e,t){return e?t?e.toLowerCase()+"-"+t.toUpperCase():e.toLowerCase():null}shouldSaveToCache(){return!!(0,f.getMe)()&&!!this.id}}t.ConnImpl=A,A.Proxy="conn";const m=new((0,o.defineModel)(A))({id:"1"});t.Conn=m},16054:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAddonProcessor=function(e){return(0,i.default)(a.get(e),"processorLookupMap.get(type)")},t.getAddonProcessorsMap=function(){return a},t.hasAddonProcessor=function(e){return Boolean(a.get(e))};var i=r(n(49619)),o=r(n(32963));const a=function(){const e=new Map;for(const{type:t,processor:n}of o.default)null!=n&&e.set(t,n);return e}()},44100:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateReportingTokenContent=function(e){var t,n;return null===(t=o(e.type,e.subtype))||void 0===t||null===(n=t.generateReportingTokenContent)||void 0===n?void 0:n.call(t,e)},t.isMsgTypeReportingTokenCompatible=function(e,t){var n;return Boolean(null===(n=o(e,t))||void 0===n?void 0:n.generateReportingTokenContent)};var i=r(n(35213));const o=(0,n(74665).createMsgTypeRegistryLookup)(i.default)},31316:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseProtobuf=function(e){const t=(0,o.parseProtobufWithMultipleMessageParserPlugin)(e);let n=t.result;const r=t.pluginsMatched;for(const t of i.default){const i=t(e);var a;if(null!=i)r.push(`${i.msgData.type}:${null!==(a=i.msgData.subtype)&&void 0!==a?a:"null"}`),null==n&&(n=i)}if(r.length>1)return __LOG__(4,void 0,new Error,!0)`parseProtoPlugins: Matched more than 1 plugin types ${r.join(",")}`,SEND_LOGS("parse-protobuf-unexpected-plugin-match"),null;return n};var i=r(n(53466)),o=n(5151)},35213:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(17228)),o=r(n(91828)),a=r(n(14474)),s=r(n(4966)),l=r(n(32234)),u=r(n(76424)),c=r(n(43203)),d=r(n(28781)),p=[{type:"audio",subtype:void 0,generateReportingTokenContent:i.default},{type:"biz_content_placeholder",subtype:void 0,generateReportingTokenContent:null},{type:"buttons_response",subtype:void 0,generateReportingTokenContent:null},{type:"chat",subtype:"url",generateReportingTokenContent:o.default},{type:"chat",subtype:void 0,generateReportingTokenContent:o.default},{type:"ciphertext",subtype:"bot_unavailable_fanout",generateReportingTokenContent:null},{type:"ciphertext",subtype:"fanout",generateReportingTokenContent:null},{type:"ciphertext",subtype:"hosted_unavailable_fanout",generateReportingTokenContent:null},{type:"ciphertext",subtype:void 0,generateReportingTokenContent:null},{type:"comment",subtype:void 0,generateReportingTokenContent:null},{type:"debug_placeholder",subtype:void 0,generateReportingTokenContent:null},{type:"document",subtype:void 0,generateReportingTokenContent:a.default},{type:"event_creation",subtype:void 0,generateReportingTokenContent:null},{type:"event_edit_encrypted",subtype:void 0,generateReportingTokenContent:null},{type:"event_response",subtype:void 0,generateReportingTokenContent:null},{type:"groups_v4_invite",subtype:void 0,generateReportingTokenContent:null},{type:"hsm",subtype:void 0,generateReportingTokenContent:null},{type:"image",subtype:void 0,generateReportingTokenContent:s.default},{type:"interactive",subtype:void 0,generateReportingTokenContent:l.default},{type:"interactive_response",subtype:void 0,generateReportingTokenContent:null},{type:"keep_in_chat",subtype:void 0,generateReportingTokenContent:null},{type:"list",subtype:void 0,generateReportingTokenContent:null},{type:"list_response",subtype:void 0,generateReportingTokenContent:null},{type:"location",subtype:void 0,generateReportingTokenContent:null},{type:"multi_vcard",subtype:void 0,generateReportingTokenContent:null},{type:"native_flow",subtype:void 0,generateReportingTokenContent:null},{type:"newsletter_admin_invite",subtype:void 0,generateReportingTokenContent:null},{type:"notification_template",subtype:"contact_info_card",generateReportingTokenContent:null},{type:"order",subtype:void 0,generateReportingTokenContent:null},{type:"payment",subtype:"ciphertext",generateReportingTokenContent:null},{type:"payment",subtype:"futureproof",generateReportingTokenContent:null},{type:"payment",subtype:"invite",generateReportingTokenContent:null},{type:"payment",subtype:"request",generateReportingTokenContent:null},{type:"payment",subtype:"send",generateReportingTokenContent:null},{type:"pin_message",subtype:void 0,generateReportingTokenContent:null},{type:"pinned_message",subtype:void 0,generateReportingTokenContent:null},{type:"poll_creation",subtype:void 0,generateReportingTokenContent:null},{type:"poll_update",subtype:"poll_vote",generateReportingTokenContent:null},{type:"product",subtype:void 0,generateReportingTokenContent:null},{type:"protocol",subtype:"admin_revoke",generateReportingTokenContent:null},{type:"protocol",subtype:"bot_feedback",generateReportingTokenContent:null},{type:"protocol",subtype:"bot_request_welcome",generateReportingTokenContent:null},{type:"protocol",subtype:"ephemeral_setting",generateReportingTokenContent:null},{type:"protocol",subtype:"ephemeral_sync_response",generateReportingTokenContent:null},{type:"protocol",subtype:"history_sync_notification",generateReportingTokenContent:null},{type:"protocol",subtype:"message_edit",generateReportingTokenContent:null},{type:"protocol",subtype:"sender_revoke",generateReportingTokenContent:null},{type:"protocol",subtype:"share_phone_number",generateReportingTokenContent:null},{type:"ptt",subtype:void 0,generateReportingTokenContent:i.default},{type:"ptv",subtype:void 0,generateReportingTokenContent:u.default},{type:"reaction",subtype:void 0,generateReportingTokenContent:null},{type:"reaction_enc",subtype:void 0,generateReportingTokenContent:null},{type:"request_phone_number",subtype:void 0,generateReportingTokenContent:null},{type:"revoked",subtype:"admin",generateReportingTokenContent:null},{type:"revoked",subtype:"sender",generateReportingTokenContent:null},{type:"sticker",subtype:void 0,generateReportingTokenContent:c.default},{type:"template_button_reply",subtype:void 0,generateReportingTokenContent:null},{type:"unknown",subtype:"payment_action_request_declined",generateReportingTokenContent:null},{type:"unknown",subtype:"payment_transaction_request_cancelled",generateReportingTokenContent:null},{type:"unknown",subtype:"phone",generateReportingTokenContent:null},{type:"unknown",subtype:"phone_only_feature",generateReportingTokenContent:null},{type:"unknown",subtype:void 0,generateReportingTokenContent:null},{type:"vcard",subtype:void 0,generateReportingTokenContent:null},{type:"video",subtype:void 0,generateReportingTokenContent:d.default}];t.default=p},53466:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(21105)),o=r(n(47808)),a=r(n(62352)),s=r(n(46984)),l=r(n(63006)),u=r(n(29817)),c=r(n(60668)),d=r(n(30873)),p=r(n(5938)),f=r(n(46037)),_=r(n(20020)),g=r(n(71538)),h=r(n(94907)),A=r(n(12615)),m=r(n(58805)),E=r(n(96735)),y=r(n(96259)),S=r(n(84263)),v=r(n(4904)),I=r(n(86946)),T=r(n(65299)),b=r(n(66534)),M=r(n(37302)),P=r(n(43163)),C=r(n(86019)),O=r(n(22747)),R=r(n(65765)),N=r(n(68732)),w=r(n(50575)),D=r(n(65643)),L=r(n(83178)),B=r(n(8248)),k=r(n(40647)),G=r(n(18023)),U=r(n(66525)),x=r(n(11371)),F=r(n(79692)),K=r(n(86679)),Y=r(n(22260)),j=r(n(24585)),V=r(n(85316)),W=r(n(13501)),H=r(n(75661)),Q=r(n(65563)),$=r(n(63828)),q=r(n(93729)),J=r(n(59324)),z=r(n(4279)),X=r(n(41056)),Z=r(n(54425)),ee=[i.default,o.default,a.default,s.default,l.default,u.default,c.default,d.default,p.default,f.default,_.default,g.default,h.default,A.default,m.default,E.default,y.default,S.default,v.default,I.default,T.default,b.default,M.default,P.default,C.default,O.default,R.default,N.default,w.default,D.default,L.default,B.default,k.default,G.default,U.default,x.default,F.default,K.default,Y.default,j.default,V.default,W.default,H.default,Q.default,$.default,q.default,J.default,z.default,X.default,Z.default];t.default=ee},32963:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(87901)),o=r(n(96051)),a=r(n(45615)),s=r(n(92083)),l=r(n(86053)),u=r(n(57069)),c=[{type:"audio",processor:null},{type:"biz_content_placeholder",processor:null},{type:"buttons_response",processor:null},{type:"chat",processor:null},{type:"chat",processor:null},{type:"ciphertext",processor:null},{type:"ciphertext",processor:null},{type:"ciphertext",processor:null},{type:"ciphertext",processor:null},{type:"comment",processor:i.default},{type:"debug_placeholder",processor:null},{type:"document",processor:null},{type:"event_creation",processor:null},{type:"event_edit_encrypted",processor:o.default},{type:"event_response",processor:a.default},{type:"groups_v4_invite",processor:null},{type:"hsm",processor:null},{type:"image",processor:null},{type:"interactive",processor:null},{type:"interactive_response",processor:null},{type:"keep_in_chat",processor:null},{type:"list",processor:null},{type:"list_response",processor:null},{type:"location",processor:null},{type:"multi_vcard",processor:null},{type:"native_flow",processor:null},{type:"newsletter_admin_invite",processor:null},{type:"notification_template",processor:null},{type:"order",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"payment",processor:null},{type:"pin_message",processor:s.default},{type:"pinned_message",processor:null},{type:"poll_creation",processor:null},{type:"poll_update",processor:l.default},{type:"product",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"protocol",processor:null},{type:"ptt",processor:null},{type:"ptv",processor:null},{type:"reaction",processor:u.default},{type:"reaction_enc",processor:u.default},{type:"request_phone_number",processor:null},{type:"revoked",processor:null},{type:"revoked",processor:null},{type:"sticker",processor:null},{type:"template_button_reply",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"unknown",processor:null},{type:"vcard",processor:null},{type:"video",processor:null}];t.default=c},5151:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseProtobufWithMultipleMessageParserPlugin=function(e){const t=[];let n;for(const o of i.default){const i=o(e);var r;if(null!=i)t.push(`${i.msgData.type}:${null!==(r=i.msgData.subtype)&&void 0!==r?r:"null"}`),null==n&&(n=i)}return{result:n,pluginsMatched:t}};var i=r(n(98486))},98486:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(84184)),o=r(n(3229)),a=r(n(9907)),s=[i.default,o.default,a.default];t.default=s},28594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateRequiredAudioProperties=function(e,t){if(!(0,r.shouldLogE2eProtoValidation)(e,t))return;const n=e.type;null==t.seconds?(__LOG__(2,void 0,void 0,!0)`seconds is missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-seconds`)):0===t.seconds&&(__LOG__(2,void 0,void 0,!0)`seconds is 0 in msg type ${n}`,SEND_LOGS(`${n}-message-incorrect-seconds`));null==t.fileLength&&(__LOG__(2,void 0,void 0,!0)`fileLength is missing from msg type ${n}`,SEND_LOGS(`${n}-message-missing-fileLength`))},t.validateWaveform=function(e){return e.byteLength>=64&&e.byteLength<=192};var r=n(57305)},5768:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createDynamicReplyButtonsMessage=function(e,t,n){const{documentMessage:r,imageMessage:i,locationMessage:o,videoMessage:a}=e;if(t.isForwarded&&(r||i||o||a))return e;const s={buttons:!0===t.isForwarded?void 0:t.dynamicReplyButtons,footerText:t.footer,contextInfo:n};r?(s.documentMessage=r,s.headerType=d.Message$ButtonsMessage$HeaderType.DOCUMENT,s.contentText=t.caption):i?(s.imageMessage=i,s.headerType=d.Message$ButtonsMessage$HeaderType.IMAGE,s.contentText=t.caption):o?(s.locationMessage=o,s.headerType=d.Message$ButtonsMessage$HeaderType.LOCATION,s.contentText=t.caption):a?(s.videoMessage=a,s.headerType=d.Message$ButtonsMessage$HeaderType.VIDEO,s.contentText=t.caption):t.title?(s.text=t.title,s.headerType=d.Message$ButtonsMessage$HeaderType.TEXT,s.contentText=t.body):(s.contentText=t.body,s.headerType=d.Message$ButtonsMessage$HeaderType.EMPTY);return{buttonsMessage:s}},t.parseButtonsMessageProto=function(e){let{buttonsMessage:t,baseMessage:n,msgContext:r}=e;const{documentMessage:d,imageMessage:p,locationMessage:f,videoMessage:_,contentText:g,footerText:h,text:A,headerType:m}=t,E=(()=>{const e=(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.CHAT,kind:a.MsgKind.Chat,title:null==A?n.title:(0,o.convertToTextWithoutSpecialEmojis)(A),body:null==g?n.body:(0,o.convertToTextWithoutSpecialEmojis)(g)});var t,h,m,E,y,S,v,I;return p?null!==(t=null===(h=(0,l.default)({messageProtobuf:{imageMessage:p},baseMessage:n,msgContext:r}))||void 0===h?void 0:h.msgData)&&void 0!==t?t:e:d?null!==(m=null===(E=(0,s.default)({messageProtobuf:{documentMessage:d},baseMessage:n,msgContext:r}))||void 0===E?void 0:E.msgData)&&void 0!==m?m:e:f?null!==(y=null===(S=(0,u.default)({messageProtobuf:{locationMessage:(0,i.default)((0,i.default)({},f),{},{name:void 0,address:void 0})},baseMessage:n,msgContext:r}))||void 0===S?void 0:S.msgData)&&void 0!==y?y:e:_&&null!==(v=null===(I=(0,c.default)({messageProtobuf:{videoMessage:_},baseMessage:n,msgContext:r}))||void 0===I?void 0:I.msgData)&&void 0!==v?v:e})();return(0,i.default)((0,i.default)({},E),{},{headerType:m,caption:null!=g?(0,o.convertToTextWithoutSpecialEmojis)(g):E.caption,footer:null!=h?(0,o.convertToTextWithoutSpecialEmojis)(h):E.footer})};var i=r(n(81109)),o=n(54468),a=n(73602),s=r(n(20020)),l=r(n(96259)),u=r(n(37302)),c=r(n(13501)),d=n(77026)},28296:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapDeviceSentMessage=function(e){var t,n,r;const o=null==e||null===(t=e.deviceSentMessage)||void 0===t?void 0:t.message,a=null==e||null===(n=e.messageContextInfo)||void 0===n?void 0:n.messageSecret;if(null==o||null==a||null!=(null===(r=o.messageContextInfo)||void 0===r?void 0:r.messageSecret))return o;return(0,i.default)((0,i.default)({},o),{},{messageContextInfo:(0,i.default)((0,i.default)({},o.messageContextInfo),{},{messageSecret:a})})},t.wrapDeviceSentMessage=function(e,t){var n;const r={deviceSentMessage:{destinationJid:t.toString({legacy:!0}),message:e}},i=null==e||null===(n=e.messageContextInfo)||void 0===n?void 0:n.messageSecret;null!=i&&(r.messageContextInfo={messageSecret:i});return r};var i=r(n(81109))},18431:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseContextInfoProto=g,t.parseMessageContextInfoProto=A,t.parseMsgProto=_;var i=r(n(49619)),o=n(63007),a=n(57305),s=n(54468),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(31565)),u=n(31316),c=n(73602),d=n(5351),p=n(14951);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function _(e,t,n,r,i,c,d,f,m,E,y){e||(__LOG__(4,void 0,new Error,!0)`drop: not Message`,SEND_LOGS("null-message"));const{messageContextInfo:S}=e,{contextInfo:v,msgData:I}=function(e,t,n,r,i,a,l,c,d,f,g){let A;const{viewOnceMessage:m,viewOnceMessageV2:E,viewOnceMessageV2Extension:y,ephemeralMessage:S,documentWithCaptionMessage:v,groupMentionedMessage:I,editedMessage:T,botInvokeMessage:b}=e,M=(0,u.parseProtobuf)({messageProtobuf:e,baseMessage:t,msgContext:n,paymentInfo:r,quotedPaymentInfo:a,editAttr:c,bizInfo:l,finalLocation:i,rcat:d,bizSource:f,msgMeta:g});if(M)return M;I&&h(t,I,n);v&&h(t,v,n);m&&h(t,m,n);(0,p.isViewOnceSunsetEnabled)()&&(E&&h(t,E,n),y&&(0,p.isReceivingViewOnceV2Enabled)()&&h(t,y,n));S&&h(t,S,n);T&&h(t,T,n);const{deviceSentMessage:P}=e;P&&function(e,t,n){const r=(0,s.decodeJid)(t.destinationJid);e.id.remote=r,e.to=r,Object.assign(e,_(t.message,e,n))}(t,P,n);b&&(0,o.isBotResponseFutureproofMsgEnabled)()&&h(t,b,n);return{contextInfo:A,msgData:t}}(e,t,n,r,i,c,d,f,m,E,y);return function(e,t,n,r){if(!t)return;g(e,t,n,r),function(e,t){const n=t.externalAdReply;if(!n)return;const r=l.findLink(n.sourceUrl||"",!1,e.from);e.ctwaContext={conversionSource:t.conversionSource,conversionData:t.conversionData,sourceUrl:n.sourceUrl,description:n.body,title:n.title,thumbnail:n.thumbnail?(0,a.decodeBytes)(n.thumbnail):null,thumbnailUrl:n.thumbnailUrl,mediaType:n.mediaType,mediaUrl:n.mediaUrl,isSuspiciousLink:(null==r?void 0:r.suspiciousCharacters)&&r.suspiciousCharacters.size>0}}(e,t)}(I,v,n,c),A(I,S),I}function g(e,t,n,r){const i=t.quotedMessage,o=t.mentionedJid,a=t.groupMentions;if(null!=i&&(0,s.isQuotedSupported)(i)){const t=null!=e.selectedCarouselCardIndex;e.quotedMsg=_(i,{type:c.MSG_TYPE.UNKNOWN},"history"===n?"history_quoted":"quoted",null,null,null,null,null,null,t?"quoted_carousel_card":null)}e.quotedMsg&&"payment"===e.quotedMsg.type&&r&&__LOG__(2)`parseContextInfoProto: payment not supported`,e.quotedStanzaID=t.stanzaId,e.quotedParticipant=(0,s.decodeJid)(t.participant),e.quotedRemoteJid=(0,s.decodeJid)(t.remoteJid),e.quotedGroupSubject=(0,s.decodeJid)(t.groupSubject),e.quotedParentGroupJid=(0,s.decodeJid)(t.parentGroupJid),e.mentionedJidList=Array.isArray(o)?o.map(s.decodeJid):o,e.groupMentions=Array.isArray(a)?a.map((e=>({groupSubject:e.groupSubject,groupJid:(0,s.decodeJid)(e.groupJid)}))):a,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret);const{disappearingMode:l}=t;if(null!=l){const t=(0,s.protoToDisappearingModeInitiator)(e,l);null!=t&&(e.disappearingModeInitiator=t);const n=(0,s.protoToDisappearingMode)(e,l);null!=n&&(e.disappearingModeTrigger=n.disappearingModeTrigger,e.disappearingModeInitiatedByMe=n.initiatedByMe)}if(null!=t.actionLink&&(e.actionLink=t.actionLink),null!=t.smbClientCampaignId&&(e.smbClientCampaignId=t.smbClientCampaignId),null!=t.forwardedNewsletterMessageInfo)try{e.forwardedNewsletterMessageInfo=(0,d.parseForwardedNewsletterMessageInfo)(t.forwardedNewsletterMessageInfo)}catch(e){__LOG__(4,void 0,new Error,!0)`parseContextInfoProto: failed to parse forwarded newsletter info`,SEND_LOGS("Failed to parse Forwarded Newsletter Message Info.")}}function h(e,t,n){Object.assign(e,_((0,i.default)(t.message,"futureproofMessage.message"),e,n))}function A(e,t){var n,r,i,a,s,l,u,c,d,p,f,_,g,h,A;t&&(null!=t.messageSecret&&(e.messageSecret=new Uint8Array(t.messageSecret)),(0,o.isBotReceiveEnabled)()&&((null===(n=e.id)||void 0===n||null===(r=n.participant)||void 0===r?void 0:r.isBot())||(null===(i=e.id)||void 0===i||null===(a=i.remote)||void 0===a?void 0:a.isBot()))&&(null!=(null==t||null===(s=t.botMetadata)||void 0===s||null===(l=s.pluginMetadata)||void 0===l?void 0:l.pluginType)?e.botPluginType=t.botMetadata.pluginMetadata.pluginType:null!=(null==t||null===(u=t.botMetadata)||void 0===u?void 0:u.pluginMetadata)&&(e.botPluginMaybeParent=!0),null!=(null==t||null===(c=t.botMetadata)||void 0===c||null===(d=c.pluginMetadata)||void 0===d?void 0:d.referenceIndex)&&(e.botPluginReferenceIndex=t.botMetadata.pluginMetadata.referenceIndex),null!=(null==t||null===(p=t.botMetadata)||void 0===p||null===(f=p.pluginMetadata)||void 0===f?void 0:f.provider)&&(e.botPluginSearchProvider=t.botMetadata.pluginMetadata.provider),null!=(null==t||null===(_=t.botMetadata)||void 0===_||null===(g=_.pluginMetadata)||void 0===g?void 0:g.searchProviderUrl)&&(e.botPluginSearchUrl=t.botMetadata.pluginMetadata.searchProviderUrl),null!=(null==t||null===(h=t.botMetadata)||void 0===h||null===(A=h.pluginMetadata)||void 0===A?void 0:A.thumbnailCdnUrl)&&(e.botReelPluginThumbnailCdnUrl=t.botMetadata.pluginMetadata.thumbnailCdnUrl)))}},54468:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TranslateMsgKeyType=void 0,t.convertToTextWithoutSpecialEmojis=function(e){if(null==e||""===e||(0,v.getMobilePlatform)()===v.PLATFORMS.ANDROID)return e;return(0,_.convertToTextWithoutSpecialEmojis)(e)},t.createMessageKey=function(e){const t=U(e.to),n={fromMe:!0,id:e.id.id};(0,s.isString)(t)&&(n.remoteJid=t);return n},t.decodeJid=B,t.decryptFailAttributeFromProtobuf=function(e){var t,n,r,i,o,a;if(null!=e.reactionMessage||null!=e.encReactionMessage||null!=(null===(t=e.pollUpdateMessage)||void 0===t?void 0:t.vote)||null!=e.keepInChatMessage||null!=e.editedMessage||null!=e.pinInChatMessage||null!=e.protocolMessage&&e.protocolMessage.type===b.Message$ProtocolMessage$Type.EPHEMERAL_SYNC_RESPONSE||(null===(n=e.botInvokeMessage)||void 0===n||null===(r=n.message)||void 0===r||null===(i=r.protocolMessage)||void 0===i?void 0:i.type)===b.Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE||(null===(o=e.protocolMessage)||void 0===o?void 0:o.type)===b.Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE||null!=e.encEventResponseMessage||(null===(a=e.secretEncryptedMessage)||void 0===a?void 0:a.secretEncType)===b.Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT)return c.DecryptFailType.Hide;return c.DecryptFailType.Show},t.disappearingModeInitiatorToProto=function(e,t,n){let r,i,o;switch(e){case g.DisappearingModeInitiator.ChangedInChat:r=b.DisappearingMode$Initiator.CHANGED_IN_CHAT;break;case g.DisappearingModeInitiator.InitiatedByMe:r=b.DisappearingMode$Initiator.INITIATED_BY_ME;break;case g.DisappearingModeInitiator.InitiatedByOther:case g.DisappearingModeInitiator.BizUpgradeFbHosting:r=b.DisappearingMode$Initiator.INITIATED_BY_OTHER}if((0,l.getABPropConfigValue)("dm_initiator_trigger")){if(t)switch(t){case g.DisappearingModeTrigger.ChatSettings:i=b.DisappearingMode$Trigger.CHAT_SETTING;break;case g.DisappearingModeTrigger.AccountSettings:i=b.DisappearingMode$Trigger.ACCOUNT_SETTING;break;case g.DisappearingModeTrigger.BulkChange:i=b.DisappearingMode$Trigger.BULK_CHANGE;break;case g.DisappearingModeTrigger.Unknown:case g.DisappearingModeTrigger.BizSupportFbHosting:i=b.DisappearingMode$Trigger.UNKNOWN}null!=n&&(o=n)}return{initiator:r,trigger:i,initiatedByMe:o}},t.encodeBytes=function(e){return null!=e&&""!==e?(0,i.decodeB64)(e):void 0},t.encodeJid=U,t.encodeKey=function(e){const t={fromMe:e.fromMe,id:e.id},n=U(e.remote),r=U(e.participant);(0,s.isString)(n)&&(t.remoteJid=n);(0,s.isString)(r)&&(t.participant=r);return t},t.eventTypeAttributeFromProtobuf=function(e){var t;if(null!=e.eventMessage)return h.EVENT_TYPES.creation;if(null!=e.encEventResponseMessage)return h.EVENT_TYPES.response;if((null===(t=e.secretEncryptedMessage)||void 0===t?void 0:t.secretEncType)===b.Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT)return h.EVENT_TYPES.edit;return null},t.extractCommentTargetIdAndSenderLid=function(e){if((0,f.isCommentMessagesEnabled)()&&e.type===T.MSG_TYPE.COMMENT){var t,n;const r=null===(t=e.targetMessageKey)||void 0===t?void 0:t.id,i=null===(n=e.targetMessageKey)||void 0===n?void 0:n.participant;if(null!=r&&null!=i){const e=(0,u.getCurrentLid)(i);if(null!=e)return{threadMsgId:r,threadMsgSenderLid:e}}}return{threadMsgId:null,threadMsgSenderLid:null}},t.getBizNativeFlowName=function(e){var t,n,r,i,o,a;if(1===(null===(t=e.interactiveMessage)||void 0===t||null===(n=t.nativeFlowMessage)||void 0===n||null===(r=n.buttons)||void 0===r?void 0:r.length))return F(e.interactiveMessage.nativeFlowMessage.buttons[0].name);if(1===(null===(i=e.buttonsMessage)||void 0===i||null===(o=i.buttons)||void 0===o?void 0:o.length))return F(null===(a=e.buttonsMessage.buttons[0].nativeFlowInfo)||void 0===a?void 0:a.name)},t.getInteractiveMessageFieldNameForType=D,t.getInteractiveMessageTypeForProto=function(e){for(const t of m.default.members())if(D(t)in e)return t;return null},t.getInteractiveResponseMessageFieldNameForType=L,t.getInteractiveResponseMessageTypeForProto=function(e){for(const t of E.default.members())if(L(t)in e)return t;return null},t.getInteractiveResponsePayload=function(e,t,n){switch(e){case E.default.NATIVE_FLOW:{const r=(0,a.default)(t.nativeFlowResponseMessage,"message.nativeFlowResponseMessage"),i=(0,a.default)(A.default.cast(r.name),"NativeFlowName.cast(payload.name)"),o=(0,a.default)(r.version,"payload.version");if(o>1||!N(i,n))throw(0,O.default)("Invalid message");return{name:i,version:o,type:e,paramsJson:(0,a.default)(r.paramsJson,"payload.paramsJson")}}}},t.getMsgKey=function(e,t){if(!e)throw(0,O.default)("getMsgKey: no message key is defined for protocol message");const{id:n}=e;if(null==n||""===n)throw(0,O.default)("getMsgKey: no message id is defined for protocol message");return G(n,e,t)},t.getMutableMessageProtobuf=void 0,t.getNativeFlowNameByButtonName=F,t.getOptionalMsgKey=function(e,t,n){if(null==e)return;const{id:r}=e;if(null==r)return;return G(r,e,t,n)},t.hasUnsupportedButtons=function(e){return e.some((e=>e.nativeFlowInfo&&w.includes(e.nativeFlowInfo.name)||w.includes(e.buttonId)))},t.hasUnsupportedCurrency=function(e){var t;const n=(null==e||null===(t=e.primaryAmount)||void 0===t?void 0:t.currencyCode)||(null==e?void 0:e.currency);if(["XUS","XDX","USDP"].includes(null==n?void 0:n.toUpperCase()))return!0;return!1},t.isEitherSenderOrReceiverOfPaymentMessage=function(e,t){var n;if(e.remote.isGroup()&&!(null===(n=e.participant)||void 0===n?void 0:n.equals((0,M.getMeUser)()))&&!t.equals((0,M.getMeUser)()))return!1;return!0},t.isInteractiveMessageTypeEnabled=function(e){switch(e){case m.default.NATIVE_FLOW:return(0,p.interactiveNativeFlowMessagesEnabled)();case m.default.SHOPS_STOREFRONT:return(0,p.shopsInteractiveMessageEnabled)();case m.default.CAROUSEL:return(0,p.carouselsEnabled)()}},t.isInteractiveResponseMessageTypeEnabled=function(e){switch(e){case E.default.NATIVE_FLOW:return(0,p.interactiveNativeFlowResponseMessagesEnabled)()}},t.isOrderNativeFlow=function(e){return e===A.default.ORDER_DETAILS||e===A.default.ORDER_STATUS||e===A.default.PAYMENT_STATUS||e===A.default.PAYMENT_METHOD},t.isQuotedSupported=function(e){if(null!=e.reactionMessage)return!1;return!0},t.isSupportedInteractiveMessageVersion=function(e,t){const n=null==t?void 0:t.messageVersion;if(null==n||null==e)return!1;switch(e){case m.default.NATIVE_FLOW:case m.default.SHOPS_STOREFRONT:case m.default.CAROUSEL:return n<=1}},t.isValidNativeFlowName=N,t.msgKeyToProtobuf=function(e){var t;return{fromMe:e.fromMe,id:e.id,participant:e.fromMe||null===(t=e.participant)||void 0===t?void 0:t.toString({legacy:!0}),remoteJid:e.remote.toString({legacy:!0})}},t.parseMsgPaymentInfo=function(e){return{paymentStatus:e.status,paymentTxnStatus:e.txnStatus,paymentCurrency:e.currency||"",paymentAmount1000:(0,a.default)((0,o.maybeNumberOrThrowIfTooLarge)(e.amount1000),"maybeNumberOrThrowIfTooLarge(paymentInfo.amount1000)"),paymentMessageReceiverJid:(0,C.createWid)((0,a.default)(e.receiverJid,"paymentInfo.receiverJid")),paymentExpiryTimestamp:(0,o.maybeNumberOrThrowIfTooLarge)(e.expiryTimestamp),paymentTransactionTimestamp:(0,a.default)((0,o.maybeNumberOrThrowIfTooLarge)(e.transactionTimestamp),"maybeNumberOrThrowIfTooLarge(paymentInfo.transactionTimestamp)")}},t.pollTypeAttributeFromProtobuf=function(e){var t;if(null!=e.pollCreationMessage||null!=e.pollCreationMessageV2||null!=e.pollCreationMessageV3)return h.POLL_TYPES.creation;if(null!=(null===(t=e.pollUpdateMessage)||void 0===t?void 0:t.vote))return h.POLL_TYPES.vote;return null},t.protoToDisappearingMode=function(e,t){if(!(0,l.getABPropConfigValue)("dm_initiator_trigger"))return;const n=(0,M.isMeAccount)(e.from),{initiator:r,trigger:i,initiatedByMe:o}=t;if(null!=i&&(0,d.bizHostedDevicesEnabled)()&&i===b.DisappearingMode$Trigger.BIZ_SUPPORTS_FB_HOSTING)return{disappearingModeTrigger:x(i),initiatedByMe:n?o:!o};if(null!=i&&null!=o)return{disappearingModeTrigger:x(i),initiatedByMe:n?o:!o};if(null==t.initiator)return;if(null!=r)switch(r){case b.DisappearingMode$Initiator.CHANGED_IN_CHAT:return{disappearingModeTrigger:g.DisappearingModeTrigger.ChatSettings};case b.DisappearingMode$Initiator.INITIATED_BY_ME:return{disappearingModeTrigger:g.DisappearingModeTrigger.AccountSettings,initiatedByMe:n};case b.DisappearingMode$Initiator.BIZ_UPGRADE_FB_HOSTING:case b.DisappearingMode$Initiator.INITIATED_BY_OTHER:return{disappearingModeTrigger:g.DisappearingModeTrigger.AccountSettings,initiatedByMe:!n}}},t.protoToDisappearingModeInitiator=function(e,t){if(null==e.from)return;const n=(0,M.isMeAccount)(e.from);if(null==t.initiator)return;switch(t.initiator){case b.DisappearingMode$Initiator.CHANGED_IN_CHAT:return g.DisappearingModeInitiator.ChangedInChat;case b.DisappearingMode$Initiator.INITIATED_BY_ME:return n?g.DisappearingModeInitiator.InitiatedByMe:g.DisappearingModeInitiator.InitiatedByOther;case b.DisappearingMode$Initiator.INITIATED_BY_OTHER:case b.DisappearingMode$Initiator.BIZ_UPGRADE_FB_HOSTING:return n?g.DisappearingModeInitiator.InitiatedByOther:g.DisappearingModeInitiator.InitiatedByMe}},t.protobufToMsgKey=function(e,t){const{fromMe:n,id:r,participant:i,remoteJid:o}=e,a=null!=i?i:null==t?void 0:t.toString();(0,R.default)(null!=n&&null!=o&&null!=r,"fromMe, remoteJid, and id should be set");let s=null!=a&&(0,C.isWidlike)(a)?(0,C.createWid)(a):void 0;const l=(0,C.createWid)(o);(l.isGroup()||l.isBroadcast())&&n&&(s=(0,M.getMaybeMeUser)());return new I.default({fromMe:n,id:r,participant:s,remote:(0,C.createWid)(o)})},t.shouldParseNFM=function(e,t){if(null!=e||null!=(null==t?void 0:t.nativeFlowName))return!!(0,p.nativeFlowMessagesEnabled)()&&N(e,t);return!0},t.strictDecodeJid=function(e){if(null==e)return;return(0,R.default)(P.default.isWid(e),"Provided Jid is not a valid Wid"),(0,C.createWid)(e)},t.translateAddonMessageKeyToLocalReference=function(e,t){if(null==e)return;const{id:n}=e;if(null==n)return;return G(n,e,t,k.Addon)},t.translateKeyToLocalReference=G,t.translateRegularMessageKeyToLocalReference=function(e,t){if(null==e)return;const{id:n}=e;if(null==n)return;return G(n,e,t,k.Message)},t.typeAttributeFromProtobuf=function e(t){var n,r;if(t.ephemeralMessage){const{message:n}=t.ephemeralMessage;return n?e(n):h.STANZA_MSG_TYPES.text}if(t.groupMentionedMessage){const{message:n}=t.groupMentionedMessage;return n?e(n):h.STANZA_MSG_TYPES.text}if(t.botInvokeMessage){const{message:n}=t.botInvokeMessage;return n?e(n):h.STANZA_MSG_TYPES.text}if(t.deviceSentMessage){const{message:n}=t.deviceSentMessage;return n?e(n):h.STANZA_MSG_TYPES.text}if(t.reactionMessage||t.encReactionMessage)return h.STANZA_MSG_TYPES.reaction;if(t.eventMessage||t.encEventResponseMessage||(null===(n=t.secretEncryptedMessage)||void 0===n?void 0:n.secretEncType)===b.Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT)return h.STANZA_MSG_TYPES.event;if(t.pollCreationMessage||t.pollCreationMessageV2||t.pollCreationMessageV3||t.pollUpdateMessage)return h.STANZA_MSG_TYPES.poll;if(null!=(null===(r=t.extendedTextMessage)||void 0===r?void 0:r.canonicalUrl)&&""!==t.extendedTextMessage.canonicalUrl.trim())return h.STANZA_MSG_TYPES.media;if(Boolean(t.conversation)||t.extendedTextMessage||t.templateButtonReplyMessage||t.protocolMessage||t.interactiveMessage||t.keepInChatMessage||t.requestPhoneNumberMessage||t.editedMessage||t.pinInChatMessage||t.encCommentMessage||t.newsletterAdminInviteMessage)return h.STANZA_MSG_TYPES.text;return h.STANZA_MSG_TYPES.media},t.validateOutgoingRequiredMediaProperties=function(e,t,n){if(Boolean(t.viewOnce))return;null==t.directPath&&null==t.staticUrl&&(__LOG__(2,void 0,void 0,!0)`directPath missing from msg type ${e}`,SEND_LOGS(`outgoing-${e}-message-missing-direct-path`));null==t.fileSha256&&(__LOG__(2,void 0,void 0,!0)`fileSha256 missing from msg type ${e}`,SEND_LOGS(`outgoing-${e}-message-missing-file-sha`));n||null!=t.fileEncSha256||(__LOG__(2,void 0,void 0,!0)`fileEncSha256 missing from msg type ${e}`,SEND_LOGS(`outgoing-${e}-message-missing-file-enc-sha`));null!=t.url||null!=t.staticUrl||n||(__LOG__(2,void 0,void 0,!0)`url(deprecatedMms3Url) missing from msg type ${e}`,SEND_LOGS(`outgoing-${e}-message-missing-mms3-url`))};var i=n(62089),o=n(22101),a=r(n(49619)),s=n(25303),l=n(83741),u=n(42247),c=n(96193),d=n(41404),p=n(56660),f=n(18106),_=n(13479),g=n(28626),h=n(33351),A=r(n(718)),m=r(n(38090)),E=r(n(92986)),y=r(n(27021)),S=n(96955),v=n(43744),I=r(n(60001)),T=n(73602),b=n(77026),M=n(3885),P=r(n(27112)),C=n(51017),O=r(n(89482)),R=r(n(41143));function N(e,t){return null==e&&null==(null==t?void 0:t.nativeFlowName)||null==(null==t?void 0:t.nativeFlowName)||null!=e&&A.default.cast(t.nativeFlowName)===e}const w=["novi_login","novi_report_transaction","novi_hub","novi_view_code","novi_view_transaction","novi_view_bank_detail","novi_view_card_detail","wa_payment_transaction_details","wa_payment_learn_more","wa_payment_fbpin_reset"];function D(e){switch(e){case m.default.NATIVE_FLOW:return"nativeFlowMessage";case m.default.SHOPS_STOREFRONT:return"shopStorefrontMessage";case m.default.CAROUSEL:return"carouselMessage"}}function L(e){switch(e){case E.default.NATIVE_FLOW:return"nativeFlowResponseMessage"}}function B(e){return null!=e&&P.default.isWid(e)?(0,C.createWid)(e):e}const k=n(76672).Mirrored(["Addon","Message"]);function G(e,t,n,r){var i;let o,a,s;if(null==n||null===(i=n.id)||void 0===i?void 0:i.fromMe)if(o=Boolean(t.fromMe),s=B(t.remoteJid),!0===t.fromMe){if(s instanceof P.default&&!s.isUser()){var l;a=y.default.isCag(s)&&r!==k.Addon||!(null===(l=n.author)||void 0===l?void 0:l.isLid())?(0,M.getMeUser)():(0,M.getMeLidUser)()}}else a=B(t.participant);else{s=n.id.remote;const e=y.default.isCag(s);if(!0===t.fromMe){var c;if(o=!1,a=n.author,e&&(null===(c=a)||void 0===c?void 0:c.isLid())&&r!==k.Addon){const e=(0,u.getPhoneNumber)(n.author);null!=e&&(a=e)}}else{const e=B(t.participant);e instanceof P.default?(o=(0,M.isMeAccount)(e),s.isUser()&&!e.isBot()||(a=o?e.isLid()?(0,M.getMeLidUser)():(0,M.getMeUser)():e)):o=!0}}return n.type===T.MSG_TYPE.REACTION&&null!=s&&(s instanceof P.default&&s.isBroadcast()&&!s.isStatusV3()||"broadcast"===(0,S.interpretAndValidateJid)(s.toString()).jidType)&&(s=B(t.participant),a=void 0),new I.default({id:e,fromMe:o,remote:s,participant:a})}function U(e){return e instanceof P.default?e.toString({legacy:!0}):(0,s.isString)(e)?e.replace(/@c.us$/,"@s.whatsapp.net"):void 0}function x(e){switch(e){case b.DisappearingMode$Trigger.CHAT_SETTING:return g.DisappearingModeTrigger.ChatSettings;case b.DisappearingMode$Trigger.ACCOUNT_SETTING:return g.DisappearingModeTrigger.AccountSettings;case b.DisappearingMode$Trigger.BULK_CHANGE:return g.DisappearingModeTrigger.BulkChange;case b.DisappearingMode$Trigger.BIZ_SUPPORTS_FB_HOSTING:return(0,d.bizHostedDevicesEnabled)()?g.DisappearingModeTrigger.BizSupportFbHosting:g.DisappearingModeTrigger.Unknown;case b.DisappearingMode$Trigger.UNKNOWN:return g.DisappearingModeTrigger.Unknown}}function F(e){switch(e){case"review_and_pay":case"payment_info":return A.default.ORDER_DETAILS;case"review_order":return A.default.ORDER_STATUS;case"payment_status":return A.default.PAYMENT_STATUS;case"payment_method":return A.default.PAYMENT_METHOD;case"open_webview":return A.default.MESSAGE_WITH_LINK;case"message_with_link_status":return A.default.MESSAGE_WITH_LINK_STATUS;case"cta_url":return A.default.CTA_URL;case"cta_call":return A.default.CTA_CALL;case"quick_reply":return A.default.QUICK_REPLY;case"cta_catalog":return A.default.CTA_CATALOG}}t.TranslateMsgKeyType=k;t.getMutableMessageProtobuf=e=>e},72038:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isCtaButton=f,t.isNativeFlowCtasFromInteractiveMsg=p,t.isOpenMsgWithLinkAction=d,t.isValidNativeFlowMessage=function(e,t,n){if(null==e.nativeFlowName)return!1;switch(e.nativeFlowName){case o.default.ORDER_DETAILS:return null!=(0,l.getOrderInfo)(e);case o.default.ORDER_STATUS:return null!=(0,c.getOrderStatusInfo)(e);case o.default.PAYMENT_STATUS:case o.default.PAYMENT_METHOD:return null!=(0,u.getOrderPaymentStatusInfoFromNativeFlow)(e);case o.default.MESSAGE_WITH_LINK:return!1!==d(e);case o.default.MESSAGE_WITH_LINK_STATUS:return(0,i.isMessageWithLinkNfmEnabled)();case o.default.CTA_CALL:return(0,i.isInteractiveCtaMessageEnabled)(o.default.CTA_CALL,n,t)&&null!=p(e);case o.default.CTA_URL:return(0,i.isInteractiveCtaMessageEnabled)(o.default.CTA_URL,n,t)&&null!=p(e);case o.default.QUICK_REPLY:return(0,i.isInteractiveCtaMessageEnabled)(o.default.QUICK_REPLY,n,t)&&null!=p(e);case o.default.CTA_CATALOG:return(0,i.isInteractiveCtaMessageEnabled)(o.default.CTA_CATALOG,n,t)&&null!=p(e)}};var i=n(56660),o=r(n(718)),a=r(n(38090)),s=n(73602),l=n(14538),u=n(7554),c=n(37954);function d(e){if((0,i.isMessageWithLinkNfmEnabled)()){if(e.nativeFlowName!==o.default.MESSAGE_WITH_LINK||e.type!==s.MSG_TYPE.INTERACTIVE||e.interactiveType!==a.default.NATIVE_FLOW||null==e.interactivePayload)return!1;const t=e.interactivePayload;if((null==t?void 0:t.buttons)&&t.buttons.length>0){const{name:e,buttonParamsJson:n}=t.buttons[0];if("open_webview"===e&&null!=n)return!0}}return!1}function p(e){var t;return e.type!==s.MSG_TYPE.INTERACTIVE||e.interactiveType!==a.default.NATIVE_FLOW||e.nativeFlowName!==o.default.QUICK_REPLY&&e.nativeFlowName!==o.default.CTA_CALL&&e.nativeFlowName!==o.default.CTA_URL&&e.nativeFlowName!==o.default.CTA_CATALOG||null==(null===(t=e.interactivePayload)||void 0===t?void 0:t.buttons)||e.interactivePayload.buttons.forEach((e=>{if(f(e))return!0})),!1}function f(e){return"cta_url"===e.name||"cta_call"===e.name||"cta_catalog"===e.name}},3229:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,bizInfo:r,msgContext:c}=e;const{buttonsMessage:d}=t;if(null==d)return;const{buttons:p=[],headerType:f}=d;if(null!=s.default.cast((0,a.getBizNativeFlowName)({buttonsMessage:d}))||null!=(null==r?void 0:r.nativeFlowName))return;if((0,a.hasUnsupportedButtons)(p))return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:d.contextInfo};if(f===u.Message$ButtonsMessage$HeaderType.UNKNOWN||!new Set(u.Message$ButtonsMessage$HeaderType.members()).has(f))return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown}),contextInfo:d.contextInfo};const _=(0,o.parseButtonsMessageProto)({buttonsMessage:d,baseMessage:n,msgContext:c});if(p.length)return{msgData:(0,i.default)((0,i.default)({},_),{},{isDynamicReplyButtonsMsg:!0,dynamicReplyButtons:p}),contextInfo:d.contextInfo};return{msgData:_,contextInfo:d.contextInfo}};var i=r(n(81109)),o=n(5768),a=n(54468),s=r(n(718)),l=n(73602),u=n(77026)},9907:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r,msgContext:f}=e;const{templateMessage:m}=n;if(null==m)return;const E=m.interactiveMessageTemplate;if(E)return function(e,t,n,r){var o,l,u,d;const p=(0,i.default)((0,i.default)({},e),{},{type:s.MSG_TYPE.CHAT,kind:s.MsgKind.Chat},Boolean(null===(o=n.body)||void 0===o?void 0:o.text)&&{body:(0,a.convertToTextWithoutSpecialEmojis)(null===(l=n.body)||void 0===l?void 0:l.text)}),f=null!==(u=null===(d=(0,c.default)({messageProtobuf:{interactiveMessage:n},baseMessage:e,msgContext:t,bizSource:e.bizSource||""}))||void 0===d?void 0:d.msgData)&&void 0!==u?u:p;return{msgData:(0,i.default)((0,i.default)({},f),{},{templateId:r,isFromTemplate:!0,caption:f.caption,footer:f.footer,title:f.title}),contextInfo:void 0}}(r,f,E,m.templateId);const y=null!==(t=m.hydratedTemplate)&&void 0!==t?t:(0,o.default)(m.hydratedFourRowTemplate,"templateMessage.hydratedFourRowTemplate"),{documentMessage:S,imageMessage:v,locationMessage:I,videoMessage:T,hydratedButtons:b,hydratedContentText:M,hydratedFooterText:P,hydratedTitleText:C,templateId:O}=y;if((e=>{if(e.length>3)return!0;if(e.length>0){const t=A(e[0]);if(!e.slice(1).every((e=>{const n=A(e);return t===_?n===t:t===g||t===h?n===g||n===h:void 0})))return!0}return!1})(b))return{msgData:(0,i.default)((0,i.default)({},r),{},{type:s.MSG_TYPE.UNKNOWN,kind:s.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:void 0};const R=(()=>{const e=(0,i.default)((0,i.default)({},r),{},{type:s.MSG_TYPE.CHAT,kind:s.MsgKind.Chat},Boolean(M)&&{body:(0,a.convertToTextWithoutSpecialEmojis)(M)});var t,n,o,c,_,g,h,A;return v?null!==(t=null===(n=(0,u.default)({messageProtobuf:{imageMessage:v},baseMessage:r,msgContext:f}))||void 0===n?void 0:n.msgData)&&void 0!==t?t:e:S?null!==(o=null===(c=(0,l.default)({messageProtobuf:{documentMessage:S},baseMessage:r,msgContext:f}))||void 0===c?void 0:c.msgData)&&void 0!==o?o:e:I?null!==(_=null===(g=(0,d.default)({messageProtobuf:{locationMessage:I},baseMessage:r,msgContext:f}))||void 0===g?void 0:g.msgData)&&void 0!==_?_:e:T&&null!==(h=null===(A=(0,p.default)({messageProtobuf:{videoMessage:T},baseMessage:r,msgContext:f}))||void 0===A?void 0:A.msgData)&&void 0!==h?h:e})();return{msgData:(0,i.default)((0,i.default)({},R),{},{templateId:O,isFromTemplate:!0,caption:Boolean(M)?(0,a.convertToTextWithoutSpecialEmojis)(M):R.caption,footer:Boolean(P)?(0,a.convertToTextWithoutSpecialEmojis)(P):R.footer,title:Boolean(C)?(0,a.convertToTextWithoutSpecialEmojis)(C):R.title},b.length>0&&{hydratedButtons:b}),contextInfo:void 0}};var i=r(n(81109)),o=r(n(49619)),a=n(54468),s=n(73602),l=r(n(20020)),u=r(n(96259)),c=r(n(84263)),d=r(n(37302)),p=r(n(13501)),f=n(64498);const{QUICK_REPLY:_,URL:g,CALL:h}=f.TEMPLATE_BUTTON_SUBTYPE,A=e=>{let t="";return null!=e.callButton?t=h:null!=e.quickReplyButton?t=_:null!=e.urlButton&&(t=g),t}},33633:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearInitializePromise=function(){g=null},t.destroy=function(){return(0,l.destroyStorage)().catch((()=>(0,s.dexieCastToPromise)(new o.default(l.DATABASE_NAME).delete()))).finally((()=>(g=null,(0,s.dexieCastToPromise)(new o.default("fts-storage-dogfooding").delete()))))},Object.defineProperty(t,"getIndexV3Table",{enumerable:!0,get:function(){return f.getTable}}),Object.defineProperty(t,"getManifestTable",{enumerable:!0,get:function(){return _.getTable}}),Object.defineProperty(t,"getPurgeRangeQueueTable",{enumerable:!0,get:function(){return u.getTable}}),t.initialize=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=r(n(46808)),a=n(57874),s=n(49363),l=n(84039),u=n(7885),c=n(50974),d=n(73393),p=n(85472),f=n(85128),_=n(47566);let g;function h(){return(h=(0,i.default)((function*(){return null==g&&(yield(0,a.loadSchemaVersions)(),(0,l.createStorage)(),(0,_.addTable)(),(0,c.deprecateTable)(),(0,d.addTable)(),(0,p.addTable)(),(0,u.addTable)(),(0,f.addTable)(),g=(0,l.getStorage)().initialize().catch((e=>{throw __LOG__(4,!0,new Error,!0,["sad"])`Assertion failed!`,SEND_LOGS("Failed to initialize fts storage",1,"sad"),e}))),g}))).apply(this,arguments)}},84039:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(){const e=new i.default(l);u=new o.Storage(e)},t.destroyStorage=function(){if(null==u)return Promise.reject((0,a.default)("[fts-storage] Storage should be created first before being destroyed"));return u.purge().then((()=>{u=null})).catch((e=>{throw u=null,e}))},t.getStorage=function(){return(0,s.default)(null!=u,"[fts-storage] Storage should be created first before being accessed"),u};var i=r(n(96801)),o=n(21820),a=r(n(89482)),s=r(n(41143));const l="fts-storage";t.DATABASE_NAME=l;let u=null},39299:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ftsV1DeleteAndDeprecate=function(){return(0,r.getStorage)().versions.version(6)},t.ftsV1IndexCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.ftsV2Delete=function(){return(0,r.getStorage)().versions.version(7)},t.ftsV2DeleteTokenPrefixes=function(){return(0,r.getStorage)().versions.version(8)},t.ftsV2IndexCreateTable=function(){return(0,r.getStorage)().versions.version(3)},t.ftsV2TokenToPrefixesCreateTable=function(){return(0,r.getStorage)().versions.version(4)},t.ftsV3IndexCreateTable=function(){return(0,r.getStorage)().versions.version(5)},t.manifestCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.purgeRangeQueueCreateTable=function(){return(0,r.getStorage)().versions.version(2)},t.versionToRollout=void 0;var r=n(84039);t.versionToRollout=8},7885:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_NAME=void 0,t.addTable=function(){(0,r.getStorage)().add(l).version((0,i.purgeRangeQueueCreateTable)(),[s(["chatId","tsOfLastMessage","startRowId","endRowId"]),a("offset")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table(l)};var r=n(84039),i=n(39299),o=n(65717);const{addColumn:a,addCompositePrimaryKey:s}=(0,o.columnBuilder)(),l="fts-purge-range-queue";t.TABLE_NAME=l},50974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_NAME=void 0,t.deprecateTable=function(){(0,r.getStorage)().add(u).version((0,i.ftsV1IndexCreateTable)(),[s("token"),a("ids"),l("ids"),a("prefixes"),l("prefixes")]).delete((0,i.ftsV1DeleteAndDeprecate)())};var r=n(84039),i=n(39299),o=n(65717);const{addColumn:a,addUserDefinedPrimaryKey:s,addArrayIndex:l}=(0,o.columnBuilder)(),u="fts-v1-index";t.TABLE_NAME=u},73393:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_NAME=void 0,t.addTable=function(){(0,r.getStorage)().add(c).version((0,i.ftsV2IndexCreateTable)(),[s(["id","chatId","token"]),l("id"),l("chatId"),l("token"),u(["chatId","token"]),a("timestamp"),u(["id","token"])]).delete((0,i.ftsV2Delete)())};var r=n(84039),i=n(39299),o=n(65717);const{addColumn:a,addCompositePrimaryKey:s,addIndex:l,addCompositeIndex:u}=(0,o.columnBuilder)(),c="fts-v2-index";t.TABLE_NAME=c},85472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_NAME=void 0,t.addTable=function(){(0,r.getStorage)().add(a).version((0,i.ftsV2TokenToPrefixesCreateTable)(),[l("token"),s("prefixes"),u("prefixes")]).delete((0,i.ftsV2DeleteTokenPrefixes)())};var r=n(84039),i=n(39299),o=n(65717);const a="fts-v2-token-prefixes";t.TABLE_NAME=a;const{addColumn:s,addUserDefinedPrimaryKey:l,addArrayIndex:u}=(0,o.columnBuilder)()},85128:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_NAME=void 0,t.addTable=function(){(0,i.getStorage)().add(d).version((0,o.ftsV3IndexCreateTable)(),[l("ftsRowId"),s("id"),u("id"),s("chatId"),u("chatId"),s("timestamp"),s("prefixes"),c("prefixes")]).view((e=>e?(0,r.buildDBEntry)(e.ftsRowId,e.id,e.chatId,e.timestamp,e.prefixes):null))},t.getTable=function(){return(0,i.getStorage)().table(d)};var r=n(61835),i=n(84039),o=n(39299),a=n(65717);const{addColumn:s,addAutoIncrementingPrimaryKey:l,addIndex:u,addArrayIndex:c}=(0,a.columnBuilder)(),d="fts-v3-index";t.TABLE_NAME=d},47566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_NAME=t.ManifestKeys=void 0,t.addTable=function(){(0,r.getStorage)().add(a).version((0,i.manifestCreateTable)(),[u("key"),l("tokenizerVersion"),l("schemaVersion"),l("isCurrent"),l("lastMsgKeyViaFullIndexer"),l("isFullIndexingComplete")]).view((e=>e||null))},t.getTable=function(){return(0,r.getStorage)().table(a)};var r=n(84039),i=n(39299),o=n(65717);const a="manifest";t.TABLE_NAME=a;const s=Object.freeze({PREV_VERSION:"prev.version",CURR_VERSION:"curr.version",NEXT_VERSION:"next.version"});t.ManifestKeys=s;const{addColumn:l,addUserDefinedPrimaryKey:u}=(0,o.columnBuilder)()},1420:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.destroy=function(){return(0,l.destroyStorage)().catch((()=>(0,s.dexieCastToPromise)(new o.default(l.DATABASE_NAME).delete()))).finally((()=>{c=null}))},t.initialize=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=r(n(46808)),a=n(57874),s=n(49363),l=n(96676),u=n(51766);let c;function d(){return(d=(0,i.default)((function*(){return null==c&&(yield(0,a.loadSchemaVersions)(),(0,l.createStorage)(),(0,u.addTable)(),c=(0,l.getStorage)().initialize().catch((e=>{throw __LOG__(4,!0,new Error,!0,["sad"])`Assertion failed!`,SEND_LOGS("Failed to initialize jobs storage",1,"sad"),e}))),c}))).apply(this,arguments)}},96676:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(){const e=new i.default(l);u=new o.Storage(e)},t.destroyStorage=function(){if(null==u)return Promise.reject((0,a.default)("[jobs-storage] Storage should be created first before being destroyed"));return u.purge().then((()=>{u=null})).catch((e=>{throw u=null,e}))},t.getStorage=function(){return(0,s.default)(null!=u,"[jobs-storage] Storage should be created first before being accessed"),u};var i=r(n(96801)),o=n(21820),a=r(n(89482)),s=r(n(41143));const l="jobs-storage";t.DATABASE_NAME=l;let u=null},98123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jobsCreateV1Table=function(){return(0,r.getStorage)().versions.version(0)},t.jobsCreateV2Table=function(){return(0,r.getStorage)().versions.version(1)},t.versionToRollout=void 0;var r=n(96676);t.versionToRollout=1},51766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("jobs-store").version((0,i.jobsCreateV1Table)(),[s("jobId"),a("type"),a("uniqKey"),l("uniqKey"),a("original"),a("current"),a("step"),a("startTime"),a("endTime"),a("stepHardStartCountAfterTimeout"),a("stepFirstStartTime"),a("waitUntil"),a("backedOffCount"),a("version")]).version((0,i.jobsCreateV2Table)(),[a("stepUnexpectedErrorCount"),u("endTime")]).view((e=>({jobId:e.jobId,type:e.type,uniqKey:e.uniqKey,original:e.original,current:e.current,step:e.step,startTime:e.startTime,stepHardStartCountAfterTimeout:e.stepHardStartCountAfterTimeout,stepFirstStartTime:e.stepFirstStartTime,waitUntil:e.waitUntil,backedOffCount:e.backedOffCount,version:e.version,stepUnexpectedErrorCount:e.stepUnexpectedErrorCount})))},t.getTable=function(){return(0,r.getStorage)().table("jobs-store")};var r=n(96676),i=n(98123),o=n(65717);const{addColumn:a,addAutoIncrementingPrimaryKey:s,addIndex:l,removeColumn:u}=(0,o.columnBuilder)()},21820:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.NotInitializedError=t.NoSuchTableError=t.NoSuchDatabaseError=t.NoFallbackError=t.DuplicateTableError=t.DuplicateDatabaseError=t.AlreadyInitializedError=void 0;var i=r(n(48926)),o=r(n(46808)),a=r(n(45647)),s=r(n(81186)),l=n(91329),u=(r(n(95985)),n(49079)),c=n(51882),d=r(n(23336)),p=n(35741),f=r(n(89482));const _={packColumns:!1};class g extends Error{constructor(){super(...arguments),this.name="AlreadyInitializedError"}}t.AlreadyInitializedError=g;class h extends Error{constructor(){super(...arguments),this.name="DuplicateDatabaseError"}}t.DuplicateDatabaseError=h;class A extends Error{constructor(){super(...arguments),this.name="DuplicateTableError"}}t.DuplicateTableError=A;class m extends Error{constructor(){super(...arguments),this.name="NoFallbackError"}}t.NoFallbackError=m;class E extends Error{constructor(){super(...arguments),this.name="NoSuchDatabaseError"}}t.NoSuchDatabaseError=E;class y extends Error{constructor(){super(...arguments),this.name="NoSuchTableError"}}t.NoSuchTableError=y;class S extends Error{constructor(){super(...arguments),this.name="NotInitializedError"}}t.NotInitializedError=S;t.Storage=class{constructor(e,t){this.tables=new Map,this.views=new Map,this.state=1,this.versions=new p.StorageVersionManager,this.errorHandlers=new Map,this._database=e,this.config=null!=t?t:_,this._registerCommonErrorHandlers()}addErrorHandler(e,t){const n=(new e).name;this.errorHandlers.set(n,t)}add(e){if(this.tables.has(e))throw new A(`Table "${e}" already added. Reuse the definition.`);const t=u.DatabaseNames.cast(this._database.getDbName());if(void 0===t)throw __LOG__(4,void 0,new Error,!0)`db: unknown database name: ${this._database.getDbName()}`,SEND_LOGS("db: unknown database name"),(0,f.default)(`unknown database name: ${this._database.getDbName()}`);const n=t===u.DatabaseNames.LruMediaStorage?null:(0,u.getSchemaVersions)(t).get(t),r=new d.default(e,this.versions,n);return this.tables.set(e,r),r}_registerCommonErrorHandlers(){this.addErrorHandler(o.default.DatabaseClosedError,(e=>{if(a.default.takeOver&&e.message.includes("DatabaseClosedError"))throw new l.DbClosedOnTakeover(e.message)})),this.addErrorHandler(o.default.NoSuchDatabaseError,(e=>{if(a.default.takeOver&&e.message.includes("NoSuchDatabaseError"))throw new l.DbNotFoundOnTakeover(e.message)})),this.addErrorHandler(o.default.AbortError,(e=>{e.message.includes("QuotaExceededError")&&c.StorageCmd.trigger("storage_not_enough_space")}))}_getBackingDB(){return this._database}_unsafeGetOrCreateView(e){if(this.views.has(e))return this.views.get(e);const t=this._database.view(e.name,e.rowview,e.shouldEnablePropFilter,e.shouldUseDbMsgEncKeyForEncryptedCol);return this.views.set(e,t),t}_guardInitializedThunk(e){return()=>{if(3&this.state)throw new S("Storage must be initialized before accessing a table!");return e()}}table(e){const t=this.tables.get(e);if(!t||!t.tableExists())throw new y(`Unknown table ${e} requested, ensure table is defined!`);if(!this._getBackingDB())throw new E(`Unable to find associated database with table "${e}"`);return new s.default(this._guardInitializedThunk((()=>this._unsafeGetOrCreateView(t))),this.errorHandlers)}lock(e,t){if(3&this.state)return Promise.reject(new S("Initialize storage before attempting to lock tables!"));for(let t=0;t<e.length;++t){var n;if(!this.tables.has(e[t])||!(null===(n=this.tables.get(e[t]))||void 0===n?void 0:n.tableExists()))return Promise.reject(new y(`Requested lock of unknown table "${e[t]}"`))}const r=e.map((e=>{const t=this.tables.get(e);if(t)return t;throw new y(`Requested lock of unknown table "${e}"`)})).map((e=>this._unsafeGetOrCreateView(e)));return this._getBackingDB().transact(e,(0,i.default)((function*(){return t(r)}))).finally((()=>{}))}_getUpgraderForCurrentVersion(e,t){for(let n=0;n<e.length;n++)if(e[n].maxVersion===t){const r=e[n].upgraders.get(t);if(r)return{name:e[n].name,callback:r}}}_applyDatabaseVersion(e,t,n){const r=t,i=n.map((e=>e.schema(r))).filter(Boolean);return e.initialize(t,i,this._getUpgraderForCurrentVersion(n,r),this.errorHandlers)}initialize(){var e=this;return(0,i.default)((function*(){if(4&e.state)throw new g("Storage instance has already been initialized");if(e.versions.validate(),!e._database)throw new E(`"${e._database.constructor.name}" failed availability check!`);yield e._database.available();const t=Array.from(e.tables.values()),n=e._getBackingDB();if(t&&n){for(let r=0;r<=e.versions.getMax();r++)yield e._applyDatabaseVersion(n,r,t);yield n.open(),e.state=4}}))()}purge(){return this.state=2,this.views=new Map,this._getBackingDB().reset().then((()=>{}))}doesLocalSchemaIncludeVersion(e){return e<=this.versions.getMax()}getExistingTables(){const e=new Map;return this.tables.forEach(((t,n)=>{t.tableExists()&&e.set(n,t)})),e}}},71164:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.columnPackingEnabled=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(74557),a=n(58625);function s(){return(s=(0,i.default)((function*(e){if(yield(0,o.storageExists)()){const e=yield(0,a.getColumnPackingValueFromStorage)();return null==e?(yield(0,a.setColumnPackingValueToStorage)(!1),!1):e}return yield(0,a.setColumnPackingValueToStorage)(e),e}))).apply(this,arguments)}},8065:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMARY_KEY_TYPE=t.INDEX_TYPE=t.ENCRYPTED_VALUE_TYPE=void 0,t.cloneSchema=function(e){return{name:e.name,columns:e.columns.map((e=>(0,i.default)({},e))),indexes:e.indexes.map(d),encryptedColumns:(0,i.default)({},e.encryptedColumns||{}),deleted:e.deleted}},t.emptySchema=function(e){return{name:e,columns:[],indexes:[],encryptedColumns:{}}},t.findIndex=function(e,t){return e.indexes.findIndex((e=>function(e,t){if(e.type!==t.type)return!1;switch(e.type){case l.SIMPLE:case l.ARRAY:case l.UNIQUE:return(0,a.default)(t.type===e.type,"Index types are not equal"),e.column===t.column;case l.COMPOSITE:return(0,a.default)(t.type===e.type,"Index types are not equal"),e.columns.length===t.columns.length&&!e.columns.some((e=>!t.columns.includes(e)))}throw(0,o.default)(`cannot compare unknown indexes of types: ${e.type}, ${t.type}`)}(t,e)))},t.freezeSchema=function(e){return Object.freeze({name:e.name,columns:Object.freeze(e.columns.map(Object.freeze)),indexes:Object.freeze(e.indexes.map(c)),encryptedColumns:Object.freeze((0,i.default)({},e.encryptedColumns||{})),deleted:e.deleted})},t.indexContainsColumn=function(e,t){switch(e.type){case l.SIMPLE:case l.ARRAY:case l.UNIQUE:return e.column===t;case l.COMPOSITE:return!!e.columns.find((e=>e===t))}throw(0,o.default)(`cannot check indexes of unknown index type: ${e.type}`)};var i=r(n(81109)),o=r(n(89482)),a=r(n(41143));const s=Object.freeze({AUTO_INCREMENT:"auto-increment",USER_DEFINED:"user-defined",COMPOSITE:"composite"});t.PRIMARY_KEY_TYPE=s;const l=Object.freeze({SIMPLE:"simple",COMPOSITE:"composite",ARRAY:"array",UNIQUE:"unique"});t.INDEX_TYPE=l;const u=Object.freeze({STRING:"String",ARRAY_BUFFER:"ArrayBuffer"});function c(e){switch(e.type){case l.SIMPLE:return Object.freeze({type:l.SIMPLE,column:e.column});case l.ARRAY:return Object.freeze({type:l.ARRAY,column:e.column});case l.COMPOSITE:return Object.freeze({type:l.COMPOSITE,columns:Object.freeze(e.columns.map(Object.freeze))});case l.UNIQUE:return Object.freeze({type:l.UNIQUE,column:e.column})}throw(0,o.default)(`cannot freeze index of unknown type: ${e.type}`)}function d(e){switch(e.type){case l.SIMPLE:return{type:l.SIMPLE,column:e.column};case l.UNIQUE:return{type:l.UNIQUE,column:e.column};case l.COMPOSITE:return{type:l.COMPOSITE,columns:e.columns.map((e=>e))};case l.ARRAY:return{type:l.ARRAY,column:e.column}}throw(0,o.default)(`cannot clone unknown index type: ${e.type}`)}t.ENCRYPTED_VALUE_TYPE=u},23336:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(81109)),o=n(65589),a=n(8065),s=r(n(41143));function l(e){return e}t.default=class{constructor(e,t,n){this.maxVersion=-1,this.versions=new Map,this.upgraders=new Map,this.shouldEnablePropFilter=!0,this.shouldUseDbMsgEncKeyForEncryptedCol=!0,this.name=e,this.versionManager=t,this.maxVersionAllowedRollout=n}version(e,t,n){if(!this.versionManager.claim(e,this.maxVersionAllowedRollout,this.name))return this;(0,s.default)(!this.versions.has(e),'Table "%s" already has version # %s defined!',this.name,+e),(0,s.default)(e>this.maxVersion,"Versions for table %s must be defined in order",this.name),this.maxVersion=e;const r=this.schema(e)||(0,a.emptySchema)(this.name),i=(0,o.sortMutations)(t).reduce(((e,t)=>(t.validate(e),t.apply(e))),(0,a.cloneSchema)(r));return this.versions.set(e,(0,a.freezeSchema)(i)),this.upgraders.set(e,n),this}devOnlyDoNotUseInitWithMaxVersion(e,t){const n=this.versionManager.getMax()+1;return this.version(n,e,t)}delete(e){if(!this.versionManager.claim(e,this.maxVersionAllowedRollout,this.name))return this;(0,s.default)(!this.versions.has(e),'Table "%s" already has version # %s defined!',this.name,+e),(0,s.default)(e>this.maxVersion,"Versions for table %s must be defined in order",this.name),this.maxVersion=e;const t=this.schema(e)||(0,a.emptySchema)(this.name),n=(0,i.default)((0,i.default)({},t),{},{deleted:!0});return this.versions.set(e,(0,a.freezeSchema)(n)),this}view(e){return this.rowview=e,this}enablePropFilter(e){return this.shouldEnablePropFilter=e,this}useDbMsgEncKeyForEncryptedCol(e){return this.shouldUseDbMsgEncKeyForEncryptedCol=e,this}schema(e){const t=this.versions.get(e);if(t)return t;const n=Array.from(this.versions.keys()).map(l).sort(((e,t)=>e-t)).filter((t=>t<e)).pop();return n||0===n?this.versions.get(n)||(0,a.emptySchema)(this.name):null}tableExists(){return-1!==this.maxVersion}}},35741:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageVersionManager=t.MissingVersionError=t.InvalidVersionError=t.DuplicateVersionError=void 0;class n extends Error{constructor(){super(...arguments),this.name="DuplicateVersionError"}}t.DuplicateVersionError=n;class r extends Error{constructor(){super(...arguments),this.name="InvalidVersionError"}}t.InvalidVersionError=r;class i extends Error{constructor(){super(...arguments),this.name="MissingVersionError"}}t.MissingVersionError=i;t.StorageVersionManager=class{constructor(){this.versions=new Set,this._max=-1}claim(e,t,i){if(e<0)throw new r("Versions must by greater than or equal to zero!");if(this.versions.has(e))throw new n(`Version #${e} has already been claimed!`);return null!=t&&t<e?(__LOG__(2)`db: skipping version ${e} for table ${i} since it is higher than max version to rollout ${t}`,!1):(this.versions.add(e),this._max=Math.max(this.getMax(),e),!0)}version(e){if(e<0)throw new r("Versions must by greater than or equal to zero!");return e}validate(){for(let e=0;e<=this.getMax();++e)if(!this.versions.has(e))throw new i(`Schema version #${e} is missing!`)}getMax(){return this._max}}},96801:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(49619)),a=n(13350),s=r(n(46808)),l=n(56858),u=n(49363),c=n(8065),d=r(n(89482)),p=r(n(41143));function f(){return(f=(0,i.default)((function*(e,t,n,r){if(!l.DbEncKeyStore)throw(0,d.default)("feature is not yet implemented");const i=r?l.DbEncKeyStore.getDbMsgEncKeys({tableName:t.tableName}):l.DbEncKeyStore.getEncKeys(),o=i[i.length-1],a=new Uint8Array(16);let f;self.crypto.getRandomValues(a),"string"==typeof e?((0,p.default)(n===c.ENCRYPTED_VALUE_TYPE.STRING,"Expected a string for ENCRYPTED_VALUE_TYPE (%s-%s) but got %s",t.tableName,t.columnName,typeof e),f=(new TextEncoder).encode(e)):f=e;try{const e=self.crypto.subtle.encrypt({iv:a,name:l.DB_ENCRYPTION_CIPHER},o.key,f),t=null==s.default.currentTransaction?e:s.default.waitFor(e);return{_data:yield(0,u.dexieCastToPromise)(t),iv:a,_keyId:o.id,_scheme:r?1:0}}catch(e){throw I(e,"encryptDbMaterial",null,t.columnName),e}}))).apply(this,arguments)}s.default.Promise.PSD.onunhandled=()=>{},s.default.Promise.PSD.txRelaxedDurabilityEnabled=!0;const _=["poll-votes","chat","sync-keys","orphan-tc-token"];function g(e,t,n){const{_keyId:r,_scheme:i}=e,o=n&&!_.includes(t),a=_.includes(t)&&1===i;return o||a?l.DbEncKeyStore.getDbMsgEncKeys({tableName:t}).filter((e=>e.id===r))[0]:l.DbEncKeyStore.getEncKeys().filter((e=>e.id===r))[0]}function h(){return(h=(0,i.default)((function*(e,t,n,r){if(!l.DbEncKeyStore)throw(0,d.default)("feature is not yet implemented");const{_data:i,iv:o}=e;let a=null;if(a=g(e,t.tableName,r),(0,p.default)(null!=a,"Encryption key id not found"),null==i)return i;try{const e=self.crypto.subtle.decrypt({iv:o,name:l.DB_ENCRYPTION_CIPHER},a.key,i),t=null==s.default.currentTransaction?e:s.default.waitFor(e),r=yield(0,u.dexieCastToPromise)(t);return n===c.ENCRYPTED_VALUE_TYPE.STRING?new TextDecoder("utf-8").decode(r):r}catch(e){throw I(e,"decryptDbMaterial",null,t.columnName),e}}))).apply(this,arguments)}class A{constructor(e,t,n,r,i,o,a){this.table=e,this.view=n,this.db=t,this.propFilter=r,this.tableColumns=i,this.tableEncryptedColumns=new Map(Object.keys(o).map((e=>[e,o[e]]))),this.shouldUseDbMsgEncKeyForEncryptedCol=a.shouldUseDbMsgEncKeyForEncryptedCol,this.packColumns=a.packColumns}asyncView(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,i.default)((function*(){const r=t._deserializeColumns(e),i=t._hasEncryptedColumn()&&n?yield t._decryptColumns(r):r;return t.view(i)}))()}_deserializeColumns(e){return e}_serializeColumns(e){return e}_decryptColumns(e){var t=this;return(0,i.default)((function*(){(0,p.default)("object"==typeof e,"Called `_decryptColumns` with primitive value");const n=Array.from(t.tableEncryptedColumns.entries()).map((n=>{let[r,i]=n;const o=e[r];return(null==o?void 0:o._data)&&(null==o?void 0:o.iv)?function(){return h.apply(this,arguments)}(o,{tableName:t.table.name,columnName:r},i,t.shouldUseDbMsgEncKeyForEncryptedCol).then((t=>{e[r]=t})):o}));return yield Promise.all(n),e}))()}_encryptColumns(e){const t=Array.from(this.tableEncryptedColumns.entries()).map((t=>{let[n,r]=t;const i=e[n];return null==i?i:function(){return f.apply(this,arguments)}(i,{tableName:this.table.name,columnName:n},r,this.shouldUseDbMsgEncKeyForEncryptedCol).then((t=>{e[n]=t}))}));return Promise.all(t).then((()=>e))}_encryptAndSerialize(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.default)((function*(){const r=yield t._encryptSingleUpdate(e);return t._serializeColumns(r,n)}))()}_bulkEncryptAndSerialize(e){var t=this;return(0,i.default)((function*(){return(yield t._encryptBulkUpdates(e)).map((e=>t._serializeColumns(e)))}))()}_encryptSerializeAndAdd(e){var t=this;return(0,i.default)((function*(){const n=yield t._encryptAndSerialize(e);return t.table.add(n)}))()}_encryptSerializeAndPut(e){var t=this;return(0,i.default)((function*(){const n=yield t._encryptAndSerialize(e);return t.table.put(n)}))()}_encryptSerializeAndBulkAdd(e){var t=this;return(0,i.default)((function*(){const n=yield t._bulkEncryptAndSerialize(e);return t.table.bulkAdd(n)}))()}_encryptSerializeAndBulkPut(e){if(this._hasEncryptedColumn())return s.default.waitFor(this._encryptBulkUpdates(e)).then((e=>{const t=e.map((e=>this._serializeColumns(e)));return this.table.bulkPut(t)}));const t=e.map((e=>this._serializeColumns(e)));return this.table.bulkPut(t)}_encryptBulkUpdates(e){if(this._hasEncryptedColumn()){const t=[],n=e.map(((e,n)=>this._encryptColumns(e).then((e=>{t[n]=e}))));return Promise.all(n).then((()=>t))}return Promise.resolve(e)}_encryptSingleUpdate(e){var t=this;return(0,i.default)((function*(){if(t._hasEncryptedColumn()){return yield t._encryptColumns(e)}return e}))()}asyncViewMap(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._hasEncryptedColumn()||!t)return Promise.resolve(e.map((e=>e?this.view(this._deserializeColumns(e)):null)));const n=e.map((e=>null!=e?this.asyncView(e,t):Promise.resolve(null)));return(0,u.dexieCastToPromise)(null==s.default.currentTransaction?Promise.all(n):s.default.waitFor(Promise.all(n)))}preflightEncryptSingleRecord(e){return Object.keys(e).forEach((t=>{this.tableEncryptedColumns.has(t)||delete e[t]})),this._encryptColumns(e)}postflightDecryptSingleRecord(e){var t=this;return(0,i.default)((function*(){const n=yield t._decryptColumns(e);return t.view(n)}))()}bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(e){if(0===e.length)return(0,u.dexieCastToPromise)();const t=e.map((e=>this.propFilter(e)));T(t,this.tableEncryptedColumns);const n=t.map((e=>this._serializeColumns(e)));return(0,u.dexieCastToPromise)(this.table.bulkAdd(n)).catch((e=>{throw I(e,"bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY",this.table.name),e}))}bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(e){if(0===e.length)return(0,u.dexieCastToPromise)();const t=e.map((e=>this.propFilter(e)));T(t,this.tableEncryptedColumns);const n=t.map((e=>this._serializeColumns(e)));return(0,u.dexieCastToPromise)(this.table.bulkPut(n)).catch((e=>{throw I(e,"bulkCreateOrReplace",this.table.name),e}))}create(e){const t=this.propFilter(e);return(0,u.dexieCastToPromise)(this._encryptSerializeAndAdd(t)).catch((e=>{throw I(e,"create",this.table.name),e}))}createOrReplace(e){const t=this.propFilter(e);return(0,u.dexieCastToPromise)(this._encryptSerializeAndPut(t)).catch((e=>{throw I(e,"createOrReplace",this.table.name),e}))}createOrMerge(e,t){var n=this;return(0,i.default)((function*(){const r=n.propFilter(t),i=yield n._encryptAndSerialize(r,!0);return(0,u.dexieCastToPromise)(n.db.transaction("rw",n.table,(()=>n.table.where(":id").equals(e).modify((e=>{Object.assign(e,i)})).then((e=>{if(1!==e)return n.table.add(i)})))).then((()=>{}))).catch((e=>{throw I(e,"createOrMerge",n.table.name),e}))}))()}get(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,u.dexieCastToPromise)(this.table.get(e)).then((e=>e?this.asyncView(e,t):null)).catch((e=>{throw I(e,"get",this.table.name),e}))}merge(e,t){var n=this;return(0,i.default)((function*(){const r=n.propFilter(t),i=yield n._encryptAndSerialize(r,!0);try{yield(0,u.dexieCastToPromise)(n.table.update(e,i))}catch(e){throw I(e,"merge",n.table.name),e}}))()}remove(e){var t=this;return(0,i.default)((function*(){try{yield(0,u.dexieCastToPromise)(t.table.delete(e))}catch(e){throw I(e,"remove",t.table.name),e}}))()}bulkCreate(e){if(0===e.length)return(0,u.dexieCastToPromise)();const t=e.map((e=>this.propFilter(e)));if(this._hasEncryptedColumn())return(0,u.dexieCastToPromise)(this.db.transaction("rw",this.table,(()=>this._encryptSerializeAndBulkAdd(t)))).catch((e=>{throw I(e,"bulkCreate",this.table.name),e}));const n=t.map((e=>this._serializeColumns(e)));return(0,u.dexieCastToPromise)(this.table.bulkAdd(n))}bulkCreateOrReplace(e){if(0===e.length)return(0,u.dexieCastToPromise)();const t=e.map((e=>this.propFilter(e)));if(this._hasEncryptedColumn())return(0,u.dexieCastToPromise)(this.db.transaction("rw",this.table,(()=>this._encryptSerializeAndBulkPut(t)))).catch((e=>{throw I(e,"bulkCreateOrReplace",this.table.name),e}));const n=t.map((e=>this._serializeColumns(e)));return(0,u.dexieCastToPromise)(this.table.bulkPut(n))}bulkCreateOrMerge(e){var t=this;return(0,i.default)((function*(){if(0===e.length)return(0,u.dexieCastToPromise)();const n=new Map,r=t._primaryKey();function o(){return(o=(0,i.default)((function*(e){const n=t.table.where(":id").anyOf(Array.from(e.keys()));yield n.modify((t=>{Object.assign(t,e.get(t[r])),e.delete(t[r])}));return Array.from(e.values())}))).apply(this,arguments)}return(yield t._encryptBulkUpdates(e)).forEach((e=>{const i=t.propFilter(e),o=t._serializeColumns(i,!0);(0,p.default)(r in o,"Called `bulkCreateOrMerge` with item(s) not including the primary key"),n.set(o[r],o)})),(0,u.dexieCastToPromise)(t.db.transaction("rw",t.table,(()=>function(){return o.apply(this,arguments)}(n).then((e=>0===e.length?(0,u.dexieCastToPromise)():t.table.bulkPut(e)))))).catch((e=>{throw I(e,"bulkCreateOrMerge",t.table.name),e}))}))()}bulkGet(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return 0===e.length?Promise.resolve([]):(0,u.dexieCastToPromise)(this.db.transaction("r",this.table,(()=>{const t=e.map((e=>this.table.get(e)));return s.default.Promise.all(t)}))).then((e=>this.asyncViewMap(e,t))).catch((e=>{throw I(e,"bulkGet",this.table.name),e}))}bulkRemove(e){return 0===e.length?Promise.resolve():(0,u.dexieCastToPromise)(this.db.transaction("rw",this.table,(()=>this.table.bulkDelete(e)))).catch((e=>{throw I(e,"bulkRemove",this.table.name),e}))}bulkRemoveByIndex(e,t){return 0===t.length?Promise.resolve():(0,u.dexieCastToPromise)(this.table.where(y(e,this.tableColumns)).anyOf(t).delete()).catch((e=>{throw I(e,"bulkRemoveByIndex",this.table.name),e}))}all(e,t){let n=S(this.table.orderBy((null==e?void 0:e.index)?y(e.index,this.tableColumns):":id"),e);t&&(n=n.until((e=>t(this._deserializeColumns(e)))));let r=null;switch(null==e?void 0:e.returnKeyType){case"keys":r=(0,u.dexieCastToPromise)(n.keys());break;case"primary_key":r=(0,u.dexieCastToPromise)(n.primaryKeys());break;default:r=(0,u.dexieCastToPromise)(n.toArray()).then((t=>this.asyncViewMap(t,null==e?void 0:e.shouldDecrypt)))}return r.catch((e=>{throw I(e,"all",this.table.name),e}))}count(){return(0,u.dexieCastToPromise)(this.table.count()).catch((e=>{throw I(e,"count",this.table.name),e}))}bulkDeleteRange(e,t,n,r){const i=this.table.where(y(e,this.tableColumns)).between(t,n,!!(null==r?void 0:r.lowerInclusive),!!(null==r?void 0:r.upperInclusive));return(0,u.dexieCastToPromise)(S(i,r).delete()).catch((e=>{throw I(e,"bulkDeleteRange",this.table.name),e}))}equals(e,t,n){return(0,u.dexieCastToPromise)(S(this.table.where(y(e,this.tableColumns)).equals(t),n).toArray()).then((e=>this.asyncViewMap(e,null==n?void 0:n.shouldDecrypt))).catch((e=>{throw I(e,"equals",this.table.name),e}))}anyOf(e,t,n){return 0===t.length?Promise.resolve([]):(0,u.dexieCastToPromise)(S(this.table.where(y(e,this.tableColumns)).anyOf(t),n).distinct().toArray()).then((e=>this.asyncViewMap(e,null==n?void 0:n.shouldDecrypt))).catch((e=>{throw I(e,"anyOf",this.table.name),e}))}startsWithAnyOf(e,t,n){return 0===t.length?Promise.resolve([]):(0,u.dexieCastToPromise)(S(this.table.where(y(e,this.tableColumns)).startsWithAnyOf(t),n).distinct().toArray()).then((e=>this.asyncViewMap(e,null==n?void 0:n.shouldDecrypt))).catch((e=>{throw I(e,"startsWithAnyOf",this.table.name),e}))}greaterThan(e,t,n){const r=!0===(null==n?void 0:n.inclusive)?this.table.where(y(e,this.tableColumns)).aboveOrEqual(t):this.table.where(y(e,this.tableColumns)).above(t);return(0,u.dexieCastToPromise)(S(r,n).toArray()).then((e=>this.asyncViewMap(e,null==n?void 0:n.shouldDecrypt))).catch((e=>{throw I(e,"greaterThan",this.table.name),e}))}lessThan(e,t,n){const r=!0===(null==n?void 0:n.inclusive)?this.table.where(y(e,this.tableColumns)).belowOrEqual(t):this.table.where(y(e,this.tableColumns)).below(t);return(0,u.dexieCastToPromise)(S(r,n).toArray()).then((e=>this.asyncViewMap(e,null==n?void 0:n.shouldDecrypt))).catch((e=>{throw I(e,"lessThan",this.table.name),e}))}between(e,t,n,r,i){const o=S(this.table.where(y(e,this.tableColumns)).between(t,n,!!(null==r?void 0:r.lowerInclusive),!!(null==r?void 0:r.upperInclusive)),r);let a=null;switch(null==r?void 0:r.returnKeyType){case"keys":a=(0,u.dexieCastToPromise)(o.keys());break;case"primary_key":a=(0,u.dexieCastToPromise)(o.primaryKeys());break;default:a=i?(0,u.dexieCastToPromise)(o.until((e=>i(this._deserializeColumns(e)))).toArray()).then((e=>this.asyncViewMap(e,null==r?void 0:r.shouldDecrypt))):(0,u.dexieCastToPromise)(o.toArray()).then((e=>this.asyncViewMap(e,null==r?void 0:r.shouldDecrypt)))}return a.catch((e=>{throw I(e,"between",this.table.name),e}))}betweenCount(e,t,n,r){const i=this.table.where(y(e,this.tableColumns)).between(t,n,!!(null==r?void 0:r.lowerInclusive),!!(null==r?void 0:r.upperInclusive));return(0,u.dexieCastToPromise)(S(i,r).count()).catch((e=>{throw I(e,"betweenCount",this.table.name),e}))}forEachSortedBy(e,t){var n=this;return this.table.orderBy(e).each(function(){var e=(0,i.default)((function*(e){const r=n._deserializeColumns(e),i=yield n._decryptColumns(r);return t(i)}));return function(){return e.apply(this,arguments)}}()).catch((e=>{throw I(e,"forEachSortedBy",this.table.name),e}))}forEach(e){var t=this;return this.table.each(function(){var n=(0,i.default)((function*(n){const r=t._deserializeColumns(n),i=yield t._decryptColumns(r);return e(i)}));return function(){return n.apply(this,arguments)}}()).catch((e=>{throw I(e,"forEach",this.table.name),e}))}clear(){return(0,u.dexieCastToPromise)(this.table.clear()).catch((e=>{throw I(e,"clear",this.table.name),e}))}_primaryKey(){return this.table.schema.primKey.name}_hasEncryptedColumn(){return this.tableEncryptedColumns.size>0}}function m(e){if(e.length>1)return e.forEach((e=>{(0,p.default)(e.primaryKey&&e.primaryKey===c.PRIMARY_KEY_TYPE.COMPOSITE,"Invalid column passed to `formatPrimaryKey`")})),`[${e.map((e=>e.packedName)).join("+")}]`;const t=e[0];return(0,p.default)(t.primaryKey&&t.primaryKey!==c.PRIMARY_KEY_TYPE.COMPOSITE,"Invalid column passed to `formatPrimaryKey`"),t.primaryKey===c.PRIMARY_KEY_TYPE.AUTO_INCREMENT?`${t.packedName}++`:t.packedName}function E(e){switch(e.type){case c.INDEX_TYPE.SIMPLE:return e.column;case c.INDEX_TYPE.COMPOSITE:return`[${e.columns.join("+")}]`;case c.INDEX_TYPE.ARRAY:return`*${e.column}`;case c.INDEX_TYPE.UNIQUE:return`&${e.column}`}throw(0,d.default)(`Cannot format index of type "${e.type}"`)}function y(e,t){const n=e.map((n=>{const r=t.get(n);if(null==r)throw __LOG__(4,void 0,new Error)`[storage] trying to query with a non-existing column ${n} in index ${e.join(",")}`,(0,d.default)("format-query-index-nonexistent-column");return r.packedName}));return 1===n.length?n[0]:`[${n.join("+")}]`}function S(e,t){let n=e;return!0===(null==t?void 0:t.reverse)&&(n=n.reverse()),null!=(null==t?void 0:t.offset)&&(n=n.offset(t.offset)),null!=(null==t?void 0:t.limit)&&0!==t.limit&&(n=n.limit(t.limit)),n}function v(e){return Promise.resolve(e)}function I(e,t,n){__LOG__(3,!0,void 0,!0)`idb failed to do Operation: ${t} on Table: ${n}. Failed with error ${e}`,SEND_LOGS("storage-error",0)}function T(e,t){const n=Array.from(t.entries());e.forEach((e=>{n.forEach((t=>{let[n,r]=t;e[n]&&(e[n]._keyId&&e[n]._data&&e[n].iv||__LOG__(2)`[CRITICAL] Records contain unencrypted field`)}))}))}t.default=class{constructor(e,t){this.tableNames=new Map,this.tableColumns=new Map,this.tableEncryptedColumns=new Map,this.errorHandlers=new Map,this.name=e,this.db=new s.default(this.name,{chromeTransactionDurability:"relaxed",addons:[]}),this.transformSchema=(null==t?void 0:t.transformSchema)||v,this.packColumns=!!(null==t?void 0:t.packColumns)}initialize(e,t,n,r){return r&&(this.errorHandlers=r),function(e,t,n,r,i){return(0,a.promiseReduce)(e,((e,o)=>i((0,c.cloneSchema)(o)).then((i=>{if((0,p.default)(!(i.name in e),"Multiple tables resulted in the same transformed name"),!0===i.deleted)return e[i.name]=null,e;t.set(o.name,i.name),n.set(o.name,i.columns.reduce(((e,t)=>(e.set(t.name,t),e)),new Map)),r.set(o.name,i.encryptedColumns||{});const a=i.columns.filter((e=>e.primaryKey));(0,p.default)(a.length>=1,'No primary key was defined for "%s"',o.name);const s=[m(a)].concat(i.indexes.map(E)).join(", ");return e[i.name]=s,e}))),{})}(t,this.tableNames,this.tableColumns,this.tableEncryptedColumns,this.transformSchema).then((t=>{this.db.version(e+1).stores(t).upgrade((e=>{var t;if(n)return null===(t=e[n.name])||void 0===t?void 0:t.toCollection().modify(n.callback)}))}))}open(){var e=this;return(0,i.default)((function*(){yield(0,u.dexieCastToPromise)(e.db.open())}))()}transact(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rw";return(0,u.dexieCastToPromise)(this.db.transaction(n,e,(()=>t()))).catch((e=>{const t=this.errorHandlers.get(e.name);if(!t)throw e;t(e)}))}close(){return this.db.close(),(0,u.dexieCastToPromise)()}view(e,t,n,r){(0,p.default)(this.tableNames.has(e),'Attempted to get view for uninitialized table "%s"',e),(0,p.default)(this.tableColumns.has(e),'Attempted to get columns for uninitialized table "%s"',e);const i=n?function(e){if(!e)return e=>e;return t=>{const n={};return e.forEach((e=>{const r=e.name;t.hasOwnProperty(r)&&(n[r]=t[r])})),n}}(this.tableColumns.get(e)):e=>e;return new A(this.db.table(this.tableNames.get(e)),this.db,t,i,(0,o.default)(this.tableColumns.get(e),"this.tableColumns.get(table)"),(0,o.default)(this.tableEncryptedColumns.get(e),"this.tableEncryptedColumns.get(table)"),{shouldUseDbMsgEncKeyForEncryptedCol:r,packColumns:this.packColumns})}available(){return Promise.resolve(!0)}reset(){return this.tableNames=new Map,(0,u.dexieCastToPromise)(this.db.delete())}getDbName(){return this.name}}},97754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beginDBTableUsage=function(e,t,n){const o=new Map;for(const n of t){const t=new r.WebDbTableUsageWamEvent({webScenario:e,webTableReadCount:0,webTableWriteCount:0,webTable:n});o.set(n,t)}function a(){if(null!=n)for(const e of o.values())e.offlineSessionId=n;for(const e of o.values())e.commit();return i.delete(a),i.size}return i.set(a,o),a},t.recordTableUsageStat=function(e,t){for(const[,n]of i){const r=n.get(e);null!=r&&("read"===t?r.webTableReadCount++:r.webTableWriteCount++)}};var r=n(61171);const i=new Map},7462:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.recordReadStat=function(e){(0,i.recordTableUsageStat)(e,"read")},t.recordWriteStat=function(e){(0,i.recordTableUsageStat)(e,"write")};var i=n(97754);r(n(95985))},95985:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n(81109));var i=n(78494);n(25303);var o=new class{constructor(){this.dbLockStats=new Map,this.dbReadWriteStats=new Map,this.seen=new Map,this.reports={},this.removeOlderLockStatsTimer=new i.ShiftTimer((()=>{})),this.logReadWriteStatsTimer=new i.ShiftTimer((()=>{}))}recordReadStat(e){}recordWriteStat(e){}recordLockStat(e){}lockReport(){return[]}logDbReadWriteStats(){}export(){return""}getAllReports(){return{}}};t.default=o},81186:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(45647)),o=n(7462),a=n(91329);t.default=class{constructor(e,t){this.errorHandlers=new Map,this._view=e,t&&(this.errorHandlers=t)}_maybeHandleError(e){const t=this.errorHandlers.get(e.name);t&&t(e)}_read(e){if(i.default.isLogoutInProgress)return Promise.reject(new a.DbOnLogoutAbort("dropping db read operation due to logout"));const t=this._view();return(0,o.recordReadStat)(t.table.name),e(t).catch((e=>{throw this._maybeHandleError(e),e}))}_write(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&i.default.isLogoutInProgress)return Promise.reject(new a.DbOnLogoutAbort("dropping db write operation due to logout"));const n=this._view();return(0,o.recordWriteStat)(n.table.name,t),e(n).catch((e=>{throw this._maybeHandleError(e),e}))}create(e){return this._write((t=>t.create(e)))}preflightEncryptSingleRecord(e){return this._write((t=>t.preflightEncryptSingleRecord(e)),!1,!0)}postflightDecryptSingleRecord(e){return this._write((t=>t.postflightDecryptSingleRecord(e)),!1,!0)}bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(e){return this._write((t=>t.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(e)))}bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(e){return this._write((t=>t.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(e)))}createOrReplace(e){return this._write((t=>t.createOrReplace(e)))}createOrMerge(e,t){return this._write((n=>n.createOrMerge(e,t)))}get(e,t){return this._read((n=>n.get(e,t)))}merge(e,t){return this._write((n=>n.merge(e,t)))}remove(e){return this._write((t=>t.remove(e)))}bulkCreate(e){return this._write((t=>t.bulkCreate(e)))}bulkCreateOrReplace(e){return this._write((t=>t.bulkCreateOrReplace(e)))}bulkCreateOrMerge(e){return this._write((t=>t.bulkCreateOrMerge(e)))}bulkGet(e,t){return this._read((n=>n.bulkGet(e,t)))}bulkRemoveByIndex(e,t){return this._write((n=>n.bulkRemoveByIndex(e,t)))}bulkRemove(e){return this._write((t=>t.bulkRemove(e)))}betweenCount(e,t,n,r){return this._write((i=>i.betweenCount(e,t,n,r)))}bulkDeleteRange(e,t,n){return this._write((r=>r.bulkDeleteRange(e,t,n)))}all(e,t){return this._read((n=>n.all(e,t)))}count(){return this._read((e=>e.count()))}equals(e,t,n){return this._read((r=>r.equals(e,t,n)))}anyOf(e,t,n){return this._read((r=>r.anyOf(e,t,n)))}startsWithAnyOf(e,t,n){return this._read((r=>r.startsWithAnyOf(e,t,n)))}greaterThan(e,t,n){return this._read((r=>r.greaterThan(e,t,n)))}lessThan(e,t,n){return this._read((r=>r.lessThan(e,t,n)))}between(e,t,n,r,i){return this._read((o=>o.between(e,t,n,r,i)))}forEachSortedBy(e,t){return this._read((n=>n.forEachSortedBy(e,t)))}forEach(e){return this._read((t=>t.forEach(e)))}clear(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._write((e=>e.clear()),e)}}},74529:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=r(n(89482)),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),(0,a.default)("AbstractPrimaryKey"!==this.constructor.name,"Cannot instantiate abstract class AbstractPrimaryKey"),Array.isArray(e)?this.columns=[...e]:this.columns=[e]}validate(e){(0,a.default)(0===e.columns.length,"Attempted to add primary key after other columns")}apply(){throw(0,o.default)("Subclass of `AbstractPrimaryKey` must implement `apply` method")}}t.default=s},66340:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.column=e}validate(e){const t=e.columns.find((e=>e.packedName===this.column));(0,a.default)(t,'Attempted to add index on non-existent column "%s" in "%s"',this.column,e.name),(0,a.default)(t&&(!t.primaryKey||t.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE),'Cannot add index on primary key on table "%s"',e.name),(0,a.default)(!e.indexes.some((e=>(e.type===o.INDEX_TYPE.ARRAY||e.type===o.INDEX_TYPE.SIMPLE||e.type===o.INDEX_TYPE.UNIQUE)&&(0,o.indexContainsColumn)(e,this.column))),'Attempted to add index "%s" which already exists in "%s"',this.column,e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.ARRAY,column:this.column}}}t.default=s},3780:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t,n){super(n),this.name=e,this.packedName=t}validate(e){(0,a.default)(!e.columns.find((e=>e.name===this.name)),'Attempted to add column "%s" to "%s" but it already exists',this.name,e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.columns.push({name:this.name,packedName:this.packedName}),t}}t.default=s},2627:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.columns=[...e]}validate(e){this.columns.forEach((t=>{(0,a.default)(e.columns.find((e=>e.packedName===t)),'Attempted to add index on non-existent column "%s" in "%s"',t,e.name)})),(0,a.default)(this.columns.length>1,"Attempted to add composite index for only 1 column"),(0,a.default)(-1===(0,o.findIndex)(e,this._getIndex()),'Attempted to add index [%s], which already exists in "%s"',String(this.columns),e.name);const t=e.columns.filter((e=>e.primaryKey&&e.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE)).map((e=>e.name));(0,a.default)(t.length!==this.columns.length||t.some((e=>!this.columns.includes(e))),'Attempted to add index [%s], which already is the primary key in "%s"',String(this.columns),e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.COMPOSITE,columns:this.columns}}}t.default=s},62908:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t,n,r){super(r),this.name=e,this.packedName=t,this.dataType=n}validate(e){(0,a.default)(!e.columns.find((e=>e.name===this.name)),'Attempted to add encrypted column "%s" to "%s" but it already exists',this.name,e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.columns.push({name:this.name,packedName:this.packedName}),t.encryptedColumns[this.name]=this.dataType,t}}t.default=s},70656:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.keyPath=e,this.column=e.split(".")[0]}validate(e){const t=e.columns.find((e=>e.packedName===this.column));(0,a.default)(t,'Attempted to add index on non-existent column "%s" in "%s"',this.column,e.name),(0,a.default)(t&&(!t.primaryKey||t.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE),'Cannot add index on primary key on table "%s"',e.name),(0,a.default)(!e.indexes.some((e=>(e.type===o.INDEX_TYPE.ARRAY||e.type===o.INDEX_TYPE.SIMPLE||e.type===o.INDEX_TYPE.UNIQUE)&&(0,o.indexContainsColumn)(e,this.column))),'Attempted to add index "%s" which already exists in "%s"',this.column,e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.SIMPLE,column:this.keyPath}}}t.default=s},25609:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.column=e}validate(e){const t=e.columns.find((e=>e.packedName===this.column));(0,a.default)(t,'Attempted to add index on non-existent column "%s" in "%s"',this.column,e.name),(0,a.default)(t&&(!t.primaryKey||t.primaryKey===o.PRIMARY_KEY_TYPE.COMPOSITE),'Cannot add index on primary key on table "%s"',e.name),(0,a.default)(!e.indexes.some((e=>(e.type===o.INDEX_TYPE.ARRAY||e.type===o.INDEX_TYPE.SIMPLE||e.type===o.INDEX_TYPE.UNIQUE)&&(0,o.indexContainsColumn)(e,this.column))),'Attempted to add index "%s" which already exists in "%s"',this.column,e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}_getIndex(){return{type:o.INDEX_TYPE.UNIQUE,column:this.column}}}t.default=s},26473:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(74529)),o=n(8065),a=r(n(41143));class s extends i.default{validate(e){super.validate(e),(0,a.default)(this.columns&&1===this.columns.length,"Attempted to add UserDefinedPrimaryKey over wrong number of columns")}apply(e){const t=(0,o.cloneSchema)(e);return t.columns.unshift({name:this.columns[0].name,packedName:this.columns[0].packedName,primaryKey:o.PRIMARY_KEY_TYPE.AUTO_INCREMENT}),t}}t.default=s},24305:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(74529)),o=n(8065),a=r(n(41143));class s extends i.default{validate(e){super.validate(e),(0,a.default)(this.columns&&this.columns.length>1,"Attempted to add composite primary key for only 1 column")}apply(e){const t=(0,o.cloneSchema)(e);return this.columns.forEach((e=>{t.columns.push({name:e.name,packedName:e.packedName,primaryKey:o.PRIMARY_KEY_TYPE.COMPOSITE})})),t}}t.default=s},43270:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(89482)),o=r(n(41143));t.default=class{constructor(e){(0,o.default)(!0===(null==e?void 0:e.intentionallyUsePrivateConstructor),"Please use only WAWebStorageMutationBuilder.js to create mutations"),(0,o.default)("Mutation"!==this.constructor.name,"Cannot instantiate abstract class Mutation")}validate(){throw(0,i.default)("Subclasses of Mutation must implement `validate`")}apply(){throw(0,i.default)("Subclasses of Mutation must implement `apply`")}}},65717:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.columnBuilder=function(e,t){const n={intentionallyUsePrivateConstructor:!0};if((null==e?void 0:e.packColumns)&&null==t)throw(0,m.default)("[storage-config-error] packing columns enabled, but packing data does not exist");const r=(null==e?void 0:e.packColumns)&&t?t:{},E=e=>null!=r[e]?y(r[e]):e;return{addColumn:e=>new o.default(e,E(e),n),addEncryptedColumn:(e,t)=>new s.default(e,E(e),t,n),addUserDefinedPrimaryKey:e=>new A.default({name:e,packedName:E(e)},n),addAutoIncrementingPrimaryKey:e=>new c.default({name:e,packedName:E(e)},n),addCompositePrimaryKey:e=>new d.default(e.map((e=>({name:e,packedName:E(e)}))),n),addIndex:e=>{const t=e.split(".")[0];return new l.default(E(t),n)},addArrayIndex:e=>new i.default(E(e),n),addCompositeIndex:e=>new a.default(e.map((e=>E(e))),n),addUniqueIndex:e=>new u.default(E(e),n),removeColumn:e=>new f.default(e,n),removeIndex:e=>new g.default(E(e),n),removeUniqueIndex:e=>new h.default(E(e),n),removeArrayIndex:e=>new p.default(E(e),n),removeCompositeIndex:e=>new _.default(e.map((e=>E(e))),n)}},t.memoize=E;var i=r(n(66340)),o=r(n(3780)),a=r(n(2627)),s=r(n(62908)),l=r(n(70656)),u=r(n(25609)),c=r(n(26473)),d=r(n(24305)),p=r(n(88230)),f=r(n(5408)),_=r(n(95376)),g=r(n(38094)),h=r(n(72286)),A=r(n(66494)),m=r(n(89482));function E(e){const t={};return n=>{if(t[n])return t[n];const r=e.apply(null,[n]);return t[n]=r,r}}const y=E((function(e){let t=e;const n=[];for(;t>0;){t--;const e=t%26;n.push(String.fromCharCode("a".charCodeAt(0)+e)),t=Math.floor(t/26)}return n.reverse(),n.join("")}))},65589:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sortMutations=function(e){return e.toSorted(y)};var i=r(n(66340)),o=r(n(3780)),a=r(n(2627)),s=r(n(62908)),l=r(n(70656)),u=r(n(25609)),c=r(n(26473)),d=r(n(24305)),p=r(n(88230)),f=r(n(5408)),_=r(n(95376)),g=r(n(38094)),h=r(n(72286)),A=r(n(66494)),m=r(n(41143));const E=[_.default,p.default,h.default,g.default,f.default,c.default,A.default,d.default,o.default,l.default,i.default,a.default,u.default,s.default];function y(e,t){const n=E.indexOf(e.constructor),r=E.indexOf(t.constructor);return(0,m.default)(-1!==n,"Mutation %s is not a known mutation type",e.constructor.name),(0,m.default)(-1!==r,"Mutation %s is not a known mutation type",t.constructor.name),n-r}},88230:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.column=e}validate(e){(0,a.default)(-1!==(0,o.findIndex)(e,this._getIndex()),'Attempted to remove non-existent index "%s" on "%s"',this.column,e.name)}apply(e){const t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.ARRAY,column:this.column}}}t.default=s},5408:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.name=e}validate(e){const t=e.columns.find((e=>e.name===this.name));(0,a.default)(t,'Attempted to remove column "%s" from "%s" but it does not exist',this.name,e.name),(0,a.default)(!t.primaryKey,'Attempted to remove primary key column "%s". Removing primary keys is not supported.',this.name),(0,a.default)(!e.indexes.some((e=>(0,o.indexContainsColumn)(e,this.name))),'Attempted to remove column "%s" from "%s" but an index exists with the column',this.name,e.name)}apply(e){const t=(0,o.cloneSchema)(e);return t.columns.splice(t.columns.findIndex((e=>e.name===this.name)),1),t}}t.default=s},95376:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.columns=e.toSorted()}validate(e){(0,a.default)(-1!==(0,o.findIndex)(e,this._getIndex()),'Attempted to remove non-existent index [%s] on "%s"',String(this.columns),e.name)}apply(e){const t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.COMPOSITE,columns:this.columns}}}t.default=s},38094:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.column=e}validate(e){(0,a.default)(-1!==(0,o.findIndex)(e,this._getIndex()),'Attempted to remove non-existent index "%s" on "%s"',this.column,e.name)}apply(e){const t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.SIMPLE,column:this.column}}}t.default=s},72286:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43270)),o=n(8065),a=r(n(41143));class s extends i.default{constructor(e,t){super(t),this.column=e}validate(e){(0,a.default)(-1!==(0,o.findIndex)(e,this._getIndex()),'Attempted to remove non-existent index "%s" on "%s"',this.column,e.name)}apply(e){const t=(0,o.cloneSchema)(e),n=(0,o.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}_getIndex(){return{type:o.INDEX_TYPE.UNIQUE,column:this.column}}}t.default=s},66494:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(74529)),o=n(8065),a=r(n(41143));class s extends i.default{validate(e){super.validate(e),(0,a.default)(this.columns&&1===this.columns.length,"Attempted to add UserDefinedPrimaryKey over wrong number of columns")}apply(e){const t=(0,o.cloneSchema)(e);return t.columns.unshift({name:this.columns[0].name,packedName:this.columns[0].packedName,primaryKey:o.PRIMARY_KEY_TYPE.USER_DEFINED}),t}}t.default=s},7787:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.versionToRollout=t.initialize=void 0;var i=r(n(51463)),o=n(69724);t.versionToRollout=2;const a=(0,i.default)((()=>(0,o.getStorage)().initialize()));t.initialize=a},69724:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=d,t.destroyStorage=function(){return p.apply(this,arguments)},t.getStorage=function(){return(0,l.default)(null!=c,"[lru-media-storage-idb] Storage should be created first before being accessed"),c};var i=r(n(48926)),o=r(n(96801)),a=n(21820),s=r(n(89482)),l=r(n(41143));const u="lru-media-storage-idb";t.DATABASE_NAME=u;let c=null;function d(){const e=new o.default(u);c=new a.Storage(e)}function p(){return(p=(0,i.default)((function*(){if(null==c)throw(0,s.default)("[lru-media-storage-idb] Storage should be created first before being destroyed");try{yield c.purge()}finally{c=null}}))).apply(this,arguments)}d()},13447:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0});var i={initialize:!0};t.initialize=function(){return l.apply(this,arguments)};var o=r(n(48926)),a=n(54204);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=n(17657);function l(){return(l=(0,o.default)((function*(e){yield(0,a.initializeWithoutGKs)(e),yield s.userPrefsIdb.init()}))).apply(this,arguments)}},54204:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearInitializePromise=function(){Oe=null},t.destroy=function(){return(0,c.destroyStorage)().catch((()=>(0,l.dexieCastToPromise)(new o.default(c.DATABASE_NAME).delete()))).finally((()=>{Oe=null}))},t.initializeWithoutGKs=function(){return Re.apply(this,arguments)};var i=r(n(48926)),o=r(n(46808)),a=n(76415),s=n(57874),l=n(49363),u=n(70243),c=n(74557),d=n(11333),p=n(6431),f=n(90157),_=n(33888),g=n(41894),h=n(45781),A=n(17431),m=n(99698),E=n(22962),y=n(18638),S=n(19990),v=n(94007),I=n(69616),T=n(48198),b=n(39618),M=n(93769),P=n(44629),C=n(93813),O=n(18759),R=n(85710),N=n(6366),w=n(60072),D=n(97659),L=n(96591),B=n(35872),k=n(96637),G=n(12186),U=n(59566),x=n(71229),F=n(84566),K=n(61568),Y=n(70128),j=n(592),V=n(21392),W=n(10139),H=n(77979),Q=n(24377),$=n(73482),q=n(45232),J=n(9800),z=n(76481),X=n(53181),Z=n(38815),ee=n(8238),te=n(89405),ne=n(82068),re=n(59075),ie=n(95553),oe=n(30051),ae=n(23440),se=n(23228),le=n(8409),ue=n(9920),ce=n(46618),de=n(10144),pe=n(90213),fe=n(69386),_e=n(24936),ge=n(72428),he=n(32392),Ae=n(43987),me=n(43222),Ee=n(47780),ye=n(50792),Se=n(62792),ve=n(87597),Ie=n(9419),Te=n(52554),be=n(31304),Me=n(67589),Pe=n(99801),Ce=n(71164);let Oe;function Re(){return(Re=(0,i.default)((function*(e){if(null==Oe){yield(0,s.loadSchemaVersions)();const t=yield(0,Ce.columnPackingEnabled)(!!(null==e?void 0:e.canPackColumns));(0,c.createStorage)({packColumns:t}),(0,_.addTable)(),(0,g.addTable)(),(0,h.addTable)(),(0,A.addTable)(),(0,m.addTable)(),(0,E.addTable)(),(0,S.addTable)(),(0,v.addTable)(),(0,I.addTable)(),(0,T.addTable)(),(0,b.addTable)(),(0,M.addTable)(),(0,C.addTable)(),(0,O.addTable)(),(0,R.addTable)(),(0,N.addTable)(),(0,w.addTable)(),(0,D.addTable)(),(0,L.addTable)(),(0,B.addTable)(),(0,k.addTable)(),(0,G.addTable)(),(0,F.addTable)(),(0,x.addTable)(),(0,Y.addTable)(),(0,j.addTable)(),(0,K.addTable)(),(0,W.addTable)(),(0,H.addTable)(),(0,q.addTable)(),(0,Q.addTable)(),(0,ne.addTable)(),(0,re.addTable)(),(0,ie.addTable)(),(0,oe.addTable)(),(0,ae.addTable)(),(0,se.addTable)(),(0,le.addTable)(),(0,ue.addTable)(),(0,p.addTable)(),(0,ce.addTable)(),(0,de.addTable)(),(0,fe.addTable)(),(0,_e.addTable)(),(0,ge.addTable)(),(0,ye.addTable)(),(0,Se.addTable)(),(0,Ie.addTable)(),(0,Te.addTable)(),(0,be.addTable)(),(0,Me.addTable)(),(0,Pe.addTable)(),(0,$.addTable)(),(0,V.addTable)(),(0,ee.addTable)(),(0,P.addTable)(),(0,d.addTable)(),(0,U.addTable)(),(0,J.addTable)(),(0,f.addTable)(),(0,pe.addTable)(),(0,me.addTable)(),(0,Z.addTable)(),(0,Ae.addTable)(),(0,Ee.addTable)(),(0,ve.addTable)(),(0,a.addTable)(),(0,y.addTable)(),(0,z.addTable)(),(0,X.addTable)(),(0,he.addTable)(),(0,u.addTable)(),(0,te.addTable)(),Oe=(0,c.getStorage)().initialize().catch((e=>{throw __LOG__(4,!0,new Error,!0,["sad"])`Assertion failed!`,SEND_LOGS("Failed to initialize model storage",1,"sad"),e}))}return Oe}))).apply(this,arguments)}},74557:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(e){const t=new a.default(c,{packColumns:e.packColumns});d=new s.Storage(t,e)},t.destroyStorage=function(){if(null==d)return Promise.reject((0,l.default)("[model-storage] Storage should be created first before being destroyed"));return d.purge().then((()=>{d=null})).catch((e=>{throw d=null,e}))},t.getStorage=function(){return(0,u.default)(null!=d,"[model-storage] Storage should be created first before being accessed"),d},t.storageExists=function(){return(0,o.dexieCastToPromise)(i.default.exists(c))};var i=r(n(46808)),o=n(49363),a=r(n(96801)),s=n(21820),l=r(n(89482)),u=r(n(41143));const c="model-storage";t.DATABASE_NAME=c;let d=null},20746:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abpropEventSamplingConfigCreateTable=function(){return(0,r.getStorage)().versions.version(149)},t.abpropsConfigCreateTable=function(){return(0,r.getStorage)().versions.version(19)},t.activeMessageRangesCreateTable=function(){return(0,r.getStorage)().versions.version(23)},t.addActionToPendingMutations=function(){return(0,r.getStorage)().versions.version(48)},t.addArchiveAtMentionViewedInDrawer=function(){return(0,r.getStorage)().versions.version(61)},t.addChatThreadLoggingTable=function(){return(0,r.getStorage)().versions.version(78)},t.addCommunityAdminPromotionColumns=function(){return(0,r.getStorage)().versions.version(88)},t.addEphemeralityIndexToChatTable=function(){return(0,r.getStorage)().versions.version(143)},t.addGroupFromKeyToGroupInviteV4=function(){return(0,r.getStorage)().versions.version(55)},t.addHasAccessedToAbpropsConfigTable=function(){return(0,r.getStorage)().versions.version(77)},t.addIncognitoGroupMetadataColumn=function(){return(0,r.getStorage)().versions.version(100)},t.addInitialHistBootstrapInlinePayloadColumn=function(){return(0,r.getStorage)().versions.version(118)},t.addPeerDataRequestChatIdColumn=function(){return(0,r.getStorage)().versions.version(124)},t.addPeerDataRequestSessionIdColumn=function(){return(0,r.getStorage)().versions.version(119)},t.addProcessedAndSyncTypeCompositeIndex=function(){return(0,r.getStorage)().versions.version(130)},t.addProgressColumn=function(){return(0,r.getStorage)().versions.version(128)},t.addReactionTableMsgKeyIndex=function(){return(0,r.getStorage)().versions.version(75)},t.addReactionTableOrphanIndex=function(){return(0,r.getStorage)().versions.version(71)},t.addRequiresDirectConnection=function(){return(0,r.getStorage)().versions.version(63)},t.addStaticURLToImageVideoMessages=function(){return(0,r.getStorage)().versions.version(60)},t.addStatusPSACampaignFields=function(){return(0,r.getStorage)().versions.version(65)},t.addSupportForHSMButtons=function(){return(0,r.getStorage)().versions.version(46)},t.addTcTokenSenderTimestampToChatTable=function(){return(0,r.getStorage)().versions.version(62)},t.addTcTokenTimestampToChatTable=function(){return(0,r.getStorage)().versions.version(57)},t.addTcTokenToChatTable=function(){return(0,r.getStorage)().versions.version(56)},t.addUnreadMentionCountToChatTable=function(){return(0,r.getStorage)().versions.version(51)},t.addUnreadMentionMetadataColumn=function(){return(0,r.getStorage)().versions.version(142)},t.addUnreadMentionToChatTable=function(){return(0,r.getStorage)().versions.version(44)},t.addWaveformToAudioMessages=function(){return(0,r.getStorage)().versions.version(50)},t.agentCreateTable=function(){return(0,r.getStorage)().versions.version(82)},t.blocklistCreateTable=function(){return(0,r.getStorage)().versions.version(4)},t.botProfileCreateTable=function(){return(0,r.getStorage)().versions.version(125)},t.businessProfileCreateTable=function(){return(0,r.getStorage)().versions.version(135)},t.cartCreateTable=function(){return(0,r.getStorage)().versions.version(25)},t.chatAddDisappearingModeInitiator=function(){return(0,r.getStorage)().versions.version(36)},t.chatAssignmentCreateTable=function(){return(0,r.getStorage)().versions.version(103)},t.chatCreateTable=function(){return(0,r.getStorage)().versions.version(6)},t.collectionVersionCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.commentCreateTable=function(){return(0,r.getStorage)().versions.version(134)},t.contactAddDisappearingModeProperties=function(){return(0,r.getStorage)().versions.version(35)},t.contactAddHash=function(){return(0,r.getStorage)().versions.version(105)},t.contactAddIsContactSyncCompleted=function(){return(0,r.getStorage)().versions.version(28)},t.contactAddLidProperties=function(){return(0,r.getStorage)().versions.version(109)},t.contactCreateTable=function(){return(0,r.getStorage)().versions.version(3)},t.contactTextStatus=function(){return(0,r.getStorage)().versions.version(138)},t.ctwaSuggestionsAddTrackingData=function(){return(0,r.getStorage)().versions.version(113)},t.ctwaSuggestionsCreateTable=function(){return(0,r.getStorage)().versions.version(112)},t.deviceListAddDelete=function(){return(0,r.getStorage)().versions.version(41)},t.deviceListAddV2Fields=function(){return(0,r.getStorage)().versions.version(59)},t.deviceListCreateTable=function(){return(0,r.getStorage)().versions.version(11)},t.directConnectionKeysAddPostcodeColumns=function(){return(0,r.getStorage)().versions.version(84)},t.directConnectionKeysCreateTable=function(){return(0,r.getStorage)().versions.version(70)},t.encryptHistorySyncDirectPath=function(){return(0,r.getStorage)().versions.version(42)},t.encryptHistorySyncFilehash=function(){return(0,r.getStorage)().versions.version(45)},t.encryptedMutationsCreateTable=function(){return(0,r.getStorage)().versions.version(15)},t.errorCodeColumn=function(){return(0,r.getStorage)().versions.version(116)},t.eventResponsesAddMsgKeyIndex=function(){return(0,r.getStorage)().versions.version(146)},t.eventsResponsesCreateTable=function(){return(0,r.getStorage)().versions.version(145)},t.favoriteCreateTable=function(){return(0,r.getStorage)().versions.version(147)},t.favoriteStickersCreateTable=function(){return(0,r.getStorage)().versions.version(73)},t.ftsIndexingQueueCreateTable=function(){return(0,r.getStorage)().versions.version(24)},t.groupInviteV4CreateTable=function(){return(0,r.getStorage)().versions.version(39)},t.groupMetadataAddParentIndex=function(){return(0,r.getStorage)().versions.version(110)},t.groupMetadataCreateTable=function(){return(0,r.getStorage)().versions.version(20)},t.historySyncNotificationsCreateTable=function(){return(0,r.getStorage)().versions.version(14)},t.inAppBannerCreateTable=function(){return(0,r.getStorage)().versions.version(115)},t.inactiveReceiptCreateTable=function(){return(0,r.getStorage)().versions.version(12)},t.labelAssociationCreateTable=function(){return(0,r.getStorage)().versions.version(17)},t.labelCreateTable=function(){return(0,r.getStorage)().versions.version(16)},t.lastUpdateTimestampColumn=function(){return(0,r.getStorage)().versions.version(126)},t.lidChatStateCreateTable=function(){return(0,r.getStorage)().versions.version(102)},t.lidDisplayNameMappingCreateTable=function(){return(0,r.getStorage)().versions.version(94)},t.lidPnMappingCreateTable=function(){return(0,r.getStorage)().versions.version(90)},t.lidPnMappingRemoveDisplayName=function(){return(0,r.getStorage)().versions.version(95)},t.membershipApprovalRequestCreateTable=function(){return(0,r.getStorage)().versions.version(101)},t.messageAddActionLink=function(){return(0,r.getStorage)().versions.version(72)},t.messageAddDisappearingModeInitiator=function(){return(0,r.getStorage)().versions.version(37)},t.messageAddEditIndex=function(){return(0,r.getStorage)().versions.version(133)},t.messageAddGroupInviteV4=function(){return(0,r.getStorage)().versions.version(38)},t.messageAddHeaderType=function(){return(0,r.getStorage)().versions.version(74)},t.messageAddInteractiveMessageFields=function(){return(0,r.getStorage)().versions.version(69)},t.messageAddIsCarouselIndex=function(){return(0,r.getStorage)().versions.version(141)},t.messageAddIsSendFailureProperties=function(){return(0,r.getStorage)().versions.version(27)},t.messageAddNativeFlowNameField=function(){return(0,r.getStorage)().versions.version(54)},t.messageAddPaymentBackground=function(){return(0,r.getStorage)().versions.version(68)},t.messageAddPaymentInviteServiceType=function(){return(0,r.getStorage)().versions.version(64)},t.messageAddPaymentRequestNFMFields=function(){return(0,r.getStorage)().versions.version(49)},t.messageAddPaymentTxnStatus=function(){return(0,r.getStorage)().versions.version(29)},t.messageAddPollInvalidated=function(){return(0,r.getStorage)().versions.version(98)},t.messageAddPrivacyModeFields=function(){return(0,r.getStorage)().versions.version(32)},t.messageAddProductListPreviewHeaderImage=function(){return(0,r.getStorage)().versions.version(34)},t.messageAddProductListPreviewInfo=function(){return(0,r.getStorage)().versions.version(30)},t.messageAddRcat=function(){return(0,r.getStorage)().versions.version(111)},t.messageCreateTable=function(){return(0,r.getStorage)().versions.version(7)},t.messageHistoryCreateTable=function(){return(0,r.getStorage)().versions.version(106)},t.messageInfoAddDeliveryPrivacyMode=function(){return(0,r.getStorage)().versions.version(33)},t.messageInfoCreateTable=function(){return(0,r.getStorage)().versions.version(8)},t.messageOrphansAddColumns=function(){return(0,r.getStorage)().versions.version(97)},t.messageOrphansCreateTable=function(){return(0,r.getStorage)().versions.version(92)},t.messageRemovePaymentRequestHeaderField=function(){return(0,r.getStorage)().versions.version(52)},t.messageStatusPSAReadTimestamp=function(){return(0,r.getStorage)().versions.version(76)},t.migrateSubgroupsArray=function(){return(0,r.getStorage)().versions.version(80)},t.missingKeysCreateTable=function(){return(0,r.getStorage)().versions.version(26)},t.newsletterMetadataCreateTable=function(){return(0,r.getStorage)().versions.version(117)},t.newsletterMyVotesCreateTable=function(){return(0,r.getStorage)().versions.version(136)},t.newsletterPollsVotesCreateTable=function(){return(0,r.getStorage)().versions.version(137)},t.newsletterReactionsCreateTable=function(){return(0,r.getStorage)().versions.version(123)},t.nonMessageDataRequestCreateTable=function(){return(0,r.getStorage)().versions.version(107)},t.noteCreateTable=function(){return(0,r.getStorage)().versions.version(148)},t.orphanPaymentNotificationCreateTable=function(){return(0,r.getStorage)().versions.version(40)},t.orphanReceiptCreateTable=function(){return(0,r.getStorage)().versions.version(10)},t.orphanRevokeCreateTable=function(){return(0,r.getStorage)().versions.version(47)},t.orphanTcTokenCreateTable=function(){return(0,r.getStorage)().versions.version(89)},t.paidMessagingCampaignIdColumn=function(){return(0,r.getStorage)().versions.version(127)},t.participantCreateTable=function(){return(0,r.getStorage)().versions.version(9)},t.paymentBackgroundsCreateTable=function(){return(0,r.getStorage)().versions.version(79)},t.peerMessageCreateTable=function(){return(0,r.getStorage)().versions.version(43)},t.pendingMutationsCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.pinInChatCreateTable=function(){return(0,r.getStorage)().versions.version(114)},t.pollVotesAddMsgKeyIndex=function(){return(0,r.getStorage)().versions.version(104)},t.pollVotesCreateTable=function(){return(0,r.getStorage)().versions.version(91)},t.premiumMessageCreateTable=function(){return(0,r.getStorage)().versions.version(120)},t.privacyDisallowedListAddDhashField=function(){return(0,r.getStorage)().versions.version(67)},t.privacyDisallowedListCreateTable=function(){return(0,r.getStorage)().versions.version(58)},t.profilePicThumbCreateTable=function(){return(0,r.getStorage)().versions.version(5)},t.quickPromotionsCreateTable=function(){return(0,r.getStorage)().versions.version(121)},t.quickReplyCreateTable=function(){return(0,r.getStorage)().versions.version(18)},t.reactionsCreateTable=function(){return(0,r.getStorage)().versions.version(66)},t.recentStickersCreateTable=function(){return(0,r.getStorage)().versions.version(53)},t.removeCommunityAdminPromotionColumns=function(){return(0,r.getStorage)().versions.version(99)},t.removeSpamColumnsInGroupMetadata=function(){return(0,r.getStorage)().versions.version(87)},t.removeUnjoinedSubgroups=function(){return(0,r.getStorage)().versions.version(83)},t.removeUnreadMentionMetadataColumn=function(){return(0,r.getStorage)().versions.version(144)},t.renameCommunityAdminPromotionColumns=function(){return(0,r.getStorage)().versions.version(96)},t.reportingTokenTable=function(){return(0,r.getStorage)().versions.version(139)},t.reportingTokenTableTsIndex=function(){return(0,r.getStorage)().versions.version(140)},t.selfMessageTypeCreateTable=function(){return(0,r.getStorage)().versions.version(129)},t.subgroupSuggestionCreateTable=function(){return(0,r.getStorage)().versions.version(122)},t.subgroupSuggestionV2CreateTable=function(){return(0,r.getStorage)().versions.version(131)},t.subscriptionCreateTable=function(){return(0,r.getStorage)().versions.version(85)},t.syncActionsCreateTable=function(){return(0,r.getStorage)().versions.version(2)},t.syncKeysCreateTable=function(){return(0,r.getStorage)().versions.version(21)},t.syncdLogsCreateTable=function(){return(0,r.getStorage)().versions.version(132)},t.tasksScheduledTimeCreateTable=function(){return(0,r.getStorage)().versions.version(22)},t.unjoinedSubgroupMetadataCreateTable=function(){return(0,r.getStorage)().versions.version(81)},t.unjoinedSubgroupParentGroupIndex=function(){return(0,r.getStorage)().versions.version(86)},t.userPrefsCreateTable=function(){return(0,r.getStorage)().versions.version(93)},t.verifiedBusinessNameAddPrivacyMode=function(){return(0,r.getStorage)().versions.version(31)},t.verifiedBusinessNameAddSmbColumn=function(){return(0,r.getStorage)().versions.version(108)},t.verifiedBusinessNameCreateTable=function(){return(0,r.getStorage)().versions.version(13)},t.versionToRollout=void 0;var r=n(74557);t.versionToRollout=148},70130:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getABPropConfigs=function(){return(0,s.initializeWithoutGKs)().then((()=>(0,u.getAbpropConfigsTable)().all().then((e=>e))))},t.getConfigValue=function(e){const t=o.ABPropConfigs[e];if(null==t)return __LOG__(4,!0,new Error,!0)`invalid ABProps config name`,SEND_LOGS("invalid ABProps config name: "+e),Promise.reject((0,c.default)("invalid ABProps config name"));const[n,r,i,a]=t,l=i;return(0,s.initializeWithoutGKs)().then((()=>(0,u.getAbpropConfigsTable)().get(String(n)).then((e=>e?d(e.configValue,r,l):l))))},t.parseConfigValue=d,t.setConfigAccessed=function(e){return(0,l.getStorage)().lock(["abpropConfigs"],function(){var t=(0,i.default)((function*(t){let[n]=t;const r=yield n.get(String(e));null!=r&&!0!==(null==r?void 0:r.hasAccessed)&&(yield n.merge(String(e),{hasAccessed:!0}))}));return function(){return t.apply(this,arguments)}}())},t.updateABPropConfigs=function(e){return(0,l.getStorage)().lock(["abpropConfigs"],function(){var t=(0,i.default)((function*(t){let[n]=t;const r=yield n.all(),i=new Map;r.forEach((e=>{null==e.configExpoKey&&null==e.overriddenConfigValue||i.set(e.configCode,{configCode:e.configCode,configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:e.overriddenConfigValue})}));let o=!1;const s=[];e.forEach(((e,t)=>{let n=!1;const r=i.get(String(t));if(r){const i=r.configExpoKey;null!=i&&e.configExpoKey!==i?(a.exposureKeys.delete(i),o=!0,a.accessedConfigs.delete(t)):null!=i&&(n=r.hasAccessed)}s.push({configCode:String(t),configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:n,overriddenConfigValue:null==r?void 0:r.overriddenConfigValue})})),o&&(0,a.updateGlobalExpoKey)(),yield n.clear(),yield n.bulkCreate(s)}));return function(){return t.apply(this,arguments)}}())};var i=r(n(48926)),o=n(9282),a=n(11956),s=n(54204),l=n(74557),u=n(33888),c=r(n(89482));function d(e,t,n){return null==e||null==t?n:"bool"===t?"1"===e||"True"===e||"true"===e:"int"===t?parseInt(e,10):"float"===t?parseFloat(e):e}},23032:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventSamplingConfigs=function(){return(0,r.initializeWithoutGKs)().then((()=>(0,o.getAbpropEventSamplingConfigsTable)().all().then((e=>e))))},t.getEventSamplingWeight=function(e){return(0,r.initializeWithoutGKs)().then((()=>(0,o.getAbpropEventSamplingConfigsTable)().get(e).then((e=>null==e?void 0:e.samplingWeight))))},t.updateEventSamplingConfigs=function(e){if(null==e||0===e.length)return Promise.resolve(!1);const t=[];return e.forEach((e=>{t.push({eventCode:e.eventCode,samplingWeight:e.samplingWeight})})),(0,i.getStorage)().lock(["abprop-event-sampling-configs"],(e=>{let[n]=e;return n.clear().then((()=>n.bulkCreate(t).then((()=>!0))))}))};var r=n(54204),i=n(74557),o=n(41894)},4339:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t._cache=void 0,t.addActiveMessageRange=function(){return g.apply(this,arguments)},t.bulkUpdateActiveMessageRanges=function(e){return f.bulkCreateOrReplaceRanges(e)},t.getActiveMessageRanges=function(e){return f.getRangesForChat(e)},t.getActiveRangeAction=function(e,t){switch(e){case"archive":return u.ActiveRangeAction.Archive;case"markChatAsRead":return u.ActiveRangeAction.MarkChatAsRead;case"clearChat":return(null==t?void 0:t.deleteStarred)&&t.deleteMedia?u.ActiveRangeAction.ClearChatDeleteStarredDeleteMedia:(null==t?void 0:t.deleteStarred)&&!t.deleteMedia?u.ActiveRangeAction.ClearChatDeleteStarredKeepMedia:(null==t?void 0:t.deleteMedia)&&!t.deleteStarred?u.ActiveRangeAction.ClearChatKeepStarredDeleteMedia:u.ActiveRangeAction.ClearChatKeepStarredKeepMedia;case"deleteChat":return(null==t?void 0:t.deleteMedia)?u.ActiveRangeAction.DeleteChatDeleteMedia:u.ActiveRangeAction.DeleteChatKeepMedia;default:throw(0,d.default)("unsupported active message range action")}},t.removeActiveMessageRange=function(e,t){return f.removeRange(e,t)};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(91205),l=n(87946),u=n(45781),c=n(33655),d=r(n(89482));let p=new Map;const f={reset:()=>{p=new Map},removeRange(e,t){var n;return null===(n=p.get(e))||void 0===n||n.delete(t),(0,u.getActiveMessageRangesTable)().remove([e,t])},createOrReplaceRange(e){let t=p.get(e.chatId);return null==t&&(t=new Map,p.set(e.chatId,t)),t.set(e.action,e),(0,u.getActiveMessageRangesTable)().createOrReplace(e)},bulkCreateOrReplaceRanges:e=>(e.forEach((e=>{let t=p.get(e.chatId);null==t&&(t=new Map,p.set(e.chatId,t)),t.set(e.action,e)})),(0,u.getActiveMessageRangesTable)().bulkCreateOrReplace(e)),getRangesForChat:e=>(0,o.default)((function*(){let t=p.get(e);try{if(null==t){const n=yield(0,u.getActiveMessageRangesTable)().anyOf(["chatId"],[e]);t=new Map(n.map((e=>[e.action,e]))),p.set(e,t)}}catch(e){__LOG__(4,void 0,new Error)`getRangesForChat failed with error: ${e}`}return t?Array.from(t.values()):[]}))()};function _(e,t){switch(e){case u.ActiveRangeAction.Archive:return{action:u.ActiveRangeAction.Archive,actionValue:(0,a.default)(t.archiveChatAction,"syncActionValue.archiveChatAction")};case u.ActiveRangeAction.MarkChatAsRead:return{action:u.ActiveRangeAction.MarkChatAsRead,actionValue:(0,a.default)(t.markChatAsReadAction,"syncActionValue.markChatAsReadAction")};case u.ActiveRangeAction.ClearChatKeepStarredKeepMedia:return{action:u.ActiveRangeAction.ClearChatKeepStarredKeepMedia,actionValue:(0,a.default)(t.clearChatAction,"syncActionValue.clearChatAction")};case u.ActiveRangeAction.ClearChatKeepStarredDeleteMedia:return{action:u.ActiveRangeAction.ClearChatKeepStarredDeleteMedia,actionValue:(0,a.default)(t.clearChatAction,"syncActionValue.clearChatAction")};case u.ActiveRangeAction.ClearChatDeleteStarredKeepMedia:return{action:u.ActiveRangeAction.ClearChatDeleteStarredKeepMedia,actionValue:(0,a.default)(t.clearChatAction,"syncActionValue.clearChatAction")};case u.ActiveRangeAction.ClearChatDeleteStarredDeleteMedia:return{action:u.ActiveRangeAction.ClearChatDeleteStarredDeleteMedia,actionValue:(0,a.default)(t.clearChatAction,"syncActionValue.clearChatAction")};case u.ActiveRangeAction.DeleteChatDeleteMedia:return{action:u.ActiveRangeAction.DeleteChatDeleteMedia,actionValue:(0,a.default)(t.deleteChatAction,"syncActionValue.deleteChatAction")};case u.ActiveRangeAction.DeleteChatKeepMedia:return{action:u.ActiveRangeAction.DeleteChatKeepMedia,actionValue:(0,a.default)(t.deleteChatAction,"syncActionValue.deleteChatAction")};default:throw(0,d.default)(`unsupported action for message ranges: ${String(e)}`)}}function g(){return(g=(0,o.default)((function*(e,t,n){var r;const o=(0,c.decodeProtobuf)(s.SyncActionValueSpec,n),{actionValue:a}=_(t,o),u=(null===(r=a.messageRange)||void 0===r?void 0:r.messages)||[],d=yield(0,l.filterReceivedMessagesInRange)(e,u),p=Math.max(0,u.length-d.length);return f.createOrReplaceRange((0,i.default)((0,i.default)({chatId:e},_(t,o)),{},{remainingMessages:p}))}))).apply(this,arguments)}t._cache=f},4945:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.businessProfileFromDbRow=p,t.businessProfileToDbRow=f,t.createOrMergeBusinessProfileRecord=function(){return d.apply(this,arguments)},t.getBusinessProfileRecord=function(){return c.apply(this,arguments)},t.getBusinessProfileRow=l;var i=r(n(48926)),o=n(42467),a=n(18638),s=n(51017);function l(){return u.apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e){return(0,a.getBusinessProfileTable)().get(e)}))).apply(this,arguments)}function c(){return(c=(0,i.default)((function*(e){const t=yield l(e);return t?p(t):null}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){const t=f(e);yield(0,a.getBusinessProfileTable)().createOrMerge(t.id,t)}))).apply(this,arguments)}function p(e){const{commandsDescription:t}=e,n=(0,s.createWid)(e.id),r=o.BizBotAutomatedType.cast(e.automatedType),i=o.BotWelcomeMsgProtocolModeType.cast(e.welcomeMsgProtocolMode);let a,l;if(null!=e.prompts)try{a=JSON.parse(e.prompts),Array.isArray(a)||(a=null,__LOG__(4,void 0,new Error,!0)`businessProfileFromDbRow: prompts are not an array`,SEND_LOGS("businessProfileFromDbRow: prompts are not an array"))}catch(e){__LOG__(4,void 0,new Error,!0)`businessProfileFromDbRow: prompts parsing failed`,SEND_LOGS("businessProfileFromDbRow: prompts parsing failed")}if(null!=e.commands)try{l=JSON.parse(e.commands),Array.isArray(l)||(l=null,__LOG__(4,void 0,new Error,!0)`businessProfileFromDbRow: commands are not an array`,SEND_LOGS("businessProfileFromDbRow: commands are not an array"))}catch(e){__LOG__(4,void 0,new Error,!0)`businessProfileFromDbRow: commands parsing failed`,SEND_LOGS("businessProfileFromDbRow: commands parsing failed")}return{id:n,automatedType:r,welcomeMsgProtocolMode:i,prompts:a,commands:l,commandsDescription:t}}function f(e){const{commandsDescription:t}=e,n=e.id.toString();let r,i;e.automatedType&&(r=e.automatedType),e.welcomeMsgProtocolMode&&(i=e.welcomeMsgProtocolMode);return{id:n,automatedType:r,welcomeMsgProtocolMode:i,prompts:e.prompts?JSON.stringify(e.prompts):void 0,commandsDescription:t,commands:e.commands?JSON.stringify(e.commands):void 0}}},93040:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CreateChatDuplicateError=void 0,t._getActiveChatWid=L,t.addUnreadMentionChat=function(e,t){return(0,h.getStorage)().lock(["chat"],function(){var n=(0,o.default)((function*(n){let[r]=n;const i=Array.from(e.keys());if(0===i.length)return;const o=yield(0,y.getChatTable)().bulkGet(i);if(!o||0===o.length)return void __LOG__(4,void 0,new Error)`addUnreadMentionChat: could not find chats`;const a=[];return o.forEach((n=>{if(n){var r;const o=n.id.toString();let s=null!==(r=n.unreadMentionsOfMe)&&void 0!==r?r:[];const l=e.get(o);l&&(s=s.concat(l));let u={id:o,unreadMentionsOfMe:s};if(t){var i;u={id:o,unreadMentionsOfMe:s,unreadMentionCount:null!==(i=t.get(o))&&void 0!==i?i:0}}a.push(u)}})),(0,y.getChatTable)().bulkCreateOrMerge(a)}));return function(){return n.apply(this,arguments)}}())},t.bulkGetChats=D,t.bulkUpdateChatLastAddOnPreview=function(e){const t=Array.from(e).map((e=>{let[t,n]=e;return{id:t,chatlistPreview:n,lastReactionPreview:void 0}}));return(0,y.getChatTable)().bulkCreateOrMerge(t)},t.bulkUpdateChatLastTimestamp=function(e){const t=Array.from(e).map((e=>{let[t,n]=e;return{id:t.toString(),t:n}}));return(0,y.getChatTable)().bulkCreateOrMerge(t)},t.clearMatChatCache=function(){M.clear()},t.createChatRecord=function(){return C.apply(this,arguments)},t.getAllChatsDeserialized=function(){return(0,y.getChatTable)().all().then((e=>e.map((e=>(0,f.deserializeChat)(e)))))},t.getChatMeta=function(){return O.apply(this,arguments)},t.getChatRecord=w,t.getMatChat=k,t.getMatChatBulk=function(){return G.apply(this,arguments)},t.getMatChatIncomingMessage=function(e){return k(e)},t.markMessageAndChatAsRead=function(e,t,n){return(0,h.getStorage)().lock(["message","chat"],function(){var r=(0,o.default)((function*(r){let[i,o]=r;const s=yield R(t),u=[];let f=0;const _=[];s.forEach((t=>{if(t.hsmTag===d.HSM_TAG_TYPE.AUTHENTICATION&&(0,c.frontendFireAndForget)("logOTPMessageReadActions",{msgRow:t}),null==e||null!=t.rowId&&t.rowId>e){if(f++,(0,A.getIsImportantMessage)(t)){const e={id:t.id,timestamp:t.t};_.push(e)}}else u.push({id:t.id,ack:Math.max(t.ack,l.ACK.READ),pendingReadReceipt:null})}));const g=0===f&&n?-1:f,h=[o.merge(t,{id:t,unreadCount:g,unreadDividerOffset:0,unreadMentionsOfMe:_,unreadMentionCount:0})];u.length>0&&h.push((0,S.getMessageTable)().bulkCreateOrMerge(u).then((()=>(0,p.handleActivitiesForChatThreadLogging)([{activityType:"msgRead",ts:(0,a.unixTime)(),chatId:(0,T.createWid)(t),readCount:u.length}])))),yield Promise.all(h)}));return function(){return r.apply(this,arguments)}}())},t.matChatCache=void 0,t.populateMatCacheBulk=function(e){e.filter((e=>I.default.isUser(e.id)&&!e.isDeprecated)).map((e=>{const t=(0,T.createWid)(e.id);t.isLid()&&null!=M.get(t.toString())||M.set(t.toString(),Promise.resolve(t));const n=(0,u.getAlternateUserWid)(t);null==n||!n.isLid()&&null!=M.get(n.toString())||M.set(n.toString(),Promise.resolve(t))}))},t.pruneExpiredOrphanTcTokens=function(){const e=(0,v.tokenExpirationCutoff)(v.TcTokenMode.Receiver),t=[];return(0,h.getStorage)().lock(["orphan-tc-token"],function(){var n=(0,o.default)((function*(n){let[r]=n;return(yield r.all()).forEach((n=>{const r=n.tcTokenTimestamp;null!=r&&r<e&&t.push(n.chatId)})),r.bulkRemove(t)}));return function(){return n.apply(this,arguments)}}())},t.pruneExpiredTcTokens=function(){const e=(0,v.tokenExpirationCutoff)(v.TcTokenMode.Receiver);return(0,h.getStorage)().lock(["chat"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=yield n.lessThan(["tcTokenTimestamp"],e);if(!r||0===r.length)return;const i=r.map((e=>({id:e.id,tcToken:null,tcTokenTimestamp:null})));return n.bulkCreateOrMerge(i)}));return function(){return t.apply(this,arguments)}}())},t.queryPendingReadReceiptMsgRows=R,t.reduceChatUnreadCount=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,h.getStorage)().lock(["chat"],function(){var r=(0,o.default)((function*(r){var i;let[o]=r;const a=yield o.get(e);if(null==a)return void __LOG__(4,void 0,new Error)`reduceChatUnreadCount: could not find chat with id ${e}`;const s=Math.max(a.unreadCount-t,0);let l=null!==(i=a.unreadDividerOffset)&&void 0!==i?i:0;return n&&(l+=t),o.merge(e,{unreadCount:s,unreadDividerOffset:l})}));return function(){return r.apply(this,arguments)}}())},t.removeMatChatMapping=x,t.removeUnreadMentionChat=function(e){return(0,h.getStorage)().lock(["chat"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=Array.from(e.keys());if(0===r.length)return;const i=yield(0,y.getChatTable)().bulkGet(r);if(!i||0===i.length)return void __LOG__(4,void 0,new Error)`removeUnreadMentionChat: could not find chats`;const o=[];return i.forEach((t=>{if(t){var n;let r=null!==(n=t.unreadMentionsOfMe)&&void 0!==n?n:[];const i=e.get(t.id.toString());i&&(r=r.filter((e=>!i.includes(e.id)))),o.push({id:t.id.toString(),unreadMentionsOfMe:r})}})),(0,y.getChatTable)().bulkCreateOrMerge(o)}));return function(){return t.apply(this,arguments)}}())},t.updateChatArchiveDrawer=function(e){return(0,h.getStorage)().lock(["chat"],(t=>{let[n]=t;const r=Array.from(e.keys());if(0===r.length)return Promise.resolve();const i=r.map((t=>{var n;return{id:t,archiveAtMentionViewedInDrawer:null!==(n=e.get(t))&&void 0!==n&&n}}));return n.bulkCreateOrMerge(i)}))},t.updateChatForMarkAsReadSync=function(e){return(0,h.getStorage)().lock(["chat"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=yield n.get(e);if(null!=r)return-1===r.unreadCount?n.createOrMerge(e,{id:e,unreadCount:0,unreadMentionsOfMe:[],unreadMentionCount:0}):void 0;__LOG__(4,void 0,new Error)`updateMarkChatAsReadSync: could not find chat with id ${e}`}));return function(){return t.apply(this,arguments)}}())},t.updateDeprecatedChatMatCache=function(e,t){t?x(e):U(e)},t.updateMatCache=U;var i=r(n(81109)),o=r(n(48926)),a=n(29987),s=r(n(46808)),l=n(77630),u=n(42247),c=n(1619),d=n(14200),p=n(42083),f=n(86854),_=n(87946),g=n(91329),h=n(74557),A=n(26368),m=n(73602),E=n(463),y=n(94007),S=n(10139),v=n(28612),I=r(n(27112)),T=n(51017),b=r(n(89482));const M=new Map;t.matChatCache=M;class P extends Error{constructor(){super(...arguments),this.name="CreateChatDuplicateError"}}function C(){return(C=(0,o.default)((function*(e,t){try{yield(0,y.getChatTable)().create((0,i.default)({id:e.toString()},t))}catch(e){if(e instanceof g.DbOnLogoutAbort)throw e;if(__LOG__(4,!0,new Error)`createChatRecord: update chat table failed`,e instanceof s.default.ConstraintError)throw new P;throw(0,b.default)("update chat table failed")}(0,E.isMatFullyEnabled)()&&e.isUser()&&U(e)}))).apply(this,arguments)}function O(){return(O=(0,o.default)((function*(e){const t=yield(0,y.getChatTable)().get(e.toString(),!1);return t?{unreadCount:t.unreadCount,timestamp:t.t}:Promise.reject((0,b.default)("Failed to find row in chat table with id:"+e.toString()))}))).apply(this,arguments)}function R(){return N.apply(this,arguments)}function N(){return(N=(0,o.default)((function*(e){return(yield(0,S.getMessageTable)().equals(["from","pendingReadReceipt"],[e,_.PendingReadReceiptType.Message],{shouldDecrypt:!1})).filter((e=>e.type!==m.MSG_TYPE.UNKNOWN))}))).apply(this,arguments)}function w(e){return(0,y.getChatTable)().get(e.toString(),!1)}function D(e){return(0,y.getChatTable)().bulkGet(e.map((e=>e.toString())))}function L(){return B.apply(this,arguments)}function B(){return(B=(0,o.default)((function*(e){if(!e.isLid()){if(null!=(yield w(e)))return e;const t=(0,u.getCurrentLid)(e);if(null!=t){if(null!=(yield w(t)))return t}return e}const t=yield w(e);if(null!=t&&!t.isDeprecated)return e;const n=(0,u.getPhoneNumber)(e);if(null!=n){if(yield w(n))return n}return e}))).apply(this,arguments)}function k(e){const t=M.get(e.toString());if(null!=t)return t;const n=L(e);return M.set(e.toString(),n),n}function G(){return(G=(0,o.default)((function*(e){const t=[],n=e.filter((e=>e.isUser()));n.map((e=>{null==M.get(e.toString())&&t.push(e)}));const r=(0,u.getAlternateWidBulk)(t);if(Array.from(r.keys()).map((e=>t.push((0,T.createWidFromWidLike)(e)))),t.length>0){(yield D(t)).forEach((e=>{if(null!=e){var t;const n=null!==(t=r.get(e.id.toString()))&&void 0!==t?t:e.id.toString();(null==e?void 0:e.isDeprecated)||M.has(n.toString())||M.set(n.toString(),Promise.resolve((0,T.createWidFromWidLike)(e.id)))}}))}const i=new Map;return n.map(function(){var e=(0,o.default)((function*(e){const t=yield M.get(e.toString());null!=t?i.set(e,t):i.set(e,e)}));return function(){return e.apply(this,arguments)}}()),i}))).apply(this,arguments)}function U(e){M.set(e.toString(),Promise.resolve(e));const t=(0,u.getAlternateUserWid)(e);null!=t&&M.set(t.toString(),Promise.resolve(e))}function x(e){const t=(0,u.getAlternateUserWid)(e);null!=t&&M.delete(t.toString()),M.delete(e.toString())}t.CreateChatDuplicateError=P},94598:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateChatEvents=function(e){return p.enqueue((0,i.default)((function*(){const t=(yield(0,u.getChatThreadLoggingPendingEventsTable)().bulkGet(e.map((e=>{let{chatId:t,startTs:n}=e;return[t,n]})))).map(((t,n)=>{const r=e[n],i=function(e,t,n){if(null==n)return(0,o.default)({chatId:e,startTs:t},d);return s.FLAG_FIELD_NAMES.forEach((e=>{null==n[e]&&(n[e]=d[e])})),l.COUNT_FIELD_NAMES.forEach((e=>{null==n[e]&&(n[e]=d[e])})),Object.keys(c).forEach((e=>{null==n[e]&&(n[e]=d[e])})),n}(r.chatId,r.startTs,t);return l.COUNT_FIELD_NAMES.forEach((e=>{i[e]+=r[e]})),s.FLAG_FIELD_NAMES.forEach((e=>{i[e]=r[e]})),i.msgsSent+=r.addMsgsSent,i.msgsReceived+=r.addMsgsReceived,i.msgsRead+=r.addMsgsRead,i.viewOnceMsgsSent+=r.addViewOnceMsgsSent,i.viewOnceMsgsReceived+=r.addViewOnceMsgsReceived,i.viewOnceMessagesOpened+=r.addViewOnceMsgsOpened,i.callOffersSent+=r.addCallOffersSent,i.callOffersReceived+=r.addCallOffersReceived,i.totalCallDuration+=r.addTotalCallDuration,i.commerceMsgsSent+=r.addCommerceMsgsSent,i.commerceMsgsReceived+=r.addCommerceMsgsReceived,i.pdpInquiriesSent+=r.addPdpInquiriesSent,i.reactionsSent+=r.addReactionsSent,i.reactionsReceived+=r.addReactionsReceived,i.forwardMessagesSent+=r.addForwardMessagesSent,i.forwardMessagesReceived+=r.addForwardMessagesReceived,i.editedMsgsSent+=r.addEditedMsgsSent,i.botMessagesSent+=r.addBotMessagesSent,i.botMessagesReceived+=r.addBotMessagesReceived,i.botMessagesEdited+=r.addBotMessagesEdited,i}));return(0,u.getChatThreadLoggingPendingEventsTable)().bulkCreateOrReplace(t)})))},t.deleteBeforeInclusive=function(){return f.apply(this,arguments)},t.getBeforeInclusive=function(e){return(0,u.getChatThreadLoggingPendingEventsTable)().lessThan(["startTs"],e,{inclusive:!0})},t.getChatEvent=function(e,t){return(0,u.getChatThreadLoggingPendingEventsTable)().get([e,t])};var i=r(n(48926)),o=r(n(81109)),a=n(39528),s=n(39026),l=n(71050),u=n(48198);const c=Object.freeze({msgsSent:0,msgsReceived:0,msgsRead:0,viewOnceMsgsSent:0,viewOnceMsgsReceived:0,viewOnceMessagesOpened:0,callOffersSent:0,callOffersReceived:0,totalCallDuration:0,commerceMsgsSent:0,commerceMsgsReceived:0,pdpInquiriesSent:0,reactionsSent:0,reactionsReceived:0,forwardMessagesSent:0,forwardMessagesReceived:0,editedMsgsSent:0,botMessagesSent:0,botMessagesReceived:0,botMessagesEdited:0}),d=Object.freeze((0,o.default)((0,o.default)((0,o.default)({},l.COUNT_FIELDS),s.FLAG_FIELDS),c)),p=new a.PromiseQueue;function f(){return(f=(0,i.default)((function*(e){return yield(0,u.getChatThreadLoggingPendingEventsTable)().bulkDeleteRange(["startTs"],0,e+1)}))).apply(this,arguments)}},97183:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkCreateOrReplaceDeviceRecord=function(){return E.apply(this,arguments)},t.bulkGetDeviceRecord=h,t.createOrReplaceDeviceRecord=function(){return m.apply(this,arguments)},t.doesDeviceHashMatch=function(){return T.apply(this,arguments)},t.getAllDeviceLists=function(){return(0,c.getDeviceListTable)().all()},t.getDeviceIds=y,t.getDeviceInfoForSync=function(){return I.apply(this,arguments)},t.getDeviceRecord=g,t.getMyDeviceList=function(){return b.apply(this,arguments)},t.hasDevice=function(){return v.apply(this,arguments)};var i=r(n(48926)),o=r(n(94654)),a=n(44037),s=n(83946),l=(n(42247),n(53098)),u=n(30304),c=n(93813),d=n(3885),p=n(51017),f=r(n(89482));const _=new s.LruCache({sizeLimit:5e3,getSize:()=>1});function g(e){var t;const n=(0,l.createDeviceListPK)(e);if(!_.has(n)){const e=(0,c.getDeviceListTable)().get(n);_.put(n,e)}return null!==(t=_.get(n))&&void 0!==t?t:Promise.resolve(null)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){const t=[];if(e.forEach((e=>{_.has((0,l.createDeviceListPK)(e))||t.push((0,l.createDeviceListPK)(e))})),t.length>0){(yield(0,c.getDeviceListTable)().bulkGet(t)).forEach(((e,n)=>{_.put(t[n],Promise.resolve(e))}))}return Promise.all(e.map((e=>_.get((0,l.createDeviceListPK)(e)))))}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){yield(0,c.getDeviceListTable)().createOrReplace(e),_.put(e.id,Promise.resolve(e))}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){yield(0,c.getDeviceListTable)().bulkCreateOrReplace(e),e.forEach((e=>{_.put(e.id,Promise.resolve(e))}))}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){return(yield h(e)).map((e=>{if(e&&!e.deleted){const t=e.devices.map((e=>({id:e.id,isHosted:e.isHosted})));return{id:e.id,devices:t}}return null}))}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e,t){if(t===a.DEFAULT_DEVICE_ID)return!0;const[n]=yield y([e]);return!!n&&!!n.devices.some((e=>e.id===t))}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){return(yield h(e)).map((e=>{if(e&&!e.deleted){const t=e.devices.map((e=>({id:e.id,isHosted:e.isHosted})));return{id:e.id,devices:t,timestamp:e.timestamp,expectedTs:e.expectedTs}}return null}))}))).apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e,t){if(null==t)return!0;const n=(yield y([e])).map((e=>null==e?[]:e.devices.map((t=>(0,p.createDeviceWidFromDeviceListPk)(e.id,t.id,t.isHosted))))),r=(0,o.default)(n,(e=>e));return(yield(0,u.phashV2)(r))!==t}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(){const e=(0,d.assertGetMe)(),t=yield g(e);if(!t||t.deleted)throw(0,f.default)("syncd: cannot find my device list");return t}))).apply(this,arguments)}},63439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceUpdateLock=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=["participant","device-list"];t&&(a=[...a,"message"]);n&&(a=[...a,"missing-keys"]);(0,r.bizHostedDevicesEnabled)()&&o&&(a=[...a,"contact"]);return(0,i.getStorage)().lock(a,(()=>e()))};var r=n(41404),i=n(74557)},18625:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPendingParticipants=function(e){var t;const n=null===(t=(0,l.getMaybeMeUser)())||void 0===t?void 0:t.toString();return(0,s.getGroupInviteV4Table)().equals(["from","groupId"],[n,e.toString()]).then((e=>e.filter((e=>!e.expired&&(0,a.unixTime)()<=e.expiration)))).then((e=>e.map((e=>e.to))))},t.persistGroupInviteV4Msg=function(e,t){return(0,s.getGroupInviteV4Table)().createOrMerge(e,t)},t.persistGroupInviteV4Msgs=function(e){return(0,s.getGroupInviteV4Table)().bulkCreateOrMerge(e)},t.revokeGroupInvites=function(){return u.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(29987),s=n(96591),l=n(3885);function u(){return(u=(0,o.default)((function*(e,t,n,r){const o=yield(0,s.getGroupInviteV4Table)().equals(["from","to","groupId"],[e,t,n]).then((e=>e.filter((e=>!e.expired&&e.expiration<=r))));return(0,s.getGroupInviteV4Table)().bulkCreateOrReplace(o.map((e=>(0,i.default)((0,i.default)({},e),{},{expired:!0})))),o}))).apply(this,arguments)}},35678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hydrateWids=function e(t){if(Array.isArray(t))return t.map(((t,n)=>e((0,i.widReviver)(n,t,r.isWidlike,r.createWidFromWidLike))));if(t&&"object"==typeof t){const n=Object.keys(t);for(let o=0;o<n.length;o++){const a=n[o];t[a]=e((0,i.widReviver)(a,t[a],r.isWidlike,r.createWidFromWidLike))}return t}return t};var r=n(51017),i=n(29853)},60585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMembershipApprovalRequests=t.removeAllMembershipApprovalRequests=t.getMembershipApprovalRequests=t.addMembershipApprovalRequests=void 0;var r=n(21392),i=n(51017);t.getMembershipApprovalRequests=e=>(0,r.getMembershipApprovalRequestTable)().equals(["groupId"],e.toString()).then((e=>e.map((e=>{let{id:t,t:n,addedBy:r,requestMethod:o,parentGroupId:a}=e;return{id:(0,i.createWid)(t),t:n,addedBy:(0,i.createWid)(r),requestMethod:o,parentGroupId:null!=a?(0,i.createWid)(a):void 0}}))));t.addMembershipApprovalRequests=(e,t)=>{const n=t.map((t=>{let{id:n,t:r,addedBy:i,requestMethod:o,parentGroupId:a}=t;return{groupId:e.toString(),id:n.toString(),t:r,addedBy:i.toString(),requestMethod:o,parentGroupId:null==a?void 0:a.toString()}}));return(0,r.getMembershipApprovalRequestTable)().bulkCreateOrReplace(n)};t.removeMembershipApprovalRequests=(e,t)=>{const n=e.toString();return(0,r.getMembershipApprovalRequestTable)().bulkRemove(t.map((e=>[n,e.toString()])))};t.removeAllMembershipApprovalRequests=e=>(0,r.getMembershipApprovalRequestTable)().bulkRemoveByIndex(["groupId"],[e.toString()])},89055:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RetryEligibilityResult=void 0,t.createOrMergeReceiptRecords=function(e){const t=new Map;return e.forEach((e=>{var n;const{msgKey:r,receiverId:i}=e,o=(0,_.toUserWid)(i).toString(),s=r.toString(),l=`${s},${o}`,u=null!==(n=i.device)&&void 0!==n?n:a.DEFAULT_DEVICE_ID,c=t.get(l);c?c.deviceNotDelivered.push(u):t.set(l,{msgKey:s,receiverUserJid:o,deviceDelivered:[],deviceNotDelivered:[u]})})),(0,l.getStorage)().lock(["message-info"],function(){var e=(0,o.default)((function*(e){let[n]=e;const r=Array.from(t.values()).map((e=>[e.msgKey,e.receiverUserJid]));return(yield n.anyOf(["msgKey","receiverUserJid"],r)).forEach((e=>{const n=`${e.msgKey},${e.receiverUserJid}`,r=t.get(n);r&&t.set(n,(0,i.default)((0,i.default)({},e),{},{deviceNotDelivered:[...e.deviceNotDelivered,...r.deviceNotDelivered]}))})),(0,d.getMessageInfoTable)().bulkCreateOrReplace(Array.from(t.values()))}));return function(){return e.apply(this,arguments)}}())},t.getHighestMsgAcks=function(){return I.apply(this,arguments)},t.isRetryEligible=function(e,t,n,r){const i=(0,_.toUserWid)(t).toString(),o=t.device||0;return(0,d.getMessageInfoTable)().get([e.toString(),i]).then((s=>s?s.deviceNotDelivered.includes(o)?null!=n&&r>=n?A.ELIGIBLE:null!=t.device&&t.device!==a.DEFAULT_DEVICE_ID?(__LOG__(2)`MessageInfoStore: ${e.toString()}, ${i}:${o}: companion identity changed`,A.INELIGIBLE_CHANGED_IDENTITY):null!=s.delivery?(__LOG__(2)`MessageInfoStore: ${e.toString()}, ${i}:${o}: primary identity change after message has been delivered`,A.INELIGIBLE_CHANGED_IDENTITY):A.ELIGIBLE:(__LOG__(2)`MessageInfoStore: ${e.toString()}, ${i}:${o} has been delivered`,A.INELIGIBLE_ALREADY_DELIVERED):(__LOG__(2)`MessageInfoStore: missing record for ${e.toString()}, ${i}`,A.INELIGIBLE_RECORD_MISSING)))},t.queryMsgInfo=function(){return m.apply(this,arguments)},t.queryMsgInfos=E;var i=r(n(81109)),o=r(n(48926)),a=n(44037),s=n(77630),l=n(74557),u=r(n(60001)),c=n(10139),d=n(24377),p=n(3885),f=r(n(27112)),_=n(51017),g=r(n(89482));const h=[s.ACK_STRING.PLAYED,s.ACK_STRING.READ,s.ACK_STRING.DELIVERY],A=Object.freeze({ELIGIBLE:"ELGIBLE",INELIGIBLE_RECORD_MISSING:"INELIGIBLE_RECORD_MISSING",INELIGIBLE_ALREADY_DELIVERED:"INELIGIBLE_ALREADY_DELIVERED",INELIGIBLE_NOT_MD:"INELIGIBLE_NOT_MD",INELIGIBLE_CHANGED_IDENTITY:"INELIGIBLE_CHANGED_IDENTITY"});function m(){return(m=(0,o.default)((function*(e){const t=(yield E([e])).get(e.toString());if(!t)throw(0,g.default)(`No message info found for ${e.toString()}`);return t}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e){const t=yield(0,c.getMessageTable)().bulkGet(e.map((e=>e.toString()))),n=new Map,r=new Map;for(let a=0;a<e.length;a++){var i,o;const s=e[a].toString(),l=null!==(i=null===(o=t[a])||void 0===o?void 0:o.latestEditMsgKey)&&void 0!==i?i:s;r.set(l,s);const u=t[a]?t[a].count:null;n.set(l,{messageInfoRecords:[],ackReceiver:u})}(yield(0,d.getMessageInfoTable)().anyOf(["msgKey"],Array.from(n.keys()))).forEach((e=>{var t;null===(t=n.get(e.msgKey))||void 0===t||t.messageInfoRecords.push(e)}));const a=S(n),s=new Map;for(const[e,t]of a){const n=r.get(e);null!=n&&s.set(n,t)}return s}))).apply(this,arguments)}function S(e){const t=new Map;for(const[n,r]of e.entries()){const{ackReceiver:e,messageInfoRecords:i}=r;let o=0;const a={delivery:[],deliveryRemaining:0,played:[],playedRemaining:0,read:[],readRemaining:0};let s=!1;i.forEach((e=>{const t=(0,_.createWid)(e.receiverUserJid);if(!(0,p.getMeUser)().equals(t)){v(e);for(let r=0;r<h.length;r++){const i=h[r],o=e[i];if(null!=o){a[i].push({id:t,t:o});const e=f.default.isGroup(u.default.fromString(n).remote);if(e&&"read"===i&&(null==t?void 0:t.isBot())&&(s=!0),e)break}}null!=e.delivery&&null!=e.deliveryPrivacyMode&&(a.deliveryPrivacyMode=e.deliveryPrivacyMode),o+=1}}));let l=null!=e&&0!==e?e:o;s&&l++,__LOG__(2)`queryMsgInfo: targetedMsgInfoKey: ${n}, ack count: ${e}, receiver: ${l},
played: ${a.played.length}, read: ${a.read.length}, delivery: ${a.delivery.length}`,a.playedRemaining=l-a.played.length,a.readRemaining=a.playedRemaining-a.read.length,a.deliveryRemaining=a.readRemaining-a.delivery.length,t.set(n,a)}return t}function v(e){const t=e.read;null!=t&&(null==e.delivery||e.delivery>t)&&(e.delivery=t)}function I(){return(I=(0,o.default)((function*(e){const t=new Map,n=yield E(e);for(const r of e){const e=n.get(r.toString());if(null==e)continue;let i;0===e.playedRemaining&&e.played.length>0?i=s.ACK.PLAYED:0===e.readRemaining&&e.read.length>0?i=s.ACK.READ:0===e.deliveryRemaining&&e.delivery.length>0&&(i=s.ACK.RECEIVED),null!=i&&t.set(r.toString(),i)}return t}))).apply(this,arguments)}t.RetryEligibilityResult=A},5266:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateOrphanReceipt=function(e,t,n){return(0,r.getStorage)().lock(["orphan-receipt"],(r=>{let[i]=r;return i.bulkGet(n).then((r=>{const o=n.reduce(((n,i,o)=>{let a=r[o];null==a&&(a={msgKey:i});const s=a[e];return(null==s||s>t)&&(a[e]=t,n.push(a)),n}),[]);return i.bulkCreateOrReplace(o)}))}))},t.getOrphanReceipt=function(e){return(0,i.getOrphanReceiptTable)().get(e)},t.removeOrphanReceipt=function(e){return(0,i.getOrphanReceiptTable)().remove(e)};var r=n(74557),i=n(59075)},31654:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addOrphanRevokes=function(e){return f.bulkCreateOrReplaceOrphanRevokes(e)},t.applyOrphanRevokes=function(){return _.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(26368),s=n(73602),l=n(95553),u=r(n(27112)),c=n(51017);let d=new Map,p=!1;const f={reset:()=>{d=new Map,p=!1},bulkRemoveOrphans:e=>(e.forEach((e=>{d.delete(e.msgKey)})),(0,l.getOrphanRevokeTable)().bulkRemove(e.map((e=>e.msgKey)))),bulkCreateOrReplaceOrphanRevokes:e=>(e.forEach((e=>{d.has(e.msgKey)&&d.delete(e.msgKey),d.set(e.msgKey,e)})),(0,l.getOrphanRevokeTable)().bulkCreateOrReplace(e)),getAllOrphanRevokes:()=>(0,i.default)((function*(){if(!p){const e=yield(0,l.getOrphanRevokeTable)().all();d=new Map(e.map((e=>[e.msgKey,e]))),p=!0}return d}))()};function _(){return(_=(0,i.default)((function*(e){const t=yield f.getAllOrphanRevokes(),n=[],r=[];return e.forEach((e=>{const i=e.id.toString();if(t.has(i)){const d=(0,o.default)(t.get(i),"orphanRevokesCache.get(messageId)");var l;if(__LOG__(2)`applyOrphanRevokes: found orphan revoke for message ${e.id.toString()}`,!u.default.isStatusV3(e.id.remote))r.push({id:e.id,to:e.to,author:e.author,revokeSender:(0,c.createWidFromWidLike)(null!==(l=d.sender)&&void 0!==l?l:(0,a.getSender)(e)),type:s.MSG_TYPE.REVOKED,kind:s.MsgKind.RevokedMessage,subtype:"admin_revoke"===d.subtype?"admin":"sender",protocolMessageKey:e.id,from:e.from,t:e.t,broadcast:e.broadcast});n.push(d)}else r.push(e)})),f.bulkRemoveOrphans(n),r}))).apply(this,arguments)}},87010:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateOrphanTcToken=function(e,t){return(0,o.getOrphanTcTokenTable)().createOrMerge(e,(0,i.default)({chatId:e},t))},t.getOrphanTcToken=function(e){return(0,o.getOrphanTcTokenTable)().get(e)},t.removeOrphanTcToken=function(e){return(0,o.getOrphanTcTokenTable)().remove(e)};var i=r(n(81109)),o=n(30051)},64002:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupUnSyncedError=void 0,t.clearAdminshipCache=function(e){null!=e?S.delete(e):S.clear()},t.getGroupSenderKeyList=function(){return g.apply(this,arguments)},t.getGroupSenderKeyListFromParticipantRecord=h,t.injectPastParticipantsFromDB=function(){return y.apply(this,arguments)},t.isCurrentUserGroupAdmin=function(){return v.apply(this,arguments)},t.markForgetSenderKey=function(e,t){const n=e.toString();return(0,u.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[r]=e;const i=yield r.get(n);i?yield r.createOrReplace(m(i,t,!1)):__LOG__(2)`markForgetSenderKey: group participant info missing for group ${n}`}));return function(){return e.apply(this,arguments)}}())},t.markHasSenderKey=function(e,t){const n=e.toString();return(0,u.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[r]=e;const i=yield r.get(n);i?yield r.createOrReplace(m(i,t,!0)):__LOG__(2)`markHasSenderKey: group participant info missing for group ${n}`}));return function(){return e.apply(this,arguments)}}())},t.pruneExpiredPastParticipants=function(){return(0,u.getStorage)().lock(["participant"],function(){var e=(0,o.default)((function*(e){let[t]=e;const n=yield(0,c.getParticipantTable)().all(),r=[];return n.forEach((e=>{const t=e.pastParticipants.filter((e=>{const t=(0,a.castToUnixTime)(e.leaveTs);return(0,a.happenedWithin)(t,a.DAY_SECONDS*l.PAST_PARTICIPANT_EXPIRATION_DAYS)}));if(t.length!==e.pastParticipants.length){const n=(0,i.default)((0,i.default)({},e),{},{pastParticipants:t});r.push(n)}})),r.length,t.bulkCreateOrReplace(r)}));return function(){return e.apply(this,arguments)}}())},t.setAdminshipCache=function(e,t){S.set(e,t)};var i=r(n(81109)),o=r(n(48926)),a=n(29987),s=n(1619),l=n(8815),u=n(74557),c=n(23440),d=n(3885),p=n(98701),f=n(51017);class _ extends Error{constructor(){super(...arguments),this.name="GroupUnSyncedError"}}function g(){return(g=(0,o.default)((function*(e){const t=e.toString();return h(e,yield(0,c.getParticipantTable)().get(t))}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,o.default)((function*(e,t){const n=[],r=[];if(!t)return{skDistribList:n,skList:r,rotateKey:!1};const{senderKey:i,rotateKey:o}=t;return i.forEach(((e,t)=>{var o;const a=(0,f.createWid)(t),s=(0,f.toUserWid)(a),l=null!==(o=i.get(s.toString()))&&void 0!==o&&o;e&&l?r.push(a):(n.push(a),a.isCompanion()&&e&&!l&&(__LOG__(3)`getGroupSenderKeyList: include ${t} because its primary doesn't have sender key`))})),yield E(e,i.size),(0,p.cacheGroupMetrics)(t),o?{skDistribList:[...n,...r],skList:[],rotateKey:o}:{skDistribList:n,skList:r,rotateKey:o}}))).apply(this,arguments)}function m(e,t,n){const r=new Map(e.senderKey);let i=!1;return t.forEach((e=>{if((0,d.isMeDevice)(e))return;const t=String(e);r.has(t)?r.set(t,n):e.isLid()||(i=!0)})),{groupId:e.groupId,senderKey:r,participants:e.participants,pastParticipants:e.pastParticipants,admins:e.admins,rotateKey:i,deviceSyncComplete:e.deviceSyncComplete}}function E(e,t){return(0,s.frontendSendAndReceive)("updateCachedDeviceCount",{groupWid:e,deviceCount:t})}function y(){return(y=(0,o.default)((function*(e){const t=e.map((e=>e.id.toString())),n=yield(0,c.getParticipantTable)().bulkGet(t);return e.map(((e,t)=>{var r,o;return(0,i.default)((0,i.default)({},e),{},{pastParticipants:null===(r=n[t])||void 0===r||null===(o=r.pastParticipants)||void 0===o?void 0:o.map((e=>{let{jid:t,leaveTs:n,leaveReason:r}=e;return{id:(0,f.createWid)(t),leaveTs:n,leaveReason:r}}))})}))}))).apply(this,arguments)}t.GroupUnSyncedError=_;const S=new Map;function v(){return(v=(0,o.default)((function*(e){const t=S.get(e);if(null==t){var n;const t=yield(0,c.getParticipantTable)().get(e),r=!!t&&t.admins.includes(null===(n=(0,d.getMaybeMeUser)())||void 0===n?void 0:n.toString());return S.set(e,r),r}return t}))).apply(this,arguments)}},20797:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deletePeerMessage=function(e){const t=(0,a.getPeerMessageTable)(),n=new o.default({fromMe:!0,remote:(0,s.getMeUser)(),id:e});return t.remove(n.toString())},t.storePeerMessages=function(e){const t=e.map((e=>(0,i.default)((0,i.default)({},e),{},{id:String(e.id),to:String(e.to),subtype:String(e.subtype)})));(0,a.getPeerMessageTable)().bulkCreate(t)};var i=r(n(81109)),o=r(n(60001)),a=n(8409),s=n(3885)},7429:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeSubgroupSuggestions=t.removeAllSubgroupSuggestions=t.getSubgroupSuggestions=t.addSubgroupSuggestions=void 0,t.removeSubgroupSuggestionsWithOfflineOption=function(e){let{subgroupSuggestions:t,isOffline:n}=e;if(!0===n)return d({suggestionsRowKeys:t});return c(t)},t.updateOwnerInSubgroupSuggestions=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(66210),s=n(47780),l=n(51017);t.getSubgroupSuggestions=e=>(0,s.getSubgroupSuggestionTable)().equals(["parentGroupId"],e.toString()).then((e=>e.map((e=>{let{id:t,parentGroupId:n,subject:r,desc:i,owner:o,t:a,isExistingGroup:s,participantCount:u}=e;return{id:(0,l.createWid)(t),parentGroupId:(0,l.createWid)(n),subject:r,desc:i,owner:(0,l.createWid)(o),t:a,isExistingGroup:s,participantCount:u}}))));const u=(e,t)=>{const n=t.map((t=>{let{id:n,subject:r,desc:i,owner:o,t:a,isExistingGroup:s,participantCount:l}=t;return{id:n.toString(),parentGroupId:e.toString(),subject:r,desc:i,owner:o.toString(),t:a,isExistingGroup:s,participantCount:l}}));return(0,s.getSubgroupSuggestionTable)().bulkCreateOrReplace(n)};t.addSubgroupSuggestions=u;t.updateOwnerInSubgroupSuggestions=(e,t,n,r)=>function(){var a=(0,o.default)((function*(){const a=(yield Promise.all(t.map(function(){var t=(0,o.default)((function*(t){return yield(0,s.getSubgroupSuggestionTable)().get([e.toString(),t.toString(),n.toString()])}));return function(){return t.apply(this,arguments)}}()))).filter(Boolean),d=a.map((e=>(0,i.default)((0,i.default)({},e),{},{owner:r,parentGroupId:(0,l.createWid)(e.parentGroupId),id:(0,l.createWid)(e.id)})));yield c(a.map((t=>{let{id:r}=t;return{parentGroupId:e,id:(0,l.createWid)(r),owner:n}}))),yield u(e,d)}));return function(){return a.apply(this,arguments)}}()();const c=e=>(0,s.getSubgroupSuggestionTable)().bulkRemove(e.map((e=>{let{parentGroupId:t,id:n,owner:r}=e;return[t.toString(),n.toString(),r.toString()]})));t.removeSubgroupSuggestions=c;t.removeAllSubgroupSuggestions=e=>(0,s.getSubgroupSuggestionTable)().bulkRemoveByIndex(["parentGroupId"],[e.toString()]);const d=(0,a.batch)({delayMs:3e3},function(){var e=(0,o.default)((function*(e){const t=e.reduce(((e,t)=>(e.push(...t.suggestionsRowKeys),e)),[]);return yield c(t),[]}));return function(){return e.apply(this,arguments)}}())},13929:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTaskScheduledTime=function(e){return(0,i.getTasksScheduledTimeTable)().get(e).then((e=>null==e?void 0:e.time))},t.updateTaskScheduledTime=function(e,t){return(0,r.getStorage)().lock(["tasks-scheduled-time"],(n=>{let[r]=n;return r.createOrReplace({taskName:e,time:t})}))};var r=n(74557),i=n(52554)},80251:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUnjoinedSubgroups=function(){return d.apply(this,arguments)},t.removeUnjoinedSubgroupMetadataFromStorage=function(e){(0,s.getUnjoinedSubgroupMetadataTable)().remove(e.toString())},t.updateUnjoinedSubgroups=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=r(n(81109)),a=r(n(6479)),s=n(31304);const l=["defaultSubgroup","generalSubgroup","parentGroupId"];function u(e){const t={},{defaultSubgroup:n,generalSubgroup:r,parentGroupId:i}=e,s=(0,a.default)(e,l);return null!=n&&(t.defaultSubgroup=n),null!=r&&(t.generalSubgroup=r),null!=i&&(t.parentGroup=i.toString()),(0,o.default)((0,o.default)((0,o.default)({},s),t),{},{id:e.id.toString()})}function c(){return(c=(0,i.default)((function*(e){let{unjoinedSubgroups:t,parentGroupId:n,link:r}=e;if(!r)return void(yield(0,s.getUnjoinedSubgroupMetadataTable)().bulkRemove(t.map((e=>e.id.toString()))));let i=[];const a=yield(0,s.getUnjoinedSubgroupMetadataTable)().bulkGet(t.map((e=>e.id.toString())));i=t.map(((e,t)=>{const r=a[t];let i={subject:e.subject,subjectTime:e.subjectTime||0};if(r){const e=r.subjectTime||0;e>i.subjectTime&&(i={subject:r.subject,subjectTime:e})}return u((0,o.default)((0,o.default)((0,o.default)({},e),i),{},{parentGroupId:n}))})),yield(0,s.getUnjoinedSubgroupMetadataTable)().bulkCreateOrMerge(i)}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){let{unjoinedSubgroupIds:t,parentGroupId:n}=e;const r=(yield(0,s.getUnjoinedSubgroupMetadataTable)().equals(["parentGroup"],n.toString())).map((e=>e.id)),i=t.map((e=>e.toString())),o=r.filter((e=>!i.includes(e)));yield(0,s.getUnjoinedSubgroupMetadataTable)().bulkRemoveByIndex(["id"],o)}))).apply(this,arguments)}},27921:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateReplyCountInParentMsgs=function(){return a.apply(this,arguments)};var i=r(n(48926)),o=n(10139);function a(){return(a=(0,i.default)((function*(e,t){const n=[];for(const[i,o]of e){var r;const e=t.get(i);if(null==e)continue;const a=null!==(r=e.replyCount)&&void 0!==r?r:0;n.push({id:i,replyCount:a+o})}yield(0,o.getMessageTable)().bulkCreateOrMerge(n)}))).apply(this,arguments)}},70824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allUserPrefsIdb=function(){return(0,r.getUserPrefsTable)().all()},t.bulkCreateOrReplaceUserPrefs=function(e){return(0,r.getUserPrefsTable)().bulkCreateOrReplace(e)},t.clearUserPrefs=function(){return(0,r.getUserPrefsTable)().clear()},t.createOrReplaceUserPref=function(e){return(0,r.getUserPrefsTable)().createOrReplace(e)},t.getUserPref=function(e){return(0,r.getUserPrefsTable)().get(e)},t.removeUserPref=function(e){return(0,r.getUserPrefsTable)().remove(e)};var r=n(67589)},12166:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VerifiedBusinessNameUpdateType=void 0,t.convertPrivacyModeFromStorageType=p,t.createOrUpdateVerifiedBusinessName=function(){return c.apply(this,arguments)},t.getAllVerifiedNames=function(){return(0,s.getVerifiedBusinessNameTable)().all()},t.getPrivacyMode=function(){return d.apply(this,arguments)},t.getVerifiedBusinessNameRecord=u;var i=r(n(81109)),o=r(n(48926)),a=n(12987),s=n(99801);const l=n(76672).Mirrored(["Replace","Merge"]);function u(e){return(0,s.getVerifiedBusinessNameTable)().get(f(e))}function c(){return(c=(0,o.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.Replace;const r=(0,s.getVerifiedBusinessNameTable)(),o=f(e),a=(0,i.default)((0,i.default)({},t),{},{id:o});n===l.Replace?yield r.createOrReplace(a):yield r.createOrMerge(o,a)}))).apply(this,arguments)}function d(){return(d=(0,o.default)((function*(e){const t=yield u(e);return null==(null==t?void 0:t.privacyMode)?null:p(t.privacyMode)}))).apply(this,arguments)}function p(e){const t=a.ActualActorsEnumType.cast(e.actualActors),n=a.HostStorageEnumType.cast(e.hostStorage);return null==t||null==n?null:{actualActors:t,hostStorage:n,privacyModeTs:e.privacyModeTs}}function f(e){return e.isLid()?e.toString():e.user}t.VerifiedBusinessNameUpdateType=l},33888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("abpropConfigs").version((0,i.abpropsConfigCreateTable)(),[n("configCode"),t("configValue"),t("configExpoKey"),t("overriddenConfigValue")]).version((0,i.addHasAccessedToAbpropsConfigTable)(),[t("hasAccessed")]).view((e=>({configCode:e.configCode,configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:e.overriddenConfigValue})))},t.getAbpropConfigsTable=function(){return(0,r.getStorage)().table("abpropConfigs")};var r=n(74557),i=n(20746),o=n(65717)},41894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("abprop-event-sampling-configs").version((0,i.abpropEventSamplingConfigCreateTable)(),[n("eventCode"),t("samplingWeight")]).view((e=>e))},t.getAbpropEventSamplingConfigsTable=function(){return(0,r.getStorage)().table("abprop-event-sampling-configs")};var r=n(74557),i=n(20746),o=n(65717)},45781:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveRangeAction=void 0,t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("active-message-ranges").version((0,i.activeMessageRangesCreateTable)(),[n(["chatId","action"]),a("chatId"),t("actionValue"),t("remainingMessages")]).view((e=>e))},t.getActiveMessageRangesTable=function(){return(0,r.getStorage)().table("active-message-ranges")};var r=n(74557),i=n(20746),o=n(65717);const a=Object.freeze({Unknown:"unknown",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChatKeepStarredKeepMedia:"clearChat_0_0",ClearChatKeepStarredDeleteMedia:"clearChat_0_1",ClearChatDeleteStarredKeepMedia:"clearChat_1_0",ClearChatDeleteStarredDeleteMedia:"clearChat_1_1",DeleteChatDeleteMedia:"deleteChat_1",DeleteChatKeepMedia:"deleteChat_0"});t.ActiveRangeAction=a},17431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("agent").version((0,i.agentCreateTable)(),[n("id"),t("deviceId"),t("name"),t("isDeleted")]).view((e=>e))},t.getAgentTable=function(){return(0,r.getStorage)().table("agent")};var r=n(74557),i=n(20746),o=n(65717)},99698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addUserDefinedPrimaryKey:t}=(0,o.columnBuilder)(e.config);e.add("blocklist").version((0,i.blocklistCreateTable)(),[t("id")]).view((e=>({id:e.id})))},t.getBlocklistTable=function(){return(0,r.getStorage)().table("blocklist")};var r=n(74557),i=n(20746),o=n(65717)},18638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("business-profile").version((0,i.businessProfileCreateTable)(),[n("id"),t("commandsDescription"),t("commands"),t("prompts"),t("automatedType"),t("welcomeMsgProtocolMode")]).view((e=>e))},t.getBusinessProfileTable=function(){return(0,r.getStorage)().table("business-profile")};var r=n(74557),i=n(20746),o=n(65717)},19990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("cart").version((0,i.cartCreateTable)(),[n("id"),t("products"),t("message"),t("total"),t("currency"),t("itemCount")]).view((e=>e))},t.getCartTable=function(){return(0,r.getStorage)().table("cart")};var r=n(74557),i=n(20746),o=n(65717)},94007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addEncryptedColumn:n,addIndex:s,addUserDefinedPrimaryKey:l}=(0,o.columnBuilder)(e.config);e.add("chat").version((0,i.chatCreateTable)(),[l("id"),t("t"),t("unreadCount"),t("unreadDividerOffset"),t("archive"),t("isReadOnly"),t("isLocked"),t("isAnnounceGrpRestrict"),t("modifyTag"),t("muteExpiration"),t("isAutoMuted"),t("name"),t("notSpam"),t("pin"),t("changeNumberOldJid"),t("changeNumberNewJid"),t("ephemeralDuration"),t("ephemeralSettingTimestamp"),t("unreadMsgAnchorId"),t("endOfHistoryTransferType"),t("lastReactionPreview"),t("chatlistPreview"),t("isDeprecated"),t("unreadEditTimestampMs"),n("chatRowOpaqueData",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),t("ephemeralDisplayedExemptions"),t("disappearingModeTrigger"),t("disappearingModeInitiatedByMe"),t("hasOpened"),t("hasCreatedBotInvokeSystemMsg"),t("bizBotSystemMsgType"),t("lidOriginType"),t("hasRequestedWelcomeMsg")]).version((0,i.chatAddDisappearingModeInitiator)(),[t("disappearingModeInitiator")]).version((0,i.addUnreadMentionToChatTable)(),[t("unreadMentionsOfMe")]).version((0,i.addUnreadMentionCountToChatTable)(),[t("unreadMentionCount")]).version((0,i.addTcTokenToChatTable)(),[n("tcToken",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER)]).version((0,i.addTcTokenTimestampToChatTable)(),[t("tcTokenTimestamp"),s("tcTokenTimestamp")]).version((0,i.addArchiveAtMentionViewedInDrawer)(),[t("archiveAtMentionViewedInDrawer")]).version((0,i.addTcTokenSenderTimestampToChatTable)(),[t("tcTokenSenderTimestamp")]).version((0,i.addEphemeralityIndexToChatTable)(),[s("ephemeralDuration")]).view((e=>e))},t.getChatTable=function(){return(0,r.getStorage)().table("chat")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},69616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add(a).version((0,i.chatAssignmentCreateTable)(),[n("id"),t("chatId"),t("agentId"),t("chatOpenedByAgent")]).view((e=>e))},t.getChatAssignmentTable=function(){return(0,r.getStorage)().table(a)};var r=n(74557),i=n(20746),o=n(65717);const a="chat-assignment"},48198:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,o.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addIndex:u}=(0,s.columnBuilder)(e.config);e.add(l).version((0,a.addChatThreadLoggingTable)(),[n(["chatId","startTs"]),u("chatId"),u("startTs"),t("msgsSent"),t("msgsReceived"),t("msgsRead"),t("viewOnceMsgsSent"),t("viewOnceMsgsReceived"),t("viewOnceMessagesOpened"),t("callOffersSent"),t("callOffersReceived"),t("totalCallDuration"),t("commerceMsgsSent"),t("commerceMsgsReceived"),t("pdpInquiriesSent"),t("reactionsSent"),t("reactionsReceived"),t("forwardMessagesSent"),t("forwardMessagesReceived"),t("editedMsgsSent"),t("botMessagesSent"),t("botMessagesReceived"),t("botMessagesEdited"),...[...i.COUNT_FIELD_NAMES,...r.FLAG_FIELD_NAMES].map((e=>t(e)))]).view((e=>e))},t.getChatThreadLoggingPendingEventsTable=function(){return(0,o.getStorage)().table(l)};var r=n(39026),i=n(71050),o=n(74557),a=n(20746),s=n(65717);const l="chat-thread-logging-pending-events"},39618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("collection-version").version((0,i.collectionVersionCreateTable)(),[n("collection"),t("version"),t("state"),t("finiteFailureStartTime"),t("ltHash"),t("isCollectionInMacMismatchFatal"),t("isCollectionLthashInconsistent"),t("lastSuccessfulSyncEndTime"),t("lastSyncAttemptStartTimes"),t("didLastPatchFailPostValidation"),t("lastPatchNewLtHashFromPatchDebugData"),t("isLastPatchAnIncomingPatch"),t("isLastPatchSenderAPrimaryDevice"),t("lastPatchSenderDeviceId"),t("didBootstrapFromSnapshot")]).view((e=>e))},t.getCollectionVersionTable=function(){return(0,r.getStorage)().table("collection-version")};var r=n(74557),i=n(20746),o=n(65717)},93769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("contact").version((0,i.contactCreateTable)(),[n("id"),t("name"),t("shortName"),t("pushname"),t("type"),t("verifiedName"),t("isBusiness"),t("isEnterprise"),t("verifiedLevel"),t("statusMute"),t("sectionHeader"),t("isAddressBookContact"),t("username"),a("isAddressBookContact"),t("isHosted")]).version((0,i.contactAddIsContactSyncCompleted)(),[t("isContactSyncCompleted"),a("isContactSyncCompleted")]).version((0,i.contactAddDisappearingModeProperties)(),[t("disappearingModeDuration"),t("disappearingModeSettingTimestamp")]).version((0,i.contactAddHash)(),[t("contactHash"),a("contactHash")]).version((0,i.contactAddLidProperties)(),[t("phoneNumber"),t("phoneNumberCreatedAt"),t("requestedPnTimestamp"),t("shareOwnPn"),t("displayNameLID"),a("phoneNumber")]).version((0,i.contactTextStatus)(),[t("textStatusString"),t("textStatusEmoji"),t("textStatusEphemeralDuration"),t("textStatusLastUpdateTime"),t("textStatusExpiryTs"),a("textStatusExpiryTs")]).view((e=>e))},t.getContactTable=function(){return(0,r.getStorage)().table("contact")};var r=n(74557),i=n(20746),o=n(65717)},93813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("device-list").version((0,i.deviceListCreateTable)(),[n("id"),t("devices"),t("rawId"),t("timestamp"),t("validIndexes"),t("currentIndex")]).version((0,i.deviceListAddDelete)(),[t("deleted"),t("deletedChangedToHost")]).version((0,i.deviceListAddV2Fields)(),[t("expectedTs"),t("expectedTsLastDeviceJobTs"),t("expectedTsUpdateTs"),t("advAccountType")]).view((e=>e))},t.getDeviceListTable=function(){return(0,r.getStorage)().table("device-list")};var r=n(74557),i=n(20746),o=n(65717)},18759:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("direct-connection-keys").version((0,i.directConnectionKeysCreateTable)(),[n("id"),t("certificateChain"),t("cypher"),t("cypherExpirationTimestamp")]).version((0,i.directConnectionKeysAddPostcodeColumns)(),[t("cypherType"),t("postcode"),t("postcodeSetByUser"),t("postcodeLocationName")]).view((e=>e))},t.getDirectConnectionKeysTable=function(){return(0,r.getStorage)().table("direct-connection-keys")};var r=n(74557),i=n(20746),o=n(65717)},85710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addAutoIncrementingPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("encrypted-mutations").version((0,i.encryptedMutationsCreateTable)(),[n("id"),t("collectionName"),t("keyId"),t("indexMac"),t("operation"),t("indexAndValueCipherText")]).view((e=>e))},t.getEncryptedMutationsTable=function(){return(0,r.getStorage)().table("encrypted-mutations")};var r=n(74557),i=n(20746),o=n(65717)},60072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("favorite-stickers").version((0,i.favoriteStickersCreateTable)(),[n("id"),t("timestamp"),t("sticker"),t("stickerHashWithoutMeta"),t("isFavorite"),t("deviceId")]).view((e=>e))},t.getFavoriteStickersTable=function(){return(0,r.getStorage)().table("favorite-stickers")};var r=n(74557),i=n(20746),o=n(65717)},97659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addUserDefinedPrimaryKey:t}=(0,o.columnBuilder)(e.config);e.add("fts-indexing-queue").version((0,i.ftsIndexingQueueCreateTable)(),[t("id")]).view((e=>e))},t.getFtsIndexingQueueTable=function(){return(0,r.getStorage)().table("fts-indexing-queue")};var r=n(74557),i=n(20746),o=n(65717)},96591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addCompositeIndex:a}=(0,o.columnBuilder)(e.config);e.add("group-invite-v4").version((0,i.groupInviteV4CreateTable)(),[n("id"),t("from"),t("to"),t("groupId"),t("expiration"),t("expired"),a(["from","to","groupId"])]).version((0,i.addGroupFromKeyToGroupInviteV4)(),[a(["from","groupId"])]).view((e=>e))},t.getGroupInviteV4Table=function(){return(0,r.getStorage)().table("group-invite-v4")};var r=n(74557),i=n(20746),o=n(65717)},35872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberAddMode=void 0,t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a,removeColumn:s}=(0,o.columnBuilder)(e.config);e.add("group-metadata").version((0,i.groupMetadataCreateTable)(),[n("id"),t("subject"),t("subjectTime"),t("creation"),t("owner"),t("desc"),t("descId"),t("descTime"),t("descOwner"),t("restrict"),t("announce"),t("a_v_id"),t("noFrequentlyForwarded"),t("ephemeralDuration"),t("membershipApprovalMode"),t("size"),t("support"),t("suspended"),t("terminated"),t("notAddedByContact"),t("addedBy"),t("parentGroup"),t("subgroups"),t("isParentGroup"),t("isParentGroupClosed"),t("defaultSubgroup"),t("generalSubgroup"),t("growthLockExpiration"),t("growthLockType"),t("lastActivityTimestamp"),t("lastSeenActivityTimestamp"),t("isLidAddressingMode"),t("reportToAdminMode"),t("lastReportToAdminTimestamp"),t("allowNonAdminSubGroupCreation"),t("memberAddMode"),t("generalChatAutoAddDisabled"),t("unreadMentionMapDB"),t("pendingUnreadMentionCountDB")]).version((0,i.migrateSubgroupsArray)(),[s("subgroups"),t("unjoinedSubgroups")]).version((0,i.removeUnjoinedSubgroups)(),[s("unjoinedSubgroups")]).version((0,i.removeSpamColumnsInGroupMetadata)(),[s("notAddedByContact"),s("addedBy")]).version((0,i.addCommunityAdminPromotionColumns)(),[t("displayCadminPromotion")]).version((0,i.renameCommunityAdminPromotionColumns)(),[s("displayCadminPromotion"),t("acknowledgedCadminPromotion")]).version((0,i.removeCommunityAdminPromotionColumns)(),[s("acknowledgedCadminPromotion")]).version((0,i.addIncognitoGroupMetadataColumn)(),[t("incognito")]).version((0,i.groupMetadataAddParentIndex)(),[a("parentGroup")]).version((0,i.addUnreadMentionMetadataColumn)(),[t("unreadMentionMetadata")]).version((0,i.removeUnreadMentionMetadataColumn)(),[s("unreadMentionMetadata")]).view((e=>e))},t.getGroupMetadataTable=function(){return(0,r.getStorage)().table("group-metadata")};var r=n(74557),i=n(20746),o=n(65717);const a=n(76672)({ADMIN_ADD:"admin_add",ALL_MEMBER_ADD:"all_member_add"});t.MemberAddMode=a},96637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addEncryptedColumn:n,addUserDefinedPrimaryKey:s,addIndex:l,addCompositeIndex:u}=(0,o.columnBuilder)(e.config);e.add("history-sync-notification").version((0,i.historySyncNotificationsCreateTable)(),[s("msgKey"),t("downloadOptions"),t("syncType"),n("chunkEncryptionKey",a.ENCRYPTED_VALUE_TYPE.STRING),t("chunkOrder"),t("processed"),l("syncType"),l("chunkOrder"),l("processed"),t("isReupload"),t("historySyncStepStartedTs"),t("historySyncPayloadSize"),t("reuploadPending"),t("downloadedHistorySyncPayload")]).version((0,i.encryptHistorySyncDirectPath)(),[n("directPath",a.ENCRYPTED_VALUE_TYPE.STRING)]).version((0,i.encryptHistorySyncFilehash)(),[n("filehash",a.ENCRYPTED_VALUE_TYPE.STRING),n("encFilehash",a.ENCRYPTED_VALUE_TYPE.STRING)]).version((0,i.addInitialHistBootstrapInlinePayloadColumn)(),[n("initialHistBootstrapInlinePayload",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER)]).version((0,i.addPeerDataRequestSessionIdColumn)(),[t("peerDataRequestSessionId")]).version((0,i.addPeerDataRequestChatIdColumn)(),[t("peerDataRequestChatId")]).version((0,i.addProgressColumn)(),[t("progress")]).version((0,i.addProcessedAndSyncTypeCompositeIndex)(),[u(["processed","syncType"])]).view((e=>e)).useDbMsgEncKeyForEncryptedCol(!0)},t.getHistorySyncNotificationTable=function(){return(0,r.getStorage)().table("history-sync-notification")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},12186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("inactive-receipt").version((0,i.inactiveReceiptCreateTable)(),[n("msgId"),t("chatId"),t("participantId")]).view((e=>e))},t.getInactiveReceiptTable=function(){return(0,r.getStorage)().table("inactive-receipt")};var r=n(74557),i=n(20746),o=n(65717)},71229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("label").version((0,i.labelCreateTable)(),[n("id"),t("name"),t("colorIndex"),t("predefinedId"),t("orderIndex")]).view((e=>e))},t.getLabelTable=function(){return(0,r.getStorage)().table("label")};var r=n(74557),i=n(20746),o=n(65717)},84566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelAssociationType=void 0,t.addTable=function(){const e=(0,r.getStorage)(),{addCompositePrimaryKey:t,addIndex:n,addCompositeIndex:a}=(0,o.columnBuilder)(e.config);e.add("label-association").version((0,i.labelAssociationCreateTable)(),[t(["labelId","associationId","type"]),n("labelId"),a(["associationId","type"])]).view((e=>e))},t.getLabelAssociationTable=function(){return(0,r.getStorage)().table("label-association")};var r=n(74557),i=n(20746),o=n(65717);const a=n(76672)({Jid:"jid",Message:"message"});t.LabelAssociationType=a},61568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("lid-chat-state").version((0,i.lidChatStateCreateTable)(),[n("id"),t("shareOwnPn"),t("requestedPnTimestamp")]).view((e=>e))};var r=n(74557),i=n(20746),o=n(65717)},70128:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("lid-display-name-mapping").version((0,i.lidDisplayNameMappingCreateTable)(),[n("id"),t("displayName")]).view((e=>e))};var r=n(74557),i=n(20746),o=n(65717)},592:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a,removeColumn:s}=(0,o.columnBuilder)(e.config);e.add("lid-pn-mapping").version((0,i.lidPnMappingCreateTable)(),[n("id"),t("phoneNumber"),a("phoneNumber"),t("createdAtTimestamp"),t("displayName")]).version((0,i.lidPnMappingRemoveDisplayName)(),[s("displayName")]).view((e=>e))};var r=n(74557),i=n(20746),o=n(65717)},21392:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("pending-membership-approval-request").version((0,i.membershipApprovalRequestCreateTable)(),[n(["groupId","id"]),a("groupId"),t("t"),t("addedBy"),t("requestMethod"),t("parentGroupId")]).view((e=>e))},t.getMembershipApprovalRequestTable=function(){return(0,r.getStorage)().table("pending-membership-approval-request")};var r=n(74557),i=n(20746),o=n(65717)},10139:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addEncryptedColumn:n,addUserDefinedPrimaryKey:s,addIndex:l,addUniqueIndex:u,addCompositeIndex:c,addArrayIndex:d,removeColumn:p}=(0,o.columnBuilder)(e.config);e.add("message").version((0,i.messageCreateTable)(),[s("id"),t("internalId"),u("internalId"),t("rowId"),u("rowId"),t("type"),t("subtype"),t("t"),t("notifyName"),t("from"),t("to"),t("author"),t("local"),t("ack"),t("invis"),t("isStarred"),l("isStarred"),t("mentionedJidList"),t("groupMentions"),t("count"),t("devicesAdded"),t("devicesRemoved"),t("isThisDeviceAdded"),t("recipients"),t("protocolMessageKey"),t("protocolMessageRowId"),t("templateParams"),c(["internalId","isStarred"]),t("vcardWAids"),d("vcardWAids"),t("hasLink"),t("isMediaMsg"),t("isDocMsg"),c(["internalId","isMediaMsg"]),c(["internalId","isDocMsg"]),c(["internalId","hasLink"]),t("ephemeralStartTimestamp"),t("ephemeralDuration"),t("ephemeralSettingTimestamp"),t("ephemeralOutOfSync"),t("ephemeralSettingUser"),t("expiredTimestamp"),l("expiredTimestamp"),t("directPath"),t("mimetype"),t("duration"),t("filehash"),t("uploadhash"),t("size"),t("filename"),t("streamingSidecar"),t("mediaKey"),t("mediaKeyTimestamp"),t("pageCount"),t("isGif"),t("gifAttribution"),t("isViewOnce"),t("width"),t("height"),t("scanLengths"),t("scansSidecar"),t("interactiveAnnotations"),t("firstFrameLength"),t("firstFrameSidecar"),t("isAnimated"),t("isLottie"),t("thumbnail"),t("richPreviewType"),t("doNotPlayInline"),t("broadcast"),t("broadcastParticipants"),t("broadcastId"),t("quotedMsg"),t("quotedStanzaID"),t("quotedRemoteJid"),t("quotedParticipant"),t("footer"),t("hydratedButtons"),t("selectedId"),t("selectedIndex"),t("selectedCarouselCardIndex"),t("vcardFormattedName"),t("isVcardOverMmsDocument"),t("isCaptionByUser"),t("hsmTag"),t("hsmCategory"),t("templateId"),t("businessOwnerJid"),t("productId"),t("currencyCode"),t("priceAmount1000"),t("retailerId"),t("url"),t("productImageCount"),t("paymentCurrency"),t("paymentMessageReceiverJid"),t("paymentTransactionTimestamp"),t("paymentStatus"),t("paymentNoteMsg"),t("paymentRequestMessageKey"),t("paymentExpiryTimestamp"),t("message"),t("orderTitle"),t("itemCount"),t("orderId"),t("surface"),t("status"),t("token"),t("textColor"),t("backgroundColor"),t("font"),t("isForwarded"),t("forwardingScore"),t("ctwaContext"),t("messageRangeIndex"),l("messageRangeIndex"),t("vcardList"),t("totalAmount1000"),t("totalCurrencyCode"),t("list"),t("listResponse"),t("isDynamicReplyButtonsMsg"),t("dynamicReplyButtons"),t("selectedButtonId"),t("sellerJid"),t("deprecatedMms3Url"),t("encFilehash"),n("msgRowOpaqueData",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),t("thumbnailDirectPath"),t("thumbnailSha256"),t("thumbnailEncSha256"),t("thumbnailHeight"),t("thumbnailWidth"),t("revokeSender"),t("pendingReadReceipt"),c(["from","pendingReadReceipt"]),t("inviteGrpType"),t("quotedGroupSubject"),t("quotedParentGroupJid"),t("reactionParentKey"),t("reactionTimestamp"),t("reactionText"),t("lastPlaybackProgress"),t("hasReaction"),t("kicKey"),t("kicState"),t("kicTimestampMs"),t("kicNotified"),t("keptMessageKey"),t("keepType"),t("keptCount"),t("agentId"),t("revokeTimestamp"),t("futureproofParams"),t("futureproofReparsed"),t("futureproofType"),t("futureproofSubtype"),t("botFeedbackKind"),t("botFeedbackText"),t("latestEditMsgKey"),t("latestEditSenderTimestampMs"),t("editMsgType"),t("bizSource"),t("invokedBotWid"),t("botEditType"),t("botTargetSenderJid"),t("bizBotType"),t("botPersonaId"),t("viewCount"),t("forwardedNewsletterMessageInfo"),t("viewed"),t("disappearingModeTrigger"),t("disappearingModeInitiatedByMe"),t("botResponseTargetId"),t("botPluginType"),t("botPluginReferenceIndex"),t("botPluginSearchProvider"),t("botPluginSearchUrl"),t("botReelPluginThumbnailCdnUrl"),t("botPluginMaybeParent"),t("carouselCardsParsed"),t("botMsgBodyType"),t("newsletterAdminInviteInfo"),t("bizContentPlaceholderType"),t("hostedBizEncStateMismatch"),t("placeholderCreatedWhenAccountIsHosted"),t("senderOrRecipientAccountTypeHosted"),t("eventInvalidated"),t("replyCount")]).version((0,i.messageAddIsSendFailureProperties)(),[t("isSendFailure")]).version((0,i.messageAddPaymentTxnStatus)(),[t("paymentTxnStatus")]).version((0,i.messageAddProductListPreviewInfo)(),[t("productListItemCount")]).version((0,i.messageAddPrivacyModeFields)(),[t("privacyModeWhenSent"),t("bizPrivacyStatus")]).version((0,i.messageAddProductListPreviewHeaderImage)(),[t("productHeaderImageRejected")]).version((0,i.messageAddDisappearingModeInitiator)(),[t("disappearingModeInitiator")]).version((0,i.messageAddGroupInviteV4)(),[t("inviteGrp"),t("inviteGrpName"),t("comment"),t("inviteCode"),t("inviteCodeExp")]).version((0,i.addSupportForHSMButtons)(),[t("isFromTemplate")]).version((0,i.messageAddPaymentRequestNFMFields)(),[t("nativeFlowButtons"),t("paymentRequestHeader")]).version((0,i.addWaveformToAudioMessages)(),[t("waveform")]).version((0,i.messageRemovePaymentRequestHeaderField)(),[p("paymentRequestHeader")]).version((0,i.messageAddNativeFlowNameField)(),[t("nativeFlowName")]).version((0,i.addStaticURLToImageVideoMessages)(),[t("staticUrl")]).version((0,i.addRequiresDirectConnection)(),[t("requiresDirectConnection")]).version((0,i.messageAddPaymentInviteServiceType)(),[t("paymentInviteServiceType")]).version((0,i.addStatusPSACampaignFields)(),[t("campaignId"),t("campaignDuration")]).version((0,i.messageAddPaymentBackground)(),[t("paymentBackground")]).version((0,i.messageAddInteractiveMessageFields)(),[t("interactiveHeader"),t("interactiveType"),t("interactivePayload")]).version((0,i.messageAddActionLink)(),[t("actionLink")]).version((0,i.messageAddHeaderType)(),[t("headerType")]).version((0,i.messageStatusPSAReadTimestamp)(),[t("statusPSAReadTimestamp")]).version((0,i.messageAddPollInvalidated)(),[t("pollInvalidated")]).version((0,i.messageAddRcat)(),[t("rcat")]).version((0,i.errorCodeColumn)(),[t("errorCode")]).version((0,i.lastUpdateTimestampColumn)(),[t("lastUpdateFromServerTs")]).version((0,i.paidMessagingCampaignIdColumn)(),[t("pmCampaignId")]).version((0,i.messageAddEditIndex)(),[l("latestEditMsgKey")]).version((0,i.messageAddIsCarouselIndex)(),[t("isCarouselMsg"),c(["internalId","isCarouselMsg"])]).view((e=>e)).enablePropFilter(!0).useDbMsgEncKeyForEncryptedCol(!0)},t.getMessageTable=function(){return(0,r.getStorage)().table("message")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},77979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("message-history").version((0,i.messageHistoryCreateTable)(),[n("msgKey"),t("parentMsgKey"),a("parentMsgKey")]).view((e=>e))},t.getMessageHistoryTable=function(){return(0,r.getStorage)().table("message-history")};var r=n(74557),i=n(20746),o=n(65717)},24377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("message-info").version((0,i.messageInfoCreateTable)(),[n(["msgKey","receiverUserJid"]),t("delivery"),t("read"),t("played"),t("deviceDelivered"),t("deviceNotDelivered"),a("msgKey")]).version((0,i.messageInfoAddDeliveryPrivacyMode)(),[t("deliveryPrivacyMode")]).view((e=>e))},t.getMessageInfoTable=function(){return(0,r.getStorage)().table("message-info")};var r=n(74557),i=n(20746),o=n(65717)},73482:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a,removeIndex:s}=(0,o.columnBuilder)(e.config);e.add("message-orphans").version((0,i.messageOrphansCreateTable)(),[n("msgKey"),t("parentMsgKey"),a("parentMsgKey"),t("sender"),t("parsedMsgPayload"),t("senderTimestampMs"),a("senderTimestampMs")]).version((0,i.messageOrphansAddColumns)(),[t("t"),a("t"),t("type"),s("senderTimestampMs"),t("read")]).view((e=>e))},t.getMessageOrphanTable=function(){return(0,r.getStorage)().table("message-orphans")};var r=n(74557),i=n(20746),o=n(65717)},45232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,i.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,a.columnBuilder)(e.config);e.add("missing-keys").version((0,o.missingKeysCreateTable)(),[n("keyHex"),t("keyId"),t("timestamp"),t("deviceResponses")]).view((e=>e))},t.convertFromMissingKeyToRow=function(e){const{keyHex:t,keyId:n,timestamp:i,deviceResponses:o}=e;return{keyHex:t,keyId:(0,r.fromSyncKeyId)(n),timestamp:i,deviceResponses:o}},t.convertToMissingKeyFromRow=function(e){const{keyHex:t,keyId:n,timestamp:i,deviceResponses:o}=e;return{keyHex:t,keyId:(0,r.toSyncKeyId)(n),timestamp:i,deviceResponses:o}},t.getMissingKeysTable=function(){return(0,i.getStorage)().table("missing-keys")};var r=n(93189),i=n(74557),o=n(20746),a=n(65717)},8238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataRequestUploadOperationType=void 0,t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("non-message-data-request").version((0,i.nonMessageDataRequestCreateTable)(),[n("id"),t("fileKey"),t("requestType"),t("operationType"),t("lastRequestTimeStampSec"),t("requestRetryCount"),t("responseError"),t("lastMediaUploadTimeStampSec"),t("lastMediaUploadSuccess"),t("mediaUploadFailureCount")]).view((e=>e))},t.getNonMessageDataRequestTable=function(){return(0,r.getStorage)().table("non-message-data-request")};var r=n(74557),i=n(20746),o=n(65717);const a=n(76672).Mirrored(["SEND_REQUEST","MEDIA_UPLOAD"]);t.DataRequestUploadOperationType=a},89405:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("note").version((0,i.noteCreateTable)(),[n("id"),t("type"),a("type"),t("chatJid"),a("chatJid"),t("content"),t("createdAt"),t("modifiedAt")]).view((e=>e))},t.getNoteTable=function(){return(0,r.getStorage)().table("note")};var r=n(74557),i=n(20746),o=n(65717)},59075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("orphan-receipt").version((0,i.orphanReceiptCreateTable)(),[n("msgKey"),t("delivery"),t("read"),t("played")]).view((e=>e))},t.getOrphanReceiptTable=function(){return(0,r.getStorage)().table("orphan-receipt")};var r=n(74557),i=n(20746),o=n(65717)},95553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("orphan-revoke").version((0,i.orphanRevokeCreateTable)(),[n("msgKey"),t("sender"),t("timestamp"),t("subtype")]).view((e=>e))},t.getOrphanRevokeTable=function(){return(0,r.getStorage)().table("orphan-revoke")};var r=n(74557),i=n(20746),o=n(65717)},30051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addEncryptedColumn:n,addUserDefinedPrimaryKey:s}=(0,o.columnBuilder)(e.config);e.add("orphan-tc-token").version((0,i.orphanTcTokenCreateTable)(),[s("chatId"),n("tcToken",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),t("tcTokenTimestamp")]).view((e=>e))},t.getOrphanTcTokenTable=function(){return(0,r.getStorage)().table("orphan-tc-token")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},23440:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addArrayIndex:a}=(0,o.columnBuilder)(e.config);e.add("participant").version((0,i.participantCreateTable)(),[n("groupId"),t("senderKey"),t("participants"),t("pastParticipants"),t("admins"),t("rotateKey"),t("version"),a("participants"),t("deviceSyncComplete"),t("staleType")]).view((e=>e))},t.getParticipantTable=function(){return(0,r.getStorage)().table("participant")};var r=n(74557),i=n(20746),o=n(65717)},8409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("peer-message").version((0,i.peerMessageCreateTable)(),[n("id"),t("to"),t("type"),t("subtype"),t("appStateSyncKeyShare"),t("appStateSyncKeyRequest"),t("appStateFatalExceptionNotification"),t("peerDataOperationRequestMessage"),t("peerDataOperationRequestResponseMessage")]).view((e=>e))},t.getPeerMessageTable=function(){return(0,r.getStorage)().table("peer-message")};var r=n(74557),i=n(20746),o=n(65717)},9920:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addAutoIncrementingPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("pending-mutations").version((0,i.pendingMutationsCreateTable)(),[n("id"),t("collection"),t("index"),a("index"),t("timestamp"),a("collection"),t("version"),t("operation"),t("binarySyncAction")]).version((0,i.addActionToPendingMutations)(),[t("action"),a("action")]).view((e=>e))},t.convertToPendingMutationFromRow=function(e){const{id:t,collection:n,index:r,binarySyncAction:i,version:o,operation:a,timestamp:s,action:l}=e;return{id:t,collection:n,index:r,binarySyncAction:i,version:o,operation:a,timestamp:s,action:l}},t.getPendingMutationsTable=function(){return(0,r.getStorage)().table("pending-mutations")};var r=n(74557),i=n(20746),o=n(65717)},46618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrivacyDisallowedListType=void 0,t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("privacy-disallowed-list").version((0,i.privacyDisallowedListCreateTable)(),[n("id"),t("disallowedList")]).version((0,i.privacyDisallowedListAddDhashField)(),[t("dhash")]).view((e=>({id:e.id,disallowedList:e.disallowedList,dhash:e.dhash})))},t.getPrivacyDisallowedListTable=function(){return(0,r.getStorage)().table("privacy-disallowed-list")};var r=n(74557),i=n(20746),o=n(65717);const a=n(76672)({About:"status",GroupAdd:"groupadd",LastSeen:"last",ProfilePicture:"profile"});t.PrivacyDisallowedListType=a},10144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("profile-pic-thumb").version((0,i.profilePicThumbCreateTable)(),[n("id"),t("tag"),t("eurl"),t("previewEurl"),t("timestamp"),t("previewDirectPath"),t("fullDirectPath"),t("filehash")]).view((e=>({id:e.id,tag:e.tag,eurl:e.eurl,previewEurl:e.previewEurl,timestamp:e.timestamp,previewDirectPath:e.previewDirectPath,fullDirectPath:e.fullDirectPath,filehash:e.filehash})))},t.getProfilePicThumbTable=function(){return(0,r.getStorage)().table("profile-pic-thumb")};var r=n(74557),i=n(20746),o=n(65717)},69386:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("quick-reply").version((0,i.quickReplyCreateTable)(),[n("id"),t("shortcut"),t("message"),t("count"),t("keywords")]).view((e=>e))},t.getQuickReplyTable=function(){return(0,r.getStorage)().table("quick-reply")};var r=n(74557),i=n(20746),o=n(65717)},72428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("recent-stickers").version((0,i.recentStickersCreateTable)(),[n("id"),t("timestamp"),t("sticker"),t("msgId"),t("weight"),t("isNewSticker")]).view((e=>e))},t.getRecentStickersTable=function(){return(0,r.getStorage)().table("recent-stickers")};var r=n(74557),i=n(20746),o=n(65717)},32392:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addIndex:n,addUserDefinedPrimaryKey:a}=(0,o.columnBuilder)(e.config);e.add("reporting-token").version((0,i.reportingTokenTable)(),[a("id"),t("reportingTag"),t("reportingTokenContent"),t("version")]).version((0,i.reportingTokenTableTsIndex)(),[t("ts"),n("ts")]).view((e=>e))},t.getReportingTokenTable=function(){return(0,r.getStorage)().table("reporting-token")};var r=n(74557),i=n(20746),o=n(65717)},43987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addAutoIncrementingPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("self-addon-message-type").version((0,i.selfMessageTypeCreateTable)(),[n("rowId"),t("msgId"),t("msgType"),a("msgId")]).view((e=>e))},t.getSelfAddonMessageTypeTable=function(){return(0,r.getStorage)().table("self-addon-message-type")};var r=n(74557),i=n(20746),o=n(65717)},43222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("subgroup-suggestion").version((0,i.subgroupSuggestionCreateTable)(),[n("id"),t("parentGroupId"),a("parentGroupId"),t("subject"),t("desc"),t("owner"),t("t")]).view((e=>e))};var r=n(74557),i=n(20746),o=n(65717)},47780:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("subgroup-suggestion-v2").version((0,i.subgroupSuggestionV2CreateTable)(),[n(["parentGroupId","id","owner"]),a("parentGroupId"),t("subject"),t("desc"),t("t"),t("isExistingGroup"),t("participantCount")]).view((e=>e))},t.getSubgroupSuggestionTable=function(){return(0,r.getStorage)().table("subgroup-suggestion-v2")};var r=n(74557),i=n(20746),o=n(65717)},50792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("subscription").version((0,i.subscriptionCreateTable)(),[n("id"),t("isDeactivated"),t("isAutoRenewing"),t("expirationDate")]).view((e=>e))},t.getSubscriptionTable=function(){return(0,r.getStorage)().table("subscription")};var r=n(74557),i=n(20746),o=n(65717)},62792:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,s.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:r,addCompositeIndex:i}=(0,u.columnBuilder)(e.config);e.add("sync-actions").version((0,l.syncActionsCreateTable)(),[n("index"),t("keyId"),t("version"),t("actionState"),r("actionState"),t("modelId"),t("modelType"),i(["modelId","modelType","actionState"]),t("valueMac"),t("indexMac"),r("indexMac"),t("collection"),r("collection"),t("timestamp"),t("action"),r("action"),t("binarySyncAction"),t("binarySyncData")]).view(d)},t.convertFromSyncActionToRow=function(e){const{keyId:t}=e;return(0,i.default)((0,i.default)({},e),{},{keyId:(0,a.fromSyncKeyId)(t)})},t.convertToSyncActionFromRow=function(e){const{keyId:t}=e;return(0,i.default)((0,i.default)({},e),{},{keyId:(0,a.toSyncKeyId)(t)})},t.getSyncActionsTable=function(){return(0,s.getStorage)().table("sync-actions")};var i=r(n(81109)),o=n(51768),a=n(93189),s=n(74557),l=n(20746),u=n(65717),c=r(n(89482));function d(e){const{index:t,binarySyncAction:n,actionState:r,version:i,keyId:a,modelId:s,modelType:l,indexMac:u,valueMac:d,collection:p,timestamp:f,action:_}=e;let{binarySyncData:g}=e;if(null==g){if(null==n)throw __LOG__(4,void 0,new Error,!0,["syncd"])`syncd: binarySyncAction should not be null when binarySyncData is null`,SEND_LOGS("syncd: syncd binarySyncAction should not be null when binarySyncData is null",1,"syncd"),(0,c.default)("syncd: binarySyncAction should not be null when binarySyncData is null");g=(0,o.syncActionToSyncData)(n)}return{index:t,binarySyncData:g,actionState:r,version:i,keyId:a,modelId:s,modelType:l,indexMac:u,valueMac:d,collection:p,timestamp:f,action:_}}},9419:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,a.getStorage)(),{addColumn:t,addEncryptedColumn:n,addUserDefinedPrimaryKey:r,addIndex:i}=(0,l.columnBuilder)(e.config);e.add("sync-keys").version((0,s.syncKeysCreateTable)(),[r("keyId"),t("timestamp"),t("fingerprint"),n("keyData",u.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),t("keyEpoch"),i("keyEpoch")]).view((e=>e))},t.convertFromSyncKeyToRow=function(e){const{keyId:t,keyData:n}=e;return(0,i.default)((0,i.default)({},e),{},{keyId:new Uint8Array((0,o.fromSyncKeyId)(t)),keyData:(0,o.fromSyncKeyData)(n)})},t.convertToSyncKeyFromRow=function(e){const{keyId:t,keyData:n}=e;return(0,i.default)((0,i.default)({},e),{},{keyId:(0,o.toSyncKeyId)(t.buffer),keyData:(0,o.toSyncKeyData)(n)})},t.getSyncKeysTable=function(){return(0,a.getStorage)().table("sync-keys")};var i=r(n(81109)),o=n(93189),a=n(74557),s=n(20746),l=n(65717),u=n(8065)},87597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("syncd-logs").version((0,i.syncdLogsCreateTable)(),[s("id"),a("ts"),a("collection"),l("collection"),a("log")]).view((e=>e))},t.getSyncdLogsTable=function(){return(0,r.getStorage)().table("syncd-logs")};var r=n(74557),i=n(20746),o=n(65717);const{addColumn:a,addAutoIncrementingPrimaryKey:s,addIndex:l}=(0,o.columnBuilder)()},52554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("tasks-scheduled-time").version((0,i.tasksScheduledTimeCreateTable)(),[n("taskName"),t("time")]).view((e=>e))},t.getTasksScheduledTimeTable=function(){return(0,r.getStorage)().table("tasks-scheduled-time")};var r=n(74557),i=n(20746),o=n(65717)},66846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrphanReactionsReasonType=void 0;const r=n(76672).Mirrored(["ParentMsgPlaceholder","ParentMsgMissing","ParentMsgFutureproof"]);t.OrphanReactionsReasonType=r},31304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("unjoined-subgroup-metadata").version((0,i.unjoinedSubgroupMetadataCreateTable)(),[n("id"),t("subject"),t("subjectTime"),t("defaultSubgroup"),t("generalSubgroup"),t("parentGroup")]).version((0,i.unjoinedSubgroupParentGroupIndex)(),[a("parentGroup")]).view((e=>e))},t.getUnjoinedSubgroupMetadataTable=function(){return(0,r.getStorage)().table("unjoined-subgroup-metadata")};var r=n(74557),i=n(20746),o=n(65717)},67589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("user-prefs").version((0,i.userPrefsCreateTable)(),[n("key"),t("value")]).view((e=>e))},t.getUserPrefsTable=function(){return(0,r.getStorage)().table("user-prefs")};var r=n(74557),i=n(20746),o=n(65717)},99801:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,removeColumn:a}=(0,o.columnBuilder)(e.config);e.add("verified-business-name").version((0,i.verifiedBusinessNameCreateTable)(),[n("id"),t("serial"),t("name"),t("isApi"),t("level"),t("actualActors"),t("hostStorage"),t("privacyModeTs")]).version((0,i.verifiedBusinessNameAddPrivacyMode)(),[t("privacyMode"),a("actualActors"),a("hostStorage"),a("privacyModeTs")]).version((0,i.verifiedBusinessNameAddSmbColumn)(),[t("isSmb")]).view((e=>e))},t.getVerifiedBusinessNameTable=function(){return(0,r.getStorage)().table("verified-business-name")};var r=n(74557),i=n(20746),o=n(65717)},53098:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createDeviceListPK=function(e){switch(e.server){case"lid":return`${e.user}@lid`;case"c.us":case"hosted":return e.user}throw(0,i.default)(`Jid ${e.toString({legacy:!0})} is not fully qualified to create a device list pk, jid.server should be "c.us" or "lid"`)};var i=r(n(89482))},34326:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldDeprecateLidThread=d,t.updateDuplicatedLidThreadBulk=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(93040),a=n(42247),s=n(94007),l=r(n(27112)),u=n(51017);function c(){return(c=(0,i.default)((function*(e){const t=[],n=e.filter((e=>null!=e&&l.default.isLid(e.id)&&!e.isDeprecated)),r=(0,a.getAlternateWidBulkForLids)(n.map((e=>e.id.toString())));n.forEach((n=>{var i;d(n,null!==(i=r.get(n.id.toString()))&&void 0!==i?i:[],e)&&t.push({id:n.id.toString(),isDeprecated:!0})})),0!==t.length&&(yield(0,s.getChatTable)().bulkCreateOrMerge(t).then((()=>{__LOG__(2)`updateChatIsDeprecatedBulk - true: deprecated ${t.length} chats during offline resume`,__LOG__(3,void 0,void 0,!0)`updateChatIsDeprecatedBulk: deprecating lid chats `,SEND_LOGS("deprecating-lid-chat-pnh-ctwa-mat")})))}))).apply(this,arguments)}function d(e,t,n){if(!l.default.isLid(e.id)||0===t.length)return!1;if(!0===e.isDeprecated)return __LOG__(3,void 0,void 0,!0)`shouldDeprecateLidThread: called with deprecated chatid`,SEND_LOGS("deprecating-lid-chat-pnh-ctwa-mat"),!0;const r=t.some((e=>n.some((t=>(null==t?void 0:t.id)===e))));return r&&(0,o.updateDeprecatedChatMatCache)((0,u.createWid)(e.id),!0),r}},71752:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.destroy=function(){return(0,l.destroyStorage)().catch((()=>(0,s.dexieCastToPromise)(new o.default(l.DATABASE_NAME).delete()))).finally((()=>{f=null}))},t.initialize=function(){return _.apply(this,arguments)},t.versionToRollout=void 0;var i=r(n(48926)),o=r(n(46808)),a=n(57874),s=n(49363),l=n(7230),u=n(59516),c=n(91123),d=n(93038),p=n(66913);let f;function _(){return(_=(0,i.default)((function*(){return null==f&&(yield(0,a.loadSchemaVersions)(),(0,l.createStorage)(),(0,p.addTable)(),(0,u.addTable)(),(0,c.addTable)(),(0,d.addTable)(),f=(0,l.getStorage)().initialize().catch((e=>{throw __LOG__(4,!0,new Error,!0,["sad"])`Assertion failed!`,SEND_LOGS("Failed to initialize offd storage",1,"sad"),e}))),f}))).apply(this,arguments)}t.versionToRollout=4},85995:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updatePeerReceipts=function(){return m.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(44037),s=n(77630),l=n(1619),u=n(87946),c=n(11779),d=n(74557),p=n(26368),f=r(n(60001)),_=n(41307),g=n(62162),h=n(10139),A=n(91123);function m(){return(m=(0,o.default)((function*(){g.QPL.markerPoint(_.QuickLogMarkerId.OFFLINE_RESUME,"UpdatePeerReceipts_start");const e=yield(0,A.getTable)().all(),t=[],n=[];e.forEach((e=>{e.ack===s.ACK.READ?t.push(e):e.ack===s.ACK.PLAYED?n.push(e):__LOG__(3)`updatePeerReceipts: unknown ack type: ${e.ack}`}));const{chatUpdates:r,ackUpdates:o}=yield E(t),a=new Map(o.map((e=>[e.id,e])));v(n).forEach((e=>{const t=a.get(e.id);null==t?a.set(e.id,e):a.set(e.id,(0,i.default)((0,i.default)({},t),{},{ack:e.ack}))}));const u=Array.from(a.values());return(0,l.frontendFireAndForget)("updateOfflinePeerReceipt",{chatUpdates:r.map((e=>{var t;return{chatId:e.id,unreadCount:e.unreadCount,unreadMentionsOfMe:null!==(t=e.unreadMentionsOfMe)&&void 0!==t?t:[]}})),ackUpdates:u.map((e=>({msgKey:e.id,ack:e.ack})))}),yield Promise.all([(0,d.getStorage)().lock(["message","chat"],(e=>{let[t,n]=e;return Promise.all([t.bulkCreateOrMerge(u),n.bulkCreateOrMerge(r)])})).then((()=>{})),(0,c.markUnclassifiedAddOnsAsReadJob)(Array.from(S(t)).map((e=>f.default.from(e)))).then((()=>{}))]),(0,A.getTable)().clear().then((()=>{g.QPL.markerPoint(_.QuickLogMarkerId.OFFLINE_RESUME,"UpdatePeerReceipts_end")}))}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e){const t=S(e),n=new Map(e.flatMap((e=>e.msgKeys)).map(c).filter((e=>e!==a.STATUS_JID)).map((e=>[e,{unreadCount:0,lastUnreadMsgRowId:void 0,unreadMentionsOfMe:[],unreadMentionCount:0}])));const r=Array.from(n.keys()),i=yield(0,h.getMessageTable)().anyOf(["from","pendingReadReceipt"],r.map((e=>[e,u.PendingReadReceiptType.Message])),{shouldDecrypt:!1});i.forEach((e=>function(e,n){const{rowId:r,id:i}=n;if(null==e||null==r)return;t.has(i)&&(null==e.lastUnreadMsgRowId||r>e.lastUnreadMsgRowId)&&(e.lastUnreadMsgRowId=r)}(n.get(e.from),e))),i.forEach((e=>function(e,t){const{rowId:n}=t;if(null==e||null==n||null==e.lastUnreadMsgRowId)return;if(n>e.lastUnreadMsgRowId&&(e.unreadCount+=1,(0,p.getIsImportantMessage)(t))){const n={id:t.id,timestamp:t.t};e.unreadMentionsOfMe.push(n)}}(n.get(e.from),e)));const o=i.flatMap((e=>{const{rowId:t}=e,r=n.get(e.from);return null==r||null==t||null==r.lastUnreadMsgRowId?[]:t<=r.lastUnreadMsgRowId?[{id:e.id,ack:s.ACK.READ,pendingReadReceipt:null}]:[]})).concat((l=t,Array.from(l).filter((e=>c(e)===a.STATUS_JID)).map((e=>({id:e,ack:s.ACK.READ})))));var l;return{chatUpdates:r.map((e=>{const t=n.get(e);return null!=t&&null!=t.lastUnreadMsgRowId?{id:e,unreadCount:t.unreadCount,unreadMentionsOfMe:t.unreadMentionsOfMe}:null})).filter(Boolean),ackUpdates:o};function c(e){return f.default.fromString(e).remote.toString()}}))).apply(this,arguments)}function S(e){return new Set(e.flatMap((e=>e.msgKeys)))}function v(e){const t=new Set;return e.forEach((e=>{e.ack===s.ACK.PLAYED&&e.msgKeys.forEach((e=>t.add(e)))})),Array.from(t).map((e=>({id:e,ack:s.ACK.PLAYED,pendingReadReceipt:null})))}},7230:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(){const e=new i.default(l);u=new o.Storage(e)},t.destroyStorage=function(){if(null==u)return Promise.reject((0,a.default)("[offd-storage] Storage should be created first before being destroyed"));return u.purge().then((()=>{u=null})).catch((e=>{throw u=null,e}))},t.getStorage=function(){return(0,s.default)(null!=u,"[offd-storage] Storage should be created first before being accessed"),u};var i=r(n(96801)),o=n(21820),a=r(n(89482)),s=r(n(41143));const l="offd-storage";t.DATABASE_NAME=l;let u=null},99692:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addUserToPendingDeviceSync=function(e){return(0,o.getTable)().bulkCreateOrMerge(e.map((e=>({id:e}))))},t.doPendingDeviceSync=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(93038),a=n(51017);function s(){return(s=(0,i.default)((function*(){try{const e=yield(0,o.getTable)().all(),t=n(60223).syncDeviceListJob;yield t(e.map((e=>(0,a.createWid)(e.id))),null,null),yield(0,o.getTable)().bulkRemove(e.map((e=>e.id)))}catch(e){__LOG__(4,!0,new Error)`doPendingDeviceSync failed during RESUME_WITH_OPEN_TAB`}}))).apply(this,arguments)}},59516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("dangling-receipt").version((0,r.getStorage)().versions.version(1),[a("id"),o("receipts"),o("acks")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("dangling-receipt")};var r=n(7230),i=n(65717);const{addColumn:o,addAutoIncrementingPrimaryKey:a}=(0,i.columnBuilder)()},91123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("peer-read-receipt").version((0,r.getStorage)().versions.version(2),[a("id"),o("msgKeys"),o("ts"),o("ack")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("peer-read-receipt")};var r=n(7230),i=n(65717);const{addColumn:o,addAutoIncrementingPrimaryKey:a}=(0,i.columnBuilder)()},93038:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("pending-device-sync").version((0,r.getStorage)().versions.version(4),[o("id")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("pending-device-sync")};var r=n(7230),i=n(65717);const{addUserDefinedPrimaryKey:o}=(0,i.columnBuilder)()},66913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("read-receipt").version((0,r.getStorage)().versions.version(0),[a("id"),o("externalIds")]).delete((0,r.getStorage)().versions.version(3)).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("read-receipt")};var r=n(7230),i=n(65717);const{addColumn:o,addUserDefinedPrimaryKey:a}=(0,i.columnBuilder)()},27162:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(){const e=new i.default(l);u=new o.Storage(e)},t.destroyStorage=function(){if(null==u)return Promise.reject((0,a.default)("[qpl-storage] Storage should be created first before being destroyed"));return u.purge().then((()=>{u=null})).catch((e=>{throw u=null,e}))},t.getStorage=function(){return(0,s.default)(null!=u,"[qpl-storage] Storage should be created first before being accessed"),u};var i=r(n(96801)),o=n(21820),a=r(n(89482)),s=r(n(41143));const l="qpl-storage";t.DATABASE_NAME=l;let u=null},9317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qplEventsCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.versionToRollout=void 0;var r=n(27162);t.versionToRollout=0},73804:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.destroy=function(){return(0,g.destroyStorage)().catch((()=>(0,s.dexieCastToPromise)(new o.default(g.DATABASE_NAME).delete()))).finally((()=>{h=null}))},Object.defineProperty(t,"getBaseKeyTable",{enumerable:!0,get:function(){return l.getTable}}),Object.defineProperty(t,"getIdentityTable",{enumerable:!0,get:function(){return u.getTable}}),Object.defineProperty(t,"getMetaTable",{enumerable:!0,get:function(){return c.getTable}}),Object.defineProperty(t,"getPreKeyTable",{enumerable:!0,get:function(){return d.getTable}}),Object.defineProperty(t,"getSenderKeyTable",{enumerable:!0,get:function(){return p.getTable}}),Object.defineProperty(t,"getSessionTable",{enumerable:!0,get:function(){return f.getTable}}),Object.defineProperty(t,"getSignedPreKeyTable",{enumerable:!0,get:function(){return _.getTable}}),t.initialize=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=r(n(46808)),a=n(57874),s=n(49363),l=n(15067),u=n(40303),c=n(92673),d=n(26886),p=n(30297),f=n(54438),_=n(63144),g=n(32954);let h;function A(){return(A=(0,i.default)((function*(){return null==h&&(yield(0,a.loadSchemaVersions)(),(0,g.createStorage)(),(0,l.addTable)(),(0,u.addTable)(),(0,c.addTable)(),(0,d.addTable)(),(0,p.addTable)(),(0,f.addTable)(),(0,_.addTable)(),h=(0,g.getStorage)().initialize().catch((e=>{throw __LOG__(4,!0,new Error,!0,["sad"])`Assertion failed!`,SEND_LOGS("Failed to initialize signal storage",1,"sad"),e}))),h}))).apply(this,arguments)}},32954:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(){const e=new i.default(l);u=new o.Storage(e)},t.destroyStorage=function(){if(null==u)return Promise.reject((0,a.default)("[signal-storage] Storage should be created first before being destroyed"));return u.purge().then((()=>{u=null})).catch((e=>{throw u=null,e}))},t.getStorage=function(){return(0,s.default)(null!=u,"[signal-storage] Storage should be created first before being accessed"),u};var i=r(n(96801)),o=n(21820),a=r(n(89482)),s=r(n(41143));const l="signal-storage";t.DATABASE_NAME=l;let u=null},53758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseKeyCreateTable=function(){return(0,r.getStorage)().versions.version(5)},t.identityCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.metaCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.preKeyCreateTable=function(){return(0,r.getStorage)().versions.version(2)},t.senderKeyCreateTable=function(){return(0,r.getStorage)().versions.version(6)},t.sessionCreateTable=function(){return(0,r.getStorage)().versions.version(3)},t.signedPreKeyCreateTable=function(){return(0,r.getStorage)().versions.version(4)},t.versionToRollout=void 0;var r=n(32954);t.versionToRollout=6},15067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("baseKey-store").version((0,i.baseKeyCreateTable)(),[s("id"),a("address"),a("originalMsgId"),a("baseKey"),l(["address","originalMsgId"])]).view((e=>({id:e.id,address:e.address,originalMsgId:e.originalMsgId,baseKey:e.baseKey})))},t.getTable=function(){return(0,r.getStorage)().table("baseKey-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addAutoIncrementingPrimaryKey:s,addCompositeIndex:l}=(0,o.columnBuilder)()},40303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("identity-store").version((0,i.identityCreateTable)(),[s("identifier"),a("identityKey"),a("rowId"),a("sentAddonRowId")]).view((e=>({identifier:e.identifier,identityKey:e.identityKey,rowId:e.rowId,sentAddonRowId:e.sentAddonRowId})))},t.getTable=function(){return(0,r.getStorage)().table("identity-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addUserDefinedPrimaryKey:s}=(0,o.columnBuilder)()},92673:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("signal-meta-store").version((0,i.metaCreateTable)(),[s("key"),a("value")]).view((e=>({key:e.key,value:e.value})))},t.getTable=function(){return(0,r.getStorage)().table("signal-meta-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addUserDefinedPrimaryKey:s}=(0,o.columnBuilder)()},26886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("prekey-store").version((0,i.preKeyCreateTable)(),[s("keyId"),a("keyPair"),a("isDirectDistribution")]).view((e=>({keyId:e.keyId,keyPair:e.keyPair,isDirectDistribution:e.isDirectDistribution})))},t.getTable=function(){return(0,r.getStorage)().table("prekey-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addAutoIncrementingPrimaryKey:s}=(0,o.columnBuilder)()},30297:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("senderkey-store").version((0,i.senderKeyCreateTable)(),[s("senderKeyName"),a("senderKey"),a("senderId"),l("senderId")]).view((e=>({senderKeyName:e.senderKeyName,senderKey:e.senderKey,senderId:e.senderId})))},t.getTable=function(){return(0,r.getStorage)().table("senderkey-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addUserDefinedPrimaryKey:s,addIndex:l}=(0,o.columnBuilder)()},54438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("session-store").version((0,i.sessionCreateTable)(),[s("address"),a("session")]).view((e=>({address:e.address,session:e.session})))},t.getTable=function(){return(0,r.getStorage)().table("session-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addUserDefinedPrimaryKey:s}=(0,o.columnBuilder)()},63144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("signed-prekey-store").version((0,i.signedPreKeyCreateTable)(),[s("keyId"),a("keyPair"),a("signature")]).view((e=>({keyId:e.keyId,keyPair:e.keyPair,signature:e.signature})))},t.getTable=function(){return(0,r.getStorage)().table("signed-prekey-store")};var r=n(32954),i=n(53758),o=n(65717);const{addColumn:a,addAutoIncrementingPrimaryKey:s}=(0,o.columnBuilder)()},56858:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ENC_KEY_TTL=t.ENC_KEY_TABLE_NAME=t.ENC_KEY_DB_NAME=t.DbEncKeyStore=t.DB_ENCRYPTION_CIPHER=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(62089),s=n(31630),l=n(29987),u=r(n(46808)),c=n(49363),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(91329)),p=n(82192),f=r(n(89482)),_=r(n(41143));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const h="wawc_db_enc";t.ENC_KEY_DB_NAME=h;const A="keys";t.ENC_KEY_TABLE_NAME=A;const m={name:"HKDF"},E={hash:"SHA-256"},y=4*l.WEEK_MILLISECONDS*24;t.ENC_KEY_TTL=y;const S="fts_hmac_keys",v="AES-CBC";t.DB_ENCRYPTION_CIPHER=v;function I(){const e=new Uint8Array(128);return self.crypto.getRandomValues(e),self.crypto.subtle.importKey("raw",e,m,!1,["deriveKey"])}const T=new class{constructor(){var e=this;this._waitUntilFinalDbEncKeyReady=new s.Resolvable,this._waitUntilFinalFtsHmacKeyReady=new s.Resolvable,this._waitUntilInit=new s.Resolvable,this._getOrUpdateEncKeys=e=>this._getDbOrThrow().keys.orderBy("id").toArray().then((t=>{if(!t||0===t.length)return this._addNewEncKey(e);const n=t[t.length-1]._expiration;if(null!=n&&n<=(new Date).getTime())return this._addNewEncKey(e);this._ephemeralLocalEncSalt=e;const r=t.map(function(){var t=(0,o.default)((function*(t){const n=yield self.crypto.subtle.deriveKey((0,i.default)((0,i.default)((0,i.default)({},m),E),{},{salt:e,info:new Uint8Array(1)}),t.key,{name:v,length:128},!1,["encrypt","decrypt"]);return(0,i.default)((0,i.default)({},t),{},{key:n})}));return function(){return t.apply(this,arguments)}}());return Promise.all(r).then((e=>{this._keys=e}))})),this._getOrUpdateFtsKey=()=>this._getDbOrThrow().fts_hmac_keys.orderBy("id").toArray().then((e=>{if(!e||0===e.length)return this._addNewFtsHMACKey();if(e.length>1)throw new d.DBInvalidFtsHMACKey;this._ftsHMACKey=e[e.length-1]})),this._addNewEncKey=e=>I().then((t=>this._getDbOrThrow().keys.add({key:t,_expiration:(new Date).getTime()+y}).then((()=>this._getOrUpdateEncKeys(e))))),this._addNewFtsHMACKey=()=>I().then((e=>this._getDbOrThrow().fts_hmac_keys.add({key:e}).then((()=>this._getOrUpdateFtsKey())))),this.generateFinalDbEncryptionAndFtsKey=e=>{if(null!=this._finalDbMsgEncKeys||null==this._ephemeralLocalEncSalt)return Promise.resolve();const t=(0,a.decodeB64)(e);return this._generateFinalFtsHmacKey(t),this._generateFinalDbMsgEncryptionKey(t),Promise.resolve()},this._generateFinalDbMsgEncryptionKey=t=>{(0,p.startPageLoadQplMeasure)("generateFinalDbMsgEncryptionKey");return this._getDbOrThrow().keys.orderBy("id").toArray().then((n=>{const r=n.map(function(){var n=(0,o.default)((function*(n){let r;(0,_.default)(null!=e._ephemeralLocalEncSalt,"local salt is undefined");try{r=yield self.crypto.subtle.deriveKey((0,i.default)((0,i.default)((0,i.default)({},m),E),{},{salt:t,info:new Uint8Array(e._ephemeralLocalEncSalt||0)}),n.key,{name:v,length:128},!1,["encrypt","decrypt"])}catch(t){throw e._ephemeralLocalEncSalt=null,t}return(0,i.default)((0,i.default)({},n),{},{key:r})}));return function(){return n.apply(this,arguments)}}());return Promise.all(r).then((e=>{this._ephemeralLocalEncSalt=null,this._finalDbMsgEncKeys=e,this._waitUntilFinalDbEncKeyReady.resolve()}))})).finally((()=>{(0,p.endPageLoadQplMeasure)("generateFinalDbMsgEncryptionKey"),this._ephemeralLocalEncSalt=null}))},this._generateFinalFtsHmacKey=function(){var t=(0,o.default)((function*(t){if(!e._ftsHMACKey||null==e._ftsHMACKey.key||null==e._ftsHMACKey.id)throw __LOG__(2)`Base ftsHMACKey is null in _generateFinalFtsHmacKey`,new d.DBInvalidFtsHMACKey;const[n,r]=[e._ftsHMACKey.id,e._ftsHMACKey.key],o=yield self.crypto.subtle.deriveKey((0,i.default)((0,i.default)((0,i.default)({},m),E),{},{salt:t,info:new Uint8Array(0)}),r,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);e._finalFtsHmacKey={id:n,key:o},e._waitUntilFinalFtsHmacKeyReady.resolve()}));return function(){return t.apply(this,arguments)}}()}init(e){if(this._db)return Promise.resolve();this._db=new u.default(h,{chromeTransactionDurability:"relaxed",addons:[]}),this._getDbOrThrow().version(1).stores({[A]:"++id, _expirtation",[S]:"++id"}),this._getDbOrThrow().version(2).stores({[A]:"++id",[S]:"++id"});const t=e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset);return(0,c.dexieCastToPromise)(this._getDbOrThrow().open()).then((()=>Promise.all([this._getOrUpdateEncKeys(t),this._getOrUpdateFtsKey()]))).then((()=>this._waitUntilInit.resolve()))}_getDbOrThrow(){if(null==this._db)throw(0,f.default)("[db_encryption_key] db is not initialized");return this._db}deleteKeys(){return Promise.all([this._getDbOrThrow().table(A).clear(),this._getDbOrThrow().table(S).clear()]).then((()=>{})).finally((()=>(this._db=null,(0,c.dexieCastToPromise)(u.default.delete(h)).catch((()=>u.default.delete(h))))))}resetDB(){var e;null===(e=this._db)||void 0===e||e.close(),this._db=null}deleteKeyCache(){this._keys=null,this._ftsHMACKey=null,this._finalDbMsgEncKeys=null,this._waitUntilFinalDbEncKeyReady=new s.Resolvable,this._waitUntilFinalFtsHmacKeyReady=new s.Resolvable,this._finalFtsHmacKey=null,this._ephemeralLocalEncSalt=null,this._waitUntilInit=new s.Resolvable}waitForFinalDbMsgEncKey(){return this._waitUntilFinalDbEncKeyReady.promise}waitForFinalFtsHmacKey(){return this._waitUntilFinalFtsHmacKeyReady.promise}waitForInit(){return this._waitUntilInit.promise}getEncKeys(){if(!this._keys)throw new d.DbEncKeyNotLoaded(A);return this._keys}getDbMsgEncKeys(e){if(!this._finalDbMsgEncKeys)throw new d.DbMsgEncKeyNotLoaded(e.tableName);return this._finalDbMsgEncKeys}getFtsHMACKey(){if(!this._finalFtsHmacKey)throw new d.DbEncKeyNotLoaded(S);return this._finalFtsHmacKey}};t.DbEncKeyStore=T},49363:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dexieCastToPromise=function(e){return Promise.resolve(e)}},24858:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalSchemaVersions=function(){return u.apply(this,arguments)},t.getLocalVersion=s;var i=r(n(48926)),o=r(n(46808)),a=n(49079);function s(){return l.apply(this,arguments)}function l(){return(l=(0,i.default)((function*(e){try{const t=new o.default(e),n=(yield t.open()).verno;return yield t.close(),n-1}catch(e){return"NoSuchDatabaseError"!==e.name&&__LOG__(4,void 0,new Error)`db: error while getting db local version: ${e}`,null}}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(){const e=(yield Promise.all(Array.from(a.DatabaseNames.members()).map(function(){var e=(0,i.default)((function*(e){const t=yield s(e);return null!=t?[e,t]:null}));return function(){return e.apply(this,arguments)}}()))).filter(Boolean);return new Map(e)}))).apply(this,arguments)}},49079:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t._waitUntilSchemaVersionsReady=t.DatabaseNames=void 0,t.clearSchemaVersions=function(){p=null},t.convertDBName=f,t.getLoaderType=_,t.getSchemaVersions=function(e){if(null==p){const t={webDbLoader:_()};throw null!=e&&(t.webDbName=f(e)),new l.WebDbLoadFromVersionFailureNonAnonymousWamEvent(t).commitAndWaitForFlush(!0),__LOG__(4,void 0,new Error,!0)`db: Schema versions not initialized`,SEND_LOGS("db: Schema versions not initialized"),(0,u.default)("Schema versions not initialized")}return p},t.hasSchemaVersions=function(){return null!=p},t.setSchemaVersions=function(e){__LOG__(2)`db: set schema versions: ${Array.from(e)}. is worker? ${(0,o.isWorker)()}`,p=e,d.resolve()},t.waitUntilSchemaVersionsReady=function(){return d.promise};var i=n(31630),o=n(95160),a=n(83482),s=n(37519),l=n(71422),u=r(n(89482));const c=n(76672)({ModelStorage:"model-storage",FtsStorage:"fts-storage",JobsStorage:"jobs-storage",LruMediaStorage:"lru-media-storage-idb",OffdStorage:"offd-storage",QplStorage:"qpl-storage",SignalStorage:"signal-storage",WorkerStorage:"worker-storage",SW:"sw",WAWC:"wawc",WAWCDBEnc:"wawc_db_enc"});t.DatabaseNames=c;const d=new i.Resolvable;t._waitUntilSchemaVersionsReady=d;let p=null;function f(e){switch(e){case c.ModelStorage:return s.WEB_DB_NAME_TYPE.MODEL_STORAGE;case c.FtsStorage:return s.WEB_DB_NAME_TYPE.FTS_STORAGE;case c.JobsStorage:return s.WEB_DB_NAME_TYPE.JOBS_STORAGE;case c.LruMediaStorage:return s.WEB_DB_NAME_TYPE.LRU_MEDIA_STORAGE_IDB;case c.OffdStorage:return s.WEB_DB_NAME_TYPE.OFFD_STORAGE;case c.QplStorage:return s.WEB_DB_NAME_TYPE.QPL_STORAGE;case c.SignalStorage:return s.WEB_DB_NAME_TYPE.SIGNAL_STORAGE;case c.WorkerStorage:return s.WEB_DB_NAME_TYPE.WORKER_STORAGE;case c.SW:return s.WEB_DB_NAME_TYPE.SW;case c.WAWC:return s.WEB_DB_NAME_TYPE.WAWC;case c.WAWCDBEnc:return s.WEB_DB_NAME_TYPE.WAWC_DB_ENC}}function _(){return(0,o.isServiceWorker)()?a.WEB_DB_LOADER_TYPE.SERVICE_WORKER:(0,o.isWorker)()?a.WEB_DB_LOADER_TYPE.WEB_WORKER:a.WEB_DB_LOADER_TYPE.MAIN}},40409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(39299),i=n(98123),o=n(7787),a=n(20746),s=n(71752),l=n(9317),u=n(49079),c=n(53758),d=n(58183);var p=new Map([[u.DatabaseNames.ModelStorage,a.versionToRollout],[u.DatabaseNames.FtsStorage,r.versionToRollout],[u.DatabaseNames.JobsStorage,i.versionToRollout],[u.DatabaseNames.LruMediaStorage,o.versionToRollout],[u.DatabaseNames.OffdStorage,s.versionToRollout],[u.DatabaseNames.QplStorage,l.versionToRollout],[u.DatabaseNames.SignalStorage,c.versionToRollout],[u.DatabaseNames.WorkerStorage,d.versionToRollout]]);t.default=p},51882:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StorageCmdImpl=t.StorageCmd=void 0;var i=r(n(7880));class o extends i.default{}t.StorageCmdImpl=o;const a=new o;t.StorageCmd=a},83750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyVersions=function(e){e.version(1).stores({logs:"line,log"}),e.version(2).stores({logs:"line,log",assets:"key,hash,data"}),e.version(3).stores({logs:"line,log",assets:"key,hash,data",wam:",buffer,prevValues,lastSend"}),e.version(4).stores({logs:"line,log",assets:"key,hash,data",wam:",key,buffer",l10n:"key,hash,t"}),e.version(5).stores({logs:"line,log",assets:null,wam:",key,buffer",l10n:"key,hash,t"}),e.version(6).stores({logs:"line,log,timestamp",wam:",key,buffer",l10n:"key,hash,t"}),e.version(7).stores({logs:"line,log,timestamp",wam:",key,buffer",l10n:"key,hash,t",user:"key"}),e.version(8).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",l10n:"key,hash,t",user:"key"}),e.version(9).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",l10n:"key,hash,t",user:"key"}),e.version(10).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",ps_meta:"key, value, rotateInDays, lastRotationTimeUtc",ps_tokens:"key",l10n:"key,hash,t",user:"key"}),e.version(11).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",ps_meta:"key, value, rotateInDays, lastRotationTimeUtc",ps_tokens:"key",l10n:"key,hash,t",user:"key",core_wam:"key, streamId",core_wam_meta:"streamId"}),e.version(12).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",wam_meta:"streamId,seqNum",ps_meta:"key, value, rotateInDays, lastRotationTimeUtc",ps_tokens:"key",l10n:"key,hash,t",user:"key",core_wam:"key, streamId",core_wam_meta:"streamId",worker_wam_events:"++id"}),e.version(13).stores({logs:"line,timestamp"}),e.version(14).stores({logs:"line,timestamp,&count"})}},62419:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(66911),o=n(81408),a=n(77689),s=r(n(46808)),l=n(21561),u=n(95160),c=n(88745),d=n(83750),p=n(74939),f=r(n(89482));const _={ERROR:"error",OPENING:"opening",BLOCKED:"blocked",OPEN:"open",CLOSED:"closed",FAILED:"failed"};let g=!1,h=null;function A(){this._dbName=l.WEB_IDB_DB_NAMES.wawc,this._db=new s.default(this._dbName,{chromeTransactionDurability:"relaxed",addons:[]}),this._db.on("versionchange",(e=>{this._db.close(),__LOG__(2)`db: close db due to versionchange`,e&&null!=e.newVersion&&e.newVersion!==e.oldVersion&&(g=!0,h&&h())})),(0,d.applyVersions)(this._db),this.openAttempt=0,this.openDB().catch((e=>{__LOG__(3)`openDB failed: ${e}`})),this._dbState=_.OPENING}A.prototype.loadUserIdb=function(){return this.idb().then((e=>e.transaction("rw",e.user,(()=>e.user.toArray().then((e=>e.forEach((e=>{this.permanentStorage.dataStore[e.key]=e.value})))))))).catch((e=>{__LOG__(3)`db:loadUserIdb:Error ${e}`}))},A.prototype.openDB=function(){this._db.isOpen()&&(this._db.close(),__LOG__(2)`db: close db due to duplicate openDB`);const e=(0,a.promiseTimeout)(Promise.resolve(this._db.open()),1e4).then((()=>{(0,u.isWorker)()?__LOG__(2)`db: Successfully opened db in worker thread`:__LOG__(2)`db: Successfully opened db in main thread`;return new p.WebcDbOpenWamEvent({webcDbName:this._dbName,webcDbOpenWasSuccess:!0,webcDbOpenNumAttempts:this.openAttempt}).commit(),this._dbState=_.OPEN,_.OPEN})).catch((0,o.filteredCatch)(i.TimeoutError,(()=>{__LOG__(2)`db:openDB blocked in ${(0,u.isWorker)()?"worker":"main"} thread`;return new p.WebcDbOpenWamEvent({webcDbName:this._dbName,webcDbOpenWasSuccess:!1,webcDbOpenNumAttempts:this.openAttempt}).commit(),this._dbState=_.BLOCKED,_.BLOCKED}))).catch((e=>{if(__LOG__(3)`db:openDB:Error ${e}`,this.openAttempt>1||c.UA.isSafari){this.opening=void 0,this._dbState=_.ERROR;throw new p.WebcDbOpenWamEvent({webcDbName:this._dbName,webcDbOpenWasSuccess:!1,webcDbOpenNumAttempts:this.openAttempt}).commit(),_.ERROR}return this.openAttempt+=1,this._db.delete().catch((e=>{throw __LOG__(3)`db:deleteDB:Error ${e}`,this.opening=void 0,this._dbState=_.ERROR,_.ERROR})).then((()=>this.openDB()))})).then((e=>{if(this.opening=void 0,e===_.BLOCKED)throw _.BLOCKED;return this._db}));return this.opening||(this.opening=e),e},A.prototype.idb=function(){return this._db.isOpen()?Promise.resolve(this._db):this._db.hasFailed()?(__LOG__(3)`Dexie: database failed to open, hasClosed ${this._db.hasBeenClosed()}`,Promise.reject((0,f.default)(_.FAILED))):this._dbState===_.BLOCKED?(__LOG__(3)`Dexie: database is blocked`,Promise.reject((0,f.default)(_.BLOCKED))):this.opening?this.opening:(__LOG__(3)`Dexie: database is closed`,Promise.reject((0,f.default)(_.CLOSED)))},A.prototype.onVersionChange=function(e){h=e,g&&h()},A.prototype.State=_;var m=new A;t.default=m},49814:(e,t,n)=>{"use strict";var r=n(95318);t.j2=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=r(n(46808)),a=n(57874),s=n(8905),l=n(49363),u=n(33584),c=n(88604),d=n(97935);let p;function f(){return(f=(0,i.default)((function*(){return(0,s.patchDexie)(),null==p&&(yield(0,a.loadSchemaVersions)(),(0,d.createStorage)(),(0,c.addTable)(),(0,u.addTable)(),p=(0,d.getStorage)().initialize().catch((e=>{throw __LOG__(4,!0,new Error,!0,["sad"])`Assertion failed!`,SEND_LOGS("Failed to initialize worker storage",1,"sad"),e}))),p}))).apply(this,arguments)}},97935:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DATABASE_NAME=void 0,t.createStorage=function(){const e=new i.default(l);u=new o.Storage(e)},t.destroyStorage=function(){if(null==u)return Promise.reject((0,a.default)("[worker-storage] Storage should be created first before being destroyed"));return u.purge().then((()=>{u=null})).catch((e=>{throw u=null,e}))},t.getStorage=function(){return(0,s.default)(null!=u,"[worker-storage] Storage should be created first before being accessed"),u};var i=r(n(96801)),o=n(21820),a=r(n(89482)),s=r(n(41143));const l="worker-storage";t.DATABASE_NAME=l;let u=null},58183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.versionToRollout=void 0;t.versionToRollout=1},78366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferredMessagesStorageCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.localStorageCreateTable=function(){return(0,r.getStorage)().versions.version(0)};var r=n(97935);n(58183).versionToRollout},20386:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(33584),a=n(97935);var s={getDeferredMessages:function(){return(0,o.getTable)().all().then((e=>e.map((e=>({id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo})))))},updateDeferredMessages:function(e){const t=e.map((e=>({id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo})));return(0,a.getStorage)().lock(["deferred_messages"],function(){var e=(0,i.default)((function*(e){let[n]=e;yield n.bulkCreateOrReplace(t)}));return function(){return e.apply(this,arguments)}}())},deleteDeferredMessage:function(e){return(0,o.getTable)().remove(e)},clearDeferredMessages:function(){return(0,o.getTable)().clear()}};t.default=s},72236:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearLocalStorage=function(){return(0,o.getTable)().clear()},t.getLocalStorage=function(){return(0,o.getTable)().all().then((e=>e.map((e=>({key:e.key,value:e.value})))))},t.getLocalStorageValue=function(e){return(0,o.getTable)().get(e).then((e=>null==e?void 0:e.value))},t.updateLocalStorage=function(e){const t=e.map((e=>({key:e.key,value:e.value})));return(0,a.getStorage)().lock(["local_storage"],function(){var e=(0,i.default)((function*(e){let[n]=e;yield n.clear(),yield n.bulkCreateOrReplace(t)}));return function(){return e.apply(this,arguments)}}())};var i=r(n(48926)),o=n(88604),a=n(97935)},33584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("deferred_messages").version((0,a.deferredMessagesStorageCreateTable)(),[u("id"),s("type"),l("plaintext",i.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),s("info"),s("paymentInfo"),s("bizInfo")]).view((e=>({id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo}))).useDbMsgEncKeyForEncryptedCol(!0)},t.getTable=function(){return(0,o.getStorage)().table("deferred_messages")};var r=n(65717),i=n(8065),o=n(97935),a=n(78366);const{addColumn:s,addEncryptedColumn:l,addUserDefinedPrimaryKey:u}=(0,r.columnBuilder)()},88604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("local_storage").version((0,o.localStorageCreateTable)(),[s("key"),a("value")]).view((e=>({key:e.key,value:e.value})))},t.getTable=function(){return(0,i.getStorage)().table("local_storage")};var r=n(65717),i=n(97935),o=n(78366);const{addColumn:a,addUserDefinedPrimaryKey:s}=(0,r.columnBuilder)()},20692:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){if((0,u.isSyncdDisabled)())return Promise.resolve();return function(){const e=(0,a.default)(s.reportWam,6e4,{maxWait:18e4});c.Cmd.on(c.APP_STATE_SYNC_COMPLETED,e)}(),(0,d.waitForOfflineDeliveryEnd)().then((()=>{(0,s.processOnAppResume)()})),A(),(0,s.initializeStateMachine)()},t.lockForSync=function(e,t,n){const r=(0,p.getStorage)().lock([...e,...h],(e=>Promise.all([(0,_.appendPendingMutationsRows)(t),n(e)]))).then((()=>{const e=t.map((e=>e.collection));(0,s.markCollectionsForSync)(e)}));return Promise.resolve(r)},t.sanitizeActionInSyncActionsRow=A;var i=r(n(81109)),o=r(n(48926)),a=r(n(23279)),s=n(75619),l=n(71903),u=n(99205),c=n(46316),d=n(74700),p=n(74557),f=n(62792),_=n(19294),g=n(35878);const h=["pending-mutations"];function A(){return m.apply(this,arguments)}function m(){return(m=(0,o.default)((function*(){if(!(yield(0,g.getMdSyncActionsActionSanitized)())){__LOG__(2)`syncd: sanitizing null 'action' property in sync-actions table`;const e=(yield(0,f.getSyncActionsTable)().all()).filter((e=>null==e.action)).map((e=>{const t=JSON.parse(e.index)[0];return l.Actions.cast(t)?(0,i.default)((0,i.default)({},e),{},{action:t}):(__LOG__(2)`syncd: invalid action ${t}`,(0,i.default)({},e))}));yield(0,_.updateSyncActionRows)(e),yield(0,g.setMdSyncActionsActionSanitized)(!0)}}))).apply(this,arguments)}},19294:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.appendPendingMutationsRows=function(e){return(0,d.getPendingMutationsTable)().bulkCreate(e)},t.bulkGetMissingKeys=function(e){return(0,c.getMissingKeysTable)().bulkGet(e).then((e=>e.map((e=>null==e?null:(0,c.convertToMissingKeyFromRow)(e)))))},t.bulkRemoveMissingKeys=function(e){return(0,c.getMissingKeysTable)().bulkRemove(e)},t.bulkRemovePendingMutations=function(e){return(0,d.getPendingMutationsTable)().bulkRemove(e)},t.createOrUpdateMissingKeys=function(e){return(0,c.getMissingKeysTable)().bulkCreateOrMerge(e.map(c.convertFromMissingKeyToRow))},t.createSyncKey=function(e){return(0,f.getSyncKeysTable)().create((0,f.convertFromSyncKeyToRow)(e)).then((e=>(0,s.toSyncKeyId)(e.buffer)))},t.deleteSyncActionRows=function(e){return(0,p.getSyncActionsTable)().bulkRemove(e)},t.expireSyncKey=function(){return S.apply(this,arguments)},t.getAllCollectionLtHashes=function(){return E.apply(this,arguments)},t.getAllMissingKeys=function(){return(0,c.getMissingKeysTable)().all().then((e=>e.map(c.convertToMissingKeyFromRow)))},t.getAllPendingMutationsRows=function(){return(0,d.getPendingMutationsTable)().all()},t.getAllSyncKeys=function(){return(0,f.getSyncKeysTable)().all().then((e=>e.map(f.convertToSyncKeyFromRow)))},t.getCollectionVersion=function(){return h.apply(this,arguments)},t.getCollectionVersions=function(){return A.apply(this,arguments)},t.getLtHash=function(){return m.apply(this,arguments)},t.getMissingKey=function(){return v.apply(this,arguments)},t.getMissingKeyCount=function(){return(0,c.getMissingKeysTable)().count()},t.getPendingMutationsRows=function(e,t){return(0,d.getPendingMutationsTable)().equals(e,t)},t.getPendingMutationsRowsById=function(){return g.apply(this,arguments)},t.getPendingMutationsRowsByIndex=function(e,t){return(0,d.getPendingMutationsTable)().equals(e,t)},t.getSyncAction=function(e){return(0,p.getSyncActionsTable)().get(e)},t.getSyncActionsRows=function(e,t){return(0,p.getSyncActionsTable)().anyOf(e,t)},t.getSyncKey=function(){return y.apply(this,arguments)},t.hasPendingMutationForCollection=function(e){return(0,d.getPendingMutationsTable)().equals(["collection"],e).then((e=>e.length>0))},t.performTransaction=function(e){return(0,l.getStorage)().lock(["collection-version","pending-mutations","sync-actions"],e)},t.setCollectionVersion=function(e,t,n){return(0,u.getCollectionVersionTable)().createOrMerge(e,{collection:e,version:t,ltHash:n})},t.setSyncAction=function(e){return(0,p.getSyncActionsTable)().createOrReplace(e)},t.setSyncActionRows=function(e){return(0,p.getSyncActionsTable)().bulkCreateOrReplace(e)},t.updateSyncActionRows=function(e){return(0,p.getSyncActionsTable)().bulkCreateOrMerge(e.map((e=>(0,i.default)({},e))))};var i=r(n(81109)),o=r(n(48926)),a=n(17242),s=(n(91205),n(93189)),l=n(74557),u=n(39618),c=n(45232),d=n(9920),p=n(62792),f=n(9419);n(33655);const _=new ArrayBuffer(a.KEY_LENGTH_BYTES);function g(){return(g=(0,o.default)((function*(e){return(yield(0,d.getPendingMutationsTable)().bulkGet(e)).filter(Boolean)}))).apply(this,arguments)}function h(){return(h=(0,o.default)((function*(e){const t=yield(0,u.getCollectionVersionTable)().get(e);return null==t?void 0:t.version}))).apply(this,arguments)}function A(){return(A=(0,o.default)((function*(e){const t=yield(0,u.getCollectionVersionTable)().bulkGet(e);return new Map(e.map(((e,n)=>{var r;return[e,null===(r=t[n])||void 0===r?void 0:r.version]})))}))).apply(this,arguments)}function m(){return(m=(0,o.default)((function*(e){const t=yield(0,u.getCollectionVersionTable)().get(e);return(null==t?void 0:t.ltHash)||_}))).apply(this,arguments)}function E(){return(E=(0,o.default)((function*(){return(yield(0,u.getCollectionVersionTable)().all()).map((e=>({collection:e.collection,ltHash:e.ltHash})))}))).apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e){const t=yield(0,f.getSyncKeysTable)().get(new Uint8Array((0,s.fromSyncKeyId)(e)));return null==t?t:(0,f.convertToSyncKeyFromRow)(t)}))).apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e){(yield(0,f.getSyncKeysTable)().equals(["keyEpoch"],e)).forEach((e=>(0,f.getSyncKeysTable)().merge({keyId:e.keyId},{timestamp:0})))}))).apply(this,arguments)}function v(){return(v=(0,o.default)((function*(e){const t=yield(0,c.getMissingKeysTable)().get(e);return null==t?t:(0,c.convertToMissingKeyFromRow)(t)}))).apply(this,arguments)}},29323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectionNameToMetric=u,t.constructMsgKeySegments=function(e){return s(e.id)},t.constructStarMsgKeyFromMsgKey=function(e){return(0,r.buildIndex)(i.Actions.Star,s(e))},t.extractParticipantForSync=l,t.uploadCriticalEventMetric=function(e,t){const n=new o.MdCriticalEventWamEvent({mdCriticalEventCode:e});null!=t&&(n.collection=u(t));n.commit()};var r=n(59454),i=n(71903),o=n(53868),a=n(35126);function s(e){const t=l(e);return[e.remote.toString({legacy:!0}),e.id,e.fromMe?"1":"0",t]}function l(e){let t="0";return!e.participant||e.remote.isUser()||e.fromMe||(t=e.participant.toString({legacy:!0})),t}function u(e){switch(e){case i.CollectionName.CriticalBlock:return a.COLLECTION.CRITICAL_BLOCK;case i.CollectionName.CriticalUnblockLow:return a.COLLECTION.CRITICAL_UNBLOCK_LOW;case i.CollectionName.Regular:return a.COLLECTION.REGULAR;case i.CollectionName.RegularHigh:return a.COLLECTION.REGULAR_HIGH;case i.CollectionName.RegularLow:return a.COLLECTION.REGULAR_LOW}}},2107:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(91866),a=n(4348),s=n(59454),l=n(71903),u=n(29987),c=n(25303),d=n(20692),p=n(46486);class f extends a.SyncActionBase{getVersion(){return 7}getAction(){return l.Actions.Nux}applyMutations(e){return(0,i.default)((function*(){const t=[],n=e.map((e=>{var n;if("set"!==e.operation)return __LOG__(3)`NuxSync: operation not supported ${e}`,{actionState:l.SyncActionState.Malformed};const r=e.indexParts[1];return(0,c.isString)(r)?(t.push({nuxKey:r,acknowledged:!0===(null===(n=e.value.nuxAction)||void 0===n?void 0:n.acknowledged)}),{actionState:l.SyncActionState.Success}):(__LOG__(3)`NuxSync: malformed mutation ${e}`,{actionState:l.SyncActionState.Malformed})}));return 0!==t.length&&(__LOG__(2)`NuxSync: update nux to local store`,(0,p.updateNuxSyncList)(t)),n}))()}_createNuxMutation(e,t,n){return(0,s.buildPendingMutation)({collection:l.CollectionName.RegularLow,indexArgs:[e],value:{nuxAction:{acknowledged:n}},version:this.getVersion(),operation:o.SyncdMutation$SyncdOperation.SET,timestamp:t,action:this.getAction()})}acknowledgeNux(e){var t=this;return(0,i.default)((function*(){yield t._changeNuxState(e,!0)}))()}unAcknowledgeNux(e){var t=this;return(0,i.default)((function*(){yield t._changeNuxState(e,!1)}))()}_changeNuxState(e,t){var n=this;return(0,i.default)((function*(){(0,p.updateNuxSyncList)([{nuxKey:e,acknowledged:t}]);const r=n._createNuxMutation(e,(0,u.unixTimeMs)(),t);yield(0,d.lockForSync)([],[r],(()=>Promise.resolve()))}))()}}var _=new f;t.default=_},82074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeMillisecondsToSeconds=function(e){let t=e;try{(0,r.numberOrThrowIfTooLarge)(e)/(0,i.unixTime)()>10?(t=(0,r.numberOrThrowIfTooLarge)(e)/1e3,__LOG__(2)`syncd: maybeMillisecondsToSeconds: adjusting future timestamp`):__LOG__(2)`syncd: maybeMillisecondsToSeconds: no need to adjust timestamp`}catch(t){__LOG__(3)`syncd: maybeMillisecondsToSeconds: messageTimestamp: ${e} too large to cast`}return t};var r=n(22101),i=n(29987)},70118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAndRemoveActiveMessageRanges=function(e,t){(0,i.getActiveMessageRanges)(e.remote.toString()).then((n=>{n.forEach((n=>{if([a.ActiveRangeAction.Archive,a.ActiveRangeAction.MarkChatAsRead].includes(n.action)&&l(n.actionValue.messageRange,{id:e,t})===o.RangeContain.DOES_NOT_CONTAIN)return(0,i.removeActiveMessageRange)(e.remote.toString(),n.action)}))}))},t.rangeContainsMessage=l;var r=n(22101),i=n(4339),o=n(20919),a=n(45781),s=n(82074);function l(e,t){if(null==e)return __LOG__(3)`syncd: missing message range from row.`,o.RangeContain.DOES_NOT_CONTAIN;const{messages:n,lastMessageTimestamp:i}=e,a=(0,s.maybeMillisecondsToSeconds)(null!=i?i:0);if(a!==(null!=i?i:0)&&(__LOG__(2,void 0,void 0,!0)`syncd: last message timestamp was converted to seconds from ${i}`,SEND_LOGS("syncd: last message timestamp was converted to seconds",.1)),null!=t.t&&t.t<(0,r.numberOrThrowIfTooLarge)(a))return o.RangeContain.CONTAINS_BY_TIMESTAMP;const l=t.id;for(const{key:e}of n)if(null!=e&&null!=l&&e.id===l.id)return o.RangeContain.CONTAINS_BY_ADDITIONAL;return o.RangeContain.DOES_NOT_CONTAIN}},53952:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleForActiveMessageRange=T,t.handleOfflineForMessageRange=function(){return P.apply(this,arguments)};var i=r(n(48926)),o=n(91205),a=n(70118),s=n(21193),l=n(4339),u=n(20919),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(52829)),d=n(73602),p=n(45781),f=n(19294),_=n(29323),g=n(51017),h=n(33655);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}const m=new Set,E=e=>e.reduce(((e,t)=>new Set([...Array.from(e),...Array.from(t)])),new Set);function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e,t,n){let r=null;switch(e.action){case p.ActiveRangeAction.Archive:return e.actionValue.archived?yield c.handleForArchive(e,n):yield c.handleForUnarchive(e,n),m;case p.ActiveRangeAction.MarkChatAsRead:return yield c.handleForMarkAsReadUnread(e,n,!!e.actionValue.read),m;case p.ActiveRangeAction.ClearChatDeleteStarredDeleteMedia:case p.ActiveRangeAction.ClearChatDeleteStarredKeepMedia:return r=c.handleForClearChat(e,n),r?new Set([r]):m;case p.ActiveRangeAction.ClearChatKeepStarredDeleteMedia:case p.ActiveRangeAction.ClearChatKeepStarredKeepMedia:return(yield v(t.id))?m:(r=c.handleForClearChat(e,n),r?new Set([r]):m);case p.ActiveRangeAction.DeleteChatDeleteMedia:case p.ActiveRangeAction.DeleteChatKeepMedia:return r=c.handleForDeleteChat(e,n),r?new Set([r]):m}return __LOG__(3)`handleMessageContainment called with unknwon message range action action: ${e.action}`,m}))).apply(this,arguments)}function v(){return I.apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){const t=(0,_.constructStarMsgKeyFromMsgKey)(e),n=yield(0,f.getSyncAction)(t);if(n){var r;const e=(0,h.decodeProtobuf)(o.SyncActionDataSpec,n.binarySyncData).value;return(null==e||null===(r=e.starAction)||void 0===r?void 0:r.starred)||!1}return!1}))).apply(this,arguments)}function T(){return b.apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e,t){if(d.SYSTEM_MESSAGE_TYPES.includes(t.type))return m;const n=(yield(0,l.getActiveMessageRanges)(e.toString())).map((e=>[e,(0,a.rangeContainsMessage)(e.actionValue.messageRange,t)])),r=n.filter((e=>{let[,t]=e;return t===u.RangeContain.CONTAINS_BY_ADDITIONAL})).map((e=>{let[t]=e;return t}));r.forEach((e=>{e.remainingMessages--})),yield(0,l.bulkUpdateActiveMessageRanges)(r);const i=n.map((e=>{let[n,r]=e;return y(n,t,r)})),o=yield Promise.all(i);return E(o)}))).apply(this,arguments)}function M(e){return!!(0,s.isUnifiedInfraEnabledForType)(e.type)||("reaction"===e.type||"poll_update"===e.type)}function P(){return(P=(0,i.default)((function*(e){const t=new Map;e.forEach((e=>{if(d.SYSTEM_MESSAGE_TYPES.includes(e.type)||M(e))return;const n=t.get(e.id.remote.toString());(null==n||n.t<e.t)&&t.set(e.id.remote.toString(),e)})),yield Promise.all(Array.from(t.entries()).map((e=>{let[t,n]=e;return T((0,g.createWid)(t),n)})))}))).apply(this,arguments)}},20919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RangeContain=t.ActiveRangeHandlerAction=void 0;const r=n(76672).Mirrored(["DropMessage","SkipUI"]);t.ActiveRangeHandlerAction=r;const i=n(76672).Mirrored(["DOES_NOT_CONTAIN","CONTAINS_BY_TIMESTAMP","CONTAINS_BY_ADDITIONAL"]);t.RangeContain=i},52829:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleForArchive=function(){return d.apply(this,arguments)},t.handleForClearChat=function(e,t){switch(t){case l.RangeContain.CONTAINS_BY_TIMESTAMP:case l.RangeContain.CONTAINS_BY_ADDITIONAL:return l.ActiveRangeHandlerAction.DropMessage;case l.RangeContain.DOES_NOT_CONTAIN:}},t.handleForDeleteChat=function(e,t){switch(t){case l.RangeContain.CONTAINS_BY_TIMESTAMP:case l.RangeContain.CONTAINS_BY_ADDITIONAL:return l.ActiveRangeHandlerAction.DropMessage;case l.RangeContain.DOES_NOT_CONTAIN:}},t.handleForMarkAsReadUnread=function(){return f.apply(this,arguments)},t.handleForUnarchive=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(4339),a=n(1619),s=n(96536),l=n(20919),u=n(56333),c=n(51017);function d(){return(d=(0,i.default)((function*(e,t){if(t===l.RangeContain.DOES_NOT_CONTAIN){const t=yield(0,u.getArchiveV2EnabledSetting)(),n=yield(0,u.getUnarchiveChatsSetting)();t&&!n||(0,s.setArchive)([{id:e.chatId,archive:!1}]),yield(0,o.removeActiveMessageRange)(e.chatId,e.action)}}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e,t){t!==l.RangeContain.DOES_NOT_CONTAIN&&0!==e.remainingMessages||(yield(0,o.removeActiveMessageRange)(e.chatId,e.action))}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t,n){t===l.RangeContain.DOES_NOT_CONTAIN?yield(0,o.removeActiveMessageRange)(e.chatId,e.action):0===e.remainingMessages&&((0,a.frontendFireAndForget)("updateChatReadStatus",{id:(0,c.createWid)(e.chatId),read:n}),yield(0,o.removeActiveMessageRange)(e.chatId,e.action))}))).apply(this,arguments)}},81232:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TosManager=t.TOS_3_ID=void 0;var o=i(n(48926)),a=n(66911),s=n(5865),l=n(55068),u=n(91563),c=n(56660),d=n(63007),p=n(97007),f=n(46316),_=i(n(7880)),g=n(76673),h=n(88504),A=n(73850),m=n(59356),E=n(3885),y=i(n(61112));const S="20210210";t.TOS_3_ID=S;class v extends((0,a.customError)("UnknownUserNoticeIdError")){constructor(e){super(`Unknown user notice id: ${e}`)}}const I={minTimeout:1e3,maxTimeout:16e3,retries:5,signal:(new r).signal};class T extends _.default{constructor(){super(...arguments),this._disclosureNoticeIds=[],this.botTosFetched=!1,this._refreshInterval=1e3*A.DEFAULT_TOS_REFRESH_INTERVAL}_getTosNoticeIds(){const e=[];return(0,c.tosFetchEnabled)()&&e.push(S),(0,d.isBotEnabled)()&&(this.botTosFetched=!0,e.push(p.BOT_AGENT_TOS_ID,p.BOT_INVOKE_TOS_ID),(0,d.isBotChatListEntryPointEnabled)()&&e.push(p.BOT_SHORTCUT_TOS_ID)),((0,d.isBizBot1pEnabled)()||(0,d.isBizBot3pEnabled)())&&e.push(p.BIZ_BOT_TOS_ID),e}_getAllNoticeIds(){return this._getTosNoticeIds().concat(this._disclosureNoticeIds)}_addDisclosureNoticeIds(e){const t=new Set(this._disclosureNoticeIds.concat(e));this._disclosureNoticeIds=Array.from(t)}getState(e){try{const t=this._getStoreKey(e),n=y.default.getUser(t);return"string"!=typeof n||"UNKNOWN"!==n&&"NOT_ACCEPTED"!==n&&"ACCEPTED"!==n?"UNKNOWN":n}catch(t){return t instanceof v||(__LOG__(4,void 0,new Error,!0,["tos-manager"])`Unexpected error when getting notice id state: ${e}`,SEND_LOGS("Unexpected error when getting notice id state",1,"tos-manager")),"UNKNOWN"}}setState(e,t){this._disclosureNoticeIds.includes(e)||b()&&this._getTosNoticeIds().includes(e)?(y.default.setUser(this._getStoreKey(e),t),this.trigger("change")):__LOG__(3)`ToS state manager unrecognized user notice id: ${e}`}run(e){var t=this;return(0,o.default)((function*(){if(b()||(0,h.isNewsletterEnabled)()){try{yield(0,s.exponentialBackoff)(I,((e,n)=>t._query().catch((t=>{if(t instanceof u.ServerStatusCodeError)switch(t.statusCode){case 500:return __LOG__(3)`ToS state manager query failed, retriable error: ${t.message}, failCount ${n}`,e(t)}throw t}))))}catch(e){if(__LOG__(4,!0,new Error,!0)`ToS state manager state pull failed, error: ${e}`,SEND_LOGS("ToS state manager run failed"),!(e instanceof u.ServerStatusCodeError&&500===e.statusCode))return}if(!0!==(null==e?void 0:e.singleRun)&&t._getNoticeIdsToRun(t._getAllNoticeIds()).length>0){const e=(0,E.getMaybeMeUser)();yield(0,l.delayMs)(t._refreshInterval),(0,E.getMaybeMeUser)()===e&&t.run()}}}))()}_query(){var e=this;return(0,o.default)((function*(){if(!(0,E.getMaybeMeUser)())return;const[t,n]=yield Promise.all([e._tosQuery(),e._disclosuresQuery()]);e._refreshInterval=1e3*Math.min(t.refresh,n.refresh);const r=t.notice.concat(n.notice),i=new Set(e._getAllNoticeIds());let o=!1;r.filter((e=>i.has(e.id))).forEach((t=>{const n=t.state?"ACCEPTED":"NOT_ACCEPTED",r=e._getStoreKey(t.id);y.default.getUser(r)!==n&&(y.default.setUser(r,n),o=!0)})),y.default.setUser(m.KEYS.TOS_STATE_FETCH_ITERATION,(0,c.tosFetchIteration)()),o&&e.trigger("change")}))()}_getEmptyTosNoticeData(){return{refresh:A.DEFAULT_TOS_REFRESH_INTERVAL,notice:[]}}_tosQuery(){if(!b())return Promise.resolve(this._getEmptyTosNoticeData());const e=this._getNoticeIdsToRun(this._getTosNoticeIds());return e.length>0?(0,A.queryTosState)(e):Promise.resolve(this._getEmptyTosNoticeData())}_disclosuresQuery(){return(0,h.isNewsletterEnabled)()&&this.populateTosManagerNewsletterIds(),0===this._disclosureNoticeIds.length?Promise.resolve(this._getEmptyTosNoticeData()):(0,g.getUserDisclosuresAction)()}_getNoticeIdsToRun(e){const t=parseInt(y.default.getUser(m.KEYS.TOS_STATE_FETCH_ITERATION),10)||0;if((0,c.tosFetchIteration)()>t)return e;const n=e.map((e=>this.getState(e)));return e.filter(((e,t)=>"ACCEPTED"!==n[t]))}_getStoreKey(e){if(new Set(this._getAllNoticeIds()).has(e))return`TOS_STATE_${e}`;throw new v(e)}maybeUpdateServer(e){var t=this;return(0,o.default)((function*(){if(b())try{const n=new Set(e);yield(0,s.exponentialBackoff)(I,((e,r)=>{const i=t._getAcceptedNoticeIds(n);return i.length>0?(0,A.updateTosState)(i).catch((t=>{if(t instanceof u.ServerStatusCodeError&&500===t.statusCode)return __LOG__(3)`ToS state manager server session state update failed, retriable error: ${t.message}, failCount ${r}`,e(t);throw t})):Promise.resolve()}))}catch(e){__LOG__(4,!0,new Error,!0)`ToS state manager server session state update failed, error: ${e}`,SEND_LOGS("ToS state manager server session state update failed")}}))()}_getAcceptedNoticeIds(e){if((0,E.getMaybeMeUser)()){const t=this._getTosNoticeIds().map((e=>this.getState(e)));return this._getTosNoticeIds().filter(((n,r)=>"ACCEPTED"===t[r]&&e.has(n)))}return[]}resetAllState(){this._getAllNoticeIds().forEach((e=>{y.default.setUser(this._getStoreKey(e),void 0)})),(0,A.deleteTosState)(S)}resetState(e){y.default.setUser(this._getStoreKey(e),void 0),(0,A.deleteTosState)(e)}populateTosManagerNewsletterIds(){this._addDisclosureNoticeIds([(0,h.getNewsletterConsumerTos)(),(0,h.getNewsletterProducerTos)(),(0,h.getNewsletterAdminInviteTos)()])}}function b(){return(0,c.tosFetchEnabled)()||(0,d.isBizBot1pEnabled)()||(0,d.isBizBot3pEnabled)()}const M=new T;t.TosManager=M,f.Cmd.on("bot_waitlist_state_updated",(()=>{(0,d.isBotEnabled)()&&!0!==M.botTosFetched&&M.run()}))},30633:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USyncQuery=void 0;var i=r(n(48926)),o=n(82749),a=n(42811),s=r(n(82601)),l=n(11439),u=n(15610),c=n(42710),d=n(54760),p=n(93260),f=n(79504),_=n(49055),g=n(42674),h=n(21287),A=n(88648),m=n(77409),E=n(2927),y=n(95944),S=n(45887),v=r(n(27112)),I=r(n(89482));const T={FEATURE:"feature",DEVICE:"devices",CONTACT:"contact",PICTURE:"picture",STATUS:"status",BUSINESS:"business",DISAPPEARING_MODE:"disappearing_mode",LID:"lid",BOT:"bot",USERNAME:"username",TEXT_STATUS:"text_status"},b={feature:h.featureParser,devices:_.deviceParser,contact:f.contactParser,picture:m.pictureParser,status:E.statusParser,business:p.businessParser,disappearing_mode:g.disappearingModeParser,lid:A.lidParser,bot:d.botProfileParser,username:S.usernameParser,text_status:y.textStatusParser};function M(e){const t=[];return e.forEachChildWithTag("user",(e=>{const n={};e.hasAttr("jid")&&(Object.keys(T).forEach((t=>{const r=T[t],i=e.maybeChild(r);i&&b[r]&&(n[r]=b[r](i))})),n.id=(0,u.deviceJidToUserWid)(e.attrDeviceJid("jid")),t.push(n))})),t}const P=new s.default("usyncParser",(e=>{e.assertAttr("type","result");const t={error:{},refresh:{},list:[],sideList:[]},n=e.child("usync"),r=n.child("result"),i=n.child("list"),o=n.maybeChild("side_list");return Object.keys(T).forEach((e=>{const n=T[e],i=r.maybeChild(n);if(i){const e=i.maybeChild("error");e?t.error[n]={errorCode:e.attrInt("code"),errorText:e.attrString("text"),errorBackoff:e.attrInt("backoff")}:i.hasAttr("refresh")&&(t.refresh[n]=i.attrInt("refresh",0))}})),t.list=M(i),o&&(t.sideList=M(o)),__LOG__(2)`usync query success!`,t}));t.USyncQuery=class{constructor(){this.context="interactive",this.mode="query",this.protocols=[],this.users=[]}withMode(e){return this.mode=e,this}withContext(e){return this.context=e,this}withContactProtocol(){return this.protocols.push(new f.USyncContactProtocol),this}withBusinessProtocol(){return this.protocols.push(new p.USyncBusinessProtocol),this}withDeviceProtocol(){return this.protocols.push(new _.USyncDeviceProtocol),this}withDisappearingModeProtocol(){return this.protocols.push(new g.USyncDisappearingModeProtocol),this}withPictureProtocol(){return this.protocols.push(new m.USyncPictureProtocol),this}withStatusProtocol(){return this.protocols.push(new E.USyncStatusProtocol),this}withTextStatusProtocol(){return this.protocols.push(new y.USyncTextStatusProtocol),this}withFeaturesProtocol(e){return this.protocols.push(new h.USyncFeaturesProtocol(e)),this}withLidProtocol(){return this.protocols.push(new A.USyncLidProtocol),this}withBotProfileProtocol(){return this.protocols.push(new d.USyncBotProfileProtocol),this}withUser(e){return this.users.push(e),this}withUsernameProtocol(){return this.protocols.push(new S.USyncUsernameProtocol),this}_buildStanza(){if(0===this.protocols.length)throw(0,I.default)("a usync query must have at least one protocol");const e=this.users.filter((e=>{const t=e.getId();return(!t||!v.default.isServer(t))&&e.validate()}));0===e.length&&__LOG__(3)`Usync warning: a usync query must have at least one user`;const t=(0,a.wap)("query",null,this.protocols.map((e=>e.getQueryElement()))),n=e.map((e=>{const t=e.getId();return(0,a.wap)("user",{jid:t?(0,l.USER_JID)(t):a.DROP_ATTR},this.protocols.map((t=>t.getUserElement(e))))})),r=(0,a.wap)("list",null,n);return(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"usync",type:"get",id:(0,a.generateId)()},(0,a.wap)("usync",{sid:(0,a.generateId)(),index:"0",last:"true",mode:(0,a.CUSTOM_STRING)(this.mode),context:(0,a.CUSTOM_STRING)(this.context)},t,r))}execute(){var e=this;return(0,i.default)((function*(){const t=e._buildStanza();yield(0,c.waitForBackoff)(e);const n=yield(0,o.deprecatedSendIq)(t,P);return n.success?(r=n.result,Object.values(T).forEach((e=>{const t=r.error[e];null!=t&&null!=t.errorBackoff&&(0,c.setProtocolBackoffMs)(e,1e3*t.errorBackoff)})),n.result):{error:{all:{errorCode:n.errorCode,errorText:n.errorText,errorType:n.errorType}},refresh:{},list:[]};var r}))()}}},42710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setProtocolBackoffMs=function(e,t){__LOG__(2)`usync: ${e} protocol: ${t}ms backoff started`,n.set(e,new Promise((e=>self.setTimeout(e,t))).then((()=>{__LOG__(2)`usync: ${e} protocol: ${t}ms backoff ended`})))},t.waitForBackoff=function(e){if(!function(e){if("interactive"===e.context)return!1;if(e.protocols.map((e=>e.getName())).includes("devices")&&("message"===e.context||"voip"===e.context))return!1;return!0}(e))return Promise.resolve();return Promise.all(e.protocols.map((e=>n.get(e.getName()))))};const n=new Map},93260:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USyncBusinessProtocol=void 0,t.businessParser=function(e){e.assertTag("business");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};const n=e.maybeChild("verified_name");return{verifiedName:n?(0,o.default)(n):null}};var i=n(42811),o=r(n(2718));t.USyncBusinessProtocol=class{getName(){return"business"}getQueryElement(){return(0,i.wap)("business",null,(0,i.wap)("verified_name",null))}getUserElement(){return null}}},79504:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncContactProtocol=void 0,t.contactParser=function(e){e.assertTag("contact");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};const n={type:e.attrString("type")};e.hasAttr("username")&&(n.username=e.attrString("username"));return n};var r=n(42811);t.USyncContactProtocol=class{getName(){return"contact"}getQueryElement(){return(0,r.wap)("contact",null)}getUserElement(e){const t=e.getPhone(),n=e.getUsername(),i=e.getType();return null!=t?(0,r.wap)("contact",null,t):null!=n?(0,r.wap)("contact",{username:(0,r.CUSTOM_STRING)(n)}):null!=i?(0,r.wap)("contact",{type:(0,r.CUSTOM_STRING)(i)}):null}}},49055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncDeviceProtocol=void 0,t.deviceParser=function(e){e.assertTag("devices");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};const n=e.maybeChild("key-index-list"),r=e.maybeChild("device-list"),o=null==n?null:{ts:n.attrTime("ts"),signedKeyIndexBytes:n.hasContent()?n.contentBytes():null,expectedTs:n.hasAttr("expected_ts")?n.attrTime("expected_ts"):void 0};return{deviceList:null==r?void 0:r.mapChildrenWithTag("device",(e=>{const t={id:e.attrInt("id"),keyIndex:e.hasAttr("key-index")?e.attrInt("key-index"):null};return(0,i.bizHostedDevicesEnabled)()&&e.hasAttr("is_hosted")&&"true"===e.attrString("is_hosted")&&(t.isHosted=!0),t})),keyIndex:o}};var r=n(42811),i=n(41404);t.USyncDeviceProtocol=class{getName(){return"devices"}getQueryElement(){return(0,r.wap)("devices",{version:(0,r.CUSTOM_STRING)(String(2))})}getUserElement(e){const t=e.getDeviceHash(),n=e.getTs(),i=e.getExpectedTs();return t||null!=n||null!=i?(0,r.wap)("devices",{device_hash:t?(0,r.CUSTOM_STRING)(t):r.DROP_ATTR,ts:null!=n?(0,r.INT)(n):r.DROP_ATTR,expected_ts:null!=i?(0,r.INT)(i):r.DROP_ATTR}):null}}},42674:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncDisappearingModeProtocol=void 0,t.disappearingModeParser=function(e){e.assertTag("disappearing_mode");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};const n=e.attrInt("duration",0),r=e.attrInt("t");return{duration:n,t:r}};var r=n(42811);t.USyncDisappearingModeProtocol=class{getName(){return"disappearing_mode"}getQueryElement(){return(0,r.wap)("disappearing_mode",null)}getUserElement(){return null}}},21287:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USyncFeaturesProtocol=void 0,t.featureParser=function(e){e.assertTag("feature");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};const n={};return Object.keys(a).forEach((t=>{const r=e.maybeChild(t);r&&(n[t]=r.attrString("value"))})),n};var i=n(42811),o=r(n(89482));const a={document:(0,i.wap)("document",null),encrypt:(0,i.wap)("encrypt",null),encrypt_blist:(0,i.wap)("encrypt_blist",null),encrypt_contact:(0,i.wap)("encrypt_contact",null),encrypt_group_gen2:(0,i.wap)("encrypt_group_gen2",null),encrypt_image:(0,i.wap)("encrypt_image",null),encrypt_location:(0,i.wap)("encrypt_location",null),encrypt_url:(0,i.wap)("encrypt_url",null),encrypt_v2:(0,i.wap)("encrypt_v2",null),voip:(0,i.wap)("voip",null),multi_agent:(0,i.wap)("multi_agent",null)};t.USyncFeaturesProtocol=class{getName(){return"picture"}constructor(e){if(this.queries=e,0===e.length)throw(0,o.default)("must specify at least one query")}getQueryElement(){return(0,i.wap)("feature",null,this.queries&&this.queries.map((e=>a[e])))}getUserElement(){return null}}},88648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncLidProtocol=void 0,t.lidParser=function(e){e.assertTag("lid");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};return e.maybeAttrLidUserJid("val")};var r=n(42811),i=n(11439);t.USyncLidProtocol=class{getName(){return"lid"}getQueryElement(){return(0,r.wap)("lid",null)}getUserElement(e){const t=e.getLid();return t?(0,r.wap)("lid",{jid:t?(0,i.USER_JID)(t):r.DROP_ATTR}):null}}},77409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncPictureProtocol=void 0,t.pictureParser=function(e){e.assertTag("picture");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};return{id:e.attrInt("id")}};var r=n(42811);t.USyncPictureProtocol=class{getName(){return"picture"}getQueryElement(){return(0,r.wap)("picture",null)}getUserElement(){return null}}},2927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncStatusProtocol=void 0,t.statusParser=function(e){e.assertTag("status");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};if(!e.hasContent())return e.hasAttr("code")&&401===e.attrInt("code")?"":null;return 0!==e.contentString().length?e.contentString():null};var r=n(42811);t.USyncStatusProtocol=class{getName(){return"status"}getQueryElement(){return(0,r.wap)("status",null)}getUserElement(){return null}}},95944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncTextStatusProtocol=void 0,t.textStatusParser=function(e){e.assertTag("text_status");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};const n=e.hasAttr("text")?e.attrString("text"):void 0,r=e.hasChild("emoji")?e.child("emoji"):void 0,i=(null==r?void 0:r.hasAttr("content"))?null==r?void 0:r.attrString("content"):void 0,o=e.hasAttr("ephemeral_duration_sec")?e.attrInt("ephemeral_duration_sec"):void 0,a=e.hasAttr("last_update_time")?e.attrString("last_update_time"):void 0;return{text:n,emoji:i,ephemeralDurationSeconds:o,lastUpdateTime:a}};var r=n(42811);t.USyncTextStatusProtocol=class{getName(){return"text_status"}getQueryElement(){return(0,r.wap)("text_status",null)}getUserElement(){return null}}},49673:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USyncUser=void 0;var i=n(41404),o=n(60050),a=r(n(89482));t.USyncUser=class{withId(e){return this._id=e,this}withLid(e){return this._lid=e,this}withDeviceHash(e){return this._deviceHash=e,this}withTs(e){return this._ts=e,this}withExpectedTs(e){return this._expectedTs=e,this}withPhone(e){return this._phone=e,this}withPersonaId(e){return this._personaId=e,this}withUsername(e){return this._username=e,this}withType(e){return this._type=e,this}getDeviceHash(){return this._deviceHash}getPhone(){return this._phone}getId(){return this._id}getLid(){return this._lid}getTs(){return this._ts}getExpectedTs(){return this._expectedTs}getPersonaId(){return this._personaId}getUsername(){return this._username}getType(){return this._type}validate(){const{_id:e,_phone:t,_username:n}=this;if(null==e&&null==t&&null==n)throw(0,a.default)("user must have an id, phone or a username");if(e){const t=(0,o.validateWid)(e.toString(),(0,i.bizHostedDevicesEnabled)());return t||__LOG__(3)`USync user created with invalid jid: ${e.toString()}`,t}return!0}}},45887:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncUsernameProtocol=void 0,t.usernameParser=function(e){e.assertTag("username");const t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};if(e.hasContent())return e.contentString();return null};var r=n(42811);t.USyncUsernameProtocol=class{getName(){return"username"}getQueryElement(){return(0,r.wap)("username",null)}getUserElement(){return null}}},8905:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.patchDexie=function(){i.default.Promise.PSD.onunhandled=()=>{},i.default.Promise.PSD.txRelaxedDurabilityEnabled=!0};var i=r(n(46808))},52030:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initializeGlobals=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(44037),a=n(72236),s=n(7184),l=n(47038),u=n(59356),c=r(n(89482));function d(){return(d=(0,i.default)((function*(){var e,t,n;const r=null!==(e=yield(0,a.getLocalStorageValue)("deviceJid"))&&void 0!==e?e:"",i=null!==(t=yield(0,a.getLocalStorageValue)("lidDeviceJid"))&&void 0!==t?t:"",c=p(r),d=(0,o.extractUserJid)(c),f=null!==(n=yield(0,a.getLocalStorageValue)(u.KEYS.ME_DISPLAY_NAME))&&void 0!==n?n:"";(0,s.setGlobals)({jidUtils:(0,o.createJidUtils)({platform:"whatsapp"}),myJids:{deviceJid:c,userJid:d},lidDeviceJid:i,displayName:f,config:{syncdDisabled:()=>!0},db:{},runInTransaction:l.runInTransaction})}))).apply(this,arguments)}function p(e){const t=(0,o.interpretAndValidateJid)(e);if("phoneDevice"!==t.jidType)throw(0,c.default)("Not a jid");return t.deviceJid}},57710:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(57610),a=n(1723),s=r(n(25566)),l=r(n(55595)),u=r(n(33583));function c(e,t,n){const{attrs:r}=e;if(r.offline){const e=parseInt(r.t,10),t=parseInt(r.offline,10);a.OfflineMessageHandler.newOfflineStanza(e,n,t)}const i=(0,o.handleWorkerCompatibleStanza)(e);if(null!=i)return i;switch(e.tag){case"ib":return(0,l.default)(e);case"failure":return(0,s.default)(e);case"success":return(0,u.default)(e)}}function d(){return(d=(0,i.default)((function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=yield Promise.resolve(c(e,0,n));return null!=r?r:"NO_ACK"}))).apply(this,arguments)}},32236:(e,t,n)=>{"use strict";var r=n(95318);t.Qq=function(){return L.apply(this,arguments)};var i=r(n(48926)),o=n(93042),a=n(66218),s=n(31859),l=n(78805),u=n(93963),c=n(1619),d=n(58715),p=n(42083),f=n(3450),_=n(34186),g=n(52030),h=n(12256),A=n(56457),m=n(43744),E=n(1723),y=n(74e3),S=n(4830),v=n(82572),I=n(53519),T=n(97023),b=n(65904),M=n(68231),P=n(92920),C=r(n(57710)),O=n(92005),R=n(61071);function N(e){return Promise.resolve((0,a.inflate)(e))}function w(e){__LOG__(2)`comms change: ${e}`,"connected"===e&&((0,o.startHandlingRequests)(),M.WorkerOfflineResumeReporter.logSocketConnect())}function D(e){__LOG__(2)`comms optimistic change: ${e}`}function L(){return(L=(0,i.default)((function*(){(0,f.registerCrashlogUploadIsUserInExternalBetaFunction)(T.getWhatsAppWebExternalBetaJoinedIdb),yield(0,g.initializeGlobals)(),(0,l.initializeABPropsCache)(),(0,_.initializeEventSamplingCache)(),(0,h.initOfflineResumeWaitForEvents)(),yield(0,u.updateABPropsFromStorage)(),yield(0,_.updateEventSamplingFromStorage)(),yield(0,S.enableMemSignalStore)(),yield(0,p.initChatThreadLogging)();const e=(0,d.makeBridge)();(0,c.setApi)(e),(0,O.attachHeadlessHandlers)(e);const t=yield(0,T.getLastMobilePlatform)();if(null==t)return __LOG__(4,void 0,new Error)`[worker] platform not found in UserPrefs.`,(0,v.socketLogout)(A.LogoutReason.UnknownCompanion);(0,f.registerCrashlogUploadInformationalLoggingFunction)((()=>({platform:t}))),(0,m.setMobilePlatform)(t),yield(0,y.startWebPersistedJobManager)(),E.OfflineMessageHandler.initState({createBlockingStageManager:()=>new R.OfflineWorkerResumeStageManager});const n=yield(0,P.getChatSocketPlatformDetails)(),r={healthCheckInterval:20,deadSocketTime:2e4,maxSocketLoopWaitTime:6e4,openChatSocket:e=>(0,s.openChatSocket)(n,e),shouldCloseStaleSocket:!0,shouldBlockReceivingUntilSuccess:!0,handlers:{onConnectionChange:w,onOptimisticConnectionChange:D},maxRetries:Number.MAX_SAFE_INTEGER};(0,b.markLoginStartT)(),(0,o.startComms)(C.default,r,N),yield(0,I.queryServerProps)()}))).apply(this,arguments)}},40704:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handlePushNotification=function(){return f.apply(this,arguments)},t.initializeDb=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(28123),a=n(57874),s=n(3792),l=n(25206),u=n(97023);function c(){return(c=(0,i.default)((function*(){try{yield(0,a.loadSchemaVersions)();const e=n(73804).initialize,t=n(13447).initialize,r=n(49814).j2,i=n(71752).initialize,o=n(33633).initialize;yield Promise.all([e(),t(),r(),i(),o()])}catch(e){__LOG__(4,void 0,new Error,!0)`[push-notification] Failed to initialize databases for push notification, error: ${e}`,SEND_LOGS("push-notification-db-init-error"),yield d()}}))).apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(){try{if(!1===(yield(0,s.getKillswitchValue)("wa_web/sw_killswitches:sw_push_unsubscribe_killswitch"))){var e,t,n,r,i;__LOG__(2)`[push-notification] Unsubscribe the sw push manager due to database failures`;!0===(yield null===(e=yield null===(n=self.registration)||void 0===n||null===(r=n.pushManager)||void 0===r||null===(i=r.getSubscription)||void 0===i?void 0:i.call(r))||void 0===e||null===(t=e.unsubscribe)||void 0===t?void 0:t.call(e))?__LOG__(2)`[push-notification] Successfully unsubscribed from push manager`:__LOG__(2)`[push-notification] Failed to unsubscribe from push manager`}}catch(e){__LOG__(4,void 0,new Error)`[push-notification] Failed to unsubscribe from push manager, error: ${e}`}}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){try{const[e,t,r]=yield Promise.all([h(),_(),(0,u.getOfflinePushDisabled)()]);if(!e||t||!0===r)return;const i=n(59355).Y;yield i();(0,n(32236).Qq)()}catch(e){__LOG__(4,void 0,new Error,!0)`[push-notification] Failed to start backend for push notification, error: ${e}`,SEND_LOGS("push-notification-init-error")}}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(){var e;const t=null!==(e=yield(0,u.getOfflinePushCount)())&&void 0!==e?e:0;return(0,u.setOfflinePushCount)(t+1),t>9&&(__LOG__(2)`[push-notification] Exceeded the offline push handling limit, do not start backend`,!0)}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){const e=yield(0,u.getAppVersionBase)();if(null==e)return!1;const t=new l.Version(e);return!new l.Version(o.VERSION_BASE).lt(t)||(__LOG__(4,void 0,new Error,!0)`Service worker (${o.VERSION_BASE}) version is less than main app (${t}) version`,SEND_LOGS("service-worker-lt-main-page-version"),!1)}))).apply(this,arguments)}},92920:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getChatSocketPlatformDetails=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=(n(62089),n(18445)),a=r(n(49619)),s=n(43548),l=n(74448),u=n(91548),c=n(56333),d=n(2866),p=n(69492),f=n(31971);const _="wss://web.whatsapp.com/ws/chat";function g(){return __LOG__(2)`openSocketWithLoop`,(0,l.treasureHunt)((function(e){const t=_;return __LOG__(2)`openSocketWithLoop (round ${e}) connecting to ${t}`,(()=>{const e=`${_}`;return(0,s.openWebSocket)(e)})().then((n=>(__LOG__(2)`openSocketWithLoop (round ${e}) to ${t} succeeded`,n))).catch((t=>{throw __LOG__(3)`openSocketWithLoop (round ${e}) failed: ${t}`,t}))}),3,15e3,(e=>{e.close()}))}function h(){return(h=(0,i.default)((function*(){const e=yield(0,c.getRoutingInfo)(),t=null==e?void 0:e.edgeRouting,n=(0,a.default)(yield(0,f.getWaNoiseInfo)(),"yield getWaNoiseInfo()");return{edgeInfo:t,getClientPayload:d.getClientPayloadForLogin,protoHeader:u.WA_WEB_PROTO_HEADER,encodeHandshakeHello:u.encodeHandshakeHello,decodeServerHello:u.decodeServerHello,encodeHandshakeFinish:u.encodeHandshakeFinish,processCertificate:u.processCertificate,serverStaticKeyIfKnown:u.serverInfoIfKnown,staticKeyPair:new o.Curve25519(p.curve25519SignalDependencies,n),openSocket:g,curveSignalDependencies:p.curve25519SignalDependencies}}))).apply(this,arguments)}},2866:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getClientPayloadForLogin=function(){return f.apply(this,arguments)},t.getUserAgent=h,t.getWebSubPlatform=m;var i=r(n(81109)),o=r(n(48926)),a=n(28123),s=n(70854),l=n(7184),u=n(96955),c=n(16219),d=n(53559),p=n(86881);function f(){return(f=(0,o.default)((function*(e){var t;const n=(0,l.getMyDeviceJid)(),r=(0,i.default)((0,i.default)({},yield _(e)),{},{username:parseInt((0,u.extractUserId)((0,u.extractUserJid)(n)),10),device:null!==(t=(0,u.extractDeviceId)(n))&&void 0!==t?t:0});return(0,p.encodeProtobuf)(c.ClientPayloadSpec,r).readByteArray()}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,o.default)((function*(e){return{passive:!!e&&e.passive,pull:!0,connectType:c.ClientPayload$ConnectType.WIFI_UNKNOWN,connectReason:c.ClientPayload$ConnectReason.PUSH,userAgent:yield h(),webInfo:{webSubPlatform:m()}}}))).apply(this,arguments)}function h(){return A.apply(this,arguments)}function A(){return(A=(0,o.default)((function*(){return{appVersion:{primary:Number(a.VERSION_PRIMARY),secondary:Number(a.VERSION_SECONDARY),tertiary:Number(a.VERSION_TERTIARY)},platform:c.ClientPayload$UserAgent$Platform.WEB,releaseChannel:yield(0,s.getReleaseChannel)(),mcc:"000",mnc:"000",osVersion:"0.1",manufacturer:"",device:"Desktop",osBuildNumber:"0.1",localeLanguageIso6391:"en",localeCountryIso31661Alpha2:"US"}}))).apply(this,arguments)}function m(){switch((0,d.getWamPlatform)()){case"WEB":case"PWA":return c.ClientPayload$WebInfo$WebSubPlatform.WEB_BROWSER;case"DARWIN":case"DARWIN_BETA":return c.ClientPayload$WebInfo$WebSubPlatform.DARWIN;case"MACSTORE":return c.ClientPayload$WebInfo$WebSubPlatform.APP_STORE;default:return}}},69492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"curve25519SignalDependencies",{enumerable:!0,get:function(){return r.CURVE25519_SIGNAL_DEPENDENCIES}});var r=n(7280)},92005:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.attachHeadlessHandlers=function(e){if(!(0,i.isWorker)())throw(0,o.default)("attachHeadlessHandlers should be used only in worker thread");function t(){return Promise.resolve(null)}e.setNamespaceHandler("event",((e,n,r)=>{r&&r(t())})),e.setNamespaceHandler("workerSafeEvent",((e,n,r)=>{r&&r(t())}))};var i=n(95160),o=r(n(89482))},59355:(e,t,n)=>{"use strict";var r=n(95318);t.Y=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(56858),a=n(56457),s=n(82572),l=n(85608),u=n(59356);function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){let e=null;return e=yield f(),null==e&&(__LOG__(4,void 0,new Error)`[DB ENC CRITICAL ERROR] null returned for local enc salt`,yield(0,s.socketLogout)(a.LogoutReason.ClientFatalError)),e=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),Promise.resolve(e)}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(){const e=yield c();if(e&&e.constructor===Uint8Array)return o.DbEncKeyStore.init(e)}))).apply(this,arguments)}function f(){return l.userPrefsCacheStorage.getItemFromCacheStorage(u.MD_NOISE_KEYS.WEB_ENC_SALT)}},31971:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getWaNoiseInfo=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(39876),s=n(56858),l=n(85608),u=n(59356);function c(){return(c=(0,i.default)((function*(){const e=yield d(),t=yield p();if(!e||!t)return null;const n=yield g(e.staticKeyPair.pubKey,t[1]),r=yield g(e.staticKeyPair.privKey,t[2]);return(0,a.makeKeyPairFromArrayBuffers)(n,r)}))).apply(this,arguments)}function d(){return l.userPrefsCacheStorage.getItemFromCacheStorage(u.MD_NOISE_KEYS.NOISE_INFO)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){const e=yield _();return e?e.map((e=>new Uint8Array((0,o.decodeB64)(e)))):null}))).apply(this,arguments)}function _(){return l.userPrefsCacheStorage.getItemFromCacheStorage(u.MD_NOISE_KEYS.NOISE_INFO_IV)}function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e,t){const n=s.DbEncKeyStore.getEncKeys()[0];return yield self.crypto.subtle.decrypt({iv:t,name:"AES-CBC"},n.key,e)}))).apply(this,arguments)}},83741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getABPropConfigValue=function(e){var t;const n=r.ABPropConfigs[e];null==n&&__LOG__(4,void 0,new Error)`[ABProps] config not defined, config name: ${e}.`;const[o,a,s,l]=n,u=s;if(null==i)return u;return null!==(t=i(e))&&void 0!==t?t:u},t.setGetABPropConfigValueImpl=function(e){i=e},t.usedBeforeInitializationConfigs=void 0;var r=n(9282);t.usedBeforeInitializationConfigs=["parent_group_view_enabled","in_app_support_v2_number_prefixes","web_2fa","web_abprop_screen_lock_enabled","web_abprop_core_wam_runtime","web_offline_resume_qpl_enabled","disable_auto_download","direct_connection_business_numbers","community_admin_promotion_one_time_prompt","web_enable_profile_pic_thumb_db_caching","web_crypto_library_enabled","web_native_fetch_media_download","web_image_max_edge","web_store_quota_manager_enabled","wds_radius_and_casing","non_blocking_resume_from_open_tab_enabled","community_announcement_improvement_m2","column_serialization_perf_impact_test","web_design_refresh","web_material_refresh","web_socket_parallel_connection_enabled"];let i=null},39387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.getABPropConfigValue)("in_app_support_capi_number_prefixes");if(null==t||""===t)return!1;return t.split(",").some((t=>e.startsWith(t)))};var r=n(83741)},78805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulkCreateOrReplaceABPropConfigs=function(e){let t=!1;e.forEach((e=>{s.set(e.configCode,e),!0===e.hasAccessed&&(o.accessedConfigs.add(e.configCode),null!=e.configExpoKey&&(o.exposureKeys.add(e.configExpoKey),t=!0))})),t&&(0,o.updateGlobalExpoKey)();u=!0},t.clearABPropConfigs=function(){s.clear(),o.accessedConfigs.clear(),o.exposureKeys.clear(),u=!1},t.getABPropConfigNameFromCode=function(e){null==l&&(l={},Object.keys(i.ABPropConfigs).forEach((e=>{const[t]=i.ABPropConfigs[e];l[t]=e})),Object.freeze(l));return l[e]},t.getAllABPropConfigs=function(){return Array.from(s.values())},t.initializeABPropsCache=function(){(0,r.setGetABPropConfigValueImpl)(c)};var r=n(83741),i=n(9282),o=n(11956),a=n(70130);n(95160);const s=new Map;let l,u=!1;function c(e){const t=i.ABPropConfigs[e],[n,l,c,d]=t,p=c;return u?function(e){if(s.get(e)&&!o.accessedConfigs.has(e)){var t;const n=null===(t=s.get(e))||void 0===t?void 0:t.configExpoKey;null==n||o.exposureKeys.has(n)||(o.exposureKeys.add(n),(0,o.updateGlobalExpoKey)()),o.accessedConfigs.add(e),(0,a.setConfigAccessed)(e)}const n=s.get(e);return null==n?void 0:n.configValue}(n):(r.usedBeforeInitializationConfigs.includes(e)||__LOG__(3)`[ABProps] configs need to be initialized before its first access, config name: ${e}`,p)}},9282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ABPropConfigs=void 0;const n={abort_building_e2e_proto_on_error:[3224,"bool",!1,!0],abort_decrypting_e2e_on_error:[4055,"bool",!1,!0],active_cart_discovery_enabled:[1766,"bool",!1,!0],add_dm_to_chat_overflow_menu:[1309,"bool",!1,!1],add_member_system_message:[4579,"bool",!1,!1],additional_pre_logging_enabled:[3490,"bool",!1,!0],addon_infra_enable_perf_logging:[7567,"bool",!1,!0],address_message_native_flow_killswitch:[1538,"bool",!1,!1],admin_hfm_toggle:[1021,"bool",!1,!1],admin_include_message_secret_in_cag:[1921,"bool",!0,!0],admin_revoke_history_sync_consumer:[1245,"bool",!1,!0],admin_revoke_receiver:[1177,"bool",!1,!0],admin_revoke_sender:[1292,"bool",!1,!0],adv_accept_hosted_devices:[6939,"bool",!1,!0],adv_v2_m4_m5:[753,"bool",!1,!1],adv_v2_m6:[903,"bool",!1,!1],advanced_security_menu:[7691,"bool",!1,!0],allow_lid_contacts_add_to_group:[3752,"bool",!1,!1],allow_lid_contacts_calling:[3762,"bool",!1,!1],allow_lid_contacts_new_1on1_chat:[3751,"bool",!1,!1],allow_lid_contacts_privacy_settings:[3763,"bool",!1,!1],allow_lid_contacts_storage:[3519,"bool",!1,!1],allow_nl_linkpreview:[3209,"bool",!0,!0],allow_parse_lid_contacts_vcard:[3790,"bool",!1,!1],allow_share_lid_contacts_vcard:[3789,"bool",!1,!1],allow_subgroup_admin_to_unlink:[3054,"bool",!1,!0],alt_device_linking_enabled:[3128,"bool",!1,!1],alt_profile:[6149,"bool",!1,!1],animated_emojis_enabled:[3575,"bool",!1,!1],anr_media_fixes_list:[5981,"string","",""],anyone_can_add_to_groups_by_default:[4441,"bool",!1,!1],append_message_when_forwarding_media:[3177,"bool",!1,!1],append_message_when_forwarding_media_desktop_beta:[3818,"bool",!1,!1],append_message_when_forwarding_media_without_caption:[3875,"bool",!1,!1],attach_menu_redesign_enabled:[3223,"bool",!1,!1],attachment_tray_logging_enabled:[2914,"bool",!1,!0],autodownload_update_in_group_chat:[3273,"bool",!0,!0],autodownload_update_in_one_one_chat:[5517,"bool",!1,!0],banned_shops_ux_enabled:[957,"bool",!1,!0],batch_group_info_new_pipeline_enabled:[6350,"bool",!0,!0],biz_api_virtual_phone_number_ranges:[5850,"string","{}",'{"ranges":[{"start": 12115556300, "end": 12115556300}, {"start": 18895551110, "end": 18895551110}, {"start": 18895554429, "end": 18895554429}]}'],biz_api_virtual_phone_number_string_ranges:[5894,"string","{}",'{"ranges":[{"start": 12115556300, "end": 12115556300}, {"start": 18895551110, "end": 18895551110}, {"start": 18895554429, "end": 18895554429}]}'],biz_api_voip_enabled:[1464,"bool",!1,!1],biz_extensions_metadata_ban_ttl_minutes:[2892,"int",525600,525600],biz_extensions_metadata_cache_ttl_minutes:[2891,"int",1440,1440],block_entry_point_logging_enabled:[2522,"bool",!1,!0],block_from_chat_list:[2290,"bool",!1,!0],block_from_notification:[2374,"bool",!1,!0],blue_client_p0_logging_enabled:[5918,"bool",!1,!0],blue_client_p1_logging_enabled:[6288,"bool",!1,!0],blue_education_enabled:[5295,"bool",!1,!1],blue_education_v2_enabled:[6127,"bool",!1,!1],blue_enabled:[5276,"bool",!1,!1],blue_phase1a_fast_follow_enabled:[6687,"bool",!1,!1],blue_profile_locked_ui_enabled:[6337,"bool",!1,!0],blue_strings_enabled:[5846,"bool",!1,!0],bonsai_avatar_enabled:[4532,"bool",!1,!1],bonsai_carousel_enabled:[5283,"bool",!1,!0],bonsai_carousel_hq_thumbnail_enabled:[6459,"bool",!1,!0],bonsai_carousel_reels_profile_photo_enabled:[6458,"bool",!1,!0],bonsai_chat_list_entry_point_enabled:[6251,"bool",!1,!1],bonsai_composer_new_ai_chat_entrypoint_enabled:[7639,"bool",!1,!0],bonsai_enabled:[4010,"bool",!1,!1],bonsai_english_only:[5637,"bool",!1,!1],bonsai_entry_point_enabled:[5362,"bool",!1,!1],bonsai_inline_feedback_enabled:[5246,"bool",!1,!1],bonsai_meta_ai_shortcut_tos_enabled:[8004,"bool",!1,!0],bonsai_new_ai_chats_entry_point_enabled:[7602,"bool",!1,!0],bonsai_plugin_storage_enabled:[6048,"bool",!1,!1],bonsai_plugins_v2_enabled:[7075,"bool",!1,!0],bonsai_ptt_enabled:[4416,"bool",!1,!0],bonsai_receiver_enabled:[4165,"bool",!0,!0],bonsai_remove_meta_ai_shortcut_setting_switch:[8002,"bool",!1,!0],bonsai_streaming_chunk_latency:[5150,"int",0,0],bonsai_streaming_line_count_for_pinning:[5268,"int",4,4],bonsai_supported_languages:[7848,"string","en","en"],bonsai_ti_timeout_duration_ms:[4736,"int",1e4,1e4],bonsai_update_interval:[4417,"int",86400,86400],bonsai_user_jurisdiction_enum:[8181,"string","row","us"],bonsai_waitlist_enabled:[5459,"bool",!0,!1],bonsai_waitlist_logging_enabled:[8213,"bool",!0,!0],bonsai_waitlist_update_interval:[5413,"int",21600,21600],bonsai_web_electron_receiver_allowed:[6065,"bool",!0,!0],bonsai_word_streaming_enabled:[4974,"bool",!1,!1],bot_3p_diy_delete_enabled:[6348,"bool",!1,!0],bot_3p_enabled:[5587,"bool",!1,!0],bot_3p_status:[5985,"int",0,0],bot_commands_1p_enabled:[5811,"bool",!1,!0],bot_response_futureproof_message_enabled:[4274,"bool",!1,!0],br_buyer_awareness_experiences:[5944,"string","{}",'{"updated_order_bubble_subtext": 0, "updated_order_cta": 0}'],br_enable_payment_logos_on_bubble:[8160,"bool",!1,!1],br_pay_with_card_cta_buyer_enabled:[7102,"bool",!1,!1],br_pay_with_card_cta_seller_enabled:[7103,"bool",!1,!1],br_pay_with_pix_cta_buyer_enabled:[7101,"bool",!1,!1],br_pix_biz_profile_entrypoint_enabled:[8178,"bool",!1,!1],broadcast_message_edit_receive:[4091,"bool",!1,!1],broadcast_message_edit_send:[4092,"bool",!1,!1],btm_qpl_enabled:[1272,"bool",!1,!0],btm_threads_logging_enabled:[1022,"bool",!1,!0],business_bot_include_automated_type_in_msg_stanza:[6417,"bool",!1,!1],business_profile_refresh_m1_enabled:[470,"bool",!1,!0],business_threads_logging_enabled:[853,"bool",!1,!1],business_tool_enhanced_logging:[4427,"bool",!1,!1],buyer_initiated_order_request_variant_enabled:[5114,"bool",!1,!1],buyer_order_payment_request_enabled:[5575,"bool",!1,!1],cag_member_key_rotation_optimization:[2521,"bool",!1,!1],cag_message_edit_receive:[4089,"bool",!1,!1],cag_message_edit_send:[4090,"bool",!1,!1],cag_reactions_receive:[2035,"bool",!1,!1],cag_reactions_send:[2036,"bool",!1,!1],call_only_primary_device_limit_exceeded:[1525,"bool",!1,!1],calling_privacy_callee:[1972,"bool",!0,!0],can_support_web_column_packing:[3600,"bool",!1,!1],caption_edit_receive:[3686,"bool",!1,!1],caption_edit_send:[3687,"bool",!1,!1],carousel_message_client_enabled:[4668,"bool",!1,!0],cart_order_creation_shortcut_enabled:[4257,"bool",!1,!1],catalog_categories_enabled:[1514,"bool",!1,!0],catalog_video_upload:[8272,"bool",!1,!1],channel_core_event_logging_enabled:[5262,"bool",!0,!0],channel_follower_list_enabled:[4307,"bool",!1,!0],channel_forward_to_chat_enabled:[4338,"bool",!1,!0],channel_forward_to_chat_link_enabled:[4860,"bool",!1,!0],channel_forward_to_chat_v2_enabled:[4644,"bool",!1,!1],channel_forward_to_chat_v2_message_navigation_enabled:[4682,"bool",!1,!0],channel_forward_to_chat_v2_new_ui_enabled:[4683,"bool",!1,!0],channel_info_admin_metadata_fetching_enabled:[5621,"bool",!1,!0],channel_link_in_nav_bar_enabled:[5041,"bool",!1,!0],channel_playable_message_views_duration_milliseconds:[4722,"int",3e3,3e3],channel_pull_message_updates_threshold_seconds:[4326,"int",120,120],channel_reactions_enabled:[4306,"bool",!1,!0],channel_reactions_sender_list_enabled:[5185,"bool",!1,!0],channel_reactions_sending_enabled:[4633,"bool",!1,!0],channel_reactions_settings_enabled:[4887,"bool",!1,!0],channel_reactions_settings_none_option_enabled:[5274,"bool",!1,!1],channel_supported_message_types:[3919,"string","1, 2, 3, 9, 10","1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15"],channel_to_channel_forwarding_logging_enabled:[8227,"bool",!1,!1],channel_view_counts_enabled:[4721,"int",0,3],channel_views_duration_milliseconds:[4648,"int",1e3,1e3],channel_web_reparse_enabled:[6304,"bool",!1,!0],channels_admin_context_card_enabled:[5158,"bool",!1,!0],channels_admin_reply_enabled:[7211,"bool",!1,!1],channels_admin_reply_receiver_enabled:[7237,"bool",!1,!1],channels_audio_files_display_waveform_enabled:[6996,"bool",!1,!0],channels_audio_files_receiver_enabled:[6506,"bool",!1,!0],channels_audio_files_sender_enabled:[6505,"bool",!1,!0],channels_audio_files_sender_waveform_enabled:[6943,"bool",!1,!0],channels_block_unsupported_stickers_enabled:[6373,"bool",!1,!0],channels_creation_enabled:[3878,"int",0,2],channels_creation_logging_enabled:[4784,"bool",!1,!0],channels_directory_categories_cache_refresh_interval_ms:[8151,"int",864e5,6e5],channels_directory_categories_enabled:[7685,"bool",!1,!1],channels_directory_category_types:[7734,"string","","1, 2, 3, 4, 5, 6, 7"],channels_directory_enabled:[3879,"int",0,2],channels_directory_fetch_limit:[5203,"int",50,50],channels_directory_logging_enabled:[4783,"bool",!1,!0],channels_directory_page_size:[5853,"int",50,50],channels_directory_pagination_enabled:[5487,"bool",!1,!0],channels_directory_quick_action_button_enabled:[7686,"bool",!1,!0],channels_directory_search_debounce_ms:[5204,"int",250,250],channels_directory_v2_cache_refresh_interval_ms:[5304,"int",18e5,6e5],channels_directory_v2_cache_ttl_ms:[5303,"int",72e5,36e5],channels_directory_v2_enabled:[5126,"bool",!1,!0],channels_directory_v2_filter_types:[5127,"string","","1, 2, 3, 4, 5, 6"],channels_directory_v2_logging_enabled:[5471,"bool",!1,!0],channels_dyi_enabled:[4635,"bool",!1,!0],channels_dyi_logging_enabled:[5488,"bool",!1,!0],channels_dyi_max_file_size_in_bytes_warning_threshold:[4866,"int",1e9,1e9],channels_edit_backwards_compatibility:[5208,"bool",!1,!0],channels_enable_msg_history_metrics:[5777,"bool",!1,!0],channels_enabled:[3877,"int",0,0],channels_fetch_increased_video_data_for_thumbnails_web_enabled:[5827,"bool",!1,!0],channels_fetch_metadata_from_server_by_invite_code_web:[5935,"bool",!1,!0],channels_filter_out_subscribed_in_directory_null_state:[5015,"bool",!1,!0],channels_followers_list_cache_refresh_milliseconds:[5217,"int",6e4,6e4],channels_followers_list_cache_refresh_seconds:[5182,"int",60,60],channels_forward_from_chat_to_channel_enabled:[8054,"bool",!1,!1],channels_forward_logging_v2_additional_fields_enabled:[7264,"bool",!1,!1],channels_forward_logging_v2_enabled:[5492,"bool",!1,!0],channels_forward_to_channel_enabled:[6323,"bool",!1,!0],channels_forwarding_logging_enabled:[4782,"bool",!1,!1],channels_geosuspend_admin_alerts_enabled:[5216,"bool",!1,!0],channels_geosuspend_appeals_enabled:[5959,"bool",!1,!0],channels_geosuspend_enabled:[5161,"bool",!1,!0],channels_hide_news_url_preview:[5287,"bool",!1,!0],channels_hq_link_preview:[5511,"bool",!1,!1],channels_inbox_compact_style_enabled:[7197,"bool",!1,!1],channels_inbox_directory_search_web_enabled:[6241,"bool",!1,!0],channels_inbox_filters_web_enabled:[6020,"bool",!1,!1],channels_large_number_format_enabled:[4653,"bool",!1,!0],channels_max_messages_batch_pull:[5494,"int",100,100],channels_media_cache_setting_enabled:[5625,"bool",!1,!1],channels_media_storage_management_enabled:[7761,"bool",!1,!0],channels_message_edit_enabled:[5174,"bool",!1,!0],channels_message_link_enabled:[5188,"bool",!1,!0],channels_message_loading_indicators_enabled:[5646,"bool",!1,!0],channels_multi_admin_enabled:[6096,"bool",!1,!0],channels_multi_admin_max_admin_count:[6461,"int",16,16],channels_multi_admin_non_followers_enabled:[6389,"bool",!0,!0],channels_multi_admin_receiver_enabled:[6535,"bool",!1,!0],channels_multi_admin_transfer_ownership_enabled:[7124,"bool",!1,!0],channels_multi_admin_transfer_ownership_receiver_enabled:[7244,"bool",!1,!0],channels_multi_m1_improvements_enabled:[7245,"bool",!1,!0],channels_non_basic_stickers_enabled:[6383,"bool",!1,!1],channels_nudge_to_unmute_max_nudges_count:[7530,"int",2,2],channels_nudge_to_unmute_mode:[7239,"int",0,0],channels_nudge_to_unmute_should_show_tooltip:[7529,"bool",!1,!1],channels_pinning_enabled:[7387,"bool",!1,!0],channels_poll_creation_enabled:[5533,"bool",!1,!0],channels_poll_message_short_number_format_enabled:[6489,"bool",!1,!1],channels_poll_receive_enabled:[6191,"bool",!1,!0],channels_poll_single_option_control_enable:[5534,"bool",!1,!0],channels_poll_voter_list_enabled:[6382,"bool",!1,!0],channels_poll_voters_details_cache_ttl_ms:[7920,"int",3e5,3e5],channels_poll_voters_summary_cache_ttl_ms:[7919,"int",12e4,12e4],channels_proactive_message_gap_handling_enabled:[5871,"bool",!1,!0],channels_profile_picture_deletion_appeals_enabled:[7552,"bool",!1,!0],channels_ptt_forwarded_ui_enabled:[5885,"bool",!0,!0],channels_ptt_logging_enabled:[6274,"bool",!0,!0],channels_ptt_receiver_enabled:[5876,"bool",!1,!0],channels_ptt_sender_enabled:[5875,"bool",!1,!0],channels_ptt_transcription_blocked:[5884,"bool",!0,!0],channels_pull_last_msg_on_channel_open:[6138,"bool",!1,!1],channels_qpl_logging:[7677,"bool",!1,!1],channels_quick_forwarding_button_mode:[7234,"int",0,0],channels_quick_forwarding_download_missing_media:[7662,"bool",!1,!0],channels_quick_forwarding_media_only:[7389,"bool",!1,!0],channels_reactions_bottomsheet_tap_to_react_enabled:[7682,"bool",!1,!0],channels_recommended_cache_ttl_ms:[4271,"int",6048e5,864e5],channels_recommended_enabled:[4356,"int",0,2],channels_recommended_v2_recently_followed_channels_below_enabled:[5464,"bool",!1,!0],channels_recommended_v2_ui_enabled:[5096,"bool",!1,!0],channels_recommended_v3_ui_enabled:[8108,"bool",!1,!0],channels_recommended_v3_ui_limit:[8167,"int",5,5],channels_report_outcome_appeals_enabled:[6322,"bool",!1,!0],channels_restricted_updates_enabled:[4219,"bool",!1,!0],channels_send_album_enabled:[5643,"bool",!1,!0],channels_send_view_receipt_enabled:[4760,"bool",!1,!0],channels_share_link_logging_enabled:[5491,"bool",!1,!0],channels_status_consumption_disable_tooltip_enabled:[6801,"bool",!0,!0],channels_status_image_hd_quality_enabled:[6713,"bool",!1,!1],channels_status_invite_links_production_enabled:[6445,"bool",!1,!0],channels_status_updates_consumption_enabled:[6444,"bool",!1,!0],channels_status_updates_production_enabled:[6442,"bool",!1,!0],channels_status_updates_production_message_types:[6443,"string","1, 2, 9","1, 2, 9"],channels_status_video_hd_quality_enabled:[6714,"bool",!1,!1],channels_sticker_receiving_enabled:[6111,"bool",!1,!0],channels_sticker_sending_enabled:[6110,"bool",!1,!0],channels_suspend_appeals_enabled:[5973,"bool",!1,!0],channels_updates_tab_fuzzy_search_enabled:[7681,"bool",!1,!0],channels_updates_tab_logging_enabled:[4506,"bool",!1,!0],channels_video_autoplay:[7588,"bool",!1,!1],channels_video_limit_mb:[4787,"int",16,16],channels_view_counts_display_to_followers_enabled:[4684,"bool",!1,!0],channels_view_counts_enabled:[4590,"bool",!1,!0],channels_violating_message_appeals_enabled:[6321,"bool",!1,!0],channels_waitlist_enabled:[4357,"bool",!1,!0],channels_waitlist_logging_enabled:[4632,"bool",!1,!0],channels_web_bootstrap_improvements_enabled:[5825,"bool",!0,!0],channels_web_bootstrap_timeout_enabled:[5551,"bool",!1,!0],channels_web_wasm_worker_enabled:[6830,"bool",!1,!1],chat_upsell_for_1on1_invites:[3689,"bool",!1,!1],chatlist_filters_v1:[1608,"bool",!1,!1],client_group_participants_limit:[618,"int",257,257],client_message_id_media_download_log_enabled:[3820,"bool",!1,!0],coex_biz_states_sys_msg_enabled:[2320,"bool",!1,!0],coex_identity_verification_v1:[6647,"bool",!1,!1],coex_infra_logging_enabled:[6500,"bool",!1,!1],coex_system_message_logging_enabled:[7564,"bool",!0,!0],collapsing_recommended_channels_enabled:[5852,"bool",!1,!0],column_serialization_perf_impact_test:[3973,"bool",!1,!1],commerce_bloks_apps_mapping:[1320,"string",'{"address_message":{"app_id":"com.bloks.www.whatsapp.commerce.address_message","expiration_secs":300,"version":"1.5","supported_businesses":["+918591749310","+917977079770","+12165552716","+918591749310","+917977079770","+919324433533","+917669800185","+919355081749","+917217010106","+912248913727","+912068135414","+918368818019","+917827971992","+917827971988","+911244632002","+919999006542","+917982465931","+911244632030","+918920528558","+911244632026","+918920530301","+15550083895","+12995550004","+6589523673","+6597685939","+6580536071","+6531631404","+6590834813","+6588867112","+16615555837","+12765985268","+18055908026"]},"galaxy_message":{"flow_message_version":{"1":{"min_android_app_supported_version":"2.22.21","min_ios_app_supported_version":"2.22.16"}},"app_id":"com.bloks.www.whatsapp.commerce.galaxy_message","expiration_secs":86400,"version":"1.0","flows":{}}}','{"address_message":{"app_id":"com.bloks.www.whatsapp.commerce.address_message","expiration_secs":300,"version":"1.5","supported_businesses":["+918591749310","+917977079770","+12165552716","+918591749310","+917977079770","+919324433533","+917669800185","+919355081749","+917217010106","+912248913727","+912068135414","+918368818019","+917827971992","+917827971988","+911244632002","+919999006542","+917982465931","+911244632030","+918920528558","+911244632026","+918920530301","+15550083895","+12995550004","+6589523673","+6597685939","+6580536071","+6531631404","+6590834813","+6588867112","+16615555837","+12765985268","+18055908026"]},"galaxy_message":{"flow_message_version":{"1":{"min_android_app_supported_version":"2.22.21","min_ios_app_supported_version":"2.22.16"}},"app_id":"com.bloks.www.whatsapp.commerce.galaxy_message","expiration_secs":86400,"version":"1.0","flows":{}}}'],commerce_metadata_supported_business:[1693,"string","18785550326,918591749310,917977079770,12245555037,5515997781156,5511989238421,555191894444,905333860133,908502213040,5511916282555,551147664020,622150851766,551121038525","18785550326,447766028329,918591749310,917977079770,12245555037,5515997781156,5511989238421,555191894444,905333860133,908502213040,5511916282555,551147664020,622150851766"],commerce_sanctioned:[1319,"bool",!1,!1],community_admin_promotion_one_time_prompt:[1864,"bool",!1,!1],community_announcement_group_size_limit:[2774,"int",5e3,5e3],community_announcement_improvement_m1:[3121,"bool",!1,!0],community_announcement_improvement_m2:[3239,"bool",!1,!0],community_announcement_improvement_m3:[3380,"bool",!1,!0],community_breakout_groups_enabled:[3864,"bool",!1,!0],community_chat_list_tabs:[3748,"bool",!1,!1],community_creation_no_add_groups_screen:[3246,"bool",!1,!0],community_creation_nux_always:[4053,"bool",!1,!1],community_creation_nux_count:[4071,"int",1,1],community_examples:[4852,"bool",!1,!0],community_general_chat_UI_enabled:[5021,"bool",!1,!1],community_general_chat_create_enabled:[5453,"bool",!1,!1],community_general_chat_max_auto_add_users:[5144,"int",1024,1024],community_general_chat_notification_followup_enabled:[5665,"bool",!1,!1],community_groups_navigation:[3023,"bool",!1,!0],community_history_receive:[5192,"bool",!1,!1],community_history_send:[5193,"bool",!1,!1],community_history_setting_receive:[5046,"bool",!1,!1],community_history_setting_send:[5191,"bool",!1,!1],community_members_bottomsheet_enabled:[4979,"bool",!1,!1],community_members_bottomsheet_post_creation_enabled:[5e3,"bool",!1,!1],community_navigate_to_unread_subgroup_enabled:[5169,"bool",!1,!1],community_navigation:[4003,"bool",!1,!1],community_permissions_m1:[7180,"bool",!1,!0],community_permissions_m1_5:[7889,"bool",!1,!0],community_permissions_m2:[7608,"bool",!1,!0],community_reporting_ui_upsell_exit:[2818,"bool",!0,!0],community_rich_system_message_enabled:[3292,"bool",!1,!1],community_shorter_group_creation_enabled:[3966,"bool",!1,!1],community_stacked_squircle_enabled:[5103,"bool",!1,!1],community_subgroup_icon_variant:[3078,"int",0,2],community_subgroup_identity_v2:[4160,"bool",!1,!0],community_subgroup_join_from_system_message_enabled:[4345,"bool",!1,!0],community_subgroup_switcher_entrypoint_enabled:[3738,"bool",!1,!0],community_suspend_v0_enabled:[1653,"bool",!1,!0],community_tab_m2:[2154,"bool",!1,!0],companion_biz_label_sync_enabled:[5610,"bool",!1,!1],companion_biz_quick_reply_sync_enabled:[5694,"bool",!1,!1],companion_favorites_sync_enabled:[7403,"bool",!1,!1],companion_min_versions:[1367,"string","json:[]","json:[]"],comparion_force_upgrade:[1368,"bool",!1,!1],consumer_collections_enabled:[582,"bool",!1,!0],contact_permission_deeplink_enabled:[7633,"bool",!1,!1],country_client_gating_enabled:[1105,"bool",!1,!1],coupon_copy_button_url:[3631,"string","https://www.whatsapp.com/coupon?code=","https://www.whatsapp.com/coupon?code="],create_new_group_deeplink_enabled:[7912,"bool",!1,!1],csat_message_rating:[690,"bool",!1,!0],csat_message_trigger:[1082,"bool",!1,!0],ctwa_3pd_conversion_signal_logging:[7138,"bool",!1,!0],ctwa_ad_account_token_storage_kill_switch_web:[8166,"bool",!0,!1],ctwa_additional_label_event_logging_enabled:[3793,"bool",!1,!0],ctwa_biz_action_bar_holdout:[6073,"bool",!1,!1],ctwa_bmx_pairless_logging_refactoring:[7129,"bool",!1,!1],ctwa_business_funnel_logging:[8140,"bool",!1,!0],ctwa_clear_tracking:[5151,"bool",!1,!1],ctwa_consumer_data_sharing_consent:[2935,"bool",!1,!0],ctwa_content_gen_enabled:[5330,"bool",!1,!1],ctwa_coupons_enabled:[7313,"bool",!1,!1],ctwa_data_max_length:[1841,"int",768,768],ctwa_enhanced_label_logging:[4761,"bool",!1,!0],ctwa_entry_point_config_fetch_threshhold:[6214,"int",432e5,2e3],ctwa_improved_ad_attribution_enabled:[8260,"bool",!1,!1],ctwa_long_term_holdout_content_enabled:[8015,"bool",!1,!0],ctwa_manage_ads_tab_web:[5554,"bool",!1,!0],ctwa_manage_ads_tab_web_ad_actions_menu:[6237,"bool",!1,!1],ctwa_manage_ads_tab_web_ad_details:[6971,"bool",!1,!1],ctwa_manage_ads_tab_web_ad_metrics:[6238,"bool",!1,!1],ctwa_manage_ads_tab_web_recovery_flow:[7215,"bool",!1,!1],ctwa_order_amount_and_currency_logging_enabled:[7563,"bool",!1,!0],ctwa_quick_reply_labels:[5671,"bool",!1,!1],ctwa_smb_data_sharing_consent:[2934,"bool",!1,!0],ctwa_smb_data_sharing_opt_in_cool_off_period:[3331,"int",259200,259200],ctwa_smb_data_sharing_settings_killswitch:[5615,"bool",!1,!1],ctwa_value_holdout_h1_24_enabled:[7617,"bool",!1,!1],ctwa_value_holdout_h2_23_enabled:[4796,"bool",!1,!1],custom_racing_emoji:[7463,"bool",!1,!1],data_privacy_phase_2_enabled:[6843,"bool",!1,!0],data_privacy_phase_2_non_e2ee_enabled:[7131,"bool",!1,!0],dc_edit_postcode_by_default_enabled:[1534,"bool",!1,!1],ddm_reversed_options:[1397,"bool",!1,!1],default_audio_limit_mb:[3657,"int",16,64],default_gif_limit_mb:[3656,"int",16,64],default_media_limit_mb:[3660,"int",16,64],default_video_limit_mb:[3185,"int",16,64],default_video_limit_mb_newsletter:[4155,"int",16,16],desktop_upsell_mac_cta_call_btn:[5568,"bool",!1,!1],desktop_upsell_mac_cta_chatlist_dropdown:[5565,"bool",!1,!1],desktop_upsell_mac_cta_chatlist_toastbar:[5566,"bool",!1,!1],desktop_upsell_mac_cta_intro_panel:[5569,"bool",!1,!1],desktop_upsell_mac_cta_missed_call:[6532,"bool",!1,!1],desktop_upsell_mac_cta_search_results_toastbar:[5567,"bool",!1,!1],desktop_upsell_mac_permanent_ctas:[4805,"bool",!1,!1],desktop_upsell_mac_temporary_ctas:[4803,"bool",!1,!1],desktop_upsell_win_butterbar:[2348,"bool",!1,!1],desktop_upsell_win_cta_call_btn:[5148,"bool",!0,!0],desktop_upsell_win_cta_call_btn_variation_2:[5900,"bool",!0,!0],desktop_upsell_win_cta_chatlist_dropdown:[5145,"bool",!0,!0],desktop_upsell_win_cta_chatlist_toastbar:[5146,"bool",!0,!0],desktop_upsell_win_cta_intro_panel:[5149,"bool",!0,!0],desktop_upsell_win_cta_missed_call_variation_1:[5901,"bool",!1,!1],desktop_upsell_win_cta_missed_call_variation_2:[5902,"bool",!0,!0],desktop_upsell_win_cta_search_results_toastbar:[5147,"bool",!0,!0],desktop_upsell_win_ctas:[2349,"bool",!1,!1],desktop_upsell_win_dropdown_btn:[2725,"bool",!1,!1],desktop_upsell_win_permanent_ctas:[4804,"bool",!1,!1],desktop_upsell_win_temporary_ctas:[4802,"bool",!1,!1],dev_prop_boolean:[1065,"bool",!1,!1],dev_prop_float:[1067,"float",0,0],dev_prop_int:[1066,"int",0,0],dev_prop_string:[1064,"string","",""],device_capabilities_sync_enabled:[7853,"bool",!1,!1],df_config:[3471,"string","",""],df_enabled:[3472,"bool",!1,!1],direct_connection_business_numbers:[1846,"string","16005554444,918591749310,917977079770","16005554444,918591749310,917977079770"],directory_categories_newsletters_per_category_limit:[7986,"int",5,5],directory_search_kill_switch:[4283,"bool",!0,!0],directory_sort_kill_switch:[4282,"bool",!0,!0],disable_auto_download:[1838,"bool",!1,!1],disable_status_to_non_sub:[3077,"bool",!1,!1],disappearing_messages_chat_picker:[1518,"bool",!1,!1],disappearing_mode:[536,"bool",!1,!1],dm_additional_durations:[3305,"bool",!1,!1],dm_chat_picker_v2:[2597,"bool",!1,!0],dm_initiator_trigger:[5309,"bool",!1,!1],dm_initiator_trigger_daily_logs:[7402,"bool",!1,!0],dm_initiator_trigger_groups:[7141,"bool",!1,!0],dm_reliability_logging:[5580,"bool",!1,!1],dm_reliability_refactor:[4131,"bool",!1,!1],dm_updated_system_message:[1670,"bool",!1,!0],dmcp_manage_storage_LAUNCH:[2919,"bool",!1,!0],document_preview_caption_changes_enabled:[2307,"bool",!1,!0],documents_with_captions_receive:[1749,"bool",!1,!0],documents_with_captions_send:[1750,"bool",!1,!0],documents_with_captions_send_desktop_beta_rollout:[2486,"bool",!1,!1],download_document_thumb_mms_enabled:[250,"bool",!1,!0],download_status_thumb_mms_enabled:[249,"bool",!1,!1],draft_orders_enabled:[6659,"bool",!1,!1],drop_inner_message_context_infos_when_sending:[7772,"bool",!1,!0],drop_last_name:[726,"bool",!1,!1],dsa_channels_enforcement_geo_suspension_enabled:[6147,"bool",!1,!0],dsa_channels_enforcement_messages_enabled:[6148,"bool",!1,!0],dsa_channels_enforcement_profile_picture_deletion_enabled:[7553,"bool",!1,!0],dsa_channels_enforcement_suspension_enabled:[6146,"bool",!1,!0],dsa_channels_report_unlawful_content_enabled:[6145,"bool",!1,!0],dsa_channels_reports_outcome_list_enabled:[6297,"bool",!1,!0],dsa_information_for_eu_only_enabled:[7592,"bool",!1,!0],elevated_important_msg:[809,"bool",!1,!1],elevated_push_names_v2_enabled:[2540,"bool",!1,!1],elevated_push_names_v2_m1_follow_up_enabled:[2763,"bool",!1,!1],elevated_push_names_v2_m2_enabled:[2904,"bool",!1,!1],elevating_profile_names_enabled:[604,"bool",!1,!1],enable_biz_activity_report_request:[455,"bool",!1,!1],enable_carousel_message_client_logging:[5542,"bool",!1,!0],enable_chat_psa_auto_play_videos:[3182,"bool",!1,!0],enable_chat_psa_forwards:[4033,"bool",!1,!0],enable_clear_formatted_preview:[4659,"bool",!1,!0],enable_client_chat_psa:[1844,"bool",!1,!0],enable_coex_system_message:[5383,"bool",!1,!0],enable_ctwa_ml_entry_point_config:[6216,"bool",!1,!0],enable_days_since_receive_logging:[3322,"bool",!1,!0],enable_funnel_logging:[6250,"bool",!1,!0],enable_granular_reject_reasons:[550,"bool",!1,!1],enable_group_profile_editor:[689,"bool",!1,!1],enable_image_video_sharing_user_journey_logging:[7504,"bool",!1,!0],enable_inline_video_type_field_logging:[5912,"bool",!1,!0],enable_interactive_single_product_message:[7408,"bool",!1,!1],enable_logging_multi_select_from_chat_list:[3118,"bool",!1,!0],enable_media_view_reply:[5582,"bool",!1,!0],enable_new_media_as_document_chat_message_layout:[6786,"bool",!1,!0],enable_one_request_ptt_upload_proto:[8264,"bool",!1,!1],enable_privacy_token_with_timestamp:[4992,"bool",!1,!0],enable_product_carousel_message:[7177,"bool",!1,!1],enable_product_carousel_message_logging:[7802,"bool",!1,!0],enable_receiving_hd_photo_quality:[3116,"bool",!1,!0],enable_soox_message_receiving:[2802,"bool",!0,!0],enable_soox_message_sending:[2832,"bool",!1,!0],enable_spam_report_iq_with_privacy_token:[4991,"bool",!1,!0],enable_status_report_and_block:[3988,"bool",!1,!0],enable_status_reporting:[2728,"bool",!1,!0],enable_sticker_sharing_user_journey_logging:[7503,"bool",!1,!0],enable_sticker_sharing_user_journey_qpl_logging:[8193,"bool",!1,!0],enable_syncd_debug_data_in_patch:[6614,"bool",!1,!1],ephemeral_24h_duration:[407,"bool",!1,!0],ephemeral_allow_group_members:[432,"bool",!1,!0],ephemeral_allow_group_members_web:[8152,"bool",!1,!0],ephemeral_chat_psa:[7157,"bool",!1,!1],ephemeral_sync_response:[2714,"bool",!1,!1],esr_use_new_xmpp_type:[7534,"bool",!1,!1],event_description_length_limit:[6208,"int",2048,2048],event_messages_meta_node:[6822,"bool",!1,!1],event_name_length_limit:[6207,"int",100,100],event_show_add_to_calendar_option:[8309,"bool",!0,!0],event_wa_call_max_days_in_advance:[6265,"int",365,365],events_create:[5562,"bool",!1,!1],events_create_regular_groups_enabled:[7258,"bool",!1,!1],events_edit_and_cancel_system_messages:[7941,"bool",!1,!1],events_edit_receive:[7358,"bool",!1,!1],events_edit_send:[7357,"bool",!1,!1],events_m3_allow_guests_receive:[7421,"bool",!1,!1],events_m3_allow_guests_send:[7420,"bool",!1,!1],events_m3_attendee_chat:[7509,"bool",!1,!1],events_m3_cover_image_receive:[7511,"bool",!1,!1],events_m3_cover_image_send:[7510,"bool",!1,!1],events_start_notification:[7306,"bool",!1,!1],events_view:[5563,"bool",!1,!1],evolve_about_m1_enabled:[4921,"bool",!1,!1],evolve_about_m1_receiver_enabled:[5839,"bool",!1,!1],evolve_about_m1_receiver_for_new_surfaces_enabled:[6172,"bool",!1,!1],expanded_formatting_v2_expansion:[7822,"bool",!1,!1],expanded_formatting_v2_improvements:[7824,"bool",!1,!1],expanded_formatting_v2_menu:[7823,"bool",!1,!1],expanded_text_formatting_enabled:[4093,"bool",!1,!1],expanded_text_formatting_preview_enabled:[6004,"bool",!1,!1],expiring_groups_enabled:[3181,"bool",!1,!1],extensions_central_config_killswitch:[5247,"bool",!1,!1],extensions_geoblocking_enabled:[5333,"bool",!1,!0],extensions_graphql_cta_disable:[3192,"string","2498088","2498088"],extensions_message_support_version:[2306,"string",'{"1":{"min_android_app_supported_version":"2.22.21"},"2":{"min_android_app_supported_version":"2.22.23.11","min_ios_app_supported_version":"2.23.18.15"},"3":{"min_android_app_supported_version":"2.23.17.10","min_ios_app_supported_version":"2.23.18.15"}}','{"1":{"min_android_app_supported_version":"2.22.21"},"2":{"min_android_app_supported_version":"2.22.23","min_ios_app_supported_version":"2.23.18.15"},"3":{"min_android_app_supported_version":"2.23.17","min_ios_app_supported_version":"2.23.18.15"}}'],extensions_template_killswitch:[2885,"bool",!1,!1],external_beta_can_join:[3081,"bool",!1,!0],external_payments_supported_business:[1763,"string","+917000770007","+918369150604,+917000770007"],facebook_link_preview_use_thumbnail:[810,"bool",!1,!0],favorite_sticker_rmr_sync_enabled:[2155,"bool",!1,!1],favorites_limit:[7267,"int",100,100],first_message_experience:[3962,"bool",!1,!1],first_message_experience_v2:[5263,"bool",!1,!1],flattened_reactions_collection:[4390,"bool",!1,!1],fmx_ctwa_kill_switch:[6061,"bool",!1,!1],force_transcode_photos:[5179,"bool",!1,!1],force_transcode_videos:[5178,"bool",!1,!1],forward_media_with_caption_desktop_beta_rollout:[2664,"bool",!0,!0],forward_media_with_captions:[1853,"bool",!1,!1],forwarded_ptt_ui_enabled:[1040,"bool",!1,!0],four_reactions_in_bubble_enabled:[2378,"bool",!1,!0],fullscreen_animation_for_keyword:[2776,"bool",!1,!1],fun_stickers_locale_langs:[4631,"string","en","en"],fun_stickers_phase2_enabled:[4643,"bool",!1,!1],gate_new_invite_contact_picker:[7478,"bool",!1,!1],gif_autoplay_enabled:[2281,"bool",!1,!1],gif_max_play_duration:[3684,"int",5,5],gif_max_play_loops:[3683,"int",3,3],gif_min_play_loops:[3682,"int",1,1],gimmick_phase_two_cache_size:[7185,"int",20,20],gimmick_phase_two_data:[6784,"string","{}","{}"],gimmick_phase_two_data_suffix:[6785,"string","",""],gimmick_phase_two_data_test:[7011,"bool",!1,!1],gimmick_phase_two_logging_enabled:[6787,"bool",!1,!1],gimmick_phase_two_receiver_enabled:[5692,"bool",!1,!1],gimmick_phase_two_sender_enabled:[5693,"bool",!1,!1],graphql_locale_remapping:[2014,"string","{}","{}"],graphql_privacy_imp_m1:[1096,"bool",!1,!1],graphql_privacy_imp_m2:[1327,"bool",!1,!1],groove_enabled_web:[2980,"bool",!1,!1],group_catch_up:[559,"bool",!1,!1],group_chat_profile_pictures_enabled:[1825,"bool",!1,!1],group_chat_profile_pictures_enabled_web_beta_rollout:[2543,"bool",!0,!0],group_chat_profile_pictures_v2_enabled:[3261,"bool",!1,!1],group_invite_new_bottom_sheet_enabled:[2749,"bool",!0,!0],group_join_request_can_send_optional_message:[3384,"bool",!1,!1],group_join_request_can_view_optional_message:[3383,"bool",!1,!1],group_join_request_m0_anyone_can_join:[2367,"bool",!1,!1],group_join_request_m1:[1727,"bool",!1,!1],group_join_request_m2:[1728,"bool",!1,!1],group_join_request_m2_banner_on_conversation:[2449,"bool",!1,!1],group_join_request_m2_logging:[2913,"bool",!1,!1],group_join_request_m2_max_pending_participants_limit:[2418,"float",2,2],group_join_request_m2_pushname:[2376,"bool",!1,!0],group_join_request_m2_setting:[1887,"bool",!1,!1],group_join_request_m3:[2369,"bool",!1,!1],group_join_request_m3_banner:[3452,"bool",!1,!1],group_join_request_m3_groups_in_common:[3895,"bool",!1,!1],group_join_request_m3_invited_tab:[3571,"bool",!1,!1],group_join_request_m3_push_notification:[5212,"bool",!1,!1],group_join_request_m3_sort_by_time:[3451,"bool",!1,!1],group_join_request_on_by_default:[4593,"bool",!1,!1],group_join_request_optional_message_soak:[3382,"bool",!1,!1],group_member_recommendations_m1:[7809,"bool",!1,!1],group_member_recommendations_ts_logging:[7492,"bool",!1,!1],group_mentions_in_cag:[3097,"bool",!1,!0],group_mentions_in_subgroups:[4087,"bool",!1,!0],group_size_bypassing_sampling:[1861,"int",1e5,1e5],group_size_limit:[1304,"int",257,257],group_suspend_appeal_include_entity_id_enabled:[2057,"bool",!1,!0],group_suspend_v0_enabled:[973,"bool",!1,!0],group_suspend_v1_enabled:[1415,"bool",!1,!0],group_suspend_v2_enabled:[3180,"bool",!1,!0],groups_dogfooding_ui:[308,"bool",!1,!1],growth_lock_v0_enabled:[1204,"bool",!1,!0],hd_media_tooltip_enabled:[6286,"bool",!1,!0],hd_media_tooltip_killswitch_enabled:[6378,"bool",!1,!1],hd_media_tooltip_logging_enabled:[7122,"bool",!1,!1],hd_video_data_warning_max_mb:[4153,"int",64,64],hd_video_definition_max_edge:[4172,"int",864,864],hd_video_definition_min_edge:[4171,"int",720,720],hd_video_definition_min_edge_with_max_edge:[4175,"int",480,480],hd_video_label_enabled:[3934,"bool",!1,!0],hd_video_min_streaming_bandwidth:[3936,"int",150,150],hd_video_show_data_warning_dialog:[4152,"bool",!1,!0],high_quality_link_preview_enabled:[3665,"bool",!1,!0],history_sync_loop_interval_ms:[4149,"int",2e4,2e4],history_sync_on_demand:[3337,"bool",!1,!1],history_sync_on_demand_cooldown_sec:[4365,"int",7200,7200],history_sync_on_demand_failure_limit:[4364,"int",10,10],history_sync_on_demand_message_count:[3811,"int",50,50],history_sync_on_demand_request_send_killswitch:[4366,"bool",!0,!0],history_sync_on_demand_time_boundary_days:[3642,"int",365,365],history_sync_on_demand_timeout_ms:[3882,"int",1e4,1e4],history_sync_on_demand_with_android_beta:[4135,"bool",!1,!1],hqp_log_enabled:[3349,"bool",!1,!0],hyperlinked_phone_numbers_enabled:[1215,"bool",!1,!1],ig_reels_music_attribution:[1912,"bool",!1,!0],im_nfm_dynamic_message_killswitch:[5124,"bool",!1,!1],in_app_comms_manage_ads_web_banner_campaign_enabled:[4542,"bool",!1,!0],in_app_support_capi_number_prefixes:[4799,"string","155178684","155178684"],in_app_support_v2_enabled:[233,"bool",!1,!1],in_app_support_v2_jump_to_group:[819,"bool",!1,!1],in_app_support_v2_jump_to_group_wait_time_in_ms:[974,"int",5e3,5e3],in_app_support_v2_locale_langs:[379,"string","",""],in_app_support_v2_number_prefixes:[1031,"string","15517868","15517868"],in_app_support_v2_numbers:[390,"string","",""],in_app_survey_enabled:[1377,"bool",!1,!0],in_app_survey_phone_numbers:[1607,"string","16508638904","16508638904"],inactive_days_to_disable_status_autodownload:[6042,"int",14,14],inapp_banner_client_enabled:[2871,"bool",!1,!0],inbox_filters_custom_filters_enabled:[5173,"bool",!1,!1],inbox_filters_custom_smb_enabled:[7637,"bool",!1,!1],inbox_filters_enabled:[5171,"bool",!1,!1],inbox_filters_favorites_enabled:[5172,"bool",!1,!1],inbox_filters_haptic_feedback_enabled:[6052,"bool",!1,!1],inbox_filters_read_unread_logging_enabled:[6967,"bool",!1,!1],inbox_filters_reset_timeout:[5765,"int",1800,1800],inbox_filters_smb_always_visible:[7221,"bool",!1,!1],inbox_filters_smb_enabled:[7108,"bool",!1,!0],inbox_filters_smb_label_dropdown:[7294,"bool",!1,!1],inbox_filters_smb_messages_folder:[7293,"bool",!1,!1],inbox_filters_suppress_contact_filter:[7769,"bool",!1,!1],inbox_management_filters_m2:[3554,"bool",!1,!1],incentive_program_logging_enabled:[1599,"bool",!1,!0],include_privacy_token_flag_in_delivery_receipt:[6163,"bool",!1,!1],inline_video_playback_additional_logging_enabled:[2431,"bool",!1,!0],interactive_message_native_flow_killswitch:[1133,"bool",!1,!1],interactive_response_message_killswitch:[1435,"bool",!1,!1],interactive_response_message_native_flow_killswitch:[1436,"bool",!1,!1],internal_bug_reporting_v1_enabled:[4697,"bool",!1,!1],invalid_hosted_companion_nack_enabled:[5555,"bool",!1,!0],ipayments_br_installment_seller_learn_more_link:[4145,"string","https://faq.whatsapp.com/253337763937767","https://faq.whatsapp.com/253337763937767"],is_capi_groups_alpha_enabled:[6473,"bool",!1,!1],is_coupon_button_enabled:[3630,"bool",!0,!0],is_internal_tester:[2945,"bool",!1,!0],is_lto_offer_enabled:[4693,"bool",!1,!0],is_message_secret_enabled:[1707,"bool",!1,!0],is_meta_employee:[1570,"bool",!1,!1],is_meta_employee_or_internal_tester:[1777,"bool",!1,!1],is_pmx_funnel_metrics_logging_enabled:[6816,"bool",!1,!0],is_pmx_hashed_msg_key_logging_enabled:[6837,"bool",!1,!0],is_roi_data_controller_metrics_enabled:[6748,"bool",!1,!0],keep_in_chat_receiver:[1352,"bool",!1,!1],keep_in_chat_sender:[1353,"bool",!1,!1],keep_in_chat_ui_content:[2005,"bool",!1,!1],keep_in_chat_undo_duration_limit:[1698,"int",2592e3,2592e3],key_hash_in_msg_send_and_media_upload_logging:[7773,"bool",!1,!0],kic_msg_send_expiry_sec:[4042,"int",86400,86400],kic_orphan_cleanup_days:[1673,"int",31,31],kill_switch_ctwa_ml_entry_point_config:[6215,"bool",!0,!0],large_number_format_uses_generic_plural:[5402,"bool",!0,!0],lid_group_send_lid_mention:[7439,"bool",!1,!1],lid_groups_aggregate_participant_change_system_message:[3804,"bool",!1,!1],lid_groups_create_lid_individual_chats:[3876,"bool",!1,!1],lid_groups_handle_server_addressing_mode:[3688,"bool",!1,!0],lid_groups_message_send_validation:[4162,"bool",!1,!0],lid_groups_new_group_creation:[3645,"bool",!1,!1],lid_groups_outgoing_explicit_address_mode:[3803,"bool",!1,!0],lid_outgoing_msg_attach_meta_tag:[5623,"bool",!1,!1],lid_status_create_individual_lid_chats:[6978,"bool",!1,!1],lid_status_send_enabled:[6791,"bool",!1,!1],lift_me_up_m1:[8e3,"bool",!1,!0],link_preview_shimmer_enabled:[4205,"bool",!1,!1],link_preview_wait_time:[2566,"int",7,7],log_clock_skew:[1190,"bool",!1,!1],low_cache_hit_rate_media_types:[4836,"string","ptt,audio,document,ppic","ptt,audio,document,ppic"],lthash_check_hours:[1104,"int",0,0],lto_offer_media_aspect_ratio:[5073,"float",.800000011920929,.800000011920929],maiba_1p_status:[6566,"int",0,0],mark_as_action:[2936,"bool",!1,!0],max_message_per_chunk_count_tuning_enabled:[7897,"int",5e3,5e3],max_participants_in_group_queries:[6267,"int",5e4,5e4],max_pinned_chats_count:[7489,"int",3,3],max_pixels_size_allowed_for_image:[4538,"int",921600,921600],maximum_group_size_for_rcat:[2915,"int",100,100],md_app_state_critical_data_processing_logging:[1187,"bool",!1,!0],md_app_state_gate_D34336913:[1379,"bool",!1,!1],md_app_state_report_md_sync_mutation_stats:[1221,"bool",!1,!0],md_icdc_enabled:[309,"bool",!1,!1],md_icdc_hash_length:[310,"int",10,10],md_link_device_with_phone_number_enabled:[2734,"bool",!1,!1],md_link_device_with_phone_number_force_enabled:[3693,"bool",!1,!1],md_migration_experience:[861,"int",2,2],md_offline_v2_m2_enabled:[1517,"int",10,10],md_syncd_24_hour_time_format_sync_enabled:[1612,"bool",!1,!1],md_syncd_primary_version_sync_enabled:[1993,"bool",!1,!1],media_autodownload_audio_max_size:[6040,"int",524288,524288],media_autodownload_gif_as_image_max_size:[6041,"int",524288,524288],media_engagement_logging_enabled:[3787,"bool",!1,!1],media_large_file_awareness_popup_enabled:[3061,"bool",!1,!0],media_large_file_awareness_popup_file_size_in_MB:[3115,"int",2048,2048],media_picker_select_limit:[2614,"int",30,30],media_picker_select_limit_new:[2693,"int",30,30],media_reupload_limit_mb:[1098,"int",100,100],media_sender_client_logging_enabled:[3491,"bool",!1,!0],media_sent_as_doc_thumb_blur_radius:[6249,"int",2,2],media_sent_as_doc_thumbnail_max_edge:[6003,"int",100,100],media_sharing_team_holdout_h1_2024:[6972,"bool",!1,!1],media_upload_prekeys_fetch_enabled:[907,"bool",!1,!0],media_viewer_reaction_enabled:[7859,"bool",!1,!0],media_viewer_replies_enabled:[7860,"bool",!1,!0],member_name_tag_enabled:[4233,"bool",!1,!0],member_suggested_group_fetch_sync_version:[6600,"int",0,0],member_suggested_group_push:[6601,"bool",!1,!1],message_count_logging_md_enabled:[1135,"bool",!1,!1],message_edit_bubble_animation:[4325,"bool",!1,!1],message_edit_client_entry_point_limit_seconds:[3272,"int",900,900],message_edit_receive:[2189,"bool",!1,!0],message_edit_send:[2190,"bool",!1,!0],message_edit_window_duration_seconds:[2983,"int",1200,1200],message_level_reporting:[535,"bool",!1,!0],message_quick_reply:[1623,"bool",!1,!1],meta_verified_badge_education_vai_content:[7976,"bool",!1,!0],meta_verified_newsletter_enabled:[6618,"bool",!1,!0],meta_verified_newsletter_feature_flag_skipped:[7603,"bool",!1,!1],mex_group_flags:[6725,"int",0,0],mex_group_get_group_info:[7653,"bool",!1,!1],mex_group_get_group_info_mode:[8179,"int",0,0],mex_group_get_subgroups:[7598,"bool",!1,!1],mex_group_migration_enabled:[6724,"bool",!1,!1],mex_group_query_invite_link:[7908,"bool",!1,!1],mex_group_set_allow_non_admin_subgroup_creation:[7609,"bool",!1,!1],mex_native_client_enabled:[5437,"bool",!1,!1],mex_newsletter_flags:[3605,"int",0,0],mex_newsletter_killswitch:[3604,"bool",!1,!1],mex_phase3_enabled:[2249,"bool",!1,!1],mex_phase3_status_flags:[2250,"int",0,0],minimum_percentage_to_proactive_distribute_sender_keys:[2860,"int",200,50],mms_hot_content_timespan_in_seconds:[2136,"int",0,0],mms_vcache_aggregation_enabled:[2134,"bool",!1,!1],more_reactions_option:[1322,"bool",!1,!1],more_reactions_option_desktop_beta_rollout:[1759,"bool",!0,!0],mpm_nfm_forwarding_enabled:[2909,"bool",!1,!1],msgd_drop_device_notifications:[3806,"bool",!1,!1],multi_select_from_chat_list:[2312,"bool",!1,!0],mute_always_show_notification_action:[3156,"bool",!1,!0],mute_dialog_description:[3155,"bool",!1,!0],native_commerce_threads_logging_enabled:[1034,"bool",!1,!0],native_contact_companion_change_enabled:[7301,"bool",!1,!0],native_shop_preview_enabled:[636,"bool",!1,!0],newsletter_admin_invite_tos_id:[6498,"string","20610101","20610101"],newsletter_admin_invite_tos_id_smb_web:[6536,"string","20610104","20610104"],newsletter_all_tos_disabled:[6133,"bool",!1,!1],newsletter_blue_education_enabled:[5296,"bool",!1,!1],newsletter_blue_enabled:[5277,"bool",!1,!1],newsletter_creation_enabled:[3607,"bool",!1,!1],newsletter_creation_nux_id:[3835,"string","20601218","20601218"],newsletter_creation_nux_version_v2:[5457,"int",1,1],newsletter_creation_tos_id:[3834,"string","20601217","20601217"],newsletter_creation_tos_id_smb_web:[5598,"string","20601217","20601217"],newsletter_creation_tos_version_v2:[5456,"int",1,1],newsletter_enabled:[3385,"bool",!1,!1],newsletter_media_autodownload_jitter_multiplier:[4369,"int",5e3,1e3],newsletter_media_autodownload_mode:[3778,"int",3,3],newsletter_media_autodownload_queue_max_concurrency:[4370,"int",5,5],newsletter_media_priority_queue_incoming_max_size:[4479,"int",32,32],newsletter_reporting_enabled:[3148,"bool",!1,!0],newsletter_suspend_enabled:[3149,"bool",!1,!0],newsletter_tos_notice_id:[3810,"string","20601216","20601216"],newsletter_tos_notice_id_smb_web:[5597,"string","20601216","20601216"],newsletter_tos_notice_version:[5448,"int",1,1],nfm_rendering_enabled:[760,"bool",!1,!1],nl_crt_df_gid:[3618,"string","","120363080354356818"],nl_df_gid:[3617,"string","",""],no_delete_message_time_limit:[1011,"bool",!1,!1],non_blocking_resume_from_open_tab_enabled:[3191,"bool",!1,!1],non_blocking_resume_from_open_tab_signal_enabled:[3622,"bool",!1,!1],non_message_data_request_logging_enabled:[2573,"bool",!1,!0],note_to_self:[1967,"bool",!1,!0],note_to_self_entry_point:[2630,"bool",!1,!0],notification_permission_deeplink_enabled:[7911,"bool",!1,!1],noyb_opt_out_flag:[3488,"bool",!1,!1],num_days_before_device_expiry_check:[731,"int",7,7],num_days_hosted_device_signed_identity_signature_expiration:[2461,"int",90,90],num_days_key_index_list_expiration:[730,"int",35,35],nux_sync:[1343,"bool",!1,!0],order_bizhome_badging_enabled:[5814,"bool",!1,!0],order_details_custom_item_enabled:[1176,"bool",!1,!0],order_details_from_cart_enabled:[1107,"bool",!1,!0],order_details_from_catalog_enabled:[1212,"bool",!1,!0],order_details_payment_instructions_enabled:[1595,"bool",!1,!0],order_details_payment_instructions_sync_enabled:[6670,"bool",!1,!1],order_details_payment_options:[1767,"string",'{"payment_options":[{"type":"JioPay","url_regex_list":["^https://www.jio.com/.*$","^https://t.jio/.*$","^http://tiny.jio.com/.*$"],"title":{"name":"jiopay_title","default_text":"Pay on Jio.com"},"subtitle":{"name":"jiopay_subtitle","default_text":"Go to Jio.com website"},"button":{"name":"jiopay_button","default_text":"Proceed to Jio.com"}}]}','{"payment_options":[{"type":"JioPay","url_regex_list":["^https://www.jio.com/.*$","^https://t.jio/.*$","^http://tiny.jio.com/.*$"],"title":{"name":"jiopay_title","default_text":"Pay on Jio.com"},"subtitle":{"name":"jiopay_subtitle","default_text":"Go to Jio.com website"},"button":{"name":"jiopay_button","default_text":"Proceed to Jio.com"}}]}'],order_details_payment_protection_link:[3014,"string","https://faq.whatsapp.com/725152392426717","https://faq.whatsapp.com/725152392426717"],order_details_quick_pay:[1600,"string",'{"allowed_product_type":"none"}','{"allowed_product_type":"none"}'],order_details_total_maximum_value:[1684,"float",5e8,5e8],order_details_total_minimum_value:[1683,"int",0,0],order_details_total_order_minimum_value:[1719,"float",1,1],order_management_enabled:[1188,"bool",!1,!1],order_messages_ephemeral_exception_enabled:[3240,"bool",!1,!0],order_payment_amount_detection_enabled:[6151,"bool",!1,!1],order_show_payment_request_on_payment_amount_detection_enabled:[6167,"bool",!1,!1],order_statuses_revamp_m1_enabled:[5770,"bool",!1,!0],orders_expansion_paying_enabled:[3771,"bool",!1,!1],orders_expansion_receiver_countries_allowed:[3690,"string","",""],orders_two_fold_confirmation_enabled:[7238,"bool",!1,!1],original_quality_data_warning_max_mb:[3306,"int",16,16],original_quality_image_min_edge:[3068,"int",2560,2560],original_quality_minimum_elements_to_show_data_warning_dialog:[3613,"int",20,20],original_quality_show_data_warning_dialog:[3307,"bool",!1,!0],otp_mask_linked_devices:[6673,"bool",!1,!0],otp_mask_linked_devices_learn_more_link:[7550,"string","https://faq.whatsapp.com/659113242716268","https://faq.whatsapp.com/659113242716268"],otp_ttl_inject_receipt_enabled:[3710,"bool",!1,!0],out_of_sync_disappearing_messages_logging:[2561,"bool",!1,!0],pairless_logging_attribution_window:[3017,"int",7,7],parent_group_admins_limit:[1655,"int",20,20],parent_group_allow_member_added_groups_default_on_creation:[4530,"bool",!1,!0],parent_group_allow_member_added_groups_m1:[3829,"bool",!1,!0],parent_group_allow_member_added_groups_m2:[4184,"bool",!1,!0],parent_group_allow_member_suggest_existing_m3_receiver:[5078,"bool",!1,!0],parent_group_allow_member_suggest_existing_m3_sender:[5077,"bool",!1,!0],parent_group_announcement_comment_subscription_enabled:[4729,"bool",!1,!1],parent_group_announcement_comments_banner:[5656,"bool",!1,!0],parent_group_announcement_comments_enabled:[4727,"bool",!1,!0],parent_group_announcement_comments_history_sync_receiver_enabled:[5813,"bool",!1,!1],parent_group_announcement_comments_participant_limit:[4728,"int",1024,1024],parent_group_announcement_comments_receiver_enabled:[5141,"bool",!1,!0],parent_group_announcement_comments_receiver_validation_killswitch:[6416,"bool",!1,!1],parent_group_announcement_comments_sender_use_lid:[5660,"bool",!1,!1],parent_group_create_enabled_for_smb_on_web:[2206,"bool",!1,!0],parent_group_create_privacy:[2356,"bool",!1,!0],parent_group_directory_enabled:[3795,"bool",!1,!0],parent_group_enhanced_description_enabled:[3154,"bool",!1,!0],parent_group_home_header_actions_enabled:[3267,"bool",!1,!1],parent_group_info_updates_enabled:[3616,"bool",!1,!1],parent_group_join_request_system_enabled:[5109,"bool",!1,!1],parent_group_link_limit:[1238,"int",100,100],parent_group_link_limit_community_creation:[1990,"int",10,20],parent_group_member_can_add_default_everyone_enabled:[5385,"bool",!1,!1],parent_group_member_can_add_enabled:[4654,"bool",!1,!1],parent_group_min_participants_for_group_entry_point:[2382,"int",20,1],parent_group_no_disclaimer:[2447,"bool",!1,!0],parent_group_no_subgroup_requirement:[3167,"bool",!1,!0],parent_group_remove_orphaned_members:[3079,"bool",!1,!0],parent_group_subgroup_filter:[3147,"bool",!1,!1],parent_group_tap_to_add_enabled:[2446,"bool",!1,!0],parent_group_tap_to_request_enabled:[2436,"bool",!1,!0],parent_group_view_enabled:[982,"bool",!1,!0],parent_group_view_enabled_for_smb_on_web:[2205,"bool",!1,!0],payment_stickers_render_enabled:[812,"bool",!1,!1],payments_br_content_optimization_variant:[4248,"int",3,3],payments_br_info_architecture_orders_hub_enabled:[4976,"bool",!1,!1],payments_br_installment_buyer_learn_more_link:[4144,"string","https://faq.whatsapp.com/1134168457974360","https://faq.whatsapp.com/1134168457974360"],payments_br_installment_seller_learn_more_link:[4254,"string","https://faq.whatsapp.com/253337763937767","https://faq.whatsapp.com/253337763937767"],payments_br_pix_phase_1_seller_enabled:[4781,"bool",!1,!1],payments_br_pix_phase_1_seller_sync_enabled:[7024,"bool",!1,!1],payments_br_pix_phase_2_seller_enabled:[5861,"bool",!1,!1],payments_br_pix_quick_reply_enabled:[7857,"bool",!1,!1],payments_br_supported_payment_method_seller_enabled:[5862,"bool",!1,!1],payments_expressive_backgrounds_enabled:[605,"bool",!1,!0],payments_info_architecture_orders_hub_enabled:[5414,"bool",!1,!1],payments_link_to_lite_consumer_enabled:[3051,"bool",!1,!0],payments_merchant_global_orders_value_props_banner_enabled:[3744,"bool",!1,!0],payments_merchant_global_orders_value_props_banner_logging_enabled:[5255,"bool",!0,!0],pdf_auto_start_interval_seconds:[3479,"int",86400,30],pdf_client_driven_rollout_enabled:[4679,"bool",!1,!0],pdf_external_deeplink_enabled:[4100,"bool",!1,!0],pdf_max_download_jitter_time_seconds:[4680,"int",180,180],pdf_md_support_enabled:[4779,"bool",!1,!0],per_send_hd_video_setting_enabled:[3935,"bool",!1,!0],per_send_hd_video_setting_for_groups_enabled:[4138,"bool",!1,!0],persisted_profile_name:[3366,"bool",!1,!1],pinned_messages_m0:[3138,"bool",!0,!0],pinned_messages_m1_receiver:[3139,"bool",!0,!0],pinned_messages_m1_sender:[3140,"bool",!0,!0],pinned_messages_m1_sender_debug_expiry_duration_secs:[3813,"int",86400,86400],pinned_messages_m2:[3141,"bool",!1,!1],pinned_messages_m2_image_thumbnail:[7467,"bool",!1,!1],pinned_messages_m2_pin_max:[3732,"int",1,1],pinned_messages_sender_short_expiry_durations_enabled:[4432,"bool",!1,!1],pinned_messsages_m1_receiver_first_time_server_ts_storage:[5474,"bool",!0,!0],placeholder_chat_open_group_fetch:[3644,"bool",!1,!1],placeholder_chat_open_group_fetch_size_limit:[3749,"int",33,65],placeholder_message_key_hash_logging:[2639,"bool",!1,!0],placeholder_message_resend:[3579,"bool",!1,!1],placeholder_message_resend_maximum_days_limit:[3639,"int",14,14],played_self_enabled:[361,"bool",!1,!1],plm_products_max_batch_fetch_size:[464,"int",18,18],pnh_1on1_lid_expected:[3469,"bool",!1,!0],pnh_1on1_report_lid_message_send:[4178,"bool",!1,!1],pnh_cag_block_lid_in_limbo:[2962,"bool",!0,!0],pnh_cag_disable_polls_group_size:[5056,"int",1e4,1e4],pnh_cag_disable_reactions_group_size:[4495,"int",1e4,1e4],pnh_cag_future_proof_banner:[2433,"bool",!1,!1],pnh_cag_show_masked_members:[2346,"bool",!1,!1],pnh_cag_upgrade:[2304,"int",0,0],pnh_companion_history_sync_lid_chat:[3481,"bool",!1,!0],pnh_copy_identity_keys_and_devices:[4476,"bool",!1,!0],pnh_ctwa:[1823,"bool",!1,!0],pnh_ctwa_consumer_ui:[6355,"bool",!0,!0],pnh_ctwa_mat_crashlog:[3691,"bool",!1,!1],pnh_ctwa_show_privacy_system_msg:[6336,"bool",!0,!0],pnh_group_lid:[2507,"int",0,0],pnh_historical_mapping_retention_seconds:[1429,"int",7776e3,7776e3],pnh_identity_verification_v3:[2751,"bool",!1,!1],pnh_identity_verification_v3_pn_generation:[3458,"bool",!1,!1],pnh_pn_for_lid_chat_sync:[3062,"bool",!1,!0],pnh_prevent_undefined_lid_chat_origin:[3872,"bool",!1,!1],pnh_split_thread_case1_detection:[2939,"bool",!1,!0],pnh_split_threads_detection:[2479,"bool",!1,!1],pnh_sync_identity_keys_and_devices:[4533,"bool",!1,!0],poll_a11y_enabled:[2390,"bool",!1,!0],poll_animations_enabled:[5753,"bool",!1,!0],poll_chatlist_preview_enabled:[2720,"bool",!1,!0],poll_cleanup_days:[1410,"int",31,31],poll_creation_cag_enabled:[2738,"bool",!1,!1],poll_creation_enabled:[1394,"bool",!1,!1],poll_creation_one_on_one_chats_enabled:[2194,"bool",!1,!1],poll_name_length:[1406,"int",255,255],poll_offline_accuracy:[1409,"int",30,30],poll_option_count:[1408,"int",12,12],poll_option_length:[1407,"int",100,100],poll_receiving_cag_enabled:[2737,"bool",!1,!1],poll_receiving_enabled:[1395,"bool",!1,!1],poll_result_details_view_enabled:[1948,"bool",!0,!0],poll_update_drop_unknowns:[6662,"bool",!1,!1],poll_vote_processing_enabled:[1541,"bool",!1,!1],polls_fast_follow_enabled:[2661,"bool",!0,!0],polls_notification_enabled:[3158,"bool",!0,!0],polls_reply_support_enabled:[2663,"bool",!1,!0],polls_search_support_enabled:[2662,"bool",!1,!0],polls_single_option_control_enabled:[3050,"bool",!1,!0],polls_single_option_receiver_control_enabled:[3437,"bool",!0,!0],polls_single_option_reciever_control_enabled:[3434,"bool",!0,!0],polls_single_option_sender_control_enabled:[3433,"bool",!1,!0],portrait_thumb_enabled_chat:[1961,"bool",!1,!0],portrait_thumb_enabled_status:[1962,"bool",!1,!0],post_status_in_companion:[4905,"bool",!1,!1],prekey_fetch_iq_for_missing_devices_enabled:[2193,"bool",!1,!1],prekey_fetch_iq_pnh_lid_enabled:[3103,"bool",!1,!1],premium_blue_enabled:[5318,"bool",!1,!1],primary_feature_sync:[1063,"bool",!1,!0],privacy_allow_contacts_except:[808,"bool",!1,!1],privacy_disable_link_previews:[7955,"bool",!1,!0],privacy_narrative_v1:[1071,"bool",!1,!1],privacy_tip_expiration_min:[4214,"int",10080,10080],privacy_tips_callers_build:[3996,"bool",!1,!1],privacy_tips_groups_build:[3995,"bool",!1,!1],privacy_tips_killswitch:[4314,"bool",!1,!1],privacy_tips_profile_build:[3998,"bool",!1,!1],privacy_tips_status_build:[3997,"bool",!1,!1],private_stats_biz_view_logging_enabled:[904,"bool",!1,!1],proactive_distribute_sender_keys_enabled:[2757,"bool",!1,!0],product_catalog_qpl_direct_connection_status_logging_enabled:[2024,"bool",!1,!0],product_catalog_qpl_logging_enabled:[2003,"bool",!1,!0],product_search_m1_enabled:[1678,"bool",!1,!0],profile_photo_rings_for_status_enabled:[1533,"bool",!1,!0],profile_photo_rings_for_status_on_web_enabled:[2512,"bool",!1,!0],profile_picture_deeplink_enabled:[7634,"bool",!1,!1],project_pdf_enabled:[2575,"bool",!1,!0],ptt_button_toggle_cooldown:[5384,"int",0,0],ptt_conversation_waveform:[637,"bool",!1,!0],ptt_draft_enabled:[777,"bool",!1,!0],ptt_pausable_enabled:[871,"bool",!1,!0],ptt_remember_play_position:[952,"bool",!1,!0],ptt_transcription_enabled:[2890,"bool",!1,!0],ptt_waveform_send:[746,"bool",!1,!0],ptv_autoplay_enabled:[3482,"bool",!0,!0],ptv_autoplay_loop_limit:[3483,"int",3,3],ptv_button_animation_enabled:[5317,"bool",!1,!0],ptv_button_persistence_enabled:[4549,"bool",!1,!1],ptv_button_redesign_version:[5507,"int",0,0],ptv_button_reset_minimize_threshold:[5386,"int",-1,-1],ptv_button_tooltip_animation_enabled:[5292,"bool",!1,!0],ptv_max_duration_seconds:[3356,"int",60,60],ptv_nux_enabled:[4548,"bool",!1,!0],ptv_receiving_enabled:[3355,"bool",!1,!0],ptv_recording_countdown_interval:[5412,"int",500,500],ptv_sending_enabled:[3354,"bool",!1,!0],ptv_setting:[5418,"bool",!1,!1],ptv_setting_duration_threshold_seconds:[5483,"int",604800,604800],ptv_setting_sends_threshold:[5419,"int",-1,-1],qm_lean_msg:[1645,"bool",!1,!1],qp_campaign_client_enabled:[3536,"bool",!1,!1],qp_edit_profile_banner_surface_enabled:[7549,"bool",!1,!0],qp_migration_to_graphql_enabled:[7551,"bool",!1,!1],qp_push_notifications_enabled:[4200,"bool",!1,!1],qpl_enabled:[212,"bool",!1,!0],qpl_initial_upload_delay:[1223,"int",5,1],qpl_sampling_as_string:[466,"string",'json:{"sampling":[]}','json:{"sampling":[]}'],qpl_upload_delay:[215,"int",1440,1],quantity_controls_enabled:[1480,"bool",!1,!0],query_verified_name_when_msg_differs:[2549,"bool",!0,!0],quick_mute_enabled:[2765,"bool",!1,!1],quick_promotion_banner_client_enabled:[3712,"bool",!1,!1],rabbit_enabled:[3603,"bool",!1,!1],rbi_change_delete_behavior_block_report_flows:[6187,"bool",!1,!0],rbi_revamped_block_report_dialog_design:[6186,"bool",!1,!0],rbi_show_consistent_block_dialog_all_entry_points:[6185,"bool",!1,!0],reaction_cleanup_days:[987,"int",31,31],reaction_history_sync:[1179,"bool",!1,!1],reactions_allowlisted_channels:[4699,"string","","120363144141162927,120363160538286018"],reactions_animations:[1361,"bool",!1,!0],reactions_animations_simple:[1485,"bool",!1,!0],reactions_announcement_only:[1150,"bool",!1,!1],reactions_chat_preview:[1605,"bool",!1,!0],reactions_keyboard_hides_three_flags:[1792,"bool",!1,!1],reactions_keyboard_hides_three_flags_desktop_beta_rollout:[1796,"bool",!1,!1],reactions_panel_prekeys_fetch_enabled:[1828,"bool",!1,!0],reactions_receive:[827,"bool",!1,!0],reactions_send:[828,"bool",!1,!0],reactions_skin_tone_aggregation:[1593,"bool",!1,!1],recent_emojis_sync:[3198,"bool",!1,!1],recent_sticker_rollout_phase:[1829,"int",4,4],recommended_channels_background_refresh:[4309,"int",144e5,18e5],recommended_channels_cache_max_ttl:[4308,"int",0,0],recommended_channels_fetch_limit:[5205,"int",20,20],remove_optional_debug_info:[8036,"bool",!1,!1],report_block_classification_logging_enabled:[5245,"bool",!1,!0],report_block_improvements_for_groups_enabled:[8327,"bool",!1,!0],report_string_comprehension:[3032,"bool",!1,!0],report_to_admin_enabled:[3696,"bool",!1,!0],report_to_admin_kill_switch:[3695,"bool",!1,!0],retry_receipt_error_code_enabled:[3750,"bool",!1,!0],revokes_logging_unsampled:[1865,"bool",!0,!0],reword_subject_to_group_name_enabled:[3088,"bool",!1,!0],row_buyer_order_revamp_m0_enabled:[4893,"bool",!1,!0],row_buyer_order_revamp_m0_nux_banner_enabled:[5518,"bool",!1,!0],rt_clean_reporting_tag:[6723,"int",-1,-1],rt_drop_message_invalid_type:[5793,"bool",!1,!1],rt_receive_reporting_tag:[5718,"bool",!1,!0],rt_send_reporting_tag:[5717,"bool",!1,!1],rt_sync_reporting_tag:[6578,"bool",!0,!0],rt_validate_message_type:[5716,"bool",!1,!0],saga_copy:[7044,"bool",!1,!0],saga_enabled:[5626,"bool",!1,!1],saga_mvp_enabled:[5881,"bool",!1,!1],saga_mvp_value:[6296,"int",0,0],saga_v1_test_enabled:[7752,"bool",!1,!1],search_the_web_dialog_redesign:[8171,"bool",!1,!0],seller_order_payment_request_enabled:[5574,"bool",!1,!1],seller_orders_management_revamp:[5190,"bool",!1,!1],send_cag_member_revokes_as_GDM:[3069,"bool",!0,!0],send_cart_cta_long_button_alternative_text_type:[2153,"int",0,0],send_cart_cta_long_button_enabled:[1660,"bool",!0,!0],send_document_thumb_in_message_disabled:[253,"bool",!1,!0],send_extended_nack_enabled:[3280,"bool",!1,!1],send_link_thumb_in_message_disabled:[254,"bool",!1,!1],send_message_drop_nack_enabled:[3741,"bool",!1,!1],send_message_drop_old_couter_nack_enabled:[4213,"bool",!1,!1],send_reaction_from_details_pane:[2170,"bool",!1,!1],send_status_thumb_in_message_disabled:[252,"bool",!1,!1],send_thumb_mms_status_pjpeg_image:[7835,"bool",!1,!1],sender_key_expired_logging_enabled:[1185,"bool",!1,!1],sender_revoke_ui:[1335,"bool",!1,!0],sender_revoke_window_receiver:[1334,"bool",!1,!0],sender_revoke_window_sender:[1333,"bool",!1,!0],server_groups_receive_mex_property_update_notif:[7632,"bool",!1,!0],service_improvement_opt_out_flag:[3664,"bool",!1,!1],settings_search:[2800,"bool",!1,!1],share_own_pn_sync:[3070,"bool",!1,!0],share_phone_number_on_cart_send_to_direct_connection_biz_enabled:[1867,"bool",!0,!0],shops_storefront_url_format:[1054,"string","https://www.facebook.com/%s/shop/","https://www.facebook.com/%s/shop/"],show_bottom_sheet_gallery:[3844,"bool",!1,!0],show_channels_not_available_dialog:[3880,"bool",!1,!0],show_shops_sunset_banner:[1949,"bool",!1,!0],silent_group_exit:[1527,"bool",!1,!0],silent_group_exit_db:[1613,"bool",!1,!0],silent_group_exit_dialog:[1597,"bool",!1,!0],silent_group_exit_past_participants:[1528,"bool",!1,!0],silent_group_exit_sync:[1598,"bool",!1,!0],similar_channels_in_channel_details_enabled:[7473,"bool",!1,!0],similar_channels_in_thread_on_follow_enabled:[7472,"bool",!1,!0],similar_channels_max_limit:[7559,"int",10,10],similar_channels_min_limit:[7560,"int",4,4],single_e2ee_session_migration_state_incoming:[7821,"int",0,0],single_e2ee_session_migration_state_outgoing:[7820,"int",0,0],smart_filters_enabled:[1015,"bool",!1,!0],smart_filters_enabled_consumer:[1287,"bool",!1,!0],smb_billing_enabled:[1583,"bool",!1,!1],smb_billing_logging_enabled:[1672,"bool",!1,!0],smb_billing_premium_access_config:[1619,"string","",""],smb_biz_profile_custom_url:[2582,"bool",!1,!1],smb_biz_profile_custom_url_notifications:[2583,"bool",!1,!1],smb_biz_profile_logging_enabled:[1255,"bool",!1,!0],smb_broadcast_logging_enabled:[1253,"bool",!1,!0],smb_business_action_bar_enabled:[5719,"bool",!1,!1],smb_business_action_bar_exposed:[6184,"bool",!1,!0],smb_capi_coexistence_enabled:[2588,"bool",!1,!0],smb_catalog_collection_items_reordering_enabled:[1794,"bool",!0,!0],smb_catalog_collections_reordering_enabled:[1688,"bool",!0,!0],smb_catalog_graphql_add_product:[7322,"bool",!1,!1],smb_catalog_graphql_appeal_collection:[7330,"bool",!1,!1],smb_catalog_graphql_appeal_product:[7326,"bool",!1,!1],smb_catalog_graphql_create_collection:[7319,"bool",!1,!1],smb_catalog_graphql_create_product_catalog:[7320,"bool",!1,!1],smb_catalog_graphql_delete_collection:[7329,"bool",!1,!1],smb_catalog_graphql_edit_product:[7323,"bool",!1,!1],smb_catalog_graphql_get_collection:[7331,"bool",!1,!1],smb_catalog_graphql_get_product:[7324,"bool",!1,!1],smb_catalog_graphql_get_product_catalog:[7321,"bool",!1,!1],smb_catalog_graphql_get_single_collection:[7332,"bool",!1,!1],smb_catalog_graphql_report_product:[7325,"bool",!1,!1],smb_catalog_graphql_update_collection:[7327,"bool",!1,!1],smb_catalog_graphql_update_collection_list:[7328,"bool",!1,!1],smb_catalog_messages_download_thumbnail_on_receiver_enabled:[3247,"bool",!1,!1],smb_catkit_query_version:[1229,"int",1,1],smb_click_to_chat_logging_enabled:[1252,"bool",!1,!0],smb_client_side_linkshim_enabled:[2633,"bool",!0,!0],smb_client_side_linkshim_signed_regexp:[2634,"string","https:\\/\\/n\\.wl\\.co\\/[^/]*\\/[^/]*\\/(.*)$","https:\\/\\/n\\.wl\\.co\\/[^/]*\\/[^/]*\\/(.*)$"],smb_collections_appeal_flow_enabled:[724,"bool",!1,!1],smb_collections_enabled:[451,"bool",!1,!0],smb_custom_url_display_v2_enabled:[1849,"bool",!1,!0],smb_dcp_enabled:[1701,"bool",!1,!1],smb_ecommerce_compliance_india_m4:[1003,"bool",!1,!0],smb_ecommerce_compliance_india_m4_5:[1192,"bool",!1,!0],smb_graphql_to_fetch_qp_enabled:[7645,"bool",!1,!1],smb_graphql_to_fetch_qp_frequency_mins:[7646,"int",1320,5],smb_graphql_to_fetch_qp_surface_ids:[7647,"string","",""],smb_hide_unsupported_currency_price:[1203,"bool",!1,!0],smb_label_improvements_m2:[5463,"bool",!1,!0],smb_label_improvements_reordering:[6162,"bool",!1,!1],smb_labels_ctwa_data_sharing:[5009,"bool",!1,!0],smb_marketing_messages_enabled:[3046,"bool",!1,!0],smb_marketing_messages_product_ids:[3113,"string","",""],smb_md_agent_chat_assignment_chat_list_new_label_enabled:[2976,"bool",!1,!0],smb_md_agent_chat_assignment_chats_reorder_on_chat_assignment_enabled:[2787,"bool",!1,!0],smb_md_agent_chat_assignment_chats_reorder_on_chat_unassignment_enabled:[2788,"bool",!1,!0],smb_md_agent_chat_assignment_enabled:[1798,"bool",!1,!0],smb_md_agent_chat_assignment_notifications_enabled:[2908,"bool",!1,!0],smb_md_agent_chat_assignment_nux_impressions:[2207,"int",0,3],smb_md_agent_chat_assignment_system_messages_chats_reorder_enabled:[2778,"bool",!1,!0],smb_md_agent_chat_assignment_system_messages_enabled:[2157,"bool",!1,!0],smb_md_agent_chat_assignment_system_messages_logging_v2_enabled:[2709,"bool",!1,!0],smb_melon_display_enabled:[1483,"bool",!1,!1],smb_melon_logging_enabled:[1669,"bool",!1,!0],smb_melon_management_enabled:[1484,"bool",!1,!1],smb_message_labels_ctwa_data_sharing:[5324,"bool",!1,!0],smb_meta_verified_context_card:[8313,"bool",!1,!0],smb_multi_device_agents_enabled:[1438,"bool",!1,!0],smb_multi_device_agents_logging_V2_enabled:[1897,"bool",!1,!0],smb_multi_device_agents_logging_enabled:[1671,"bool",!1,!0],smb_multi_device_awareness:[1074,"bool",!1,!0],smb_multi_device_message_attribution_enabled:[1981,"bool",!1,!0],smb_mv_profile_edit_web_content_enabled:[8212,"bool",!1,!0],smb_notes_v1_enabled:[7710,"bool",!1,!1],smb_orange_enabled:[1469,"bool",!1,!1],smb_phase_out_not_a_business:[1263,"bool",!1,!0],smb_phase_out_not_a_business_V2:[1771,"bool",!1,!0],smb_premium_md_limit_perf_tracker_enabled:[1591,"bool",!1,!0],smb_premium_messages_click_logging_enabled:[4657,"bool",!1,!0],smb_premium_messages_interactivity_catalog_cta_consumer_enabled:[4957,"bool",!1,!0],smb_premium_messages_spam_report_enabled:[4005,"bool",!1,!0],smb_premium_messages_url_cta_alert_dialog_enabled:[5044,"bool",!0,!0],smb_product_price_label:[1417,"string","control","control"],smb_quick_replies_v2_enabled:[875,"bool",!1,!1],smb_rambutan_enabled:[3124,"bool",!1,!0],smb_rambutan_product_ids:[3125,"string","",""],smb_registration_flow_logging_enabled:[1256,"bool",!1,!0],smb_status_logging_enabled:[1254,"bool",!1,!0],smb_temp_cover_photo_privacy_messaging:[1913,"bool",!1,!0],smb_threads_logging_enabled:[1251,"bool",!1,!0],smba_premium_messages_insights_v2_trackable_link_domain:[6626,"string","w.meta.me","w.meta.me"],smba_premium_messages_interactivity_catalog_cta_consumer_enabled:[4942,"bool",!1,!0],smba_premium_messages_leaving_wa_content:[6693,"bool",!0,!0],soox_long_press_duration_ms:[4922,"int",500,500],soox_media_send_keep_old_button:[4297,"bool",!1,!1],state_filter_aa_texas:[7572,"bool",!1,!1],status_caption_link_detection_enabled:[2032,"bool",!1,!0],status_deeplink_enabled:[7965,"bool",!1,!0],status_from_me_unseen_enabled:[2039,"bool",!1,!0],status_inline_link_preview_enabled:[1522,"bool",!1,!0],status_ptt_max_duration_second:[6845,"int",30,30],status_quick_reply_enabled:[1455,"bool",!1,!0],status_quick_reply_receiver_changes_enabled:[1974,"bool",!1,!0],status_reaction_emojis:[1852,"string","[128525, 128514, 128558, 128546, 128591, 128079, 127881, 128175]","[128525, 128514, 128558, 128546, 128591, 128079, 127881, 128175]"],status_reply_received_logging_enabled:[1859,"bool",!1,!0],status_stop_download_at_image_quality_scan_index:[6623,"int",2,2],status_thumb_ignore_thumb_in_message:[8122,"bool",!1,!1],status_thumb_mms_aspect_fill:[8218,"bool",!1,!1],status_thumb_mms_compression:[8216,"float",.48,.48],status_thumb_mms_max_edge_size:[8217,"float",96,96],status_thumb_prefer_progressive_over_mms:[8123,"bool",!1,!1],status_video_max_duration:[175,"int",30,30],status_video_max_duration_second:[6728,"int",30,30],status_view_error_type_logging_enabled:[2086,"bool",!0,!0],sticker_md_favorite_stickers_enabled:[864,"bool",!1,!1],stop_abprops_traffic_in_serverprops_response:[315,"bool",!1,!1],support_message_feedback_enabled:[7080,"bool",!1,!1],support_ticket_data_collection_improvements:[4150,"bool",!1,!1],support_ticket_device_log_retention_period_days:[5553,"int",3,3],support_ticket_stop_uploading_device_logs:[4242,"bool",!1,!1],supported_encoder_decoder_logging_enabled:[5977,"bool",!1,!0],supports_keep_in_chat_in_cag:[2844,"bool",!0,!0],suspicious_link_rtlo_unlinkified:[8028,"bool",!0,!0],sync_archive_v2_setting:[736,"bool",!1,!1],syncd_additional_mutations_count:[2777,"int",1,1],syncd_do_not_fatal_on_snapshot_mac_mismatch_in_patches:[2007,"bool",!1,!1],syncd_periodic_sync_days:[1400,"int",0,0],syncd_report_key_stats:[3301,"bool",!1,!0],system_msg_numbers_fb_branded:[1035,"string","16505434800,16503130062,16507885324,16508620604,16504228206,447710173736,16315551023,16505361212,16508129150,16315555102,16315558723,16505212669,16507885280,19032707825,0","16505434800,16503130062,16507885324,16508620604,16504228206,447710173736,16315551023,16505361212,16508129150,16315555102,16315558723,16505212669,16507885280,19032707825,0"],system_msg_numbers_fb_inc:[1036,"string","",""],system_msg_text_styling:[6246,"bool",!1,!1],system_msg_truncation:[6247,"bool",!1,!1],system_msg_update:[5189,"bool",!1,!1],tam_attachment_cache_compaction_enabled:[838,"bool",!1,!1],tctoken_duration:[865,"int",604800,604800],tctoken_duration_sender:[996,"int",604800,604800],tctoken_num_buckets:[909,"int",4,4],tctoken_num_buckets_sender:[997,"int",4,4],template_button_improvements_on:[3444,"bool",!0,!0],text_status_ttl_seconds_allowlist:[6153,"string","86400,259200,604800,1209600","86400,259200,604800,1209600"],text_status_url_logging_enabled:[1851,"bool",!1,!0],threads_logging_observe_list_enabled:[1168,"bool",!1,!0],top_menu_redesign_enabled:[4545,"bool",!1,!1],tos_3_client_gating_enabled:[791,"bool",!1,!1],tos_client_state_fetch_enabled:[877,"bool",!1,!1],tos_client_state_fetch_iteration:[908,"int",0,0],trusted_contacts:[794,"bool",!1,!1],trusted_contacts_chat_state_optimization:[1566,"string","old","old"],trusted_contacts_op:[1687,"bool",!1,!0],trusted_contacts_reciprocity:[1437,"bool",!1,!1],trusted_contacts_sender:[995,"bool",!1,!1],trusted_contacts_ti:[922,"bool",!1,!1],ts_bit_array_enabled:[3859,"bool",!1,!1],ts_business_interactions_enabled:[6715,"bool",!1,!1],ts_external_enabled:[4928,"bool",!1,!1],ts_navigation_channels_enabled:[5040,"bool",!1,!0],ts_navigation_community_enabled:[3858,"bool",!1,!1],ts_session_duration_ms:[3860,"int",6e5,6e5],ts_smb_catalog:[6547,"bool",!1,!1],ts_surface_killswitch:[4929,"int",0,0],ug_chat_banner_enabled:[5002,"bool",!1,!0],ug_chat_banner_visibility_max_seconds:[5016,"int",432e3,432e3],ug_chat_banner_visibility_min_seconds:[5119,"int",0,0],ugc_enabled:[3011,"bool",!1,!0],ugc_participant_limit:[4118,"int",5,5],ugr_enabled:[3010,"bool",!1,!0],unified_e2ee_backup_page:[5113,"bool",!1,!1],unified_e2ee_bottomsheet:[5111,"bool",!1,!1],unified_e2ee_copy_build:[3999,"bool",!1,!1],unified_e2ee_copy_launch:[4869,"bool",!1,!1],unified_e2ee_security_page:[5112,"bool",!1,!1],unified_e2ee_ui_build:[4e3,"bool",!1,!1],unified_e2ee_ui_launch:[4870,"bool",!1,!1],unified_otp_copy_code_url:[3827,"string","https://www.whatsapp.com/otp/copy/","https://www.whatsapp.com/otp/copy/"],unified_otp_retriever_url:[3828,"string","https://www.whatsapp.com/otp/code","https://www.whatsapp.com/otp/code"],unified_pin_addon_infra_enabled:[4475,"bool",!1,!1],unified_poll_vote_addon_infra_enabled:[6046,"bool",!1,!1],unified_reaction_addon_infra_enabled:[6877,"bool",!1,!1],unified_user_profile_navigation_enabled:[3523,"bool",!1,!1],updates_remote_search_enabled:[5851,"bool",!0,!0],updates_search_enabled:[5769,"bool",!1,!0],updates_tab_open_channels_fields_logging_enabled:[5489,"bool",!1,!0],updates_tab_search_logging_enabled:[5909,"bool",!1,!0],updates_tab_status_large_tiles_enabled:[7516,"bool",!1,!1],upload_document_thumb_mms_enabled:[247,"bool",!1,!0],upload_status_thumb_mms_enabled:[246,"bool",!1,!1],url_send_receive_logging_enabled:[2430,"bool",!1,!0],us_aa:[7671,"bool",!1,!1],use_appdata_stanza_on_receiver:[2795,"bool",!1,!1],use_appdata_stanza_on_sender:[2796,"bool",!1,!1],use_mex_to_fetch_bot_list:[7240,"bool",!1,!1],username_1on1_chat:[4748,"bool",!1,!1],username_change:[4747,"bool",!1,!1],username_chat_search_debounce_interval_ms:[7512,"int",1500,1500],username_contact_display:[4746,"bool",!1,!1],username_creation:[4745,"bool",!1,!1],username_group_participants:[4749,"bool",!1,!1],username_security_code_generation:[7468,"bool",!1,!0],username_security_code_verification:[7469,"bool",!1,!1],username_usync:[5290,"bool",!1,!1],usync_lid:[1892,"bool",!1,!1],utm_tracking_enabled:[2895,"bool",!1,!1],utm_tracking_expiration_hours:[2896,"int",24,24],v_id_deprecation_enabled:[2334,"bool",!1,!0],vcard_max_size_kb:[6736,"int",5e3,5e3],verified_business_numbers:[3969,"string","{}",'{"paytm":[917531875318, 919004990049]}'],verified_business_numbers_for_business_name_update:[4006,"string","","917531875318,919004990049"],video_stream_buffering_ui_enabled:[2167,"bool",!1,!0],view_all_replies:[4036,"bool",!1,!1],view_all_replies_enabled:[4215,"bool",!1,!1],view_once_sp_receiver:[1710,"bool",!1,!1],view_once_sp_sender:[1711,"bool",!1,!1],visible_message_drop_placeholder_enabled_internal_only:[7287,"bool",!1,!0],vname_cert_deprecation:[5001,"bool",!1,!0],vname_logging_and_debugging:[3961,"bool",!0,!0],voice_status_receipt_enabled:[1875,"bool",!0,!0],voice_status_receipt_on_web_enabled:[2513,"bool",!1,!0],wa_biz_tool_logging_improvement:[3169,"bool",!1,!0],wa_ctwa_action_banner_logging_enabled:[1866,"bool",!1,!0],wa_ctwa_action_banner_logging_enabled_web:[4022,"bool",!1,!0],wa_ctwa_ads_action_banner_enabled:[1495,"bool",!1,!0],wa_ctwa_ads_action_banner_enabled_web:[4021,"bool",!1,!0],wa_ctwa_web_dc_logging_enabled:[2487,"bool",!1,!1],wa_ctwa_web_entrypoint_home_banner_enabled:[3096,"bool",!1,!1],wa_ctwa_web_entrypoint_home_header_dropdown_enabled:[3095,"bool",!1,!1],wa_ctwa_web_entrypoint_home_header_enabled:[3058,"bool",!1,!1],wa_ctwa_web_entrypoint_home_icon_tooltip_enabled:[3242,"bool",!1,!1],wa_ctwa_web_entrypoint_manage_ads_home_header_dropdown_enabled:[3376,"bool",!1,!1],wa_ctwa_web_entrypoint_pageless_enabled:[3293,"bool",!1,!1],wa_ctwa_web_fetch_linked_accounts_enabled:[3294,"bool",!1,!1],wa_ctwa_web_thread_ad_attribution_enabled:[2898,"bool",!1,!1],wa_web_business_tools_top_card_enabled:[8191,"bool",!1,!1],wabai_consent_cooldown:[5746,"int",-1,-1],wabai_consent_required:[5747,"bool",!1,!1],wabai_marketing_message_content_gen_enabled:[5224,"bool",!1,!1],wabai_message_feedback_enabled:[5215,"bool",!1,!1],wabai_message_rendering_enabled:[4873,"bool",!1,!1],wae_metadata_integrity_timeout_minutes:[4849,"int",5,5],wamo_sub_admin_enabled:[7829,"bool",!1,!1],wamo_sub_consumer_enabled:[7828,"bool",!1,!1],wds_radius_and_casing:[3350,"bool",!1,!0],web_2fa:[1195,"bool",!1,!1],web_abort_building_e2e_proto_on_error:[5388,"bool",!1,!0],web_abort_decrypting_e2e_on_error:[5389,"bool",!1,!0],web_abprop_block_catalog_creation_ecommerce_compliance_india:[894,"bool",!1,!1],web_abprop_business_profile_incomplete_nux_banner:[710,"bool",!1,!1],web_abprop_business_profile_refresh_cover_photo_view_enabled:[766,"bool",!1,!1],web_abprop_business_profile_refresh_edit_cover_photo_enabled:[765,"bool",!1,!1],web_abprop_business_profile_refresh_linked_account_enabled:[764,"bool",!1,!1],web_abprop_business_profile_refresh_linked_accounts_killswitch:[1351,"bool",!1,!1],web_abprop_business_profile_refresh_status_enabled:[763,"bool",!1,!1],web_abprop_catalog_icon_on_top_bar:[734,"bool",!1,!1],web_abprop_chatd_login_cookie_enabled:[1371,"bool",!1,!1],web_abprop_click_nux_banner_migration:[712,"bool",!1,!1],web_abprop_collections_display:[584,"bool",!1,!1],web_abprop_collections_management:[585,"bool",!1,!1],web_abprop_collections_nux_banner:[741,"bool",!1,!1],web_abprop_core_wam_runtime:[1753,"bool",!1,!1],web_abprop_ctwa_context_compose_enabled:[591,"bool",!1,!1],web_abprop_device_agnostic_voip:[1675,"bool",!1,!1],web_abprop_direct_connection_md:[869,"bool",!1,!0],web_abprop_document_resume_upload:[1247,"bool",!1,!1],web_abprop_drop_full_history_sync:[600,"bool",!1,!1],web_abprop_ecommerce_compliance_india:[717,"bool",!1,!1],web_abprop_edit_ecommerce_compliance_india:[826,"bool",!1,!1],web_abprop_emoji_experimental_api:[1932,"bool",!1,!1],web_abprop_ephemeral_messages_allowed_values:[593,"string","604800","604800"],web_abprop_group_description_length:[592,"int",0,0],web_abprop_large_files_encryption_optimization:[1086,"bool",!1,!1],web_abprop_media_links_docs_search:[2063,"bool",!1,!1],web_abprop_mute_notifications_on_app_focus:[1824,"bool",!1,!0],web_abprop_nux_cart_interstitial:[761,"bool",!1,!1],web_abprop_product_catalog_nux_banner:[711,"bool",!1,!1],web_abprop_remove_downloaded_files:[1496,"bool",!1,!1],web_abprop_remove_uploaded_files:[1481,"bool",!1,!1],web_abprop_screen_lock_enabled:[1680,"bool",!1,!1],web_abprop_screen_lock_show_learn_more_link:[4790,"bool",!1,!1],web_abprop_screen_sharing_enabled:[1189,"bool",!1,!1],web_abprop_skip_file_copy_on_attach:[1174,"bool",!1,!1],web_abprop_stateful_enumeration_enabled:[887,"bool",!0,!0],web_accidental_delete_for_me:[1752,"bool",!0,!0],web_account_table:[6534,"bool",!1,!1],web_adaptive_offline_resume_enabled:[1224,"bool",!1,!1],web_add_non_contacts_to_groups_enabled:[5677,"bool",!1,!1],web_address_capture_message_enabled:[1385,"bool",!1,!1],web_animate_messages:[4952,"bool",!1,!1],web_animate_new_messages:[5523,"bool",!1,!0],web_anyone_can_add_group_setting_enabled:[5080,"bool",!1,!0],web_app_health_heartbeat_enabled:[7025,"bool",!1,!1],web_attach_menu_redesign:[4032,"bool",!1,!0],web_auto_mute_256_groups_confirmation:[2533,"bool",!1,!1],web_autodownload_stickers:[7422,"bool",!1,!0],web_batch_online_read_receipts_enabled:[6631,"bool",!1,!1],web_biz_tools_on_navbar_enabled:[5708,"bool",!1,!1],web_browser_min_storage_quota:[3135,"int",5,5],web_browser_quota_threshold:[3134,"int",100,100],web_business_tools_drawer_enabled:[6803,"bool",!1,!1],web_butterbar_socket_reconnect_enabled:[7855,"bool",!1,!1],web_chat_with_unknown_contacts:[4670,"bool",!1,!1],web_chatlist_toggle:[1964,"bool",!1,!0],web_chatlock_enabled:[7047,"bool",!1,!1],web_client_pull_timeout_ms:[3890,"int",1e4,1e4],web_colors_refresh:[6663,"bool",!1,!1],web_column_data_serialization_enabled:[3970,"bool",!1,!1],web_comet_build_data_logging_verification:[8136,"bool",!1,!1],web_command_palette:[1726,"bool",!0,!0],web_command_palette_plugins:[5100,"bool",!1,!0],web_comments_receive_ui_enabled:[6682,"bool",!1,!1],web_comments_send_ui_enabled:[6683,"bool",!1,!1],web_comms_socket_reconnect_enabled:[7854,"bool",!1,!1],web_contact_form_show_articles:[5955,"bool",!1,!1],web_crypto_library_enabled:[2534,"bool",!1,!1],web_crypto_library_verification_enabled:[5320,"bool",!1,!1],web_crypto_library_with_queues_enabled:[4583,"bool",!1,!1],web_db_table_usage_enabled:[7073,"bool",!1,!1],web_default_pull_mode_enabled:[1355,"bool",!1,!1],web_delay_pp_until_offline_complete_enabled:[8134,"bool",!1,!1],web_deprecate_mms4_hash_based_download:[3152,"bool",!1,!0],web_design_refresh:[6665,"bool",!1,!1],web_design_refresh_hotpink:[6664,"bool",!1,!1],web_device_identity_lid_migration_cronjob:[7624,"bool",!1,!1],web_device_identity_lid_migration_read_using_lid:[7625,"bool",!1,!1],web_device_lid_migration_cronjob:[7704,"bool",!1,!1],web_device_lid_migration_read_using_lid:[7703,"bool",!1,!1],web_device_switching:[4792,"bool",!1,!0],web_device_sync_manager_enabled:[4024,"bool",!1,!1],web_device_sync_manager_group_enabled:[4453,"bool",!1,!1],web_disable_sw_on_safari_pwa:[7281,"bool",!1,!1],web_display_name_for_biz_vlevel_low_killswitch:[2716,"bool",!0,!0],web_display_name_for_enterprise_biz_vlevel_low_killswitch:[2715,"bool",!1,!1],web_draft_message_enabled:[4125,"bool",!1,!1],web_e2e_backfill_expire_time:[3234,"int",5,60],web_electron_active_reload:[2322,"bool",!0,!0],web_electron_deprecation_mac_appstore_stage_1_awareness:[5101,"bool",!0,!0],web_electron_deprecation_mac_appstore_stage_2_expiry_delay:[5365,"int",0,0],web_electron_deprecation_mac_appstore_stage_2_expiry_kickoff:[5364,"bool",!1,!1],web_electron_deprecation_mac_sideload_stage_1_awareness:[5018,"bool",!0,!0],web_electron_deprecation_mac_sideload_stage_1_bbar_dismiss_duration_days:[5294,"int",7,7],web_electron_deprecation_mac_sideload_stage_2_expiry_delay:[5020,"int",0,0],web_electron_deprecation_mac_sideload_stage_2_expiry_kickoff:[5019,"bool",!1,!1],web_electron_deprecation_windows_sideload_stage1_awareness:[1985,"bool",!1,!1],web_electron_deprecation_windows_sideload_stage2_compatible_expiry_delay:[1987,"int",0,0],web_electron_deprecation_windows_sideload_stage2_compatible_expiry_kickoff:[1986,"bool",!1,!1],web_electron_deprecation_windows_sideload_stage2_incompatible_expiry_delay:[1989,"int",0,0],web_electron_deprecation_windows_sideload_stage2_incompatible_expiry_kickoff:[1988,"bool",!1,!1],web_enable_biz_catalog_view_ps_logging:[2056,"bool",!0,!0],web_enable_capi_support_chat:[4724,"bool",!1,!1],web_enable_hyperlinked_phone_numbers_ps_logging:[1401,"bool",!1,!1],web_enable_open_tab_pre_ack:[4483,"bool",!1,!1],web_enable_profile_pic_thumb_db_caching:[2018,"bool",!1,!1],web_enable_profile_pic_thumb_download_over_mms4:[4327,"bool",!0,!0],web_encryption_failed_message_resend:[3779,"bool",!1,!1],web_evolve_about_receive_enabled:[5346,"bool",!1,!1],web_evolve_about_send_enabled:[5347,"bool",!1,!1],web_expression_panels:[3420,"bool",!1,!1],web_expression_panels_mitigations:[4951,"bool",!1,!0],web_expression_panels_outside_input:[6368,"bool",!1,!1],web_expression_panels_show_less_stickers:[5726,"bool",!1,!1],web_extra_lid_group_logging_attributes:[7145,"bool",!1,!1],web_favorite_stickers:[962,"bool",!1,!1],web_favorites_sync_enabled:[7404,"bool",!1,!1],web_file_streaming_upload:[2210,"bool",!1,!1],web_fix_media_conn_block_rule_parsing:[3455,"bool",!1,!1],web_fp_reparsing_for_non_add_ons:[2231,"bool",!1,!1],web_gdpr_request_account_info_enabled:[1232,"bool",!1,!1],web_get_maybe_me_user_optimization_enabled:[1451,"bool",!1,!1],web_graphql_for_catalog_m1:[1205,"bool",!1,!1],web_group_profile_editor:[1745,"bool",!0,!0],web_group_profile_picture_stickers_label_fix:[4901,"bool",!1,!0],web_history_sync_notification_handling_queue_v2:[5291,"bool",!1,!1],web_history_sync_ui:[1911,"bool",!1,!1],web_image_max_edge:[3042,"int",1600,1600],web_image_max_hd_edge:[3204,"int",2560,2560],web_improved_message_composer_enabled:[4973,"bool",!1,!1],web_improved_text_tool_enabled:[4669,"bool",!1,!1],web_inactive_receipts_v2:[7132,"bool",!1,!1],web_init_chat_batch_size:[1171,"int",100,100],web_init_chat_max_unread_message_count:[1172,"int",0,0],web_initial_sync_encrypted_msgs_storing:[4904,"bool",!1,!1],web_intern_dogfooding_upsell_content:[6860,"string","",""],web_intern_dogfooding_upsell_enabled:[6858,"bool",!1,!1],web_intern_dogfooding_upsell_snooze_duration:[6859,"int",86400,86400],web_internal_in_app_bug_reporting_enable:[4681,"bool",!1,!1],web_invalid_media_message_validation:[5165,"bool",!1,!0],web_invalid_message_count_validation:[5164,"bool",!1,!0],web_is_internal_user:[8079,"bool",!1,!0],web_jpeg_quality:[6619,"int",92,92],web_jshalt_ping_and_reconnect_version:[8131,"int",0,0],web_kill_socket_on_jshalt_event_disabled:[7566,"bool",!1,!1],web_killswitch_s310872_mitigation:[2879,"bool",!1,!1],web_labels_editing_enabled:[6268,"bool",!1,!1],web_larger_link_previews:[8172,"bool",!1,!1],web_lazy_pull:[2814,"bool",!1,!1],web_lid_groups_allow_reference_by_alternative_jid:[6836,"bool",!1,!0],web_link_preview_sync_enabled:[2156,"bool",!1,!0],web_lru_cache_purge_logic_refactor:[1383,"bool",!1,!1],web_material_refresh:[6332,"bool",!1,!1],web_max_contacts_to_show_common_groups:[2264,"int",10,10],web_max_found_common_groups_displayed:[2268,"int",15,15],web_md5_message_key:[3164,"bool",!1,!0],web_media_editor_blur_tool:[1816,"bool",!0,!0],web_mediaretry_notification_nack_enabled:[4206,"bool",!1,!1],web_message_custom_aria_label:[2280,"bool",!1,!1],web_message_dedup_enabled:[6633,"bool",!1,!1],web_message_drop_bulk_db_operation_fallback_enabled:[7865,"bool",!1,!1],web_message_edit_processing_reply_messages:[3883,"bool",!0,!0],web_message_edit_receive_desktop_beta_rollout:[3723,"bool",!1,!1],web_message_edit_send_desktop_beta_rollout:[3724,"bool",!1,!1],web_message_list_a11y_redesign:[2016,"bool",!0,!0],web_message_list_a11y_redesign_beta_only:[2294,"bool",!0,!0],web_message_plugin_backend_registration_enabled:[2545,"bool",!1,!1],web_message_plugin_frontend_registration_enabled:[2793,"bool",!1,!1],web_message_processing_cache_size:[3728,"int",400,400],web_message_send_precalculate_icdc:[2801,"bool",!1,!0],web_message_table_index_rowid_optimization:[3279,"bool",!1,!1],web_migrate_message_decrypt_api:[6021,"bool",!1,!1],web_missed_call_notifications:[6807,"bool",!1,!1],web_mms4_media_conn_cache_enabled:[6591,"bool",!0,!0],web_multi_skin_toned_emoji_picker:[1850,"bool",!1,!1],web_mutex_ping_timeout_seconds:[7898,"int",10,10],web_native_fetch_media_download:[3031,"bool",!1,!1],web_new_group_member_search:[2220,"bool",!1,!1],web_non_blocking_offline_resume_max_message_count:[2508,"int",1e3,1e3],web_noncritical_history_sync_message_processing_break_iteration:[5106,"int",100,100],web_offline_dynamic_batch_config:[5297,"string",'{"version": "progressive", "multiplier": 0.25}','{"version": "progressive", "multiplier": 0.25}'],web_offline_dynamic_batch_size_enabled:[5271,"bool",!1,!0],web_offline_notification_priority:[4403,"bool",!1,!1],web_offline_progress_toastbar:[5410,"bool",!1,!0],web_offline_resume_m3_enabled:[1802,"bool",!1,!1],web_offline_resume_max_batch_size:[8006,"int",200,400],web_offline_resume_max_batch_size_enabled:[8065,"bool",!1,!0],web_offline_resume_qpl_enabled:[1773,"bool",!1,!1],web_optimized_handshake_flow_enabled:[7932,"bool",!1,!1],web_optimized_resume_handshake_enabled:[7805,"bool",!1,!1],web_orchestrator_enabled_version:[984,"string","bucket","bucket"],web_original_photo_quality_upload_enabled:[3136,"bool",!1,!1],web_other_items_on_navbar_enabled:[7732,"bool",!1,!1],web_otp_copy_code_disabled:[4330,"bool",!1,!1],web_page_load_qpl_enabled:[7658,"bool",!1,!0],web_payment_notifications_ack_kick_fix_enabled:[7546,"bool",!1,!1],web_poll_creation_desktop_beta_rollout:[2179,"bool",!1,!1],web_poll_receiving_desktop_beta_rollout:[2181,"bool",!1,!1],web_poll_spam_report:[2303,"bool",!1,!1],web_pre_acks_m2_enabled:[5520,"bool",!1,!1],web_pre_acks_m3_enabled:[5521,"bool",!1,!1],web_pre_acks_m3_receipts_enabled:[6438,"bool",!1,!1],web_prekeys_fetch_first_batch_size:[1373,"float",0,0],web_preload_chat_messages:[5079,"bool",!1,!0],web_premium_messages_interactivity_rendering_enabled:[4596,"bool",!1,!0],web_prevent_parallel_socket_connection_enabled:[7708,"bool",!1,!1],web_privacy_settings:[837,"bool",!1,!1],web_privacy_settings_v2:[1226,"bool",!1,!1],web_profile_picture_db_cache_disabled:[1757,"bool",!1,!1],web_ps_v3_enabled:[1114,"bool",!1,!1],web_ptt_streamer_upload:[1902,"bool",!1,!0],web_push_notifications:[1643,"bool",!1,!0],web_push_notifications_receipt_handling_enabled:[5564,"bool",!1,!1],web_pwa_background_sync:[6656,"bool",!1,!1],web_pwa_background_sync_min_interval_hours:[6706,"int",24,24],web_quantity_controls_enabled:[1659,"bool",!1,!1],web_quick_reply_authoring:[1751,"bool",!1,!1],web_quoted_generate_msg_data:[5447,"bool",!1,!1],web_reactions_send_desktop_beta_rollout:[1479,"bool",!0,!0],web_recalculate_app_state_sync_lthash:[7099,"bool",!1,!1],web_recent_sync_chunk_data_handling_worker:[8270,"bool",!1,!1],web_recent_sync_chunk_download_optimization:[7356,"bool",!1,!1],web_recent_sync_chunk_preprocess_optimization:[7876,"bool",!1,!1],web_recent_sync_handling_loop_restart_enabled:[5816,"bool",!1,!1],web_recent_sync_handling_loop_restart_v2_enabled:[6804,"bool",!1,!1],web_recent_sync_next_chunk_fetch_optimization:[7494,"bool",!1,!1],web_recent_sync_worker_compatible_handling:[7247,"bool",!1,!1],web_require_manual_reload_for_locale_change:[7894,"bool",!1,!1],web_reset_offline_batch_state:[6293,"bool",!0,!0],web_resume_optimized_message_post_process_interval:[6229,"int",1e3,1e3],web_resume_optimized_message_post_processing_enabled:[5680,"bool",!1,!0],web_resume_optimized_read_receipt_send_active_chat:[5461,"bool",!1,!0],web_resume_optimized_read_receipt_send_interval:[5502,"int",500,500],web_retry_building_e2e_proto_on_error:[5939,"bool",!1,!1],web_rotate_sender_key_if_sent:[1329,"bool",!1,!1],web_screen_lock_max_retries:[2622,"int",10,10],web_search_by_date_enabled:[4770,"bool",!1,!1],web_search_by_type_date_infra:[4768,"bool",!1,!1],web_search_by_type_enabled:[4769,"bool",!1,!1],web_send_invisible_msg_max_group_size:[1945,"int",1024,1024],web_send_invisible_msg_min_group_size:[1100,"int",128,128],web_send_invisible_msg_to_new_groups:[1099,"bool",!1,!1],web_send_only_active_receipts:[1868,"bool",!1,!0],web_send_view_once_ptt_enabled:[6636,"bool",!1,!1],web_sha256_message_key:[3729,"bool",!0,!0],web_shop_storefront_message:[1053,"bool",!1,!1],web_should_fatal_on_missing_patch:[1461,"bool",!0,!0],web_single_signal_session_and_identity_read_using_lid:[8046,"bool",!1,!1],web_skip_expired_status_error:[6391,"bool",!1,!1],web_smb_label_reordering_m2_two_way:[6805,"bool",!1,!1],web_socket_fallback_url_enabled:[7858,"bool",!1,!1],web_socket_parallel_connection_enabled:[8019,"bool",!1,!1],web_socket_reconnect_enabled:[3892,"bool",!1,!1],web_start_backend_refactor:[6263,"bool",!1,!1],web_status_drawer_enabled:[5832,"bool",!1,!1],web_status_muting_enabled:[6476,"bool",!1,!1],web_status_posting_enabled:[4404,"bool",!1,!1],web_status_psa:[873,"bool",!1,!1],web_status_psa_history_sync:[1095,"bool",!1,!1],web_sticker_store:[930,"bool",!0,!0],web_sticker_suggestions_enable:[4726,"bool",!1,!1],web_sticky_hd_photo_setting_enabled:[8115,"bool",!1,!0],web_store_quota_manager_enabled:[3133,"bool",!1,!1],web_syncd_fatal_fields_from_L1104589PRV2:[1808,"bool",!1,!1],web_syncd_max_mutations_to_process_during_resume:[1513,"int",1e3,1e3],web_tc_token_db_read_enabled:[5110,"bool",!1,!1],web_unified_flow:[1809,"int",0,0],web_unified_message_processing_enabled:[1633,"bool",!1,!1],web_user_qualified_for_comet_build:[7151,"bool",!1,!1],web_validate_media_mime_type:[6316,"bool",!1,!1],web_wa_signal_enabled:[1225,"bool",!1,!1],web_wam_v5_enabled:[1033,"bool",!1,!1],web_wasm_worker_enabled_www:[7924,"bool",!1,!1],web_worker_compatible_device_notification_handling:[6975,"bool",!1,!1],web_worker_compatible_profile_pic_notification_handling:[6974,"bool",!1,!1],web_youtube_rcat_chat_generation_enabled:[3044,"bool",!1,!0],web_youtube_rcat_consumption_enabled:[2957,"bool",!1,!0],welcome_msg_should_include_chat_state_metadata:[6361,"bool",!1,!1],youtube_inline_playback_killswitch:[3522,"bool",!1,!1]};t.ABPropConfigs=n},11956:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exposureKeys=t.accessedConfigs=void 0,t.updateGlobalABKey=function(e){r.Global.set({abKey2:e})},t.updateGlobalExpoKey=function(){r.Global.set({expoKey:Array.from(o).join(",")})};var r=n(53047);const i=new Set;t.accessedConfigs=i;const o=new Set;t.exposureKeys=o},85321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsSagaCopyEnabled=function(){return!i.Conn.isSMB&&(0,r.getABPropConfigValue)("saga_copy")},t.getIsSagaEnabled=function(){return!i.Conn.isSMB&&(0,r.getABPropConfigValue)("saga_enabled")},t.getIsSagaV1TestEnabled=function(){return!i.Conn.isSMB&&(0,r.getABPropConfigValue)("saga_v1_test_enabled")},t.getSagaFeedbackEnabled=function(){return(0,r.getABPropConfigValue)("support_message_feedback_enabled")},t.getSagaMVPValue=function(){if(i.Conn.isSMB)return 0;return(0,r.getABPropConfigValue)("saga_mvp_value")};var r=n(83741),i=n(10414)},98463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.getABPropConfigValue)("in_app_support_v2_number_prefixes");if(null==t||""===t)return!1;return t.split(",").some((t=>e.startsWith(t)))};var r=n(83741)},93963:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateABPropsFromStorage=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(78805),a=n(9282),s=n(70130);n(97023);function l(){return(l=(0,i.default)((function*(){try{const e=(yield(0,s.getABPropConfigs)()).map((e=>{const t=(0,o.getABPropConfigNameFromCode)(Number(e.configCode));if(null!=t){const n=a.ABPropConfigs[t],[r,i,o,l]=n,u=o;let c;return{configCode:r,configValue:(0,s.parseConfigValue)(e.configValue,i,u),configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:c}}__LOG__(3)`[ABProps] ABProp (code: ${e.configCode}) exists in storage but no longer available for this client version`})).filter((e=>!!e));(0,o.bulkCreateOrReplaceABPropConfigs)(e)}catch(e){__LOG__(4,!0,new Error,!0)`[ABProps] Failed to update ABProps configs cache from storage: ${e}`,SEND_LOGS("[ABProps] Failed to update ABProps configs cache from storage: "+e)}}))).apply(this,arguments)}},23431:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClientEventSamplingWeight=function(e){const t=r(e);if(null!=t)return Math.abs(t);return null},t.getEventSamplingConfigValue=r,t.setGetEventSamplingConfigValueImpl=function(e){n=e};let n=null;function r(e){return null==n?null:n(e)}},34186:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearEventSamplingConfigs=function(){s.clear(),l=!1},t.eventSamplingConfigs=void 0,t.initializeEventSamplingCache=function(){(0,a.setGetEventSamplingConfigValueImpl)(u)},t.updateEventSamplingFromStorage=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(23032),a=n(23431);const s=new Map;t.eventSamplingConfigs=s;let l=!1;function u(e){return l?s.get(e):null}function c(){return(c=(0,i.default)((function*(){(yield(0,o.getEventSamplingConfigs)()).forEach((e=>{s.set(e.eventCode,e.samplingWeight)})),l=!0}))).apply(this,arguments)}},51621:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APICmd=void 0,t.isWAURL=function(e){return n.test(e)};t.APICmd={GROUP_INVITE:"GROUP_INVITE",MSG_SEND:"MSG_SEND",INVALID:"INVALID",CATALOG:"CATALOG",PRODUCT:"PRODUCT",PUSH_NOTIFICATION:"PUSH_NOTIFICATION",CREATE_COMMUNITY:"CREATE_COMMUNITY",NEWSLETTER:"NEWSLETTER",AVATAR_STICKERPACK:"AVATAR_STICKERPACK",ADVERTISE:"ADVERTISE",MANAGE_ADS:"MANAGE_ADS",MESSAGE_YOURSELF:"MESSAGE_YOURSELF",BROADCAST:"BROADCAST",EDIT_PROFILE_PICTURE:"EDIT_PROFILE_PICTURE",STATUS:"STATUS"};const n=/^whatsapp:\/\/.*/i},42017:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.matchProductUrl=t.matchCatalogUrl=void 0,t.parseAPICmd=function(e){if("string"!=typeof e)return{resultType:s.APICmd.INVALID};const t=(e=>{let t=e.match(f);if(t)return{code:t[2],url:t[1]||"/"};if(t=e.match(_),t)return{code:t[1]};if(t=e.match(g),t)return{code:t[1]};if(t=e.match(h),t)return{code:t[1]}})(e);if(t)return{resultType:s.APICmd.GROUP_INVITE,data:t};const n=function(e){let t=e.match(G)||e.match(U);if(t)return Y(t);if(t=e.match(x),t)return(0,i.default)((0,i.default)({},Y(t)),{},{url:"/"});if(t=e.match(F),t){const e=j(t[2]);return(0,i.default)((0,i.default)((0,i.default)({},Y(t)),null!=e&&{utm:e}),{},{url:"/"})}}(e);if(n)return{resultType:s.APICmd.CATALOG,data:n};const r=function(e){let t=B(e,N);if(t)return V(t);if(t=B(e,w),t)return(0,i.default)((0,i.default)({},V(t)),{},{url:"/"});if(t=B(e,D),t){const e=j(t[3]);return(0,i.default)((0,i.default)((0,i.default)({},V(t)),null!=e&&{utm:e}),{},{url:"/"})}}(e);if(r)return{resultType:s.APICmd.PRODUCT,data:r};const o=function(e){const t=e.match(K);if(t){return{url:"/",entrypointType:new p.default(t[1]).get("entrypoint")}}}(e);if(o)return{resultType:s.APICmd.CREATE_COMMUNITY,data:o};const a=function(e){if(e.match(W))return{url:(0,c.getAvatarFaqUrl)()}}(e);if(a)return{resultType:s.APICmd.AVATAR_STICKERPACK,data:a};const l=(0,u.parseBroadcastFeatureLink)(e);if(l)return{resultType:s.APICmd.BROADCAST,data:l};const A=(0,d.parseNewsletter)(e);if(A)return{resultType:s.APICmd.NEWSLETTER,data:A};if([O,R].some((t=>e.match(t))))return{resultType:s.APICmd.MESSAGE_YOURSELF};const m=function(e){let t=e.match(y);if(t){const e=E(t[2]);if(e)return e.url=t[1]||"/",e}if(t=e.match(S),t)return E(t[1]);if(t=e.match(v),t)return E(t[1]);if(t=e.match(I),t){let n;if(t[1]?n={phone:`${t[1]}@c.us`}:t[2]&&(n={url:e,customURL:t[2]}),t[3]){const e=E(t[3]);e&&(n=(0,i.default)((0,i.default)({},n),e))}return n}}(e);if(m)return{resultType:s.APICmd.MSG_SEND,data:m};const T=function(e){if(e.match(k))return{url:"/"}}(e);if(T)return{resultType:s.APICmd.PUSH_NOTIFICATION,data:T};const b=function(e){const t=e.match(P);if(t)return function(e){const t=new p.default(e),n=t.get("wa_campaign_id");if(null==n||""===n)return;const r=t.get("wa_campaign_type");if(null==r||""===r)return null;return{campaignId:n,campaignType:r}}(t[1])}(e);if(null!=b)return{resultType:s.APICmd.ADVERTISE,data:b};if(e.match(C))return{resultType:s.APICmd.MANAGE_ADS,trigger:"chatListBanner"};if(e.match(H))return{resultType:s.APICmd.EDIT_PROFILE_PICTURE};if(e.match(Q))return{resultType:s.APICmd.STATUS};return{resultType:s.APICmd.INVALID}},t.parseConversionData=m;var i=r(n(81109)),o=n(89323),a=n(83741),s=n(51621),l=n(5743),u=n(33248),c=n(86753),d=n(69777),p=r(n(14602));const f=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_PATH_PART}/accept/?\\?code=(\\w+)$`,"i"),_=/^https?:\/\/chat\.whatsapp\.com\/invite\/(\w+)$/i,g=/^https?:\/\/chat\.whatsapp\.com\/(\w+)$/i,h=/^whatsapp:\/\/chat\/?\?code=(\w+)$/i,A=["utm_source","utm_campaign","text","phone","data","source","context","icebreaker","source_url","type"];function m(e){if(!e||"string"!=typeof e)return;const t=o.Binary.build(e);return t.size()>(0,a.getABPropConfigValue)("ctwa_data_max_length")?void 0:t.readBuffer()}function E(e){const t={};if(new p.default(e).forEach(((e,n)=>{const r=function(e){return A.find((t=>t===e))}(n.toLowerCase());if(null!=r)switch(r){case"data":{const n=m(e);if(!n)return;null==t.conversionTuple?t.conversionTuple={conversionData:n}:t.conversionTuple.conversionData=n;break}case"source":{const n=e;if((0,o.numUtf8Bytes)(n)>32)return;null==t.conversionTuple?t.conversionTuple={conversionSource:n}:t.conversionTuple.conversionSource=n;break}case"source_url":null!=t.ctwaContextLinkData?t.ctwaContextLinkData.sourceUrl=e:t.ctwaContextLinkData={sourceUrl:e};break;case"context":null!=t.ctwaContextLinkData?t.ctwaContextLinkData.context=e:t.ctwaContextLinkData={context:e};break;case"icebreaker":null!=t.ctwaContextLinkData?t.ctwaContextLinkData.icebreaker=e:t.ctwaContextLinkData={icebreaker:e};break;case"utm_campaign":null!=t.utm?t.utm.campaign=e:t.utm={campaign:e};break;case"utm_source":null!=t.utm?t.utm.source=e:t.utm={source:e};break;default:t[r]=e}})),null!=t.phone&&""!==t.phone&&(t.phone=t.phone.replace(/\D/g,"")+"@c.us",t.ctwaContextLinkData&&(t.ctwaContextLinkData.phone=t.phone)),null!=t.phone&&""!==t.phone||null!=t.text&&""!==t.text)return t}const y=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_PATH_PART}/send/?\\?(.+)$`,"i"),S=/^https?:\/\/api\.whatsapp\.com\/send\/?\?(.+)$/i,v=/^whatsapp:\/\/send\/?\?(.*)$/i,I=/^https?:\/\/wa\.me\/?(?:([0-9.]{0,20})|([0-9a-z.]{5,35}))?\/?\??(.+)?$/i,T=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_NON_CAPTURING_PATH_PART}/product/([0-9]{0,20})/([0-9]{0,20})$`,"i"),b=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_NON_CAPTURING_PATH_PART}/product/([0-9]{0,20})/([0-9]{0,20})(/?.*)$`,"i"),M=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_NON_CAPTURING_PATH_PART}/product/([^/]{0,200})/([0-9]{0,20})$`,"i"),P=/^whatsapp-smb:\/\/advertise\/?(.+)$/i,C=/^whatsapp-smb:\/\/manage-ads\/?$/,O=/^whatsapp:\/\/message_yourself\/?$/i,R=/^https?:\/\/wa\.me\/message_yourself\/?$/i,N=[/^https?:\/\/wa\.me\/p\/([0-9]{0,20})\/([0-9]{0,20})$/i,/^whatsapp:\/\/product\/([0-9]{0,20})\/([0-9]{0,20})$/i,/^https?:\/\/wa\.me\/p\/([^\/]{0,200})\/([0-9]{0,20})$/i,/^whatsapp:\/\/product\/([^\/]{0,200})\/([0-9]{0,20})$/i],w=[T,M],D=[b],L=[...N,...w,...D];function B(e,t){for(let n=0;n<t.length;n++){const r=e.match(t[n]);if(r)return r}}t.matchProductUrl=e=>null!=B(e,L);const k=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_NON_CAPTURING_PATH_PART}/push/`,"i"),G=/^https?:\/\/wa\.me\/c\/([0-9]{0,20})$/i,U=/^whatsapp:\/\/catalog\/([0-9]{0,20})$/i,x=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_NON_CAPTURING_PATH_PART}/catalog/([0-9]{0,20})?$`,"i"),F=new RegExp(`^${l.ORIGIN}${l.OPTIONAL_NON_CAPTURING_PATH_PART}/catalog/([0-9]{0,20})(/?.*)?$`,"i");t.matchCatalogUrl=e=>[G,U,x,F].some((t=>e.match(t)));const K=/^https?:\/\/wa\.me\/community\/create\/?(\?(.*))?$/i;function Y(e){return{catalogOwnerJid:`${e[1]}@s.whatsapp.net`}}function j(e){const t=new p.default(e),n=t.get("utm_source"),r=t.get("utm_campaign");if(null==r&&null==n)return null;const i={};return null!=n&&(i.source=n),null!=r&&(i.campaign=r),i}function V(e){return{productId:e[1],businessOwnerJid:`${e[2]}@s.whatsapp.net`}}const W=/^https?:\/\/wa\.me\/stickerpack\/meta-avatar$/i,H=/^https?:\/\/wa\.me\/edit-profile-picture$/i,Q=/^https?:\/\/wa\.me\/status$/i},5743:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORIGIN=t.OPTIONAL_PATH_PART=t.OPTIONAL_NON_CAPTURING_PATH_PART=void 0,t.isWhatsappHost=function(e){const{hostname:t}=e;return"whatsapp.com"===t||"www.whatsapp.com"===t||"wa.me"===t},t.removeTrailingSlash=void 0;var r=n(28123);const i=e=>e.replace(/\/+$/,"");t.removeTrailingSlash=i;const o=i(r.BUILD_URL).replace(/[\/\.]/g,"\\$&");t.ORIGIN=o;t.OPTIONAL_PATH_PART="((?:/\\w+)*)";t.OPTIONAL_NON_CAPTURING_PATH_PART="(?:(?:/\\w+)*)"},33248:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastFeatureType=void 0,t.parseBroadcastFeatureLink=function(e){try{const t=new URL(e),{pathname:n}=t,[o,a,...s]=n.split("/");if(!(0,r.isWhatsappHost)(t))return null;if(!function(e){return 0===e.length||1===e.length&&""===e[0]}(s))return null;switch(a){case"channels":return{feature:i.Newsletter,url:t.href};case"status":return{feature:i.Status,url:t.href}}}catch(e){}return null};var r=n(5743);const i=n(76672).Mirrored(["Newsletter","Status"]);t.BroadcastFeatureType=i},45647:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(83647);const i={[r.WEBC_SCENARIO_TYPE.IDLE]:0,[r.WEBC_SCENARIO_TYPE.INITIAL_PAIRING]:3e5,[r.WEBC_SCENARIO_TYPE.OFFLINE_RESUME]:12e4};let o,a;var s={isLogoutInProgress:!1,takeOver:!1,getCurrentScenario(){var e;return null!==(e=a)&&void 0!==e?e:r.WEBC_SCENARIO_TYPE.IDLE},initOrUpdateTracking(e){o&&self.clearTimeout(o),a=e,a!==r.WEBC_SCENARIO_TYPE.IDLE&&(o=self.setTimeout((()=>{a=r.WEBC_SCENARIO_TYPE.IDLE,o=null}),i[e]))}};t.default=s},77630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDIT_ATTR=t.ACK_STRING=t.ACK=void 0;t.ACK={INACTIVE:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4,PEER:5};t.EDIT_ATTR={MESSAGE_EDIT:1,PIN_IN_CHAT:2,SENDER_REVOKE:7,ADMIN_REVOKE:8};t.ACK_STRING={SENDER:"sender",DELIVERY:"delivery",READ:"read",PLAYED:"played",INACTIVE:"inactive",READ_SELF:"read-self",PLAYED_SELF:"played-self"}},46292:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CART_ITEM_MAX_QUANTITY=void 0;t.CART_ITEM_MAX_QUANTITY=99},95693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRODUCT_INQUIRY_TYPE=t.BIZ_SYSTEM_MSG_SUBTYPES_V2_INIT=t.BIZ_SYSTEM_MSG_SUBTYPES_V2=t.BIZ_SYSTEM_MSG_SUBTYPES=void 0;t.BIZ_SYSTEM_MSG_SUBTYPES=["blue_msg_bsp_fb_to_bsp_premise","blue_msg_bsp_fb_to_self_fb","blue_msg_bsp_fb_to_self_premise","blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_unverified_to_bsp_premise_verified","blue_msg_bsp_fb_unverified_to_self_fb_verified","blue_msg_bsp_fb_unverified_to_self_premise_verified","blue_msg_bsp_fb_verified","blue_msg_bsp_fb_verified_to_bsp_premise_unverified","blue_msg_bsp_fb_verified_to_self_fb_unverified","blue_msg_bsp_fb_verified_to_self_premise_unverified","blue_msg_bsp_premise_to_self_premise","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_unverified_to_self_premise_verified","blue_msg_bsp_premise_verified","blue_msg_bsp_premise_verified_to_self_premise_unverified","blue_msg_consumer_to_bsp_fb_unverified","blue_msg_consumer_to_bsp_premise_unverified","blue_msg_consumer_to_self_fb_unverified","blue_msg_consumer_to_self_premise_unverified","blue_msg_self_fb_to_bsp_premise","blue_msg_self_fb_to_self_premise","blue_msg_self_fb_unverified","blue_msg_self_fb_unverified_to_bsp_premise_verified","blue_msg_self_fb_unverified_to_self_premise_verified","blue_msg_self_fb_verified","blue_msg_self_fb_verified_to_bsp_premise_unverified","blue_msg_self_fb_verified_to_self_premise_unverified","blue_msg_self_premise_to_bsp_premise","blue_msg_self_premise_unverified","blue_msg_self_premise_verified","blue_msg_to_bsp_fb","blue_msg_to_consumer","blue_msg_to_self_fb","blue_msg_unverified_to_bsp_fb_verified","blue_msg_unverified_to_bsp_premise_verified","blue_msg_unverified_to_self_fb_verified","blue_msg_unverified_to_verified","blue_msg_verified_to_bsp_fb_unverified","blue_msg_verified_to_bsp_premise_unverified","blue_msg_verified_to_self_fb_unverified","blue_msg_verified_to_unverified"];const n=["biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp"];t.BIZ_SYSTEM_MSG_SUBTYPES_V2_INIT=n;const r=[...n,"biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"];t.BIZ_SYSTEM_MSG_SUBTYPES_V2=r;t.PRODUCT_INQUIRY_TYPE="product_inquiry"},44423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={IMG_THUMB_MAX_EDGE:100,DOC_THUMB_MAX_EDGE:480,VIDEO_THUMB_MAX_EDGE:480,MAX_PORTRAIT_MEDIA_CAPTION_LENGTH:500,MEDIA_EDITOR_OUTLINE_TENSION:.4,MMS_THUMBNAIL_UPLOAD_TIMEOUT:3e3,FREQUENTLY_FORWARDED_SENTINEL:127,WA_COMMERCE_POLICY_URL:"https://www.whatsapp.com/policies/commerce-policy",MAX_TXT_MSG_SIZE:65536,GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:100,BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:200,TEMPLATE_URL_START:64,TEMPLATE_URL_END:32,SQUELCH_RESET_VALUE:-1,MAX_CAPTION_LENGTH:1024,REACTION_CONTENT_MAX_LENGTH:30,MAX_CART_MESSAGE_LENGTH:1024,MAX_PUSHNAME_LENGTH:25,KEY_BUNDLE_TYPE:"",NEW_MSG_SENT:"new_msg_sent",ONE_BY_ONE_TRANS_GIF:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",VOIP_LOG_COLOR:"#aa6627",VOIP_MAX_GROUP_CALL_PARTICIPANTS:32,WAM_SYS_INFO_INIT_DELAY:5e3,MARKED_AS_UNREAD:-1};t.default=n},66253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAILURE_REASON=void 0;t.FAILURE_REASON={REASON_GENERIC_FAILURE:400,REASON_NOT_AUTHORIZED:401,REASON_TEMP_BANNED:402,REASON_LOCKED:403,REASON_CLIENT_TOO_OLD:405,REASON_BANNED:406,REASON_BAD_USER_AGENT:409,REASON_INTERNAL_SERVER_ERROR:500,REASON_EXPERIMENTAL:501,REASON_SERVICE_UNAVAILABLE:503}},8815:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAST_PARTICIPANT_EXPIRATION_DAYS=t.GROUP_SETTING_TYPE=void 0;t.GROUP_SETTING_TYPE={ANNOUNCEMENT:"announcement",RESTRICT:"restrict",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",EPHEMERAL:"ephemeral",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",REPORT_TO_ADMIN_MODE:"report_to_admin_mode",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",MEMBER_ADD_MODE:"member_add_mode"};t.PAST_PARTICIPANT_EXPIRATION_DAYS=60},56457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoutReason=t.LOGOUT_REASON_CODE=void 0;const r=n(76672)({UserInitiated:"user_initiated",SyncdFailure:"syncd_failure",InvalidAdvStatus:"invalid_adv_status",CriticalSyncTimeout:"critical_sync_timeout",SyncdTimeout:"syncd_timeout",HistorySyncTimeout:"history_sync_timeout",AccountSyncTimeout:"account_sync_timeout",MDOptOut:"md_opt_out",UnknownCompanion:"unknown_companion",ClientVersionOutdated:"client_version_outdated",SyncdErrorDuringBootstrap:"syncd_error_during_bootstrap",AccountSyncError:"account_sync_error",ClientFatalError:"client_fatal_error",StorageQuotaExceeded:"storage_quota_exceeded",PrimaryIdentityKeyChange:"primary_identity_key_change",MissingEncSalt:"missing_enc_salt",MissingScreenLockSalt:"missing_screen_lock_salt",AccountLocked:"account_locked",MacElectronDeprecationSoftMigration:"mac_electron_deprecation_soft_migration",MacElectronDeprecationAppExpiry:"mac_electron_deprecation_app_expiry",MacElectronUnsupportedOsHardExpiry:"mac_electron_unsupported_os_hard_expiry"});t.LogoutReason=r;t.LOGOUT_REASON_CODE={CLIENT_FATAL:"0",SYNC_FAIL:"1",INITIAL_HISTORY_SYNC_TIMEOUT:"2",ACCOUNT_LOCKED:"3"}},22666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageAddOnType=void 0;const r=n(76672)({Reaction:"reaction",ReactionEnc:"reaction_enc",PollVote:"poll_vote",KeepInChat:"keep_in_chat",MessageEdit:"message_edit",PinMessage:"pin_message",Comment:"comment",Unknown:"unknown"});t.MessageAddOnType=r},73602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SYSTEM_MESSAGE_TYPES=t.MsgKind=t.MSG_TYPE=void 0;t.MSG_TYPE={NOTIFICATION:"notification",NOTIFICATION_TEMPLATE:"notification_template",GP2:"gp2",BROADCAST_NOTIFICATION:"broadcast_notification",NEWSLETTER_NOTIFICATION:"newsletter_notification",E2E_NOTIFICATION:"e2e_notification",CALL_LOG:"call_log",PROTOCOL:"protocol",HISTORY_BUNDLE:"history_bundle",CHAT:"chat",LOCATION:"location",PAYMENT:"payment",VCARD:"vcard",CIPHERTEXT:"ciphertext",DEBUG_PLACEHOLDER:"debug_placeholder",MULTI_VCARD:"multi_vcard",REVOKED:"revoked",OVERSIZED:"oversized",GROUPS_V4_INVITE:"groups_v4_invite",HSM:"hsm",TEMPLATE_BUTTON_REPLY:"template_button_reply",DEBUG:"debug",IMAGE:"image",VIDEO:"video",PTV:"ptv",AUDIO:"audio",PTT:"ptt",STICKER:"sticker",STATUS_V3:"status_v3",DOCUMENT:"document",PRODUCT:"product",ORDER:"order",LIST:"list",INTERACTIVE:"interactive",INTERACTIVE_RESPONSE:"interactive_response",LIST_RESPONSE:"list_response",BUTTONS_RESPONSE:"buttons_response",REACTION:"reaction",REACTION_ENC:"reaction_enc",POLL_CREATION:"poll_creation",REQUEST_PHONE_NUMBER:"request_phone_number",POLL_UPDATE:"poll_update",NATIVE_FLOW:"native_flow",BIZ_COVER_PHOTO:"biz-cover-photo",KEEP_IN_CHAT:"keep_in_chat",PIN_MESSAGE:"pin_message",PINNED_MESSAGE:"pinned_message",COMMENT:"comment",NEWSLETTER_ADMIN_INVITE:"newsletter_admin_invite",EVENT_CREATION:"event_creation",EVENT_RESPONSE:"event_response",BIZ_CONTENT_PLACEHOLDER:"biz_content_placeholder",EVENT_EDIT_ENCRYPTED:"event_edit_encrypted",UNKNOWN:"unknown"};t.SYSTEM_MESSAGE_TYPES=["notification","notification_template","gp2","newsletter_notification","broadcast_notification","e2e_notification","call_log","protocol","debug"];t.MsgKind={BizContentPlaceholder:"bizContentPlaceholder",Ciphertext:"ciphertext",CommentEncrypted:"commentEncrypted",CommentDecrypted:"commentDecrypted",DebugPlaceholder:"debugPlaceholder",EventCreation:"eventCreation",EventResponseEncrypted:"eventResponseEncrypted",EventResponseDecrypted:"eventResponseDecrypted",EventEditEncrypted:"eventEditEncrypted",KeepInChat:"keepInChat",PinInChat:"pinInChat",PollCreation:"pollCreation",PollVoteEncrypted:"pollVoteEncrypted",PollVoteDecrypted:"pollVoteDecrypted",ProtocolRevoke:"protocolRevoke",ReactionEncrypted:"reactionEncrypted",ReactionDecrypted:"reactionDecrypted",RevokedMessage:"revokedMessage",RevokedAddon:"revokedAddon",Notification:"notification",NotificationTemplate:"notificationTemplate",Gp2:"gp2",BroadcastNotification:"broadcastNotification",NewsletterNotification:"newsletterNotification",E2eNotification:"e2eNotification",CallLog:"callLog",Protocol:"protocol",Historybundle:"historyBundle",Chat:"chat",Location:"location",LocationLive:"locationLive",Payment:"payment",Vcard:"vcard",MultiVcard:"multiVcard",Oversized:"oversized",GroupsV4Invite:"groupsV4Invite",Hsm:"hsm",TemplateButtonReply:"templateButtonReply",Debug:"debug",Image:"image",Video:"video",Ptv:"ptv",Audio:"audio",Ptt:"ptt",Sticker:"sticker",StatusV3:"statusV3",Document:"document",Product:"product",Order:"order",List:"list",Interactive:"interactive",InteractiveResponse:"interactiveResponse",ListResponse:"listResponse",ButtonsResponse:"buttonsResponse",RequestPhoneNumber:"requestPhoneNumber",NativeFlow:"nativeFlow",BizCoverPhoto:"bizCoverPhoto",PinnedMessage:"pinnedMessage",NewsletterAdminInvite:"newsletterAdminInvite",ProtocolEventEdit:"protocolEventEdit",Unknown:"unknown"}},46420:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERMISSION_DENIED=t.PERMISSION_DEFAULT=t.PERMISSION_ALLOWED=void 0;t.PERMISSION_ALLOWED="granted";t.PERMISSION_DEFAULT="default";t.PERMISSION_DENIED="denied"},57705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuxSyncKey=t.NuxKeyTypes=t.NUX=t.CoolOffPeriodKeys=void 0,t.asCoolOffNuxType=function(e){return`${e}_cool_off`},t.asViewCountNuxType=function(e){return`${e}_view_count`},t.getChatAutoMutedNuxKey=o,t.getCommunityAdminPromotionNuxKey=i,t.getMembershipApprovalRequestsBannerNuxKey=function(e){return`membership_approval_requests_banner_${e}`},t.getNewsletterAlertsBannerNuxKey=function(e){return`newsletter_alerts_${e}`},t.getNuxSyncKey=function(e){switch(e){case r.EPHEMERAL:return a.EPHEMERAL;case r.EPHEMERAL_VIEW_ONCE:return a.EPHEMERAL_VIEW_ONCE;case r.EPHEMERAL_VIEW_ONCE_RECEIVER:return a.EPHEMERAL_VIEW_ONCE_RECEIVER;case r.STATUS_QUICK_REPLIES:return a.STATUS_QUICK_REPLIES;case r.COMMUNITY:return a.COMMUNITY;case r.COMMUNITY_HOME:return a.COMMUNITY_HOME;case r.KEEP_IN_CHAT:return a.KEEP_IN_CHAT;case r.FORWARD_MEDIA_WITH_CAPTION:return a.FORWARD_MEDIA_WITH_CAPTION;case r.MESSAGE_EDIT:return a.MESSAGE_EDIT;case r.NEWSLETTER_MULTI_ADMIN:return a.NEWSLETTER_MULTI_ADMIN;case r.SUPPORT_AI:return a.SUPPORT_AI;default:return e.includes(i(""))||e.includes(o(""))?e:null}},t.getSubgroupSuggestionsBannerNuxKey=function(e){return`subgroup_suggestions_banner_${e}`};const r={SAFARI_LIMITED_SUPPORT:"safari_limited_support",SENDER_REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",SENDER_REVOKE_LEGAL_DISCLAIMER_NUX_NEW:"sender_revoke_legal_disclaimer_nux",ADMIN_REVOKE_LEGAL_DISCLAIMER_NUX:"admin_revoke_legal_disclaimer_nux",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",COMMUNITY:"community",COMMUNITY_HOME:"community_home",STATUS_QUICK_REPLIES:"status_quick_replies",KEEP_IN_CHAT:"keep_in_chat",CHAT_ASSIGNMENT:"chat_assignment",TOOLTIP_AD_CREATION:"tooltip_ad_creation",DESKTOP_UPSELL:"desktop_upsell",FORWARD_MEDIA_WITH_CAPTION:"forward_media_with_caption",MESSAGE_EDIT:"message_edit",ORDER_REQUEST_EDUCATION:"order_request_education",NEWSLETTER_MULTI_ADMIN:"newsletter_multi_admin",TOOLTIP_STATUS_POSTING:"tooltip_status_posting",SUPPORT_AI:"support_ai"};function i(e){return`community_admin_promote_${e}`}function o(e){return`chat_auto_muted_${e}`}t.NUX=r;const a=n(76672)({EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",ARCHIVE:"archive",STATUS_QUICK_REPLIES:"status_quick_replies",COMMUNITY:"community",COMMUNITY_HOME:"community_home",KEEP_IN_CHAT:"keep_in_chat",FORWARD_MEDIA_WITH_CAPTION:"forward_media_with_caption",MESSAGE_EDIT:"message_edit",NEWSLETTER_MULTI_ADMIN:"newsletter_multi_admin",SUPPORT_AI:"support_ai"});t.NuxSyncKey=a;t.NuxKeyTypes={COOL_OFF_NUX:{INCOMPLETE_BUSINESS_PROFILE_BANNER:"incomplete_business_profile_banner",PRODUCT_CATALOG_BANNER:"product_catalog_banner",COLLECTIONS:"collections_banner",CART_INTERSTITIAL:"cart_interstitial",CTWA_SUGGESTION:"ctwa_suggestion",ORDER_EXPANSION:"order_expansion"},VIEW_COUNT_NUX:{SAFARI_LIMITED_SUPPORT:"safari_limited_support",SENDER_REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",ADMIN_REVOKE_LEGAL_DISCLAIMER_NUX:"admin_revoke_legal_disclaimer_nux",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",COMMUNITY:"community",COMMUNITY_HOME:"community_home",KEEP_IN_CHAT:"keep_in_chat",CHAT_ASSIGNMENT:"chat_assignment",TOOLTIP_AD_CREATION:"tooltip_ad_creation",DESKTOP_UPSELL:"desktop_upsell",FORWARD_MEDIA_WITH_CAPTION:"forward_media_with_caption",MESSAGE_EDIT:"message_edit",ORDER_REQUEST_EDUCATION:"order_request_education",NEWSLETTER_MULTI_ADMIN:"newsletter_multi_admin",TOOLTIP_STATUS_POSTING:"tooltip_status_posting",SUPPORT_AI:"support_ai"}};t.CoolOffPeriodKeys={DEFAULT:"default_cool_off_banners_key",CATALOG:"catalog_banners_key",CTWA_SUGGESTION:"ctwa_suggestion_banners_key",ORDER_EXPANSION:"order_expansion_banner_key"}},94273:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VISIBILITY_WITH_ERROR=t.VISIBILITY=t.ONLINE_VISIBILITY_WITH_ERROR=t.ONLINE_VISIBILITY=t.CALL_ADD_WITH_ERROR=t.CALL_ADD=t.ALL_NONE_WITH_ERROR=t.ALL_NONE=void 0;var i=r(n(81109));const o={all:"all",contacts:"contacts",contact_blacklist:"contact_blacklist",none:"none"};t.VISIBILITY=o;const a=(0,i.default)((0,i.default)({},o),{},{error:"error"});t.VISIBILITY_WITH_ERROR=a;const s={all:"all",none:"none"};t.ALL_NONE=s;const l={all:"all",match_last_seen:"match_last_seen"};t.ONLINE_VISIBILITY=l;const u=(0,i.default)((0,i.default)({},l),{},{error:"error"});t.ONLINE_VISIBILITY_WITH_ERROR=u;const c=(0,i.default)((0,i.default)({},s),{},{error:"error"});t.ALL_NONE_WITH_ERROR=c;const d={all:"all",known:"known"};t.CALL_ADD=d;const p=(0,i.default)((0,i.default)({},d),{},{error:"error"});t.CALL_ADD_WITH_ERROR=p},73087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VCARD_MAX_SIZE_KB=t.VCARD_AS_DOCUMENT_SIZE_KB=t.PTT_PLAYBACK_SPEED_HIDE_DELAY=t.MULTICAST_LIMIT_GLOBAL=t.MMS_VCARD_AUTODOWNLOAD_SIZE_KB=void 0;t.MMS_VCARD_AUTODOWNLOAD_SIZE_KB=64;t.VCARD_AS_DOCUMENT_SIZE_KB=64;t.VCARD_MAX_SIZE_KB=5e3;t.MULTICAST_LIMIT_GLOBAL=5;t.PTT_PLAYBACK_SPEED_HIDE_DELAY=1500},77674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM=t.IS_MMS_URL_SEARCH_PARAM=void 0;t.IS_MMS_URL_SEARCH_PARAM="__wa-mms";t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM="mms-type"},64498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEMPLATE_BUTTON_SUBTYPE=void 0;t.TEMPLATE_BUTTON_SUBTYPE={QUICK_REPLY:"quick_reply",CALL:"call",URL:"url"}},56660:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.QuickPayProductTypeGating=void 0,t.adAccountTokenStoringEnabled=function(){return(0,p.isSMB)()&&!1===(0,i.getABPropConfigValue)("ctwa_ad_account_token_storage_kill_switch_web")},t.adEntryPointsConfigurationFetchEnabled=b,t.adEntryPointsConfigurationFetchM1Enabled=function(){return b()&&(0,i.getABPropConfigValue)("ctwa_long_term_holdout_content_enabled")},t.adEntryPointsConfigurationFetchThreshold=function(){return(0,i.getABPropConfigValue)("ctwa_entry_point_config_fetch_threshhold")},t.adManagementActionsDisplayingEnabled=function(){return M()&&(0,i.getABPropConfigValue)("ctwa_manage_ads_tab_web_ad_actions_menu")},t.adManagementEnabled=M,t.adManagementMetricsDisplayingEnabled=function(){return M()&&(0,i.getABPropConfigValue)("ctwa_manage_ads_tab_web_ad_metrics")},t.adManagementRecoveryFlowEnabled=function(){return M()&&(0,i.getABPropConfigValue)("ctwa_manage_ads_tab_web_recovery_flow")},t.adsActionBannersEnabled=I,t.adsActionBannersEnabledOnStartup=void 0,t.adsActionBannersLoggingEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("wa_ctwa_action_banner_logging_enabled_web")},t.adsActionManageAdsBannerEnabled=function(){return I()&&(0,i.getABPropConfigValue)("in_app_comms_manage_ads_web_banner_campaign_enabled")},t.bannedShopsEnabled=function(){return(0,i.getABPropConfigValue)("banned_shops_ux_enabled")},t.billingEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_billing_enabled")},t.bizLinkedAccountsEnabled=function(){return(0,i.getABPropConfigValue)("web_abprop_business_profile_refresh_linked_accounts_killswitch")},t.blockCatalogCreationECommerceComplianceIndia=function(e){var t;return E(null==e?void 0:e.id,(()=>(0,i.getABPropConfigValue)("web_abprop_block_catalog_creation_ecommerce_compliance_india")),(()=>g.ServerProps.blockCatalogCreationEcommerceComplianceIndia))&&(null==e||null===(t=e.profileOptions)||void 0===t?void 0:t.commerceExperience)===a.CommerceExperienceTypes.NONE},t.btmThreadsLoggingEnabled=function(){return(0,i.getABPropConfigValue)("btm_threads_logging_enabled")},t.canAppealCollections=function(){return(0,i.getABPropConfigValue)("smb_collections_appeal_flow_enabled")},t.canDisplayLabel=function(){return(0,p.isSMB)()},t.canEditLabelAssociation=function(){return(0,p.isSMB)()},t.canManageCollections=function(){return(0,i.getABPropConfigValue)("smb_collections_enabled")},t.canSeeBizProfileV3=function(){return(0,i.getABPropConfigValue)("business_profile_refresh_m1_enabled")},t.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney=function(e){return E(e,(()=>(0,i.getABPropConfigValue)("smb_ecommerce_compliance_india_m4_5")),(()=>g.ServerProps.smbEcommerceComplianceIndiaM4_5))},t.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney=function(e){return E(e,(()=>(0,i.getABPropConfigValue)("smb_ecommerce_compliance_india_m4")),(()=>g.ServerProps.smbEcommerceComplianceIndiaM4))},t.canSeeECommerceComplianceIndiaSoftEnforcement=function(e){let t;if(null!=e){var n;if(t=e.isLid()?null===(n=(0,o.getPhoneNumber)(e))||void 0===n?void 0:n.user:e.user,e.isLid()&&null==t)return!0}return m(t)},t.canSendQuickReply=A,t.canSendQuickReplyInChat=function(e){var t;return!e.isNewsletter&&A()&&!(null===(t=e.contact.businessProfile)||void 0===t?void 0:t.isBizBot3p)},t.canViewBizLinkedAccounts=function(){return(0,i.getABPropConfigValue)("web_abprop_business_profile_refresh_linked_account_enabled")},t.carouselsEnabled=R,t.catalogCategoriesEnabled=function(){return(0,i.getABPropConfigValue)("catalog_categories_enabled")},t.chatAssignmentEnabled=v,t.chatAssignmentMaxNuxImpressions=function(){if(!v())return 0;return(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_nux_impressions")},t.chatAssignmentNewChatlistLabelEnabled=function(){return(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_chat_list_new_label_enabled")},t.chatAssignmentNotificationsEnabled=function(){return(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_notifications_enabled")},t.chatAssignmentSystemMessagesEnabled=function(){return v()&&(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_system_messages_enabled")},t.commerceFeaturesDisabledBySanctions=function(){return(0,i.getABPropConfigValue)("commerce_sanctioned")},t.commerceThreadsLoggingEnabled=function(){return(0,i.getABPropConfigValue)("native_commerce_threads_logging_enabled")},t.countryGatingEnabled=function(){return(0,i.getABPropConfigValue)("country_client_gating_enabled")},t.coverPhotoPrivacyMessagingEnabled=function(){return(0,i.getABPropConfigValue)("smb_temp_cover_photo_privacy_messaging")},t.getBillingPremiumAccessConfig=function(){if(!(0,p.isSMB)())return"{}";return(0,i.getABPropConfigValue)("smb_billing_premium_access_config")},t.getTrackableLinkDomain=function(){return(0,i.getABPropConfigValue)("smba_premium_messages_insights_v2_trackable_link_domain")},t.graphQLForCatalogM1Enabled=function(){return(0,i.getABPropConfigValue)("graphql_privacy_imp_m1")},t.graphQLForCollectionM2Enabled=function(){return(0,i.getABPropConfigValue)("graphql_privacy_imp_m2")},t.hideUnsupportedCurrency=function(){return(0,i.getABPropConfigValue)("smb_hide_unsupported_currency_price")},t.inOrderMessagesEphemeralExceptionEnabled=void 0,t.interactiveNativeFlowMessagesEnabled=function(){return!(0,i.getABPropConfigValue)("interactive_message_native_flow_killswitch")},t.interactiveNativeFlowResponseMessagesEnabled=function(){return!(0,i.getABPropConfigValue)("interactive_response_message_native_flow_killswitch")},t.interactiveResponseMessagesEnabled=function(){return!(0,i.getABPropConfigValue)("interactive_response_message_killswitch")},t.is3pdConversionEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("ctwa_3pd_conversion_signal_logging")},t.isAdsAttributionEnabled=function(){return(0,i.getABPropConfigValue)("wa_ctwa_web_thread_ad_attribution_enabled")},t.isBizCoverPhotoEditEnabled=function(){return(0,i.getABPropConfigValue)("web_abprop_business_profile_refresh_edit_cover_photo_enabled")},t.isBizCoverPhotoViewEnabled=function(){return(0,i.getABPropConfigValue)("web_abprop_business_profile_refresh_cover_photo_view_enabled")},t.isBizToolsDrawerEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("web_business_tools_drawer_enabled")},t.isBizToolsTopCardEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("wa_web_business_tools_top_card_enabled")},t.isBrazilToBrazilOrder=O,t.isBuyerOrderRequestVariantEnabled=function(){return C()&&(0,i.getABPropConfigValue)("buyer_initiated_order_request_variant_enabled")},t.isBuyerOrderRevampEnabled=C,t.isCallingToPrimarySMBLimitEnabled=function(){return(0,i.getABPropConfigValue)("call_only_primary_device_limit_exceeded")},t.isCollectionReorderingEnabled=function(){return(0,i.getABPropConfigValue)("smb_catalog_collections_reordering_enabled")},t.isConsumerTransparencyEnabled=function(){return(0,i.getABPropConfigValue)("ctwa_consumer_data_sharing_consent")},t.isCustomURLViaBizProfileEnabled=function(){return(0,i.getABPropConfigValue)("smb_biz_profile_custom_url")},t.isInteractiveCtaMessageEnabled=function(e,t,n){if((0,f.isBizSourceFromMarketingMessage)(n))return(0,i.getABPropConfigValue)("web_premium_messages_interactivity_rendering_enabled");if("quoted_carousel_card"===n&&e===c.default.QUICK_REPLY)return R();if(!0===t)return(0,i.getABPropConfigValue)("web_premium_messages_interactivity_rendering_enabled");return!1},t.isLabelReorderingInWebEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_label_improvements_reordering")&&(0,i.getABPropConfigValue)("web_smb_label_reordering_m2_two_way")},t.isLabelReorderingSyncFromPrimaryEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_label_improvements_reordering")},t.isMessageWithLinkNfmEnabled=function(){return(0,i.getABPropConfigValue)("payments_link_to_lite_consumer_enabled")},t.isMultiDeviceAgentsLoggingEnabled=function(){return S()&&(0,i.getABPropConfigValue)("smb_multi_device_agents_logging_V2_enabled")},t.isMultiDeviceMessageAttributionEnabled=S,t.isOrderContentOptimizationEnabled=P,t.isOrderDetailsQuickPayEnabled=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.NONE;try{const{allowed_product_type:t}=JSON.parse((0,i.getABPropConfigValue)("order_details_quick_pay"));if(t&&t!==y.NONE)return t===y.ANY||t===e}catch(e){__LOG__(3)`isOrderDetailsQuickPayEnabled failed to parse config json: error ${e}`}return!1},t.isOrderStatusM1Enabled=function(){return(0,i.getABPropConfigValue)("order_statuses_revamp_m1_enabled")},t.isPSForCatalogViewEnabled=function(){return(0,i.getABPropConfigValue)("web_enable_biz_catalog_view_ps_logging")},t.isPremiumMessagesClickLoggingEnabled=function(){return(0,i.getABPropConfigValue)("smb_premium_messages_click_logging_enabled")},t.isPremiumMessagesNewLeavingWAContentEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smba_premium_messages_leaving_wa_content")},t.isPremiumMessagesUrlCtaDialogEnabled=function(){return(0,i.getABPropConfigValue)("smb_premium_messages_url_cta_alert_dialog_enabled")},t.isQuantityControlsFeatureEnabled=function(){return(0,i.getABPropConfigValue)("web_quantity_controls_enabled")},t.isSMBDataSharingOrderCopyOptimizationEnabled=function(){return(0,p.isSMB)()&&P()},t.isSMBEnhancedLoggingEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("business_tool_enhanced_logging")},t.isSMBLabelsDataSharingEnabledForChats=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_labels_ctwa_data_sharing")},t.isSMBLabelsDataSharingEnabledForMessages=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_message_labels_ctwa_data_sharing")},t.isSMBMMSpamReportEnabled=function(){return(0,i.getABPropConfigValue)("smb_premium_messages_spam_report_enabled")},t.isSellerOrderRevampEnabled=function(){return(0,i.getABPropConfigValue)("seller_orders_management_revamp")},t.isSmbOrangeEnabled=function(){if(!(0,p.isSMB)())return!1;return(0,i.getABPropConfigValue)("smb_orange_enabled")},t.isUtmTrackingEnabled=function(){return(0,i.getABPropConfigValue)("utm_tracking_enabled")},t.isWidInPaymentsCountry=function(e){var t;if(!e)return!1;const n=e.isLid()?null===(t=(0,o.getPhoneNumber)(e))||void 0===t?void 0:t.user:e.user;if(null==n)return!1;return m(n)||function(e){return"BR"===(0,d.getCountryShortcodeByPhone)(e||"")}(n)},t.labelsEditingEnabled=function(){return(0,p.isSMB)()&&(0,_.primaryFeatureEnabled)("companion_biz_label_sync_support")&&(0,i.getABPropConfigValue)("web_labels_editing_enabled")},t.messageQuickReplyEnabled=function(){return(0,i.getABPropConfigValue)("message_quick_reply")},t.nativeFlowMessagesEnabled=function(){return(0,i.getABPropConfigValue)("nfm_rendering_enabled")},t.orderDetailsCustomItemEnabled=function(){return(0,i.getABPropConfigValue)("order_details_custom_item_enabled")},t.orderDetailsFromCartEnabled=function(){return(0,i.getABPropConfigValue)("order_details_from_cart_enabled")},t.orderDetailsFromCatalogEnabled=function(){return(0,i.getABPropConfigValue)("order_details_from_catalog_enabled")},t.orderDetailsTotalMaxValue=function(e){return O(e)?5e3:(0,i.getABPropConfigValue)("order_details_total_maximum_value")},t.orderDetailsTotalOrderMinimumValue=function(){return(0,i.getABPropConfigValue)("order_details_total_order_minimum_value")},t.orderManagementEnabled=function(){return(0,i.getABPropConfigValue)("order_management_enabled")},t.qpCampaignsEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("qp_campaign_client_enabled")},t.qpGraphQLEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_graphql_to_fetch_qp_enabled")},t.qpGraphQLFetchIntervalMinutes=function(){return(0,i.getABPropConfigValue)("smb_graphql_to_fetch_qp_frequency_mins")},t.qpSDKProcessingEnabled=function(){return(0,i.getABPropConfigValue)("quick_promotion_banner_client_enabled")},t.qpSurfaceIdsUsingGraphQL=function(){const e=(0,i.getABPropConfigValue)("smb_graphql_to_fetch_qp_surface_ids"),t=new Map(Array.from(u.KNOWN_QP_SURFACES.values(),(e=>[e,e]))),n=new Set;return e.split(",").forEach((e=>{const r=t.get(e);null!=r?n.add(r):__LOG__(4,void 0,new Error)`qpSurfaceIdsUsingGraphQL: unknown surface ID ${e}`})),n},t.quickRepliesManagementEnabled=function(){return(0,p.isSMB)()&&(0,_.primaryFeatureEnabled)("companion_biz_quick_reply_sync_support")&&(0,i.getABPropConfigValue)("web_quick_reply_authoring")},t.saveDraftOrderEnabled=function(){return(0,i.getABPropConfigValue)("draft_orders_enabled")},t.shopsInteractiveMessageEnabled=function(){return(0,i.getABPropConfigValue)("web_shop_storefront_message")},t.shouldFetchLinkedAccounts=void 0,t.shouldReorderChatOnAssignment=function(e){if(e)return(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_chats_reorder_on_chat_unassignment_enabled");return(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_chats_reorder_on_chat_assignment_enabled")},t.shouldShowManageAdsDropdown=t.shouldShowAdCreationIcon=t.shouldShowAdCreationDropdown=void 0,t.shouldShowSMBDataSharingSettings=function(){return(0,p.isSMB)()&&!1===(0,i.getABPropConfigValue)("ctwa_smb_data_sharing_settings_killswitch")},t.smartFiltersEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smart_filters_enabled")||!(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smart_filters_enabled_consumer")},t.smbBizProfileLoggingEnabled=function(){if((0,p.isSMB)())return(0,i.getABPropConfigValue)("smb_biz_profile_logging_enabled");return!1},t.smbClickToChatLoggingEnabled=function(){if((0,p.isSMB)())return(0,i.getABPropConfigValue)("smb_click_to_chat_logging_enabled");return!1},t.smbDataSharingConsentEnabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("ctwa_smb_data_sharing_consent")},t.smbDataSharingOptInCoolOffSeconds=function(){return(0,i.getABPropConfigValue)("ctwa_smb_data_sharing_opt_in_cool_off_period")},t.smbNotesV1Enabled=function(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_notes_v1_enabled")},t.subscriptionFetchEnabled=function(){if(!(0,p.isSMB)())return!1;return(0,i.getABPropConfigValue)("smb_dcp_enabled")},t.tos3GatingEnabled=function(){if(!(0,p.isSMB)())return(0,i.getABPropConfigValue)("tos_3_client_gating_enabled");return!1},t.tosFetchEnabled=function(){if(!(0,p.isSMB)())return(0,i.getABPropConfigValue)("tos_client_state_fetch_enabled");return!1},t.tosFetchIteration=function(){return(0,i.getABPropConfigValue)("tos_client_state_fetch_iteration")},t.utmTrackingExpirationInHours=function(){return(0,i.getABPropConfigValue)("utm_tracking_expiration_hours")};var i=n(83741),o=n(42247),a=n(20938),s=n(52765),l=n(25628),u=n(81204),c=r(n(718)),d=n(61388),p=n(43744),f=n(26368),_=n(89358),g=n(52143),h=n(3885);function A(){return(0,p.isSMB)()}function m(e){return(0,d.getCountryShortcodeByPhone)(e||"")===l.COMPLIANCE_INFO_CODES.INDIA||(0,s.isFeatureEnabled)("skip_compliance_phone_check")}function E(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!1;var r;if(null!=e&&(t=e.isLid()?null===(r=(0,o.getPhoneNumber)(e))||void 0===r?void 0:r.user:e.user,e.isLid()&&null==t))return!0;return!!m(t)&&n()}const y=n(76672)({DIGITAL_GOODS:"digital-goods",PHYSICAL_GOODS:"physical-goods",ANY:"any",NONE:"none"});function S(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_multi_device_message_attribution_enabled")}t.QuickPayProductTypeGating=y;function v(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("smb_md_agent_chat_assignment_enabled")}function I(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("wa_ctwa_ads_action_banner_enabled_web")}t.inOrderMessagesEphemeralExceptionEnabled=()=>(0,i.getABPropConfigValue)("order_messages_ephemeral_exception_enabled");const T=p.isSMB;t.adsActionBannersEnabledOnStartup=T;t.shouldShowAdCreationIcon=()=>(0,p.isSMB)()&&(0,i.getABPropConfigValue)("wa_ctwa_web_entrypoint_home_header_enabled");function b(){return(0,p.isSMB)()&&!1===(0,i.getABPropConfigValue)("kill_switch_ctwa_ml_entry_point_config")}t.shouldShowAdCreationDropdown=()=>(0,p.isSMB)()&&(0,i.getABPropConfigValue)("wa_ctwa_web_entrypoint_home_header_dropdown_enabled");t.shouldShowManageAdsDropdown=e=>(0,p.isSMB)()&&!0===(null==e?void 0:e.hasCreatedAd)&&(0,i.getABPropConfigValue)("wa_ctwa_web_entrypoint_manage_ads_home_header_dropdown_enabled");function M(){return(0,p.isSMB)()&&(0,i.getABPropConfigValue)("ctwa_manage_ads_tab_web")}function P(){return 0!==(0,i.getABPropConfigValue)("payments_br_content_optimization_variant")}function C(){return(0,i.getABPropConfigValue)("row_buyer_order_revamp_m0_enabled")}function O(e){const t=(0,h.getMeUser)(),n=(0,d.getCountryShortcodeByPhone)(t.user),r=(0,d.getCountryShortcodeByPhone)(e.contact.id.user);return"BR"===n&&"BR"===r}function R(){return(0,i.getABPropConfigValue)("carousel_message_client_enabled")}t.shouldFetchLinkedAccounts=()=>(0,p.isSMB)()&&(0,i.getABPropConfigValue)("wa_ctwa_web_fetch_linked_accounts_enabled")},52765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugDisableFeatureFlag=function(e){n[e]=!1},t.debugEnableFeatureFlag=function(e){n[e]=!0},t.isFeatureEnabled=function(e){return n[e]},t.overwriteDebugFeatures=function(){};const n={a11y_block:!1,lid_debug:!1,media_existence_check:!1,web_voip_voice_call:!1,web_voip_video_call:!1,youtube_video_preview_without_blur:!1,message_add_ons:!1,reactions_filter_problematic_flags:!0,skip_compliance_phone_check:!1,debug_commands:!1}},18106:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commentMessageParticipantLimit=function(){return(0,r.getABPropConfigValue)("parent_group_announcement_comments_participant_limit")},t.communitiesCreationEnabled=function(){if((0,o.isSMB)())return(0,r.getABPropConfigValue)("parent_group_create_enabled_for_smb_on_web");return!0},t.communitiesEnabled=a,t.communitiesEnabledSmb=function(){return(0,o.isSMB)()&&(0,r.getABPropConfigValue)("parent_group_view_enabled_for_smb_on_web")},t.communityAdminPromotionOneTimePromptEnabled=function(){return a()&&(0,r.getABPropConfigValue)("community_admin_promotion_one_time_prompt")},t.communityCreatePrivacyEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_create_privacy")},t.communityGeneralChatCreateEnabled=function(){return(0,r.getABPropConfigValue)("community_general_chat_create_enabled")},t.communityGeneralChatUIEnabled=function(){return(0,r.getABPropConfigValue)("community_general_chat_UI_enabled")},t.communityHistoryReceiveEnabled=function(){return(0,r.getABPropConfigValue)("community_history_receive")},t.communityShortGroupCreationEnabled=function(){return(0,r.getABPropConfigValue)("community_shorter_group_creation_enabled")},t.communitySubgroupSwitcherEntrypointEnabled=function(){return(0,r.getABPropConfigValue)("community_subgroup_switcher_entrypoint_enabled")},t.getParentGroupLinkLimit=function(){return(0,r.getABPropConfigValue)("parent_group_link_limit")+1},t.getParentGroupLinkLimitCommunityCreation=function(){return(0,r.getABPropConfigValue)("parent_group_link_limit_community_creation")+1},t.groupMentionsInSubgroupsEnabled=function(){return(0,r.getABPropConfigValue)("group_mentions_in_subgroups")},t.isCommentMessageHistorySyncReceiverEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_announcement_comments_history_sync_receiver_enabled")},t.isCommentMessageReceiverEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_announcement_comments_receiver_enabled")},t.isCommentMessageSubscriptionEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_announcement_comment_subscription_enabled")},t.isCommentMessagesEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_announcement_comments_enabled")},t.isCommentReceiveUIEnabled=function(){return(0,r.getABPropConfigValue)("web_comments_receive_ui_enabled")},t.isCommentSenderUIEnabled=function(){return(0,r.getABPropConfigValue)("web_comments_send_ui_enabled")},t.memberAddedGroupsM1Enabled=function(){return(0,r.getABPropConfigValue)("parent_group_allow_member_added_groups_m1")},t.memberSuggestedGroupsEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_allow_member_added_groups_m2")},t.memberSuggestedGroupsM3ReceiverEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_allow_member_suggest_existing_m3_receiver")},t.memberSuggestedGroupsM3SenderEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_allow_member_suggest_existing_m3_sender")},t.reportCommunityExitUpsellEnabled=function(){return(0,r.getABPropConfigValue)("community_reporting_ui_upsell_exit")},t.shouldShowNewSubgroupIdentity=function(e){if(null==e)return!1;return(e.groupType===i.GroupType.LINKED_SUBGROUP||e.groupType===i.GroupType.LINKED_GENERAL_GROUP)&&null!=e.getParentGroupChat()&&a()},t.subgroupFilterEnabled=function(){return(0,r.getABPropConfigValue)("parent_group_subgroup_filter")};var r=n(83741),i=n(98051),o=n(43744);function a(){return(0,o.isSMB)()?(0,r.getABPropConfigValue)("parent_group_view_enabled_for_smb_on_web"):(0,r.getABPropConfigValue)("parent_group_view_enabled")}},33365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allowReferenceByAltJid=function(){return(0,r.getABPropConfigValue)("web_lid_groups_allow_reference_by_alternative_jid")};var r=n(83741)},68214:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processReplyMessagesEnabled=function(){return(0,r.getABPropConfigValue)("web_message_edit_processing_reply_messages")},t.receiveCagMsgEditEnabled=function(){return(0,r.getABPropConfigValue)("cag_message_edit_receive")},t.receiveCaptionEditEnabled=function(){return(0,r.getABPropConfigValue)("caption_edit_receive")||o()},t.receiveTextEditEnabled=function(){return(0,r.getABPropConfigValue)("message_edit_receive")||i()||!1},t.sendCagMsgEditEnabled=function(){return(0,r.getABPropConfigValue)("cag_message_edit_send")},t.sendCaptionEditEnabled=o,t.sendTextEditEnabled=i;var r=n(83741);function i(){return(0,r.getABPropConfigValue)("message_edit_send")||!1}function o(){return(0,r.getABPropConfigValue)("caption_edit_send")}},19909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupSizeBypassingSampling=function(){var e;return null!==(e=(0,r.getABPropConfigValue)("group_size_bypassing_sampling"))&&void 0!==e?e:1e5},t.getReportingTagCleanupDays=function(){var e;return null!==(e=(0,r.getABPropConfigValue)("rt_clean_reporting_tag"))&&void 0!==e?e:i.DEFAULT_RT_CLEANUP_OLDER_THAN_DAYS},t.isDeviceSyncManagerGroupEnabled=function(){return(0,r.getABPropConfigValue)("web_device_sync_manager_group_enabled")},t.isInactiveReceiptsV2Enabled=function(){return(0,r.getABPropConfigValue)("web_inactive_receipts_v2")},t.isMessageDropBulkDbOperationFallbackEnabled=function(){return(0,r.getABPropConfigValue)("web_message_drop_bulk_db_operation_fallback_enabled")},t.isMessageDropPlaceholderEnabled=function(){return(0,r.getABPropConfigValue)("visible_message_drop_placeholder_enabled_internal_only")},t.isMsgTypeValidationDropMsgEnabled=function(){return o()&&(0,r.getABPropConfigValue)("rt_drop_message_invalid_type")},t.isMsgTypeValidationEnabled=o,t.isPaymentNotificationAckKickFixEnabled=function(){return(0,r.getABPropConfigValue)("web_payment_notifications_ack_kick_fix_enabled")},t.isReportingTagSyncingEnabled=function(){return(0,r.getABPropConfigValue)("rt_sync_reporting_tag")},t.isReportingTokenReceivingEnabled=function(){return(0,r.getABPropConfigValue)("rt_receive_reporting_tag")},t.isReportingTokenSendingEnabled=function(){return(0,r.getABPropConfigValue)("rt_send_reporting_tag")},t.isRetryReceiptErrorCodeEnabled=function(){return(0,r.getABPropConfigValue)("retry_receipt_error_code_enabled")},t.sendKeyDistributionMsgMaxGroupSize=function(){return(0,r.getABPropConfigValue)("web_send_invisible_msg_max_group_size")},t.sendKeyDistributionMsgMinGroupSize=function(){return(0,r.getABPropConfigValue)("web_send_invisible_msg_min_group_size")},t.sendKeyDistributionMsgToNewGroups=function(){return(0,r.getABPropConfigValue)("web_send_invisible_msg_to_new_groups")};var r=n(83741),i=n(99224);function o(){return(0,r.getABPropConfigValue)("rt_validate_message_type")}},52425:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupInfoShadowTestingEnabled=function(){return 2===(0,r.getABPropConfigValue)("mex_group_get_group_info_mode")},t.mexGetGroupInfoEnabled=function(){return 1===(0,r.getABPropConfigValue)("mex_group_get_group_info_mode")},t.xmlGroupInfoEnabled=function(){return 0===(0,r.getABPropConfigValue)("mex_group_get_group_info_mode")};var r=n(83741)},67454:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.accidentalDeleteMessageEnabled=function(){return(0,i.getABPropConfigValue)("web_accidental_delete_for_me")||!1},t.bonsaiReceiverEnabled=function(){return(0,i.getABPropConfigValue)("bonsai_receiver_enabled")},t.cagReactionsSend=function(e){if(e>=(0,i.getABPropConfigValue)("pnh_cag_disable_reactions_group_size"))return!1;if((0,s.isSMB)())return(0,i.getABPropConfigValue)("parent_group_view_enabled_for_smb_on_web");return!0},t.documentWithCaptionsSendEnabled=function(){return(0,i.getABPropConfigValue)("documents_with_captions_send")},t.experimentalEmojiAPIEnabled=function(){return(0,i.getABPropConfigValue)("web_abprop_emoji_experimental_api")},t.fourReactionsInBubbleEnabled=function(){return(0,i.getABPropConfigValue)("four_reactions_in_bubble_enabled")},t.futureproofReparsingNonAddOnsEnabled=function(){return(0,i.getABPropConfigValue)("web_fp_reparsing_for_non_add_ons")},t.getGraphqlLocaleRemapping=function(){return(0,i.getABPropConfigValue)("graphql_locale_remapping")},t.getGroupSizeLimit=function(e){let t;t=e===a.GroupType.LINKED_ANNOUNCEMENT_GROUP?(0,i.getABPropConfigValue)("community_announcement_group_size_limit"):(0,i.getABPropConfigValue)("group_size_limit")-1;(null==t||t<=0||Number.isNaN(t))&&(t=c.ServerProps.maxParticipants);return t},t.groupProfileEditorEnabled=function(){return(0,i.getABPropConfigValue)("web_group_profile_editor")},t.isAdminHfmToggleEnabled=function(){var e;return null!==(e=(0,i.getABPropConfigValue)("admin_hfm_toggle"))&&void 0!==e&&e},t.isAutoMuteConfirmationDialogEnabled=function(){return(0,i.getABPropConfigValue)("web_auto_mute_256_groups_confirmation")},t.isBlueEducationEnabled=function(){return(0,i.getABPropConfigValue)("blue_education_enabled")},t.isBlueEnabled=function(){return(0,i.getABPropConfigValue)("blue_enabled")},t.isBlueLockingEnabled=function(){if(!(0,s.isSMB)())return!1;return(0,i.getABPropConfigValue)("blue_profile_locked_ui_enabled")},t.isBlueP0LoggingEnabled=function(){return(0,i.getABPropConfigValue)("blue_client_p0_logging_enabled")},t.isBlueStringsEnabled=function(){return(0,i.getABPropConfigValue)("blue_strings_enabled")},t.isDefaultDisappearingMessagesEnabled=function(){return(0,u.primaryFeatureEnabled)("ddm_settings")&&(0,i.getABPropConfigValue)("web_privacy_settings_v2")},t.isDropLastNameEnabled=function(){var e;return null!==(e=(0,i.getABPropConfigValue)("drop_last_name"))&&void 0!==e&&e},t.isFavoriteStickersEnabled=function(){return(0,u.primaryFeatureEnabled)("favorite_sticker")},t.isGroupSuspendV2Enabled=function(){return(0,i.getABPropConfigValue)("group_suspend_v2_enabled")},t.isHighQualityVideoThumbnailsEnabled=function(){const{UA:e}=n(88745),t=(0,l.getModernizr)();if(e.isGecko&&!(null==t?void 0:t.exiforientation))return!1;return!0},t.isInAppSupportEnabled=function(){if(!(0,i.getABPropConfigValue)("in_app_support_v2_enabled"))return!1;const e=(0,i.getABPropConfigValue)("in_app_support_v2_locale_langs");if(""===e)return!0;const t=new Set(e.split(",")),r=(0,o.default)(n(14950));return t.has(r.getNormalizedLocale())},t.isPrivacyNarrativeV1Enabled=function(){return!(0,s.isSMB)()},t.isRambutanEnabled=function(){return(0,s.isSMB)()&&(0,i.getABPropConfigValue)("smb_rambutan_enabled")},t.isRecentStickersMDEnabled=function(){return(0,i.getABPropConfigValue)("recent_sticker_rollout_phase")>=3&&(0,u.primaryFeatureEnabled)("recent_sticker")},t.isSearchTheWebEnabled=function(){return(0,i.getABPropConfigValue)("search_the_web_dialog_redesign")},t.isStickerRmrSyncEnabled=function(){return(0,i.getABPropConfigValue)("recent_sticker_rollout_phase")>=4||(0,i.getABPropConfigValue)("favorite_sticker_rmr_sync_enabled")},t.mediaEditorBlurToolEnabled=function(){return(0,i.getABPropConfigValue)("web_media_editor_blur_tool")},t.mediaLinksDocsFilteringEnabled=function(){return(0,i.getABPropConfigValue)("web_abprop_media_links_docs_search")},t.messageCustomAriaLabelEnabled=function(){return(0,i.getABPropConfigValue)("web_message_custom_aria_label")},t.messageLevelReportingEnabled=function(){return(0,i.getABPropConfigValue)("message_level_reporting")},t.messageListA11yRedesignEnabled=function(){return(0,i.getABPropConfigValue)("web_message_list_a11y_redesign")},t.messagePluginFrontendRegistrationEnabled=function(){return(0,i.getABPropConfigValue)("web_message_plugin_frontend_registration_enabled")},t.multiSkinToneEmojiPickerEnabled=function(){return(0,i.getABPropConfigValue)("web_multi_skin_toned_emoji_picker")||!1},t.paymentBackgroundEnabled=function(){if(c.ServerProps.webPaymentBackgroundEnabled)return!0;return!1},t.pinChatSyncEnabled=function(){if(c.ServerProps.syncdPinChatEnabled)return!!((0,s.getMobilePlatform)()!==s.PLATFORMS.ANDROID&&(0,s.getMobilePlatform)()!==s.PLATFORMS.SMBA||(0,d.getPrimaryAllowsAllMutations)());return!1},t.pnhCagBlockLidInLimbo=function(){return(0,i.getABPropConfigValue)("pnh_cag_block_lid_in_limbo")},t.pnhCagShowMaskedMembersEnabled=function(){return(0,i.getABPropConfigValue)("pnh_cag_show_masked_members")},t.queryVerifiedNameWhenMsgDiffers=function(){return(0,i.getABPropConfigValue)("query_verified_name_when_msg_differs")},t.screenLockFeatureSupported=function(){return(0,i.getABPropConfigValue)("web_abprop_screen_lock_enabled")},t.web2FAEnabled=function(){return(0,i.getABPropConfigValue)("web_2fa")},t.webMediaAutoDownloadEnabled=function(){return!(0,i.getABPropConfigValue)("disable_auto_download")};var i=n(83741),o=r(n(91262)),a=n(98051),s=n(43744),l=n(16342),u=n(89358),c=n(52143),d=n(35878)},43744:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORMS=void 0,t.getMobilePlatform=function(){null==s&&__LOG__(4,void 0,new Error)`Failed to get primary platform`;return s},t.isSMB=function(){return s===a.SMBA||s===a.SMBI},t.setMobilePlatform=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(97023);const a={ANDROID:"android",IPAD:"ipad",IPHONE:"iphone",SMBA:"smba",SMBI:"smbi"};let s;function l(){return(l=(0,i.default)((function*(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(yield(0,o.setLastMobilePlatform)(e)),s=e,__LOG__(2)`Successfully writes platform to UserPrefs, platform: ${e}`}))).apply(this,arguments)}t.PLATFORMS=a},463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMatFullyEnabled=function(){return(0,r.getABPropConfigValue)("pnh_split_threads_detection")};var r=n(83741)},17761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canEnableOfflineNotifications=function(){return s()&&(0,r.getABPropConfigValue)("web_push_notifications")},t.canEnablePeriodicBackgroundSync=function(){return!(0,o.isWorker)()&&l()&&(0,i.isCurrentWebSessionInsidePwa)()&&(0,r.getABPropConfigValue)("web_pwa_background_sync")},t.canSupportOfflineNotifications=s,t.canSupportPeriodicBackgroundSync=l;var r=n(83741),i=n(94226),o=n(95160),a=n(88745);function s(){try{return!(a.UA.isSafari&&Number(a.UA.browserVersion.split(".")[0])<16)}catch(e){return!1}}function l(){try{return!(a.UA.isSafari||a.UA.browser===a.BROWSER_TYPE.FIREFOX||a.UA.isChrome&&Number(a.UA.browserVersion.split(".")[0])<80)}catch(e){return!1}}},3792:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Killswitch=void 0,t.didSuccessfulyFetchKillSwitchValues=c,t.fetchKillswitchValues=_,t.fetchKillswitchValuesAtLeastOnce=function(){return f.apply(this,arguments)},t.getKillswitchOverridesMap=function(){return null},t.getKillswitchValue=function(){return p.apply(this,arguments)},t.setKillswitchOverride=function(){};var i=r(n(48926)),o=n(28123);r(n(89482));const a=Object.freeze({DESKTOP_UPSELL_MAC_QR_BANNER:"wa_web/logged_out_killswitches:desktop_upsell_mac_qr_banner",DESKTOP_UPSELL_WINDOWS_QR_BANNER:"wa_web/logged_out_killswitches:desktop_upsell_windows_qr_banner",DESKTOP_UPSELL_WINDOWS_QR_BANNER_VARIATION_2:"wa_web/logged_out_killswitches:desktop_upsell_windows_qr_banner_variation_2",DEVICE_LINKING_RESTORE_SETTINGS_INSTRUCTIONS:"wa_web/logged_out_killswitches:device_linking_restore_settings_instructions",ELECTRON_MAC_DEPRECATION_APPSTORE_BANNER_ENABLED:"wa_web/logged_out_killswitches:electron_mac_deprecation_appstore_banner_enabled",ELECTRON_MAC_DEPRECATION_APPSTORE_BANNER_EXPIRY_ENABLED:"wa_web/logged_out_killswitches:electron_mac_deprecation_appstore_banner_expiry_enabled",ELECTRON_MAC_DEPRECATION_APPSTORE_BANNER_EXPIRY_OFFSET:"wa_web/logged_out_killswitches:electron_mac_deprecation_appstore_banner_expiry_offset",ELECTRON_MAC_DEPRECATION_BANNER_ENABLED:"wa_web/logged_out_killswitches:electron_mac_deprecation_banner_enabled",ELECTRON_MAC_DEPRECATION_BANNER_EXPIRY_ENABLED:"wa_web/logged_out_killswitches:electron_mac_deprecation_banner_expiry_enabled",ELECTRON_MAC_DEPRECATION_BANNER_EXPIRY_OFFSET:"wa_web/logged_out_killswitches:electron_mac_deprecation_banner_expiry_offset",ELECTRON_MAC_UNSUPPORTED_OS_DISABLE_AUTOUPDATE:"wa_web/logged_out_killswitches:electron_mac_unsupported_os_disable_autoupdate",SW_UNREGISTER_KILLSWITCH:"wa_web/sw_killswitches:sw_unregister_killswitch",SW_PUSH_UNSUBSCRIBE_KILLSWITCH:"wa_web/sw_killswitches:sw_push_unsubscribe_killswitch",SW_HEARTBEAT_KILLSWITCH:"wa_web/sw_killswitches:sw_heartbeat_killswitch",DB_ROLLOUT_VERSION_MODEL_STORAGE:"wa_web/db_rollout_version:model-storage",DB_ROLLOUT_VERSION_FTS_STORAGE:"wa_web/db_rollout_version:fts-storage",DB_ROLLOUT_VERSION_JOBS_STORAGE:"wa_web/db_rollout_version:jobs-storage",DB_ROLLOUT_VERSION_LRU_MEDIA_STORAGE:"wa_web/db_rollout_version:lru-media-storage-idb",DB_ROLLOUT_VERSION_OFFD_STORAGE:"wa_web/db_rollout_version:offd-storage",DB_ROLLOUT_VERSION_QPL_STORAGE:"wa_web/db_rollout_version:qpl-storage",DB_ROLLOUT_VERSION_SIGNAL_STORAGE:"wa_web/db_rollout_version:signal-storage",DB_ROLLOUT_VERSION_WORKER_STORAGE:"wa_web/db_rollout_version:worker-storage",DB_ROLLOUT_VERSION_SW:"wa_web/db_rollout_version_1_based:sw",DB_ROLLOUT_VERSION_WAWC:"wa_web/db_rollout_version_1_based:wawc",DB_ROLLOUT_VERSION_WAWC_DB_ENC:"wa_web/db_rollout_version_1_based:wawc_db_enc",DB_ROLLOUT_KILLSWITCH:"wa_web/db_rollout_version:db_rollout_killswitch"});t.Killswitch=a;let s=!1,l={},u=null;function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){return yield u,s}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){try{var t;return yield u,null!==(t=l[e])&&void 0!==t?t:null}catch(t){return __LOG__(2)`Unable to query killswitch ${e}`,null}}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){return!!(yield c())||(yield _(),c())}))).apply(this,arguments)}function _(){return u||(u=function(){return g.apply(this,arguments)}().then((()=>{u=null})),u)}function g(){return(g=(0,i.default)((function*(){try{const e=yield self.fetch(`${o.DYN_ORIGIN}killswitch/`,{credentials:"include"}),t=yield e.json();t&&"object"==typeof t&&(l=t,s=!0)}catch(e){__LOG__(4,void 0,new Error,!0,["non-sad"])`killswitch: Unable to query killswitches`,SEND_LOGS("killswitch: Unable to query killswitches",.001,"non-sad")}}))).apply(this,arguments)}},88159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecentSyncMessageProcessingBreakIteration=function(){return(0,r.getABPropConfigValue)("web_noncritical_history_sync_message_processing_break_iteration")},t.isHistorySyncHandlingRestartV2Enabled=function(){return(0,r.getABPropConfigValue)("web_recent_sync_handling_loop_restart_v2_enabled")},t.isHistorySyncOnDemandEnabled=function(){if(!o.PrimaryFeatures.historySyncOnDemand)return!1;const e=(0,a.getInitialHistorySyncCompleteLocalStorage)(),t=(0,a.getHistoryInitialSyncBoundary)();if(e&&(null==t||0===Object.keys(t).length))return __LOG__(2)`[rdu] History sync on demand feature is disabled as initial sync is incomplete or initial sync boundary is not available`,!1;if(((0,i.getMobilePlatform)()===i.PLATFORMS.ANDROID||(0,i.getMobilePlatform)()===i.PLATFORMS.SMBA)&&o.PrimaryFeatures.isPrimaryBetaBuild&&(0,r.getABPropConfigValue)("history_sync_on_demand_with_android_beta"))return!0;return(0,r.getABPropConfigValue)("history_sync_on_demand")},t.isHistorySyncWithoutMmsEnabled=function(){return!0},t.isMessagePlaceholderResendNseSupportEnabled=function(){return o.PrimaryFeatures.messagePlaceholderResendNseSupport},t.isPlaceholderMessageResendEnabled=function(){return(0,r.getABPropConfigValue)("placeholder_message_resend")},t.isRecentSyncChunkDataHandlingInWorkerEnabled=function(){return(0,r.getABPropConfigValue)("web_recent_sync_chunk_data_handling_worker")},t.isRecentSyncDownloadOptimizationEnabled=function(){return(0,r.getABPropConfigValue)("web_recent_sync_chunk_download_optimization")},t.isRecentSyncNextChunkFetchOptimizationEnabled=function(){return(0,r.getABPropConfigValue)("web_recent_sync_next_chunk_fetch_optimization")},t.isRecentSyncWorkerComaptibleHandlingEnabled=function(){return(0,r.getABPropConfigValue)("web_recent_sync_worker_compatible_handling")},t.isWebLinkPreviewNseSupportEnabled=function(){return o.PrimaryFeatures.webLinkPreviewNseSupport},t.shouldPopulateStarMessageWithTimestamp=function(){return o.PrimaryFeatures.historySyncOnDemand};var r=n(83741),i=n(43744),o=n(88783),a=n(96549)},37716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extraMenuSectionEnabled=function(){return o()&&(0,r.getABPropConfigValue)("web_other_items_on_navbar_enabled")},t.topMenuRedesignEnabled=o,t.webChatlistToggleEnabled=function(){return(0,r.getABPropConfigValue)("web_chatlist_toggle")&&!o()};var r=n(83741),i=n(95443);function o(){return(0,r.getABPropConfigValue)("top_menu_redesign_enabled")||(0,i.designRefreshEnabled)()}},27799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldLogUnknownNumberError=function(){return!1},t.useNewUsernameDesign=function(){return!1},t.username1on1ChatCreationEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_1on1_chat"))},t.usernameChangeEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_change"))},t.usernameContactlessChatEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_contact_display"))&&Boolean((0,r.getABPropConfigValue)("username_1on1_chat"))&&Boolean((0,r.getABPropConfigValue)("username_usync"))},t.usernameCreationEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_creation"))},t.usernameDisplayedEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_contact_display"))},t.usernameSecurityCodeGenerationEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_security_code_generation"))},t.usernameSecurityCodeVerificationEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_security_code_verification"))},t.usernameSupported=function(){return(0,r.getABPropConfigValue)("username_creation")&&(0,i.primaryFeatureEnabled)("username_supported")},t.usernameUsyncEnabled=function(){return Boolean((0,r.getABPropConfigValue)("username_usync"))};var r=n(83741),i=n(89358)},14951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReceivingViewOnceV2Enabled=function(){return(0,r.getABPropConfigValue)("enable_soox_message_receiving")},t.isSendingViewOnceV2Enabled=function(){return(0,r.getABPropConfigValue)("enable_soox_message_sending")},t.isViewOnceSunsetEnabled=function(){return(0,r.getABPropConfigValue)("view_once_sp_receiver")};var r=n(83741)},95443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorRefreshEnabled=function(){return(0,r.getABPropConfigValue)("web_colors_refresh")||i()},t.designRefreshEnabled=i,t.materialRefreshEnabled=function(){return(0,r.getABPropConfigValue)("web_material_refresh")||i()};var r=n(83741);function i(){return(0,r.getABPropConfigValue)("web_design_refresh")}},52143:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UNINITIALIZED_VALUE_WEB_BIZ_PROFILE_OPTIONS=t.ServerPropsImpl=t.ServerProps=t.DEFAULT_MAX_FILE_SIZE_BYTES=void 0,t.getMaxFilesSizeServerProp=function(){return d.maxFileSize};var i=n(43175),o=r(n(14602)),a=n(90002),s=(n(95160),n(53047));const l=104857600;t.DEFAULT_MAX_FILE_SIZE_BYTES=l;t.UNINITIALIZED_VALUE_WEB_BIZ_PROFILE_OPTIONS=3;const u=604800;class c extends i.BaseModel{constructor(){super(...arguments),this.serverPropsVersion=(0,i.prop)(),this.gifProvider=(0,i.prop)("tenor"),this.maxParticipants=(0,i.prop)(256),this.maxSubject=(0,i.prop)(25),this.maxElectronFileSize=(0,i.prop)(l),this.maxFileSize=(0,i.prop)(l),this.streamingUploadChunkSize=(0,i.prop)(0),this.groupDescLength=(0,i.prop)(512),this.ephemeralMessagesAllowedValues=(0,i.prop)("604800"),this.wallpapersV2=(0,i.prop)(!1),this.hfmStringChanges=(0,i.prop)(!1),this.mmsCatV1ForwardHotOverrideEnabled=(0,i.prop)(!1),this.pttConversationWaveform=(0,i.prop)(!1),this.pttOotPlayback=(0,i.prop)(!1),this.pttPausableEnabled=(0,i.prop)(!1),this.pttPlaybackSpeedEnabled=(0,i.prop)(!1),this.pttRememberPlayPosition=(0,i.prop)(!1),this.mmsMediaKeyTTL=(0,i.prop)(1/0),this.webSendDocumentThumbInMessageDisabled=(0,i.prop)(!1),this.webDownloadStatusThumbMmsEnabled=(0,i.prop)(!1),this.groupCallMaxParticipants=(0,i.prop)(0),this.webVoipMacOsMinVersion=(0,i.prop)(""),this.webVoipWindowsOsMinVersion=(0,i.prop)(""),this.syncdInlineMutationsMaxCount=(0,i.prop)(1e3),this.syncdPatchProtobufMaxSize=(0,i.prop)(100),this.syncdKeyMaxUseDays=(0,i.prop)(30),this.syncdWaitForKeyTimeoutDays=(0,i.prop)(2),this.syncdAdditionalMutations=(0,i.prop)(1),this.syncdSentinelTimeoutSeconds=(0,i.prop)(3),this.syncdPinChatEnabled=(0,i.prop)(!1),this.syncdQPLLoggingEnabled=(0,i.prop)(!1),this.webPaymentBackgroundEnabled=(0,i.prop)(!1),this.webBizProfileOptions=(0,i.prop)(3),this.shopsProductGrid=(0,i.prop)(!1),this.greenAlertBannerDuration=(0,i.prop)(0),this.webProductListMessagePageSize=(0,i.prop)(a.PRODUCT_PAGE_SIZE),this.blockCatalogCreationEcommerceComplianceIndia=(0,i.prop)(!1),this.ecommerceComplianceIndia=(0,i.prop)(!1),this.smbEcommerceComplianceIndiaM4=(0,i.prop)(!1),this.smbEcommerceComplianceIndiaM4_5=(0,i.prop)(!1),this.webLogUploadDownloadCrashes=(0,i.prop)(!1),this.webMdMmsSyncDeletionRequest=(0,i.prop)(!0),this.maxKeys=(0,i.prop)(200)}delete(){super.delete(),this.updateProps({})}initialize(){super.initialize()}updateProps(e){let t=e;s.Global.set({webcBucket:t.bucket||null}),this.__props.forEach((e=>{let n=t[e];void 0===n&&(n="serverPropsVersion"===e?this.serverPropsVersion:this.getDefault(e)),this.set(e,n)}))}extendAndOverrideFromURLParams(e){const t=new o.default(window.location.search),n=e;return this.__props.forEach((e=>{if(!0===t.has(e)){const r=t.get(e);if(null==r)return;"true"===r||"false"===r?n[e]="true"===r:isNaN(r)||isNaN(parseFloat(r))?n[e]=r:n[e]=parseFloat(r)}})),n}getEphemeralMessagesAllowedValues(){try{return this.ephemeralMessagesAllowedValues.split(",").map((e=>parseInt(e,10)))}catch(e){return __LOG__(4,void 0,new Error,!0)`[ephemeral] incorrect type for ephemeralMessagesAllowedValues`,SEND_LOGS("ephemeral"),[u]}}}t.ServerPropsImpl=c,c.Proxy="serverProps";const d=new((0,i.defineModel)(c))({id:"1"});t.ServerProps=d},26368:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getIsEditProtocolMsg=t.getIsDynamicReplyButtonsMsg=t.getIsDisappearingModeSystemMessage=t.getIsCarouselCard=t.getIsCaptionByUser=t.getIsCAPISupport=t.getIsBotSearchResponse=t.getIsBotResponse=t.getIsBotQuery=t.getIsBotPluginCarouselMsg=t.getIsBotInvoke=t.getIsBotFutureproofPlaceholder=t.getIsBotFeedbackMessage=t.getIsBizNotification=t.getIsBizContentPlaceholder=t.getIsBizBot3pResponse=t.getIsBizBot1pResponse=t.getIsAvatar=t.getIsAuthenticationMessage=t.getIsAckPlayable=t.getInviteGrpType=t.getInviteGrpName=t.getInviteGrpJpegThum=t.getInviteGrp=t.getInviteCodeExp=t.getInviteCode=t.getInvis=t.getInteractiveType=t.getInteractiveHeader=t.getInteractiveAnnotations=t.getInitialPageSize=t.getId=t.getHsmTag=t.getHostedBizEncStateMismatch=t.getHeaderType=t.getHasThumbList=t.getHasReaction=t.getHasOriginatedFromNewsletter=t.getHasMentionOfMe=t.getGroupMentions=t.getGifAttribution=t.getFutureproofType=t.getFutureproofSubtype=t.getFrom=t.getForwardingScore=t.getForwardedNewsletterMessageInfo=t.getFooter=t.getFinalLng=t.getFinalLat=t.getFilename=t.getFilehash=t.getEventStartTime=t.getEventName=t.getEventLocation=t.getEventJoinLink=t.getEventInvalidated=t.getEventDescription=t.getErrorCode=t.getEphemeralSettingUser=t.getEphemeralOutOfSync=t.getEphemeralExpirationTimestamp=t.getEphemeralDuration=t.getDynamicReplyButtons=t.getDoNotPlayInline=t.getDisappearingModeTrigger=t.getDisappearingModeInitiator=t.getDisappearingModeInitiatedByMe=t.getDescription=t.getDeprecatedMms3Url=t.getCurrencyCode=t.getCtwaContext=t.getComment=t.getClientUrl=t.getCaption=t.getCanonicalUrl=t.getCampaignId=t.getBusinessOwnerJid=t.getBroadcastId=t.getBroadcast=t.getBotTargetSenderJid=t.getBotResponseTargetId=t.getBotRespOrInvocationRevokeBotWid=t.getBotReelPluginThumbnailCdnUrl=t.getBotPluginType=t.getBotPluginSearchUrl=t.getBotPluginSearchProvider=t.getBotPluginReferenceIndex=t.getBotPluginMaybeParent=t.getBotEditType=t.getBody=t.getBizSource=t.getBizPrivacyStatus=t.getBizBotType=t.getBackgroundColor=t.getAuthor=t.getAgendId=t.getActiveBotMsgStreamingInProgress=t.getAck=t.clearMsgGetterCacheFor=t.INITIAL_PAGE_SIZE=void 0,t.getRecipients=t.getRcatString=t.getRcat=t.getQuotedRemoteJid=t.getQuotedParticipant=t.getQuotedMsg=t.getProductListHeaderImage=t.getProductImageCount=t.getProductId=t.getProductHeaderImageRejected=t.getPriceAmount1000=t.getPollSelectableOptionsCount=t.getPollOptions=t.getPollName=t.getPollInvalidated=t.getPlaceholderCreatedWhenAccountIsHosted=t.getPaymentTxnStatus=t.getPaymentTransactionTimestamp=t.getPaymentStatus=t.getPaymentRequestMessageKey=t.getPaymentNoteMsg=t.getPaymentMessageReceiverJid=t.getPaymentInviteServiceType=t.getPaymentExpiryTimestamp=t.getPaymentCurrency=t.getPaymentBackground=t.getPaymentAmount1000=t.getOriginalSender=t.getOriginalSelfAuthor=t.getOrderTitle=t.getNumTimesForwarded=t.getNewsletterAdminInviteInfo=t.getNativeFlowName=t.getNativeFlowButtons=t.getMsgUnsafe=t.getMimetype=t.getMessageSecret=t.getMessage=t.getMentionedJidList=t.getMediaKey=t.getMatchedText=t.getLocal=t.getLoc=t.getLng=t.getList=t.getLinkPreview=t.getLatestEditMsgKey=t.getLat=t.getLastBotEditBodyLength=t.getLabels=t.getKicTimestampMs=t.getKicState=t.getKicSender=t.getKicKey=t.getItemCount=t.getIsViewOnce=t.getIsVcardOverMmsDocument=t.getIsUserCreatedType=t.getIsUnreadType=t.getIsUnkept=t.getIsStickerMsg=t.getIsStatusV3=t.getIsSentByMeFromWeb=t.getIsSentByMe=t.getIsSendFailure=t.getIsRevokedByMe=t.getIsRevokeForMsgFromOrDeliveredToBot=t.getIsRevoke=t.getIsReply=t.getIsReaction=t.getIsProductListMessage=t.getIsPollVote=t.getIsPSA=t.getIsOpus=t.getIsNotification=t.getIsNewsletterMsg=t.getIsNewsletterAdminInviteExpired=t.getIsNewMsg=t.getIsMetaBotResponse=t.getIsMetaBotInvokeResponse=t.getIsMedia=t.getIsMdHistoryMsg=t.getIsMarketingMessage=t.getIsLive=t.getIsKept=t.getIsInternational=t.getIsInitialE2ENotification=t.getIsImportantMessage=t.getIsIAS=t.getIsGroupsV4InviteExpired=t.getIsGroupMsg=t.getIsGif=t.getIsFutureproof=t.getIsFromTemplate=t.getIsFrequentlyForwarded=t.getIsForwarded=t.getIsFailed=t.getIsEventCanceled=t.getIsEphemeral=t.getIsEdited=t.getIsEditProtocolMsg=t.getIsDynamicReplyButtonsMsg=t.getIsDisappearingModeSystemMessage=t.getIsCarouselCard=t.getIsCaptionByUser=t.getIsCAPISupport=t.getIsBotSearchResponse=t.getIsBotResponse=t.getIsBotQuery=t.getIsBotPluginCarouselMsg=t.getIsBotInvoke=t.getIsBotFutureproofPlaceholder=t.getIsBotFeedbackMessage=t.getIsBizNotification=t.getIsBizContentPlaceholder=t.getIsBizBot3pResponse=t.getIsBizBot1pResponse=t.getIsAvatar=t.getIsAuthenticationMessage=t.getIsAckPlayable=t.getInviteGrpType=t.getInviteGrpName=t.getInviteGrpJpegThum=t.getInviteGrp=t.getInviteCodeExp=t.getInviteCode=t.getInvis=t.getInteractiveType=t.getInteractiveHeader=t.getInteractiveAnnotations=t.getInitialPageSize=t.getId=t.getHsmTag=t.getHostedBizEncStateMismatch=t.getHeaderType=t.getHasThumbList=t.getHasReaction=t.getHasOriginatedFromNewsletter=t.getHasMentionOfMe=t.getGroupMentions=t.getGifAttribution=t.getFutureproofType=t.getFutureproofSubtype=t.getFrom=t.getForwardingScore=t.getForwardedNewsletterMessageInfo=t.getFooter=t.getFinalLng=t.getFinalLat=t.getFilename=t.getFilehash=t.getEventStartTime=t.getEventName=t.getEventLocation=t.getEventJoinLink=t.getEventInvalidated=t.getEventDescription=t.getErrorCode=t.getEphemeralSettingUser=t.getEphemeralOutOfSync=t.getEphemeralExpirationTimestamp=t.getEphemeralDuration=t.getDynamicReplyButtons=t.getDoNotPlayInline=t.getDisappearingModeTrigger=t.getDisappearingModeInitiator=t.getDisappearingModeInitiatedByMe=t.getDescription=t.getDeprecatedMms3Url=t.getCurrencyCode=t.getCtwaContext=t.getComment=t.getClientUrl=t.getCaption=t.getCanonicalUrl=t.getCampaignId=t.getBusinessOwnerJid=t.getBroadcastId=t.getBroadcast=t.getBotTargetSenderJid=t.getBotResponseTargetId=t.getBotRespOrInvocationRevokeBotWid=t.getBotReelPluginThumbnailCdnUrl=t.getBotPluginType=t.getBotPluginSearchUrl=t.getBotPluginSearchProvider=t.getBotPluginReferenceIndex=t.getBotPluginMaybeParent=t.getBotEditType=t.getBody=t.getBizSource=t.getBizPrivacyStatus=t.getBizBotType=t.getBackgroundColor=t.getAuthor=t.getAgendId=t.getActiveBotMsgStreamingInProgress=t.getAck=t.clearMsgGetterCacheFor=t.INITIAL_PAGE_SIZE=void 0,t.getWaveform=t.getWamEditType=t.getWamDisappearingModeTrigger=t.getWamDisappearingModeInitiator=t.getWamDisappearingModeInitiatedByMe=t.getViewed=t.getViewCount=t.getVerifiedBizName=t.getVcardList=t.getVcardFormattedName=t.getVcard=t.getUrl=t.getType=t.getTotalCurrencyCode=t.getTotalAmount1000=t.getTo=t.getTitle=t.getThumbnailWidth=t.getThumbnailHeight=t.getThumbnailHQ=t.getThumbnailDirectPath=t.getThumbnail=t.getTemplateParams=t.getT=t.getSupportsMessageFooterLinks=t.getSupportsMessageFooter=t.getSubtype=t.getStatusV3CanvasColor=t.getStar=t.getSmbClientCampaignId=t.getSize=t.getShouldDisplayAsForwarded=t.getShareDuration=t.getSender=t.getSalePriceAmount1000=t.getRichPreviewType=t.getRevokeSender=t.getRevokeDuration=t.getRetailerId=t.getReplyCount=t.getRecipients=t.getRcatString=t.getRcat=t.getQuotedRemoteJid=t.getQuotedParticipant=t.getQuotedMsg=t.getProductListHeaderImage=t.getProductImageCount=t.getProductId=t.getProductHeaderImageRejected=t.getPriceAmount1000=t.getPollSelectableOptionsCount=t.getPollOptions=t.getPollName=t.getPollInvalidated=t.getPlaceholderCreatedWhenAccountIsHosted=t.getPaymentTxnStatus=t.getPaymentTransactionTimestamp=t.getPaymentStatus=t.getPaymentRequestMessageKey=t.getPaymentNoteMsg=t.getPaymentMessageReceiverJid=t.getPaymentInviteServiceType=t.getPaymentExpiryTimestamp=t.getPaymentCurrency=t.getPaymentBackground=t.getPaymentAmount1000=t.getOriginalSender=t.getOriginalSelfAuthor=t.getOrderTitle=t.getNumTimesForwarded=t.getNewsletterAdminInviteInfo=t.getNativeFlowName=t.getNativeFlowButtons=t.getMsgUnsafe=t.getMimetype=t.getMessageSecret=t.getMessage=t.getMentionedJidList=t.getMediaKey=t.getMatchedText=t.getLocal=t.getLoc=t.getLng=t.getList=t.getLinkPreview=t.getLatestEditMsgKey=t.getLat=t.getLastBotEditBodyLength=t.getLabels=t.getKicTimestampMs=t.getKicState=t.getKicSender=t.getKicKey=t.getItemCount=t.getIsViewOnce=t.getIsVcardOverMmsDocument=t.getIsUserCreatedType=t.getIsUnreadType=t.getIsUnkept=t.getIsStickerMsg=t.getIsStatusV3=t.getIsSentByMeFromWeb=t.getIsSentByMe=t.getIsSendFailure=t.getIsRevokedByMe=t.getIsRevokeForMsgFromOrDeliveredToBot=t.getIsRevoke=t.getIsReply=t.getIsReaction=t.getIsProductListMessage=t.getIsPollVote=t.getIsPSA=t.getIsOpus=t.getIsNotification=t.getIsNewsletterMsg=t.getIsNewsletterAdminInviteExpired=t.getIsNewMsg=t.getIsMetaBotResponse=t.getIsMetaBotInvokeResponse=t.getIsMedia=t.getIsMdHistoryMsg=t.getIsMarketingMessage=t.getIsLive=t.getIsKept=t.getIsInternational=t.getIsInitialE2ENotification=t.getIsImportantMessage=t.getIsIAS=t.getIsGroupsV4InviteExpired=t.getIsGroupMsg=t.getIsGif=t.getIsFutureproof=t.getIsFromTemplate=t.getIsFrequentlyForwarded=t.getIsForwarded=t.getIsFailed=t.getIsEventCanceled=t.getIsEphemeral=t.getIsEdited=t.getIsEditProtocolMsg=t.getIsDynamicReplyButtonsMsg=t.getIsDisappearingModeSystemMessage=t.getIsCarouselCard=t.getIsCaptionByUser=t.getIsCAPISupport=t.getIsBotSearchResponse=t.getIsBotResponse=t.getIsBotQuery=t.getIsBotPluginCarouselMsg=t.getIsBotInvoke=t.getIsBotFutureproofPlaceholder=t.getIsBotFeedbackMessage=t.getIsBizNotification=t.getIsBizContentPlaceholder=t.getIsBizBot3pResponse=t.getIsBizBot1pResponse=t.getIsAvatar=t.getIsAuthenticationMessage=t.getIsAckPlayable=t.getInviteGrpType=t.getInviteGrpName=t.getInviteGrpJpegThum=t.getInviteGrp=t.getInviteCodeExp=t.getInviteCode=t.getInvis=t.getInteractiveType=t.getInteractiveHeader=t.getInteractiveAnnotations=t.getInitialPageSize=t.getId=t.getHsmTag=t.getHostedBizEncStateMismatch=t.getHeaderType=t.getHasThumbList=t.getHasReaction=t.getHasOriginatedFromNewsletter=t.getHasMentionOfMe=t.getGroupMentions=t.getGifAttribution=t.getFutureproofType=t.getFutureproofSubtype=t.getFrom=t.getForwardingScore=t.getForwardedNewsletterMessageInfo=t.getFooter=t.getFinalLng=t.getFinalLat=t.getFilename=t.getFilehash=t.getEventStartTime=t.getEventName=t.getEventLocation=t.getEventJoinLink=t.getEventInvalidated=t.getEventDescription=t.getErrorCode=t.getEphemeralSettingUser=t.getEphemeralOutOfSync=t.getEphemeralExpirationTimestamp=t.getEphemeralDuration=t.getDynamicReplyButtons=t.getDoNotPlayInline=t.getDisappearingModeTrigger=t.getDisappearingModeInitiator=t.getDisappearingModeInitiatedByMe=t.getDescription=t.getDeprecatedMms3Url=t.getCurrencyCode=t.getCtwaContext=t.getComment=t.getClientUrl=t.getCaption=t.getCanonicalUrl=t.getCampaignId=t.getBusinessOwnerJid=t.getBroadcastId=t.getBroadcast=t.getBotTargetSenderJid=t.getBotResponseTargetId=t.getBotRespOrInvocationRevokeBotWid=t.getBotReelPluginThumbnailCdnUrl=t.getBotPluginType=t.getBotPluginSearchUrl=t.getBotPluginSearchProvider=t.getBotPluginReferenceIndex=t.getBotPluginMaybeParent=t.getBotEditType=t.getBody=t.getBizSource=t.getBizPrivacyStatus=t.getBizBotType=t.getBackgroundColor=t.getAuthor=t.getAgendId=t.getActiveBotMsgStreamingInProgress=t.getAck=t.clearMsgGetterCacheFor=t.INITIAL_PAGE_SIZE=void 0,t.isBizSourceFromMarketingMessage=Re,t.isMetaBotResponseToMyInvoke=void 0;var i=r(n(41609)),o=n(62089),a=n(38672),s=n(29987),l=n(25303),u=n(77630),c=n(95693),d=n(42467),p=n(14200),f=n(24992),_=r(n(44423)),g=n(71385),h=n(12857),A=n(47546),m=n(71500),E=n(2576),y=n(35677),S=n(73602),v=r(n(48780)),I=n(77026),T=n(3885),b=n(44245),M=n(37060),P=r(n(27112)),C=n(51017);const{field:O,computed:R,unsafeIdentityGetter:N,clearCacheFor:w}=(0,A.createGetterFactories)({createCache:m.createMessagesCache}),D=w;t.clearMsgGetterCacheFor=D;const L=N;function B(e){return e instanceof P.default?e:null!=e.user?(0,C.createUserWid)(e.user,e.server):e}t.getMsgUnsafe=L;const k=Object.defineProperty(O("type"),"name",{value:"getType"});t.getType=k;const G=Object.defineProperty(O("subtype"),"name",{value:"getSubtype"});t.getSubtype=G;const U=Object.defineProperty(O("id"),"name",{value:"getId"});t.getId=U;const x=Object.defineProperty(O("to"),"name",{value:"getTo"});t.getTo=x;const F=Object.defineProperty(O("from"),"name",{value:"getFrom"});t.getFrom=F;const K=Object.defineProperty(O("author"),"name",{value:"getAuthor"});t.getAuthor=K;const Y=Object.defineProperty(O("ack"),"name",{value:"getAck"});t.getAck=Y;const j=Object.defineProperty(O("viewCount"),"name",{value:"getViewCount"});t.getViewCount=j;const V=Object.defineProperty(O("viewed"),"name",{value:"getViewed"});t.getViewed=V;const W=Object.defineProperty(O("originalSelfAuthor"),"name",{value:"getOriginalSelfAuthor"});t.getOriginalSelfAuthor=W;const H=Object.defineProperty(O("kicState"),"name",{value:"getKicState"});t.getKicState=H;const Q=Object.defineProperty(O("kicTimestampMs"),"name",{value:"getKicTimestampMs"});t.getKicTimestampMs=Q;const $=Object.defineProperty(O("list"),"name",{value:"getList"});t.getList=$;const q=Object.defineProperty(O("latestEditMsgKey"),"name",{value:"getLatestEditMsgKey"});t.getLatestEditMsgKey=q;const J=Object.defineProperty(O("errorCode"),"name",{value:"getErrorCode"});t.getErrorCode=J;const z=Object.defineProperty(O("ephemeralDuration"),"name",{value:"getEphemeralDuration"});t.getEphemeralDuration=z;const X=Object.defineProperty(O("ephemeralSettingUser"),"name",{value:"getEphemeralSettingUser"});t.getEphemeralSettingUser=X;const Z=Object.defineProperty(O("t",{default:0}),"name",{value:"getT"});t.getT=Z;const ee=Object.defineProperty(O("backgroundColor"),"name",{value:"getBackgroundColor"});t.getBackgroundColor=ee;const te=Object.defineProperty(O("headerType"),"name",{value:"getHeaderType"});t.getHeaderType=te;const ne=Object.defineProperty(O("interactiveHeader"),"name",{value:"getInteractiveHeader"});t.getInteractiveHeader=ne;const re=Object.defineProperty(O("interactiveType"),"name",{value:"getInteractiveType"});t.getInteractiveType=re;const ie=Object.defineProperty(O("footer"),"name",{value:"getFooter"});t.getFooter=ie;const oe=Object.defineProperty(O("mentionedJidList"),"name",{value:"getMentionedJidList"});t.getMentionedJidList=oe;const ae=Object.defineProperty(O("groupMentions",{getDefault:()=>[]}),"name",{value:"getGroupMentions"});t.getGroupMentions=ae;const se=Object.defineProperty(O("quotedMsg"),"name",{value:"getQuotedMsg"});t.getQuotedMsg=se;const le=Object.defineProperty(O("quotedRemoteJid"),"name",{value:"getQuotedRemoteJid"});t.getQuotedRemoteJid=le;const ue=Object.defineProperty(O("quotedParticipant"),"name",{value:"getQuotedParticipant"});t.getQuotedParticipant=ue;const ce=Object.defineProperty(O("rcat"),"name",{value:"getRcat"});t.getRcat=ce;const de=Object.defineProperty(O("isViewOnce",{default:!1}),"name",{value:"getIsViewOnce"});t.getIsViewOnce=de;const pe=Object.defineProperty(O("isGif",{default:!1}),"name",{value:"getIsGif"});t.getIsGif=pe;const fe=Object.defineProperty(O("gifAttribution",{default:I.Message$VideoMessage$Attribution.NONE}),"name",{value:"getGifAttribution"});t.getGifAttribution=fe;const _e=Object.defineProperty(O("ctwaContext"),"name",{value:"getCtwaContext"});t.getCtwaContext=_e;const ge=Object.defineProperty(O("mimetype"),"name",{value:"getMimetype"});t.getMimetype=ge;const he=Object.defineProperty(O("filehash"),"name",{value:"getFilehash"});t.getFilehash=he;const Ae=Object.defineProperty(O("deprecatedMms3Url"),"name",{value:"getDeprecatedMms3Url"});t.getDeprecatedMms3Url=Ae;const me=Object.defineProperty(O("waveform"),"name",{value:"getWaveform"});t.getWaveform=me;const Ee=Object.defineProperty(O("disappearingModeInitiator"),"name",{value:"getDisappearingModeInitiator"});t.getDisappearingModeInitiator=Ee;const ye=Object.defineProperty(O("disappearingModeTrigger"),"name",{value:"getDisappearingModeTrigger"});t.getDisappearingModeTrigger=ye;const Se=Object.defineProperty(O("disappearingModeInitiatedByMe"),"name",{value:"getDisappearingModeInitiatedByMe"});t.getDisappearingModeInitiatedByMe=Se;const ve=Object.defineProperty(O("botEditType"),"name",{value:"getBotEditType"});t.getBotEditType=ve;const Ie=Object.defineProperty(O("lastBotEditBodyLength"),"name",{value:"getLastBotEditBodyLength"});t.getLastBotEditBodyLength=Ie;const Te=Object.defineProperty(O("activeBotMsgStreamingInProgress"),"name",{value:"getActiveBotMsgStreamingInProgress"});t.getActiveBotMsgStreamingInProgress=Te;const be=Object.defineProperty(O("bizBotType"),"name",{value:"getBizBotType"});t.getBizBotType=be;const Me=Object.defineProperty(O("botTargetSenderJid"),"name",{value:"getBotTargetSenderJid"});t.getBotTargetSenderJid=Me;const Pe=Object.defineProperty(O("forwardedNewsletterMessageInfo"),"name",{value:"getForwardedNewsletterMessageInfo"});t.getForwardedNewsletterMessageInfo=Pe;const Ce=Object.defineProperty(O("newsletterAdminInviteInfo"),"name",{value:"getNewsletterAdminInviteInfo"});t.getNewsletterAdminInviteInfo=Ce;const Oe=Object.defineProperty(O("bizSource"),"name",{value:"getBizSource"});function Re(e){return"smb_promo"===e}t.getBizSource=Oe;const Ne=Object.defineProperty(R((e=>{let[t]=e;return Re(t)}),[Oe]),"name",{value:"getIsMarketingMessage"});t.getIsMarketingMessage=Ne;const we=Object.defineProperty(R((e=>{let[t]=e;return null!=t}),[se]),"name",{value:"getIsReply"});t.getIsReply=we;const De=Object.defineProperty(R((e=>{let[t]=e;return(0,y.isOpus)(t)}),[ge]),"name",{value:"getIsOpus"});t.getIsOpus=De;const Le=Object.defineProperty(R((e=>{let[t]=e;return null==t?null:(0,o.encodeB64UrlSafe)(t,!0)}),[ce]),"name",{value:"getRcatString"});t.getRcatString=Le;const Be=Object.defineProperty(R((e=>{let[t]=e;return null!=t&&t.some((e=>(0,T.isMeAccount)(B(e))))}),[oe]),"name",{value:"getHasMentionOfMe"});t.getHasMentionOfMe=Be;const ke=Object.defineProperty(O("local",{default:!1}),"name",{value:"getLocal"});t.getLocal=ke;const Ge=Object.defineProperty(R((e=>{let[t,n]=e;return!(!t||!n)&&(0,T.isMeAccount)(B(n))}),[se,ue]),"name",{value:"getRepliedToMyMessage"}),Ue=Object.defineProperty(R((e=>{let[t,n]=e;return t||n}),[Be,Ge]),"name",{value:"getIsImportantMessage"});t.getIsImportantMessage=Ue;const xe=Object.defineProperty(O("botPluginReferenceIndex"),"name",{value:"getBotPluginReferenceIndex"});t.getBotPluginReferenceIndex=xe;const Fe=Object.defineProperty(R((e=>{let[t,n,r]=e;if(null!=n)return!1;switch(t){case"interactive":return r;case"chat":case"image":case"video":case"ptv":case"audio":case"ptt":case"document":case"vcard":case"location":case"ciphertext":case"oversized":case"multi_vcard":case"sticker":case"status_v3":case"product":case"groups_v4_invite":case"poll_creation":case"list":case"newsletter_admin_invite":case"event_creation":return!0;case"revoked":case"protocol":case"order":case"biz-cover-photo":case"broadcast_notification":case"buttons_response":case"call_log":case"debug":case"debug_placeholder":case"e2e_notification":case"gp2":case"hsm":case"interactive_response":case"keep_in_chat":case"list_response":case"native_flow":case"notification":case"notification_template":case"payment":case"poll_update":case"reaction":case"reaction_enc":case"request_phone_number":case"template_button_reply":case"pin_message":case"pinned_message":case"newsletter_notification":case"comment":case"event_response":case"history_bundle":case"biz_content_placeholder":case"event_edit_encrypted":case"unknown":default:return!1}}),[k,xe,Ne]),"name",{value:"getIsUnreadType"});t.getIsUnreadType=Fe;const Ke=Object.defineProperty(R((e=>{let[t,n]=e;return P.default.isGroup(t)||P.default.isGroup(n)}),[F,x]),"name",{value:"getIsGroupMsg"});t.getIsGroupMsg=Ke;const Ye=Object.defineProperty(R((e=>{let[t,n]=e;return(0,v.default)({from:t,to:n})}),[F,x]),"name",{value:"getIsNewsletterMsg"});t.getIsNewsletterMsg=Ye;const je=Object.defineProperty(R((e=>{let[t,n]=e;return t||null!=n}),[Ye,Pe]),"name",{value:"getHasOriginatedFromNewsletter"});t.getHasOriginatedFromNewsletter=je;const Ve=Object.defineProperty(R((e=>{let[t]=e;return P.default.isStatusV3(t.remote)}),[U]),"name",{value:"getIsStatusV3"});t.getIsStatusV3=Ve;const We=Object.defineProperty(R((e=>{let[t,n]=e;return(0,f.isNotificationType)(t,n)}),[k,G]),"name",{value:"getIsNotification"});t.getIsNotification=We;const He=Object.defineProperty(R((e=>{let[t,n,r,i]=e;return i?t.fromMe:"in"!==t.self&&!r&&(0,T.isMeAccount)(n)}),[U,F,We,Ye]),"name",{value:"getIsSentByMe"});t.getIsSentByMe=He;const Qe=Object.defineProperty(R((e=>{let[t,n,r,i,o,a]=e;if(t)return i?(0,T.getMeUser)():o;const s=n||r||(null==a?void 0:a.isBot())?a:o;return null==s&&(__LOG__(3,void 0,void 0,!0)`msg sender is null`,SEND_LOGS("sender-is-null",0)),s}),[He,Ke,Ve,Ye,F,K]),"name",{value:"getSender"});t.getSender=Qe;const $e=Object.defineProperty(R((e=>{var t;let[n,r,i]=e;const o=n||r;return null!=o&&null==o.isUser&&(__LOG__(4,void 0,new Error,!0)`Unexpected non-wid for originalSelfAuthorOrSender; typeof=${typeof o}; msg.type=${i}`,SEND_LOGS("non-wid-originalselfauthororsender")),null!=o&&(null===(t=o.isUser)||void 0===t?void 0:t.call(o))?(0,C.toUserWid)(o):null}),[W,Qe,k]),"name",{value:"getOriginalSender"});t.getOriginalSender=$e;const qe=Object.defineProperty(R((e=>{let[t]=e;return t===S.MSG_TYPE.REACTION||t===S.MSG_TYPE.REACTION_ENC}),[k]),"name",{value:"getIsReaction"});t.getIsReaction=qe;const Je=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.POLL_UPDATE&&"poll_vote"===n}),[k,G]),"name",{value:"getIsPollVote"});t.getIsPollVote=Je;const ze=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.UNKNOWN||t===S.MSG_TYPE.PAYMENT&&"futureproof"===n}),[k,G]),"name",{value:"getIsFutureproof"});t.getIsFutureproof=ze;const Xe=Object.defineProperty(R((e=>{let[t]=e;return t===S.MSG_TYPE.STICKER}),[k]),"name",{value:"getIsStickerMsg"});t.getIsStickerMsg=Xe;const Ze=Object.defineProperty(O("isCarouselCard",{default:!1}),"name",{value:"getIsCarouselCard"});t.getIsCarouselCard=Ze;const et=Object.defineProperty(R((e=>{let[t,n]=e;return!t&&!n}),[de,Xe]),"name",{value:"getHasThumbList"});t.getHasThumbList=et;const tt=Object.defineProperty(R((e=>{let[t]=e;return t===g.KeepInChatState.KEPT}),[H]),"name",{value:"getIsKept"});t.getIsKept=tt;const nt=Object.defineProperty(R((e=>{let[t]=e;return t===g.KeepInChatState.UNKEPT}),[H]),"name",{value:"getIsUnkept"});t.getIsUnkept=nt;const rt=Object.defineProperty(R((e=>{let[t]=e;return P.default.isPSA(t.remote)}),[U]),"name",{value:"getIsPSA"});t.getIsPSA=rt;const it=Object.defineProperty(R((e=>{let[t]=e;return P.default.isIAS(t.remote)}),[U]),"name",{value:"getIsIAS"});t.getIsIAS=it;const ot=Object.defineProperty(R((e=>{let[t]=e;return P.default.isCAPISupportAccount(t.remote)}),[U]),"name",{value:"getIsCAPISupport"});t.getIsCAPISupport=ot;const at=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.LIST&&(null==n?void 0:n.listType)===I.Message$ListMessage$ListType.PRODUCT_LIST}),[k,$]),"name",{value:"getIsProductListMessage"});t.getIsProductListMessage=at;const st=Object.defineProperty(O("title"),"name",{value:"getTitle"});t.getTitle=st;const lt=Object.defineProperty(O("body",{default:""}),"name",{value:"getBody"});t.getBody=lt;const ut=Object.defineProperty(O("caption"),"name",{value:"getCaption"});t.getCaption=ut;const ct=Object.defineProperty(O("comment"),"name",{value:"getComment"});t.getComment=ct;const dt=Object.defineProperty(O("pollName",{default:""}),"name",{value:"getPollName"});t.getPollName=dt;const pt=Object.defineProperty(O("pollOptions"),"name",{value:"getPollOptions"});t.getPollOptions=pt;const ft=Object.defineProperty(O("pollSelectableOptionsCount",{default:0}),"name",{value:"getPollSelectableOptionsCount"});t.getPollSelectableOptionsCount=ft;const _t=Object.defineProperty(O("pollInvalidated",{default:!1}),"name",{value:"getPollInvalidated"});t.getPollInvalidated=_t;const gt=Object.defineProperty(O("eventName",{default:""}),"name",{value:"getEventName"});t.getEventName=gt;const ht=Object.defineProperty(O("eventDescription"),"name",{value:"getEventDescription"});t.getEventDescription=ht;const At=Object.defineProperty(O("eventStartTime",{default:0}),"name",{value:"getEventStartTime"});t.getEventStartTime=At;const mt=Object.defineProperty(O("eventJoinLink"),"name",{value:"getEventJoinLink"});t.getEventJoinLink=mt;const Et=Object.defineProperty(O("eventLocation"),"name",{value:"getEventLocation"});t.getEventLocation=Et;const yt=Object.defineProperty(O("isEventCanceled",{default:!1}),"name",{value:"getIsEventCanceled"});t.getIsEventCanceled=yt;const St=Object.defineProperty(O("eventInvalidated",{default:!1}),"name",{value:"getEventInvalidated"});t.getEventInvalidated=St;const vt=Object.defineProperty(O("replyCount",{default:0}),"name",{value:"getReplyCount"});t.getReplyCount=vt;const It=Object.defineProperty(O("nativeFlowName"),"name",{value:"getNativeFlowName"});t.getNativeFlowName=It;const Tt=Object.defineProperty(O("nativeFlowButtons"),"name",{value:"getNativeFlowButtons"});t.getNativeFlowButtons=Tt;const bt=Object.defineProperty(O("paymentCurrency",{default:""}),"name",{value:"getPaymentCurrency"});t.getPaymentCurrency=bt;const Mt=Object.defineProperty(O("paymentAmount1000",{default:0}),"name",{value:"getPaymentAmount1000"});t.getPaymentAmount1000=Mt;const Pt=Object.defineProperty(O("paymentMessageReceiverJid"),"name",{value:"getPaymentMessageReceiverJid"});t.getPaymentMessageReceiverJid=Pt;const Ct=Object.defineProperty(O("paymentTransactionTimestamp",{default:0}),"name",{value:"getPaymentTransactionTimestamp"});t.getPaymentTransactionTimestamp=Ct;const Ot=Object.defineProperty(O("paymentStatus"),"name",{value:"getPaymentStatus"});t.getPaymentStatus=Ot;const Rt=Object.defineProperty(O("paymentTxnStatus"),"name",{value:"getPaymentTxnStatus"});t.getPaymentTxnStatus=Rt;const Nt=Object.defineProperty(O("paymentNoteMsg"),"name",{value:"getPaymentNoteMsg"});t.getPaymentNoteMsg=Nt;const wt=Object.defineProperty(O("paymentRequestMessageKey"),"name",{value:"getPaymentRequestMessageKey"});t.getPaymentRequestMessageKey=wt;const Dt=Object.defineProperty(O("paymentExpiryTimestamp"),"name",{value:"getPaymentExpiryTimestamp"});t.getPaymentExpiryTimestamp=Dt;const Lt=Object.defineProperty(O("paymentInviteServiceType"),"name",{value:"getPaymentInviteServiceType"});t.getPaymentInviteServiceType=Lt;const Bt=Object.defineProperty(O("paymentBackground"),"name",{value:"getPaymentBackground"});t.getPaymentBackground=Bt;const kt=Object.defineProperty(O("isFromTemplate",{default:!1}),"name",{value:"getIsFromTemplate"});t.getIsFromTemplate=kt;const Gt=Object.defineProperty(O("isLive",{default:!1}),"name",{value:"getIsLive"});t.getIsLive=Gt;const Ut=Object.defineProperty(O("isDynamicReplyButtonsMsg",{default:!1}),"name",{value:"getIsDynamicReplyButtonsMsg"});t.getIsDynamicReplyButtonsMsg=Ut;const xt=Object.defineProperty(O("dynamicReplyButtons"),"name",{value:"getDynamicReplyButtons"});t.getDynamicReplyButtons=xt;const Ft=Object.defineProperty(R((e=>{let[t,n,r]=e;return(t!==S.MSG_TYPE.PROTOCOL||"ephemeral_setting"!==n)&&(null!=r&&0!==r)}),[k,G,z]),"name",{value:"getIsEphemeral"});t.getIsEphemeral=Ft;const Kt=Object.defineProperty(R((e=>{let[t]=e;return null!=t}),[q]),"name",{value:"getIsEdited"});t.getIsEdited=Kt;const Yt=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.PROTOCOL&&"message_edit"===n}),[k,G]),"name",{value:"getIsEditProtocolMsg"});t.getIsEditProtocolMsg=Yt;const jt=Object.defineProperty(R((e=>{let[t,n]=e;if(!t)return null;return null==n||0===n?"rgba(86, 150, 255, 255)":`rgba(${n>>16&255}, ${n>>8&255}, ${255&n}, ${n>>24&255})`}),[Ve,ee]),"name",{value:"getStatusV3CanvasColor"});t.getStatusV3CanvasColor=jt;const Vt=Object.defineProperty(R((e=>{let[t]=e;switch(t){case"protocol":case"chat":case"location":case"vcard":case"multi_vcard":case"image":case"video":case"ptv":case"audio":case"ptt":case"document":case"sticker":case"status_v3":case"product":case"groups_v4_invite":case"order":case"poll_creation":case"newsletter_admin_invite":case"comment":case"event_creation":return!0;case"biz-cover-photo":case"broadcast_notification":case"buttons_response":case"call_log":case"ciphertext":case"debug_placeholder":case"debug":case"e2e_notification":case"gp2":case"newsletter_notification":case"hsm":case"interactive":case"interactive_response":case"keep_in_chat":case"list":case"list_response":case"native_flow":case"notification":case"notification_template":case"oversized":case"payment":case"poll_update":case"reaction":case"reaction_enc":case"request_phone_number":case"revoked":case"template_button_reply":case"pin_message":case"pinned_message":case"event_response":case"history_bundle":case"biz_content_placeholder":case"event_edit_encrypted":case"unknown":default:return!1}}),[k]),"name",{value:"getIsUserCreatedType"});t.getIsUserCreatedType=Vt;const Wt=Object.defineProperty(R((e=>{let[t,n,r]=e;return t.fromMe&&n&&r}),[U,ke,Vt]),"name",{value:"getIsSentByMeFromWeb"});t.getIsSentByMeFromWeb=Wt;const Ht=Object.defineProperty(O("revokeSender"),"name",{value:"getRevokeSender"});t.getRevokeSender=Ht;const Qt=Object.defineProperty(R((e=>{let[t]=e;return null!=t&&(0,T.isMeAccount)(t)}),[Ht]),"name",{value:"getIsRevokedByMe"});t.getIsRevokedByMe=Qt;const $t=Object.defineProperty(R((e=>{var t;let[n,r,i]=e;const o=n.fromMe?null==r?void 0:r.toString({legacy:!0}):null==i?void 0:i.toString({legacy:!0}),s=null===(t=(0,T.getMaybeMeUser)())||void 0===t?void 0:t.toString({legacy:!0});return o&&s?(0,a.phoneCC)(o)!==(0,a.phoneCC)(s):(__LOG__(3)`Msg: could not derive isInternational as some data is missing`,!1)}),[U,x,F]),"name",{value:"getIsInternational"});t.getIsInternational=$t;const qt=Object.defineProperty(R((e=>{let[t,n]=e;if(t===S.MSG_TYPE.NOTIFICATION_TEMPLATE){if(c.BIZ_SYSTEM_MSG_SUBTYPES.includes(n))return!0;if(c.BIZ_SYSTEM_MSG_SUBTYPES_V2.includes(n))return!0;switch(n){case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":case"biz_verified_transition_top_to_bottom":case"biz_verified_transition_bottom_to_top":case"biz_intro_top":case"biz_intro_bottom":case"biz_name_change":case"biz_move_to_consumer_app":case"biz_two_tier_migration_top":case"biz_two_tier_migration_bottom":return!0;default:return!1}}return!1}),[k,G]),"name",{value:"getIsBizNotification"});t.getIsBizNotification=qt;const Jt=Object.defineProperty(R((e=>{let[t,n]=e;switch(t){case"image":case"video":case"audio":return!0;case"interactive":return null!=n&&(n.mediaType===E.InteractiveMessageHeaderMediaType.IMAGE||n.mediaType===E.InteractiveMessageHeaderMediaType.VIDEO);default:return!1}}),[k,ne]),"name",{value:"getIsMedia"});t.getIsMedia=Jt;const zt=Object.defineProperty(O("isForwarded",{default:!1}),"name",{value:"getIsForwarded"});t.getIsForwarded=zt;const Xt=Object.defineProperty(O("forwardingScore"),"name",{value:"getForwardingScore"});t.getForwardingScore=Xt;const Zt=Object.defineProperty(R((e=>{let[t,n]=e;return null==n?t?1:0:n||0}),[zt,Xt]),"name",{value:"getNumTimesForwarded"});t.getNumTimesForwarded=Zt;const en=Object.defineProperty(R((e=>{let[t]=e;return t>=_.default.FREQUENTLY_FORWARDED_SENTINEL}),[Zt]),"name",{value:"getIsFrequentlyForwarded"});t.getIsFrequentlyForwarded=en;const tn=Object.defineProperty(R((e=>{let[t,n]=e;return t.fromMe&&null!=n&&n.some((e=>e.isBot()))}),[U,oe]),"name",{value:"getIsBotInvoke"});t.getIsBotInvoke=tn;const nn=Object.defineProperty(R((e=>{let[t,n,r,i]=e;return t||n||i||!r}),[zt,je,He,tn]),"name",{value:"getShouldDisplayAsForwarded"});t.getShouldDisplayAsForwarded=nn;const rn=Object.defineProperty(O("invis",{default:!1}),"name",{value:"getInvis"});t.getInvis=rn;const on=Object.defineProperty(O("isNewMsg",{default:!1}),"name",{value:"getIsNewMsg"});t.getIsNewMsg=on;const an=Object.defineProperty(O("isSendFailure",{default:!1}),"name",{value:"getIsSendFailure"});t.getIsSendFailure=an;const sn=Object.defineProperty(R((e=>{let[t,n,r]=e;return t&&null!=n&&n<u.ACK.CLOCK||r}),[He,Y,an]),"name",{value:"getIsFailed"});t.getIsFailed=sn;const ln=Object.defineProperty(R((e=>{let[t,n]=e;if(t===S.MSG_TYPE.VCARD)try{return(0,b.parseVcard)(n)}catch(e){return}}),[k,lt]),"name",{value:"getVcard"});t.getVcard=ln;const un=Object.defineProperty(O("description"),"name",{value:"getDescription"});t.getDescription=un;const cn=Object.defineProperty(O("matchedText",{default:""}),"name",{value:"getMatchedText"});t.getMatchedText=cn;const dn=Object.defineProperty(O("thumbnail"),"name",{value:"getThumbnail"});t.getThumbnail=dn;const pn=Object.defineProperty(O("thumbnailHQ"),"name",{value:"getThumbnailHQ"});t.getThumbnailHQ=pn;const fn=Object.defineProperty(O("richPreviewType",{default:I.Message$ExtendedTextMessage$PreviewType.NONE}),"name",{value:"getRichPreviewType"});t.getRichPreviewType=fn;const _n=Object.defineProperty(R((e=>{let[t,n,r,o]=e;return(0,l.isString)(o)&&(!(0,i.default)(n)||!(0,i.default)(r))&&null!=t&&t.includes(o)}),[lt,st,un,cn]),"name",{value:"getLinkPreview"});t.getLinkPreview=_n;const gn=Object.defineProperty(R((e=>{let[t,n]=e;return t||n}),[Ut,kt]),"name",{value:"getSupportsMessageFooter"});t.getSupportsMessageFooter=gn;const hn=Object.defineProperty(R((e=>{let[t,n]=e;return n||t===S.MSG_TYPE.LIST||t===S.MSG_TYPE.INTERACTIVE}),[k,Ut]),"name",{value:"getSupportsMessageFooterLinks"});t.getSupportsMessageFooterLinks=hn;t.INITIAL_PAGE_SIZE=768;const An=Object.defineProperty(R((e=>{let[t,n]=e;return(null==n?void 0:n.isBot())?1/0:t?308:768}),[en,Qe]),"name",{value:"getInitialPageSize"});t.getInitialPageSize=An;const mn=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.E2E_NOTIFICATION&&"encrypt"===n||c.BIZ_SYSTEM_MSG_SUBTYPES_V2_INIT.includes(n)}),[k,G]),"name",{value:"getIsInitialE2ENotification"});t.getIsInitialE2ENotification=mn;const En=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.NOTIFICATION_TEMPLATE&&"disappearing_mode"===n}),[k,G]),"name",{value:"getIsDisappearingModeSystemMessage"});t.getIsDisappearingModeSystemMessage=En;const yn=Object.defineProperty(O("kicKey"),"name",{value:"getKicKey"});t.getKicKey=yn;const Sn=Object.defineProperty(R((e=>{let[t,n]=e;if(null!=t){if(t.fromMe)return(0,T.getMaybeMeUser)();if(n&&null!=t.participant)return(0,C.toUserWid)(t.participant);if(!n)return(0,C.toUserWid)(t.remote)}}),[yn,Ke]),"name",{value:"getKicSender"});t.getKicSender=Sn;const vn=Object.defineProperty(R((e=>{let[t,n,r]=e;return"ephemeral_setting"===r||null==t||0===t?null:n+t}),[z,Z,G]),"name",{value:"getEphemeralExpirationTimestamp"});t.getEphemeralExpirationTimestamp=vn;const In=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.PROTOCOL&&("sender_revoke"===n||"admin_revoke"===n)}),[k,G]),"name",{value:"getIsRevoke"});t.getIsRevoke=In;const Tn=Object.defineProperty(O("revokeDuration"),"name",{value:"getRevokeDuration"});t.getRevokeDuration=Tn;const bn=Object.defineProperty(R((e=>{let[t,n,r]=e;return n?"admin_revoke"===t?M.EDIT_TYPE.ADMIN_REVOKE:M.EDIT_TYPE.SENDER_REVOKE:r?M.EDIT_TYPE.EDITED:M.EDIT_TYPE.NOT_EDITED}),[G,In,Kt]),"name",{value:"getWamEditType"});t.getWamEditType=bn;const Mn=Object.defineProperty(R((e=>{let[t]=e;if(null!=t)return(0,h.getWamDisappearingModeTrigger)(t)}),[ye]),"name",{value:"getWamDisappearingModeTrigger"});t.getWamDisappearingModeTrigger=Mn;const Pn=Object.defineProperty(R((e=>{let[t]=e;if(null!=t)return(0,h.getWamDisappearingModeInitiatedByMe)(t)}),[Se]),"name",{value:"getWamDisappearingModeInitiatedByMe"});t.getWamDisappearingModeInitiatedByMe=Pn;const Cn=Object.defineProperty(R((e=>{let[t]=e;if(null!=t)return(0,h.getWamDisappearingModeInitiator)(t)}),[Ee]),"name",{value:"getWamDisappearingModeInitiator"});t.getWamDisappearingModeInitiator=Cn;const On=Object.defineProperty(O("inviteCode",{default:""}),"name",{value:"getInviteCode"});t.getInviteCode=On;const Rn=Object.defineProperty(O("inviteCodeExp",{default:""}),"name",{value:"getInviteCodeExp"});t.getInviteCodeExp=Rn;const Nn=Object.defineProperty(O("inviteGrp",{default:""}),"name",{value:"getInviteGrp"});t.getInviteGrp=Nn;const wn=Object.defineProperty(O("inviteGrpName"),"name",{value:"getInviteGrpName"});t.getInviteGrpName=wn;const Dn=Object.defineProperty(O("inviteGrpJpegThum"),"name",{value:"getInviteGrpJpegThum"});t.getInviteGrpJpegThum=Dn;const Ln=Object.defineProperty(O("inviteGrpType"),"name",{value:"getInviteGrpType"});t.getInviteGrpType=Ln;const Bn=Object.defineProperty(R((e=>{let[t,n,r]=e;if(t!==S.MSG_TYPE.GROUPS_V4_INVITE)return!1;if(!n)return!0;const i=(new Date).getTime()/1e3;return parseInt(i,10)>=parseInt(r,10)}),[k,On,Rn]),"name",{value:"getIsGroupsV4InviteExpired"});t.getIsGroupsV4InviteExpired=Bn;const kn=Object.defineProperty(R((e=>{let[t,n]=e;if(t!==S.MSG_TYPE.NEWSLETTER_ADMIN_INVITE)return!1;if(null==n)return!0;const{inviteExpiration:r}=n;return(0,s.unixTime)()>=r}),[k,Ce]),"name",{value:"getIsNewsletterAdminInviteExpired"});t.getIsNewsletterAdminInviteExpired=kn;const Gn=Object.defineProperty(O("productHeaderImageRejected",{default:!1}),"name",{value:"getProductHeaderImageRejected"});t.getProductHeaderImageRejected=Gn;const Un=Object.defineProperty(R((e=>{var t,n,r;let[i,o]=e;return!0===i?null:null!==(t=null==o||null===(n=o.productListInfo)||void 0===n||null===(r=n.headerImage)||void 0===r?void 0:r.jpegThumbnail)&&void 0!==t?t:null}),[Gn,$]),"name",{value:"getProductListHeaderImage"});t.getProductListHeaderImage=Un;const xn=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.PTT||t===S.MSG_TYPE.PTV||n&&t===S.MSG_TYPE.AUDIO}),[k,je]),"name",{value:"getIsAckPlayable"});t.getIsAckPlayable=xn;const Fn=Object.defineProperty(O("hasReaction",{default:!1}),"name",{value:"getHasReaction"});t.getHasReaction=Fn;const Kn=Object.defineProperty(O("recipients",{getDefault:()=>[]}),"name",{value:"getRecipients"});t.getRecipients=Kn;const Yn=Object.defineProperty(O("templateParams",{getDefault:()=>[]}),"name",{value:"getTemplateParams"});t.getTemplateParams=Yn;const jn=Object.defineProperty(O("clientUrl",{default:""}),"name",{value:"getClientUrl"});t.getClientUrl=jn;const Vn=Object.defineProperty(O("loc",{default:""}),"name",{value:"getLoc"});t.getLoc=Vn;const Wn=Object.defineProperty(O("lat"),"name",{value:"getLat"});t.getLat=Wn;const Hn=Object.defineProperty(O("lng"),"name",{value:"getLng"});t.getLng=Hn;const Qn=Object.defineProperty(O("shareDuration"),"name",{value:"getShareDuration"});t.getShareDuration=Qn;const $n=Object.defineProperty(O("finalLat"),"name",{value:"getFinalLat"});t.getFinalLat=$n;const qn=Object.defineProperty(O("finalLng"),"name",{value:"getFinalLng"});t.getFinalLng=qn;const Jn=Object.defineProperty(O("star",{default:!1}),"name",{value:"getStar"});t.getStar=Jn;const zn=Object.defineProperty(O("currencyCode"),"name",{value:"getCurrencyCode"});t.getCurrencyCode=zn;const Xn=Object.defineProperty(O("priceAmount1000"),"name",{value:"getPriceAmount1000"});t.getPriceAmount1000=Xn;const Zn=Object.defineProperty(O("salePriceAmount1000"),"name",{value:"getSalePriceAmount1000"});t.getSalePriceAmount1000=Zn;const er=Object.defineProperty(O("isVcardOverMmsDocument",{default:!1}),"name",{value:"getIsVcardOverMmsDocument"});t.getIsVcardOverMmsDocument=er;const tr=Object.defineProperty(O("interactiveAnnotations"),"name",{value:"getInteractiveAnnotations"});t.getInteractiveAnnotations=tr;const nr=Object.defineProperty(O("messageSecret"),"name",{value:"getMessageSecret"});t.getMessageSecret=nr;const rr=Object.defineProperty(O("broadcastId"),"name",{value:"getBroadcastId"});t.getBroadcastId=rr;const ir=Object.defineProperty(O("broadcast",{default:!1}),"name",{value:"getBroadcast"});t.getBroadcast=ir;const or=Object.defineProperty(O("vcardList",{getDefault:()=>[]}),"name",{value:"getVcardList"});t.getVcardList=or;const ar=Object.defineProperty(O("vcardFormattedName"),"name",{value:"getVcardFormattedName"});t.getVcardFormattedName=ar;const sr=Object.defineProperty(O("labels",{getDefault:()=>[]}),"name",{value:"getLabels"});t.getLabels=sr;const lr=Object.defineProperty(O("agentId"),"name",{value:"getAgendId"});t.getAgendId=lr;const ur=Object.defineProperty(O("url"),"name",{value:"getUrl"});t.getUrl=ur;const cr=Object.defineProperty(O("retailerId"),"name",{value:"getRetailerId"});t.getRetailerId=cr;const dr=Object.defineProperty(O("businessOwnerJid"),"name",{value:"getBusinessOwnerJid"});t.getBusinessOwnerJid=dr;const pr=Object.defineProperty(O("productId"),"name",{value:"getProductId"});t.getProductId=pr;const fr=Object.defineProperty(O("productImageCount"),"name",{value:"getProductImageCount"});t.getProductImageCount=fr;const _r=Object.defineProperty(O("isMdHistoryMsg",{default:!1}),"name",{value:"getIsMdHistoryMsg"});t.getIsMdHistoryMsg=_r;const gr=Object.defineProperty(O("campaignId"),"name",{value:"getCampaignId"});t.getCampaignId=gr;const hr=Object.defineProperty(O("filename"),"name",{value:"getFilename"});t.getFilename=hr;const Ar=Object.defineProperty(O("smbClientCampaignId"),"name",{value:"getSmbClientCampaignId"});t.getSmbClientCampaignId=Ar;const mr=Object.defineProperty(O("isCaptionByUser",{default:!1}),"name",{value:"getIsCaptionByUser"});t.getIsCaptionByUser=mr;const Er=Object.defineProperty(O("doNotPlayInline"),"name",{value:"getDoNotPlayInline"});t.getDoNotPlayInline=Er;const yr=Object.defineProperty(O("thumbnailDirectPath"),"name",{value:"getThumbnailDirectPath"});t.getThumbnailDirectPath=yr;const Sr=Object.defineProperty(O("thumbnailHeight"),"name",{value:"getThumbnailHeight"});t.getThumbnailHeight=Sr;const vr=Object.defineProperty(O("thumbnailWidth"),"name",{value:"getThumbnailWidth"});t.getThumbnailWidth=vr;const Ir=Object.defineProperty(O("orderTitle"),"name",{value:"getOrderTitle"});t.getOrderTitle=Ir;const Tr=Object.defineProperty(O("itemCount"),"name",{value:"getItemCount"});t.getItemCount=Tr;const br=Object.defineProperty(O("totalAmount1000"),"name",{value:"getTotalAmount1000"});t.getTotalAmount1000=br;const Mr=Object.defineProperty(O("totalCurrencyCode"),"name",{value:"getTotalCurrencyCode"});t.getTotalCurrencyCode=Mr;const Pr=Object.defineProperty(O("futureproofType"),"name",{value:"getFutureproofType"});t.getFutureproofType=Pr;const Cr=Object.defineProperty(O("futureproofSubtype"),"name",{value:"getFutureproofSubtype"});t.getFutureproofSubtype=Cr;const Or=Object.defineProperty(O("ephemeralOutOfSync"),"name",{value:"getEphemeralOutOfSync"});t.getEphemeralOutOfSync=Or;const Rr=Object.defineProperty(O("isAvatar"),"name",{value:"getIsAvatar"});t.getIsAvatar=Rr;const Nr=Object.defineProperty(O("bizPrivacyStatus"),"name",{value:"getBizPrivacyStatus"});t.getBizPrivacyStatus=Nr;const wr=Object.defineProperty(O("verifiedBizName"),"name",{value:"getVerifiedBizName"});t.getVerifiedBizName=wr;const Dr=Object.defineProperty(O("canonicalUrl",{default:""}),"name",{value:"getCanonicalUrl"});t.getCanonicalUrl=Dr;const Lr=Object.defineProperty(O("mediaKey"),"name",{value:"getMediaKey"});t.getMediaKey=Lr;const Br=Object.defineProperty(O("message",{default:""}),"name",{value:"getMessage"});t.getMessage=Br;const kr=Object.defineProperty(O("size",{default:0}),"name",{value:"getSize"});t.getSize=kr;const Gr=Object.defineProperty(O("hostedBizEncStateMismatch"),"name",{value:"getHostedBizEncStateMismatch"});t.getHostedBizEncStateMismatch=Gr;const Ur=Object.defineProperty(O("placeholderCreatedWhenAccountIsHosted"),"name",{value:"getPlaceholderCreatedWhenAccountIsHosted"});t.getPlaceholderCreatedWhenAccountIsHosted=Ur;const xr=Object.defineProperty(R((e=>{let[t]=e;return"bot_unavailable_fanout"===t}),[G]),"name",{value:"getIsBotFutureproofPlaceholder"});t.getIsBotFutureproofPlaceholder=xr;const Fr=Object.defineProperty(R((e=>{let[t,n]=e;return t.remote.isBot()?t.fromMe:null!=n&&n.some((e=>e.isBot()))}),[U,oe]),"name",{value:"getIsBotQuery"});t.getIsBotQuery=Fr;const Kr=Object.defineProperty(R((e=>{let[t,n]=e;return!t.fromMe&&n===d.BizBotType.BIZ_1P}),[U,be]),"name",{value:"getIsBizBot1pResponse"});t.getIsBizBot1pResponse=Kr;const Yr=Object.defineProperty(R((e=>{let[t,n]=e;return!t.fromMe&&n===d.BizBotType.BIZ_3P}),[U,be]),"name",{value:"getIsBizBot3pResponse"});t.getIsBizBot3pResponse=Yr;const jr=Object.defineProperty(O("botPluginSearchProvider"),"name",{value:"getBotPluginSearchProvider"});t.getBotPluginSearchProvider=jr;const Vr=Object.defineProperty(O("botPluginSearchUrl"),"name",{value:"getBotPluginSearchUrl"});t.getBotPluginSearchUrl=Vr;const Wr=Object.defineProperty(O("botResponseTargetId"),"name",{value:"getBotResponseTargetId"});t.getBotResponseTargetId=Wr;const Hr=Object.defineProperty(O("botPluginType"),"name",{value:"getBotPluginType"});t.getBotPluginType=Hr;const Qr=Object.defineProperty(R((e=>{let[t,n]=e;return null!=t&&null!=n}),[jr,Vr]),"name",{value:"getIsBotSearchResponse"});t.getIsBotSearchResponse=Qr;const $r=Object.defineProperty(R((e=>{let[t]=e;return!0===(null==t?void 0:t.isBot())}),[Qe]),"name",{value:"getIsMetaBotResponse"});t.getIsMetaBotResponse=$r;const qr=Object.defineProperty(R((e=>{let[t,n]=e;return Boolean(t&&(null==n?void 0:n.isSameAccount((0,T.getMeUser)())))}),[$r,Me]),"name",{value:"isMetaBotResponseToMyInvoke"});t.isMetaBotResponseToMyInvoke=qr;const Jr=Object.defineProperty(R((e=>{let[t,n]=e;return n&&!t.remote.isBot()}),[U,$r]),"name",{value:"getIsMetaBotInvokeResponse"});t.getIsMetaBotInvokeResponse=Jr;const zr=Object.defineProperty(R((e=>{let[t,n,r]=e;return t||n||r}),[$r,Kr,Yr]),"name",{value:"getIsBotResponse"});t.getIsBotResponse=zr;const Xr=Object.defineProperty(R((e=>{let[t,n]=e;return t===S.MSG_TYPE.PROTOCOL&&"bot_feedback"===n}),[k,G]),"name",{value:"getIsBotFeedbackMessage"});t.getIsBotFeedbackMessage=Xr;const Zr=Object.defineProperty(O("hsmTag"),"name",{value:"getHsmTag"});t.getHsmTag=Zr;const ei=Object.defineProperty(R((e=>{let[t]=e;return t===p.HSM_TAG_TYPE.AUTHENTICATION}),[Zr]),"name",{value:"getIsAuthenticationMessage"});t.getIsAuthenticationMessage=ei;const ti=Object.defineProperty(O("botRespOrInvocationRevokeBotWid"),"name",{value:"getBotRespOrInvocationRevokeBotWid"});t.getBotRespOrInvocationRevokeBotWid=ti;const ni=Object.defineProperty(R((e=>{let[t,n]=e;return Boolean((null==t?void 0:t.isBot())&&n)}),[ti,In]),"name",{value:"getIsRevokeForMsgFromOrDeliveredToBot"});t.getIsRevokeForMsgFromOrDeliveredToBot=ni;const ri=Object.defineProperty(R((e=>{let[t,n]=e;return n&&(t===I.BotPluginMetadata$PluginType.SEARCH||t===I.BotPluginMetadata$PluginType.REELS)}),[Hr,$r]),"name",{value:"getIsBotPluginCarouselMsg"});t.getIsBotPluginCarouselMsg=ri;const ii=Object.defineProperty(O("botPluginMaybeParent"),"name",{value:"getBotPluginMaybeParent"});t.getBotPluginMaybeParent=ii;const oi=Object.defineProperty(O("botReelPluginThumbnailCdnUrl"),"name",{value:"getBotReelPluginThumbnailCdnUrl"});t.getBotReelPluginThumbnailCdnUrl=oi;const ai=Object.defineProperty(R((e=>{let[t]=e;return t===S.MSG_TYPE.BIZ_CONTENT_PLACEHOLDER}),[k]),"name",{value:"getIsBizContentPlaceholder"});t.getIsBizContentPlaceholder=ai},47546:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createGetterFactories=function(e){const{root:t,rootEqualityCheck:n,createCache:r=_}=e||{},i=r(),A=(()=>{const e=a;return a++,e})(),m=()=>{const e=E;return E++,e};let E=0;const y=null!=t?t:function(e){let{getterGroupId:t,getterId:n,resultEqualityCheck:r,cache:i}=e;const o=u(n),a=c(n),s=d(n);return l({getterGroupId:t,getterId:n,root:null,cache:i,props:{kind:"identity",dependencies:[]},recomputeIfNeeded:(e,n,i)=>{const l=i[t],u=l[o],c=e,d=l[s],f=null==e?0:e.revisionNumber||0;if(void 0!==u&&d===f&&r(c,h(u)))return n;const _=n+1;return l[o]=void 0===c?p:c,l[a]=_,l[s]=f,_}})}({getterGroupId:A,getterId:m(),resultEqualityCheck:null!=n?n:f,cache:i});if("identity"!==y.kind)throw(0,o.default)(`root must be an identity getter but got kind ${y.kind}`);return{field:(e,t)=>{const{default:n,getDefault:r,resultEqualityCheck:o=f}=t||{};let a;return a=null!=r?t=>{var n;let[i]=t;return null!==(n=i[e])&&void 0!==n?n:r()}:void 0===n?t=>{let[n]=t;return n[e]}:t=>{var r;let[i]=t;return null!==(r=i[e])&&void 0!==r?r:n},s({getterGroupId:A,getterId:m(),root:y,cache:i,resultFunc:a,resultEqualityCheck:o,props:{kind:"field",dependencyKey:e,dependencies:[y]}})},computed:(e,t,n)=>{const{resultEqualityCheck:r=f}=n||{};return s({getterGroupId:A,getterId:m(),root:y,cache:i,resultFunc:e,resultEqualityCheck:r,props:{kind:"computed",dependencies:t}})},unsafeIdentityGetter:y,clearCacheFor:e=>{i.delete(g(e))}}};var i=r(n(81109)),o=r(n(89482));let a=0;function s(e){let{getterGroupId:t,getterId:n,root:r,cache:a,resultFunc:s,resultEqualityCheck:f,props:_}=e;const{dependencies:g}=_,A=g.length,m=u(n),E=c(n),y=d(n);return l({getterGroupId:t,getterId:n,root:r,cache:a,props:(0,i.default)((0,i.default)({},_),{},{resultFunc:s}),recomputeIfNeeded:(e,n,r)=>{const i=r[t],a=i[E],l=i[y];if(null!=l&&null!=a){if(l===n)return a;if(null!=l&&A>0){let e=!1;for(let t=0;t<A;t++){const n=g[t],i=n.$$extractChangedAt(r[n.$$getterGroupId]);if(e=null==i||i>l,e)break}if(!e)return i[y]=n,a}}const u=new Array(A);for(let e=0;e<A;e++){const t=g[e],n=t.$$extractResult(r[t.$$getterGroupId]);if(void 0===n)throw(0,o.default)("No result was stored");u[e]=h(n)}const c=s(u),d=i[m];return null!=a&&void 0!==d&&f(c,h(d))?(i[y]=n,a):(i[m]=void 0===c?p:c,i[E]=n,i[y]=n,n)}})}function l(e){let{getterGroupId:t,getterId:n,root:r,cache:i,recomputeIfNeeded:a,props:s}=e;const l=s.dependencies,p=u(n),f=c(n),_=d(n),A=e=>{const n=g(e),r={};for(let e=0;e<v.length;e++){const t=v[e],i=S[t];let o=i.get(n);null==o&&(o={},i.set(n,o)),r[t]=o}const i=y.$$recomputeIfNeeded(e,y.$$extractChangedAt(r[y.$$getterGroupId])||0,r),a=r[t],s=a[_];if(null==s||i>s)for(let t=0;t<E.length;t++){let n=null!=s;const o=E[t];for(let t=0;t<o.length;t++){const a=o[t].$$recomputeIfNeeded(e,i,r);(null==s||a>s)&&(n=!1)}if(n)break}const l=a[p];if(void 0===l)throw(0,o.default)("No result was stored");return h(l)},m=Object.assign(A,{kind:s.kind,dependencies:l,dependencyKey:s.dependencyKey,resultFunc:s.resultFunc,$$getterGroupId:t,$$root:r||A,$$cache:i,$$recomputeIfNeeded:a,$$extractChangedAt:e=>e[f],$$extractResult:e=>e[p]}),E=function(e){const t=[e];for(let e=0;e<t.length;e++){const n=t[e];null!=n.dependencies&&t.push(...n.dependencies)}const n=Array.from(new Set(t.reverse())),r=[],i=[];for(let e=0;e<n.length;e++){const t=n[e];switch(t.kind){case"identity":break;case"field":r.push(t);break;case"computed":i.push(t);break;default:throw(0,o.default)(`Invalid getter kind: ${t.kind}`)}}return[r,i].filter((e=>e.length>0))}(m),y=m.$$root;for(let e=0;e<l.length;e++)if(l[e].$$root!==y)throw(0,o.default)("Getter created with multiple roots. This means you used getters that came from different `createGetterFactories()` calls as dependencies in a `computed()` getter. If you want to do this, you must pass the identity getter created by one of the `createGetterFactories()` calls as the `root` option to the other.");const S={[y.$$getterGroupId]:y.$$cache},v=[y.$$getterGroupId];for(let e=0;e<E.length;e++)for(let t=0;t<E[e].length;t++){const{$$getterGroupId:n,$$cache:r}=E[e][t];null==S[n]&&(v.push(n),S[n]=r)}return m}const u=e=>3*e,c=e=>3*e+1,d=e=>3*e+2;const p=new class{toString(){return"UndefinedSentinel"}};function f(e,t){return e===t}function _(){return new Map}function g(e){if(null==e)throw(0,o.default)(`Getter was called with ${String(e)} data.`);const t=e.id;if(null==t)throw(0,o.default)(`Data passed to getter must include an id property (it's how we memoize) but got ${String(t)}`);return t.toString()}function h(e){return e===p?void 0:e}},71500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStickerModelMdCache=t.createStatusV3Cache=t.createSettingsCache=t.createRecordingSessionCache=t.createQuickReplyCache=t.createPollVotesCache=t.createPinInChatsCache=t.createOrderItemCache=t.createOrderCache=t.createNewsletterPollVotesCache=t.createMuteCache=t.createMsgInfosCache=t.createMessagesCache=t.createMediaEditControllerCache=t.createLabelsCache=t.createFrontendStatusV3Cache=t.createFrontendQuickReplyCache=t.createFrontendPollVotesCache=t.createFrontendPinInChatsCache=t.createFrontendNewsletterPollVotesCache=t.createFrontendMessagesCache=t.createFrontendEventResponseCache=t.createFrontendContactsCache=t.createEventResponseCache=t.createContactsCache=void 0;t.createMessagesCache=()=>new Map;t.createFrontendMessagesCache=()=>new Map;t.createContactsCache=()=>new Map;t.createFrontendContactsCache=()=>new Map;t.createLabelsCache=()=>new Map;t.createMuteCache=()=>new Map;t.createPinInChatsCache=()=>new Map;t.createFrontendPinInChatsCache=()=>new Map;t.createMsgInfosCache=()=>new Map;t.createPollVotesCache=()=>new Map;t.createFrontendPollVotesCache=()=>new Map;t.createNewsletterPollVotesCache=()=>new Map;t.createFrontendNewsletterPollVotesCache=()=>new Map;t.createSettingsCache=()=>new Map;t.createStickerModelMdCache=()=>new Map;t.createMediaEditControllerCache=()=>new Map;t.createOrderCache=()=>new Map;t.createOrderItemCache=()=>new Map;t.createQuickReplyCache=()=>new Map;t.createFrontendQuickReplyCache=()=>new Map;t.createStatusV3Cache=()=>new Map;t.createFrontendStatusV3Cache=()=>new Map;t.createRecordingSessionCache=()=>new Map;t.createEventResponseCache=()=>new Map;t.createFrontendEventResponseCache=()=>new Map},29638:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebBaseL10n=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r)}(n(94436));var i=r(n(19546)),o=r(n(7880)),a=n(51698),s=n(24845),l=n(79052),u=r(n(1039)),c=r(n(46040)),d=r(n(43286)),p=r(n(89482)),f=r(n(56755)),_=r(n(97331));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const h=new Set(["",""]),A=new Set(["ar","ar-XB","fa","ur","he","dv","ku"]),m=new Set(["fa"]),E="".split("");function y(e){return E[parseInt(e,10)]}const S=(0,p.default)("Unimplemented method");class v extends o.default{constructor(e,t,n){if(super(),!e||!t)throw S;this._locale=e,this.localeStrings={},this.localeStrings[a.DEFAULT_LOCALE]=t,this.fbtStrings={},this.fbtStrings[a.DEFAULT_LOCALE]={en_GB:{}},this.markTranslations=n,this.customizeMoment()}getLocale(){throw S}getNormalizedLocale(){throw S}getFullLocale(){throw S}getFbtTranslations(){throw S}setLocale(){throw S}normalizeLocaleToWajsLocale(e){const t=e.replace(/-/g,"_").toLowerCase(),n=this._getTranslationFilename(t);if(n)return n;let r=t;for(;r;){r=r.split("_").slice(0,-1).join("_");const e=r&&this._getTranslationFilename(r);if(e)return e}}isLocaleSupported(e){return!!e&&!!this.normalizeLocaleToWajsLocale(e)}_getTranslationFilename(e){const t=c.default[e]||e;return d.default[t]}isRTL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNormalizedLocale();return A.has(e)}LR(e,t){return this.isRTL()?t:e}embedDir(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isRTL())?this.embedRTL(e):this.embedLTR(e)}embedLTR(e){return""+e+""}embedRTL(e){return""+e+""}isolateLTR(e){return""+e+""}isolateRTL(e){return""+e+""}forceLTR(e){return""+e}forceRTL(e){return""+e}t_DO_NOT_USE(e,t,n){return this.t(e,t,n)}t(e,t,n){"number"!=typeof e&&__LOG__(3)`l10n.t was called with an unprocessed id (${e}). If you just added a string on local, restarting your build may address the issue.`;const r=e,i=null!=t?t._plural:null;let o=n||this.getNormalizedLocale();this.localeStrings[o]||(o=a.DEFAULT_LOCALE);let s=this._getString(r,o,i);this.markTranslations&&(s?o===a.DEFAULT_LOCALE&&(s="["+s+"]"):(s="!!"+r+"!!",__LOG__(2)`l10n:t string key "${r}" not found`)),s||(s=this._getString(r,a.DEFAULT_LOCALE,i)),s||__LOG__(2)`l10n:t string key "${r}" fallback failed`;for(const e in t){if(!t.hasOwnProperty(e)||"_plural"===e)continue;const n=new RegExp("__"+e+"__","g");let r;r="string"==typeof t[e]&&h.has(t[e].slice(0,1))?t[e]:this.n(t[e],o),s=s.replace(n,r)}return s}_getString(e,t,n){const r=this.localeStrings[t]||this.localeStrings[a.DEFAULT_LOCALE];if(null==r)throw(0,p.default)(`Couldn't find translations for locale ${t} or default (${a.DEFAULT_LOCALE})`);if(!Array.isArray(r))throw(0,p.default)("Unexpected locale format.");const[i,o]=r,s=i[e]||"";if(null==n)return s;const l=u.default[t];if(null==l)return s;const c=l.numbers[l.plurals(n)];if(1===c)return s;return o[2===l.numbers.length&&2===c?e.toString():`${e}_${c}`]||s}useArabicScriptDigits(e){return m.has(null!=e?e:this.getNormalizedLocale())}isLatinAlphabetLanguage(e){return _.default.isLatin(this.removeAccents(e))}d(e,t){const n=l.l10nNumberFormattersRegister.get(this.getFullLocale());if(null!=n&&"number"==typeof e)return n.format(e,this.getFullLocale());const r="number"==typeof e&&(e>=1e6||e>=1e3&&e<1e4)?1:0;return this.n(e,t,{notation:"compact",roundingMode:"trunc",trailingZeroDisplay:"stripIfInteger",minimumFractionDigits:r,maximumFractionDigits:r})}n(e,t,n){const r=e;return"number"==typeof r?Intl.NumberFormat(this.getFullLocale(),n).format(r):this.useArabicScriptDigits(t)?r.toString().replace(/[0-9]/g,y):r}filesizeWithParams(e,t){const n=e>1073741824?1:0,r=this.getFullLocale();return this.n((0,f.default)(e,{base:2,round:n,locale:r,symbols:t}))}normalizeForm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,s.normalizeForm)(e)}removeAccents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,s.removeAccents)(e)}accentFold(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.removeAccents(e).toLowerCase()}customizeMoment(){i.default.relativeTimeRounding(Math.floor),i.default.relativeTimeThreshold("s",60),i.default.relativeTimeThreshold("m",60),i.default.relativeTimeThreshold("h",24)}}t.WAWebBaseL10n=v},14950:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=(r(n(35161)),n(27363)),a=n(55068),s=n(73471),l=r(n(19546)),u=n(29638),c=(r(n(63139)),r(n(91262))),d=n(51698),p=n(24845),f=n(99366),_=n(64175),g=r(n(22192)),h=n(95160),A=n(88745),m=n(48360),E=r(n(15107));const y=self.location.href;y&&y.includes("/%F0%9F%8C%90/")&&Promise.resolve().then(n.bind(n,32890)).then((e=>{let{default:t}=e;t.canMuckHistory()&&window.history.replaceState({},"","/")}));const S="en-GB",v={LTR:"LTR",RTL:"RTL"},I={LTR:"style",RTL:"style_rtl"},T=d.L10N_PRIORITY;class b extends u.WAWebBaseL10n{constructor(){var e;super({l:d.DEFAULT_LOCALE,priority:T.DEFAULT,loc:d.DEFAULT_LOCALE},(0,c.default)(n(29657)),E.default?E.default.getMarkTranslations():d.MARK_TRANSLATIONS_ENABLED),e=this,this.setLocale=function(){var t=(0,i.default)((function*(t,n){const r={l:e._locale.l,priority:e._locale.priority,loc:e._locale.l};return e._considerLocale(r,t,n)?e.downloadAndSetTranslation(r):Promise.resolve()}));return function(){return t.apply(this,arguments)}}();{if((0,h.isWorker)())return void __LOG__(3)`l10n should not be included in worker!`;const e=function(){const e=document.querySelector("html");return null==e?void 0:e.getAttribute("loc")}(),t={};this._considerLocale(t,e,T.PREVIOUS)&&this.downloadAndSetTranslation(t)}}getLocale(){return this._locale.l}getNormalizedLocale(){var e;return null!==(e=this.normalizeLocaleToWajsLocale(this.getLocale()))&&void 0!==e?e:this.getLocale()}getFbtTranslations(){return this.fbtStrings[this._locale.l]}getFullLocale(){return this._locale.loc.replace("_","-")}_getFBTLocale(){return(0,f.normalizeLocaleToFBTLocale)(this.getLocale())}getLanguage(){return(0,p.getLanguageCodeFromLocale)(this.getFullLocale())}getRegion(){return(0,p.getRegionCodeFromLocale)(this.getFullLocale())}normalizeForm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!A.UA.isTrident)return e.normalize("NFKD");try{return e.normalize("NFKD")}catch(t){return e}}isLocaleSupported(e){try{return super.isLocaleSupported(e)&&(!self.Intl||Array.isArray(self.Intl.Collator.supportedLocalesOf(e)))}catch(e){return!1}}init(e){var t;this._initFbt();const n={l:d.DEFAULT_LOCALE,priority:T.DEFAULT,loc:d.DEFAULT_LOCALE};if(this._considerLocale(n,e,T.PREVIOUS),this._considerLocale(n,function(){let e=(y||self.location.href||"").split("/%F0%9F%8C%90/");return e.length>1?e[1].split("/")[0]:void 0}(),T.URL),this._considerLocale(n,navigator.language,T.BROWSER),null===(t=navigator.languages)||void 0===t?void 0:t.length)for(let e=0;e<navigator.languages.length&&!this._considerLocale(n,navigator.languages[e],T.BROWSER);e++);return this.downloadAndSetTranslation(n)}_initFbt(){const e=this.markTranslations?e=>this.getLocale()===d.DEFAULT_LOCALE?new m.FbtResult(["{",...e.contents,"}"]):new m.FbtResult(e.contents):void 0;(0,m.init)({translations:this.getFbtTranslations(),hooks:{getViewerContext:()=>({locale:this._getFBTLocale()}),getFbsResult:e,getFbtResult:e,getNumberFormatConfigOverride:()=>"ar"===this.getLocale()?{decimalSeparator:".",numberDelimiter:",",minDigitsForThousandsSeparator:4,standardDecimalPatternInfo:{primaryGroupSize:3,secondaryGroupSize:3},numberingSystemData:null}:null}})}_considerLocale(e,t,n){if(null!=e.priority&&n<e.priority)return;const r=this.normalizeLocaleToBcp47Compliant(t);if(null==r||r===this.getLocale())return;const i=this.normalizeLocaleToWajsLocale(r);return i?(e.l=i,e.priority=n,e.loc=r,e):void 0}downloadAppLocale(e){return this.localeStrings[e]?Promise.resolve(this.localeStrings[e]):(0,s.promiseLoop)(function(){var t=(0,i.default)((function*(t,n,r){const i=(0,a.delayMs)((0,o.expBackoff)(r,12e4,1e3,.1)),s=yield(0,_.getLangModule)(e);try{const e=(0,c.default)(s),[n]=yield e();return t(n)}catch(t){return 10===r&&(__LOG__(4,void 0,new Error,!0)`${r} times, locale is ${e}`,SEND_LOGS("downadAppLocale failure")),i}}));return function(){return t.apply(this,arguments)}}())}downloadFbtLocaleAndSetCache(e){var t=this;return this.fbtStrings[e]?Promise.resolve(this.fbtStrings[e]):(0,s.promiseLoop)(function(){var n=(0,i.default)((function*(n,r,i){const s=(0,a.delayMs)((0,o.expBackoff)(i,12e4,1e3,.1)),l=yield(0,_.getLangModule)(e),u=(0,c.default)(l);try{const[,r]=yield u();return t.fbtStrings[e]=r,n(r)}catch(t){return 10===i&&(__LOG__(4,void 0,new Error,!0)`${i} times, locale is ${e}`,SEND_LOGS("downadAppLocale failure")),s}}));return function(){return n.apply(this,arguments)}}())}_downloadMomentResourceFile(e){return(0,i.default)((function*(){try{const t=yield(0,_.getMomentLocaleModule)(e);return(0,c.default)(t)}catch(t){__LOG__(2)`l10n:_downloadMomentResourceFile failed to download resource ${e}`}}))()}downloadMomentLocale(e){var t=this;const{l:n,loc:r}=e;return l.default.locale()===r?Promise.resolve():(0,s.promiseLoop)(function(){var e=(0,i.default)((function*(e,i,s){const l=(0,a.delayMs)((0,o.expBackoff)(s,12e4,1e3,.1)),u=r.replace(/_/g,"-");let c,p;if(u===d.DEFAULT_MOMENT_LOCALE)c=()=>Promise.resolve(),p=d.DEFAULT_MOMENT_LOCALE;else{const e=[];if(e.push(u),n===d.DEFAULT_LOCALE)e.push(S);else{const t=n.replace(/_/g,"-");e.push(t),null!=g.default[t]&&e.push(g.default[t])}e.push(S);for(let n=0;n<e.length;++n)if(c=yield t._downloadMomentResourceFile(e[n]),null!=c){p=e[n];break}null==c&&(__LOG__(3)`Could not fetch moment locales, using default en-US`,c=()=>Promise.resolve(),p=d.DEFAULT_MOMENT_LOCALE)}try{return yield c(),e(p)}catch(e){return 10===s&&(__LOG__(4,void 0,new Error,!0)`${s} times, locale is (${n}, ${r})`,SEND_LOGS("downloadMomentLocale failure")),l}}));return function(){return e.apply(this,arguments)}}())}updateFbtContext(e){null!=e&&m.FbtTranslations.registerTranslations(e)}downloadAndSetTranslation(e){const{l:t,loc:r}=this._locale,{l:i,loc:o}=e,a=this.isRTL(i),s=a?v.RTL:v.LTR;if(document.getElementById(I[s])&&o===r)return Promise.resolve();const u=self.performance.now();let p,f;return this._fetchPromise=Promise.all([this.downloadAppLocale(i),this.downloadFbtLocaleAndSetCache(i),this.downloadMomentLocale(e)]).then((t=>{let[n,r,a]=t;p=self.performance.now(),this.localeStrings[i]=n,this._locale=e,this.trigger("set_collator",i),a&&(l.default.locale(a),__LOG__(2)`l10n:moment locale updated to: ${a}`),this.customizeMomentLocale(l.default.locale()),document.documentElement&&document.documentElement.setAttribute("lang",e.l),document.documentElement&&document.documentElement.setAttribute("dir",s),this.updateFbtContext(r),this.trigger("locale_change",{l:i,loc:o})})).then((()=>{f=self.performance.now(),__LOG__(2)`l10n:locale updated: (${t}, ${r}) > (${i}, ${o}), Fetch: ${p-u}ms, Apply: ${f-p}ms`;if((0,c.default)(n(49499)).supported){var e;const t=(0,c.default)(n(93948)),r=(0,c.default)(n(19194));(null===(e=navigator.serviceWorker)||void 0===e?void 0:e.controller)&&t.request(navigator.serviceWorker.controller,r.SET_L10N,{isRTL:a,locale:i}).catch((()=>{}))}})).catch((()=>(__LOG__(2)`l10n:locale update error: (${t}, ${r}) > (${i}, ${o})`,this.downloadAndSetTranslation({l:d.DEFAULT_LOCALE,priority:T.DEFAULT,loc:d.DEFAULT_LOCALE}))))}_updateSpellChecker(){}_updateElectronMain(){}customizeMomentLocale(e){const t=d.LOCALE_CUSTOMIZATIONS[e];t&&l.default.locale(e,t)}normalizeLocaleToBcp47Compliant(e){var t;let n=null==e||null===(t=e.replace(/@.*/,""))||void 0===t?void 0:t.replace(/_/g,"-");if(null!=n&&n!==e){__LOG__(2)`l10n: normalizeLocaleToBcp47Compliant: loc: "${e}", cleaned: "${n}"`;try{new Intl.NumberFormat(n)}catch(e){const t=this.normalizeLocaleToWajsLocale(n);__LOG__(2)`l10n: normalizeLocaleToBcp47Compliant: "${n}" not compatible with Intl.NumberFormat, falling back to "${t}"`,n=t}}return n}}b.Dir=v;var M=new b;t.default=M},63462:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LANGUAGE_TO_FB_LOCALE=t.EXCEPTION_LANG_REGION_TO_FB_LOCALE=t.DEFAULT_WA_WEB_LOCALE=t.DEBUG_LOCALES=void 0,t.coerceWAWebL10nLocaleToFBLocale=function(e){const t=e.toLocaleLowerCase("en").replaceAll("_","-");try{var n;const e=o.default.parse(t),r=[];null!=e.region&&r.push(`${e.language}_${e.region}`),null!=e.script&&r.push(`${e.language}_${e.script}`);for(const e of r){const t=l.get(e);if(t)return t}return null!==(n=s.get(e.language))&&void 0!==n?n:a}catch(e){return a}},t.isWAWebl10nDebugLocale=function(){return!1};var i=r(n(99758)),o=r(n(95762));const a=i.default.EN_GB;t.DEFAULT_WA_WEB_LOCALE=a;const s=new Map([["af",i.default.AF_ZA],["ar",i.default.AR_AR],["az",i.default.AZ_AZ],["bg",i.default.BG_BG],["bn",i.default.BN_IN],["ca",i.default.CA_ES],["cs",i.default.CS_CZ],["da",i.default.DA_DK],["de",i.default.DE_DE],["el",i.default.EL_GR],["en",i.default.EN_GB],["es",i.default.ES_LA],["et",i.default.ET_EE],["fa",i.default.FA_IR],["fi",i.default.FI_FI],["fr",i.default.FR_FR],["gu",i.default.GU_IN],["he",i.default.HE_IL],["hi",i.default.HI_IN],["hr",i.default.HR_HR],["hu",i.default.HU_HU],["id",i.default.ID_ID],["it",i.default.IT_IT],["ja",i.default.JA_JP],["kk",i.default.KK_KZ],["kn",i.default.KN_IN],["ko",i.default.KO_KR],["lt",i.default.LT_LT],["lv",i.default.LV_LV],["mk",i.default.MK_MK],["ml",i.default.ML_IN],["mr",i.default.MR_IN],["ms",i.default.MS_MY],["nb",i.default.NB_NO],["nl",i.default.NL_NL],["pa",i.default.PA_IN],["pl",i.default.PL_PL],["pt",i.default.PT_BR],["ro",i.default.RO_RO],["ru",i.default.RU_RU],["sk",i.default.SK_SK],["sl",i.default.SL_SI],["sq",i.default.SQ_AL],["sr",i.default.SR_RS],["sv",i.default.SV_SE],["sw",i.default.SW_KE],["ta",i.default.TA_IN],["te",i.default.TE_IN],["th",i.default.TH_TH],["tl",i.default.TL_PH],["tr",i.default.TR_TR],["uk",i.default.UK_UA],["ur",i.default.UR_PK],["uz",i.default.UZ_UZ],["vi",i.default.VI_VN],["zh",i.default.ZH_CN]]);t.LANGUAGE_TO_FB_LOCALE=s;const l=new Map([["pt_ao",i.default.PT_PT],["pt_ch",i.default.PT_PT],["pt_cv",i.default.PT_PT],["pt_fr",i.default.PT_PT],["pt_gq",i.default.PT_PT],["pt_gw",i.default.PT_PT],["pt_lu",i.default.PT_PT],["pt_mo",i.default.PT_PT],["pt_mz",i.default.PT_PT],["pt_pt",i.default.PT_PT],["pt_st",i.default.PT_PT],["pt_tl",i.default.PT_PT],["zh_cn",i.default.ZH_CN],["zh_hk",i.default.ZH_HK],["zh_tw",i.default.ZH_TW],["zh_hant",i.default.ZH_HK],["zh_hans",i.default.ZH_CN],["fil",i.default.TL_PH],["in",i.default.ID_ID],["iw",i.default.HE_IL],["mo",i.default.RO_RO],["jw",i.default.JV_ID],["ji",i.default.YI_DE]]);t.EXCEPTION_LANG_REGION_TO_FB_LOCALE=l;const u=new Map([["fb_aa",i.default.FB_AA],["fb_ac",i.default.FB_AC],["fb_ar",i.default.FB_AR],["fb_ha",i.default.FB_HA],["fb_hx",i.default.FB_HX],["fb_ll",i.default.FB_LL],["fb_ls",i.default.FB_LS],["fb_lt",i.default.FB_LT],["fb_rl",i.default.FB_RL],["fb_zh",i.default.FB_ZH],["fbt_ac",i.default.FBT_AC]]);t.DEBUG_LOCALES=u},51698:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SHOULD_USE_MOMENT_LOCALE_FORMAT=t.MARK_TRANSLATIONS_ENABLED=t.LOCALE_DATE_TIME_CUSTOMIZATIONS=t.LOCALE_CUSTOMIZATIONS=t.LOCALES_THAT_PREFER_24HOUR_TIME=t.L10N_PRIORITY=t.DEFAULT_MOMENT_LOCALE=t.DEFAULT_LOCALE=void 0;var i=r(n(81109));t.L10N_PRIORITY={DEBUG:99,SAVED:6,PHONE:5,PREVIOUS:4,URL:3,BROWSER:2,DEFAULT:1};t.DEFAULT_LOCALE="en";t.DEFAULT_MOMENT_LOCALE="en-US";const o=new Set(["ur"]);t.SHOULD_USE_MOMENT_LOCALE_FORMAT=o;const a=new Set(["af","az","ca","cs","da","de","el","et","fi","fr","he","hr","hu","id","it","kk","lt","mk","nb","pl","pt","pt-BR","ro","ru","sk","sl","sr","sv","th","tr","uk"]);t.LOCALES_THAT_PREFER_24HOUR_TIME=a;const s={"zh-tw":{longDateFormat:{LT:"Ah:mm",LTS:"Ah:m:s",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"}},"zh-cn":{longDateFormat:{LT:"Ah:mm",LTS:"Ah:m:s",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"}},ar:{longDateFormat:{LT:"h:mm A",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"}},ta:{longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY, h:mm A"},preparse:null,postformat:null,meridiem:null,meridiemHour:null},nl:{longDateFormat:{l:"DD-MM-YYYY",L:"DD-MM-YYYY"}},"en-ie":{longDateFormat:{l:"DD/MM/YYYY",L:"DD/MM/YYYY"}},hi:{preparse:e=>e,postformat:e=>e,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",LLL:"D MMMM YYYY A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},meridiem:(e,t)=>0===e&&0===t?"":e>=20||e<4?"":e>=4&&e<12?"":e>=12&&e<16?"":""}};t.LOCALE_DATE_TIME_CUSTOMIZATIONS=s;const l=(0,i.default)((0,i.default)({},s),{"pt-pt":{weekdays:["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"]}});t.LOCALE_CUSTOMIZATIONS=l;t.MARK_TRANSLATIONS_ENABLED=false},61388:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryShortcodeByPhone=function(e){if(null==e||0===e.length)return"";const t=function(e,t){if(null!=e&&e.length>0&&null!=t){let n=t[e[0]],r=e;for(;r.length>0&&n;){if(n.c)return n.c;r=r.substr(1,r.length-1),n=n[r[0]]}}return""}(e,n);if(""===t&&"1"===e[0])return"US";if("RU"===t&&["6","7"].includes(e[1]))return"KZ";return t};const n={1:{2:{0:{4:{c:"CA"}},2:{6:{c:"CA"}},3:{6:{c:"CA"}},4:{2:{c:"BS"},9:{c:"CA"}},5:{0:{c:"CA"}},6:{4:{c:"AI"},8:{c:"AG"}},8:{4:{c:"VG"},9:{c:"CA"}}},3:{0:{6:{c:"CA"}},4:{0:{c:"VI"},3:{c:"CA"},5:{c:"KY"}},6:{5:{c:"CA"},7:{c:"CA"}}},4:{0:{3:{c:"CA"}},1:{6:{c:"CA"},8:{c:"CA"}},3:{1:{c:"CA"},7:{c:"CA"},8:{c:"CA"}},4:{1:{c:"BM"}},5:{0:{c:"CA"}},7:{3:{c:"GD"}}},5:{0:{6:{c:"CA"}},1:{4:{c:"CA"},9:{c:"CA"}},4:{8:{c:"CA"}},7:{9:{c:"CA"}},8:{1:{c:"CA"},7:{c:"CA"}}},6:{0:{4:{c:"CA"}},1:{3:{c:"CA"}},3:{9:{c:"CA"}},4:{7:{c:"CA"},9:{c:"TC"}},5:{8:{c:"JM"}},6:{4:{c:"MS"}},7:{0:{c:"MP"},1:{c:"GU"},2:{c:"CA"}},8:{4:{c:"AS"}}},7:{0:{5:{c:"CA"},9:{c:"CA"}},2:{1:{c:"MF"}},5:{8:{c:"LC"}},6:{7:{c:"DM"}},7:{8:{c:"CA"}},8:{0:{c:"CA"},2:{c:"CA"},4:{c:"VC"},7:{c:"PR"}}},8:{0:{7:{c:"CA"},9:{c:"DO"}},1:{9:{c:"CA"}},2:{5:{c:"CA"},9:{c:"DO"}},4:{9:{c:"DO"}},6:{7:{c:"CA"},8:{c:"TT"},9:{c:"KN"}},7:{3:{c:"CA"},6:{c:"JM"}}},9:{0:{2:{c:"CA"},5:{c:"CA"}},3:{9:{c:"PR"}}}},2:{0:{c:"EG"},1:{1:{c:"SS"},2:{c:"MA"},3:{c:"DZ"},6:{c:"TN"},8:{c:"LY"}},2:{0:{c:"GM"},1:{c:"SN"},2:{c:"MR"},3:{c:"ML"},4:{c:"GN"},5:{c:"CI"},6:{c:"BF"},7:{c:"NE"},8:{c:"TG"},9:{c:"BJ"}},3:{0:{c:"MU"},1:{c:"LR"},2:{c:"SL"},3:{c:"GH"},4:{c:"NG"},5:{c:"TD"},6:{c:"CF"},7:{c:"CM"},8:{c:"CV"},9:{c:"ST"}},4:{0:{c:"GQ"},1:{c:"GA"},2:{c:"CG"},3:{c:"CD"},4:{c:"AO"},5:{c:"GW"},6:{c:"IO"},7:{c:"AC"},8:{c:"SC"},9:{c:"SD"}},5:{0:{c:"RW"},1:{c:"ET"},2:{c:"SO"},3:{c:"DJ"},4:{c:"KE"},5:{c:"TZ"},6:{c:"UG"},7:{c:"BI"},8:{c:"MZ"}},6:{0:{c:"ZM"},1:{c:"MG"},2:{c:"RE"},3:{c:"ZW"},4:{c:"NA"},5:{c:"MW"},6:{c:"LS"},7:{c:"BW"},8:{c:"SZ"},9:{c:"KM"}},7:{c:"ZA"},9:{0:{c:"SH"},1:{c:"ER"},7:{c:"AW"},8:{c:"FO"},9:{c:"GL"}}},3:{0:{c:"GR"},1:{c:"NL"},2:{c:"BE"},3:{c:"FR"},4:{c:"ES"},5:{0:{c:"GI"},1:{c:"PT"},2:{c:"LU"},3:{c:"IE"},4:{c:"IS"},5:{c:"AL"},6:{c:"MT"},7:{c:"CY"},8:{c:"FI"},9:{c:"BG"}},6:{c:"HU"},7:{0:{c:"LT"},1:{c:"LV"},2:{c:"EE"},3:{c:"MD"},4:{c:"AM"},5:{c:"BY"},6:{c:"AD"},7:{c:"MC"},8:{c:"SM"}},8:{0:{c:"UA"},1:{c:"RS"},2:{c:"ME"},3:{c:"XK"},5:{c:"HR"},6:{c:"SI"},7:{c:"BA"},9:{c:"MK"}},9:{c:"IT"}},4:{0:{c:"RO"},1:{c:"CH"},2:{0:{c:"CZ"},1:{c:"SK"},3:{c:"LI"}},3:{c:"AT"},4:{c:"GB"},5:{c:"DK"},6:{c:"SE"},7:{c:"NO"},8:{c:"PL"},9:{c:"DE"}},5:{0:{0:{c:"FK"},1:{c:"BZ"},2:{c:"GT"},3:{c:"SV"},4:{c:"HN"},5:{c:"NI"},6:{c:"CR"},7:{c:"PA"},8:{c:"PM"},9:{c:"HT"}},1:{c:"PE"},2:{c:"MX"},3:{c:"CU"},4:{c:"AR"},5:{c:"BR"},6:{c:"CL"},7:{c:"CO"},8:{c:"VE"},9:{0:{c:"GP"},1:{c:"BO"},2:{c:"GY"},3:{c:"EC"},4:{c:"GF"},5:{c:"PY"},6:{c:"MQ"},7:{c:"SR"},8:{c:"UY"},9:{c:"CW"}}},6:{0:{c:"MY"},1:{c:"AU"},2:{c:"ID"},3:{c:"PH"},4:{c:"NZ"},5:{c:"SG"},6:{c:"TH"},7:{0:{c:"TL"},2:{c:"NF"},3:{c:"BN"},4:{c:"NR"},5:{c:"PG"},6:{c:"TO"},7:{c:"SB"},8:{c:"VU"},9:{c:"FJ"}},8:{0:{c:"PW"},1:{c:"WF"},2:{c:"CK"},3:{c:"NU"},5:{c:"WS"},6:{c:"KI"},7:{c:"NC"},8:{c:"TV"},9:{c:"PF"}},9:{0:{c:"TK"},1:{c:"FM"},2:{c:"MH"}}},7:{c:"RU"},8:{1:{c:"JP"},2:{c:"KR"},4:{c:"VN"},5:{0:{c:"KP"},2:{c:"HK"},3:{c:"MO"},5:{c:"KH"},6:{c:"LA"}},6:{c:"CN"},8:{0:{c:"BD"},6:{c:"TW"}}},9:{0:{c:"TR"},1:{c:"IN"},2:{c:"PK"},3:{c:"AF"},4:{c:"LK"},5:{c:"MM"},6:{0:{c:"MV"},1:{c:"LB"},2:{c:"JO"},3:{c:"SY"},4:{c:"IQ"},5:{c:"KW"},6:{c:"SA"},7:{c:"YE"},8:{c:"OM"}},7:{0:{c:"PS"},1:{c:"AE"},2:{c:"IL"},3:{c:"BH"},4:{c:"QA"},5:{c:"BT"},6:{c:"MN"},7:{c:"NP"}},8:{c:"IR"},9:{2:{c:"TJ"},3:{c:"TM"},4:{c:"AZ"},5:{c:"GE"},6:{c:"KG"},8:{c:"UZ"}}}}},24845:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageCodeFromLocale=function(e){return e.replace(/_/g,"-").split("-")[0].toLowerCase()},t.getRegionCodeFromLocale=function(e){const t=e.replace(/_/g,"-").split("-");if(t.length<=1)return null;return t[t.length-1].toUpperCase()},t.normalizeForm=a,t.removeAccents=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,o.default)(a(e).replace(i.default,""))};var i=r(n(7265)),o=r(n(97331));function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.normalize("NFKD")}},99366:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeLocaleToFBTLocale=function(e){const t=n[e];if(null!=t)return t;return e};const n={af:"af_ZA",ar:"ar_AR",az:"az_AZ",bg:"bg_BG",bn:"bn_IN",ca:"ca_ES",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_GB",es:"es_MX",et:"et_EE",fa:"fa_IR",fi:"fi_FI",fil:"tl_PH",fr:"fr_FR",gu:"gu_IN",he:"he_IL",hi:"hi_IN",hr:"hr_HR",hu:"hu_HU",id:"id_ID",it:"it_IT",ja:"ja_JP",kk:"kk_KZ",kn:"kn_IN",ko:"ko_KR",lt:"lt_LT",lv:"lv_LV",mk:"mk_MK",ml:"ml_IN",mr:"mr_IN",ms:"ms_MY",nb:"nb_NO",nl:"nl_NL",pa:"pa_IN",pl:"pl_PL",pt:"pt_PT","pt-BR":"pt_BR",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sq:"sq_AL",sr:"sr_RS",sv:"sv_SE",sw:"sw_KE",ta:"ta_IN",te:"te_IN",th:"th_TH",tr:"tr_TR",uk:"uk_UA",ur:"ur_PK",uz:"uz_UZ",vi:"vi_VN","zh-CN":"zh_CN","zh-HK":"zh_HK","zh-TW":"zh_TW"}},1039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={ach:{name:"Acholi",numbers:[1,2],plurals:e=>Number(e>1)},af:{name:"Afrikaans",numbers:[1,2],plurals:e=>Number(1!=e)},ak:{name:"Akan",numbers:[1,2],plurals:e=>Number(e>1)},am:{name:"Amharic",numbers:[1,2],plurals:e=>Number(e>1)},an:{name:"Aragonese",numbers:[1,2],plurals:e=>Number(1!=e)},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:e=>Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},arn:{name:"Mapudungun",numbers:[1,2],plurals:e=>Number(e>1)},ast:{name:"Asturian",numbers:[1,2],plurals:e=>Number(1!=e)},ay:{name:"Aymar",numbers:[1],plurals:()=>0},az:{name:"Azerbaijani",numbers:[1,2],plurals:e=>Number(1!=e)},be:{name:"Belarusian",numbers:[1,2,5],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},bg:{name:"Bulgarian",numbers:[1,2],plurals:e=>Number(1!=e)},bn:{name:"Bengali",numbers:[1,2],plurals:e=>Number(1!=e)},bo:{name:"Tibetan",numbers:[1],plurals:()=>0},br:{name:"Breton",numbers:[1,2],plurals:e=>Number(e>1)},bs:{name:"Bosnian",numbers:[1,2,5],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},ca:{name:"Catalan",numbers:[1,2],plurals:e=>Number(1!=e)},cgg:{name:"Chiga",numbers:[1],plurals:()=>0},cs:{name:"Czech",numbers:[1,2,5],plurals:e=>Number(1==e?0:e>=2&&e<=4?1:2)},csb:{name:"Kashubian",numbers:[1,2,5],plurals:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},da:{name:"Danish",numbers:[1,2],plurals:e=>Number(1!=e)},de:{name:"German",numbers:[1,2],plurals:e=>Number(1!=e)},dz:{name:"Dzongkha",numbers:[1],plurals:()=>0},el:{name:"Greek",numbers:[1,2],plurals:e=>Number(1!=e)},en:{name:"English",numbers:[1,2],plurals:e=>Number(1!=e)},eo:{name:"Esperanto",numbers:[1,2],plurals:e=>Number(1!=e)},es:{name:"Spanish",numbers:[1,2],plurals:e=>Number(1!=e)},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:e=>Number(1!=e)},et:{name:"Estonian",numbers:[1,2],plurals:e=>Number(1!=e)},eu:{name:"Basque",numbers:[1,2],plurals:e=>Number(1!=e)},fa:{name:"Persian",numbers:[1,2],plurals:e=>Number(e>1)},fi:{name:"Finnish",numbers:[1,2],plurals:e=>Number(1!=e)},fil:{name:"Filipino",numbers:[1,2],plurals:e=>Number(e>1)},fo:{name:"Faroese",numbers:[1,2],plurals:e=>Number(1!=e)},fr:{name:"French",numbers:[1,2],plurals:e=>Number(e>1)},fur:{name:"Friulian",numbers:[1,2],plurals:e=>Number(1!=e)},fy:{name:"Frisian",numbers:[1,2],plurals:e=>Number(1!=e)},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},gl:{name:"Galician",numbers:[1,2],plurals:e=>Number(1!=e)},gu:{name:"Gujarati",numbers:[1,2],plurals:e=>Number(1!=e)},gun:{name:"Gun",numbers:[1,2],plurals:e=>Number(e>1)},ha:{name:"Hausa",numbers:[1,2],plurals:e=>Number(1!=e)},he:{name:"Hebrew",numbers:[1,2,20,3],plurals:e=>Number(1===e?0:2===e?1:e>=20&&e%10==0?2:3)},hi:{name:"Hindi",numbers:[1,2],plurals:e=>Number(1!=e)},hr:{name:"Croatian",numbers:[1,2,5],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},hu:{name:"Hungarian",numbers:[1,2],plurals:e=>Number(1!=e)},hy:{name:"Armenian",numbers:[1,2],plurals:e=>Number(1!=e)},ia:{name:"Interlingua",numbers:[1,2],plurals:e=>Number(1!=e)},id:{name:"Indonesian",numbers:[1],plurals:()=>0},is:{name:"Icelandic",numbers:[1,2],plurals:e=>Number(e%10!=1||e%100==11)},it:{name:"Italian",numbers:[1,2],plurals:e=>Number(1!=e)},ja:{name:"Japanese",numbers:[1],plurals:()=>0},jbo:{name:"Lojban",numbers:[1],plurals:()=>0},jv:{name:"Javanese",numbers:[0,1],plurals:e=>Number(0!==e)},ka:{name:"Georgian",numbers:[1],plurals:()=>0},kk:{name:"Kazakh",numbers:[1],plurals:()=>0},km:{name:"Khmer",numbers:[1],plurals:()=>0},kn:{name:"Kannada",numbers:[1,2],plurals:e=>Number(1!=e)},ko:{name:"Korean",numbers:[1],plurals:()=>0},ku:{name:"Kurdish",numbers:[1,2],plurals:e=>Number(1!=e)},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:e=>Number(1==e?0:2==e?1:3==e?2:3)},ky:{name:"Kyrgyz",numbers:[1],plurals:()=>0},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:e=>Number(1!=e)},ln:{name:"Lingala",numbers:[1,2],plurals:e=>Number(e>1)},lo:{name:"Lao",numbers:[1],plurals:()=>0},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},lv:{name:"Latvian",numbers:[0,1,2],plurals:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2)},mai:{name:"Maithili",numbers:[1,2],plurals:e=>Number(1!=e)},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:e=>Number(e>1)},mg:{name:"Malagasy",numbers:[1,2],plurals:e=>Number(e>1)},mi:{name:"Maori",numbers:[1,2],plurals:e=>Number(e>1)},mk:{name:"Macedonian",numbers:[1,2],plurals:e=>Number(1==e||e%10==1?0:1)},ml:{name:"Malayalam",numbers:[1,2],plurals:e=>Number(1!=e)},mn:{name:"Mongolian",numbers:[1,2],plurals:e=>Number(1!=e)},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:e=>Number(0===e?0:1==e?1:2)},mr:{name:"Marathi",numbers:[1,2],plurals:e=>Number(1!=e)},ms:{name:"Malay",numbers:[1],plurals:()=>0},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:e=>Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},nah:{name:"Nahuatl",numbers:[1,2],plurals:e=>Number(1!=e)},nap:{name:"Neapolitan",numbers:[1,2],plurals:e=>Number(1!=e)},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:e=>Number(1!=e)},ne:{name:"Nepali",numbers:[1,2],plurals:e=>Number(1!=e)},nl:{name:"Dutch",numbers:[1,2],plurals:e=>Number(1!=e)},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:e=>Number(1!=e)},no:{name:"Norwegian",numbers:[1,2],plurals:e=>Number(1!=e)},nso:{name:"Northern Sotho",numbers:[1,2],plurals:e=>Number(1!=e)},oc:{name:"Occitan",numbers:[1,2],plurals:e=>Number(e>1)},or:{name:"Oriya",numbers:[2,1],plurals:e=>Number(1!=e)},pa:{name:"Punjabi",numbers:[1,2],plurals:e=>Number(1!=e)},pap:{name:"Papiamento",numbers:[1,2],plurals:e=>Number(1!=e)},pl:{name:"Polish",numbers:[1,2,5],plurals:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},pms:{name:"Piemontese",numbers:[1,2],plurals:e=>Number(1!=e)},ps:{name:"Pashto",numbers:[1,2],plurals:e=>Number(1!=e)},pt:{name:"Portuguese",numbers:[1,2],plurals:e=>Number(1!=e)},"pt-BR":{name:"Brazilian Portuguese",numbers:[1,2],plurals:e=>Number(1!=e)},rm:{name:"Romansh",numbers:[1,2],plurals:e=>Number(1!=e)},ro:{name:"Romanian",numbers:[1,2,20],plurals:e=>Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},ru:{name:"Russian",numbers:[1,2,5],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},sah:{name:"Yakut",numbers:[1],plurals:()=>0},sco:{name:"Scots",numbers:[1,2],plurals:e=>Number(1!=e)},se:{name:"Northern Sami",numbers:[1,2],plurals:e=>Number(1!=e)},si:{name:"Sinhala",numbers:[1,2],plurals:e=>Number(1!=e)},sk:{name:"Slovak",numbers:[1,2,5],plurals:e=>Number(1==e?0:e>=2&&e<=4?1:2)},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},so:{name:"Somali",numbers:[1,2],plurals:e=>Number(1!=e)},son:{name:"Songhay",numbers:[1,2],plurals:e=>Number(1!=e)},sq:{name:"Albanian",numbers:[1,2],plurals:e=>Number(1!=e)},sr:{name:"Serbian",numbers:[1,2,5],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},su:{name:"Sundanese",numbers:[1],plurals:()=>0},sv:{name:"Swedish",numbers:[1,2],plurals:e=>Number(1!=e)},sw:{name:"Swahili",numbers:[1,2],plurals:e=>Number(1!=e)},ta:{name:"Tamil",numbers:[1,2],plurals:e=>Number(1!=e)},te:{name:"Telugu",numbers:[1,2],plurals:e=>Number(1!=e)},tg:{name:"Tajik",numbers:[1,2],plurals:e=>Number(e>1)},th:{name:"Thai",numbers:[1],plurals:()=>0},ti:{name:"Tigrinya",numbers:[1,2],plurals:e=>Number(e>1)},tk:{name:"Turkmen",numbers:[1,2],plurals:e=>Number(1!=e)},tr:{name:"Turkish",numbers:[1,2],plurals:e=>Number(e>1)},tt:{name:"Tatar",numbers:[1],plurals:()=>0},ug:{name:"Uyghur",numbers:[1],plurals:()=>0},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},ur:{name:"Urdu",numbers:[1,2],plurals:e=>Number(1!=e)},uz:{name:"Uzbek",numbers:[1,2],plurals:e=>Number(e>1)},vi:{name:"Vietnamese",numbers:[1],plurals:()=>0},wa:{name:"Walloon",numbers:[1,2],plurals:e=>Number(e>1)},wo:{name:"Wolof",numbers:[1],plurals:()=>0},yo:{name:"Yoruba",numbers:[1,2],plurals:e=>Number(1!=e)},zh:{name:"Chinese",numbers:[1],plurals:()=>0}};t.default=n},79052:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.l10nNumberFormattersRegister=t.M=t.K=void 0;const n=1e3;t.K=n;const r=10**6;function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const[i,o]=(e/10**t).toString(10).split(".");return null==o||o.startsWith("0".repeat(r))||Number.parseInt(i,10)>=100?parseInt(i,10):parseFloat(`${i}${n}${o.slice(0,r)}`)}function o(e,t){return Intl.NumberFormat(t,{notation:"compact"}).format(e)}t.M=r;const a=[{locales:["de","de-AT","de-CH","de-DE","de-LI","de-LU"],format:(e,t)=>e>n&&e<r?`${i(e,3)} Tsd.`:o(e,t)},{locales:["fr","fr-BE","fr-CA","fr-CH","fr-FR"],format:(e,t)=>o(e,t).toLocaleUpperCase(t)},{locales:["it","it-CH","it-IT"],format:(e,t)=>e<n?e.toLocaleString(t):e<r?`${i(e,3)} mila`:`${i(e,6)} mln`},{locales:["he","he-IL"],format:(e,t)=>e<n?e.toLocaleString(t):e<r?`${i(e,3)} `:`${i(e,6)} `},{locales:["ja"],format:(e,t)=>e<n?e.toLocaleString(t):e<1e4?`${i(e,3)}`:o(e,t)},{locales:["pt","pt-BR","pt-PT"],format:(e,t)=>e<n?e.toLocaleString(t):e<r?o(e,t):`${i(e,6)} M`},{locales:["ro","ro-RO"],format:(e,t)=>e<n?e.toLocaleString(t):e===n?"1 mie":e<r?`${i(e,3)} mii`:`${i(e,6)} mil.`},{locales:["zh-TW","zh-MO","zh-HK"],format:(e,t)=>e<n?e.toLocaleString(t):e<1e4?`${i(e,3)}`:o(e,"zh-TW")},{locales:["zh-SG","zh-CN"],format:(e,t)=>e<n?e.toLocaleString(t):e<1e4?`${i(e,3)}`:o(e,t)}],s=function(){const e=new Map;for(const t of a)t.locales.forEach((n=>e.set(n,t)));return e}();t.l10nNumberFormattersRegister=s},43286:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.freeze({af:"af",ar:"ar",ar_xb:"ar-XB",az:"az",bg:"bg",bn:"bn",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",en:"en",es:"es",et:"et",fa:"fa",fi:"fi",fil:"fil",fr:"fr",gu:"gu",he:"he",hi:"hi",hr:"hr",hu:"hu",id:"id",it:"it",ja:"ja",kk:"kk",kn:"kn",ko:"ko",lt:"lt",lv:"lv",mk:"mk",ml:"ml",mr:"mr",ms:"ms",nb:"nb",nl:"nl",pa:"pa",pl:"pl",pt:"pt",pt_br:"pt-BR",ro:"ro",ru:"ru",sk:"sk",sl:"sl",sq:"sq",sr:"sr",sv:"sv",sw:"sw",ta:"ta",te:"te",th:"th",tr:"tr",uk:"uk",ur:"ur",uz:"uz",vi:"vi",zh_cn:"zh-CN",zh_hk:"zh-HK",zh_tw:"zh-TW"});t.default=n},47344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyntheticCountryCode=void 0;const r=n(76672)({NotApplicable:"NOT_APPLICABLE"});t.SyntheticCountryCode=r},22192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={"zh-HK":"zh-TW",pa:"pa-IN"};t.default=n},46040:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(81109));var o=(0,i.default)((0,i.default)({},{pt:"pt_br",pt_ao:"pt",pt_ch:"pt",pt_cv:"pt",pt_fr:"pt",pt_gq:"pt",pt_gw:"pt",pt_lu:"pt",pt_mo:"pt",pt_mz:"pt",pt_pt:"pt",pt_st:"pt",pt_tl:"pt"}),{},{zh_hans:"zh_cn",zh_hant:"zh_tw",zh_sg:"zh_cn",tl:"fil",in:"id",iw:"he",mo:"ro",jw:"jv",ji:"yi"});t.default=o},46280:(e,t)=>{"use strict";function n(e){if(!e)return e;const t=e.replace(/[\u202a-\u202e\u2066-\u2069\u200E\u200F\u061C]/g,""),n=t.split(".");if(1===n.length)return t;for(let e=n.length-1;e>0;e--){const t=n[e].trim();if(t.length)return n.slice(0,e).join(".")+"."+t}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanFilename=n,t.cleanIncomingFilename=function(e){if(null==e)return e;const t=n(e);if(e!==t&&t){const e=t.split("."),n=e.length>=2&&e.pop();["bat","exe","cmd","com","lnk","pif","scr","vb","vbe","vbs","wsh","js","ps1","hta","sh","csh","msi","app","scpt","applescript","reg","vbe","wsf","sct"].includes(n)&&__LOG__(2,!0)`cleanIncomingFilename:extension: ${n||""}`}return t}},87622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={"application/":{applixware:"aw","atom+xml":"atom","atomcat+xml":"atomcat","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-":{capability:"cdmia",container:"cdmic",domain:"cdmid",object:"cdmio",queue:"cdmiq"},"davmount+xml":"davmount","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc",ecmascript:"ecma","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-":{tdpfr:"pfr",woff:"woff"},"gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","java-":{archive:"jar",vm:"class","serialized-object":"ser"},javascript:"js",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mac-":{binhex40:"hqx",compactpro:"cpt"},"mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx",mathematica:["ma","nb","mb"],"mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps",pdf:"pdf","pgp-":{encrypted:"pgp",signature:["asc","sig"]},pkcs10:"p10","pkcs7-":{mime:["p7m","p7c"],signature:"p7s"},pkcs8:"p8","pkix-":{cert:"cer",crl:"crl",pkipath:"pkipath","attr-cert":"ac"},pkixcmp:"pki","pls+xml":"pls",postscript:["ai","eps","ps"],"pskc+xml":"pskcxml","rdf+xml":"rdf","reginfo+xml":"rif","resource-":{"lists+xml":"rl","lists-diff+xml":"rld"},"rpki-":{ghostbusters:"gbr",manifest:"mft",roa:"roa"},"rsd+xml":"rsd","rss+xml":"rss",rtf:"rtf","sbml+xml":"sbml","scvp-":{"cv-":{request:"scq",response:"scs"},"vp-":{request:"spq",response:"spp"}},sdp:"sdp","set-":{"payment-initiation":"setpay","registration-initiation":"setreg"},"shf+xml":"shf","smil+xml":["smi","smil"],"sparql-":{query:"rq","results+xml":"srx"},srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","vnd.":{acucobol:"acu",acucorp:["atc","acutc"],"adobe.":{fxp:["fxp","fxpl"],"xdp+xml":"xdp",xfdf:"xfdf","formscentral.fcdt":"fcdt","air-application-installer-package+zip":"air"},"apple.":{"installer+xml":"mpkg",mpegurl:"m3u8"},audiograph:"aep",bmi:"bmi",businessobjects:"rep","chemdraw+xml":"cdxml",cinderella:"cdy",claymore:"cla",commonspace:"csp",cosmocaller:"cmc","crick.":{clicker:"clkx","clicker.":{keyboard:"clkk",palette:"clkp",template:"clkt",wordbank:"clkw"}},"curl.":{car:"car",pcurl:"pcurl"},dart:"dart","dece.":{data:["uvf","uvvf","uvd","uvvd"],"ttml+xml":["uvt","uvvt"],unspecified:["uvx","uvvx"],zip:["uvz","uvvz"]},dna:"dna",dpgraph:"dpg",dreamfactory:"dfac","dvb.":{ait:"ait",service:"svc"},dynageo:"geo",enliven:"nml","epson.":{esf:"esf",msf:"msf",quickanime:"qam",salt:"slt",ssf:"ssf"},"eszigno3+xml":["es3","et3"],"ezpix-":{album:"ez2",package:"ez3"},fdf:"fdf","fdsn.":{mseed:"mseed",seed:["seed","dataless"]},flographit:"gph",framemaker:["fm","frame","maker","book"],"frogans.":{fnc:"fnc",ltf:"ltf"},"fujitsu.":{oasys:"oas",oasys2:"oa2",oasys3:"oa3",oasysgp:"fg5",oasysprs:"bh2"},"fujixerox.":{ddd:"ddd",docuworks:"xdw","docuworks.binder":"xbd"},fuzzysheet:"fzs","geogebra.":{file:"ggb",tool:"ggt"},geonext:"gxt",geoplan:"g2w",geospace:"g3w",gmx:"gmx",grafeq:["gqf","gqs"],"groove-":{account:"gac",help:"ghf",injector:"grv","tool-":{message:"gtm",template:"tpl"},vcard:"vcg","identity-message":"gim"},"hal+xml":"hal",hbci:"hbci","hp-":{hpgl:"hpgl",hpid:"hpid",hps:"hps",jlyt:"jlt",pcl:"pcl",pclxl:"pclxl"},"ibm.":{minipay:"mpy",modcap:["afp","listafp","list3820"],"rights-management":"irm","secure-container":"sc"},iccprofile:["icc","icm"],igloader:"igl","immervision-":{ivp:"ivp",ivu:"ivu"},intergeo:"i2g","intu.":{qbo:"qbo",qfx:"qfx"},jam:"jam",jisp:"jisp",kahootz:["ktz","ktr"],"kde.":{karbon:"karbon",kchart:"chrt",kformula:"kfo",kivio:"flw",kontour:"kon",kpresenter:["kpr","kpt"],kspread:"ksp",kword:["kwd","kwt"]},kenameaapp:"htke",kidspiration:"kia",kinar:["kne","knp"],koan:["skp","skd","skt","skm"],"lotus-":{approach:"apr",freelance:"pre",notes:"nsf",organizer:"org",screencam:"scm",wordpro:"lwp","1-2-3":"123"},mcd:"mcd",medcalcdata:"mc1",mfer:"mwf",mfmp:"mfm","micrografx.":{flo:"flo",igx:"igx"},mif:"mif","mobius.":{daf:"daf",dis:"dis",mbk:"mbk",mqy:"mqy",msl:"msl",plc:"plc",txf:"txf"},"mophun.":{application:"mpn",certificate:"mpc"},"ms-":{artgalry:"cil",excel:["xls","xlm","xla","xlc","xlt","xlw"],"excel.":{"sheet.":{"macroenabled.12":"xlsm","binary.macroenabled.12":"xlsb"},"addin.macroenabled.12":"xlam","template.macroenabled.12":"xltm"},fontobject:"eot",htmlhelp:"chm",ims:"ims",lrm:"lrm",outlook:"msg",officetheme:"thmx","pki.":{seccat:"cat",stl:"stl"},powerpoint:["ppt","pps","pot"],"powerpoint.":{"addin.macroenabled.12":"ppam","presentation.macroenabled.12":"pptm","slide.macroenabled.12":"sldm","slideshow.macroenabled.12":"ppsm","template.macroenabled.12":"potm"},project:["mpp","mpt"],"word.":{"document.macroenabled.12":"docm","template.macroenabled.12":"dotm"},works:["wps","wks","wcm","wdb"],wpl:"wpl",xpsdocument:"xps","cab-compressed":"cab"},mseq:"mseq",musician:"mus",mynfc:"taglet",nitf:["ntf","nitf"],"noblenet-":{directory:"nnd",sealer:"nns",web:"nnw"},"nokia.":{"radio-":{preset:"rpst",presets:"rpss"},"n-gage.":{data:"ngdat","symbian.install":"n-gage"}},"novadigm.":{edm:"edm",edx:"edx",ext:"ext"},"osgi.":{dp:"dp",subsystem:"esa"},palm:["pdb","pqa","oprc"],pawaafile:"paw","pg.":{format:"str",osasli:"ei6"},picsel:"efif",pocketlearn:"plf",powerbuilder6:"pbd","recordare.":{musicxml:"mxl","musicxml+xml":"musicxml"},"rn-":{realmedia:"rm","realmedia-vbr":"rmvb"},seemail:"see",sema:"sema",semd:"semd",semf:"semf",smaf:"mmf","spotfire.":{dxp:"dxp",sfs:"sfs"},"stardivision.":{calc:"sdc",draw:"sda",impress:"sdd",math:"smf",writer:["sdw","vor"],"writer-global":"sgl"},"stepmania.":{package:"smzip",stepchart:"sm"},svd:"svd","syncml+xml":"xsm","syncml.":{"dm+wbxml":"bdm","dm+xml":"xdm"},trueapp:"tra",ufdl:["ufd","ufdl"],umajin:"umj",unity:"unityweb","uoml+xml":"uoml",vcx:"vcx",visio:["vsd","vst","vss","vsw"],visionary:"vis",vsf:"vsf","Webd.":{wbxml:"wbxml",wmlc:"wmlc",wmlscriptc:"wmlsc"},webturbo:"wtb",wordperfect:"wpd",wqd:"wqd",xara:"xar",xfdl:"xfdl","yamaha.":{"hv-":{dic:"hvd",script:"hvs",voice:"hvp"},openscoreformat:"osf","smaf-":{audio:"saf",phrase:"spf"},"openscoreformat.osfpvg+xml":"osfpvg"},zul:["zir","zirz"],"3gpp2.tcap":"tcap","accpac.simply.":{aso:"aso",imp:"imp"},"ahead.space":"ahead","airzip.filesecure.":{azf:"azf",azs:"azs"},"amazon.ebook":"azw","americandynamics.acc":"acc","amiga.ami":"ami","anser-web-":{"certificate-issue-initiation":"cii","funds-transfer-initiation":"fti"},"aristanetworks.swi":"swi","blueice.multipass":"mpm","cloanto.rp9":"rp9","clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"cluetrust.cartomobile-":{config:"c11amc","config-pkg":"c11amz"},"contact.cmsg":"cdbcmsg","criticaltools.wbs+xml":"wbs","ctc-posml":"pml","cups-ppd":"ppd","dolby.mlp":"mlp","ds-keypoint":"kpxx","ecowin.chart":"mag","fluxtime.clip":"ftc","fsc.weblaunch":"fsc","genomatix.tuxedo":"txd","geometry-explorer":["gex","gre"],"google-earth.":{"kml+xml":"kml",kmz:"kmz"},"handheld-entertainment+xml":"zmm","insors.igm":"igm","intercon.formnet":["xpw","xpx"],"ipunplugged.rcprofile":"rcprofile","irepository.package+xml":"irp","is-xpr":"xpr","isac.fcs":"fcs","kodak-descriptor":"sse","las.las+xml":"lasxml","macports.portpkg":"portpkg","mediastation.cdkey":"cdkey","mozilla.xul+xml":"xul","muvee.style":"msty","neurolanguage.nlu":"nlu","oasis.opendocument.":{chart:"odc",database:"odb",formula:"odf",graphics:"odg",image:"odi",presentation:"odp",spreadsheet:"ods",text:"odt","text-":{master:"odm",template:"ott",web:"oth"},"chart-template":"otc","formula-template":"odft","graphics-template":"otg","image-template":"oti","presentation-template":"otp","spreadsheet-template":"ots"},"olpc-sugar":"xo","oma.dd2+xml":"dd2","openofficeorg.extension":"oxt","openxmlformats-officedocument.":{"presentationml.":{presentation:"pptx",slide:"sldx",slideshow:"ppsx",template:"potx"},"spreadsheetml.":{sheet:"xlsx",template:"xltx"},"wordprocessingml.":{document:"docx",template:"dotx"}},"pmi.widget":"wg","previewsystems.box":"box","proteus.magazine":"mgz","pvi.ptid1":"ptid","quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"realvnc.bed":"bed","rig.cryptonote":"cryptonote","rim.cod":"cod","route66.link66+xml":"link66","sailingtracker.track":"st","shana.informed.":{formdata:"ifm",formtemplate:"itp",interchange:"iif",package:"ipk"},"simtech-mindmapper":["twd","twds"],"smart.teacher":"teacher","solent.sdkm+xml":["sdkm","sdkd"],"sun.xml.":{calc:"sxc",draw:"sxd",impress:"sxi",math:"sxm",writer:"sxw","writer.":{global:"sxg",template:"stw"},"calc.template":"stc","draw.template":"std","impress.template":"sti"},"sus-calendar":["sus","susp"],"symbian.install":["sis","sisx"],"tcpdump.pcap":["pcap","cap","dmp"],"tmobile-livetv":"tmo","trid.tpt":"tpt","triscape.mxs":"mxs","uiq.theme":"utz","wolfram.player":"nbp","wt.stf":"stf","zzazz.deck+xml":"zaz","3gpp.pic-bw-":{large:"plb",small:"psb",var:"pvb"},"3m.post-it-notes":"pwn","android.package-archive":"apk","antix.game-component":"atx","astraea-software.iota":"iota","chipnuts.karaoke-mmd":"mmd","data-vision.rdz":"rdz","denovo.fcselayout-link":"fe_launch","hhe.lesson-player":"les","hydrostatix.sof-data":"sfd-hdstx","jcp.javame.midlet-rms":"rms","joost.joda-archive":"joda","llamagraphics.life-balance.":{desktop:"lbd","exchange+xml":"lbe"},"osgeo.mapguide.package":"mgp","publishare-delta-tree":"qps","tao.intent-module-archive":"tao","yellowriver-custom-menu":"cmp"},"voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-":{abiword:"abw","authorware-":{bin:["aab","x32","u32","vox"],map:"aam",seg:"aas"},bcpio:"bcpio",bittorrent:"torrent",blorb:["blb","blorb"],bzip:"bz",bzip2:["bz2","boz"],cbr:["cbr","cba","cbt","cbz","cb7"],cdlink:"vcd",chat:"chat",conference:"nsc",cpio:"cpio",csh:"csh",director:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],doom:"wad","dtbncx+xml":"ncx","dtbook+xml":"dtb","dtbresource+xml":"res",dvi:"dvi",envoy:"evy",eva:"eva","font-":{bdf:"bdf",ghostscript:"gsf",otf:"otf",pcf:"pcf",snf:"snf",ttf:["ttf","ttc"],type1:["pfa","pfb","pfm","afm"],"linux-psf":"psf"},freearc:"arc",futuresplash:"spl",glulx:"ulx",gnumeric:"gnumeric",gtar:"gtar",hdf:"hdf",latex:"latex",mie:"mie","ms-":{application:"application",shortcut:"lnk",wmd:"wmd",wmz:"wmz",xbap:"xbap"},msaccess:"mdb",msbinder:"obd",mscardfile:"crd",msclip:"clp",msdownload:["exe","dll","com","bat","msi"],msmediaview:["mvb","m13","m14"],msmetafile:["wmf","wmz","emf","emz"],msmoney:"mny",mspublisher:"pub",msschedule:"scd",msterminal:"trm",mswrite:"wri",netcdf:["nc","cdf"],nzb:"nzb",pkcs12:["p12","pfx"],"pkcs7-":{certificates:["p7b","spc"],certreqresp:"p7r"},sh:"sh",shar:"shar",sql:"sql",stuffit:"sit",stuffitx:"sitx",subrip:"srt",sv4cpio:"sv4cpio",sv4crc:"sv4crc",tads:"gam",tar:"tar",tcl:"tcl",tex:"tex",texinfo:["texinfo","texi"],tgif:"obj",ustar:"ustar",xfig:"fig","xliff+xml":"xlf",xpinstall:"xpi",xz:"xz",zmachine:["z1","z2","z3","z4","z5","z6","z7","z8"],"7z-compressed":"7z","ace-compressed":"ace","apple-diskimage":"dmg","cfs-compressed":"cfs","chess-pgn":"pgn","debian-package":["deb","udeb"],"dgc-compressed":"dgc","gca-compressed":"gca","gramps-xml":"gramps","install-instructions":"install","iso9660-image":"iso","lzh-compressed":["lzh","lha"],"mobipocket-ebook":["prc","mobi"],"rar-compressed":"rar","shockwave-flash":"swf","silverlight-app":"xap","t3vm-image":"t3","tex-tfm":"tfm","wais-source":"src","java-jnlp-file":"jnlp","research-info-systems":"ris","x509-ca-cert":["der","crt"]},"xaml+xml":"xaml","xenc+xml":"xenc","xhtml+xml":["xhtml","xht"],xml:["xml","xsl"],"xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xspf+xml":"xspf","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",zip:"zip","andrew-inset":"ez","cu-seeme":"cu","octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy"],"oebps-package+xml":"opf","pics-rules":"prf","prs.cww":"cww","rls-services+xml":"rs","timestamped-data":"tsd","xcap-diff+xml":"xdf","xml-dtd":"dtd","patch-ops-error+xml":"xer","relax-ng-compact-syntax":"rnc"},"audio/":{adpcm:"adp",basic:["au","snd"],midi:["mid","midi","kar","rmi"],mp4:["m4a","mp4a"],mpeg:["mpga","mp2","mp2a","mp3","m2a","m3a"],ogg:["oga","ogg","spx"],s3m:"s3m",silk:"sil","vnd.":{dra:"dra",dts:"dts","nuera.":{ecelp4800:"ecelp4800",ecelp7470:"ecelp7470",ecelp9600:"ecelp9600"},rip:"rip","dece.audio":["uva","uvva"],"digital-winds":"eol","dts.hd":"dtshd","lucent.voice":"lvp","ms-playready.media.pya":"pya"},webm:"weba","x-":{aac:"aac",aiff:["aif","aiff","aifc"],caf:"caf",flac:"flac",matroska:"mka",mpegurl:"m3u","ms-":{wax:"wax",wma:"wma"},"pn-":{realaudio:["ram","ra"],"realaudio-plugin":"rmp"},wav:"wav"},xm:"xm"},"image/":{bmp:"bmp",cgm:"cgm",g3fax:"g3",gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],ktx:"ktx",png:"png",sgi:"sgi","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.":{djvu:["djvu","djv"],dwg:"dwg",dxf:"dxf",fastbidsheet:"fbs",fpx:"fpx",fst:"fst","ms-":{modi:"mdi",photo:"wdp"},xiff:"xif","adobe.photoshop":"psd","dece.graphic":["uvi","uvvi","uvg","uvvg"],"dvb.subtitle":"sub","fujixerox.edmics-":{mmr:"mmr",rlc:"rlc"},"net-fpx":"npx","wap.wbmp":"wbmp"},webp:"webp","x-":{"3ds":"3ds",cmx:"cmx",freehand:["fh","fhc","fh4","fh5","fh7"],icon:"ico",pcx:"pcx",pict:["pic","pct"],"portable-":{anymap:"pnm",bitmap:"pbm",graymap:"pgm",pixmap:"ppm"},rgb:"rgb",tga:"tga",xbitmap:"xbm",xpixmap:"xpm",xwindowdump:"xwd","cmu-raster":"ras","mrsid-image":"sid"},"prs.btif":"btif"},"model/":{iges:["igs","iges"],mesh:["msh","mesh","silo"],"vnd.":{"collada+xml":"dae",dwf:"dwf",gdl:"gdl",gtw:"gtw",mts:"mts",vtu:"vtu"},vrml:["wrl","vrml"],"x3d+binary":["x3db","x3dbz"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"]},"text/":{calendar:["ics","ifb"],css:"css",csv:"csv",html:["html","htm"],n3:"n3",plain:["txt","text","conf","def","list","log","in"],richtext:"rtx",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl",vcard:"vcard","vnd.":{curl:"curl","curl.":{dcurl:"dcurl",mcurl:"mcurl",scurl:"scurl"},fly:"fly",graphviz:"gv","in3d.":{"3dml":"3dml",spot:"spot"},"wap.":{wml:"wml",wmlscript:"wmls"},"dvb.subtitle":"sub","fmi.flexstor":"flx","sun.j2me.app-descriptor":"jad"},"x-":{asm:["s","asm"],c:["c","cc","cxx","cpp","h","hh","dic"],fortran:["f","for","f77","f90"],nfo:"nfo",opml:"opml",pascal:["p","pas"],setext:"etx",sfv:"sfv",uuencode:"uu",vcalendar:"vcs",vcard:"vcf","java-source":"java"},"cache-manifest":"appcache","uri-list":["uri","uris","urls"],"prs.lines.tag":"dsc","tab-separated-values":"tsv"},"video/":{"3gpp":"3gp","3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],mp4:["mp4","mp4v","mpg4"],mpeg:["mpeg","mpg","mpe","m1v","m2v"],ogg:"ogv",quicktime:["qt","mov"],"vnd.":{"dece.":{hd:["uvh","uvvh"],mobile:["uvm","uvvm"],pd:["uvp","uvvp"],sd:["uvs","uvvs"],video:["uvv","uvvv"]},fvt:"fvt",mpegurl:["mxu","m4u"],vivo:"viv","dvb.file":"dvb","uvvu.mp4":["uvu","uvvu"],"ms-playready.media.pyv":"pyv"},webm:"webm","x-":{f4v:"f4v",fli:"fli",flv:"flv",m4v:"m4v",matroska:["mkv","mk3d","mks"],mng:"mng","ms-":{asf:["asf","asx"],vob:"vob",wm:"wm",wmv:"wmv",wmx:"wmx",wvx:"wvx"},msvideo:"avi",smv:"smv","sgi-movie":"movie"}},"chemical/x-":{cdx:"cdx",cif:"cif",cmdf:"cmdf",cml:"cml",csml:"csml",xyz:"xyz"},"message/rfc822":["eml","mime"],"x-conference/x-cooltalk":"ice"}},35677:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_MIMES=t.MSCFB_MIME=t.MSCFB_HEADER=t.MIMETYPE_DETERMINING_LENGTH=t.MIMETYPES=t.IMAGE_MIMES=t.EXT_TO_MIME=t.DOC_MIMES=t.DOCUMENT_MIMETYPES=t.AUDIO_MIMES=void 0,t.getExtension=function(e){var t;const n=d[e];if(!n)return"";return"."+(null!==(t=n.ext)&&void 0!==t?t:e.split("/")[1]).toLowerCase()},t.getMediaMimeType=function(e,t){const n=t.subarray(0,262),r=(0,l.default)(n);if(r)return r.mime;if("image"===e)return"image/jpeg";throw new s.MediaEncryptionError("unknown mime decrypt error for type:"+e)},t.isAllowedDocumentMimetype=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(const r in g){const i=d[r];if(null==i)continue;const{signatureMimetype:o,ext:a}=i;if((n?o:r)===e&&null!=a&&(null==t?void 0:t.toLowerCase().endsWith(a.toLowerCase())))return r}if(n)return e;return null!=e?e:"application/octet-stream"},t.isMsCompoundFileBinaryFormat=function(e){return(0,o.default)(e,c)},t.isOpus=function(e){if(null==e)return!1;return e.includes("audio/ogg")},t.previewType=function(e){const t=d[e];return null==t?void 0:t.previewType};var i=r(n(35937)),o=r(n(22194)),a=r(n(71276)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(91329)),l=r(n(97769));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.MIMETYPE_DETERMINING_LENGTH=262;const c=new Uint8Array([208,207,17,224,161,177,26,225]);t.MSCFB_HEADER=c;t.MSCFB_MIME="application/x-cfb";const d={"text/plain":{ext:"TXT",msgType:"document",icon:"icon-doc-txt",canSend:!0},"text/rtf":{ext:"RTF",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/rtf"},"text/vcard":{ext:"VCF",msgType:"vcard"},"application/zip":{ext:"ZIP",icon:"icon-doc-generic",msgType:"document"},"application/pdf":{ext:"PDF",msgType:"document",icon:"icon-doc-pdf",canSend:!0,signatureMimetype:"application/pdf",previewType:"pdf"},"application/msword":{ext:"DOC",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.ms-excel":{ext:"XLS",msgType:"document",icon:"icon-doc-xls",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.ms-powerpoint":{ext:"PPT",msgType:"document",icon:"icon-doc-ppt",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{ext:"DOCX",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{ext:"PPTX",msgType:"document",icon:"icon-doc-ppt",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{ext:"XLSX",msgType:"document",icon:"icon-doc-xls",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"audio/aac":{msgType:"audio",ext:"AAC"},"audio/mp4":{msgType:"audio"},"audio/amr":{msgType:"audio"},"audio/mpeg":{msgType:"audio"},"audio/ogg; codecs=opus":{msgType:"audio",ext:"OGG"},"audio/wav":{msgType:"audio",ext:"wav"},"video/mp4":{msgType:"video",ext:"MP4"},"video/3gpp":{msgType:"video"},"image/jpeg":{msgType:"image"},"image/png":{msgType:"image"}},p=d;t.MIMETYPES=p;const f=(0,i.default)(p,(e=>"document"===(null==e?void 0:e.msgType)));t.DOCUMENT_MIMETYPES=f;t.DOC_MIMES="*";t.IMAGE_MIMES="image/*";t.VIDEO_MIMES="video/mp4,video/3gpp,video/quicktime";t.AUDIO_MIMES="audio/wav,audio/mp3,audio/ogg,audio/aac,audio/mpeg";const _=(0,a.default)();t.EXT_TO_MIME=_;const g=(0,i.default)(d,(e=>"document"===(null==e?void 0:e.msgType)&&!0===e.canSend&&null!=e.ext))},71276:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{const t=null!=e&&""!==e?JSON.parse(e):o.default,n={};return a(t,n,"",""),n}catch(e){return null}};var i=n(25303),o=r(n(87622));function a(e,t,n,r){let o=e;if(Array.isArray(o)||(0,i.isString)(o)){(0,i.isString)(o)&&(o=[o]);for(let e=0;e<o.length;e++){const a=o[e];(0,i.isString)(a)&&(t[a]=r+n)}}else if("object"==typeof o)for(const e in o)a(o[e],t,e,r+n)}},22940:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_TYPE_VALUES=t.MEDIA_TYPES=void 0,t.castToV4=function(e){let t;if(null==e)t=u.DOCUMENT;else{if(!(e in u))throw(0,l.default)(`castToV4: unexpected mmsv3 type ${e}`);t=u[e]}return t},t.getMsgMediaType=function(e){return d({type:e.type,interactiveHeader:e.interactiveHeader,isGif:e.type===s.MSG_TYPE.VIDEO&&e.isGif,isNewsletter:(0,a.getIsNewsletterMsg)(e)})},t.msgToMediaType=d;var i=r(n(52628)),o=n(2576),a=n(26368),s=n(73602),l=r(n(89482));const u=Object.freeze({AUDIO:"audio",DOCUMENT:"document",GIF:"gif",IMAGE:"image",NATIVE_FLOW:"native_flow",PPIC:"ppic",PRODUCT:"product",PTT:"ptt",STICKER:"sticker",VIDEO:"video",PTV:"ptv",TEMPLATE:"template",THUMBNAIL_DOCUMENT:"thumbnail-document",THUMBNAIL_IMAGE:"thumbnail-image",THUMBNAIL_VIDEO:"thumbnail-video",THUMBNAIL_LINK:"thumbnail-link",HISTORY_SYNC:"md-msg-hist",MD_APP_STATE:"md-app-state",PRODUCT_CATALOG_IMAGE:"product-catalog-image",PAYMENT_BG_IMAGE:"payment-bg-image",BIZ_COVER_PHOTO:"biz-cover-photo",PREVIEW:"preview",NEWSLETTER_AUDIO:"newsletter-audio",NEWSLETTER_DOCUMENT:"newsletter-document",NEWSLETTER_IMAGE:"newsletter-image",NEWSLETTER_GIF:"newsletter-gif",NEWSLETTER_PTT:"newsletter-ptt",NEWSLETTER_STICKER:"newsletter-sticker",NEWSLETTER_THUMBNAIL_LINK:"newsletter-thumbnail-link",NEWSLETTER_VIDEO:"newsletter-video"});t.MEDIA_TYPES=u;const c=(0,i.default)(u);function d(e){let{type:t,isGif:n,interactiveHeader:r,isNewsletter:i}=e;switch(t){case s.MSG_TYPE.IMAGE:return i?u.NEWSLETTER_IMAGE:u.IMAGE;case s.MSG_TYPE.VIDEO:return i?!0===n?u.NEWSLETTER_GIF:u.NEWSLETTER_VIDEO:!0===n?u.GIF:u.VIDEO;case s.MSG_TYPE.AUDIO:return i?u.NEWSLETTER_AUDIO:u.AUDIO;case s.MSG_TYPE.PTT:return i?u.NEWSLETTER_PTT:u.PTT;case s.MSG_TYPE.PTV:return u.PTV;case s.MSG_TYPE.DOCUMENT:return u.DOCUMENT;case s.MSG_TYPE.STICKER:return i?u.NEWSLETTER_STICKER:u.STICKER;case s.MSG_TYPE.PRODUCT:return u.PRODUCT;case s.MSG_TYPE.NATIVE_FLOW:return u.NATIVE_FLOW;case s.MSG_TYPE.INTERACTIVE:if(null!=(null==r?void 0:r.mediaType))switch(r.mediaType){case o.InteractiveMessageHeaderMediaType.DOCUMENT:return u.DOCUMENT;case o.InteractiveMessageHeaderMediaType.VIDEO:return u.VIDEO;case o.InteractiveMessageHeaderMediaType.IMAGE:return u.IMAGE}}throw(0,l.default)(`msg is not a media msg: ${t}, isGif=${String(n)}`)}t.MEDIA_TYPE_VALUES=c},78615:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptPartialMedia=t.decrypt=t.cleanupCiphertextAndIv=t.HMAC_SIZE=t.BLOCK_SIZE=void 0;var i=r(n(48926)),o=n(58358);t.BLOCK_SIZE=16;t.HMAC_SIZE=10;const a=function(){var e=(0,i.default)((function*(e){const{ciphertext:t,iv:n,mediaKeys:r}=e,{encKey:i}=r;try{const e=yield self.crypto.subtle.importKey("raw",new Uint8Array(i),"AES-CBC",!1,["decrypt"]).catch((e=>{throw __LOG__(2)`decryptPartialMedia:decrypt importKey error: ${String(e)}`,e}));return self.crypto.subtle.decrypt({name:"AES-CBC",iv:n},e,t)}catch(e){throw __LOG__(2)`decryptPartialMedia:decrypt decrypt error: ${String(e)}`,e}}));return function(){return e.apply(this,arguments)}}();t.decrypt=a;const s=function(){var e=(0,i.default)((function*(e){const{ciphertext:t,mediaKeys:n}=e,{encKey:r}=n,i={name:"AES-CBC",iv:(t instanceof Uint8Array?t:new Uint8Array(t)).slice(-16)};try{const e=yield self.crypto.subtle.importKey("raw",new Uint8Array(r),"AES-CBC",!1,["encrypt"]).catch((e=>{__LOG__(2)`decryptPartialMedia:getEncryptedPadding importKey error: ${String(e)}`})),t=new Uint8Array([]);return self.crypto.subtle.encrypt(i,e,t)}catch(e){return void __LOG__(2)`decryptPartialMedia:getEncryptedPadding encrypt error: ${String(e)}`}}));return function(){return e.apply(this,arguments)}}(),l=e=>{const{serverRangeStart:t,ciphertext:n,mediaKeys:r}=e;let i=n instanceof Uint8Array?n:new Uint8Array(n);const a=i.byteLength%16==0;let l;return 0===t?l=new Uint8Array(r.iv):(l=i.slice(0,16),i=i.slice(16)),a||(i=i.slice(0,i.byteLength-10)),a?s({ciphertext:i,mediaKeys:r}).then((e=>(i=(0,o.concatTypedArrays)(Uint8Array,[i,new Uint8Array(e)]),{ciphertext:i,iv:l}))):Promise.resolve({ciphertext:i,iv:l})};t.cleanupCiphertextAndIv=l;const u=function(){var e=(0,i.default)((function*(e){let{mediaKeys:t,ciphertext:n}=e;const{ciphertext:r,iv:i}=yield l({serverRangeStart:0,ciphertext:n,mediaKeys:t});return a({ciphertext:r,iv:i,mediaKeys:t})}));return function(){return e.apply(this,arguments)}}();t.decryptPartialMedia=u},82150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMediaCryptoExpectedForChat=function(e){if(e.isNewsletter)return!1;return!0},t.isMediaCryptoExpectedForMediaType=function(e){if(a(e))return!1;return!0},t.isMediaCryptoExpectedForMsg=function(e){if((0,i.getIsNewsletterMsg)(e))return!1;return!0},t.isRmrSupportedForMediaType=function(e){if(a(e))return!1;return!0};var r=n(22940),i=n(26368);const o=new Set([r.MEDIA_TYPES.NEWSLETTER_AUDIO,r.MEDIA_TYPES.NEWSLETTER_DOCUMENT,r.MEDIA_TYPES.NEWSLETTER_GIF,r.MEDIA_TYPES.NEWSLETTER_IMAGE,r.MEDIA_TYPES.NEWSLETTER_PTT,r.MEDIA_TYPES.NEWSLETTER_STICKER,r.MEDIA_TYPES.NEWSLETTER_THUMBNAIL_LINK,r.MEDIA_TYPES.NEWSLETTER_VIDEO]);function a(e){return o.has(e)}},47656:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMirror=void 0,t.genBitMask=function(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[`change:${t[r]}`],o=Math.floor(i/32);a(n,o+1),n[o]|=1<<i%32}return n},t.genMirrorMask=function(e){const t={};let n=0;const r=e=>{t[`change:${e}`]=n++};e.props&&Object.keys(e.props).forEach(r);e.session&&Object.keys(e.session).forEach(r);e.derived&&Object.keys(e.derived).forEach(r);return t};var i=r(n(4788));function o(e,t){e[t]=e[e.length-1],e.pop()}function a(e,t){if(t<=e.length)return;const n=t-e.length;for(let t=0;t<n;t++)e.push(0)}t.BaseMirror=class{constructor(e){this.state=e}destructor(){this.state.off("all",this.onGatherEvent,this)}initListener(){this.state.on("all",this.onGatherEvent,this),this.masks=[],this.listeners=[],this.changeEvents=[]}onGatherEvent(e){if("change"===e){if(!this.changeEvents.filter(Boolean).length)return;this.onChange(),this.changeEvents=[]}else{const t=this.state.mirrorMask[e];if(void 0===t)return;const n=t/32|0;a(this.changeEvents,n+1),this.changeEvents[n]|=1<<(t%32|0)}}onChange(){if(null==this.listeners)return;const e=this.state,t=this.changeEvents;(0,i.default)(this.masks,this.listeners).forEach((n=>{let[r,i]=n;const o=Math.min(t.length,r.length);for(let n=0;n<o;n++)if(t[n]&r[n]){const[t,n]=i;null!=t&&null!=n&&t(n,e);break}}))}addListener(e,t,n){var r;this.listeners||this.initListener(),this.masks.push(t),null===(r=this.listeners)||void 0===r||r.push([e,n])}removeListener(e){const t=this.listeners;if(null!=t)for(let n=0;n<t.length;n++)t[n][0]===e&&(t[n][0]=null,t[n][1]=null,o(this.masks,n),o(t,n))}}},43175:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=void 0,Object.defineProperty(t,"collection",{enumerable:!0,get:function(){return _.collection}}),t.defineModel=function(e){const t=(0,_.convert)(e),n=(0,_.stateExtend)(m,t);if(e.Proxy){const r=(0,c.genMirrorMask)(t);n.prototype.mirrorMask=r,n.prototype.proxyName=e.Proxy,(0,g.ProxyStateFactory)(e.Proxy,t,r)}return n},Object.defineProperty(t,"derived",{enumerable:!0,get:function(){return _.derived}}),Object.defineProperty(t,"getter",{enumerable:!0,get:function(){return _.getter}}),Object.defineProperty(t,"prop",{enumerable:!0,get:function(){return _.prop}}),Object.defineProperty(t,"session",{enumerable:!0,get:function(){return _.session}});var i=r(n(81109)),o=r(n(7287)),a=r(n(2525)),s=r(n(14176)),l=r(n(49619)),u=n(25303),c=n(47656),d=n(46316),p=r(n(7880)),f=r(n(91262)),_=n(24393),g=n(44446),h=r(n(89482));const A=/^change:/;class m extends p.default{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),this.stale=(0,_.session)(!1),this.revisionNumber=1,this.__fired=null,this.__changes=null,this.__initialized=!1,t._internalInitializationDoNotUse)return;this.stale=(null==e?void 0:e.stale)||!0===this.getDefault("stale"),this.parent=t.parent,this.collection=t.collection,this._initDeriveds(),this._initCollections();const n=this.__defaults,r=n?(0,i.default)((0,i.default)({},n),e):e;r&&!function(e){for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}(r)&&this.set(r,(0,i.default)({silent:!0},t)),this.initialize(),this.__initialized=!0}initialize(){if(this.collection&&this.id&&!this.collection.modelClass.prototype.isIdType(this.id))throw(0,h.default)(`Model id:${String(this.id)} is wrong type`);this._uiObservers=0,this.mirrorMask&&(this.mirror=new c.BaseMirror(this))}_refreshStaleModel(){if(this._uiObservers||!this.stale){if(!this.getCollection)throw(0,h.default)("base_model:_refreshStaleModel getCollection does not exist");this.getCollection().find(this.id)}}incObservers(e){if(this._uiObservers++,e)return;(0,f.default)(n(69353)).online&&this.stale&&(d.Cmd.uiBusy?this.listenToOnce(d.Cmd,"ui_idle",this._refreshStaleModel):this._refreshStaleModel())}decObservers(){this._uiObservers>0&&this._uiObservers--,0===this._uiObservers&&this.stopListening(d.Cmd,"ui_idle",this._refreshStaleModel)}hasObservers(){return this._uiObservers>0}getObservers_TEST_ONLY(){return null}addChild(e,t){const n={};n[e]=t,this.set(n,{silent:!0}),this.listenTo(t,"all",this._getCachedEventBubblingHandler(e))}get(e){return this[e]}set(e,t,n){var r;let i=n;return"string"==typeof e?this._set(e,t,i):(i=t,(null===(r=i)||void 0===r?void 0:r.merge)?this._set((0,s.default)(e,(e=>void 0===e)),i):this._set(e,i))}_markChange(e,t){this.__initialized&&(this._getChanges().push({key:e,oldValue:t}),this.__fired&&(this.__fired[e]=!1))}_set(e,t,n){this.revisionNumber++;const r=!!this.__changes,[i,o]=(0,u.isString)(e)?[{[e]:t},n]:[e,t],a=new Set;if(Object.keys(i).forEach((e=>{const t=this._setKV(e,i[e],o);null==t||t.forEach((e=>{a.add(e)}))})),a.size>0){const e=(0,l.default)(this._topo,"_topo unexpectedly undefined"),t=(0,l.default)(this._topoIndexMap,"this._topoIndexMap");for(let n=0;n<e.length;n++){const r=e[n];if(!a.has(r))continue;const i=this._setD(r);null==i||i.forEach((e=>{if((0,l.default)(t.get(e),"topoIndexMap.get(dirtyDer)")<n)throw(0,h.default)("Circular derived properties / event listeners");a.add(e)}))}}if(!(null==o?void 0:o.silent)&&this.hasUnfiredChanges()){const e=this.__fired={},t=this._getChanges(),n=t.length>0;for(;t.length;){const{key:n,oldValue:r}=t.shift();if(!e[n]){e[n]=!0;const t=this._definition[n].evt;if(this.isListening(t)||this.isListening("all")){const e=this[n];this.trigger(t,this,e,r)}}}(n&&this.isListening("change")||this.isListening("all"))&&this.trigger("change",this)}return r||(this.__changes&&(this.__changes=null),this.__fired&&(this.__fired=null)),this}_setKV(e,t,n){var r;if(this._collections[e])return void this[e].set(t,n);const i=this._definition[e];if(!i)return void(this[e]=t);if(i.attr===_.Attr.DERIVED)throw(0,h.default)(`Attempting to directly set derived property: ${e}`);const o=i.sk,a=this[e];return t!==a?(this[o]=t,this._markChange(e,a),null===(r=this._deps)||void 0===r?void 0:r[e]):void 0}_setD(e){var t;const n=this._definition[e],r=n.sk,i=n.fn.call(this),o=this[r];if(i!==o)return this[r]=i,this._markChange(e,o),null===(t=this._deps)||void 0===t?void 0:t[e]}hasUnfiredChanges(){const e=this.__fired,t=this.__changes;if(!t)return!1;if(!e)return!0;for(let n=0;n<t.length;n++)if(!e[t[n].key])return!0;return!1}_getChanges(){return this.__changes||(this.__changes=[])}_initDeriveds(){this.__derived.forEach((e=>{this[this._definition[e].sk]=_.INIT}))}_initCollections(){(0,a.default)(this._collections,((e,t)=>{this[t]=new e(null,{parent:this})}))}unset(e,t){const n=Array.isArray(e)?e:[e];this.set((0,o.default)(n),t)}clear(){this.unset([...this.__props,...this.__session])}delete(){this.stopListening()}reset(){this.set(this.__defaults)}toJSON(){return this.serialize()}serialize(){const e={};for(let t=0;t<this.__props.length;t++)e[this.__props[t]]=this[this.__props[t]];return(0,a.default)(this._collections,((t,n)=>{e[n]=this[n].serialize()})),e}getDefault(e){const t=this._definition[e];if(!t)return;const n=t.defaultValue;return(0,u.isFunction)(n)?n():n}_getCachedEventBubblingHandler(e){return function(t,n,r){A.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],n,r):"change"===t&&this.trigger("change",this)}.bind(this)}static isIdType(e){return!(!this.allowedIds||!this.allowedIds.includes(e))||(this.idClass?e instanceof this.idClass:"string"==typeof e)}pp(){}}t.BaseModel=m},24393:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NO_DEFAULT_VALUE=t.INIT=t.Attr=void 0,t.collection=function(e){return{val:e,type:S}},t.convert=function(e){const t=new e({},{_internalInitializationDoNotUse:!0}),n={name:e.name||"Unknown",props:{},session:{},derived:{},collections:{},isIdType:e.isIdType};e.Collection&&(n.Collection=e.Collection);e.idClass&&(n.idClass=e.idClass);e.allowedIds&&(n.allowedIds=e.allowedIds);const r=new Set(["constructor"]),i=new Set(["collection","parent","revisionNumber","__changes","__fired","__initialized"]),o=new Map(b(t).filter((e=>{let[t,n]=e;return!i.has(t)&&(null==n?void 0:n.type)===y})).map((e=>{let[t,{fn:n}]=e;return[n,t]}))),u=(0,l.default)((e=>{var t;const n=(0,s.default)(null!==(t=e.dependencies)&&void 0!==t?t:[],(e=>{if(null!=e.dependencyKey)return[e.dependencyKey];const t=o.get(e);return null!=t?[t]:u(e)}));return Array.from(new Set(n))}));b(t).forEach((t=>{let[o,s]=t;if(!i.has(o)&&null!=s)switch(s.type){case A:n.props[o]=v(s);break;case m:n.session[o]=v(s);break;case E:n.derived[o]=(0,a.default)(s,"type"),r.add(s.fn.name);break;case y:{const e=s.fn;n.derived[o]={fn(){return e(this)},deps:u(e)},r.add(e.name);break}case S:n.collections[o]=s.val;break;default:throw(0,p.default)(`Invalid defineModel Class type for ${e.name}:${o}.`)}}));const c=function(e){const t={},n=Object.getPrototypeOf({});let r=e;Object.getOwnPropertyNames(r).forEach((e=>{"function"==typeof r[e]&&(t[e]=r[e])}));for(;(r=Object.getPrototypeOf(r))&&r!==n;)Object.getOwnPropertyNames(r).forEach((e=>{e in t||(t[e]=r[e])}));return t}(t);return r.forEach((e=>{delete c[e]})),Object.assign(n,c),n},t.derived=function(e,t){return{fn:e,deps:t,type:E}},t.getter=function(e){return{fn:e,type:y}},t.prop=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;const t={defaultValue:e,type:A};return t},t.session=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;const t={defaultValue:e,type:m};return t},t.stateExtend=function(e,t){const n=(0,c.default)(t.name,"protoDef.name");delete t.name;const r=function(e,t){return{[t]:class extends e{}}[t]}(e,n),s=r.prototype,l=s.__props=[],u=s.__session=[],d=s.__derived=[],h=s._collections={},A=s._definition={},m=s._derived={};(0,o.default)(t.props,(function(e,t){l.push(t),T(s,t,e,g.PROP)})),(0,o.default)(t.session,(function(e,t){u.push(t),T(s,t,e,g.SESSION)})),(0,o.default)(t.derived,(function(e,t){d.push(t),function(e,t,n){const r=I(t),i=n.fn;e._definition[t]=e._derived[t]={sk:r,evt:"change:"+t,attr:g.DERIVED,fn:i,deps:n.deps},Object.defineProperty(e,t,{get(){const e=this[r];if(e!==_)return e;const t=i.call(this);return this[r]=t,t},set(){throw new TypeError(`'${t}' is a derived property, it can't be set directly.`)}})}(s,t,e)})),(0,o.default)(t.collections,(function(e,t){h[t]=e})),Object.assign(s,(0,a.default)(t,["props","session","derived","collections"]));const E=l.concat(u),y=E.length;Object.defineProperties(s,{attributes:{get(){const e={};for(let t=0;t<y;++t)e[E[t]]=this[E[t]];return e}},isState:{get:()=>!0,set(){throw(0,p.default)("attempt to set isState")}}});const S={};for(let e=0;e<y;e++){const t=E[e];"defaultValue"in A[t]&&(S[t]=_)}(0,i.default)(S)||(s.__defaults=S);if(d.length){const e=[],t={},n={};(0,o.default)(m,((r,i)=>{n[i]=!0,(0,o.default)(r.deps,(r=>{n[r]=!0,(t[r]||(t[r]=[])).push(i),e.push([i,r])}))})),e.length&&(s._deps=t,s._topo=f.default.array(Object.keys(n),e).reverse(),s._topoIndexMap=new Map(s._topo.map(((e,t)=>[e,t]))))}return r};var i=r(n(41609)),o=r(n(2525)),a=r(n(57557)),s=r(n(94654)),l=r(n(88306)),u=r(n(13218)),c=r(n(49619)),d=n(25303),p=r(n(89482)),f=r(n(94633));const _={sentinel:"DEFAULT VALUE PLACEHOLDER"};t.INIT=_;const g={PROP:"PROP",SESSION:"SESSION",DERIVED:"DERIVED"};t.Attr=g;const h=Symbol("NO_DEFAULT_VALUE");t.NO_DEFAULT_VALUE=h;const A="Props",m="Session",E="Derived",y="Getter",S="Collection";function v(e){const t=e.defaultValue;return t===h?{}:{defaultValue:t}}function I(e){return"__x_"+e}function T(e,t,n,r){if(!(0,u.default)(n))throw(0,p.default)("Invalid Prop/Session definition.");const i={sk:I(t),evt:`change:${t}`,attr:r};void 0!==n.defaultValue&&(i.defaultValue=n.defaultValue),e._definition[t]=i;const o=(0,d.isFunction)(i.defaultValue);if(null!=i.defaultValue&&!o){if(Array.isArray(i.defaultValue))throw(0,p.default)("Do not return mutable types as default values as they are shared. Type: Array provided.");if((0,u.default)(i.defaultValue))throw(0,p.default)("Do not return mutable types as default values as they are shared. Type: Object provided.")}const a=i.sk;Object.defineProperty(e,t,{set(e){this.set(t,e)},get(){const e=this[a];return e!==_?e:o?this[a]=i.defaultValue():i.defaultValue}})}function b(e){const t=[];for(const n in e)"function"!=typeof e[n]&&t.push([n,e[n]]);return t}},44446:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyStates=t.ProxyStateFactory=t.DuplicatedProxyProperty=void 0;var i=r(n(6479)),o=n(66911);const a=["props","session","collections","derived"];class s extends((0,o.customError)("DuplicatedProxyProperty")){}t.DuplicatedProxyProperty=s;const l={};t.ProxyStates=l;t.ProxyStateFactory=(e,t,n)=>{const{props:r,session:o,collections:u,derived:c}=t,d=(0,i.default)(t,a),p=function(e){this.$ProxyState$state=e},f={};if([r,o,u,c].forEach((t=>{t&&Object.keys(t).forEach((t=>{f[t]={get(){return __LOG__(3)`Cannot read proxy property "${e}.${t}" created in <${this.$ProxyState$ComponentName}/>. Make sure it is in your list of concerns.`,this.$ProxyState$state[t]},set(n){__LOG__(4,void 0,new Error,!0)`Cannot write proxy property "${e}.${t}" created in <${this.$ProxyState$ComponentName}/>. Make sure it is in your list of concerns.`,SEND_LOGS("Invalid ProxyState Write"),this.$ProxyState$state[t]=n}}}))})),f.proxyName={value:e},f.mirrorMask={value:n},["set","get",...Object.keys(d)].forEach((e=>{f[e]={value(){const t=this.$ProxyState$state;return t[e].apply(t,arguments)}}})),(p.prototype=Object.create(null,f)).constructor=p,e in l)throw new s(`Duplicated proxy property "${e}".`);l[e]=p}},20992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unproxy=function(e){if(null==e?void 0:e.$ProxyState$state)return e.$ProxyState$state;return e}},24992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventType=void 0,t.isFutureproofMsg=function(e){return e===r.MSG_TYPE.UNKNOWN},t.isNotificationType=function(e,t){switch(e){case r.MSG_TYPE.GP2:case r.MSG_TYPE.BROADCAST_NOTIFICATION:case r.MSG_TYPE.NOTIFICATION:case r.MSG_TYPE.NOTIFICATION_TEMPLATE:case r.MSG_TYPE.E2E_NOTIFICATION:case r.MSG_TYPE.CALL_LOG:case r.MSG_TYPE.PINNED_MESSAGE:case r.MSG_TYPE.NEWSLETTER_NOTIFICATION:return!0;case r.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===t||"share_phone_number"===t;default:return!1}},t.isPlaceholderMsg=function(e){return e===r.MSG_TYPE.CIPHERTEXT||e===r.MSG_TYPE.DEBUG_PLACEHOLDER},t.logUndefinedMessage=function(e){e.forEach((e=>{void 0===e.type&&(__LOG__(4,void 0,new Error,!0)`undefined message type msgId::${e.id}`,SEND_LOGS("undefined-msg-type",.01))}))};var r=n(73602);const i=n(76672)({DEFAULT:"d",SIGNIFICANT:"s",AMBIENT:"a",NOTEWORTHY:"n",IGNORE:"i"});t.EventType=i},25882:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.msgDataFromMsgModel=function e(t){const n=t.toJSON();return(0,i.default)((0,i.default)({},n),{},{paymentNoteMsg:n.paymentNoteMsg?e(n.paymentNoteMsg):void 0})};var i=r(n(81109))},70760:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypeFromMsgType=function(e){const t=e.type,n=e.subtype;let r;r=t===p.MSG_TYPE.GP2?"subject"===n?c.EventType.NOTEWORTHY:"add"===n||"invite"===n||"invite_auto_add"===n||"linked_group_join"===n||"community_invite_auto_add_rich"===n?e.recipients&&(0,f.isMePrimary)(e.recipients[0])?c.EventType.SIGNIFICANT:c.EventType.IGNORE:"linked_group_promote"===n||"linked_group_demote"===n?_.default.isGroup(e.id.remote)&&e.recipients&&(0,f.isMePrimary)(e.recipients[0])&&!(0,f.isMeAccount)(e.author)?c.EventType.SIGNIFICANT:c.EventType.IGNORE:"remove"===n?e.recipients&&(0,f.isMePrimary)(e.recipients[0])?c.EventType.NOTEWORTHY:c.EventType.IGNORE:"create"===n||"empty_subgroup_create"===n||"general_chat_add"===n?c.EventType.NOTEWORTHY:"created_subgroup_suggestion"===n?c.EventType.DEFAULT:"parent_group_link"===n||"auto_add"===n||"default_sub_group_admin_add"===n||"community_participant_add_rich"===n||"subgroup_admin_triggered_auto_add"===n||"subgroup_admin_triggered_invite_auto_add"===n||"sibling_group_link"===n||"community_invite_rich"===n||"sub_group_participant_add_rich"===n||"sub_group_invite_rich"===n||"community_link_parent_group_rich"===n?c.EventType.SIGNIFICANT:"membership_approval_request"===n||"created_membership_requests"===n||"sibling_group_unlink"===n?c.EventType.NOTEWORTHY:c.EventType.IGNORE:t===p.MSG_TYPE.BROADCAST_NOTIFICATION||t===p.MSG_TYPE.NOTIFICATION||t===p.MSG_TYPE.E2E_NOTIFICATION?"create"===n?c.EventType.NOTEWORTHY:c.EventType.IGNORE:t===p.MSG_TYPE.GROUPS_V4_INVITE&&(0,f.isMePrimary)(e.from)?c.EventType.IGNORE:t===p.MSG_TYPE.CALL_LOG?c.EventType.NOTEWORTHY:e.broadcast?_.default.isBroadcast(e.id.remote)?c.EventType.NOTEWORTHY:c.EventType.IGNORE:t===p.MSG_TYPE.REVOKED?c.EventType.IGNORE:_.default.isPSA(e.id.remote)?e.ack===s.ACK.RECEIVED?c.EventType.DEFAULT:c.EventType.AMBIENT:t===p.MSG_TYPE.CIPHERTEXT||t===p.MSG_TYPE.OVERSIZED?c.EventType.AMBIENT:t===p.MSG_TYPE.NOTIFICATION_TEMPLATE?"sender_invite"===n||("chat_assignment"===n||"chat_assignment_unassign"===n)&&(0,l.shouldReorderChatOnAssignment)("chat_assignment_unassign"===n)?c.EventType.NOTEWORTHY:c.EventType.IGNORE:t===p.MSG_TYPE.PROTOCOL&&"ephemeral_setting"===n||t===p.MSG_TYPE.REACTION?c.EventType.IGNORE:c.EventType.DEFAULT;return r},t.genOutgoingMsgData=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(29987),s=n(77630),l=n(56660),u=n(42467),c=n(24992),d=r(n(60001)),p=n(73602),f=n(3885),_=r(n(27112)),g=n(51017);function h(){return(h=(0,i.default)((function*(e,t){var n;const r=e.id,i=(0,o.default)((0,f.getMaybeMeLidUser)(),"getMaybeMeLidUser()");let l,c=e.id.isLid()?i:(0,f.getMaybeMeUser)();var p;e.isGroup?(c=!0===(null===(p=e.groupMetadata)||void 0===p?void 0:p.isLidAddressingMode)?i:(0,f.getMaybeMeUser)(),l=(0,g.toUserWid)(c)):e.id.isStatusV3()&&(l=(0,f.assertGetMeUser)());const _=new d.default({from:c,to:r,id:yield d.default.newId(),participant:l,selfDir:"out"}),h=null===(n=e.contact.businessProfile)||void 0===n?void 0:n.automatedType;let A;if(h)switch(h){case u.BizBotAutomatedType.PARTIAL_1P:A=u.BizBotType.BIZ_1P;break;case u.BizBotAutomatedType.FULL_3P:A=u.BizBotType.BIZ_3P;break;case u.BizBotAutomatedType.UNKNOWN:A=null}return{id:_,from:(0,o.default)(c,"from"),to:r,type:t,t:(0,a.unixTime)(),isNewMsg:!0,local:!0,ack:s.ACK.CLOCK,bizBotType:A}}))).apply(this,arguments)}},59024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARSED_PROTOCOL_MESSAGE_TYPE=void 0;const n=Object.freeze({HISTORY:"history",APP_STATE_SYNC_KEY_SHARE:"appStateSyncKeyShare",APP_STATE_SYNC_KEY_REQUEST:"appStateSyncKeyRequest",PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:"peerDataOperationRequestResponseMessage",PEER_DATA_OPERATION_REQUEST_MESSAGE:"peerDataOperationRequestMessage"});t.PARSED_PROTOCOL_MESSAGE_TYPE=n},93828:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getInteractiveWamType=m,t.getMessageTypeFromMsgInfoType=function(e){switch(e){case"chat":return h.MESSAGE_TYPE.INDIVIDUAL;case"group":return h.MESSAGE_TYPE.GROUP;case"peer_broadcast":case"other_broadcast":return h.MESSAGE_TYPE.BROADCAST;case"direct_peer_status":case"other_status":return h.MESSAGE_TYPE.STATUS}},t.getWamAgentEngagementType=function(e){if(e.id.remote.isBot())return d.AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT;const t=(0,l.getIsBotQuery)(e),n=(0,l.getIsMetaBotResponse)(e);if(t||n)return d.AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED;return null},t.getWamBotType=function(e,t,n){if(null==e?void 0:e.isBot())return p.BOT_TYPE.METABOT;if(t){if(t===o.BizBotType.BIZ_1P)return p.BOT_TYPE.BOT_1P_BIZ;if(t===o.BizBotType.BIZ_3P)return p.BOT_TYPE.BOT_3P_BIZ}if(n){if(n===o.BizBotAutomatedType.PARTIAL_1P)return p.BOT_TYPE.BOT_1P_BIZ;if(n===o.BizBotAutomatedType.FULL_3P)return p.BOT_TYPE.BOT_3P_BIZ}return p.BOT_TYPE.UNKNOWN},t.getWamE2eSenderType=function(e){if(!(e instanceof A.default))return null;if((0,c.isMeAccount)(e))return e.isCompanion()?f.E2E_SENDER_TYPE.MY_COMPANION:f.E2E_SENDER_TYPE.MY_PRIMARY;return e.isCompanion()?f.E2E_SENDER_TYPE.OTHER_COMPANION:f.E2E_SENDER_TYPE.OTHER_PRIMARY},t.getWamInvisibleMessageCatgoryType=function(e){if(null==e||""===e)return null;switch(e){case a.CATEGORY_PEER:return _.INVISIBLE_MESSAGE_CATEGORY_TYPE.PEER;default:return null}},t.getWamMediaType=function(e){if(!0===e.isDynamicReplyButtonsMsg)return g.MEDIA_TYPE.BUTTON_MESSAGE;switch(e.type){case"image":return g.MEDIA_TYPE.PHOTO;case"video":return!0===e.isGif?g.MEDIA_TYPE.GIF:g.MEDIA_TYPE.VIDEO;case"ptv":return g.MEDIA_TYPE.PUSH_TO_VIDEO;case"audio":return g.MEDIA_TYPE.AUDIO;case"ptt":return g.MEDIA_TYPE.PTT;case"document":return g.MEDIA_TYPE.DOCUMENT;case"unknown":return g.MEDIA_TYPE.FUTURE;case"location":return!0===e.isLive?g.MEDIA_TYPE.LIVE_LOCATION:g.MEDIA_TYPE.LOCATION;case"vcard":return g.MEDIA_TYPE.CONTACT;case"multi_vcard":return g.MEDIA_TYPE.CONTACT_ARRAY;case"chat":return null!=e.matchedText?(0,i.matchCatalogUrl)(e.matchedText)?g.MEDIA_TYPE.CATALOG_LINK:(0,i.matchProductUrl)(e.matchedText)?g.MEDIA_TYPE.PRODUCT_LINK:g.MEDIA_TYPE.URL:g.MEDIA_TYPE.NONE;case"sticker":return g.MEDIA_TYPE.STICKER;case"product":return g.MEDIA_TYPE.PRODUCT_IMAGE;case"list":var t,n;switch(null!==(t=null===(n=e.list)||void 0===n?void 0:n.listType)&&void 0!==t?t:u.Message$ListMessage$ListType.UNKNOWN){case u.Message$ListMessage$ListType.SINGLE_SELECT:return g.MEDIA_TYPE.LIST;case u.Message$ListMessage$ListType.PRODUCT_LIST:return g.MEDIA_TYPE.PRODUCT_LIST;default:return g.MEDIA_TYPE.NONE}case"list_response":return g.MEDIA_TYPE.LIST_REPLY;case"buttons_response":return g.MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;case"order":return g.MEDIA_TYPE.ORDER;case"interactive":return m(e.interactiveType);case"reaction":case"reaction_enc":return g.MEDIA_TYPE.REACTION;case"poll_creation":return g.MEDIA_TYPE.POLL_CREATE;case"poll_update":return"poll_vote"===e.subtype?g.MEDIA_TYPE.POLL_VOTE:g.MEDIA_TYPE.NONE;case"keep_in_chat":return e.keepType===u.KeepType.KEEP_FOR_ALL?g.MEDIA_TYPE.KEEP:g.MEDIA_TYPE.UNKEEP;case"pin_message":return g.MEDIA_TYPE.PIN_IN_CHAT;case"protocol":return"ephemeral_sync_response"===e.subtype?g.MEDIA_TYPE.EPHEMERAL_SYNC_RESPONSE:g.MEDIA_TYPE.NONE;case"event_creation":return g.MEDIA_TYPE.EVENT_CREATE;case"event_response":return g.MEDIA_TYPE.EVENT_RESPOND;case"biz-cover-photo":case"broadcast_notification":case"call_log":case"ciphertext":case"debug_placeholder":case"debug":case"e2e_notification":case"gp2":case"groups_v4_invite":case"hsm":case"interactive_response":case"native_flow":case"newsletter_notification":case"notification":case"notification_template":case"oversized":case"payment":case"pinned_message":case"request_phone_number":case"revoked":case"status_v3":case"template_button_reply":case"comment":case"history_bundle":case"newsletter_admin_invite":case"biz_content_placeholder":case"event_edit_encrypted":return g.MEDIA_TYPE.NONE;default:return e.type,g.MEDIA_TYPE.NONE}},t.getWamMessageType=function(e){if((0,l.getIsStatusV3)(e))return h.MESSAGE_TYPE.STATUS;if((0,l.getIsGroupMsg)(e))return h.MESSAGE_TYPE.GROUP;if(A.default.isBroadcast(e.id.remote))return h.MESSAGE_TYPE.BROADCAST;if(A.default.isNewsletter(e.id.remote))return h.MESSAGE_TYPE.CHANNEL;return h.MESSAGE_TYPE.INDIVIDUAL};var i=n(42017),o=n(42467),a=n(33351),s=r(n(38090)),l=n(26368),u=n(77026),c=n(3885),d=n(2775),p=n(35347),f=n(92021),_=n(37325),g=n(76757),h=n(24771),A=r(n(27112));function m(e){if(null==e)return g.MEDIA_TYPE.NONE;switch(e){case s.default.SHOPS_STOREFRONT:return g.MEDIA_TYPE.SHOP_STOREFRONT;case s.default.NATIVE_FLOW:return g.MEDIA_TYPE.INTERACTIVE_NFM;case s.default.CAROUSEL:return g.MEDIA_TYPE.INTERACTIVE_CAROUSEL}}},14538:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.paramsJsonToOrderInfo=t.getOrderInfo=t.getCustomItemIdPrefix=void 0;var i=r(n(81109)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(21282)),a=r(n(718)),s=r(n(38090)),l=n(73602),u=r(n(9539));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e){var t;const n=null==e?void 0:e.value;if(null==n)return;const r=null!==(t=null==e?void 0:e.offset)&&void 0!==t?t:1;return parseFloat(null!=n?n:0)/parseInt(r,10)}const p=()=>"custom-item";t.getCustomItemIdPrefix=p;const f=(e,t)=>{var n,r;if("review_and_pay"!==e&&"payment_info"!==e||null==t)return null;const a=o.parse(t),{order:s,currency:l,reference_id:c,external_payment_configurations:p,payment_settings:f}=a,_=d(a.total_amount),g=null!==(n=null==s?void 0:s.items)&&void 0!==n?n:[],h=g.map((e=>{var t,n,r,i,o,a,s;return{id:null!==(t=null!==(n=null==e?void 0:e.product_id)&&void 0!==n?n:null==e?void 0:e.retailer_id)&&void 0!==t?t:"",name:null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"",amount:d(null==e?void 0:e.amount),quantity:parseInt(null!==(i=null==e?void 0:e.quantity)&&void 0!==i?i:0,10),isCustomItem:null!==(o=null==e?void 0:e.isCustomItem)&&void 0!==o?o:0===(null==e||null===(a=e.retailer_id)||void 0===a?void 0:a.indexOf("custom-item")),isQuantitySet:null===(s=null==e?void 0:e.isQuantitySet)||void 0===s||s}})),A=h.reduce(((e,t)=>e+t.quantity),0);let m=null===(r=g[0])||void 0===r?void 0:r.name;if("payment_info"===e&&1===(null==f?void 0:f.length)&&f[0].type===o.PaymentSettingType.PIX_STATIC_CODE){m=f[0][o.PaymentSettingType.PIX_STATIC_CODE].merchant_name}if(null==m||null==c||null==l||null==_)return null;const E=d(null==s?void 0:s.shipping),y=d(null==s?void 0:s.tax),S=d(null==s?void 0:s.discount),v=d(null==s?void 0:s.subtotal),I=function(e){return null==e?null:(0,u.default)(e.map((e=>null!=(null==e?void 0:e.type)?(0,i.default)({type:e.type},null!=e.payment_instruction?{paymentInstruction:e.payment_instruction}:{}):null)))}(p);return(0,i.default)((0,i.default)({title:m,referenceId:c,currency:l,quantity:A,shipping:E,tax:y,discount:S,subtotal:v,totalAmount:_,items:h,type:a.type},null!=I?{externalPaymentConfigurations:I}:{}),{},{paymentSettings:f,buttonName:e})};t.paramsJsonToOrderInfo=f;t.getOrderInfo=e=>{var t;if(e.nativeFlowName!==a.default.ORDER_DETAILS)return null;if(e.type===l.MSG_TYPE.INTERACTIVE&&e.interactiveType===s.default.NATIVE_FLOW&&(null===(t=e.interactivePayload)||void 0===t?void 0:t.buttons)){const{name:t,buttonParamsJson:n}=e.interactivePayload.buttons[0];return f(t,n)}if(e.type===l.MSG_TYPE.NATIVE_FLOW){var n;const{nativeFlowInfo:t}=(null!==(n=e.nativeFlowButtons)&&void 0!==n?n:[])[0];return f(null==t?void 0:t.name,null==t?void 0:t.paramsJson)}}},7554:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.paramsJsonToOrderPaymentInfo=t.getOrderPaymentStatusInfoFromNativeFlow=t.getOrderPaymentStatusInfo=t.getButtonNativeFlowFromInteractiveMsg=t.findLastOrderPaymentStatusInfo=t.OrderPaymentStatus=t.OrderPaymentMethod=t.OrderAcceptedPaymentMethods=t.MESSAGE_LOOKUP_OFFSET=void 0;var i=r(n(30988)),o=n(54468),a=r(n(38090)),s=n(73602);t.MESSAGE_LOOKUP_OFFSET=-1e3;const l=n(76672)({Pending:"pending",Captured:"captured"});t.OrderPaymentStatus=l;const u=n(76672)({Confirm:"confirm",PaymentInstruction:"payment_instruction"});t.OrderPaymentMethod=u;const c=n(76672)({CPI:"cpi",PIX:"pix"});t.OrderAcceptedPaymentMethods=c;const d=e=>{let t={};try{t=JSON.parse(e)}catch(e){return null}if(null==t)return null;const{reference_id:n,payment_method:r,payment_status:i}=t;return null==n||null==i&&null==r?null:{refId:n,paymentMethod:r,paymentStatus:i}};t.paramsJsonToOrderPaymentInfo=d;const p=e=>{var t;if(e.type===s.MSG_TYPE.INTERACTIVE&&e.interactiveType===a.default.NATIVE_FLOW&&(0,o.isOrderNativeFlow)(e.nativeFlowName)&&(null===(t=e.interactivePayload)||void 0===t?void 0:t.buttons)){const t=e.interactivePayload,{buttonParamsJson:n}=t.buttons[0];if(null!=n)return d(n)}return null};t.getOrderPaymentStatusInfo=p;const f=e=>{var t;return e.type===s.MSG_TYPE.INTERACTIVE&&e.interactiveType===a.default.NATIVE_FLOW&&(0,o.isOrderNativeFlow)(e.nativeFlowName)&&(null===(t=e.interactivePayload)||void 0===t?void 0:t.buttons)?e.interactivePayload.buttons[0]:null};t.getButtonNativeFlowFromInteractiveMsg=f;const _=e=>{const t=f(e);if(null==t)return null;const{name:n,buttonParamsJson:r}=t;return null!=n&&null!=r?d(r):null};t.getOrderPaymentStatusInfoFromNativeFlow=_;t.findLastOrderPaymentStatusInfo=(e,t)=>{const n=e.msgs.getModelsArray().slice(-1e3);let r=null;return null!=(0,i.default)(n,(e=>{var n;if(e.type===s.MSG_TYPE.UNKNOWN&&"phone_only_feature"===e.subtype&&null!=e.quotedMsg){if(r=p(e.quotedMsg),(null===(n=r)||void 0===n?void 0:n.refId)===t)return!0}else if(e.type===s.MSG_TYPE.INTERACTIVE&&e.interactiveType===a.default.NATIVE_FLOW&&(0,o.isOrderNativeFlow)(e.nativeFlowName)){var i;if(r=_(e),(null===(i=r)||void 0===i?void 0:i.refId)===t)return!0}return!1}))&&null!=r?r:null}},37954:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.paramsJsonToOrderStatusInfo=t.getOrderStatusInfo=t.getDefaultOrderStatus=t.findOrderStatusMessage=t.findOrderStatus=t.findOrderDetailsMessage=t.OrderStatus=void 0;var i=r(n(30988)),o=n(56660),a=n(54468),s=r(n(718)),l=r(n(38090)),u=n(73602),c=n(14538);const d=n(76672)({Pending:"pending",Processing:"processing",PartiallyShipped:"partially_shipped",Shipped:"shipped",Complete:"completed",Canceled:"canceled",PaymentRequested:"payment_requested",PreparingToShip:"preparing_to_ship",Delivered:"delivered"});t.OrderStatus=d;const p=e=>{if(null==e)return null;try{const{order:t,reference_id:n}=JSON.parse(e),r=d.cast(null==t?void 0:t.status);return null==r||null==n?null:{refId:n,status:r}}catch(e){return null}};t.paramsJsonToOrderStatusInfo=p;const f=e=>{var t;if(!(0,a.isOrderNativeFlow)(e.nativeFlowName))return null;if(e.type===u.MSG_TYPE.INTERACTIVE&&e.interactiveType===l.default.NATIVE_FLOW&&(null===(t=e.interactivePayload)||void 0===t?void 0:t.buttons)){const{buttonParamsJson:t}=e.interactivePayload.buttons[0];return p(t)}if(e.type===u.MSG_TYPE.NATIVE_FLOW){var n;const{nativeFlowInfo:t}=(null!==(n=e.nativeFlowButtons)&&void 0!==n?n:[])[0];return p(null==t?void 0:t.paramsJson)}};t.getOrderStatusInfo=f;t.findOrderDetailsMessage=(e,t)=>{var n;const r=e.msgs.getModelsArray().slice(-1e3);return null===(n=(0,i.default)(r,(e=>{var n;return e.nativeFlowName===s.default.ORDER_DETAILS&&(null===(n=(0,c.getOrderInfo)(e))||void 0===n?void 0:n.referenceId)===t})))||void 0===n?void 0:n.safe()};const _=(e,t)=>{var n;const r=e.msgs.getModelsArray().slice(-1e3);return null===(n=(0,i.default)(r,(e=>{var n;return(0,a.isOrderNativeFlow)(e.nativeFlowName)&&(null===(n=f(e))||void 0===n?void 0:n.refId)===t})))||void 0===n?void 0:n.safe()};t.findOrderStatusMessage=_;const g=()=>(0,o.isOrderStatusM1Enabled)()?d.PaymentRequested:d.Pending;t.getDefaultOrderStatus=g;t.findOrderStatus=(e,t)=>{var n;const r=_(e,t),i=null!=r?f(r):null;return null!==(n=null==i?void 0:i.status)&&void 0!==n?n:g()}},60001:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(65982),a=n(50790),s=r(n(95432)),l=n(3885),u=r(n(27112)),c=n(51017),d=r(n(89482));class p{constructor(e){let t=e;if(!t)throw(0,d.default)("MsgKey error: obj is null/undefined");t.id instanceof p&&(t=t.id,__LOG__(3)`MsgKey error: id is already a MsgKey`);const n=t.from&&t.to&&t.id,r=void 0!==t.fromMe&&t.remote&&t.id;let i,o,a,s,c,f,_;const g=(0,l.getMaybeMeUser)();if(!g)throw(0,d.default)("MsgKey error: me is undefined. Running tests? Call setupGlobalsForTests first.");if(n&&r)throw __LOG__(3)`Unclear constructor MsgKey: ${JSON.stringify(t)}`,(0,d.default)("MsgKey error: unclear which constructor to use");if(!n&&!r)throw __LOG__(3)`No matching constructor MsgKey: ${JSON.stringify(t)}`,(0,d.default)("MsgKey error: don't have a matching constructor");if(n){if(({from:i,to:o,id:a,participant:s,selfDir:c}=t),!(i instanceof u.default)||!(o instanceof u.default)||s&&!(s instanceof u.default))throw __LOG__(3)`Incorrect Wid MsgKey: from:${String(i)} to:${String(o)} p:${String(s)}`,(0,d.default)("MsgKey error: something is not a wid");const e=u.default.equals(i,o);c=e?c:void 0,e&&(0,l.isMePrimary)(i)?(f="out"===c,_=g):(0,l.isMePrimary)(i)?(f=!0,_=o):(0,l.isMePrimary)(o)?(f=!1,_=i):e&&(u.default.isGroup(i)||u.default.isBroadcast(i))?(f=!0,_=i):__LOG__(3)`MsgKey case error: ${[i,o,a,g].join()}`,void 0!==f&&(this.fromMe=f),_&&(this.remote=_),a&&(this.id=a)}else if(r){if(({fromMe:f,remote:_,id:a,participant:s}=t),!(_ instanceof u.default)||s&&!(s instanceof u.default))throw __LOG__(3)`Incorrect Wid MsgKey: remote:${String(_)} p:${String(s)}`,(0,d.default)("MsgKey error: something is not a wid");(0,l.isMePrimary)(_)&&(c=!0===f?"out":"in"),void 0!==f&&(this.fromMe=f),_&&(this.remote=_),a&&(this.id=a)}const h=[this.fromMe,this.remote,this.id];void 0!==c&&(this.self=c,h.push(this.self)),void 0!==s&&(this.participant=s,h.push(this.participant)),this._serialized=h.join("_")}toString(){return this._serialized}clone(){return new p({fromMe:this.fromMe,remote:this.remote,id:this.id,participant:this.participant})}equals(e){return e instanceof p&&this.toString()===e.toString()}static fromString(e){if(null==e)throw(0,d.default)("MsgKey.fromString error: str is null or not a string");return p.from(e)}static from(e){if(e instanceof p)return e;let t;return t="string"==typeof e?(0,s.default)(e):e,new p({fromMe:t.fromMe,remote:(0,c.createWidFromWidLike)(t.remote),id:t.id,participant:t.participant?(0,c.createWidFromWidLike)(t.participant):void 0})}static newId(){return(0,i.default)((function*(){try{return yield(0,a.getMsgKeyNewSHA256Id)()}catch(e){return __LOG__(4,void 0,new Error,!0)`getMsgKeyNewId: ${e.name}, message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("msg_key: error generating sha256 message key"),p.newId_DEPRECATED()}}))()}static newId_DEPRECATED(){return"3EB0"+(0,o.randomHex)(8)}}t.default=p},50790:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMsgKeyNewSHA256Id=t.genMsgKeyUint=void 0;var i=r(n(48926)),o=n(89323),a=n(65982),s=n(29987),l=n(3885);const u=()=>{const e=(0,s.unixTime)(),t=(0,l.getMeUser)().toString(),n=(0,a.parseHex)((0,a.randomHex)(16)),r=new o.Binary;return r.writeInt64(e),r.writeString(t),r.writeBuffer(n),r.readByteArray()};t.genMsgKeyUint=u;const c=function(){var e=(0,i.default)((function*(){const e=new Uint8Array(yield self.crypto.subtle.digest("SHA-256",u()),0,9);return"3EB0"+(0,a.toHex)(e)}));return function(){return e.apply(this,arguments)}}();t.getMsgKeyNewSHA256Id=c},97087:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isNoteToSelf=function(e){return e.fromMe&&(0,a.isMeAccount)(e.remote)},t.msgKeyToTargetInfo=function(e,t){const n=e.remote,r=function(e,t){if(e===i.TranslateMsgKeyType.Addon){return o.default.isCag(t)?(0,a.getMeLidUser)():(0,a.getMeUser)()}return(0,a.getMeUser)()}(t,n),s=e.fromMe?r:n,l=e.fromMe?n:r,u=n.isGroup()?e.participant:void 0;return{from:s,to:l,author:u}};var i=n(54468),o=r(n(27021)),a=n(3885)},95432:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!(0,i.isString)(e))throw(0,o.default)("MsgKey fromString error: str is null or not a string");const t=e.split("_");let n;t.length<3?__LOG__(3)`MsgKey error: cannot create MsgKey from ${e}`:4===t.length?"out"!==t[3]&&"in"!==t[3]&&(n=t[3]):5===t.length&&(n=t[4]);return{fromMe:"true"===t[0],remote:t[1],id:t[2],participant:n}};var i=n(25303),o=r(n(89482))},74665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMsgTypeRegistryLookup=function(e){const t=new Map;for(const r of e){var n;const{type:e}=r,i=null!==(n=r.subtype)&&void 0!==n?n:null;let o=t.get(e);null==o&&(o=new Map,t.set(e,o)),o.set(i,r)}return(e,n)=>{var r;return null===(r=t.get(e))||void 0===r?void 0:r.get(null!=n?n:null)}}},16242:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncActionValueSpec=t.SyncActionValue$WamoUserIdentifierActionSpec=t.SyncActionValue$UserStatusMuteActionSpec=t.SyncActionValue$UnarchiveChatsSettingSpec=t.SyncActionValue$TimeFormatActionSpec=t.SyncActionValue$SyncActionMessageSpec=t.SyncActionValue$SyncActionMessageRangeSpec=t.SyncActionValue$SubscriptionActionSpec=t.SyncActionValue$StickerActionSpec=t.SyncActionValue$StatusPrivacyActionSpec=t.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=t.SyncActionValue$StarActionSpec=t.SyncActionValue$SecurityNotificationSettingSpec=t.SyncActionValue$RemoveRecentStickerActionSpec=t.SyncActionValue$RecentEmojiWeightsActionSpec=t.SyncActionValue$QuickReplyActionSpec=t.SyncActionValue$PushNameSettingSpec=t.SyncActionValue$PrivacySettingRelayAllCallsSpec=t.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=t.SyncActionValue$PrimaryVersionActionSpec=t.SyncActionValue$PrimaryFeatureSpec=t.SyncActionValue$PnForLidChatActionSpec=t.SyncActionValue$PinActionSpec=t.SyncActionValue$PaymentInfoActionSpec=t.SyncActionValue$NuxActionSpec=t.SyncActionValue$NoteEditActionSpec=t.SyncActionValue$NoteEditAction$NoteType=t.SyncActionValue$MuteActionSpec=t.SyncActionValue$MarketingMessageBroadcastActionSpec=t.SyncActionValue$MarketingMessageActionSpec=t.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=t.SyncActionValue$MarkChatAsReadActionSpec=t.SyncActionValue$LockChatActionSpec=t.SyncActionValue$LocaleSettingSpec=t.SyncActionValue$LabelReorderingActionSpec=t.SyncActionValue$LabelEditActionSpec=t.SyncActionValue$LabelAssociationActionSpec=t.SyncActionValue$KeyExpirationSpec=t.SyncActionValue$ExternalWebBetaActionSpec=t.SyncActionValue$DeleteMessageForMeActionSpec=t.SyncActionValue$DeleteIndividualCallLogActionSpec=t.SyncActionValue$DeleteChatActionSpec=t.SyncActionValue$CustomPaymentMethodsActionSpec=t.SyncActionValue$CustomPaymentMethodSpec=t.SyncActionValue$CustomPaymentMethodMetadataSpec=t.SyncActionValue$ContactActionSpec=t.SyncActionValue$ClearChatActionSpec=t.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=t.SyncActionValue$ChatAssignmentActionSpec=t.SyncActionValue$CallLogActionSpec=t.SyncActionValue$BotWelcomeRequestActionSpec=t.SyncActionValue$ArchiveChatActionSpec=t.SyncActionValue$AndroidUnsupportedActionsSpec=t.SyncActionValue$AgentActionSpec=t.SyncActionDataSpec=t.RecentEmojiWeightSpec=t.PatchDebugDataSpec=t.PatchDebugData$Platform=t.CallLogRecordSpec=t.CallLogRecord$SilenceReason=t.CallLogRecord$ParticipantInfoSpec=t.CallLogRecord$CallType=t.CallLogRecord$CallResult=void 0;var r=n(91451),i=n(82121),o=n(86055),a=n(17059);const s=n(76672)({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});t.CallLogRecord$CallType=s;const l=n(76672)({NONE:0,SCHEDULED:1,PRIVACY:2,LIGHTWEIGHT:3});t.CallLogRecord$SilenceReason=l;const u=n(76672)({CONNECTED:0,REJECTED:1,CANCELLED:2,ACCEPTEDELSEWHERE:3,MISSED:4,INVALID:5,UNAVAILABLE:6,UPCOMING:7,FAILED:8,ABANDONED:9,ONGOING:10});t.CallLogRecord$CallResult=u;const c=n(76672)({UNSTRUCTURED:1,STRUCTURED:2});t.SyncActionValue$NoteEditAction$NoteType=c;const d=n(76672)({ALLOW_LIST:0,DENY_LIST:1,CONTACTS:2});t.SyncActionValue$StatusPrivacyAction$StatusDistributionMode=d;const p=n(76672)({PERSONALIZED:0});t.SyncActionValue$MarketingMessageAction$MarketingMessagePrototypeType=p;const f=n(76672)({ANDROID:0,SMBA:1,IPHONE:2,SMBI:3,WEB:4,UWP:5,DARWIN:6});t.PatchDebugData$Platform=f;const _={};t.RecentEmojiWeightSpec=_;const g={};t.CallLogRecordSpec=g;const h={};t.CallLogRecord$ParticipantInfoSpec=h;const A={};t.SyncActionValueSpec=A;const m={};t.SyncActionValue$NoteEditActionSpec=m;const E={};t.SyncActionValue$PrivacySettingDisableLinkPreviewsActionSpec=E;const y={};t.SyncActionValue$WamoUserIdentifierActionSpec=y;const S={};t.SyncActionValue$LockChatActionSpec=S;const v={};t.SyncActionValue$CustomPaymentMethodsActionSpec=v;const I={};t.SyncActionValue$CustomPaymentMethodSpec=I;const T={};t.SyncActionValue$CustomPaymentMethodMetadataSpec=T;const b={};t.SyncActionValue$PaymentInfoActionSpec=b;const M={};t.SyncActionValue$LabelReorderingActionSpec=M;const P={};t.SyncActionValue$DeleteIndividualCallLogActionSpec=P;const C={};t.SyncActionValue$BotWelcomeRequestActionSpec=C;const O={};t.SyncActionValue$StatusPrivacyActionSpec=O;const R={};t.SyncActionValue$CallLogActionSpec=R;const N={};t.SyncActionValue$PrivacySettingRelayAllCallsSpec=N;const w={};t.SyncActionValue$ExternalWebBetaActionSpec=w;const D={};t.SyncActionValue$MarketingMessageBroadcastActionSpec=D;const L={};t.SyncActionValue$MarketingMessageActionSpec=L;const B={};t.SyncActionValue$PnForLidChatActionSpec=B;const k={};t.SyncActionValue$ChatAssignmentOpenedStatusActionSpec=k;const G={};t.SyncActionValue$ChatAssignmentActionSpec=G;const U={};t.SyncActionValue$StickerActionSpec=U;const x={};t.SyncActionValue$RemoveRecentStickerActionSpec=x;const F={};t.SyncActionValue$PrimaryVersionActionSpec=F;const K={};t.SyncActionValue$NuxActionSpec=K;const Y={};t.SyncActionValue$TimeFormatActionSpec=Y;const j={};t.SyncActionValue$UserStatusMuteActionSpec=j;const V={};t.SyncActionValue$SubscriptionActionSpec=V;const W={};t.SyncActionValue$AgentActionSpec=W;const H={};t.SyncActionValue$AndroidUnsupportedActionsSpec=H;const Q={};t.SyncActionValue$PrimaryFeatureSpec=Q;const $={};t.SyncActionValue$KeyExpirationSpec=$;const q={};t.SyncActionValue$SyncActionMessageSpec=q;const J={};t.SyncActionValue$SyncActionMessageRangeSpec=J;const z={};t.SyncActionValue$UnarchiveChatsSettingSpec=z;const X={};t.SyncActionValue$DeleteChatActionSpec=X;const Z={};t.SyncActionValue$ClearChatActionSpec=Z;const ee={};t.SyncActionValue$MarkChatAsReadActionSpec=ee;const te={};t.SyncActionValue$DeleteMessageForMeActionSpec=te;const ne={};t.SyncActionValue$ArchiveChatActionSpec=ne;const re={};t.SyncActionValue$RecentEmojiWeightsActionSpec=re;const ie={};t.SyncActionValue$LabelEditActionSpec=ie;const oe={};t.SyncActionValue$LabelAssociationActionSpec=oe;const ae={};t.SyncActionValue$QuickReplyActionSpec=ae;const se={};t.SyncActionValue$LocaleSettingSpec=se;const le={};t.SyncActionValue$PushNameSettingSpec=le;const ue={};t.SyncActionValue$SecurityNotificationSettingSpec=ue;const ce={};t.SyncActionValue$PinActionSpec=ce;const de={};t.SyncActionValue$MuteActionSpec=de;const pe={};t.SyncActionValue$ContactActionSpec=pe;const fe={};t.SyncActionValue$StarActionSpec=fe;const _e={};t.SyncActionDataSpec=_e;const ge={};t.PatchDebugDataSpec=ge,_.internalSpec={emoji:[1,r.TYPES.STRING],weight:[2,r.TYPES.FLOAT]},g.internalSpec={callResult:[1,r.TYPES.ENUM,u],isDndMode:[2,r.TYPES.BOOL],silenceReason:[3,r.TYPES.ENUM,l],duration:[4,r.TYPES.INT64],startTime:[5,r.TYPES.INT64],isIncoming:[6,r.TYPES.BOOL],isVideo:[7,r.TYPES.BOOL],isCallLink:[8,r.TYPES.BOOL],callLinkToken:[9,r.TYPES.STRING],scheduledCallId:[10,r.TYPES.STRING],callId:[11,r.TYPES.STRING],callCreatorJid:[12,r.TYPES.STRING],groupJid:[13,r.TYPES.STRING],participants:[14,r.FLAGS.REPEATED|r.TYPES.MESSAGE,h],callType:[15,r.TYPES.ENUM,s]},h.internalSpec={userJid:[1,r.TYPES.STRING],callResult:[2,r.TYPES.ENUM,u]},A.internalSpec={timestamp:[1,r.TYPES.INT64],starAction:[2,r.TYPES.MESSAGE,fe],contactAction:[3,r.TYPES.MESSAGE,pe],muteAction:[4,r.TYPES.MESSAGE,de],pinAction:[5,r.TYPES.MESSAGE,ce],securityNotificationSetting:[6,r.TYPES.MESSAGE,ue],pushNameSetting:[7,r.TYPES.MESSAGE,le],quickReplyAction:[8,r.TYPES.MESSAGE,ae],recentEmojiWeightsAction:[11,r.TYPES.MESSAGE,re],labelEditAction:[14,r.TYPES.MESSAGE,ie],labelAssociationAction:[15,r.TYPES.MESSAGE,oe],localeSetting:[16,r.TYPES.MESSAGE,se],archiveChatAction:[17,r.TYPES.MESSAGE,ne],deleteMessageForMeAction:[18,r.TYPES.MESSAGE,te],keyExpiration:[19,r.TYPES.MESSAGE,$],markChatAsReadAction:[20,r.TYPES.MESSAGE,ee],clearChatAction:[21,r.TYPES.MESSAGE,Z],deleteChatAction:[22,r.TYPES.MESSAGE,X],unarchiveChatsSetting:[23,r.TYPES.MESSAGE,z],primaryFeature:[24,r.TYPES.MESSAGE,Q],androidUnsupportedActions:[26,r.TYPES.MESSAGE,H],agentAction:[27,r.TYPES.MESSAGE,W],subscriptionAction:[28,r.TYPES.MESSAGE,V],userStatusMuteAction:[29,r.TYPES.MESSAGE,j],timeFormatAction:[30,r.TYPES.MESSAGE,Y],nuxAction:[31,r.TYPES.MESSAGE,K],primaryVersionAction:[32,r.TYPES.MESSAGE,F],stickerAction:[33,r.TYPES.MESSAGE,U],removeRecentStickerAction:[34,r.TYPES.MESSAGE,x],chatAssignment:[35,r.TYPES.MESSAGE,G],chatAssignmentOpenedStatus:[36,r.TYPES.MESSAGE,k],pnForLidChatAction:[37,r.TYPES.MESSAGE,B],marketingMessageAction:[38,r.TYPES.MESSAGE,L],marketingMessageBroadcastAction:[39,r.TYPES.MESSAGE,D],externalWebBetaAction:[40,r.TYPES.MESSAGE,w],privacySettingRelayAllCalls:[41,r.TYPES.MESSAGE,N],callLogAction:[42,r.TYPES.MESSAGE,R],statusPrivacy:[44,r.TYPES.MESSAGE,O],botWelcomeRequestAction:[45,r.TYPES.MESSAGE,C],deleteIndividualCallLog:[46,r.TYPES.MESSAGE,P],labelReorderingAction:[47,r.TYPES.MESSAGE,M],paymentInfoAction:[48,r.TYPES.MESSAGE,b],customPaymentMethodsAction:[49,r.TYPES.MESSAGE,v],lockChatAction:[50,r.TYPES.MESSAGE,S],chatLockSettings:[51,r.TYPES.MESSAGE,i.ChatLockSettingsSpec],wamoUserIdentifierAction:[52,r.TYPES.MESSAGE,y],privacySettingDisableLinkPreviewsAction:[53,r.TYPES.MESSAGE,E],deviceCapabilities:[54,r.TYPES.MESSAGE,o.DeviceCapabilitiesSpec],noteEditAction:[55,r.TYPES.MESSAGE,m]},m.internalSpec={type:[1,r.TYPES.ENUM,c],chatJid:[2,r.TYPES.STRING],createdAt:[3,r.TYPES.INT64],deleted:[4,r.TYPES.BOOL],unstructuredContent:[5,r.TYPES.STRING]},E.internalSpec={isPreviewsDisabled:[1,r.TYPES.BOOL]},y.internalSpec={identifier:[1,r.TYPES.STRING]},S.internalSpec={locked:[1,r.TYPES.BOOL]},v.internalSpec={customPaymentMethods:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,I]},I.internalSpec={credentialId:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],country:[2,r.FLAGS.REQUIRED|r.TYPES.STRING],type:[3,r.FLAGS.REQUIRED|r.TYPES.STRING],metadata:[4,r.FLAGS.REPEATED|r.TYPES.MESSAGE,T]},T.internalSpec={key:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],value:[2,r.FLAGS.REQUIRED|r.TYPES.STRING]},b.internalSpec={cpi:[1,r.TYPES.STRING]},M.internalSpec={sortedLabelIds:[1,r.FLAGS.REPEATED|r.TYPES.INT32]},P.internalSpec={peerJid:[1,r.TYPES.STRING],isIncoming:[2,r.TYPES.BOOL]},C.internalSpec={isSent:[1,r.TYPES.BOOL]},O.internalSpec={mode:[1,r.TYPES.ENUM,d],userJid:[2,r.FLAGS.REPEATED|r.TYPES.STRING]},R.internalSpec={callLogRecord:[1,r.TYPES.MESSAGE,g]},N.internalSpec={isEnabled:[1,r.TYPES.BOOL]},w.internalSpec={isOptIn:[1,r.TYPES.BOOL]},D.internalSpec={repliedCount:[1,r.TYPES.INT32]},L.internalSpec={name:[1,r.TYPES.STRING],message:[2,r.TYPES.STRING],type:[3,r.TYPES.ENUM,p],createdAt:[4,r.TYPES.INT64],lastSentAt:[5,r.TYPES.INT64],isDeleted:[6,r.TYPES.BOOL],mediaId:[7,r.TYPES.STRING]},B.internalSpec={pnJid:[1,r.TYPES.STRING]},k.internalSpec={chatOpened:[1,r.TYPES.BOOL]},G.internalSpec={deviceAgentID:[1,r.TYPES.STRING]},U.internalSpec={url:[1,r.TYPES.STRING],fileEncSha256:[2,r.TYPES.BYTES],mediaKey:[3,r.TYPES.BYTES],mimetype:[4,r.TYPES.STRING],height:[5,r.TYPES.UINT32],width:[6,r.TYPES.UINT32],directPath:[7,r.TYPES.STRING],fileLength:[8,r.TYPES.UINT64],isFavorite:[9,r.TYPES.BOOL],deviceIdHint:[10,r.TYPES.UINT32],isLottie:[11,r.TYPES.BOOL]},x.internalSpec={lastStickerSentTs:[1,r.TYPES.INT64]},F.internalSpec={version:[1,r.TYPES.STRING]},K.internalSpec={acknowledged:[1,r.TYPES.BOOL]},Y.internalSpec={isTwentyFourHourFormatEnabled:[1,r.TYPES.BOOL]},j.internalSpec={muted:[1,r.TYPES.BOOL]},V.internalSpec={isDeactivated:[1,r.TYPES.BOOL],isAutoRenewing:[2,r.TYPES.BOOL],expirationDate:[3,r.TYPES.INT64]},W.internalSpec={name:[1,r.TYPES.STRING],deviceID:[2,r.TYPES.INT32],isDeleted:[3,r.TYPES.BOOL]},H.internalSpec={allowed:[1,r.TYPES.BOOL]},Q.internalSpec={flags:[1,r.FLAGS.REPEATED|r.TYPES.STRING]},$.internalSpec={expiredKeyEpoch:[1,r.TYPES.INT32]},q.internalSpec={key:[1,r.TYPES.MESSAGE,a.MessageKeySpec],timestamp:[2,r.TYPES.INT64]},J.internalSpec={lastMessageTimestamp:[1,r.TYPES.INT64],lastSystemMessageTimestamp:[2,r.TYPES.INT64],messages:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,q]},z.internalSpec={unarchiveChats:[1,r.TYPES.BOOL]},X.internalSpec={messageRange:[1,r.TYPES.MESSAGE,J]},Z.internalSpec={messageRange:[1,r.TYPES.MESSAGE,J]},ee.internalSpec={read:[1,r.TYPES.BOOL],messageRange:[2,r.TYPES.MESSAGE,J]},te.internalSpec={deleteMedia:[1,r.TYPES.BOOL],messageTimestamp:[2,r.TYPES.INT64]},ne.internalSpec={archived:[1,r.TYPES.BOOL],messageRange:[2,r.TYPES.MESSAGE,J]},re.internalSpec={weights:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,_]},ie.internalSpec={name:[1,r.TYPES.STRING],color:[2,r.TYPES.INT32],predefinedId:[3,r.TYPES.INT32],deleted:[4,r.TYPES.BOOL],orderIndex:[5,r.TYPES.INT32]},oe.internalSpec={labeled:[1,r.TYPES.BOOL]},ae.internalSpec={shortcut:[1,r.TYPES.STRING],message:[2,r.TYPES.STRING],keywords:[3,r.FLAGS.REPEATED|r.TYPES.STRING],count:[4,r.TYPES.INT32],deleted:[5,r.TYPES.BOOL]},se.internalSpec={locale:[1,r.TYPES.STRING]},le.internalSpec={name:[1,r.TYPES.STRING]},ue.internalSpec={showNotification:[1,r.TYPES.BOOL]},ce.internalSpec={pinned:[1,r.TYPES.BOOL]},de.internalSpec={muted:[1,r.TYPES.BOOL],muteEndTimestamp:[2,r.TYPES.INT64],autoMuted:[3,r.TYPES.BOOL]},pe.internalSpec={fullName:[1,r.TYPES.STRING],firstName:[2,r.TYPES.STRING],lidJid:[3,r.TYPES.STRING],saveOnPrimaryAddressbook:[4,r.TYPES.BOOL]},fe.internalSpec={starred:[1,r.TYPES.BOOL]},_e.internalSpec={index:[1,r.TYPES.BYTES],value:[2,r.TYPES.MESSAGE,A],padding:[3,r.TYPES.BYTES],version:[4,r.TYPES.INT32]},ge.internalSpec={currentLthash:[1,r.TYPES.BYTES],newLthash:[2,r.TYPES.BYTES],patchVersion:[3,r.TYPES.BYTES],collectionName:[4,r.TYPES.BYTES],firstFourBytesFromAHashOfSnapshotMacKey:[5,r.TYPES.BYTES],newLthashSubtract:[6,r.TYPES.BYTES],numberAdd:[7,r.TYPES.INT32],numberRemove:[8,r.TYPES.INT32],numberOverride:[9,r.TYPES.INT32],senderPlatform:[10,r.TYPES.ENUM,f],isSenderPrimary:[11,r.TYPES.BOOL]}},59266:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADVSignedKeyIndexListSpec=t.ADVSignedDeviceIdentitySpec=t.ADVSignedDeviceIdentityHMACSpec=t.ADVKeyIndexListSpec=t.ADVEncryptionType=t.ADVDeviceIdentitySpec=void 0;var r=n(91451);const i=n(76672)({E2EE:0,HOSTED:1});t.ADVEncryptionType=i;const o={};t.ADVKeyIndexListSpec=o;const a={};t.ADVSignedKeyIndexListSpec=a;const s={};t.ADVDeviceIdentitySpec=s;const l={};t.ADVSignedDeviceIdentitySpec=l;const u={};t.ADVSignedDeviceIdentityHMACSpec=u,o.internalDefaults={accountType:i.E2EE},o.internalSpec={rawId:[1,r.TYPES.UINT32],timestamp:[2,r.TYPES.UINT64],currentIndex:[3,r.TYPES.UINT32],validIndexes:[4,r.FLAGS.REPEATED|r.FLAGS.PACKED|r.TYPES.UINT32],accountType:[5,r.TYPES.ENUM,i]},a.internalSpec={details:[1,r.TYPES.BYTES],accountSignature:[2,r.TYPES.BYTES],accountSignatureKey:[3,r.TYPES.BYTES]},s.internalDefaults={accountType:i.E2EE,deviceType:i.E2EE},s.internalSpec={rawId:[1,r.TYPES.UINT32],timestamp:[2,r.TYPES.UINT64],keyIndex:[3,r.TYPES.UINT32],accountType:[4,r.TYPES.ENUM,i],deviceType:[5,r.TYPES.ENUM,i]},l.internalSpec={details:[1,r.TYPES.BYTES],accountSignatureKey:[2,r.TYPES.BYTES],accountSignature:[3,r.TYPES.BYTES],deviceSignature:[4,r.TYPES.BYTES]},u.internalDefaults={accountType:i.E2EE},u.internalSpec={details:[1,r.TYPES.BYTES],hmac:[2,r.TYPES.BYTES],accountType:[3,r.TYPES.ENUM,i]}},82121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatLockSettingsSpec=void 0;var r=n(91451),i=n(47977);const o={};t.ChatLockSettingsSpec=o,o.internalSpec={hideLockedChats:[1,r.TYPES.BOOL],secretCode:[2,r.TYPES.MESSAGE,i.UserPasswordSpec]}},86055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceCapabilitiesSpec=t.DeviceCapabilities$ChatLockSupportLevel=void 0;var r=n(91451);const i=n(76672)({NONE:0,MINIMAL:1,FULL:2});t.DeviceCapabilities$ChatLockSupportLevel=i;const o={};t.DeviceCapabilitiesSpec=o,o.internalSpec={chatLockSupportLevel:[1,r.TYPES.ENUM,i]}},77026:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message$InteractiveMessage$NativeFlowMessageSpec=t.Message$InteractiveMessage$NativeFlowMessage$NativeFlowButtonSpec=t.Message$InteractiveMessage$HeaderSpec=t.Message$InteractiveMessage$FooterSpec=t.Message$InteractiveMessage$CollectionMessageSpec=t.Message$InteractiveMessage$CarouselMessageSpec=t.Message$InteractiveMessage$BodySpec=t.Message$InitialSecurityNotificationSettingSyncSpec=t.Message$ImageMessageSpec=t.Message$ImageMessage$ImageSourceType=t.Message$HistorySyncNotificationSpec=t.Message$HistorySyncNotification$HistorySyncType=t.Message$HighlyStructuredMessageSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameterSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTimeSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeUnixEpochSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponentSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$DayOfWeekType=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$CalendarType=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMCurrencySpec=t.Message$GroupInviteMessageSpec=t.Message$GroupInviteMessage$GroupType=t.Message$FutureProofMessageSpec=t.Message$ExtendedTextMessageSpec=t.Message$ExtendedTextMessage$PreviewType=t.Message$ExtendedTextMessage$InviteLinkGroupType=t.Message$ExtendedTextMessage$FontType=t.Message$EventResponseMessageSpec=t.Message$EventResponseMessage$EventResponseType=t.Message$EventMessageSpec=t.Message$EncReactionMessageSpec=t.Message$EncEventResponseMessageSpec=t.Message$EncCommentMessageSpec=t.Message$DocumentMessageSpec=t.Message$DeviceSentMessageSpec=t.Message$DeclinePaymentRequestMessageSpec=t.Message$ContactsArrayMessageSpec=t.Message$ContactMessageSpec=t.Message$CommentMessageSpec=t.Message$ChatSpec=t.Message$CancelPaymentRequestMessageSpec=t.Message$CallSpec=t.Message$CallLogMessageSpec=t.Message$CallLogMessage$CallType=t.Message$CallLogMessage$CallParticipantSpec=t.Message$CallLogMessage$CallOutcome=t.Message$ButtonsResponseMessageSpec=t.Message$ButtonsResponseMessage$Type=t.Message$ButtonsMessageSpec=t.Message$ButtonsMessage$HeaderType=t.Message$ButtonsMessage$ButtonSpec=t.Message$ButtonsMessage$Button$Type=t.Message$ButtonsMessage$Button$NativeFlowInfoSpec=t.Message$ButtonsMessage$Button$ButtonTextSpec=t.Message$BotFeedbackMessageSpec=t.Message$BotFeedbackMessage$BotFeedbackKindMultiplePositive=t.Message$BotFeedbackMessage$BotFeedbackKindMultipleNegative=t.Message$BotFeedbackMessage$BotFeedbackKind=t.Message$BCallMessageSpec=t.Message$BCallMessage$MediaType=t.Message$AudioMessageSpec=t.Message$AppStateSyncKeySpec=t.Message$AppStateSyncKeyShareSpec=t.Message$AppStateSyncKeyRequestSpec=t.Message$AppStateSyncKeyIdSpec=t.Message$AppStateSyncKeyFingerprintSpec=t.Message$AppStateSyncKeyDataSpec=t.Message$AppStateFatalExceptionNotificationSpec=t.MediaNotifyMessageSpec=t.LocationSpec=t.KeepType=t.InteractiveAnnotationSpec=t.HydratedTemplateButtonSpec=t.HydratedTemplateButton$HydratedURLButtonSpec=t.HydratedTemplateButton$HydratedURLButton$WebviewPresentationType=t.HydratedTemplateButton$HydratedQuickReplyButtonSpec=t.HydratedTemplateButton$HydratedCallButtonSpec=t.GroupMentionSpec=t.DisappearingModeSpec=t.DisappearingMode$Trigger=t.DisappearingMode$Initiator=t.DeviceListMetadataSpec=t.ContextInfoSpec=t.ContextInfo$UTMInfoSpec=t.ContextInfo$ForwardedNewsletterMessageInfoSpec=t.ContextInfo$ForwardedNewsletterMessageInfo$ContentType=t.ContextInfo$ExternalAdReplyInfoSpec=t.ContextInfo$ExternalAdReplyInfo$MediaType=t.ContextInfo$DataSharingContextSpec=t.ContextInfo$BusinessMessageForwardInfoSpec=t.ContextInfo$AdReplyInfoSpec=t.ContextInfo$AdReplyInfo$MediaType=t.BotSuggestedPromptMetadataSpec=t.BotSearchMetadataSpec=t.BotPluginMetadataSpec=t.BotPluginMetadata$SearchProvider=t.BotPluginMetadata$PluginType=t.BotMetadataSpec=t.BotAvatarMetadataSpec=t.ActionLinkSpec=void 0,t.TemplateButtonSpec=t.TemplateButton$URLButtonSpec=t.TemplateButton$QuickReplyButtonSpec=t.TemplateButton$CallButtonSpec=t.PointSpec=t.PaymentBackgroundSpec=t.PaymentBackground$Type=t.PaymentBackground$MediaDataSpec=t.MoneySpec=t.MessageSpec=t.MessageSecretMessageSpec=t.MessageContextInfoSpec=t.Message$VideoMessageSpec=t.Message$VideoMessage$Attribution=t.Message$TemplateMessageSpec=t.Message$TemplateMessage$HydratedFourRowTemplateSpec=t.Message$TemplateMessage$FourRowTemplateSpec=t.Message$TemplateButtonReplyMessageSpec=t.Message$StickerSyncRMRMessageSpec=t.Message$StickerMessageSpec=t.Message$SenderKeyDistributionMessageSpec=t.Message$SendPaymentMessageSpec=t.Message$SecretEncryptedMessageSpec=t.Message$SecretEncryptedMessage$SecretEncType=t.Message$ScheduledCallEditMessageSpec=t.Message$ScheduledCallEditMessage$EditType=t.Message$ScheduledCallCreationMessageSpec=t.Message$ScheduledCallCreationMessage$CallType=t.Message$RequestWelcomeMessageMetadataSpec=t.Message$RequestWelcomeMessageMetadata$LocalChatState=t.Message$RequestPhoneNumberMessageSpec=t.Message$RequestPaymentMessageSpec=t.Message$ReactionMessageSpec=t.Message$ProtocolMessageSpec=t.Message$ProtocolMessage$Type=t.Message$ProductMessageSpec=t.Message$ProductMessage$ProductSnapshotSpec=t.Message$ProductMessage$CatalogSnapshotSpec=t.Message$PollVoteMessageSpec=t.Message$PollUpdateMessageSpec=t.Message$PollUpdateMessageMetadataSpec=t.Message$PollEncValueSpec=t.Message$PollCreationMessageSpec=t.Message$PollCreationMessage$OptionSpec=t.Message$PlaceholderMessageSpec=t.Message$PlaceholderMessage$PlaceholderType=t.Message$PinInChatMessageSpec=t.Message$PinInChatMessage$Type=t.Message$PeerDataOperationRequestType=t.Message$PeerDataOperationRequestResponseMessageSpec=t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResultSpec=t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$PlaceholderMessageResendResponseSpec=t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponseSpec=t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponse$LinkPreviewHighQualityThumbnailSpec=t.Message$PeerDataOperationRequestMessageSpec=t.Message$PeerDataOperationRequestMessage$RequestUrlPreviewSpec=t.Message$PeerDataOperationRequestMessage$RequestStickerReuploadSpec=t.Message$PeerDataOperationRequestMessage$PlaceholderMessageResendRequestSpec=t.Message$PeerDataOperationRequestMessage$HistorySyncOnDemandRequestSpec=t.Message$PaymentInviteMessageSpec=t.Message$PaymentInviteMessage$ServiceType=t.Message$OrderMessageSpec=t.Message$OrderMessage$OrderSurface=t.Message$OrderMessage$OrderStatus=t.Message$NewsletterAdminInviteMessageSpec=t.Message$MessageHistoryBundleSpec=t.Message$LocationMessageSpec=t.Message$LiveLocationMessageSpec=t.Message$ListResponseMessageSpec=t.Message$ListResponseMessage$SingleSelectReplySpec=t.Message$ListResponseMessage$ListType=t.Message$ListMessageSpec=t.Message$ListMessage$SectionSpec=t.Message$ListMessage$RowSpec=t.Message$ListMessage$ProductSpec=t.Message$ListMessage$ProductSectionSpec=t.Message$ListMessage$ProductListInfoSpec=t.Message$ListMessage$ProductListHeaderImageSpec=t.Message$ListMessage$ListType=t.Message$KeepInChatMessageSpec=t.Message$InvoiceMessageSpec=t.Message$InvoiceMessage$AttachmentType=t.Message$InteractiveResponseMessageSpec=t.Message$InteractiveResponseMessage$NativeFlowResponseMessageSpec=t.Message$InteractiveResponseMessage$BodySpec=t.Message$InteractiveResponseMessage$Body$Format=t.Message$InteractiveMessageSpec=t.Message$InteractiveMessage$ShopMessageSpec=t.Message$InteractiveMessage$ShopMessage$Surface=t.Message$InteractiveMessage$NativeFlowMessageSpec=t.Message$InteractiveMessage$NativeFlowMessage$NativeFlowButtonSpec=t.Message$InteractiveMessage$HeaderSpec=t.Message$InteractiveMessage$FooterSpec=t.Message$InteractiveMessage$CollectionMessageSpec=t.Message$InteractiveMessage$CarouselMessageSpec=t.Message$InteractiveMessage$BodySpec=t.Message$InitialSecurityNotificationSettingSyncSpec=t.Message$ImageMessageSpec=t.Message$ImageMessage$ImageSourceType=t.Message$HistorySyncNotificationSpec=t.Message$HistorySyncNotification$HistorySyncType=t.Message$HighlyStructuredMessageSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameterSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTimeSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeUnixEpochSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponentSpec=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$DayOfWeekType=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$CalendarType=t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMCurrencySpec=t.Message$GroupInviteMessageSpec=t.Message$GroupInviteMessage$GroupType=t.Message$FutureProofMessageSpec=t.Message$ExtendedTextMessageSpec=t.Message$ExtendedTextMessage$PreviewType=t.Message$ExtendedTextMessage$InviteLinkGroupType=t.Message$ExtendedTextMessage$FontType=t.Message$EventResponseMessageSpec=t.Message$EventResponseMessage$EventResponseType=t.Message$EventMessageSpec=t.Message$EncReactionMessageSpec=t.Message$EncEventResponseMessageSpec=t.Message$EncCommentMessageSpec=t.Message$DocumentMessageSpec=t.Message$DeviceSentMessageSpec=t.Message$DeclinePaymentRequestMessageSpec=t.Message$ContactsArrayMessageSpec=t.Message$ContactMessageSpec=t.Message$CommentMessageSpec=t.Message$ChatSpec=t.Message$CancelPaymentRequestMessageSpec=t.Message$CallSpec=t.Message$CallLogMessageSpec=t.Message$CallLogMessage$CallType=t.Message$CallLogMessage$CallParticipantSpec=t.Message$CallLogMessage$CallOutcome=t.Message$ButtonsResponseMessageSpec=t.Message$ButtonsResponseMessage$Type=t.Message$ButtonsMessageSpec=t.Message$ButtonsMessage$HeaderType=t.Message$ButtonsMessage$ButtonSpec=t.Message$ButtonsMessage$Button$Type=t.Message$ButtonsMessage$Button$NativeFlowInfoSpec=t.Message$ButtonsMessage$Button$ButtonTextSpec=t.Message$BotFeedbackMessageSpec=t.Message$BotFeedbackMessage$BotFeedbackKindMultiplePositive=t.Message$BotFeedbackMessage$BotFeedbackKindMultipleNegative=t.Message$BotFeedbackMessage$BotFeedbackKind=t.Message$BCallMessageSpec=t.Message$BCallMessage$MediaType=t.Message$AudioMessageSpec=t.Message$AppStateSyncKeySpec=t.Message$AppStateSyncKeyShareSpec=t.Message$AppStateSyncKeyRequestSpec=t.Message$AppStateSyncKeyIdSpec=t.Message$AppStateSyncKeyFingerprintSpec=t.Message$AppStateSyncKeyDataSpec=t.Message$AppStateFatalExceptionNotificationSpec=t.MediaNotifyMessageSpec=t.LocationSpec=t.KeepType=t.InteractiveAnnotationSpec=t.HydratedTemplateButtonSpec=t.HydratedTemplateButton$HydratedURLButtonSpec=t.HydratedTemplateButton$HydratedURLButton$WebviewPresentationType=t.HydratedTemplateButton$HydratedQuickReplyButtonSpec=t.HydratedTemplateButton$HydratedCallButtonSpec=t.GroupMentionSpec=t.DisappearingModeSpec=t.DisappearingMode$Trigger=t.DisappearingMode$Initiator=t.DeviceListMetadataSpec=t.ContextInfoSpec=t.ContextInfo$UTMInfoSpec=t.ContextInfo$ForwardedNewsletterMessageInfoSpec=t.ContextInfo$ForwardedNewsletterMessageInfo$ContentType=t.ContextInfo$ExternalAdReplyInfoSpec=t.ContextInfo$ExternalAdReplyInfo$MediaType=t.ContextInfo$DataSharingContextSpec=t.ContextInfo$BusinessMessageForwardInfoSpec=t.ContextInfo$AdReplyInfoSpec=t.ContextInfo$AdReplyInfo$MediaType=t.BotSuggestedPromptMetadataSpec=t.BotSearchMetadataSpec=t.BotPluginMetadataSpec=t.BotPluginMetadata$SearchProvider=t.BotPluginMetadata$PluginType=t.BotMetadataSpec=t.BotAvatarMetadataSpec=t.ActionLinkSpec=void 0;var r=n(91451),i=n(17059),o=n(92754),a=n(59266);const s=n(76672)({MASK_LINKED_DEVICES:0});t.Message$PlaceholderMessage$PlaceholderType=s;const l=n(76672)({UNKNOWN:0,AUDIO:1,VIDEO:2});t.Message$BCallMessage$MediaType=l;const u=n(76672)({CONNECTED:0,MISSED:1,FAILED:2,REJECTED:3,ACCEPTED_ELSEWHERE:4,ONGOING:5,SILENCED_BY_DND:6,SILENCED_UNKNOWN_CALLER:7});t.Message$CallLogMessage$CallOutcome=u;const c=n(76672)({REGULAR:0,SCHEDULED_CALL:1,VOICE_CHAT:2});t.Message$CallLogMessage$CallType=c;const d=n(76672)({UNKNOWN:0,CANCEL:1});t.Message$ScheduledCallEditMessage$EditType=d;const p=n(76672)({UNKNOWN:0,VOICE:1,VIDEO:2});t.Message$ScheduledCallCreationMessage$CallType=p;const f=n(76672)({UNKNOWN:0,GOING:1,NOT_GOING:2});t.Message$EventResponseMessage$EventResponseType=f;const _=n(76672)({UNKNOWN_TYPE:0,PIN_FOR_ALL:1,UNPIN_FOR_ALL:2});t.Message$PinInChatMessage$Type=_;const g=n(76672)({UNKNOWN:0,DISPLAY_TEXT:1});t.Message$ButtonsResponseMessage$Type=g;const h=n(76672)({UNKNOWN:0,RESPONSE:1,NATIVE_FLOW:2});t.Message$ButtonsMessage$Button$Type=h;const A=n(76672)({UNKNOWN:0,EMPTY:1,TEXT:2,DOCUMENT:3,IMAGE:4,VIDEO:5,LOCATION:6});t.Message$ButtonsMessage$HeaderType=A;const m=n(76672)({UNKNOWN:0,EVENT_EDIT:1});t.Message$SecretEncryptedMessage$SecretEncType=m;const E=n(76672)({DEFAULT:0,PARENT:1});t.Message$GroupInviteMessage$GroupType=E;const y=n(76672)({DEFAULT:0,EXTENSIONS_1:1});t.Message$InteractiveResponseMessage$Body$Format=y;const S=n(76672)({UNKNOWN_SURFACE:0,FB:1,IG:2,WA:3});t.Message$InteractiveMessage$ShopMessage$Surface=S;const v=n(76672)({UNKNOWN:0,SINGLE_SELECT:1});t.Message$ListResponseMessage$ListType=v;const I=n(76672)({UNKNOWN:0,SINGLE_SELECT:1,PRODUCT_LIST:2});t.Message$ListMessage$ListType=I;const T=n(76672)({CATALOG:1});t.Message$OrderMessage$OrderSurface=T;const b=n(76672)({INQUIRY:1,ACCEPTED:2,DECLINED:3});t.Message$OrderMessage$OrderStatus=b;const M=n(76672)({UNKNOWN:0,FBPAY:1,NOVI:2,UPI:3});t.Message$PaymentInviteMessage$ServiceType=M;const P=n(76672)({GREGORIAN:1,SOLAR_HIJRI:2});t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$CalendarType=P;const C=n(76672)({MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,SUNDAY:7});t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponent$DayOfWeekType=C;const O=n(76672)({UPLOAD_STICKER:0,SEND_RECENT_STICKER_BOOTSTRAP:1,GENERATE_LINK_PREVIEW:2,HISTORY_SYNC_ON_DEMAND:3,PLACEHOLDER_MESSAGE_RESEND:4});t.Message$PeerDataOperationRequestType=O;const R=n(76672)({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4,NON_BLOCKING_DATA:5,ON_DEMAND:6});t.Message$HistorySyncNotification$HistorySyncType=R;const N=n(76672)({EMPTY:0,NON_EMPTY:1});t.Message$RequestWelcomeMessageMetadata$LocalChatState=N;const w=n(76672)({REVOKE:0,EPHEMERAL_SETTING:3,EPHEMERAL_SYNC_RESPONSE:4,HISTORY_SYNC_NOTIFICATION:5,APP_STATE_SYNC_KEY_SHARE:6,APP_STATE_SYNC_KEY_REQUEST:7,MSG_FANOUT_BACKFILL_REQUEST:8,INITIAL_SECURITY_NOTIFICATION_SETTING_SYNC:9,APP_STATE_FATAL_EXCEPTION_NOTIFICATION:10,SHARE_PHONE_NUMBER:11,MESSAGE_EDIT:14,PEER_DATA_OPERATION_REQUEST_MESSAGE:16,PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:17,REQUEST_WELCOME_MESSAGE:18,BOT_FEEDBACK_MESSAGE:19,MEDIA_NOTIFY_MESSAGE:20});t.Message$ProtocolMessage$Type=w;const D=n(76672)({BOT_FEEDBACK_MULTIPLE_POSITIVE_GENERIC:1});t.Message$BotFeedbackMessage$BotFeedbackKindMultiplePositive=D;const L=n(76672)({BOT_FEEDBACK_MULTIPLE_NEGATIVE_GENERIC:1,BOT_FEEDBACK_MULTIPLE_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_MULTIPLE_NEGATIVE_INTERESTING:4,BOT_FEEDBACK_MULTIPLE_NEGATIVE_ACCURATE:8,BOT_FEEDBACK_MULTIPLE_NEGATIVE_SAFE:16,BOT_FEEDBACK_MULTIPLE_NEGATIVE_OTHER:32,BOT_FEEDBACK_MULTIPLE_NEGATIVE_REFUSED:64,BOT_FEEDBACK_MULTIPLE_NEGATIVE_NOT_VISUALLY_APPEALING:128,BOT_FEEDBACK_MULTIPLE_NEGATIVE_NOT_RELEVANT_TO_TEXT:256});t.Message$BotFeedbackMessage$BotFeedbackKindMultipleNegative=L;const B=n(76672)({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9});t.Message$BotFeedbackMessage$BotFeedbackKind=B;const k=n(76672)({NONE:0,GIPHY:1,TENOR:2});t.Message$VideoMessage$Attribution=k;const G=n(76672)({DEFAULT:0,PARENT:1,SUB:2,DEFAULT_SUB:3});t.Message$ExtendedTextMessage$InviteLinkGroupType=G;const U=n(76672)({NONE:0,VIDEO:1,PLACEHOLDER:4,IMAGE:5});t.Message$ExtendedTextMessage$PreviewType=U;const x=n(76672)({SYSTEM:0,SYSTEM_TEXT:1,FB_SCRIPT:2,SYSTEM_BOLD:6,MORNINGBREEZE_REGULAR:7,CALISTOGA_REGULAR:8,EXO2_EXTRABOLD:9,COURIERPRIME_BOLD:10});t.Message$ExtendedTextMessage$FontType=x;const F=n(76672)({IMAGE:0,PDF:1});t.Message$InvoiceMessage$AttachmentType=F;const K=n(76672)({USER_IMAGE:0,AI_GENERATED:1,AI_MODIFIED:2});t.Message$ImageMessage$ImageSourceType=K;const Y=n(76672)({UPDATE:1,UPDATE_CARD:2,LINK_CARD:3});t.ContextInfo$ForwardedNewsletterMessageInfo$ContentType=Y;const j=n(76672)({NONE:0,IMAGE:1,VIDEO:2});t.ContextInfo$ExternalAdReplyInfo$MediaType=j;const V=n(76672)({NONE:0,IMAGE:1,VIDEO:2});t.ContextInfo$AdReplyInfo$MediaType=V;const W=n(76672)({REELS:1,SEARCH:2});t.BotPluginMetadata$PluginType=W;const H=n(76672)({BING:1,GOOGLE:2});t.BotPluginMetadata$SearchProvider=H;const Q=n(76672)({FULL:1,TALL:2,COMPACT:3});t.HydratedTemplateButton$HydratedURLButton$WebviewPresentationType=Q;const $=n(76672)({UNKNOWN:0,DEFAULT:1});t.PaymentBackground$Type=$;const q=n(76672)({UNKNOWN:0,CHAT_SETTING:1,ACCOUNT_SETTING:2,BULK_CHANGE:3,BIZ_SUPPORTS_FB_HOSTING:4});t.DisappearingMode$Trigger=q;const J=n(76672)({CHANGED_IN_CHAT:0,INITIATED_BY_ME:1,INITIATED_BY_OTHER:2,BIZ_UPGRADE_FB_HOSTING:3});t.DisappearingMode$Initiator=J;const z=n(76672)({UNKNOWN:0,KEEP_FOR_ALL:1,UNDO_KEEP_FOR_ALL:2});t.KeepType=z;const X={};t.MessageSpec=X;const Z={};t.Message$PlaceholderMessageSpec=Z;const ee={};t.Message$BCallMessageSpec=ee;const te={};t.Message$MessageHistoryBundleSpec=te;const ne={};t.Message$CallLogMessageSpec=ne;const re={};t.Message$CallLogMessage$CallParticipantSpec=re;const ie={};t.Message$ScheduledCallEditMessageSpec=ie;const oe={};t.Message$ScheduledCallCreationMessageSpec=oe;const ae={};t.Message$EventResponseMessageSpec=ae;const se={};t.Message$EncEventResponseMessageSpec=se;const le={};t.Message$EventMessageSpec=le;const ue={};t.Message$CommentMessageSpec=ue;const ce={};t.Message$EncCommentMessageSpec=ce;const de={};t.Message$EncReactionMessageSpec=de;const pe={};t.Message$PinInChatMessageSpec=pe;const fe={};t.Message$KeepInChatMessageSpec=fe;const _e={};t.Message$PollVoteMessageSpec=_e;const ge={};t.Message$PollEncValueSpec=ge;const he={};t.Message$PollUpdateMessageMetadataSpec=he;const Ae={};t.Message$PollUpdateMessageSpec=Ae;const me={};t.Message$PollCreationMessageSpec=me;const Ee={};t.Message$PollCreationMessage$OptionSpec=Ee;const ye={};t.Message$StickerSyncRMRMessageSpec=ye;const Se={};t.Message$ReactionMessageSpec=Se;const ve={};t.Message$ButtonsResponseMessageSpec=ve;const Ie={};t.Message$ButtonsMessageSpec=Ie;const Te={};t.Message$ButtonsMessage$ButtonSpec=Te;const be={};t.Message$ButtonsMessage$Button$NativeFlowInfoSpec=be;const Me={};t.Message$ButtonsMessage$Button$ButtonTextSpec=Me;const Pe={};t.Message$SecretEncryptedMessageSpec=Pe;const Ce={};t.Message$FutureProofMessageSpec=Ce;const Oe={};t.Message$DeviceSentMessageSpec=Oe;const Re={};t.Message$RequestPhoneNumberMessageSpec=Re;const Ne={};t.Message$NewsletterAdminInviteMessageSpec=Ne;const we={};t.Message$GroupInviteMessageSpec=we;const De={};t.Message$InteractiveResponseMessageSpec=De;const Le={};t.Message$InteractiveResponseMessage$NativeFlowResponseMessageSpec=Le;const Be={};t.Message$InteractiveResponseMessage$BodySpec=Be;const ke={};t.Message$InteractiveMessageSpec=ke;const Ge={};t.Message$InteractiveMessage$CarouselMessageSpec=Ge;const Ue={};t.Message$InteractiveMessage$NativeFlowMessageSpec=Ue;const xe={};t.Message$InteractiveMessage$NativeFlowMessage$NativeFlowButtonSpec=xe;const Fe={};t.Message$InteractiveMessage$CollectionMessageSpec=Fe;const Ke={};t.Message$InteractiveMessage$ShopMessageSpec=Ke;const Ye={};t.Message$InteractiveMessage$FooterSpec=Ye;const je={};t.Message$InteractiveMessage$BodySpec=je;const Ve={};t.Message$InteractiveMessage$HeaderSpec=Ve;const We={};t.Message$ListResponseMessageSpec=We;const He={};t.Message$ListResponseMessage$SingleSelectReplySpec=He;const Qe={};t.Message$ListMessageSpec=Qe;const $e={};t.Message$ListMessage$ProductListInfoSpec=$e;const qe={};t.Message$ListMessage$ProductListHeaderImageSpec=qe;const Je={};t.Message$ListMessage$ProductSectionSpec=Je;const ze={};t.Message$ListMessage$ProductSpec=ze;const Xe={};t.Message$ListMessage$SectionSpec=Xe;const Ze={};t.Message$ListMessage$RowSpec=Ze;const et={};t.Message$OrderMessageSpec=et;const tt={};t.Message$ProductMessageSpec=tt;const nt={};t.Message$ProductMessage$ProductSnapshotSpec=nt;const rt={};t.Message$ProductMessage$CatalogSnapshotSpec=rt;const it={};t.Message$TemplateButtonReplyMessageSpec=it;const ot={};t.Message$TemplateMessageSpec=ot;const at={};t.Message$TemplateMessage$HydratedFourRowTemplateSpec=at;const st={};t.Message$TemplateMessage$FourRowTemplateSpec=st;const lt={};t.Message$StickerMessageSpec=lt;const ut={};t.Message$LiveLocationMessageSpec=ut;const ct={};t.Message$PaymentInviteMessageSpec=ct;const dt={};t.Message$CancelPaymentRequestMessageSpec=dt;const pt={};t.Message$DeclinePaymentRequestMessageSpec=pt;const ft={};t.Message$RequestPaymentMessageSpec=ft;const _t={};t.Message$SendPaymentMessageSpec=_t;const gt={};t.Message$HighlyStructuredMessageSpec=gt;const ht={};t.Message$HighlyStructuredMessage$HSMLocalizableParameterSpec=ht;const At={};t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTimeSpec=At;const mt={};t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeUnixEpochSpec=mt;const Et={};t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMDateTime$HSMDateTimeComponentSpec=Et;const yt={};t.Message$HighlyStructuredMessage$HSMLocalizableParameter$HSMCurrencySpec=yt;const St={};t.Message$ContactsArrayMessageSpec=St;const vt={};t.Message$InitialSecurityNotificationSettingSyncSpec=vt;const It={};t.Message$PeerDataOperationRequestResponseMessageSpec=It;const Tt={};t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResultSpec=Tt;const bt={};t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$PlaceholderMessageResendResponseSpec=bt;const Mt={};t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponseSpec=Mt;const Pt={};t.Message$PeerDataOperationRequestResponseMessage$PeerDataOperationResult$LinkPreviewResponse$LinkPreviewHighQualityThumbnailSpec=Pt;const Ct={};t.Message$PeerDataOperationRequestMessageSpec=Ct;const Ot={};t.Message$PeerDataOperationRequestMessage$PlaceholderMessageResendRequestSpec=Ot;const Rt={};t.Message$PeerDataOperationRequestMessage$HistorySyncOnDemandRequestSpec=Rt;const Nt={};t.Message$PeerDataOperationRequestMessage$RequestUrlPreviewSpec=Nt;const wt={};t.Message$PeerDataOperationRequestMessage$RequestStickerReuploadSpec=wt;const Dt={};t.Message$AppStateFatalExceptionNotificationSpec=Dt;const Lt={};t.Message$AppStateSyncKeyRequestSpec=Lt;const Bt={};t.Message$AppStateSyncKeyShareSpec=Bt;const kt={};t.Message$AppStateSyncKeyDataSpec=kt;const Gt={};t.Message$AppStateSyncKeyFingerprintSpec=Gt;const Ut={};t.Message$AppStateSyncKeyIdSpec=Ut;const xt={};t.Message$AppStateSyncKeySpec=xt;const Ft={};t.Message$HistorySyncNotificationSpec=Ft;const Kt={};t.Message$RequestWelcomeMessageMetadataSpec=Kt;const Yt={};t.Message$ProtocolMessageSpec=Yt;const jt={};t.Message$BotFeedbackMessageSpec=jt;const Vt={};t.Message$ChatSpec=Vt;const Wt={};t.Message$CallSpec=Wt;const Ht={};t.Message$VideoMessageSpec=Ht;const Qt={};t.Message$AudioMessageSpec=Qt;const $t={};t.Message$DocumentMessageSpec=$t;const qt={};t.Message$ExtendedTextMessageSpec=qt;const Jt={};t.Message$LocationMessageSpec=Jt;const zt={};t.Message$ContactMessageSpec=zt;const Xt={};t.Message$InvoiceMessageSpec=Xt;const Zt={};t.Message$ImageMessageSpec=Zt;const en={};t.Message$SenderKeyDistributionMessageSpec=en;const tn={};t.ContextInfoSpec=tn;const nn={};t.ContextInfo$DataSharingContextSpec=nn;const rn={};t.ContextInfo$ForwardedNewsletterMessageInfoSpec=rn;const on={};t.ContextInfo$UTMInfoSpec=on;const an={};t.ContextInfo$ExternalAdReplyInfoSpec=an;const sn={};t.ContextInfo$AdReplyInfoSpec=sn;const ln={};t.ContextInfo$BusinessMessageForwardInfoSpec=ln;const un={};t.BotAvatarMetadataSpec=un;const cn={};t.BotPluginMetadataSpec=cn;const dn={};t.BotSuggestedPromptMetadataSpec=dn;const pn={};t.BotSearchMetadataSpec=pn;const fn={};t.BotMetadataSpec=fn;const _n={};t.MessageContextInfoSpec=_n;const gn={};t.DeviceListMetadataSpec=gn;const hn={};t.InteractiveAnnotationSpec=hn;const An={};t.PointSpec=An;const mn={};t.LocationSpec=mn;const En={};t.TemplateButtonSpec=En;const yn={};t.TemplateButton$CallButtonSpec=yn;const Sn={};t.TemplateButton$URLButtonSpec=Sn;const vn={};t.TemplateButton$QuickReplyButtonSpec=vn;const In={};t.HydratedTemplateButtonSpec=In;const Tn={};t.HydratedTemplateButton$HydratedCallButtonSpec=Tn;const bn={};t.HydratedTemplateButton$HydratedURLButtonSpec=bn;const Mn={};t.HydratedTemplateButton$HydratedQuickReplyButtonSpec=Mn;const Pn={};t.MoneySpec=Pn;const Cn={};t.PaymentBackgroundSpec=Cn;const On={};t.PaymentBackground$MediaDataSpec=On;const Rn={};t.DisappearingModeSpec=Rn;const Nn={};t.ActionLinkSpec=Nn;const wn={};t.GroupMentionSpec=wn;const Dn={};t.MessageSecretMessageSpec=Dn;const Ln={};t.MediaNotifyMessageSpec=Ln,X.internalSpec={conversation:[1,r.TYPES.STRING],senderKeyDistributionMessage:[2,r.TYPES.MESSAGE,en],imageMessage:[3,r.TYPES.MESSAGE,Zt],contactMessage:[4,r.TYPES.MESSAGE,zt],locationMessage:[5,r.TYPES.MESSAGE,Jt],extendedTextMessage:[6,r.TYPES.MESSAGE,qt],documentMessage:[7,r.TYPES.MESSAGE,$t],audioMessage:[8,r.TYPES.MESSAGE,Qt],videoMessage:[9,r.TYPES.MESSAGE,Ht],call:[10,r.TYPES.MESSAGE,Wt],chat:[11,r.TYPES.MESSAGE,Vt],protocolMessage:[12,r.TYPES.MESSAGE,Yt],contactsArrayMessage:[13,r.TYPES.MESSAGE,St],highlyStructuredMessage:[14,r.TYPES.MESSAGE,gt],fastRatchetKeySenderKeyDistributionMessage:[15,r.TYPES.MESSAGE,en],sendPaymentMessage:[16,r.TYPES.MESSAGE,_t],liveLocationMessage:[18,r.TYPES.MESSAGE,ut],requestPaymentMessage:[22,r.TYPES.MESSAGE,ft],declinePaymentRequestMessage:[23,r.TYPES.MESSAGE,pt],cancelPaymentRequestMessage:[24,r.TYPES.MESSAGE,dt],templateMessage:[25,r.TYPES.MESSAGE,ot],stickerMessage:[26,r.TYPES.MESSAGE,lt],groupInviteMessage:[28,r.TYPES.MESSAGE,we],templateButtonReplyMessage:[29,r.TYPES.MESSAGE,it],productMessage:[30,r.TYPES.MESSAGE,tt],deviceSentMessage:[31,r.TYPES.MESSAGE,Oe],messageContextInfo:[35,r.TYPES.MESSAGE,_n],listMessage:[36,r.TYPES.MESSAGE,Qe],viewOnceMessage:[37,r.TYPES.MESSAGE,Ce],orderMessage:[38,r.TYPES.MESSAGE,et],listResponseMessage:[39,r.TYPES.MESSAGE,We],ephemeralMessage:[40,r.TYPES.MESSAGE,Ce],invoiceMessage:[41,r.TYPES.MESSAGE,Xt],buttonsMessage:[42,r.TYPES.MESSAGE,Ie],buttonsResponseMessage:[43,r.TYPES.MESSAGE,ve],paymentInviteMessage:[44,r.TYPES.MESSAGE,ct],interactiveMessage:[45,r.TYPES.MESSAGE,ke],reactionMessage:[46,r.TYPES.MESSAGE,Se],stickerSyncRmrMessage:[47,r.TYPES.MESSAGE,ye],interactiveResponseMessage:[48,r.TYPES.MESSAGE,De],pollCreationMessage:[49,r.TYPES.MESSAGE,me],pollUpdateMessage:[50,r.TYPES.MESSAGE,Ae],keepInChatMessage:[51,r.TYPES.MESSAGE,fe],documentWithCaptionMessage:[53,r.TYPES.MESSAGE,Ce],requestPhoneNumberMessage:[54,r.TYPES.MESSAGE,Re],viewOnceMessageV2:[55,r.TYPES.MESSAGE,Ce],encReactionMessage:[56,r.TYPES.MESSAGE,de],editedMessage:[58,r.TYPES.MESSAGE,Ce],viewOnceMessageV2Extension:[59,r.TYPES.MESSAGE,Ce],pollCreationMessageV2:[60,r.TYPES.MESSAGE,me],scheduledCallCreationMessage:[61,r.TYPES.MESSAGE,oe],groupMentionedMessage:[62,r.TYPES.MESSAGE,Ce],pinInChatMessage:[63,r.TYPES.MESSAGE,pe],pollCreationMessageV3:[64,r.TYPES.MESSAGE,me],scheduledCallEditMessage:[65,r.TYPES.MESSAGE,ie],ptvMessage:[66,r.TYPES.MESSAGE,Ht],botInvokeMessage:[67,r.TYPES.MESSAGE,Ce],callLogMesssage:[69,r.TYPES.MESSAGE,ne],messageHistoryBundle:[70,r.TYPES.MESSAGE,te],encCommentMessage:[71,r.TYPES.MESSAGE,ce],bcallMessage:[72,r.TYPES.MESSAGE,ee],lottieStickerMessage:[74,r.TYPES.MESSAGE,Ce],eventMessage:[75,r.TYPES.MESSAGE,le],encEventResponseMessage:[76,r.TYPES.MESSAGE,se],commentMessage:[77,r.TYPES.MESSAGE,ue],newsletterAdminInviteMessage:[78,r.TYPES.MESSAGE,Ne],placeholderMessage:[80,r.TYPES.MESSAGE,Z],secretEncryptedMessage:[82,r.TYPES.MESSAGE,Pe]},Z.internalSpec={type:[1,r.TYPES.ENUM,s]},ee.internalSpec={sessionId:[1,r.TYPES.STRING],mediaType:[2,r.TYPES.ENUM,l],masterKey:[3,r.TYPES.BYTES],caption:[4,r.TYPES.STRING]},te.internalSpec={mimetype:[2,r.TYPES.STRING],fileSha256:[3,r.TYPES.BYTES],mediaKey:[5,r.TYPES.BYTES],fileEncSha256:[6,r.TYPES.BYTES],directPath:[7,r.TYPES.STRING],mediaKeyTimestamp:[8,r.TYPES.INT64],contextInfo:[9,r.TYPES.MESSAGE,tn],participants:[10,r.FLAGS.REPEATED|r.TYPES.STRING]},ne.internalSpec={isVideo:[1,r.TYPES.BOOL],callOutcome:[2,r.TYPES.ENUM,u],durationSecs:[3,r.TYPES.INT64],callType:[4,r.TYPES.ENUM,c],participants:[5,r.FLAGS.REPEATED|r.TYPES.MESSAGE,re]},re.internalSpec={jid:[1,r.TYPES.STRING],callOutcome:[2,r.TYPES.ENUM,u]},ie.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec],editType:[2,r.TYPES.ENUM,d]},oe.internalSpec={scheduledTimestampMs:[1,r.TYPES.INT64],callType:[2,r.TYPES.ENUM,p],title:[3,r.TYPES.STRING]},ae.internalSpec={response:[1,r.TYPES.ENUM,f],timestampMs:[2,r.TYPES.INT64]},se.internalSpec={eventCreationMessageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,r.TYPES.BYTES],encIv:[3,r.TYPES.BYTES]},le.internalSpec={contextInfo:[1,r.TYPES.MESSAGE,tn],isCanceled:[2,r.TYPES.BOOL],name:[3,r.TYPES.STRING],description:[4,r.TYPES.STRING],location:[5,r.TYPES.MESSAGE,Jt],joinLink:[6,r.TYPES.STRING],startTime:[7,r.TYPES.INT64]},ue.internalSpec={message:[1,r.TYPES.MESSAGE,X],targetMessageKey:[2,r.TYPES.MESSAGE,i.MessageKeySpec]},ce.internalSpec={targetMessageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,r.TYPES.BYTES],encIv:[3,r.TYPES.BYTES]},de.internalSpec={targetMessageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,r.TYPES.BYTES],encIv:[3,r.TYPES.BYTES]},pe.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec],type:[2,r.TYPES.ENUM,_],senderTimestampMs:[3,r.TYPES.INT64]},fe.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec],keepType:[2,r.TYPES.ENUM,z],timestampMs:[3,r.TYPES.INT64]},_e.internalSpec={selectedOptions:[1,r.FLAGS.REPEATED|r.TYPES.BYTES]},ge.internalSpec={encPayload:[1,r.TYPES.BYTES],encIv:[2,r.TYPES.BYTES]},he.internalSpec={},Ae.internalSpec={pollCreationMessageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec],vote:[2,r.TYPES.MESSAGE,ge],metadata:[3,r.TYPES.MESSAGE,he],senderTimestampMs:[4,r.TYPES.INT64]},me.internalSpec={encKey:[1,r.TYPES.BYTES],name:[2,r.TYPES.STRING],options:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Ee],selectableOptionsCount:[4,r.TYPES.UINT32],contextInfo:[5,r.TYPES.MESSAGE,tn]},Ee.internalSpec={optionName:[1,r.TYPES.STRING]},ye.internalSpec={filehash:[1,r.FLAGS.REPEATED|r.TYPES.STRING],rmrSource:[2,r.TYPES.STRING],requestTimestamp:[3,r.TYPES.INT64]},Se.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec],text:[2,r.TYPES.STRING],groupingKey:[3,r.TYPES.STRING],senderTimestampMs:[4,r.TYPES.INT64]},ve.internalSpec={selectedButtonId:[1,r.TYPES.STRING],selectedDisplayText:[2,r.TYPES.STRING],contextInfo:[3,r.TYPES.MESSAGE,tn],type:[4,r.TYPES.ENUM,g],__oneofs__:{response:["selectedDisplayText"]}},Ie.internalSpec={text:[1,r.TYPES.STRING],documentMessage:[2,r.TYPES.MESSAGE,$t],imageMessage:[3,r.TYPES.MESSAGE,Zt],videoMessage:[4,r.TYPES.MESSAGE,Ht],locationMessage:[5,r.TYPES.MESSAGE,Jt],contentText:[6,r.TYPES.STRING],footerText:[7,r.TYPES.STRING],contextInfo:[8,r.TYPES.MESSAGE,tn],buttons:[9,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Te],headerType:[10,r.TYPES.ENUM,A],__oneofs__:{header:["text","documentMessage","imageMessage","videoMessage","locationMessage"]}},Te.internalSpec={buttonId:[1,r.TYPES.STRING],buttonText:[2,r.TYPES.MESSAGE,Me],type:[3,r.TYPES.ENUM,h],nativeFlowInfo:[4,r.TYPES.MESSAGE,be]},be.internalSpec={name:[1,r.TYPES.STRING],paramsJson:[2,r.TYPES.STRING]},Me.internalSpec={displayText:[1,r.TYPES.STRING]},Pe.internalSpec={targetMessageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec],encPayload:[2,r.TYPES.BYTES],encIv:[3,r.TYPES.BYTES],secretEncType:[4,r.TYPES.ENUM,m]},Ce.internalSpec={message:[1,r.TYPES.MESSAGE,X]},Oe.internalSpec={destinationJid:[1,r.TYPES.STRING],message:[2,r.TYPES.MESSAGE,X],phash:[3,r.TYPES.STRING]},Re.internalSpec={contextInfo:[1,r.TYPES.MESSAGE,tn]},Ne.internalSpec={newsletterJid:[1,r.TYPES.STRING],newsletterName:[2,r.TYPES.STRING],jpegThumbnail:[3,r.TYPES.BYTES],caption:[4,r.TYPES.STRING],inviteExpiration:[5,r.TYPES.INT64],contextInfo:[6,r.TYPES.MESSAGE,tn]},we.internalSpec={groupJid:[1,r.TYPES.STRING],inviteCode:[2,r.TYPES.STRING],inviteExpiration:[3,r.TYPES.INT64],groupName:[4,r.TYPES.STRING],jpegThumbnail:[5,r.TYPES.BYTES],caption:[6,r.TYPES.STRING],contextInfo:[7,r.TYPES.MESSAGE,tn],groupType:[8,r.TYPES.ENUM,E]},De.internalSpec={body:[1,r.TYPES.MESSAGE,Be],nativeFlowResponseMessage:[2,r.TYPES.MESSAGE,Le],contextInfo:[15,r.TYPES.MESSAGE,tn],__oneofs__:{interactiveResponseMessage:["nativeFlowResponseMessage"]}},Le.internalDefaults={version:1},Le.internalSpec={name:[1,r.TYPES.STRING],paramsJson:[2,r.TYPES.STRING],version:[3,r.TYPES.INT32]},Be.internalDefaults={format:y.DEFAULT},Be.internalSpec={text:[1,r.TYPES.STRING],format:[2,r.TYPES.ENUM,y]},ke.internalSpec={header:[1,r.TYPES.MESSAGE,Ve],body:[2,r.TYPES.MESSAGE,je],footer:[3,r.TYPES.MESSAGE,Ye],shopStorefrontMessage:[4,r.TYPES.MESSAGE,Ke],collectionMessage:[5,r.TYPES.MESSAGE,Fe],nativeFlowMessage:[6,r.TYPES.MESSAGE,Ue],carouselMessage:[7,r.TYPES.MESSAGE,Ge],contextInfo:[15,r.TYPES.MESSAGE,tn],__oneofs__:{interactiveMessage:["shopStorefrontMessage","collectionMessage","nativeFlowMessage","carouselMessage"]}},Ge.internalDefaults={messageVersion:1},Ge.internalSpec={cards:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,ke],messageVersion:[2,r.TYPES.INT32]},Ue.internalDefaults={messageVersion:1},Ue.internalSpec={buttons:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,xe],messageParamsJson:[2,r.TYPES.STRING],messageVersion:[3,r.TYPES.INT32]},xe.internalSpec={name:[1,r.TYPES.STRING],buttonParamsJson:[2,r.TYPES.STRING]},Fe.internalDefaults={messageVersion:1},Fe.internalSpec={bizJid:[1,r.TYPES.STRING],id:[2,r.TYPES.STRING],messageVersion:[3,r.TYPES.INT32]},Ke.internalDefaults={messageVersion:1},Ke.internalSpec={id:[1,r.TYPES.STRING],surface:[2,r.TYPES.ENUM,S],messageVersion:[3,r.TYPES.INT32]},Ye.internalSpec={text:[1,r.TYPES.STRING]},je.internalSpec={text:[1,r.TYPES.STRING]},Ve.internalSpec={title:[1,r.TYPES.STRING],subtitle:[2,r.TYPES.STRING],documentMessage:[3,r.TYPES.MESSAGE,$t],imageMessage:[4,r.TYPES.MESSAGE,Zt],jpegThumbnail:[6,r.TYPES.BYTES],videoMessage:[7,r.TYPES.MESSAGE,Ht],locationMessage:[8,r.TYPES.MESSAGE,Jt],productMessage:[9,r.TYPES.MESSAGE,tt],hasMediaAttachment:[5,r.TYPES.BOOL],__oneofs__:{media:["documentMessage","imageMessage","jpegThumbnail","videoMessage","locationMessage","productMessage"]}},We.internalSpec={title:[1,r.TYPES.STRING],listType:[2,r.TYPES.ENUM,v],singleSelectReply:[3,r.TYPES.MESSAGE,He],contextInfo:[4,r.TYPES.MESSAGE,tn],description:[5,r.TYPES.STRING]},He.internalSpec={selectedRowId:[1,r.TYPES.STRING]},Qe.internalSpec={title:[1,r.TYPES.STRING],description:[2,r.TYPES.STRING],buttonText:[3,r.TYPES.STRING],listType:[4,r.TYPES.ENUM,I],sections:[5,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Xe],productListInfo:[6,r.TYPES.MESSAGE,$e],footerText:[7,r.TYPES.STRING],contextInfo:[8,r.TYPES.MESSAGE,tn]},$e.internalSpec={productSections:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Je],headerImage:[2,r.TYPES.MESSAGE,qe],businessOwnerJid:[3,r.TYPES.STRING]},qe.internalSpec={productId:[1,r.TYPES.STRING],jpegThumbnail:[2,r.TYPES.BYTES]},Je.internalSpec={title:[1,r.TYPES.STRING],products:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,ze]},ze.internalSpec={productId:[1,r.TYPES.STRING]},Xe.internalSpec={title:[1,r.TYPES.STRING],rows:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Ze]},Ze.internalSpec={title:[1,r.TYPES.STRING],description:[2,r.TYPES.STRING],rowId:[3,r.TYPES.STRING]},et.internalDefaults={messageVersion:1},et.internalSpec={orderId:[1,r.TYPES.STRING],thumbnail:[2,r.TYPES.BYTES],itemCount:[3,r.TYPES.INT32],status:[4,r.TYPES.ENUM,b],surface:[5,r.TYPES.ENUM,T],message:[6,r.TYPES.STRING],orderTitle:[7,r.TYPES.STRING],sellerJid:[8,r.TYPES.STRING],token:[9,r.TYPES.STRING],totalAmount1000:[10,r.TYPES.INT64],totalCurrencyCode:[11,r.TYPES.STRING],contextInfo:[17,r.TYPES.MESSAGE,tn],messageVersion:[12,r.TYPES.INT32],orderRequestMessageId:[13,r.TYPES.MESSAGE,i.MessageKeySpec]},tt.internalSpec={product:[1,r.TYPES.MESSAGE,nt],businessOwnerJid:[2,r.TYPES.STRING],catalog:[4,r.TYPES.MESSAGE,rt],body:[5,r.TYPES.STRING],footer:[6,r.TYPES.STRING],contextInfo:[17,r.TYPES.MESSAGE,tn]},nt.internalSpec={productImage:[1,r.TYPES.MESSAGE,Zt],productId:[2,r.TYPES.STRING],title:[3,r.TYPES.STRING],description:[4,r.TYPES.STRING],currencyCode:[5,r.TYPES.STRING],priceAmount1000:[6,r.TYPES.INT64],retailerId:[7,r.TYPES.STRING],url:[8,r.TYPES.STRING],productImageCount:[9,r.TYPES.UINT32],firstImageId:[11,r.TYPES.STRING],salePriceAmount1000:[12,r.TYPES.INT64]},rt.internalSpec={catalogImage:[1,r.TYPES.MESSAGE,Zt],title:[2,r.TYPES.STRING],description:[3,r.TYPES.STRING]},it.internalSpec={selectedId:[1,r.TYPES.STRING],selectedDisplayText:[2,r.TYPES.STRING],contextInfo:[3,r.TYPES.MESSAGE,tn],selectedIndex:[4,r.TYPES.UINT32],selectedCarouselCardIndex:[5,r.TYPES.UINT32]},ot.internalSpec={fourRowTemplate:[1,r.TYPES.MESSAGE,st],hydratedFourRowTemplate:[2,r.TYPES.MESSAGE,at],interactiveMessageTemplate:[5,r.TYPES.MESSAGE,ke],contextInfo:[3,r.TYPES.MESSAGE,tn],hydratedTemplate:[4,r.TYPES.MESSAGE,at],templateId:[9,r.TYPES.STRING],__oneofs__:{format:["fourRowTemplate","hydratedFourRowTemplate","interactiveMessageTemplate"]}},at.internalSpec={documentMessage:[1,r.TYPES.MESSAGE,$t],hydratedTitleText:[2,r.TYPES.STRING],imageMessage:[3,r.TYPES.MESSAGE,Zt],videoMessage:[4,r.TYPES.MESSAGE,Ht],locationMessage:[5,r.TYPES.MESSAGE,Jt],hydratedContentText:[6,r.TYPES.STRING],hydratedFooterText:[7,r.TYPES.STRING],hydratedButtons:[8,r.FLAGS.REPEATED|r.TYPES.MESSAGE,In],templateId:[9,r.TYPES.STRING],maskLinkedDevices:[10,r.TYPES.BOOL],__oneofs__:{title:["documentMessage","hydratedTitleText","imageMessage","videoMessage","locationMessage"]}},st.internalSpec={documentMessage:[1,r.TYPES.MESSAGE,$t],highlyStructuredMessage:[2,r.TYPES.MESSAGE,gt],imageMessage:[3,r.TYPES.MESSAGE,Zt],videoMessage:[4,r.TYPES.MESSAGE,Ht],locationMessage:[5,r.TYPES.MESSAGE,Jt],content:[6,r.TYPES.MESSAGE,gt],footer:[7,r.TYPES.MESSAGE,gt],buttons:[8,r.FLAGS.REPEATED|r.TYPES.MESSAGE,En],__oneofs__:{title:["documentMessage","highlyStructuredMessage","imageMessage","videoMessage","locationMessage"]}},lt.internalSpec={url:[1,r.TYPES.STRING],fileSha256:[2,r.TYPES.BYTES],fileEncSha256:[3,r.TYPES.BYTES],mediaKey:[4,r.TYPES.BYTES],mimetype:[5,r.TYPES.STRING],height:[6,r.TYPES.UINT32],width:[7,r.TYPES.UINT32],directPath:[8,r.TYPES.STRING],fileLength:[9,r.TYPES.UINT64],mediaKeyTimestamp:[10,r.TYPES.INT64],firstFrameLength:[11,r.TYPES.UINT32],firstFrameSidecar:[12,r.TYPES.BYTES],isAnimated:[13,r.TYPES.BOOL],pngThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn],stickerSentTs:[18,r.TYPES.INT64],isAvatar:[19,r.TYPES.BOOL],isAiSticker:[20,r.TYPES.BOOL],isLottie:[21,r.TYPES.BOOL]},ut.internalSpec={degreesLatitude:[1,r.TYPES.DOUBLE],degreesLongitude:[2,r.TYPES.DOUBLE],accuracyInMeters:[3,r.TYPES.UINT32],speedInMps:[4,r.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[5,r.TYPES.UINT32],caption:[6,r.TYPES.STRING],sequenceNumber:[7,r.TYPES.INT64],timeOffset:[8,r.TYPES.UINT32],jpegThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn]},ct.internalSpec={serviceType:[1,r.TYPES.ENUM,M],expiryTimestamp:[2,r.TYPES.INT64]},dt.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec]},pt.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec]},ft.internalSpec={noteMessage:[4,r.TYPES.MESSAGE,X],currencyCodeIso4217:[1,r.TYPES.STRING],amount1000:[2,r.TYPES.UINT64],requestFrom:[3,r.TYPES.STRING],expiryTimestamp:[5,r.TYPES.INT64],amount:[6,r.TYPES.MESSAGE,Pn],background:[7,r.TYPES.MESSAGE,Cn]},_t.internalSpec={noteMessage:[2,r.TYPES.MESSAGE,X],requestMessageKey:[3,r.TYPES.MESSAGE,i.MessageKeySpec],background:[4,r.TYPES.MESSAGE,Cn]},gt.internalSpec={namespace:[1,r.TYPES.STRING],elementName:[2,r.TYPES.STRING],params:[3,r.FLAGS.REPEATED|r.TYPES.STRING],fallbackLg:[4,r.TYPES.STRING],fallbackLc:[5,r.TYPES.STRING],localizableParams:[6,r.FLAGS.REPEATED|r.TYPES.MESSAGE,ht],deterministicLg:[7,r.TYPES.STRING],deterministicLc:[8,r.TYPES.STRING],hydratedHsm:[9,r.TYPES.MESSAGE,ot]},ht.internalSpec={default:[1,r.TYPES.STRING],currency:[2,r.TYPES.MESSAGE,yt],dateTime:[3,r.TYPES.MESSAGE,At],__oneofs__:{paramOneof:["currency","dateTime"]}},At.internalSpec={component:[1,r.TYPES.MESSAGE,Et],unixEpoch:[2,r.TYPES.MESSAGE,mt],__oneofs__:{datetimeOneof:["component","unixEpoch"]}},mt.internalSpec={timestamp:[1,r.TYPES.INT64]},Et.internalSpec={dayOfWeek:[1,r.TYPES.ENUM,C],year:[2,r.TYPES.UINT32],month:[3,r.TYPES.UINT32],dayOfMonth:[4,r.TYPES.UINT32],hour:[5,r.TYPES.UINT32],minute:[6,r.TYPES.UINT32],calendar:[7,r.TYPES.ENUM,P]},yt.internalSpec={currencyCode:[1,r.TYPES.STRING],amount1000:[2,r.TYPES.INT64]},St.internalSpec={displayName:[1,r.TYPES.STRING],contacts:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,zt],contextInfo:[17,r.TYPES.MESSAGE,tn]},vt.internalSpec={securityNotificationEnabled:[1,r.TYPES.BOOL]},It.internalSpec={peerDataOperationRequestType:[1,r.TYPES.ENUM,O],stanzaId:[2,r.TYPES.STRING],peerDataOperationResult:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Tt]},Tt.internalSpec={mediaUploadResult:[1,r.TYPES.ENUM,o.MediaRetryNotification$ResultType],stickerMessage:[2,r.TYPES.MESSAGE,lt],linkPreviewResponse:[3,r.TYPES.MESSAGE,Mt],placeholderMessageResendResponse:[4,r.TYPES.MESSAGE,bt]},bt.internalSpec={webMessageInfoBytes:[1,r.TYPES.BYTES]},Mt.internalSpec={url:[1,r.TYPES.STRING],title:[2,r.TYPES.STRING],description:[3,r.TYPES.STRING],thumbData:[4,r.TYPES.BYTES],canonicalUrl:[5,r.TYPES.STRING],matchText:[6,r.TYPES.STRING],previewType:[7,r.TYPES.STRING],hqThumbnail:[8,r.TYPES.MESSAGE,Pt]},Pt.internalSpec={directPath:[1,r.TYPES.STRING],thumbHash:[2,r.TYPES.STRING],encThumbHash:[3,r.TYPES.STRING],mediaKey:[4,r.TYPES.BYTES],mediaKeyTimestampMs:[5,r.TYPES.INT64],thumbWidth:[6,r.TYPES.INT32],thumbHeight:[7,r.TYPES.INT32]},Ct.internalSpec={peerDataOperationRequestType:[1,r.TYPES.ENUM,O],requestStickerReupload:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,wt],requestUrlPreview:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Nt],historySyncOnDemandRequest:[4,r.TYPES.MESSAGE,Rt],placeholderMessageResendRequest:[5,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Ot]},Ot.internalSpec={messageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec]},Rt.internalSpec={chatJid:[1,r.TYPES.STRING],oldestMsgId:[2,r.TYPES.STRING],oldestMsgFromMe:[3,r.TYPES.BOOL],onDemandMsgCount:[4,r.TYPES.INT32],oldestMsgTimestampMs:[5,r.TYPES.INT64]},Nt.internalSpec={url:[1,r.TYPES.STRING],includeHqThumbnail:[2,r.TYPES.BOOL]},wt.internalSpec={fileSha256:[1,r.TYPES.STRING]},Dt.internalSpec={collectionNames:[1,r.FLAGS.REPEATED|r.TYPES.STRING],timestamp:[2,r.TYPES.INT64]},Lt.internalSpec={keyIds:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,Ut]},Bt.internalSpec={keys:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,xt]},kt.internalSpec={keyData:[1,r.TYPES.BYTES],fingerprint:[2,r.TYPES.MESSAGE,Gt],timestamp:[3,r.TYPES.INT64]},Gt.internalSpec={rawId:[1,r.TYPES.UINT32],currentIndex:[2,r.TYPES.UINT32],deviceIndexes:[3,r.FLAGS.REPEATED|r.FLAGS.PACKED|r.TYPES.UINT32]},Ut.internalSpec={keyId:[1,r.TYPES.BYTES]},xt.internalSpec={keyId:[1,r.TYPES.MESSAGE,Ut],keyData:[2,r.TYPES.MESSAGE,kt]},Ft.internalSpec={fileSha256:[1,r.TYPES.BYTES],fileLength:[2,r.TYPES.UINT64],mediaKey:[3,r.TYPES.BYTES],fileEncSha256:[4,r.TYPES.BYTES],directPath:[5,r.TYPES.STRING],syncType:[6,r.TYPES.ENUM,R],chunkOrder:[7,r.TYPES.UINT32],originalMessageId:[8,r.TYPES.STRING],progress:[9,r.TYPES.UINT32],oldestMsgInChunkTimestampSec:[10,r.TYPES.INT64],initialHistBootstrapInlinePayload:[11,r.TYPES.BYTES],peerDataRequestSessionId:[12,r.TYPES.STRING]},Kt.internalSpec={localChatState:[1,r.TYPES.ENUM,N]},Yt.internalSpec={key:[1,r.TYPES.MESSAGE,i.MessageKeySpec],type:[2,r.TYPES.ENUM,w],ephemeralExpiration:[4,r.TYPES.UINT32],ephemeralSettingTimestamp:[5,r.TYPES.INT64],historySyncNotification:[6,r.TYPES.MESSAGE,Ft],appStateSyncKeyShare:[7,r.TYPES.MESSAGE,Bt],appStateSyncKeyRequest:[8,r.TYPES.MESSAGE,Lt],initialSecurityNotificationSettingSync:[9,r.TYPES.MESSAGE,vt],appStateFatalExceptionNotification:[10,r.TYPES.MESSAGE,Dt],disappearingMode:[11,r.TYPES.MESSAGE,Rn],editedMessage:[14,r.TYPES.MESSAGE,X],timestampMs:[15,r.TYPES.INT64],peerDataOperationRequestMessage:[16,r.TYPES.MESSAGE,Ct],peerDataOperationRequestResponseMessage:[17,r.TYPES.MESSAGE,It],botFeedbackMessage:[18,r.TYPES.MESSAGE,jt],invokerJid:[19,r.TYPES.STRING],requestWelcomeMessageMetadata:[20,r.TYPES.MESSAGE,Kt],mediaNotifyMessage:[21,r.TYPES.MESSAGE,Ln]},jt.internalSpec={messageKey:[1,r.TYPES.MESSAGE,i.MessageKeySpec],kind:[2,r.TYPES.ENUM,B],text:[3,r.TYPES.STRING],kindNegative:[4,r.TYPES.UINT64],kindPositive:[5,r.TYPES.UINT64]},Vt.internalSpec={displayName:[1,r.TYPES.STRING],id:[2,r.TYPES.STRING]},Wt.internalSpec={callKey:[1,r.TYPES.BYTES],conversionSource:[2,r.TYPES.STRING],conversionData:[3,r.TYPES.BYTES],conversionDelaySeconds:[4,r.TYPES.UINT32]},Ht.internalSpec={url:[1,r.TYPES.STRING],mimetype:[2,r.TYPES.STRING],fileSha256:[3,r.TYPES.BYTES],fileLength:[4,r.TYPES.UINT64],seconds:[5,r.TYPES.UINT32],mediaKey:[6,r.TYPES.BYTES],caption:[7,r.TYPES.STRING],gifPlayback:[8,r.TYPES.BOOL],height:[9,r.TYPES.UINT32],width:[10,r.TYPES.UINT32],fileEncSha256:[11,r.TYPES.BYTES],interactiveAnnotations:[12,r.FLAGS.REPEATED|r.TYPES.MESSAGE,hn],directPath:[13,r.TYPES.STRING],mediaKeyTimestamp:[14,r.TYPES.INT64],jpegThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn],streamingSidecar:[18,r.TYPES.BYTES],gifAttribution:[19,r.TYPES.ENUM,k],viewOnce:[20,r.TYPES.BOOL],thumbnailDirectPath:[21,r.TYPES.STRING],thumbnailSha256:[22,r.TYPES.BYTES],thumbnailEncSha256:[23,r.TYPES.BYTES],staticUrl:[24,r.TYPES.STRING],annotations:[25,r.FLAGS.REPEATED|r.TYPES.MESSAGE,hn]},Qt.internalSpec={url:[1,r.TYPES.STRING],mimetype:[2,r.TYPES.STRING],fileSha256:[3,r.TYPES.BYTES],fileLength:[4,r.TYPES.UINT64],seconds:[5,r.TYPES.UINT32],ptt:[6,r.TYPES.BOOL],mediaKey:[7,r.TYPES.BYTES],fileEncSha256:[8,r.TYPES.BYTES],directPath:[9,r.TYPES.STRING],mediaKeyTimestamp:[10,r.TYPES.INT64],contextInfo:[17,r.TYPES.MESSAGE,tn],streamingSidecar:[18,r.TYPES.BYTES],waveform:[19,r.TYPES.BYTES],backgroundArgb:[20,r.TYPES.FIXED32],viewOnce:[21,r.TYPES.BOOL]},$t.internalSpec={url:[1,r.TYPES.STRING],mimetype:[2,r.TYPES.STRING],title:[3,r.TYPES.STRING],fileSha256:[4,r.TYPES.BYTES],fileLength:[5,r.TYPES.UINT64],pageCount:[6,r.TYPES.UINT32],mediaKey:[7,r.TYPES.BYTES],fileName:[8,r.TYPES.STRING],fileEncSha256:[9,r.TYPES.BYTES],directPath:[10,r.TYPES.STRING],mediaKeyTimestamp:[11,r.TYPES.INT64],contactVcard:[12,r.TYPES.BOOL],thumbnailDirectPath:[13,r.TYPES.STRING],thumbnailSha256:[14,r.TYPES.BYTES],thumbnailEncSha256:[15,r.TYPES.BYTES],jpegThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn],thumbnailHeight:[18,r.TYPES.UINT32],thumbnailWidth:[19,r.TYPES.UINT32],caption:[20,r.TYPES.STRING]},qt.internalSpec={text:[1,r.TYPES.STRING],matchedText:[2,r.TYPES.STRING],canonicalUrl:[4,r.TYPES.STRING],description:[5,r.TYPES.STRING],title:[6,r.TYPES.STRING],textArgb:[7,r.TYPES.FIXED32],backgroundArgb:[8,r.TYPES.FIXED32],font:[9,r.TYPES.ENUM,x],previewType:[10,r.TYPES.ENUM,U],jpegThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn],doNotPlayInline:[18,r.TYPES.BOOL],thumbnailDirectPath:[19,r.TYPES.STRING],thumbnailSha256:[20,r.TYPES.BYTES],thumbnailEncSha256:[21,r.TYPES.BYTES],mediaKey:[22,r.TYPES.BYTES],mediaKeyTimestamp:[23,r.TYPES.INT64],thumbnailHeight:[24,r.TYPES.UINT32],thumbnailWidth:[25,r.TYPES.UINT32],inviteLinkGroupType:[26,r.TYPES.ENUM,G],inviteLinkParentGroupSubjectV2:[27,r.TYPES.STRING],inviteLinkParentGroupThumbnailV2:[28,r.TYPES.BYTES],inviteLinkGroupTypeV2:[29,r.TYPES.ENUM,G],viewOnce:[30,r.TYPES.BOOL]},Jt.internalSpec={degreesLatitude:[1,r.TYPES.DOUBLE],degreesLongitude:[2,r.TYPES.DOUBLE],name:[3,r.TYPES.STRING],address:[4,r.TYPES.STRING],url:[5,r.TYPES.STRING],isLive:[6,r.TYPES.BOOL],accuracyInMeters:[7,r.TYPES.UINT32],speedInMps:[8,r.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[9,r.TYPES.UINT32],comment:[11,r.TYPES.STRING],jpegThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn]},zt.internalSpec={displayName:[1,r.TYPES.STRING],vcard:[16,r.TYPES.STRING],contextInfo:[17,r.TYPES.MESSAGE,tn]},Xt.internalSpec={note:[1,r.TYPES.STRING],token:[2,r.TYPES.STRING],attachmentType:[3,r.TYPES.ENUM,F],attachmentMimetype:[4,r.TYPES.STRING],attachmentMediaKey:[5,r.TYPES.BYTES],attachmentMediaKeyTimestamp:[6,r.TYPES.INT64],attachmentFileSha256:[7,r.TYPES.BYTES],attachmentFileEncSha256:[8,r.TYPES.BYTES],attachmentDirectPath:[9,r.TYPES.STRING],attachmentJpegThumbnail:[10,r.TYPES.BYTES]},Zt.internalSpec={url:[1,r.TYPES.STRING],mimetype:[2,r.TYPES.STRING],caption:[3,r.TYPES.STRING],fileSha256:[4,r.TYPES.BYTES],fileLength:[5,r.TYPES.UINT64],height:[6,r.TYPES.UINT32],width:[7,r.TYPES.UINT32],mediaKey:[8,r.TYPES.BYTES],fileEncSha256:[9,r.TYPES.BYTES],interactiveAnnotations:[10,r.FLAGS.REPEATED|r.TYPES.MESSAGE,hn],directPath:[11,r.TYPES.STRING],mediaKeyTimestamp:[12,r.TYPES.INT64],jpegThumbnail:[16,r.TYPES.BYTES],contextInfo:[17,r.TYPES.MESSAGE,tn],firstScanSidecar:[18,r.TYPES.BYTES],firstScanLength:[19,r.TYPES.UINT32],experimentGroupId:[20,r.TYPES.UINT32],scansSidecar:[21,r.TYPES.BYTES],scanLengths:[22,r.FLAGS.REPEATED|r.TYPES.UINT32],midQualityFileSha256:[23,r.TYPES.BYTES],midQualityFileEncSha256:[24,r.TYPES.BYTES],viewOnce:[25,r.TYPES.BOOL],thumbnailDirectPath:[26,r.TYPES.STRING],thumbnailSha256:[27,r.TYPES.BYTES],thumbnailEncSha256:[28,r.TYPES.BYTES],staticUrl:[29,r.TYPES.STRING],annotations:[30,r.FLAGS.REPEATED|r.TYPES.MESSAGE,hn],imageSourceType:[31,r.TYPES.ENUM,K]},en.internalSpec={groupId:[1,r.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,r.TYPES.BYTES]},tn.internalSpec={stanzaId:[1,r.TYPES.STRING],participant:[2,r.TYPES.STRING],quotedMessage:[3,r.TYPES.MESSAGE,X],remoteJid:[4,r.TYPES.STRING],mentionedJid:[15,r.FLAGS.REPEATED|r.TYPES.STRING],conversionSource:[18,r.TYPES.STRING],conversionData:[19,r.TYPES.BYTES],conversionDelaySeconds:[20,r.TYPES.UINT32],forwardingScore:[21,r.TYPES.UINT32],isForwarded:[22,r.TYPES.BOOL],quotedAd:[23,r.TYPES.MESSAGE,sn],placeholderKey:[24,r.TYPES.MESSAGE,i.MessageKeySpec],expiration:[25,r.TYPES.UINT32],ephemeralSettingTimestamp:[26,r.TYPES.INT64],ephemeralSharedSecret:[27,r.TYPES.BYTES],externalAdReply:[28,r.TYPES.MESSAGE,an],entryPointConversionSource:[29,r.TYPES.STRING],entryPointConversionApp:[30,r.TYPES.STRING],entryPointConversionDelaySeconds:[31,r.TYPES.UINT32],disappearingMode:[32,r.TYPES.MESSAGE,Rn],actionLink:[33,r.TYPES.MESSAGE,Nn],groupSubject:[34,r.TYPES.STRING],parentGroupJid:[35,r.TYPES.STRING],trustBannerType:[37,r.TYPES.STRING],trustBannerAction:[38,r.TYPES.UINT32],isSampled:[39,r.TYPES.BOOL],groupMentions:[40,r.FLAGS.REPEATED|r.TYPES.MESSAGE,wn],utm:[41,r.TYPES.MESSAGE,on],forwardedNewsletterMessageInfo:[43,r.TYPES.MESSAGE,rn],businessMessageForwardInfo:[44,r.TYPES.MESSAGE,ln],smbClientCampaignId:[45,r.TYPES.STRING],smbServerCampaignId:[46,r.TYPES.STRING],dataSharingContext:[47,r.TYPES.MESSAGE,nn],alwaysShowAdAttribution:[48,r.TYPES.BOOL]},nn.internalSpec={showMmDisclosure:[1,r.TYPES.BOOL]},rn.internalSpec={newsletterJid:[1,r.TYPES.STRING],serverMessageId:[2,r.TYPES.INT32],newsletterName:[3,r.TYPES.STRING],contentType:[4,r.TYPES.ENUM,Y],accessibilityText:[5,r.TYPES.STRING]},on.internalSpec={utmSource:[1,r.TYPES.STRING],utmCampaign:[2,r.TYPES.STRING]},an.internalSpec={title:[1,r.TYPES.STRING],body:[2,r.TYPES.STRING],mediaType:[3,r.TYPES.ENUM,j],thumbnailUrl:[4,r.TYPES.STRING],mediaUrl:[5,r.TYPES.STRING],thumbnail:[6,r.TYPES.BYTES],sourceType:[7,r.TYPES.STRING],sourceId:[8,r.TYPES.STRING],sourceUrl:[9,r.TYPES.STRING],containsAutoReply:[10,r.TYPES.BOOL],renderLargerThumbnail:[11,r.TYPES.BOOL],showAdAttribution:[12,r.TYPES.BOOL],ctwaClid:[13,r.TYPES.STRING],ref:[14,r.TYPES.STRING]},sn.internalSpec={advertiserName:[1,r.TYPES.STRING],mediaType:[2,r.TYPES.ENUM,V],jpegThumbnail:[16,r.TYPES.BYTES],caption:[17,r.TYPES.STRING]},ln.internalSpec={businessOwnerJid:[1,r.TYPES.STRING]},un.internalSpec={sentiment:[1,r.TYPES.UINT32],behaviorGraph:[2,r.TYPES.STRING],action:[3,r.TYPES.UINT32],intensity:[4,r.TYPES.UINT32],wordCount:[5,r.TYPES.UINT32]},cn.internalSpec={provider:[1,r.TYPES.ENUM,H],pluginType:[2,r.TYPES.ENUM,W],thumbnailCdnUrl:[3,r.TYPES.STRING],profilePhotoCdnUrl:[4,r.TYPES.STRING],searchProviderUrl:[5,r.TYPES.STRING],referenceIndex:[6,r.TYPES.UINT32],expectedLinksCount:[7,r.TYPES.UINT32],searchQuery:[9,r.TYPES.STRING],parentPluginMessageKey:[10,r.TYPES.MESSAGE,i.MessageKeySpec]},dn.internalSpec={suggestedPrompts:[1,r.FLAGS.REPEATED|r.TYPES.STRING],selectedPromptIndex:[2,r.TYPES.UINT32]},pn.internalSpec={sessionId:[1,r.TYPES.STRING]},fn.internalSpec={avatarMetadata:[1,r.TYPES.MESSAGE,un],personaId:[2,r.TYPES.STRING],pluginMetadata:[3,r.TYPES.MESSAGE,cn],suggestedPromptMetadata:[4,r.TYPES.MESSAGE,dn],invokerJid:[5,r.TYPES.STRING],searchMetadata:[6,r.TYPES.MESSAGE,pn]},_n.internalSpec={deviceListMetadata:[1,r.TYPES.MESSAGE,gn],deviceListMetadataVersion:[2,r.TYPES.INT32],messageSecret:[3,r.TYPES.BYTES],paddingBytes:[4,r.TYPES.BYTES],messageAddOnDurationInSecs:[5,r.TYPES.UINT32],botMessageSecret:[6,r.TYPES.BYTES],botMetadata:[7,r.TYPES.MESSAGE,fn],reportingTokenVersion:[8,r.TYPES.INT32]},gn.internalDefaults={senderAccountType:a.ADVEncryptionType.E2EE,receiverAccountType:a.ADVEncryptionType.E2EE},gn.internalSpec={senderKeyHash:[1,r.TYPES.BYTES],senderTimestamp:[2,r.TYPES.UINT64],senderKeyIndexes:[3,r.FLAGS.REPEATED|r.FLAGS.PACKED|r.TYPES.UINT32],senderAccountType:[4,r.TYPES.ENUM,a.ADVEncryptionType],receiverAccountType:[5,r.TYPES.ENUM,a.ADVEncryptionType],recipientKeyHash:[8,r.TYPES.BYTES],recipientTimestamp:[9,r.TYPES.UINT64],recipientKeyIndexes:[10,r.FLAGS.REPEATED|r.FLAGS.PACKED|r.TYPES.UINT32]},hn.internalSpec={polygonVertices:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,An],location:[2,r.TYPES.MESSAGE,mn],newsletter:[3,r.TYPES.MESSAGE,rn],shouldSkipConfirmation:[4,r.TYPES.BOOL],__oneofs__:{action:["location","newsletter"]}},An.internalSpec={xDeprecated:[1,r.TYPES.INT32],yDeprecated:[2,r.TYPES.INT32],x:[3,r.TYPES.DOUBLE],y:[4,r.TYPES.DOUBLE]},mn.internalSpec={degreesLatitude:[1,r.TYPES.DOUBLE],degreesLongitude:[2,r.TYPES.DOUBLE],name:[3,r.TYPES.STRING]},En.internalSpec={quickReplyButton:[1,r.TYPES.MESSAGE,vn],urlButton:[2,r.TYPES.MESSAGE,Sn],callButton:[3,r.TYPES.MESSAGE,yn],index:[4,r.TYPES.UINT32],__oneofs__:{button:["quickReplyButton","urlButton","callButton"]}},yn.internalSpec={displayText:[1,r.TYPES.MESSAGE,gt],phoneNumber:[2,r.TYPES.MESSAGE,gt]},Sn.internalSpec={displayText:[1,r.TYPES.MESSAGE,gt],url:[2,r.TYPES.MESSAGE,gt]},vn.internalSpec={displayText:[1,r.TYPES.MESSAGE,gt],id:[2,r.TYPES.STRING]},In.internalSpec={quickReplyButton:[1,r.TYPES.MESSAGE,Mn],urlButton:[2,r.TYPES.MESSAGE,bn],callButton:[3,r.TYPES.MESSAGE,Tn],index:[4,r.TYPES.UINT32],__oneofs__:{hydratedButton:["quickReplyButton","urlButton","callButton"]}},Tn.internalSpec={displayText:[1,r.TYPES.STRING],phoneNumber:[2,r.TYPES.STRING]},bn.internalSpec={displayText:[1,r.TYPES.STRING],url:[2,r.TYPES.STRING],consentedUsersUrl:[3,r.TYPES.STRING],webviewPresentation:[4,r.TYPES.ENUM,Q]},Mn.internalSpec={displayText:[1,r.TYPES.STRING],id:[2,r.TYPES.STRING]},Pn.internalSpec={value:[1,r.TYPES.INT64],offset:[2,r.TYPES.UINT32],currencyCode:[3,r.TYPES.STRING]},Cn.internalSpec={id:[1,r.TYPES.STRING],fileLength:[2,r.TYPES.UINT64],width:[3,r.TYPES.UINT32],height:[4,r.TYPES.UINT32],mimetype:[5,r.TYPES.STRING],placeholderArgb:[6,r.TYPES.FIXED32],textArgb:[7,r.TYPES.FIXED32],subtextArgb:[8,r.TYPES.FIXED32],mediaData:[9,r.TYPES.MESSAGE,On],type:[10,r.TYPES.ENUM,$]},On.internalSpec={mediaKey:[1,r.TYPES.BYTES],mediaKeyTimestamp:[2,r.TYPES.INT64],fileSha256:[3,r.TYPES.BYTES],fileEncSha256:[4,r.TYPES.BYTES],directPath:[5,r.TYPES.STRING]},Rn.internalSpec={initiator:[1,r.TYPES.ENUM,J],trigger:[2,r.TYPES.ENUM,q],initiatorDeviceJid:[3,r.TYPES.STRING],initiatedByMe:[4,r.TYPES.BOOL]},Nn.internalSpec={url:[1,r.TYPES.STRING],buttonTitle:[2,r.TYPES.STRING]},wn.internalSpec={groupJid:[1,r.TYPES.STRING],groupSubject:[2,r.TYPES.STRING]},Dn.internalSpec={version:[1,r.TYPES.SFIXED32],encIv:[2,r.TYPES.BYTES],encPayload:[3,r.TYPES.BYTES]},Ln.internalSpec={expressPathUrl:[1,r.TYPES.STRING],fileEncSha256:[2,r.TYPES.BYTES],fileLength:[3,r.TYPES.UINT64]}},13134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EphemeralSettingSpec=void 0;var r=n(91451);const i={};t.EphemeralSettingSpec=i,i.internalSpec={duration:[1,r.TYPES.SFIXED32],timestamp:[2,r.TYPES.SFIXED64]}},25993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WallpaperSettingsSpec=t.StickerMetadataSpec=t.PushnameSpec=t.PhoneNumberToLIDMappingSpec=t.PastParticipantsSpec=t.PastParticipantSpec=t.PastParticipant$LeaveReason=t.NotificationSettingsSpec=t.MediaVisibility=t.HistorySyncSpec=t.HistorySyncMsgSpec=t.HistorySync$HistorySyncType=t.HistorySync$BotAIWaitListState=t.GroupParticipantSpec=t.GroupParticipant$Rank=t.GlobalSettingsSpec=t.ConversationSpec=t.Conversation$EndOfHistoryTransferType=t.AvatarUserSettingsSpec=t.AutoDownloadSettingsSpec=void 0;var r=n(91451),i=n(38601),o=n(77026),a=n(16242),s=n(82121);const l=n(76672)({IN_WAITLIST:0,AI_AVAILABLE:1});t.HistorySync$BotAIWaitListState=l;const u=n(76672)({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4,NON_BLOCKING_DATA:5,ON_DEMAND:6});t.HistorySync$HistorySyncType=u;const c=n(76672)({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1,COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY:2});t.Conversation$EndOfHistoryTransferType=c;const d=n(76672)({REGULAR:0,ADMIN:1,SUPERADMIN:2});t.GroupParticipant$Rank=d;const p=n(76672)({DEFAULT:0,OFF:1,ON:2});t.MediaVisibility=p;const f=n(76672)({LEFT:0,REMOVED:1});t.PastParticipant$LeaveReason=f;const _={};t.HistorySyncSpec=_;const g={};t.ConversationSpec=g;const h={};t.PhoneNumberToLIDMappingSpec=h;const A={};t.HistorySyncMsgSpec=A;const m={};t.PushnameSpec=m;const E={};t.GroupParticipantSpec=E;const y={};t.WallpaperSettingsSpec=y;const S={};t.GlobalSettingsSpec=S;const v={};t.AutoDownloadSettingsSpec=v;const I={};t.StickerMetadataSpec=I;const T={};t.PastParticipantsSpec=T;const b={};t.PastParticipantSpec=b;const M={};t.AvatarUserSettingsSpec=M;const P={};t.NotificationSettingsSpec=P,_.internalSpec={syncType:[1,r.FLAGS.REQUIRED|r.TYPES.ENUM,u],conversations:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,g],statusV3Messages:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,i.WebMessageInfoSpec],chunkOrder:[5,r.TYPES.UINT32],progress:[6,r.TYPES.UINT32],pushnames:[7,r.FLAGS.REPEATED|r.TYPES.MESSAGE,m],globalSettings:[8,r.TYPES.MESSAGE,S],threadIdUserSecret:[9,r.TYPES.BYTES],threadDsTimeframeOffset:[10,r.TYPES.UINT32],recentStickers:[11,r.FLAGS.REPEATED|r.TYPES.MESSAGE,I],pastParticipants:[12,r.FLAGS.REPEATED|r.TYPES.MESSAGE,T],callLogRecords:[13,r.FLAGS.REPEATED|r.TYPES.MESSAGE,a.CallLogRecordSpec],aiWaitListState:[14,r.TYPES.ENUM,l],phoneNumberToLidMappings:[15,r.FLAGS.REPEATED|r.TYPES.MESSAGE,h]},g.internalSpec={id:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],messages:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,A],newJid:[3,r.TYPES.STRING],oldJid:[4,r.TYPES.STRING],lastMsgTimestamp:[5,r.TYPES.UINT64],unreadCount:[6,r.TYPES.UINT32],readOnly:[7,r.TYPES.BOOL],endOfHistoryTransfer:[8,r.TYPES.BOOL],ephemeralExpiration:[9,r.TYPES.UINT32],ephemeralSettingTimestamp:[10,r.TYPES.INT64],endOfHistoryTransferType:[11,r.TYPES.ENUM,c],conversationTimestamp:[12,r.TYPES.UINT64],name:[13,r.TYPES.STRING],pHash:[14,r.TYPES.STRING],notSpam:[15,r.TYPES.BOOL],archived:[16,r.TYPES.BOOL],disappearingMode:[17,r.TYPES.MESSAGE,o.DisappearingModeSpec],unreadMentionCount:[18,r.TYPES.UINT32],markedAsUnread:[19,r.TYPES.BOOL],participant:[20,r.FLAGS.REPEATED|r.TYPES.MESSAGE,E],tcToken:[21,r.TYPES.BYTES],tcTokenTimestamp:[22,r.TYPES.UINT64],contactPrimaryIdentityKey:[23,r.TYPES.BYTES],pinned:[24,r.TYPES.UINT32],muteEndTime:[25,r.TYPES.UINT64],wallpaper:[26,r.TYPES.MESSAGE,y],mediaVisibility:[27,r.TYPES.ENUM,p],tcTokenSenderTimestamp:[28,r.TYPES.UINT64],suspended:[29,r.TYPES.BOOL],terminated:[30,r.TYPES.BOOL],createdAt:[31,r.TYPES.UINT64],createdBy:[32,r.TYPES.STRING],description:[33,r.TYPES.STRING],support:[34,r.TYPES.BOOL],isParentGroup:[35,r.TYPES.BOOL],parentGroupId:[37,r.TYPES.STRING],isDefaultSubgroup:[36,r.TYPES.BOOL],displayName:[38,r.TYPES.STRING],pnJid:[39,r.TYPES.STRING],shareOwnPn:[40,r.TYPES.BOOL],pnhDuplicateLidThread:[41,r.TYPES.BOOL],lidJid:[42,r.TYPES.STRING],username:[43,r.TYPES.STRING],lidOriginType:[44,r.TYPES.STRING],commentsCount:[45,r.TYPES.UINT32],locked:[46,r.TYPES.BOOL]},h.internalSpec={pnJid:[1,r.TYPES.STRING],lidJid:[2,r.TYPES.STRING]},A.internalSpec={message:[1,r.TYPES.MESSAGE,i.WebMessageInfoSpec],msgOrderId:[2,r.TYPES.UINT64]},m.internalSpec={id:[1,r.TYPES.STRING],pushname:[2,r.TYPES.STRING]},E.internalSpec={userJid:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],rank:[2,r.TYPES.ENUM,d]},y.internalSpec={filename:[1,r.TYPES.STRING],opacity:[2,r.TYPES.UINT32]},S.internalSpec={lightThemeWallpaper:[1,r.TYPES.MESSAGE,y],mediaVisibility:[2,r.TYPES.ENUM,p],darkThemeWallpaper:[3,r.TYPES.MESSAGE,y],autoDownloadWiFi:[4,r.TYPES.MESSAGE,v],autoDownloadCellular:[5,r.TYPES.MESSAGE,v],autoDownloadRoaming:[6,r.TYPES.MESSAGE,v],showIndividualNotificationsPreview:[7,r.TYPES.BOOL],showGroupNotificationsPreview:[8,r.TYPES.BOOL],disappearingModeDuration:[9,r.TYPES.INT32],disappearingModeTimestamp:[10,r.TYPES.INT64],avatarUserSettings:[11,r.TYPES.MESSAGE,M],fontSize:[12,r.TYPES.INT32],securityNotifications:[13,r.TYPES.BOOL],autoUnarchiveChats:[14,r.TYPES.BOOL],videoQualityMode:[15,r.TYPES.INT32],photoQualityMode:[16,r.TYPES.INT32],individualNotificationSettings:[17,r.TYPES.MESSAGE,P],groupNotificationSettings:[18,r.TYPES.MESSAGE,P],chatLockSettings:[19,r.TYPES.MESSAGE,s.ChatLockSettingsSpec]},v.internalSpec={downloadImages:[1,r.TYPES.BOOL],downloadAudio:[2,r.TYPES.BOOL],downloadVideo:[3,r.TYPES.BOOL],downloadDocuments:[4,r.TYPES.BOOL]},I.internalSpec={url:[1,r.TYPES.STRING],fileSha256:[2,r.TYPES.BYTES],fileEncSha256:[3,r.TYPES.BYTES],mediaKey:[4,r.TYPES.BYTES],mimetype:[5,r.TYPES.STRING],height:[6,r.TYPES.UINT32],width:[7,r.TYPES.UINT32],directPath:[8,r.TYPES.STRING],fileLength:[9,r.TYPES.UINT64],weight:[10,r.TYPES.FLOAT],lastStickerSentTs:[11,r.TYPES.INT64],isLottie:[12,r.TYPES.BOOL]},T.internalSpec={groupJid:[1,r.TYPES.STRING],pastParticipants:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,b]},b.internalSpec={userJid:[1,r.TYPES.STRING],leaveReason:[2,r.TYPES.ENUM,f],leaveTs:[3,r.TYPES.UINT64]},M.internalSpec={fbid:[1,r.TYPES.STRING],password:[2,r.TYPES.STRING]},P.internalSpec={messageVibrate:[1,r.TYPES.STRING],messagePopup:[2,r.TYPES.STRING],messageLight:[3,r.TYPES.STRING],lowPriorityNotifications:[4,r.TYPES.BOOL],reactionsMuted:[5,r.TYPES.BOOL],callVibrate:[6,r.TYPES.STRING]}},44277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatRowOpaqueDataSpec=t.ChatRowOpaqueData$DraftMessageSpec=t.ChatRowOpaqueData$DraftMessage$CtwaContextLinkDataSpec=t.ChatRowOpaqueData$DraftMessage$CtwaContextDataSpec=t.ChatRowOpaqueData$DraftMessage$CtwaContextData$ContextInfoExternalAdReplyInfoMediaType=void 0;var r=n(91451);const i=n(76672)({NONE:0,IMAGE:1,VIDEO:2});t.ChatRowOpaqueData$DraftMessage$CtwaContextData$ContextInfoExternalAdReplyInfoMediaType=i;const o={};t.ChatRowOpaqueDataSpec=o;const a={};t.ChatRowOpaqueData$DraftMessageSpec=a;const s={};t.ChatRowOpaqueData$DraftMessage$CtwaContextDataSpec=s;const l={};t.ChatRowOpaqueData$DraftMessage$CtwaContextLinkDataSpec=l,o.internalSpec={draftMessage:[1,r.TYPES.MESSAGE,a]},a.internalSpec={text:[1,r.TYPES.STRING],omittedUrl:[2,r.TYPES.STRING],ctwaContextLinkData:[3,r.TYPES.MESSAGE,l],ctwaContext:[4,r.TYPES.MESSAGE,s],timestamp:[5,r.TYPES.INT64]},s.internalSpec={conversionSource:[1,r.TYPES.STRING],conversionData:[2,r.TYPES.BYTES],sourceUrl:[3,r.TYPES.STRING],sourceId:[4,r.TYPES.STRING],sourceType:[5,r.TYPES.STRING],title:[6,r.TYPES.STRING],description:[7,r.TYPES.STRING],thumbnail:[8,r.TYPES.STRING],thumbnailUrl:[9,r.TYPES.STRING],mediaType:[10,r.TYPES.ENUM,i],mediaUrl:[11,r.TYPES.STRING],isSuspiciousLink:[12,r.TYPES.BOOL]},l.internalSpec={context:[1,r.TYPES.STRING],sourceUrl:[2,r.TYPES.STRING],icebreaker:[3,r.TYPES.STRING],phone:[4,r.TYPES.STRING]}},34801:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollEncValueSpec=t.MsgRowOpaqueDataSpec=t.MsgOpaqueDataSpec=t.MsgOpaqueData$PollOptionSpec=t.MsgOpaqueData$EventLocationSpec=void 0;var r=n(91451);const i={};t.MsgRowOpaqueDataSpec=i;const o={};t.PollEncValueSpec=o;const a={};t.MsgOpaqueDataSpec=a;const s={};t.MsgOpaqueData$EventLocationSpec=s;const l={};t.MsgOpaqueData$PollOptionSpec=l,i.internalSpec={currentMsg:[1,r.TYPES.MESSAGE,a],quotedMsg:[2,r.TYPES.MESSAGE,a]},o.internalSpec={encPayload:[1,r.TYPES.BYTES],encIv:[2,r.TYPES.BYTES]},a.internalSpec={body:[1,r.TYPES.STRING],caption:[3,r.TYPES.STRING],lng:[5,r.TYPES.DOUBLE],isLive:[6,r.TYPES.BOOL],lat:[7,r.TYPES.DOUBLE],paymentAmount1000:[8,r.TYPES.INT32],paymentNoteMsgBody:[9,r.TYPES.STRING],canonicalUrl:[10,r.TYPES.STRING],matchedText:[11,r.TYPES.STRING],title:[12,r.TYPES.STRING],description:[13,r.TYPES.STRING],futureproofBuffer:[14,r.TYPES.BYTES],clientUrl:[15,r.TYPES.STRING],loc:[16,r.TYPES.STRING],pollName:[17,r.TYPES.STRING],pollOptions:[18,r.FLAGS.REPEATED|r.TYPES.MESSAGE,l],pollSelectableOptionsCount:[20,r.TYPES.UINT32],messageSecret:[21,r.TYPES.BYTES],originalSelfAuthor:[51,r.TYPES.STRING],senderTimestampMs:[22,r.TYPES.INT64],pollUpdateParentKey:[23,r.TYPES.STRING],encPollVote:[24,r.TYPES.MESSAGE,o],isSentCagPollCreation:[28,r.TYPES.BOOL],encReactionTargetMessageKey:[25,r.TYPES.STRING],encReactionEncPayload:[26,r.TYPES.BYTES],encReactionEncIv:[27,r.TYPES.BYTES],botMessageSecret:[29,r.TYPES.BYTES],targetMessageKey:[30,r.TYPES.STRING],encPayload:[31,r.TYPES.BYTES],encIv:[32,r.TYPES.BYTES],eventName:[33,r.TYPES.STRING],isEventCanceled:[34,r.TYPES.BOOL],eventDescription:[35,r.TYPES.STRING],eventJoinLink:[36,r.TYPES.STRING],eventStartTime:[37,r.TYPES.INT64],eventLocation:[38,r.TYPES.MESSAGE,s]},s.internalSpec={degreesLatitude:[1,r.TYPES.DOUBLE],degreesLongitude:[2,r.TYPES.DOUBLE],name:[3,r.TYPES.STRING],address:[4,r.TYPES.STRING],url:[5,r.TYPES.STRING],jpegThumbnail:[6,r.TYPES.BYTES]},l.internalSpec={name:[1,r.TYPES.STRING]}},92754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerErrorReceiptSpec=t.MediaRetryNotificationSpec=t.MediaRetryNotification$ResultType=void 0;var r=n(91451);const i=n(76672)({GENERAL_ERROR:0,SUCCESS:1,NOT_FOUND:2,DECRYPTION_ERROR:3});t.MediaRetryNotification$ResultType=i;const o={};t.MediaRetryNotificationSpec=o;const a={};t.ServerErrorReceiptSpec=a,o.internalSpec={stanzaId:[1,r.TYPES.STRING],directPath:[2,r.TYPES.STRING],result:[3,r.TYPES.ENUM,i]},a.internalSpec={stanzaId:[1,r.TYPES.STRING]}},17059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageKeySpec=void 0;var r=n(91451);const i={};t.MessageKeySpec=i,i.internalSpec={remoteJid:[1,r.TYPES.STRING],fromMe:[2,r.TYPES.BOOL],id:[3,r.TYPES.STRING],participant:[4,r.TYPES.STRING]}},47977:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserPasswordSpec=t.UserPassword$TransformerArgSpec=t.UserPassword$TransformerArg$ValueSpec=t.UserPassword$Transformer=t.UserPassword$Encoding=void 0;var r=n(91451);const i=n(76672)({NONE:0,PBKDF2_HMAC_SHA512:1,PBKDF2_HMAC_SHA384:2});t.UserPassword$Transformer=i;const o=n(76672)({UTF8:0});t.UserPassword$Encoding=o;const a={};t.UserPasswordSpec=a;const s={};t.UserPassword$TransformerArgSpec=s;const l={};t.UserPassword$TransformerArg$ValueSpec=l,a.internalSpec={encoding:[1,r.TYPES.ENUM,o],transformer:[2,r.TYPES.ENUM,i],transformerArg:[3,r.FLAGS.REPEATED|r.TYPES.MESSAGE,s],transformedData:[4,r.TYPES.BYTES]},s.internalSpec={key:[1,r.TYPES.STRING],value:[2,r.TYPES.MESSAGE,l]},l.internalSpec={asBlob:[1,r.TYPES.BYTES],asUnsignedInteger:[2,r.TYPES.UINT32],__oneofs__:{value:["asBlob","asUnsignedInteger"]}}},4012:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerifiedNameCertificateSpec=t.VerifiedNameCertificate$DetailsSpec=t.LocalizedNameSpec=t.BizIdentityInfoSpec=t.BizIdentityInfo$VerifiedLevelValue=t.BizIdentityInfo$HostStorageType=t.BizIdentityInfo$ActualActorsType=t.BizAccountPayloadSpec=t.BizAccountLinkInfoSpec=t.BizAccountLinkInfo$HostStorageType=t.BizAccountLinkInfo$AccountType=void 0;var r=n(91451);const i=n(76672)({ENTERPRISE:0});t.BizAccountLinkInfo$AccountType=i;const o=n(76672)({ON_PREMISE:0,FACEBOOK:1});t.BizAccountLinkInfo$HostStorageType=o;const a=n(76672)({SELF:0,BSP:1});t.BizIdentityInfo$ActualActorsType=a;const s=n(76672)({ON_PREMISE:0,FACEBOOK:1});t.BizIdentityInfo$HostStorageType=s;const l=n(76672)({UNKNOWN:0,LOW:1,HIGH:2});t.BizIdentityInfo$VerifiedLevelValue=l;const u={};t.LocalizedNameSpec=u;const c={};t.VerifiedNameCertificateSpec=c;const d={};t.VerifiedNameCertificate$DetailsSpec=d;const p={};t.BizAccountPayloadSpec=p;const f={};t.BizAccountLinkInfoSpec=f;const _={};t.BizIdentityInfoSpec=_,u.internalSpec={lg:[1,r.TYPES.STRING],lc:[2,r.TYPES.STRING],verifiedName:[3,r.TYPES.STRING]},c.internalSpec={details:[1,r.TYPES.BYTES],signature:[2,r.TYPES.BYTES],serverSignature:[3,r.TYPES.BYTES]},d.internalSpec={serial:[1,r.TYPES.UINT64],issuer:[2,r.TYPES.STRING],verifiedName:[4,r.TYPES.STRING],localizedNames:[8,r.FLAGS.REPEATED|r.TYPES.MESSAGE,u],issueTime:[10,r.TYPES.UINT64]},p.internalSpec={vnameCert:[1,r.TYPES.MESSAGE,c],bizAcctLinkInfo:[2,r.TYPES.BYTES]},f.internalSpec={whatsappBizAcctFbid:[1,r.TYPES.UINT64],whatsappAcctNumber:[2,r.TYPES.STRING],issueTime:[3,r.TYPES.UINT64],hostStorage:[4,r.TYPES.ENUM,o],accountType:[5,r.TYPES.ENUM,i]},_.internalSpec={vlevel:[1,r.TYPES.ENUM,l],vnameCert:[2,r.TYPES.MESSAGE,c],signed:[3,r.TYPES.BOOL],revoked:[4,r.TYPES.BOOL],hostStorage:[5,r.TYPES.ENUM,s],actualActors:[6,r.TYPES.ENUM,a],privacyModeTs:[7,r.TYPES.UINT64],featureControls:[8,r.TYPES.UINT64]}},16219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandshakeMessageSpec=t.HandshakeMessage$ServerHelloSpec=t.HandshakeMessage$ClientHelloSpec=t.HandshakeMessage$ClientFinishSpec=t.ClientPayloadSpec=t.ClientPayload$WebInfoSpec=t.ClientPayload$WebInfo$WebdPayloadSpec=t.ClientPayload$WebInfo$WebSubPlatform=t.ClientPayload$UserAgentSpec=t.ClientPayload$UserAgent$ReleaseChannel=t.ClientPayload$UserAgent$Platform=t.ClientPayload$UserAgent$DeviceType=t.ClientPayload$UserAgent$AppVersionSpec=t.ClientPayload$Product=t.ClientPayload$InteropDataSpec=t.ClientPayload$IOSAppExtension=t.ClientPayload$DevicePairingRegistrationDataSpec=t.ClientPayload$DNSSourceSpec=t.ClientPayload$DNSSource$DNSResolutionMethod=t.ClientPayload$ConnectType=t.ClientPayload$ConnectReason=void 0;var r=n(91451);const i=n(76672)({WHATSAPP:0,MESSENGER:1,INTEROP:2,INTEROP_MSGR:3});t.ClientPayload$Product=i;const o=n(76672)({SYSTEM:0,GOOGLE:1,HARDCODED:2,OVERRIDE:3,FALLBACK:4});t.ClientPayload$DNSSource$DNSResolutionMethod=o;const a=n(76672)({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112});t.ClientPayload$ConnectType=a;const s=n(76672)({PUSH:0,USER_ACTIVATED:1,SCHEDULED:2,ERROR_RECONNECT:3,NETWORK_SWITCH:4,PING_RECONNECT:5,UNKNOWN:6});t.ClientPayload$ConnectReason=s;const l=n(76672)({SHARE_EXTENSION:0,SERVICE_EXTENSION:1,INTENTS_EXTENSION:2});t.ClientPayload$IOSAppExtension=l;const u=n(76672)({WEB_BROWSER:0,APP_STORE:1,WIN_STORE:2,DARWIN:3,WIN32:4});t.ClientPayload$WebInfo$WebSubPlatform=u;const c=n(76672)({PHONE:0,TABLET:1,DESKTOP:2,WEARABLE:3,VR:4});t.ClientPayload$UserAgent$DeviceType=c;const d=n(76672)({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3});t.ClientPayload$UserAgent$ReleaseChannel=d;const p=n(76672)({ANDROID:0,IOS:1,WINDOWS_PHONE:2,BLACKBERRY:3,BLACKBERRYX:4,S40:5,S60:6,PYTHON_CLIENT:7,TIZEN:8,ENTERPRISE:9,SMB_ANDROID:10,KAIOS:11,SMB_IOS:12,WINDOWS:13,WEB:14,PORTAL:15,GREEN_ANDROID:16,GREEN_IPHONE:17,BLUE_ANDROID:18,BLUE_IPHONE:19,FBLITE_ANDROID:20,MLITE_ANDROID:21,IGLITE_ANDROID:22,PAGE:23,MACOS:24,OCULUS_MSG:25,OCULUS_CALL:26,MILAN:27,CAPI:28,WEAROS:29,ARDEVICE:30,VRDEVICE:31,BLUE_WEB:32,IPAD:33,TEST:34,SMART_GLASSES:35});t.ClientPayload$UserAgent$Platform=p;const f={};t.HandshakeMessageSpec=f;const _={};t.HandshakeMessage$ClientFinishSpec=_;const g={};t.HandshakeMessage$ServerHelloSpec=g;const h={};t.HandshakeMessage$ClientHelloSpec=h;const A={};t.ClientPayloadSpec=A;const m={};t.ClientPayload$InteropDataSpec=m;const E={};t.ClientPayload$DevicePairingRegistrationDataSpec=E;const y={};t.ClientPayload$DNSSourceSpec=y;const S={};t.ClientPayload$WebInfoSpec=S;const v={};t.ClientPayload$WebInfo$WebdPayloadSpec=v;const I={};t.ClientPayload$UserAgentSpec=I;const T={};t.ClientPayload$UserAgent$AppVersionSpec=T,f.internalSpec={clientHello:[2,r.TYPES.MESSAGE,h],serverHello:[3,r.TYPES.MESSAGE,g],clientFinish:[4,r.TYPES.MESSAGE,_]},_.internalSpec={static:[1,r.TYPES.BYTES],payload:[2,r.TYPES.BYTES]},g.internalSpec={ephemeral:[1,r.TYPES.BYTES],static:[2,r.TYPES.BYTES],payload:[3,r.TYPES.BYTES]},h.internalSpec={ephemeral:[1,r.TYPES.BYTES],static:[2,r.TYPES.BYTES],payload:[3,r.TYPES.BYTES]},A.internalSpec={username:[1,r.TYPES.UINT64],passive:[3,r.TYPES.BOOL],userAgent:[5,r.TYPES.MESSAGE,I],webInfo:[6,r.TYPES.MESSAGE,S],pushName:[7,r.TYPES.STRING],sessionId:[9,r.TYPES.SFIXED32],shortConnect:[10,r.TYPES.BOOL],connectType:[12,r.TYPES.ENUM,a],connectReason:[13,r.TYPES.ENUM,s],shards:[14,r.FLAGS.REPEATED|r.TYPES.INT32],dnsSource:[15,r.TYPES.MESSAGE,y],connectAttemptCount:[16,r.TYPES.UINT32],device:[18,r.TYPES.UINT32],devicePairingData:[19,r.TYPES.MESSAGE,E],product:[20,r.TYPES.ENUM,i],fbCat:[21,r.TYPES.BYTES],fbUserAgent:[22,r.TYPES.BYTES],oc:[23,r.TYPES.BOOL],lc:[24,r.TYPES.INT32],iosAppExtension:[30,r.TYPES.ENUM,l],fbAppId:[31,r.TYPES.UINT64],fbDeviceId:[32,r.TYPES.BYTES],pull:[33,r.TYPES.BOOL],paddingBytes:[34,r.TYPES.BYTES],yearClass:[36,r.TYPES.INT32],memClass:[37,r.TYPES.INT32],interopData:[38,r.TYPES.MESSAGE,m]},m.internalSpec={accountId:[1,r.TYPES.UINT64],token:[2,r.TYPES.BYTES]},E.internalSpec={eRegid:[1,r.TYPES.BYTES],eKeytype:[2,r.TYPES.BYTES],eIdent:[3,r.TYPES.BYTES],eSkeyId:[4,r.TYPES.BYTES],eSkeyVal:[5,r.TYPES.BYTES],eSkeySig:[6,r.TYPES.BYTES],buildHash:[7,r.TYPES.BYTES],deviceProps:[8,r.TYPES.BYTES]},y.internalSpec={dnsMethod:[15,r.TYPES.ENUM,o],appCached:[16,r.TYPES.BOOL]},S.internalSpec={refToken:[1,r.TYPES.STRING],version:[2,r.TYPES.STRING],webdPayload:[3,r.TYPES.MESSAGE,v],webSubPlatform:[4,r.TYPES.ENUM,u]},v.internalSpec={usesParticipantInKey:[1,r.TYPES.BOOL],supportsStarredMessages:[2,r.TYPES.BOOL],supportsDocumentMessages:[3,r.TYPES.BOOL],supportsUrlMessages:[4,r.TYPES.BOOL],supportsMediaRetry:[5,r.TYPES.BOOL],supportsE2EImage:[6,r.TYPES.BOOL],supportsE2EVideo:[7,r.TYPES.BOOL],supportsE2EAudio:[8,r.TYPES.BOOL],supportsE2EDocument:[9,r.TYPES.BOOL],documentTypes:[10,r.TYPES.STRING],features:[11,r.TYPES.BYTES]},I.internalSpec={platform:[1,r.TYPES.ENUM,p],appVersion:[2,r.TYPES.MESSAGE,T],mcc:[3,r.TYPES.STRING],mnc:[4,r.TYPES.STRING],osVersion:[5,r.TYPES.STRING],manufacturer:[6,r.TYPES.STRING],device:[7,r.TYPES.STRING],osBuildNumber:[8,r.TYPES.STRING],phoneId:[9,r.TYPES.STRING],releaseChannel:[10,r.TYPES.ENUM,d],localeLanguageIso6391:[11,r.TYPES.STRING],localeCountryIso31661Alpha2:[12,r.TYPES.STRING],deviceBoard:[13,r.TYPES.STRING],deviceExpId:[14,r.TYPES.STRING],deviceType:[15,r.TYPES.ENUM,c],deviceModelType:[16,r.TYPES.STRING]},T.internalSpec={primary:[1,r.TYPES.UINT32],secondary:[2,r.TYPES.UINT32],tertiary:[3,r.TYPES.UINT32],quaternary:[4,r.TYPES.UINT32],quinary:[5,r.TYPES.UINT32]}},38601:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebNotificationsInfoSpec=t.WebMessageInfoSpec=t.WebMessageInfo$StubType=t.WebMessageInfo$Status=t.WebMessageInfo$BizPrivacyStatus=t.WebFeaturesSpec=t.WebFeatures$Flag=t.UserReceiptSpec=t.StatusPSASpec=t.ReportingTokenInfoSpec=t.ReactionSpec=t.PremiumMessageInfoSpec=t.PollUpdateSpec=t.PollAdditionalMetadataSpec=t.PinInChatSpec=t.PinInChat$Type=t.PhotoChangeSpec=t.PaymentInfoSpec=t.PaymentInfo$TxnStatus=t.PaymentInfo$Status=t.PaymentInfo$Currency=t.NotificationMessageInfoSpec=t.MessageAddOnContextInfoSpec=t.MediaDataSpec=t.KeepInChatSpec=t.EventResponseSpec=t.EventAdditionalMetadataSpec=t.CommentMetadataSpec=void 0;var r=n(91451),i=n(77026),o=n(17059);const a=n(76672)({E2EE:0,FB:2,BSP:1,BSP_AND_FB:3});t.WebMessageInfo$BizPrivacyStatus=a;const s=n(76672)({UNKNOWN:0,REVOKE:1,CIPHERTEXT:2,FUTUREPROOF:3,NON_VERIFIED_TRANSITION:4,UNVERIFIED_TRANSITION:5,VERIFIED_TRANSITION:6,VERIFIED_LOW_UNKNOWN:7,VERIFIED_HIGH:8,VERIFIED_INITIAL_UNKNOWN:9,VERIFIED_INITIAL_LOW:10,VERIFIED_INITIAL_HIGH:11,VERIFIED_TRANSITION_ANY_TO_NONE:12,VERIFIED_TRANSITION_ANY_TO_HIGH:13,VERIFIED_TRANSITION_HIGH_TO_LOW:14,VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:15,VERIFIED_TRANSITION_UNKNOWN_TO_LOW:16,VERIFIED_TRANSITION_LOW_TO_UNKNOWN:17,VERIFIED_TRANSITION_NONE_TO_LOW:18,VERIFIED_TRANSITION_NONE_TO_UNKNOWN:19,GROUP_CREATE:20,GROUP_CHANGE_SUBJECT:21,GROUP_CHANGE_ICON:22,GROUP_CHANGE_INVITE_LINK:23,GROUP_CHANGE_DESCRIPTION:24,GROUP_CHANGE_RESTRICT:25,GROUP_CHANGE_ANNOUNCE:26,GROUP_PARTICIPANT_ADD:27,GROUP_PARTICIPANT_REMOVE:28,GROUP_PARTICIPANT_PROMOTE:29,GROUP_PARTICIPANT_DEMOTE:30,GROUP_PARTICIPANT_INVITE:31,GROUP_PARTICIPANT_LEAVE:32,GROUP_PARTICIPANT_CHANGE_NUMBER:33,BROADCAST_CREATE:34,BROADCAST_ADD:35,BROADCAST_REMOVE:36,GENERIC_NOTIFICATION:37,E2E_IDENTITY_CHANGED:38,E2E_ENCRYPTED:39,CALL_MISSED_VOICE:40,CALL_MISSED_VIDEO:41,INDIVIDUAL_CHANGE_NUMBER:42,GROUP_DELETE:43,GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:44,CALL_MISSED_GROUP_VOICE:45,CALL_MISSED_GROUP_VIDEO:46,PAYMENT_CIPHERTEXT:47,PAYMENT_FUTUREPROOF:48,PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:49,PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:50,PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:51,PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:52,PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:53,PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:54,PAYMENT_ACTION_SEND_PAYMENT_REMINDER:55,PAYMENT_ACTION_SEND_PAYMENT_INVITATION:56,PAYMENT_ACTION_REQUEST_DECLINED:57,PAYMENT_ACTION_REQUEST_EXPIRED:58,PAYMENT_ACTION_REQUEST_CANCELLED:59,BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:60,BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:61,BIZ_INTRO_TOP:62,BIZ_INTRO_BOTTOM:63,BIZ_NAME_CHANGE:64,BIZ_MOVE_TO_CONSUMER_APP:65,BIZ_TWO_TIER_MIGRATION_TOP:66,BIZ_TWO_TIER_MIGRATION_BOTTOM:67,OVERSIZED:68,GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:69,GROUP_V4_ADD_INVITE_SENT:70,GROUP_PARTICIPANT_ADD_REQUEST_JOIN:71,CHANGE_EPHEMERAL_SETTING:72,E2E_DEVICE_CHANGED:73,VIEWED_ONCE:74,E2E_ENCRYPTED_NOW:75,BLUE_MSG_BSP_FB_TO_BSP_PREMISE:76,BLUE_MSG_BSP_FB_TO_SELF_FB:77,BLUE_MSG_BSP_FB_TO_SELF_PREMISE:78,BLUE_MSG_BSP_FB_UNVERIFIED:79,BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:80,BLUE_MSG_BSP_FB_VERIFIED:81,BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:82,BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:83,BLUE_MSG_BSP_PREMISE_UNVERIFIED:84,BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:85,BLUE_MSG_BSP_PREMISE_VERIFIED:86,BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:87,BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:88,BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:89,BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:90,BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:91,BLUE_MSG_SELF_FB_TO_BSP_PREMISE:92,BLUE_MSG_SELF_FB_TO_SELF_PREMISE:93,BLUE_MSG_SELF_FB_UNVERIFIED:94,BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:95,BLUE_MSG_SELF_FB_VERIFIED:96,BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:97,BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:98,BLUE_MSG_SELF_PREMISE_UNVERIFIED:99,BLUE_MSG_SELF_PREMISE_VERIFIED:100,BLUE_MSG_TO_BSP_FB:101,BLUE_MSG_TO_CONSUMER:102,BLUE_MSG_TO_SELF_FB:103,BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:104,BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:105,BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:106,BLUE_MSG_UNVERIFIED_TO_VERIFIED:107,BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:108,BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:109,BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:110,BLUE_MSG_VERIFIED_TO_UNVERIFIED:111,BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:112,BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:113,BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:114,BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:115,BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:116,BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:117,E2E_IDENTITY_UNAVAILABLE:118,GROUP_CREATING:119,GROUP_CREATE_FAILED:120,GROUP_BOUNCED:121,BLOCK_CONTACT:122,EPHEMERAL_SETTING_NOT_APPLIED:123,SYNC_FAILED:124,SYNCING:125,BIZ_PRIVACY_MODE_INIT_FB:126,BIZ_PRIVACY_MODE_INIT_BSP:127,BIZ_PRIVACY_MODE_TO_FB:128,BIZ_PRIVACY_MODE_TO_BSP:129,DISAPPEARING_MODE:130,E2E_DEVICE_FETCH_FAILED:131,ADMIN_REVOKE:132,GROUP_INVITE_LINK_GROWTH_LOCKED:133,COMMUNITY_LINK_PARENT_GROUP:134,COMMUNITY_LINK_SIBLING_GROUP:135,COMMUNITY_LINK_SUB_GROUP:136,COMMUNITY_UNLINK_PARENT_GROUP:137,COMMUNITY_UNLINK_SIBLING_GROUP:138,COMMUNITY_UNLINK_SUB_GROUP:139,GROUP_PARTICIPANT_ACCEPT:140,GROUP_PARTICIPANT_LINKED_GROUP_JOIN:141,COMMUNITY_CREATE:142,EPHEMERAL_KEEP_IN_CHAT:143,GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST:144,GROUP_MEMBERSHIP_JOIN_APPROVAL_MODE:145,INTEGRITY_UNLINK_PARENT_GROUP:146,COMMUNITY_PARTICIPANT_PROMOTE:147,COMMUNITY_PARTICIPANT_DEMOTE:148,COMMUNITY_PARENT_GROUP_DELETED:149,COMMUNITY_LINK_PARENT_GROUP_MEMBERSHIP_APPROVAL:150,GROUP_PARTICIPANT_JOINED_GROUP_AND_PARENT_GROUP:151,MASKED_THREAD_CREATED:152,MASKED_THREAD_UNMASKED:153,BIZ_CHAT_ASSIGNMENT:154,CHAT_PSA:155,CHAT_POLL_CREATION_MESSAGE:156,CAG_MASKED_THREAD_CREATED:157,COMMUNITY_PARENT_GROUP_SUBJECT_CHANGED:158,CAG_INVITE_AUTO_ADD:159,BIZ_CHAT_ASSIGNMENT_UNASSIGN:160,CAG_INVITE_AUTO_JOINED:161,SCHEDULED_CALL_START_MESSAGE:162,COMMUNITY_INVITE_RICH:163,COMMUNITY_INVITE_AUTO_ADD_RICH:164,SUB_GROUP_INVITE_RICH:165,SUB_GROUP_PARTICIPANT_ADD_RICH:166,COMMUNITY_LINK_PARENT_GROUP_RICH:167,COMMUNITY_PARTICIPANT_ADD_RICH:168,SILENCED_UNKNOWN_CALLER_AUDIO:169,SILENCED_UNKNOWN_CALLER_VIDEO:170,GROUP_MEMBER_ADD_MODE:171,GROUP_MEMBERSHIP_JOIN_APPROVAL_REQUEST_NON_ADMIN_ADD:172,COMMUNITY_CHANGE_DESCRIPTION:173,SENDER_INVITE:174,RECEIVER_INVITE:175,COMMUNITY_ALLOW_MEMBER_ADDED_GROUPS:176,PINNED_MESSAGE_IN_CHAT:177,PAYMENT_INVITE_SETUP_INVITER:178,PAYMENT_INVITE_SETUP_INVITEE_RECEIVE_ONLY:179,PAYMENT_INVITE_SETUP_INVITEE_SEND_AND_RECEIVE:180,LINKED_GROUP_CALL_START:181,REPORT_TO_ADMIN_ENABLED_STATUS:182,EMPTY_SUBGROUP_CREATE:183,SCHEDULED_CALL_CANCEL:184,SUBGROUP_ADMIN_TRIGGERED_AUTO_ADD_RICH:185,GROUP_CHANGE_RECENT_HISTORY_SHARING:186,PAID_MESSAGE_SERVER_CAMPAIGN_ID:187,GENERAL_CHAT_CREATE:188,GENERAL_CHAT_ADD:189,GENERAL_CHAT_AUTO_ADD_DISABLED:190,SUGGESTED_SUBGROUP_ANNOUNCE:191,BIZ_BOT_1P_MESSAGING_ENABLED:192,CHANGE_USERNAME:193,BIZ_COEX_PRIVACY_INIT_SELF:194,BIZ_COEX_PRIVACY_TRANSITION_SELF:195,SUPPORT_AI_EDUCATION:196,BIZ_BOT_3P_MESSAGING_ENABLED:197,REMINDER_SETUP_MESSAGE:198,REMINDER_SENT_MESSAGE:199,REMINDER_CANCEL_MESSAGE:200,BIZ_COEX_PRIVACY_INIT:201,BIZ_COEX_PRIVACY_TRANSITION:202,GROUP_DEACTIVATED:203,COMMUNITY_DEACTIVATE_SIBLING_GROUP:204});t.WebMessageInfo$StubType=s;const l=n(76672)({ERROR:0,PENDING:1,SERVER_ACK:2,DELIVERY_ACK:3,READ:4,PLAYED:5});t.WebMessageInfo$Status=l;const u=n(76672)({UNKNOWN:0,PENDING_SETUP:1,PENDING_RECEIVER_SETUP:2,INIT:3,SUCCESS:4,COMPLETED:5,FAILED:6,FAILED_RISK:7,FAILED_PROCESSING:8,FAILED_RECEIVER_PROCESSING:9,FAILED_DA:10,FAILED_DA_FINAL:11,REFUNDED_TXN:12,REFUND_FAILED:13,REFUND_FAILED_PROCESSING:14,REFUND_FAILED_DA:15,EXPIRED_TXN:16,AUTH_CANCELED:17,AUTH_CANCEL_FAILED_PROCESSING:18,AUTH_CANCEL_FAILED:19,COLLECT_INIT:20,COLLECT_SUCCESS:21,COLLECT_FAILED:22,COLLECT_FAILED_RISK:23,COLLECT_REJECTED:24,COLLECT_EXPIRED:25,COLLECT_CANCELED:26,COLLECT_CANCELLING:27,IN_REVIEW:28,REVERSAL_SUCCESS:29,REVERSAL_PENDING:30,REFUND_PENDING:31});t.PaymentInfo$TxnStatus=u;const c=n(76672)({UNKNOWN_STATUS:0,PROCESSING:1,SENT:2,NEED_TO_ACCEPT:3,COMPLETE:4,COULD_NOT_COMPLETE:5,REFUNDED:6,EXPIRED:7,REJECTED:8,CANCELLED:9,WAITING_FOR_PAYER:10,WAITING:11});t.PaymentInfo$Status=c;const d=n(76672)({UNKNOWN_CURRENCY:0,INR:1});t.PaymentInfo$Currency=d;const p=n(76672)({NOT_STARTED:0,FORCE_UPGRADE:1,DEVELOPMENT:2,PRODUCTION:3});t.WebFeatures$Flag=p;const f=n(76672)({UNKNOWN_TYPE:0,PIN_FOR_ALL:1,UNPIN_FOR_ALL:2});t.PinInChat$Type=f;const _={};t.WebMessageInfoSpec=_;const g={};t.CommentMetadataSpec=g;const h={};t.PaymentInfoSpec=h;const A={};t.WebNotificationsInfoSpec=A;const m={};t.NotificationMessageInfoSpec=m;const E={};t.WebFeaturesSpec=E;const y={};t.ReportingTokenInfoSpec=y;const S={};t.MediaDataSpec=S;const v={};t.PhotoChangeSpec=v;const I={};t.StatusPSASpec=I;const T={};t.UserReceiptSpec=T;const b={};t.ReactionSpec=b;const M={};t.PollUpdateSpec=M;const P={};t.PollAdditionalMetadataSpec=P;const C={};t.EventAdditionalMetadataSpec=C;const O={};t.KeepInChatSpec=O;const R={};t.PinInChatSpec=R;const N={};t.MessageAddOnContextInfoSpec=N;const w={};t.PremiumMessageInfoSpec=w;const D={};t.EventResponseSpec=D,_.internalDefaults={status:l.PENDING},_.internalSpec={key:[1,r.FLAGS.REQUIRED|r.TYPES.MESSAGE,o.MessageKeySpec],message:[2,r.TYPES.MESSAGE,i.MessageSpec],messageTimestamp:[3,r.TYPES.UINT64],status:[4,r.TYPES.ENUM,l],participant:[5,r.TYPES.STRING],messageC2STimestamp:[6,r.TYPES.UINT64],ignore:[16,r.TYPES.BOOL],starred:[17,r.TYPES.BOOL],broadcast:[18,r.TYPES.BOOL],pushName:[19,r.TYPES.STRING],mediaCiphertextSha256:[20,r.TYPES.BYTES],multicast:[21,r.TYPES.BOOL],urlText:[22,r.TYPES.BOOL],urlNumber:[23,r.TYPES.BOOL],messageStubType:[24,r.TYPES.ENUM,s],clearMedia:[25,r.TYPES.BOOL],messageStubParameters:[26,r.FLAGS.REPEATED|r.TYPES.STRING],duration:[27,r.TYPES.UINT32],labels:[28,r.FLAGS.REPEATED|r.TYPES.STRING],paymentInfo:[29,r.TYPES.MESSAGE,h],finalLiveLocation:[30,r.TYPES.MESSAGE,i.Message$LiveLocationMessageSpec],quotedPaymentInfo:[31,r.TYPES.MESSAGE,h],ephemeralStartTimestamp:[32,r.TYPES.UINT64],ephemeralDuration:[33,r.TYPES.UINT32],ephemeralOffToOn:[34,r.TYPES.BOOL],ephemeralOutOfSync:[35,r.TYPES.BOOL],bizPrivacyStatus:[36,r.TYPES.ENUM,a],verifiedBizName:[37,r.TYPES.STRING],mediaData:[38,r.TYPES.MESSAGE,S],photoChange:[39,r.TYPES.MESSAGE,v],userReceipt:[40,r.FLAGS.REPEATED|r.TYPES.MESSAGE,T],reactions:[41,r.FLAGS.REPEATED|r.TYPES.MESSAGE,b],quotedStickerData:[42,r.TYPES.MESSAGE,S],futureproofData:[43,r.TYPES.BYTES],statusPsa:[44,r.TYPES.MESSAGE,I],pollUpdates:[45,r.FLAGS.REPEATED|r.TYPES.MESSAGE,M],pollAdditionalMetadata:[46,r.TYPES.MESSAGE,P],agentId:[47,r.TYPES.STRING],statusAlreadyViewed:[48,r.TYPES.BOOL],messageSecret:[49,r.TYPES.BYTES],keepInChat:[50,r.TYPES.MESSAGE,O],originalSelfAuthorUserJidString:[51,r.TYPES.STRING],revokeMessageTimestamp:[52,r.TYPES.UINT64],pinInChat:[54,r.TYPES.MESSAGE,R],premiumMessageInfo:[55,r.TYPES.MESSAGE,w],is1PBizBotMessage:[56,r.TYPES.BOOL],isGroupHistoryMessage:[57,r.TYPES.BOOL],botMessageInvokerJid:[58,r.TYPES.STRING],commentMetadata:[59,r.TYPES.MESSAGE,g],eventResponses:[61,r.FLAGS.REPEATED|r.TYPES.MESSAGE,D],reportingTokenInfo:[62,r.TYPES.MESSAGE,y],newsletterServerId:[63,r.TYPES.UINT64],eventAdditionalMetadata:[64,r.TYPES.MESSAGE,C]},g.internalSpec={commentParentKey:[1,r.TYPES.MESSAGE,o.MessageKeySpec],replyCount:[2,r.TYPES.UINT32]},h.internalSpec={currencyDeprecated:[1,r.TYPES.ENUM,d],amount1000:[2,r.TYPES.UINT64],receiverJid:[3,r.TYPES.STRING],status:[4,r.TYPES.ENUM,c],transactionTimestamp:[5,r.TYPES.UINT64],requestMessageKey:[6,r.TYPES.MESSAGE,o.MessageKeySpec],expiryTimestamp:[7,r.TYPES.UINT64],futureproofed:[8,r.TYPES.BOOL],currency:[9,r.TYPES.STRING],txnStatus:[10,r.TYPES.ENUM,u],useNoviFiatFormat:[11,r.TYPES.BOOL],primaryAmount:[12,r.TYPES.MESSAGE,i.MoneySpec],exchangeAmount:[13,r.TYPES.MESSAGE,i.MoneySpec]},A.internalSpec={timestamp:[2,r.TYPES.UINT64],unreadChats:[3,r.TYPES.UINT32],notifyMessageCount:[4,r.TYPES.UINT32],notifyMessages:[5,r.FLAGS.REPEATED|r.TYPES.MESSAGE,_]},m.internalSpec={key:[1,r.TYPES.MESSAGE,o.MessageKeySpec],message:[2,r.TYPES.MESSAGE,i.MessageSpec],messageTimestamp:[3,r.TYPES.UINT64],participant:[4,r.TYPES.STRING]},E.internalSpec={labelsDisplay:[1,r.TYPES.ENUM,p],voipIndividualOutgoing:[2,r.TYPES.ENUM,p],groupsV3:[3,r.TYPES.ENUM,p],groupsV3Create:[4,r.TYPES.ENUM,p],changeNumberV2:[5,r.TYPES.ENUM,p],queryStatusV3Thumbnail:[6,r.TYPES.ENUM,p],liveLocations:[7,r.TYPES.ENUM,p],queryVname:[8,r.TYPES.ENUM,p],voipIndividualIncoming:[9,r.TYPES.ENUM,p],quickRepliesQuery:[10,r.TYPES.ENUM,p],payments:[11,r.TYPES.ENUM,p],stickerPackQuery:[12,r.TYPES.ENUM,p],liveLocationsFinal:[13,r.TYPES.ENUM,p],labelsEdit:[14,r.TYPES.ENUM,p],mediaUpload:[15,r.TYPES.ENUM,p],mediaUploadRichQuickReplies:[18,r.TYPES.ENUM,p],vnameV2:[19,r.TYPES.ENUM,p],videoPlaybackUrl:[20,r.TYPES.ENUM,p],statusRanking:[21,r.TYPES.ENUM,p],voipIndividualVideo:[22,r.TYPES.ENUM,p],thirdPartyStickers:[23,r.TYPES.ENUM,p],frequentlyForwardedSetting:[24,r.TYPES.ENUM,p],groupsV4JoinPermission:[25,r.TYPES.ENUM,p],recentStickers:[26,r.TYPES.ENUM,p],catalog:[27,r.TYPES.ENUM,p],starredStickers:[28,r.TYPES.ENUM,p],voipGroupCall:[29,r.TYPES.ENUM,p],templateMessage:[30,r.TYPES.ENUM,p],templateMessageInteractivity:[31,r.TYPES.ENUM,p],ephemeralMessages:[32,r.TYPES.ENUM,p],e2ENotificationSync:[33,r.TYPES.ENUM,p],recentStickersV2:[34,r.TYPES.ENUM,p],recentStickersV3:[36,r.TYPES.ENUM,p],userNotice:[37,r.TYPES.ENUM,p],support:[39,r.TYPES.ENUM,p],groupUiiCleanup:[40,r.TYPES.ENUM,p],groupDogfoodingInternalOnly:[41,r.TYPES.ENUM,p],settingsSync:[42,r.TYPES.ENUM,p],archiveV2:[43,r.TYPES.ENUM,p],ephemeralAllowGroupMembers:[44,r.TYPES.ENUM,p],ephemeral24HDuration:[45,r.TYPES.ENUM,p],mdForceUpgrade:[46,r.TYPES.ENUM,p],disappearingMode:[47,r.TYPES.ENUM,p],externalMdOptInAvailable:[48,r.TYPES.ENUM,p],noDeleteMessageTimeLimit:[49,r.TYPES.ENUM,p]},y.internalSpec={reportingTag:[1,r.TYPES.BYTES]},S.internalSpec={localPath:[1,r.TYPES.STRING]},v.internalSpec={oldPhoto:[1,r.TYPES.BYTES],newPhoto:[2,r.TYPES.BYTES],newPhotoId:[3,r.TYPES.UINT32]},I.internalSpec={campaignId:[44,r.FLAGS.REQUIRED|r.TYPES.UINT64],campaignExpirationTimestamp:[45,r.TYPES.UINT64]},T.internalSpec={userJid:[1,r.FLAGS.REQUIRED|r.TYPES.STRING],receiptTimestamp:[2,r.TYPES.INT64],readTimestamp:[3,r.TYPES.INT64],playedTimestamp:[4,r.TYPES.INT64],pendingDeviceJid:[5,r.FLAGS.REPEATED|r.TYPES.STRING],deliveredDeviceJid:[6,r.FLAGS.REPEATED|r.TYPES.STRING]},b.internalSpec={key:[1,r.TYPES.MESSAGE,o.MessageKeySpec],text:[2,r.TYPES.STRING],groupingKey:[3,r.TYPES.STRING],senderTimestampMs:[4,r.TYPES.INT64],unread:[5,r.TYPES.BOOL]},M.internalSpec={pollUpdateMessageKey:[1,r.TYPES.MESSAGE,o.MessageKeySpec],vote:[2,r.TYPES.MESSAGE,i.Message$PollVoteMessageSpec],senderTimestampMs:[3,r.TYPES.INT64],serverTimestampMs:[4,r.TYPES.INT64],unread:[5,r.TYPES.BOOL]},P.internalSpec={pollInvalidated:[1,r.TYPES.BOOL]},C.internalSpec={isStale:[1,r.TYPES.BOOL]},O.internalSpec={keepType:[1,r.TYPES.ENUM,i.KeepType],serverTimestamp:[2,r.TYPES.INT64],key:[3,r.TYPES.MESSAGE,o.MessageKeySpec],deviceJid:[4,r.TYPES.STRING],clientTimestampMs:[5,r.TYPES.INT64],serverTimestampMs:[6,r.TYPES.INT64]},R.internalSpec={type:[1,r.TYPES.ENUM,f],key:[2,r.TYPES.MESSAGE,o.MessageKeySpec],senderTimestampMs:[3,r.TYPES.INT64],serverTimestampMs:[4,r.TYPES.INT64],messageAddOnContextInfo:[5,r.TYPES.MESSAGE,N]},N.internalSpec={messageAddOnDurationInSecs:[1,r.TYPES.UINT32]},w.internalSpec={serverCampaignId:[1,r.TYPES.STRING]},D.internalSpec={eventResponseMessageKey:[1,r.TYPES.MESSAGE,o.MessageKeySpec],timestampMs:[2,r.TYPES.INT64],eventResponseMessage:[3,r.TYPES.MESSAGE,i.Message$EventResponseMessageSpec],unread:[4,r.TYPES.BOOL]}},41307:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickLogMarkerId=void 0;const r=n(76672)({BUILDER_CREATE:200750472,BUILDER_LOAD_FLOWS:200748734,BUILDER_OPEN_DOCUMENTATION:200741132,BUILDER_OPEN_ENDPOINT_CODE_EXAMPLES:200748217,BUILDER_OPEN_SNIPPETS:200750272,BUILDER_PREVIEW:200745477,BUILDER_PUBLISH:200741159,BUILDER_SAVE:200745731,BUILDER_TOGGLE_INTERACTIVE_PREVIEW:200748606,BUILDER_USE_INTERACTIVE_PREVIEW:200750677,BUILDER_USE_NON_INTERACTIVE_PREVIEW:200741829,CACHING_BLOKS:200750631,DATA_CHANNEL:200746697,GET_FLOW_ASSET_PUB_KEY:200738683,GET_METADATA:200745755,GET_WEBVIEW:200743062,SERVING_BLOKS:200751992,WAE_METADATA:200743350,WAE_PHOENIX_PSL_TRANSPILER:200742056,WAE_PSL_PREFETCH:200740397,WAM_CODE_EDITOR_NAVIGATE_TO_NO_CODE_EDITOR:200744286,WAM_GUIDED_SETUP_FINISH:200738260,WAM_GUIDED_SETUP_GET_STARTED:200750660,WAM_GUIDED_SETUP_HOME_IMPRESSION:200751164,WAM_NO_CODE_CHANGE:200746956,WAM_NO_CODE_EDITOR_ERROR:200739888,WAM_NO_CODE_LOAD:200750175,WAM_NO_CODE_NAVIGATE_TO_CODE_EDITOR:200744561,WAM_NO_CODE_SAVE:200738617,WEB_PREVIEW_INTERACTION:200747004,WEB_PREVIEW_REFRESH:200747890,CAROUSEL_MESSAGE_RECEIVE:238883e3,CAROUSEL_MESSAGE_RENDER:238890222,MEX_OPERATION_EXAMPLE:239471030,PHOENIX_FDS_IQ_EXECUTION:578499140,WHATSAPP_ASSIGN_CHAT:701185297,WHATSAPP_FETCH_ASSIGN_CHAT_AGENT_LIST:701183376,WHATSAPP_MESSAGE_INFO_VIEW:701177629,WHATSAPP_CART_ADD:774774794,WHATSAPP_CART_VIEW:774774619,WHATSAPP_CATALOG_COLLECTIONS_VIEW:774781666,WHATSAPP_CATALOG_CREATE:774769395,WHATSAPP_CATALOG_LOAD_MORE:774769641,WHATSAPP_CATALOG_VIEW:774771408,WHATSAPP_COLLECTION_APPEAL:774776895,WHATSAPP_COLLECTION_EDIT:774777483,WHATSAPP_COLLECTION_RENAME:774782934,WHATSAPP_COLLECTION_VIEW_ALL:774780089,WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW:774768970,WHATSAPP_ORDER_CREATE:774777518,WHATSAPP_ORDER_VIEW:774769843,WHATSAPP_PLM_DETAILS_VIEW:774777097,WHATSAPP_PRODUCT_APPEAL:774769273,WHATSAPP_PRODUCT_DELETE:774774122,WHATSAPP_PRODUCT_IMAGES_LOAD:774778674,WHATSAPP_PRODUCT_MESSAGE_SEND:774779800,WHATSAPP_PRODUCT_REPORT:774782053,WHATSAPP_PRODUCT_SAVE:774779113,WHATSAPP_PRODUCT_SET_VISIBLE:774778628,WHATSAPP_PRODUCT_VIEW:774775607,WHATSAPP_PROFILE_CATS_VIEW:774777556,WHATSAPP_PROFILE_SAVE:774775117,WHATSAPP_PROFILE_VIEW:774770248,ADDON_CHAT_REQUEST:891434079,ADDON_PROCESS_INCOMING:891434096,ADDON_PROCESS_OUTGOING:891428956,ALTERNATIVE_DEVICE_LINKING:891429758,CHAT_OPEN:891425633,DESKTOP_UPSELL_LINK_DEVICE_METRICS:891423256,ELECTRON_MACOS_CATALYST_MIGRATION:891427179,MESSAGE_RENDER:891426174,NEWSLETTER_BOOSTRAP:891434294,OFFLINE_RESUME:891431279,PAGE_LOAD:891431414,SYNCD:891431212,WHATSAPP_WEB_TEST_EVENT:891422769,CATALOG_HOME_PAGE:897464270,GET_CATALOG:897464549,GET_CATALOG_SEARCH:897466301,GET_CATEGORIES:897466143,GET_COLLECTIONS:897452074,GET_PRODUCT_LIST:897452238,GET_SINGLE_COLLECTION:897454385,GET_SINGLE_COLLECTION_CATEGORIES:897455298,IMAGE_LOAD_LATENCY_FULLSIZE_PRODUCT:897460107,IMAGE_LOAD_LATENCY_THUMBNAIL_CART:897453112,IMAGE_LOAD_LATENCY_THUMBNAIL_CATALOG:897462978,IMAGE_LOAD_LATENCY_THUMBNAIL_CATALOG_SEARCH:897460087,IMAGE_LOAD_LATENCY_THUMBNAIL_CATEGORIES:897451484,IMAGE_LOAD_LATENCY_THUMBNAIL_COLLECTIONS:897464757,IMAGE_LOAD_LATENCY_THUMBNAIL_PRODUCT_LIST:897460699,IMAGE_LOAD_LATENCY_THUMBNAIL_SENT_CART:897465374,IMAGE_LOAD_LATENCY_THUMBNAIL_SINGLE_COLLECTION:897451937,IMAGE_LOAD_LATENCY_THUMBNAIL_SINGLE_COLLECTION_CATEGORIES:897451370,PLACE_ORDER:897460179,PRODUCT_CATALOG_EVENT:897464127,REFRESH_CART:897460798,VERIFY_POSTCODE:897454379,CHANNEL_FOLLOW:1026960759,CHANNEL_OPEN:1026963966,AD_ACCOUNT_RECOVERY_REQUEST_CODE:1029380470,AD_ACCOUNT_RECOVERY_UI_FLOW:1029378759,FETCH_QUICK_PROMOTIONS:1029379849,LONG_TERM_HOLDOUT_CONFIG_FETCH:1029386599,MANAGE_ADS_FETCH_ADS:1029390253,MANAGE_ADS_FETCH_NONCE:1029383287,MANAGE_ADS_FETCH_TOKEN:1029388606});t.QuickLogMarkerId=r},62162:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QPL=t.ALLOWLIST_IMMEDIATE_UPLOAD=t.ALLOWLIST_DEV_VERBOSE_LOGGING=void 0,t.updateAllowlistDevVerboseLoggingOverrides=function(){};var r=n(17906),i=n(41307);n(95160);const o=[i.QuickLogMarkerId.WHATSAPP_WEB_TEST_EVENT];t.ALLOWLIST_DEV_VERBOSE_LOGGING=o;const a=[i.QuickLogMarkerId.ALTERNATIVE_DEVICE_LINKING,i.QuickLogMarkerId.ELECTRON_MACOS_CATALYST_MIGRATION,i.QuickLogMarkerId.DESKTOP_UPSELL_LINK_DEVICE_METRICS];t.ALLOWLIST_IMMEDIATE_UPLOAD=a;const s={init(e,t,n){r.QPL.init(e,t,n)},clearInstance(){r.QPL.clearInstance()},getInstance:()=>r.QPL.getInstance(),getNextMarkerInstanceValue:e=>r.QPL.getNextMarkerInstanceValue(e),throwKillswitch(e){r.QPL.throwKillswitch(e)},clearStorage(){r.QPL.clearStorage()},logActiveQplMarkers(){r.QPL.logActiveQplMarkers()},markerStart:(e,t)=>r.QPL.markerStart(e,t),markerAnnotate(e,t,n){r.QPL.markerAnnotate(e,t,n)},markerPoint(e,t,n){r.QPL.markerPoint(e,t,n)},markerEnd(e,t,n){r.QPL.markerEnd(e,t,n)},genMarkerEnd:(e,t,n)=>r.QPL.genMarkerEnd(e,t,n),markerDrop(e,t){r.QPL.markerDrop(e,t)},getActiveMarkerIDs:e=>r.QPL.getActiveMarkerIDs(e),getMarker(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.QPL.getMarker(e,t)},getMarkerInstances:e=>r.QPL.getMarkerInstances(e)};t.QPL=s},20938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.businessTypeOptions=t.VERIFIED_LEVEL=t.DAYS_OF_WEEK=t.CommerceExperienceTypes=t.BUSINESS_PROFILE_FIELDS_LENGTH=t.BUSINESS_HOUR_MODES=void 0,t.convertLevel=function(e){if(null==e)return;switch(e){case"unknown":return r.UNKNOWN;case"low":return r.LOW;case"high":return r.HIGH;default:return r.UNKNOWN}};const r={UNKNOWN:0,LOW:1,HIGH:2};t.VERIFIED_LEVEL=r;t.DAYS_OF_WEEK=["sun","mon","tue","wed","thu","fri","sat"];t.BUSINESS_HOUR_MODES={OPEN_24H:"open_24h",SPECIFIC_HOURS:"specific_hours",APPOINTMENT_ONLY:"appointment_only"};const i=n(76672)({CATALOG:"catalog",NONE:"none",SHOP:"shop"});t.CommerceExperienceTypes=i;t.businessTypeOptions={limitedLiabilityPartnership:"Limited liability partnership",soleProprietorship:"Sole proprietorship",partnership:"Partnership",publicCompany:"Public Company",privateCompany:"Private Company",other:"Other"};t.BUSINESS_PROFILE_FIELDS_LENGTH={WEBSITE:256,DESCRIPTION:512,EMAIL:128,ADDRESS:256}},98051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RevokedSubGroupSuggestionReason=t.REMOVE_REASON=t.GroupType=t.GroupSettingChangeSystemMessageToggleEnabled=t.GroupSettingChangeSystemMessageIsAdmin=t.GROUP_ACTIONS=t.DELETE_REASON=t.ADD_REASON=void 0,t.getGroupTypeFromGroupMetadata=function(e){if(!0===e.defaultSubgroup)return d.LINKED_ANNOUNCEMENT_GROUP;if(!0===e.generalSubgroup)return d.LINKED_GENERAL_GROUP;if(null!=e.parentGroup)return d.LINKED_SUBGROUP;if(!0===e.isParentGroup)return d.COMMUNITY;return d.DEFAULT},t.groupTypeToWamEnum=function(e){switch(e){case d.LINKED_ANNOUNCEMENT_GROUP:return r.TYPE_OF_GROUP_ENUM.DEFAULT_SUBGROUP;case d.LINKED_SUBGROUP:return r.TYPE_OF_GROUP_ENUM.SUBGROUP;default:return r.TYPE_OF_GROUP_ENUM.GROUP}};var r=n(8994);const i=n(76672)({On:"on",Off:"off"});t.GroupSettingChangeSystemMessageToggleEnabled=i;const o=n(76672)({Admin:"admin",Regular:"regular"});t.GroupSettingChangeSystemMessageIsAdmin=o;const a=Object.freeze({SUBJECT:"subject",ADD:"add",PROMOTE:"promote",DEMOTE:"demote",DELETE:"delete",REMOVE:"remove",MODIFY:"modify",INVITE_CODE:"invite",DESC_ADD:"desc_add",DESC_REMOVE:"desc_remove",RESTRICT:"restrict",ANNOUNCE:"announce",NO_FORWARD:"no_frequently_forwarded",EPHEMERAL:"ephemeral",REVOKE_INVITE:"revoke_invite",SUSPEND:"suspend",GROWTH_LOCKED:"growth_locked",GROWTH_UNLOCKED:"growth_unlocked",SUB_GROUP_LINK:"sub_group_link",PARENT_GROUP_LINK:"parent_group_link",PARENT_GROUP_LINK_MEMBERSHIP_APPROVAL:"parent_group_link_membership_approval",SIBLING_GROUP_LINK:"sibling_group_link",SUB_GROUP_UNLINK:"sub_group_unlink",PARENT_GROUP_UNLINK:"parent_group_unlink",SIBLING_GROUP_UNLINK:"sibling_group_unlink",DELETE_PARENT_GROUP:"delete_parent_group",DELETE_PARENT_GROUP_UNLINK:"delete_parent_group_unlink",DELETE_PARENT_SUB_GROUP_UNLINK:"delete_parent_sub_group_unlink",INTEGRITY_PARENT_GROUP_UNLINK:"integrity_parent_group_unlink",INTEGRITY_SUB_GROUP_UNLINK:"integrity_sub_group_unlink",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",MEMBERSHIP_APPROVAL_REQUEST:"membership_approval_request",CREATED_MEMBERSHIP_REQUESTS:"created_membership_requests",REVOKED_MEMBERSHIP_REQUESTS:"revoked_membership_requests",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",ALLOW_ADMIN_REPORTS:"allow_admin_reports",ADMIN_REPORT_RECIEVED:"admin_report_received",CREATED_SUBGROUP_SUGGESTION:"created_subgroup_suggestion",REVOKED_SUB_GROUP_SUGGESTIONS:"revoked_sub_group_suggestions",SUBGROUP_SUGGESTIONS_CHANGE_NUMBER:"subgroup_suggestions_change_number",MEMBER_ADD_MODE:"member_add_mode",GENERAL_CHAT_AUTO_ADD_DISABLED:"general_chat_auto_add_disabled"});t.GROUP_ACTIONS=a;const s=Object.freeze({INTEGRITY_DELETE_PARENT:"integrity_delete_parent",DELETE_PARENT:"delete_parent"});t.DELETE_REASON=s;const l=Object.freeze({INVITE:"invite",LINKED_GROUP_JOIN:"linked_group_join",AUTO_ADD:"auto_add",DEFAULT_SUBGROUP_ADMIN_ADD:"default_subgroup_admin_add",DEFAULT_SUBGROUP_PROMOTE:"default_sub_group_promote",INVITE_AUTO_ADD:"invite_auto_add",GENERAL_CHAT_AUTO_ADD:"general_chat_auto_add"});t.ADD_REASON=l;const u=Object.freeze({DEFAULT_SUBGROUP_DEMOTE:"default_sub_group_demote"});t.REMOVE_REASON=u;const c=n(76672)({APPROVED:"approved",REJECTED:"rejected",CANCELLED:"cancelled"});t.RevokedSubGroupSuggestionReason=c;const d=n(76672).Mirrored(["DEFAULT","COMMUNITY","LINKED_SUBGROUP","LINKED_ANNOUNCEMENT_GROUP","LINKED_GENERAL_GROUP"]);t.GroupType=d},5991:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeaveReason=void 0;const r=n(76672).Mirrored(["Left","Removed"]);t.LeaveReason=r},29163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asMaybeNonEmptyString=function(e){if(""!==e)return e}},41984:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestMethod=void 0;const r=n(76672).Mirrored(["NonAdminAdd","InviteLink","LinkedGroupJoin"]);t.RequestMethod=r},35878:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCriticalDataSynced=function(){return!0===a.userPrefsIdb.get(s.BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED)},t.getLastPeriodicAppStateSyncTs=function(){return a.userPrefsIdb.get(s.BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS)},t.getMdSyncActionsActionSanitized=function(){return!0===a.userPrefsIdb.get(s.BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED)},t.getNonCriticalDataSyncStatus=f,t.getPrimaryAllowsAllMutations=function(){return!!l.default.get(s.MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS)},t.setAllCriticalDataSynced=function(){return u.apply(this,arguments)},t.setLastPeriodicAppStateSyncTs=function(){return c.apply(this,arguments)},t.setMdSyncActionsActionSanitized=function(){return p.apply(this,arguments)},t.setNonCriticalDataSyncStatus=function(){return _.apply(this,arguments)},t.setPrimaryAllowsAllMutations=function(){return l.default.set(s.MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS,!0)},t.setShouldCheckContactSyncStatus=function(){return d.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(17657),s=n(59356),l=r(n(61112));function u(){return(u=(0,o.default)((function*(){return yield a.userPrefsIdb.set(s.BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED,!0),l.default.set(s.MD_KEYS.CRITICAL_DATA_SYNCED,!0)}))).apply(this,arguments)}function c(){return(c=(0,o.default)((function*(e){return yield a.userPrefsIdb.set(s.BACKEND_ONLY_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,e),l.default.set(s.MD_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,e)}))).apply(this,arguments)}function d(){return(d=(0,o.default)((function*(){return yield a.userPrefsIdb.set(s.BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0),l.default.set(s.MD_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0)}))).apply(this,arguments)}function p(){return(p=(0,o.default)((function*(e){yield a.userPrefsIdb.set(s.BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,e),l.default.set(s.MD_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,e)}))).apply(this,arguments)}function f(){return a.userPrefsIdb.get(s.BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS)}function _(){return(_=(0,o.default)((function*(e){var t;const n=null!==(t=yield f())&&void 0!==t?t:{};yield a.userPrefsIdb.set(s.BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS,(0,i.default)((0,i.default)({},n),e))}))).apply(this,arguments)}},50456:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.userPreferencesStoreBase=t.UserPreferencesStoreBase=t.ENFORCE_PERMANENT_STORAGE_KEYS=void 0;var i=r(n(44848)),o=n(59356),a=n(29853),s=r(n(89482));const l=[o.KEYS.WHATSAPP_MUTEX,o.KEYS.PRESERVED_USER_KEYS,o.MD_KEYS.ROUTING_INFO,o.MD_KEYS.INITIAL_HISTORY_SYNCED,o.MD_KEYS.WEB_ENC_SALT,o.MD_KEYS.CRITICAL_DATA_SYNCED];t.ENFORCE_PERMANENT_STORAGE_KEYS=l;const u={isRawString:!1,ignoreCache:!1,shouldWriteToIdb:!0,storage:i.default};class c{_determineStorage(e,t){return l.includes(e)?i.default:null!=t?t:u.storage}get(e,t){if(null==e)throw(0,s.default)("UserPreferencesStoreBase.get called with no key");const n=this._determineStorage(e,null==t?void 0:t.storage),r=null==(null==t?void 0:t.ignoreCache)?u.ignoreCache:t.ignoreCache,i=n.getItem(e,r);if((null==(null==t?void 0:t.isRawString)?u.isRawString:t.isRawString)||null==i)return i;try{return JSON.parse(i,a.jsonWidReviver)}catch(t){return __LOG__(2,void 0,void 0,!0)`UserPreferencesStoreBase.get(): failed: ${t.toString()}`,SEND_LOGS("userprefs-parse-error"),void n.removeItem(e)}}set(e,t,n){if(null==e)throw(0,s.default)("UserPreferencesStoreBase.set called with no key");const r=this._determineStorage(e,null==n?void 0:n.storage);if(null==t)r.removeItem(e);else{if(null==(null==n?void 0:n.isRawString)?u.isRawString:n.isRawString){if("string"!=typeof t)throw(0,s.default)("UserPreferencesStoreBase.set: expecting string because isRawString is true");r.setItem(e,t)}else{const i=null==(null==n?void 0:n.shouldWriteToIdb)?u.shouldWriteToIdb:n.shouldWriteToIdb;r.setItem(e,JSON.stringify(t),i)}}}}t.UserPreferencesStoreBase=c;const d=new c;t.userPreferencesStoreBase=d},85608:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.userPrefsCacheStorage=void 0;var i=r(n(48926)),o=r(n(32126)),a=n(87606),s=n(64286);const l=new o.default("wa_web_user_prefs_cache_store",(function(e){return new Response(JSON.stringify(e),{headers:{"content-type":"application/json"}})}),(function(e){return e.json()}),{encodeKey:function(e,t){const n=encodeURIComponent(e);return`https://_user_prefs_key_store_.whatsapp.com/${encodeURIComponent(t)}_${n}`},matchOptions:{ignoreSearch:!0,ignoreMethod:!0,ignoreVary:!0}});const u=new class{constructor(){this._cachedCacheStorageValues={}}setItemToCacheStorage(e,t){var n=this;return(0,i.default)((function*(){const r=(0,s.preProcessUserPref)(e,t);n._cachedCacheStorageValues[e]=r,yield l.doPut(e,r)}))()}getItemFromCacheStorage(e){var t=this;return(0,i.default)((function*(){let n=t._cachedCacheStorageValues[e];if(null==n)try{n=yield l.doGet(e),t._cachedCacheStorageValues[e]=n}catch(e){}if(null==n)return t.removeItemFromCacheStorage(e),null;return(0,a.postProcessUserPref)(e,n)}))()}removeItemFromCacheStorage(e){var t=this;return(0,i.default)((function*(){delete t._cachedCacheStorageValues[e],yield l.doDel(e)}))()}clearCacheStorage(){var e=this;return(0,i.default)((function*(){e._cachedCacheStorageValues={},yield l.doClear()}))()}bulkSetItemsToCacheStorage(e){var t=this;return(0,i.default)((function*(){const n=e.map((e=>t.setItemToCacheStorage(e.key,e.value)));yield Promise.all(n)}))()}};t.userPrefsCacheStorage=u},46319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearCookies=function(){if((0,c.isWorker)())return;s.setCookie({name:"ref",expirationDate:0,domain:a.COOKIE_DOMAIN,path:u.PP_REF}),s.setCookie({name:"tok",expirationDate:0,domain:a.COOKIE_DOMAIN,path:u.PP_TOK})},t.forceUpdateAppBuildCookieToWebpack=function(){__LOG__(2,void 0,void 0,!0)`[locale-change] force update locale and redirect to webpack build`,SEND_LOGS("[locale-change] locale changed to non-english in comet build"),g()},t.setAppBuildCookieToComet=_,t.setRefTokCookies=function(e,t){if((0,c.isWorker)())return;s.setCookie({name:"ref",value:e,path:u.PP_REF,domain:a.COOKIE_DOMAIN,secure:!0}),s.setCookie({name:"tok",value:t,path:u.PP_TOK,domain:a.COOKIE_DOMAIN,secure:!0})},t.updateAppBuildCookieIfRequired=function(){const e=(0,i.getABPropConfigValue)("web_user_qualified_for_comet_build");0;e&&(_(),(0,o.frontendFireAndForget)("setLocalePrefCookie",{locale:(0,l.WAWebL10nGetRenderedLocale)()}))};var r=n(29987),i=n(83741),o=n(1619),a=n(83727),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(5180)),l=n(22026),u=n(8701),c=n(95160);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const p="wa_build",f=n(76672)({Comet:"c",Webpack:"w"});function _(){h(f.Comet)}function g(){h(f.Webpack)}function h(e){if((0,c.isWorker)())return;if(f.cast(s.getCookie(p))===e&&e!==f.Comet)return;const t=Date.now()+4*r.WEEK_MILLISECONDS;s.setCookie({name:p,value:String(e),path:"/",domain:a.COOKIE_DOMAIN,secure:!0,expirationDate:t})}},58625:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnPackingValueFromStorage=function(){return l.apply(this,arguments)},t.setColumnPackingValueToStorage=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(85608),a=n(59356);function s(){return(s=(0,i.default)((function*(e){null!=e?yield o.userPrefsCacheStorage.setItemToCacheStorage(a.MD_KEYS.COLUMN_PACKING_ENABLED,e):yield o.userPrefsCacheStorage.removeItemFromCacheStorage(a.MD_KEYS.COLUMN_PACKING_ENABLED)}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(){return yield o.userPrefsCacheStorage.getItemFromCacheStorage(a.MD_KEYS.COLUMN_PACKING_ENABLED)}))).apply(this,arguments)}},97023:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PTT_PLAYBACK_RATE=t.ChatlistPanelState=void 0,t.applyPrivacySetting=y,t.clearLastPushCompleteTimestamp=function(){return R.apply(this,arguments)},t.clearOfflineNotificationContentEngagement=function(){p.userPrefsIdb.remove(f.BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_ENGAGEMENT)},t.createOrUpdateLidDbMigration=function(e){const t=_.default.getUser(f.KEYS.LID_DB_MIGRATION)||{};_.default.setUser(f.KEYS.LID_DB_MIGRATION,(0,i.default)((0,i.default)({},t),e))},t.deleteComposeContents=function(e){_.default.clearUserSessionItem(I(e))},t.getAppVersionBase=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.APP_VERSION_BASE)},t.getAutoDownloadAudio=function(){return!1!==_.default.getUser(f.KEYS.AUTO_DOWNLOAD_AUDIO)},t.getAutoDownloadDocuments=function(){return!0===_.default.getUser(f.KEYS.AUTO_DOWNLOAD_DOCUMENTS)},t.getAutoDownloadPhotos=function(){return!1!==_.default.getUser(f.KEYS.AUTO_DOWNLOAD_PHOTOS)},t.getAutoDownloadVideos=function(){return!0===_.default.getUser(f.KEYS.AUTO_DOWNLOAD_VIDEOS)},t.getBrowserId=function(){const e=_.default.get(f.KEYS.BROWSER_ID);return"string"==typeof e?e:null},t.getChatlistPanelState=function(){return L.FULL},t.getComposeContents=function(e){const t=_.default.getUserSession(I(e));return(0,s.asComposeContentsType)(t)},t.getContactChecksum=function(){return _.default.getUser(f.KEYS.CONTACT_CHECKSUM)},t.getDailyStatsStartTime=M,t.getGroupParticipantAssignedColor=function(e){const t=_.default.getUser(f.KEYS.GROUP_ASSIGNED_COLOR+"-"+e.toString()),n={};if(null==t||"object"!=typeof t)return n;return Object.keys(t).forEach((e=>{const r=t[e];"number"==typeof r&&(n[e]=r)})),n},t.getHDMediaSetting=function(){return Boolean(_.default.get(f.KEYS.MEDIA_HD))},t.getLastChatMuteDuration=function(){const e=_.default.getUser(f.KEYS.LAST_CHAT_MUTE_DURATION);if("Infinity"===e)return Number.POSITIVE_INFINITY;return"number"==typeof e?e:null},t.getLastComposeBoxPanel=function(){return _.default.getUser(f.KEYS.LAST_SELECTED_COMPOSE_BOX_PANEL)},t.getLastMobilePlatform=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.MOBILE_PLATFORM)},t.getLastProfilePicThumbUpdate=function(){const e=_.default.get(f.KEYS.LAST_PROFILE_PIC_THUMB_UPDATE_TS);return"number"==typeof e?e:null},t.getLastPushCompleteTimestamp=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.LAST_PUSH_COMPLETE_TIMESTAMP)},t.getLastStatusUsage=function(){const e=_.default.getUser(f.KEYS.LAST_STATUS_USAGE);return"number"==typeof e?e:null},t.getLidDbMigration=function(){const e={},t=_.default.getUser(f.KEYS.LID_DB_MIGRATION);if(null==t||"object"!=typeof t)return e;return e.deviceTable=null==t?void 0:t.deviceTable,e},t.getLogoutReason=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.LOGOUT_REASON)},t.getMediaVolumeSettings=function(){const e=_.default.get(f.KEYS.MEDIA_VOLUME);return{volume:"number"==typeof e?e:null,muted:!0===_.default.get(f.KEYS.MEDIA_MUTE)}},t.getOfflineNotificationContent=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_L10N_CONTENT)},t.getOfflineNotificationEngagement=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_ENGAGEMENT)},t.getOfflinePushCount=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.OFFLINE_PUSH_COUNT)},t.getOfflinePushDisabled=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.OFFLINE_PUSH_DISABLED)},t.getPersistentExpiringId=function(){const e=_.default.getUser(f.KEYS.PERSISTENT_EXPIRING_ID);if(null==e||"object"!=typeof e)return null;const{ts:t,value:n}=e;if("number"!=typeof t||"string"!=typeof n)return null;return{ts:t,value:n}},t.getPostcodeAutoOpenChangePostcodeCount=function(){const e=_.default.getUser(f.KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT);return"number"==typeof e?e:0},t.getPostcodeAutoOpenChangePostcodeDone=function(){return!0===_.default.getUser(f.KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE)},t.getPostcodeTooltipViewCount=function(){const e=_.default.getUser(f.KEYS.POSTCODE_TOOLTIP_VIEW_COUNT);return"number"==typeof e?e:0},t.getPostcodeTooltipViewedInSession=function(){return!0===_.default.getUser(f.KEYS.POSTCODE_TOOLTIP_VIEWED_IN_SESSION)},t.getPsKillSwitchToken=function(){const e=_.default.get(f.KEYS.PS_KILLSWITCH_TOKEN);return"string"==typeof e?e:null},t.getPttPlaybackRate=function(){const e=_.default.get(f.KEYS.PTT_PLAYBACK_RATE);if("number"!=typeof e)return 1;if(1===e||2===e)return e;if(Math.abs(e-1.5)<Number.EPSILON)return 1.5;return 1},t.getPushname=function(){const e=_.default.getUser(f.KEYS.LAST_PUSHNAME);return"string"==typeof e?e:null},t.getSeenGroupDesc=function(e){return!0===_.default.getUser(e.toString())},t.getServerProps=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.SERVER_PROPS)},t.getServerPropsAttributes=function(){return p.userPrefsIdb.get(f.BACKEND_ONLY_KEYS.SERVER_PROPS_ATTRIBUTES)},t.getStorageAlert=function(){return l.StorageAlertType.NO_ALERT},t.getStorageDismissState=function(){return{lowQuotaDismissed:!0,highQuotaDismissed:!0}},t.getSystemThemeMode=function(){return!1!==_.default.get(f.KEYS.SYSTEM_THEME_MODE)},t.getTheme=function(){const e=_.default.get(f.KEYS.THEME);if("light"===e||"dark"===e)return e;return"light"},t.getUnknownId=function(){let e=_.default.get(f.KEYS.UNKNOWN_ID);"string"==typeof e&&""!==e||(e="unknown"+Math.floor(1e10*Math.random()),h(e));return e},t.getUserPrivacySettings=function(){const e={},t=_.default.getUser(f.HASHED_KEYS.USER_PRIVACY_SETTINGS);if(null==t||"object"!=typeof t)return e;y(["readReceipts",c.ALL_NONE],e,t.readReceipts),y(["groupAdd",c.VISIBILITY],e,t.groupAdd),y(["profilePicture",c.VISIBILITY],e,t.profilePicture),y(["about",c.VISIBILITY],e,t.about),y(["lastSeen",c.VISIBILITY],e,t.lastSeen),y(["online",c.ONLINE_VISIBILITY],e,t.online),y(["callAdd",c.CALL_ADD],e,t.callAdd),null!=t.disableLinkPreviews&&(e.disableLinkPreviews=!0===t.disableLinkPreviews);return e},t.getWhatsAppWebExternalBetaDirtyBitIdb=function(){return!!p.userPrefsIdb.get(f.KEYS.WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB)},t.getWhatsAppWebExternalBetaJoinedIdb=function(){const e=p.userPrefsIdb.get(f.KEYS.WHATSAPP_WEB_EXTERNAL_BETA_IDB);return!!e},t.initDailyStatsStartTime=function(){M()},t.markUserSentMessageToChat=function(e){const t=T(e);let n=_.default.getUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO)||[];if(!Array.isArray(n))return __LOG__(3)`UserPrefs:markUserSentMessageToChat value in store is not an array`,_.default.setUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO,[t]),!1;n=b(n);const r=!n.includes(t);r&&(n.push(t),_.default.setUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO,n));return __LOG__(2)`UserPrefs:markUserSentMessageToChat`,r},t.removeUserSentMessageToChat=function(e){let t=_.default.getUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO)||[];if(!Array.isArray(t))return __LOG__(3)`UserPrefs:removeUserSentMessageToChat value in store is not an array`,void _.default.setUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO,[]);t=b(t);const n=T(e);t.includes(n)&&_.default.setUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO,(0,a.default)(t,n));__LOG__(2)`UserPrefs:removeUserSentMessageToChat`},t.setAppVersionBase=function(){return P.apply(this,arguments)},t.setAutoDownloadAudio=function(e){_.default.setUser(f.KEYS.AUTO_DOWNLOAD_AUDIO,e)},t.setAutoDownloadDocuments=function(e){_.default.setUser(f.KEYS.AUTO_DOWNLOAD_DOCUMENTS,e)},t.setAutoDownloadPhotos=function(e){_.default.setUser(f.KEYS.AUTO_DOWNLOAD_PHOTOS,e)},t.setAutoDownloadVideos=function(e){_.default.setUser(f.KEYS.AUTO_DOWNLOAD_VIDEOS,e)},t.setBrowserId=function(e){_.default.set(f.KEYS.BROWSER_ID,e)},t.setChatlistPanelState=function(e){_.default.set(f.KEYS.CHATLIST_PANEL_STATE,e)},t.setComposeContents=function(e,t){_.default.setUserSession(I(e),t)},t.setContactChecksum=function(e){_.default.setUser(f.KEYS.CONTACT_CHECKSUM,e)},t.setGroupParticipantAssignedColor=function(e,t){_.default.setUser(f.KEYS.GROUP_ASSIGNED_COLOR+"-"+e.toString(),t)},t.setHDMediaSetting=function(e){_.default.set(f.KEYS.MEDIA_HD,e)},t.setLastChatMuteDuration=function(e){_.default.setUser(f.KEYS.LAST_CHAT_MUTE_DURATION,e===Number.POSITIVE_INFINITY?"Infinity":e)},t.setLastComposeBoxPanel=function(e){_.default.setUser(f.KEYS.LAST_SELECTED_COMPOSE_BOX_PANEL,e)},t.setLastMobilePlatform=function(){return A.apply(this,arguments)},t.setLastProfilePicThumbUpdate=function(e){_.default.set(f.KEYS.LAST_PROFILE_PIC_THUMB_UPDATE_TS,e)},t.setLastPushCompleteTimestamp=function(){return O.apply(this,arguments)},t.setLastStatusUsage=function(){_.default.setUser(f.KEYS.LAST_STATUS_USAGE,Date.now())},t.setLogoutReason=function(){return D.apply(this,arguments)},t.setMediaMutedSetting=v,t.setMediaVolumeSetting=S,t.setMediaVolumeSettings=function(e,t){S(e),v(t)},t.setOfflineNotificationContent=function(){return w.apply(this,arguments)},t.setOfflineNotificationContentEngagement=function(e){return p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_ENGAGEMENT,e)},t.setOfflinePushCount=function(){return C.apply(this,arguments)},t.setOfflinePushDisabled=function(){return N.apply(this,arguments)},t.setPersistentExpiringId=function(e){_.default.setUser(f.KEYS.PERSISTENT_EXPIRING_ID,e)},t.setPostcodeAutoOpenChangePostcodeCount=function(e){_.default.setUser(f.KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT,e)},t.setPostcodeAutoOpenChangePostcodeDone=function(e){_.default.setUser(f.KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE,e)},t.setPostcodeTooltipViewCount=function(e){_.default.setUser(f.KEYS.POSTCODE_TOOLTIP_VIEW_COUNT,e)},t.setPostcodeTooltipViewedInSession=function(e){_.default.setUser(f.KEYS.POSTCODE_TOOLTIP_VIEWED_IN_SESSION,e)},t.setPsKillSwitchToken=function(e){_.default.set(f.KEYS.PS_KILLSWITCH_TOKEN,e)},t.setPttPlaybackRate=function(e){_.default.set(f.KEYS.PTT_PLAYBACK_RATE,e)},t.setPushname=function(e){_.default.setUser(f.KEYS.LAST_PUSHNAME,e)},t.setRefTok=function(e,t){g.forEach((function(e){u.default.removeItem(e)})),(0,d.setRefTokCookies)(e,t)},t.setSeenGroupDesc=function(e){_.default.setUser(e.toString(),!0)},t.setServerProps=function(){return E.apply(this,arguments)},t.setServerPropsAttributes=function(){return m.apply(this,arguments)},t.setStorageAlert=function(){},t.setStorageDismissState=function(){},t.setSystemThemeMode=function(e){_.default.set(f.KEYS.SYSTEM_THEME_MODE,e)},t.setTheme=function(e){_.default.set(f.KEYS.THEME,e)},t.setUnknownId=h,t.setUserPrivacySettings=function(e){p.userPrefsIdb.set(f.HASHED_KEYS.USER_PRIVACY_SETTINGS,e).catch((()=>{__LOG__(4,void 0,new Error)`setUserPrivacySettings: failed to set to indexedDB`})),_.default.setUser(f.HASHED_KEYS.USER_PRIVACY_SETTINGS,e)},t.setWhatsAppWebExternalBetaDirtyBitIdb=function(e){return p.userPrefsIdb.set(f.KEYS.WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB,e)},t.setWhatsAppWebExternalBetaJoinedIdb=function(e){return p.userPrefsIdb.set(f.KEYS.WHATSAPP_WEB_EXTERNAL_BETA_IDB,e)};var i=r(n(81109)),o=r(n(48926)),a=r(n(82569)),s=n(1363),l=n(81790),u=r(n(44848)),c=n(94273),d=(n(37716),n(46319)),p=n(17657),f=n(59356),_=r(n(61112));const g=[f.KEYS.VERSION];function h(e){return _.default.set(f.KEYS.UNKNOWN_ID,e)}function A(){return(A=(0,o.default)((function*(e){null!=e&&(yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.MOBILE_PLATFORM,e))}))).apply(this,arguments)}function m(){return(m=(0,o.default)((function*(e){null!=e&&(yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.SERVER_PROPS_ATTRIBUTES,e))}))).apply(this,arguments)}function E(){return(E=(0,o.default)((function*(e){null!=e&&(yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.SERVER_PROPS,e))}))).apply(this,arguments)}function y(e,t,n){if(null==e)return;const[r,i]=e;if("string"==typeof n){const e=i[n];null!=e&&e===n&&(t[r]=e)}}function S(e){_.default.set(f.KEYS.MEDIA_VOLUME,e)}function v(e){_.default.set(f.KEYS.MEDIA_MUTE,e)}function I(e){return`${f.KEYS.COMPOSE_CONTENTS_PREFIX}${e.toString()}`}function T(e){return(e.toString()||"").replace("@","_")}function b(e){if(e.some((e=>e.endsWith("_")))){const t=e.map((e=>e.replace(/_$/,"").replace("@","_")));return _.default.setUser(f.KEYS.CHATS_USER_SENT_MESSAGE_TO,t),t}return e}function M(){const e=_.default.get(f.KEYS.DAILY_STATS_START_TIME);if("number"==typeof e)return e;const t=Date.now();return _.default.set(f.KEYS.DAILY_STATS_START_TIME,t),t}function P(){return(P=(0,o.default)((function*(e){null!=e&&(yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.APP_VERSION_BASE,e))}))).apply(this,arguments)}function C(){return(C=(0,o.default)((function*(e){yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.OFFLINE_PUSH_COUNT,e)}))).apply(this,arguments)}function O(){return(O=(0,o.default)((function*(e){yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.LAST_PUSH_COMPLETE_TIMESTAMP,e)}))).apply(this,arguments)}function R(){return(R=(0,o.default)((function*(){yield p.userPrefsIdb.remove(f.BACKEND_ONLY_KEYS.LAST_PUSH_COMPLETE_TIMESTAMP)}))).apply(this,arguments)}function N(){return(N=(0,o.default)((function*(e){yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.OFFLINE_PUSH_DISABLED,e)}))).apply(this,arguments)}function w(){return(w=(0,o.default)((function*(e){yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.OFFLINE_NOTIFICATION_L10N_CONTENT,e)}))).apply(this,arguments)}function D(){return(D=(0,o.default)((function*(e){yield p.userPrefsIdb.set(f.BACKEND_ONLY_KEYS.LOGOUT_REASON,e)}))).apply(this,arguments)}t.DEFAULT_PTT_PLAYBACK_RATE=1;const L=n(76672).Mirrored(["FULL","COLLAPSED"]);t.ChatlistPanelState=L},96549:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getChunkCountForEndOfRecentHistorySync=function(){var e;return null!==(e=u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC))&&void 0!==e?e:0},t.getEstimatedChunkCountForEndOfRecentHistorySync=function(){const e=u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC);return null!=e?e:0},t.getHistoryInitialSyncBoundary=function(){return u.userPrefsIdb.get(c.HASHED_KEYS.INITIAL_HIST_BOUNDARY)},t.getHistorySyncEarliestDate=function(){const e=p.default.get(c.KEYS.HISTORY_SYNC_EARLIEST_DATE);if("number"!=typeof e||0===e){var t;const e=null!==(t=(0,d.getPairingTimestamp)())&&void 0!==t?t:(0,a.unixTime)(),n=90*a.DAY_SECONDS;return e-n}return e},t.getHistorySyncRemainingPausedSeconds=function(){const e=p.default.get(c.MD_KEYS.HISTORY_SYNC_REMAINING_PAUSED_SECONDS);if("number"==typeof e)return e},t.getHistorySyncStatus=h,t.getHistorySyncStatusAfterPairingLoggingCount=function(){return u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT)},t.getHistorySyncTotalProcessedMessageCount=T,t.getInitialHistorySyncComplete=function(){return!0===u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.INITIAL_HISTORY_SYNCED)},t.getInitialHistorySyncCompleteLocalStorage=function(){return!!p.default.get(c.MD_KEYS.INITIAL_HISTORY_SYNCED,{storage:s.default})},t.getLastHistoryRecentSyncedChunk=function(){return u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED)},t.getLastHistorySyncedChunk=function(){return u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED)},t.getRecentSyncSingleChunkStatus=y,t.setChunkCountForEndOfRecentHistorySync=function(){return A.apply(this,arguments)},t.setEstimatedChunkCountForEndOfRecentHistorySync=function(){return m.apply(this,arguments)},t.setHistoryInitialSyncBoundary=function(){return S.apply(this,arguments)},t.setHistorySyncEarliestDate=function(e){p.default.set(c.KEYS.HISTORY_SYNC_EARLIEST_DATE,e)},t.setHistorySyncRemainingPausedSeconds=function(e){p.default.set(c.MD_KEYS.HISTORY_SYNC_REMAINING_PAUSED_SECONDS,e)},t.setHistorySyncStatus=function(){return g.apply(this,arguments)},t.setHistorySyncStatusAfterPairingLoggingCount=function(){return v.apply(this,arguments)},t.setHistorySyncTotalProcessedMessageCount=function(){return I.apply(this,arguments)},t.setInitialHistorySyncComplete=function(){return _.apply(this,arguments)},t.setLastHistorySyncedChunk=function(){return f.apply(this,arguments)},t.setRecentSyncSingleChunkStatus=function(){return E.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(29987),s=r(n(44848)),l=n(25993),u=n(17657),c=n(59356),d=n(56333),p=r(n(61112));function f(){return(f=(0,o.default)((function*(e,t,n){null!=e&&null!=t&&(e===l.HistorySync$HistorySyncType.RECENT&&(__LOG__(2)`[history sync] set last history sync chunk with chunk order ${t}`,yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED,{chunkOrder:t,progress:n})),yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED,`${e}_${t}`),p.default.set(c.MD_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED,`${e}_${t}`,{shouldWriteToIdb:!1}))}))).apply(this,arguments)}function _(){return(_=(0,o.default)((function*(){return yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.INITIAL_HISTORY_SYNCED,!0),p.default.set(c.MD_KEYS.INITIAL_HISTORY_SYNCED,"true",{shouldWriteToIdb:!1})}))).apply(this,arguments)}function g(){return(g=(0,o.default)((function*(e){var t;const n=null!==(t=yield h())&&void 0!==t?t:{};yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS,(0,i.default)((0,i.default)({},n),e)),p.default.set(c.MD_KEYS.HISTORY_SYNC_STATUS,(0,i.default)((0,i.default)({},n),e),{shouldWriteToIdb:!1})}))).apply(this,arguments)}function h(){return u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS)}function A(){return(A=(0,o.default)((function*(e){yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC,e)}))).apply(this,arguments)}function m(){return(m=(0,o.default)((function*(e){yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC,e)}))).apply(this,arguments)}function E(){return(E=(0,o.default)((function*(e,t,n){var r;if(null==n||e!==l.HistorySync$HistorySyncType.RECENT)return;__LOG__(2)`[history sync] set recent sync single chunk ${n} status to ${t}`;const o=null!==(r=yield y())&&void 0!==r?r:{};yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_SINGLE_CHUNK_STATUS,(0,i.default)((0,i.default)({},o),{[n]:t}))}))).apply(this,arguments)}function y(){return u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_SINGLE_CHUNK_STATUS)}function S(){return(S=(0,o.default)((function*(e){return u.userPrefsIdb.set(c.HASHED_KEYS.INITIAL_HIST_BOUNDARY,e)}))).apply(this,arguments)}function v(){return(v=(0,o.default)((function*(e){yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT,e)}))).apply(this,arguments)}function I(){return(I=(0,o.default)((function*(e){var t;const n=null!==(t=T())&&void 0!==t?t:0;yield u.userPrefsIdb.set(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT,n+e)}))).apply(this,arguments)}function T(){return u.userPrefsIdb.get(c.BACKEND_ONLY_KEYS.HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT)}},59356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserPrefs=t.MdKey=t.MD_NOISE_KEYS=t.MD_KEYS=t.KEYS=t.HASHED_KEYS=t.COLLECTIONS_KEYS=t.BACKEND_ONLY_KEYS=void 0;const r=Object.freeze({STORAGE_TEST:"storage_test",CLIENT_TOKEN:"WAToken1",SERVER_TOKEN:"WAToken2",SECRET:"WASecretKey",SECURITY_NOTIFICATIONS:"WASecurityNotifications",BROWSER_ID:"WABrowserId",GROUP_ASSIGNED_COLOR:"WAGroupAssignedColor-17",GLOBAL_MUTE_SOUNDS:"WAGlobalSounds",GLOBAL_MUTE_CALL_RINGTONE:"WAGlobalCallRingtone",OUTGOING_MESSAGE_SOUND:"WAOutgoingMessageSound",GLOBAL_MUTE_NOTIFICATIONS:"WAGlobalNotifications",GLOBAL_MUTE_IN_APP_NOTIFICATIONS:"WAGlobalInAppNotifications",GLOBAL_MUTE_PREVIEWS:"WAGlobalPreviews",GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED:"WAGlobalOfflineNotificationsEnabled",GLOBAL_OFFLINE_NOTIFICATIONS_INTERNAL_ENABLED_ONCE:"WAGlobalOfflineNotificationsInternalEnabledOnce",GLOBAL_COLLAPSE_MUTED:"WAGlobalCollapseMuted",NOTIFICATION_SOUND:"WANotificationSound",AUTO_DOWNLOAD_PHOTOS:"WAAutoDownloadPhotos",AUTO_DOWNLOAD_AUDIO:"WAAutoDownloadAudio",AUTO_DOWNLOAD_VIDEOS:"WAAutoDownloadVideos",AUTO_DOWNLOAD_DOCUMENTS:"WAAutoDownloadDocuments",LANG:"WALangPref",LAST_ACTIVE_EMOJI_TAB:"WALastActiveEmojiTab",LAST_SELECTED_COMPOSE_BOX_PANEL:"WALastActiveComposeBoxPanel",LAST_CHAT_MUTE_DURATION:"WALastChatMuteDuration",UNKNOWN_ID:"WAUnknownID",VERSION:"WAVersion",LOAD_RETRY_GENERATION:"WALoadRetryGeneration",WHATSAPP_MUTEX:"whatsapp-mutex",MUTEX_PING_TIMEOUT_SECONDS:"mutex-ping-timeout",LAST_WID:"last-wid",LAST_WID_MD:"last-wid-md",SAVE_TO_CAMERA_ROLL:"save_to_camera_roll",MARK_TRANSLATIONS:"mark_translations",PINS_DEBUG_MODE:"pins_debug_mode",IS_OPT_IN_EXTERNAL_BETA:"is_opt_in_external_beta",DEXIE_VERSION:"dexie_version",POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE:"postcode_auto_open_change_postcode_done",POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT:"postcode_auto_open_change_postcode_count",POSTCODE_TOOLTIP_VIEW_COUNT:"postcode_tooltip_view_count",POSTCODE_TOOLTIP_VIEWED_IN_SESSION:"postcode_tooltip_viewed_in_session",LAST_PUSHNAME:"last-pushname",PTT_PLAYBACK_RATE:"WAPttPlaybackRate",LOGOUT_DIRTY_BIT:"post-logout",DAILY_STATS_START_TIME:"WADailyStatsStartTime",PRIMARY_FEATURES:"WAPrimaryFeatures",TOS_STATE_FETCH_ITERATION:"ToSStateFetchIteration",NUX_LIST:"WANuxList",LID:"WALid",ME_DISPLAY_NAME:"me-display-name",PRESERVED_USER_KEYS:"preserved_user_keys",LAST_STATUS_USAGE:"last-status-usage",MOBILE_PLATFORM_DEPRECATED:"mobile-platform",REMEMBER_ME:"remember-me",NO_TAKEOVER:"no-takeover",WHATSAPP_LS_VERSION:"ver",USER_ACTIVITY_TIME_SPENT_EVENT:"WaTimeSpentEvent",TIME_SPENT_BITARRAY_EVENT:"WAWebTsBitarrayEvent",MEDIA_VOLUME:"video-volume",MEDIA_MUTE:"video-mute",MEDIA_HD:"hd-media",CONTACT_CHECKSUM:"contact-checksum",CONTACT_CHECKSUM_MODEL_STORAGE:"contact_checksum",FREQUENT_CONTACTS:"frequent_contacts",GK_PROTO:"gk_proto",INITIAL_HIST_BOUNDARY:"history_initial_sync_boundry",INITIAL_GROUP_PHASH:"initial_group_phash",IS_SMB:"is-smb",COMPOSE_CONTENTS_PREFIX:"compose-contents_",THEME:"theme",SYSTEM_THEME_MODE:"system-theme-mode",ABPROPS:"abprops",ABPROPS_REFRESH_ID:"abprops-refresh-id",HISTORY_SYNC_EARLIEST_DATE:"history-sync-earliest-date",CHATS_USER_SENT_MESSAGE_TO:"chats-user-sent-message-to",SYNCD_DISABLED_DUE_TO_FATAL:"syncd_disabled_due_to_fatal",CONTACT_SYNC_REFRESH:"contact-sync-refresh-seconds",TOS_3:"TOS_STATE_20210210",LOCAL_TAKEOVER_OK:"local-takeover-ok",PS_KILLSWITCH_TOKEN:"ps-killswitch-token",STORAGE_DISMISS_STATE:"storage-dismiss-state",STORAGE_ALERT_FLAG:"storage-alert-flag",HOUR_24:"hour-24",PERSISTENT_EXPIRING_ID:"WaPersistentExpiringId",LAST_ELECTRON_NOTIFICATION_CLOSE:"last-electron-notification-close",ELECTRON_DEPRECATION_HAS_CTA_BEEN_CLICKED_BEFORE:"electron-deprecation-has-cta-been-clicked-before",FIRST_SEEN_DESKTOP_UPSELL_BBAR:"first-seen-desktop-upsell-bbar",DESKTOP_UPSELL_USER_HAS_CLICKED_CALL_MODAL:"desktop-upsell-user-has-clicked-call-modal",DESKTOP_UPSELL_USER_HAS_DISMISSED_CHATLIST_TOASTBAR:"desktop-upsell-user-has-dismissed_chatlist-toastbar",WEB_NOTIFICATIONS_BB_STATUS:"WAWebNotificationsButterbarStatus",OFFLINE_NOTIFICATIONS_BB_STATUS:"WAOfflineNotificationsButterbarStatus",FB_SHOPS_SUNSET_BB_STATUS:"WAWebFBShopsSunsetButterbarStatus",EXISTING_LID_SIGNAL_SESSION_IS_CLEANED:"existing_lid_signal_session_is_cleaned",LID_DB_MIGRATION:"lid_db_migration",VERIFIED_BUSINESS_NAME_IS_CLEANED:"WAVerifiedBusinessNameIsCleaned",WHATSAPP_WEB_EXTERNAL_BETA:"whatsapp_web_beta",WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT:"whatsapp_web_beta_dirty_bit",WHATSAPP_WEB_EXTERNAL_BETA_IDB:"WAWebBetaOptInStatus",WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB:"WAWebBetaOptInDirtyBit",CHAT_UTM:"deeplink_utm",AD_CREATION_FLOW_ID_KEY:"ad_creation_flow_id_key",AD_CREATION_SEQUENCE_NUMBER_KEY:"ad_creation_sequence_number_key",AD_ENTRY_POINTS_CONFIGURATION:"ad_entry_points_configuration",AD_ACCOUNT_TOKEN:"ad_account_token",CHATLIST_PANEL_STATE:"chatlist_panel_state",CTWA_DATA_SHARING_UPSELL_ACTIVE:"ctwa_data_sharing_upsell_active",CTWA_DATA_SHARING_COOL_OFF:"ctwa_data_sharing_cool_off",CTWA_CONSUMER_TRANSPARENCY_INFO_ICON:"ctwa_consumer_transparency_info_icon",DISAPPEARING_MSG_DISCLAIMER_DIMISSED:"disappearing_msg_disclaimer_dimissed",TIME_SPENT_SESSION:"WAWebTimeSpentSession",TIME_SPENT_PENDING_BACKGROUND_NAVIGATION:"WAWebTimeSpentPendingBackgroundNavigation",WA_WEB_CACHED_RECOMMENDED_NEWSLETTERS:"WAWebCachedRecommendedNewsletters",WA_WEB_NEWSLETTERS_SUBSCRIBERS_FULL:"WAWebNewsletterSubscribersFull",WA_WEB_NEWSLETTERS_SUBSCRIBERS_LIMITED:"WAWebNewsletterSubscribersLimited",WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS:"WAWebCachedNewsletterSubscribers",WA_WEB_CACHED_NEWSLETTER_DIRECTORY_PAGES:"WAWebCachedNewsletterDirectoryPages",LAST_PROFILE_PIC_THUMB_UPDATE_TS:"last_profile_pic_thumb_update_ts_v2",AUTO_LOGOUT_ENABLED:"auto_logout_enabled",PAYMENT_INFO:"WAPaymentInfo",CUSTOM_PAYMENT_METHODS:"WACustomPaymentMethods",WA_WEB_ID_UPSELL_SNOOZE_UNTIL:"WAWebIDUpsellSnoozeUntil",WA_WEB_DB_TABLE_USAGE_ENABLED:"WAWebDBUsageLoggingEnabled"});t.KEYS=r;const i=n(76672).Mirrored(["ChatLockHide","ChatLockSecretCode","DisableLinkPreviews","DeviceCapabilities","PageLoadDebug"]);t.UserPrefs=i;const o=Object.freeze({EMOJI_VARIANT_COLLECTION:"emoji_variant_collection",RECENT_EMOJI_COLLECTION:"recent_emoji_collection",RECENT_REACTIONS_COLLECTION:"recent_reactions_collection",CHAT_PREFERENCE_COLLECTION:"chat_preference",CONVERSION_TUPLE_COLLECTION:"conversion_tuple",MUTE_COLLECTION:"mute",PROFILE_PIC_THUMB_COLLECTION:"profile_pic_thumb",UNATTRIBUTED_MESSAGE_COLLECTION:"unattributed_message_collection",CART_COLLECTION:"cart_collection",DAILY_AGGREGATED_STATS_COLLECTION:"daily_aggregated_stats"});t.COLLECTIONS_KEYS=o;const a=Object.freeze({NOISE_INFO:"WANoiseInfo",NOISE_INFO_IV:"WANoiseInfoIv",ME_INFO:"WAMeInfo",DEVICE_ID:"WADeviceId",ROUTING_INFO:"WARoutingInfo",INITIAL_HISTORY_SYNCED:"WaInitialHistorySynced",CRITICAL_DATA_SYNCED:"critical_data_synced",HISTORY_SYNC_STATUS:"WAHistorySyncStatus",HISTORY_SYNC_REMAINING_PAUSED_SECONDS:"WAHistorySyncRemainingPausedSeconds",ADV_SECRET_KEY:"WaADVSecretKey",IS_SMB:"WAIsSMB",LAST_OFFLINE_MESSAGE:"WALastOfflineMessage",BLOCKLIST_HASH:"WABlocklistHash",SHOULD_CHECK_CONTACT_SYNC_STATUS:"WAShouldCheckContactSyncStatus",WEB_ENC_SALT:"WebEncKeySalt",MD_UPGRADE_WAM_FLAG:"MdUpgradeWamFlag",MD_HISTORY_LAST_CHUNK_PROCESSED:"MdHistoryLastChunkProcessed",UNARCHIVE_CHATS_SETTING:"WAUnarchiveChatsSetting",ARCHIVE_V2_ENABLED_SETTING:"WAArchiveV2EnabledSetting",SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS:"WASyncdPrimaryAllowsAllMutations",MD_SYNC_ACTIONS_ACTION_SANITIZED:"MdSyncActionsActionSanitized",CHAT_THREAD_LOGGING_OFFSET:"ChatThreadLoggingOffset",CHAT_THREAD_LOGGING_SECRET:"ChatThreadLoggingSecret",CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS:"ChatThreadLoggingLastUploadedStartTs",IS_COMMUNITY_DISCOVERED:"WAIsCommunityDiscovered",PAIRING_TIMESTAMP:"MdPairingTimestamp",RECENT_MAILBOX_AGE_DAYS:"MdRecentMailboxAgeDays",LAST_PERIODIC_APP_STATE_SYNC_TS:"MdLastPeriodicAppStateSyncTs",MD_LOGIN_COOKIE_REQUEST_COMPLETE:"MdLoginCookieRequestComplete",SCREEN_LOCK_DURATION_SECONDS:"WAScreenLockDuration",SCREEN_UNLOCK_TRY_COUNT:"WAScreenUnlockTryCount",SCREEN_LOCK_IV:"WAScreenLockIV",SCREEN_LOCK_DATA_IV:"WAScreenLockDataIV",SCREEN_LOCK_SALT:"WAScreenLockSalt",SCREEN_LOCK_ITERATIONS:"WAScreenLockIterations",CACHED_PROFILE_PIC_EURL:"WACachedProfilePicEURL",COMMUNITY_TAB_LAST_SEEN_TIMESTAMP:"WACommunityTabLastSeenTimestamp",KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE:"key_sever_client_expiration_override",COLUMN_PACKING_ENABLED:"WAWebColumnPackingEnabled",NEWSLETTER_TAB_LAST_SEEN_TIMESTAMP:"WANewslettersTabLastSeenTimestamp",NEWSLETTER_WAS_BOOTSTRAPPED:"WANewslettersWasBootstrapped",BOT_LIST_LAST_REQUESTED_TIMESTAMP:"WABotListLastRequestedTimestamp",BOT_AI_WAITLIST_STATE:"WABotAiWaitlistState",IS_HOSTED_ME_ACCOUNT:"WAIsHostedMeAccount",MMS4_CONN:"WAMms4Conn"});t.MD_KEYS=a;const s=n(76672).Mirrored([]);t.MdKey=s;const l=Object.freeze({NOISE_INFO:"WANoiseInfo",NOISE_INFO_IV:"WANoiseInfoIv",WEB_ENC_SALT:"WAWebEncKeySalt"});t.MD_NOISE_KEYS=l;const u=Object.freeze({ROUTING_INFO:"WARoutingInfo",INITIAL_HISTORY_SYNCED:"WAInitialHistorySynced",HISTORY_SYNC_STATUS:"WAHistorySyncStatus",BLOCKLIST_HASH:"WABlocklistHash",CRITICAL_DATA_SYNCED:"WACriticalDataSynced",SHOULD_CHECK_CONTACT_SYNC_STATUS:"WAShouldCheckContactSyncStatus",ADV_SECRET_KEY:"WAADVSecretKey",MD_UPGRADE_WAM_FLAG:"WAMdUpgradeWamFlag",MD_HISTORY_LAST_CHUNK_PROCESSED:"WAMdHistoryLastChunkProcessed",UNARCHIVE_CHATS_SETTING:"WAUnarchiveChatsSetting",ARCHIVE_V2_ENABLED_SETTING:"WAArchiveV2EnabledSetting",MD_SYNC_ACTIONS_ACTION_SANITIZED:"WAMdSyncActionsActionSanitized",CHAT_THREAD_LOGGING_OFFSET:"WAChatThreadLoggingOffset",CHAT_THREAD_LOGGING_SECRET:"WAChatThreadLoggingSecret",CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS:"WAChatThreadLoggingLastUploadedStartTs",IS_COMMUNITY_DISCOVERED:"WAIsCommunityDiscovered",PAIRING_TIMESTAMP:"WAMdPairingTimestamp",RECENT_MAILBOX_AGE_DAYS:"WAMdRecentMailboxAgeDays",LAST_PERIODIC_APP_STATE_SYNC_TS:"WAMdLastPeriodicAppStateSyncTs",MD_LOGIN_COOKIE_REQUEST_COMPLETE:"WAMdLoginCookieRequestComplete",HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC:"WAHistorySyncChunkCountForEndOfRecentSync",MOBILE_PLATFORM:"WAMobilePlatform",NON_CRITICAL_DATA_SYNC_STATUS:"WANonCriticalDataSyncStatus",SERVER_PROPS:"WAServerProps",SERVER_PROPS_ATTRIBUTES:"WAServerPropsAttributes",PRIMARY_FEATURES:"WAPrimaryFeatures",APP_VERSION_BASE:"WAVersionBase",ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC:"WAEstimatedHistorySyncChunkCountForEndOfRecentSync",OFFLINE_PUSH_COUNT:"WAOfflinePushCount",HISTORY_SYNC_SINGLE_CHUNK_STATUS:"WAHistorySyncSingleChunkStatus",LAST_PUSH_COMPLETE_TIMESTAMP:"WALastPushCompleteTimestamp",OFFLINE_PUSH_DISABLED:"WAOfflinePushDisabled",MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED:"WAMdHistoryLastRecentSyncChunkProcessed",OFFLINE_NOTIFICATION_L10N_CONTENT:"WAOfflineNotificationContent",LOGOUT_REASON:"WALogoutReason",HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT:"WAHistorySyncStatusAfterPairingLoggingCount",STATUS_ALLOW_LIST:"WAStatusPostingAllowList",STATUS_DENY_LIST:"WAStatusPostingDenyList",STATUS_SENDER_KEY:"WAStatusPostingSenderkey",STATUS_PRIVACY_SETTING:"WAStatusPostingPrivacySetting",OFFLINE_NOTIFICATION_ENGAGEMENT:"WAOfflineNotificationEngagement",IS_HOSTED_ME_ACCOUNT:"WAIsHostedMeAccount",TEXT_STATUS_SUGGESTIONS:"WATextStatusSuggestions",MMS4_CONN:"WAMms4Conn",HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT:"WAHistorySyncTotalProcessedMessageCount"});t.BACKEND_ONLY_KEYS=u;const c=Object.freeze({USER_PRIVACY_SETTINGS:"user-privacy-settings",INITIAL_HIST_BOUNDARY:"history_initial_sync_boundry"});t.HASHED_KEYS=c},15107:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(93042),o=n(51698),a=n(17657),s=n(59356),l=r(n(637)),u=r(n(61112));var c={getLangPref:function(){return l.default.getItemFromLocalStorage(s.KEYS.LANG)},setLangPref:function(e){l.default.setItemToLocalStorage(s.KEYS.LANG,e),(0,i.isSocketConnected)()&&a.userPrefsIdb.set(s.KEYS.LANG,e)},getMarkTranslations:function(){if(!o.MARK_TRANSLATIONS_ENABLED)return!1;const e=u.default.get(s.KEYS.MARK_TRANSLATIONS);return"boolean"==typeof e?e:o.MARK_TRANSLATIONS_ENABLED},setMarkTranslations:function(e){u.default.set(s.KEYS.MARK_TRANSLATIONS,e)},setHour24:function(e){u.default.set(s.KEYS.HOUR_24,e)},getHour24:function(){const e=u.default.get(s.KEYS.HOUR_24);return"boolean"==typeof e?e:null}};t.default=c},3885:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.assertGetMe=_,t.assertGetMeDisplayName=h,t.assertGetMeUser=g,t.clearGetMaybeMeUserCache=void 0,t.getMaybeMeLid=y,t.getMaybeMeLidUser=S,t.getMaybeMeUser=void 0,t.getMe=f,t.getMeDisplayName=function(){return h()},t.getMeLidUser=function(){return(0,d.toUserWid)((0,o.default)(y(),"meLid"))},t.getMePNandLIDWids=function(){const e=y();return null==e?[_()]:[_(),e]},t.getMeUser=A,t.isMeAccount=I,t.isMeAccountNonLid=function(e){if(null==e||!v(e))return!1;const t=m();if(null!=t&&e.isSameAccount(t))return!0;return!1},t.isMeDevice=function(e){if(null==e||!v(e))return!1;if(e.equals(_()))return!0;const t=y();return null!=t&&e.equals(t)},t.isMePrimary=function(e){if(null==e||!v(e))return!1;if(e.equals(A()))return!0;const t=S();return null!=t&&e.equals(t)},t.isMePrimaryNonLid=function(e){if(null==e||!v(e))return!1;if(e.equals(g()))return!0;return!1},t.isSerializedWidMe=function(e){return I((0,d.createWid)(e))},t.setMe=function(e){E(),l.userPreferencesStoreBase.set(u.KEYS.LAST_WID_MD,null==e?null:e.toString()),(0,i.setMyJids)((0,p.widToMyJids)(e))},t.setMeDisplayName=function(e){(0,s.isWorker)()?n(7184).setMyDisplayName(e):l.userPreferencesStoreBase.set(u.KEYS.ME_DISPLAY_NAME,e)},t.setMeLid=function(e){(0,s.isWorker)()?n(7184).setMyLidDeviceJid(e.toString()):l.userPreferencesStoreBase.set(u.KEYS.LID,e.toString())};var i=n(58117),o=r(n(49619)),a=n(77086),s=n(95160),l=n(50456),u=n(59356),c=r(n(27112)),d=n(51017),p=n(14356);function f(){if((0,s.isWorker)()){const e=n(7184).getMyDeviceJid;return(0,d.createWid)(e())}const e=l.userPreferencesStoreBase.get(u.KEYS.LAST_WID_MD);if("string"==typeof e)return c.default.isWid(e)?(0,d.createWid)(e):void 0}function _(){return(0,o.default)(f(),"me")}function g(){return(0,o.default)(A(),"meUser")}function h(){return(0,o.default)(function(){if((0,s.isWorker)())return n(7184).getMyDisplayName();const e=l.userPreferencesStoreBase.get(u.KEYS.ME_DISPLAY_NAME);if("string"==typeof e)return e}(),"meDisplayName")}function A(){return(0,d.toUserWid)(_())}const[m,E]=(0,a.memoizeWithClear)((()=>{const e=f();if(e)return(0,d.toUserWid)(e)}));function y(){const e=(0,s.isWorker)()?n(7184).getMyLidDeviceJid():l.userPreferencesStoreBase.get(u.KEYS.LID),t="string"==typeof e?e:null,r=c.default.isWid(t);return null!=t&&r?(0,d.createWid)(t):null}function S(){const e=y();return null==e?null:(0,d.toUserWid)(e)}function v(e){const t=e instanceof c.default;return t||__LOG__(3)`isWID: input exists but is not WID`,t}function I(e){if(null==e||!v(e))return!1;const t=m();if(null!=t&&e.isSameAccount(t))return!0;const n=y();return null!=n&&e.isSameAccount(n)}t.clearGetMaybeMeUserCache=E,t.getMaybeMeUser=m},98120:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getContactChecksum=function(){return o.default.getUser(i.KEYS.CONTACT_CHECKSUM_MODEL_STORAGE)},t.getInitialGroupPhash=function(e){const t=o.default.getUser(i.KEYS.INITIAL_GROUP_PHASH);try{return JSON.parse(t)[e]}catch(e){return null}},t.getInitialGroupPhashMap=function(){const e=o.default.getUser(i.KEYS.INITIAL_GROUP_PHASH);try{return JSON.parse(e)}catch(e){return null}},t.setContactChecksum=function(e){o.default.setUser(i.KEYS.CONTACT_CHECKSUM_MODEL_STORAGE,e)},t.setInitialGroupPhash=function(e){o.default.setUser(i.KEYS.INITIAL_GROUP_PHASH,JSON.stringify(e))};var i=n(59356),o=r(n(61112))},56333:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearRegistrationInfo=function(){return g.apply(this,arguments)},t.clearServerClientExpirationOverride=function(){return _.default.set(d.MD_KEYS.KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE,void 0)},t.getADVSecretKey=function(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.ADV_SECRET_KEY)},t.getArchiveV2EnabledSetting=function(){return!0===c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.ARCHIVE_V2_ENABLED_SETTING)},t.getBlocklistHash=function(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.BLOCKLIST_HASH)},t.getCachedProfilePicEURL=function(){return _.default.get(d.MD_KEYS.CACHED_PROFILE_PIC_EURL,{storage:l.default})},t.getChatThreadLoggingLastUploadedStartTs=function(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS)},t.getChatThreadLoggingOffset=function(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_OFFSET)},t.getChatThreadLoggingSecretB64=function(){const e=c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_SECRET);return Promise.resolve(e)},t.getCommunityTabLastSeenTimestamp=function(){var e;return null!==(e=_.default.get(d.MD_KEYS.COMMUNITY_TAB_LAST_SEEN_TIMESTAMP))&&void 0!==e?e:0},t.getIsHostedMeAccount=function(){return w.apply(this,arguments)},t.getIsHostedMeAccountFromLocalStorage=function(){if((0,a.bizHostedDevicesEnabled)()&&(0,s.isSMB)()){if(!0===_.default.get(d.BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT))return!0}return!1},t.getIsHostedMeAccountNoGating=function(){return D.apply(this,arguments)},t.getMdLoginCookieRequestComplete=function(){return!0===c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.MD_LOGIN_COOKIE_REQUEST_COMPLETE)},t.getMms4Conn=function(){return p.default.getItemFromLocalStorage(d.BACKEND_ONLY_KEYS.MMS4_CONN)},t.getNewsletterWasBootstrapped=function(){const e=_.default.get(d.MD_KEYS.NEWSLETTER_WAS_BOOTSTRAPPED);if("boolean"==typeof e)return e;return!1},t.getNoiseInfo=A,t.getNoiseInfoIv=function(){return p.default.getItemFromLocalStorage(d.MD_NOISE_KEYS.NOISE_INFO_IV)},t.getPairingTimestamp=function(){const e=_.default.get(d.MD_KEYS.PAIRING_TIMESTAMP);return null==e?null:parseInt(e,10)},t.getRecentMailboxAgeDays=function(){return b.apply(this,arguments)},t.getRoutingInfo=function(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.ROUTING_INFO)},t.getServerClientExpirationOverride=function(){const e=_.default.get(d.MD_KEYS.KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE);if(null==(null==e?void 0:e.ts)||null==(null==e?void 0:e.appVersion))return;return{timestamp:parseInt(e.ts,10),appVersion:e.appVersion}},t.getShouldCheckContactSyncStatus=function(){return!0===c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS)},t.getUnarchiveChatsSetting=function(){return!0===c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.UNARCHIVE_CHATS_SETTING)},t.getWebEncSalt=function(){return p.default.getItemFromLocalStorage(d.MD_NOISE_KEYS.WEB_ENC_SALT)},t.isRegistered=function(){return!(!A()||!(0,f.getMe)())},t.setADVSecretKey=function(){return v.apply(this,arguments)},t.setArchiveV2EnabledSetting=function(){return P.apply(this,arguments)},t.setBlocklistHash=function(){return I.apply(this,arguments)},t.setCachedProfilePicEURL=function(e){return _.default.set(d.MD_KEYS.CACHED_PROFILE_PIC_EURL,e)},t.setChatThreadLoggingLastUploadedStartTs=function(){return R.apply(this,arguments)},t.setChatThreadLoggingOffset=function(){return C.apply(this,arguments)},t.setChatThreadLoggingSecretB64=function(){return O.apply(this,arguments)},t.setCommunityTabLastSeenTimestamp=function(e){_.default.set(d.MD_KEYS.COMMUNITY_TAB_LAST_SEEN_TIMESTAMP,e)},t.setIsHostedMeAccount=function(){return N.apply(this,arguments)},t.setMdLoginCookieRequestComplete=function(){return m.apply(this,arguments)},t.setMms4Conn=function(e){return p.default.setItemToLocalStorage(d.BACKEND_ONLY_KEYS.MMS4_CONN,e)},t.setNewsletterWasBootstrapped=function(){_.default.set(d.MD_KEYS.NEWSLETTER_WAS_BOOTSTRAPPED,!0)},t.setNoiseInfo=function(){return h.apply(this,arguments)},t.setNoiseInfoIv=function(){return E.apply(this,arguments)},t.setPairingTimestamp=function(e){return _.default.set(d.MD_KEYS.PAIRING_TIMESTAMP,e)},t.setRecentMailboxAgeDays=function(){return T.apply(this,arguments)},t.setRoutingInfo=function(){return y.apply(this,arguments)},t.setServerClientExpirationOverride=function(e,t){return _.default.set(d.MD_KEYS.KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE,{ts:e,appVersion:t})},t.setUnarchiveChatsSetting=function(){return M.apply(this,arguments)},t.setWebEncSalt=function(){return S.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(41404),s=n(43744),l=r(n(44848)),u=n(85608),c=n(17657),d=n(59356),p=r(n(637)),f=n(3885),_=r(n(61112));function g(){return(g=(0,i.default)((function*(){const e=[d.MD_KEYS.NOISE_INFO,d.MD_KEYS.ME_INFO,d.MD_KEYS.DEVICE_ID,d.MD_KEYS.ROUTING_INFO,d.MD_KEYS.INITIAL_HISTORY_SYNCED,d.MD_KEYS.WEB_ENC_SALT];e.push(d.KEYS.LAST_WID_MD),e.map((e=>{_.default.set(e,void 0)})),yield u.userPrefsCacheStorage.clearCacheStorage()}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){p.default.setItemToLocalStorage(d.MD_NOISE_KEYS.NOISE_INFO,e),yield u.userPrefsCacheStorage.setItemToCacheStorage(d.MD_NOISE_KEYS.NOISE_INFO,e)}))).apply(this,arguments)}function A(){return p.default.getItemFromLocalStorage(d.MD_NOISE_KEYS.NOISE_INFO)}function m(){return(m=(0,i.default)((function*(){return yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.MD_LOGIN_COOKIE_REQUEST_COMPLETE,!0),_.default.set(d.MD_KEYS.MD_LOGIN_COOKIE_REQUEST_COMPLETE,!0)}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){p.default.setItemToLocalStorage(d.MD_NOISE_KEYS.NOISE_INFO_IV,e),yield u.userPrefsCacheStorage.setItemToCacheStorage(d.MD_NOISE_KEYS.NOISE_INFO_IV,e)}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.ROUTING_INFO,e);const{domain:t,edgeRouting:n}=e,r={domain:t,edgeRouting:n?(0,o.encodeB64)(n):null};return _.default.set(d.MD_KEYS.ROUTING_INFO,r,{storage:l.default})}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){return null!=e?(p.default.setItemToLocalStorage(d.MD_NOISE_KEYS.WEB_ENC_SALT,e),yield u.userPrefsCacheStorage.setItemToCacheStorage(d.MD_NOISE_KEYS.WEB_ENC_SALT,e)):(p.default.removeItemFromLocalStorage(d.MD_NOISE_KEYS.WEB_ENC_SALT),yield u.userPrefsCacheStorage.removeItemFromCacheStorage(d.MD_NOISE_KEYS.WEB_ENC_SALT)),_.default.set(d.MD_KEYS.WEB_ENC_SALT,e,{shouldWriteToIdb:!1})}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){return null==e?yield c.userPrefsIdb.remove(d.BACKEND_ONLY_KEYS.ADV_SECRET_KEY):yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.ADV_SECRET_KEY,e),_.default.set(d.MD_KEYS.ADV_SECRET_KEY,e)}))).apply(this,arguments)}function I(){return(I=(0,i.default)((function*(e){return yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.BLOCKLIST_HASH,e),_.default.set(d.MD_KEYS.BLOCKLIST_HASH,e)}))).apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e){return yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS,e),_.default.set(d.MD_KEYS.RECENT_MAILBOX_AGE_DAYS,e)}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS)}))).apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e){yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.UNARCHIVE_CHATS_SETTING,e),_.default.set(d.MD_KEYS.UNARCHIVE_CHATS_SETTING,e)}))).apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e){yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.ARCHIVE_V2_ENABLED_SETTING,e),_.default.set(d.MD_KEYS.ARCHIVE_V2_ENABLED_SETTING,e)}))).apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e){yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_OFFSET,e),_.default.set(d.MD_KEYS.CHAT_THREAD_LOGGING_OFFSET,e)}))).apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e){yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_SECRET,e),_.default.set(d.MD_KEYS.CHAT_THREAD_LOGGING_SECRET,e)}))).apply(this,arguments)}function R(){return(R=(0,i.default)((function*(e){yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS,e),_.default.set(d.MD_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS,e)}))).apply(this,arguments)}function N(){return(N=(0,i.default)((function*(){(0,a.smbHostedPrimaryPairingAllowed)()&&(0,s.isSMB)()&&(_.default.set(d.BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT,!0),yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT,!0))}))).apply(this,arguments)}function w(){return(w=(0,i.default)((function*(){if((0,a.bizHostedDevicesEnabled)()&&(0,s.isSMB)()){if(!0===(yield c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT)))return!0}return!1}))).apply(this,arguments)}function D(){return(D=(0,i.default)((function*(){if((0,s.isSMB)()){if(!0===(yield c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.IS_HOSTED_ME_ACCOUNT)))return!0}return!1}))).apply(this,arguments)}},55017:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_OFFLINE_NOTIFICATION_BB_STATUS=t.DEFAULT_NOTIFICATION_BB_STATUS=void 0,t.getCollapseMuted=function(){return!0===s.default.getUser(a.KEYS.GLOBAL_COLLAPSE_MUTED)},t.getGlobalCallRingtone=function(){return!0!==s.default.getUser(a.KEYS.GLOBAL_MUTE_CALL_RINGTONE)},t.getGlobalNotifications=function(){const e=s.default.getUser(a.KEYS.GLOBAL_MUTE_NOTIFICATIONS);var t;return"boolean"!=typeof e?(null===(t=window.Notification)||void 0===t?void 0:t.permission)===o.PERMISSION_ALLOWED:!e},t.getGlobalOfflineNotifications=function(){return!0===s.default.getUser(a.KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED)},t.getGlobalPreviews=function(){return!0!==s.default.getUser(a.KEYS.GLOBAL_MUTE_PREVIEWS)},t.getGlobalSecurityNotifications=function(){return!0!==s.default.getUser(a.KEYS.SECURITY_NOTIFICATIONS)},t.getGlobalSounds=function(){return!0!==s.default.getUser(a.KEYS.GLOBAL_MUTE_SOUNDS)},t.getIgnoreNondirectGroupMsg=function(){l;return!1},t.getOfflineNotificationsBBStatus=p,t.getOfflineNotificationsInternalEnabledOnce=function(){return!0===s.default.getUser(a.KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_INTERNAL_ENABLED_ONCE)},t.getOutgoingMessageSound=function(){return!0===s.default.getUser(a.KEYS.OUTGOING_MESSAGE_SOUND)},t.getWebNotificationsBBStatus=c,t.setCollapseMuted=function(e){s.default.setUser(a.KEYS.GLOBAL_COLLAPSE_MUTED,e)},t.setGlobalCallRingtone=function(e){s.default.setUser(a.KEYS.GLOBAL_MUTE_CALL_RINGTONE,!e)},t.setGlobalNotifications=function(e){s.default.setUser(a.KEYS.GLOBAL_MUTE_NOTIFICATIONS,!e)},t.setGlobalOfflineNotifications=function(e){s.default.setUser(a.KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED,e)},t.setGlobalPreviews=function(e){s.default.setUser(a.KEYS.GLOBAL_MUTE_PREVIEWS,!e)},t.setGlobalSecurityNotifications=function(e){s.default.setUser(a.KEYS.SECURITY_NOTIFICATIONS,!e)},t.setGlobalSounds=function(e){s.default.setUser(a.KEYS.GLOBAL_MUTE_SOUNDS,!e)},t.setIgnoreNondirectGroupMsg=function(e){l},t.setOfflineNotificationsBBStatus=function(e){var t,n,r;const i=p(),{isDismissed:o=!1,firstSeenTime:l=null,isLongResumeTime:u=!1}=i,c=null!==(t=e.isDismissed)&&void 0!==t?t:o,d=null!==(n=e.firstSeenTime)&&void 0!==n?n:l,f=null!==(r=e.isLongResumeTime)&&void 0!==r?r:u;s.default.setUser(a.KEYS.OFFLINE_NOTIFICATIONS_BB_STATUS,{isDismissed:c,firstSeenTime:d,isLongResumeTime:f})},t.setOfflineNotificationsInternalEnabledOnce=function(){s.default.setUser(a.KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_INTERNAL_ENABLED_ONCE,!0)},t.setOutgoingMessageSound=function(e){s.default.setUser(a.KEYS.OUTGOING_MESSAGE_SOUND,e)},t.setWebNotificationsBBStatus=function(e){var t;const n=c(),{firstSeenTime:r=null}=n,i=null!==(t=e.firstSeenTime)&&void 0!==t?t:r;s.default.setUser(a.KEYS.WEB_NOTIFICATIONS_BB_STATUS,{isDismissed:e.isDismissed,firstSeenTime:i})};var i=n(29987),o=n(46420),a=n(59356),s=r(n(61112));const l=null;const u={isDismissed:!1,firstSeenTime:null};function c(){const e=s.default.getUser(a.KEYS.WEB_NOTIFICATIONS_BB_STATUS);if(null==e)return u;if("object"!=typeof e||e instanceof Array)return u;return{isDismissed:!0===e.isDismissed,firstSeenTime:"number"==typeof e.firstSeenTime?(0,i.castToUnixTime)(e.firstSeenTime):null}}t.DEFAULT_NOTIFICATION_BB_STATUS=u;const d={isDismissed:!1,firstSeenTime:null,isLongResumeTime:!1};function p(){const e=s.default.getUser(a.KEYS.OFFLINE_NOTIFICATIONS_BB_STATUS);if(null==e||"object"!=typeof e||e instanceof Array)return d;return{isDismissed:!0===e.isDismissed,firstSeenTime:"number"==typeof e.firstSeenTime?(0,i.castToUnixTime)(e.firstSeenTime):null,isLongResumeTime:!0===e.isLongResumeTime}}t.DEFAULT_OFFLINE_NOTIFICATION_BB_STATUS=d},46486:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NuxPrefsEvent=void 0,t.getNUX=d,t.getNuxMaxViews=g,t.getNuxSyncList=f,t.nuxExistsInNuxSync=_,t.removeAllNuxSync=function(){l.default.set(s.KEYS.NUX_LIST,[])},t.removeNUX=p,t.resetNux=function(e){p(e);const t=f().filter((t=>t!==e));l.default.set(s.KEYS.NUX_LIST,t)},t.setNUX=function(e,t){l.default.setUser(e,t),c.handleNuxChange(e)},t.shouldShowNUX=function(e){const t=(0,a.getNuxSyncKey)(e);if(null!=t&&_(t))return!1;const n=d(e);if(!n)return!0;return n.views<g(e)},t.updateNuxSyncList=function(e){const t=new Set(f());e.forEach((e=>{let{nuxKey:n,acknowledged:r}=e;r?t.add(n):t.delete(n)})),l.default.set(s.KEYS.NUX_LIST,Array.from(t))};var i=n(56660),o=r(n(7880)),a=n(57705),s=n(59356),l=r(n(61112));class u extends o.default{handleNuxChange(e){this.trigger(e)}}const c=new u;function d(e){const t=l.default.getUser(e);if(null==t||"object"!=typeof t)return null;const n=t.views;return"number"==typeof n?{views:n}:null}function p(e){l.default.setUser(e),c.handleNuxChange(e)}function f(){const e=l.default.get(s.KEYS.NUX_LIST);return e instanceof Array?e.filter((e=>"string"==typeof e)):[]}function _(e){return f().includes(e)}function g(e){switch(e){case"desktop_upsell":return Number.POSITIVE_INFINITY;case"chat_assignment":return(0,i.chatAssignmentMaxNuxImpressions)();case"status_quick_replies":return 3;default:return 1}}t.NuxPrefsEvent=c},61112:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(93386)),o=r(n(7287)),a=r(n(27522)),s=n(1363),l=r(n(44848)),u=r(n(20589)),c=n(50456),d=n(59356),p=n(42589);class f extends c.UserPreferencesStoreBase{getMe(){return n(3885).getMaybeMeUser()}getKeys(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o.default)(t,t.map((t=>e.getItem(t,n))))}updatePreservedUserKeys(){const e=this.getMe();if(null==e)return;const t=e.toString(),n=super.get(d.KEYS.PRESERVED_USER_KEYS,{storage:l.default}),r=n instanceof Array?n:[],o=p.LS_PRESERVE_USER_KEYS.map((e=>(0,a.default)(this._concatenateKey(t,e))));super.set(d.KEYS.PRESERVED_USER_KEYS,(0,i.default)(r,o),{storage:l.default})}getPSIgnoringCache(e){return super.get(e,{storage:l.default,ignoreCache:!0})}getTS(e){return super.get(e,{storage:u.default})}setTS(e,t){super.set(e,t,{storage:u.default})}setUserSession(e,t){const n=this._getHashedDataWithMeUser(e);null!=n&&super.set(n,(0,s.asSerialisableComposeContentsType)(t),{storage:u.default})}getUserSession(e){const t=this._getHashedDataWithMeUser(e);return null!=t?super.get(t,{storage:u.default}):null}clearUserSessionItem(e){const t=this._getHashedDataWithMeUser(e);null!=t&&u.default.removeItem(t)}getCollection(e){return this.getUser(e)}setCollection(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null==this.getMe()||n||this.setUser(e,t)}getUser(e){const t=this._getHashedDataWithMeUser(e);return null!=t?super.get(t):null}setUser(e,t,n){const r=this._getHashedDataWithMeUser(e);null!=r&&super.set(r,t,n)}_getHashedDataWithMeUser(e){const t=this.getMe();if(!t)return __LOG__(3)`userPrefs: Me has not loaded yet.`,null;return(0,a.default)(this._concatenateKey(t.toString(),e))}_concatenateKey(e,t){return[e,t].join(":")}}var _=new f;t.default=_},42589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WACustomPaymentMethodType=t.TS_PRESERVE_KEYS=t.RecentStickerInitializedStatusType=t.PixKeyType=t.NonCriticalDataSyncStatusType=t.LS_PRESERVE_USER_KEYS=t.LS_PRESERVE_KEYS=t.HistorySyncSingleChunkStatusType=void 0;var r=n(59356);const i=n(76672)({RECENT_STICKER_INITIALIZED:"recent_sticker_initialized"});t.NonCriticalDataSyncStatusType=i;const o=n(76672)({SUCCESS:"success",NEED_REQUEST_BOOTSTRAP:"need_request_bootstrap"});t.RecentStickerInitializedStatusType=o;const a=n(76672)({RECEIVED:"received",NOTIFICATION_STORED:"notification_stored",DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DECODED:"decoded",MESSAGE_PREPROCESSED:"message_preprocessed",ENCRYPTED:"encrypted",APPLIED:"applied"});t.HistorySyncSingleChunkStatusType=a;const s=[r.KEYS.LANG,r.KEYS.WHATSAPP_MUTEX,r.KEYS.PRESERVED_USER_KEYS,r.KEYS.THEME,r.KEYS.SYSTEM_THEME_MODE,r.KEYS.ELECTRON_DEPRECATION_HAS_CTA_BEEN_CLICKED_BEFORE,r.KEYS.AUTO_LOGOUT_ENABLED];t.LS_PRESERVE_KEYS=s;t.TS_PRESERVE_KEYS=[];const l=[r.COLLECTIONS_KEYS.EMOJI_VARIANT_COLLECTION,r.COLLECTIONS_KEYS.RECENT_EMOJI_COLLECTION,r.COLLECTIONS_KEYS.RECENT_REACTIONS_COLLECTION,r.COLLECTIONS_KEYS.CHAT_PREFERENCE_COLLECTION,r.KEYS.GLOBAL_MUTE_NOTIFICATIONS,r.KEYS.GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED,r.KEYS.OUTGOING_MESSAGE_SOUND,r.KEYS.GLOBAL_MUTE_PREVIEWS,r.KEYS.GLOBAL_COLLAPSE_MUTED,r.KEYS.GLOBAL_MUTE_SOUNDS,r.KEYS.AUTO_DOWNLOAD_PHOTOS,r.KEYS.AUTO_DOWNLOAD_VIDEOS,r.KEYS.AUTO_DOWNLOAD_AUDIO,r.KEYS.AUTO_DOWNLOAD_DOCUMENTS,r.KEYS.TOS_3,r.KEYS.POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT,r.KEYS.POSTCODE_TOOLTIP_VIEW_COUNT,r.KEYS.PERSISTENT_EXPIRING_ID];t.LS_PRESERVE_USER_KEYS=l;const u=n(76672).Mirrored(["CPF","CNPJ","EMAIL","PHONE","EVP"]);t.PixKeyType=u;const c=n(76672)({PIX_KEY:"pix_key"});t.WACustomPaymentMethodType=c},96955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"asChatJid",{enumerable:!0,get:function(){return r.asChatJid}}),Object.defineProperty(t,"asMulticastJid",{enumerable:!0,get:function(){return r.asMulticastJid}}),Object.defineProperty(t,"asPhoneChatJid",{enumerable:!0,get:function(){return r.asPhoneChatJid}}),Object.defineProperty(t,"asStatusJid",{enumerable:!0,get:function(){return r.asStatusJid}}),Object.defineProperty(t,"authorAsUserJid",{enumerable:!0,get:function(){return r.authorAsUserJid}}),Object.defineProperty(t,"authorToUserId",{enumerable:!0,get:function(){return r.authorToUserId}}),Object.defineProperty(t,"defaultDeviceJidForUser",{enumerable:!0,get:function(){return r.defaultDeviceJidForUser}}),Object.defineProperty(t,"defaultLidDeviceJidForLidUserJid",{enumerable:!0,get:function(){return r.defaultLidDeviceJidForLidUserJid}}),Object.defineProperty(t,"defaultPhoneDeviceJidForUser",{enumerable:!0,get:function(){return r.defaultPhoneDeviceJidForUser}}),Object.defineProperty(t,"extractDeviceIDParts",{enumerable:!0,get:function(){return r.extractDeviceIDParts}}),Object.defineProperty(t,"extractDeviceId",{enumerable:!0,get:function(){return r.extractDeviceId}}),Object.defineProperty(t,"extractFromJid",{enumerable:!0,get:function(){return r.extractFromJid}}),Object.defineProperty(t,"extractJidFromJidWithType",{enumerable:!0,get:function(){return r.extractJidFromJidWithType}}),Object.defineProperty(t,"extractPhoneUserJid",{enumerable:!0,get:function(){return r.extractPhoneUserJid}}),Object.defineProperty(t,"extractUserId",{enumerable:!0,get:function(){return r.extractUserId}}),Object.defineProperty(t,"extractUserJid",{enumerable:!0,get:function(){return r.extractUserJid}}),Object.defineProperty(t,"fullFormDeviceJidString",{enumerable:!0,get:function(){return r.fullFormDeviceJidString}}),t.getGroupCallDomain=void 0,Object.defineProperty(t,"getGroupDomain",{enumerable:!0,get:function(){return r.getGroupDomain}}),Object.defineProperty(t,"getServerDomain",{enumerable:!0,get:function(){return r.getServerDomain}}),t.getUserDomain=void 0,Object.defineProperty(t,"groupIdFromJid",{enumerable:!0,get:function(){return r.groupIdFromJid}}),Object.defineProperty(t,"interpretAndValidateJid",{enumerable:!0,get:function(){return r.interpretAndValidateJid}}),Object.defineProperty(t,"interpretAsDeviceId",{enumerable:!0,get:function(){return r.interpretAsDeviceId}}),Object.defineProperty(t,"interpretAsGroupJid",{enumerable:!0,get:function(){return r.interpretAsGroupJid}}),Object.defineProperty(t,"interpretAsNumber",{enumerable:!0,get:function(){return r.interpretAsNumber}}),Object.defineProperty(t,"interpretAsPhoneUserJid",{enumerable:!0,get:function(){return r.interpretAsPhoneUserJid}}),Object.defineProperty(t,"interpretAsUserJid",{enumerable:!0,get:function(){return r.interpretAsUserJid}}),Object.defineProperty(t,"isPrimaryDevice",{enumerable:!0,get:function(){return r.isPrimaryDevice}}),Object.defineProperty(t,"maybeSanitizeLogLineText",{enumerable:!0,get:function(){return r.maybeSanitizeLogLineText}}),Object.defineProperty(t,"parseJidParts",{enumerable:!0,get:function(){return r.parseJidParts}}),Object.defineProperty(t,"phoneNumberFromJid",{enumerable:!0,get:function(){return r.phoneNumberFromJid}}),Object.defineProperty(t,"sanitizeJidForLogging",{enumerable:!0,get:function(){return r.sanitizeJidForLogging}}),Object.defineProperty(t,"stripAgentIdFromPhoneDeviceJid",{enumerable:!0,get:function(){return r.stripAgentIdFromPhoneDeviceJid}}),Object.defineProperty(t,"switchOnChatJidType",{enumerable:!0,get:function(){return r.switchOnChatJidType}}),Object.defineProperty(t,"switchOnJidType",{enumerable:!0,get:function(){return r.switchOnJidType}}),Object.defineProperty(t,"switchOnMsgrChatJidType",{enumerable:!0,get:function(){return r.switchOnMsgrChatJidType}}),Object.defineProperty(t,"switchOnMulticastJidType",{enumerable:!0,get:function(){return r.switchOnMulticastJidType}}),Object.defineProperty(t,"switchOnPhoneChatJidType",{enumerable:!0,get:function(){return r.switchOnPhoneChatJidType}}),Object.defineProperty(t,"switchOnPhoneJidType",{enumerable:!0,get:function(){return r.switchOnPhoneJidType}}),Object.defineProperty(t,"toBroadcastJid",{enumerable:!0,get:function(){return r.toBroadcastJid}}),Object.defineProperty(t,"toGroupJid",{enumerable:!0,get:function(){return r.toGroupJid}}),Object.defineProperty(t,"toLidDeviceJid",{enumerable:!0,get:function(){return r.toLidDeviceJid}}),Object.defineProperty(t,"toLidUserJid",{enumerable:!0,get:function(){return r.toLidUserJid}}),Object.defineProperty(t,"toPhoneDeviceJid",{enumerable:!0,get:function(){return r.toPhoneDeviceJid}}),Object.defineProperty(t,"toPhoneUserJid",{enumerable:!0,get:function(){return r.toPhoneUserJid}}),Object.defineProperty(t,"unsafeCoerceToDeviceId",{enumerable:!0,get:function(){return r.unsafeCoerceToDeviceId}}),Object.defineProperty(t,"unsafeCoerceToDeviceJid",{enumerable:!0,get:function(){return r.unsafeCoerceToDeviceJid}}),Object.defineProperty(t,"unsafeCoerceToGroupJid",{enumerable:!0,get:function(){return r.unsafeCoerceToGroupJid}}),Object.defineProperty(t,"unsafeCoerceToUserJid",{enumerable:!0,get:function(){return r.unsafeCoerceToUserJid}}),Object.defineProperty(t,"userIdFromJid",{enumerable:!0,get:function(){return r.userIdFromJid}});var r=n(44037);const i=(0,r.createJidUtils)({platform:"whatsapp"}),o=i.getUserDomain;t.getUserDomain=o;const a=i.getGroupCallDomain;t.getGroupCallDomain=a},42347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ifSome=function(e,t){if(null!=e)return t(e)}},77086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoizeWithClear=function(e){let t;return[function(){return t||(t=[e()]),t[0]},function(){t=null}]}},95160:(e,t)=>{"use strict";function n(){return"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts}Object.defineProperty(t,"__esModule",{value:!0}),t.isServiceWorker=function(){return n()&&"ServiceWorkerGlobalScope"in self},t.isWorker=n},80154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxPerGroup=function(e,t,n){const r=new Map;for(const i of e){const e=n(i),o=r.get(e);(null==o||t(i)>=t(o))&&r.set(e,i)}return Array.from(r.values())}},65417:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.flattenPairList=function(e){return(0,i.default)(e.map((e=>[e[0],e[1]])))},t.unFlattenPairList=function(e){if(e.length%2!=0)throw new RangeError("Flattened pairs come in 2, invalid list size to unflatten!");const t=[];for(let n=0;n<e.length;n++)t.push([e[n],e[++n]]);return t};var i=r(n(85564))},21282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentSettingType=void 0,t.parse=function(e){return JSON.parse(e)},t.stringify=function(e){return JSON.stringify(e)},t.stringifyPaymentStatus=function(e){return JSON.stringify(e)};const r=n(76672)({PIX_STATIC_CODE:"pix_static_code"});t.PaymentSettingType=r},83727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COOKIE_DOMAIN=void 0;let r=".web.whatsapp.com";n(28123).LOCALHOST_ENV_CONFIG&&(r=".whatsapp.com");const i=r;t.COOKIE_DOMAIN=i},5180:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},t.getCookie=function(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2];return},t.setCookie=function(e){e.session&&delete e.expirationDate;const t=[];["name","value","domain","path","secure","session","expirationDate"].forEach((n=>{const r=e[n];if(void 0!==r&&"value"!==n)switch(n){case"expirationDate":{const n=new Date(e.expirationDate);t.push(`expires=${n.toUTCString()}`);break}case"secure":t.push("secure");break;case"name":{const n=e.value||"";t.push(`${String(r)}=${n}`);break}default:t.push(`${n}=${String(r)}`)}})),document.cookie=t.join(";")}},13479:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToTextWithoutSpecialEmojis=function(e){if(!a){const e=(0,i.default)(Object.keys(o.default));a=new RegExp(`(${e})`,"g")}return a.lastIndex=0,e.replace(a,(e=>o.default[e]))};var i=r(n(69366)),o=r(n(39499));let a=null},20112:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPermutations=t.WOMEN_HOLDING_HANDS=t.WOMAN_AND_MAN_HOLDING_HANDS=t.PEOPLE_HOLDING_HANDS=t.OPEN_BOX_CHAR=t.MEN_HOLDING_HANDS=t.KISS_WOMAN_WOMAN=t.KISS_WOMAN_MAN=t.KISS_PERSON_PERSON=t.KISS_MAN_MAN=t.KISS=t.HANDSHAKE=t.EmojiUtil=t.COUPLE_WITH_HEART_WOMAN_WOMAN=t.COUPLE_WITH_HEART_WOMAN_MAN=t.COUPLE_WITH_HEART_PERSON_PERSON=t.COUPLE_WITH_HEART_MAN_MAN=t.COUPLE_WITH_HEART=void 0,t.isBaseMultiSkinToneEmoji=function(e){return w.has(e)};var i=r(n(88306)),o=r(n(60180)),a=r(n(49619)),s=r(n(25398)),l=r(n(69366)),u=n(43165),c=n(54618),d=n(6900),p=n(67454),f=r(n(41143)),_=r(n(60938));t.OPEN_BOX_CHAR="";const g=["","","","",""],h=new RegExp(g.join("|"),"g"),A="";t.PEOPLE_HOLDING_HANDS=A;const m="";t.WOMEN_HOLDING_HANDS=m;const E="";t.MEN_HOLDING_HANDS=E;const y="";t.WOMAN_AND_MAN_HOLDING_HANDS=y;const S=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128104);t.KISS_WOMAN_MAN=S;const v=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128105);t.KISS_WOMAN_WOMAN=v;const I=String.fromCodePoint(128104,8205,10084,65039,8205,128139,8205,128104);t.KISS_MAN_MAN=I;const T=String.fromCodePoint(129489,8205,10084,65039,8205,128139,8205,129489);t.KISS_PERSON_PERSON=T;const b=String.fromCodePoint(128143);t.KISS=b;const M=String.fromCodePoint(128105,8205,10084,65039,8205,128104);t.COUPLE_WITH_HEART_WOMAN_MAN=M;const P=String.fromCodePoint(128105,8205,10084,65039,8205,128105);t.COUPLE_WITH_HEART_WOMAN_WOMAN=P;const C=String.fromCodePoint(128104,8205,10084,65039,8205,128104);t.COUPLE_WITH_HEART_MAN_MAN=C;const O=String.fromCodePoint(129489,8205,10084,65039,8205,129489);t.COUPLE_WITH_HEART_PERSON_PERSON=O;const R=String.fromCodePoint(128145);t.COUPLE_WITH_HEART=R;const N=String.fromCodePoint(129309);t.HANDSHAKE=N;const w=new Set([A,m,E,y,S,v,I,b,M,P,C,R,N]),D=u.HEART_EMOJIS.map((e=>e)),L=new Set(["","","","","","","","","","","","","","","",""]),B=e=>e.replace(/\uFE0F/g,""),k=(0,i.default)(((e,t)=>function n(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.length===t)return[r];let i=[];for(let t=0;t<e.length;t++){const o=[...r];o.push(e[t]),i=i.concat(n(o))}return i}()),((e,t)=>e.toString()+t));t.getPermutations=k;function G(e){return e.every((t=>t===e[0]))?e[0]:e.join("")}const U=new class{constructor(){var e=this;this.skinToneVariations=g,this.emojiRegex=()=>{const e=this._createEmojiRegexIfNeeded();return e.lastIndex=0,e},this._createEmojiRegexIfNeeded=(0,s.default)((()=>{const e=this._getEmojiRegexSource();return new RegExp("("+e+")","g")})),this.onlyEmojiRegex=()=>{const e=this._createOnlyEmojiRegexIfNeeded();return e.lastIndex=0,e},this._createOnlyEmojiRegexIfNeeded=(0,s.default)((()=>{const e=this._getEmojiRegexSource();return new RegExp("^("+e+")+$","g")})),this.splitEmojis=e=>!1===this.containsOnlyEmoji(e)?null:e.split(this.emojiRegex()).filter(Boolean),this.extractAllEmojis=e=>!1===this.containsEmoji(e)?null:Array.from(e.matchAll(this.emojiRegex())).filter(Boolean).map((e=>e[1])),this.containsEmoji=e=>this.emojiRegex().test(e),this.containsOnlyEmoji=e=>this.onlyEmojiRegex().test(e),this.matchLargeEmojiPattern=e=>{if(null==e)return;if(e.length>50||e.includes(" "))return null;const t=this._getLargeEmojisRegex().exec(e);return t?t.filter(Boolean).slice(1):null},this.normalizeEmojiFromString=e=>this.normalizeEmoji(e),this.normalizeEmoji=e=>{const t=B(e),{unqualifiedToNormalizedEmoji:n}=this._getDerivedMaps();return n.get(t)},this.normalizeAllEmojis=(0,i.default)((e=>e?e.replace(this.emojiRegex(),((e,t)=>{var n;return L.has(t)?"":null!==(n=this.normalizeEmoji(t))&&void 0!==n?n:""})):"")),this.getSkinToneVariant=(e,t)=>{const n=this._getBaseToSkinToneEmojis().get(e);if(null==n)return null;const r=G(t);return n.get(r)},this._getDerivedMaps=(0,s.default)((()=>{const{orderedEmojis:e,legacyToEmoji:t}=this._getConfig(),n=new Map,r=new Map,i=new Map;let o=0;return e.forEach(((e,t)=>{if(""===e||null==e)return;(Array.isArray(e)?e:[e]).forEach((e=>{r.set(e,t);const n=B(e);i.set(n,e)})),n.set(t,o),o++})),(0,_.default)(t).forEach((e=>{let[t,n]=e;r.set(t,n);const o=B(t);i.set(o,t)})),{emojiToGlyphId:r,glyphIdToIndex:n,unqualifiedToNormalizedEmoji:i}})),this._getBaseToSkinToneEmojis=(0,s.default)((()=>{const{emojiToGlyphId:e}=this._getDerivedMaps(),t=new Map;for(const n of e.keys()){let e;const r=n.replace(h,(t=>(null==e&&(e=[]),e.push(t),"")));if(null==e)continue;const i=e;let o;o=""===r?m:""===r?E:""===r?y:r===O?R:r===T?b:r===String.fromCodePoint(129777,8205,129778)?N:r;const a=this.normalizeEmoji(o);if(null==a)continue;let s=t.get(a);null==s&&(s=new Map,s.set("",a),t.set(a,s));const l=G(i);s.set(l,n)}return t})),this._getSkinToneEmojisToBase=(0,s.default)((()=>{const e=new Map;for(const[t,n]of this._getBaseToSkinToneEmojis().entries())for(const r of n.values())e.set(r,t);return e})),this._getEmojiRegexSource=(0,s.default)((()=>{const{emojiToGlyphId:e}=this._getDerivedMaps();return(0,l.default)([...Array.from(e.keys()),...Array.from(L)].filter(Boolean))})),this._createLargeEmojisRegexIfNeeded=(0,s.default)((()=>{const e=this._getEmojiRegexSource();return new RegExp(`^(${e})(${e})?(${e})?$`)})),this.getEmojisInCategory=e=>{var t;return null!==(t=this._getConfig().categorizedEmojis[e])&&void 0!==t?t:[]},this._getEmojiToCategory=(0,s.default)((()=>{const{categorizedEmojis:e}=this._getConfig(),t=new Map;return Object.keys(e).forEach((n=>{const r=u.CATEGORY_ORDERING.indexOf(n);e[n].forEach((e=>{const n=this.normalizeEmoji(e);null!=n&&t.set(n,r)}))})),t})),this.getGlyphId=e=>{const t=this.normalizeEmoji(e);if(null==t)return null;const{emojiToGlyphId:n}=this._getDerivedMaps();return n.get(t)},this.getGlyphPath=(e,t)=>{const n=this.normalizeEmojiFromString(e);if(null==n)return null;const{emojiToGlyphId:r}=this._getDerivedMaps(),i=r.get(n);if(null==i)return null;if((0,p.experimentalEmojiAPIEnabled)())return(0,d.getGlyphExperimentalPath)(n,this._getConfig().emojiType,t);let o;return o=t>40?64:40,(0,c.getGlyphPath)(this._getConfig().emojiType,i,o)},this.getSpritesPath=(e,t,n,r)=>(0,p.experimentalEmojiAPIEnabled)()?(0,d.getEmojiSpritesExperimentalPath)(e,t,n,r):(0,c.getEmojiSpritesPath)(e,t,n,r),this.isGlyphCached=e=>{const t=this._getGlyphIndex(e);return this._getCachedGlyphs().get(t)},this.markGlyphCached=e=>{const t=this._getGlyphIndex(e);this._getCachedGlyphs().set(t)},this._getCachedGlyphs=(0,s.default)((()=>new o.default(this._getGlyphCount()))),this.getCssClasses=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";return[`b${e.getBucket(t)}`,"small"===n?"emoji":"emojik",e._getConfig().emojiType===u.EMOJI_TYPE.APPLE?"apple":"wa"].join(" ")},this.getStyle=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";const{xpos:r,ypos:i}=e._getCoordinates(t,n);return{backgroundPosition:`-${r}px -${i}px`}},this.getBucket=e=>{const t=this._getGlyphIndex(e);return`${Math.floor(t/u.BUCKET_SIZE)}`},this.getHeartEmojis=(0,s.default)((()=>D.map(this.normalizeEmoji).filter(Boolean))),this.getAnimatedEmojisToAssetMap=(0,s.default)((()=>{const e=new Map;return Array.from(u.ANIMATED_EMOJIS_STRING_TO_LOTTIE_ASSET_MAP).forEach((t=>{let[n,r]=t;const i=this.normalizeEmoji(n);null!=i&&e.set(i,r)})),e})),this._getLastBucketId=(0,s.default)((()=>{const e=this._getGlyphCount();return e-e%u.BUCKET_SIZE})),this._getLastBucketCols=(0,s.default)((()=>Math.floor(Math.sqrt(this._getGlyphCount()-this._getLastBucketId()))))}configure(e){e!==this._config&&(this._config=e,this.getHeartEmojis.reset(),this._createEmojiRegexIfNeeded.reset(),this._createLargeEmojisRegexIfNeeded.reset(),this._createOnlyEmojiRegexIfNeeded.reset(),this._getEmojiRegexSource.reset(),this._getCachedGlyphs.reset(),this._getSkinToneEmojisToBase.reset(),this._getBaseToSkinToneEmojis.reset(),this._getEmojiToCategory.reset(),this._getLastBucketId.reset(),this._getLastBucketCols.reset(),this._getDerivedMaps.reset(),this.getAnimatedEmojisToAssetMap.reset())}_getConfig(){return(0,f.default)(null!=this._config,"Attempt to use EmojiUtil before it's been configured"),this._config}isEmoji(e){return null!=this.normalizeEmoji(e)}getSkinToneBase(e){var t;const n=this.normalizeEmoji(e);return null==n?null:null!==(t=this._getSkinToneEmojisToBase().get(n))&&void 0!==t?t:null}_getLargeEmojisRegex(){const e=this._createLargeEmojisRegexIfNeeded();return e.lastIndex=0,e}getAssetIdForAnimatedEmoji(e){const t=this.getAnimatedEmojisToAssetMap(),n=this.normalizeEmojiFromString(e);return null!=n?t.get(n):null}_getGlyphCount(){const{glyphIdToIndex:e}=this._getDerivedMaps();return e.size}_getCoordinates(e,t){const n=this._getGlyphIndex(e),r=n%u.BUCKET_SIZE,i=n>=this._getLastBucketId()?this._getLastBucketCols():Math.floor(Math.sqrt(u.BUCKET_SIZE)),o=u.EMOJI_WIDTH[t],a=Math.floor(r/i);return{xpos:Math.floor(r%i)*o,ypos:a*o,width:o}}_getGlyphIndex(e){const{glyphIdToIndex:t}=this._getDerivedMaps();return(0,a.default)(t.get(e),"glyphIdToIndex.get(glyphId)")}getEmojiAggregate(e){const t=this.getNormalizedOrTofu(e),n=this.getSkinToneBase(t);return null!=n?n:B(t)}getNormalizedOrTofu(e){return this.normalizeEmojiFromString(e)?e:""}};t.EmojiUtil=U},69366:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a(null,o.default.fromForwardsStrings(e.sort(((e,t)=>t.length-e.length)).map((e=>`${e}${s}`))),null,0)};var i=r(n(3522)),o=r(n(49910));function a(e,t,n,r,o){const u=[];let c=!1,d=o;if(null==d)if(e&&1===r){l.has(e)&&(d=!0)}else e&&n&&2===r&&(d=l.has(n+e));t.getChildren().forEach((t=>{t.prefix!==s?u.push(a(t.prefix,t.node,e,r+1,d)):c=!0}));const p=e!==String.fromCodePoint(65039)||null==n||d?(0,i.default)(e||""):`${String.fromCodePoint(65039)}?`;let f=0===u.length?"":`(?:${u.join("|")})`;return f&&c&&(f+="?"),`${p}${f}`}const s="\n",l=new Set([String.fromCodePoint(169),String.fromCodePoint(174),String.fromCodePoint(8482),String.fromCodePoint(9823),String.fromCodePoint(9854),String.fromCodePoint(12336)])},43165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VARIATION_CATEGORY=t.ORDERED_CATEGORY_IDS=t.LargeEmojiSize=t.HEART_EMOJIS=t.EMOJI_WIDTH=t.EMOJI_TYPE=t.CATEGORY_ORDERING=t.CATEGORY_MAPPING=t.CATEGORIES=t.BUCKET_SIZE=t.ANIMATED_EMOJIS_STRING_TO_LOTTIE_ASSET_MAP=void 0;t.BUCKET_SIZE=25;t.CATEGORIES={SMILEYS_PEOPLE:"SMILEYS_PEOPLE",ANIMALS_NATURE:"ANIMALS_NATURE",FOOD_DRINK:"FOOD_DRINK",ACTIVITY:"ACTIVITY",TRAVEL_PLACES:"TRAVEL_PLACES",OBJECTS:"OBJECTS",SYMBOLS:"SYMBOLS",FLAGS:"FLAGS"};t.CATEGORY_MAPPING={"Smileys & People":"SMILEYS_PEOPLE","Animals & Nature":"ANIMALS_NATURE","Food & Drink":"FOOD_DRINK",Activity:"ACTIVITY","Travel & Places":"TRAVEL_PLACES",Objects:"OBJECTS",Symbols:"SYMBOLS",Flags:"FLAGS"};const r=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS"];t.ORDERED_CATEGORY_IDS=r;t.EMOJI_TYPE={APPLE:"APPLE",WHATSAPP:"WHATSAPP"};t.EMOJI_WIDTH={small:20,large:32};const i=n(76672).Mirrored(["MEDIUM","LARGE","XLARGE"]);t.LargeEmojiSize=i;const o=n(76672)({PartyEmojiLottieAnimation:"party_emoji_lottie_animation",LolEmojiLottieAnimation:"lol_emoji_lottie_animation",CryEmojiLottieAnimation:"cry_emoji_lottie_animation",SadTearEmojiLottieAnimation:"sad_tear_emoji_lottie_animation",SurprisedEmojiLottieAnimation:"surprised_emoji_lottie_animation",HeartEmojiLottieAnimation:"heart_emoji_lottie_animation",FireEmojiLottieAnimation:"fire_emoji_lottie_animation"}),a=[...r,"VARIATION"];t.CATEGORY_ORDERING=a;const s=a.indexOf("VARIATION");t.VARIATION_CATEGORY=s;const l=["","",String.fromCodePoint(129294),String.fromCodePoint(128150),String.fromCodePoint(128420),String.fromCodePoint(128154),String.fromCodePoint(128156),String.fromCodePoint(128151),String.fromCodePoint(128147),String.fromCodePoint(128153),String.fromCodePoint(129293),String.fromCodePoint(128155),String.fromCodePoint(128149),String.fromCodePoint(129505),String.fromCodePoint(10084,65039,8205,128293),String.fromCodePoint(129653),String.fromCodePoint(129654),String.fromCodePoint(129655)];t.HEART_EMOJIS=l;const u=new Map([[String.fromCodePoint(128514),`${o.LolEmojiLottieAnimation}`],[String.fromCodePoint(128546),`${o.SadTearEmojiLottieAnimation}`],[String.fromCodePoint(128557),`${o.CryEmojiLottieAnimation}`],[String.fromCodePoint(128558),`${o.SurprisedEmojiLottieAnimation}`]]);t.ANIMATED_EMOJIS_STRING_TO_LOTTIE_ASSET_MAP=u},50683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={APPLE:["e09777c","3d5eecf","c2422ea","75dd8ea","c8b1d80","3369f30","ff4610d","0680d09","2c9b91e","e70669d","0f72c4c","bee855d","0228c08","b3cd35a","f70d9a4","c81bda5","9419197","2151aaf","4260e58","cd55730","a40907f","c2ceb70","dc8695f","074da43","4902735","f407216","e85fbf1","178fb39","a5fc925","ec8c370","c7f85c5","4bd88cd","2e06b80","9bcea29","5fcdd39","814f73f","536dffa","d8df02d","fee2bc2","68510b6","8fb17b2","ac198a5","156eea4","2a0521b","a313858","7d1b6b0","9e8f53d","01ba388","228b954","1252bc7","512ee55","48f11e6","381e2bb","9e3c100","ec53ce0","64589f1","db3b2e2","ba05959","aa2a01c","7d7b9f8","411ee9f","561b2f0","b8604d6","8e6141a","a2127b0","70d0685","adab1d2","3bca8c6","5d20a72","80f085e","43c3903","b9c7878","d3211fe","e66d2d1","4c4c99f","edafaf6","27354ec","4c41f38","f95e6a8","a465fe0","a60e83c","d320123","40b1635","8ca387b","ac8ac15","0bee0ad","6a078a8","3a872f4","98195aa","080358d","6ec6edb","c2817a5","43c3ac6","11e55ff","4a8fbfe","de1ffde","c87d3ad","3bd85f8","623caa7","17bd437","f5553c8","11fa6b2","71aa591","5451b57","cfe23a5","b3bc542","d574e2c","cd50e8e","ff8882d","ccdcd6d","ad3eda4","f2bc63a","36c1397","ed496b9","ea39a18","28bdd3e","48b9894","526e544","0efc8f8","8c24de4","39c66a9","1fd9cea","6738152","295f7ce","17e6f90","cdbc26e","53b94cf","9eeaac6","dac28f8","b3b58eb","747dab0","f1086cb","2be8bca","5c4942f","f14ae33","9559518","e727a04","4b8bbdf","b61796f","46ecbed","77d852b","bb7fcb2","6ba84ba","5d4177d","516d74d","a37fec1","5114a25"],WHATSAPP:["7740b85","243d7bc","1e4fb7c","1d8ddda","e4b5d3e","2ea9137","39b7951","c3903b9","6a1dac7","916eb04","3eb1eca","9a25e67","f430377","15e4998","6c634cc","cbeed09","832e01c","b30c442","6f03b2c","f97fcda","ff00f03","d44b1b7","19f53fa","9972a8b","042c36a","d773a66","1777e45","dd93771","302e1ad","4bc3176","7eca225","5f6af18","4881318","ae99609","5dc3454","336dafe","b9549e0","761342d","fde4a6a","7dc4e52","0077a8f","400ede7","3f94243","86eaadc","2d1b7e3","0b2442b","6bc6989","a8dfa27","ace4926","a4520ae","71a3097","f65532f","a8c4c7f","e941d1c","ebcb2e4","c6a8fbf","6ef9f0d","5f506d3","23dc255","989d643","c0a6d0f","c6082f3","8f8c9d0","bc3e6e2","55d32c3","d6d2102","4faff64","20b8700","045669b","afc4ed0","42d7571","50a1f66","2b66708","42ec9d5","73226d6","9ec2730","80a3d54","876951c","9604fd5","1e5766f","4ac42d1","0444e22","5b2f075","4367e9e","172e2b5","3b7a48e","0119221","8c8a7c7","4499160","3a1ca0b","dcf803c","aab0d7d","f7f2e29","5237bfc","58b5f5f","9e78621","dd7372b","a9652cd","9b4a54e","1a0c9dc","b70504f","a9cc0bf","fc135d1","11e35a1","eab8378","c06d852","aff6de0","02003f0","5fdd82a","65cf542","671cb13","6d2de2c","fe381e8","134de90","3676388","54ac886","0b3b37b","cd3dc40","e57ec6d","c089344","e81e860","fdc279d","99ea8aa","4c311c1","1cdcc7a","8291738","33e005e","5f2e84d","33b6bf8","82e645e","5910d0c","d371991","768b1ab","80a698a","0b16a0e","8157398","cda8727","c4de026"]}},54618:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiSpritesPath=function(e,t,n,r){const o=(0,i.default)(s.default[e][t],"emojiSpriteHashes[emojiType][bucketId]");return`${u}/emoji-${t}-${n}_${o}.${r}`},t.getGlyphPath=function(e,t,n){return function(e,t){let n=null;return n=l,`${n}/${a.emojiPrefixHash}_${t.toLowerCase().slice(0,1)}_${e}`}(`${t}-${n}.png`,e)};var i=r(n(49619)),o=n(28123),a=n(9664),s=r(n(50683));const l=`${o.WEB_PUBLIC_PATH}img`,u=`${o.WEB_PUBLIC_PATH}img`},6900:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiSpritesExperimentalPath=function(e,t,n,r){return a("sprite",e,n,`${t}.${r}`)},t.getGlyphExperimentalPath=function(e,t,n){return function(e,t,n,r){const i=function(e){return Array.from(e).map((e=>e.codePointAt(0).toString(16).padStart(6,"0"))).join("_")}(e);return a("single",n,t,`${i}.${r}`)}(e,n,t,"png")};const n="https://web.whatsapp.com/emoji/v1",r=0,i=0,o=1;function a(e,t,a,s){return[n,r,i,o,e,t.toLowerCase().slice(0,1),a,s].join("/")}},39499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}},91563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebdDrop=t.UnexpectedJoinSubgroupResponse=t.UnexpectedJoinGroupViaInviteResponse=t.ServerStatusCodeError=t.Server5xxDrop=t.LogoutDrop=t.EphemeralDrop=t.E507=t.E499=t.E451=t.E404=t.E401=t.ConventionViolationDrop=t.CatalogEditServerError=t.BrowserReplacedDrop=void 0,t.attachErrorLogger=function(e,t){return e.catch((e=>{throw __LOG__(4,!0,new Error,!0)`${t}, error`,SEND_LOGS(t),e}))};var r=n(66911);class i extends((0,r.customError)("ServerStatusCodeError")){constructor(e,t){super(t),this.status=e,this.statusCode=e}}t.ServerStatusCodeError=i;class o extends((0,r.customError)("ServerStatusCodeError")){constructor(e,t,n){super(n),this.errors=t,this.status=e,this.statusCode=e}}t.CatalogEditServerError=o;class a extends((0,r.customError)("E451",!0,i)){constructor(){super(451,"commerce features disabled")}}t.E451=a;class s extends((0,r.customError)("E401",!0,i)){constructor(e){super(401,e)}}t.E401=s;class l extends((0,r.customError)("E404",!0,i)){constructor(e){super(404,e)}}t.E404=l;class u extends((0,r.customError)("E499",!0,i)){constructor(e){super(499,e)}}t.E499=u;class c extends((0,r.customError)("E507",!0,i)){constructor(e,t){super(507,e),this.backoff=Number.isNaN(t)?null:t}}t.E507=c;class d extends((0,r.customError)("WebdDrop")){}t.WebdDrop=d;class p extends((0,r.customError)("BrowserReplacedDrop",!0,d)){}t.BrowserReplacedDrop=p;class f extends((0,r.customError)("ConventionViolationDrop",!0,d)){}t.ConventionViolationDrop=f;class _ extends((0,r.customError)("Server5xxDrop",!0,d)){}t.Server5xxDrop=_;class g extends((0,r.customError)("LogoutDrop",!0,d)){}t.LogoutDrop=g;class h extends((0,r.customError)("EphemeralDrop",!0,d)){}t.EphemeralDrop=h;class A extends((0,r.customError)("UnexpectedJoinGroupViaInviteResponse")){constructor(e,t,n){super(n),this.gid=e,this.membershipApprovalMode=t}}t.UnexpectedJoinGroupViaInviteResponse=A;class m extends((0,r.customError)("UnexpectedJoinSubgroupResponse")){constructor(e,t){super(t),this.membershipApprovalMode=e}}t.UnexpectedJoinSubgroupResponse=m},58230:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t]=e.source.errors||[];switch(null==t?void 0:t.code){case 2498052:case 2498049:case 2498050:case 2498051:case 2498053:case 2498056:throw new i.ServerStatusCodeError(400,e.message);case 2498048:throw new i.E451;case 2498054:throw new i.ServerStatusCodeError(421)}};var i=n(91563);r(n(64239))},91329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateImmediately=t.Unmount=t.UnableToPlayVideoError=t.UnableToGetContentLengthError=t.TranscodeBlobTooLargeError=t.SourceUnavailableError=t.SocketNotOpen=t.SocketError=t.SocketClosed=t.ServerStatusError=t.RMRNotSupportedOnNewsletterMessagesError=t.OverconstrainedError=t.Offline=t.NotSupportedError=t.NotFoundError=t.NotAllowedError=t.ModelError=t.ModelCreateError=t.MediaUnsupportedError=t.MediaNeedsReupload=t.MediaMissing=t.MediaLoadError=t.MediaHashMismatch=t.MediaFileFailedLoad=t.MediaFileError=t.MediaFileEmpty=t.MediaEncryptionError=t.MediaDragDropError=t.MediaDecryptionError=t.InvalidServerResponseError=t.InvalidMediaFileType=t.InvalidImageFileType=t.ImageError=t.GetUserMediaError=t.GetUserMedia=t.GaveUpRetry=t.FileNotReadableError=t.EncodeWebpError=t.DecodeWebpResultsError=t.DbOnLogoutAbort=t.DbNotFoundOnTakeover=t.DbMsgEncKeyNotLoaded=t.DbEncKeyNotLoaded=t.DbClosedOnTakeover=t.DBInvalidFtsHMACKey=t.ConstraintNotSatisfiedError=t.CatalogImageDownloadError=t.CapabilityUnknown=t.CapabilityInvalid=t.CapabilityError=t.CanNotSendUnencrypted=t.BlockedByProxy=t.BingServerError=t.ActiveChatChanged=t.ActionError=void 0;var r=n(66911);class i extends((0,r.customError)("Offline")){}t.Offline=i;class o extends((0,r.customError)("GaveUpRetry")){}t.GaveUpRetry=o;class a extends((0,r.customError)("CatalogImageDownloadError")){}t.CatalogImageDownloadError=a;class s extends((0,r.customError)("MediaFileError")){}t.MediaFileError=s;class l extends((0,r.customError)("InvalidImageFileType",!0,s)){}t.InvalidImageFileType=l;class u extends((0,r.customError)("InvalidMediaFileType",!0,s)){}t.InvalidMediaFileType=u;class c extends((0,r.customError)("MediaEncryptionError",!0,s)){}t.MediaEncryptionError=c;class d extends((0,r.customError)("MediaDecryptionError",!0,s)){}t.MediaDecryptionError=d;class p extends((0,r.customError)("MediaDecryptionError",!0,s)){}t.MediaHashMismatch=p;class f extends((0,r.customError)("MediaFileFailedLoad",!0,s)){}t.MediaFileFailedLoad=f;class _ extends((0,r.customError)("MediaFileEmpty",!0,s)){}function g(e){try{return JSON.stringify(e)}catch(t){return e.toString()}}t.MediaFileEmpty=_;class h extends((0,r.customError)("SocketError")){constructor(e){super("string"==typeof e?e:g(e)),this.event=e}}t.SocketError=h;class A extends((0,r.customError)("SocketClosed")){constructor(e){super("string"==typeof e?e:g(e)),this.event=e}}t.SocketClosed=A;class m extends((0,r.customError)("SocketNotOpen")){constructor(e){super(`socket not open, is ${e}`)}}t.SocketNotOpen=m;class E extends((0,r.customError)("BlockedByProxy")){}t.BlockedByProxy=E;class y extends((0,r.customError)("ImageError")){constructor(e,t){super("Image failed to load."),this.src=e,this.status=t,this.target={src:e,status:t}}}t.ImageError=y;class S extends((0,r.customError)("DecodeWebpResultsError")){constructor(e,t){super(e),this.event=t}}t.DecodeWebpResultsError=S;class v extends((0,r.customError)("DecodeWebpError")){constructor(e,t){super(e),this.event=t}}t.EncodeWebpError=v;class I extends((0,r.customError)("ServerStatusError")){constructor(e,t,n){super(`${e||"Server replied with a failed status code"}: ${n}`),this.url=t,this.status=n}}t.ServerStatusError=I;class T extends((0,r.customError)("InvalidServerResponseError")){constructor(e,t,n){let r=`Invalid response for ${e}, with status ${t}`;n&&(r=`${r}: ${n}`),super(r)}}t.InvalidServerResponseError=T;class b extends((0,r.customError)("BingServerError",!0,I)){constructor(e,t,n){super(`Error ${t} for ${e}: ${JSON.stringify(n)}`,e,t)}}t.BingServerError=b;class M extends((0,r.customError)("MediaNeedsReupload")){}t.MediaNeedsReupload=M;class P extends((0,r.customError)("MediaMissing")){}t.MediaMissing=P,P.message="Media is no longer available on your phone";class C extends((0,r.customError)("FileNotReadableError",!0,Error)){}t.FileNotReadableError=C;class O extends((0,r.customError)("MediaLoadError")){constructor(e){super(e),this.src=e}}t.MediaLoadError=O;class R extends((0,r.customError)("TranscodeBlobTooLargeError")){constructor(){super("Transcode blob too large")}}t.TranscodeBlobTooLargeError=R;class N extends((0,r.customError)("UnableToPlayVideoError")){constructor(e){super(`Unable to play video. Reason: ${String(e)}`)}}t.UnableToPlayVideoError=N;class w extends((0,r.customError)("MediaDragDropError",!0,O)){}t.MediaDragDropError=w;class D extends((0,r.customError)("MediaUnsupportedError")){}t.MediaUnsupportedError=D,D.message="Media format is unsupported";class L extends((0,r.customError)("ModelError")){}t.ModelError=L;class B extends((0,r.customError)("ModelCreateError")){constructor(e,t){super(e),this.model=t}}t.ModelCreateError=B;class k extends((0,r.customError)("DbEncKeyNotLoadedError")){constructor(e){super(`MasterDatabaseEncryptionKey.${e} was accessed before init`)}}t.DbEncKeyNotLoaded=k;class G extends((0,r.customError)("DbMsgEncKeyNotLoadedError")){constructor(e){super(`MasterDatabaseMessageEncryptionKey.${e} was accessed before init`)}}t.DbMsgEncKeyNotLoaded=G;class U extends((0,r.customError)("DbOnLogoutAbortError")){}t.DbOnLogoutAbort=U,U.message="DB operation was dropped due to logout activity";class x extends((0,r.customError)("DbClosedOnTakeover")){}t.DbClosedOnTakeover=x,x.message="DB operation was dropped due to session takeover (DB closed)";class F extends((0,r.customError)("DbNotFoundOnTakeover")){}t.DbNotFoundOnTakeover=F,F.message="DB operation was dropped due to session takeover (DB not found)";class K extends((0,r.customError)("DBExpiredFtsHMACKey")){}t.DBInvalidFtsHMACKey=K,K.message="MasterDatabaseEncryptionKey.fts_hmac_keys is in an invalid state";class Y extends((0,r.customError)("UpdateImmediately")){}t.UpdateImmediately=Y;class j extends((0,r.customError)("CapabilityError")){}t.CapabilityError=j;class V extends((0,r.customError)("CapabilityInvalid",!0,j)){}t.CapabilityInvalid=V;class W extends((0,r.customError)("CapabilityUnknown",!0,j)){}t.CapabilityUnknown=W;class H extends((0,r.customError)("CanNotSendUnencrypted")){}t.CanNotSendUnencrypted=H;class Q extends((0,r.customError)("ActionError")){}t.ActionError=Q,Q.message="Could not perform action.";class $ extends((0,r.customError)("Unmount")){}t.Unmount=$;class q extends((0,r.customError)("ActiveChatChanged")){}t.ActiveChatChanged=q;class J extends((0,r.customError)("GetUserMediaError")){}t.GetUserMediaError=J;class z extends((0,r.customError)("NotSupportedError",!0,J)){}t.NotSupportedError=z,z.message="The operation is not supported.";class X extends((0,r.customError)("NotAllowedError",!0,J)){}t.NotAllowedError=X,X.message="The user did not grant permission for the operation";class Z extends((0,r.customError)("RMRNotSupportedOnNewsletterMessagesError")){constructor(e){super(`RMR attempted on a newsletter message of media type ${e}, newsletter messages do not support media reupload requests`),this.mediaType=e}}t.RMRNotSupportedOnNewsletterMessagesError=Z;class ee extends((0,r.customError)("ConstraintNotSatisfiedError",!0,J)){}t.ConstraintNotSatisfiedError=ee,ee.message="One of the mandatory Constraints could not be satisfied.";class te extends((0,r.customError)("OverconstrainedError",!0,J)){}t.OverconstrainedError=te,te.message="Due to changes in the environment, one or more mandatory constraints can no longer be satisfied.";class ne extends((0,r.customError)("NotFoundError",!0,J)){}t.NotFoundError=ne,ne.message="The object can not be found here.";class re extends((0,r.customError)("SourceUnavailableError",!0,J)){}t.SourceUnavailableError=re,re.message="The source of the MediaStream could not be accessed due to a hardware error (e.g. lock from another process).";class ie extends((0,r.customError)("UnableToGetContentLengthError")){}t.UnableToGetContentLengthError=ie,ie.message="Failed to get media contentLength from mms";const oe={GetUserMediaError:J,NotSupportedError:z,NotAllowedError:X,ConstraintNotSatisfiedError:ee,OverconstrainedError:te,NotFoundError:ne,SourceUnavailableError:re};t.GetUserMedia=oe},22748:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeError=s,t.normalizeStack=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{name:n,message:r,stack:i}=s(e),a=i.indexOf("\n"),l=i.slice(0,a),u=l.match(new RegExp(`(${(0,o.default)(n)}|Error)(:|$)`));if(null!=u){if(!t)return i;const e=u.index+u[0].length,n=null==r?-1:i.indexOf(r,e),o=null==r||-1===n?-1:n+r.length,s=Math.max(0,a,e,o);return i.slice(s).replace(/^\n+/,"")}if(t)return i;const c=""===i?"":`\n${i}`;return r?`${n}: ${r}${c}`:`${n}${c}`};var i=r(n(81109)),o=r(n(3522)),a=r(n(8450));function s(e){const t="object"==typeof e&&"string"==typeof(null==e?void 0:e.name)?e.name:`Thrown${(0,a.default)(typeof e)}Error`;let n,r;if(n=null!=e&&"string"==typeof e.message?e.message:void 0===e?"":String(e),null!=e&&"string"==typeof e.stack)r=e.stack;else{const e=new Error;e.name=t,e.message=n,r="string"==typeof e.stack?e.stack:""}const o="object"==typeof e?(0,i.default)({},e):null;return(0,i.default)((0,i.default)({},o),{},{name:t,message:n,stack:r})}},7880:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(73955)),o=r(n(41609)),a=r(n(51463)),s=r(n(89482));const l=/\s+/;t.default=class{on(e,t,n){if(!t)return this;if("function"!=typeof t)throw(0,s.default)("Callback parameter passed is not a function");return this._multiEvent(this.on,...arguments)||this._getOrCreateEvents(e).push({callback:t,context:n,ctx:null!=n?n:this}),this}once(e,t,n){if(!t)return this;if(this._multiEvent(this.once,...arguments))return this;const r=this,i=(0,a.default)((function(){r.off(e,i),t.apply(this,arguments)}));return i._callback=t,this.on(e,i,n)}off(e,t,n){const r=this._events;if(!r)return this;if(this._multiEvent(this.off,...arguments))return this;if(!e&&null==t&&null==n)return this._events=void 0,this;const i=e?[e]:Object.keys(r);for(let e=0;e<i.length;e++){const o=i[e],a=r[o];if(a){if(r[o]=[],null!=t||null!=n)for(let e=0;e<a.length;e++){const i=a[e];(t&&t!==i.callback&&t!==i.callback._callback||null!=n&&i.context!==n)&&r[o].push(i)}r[o].length||delete r[o]}}return this}trigger(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!this._events)return this;if(this._multiEvent(this.trigger,...arguments))return this;const i=this._getEvents(e),o=this._getEvents("all");return i&&this._triggerEvents(i,n),o&&this._triggerEvents(o,arguments),this}stopListening(e,t,n){const r=this._listeningTo;if(!r)return this;const i=null==e?void 0:e._listenId,a=i?{[i]:e}:r;for(const e in a){const i=a[e];i.off(t,n,this),(!t&&!n||(0,o.default)(i._events))&&delete r[e]}return(0,o.default)(this._listeningTo)&&delete this._listeningTo,this}listenTo(e,t,n){return n?(this._addListeningTo(e),e.on(t,n,this),this):this}listenToOnce(e,t,n){return this._addListeningTo(e),e.once(t,n,this),this}listenToAndRun(e,t,n){return this.listenTo.apply(this,arguments),n.apply(this),this}isListening(e){const t=this._events;return!!t&&("string"==typeof e?!!t[e]:(0,o.default)(t))}_addListeningTo(e){(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=(0,i.default)("l"))]=e}_getOrCreateEvents(e){const t=this._events||(this._events={});return t[e]||(t[e]=[])}_getEvents(e){if(!e)return;const t=this._events;return t?t[e]:void 0}_multiEvent(e,t){if(l.test(t)){const o=t.split(l);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(let t=0;t<o.length;t++)e.call(this,o[t],...r);return!0}return!1}_triggerEvents(e,t){let n,r=-1;const i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}}bind(){return this.on(...arguments)}unbind(){return this.off(...arguments)}removeListener(){return this.off(...arguments)}removeAllListeners(){return this.off()}emit(){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return this.trigger(arguments)}}},15640:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0,i=arguments.length>3?arguments[3]:void 0;if(null==i?void 0:i.aborted)return Promise.reject(new r.AbortError);return new Promise((function(o,a){const s=function(){var e;n.apply(this,arguments)&&(null===(e=u)||void 0===e||e(),o(arguments))},l=()=>{var e;null===(e=u)||void 0===e||e(),a(new r.AbortError)};let u=()=>{e.off(t,s),null==i||i.removeEventListener("abort",l),u=null};null==i||i.addEventListener("abort",l),e.on(t,s)}))};var r=n(2560)},74700:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initWaitForOfflineDeliveryEnd=function(){if(s)return;s=(0,o.default)(i.Cmd,"offline_delivery_end"),i.Cmd.on("offline_delivery_start",(()=>{s=(0,o.default)(i.Cmd,"offline_delivery_end")}))},t.waitForOfflineDeliveryEnd=function(){if(i.Cmd.isOfflineDeliveryEnd)return Promise.resolve();if(!s)return Promise.reject((0,a.default)("waitForOfflineDeliveryEnd called before init"));return s};var i=n(46316),o=r(n(15640)),a=r(n(89482));let s},43926:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initWaitForOfflineProcessReady=function(){if(s)return;s=(0,o.default)(i.Cmd,"offline_process_ready")},t.waitForOfflineProcessReady=function(){if(!s)return Promise.reject((0,a.default)("waitForOfflineProcessReady called before init"));return s};var i=n(46316),o=r(n(15640)),a=r(n(89482));let s},12256:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initOfflineResumeWaitForEvents=function(){(0,i.initWaitForOfflineProcessReady)(),(0,r.initWaitForOfflineDeliveryEnd)()};var r=n(74700),i=n(43926)},49499:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(77689),o=r(n(7880)),a=n(16342),s=r(n(93948)),l=r(n(19194)),u=n(88745);const c="Modernizr"in window,d=(0,a.getModernizr)();class p extends o.default{constructor(){super(),this.supported=c?d.serviceworker:"serviceWorker"in navigator,this._checkAlive=()=>{var e;const t=null===(e=navigator.serviceWorker)||void 0===e?void 0:e.controller;return Boolean(t)},this._checkStreamingSupport=()=>{var e;if(!this.supported||!this.alive||u.UA.isSafari)return void(this._streamingSupported=!1);if(this._streamingSupportedPromise)return this._streamingSupported;const t=null===(e=navigator.serviceWorker)||void 0===e?void 0:e.controller;t&&(this._streamingSupportedPromise=(0,i.promiseTimeout)(s.default.request(t,l.default.STREAMING_SUPPORTED),100).catch((()=>!1)).then((e=>(delete this._streamingSupportedPromise,this.streamingSupported=e,e))))},this._setSupported=e=>{this.supported=e},c&&d.on("serviceworker",this._setSupported);const e=this;Object.defineProperty(this,"streamingSupported",{get:()=>(e._checkStreamingSupport(),e._streamingSupported),set(t){t!==e._streamingSupported&&e.trigger("change:streamingSupported",t),e._streamingSupported=t}}),Object.defineProperty(this,"alive",{get:()=>e._checkAlive()})}}var f=new p;t.default=f},16342:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModernizr=function(){return self.Modernizr}},88745:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UA=t.OS_TYPE=t.BROWSER_TYPE=void 0,t.gteVersion=a,t.parseUA=l;var i=r(n(42238));t.BROWSER_TYPE={CHROME:"chrome",CHROMIUM:"chromium",FIREFOX:"firefox",SAFARI:"safari",IE:"ie",OPERA:"opera",EDGE:"edge"};function o(e,t){let n,r;const i=/(\.0)+[^\.]*$/,o=(e+"").replace(i,"").split("."),a=(t+"").replace(i,"").split("."),s=Math.min(o.length,a.length);for(n=0;n<s;n++)if(r=parseInt(o[n],10)-parseInt(a[n],10),0!==r)return r;return o.length-a.length}function a(e,t){return o(e,t)>=0}function s(e,t){return o(e,t)<0}function l(e){const t=new i.default;t.setUA(e||"");const n=(t.getBrowser().name||"").toUpperCase(),r=t.getBrowser().version||"0.0.0",o=(t.getEngine().name||"").toUpperCase(),l=(t.getOS().name||"").toUpperCase(),u=t.getOS().version||"0.0.0",c="SAFARI"===n,d="CHROME"===n,p="GECKO"===o,f="BLINK"===o,_=!d&&!c&&`${n}`.includes("OCULUS");let g=!1;switch(l){case"MAC OS":d?g=a(u,"10.10")&&a(r,"41.0.0"):a(u,"10.7")&&(g=!0);break;case"WINDOWS":a(u,"8.1")&&(p||d&&a(r,"41.0.0"))&&(g=!0)}const h=d&&a(r,"110.0.0"),A=c||d&&s(r,"76");return{isWebkit:!o||"WEBKIT"===o,isGecko:p,isTrident:"TRIDENT"===o||"EDGEHTML"===o,isSafari:c,isElectron:false,isBlink:f,isBuggyVideoLoad:d&&a(r,"76")||f&&!d,hasEmoji:g,troublesWithLotsOfVideos:d,supportsEmojiEllipsification:!A,isBrokenGetUserMedia:d&&s(r,"50"),isLocalStorageBroken:c&&a(r,"14.1")&&s(r,"14.1.2"),os:l.toLowerCase(),osVersion:u,browser:n.toLowerCase(),browserVersion:r,parser:t,isChrome:d,isOculusBroswer:_,hasCredentiallessIframeSupport:h}}t.OS_TYPE={WINDOWS:"windows",MAC:"mac os",CHROMEOS:"chromium os"};const u=l("undefined"!=typeof self?self.navigator.userAgent:null);t.UA=u},36236:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.JS_HALT_EVENT=t.CLOCK_CHANGE_BACKWARDS_EVENT=t.BaseJsHaltDetector=void 0;var i=r(n(7880));const o="js_halt";t.JS_HALT_EVENT=o;const a="clock_change_backwards";t.CLOCK_CHANGE_BACKWARDS_EVENT=a;class s extends i.default{constructor(e,t){super(),this._interval=e,this._threshold=t}startDetection(){if(this._intervalId)return;let e=Date.now();this._intervalId=self.setInterval((()=>{const t=Date.now(),n=t-e-this._interval;n>this._threshold?this.trigger(o,n):n<-this._threshold&&this.trigger(a,n),e=t}),this._interval),__LOG__(2)`JsHaltDetector:detection started`}stopDetection(){this._intervalId&&(self.clearInterval(this._intervalId),this._intervalId=null,__LOG__(2)`JsHaltDetector:detection stopped`)}restartDetection(){this.stopDetection(),this.startDetection(),__LOG__(2)`JsHaltDetector:detection restarted`}}t.BaseJsHaltDetector=s},33442:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsHaltDetector=t.DEFAULT_THRESHOLD=t.DEFAULT_INTERVAL=void 0;var r=n(36236);t.DEFAULT_THRESHOLD=3e3;t.DEFAULT_INTERVAL=1e4;const i=new r.BaseJsHaltDetector(1e4,3e3);t.jsHaltDetector=i,i.startDetection()},3450:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USER_REPORT=t.SERVER_REQUESTED=t.MANUAL_UPLOAD=t.LogType=void 0,t.registerCrashlogUploadInformationalLoggingFunction=function(e){v=e},t.registerCrashlogUploadIsUserInExternalBetaFunction=function(e){I=e},t.reset=function(){D.cancel(),C.clear()},t.sendLogs=function(){return K.apply(this,arguments)},t.upload=L;var i=r(n(48926)),o=r(n(23493)),a=r(n(45647)),s=n(28123),l=n(96298),u=n(26254),c=n(44346),d=r(n(91262)),p=n(7184),f=n(93724),_=n(74843),g=n(67553),h=n(95160),A=r(n(32890)),m=n(3885),E=n(44485),y=r(n(89482));const S=e=>new Promise((t=>self.setTimeout(t,e)));let v,I;const T=n(76672)({CRASHLOG:"crashlog",SUPPORT:"support"});t.LogType=T;const b="server-requested";t.SERVER_REQUESTED=b;t.MANUAL_UPLOAD="manual-upload";t.USER_REPORT="user-report";const M={electron_native:E.PS_CRASH_TYPE.NATIVE_CRASH,uncaught_error:E.PS_CRASH_TYPE.UNHANDLED_EXCEPTION,unhandled_promise:E.PS_CRASH_TYPE.UNHANDLED_EXCEPTION,sad:E.PS_CRASH_TYPE.CRITICAL_EVENT,logout:E.PS_CRASH_TYPE.APP_CRASH},P=n(76672)({ONLY_EXCEPTION:"only_exception"}),C=new Map,O={shouldHitCheckEndpoint:()=>!1,expectedCodes:[],appendToFormDataForCheck:()=>{},appendToFormDataForUpload:()=>{},shouldUseLightWeightLogs:()=>!1},R={shouldHitCheckEndpoint:()=>!0,expectedCodes:[200,403],appendToFormDataForCheck:(e,t)=>{e.append("reason",t)},appendToFormDataForUpload:()=>{},shouldUseLightWeightLogs:()=>!1},N={shouldHitCheckEndpoint:()=>!0,expectedCodes:[200,403],appendToFormDataForCheck:(e,t)=>{e.append("support_exception_only_upload","true"),e.append("reason",t)},appendToFormDataForUpload:(e,t)=>{t&&t.upload===P.ONLY_EXCEPTION&&e.append("exception_only_upload","true")},shouldUseLightWeightLogs:e=>!!e&&e.upload===P.ONLY_EXCEPTION};function w(e,t,n){return n?O:t?N:R}const D=(0,o.default)(k,72e5,{trailing:!1});function L(){return B.apply(this,arguments)}function B(){return(B=(0,i.default)((function*(e){let{reason:t="reason-unspecified",immediate:n=!1,logType:r=T.CRASHLOG,isHighPri:i=!1,nativeCrash:o,voipLog:s,hasTaggedMessage:u=!1,ticketId:d,clientSamplingRate:p=1,tags:f=[],fromTimestamp:_}=e;if(a.default.isLogoutInProgress)return Promise.resolve();let A=o?f.concat("electron_native"):f;if(I&&(yield I())&&(A=A.concat("web-joined-beta")),(0,h.isWorker)()&&(A=A.concat("service-worker")),p>0&&p<1&&(A=A.concat(["sampled",p.toString()])),C.size<=100){const e=C.get(t);e?e.count++:C.set(t,{count:1,uploaded:!1})}try{var m,E;const e=new c.CrashLogWamEvent;e.crashReason=t;const n=A.find((e=>M[e]));null!=n&&(e.crashType=M[n]),A.length&&(e.crashContext=A.join(",")),e.crashCount=null!==(m=null===(E=C.get(t))||void 0===E?void 0:E.count)&&void 0!==m?m:0,e.commitAndWaitForFlush().catch((e=>{__LOG__(2)`wa:uploadLogs error during wam commit: ${e}`}))}catch(e){__LOG__(2)`wa:uploadLogs error logging wam event: ${e}`}if((0,g.isWaitingForUpload)())return Promise.resolve();if((0,g.setWaitingForUpload)(!0),(0,g.passesSampling)(p)){let e=k;if(!i){const n=C.get(t);if(null==n?void 0:n.uploaded)return __LOG__(2)`wa:uploadLogs reason already uploaded, skipping`,void(0,g.setWaitingForUpload)(!1);n&&(n.uploaded=!0),C.size>l.UNIQUE_UPLOADS_ALLOWED_BEFORE_THROTTLE&&(__LOG__(2)`wa:uploadLogs using throttle`,e=D)}const a=w(0,u,t===b);try{const l=yield e({isHighPri:i,immediate:n,logType:r,nativeCrash:o,voipLog:s,ticketId:d,uploadStrategy:a,tags:A,reason:t,hasTaggedMessage:u,fromTimestamp:_});return(0,g.setWaitingForUpload)(!1),l}catch(e){(0,g.setWaitingForUpload)(!1),__LOG__(2)`wa:uploadLogs error uploading: ${e}`}}else(0,g.setWaitingForUpload)(!1),__LOG__(2)`Crashlog:upload client sampling check w/rate: ${p} prevented upload`}))).apply(this,arguments)}function k(){return G.apply(this,arguments)}function G(){return(G=(0,i.default)((function*(e){var t,n;let{isHighPri:r=!1,immediate:i,logType:o,nativeCrash:a,voipLog:c,ticketId:d,uploadStrategy:p,tags:g=[],reason:h="reason-unspecified",hasTaggedMessage:A=!1,fromTimestamp:m}=e;const E=v?v():{platform:void 0,ref:void 0};let I;if(__LOG__(2)`==================================================`,__LOG__(2)`wa:uploadLogs ref: ${null!==(t=E.ref)&&void 0!==t?t:"no conn"}`,__LOG__(2)`wa:uploadLogs hash: ${s.HASH_PLACEHOLDER}`,__LOG__(2)`wa:uploadLogs version: ${s.VERSION_BASE}`,__LOG__(2)`wa:uploadLogs userAgent: ${navigator.userAgent}`,__LOG__(2)`wa:uploadLogs platform: ${null!==(n=E.platform)&&void 0!==n?n:"no platform"}`,__LOG__(2)`wa:uploadLogs webPlatform: ${s.FLB_PLATFORM||"web"}`,__LOG__(2)`wa:uploadLogs appId: ${s.FB_APP_ID}`,__LOG__(2)`wa:uploadLogs url: ${location.href}`,__LOG__(2)`wa:uploadLogs distribution: ${(0,u.getDistribution)()}`,__LOG__(2)`wa:uploadLogs buildId: ${s.BUILD_ID||"0"}`,A&&__LOG__(2)`wa:uploadLogs hasTaggedMessage`,__LOG__(2)`reason for logs: ${h}`,__LOG__(2)`${_.END_OF_UPLOAD}`,yield S(i?0:1e3),p.shouldHitCheckEndpoint()){const e=U({isHighPri:r});if(p.appendToFormDataForCheck(e,h),I=yield self.fetch(x(o),{method:"POST",body:e}),!p.expectedCodes.includes(I.status))return void __LOG__(2)`Crashlog:doUpload code of ${I.status} from ${l.CLB_CHECK_URL} was unexpected, expected values are: ${p.expectedCodes.toString()}`;if(403===I.status)return void __LOG__(2)`Crashlog:doUpload aborting crashlog upload due to 403 check response`}else __LOG__(2)`Crashlog:doUpload skipping sampling check`;let T=null;if(I)try{var M,P;if(T=JSON.parse(yield I.text()),null!=(null===(M=T)||void 0===M||null===(P=M.config)||void 0===P?void 0:P.sampling)&&(0===T.config.sampling||Math.random()*T.config.sampling>1))return void __LOG__(2)`Crashlog:doUpload server configured sampling check w/rate: ${T.config.sampling} prevented upload`}catch(e){__LOG__(2)`Crashlog:failed to parse response from upload check ${String(e)}, will perform default upload`}const C=U({isHighPri:r});p.appendToFormDataForUpload(C,T);const O=(yield f.Logger.getLogs(p.shouldUseLightWeightLogs(T),h===b?0:m)).join("\n"),R=new Blob([O],{type:"text/plain"});C.append("file",R,"logs.txt"),g.length&&C.append("tags",g.join(",")),d&&C.append("ticket_id",d),a&&(C.append("attachment",new Blob([a.contents],{type:"application/octet-stream"}),a.filename),C.set("agent",a.agent),c&&C.append("voip_log",new Blob([c.contents],{type:"text/plain"}),c.filename));const N=F(o),w=yield self.fetch(N,{method:"POST",body:C});if(200!==w.status)throw(0,y.default)(`Status code of ${w.status} from ${N} was unexpected, expected 200`);return w.headers.get("X-Uploaded-File-Id")}))).apply(this,arguments)}function U(e){let{isHighPri:t}=e;const r=new FormData;t&&r.append("forced","true");const i=(0,h.isWorker)()&&!(0,p.areGlobalsReady)()?void 0:(0,m.getMe)();i&&r.append("from_jid",i.toString());const o=(0,d.default)(n(85003)).info(),a=(0,u.getLogUserAgent)({device:o.os,browser:o.ua,appVersion:s.VERSION_BASE});return r.append("agent",a),r.append("app_id",s.FB_APP_ID),r.append("build_id",s.BUILD_ID),r}function x(e){return A.default.build(l.CLB_CHECK_URL,{type:String(e),access_token:l.CLB_TOKEN})}function F(e){return A.default.build(l.CLB_URL,{type:String(e),access_token:l.CLB_TOKEN})}function K(){return(K=(0,i.default)((function*(e,t){if(!f.Logger.isTakeOver)try{for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];yield L({reason:e,hasTaggedMessage:!0,clientSamplingRate:null!=t?t:1,tags:r})}catch(e){__LOG__(4,void 0,new Error)`Crash log sendLogs failed, ${e}`}}))).apply(this,arguments)}},96298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNIQUE_UPLOADS_ALLOWED_BEFORE_THROTTLE=t.TICKET_URL=t.CLB_URL=t.CLB_TOKEN=t.CLB_CHECK_URL=void 0;var r=n(28123);t.CLB_CHECK_URL="https://crashlogs.whatsapp.net/wa_fls_upload_check";t.CLB_TOKEN="1063127757113399|745146ffa34413f9dbb5469f5370b7af";t.CLB_URL="https://crashlogs.whatsapp.net/wa_clb_data";const i=`${r.DYN_ORIGIN}web-contact-us`;t.TICKET_URL=i;t.UNIQUE_UPLOADS_ALLOWED_BEFORE_THROTTLE=0},41054:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:String,o=(0,i.default)(e,t.map(r)).join("");const a=n?4e3:Number.POSITIVE_INFINITY;o.length>a&&(o=o.slice(0,a/2)+`\n\n[${o.length-a} truncated]\n\n`+o.slice(-a/2));return o};var i=r(n(77791))},93724:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.STACK_TRACE_TAG=t.LoggerImpl=t.Logger=t.LOG_CAPACITY_IN_DATABASE=void 0;var i=r(n(48926)),o=n(17075),a=r(n(36432)),s=n(78494),l=r(n(19546)),u=r(n(91262)),c=r(n(41054)),d=n(74843),p=n(67553),f=n(22748),_=r(n(89482));t.STACK_TRACE_TAG="trace";(0,o.initTagsLogger)();t.LOG_CAPACITY_IN_DATABASE=5e3;const g="LTSXOo+_*-=.<^!#?".split("");function h(){return g[Math.round(Math.random()*(g.length-1))]}const A=h()+h()+h()+h(),m={};m[m.ALL=0]="all",m[m.INFO=1]="info",m[m.LOG=2]="log",m[m.WARN=3]="warn",m[m.ERROR=4]="error",m[m.OFF=5]="off";class E{constructor(e,t){var n=this;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.localCursor=0,this.writeFrom=0,this.pending=void 0,this.timer=new s.ShiftTimer((()=>this._persistIdb())),this.runningTimestamp=0,this.isTakeOver=!1,this.log=(0,a.default)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];const d=(0,c.default)(a,l,!t);return n.logImpl(e,d,r,i,o),d}}),((e,t,n,r,i)=>n||i?null:String(e)+String(Boolean(t))+String(Boolean(r)))),this.logsDBProvider=e,this.logCapacityInDatabase=t,this.logs=new Array(t),this.microStep=1/this.logCapacityInDatabase,this.processTag=r}logImpl(e,t,n,r,i){const o=Date.now(),a=(0,l.default)(o).locale("en").format("YYYY-MM-DD HH:mm:ss.SSS:");let s="";n&&(s=`\n${(0,f.normalizeStack)(n,!0)}`);const u=[y(e),r&&!(0,p.isWaitingForUpload)()?"sendlogs":null,...null!=i?i:[],this.processTag].filter(Boolean).map((e=>`[${e}]`)).join(""),c=`${A} ${a}`+(u?`${u} `:"")+t+s;this.logs[this.localCursor]={m:c,t:o},this.localCursor=(this.localCursor+1)%this.logCapacityInDatabase,null!=this.logs[this.localCursor]&&(this.writeFrom=this.localCursor),this.isTakeOver||this.timer.debounceAndCap(250,1e3)}_persistIdb(){var e=this;this.pending||null==this.logs[this.writeFrom]||this.isTakeOver||(this.pending=this.logsDBProvider().then((t=>t.transaction("rw",t.logs,(0,i.default)((function*(){var n;let r=yield t.logs.orderBy("count").last();r||(r=yield t.logs.orderBy("timestamp").last());let i=r?r.line+1:0,o=(null===(n=r)||void 0===n?void 0:n.count)?r.count+1:i;for(;null!=e.logs[e.writeFrom];){const n=e.logs[e.writeFrom];e.logs[e.writeFrom]=void 0,e.writeFrom=(e.writeFrom+1)%e.logCapacityInDatabase,e.runningTimestamp=n.t<=e.runningTimestamp?e.runningTimestamp+e.microStep:n.t,t.logs.put({line:i++%e.logCapacityInDatabase,log:n.m,timestamp:e.runningTimestamp,count:o++})}}))))).then((()=>{null!=this.logs[this.writeFrom]&&this.timer.debounceAndCap(250,1e3)})).catch((()=>{})).finally((()=>{this.pending=void 0})))}getLogs(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now()-6048e5;const n=[];return this.pending&&n.push(this.pending),this.timer.isScheduled()&&(this.timer.forceRunNow(),this.pending&&n.push(this.pending)),Promise.all(n).then((()=>this.logsDBProvider())).then((n=>(0,d.getTimeboxedAndTrimmedLogs)(n,t,e))).then((e=>e.map((e=>e.log)))).catch((()=>this.logs.filter(Boolean).map((e=>e.m))))}clearLogs(){return this.logsDBProvider().then(function(){var e=(0,i.default)((function*(e){yield e.logs.clear()}));return function(){return e.apply(this,arguments)}}()).catch((()=>{})).finally((()=>{this.localCursor=0,this.writeFrom=0,this.logs=new Array(this.logCapacityInDatabase)}))}logUncaughtError(e,t){const n=e instanceof Error&&e.stack?e:void 0;let r;if(r=n?String(e):t?`unhandled-rejection: ${String(e)}`:`Error: ${String(e)}`,this.logImpl(m.ERROR,r,n,!0,["uncaught"]),null!=t){const e=String(t);this.logImpl(m.WARN,e)}return r}onTakeOver(){this.isTakeOver=!0}registerErrorNotificationListener(e){this._errorNotificationCallback=e}}function y(e){switch(e){case m.INFO:case m.LOG:case m.WARN:case m.ERROR:return m[e];default:throw(0,_.default)(`Unexpected numeric log level: ${e}`)}}t.LoggerImpl=E;const S=new E((()=>(0,u.default)(n(62419)).idb()),5e3);t.Logger=S;const v=S.log;t.log=v},74843:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TRIM_LENGTH=t.END_OF_UPLOAD=void 0,t.getTimeboxedAndTrimmedLogs=function(){return a.apply(this,arguments)};var i=r(n(48926));const o="==================================================EOU";t.END_OF_UPLOAD=o;function a(){return(a=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];if(n){const n=yield e.logs.orderBy("timestamp").filter((e=>e.timestamp>=t)).reverse().until((e=>e.log.includes("[sendlogs]")),!0).toArray();for(let e=n.length-1;e>=0&&(s(n[e],r),!n[e].log.includes(o));e--);}else yield e.logs.orderBy("timestamp").filter((e=>e.timestamp>=t)).each((e=>{s(e,r)}));return r}))).apply(this,arguments)}function s(e,t){e.log=e.log.slice(0,2500),t.push(e)}t.TRIM_LENGTH=2500},67553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWaitingForUpload=function(){return n},t.passesSampling=function(e){if(e<=0)return!1;if(e>=1)return!0;return Math.random()<e},t.setWaitingForUpload=function(e){n=e};let n=!1},26254:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDistribution=function(){let e="unknown";return e="prod","web_prod"},t.getLogUserAgent=function(e){let t,{appVersion:n,browser:r,device:i}=e;return t="Web/"+r,`WhatsApp/${n} ${t} Device/${i}`};r(n(91262)),r(n(89482))},26086:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FILETYPE=void 0,t.blobToArrayBuffer=c,t.blobToText=function(){return f.apply(this,arguments)},t.createFile=function(e,t,n){const r=new Blob(e,n||{});return r.name=t,r},t.getAudioDuration=function(e){let t,n;return new Promise(((r,i)=>{t=document.createElement("audio"),t.addEventListener("loadeddata",r),t.addEventListener("error",(()=>{i((0,s.default)("getAudioDuration: error loading audio"))})),t.src=n=URL.createObjectURL(e)})).then((()=>~~t.seekable.end(0))).finally((()=>{n&&URL.revokeObjectURL(n)}))},t.getFileExtension=p,t.getMimeTypeForFilepath=function(e){const t=p(e),n=(0,o.isAllowedDocumentMimetype)(o.EXT_TO_MIME&&t&&o.EXT_TO_MIME[t],e,!1);if(n)return n},t.removeTrailingDots=d,t.typeFromMimetype=function(e){const t=e.split("/")[0];switch(t){case l.IMAGE:case l.VIDEO:case l.AUDIO:return t;default:return l.DOCUMENT}},t.validateBlob=function(e){return c(e.webkitSlice?e.webkitSlice(0,1):e.slice(0,1)).then((e=>1===e.byteLength)).catch((()=>!1))};var i=r(n(48926)),o=n(35677),a=n(91329),s=r(n(89482));const l=Object.freeze({IMAGE:"image",VIDEO:"video",AUDIO:"audio",DOCUMENT:"document",STICKER:"sticker"});t.FILETYPE=l;const u=e=>{var t;return null!==(t=null==e?void 0:e.message)&&void 0!==t?t:""};function c(e){let t;return new Promise(((n,r)=>{t=new FileReader,t.onload=n,t.onerror=()=>{var e;r("NotReadableError"===(null===(e=t.error)||void 0===e?void 0:e.name)?new a.FileNotReadableError(`blobToArrayBuffer error: ${u(t.error)}`):(0,s.default)(`blobToArrayBuffer error: ${u(t.error)}`))},t.onabort=()=>{r((0,s.default)(`blobToArrayBuffer abort: ${u(t.error)}`))},t.readAsArrayBuffer(e)})).then((()=>t.result))}function d(e){return e.replace(/\.+$/,"")}function p(e){const t=d(e.trimRight()).split(".");return t.length>1?t[t.length-1].toLowerCase():null}function f(){return(f=(0,i.default)((function*(e){if("function"==typeof e.text)return e.text();const t=new FileReader;if(yield new Promise(((n,r)=>{t.onload=n,t.onerror=e=>{r((0,s.default)(`blobToText error: ${String(e)}`))},t.onabort=e=>{r((0,s.default)(`blobToText abort: ${String(e)}`))},t.readAsText(e)})),t.result instanceof ArrayBuffer)throw new TypeError("blobToText error: Invalid result type: ArrayBuffer");if(null==t.result)throw new TypeError("blobToText: Invalid result type: null");return t.result}))).apply(this,arguments)}},85003:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23279)),o=n(62089),a=n(29987),s=n(88745);let l=!1;const u=(0,i.default)((()=>l=!1),500);function c(){const e=new Uint8Array(16);return self.crypto.getRandomValues(e),(0,o.encodeB64)(e)}var d={id(){const e=n(97023);let t=e.getBrowserId();return t||(t=c(),e.setBrowserId(t),t)},persistentExpiringId(){const e=n(97023),t=e.getPersistentExpiringId();if(null!=t){if(!((0,a.unixTime)()-t.ts>=7776e3))return t.value}const r={ts:(0,a.unixTime)(),value:c()};return e.setPersistentExpiringId(r),r.value},info(){const e=function(){const e=s.UA.parser.getResult();if(null!=e&&"Chrome"===e.browser.name){var t,n;const r=null===(t=self.navigator)||void 0===t||null===(n=t.userAgentData)||void 0===n?void 0:n.brands;if(null!=r){r.some((e=>"Microsoft Edge"===e.brand))&&(e.browser.name="Edge")}}return e}();return{os:e.os.name,version:e.os.version,name:e.browser.name,ua:e.browser.name+" "+e.browser.version}},hardRefresh(){this.promptUnloadGuards++,location.reload(!1)},startDownloading(){l=!0,u()},clearDownloading(){l=!1},isDownloading:()=>l,promptUnloadGuards:0,open(e){window.open(e,"_blank","noopener,noreferrer")}};t.default=d},30304:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.phashV1=function(){return l.apply(this,arguments)},t.phashV2=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(15720),s=n(51017);function l(){return(l=(0,i.default)((function*(e){const t=e.map((e=>(0,s.toUserWid)(e).toString({legacy:!0}))).sort().join(""),n=[];for(let e=0;e<t.length;e++)n.push(t.charCodeAt(e));const r=new Uint8Array(n),i=yield self.crypto.subtle.digest({name:"SHA-1"},r);return`1:${(0,o.encodeB64)(i.slice(0,6))}`}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e){const t=e.map((e=>e.toString({legacy:!0,formatFull:!0}))).sort().join(""),n=[];for(let e=0;e<t.length;e++)n.push(t.charCodeAt(e));const r=new Uint8Array(n),i=yield(0,a.sha256)(r);return`2:${(0,o.encodeB64)(i.slice(0,6))}`}))).apply(this,arguments)}},68192:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return i.default.request(e,t,n,o,r).then((e=>e.status&&e.status<12e3?e:null)).catch((()=>null))};var i=r(n(24874))},69353:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(91009)),a=n(43175),s=n(28123),l=r(n(85003)),u=r(n(68192));const c=`${s.DYN_ORIGIN}status.json`;class d extends a.BaseModel{constructor(){super(...arguments),this.online=(0,a.session)(!0),this.simulatedOfflineConditions=(0,a.session)(!1),this.waitIfOffline=(0,o.default)((()=>"all"),(0,i.default)((function*(){this.online||("Firefox"!==l.default.info().name&&navigator.onLine?__LOG__(2)`waitIfOffline: XHR online is false, but navigator.onLine is true, resolving promise`:(__LOG__(2)`waitIfOffline: Waiting...`,yield new Promise((e=>{this.listenToOnce(this,"change:online",(()=>{__LOG__(2)`waitIfOffline: Continuing...`,e()}))}))))}))),this.checkOnline=(0,o.default)((()=>"all"),function(){var e=(0,i.default)((function*(e){let{signal:t}=e;__LOG__(2)`NetworkStatus:checkOnline checking`;try{const e=yield(0,u.default)(c,"GET",null,void 0,t);this.online=!!e,__LOG__(2)`NetworkStatus:checkOnline response ${String(this.online)}`}catch(e){__LOG__(3)`NetworkStatus:checkOnline errored! ${String(e)}`}}));return function(){return e.apply(this,arguments)}}())}initialize(){this.listenTo(this,"change:online",this._logOnlineOffline),this._logOnlineOffline()}_logOnlineOffline(){const e=this.online;__LOG__(2,void 0,void 0,void 0,["comms"])`Comms: NetworkStatus ${e?"online":"offline"}`}simulateNetworkStatus(e){0}}var p=new((0,a.defineModel)(d));t.default=p},24874:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2560),o=r(n(91054)),a=r(n(32890));const s={GET:"GET",POST:"POST",HEAD:"HEAD",PUT:"PUT"};function l(e,t){for(const n in t)e.setRequestHeader(n,t[n])}function u(e,t,n,r,u,c,d){const p=new XMLHttpRequest,f=new Promise(((r,i)=>{if(p.onload=function(e){4===p.readyState?r(p):(__LOG__(4,void 0,new Error)`xhr.request:onload`,i(e))},p.onerror=e=>{__LOG__(4,void 0,new Error)`xhr.request:onerror`,i(e)},p.ontimeout=e=>{__LOG__(4,void 0,new Error)`xhr.request:ontimeout`,i(e)},c&&(p.onprogress=c),p.onabort=e=>{__LOG__(4,void 0,new Error)`xhr.request:onabort`,i(e)},n instanceof FormData)p.open(t||s.POST,e,!0),u&&(p.responseType=u),d&&l(p,d),p.send(n);else if(n instanceof Object){const r=a.default.build(e,n);p.open(t||s.GET,r,!0),u&&(p.responseType=u),d&&l(p,d),p.send()}else p.open(t||s.GET,e,!0),u&&(p.responseType=u),d&&l(p,d),p.send()})),_=(0,o.default)(f,r);return _.catch((0,i.catchAbort)((()=>{p.abort()}))).catch((()=>{})),_}var c={head:function(e,t){return u(e,s.HEAD,null,t)},get:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return u(e,s.GET,null,r,t,void 0,n)},post:function(e,t,n){return u(e,s.POST,t,n)},request:u,VERB:s,RESP_TYPE:{ARRAY_BUFFER:"arraybuffer",BLOB:"blob",JSON:"json"}};t.default=c},8316:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e,o)};var i=r(n(14176));const o=e=>null==e},60347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=()=>"randomUUID"in self.crypto?self.crypto.randomUUID():([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))},14602:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(35449);var r=URLSearchParams;t.default=r},94226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCurrentWebSessionInsidePwa=l,t.setAppBadge=function(e){null!=e&&(a=e);(null==l?void 0:l())&&"setAppBadge"in navigator&&(-1===a||0===a?navigator.clearAppBadge().catch((()=>{})):navigator.setAppBadge(a).catch((()=>{})))},t.setDocumentTitle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=e&&(o=e);s(o)};var r=n(95160);let i,o="",a=-1;function s(e){l()?document.title=" ":(self.clearTimeout(i),document.title+=" ",i=self.setTimeout((()=>{document.title=e}),0))}function l(){return"matchMedia"in self&&window.matchMedia("(display-mode: standalone)").matches}(0,r.isWorker)()||(o=document.title)},93948:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(28123),a=r(n(19194)),s=r(n(89482));a.default.HEARTBEAT;class l{constructor(e){this._handleMessage=e=>{if(!e.data||!e.data.action)return;const t=e.data;if(!e.ports||0===e.ports.length)return;const n=e.ports;if(!l.isSW()&&window.navigator.serviceWorker&&e.source!==window.navigator.serviceWorker.controller)return;let r;r="function"==typeof e.waitUntil?t=>e.waitUntil(t):()=>{},r(Promise.resolve(this.requestHandler(t)).then((e=>{n[0].postMessage(e)})).catch((e=>{n[0].postMessage({error:e&&e.toString()})})))},this.requestHandler=e}init(){const e=l.isSW()?self:window.navigator.serviceWorker;try{if(!e)return;e.addEventListener("message",this._handleMessage)}catch(e){}}static isSW(){return"undefined"==typeof window}static getRequestor(e){return l.isSW()?"string"==typeof e?self.clients.get(e):Promise.resolve(e):window.navigator.serviceWorker?window.navigator.serviceWorker.ready.then((()=>window.navigator.serviceWorker?window.navigator.serviceWorker.controller:null)):Promise.resolve(null)}static broadcast(e,t){return(0,i.default)((function*(){if(!l.isSW())throw(0,s.default)("Broadcast called from non-serviceworker.");const n=yield self.clients.matchAll();return 0===n.length?Promise.reject((0,s.default)("No clients available.")):Promise.all(n.map((n=>l.request(n,e,t))))}))()}static request(e,t,n){const r=new MessageChannel;return new Promise(((i,a)=>(r.port1.onmessage=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.error)?a(e.data.error):i(e.data)},l.getRequestor(e).then((e=>{if(!e)return a((0,s.default)("No ServiceWorker controlling this client."));e.postMessage({action:t,message:n,version:o.VERSION_STR},[r.port2])})))))}}t.default=l},19194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={REQUEST_STREAMING_INFO:"GET_STREAMING_INFO",REQUEST_RMR:"REQUEST_RMR",SEND_STREAMING_CHUNK:"SEND_STREAMING_CHUNK",EXP_BACKOFF:"EXP_BACKOFF",LOG:"LOG",UPLOAD_LOGS:"UPLOAD_LOGS",SET_L10N:"SET_L10N",STREAMING_SUPPORTED:"STREAMING_SUPPORTED",REMOVE_PP:"REMOVE_PP",LOGOUT:"LOGOUT",CLEAN_ASSETS:"CLEAN_ASSETS",ACTIVE_TAB:"ACTIVE_TAB",STOP_COMMS:"STOP_COMMS",HEARTBEAT:"HEARTBEAT",WEB_BUILD_INFO:"WEB_BUILD_INFO"};t.default=n},20637:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(89482));t.default=class{open(){return this._openPromise?this._openPromise:this._closePromise?(this._openPromise=this._closePromise.catch((e=>{throw this._openPromise=null,e})).then((()=>(this._openPromise=null,this.open()))),this._openPromise):(this._openPromise=this.doOpen().catch((e=>{throw this._openPromise=null,e})).then((()=>{this._openPromise=null})),this._openPromise)}close(){return this._closePromise?this._closePromise:this._openPromise?(this._closePromise=this._openPromise.catch((e=>{throw this._closePromise=null,e})).then((()=>(this._closePromise=null,this.close()))),this._closePromise):(this._closePromise=this.doClose().catch((e=>{throw this._closePromise=null,e})).then((()=>{this._closePromise=null})),this._closePromise)}get(e){var t=this;return(0,i.default)((function*(){return yield t.open(),t.doGet(e)}))()}queryByIndex(e,t){var n=this;return(0,i.default)((function*(){return yield n.open(),n.doQueryByIndex(e,t)}))()}getAll(){var e=this;return(0,i.default)((function*(){return yield e.open(),e.doGetAll()}))()}put(e,t){var n=this;return(0,i.default)((function*(){return yield n.open(),n.doPut(e,t)}))()}del(e){var t=this;return(0,i.default)((function*(){return yield t.open(),t.doDel(e)}))()}count(){var e=this;return(0,i.default)((function*(){return yield e.open(),e.doCount()}))()}clear(){var e=this;return(0,i.default)((function*(){return yield e.open(),e.doClear()}))()}doGet(){throw(0,o.default)("Not implemented")}doQueryByIndex(){throw(0,o.default)("Not implemented")}doGetAll(){throw(0,o.default)("Not implemented")}doPut(){throw(0,o.default)("Not implemented")}doDel(){throw(0,o.default)("Not implemented")}doCount(){throw(0,o.default)("Not implemented")}doClear(){throw(0,o.default)("Not implemented")}doOpen(){throw(0,o.default)("Not implemented")}doClose(){throw(0,o.default)("Not implemented")}}},91373:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=self.indexedDB}catch(e){}var r=n;t.default=r},21561:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_IDB_DB_NAMES=void 0,t.deleteAllIdb=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(77689),a=r(n(46808));const s={__dbnames:"__dbnames",fts_storage:"fts-storage",fts_loadgen_metadata:"loadgen-storage",_hsm_storage_DEPRECATED:"hsm-storage",jobs_storage:"jobs-storage",lru_media_storage_idb:"lru-media-storage-idb",model_storage:"model-storage",offd_storage:"offd-storage",pb_detect:"pb_detect",signal_storage:"signal-storage",sw:"sw",wawc:"wawc",wawc_db_enc:"wawc_db_enc",qpl_storage:"qpl-storage",worker_storage:"worker-storage"};function l(){return(l=(0,i.default)((function*(){const e=Object.keys(s).map((e=>s[e]));let t=!1;const n=e.map(function(){var e=(0,i.default)((function*(e){if("__dbnames"!==e&&"sw"!==e&&"pb_detect"!==e)try{yield(0,o.promiseTimeout)(Promise.resolve(a.default.delete(e)),7e3)}catch(e){t=!0}}));return function(){return e.apply(this,arguments)}}());return yield Promise.all(n),t}))).apply(this,arguments)}t.WEB_IDB_DB_NAMES=s},32126:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(20637)),a=r(n(89482));class s extends o.default{constructor(e,t,n,r){var i,o;super(),this._storeName=e,this._createResponse=t,this._parseResponse=n,this._encodeKey=null!==(i=null==r?void 0:r.encodeKey)&&void 0!==i?i:e=>e,this._matchOptions=null!==(o=null==r?void 0:r.matchOptions)&&void 0!==o?o:{}}doGet(e){var t=this;return(0,i.default)((function*(){yield t.doOpen();const n=t._encodeKey(e,t._storeName);if(!t._cacheStore)throw __LOG__(3)`Unable to get. This error can occur if abstract method doGet gets called.`,(0,a.default)("Unable to get");const r=yield t._cacheStore.match(n,t._matchOptions);return null==r?null:t._parseResponse(r)}))()}doPut(e,t){var n=this;return(0,i.default)((function*(){yield n.doOpen();const r=n._encodeKey(e,n._storeName);if(!n._cacheStore)throw __LOG__(3)`Unable to put. This error can occur if abstract method doPut gets called.`,(0,a.default)("Unable to put in cache");return yield n._cacheStore.put(r,n._createResponse(t)),t}))()}doDel(e){var t=this;return(0,i.default)((function*(){yield t.doOpen();const n=t._encodeKey(e,t._storeName);if(!t._cacheStore)return __LOG__(3)`Unable to delete. This error can occur if abstract method doDel gets called.`,Promise.reject((0,a.default)("Unable to delete"));yield t._cacheStore.delete(n,t._matchOptions)}))()}doClear(){var e=this;return(0,i.default)((function*(){(yield caches.delete(e._storeName))||__LOG__(2)`Tried to delete a non-existent cache: ${e._storeName}`,e._cacheStore=null}))()}doOpen(){var e=this;return(0,i.default)((function*(){if(null==e._cacheStore)try{e._cacheStore=yield caches.open(e._storeName)}catch(t){throw e._cacheStore=null,__LOG__(3)`Unable to open cache: ${e._storeName}, error: ${t}`,t}}))()}doClose(){return this._cacheStore=null,Promise.resolve()}}t.default=s},51298:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=window.localStorage}catch(e){}var r=n;t.default=r},66625:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isLogoutDirtyBitSet=function(){return"1"===(null===i.default||void 0===i.default?void 0:i.default.getItem(o.KEYS.LOGOUT_DIRTY_BIT))},t.isUserLoggedOut=function(){return!(null===i.default||void 0===i.default?void 0:i.default.getItem(o.KEYS.LAST_WID_MD))&&!(null===i.default||void 0===i.default?void 0:i.default.getItem(o.KEYS.LAST_WID))};var i=r(n(51298)),o=n(59356)},44848:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(2525)),a=r(n(51298)),s=r(n(62419));var l=new class{constructor(){this.dataStore={}}setItem(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.dataStore[e]=t,null!=a.default&&a.default.setItem(e,t),n&&s.default.idb().then((n=>n.user.put({key:e,value:t}))).catch((e=>{__LOG__(3)`db:setItem:Error ${e}`}))}getItem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.dataStore[e]||t){if(null!=a.default){const t=a.default.getItem(e);return null!=t&&this.setItem(e,t,!1),t}return null}return this.dataStore[e]}removeItem(e){delete this.dataStore[e],null!=a.default&&a.default.removeItem(e),s.default.idb().then((t=>t.user.delete(e))).catch((e=>{__LOG__(3)`db:removeItem:Error ${e}`}))}clear(e){var t=this;return(0,i.default)((function*(){t.dataStore={},null!=a.default&&(a.default.clear(),e&&(0,o.default)(e,(function(e,t){a.default.setItem(t,e)}))),yield s.default.idb().then((e=>e.user.clear())).catch((e=>{__LOG__(3)`db:clear:Error ${e}`}))}))()}};t.default=l},81535:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=window.sessionStorage}catch(e){}var r=n;t.default=r},20589:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2525)),o=r(n(49619)),a=n(25303),s=r(n(81535)),l=n(59356);var u=(()=>{try{const e=(0,o.default)(s.default,"sessionStorage");return e.setItem(l.KEYS.STORAGE_TEST,l.KEYS.STORAGE_TEST),(0,a.isFunction)(e.clear)}catch(e){return!1}})()?new class{constructor(){this.dataStore={}}setItem(e,t){this.dataStore[e]=t,(0,o.default)(s.default,"sessionStorage").setItem(e,t)}getItem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==this.dataStore[e]||t?(0,o.default)(s.default,"sessionStorage").getItem(e):this.dataStore[e]}removeItem(e){delete this.dataStore[e],(0,o.default)(s.default,"sessionStorage").removeItem(e)}clear(e){return this.dataStore={},(0,o.default)(s.default,"sessionStorage").clear(),e&&(0,i.default)(e,(function(e,t){(0,o.default)(s.default,"sessionStorage").setItem(t,e)})),Promise.resolve()}}:new class{constructor(){this.dataStore={}}setItem(e,t){this.dataStore[e]=t}getItem(e){return void 0===this.dataStore[e]?null:this.dataStore[e]}removeItem(e){delete this.dataStore[e]}clear(){return this.dataStore={},Promise.resolve()}};t.default=u},17657:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.userPrefsIdb=void 0;var i=r(n(48926)),o=r(n(49619)),a=n(70824),s=n(59356),l=n(87606),u=n(64286),c=n(78701);function d(){return(d=(0,i.default)((function*(e){try{yield(0,a.createOrReplaceUserPref)(e)}catch(t){__LOG__(3)`An error ocurred while trying to insert the user preference '${e.key}' in IndexedDB. Err: ${t}`}}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){try{yield(0,a.removeUserPref)(e)}catch(t){__LOG__(3)`An error ocurred while trying to remove user preference '${e}' from IndexedDB. Err: ${t}`}}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){try{yield(0,a.clearUserPrefs)()}catch(e){__LOG__(3)`An error ocurred while trying to clear all user preferences from IndexedDB. Err: ${e}`}}))).apply(this,arguments)}function _(){return(_=(0,i.default)((function*(e){try{yield(0,a.bulkCreateOrReplaceUserPrefs)(e)}catch(e){__LOG__(3)`An error ocurred while trying to create multiple user preferences in IndexedDB. Err: ${e}`}}))).apply(this,arguments)}function g(e){let t=e;return Object.values(s.HASHED_KEYS).some((t=>t===e))&&(t=(0,c.hashUserPrefKey)(e)),t}const h=new class{constructor(){this.loadedUserPrefs=null}init(){return null==this._pendingInit&&(this._pendingInit=(0,a.allUserPrefsIdb)().then((e=>{const t=Object.fromEntries(e.map((e=>{let{key:t,value:n}=e;return[t,n]})));this.loadedUserPrefs=t}))),this._pendingInit}set(e,t){var n=this;return(0,i.default)((function*(){const r=g(e);if(null==r)return;null==n.loadedUserPrefs&&(__LOG__(3,void 0,void 0,!0)`UserPrefsIndexedDBStorage: set(${e}) called before init`,SEND_LOGS("userprefs-idb-set-before-init"),yield n.init());const i=(0,o.default)(n.loadedUserPrefs,"_this.loadedUserPrefs"),a=(0,u.preProcessUserPref)(e,t);i[r]=a,yield function(){return d.apply(this,arguments)}({key:r,value:a})}))()}get(e){if(null==this.loadedUserPrefs)return __LOG__(4,void 0,new Error,!0)`UserPrefsIndexedDBStorage: get(${e}) called before init`,SEND_LOGS("userprefs-idb-get-before-init"),null;const t=this.loadedUserPrefs,n=g(e);if(null==n)return;let r;if(n in t&&(r=t[n]),null==r)return null;return(0,l.postProcessUserPref)(e,r)}remove(e){var t=this;return(0,i.default)((function*(){null==t.loadedUserPrefs&&(__LOG__(3,void 0,void 0,!0)`UserPrefsIndexedDBStorage: remove(${e}) called before init.`,SEND_LOGS("userprefs-idb-remove-before-init"),yield t.init());const n=(0,o.default)(t.loadedUserPrefs,"_this2.loadedUserPrefs"),r=g(e);null!=r&&(delete n[r],yield function(){return p.apply(this,arguments)}(r))}))()}clear(){var e=this;return(0,i.default)((function*(){e.loadedUserPrefs={},yield function(){return f.apply(this,arguments)}()}))()}bulkSetItemsToIndexedDB(e){var t=this;return(0,i.default)((function*(){const n=e.map((e=>{const t=g(e.key);if(null!=t)return{key:t,value:(0,u.preProcessUserPref)(e.key,e.value)}})).filter(Boolean);yield function(){return _.apply(this,arguments)}(n),null==t.loadedUserPrefs&&(__LOG__(3,void 0,void 0,!0)`UserPrefsIndexedDBStorage: attempting to bulk set before initialization`,SEND_LOGS("userprefs-idb-bulk-set-before-init"),yield t.init());const r=(0,o.default)(t.loadedUserPrefs,"_this4.loadedUserPrefs");for(const{key:e,value:t}of n)r[e]=t}))()}};t.userPrefsIdb=h},637:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(51298)),o=n(59356),a=n(87606),s=n(64286),l=n(78701);function u(e){let t=e;return Object.values(o.HASHED_KEYS).some((t=>t===e))&&(t=(0,l.hashUserPrefKey)(e)),t}var c=new class{constructor(){this._cachedLocalStorageValues={}}setItemToLocalStorage(e,t){if(null==i.default)return;const n=u(e);if(null==n)return;const r=JSON.stringify((0,s.preProcessUserPref)(e,t));null!=r&&(this._cachedLocalStorageValues[n]=r,i.default.setItem(n,r))}getItemFromLocalStorage(e){const t=u(e);if(null==t)return;let n,r=this._cachedLocalStorageValues[t];if(null==r&&null!=i.default&&(r=i.default.getItem(t)),null==r)return null;this._cachedLocalStorageValues[t]=r;try{n=JSON.parse(r)}catch(t){return this.removeItemFromLocalStorage(e),null}return(0,a.postProcessUserPref)(e,n)}removeItemFromLocalStorage(e){const t=u(e);null!=t&&(delete this._cachedLocalStorageValues[t],null!=i.default&&i.default.removeItem(t))}clearLocalStorage(){this._cachedLocalStorageValues={},null!=i.default&&i.default.clear()}};t.default=c},87606:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.postProcessUserPref=function(e,t){let n=t;const r=a[e];null!=r&&(n=r(t));return n};var i=r(n(66604)),o=n(62089);const a={WANoiseInfo:function(e){const t=(0,i.default)(e,(e=>null!=e?(0,o.decodeB64)(e):e));return{recoveryToken:t.recoveryToken,staticKeyPair:{pubKey:t.pubKey,privKey:t.privKey},certificateChainBuffer:t.certificateChainBuffer}},WARoutingInfo:function(e){const{domain:t,edgeRouting:n}=e;return{domain:t,edgeRouting:null!=n?(0,o.decodeB64)(n):null}}}},64286:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.preProcessUserPref=function(e,t){let n=t;const r=a[e];null!=r&&(n=r(t));return n};var i=r(n(66604)),o=n(62089);const a={WANoiseInfo:function(e){const t={privKey:e.staticKeyPair.privKey,pubKey:e.staticKeyPair.pubKey,recoveryToken:e.recoveryToken,certificateChainBuffer:e.certificateChainBuffer};return(0,i.default)(t,(e=>null!=e?(0,o.encodeB64)(e):e))},WARoutingInfo:function(e){const{domain:t,edgeRouting:n}=e;return{domain:t,edgeRouting:n?(0,o.encodeB64)(n):null}}}},78701:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hashUserPrefKey=function(e){const t=(0,o.getMaybeMeUser)();if(!t)return void __LOG__(3)`hashUserPrefKey: Me has not loaded yet.`;return(0,i.default)(t.toString()+":"+e)};var i=r(n(27522)),o=n(3885)},21639:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genAdvAccountTypeChangeNotificationMsg=function(e,t,n){if((0,o.bizHostedDevicesEnabled)()){const r=(0,u.getMeUser)(),o=new a.default({fromMe:t.equals(r),remote:e,id:a.default.newId_DEPRECATED()});if(n===l.ADVEncryptionType.E2EE)return{id:o,t:(0,i.unixTime)(),type:"e2e_notification",kind:s.MsgKind.E2eNotification,subtype:"encrypt",from:e,to:r};if(n===l.ADVEncryptionType.HOSTED)return{id:o,t:(0,i.unixTime)(),type:"notification_template",kind:s.MsgKind.NotificationTemplate,subtype:"biz_account_type_changed_to_hosted",from:e,to:r}}return null},t.genAdvAccountTypeInitialSysMsg=function(e,t){if((0,o.bizHostedDevicesEnabled)()){const n=(0,u.getMeUser)();return{id:new a.default({fromMe:t.equals(n),remote:e,id:a.default.newId_DEPRECATED()}),t:(0,i.unixTime)(),type:"notification_template",kind:s.MsgKind.NotificationTemplate,subtype:"biz_account_type_is_hosted",from:e,to:n}}return null},t.genAdvMeAccountIsHostedNotificationMsg=function(e,t){if((0,o.bizHostedDevicesEnabled)()){const n=(0,u.getMeUser)();return{id:new a.default({fromMe:t.equals(n),remote:e,id:a.default.newId_DEPRECATED()}),t:(0,i.unixTime)(),type:"notification_template",kind:s.MsgKind.NotificationTemplate,subtype:"biz_me_account_type_is_hosted",from:e,to:n}}return null};var i=n(29987),o=n(41404),a=r(n(60001)),s=n(73602),l=n(59266),u=n(3885)},45218:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genContactInfoCardMsg=function(){return g.apply(this,arguments)},t.genDefaultDisappearingModeSystemMsg=function(e,t,n){const r=n?(0,d.getMeUser)():e;if(null==r)throw(0,f.default)(`Cannot set null initiator for DDM system message: ${e.toString()} / ${String(n)}`);return _(e,{type:"notification_template",subtype:"disappearing_mode",templateParams:[],ephemeralDuration:t,ephemeralSettingUser:r})},t.genDeviceNotificationMsg=function(e,t,n,r){const i=(0,d.assertGetMe)(),o=new u.default({fromMe:t.equals((0,p.toUserWid)(i)),remote:e,id:u.default.newId_DEPRECATED()}),s=o.fromMe&&n.includes(i.getDeviceId());return{id:o,t:(0,a.unixTime)(),type:"e2e_notification",kind:c.MsgKind.E2eNotification,subtype:"device",from:e,to:(0,p.toUserWid)(i),body:t.toString(),devicesAdded:n.length,devicesRemoved:r.length,isThisDeviceAdded:s}},t.genDisappearingModeUnsupportedSystemMsg=function(e){return _(e,{type:"notification_template",subtype:"disappearing_mode_unsupported",templateParams:[]})},t.genDisappearingModeUpdateSystemMsg=function(e,t,n){return _(e,{type:"notification_template",subtype:"disappearing_mode_update",templateParams:[],ephemeralDuration:t,ephemeralSettingUser:n})},t.genEncryptNotificationMsg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"encrypt";return _(e,{type:"e2e_notification",subtype:t,templateParams:[]})},t.genNonE2ENotificationMsg=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return _(e,{type:"notification_template",subtype:t,templateParams:n})},t.genNotificationMsg=_,t.genSecurityCodeNotificationMsg=function(e,t){const n=(0,d.getMeUser)();return{id:new u.default({fromMe:t.equals(n),remote:e,id:u.default.newId_DEPRECATED()}),t:(0,a.unixTime)(),type:"e2e_notification",kind:c.MsgKind.E2eNotification,subtype:"identity",from:e,to:n,body:t.toString()}},t.genUsernameChangeSystemMsg=function(e,t){return _(e,{type:"notification_template",subtype:"change_username",templateParams:null!=t?[t]:[""]})};var i=r(n(48926)),o=r(n(81109)),a=n(29987),s=n(42247),l=n(42311),u=r(n(60001)),c=n(73602),d=n(3885),p=n(51017),f=r(n(89482));function _(e,t){const n=(0,d.getMaybeMeLid)(),r=(0,d.getMeUser)(),i=new u.default({fromMe:(0,d.isMeAccount)(e),remote:e,id:u.default.newId_DEPRECATED()});return(0,o.default)({id:i,t:(0,a.unixTime)(),from:e,to:e.isLid()&&null!=n?n:r},t)}function g(){return(g=(0,i.default)((function*(e,t){if(!(0,l.supportsFMX)())return null;if(t.isBiz&&!(0,l.supportsFMXV2)()||!e.isUser()||t.isWASupportStartingChat||t.iAmStartingChat||t.isFromCTWA&&(0,l.fmxCTWAKillSwitchEnabled)())return null;if(e.isBot())return null;return(yield(0,s.isAddressBookContact)(e.toJid()))?null:_(e,{type:"notification_template",subtype:"contact_info_card",templateParams:[e]})}))).apply(this,arguments)}},42469:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genAllowNonAdminSubGroupCreationNotificationMsg=function(){return D.apply(this,arguments)},t.genCreatedSubgroupSuggestionNotificationMsg=function(){return L.apply(this,arguments)},t.genDescriptionNotificationMsg=function(){return w.apply(this,arguments)},t.genGroupCreationMsg=I,t.genGroupEphemeralSettingMsg=O,t.genGroupNotificationMsg=P,t.genGroupPicChangeNotificationMsg=function(e,t,n,r){return{type:"gp2",kind:h.MsgKind.Gp2,subtype:"picture",t:n,author:r,body:t===m.ProfilePicCommand.Set?"set":"remove",recipients:[],from:e,to:(0,S.getMeUser)(),id:new g.default({remote:e,fromMe:!1,id:g.default.newId_DEPRECATED()})}},t.genInitialPhashMismatchMsg=function(e,t){return{id:new g.default({remote:e,fromMe:!1,id:g.default.newId_DEPRECATED()}),from:e,to:(0,S.getMeUser)(),recipients:[],subtype:"initial_pHash_mismatch",t,type:"gp2",kind:h.MsgKind.Gp2}},t.genIntegrityDeleteParentNotificationMsgs=function(){return N.apply(this,arguments)},t.genMsgsForGroupCreation=function(){return T.apply(this,arguments)},t.genParentGroupLinkMembershipApprovalNotif=k,t.generateDeleteParentNotificationMessages=function(){return R.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(29987),s=n(83741),l=n(64002),u=n(18106),c=n(45218),d=n(79247),p=n(22582),f=n(78440),_=n(98051),g=r(n(60001)),h=n(73602),A=n(65417),m=n(8701),E=n(41984),y=n(35872),S=n(3885),v=n(51017);function I(e,t){var n,r,i;const{chatId:o}=e;let a=null!==(n=null!==(r=t.owner)&&void 0!==r?r:e.author)&&void 0!==n?n:(0,S.getMaybeMeUser)();const s=t.participants.some((e=>{let{isAdmin:t,id:n}=e;return(0,S.isMeAccount)(n)&&t})),l=t.subject;let c,d;var p;if((0,u.communitiesEnabled)()&&!0===t.defaultSubgroup)c="community_create",t.parentGroup&&(d=[t.parentGroup,t.subject]),a=null!==(p=t.owner)&&void 0!==p?p:e.author;else if(!0===t.generalSubgroup&&s&&(0,u.communityGeneralChatUIEnabled)()){var f;c="general_chat_add",d=["created",t.subject],a=null!==(f=t.owner)&&void 0!==f?f:e.author}else{var _;a=null!==(_=t.owner)&&void 0!==_?_:e.author,t.parentGroup&&1===t.participants.length&&(0,u.communityShortGroupCreationEnabled)()?(d=[t.parentGroup,t.parentGroupSubject,t.subject],c="empty_subgroup_create"):c="create"}return{id:new g.default({remote:o,fromMe:!1,participant:a,id:B(e,c)}),author:a,body:l,from:o,recipients:[],subtype:c,t:null!==(i=t.creation)&&void 0!==i?i:e.ts,type:"gp2",templateParams:d}}function T(){return(T=(0,o.default)((function*(e,t,n,r){const i=t.participants.find((e=>{let{isAdmin:t,id:n}=e;return(0,S.isMeAccount)(n)&&t}));return(yield Promise.all([n||i||!0!==t.defaultSubgroup||!0!==t.incognito?[]:[(0,c.genNotificationMsg)(t.id,{type:"notification_template",subtype:"cag_masked_thread_created",templateParams:[]})],n?[]:[I(e,t)],function(){const{ephemeralDuration:n}=t;return e.author&&null!=e.ts&&null!=n&&n>0?[O(e.chatId,e.ts,e.author,n)]:[]}(),function(){return a.apply(this,arguments)}(),function(){return d.apply(this,arguments)}()])).flat();function a(){return(a=(0,o.default)((function*(){const r=[],{defaultSubgroup:i,parentGroup:o}=t;if(null!=o&&!0!==i&&!n&&(0,u.communitiesEnabled)()){const t={actionType:_.GROUP_ACTIONS.PARENT_GROUP_LINK,groupDatas:[{id:o,subject:""}]};if((0,s.getABPropConfigValue)("group_join_request_m0_anyone_can_join")||(0,s.getABPropConfigValue)("group_join_request_m2_setting")){const n=yield(0,l.isCurrentUserGroupAdmin)(e.chatId.toString());r.push(yield k(e,t.groupDatas,n))}}return r}))).apply(this,arguments)}function d(){return(d=(0,o.default)((function*(){return null==r?[]:[yield P(e,r)]}))).apply(this,arguments)}}))).apply(this,arguments)}function b(){return M.apply(this,arguments)}function M(){return(M=(0,o.default)((function*(e,t){const n=e.parentGroupId;if(!n)return!1;const r=yield(0,p.getGroupMetadata)(n);return!r||null!=r&&(yield(0,d.getJoinedSubgroups)((0,v.createWid)(r.id))).length<=t}))).apply(this,arguments)}function P(){return C.apply(this,arguments)}function C(){return(C=(0,o.default)((function*(e,t,n){const{chatId:r,isAdmin:i=!1}=e;let o,a=e.author&&(0,v.toUserWid)(e.author)||void 0,c=null,d=[],f=a,m=t.actionType,I=null;const T=t.parentGroupId;switch(t.actionType){case _.GROUP_ACTIONS.SUBJECT:c=t.subject;break;case _.GROUP_ACTIONS.MODIFY:d=t.participants.map((e=>{let{id:t}=e;return t}));break;case _.GROUP_ACTIONS.ADD:var M;if(t.reason===_.ADD_REASON.INVITE)if(T&&t.participants.some((e=>{let{id:t}=e;return(0,S.isMeAccount)(t)}))&&(0,u.communitiesEnabled)())if(!0===t.generalSubgroup&&(0,u.communityGeneralChatUIEnabled)())m="general_chat_add",I=["linked_group_join",null!==(M=t.groupName)&&void 0!==M?M:""];else if(!0===t.defaultSubgroup){var P;m="community_invite_rich",I=[T,null!==(P=t.groupName)&&void 0!==P?P:""]}else{var C;m="sub_group_invite_rich";const e=yield(0,p.getGroupMetadata)(T);I=[T,null!==(C=null==e?void 0:e.subject)&&void 0!==C?C:""]}else m="invite";else if((0,u.communitiesEnabled)()){var O;if(t.reason===_.ADD_REASON.LINKED_GROUP_JOIN)if(!0===t.generalSubgroup&&null!=T&&t.participants.some((e=>{let{id:t}=e;return(0,S.isMeAccount)(t)}))&&(0,u.communityGeneralChatUIEnabled)())m="general_chat_add",I=["linked_group_join",null!==(O=t.groupName)&&void 0!==O?O:""];else m="linked_group_join";else if(t.reason===_.ADD_REASON.AUTO_ADD){var R,N,w;if(T)I=[T,null!==(R=t.groupName)&&void 0!==R?R:"",null!==(N=t.contextGroupId)&&void 0!==N?N:""],m="subgroup_admin_triggered_auto_add";else if(m="auto_add",yield b(t,2))I=[t.parentGroupId,null!==(w=t.groupName)&&void 0!==w?w:""]}else if(t.reason===_.ADD_REASON.DEFAULT_SUBGROUP_ADMIN_ADD){var D,L;if(T)m="community_participant_add_rich",I=[T,null!==(D=t.groupName)&&void 0!==D?D:""];else if(m="default_sub_group_admin_add",yield b(t,1))I=[t.parentGroupId,null!==(L=t.groupName)&&void 0!==L?L:""]}else if(t.reason===_.ADD_REASON.DEFAULT_SUBGROUP_PROMOTE)m="default_sub_group_promote";else if(t.reason===_.ADD_REASON.INVITE_AUTO_ADD){var k,G;if(T&&Boolean(t.defaultSubgroup)&&t.participants.some((e=>{let{id:t}=e;return(0,S.isMeAccount)(t)})))I=[T,null!==(k=t.groupName)&&void 0!==k?k:"",null!==(G=t.contextGroupId)&&void 0!==G?G:""],m="subgroup_admin_triggered_invite_auto_add";else m="invite_auto_add",t.contextGroupId&&(I=[t.contextGroupId,""],(yield b(t,2))?I.push("false"):I.push("true"))}else if(t.participants.some((e=>{let{id:t}=e;return(0,S.isMeAccount)(t)}))&&t.reason===_.ADD_REASON.GENERAL_CHAT_AUTO_ADD&&(0,u.communityGeneralChatUIEnabled)())m="general_chat_add",I=["general_chat_auto_add",t.groupName];else if(null==t.reason&&T&&t.participants.some((e=>{let{id:t}=e;return(0,S.isMeAccount)(t)}))&&!0===t.generalSubgroup&&(0,u.communityGeneralChatUIEnabled)()){var U;m="general_chat_add",I=["",null!==(U=t.groupName)&&void 0!==U?U:""]}else if(T&&t.participants.some((e=>{let{id:t}=e;return(0,S.isMeAccount)(t)}))){var x;const e=yield(0,p.getGroupMetadata)(T);I=[T,null!==(x=null==e?void 0:e.subject)&&void 0!==x?x:""],m=!0===t.defaultSubgroup?"community_participant_add_rich":"sub_group_participant_add_rich"}}case _.GROUP_ACTIONS.PROMOTE:case _.GROUP_ACTIONS.DEMOTE:case _.GROUP_ACTIONS.REMOVE:case _.GROUP_ACTIONS.LINKED_GROUP_PROMOTE:case _.GROUP_ACTIONS.LINKED_GROUP_DEMOTE:if(t.actionType===_.GROUP_ACTIONS.REMOVE&&t.reason===_.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE){m="default_sub_group_demote";break}d=t.participants.map((e=>{let{id:t}=e;return t})),1===d.length&&(f=d[0]),t.actionType===_.GROUP_ACTIONS.REMOVE&&1===d.length&&a===f&&(m="leave");break;case _.GROUP_ACTIONS.INVITE_CODE:m="revoke_invite";break;case _.GROUP_ACTIONS.DESC_ADD:m=!0===t.isParentGroup?"parent_group_description":"description",c=t.desc;break;case _.GROUP_ACTIONS.DESC_REMOVE:m=!0===t.isParentGroup?"parent_group_description":"description";break;case _.GROUP_ACTIONS.RESTRICT:I=[t.value?_.GroupSettingChangeSystemMessageToggleEnabled.On:_.GroupSettingChangeSystemMessageToggleEnabled.Off],c=I[0],null!=t.threshold&&I.push(t.threshold);break;case _.GROUP_ACTIONS.ANNOUNCE:case _.GROUP_ACTIONS.NO_FORWARD:I=[t.value?_.GroupSettingChangeSystemMessageToggleEnabled.On:_.GroupSettingChangeSystemMessageToggleEnabled.Off],c=I[0];break;case _.GROUP_ACTIONS.EPHEMERAL:a&&(I=[`${t.duration}`,a]);break;case _.GROUP_ACTIONS.GROWTH_LOCKED:I=[t.type],c=I[0];break;case _.GROUP_ACTIONS.SUB_GROUP_LINK:case _.GROUP_ACTIONS.SIBLING_GROUP_LINK:case _.GROUP_ACTIONS.SUB_GROUP_UNLINK:case _.GROUP_ACTIONS.PARENT_GROUP_UNLINK:case _.GROUP_ACTIONS.SIBLING_GROUP_UNLINK:case _.GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK:case _.GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK:I=(0,A.flattenPairList)(t.groupDatas.map((e=>[e.id,e.subject])));break;case _.GROUP_ACTIONS.PARENT_GROUP_LINK:I=(0,A.flattenPairList)(t.groupDatas.map((e=>[e.id,e.subject]))),m="community_link_parent_group_rich",o="parentGroupLink";break;case _.GROUP_ACTIONS.PARENT_GROUP_LINK_MEMBERSHIP_APPROVAL:{const e=t.groupDatas[0],n=i?_.GroupSettingChangeSystemMessageIsAdmin.Admin:_.GroupSettingChangeSystemMessageIsAdmin.Regular,r=t.membershipApprovalMode;I=[e.id,e.subject,n,r.toString()],o="parentGroupLinkMembershipApproval";break}case _.GROUP_ACTIONS.DELETE_PARENT_GROUP:I=[t.communityTitle];break;case _.GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE:I=[t.value?_.GroupSettingChangeSystemMessageToggleEnabled.On:_.GroupSettingChangeSystemMessageToggleEnabled.Off,i?_.GroupSettingChangeSystemMessageIsAdmin.Admin:_.GroupSettingChangeSystemMessageIsAdmin.Regular],"server"===t.triggered&&(a=void 0);break;case _.GROUP_ACTIONS.MEMBER_ADD_MODE:{if(!(0,s.getABPropConfigValue)("web_anyone_can_add_group_setting_enabled"))break;const e=t.memberAddMode;null!=e&&(I=[e===y.MemberAddMode.ALL_MEMBER_ADD?_.GroupSettingChangeSystemMessageToggleEnabled.On:_.GroupSettingChangeSystemMessageToggleEnabled.Off]);break}case _.GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS:{const e=t.requests;t.requestMethod===E.RequestMethod.NonAdminAdd&&null!=a&&e.length>0?(I=[a.toJid(),...e.map((e=>e.toJid()))],m="created_membership_requests"):m="membership_approval_request";break}case _.GROUP_ACTIONS.ALLOW_ADMIN_REPORTS:{I=[t.value?_.GroupSettingChangeSystemMessageToggleEnabled.On:_.GroupSettingChangeSystemMessageToggleEnabled.Off];const n=yield(0,l.isCurrentUserGroupAdmin)(e.chatId.toString());I.push(n?_.GroupSettingChangeSystemMessageIsAdmin.Admin:_.GroupSettingChangeSystemMessageIsAdmin.Regular)}break;case _.GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:I=[t.value?_.GroupSettingChangeSystemMessageToggleEnabled.On:_.GroupSettingChangeSystemMessageToggleEnabled.Off];break;case _.GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION:m="created_subgroup_suggestion",I=[t.subject];break;case _.GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED:m="general_chat_auto_add_disabled"}return{id:new g.default({remote:r,fromMe:!1,participant:f,id:B(e,o)}),body:c||void 0,author:a,from:r,to:(0,S.getMeUser)(),recipients:d.map(v.toUserWid)||[],subtype:m,t:null!=n?n:e.ts,type:"gp2",kind:h.MsgKind.Gp2,templateParams:I||void 0}}))).apply(this,arguments)}function O(e,t,n,r){return{id:new g.default({remote:e,fromMe:!1,participant:n,id:g.default.newId_DEPRECATED()}),author:n,from:e,to:(0,S.getMeUser)(),recipients:[],subtype:"ephemeral",t,type:"gp2",kind:h.MsgKind.Gp2,templateParams:[`${r}`]}}function R(){return(R=(0,o.default)((function*(e){var t,n;const r=[],{chatId:i}=e,s=yield(0,p.getGroupMetadata)(i);if(null==s||!1===s.isParentGroup)return r;const l=yield(0,d.getDefaultSubgroup)(i),u=null!==(t=null==s?void 0:s.subject)&&void 0!==t?t:"",c=(0,a.unixTime)();return null!=l&&(yield(0,f.checkMyMembership)(l))&&r.push(yield P({chatId:l,author:e.author,ts:c},{actionType:_.GROUP_ACTIONS.DELETE_PARENT_GROUP,communityTitle:u})),yield Promise.all((null!==(n=yield(0,d.getJoinedSubgroups)((0,v.createWid)(s.id)))&&void 0!==n?n:[]).filter((e=>!(null!=l&&l.equals(e)))).map(function(){var t=(0,o.default)((function*(t){r.push(yield P({chatId:t,author:e.author,ts:c},{actionType:_.GROUP_ACTIONS.DELETE_PARENT_GROUP,communityTitle:u})),r.push(yield P({chatId:t,author:e.author,ts:c},{actionType:_.GROUP_ACTIONS.PARENT_GROUP_UNLINK,groupDatas:[{id:i,subject:u}]}))}));return function(){return t.apply(this,arguments)}}())),r}))).apply(this,arguments)}function N(){return(N=(0,o.default)((function*(e){var t;const n=[],{chatId:r}=e,i=yield(0,p.getGroupMetadata)(r);if(null==i)return __LOG__(4,void 0,new Error)`genIntegrityDelteteParentNotificationMsgs: missing parentGroupMetadata`,[];const s=yield(0,d.getDefaultSubgroup)(r);var l;null!=s&&(yield(0,f.checkMyMembership)(s))&&n.push(yield P({chatId:s,author:void 0,ts:(0,a.unixTime)()},{actionType:_.GROUP_ACTIONS.DELETE,reason:_.DELETE_REASON.INTEGRITY_DELETE_PARENT,groupDatas:[{id:r,subject:null!==(l=null==i?void 0:i.subject)&&void 0!==l?l:""}]}));return yield Promise.all((null!==(t=yield(0,d.getJoinedSubgroups)(r))&&void 0!==t?t:[]).filter((e=>!(null!=s&&s.equals(e)))).map(function(){var e=(0,o.default)((function*(e){var t;return n.push(yield P({chatId:e,author:void 0,ts:(0,a.unixTime)()},{actionType:_.GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK,groupDatas:[{id:r,subject:null!==(t=null==i?void 0:i.subject)&&void 0!==t?t:""}]}))}));return function(){return e.apply(this,arguments)}}())),n}))).apply(this,arguments)}function w(){return(w=(0,o.default)((function*(e,t){const{chatId:n}=e,r=yield(0,p.getGroupMetadata)(n);if(!0===(null==r?void 0:r.isParentGroup)&&(0,u.communitiesEnabled)()){const r=yield(0,d.getDefaultSubgroup)(n);if(r&&(t.actionType===_.GROUP_ACTIONS.DESC_ADD||t.actionType===_.GROUP_ACTIONS.DESC_REMOVE))return P((0,i.default)((0,i.default)({},e),{},{chatId:r}),(0,i.default)((0,i.default)({},t),{},{isParentGroup:!0}))}return P(e,t)}))).apply(this,arguments)}function D(){return(D=(0,o.default)((function*(e,t){const{chatId:n}=e,r=yield(0,d.getDefaultSubgroup)(n);if(!r)return;const o=yield(0,f.getParticipants)(r);return Boolean(null==o?void 0:o.participants.find((e=>(0,S.isMeAccount)((0,v.createWid)(e)))))?P((0,i.default)((0,i.default)({},e),{},{chatId:r}),t):void 0}))).apply(this,arguments)}function L(){return(L=(0,o.default)((function*(e,t){const{chatId:n}=e,r=yield(0,d.getDefaultSubgroup)(n);if(r&&t.actionType===_.GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION&&(0,u.communitiesEnabled)())return P((0,i.default)((0,i.default)({},e),{},{chatId:r}),t)}))).apply(this,arguments)}function B(e,t){var n,r;let i=null!==(n=e.externalId)&&void 0!==n?n:g.default.newId_DEPRECATED();return null!=t&&(i=`${i}${t}`),`${i}${null!==(r=e.ts)&&void 0!==r?r:""}`}function k(){return G.apply(this,arguments)}function G(){return(G=(0,o.default)((function*(e,t,n){const r=yield function(){return a.apply(this,arguments)}(e.chatId);return P((0,i.default)((0,i.default)({},e),{},{isAdmin:n}),{actionType:_.GROUP_ACTIONS.PARENT_GROUP_LINK_MEMBERSHIP_APPROVAL,membershipApprovalMode:r,groupDatas:t});function a(){return(a=(0,o.default)((function*(e){var t;const n=yield(0,p.getGroupMetadata)(e);return null!==(t=null==n?void 0:n.membershipApprovalMode)&&void 0!==t&&t}))).apply(this,arguments)}}))).apply(this,arguments)}},63118:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(21639),s=n(97183),l=n(41404),u=n(68739),c=n(67982),d=n(42467),p=n(45218),f=n(60019),_=n(59266),g=n(56333),h=r(n(27112));function A(){return(A=(0,i.default)((function*(e,t,n){if(h.default.isPSA(e))return[(0,p.genEncryptNotificationMsg)(e,"chat_psa")];if(e.isBot())return[(0,u.genBotInitSystemMsg)(e)];if(n===d.BizBotAutomatedType.FULL_3P)return[(0,u.genBizBot3pDisclosureMessage)(e)];if((0,l.bizHostedDevicesEnabled)()&&e.isUser()){if(!0===(yield(0,g.getIsHostedMeAccount)()))return[(0,o.default)((0,a.genAdvMeAccountIsHostedNotificationMsg)(e,e),"genAdvMeAccountIsHostedNotificationMsg(wid, wid)")];if(e.isUser()){const t=yield(0,s.getDeviceRecord)(e);if((null==t?void 0:t.advAccountType)===_.ADVEncryptionType.HOSTED||!0===(null==t?void 0:t.deletedChangedToHost))return[(0,o.default)((0,a.genAdvAccountTypeInitialSysMsg)(e,e),"genAdvAccountTypeInitialSysMsg(wid, wid)")]}}const r=[];switch((0,f.getReducedPrivacyMode)(t)){case f.ReducedPrivacyMode.E2EE:r.push((0,p.genEncryptNotificationMsg)(e));break;case f.ReducedPrivacyMode.BSP:r.push((0,p.genNonE2ENotificationMsg)(e,"biz_privacy_mode_init_bsp"));break;case f.ReducedPrivacyMode.FB:r.push((0,p.genNonE2ENotificationMsg)(e,"biz_privacy_mode_init_fb"))}return n===d.BizBotAutomatedType.PARTIAL_1P&&(0,c.hasAcceptedBizBotTos)()&&r.push((0,u.genBizBot1pDisclosureMessage)(e)),r}))).apply(this,arguments)}},21132:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderEphemeralExemptionSystemMsg=function(e){return(0,r.genNotificationMsg)(e,{type:"notification_template",subtype:"order_ephemeral_exemption",templateParams:[]})};var r=n(45218)},60019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReducedPrivacyMode=void 0,t.comparePrivacyMode=function(e,t){if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return-1;return e.privacyModeTs-t.privacyModeTs},t.getLatestPrivacyMode=function(e,t){if(null==e)return t;if(null==t)return e;return e.privacyModeTs>t.privacyModeTs?e:t},t.getPrivacyModeFromQueryExistResponse=function(e){var t;const n=null===(t=e.bizInfo)||void 0===t?void 0:t.verifiedName;if(null==n)return null;return e.biz&&!0===n.isApi?n.privacyMode:null},t.getReducedPrivacyMode=function(e){if(null==e||e.actualActors===r.ActualActorsEnumType.Self&&e.hostStorage===r.HostStorageEnumType.OnPremise)return i.E2EE;if(e.hostStorage===r.HostStorageEnumType.Facebook)return i.FB;return i.BSP};var r=n(12987);const i=n(76672).Mirrored(["E2EE","BSP","FB"]);t.ReducedPrivacyMode=i},71170:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genSagaInitSystemMsg=function(e){return(0,r.genNotificationMsg)(e,{type:"notification_template",subtype:"saga_init",templateParams:[]})};var r=n(45218)},25206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version=t.SANITIZED_VERSION_STR=void 0,t.sanitizeVersionStr=s;var r=n(66911),i=n(28123);class o extends((0,r.customError)("InvalidVersion")){}class a{constructor(e){const t=e.split(".");if(3!==t.length)throw new o("Version format does not contain 3 numbers.");if(this.primary=Number.parseInt(t[0],10),this.secondary=Number.parseInt(t[1],10),this.tertiary=Number.parseInt(t[2],10),Number.isNaN(this.primary)||Number.isNaN(this.secondary)||Number.isNaN(this.tertiary))throw new o("Version contains a non-parseable string.")}lt(e){let t=e;return"string"==typeof t&&(t=new a(t)),this.primary<t.primary||this.primary===t.primary&&this.secondary<t.secondary||this.primary===t.primary&&this.secondary===t.secondary&&this.tertiary<t.tertiary}equals(e){let t=e;return null!=t&&""!==t&&("string"==typeof t&&(t=new a(t)),this.primary===t.primary&&this.secondary===t.secondary&&this.tertiary===t.tertiary)}toString(){return`${this.primary}.${this.secondary}.${this.tertiary}`}}function s(e){return e.replace(/\.[di]$/,"")}t.Version=a;const l=s(i.VERSION_STR);t.SANITIZED_VERSION_STR=l},35894:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dataURLtoBlob=function(e){const t=e.match(o);if(!t)throw(0,i.default)("invalid data URI");const n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),r=!!t[4],a=e.slice(t[0].length);let s;s=r?atob(a):decodeURIComponent(a);const l=new ArrayBuffer(s.length),u=new Uint8Array(l);for(let e=0;e<s.length;e+=1)u[e]=s.charCodeAt(e);return new Blob([u],{type:n})};var i=r(n(89482));const o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/},31565:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findLink=u,t.findLinks=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=(0,o.findLinks)(e,t);return r.map((e=>c(e,n)))},t.hasHttpLink=function(e){return null!=e.body&&null!=u(e.body,!0)},Object.defineProperty(t,"validateEmail",{enumerable:!0,get:function(){return o.validateEmail}});var i=r(n(81109)),o=n(50872),a=n(35685),s=n(96955),l=n(3885);function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=(0,o.findLink)(e,t);if(null!=r)return c(r,n)}function c(e,t){var n;const r=(0,l.getMaybeMeUser)();let o=null;if(t&&r){const n=t.isLid()?(0,s.toLidUserJid)(t.user):(0,s.toPhoneUserJid)(t.user);o=(0,a.findSuspiciousCharacters)(e.domain,n,(0,s.toPhoneUserJid)(r.user),[])}return(0,i.default)((0,i.default)({},e),{},{suspiciousCharacters:null!==(n=o)&&void 0!==n?n:void 0})}},32890:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(88306)),o=r(n(2525)),a=n(62089),s=n(89323),l=n(83599),u=n(25303),c=n(35894),d=n(26086),p=r(n(14602)),f=n(95160);const _=/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,g="https://l.wl.co/l";var h={URL_REGEX:_,build(e,t){const n=new p.default;return(0,o.default)(t||{},((e,t)=>{n.set(t,e)})),`${e}?${n.toString()}`},canMuckHistory(){var e;return(0,f.isWorker)()?(__LOG__(4,void 0,new Error)`WAWebURLUtils: should not call canMuckHistory() from worker runtimes`,!1):!(!(null===(e=window.history)||void 0===e?void 0:e.pushState)||!self.location)},relToAbs:e=>new URL(e,self.location.href).href,hostname:(0,i.default)((function(e){try{return new URL(this.isHttp(e)?e:"http://"+e).hostname}catch(e){return""}})),withoutWww:function(e){return e.split("www.").join("")},isHttp:e=>e&&("https://"===e.toLowerCase().substring(0,8)||"http://"===e.toLowerCase().substring(0,7)),isHttps:e=>e&&"https://"===e.toLowerCase().substring(0,8),hasValidUrlScheme(e){const t=e.trim().toLowerCase();return["irc://","ftp://","mailto:","http://","https://","whatsapp://","ms-windows-store://"].some((e=>0===t.indexOf(e)))},isBlob:e=>(0,u.isString)(e)&&"blob:"===e.substring(0,5),isData:e=>(0,u.isString)(e)&&"data:"===e.substring(0,5),parseDataURL(e){const t=e.indexOf(":"),n=e.indexOf(";"),r=e.indexOf(",");return{mimetype:e.substring(t+1,n),data:e.substring(r+1)}},dataURLtoFile(e){const t=this.parseDataURL(e).mimetype;return(0,d.createFile)([(0,c.dataURLtoBlob)(e)],"",{type:t})},GSM_NAME:"gme-whatsappinc",GSM_NUMS:"LM4NgcjF-X_EedaZ6MwPVSH0Sac=",gsmURL(e,t){const n=t.replace(/\-/g,"+").replace(/_/g,"/"),r=(0,a.decodeB64)(n),i=new URL(e),o=(i.pathname||"")+(i.search||""),u=s.Binary.build(o).readByteArray();return(0,l.hmacSha1)(r,u).then((t=>`${e}&signature=${(0,a.encodeB64UrlSafe)(t)}`))},thumbToCSSURL(e){return`url("${this.isHttp(e)||e.startsWith("data:")?e:`data:image/jpeg;base64,${e}`}")`},thumbAsBackgroundImage(e){return e?{backgroundImage:this.thumbToCSSURL(e)}:{}},isValid:e=>_.test(e),toMaliciousSiteRedirect:e=>""===e||0===e.indexOf(g)?e:`${g}?u=${encodeURIComponent(e)}`};t.default=h},37396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(83741),i=n(52765);var o={isVoiceCallEnabled:function(){let e=!1;return e=(0,i.isFeatureEnabled)("web_voip_voice_call"),e},isVideoCallEnabled:function(){let e=!1;return e=(0,i.isFeatureEnabled)("web_voip_video_call"),e},isGroupCallEnabled:function(){return!1},isStatefulEnumerationEnabled:function(){let e=!1;return e=(0,r.getABPropConfigValue)("web_abprop_stateful_enumeration_enabled"),e},isDeviceAgnosticVoip:function(){let e=!1;return e=(0,r.getABPropConfigValue)("web_abprop_device_agnostic_voip"),e}};t.default=o},15264:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageChatTypeFromWid=function(e){if(e.isUser())return r.MESSAGE_CHAT_TYPE.INDIVIDUAL;if(e.isGroup())return r.MESSAGE_CHAT_TYPE.GROUP;if(e.isBroadcast())return r.MESSAGE_CHAT_TYPE.BROADCAST;if(e.isStatusV3())return r.MESSAGE_CHAT_TYPE.STATUS;if(e.isNewsletter())return r.MESSAGE_CHAT_TYPE.CHANNEL;return r.MESSAGE_CHAT_TYPE.OTHER};var r=n(56710)},16130:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MISMATCH_ORIGIN_TYPE",{enumerable:!0,get:function(){return l.MISMATCH_ORIGIN_TYPE}}),t.logAddressingModeMismatch=function(e){if(!(0,o.getABPropConfigValue)("web_extra_lid_group_logging_attributes"))return;new a.AddressingModeMismatchWamEvent((0,i.default)((0,i.default)({},e),{},{localAddressingMode:(0,s.getWamAddressingModeFromString)(e.localAddressingMode),serverAddressingMode:(0,s.getWamAddressingModeFromString)(e.serverAddressingMode)})).commit()};var i=r(n(81109)),o=n(83741),a=n(77725),s=n(69320),l=n(98563)},69320:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddressingModeMetricsFromGroupMetadata=function(e){if(!(0,r.getABPropConfigValue)("web_extra_lid_group_logging_attributes"))return{};if(null==e.isLidAddressingMode)return{};return{localAddressingMode:a(e.isLidAddressingMode)}},t.getWamAddressingModeFromIsLidBoolean=a,t.getWamAddressingModeFromString=function(e){if(e===i.STANZA_MSG_ADDRESSING_MODE.lid)return o.ADDRESSING_MODE.LID;return o.ADDRESSING_MODE.PN};var r=n(83741),i=n(33351),o=n(55220);function a(e){switch(e){case!0:return o.ADDRESSING_MODE.LID;case!1:return o.ADDRESSING_MODE.PN}}},50611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WAM_WORKER_DATA_BATCH_SIZE=t.WAM_ROTATE_INTERVAL_IN_SECONDS=t.WAM_PROTOCOL_VERSION=t.WAM_MAX_BUFFER_SIZE=t.PENDING_DELAY_IN_SECONDS=void 0;t.PENDING_DELAY_IN_SECONDS=10;t.WAM_MAX_BUFFER_SIZE=5e4;t.WAM_PROTOCOL_VERSION=5;t.WAM_ROTATE_INTERVAL_IN_SECONDS=300;t.WAM_WORKER_DATA_BATCH_SIZE=100},98701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cacheGroupMetrics=function(e){if(null==e.participants||null==e.senderKey)return;o.set(e.groupId,Promise.resolve((0,i.getGroupMetricsFromDbRecord)(e)))},t.getGroupMetrics=function(e){if(!e.isGroup())return Promise.resolve(null);const t=e.toString();o.has(t)||o.set(t,function(e){return(0,r.getParticipantTable)().get(e).then((e=>e&&(0,i.getGroupMetricsFromDbRecord)(e))).catch((t=>{__LOG__(3)`_getGroupMetricsFromDb: failed to get for ${e}: ${t}`}))}(t));return o.get(t)||Promise.resolve(null)};var r=n(23440),i=n(75594);const o=new Map},75594:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.capCount=a,t.getGroupCountMetricsFromGroupMetadata=function(e){let t=Object.freeze({});const n=e.participants.length;null!=n&&(t=(0,i.default)({participantCount:a(n)},t));const r=e.cachedDeviceCount;null!=r&&(t=(0,i.default)({deviceCount:a(r)},t));return t},t.getGroupMetricsFromDbRecord=function(e){return{participantCount:a(e.participants.length),deviceCount:a(e.senderKey.size),deviceSizeBucket:(0,o.default)(e.senderKey.size)}};var i=r(n(81109)),o=r(n(26398));function a(e){return Math.max(e,32)}},65904:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logLoginSuccess=function(e){const t=new o.LoginWamEvent;return t.set({connectionOrigin:e,loginResult:a.LOGIN_RESULT_TYPE.OK,loginT:Math.floor(self.performance.now()-(0,i.default)(s,"loginStartT"))}),t.commitAndWaitForFlush()},t.markLoginStartT=function(){s=self.performance.now()};var i=r(n(49619)),o=n(33622),a=n(13581);let s},26398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e<32)return r.SIZE_BUCKET.LT32;if(e<64)return r.SIZE_BUCKET.LT64;if(e<128)return r.SIZE_BUCKET.LT128;if(e<256)return r.SIZE_BUCKET.LT256;if(e<512)return r.SIZE_BUCKET.LT512;if(e<1024)return r.SIZE_BUCKET.LT1024;if(e<1500)return r.SIZE_BUCKET.LT1500;if(e<2e3)return r.SIZE_BUCKET.LT2000;if(e<2500)return r.SIZE_BUCKET.LT2500;if(e<3e3)return r.SIZE_BUCKET.LT3000;if(e<3500)return r.SIZE_BUCKET.LT3500;if(e<4e3)return r.SIZE_BUCKET.LT4000;if(e<4500)return r.SIZE_BUCKET.LT4500;if(e<5e3)return r.SIZE_BUCKET.LT5000;return r.SIZE_BUCKET.LARGEST_BUCKET};var r=n(96323)},56203:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineResumeReporter=void 0,t.countDays=I,t.roundUp=v;var i=r(n(48926)),o=n(65982),a=n(44369),s=n(29987),l=n(83741),u=n(97754),c=n(72406),d=n(75949),p=n(41307),f=n(62162),_=n(97023),g=n(56333),h=n(51469),A=n(11603),m=n(86038);const E=n(76672).Mirrored(["ResumeFromRestart","ResumeFromOpentab"]);class y{constructor(e){this._mode=e}start(){(0,l.getABPropConfigValue)("web_offline_resume_qpl_enabled")&&(this.drop(),this._qplEvent=f.QPL.markerStart(p.QuickLogMarkerId.OFFLINE_RESUME,{annotations:{string:{mode:E.getName(this._mode)}}}))}end(){var e;null===(e=this._qplEvent)||void 0===e||e.end(a.QuickLogActionType.SUCCESS)}drop(){var e;null===(e=this._qplEvent)||void 0===e||e.drop(),this._qplEvent=void 0}_addPoint(e,t){var n;const r=null!=t?{data:t}:{};null===(n=this._qplEvent)||void 0===n||n.addPoint(e,r)}markOfflinePreviewReceived(){this._addPoint("offlinePreviewReceived")}markMainScreenLoad(){this._addPoint("mainScreenLoad")}markSocketConnect(){this._addPoint("socketConnect")}setAnnotations(e){var t;null===(t=this._qplEvent)||void 0===t||t.annotate({int:{messageCount:e.messageCount,receiptCount:e.receiptCount,notificationCount:e.notificationCount,sizeBytes:e.sizeBytes,chatThreadCount:e.chatThreadCount,decryptErrorCount:e.decryptErrorCount}})}}class S{constructor(e,t){this._sessionId=t,this._offlineStartT=self.performance.now(),this._resuemMode=e}_commitOfflineStage(e){const t=new c.OfflineResumeStageWamEvent({offlineSessionId:this._sessionId,offlineResumeMode:this._resuemMode===E.ResumeFromOpentab?h.OFFLINE_RESUME_MODES.RESUME_FROM_OPEN_TAB:h.OFFLINE_RESUME_MODES.RESUME_FROM_RESTART,offlineStageTimestampMs:Math.floor(self.performance.now()-this._offlineStartT),currentOfflineStage:e});this._addOfflineMetadata(t),t.commit()}logOfflineStart(){this._offlineStartT=self.performance.now()}logSocketConnect(){this._commitOfflineStage(A.OFFLINE_RESUME_STAGES.SOCKET_CONNECT)}logProcessComplete(){this._commitOfflineStage(A.OFFLINE_RESUME_STAGES.PROCESS_COMPLETE)}logScreenLoad(){this._commitOfflineStage(A.OFFLINE_RESUME_STAGES.SCREEN_LOAD)}logOfflinePreview(){this._commitOfflineStage(A.OFFLINE_RESUME_STAGES.OFFLINE_PREVIEW)}logOfflineCount(e){this._offlineMessageCount=(this._offlineMessageCount||0)+e.message,this._offlineReceiptCount=(this._offlineReceiptCount||0)+e.receipt,this._offlineNotificationCount=(this._offlineNotificationCount||0)+e.notification}logOfflineDecryptionErrorCount(e){this._offlineDecryptErrorCount=e}logOfflineChatThreadCount(e){this._chatThreadCount=e}logOldestStanzaTime(e){(null==this._oldestStanzaTs||this._oldestStanzaTs>e)&&(this._oldestStanzaTs=e)}setLastPushCompleteTimestamp(){this._lastPushCompleteTimestampMs=(0,_.getLastPushCompleteTimestamp)()}_addOfflineMetadata(e){null!=this._offlineMessageCount&&(e.offlineMessageCount=v(this._offlineMessageCount,10)),null!=this._offlineReceiptCount&&(e.offlineReceiptCount=v(this._offlineReceiptCount,10)),null!=this._offlineNotificationCount&&(e.offlineNotificationCount=v(this._offlineNotificationCount,10)),null!=this._oldestStanzaTs&&(e.mailboxAge=I(this._oldestStanzaTs)),null!=this._offlineDecryptErrorCount&&(e.offlineDecryptErrorCount=this._offlineDecryptErrorCount),null!=this._chatThreadCount&&(e.chatThreadCount=v(this._chatThreadCount,10)),null!=this._lastPushCompleteTimestampMs&&e.currentOfflineStage===A.OFFLINE_RESUME_STAGES.SOCKET_CONNECT&&(e.lastPushTimestampMs=this._lastPushCompleteTimestampMs,(0,_.clearLastPushCompleteTimestamp)(),this._lastPushCompleteTimestampMs=null)}}function v(e,t){return Math.round(e/t)*t}function I(e){if(0===e)return 0;const t=(0,s.unixTime)()-e;return Math.round(t/s.DAY_SECONDS)}const T=new class{constructor(){this._initEvents(E.ResumeFromRestart)}_initEvents(e){this.isInitialSync=!1,this.oldestStanzaTs=0,this.offlineResume=new d.OfflineResumeWamEvent,this.offlineResume.offlineMessageCount=0,this.offlineResume.offlineReceiptCount=0,this.offlineResume.offlineNotificationCount=0,this.offlineResume.offlineDecryptErrorCount=0,this.offlineResume.offlineSizeBytes=0,this.offlineResume.chatThreadCount=0,this.offlineResume.preackMessageCount=0,this.offlineResume.preackReceiptCount=0,this.offlineResume.isOfflineCompleteMissed=!1,this.qpl=new y(e);const t=this._generateOfflineSessionId();this.offlineStage=new S(e,t),this.endTableUsageMetric=(0,u.beginDBTableUsage)(m.WEB_SCENARIO_CODE.OFFLINE_RESUME,new Set(["message","chat","participant","group-metadata"]),t)}logOldestStanzaTime(e){this.offlineStage.logOldestStanzaTime(e),null!=this.offlineResume&&(0===this.oldestStanzaTs||this.oldestStanzaTs>e)&&(this.oldestStanzaTs=e)}logOfflineCount(e){this.offlineStage.logOfflineCount(e),this.offlineStage.logOfflinePreview(),this.offlineResume&&(this.offlineResume.offlineMessageCount+=e.message,this.offlineResume.offlineReceiptCount+=e.receipt,this.offlineResume.offlineNotificationCount+=e.notification)}logOfflineDecryptionErrorCount(e){this.offlineStage.logOfflineDecryptionErrorCount(e),this.offlineResume&&(this.offlineResume.offlineDecryptErrorCount=e)}logAddOfflineSizeBytes(e){this.offlineResume&&(this.offlineResume.offlineSizeBytes+=e)}logOfflineChatThreadCount(e){this.offlineStage.logOfflineChatThreadCount(e);const t=v(e,10);this.offlineResume&&(this.offlineResume.chatThreadCount=t)}logOfflinePreackCount(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.offlineResume&&(!0===t?this.offlineResume.preackMessageCount+=e:this.offlineResume.preackReceiptCount+=e)}logOfflinePassiveT(){var e;null==(null===(e=this.offlineResume)||void 0===e?void 0:e.passiveModeT)&&this._logPerformanceT("passiveModeT")}_logPerformanceT(e){const t=Math.floor(self.performance.now());null!=this.offlineResume&&(this.offlineResume[e]=t)}logLastStanzaT(){var e;null==(null===(e=this.offlineResume)||void 0===e?void 0:e.lastStanzaT)&&(this._logPerformanceT("lastStanzaT"),this.isInitialSync||this.offlineStage.logProcessComplete())}logMainScreenLoadT(){this._logPerformanceT("mainScreenLoadT"),this.qpl.markMainScreenLoad(),this.isInitialSync||this.offlineStage.logScreenLoad()}logOfflinePreviewT(){this._logPerformanceT("offlinePreviewT"),this.qpl.markOfflinePreviewReceived()}logOfflineStartT(){this.qpl.start(),this._logPerformanceT("pageLoadT"),this.offlineStage.logOfflineStart(),window.document&&this.offlineResume&&(this.offlineResume.isResumeInForeground=!document.hidden,document.addEventListener("visibilitychange",this.logResumeInBackground))}logSocketConnectT(){this._logPerformanceT("socketConnectT"),this.qpl.markSocketConnect(),this.isInitialSync||this.offlineStage.logSocketConnect()}logMissedOfflineComplete(){this.offlineResume&&(this.offlineResume.isOfflineCompleteMissed=!0)}setIsInitialSync(){this.isInitialSync=!0}logResumeInBackground(){this.offlineResume&&document.hidden&&(this.offlineResume.isResumeInForeground=!1)}setLastPushCompleteTimestamp(){return this.offlineStage.setLastPushCompleteTimestamp()}commit(){var e=this;return(0,i.default)((function*(){const t=e.offlineResume;t&&(t.offlineSizeBytes=v(t.offlineSizeBytes,1e3),t.offlineMessageCount=v(t.offlineMessageCount,10),t.offlineReceiptCount=v(t.offlineReceiptCount,10),t.offlineNotificationCount=v(t.offlineNotificationCount,10),t.mailboxAge=I(e.oldestStanzaTs),yield(0,g.setRecentMailboxAgeDays)(t.mailboxAge),__LOG__(2)`[offline-resume] offline resume completes
============== offline resume perf ================
message: ${t.offlineMessageCount}
receipt: ${t.offlineReceiptCount}
notification: ${t.offlineNotificationCount}
chatThreadCount: ${t.chatThreadCount}
offlineSizeBytes: ${t.offlineSizeBytes}
decryptError: ${t.offlineDecryptErrorCount}
preackMessageCount: ${t.preackMessageCount}
preackReceiptCount: ${t.preackReceiptCount}
lastStanzaT: ${t.lastStanzaT}
pageLoadT: ${t.pageLoadT}
connectionT: ${t.socketConnectT}
passiveModeT: ${t.passiveModeT}
offlinePreviewT: ${t.offlinePreviewT}
screenLoadT: ${t.mainScreenLoadT}
isResumeInForeground: ${t.isResumeInForeground}
mailboxAge: ${t.mailboxAge}
===================================================`,e.isInitialSync?e.qpl.drop():(t.commit(),e.qpl.setAnnotations({messageCount:t.offlineMessageCount,receiptCount:t.offlineReceiptCount,notificationCount:t.offlineNotificationCount,chatThreadCount:t.chatThreadCount,decryptErrorCount:t.offlineDecryptErrorCount,sizeBytes:t.offlineSizeBytes}),e.qpl.end(),e.endTableUsageMetric()),e.offlineResume=null,window.document&&document.removeEventListener("visibilitychange",e.logResumeInBackground))}))()}resetEvent(){null==this.offlineResume&&(this._initEvents(E.ResumeFromOpentab),this.logOfflineStartT())}_generateOfflineSessionId(){return`${(0,o.randomHex)(4)}${(0,s.unixTimeWithoutClockSkewCorrection)()}`}};t.OfflineResumeReporter=T},72207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatMeasureLabel=l,t.startMeasure=function(e){if(!i.USER_TIMINGS)return o;if(!a)return o;const t=(s.get(e)||0)+1;s.set(e,t);const n=l(1===t?e:`${e} (${t})`),r=`${n}: Start`,u=`${n}: End`;self.performance.mark(r);let c=!1;return{end(){if(c)return;c=!0;const t=s.get(e)||0;t>1?s.set(e,t-1):s.delete(e),self.performance.mark(u),self.performance.measure(n,r,u)}}};var r,i=n(28123);const o={end(){}},a=(null===(r=self.performance)||void 0===r?void 0:r.mark)&&self.performance.measure,s=new Map;function l(e){return` ${e}`}},53559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWamPlatform=function(){if((0,r.isCurrentWebSessionInsidePwa)())return"PWA";return"WEB"};var r=n(94226)},27931:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(50611),a=n(27482),s=r(n(62419)),l=r(n(89482));function u(){return(u=(0,i.default)((function*(e,t,n){return(yield s.default.idb()).wam.add({key:e,buffer:n,channel:t},e).catch((e=>{__LOG__(2)`add failed: ${e}\n${null==e?void 0:e.stack}`}))}))).apply(this,arguments)}function c(){return(c=(0,i.default)((function*(e,t,n){let r=0;try{r=yield s.default.idb().then((r=>r.wam.update(e,{key:e,buffer:n,channel:t})))}catch(e){__LOG__(2)`update failed: ${e}\n${null==e?void 0:e.stack}`}return 0!==r}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){const t={};try{yield s.default.idb().then((n=>n.wam.where("channel").equals(e).modify(((e,n)=>{t[e.key]=e.buffer,delete n.value}))))}catch(e){__LOG__(2)`deleteAll failed: ${e}\n${null==e?void 0:e.stack}`}return t}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){let t=-1;try{const n=yield s.default.idb();yield n.transaction("rw",["wam_meta"],(0,i.default)((function*(){0===(yield n.wam_meta.where("streamId").equals(e).count())?(yield n.wam_meta.add({streamId:e,seqNum:1}),t=1):yield n.wam_meta.where("streamId").equals(e).modify((function(e){return t=e.seqNum+1,t>=65536&&(t=1),e.seqNum=t,e}))})))}catch(e){__LOG__(2)`getNextSequenceNumberForStream failed: ${e}\n${null==e?void 0:e.stack}`}if(-1===t)throw(0,l.default)(`could not get seq number for streamId ${e}`);return t}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t){const n=yield s.default.idb();return n.transaction("rw",["core_wam","core_wam_meta"],(()=>n.core_wam.put(t).then((()=>n.core_wam_meta.put(e)))))}))).apply(this,arguments)}function _(){return(_=(0,i.default)((function*(e){return(yield s.default.idb()).core_wam.where("streamId").equals(e).modify({finished:!0})}))).apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){return(yield s.default.idb()).core_wam_meta.get({streamId:e})}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(){return(yield s.default.idb()).core_wam.toArray()}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){const e=yield s.default.idb();return e.transaction("rw",["core_wam","core_wam_meta"],(()=>e.core_wam.clear().then((()=>e.core_wam_meta.clear()))))}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){return(yield s.default.idb()).core_wam.delete(e)}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){const t=yield s.default.idb();return t.transaction("rw",["worker_wam_events"],(()=>t.worker_wam_events.put(e)))}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(){const e=yield s.default.idb();try{yield e.transaction("rw",["worker_wam_events"],(0,i.default)((function*(){yield e.worker_wam_events.limit(o.WAM_WORKER_DATA_BATCH_SIZE).modify(((e,t)=>{(0,a.processWorkerWamDataRow)(e),delete t.value}))})));return(yield e.worker_wam_events.count())>0}catch(e){return __LOG__(2)`processWorkerWamData failed: ${e}\n${null==e?void 0:e.stack}`,!1}}))).apply(this,arguments)}var S={add:function(){return u.apply(this,arguments)},update:function(){return c.apply(this,arguments)},deleteAll:function(){return d.apply(this,arguments)},getNextSequenceNumberForStream:function(){return p.apply(this,arguments)},addCoreWamBuffer:function(){return f.apply(this,arguments)},finishAllCoreWamBuffers:function(){return _.apply(this,arguments)},getCoreWamStartingSequenceNumber:function(){return g.apply(this,arguments)},getAllCoreWamBuffers:function(){return h.apply(this,arguments)},nukeAllCoreWamBuffers:function(){return A.apply(this,arguments)},removeWamBufferByKey:function(){return m.apply(this,arguments)},storeWorkerWamData:function(){return E.apply(this,arguments)},processWorkerWamData:function(){return y.apply(this,arguments)},removePsMeta:function(e){return s.default.idb().then((t=>t.ps_meta.bulkDelete(e))).catch((e=>{__LOG__(2)`removePsMeta failed: ${e}\n${null==e?void 0:e.stack}`}))},getPsMeta:function(){return s.default.idb().then((e=>e.ps_meta.toArray())).catch((e=>(__LOG__(2)`getPsMeta failed: ${e}\n${null==e?void 0:e.stack}`,[])))},addPsMeta:function(e){return s.default.idb().then((t=>t.ps_meta.bulkPut(e))).catch((e=>{__LOG__(2)`addPsMeta failed: ${e}\n${null==e?void 0:e.stack}`}))},updatePsMeta:function(e){return s.default.idb().then((t=>t.ps_meta.update(e.key,e))).catch((e=>{__LOG__(2)`updatePsMeta failed: ${e}\n${null==e?void 0:e.stack}`}))},getPsToken:function(){return s.default.idb().then((e=>e.ps_tokens.get("token"))).catch((e=>{__LOG__(2)`getPsToken failed: ${e}\n${null==e?void 0:e.stack}`}))},savePsToken:function(e){return s.default.idb().then((t=>t.transaction("rw",["ps_tokens"],(()=>t.ps_tokens.put(e))))).catch((e=>{__LOG__(2)`savePsToken failed: ${e}\n${null==e?void 0:e.stack}`}))}};t.default=S},33763:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHash=void 0,t.defineTypeHash=function(e,t,n){const r={$className:{value:e}};for(const n in t){const l=t[n],u="string"==typeof l||"function"==typeof l?{type:l}:l;var s;if(null==u||"object"!=typeof u)throw(0,i.default)(`${e} specified with non-object ${null!==(s=JSON.stringify(u))&&void 0!==s?s:"undefined"}`);r[n]={enumerable:!0,get:o(n),set:a(n,u)}}class l extends n{constructor(e){super(),this.all={},e&&this.set(e)}}return Object.defineProperties(l.prototype,r),l};var i=r(n(89482));function o(e){return function(){return this.all[e]}}function a(e,t){const n=t.type,r=t.set;return function(t){if(t!==this.all[e]){if(null==t);else if("function"==typeof n){if(!n(t))throw __LOG__(2)`type-validator fails ${t}`,new TypeError(`${this.$className}.${e} type-validator failed`)}else if(typeof t!==n)throw new TypeError(`${this.$className}.${e} requires type ${n}, got ${String(t)}`);r&&r.call(this,t),this.all[e]=t}}}t.TypeHash=class{set(e){for(const t in e)this[t]=e[t]}}},27482:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.forceFlushAllWamBuffers=function(){return(new f.WebWamForceFlushWamEvent).commitAndWaitForFlush(!0)},t.getAppBuild=function(){return c.APP_BUILD_TYPE.RELEASE},t.getAppIsBetaRelease=function(){return(0,s.getWhatsAppWebExternalBetaJoinedIdb)()},t.getChannelFromBufferKey=function(e){return"regular"===e?"regular":"private"},t.getWamEnv=function(){return d.WEBC_ENV_CODE.PROD},t.isWamBufferTooLong=function(e){let t=!0;try{const n=new o.Binary((0,i.decodeB64)(e));t=n.size()>u.WAM_MAX_BUFFER_SIZE}catch(e){__LOG__(4,void 0,new Error)`dropping invalid wam buffer`}return t},t.logPsIdUpdate=function(e,t,n){new a.PsIdUpdateWamEvent({psIdAction:e,psIdKey:t,psIdRotationFrequence:n}).commit()},t.maybeForwardWamAttributeToJestE2e=function(){},t.maybeForwardWamEventToJestE2e=function(){},t.processWorkerWamDataRow=function(e){const{action:t,name:n,payload:r}=e;return"commit"===t?function(e,t){const n=JSON.parse(t),r=l.events[e];if(null==r)return __LOG__(4,void 0,new Error,!0)`WAM: commitWorkerWamEvent failed, ${e} is not defined`,void SEND_LOGS("wam-worker-event-undefined-error");new r(n).commit()}(n,r):function(e,t){const{value:n}=JSON.parse(t);p.Global.set({[e]:n})}(n,r)};r(n(81109));var i=n(62089),o=n(89323),a=n(58473),s=n(97023),l=n(76042),u=n(50611),c=n(66678),d=n(74801),p=n(53047),f=n(22991);r(n(89482))},68231:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerOfflineResumeReporter=void 0;var i=r(n(48926)),o=n(65982),a=n(78494),s=n(29987),l=n(28123),u=n(95160),c=n(97023),d=n(56333),p=n(38117),f=n(87863),_=n(56203),g=n(74012);const h=new class{constructor(){this._processingStageTimer=null,this._sessionId=this._generateOfflineSessionId(),this._runReason=p.OFFLINE_PROCESS_RUN_REASONS.PUSH_NOTIFICATION,this.pageLoadT=self.performance.now(),this._offlineMessageCount=0,this._offlineReceiptCount=0,this._offlineNotificationCount=0,this._oldestStanzaTs=0,this._offlineDecryptErrorCount=0,this._processedMessageCount=0,this._processedNotificationCount=0}_generateOfflineSessionId(){return`${(0,o.randomHex)(4)}${(0,s.unixTimeWithoutClockSkewCorrection)()}`}_commit(e,t){const n=new g.WebcOfflineNotificationProcessWamEvent({offlineProcessSessionId:this._sessionId,offlineProcessStageTimestampMs:t,currentOfflineProcessStage:e,swVersion:l.VERSION_BASE,runReason:this._runReason});e!==f.OFFLINE_PROCESS_STAGES.PROCESSING&&e!==f.OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE&&e!==f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED||this._addOfflineProcessMetadata(n),e===f.OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||e===f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED?n.commitAndWaitForFlush(!0):n.commit()}_addOfflineProcessMetadata(e){var t,n,r,i;e.offlineProcessMessageCount=(0,_.roundUp)(null!==(t=this._processedMessageCount)&&void 0!==t?t:0,10),e.offlineProcessNotificationCount=(0,_.roundUp)(null!==(n=this._processedNotificationCount)&&void 0!==n?n:0,10),e.offlineProcessMailboxAge=(0,_.countDays)(null!==(r=this._oldestStanzaTs)&&void 0!==r?r:0),e.offlineProcessDecryptErrorCount=null!==(i=this._offlineDecryptErrorCount)&&void 0!==i?i:0}_refreshProcessingStage(){null==this._processingStageTimer&&(this._processingStageTimer=new a.ShiftTimer((()=>{if(this._currentStage!==f.OFFLINE_PROCESS_STAGES.PROCESSING)return;const e=Math.floor(self.performance.now()-this.pageLoadT);if(__LOG__(2)`[offline-resume][worker] worker offline processing progress updates
======= worker offline processing update ========
ProcessedMessage: ${this._processedMessageCount}
ProcessedNotification: ${this._processedNotificationCount}
currentProcessingT: ${e}
=================================================`,e>12e4)return __LOG__(4,void 0,new Error,!0)` [offline-resume][worker] worker offline processing takes too long`,void SEND_LOGS("worker-offline-process-takes-too-long");this._commit(f.OFFLINE_PROCESS_STAGES.PROCESSING,e),this._refreshProcessingStage()}))),this._processingStageTimer.onOrAfter(1e4)}_startProcessingStage(){var e;this._currentStage=f.OFFLINE_PROCESS_STAGES.PROCESSING,null===(e=this._processingStageTimer)||void 0===e||e.cancel(),this._refreshProcessingStage()}_printProcessingPerf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;__LOG__(2)`[offline-resume][worker] worker offline processing ends
========= worker offline processing perf ==========
message: ${this._offlineMessageCount}
receipt: ${this._offlineReceiptCount}
notification: ${this._offlineNotificationCount}
ProcessedMessage: ${this._processedMessageCount}
ProcessedNotification: ${this._processedNotificationCount}
decryptError: ${this._offlineDecryptErrorCount}
pageLoadT: 0
socketConnectT: ${this.socketConnectT}
offlinePreviewT: ${this.offlinePreviewT}
processCompleteT: ${this.processCompleteT}
mailboxAge: ${e}
isInterrupted: ${this._currentStage===f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED}
runReason: ${this._runReason}
===================================================`}getCurrentStage(){return this._currentStage}updateOldestStanzaTime(e){(null==this._oldestStanzaTs||this._oldestStanzaTs>e)&&(this._oldestStanzaTs=e)}updateOfflineCount(e){this._offlineMessageCount=e.message,this._offlineReceiptCount=e.receipt,this._offlineNotificationCount=e.notification}updateOfflineDecryptionErrorCount(e){this._offlineDecryptErrorCount=e}updateProcessedMessageCount(){(0,u.isWorker)()&&(this._processedMessageCount+=1)}updateProcessedNotificationCount(){(0,u.isWorker)()&&(this._processedNotificationCount+=1)}logWorkerInitialized(e){this._currentStage=f.OFFLINE_PROCESS_STAGES.PAGE_LOAD,this._runReason=e,this._commit(f.OFFLINE_PROCESS_STAGES.PAGE_LOAD,0)}logSocketConnect(){this._currentStage=f.OFFLINE_PROCESS_STAGES.SOCKET_CONNECT;const e=Math.floor(self.performance.now()-this.pageLoadT);this.socketConnectT=e,this._commit(f.OFFLINE_PROCESS_STAGES.SOCKET_CONNECT,e)}logOfflinePreview(){this._currentStage=f.OFFLINE_PROCESS_STAGES.OFFLINE_PREVIEW;const e=Math.floor(self.performance.now()-this.pageLoadT);this.offlinePreviewT=e,this._commit(f.OFFLINE_PROCESS_STAGES.OFFLINE_PREVIEW,e),this._startProcessingStage()}logProcessComplete(){var e=this;return(0,i.default)((function*(){var t;if(e._currentStage===f.OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||e._currentStage===f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)return;e._currentStage=f.OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE,null===(t=e._processingStageTimer)||void 0===t||t.cancel(),e._processingStageTimer=null;const n=(0,_.countDays)(e._oldestStanzaTs);yield(0,d.setRecentMailboxAgeDays)(n);const r=Math.floor(self.performance.now()-e.pageLoadT);e.processCompleteT=r,e._printProcessingPerf(n),e._commit(f.OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE,r),(0,c.setLastPushCompleteTimestamp)((0,s.unixTimeMs)())}))()}logProcessInterrupted(){var e;if(null==this._currentStage||this._currentStage===f.OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||this._currentStage===f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)return;this._currentStage=f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,null===(e=this._processingStageTimer)||void 0===e||e.cancel(),this._processingStageTimer=null;const t=Math.floor(self.performance.now()-this.pageLoadT);this.processCompleteT=t,this._printProcessingPerf(),this._commit(f.OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,t)}};t.WorkerOfflineResumeReporter=h},53047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateStatsAllIds=t.Global=void 0;var r=n(76042),i=n(66678),o=n(22950),a=n(53476),s=n(74801),l=n(57440);const{BOOLEAN:u,INTEGER:c,STRING:d}=r.TYPES,p=(0,r.defineGlobal)({abKey2:[4473,d,["regular"]],appBuild:[1657,i.APP_BUILD_TYPE,["regular","private"]],appIsBetaRelease:[21,u,["regular","private"]],appVersion:[17,d,["regular","private"]],browser:[779,d,["regular"]],browserVersion:[295,d,["regular"]],datacenter:[2795,d,["regular"]],deviceClassification:[14507,o.DEVICE_CLASSIFICATION,["regular"]],deviceName:[13,d,["regular","private"]],deviceVersion:[4505,d,["regular"]],expoKey:[5029,d,["regular","private"]],mcc:[5,c,["regular","private"]],memClass:[655,c,["regular","private"]],mnc:[3,c,["regular","private"]],networkIsWifi:[23,u,["regular"]],ocVersion:[6251,c,["regular","private"]],osVersion:[15,d,["regular","private"]],platform:[11,a.PLATFORM_TYPE,["regular","private"]],psCountryCode:[6833,d,["private"]],psId:[6005,d,["private"]],serviceImprovementOptOut:[13293,u,["regular","private"]],streamId:[3543,c,["regular","private"]],wametaLoggerTestFilter:[15881,d,["regular","private"]],webcBucket:[875,d,["regular"]],webcEnv:[633,s.WEBC_ENV_CODE,["regular"]],webcNativeAutolaunch:[1009,u,["regular"]],webcNativeBetaUpdates:[1007,u,["regular"]],webcPhoneAppVersion:[1005,d,["regular"]],webcPhoneCharging:[783,u,["regular"]],webcPhoneDeviceManufacturer:[829,d,["regular"]],webcPhoneDeviceModel:[831,d,["regular"]],webcPhoneOsBuildNumber:[833,d,["regular"]],webcPhoneOsVersion:[835,d,["regular"]],webcPhonePlatform:[707,a.PLATFORM_TYPE,["regular"]],webcTabId:[3727,d,["regular"]],webcWebArch:[6605,d,["regular"]],webcWebDeviceManufacturer:[6599,d,["regular"]],webcWebDeviceModel:[6601,d,["regular"]],webcWebOsReleaseNumber:[6603,d,["regular"]],webcWebPlatform:[899,l.WEBC_WEB_PLATFORM_TYPE,["regular","private"]],yearClass:[689,c,["regular","private"]],yearClass2016:[2617,c,["regular","private"]]});t.Global=p;t.PrivateStatsAllIds=[{key:"DefaultPsId",keyHashInt:113760892,rotationPeriodDays:-1},{key:"IdPreMetrics",keyHashInt:56300709,rotationPeriodDays:-1},{key:"IdTtl90Days",keyHashInt:37887164,rotationPeriodDays:90},{key:"IdTtlDaily",keyHashInt:248614979,rotationPeriodDays:1},{key:"IdTtlMonthly",keyHashInt:191000728,rotationPeriodDays:30},{key:"IdTtlWeekly",keyHashInt:42196056,rotationPeriodDays:7}]},55220:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADDRESSING_MODE=void 0;const n=Object.freeze({PN:1,LID:2});t.ADDRESSING_MODE=n},2775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AGENT_ENGAGEMENT_ENUM_TYPE=void 0;const n=Object.freeze({DIRECT_CHAT:0,INVOKED:1,MEMBER:2});t.AGENT_ENGAGEMENT_ENUM_TYPE=n},59074:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANDROID_KEYSTORE_STATE_TYPE=void 0;const n=Object.freeze({NOT_AVAILABLE:1,SELF_TEST_FAILURE:2,ENC_KEY_READ_FAILURE:3,ENC_KEY_STORED_USED:4,ENC_KEY_PLAIN_DELETED:5,ENC_KEY_PLAIN_RECOVERED:6});t.ANDROID_KEYSTORE_STATE_TYPE=n},66678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_BUILD_TYPE=void 0;const n=Object.freeze({DEBUG:1,ALPHA:2,BETA:3,RELEASE:4});t.APP_BUILD_TYPE=n},7127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BIZ_CATALOG_TYPE=void 0;const n=Object.freeze({SHOPS:0,NATIVE:1});t.BIZ_CATALOG_TYPE=n},69318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_REASON=void 0;const n=Object.freeze({OTHER:0,NO_LONGER_NEEDED:1,NO_SIGN_UP:2,SPAM:3,OFFENSIVE_MESSAGES:4,OTP_DID_NOT_REQUEST:5});t.BLOCK_REASON=n},35347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BOT_TYPE=void 0;const n=Object.freeze({UNKNOWN:0,METABOT:1,BOT_1P_BIZ:2,BOT_3P_BIZ:3});t.BOT_TYPE=n},77281:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUSINESS_TYPE=void 0;const n=Object.freeze({SMB:1,API_DC:2,API:3});t.BUSINESS_TYPE=n},19457:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_STANZA_TYPE=void 0;const n=Object.freeze({OFFER:0,ACCEPT:1,REJECT:2,VIDEO:3,TERMINATE:4,ENC_REKEY:5,RELAYLATENCY:6,TRANSPORT:7,PREACCEPT:8,GROUP_UPDATE:9,MUTE_V2:10,INTERRUPTION:11,FLOWCONTROL:12,NOTIFY:13,OFFER_NOTICE:14,CALL_RELAY:15,MUTE:16,SCREEN_SHARE:17,UNKNOWN:18});t.CALL_STANZA_TYPE=n},70644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_GATED_REASON=void 0;const n=Object.freeze({TOS3:1,COUNTRY:2});t.CHAT_GATED_REASON=n},43063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_MUTED_TYPE=void 0;const n=Object.freeze({NOT_MUTED:1,MUTED_NO_NOTIFICATIONS:2,MUTED_SILENT_NOTIFICATIONS:3});t.CHAT_MUTED_TYPE=n},72349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_ORIGINS_TYPE=void 0;const n=Object.freeze({LID_USERNAME:1,LID_CTWA:2,OTHERS:3});t.CHAT_ORIGINS_TYPE=n},30549:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAT_TYPE=void 0;const n=Object.freeze({INDIVIDUAL:1,SMB:2,ENT:3,INTEROP:4});t.CHAT_TYPE=n},35126:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLLECTION=void 0;const n=Object.freeze({REGULAR:1,REGULAR_LOW:2,REGULAR_HIGH:3,CRITICAL_BLOCK:4,CRITICAL_UNBLOCK_LOW:5});t.COLLECTION=n},32103:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_ORIGIN_TYPE=void 0;const n=Object.freeze({PERSON:1,PUSH:2,OTHER:3,BACKOFF:4});t.CONNECTION_ORIGIN_TYPE=n},97272:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_SEQUENCE_STEP_TYPE=void 0;const n=Object.freeze({PUSH_OVERRIDES:1,PRIMARY:2,PUSH_FALLBACKS:4,HOST_FALLBACK:5,NO_DNS:6,SOFTLAYER:7,PRIMARY_HTTP:8,SOFTLAYER_HTTP:9,HOST_FALLBACK_HTTP:10,NO_DNS_HTTP:11});t.CONNECTION_SEQUENCE_STEP_TYPE=n},95734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRASH_TYPE=void 0;const n=Object.freeze({CRASH:0,OOM:1,MAIN_THREAD_STALL_3_SECONDS:15,MAIN_THREAD_STALL_30_SECONDS:2,MAIN_THREAD_STALL_60_SECONDS:16,MAIN_THREAD_STALL_POKED:17,MAIN_THREAD_STALL_DEBUG:3,AUDIO_TRANSCODING_ERROR:4,VIDEO_TRANSCODING_ERROR:5,ANR:6,CRITICAL_EVENT:7,UNHANDLED_EXCEPTION:8,APP_CRASH:9,NATIVE_CRASH:10,UFAD:11,EXPERIMENTAL_UFAD_DETECTION:12,UX_BREAKING_EXCEPTION:13,UX_GRACEFUL_RECOVERY_EXCEPTION:14});t.CRASH_TYPE=n},22950:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEVICE_CLASSIFICATION=void 0;const n=Object.freeze({MOBILE:0,TABLET:1,WEARABLES:2,VR:3,DESKTOP:4,FOLDABLE:5,AR_GLASS:6,UNDEFINED:100});t.DEVICE_CLASSIFICATION=n},3729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEVICE_TYPE=void 0;const n=Object.freeze({PRIMARY:1,COMPANION:2});t.DEVICE_TYPE=n},91258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DISAPPEARING_CHAT_INITIATOR_TYPE=void 0;const n=Object.freeze({CHAT:1,INITIATED_BY_ME:2,INITIATED_BY_OTHER:3,CHAT_PICKER:4,BIZ_UPGRADE_FB_HOSTING:5});t.DISAPPEARING_CHAT_INITIATOR_TYPE=n},11104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DNS_RESOLUTION_METHOD_TYPE=void 0;const n=Object.freeze({SYSTEM:1,GOOGLE:2,HARDCODED:3,NO_DNS:4});t.DNS_RESOLUTION_METHOD_TYPE=n},59032:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DSM_ERROR=void 0;const n=Object.freeze({INVALID_SENDER:1,MISSING_DSM:2,INVALID_DSM:3});t.DSM_ERROR=n},85334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E2E_CIPHERTEXT_TYPE=void 0;const n=Object.freeze({MESSAGE:0,PREKEY_MESSAGE:1,SENDER_KEY_MESSAGE:2,MESSAGE_SECRET_MESSAGE:3});t.E2E_CIPHERTEXT_TYPE=n},7356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E2E_DESTINATION=void 0;const n=Object.freeze({INDIVIDUAL:0,GROUP:1,LIST:2,STATUS:3,CHANNEL:4,INTEROP:5});t.E2E_DESTINATION=n},57095:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E2E_FAILURE_REASON=void 0;const n=Object.freeze({INVALID_MESSAGE:0,LEGACY_MESSAGE:1,INVALID_VERSION:2,PRE_KEY_MESSAGE_MISSING_PRE_KEY:3,PRE_KEY_MESSAGE_INVALID_KEY:4,UNTRUSTED_IDENTITY:5,NO_SESSION_AVAILABLE:6,PLAINTEXT_BYTE_MISMATCH:7,UNKNOWN_CIPHERTEXT_TYPE:8,UNKNOWN_CIPHERTEXT_VERSION:9,INVALID_PADDING:10,INVALID_PROTOCOL_BUFFER:11,INVALID_NUMBER_OF_MESSAGE_TYPES:12,INVALID_IMAGE_FILE_LENGTH:13,INVALID_IMAGE_FILE_SHA256:14,INVALID_IMAGE_MEDIA_URL:15,INVALID_IMAGE_MEDIA_KEY:16,INVALID_IMAGE_MIME_TYPE:17,UNKNOWN_V2_TAGS:18,INVALID_EDIT_VERSION:19,INVALID_HSM_NAMESPACE:20,INVALID_HSM_ELEMENT:21,UNKNOWN_PROTOCOL_MESSAGE_TYPE:22,DUPLICATE_MESSAGE:23,FINGERPRINT_IDENTITY_MISMATCH:24,FINGERPRINT_VERSION_MISMATCH:25,INVALID_ARGUMENT:26,INVALID_KEY:27,INVALID_KEY_ID:28,INVALID_MAC:29,NO_MEMORY:30,STALE_KEY_EXCHANGE:31,VRF_SIGNATURE_VERIFICATION_FAILED:32,ERROR_MINIMUM_VALUE:33,ERROR_UNKNOWN:34,INVALID_BROADCAST_STANZA_ATTRIBUTE:35,INVALID_LIST_REPLY_MESSAGE:36,INVALID_LIST_REPLY_ROW_IDENTIFIER:37,INVALID_BUTTONS_RESPONSE_MESSAGE:38,INVALID_BUTTONS_RESPONSE_BUTTON_IDENTIFIER:39,INVALID_ORDER_MESSAGE:40,ERROR_CANCELLED:41,FUTURE_MESSAGE:42,INVALID_EMPTY_PROTOBUF_NOT_ALLOWED:43,SELF_SEND:44,INVALID_MEDIA_MIME_TYPE_TEMPLATE_MESSAGE:45,INVALID_MEDIA_ENC_HASH:46,INVALID_IDENTITY:47,PASSTHROUGH:48,NOT_IN_PENDING_DEVICES:49,EDIT_TYPE_AND_PROTOCOL_MISMATCH:50,DECRYPTION_FAILED:51,DESERIALIZE_INVALID_PROTO_FORMAT:52,DESERIALIZE_RATCHET_KEY_BAD_FORMAT:53,DESERIALIZE_PK_INVALID_PROTO_FORMAT:54,DESERIALZE_PK_KEY_BAD_FORMAT:55,TOO_MANY_MESSAGES_IN_FUTURE:56,EMPTY_VERSION_CONTENT_SUFFIX:57,CONTENT_EXCEEDED_EXPECTED_LENGTH:58,GRP_INVALID_PROTO_FORMAT:59,GRP_INVALID_KEY_FORMAT:60,GRP_VERSION_CONTENT_EMPTY:61,GRP_INVALID_VERSION_CONTENT_LENGTH:62,GRP_SENDER_KEY_INVALID_PROTO_FORMAT:63,GRP_SENDER_KEY_PROTO_ERROR:64,GRP_TOO_MANY_MESSAGES_IN_FUTURE:65,MISSING_MESSAGE_SECRET:66,MESSAGE_SECRET_INVALID:67,INVALID_REACTION_TEXT:68,UNSUPPORTED_MESSAGE_TYPE:69,UNSUPPORTED_IN_INTEROP:70,TARGET_MESSAGE_NOT_FOUND:71,STATUS_FROM_HOSTED_DEVICE_UNSUPPORTED:72,GROUP_MESSAGE_FROM_HOSTED_DEVICE_UNSUPPORTED:73,BROADCAST_FROM_HOSTED_DEVICE_UNSUPPORTED:74,LIVE_LOCATION_FROM_HOSTED_DEVICE_UNSUPPORTED:75,MESSAGE_TYPE_MISMATCH:76,ERROR_SESSION_STATE_UNACKED_PKMSG_GET_BASE_KEY:77,ERROR_SIGNAL_MESSAGE_GET_SENDER_RATCHET_KEY:78,ERROR_SESSION_STATE_GET_ROOT_KEY:79,ERROR_SESSION_STATE_GET_SENDER_RATCHET_KEY_PAIR:80,ERROR_SESSION_STATE_SET_SENDER_CHAIN_KEY:81,ERROR_SESSION_STATE_FIND_RECEIVER_CHAIN:82,ERROR_SESSION_RECORD_DESERIALIZE:83,ERROR_SENDER_KEY_STATE_REMOVE_SENDER_MESSAGE_KEY:84,ERROR_EMPTY_PLAINTEXT_DATA:85,ERROR_MAC_LEN_MISMATCH:86,ERROR_INVALID_MAC_LEN:87,ERROR_INVALID_SIGNATURE_LEN:88,ERROR_SENDER_KEY_LOAD_KEY:89,ERROR_FAST_RATCHET_SENDER_KEY_LOAD_KEY:90,ERROR_UNKNOWN_LOAD_KEY:91,ERROR_UNKNOWN_LOAD_SESSION:92,ERROR_SESSION_RECORD_GET_STATE:93,ERROR_SESSION_STATE_GET_SENDER_CHAIN_KEY:94,ERROR_INVALID_KEY_MATEIRAL_DATA_LEN:95,ERROR_SESSION_STATE_GET_SENDER_RATCHET_KEY:96,ERROR_SESSION_STATE_GET_LOCAL_IDENTITY_KEY:97,ERROR_SESSION_STATE_GET_REMOTE_IDENTITY_KEY:98});t.E2E_FAILURE_REASON=n},92021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E2E_SENDER_TYPE=void 0;const n=Object.freeze({MY_PRIMARY:1,OTHER_PRIMARY:2,MY_COMPANION:3,OTHER_COMPANION:4,MY_HOSTED_COMPANION:5,OTHER_HOSTED_COMPANION:6});t.E2E_SENDER_TYPE=n},37060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDIT_TYPE=void 0;const n=Object.freeze({NOT_EDITED:0,EDITED:1,SENDER_REVOKE:2,ADMIN_REVOKE:3});t.EDIT_TYPE=n},16295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EPHEMERALITY_INITIATOR_TYPE=void 0;const n=Object.freeze({INITIATED_BY_ME:1,INITIATED_BY_OTHER:2,BIZ_UPGRADE_FB_HOSTING:3});t.EPHEMERALITY_INITIATOR_TYPE=n},85646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EPHEMERALITY_TRIGGER_ACTION_TYPE=void 0;const n=Object.freeze({UNKNOWN:0,CHAT_SETTINGS:1,ACCOUNT_SETTINGS:2,BULK_CHANGE:3,BIZ_SUPPORTS_FB_HOSTING:4});t.EPHEMERALITY_TRIGGER_ACTION_TYPE=n},58798:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXPIRY_REASON=void 0;const n=Object.freeze({USER_LEAVE:1,DEVICE_UNPAIR:2,IDENTITY_CHANGE:3,AUDIENCE_CHANGE:4,PERIODIC_ROTATION:5,KEY_CORRUPTION:6,PEER_COMPANION_UNPAIR:7,OTHER_DEVICE_UNPAIR:8});t.EXPIRY_REASON=n},63415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FMX_ENTRY_POINT=void 0;const n=Object.freeze({FMX_CARD:0,SAFETY_TOOLS:1});t.FMX_ENTRY_POINT=n},63703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FMX_EVENT=void 0;const n=Object.freeze({BLOCK:0,ADD_CONTACT:1,REPORT:2,SAFETY_TOOLS:3,COMMON_GROUPS:4,CONTACT_INFO:5,FMX_CARD_INSERTED:6,FMX_CARD_VIEWED:7,LEARN_MORE:8,HIGHLIGHT_GROUP_NAME:9});t.FMX_EVENT=n},28843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GA_STATUS=void 0;const n=Object.freeze({NEW:0,RETAINED:1,RESURRECTED:2});t.GA_STATUS=n},16586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRAPHQL_CATALOG_ENDPOINT=void 0;const n=Object.freeze({GET_CATALOG:1,GET_PRODUCT:2,GET_PRODUCT_LIST:3,GET_COLLECTIONS:4,GET_SINGLE_COLLECTION:5,GET_CATEGORIES:6,GET_VARIANTS:7,GET_PROMOTIONS:8});t.GRAPHQL_CATALOG_ENDPOINT=n},94035:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRAPHQL_REQUEST_RESULT=void 0;const n=Object.freeze({SUCCESS:1,FAILURE:2});t.GRAPHQL_REQUEST_RESULT=n},73705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GROUP_INFO_SETTING_TYPE=void 0;const n=Object.freeze({ADMINS_ONLY:1,ALL_PARTICIPANTS:2});t.GROUP_INFO_SETTING_TYPE=n},33286:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIGHLIGHT_GROUP_TYPE=void 0;const n=Object.freeze({UNKNOWN:0,SINGLE:1,CREATOR:2,ADMIN:3,SAVED_CONTACTS:4,PARTICIPANTS:5,MORE:6});t.HIGHLIGHT_GROUP_TYPE=n},37325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVISIBLE_MESSAGE_CATEGORY_TYPE=void 0;const n=Object.freeze({PEER:1,INVISIBLE_KEY_DISTRIBUTION:2,OTHER:3});t.INVISIBLE_MESSAGE_CATEGORY_TYPE=n},39666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IQ_RESPONSE_TYPE=void 0;const n=Object.freeze({ADD_PARTICIPANT:1,REMOVE_PARTICIPANT:2,PROMOTE_PARTICIPANT:3,DEMOTE_PARTICIPANT:4});t.IQ_RESPONSE_TYPE=n},70688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOGIN_DNS_RESOLVER_TYPE=void 0;const n=Object.freeze({SYSTEM:1,GOOGLE:2,HARDCODED:3,NO_DNS:4});t.LOGIN_DNS_RESOLVER_TYPE=n},53749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOGIN_HOST_TYPE=void 0;const n=Object.freeze({PUSH_OVERRIDES:1,G_WHATSAPP_NET:2,PUSH_FALLBACKS:3,G_FALLBACK_WHATSAPP_NET:4,HARDCODED_LIST:5,EX_WHATSAPP_NET:6});t.LOGIN_HOST_TYPE=n},80289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOGIN_PORT_NUMBER=void 0;const n=Object.freeze({P5222:1,P443:2,P80:3,UNKNOWN:4});t.LOGIN_PORT_NUMBER=n},13581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOGIN_RESULT_TYPE=void 0;const n=Object.freeze({OK:1,ERROR_UNKNOWN:2,SERVER_ERROR:3,SERVER_GOAWAY:4,NETWORK_ERROR:5,ANDROID_KEYSTORE_ERROR:6,CERTIFICATE_ERROR:7});t.LOGIN_RESULT_TYPE=n},20231:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MD_SYNCD_CRITICAL_EVENT_CODE=void 0;const n=Object.freeze({MESSAGE_RANGE_UNSET:1,MESSAGE_RANGE_LAST_SYSTEM_MESSAGE_TIMESTAMP_SET:2,MESSAGE_RANGE_MESSAGES_UNSET:3,MESSAGE_RANGE_MESSAGES_EMPTY:4,MESSAGE_RANGE_MESSAGES_CROSS_LIMIT:5,MESSAGE_RANGE_MESSAGE_KEY_UNSET:6,MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_UNSET:7,MESSAGE_RANGE_MESSAGE_KEY_FROM_ME_UNSET:8,MESSAGE_RANGE_MESSAGE_KEY_STANZA_ID_UNSET:9,MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_INVALID:10,MESSAGE_RANGE_MESSAGE_KEY_PARTICIPANT_UNSET:11,MALFORMED_PENDING_MUTATION:12,ACTION_INVALID_INDEX_DATA:13,MISSING_MUTATION_TO_REMOVE:14,LTHASH_INCONSISTENCY_ON_DAILY_CHECK:15,LTHASH_INCONSISTENCY_ON_SNAPSHOT_MAC_MISMATCH:16});t.MD_SYNCD_CRITICAL_EVENT_CODE=n},76757:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_TYPE=void 0;const n=Object.freeze({NONE:1,PHOTO:2,VIDEO:3,AUDIO:4,PTT:5,LOCATION:6,CONTACT:7,DOCUMENT:8,URL:9,CALL:10,GIF:11,FUTURE:12,CONTACT_ARRAY:13,LIVE_LOCATION:14,PROFILE_PIC:15,STICKER:16,HSM:17,PRODUCT_IMAGE:18,TEMPLATE:19,MD_APP_STATE:20,MD_HISTORY_SYNC:21,CATALOG_LINK:22,PRODUCT_LINK:23,ORDER:24,LIST:25,LIST_REPLY:26,BUTTON_MESSAGE:27,BUTTON_RESPONSE_MESSAGE:28,PRODUCT_LIST:29,BUTTON_NFM:30,VIEW_ONCE_IMAGE:31,VIEW_ONCE_VIDEO:32,SHOP_STOREFRONT:33,REACTION:34,INTERACTIVE_NFM:35,INTERACTIVE_RESPONSE_NFM:36,POLL_CREATE:37,POLL_VOTE:38,TEXT:39,KEEP:40,UNKEEP:41,INVISIBLE_HELLO:42,MEDIA_EXPRESS_NOTIFY:43,UNDECRYPTED_MEDIA:44,UNDECRYPTED_TEXT:45,UNDECRYPTED_PAY:46,UNDECRYPTED_POLL:47,UNDECRYPTED_REACTION:48,UNDECRYPTED_MEDIA_NOTIFY:49,VIEW_ONCE_AUDIO:50,SCHEDULED_CALL_CREATE:51,SCHEDULED_CALL_CANCEL:52,PUSH_TO_VIDEO:53,PIN_IN_CHAT:54,INTERACTIVE_CAROUSEL:55,COMMENT:56,EPHEMERAL_SYNC_RESPONSE:57,EVENT_CREATE:58,EVENT_RESPOND:59,LOTTIE_STICKER:60,INTERACTIVE_PRODUCT_CAROUSEL:61,INTERACTIVE_PRODUCT:62});t.MEDIA_TYPE=n},56710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_CHAT_TYPE=void 0;const n=Object.freeze({OTHER:0,INDIVIDUAL:1,GROUP:2,STATUS:3,BROADCAST:4,CHANNEL:5});t.MESSAGE_CHAT_TYPE=n},26446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_DROP_REASON_TYPE=void 0;const n=Object.freeze({SYNCD_DELETION:1,ADMIN_REVOKE_NOT_ENABLED:2,RECEIVED_WITH_OLD_COUNTER:3,INVALID_STANZA:4,INVALID_PROTOBUF:5,MESSAGE_SECRET_ERROR:6,INVALID_LID_ADDRESSED_MESSAGE:7,UNKNOWN_MESSAGE_TYPE:8,DB_OPERATION_FAILED:9,INTERNAL_ERROR:10,EXPIRED:11,INVALID_HOSTED_COMPANION_STANZA:12,MESSAGE_REVOKED:13,PAYMENT_MESSAGE_REVOKED:14,DUPLICATE_MESSAGE:15,DUPLICATE_DELIVERY:16});t.MESSAGE_DROP_REASON_TYPE=n},78833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_SECRET_ALLOWED_TYPE=void 0;const n=Object.freeze({MESSAGE_POLL:0});t.MESSAGE_SECRET_ALLOWED_TYPE=n},67948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_SECRET_ERROR_TYPE=void 0;const n=Object.freeze({MISSING_MESSAGE_SECRET:0,WRONG_LENGTH:1,ENCRYPTION_ERROR:2,DECRYPTION_ERROR:3});t.MESSAGE_SECRET_ERROR_TYPE=n},24771:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_TYPE=void 0;const n=Object.freeze({INDIVIDUAL:1,GROUP:2,BROADCAST:3,STATUS:4,CHANNEL:5,INTEROP:6});t.MESSAGE_TYPE=n},98563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MISMATCH_ORIGIN_TYPE=void 0;const n=Object.freeze({INCOMING_GROUP_MESSAGE:1,ACK_OUTGOING_MESSAGE:2,GROUP_NOTIFICATION:3,GROUP_PROFILE_PICTURE_NOTIFICATION:4,IQ_RESPONSES:5});t.MISMATCH_ORIGIN_TYPE=n},38117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFLINE_PROCESS_RUN_REASONS=void 0;const n=Object.freeze({PUSH_NOTIFICATION:1,PERIODIC_BACKGROUND_SYNC:2});t.OFFLINE_PROCESS_RUN_REASONS=n},87863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFLINE_PROCESS_STAGES=void 0;const n=Object.freeze({PAGE_LOAD:1,SOCKET_CONNECT:2,OFFLINE_PREVIEW:3,PROCESSING:4,PROCESS_COMPLETE:5,PROCESS_INTERRUPTED:6});t.OFFLINE_PROCESS_STAGES=n},51469:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFLINE_RESUME_MODES=void 0;const n=Object.freeze({RESUME_FROM_RESTART:1,RESUME_FROM_OPEN_TAB:2,UNKNOWN:3,CONNECT_REASON_USER:4,CONNECT_REASON_PUSH:5,CONNECT_REASON_BACKOFF:6});t.OFFLINE_RESUME_MODES=n},9227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFLINE_RESUME_RESULT_TYPE=void 0;const n=Object.freeze({COMPLETE:1,INCOMPLETE_UNKNOWN_ERROR:2,INCOMPLETE_DISCONNECT:3,INCOMPLETE_APP_RESTART:4});t.OFFLINE_RESUME_RESULT_TYPE=n},11603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFLINE_RESUME_STAGES=void 0;const n=Object.freeze({PAGE_LOAD:1,SOCKET_CONNECT:2,PROCESS_COMPLETE:3,SCREEN_LOAD:4,OFFLINE_PREVIEW:5,OFFLINE_COMPLETE_RECEIVED:6,PREACKS_SENT:7});t.OFFLINE_RESUME_STAGES=n},48717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPPOSITE_VISIBLE_IDENTIFICATION_TYPE=void 0;const n=Object.freeze({PHONE_NUMBER:1,SAVED_CONTACT_NAME:2,USERNAME:3,MASKED_PHONE_NUMBER:4,VERIFIED_BUSINESS_NAME:5,PLACEHOLDER:6,PUSHNAME:7});t.OPPOSITE_VISIBLE_IDENTIFICATION_TYPE=n},7625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLACEHOLDER_ACTION=void 0;const n=Object.freeze({OTHER:0,ADD:1,VIEW:2,POPULATE:3});t.PLACEHOLDER_ACTION=n},39463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLACEHOLDER_CHAT_TYPE=void 0;const n=Object.freeze({OTHER:0,INDIVIDUAL:1,GROUP:2,STATUS:3,BROADCAST:4,CHANNEL:5,INTEROP:6});t.PLACEHOLDER_CHAT_TYPE=n},95861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLACEHOLDER_POPULATION_TYPE=void 0;const n=Object.freeze({OTHER:0,RETRY:1,PEER_MESSAGE:2,RESEND:3});t.PLACEHOLDER_POPULATION_TYPE=n},4925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLACEHOLDER_REASON_TYPE=void 0;const n=Object.freeze({OTHER:0,SIGNAL_NO_SESSION:1,DEVICE_VERIFICATION_FAILURE:2,UNKNOWN_SELF_DEVICE:3,SIGNAL_INVALID_KEY:4,SIGNAL_INVALID_KEY_ID:5,SIGNAL_INVALID_MESSAGE:6,DEVICE_VERIFICATION_FAILURE_SELF_PEER:7,UNKNOWN_COMPANION_NO_PREKEY:8,BAD_EPHEMERAL_SETTING:9,SIGNAL_FUTURE_MESSAGE:10,SIGNAL_INVALID_SIGNATURE:11,SIGNAL_BAD_MAC:12,SIGNAL_INVALID_SESSION:13});t.PLACEHOLDER_REASON_TYPE=n},5440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLACEHOLDER_TYPE=void 0;const n=Object.freeze({OTHER:0,CIPHERTEXT:1,FANOUT:2,DOWNGRADE:3});t.PLACEHOLDER_TYPE=n},53476:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORM_TYPE=void 0;const n=Object.freeze({IPHONE:1,ANDROID:2,BB:3,BBX:7,S40:4,SYMBIAN:5,WP:6,WEBCLIENT:8,OSMETA:11,ENT:12,SMBA:13,KAIOS:14,SMBI:15,WINDOWS:16,WEB:17,PORTAL:18,BLOKS:19,BLUEA:20,BLUEI:21,FBLITEA:22,GREENA:23,GREENI:24,IGDA:25,IGDI:26,IGLITEA:27,MLITEA:28,MSGRA:29,MSGRI:30,MSGRP:31,MSGRW:32,IGDW:33,PAGE:34,MSGRDM:35,MSGRDW:36,MSGROM:37,MSGROC:38,MSGRM:43,IGDM:44,WEARM:45,CAPI:46,XR:47,MACOS:48,WAMETA_REPL:49,ARDEV:50,WEAROS:51,MSGRVR:52,BLUEW:53,IPHONEWAMETATEST:54,MSGRAR:57,IPAD:58,WAVOIP_CLI:59,MSGRT:60,IGDT:61,ANDROIDWAMETATEST:62,MSGRSG:63,IGDSG:64,INTEROP:65,INTEROP_MSGR:66,TEST:9,UNKNOWN:10});t.PLATFORM_TYPE=n},44485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PS_CRASH_TYPE=void 0;const n=Object.freeze({CRASH:0,OOM:1,MAIN_THREAD_STALL_30_SECONDS:2,MAIN_THREAD_STALL_DEBUG:3,AUDIO_TRANSCODING_ERROR:4,VIDEO_TRANSCODING_ERROR:5,ANR:6,CRITICAL_EVENT:7,UNHANDLED_EXCEPTION:8,APP_CRASH:9,NATIVE_CRASH:10,UFAD:11});t.PS_CRASH_TYPE=n},69349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PS_ID_ACTION=void 0;const n=Object.freeze({CREATED:1,ROTATED:2,DELETED:3});t.PS_ID_ACTION=n},96736:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RECEIPT_AGGREGATION_TYPE=void 0;const n=Object.freeze({NONE:0,MULTI_MESSAGES:1,MULTI_PARTICIPANTS:2});t.RECEIPT_AGGREGATION_TYPE=n},73291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RECEIPT_STANZA_STAGE=void 0;const n=Object.freeze({OVERALL:0,PARSE:1,WAITING_TO_PROCESS:2,PROCESS:3,WAITING_TO_ACK:5,ACK:4});t.RECEIPT_STANZA_STAGE=n},13087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVOKE_TYPE=void 0;const n=Object.freeze({SENDER:0,ADMIN:1});t.REVOKE_TYPE=n},96323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZE_BUCKET=void 0;const n=Object.freeze({LT32:1,LT64:2,LT128:3,LT256:4,LT512:5,LT1000:6,LT1024:16,LT1500:7,LT2000:8,LT2500:9,LT3000:10,LT3500:11,LT4000:12,LT4500:13,LT5000:14,LARGEST_BUCKET:15});t.SIZE_BUCKET=n},63510:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STANZA_TYPE=void 0;const n=Object.freeze({MESSAGE:1,RECEIPT:2,CALL:3,NOTIFICATION:4,APPDATA:5});t.STANZA_TYPE=n},93921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STICKER_MAKER_SOURCE_TYPE=void 0;const n=Object.freeze({CUTOUT_IMAGE:1,WEB_STICKER_MAKER:2,IOS_STICKER_MAKER:3,ANDROID_STICKER_MAKER:4,TRANSPARENT_IMAGE:5});t.STICKER_MAKER_SOURCE_TYPE=n},8994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_OF_GROUP_ENUM=void 0;const n=Object.freeze({GROUP:1,SUBGROUP:2,DEFAULT_SUBGROUP:3});t.TYPE_OF_GROUP_ENUM=n},83482:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_DB_LOADER_TYPE=void 0;const n=Object.freeze({MAIN:1,WEB_WORKER:2,SERVICE_WORKER:3});t.WEB_DB_LOADER_TYPE=n},37519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_DB_NAME_TYPE=void 0;const n=Object.freeze({MODEL_STORAGE:1,FTS_STORAGE:2,JOBS_STORAGE:3,LOADGEN_STORAGE:4,LRU_MEDIA_STORAGE_IDB:5,OFFD_STORAGE:6,QPL_STORAGE:7,SIGNAL_STORAGE:8,WORKER_STORAGE:9,SW:10,WAWC:11,WAWC_DB_ENC:12});t.WEB_DB_NAME_TYPE=n},25163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_DB_VERSION_SOURCE_TYPE=void 0;const n=Object.freeze({KNOB:1,LOCAL:2,STATIC:3,KNOB_WITH_LOCAL_OVERRIDE:4});t.WEB_DB_VERSION_SOURCE_TYPE=n},86038:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_SCENARIO_CODE=void 0;const n=Object.freeze({OFFLINE_RESUME:0});t.WEB_SCENARIO_CODE=n},81496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_SCHEMA_INITIATOR_TYPE=void 0;const n=Object.freeze({MAIN:1,WEB_WORKER:2,SERVICE_WORKER:3});t.WEB_SCHEMA_INITIATOR_TYPE=n},61655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_TABLE_LOG_REASON_CODE=void 0;const n=Object.freeze({BASE:0,EXCEEDED_THRESHOLD:1});t.WEB_TABLE_LOG_REASON_CODE=n},74801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEBC_ENV_CODE=void 0;const n=Object.freeze({PROD:0,INTERN:1,DEV:2,E2E:3});t.WEBC_ENV_CODE=n},93112:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEBC_JOB_RESULT_TYPE_CODE=void 0;const n=Object.freeze({COMPLETED:0,ERROR:1,TIMEOUT:2,ABORTED:3});t.WEBC_JOB_RESULT_TYPE_CODE=n},83647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEBC_SCENARIO_TYPE=void 0;const n=Object.freeze({INITIAL_PAIRING:0,OFFLINE_RESUME:1,IDLE:2});t.WEBC_SCENARIO_TYPE=n},57440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEBC_WEB_PLATFORM_TYPE=void 0;const n=Object.freeze({WEB:1,WIN32:2,DARWIN:3,IOS_TABLET:4,ANDROID_TABLET:5,WINSTORE:6,MACSTORE:7,DARWIN_BETA:8,WIN32_BETA:9,PWA:10});t.WEBC_WEB_PLATFORM_TYPE=n},77725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressingModeMismatchWamEvent=void 0;var r=n(76042),i=n(55220),o=n(39666),a=n(98563);const{STRING:s}=r.TYPES,l=(0,r.defineEvents)({AddressingModeMismatch:[4750,{iqResponse:[1,o.IQ_RESPONSE_TYPE],localAddressingMode:[2,i.ADDRESSING_MODE],mismatchOrigin:[6,a.MISMATCH_ORIGIN_TYPE],notificationTag:[3,s],serverAddressingMode:[5,i.ADDRESSING_MODE]},[1,1,1],"regular"]},{AddressingModeMismatch:[]});t.AddressingModeMismatchWamEvent=l},47710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessageCountsWamEvent=void 0;var r=n(76042),i=n(7127),o=n(69318),a=n(43063),s=n(72349),l=n(30549),u=n(91258),c=n(16295),d=n(85646),p=n(28843),f=n(73705),_=n(48717),g=n(8994);const{BOOLEAN:h,INTEGER:A,STRING:m}=r.TYPES,E=(0,r.defineEvents)({ChatMessageCounts:[1644,{audioMessagesReceived:[149,A],audioMessagesSent:[150,A],awayMsgsSent:[56,A],bizCatalogType:[60,i.BIZ_CATALOG_TYPE],bizConversationDepth:[65,A],blockReason:[33,o.BLOCK_REASON],broadcastMsgsReceived:[30,A],broadcastMsgsSent:[29,A],callOffersReceived:[27,A],callOffersSent:[26,A],callsResultBusy:[70,A],callsResultCancelled:[71,A],callsResultConnected:[72,A],callsResultError:[78,A],callsResultMissed:[73,A],callsResultRejected:[74,A],canEditDmSettings:[88,h],cartViews:[86,A],chatEphemeralityDuration:[15,A],chatMuted:[8,a.CHAT_MUTED_TYPE],chatOrigins:[179,s.CHAT_ORIGINS_TYPE],chatOverflowClicks:[79,A],chatTypeInd:[2,l.CHAT_TYPE],collectionInquiriesSent:[44,A],commandSheetShow:[174,A],commentsReceived:[126,A],commerceMsgsReceived:[41,A],commerceMsgsSent:[40,A],disappearingChatInitiator:[59,u.DISAPPEARING_CHAT_INITIATOR_TYPE],documentMessagesReceived:[151,A],documentMessagesSent:[152,A],editedMsgsSent:[100,A],entryPointConversionApp:[47,m],entryPointConversionSource:[46,m],ephemeralMessagesReceived:[14,A],ephemeralMessagesSent:[13,A],ephemeralMessagesUnreadExpired:[69,A],ephemeralityInitiator:[109,c.EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[110,d.EPHEMERALITY_TRIGGER_ACTION_TYPE],eventCreationMessagesReceived:[142,A],eventCreationMessagesSent:[143,A],eventResponseMessagesReceived:[144,A],eventResponseMessagesSent:[145,A],fbCtaInquiriesSent:[45,A],firstResponseTime:[25,A],forwardAudioMessagesReceived:[153,A],forwardAudioMessagesSent:[154,A],forwardDocumentMessagesReceived:[155,A],forwardDocumentMessagesSent:[156,A],forwardGifMessagesReceived:[157,A],forwardGifMessagesSent:[158,A],forwardMessagesReceived:[89,A],forwardMessagesSent:[90,A],forwardPhotoMessagesReceived:[128,A],forwardPhotoMessagesSent:[129,A],forwardPtvMessagesReceived:[159,A],forwardPtvMessagesSent:[160,A],forwardStatusReplyMessagesReceived:[161,A],forwardStatusReplyMessagesSent:[162,A],forwardStickerMessagesReceived:[163,A],forwardStickerMessagesSent:[164,A],forwardTextMessagesReceived:[130,A],forwardTextMessagesSent:[131,A],forwardUrlMessagesReceived:[132,A],forwardUrlMessagesSent:[133,A],forwardVideoMessagesReceived:[165,A],forwardVideoMessagesSent:[166,A],gaStatus:[22,p.GA_STATUS],gifMessagesReceived:[167,A],gifMessagesSent:[168,A],greetingMsgsSent:[57,A],groupContainsBiz:[75,h],groupInfoSetting:[87,f.GROUP_INFO_SETTING_TYPE],groupMembershipReplies:[51,A],groupPrivateReplies:[52,A],groupSize:[19,A],hasUsername:[180,h],imagineCommandClick:[175,A],imagineMentionClick:[146,A],imagineMentionShow:[176,A],isAContact:[6,h],isAGroup:[5,h],isArchived:[10,h],isAutoMuted:[108,h],isBlocked:[32,h],isCartAddClicked:[36,h],isCommerceViewed:[35,h],isCtaOnPdpClicked:[37,h],isInviteCreatedThread:[106,h],isLabelled:[54,h],isMessageYourself:[91,h],isOppositePartyInitiated:[62,h],isPinned:[9,h],isPnhEnabledChat:[92,h],isUser1pBizBotChat:[141,h],isUser3pBotChat:[140,h],isUserAgent:[111,h],isUserCreatedAgent:[123,h],isWaPayRegistered:[81,h],labelledMsgs:[55,A],locationsSent:[96,A],messagesRead:[127,A],messagesReceived:[4,A],messagesSent:[3,A],messagesStarred:[12,A],messagesUnread:[11,A],metaAiMentionClick:[147,A],metaAiMentionShow:[148,A],newThread:[68,h],odReceived:[82,A],oppositeVisibleIdentification:[181,_.OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],ordersSent:[38,A],p2mOdNnpTransactionsSent:[83,A],p2mOdNpTransactionsSent:[84,A],paymentsSent:[39,A],pdpInquiriesSent:[42,A],pdpViews:[61,A],photoMessagesReceived:[134,A],photoMessagesSent:[135,A],pollCreationMessagesReceived:[115,A],pollCreationMessagesSent:[116,A],pollUpdateMessagesReceived:[117,A],pollUpdateMessagesSent:[118,A],profileReplies:[64,A],profileViews:[63,A],pttMessagesReceived:[119,A],pttMessagesSent:[120,A],ptvMessagesReceived:[121,A],ptvMessagesSent:[122,A],quickRepliesSent:[58,A],reactionsReceived:[97,A],reactionsSent:[98,A],receiverDefaultDisappearingDuration:[21,A],repliesSent:[80,A],requestedPhoneNumber:[93,h],seenMaskedPhoneNumber:[94,h],senderDefaultDisappearingDuration:[20,A],sharedPhoneNumber:[99,h],smbMarketingMessagesReactionsSent:[101,A],smbMarketingMessagesRepliesSent:[102,A],smbMarketingMessagesSpamReports:[103,A],smbMarketingMsgsReceived:[104,A],smbMarketingMsgsSent:[105,A],spamReports:[31,A],startTime:[7,A],statusReplies:[50,A],statusReplyMessagesReceived:[169,A],statusViews:[49,A],stickerMessagesReceived:[170,A],stickerMessagesSent:[171,A],storefrontInquiriesSent:[43,A],suggestionPromptsClick:[177,A],suggestionPromptsShow:[178,A],textMessagesReceived:[136,A],textMessagesSent:[137,A],textMessagesToUserCreatedAgentCnt:[124,A],threadDs:[66,m],threadId:[67,m],totalCallDuration:[28,A],totalMessageEditsFromAgentCnt:[112,A],totalMessageFromAgentCnt:[113,A],totalMessageToAgentCnt:[114,A],totalMessagesToUserCreatedAgentCnt:[125,A],typeOfGroup:[85,g.TYPE_OF_GROUP_ENUM],urlMessagesReceived:[138,A],urlMessagesSent:[139,A],viaContactlessChats:[107,h],videoCallsOffered:[76,A],videoMessagesReceived:[172,A],videoMessagesSent:[173,A],viewOnceMessagesOpened:[18,A],viewOnceMessagesReceived:[17,A],viewOnceMessagesSent:[16,A],voiceCallsOffered:[77,A]},[1,1,1],"regular"]},{ChatMessageCounts:[]});t.ChatMessageCountsWamEvent=E},87452:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockSkewDifferenceTWamEvent=void 0;var r=n(76042);const{INTEGER:i}=r.TYPES,o=(0,r.defineEvents)({ClockSkewDifferenceT:[3178,{clockSkewHourly:[1,i]},[1,1e3,1e4],"private",37887164]},{ClockSkewDifferenceT:[]});t.ClockSkewDifferenceTWamEvent=o},44346:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrashLogWamEvent=void 0;var r=n(76042),i=n(95734);const{INTEGER:o,STRING:a}=r.TYPES,s=(0,r.defineEvents)({CrashLog:[494,{crashContext:[3,a],crashCount:[5,o],crashReason:[2,a],crashType:[6,i.CRASH_TYPE]},[1,1,100],"regular"]},{CrashLog:[]});t.CrashLogWamEvent=s},85551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E2eMessageRecvWamEvent=void 0;var r=n(76042),i=n(55220),o=n(2775),a=n(35347),s=n(85334),l=n(7356),u=n(57095),c=n(92021),d=n(37060),p=n(76757),f=n(13087),_=n(63510),g=n(8994);const{BOOLEAN:h,INTEGER:A}=r.TYPES,m=(0,r.defineEvents)({E2eMessageRecv:[478,{agentEngagementType:[15,o.AGENT_ENGAGEMENT_ENUM_TYPE],botType:[19,a.BOT_TYPE],e2eCiphertextType:[5,s.E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[6,A],e2eDestination:[4,l.E2E_DESTINATION],e2eFailureReason:[2,u.E2E_FAILURE_REASON],e2eSenderType:[8,c.E2E_SENDER_TYPE],e2eSuccessful:[1,h],editType:[13,d.EDIT_TYPE],isHostedChat:[20,h],isLid:[11,h],localAddressingMode:[16,i.ADDRESSING_MODE],messageAddressingMode:[17,i.ADDRESSING_MODE],messageMediaType:[7,p.MEDIA_TYPE],offline:[9,h],retryCount:[3,A],revokeType:[10,f.REVOKE_TYPE],serverAddressingMode:[18,i.ADDRESSING_MODE],stanzaType:[14,_.STANZA_TYPE],typeOfGroup:[12,g.TYPE_OF_GROUP_ENUM]},[1,1,20],"regular"]},{E2eMessageRecv:[]});t.E2eMessageRecvWamEvent=m},11363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FmxActionWamEvent=void 0;var r=n(76042),i=n(63415),o=n(63703),a=n(33286);const{BOOLEAN:s,INTEGER:l}=r.TYPES,u=(0,r.defineEvents)({FmxAction:[4444,{commonGroupNum:[1,l],countryShown:[2,s],fmxEntryPoint:[3,i.FMX_ENTRY_POINT],fmxEvent:[4,o.FMX_EVENT],highlightGroupType:[6,a.HIGHLIGHT_GROUP_TYPE],isSenderSmb:[7,s],notAContactShown:[5,s]},[1,1,1],"regular"]},{FmxAction:[]});t.FmxActionWamEvent=u},62413:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GatedMessageReceivedWamEvent=void 0;var r=n(76042),i=n(70644);const o=(0,r.defineEvents)({GatedMessageReceived:[3152,{chatGatedReason:[1,i.CHAT_GATED_REASON]},[1,1,1],"regular"]},{GatedMessageReceived:[]});t.GatedMessageReceivedWamEvent=o},60731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphqlCatalogRequestWamEvent=void 0;var r=n(76042),i=n(77281),o=n(16586),a=n(94035);const{INTEGER:s,STRING:l}=r.TYPES,u=(0,r.defineEvents)({GraphqlCatalogRequest:[3206,{businessJid:[4,l],businessType:[5,i.BUSINESS_TYPE],graphqlCatalogEndpoint:[1,o.GRAPHQL_CATALOG_ENDPOINT],graphqlErrorCode:[3,s],graphqlRequestResult:[2,a.GRAPHQL_REQUEST_RESULT]},[1,1,1],"private",0]},{GraphqlCatalogRequest:[]});t.GraphqlCatalogRequestWamEvent=u},83302:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupJoinCWamEvent=void 0;const r=(0,n(76042).defineEvents)({GroupJoinC:[158,{},[1,1,1],"regular"]},{GroupJoinC:[]});t.GroupJoinCWamEvent=r},27856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IncomingMessageDropWamEvent=void 0;var r=n(76042),i=n(2775),o=n(35347),a=n(85334),s=n(7356),l=n(57095),u=n(92021),c=n(37325),d=n(76757),p=n(26446),f=n(13087),_=n(8994);const{BOOLEAN:g,INTEGER:h}=r.TYPES,A=(0,r.defineEvents)({IncomingMessageDrop:[3724,{agentEngagementType:[12,i.AGENT_ENGAGEMENT_ENUM_TYPE],botType:[14,o.BOT_TYPE],e2eCiphertextType:[1,a.E2E_CIPHERTEXT_TYPE],e2eDestination:[2,s.E2E_DESTINATION],e2eFailureReason:[9,l.E2E_FAILURE_REASON],e2eSenderType:[3,u.E2E_SENDER_TYPE],invisibleMessageCategory:[13,c.INVISIBLE_MESSAGE_CATEGORY_TYPE],messageDropReason:[4,p.MESSAGE_DROP_REASON_TYPE],messageMediaType:[5,d.MEDIA_TYPE],offline:[6,g],offlineCount:[11,h],retryCount:[7,h],revokeType:[8,f.REVOKE_TYPE],typeOfGroup:[10,_.TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{IncomingMessageDrop:[]});t.IncomingMessageDropWamEvent=A},33622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginWamEvent=void 0;var r=n(76042),i=n(59074),o=n(32103),a=n(97272),s=n(11104),l=n(70688),u=n(53749),c=n(80289),d=n(13581);const{BOOLEAN:p,INTEGER:f,TIMER:_}=r.TYPES,g=(0,r.defineEvents)({Login:[460,{androidKeystoreState:[10,i.ANDROID_KEYSTORE_STATE_TYPE],connectionOrigin:[6,o.CONNECTION_ORIGIN_TYPE],connectionSequenceStep:[11,a.CONNECTION_SEQUENCE_STEP_TYPE],connectionT:[5,_],dnsResolutionMethod:[12,s.DNS_RESOLUTION_METHOD_TYPE],loginDnsResolver:[13,l.LOGIN_DNS_RESOLVER_TYPE],loginIpSource:[14,u.LOGIN_HOST_TYPE],loginPort:[15,c.LOGIN_PORT_NUMBER],loginResult:[1,d.LOGIN_RESULT_TYPE],loginT:[3,_],longConnect:[4,p],noiseProtocolVersion:[16,f],passive:[8,p],pendingAcksCount:[17,f],retryCount:[2,f],sequenceStep:[7,f],serverErrorCode:[9,f]},[1,1,1],"regular"]},{Login:[]});t.LoginWamEvent=g},77426:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdBadDeviceSentMessageWamEvent=void 0;var r=n(76042),i=n(3729),o=n(59032);const a=(0,r.defineEvents)({MdBadDeviceSentMessage:[2176,{dsmError:[2,o.DSM_ERROR],peerType:[1,i.DEVICE_TYPE]},[1,1,1],"regular"]},{MdBadDeviceSentMessage:[]});t.MdBadDeviceSentMessageWamEvent=a},53868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdCriticalEventWamEvent=void 0;var r=n(76042),i=n(35126),o=n(20231);const a=(0,r.defineEvents)({MdCriticalEvent:[2746,{collection:[2,i.COLLECTION],mdCriticalEventCode:[1,o.MD_SYNCD_CRITICAL_EVENT_CODE]},[1,1,1],"regular"]},{MdCriticalEvent:[]});t.MdCriticalEventWamEvent=a},38820:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHighRetryCountWamEvent=void 0;var r=n(76042),i=n(92021),o=n(76757),a=n(24771),s=n(96323);const{INTEGER:l}=r.TYPES,u=(0,r.defineEvents)({MessageHighRetryCount:[3132,{deviceSizeBucket:[5,s.SIZE_BUCKET],e2eSenderType:[3,i.E2E_SENDER_TYPE],mediaType:[1,o.MEDIA_TYPE],messageType:[4,a.MESSAGE_TYPE],retryCount:[2,l]},[1,20,20],"regular"]},{MessageHighRetryCount:[]});t.MessageHighRetryCountWamEvent=u},14105:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageReceiveWamEvent=void 0;var r=n(76042),i=n(55220),o=n(2775),a=n(35347),s=n(72349),l=n(91258),u=n(37060),c=n(16295),d=n(85646),p=n(76757),f=n(24771),_=n(48717),g=n(13087),h=n(96323),A=n(93921),m=n(8994);const{BOOLEAN:E,INTEGER:y,TIMER:S}=r.TYPES,v=(0,r.defineEvents)({MessageReceive:[450,{agentEngagementType:[28,o.AGENT_ENGAGEMENT_ENUM_TYPE],botType:[37,a.BOT_TYPE],chatOrigins:[38,s.CHAT_ORIGINS_TYPE],deviceCount:[16,y],deviceSizeBucket:[10,h.SIZE_BUCKET],disappearingChatInitiator:[14,l.DISAPPEARING_CHAT_INITIATOR_TYPE],editType:[25,u.EDIT_TYPE],ephemeralityDuration:[13,y],ephemeralityInitiator:[26,c.EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[27,d.EPHEMERALITY_TRIGGER_ACTION_TYPE],hasUsername:[39,E],isAComment:[36,E],isAReply:[19,E],isForwardedForward:[18,E],isLid:[24,E],isViewOnce:[9,E],localAddressingMode:[33,i.ADDRESSING_MODE],messageAddressingMode:[34,i.ADDRESSING_MODE],messageIsInternational:[4,E],messageIsInvisible:[23,E],messageIsOffline:[5,E],messageMediaType:[2,p.MEDIA_TYPE],messageQueueTime:[15,S],messageReceiveT0:[6,S],messageReceiveT1:[7,S],messageType:[1,f.MESSAGE_TYPE],mutedGroupMessage:[8,E],numOfWebUrlsInTextMessage:[3,y],offlineCount:[30,y],oppositeVisibleIdentification:[40,_.OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],paddingBytesSize:[22,y],participantCount:[17,y],receiverDefaultDisappearingDuration:[12,y],revokeType:[20,g.REVOKE_TYPE],senderDefaultDisappearingDuration:[11,y],serverAddressingMode:[35,i.ADDRESSING_MODE],stickerIsAi:[29,E],stickerIsFromStickerMaker:[31,E],stickerMakerSourceType:[32,A.STICKER_MAKER_SOURCE_TYPE],typeOfGroup:[21,m.TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{MessageReceive:[]});t.MessageReceiveWamEvent=v},63020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSecretErrorsWamEvent=void 0;var r=n(76042),i=n(76757),o=n(78833),a=n(67948);const s=(0,r.defineEvents)({MessageSecretErrors:[3686,{messageMediaType:[3,i.MEDIA_TYPE],messageSecretAllowedList:[1,o.MESSAGE_SECRET_ALLOWED_TYPE],messageSecretError:[2,a.MESSAGE_SECRET_ERROR_TYPE]},[1,1,1],"regular"]},{MessageSecretErrors:[]});t.MessageSecretErrorsWamEvent=s},63479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MexEventV2WamEvent=void 0;var r=n(76042);const{BOOLEAN:i,INTEGER:o,STRING:a,TIMER:s}=r.TYPES,l=(0,r.defineEvents)({MexEventV2:[4336,{mexEventV2DurationMs:[1,s],mexEventV2EndTime:[2,o],mexEventV2ErrorCodes:[3,a],mexEventV2Errors:[4,a],mexEventV2HasData:[5,i],mexEventV2IsMex:[6,i],mexEventV2OperationName:[7,a],mexEventV2QueryId:[8,a],mexEventV2StartTime:[9,o]},[1,1,1],"regular"]},{MexEventV2:[]});t.MexEventV2WamEvent=l},80722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MexEventWamEvent=void 0;var r=n(76042);const{BOOLEAN:i,INTEGER:o,STRING:a,TIMER:s}=r.TYPES,l=(0,r.defineEvents)({MexEvent:[3782,{isMex:[1,i],mexEventData:[2,a],mexEventDurationT:[12,s],mexEventEndTime:[3,o],mexEventEnvelopeResponseStatus:[13,o],mexEventOperation:[7,a],mexEventPayloadResponseStatus:[14,o],mexEventRequestSize:[8,o],mexEventResponseSize:[9,o],mexEventRetries:[10,o],mexEventStartTime:[11,o]},[1,1,1],"regular"]},{MexEvent:[]});t.MexEventWamEvent=l},30984:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineCountTooHighWamEvent=void 0;var r=n(76042),i=n(19457),o=n(76757),a=n(24771),s=n(63510);const{INTEGER:l,STRING:u}=r.TYPES,c=(0,r.defineEvents)({OfflineCountTooHigh:[2638,{callStanzaType:[7,i.CALL_STANZA_TYPE],mediaType:[3,o.MEDIA_TYPE],messageType:[4,a.MESSAGE_TYPE],notificationStanzaType:[6,u],offlineCount:[2,l],receiptStanzaType:[5,u],stanzaType:[1,s.STANZA_TYPE]},[1,1,1],"regular"]},{OfflineCountTooHigh:[]});t.OfflineCountTooHighWamEvent=c},72406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineResumeStageWamEvent=void 0;var r=n(76042),i=n(51469),o=n(11603);const{BOOLEAN:a,INTEGER:s,STRING:l,TIMER:u}=r.TYPES,c=(0,r.defineEvents)({OfflineResumeStage:[3536,{attemptId:[13,s],chatThreadCount:[4,s],currentOfflineStage:[1,o.OFFLINE_RESUME_STAGES],isResumeInForeground:[5,a],isResumeStartedInForeground:[14,a],lastPushTimestampMs:[12,s],mailboxAge:[6,s],offlineCallCount:[15,s],offlineDecryptErrorCount:[7,s],offlineMessageCount:[8,s],offlineNotificationCount:[9,s],offlineReceiptCount:[10,s],offlineResumeMode:[11,i.OFFLINE_RESUME_MODES],offlineSessionId:[2,l],offlineSizeBytes:[16,s],offlineStageTimestampMs:[3,s],passiveModeT:[17,u]},[1,1,1],"regular"]},{OfflineResumeStage:[]});t.OfflineResumeStageWamEvent=c},75949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineResumeWamEvent=void 0;var r=n(76042),i=n(9227);const{BOOLEAN:o,INTEGER:a,STRING:s,TIMER:l}=r.TYPES,u=(0,r.defineEvents)({OfflineResume:[3112,{affectedBySleepMode:[35,o],chatThreadCount:[1,a],expectedOfflineCallCount:[23,a],expectedOfflineMessageCount:[17,a],expectedOfflineNotificationCount:[18,a],expectedOfflineReceiptCount:[19,a],isOfflineCompleteMissed:[2,o],isResumeInForeground:[13,o],isRunningFromServiceExtension:[22,o],lastStanzaT:[3,l],mailboxAge:[14,a],mainScreenLoadT:[4,l],offlineCallCount:[24,a],offlineDecryptErrorCount:[5,a],offlineMessageCount:[6,a],offlineNotificationCount:[7,a],offlinePreviewT:[8,l],offlineProcessingT:[20,l],offlineReceiptCount:[9,a],offlineResumeResult:[21,i.OFFLINE_RESUME_RESULT_TYPE],offlineSizeBytes:[10,a],onTrickleMode:[15,o],pageLoadT:[11,l],passiveModeT:[25,l],preackCallCount:[26,a],preackMessageCount:[27,a],preackNotificationCount:[28,a],preackReceiptCount:[29,a],processedCallCount:[30,a],processedMessageCount:[31,a],processedNotificationCount:[32,a],processedReceiptCount:[33,a],socketConnectT:[12,l],transientOfflineSessionId:[34,s]},[1,1,1],"regular"]},{OfflineResume:[]});t.OfflineResumeWamEvent=u},3271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaceholderActivityWamEvent=void 0;var r=n(76042),i=n(92021),o=n(76757),a=n(24771),s=n(7625),l=n(39463),u=n(95861),c=n(4925),d=n(5440),p=n(96323),f=n(8994);const{BOOLEAN:_,INTEGER:g,STRING:h}=r.TYPES,A=(0,r.defineEvents)({PlaceholderActivity:[1980,{deviceCount:[9,g],deviceSizeBucket:[8,p.SIZE_BUCKET],e2eSenderType:[16,i.E2E_SENDER_TYPE],isHostedChat:[19,_],isLid:[12,_],messageBeforeReg:[15,_],messageIsRevoke:[7,_],messageKeyHash:[14,h],messageMediaType:[6,o.MEDIA_TYPE],messageType:[5,a.MESSAGE_TYPE],participantCount:[10,g],placeholderActionInd:[2,s.PLACEHOLDER_ACTION],placeholderAddReason:[11,c.PLACEHOLDER_REASON_TYPE],placeholderChatTypeInd:[3,l.PLACEHOLDER_CHAT_TYPE],placeholderPopulationType:[17,u.PLACEHOLDER_POPULATION_TYPE],placeholderTimePeriod:[4,g],placeholderTypeInd:[1,d.PLACEHOLDER_TYPE],typeOfGroup:[13,f.TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{PlaceholderActivity:[]});t.PlaceholderActivityWamEvent=A},58473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PsIdUpdateWamEvent=void 0;var r=n(76042),i=n(69349);const{BOOLEAN:o,INTEGER:a}=r.TYPES,s=(0,r.defineEvents)({PsIdUpdate:[2862,{isFromWamsys:[4,o],psIdAction:[2,i.PS_ID_ACTION],psIdKey:[1,a],psIdRotationFrequence:[3,a]},[1,1,1],"regular"]},{PsIdUpdate:[]});t.PsIdUpdateWamEvent=s},94115:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReceiptStanzaReceiveWamEvent=void 0;var r=n(76042),i=n(76757),o=n(24771),a=n(96736),s=n(73291);const{BOOLEAN:l,INTEGER:u,STRING:c,TIMER:d}=r.TYPES,p=(0,r.defineEvents)({ReceiptStanzaReceive:[2496,{dbReadsCount:[12,u],dbWritesCount:[13,u],mediaType:[2,i.MEDIA_TYPE],messageType:[10,o.MESSAGE_TYPE],receiptAggregation:[11,a.RECEIPT_AGGREGATION_TYPE],receiptStanzaDuration:[1,d],receiptStanzaHasOrphaned:[6,l],receiptStanzaOfflineCount:[3,u],receiptStanzaProcessedCount:[8,u],receiptStanzaRetryVer:[5,u],receiptStanzaStage:[9,s.RECEIPT_STANZA_STAGE],receiptStanzaTotalCount:[7,u],receiptStanzaType:[4,c]},[1,1,1],"regular"]},{ReceiptStanzaReceive:[]});t.ReceiptStanzaReceiveWamEvent=p},35033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SenderKeyExpiredWamEvent=void 0;var r=n(76042),i=n(58798),o=n(56710),a=n(96323);const s=(0,r.defineEvents)({SenderKeyExpired:[3130,{chatType:[1,o.MESSAGE_CHAT_TYPE],deviceSizeBucket:[2,a.SIZE_BUCKET],expiryReason:[3,i.EXPIRY_REASON]},[1,1,1],"regular"]},{SenderKeyExpired:[]});t.SenderKeyExpiredWamEvent=s},96882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownStanzaWamEvent=void 0;var r=n(76042);const{STRING:i}=r.TYPES,o=(0,r.defineEvents)({UnknownStanza:[3448,{unknownStanzaTag:[1,i],unknownStanzaType:[2,i]},[1,1,1],"regular"]},{UnknownStanza:[]});t.UnknownStanzaWamEvent=o},71422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebDbLoadFromVersionFailureNonAnonymousWamEvent=void 0;var r=n(76042),i=n(83482),o=n(37519);const a=(0,r.defineEvents)({WebDbLoadFromVersionFailureNonAnonymous:[4814,{webDbLoader:[1,i.WEB_DB_LOADER_TYPE],webDbName:[2,o.WEB_DB_NAME_TYPE]},[1,1,1],"regular"]},{WebDbLoadFromVersionFailureNonAnonymous:[]});t.WebDbLoadFromVersionFailureNonAnonymousWamEvent=a},61171:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebDbTableUsageWamEvent=void 0;var r=n(76042),i=n(86038),o=n(61655);const{INTEGER:a,STRING:s}=r.TYPES,l=(0,r.defineEvents)({WebDbTableUsage:[5074,{offlineSessionId:[1,s],webScenario:[2,i.WEB_SCENARIO_CODE],webTable:[3,s],webTableLogReason:[4,o.WEB_TABLE_LOG_REASON_CODE],webTableReadCount:[5,a],webTableWriteCount:[6,a]},[1,1,1],"regular"]},{WebDbTableUsage:[]});t.WebDbTableUsageWamEvent=l},80052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebDbVersionsSourceWamEvent=void 0;var r=n(76042),i=n(25163),o=n(81496);const a=(0,r.defineEvents)({WebDbVersionsSource:[4784,{webDbVersionSource:[1,i.WEB_DB_VERSION_SOURCE_TYPE],webSchemaInitiator:[2,o.WEB_SCHEMA_INITIATOR_TYPE]},[1,1,1],"regular"]},{WebDbVersionsSource:[]});t.WebDbVersionsSourceWamEvent=a},22991:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWamForceFlushWamEvent=void 0;const r=(0,n(76042).defineEvents)({WebWamForceFlush:[3264,{},[1,1,1],"regular"]},{WebWamForceFlush:[]});t.WebWamForceFlushWamEvent=r},74939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebcDbOpenWamEvent=void 0;var r=n(76042);const{BOOLEAN:i,INTEGER:o,STRING:a}=r.TYPES,s=(0,r.defineEvents)({WebcDbOpen:[1940,{webcDbName:[1,a],webcDbOpenNumAttempts:[3,o],webcDbOpenWasSuccess:[2,i]},[1,1,1],"regular"]},{WebcDbOpen:[]});t.WebcDbOpenWamEvent=s},44160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebcJobInfoWamEvent=void 0;var r=n(76042),i=n(93112),o=n(83647);const{INTEGER:a,STRING:s}=r.TYPES,l=(0,r.defineEvents)({WebcJobInfo:[3054,{jobName:[1,s],jobPriority:[2,s],jobResultType:[5,i.WEBC_JOB_RESULT_TYPE_CODE],pendingJobsCount:[4,a],scenario:[3,o.WEBC_SCENARIO_TYPE],webcJobAddedT:[6,a],webcJobCompletedT:[8,a],webcJobStartedT:[7,a]},[1,1,1],"regular"]},{WebcJobInfo:[]});t.WebcJobInfoWamEvent=l},74012:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebcOfflineNotificationProcessWamEvent=void 0;var r=n(76042),i=n(38117),o=n(87863);const{INTEGER:a,STRING:s}=r.TYPES,l=(0,r.defineEvents)({WebcOfflineNotificationProcess:[4222,{currentOfflineProcessStage:[4,o.OFFLINE_PROCESS_STAGES],offlineProcessDecryptErrorCount:[5,a],offlineProcessMailboxAge:[6,a],offlineProcessMessageCount:[7,a],offlineProcessNotificationCount:[8,a],offlineProcessSessionId:[9,s],offlineProcessStageTimestampMs:[10,a],runReason:[12,i.OFFLINE_PROCESS_RUN_REASONS],swVersion:[11,s]},[1,1,1],"regular"]},{WebcOfflineNotificationProcess:[]});t.WebcOfflineNotificationProcessWamEvent=l},84751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebcRawPlatformsWamEvent=void 0;var r=n(76042);const{STRING:i}=r.TYPES,o=(0,r.defineEvents)({WebcRawPlatforms:[2416,{webcRawPlatform:[1,i]},[1,1,1],"regular"]},{WebcRawPlatforms:[]});t.WebcRawPlatformsWamEvent=o},84834:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Metrics=t.Metric=t.GlobalMetric=void 0;var i=r(n(49619)),o=n(76042);function a(e){return"number"==typeof e&&e===Math.floor(e)}class s{constructor(e,t,n){if(this.name=e,this.id=t,this.type=n,"object"==typeof n){const e=new Set(Object.values(n));this.validator=t=>e.has(t)}else n===o.TYPES.INTEGER||n===o.TYPES.TIMER?this.validator=a:this.validator=n}}t.Metric=s;class l extends s{constructor(e,t,n,r){super(e,t,n),this.channels=r}}t.GlobalMetric=l;t.Metrics=class{constructor(){this._events={},this._globalMetrics=new Map}_key(e,t){return`${e}::${t}`}getEvent(e,t){const n=this._key(e,t);return(0,i.default)(this._events[n],n)}define(e,t,n,r){const i=this._key(e,t);return i in this._events||(this._events[i]=new s(t,n,r)),this._events[i]}defineGlobal(e,t,n,r){return this._globalMetrics.has(e)||this._globalMetrics.set(e,new l(e,t,n,r)),(0,i.default)(this._globalMetrics.get(e),e)}getGlobal(e){return(0,i.default)(this._globalMetrics.get(e),e)}}},76042:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=void 0,t.defineEvents=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const i in e){var n,r;const o=e[i],a=o[2];let s=1;s=a[2];const l=null!==(n=o[3])&&void 0!==n?n:"regular",u=5===o.length?o[4]:-1;return A({name:i,id:o[0],props:o[1],weight:s,wamChannel:l,privateStatsIdInt:u,validators:null!==(r=t[i])&&void 0!==r?r:[]})}throw(0,f.default)("defineEvent: empty definition")},t.defineGlobal=function(e){const t={};for(const n in e){const r=e[n],[i,o,a=["regular"]]=r,s=g.defineGlobal(n,i,o,a);t[n]={type:s.validator,set(e){if(this.commitOnSet){const t=(0,d.getWamRuntime)();t?t.set(s,e):(0,u.queueMetric)(s,e)}}}}return new((0,p.defineTypeHash)("Global",t,m))},t.metrics=t.events=void 0;var i=r(n(22205)),o=r(n(8450)),a=n(28123),s=n(84834),l=n(23136),u=n(97496),c=n(72207),d=n(5117),p=n(33763),f=r(n(89482));const _=Object.freeze({BOOLEAN:"boolean",INTEGER:"integer",NUMBER:"number",STRING:"string",TIMER:"timer"});t.TYPES=_;const g=new s.Metrics;t.metrics=g;const h={};function A(e){let{name:t,id:n,weight:r,props:s,wamChannel:u,privateStatsIdInt:d,validators:f}=e;const A={id:n,weight:r,wamChannel:u,privateStatsIdInt:d,validators:f},m={},E=[];for(const e in s){const n=s[e],r=g.define(t,e,n[0],n[1]);m[e]=r.validator,n[1]===_.TIMER&&E.push(e)}const y=(0,p.defineTypeHash)(t,m,l.WamEvent);return E.forEach((e=>{A["mark"+(0,o.default)(e)]=function(n){var r,i;const{startMarkers:o,eventTime:s}=this;this[e]=Date.now()-(null!==(r=null===(i=o[e])||void 0===i?void 0:i.ts)&&void 0!==r?r:s);const l=!1!==(null==n?void 0:n.showInTimeline),u=this.startMark;if(a.USER_TIMINGS&&null!=u&&l&&void 0!==self.performance&&self.performance.mark&&self.performance.measure){var d,p;const{$className:n,instanceId:r}=this,i=`${n} ${r}: End`;self.performance.mark(i),self.performance.measure((0,c.formatMeasureLabel)(`${t}.${e}`),null!==(d=null===(p=this.startMarkers[e])||void 0===p?void 0:p.name)&&void 0!==d?d:u,i)}},A[`start${(0,o.default)(e)}`]=function(t){const n=Date.now();this.startMarkers[e]={ts:n};const r=!1!==(null==t?void 0:t.showInTimeline);if(a.USER_TIMINGS&&r&&void 0!==self.performance&&self.performance.mark&&self.performance.measure){const{$className:t,instanceId:r}=this,i=`${t} ${r} ${e}: Start`;self.performance.mark(i),this.startMarkers[e]={name:i,ts:n}}}})),(0,i.default)(y.prototype,A),h[t]=y,y}t.events=h;class m extends p.TypeHash{constructor(){super(...arguments),this.commitOnSet=!0}}},23136:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WamEvent=void 0;var r=n(28123),i=n(97496),o=n(5117),a=n(33763);let s=1;class l extends a.TypeHash{constructor(){super(),this.instanceId=s++,this.eventTime=Date.now(),this.commitTime=void 0,this.startMarkers={},r.USER_TIMINGS&&void 0!==self.performance&&self.performance.mark&&(this.startMark=`${this.$className} ${this.instanceId}: Start`,self.performance.mark(this.startMark))}getValue(e){return this.all[e]}runPreCommitValidation(){this.validators.forEach((e=>{const[t,n,r]=e;for(const e of t)if(!e(this))return;for(const e of n)if(null==this.getValue(e))throw __LOG__(2)`${this.$className}.${e} should be nonnull`,new TypeError(`${this.$className}.${e} should be nonnull`);for(const[e,t]of r)if(!e(this))throw __LOG__(2)`${this.$className} event validator failed condition ${t}`,new TypeError(`${this.$className} event validator failed condition ${t}`)}))}commit(){this.runPreCommitValidation();const e=(0,o.getWamRuntime)();e?e.commit(this,!1):(0,i.queueEvent)(this,!1)}commitAndWaitForFlush(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runPreCommitValidation();const t=(0,o.getWamRuntime)();return null==t?((0,i.queueEvent)(this,e),Promise.resolve()):t.commit(this,e)}setTime(e){this.eventTime=e||Date.now()}}t.WamEvent=l},97496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processQueuedJobs=function(){const e=(0,r.getWamRuntime)();if(null==e)return;i.splice(0).forEach((t=>{2===t.length?e.commit(...t):e.set(t[1],t[2])}))},t.queueEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.push([e,t])},t.queueMetric=function(e,t){i.push([!1,e,t])};var r=n(5117);const i=[]},5117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWamRuntime=function(){return i},t.setWamRuntime=function(e){if(null!=i)return void __LOG__(4,void 0,new Error)`wamRuntime already set`;i=e,(0,r.processQueuedJobs)()};var r=n(97496);let i=null},51337:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_RETRY=void 0,t.maybePostMessageHighRetryCountMetric=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(38820),a=n(19909),s=n(98701),l=n(93828);function u(){return(u=(0,i.default)((function*(e,t){if(e<5)return;const n=new o.MessageHighRetryCountWamEvent({retryCount:e,messageType:(0,l.getMessageTypeFromMsgInfoType)(t.type)}),r=(0,l.getWamE2eSenderType)(t.author);null!=r&&(n.e2eSenderType=r);const i=t.chat;if(null==i?void 0:i.isGroup()){const e=yield(0,s.getGroupMetrics)(i);null!=(null==e?void 0:e.deviceSizeBucket)&&(n.deviceSizeBucket=e.deviceSizeBucket),null!=(null==e?void 0:e.participantCount)&&e.participantCount>(0,a.getGroupSizeBypassingSampling)()&&(n.weight=0)}n.commit()}))).apply(this,arguments)}t.MAX_RETRY=5},97575:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.postSenderKeyExpiredMetric=function(e){let{chatId:t,expiryReason:n,deviceCount:r}=e;const l=new o.SenderKeyExpiredWamEvent;null!=n&&(l.expiryReason=n);if(null!=t){const e=(0,s.createWidFromWidLike)(t);l.chatType=(0,i.getMessageChatTypeFromWid)(e)}null!=r&&r>0&&(l.deviceSizeBucket=(0,a.default)(r));l.commit()};var i=n(15264),o=n(35033),a=r(n(26398)),s=n(51017)},11206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postUnknownStanzaMetric=function(e){var t;new r.UnknownStanzaWamEvent({unknownStanzaTag:e.tag,unknownStanzaType:null===(t=e.attrs.type)||void 0===t?void 0:t.toString()}).commit()};var r=n(96882)},15610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chatJidToChatWid=function(e){return(0,i.toChatWid)((0,i.createWid)(e))},t.deviceJidToDeviceWid=function(e){return(0,i.createDeviceWid)(e)},t.deviceJidToUserWid=function(e){return(0,i.toUserWid)((0,i.createWid)(e))},t.groupJidToWid=function(e){return(0,i.createWid)(e)},t.jidWithTypeToWid=function(e){const t=(0,r.extractJidFromJidWithType)(e);return(0,i.createWid)(t)},t.newsletterJidToWid=function(e){return(0,i.createWid)(e)},t.userJidToUserWid=function(e){return(0,i.createUserWid)(e)};var r=n(96955),i=n(51017)},27112:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(44037),o=n(25303),a=r(n(39387)),s=r(n(98463)),l=n(41404),u=n(60050),c=r(n(89482));const d="16505361212@c.us",p=/^1313555\d{4}$|^131655500\d{2}$/,f=["name","short","notify"];class _{constructor(e,t){let{intentionallyUsePrivateConstructor:n}=t;if(!n)throw(0,c.default)("You should use WidFactory.createWid() instead of the Wid constructor. If you absolutely must use the constructor, pass {intentionallyUsePrivateConstructor: true} as a second parameter.");const r=(0,u.validateAndGetParts)(e,(0,l.bizHostedDevicesEnabled)());if(null==r)throw __LOG__(2)`Invalid wid: ${e}`,(0,c.default)("wid error: invalid wid");const i=[],o=r.userPart,a=r.devicePart,s=r.serverPart.toLowerCase();let d;switch(s){case"s.whatsapp.net":d="c.us";break;default:d=s}if(this.server=d,null==o)throw __LOG__(2)`wid represents server and should not be used: ${e}`,(0,c.default)("wid error: wid represents server and should not be used");if(this.user=o,i.push(this.user),null!=a){if("c.us"!==this.server&&"lid"!==this.server&&"hosted"!==this.server&&"hosted.lid"!==this.server)throw __LOG__(2)`wrong server for wid with device present: ${e}`,(0,c.default)("wid error: wrong server for wid with device present");const t=parseInt(a,10);t&&(i.push(":"),i.push(t),this.device=t)}if((0,l.bizHostedDevicesEnabled)()&&this.isHosted()&&(null==this.device||99!==this.device))throw __LOG__(2)`@hosted jid must have device id of 99`,(0,c.default)("wid error: unexpected device id in hosted wid");i.push("@"),i.push(this.server),this._serialized=i.join("")}getUserPartForLog(){if(this.isGroup()){const e=this.user.split("-");if(2===e.length){const[t,n]=e;return`${t.slice(-4)}-${n}`}}return this.user.slice(-4)}toString(e){if(e){let t,n;const r=e.legacy&&"c.us"===this.server?"s.whatsapp.net":this.server;e.formatFull?(n=`:${this.device||0}`,t=".0"):n=null!=this.device&&0!==this.device?`:${this.device}`:"";const i=e.forLog?this.getUserPartForLog():this.user;if(e.formatFull||e.legacy&&"c.us"===this.server||e.forLog)return[i,t,n,"@",r].join("")}return this._serialized}toLogString(){return this.toString({forLog:!0,legacy:!1})}toJid(){return this.toString({legacy:!0})}getJidServer(){return"c.us"===this.server?i.WA_USER_JID_SUFFIX:this.server}getSignalAddress(){const e=null!=this.device&&0!==this.device?`:${this.device}`:"";let t="";if(this.isLid()&&(t="@lid"),this.isHosted()){if(!(0,l.bizHostedDevicesEnabled)())throw(0,c.default)("Unepxected hosted jid");if(":99"!==e)throw(0,c.default)("Hosted jid with wrong device id");t="@hosted"}return[this.user,e,t].join("")}getDeviceId(){const e=this.device;return null==e?0:e}equals(e){return e instanceof _&&this.toString()===e.toString()}isLessThan(e){return e instanceof _&&this.toString()<e.toString()}isGreaterThan(e){return e instanceof _&&this.toString()>e.toString()}isCompanion(){return null!=this.device&&this.device!==i.DEFAULT_DEVICE_ID}isSameAccount(e){return this.server===e.server&&this.user===e.user}isUser(){return!(!(0,l.bizHostedDevicesEnabled)()||"hosted"!==this.server)||("c.us"===this.server||"lid"===this.server)}isLid(){return"lid"===this.server}isUserNotPSA(){return this.isUser()&&!this.isPSA()}isBroadcast(){return"broadcast"===this.server}isOfficialBizAccount(){return this.toString()===d}isEligibleForUSync(){return this.isUser()&&!this.isPSA()}isGroup(){return"g.us"===this.server}isGroupCall(){return"call"===this.server}isServer(){return"server"===this.user.toLowerCase()&&"c.us"===this.server}isPSA(){return"0"===this.user&&"c.us"===this.server}isIAS(){return"16508638904"===this.user&&"c.us"===this.server}isStatusV3(){return"status"===this.user.toLowerCase()&&"broadcast"===this.server}isSupportAccount(){return(0,s.default)(this.user)}isCAPISupportAccount(){return(0,a.default)(this.user)}isNewsletter(){return"newsletter"===this.server}isBot(){return"c.us"===this.server&&p.test(this.user)&&(null==this.device||0===this.device)}toJSON(){return this.toString()}isHosted(){return"hosted"===this.server||"hosted.lid"===this.server||99===this.device}static isXWid(e,t){return(0,o.isString)(t)?t.split("@")[1]===e:t instanceof _?t.server===e:(void 0!==t&&__LOG__(2)`wid:isXWid called on nonstring: + ${String(t)}`,!1)}static isHostedDeviceId(e){return 99===e}static isUser(e){return _.isXWid("c.us",e)||_.isXWid("lid",e)}static isLid(e){return _.isXWid("lid",e)}static isBroadcast(e){return _.isXWid("broadcast",e)}static isGroup(e){return _.isXWid("g.us",e)}static isNewsletter(e){return _.isXWid("newsletter",e)}static isHosted(e){return!!(0,l.bizHostedDevicesEnabled)()&&(_.isXWid("hosted",e)||_.isXWid("hosted.lid",e))}static isGroupCall(e){return _.isXWid("call",e)}static isWid(e){return(0,o.isString)(e)?(0,u.validateWid)(e,(0,l.bizHostedDevicesEnabled)()):e instanceof _}static canBeWid(e){return!e||!f.includes(e)}static isServer(e){return(0,o.isString)(e)?"server@c.us"===e.toLowerCase():e instanceof _&&e.isServer()}static isPSA(e){return(0,o.isString)(e)?"0@c.us"===e.toLowerCase():e instanceof _&&e.isPSA()}static isIAS(e){return(0,o.isString)(e)?"16508638904@c.us"===e.toLowerCase():e instanceof _&&e.isIAS()}static isStatusV3(e){return(0,o.isString)(e)?e.toLowerCase()===i.STATUS_JID:e instanceof _&&e.isStatusV3()}static isSupportAccount(e){return(0,o.isString)(e)?(0,s.default)(e.split("@")[0]):e instanceof _&&e.isSupportAccount()}static isCAPISupportAccount(e){return(0,o.isString)(e)?(0,a.default)(e.split("@")[0]):e instanceof _&&e.isCAPISupportAccount()}static isOfficialBizAccount(e){return(0,o.isString)(e)?e.toLowerCase()===d:e instanceof _&&e.isOfficialBizAccount()}static isEligibleForUSync(e){return this.isUser(e)&&!this.isPSA(e)}static user(e){return(0,o.isString)(e)?e.split("@")[0]:e instanceof _?e.user:void 0}static equals(e,t){return e instanceof _||t instanceof _?e instanceof _&&e.equals(t):e===t}static isLessThan(e,t){return e instanceof _&&t instanceof _&&e.toString()<t.toString()}static isGreaterThan(e,t){return e instanceof _&&t instanceof _&&e.toString()>t.toString()}}t.default=_},51017:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createDeviceWid=h,t.createDeviceWidFromDeviceListPk=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[r,i="c.us"]=e.split("@");if(!0===n){if((0,a.bizHostedDevicesEnabled)())return g(r,t);throw(0,d.default)("WAWebWidFactory: feature unsupported")}return _(r,i,t)},t.createDeviceWidFromUserAndDevice=_,t.createHostedDeviceWid=f,t.createHostedDeviceWidFromUserAndDevice=g,t.createUserWid=A,t.createUserWidFromDeviceListPk=function(e){const[t,n="c.us"]=e.split("@");return A(t,n)},t.createWid=p,t.createWidFromWidLike=function(e){if(e instanceof u.default)return e;if("string"==typeof e)return p(e);return p(e._serialized)},t.hostedDeviceWidToUserWid=function(e){if((0,a.bizHostedDevicesEnabled)()){if(!e.isHosted())throw(0,d.default)("hostedDeviceWidToUserWid: wid is not a hosted wid");const t=`${e.user}@c.us`;return p(t)}throw(0,d.default)("Wid factory feature unsupported")},t.isWidlike=function(e){if(!e)return!1;if(u.default.isWid(e))return!0;if(e&&"object"==typeof e&&u.default.isWid(e._serialized))return!0;return!1},t.toChatWid=function(e){if(e.isUser())return m(e);return e},t.toGroupWid=function(e){if(e.isUser())throw(0,d.default)("toGroupWid: wid is a user wid");return e},t.toNewsletterWid=function(e){if(e.isNewsletter())return e;throw(0,d.default)("toNewsletterWid: wid is not a newsletter wid")},t.toUserWid=m,t.widFromSignalAddress=function(e){const t=(0,l.getSignalLikeAddressName)(e);return u.default.isLid(t)||u.default.isHosted(t)?p(t):p((0,s.toPhoneUserJid)(t))};var i=r(n(49619)),o=n(25303),a=n(41404),s=n(96955),l=n(49178),u=r(n(27112)),c=r(n(23458)),d=r(n(89482));function p(e){const t=null===c.default||void 0===c.default?void 0:c.default.cache;let n;return(0,a.bizHostedDevicesEnabled)()&&u.default.isHosted(e)?(0,i.default)(f(e),"createHostedDeviceWid(wid)"):(t?(n=c.default.cache[e],n||(n=new u.default(e,{intentionallyUsePrivateConstructor:!0}),c.default.cache[e]=n)):n=new u.default(e,{intentionallyUsePrivateConstructor:!0}),n)}function f(e){if((0,a.bizHostedDevicesEnabled)()){const t=null===c.default||void 0===c.default?void 0:c.default.cache;if(t[e]){return t[e]}if(!(0,o.isString)(e)||!e.endsWith("@hosted")&&!e.endsWith("@hosted.lid"))throw(0,d.default)("Hosted jid create called with wrong domain type");const n=new u.default(e,{intentionallyUsePrivateConstructor:!0});if(!n.isHosted())throw(0,d.default)("createHostedDeviceWid is called with invalid input");const r=n;return t&&(t[e]=r),r}throw(0,d.default)("createDeviceWidFromDeviceListPk: unsupported")}function _(e,t,n){return h(`${e}:${n}@${t}`)}function g(e,t){return f(`${e}:${t}@hosted`)}function h(e){const t=p(e);if(!t.isUser())throw __LOG__(4,void 0,new Error)`createDeviceWid: ${e} is not a valid device jid with user domain`,(0,d.default)("createDeviceWid is called with invalid user string");return t}function A(e,t){let n;if((0,o.isString)(e)&&(e.endsWith("@c.us")||e.endsWith("@s.whatsapp.net")||e.endsWith("@lid")))n=e;else{n=`${e}@${null!=t&&"hosted"!==t?t:"c.us"}`}if(n=p(n),null==n.device||0===n.device)return n;throw __LOG__(4,void 0,new Error)`createUserWid: ${e} is not a valid user jid`,(0,d.default)("createUserWid is called with invalid user string")}function m(e){if(!e.isUser())throw(0,d.default)("asUserWid: wid is not a user wid");return null==e.device||0===e.device?e:A(e.user,e.server)}},29853:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.jsonWidReviver=function(e,t){return a(e,t)},t.widReviver=a;var i=r(n(27112)),o=n(51017);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default.isWid,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.createWid,a=t;switch(e){case"author":case"broadcast":case"chat":case"descOwner":case"from":case"gid":case"id":case"jid":case"owner":case"participant":case"quotedRemoteJid":case"quotedParticipant":case"remote":case"subjectOwner":case"s_o":case"to":case"wid":case"changeNumberNewJid":case"changeNumberOldJid":case"recipient":case"paymentMessageReceiverJid":case"parentGroup":case"phoneNumber":case"revokeSender":case"ephemeralSettingUser":case"newsletterId":case"invokedBotWid":case"botTargetSenderJid":n(t)&&(a=r(t));break;default:{const i=parseInt(e,10);!isNaN(i)&&n(t)&&(a=r(t));break}}return a}},23458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n={cache:{},delete(){n.cache={}}};var r=n;t.default=r},14356:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.widToChatJid=function(e){const t=s(e);if("group"===t.jidType)return t.groupJid;if("phoneUser"===t.jidType||"lidUser"===t.jidType)return t.userJid;throw __LOG__(4,void 0,new Error)`widToChatJid: "${e.toString()}" is not a ChatJid`,(0,a.default)("widToChatJid: can not convert wid to ChatJid")},t.widToDeviceJid=l,t.widToGroupJid=function(e){const t=s(e);if("group"===t.jidType)return t.groupJid;throw __LOG__(4,void 0,new Error)`widToGroupJid: "${e.toString()}" is not a GroupJid`,(0,a.default)("widToGroupJid: can not convert wid to GroupJid")},t.widToJidWithType=s,t.widToMulticastJid=function(e){const t=s(e);if("group"===t.jidType)return t.groupJid;if("status"===t.jidType)return t.statusJid;if("broadcast"===t.jidType)return t.broadcastJid;throw __LOG__(4,void 0,new Error)`widToMulticastJid: "${e.toString()}" is not a MulticastJid`,(0,a.default)("widToMulticastJid: can not convert wid to MulticastJid")},t.widToMyJids=function(e){if(null!=e){const t=l(e);return{userJid:(0,i.extractUserJid)(t),deviceJid:t}}},t.widToUserJid=function(e){if(e.isPSA())throw __LOG__(4,void 0,new Error,!0)`widToUserJid: wid is a PSA jid`,SEND_LOGS("invalid-psa-user-jid"),(0,a.default)("widToUserJid: can not convert wid to UserJid");const t=s(e);if("phoneUser"===t.jidType||"lidUser"===t.jidType)return t.userJid;throw __LOG__(4,void 0,new Error)`widToUserJid: "${e.toString()}" is not a UserJid`,(0,a.default)("widToUserJid: can not convert wid to UserJid")};var i=n(44037),o=n(96955),a=r(n(89482));function s(e){const t=e.toJid(),n=(0,o.interpretAndValidateJid)(t);if("unknown"===n.jidType)throw __LOG__(4,void 0,new Error)`widToJidWithType: "${t}" is not a valid jid`,(0,a.default)("widToJidWithType: unknown jid type");return n}function l(e){if(e.isPSA())throw __LOG__(4,void 0,new Error,!0)`widToDeviceJid: wid is a PSA jid`,SEND_LOGS("invalid-psa-user-jid"),(0,a.default)("widToUserJid: can not convert wid to UserJid");const t=s(e);if("phoneDevice"===t.jidType||"lidDevice"===t.jidType)return t.deviceJid;if("phoneUser"===t.jidType)return(0,o.defaultDeviceJidForUser)(t.userJid);if("lidUser"===t.jidType)return(0,o.defaultLidDeviceJidForLidUserJid)(t.userJid);throw __LOG__(4,void 0,new Error)`widToDeviceJid: "${e.toString()}" is not a DeviceJid`,(0,a.default)("widToDeviceJid: can not convert wid to DeviceJid")}},60050:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Domains=void 0,t.validateAndGetParts=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return null;const n=e.match(/(.*)@(.*)/);if(Boolean(!1)||t){if(n&&"hosted"===n[2]){const e=n[1].match(_);return e?{serverPart:"hosted",userPart:e[1],devicePart:"99"}:null}if(n&&"hosted.lid"===n[2]){const e=n[1].match(g);return e?{serverPart:"hosted.lid",userPart:e[1],devicePart:"99"}:null}}if(null==n)return"call"===e||"s.whatsapp.net"===e?{serverPart:e}:null;const i=n[1],o=r.cast(n[2]);if(null==o)return __LOG__(3)`validateAndGetParts: Domain not supported`,null;const a=i.match(h[n[2]]);if(!a)return null;switch(o){case r.BROADCAST:return{serverPart:r.BROADCAST,userPart:a[1]};case r.CALL:return{serverPart:r.CALL,userPart:a[1]};case r.G_US:return{serverPart:r.G_US,userPart:a[1]};case r.NEWSLETTER:return{serverPart:r.NEWSLETTER,userPart:a[1]};case r.C_US:return{serverPart:r.C_US,userPart:a[1],devicePart:a[3]};case r.S_WHATSAPP_NET:return{serverPart:r.S_WHATSAPP_NET,userPart:a[1],devicePart:a[3]};case r.LID:return{serverPart:r.LID,userPart:a[1],devicePart:a[3]};case r.MSGR:return{serverPart:r.LID,userPart:a[1],devicePart:a[2]}}return null},t.validateWid=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return!1;const n=e.match(/(.*)@(.*)/);if(null==n)return"call"===e||"s.whatsapp.net"===e;const r=n[1],i=n[2];if(Boolean(!1)||t){if("hosted"===i)return _.test(r);if("hosted.lid"===i)return g.test(r)}const o=h[i];if(null==o)return!1;return h[i].test(r)};const r=n(76672)({BROADCAST:"broadcast",CALL:"call",C_US:"c.us",G_US:"g.us",LID:"lid",MSGR:"msgr",S_WHATSAPP_NET:"s.whatsapp.net",NEWSLETTER:"newsletter"});t.Domains=r;const i=/[0-9]{1,2}/,o=/[1-9][0-9]{0,14}/,a=/0/,s=/[1-9][0-9]{0,19}/,l=/(?!10)[1-9][0-9]{4,19}/,u=new RegExp(`^(${l.source}[-]${/[1-9][0-9]{9}/.source}$|^${s.source})$`),c=new RegExp(`^(${s.source}$|${["status","location","chat"].map((e=>"^"+e+"$")).join("|")})`,"i"),d=new RegExp(`^(0$|^${l.source})([.]${a.source})?(?:[:](${i.source}))?$`),p=new RegExp(`^(${o.source})([.]${a.source})?(?:[:](${i.source}))?$`),f=new RegExp(`^(${s.source})(?:[:](${/[1-9][0-9]{0,2}/.source}))?$`),_=new RegExp(`^(${l.source})(?=:99$)`),g=new RegExp(`^(${o.source})(?=:99$)`),h={broadcast:c,call:/^([0-9a-f]{18,32})$/i,"c.us":d,"g.us":u,lid:p,msgr:f,"s.whatsapp.net":d,newsletter:new RegExp(`^(${s.source})$`)}},32080:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOSTED_DEVICE_ID=void 0,t.fanoutListContainsHostedDevice=function(e){return e.some((e=>e.isHosted()))},t.isCoexSystemMsgType=function(e){if(!(0,r.bizHostedDevicesEnabled)()||null==e)return!1;return l.includes(e)},t.isMeOrCurrentContactHosted=function(e){if(!(0,r.bizHostedDevicesEnabled)())return!1;if((0,s.getIsHostedMeAccountFromLocalStorage)()||!0===e.isHosted)return!0;return!1},t.triggerUsyncForCoexDeviceAdd=function(e,t){var n;if(!(0,r.bizHostedDevicesEnabled)()||null==e)return;99===(null===(n=e[0])||void 0===n?void 0:n.id)&&u(t)},t.triggerUsyncForCoexUpdate=u;var r=n(41404),i=n(75968),o=n(1723),a=n(60223),s=n(56333);t.HOSTED_DEVICE_ID=99;const l=["biz_account_type_is_hosted","biz_account_type_changed_to_hosted","biz_me_account_type_is_hosted","biz_me_account_type_is_hosted_transition"];function u(e){o.OfflineMessageHandler.isResumeFromRestartComplete()?(0,a.syncDeviceListJob)([e],null,null):i.OfflinePendingDeviceCache.addOfflinePendingDevice(e.toString(),null)}},41404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bizHostedDevicesEnabled=function(){return!1;return(0,r.getABPropConfigValue)("adv_accept_hosted_devices")},t.bizHostedDevicesSystemMessageEnabled=function(){return!1;return(0,r.getABPropConfigValue)("adv_accept_hosted_devices")},t.hostedDeviceSecurityCodeVerificationEnabled=function(){return!1;return(0,r.getABPropConfigValue)("adv_accept_hosted_devices")},t.smbHostedPrimaryPairingAllowed=function(){const{isSMB:e}=n(43744);if(!e())return!1;return!0};var r=n(83741)},26075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addToOfflineBizHostedSenderICDCProcessedCache=function(e){i.add(e)},t.hasOfflineBizHostedSenderICDCProcessedForSender=function(e){return i.has(e)},t.removeFromOfflineBizHostedSenderICDCProcessedCache=function(e){i.delete(e)};var r=n(46316);const i=new Set;r.Cmd.on("offline_delivery_end",(()=>{i.clear()}))},26099:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleBizBotMsgs=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(68739),a=n(42467),s=n(74557),l=n(95160),u=n(94007),c=n(51017),d=n(49625);function p(){return(p=(0,i.default)((function*(e){const t=new Map;e.forEach((e=>{const n=e.from.toJid();null!=n&&!t.has(n)&&e.bizBotType&&t.set(n,e.bizBotType)}));const n=Array.from(t.keys()),r=yield f(n),l=[],u=[];for(const[e,n]of t.entries()){var d;const t=null===(d=r.get(e))||void 0===d?void 0:d.bizBotSystemMsgType;n===a.BizBotType.BIZ_1P&&t!==a.BizBotType.BIZ_1P?(l.push((0,o.genBizBot1pDisclosureMessage)((0,c.createWid)(e))),u.push({id:e,bizBotSystemMsgType:a.BizBotType.BIZ_1P})):n===a.BizBotType.BIZ_3P&&t!==a.BizBotType.BIZ_3P&&(l.push((0,o.genBizBot3pDisclosureMessage)((0,c.createWid)(e))),u.push({id:e,bizBotSystemMsgType:a.BizBotType.BIZ_3P}))}return l.length?(yield(0,s.getStorage)().lock(["chat"],function(){var e=(0,i.default)((function*(e){let[t]=e;yield Promise.all([t.bulkCreateOrMerge(u)])}));return function(){return e.apply(this,arguments)}}()),l):[]}))).apply(this,arguments)}function f(){return _.apply(this,arguments)}function _(){return(_=(0,i.default)((function*(e){if(!(0,l.isWorker)())return(0,d.workerSafeSendAndReceive)("getBizBotData",{chatIds:e.map(c.createWid)});const t=new Map;return(yield(0,u.getChatTable)().bulkGet(e)).map((e=>{e&&t.set(e.id,{bizBotSystemMsgType:e.bizBotSystemMsgType})})),t}))).apply(this,arguments)}},63006:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{protocolMessage:r}=t;if(null==r)return;const{type:u,botFeedbackMessage:c}=r;if(u!==l.Message$ProtocolMessage$Type.BOT_FEEDBACK_MESSAGE)return;if(null==c)return;const{messageKey:d,kind:p,text:f}=c;if(null==d)return;if(null==p)return;let _;switch(p){case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_POSITIVE:_=o.BotFeedbackKind.POSITIVE;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_GENERIC:_=o.BotFeedbackKind.NEGATIVE_GENERIC;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_HELPFUL:_=o.BotFeedbackKind.NEGATIVE_HELPFUL;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_INTERESTING:_=o.BotFeedbackKind.NEGATIVE_INTERESTING;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_ACCURATE:_=o.BotFeedbackKind.NEGATIVE_ACCURATE;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_SAFE:_=o.BotFeedbackKind.NEGATIVE_SAFE;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_OTHER:_=o.BotFeedbackKind.NEGATIVE_OTHER;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_REFUSED:_=o.BotFeedbackKind.NEGATIVE_REFUSED;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:_=o.BotFeedbackKind.NEGATIVE_NOT_VISUALLY_APPEALING;break;case l.Message$BotFeedbackMessage$BotFeedbackKind.BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:_=o.BotFeedbackKind.NEGATIVE_NOT_RELEVANT_TO_TEXT}if(null==_)return;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.PROTOCOL,kind:s.MsgKind.Protocol,subtype:"bot_feedback",protocolMessageKey:(0,a.translateRegularMessageKeyToLocalReference)(d,n),botFeedbackKind:_,botFeedbackText:f}),contextInfo:null}};var i=r(n(81109)),o=n(42467),a=n(54468),s=n(73602),l=n(77026)},29817:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r}=e;if((null===(t=n.protocolMessage)||void 0===t?void 0:t.type)!==a.Message$ProtocolMessage$Type.REQUEST_WELCOME_MESSAGE)return;return{msgData:(0,i.default)((0,i.default)({},r),{},{type:o.MSG_TYPE.PROTOCOL,kind:o.MsgKind.Protocol,subtype:"bot_request_welcome"}),contextInfo:null}};var i=r(n(81109)),o=n(73602),a=n(77026)},22962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("bot-profile").version((0,i.botProfileCreateTable)(),[n("id"),t("name"),t("attrs"),t("description"),t("category"),t("isDefault"),t("prompts"),t("personaId"),t("commands"),t("commandsDescription")]).view((e=>e))},t.getBotProfileTable=function(){return(0,r.getStorage)().table("bot-profile")};var r=n(74557),i=n(20746),o=n(65717)},54760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USyncBotProfileProtocol=void 0,t.botProfileParser=function(e){var t;e.assertTag("bot");const n=e.maybeChild("error");if(n)return{errorCode:n.attrInt("code"),errorText:n.attrString("text")};const r=e.child("profile"),i=r.child("name").contentString(),o=r.child("attributes").contentString(),a=r.child("description").contentString(),s=r.child("category").contentString(),l=r.maybeChild("default"),u="true"===(null==l?void 0:l.contentString()),c=function(e){if(null==e)return[];const t=[];return e.forEachChildWithTag("prompt",(e=>{var n,r;const i=e.maybeChild("emoji"),o=null!==(n=null==i?void 0:i.contentString())&&void 0!==n?n:"",a=e.maybeChild("text"),s=null!==(r=null==a?void 0:a.contentString())&&void 0!==r?r:"";t.push({emoji:o,text:s})})),t}(r.maybeChild("prompts")),d=null!==(t=r.maybeAttrString("persona_id"))&&void 0!==t?t:"",p=r.maybeChild("commands"),{commands:f,commandsDescription:_}=function(e){var t;if(null==e)return{commands:[],commandsDescription:""};const n=[],r=e.maybeChild("description"),i=null!==(t=null==r?void 0:r.contentString())&&void 0!==t?t:"";return e.forEachChildWithTag("command",(e=>{var t,r;const i=e.maybeChild("name"),o=null!==(t=null==i?void 0:i.contentString())&&void 0!==t?t:"",a=e.maybeChild("description"),s=null!==(r=null==a?void 0:a.contentString())&&void 0!==r?r:"";n.push({name:o,description:s})})),{commands:n,commandsDescription:i}}(p);return{name:i,attributes:o,description:a,category:s,isDefault:u,prompts:c,personaId:d,commands:f,commandsDescription:_}};var r=n(42811);t.USyncBotProfileProtocol=class{getName(){return"bot"}getQueryElement(){return(0,r.wap)("bot",null,(0,r.wap)("profile",{v:"1"}))}getUserElement(e){const t=e.getPersonaId();return(0,r.wap)("bot",null,(0,r.wap)("profile",{persona_id:null!=t?(0,r.CUSTOM_STRING)(t):r.DROP_ATTR}))}}},63007:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bizBotConsentDismissalCooldown=function(){return(0,i.getABPropConfigValue)("wabai_consent_cooldown")},t.isBizBot1pEnabled=function(){return(0,i.getABPropConfigValue)("wabai_message_rendering_enabled")},t.isBizBot1pFeedbackEnabled=function(){return(0,i.getABPropConfigValue)("wabai_message_feedback_enabled")},t.isBizBot3pAvailable=function(){return 2===(0,i.getABPropConfigValue)("bot_3p_status")},t.isBizBot3pEnabled=function(){return 0!==(0,i.getABPropConfigValue)("bot_3p_status")},t.isBizBotConsentRequired=function(){return(0,i.getABPropConfigValue)("wabai_consent_required")},t.isBotCarouselEnabled=function(){return p()&&(0,i.getABPropConfigValue)("bonsai_carousel_enabled")},t.isBotChatListEntryPointEnabled=function(){return d()&&g()&&(0,i.getABPropConfigValue)("bonsai_chat_list_entry_point_enabled")},t.isBotEnabled=d,t.isBotIcebreakerUiV2Enabled=function(){return!1},t.isBotMsgParseEnabledForFutureproofOrFullRecv=function(){return d()||h()||p()},t.isBotPerWordStreamingEnabled=function(){return p()&&!0===(0,i.getABPropConfigValue)("bonsai_word_streaming_enabled")},t.isBotPttEnabled=function(){return d()&&!0===(0,i.getABPropConfigValue)("bonsai_ptt_enabled")},t.isBotReceiveEnabled=p,t.isBotResponseFutureproofMsgEnabled=h,t.isMetaBotCommandsEnabled=function(){return d()&&(0,i.getABPropConfigValue)("bot_commands_1p_enabled")},t.shouldAnimateAsBotStream=function(e){if(!d())return!1;return Boolean((0,l.getIsMetaBotResponse)(e))||e.subtype===o.BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE};var i=n(83741),o=n(81277),a=r(n(14950)),s=n(43744),l=n(26368),u=n(25993),c=n(63342);function d(){return!(0,s.isSMB)()&&((!(0,i.getABPropConfigValue)("bonsai_english_only")||"en"===a.default.getLanguage())&&(f()?function(){if(!f())return!1;if(!g())return!1;if(!_())return!1;return(0,c.getBotWaitlistState)()===u.HistorySync$BotAIWaitListState.AI_AVAILABLE}():!f()&&_()&&g()))}function p(){return!0===(0,i.getABPropConfigValue)("bonsai_receiver_enabled")}function f(){return!0===(0,i.getABPropConfigValue)("bonsai_waitlist_enabled")}function _(){return!0===(0,i.getABPropConfigValue)("bonsai_enabled")}function g(){return!0===(0,i.getABPropConfigValue)("bonsai_entry_point_enabled")}function h(){return!0===(0,i.getABPropConfigValue)("bot_response_futureproof_message_enabled")}},81277:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE=void 0,t.genBotTypingIndicatorMessage=function(){return c.apply(this,arguments)},t.getBotTypingIndicatorTimeout=function(){return(0,o.getABPropConfigValue)("bonsai_ti_timeout_duration_ms")};var i=r(n(48926)),o=n(83741),a=n(1619),s=n(63007),l=r(n(60001)),u=r(n(27112));function c(){return(c=(0,i.default)((function*(e){var t;if(!(0,s.isBotEnabled)())return;const n=e.id;if(n instanceof u.default&&!n.isBot()&&!(null===(t=e.contact.businessProfile)||void 0===t?void 0:t.isBizBot3p))return;const r=new l.default({fromMe:!1,remote:n,id:l.default.newId_DEPRECATED()});(0,a.frontendFireAndForget)("addInitialBotTypingIndicatorToChat",{chatId:n,msgKey:r})}))).apply(this,arguments)}t.BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE="bot_typing_placeholder"},82447:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptMsmsgBotMessage=function(){return y.apply(this,arguments)},t.genBotMsgSecretFromMsgSecret=m;var i=r(n(48926)),o=n(89323),a=n(70362),s=n(70238),l=r(n(49619)),u=n(74773),c=r(n(60001)),d=n(90928),p=n(77026),f=n(10139),_=n(3885),g=n(14356),h=n(33655);const A="Bot Message";function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){const t=new o.Binary(e).readByteArray();return yield(0,s.extractAndExpand)(new Uint8Array(t),A,32)}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e,t){const n=(0,h.decodeProtobuf)(p.MessageSecretMessageSpec,e),r=n.encIv,i=n.encPayload,o=(0,_.assertGetMeUser)(),s={fromMe:!t.msgMeta.targetSenderJid||t.msgMeta.targetSenderJid.isSameAccount(o),remote:t.msgMeta.targetChatJid?(0,l.default)(t.msgMeta.targetChatJid,"parsedMsgPayload.msgMeta.targetChatJid"):t.msgInfo.chat,id:(0,l.default)(t.msgMeta.targetId,"parsedMsgPayload.msgMeta.targetId")};t.msgInfo.chat.isGroup()&&(s.participant=t.msgMeta.targetSenderJid);const A=new c.default(s);let E=d.msmsgMsgSecretCache.getMsmsgMsgSecretFromCache(A.toString());if(null==E){const e=yield(0,f.getMessageTable)().get(A.toString());E=(0,u.messageFromDbRow)((0,l.default)(e,"targetMsg")).messageSecret}const y=yield m((0,l.default)(E,"decryptSecretBase"));let v=t.msgInfo.externalId;const I=t.msgMeta.targetSenderJid?(0,g.widToUserJid)(t.msgMeta.targetSenderJid):(0,g.widToUserJid)((0,_.assertGetMeUser)()),T=(0,g.widToUserJid)((0,l.default)(t.msgInfo.author,"parsedMsgPayload.msgInfo.author"));let b=null;try{const e=yield S(v,I,T,y);b=yield(0,a.gcmDecrypt)(e,(0,l.default)(r,"encryptionIv"),(0,l.default)(i,"encryptedCiphertext"),`${v}\0${T}`)}catch(e){var M;v=(0,l.default)(null===(M=t.msgBotInfo)||void 0===M?void 0:M.botEditTargetId,"parsedMsgPayload.msgBotInfo?.botEditTargetId");const n=yield S(v,I,T,y);b=yield(0,a.gcmDecrypt)(n,(0,l.default)(r,"encryptionIv"),(0,l.default)(i,"encryptedCiphertext"),`${v}\0${T}`)}return b}))).apply(this,arguments)}function S(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e,t,n,r){const i=o.Binary.build(e,t,n).readBuffer();return yield(0,s.extractAndExpand)(new Uint8Array((0,l.default)(r,"decryptSecret")),i,32)}))).apply(this,arguments)}},68739:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSysMsgForIncomingBotInvoke=function(){return p.apply(this,arguments)},t.genBizBot1pDisclosureMessage=function(e){return(0,l.genNotificationMsg)(e,{type:u.MSG_TYPE.NOTIFICATION_TEMPLATE,subtype:"biz_bot_1p_disclosure",templateParams:[]})},t.genBizBot3pDisclosureMessage=function(e){return(0,l.genNotificationMsg)(e,{type:u.MSG_TYPE.NOTIFICATION_TEMPLATE,subtype:"biz_bot_3p_disclosure",templateParams:[]})},t.genBotInitSystemMsg=function(e){return(0,l.genNotificationMsg)(e,{type:"notification_template",subtype:"bot_init",templateParams:[]})},t.getMaybeSysMsgForBotInvoke=function(e,t){var n;if((0,a.isBotEnabled)()&&!t.id.isBot()&&null!=e.botMessageSecret&&!0!==t.hasCreatedBotInvokeSystemMsg&&(null===(n=e.invokedBotWid)||void 0===n?void 0:n.isBot())){return f(t.id)}return null};var i=r(n(48926)),o=n(1619),a=n(63007),s=n(46316),l=n(45218),u=n(73602),c=n(94007);let d=new Map;function p(){return(p=(0,i.default)((function*(e){if((0,a.isBotReceiveEnabled)()&&!0!==(yield _(e))&&!e.isBot()){const t=f(e);return d.set(e.toJid(),!0),t}return null}))).apply(this,arguments)}function f(e){return(0,l.genNotificationMsg)(e,{type:u.MSG_TYPE.NOTIFICATION_TEMPLATE,subtype:"bot_invoke_disclaimer",templateParams:[]})}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){let t=null;if(s.Cmd.isMainStreamReadyMd){const n=yield(0,o.frontendSendAndReceive)("getChat",{chatId:e});return n&&(t=n.hasCreatedBotInvokeSystemMsg),t}const n=yield(0,c.getChatTable)().get(e.toString());return t=null==n?void 0:n.hasCreatedBotInvokeSystemMsg,d.set(e.toJid(),t),t}))).apply(this,arguments)}s.Cmd.on("logout",(()=>{d=new Map}))},67982:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.acceptBizBotTos=function(){return y.apply(this,arguments)},t.dismissBizBotTos=function(){S((0,o.unixTime)())},t.hasAcceptedBizBotTos=h,t.hasSeenAgentTos=f,t.hasSeenBizBotTos=function(e){if(e===l.BizBotType.BIZ_1P&&!(0,a.isBizBotConsentRequired)()||h())return!0;const t=d.default.getUser(p);if("number"!=typeof t)return!1;const n=(0,a.bizBotConsentDismissalCooldown)();if(n<0)return!0;if(0===n)return!1;return(0,o.unixTime)()-t<n},t.hasSeenBotTos=function(){return f()||_()||g()},t.hasSeenInvokeTos=_,t.hasSeenShortcutTos=g,t.markSeenAgentTos=function(){return A.apply(this,arguments)},t.markSeenInvokeTos=function(){return m.apply(this,arguments)},t.markSeenShortcutTos=function(){return E.apply(this,arguments)},t.setBizBotTosDismissalTime=S;var i=r(n(48926)),o=n(29987),a=n(63007),s=n(97007),l=n(42467),u=n(3557),c=n(81232),d=r(n(61112));const p="BIZ_BOT_TOS_DISMISSED_AT";function f(){return"ACCEPTED"===c.TosManager.getState(s.BOT_AGENT_TOS_ID)}function _(){return"ACCEPTED"===c.TosManager.getState(s.BOT_INVOKE_TOS_ID)}function g(){return"ACCEPTED"===c.TosManager.getState(s.BOT_SHORTCUT_TOS_ID)}function h(){return"ACCEPTED"===c.TosManager.getState(s.BIZ_BOT_TOS_ID)}function A(){return(A=(0,i.default)((function*(){yield(0,u.acceptUserDisclosureAction)(Number(s.BOT_AGENT_TOS_ID))}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(){yield(0,u.acceptUserDisclosureAction)(Number(s.BOT_INVOKE_TOS_ID))}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){yield(0,u.acceptUserDisclosureAction)(Number(s.BOT_SHORTCUT_TOS_ID))}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(){yield(0,u.acceptUserDisclosureAction)(Number(s.BIZ_BOT_TOS_ID))}))).apply(this,arguments)}function S(e){d.default.setUser(p,e)}},97007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BOT_SHORTCUT_TOS_ID=t.BOT_INVOKE_TOS_ID=t.BOT_AGENT_TOS_ID=t.BIZ_BOT_TOS_ID=void 0;t.BOT_AGENT_TOS_ID="20230901";t.BOT_INVOKE_TOS_ID="20230902";t.BOT_SHORTCUT_TOS_ID="20240216";t.BIZ_BOT_TOS_ID="20231027"},42467:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BotWelcomeMsgProtocolModeType=t.BotMsgEditType=t.BotMsgBodyType=t.BotFeedbackKind=t.BizBotType=t.BizBotAutomatedType=void 0;const r=n(76672)({FIRST:"first",INNER:"inner",LAST:"last",FULL:"full"});t.BotMsgEditType=r;const i=n(76672)({BIZ_1P:"biz_1p",BIZ_3P:"biz_3p"});t.BizBotType=i;const o=n(76672).Mirrored(["POSITIVE","NEGATIVE_GENERIC","NEGATIVE_HELPFUL","NEGATIVE_INTERESTING","NEGATIVE_ACCURATE","NEGATIVE_SAFE","NEGATIVE_OTHER","NEGATIVE_REFUSED","NEGATIVE_NOT_VISUALLY_APPEALING","NEGATIVE_NOT_RELEVANT_TO_TEXT"]);t.BotFeedbackKind=o;const a=n(76672)({UNKNOWN:"unknown",PARTIAL_1P:"1p_partial",FULL_3P:"3p_full"});t.BizBotAutomatedType=a;const s=n(76672)({NONE:"none",BASIC:"basic"});t.BotWelcomeMsgProtocolModeType=s;const l=n(76672)({PROMPT:"prompt",COMMAND:"command"});t.BotMsgBodyType=l},63342:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBotListLastRequestedTimestamp=function(){const e=u.default.get(l.MD_KEYS.BOT_LIST_LAST_REQUESTED_TIMESTAMP);return"number"==typeof e?e:0},t.getBotWaitlistState=function(){var e;let t=null;(0,a.isWorker)()||(t=u.default.get(l.MD_KEYS.BOT_AI_WAITLIST_STATE));if(null==t){const e=s.userPrefsIdb.get(l.MD_KEYS.BOT_AI_WAITLIST_STATE);null!=e&&"number"==typeof e&&u.default.set(l.MD_KEYS.BOT_AI_WAITLIST_STATE,e)}if("number"!=typeof t)return null;return null!==(e=o.HistorySync$BotAIWaitListState.cast(t))&&void 0!==e?e:null},t.getBotWaitlistStateFromIdb=function(){var e;const t=s.userPrefsIdb.get(l.MD_KEYS.BOT_AI_WAITLIST_STATE);if("number"!=typeof t)return null;return null!==(e=o.HistorySync$BotAIWaitListState.cast(t))&&void 0!==e?e:null},t.setBotListLastRequestedTimestamp=function(e){u.default.set(l.MD_KEYS.BOT_LIST_LAST_REQUESTED_TIMESTAMP,e)},t.setBotWaitlistState=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(25993),a=n(95160),s=n(17657),l=n(59356),u=r(n(61112));function c(){return(c=(0,i.default)((function*(e){(0,a.isWorker)()||u.default.set(l.MD_KEYS.BOT_AI_WAITLIST_STATE,e),yield s.userPrefsIdb.set(l.MD_KEYS.BOT_AI_WAITLIST_STATE,e)}))).apply(this,arguments)}},91828:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const n=(new TextEncoder).encode(null!==(t=e.body)&&void 0!==t?t:"");return self.crypto.getRandomValues(new Uint8Array(n.length))}},5938:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{conversation:l,extendedTextMessage:u}=t;if(null==l&&null==u)return;if(null!=l)return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.CHAT,kind:a.MsgKind.Chat,body:(0,o.convertToTextWithoutSpecialEmojis)(l)}),contextInfo:void 0};if((0,s.isUrlExtendedTextMessage)(u))return;return(0,s.parseExtendedTextMessageProto)({messageProtobuf:t,baseMessage:n,msgContext:r})};var i=r(n(81109)),o=n(54468),a=n(73602),s=n(71515)},12615:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,rcat:r,msgContext:u}=e;const{extendedTextMessage:c}=t;if(null==c)return;if(!(0,s.isUrlExtendedTextMessage)(c))return;const d=(0,o.default)((function(e){return l.default.hostname(e)})),p=d((null==c?void 0:c.canonicalUrl)||""),f=d((null==c?void 0:c.matchedText)||""),_=(0,s.parseExtendedTextMessageProto)({messageProtobuf:t,baseMessage:n,msgContext:u});return{msgData:(0,i.default)((0,i.default)((0,i.default)({},n),null==_?void 0:_.msgData),{},{type:a.MSG_TYPE.CHAT,kind:a.MsgKind.Chat,subtype:"url",canonicalUrl:p===f||""===p?null==c?void 0:c.canonicalUrl:f,rcat:r}),contextInfo:null==c?void 0:c.contextInfo}};var i=r(n(81109)),o=r(n(88306)),a=n(73602),s=n(71515),l=r(n(32890))},71515:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlExtendedTextMessage=function(e){return Boolean(null==e?void 0:e.matchedText)||Boolean(null==e?void 0:e.canonicalUrl)||Boolean(null==e?void 0:e.description)||Boolean(null==e?void 0:e.title)},t.parseExtendedTextMessageProto=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{extendedTextMessage:r}=t;if(null==r)return;const c=u.Message$ExtendedTextMessage$FontType;let d;if(null!=(null==r?void 0:r.font))switch(r.font){case c.SYSTEM:case c.SYSTEM_TEXT:case c.FB_SCRIPT:case c.SYSTEM_BOLD:case c.MORNINGBREEZE_REGULAR:case c.CALISTOGA_REGULAR:case c.EXO2_EXTRABOLD:case c.COURIERPRIME_BOLD:d=r.font}return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.CHAT,kind:l.MsgKind.Chat,body:(0,s.convertToTextWithoutSpecialEmojis)((null==r?void 0:r.text)||""),matchedText:null==r?void 0:r.matchedText,description:null==r?void 0:r.description,title:null==r?void 0:r.title,thumbnail:(0,a.decodeBytes)(null==r?void 0:r.jpegThumbnail)||"",richPreviewType:null==r?void 0:r.previewType,doNotPlayInline:null==r?void 0:r.doNotPlayInline,textColor:null==r?void 0:r.textArgb,backgroundColor:null==r?void 0:r.backgroundArgb,mediaKey:(0,a.decodeBytes)(null==r?void 0:r.mediaKey),mediaKeyTimestamp:null!=(null==r?void 0:r.mediaKeyTimestamp)?(0,o.numberOrThrowIfTooLarge)(r.mediaKeyTimestamp):n.mediaKeyTimestamp,thumbnailDirectPath:null==r?void 0:r.thumbnailDirectPath,thumbnailSha256:(0,a.decodeBytes)(null==r?void 0:r.thumbnailSha256),thumbnailEncSha256:(0,a.decodeBytes)(null==r?void 0:r.thumbnailEncSha256),thumbnailHeight:null==r?void 0:r.thumbnailHeight,thumbnailWidth:null==r?void 0:r.thumbnailWidth,inviteGrpType:null!=(null==r?void 0:r.inviteLinkGroupTypeV2)?(0,a.parseInviteGrpType)(null==r?void 0:r.inviteLinkGroupTypeV2):n.inviteGrpType,font:null!=d?d:n.font}),contextInfo:null==r?void 0:r.contextInfo}};var i=r(n(81109)),o=n(22101),a=n(57305),s=n(54468),l=n(73602),u=n(77026)},71188:(e,t,n)=>{"use strict";t.L8=void 0;const r=n(76672)({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1,INCOMPLETE:2,NOT_INCLUDED_IN_HIST_SYNC:3,COMPLETE_ON_DEMAND_SYNC_BUT_MORE_MSG_REMAIN_ON_PRIMARY:4});t.L8=r},1280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatEntryPoint=void 0;const r=n(76672).Mirrored(["NewsletterIntegrity","NewsletterChatlist","NewsletterDirectory","NewsletterDirectorySearch","NewsLetterRecommendation","NewsletterCreationFlow","NewsletterAdminInviteAcceptModal","NewsletterPostLinkCard","NewsletterLinkCard","NewsletterLinkCardButton","ForwardedNewsletterMessage","NewsletterCTAOnStatus","SimilarNewsletters","Link","Deeplink","Chatlist","Vcard","Notification","Unknown","BotChatListShortcut"]);t.ChatEntryPoint=r},1363:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.asComposeContentsType=function(e){if(null==e)return e;const{ctwaContext:t}=e,n=(0,i.default)(e,u);if(null!=t){const{conversionData:e,mediaType:r}=t,s=(0,i.default)(t,c);null!=e&&(s.conversionData=(0,o.stringToArrayBuffer)(e)),null!=r&&(s.mediaType=a.ContextInfo$ExternalAdReplyInfo$MediaType.cast(r)),n.ctwaContext=s}return n},t.asSerialisableComposeContentsType=function(e){const{ctwaContext:t}=e,n=(0,i.default)(e,s);if(null!=t){const{conversionData:e,mediaType:r}=t,a=(0,i.default)(t,l);null!=e&&(a.conversionData=(0,o.arrayBufferToString)(e)),null!=r&&(a.mediaType=r),n.ctwaContext=a}return n};var i=r(n(6479)),o=n(54080),a=n(77026);const s=["ctwaContext"],l=["conversionData","mediaType"],u=["ctwaContext"],c=["conversionData","mediaType"]},87901:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(45414),a=n(21130),s=n(93040),l=n(27921),u=n(1619),c=n(35309),d=n(38783),p=n(91686),f=n(80214),_=n(18106),g=n(22206),h=n(48840),A=n(64071),m=n(84388),E=n(69785);var y,S,v,I=(0,a.createAddonMsgProcessorWithRevokes)({isEnabled:()=>(0,_.isCommentMessageReceiverEnabled)(),convert:{fromHistorySyncMsg:e=>{if((0,_.isCommentMessageHistorySyncReceiverEnabled)()){const t=(0,p.parseWebMsgInfoComment)(e);return Promise.resolve(t)}return Promise.resolve([])}},parentKey_DEPRECATED:"targetMessageKey",updateCollection:(v=(0,i.default)((function*(e){yield(0,u.frontendSendAndReceive)("updateCommentCollection",{comments:e.add}),yield(0,u.frontendSendAndReceive)("removeFromCollection",{msgKeys:e.remove})})),function(){return v.apply(this,arguments)}),beforeUpsert:(S=(0,i.default)((function*(e){const t=[];for(const n of e)if(n.addonEncrypted){const e=yield(0,m.processEncCommentMsg)(n),r=(0,d.convertMessageToCommentMsgData)(e,n);t.push(r)}else t.push(n);return{result:t,upsert:t}})),function(){return S.apply(this,arguments)}),afterUpsert:(y=(0,i.default)((function*(e,t,n){if(t.mode===o.AddonProcessMode.HistorySync)return;const r=(0,c.commentCountByParents)(e);yield(0,l.updateReplyCountInParentMsgs)(r,n),(0,u.frontendFireAndForget)("updateReplyCount",{replyCountMap:r});const i=yield(0,E.filterChatsWithAddOnPreviewUpdates)(e.map((e=>(0,A.lastAddOnPreviewCandidateFromCommentRowType)((0,g.dbRowFromCommentMessage)(e)))));i.size>0&&(yield(0,h.updateDatabaseForLastAddOnPreview)(i),(0,u.frontendFireAndForget)("updateChatLastAddOnPreview",{chatMap:i}));const a=(0,f.genChatIdToLastTimestamp)(e);yield(0,s.bulkUpdateChatLastTimestamp)(a),(0,u.frontendFireAndForget)("updateChatLastTimestamp",{chatIdToLatestTimestamp:a})})),function(){return y.apply(this,arguments)})});t.default=I},80214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genChatIdToLastTimestamp=function(e){const t=new Map;for(const n of e){const e=n.id.remote,r=n.t;if(null==r)continue;const i=t.get(e);(null==i||null!=i&&i<r)&&t.set(e,r)}return t}},84388:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processEncCommentMsg=function(){return _.apply(this,arguments)};var i=r(n(48926)),o=n(53965),a=n(55199),s=n(87946),l=n(26368),u=n(77026),c=n(57095),d=n(51017),p=n(33655),f=r(n(89482));function _(){return(_=(0,i.default)((function*(e){const{targetMessageKey:t,encIv:n,encPayload:r}=e;if(null==n)throw new a.CommentMessageValidationError(a.CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_IV,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==r)throw new a.CommentMessageValidationError(a.CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_PAYLOAD,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==t)throw new a.CommentMessageValidationError(a.CommentMessageValidationErrorCode.MISSING_COMMENT_MESSAGE_KEY,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const i=yield(0,s.getMsgByMsgKey)(t);if(null==i)throw(0,f.default)("[messaging] - handling orphans");const _=e.author?e.author:e.id.participant,g=(0,l.getOriginalSender)(i);if(null==_)throw new a.CommentMessageValidationError(a.CommentMessageValidationErrorCode.MISSING_COMMENT_SENDER,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==g)throw new a.CommentMessageValidationError(a.CommentMessageValidationErrorCode.MISSING_ORIGINAL_MESSAGE_SENDER,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==(null==i?void 0:i.messageSecret))throw new a.CommentMessageValidationError(a.CommentMessageValidationErrorCode.MISSING_MESSAGE_SECRET,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const h=yield(0,o.decryptAddOn)({type:"comment",encryptedAddOn:r},{messageSecret:i.messageSecret,iv:n,stanzaId:i.id.id,originalMessageSender:g,addOnSender:(0,d.toUserWid)(_)});return(0,p.decodeProtobuf)(u.MessageSpec,h)}))).apply(this,arguments)}},22206:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.commentMessageFromDbRow=function(e){var t;const n=u.default.from(e.msgKey),r=u.default.from(e.parentMsgKey),l=(0,i.default)({id:n,parentMsgKey:r,ack:e.ack,t:e.t},(0,c.msgKeyToTargetInfo)(n,s.TranslateMsgKeyType.Addon));var f;if(!0===e.isOverwrittenByRevoke)return(0,i.default)((0,i.default)({},l),{},{type:d.MSG_TYPE.REVOKED,kind:d.MsgKind.RevokedAddon,subtype:(0,o.default)(e.subtype,"commentRow.subtype"),revokeSender:(0,p.createUserWid)(e.sender),revokeTimestamp:null!==(f=e.revokeTimestamp)&&void 0!==f?f:void 0,protocolMessageKey:null!=e.protocolMessageKey?u.default.from(e.protocolMessageKey):void 0});const _=(0,i.default)({},e);return(0,a.movFieldFromOpaqueDataBackToMsg)(_),(0,i.default)((0,i.default)({},l),{},{type:d.MSG_TYPE.COMMENT,kind:d.MsgKind.CommentDecrypted,from:(0,p.createUserWid)(_.sender),body:_.body,sender:(0,p.createUserWid)(_.sender),read:null!==(t=e.read)&&void 0!==t&&t,isNewMsg:!1})},t.dbRowFromCommentMessage=function(e){const t=(0,i.default)({},e);return(0,a.movEncFieldToOpaqueData)(t),(0,i.default)((0,i.default)({},t),{},{msgKey:t.id.toString(),parentMsgKey:t.parentMsgKey.toString(),sender:t.sender.toString()})},t.dbRowFromRevokedMsgData=function(e){var t,n;return{msgKey:e.id.toString(),sender:e.revokeSender.toString(),parentMsgKey:e.parentMsgKey.toString(),t:(0,l.getT)(e),ack:null!==(t=(0,l.getAck)(e))&&void 0!==t?t:void 0,read:e.read,isOverwrittenByRevoke:!0,subtype:e.subtype,revokeTimestamp:e.revokeTimestamp,protocolMessageKey:null===(n=e.protocolMessageKey)||void 0===n?void 0:n.toString()}};var i=r(n(81109)),o=r(n(49619)),a=n(74773),s=n(54468),l=n(26368),u=r(n(60001)),c=n(97087),d=n(73602),p=n(51017)},8119:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.commentsAddOnProvider=void 0;var i=r(n(48926)),o=n(88930),a=n(52626),s=n(22666),l=n(73602);const u={type:s.MessageAddOnType.Comment,matches:e=>e.type===l.MSG_TYPE.COMMENT,matchesFutureproof:e=>e.type===l.MSG_TYPE.UNKNOWN&&e.futureproofType===l.MSG_TYPE.COMMENT,canRenderInUi:()=>!0,processOrphansForNewMsg:()=>(0,i.default)((function*(){return Promise.resolve()}))(),updateAcks:(e,t)=>(0,a.updateAddOnAcksForTable)("comments",e,t),markAsRead:e=>(0,o.markAsReadForTable)("comments",e.map(String))};t.commentsAddOnProvider=u},38783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertMessageToCommentMsgData=function(e,t){var n,l;const u=null!==(n=e.conversation)&&void 0!==n?n:null===(l=e.extendedTextMessage)||void 0===l?void 0:l.text;if(null==u)throw new r.CommentMessageValidationError(r.CommentMessageValidationErrorCode.MISSING_COMMENT_CONTENT,a.E2E_FAILURE_REASON.INVALID_MESSAGE);return{ack:t.ack,body:u,from:t.from,to:t.to,id:t.id,parentMsgKey:t.targetMessageKey,sender:t.author?(0,s.toUserWid)(t.author):(0,o.getMeUser)(),t:t.t,type:i.MSG_TYPE.COMMENT,kind:i.MsgKind.CommentDecrypted,read:!1,isNewMsg:!0}};var r=n(55199),i=n(73602),o=n(3885),a=n(57095),s=n(51017)},35309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commentCountByParents=function(e){const t=new Map;for(const r of e){var n;const e=r.parentMsgKey.toString(),i=null!==(n=t.get(e))&&void 0!==n?n:0;t.set(e,i+1)}return t}},91686:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebMsgInfoComment=function(e){var t,n;const{webMsgInfo:r,isFromCag:d}=e,p=null==r||null===(t=r.message)||void 0===t?void 0:t.commentMessage,f=[];if(null==r||null==p)return f;const _=(0,o.default)(null==p?void 0:p.targetMessageKey,"commentMessage?.targetMessageKey"),g=(0,o.default)(r.messageTimestamp,"webMsgInfo.messageTimestamp"),{msgKey:h}=(0,o.default)((0,c.buildMsgKey)(r,_),"buildMsgKey(webMsgInfo, commentParentKey)"),{msgKey:A,sender:m}=(0,o.default)((0,a.buildAddonMsgKey)(r.key,d,r.participant),"buildAddonMsgKey(webMsgInfo.key, isFromCag, webMsgInfo.participant)"),{from:E,to:y,author:S}=(0,l.msgKeyToTargetInfo)(A,s.TranslateMsgKeyType.Addon);E.equals(m)||(__LOG__(4,void 0,new Error,!0,["messaging"])`[parseWebMsgInfoComment] sender ${m.toLogString()} is not matching with from ${E.toLogString()} attribute`,SEND_LOGS("parseComment",.01,"messaging"));return f.push({id:A,parentMsgKey:h,from:E,to:y,author:S,body:(0,o.default)(null===(n=p.message)||void 0===n?void 0:n.conversation,"commentMessage.message?.conversation"),sender:m,type:u.MSG_TYPE.COMMENT,read:!0,kind:u.MsgKind.CommentDecrypted,isNewMsg:!1,t:(0,i.numberOrThrowIfTooLarge)(g)}),f};var i=n(22101),o=r(n(49619)),a=n(29162),s=n(54468),l=n(97087),u=n(73602),c=n(63384)},55199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentMessageValidationErrorCode=t.CommentMessageValidationError=void 0;var r=n(22495);const i=n(76672)({MISSING_COMMENT_ENC_IV:"comment_missing_enc_iv",MISSING_COMMENT_ENC_PAYLOAD:"comment_missing_enc_payload",MISSING_COMMENT_MESSAGE_KEY:"comment_missing_target_message_key",INVALID_COMMENT_ENC_IV:"comment_invalid_enc_iv",MISSING_COMMENT_SENDER:"comment_missing_sender",MISSING_MESSAGE_SECRET:"comment_missing_message_secret",MISSING_ORIGINAL_MESSAGE_SENDER:"comment_missing_original_message_sender",MISSING_COMMENT_CONTENT:"comment_missing_comment_content"});t.CommentMessageValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="CommentMessageValidationError"}}t.CommentMessageValidationError=o},71538:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{encCommentMessage:r}=t;if(null==r)return;if(!(0,a.isCommentMessageReceiverEnabled)())return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,futureproofType:l.MSG_TYPE.COMMENT}),contextInfo:null};const{encIv:c,encPayload:d,targetMessageKey:p}=r;if(null==c)throw new o.CommentMessageValidationError(o.CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_IV,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==d)throw new o.CommentMessageValidationError(o.CommentMessageValidationErrorCode.MISSING_COMMENT_ENC_PAYLOAD,u.E2E_FAILURE_REASON.INVALID_MESSAGE);const f=(0,s.translateRegularMessageKeyToLocalReference)(p,n);if(null==f)throw new o.CommentMessageValidationError(o.CommentMessageValidationErrorCode.MISSING_COMMENT_MESSAGE_KEY,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(12!==c.byteLength)throw new o.CommentMessageValidationError(o.CommentMessageValidationErrorCode.INVALID_COMMENT_ENC_IV,u.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.COMMENT,kind:l.MsgKind.CommentEncrypted,addonEncrypted:!0,encIv:c,encPayload:d,targetMessageKey:f}),contextInfo:null}};var i=r(n(81109)),o=n(55199),a=n(18106),s=n(54468),l=n(73602),u=n(57095)},76415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addEncryptedColumn:s,addIndex:l}=(0,o.columnBuilder)(e.config);e.add("comments").version((0,i.commentCreateTable)(),[n("msgKey"),t("parentMsgKey"),l("parentMsgKey"),t("t"),t("ack"),t("sender"),t("read"),s("msgRowOpaqueData",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),t("isOverwrittenByRevoke"),t("revokeTimestamp"),t("protocolMessageKey"),t("subtype")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("comments")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},37006:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchToken=function(){if(null!=f)return f.promise;const e=f=new i.Resolvable,t=(0,p.getAdAccountToken)();if(null!=t)return e.resolve({type:"success",token:t}),e.promise;return _(1).then((t=>{"success"===t.type?(0,p.setAdAccountToken)(t.token):(t.type,f=null),e.resolve(t)})).catch((t=>{f=null,e.reject(t)})),e.promise},t.hasGraphQLAuthError=function(e){if(e instanceof u.GraphQLServerError){return e.source.errors.some((e=>u.GraphQLErrorCode.cast(e.code)===u.GraphQLErrorCode.INVALID_ACCESS_TOKEN||e.code===l.FAILURE_REASON.REASON_GENERIC_FAILURE))}return!1},t.markTokenAsInvalid=function(){f=null,(0,p.clearAdAccountToken)()};var r=n(44369),i=n(31630),o=n(26330),a=n(25027),s=n(17521),l=n(66253),u=n(56110),c=n(41307),d=n(62162),p=n(1689);let f=null;function _(e){return(0,s.fetchNonce)().then((t=>{switch(t.type){case"error":case"not-enabled":case"recovery-required":return t;default:return t.type,(n=t.nonce,(0,s.markNonceAsUsed)(),d.QPL.markerStart(c.QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN),d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_start"),(0,o.sendGetAccessTokenAndSessionCookiesRPC)({codeElementValue:n}).then((e=>{switch(e.name){case"GetAccessTokenAndSessionCookiesResponseTooManyAttempts":return h(),{type:"too-many-attempts"};case"GetAccessTokenAndSessionCookiesResponseIncorrectNonce":return h(),{type:"incorrect-nonce"};case"GetAccessTokenAndSessionCookiesResponseError":return h(),{type:"error"};default:return e.name,g(r.QuickLogActionType.SUCCESS),{type:"success",token:(0,a.asAdAccountToken)(e.value.accessTokenElementValue)}}})).catch((e=>{throw h(),e}))).then((t=>"incorrect-nonce"===t.type&&e>0?_(e-1):t))}var n}))}function g(e){d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_end"),d.QPL.markerEnd(c.QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,e)}function h(){g(r.QuickLogActionType.FAIL)}},19578:(e,t,n)=>{"use strict";var r=n(95318);t.l=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(40621),s=n(56660),l=n(85074),u=n(1187),c=n(74557),d=n(16199);function p(){return(p=(0,o.default)((function*(e,t){let{id:n,ts:r}=t;const i=null!=(null==e?void 0:e.instanceLogData)?String.fromCharCode.apply(null,e.instanceLogData):"";if((0,s.qpGraphQLEnabled)()){const t=null==e?void 0:e.surfaceId;if(null==t)__LOG__(3)`dismissQuickPromotion: surface id for GraphQL call not found`;else{var o;let e;try{e=yield(0,d.executeQuickPromotionActionMutation)({event:"ACTION",action:"DISMISS",promotion_id:n,surface_nux_id:t,promotion_logging_data:i,client_time:r})}catch(e){__LOG__(4,void 0,new Error)`dismissQuickPromotion: unable to log through GraphQL`}if("not-enabled"!==(null===(o=e)||void 0===o?void 0:o.type))return;e.type}}const l=yield(0,a.sendEventRPC)({eventType:"dismiss",eventPromotionId:n,eventTimestampSec:r,eventLogdata:i});"EventResponseSuccess"!==l.name&&(l.name,__LOG__(4,void 0,new Error)`dismissQuickPromotion: unable to log through IQ`)}))).apply(this,arguments)}const f=(0,l.defineWebPersistedJob)().step("saveToDb",(function(e){let{id:t,ts:n}=e;return(0,c.getStorage)().lock(["quick-promotions"],function(){var e=(0,o.default)((function*(e){var r;let[o]=e;const a=yield o.get(t);if(null==a)return void __LOG__(3)`dismissQuickPromotion: promotion not found`;const s=(0,i.default)((0,i.default)({},a.tracking),{},{dismisses:a.tracking.dismisses+1}),{lastDismissTs:l}=s;return(null==l||n>l)&&(s.lastDismissTs=n),yield o.merge(t,{tracking:s}),{surfaceId:a.surfaceId,instanceLogData:null===(r=a.data.qpConfigInstanceLogData)||void 0===r?void 0:r.elementValue}}));return function(){return e.apply(this,arguments)}}()).then((e=>(0,u.loadQuickPromotions)().then((()=>e))))})).finalStep("reportToComms",(function(){return p.apply(this,arguments)})).end();t.l=f},57882:(e,t,n)=>{"use strict";var r=n(95318);t.$=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(40621),s=n(56660),l=n(85074),u=n(1187),c=n(74557),d=n(16199);function p(){return(p=(0,o.default)((function*(e,t){let{id:n,ts:r}=t;const i=null!=(null==e?void 0:e.instanceLogData)?String.fromCharCode.apply(null,e.instanceLogData):"";if((0,s.qpGraphQLEnabled)()){const t=null==e?void 0:e.surfaceId;if(null==t)__LOG__(3)`impressionOnQuickPromotion: surface id for GraphQL call not found`;else{var o;let e;try{e=yield(0,d.executeQuickPromotionActionMutation)({event:"VIEW",promotion_id:n,surface_nux_id:t,promotion_logging_data:i,client_time:r})}catch(e){__LOG__(4,void 0,new Error)`impressionOnQuickPromotion: unable to log through GraphQL`}if("not-enabled"!==(null===(o=e)||void 0===o?void 0:o.type))return;e.type}}const l=yield(0,a.sendEventRPC)({eventType:"impression",eventPromotionId:n,eventTimestampSec:r,eventLogdata:i});"EventResponseSuccess"!==l.name&&(l.name,__LOG__(4,void 0,new Error)`impressionOnQuickPromotion: unable to log`)}))).apply(this,arguments)}const f=(0,l.defineWebPersistedJob)().step("saveToDb",(function(e){let{id:t,ts:n}=e;return(0,c.getStorage)().lock(["quick-promotions"],function(){var e=(0,o.default)((function*(e){var r;let[o]=e;const a=yield o.get(t);if(null==a)return void __LOG__(3)`impressionOnQuickPromotion: promotion not found`;const s=(0,i.default)((0,i.default)({},a.tracking),{},{impressions:a.tracking.impressions+1}),{lastImpressionTs:l}=s;return(null==l||n>l)&&(s.lastImpressionTs=n),yield o.merge(t,{tracking:s}),{surfaceId:a.surfaceId,instanceLogData:null===(r=a.data.qpConfigInstanceLogData)||void 0===r?void 0:r.elementValue}}));return function(){return e.apply(this,arguments)}}()).then((e=>(0,u.loadQuickPromotions)().then((()=>e))))})).finalStep("reportToComms",(function(){return p.apply(this,arguments)})).end();t.$=f},1187:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadQuickPromotions=function(){if(!(0,i.qpSDKProcessingEnabled)())return Promise.resolve();return(0,o.getQuickPromotionsTable)().all().then((e=>{e.sort(((e,t)=>e.data.qpConfigPriority-t.data.qpConfigPriority)),(0,r.frontendFireAndForget)("loadedQuickPromotions",{promotions:e})}))};var r=n(1619),i=n(56660),o=n(90213)},84745:(e,t,n)=>{"use strict";var r=n(95318);t.S=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(40621),s=n(56660),l=n(85074),u=n(1187),c=n(74557),d=n(16199);function p(){return(p=(0,o.default)((function*(e,t){let{id:n,ts:r}=t;const i=null!=(null==e?void 0:e.instanceLogData)?String.fromCharCode.apply(null,e.instanceLogData):"";if((0,s.qpGraphQLEnabled)()){const t=null==e?void 0:e.surfaceId;if(null==t)__LOG__(3)`primaryActionClickInQuickPromotion: surface id for GraphQL call not found`;else{var o;let e;try{e=yield(0,d.executeQuickPromotionActionMutation)({event:"ACTION",action:"PRIMARY",promotion_id:n,surface_nux_id:t,promotion_logging_data:i,client_time:r})}catch(e){__LOG__(4,void 0,new Error)`primaryActionClickInQuickPromotion: unable to log through GraphQL`}if("not-enabled"!==(null===(o=e)||void 0===o?void 0:o.type))return;e.type}}const l=yield(0,a.sendEventRPC)({eventType:"primary_click",eventPromotionId:n,eventTimestampSec:r,eventLogdata:i});"EventResponseSuccess"!==l.name&&(l.name,__LOG__(4,void 0,new Error)`primaryActionClickInQuickPromotion: unable to log`)}))).apply(this,arguments)}const f=(0,l.defineWebPersistedJob)().step("saveToDb",(function(e){let{id:t,ts:n}=e;return(0,c.getStorage)().lock(["quick-promotions"],function(){var e=(0,o.default)((function*(e){var r;let[o]=e;const a=yield o.get(t);if(null==a)return void __LOG__(3)`primaryActionClickInQuickPromotion: promotion not found`;const s=(0,i.default)((0,i.default)({},a.tracking),{},{primaryClicks:a.tracking.primaryClicks+1}),{lastPrimaryClickTs:l}=s;return(null==l||n>l)&&(s.lastPrimaryClickTs=n),yield o.merge(t,{tracking:s}),{surfaceId:a.surfaceId,instanceLogData:null===(r=a.data.qpConfigInstanceLogData)||void 0===r?void 0:r.elementValue}}));return function(){return e.apply(this,arguments)}}()).then((e=>(0,u.loadQuickPromotions)().then((()=>e))))})).finalStep("reportToComms",(function(){return p.apply(this,arguments)})).end();t.S=f},7471:(e,t,n)=>{"use strict";var r=n(95318);t.J=void 0;var i=r(n(81109)),o=r(n(48926)),a=n(40621),s=n(85074),l=n(1187),u=n(74557);function c(){return(c=(0,o.default)((function*(e,t){let{id:n,ts:r,experimentKey:i}=t;if("updated"!==e&&"old-job"!==e)return void __LOG__(3)`userExposureToQuickPromotion: skipping comms step: ${e}`;const o=yield(0,a.sendEventRPC)({eventType:"exposure",eventPromotionId:n,eventTimestampSec:r,eventLogdata:i});"EventResponseSuccess"!==o.name&&(o.name,__LOG__(4,void 0,new Error)`userExposureToQuickPromotion: unable to log`)}))).apply(this,arguments)}const d=(0,s.defineWebPersistedJob)().step("saveToDb",(function(e){let{id:t,experimentKey:n,exposureHoldout:r}=e;return 0===n.length?(__LOG__(4,void 0,new Error,!0)`userExposureToQuickPromotion: missing experiment key`,SEND_LOGS("user-exposure-quick-promotion-missing-exp-key"),"missing-key"):(0,u.getStorage)().lock(["quick-promotions"],function(){var e=(0,o.default)((function*(e){let[o]=e;const a=yield o.get(t);if(null==a)return"not-found";if(null==r)return"old-job";const{tracking:s}=a,{lastLoggedExposure:l}=s;if(null!=l&&l.experimentKey===n&&l.exposureHoldout===r)return"deduped";const u=(0,i.default)((0,i.default)({},s),{},{lastLoggedExposure:{experimentKey:n,exposureHoldout:r}});return yield o.merge(t,{tracking:u}),"updated"}));return function(){return e.apply(this,arguments)}}()).then((e=>"updated"===e?(0,l.loadQuickPromotions)().then((()=>e)):e))})).finalStep("reportToComms",(function(){return c.apply(this,arguments)})).end();t.J=d},17521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.castToNonce=f,t.fetchNonce=function(e){return(0,i.promiseTimeout)(function(e){if(!(0,l.adManagementEnabled)())return Promise.resolve({type:"not-enabled"});if(null!=p&&!0!==e)return p.promise;d.QPL.markerStart(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE),d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_start");const t=p=new a.Resolvable;return(0,s.sendRequestSilentNonceRPC)({}).then((e=>{switch(e.name){case"RequestSilentNonceResponseError":return d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),d.QPL.markerEnd(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o.QuickLogActionType.FAIL),p=null,{type:"error"};case"RequestSilentNonceResponseRecoveryRequired":return d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),d.QPL.markerEnd(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o.QuickLogActionType.FAIL),p=null,{type:"recovery-required",emailMask:e.value.resultEmail};default:return e.name,d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_start"),t.promise}})).catch((e=>{throw d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),d.QPL.markerEnd(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o.QuickLogActionType.FAIL),p=null,e}))}(e),u.MANAGE_ADS_FETCH_TIMEOUT_MS).catch((e=>{throw e instanceof r.TimeoutError&&d.QPL.markerEnd(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o.QuickLogActionType.ABORTED),e}))},t.markNonceAsUsed=function(){p=null},t.setNonceFromPushNotification=function(e){null==p&&(__LOG__(3)`Received a biz token nonce without asking for it`,p=new a.Resolvable);p.resolve({type:"success",nonce:e}),d.QPL.markerPoint(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),d.QPL.markerEnd(c.QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o.QuickLogActionType.SUCCESS)},t.setNonceFromRecoveryCode=function(e){null==p&&(p=new a.Resolvable);p.resolve({type:"success",nonce:e})};var r=n(66911),i=n(77689),o=n(44369),a=n(31630),s=n(66413),l=n(56660),u=n(81204),c=n(41307),d=n(62162);let p=null;function f(e){return e}},44629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("ctwa-suggestion").version((0,i.ctwaSuggestionsCreateTable)(),[n("id"),t("type"),t("expiresAt"),a("expiresAt"),t("heading"),t("body"),t("highlight"),t("actionLink"),t("display"),t("ts")]).version((0,i.ctwaSuggestionsAddTrackingData)(),[t("nuxData"),t("coolOffData")]).view((e=>e))},t.getCTWASuggestionTable=function(){return(0,r.getStorage)().table("ctwa-suggestion")};var r=n(74557),i=n(20746),o=n(65717)},59566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("in-app-banner").version((0,i.inAppBannerCreateTable)(),[n("id"),t("type"),t("surfaceId"),t("title"),t("text"),t("actionText"),t("actionLink"),t("iconDescription"),t("iconLight"),t("iconDark"),t("backgroundColor"),t("highlightColor"),t("pacing"),t("ts")]).view((e=>e))},t.getInAppBannerTable=function(){return(0,r.getStorage)().table("in-app-banner")};var r=n(74557),i=n(20746),o=n(65717)},90213:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("quick-promotions").version((0,i.quickPromotionsCreateTable)(),[n("id"),t("surfaceId"),a("surfaceId"),t("ts"),t("data"),t("tracking")]).view((e=>e))},t.getQuickPromotionsTable=function(){return(0,r.getStorage)().table("quick-promotions")};var r=n(74557),i=n(20746),o=n(65717)},81204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QP_SURFACE_ID_PROFILE=t.QP_SURFACE_ID_EXITED_GROUP=t.QP_SURFACE_ID_CHAT_LIST_TOP=t.QP_SURFACE_BUSINESS_HOME_TOP_CARD=t.QP_FETCH_TIMEOUT_MS=t.QP_ACTION_MUTATION_TIMEOUT_MS=t.MANAGE_ADS_FETCH_TIMEOUT_MS=t.KNOWN_QP_SURFACES=t.ALLOWED_PREDEFINED_LABEL_IDS_SET=t.ALLOWED_PREDEFINED_LABEL_IDS=t.AD_ENTRY_POINTS_FETCH_TIMEOUT_MS=void 0;const n="11478";t.QP_SURFACE_ID_CHAT_LIST_TOP=n;const r="11525";t.QP_SURFACE_ID_EXITED_GROUP=r;const i="11522";t.QP_SURFACE_ID_PROFILE=i;const o="12015";t.QP_SURFACE_BUSINESS_HOME_TOP_CARD=o;const a=new Map([[n,"WHATSAPP_FOR_SMB_WEB_WHATSAPP_SMB_WEB_CHATLIST_BANNER_QP"],[r,"WHATSAPP_FOR_WEB_GROUPSBANNER_QP"],[i,"WHATSAPP_FOR_WEB_PROFILEBANNER_QP"],[o,"WHATSAPP_FOR_SMB_WEB_BUSINESS_HOME_CARD_QP"]]);t.KNOWN_QP_SURFACES=a;t.QP_FETCH_TIMEOUT_MS=2e4;t.QP_ACTION_MUTATION_TIMEOUT_MS=2e4;t.MANAGE_ADS_FETCH_TIMEOUT_MS=2e4;t.AD_ENTRY_POINTS_FETCH_TIMEOUT_MS=2e4;const s=Object.freeze({NEW_ORDER:2,PENDING_PAYMENT:3,PAID:4,ORDER_COMPLETE:5});t.ALLOWED_PREDEFINED_LABEL_IDS=s;const l=new Set(Object.keys(s).map((e=>s[e])));t.ALLOWED_PREDEFINED_LABEL_IDS_SET=l},19866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asAdEntryPointContent=function(e){return e}},25027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoostingStatusEnum=void 0,t.asAdAccountToken=function(e){return e},t.asAdCampaignGroupId=function(e){return e},t.asAdId=function(e){return e};const r=n(76672).Mirrored(["ACTIVE","AUTHENTICATION_NEEDED","CREATING","EXTENDABLE","FINISHED","LIMITED_DELIVERY","NOT_DELIVERING","PAUSED","PENDING","REJECTED","REVIEW_NEEDED","SCHEDULED","ERROR","UNKNOWN"]);t.BoostingStatusEnum=r},1689:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearAdAccountToken=function(){c.default.setUser(u.KEYS.AD_ACCOUNT_TOKEN,null)},t.generateAdCreationFlowId=d,t.getAdAccountToken=function(){if(!(0,o.adAccountTokenStoringEnabled)())return null;const e=c.default.getUser(u.KEYS.AD_ACCOUNT_TOKEN);if(null==e||"string"!=typeof e)return null;return(0,s.asAdAccountToken)(e)},t.getAdCreationFlowId=function(){let e=c.default.get(u.KEYS.AD_CREATION_FLOW_ID_KEY);null!=e&&"string"==typeof e||(e=d());return e},t.getAdEntryPointsConfiguration=function(e){const t=c.default.getUser(u.KEYS.AD_ENTRY_POINTS_CONFIGURATION);if(null==t||"object"!=typeof t)return null;const{configuration:n,ts:r,locale:s}=t;if("number"!=typeof r||"string"!=typeof s)return null;if(!(0,i.isInFuture)((0,i.futureUnixTime)((0,o.adEntryPointsConfigurationFetchThreshold)(),(0,i.castToUnixTime)(r))))return null;if(s!==e)return null;if(null==n||"object"!=typeof n)return null;return Object.keys(n).reduce(((e,t)=>{const r=n[t];if(null==r||"object"!=typeof r)return e;const{shouldShow:i,content:o,subContent:s}=r;if("boolean"!=typeof i)return e;const l={shouldShow:i};if(null!=o){if("string"!=typeof o)return e;l.content=(0,a.asAdEntryPointContent)(o)}if(null!=s){if("string"!=typeof s)return e;l.subContent=(0,a.asAdEntryPointContent)(s)}return e[t]=l,e}),{})},t.getAndIncrementAdCreationSequenceNumber=function(){let e=c.default.get(u.KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY);null!=e&&"number"==typeof e||(e=1);return c.default.set(u.KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,e+1),e},t.resetAdCreationSequenceNumber=function(){c.default.set(u.KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,1)},t.setAdAccountToken=function(e){if(!(0,o.adAccountTokenStoringEnabled)())return;c.default.setUser(u.KEYS.AD_ACCOUNT_TOKEN,e)},t.setAdEntryPointsConfiguration=function(e,t){c.default.setUser(u.KEYS.AD_ENTRY_POINTS_CONFIGURATION,{configuration:t,ts:(0,i.unixTime)(),locale:e})};var i=n(29987),o=n(56660),a=n(19866),s=n(25027),l=r(n(60347)),u=n(59356),c=r(n(61112));function d(){const e=(0,l.default)();return c.default.set(u.KEYS.AD_CREATION_FLOW_ID_KEY,e),e}},29309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMB_DATA_SHARING_ALLOWED_SOURCE=void 0,t.getCTWAEligibilityFromConversion=function(e){let{conversionData:t,conversionSource:n}=e;const o=(n||"").toLocaleLowerCase();if(null!=t&&o===i)try{return{data:(0,r.arrayBufferToString)(t),source:i}}catch(e){return null}return null};var r=n(54080);const i="fb_ads";t.SMB_DATA_SHARING_ALLOWED_SOURCE=i},14474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},20020:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{documentMessage:f}=t;if(null==f)return;const{mediaKey:_,fileSha256:g,fileEncSha256:h,fileLength:A=0,url:m}=(0,c.getValidatedMediaMessageProperties)(f,n,r,d.MSG_TYPE.DOCUMENT),E=(0,u.cleanIncomingFilename)(f.fileName||f.title),y=null!=f.caption&&""!==f.caption,S=y?(0,l.convertToTextWithoutSpecialEmojis)(f.caption):E;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:d.MSG_TYPE.DOCUMENT,kind:d.MsgKind.Document,deprecatedMms3Url:(0,s.decodeUrl)(m),directPath:f.directPath,mimetype:f.mimetype,filehash:(0,s.decodeBytes)(g),encFilehash:(0,s.decodeBytes)(h),size:A,pageCount:f.pageCount||0,mediaKey:(0,s.decodeBytes)(_),mediaKeyTimestamp:null!=f.mediaKeyTimestamp?(0,o.numberOrThrowIfTooLarge)(f.mediaKeyTimestamp):(0,a.unixTime)(),filename:E,isCaptionByUser:y,caption:S,body:(0,s.decodeBytes)(f.jpegThumbnail)||"",isVcardOverMmsDocument:Boolean(f.contactVcard)&&A<=1024*p.VCARD_MAX_SIZE_KB,thumbnailDirectPath:f.thumbnailDirectPath,thumbnailSha256:(0,s.decodeBytes)(f.thumbnailSha256),thumbnailEncSha256:(0,s.decodeBytes)(f.thumbnailEncSha256),thumbnailHeight:f.thumbnailHeight,thumbnailWidth:f.thumbnailWidth}),contextInfo:f.contextInfo}};var i=r(n(81109)),o=n(22101),a=n(29987),s=n(57305),l=n(54468),u=n(46280),c=n(70643),d=n(73602),p=n(73087)},86946:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{keepInChatMessage:r}=t;if(null==r)return;const{key:l,keepType:u,timestampMs:c}=r;return{msgData:(0,i.default)((0,i.default)({},n),{},{keptMessageKey:(0,a.translateRegularMessageKeyToLocalReference)(l,n),type:s.MSG_TYPE.KEEP_IN_CHAT,kind:s.MsgKind.KeepInChat,keepType:u,senderTimestampMs:(0,o.maybeNumberOrThrowIfTooLarge)(c)}),contextInfo:null}};var i=r(n(81109)),o=n(22101),a=n(54468),s=n(73602)},94907:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{messageProtobuf:r,baseMessage:c,msgContext:d}=e;const{protocolMessage:p}=r;if(null==p||"relay"!==d||p.type!==u.Message$ProtocolMessage$Type.EPHEMERAL_SYNC_RESPONSE)return;const{ephemeralExpiration:f,ephemeralSettingTimestamp:_,disappearingMode:g}=p;if(null==f||null==_||null==g)return void __LOG__(3)`EPHEMERAL_SYNC_RESPONSE msg does not contain all fields`;let h;null!=p.disappearingMode&&(h=(0,s.protoToDisappearingMode)(p,p.disappearingMode));return{msgData:(0,i.default)((0,i.default)({},c),{},{type:l.MSG_TYPE.PROTOCOL,kind:l.MsgKind.Protocol,subtype:"ephemeral_sync_response",ephemeralDuration:f,ephemeralSettingTimestamp:(0,o.numberOrThrowIfTooLarge)(_),disappearingModeInitiator:(0,a.default)((0,s.protoToDisappearingModeInitiator)(c,g),"protoToDisappearingModeInitiator(baseMessage, disappearingMode)"),disappearingModeTrigger:null===(t=h)||void 0===t?void 0:t.disappearingModeTrigger,disappearingModeInitiatedByMe:null===(n=h)||void 0===n?void 0:n.initiatedByMe}),contextInfo:null}};var i=r(n(81109)),o=n(22101),a=r(n(49619)),s=n(54468),l=n(73602),u=n(77026)},71385:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEVEN_DAYS=t.ONE_DAY=t.OFF=t.NINETY_DAYS=t.KeepInChatState=t.DurationUnit=t.DisappearingModeInitiator=void 0,t.getDurationForString=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<=r.MINUTE_SECONDS)return{duration:e,unit:u.Seconds};if(e<r.HOUR_SECONDS){return{duration:Math.floor(e/60),unit:u.Minutes}}if(e<=r.DAY_SECONDS){return{duration:Math.floor(e/60/60),unit:u.Hours}}if(Boolean(t)){if(e<r.WEEK_SECONDS){return{duration:Math.floor(e/24/60/60),unit:u.Days}}return{duration:Math.floor(e/7/24/60/60),unit:u.Weeks}}const n=Math.floor(e/24/60/60);return{duration:n,unit:u.Days}};var r=n(29987);t.OFF=0;const i=r.DAY_SECONDS;t.ONE_DAY=i;const o=7*r.DAY_SECONDS;t.SEVEN_DAYS=o;const a=90*r.DAY_SECONDS;t.NINETY_DAYS=a;const s=n(76672)({ChangedInChat:"chat",InitiatedByMe:"me",InitiatedByOther:"other"});t.DisappearingModeInitiator=s;const l=n(76672).Mirrored(["KEPT","UNKEPT"]);t.KeepInChatState=l;const u=n(76672).Mirrored(["Seconds","Minutes","Hours","Days","Weeks"]);t.DurationUnit=u},9545:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBroadcastEphemeralSetting=function(){return h.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(89323),s=n(29987),l=n(13134),u=n(33655),c=r(n(89482));const d=new Uint8Array(32);function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t){const n=yield self.crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]),r=yield self.crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:d,info:t},n,{name:"HMAC",hash:"SHA-256"},!0,["verify"]);return self.crypto.subtle.exportKey("raw",r)}))).apply(this,arguments)}function _(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e,t,n){const r=e.slice(0,12),i=e.slice(12,44),o=yield self.crypto.subtle.importKey("raw",i,"AES-GCM",!1,["decrypt"]);return self.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(r),additionalData:n},o,t)}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e,t,n,r,i){const d=e.toString({legacy:!0}),f=t.toString({legacy:!0}),g=n.toString({legacy:!0}),h=a.Binary.build(`Ephemeral ${f} ${d}`).readByteArray(),A=new Uint8Array(i),m=(0,o.decodeB64)(r),E=a.Binary.build(g).readBuffer(),y=yield p(A,h),S=yield _(y,m,E),{duration:v,timestamp:I}=(0,u.decodeProtobuf)(l.EphemeralSettingSpec,S);if(null==v||null==I)throw(0,c.default)("ephSetting decoded into malformed proto");return{ephemeralDuration:v,ephemeralSettingTimestamp:(0,s.castLongIntToUnixTime)(I)}}))).apply(this,arguments)}},3288:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeepInChatHistorySyncMessage=function(e){const t=e.keepInChat;if(null!=t&&null!=t.key){const{id:e,remoteJid:n,participant:r,fromMe:u}=t.key,{keepType:c,serverTimestampMs:d}=t;if(null==e||null==c||null==d||null==n)throw(0,l.default)("parseKeepInChatHistorySyncMessage: malformed KIC WebMessageInfo");const p=(0,o.parseKeepTypeToKicState)(c);if(null==p)throw(0,l.default)("parseKeepInChatHistorySyncMessage: KeepType has unsupported value");return{kicKey:new a.default({fromMe:(0,i.default)(u,"fromMe"),id:(0,i.default)(e,"id"),remote:(0,i.default)((0,s.createWidFromWidLike)(n),"createWidFromWidLike(remoteJid)"),participant:null!=r?(0,s.createWidFromWidLike)(r):void 0}),kicState:p,kicTimestampMs:parseInt(d,10)}}};var i=r(n(49619)),o=n(7339),a=r(n(60001)),s=n(51017),l=r(n(89482))},7339:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.compareKeepInChatMessages=p,t.getKicSender=f,t.isKept=function(e){return e===o.KeepInChatState.KEPT},t.isUnkept=d,t.kicSenderSuperPowerActive=function(e){return d(e.kicState)&&u.default.equals(f(e),(0,a.getSender)(e))},t.parseKeepTypeToKicState=function(e){if(null!=e&&e===s.KeepType.KEEP_FOR_ALL)return o.KeepInChatState.KEPT;if(null!=e&&e===s.KeepType.UNDO_KEEP_FOR_ALL)return o.KeepInChatState.UNKEPT;return null},t.runKeepInChatTieBreaker=function(e){let t,n;e.forEach((e=>{t&&1!==p(e,t)||(n=t,t=e)})),null!=n&&(0,i.frontendSendAndReceive)("logTieBreakIgnoredKicWam",{keepInChatMessage:n});return t};var i=n(1619),o=n(71385),a=n(26368),s=n(77026),l=n(3885),u=r(n(27112)),c=n(51017);function d(e){return e===o.KeepInChatState.UNKEPT}function p(e,t){return null==e.senderTimestampMs?-1:null==t.senderTimestampMs||e.senderTimestampMs>t.senderTimestampMs||e.senderTimestampMs===t.senderTimestampMs&&e.id.id>t.id.id?1:-1}function f(e){if(null!=e.kicKey){var t,n,r;const i=(0,a.getIsGroupMsg)(e);if(!0===(null===(t=e.kicKey)||void 0===t?void 0:t.fromMe))return(0,l.getMaybeMeUser)();if(i&&null!=(null===(n=e.kicKey)||void 0===n?void 0:n.participant))return(0,c.toUserWid)(e.kicKey.participant);if(!i&&null!=(null===(r=e.kicKey)||void 0===r?void 0:r.remote))return(0,c.toUserWid)(e.kicKey.remote)}}},10473:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.compareEphemeralityFields=function(e,t){return(null==e?void 0:e.duration)===(null==t?void 0:t.duration)&&(null==e?void 0:e.settingTimestamp)===(null==t?void 0:t.settingTimestamp)&&(null==e?void 0:e.initiator)===(null==t?void 0:t.initiator)},t.getDisappearingModeSettingForUser=s,t.getEphemeralDurationForUser=l,t.resolveDisappearingModeInitiatedByMe=f,t.resolveDisappearingModeInitiator=c,t.resolveDisappearingModeTrigger=p,t.resolveEphermalityDuration=u,t.resolveExistingChatDMSettings=function(e,t){const n=_(e);if(null==n&&null==t)return null;if(null!=n&&null==t)return{duration:n.duration,settingTimestamp:n.settingTimestamp,initiator:n.initiator===a.DisappearingModeInitiator.InitiatedByMe?a.DisappearingModeInitiator.ChangedInChat:n.initiator,disappearingModeTrigger:a.DisappearingModeTrigger.ChatSettings,initiatedByMe:n.initiator===a.DisappearingModeInitiator.InitiatedByMe};if(null==n&&null!=t)return{duration:t.duration,settingTimestamp:d(t.settingTimestamp),initiator:c(t.initiator),disappearingModeTrigger:p(t.disappearingModeTrigger),initiatedByMe:t.initiatedByMe};var r,o;if(null!=n&&null!=t)return n.settingTimestamp>(null!==(r=t.settingTimestamp)&&void 0!==r?r:0)?(0,i.default)({},n):n.settingTimestamp<(null!==(o=t.settingTimestamp)&&void 0!==o?o:0)?{duration:t.duration,settingTimestamp:d(t.settingTimestamp),initiator:c(t.initiator),disappearingModeTrigger:p(t.disappearingModeTrigger),initiatedByMe:t.initiatedByMe}:(0,i.default)((0,i.default)({},n),{},{initiator:t.initiator===a.DisappearingModeInitiator.ChangedInChat?a.DisappearingModeInitiator.ChangedInChat:n.initiator})},t.resolveMessageEphemerality=_,t.resolveNewChatDMSettings=function(e,t){var n;const r=l(e),i=l(t);if(null==r&&null==i)return __LOG__(2,void 0,void 0,void 0,["DM","DDM"])`[DMResolve] DM setting for chat is null`,null;let s,u;null!=r&&(s={duration:r,settingTimestamp:(0,o.unixTime)(),initiator:a.DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:a.DisappearingModeTrigger.AccountSettings,initiatedByMe:!0});null!=i&&(u={duration:i,settingTimestamp:(0,o.unixTime)(),initiator:a.DisappearingModeInitiator.InitiatedByOther,disappearingModeTrigger:a.DisappearingModeTrigger.AccountSettings,initiatedByMe:!1});if(null!=s&&null!=u)return u.duration<s.duration?u:s;return null!==(n=s)&&void 0!==n?n:u},t.resolveNewIncomingChatDMSettings=function(e,t){__LOG__(2)`[DMResolve] resolving new incoming chat DM settings`;const n=_(e),r=u(t);if(null==n&&0===r)return null;if(null!=n&&0===r)return{duration:n.duration,settingTimestamp:n.settingTimestamp,initiator:n.initiator===a.DisappearingModeInitiator.InitiatedByMe?a.DisappearingModeInitiator.ChangedInChat:n.initiator,disappearingModeTrigger:n.disappearingModeTrigger,initiatedByMe:n.initiatedByMe};if(null==n&&r>0)return{duration:r,settingTimestamp:(0,o.unixTime)(),initiator:a.DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:a.DisappearingModeTrigger.AccountSettings,initiatedByMe:!0};if(null!=n&&r>0){if(n.initiator===a.DisappearingModeInitiator.ChangedInChat||n.duration>0&&n.duration<r){let e=n.initiator,t=n.initiatedByMe;return e===a.DisappearingModeInitiator.InitiatedByMe&&(e=a.DisappearingModeInitiator.ChangedInChat,t=!0),{initiator:e,settingTimestamp:n.settingTimestamp,duration:n.duration,disappearingModeTrigger:n.disappearingModeTrigger,initiatedByMe:t}}return r<n.duration?{duration:r,settingTimestamp:(0,o.unixTime)(),initiator:a.DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:a.DisappearingModeTrigger.AccountSettings,initiatedByMe:!0}:(0,i.default)({},n)}},t.resolveSettingTimestamp=d;var i=r(n(81109)),o=n(29987),a=n(28626);function s(e){if(!e)return __LOG__(2)`getDisappearingModeSettingForUser: empty contact`,null;const t=e.disappearingModeDuration,n=e.disappearingModeSettingTimestamp;return __LOG__(2,void 0,void 0,void 0,["DM","DDM"])`getDisappearingModeSettingForUser: disappearing mode setting fetched for ${e.id.toString()}: duration=${t} settingTimestamp=${n}`,null==t||0===t?null:{duration:t,settingTimestamp:null!=n?n:0}}function l(e){const t=s(e);return null!=t?t.duration:null}function u(e){return null!=e?e:0}function c(e){return null!=e?e:a.DisappearingModeInitiator.ChangedInChat}function d(e){return null!=e?e:(0,o.unixTime)()}function p(e){return null!=e?e:a.DisappearingModeTrigger.ChatSettings}function f(e,t){const n=t===a.DisappearingModeInitiator.InitiatedByMe;return null!=e?e:n}function _(e){return null==e||null==e.duration&&null==e.settingTimestamp&&null==e.initiator?null:{duration:u(e.duration),settingTimestamp:d(e.settingTimestamp),initiator:c(e.initiator),disappearingModeTrigger:p(e.disappearingModeTrigger),initiatedByMe:f(e.initiatedByMe,e.initiator)}}},28626:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisappearingModeTrigger=t.DisappearingModeInitiator=void 0;const r=n(76672)({ChangedInChat:"chat",InitiatedByMe:"me",InitiatedByOther:"other",BizUpgradeFbHosting:"biz_upgrade_fb_hosting"});t.DisappearingModeInitiator=r;const i=n(76672)({Unknown:"unknown",ChatSettings:"chat_settings",AccountSettings:"account_settings",BulkChange:"bulk_change",BizSupportFbHosting:"biz_supports_fb_hosting"});t.DisappearingModeTrigger=i},12857:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWamDisappearingModeInitiatedByMe=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Boolean(e))return o.EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_ME;return o.EPHEMERALITY_INITIATOR_TYPE.INITIATED_BY_OTHER},t.getWamDisappearingModeInitiator=function(e){switch(e){case r.DisappearingModeInitiator.InitiatedByMe:return i.DISAPPEARING_CHAT_INITIATOR_TYPE.INITIATED_BY_ME;case r.DisappearingModeInitiator.InitiatedByOther:case r.DisappearingModeInitiator.BizUpgradeFbHosting:return i.DISAPPEARING_CHAT_INITIATOR_TYPE.INITIATED_BY_OTHER;case r.DisappearingModeInitiator.ChangedInChat:return i.DISAPPEARING_CHAT_INITIATOR_TYPE.CHAT}},t.getWamDisappearingModeTrigger=function(e){switch(e){case r.DisappearingModeTrigger.AccountSettings:return a.EPHEMERALITY_TRIGGER_ACTION_TYPE.ACCOUNT_SETTINGS;case r.DisappearingModeTrigger.ChatSettings:return a.EPHEMERALITY_TRIGGER_ACTION_TYPE.CHAT_SETTINGS;case r.DisappearingModeTrigger.BulkChange:return a.EPHEMERALITY_TRIGGER_ACTION_TYPE.BULK_CHANGE;case r.DisappearingModeTrigger.BizSupportFbHosting:case r.DisappearingModeTrigger.Unknown:return a.EPHEMERALITY_TRIGGER_ACTION_TYPE.UNKNOWN}};var r=n(28626),i=n(91258),o=n(16295),a=n(85646)},20217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralMessageTypes=void 0,t.getMsgEphemeralitySettings=function(e){var t;if(null==e.ephemeralDuration&&null==e.ephemeralSettingTimestamp&&null==e.disappearingModeInitiator)return null;const n=null!==(t=e.ephemeralDuration)&&void 0!==t?t:0;let i=e.ephemeralSettingTimestamp,o=e.disappearingModeInitiator;const a=e.disappearingModeTrigger,s=e.disappearingModeInitiatedByMe;"ephemeral_setting"===e.subtype&&(i=e.t,o=r.DisappearingModeInitiator.ChangedInChat);return{duration:n,settingTimestamp:i,initiator:o,disappearingModeTrigger:a,initiatedByMe:s}},t.messageSupportsEphemerality=function(e){if(o.includes(e))return!0;return!1};var r=n(28626),i=n(73602);const o=[i.MSG_TYPE.CHAT,i.MSG_TYPE.IMAGE,i.MSG_TYPE.VIDEO,i.MSG_TYPE.AUDIO,i.MSG_TYPE.PTT,i.MSG_TYPE.DOCUMENT,i.MSG_TYPE.PRODUCT,i.MSG_TYPE.STICKER,i.MSG_TYPE.POLL_CREATION,i.MSG_TYPE.NEWSLETTER_ADMIN_INVITE,i.MSG_TYPE.GROUPS_V4_INVITE];t.ephemeralMessageTypes=o},96051:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(21130),a=n(7103),s=n(33529),l=n(89851);var u,c,d,p=(0,o.createAddonMsgProcessor)({isEnabled:s.isEventsEditReceivingEnabled,convert:{fromHistorySyncMsg:()=>Promise.resolve([])},parentKey_DEPRECATED:"targetMessageKey",updateCollection:(d=(0,i.default)((function*(){})),function(){return d.apply(this,arguments)}),beforeUpsert:(c=(0,i.default)((function*(e,t){const n=yield(0,l.processEncryptedEventEditMsgs)(e,t);return yield(0,a.updateMessageEditsLocally)(n,n.filter((e=>e.isLatest))),Promise.resolve({result:[],upsert:[]})})),function(){return c.apply(this,arguments)}),afterUpsert:(u=(0,i.default)((function*(){})),function(){return u.apply(this,arguments)})});t.default=p},45615:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(21130),a=n(1619),s=n(41544),l=n(33529),u=n(50501),c=n(73602),d=n(16889),p=n(38119);var f,_,g,h,A,m,E=(0,o.createAddonMsgProcessorDualEncrypted)({isEnabled:l.isEventsReceivingEnabled,convert:{fromHistorySyncMsg:(m=(0,i.default)((function*(e){return(0,u.parseWebMsgInfoEventResponses)(e)})),function(){return m.apply(this,arguments)}),toDualEncryptedMsgData:(A=(0,i.default)((function*(e,t){return e.kind===c.MsgKind.EventResponseEncrypted?e:(0,s.createEncryptedEventResponseMsgData)(e,t)})),function(){return A.apply(this,arguments)}),toDualDecryptedMsgData:(h=(0,i.default)((function*(e,t){return e.kind===c.MsgKind.EventResponseDecrypted?e:(0,p.decryptEncryptedEventResponseMsg)(e,t)})),function(){return h.apply(this,arguments)})},parentKey_DEPRECATED:"targetMessageKey",updateCollection:(g=(0,i.default)((function*(e){yield(0,a.frontendSendAndReceive)("upsertEventResponsesModelCollection",{eventResponses:e.add,eventResponsesToRemove:e.remove})})),function(){return g.apply(this,arguments)}),beforeUpsert:(_=(0,i.default)((function*(e,t){const n=yield(0,p.processEncryptedEventResponseMsgs)(e,t),r=yield(0,d.prepareEventResponsesToUpsert)(n);return Promise.resolve({result:r,upsert:r})})),function(){return _.apply(this,arguments)}),afterUpsert:(f=(0,i.default)((function*(){})),function(){return f.apply(this,arguments)})});t.default=E},41544:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createEncryptedEventResponseMsgData=function(){return h.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(77630),l=n(53965),u=n(54468),c=n(57782),d=n(26368),p=n(97087),f=n(73602),_=n(57095),g=n(51017);function h(){return(h=(0,o.default)((function*(e,t){var n;const r=self.crypto.getRandomValues(new Uint8Array(12)),o={type:"event_response",encode:{response:e.eventResponse,timestampMs:e.senderTimestampMs}},h=(0,d.getOriginalSender)(t),A=t.messageSecret;if(null==A)throw new c.EventCreationValidationError(c.EventCreationValidationErrorCode.MISSING_MESSAGE_SECRET,_.E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);if(null==h)throw new c.EventCreationValidationError(c.EventCreationValidationErrorCode.EVENT_CREATION_MISSING_MESSAGE_SENDER,_.E2E_FAILURE_REASON.INVALID_MESSAGE);const m=yield(0,l.encryptAddOn)(o,{messageSecret:A,iv:r,stanzaId:t.id.id,originalMessageSender:h,addOnSender:(0,g.toUserWid)((0,a.default)((0,d.getSender)(e),"getSender(eventResponse)"))});return(0,i.default)((0,i.default)({id:e.id},(0,p.msgKeyToTargetInfo)(e.id,u.TranslateMsgKeyType.Addon)),{},{type:f.MSG_TYPE.EVENT_RESPONSE,kind:f.MsgKind.EventResponseEncrypted,addonEncrypted:!0,t:Math.floor(e.senderTimestampMs/1e3),ack:null!==(n=e.ack)&&void 0!==n?n:s.ACK.CLOCK,targetMessageKey:t.id,encPayload:m,encIv:r.buffer})}))).apply(this,arguments)}},89962:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.protobufToEventEditDecryptedMsgData=function(e,t){var n,r,g,h,A,m,E,y,S,v;const I=(0,a.default)(null===(n=e.editedMessage)||void 0===n||null===(r=n.message)||void 0===r?void 0:r.protocolMessage,"[Event][Edit] Missing protocol message");if(I.type!==f.Message$ProtocolMessage$Type.MESSAGE_EDIT)throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_INVALID_PROTOCOL_MESSAGE_TYPE,_.E2E_FAILURE_REASON.EDIT_TYPE_AND_PROTOCOL_MISMATCH);const T=(0,p.msgDataToBaseMsgInfo)(t),b=(0,a.default)((0,s.translateRegularMessageKeyToLocalReference)(I.key,T),"translateRegularMessageKeyToLocalReference(protocolMessage.key, baseMessage)"),M=I.editedMessage;if(null==M)throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_EDITED_MESSAGE,_.E2E_FAILURE_REASON.INVALID_MESSAGE);const P=(0,o.maybeNumberOrThrowIfTooLarge)(I.timestampMs);if(null==P)throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_SENDER_TIMESTAMP,_.E2E_FAILURE_REASON.INVALID_MESSAGE);const{msgData:C}=(0,a.default)((0,l.default)({messageProtobuf:(0,i.default)((0,i.default)({},M),{},{messageContextInfo:null!==(g=null!==(h=e.messageContextInfo)&&void 0!==h?h:null===(A=e.editedMessage)||void 0===A||null===(m=A.message)||void 0===m?void 0:m.messageContextInfo)&&void 0!==g?g:M.messageContextInfo}),baseMessage:T,msgContext:"relay"}),"[Event][Edit] Failed to parse edited event fields");return(0,i.default)((0,i.default)({},(0,c.msgKeyToTargetInfo)(t.id,s.TranslateMsgKeyType.Message)),{},{id:t.id,t:P,type:d.MSG_TYPE.PROTOCOL,kind:d.MsgKind.ProtocolEventEdit,latestEditSenderTimestampMs:P,latestEditMsgKey:t.id,protocolMessageKey:b,editMsgType:d.MSG_TYPE.EVENT_CREATION,eventName:(0,a.default)(null==C?void 0:C.eventName,"msgData?.eventName"),eventStartTime:(0,a.default)(null==C?void 0:C.eventStartTime,"msgData?.eventStartTime"),isEventCanceled:null!==(E=null==C?void 0:C.isEventCanceled)&&void 0!==E&&E,eventLocation:null!==(y=null==C?void 0:C.eventLocation)&&void 0!==y?y:void 0,eventDescription:null!==(S=null==C?void 0:C.eventDescription)&&void 0!==S?S:void 0,eventJoinLink:null!==(v=null==C?void 0:C.eventJoinLink)&&void 0!==v?v:void 0})};var i=r(n(81109)),o=n(22101),a=r(n(49619)),s=n(54468),l=r(n(21105)),u=n(57782),c=n(97087),d=n(73602),p=n(75784),f=n(77026),_=n(57095)},95478:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eventResponseToEventResponseMsgData=function(e){var t,n;return(0,i.default)((0,i.default)({id:e.id},(0,s.msgKeyToTargetInfo)(e.id,a.TranslateMsgKeyType.Addon)),{},{type:l.MSG_TYPE.EVENT_RESPONSE,kind:l.MsgKind.EventResponseDecrypted,parentMsgKey:e.parentMsgKey,eventResponse:e.eventResponse,senderTimestampMs:e.senderTimestampMs,t:null!==(t=e.t)&&void 0!==t?t:void 0,read:e.read,ack:null!==(n=e.ack)&&void 0!==n?n:void 0})},t.protobufToEventResponseMsgData=function(e){var t,n;return(0,i.default)((0,i.default)({id:e.id},(0,s.msgKeyToTargetInfo)(e.id,a.TranslateMsgKeyType.Addon)),{},{type:l.MSG_TYPE.EVENT_RESPONSE,kind:l.MsgKind.EventResponseDecrypted,parentMsgKey:e.parentMsgKey,eventResponse:(0,o.default)(e.responseProtobuf.response,"eventResponse"),senderTimestampMs:e.senderTimestampMs,t:null!==(t=e.t)&&void 0!==t?t:void 0,read:e.read,ack:null!==(n=e.ack)&&void 0!==n?n:void 0})};var i=r(n(81109)),o=r(n(49619)),a=n(54468),s=n(97087),l=n(73602)},16889:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getNewestEventResponses=p,t.prepareEventResponsesToUpsert=function(){return f.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(12554),l=n(80154),u=n(26368),c=n(73602);function d(e){return`${e.parentMsgKey.toString()}-${(0,a.default)((0,u.getSender)(e),"getSender(eventResponse)").toString()}`}function p(e){return(0,l.maxPerGroup)(e,(e=>e.senderTimestampMs),d)}function f(){return(f=(0,o.default)((function*(e){const t=e.map((e=>[e.parentMsgKey,(0,a.default)((0,u.getSender)(e),"getSender(eventResponse)")])),n=p(e),r=yield s.addonDBTable.bulkGetByParentAndSender(c.MSG_TYPE.EVENT_RESPONSE,t),o=new Map;r.forEach((e=>{e.kind===c.MsgKind.EventResponseDecrypted&&o.set(d(e),e)}));const l=[];return n.forEach((e=>{var t;const n=o.get(d(e));if(null!=n&&n.senderTimestampMs>e.senderTimestampMs)return;const r=null!=n&&n.eventResponse===e.eventResponse,a=null!==(t=null==n?void 0:n.read)&&void 0!==t&&t,s=r&&a&&e.read!==a?(0,i.default)((0,i.default)({},e),{},{read:!0}):e;l.push(s)})),l}))).apply(this,arguments)}},89851:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processEncryptedEventEditMsgs=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=n(53965),a=n(4512),s=n(7103),l=n(89962),u=n(57782),c=n(26368),d=n(73602),p=n(77026),f=n(57095),_=r(n(27112)),g=n(51017),h=n(33655);function A(){return(A=(0,i.default)((function*(e,t){const n=new Map;if(e.forEach((e=>{if(e.kind!==d.MsgKind.EventEditEncrypted)throw new a.AddonInfraError(a.AddonInfraErrorCode.UnexpectedMsgType);const r=t.get(e.targetMessageKey.toString());if(null==r)throw new a.AddonInfraError(a.AddonInfraErrorCode.MissingParentMsg);n.set(e,r)})),0===n.size)return[];return(yield Promise.allSettled(Array.from(n.entries()).map((e=>{let[t,n]=e;return m(t,n)})))).map((e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":{const{reason:t}=e;if(t instanceof u.EventCreationValidationError||t instanceof u.EncryptedEventEditValidationError)return __LOG__(4,void 0,new Error,!0)`Processing encrypted event edit failed: ${t.code}`,void SEND_LOGS(t.code);__LOG__(4,void 0,new Error,!0)`Processing encrypted event edit failed: ${t.message}\n${t.stack}`,SEND_LOGS("event_edit_unknown_error")}}})).filter(Boolean)}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t){const{encIv:n,encPayload:r}=e,{messageSecret:i}=t,a=(0,c.getOriginalSender)(t),d=(0,c.getSender)(e);if(null==d)throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_MESSAGE_SENDER,f.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==a)throw new u.EventCreationValidationError(u.EventCreationValidationErrorCode.EVENT_CREATION_MISSING_MESSAGE_SENDER,f.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==n)throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_IV,f.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==r)throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_PAYLOAD,f.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==i)throw new u.EventCreationValidationError(u.EventCreationValidationErrorCode.MISSING_MESSAGE_SECRET,f.E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);if(!_.default.equals(d,a))throw new u.EncryptedEventEditValidationError(u.EncryptedEventEditValidationErrorCode.EVENT_EDIT_PARENT_SENDER_MISMATCH,f.E2E_FAILURE_REASON.INVALID_MESSAGE);const A=(0,g.toUserWid)(d),m=yield(0,o.decryptAddOn)({type:"event_edit_encrypted",encryptedAddOn:r},{messageSecret:i,iv:n,stanzaId:t.id.id,originalMessageSender:a,addOnSender:A}),E=(0,h.decodeProtobuf)(p.MessageSpec,m),y=(0,l.protobufToEventEditDecryptedMsgData)(E,e);return(0,s.generateMessageEdit)(t,y)}))).apply(this,arguments)}},38119:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEncryptedEventResponseMsg=m,t.processEncryptedEventResponseMsgs=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=n(22101),a=r(n(49619)),s=n(53965),l=n(4512),u=n(95478),c=n(57782),d=n(26368),p=n(77026),f=n(3885),_=n(57095),g=n(51017),h=n(33655);function A(){return(A=(0,i.default)((function*(e,t){const n=[],r=new Map;if(e.forEach((e=>{if(e.addonEncrypted){const n=t.get(e.targetMessageKey.toString());if(null==n)throw new l.AddonInfraError(l.AddonInfraErrorCode.MissingParentMsg);r.set(e,n)}else n.push(e)})),0===r.size)return n;const i=yield Promise.allSettled(Array.from(r.entries()).map((e=>{let[t,n]=e;return m(t,n)})));return n.concat(i.map((e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":{const{reason:t}=e;if(t instanceof c.EventCreationValidationError||t instanceof c.EncryptedEventResponseValidationError)return __LOG__(4,void 0,new Error,!0)`Processing encrypted event response failed: ${t.code}`,void SEND_LOGS(t.code);__LOG__(4,void 0,new Error,!0)`Processing encrypted event response failed: ${t.message}\n${t.stack}`,SEND_LOGS("unknown-error")}}})).filter(Boolean))}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t){var n;const{encIv:r,encPayload:i}=e,{messageSecret:l}=t,A=(0,d.getOriginalSender)(t),m=(0,d.getSender)(e);if(null==m)throw new c.EncryptedEventResponseValidationError(c.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_MESSAGE_SENDER,_.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==A)throw new c.EventCreationValidationError(c.EventCreationValidationErrorCode.EVENT_CREATION_MISSING_MESSAGE_SENDER,_.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==r)throw new c.EncryptedEventResponseValidationError(c.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_IV,_.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==i)throw new c.EncryptedEventResponseValidationError(c.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_PAYLOAD,_.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==l)throw new c.EventCreationValidationError(c.EventCreationValidationErrorCode.MISSING_MESSAGE_SECRET,_.E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);const E=(0,g.toUserWid)(m),y=yield(0,s.decryptAddOn)({type:"event_response",encryptedAddOn:i},{messageSecret:l,iv:r,stanzaId:t.id.id,originalMessageSender:A,addOnSender:E}),S=(0,h.decodeProtobuf)(p.Message$EventResponseMessageSpec,y);return(0,u.protobufToEventResponseMsgData)({responseProtobuf:S,parentMsgKey:e.targetMessageKey,id:e.id,senderTimestampMs:(0,o.numberOrThrowIfTooLarge)((0,a.default)(S.timestampMs,"responseProtobuf.timestampMs")),t:(0,d.getT)(e),ack:null!==(n=e.ack)&&void 0!==n?n:null,read:(0,f.isMeAccount)(E)})}))).apply(this,arguments)}},4981:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dbRowFromEventResponseMessage=function(e){const t=(0,o.default)((0,s.getSender)(e),"getSender(eventResponseMsg)");return{msgKey:e.id.toString(),parentMsgKey:e.parentMsgKey.toString(),eventResponse:g(e.eventResponse),senderTimestampMs:e.senderTimestampMs,sender:t.toString(),t:e.t,ack:e.ack,read:(0,p.isMeAccount)(t)||e.read}},t.decodeEventResponseFromDBRow=_,t.encodeEventResponseForDB=g,t.eventResponseMessageFromDBRow=function(e){var t;const n=l.default.from(e.msgKey);return(0,i.default)((0,i.default)({id:n},(0,u.msgKeyToTargetInfo)(n,a.TranslateMsgKeyType.Addon)),{},{type:c.MSG_TYPE.EVENT_RESPONSE,kind:c.MsgKind.EventResponseDecrypted,ack:e.ack,t:e.t,eventResponse:_(e.eventResponse),parentMsgKey:l.default.from(e.parentMsgKey),senderTimestampMs:e.senderTimestampMs,read:null!==(t=e.read)&&void 0!==t&&t})};var i=r(n(81109)),o=r(n(49619)),a=n(54468),s=n(26368),l=r(n(60001)),u=n(97087),c=n(73602),d=n(77026),p=n(3885),f=r(n(89482));function _(e){const t=d.Message$EventResponseMessage$EventResponseType.cast(new Uint8Array(e)[0]);if(null==t)throw(0,f.default)("Value contained in array buffer is not a valid event response");return t}function g(e){const t=new ArrayBuffer(1),n=new Uint8Array(t);return n[0]=e,n.buffer}},50501:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebMsgInfoEventResponses=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(22101),a=r(n(49619)),s=n(29162),l=n(95478),u=n(73602);function c(){return(c=(0,i.default)((function*(e){const{webMsgInfo:t,parsedWebMsgInfo:n,isFromCag:r}=e;try{return(null==t?void 0:t.eventResponses)&&n&&n.type===u.MSG_TYPE.EVENT_CREATION?t.eventResponses.map((e=>{try{const t=(0,a.default)(e.eventResponseMessageKey,"eventResponseMessageKey"),i=(0,a.default)(e.eventResponseMessage,"eventResponseMessage"),{msgKey:u}=(0,a.default)((0,s.buildAddonMsgKey)(t,r),"buildAddonMsgKey(eventResponseMessageKey, isFromCag)");return(0,l.protobufToEventResponseMsgData)({responseProtobuf:i,id:u,parentMsgKey:n.id,senderTimestampMs:(0,o.numberOrThrowIfTooLarge)((0,a.default)(i.timestampMs,"senderTimestampMs")),t:(0,s.getAddonServerTimestamp)(e.timestampMs),ack:null,read:!0!==e.unread})}catch(e){return __LOG__(4,void 0,new Error,!0)`[history sync] Failed to parse eventResponse with error ${e.message}`,SEND_LOGS("parseWebMsgInfoEventResponses-responses-parse-error"),null}})).filter(Boolean):[]}catch(e){return __LOG__(4,void 0,new Error,!0)`[history sync] parseWebMsgInfoEventResponses failed with error ${null==e?void 0:e.name} ${null==e?void 0:e.code} and stack ${null==e?void 0:e.stack}`,SEND_LOGS("parseWebMsgInfoEventResponses-error"),[]}}))).apply(this,arguments)}},21105:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r,msgContext:c}=e;const{eventMessage:d}=n;if(null==d)return null;if(!(0,a.isEventsReceivingEnabled)())return{msgData:(0,i.default)((0,i.default)({},r),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,futureproofType:l.MSG_TYPE.EVENT_CREATION}),contextInfo:null};const{contextInfo:p,isCanceled:f,name:_,description:g,joinLink:h,startTime:A,location:m}=d,E=(0,o.maybeNumberOrThrowIfTooLarge)(A);if(null==_||""===_||_.length>(0,a.getEventsNameLengthLimit)())throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.EVENT_CREATION_INVALID_NAME,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==E)throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.EVENT_CREATION_MISSING_DATE,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if("quoted"===c||"history_quoted"===c){return{msgData:(0,i.default)((0,i.default)({},r),{},{type:l.MSG_TYPE.EVENT_CREATION,kind:l.MsgKind.EventCreation,eventName:_,eventStartTime:E,eventDescription:g,eventJoinLink:h,isEventCanceled:Boolean(f),eventLocation:m}),contextInfo:p}}const y=null===(t=n.messageContextInfo)||void 0===t?void 0:t.messageSecret;if(null==y)throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.MISSING_MESSAGE_SECRET,u.E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);if(32!==y.byteLength)throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.INVALID_MESSAGE_SECRET,u.E2E_FAILURE_REASON.MESSAGE_SECRET_INVALID);if(null!=g&&g.length>(0,a.getEventsDescriptionLengthLimit)())throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.EVENT_CREATION_INVALID_DESCRIPTION,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==f)throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.EVENT_CREATION_INVALID_CANCELED_STATUS,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==(null==m?void 0:m.degreesLatitude)&&null!=(null==m?void 0:m.degreesLongitude)||null!=(null==m?void 0:m.degreesLatitude)&&null==(null==m?void 0:m.degreesLongitude))throw new s.EventCreationValidationError(s.EventCreationValidationErrorCode.EVENT_CREATION_INVALID_LOCATION,u.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},r),{},{type:l.MSG_TYPE.EVENT_CREATION,kind:l.MsgKind.EventCreation,eventName:_,eventDescription:g,eventJoinLink:h,eventStartTime:E,isEventCanceled:Boolean(f),eventLocation:m}),contextInfo:p}};var i=r(n(81109)),o=n(22101),a=n(33529),s=n(57782),l=n(73602),u=n(57095)},47808:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{secretEncryptedMessage:d}=t;if(null==d||d.secretEncType!==u.Message$SecretEncryptedMessage$SecretEncType.EVENT_EDIT)return;if(!(0,a.isEventsEditReceivingEnabled)())return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,futureproofType:l.MSG_TYPE.EVENT_EDIT_ENCRYPTED}),contextInfo:null};const{targetMessageKey:p,encPayload:f,encIv:_}=d,g=(0,o.translateRegularMessageKeyToLocalReference)(p,n);if(null==g)throw new s.EncryptedEventEditValidationError(s.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_TARGET_MESSAGE_KEY,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==_)throw new s.EncryptedEventEditValidationError(s.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_IV,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(12!==_.byteLength)throw new s.EncryptedEventEditValidationError(s.EncryptedEventEditValidationErrorCode.EVENT_EDIT_INVALID_SIZE_ENC_IV,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==f)throw new s.EncryptedEventEditValidationError(s.EncryptedEventEditValidationErrorCode.EVENT_EDIT_MISSING_ENC_PAYLOAD,c.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.EVENT_EDIT_ENCRYPTED,kind:l.MsgKind.EventEditEncrypted,encIv:_,encPayload:f,targetMessageKey:g}),contextInfo:null}};var i=r(n(81109)),o=n(54468),a=n(33529),s=n(57782),l=n(73602),u=n(77026),c=n(57095)},62352:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{encEventResponseMessage:r}=t;if(null==r)return null;if(!(0,a.isEventsReceivingEnabled)())return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,futureproofType:l.MSG_TYPE.EVENT_RESPONSE}),contextInfo:null};const{eventCreationMessageKey:c,encPayload:d,encIv:p}=r,f=(0,o.translateRegularMessageKeyToLocalReference)(c,n);if(null==f)throw new s.EncryptedEventResponseValidationError(s.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_MESSAGE_KEY,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==p)throw new s.EncryptedEventResponseValidationError(s.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_IV,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(12!==p.byteLength)throw new s.EncryptedEventResponseValidationError(s.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_INVALID_SIZE_ENC_IV,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==d)throw new s.EncryptedEventResponseValidationError(s.EncryptedEventResponseValidationErrorCode.EVENT_RESPONSE_MISSING_ENC_PAYLOAD,u.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.EVENT_RESPONSE,kind:l.MsgKind.EventResponseEncrypted,addonEncrypted:!0,encIv:p,encPayload:d,targetMessageKey:f}),contextInfo:null}};var i=r(n(81109)),o=n(54468),a=n(33529),s=n(57782),l=n(73602),u=n(57095)},57782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventCreationValidationErrorCode=t.EventCreationValidationError=t.EncryptedEventResponseValidationErrorCode=t.EncryptedEventResponseValidationError=t.EncryptedEventEditValidationErrorCode=t.EncryptedEventEditValidationError=void 0;var r=n(22495);const i=n(76672)({MISSING_MESSAGE_SECRET:"missing_message_secret",INVALID_MESSAGE_SECRET:"invalid_message_secret",EVENT_CREATION_INVALID_NAME:"event_creation_invalid_name",EVENT_CREATION_INVALID_DESCRIPTION:"event_creation_invalid_description",EVENT_CREATION_INVALID_CANCELED_STATUS:"event_creation_invalid_canceled_status",EVENT_CREATION_MISSING_DATE:"event_creation_missing_date",EVENT_CREATION_INVALID_LOCATION:"event_creation_invalid_location",EVENT_CREATION_MISSING_MESSAGE_SENDER:"event_creation_missing_message_sender"});t.EventCreationValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="EventCreationValidationError"}}t.EventCreationValidationError=o;const a=n(76672)({EVENT_RESPONSE_MISSING_MESSAGE_KEY:"event_response_missing_message_key",EVENT_RESPONSE_MISSING_ENC_IV:"event_response_missing_enc_iv",EVENT_RESPONSE_INVALID_SIZE_ENC_IV:"event_response_invalid_size_enc_iv",EVENT_RESPONSE_MISSING_ENC_PAYLOAD:"event_response_missing_enc_payload",EVENT_RESPONSE_MISSING_MESSAGE_SENDER:"event_response_missing_message_sender"});t.EncryptedEventResponseValidationErrorCode=a;class s extends r.MessageValidationError{constructor(){super(...arguments),this.name="EncryptedEventResponseValidationError"}}t.EncryptedEventResponseValidationError=s;const l=n(76672)({EVENT_EDIT_MISSING_TARGET_MESSAGE_KEY:"event_edit_missing_target_message_key",EVENT_EDIT_MISSING_ENC_IV:"event_edit_missing_enc_iv",EVENT_EDIT_INVALID_SIZE_ENC_IV:"event_edit_invalid_size_enc_iv",EVENT_EDIT_MISSING_ENC_PAYLOAD:"event_edit_missing_enc_payload",EVENT_EDIT_MISSING_MESSAGE_SENDER:"event_edit_missing_message_sender",EVENT_EDIT_MISSING_EDITED_MESSAGE:"event_edit_missing_edited_message",EVENT_EDIT_MISSING_SENDER_TIMESTAMP:"event_edit_missing_sender_timestamp",EVENT_EDIT_PARENT_SENDER_MISMATCH:"event_edit_parent_sender_mismatch",EVENT_EDIT_INVALID_PROTOCOL_MESSAGE_TYPE:"event_edit_invalid_protocol_message_type"});t.EncryptedEventEditValidationErrorCode=l;class u extends r.MessageValidationError{constructor(){super(...arguments),this.name="EncryptedEventEditValidationError"}}t.EncryptedEventEditValidationError=u},70243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addEncryptedColumn:s,addIndex:l}=(0,o.columnBuilder)(e.config);e.add("event-responses").version((0,i.eventsResponsesCreateTable)(),[n(["parentMsgKey","sender"]),t("msgKey"),l("parentMsgKey"),t("t"),t("ack"),t("read"),t("senderTimestampMs"),s("eventResponse",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER)]).version((0,i.eventResponsesAddMsgKeyIndex)(),[l("msgKey")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("event-responses")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},33529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventsCallLinkMaxDaysInAdvance=function(){return(0,r.getABPropConfigValue)("event_wa_call_max_days_in_advance")},t.getEventsDescriptionLengthLimit=function(){return(0,r.getABPropConfigValue)("event_description_length_limit")},t.getEventsNameLengthLimit=function(){return(0,r.getABPropConfigValue)("event_name_length_limit")},t.isEventsCreationEnabled=i,t.isEventsEditReceivingEnabled=function(){return(0,r.getABPropConfigValue)("events_edit_receive")||o()},t.isEventsEditSendingEnabled=o,t.isEventsReceivingEnabled=function(){return(0,r.getABPropConfigValue)("events_view")||i()};var r=n(83741);function i(){return(0,r.getABPropConfigValue)("events_create")}function o(){return(0,r.getABPropConfigValue)("events_edit_send")}},6366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("favorite").version((0,i.favoriteCreateTable)(),[n("id"),t("type")]).view((e=>e))},t.getFavoriteTable=function(){return(0,r.getStorage)().table("favorite")};var r=n(74557),i=n(20746),o=n(65717)},42311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fmxCTWAKillSwitchEnabled=function(){return o()&&(0,r.getABPropConfigValue)("fmx_ctwa_kill_switch")},t.supportsFMX=i,t.supportsFMXV2=o;var r=n(83741);function i(){return(0,r.getABPropConfigValue)("first_message_experience")}function o(){return i()&&(0,r.getABPropConfigValue)("first_message_experience_v2")}},58805:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{groupInviteMessage:r}=t;if(null==r)return;const{caption:a,inviteCode:s,inviteExpiration:l,groupJid:u,groupName:c,contextInfo:d}=r;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:o.MSG_TYPE.GROUPS_V4_INVITE,kind:o.MsgKind.GroupsV4Invite,comment:a,inviteCode:s,inviteCodeExp:null==l?void 0:l.toString(),inviteGrp:u,inviteGrpName:c}),contextInfo:d}};var i=r(n(81109)),o=n(73602)},32234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},60668:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{buttonsResponseMessage:r}=t;if(null==r)return;if(r.type===s.Message$ButtonsResponseMessage$Type.DISPLAY_TEXT){return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.BUTTONS_RESPONSE,kind:a.MsgKind.ButtonsResponse,selectedButtonId:r.selectedButtonId,body:(0,o.convertToTextWithoutSpecialEmojis)(r.selectedDisplayText)}),contextInfo:r.contextInfo}}return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.UNKNOWN,kind:a.MsgKind.Unknown}),contextInfo:r.contextInfo}};var i=r(n(81109)),o=n(54468),a=n(73602),s=n(77026)},96735:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r}=e;const{highlyStructuredMessage:s}=n;if(null==s)return;const l=null===(t=s.hydratedHsm)||void 0===t?void 0:t.hydratedTemplate;return{msgData:(0,i.default)((0,i.default)({},r),{},{type:a.MSG_TYPE.HSM,kind:a.MsgKind.Hsm,body:l?(0,o.convertToTextWithoutSpecialEmojis)(l.hydratedContentText):r.body}),contextInfo:void 0}};var i=r(n(81109)),o=n(54468),a=n(73602)},84263:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r;let{messageProtobuf:o,baseMessage:s,bizInfo:f,bizSource:_,msgContext:g}=e;const{interactiveMessage:E}=o;if(null==E)return;const y=(0,a.getInteractiveMessageTypeForProto)(E);if(!y||!(0,a.isInteractiveMessageTypeEnabled)(y))return m(s,E);const{body:S,footer:v}=E,I=(0,a.getInteractiveMessageFieldNameForType)(y);let T={type:d.MSG_TYPE.INTERACTIVE,kind:d.MsgKind.Interactive,caption:null!==(t=(0,a.convertToTextWithoutSpecialEmojis)(null==S?void 0:S.text))&&void 0!==t?t:"",interactiveType:y,interactivePayload:E[I],pmCampaignId:null==f?void 0:f.campaignId,bizSource:_};if(!(0,a.isSupportedInteractiveMessageVersion)(y,E[I]))return m(s,E);let b=null;const M=E.carouselMessage;if(null!=M&&(b=function(e,t,n,r,o){const s=t.cards.map((t=>function(e,t,n,r,o){var s;const{body:l,header:u}=e,p=(0,a.getInteractiveMessageTypeForProto)(e);if(!p||!(0,a.isInteractiveMessageTypeEnabled)(p))return null;const f=(0,i.default)((0,i.default)({},u),{},{type:d.MSG_TYPE.INTERACTIVE,kind:d.MsgKind.Interactive,caption:null!==(s=(0,a.convertToTextWithoutSpecialEmojis)(null==l?void 0:l.text))&&void 0!==s?s:"",interactiveType:p,interactivePayload:e.nativeFlowMessage,pmCampaignId:null==r?void 0:r.campaignId,bizSource:o}),_=null!=u?A(u,t,n):void 0,g=null==_?void 0:_.headerMessage;if(null==_||null==g)return null;const h=(0,i.default)((0,i.default)({},_.interactiveHeader),{},{title:null,subtitle:null}),m=new c.default({fromMe:g.id.fromMe,remote:g.id.remote,participant:g.id.participant,id:c.default.newId_DEPRECATED()});if(g.type===d.MSG_TYPE.VIDEO)return(0,i.default)((0,i.default)((0,i.default)({},g),f),{},{id:m,interactiveHeader:h,footer:null,isCarouselCard:!0,parentMsgId:t.id.clone()});if(g.type===d.MSG_TYPE.IMAGE)return(0,i.default)((0,i.default)((0,i.default)({},g),f),{},{id:m,interactiveHeader:h,footer:null,isCarouselCard:!0,parentMsgId:t.id.clone()})}(t,e,n,r,o))),l=(0,h.default)(s);if(0===l.length)return null;return l}(s,M,g,f,_),null==b))return m(s,E);if(y===u.default.NATIVE_FLOW){var P;const e=l.default.cast((0,a.getBizNativeFlowName)({interactiveMessage:E}));if(T=(0,i.default)((0,i.default)({},T),{},{nativeFlowName:e}),!(0,a.isValidNativeFlowName)(e,f)||!(0,p.isValidNativeFlowMessage)(T,_,null==s||null===(P=s.id)||void 0===P?void 0:P.fromMe))return m(s,E)}const C=null!=E.header?A(E.header,s,g):void 0;return{msgData:(0,i.default)((0,i.default)((0,i.default)((0,i.default)({},s),null!==(n=null==C?void 0:C.headerMessage)&&void 0!==n?n:{}),T),{},{interactiveHeader:null==C?void 0:C.interactiveHeader,footer:v?(0,a.convertToTextWithoutSpecialEmojis)(v.text):s.footer,carouselCardsParsed:null!==(r=b)&&void 0!==r?r:void 0}),contextInfo:E.contextInfo}};var i=r(n(81109)),o=n(57305),a=n(54468),s=n(2576),l=r(n(718)),u=r(n(38090)),c=r(n(60001)),d=n(73602),p=n(72038),f=r(n(20020)),_=r(n(96259)),g=r(n(13501)),h=r(n(9539));function A(e,t,n){const r=!0===e.hasMediaAttachment?e.imageMessage?{headerMessage:null===(i=(0,_.default)({messageProtobuf:{imageMessage:e.imageMessage},baseMessage:t,msgContext:n}))||void 0===i?void 0:i.msgData,mediaType:s.InteractiveMessageHeaderMediaType.IMAGE}:e.documentMessage?{headerMessage:null===(l=(0,f.default)({messageProtobuf:{documentMessage:e.documentMessage},baseMessage:t,msgContext:n}))||void 0===l?void 0:l.msgData,mediaType:s.InteractiveMessageHeaderMediaType.DOCUMENT}:e.videoMessage?{headerMessage:null===(u=(0,g.default)({messageProtobuf:{videoMessage:e.videoMessage},baseMessage:t,msgContext:n}))||void 0===u?void 0:u.msgData,mediaType:s.InteractiveMessageHeaderMediaType.VIDEO}:void 0:void 0;var i,l,u;return{headerMessage:null==r?void 0:r.headerMessage,interactiveHeader:{title:(0,a.convertToTextWithoutSpecialEmojis)(e.title),subtitle:(0,a.convertToTextWithoutSpecialEmojis)(e.subtitle),thumbnail:(0,o.decodeBytes)(e.jpegThumbnail),hasMediaAttachment:Boolean(e.hasMediaAttachment),mediaType:null==r?void 0:r.mediaType}}}function m(e,t){return{msgData:(0,i.default)((0,i.default)({},e),{},{type:d.MSG_TYPE.UNKNOWN,kind:d.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:t.contextInfo}}},4904:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,bizInfo:r}=e;const{interactiveResponseMessage:l}=t;if(null==l)return;const u=(0,a.getInteractiveResponseMessageTypeForProto)(l);if(!(0,o.interactiveNativeFlowResponseMessagesEnabled)()||!u||!(0,a.isInteractiveResponseMessageTypeEnabled)(u))return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.UNKNOWN,kind:s.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:l.contextInfo};try{var c,d;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.INTERACTIVE_RESPONSE,kind:s.MsgKind.InteractiveResponse,body:null!==(c=(0,a.convertToTextWithoutSpecialEmojis)(null===(d=l.body)||void 0===d?void 0:d.text))&&void 0!==c?c:"",interactivePayload:(0,a.getInteractiveResponsePayload)(u,l,r)}),contextInfo:l.contextInfo}}catch(e){return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.UNKNOWN,kind:s.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:l.contextInfo}}};var i=r(n(81109)),o=n(56660),a=n(54468),s=n(73602)},65299:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{listMessage:r}=t;if(null==r)return;let s;const{listType:l}=r;if(l===a.Message$ListMessage$ListType.SINGLE_SELECT||l===a.Message$ListMessage$ListType.PRODUCT_LIST){let e=n.businessOwnerJid,t=n.productListItemCount;var u,c;if(r.listType===a.Message$ListMessage$ListType.PRODUCT_LIST)e=null===(u=r.productListInfo)||void 0===u?void 0:u.businessOwnerJid,t=null===(c=r.productListInfo)||void 0===c?void 0:c.productSections.reduce(((e,t)=>e+t.products.length),0);s=(0,i.default)((0,i.default)({},n),{},{businessOwnerJid:e,productListItemCount:t,type:o.MSG_TYPE.LIST,kind:o.MsgKind.List,list:r,footer:r.footerText})}else s=(0,i.default)((0,i.default)({},n),{},{type:o.MSG_TYPE.UNKNOWN,kind:o.MsgKind.Unknown});return{msgData:s,contextInfo:r.contextInfo}};var i=r(n(81109)),o=n(73602),a=n(77026)},66534:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{listResponseMessage:r}=t;if(null==r)return;if(r.listType===s.Message$ListResponseMessage$ListType.SINGLE_SELECT){const e=(0,i.default)((0,i.default)({},r),{},{contextInfo:void 0});let t=r.title||"";null!=r.description&&""!==r.description&&(t+="\n"+r.description);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.LIST_RESPONSE,kind:a.MsgKind.ListResponse,listResponse:e,body:(0,o.convertToTextWithoutSpecialEmojis)(t)}),contextInfo:r.contextInfo}}};var i=r(n(81109)),o=n(54468),a=n(73602),s=n(77026)},86019:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,bizInfo:r,bizSource:d,msgContext:p}=e;const{buttonsMessage:f}=t;if(null==f)return;const{buttons:_=[],headerType:g}=f,h=s.default.cast((0,a.getBizNativeFlowName)({buttonsMessage:f}));if(null==h&&null==(null==r?void 0:r.nativeFlowName))return;if(!(0,a.shouldParseNFM)(h,r)||(0,a.hasUnsupportedButtons)(_))return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:f.contextInfo};if(g===c.Message$ButtonsMessage$HeaderType.UNKNOWN||!new Set(c.Message$ButtonsMessage$HeaderType.members()).has(g))return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,subtype:void 0}),contextInfo:f.contextInfo};const A=(0,o.parseButtonsMessageProto)({buttonsMessage:f,baseMessage:n,msgContext:p});if(null==h)return;const m=(0,i.default)((0,i.default)({},A),{},{type:l.MSG_TYPE.NATIVE_FLOW,kind:l.MsgKind.NativeFlow,nativeFlowName:s.default.cast(h),nativeFlowButtons:_});if(!m.nativeFlowName||!(0,u.isValidNativeFlowMessage)(m,d))return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.UNKNOWN,kind:l.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:f.contextInfo};return{msgData:m,contextInfo:f.contextInfo}};var i=r(n(81109)),o=n(5768),a=n(54468),s=r(n(718)),l=n(73602),u=n(72038),c=n(77026)},24585:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{templateButtonReplyMessage:r}=t;if(null==r)return;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.TEMPLATE_BUTTON_REPLY,kind:a.MsgKind.TemplateButtonReply,body:(0,o.convertToTextWithoutSpecialEmojis)(r.selectedDisplayText),selectedIndex:r.selectedIndex,selectedId:r.selectedId,selectedCarouselCardIndex:r.selectedCarouselCardIndex}),contextInfo:r.contextInfo}};var i=r(n(81109)),o=n(54468),a=n(73602)},14200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HSM_TAG_TYPE=void 0;t.HSM_TAG_TYPE={MARKETING:"MARKETING",UTILITY:"UTILITY",AUTHENTICATION:"AUTHENTICATION"}},2576:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveMessageHeaderMediaType=t.IM_MEDIA_HEADER_TYPES=void 0;const r=n(76672).Mirrored(["IMAGE","VIDEO","DOCUMENT"]);t.InteractiveMessageHeaderMediaType=r;const i=new Set([r.IMAGE,r.VIDEO,r.DOCUMENT]);t.IM_MEDIA_HEADER_TYPES=i},38090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(76672)({NATIVE_FLOW:"native_flow",SHOPS_STOREFRONT:"shops_storefront",CAROUSEL:"carousel"});t.default=r},718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(76672)({ORDER_DETAILS:"order_details",ORDER_STATUS:"order_status",PAYMENT_STATUS:"payment_status",PAYMENT_METHOD:"payment_method",MESSAGE_WITH_LINK:"message_with_link",MESSAGE_WITH_LINK_STATUS:"message_with_link_status",QUICK_REPLY:"quick_reply",CTA_CALL:"cta_call",CTA_URL:"cta_url",CTA_CATALOG:"cta_catalog"});t.default=r},92986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(76672)({NATIVE_FLOW:"native_flow"});t.default=r},41843:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAlternateJid=function(e){var t;return null===(t=(0,i.getAlternateUserWid)((0,l.createWid)(e)))||void 0===t?void 0:t.toString()},t.getAlternateMsgKey=function(e){const t=null!=e.participant?(0,i.getAlternateUserWid)(e.participant):null;if(null==t)return;return new a.default({fromMe:e.fromMe,remote:e.remote,id:e.id,participant:t})},t.getMeUserLidOrJidForChat=function(e,t){var n;const r=e.id.isLid(),i=e.isCAG,a=e.isGroup&&Boolean(null===(n=e.groupMetadata)||void 0===n?void 0:n.isLidAddressingMode);switch(t){case o.TranslateMsgKeyType.Addon:return r||i||a?(0,s.getMeLidUser)():(0,s.assertGetMeUser)();case o.TranslateMsgKeyType.Message:return i?a?(0,s.getMeLidUser)():(0,s.assertGetMeUser)():r||a?(0,s.getMeLidUser)():(0,s.assertGetMeUser)()}},t.normalizeUserWidsToLidOrPn=function(e,t){if(null!=e&&null!=t&&e.isLid()!==t.isLid()){const n=(0,i.getAlternateUserWid)(e);if(null!=n)return[n,t];const r=(0,i.getAlternateUserWid)(t);if(null!=r)return[e,r]}return[e,t]},t.normalizeWidToLid=c,t.normalizeWidToPn=u,t.normalizeWidsToAddressingMode=function(e,t){return t.map(e?c:u)};var i=n(42247),o=n(54468),a=r(n(60001)),s=n(3885),l=n(51017);function u(e){return e.isLid()?(0,i.getPhoneNumber)(e):e}function c(e){return e.isLid()?e:(0,i.getCurrentLid)(e)}},37302:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,finalLocation:r}=e;const{locationMessage:u,liveLocationMessage:c}=t;let d=null;null!=u&&(d=function(e,t){var n,r;let o=(null!==(n=e.name)&&void 0!==n?n:"")||(null!==(r=e.address)&&void 0!==r?r:"");null!=e.name&&""!==e.name&&null!=e.address&&""!==e.address&&(o=`${e.name}\n${e.address}`);const s=void 0!==e.degreesLatitude?e.degreesLatitude:void 0,u=void 0!==e.degreesLongitude?e.degreesLongitude:void 0;return{msgData:(0,i.default)((0,i.default)({},t),{},{type:l.MSG_TYPE.LOCATION,kind:l.MsgKind.Location,loc:o,lat:s,lng:u,body:(0,a.decodeBytes)(e.jpegThumbnail)||"",clientUrl:e.url}),contextInfo:e.contextInfo}}(u,n));null!=c&&(d=function(e,t,n){let r={};n&&(r={finalLat:n.degreesLatitude,finalLng:n.degreesLongitude,finalThumbnail:(0,a.decodeBytes)(n.jpegThumbnail)||"",finalAccuracy:n.accuracyInMeters,finalSpeed:n.speedInMps,finalDegrees:n.degreesClockwiseFromMagneticNorth,finalTimeOffset:n.timeOffset});return{msgData:(0,i.default)((0,i.default)((0,i.default)({},t),r),{},{type:l.MSG_TYPE.LOCATION,kind:l.MsgKind.LocationLive,isLive:!0,lat:e.degreesLatitude,lng:e.degreesLongitude,body:(0,a.decodeBytes)(e.jpegThumbnail)||"",accuracy:e.accuracyInMeters,speed:e.speedInMps,degrees:e.degreesClockwiseFromMagneticNorth,comment:(0,s.convertToTextWithoutSpecialEmojis)(e.caption),sequence:(0,o.maybeNumberOrThrowIfTooLarge)(e.sequenceNumber)}),contextInfo:e.contextInfo}}(c,n,r));return d};var i=r(n(81109)),o=n(22101),a=n(57305),s=n(54468),l=n(73602)},84184:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{protocolMessage:p}=t;if(null==p||(null==p?void 0:p.type)!==d.Message$ProtocolMessage$Type.MESSAGE_EDIT)return;if("relay"===r)return;try{if(!(0,u.receiveTextEditEnabled)())return{msgData:(0,i.default)((0,i.default)({},n),{},{type:c.MSG_TYPE.UNKNOWN,kind:c.MsgKind.Unknown,subtype:"message_edit",futureproofType:c.MSG_TYPE.PROTOCOL,futureproofSubtype:"message_edit"}),contextInfo:null};const e=(0,i.default)((0,i.default)({},n),{},{latestEditSenderTimestampMs:(0,o.maybeNumberOrThrowIfTooLarge)(p.timestampMs),latestEditMsgKey:n.id});return Object.assign(e,(0,s.parseMsgProto)((0,a.default)(p.editedMessage,"protocolMessage.editedMessage"),e)),e.id=(0,l.protobufToMsgKey)((0,a.default)(p.key,"protocolMessage.key"),e.author),{msgData:e,contextInfo:null}}catch(e){throw __LOG__(3,void 0,void 0,!0,["messaging"])`parseHistorySyncEditedMessageProto: error:${null==e?void 0:e.name}, stack: ${null==e?void 0:e.stack}`,SEND_LOGS("parseHistorySyncEditedMessageProto: EditParseError",1,"messaging"),e}};var i=r(n(81109)),o=n(22101),a=r(n(49619)),s=n(18431),l=n(54468),u=n(68214),c=n(73602),d=n(77026)},18023:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{protocolMessage:f}=t;if(null==f||(null==f?void 0:f.type)!==p.Message$ProtocolMessage$Type.MESSAGE_EDIT)return;if("relay"!==r)return;try{var _;const e=null!==(_=function(e,t){var n,r,p;const f=null!==(n=null===(r=t.editedMessage)||void 0===r||null===(p=r.groupMentionedMessage)||void 0===p?void 0:p.message)&&void 0!==n?n:t.editedMessage;if(!Boolean(null==f?void 0:f.conversation)&&!Boolean(null==f?void 0:f.extendedTextMessage))return null;if(!(0,c.receiveTextEditEnabled)())return{msgData:(0,u.futureproofEdit)(e),contextInfo:null};const _=(0,l.translateRegularMessageKeyToLocalReference)(t.key,e);return{msgData:(0,i.default)((0,i.default)({},(0,s.parseMsgProto)((0,a.default)(f,"editedMessage"),e)),{},{type:d.MSG_TYPE.PROTOCOL,kind:d.MsgKind.Protocol,subtype:"message_edit",editMsgType:d.MSG_TYPE.CHAT,latestEditSenderTimestampMs:(0,o.maybeNumberOrThrowIfTooLarge)(t.timestampMs),latestEditMsgKey:e.id,protocolMessageKey:_}),contextInfo:null}}(n,f))&&void 0!==_?_:function(e,t){var n,r,a;const s=null!==(n=null===(r=t.editedMessage)||void 0===r||null===(a=r.groupMentionedMessage)||void 0===a?void 0:a.message)&&void 0!==n?n:t.editedMessage;let p,f,_;if(null==s?void 0:s.imageMessage)p=d.MSG_TYPE.IMAGE,f=s.imageMessage.caption,_=s.imageMessage.contextInfo;else if(null==s?void 0:s.videoMessage)p=d.MSG_TYPE.VIDEO,f=s.videoMessage.caption,_=s.videoMessage.contextInfo;else if(null==s?void 0:s.documentMessage)p=d.MSG_TYPE.DOCUMENT,f=s.documentMessage.caption,_=s.documentMessage.contextInfo;else if(null==s?void 0:s.documentWithCaptionMessage){var g,h,A,m,E,y;p=d.MSG_TYPE.DOCUMENT,f=null===(g=s.documentWithCaptionMessage)||void 0===g||null===(h=g.message)||void 0===h||null===(A=h.documentMessage)||void 0===A?void 0:A.caption,_=null===(m=s.documentWithCaptionMessage)||void 0===m||null===(E=m.message)||void 0===E||null===(y=E.documentMessage)||void 0===y?void 0:y.contextInfo}if(!p||""===f||null==f)return null;if(!(0,c.receiveCaptionEditEnabled)())return{msgData:(0,u.futureproofEdit)(e),contextInfo:null};return{msgData:(0,i.default)((0,i.default)({},e),{},{type:d.MSG_TYPE.PROTOCOL,kind:d.MsgKind.Protocol,subtype:"message_edit",editMsgType:p,caption:f,latestEditSenderTimestampMs:(0,o.maybeNumberOrThrowIfTooLarge)(t.timestampMs),latestEditMsgKey:e.id,protocolMessageKey:(0,l.translateRegularMessageKeyToLocalReference)(t.key,e)}),contextInfo:_}}(n,f);return e||null}catch(e){throw __LOG__(3,void 0,void 0,!0,["messaging"])`parseProtocolMessageEditProto: error:${null==e?void 0:e.name}, stack: ${null==e?void 0:e.stack}`,SEND_LOGS("parseProtocolMessageEditProto: EditParseError",1,"messaging"),e}};var i=r(n(81109)),o=n(22101),a=r(n(49619)),s=n(18431),l=n(54468),u=n(5850),c=n(68214),d=n(73602),p=n(77026)},5850:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.futureproofEdit=function(e){return(0,i.default)((0,i.default)({},e),{},{type:o.MSG_TYPE.UNKNOWN,kind:o.MsgKind.Unknown,subtype:"message_edit",futureproofType:o.MSG_TYPE.PROTOCOL,futureproofSubtype:"message_edit"})};var i=r(n(81109)),o=n(73602)},34473:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MsgEditType=void 0,t.getMessageEditProcessingWindowDurationSeconds=u,t.getMessageEditUIEntryPointLimitSeconds=c,t.getMsgEditType=function(e){switch(e){case a.MSG_TYPE.CHAT:return d.TextEdit;case a.MSG_TYPE.IMAGE:case a.MSG_TYPE.VIDEO:case a.MSG_TYPE.DOCUMENT:return d.CaptionEdit;default:return null}},t.isParentWithinEditProcessingWindow=function(e){let{parentTsInSeconds:t,editTsInSeconds:n,msgKey:r}=e;const o=s.default.isNewsletter(r.remote);return null!=n?n<t+u(o):(0,i.unixTime)()<t+u(o)},t.isParentWithinEditUIWindow=function(e){let{parentTsInSeconds:t,msgKey:n}=e;return(0,i.unixTime)()<t+c(s.default.isNewsletter(n.remote))},t.msgTypeSupportsEditing=function(e){if(p.includes(e))return!0;return!1};var i=n(29987),o=n(83741),a=n(73602),s=r(n(27112));const l=2592e3;function u(e){if(e)return l;const t=(0,o.getABPropConfigValue)("message_edit_window_duration_seconds");return null==t||t<=0?1200:t}function c(e){if(e)return l;const t=(0,o.getABPropConfigValue)("message_edit_client_entry_point_limit_seconds");return null==t||t<=0?900:t}const d=n(76672).Mirrored(["TextEdit","CaptionEdit"]);t.MsgEditType=d;const p=[a.MSG_TYPE.CHAT,a.MSG_TYPE.IMAGE,a.MSG_TYPE.VIDEO,a.MSG_TYPE.DOCUMENT]},38:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.bulkCreateOrUpdateMyVotes=function(e){return(0,a.getStorage)().lock(["newsletter-my-votes"],function(){var t=(0,o.default)((function*(t){let[n]=t;const r=new Map,i=e.map((e=>{if(u.default.isNewsletter(e.chatJid))return r.set(`${e.chatJid}-${e.msgServerId}`,e),[e.chatJid,e.msgServerId]})).filter(Boolean);(yield n.anyOf(["chatJid","msgServerId"],i)).forEach((e=>{const t=`${e.chatJid}-${e.msgServerId}`,n=r.get(t);null!=n&&n.serverTimestampMs<e.serverTimestampMs&&r.delete(t)})),yield n.bulkCreateOrReplace(Array.from(r.values()))}));return function(){return t.apply(this,arguments)}}())},t.createOrUpdateMyVote=c,t.deleteMyVote=function(e,t){return(0,l.getTable)().remove([e,t])},t.getMyVote=d,t.updateMyVote=function(){return p.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=n(74557),s=n(48678),l=n(76481),u=r(n(27112));function c(e){return(0,a.getStorage)().lock(["newsletter-my-votes"],function(){var t=(0,o.default)((function*(t){let[n]=t;if(!u.default.isNewsletter(e.chatJid))return void __LOG__(3)`[createOrUpdateMyVote] Invalid newsletter jid ${e.chatJid}`;const r=yield d(e.chatJid,e.msgServerId);null!=r&&r.serverTimestampMs>e.serverTimestampMs||(yield n.createOrReplace(e))}));return function(){return t.apply(this,arguments)}}())}function d(e,t){return!Number.isSafeInteger(t)||t<100||t>=s.TEMPORARY_SERVER_ID_LOWER_BOUND?Promise.resolve(null):(0,l.getTable)().get([e,t])}function p(){return(p=(0,o.default)((function*(e){const t=yield d(e.chatJid,e.msgServerId);null!=t&&(yield c((0,i.default)((0,i.default)({},t),e)))}))).apply(this,arguments)}},21826:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.storeEncryptedNewsletterMessages=function(e){return(0,l.getStorage)().lock(["message","chat"],function(){var t=(0,i.default)((function*(t){let[n]=t;const r=yield(0,s.getLastRowId)(n),l=(yield(0,o.promiseMap)(e,function(){var e=(0,i.default)((function*(e,t){var n;let[i,o]=e;const s=null!==(n=i.serverId)&&void 0!==n?n:yield(0,c.getTemporaryServerId)(i.to);if(null==s)return __LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletter][storage] serverId is missing from message`,SEND_LOGS("newsletter-missing-serverId",1,"newsletter"),null;const l=u.default.fromString(i.id),d=yield(0,a.isPendingUnreadReceipt)(l,i),p=(0,a.addMsgMetadataToMsgRow)({msg:i,chatId:l.remote.toString(),hasLink:o,inChatMsgId:s,rowId:r+t+1,pendingReadReceipt:d});return delete p.serverId,p}));return function(){return e.apply(this,arguments)}}())).filter(Boolean);try{yield n.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(l)}catch(e){__LOG__(4,void 0,new Error,void 0,["newsletter"])`[newsletter-store] Failed to store messages`}}));return function(){return t.apply(this,arguments)}}())};var i=r(n(48926)),o=n(21212),a=n(39066),s=n(34066),l=n(74557),u=r(n(60001)),c=n(48678)},61647:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterDBMembership=void 0;const r=n(76672)({Subscriber:0,Admin:1,Guest:2,Owner:3});t.NewsletterDBMembership=r},48678:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TEMPORARY_SERVER_ID_LOWER_BOUND=void 0,t.bulkGetMessagesByServerIds=function(){return T.apply(this,arguments)},t.craftNewsletterMsgKeyFromServerId=function(e,t){const n=t instanceof h.default?t:(0,A.createWid)(t);return new d.default({remote:n,fromMe:!0,id:e.toString(10)})},t.doesNewsletterExistInStorage=function(){return m.apply(this,arguments)},t.getMessageByServerId=function(){return I.apply(this,arguments)},t.getTemporaryServerId=function(){return b.apply(this,arguments)},t.getUnexpiredNewsletterAdminInviteMessageRecordsFromChat=function(){return P.apply(this,arguments)},t.isPreviewNewsletter=E,t.isSubscribedNewsletter=function(){return S.apply(this,arguments)},t.updateMsgViewReceipt=function(){return M.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(93040),s=n(74773),l=n(62505),u=n(87946),c=n(15610),d=r(n(60001)),p=n(73602),f=n(61647),_=n(10139),g=n(9800),h=r(n(27112)),A=n(51017);function m(){return(m=(0,i.default)((function*(e){return null!=(yield(0,a.getChatRecord)((0,c.newsletterJidToWid)(e)))}))).apply(this,arguments)}function E(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=yield(0,g.getNewsletterMetadataTable)().get(e);return null==t||t.membershipType===f.NewsletterDBMembership.Guest}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){return!(yield E(e))}))).apply(this,arguments)}const v=Number.MAX_SAFE_INTEGER-1e4;function I(){return(I=(0,i.default)((function*(e,t){const n=(0,l.craftInternalId)(t,e),[r]=yield(0,_.getMessageTable)().anyOf(["internalId"],[n]);return null==r?null:(0,s.messageFromDbRow)(r)}))).apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e,t){const n=new Map,r=new Map(e.map((e=>[(0,l.craftInternalId)(t,e),e])));return(yield(0,_.getMessageTable)().anyOf(["internalId"],Array.from(r.keys()))).forEach((e=>{if(null==e.internalId)return;const t=r.get(e.internalId);null!=t&&n.set(t,(0,s.messageFromDbRow)(e))})),n}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(e){const t=(0,l.craftInternalId)(e.toJid(),v),n=(0,l.endOfChat)(e),r=yield(0,_.getMessageTable)().between(["internalId"],t,n,{lowerInclusive:!0,upperInclusive:!1,limit:1,reverse:!0});if(0===r.length)return v;if(null==r[0].internalId)return v;const i=(0,l.getInChatMsgId)(r[0].internalId);return Math.min(i+1,Number.MAX_SAFE_INTEGER)}))).apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e){const t=(yield(0,_.getMessageTable)().bulkGet(e.map(String))).filter(Boolean).map((e=>({id:e.id,viewed:!0})));yield(0,_.getMessageTable)().bulkCreateOrMerge(t)}))).apply(this,arguments)}function P(){return(P=(0,i.default)((function*(e,t,n){const r=yield(0,u.getMsgsByChatId)(t),i=(0,o.unixTime)();return r.filter((e=>e.type===p.MSG_TYPE.NEWSLETTER_ADMIN_INVITE)).map((e=>(0,s.messageFromDbRow)(e))).filter((t=>{var r;if(!t.from.equals(n))return!1;const{newsletterId:o,inviteExpiration:a}=null!==(r=t.newsletterAdminInviteInfo)&&void 0!==r?r:{};return null!=o&&null!=a&&(i<a&&e.equals(o))}))}))).apply(this,arguments)}t.TEMPORARY_SERVER_ID_LOWER_BOUND=v},60387:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return E.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(1619),s=n(46316),l=n(12987),u=n(98226),c=n(66545),d=n(43823),p=n(27893),f=n(75674),_=n(88504),g=r(n(9441)),h=n(29205),A=n(1723),m=n(68231);function E(){return(E=(0,i.default)((function*(e){try{const{msg:t,ack:n}=(0,g.default)(e);if(!(0,_.isNewsletterEnabled)())return n;const r=(0,o.unixTimeMs)();t.offline&&(A.OfflineMessageHandler.addOfflinePendingMessage(),A.OfflineMessageHandler.offlineStanzaReceivedAfterComplete()),A.OfflineMessageHandler.isResumeFromRestartComplete()&&(t.offline=!1);const c=!(0,h.isAddOnType)(t.type);return yield(0,f.handleMessage)(t.from.toString(),t.offline,(0,i.default)((function*(){const e=(0,o.unixTimeMs)(),{msgData:i,isOrphan:f}=yield(0,h.preprocessNewsletterMsg)(t),_=c?p.messageProcessorCache.addMessages([{msg:i}],!t.offline).then((()=>{m.WorkerOfflineResumeReporter.updateProcessedMessageCount(),(0,d.logReceivedMessagesInWAM)([i],t.offline,1e3*t.t,r,e)})).catch((()=>{__LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletter] Failed to handle newsletter message`,SEND_LOGS("newsletter-failed-to-store-incoming-message",1,"newsletter")})):Promise.resolve();return yield(0,u.maybeHandleNewsletterMsgAddOns)(i,{pollVotes:t.pollVote}),s.Cmd.isMainStreamReadyMd&&(s.Cmd.isOfflineDeliveryEnd&&(yield _),(0,a.frontendFireAndForget)("updateNewsletterMessageUI",{chatID:t.from,msg:i,isOrphan:f})),t.offline?(A.OfflineMessageHandler.processMessageDecryptResult(l.E2EProcessResult.SUCCESS),void p.messageProcessorCache.addMessages([{receiptInfo:{externalId:t.id,from:t.from,author:t.from}}]).catch((e=>{const{name:t,message:n}=e instanceof Error?e:{};__LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletter] Failed to handle newsletter offline ack ${t}-${n}`,SEND_LOGS("newsletter-failed-to-store-offline-ack",1,"newsletter")}))):n})))}catch(t){throw(0,c.handleNewsletterMsgError)(t,{stanza:e}),__LOG__(4,void 0,new Error,!0,["newsletter"])`[newsletter] Failed to handle newsletter message ${t.name}-${t.message}`,SEND_LOGS("failed-handle-newsletter-message",1,"newsletter"),t}}))).apply(this,arguments)}},98226:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.maybeHandleNewsletterMsgAddOns=function(e,t){switch(e.type){case"reaction":return function(){return p.apply(this,arguments)}(e);case"poll_update":return function(){return f.apply(this,arguments)}(e,t);default:return Promise.resolve()}};var i=r(n(48926)),o=n(38032),a=n(1619),s=n(38),l=n(58755),u=n(48678),c=n(58221),d=n(3885);function p(){return(p=(0,i.default)((function*(e){const{reactionText:t,id:n,serverId:r,from:i,t:s}=e;if(null==r||null==s||null==i||null==t)return;const c={msgKey:n.toString(),parentMsgKey:(0,u.craftNewsletterMsgKeyFromServerId)(r,i).toString(),senderUserJid:(0,d.getMeUser)().toString(),reactionText:t,timestamp:1e3*s,orphan:0,read:!0,ack:o.ACK.SENT};yield(0,l.createOrUpdateReactions)([c]);const p=yield(0,u.getMessageByServerId)(r,i.toJid());null!=p&&(yield(0,a.frontendFireAndForget)("updateChatPreviewFromReaction",{reactionMsgObj:c,parentMsgKey:p.id}))}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e,t){const{id:n,serverId:r,from:i,t:l,selectedOptionLocalIds:p}=e,f=t.pollVotes;if(null==r||null==l||null==i||null==f)return;const _={chatJid:n.remote.toJid(),msgServerId:r,msgKey:e.id.toString(),serverTimestampMs:1e3*l,t:l,votes:f.map(c.bufferToHex)};yield(0,s.createOrUpdateMyVote)(_);const g=yield(0,u.getMessageByServerId)(r,i.toJid());null!=g&&(yield(0,a.frontendFireAndForget)("updateChatPreviewFromVote",{voteMsgObj:{ack:o.ACK.SENT,read:!0,msgKey:e.id,parentMsgKey:g.id,selectedOptionLocalIds:null!=p?p:[],sender:(0,d.getMeUser)(),senderTimestampMs:1e3*l,t:l},parentMsgKey:g.id}))}))).apply(this,arguments)}},66545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleNewsletterMsgError=function(e,t){const n=function(e){try{return(0,r.receiveNewsletterRPC)(e)}catch(e){return null}}(t.stanza);e instanceof i.MessageValidationError&&function(e,t){var n,r;new o.IncomingMessageDropWamEvent({messageDropReason:l.MESSAGE_DROP_REASON_TYPE.INVALID_PROTOBUF,e2eDestination:a.E2E_DESTINATION.CHANNEL,offline:null!=(null==e||null===(n=e.parsedRequest)||void 0===n||null===(r=n.offlineMixin)||void 0===r?void 0:r.offline),e2eFailureReason:null==t?void 0:t.e2eFailureReason,messageMediaType:c(e),revokeType:"NewsletterRevoke"===(null==e?void 0:e.parsedRequest.newsletterMessageFanoutContent.name)?u.REVOKE_TYPE.ADMIN:void 0}).commit()}(n,e)};var r=n(32864),i=n(22495),o=n(27856),a=n(7356),s=n(76757),l=n(26446),u=n(13087);function c(e){const t=null==e?void 0:e.parsedRequest.newsletterMessageFanoutContent;if(null==t)return s.MEDIA_TYPE.NONE;switch(t.name){case"NewsletterReaction":return s.MEDIA_TYPE.REACTION;case"NewsletterMedia":return d(t.value.plaintextMediatype);case"NewsletterEdit":return"media"===t.value.newsletterTextOrMediaMixinGroup.value.type?d(t.value.newsletterTextOrMediaMixinGroup.value.plaintextMediatype):s.MEDIA_TYPE.NONE;case"NewsletterText":return s.MEDIA_TYPE.NONE;case"NewsletterRevoke":case"NewsletterReactionRevoke":return s.MEDIA_TYPE.NONE;case"NewsletterPollCreation":return s.MEDIA_TYPE.POLL_CREATE;case"NewsletterPollVote":return s.MEDIA_TYPE.POLL_VOTE;default:return t.name,s.MEDIA_TYPE.NONE}}function d(e){switch(e){case"video":return s.MEDIA_TYPE.VIDEO;case"vcard":return s.MEDIA_TYPE.CONTACT;case"url":return s.MEDIA_TYPE.URL;case"sticker":case"genai_sticker":return s.MEDIA_TYPE.STICKER;case"ptt":return s.MEDIA_TYPE.PTT;case"productlink":return s.MEDIA_TYPE.PRODUCT_LINK;case"image":return s.MEDIA_TYPE.PHOTO;case"gif":return s.MEDIA_TYPE.GIF;case"document":return s.MEDIA_TYPE.DOCUMENT;case"cataloglink":return s.MEDIA_TYPE.CATALOG_LINK;case"avatar_sticker":return s.MEDIA_TYPE.FUTURE;default:return s.MEDIA_TYPE.AUDIO}}},29205:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isAddOnType=d,t.preprocessNewsletterMsg=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=n(29987),a=n(31654),s=n(31545),l=n(48678),u=n(79038);function c(){return(c=(0,i.default)((function*(e){const t="NewsletterRevoke"===e.type,{serverId:n}=e,r=d(e.type),i=r&&null!=n?yield(0,l.getMessageByServerId)(n,e.from.toJid()):null,u=yield f(i,e.pollVote),c=(0,s.mapMsgStanzaToMsgData)({msg:e,msgContext:{isNewMsg:!e.offline&&!t,addOnParentKey:r?p({addOnParentMsg:i,serverId:n,remote:e.from}):void 0,pollVotesAsLocalIds:u,latestEditSenderTimestampMs:null!=e.msgEditT?(0,o.castToMillisTime)(e.msgEditT):null}},"relay"),[_]=yield(0,a.applyOrphanRevokes)([c]);return{msgData:_,isOrphan:r&&null==i}}))).apply(this,arguments)}function d(e){switch(e){case"NewsletterReaction":case"NewsletterReactionRevoke":case"NewsletterPollVote":return!0;default:return!1}}function p(e){let{addOnParentMsg:t,serverId:n,remote:r}=e;return null!=t?t.id:(0,l.craftNewsletterMsgKeyFromServerId)(n,r.toJid())}function f(){return _.apply(this,arguments)}function _(){return(_=(0,i.default)((function*(e,t){const n=null==e?void 0:e.pollOptions;if(null==n||null==t)return;const r=yield(0,u.createOptionLocalIdMap)(n);return t.map((e=>r.getLocalIdForHash(e.slice().buffer)))}))).apply(this,arguments)}},58479:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.runWithBackoff=function(e){let{retryableErrorCodes:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retryableErrorCodes:c};const{signal:n}=new r;return(0,s.exponentialBackoff)((0,a.default)((0,a.default)({},u),{},{signal:n}),function(){var n=(0,o.default)((function*(n,r){try{return yield e()}catch(e){if(!(e instanceof l.ServerStatusCodeError))throw e;if(t.has(e.statusCode)&&r<u.retries)return n(e);throw e}}));return function(){return n.apply(this,arguments)}}())};var o=i(n(48926)),a=i(n(81109)),s=n(5865),l=n(91563);const u={minTimeout:1e3,retries:3},c=new Set([429,500])},9441:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{parsedRequest:n,makeNewsletterResponseSuccess:r}=(0,o.receiveNewsletterRPC)(e),i={id:n.id,t:n.t,isSender:"true"===n.isSender,serverId:n.serverId,offline:null!=(null===(t=n.offlineMixin)||void 0===t?void 0:t.offline),from:(0,s.jidWithTypeToWid)({jidType:"newsletter",newsletterJid:n.from}),to:(0,u.getMeUser)()};return{ack:r(),msg:f(i,n)}};var i=r(n(81109)),o=n(32864),a=n(75988),s=n(15610),l=n(56074),u=n(3885);function c(e){return e.reactionCode}function d(e){return e.votesVote.map((e=>{let{elementValue:t}=e;return t}))}function p(e){return e.plaintextPayloadMixin.elementValue}function f(e,t){const n=t.newsletterMessageFanoutContent;switch(n.name){case"NewsletterPollVote":return(0,i.default)((0,i.default)({},e),{},{type:"NewsletterPollVote",pollVote:d(n.value)});case"NewsletterReaction":return(0,i.default)((0,i.default)({},e),{},{type:"NewsletterReaction",reactionCode:c(n.value)});case"NewsletterReactionRevoke":return(0,i.default)((0,i.default)({},e),{},{type:"NewsletterReactionRevoke",reactionCode:l.REVOKED_REACTION_TEXT});case"NewsletterRevoke":return(0,i.default)((0,i.default)({},e),{},{type:"NewsletterRevoke"});case"NewsletterMedia":case"NewsletterText":return(0,i.default)((0,i.default)({},e),{},{type:n.name,payload:p(n.value)});case"NewsletterPollCreation":return(0,i.default)((0,i.default)({},e),{},{type:"NewsletterPollCreation",payload:p(n.value)});case"NewsletterEdit":var r,o;return(0,i.default)((0,i.default)({},e),{},{type:"NewsletterEdit",payload:p(n.value.newsletterTextOrMediaMixinGroup.value),msgEditT:null===(r=t.newsletterMessageLastEditTimestampMixin)||void 0===r?void 0:r.metaMsgEditT,msgOriginalT:null===(o=t.newsletterMessageOriginalTimestampMixin)||void 0===o?void 0:o.metaOriginalMsgT});default:throw n.name,new a.SmaxParsingFailure("unrecognized-newsletter-message-type")}}},3233:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterAdminInviteMessageValidationErrorCode=t.NewsletterAdminInviteMessageValidationError=void 0;var r=n(22495);const i=n(76672)({MISSING_NEWSLETTER_JID:"newsletter_admin_invite_missing_newsletter_jid",MISSING_NEWSLETTER_NAME:"newsletter_admin_invite_missing_newsletter_name",MISSING_INVITE_EXPIRATION:"newsletter_admin_invite_missing_invite_expiration",INVALID_NEWSLETTER_JID:"newsletter_admin_invite_invalid_newsletter_jid"});t.NewsletterAdminInviteMessageValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="NewsletterAdminInviteMessageValidationError"}}t.NewsletterAdminInviteMessageValidationError=o},22747:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{newsletterAdminInviteMessage:r}=t;if(null==r)return;if(!(0,u.isNewsletterMultiAdminReceiverEnabled)())return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.UNKNOWN,kind:s.MsgKind.Unknown,futureproofType:s.MSG_TYPE.NEWSLETTER_ADMIN_INVITE}),contextInfo:r.contextInfo};const{caption:p,inviteExpiration:f,newsletterJid:_,newsletterName:g,contextInfo:h}=r;if(null==_)throw new l.NewsletterAdminInviteMessageValidationError(l.NewsletterAdminInviteMessageValidationErrorCode.MISSING_NEWSLETTER_JID,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==g)throw new l.NewsletterAdminInviteMessageValidationError(l.NewsletterAdminInviteMessageValidationErrorCode.MISSING_NEWSLETTER_NAME,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==f)throw new l.NewsletterAdminInviteMessageValidationError(l.NewsletterAdminInviteMessageValidationErrorCode.MISSING_NEWSLETTER_JID,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const A=(0,a.strictDecodeJid)(_);if(null==A)throw new l.NewsletterAdminInviteMessageValidationError(l.NewsletterAdminInviteMessageValidationErrorCode.INVALID_NEWSLETTER_JID,c.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.NEWSLETTER_ADMIN_INVITE,kind:s.MsgKind.NewsletterAdminInvite,newsletterAdminInviteInfo:{newsletterId:(0,d.toNewsletterWid)(A),newsletterName:g,inviteExpiration:(0,o.castLongIntToUnixTime)(f),inviteMessage:null!=p?p:"",pictureThumbnail:null}}),contextInfo:h}};var i=r(n(81109)),o=n(29987),a=n(54468),s=n(73602),l=n(3233),u=n(88504),c=n(57095),d=n(51017)},9800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("newsletter-metadata").version((0,i.newsletterMetadataCreateTable)(),[n("id"),t("creationTime"),t("name"),t("nameUpdateTime"),t("description"),t("descriptionUpdateTime"),t("handle"),t("inviteCode"),t("size"),t("verified"),t("membershipType"),t("privacy"),t("website"),t("reactionCodesSetting"),t("suspended"),t("geosuspended"),t("terminated"),t("adminCount"),t("messageDeliveryUpdates"),t("geosuspendedCountries"),t("hasProfilePictureDeletionAlerts")]).view((e=>e))},t.getNewsletterMetadataTable=function(){return(0,r.getStorage)().table("newsletter-metadata")};var r=n(74557),i=n(20746),o=n(65717)},76481:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("newsletter-my-votes").version((0,i.newsletterMyVotesCreateTable)(),[n(["chatJid","msgServerId"]),t("serverTimestampMs"),t("votes"),t("ack"),t("t"),t("read"),t("msgKey")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("newsletter-my-votes")};var r=n(74557),i=n(20746),o=n(65717)},53181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("newsletter-polls-votes").version((0,i.newsletterPollsVotesCreateTable)(),[n("parentMsgKey"),t("serverTimestamp"),t("votesMap")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("newsletter-polls-votes")};var r=n(74557),i=n(20746),o=n(65717)},38815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("newsletter-reactions").version((0,i.newsletterReactionsCreateTable)(),[n("parentMsgKey"),t("emojiCountMap"),t("serverTimestamp")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("newsletter-reactions")};var r=n(74557),i=n(20746),o=n(65717)},31545:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mapMsgStanzaToMsgData=g,t.mapNewsletterMsgToMsgData=function(e,t){var n,r;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;const{newsletterMessageHistoryContent:l}=e,{id:u,t:c,serverId:d}=e;if(null==l||null==u||null==c)return null;const p="true"===e.isSender,_={id:u,from:t,isSender:p,to:p?t:(0,f.getMeUser)(),t:c,serverId:d,offline:!1},h=null===(n=e.newsletterMessageOriginalTimestampMixin)||void 0===n?void 0:n.metaOriginalMsgT,A={hasReaction:o,lastUpdateFromServerTs:s,viewCount:null===(r=e.newsletterViewsCountMixin)||void 0===r?void 0:r.viewsCountCount,isEdited:"NewsletterEdit"===l.name,metaOriginalMsgT:h},m="history";switch(l.name){case"NewsletterEdit":{var E;const t=null===(E=e.newsletterMessageLastEditTimestampMixin)||void 0===E?void 0:E.metaMsgEditT,n=null!=t?(0,a.castToMillisTime)(t):void 0,r=null!=h?h:c;return g({msg:(0,i.default)((0,i.default)({},_),{},{type:l.name,t:r,payload:l.value.newsletterTextOrMediaMixinGroup.value.plaintextPayloadMixin.elementValue,msgEditT:t,msgOriginalT:c}),msgContext:(0,i.default)((0,i.default)({},A),{},{latestEditSenderTimestampMs:n})},m)}case"NewsletterText":case"NewsletterPollCreation":case"NewsletterMedia":return g({msg:(0,i.default)((0,i.default)({},_),{},{payload:l.value.plaintextPayloadMixin.elementValue,type:l.name}),msgContext:A},m);case"NewsletterRevoke":return g({msg:(0,i.default)((0,i.default)({},_),{},{type:l.name}),msgContext:A},m);default:return l.name,null}};var i=r(n(81109)),o=n(38032),a=n(29987),s=n(18431),l=r(n(60001)),u=n(73602),c=n(17725),d=n(8498),p=n(77026),f=n(3885),_=n(33655);function g(e,t){var n,r;let{msg:a,msgContext:g}=e;const h=new l.default({remote:a.from,fromMe:a.isSender,id:a.id});if(("NewsletterReaction"===a.type||"NewsletterReactionRevoke"===a.type)&&null!=g.addOnParentKey)return{id:h,reactionParentKey:g.addOnParentKey,type:u.MSG_TYPE.REACTION,kind:u.MsgKind.ReactionDecrypted,t:a.t,from:a.from,to:a.to,serverId:a.serverId,isNewMsg:!1,ack:o.ACK.SENT,reactionText:a.reactionCode,reactionTimestamp:1e3*a.t};var A;if("NewsletterPollVote"===a.type&&null!=g.addOnParentKey)return{id:h,t:a.t,from:a.from,to:a.to,serverId:a.serverId,isNewMsg:!1,ack:o.ACK.SENT,type:u.MSG_TYPE.POLL_UPDATE,kind:u.MsgKind.PollVoteDecrypted,subtype:"poll_vote",pollUpdateParentKey:g.addOnParentKey,selectedOptionLocalIds:null!==(A=g.pollVotesAsLocalIds)&&void 0!==A?A:[],senderTimestampMs:1e3*a.t,read:!1};const m={ack:o.ACK.SENT,from:a.from,t:a.t,to:a.to,id:h,type:u.MSG_TYPE.UNKNOWN,count:null,invis:!1};var E,y;if("NewsletterRevoke"===a.type)return"history"===t?{id:new l.default({remote:a.from,fromMe:a.isSender,id:a.id}),from:a.from,to:a.isSender?a.from:(0,f.getMeUser)(),t:null!==(E=g.metaOriginalMsgT)&&void 0!==E?E:a.t,serverId:a.serverId,lastUpdateFromServerTs:null!==(y=g.lastUpdateFromServerTs)&&void 0!==y?y:void 0,type:"revoked",kind:"revokedMessage",revokeSender:a.from,subtype:"admin"}:(0,i.default)((0,i.default)({},m),{},{serverId:a.serverId,id:new l.default({remote:a.from,fromMe:a.isSender,id:l.default.newId_DEPRECATED()}),type:u.MSG_TYPE.PROTOCOL,kind:u.MsgKind.ProtocolRevoke,subtype:"admin_revoke",protocolMessageKey:h});const S=(0,_.decodeProtobuf)(p.MessageSpec,a.payload),v=(0,s.parseMsgProto)(S,m,t),I=function(e){return e.streamingSidecar=null,e.mediaKey=null,e.mediaKeyTimestamp=null,e}((0,i.default)((0,i.default)({},v),{},{isNewMsg:g.isNewMsg,viewCount:null!==(n=g.viewCount)&&void 0!==n?n:void 0,hasReaction:!!g.hasReaction,latestEditSenderTimestampMs:g.latestEditSenderTimestampMs,lastUpdateFromServerTs:null!==(r=g.lastUpdateFromServerTs)&&void 0!==r?r:void 0,latestEditMsgKey:!0===g.isEdited?h:void 0,serverId:a.serverId}));return(0,c.isMsgSupported)(v)||(I.type=u.MSG_TYPE.UNKNOWN,I.futureproofType=v.type,I.futureproofSubtype=v.subtype),"NewsletterEdit"===a.type&&"history"!==t?(0,d.mapMsgToEditProtocolMsg)(I,{latestEditSenderTimestampMs:g.latestEditSenderTimestampMs}):I}},17725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsgSupported=function(e){const t=e.type===o.MSG_TYPE.UNKNOWN?e.futureproofType:e.type;if(null==t)return!1;if(!l(t))return!1;if((0,i.getIsReply)(e)&&!(0,a.isNewsletterReceivingAdminRepliesEnabled)())return!1;return!0},t.isMsgTypeSupported=l;var r=n(83741),i=n(26368),o=n(73602),a=n(88504);const s=new Map([[1,o.MSG_TYPE.CHAT],[2,o.MSG_TYPE.IMAGE],[3,o.MSG_TYPE.VIDEO],[4,o.MSG_TYPE.AUDIO],[5,o.MSG_TYPE.PTT],[6,o.MSG_TYPE.LOCATION],[7,o.MSG_TYPE.VCARD],[8,o.MSG_TYPE.DOCUMENT],[11,o.MSG_TYPE.MULTI_VCARD],[12,o.MSG_TYPE.REACTION],[13,o.MSG_TYPE.POLL_CREATION],[14,o.MSG_TYPE.POLL_UPDATE],[15,o.MSG_TYPE.STICKER]]);function l(e){const t=(0,r.getABPropConfigValue)("channel_supported_message_types").split(",").map((e=>Number.parseInt(e.trim(),10))).filter(Number.isSafeInteger).reduce(((e,t)=>{const n=s.get(t);return null!=n&&e.add(n),e}),new Set).has(e);switch(e){case o.MSG_TYPE.STICKER:return(0,a.isNewsletterStickerReceivingEnabled)();case o.MSG_TYPE.PTT:return(0,a.isNewsletterPTTReceivingEnabled)();case o.MSG_TYPE.POLL_CREATION:case o.MSG_TYPE.POLL_UPDATE:return(0,a.isNewsletterPollsReceivingEnabled)();case o.MSG_TYPE.AUDIO:return(0,a.isNewsletterAudioFileReceivingEnabled)();default:return t}}},8498:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mapMsgToEditProtocolMsg=function(e,t){const n=e.id.clone(),r=new o.default({remote:e.id.remote,fromMe:e.id.fromMe,id:o.default.newId_DEPRECATED()});return(0,i.default)((0,i.default)({},e),{},{id:r,type:a.MSG_TYPE.PROTOCOL,kind:a.MsgKind.Protocol,subtype:"message_edit",editMsgType:e.type,protocolMessageKey:n,latestEditMsgKey:r,latestEditSenderTimestampMs:t.latestEditSenderTimestampMs})},t.mapMsgToEditProtocolMsgLegacy=function(e){return(0,i.default)((0,i.default)({},e),{},{type:a.MSG_TYPE.PROTOCOL,kind:a.MsgKind.Protocol,subtype:"message_edit",protocolMessageKey:e.id,latestEditMsgKey:e.id,latestEditSenderTimestampMs:e.t})};var i=r(n(81109)),o=r(n(60001)),a=n(73602)},45827:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterDirectorySortOrder=t.NewsletterDirectorySortField=t.NewsletterDirectoryFilterType=t.DIRECTORY_SORT_FIELD_OPTIONS=void 0,t.getNewsletterDirectoryFilterFromListView=function(e){switch(e){case r.NewsletterDirectoryListView.Recommended:return s.Recommended;case r.NewsletterDirectoryListView.Trending:return s.Trending;case r.NewsletterDirectoryListView.Featured:return s.Featured;case r.NewsletterDirectoryListView.New:return s.New;case r.NewsletterDirectoryListView.Popular:return s.Popular}},t.getNewsletterDirectoryFilterTypesFromConfig=function(e){return e.split(",").map((e=>{const t=parseInt(e,10);var n;return Number.isSafeInteger(t)&&null!==(n=s.cast(t))&&void 0!==n?n:null})).filter(Boolean)},t.getNewsletterDirectoryListViewFromFilter=function(e){switch(e){case s.Recommended:case s.Country:return r.NewsletterDirectoryListView.Recommended;case s.Trending:return r.NewsletterDirectoryListView.Trending;case s.Featured:return r.NewsletterDirectoryListView.Featured;case s.New:return r.NewsletterDirectoryListView.New;case s.Popular:return r.NewsletterDirectoryListView.Popular}};var r=n(67561);const i=n(76672)({CreationTime:"creation_time",Subscribers:"subscribers"});t.NewsletterDirectorySortField=i;const o=n(76672)({Ascending:"asc",Descending:"desc"});t.NewsletterDirectorySortOrder=o;const a=[{sortField:i.Subscribers,sortOrder:o.Descending},{sortField:i.CreationTime,sortOrder:o.Descending}];t.DIRECTORY_SORT_FIELD_OPTIONS=a;const s=n(76672)({Recommended:1,Trending:2,Featured:3,New:4,Popular:5,Country:6});t.NewsletterDirectoryFilterType=s},67561:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterDirectoryListView=void 0;const r=n(76672)({Featured:"FEATURED",New:"NEW",Popular:"POPULAR",Recommended:"RECOMMENDED",Trending:"TRENDING"});t.NewsletterDirectoryListView=r},48780:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{from:t,to:n}=e;return i.default.isNewsletter(t)||i.default.isNewsletter(n)};var i=r(n(27112))},58221:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToHex=function(e){return(0,a.toHex)(new Uint8Array((0,o.decodeB64)(e))).toUpperCase()},t.bufferToHex=function(e){return(0,a.toHex)(e)},t.getPollOptionHash=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(62089),a=n(65982);function s(){return(s=(0,i.default)((function*(e){const t=yield self.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return(0,a.toHex)(new Uint8Array(t))}))).apply(this,arguments)}},5351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChatEntryPointFromNewsletterLinkAnnotation=function(e){var t;const n=null==e||null===(t=e.newsletter)||void 0===t?void 0:t.contentType;if(null==n){var i;return __LOG__(3,void 0,void 0,!0,["newsletter-logging"])`Did not receive content type from newsletter annotation`,SEND_LOGS("Missing content type in newsletter annotation",1,"newsletter-logging"),null==(null==e||null===(i=e.newsletter)||void 0===i?void 0:i.serverMessageId)?r.ChatEntryPoint.NewsletterLinkCard:r.ChatEntryPoint.NewsletterPostLinkCard}if(n===o.ContextInfo$ForwardedNewsletterMessageInfo$ContentType.LINK_CARD)return!0===e.shouldSkipConfirmation?r.ChatEntryPoint.NewsletterLinkCardButton:r.ChatEntryPoint.NewsletterLinkCard;return r.ChatEntryPoint.NewsletterPostLinkCard},t.parseForwardedNewsletterMessageInfo=function(e){const{newsletterJid:t,newsletterName:n,serverMessageId:r}=e,o=(0,i.strictDecodeJid)(t);return{newsletterId:null!=o?(0,a.toNewsletterWid)(o):void 0,newsletterName:n,serverMessageId:r}};var r=n(1280),i=n(54468),o=n(77026),a=n(51017)},69777:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterIdentifierType=void 0,t.isNewsletterInviteCode=function(e){if(null==e)return!1;if(e.startsWith("http://")||e.startsWith("https://"))return null!=_(e);return null!=_(`https://${e}`)},t.parseNewsletter=_,t.removeTrailingSlash=void 0;var i=r(n(81109)),o=n(5743),a=n(1280),s=n(88504);const l=n(76672).Mirrored(["Handle","InviteCode","Id"]);t.NewsletterIdentifierType=l;const u="channel",c="create",d="directory";t.removeTrailingSlash=e=>e.replace(/\/+$/,"");const p=new RegExp(`^${o.ORIGIN}${o.OPTIONAL_PATH_PART}/accept/?\\?channel_invite_code=(\\w+)$`,"i"),f=new RegExp("^whatsapp://(channel)/(\\w+)/?$","i");function _(e){try{const t=new URL(e),{pathname:n}=t,[r,_,h,...A]=n.split("/");if(_===u&&(0,o.isWhatsappHost)(t)){if(function(e){return 0===e.length||1===e.length&&""===e[0]}(A))switch(h){case c:return{type:"create",url:t.href};case d:return{type:"directory",url:t.href};default:if(null!=h&&""!==h)return{identifier:h,url:t.href,identifierType:l.InviteCode,type:"view",chatEntryPoint:a.ChatEntryPoint.Link}}if((0,s.isNewsletterMessageLinkEnabled)()&&h!==c&&h!==d&&(1===A.length||2===A.length&&""===A[1])){const e=parseInt(A[0],10);return(0,i.default)({identifier:h,url:t.href,identifierType:l.InviteCode,type:"view",chatEntryPoint:a.ChatEntryPoint.Link},!Number.isNaN(e)&&{serverId:e})}}const m=g(p,e);if(null!=m)return m;const E=g(f,e);return null!=E?E:null}catch(e){return null}}function g(e,t){const n=t.match(e);if(n){const e=n[2];return e===c?{type:"create",url:t}:e===d?{type:"directory",url:t}:{identifier:n[2],url:n[1]||"/",identifierType:l.InviteCode,type:"view",chatEntryPoint:a.ChatEntryPoint.Deeplink}}return null}},66683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterState=t.NewsletterReactionCodesSetting=t.NewsletterPrivacy=t.NewsletterMembershipType=t.NewsletterInboxFilterTypes=t.AlertEntryPoint=void 0;const r=n(76672)({Subscriber:"subscriber",Admin:"admin",Guest:"guest",Owner:"owner"});t.NewsletterMembershipType=r;const i=n(76672)({Public:"public",Private:"private"});t.NewsletterPrivacy=i;const o=n(76672)({Active:"active",Suspended:"suspended",GeoSuspended:"geosuspended"});t.NewsletterState=o;const a=n(76672)({All:0,Basic:1,Blocklist:2,None:3});t.NewsletterReactionCodesSetting=a;const s=n(76672).Mirrored(["ALERT_BANNER","INFO_DRAWER"]);t.AlertEntryPoint=s;const l=n(76672).Mirrored(["All","Unread","MyChannels"]);t.NewsletterInboxFilterTypes=l},88504:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewsletterViewCountGating=t.NewsletterCompanionGating=t.NewsletterABPropConfig=void 0,t.getMaxMsgCountFromServer=function(){return(0,r.getABPropConfigValue)("channels_max_messages_batch_pull")},t.getMaxNumberOfAdmins=function(){return(0,r.getABPropConfigValue)("channels_multi_admin_max_admin_count")},t.getMaxSubscriberNumber=function(){return 5e3},t.getNewsletterAdminInviteTos=function(){return(0,s.isSMB)()?(0,r.getABPropConfigValue)("newsletter_admin_invite_tos_id_smb_web"):(0,r.getABPropConfigValue)("newsletter_admin_invite_tos_id")},t.getNewsletterConsumerTos=function(){return(0,s.isSMB)()?(0,r.getABPropConfigValue)("newsletter_tos_notice_id_smb_web"):(0,r.getABPropConfigValue)("newsletter_tos_notice_id")},t.getNewsletterDeeplinkGating=function(){const e=p.cast((0,r.getABPropConfigValue)("channels_enabled"));if(null==e)return f.Disabled;if(!g())return f.Disabled;switch(e){case p.Disabled:return f.AvailableOnPhone;case p.Enabled:return f.Enabled;case p.NeedsUpgrade:return f.NeedsUpgrade}},t.getNewsletterDirectoryPageRefreshInterval=function(){return(0,r.getABPropConfigValue)("channels_directory_v2_cache_refresh_interval_ms")},t.getNewsletterDirectoryPageSize=function(){return(0,r.getABPropConfigValue)("channels_directory_page_size")},t.getNewsletterDirectorySearchDebounce=function(){return(0,r.getABPropConfigValue)("channels_directory_search_debounce_ms")},t.getNewsletterDirectoryV2FilterTypes=function(){const e=(0,r.getABPropConfigValue)("channels_directory_v2_filter_types");return(0,o.getNewsletterDirectoryFilterTypesFromConfig)(e)},t.getNewsletterProducerNux=function(){return(0,r.getABPropConfigValue)("newsletter_creation_nux_id")},t.getNewsletterProducerTos=function(){return(0,s.isSMB)()?(0,r.getABPropConfigValue)("newsletter_creation_tos_id_smb_web"):(0,r.getABPropConfigValue)("newsletter_creation_tos_id")},t.getNewsletterSubscriberListCacheRefreshInSeconds=function(){return(0,r.getABPropConfigValue)("channels_followers_list_cache_refresh_seconds")},t.getPullMessageUpdatesThresholdSeconds=function(){return(0,r.getABPropConfigValue)("channel_pull_message_updates_threshold_seconds")},t.getRecommendedNewslettersRefreshInterval=function(){return(0,r.getABPropConfigValue)("recommended_channels_background_refresh")},t.getSimilarNewslettersMaxFetchLimit=function(){return(0,r.getABPropConfigValue)("similar_channels_max_limit")},t.getSimilarNewslettersMinDisplayLimit=function(){return(0,r.getABPropConfigValue)("similar_channels_min_limit")},t.isAudioFileWaveformDisplayEnabled=function(){return A("channels_audio_files_display_waveform_enabled")},t.isAudioFileWaveformSenderEnabled=function(){return A("channels_audio_files_sender_waveform_enabled")},t.isDSAEUOnlyNoticeEnabled=function(){return A("dsa_information_for_eu_only_enabled")},t.isDsaAppealsEnabled=function(){return y()||S()||E()||v()},t.isFilteringOutSubscribedNewslettersFromDirectoryListEnabled=function(){return A("channels_filter_out_subscribed_in_directory_null_state")},t.isForwardFromChatToNewsletterEnabled=R,t.isForwardFromNewsletterToNewsletterEnabled=O,t.isForwardToNewsletterEnabled=function(e){if(e.isNewsletter())return O();return R()},t.isLargeNumberFormatEnabled=function(){return A("channels_large_number_format_enabled")},t.isLargeNumberRoundingEnabled=function(){return A("large_number_format_uses_generic_plural")},t.isNavigationToForwardedNewsletterMessageEnabled=function(){return A("channel_forward_to_chat_v2_message_navigation_enabled")},t.isNewsletterAdminContextCardEnabled=function(e){return(e===i.NewsletterMembershipType.Owner||e===i.NewsletterMembershipType.Admin)&&A("channels_admin_context_card_enabled")},t.isNewsletterAdminMetadataFetchingEnabled=function(){return A("channel_info_admin_metadata_fetching_enabled")},t.isNewsletterAudioFileReceivingEnabled=function(){return A("channels_audio_files_receiver_enabled")},t.isNewsletterAudioFileSendingEnabled=function(){return A("channels_audio_files_sender_enabled")},t.isNewsletterBackwardsMessageEditingEnabled=function(){return A("channels_edit_backwards_compatibility")},t.isNewsletterChannelLinkPageEnabled=function(e){return(0,c.iAmAdminOrOwner)(e.newsletterMetadata)&&A("channel_link_in_nav_bar_enabled")},t.isNewsletterCreationEnabled=function(){return h()&&(0,r.getABPropConfigValue)("channels_creation_enabled")===f.Enabled},t.isNewsletterCreationLoggingEnabled=function(){return A("channels_creation_logging_enabled")},t.isNewsletterDSAEnforcementGeosuspensionEnabled=function(){return T()&&(0,r.getABPropConfigValue)("dsa_channels_enforcement_geo_suspension_enabled")},t.isNewsletterDSAEnforcementMessageEnabled=function(){return I()&&(0,r.getABPropConfigValue)("dsa_channels_enforcement_messages_enabled")},t.isNewsletterDSAEnforcementSuspensionEnabled=function(){return m()&&(0,r.getABPropConfigValue)("dsa_channels_enforcement_suspension_enabled")},t.isNewsletterDSAProfilePictureDeletionAppealsEnabled=v,t.isNewsletterDSAProfilePictureDeletionEnforcementNoticeEnabled=function(){return h()&&(0,r.getABPropConfigValue)("dsa_channels_enforcement_profile_picture_deletion_enabled")},t.isNewsletterDYIEnabled=function(){return A("channels_dyi_enabled")},t.isNewsletterDYILoggingEnabled=function(e){return e===a.ReportType.Newsletters&&A("channels_dyi_logging_enabled")},t.isNewsletterDirectoryEnabled=function(){return h()&&(0,r.getABPropConfigValue)("channels_directory_enabled")===p.Enabled},t.isNewsletterDirectoryLoggingEnabled=function(){return A("channels_directory_logging_enabled")},t.isNewsletterDirectoryPaginationEnabled=function(){return C()&&(0,r.getABPropConfigValue)("channels_directory_pagination_enabled")},t.isNewsletterDirectoryV2Enabled=C,t.isNewsletterDirectoryV2LoggingEnabled=function(){return C()&&(0,r.getABPropConfigValue)("channels_directory_v2_logging_enabled")},t.isNewsletterEnabled=h,t.isNewsletterEnabledOnPrimary=g,t.isNewsletterGeosuspendAdminAlertsEnabled=T,t.isNewsletterGeosuspendAppealsEnabled=E,t.isNewsletterGeosuspendEnabled=function(){return A("channels_geosuspend_enabled")},t.isNewsletterHideNewsUrlPreviewEnabled=function(){return A("channels_hide_news_url_preview")},t.isNewsletterInboxFiltersEnabled=function(){return A("channels_inbox_filters_web_enabled")},t.isNewsletterInboxSearchDirectoryIntegrationEnabled=function(){return N()&&(0,r.getABPropConfigValue)("channels_inbox_directory_search_web_enabled")},t.isNewsletterInboxSearchEnabled=N,t.isNewsletterInboxSearchLoggingEnabled=function(){return A("updates_tab_search_logging_enabled")},t.isNewsletterLinkPreviewEnabled=function(){return A("channels_hq_link_preview")},t.isNewsletterLinkShareLoggingEnabled=function(){return A("channels_share_link_logging_enabled")},t.isNewsletterLinksOnStatusConsumptionEnabled=function(){return A("channels_status_updates_consumption_enabled")},t.isNewsletterLinksOnStatusDisabledTooltipConsumptionEnabled=function(){return A("channels_status_consumption_disable_tooltip_enabled")},t.isNewsletterMediaAlbumUploadEnabled=function(){return A("channels_send_album_enabled")},t.isNewsletterMessageDeliveryUpdatesEnabled=I,t.isNewsletterMessageEditingEnabled=function(){return A("channels_message_edit_enabled")},t.isNewsletterMessageForwardLoggingEnabled=function(){return A("channels_forward_logging_v2_enabled")},t.isNewsletterMessageForwardReceivingEnabled=function(){return A("channel_forward_to_chat_link_enabled")},t.isNewsletterMessageForwardSendingEnabled=function(){return A("channel_forward_to_chat_enabled")},t.isNewsletterMessageLinkEnabled=function(){return A("channels_message_link_enabled")},t.isNewsletterMultiAdminEnabled=function(){return A("channels_multi_admin_enabled")},t.isNewsletterMultiAdminM1ImprovementsEnabled=function(){return A("channels_multi_m1_improvements_enabled")},t.isNewsletterMultiAdminReceiverEnabled=function(){return A("channels_multi_admin_receiver_enabled")},t.isNewsletterPTTLoggingEnabled=function(){return A("channels_ptt_logging_enabled")},t.isNewsletterPTTReceivingEnabled=w,t.isNewsletterPTTSendingEnabled=function(){return w()&&(0,r.getABPropConfigValue)("channels_ptt_sender_enabled")},t.isNewsletterPTTTranscriptionBlocked=function(){return A("channels_ptt_transcription_blocked")},t.isNewsletterPollsCreationEnabled=function(){return A("channels_poll_creation_enabled")},t.isNewsletterPollsReceivingEnabled=function(){return A("channels_poll_receive_enabled")},t.isNewsletterPollsSingleOptionEnabled=function(){return A("channels_poll_single_option_control_enable")},t.isNewsletterPollsVotersEnabled=D,t.isNewsletterPollsVotersEnabledForChat=function(e){if(!(0,c.iAmAdminOrOwner)(null==e?void 0:e.newsletterMetadata))return!1;return D()},t.isNewsletterQPLLoggingEnabled=function(){return A("channels_qpl_logging")},t.isNewsletterQuickReactionsEnabled=function(){return A("channels_reactions_bottomsheet_tap_to_react_enabled")},t.isNewsletterReactionEnabled=M,t.isNewsletterReactionSenderListEnabled=function(e,t){return M()&&!t&&(0,c.iAmAdminOrOwner)(null==e?void 0:e.newsletterMetadata)&&(0,r.getABPropConfigValue)("channel_reactions_sender_list_enabled")},t.isNewsletterReactionSendingEnabled=function(){return A("channel_reactions_sending_enabled")},t.isNewsletterReactionSettingForNoneEnabled=function(){return A("channel_reactions_settings_none_option_enabled")},t.isNewsletterReactionSettingsEnabled=P,t.isNewsletterReceivingAdminRepliesEnabled=function(){return A("channels_admin_reply_receiver_enabled")},t.isNewsletterReparseEnabled=function(){return A("channel_web_reparse_enabled")},t.isNewsletterReportOutcomeAppealsEnabled=function(){return b()&&(0,r.getABPropConfigValue)("channels_report_outcome_appeals_enabled")},t.isNewsletterReportOutcomeListEnabled=b,t.isNewsletterReportUnlawfulContentEnabled=function(){return A("dsa_channels_report_unlawful_content_enabled")},t.isNewsletterReportingEnabled=function(){return A("newsletter_reporting_enabled")},t.isNewsletterSendingAdminRepliesEnabled=function(){return A("channels_admin_reply_enabled")},t.isNewsletterSendingNonBasicStickersEnabled=function(){return A("channels_non_basic_stickers_enabled")},t.isNewsletterStickerReceivingEnabled=function(){return A("channels_sticker_receiving_enabled")},t.isNewsletterStickerSendingEnabled=function(){return A("channels_sticker_sending_enabled")},t.isNewsletterSubscriberListEnabled=function(){return A("channel_follower_list_enabled")},t.isNewsletterSuspendEnabled=m,t.isNewsletterSuspensionAppealsEnabled=y,t.isNewsletterTSLEnabled=function(){return A("ts_navigation_channels_enabled")},t.isNewsletterTransferOwnershipEnabled=function(){return A("channels_multi_admin_transfer_ownership_enabled")},t.isNewsletterTransferOwnershipNotificationReceiverEnabed=function(){return A("channels_multi_admin_transfer_ownership_receiver_enabled")},t.isNewsletterViewCountEnabled=function(e){let t=!1;if(null==e)return!1;switch(e){case i.NewsletterMembershipType.Owner:case i.NewsletterMembershipType.Admin:t=(0,r.getABPropConfigValue)("channel_view_counts_enabled")>=_.EnabledAdminsOnly;break;case i.NewsletterMembershipType.Subscriber:t=(0,r.getABPropConfigValue)("channel_view_counts_enabled")>=_.EnabledAdminsAndFollowers;break;case i.NewsletterMembershipType.Guest:t=(0,r.getABPropConfigValue)("channel_view_counts_enabled")===_.EnabledEveryone}return h()&&t},t.isNewsletterViewCountSendEnabled=function(){return A("channels_send_view_receipt_enabled")},t.isNewsletterViolatingMessageAppealsEnabled=S,t.isProactiveGapFillingEnabled=function(){return A("channels_proactive_message_gap_handling_enabled")},t.isRecommendedUnitV2Enabled=function(){return A("channels_recommended_v2_ui_enabled")},t.isSimilarNewsletterInInfoDrawersEnabled=function(){return A("similar_channels_in_channel_details_enabled")},t.isSimilarNewsletterInThreadEnabled=function(){return A("similar_channels_in_thread_on_follow_enabled")},t.shouldHideProducerNewsletterDisclosure=function(){return!1},t.shouldShowAllReactionsForNewsletter=function(e){var t;return(null===(t=e.newsletterMetadata)||void 0===t?void 0:t.reactionCodesSetting)===i.NewsletterReactionCodesSetting.All&&P()};var r=n(83741),i=n(66683),o=n(45827),a=n(63336),s=n(43744),l=n(73602),u=n(17725),c=n(8870),d=n(89358);const p=n(76672)({Disabled:0,NeedsUpgrade:1,Enabled:2});t.NewsletterABPropConfig=p;const f=n(76672)({Disabled:0,NeedsUpgrade:1,Enabled:2,AvailableOnPhone:3});t.NewsletterCompanionGating=f;const _=n(76672)({Disabled:0,EnabledAdminsOnly:1,EnabledAdminsAndFollowers:2,EnabledEveryone:3});function g(){return(0,d.primaryFeatureEnabled)("newsletter")||!1}function h(){return(0,r.getABPropConfigValue)("channels_enabled")===f.Enabled}function A(e){return h()&&!0===(0,r.getABPropConfigValue)(e)}t.NewsletterViewCountGating=_;function m(){return A("newsletter_suspend_enabled")}function E(){return A("channels_geosuspend_appeals_enabled")}function y(){return A("channels_suspend_appeals_enabled")}function S(){return A("channels_violating_message_appeals_enabled")}function v(){return h()&&(0,r.getABPropConfigValue)("channels_profile_picture_deletion_appeals_enabled")}function I(){return A("channels_restricted_updates_enabled")}function T(){return A("channels_geosuspend_admin_alerts_enabled")}function b(){return A("dsa_channels_reports_outcome_list_enabled")}function M(){return A("channel_reactions_enabled")&&(0,u.isMsgTypeSupported)(l.MSG_TYPE.REACTION)}function P(){return A("channel_reactions_settings_enabled")}function C(){return A("channels_directory_v2_enabled")}function O(){return A("channels_forward_to_channel_enabled")}function R(){return A("channels_forward_from_chat_to_channel_enabled")}function N(){return A("updates_search_enabled")}function w(){return A("channels_ptt_receiver_enabled")}function D(){return A("channels_poll_voter_list_enabled")}},8870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iAmAdmin=o,t.iAmAdminOrOwner=function(e){return i(e)||o(e)},t.iAmGuest=function(e){return(null==e?void 0:e.membershipType)===r.NewsletterMembershipType.Guest},t.iAmOwner=i,t.iAmSubscriber=function(e){return(null==e?void 0:e.membershipType)===r.NewsletterMembershipType.Subscriber};var r=n(66683);function i(e){return(null==e?void 0:e.membershipType)===r.NewsletterMembershipType.Owner}function o(e){return(null==e?void 0:e.membershipType)===r.NewsletterMembershipType.Admin}},12364:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PreviousMsgNotPlaceholderError=t.DuplicateMessageError=void 0,t.processPaymentMessages=function(){return f.apply(this,arguments)};var i=r(n(48926)),o=n(87946),a=n(74557),s=n(73602),l=n(38601),u=n(10139),c=n(3885);class d extends Error{constructor(){super(...arguments),this.name="DuplicateMessageError"}}t.DuplicateMessageError=d;class p extends Error{constructor(){super(...arguments),this.name="PreviousMsgNotPlaceholderError"}}function f(){return(f=(0,i.default)((function*(e){const t=[],n=[],r=e.map((e=>e.paymentRequestMessageKey?e.paymentRequestMessageKey.toString():"")).filter((e=>""!==e)),d=e.filter((e=>"payment_action_request_declined"===e.subtype||"payment_transaction_request_cancelled"===e.subtype)).map((e=>e.id.toString()));return(0,a.getStorage)().lock(["message"],function(){var a=(0,i.default)((function*(i){let[a]=i;const p=yield(0,o.getMsgsByMsgKey)(r.concat(d)),f=new Map;return p.forEach((e=>{null!=e&&f.set(e.id.toString(),e)})),e.forEach((e=>{var r;const i=null===(r=e.paymentRequestMessageKey)||void 0===r?void 0:r.toString(),o=f.get(i||"");if(o&&null!=i)if("send"===e.subtype&&null!=e.paymentTxnStatus)t.push({id:i,paymentTxnStatus:e.paymentTxnStatus});else{const n=o.from.isGroup()?o.author:o.from,r=o.paymentMessageReceiverJid.equals((0,c.getMeUser)())?n:o.paymentMessageReceiverJid;"payment_action_request_declined"===e.subtype?t.push({id:i,paymentStatus:l.PaymentInfo$Status.REJECTED,paymentTxnStatus:l.PaymentInfo$TxnStatus.COLLECT_REJECTED}):"payment_transaction_request_cancelled"===e.subtype&&t.push({id:i,paymentStatus:l.PaymentInfo$Status.CANCELLED,paymentTxnStatus:l.PaymentInfo$TxnStatus.COLLECT_CANCELED}),t.push({id:e.id.toString(),type:s.MSG_TYPE.NOTIFICATION_TEMPLATE,templateParams:[r||"",o.paymentCurrency||"",String(o.paymentAmount1000)]})}else f.get(e.id.toString())&&!e.isMdHistoryMsg&&n.push(e.id.toString())})),yield(0,u.getMessageTable)().bulkRemove(n),yield(0,u.getMessageTable)().bulkCreateOrMerge(t),t}));return function(){return a.apply(this,arguments)}}())}))).apply(this,arguments)}t.PreviousMsgNotPlaceholderError=p},76989:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAmount1000AndCurrency=function(e){return function(e){if(e.hasChild("amount")){return function(e){e.assertTag("money");const t=parseFloat(e.attrString("value")),n=e.attrString("currency"),r=e.maybeAttrInt("offset");return{currency:n,amount1000:t*o/(null!=r&&0!==r?r:o)}}(e.child("amount").child("money"))}if(e.hasAttr("amount")){return{amount1000:parseFloat(e.attrString("amount"))*o,currency:e.attrString("currency")}}throw __LOG__(3)`Amount missing in pay or transaction node`,(0,i.default)("Amount missing in pay or transaction node")}(e)};var i=r(n(89482));const o=1e3},30883:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isNoviTransaction=d,t.parseTransactionNode=f,t.paymentNotificationParser=void 0;var i=r(n(82601)),o=n(76989),a=n(15610),s=n(19909),l=r(n(60001)),u=n(45665),c=n(3885);function d(e){return!(!e||!e.hasAttr("service"))&&"NOVI"===e.attrString("service").toUpperCase()}const p=new i.default("paymentNotificationParser",(e=>(0,s.isPaymentNotificationAckKickFixEnabled)()?(e.assertTag("notification"),e.assertAttr("type","pay"),{stanzaId:e.attrString("id"),from:e.attrWapJid("from"),transaction:e.hasChild("transaction")?f(e.child("transaction")):null,invite:_(e)}):{transaction:e.hasChild("transaction")?f(e.child("transaction")):null,invite:_(e)}));function f(e){if(d(e))return __LOG__(3)`Payment notification from Novi not supported.`,null;let t,n;const r=(0,c.getMeUser)(),i=(0,a.jidWithTypeToWid)(e.attrJidWithType("sender")),s=(0,a.jidWithTypeToWid)(e.attrJidWithType("receiver")),p=r.equals(i);e.hasAttr("group")?(t=(0,a.jidWithTypeToWid)(e.attrJidWithType("group")),n=(0,a.jidWithTypeToWid)(e.attrJidWithType("sender"))):t=p?s:i;const f=new l.default({id:e.attrString("message-id"),fromMe:p,remote:t,participant:n}),_=(0,u.getPaymentTransactionType)(e.attrString("transaction-type"),f.fromMe),{amount1000:g,currency:h}=(0,o.getAmount1000AndCurrency)(e);return{receiver:s,currency:h,amount1000:g,status:(0,u.getNotificationTransactionStatus)(_,e.attrString("status")),ts:e.attrInt("ts"),type:_,msgKey:f}}function _(e){if(!e.hasChild("invite"))return null;const t=e.child("invite");return{type:t.maybeAttrString("type"),service:t.maybeAttrString("service"),inviteUsed:t.hasAttr("invite-used")?"1"===t.attrString("invite-used"):null,from:(0,a.chatJidToChatWid)(e.attrChatJid("from")),timestamp:e.attrTime("t")}}t.paymentNotificationParser=p},45665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentTransactionTypeServerString=t.PaymentTransactionType=t.PaymentTransactionStatusServerString=t.NotificationTransactionStatus=void 0,t.determinePaymentRequestFulfilledStatus=function(e){if(t=e,t===r.PaymentInfo$TxnStatus.COMPLETED||t===r.PaymentInfo$TxnStatus.SUCCESS)return e;var t;return r.PaymentInfo$TxnStatus.COLLECT_INIT},t.getNotificationTransactionStatus=function(e,t){if(!t)return o.STATUS_UNSET;const n=t.toUpperCase();switch(e){case i.TYPE_P2P_SENT:case i.TYPE_P2M_SENT:case i.TYPE_DEPOSIT:switch(n){case s.PENDING_RECEIVER_SETUP:return o.SEND_PAY_PENDING_RECEIVER;case s.FAILED_DA:return o.SEND_PAY_PENDING;case s.REFUND_FAILED_DA:return o.SEND_PAY_REFUND_PENDING;case s.FAILED_RISK:return o.SEND_PAY_FAILURE_RISK;case s.INITIAL:return o.SEND_PAY_INIT;case s.SUCCESS:case s.COMPLETED:return o.SEND_PAY_SUCCESS;case s.FAILURE:case s.FAILED:return o.SEND_PAY_FAILURE;case s.REFUNDED:return o.SEND_PAY_REFUNDED;case s.REFUND_FAILED:return o.SEND_PAY_REFUND_FAILED;case s.FAILED_RECEIVER_PROCESSING:return o.SEND_PAY_FAILURE_RECEIVER;case s.REFUND_FAILED_PROCESSING:return o.SEND_PAY_REFUND_FAILED_PROCESSING;case s.FAILED_DA_FINAL:return o.SEND_PAY_PENDING_REFUND;case s.AUTH_CANCEL_FAILED_PROCESSING:return o.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING;case s.AUTH_CANCEL_FAILED:return o.SEND_PAY_AUTH_CANCEL_FAILED;case s.AUTH_CANCELED:return o.SEND_PAY_AUTH_CANCELED;case s.EXPIRED:return o.SEND_PAY_EXPIRED;case s.IN_REVIEW:return o.SEND_PAY_IN_REVIEW;case s.PENDING:return o.SEND_PAY_PENDING_PROCESSING;case s.CANCELED:return o.SEND_PAY_USER_CANCELED}break;case i.TYPE_P2P_RCVD:case i.TYPE_P2M_RCVD:switch(n){case s.PENDING_SETUP:return o.RECV_PAY_PENDING_SETUP;case s.FAILED_DA:return o.RECV_PAY_PENDING;case s.FAILED_PROCESSING:return o.RECV_PAY_RETRY_ON_FAILURE;case s.SUCCESS:case s.COMPLETED:return o.RECV_PAY_SUCCESS;case s.FAILURE:case s.FAILED:return o.RECV_PAY_FAILURE;case s.EXPIRED:return o.RECV_PAY_EXPIRED;case s.FAILED_RISK:return o.RECV_PAY_FAILURE_RISK;case s.WITHDRAWAL_PROCESSING:return o.RECV_PAY_WITHDRAWAL_PROCESSING;case s.WITHDRAWAL_FAILURE:return o.RECV_PAY_WITHDRAWAL_FAILURE;case s.WITHDRAWAL_PERMANENT_FAILED:return o.RECV_PAY_WITHDRAWAL_PERMANENT_FAILED;case s.CANCELED:return o.RECV_PAY_SENDER_CANCELED}break;case i.TYPE_P2P_REQ_SENT:case i.TYPE_P2P_REQ_RCVD:switch(n){case s.COLLECT_SUCCESS:return o.REQUEST_PAY_SUCCESS;case s.COLLECT_FAILED:return o.REQUEST_PAY_FAILED;case s.COLLECT_FAILED_RISK:return o.REQUEST_PAY_FAILED_RISK;case s.COLLECT_REJECTED:return o.REQUEST_PAY_REJECTED;case s.COLLECT_EXPIRED:return o.REQUEST_PAY_EXPIRED;case s.COLLECT_CANCELED:return o.REQUEST_PAY_CANCELLED}break;case i.TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:switch(n){case s.COLLECT_SUCCESS:return o.REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS;case s.AUTH_SUCCESS:return o.SEND_PAY_AUTH_SUCCESS}break;case i.TYPE_REFUND:switch(n){case s.SUCCESS:case s.COMPLETED:return o.RECV_PAY_SUCCESS}break;case i.TYPE_WITHDRAWAL:switch(n){case s.PENDING:return o.WITHDRAWAL_PENDING;case s.IN_REVIEW:return o.WITHDRAWAL_IN_REVIEW;case s.SUCCESS:case s.COMPLETED:return o.WITHDRAWAL_SUCCESS;case s.FAILED:case s.DECLINED:return o.WITHDRAWAL_FAILED;case s.CANCELED:return o.WITHDRAWAL_USER_CANCELED;case s.EXPIRED:return o.WITHDRAWAL_EXPIRED;case s.WITHDRAWAL_ACTIVE:return o.WITHDRAWAL_ACTIVE}break;default:return o.STATUS_UNSET}return o.STATUS_UNSET},t.getPaymentTransactionType=function(e,t){if(e){const n=e.toLowerCase();switch(n){case a.TYPE_P2P:return t?i.TYPE_P2P_SENT:i.TYPE_P2P_RCVD;case a.TYPE_P2M:return t?i.TYPE_P2M_SENT:i.TYPE_P2M_RCVD;case a.TYPE_P2M_PAYOUT:return i.TYPE_P2M_PAYOUT;case a.TYPE_DEPOSIT:return i.TYPE_DEPOSIT;case a.TYPE_REFUND:return i.TYPE_REFUND;case a.TYPE_WITHDRAWAL:return i.TYPE_WITHDRAWAL;default:__LOG__(2)`parsePaymentTransactionType payment transaction string=${n}`}}return t?i.TYPE_P2P_SENT:i.TYPE_P2P_RCVD},t.getPaymentTxnWebStatus=function(e){if(null==e)return r.PaymentInfo$TxnStatus.UNKNOWN;switch(e){case o.RECV_PAY_EXPIRED:case o.SEND_PAY_EXPIRED:return r.PaymentInfo$TxnStatus.EXPIRED_TXN;case o.RECV_PAY_FAILURE:case o.SEND_PAY_FAILURE:return r.PaymentInfo$TxnStatus.FAILED;case o.RECV_PAY_INIT:case o.SEND_PAY_INIT:return r.PaymentInfo$TxnStatus.INIT;case o.RECV_PAY_PENDING_SETUP:return r.PaymentInfo$TxnStatus.PENDING_SETUP;case o.RECV_PAY_PENDING:case o.SEND_PAY_PENDING:return r.PaymentInfo$TxnStatus.FAILED_DA;case o.RECV_PAY_RETRY_ON_FAILURE:return r.PaymentInfo$TxnStatus.FAILED_PROCESSING;case o.RECV_PAY_SUCCESS:case o.SEND_PAY_SUCCESS:case o.REQUEST_PAY_FULFILLED:return r.PaymentInfo$TxnStatus.SUCCESS;case o.REQUEST_PAY_CANCELLED:return r.PaymentInfo$TxnStatus.COLLECT_CANCELED;case o.REQUEST_PAY_CANCELLING:return r.PaymentInfo$TxnStatus.COLLECT_CANCELLING;case o.REQUEST_PAY_EXPIRED:return r.PaymentInfo$TxnStatus.COLLECT_EXPIRED;case o.REQUEST_PAY_FAILED_RISK:return r.PaymentInfo$TxnStatus.COLLECT_FAILED_RISK;case o.REQUEST_PAY_FAILED:return r.PaymentInfo$TxnStatus.COLLECT_FAILED;case o.REQUEST_PAY_INIT:return r.PaymentInfo$TxnStatus.COLLECT_INIT;case o.REQUEST_PAY_REJECTED:return r.PaymentInfo$TxnStatus.COLLECT_REJECTED;case o.REQUEST_PAY_SUCCESS:return r.PaymentInfo$TxnStatus.COLLECT_SUCCESS;case o.SEND_PAY_AUTH_CANCELED:return r.PaymentInfo$TxnStatus.AUTH_CANCELED;case o.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return r.PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED_PROCESSING;case o.SEND_PAY_AUTH_CANCEL_FAILED:return r.PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED;case o.SEND_PAY_FAILURE_RECEIVER:return r.PaymentInfo$TxnStatus.FAILED_RECEIVER_PROCESSING;case o.SEND_PAY_FAILURE_RISK:case o.RECV_PAY_FAILURE_RISK:return r.PaymentInfo$TxnStatus.FAILED_RISK;case o.SEND_PAY_PENDING_RECEIVER:return r.PaymentInfo$TxnStatus.PENDING_RECEIVER_SETUP;case o.SEND_PAY_PENDING_REFUND:return r.PaymentInfo$TxnStatus.FAILED_DA_FINAL;case o.SEND_PAY_REFUNDED:return r.PaymentInfo$TxnStatus.REFUNDED_TXN;case o.SEND_PAY_REFUND_FAILED_PROCESSING:return r.PaymentInfo$TxnStatus.REFUND_FAILED_PROCESSING;case o.SEND_PAY_REFUND_FAILED:return r.PaymentInfo$TxnStatus.REFUND_FAILED;case o.SEND_PAY_REFUND_PENDING:return r.PaymentInfo$TxnStatus.REFUND_FAILED_DA;case o.SEND_PAY_IN_REVIEW:return r.PaymentInfo$TxnStatus.IN_REVIEW;case o.STATUS_UNSET:default:return r.PaymentInfo$TxnStatus.UNKNOWN}},t.getPaymentWebStatus=function(e,t){if(null==e)return r.PaymentInfo$Status.UNKNOWN_STATUS;switch(e){case o.SEND_PAY_INIT:case o.SEND_PAY_PENDING:case o.RECV_PAY_INIT:case o.RECV_PAY_PENDING:case o.RECV_PAY_RETRY_ON_FAILURE:case o.REQUEST_PAY_INIT:return r.PaymentInfo$Status.PROCESSING;case o.SEND_PAY_PENDING_RECEIVER:case o.SEND_PAY_FAILURE_RECEIVER:return r.PaymentInfo$Status.SENT;case o.REQUEST_PAY_SUCCESS:return t===i.TYPE_P2P_REQ_SENT?r.PaymentInfo$Status.WAITING_FOR_PAYER:r.PaymentInfo$Status.WAITING;case o.RECV_PAY_PENDING_SETUP:return r.PaymentInfo$Status.NEED_TO_ACCEPT;case o.SEND_PAY_SUCCESS:case o.RECV_PAY_SUCCESS:case o.REQUEST_PAY_FULFILLED:return r.PaymentInfo$Status.COMPLETE;case o.SEND_PAY_FAILURE:case o.SEND_PAY_FAILURE_RISK:case o.SEND_PAY_PENDING_REFUND:case o.SEND_PAY_REFUND_PENDING:case o.SEND_PAY_REFUND_FAILED:case o.SEND_PAY_REFUND_FAILED_PROCESSING:case o.RECV_PAY_FAILURE:case o.REQUEST_PAY_FAILED:case o.REQUEST_PAY_FAILED_RISK:return r.PaymentInfo$Status.COULD_NOT_COMPLETE;case o.SEND_PAY_REFUNDED:return r.PaymentInfo$Status.REFUNDED;case o.RECV_PAY_EXPIRED:case o.REQUEST_PAY_EXPIRED:case o.SEND_PAY_AUTH_CANCELED:case o.SEND_PAY_AUTH_CANCEL_FAILED:case o.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return r.PaymentInfo$Status.EXPIRED;case o.REQUEST_PAY_REJECTED:return r.PaymentInfo$Status.REJECTED;case o.REQUEST_PAY_CANCELLED:return r.PaymentInfo$Status.CANCELLED;case o.STATUS_UNSET:case o.REQUEST_PAY_CANCELLING:default:return r.PaymentInfo$Status.UNKNOWN_STATUS}};var r=n(38601);const i=n(76672)({TYPE_UNSET:0,TYPE_P2P_SENT:1,TYPE_P2P_RCVD:2,TYPE_P2P_GRP:3,TYPE_P2P_NO_INFO:4,TYPE_FUTURE:5,TYPE_P2P_REQ_SENT:10,TYPE_P2P_REQ_RCVD:20,TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:21,TYPE_P2P_REQ_GRP:30,TYPE_P2M_SENT:100,TYPE_P2M_RCVD:200,TYPE_P2M_PAYOUT:300,TYPE_MISSING_DETAILS:400,TYPE_DEPOSIT:500,TYPE_REFUND:600,TYPE_WITHDRAWAL:700});t.PaymentTransactionType=i;const o=n(76672)({STATUS_UNSET:0,REQUEST_PAY_INIT:11,REQUEST_PAY_SUCCESS:12,REQUEST_PAY_FAILED:13,REQUEST_PAY_FAILED_RISK:14,REQUEST_PAY_REJECTED:15,REQUEST_PAY_EXPIRED:16,REQUEST_PAY_FULFILLED:17,REQUEST_PAY_CANCELLED:18,REQUEST_PAY_CANCELLING:19,REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS:20,RECV_PAY_INIT:101,RECV_PAY_PENDING_SETUP:102,RECV_PAY_PENDING:103,RECV_PAY_RETRY_ON_FAILURE:104,RECV_PAY_FAILURE:105,RECV_PAY_SUCCESS:106,RECV_PAY_EXPIRED:107,RECV_PAY_FAILURE_RISK:108,RECV_PAY_WITHDRAWAL_PROCESSING:109,RECV_PAY_WITHDRAWAL_FAILURE:110,RECV_PAY_WITHDRAWAL_PERMANENT_FAILED:111,RECV_PAY_SENDER_CANCELED:112,SEND_PAY_INIT:401,SEND_PAY_PENDING_RECEIVER:402,SEND_PAY_PENDING:403,SEND_PAY_REFUND_PENDING:404,SEND_PAY_SUCCESS:405,SEND_PAY_FAILURE:406,SEND_PAY_FAILURE_RISK:407,SEND_PAY_REFUNDED:408,SEND_PAY_REFUND_FAILED:409,SEND_PAY_FAILURE_RECEIVER:410,SEND_PAY_REFUND_FAILED_PROCESSING:411,SEND_PAY_PENDING_REFUND:412,SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:413,SEND_PAY_AUTH_CANCEL_FAILED:414,SEND_PAY_AUTH_CANCELED:415,SEND_PAY_EXPIRED:416,SEND_PAY_AUTH_SUCCESS:417,SEND_PAY_AUTH_SUCCESS_CANCELING:418,SEND_PAY_IN_REVIEW:419,SEND_PAY_PENDING_PROCESSING:420,SEND_PAY_USER_CANCELED:421,WITHDRAWAL_INIT:601,WITHDRAWAL_PENDING:602,WITHDRAWAL_IN_REVIEW:603,WITHDRAWAL_SUCCESS:604,WITHDRAWAL_FAILED:605,WITHDRAWAL_USER_CANCELED:606,WITHDRAWAL_EXPIRED:607,WITHDRAWAL_ACTIVE:608});t.NotificationTransactionStatus=o;const a={TYPE_P2P:"p2p",TYPE_P2M:"p2m",TYPE_P2M_PAYOUT:"payout",TYPE_WITHDRAWAL:"withdrawal",TYPE_DEPOSIT:"deposit",TYPE_REFUND:"refund"};t.PaymentTransactionTypeServerString=a;const s={PENDING_RECEIVER_SETUP:"PENDING_RECEIVER_SETUP",PENDING_SETUP:"PENDING_SETUP",PENDING:"PENDING",INITIAL:"INITIAL",SUCCESS:"SUCCESS",COMPLETED:"COMPLETED",IN_REVIEW:"IN_REVIEW",FAILED:"FAILED",DECLINED:"DECLINED",FAILURE:"FAILURE",FAILED_RISK:"FAILED_RISK",FAILED_PROCESSING:"FAILED_PROCESSING",FAILED_RECEIVER_PROCESSING:"FAILED_RECEIVER_PROCESSING",REFUND_FAILED_PROCESSING:"REFUND_FAILED_PROCESSING",REFUNDED:"REFUNDED",REFUND_FAILED:"REFUND_FAILED",EXPIRED:"EXPIRED",CANCELED:"CANCELLED",AUTH_SUCCESS:"AUTH_SUCCESS",AUTH_CANCELED:"AUTH_CANCELED",AUTH_CANCEL_FAILED_PROCESSING:"AUTH_CANCEL_FAILED_PROCESSING",AUTH_CANCEL_FAILED:"AUTH_CANCEL_FAILED",COLLECT_SUCCESS:"COLLECT_SUCCESS",COLLECT_FAILED:"COLLECT_FAILED",COLLECT_REJECTED:"COLLECT_REJECTED",COLLECT_EXPIRED:"COLLECT_EXPIRED",COLLECT_CANCELED:"COLLECT_CANCELED",FAILED_DA:"FAILED_DA",FAILED_DA_FINAL:"FAILED_DA_FINAL",REFUND_FAILED_DA:"REFUND_FAILED_DA",COLLECT_FAILED_RISK:"COLLECT_FAILED_RISK",WITHDRAWAL_PROCESSING:"WITHDRAWAL_PROCESSING",WITHDRAWAL_FAILURE:"WITHDRAWAL_FAILURE",WITHDRAWAL_PERMANENT_FAILED:"WITHDRAWAL_PERMANENT_FAILED",WITHDRAWAL_ACTIVE:"WITHDRAWAL_ACTIVE"};t.PaymentTransactionStatusServerString=s},30873:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{cancelPaymentRequestMessage:r}=t;if(null==r)return;const c=r.key;if(null==c)return;const d=function(e,t){if(!e)throw(0,u.default)("parseProtocolMessageProto: no message key is defined for cancel payment request message");const{id:n}=e;if(!n)throw(0,u.default)("parseProtocolMessageProto: no message id is defined for cancel payment request message");let r;if(t.id.remote.isGroup()){var i;if(r=t.id.participant,t.id.fromMe)r=(0,o.decodeJid)(t.from);else if(!(null===(i=(0,o.decodeJid)(e.participant))||void 0===i?void 0:i.equals((0,l.getMeUser)())))return null}return new a.default({id:n,fromMe:t.id.fromMe,remote:t.id.remote,participant:r})}(c,n);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.UNKNOWN,kind:s.MsgKind.Unknown,subtype:"payment_transaction_request_cancelled",paymentRequestMessageKey:d}),contextInfo:null}};var i=r(n(81109)),o=n(54468),a=r(n(60001)),s=n(73602),l=n(3885),u=r(n(89482))},46037:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{declinePaymentRequestMessage:r}=t;if(null==r)return;const c=function(e,t){if(!e)throw(0,u.default)("parseProtocolMessageProto: no message key is defined for decline payment request message");const{id:n}=e;if(!n)throw(0,u.default)("parseProtocolMessageProto: no message id is defined for decline payment request message");let r;var i;if(t.id.remote.isGroup()){if(!t.id.fromMe&&!(null===(i=(0,o.decodeJid)(e.participant))||void 0===i?void 0:i.equals((0,l.getMeUser)()))&&"send"!==t.subtype)return null;r=(0,o.decodeJid)(e.participant)}return new a.default({fromMe:!t.id.fromMe,remote:t.id.remote,id:n,participant:r})}(r.key,n);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:"unknown",kind:s.MsgKind.Unknown,subtype:"payment_action_request_declined",paymentRequestMessageKey:c}),contextInfo:null}};var i=r(n(81109)),o=n(54468),a=r(n(60001)),s=n(73602),l=n(3885),u=r(n(89482))},68732:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{paymentInviteMessage:r}=t;if(null==r)return;if(r.serviceType===s.Message$PaymentInviteMessage$ServiceType.NOVI)return __LOG__(2)`[payment-invite] parsePaymentInviteMessageProto: does not support novi transactions`,{msgData:(0,i.default)((0,i.default)({},n),{},{kind:a.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:null};return __LOG__(2)`[payment-invite] render payment invite of type ${r.serviceType}`,{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.PAYMENT,kind:a.MsgKind.Payment,subtype:"invite",paymentExpiryTimestamp:(0,o.maybeNumberOrThrowIfTooLarge)(r.expiryTimestamp),paymentInviteServiceType:r.serviceType}),contextInfo:null}};var i=r(n(81109)),o=n(22101),a=n(73602),s=n(77026)},79692:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{messageProtobuf:r,baseMessage:d,paymentInfo:p,msgContext:f}=e;const{requestPaymentMessage:_}=r;if(null==_)return;const g=null===(t=_.noteMessage)||void 0===t||null===(n=t.extendedTextMessage)||void 0===n?void 0:n.contextInfo;if((null==p?void 0:p.futureproofed)||(0,l.hasUnsupportedCurrency)(p))return __LOG__(2)`parseRequestPaymentMessageProto: does not support novi transactions`,{msgData:(0,i.default)((0,i.default)({},d),{},{type:u.MSG_TYPE.PAYMENT,kind:u.MsgKind.Payment,subtype:"phone_only_feature"}),contextInfo:g};const{background:h,noteMessage:A}=_,m=null!=(null==A?void 0:A.extendedTextMessage)||null!=(null==A?void 0:A.conversation)||null!=(null==A?void 0:A.stickerMessage),E=A&&m?(0,s.parseMsgProto)(A,{},f):void 0,y=null!=p?(0,l.parseMsgPaymentInfo)(p):{};if(null==_.amount)null!=_.currencyCodeIso4217&&null==y.paymentCurrency&&(y.paymentCurrency=_.currencyCodeIso4217),null!=_.amount1000&&null==y.paymentAmount1000&&(y.paymentAmount1000=(0,o.numberOrThrowIfTooLarge)(_.amount1000));else if(null!=_.amount.currencyCode&&null==y.paymentCurrency&&(y.paymentCurrency=_.amount.currencyCode),null!=_.amount.value&&null==y.paymentAmount1000){const e=_.amount,t=null==e.offset||0===e.offset?1e3:e.offset;y.paymentAmount1000=1e3*parseFloat(e.value)/t}null!=_.requestFrom&&null==(null==y?void 0:y.paymentMessageReceiverJid)&&(y.paymentMessageReceiverJid=(0,l.decodeJid)(_.requestFrom));null!=(null==y?void 0:y.paymentStatus)&&null!=(null==y?void 0:y.paymentTxnStatus)||!(0,l.isEitherSenderOrReceiverOfPaymentMessage)(d.id,(0,a.default)(y.paymentMessageReceiverJid,"paymentInfoData.paymentMessageReceiverJid"))||(y.paymentStatus=c.PaymentInfo$Status.WAITING,y.paymentTxnStatus=c.PaymentInfo$TxnStatus.COLLECT_INIT);null!=_.expiryTimestamp&&null==(null==y?void 0:y.paymentExpiryTimestamp)&&(y.paymentExpiryTimestamp=(0,o.numberOrThrowIfTooLarge)(_.expiryTimestamp));if(!m)return{msgData:(0,i.default)((0,i.default)((0,i.default)({},d),{},{type:u.MSG_TYPE.PAYMENT,kind:u.MsgKind.Payment,subtype:"futureproof"},y),{},{paymentBackground:h}),contextInfo:g};return{msgData:(0,i.default)((0,i.default)((0,i.default)({},d),{},{type:u.MSG_TYPE.PAYMENT,kind:u.MsgKind.Payment,subtype:"request"},y),{},{paymentBackground:h,paymentNoteMsg:E}),contextInfo:g}};var i=r(n(81109)),o=n(22101),a=r(n(49619)),s=n(18431),l=n(54468),u=n(73602),c=n(38601)},22260:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{messageProtobuf:r,baseMessage:d,paymentInfo:p,msgContext:f}=e;const{sendPaymentMessage:_}=r;if(null==_)return;const g=null===(t=_.noteMessage)||void 0===t||null===(n=t.extendedTextMessage)||void 0===n?void 0:n.contextInfo;if(!0===(null==p?void 0:p.futureproofed)||(0,a.hasUnsupportedCurrency)(p))return __LOG__(2)`parseSendPaymentMessageProto: does not support novi transactions`,{msgData:(0,i.default)((0,i.default)({},d),{},{type:"unknown",kind:l.MsgKind.Unknown,subtype:"phone_only_feature"}),contextInfo:g};const{background:h,noteMessage:A,requestMessageKey:m}=_,E=null!=(null==A?void 0:A.extendedTextMessage)||null!=(null==A?void 0:A.conversation)||null!=(null==A?void 0:A.stickerMessage),y=E?"send":"futureproof",S=A&&E?(0,o.parseMsgProto)(A,{},f):void 0,v=null!=p?(0,a.parseMsgPaymentInfo)(p):null,I=m?function(e,t,n){if(!e)throw(0,c.default)("getPaymentRequestMessageKey: no message key is defined");const{id:r}=e;if(!r)throw(0,c.default)("getPaymentRequestMessageKey: no key id is defined");if(!t)return __LOG__(3)`getPaymentRequestMessageKey: no message id is defined`,null;let i;var o;if(t.remote.isGroup()){if(!t.fromMe&&!(null===(o=(0,a.decodeJid)(e.participant))||void 0===o?void 0:o.equals((0,u.getMeUser)()))&&"send"!==n)return null;i=(0,a.decodeJid)(e.participant)}return new s.default({fromMe:!t.fromMe,remote:t.remote,id:r,participant:i})}(m,d.id,y):null;if(!E)return{msgData:(0,i.default)((0,i.default)((0,i.default)({},d),{},{type:l.MSG_TYPE.PAYMENT,kind:l.MsgKind.Payment,subtype:"futureproof"},v),{},{paymentBackground:h,paymentRequestMessageKey:I}),contextInfo:g};return{msgData:(0,i.default)((0,i.default)((0,i.default)({},d),{},{type:l.MSG_TYPE.PAYMENT,kind:l.MsgKind.Payment,subtype:"send"},v),{},{paymentBackground:h,paymentRequestMessageKey:I,paymentNoteMsg:S}),contextInfo:g}};var i=r(n(81109)),o=n(18431),a=n(54468),s=r(n(60001)),l=n(73602),u=n(3885),c=r(n(89482))},82068:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("orphan-payment-notification").version((0,i.orphanPaymentNotificationCreateTable)(),[n("msgKey"),t("receiver"),t("currency"),t("amount1000"),t("type"),t("status"),t("ts")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("orphan-payment-notification")};var r=n(74557),i=n(20746),o=n(65717)},23228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n}=(0,o.columnBuilder)(e.config);e.add("payment-backgrounds").version((0,i.paymentBackgroundsCreateTable)(),[n("id"),t("imageBuffer")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("payment-backgrounds")};var r=n(74557),i=n(20746),o=n(65717)},92083:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(20170),a=r(n(49619)),s=n(29987),l=n(83741),u=n(45414),c=n(21130),d=n(1619),p=n(37653),f=n(26368),_=n(73602),g=n(15553),h=n(61627),A=n(60562),m=n(96513),E=n(77026),y=n(51017);const S=60*s.DAY_SECONDS;var v,I,T=(0,c.createAddonMsgProcessor)({isEnabled:()=>(0,h.isPinnedMessagesM1ReceiverEnabled)()&&(0,l.getABPropConfigValue)("unified_pin_addon_infra_enabled"),convert:{fromHistorySyncMsg:e=>{const t=(0,A.parseWebMsgInfoPinInChat)(e.webMsgInfo,e.parsedWebMsgInfo).map((e=>(0,m.deserializePinInChatMsgData)((0,m.serializePinInChat)(e))));return Promise.resolve(t)}},parentKey_DEPRECATED:"pinParentKey",updateCollection:(I=(0,i.default)((function*(e){const t=e.add;yield(0,d.frontendSendAndReceive)("updatePinCollection",{msgs:t,removeMsgs:e.remove})})),function(){return I.apply(this,arguments)}),beforeUpsert:(e,t)=>{const n=e.filter((e=>{var n;const r=null!==(n=e.pinExpiryDuration)&&void 0!==n?n:0,i=e.pinParentKey.toString(),o=t.get(i);return r<=S||(null==o?void 0:o.type)===_.MSG_TYPE.EVENT_CREATION}));return Promise.resolve({result:n,upsert:n})},afterUpsert:(v=(0,i.default)((function*(e,t){if(t.mode===u.AddonProcessMode.HistorySync)return;const{markFutureproofMessagesReparsed:r}=n(58351),s=(0,o.groupBy)(e,(e=>e.id.remote.toString())),l=[r(e.map((e=>e.id.toString())))].concat(s.map(function(){var e=(0,i.default)((function*(e){let[t,n]=e;const r=(0,y.createWid)(t),i=yield Promise.all(n.map((e=>{const t=(0,f.getT)(e);if(e.pinMessageType===E.Message$PinInChatMessage$Type.PIN_FOR_ALL&&null!=t&&!(0,f.getIsFailed)(e))return(0,g.genSystemMessage)(r,t,(0,a.default)((0,f.getSender)(e),"getSender(pin)"))})).filter(Boolean));(yield(0,d.frontendSendAndReceive)("processMultipleMessages",{chatId:r,msgObjs:i,meta:{add:"after",isHistory:!1},processMessagesOrigin:"pinMessage"}))&&(yield(0,p.storeMessages)(i,r))}));return function(){return e.apply(this,arguments)}}()));yield Promise.all(l)})),function(){return v.apply(this,arguments)})});t.default=T},96869:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdatePinInChat=f,t.getPinInChatByParentKey=function(){return _.apply(this,arguments)},t.removePinInChatByParentMsgKeys=function(e){return(0,s.getStorage)().lock(["pinned-messages"],function(){var t=(0,o.default)((function*(t){let[n]=t;yield n.bulkRemove(e)}));return function(){return t.apply(this,arguments)}}())},t.storePinInChatMsgBulk=function(e){const t=e.map(d.serializePinInChat);t.map((e=>`${e.msgKey.toString()} to ${e.parentMsgKey}`)).toString();const n=(0,a.groupBy)(t,(e=>e.chatId));return Promise.all(n.map((e=>{let[t,n]=e;return f((0,p.createWid)(t),n)}))).then((e=>Array.prototype.concat(...e)))};var i=r(n(81109)),o=r(n(48926)),a=n(20170),s=n(74557),l=n(11333),u=n(72491),c=n(61627),d=n(96513),p=n(51017);function f(e,t){const n=new Map;return t.forEach((e=>{const{parentMsgKey:t}=e,r=t,i=n.get(r);(!i||(null==i?void 0:i.senderTimestampMs)<=e.senderTimestampMs)&&n.set(r,e)})),(0,s.getStorage)().lock(["pinned-messages"],function(){var t=(0,o.default)((function*(t){let[r]=t;const o=yield r.anyOf(["chatId"],[e.toString()]);o.forEach((e=>{const t=e.parentMsgKey,r=n.get(t);r&&r.senderTimestampMs<=e.senderTimestampMs&&n.delete(t)}));const a=new Map(o.map((e=>[e.parentMsgKey,e])));n.forEach(((e,t)=>{a.set(t,e)}));Array.from(a.values()).filter((e=>e.pinType===u.PIN_STATE.PIN)).sort(((e,t)=>t.senderTimestampMs-e.senderTimestampMs)).slice((0,c.getMaxPins)()).forEach((e=>{n.set(e.parentMsgKey,(0,i.default)((0,i.default)({},e),{},{pinType:u.PIN_STATE.UNPIN}))}));const s=Array.from(n.values());return yield r.bulkCreateOrReplace(s),s}));return function(){return t.apply(this,arguments)}}())}function _(){return(_=(0,o.default)((function*(e){const t=yield(0,l.getTable)().get(e.toString());return null==t?null:(0,d.deserializePinInChat)(t)}))).apply(this,arguments)}},15553:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genSystemMessage=b,t.groupAndProcessPinMessages=function(){return v.apply(this,arguments)},t.processPinMessages=I;var i=r(n(48926)),o=n(20170),a=r(n(49619)),s=n(1619),l=n(96869),u=n(87946),c=n(37653),d=n(26368),p=r(n(60001)),f=n(73602),_=n(96513),g=n(77026),h=n(3885),A=n(51017);function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e){const t=e.map((e=>e.pinParentKey)).filter(Boolean).map((e=>e.toString())),n=yield(0,u.getMsgsByMsgKey)(t);return new Map(n.map((e=>[e.id.toString(),e])))}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(e){const{storeMessageOrphans:t}=n(6751);yield t(e,(e=>(0,a.default)(e.pinParentKey,"pin.pinParentKey")))}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e){const t=(0,o.groupBy)(e,(e=>e.id.remote.toString()));yield Promise.all(t.map((e=>{let[t,n]=e;return I((0,A.createWid)(t),n)})))}))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)((function*(e,t){const r=yield m(t),o=[],u=[];for(const e of t){r.get((0,a.default)(e.pinParentKey,"pin.pinParentKey").toString())?u.push(e):o.push(e)}yield Promise.all([(0,i.default)((function*(){if(0===o.length)return;yield y(o);const{markFutureproofMessagesReparsed:e}=n(58351);yield e(o.map((e=>e.id.toString())))}))(),(0,i.default)((function*(){if(0===u.length)return;const t=yield(0,s.frontendSendAndReceive)("updatePinCollection",{msgs:u,removeMsgs:[]});if(t){yield(0,l.createOrUpdatePinInChat)(e,t.map((e=>(0,_.serializePinInChat)(e))));const{markFutureproofMessagesReparsed:r}=n(58351);yield r(t.map((e=>e.msgKey.toString())))}const r=yield Promise.all(u.map((t=>t.pinMessageType===g.Message$PinInChatMessage$Type.PIN_FOR_ALL?b(e,(0,a.default)(t.t,"msg.t"),(0,a.default)((0,d.getSender)(t),"getSender(msg)")):null)).filter(Boolean));(yield(0,s.frontendSendAndReceive)("processMultipleMessages",{chatId:e,msgObjs:r,meta:{add:"after",isHistory:!1},processMessagesOrigin:"pinMessage"}))&&(yield(0,c.storeMessages)(r,e))}))()])}))).apply(this,arguments)}function b(){return M.apply(this,arguments)}function M(){return(M=(0,i.default)((function*(e,t,n){const r=(0,h.getMeUser)(),i=n.equals(r);return{id:new p.default({id:yield p.default.newId(),fromMe:i,remote:e,participant:n}),author:n,from:e,to:r,recipients:[],t,type:f.MSG_TYPE.PINNED_MESSAGE,kind:f.MsgKind.PinnedMessage,templateParams:[n]}}))).apply(this,arguments)}},96513:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deserializePinInChat=function(e){return(0,i.default)((0,i.default)({},e),{},{msgKey:l.default.fromString(e.msgKey),parentMsgKey:l.default.fromString(e.parentMsgKey),chatId:(0,p.toChatWid)((0,p.createWid)(e.chatId)),sender:(0,p.createUserWid)(e.sender)})},t.deserializePinInChatMsgData=function(e){var t;const n=l.default.fromString(e.msgKey),{from:r,to:i,author:o}=(0,u.msgKeyToTargetInfo)(n,a.TranslateMsgKeyType.Addon);return{id:l.default.fromString(e.msgKey),from:r,to:i,author:o,type:c.MSG_TYPE.PIN_MESSAGE,kind:c.MsgKind.PinInChat,ack:e.ack,t:e.t,read:e.read,pinSenderTimestampMs:e.senderTimestampMs,pinParentKey:l.default.fromString(e.parentMsgKey),pinMessageType:null!==(t=d.Message$PinInChatMessage$Type.cast(e.pinType))&&void 0!==t?t:d.Message$PinInChatMessage$Type.UNKNOWN_TYPE,pinExpiryDuration:e.pinExpiryDuration}},t.serializePinInChat=function(e){return(0,i.default)((0,i.default)({},e),{},{msgKey:e.msgKey.toString(),parentMsgKey:e.parentMsgKey.toString(),chatId:e.chatId.toString(),sender:e.sender.toString()})},t.serializePinInChatMsgData=function(e){const t=(0,p.toUserWid)((0,o.default)((0,s.getSender)(e),"getSender(pin)")).toString();return{msgKey:e.id.toString(),ack:e.ack,t:e.t,read:e.read,parentMsgKey:e.pinParentKey.toString(),senderTimestampMs:e.pinSenderTimestampMs,chatId:e.id.remote.toString(),sender:t,pinType:e.pinMessageType,pinExpiryDuration:e.pinExpiryDuration}};var i=r(n(81109)),o=r(n(49619)),a=n(54468),s=n(26368),l=r(n(60001)),u=n(97087),c=n(73602),d=n(77026),p=n(51017)},60562:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebMsgInfoPinInChat=function(e,t){const n=[];try{if(null==e||null==e.pinInChat)return n;if(null==t||null==t.pinInChat)return n;const l=t.pinInChat,{key:u,type:c,senderTimestampMs:d,serverTimestampMs:p,messageAddOnContextInfo:f}=l,{msgKey:_,sender:g}=(0,o.default)((0,a.buildAddonMsgKey)((0,o.default)(u,"key")),"buildAddonMsgKey(nullthrows(key))");var r;if(null==g)__LOG__(4,void 0,new Error)`parseWebMsgInfoPinInChat: pinInChat sender should be a wid.`;else n.push({msgKey:_,parentMsgKey:t.id,chatId:(0,s.toChatWid)(_.remote),senderTimestampMs:(0,i.numberOrThrowIfTooLarge)((0,o.default)(d,"senderTimestampMs")),t:null!==(r=(0,a.getAddonServerTimestamp)(p))&&void 0!==r?r:void 0,pinType:(0,o.default)(c,"type"),sender:g,pinExpiryDuration:null==f?void 0:f.messageAddOnDurationInSecs})}catch(e){__LOG__(4,void 0,new Error)`[history sync] parseWebMsgInfoPinInChat failed with error ${null==e?void 0:e.name} and stack ${null==e?void 0:e.stack}`}return n};var i=n(22101),o=r(n(49619)),a=n(29162),s=n(51017)},50575:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r}=e;const{pinInChatMessage:d}=n;if(null==d)return;if(!(0,u.isPinnedMessagesM1ReceiverEnabled)())return{msgData:(0,i.default)((0,i.default)({},r),{},{type:s.MSG_TYPE.UNKNOWN,kind:s.MsgKind.Unknown,futureproofType:s.MSG_TYPE.PIN_MESSAGE}),contextInfo:null};const p=(0,a.translateRegularMessageKeyToLocalReference)(d.key,r);if(null==p||r.id.remote.toString()!==p.remote.toString())throw new l.PinInChatValidationError(l.PinInChatValidationErrorCode.INVALID_PIN_IN_CHAT_MSG_REMOTE,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const f=null===(t=n.messageContextInfo)||void 0===t?void 0:t.messageAddOnDurationInSecs;if(null!=f&&f<0)throw new l.PinInChatValidationError(l.PinInChatValidationErrorCode.INVALID_PIN_IN_CHAT_EXPIRY_DURATION,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const _=d.type;if(null==_)throw new l.PinInChatValidationError(l.PinInChatValidationErrorCode.MISSING_TYPE,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const g=(0,o.maybeNumberOrThrowIfTooLarge)(d.senderTimestampMs);if(null==g)throw new l.PinInChatValidationError(l.PinInChatValidationErrorCode.MISSING_SENDER_TIMESTAMP,c.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},r),{},{type:s.MSG_TYPE.PIN_MESSAGE,kind:s.MsgKind.PinInChat,pinParentKey:p,pinMessageType:_,pinSenderTimestampMs:g,pinExpiryDuration:f}),contextInfo:null}};var i=r(n(81109)),o=n(22101),a=n(54468),s=n(73602),l=n(17834),u=n(61627),c=n(57095)},17834:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PinInChatValidationErrorCode=t.PinInChatValidationError=void 0;var r=n(22495);const i=n(76672)({INVALID_PIN_IN_CHAT_EXPIRY_DURATION:"pin_in_chat_invalid_expiry_duration",INVALID_PIN_IN_CHAT_MSG_REMOTE:"pin_in_chat_invalid_msg_remote",MISSING_TYPE:"pin_in_chat_missing_type",MISSING_SENDER_TIMESTAMP:"pin_in_chat_missing_timestamp"});t.PinInChatValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="PinInChatValidationError"}}t.PinInChatValidationError=o},11333:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addUserDefinedPrimaryKey:n,addIndex:a}=(0,o.columnBuilder)(e.config);e.add("pinned-messages").version((0,i.pinInChatCreateTable)(),[n("parentMsgKey"),t("chatId"),t("msgKey"),t("senderTimestampMs"),t("ack"),t("t"),t("pinType"),t("pinExpiryDuration"),t("sender"),a("msgKey"),a("chatId")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("pinned-messages")};var r=n(74557),i=n(20746),o=n(65717)},28901:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.assertPinInChatMsgData=function(e){const t=a(e);return(0,o.default)(null!=t,"assertPinInChatMsgData: invalid message object"),t},t.castToPinInChatMsgData=a;var i=n(73602),o=r(n(41143));function a(e){return e.type===i.MSG_TYPE.PIN_MESSAGE?e:null}},61627:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxPins=function(){return i()?(0,r.getABPropConfigValue)("pinned_messages_m2_pin_max"):1},t.isPinnedMessagesM1ReceiverEnabled=function(){return(0,r.getABPropConfigValue)("pinned_messages_m1_receiver")},t.isPinnedMessagesM1SenderEnabled=function(){return(0,r.getABPropConfigValue)("pinned_messages_m1_sender")},t.isPinnedMessagesM2Enabled=i;var r=n(83741);function i(){return(0,r.getABPropConfigValue)("pinned_messages_m2")}},72491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PinExpiryDurationOption=t.PIN_STATE=void 0;t.PIN_STATE={INVALID:0,PIN:1,UNPIN:2};const r=n(76672).Mirrored(["FiveSeconds","FifteenSeconds","OneMinute","OneDay","SevenDays","ThirtyDays"]);t.PinExpiryDurationOption=r},46984:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{placeholderMessage:r}=t;if(null==r||null==r.type)return;const l=function(e){switch(e){case s.Message$PlaceholderMessage$PlaceholderType.MASK_LINKED_DEVICES:return o.BizContentPlaceholderType.MASK_LINKED_DEVICES}}(r.type);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.BIZ_CONTENT_PLACEHOLDER,kind:a.MsgKind.BizContentPlaceholder,bizContentPlaceholderType:l}),contextInfo:void 0}};var i=r(n(81109)),o=n(604),a=n(73602),s=n(77026)},604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BizContentPlaceholderType=void 0;n(73602);const r=n(76672)({MASK_LINKED_DEVICES:0});t.BizContentPlaceholderType=r},20601:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentedCagGroupMetadataParticipantList=function(e){const t=e.participants.iAmAdmin(),n=e.participants.toArray(),i=[],o=[];if(t)for(const e of n)i.push(e.id),o.push((0,r.getCurrentLid)(e.id));else for(const e of n)e.id.isLid()?i.push(e.id):o.push((0,r.getCurrentLid)(e.id));return[...i,...o].filter(Boolean)},t.augmentedCagGroupParticipantList=function(e,t){const n=[];if(e){for(const e of t)n.push(e.id),e.lid&&n.push(e.lid);return n}for(const e of t)e.id.isLid()?n.push(e.id):e.lid&&n.push(e.lid);return n};var r=n(42247)},86053:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(83741),a=n(45414),s=n(21130),l=n(4512),u=n(91504),c=n(1619),d=n(48840),p=n(64071),f=n(73602),_=n(68569),g=n(59738),h=n(45997),A=n(64098),m=n(69785);const E=(0,s.createAddonMsgProcessorDualEncrypted)({isEnabled:()=>(0,o.getABPropConfigValue)("unified_poll_vote_addon_infra_enabled"),convert:{fromHistorySyncMsg:(b=(0,i.default)((function*(e){return(0,g.parseWebMsgInfoPollUpdates)(e).then((e=>e.map(h.voteDataToPollVoteMsgData)))})),function(){return b.apply(this,arguments)}),toDualEncryptedMsgData:(T=(0,i.default)((function*(e,t){return e.kind===f.MsgKind.PollVoteEncrypted?e:(0,A.encryptPollVoteMsgData)(e,t)})),function(){return T.apply(this,arguments)}),toDualDecryptedMsgData:(I=(0,i.default)((function*(e,t){return e.kind===f.MsgKind.PollVoteDecrypted?e:(0,_.extractVote)(e,t).then(h.voteDataToPollVoteMsgData)})),function(){return I.apply(this,arguments)})},parentKey_DEPRECATED:"pollUpdateParentKey",updateCollection:(v=(0,i.default)((function*(e){return(0,c.frontendSendAndReceive)("upsertVotesModelCollection",{votes:e.add.map(h.pollVoteMsgDataToVoteData),votesToRemove:e.remove,restoredFromDb:!1})})),function(){return v.apply(this,arguments)}),beforeUpsert:(S=(0,i.default)((function*(e,t){const n=[],r=[];for(const i of e)if(i.addonEncrypted){const e=t.get(i.pollUpdateParentKey.toString());if(null==e)throw new l.AddonInfraError(l.AddonInfraErrorCode.MissingParentMsg);r.push(E.convert.toDualDecryptedMsgData(i,e))}else n.push(i);if(0!==r.length){const e=yield Promise.allSettled(r);for(const t of e)"fulfilled"===t.status&&t.value.kind===f.MsgKind.PollVoteDecrypted?n.push(t.value):__LOG__(2)`Cannot decrypt poll vote message: ${t.reason}`;(0,u.hasSettledWithError)(e)&&(__LOG__(4,void 0,new Error,!0,["messagings","addons"])`[pollVoteMsgProcessor] Failed to decrypt poll vote message`,SEND_LOGS("poll-vote-decryption-error",.1,"messagings","addons"))}return Promise.resolve({result:n,upsert:n})})),function(){return S.apply(this,arguments)}),afterUpsert:(y=(0,i.default)((function*(e,t){if(t.mode===a.AddonProcessMode.HistorySync)return;const r=yield(0,m.filterChatsWithAddOnPreviewUpdates)(e.map((e=>(0,p.lastAddOnPreviewCandidateFromVoteData)((0,h.pollVoteMsgDataToVoteData)(e),!1))));if(r.size>0&&(yield(0,d.updateDatabaseForLastAddOnPreview)(r),(0,c.frontendFireAndForget)("updateChatLastAddOnPreview",{chatMap:r})),t.mode===a.AddonProcessMode.OnlineReceive){const{markFutureproofMessagesReparsed:t}=n(58351);yield t(e.map((e=>e.id.toString())))}})),function(){return y.apply(this,arguments)})});var y,S,v,I,T,b,M=E;t.default=M},64098:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptPollVoteMsgData=function(){return g.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(77630),l=n(53965),u=n(54468),c=n(26368),d=n(97087),p=n(73602),f=n(32528),_=n(51017);function g(){return(g=(0,o.default)((function*(e,t){var n;const r=(0,a.default)((0,c.getPollOptions)(t),"getPollOptions(parentMsg)"),o=(0,a.default)((0,c.getMessageSecret)(t),"Poll creation missing message secret"),g=(0,a.default)((0,c.getOriginalSender)(t),"getOriginalSender(parentMsg)"),h=self.crypto.getRandomValues(new Uint8Array(12)),A={type:"poll_vote",encode:yield(0,f.protobufFromVote)(e,r)},m=yield(0,l.encryptAddOn)(A,{messageSecret:o,iv:h,stanzaId:t.id.id,originalMessageSender:g,addOnSender:(0,_.toUserWid)((0,a.default)((0,c.getSender)(e),"getSender(pollVote)"))});return(0,i.default)((0,i.default)({id:e.id,type:p.MSG_TYPE.POLL_UPDATE,kind:p.MsgKind.PollVoteEncrypted,subtype:"poll_vote",addonEncrypted:!0,t:Math.floor(e.senderTimestampMs/1e3)},(0,d.msgKeyToTargetInfo)(e.id,u.TranslateMsgKeyType.Addon)),{},{isNewMsg:!0,local:!0,ack:null!==(n=e.ack)&&void 0!==n?n:s.ACK.CLOCK,pollUpdateParentKey:t.id,encPollVote:{encPayload:m,encIv:h.buffer},senderTimestampMs:e.senderTimestampMs})}))).apply(this,arguments)}},23800:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteVotesByParentMsgKeys=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(89688),a=n(6431);function s(){return(s=(0,i.default)((function*(e){const t=yield(0,a.getTable)().anyOf(["parentMsgKey"],e);if(0===t.length)return;const n=t.map((e=>e.msgKey)),r=t.map((e=>[e.parentMsgKey,e.sender])),i=yield Promise.allSettled([(0,o.removeMessagesFromHistory)(n),(0,a.getTable)().bulkRemove(r)]);for(const e of i)if("rejected"===e.status)throw e.reason}))).apply(this,arguments)}},78013:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getParentMessages=function(){return c.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(68593),s=n(73602),l=n(463),u=n(17167);function c(){return(c=(0,i.default)((function*(e){const t=new Set(e.map(d)),{matParentMsgKeys:n,alternateWidMap:r}=(0,u.getAlternateWidMapForPolls)(e);n.forEach((e=>{t.add(e)}));const[i,o]=yield(0,a.queryAddonParentMsgs)(e,null),c=new Map,p=[];for(const e of o){let t=i.get(d(e));if(null==t&&(0,l.isMatFullyEnabled)()){const n=r.get(d(e));null!=n&&(t=i.get(n.id.toString()))}null==t||t.type===s.MSG_TYPE.UNKNOWN?p.push(e):c.set(e,t)}return{pollUpdateMsgsToParentMsgs:c,orphans:p}}))).apply(this,arguments)}function d(e){return(0,o.default)(e.pollUpdateParentKey,"pollUpdateMsgData.pollUpdateParentKey").toString()}},32602:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.upsertVotesDb=function(e){const t=(0,l.maxPerGroup)(e,(e=>e.senderTimestampMs),d.getVoteKey);return(0,u.getStorage)().lock(["poll-votes"],function(){var e=(0,o.default)((function*(e){let[n]=e;const r=yield n.anyOf(["parentMsgKey","sender"],function(e){const t=[];for(const{parentMsgKey:n,sender:r}of e)if(t.push([n.toString(),r.toString()]),(0,s.allowReferenceByAltJid)()){const e=(0,a.getAlternateUserWid)(r);null!=e&&t.push([n.toString(),e.toString()])}return t}(t)),o=new Map;for(const e of r)o.set((0,d.getVoteKey)(e),e);const l=[],u=[],p=[];for(const e of t){var f;const t=o.get((0,d.getVoteKey)(e));if(null!=t){if(t.senderTimestampMs>e.senderTimestampMs){l.push((0,c.voteFromDbRow)(t));continue}String(e.sender)!==String(t.sender)&&p.push(t)}const n=0===e.selectedOptionLocalIds.length,r=null!==(f=null==t?void 0:t.read)&&void 0!==f&&f,a=!n&&r&&e.read!==r?(0,i.default)((0,i.default)({},e),{},{read:!0}):e;l.push(a),u.push((0,c.dbRowFromVote)(a))}return p.length>0&&(yield n.bulkRemove(u.map((e=>[e.parentMsgKey,e.sender])))),u.length>0&&(yield n.bulkCreateOrReplace(u)),l}));return function(){return e.apply(this,arguments)}}())};var i=r(n(81109)),o=r(n(48926)),a=n(42247),s=n(33365),l=n(80154),u=n(74557),c=n(32797),d=n(61529)},662:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.compressPollOptions=function(e){return null==e?void 0:e.slice().sort(((e,t)=>e.localId-t.localId)).map(((e,t)=>{let{localId:n,name:r}=e;return(0,o.default)(n===t,"Unexpected local ID"),{name:r}}))},t.expandPollOptions=function(e){return null==e?void 0:e.map(((e,t)=>{let{name:n}=e;return{name:(0,i.default)(n,"name"),localId:t}}))};var i=r(n(49619)),o=r(n(41143))},32797:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dbRowFromVote=function(e){const t={msgKey:e.msgKey.toString(),parentMsgKey:e.parentMsgKey.toString(),selectedOptionLocalIds:new Uint8Array(e.selectedOptionLocalIds).buffer,senderTimestampMs:e.senderTimestampMs,sender:e.sender.toString(),read:e.read};null!=e.t&&(t.t=e.t);null!=e.ack&&(t.ack=e.ack);return t},t.voteFromDbRow=function(e){var t;return{msgKey:i.default.fromString(e.msgKey),parentMsgKey:i.default.fromString(e.parentMsgKey),selectedOptionLocalIds:Array.from(new Uint8Array(e.selectedOptionLocalIds)),senderTimestampMs:e.senderTimestampMs,t:e.t,sender:(0,o.createUserWid)(e.sender),ack:e.ack,read:null===(t=e.read)||void 0===t||t}};var i=r(n(60001)),o=n(51017)},59738:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebMsgInfoPollUpdates=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(22101),a=r(n(49619)),s=n(29162),l=n(73602),u=n(79038),c=n(32528);function d(){return(d=(0,i.default)((function*(e){const{webMsgInfo:t,parsedWebMsgInfo:n,isFromCag:r}=e;try{if(null==t||null==t.pollUpdates)return[];if(null==n||n.type!==l.MSG_TYPE.POLL_CREATION)return[];const e=n,i=yield(0,u.createOptionLocalIdMap)(e.pollOptions);return t.pollUpdates.map((t=>{try{const n=(0,a.default)(t.pollUpdateMessageKey,"pollUpdate.pollUpdateMessageKey"),l=(0,a.default)(t.vote,"pollUpdate.vote"),{msgKey:u,sender:d}=(0,a.default)((0,s.buildAddonMsgKey)(n,r),"buildAddonMsgKey(pollUpdateMessageKey, isFromCag)");return(0,c.voteFromProtobuf)({voteProtobuf:l,pollVoteMsgKey:u,parentMsgKey:e.id,sender:d,senderTimestampMs:(0,o.numberOrThrowIfTooLarge)((0,a.default)(t.senderTimestampMs,"pollUpdate.senderTimestampMs")),t:(0,s.getAddonServerTimestamp)(t.serverTimestampMs),optionLocalIdMap:i,ack:null,read:!0!==t.unread})}catch(e){return __LOG__(4,void 0,new Error,!0)`[history sync] Failed to parse pollUpdate with error ${e}`,SEND_LOGS("parseWebMsgInfoPollUpdates-vote-parse-error"),null}})).filter(Boolean)}catch(e){return __LOG__(4,void 0,new Error,!0)`[history sync] parseWebMsgInfoPollUpdates failed with error ${null==e?void 0:e.name} and stack ${null==e?void 0:e.stack}`,SEND_LOGS("parseWebMsgInfoPollUpdates-error"),[]}}))).apply(this,arguments)}},68569:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.extractVote=m,t.extractVotes=function(){return A.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(63020),s=n(26368),l=n(79038),u=n(32528),c=n(67550),d=n(72239),p=n(3885),f=n(57095),_=n(78833),g=n(67948),h=n(51017);function A(){return(A=(0,i.default)((function*(e){return(yield Promise.allSettled(Array.from(e.entries()).map((e=>{let[t,n]=e;return m(t,n)})))).map((e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":{const{reason:t}=e;if(t instanceof c.PollVoteValidationError)return __LOG__(4,void 0,new Error,!0)`Poll vote extraction failed: ${t.code}`,void SEND_LOGS(t.code);__LOG__(4,void 0,new Error,!0)`Poll vote extraction failed: ${t.message}\n${t.stack}`,SEND_LOGS("poll-vote-extraction-unknown-error")}}})).filter(Boolean)}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(e,t){if(null==t.messageSecret)throw new a.MessageSecretErrorsWamEvent({messageSecretAllowedList:_.MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:g.MESSAGE_SECRET_ERROR_TYPE.MISSING_MESSAGE_SECRET}).commit(),new c.PollCreationValidationError(c.PollCreationValidationErrorCode.MISSING_MESSAGE_SECRET,f.E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);const n=(0,o.default)(t.messageSecret,"parentMsg.messageSecret"),r=(0,o.default)(t.pollSelectableOptionsCount,"parentMsg.pollSelectableOptionsCount"),i=(0,o.default)(t.pollOptions,"parentMsg.pollOptions"),A=(0,o.default)(e.encPollVote,"pollUpdateMsg.encPollVote");if(32!==n.byteLength)throw new a.MessageSecretErrorsWamEvent({messageSecretAllowedList:_.MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:g.MESSAGE_SECRET_ERROR_TYPE.WRONG_LENGTH}).commit(),new c.PollVoteValidationError(c.PollVoteValidationErrorCode.INVALID_MESSAGE_SECRET);const m=(0,h.toUserWid)((0,s.getSender)(e)),E=yield(0,d.decryptVote)({encryptedVote:A.encPayload,iv:A.encIv,messageSecret:n,stanzaId:t.id.id,pollCreationOriginalSender:(0,s.getOriginalSender)(t),voteSender:m}),y=E.selectedOptions.length;if(y>i.length||0!==r&&y>r)throw new c.PollVoteValidationError(c.PollVoteValidationErrorCode.INVALID_OPTIONS_COUNT);if(E.selectedOptions.some((e=>32!==e.byteLength)))throw new c.PollVoteValidationError(c.PollVoteValidationErrorCode.INVALID_OPTION);const S=yield(0,l.createOptionLocalIdMap)(i);if(!S.includesHashes(E.selectedOptions))throw new c.PollVoteValidationError(c.PollVoteValidationErrorCode.OPTION_NOT_FOUND);return(0,u.voteFromProtobuf)({voteProtobuf:E,pollVoteMsgKey:e.id,parentMsgKey:e.pollUpdateParentKey,sender:m,senderTimestampMs:e.senderTimestampMs,t:(0,o.default)(e.t,"pollUpdateMsg.t"),optionLocalIdMap:S,ack:e.ack,read:(0,p.isMeAccount)(m)})}))).apply(this,arguments)}},75661:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{messageProtobuf:r,baseMessage:f,msgContext:_}=e;const{pollCreationMessage:g,pollCreationMessageV2:h,pollCreationMessageV3:A}=r,m=null!==(t=null!=g?g:h)&&void 0!==t?t:A,E=!(0,s.default)({from:f.from,to:f.to});if(null==m)return null;if(m===h&&!(0,l.isPollsReceivingEnabledInCags)())return null;if(m===A&&!(0,l.isSingleOptionPollsReceivingEnabled)())return null;const{name:y,options:S,selectableOptionsCount:v,contextInfo:I}=m;if(null==y)throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.MISSING_NAME,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(0===y.length||y.length>(0,l.getMaxPollNameLengthForIncomingMessages)())throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.INVALID_NAME,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if("quoted"===_||"history_quoted"===_){return{msgData:(0,i.default)((0,i.default)({},f),{},{type:a.MSG_TYPE.POLL_CREATION,kind:a.MsgKind.PollCreation,pollName:y,pollOptions:null,pollSelectableOptionsCount:null}),contextInfo:I}}const T=null===(n=r.messageContextInfo)||void 0===n?void 0:n.messageSecret;if(E&&null==T)throw new o.MessageSecretErrorsWamEvent({messageSecretAllowedList:d.MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:p.MESSAGE_SECRET_ERROR_TYPE.MISSING_MESSAGE_SECRET}).commit(),new u.PollCreationValidationError(u.PollCreationValidationErrorCode.MISSING_MESSAGE_SECRET,c.E2E_FAILURE_REASON.MISSING_MESSAGE_SECRET);if(E&&32!==(null==T?void 0:T.byteLength))throw new o.MessageSecretErrorsWamEvent({messageSecretAllowedList:d.MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:p.MESSAGE_SECRET_ERROR_TYPE.WRONG_LENGTH}).commit(),new u.PollCreationValidationError(u.PollCreationValidationErrorCode.INVALID_MESSAGE_SECRET,c.E2E_FAILURE_REASON.MESSAGE_SECRET_INVALID);if(null==S)throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.MISSING_OPTIONS,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==v)throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.MISSING_SELECTABLE_OPTIONS_COUNT,c.E2E_FAILURE_REASON.INVALID_MESSAGE);const b=new Set,M=S.map((e=>{let{optionName:t}=e;if(null==t||0===t.length||t.length>(0,l.getMaxPollOptionLengthForIncomingMessages)())throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.INVALID_OPTION,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(b.has(t))return __LOG__(3,void 0,void 0,!0,["polls"])`PollCreationValidationWarning: ${u.PollCreationValidationWarningCode.DUPLICATE_OPTIONS}`,SEND_LOGS(u.PollCreationValidationWarningCode.DUPLICATE_OPTIONS,1,"polls"),null;const n=b.size;return b.add(t),{name:t,localId:n}})).filter(Boolean);if(M.length<2||M.length>(0,l.getMaxPollOptionCount)())throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.INVALID_OPTIONS_COUNT,c.E2E_FAILURE_REASON.INVALID_MESSAGE);if(v<0||v>M.length)throw new u.PollCreationValidationError(u.PollCreationValidationErrorCode.INVALID_SELECTABLE_OPTIONS_COUNT,c.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},f),{},{type:a.MSG_TYPE.POLL_CREATION,kind:a.MsgKind.PollCreation,pollName:y,pollOptions:M,pollSelectableOptionsCount:v}),contextInfo:I}};var i=r(n(81109)),o=n(63020),a=n(73602),s=r(n(48780)),l=n(17703),u=n(67550),c=n(57095),d=n(78833),p=n(67948)},65563:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{pollUpdateMessage:r}=t;if(!r)return null;const{$$unknownFieldCount:c=0,vote:d,senderTimestampMs:p,pollCreationMessageKey:f}=r;if(c>0)return null;if(null==f)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.MISSING_POLL_MESSAGE_KEY,u.E2E_FAILURE_REASON.INVALID_MESSAGE);const _=(0,a.translateRegularMessageKeyToLocalReference)(f,n);if(null==_)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.MISSING_POLL_MESSAGE_KEY,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==p)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.MISSING_SENDER_TIMESTAMP,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==d)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.MISSING_UPDATE,u.E2E_FAILURE_REASON.INVALID_MESSAGE);const{encPayload:g,encIv:h}=d;if(null==g)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.MISSING_VOTE_ENC_PAYLOAD,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==h)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.MISSING_VOTE_ENC_IV,u.E2E_FAILURE_REASON.INVALID_MESSAGE);if(12!==h.byteLength)throw new l.PollUpdateValidationError(l.PollUpdateValidationErrorCode.INVALID_VOTE_ENC_IV,u.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.POLL_UPDATE,kind:s.MsgKind.PollVoteEncrypted,subtype:"poll_vote",addonEncrypted:!0,pollUpdateParentKey:_,encPollVote:{encPayload:g,encIv:h},senderTimestampMs:(0,o.numberOrThrowIfTooLarge)(p)}),contextInfo:null}};var i=r(n(81109)),o=n(22101),a=n(54468),s=n(73602),l=n(67550),u=n(57095)},67550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollVoteValidationErrorCode=t.PollVoteValidationError=t.PollUpdateValidationErrorCode=t.PollUpdateValidationError=t.PollCreationValidationWarningCode=t.PollCreationValidationErrorCode=t.PollCreationValidationError=void 0;var r=n(66911),i=n(22495);const o=n(76672)({DUPLICATE_OPTIONS:"poll_creation_duplicate_options"});t.PollCreationValidationWarningCode=o;const a=n(76672)({INVALID_MESSAGE_SECRET:"poll_creation_invalid_message_secret",INVALID_NAME:"poll_creation_invalid_name",INVALID_OPTIONS_COUNT:"poll_creation_invalid_options_count",INVALID_OPTION:"poll_creation_invalid_option",INVALID_SELECTABLE_OPTIONS_COUNT:"poll_creation_invalid_selectable_options_count",MISSING_MESSAGE_SECRET:"poll_creation_missing_message_secret",MISSING_NAME:"poll_creation_missing_name",MISSING_OPTIONS:"poll_creation_missing_options",MISSING_SELECTABLE_OPTIONS_COUNT:"poll_creation_missing_selectable_options_count"});t.PollCreationValidationErrorCode=a;class s extends i.MessageValidationError{constructor(){super(...arguments),this.name="PollCreationValidationError"}}t.PollCreationValidationError=s;const l=n(76672)({INVALID_VOTE_ENC_IV:"poll_update_invalid_vote_enc_iv",MISSING_POLL_MESSAGE_KEY:"poll_update_missing_poll_message_key",MISSING_SENDER_TIMESTAMP:"poll_update_missing_sender_timestamp",MISSING_UPDATE:"poll_update_missing_update",MISSING_VOTE_ENC_IV:"poll_update_missing_vote_enc_iv",MISSING_VOTE_ENC_PAYLOAD:"poll_update_missing_vote_enc_payload",MESSAGE_STANZA_INVALID:"poll_update_message_stanza_invalid"});t.PollUpdateValidationErrorCode=l;class u extends i.MessageValidationError{constructor(){super(...arguments),this.name="PollUpdateValidationError"}}t.PollUpdateValidationError=u;const c=n(76672)({INVALID_MESSAGE_SECRET:"poll_vote_invalid_message_secret",INVALID_OPTION:"poll_vote_invalid_option",INVALID_OPTIONS_COUNT:"poll_vote_invalid_options_count",OPTION_NOT_FOUND:"poll_vote_option_not_found"});t.PollVoteValidationErrorCode=c;class d extends((0,r.customError)("PollVoteValidationError")){constructor(e){super(e),this.code=e}}t.PollVoteValidationError=d},6431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addEncryptedColumn:s,addIndex:l}=(0,o.columnBuilder)(e.config);e.add("poll-votes").version((0,i.pollVotesCreateTable)(),[n(["parentMsgKey","sender"]),t("msgKey"),l("parentMsgKey"),s("selectedOptionLocalIds",a.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),t("senderTimestampMs"),t("ack"),t("t"),t("read")]).version((0,i.pollVotesAddMsgKeyIndex)(),[l("msgKey")]).view((e=>e))},t.getTable=function(){return(0,r.getStorage)().table("poll-votes")};var r=n(74557),i=n(20746),o=n(65717),a=n(8065)},79038:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOptionLocalIdMap=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(65982),a=r(n(49619));function s(){return(s=(0,i.default)((function*(e){const t=yield Promise.all(e.map(function(){var e=(0,i.default)((function*(e){const t=yield l(e);return{hash:t,hexHash:(0,o.toHex)(new Uint8Array(t)),localId:e.localId}}));return function(){return e.apply(this,arguments)}}())),n=new Map,r=new Map;for(const{hash:e,hexHash:i,localId:o}of t)n.set(i,o),r.set(o,e);return{getLocalIdForHexHash:e=>(0,a.default)(n.get(e),"hexHashesToLocalIds.get(hexHash)"),getLocalIdForHash:e=>(0,a.default)(n.get((0,o.toHex)(new Uint8Array(e))),"hexHashesToLocalIds.get(toHex(new Uint8Array(hash)))"),getHashForLocalId:e=>(0,a.default)(r.get(e),"localIdsToHexHashes.get(localId)"),includesHashes:e=>e.every((e=>n.has((0,o.toHex)(new Uint8Array(e)))))}}))).apply(this,arguments)}function l(e){return self.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e.name))}},61529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVoteKey=function(e){let{parentMsgKey:t,sender:n}=e;const o=(0,i.createWidFromWidLike)(n);return String(t)+"|"+String((0,r.normalizeWidToLid)(o))+"|"+String((0,r.normalizeWidToPn)(o))};var r=n(41843),i=n(51017)},32528:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.protobufFromVote=function(){return l.apply(this,arguments)},t.voteFromProtobuf=function(e){let{voteProtobuf:t,pollVoteMsgKey:n,parentMsgKey:r,sender:i,senderTimestampMs:s,t:l,optionLocalIdMap:u,ack:c,read:d}=e;return{msgKey:n,parentMsgKey:(0,a.default)(r,"parentMsgKey"),selectedOptionLocalIds:t.selectedOptions.map(u.getLocalIdForHash),senderTimestampMs:(0,o.numberOrThrowIfTooLarge)(s),t:(0,o.maybeNumberOrThrowIfTooLarge)(l),sender:i,ack:c,read:d}};var i=r(n(48926)),o=n(22101),a=r(n(49619)),s=n(79038);function l(){return(l=(0,i.default)((function*(e,t){const n=yield(0,s.createOptionLocalIdMap)(t),r=e.selectedOptionLocalIds.map(n.getHashForLocalId);return{selectedOptions:0===r.length?null:r}}))).apply(this,arguments)}},45997:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pollVoteMsgDataToVoteData=function(e){return{msgKey:e.id,parentMsgKey:e.pollUpdateParentKey,selectedOptionLocalIds:e.selectedOptionLocalIds,senderTimestampMs:e.senderTimestampMs,t:(0,a.getT)(e),sender:(0,c.toUserWid)((0,i.default)((0,a.getSender)(e),"getSender(msgData)")),ack:(0,a.getAck)(e),read:(0,u.isMeAccount)(e.from)||e.read}},t.voteDataToPollVoteMsgData=function(e){var t,n,r;const{from:i,to:a,author:u}=(0,s.msgKeyToTargetInfo)(e.msgKey,o.TranslateMsgKeyType.Addon);return{id:e.msgKey,to:a,from:i,author:u,type:l.MSG_TYPE.POLL_UPDATE,kind:l.MsgKind.PollVoteDecrypted,pollUpdateParentKey:e.parentMsgKey,selectedOptionLocalIds:e.selectedOptionLocalIds,senderTimestampMs:e.senderTimestampMs,t:null!==(t=e.t)&&void 0!==t?t:void 0,ack:null!==(n=e.ack)&&void 0!==n?n:void 0,read:null!==(r=e.read)&&void 0!==r&&r}};var i=r(n(49619)),o=n(54468),a=n(26368),s=n(97087),l=n(73602),u=n(3885),c=n(51017)},72239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptVote=function(e){return g(e).catch((t=>{if((0,u.isMatFullyEnabled)()&&e.pollCreationOriginalSender.isUser()){const t=(0,s.getAlternateUserWid)(e.pollCreationOriginalSender);if(null!=t)return g((0,o.default)((0,o.default)({},e),{},{pollCreationOriginalSender:(0,f.toUserWid)(t)}))}throw t})).catch((e=>{throw new l.MessageSecretErrorsWamEvent({messageSecretAllowedList:d.MESSAGE_SECRET_ALLOWED_TYPE.MESSAGE_POLL,messageSecretError:p.MESSAGE_SECRET_ERROR_TYPE.DECRYPTION_ERROR}).commit(),e}))};var i=r(n(48926)),o=r(n(81109)),a=n(53965),s=n(42247),l=n(63020),u=n(463),c=n(77026),d=n(78833),p=n(67948),f=n(51017),_=n(33655);function g(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){const t={type:"poll_vote",encryptedAddOn:e.encryptedVote},n=yield(0,a.decryptAddOn)(t,{messageSecret:e.messageSecret,iv:e.iv,stanzaId:e.stanzaId,originalMessageSender:e.pollCreationOriginalSender,addOnSender:e.voteSender});return(0,_.decodeProtobuf)(c.Message$PollVoteMessageSpec,n)}))).apply(this,arguments)}},17703:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.arePollsFastFollowsEnabled=c,t.arePollsNotificationsEnabled=function(){return(0,i.getABPropConfigValue)("polls_notification_enabled")},t.getMaxPollNameLength=function(){return Math.min((0,i.getABPropConfigValue)("poll_name_length"),500)},t.getMaxPollNameLengthForIncomingMessages=function(){return 5e3},t.getMaxPollOptionCount=function(){return Math.min((0,i.getABPropConfigValue)("poll_option_count"),20)},t.getMaxPollOptionLength=function(){return Math.min((0,i.getABPropConfigValue)("poll_option_length"),255)},t.getMaxPollOptionLengthForIncomingMessages=function(){return 2500},t.isPollResultDetailsViewEnabled=function(){return(0,i.getABPropConfigValue)("poll_result_details_view_enabled")},t.isPollsCancelationPromptEnabled=function(){return c()},t.isPollsChatlistPreviewEnabled=function(){return c()},t.isPollsCreationEnabledInCags=u,t.isPollsReceivingEnabledInCags=function(){if(u())return!0;return(0,i.getABPropConfigValue)("poll_receiving_cag_enabled")},t.isPrefillPollQuestionEnabled=function(){return c()},t.isSingleOptionPollsReceivingEnabled=function(e){return d(e)||(0,i.getABPropConfigValue)("polls_single_option_receiver_control_enabled")},t.isSingleOptionPollsSendingEnabled=d;var i=n(83741),o=n(43744),a=n(88504),s=n(89358),l=r(n(27112));function u(){return!((0,o.isSMB)()&&!(0,i.getABPropConfigValue)("parent_group_view_enabled_for_smb_on_web"))&&(!!(0,s.primaryFeatureEnabled)("poll_creation_cag")&&(0,i.getABPropConfigValue)("poll_creation_cag_enabled"))}function c(){return(0,i.getABPropConfigValue)("polls_fast_follow_enabled")}function d(e){return!0===l.default.isNewsletter(e)?(0,a.isNewsletterPollsSingleOptionEnabled)():(0,i.getABPropConfigValue)("polls_single_option_control_enabled")||(0,i.getABPropConfigValue)("polls_single_option_sender_control_enabled")}},90157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,r.getStorage)().add("premium-message").version((0,i.premiumMessageCreateTable)(),[s("id"),a("name"),a("type"),a("message"),a("isDeleted"),a("mediaId"),a("sentMessageIds")]).view((e=>e))},t.getPremiumMessageTable=function(){return(0,r.getStorage)().table("premium-message")};var r=n(74557),i=n(20746),o=n(65717);const{addColumn:a,addUserDefinedPrimaryKey:s}=(0,o.columnBuilder)()},32141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllUserDisclosures=function(){return(0,o.createNonPersistedJob)("getAllUserDisclosures",(()=>(0,i.queryAllUserDisclosures)()),{priority:r.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()};var r=n(75419),i=n(58076),o=n(51280)},58076:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAllUserDisclosures=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(90400),a=n(29987),s=n(91563);function l(){return(l=(0,i.default)((function*(){const e=(0,a.unixTime)(),t=yield(0,o.sendGetDisclosuresRPC)({getUserDisclosuresT:e});switch(t.name){case"GetDisclosuresResponseClientSuccess":return t.value.notice;case"GetDisclosuresResponseClientError":{const{code:e,text:n}=t.value.errorIQErrorBadRequestMixin;throw new s.ServerStatusCodeError(Number(e),n)}case"GetDisclosuresResponseServerError":{const{code:e,text:n}=t.value.errorIQErrorInternalServerErrorMixin;throw new s.ServerStatusCodeError(Number(e),n)}}}))).apply(this,arguments)}},67010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUserDisclosureStage=function(e,t){return(0,i.createNonPersistedJob)("setUserDisclosureStage",(()=>(0,o.SetUserDisclosureStageQueryJob)(e,t)),{priority:r.JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()};var r=n(75419),i=n(51280),o=n(23633)},23633:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SetUserDisclosureStageQueryJob=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(82725),a=n(91563),s=n(81232);const l={5:"ACCEPTED","-1":"UNKNOWN"};function u(){return(u=(0,i.default)((function*(e,t){const n=yield(0,o.sendSetRPC)({stageMixinArgs:{noticeId:e,noticeStage:t}});switch(n.name){case"SetResponseSuccess":{const n=l[t];return s.TosManager.setState(e.toString(),n),Promise.resolve(!0)}case"SetResponseClientError":{const{code:e,text:t}=n.value.errorIQErrorBadRequestMixin;throw new a.ServerStatusCodeError(Number(e),t)}case"SetResponseServerError":{const{code:e,text:t}=n.value.errorIQErrorInternalServerErrorMixin;throw new a.ServerStatusCodeError(Number(e),t)}}}))).apply(this,arguments)}},76673:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDisclosuresAction=function(){return s.apply(this,arguments)};var i=r(n(48926)),o=n(32141),a=n(73850);function s(){return(s=(0,i.default)((function*(){const e=(yield(0,o.getAllUserDisclosures)()).map((e=>({id:e.id.toString(),state:5===e.stage})));return{refresh:a.DEFAULT_TOS_REFRESH_INTERVAL,notice:e}}))).apply(this,arguments)}},3557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acceptUserDisclosureAction=function(e){return(0,r.setUserDisclosureStage)(e,5)};var r=n(67010)},65765:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{orderMessage:r}=t;if(null==r)return;const{thumbnail:l,message:u,orderId:c,itemCount:d,status:p,surface:f,sellerJid:_,orderTitle:g,token:h,totalAmount1000:A,totalCurrencyCode:m,contextInfo:E}=r;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:s.MSG_TYPE.ORDER,kind:s.MsgKind.Order,thumbnail:(0,a.decodeBytes)(l),message:u||"",orderId:c,itemCount:d||0,status:p,surface:f,sellerJid:_,orderTitle:g||"",token:h||"",totalAmount1000:(0,o.numberOrThrowIfTooLarge)(null!=A?A:0),totalCurrencyCode:m,body:""}),contextInfo:E}};var i=r(n(81109)),o=n(22101),a=n(57305),s=n(73602)},65643:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{productMessage:l}=t;if(null==l)return;const{product:u,businessOwnerJid:c,body:d,footer:p,contextInfo:f}=l;if(null==u)return;const{productImage:_,productId:g,currencyCode:h,priceAmount1000:A,salePriceAmount1000:m,retailerId:E,url:y,productImageCount:S,title:v,description:I}=u;let T={};if(null!=_){const e=(0,s.default)({messageProtobuf:{imageMessage:_},baseMessage:n,msgContext:r});if(null!=e){const{msgData:t}=e;T={deprecatedMms3Url:t.deprecatedMms3Url,directPath:t.directPath,staticUrl:t.staticUrl,mimetype:t.mimetype,filehash:t.filehash,encFilehash:t.encFilehash,size:t.size,height:t.height,width:t.width,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp,body:t.body,interactiveAnnotations:t.interactiveAnnotations,scanLengths:t.scanLengths,scansSidecar:t.scansSidecar,isViewOnce:t.isViewOnce,thumbnailDirectPath:t.thumbnailDirectPath,thumbnailSha256:t.thumbnailSha256,thumbnailEncSha256:t.thumbnailEncSha256}}}return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.PRODUCT,kind:a.MsgKind.Product,businessOwnerJid:c,productId:g,currencyCode:h,priceAmount1000:(0,o.numberOrThrowIfTooLarge)(null!=A?A:0)||void 0,salePriceAmount1000:(0,o.numberOrThrowIfTooLarge)(null!=m?m:0)||void 0,retailerId:E,url:y,productImageCount:S,title:v,description:I,caption:d,footer:p},T),contextInfo:f}};var i=r(n(81109)),o=n(22101),a=n(73602),s=r(n(96259))},25628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPLIANCE_INFO_LENGTH=t.COMPLIANCE_INFO_CODES=void 0;t.COMPLIANCE_INFO_CODES={INDIA:"IN"};t.COMPLIANCE_INFO_LENGTH={ENTITY_NAME:1024,ENTITY_TYPE_CUSTOM:1024,EMAIL:256,GRIEVANCE_OFFICER_NAME:256,LANDLINE_NUMBER:20,MOBILE_NUMBER:20,IMPORTER_NAME:1024,STREET1:1024,STREET2:1024,CITY:1024,REGION:1024,POSTAL_CODE:12}},49755:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_PRODUCT_TOKEN=void 0;t.INVALID_PRODUCT_TOKEN="DELETED"},90002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductComplianceCategory=t.ProductAvailability=t.PRODUCT_PAGE_SIZE=t.PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES=void 0,t.asProductReviewType=function(e){if("APPROVED"===e||"PENDING"===e||"REJECTED"===e)return e};const r=n(76672)({IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",AVAILABLE_FOR_ANOTHER_POSTCODE:"available for another postcode",UNKNOWN:"unknown"});t.ProductAvailability=r;const i=[r.OUT_OF_STOCK,r.AVAILABLE_FOR_ANOTHER_POSTCODE];t.PRODUCT_AVAILABILITY_UNAVAILABLE_VALUES=i;t.PRODUCT_PAGE_SIZE=6;const o=n(76672)({Default:"DEFAULT",CountryOriginExempt:"COUNTRY_ORIGIN_EXEMPT"});t.ProductComplianceCategory=o},8701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfilePicCommand=t.PP_URL=t.PP_TOK=t.PP_REF=void 0;const r=`${n(28123).DYN_ORIGIN}pp`;t.PP_URL=r;t.PP_REF="/pp";t.PP_TOK="/pp";const i=n(76672).Mirrored(["Remove","Set"]);t.ProfilePicCommand=i},8248:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;let{messageProtobuf:r,baseMessage:l}=e;const{protocolMessage:u}=r;if(null==u)return;if(u.type!==s.Message$ProtocolMessage$Type.EPHEMERAL_SETTING)return;let c;null!=u.disappearingMode&&(c=(0,o.protoToDisappearingMode)(l,u.disappearingMode));return{msgData:(0,i.default)((0,i.default)({},l),{},{type:a.MSG_TYPE.PROTOCOL,kind:a.MsgKind.Protocol,subtype:"ephemeral_setting",ephemeralDuration:u.ephemeralExpiration,disappearingModeTrigger:null===(t=c)||void 0===t?void 0:t.disappearingModeTrigger,disappearingModeInitiatedByMe:null===(n=c)||void 0===n?void 0:n.initiatedByMe}),contextInfo:void 0}};var i=r(n(81109)),o=n(54468),a=n(73602),s=n(77026)},40647:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r,msgContext:l}=e;const{protocolMessage:u}=n;if(null==u)return;if("relay"!==l)return;if(u.type!==s.Message$ProtocolMessage$Type.HISTORY_SYNC_NOTIFICATION)return;const{historySyncNotification:c}=u;if(null==c)return;const d={directPath:c.directPath,encFilehash:(0,o.decodeBytes)(c.fileEncSha256),filehash:(0,o.decodeBytes)(c.fileSha256),mediaKey:(0,o.decodeBytes)(c.mediaKey),type:"md-msg-hist"};return{msgData:(0,i.default)((0,i.default)({},r),{},{type:a.MSG_TYPE.PROTOCOL,kind:a.MsgKind.Protocol,subtype:"history_sync_notification",historySyncMetaData:{historySyncNotification:c,downloadOptions:d,progress:(null==u||null===(t=u.historySyncNotification)||void 0===t?void 0:t.progress)||0}}),contextInfo:void 0}};var i=r(n(81109)),o=n(57305),a=n(73602),s=n(77026)},11371:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{protocolMessage:r}=t;if(null==r)return;if(r.type!==a.Message$ProtocolMessage$Type.SHARE_PHONE_NUMBER)return;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:o.MSG_TYPE.PROTOCOL,kind:o.MsgKind.Protocol,subtype:"share_phone_number"}),contextInfo:void 0}};var i=r(n(81109)),o=n(73602),a=n(77026)},17228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},63828:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{audioMessage:d}=t;if(null==d)return;const{ptt:p}=d;if(!0===p)return;const{contextInfo:f}=d,{directPath:_,mimetype:g,seconds:h,mediaKeyTimestamp:A,streamingSidecar:m,waveform:E,backgroundArgb:y,viewOnce:S}=d,{mediaKey:v,fileSha256:I,fileEncSha256:T,fileLength:b,url:M}=(0,u.getValidatedMediaMessageProperties)(d,n,r,c.MSG_TYPE.AUDIO),P=(0,i.default)((0,i.default)({},n),{},{type:c.MSG_TYPE.AUDIO,kind:c.MsgKind.Audio,deprecatedMms3Url:(0,l.decodeUrl)(M),directPath:_,mimetype:g,filehash:(0,l.decodeBytes)(I),encFilehash:(0,l.decodeBytes)(T),size:b,duration:`${h||0}`,mediaKey:(0,l.decodeBytes)(v),mediaKeyTimestamp:null!=A?(0,o.numberOrThrowIfTooLarge)(A):(0,a.unixTime)(),streamingSidecar:m,waveform:E&&(0,s.validateWaveform)(E)?new Uint8Array(E):void 0,backgroundColor:y,isViewOnce:!0===S});return(0,l.validateRequiredMediaProperties)(P,d),(0,s.validateRequiredAudioProperties)(P,d),{msgData:P,contextInfo:f}};var i=r(n(81109)),o=n(22101),a=n(29987),s=n(28594),l=n(57305),u=n(70643),c=n(73602)},93729:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{audioMessage:d}=t;if(null==d)return;const{ptt:p}=d;if(!0!==p)return;const{contextInfo:f}=d,{directPath:_,mimetype:g,seconds:h,mediaKeyTimestamp:A,streamingSidecar:m,waveform:E,backgroundArgb:y,viewOnce:S}=d,{mediaKey:v,fileSha256:I,fileEncSha256:T,fileLength:b,url:M}=(0,u.getValidatedMediaMessageProperties)(d,n,r,c.MSG_TYPE.PTT),P=(0,i.default)((0,i.default)({},n),{},{type:c.MSG_TYPE.PTT,kind:c.MsgKind.Ptt,deprecatedMms3Url:(0,l.decodeUrl)(M),directPath:_,mimetype:g,filehash:(0,l.decodeBytes)(I),encFilehash:(0,l.decodeBytes)(T),size:b,duration:`${h||0}`,mediaKey:(0,l.decodeBytes)(v),mediaKeyTimestamp:null!=A?(0,o.numberOrThrowIfTooLarge)(A):(0,a.unixTime)(),streamingSidecar:m,waveform:E&&(0,s.validateWaveform)(E)?new Uint8Array(E):void 0,backgroundColor:y,isViewOnce:!0===S});return(0,l.validateRequiredMediaProperties)(P,d),(0,s.validateRequiredAudioProperties)(P,d),{msgData:P,contextInfo:f}};var i=r(n(81109)),o=n(22101),a=n(29987),s=n(28594),l=n(57305),u=n(70643),c=n(73602)},76424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},59324:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{ptvMessage:r}=t;if(null==r)return;if(!(0,c.isPtvReceivingEnabled)())return{msgData:(0,i.default)((0,i.default)({},n),{},{type:u.MSG_TYPE.UNKNOWN,kind:u.MsgKind.Unknown,futureproofType:u.MSG_TYPE.PTV}),contextInfo:null==r?void 0:r.contextInfo};const{url:d,directPath:p,staticUrl:f,mimetype:_,caption:g,fileSha256:h,fileEncSha256:A,fileLength:m,height:E,width:y,mediaKey:S,mediaKeyTimestamp:v,jpegThumbnail:I,interactiveAnnotations:T,viewOnce:b,thumbnailDirectPath:M,thumbnailSha256:P,thumbnailEncSha256:C,contextInfo:O,gifPlayback:R,gifAttribution:N,seconds:w,streamingSidecar:D}=r,L=(0,i.default)((0,i.default)({},n),{},{type:u.MSG_TYPE.PTV,kind:u.MsgKind.Ptv,deprecatedMms3Url:(0,s.decodeUrl)(d),directPath:p,staticUrl:f||"",mimetype:_,caption:(0,l.convertToTextWithoutSpecialEmojis)(g),filehash:(0,s.decodeBytes)(h),encFilehash:(0,s.decodeBytes)(A),size:(0,o.numberOrThrowIfTooLarge)(m||0),height:E,width:y,mediaKey:(0,s.decodeBytes)(S),mediaKeyTimestamp:null!=v?(0,o.numberOrThrowIfTooLarge)(v):(0,a.unixTime)(),duration:`${w||0}`,body:(0,s.decodeBytes)(I)||"",interactiveAnnotations:T,isViewOnce:!0===b,thumbnailDirectPath:M,thumbnailSha256:(0,s.decodeBytes)(P),thumbnailEncSha256:(0,s.decodeBytes)(C),isGif:R,gifAttribution:N,streamingSidecar:D});return(0,s.validateRequiredMediaProperties)(L,r),{msgData:L,contextInfo:O}};var i=r(n(81109)),o=n(22101),a=n(29987),s=n(57305),l=n(54468),u=n(73602),c=n(56302)},56302:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPtvAutoplayLoopLimit=function(){const e=(0,r.getABPropConfigValue)("ptv_autoplay_loop_limit");return 0===e?1/0:e},t.getPtvMaxDurationSeconds=function(){return(0,r.getABPropConfigValue)("ptv_max_duration_seconds")},t.isPtvAutoplayEnabled=function(){return(0,r.getABPropConfigValue)("ptv_autoplay_enabled")},t.isPtvReceivingEnabled=function(){return(0,r.getABPropConfigValue)("ptv_receiving_enabled")},t.isPtvSendingEnabled=function(){return(0,r.getABPropConfigValue)("ptv_sending_enabled")};var r=n(83741)},16199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeQuickPromotionActionMutation=function(e){if(!(0,a.qpGraphQLEnabled)())return Promise.resolve({type:"not-enabled"});const t=s.KNOWN_QP_SURFACES.get(e.surface_nux_id);if(null==t||!(0,a.qpSurfaceIdsUsingGraphQL)().has(t))return Promise.resolve({type:"not-enabled"});return(0,u.createNonPersistedJob)("quickPromotionActionMutation",(()=>function(e){return(0,o.promiseTimeout)(function(e){return(0,l.fetchToken)().then((t=>"success"===t.type?function(e,t){return(0,c.commitMutation)(p,{input:e},{environmentType:"facebook",accessToken:t}).then((e=>null==e||null==e.wa_quick_promotion_log_event?d:{type:"success"})).catch((e=>(0,l.hasGraphQLAuthError)(e)?{type:"auth-failure"}:d))}(e,t.token).then((e=>("auth-failure"===e.type?(0,l.markTokenAsInvalid)():e.type,e))):(t.type,t)))}(e),s.QP_ACTION_MUTATION_TIMEOUT_MS).then((e=>"success"===e.type?(__LOG__(2)`executeQuickPromotionActionMutation: success`,e):(e.type,__LOG__(3)`executeQuickPromotionActionMutation: failed as "${e.type}"`,e))).catch((e=>{if(e instanceof i.TimeoutError)return __LOG__(3)`executeQuickPromotionActionMutation: failed as "timeout"`,{type:"timeout"};throw e}))}(e))).waitUntilCompleted()};var r,i=n(66911),o=n(77689),a=n(56660),s=n(81204),l=n(37006),u=n(51280),c=n(69481);const d={type:"error"},p=void 0!==r?r:r=n(40222)},40222:(e,t,n)=>{"use strict";var r,i,o={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"WAWebQuickPromotionActionMutation",selections:i=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"WaQuickPromotionLogEventResponsePayload",kind:"LinkedField",name:"wa_quick_promotion_log_event",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"WAWebQuickPromotionActionMutation",selections:i},params:{id:n(53721),metadata:{},name:"WAWebQuickPromotionActionMutation",operationKind:"mutation",text:null}};e.exports=o},89555:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createGetReactionTimestamp=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=r(n(49619)),a=n(12554),s=n(86725),l=n(26368),u=n(73602);function c(e){return[e.reactionParentKey,(0,o.default)((0,l.getSender)(e),"getSender(msgData)")]}function d(e){return c(e).map((e=>e.toString())).join("-")}function p(){return(p=(0,i.default)((function*(e){const t=new Map,n=e.map(c),r=yield a.addonDBTable.bulkGetByParentAndSender(u.MSG_TYPE.REACTION,n);for(const e of r){const n=(0,s.assertReactionMsgData)(e),r=d(n);t.set(r,n.reactionTimestamp)}return e=>{const n=d(e);return t.get(n)}}))).apply(this,arguments)}},57069:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(49619)),a=n(83741),s=n(45414),l=n(21130),u=n(93040),c=n(1619),d=n(64071),p=n(73602),f=n(89555),_=n(61515),g=n(21714),h=n(98554),A=n(86850),m=n(69785);var E,y,S,v,I,T,b=(0,l.createAddonMsgProcessorDualEncrypted)({isEnabled:()=>(0,a.getABPropConfigValue)("unified_reaction_addon_infra_enabled"),convert:{fromHistorySyncMsg:(T=(0,i.default)((function*(e){return(0,A.parseWebMsgInfoReaction)(e.webMsgInfo,e.parsedWebMsgInfo).map((e=>(0,_.reactionRowToReactionMsgData)((0,_.webMsgInfoReactionTypeToReactionsRow)(e))))})),function(){return T.apply(this,arguments)}),toDualEncryptedMsgData:(I=(0,i.default)((function*(e,t){return e.kind===p.MsgKind.ReactionEncrypted?e:(0,g.encryptReactionMsgData)(e,t)})),function(){return I.apply(this,arguments)}),toDualDecryptedMsgData:(v=(0,i.default)((function*(e,t){return e.kind===p.MsgKind.ReactionDecrypted?e:(0,h.decryptReactionMsgData)(e,t)})),function(){return v.apply(this,arguments)})},parentKey_DEPRECATED:"reactionParentKey",updateCollection:(S=(0,i.default)((function*(e){yield(0,c.frontendSendAndReceive)("updateReactionCollection",{msgs:e.add,removeReactions:e.remove})})),function(){return S.apply(this,arguments)}),beforeUpsert:(y=(0,i.default)((function*(e,t){const n=[],r=[];for(const t of e)t.kind===p.MsgKind.ReactionEncrypted?r.push(t):t.kind===p.MsgKind.ReactionDecrypted&&n.push(t);yield Promise.allSettled(r.map((e=>(0,h.decryptReactionMsgData)(e,(0,o.default)(t.get(e.targetMessageKey.toString()),"parents.get(encRection.targetMessageKey.toString())"))))).then((e=>{for(const t of e)"fulfilled"===t.status&&null!=t.value?n.push(t.value):__LOG__(2)`Cannot decrypt reaction: ${t.reason}`;e.some((e=>"rejected"===e.status))&&(__LOG__(3,void 0,void 0,!0,["messaging","addons"])`Failed decrypted enc reactions`,SEND_LOGS("decrypt-enc-reaction-failed",.1,"messaging","addons"))}));const i=yield(0,f.createGetReactionTimestamp)(n),a=n.filter((e=>{const t=i(e);return null==t||t<e.reactionTimestamp}));return Promise.resolve({result:a,upsert:a})})),function(){return y.apply(this,arguments)}),afterUpsert:(E=(0,i.default)((function*(e,t){if(t.mode===s.AddonProcessMode.HistorySync)return;const r=yield(0,m.filterChatsWithAddOnPreviewUpdates)(e.map((e=>(0,d.lastAddOnPreviewCandidateFromReactionRowType)((0,_.reactionMsgDataToReactionRow)(e)))));if(r.size>0&&(yield(0,u.bulkUpdateChatLastAddOnPreview)(r),(0,c.frontendFireAndForget)("updateChatLastAddOnPreview",{chatMap:r})),t.mode===s.AddonProcessMode.OnlineReceive){const{markFutureproofMessagesReparsed:t}=n(58351);yield t(e.map((e=>e.id.toString())))}})),function(){return E.apply(this,arguments)})});t.default=b},21714:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptReactionMsgData=function(){return f.apply(this,arguments)};var i=r(n(81109)),o=r(n(48926)),a=r(n(49619)),s=n(53965),l=n(1619),u=n(26368),c=n(73602),d=n(75784),p=n(51017);function f(){return(f=(0,o.default)((function*(e,t){const n=yield(0,l.frontendSendAndReceive)("getGroupMetadata",{groupWid:e.id.remote});if(Boolean(null==n?void 0:n.isIncognitoCag)){const n=self.crypto.getRandomValues(new Uint8Array(12)),r={type:"reaction",encode:{text:e.reactionText,senderTimestampMs:e.reactionTimestamp}},o=yield(0,s.encryptAddOn)(r,{messageSecret:(0,a.default)(t.messageSecret,"Parent message missing message secret"),iv:n,stanzaId:e.id.id,originalMessageSender:(0,a.default)((0,u.getOriginalSender)(t),"getOriginalSender(parentMsg)"),addOnSender:(0,p.toUserWid)((0,a.default)((0,u.getSender)(e),"getSender(reaction)"))});return(0,i.default)((0,i.default)({},(0,d.msgDataToBaseMsgInfo)(e)),{},{type:c.MSG_TYPE.REACTION_ENC,kind:c.MsgKind.ReactionEncrypted,targetMessageKey:t.id,encPayload:o,encIv:n.buffer})}return e}))).apply(this,arguments)}},98554:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptReactionMsgData=function(){return S.apply(this,arguments)},t.parseEncReaction=E;var i=r(n(81109)),o=r(n(48926)),a=n(22101),s=r(n(49619)),l=n(53965),u=n(54468),c=n(26368),d=n(73602),p=n(77026),f=n(66450),_=n(56074),g=n(91229),h=n(57095),A=n(51017),m=n(33655);function E(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e){const t={type:"reaction",encryptedAddOn:e.encryptedReaction},n=yield(0,l.decryptAddOn)(t,{messageSecret:e.messageSecret,iv:e.iv,stanzaId:e.stanzaId,originalMessageSender:e.originalMessageSender,addOnSender:e.reactionSender});return(0,m.decodeProtobuf)(p.Message$ReactionMessageSpec,n)}))).apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e,t){var n;const{targetMessageKey:r,encIv:o,encPayload:l}=e,{messageSecret:p}=t;if(null==p)throw __LOG__(2,void 0,void 0,void 0,["messaging"])`convertEncReactionToReaction: parent msg ${r.id} secret is missing`,new f.ReactionEncMessageValidationError(f.ReactionEncValidationErrorCode.MISSING_MESSAGE_SECRET,h.E2E_FAILURE_REASON.INVALID_MESSAGE,{sendLogs:0});const m=(0,c.getOriginalSender)(t);if(null==m)throw new f.ReactionEncMessageValidationError(f.ReactionEncValidationErrorCode.MISSING_PARENT_MESSAGE_SENDER,h.E2E_FAILURE_REASON.INVALID_MESSAGE);const y={encryptedReaction:l,messageSecret:p,iv:o,stanzaId:t.id.id,originalMessageSender:m,reactionSender:(0,A.toUserWid)((0,s.default)((0,c.getSender)(e),"getSender(msgData)"))};let S;try{S=yield E(y)}catch(e){throw new f.ReactionEncMessageValidationError(f.ReactionEncValidationErrorCode.DECRYPTION_FAILED,h.E2E_FAILURE_REASON.INVALID_MESSAGE)}const v=null!==(n=(0,u.convertToTextWithoutSpecialEmojis)(S.text))&&void 0!==n?n:_.REVOKED_REACTION_TEXT,I=S.senderTimestampMs;if(null==I)throw new g.ReactionValidationError(g.ReactionValidationErrorCode.MISSING_TIMESTAMP,h.E2E_FAILURE_REASON.INVALID_MESSAGE);return(0,i.default)((0,i.default)({},e),{},{type:d.MSG_TYPE.REACTION,kind:d.MsgKind.ReactionDecrypted,reactionParentKey:r,reactionText:v,reactionTimestamp:(0,a.numberOrThrowIfTooLarge)(I),encPayload:void 0,encIv:void 0})}))).apply(this,arguments)}},96677:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.changeOrphanStateReactions=function(e){return(0,o.getStorage)().lock(["reactions"],function(){var t=(0,i.default)((function*(t){let[n]=t;const r=e.map((e=>[e,1])),i=yield(0,a.getReactionsTable)().anyOf(["parentMsgKey","orphan"],r);return i.forEach((e=>{e.orphan=0,e.orphanReason=void 0})),yield n.bulkCreateOrReplace(i),i}));return function(){return t.apply(this,arguments)}}())};var i=r(n(48926)),o=n(74557),a=n(24936)},58755:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateReactions=function(e){const t=new Map;return e.forEach((e=>{(0,u.isSerializedWidMe)(e.senderUserJid)&&(e.read=!0);const n=d(e),r=t.get(n);r?r.timestamp<=e.timestamp&&t.set(n,e):t.set(n,e)})),(0,l.getStorage)().lock(["reactions"],function(){var e=(0,i.default)((function*(e){let[n]=e;const r=[],i=[];Array.from(t.values()).forEach((e=>{if(i.push([e.parentMsgKey,e.senderUserJid]),(0,a.allowReferenceByAltJid)()){const t=(0,o.getAlternateUserWid)((0,c.createWid)(e.senderUserJid));null!=t&&i.push([e.parentMsgKey,t.toString()])}}));return(yield n.anyOf(["parentMsgKey","senderUserJid"],i)).forEach((e=>{const n=d(e),i=t.get(n);i&&(i.timestamp<=e.timestamp?t.delete(n):i.senderUserJid!==e.senderUserJid&&r.push([e.parentMsgKey,e.senderUserJid]))})),r.length>0&&(yield n.bulkRemove(r)),yield n.bulkCreateOrReplace(Array.from(t.values())),Array.from(t.values())}));return function(){return e.apply(this,arguments)}}())};var i=r(n(48926)),o=n(42247),a=n(33365),s=n(41843),l=n(74557),u=n(3885),c=n(51017);function d(e){const t=(0,c.createWid)(e.senderUserJid),n=String((0,s.normalizeWidToPn)(t)),r=String((0,s.normalizeWidToLid)(t));return`${e.parentMsgKey},${n},${r}`}},74260:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteReactionsByParentMessageKey=function(e){const t=[];return(0,o.getStorage)().lock(["reactions"],function(){var n=(0,i.default)((function*(n){let[r]=n;return(yield r.equals(["parentMsgKey"],e)).forEach((e=>t.push([e.parentMsgKey,e.senderUserJid]))),r.bulkRemove(t)}));return function(){return n.apply(this,arguments)}}())},t.deleteReactionsByParentMessageKeys=function(e){const t=[];return(0,o.getStorage)().lock(["reactions"],function(){var n=(0,i.default)((function*(n){let[r]=n;const i=yield r.anyOf(["parentMsgKey"],e);return i.forEach((e=>t.push([e.parentMsgKey,e.senderUserJid]))),yield r.bulkRemove(t),i.map((e=>e.msgKey))}));return function(){return n.apply(this,arguments)}}())},t.deleteReactionsByRecords=function(e){return(0,o.getStorage)().lock(["reactions"],function(){var t=(0,i.default)((function*(t){let[n]=t;yield n.bulkRemove(e)}));return function(){return t.apply(this,arguments)}}())};var i=r(n(48926)),o=n(74557)},91336:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.existsReactionAddressingModeInsensitive=function(){return A.apply(this,arguments)},t.getAllReactionsFromParentMsgs=function(e){return(0,u.getStorage)().lock(["reactions"],(t=>{let[n]=t;return n.anyOf(["parentMsgKey"],e)}))},t.getFilteredReactionsFromParentMsgs=function(){return h.apply(this,arguments)},t.getReactions=function(){return g.apply(this,arguments)};var i=r(n(48926)),o=n(42247),a=n(20112),s=n(33365),l=n(41843),u=n(74557),c=r(n(60001)),d=r(n(95432)),p=n(56074),f=n(24936),_=n(51017);function g(){return(g=(0,i.default)((function*(e){const t=yield(0,f.getReactionsTable)().equals(["parentMsgKey"],e),n={reactions:[],reactionByMe:null},r=new Map;t.forEach((e=>{const{reactionText:t,orphan:i}=e;if(t!==p.REVOKED_REACTION_TEXT&&1!==i){var o;const i=a.EmojiUtil.getEmojiAggregate(t),s=null!==(o=r.get(i))&&void 0!==o?o:[];r.set(i,[...s,e]);(0,d.default)(e.msgKey).fromMe&&(n.reactionByMe=e)}}));const i=n.reactionByMe?a.EmojiUtil.getEmojiAggregate(n.reactionByMe.reactionText):"";return r.forEach(((e,t)=>{let r=!1;t===i&&(r=!0),n.reactions.push({aggregateEmoji:t,senders:e,hasReactionByMe:r})})),n}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){const t=new Map;return yield(0,u.getStorage)().lock(["reactions"],function(){var n=(0,i.default)((function*(n){let[r]=n;(yield r.anyOf(["parentMsgKey"],e)).forEach((e=>{const{reactionText:n,orphan:r}=e;if(n!==p.REVOKED_REACTION_TEXT&&1!==r){var i;const n=null!==(i=t.get(e.parentMsgKey))&&void 0!==i?i:[];n.push(e),t.set(e.parentMsgKey,n)}}))}));return function(){return n.apply(this,arguments)}}()),t}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(e){let{parentMsgKey:t,senderUserJid:n}=e;if((0,s.allowReferenceByAltJid)()){var r,i;const e=[],a=null===(r=(0,l.getAlternateMsgKey)(c.default.from(t)))||void 0===r?void 0:r.toString(),s=null===(i=(0,o.getAlternateUserWid)((0,_.createWid)(n)))||void 0===i?void 0:i.toString(),u=[t,a].filter(Boolean),d=[n,s].filter(Boolean);for(const t of u)for(const n of d)e.push([t,n]);return(yield(0,f.getReactionsTable)().anyOf(["parentMsgKey","senderUserJid"],e,{limit:1}))[0]}return(0,f.getReactionsTable)().get([t,n])}))).apply(this,arguments)}},79441:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.reactionsAddOnProvider=void 0;var i=r(n(48926)),o=n(88930),a=n(52626),s=n(22666),l=n(73602),u=r(n(89482));const c={type:s.MessageAddOnType.Reaction,matches:e=>e.type===l.MSG_TYPE.REACTION,matchesFutureproof:e=>e.type===l.MSG_TYPE.UNKNOWN&&e.futureproofType===l.MSG_TYPE.REACTION,canRenderInUi:()=>!0,processOrphansForNewMsg:()=>(0,i.default)((function*(){throw(0,u.default)("Reactions not yet integrated into orphan framework")}))(),updateAcks:(e,t)=>(0,a.updateAddOnAcksForTable)("reactions",e,t),markAsRead:e=>(0,o.markAsReadForTable)("reactions",e.map(String))};t.reactionsAddOnProvider=c},66483:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.reactionsEncAddOnProvider=void 0;var i=r(n(48926)),o=n(86725),a=n(52253),s=n(20330),l=n(22666),u=n(73602);const c={type:l.MessageAddOnType.ReactionEnc,matches:e=>e.type===u.MSG_TYPE.REACTION_ENC,matchesFutureproof:e=>e.type===u.MSG_TYPE.UNKNOWN&&e.type===u.MSG_TYPE.REACTION_ENC,canRenderInUi:()=>!0,processOrphansForNewMsg:(e,t,n)=>(0,i.default)((function*(){return Promise.all(n.map(function(){var e=(0,i.default)((function*(e){const n=(0,o.assertReactionEncMsgData)(e.parsedMsgPayload),r=yield(0,s.convertEncReactionToReaction)(n);null!=r&&(yield(0,a.processReactionMsg)(r,t,!0))}));return function(){return e.apply(this,arguments)}}()))}))()};t.reactionsEncAddOnProvider=c},70867:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processReactionMsgs=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(93040),a=n(1619),s=n(58755),l=n(64071),u=n(56074),c=n(69785);function d(){return(d=(0,i.default)((function*(e){if(e.length>0){const t=yield(0,u.createReactionsRowFromMsg)(e),r=yield(0,s.createOrUpdateReactions)(t);(0,u.updateHasReactionFromParent)(r);const i=e.map((e=>e.id.toString())),{markFutureproofMessagesReparsed:d}=n(58351);yield d(i);const p=yield(0,c.filterChatsWithAddOnPreviewUpdates)(r.map((e=>(0,l.lastAddOnPreviewCandidateFromReactionRowType)(e))));yield(0,o.bulkUpdateChatLastAddOnPreview)(p),(0,a.frontendFireAndForget)("updateChatLastAddOnPreview",{chatMap:p})}}))).apply(this,arguments)}},42626:(e,t,n)=>{"use strict";var r=n(95318);t.D=void 0;var i=r(n(48926)),o=n(74260),a=n(89688),s=n(85074),l=r(n(60001));const u=(0,s.defineWebPersistedJob)().step("deleteReactions",(e=>{let{chatId:t,parentMsgKeys:n}=e;return __LOG__(2)`Persisted: deleteReaction persisted job started`,{chatId:t,parentMsgKeys:n}})).step("deleteReactionsFromReactionsTable",function(){var e=(0,i.default)((function*(e){let{chatId:t,parentMsgKeys:n}=e;const r=yield(0,o.deleteReactionsByParentMessageKeys)(n);return r||(__LOG__(2)`Persisted: Deleting reactions from Reactions table returned undefined, parentMsgKeys length ${n.length}`,[])}));return function(){return e.apply(this,arguments)}}()).finalStep("deleteReactionsFromMessageTable",function(){var e=(0,i.default)((function*(e,t){let{chatId:n,parentMsgKeys:r}=t;const i=[];return e||__LOG__(2)`Persisted: Deleting reactions from Msg table, reactionMsgKeys is undefined, parentMsgKeys length ${r.length}`,e.forEach((e=>{l.default.fromString(e).fromMe&&i.push(e)})),i.length>0&&(yield(0,a.removeMessagesFromHistory)(i)),e}));return function(){return e.apply(this,arguments)}}()).end();t.D=u},86850:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebMsgInfoReaction=function(e,t){const n=[];try{if(null==e||null==e.reactions)return n;if(null==t||null==t.reactions)return n;t.reactions.forEach((e=>{const{key:r,senderTimestampMs:u,text:c,unread:d}=e,p=(0,a.convertToTextWithoutSpecialEmojis)(null!=c?c:""),{msgKey:f,sender:_}=(0,i.default)((0,o.buildAddonMsgKey)(r),"buildAddonMsgKey(key)");null!=_&&_ instanceof s.default?null==p?__LOG__(4,void 0,new Error)`parseWebMsgInfoReaction:convertToTextWithoutSpecialEmojis reaction text is null.`:n.push({id:f,reactionTimestamp:u,reactionText:p,reactionParentKey:t.id,sender:(0,l.createWid)(_.toString()),unread:Boolean(d)}):__LOG__(4,void 0,new Error)`parseWebMsgInfoReaction: reaction sender should be a wid.`}))}catch(e){__LOG__(4,void 0,new Error)`[history sync] parseWebMsgInfoReaction failed with error ${null==e?void 0:e.name} and stack ${null==e?void 0:e.stack}`}return n};var i=r(n(49619)),o=n(29162),a=n(54468),s=r(n(27112)),l=n(51017)},70817:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.checkUpdateForOrphanReactions=function(){return d.apply(this,arguments)};var i=r(n(48926)),o=n(21193),a=n(23041),s=n(1619),l=n(96677),u=n(73602),c=n(61515);function d(){return(d=(0,i.default)((function*(e){try{const t=yield(0,l.changeOrphanStateReactions)(e);(0,o.isUnifiedInfraEnabledForType)(u.MSG_TYPE.REACTION)?yield(0,a.processMsgs)(t.map((e=>(0,c.reactionRowToReactionMsgData)(e)))):(0,s.frontendFireAndForget)("checkUpdateForOrphanReactions",{updatedRecords:t})}catch(e){__LOG__(3)`checkUpdateForOrphanReactions: error ${e}`}}))).apply(this,arguments)}},64338:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processReactionMessage=function(){return p.apply(this,arguments)};var i=r(n(48926)),o=n(1619),a=n(46316),s=n(37956),l=n(27893),u=n(463),c=n(17167),d=n(68231);function p(){return(p=(0,i.default)((function*(e,t,n){try{const r=null!=t.offline&&!n,p=(0,u.isMatFullyEnabled)()?yield(0,c.processReactionMatMessages)(e):e,f=l.messageProcessorCache.addMessages([{msg:p}],!r).then((()=>{if(d.WorkerOfflineResumeReporter.updateProcessedMessageCount(),!r)return(0,s.processReactionOrphanPeerReceipt)(p.id)}));(a.Cmd.isMainStreamReadyMd||n)&&f.then((0,i.default)((function*(){yield(0,o.frontendSendAndReceive)("updateReactionUI",{msg:p,reparsing:n})})))}catch(e){__LOG__(4,void 0,new Error,!0,["messaging"])`processReactionMessage: msgId:${t.externalId}, failed with error: ${e}`,SEND_LOGS("handle_msg: error storing/processing single message",1,"messaging")}return Promise.resolve()}))).apply(this,arguments)}},66450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionEncValidationErrorCode=t.ReactionEncMessageValidationError=void 0;var r=n(22495);const i=n(76672)({INVALID_ENC_IV:"enc_reaction_invalid_iv",INVALID_ENC_PAYLOAD:"enc_reaction_invalid_payload",MISSING_TARGET_MSG_KEY:"enc_reaction_missing_target_msg_key",MISSING_MESSAGE_SECRET:"enc_reaction_missing_message_secret",MISSING_SENDER:"enc_reaction_missing_sender",MISSING_PARENT_MESSAGE:"enc_reaction_missing_parent_message",MISSING_PARENT_MESSAGE_SENDER:"enc_reaction_missing_parent_message_sender",DECRYPTION_FAILED:"enc_reaction_decryption_failed"});t.ReactionEncValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="ReactionEncMessageValidationError"}}t.ReactionEncMessageValidationError=o},4279:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{encReactionMessage:r}=t;if(null==r)return;const{encIv:u,encPayload:c}=r,d=(0,o.translateRegularMessageKeyToLocalReference)(r.targetMessageKey,n);if(null==d)throw new s.ReactionEncMessageValidationError(s.ReactionEncValidationErrorCode.MISSING_TARGET_MSG_KEY,l.E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);if(null==u)throw new s.ReactionEncMessageValidationError(s.ReactionEncValidationErrorCode.INVALID_ENC_IV,l.E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);if(null==c)throw new s.ReactionEncMessageValidationError(s.ReactionEncValidationErrorCode.INVALID_ENC_PAYLOAD,l.E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.REACTION_ENC,kind:a.MsgKind.ReactionEncrypted,encIv:u,encPayload:c,targetMessageKey:d}),contextInfo:null}};var i=r(n(81109)),o=n(54468),a=n(73602),s=n(66450),l=n(57095)},41056:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{reactionMessage:r}=t;if(null==r)return;const p=function(e){var t;const n=e.text;if(null!=n&&n.length>a.default.REACTION_CONTENT_MAX_LENGTH)throw new c.ReactionValidationError(c.ReactionValidationErrorCode.INVALID_REACTION_TEXT_LENGTH,d.E2E_FAILURE_REASON.INVALID_REACTION_TEXT);return null!==(t=(0,s.convertToTextWithoutSpecialEmojis)(n))&&void 0!==t?t:u.REVOKED_REACTION_TEXT}(r),f=(0,s.translateRegularMessageKeyToLocalReference)(r.key,n),_=(0,o.maybeNumberOrThrowIfTooLarge)(r.senderTimestampMs);if(null==f)throw new c.ReactionValidationError(c.ReactionValidationErrorCode.MISSING_PARENT_MSG_KEY,d.E2E_FAILURE_REASON.INVALID_MESSAGE);if(null==_)throw new c.ReactionValidationError(c.ReactionValidationErrorCode.MISSING_TIMESTAMP,d.E2E_FAILURE_REASON.INVALID_MESSAGE);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:l.MSG_TYPE.REACTION,kind:l.MsgKind.ReactionDecrypted,reactionParentKey:f,reactionText:p,reactionTimestamp:_}),contextInfo:null}};var i=r(n(81109)),o=n(22101),a=r(n(44423)),s=n(54468),l=n(73602),u=n(56074),c=n(91229),d=n(57095)},91229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionValidationErrorCode=t.ReactionValidationError=void 0;var r=n(22495);const i=n(76672)({INVALID_REACTION_TEXT_LENGTH:"reaction_invalid_text_length",MISSING_PARENT_MSG_KEY:"reaction_missing_parent_msg_key",MISSING_TIMESTAMP:"reaction_missing_timestamp"});t.ReactionValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="ReactionValidationError"}}t.ReactionValidationError=o},24936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){const e=(0,r.getStorage)(),{addColumn:t,addCompositePrimaryKey:n,addCompositeIndex:a,addIndex:s}=(0,o.columnBuilder)(e.config);e.add("reactions").version((0,i.reactionsCreateTable)(),[n(["parentMsgKey","senderUserJid"]),t("msgKey"),t("reactionText"),t("timestamp"),t("orphan"),t("orphanReason"),t("read"),t("ack"),s("parentMsgKey"),s("orphan"),t("t")]).version((0,i.addReactionTableOrphanIndex)(),[a(["parentMsgKey","orphan"])]).version((0,i.addReactionTableMsgKeyIndex)(),[s("msgKey")]).view((e=>e))},t.getReactionsTable=function(){return(0,r.getStorage)().table("reactions")};var r=n(74557),i=n(20746),o=n(65717)},86725:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.assertReactionEncMsgData=function(e){const t=s(e);return(0,o.default)(null!=t,"assertReactionEncMsgData: invalid reaction enc message object"),t},t.assertReactionMsgData=function(e){const t=a(e);return(0,o.default)(null!=t,"assertReactionMsgData: invalid reaction message object"),t},t.castToReactionEncMsgData=s,t.castToReactionMsgData=a;var i=n(73602),o=r(n(41143));function a(e){return e.type===i.MSG_TYPE.REACTION?e:null}function s(e){return e.type===i.MSG_TYPE.REACTION_ENC?e:null}},61515:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.reactionMsgDataToReactionRow=function(e){var t;return{msgKey:e.id.toString(),parentMsgKey:e.reactionParentKey.toString(),senderUserJid:(0,i.default)((0,a.getSender)(e),"getSender(msgData)").toString(),reactionText:e.reactionText,timestamp:e.reactionTimestamp,t:(0,a.getT)(e),ack:null!==(t=(0,a.getAck)(e))&&void 0!==t?t:void 0,orphan:0,read:e.read}},t.reactionRowToReactionMsgData=function(e){var t,n;const r=s.default.fromString(e.msgKey),{from:i,to:a,author:c}=(0,l.msgKeyToTargetInfo)(r,o.TranslateMsgKeyType.Addon);return{id:r,to:a,from:i,author:c,type:u.MSG_TYPE.REACTION,kind:u.MsgKind.ReactionDecrypted,reactionParentKey:s.default.fromString(e.parentMsgKey),reactionText:e.reactionText,reactionTimestamp:e.timestamp,t:null!==(t=e.t)&&void 0!==t?t:void 0,ack:null!==(n=e.ack)&&void 0!==n?n:void 0}},t.webMsgInfoReactionTypeToReactionsRow=function(e){let{id:t,reactionTimestamp:n,reactionText:r,reactionParentKey:i,sender:o,unread:a}=e;const s=(0,d.toUserWid)(o);return{msgKey:t.toString(),parentMsgKey:i.toString(),senderUserJid:s.toString(),reactionText:null!=r?r:c.REVOKED_REACTION_TEXT,timestamp:n,orphan:0,read:!a}};var i=r(n(49619)),o=n(54468),a=n(26368),s=r(n(60001)),l=n(97087),u=n(73602),c=n(56074),d=n(51017)},56074:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.REVOKED_REACTION_TEXT=void 0,t.canHaveReactions=m,t.createReactionsRowFromMsg=function(){return E.apply(this,arguments)},t.updateHasReactionFromParent=function(){return y.apply(this,arguments)};var i=r(n(48926)),o=n(22101),a=r(n(49619)),s=n(32117),l=n(81277),u=n(91336),c=n(26368),d=r(n(60001)),p=n(73602),f=n(463),_=n(10139),g=n(66846),h=r(n(27112)),A=n(51017);function m(e,t){return e!==p.MSG_TYPE.UNKNOWN&&e!==p.MSG_TYPE.CIPHERTEXT&&e!==p.MSG_TYPE.REVOKED&&e!==p.MSG_TYPE.DEBUG&&e!==p.MSG_TYPE.DEBUG_PLACEHOLDER&&e!==p.MSG_TYPE.GP2&&e!==p.MSG_TYPE.NOTIFICATION&&e!==p.MSG_TYPE.NEWSLETTER_NOTIFICATION&&e!==p.MSG_TYPE.NOTIFICATION_TEMPLATE&&e!==p.MSG_TYPE.E2E_NOTIFICATION&&e!==p.MSG_TYPE.CALL_LOG&&(e!==p.MSG_TYPE.CHAT||t!==l.BOT_TYPING_PLACEHOLDER_MSG_SUBTYPE)}function E(){return(E=(0,i.default)((function*(e){const t=[],n=[];e.forEach((e=>{e&&n.push(e.reactionParentKey)}));const r=new Map;(0,f.isMatFullyEnabled)()&&e.forEach((e=>{const t=e.reactionParentKey,i=(0,c.getOriginalSender)(e);if(null!=t&&null!=i&&t.remote.isUser()&&!h.default.equals(i,t.remote)){const o=d.default.from({fromMe:t.fromMe,id:t.id,participant:t.participant,remote:i});n.push(o),r.set(e.reactionParentKey.remote,o.toString())}}));const i=yield(0,s.getParentMsgsByMsgKey)(n);return e.forEach((e=>{var n,s,l,u,c,d;const _=null!==(n=e.author)&&void 0!==n?n:e.from;if(!_||!e)return void __LOG__(3)`createReactionsRowFromMsg: sender or reactionMsg are null`;let h=i.get(e.reactionParentKey.toString());if((0,f.isMatFullyEnabled)()&&!h){const t=r.get(e.reactionParentKey.remote);null!=t&&(h=i.get(t))}let E,y=0;if(h){if((null===(s=h)||void 0===s?void 0:s.type)===p.MSG_TYPE.CIPHERTEXT)y=1,E=g.OrphanReactionsReasonType.ParentMsgPlaceholder;else if((null===(l=h)||void 0===l?void 0:l.type)===p.MSG_TYPE.UNKNOWN)y=1,E=g.OrphanReactionsReasonType.ParentMsgFutureproof;else if(!m(h.type,h.subtype))return void __LOG__(3)`createReactionsRowFromMsg: reactions not allowed for this message type ${h.type}`}else y=1,E=g.OrphanReactionsReasonType.ParentMsgMissing;const S=(0,A.toUserWid)(_),v={msgKey:e.id.toString(),parentMsgKey:null!==(u=null===(c=h)||void 0===c?void 0:c.id.toString())&&void 0!==u?u:e.reactionParentKey.toString(),senderUserJid:S.toString(),reactionText:null!==(d=e.reactionText)&&void 0!==d?d:"",timestamp:e.reactionTimestamp,orphan:y,orphanReason:E,read:!1,t:(0,a.default)((0,o.maybeNumberOrThrowIfTooLarge)(e.t),"maybeNumberOrThrowIfTooLarge(reactionMsg.t)")};t.push(v)})),t}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(e){const t=[],n=[];e.forEach((e=>{const{parentMsgKey:r,orphan:i,reactionText:o}=e;1!==i&&(""!==o?n.push({id:r,hasReaction:!0}):t.push(r))}));const r=yield(0,u.getFilteredReactionsFromParentMsgs)(t);return t.forEach((e=>{const t=r.get(e),i=t&&t.length>0||!1;n.push({id:e,hasReaction:i})})),(0,_.getMessageTable)().bulkCreateOrMerge(n)}))).apply(this,arguments)}t.REVOKED_REACTION_TEXT=""},86679:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{requestPhoneNumberMessage:r}=t;if(null==r)return;const{contextInfo:a}=r;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:o.MSG_TYPE.REQUEST_PHONE_NUMBER,kind:o.MsgKind.RequestPhoneNumber}),contextInfo:a}};var i=r(n(81109)),o=n(73602)},83178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,editAttr:o,msgContext:a,msgMeta:s}=e;if(o!==r.EDIT_ATTR.ADMIN_REVOKE)return;return(0,i.parseProtocolRevokeMessageProto)({messageProtobuf:t,baseMessage:n,editAttr:o,msgContext:a,msgMeta:s})};var r=n(77630),i=n(93417)},66525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,editAttr:o,msgContext:a,msgMeta:s}=e;if(o!==r.EDIT_ATTR.SENDER_REVOKE)return;return(0,i.parseProtocolRevokeMessageProto)({messageProtobuf:t,baseMessage:n,editAttr:o,msgContext:a,msgMeta:s})};var r=n(77630),i=n(93417)},93417:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolRevokeMessageValidationError=void 0,t.parseProtocolRevokeMessageProto=function(e){var t;let{messageProtobuf:n,baseMessage:r,editAttr:s,msgContext:f,msgMeta:_}=e;const{protocolMessage:g}=n;if(null==g)return;const{type:h,key:A}=g;if("relay"!==f&&h!==c.Message$ProtocolMessage$Type.EPHEMERAL_SETTING)return;if(h!==c.Message$ProtocolMessage$Type.REVOKE)return;let m,E;m=(null===(t=r.author)||void 0===t?void 0:t.isLid())&&(0,l.isCommentMsgMeta)(_)?(0,a.translateAddonMessageKeyToLocalReference)(A,r):(0,a.translateRegularMessageKeyToLocalReference)(A,r);if(null==m)throw new p("protocol_revoke_missing_key",d.E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);if(s===o.EDIT_ATTR.ADMIN_REVOKE)E="admin_revoke";else{if(s!==o.EDIT_ATTR.SENDER_REVOKE)throw new p("protocol_revoke_missing_edit_attr",d.E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);E="sender_revoke"}try{return{msgData:(0,i.default)((0,i.default)({},r),{},{type:u.MSG_TYPE.PROTOCOL,kind:u.MsgKind.ProtocolRevoke,subtype:E,protocolMessageKey:m}),contextInfo:null}}catch(e){throw __LOG__(3,void 0,void 0,!0,["messaging"])`parseProtocolRevokeMessageProto: error:${null==e?void 0:e.name}, stack: ${null==e?void 0:e.stack}`,SEND_LOGS("ProtocolRevokeParseError",1,"messaging"),e}};var i=r(n(81109)),o=n(77630),a=n(54468),s=n(22495),l=n(24513),u=n(73602),c=n(77026),d=n(57095);class p extends s.MessageValidationError{constructor(){super(...arguments),this.name="ProtocolRevokeMessageValidationError"}}t.ProtocolRevokeMessageValidationError=p},15208:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.assertProtocolRevokeMsgData=function(e){const t=a(e);return(0,o.default)(null!=t,"assertProtocolRevokeMsgData: invalid message object"),t},t.castToProtocolRevokeMsgData=a;var i=n(73602),o=r(n(41143));function a(e){return e.type!==i.MSG_TYPE.PROTOCOL||"sender_revoke"!==e.subtype&&"admin_revoke"!==e.subtype?null:e}},4966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},28781:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},70643:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaMessageValidationError=void 0,t.getValidMimeTypes=y,t.getValidatedMediaMessageProperties=function(e,t,n,r){const{mediaKey:u,fileSha256:_,fileEncSha256:g,fileLength:h,url:A,mimetype:m}=e;let E,I=!1;I="relay"===n?(0,a.isMessageDropValidationEnabled)(n)&&S():(0,a.isMessageDropValidationEnabled)(n);if(!I)return{mediaKey:u,fileSha256:_,fileEncSha256:g,fileLength:(0,i.numberOrThrowIfTooLarge)(null!=h?h:0),url:A,mimetype:m};if((e=>null==e.id)(t))return{mediaKey:u,fileSha256:_,fileEncSha256:g,fileLength:(0,i.numberOrThrowIfTooLarge)(null!=h?h:0),url:A,mimetype:m};if(!(0,l.default)({from:t.from,to:t.to})){if(null==u)throw new f(r,p.MISSING_MEDIA_KEY,d.E2E_FAILURE_REASON.INVALID_IMAGE_MEDIA_KEY);if(32!==u.byteLength)throw new f(r,p.INVALID_MEDIA_KEY,d.E2E_FAILURE_REASON.INVALID_IMAGE_MEDIA_KEY);if(null!=g&&32!==g.byteLength)throw new f(r,p.INVALID_ENC_SHA256,d.E2E_FAILURE_REASON.INVALID_IMAGE_FILE_SHA256)}if(32!==(null==_?void 0:_.byteLength))throw new f(r,p.INVALID_SHA256,d.E2E_FAILURE_REASON.INVALID_IMAGE_FILE_SHA256);if(!(null==A||c.default.isHttps(A)&&v(A)))throw new f(r,p.INVALID_URL,d.E2E_FAILURE_REASON.INVALID_IMAGE_MEDIA_URL);if(null==m)throw new f(r,p.INVALID_MIME_TYPE,d.E2E_FAILURE_REASON.INVALID_IMAGE_MIME_TYPE);if((0,o.getABPropConfigValue)("web_validate_media_mime_type")){const e=y(r);if(null!=e&&!e.has(m))throw __LOG__(2)`Unexpected ${m} for ${r} message`,new f(r,p.INVALID_MIME_TYPE,d.E2E_FAILURE_REASON.INVALID_IMAGE_MIME_TYPE)}let T=!1;r===s.MSG_TYPE.STICKER?null!=h?(E=(0,i.numberOrThrowIfTooLarge)(h),T=E>=0):T=!0:r===s.MSG_TYPE.DOCUMENT?null==h?T=!1:(E=(0,i.numberOrThrowIfTooLarge)(h),T=E>=0):null==h?T=!1:(E=(0,i.numberOrThrowIfTooLarge)(h),T=E>0);if(!T)throw __LOG__(2)`Invalid file length ${h} with a type ${typeof h} for ${r} message`,new f(r,p.INVALID_FILE_LENGTH,d.E2E_FAILURE_REASON.INVALID_IMAGE_FILE_LENGTH,{sendLogs:r!==s.MSG_TYPE.IMAGE||.01});return{mediaKey:u,fileSha256:_,fileEncSha256:g,fileLength:E,url:A,mimetype:m}},t.isMediaMessageValidationEnabled=S,t.isMediaMimeType=function(e){return E(e)||e.startsWith("image/")},t.isVideoMimeType=E,t.isWhatsAppSubdomain=v,t.validateImageMimetype=function(e){var t;if(null==e||!(null===(t=y(s.MSG_TYPE.IMAGE))||void 0===t?void 0:t.has(e)))throw new f(s.MSG_TYPE.IMAGE,p.INVALID_MIME_TYPE,d.E2E_FAILURE_REASON.INVALID_IMAGE_MIME_TYPE,{sendLogs:.01})};var i=n(22101),o=n(83741),a=n(22495),s=n(73602),l=r(n(48780)),u=n(47490),c=r(n(32890)),d=n(57095);const p=n(76672)({MISSING_MEDIA_KEY:"missing_media_key",INVALID_SHA256:"invalid_sha256",INVALID_ENC_SHA256:"invalid_enc_sha256",INVALID_URL:"invalid_url",INVALID_MIME_TYPE:"invalid_mime_type",INVALID_MEDIA_KEY:"invalid_media_key",INVALID_FILE_LENGTH:"invalid_file_length"});class f extends a.MessageValidationError{constructor(e,t,n,r){super(`${String(t)} for ${e} message`,n,r),this.name="MediaMessageValidationError"}}t.MediaMessageValidationError=f;const _="audio/ogg; codecs=opus",g="audio/mp4",h="audio/mpeg",A="audio/aac",m="audio/amr";function E(e){return e.startsWith("video/")}function y(e){return{[s.MSG_TYPE.IMAGE]:new Set(["image/jpeg","image/png","image/webp"]),[s.MSG_TYPE.STICKER]:(0,u.getValidStickerMimeTypes)(),[s.MSG_TYPE.VIDEO]:new Set(["video/mp4","video/3gpp"]),[s.MSG_TYPE.AUDIO]:new Set([_,g,h,A,m]),[s.MSG_TYPE.PTT]:new Set([_,g,h,A,m])}[e]}function S(){return(0,o.getABPropConfigValue)("web_invalid_media_message_validation")}function v(e){const t=c.default.hostname(e);return t.endsWith(".whatsapp.net")||"whatsapp.net"===t}},96259:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{imageMessage:d}=t;if(null==d)return;const{directPath:p,staticUrl:f,mimetype:_,caption:g,height:h,width:A,mediaKeyTimestamp:m,jpegThumbnail:E,interactiveAnnotations:y,scanLengths:S,scansSidecar:v,viewOnce:I,thumbnailDirectPath:T,thumbnailSha256:b,thumbnailEncSha256:M,contextInfo:P,annotations:C}=d,{mediaKey:O,fileSha256:R,fileEncSha256:N,fileLength:w,url:D}=(0,u.getValidatedMediaMessageProperties)(d,n,r,c.MSG_TYPE.IMAGE),L=(0,i.default)((0,i.default)({},n),{},{type:c.MSG_TYPE.IMAGE,kind:c.MsgKind.Image,deprecatedMms3Url:(0,s.decodeUrl)(D),directPath:p||"",staticUrl:f||"",mimetype:_||"",caption:(0,l.convertToTextWithoutSpecialEmojis)(g),filehash:(0,s.decodeBytes)(R),encFilehash:(0,s.decodeBytes)(N),size:w,height:h||0,width:A||0,mediaKey:(0,s.decodeBytes)(O),mediaKeyTimestamp:null!=m?(0,o.numberOrThrowIfTooLarge)(m):(0,a.unixTime)(),body:(0,s.decodeBytes)(E)||"",interactiveAnnotations:(null==C?void 0:C.length)>0?C:y,scanLengths:S,scansSidecar:v,isViewOnce:!0===I,thumbnailDirectPath:T,thumbnailSha256:(0,s.decodeBytes)(b),thumbnailEncSha256:(0,s.decodeBytes)(M)});return(0,s.validateRequiredMediaProperties)(L,d),(0,u.validateImageMimetype)(_),{msgData:L,contextInfo:P}};var i=r(n(81109)),o=n(22101),a=n(29987),s=n(57305),l=n(54468),u=n(70643),c=n(73602)},13501:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{videoMessage:d}=t;if(null==d)return;const{directPath:p,staticUrl:f,mimetype:_,caption:g,height:h,width:A,mediaKeyTimestamp:m,jpegThumbnail:E,interactiveAnnotations:y,viewOnce:S,thumbnailDirectPath:v,thumbnailSha256:I,thumbnailEncSha256:T,contextInfo:b,gifPlayback:M,gifAttribution:P,seconds:C,streamingSidecar:O,annotations:R}=d,{mediaKey:N,fileSha256:w,fileEncSha256:D,fileLength:L,url:B}=(0,u.getValidatedMediaMessageProperties)(d,n,r,c.MSG_TYPE.VIDEO),k=(0,i.default)((0,i.default)({},n),{},{type:c.MSG_TYPE.VIDEO,kind:c.MsgKind.Video,deprecatedMms3Url:(0,s.decodeUrl)(B),directPath:p,staticUrl:f||"",mimetype:_,caption:(0,l.convertToTextWithoutSpecialEmojis)(g),filehash:(0,s.decodeBytes)(w),encFilehash:(0,s.decodeBytes)(D),size:L,height:h,width:A,mediaKey:(0,s.decodeBytes)(N),mediaKeyTimestamp:null!=m?(0,o.numberOrThrowIfTooLarge)(m):(0,a.unixTime)(),duration:`${C||0}`,body:(0,s.decodeBytes)(E)||"",interactiveAnnotations:(null==R?void 0:R.length)>0?R:y,isViewOnce:!0===S,thumbnailDirectPath:v,thumbnailSha256:(0,s.decodeBytes)(I),thumbnailEncSha256:(0,s.decodeBytes)(T),isGif:M,gifAttribution:P,streamingSidecar:O});return(0,s.validateRequiredMediaProperties)(k,d),{msgData:k,contextInfo:b}};var i=r(n(81109)),o=n(22101),a=n(29987),s=n(57305),l=n(54468),u=n(70643),c=n(73602)},69356:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(66210),a=n(21212),s=n(89055),l=r(n(92640));const u=(0,o.createSimpleBatcher)({delayMs:5e3},(e=>function(){return c.apply(this,arguments)}(e)));function c(){return(c=(0,i.default)((function*(e){let t,n,r,o;__LOG__(2)`updatePeerStatusReceiptInfoInBatch: staring to process ${e.length} records`;const u=yield(0,a.promiseMap)(e,function(){var e=(0,i.default)((function*(e){let{msgKey:i,setting:a}=e;switch(a){case"denylist":return t||(t=l.default.getStatusDenyList().then((e=>new Set(e.map(String))))),n||(n=l.default.getStatusContacts()),{msgKey:i,receiverIds:yield Promise.all([n,t]).then((e=>{let[t,n]=e;return t.filter((e=>!n.has(e.toString())))}))};case"allowlist":return r||(r=l.default.getStatusAllowList()),{msgKey:i,receiverIds:yield r};case"contacts":return n||(n=l.default.getStatusContacts()),{msgKey:i,receiverIds:yield n};default:return o||(o=l.default.getStatusList()),{msgKey:i,receiverIds:(yield o).list}}}));return function(){return e.apply(this,arguments)}}()),c=[];return u.forEach((e=>{e.receiverIds.forEach((t=>{c.push({msgKey:e.msgKey,receiverId:t})}))})),__LOG__(2)`updatePeerStatusReceiptInfoInBatch: staring to update ${c.length} records`,yield(0,s.createOrMergeReceiptRecords)(c),__LOG__(2)`updatePeerStatusReceiptInfoInBatch: complete to update ${c.length} records`,e.map((()=>{}))}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e,t,n){__LOG__(2)`updatePeerStatusReceiptInfo: adding ${e.id}, setting ${n}, offline ${t}`;const r=u.accept({msgKey:e,setting:n});return t||u.runActiveBatch(),r}))).apply(this,arguments)}var p={updatePeerStatusReceiptInfo:function(){return d.apply(this,arguments)}};t.default=p},92640:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(1619),a=n(46316),s=n(74557),l=n(93769),u=n(92760),c=n(17657),d=n(59356),p=n(3885),f=n(58768),_=n(51017);function g(e){const t=[],{setting:n,allowList:r,denyList:i}=e;return null!=n&&t.push({key:d.BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING,value:n}),null!=r&&t.push({key:d.BACKEND_ONLY_KEYS.STATUS_ALLOW_LIST,value:Array.from(new Set(r.map((e=>String((0,_.toUserWid)(e))))))}),null!=i&&t.push({key:d.BACKEND_ONLY_KEYS.STATUS_DENY_LIST,value:Array.from(new Set(i.map((e=>String((0,_.toUserWid)(e))))))}),t}function h(){return A.apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING)||f.StatusPrivacySettingType.Contact}))).apply(this,arguments)}function m(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){__LOG__(2)`UserPrefsStatus: staring to getStatusAllowList`;const e=c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.STATUS_ALLOW_LIST);return null!=e?e.map(_.createWid):[]}))).apply(this,arguments)}function y(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)((function*(){__LOG__(2)`UserPrefsStatus: staring to getStatusDenyList`;const e=c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.STATUS_DENY_LIST);return null!=e?e.map(_.createWid):[]}))).apply(this,arguments)}function v(){return I.apply(this,arguments)}function I(){return(I=(0,i.default)((function*(){if(__LOG__(2)`UserPrefsStatus: staring to getStatusContacts`,a.Cmd.isMainStreamReadyMd){return(yield(0,o.frontendSendAndReceive)("getFilteredContacts",{showMe:!1,showWithoutName:!1,includeLidContacts:!1})).map((e=>e.id))}return(yield(0,l.getContactTable)().equals(["isAddressBookContact"],1)).map((e=>(0,_.createWid)(e.id))).filter((e=>!e.isLid()))}))).apply(this,arguments)}function T(){return(T=(0,i.default)((function*(){return(0,s.getStorage)().lock(["user-prefs","contact"],(0,i.default)((function*(){let e;switch(yield h()){case f.StatusPrivacySettingType.AllowList:return{setting:f.StatusPrivacySettingType.AllowList,list:yield m()};case f.StatusPrivacySettingType.DenyList:return e=new Set((yield y()).map(String)),{setting:f.StatusPrivacySettingType.DenyList,list:(yield v()).filter((t=>!e.has(t.toString())))};case f.StatusPrivacySettingType.Contact:return{setting:f.StatusPrivacySettingType.Contact,list:yield v()}}})))}))).apply(this,arguments)}function b(){return(b=(0,i.default)((function*(){return(0,s.getStorage)().lock(["user-prefs"],(0,i.default)((function*(){return{setting:yield h(),allowList:yield m(),denyList:yield y()}})))}))).apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return(P=(0,i.default)((function*(){return c.userPrefsIdb.get(d.BACKEND_ONLY_KEYS.STATUS_SENDER_KEY)||{rotateKey:!1,senderKey:new Set}}))).apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e){return(0,s.getStorage)().lock(["user-prefs"],(0,i.default)((function*(){const t=yield M(),n=t.rotateKey?new Set:t.senderKey;e.forEach((e=>{n.add(String(e))})),yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!1,senderKey:n})})))}))).apply(this,arguments)}function O(){return(O=(0,i.default)((function*(e){return(0,s.getStorage)().lock(["user-prefs"],(0,i.default)((function*(){const t=yield M();if(t.rotateKey)return;e.some((e=>t.senderKey.has(String(e))))&&(yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!0,senderKey:new Set}))})))}))).apply(this,arguments)}function R(){return(R=(0,i.default)((function*(e){return(0,s.getStorage)().lock(["user-prefs"],(0,i.default)((function*(){const t=yield M();e.forEach((e=>{t.senderKey.delete(String(e))})),yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:t.rotateKey,senderKey:t.senderKey})})))}))).apply(this,arguments)}function N(){return(N=(0,i.default)((function*(e){const t=yield M();if(t.rotateKey||0===t.senderKey.size)return{rotateKey:t.rotateKey,skDistribList:e,participantList:[]};const n=[],r=[];let i=0;return e.forEach((e=>{t.senderKey.has(String(e))?((0,u.isPrimaryDevice)(e)&&n.push(e),i++):(0,p.isMeDevice)(e)||r.push(e)})),i<t.senderKey.size?(yield c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!0,senderKey:new Set}),{rotateKey:!0,skDistribList:e,participantList:[]}):{rotateKey:t.rotateKey,skDistribList:r,participantList:n}}))).apply(this,arguments)}var w={setStatusPrivacyConfig:function(e){const{setting:t,list:n}=e;if(t===f.StatusPrivacySettingType.Contact)return c.userPrefsIdb.set(d.BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING,t);const r=g({setting:t,allowList:t===f.StatusPrivacySettingType.AllowList?n:void 0,denyList:t===f.StatusPrivacySettingType.DenyList?n:void 0});return c.userPrefsIdb.bulkSetItemsToIndexedDB(r)},calculateStatusPrivacyUpdateEntries:g,getStatusPrivacySetting:h,getStatusAllowList:m,getStatusDenyList:y,getStatusSkDistribList:function(){return N.apply(this,arguments)},markStatusHasSenderKey:function(){return C.apply(this,arguments)},getStatusContacts:v,getStatusList:function(){return T.apply(this,arguments)},getStatusPrivacySettingConfig:function(){return b.apply(this,arguments)},markForgetStatusSenderKey:function(){return R.apply(this,arguments)},markStatusSenderKeyRotate:function(){return O.apply(this,arguments)}};t.default=w},58768:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusPrivacySettingType=void 0;const r=n(76672)({Contact:"contact",AllowList:"allow-list",DenyList:"deny-list"});t.StatusPrivacySettingType=r},79251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStatusDrawerEnabled=function(){return(0,r.getABPropConfigValue)("web_status_drawer_enabled")},t.isStatusMutingEnabled=function(){return(0,r.getABPropConfigValue)("web_status_muting_enabled")},t.isStatusPostingEnabled=function(){return(0,i.primaryFeatureEnabled)("post_status_in_companion")&&(0,r.getABPropConfigValue)("web_status_posting_enabled")};var r=n(83741),i=n(89358)},43203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getMediaReportingTokenContent)(e)};var r=n(90268)},54425:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{messageProtobuf:n,baseMessage:r,msgContext:p}=e;const f=null==n?void 0:n.lottieStickerMessage,_=null==f||null===(t=f.message)||void 0===t?void 0:t.stickerMessage;let g=null==n?void 0:n.stickerMessage;if(null!=_){if(!(0,u.isLottieStickerReceivingEnabled)())return{msgData:(0,i.default)((0,i.default)({},r),{},{type:d.MSG_TYPE.UNKNOWN,kind:d.MsgKind.Unknown,futureproofType:d.MSG_TYPE.STICKER}),contextInfo:null==_?void 0:_.contextInfo};g=_}if(null==g)return;const{mediaKey:h,fileSha256:A,fileEncSha256:m,url:E}=(0,c.getValidatedMediaMessageProperties)(g,r,p,d.MSG_TYPE.STICKER),y=(0,i.default)((0,i.default)({},r),{},{type:d.MSG_TYPE.STICKER,kind:d.MsgKind.Sticker,deprecatedMms3Url:(0,l.decodeUrl)(E),directPath:g.directPath||"",mimetype:g.mimetype||"",filehash:(0,l.decodeBytes)(A),encFilehash:(0,l.decodeBytes)(m),mediaKey:(0,o.default)((0,l.decodeBytes)(h)),mediaKeyTimestamp:null!=g.mediaKeyTimestamp?(0,a.numberOrThrowIfTooLarge)(g.mediaKeyTimestamp):(0,s.unixTime)(),height:g.height||0,width:g.width||0,firstFrameLength:g.firstFrameLength,firstFrameSidecar:g.firstFrameSidecar,isAnimated:g.isAnimated,isLottie:g.isLottie,stickerSentTs:(0,a.maybeNumberOrThrowIfTooLarge)(g.stickerSentTs),isAvatar:g.isAvatar});return(0,l.validateRequiredMediaProperties)(y,g),{msgData:y,contextInfo:g.contextInfo}};var i=r(n(81109)),o=r(n(78957)),a=n(22101),s=n(29987),l=n(57305),u=n(77400),c=n(70643),d=n(73602)},77400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLottieStickerReceivingEnabled=function(){return(0,r.getABPropConfigValue)("gimmick_phase_two_receiver_enabled")},t.isLottieStickerSendingEnabled=function(){return(0,r.getABPropConfigValue)("gimmick_phase_two_sender_enabled")};var r=n(83741)},47490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WhatsAppLottieStickerMimeType=void 0,t.getValidStickerMimeTypes=function(){if((0,r.isLottieStickerReceivingEnabled)())return new Set([o,i]);return new Set([o])};var r=n(77400);const i="application/was";t.WhatsAppLottieStickerMimeType=i;const o="image/webp"},28612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TcTokenMode=void 0,t.getTcTokenDuration=a,t.isTokenExpired=function(e,t){return e<s(t)},t.shouldSendNewToken=function(e){if(null==e)return!0;const t=(0,i.getABPropConfigValue)("tctoken_duration_sender"),n=Math.floor((0,r.unixTime)()/t),o=Math.floor(e/t);return n>o},t.tokenExpirationCutoff=s;var r=n(29987),i=n(83741);const o=n(76672)({Sender:"sender",Receiver:"receiver"});function a(e){const t=e===o.Receiver?"tctoken_duration":"tctoken_duration_sender";return Math.min((0,i.getABPropConfigValue)(t),15552e3)}function s(e){const t=e===o.Receiver?"tctoken_num_buckets":"tctoken_num_buckets_sender",n=(0,i.getABPropConfigValue)(t),s=a(e),l=Math.floor((0,r.unixTime)()/s);return(0,r.castToUnixTime)((l-(n-1))*s)}t.TcTokenMode=o},64493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiVcardValidationErrorCode=t.MultiVcardMessageValidationError=void 0;var r=n(22495);const i=n(76672)({EMPTY_LIST:"contacts_array_empty_list",INVALID_LIST_SIZE:"contacts_array_invalid_list_size"});t.MultiVcardValidationErrorCode=i;class o extends r.MessageValidationError{constructor(){super(...arguments),this.name="MultiVcardMessageValidationError"}}t.MultiVcardMessageValidationError=o},43163:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n,msgContext:r}=e;const{contactsArrayMessage:u}=t;if(null==u)return;const{contacts:c,contextInfo:d,displayName:p}=u;if((0,o.isMessageDropValidationEnabled)(r)&&(null==c||0===c.length))throw new s.MultiVcardMessageValidationError(s.MultiVcardValidationErrorCode.EMPTY_LIST,l.E2E_FAILURE_REASON.INVALID_PROTOCOL_BUFFER);return{msgData:(0,i.default)((0,i.default)({},n),{},{type:a.MSG_TYPE.MULTI_VCARD,kind:a.MsgKind.MultiVcard,vcardFormattedName:p,vcardList:Array.isArray(c)?c.map((e=>({displayName:e.displayName,vcard:e.vcard,isMultiVcard:!1}))):[]}),contextInfo:d}};var i=r(n(81109)),o=n(22495),a=n(73602),s=n(64493),l=n(57095)},85316:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{messageProtobuf:t,baseMessage:n}=e;const{contactMessage:r}=t;if(null==r)return;const{contextInfo:a,displayName:s,vcard:l}=r;return{msgData:(0,i.default)((0,i.default)({},n),{},{type:o.MSG_TYPE.VCARD,kind:o.MsgKind.Vcard,body:l,vcardFormattedName:s}),contextInfo:a}};var i=r(n(81109)),o=n(73602)},44245:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WA_BIZ_NAME=t.Field=void 0,t.clean=function(e){if(!e)return;return e.replace(/^_\$!<([^>]*)>!\$_$/,"$1").replace(/\\,/,",").replace(/\\;/,";").replace(/\\\\/,"\\")},t.parseMultiVcard=function(e){const t=e.match(/BEGIN:VCARD([\s\S]*?)END:VCARD/g);return t?t.map((e=>m(e))).filter(Boolean):[]},t.parseVcard=m,t.vcardGetDate=function(e){let t=e;return(0,i.default)([/-([^-]*)-([^-]*)-([^-]*)/,/([^-]*)-([^-]*)-([^-]*)/],(n=>{const r=e.match(n);if(r){const e=!r[1].length||"1604"===r[1],n=e?"0000":r[1];return t=(0,l.default)(`${n}-${r[2]}-${r[3]}`).format("l"),e&&(t=t.replace(/[.,-\/\s]*0000[.,-\/\s]*/,"")),!1}})),t},t.vcardIsBiz=function(e){return(e.SERVICE||[]).some((e=>e.type.toLowerCase()===d&&e.value))},t.vcardThumbnail=function(e){if(!e)return;const{PHOTO:t}=e;if((null==t?void 0:t[0])&&u.default.isData(t[0].value))return t[0].value},t.vcardWids=function(e){let t=[];if(null==e?void 0:e.TEL)e.TEL.forEach((e=>{var n,r,i;(null!==(n=null===(r=e.properties)||void 0===r||null===(i=r.waid)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0&&(t=t.concat(e.properties.waid.map((e=>(0,c.createUserWid)(e)))))}));else{const n=((null==e?void 0:e.SERVICE)||[]).find((e=>"wa-lid"===e.type.toLowerCase()));(null==n?void 0:n.value)&&(t=t.concat((0,c.createUserWid)(n.value,"lid")))}return t};var i=r(n(84486)),o=r(n(89734)),a=r(n(2525)),s=n(25303),l=r(n(19546)),u=r(n(32890)),c=n(51017);const d="wa-biz-name";t.WA_BIZ_NAME=d;const p=/X-([^;:]+)(?:;[^:]+)*:(.+)/,f={"X-ABLabel":[/X-ABLabel(?:;([^:]+))*:(.+)/,1],ADR:[/ADR(?:;([^:]+))*:;;(.*);(.*);(.*);(.*);(.*)/,5],"X-ABADR":[/X-ABADR(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.*)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1],TEL:[/TEL(?:;([^:]+))*:(.+)/,1]},_={N:[/N(?:;([^:]+))*:([^;]*);([^;]*);([^;]*);([^;]*);(.*)/,5],FN:[/FN(?:;([^:]+))*:(.*)/,1],NICKNAME:[/NICKNAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-FIRST-NAME":[/X-PHONETIC-FIRST-NAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-LAST-NAME":[/X-PHONETIC-LAST-NAME(?:;([^:]+))*:(.*)/,1],ORG:[/ORG(?:;([^:]+))*:([^;]*)(?:;(.*))*/,2],TITLE:[/TITLE(?:;([^:]+))*:(.*)/,1],TEL:[/TEL(?:;([^:]+))*:(.*)/,1],PHOTO:[/PHOTO(?:;([^:]+))*:(.*)/,1],BDAY:[/BDAY(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.+)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1]};class g{constructor(e,t,n,r){this.type=e,this.index=t,this.properties=n||{},this.value=r}}function h(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function A(e){const t={};return e?(e.split(";").forEach((e=>{const n=e.split(/=/);if(1===n.length){const e=n[0];h(t,e.toLowerCase(),!0)}else if(2===n.length){const[e,r]=n;h(t,e.toLowerCase(),r.toLowerCase())}})),t):t}function m(e){const t=null==e?void 0:e.replace(/\r?\n|\r/g,"\n").replace(/\n^[ \t]/gm,"").split("\n").filter((e=>0!==e.trim().length)),n={},r={};if(null==t||t.length<3)return;const i=t[0].trim().toUpperCase(),l=t[1].trim().toUpperCase(),u=t[t.length-1].trim().toUpperCase(),c="VERSION:2.1"===l||"VERSION:3.0"===l||"VERSION:4.0"===l;if("BEGIN:VCARD"!==i||!c||"END:VCARD"!==u)return __LOG__(4,void 0,new Error,!0)`vcard:parse failed because the vCard is not formatted as expected:
Header as expected? ${String("BEGIN:VCARD"===i)}
Version as expected? ${String(c)}
Footer as expected? ${String("END:VCARD"===u)}
Lines: ${t.length}`,void SEND_LOGS("vcard-fault");for(let e=2;e<t.length-1;e++){var d;const i=t[e],o=i.match(/item(\d+)\.(.*)/),a=o?o[2]:i,l=null===(d=a.match(/([^:;]*)[:;].*/))||void 0===d?void 0:d[1];if(null==l)continue;const u=o?f:_;let c,m,E=l,y=l;if(u[E]){const[e,t]=u[E],n=a.match(e);n&&(c=A(n[1]),m=1===t?m=n[2]:n.slice(2,2+t))}else{const e=a.match(p);e&&(y="SERVICE",E=e[1],m=e[2],c={})}if((Array.isArray(m)?m:[m]).some((e=>e&&(0,s.isString)(e)&&e.trim())))if(o){const t=o[1];r[t]?r[t].fields.push(new g(E,null,c,m)):r[t]={type:E,index:e,key:y,properties:c,value:m,fields:[]}}else h(n,y,new g(E,e,c,m))}return Object.keys(r).forEach((e=>{const{key:t,index:i,type:o,value:a,properties:s,fields:l}=r[e];l.forEach((e=>{s[e.type]=e.value})),h(n,t,new g(o,i,s,a))})),function(e){const t={};return(0,a.default)(e,((e,n)=>{t[n]=(0,o.default)(e,(e=>e.index))})),t}(n)}t.Field=g},81016:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(45218),a=n(5707),s=n(60019),l=n(55017);function u(){return(u=(0,i.default)((function*(e,t,n){const r=p(t),i=p(n),o=[d(e,r,i),c(e,r,i)];yield Promise.all(o.map((t=>t?(0,a.handleSingleMsg)(e,t,"bizStateChangeNotification"):null)))}))).apply(this,arguments)}function c(e,t,n){if(!0===(0,l.getGlobalSecurityNotifications)())return t===s.ReducedPrivacyMode.E2EE&&n!==s.ReducedPrivacyMode.E2EE?(0,o.genEncryptNotificationMsg)(e,"e2e_identity_unavailable"):void 0}function d(e,t,n){if(t!==n)switch(n){case s.ReducedPrivacyMode.E2EE:return(0,o.genEncryptNotificationMsg)(e,"encrypt_now");case s.ReducedPrivacyMode.BSP:return(0,o.genNonE2ENotificationMsg)(e,"biz_privacy_mode_to_bsp");case s.ReducedPrivacyMode.FB:return(0,o.genNonE2ENotificationMsg)(e,"biz_privacy_mode_to_fb")}}function p(e){return(0,s.getReducedPrivacyMode)(e.isBusiness?e.privacyMode:null)}},76376:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndUpdateContactPropertiesOnNewChat=function(){return d.apply(this,arguments)},t.updateVerifiedInfo=u;var i=r(n(48926)),o=n(12166),a=n(1619),s=n(46408),l=n(7870);function u(){return c.apply(this,arguments)}function c(){return(c=(0,i.default)((function*(e,t){const{name:n,level:r,isApi:i,isSmb:l,serial:u,privacyMode:c}=t;null!=c&&(yield(0,s.handlePrivacyModeTransition)(e,c,{bypassVerifiedNameUpdate:!0})),(0,a.frontendFireAndForget)("updateContactWithVerifiedName",{contactId:e,verifiedNameInfo:{id:e,name:n,level:r,isApi:i,isSmb:l,privacyMode:c}}),yield(0,o.createOrUpdateVerifiedBusinessName)(e,{level:r,serial:u,name:n,isApi:i,isSmb:l,privacyMode:c?{actualActors:c.actualActors,hostStorage:c.hostStorage,privacyModeTs:c.privacyModeTs}:null})}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){const t=yield(0,l.queryWidExists)(e);if(null==t)return;const{bizInfo:n}=t;n&&(yield u(e,n.verifiedName))}))).apply(this,arguments)}},63336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportType=void 0;const r=n(76672).Mirrored(["Account","Newsletters"]);t.ReportType=r},46408:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getChatInfo=c,t.handlePrivacyModeTransition=function(){return u.apply(this,arguments)};var i=r(n(48926)),o=n(93040),a=n(12166),s=n(1619),l=r(n(81016));function u(){return(u=(0,i.default)((function*(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.isUserNotPSA()||e.isCAPISupportAccount())return;const i=yield c(e,r.chat);if(null==i)return;if(!1===i.isBusiness)return;if(null==i.privacyMode&&null==t)return;if(null!=i.privacyMode&&null!=t&&i.privacyMode.privacyModeTs>=t.privacyModeTs)return;const{bypassVerifiedNameUpdate:o=!1}=r,u={isBusiness:null!==(n=i.isBusiness)&&void 0!==n&&n,privacyMode:i.privacyMode};(0,s.frontendFireAndForget)("updateBusinessInfo",{contactId:e,businessInfo:{isBusiness:!0,isEnterprise:!0,privacyMode:t}}),yield Promise.all([o?null:(0,a.createOrUpdateVerifiedBusinessName)(e,{isApi:!0,isSmb:!1,privacyMode:t?{actualActors:t.actualActors,hostStorage:t.hostStorage,privacyModeTs:t.privacyModeTs}:null},a.VerifiedBusinessNameUpdateType.Merge),(0,l.default)(e,u,{isBusiness:!0,privacyMode:t})])}))).apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e,t){if(null!=t){const e=t.contact.isBusiness;return{isBusiness:e,privacyMode:e?t.contact.privacyMode:null}}const[n,r]=yield Promise.all([(0,o.getChatRecord)(e),(0,a.getVerifiedBusinessNameRecord)(e)]);return null==n?null:null==r?{isBusiness:null}:{isBusiness:!0,privacyMode:null==r.privacyMode?null:(0,a.convertPrivacyModeFromStorageType)(r.privacyMode)}}))).apply(this,arguments)}},16123:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dismissNux=function(e){return s(e,!0)},t.resetNux=function(e){(0,a.removeNUX)(e);const t=(0,i.getNuxSyncKey)(e);if(null!=t)return o.default.unAcknowledgeNux(t);return Promise.resolve()},t.viewNux=s;var i=n(57705),o=r(n(2107)),a=n(46486);function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.getNUX)(e),r=null!=n?n:{views:0},s=(0,a.getNuxMaxViews)(e),l=t?s:r.views+1;if((0,a.setNUX)(e,{views:l}),l>=s){const t=(0,i.getNuxSyncKey)(e);if(null!=t)return o.default.acknowledgeNux(t)}return Promise.resolve()}},77556:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireCallCollection=function(){return m.apply(this,arguments)},t.requireChatCollection=function(){return g.apply(this,arguments)},t.requireClearAppStates=function(){return p.apply(this,arguments)},t.requireContactCollection=function(){return l.apply(this,arguments)},t.requireEmojiAssetMapCreator=function(){return c.apply(this,arguments)},t.requireEmojiConfig=function(){return u.apply(this,arguments)},t.requireHandleVideoStreamingRequest=function(){return f.apply(this,arguments)},t.requireLabelCollection=function(){return _.apply(this,arguments)},t.requireMain=function(){return s.apply(this,arguments)},t.requireMsgCollection=function(){return h.apply(this,arguments)},t.requireSetFrontendHandlers=function(){return S.apply(this,arguments)},t.requireSetWorkerSafeHandlers=function(){return v.apply(this,arguments)},t.requireStatusV3Collection=function(){return d.apply(this,arguments)},t.requireStickerPackCollection=function(){return A.apply(this,arguments)},t.requireVoip=function(){return E.apply(this,arguments)},t.requireVoipCommonDisabled=function(){return y.apply(this,arguments)},t.setMainBundleModules=function(e){return o.resolve(e),e};var i=r(n(48926));const o=new(n(31630).Resolvable);function a(){return o.promise}function s(){return(s=(0,i.default)((function*(){return(yield a()).requireMain()}))).apply(this,arguments)}function l(){return(l=(0,i.default)((function*(){return(yield a()).requireContactCollection()}))).apply(this,arguments)}function u(){return(u=(0,i.default)((function*(){return(yield a()).requireEmojiConfig()}))).apply(this,arguments)}function c(){return(c=(0,i.default)((function*(){return(yield a()).requireEmojiAssetMapCreator()}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){return(yield a()).requireStatusV3Collection()}))).apply(this,arguments)}function p(){return(p=(0,i.default)((function*(){return(yield a()).requireClearAppStates()}))).apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){return(yield a()).requireHandleVideoStreamingRequest()}))).apply(this,arguments)}function _(){return(_=(0,i.default)((function*(){return(yield a()).requireLabelCollection()}))).apply(this,arguments)}function g(){return(g=(0,i.default)((function*(){return(yield a()).requireChatCollection()}))).apply(this,arguments)}function h(){return(h=(0,i.default)((function*(){return(yield a()).requireMsgCollection()}))).apply(this,arguments)}function A(){return(A=(0,i.default)((function*(){return(yield a()).requireStickerPackCollection()}))).apply(this,arguments)}function m(){return(m=(0,i.default)((function*(){return(yield a()).requireCallCollection()}))).apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){return(yield a()).requireVoip()}))).apply(this,arguments)}function y(){return(y=(0,i.default)((function*(){return(yield a()).requireVoipCommonDisabled()}))).apply(this,arguments)}function S(){return(S=(0,i.default)((function*(){return(yield a()).requireSetFrontendHandlers()}))).apply(this,arguments)}function v(){return(v=(0,i.default)((function*(){return(yield a()).requireSetWorkerSafeHandlers()}))).apply(this,arguments)}},88783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryFeaturesClass=t.PrimaryFeatures=void 0;var r=n(43175);class i extends r.BaseModel{constructor(){super(...arguments),this.features=(0,r.prop)(),this.ddmSettings=(0,r.prop)(!1),this.clearAndDeleteChatSync=(0,r.prop)(!1),this.viewOnceSpReceiver=(0,r.prop)(!1),this.recentSticker=(0,r.prop)(!1),this.favoriteSticker=(0,r.prop)(!1),this.linkPreview=(0,r.prop)(!1),this.hqLinkPreview=(0,r.prop)(!1),this.pollCreationInCags=(0,r.prop)(!1),this.newsletter=(0,r.prop)(!1),this.externalWebBetaOptIn=(0,r.prop)(!1),this.historySyncOnDemand=(0,r.prop)(!1),this.webLinkPreviewNseSupport=(0,r.prop)(!1),this.messagePlaceholderResendNseSupport=(0,r.prop)(!1),this.isPrimaryBetaBuild=(0,r.prop)(!1),this.primaryCampaignIdInHistorySyncSupport=(0,r.prop)(!1),this.contactManagement=(0,r.prop)(!1),this.paymentInfoSyncSupport=(0,r.prop)(!1),this.customPaymentMethodsSyncSupport=(0,r.prop)(!1)}setPrimaryFeatures(e){this.features=e;const t=new Set(e);this.ddmSettings=t.has("ddm_settings"),this.clearAndDeleteChatSync=t.has("clear_and_delete_chat_sync"),this.viewOnceSpReceiver=t.has("vo_sp_receiver"),this.recentSticker=t.has("recent_sticker"),this.favoriteSticker=t.has("favorite_sticker"),this.linkPreview=t.has("link_preview"),this.hqLinkPreview=t.has("link_preview_hq_thumbnail"),this.pollCreationInCags=t.has("poll_creation_cag"),this.newsletter=t.has("newsletter"),this.externalWebBetaOptIn=t.has("external_web_beta_opt_in"),this.historySyncOnDemand=t.has("history_sync_on_demand"),this.webLinkPreviewNseSupport=t.has("web_link_preview_nse_support"),this.messagePlaceholderResendNseSupport=t.has("message_placeholder_resend_nse_support"),this.isPrimaryBetaBuild=t.has("is_primary_beta_build"),this.primaryCampaignIdInHistorySyncSupport=t.has("primary_campaign_id_in_history_sync_support"),this.contactManagement=t.has("contact_management"),this.paymentInfoSyncSupport=t.has("payment_info_sync_support"),this.customPaymentMethodsSyncSupport=t.has("custom_payment_methods_sync_support")}}t.PrimaryFeaturesClass=i,i.Proxy="primaryFeatures";const o=new((0,r.defineModel)(i))({id:"1"});t.PrimaryFeatures=o},46316:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Revoke=t.CmdImpl=t.Cmd=t.APP_STATE_SYNC_COMPLETED=void 0;var o=i(n(48926)),a=i(n(81109)),s=i(n(23279)),l=n(2560),u=n(1280),c=n(1204),d=i(n(7880)),p=n(82192),f=n(20992),_=(i(n(89482)),i(n(41143)));const g=n(76672).Mirrored(["Sender","Admin"]);t.Revoke=g;t.APP_STATE_SYNC_COMPLETED="app_state_sync_completed";class h extends d.default{constructor(){super(...arguments),this.isMainLoaded=!1,this.uiBusy=0,this.isMainStreamReadyMd=!1,this.isOfflineDeliveryEnd=!1,this._clearUiBusy=(0,s.default)((()=>{this.uiBusy&&(__LOG__(2)`cmd:clearUIBusy uibusy timeout`,this.uiBusy=0,this._triggerIdleEvent())}),1e3,{maxWait:5e3}),this._triggerIdleEvent=function(e){let t;const n=()=>{if(t)return;t=new r;const{signal:n}=t;(0,c.documentFlushed)({signal:n}).then((()=>{n.aborted||(t=null,e())}),(e=>{if(!(e instanceof Error&&e.name===l.ABORT_ERROR))throw e}))};return n.cancel=()=>{t&&(t.abort(),t=null)},n}((()=>{(0,_.default)(0===this.uiBusy,"ui_idle triggered when uiBusy is %s",this.uiBusy),0===this.uiBusy&&(this._clearUiBusy.cancel(),this.trigger("ui_idle"))}))}mainLoaded(){this.isMainLoaded=!0,this.trigger("main_loaded")}initialLoadReady(){__LOG__(2)`Cmd: initialLoadReady`,this.trigger("initial_load_ready")}logSocketSummary(){this.trigger("log_socket_summary")}muteAll(e,t,n,r){this.trigger("mute_all",e,t,n,r)}muteAllCall(e,t){this.trigger("mute_all_call",e,t)}muteChat(e,t,n){this.trigger("mute_chat",(0,f.unproxy)(e),t,n)}muteChatMultiselect(e,t,n){this.trigger("mute_chat_multiselect",e,t,n)}muteChatFromEntryPoint(e,t,n,r){this.trigger("mute_chat_from_entrypoint",(0,f.unproxy)(e),t,n,r)}assignChat(e,t){this.trigger("assign_chat",(0,f.unproxy)(e),t)}deleteOrExitChat(e,t){this.trigger("delete_or_exit_chat",(0,f.unproxy)(e),t)}deleteOrExitChatFromEntryPoint(e,t,n){this.trigger("delete_or_exit_chat_from_entrypoint",(0,f.unproxy)(e),t,n)}clearChat(e,t){this.trigger("clear_chat",(0,f.unproxy)(e),t)}archiveChat(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.trigger("archive_chat",(0,f.unproxy)(e),t,n)}archiveChatFromEntryPoint(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.trigger("archive_chat_from_entrypoint",(0,f.unproxy)(e),t,n,r)}pinChat(e,t){this.trigger("pin_chat",(0,f.unproxy)(e),t)}favoriteChat(e,t){this.trigger("favorite_chat",(0,f.unproxy)(e),t)}markChatUnread(e,t){this.trigger("mark_chat_unread",(0,f.unproxy)(e),t)}msgInfoDrawer(e){this.trigger("msg_info_drawer",(0,f.unproxy)(e))}chatSearch(e){this.trigger("chat_search",(0,f.unproxy)(e))}scrollChatHeight(e){this.trigger("scroll_chat_by_height",e)}chatInfoDrawer(e,t){this.trigger("chat_info_drawer",(0,f.unproxy)(e),null==t?void 0:t.showFullGroupDescription,null==t?void 0:t.scrollToParticipantList,null==t?void 0:t.sourceGroupChatOrNewsletter,null==t?void 0:t.focusNewsletterDescriptionOnMount,null==t?void 0:t.focusGroupSubjectOnMount,null==t?void 0:t.focusGroupDescriptionOnMount)}editGroupDescription(){this.trigger("edit_group_description")}attachMediaDrawer(e){const t=(0,a.default)((0,a.default)({},e),{},{chat:(0,f.unproxy)(e.chat)});this.trigger("attach_media_drawer",t)}attachProduct(e){this.trigger("attach_product",e)}verificationDrawer(e){this.trigger("verification_drawer",e)}mediaViewerModal(e){const{msg:t,getZoomNode:n,currentTime:r,highlightedMsgIds:i}=e;this.trigger("media_viewer_modal",{msg:t,getZoomNode:n,currentTime:r,highlightedMsgIds:i})}openMediaViewerForAlbumMedia(e){this.trigger("open_media_viewer_for_album_media",e)}productImageViewerModal(e,t){this.trigger("product_image_viewer_modal",e,t)}ephemeralDrawer(e,t,n){this.trigger("ephemeral_drawer",e,t,n)}openCommunityHome(e,t){this.trigger("open_community_home",e,t)}openCommunityTabbedInfo(e,t,n,r){this.trigger("open_community_tabbed_info",e,t,n,r)}openCommunityPendingGroupsDrawer(e){this.trigger("open_community_pending_groups_drawer",e)}openCommunityHomeManageGroups(e){this.trigger("open_community_home_manage_groups",e)}openCommunityInviteLinkDrawer(e){this.trigger("open_community_invite_link_drawer",e)}openCommunitySettingsDrawer(e){this.trigger("open_community_settings_drawer",e)}openCommunitySubgroupJoinModal(e,t){this.trigger("open_subgroup_join_modal",e,t)}openProfile(e){this.trigger("open_profile",e)}openProfileInfoFromNotification(e){this.trigger("open_profile_info_from_notification",e)}communityAddNewGroup(e,t,n){this.trigger("open_community_add_new_group",e,t,n)}openCreatedNewsletter(e){this.trigger("open_created_newsletter",e)}openNewsletterProfile(e,t){this.trigger("open_newsletter_profile",e,t)}editNewsletterDescription(){this.trigger("edit_newsletter_description")}sendStarMsgs(e,t,n,r){this.trigger("send_star_msgs",(0,f.unproxy)(e),t,n,r)}sendUnstarMsgs(e,t,n,r){this.trigger("send_unstar_msgs",(0,f.unproxy)(e),t,n,r)}sendDeleteMsgs(e,t,n,r,i){this.trigger("send_delete_msgs",(0,f.unproxy)(e),t,n,r,i)}sendRevokeMsgs(e,t,n){this.trigger("send_revoke_msgs",(0,f.unproxy)(e),t,n)}_openChat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.ChatEntryPoint.Unknown;const r=(0,f.unproxy)(e);return r.chatEntryPoint=n,new Promise((e=>{this.trigger("open_chat",r,t,n,e)})).catch((e=>{throw __LOG__(2)`Unexpected openChat error: ${String(e)}`,e}))}openChatAt(e,t,n){var r=this;const i=(0,f.unproxy)(e);if(!t)return this.openChatBottom(i,n);this.setUiBusy(!0);const a=this._openChat(i,t,n).then(function(){var e=(0,o.default)((function*(e){let n,i;const o=null==t.enableAnimation||t.enableAnimation;if(e)if(e.wasVisible)n=()=>r._scrollToFocusedMsg({pos:"offset",offset:e.offset}),i=()=>r._scrollToFocusedMsg({pos:"center",animate:o,duration:400,easing:[.7,0,.3,1]});else switch(n=()=>r._scrollToFocusedMsg({pos:e.alignAt}),e.alignAt){case"top":case"bottom":i=()=>r._scrollToFocusedMsg({pos:"center",animate:o,duration:400,easing:[.88,.64,.13,.99]});break;case"center":default:i=()=>Promise.resolve()}else n=()=>r._scrollToFocusedMsg({pos:"center"}),i=()=>Promise.resolve();return yield n(),i()}));return function(){return e.apply(this,arguments)}}()).then((()=>{var e;if(null!=(null==t||null===(e=t.msg)||void 0===e?void 0:e.botPluginReferenceIndex)){var n;const e=null==t||null===(n=t.msg)||void 0===n?void 0:n.botResponseTargetId;null!=e&&this.botTogglePluginSearchDetailsToggle(e,!0)}!0===(null==t?void 0:t.highlightMsg)&&this.flashFocusedMsg(t.highlightMentionMsg)})).then((()=>!0)).catch((0,l.catchAbort)((()=>!1)));return a.finally((()=>{this.setUiBusy(!1)})),a}openChatFromUnread(e,t){const n=(0,f.unproxy)(e);let r;if(n.unreadMsgAnchor&&(r={collection:n.unreadMsgAnchor.msgChunk,promise:Promise.resolve(),msg:n.unreadMsgAnchor,isUnreadDivider:n.shouldShowUnreadDivider}),r||n.unreadCount>0){this.setUiBusy(!0);const e=this._openChat(n,r,t).then((()=>this._scrollToFocusedMsg({pos:"top",offset:-120}))).then((()=>!0)).catch((0,l.catchAbort)((()=>!1)));return e.finally((()=>{this.setUiBusy(!1)})),e}return this.openChatBottom(n,t)}openChatBottom(e,t){const n=(0,f.unproxy)(e);let r;this.setUiBusy(!0),n.msgs.length>0&&(r={collection:n.msgs,msg:n.msgs.last(),isUnreadDivider:!1});const i=this._openChat(n,r,t).then((()=>this._scrollChatToBottom())).then((()=>!0)).catch((0,l.catchAbort)((()=>!1)));return i.finally((()=>{this.setUiBusy(!1)})),i}_scrollToFocusedMsg(e){return new Promise((t=>{this.trigger("scroll_to_focused_msg",t,e)})).catch((e=>{__LOG__(3)`Unexpected_scrollToFocusedMsg error: ${String(e)}`}))}_scrollChatToBottom(){return new Promise((e=>{this.trigger("scroll_chat_to_bottom",e)})).catch((e=>{__LOG__(3)`Unexpected scrollChatToBottom error: ${String(e)}`}))}flashFocusedMsg(e){self.setTimeout((()=>{this.trigger("flash_focused_msg"),e&&this.trigger("flash_mention_msg")}),0)}updateChatlistSelection(e){const t=(0,f.unproxy)(e);this.trigger("update_chatlist_selection",t)}closeChat(e){const t=(0,f.unproxy)(e);this.trigger("close_chat",t)}focusNextChat(e){this.trigger("focus_next_chat",e)}focusPrevChat(e){this.trigger("focus_prev_chat",e)}focusChatSearch(){this.trigger("focus_chat_search")}closeStatusViewer(){this.trigger("close_status_viewer")}openComposeBoxPanel(e){this.trigger("open_compose_box_panel",e)}closeExpressionPanels(){this.trigger("close_expression_panels")}login(e){this.trigger("login",e)}logout(){this.trigger("logout")}openContextMenu(e,t){this.trigger("open_context_menu",e,t)}closeContextMenu(e){this.trigger("close_context_menu",e)}openTooltip(e,t){this.trigger("open_tooltip",e,t)}closeTooltip(e){this.trigger("close_tooltip",e)}alertNewMsg(e){this.trigger("alert_new_msg",e)}newMediaMsg(e){this.trigger("new_media_msg",e)}alertCall(e,t,n,r,i,o){this.trigger("alert_call",{wid:e,msgId:t,isVideo:n,isGroup:r,canHandleLocally:i,isSilenced:o})}cancelCall(e){this.trigger("cancel_call",e)}windowError(){}onPanesWillChange(e){this.trigger("panes_will_change",e)}onPanesDidChange(e){this.trigger("panes_did_change",e)}reactionChangeLastMessage(){this.trigger("reaction_changed_last_msg")}openGroupsV4InviteRequestFlow(e,t,n,r){this.trigger("open_groups_v4_invite_request_flow",e,t,n,r)}toggleLidDebugBadge(){this.trigger("toggle_lid_debug_badge")}openCommandPalette(){this.trigger("open_command_palette")}closeCommandPalette(){this.trigger("close_command_palette")}setUiBusy(e){let t=this.uiBusy||0;e?(++t,this._clearUiBusy(),this._triggerIdleEvent.cancel()):t&&--t,this.uiBusy=t,0===t&&(this._clearUiBusy.cancel(),this._triggerIdleEvent())}windowMouseDown(e){this.trigger("window_mousedown",e)}windowClick(e){this.trigger("window_click",e)}midnight(){this.trigger("midnight")}serverUpdatedClientExpiration(){this.trigger("serverUpdatedClientExpiration")}textsizeChange(e){this.trigger("textsize_change",e)}scrollMessages(){this.trigger("scroll_messages")}getConversationHeaderOffset(e){this.trigger("get_conversation_header_offset",e)}floaterEscapeOverlap(e,t){this.trigger("floater_escape_overlap",e,t)}refreshMessages(){this.trigger("refresh_messages")}readyForMainStreamModeLegacy(){this.trigger("main_stream_mode_ready_legacy")}storageInitializationError(){this.trigger("storage_initialization_error")}editGroupSubject(){this.trigger("edit_group_subject")}endFlow(){this.trigger("end_flow")}refreshQR(){this.trigger("md_refresh_qr")}setSocketState(e){this.trigger("set_socket_state",e)}socketStreamDisconnected(){this.trigger("socket_stream_disconnected")}openSocketStream(){this.trigger("open_socket_stream")}reconnectSocket(){this.trigger("reconnect_socket")}openLongLinkModal(){this.trigger("open_long_link_modal")}closeLongLinkModal(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.trigger("close_long_link_modal",e)}openLockScreenModal(){this.trigger("open_lock_screen_modal")}correctPasscodeLockScreen(e){this.trigger("correct_passcode_lock_screen",e)}incorrectPasscodeLockScreen(){this.trigger("incorrect_passcode_lock_screen")}offlineDeliveryEnd(){this.isOfflineDeliveryEnd=!0,this.trigger("offline_delivery_end")}offlineDeliveryStart(){this.isOfflineDeliveryEnd=!1,this.trigger("offline_delivery_start")}readyForProcessOffline(){__LOG__(2)`Cmd: offline_process_ready`,this.trigger("offline_process_ready")}readyForMainStreamMode(){(0,p.addPageLoadQplPoint)("main_stream_mode_ready"),this.isMainStreamReadyMd=!0,this.trigger("main_stream_mode_ready")}onInitialChatHistorySynced(){this.trigger("on_initial_chat_synced")}onRecentChatHistorySynced(){this.trigger("on_recent_chat_history_synced")}onFullChatHistorySynced(){this.trigger("on_full_chat_history_synced")}onHistorySyncChunkProcessed(e){this.trigger("new_history_sync_chunk_processed",e)}handleOfflineProgressUpdate(){this.trigger("offline_progress_update")}criticalSyncDone(){this.trigger("on_critical_sync_done")}onTemporaryBan(e){this.trigger("account_temporarily_banned",e)}onStartingLogout(){this.trigger("starting_logout")}handleFatalError(){this.trigger("handle_fatal_error")}showServiceUnavailableError(){this.trigger("service_unavailable_503")}merchantDetailsDrawer(e){this.trigger("merchant_details_drawer",e)}showMerchantDetailsEntityTypePopup(e,t){this.trigger("show_merchant_details_entity_type_popup",e,t)}showCountrySelector(e,t,n,r){this.trigger("show_country_selector_popup",e,t,n,r)}toggleStickerMaker(){this.trigger("toggle_sticker_maker")}onAccountSyncForPrivacy(e){this.trigger("account_sync_for_privacy",e)}updateStatusPrivacySettings(e){this.trigger("update_status_privacy_settings",e)}openStickerPack(e){this.trigger("open_sticker_pack",e)}onStatusViewerOpen(){this.trigger("status_viewer_open")}triggerStorageAlert(){}triggerBugReportV2(){}onAbPropsUpdate(e){this.trigger("on_ab_props_update",e)}abPropsLoaded(){this.trigger("ab_props_loaded")}onNotificationPermissionChange(){this.trigger("on_notification_permission_change")}playNextPtv(e){this.trigger("sequential_ptv_playback",e)}botWaitlistStateUpdated(){this.trigger("bot_waitlist_state_updated")}botTogglePluginSearchDetailsToggle(e,t){null!=e?this.trigger(`bot_toggle_plugin_search_details_for_target_id_${e}`,t):__LOG__(3)`Cmd: botTogglePluginSearchDetailsToggle called w/ null target id.`}rerenderApp(){this.trigger("rerender_app")}}t.CmdImpl=h;const A=new h;t.Cmd=A},1204:(e,t,n)=>{"use strict";var r=n(52687).default,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.documentFlushed=function(e){var t;const n=null!==(t=null==e?void 0:e.signal)&&void 0!==t?t:l();return new Promise(((e,t)=>{if(n.aborted)return void t(new a.AbortError);let r;function i(){n.removeEventListener("abort",l);const e=s.indexOf(o);-1!==e&&s.splice(e,1),0===s.length&&null!=r&&(r(),r=null)}function o(){i(),e()}function l(){i(),t(new a.AbortError)}s.push(o),n.addEventListener("abort",l),1===s.length&&(r=function(){let e;const t=window.requestAnimationFrame((()=>{e=self.setTimeout((()=>{u()}),0)}));return()=>{window.cancelAnimationFrame(t),self.clearTimeout(e)}}())}))},t.resolveAllForTestingOnly=void 0;var o=i(n(51463)),a=n(2560);const s=[],l=(0,o.default)((()=>(new r).signal));function u(){for(;s.length>0;){s.shift()()}}t.resolveAllForTestingOnly=()=>(u(),Promise.resolve())},86753:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORM=t.FAQ_BASE_URL=void 0,t.getAboutCommunitiesFaqUrl=function(){return a(0xd2e254c141b4)},t.getAvatarFaqUrl=function(){return a(704225315054890)},t.getBizBot1pLearnMoreUrl=function(){return a(6485307734928964)},t.getBizBot3pDataSharingUrl=function(){return a(306908962283012)},t.getBizBot3pLearnMoreUrl=function(){return a(332114409462050)},t.getBizBotTosLearnMoreUrl=function(){return a(0x4838bde1d2bd9)},t.getBlockingReportingFaqUrl=function(){return a(414631957536067)},t.getBlueFaqUrl=function(){return a(794517045178057)},t.getBotLearnMoreUrl=function(){return"https://www.facebook.com/privacy/guide/genai?entry_point=whatsapp_genai"},t.getBotPrivacyPolicyUrl=function(){return"https://www.facebook.com/privacy/policy"},t.getBotTermsUrl=function(){return"https://www.facebook.com/policies/other-policies/ais-terms"},t.getBusinessFaqUrl=function(){return a(643460927283235)},t.getCagPhoneNumberHidingFaqUrl=function(){return a(831150864932965)},t.getCannotConnectFaqUrl=function(){return a(852892549070029)},t.getCatalogCartOnOffFaqUrl=function(){return a(0x4352f2adeca1c)},t.getCiphertextFaqUrl=function(){return a(0xc1283bbc02b3b)},t.getCodeChangeFaqUrl=function(){return a(0x56a45447edb82)},t.getCoexHostedFaqUrl=function(){return a(0x566e31f78e0b2)},t.getCommunityCreatorPrivacyUrl=function(){return a(625069579217642)},t.getCommunityHomeNuxUrl=function(){return a(570221114584995)},t.getCommunityMemberPrivacyUrl=function(){return a(812356880201038)},t.getConsumerTransparencyHCAUrl=function(){return a(785493319976156)},t.getControlsWhenMessagingBusinessFaqUrl=function(){return a(0x7e2cb5df443c)},t.getDBErrorFaqUrl=function(){return a(821275555582352)},t.getDisableLinkPreviewsFaqUrl=function(){return a(445453537819972)},t.getE2EEnterpriseFaqUrl=function(){return a(0x414dd2b3a1a38)},t.getE2EFaqUrl=function(){return a(820124435853543)},t.getElectronUwpIncompatibleUsersFaqUrl=function(){return a(779581519948320)},t.getEphemeralFaqUrl=function(){return a(673193694148537)},t.getExitCommunityUrl=function(){return a(366296225670044)},t.getFanoutPlaceholderFaqUrl=function(){return a(835452491239734)},t.getFaqUrl=function(){return`${o}/web?lang=${i.default.getNormalizedLocale()}`},t.getFbShopsSunsetFaqUrl=function(){return a(0x4ab5db28ce743)},t.getFrequentlyForwardedFaqUrl=function(){return a(0x3be312350eb3d)},t.getHowToExitAndDeleteGroupsFaq=function(){return a(498814665492149)},t.getIndiaEcommerceComplianceFaqUrl=function(){return a(0x47c7a5f284a82)},t.getJioMartPostcodeChangeLearnMoreLink=function(){return a(832060577920049)},t.getKICFaqUrl=function(){return a(728928448599090)},t.getLinkDeviceFaqUrl=function(){return a(0x4ae517f8c1e42)},t.getLoginFaqUrl=function(){return a(0x4ae517f8c1e42)},t.getMDCodeChangeFaqUrl=function(){return a(820124435853543)},t.getMemberAddedGroupsUrl=function(){return a(0xbab98e7dd597)},t.getMembershipApprovalModeFaqUrl=function(){return a(0x3f215e45fc90d)},t.getMessageEditFaqUrl=function(){return a(6614640168569481)},t.getMessageHistoryOnLinkedDevicesFAQUrl=function(){return a(653480766448040)},t.getNewsletterActivityInforUrl=function(){return a(6480469855345352)},t.getNewsletterAdminInviteFaqUrl=function(){return a(671443411431514)},t.getNewsletterAdminInviteFaqUrlV2=function(){return a(360977646301595)},t.getNewsletterGeosuspendFaqUrl=function(){return a(682987820062997)},t.getNewsletterGuidelinesFaqUrl=function(){return a(0xdf5f14a88ba1)},t.getNewsletterPrivacyLegacyFaqUrl=function(){return a(671443411431514)},t.getNewsletterPrivacyMultiAdminFaqUrl=function(){return a(0x4aeb70db527d3)},t.getNewsletterUpdateEditFaqUrl=function(){return a(0x5816219bc6da1)},t.getNonVerifiedTransitionFaqUrl=function(){return a(677428350267326)},t.getNotificationChromeFaqUrl=function(){return a(819881299156447)},t.getNotificationEdgeFaqUrl=function(){return a(531205362155587)},t.getNotificationFirefoxFaqUrl=function(){return a(0x8405a487f8377)},t.getNotificationOperaFaqUrl=function(){return a(0x40421f1052904)},t.getNotificationSafariFaqUrl=function(){return a(807378207138241)},t.getOrderEphemeralExemptionUrl=function(){return a(673193694148537)},t.getPhoneNumberHidingFaqUrl=function(){return a(626403979060997)},t.getRemoveFromCommunityFaqUrl=function(){return a(0x6a887e3994892)},t.getReportToAdminFaqUrl=function(){return a(919039336073667)},t.getReportUnlawfulContentWebFormUrl=function(){return a(684323127185056)},t.getRequestAccountInfoFAQUrl=function(){return a(526463418847093)},t.getRevokeFaqUrl=function(){return a(0x4de70ed612d6b)},t.getSafetyToolsFaqUrl=function(){return a(0x4aa9d245180bb)},t.getSagaFaqUrl=function(){return a(0x3d9111abd1522)},t.getScreenLockLearnMoreUrl=function(){return a(0x62259b06f65d0)},t.getSharingBusinessInfoForAdsFaqUrl=function(){return a(434854355461483)},t.getSupportChatFaqUrl=function(){return a(676672070766141)},t.getSupportChatSafetyFaqUrl=function(){return a(854037192262196)},t.getSuspiciousLinkFaqUrl=function(){return a(393169153028916)},t.getUnverifiedTransitionFaqUrl=function(){return a(806293963922749)},t.getVerifiedHighFaqUrl=function(){return a(794517045178057)},t.getVerifiedLowUnknownFaqUrl=function(){return a(0x3d103721f87f0)},t.getViewOnceFaqUrl=function(){return a(0x3d38afd59867c)},t.getViewOnceScreenshotProtectionUrl=function(){return a(0xa5d8a23a1f33e)},t.getWAChatFaqUrl=function(){return a(0x4980fdb4e5495)},t.getWhatsAppBusinessPremiumFaqUrl=function(){return a(835833917556304)};var i=r(n(14950));const o="https://faq.whatsapp.com";t.FAQ_BASE_URL=o;function a(e){return`${o}/${e}?lang=${i.default.getNormalizedLocale()}`}t.PLATFORM="web"},74784:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(19194)),a=r(n(26857));const s=n(76672)({WWW:"WWW",WAJS:"WAJS"});class l extends a.default{constructor(){super(...arguments),this.matchAction=e=>e===o.default.WEB_BUILD_INFO,this.onAction=function(){var e=(0,i.default)((function*(e,t){t===s.WWW&&(__LOG__(2)`Unregistering current service worker (${s.WAJS}) due to a mismatch with web app`,self.registration.unregister().then((e=>{e&&__LOG__(2)`Service worker unregistered successfully.`})).catch((e=>{__LOG__(4,void 0,new Error,!0)`service-worker-build-mismatch-unregistration-failure: ${e.stack}`,SEND_LOGS("service-worker-build-mismatch-unregistration-failure")})))}));return function(){return e.apply(this,arguments)}}()}}t.default=l},40478:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(93042),a=n(17761),s=r(n(26857)),l=n(38117);let u=!1;class c extends s.default{constructor(){super(...arguments),this.matchPeriodicSync=()=>!0,this.onPeriodicSync=function(){var e=(0,i.default)((function*(e){if(!(0,a.canSupportPeriodicBackgroundSync)())return __LOG__(4,void 0,new Error,!0)`[background-sync] Invalid access`,SEND_LOGS("background-sync-invalid-access"),Promise.resolve();if("background-sync"!==e.tag)return __LOG__(4,void 0,new Error,!0)`[background-sync] Received an unknown tag: ${e.tag}`,SEND_LOGS("background-sync-received-unknown-tag"),Promise.resolve();if(u||(0,o.getComms)())return Promise.resolve();u=!0;const t=yield self.clients.matchAll({type:"window"});if((null==t?void 0:t.length)>0)return __LOG__(4,void 0,new Error,!0)`[background-sync] Skip background sync due to active web pages exist`,void SEND_LOGS("background-sync-called-while-active-pages-exist");__LOG__(2)`[background-sync] Starting backend for background sync`;n(68231).WorkerOfflineResumeReporter.logWorkerInitialized(l.OFFLINE_PROCESS_RUN_REASONS.PERIODIC_BACKGROUND_SYNC);const r=n(40704);yield r.initializeDb(),r.handlePushNotification()}));return function(){return e.apply(this,arguments)}}()}}t.default=c},11157:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(93948)),o=r(n(19194)),a=r(n(26857));class s extends a.default{constructor(){super(...arguments),this.matchAction=e=>e===o.default.ACTIVE_TAB,this.onAction=()=>i.default.broadcast(o.default.ACTIVE_TAB)}}t.default=s},83933:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(19194)),a=r(n(26857));class s extends a.default{constructor(){var e;super(...arguments),e=this,this.matchFetch=e=>{const{request:t}=e,n=a.default.parseUrl(t.url);return t.method===a.default.RequestType.GET&&!!n&&n.base===self.registration.scope&&!!n.relativePath.match("^img/")},this.onFetch=function(){var t=(0,i.default)((function*(t){const{request:n}=t,r=yield e.cache.matchOrFetch(n);return r.ok?r:e.cache.fetchAndPut(n)}));return function(){return t.apply(this,arguments)}}(),this.matchAction=e=>o.default.CLEAN_ASSETS===e,this.onAction=function(){var t=(0,i.default)((function*(t,n){const r=new Set(n),i=yield e.cache.keys();if(!i)return;const o=[];return i.forEach((e=>{const t=e.url.lastIndexOf("/")+1,n=e.url.slice(t);r.has(n)||o.push(e)})),Promise.all(o.map((t=>e.cache.delete(t))))}));return function(){return t.apply(this,arguments)}}()}}t.default=s},52612:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(93948)),a=r(n(89482));t.default=e=>{self.addEventListener("install",(function(t){__LOG__(2)`Installing...`;const n=e.filter((e=>e.matchInstall(t))).map((e=>Promise.resolve(e.onInstall(t))));t.waitUntil(Promise.all(n).then((()=>self.skipWaiting())).catch((e=>{__LOG__(3)`onInstall error: ${String(e)}`})))})),self.addEventListener("activate",(function(t){__LOG__(2)`Activating...`;const n=e.filter((e=>e.matchActivate(t))).map((e=>e.onActivate(t)));t.waitUntil(self.clients.claim().then((()=>Promise.all(n))).catch((e=>{__LOG__(3)`onActivate error: ${e}.`})))})),self.addEventListener("fetch",(function(t){const n=e.find((e=>e.matchFetch(t)));if(n)return t.respondWith(n.onFetch(t))})),self.addEventListener("push",(function(t){const n=e.find((e=>e.matchPush(t)));if(n)return n.onPush(t)})),self.addEventListener("notificationclick",(function(t){const n=e.find((e=>e.matchNotificationClick(t)));if(n)return n.onNotificationClick(t)})),self.addEventListener("periodicsync",function(){var t=(0,i.default)((function*(t){const n=e.find((e=>e.matchPeriodicSync(t)));if(n)return n.onPeriodicSync(t)}));return function(){return t.apply(this,arguments)}}());new o.default((t=>{let{action:n,message:r}=t;const i=e.find((e=>e.matchAction(n)));return i?i.onAction(n,r):Promise.reject((0,a.default)(`Invalid Action: ${n}`))})).init()}},58043:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(19194)),a=r(n(23735)),s=r(n(26857)),l=r(n(5420));class u extends s.default{constructor(e,t){var n;super(e,t),n=this,this.matchInstall=()=>!0,this.onInstall=function(){var e=(0,i.default)((function*(){const e=yield n.store.get("l10n");return n.cacheObject.hashedResources.push(...n.cachedL10nHashes(n.cacheObject,e)),n.cache.update(n.cacheObject.hashedResources,n.cacheObject.unhashedResources)}));return function(){return e.apply(this,arguments)}}(),this.matchActivate=()=>!0,this.onActivate=()=>this.cache.cleanup(),this.matchFetch=e=>{const{request:t}=e,n=s.default.parseUrl(t.url);return t.method===s.default.RequestType.GET&&!this.isCacheStale()&&!!n&&n.base===self.registration.scope&&this.cacheList.has(n.relativePath)},this.onFetch=e=>{const{request:t}=e,n=s.default.parseUrl(t.url);return n?this.cache.matchOrFetch(t,`${n.base}${n.relativePath}`):self.fetch(t)},this.matchAction=e=>e===o.default.SET_L10N,this.onAction=function(){var e=(0,i.default)((function*(e,t){const r=yield n.store.get("l10n");if(r&&t.locale===r.locale)return;const[i]=n.cachedL10nHashes(n.cacheObject,t);if(!i)return n.store.delete("l10n");const o=`${self.registration.scope}${l.default.getIndexPath(t)}`;return Promise.all([n.cache.fetchAndPut(o,self.registration.scope),n.store.put("l10n",{locale:t.locale,isRTL:t.isRTL})])}));return function(){return e.apply(this,arguments)}}(),this.cacheObject=a.default,this.cacheList=new Set([...this.cacheObject.hashedResources,...this.cacheObject.unhashedResources,...Object.keys(this.cacheObject.l10n.locales).map((e=>this.cacheObject.l10n.locales[e]))])}cachedL10nHashes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{locale:n}=t,r=e.l10n.locales[n];return r?[r]:[]}isCacheStale(){return(new Date).getTime()-this.cacheObject.releaseDate>=2592e6}}t.default=u},67719:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(45588)),a=r(n(5420));const s=o.default.prefs,l=self.caches.keys(),u=/wa\d+\.\d+\.\d+(\.[id])?(\.canary)?$/,c=["wa-pp","wa-assets","wa-stickers","wa_web_user_prefs_cache_store"];function d(e){this.cacheName=e,this.openCachePromise=self.caches.open(this.cacheName)}function p(){return(p=(0,i.default)((function*(e){try{const t=(yield l).find((t=>t!==e&&u.test(t)));if(t)return new d(t)}catch(e){__LOG__(3)`Could not find previous cache, current cache:${this.cacheName}, error: ${e}`}}))).apply(this,arguments)}d.prototype={update(e,t){var n=this;return(0,i.default)((function*(){try{const r=yield function(){return p.apply(this,arguments)}(n.cacheName);if(!r)return;return __LOG__(2)`Updating cache: ${n.cacheName}`,s.get("l10n").then((i=>Promise.all(n.prefetchHashedResources(e,r).concat(n.prefetchUnhashedResources(t,i)))))}catch(e){__LOG__(3)`Error occured while updating cache:${n.cacheName}, error: ${e}`}}))()},prefetchHashedResources(e,t){var n=this;return e.map(function(){var e=(0,i.default)((function*(e){const r=self.registration.scope+e,i=yield t.match(r).catch((e=>{__LOG__(3)`Unable to match prev. cache, cache name: ${t.cacheName}, request: ${r}, error: ${e}`}));return i?n.put(r,i):n.fetchAndPut(r)}));return function(){return e.apply(this,arguments)}}())},prefetchUnhashedResources(e,t){return e.map((e=>""===e?this.fetchAndPut(self.registration.scope+a.default.getIndexPath(t),self.registration.scope,{cache:"reload"}):this.fetchAndPut(self.registration.scope+e)))},cleanup(){var e=this;return(0,i.default)((function*(){const t=yield l;return Promise.all(t.map((t=>{if(t!==e.cacheName&&!c.includes(t))return self.caches.delete(t).catch((n=>{__LOG__(3)`Unable to delete cache: ${t}, current cache: ${e.cacheName}, error: ${n}`}))})))}))()},matchOrFetch(e,t,n){var r=this;return(0,i.default)((function*(){const i=t||_(e);return(yield r.match(i))||r.fetchAndPut(e,i,n)}))()},fetchAndPut(e,t,n){var r=this;return(0,i.default)((function*(){const i=a.default.manuallyCloneRequest(e,void 0,{redirect:"manual",mode:"cors"});try{const o=yield self.fetch(i,n);if(o.ok){const n=t||_(e);r.put(n,o.clone())}else"opaqueredirect"!==o.type&&__LOG__(3)`Received invalid response, url: ${o.url}, status: ${o.status}, type: ${o.type}`;return o}catch(t){throw __LOG__(3)`Unable to fetch request: ${_(e)}, error: ${t}`,t}}))()},reset(){return this.openCachePromise=self.caches.delete(this.cacheName).then((()=>self.caches.open(this.cacheName)))},match(e,t){var n=this;return(0,i.default)((function*(){try{const r=yield n.openCachePromise;return yield r.match(e,t)}catch(t){__LOG__(3)`Unable to match request: ${_(e)}, in cache: ${n.cacheName}, error: ${t}`}}))()},put(e,t){var n=this;return(0,i.default)((function*(){try{const r=yield n.openCachePromise;return yield r.put(e,t)}catch(r){__LOG__(3)`Unable to put in cache: ${n.cacheName}, request: ${_(e)}, response status: ${t.status}, error: ${r}`}}))()},delete(e,t){var n=this;return(0,i.default)((function*(){try{const r=yield n.openCachePromise;return yield r.delete(e,t)}catch(t){__LOG__(3)`Unable to delete request: ${_(e)}, in cache: ${n.cacheName}, error: ${t}`}}))()},keys(e,t){var n=this;return(0,i.default)((function*(){try{const r=yield n.openCachePromise;return yield r.keys(e,t)}catch(t){__LOG__(3)`Unable to match request: ${_(e)}, in cache: ${n.cacheName}, error: ${t}`}}))()}};var f=d;function _(e){return e instanceof Request?e.url:e}t.default=f},23735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={version:"2.2413.51",hashedResources:["1761.e8cd501ae0ca9bb04415.js","app.bef47f0e950ecf25e0c9.js","early_error_handling.582903ec09c4b28267b1.js","lazy_loaded_business_direct_utils.f96a5ca580de609f9909.js","lazy_loaded_ca_root_certificates.6946132061eec11f049e.js","lazy_loaded_high_priority_components.4c3e1786fbdd0d299592.js","lazy_loaded_high_priority_components~lazy_loaded_low_priority_components.c8b213c15a1418ac4956.js","lazy_loaded_lottie.07e6bac35c36cd8557b0.js","lazy_loaded_low_priority_components.96f00f929f17e5b58726.js","lazy_loaded_low_priority_components~.64203b6020e6b187131c.js","lazy_loaded_remove_direct_connection_keys.9043d9b73f81e32a443c.js","libsignal-protocol-ee5b8ba.min.js","main.bae8a4710ee3af8056dc.js","main~.f4046bd714178dbbb8c1.js","pdf.worker.96d1bc1f3d0105cd5a81bae7a9dad228.js","runtime.00d7598360b273498a49.js","vendor1~app.19fae7fcea5fe7cf1abd.js","vendors~lazy_loaded_business_direct_utils.afb9430dbfa7233c1b0b.js","vendors~lazy_loaded_high_priority_components~lazy_loaded_low_priority_components.7b105e2b2b4c8814f03e.js","vendors~lazy_loaded_low_priority_components.05e98054dbd60f980427.js","vendors~lazy_loaded_relay.bd7483c77bd9b8092f5d.js","vendors~main.75ffa609850dd95ab8d9.js","vendors~pdf.8a0a1c582ecbe572e2af.js","app-ed6226a6bbc2999ba40c.css","browsers_e8f6c2a0f8bab9ae00f5.css","lazy_loaded_high_priority_components.cf3b2b2022924e355ee2.css","lazy_loaded_low_priority_components.2ba7294e3d2cfb9c348a.css","main.f5f2c0a329b1dfacf48d.css","stylex-2778c211184d06faa3f5e13badd0db70.css"],unhashedResources:["43896fdb23710d48ff5791ba4143f555.wasm","apple-touch-icon.png","assets-manifest-2.2413.51.json","binary-transparency-manifest-2.2413.51.json","bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf","crossdomain.xml","favicon-48x48.ico","favicon-64x64.ico","favicon.ico","manifest-apple.json","manifest.json","notification_2a485d84012c106acef03b527bb54635.mp3","noto_emoji_regular_74a68c7003890e207589ea43dc7572ca.ttf","robots.txt","sequential-ptt-end_62ed28be622237546fd39f9468a76a49.mp3","sequential-ptt-middle_7fa161964e93db72b8d00ae22189d75f.mp3","whatsapp_pwa_apple_icon_128.png","whatsapp_pwa_apple_icon_16.png","whatsapp_pwa_apple_icon_192.png","whatsapp_pwa_apple_icon_32.png","whatsapp_pwa_apple_icon_512.png","whatsapp_pwa_apple_icon_512.svg","whatsapp_pwa_apple_icon_60.png","whatsapp_pwa_apple_icon_64.png","whatsapp_pwa_apple_icon_90.png","whatsapp_pwa_icon_128.png","whatsapp_pwa_icon_16.png","whatsapp_pwa_icon_192.png","whatsapp_pwa_icon_32.png","whatsapp_pwa_icon_512.png","whatsapp_pwa_icon_512.svg","whatsapp_pwa_icon_60.png","whatsapp_pwa_icon_64.png","whatsapp_pwa_icon_90.png","whatsapp-webclient-login_c09223f0813e7c3adc16476cba2a5d0d.mp4","whatsapp-webclient-login-hq_0e0caf2391158ebc09fe32edd1022d03.mp4"],l10n:{locales:{"[request].b98bbf93207e830eba38.js":"locales/[request].b98bbf93207e830eba38.js","af.fd111a4be8c0643e8f46.js":"locales/af.fd111a4be8c0643e8f46.js","ar-XB.f8dd33c5f5a0e89243cd.js":"locales/ar-XB.f8dd33c5f5a0e89243cd.js","ar.b266b11d1f184b9cf707.js":"locales/ar.b266b11d1f184b9cf707.js","az.20727eb4d76ed0935b09.js":"locales/az.20727eb4d76ed0935b09.js","bg.a380ee89660cbf3a2f32.js":"locales/bg.a380ee89660cbf3a2f32.js","bn.318c6e9d66f2fc040233.js":"locales/bn.318c6e9d66f2fc040233.js","ca.f63f845a6080e748f90b.js":"locales/ca.f63f845a6080e748f90b.js","cs.b2bdf774b63f2128aa64.js":"locales/cs.b2bdf774b63f2128aa64.js","da.cf16c6d7d105ae1b5fac.js":"locales/da.cf16c6d7d105ae1b5fac.js","de.42a325566e5dfd986d72.js":"locales/de.42a325566e5dfd986d72.js","el.0792ec2e70dec6e21d1b.js":"locales/el.0792ec2e70dec6e21d1b.js","en.aed9047257c0675a67b4.js":"locales/en.aed9047257c0675a67b4.js","es.22e9fd62fbe0ec7edc10.js":"locales/es.22e9fd62fbe0ec7edc10.js","et.11325c740927d4375f09.js":"locales/et.11325c740927d4375f09.js","fa.f38663b1e030239cf458.js":"locales/fa.f38663b1e030239cf458.js","fi.c9f6171a5c811d41b637.js":"locales/fi.c9f6171a5c811d41b637.js","fil.d42534220457d1d683da.js":"locales/fil.d42534220457d1d683da.js","fr.2e9fe9868df508a98c63.js":"locales/fr.2e9fe9868df508a98c63.js","gu.5d4362189237cae99be9.js":"locales/gu.5d4362189237cae99be9.js","he.69f740faa21a5b489f8e.js":"locales/he.69f740faa21a5b489f8e.js","hi.6cca619f8cd0287b8f15.js":"locales/hi.6cca619f8cd0287b8f15.js","hr.c3405395dbcb1a6854ff.js":"locales/hr.c3405395dbcb1a6854ff.js","hu.682195af67a3cfe7f00e.js":"locales/hu.682195af67a3cfe7f00e.js","id.8ca6a442764117ac8113.js":"locales/id.8ca6a442764117ac8113.js","it.04bb7c0c0e0776e2ab61.js":"locales/it.04bb7c0c0e0776e2ab61.js","ja.01d28aac08733d02ac8f.js":"locales/ja.01d28aac08733d02ac8f.js","kk.97ef313a7a40b783e509.js":"locales/kk.97ef313a7a40b783e509.js","kn.355b281fa5f7c0247170.js":"locales/kn.355b281fa5f7c0247170.js","ko.1aca338b859d5dec392a.js":"locales/ko.1aca338b859d5dec392a.js","lt.9995cbf4477c22cc5ceb.js":"locales/lt.9995cbf4477c22cc5ceb.js","lv.3537f20d730f3545c9e7.js":"locales/lv.3537f20d730f3545c9e7.js","mk.fc42df54923fa78126f8.js":"locales/mk.fc42df54923fa78126f8.js","ml.8bc463ceb5e5307fbef8.js":"locales/ml.8bc463ceb5e5307fbef8.js","mr.88b5d23d245ca2b1387c.js":"locales/mr.88b5d23d245ca2b1387c.js","ms.40150ee35106642d4563.js":"locales/ms.40150ee35106642d4563.js","nb.e5519f17b581dccf2f24.js":"locales/nb.e5519f17b581dccf2f24.js","nl.0757df6e9c913453fd8e.js":"locales/nl.0757df6e9c913453fd8e.js","pa.be88f2b64b9000f15800.js":"locales/pa.be88f2b64b9000f15800.js","pl.645dd8868802b2efec18.js":"locales/pl.645dd8868802b2efec18.js","pt-BR.a50033ae49bfca221cf7.js":"locales/pt-BR.a50033ae49bfca221cf7.js","pt.c52c23d8f0295ec947ac.js":"locales/pt.c52c23d8f0295ec947ac.js","ro.07498459b0231dd4602a.js":"locales/ro.07498459b0231dd4602a.js","ru.e6df3f0e384311f8162d.js":"locales/ru.e6df3f0e384311f8162d.js","sk.13ce993d035ffe57ddaf.js":"locales/sk.13ce993d035ffe57ddaf.js","sl.984ac87c3ce5a92aba3f.js":"locales/sl.984ac87c3ce5a92aba3f.js","sq.54db4a62b68db80316f0.js":"locales/sq.54db4a62b68db80316f0.js","sr.eb18f14a4fbefaf59c64.js":"locales/sr.eb18f14a4fbefaf59c64.js","sv.5cc578d3c52b68a4f816.js":"locales/sv.5cc578d3c52b68a4f816.js","sw.12d71dcb4e08c1daa9e3.js":"locales/sw.12d71dcb4e08c1daa9e3.js","ta.a4b98118da9ccb9041d2.js":"locales/ta.a4b98118da9ccb9041d2.js","te.1474b0991f6e14e40d22.js":"locales/te.1474b0991f6e14e40d22.js","th.740580524b88bf4f1280.js":"locales/th.740580524b88bf4f1280.js","tr.e60b9e089d9f1bb2f6ca.js":"locales/tr.e60b9e089d9f1bb2f6ca.js","uk.631fdbe4af5fe0f65c9c.js":"locales/uk.631fdbe4af5fe0f65c9c.js","ur.691e69e391af080dce99.js":"locales/ur.691e69e391af080dce99.js","uz.0b4e974b71c13d65dd23.js":"locales/uz.0b4e974b71c13d65dd23.js","vi.474fcbeaa09744241988.js":"locales/vi.474fcbeaa09744241988.js","WAWebCountriesLocaleAF-js.722bd194ed4033b2a97f.js":"locales/WAWebCountriesLocaleAF-js.722bd194ed4033b2a97f.js","WAWebCountriesLocaleAR-js.6c5d07e1ed320ba9a501.js":"locales/WAWebCountriesLocaleAR-js.6c5d07e1ed320ba9a501.js","WAWebCountriesLocaleAZ-js.7854cdb15b685875d974.js":"locales/WAWebCountriesLocaleAZ-js.7854cdb15b685875d974.js","WAWebCountriesLocaleBG-js.f8ad21559ff0126951b4.js":"locales/WAWebCountriesLocaleBG-js.f8ad21559ff0126951b4.js","WAWebCountriesLocaleBN-js.15351c7fa2a2f4be52eb.js":"locales/WAWebCountriesLocaleBN-js.15351c7fa2a2f4be52eb.js","WAWebCountriesLocaleCA-js.281b73966e2020c940ec.js":"locales/WAWebCountriesLocaleCA-js.281b73966e2020c940ec.js","WAWebCountriesLocaleCS-js.524736b77f7e45ab3dcc.js":"locales/WAWebCountriesLocaleCS-js.524736b77f7e45ab3dcc.js","WAWebCountriesLocaleDA-js.160e7c243218685c8e0e.js":"locales/WAWebCountriesLocaleDA-js.160e7c243218685c8e0e.js","WAWebCountriesLocaleDE-js.b2c12a256d9b79f6c5ea.js":"locales/WAWebCountriesLocaleDE-js.b2c12a256d9b79f6c5ea.js","WAWebCountriesLocaleEL-js.4b4b37f209de718fa6b7.js":"locales/WAWebCountriesLocaleEL-js.4b4b37f209de718fa6b7.js","WAWebCountriesLocaleEN-js.6879fd44c417f8e1af5d.js":"locales/WAWebCountriesLocaleEN-js.6879fd44c417f8e1af5d.js","WAWebCountriesLocaleES-js.4427f5b127051953b771.js":"locales/WAWebCountriesLocaleES-js.4427f5b127051953b771.js","WAWebCountriesLocaleET-js.91ac4ffbbd11278e3095.js":"locales/WAWebCountriesLocaleET-js.91ac4ffbbd11278e3095.js","WAWebCountriesLocaleFA-js.cf6dde4c6bafacc0544b.js":"locales/WAWebCountriesLocaleFA-js.cf6dde4c6bafacc0544b.js","WAWebCountriesLocaleFI-js.b3ae2d1181320145591a.js":"locales/WAWebCountriesLocaleFI-js.b3ae2d1181320145591a.js","WAWebCountriesLocaleFIL-js.eae4fd3f37ed54922a46.js":"locales/WAWebCountriesLocaleFIL-js.eae4fd3f37ed54922a46.js","WAWebCountriesLocaleFR-js.80617fafba11d65cbc35.js":"locales/WAWebCountriesLocaleFR-js.80617fafba11d65cbc35.js","WAWebCountriesLocaleGU-js.107e2b254914d1728961.js":"locales/WAWebCountriesLocaleGU-js.107e2b254914d1728961.js","WAWebCountriesLocaleHE-js.3039eabedd70768b3959.js":"locales/WAWebCountriesLocaleHE-js.3039eabedd70768b3959.js","WAWebCountriesLocaleHI-js.8ac6b07fd9a3e20f55fd.js":"locales/WAWebCountriesLocaleHI-js.8ac6b07fd9a3e20f55fd.js","WAWebCountriesLocaleHR-js.a5d0227555b8b38113be.js":"locales/WAWebCountriesLocaleHR-js.a5d0227555b8b38113be.js","WAWebCountriesLocaleHU-js.cba60d286a472847b9e5.js":"locales/WAWebCountriesLocaleHU-js.cba60d286a472847b9e5.js","WAWebCountriesLocaleID-js.1872e95d3788a26fe528.js":"locales/WAWebCountriesLocaleID-js.1872e95d3788a26fe528.js","WAWebCountriesLocaleIT-js.fb8b379d945438d85fd2.js":"locales/WAWebCountriesLocaleIT-js.fb8b379d945438d85fd2.js","WAWebCountriesLocaleJA-js.f39d11bef0bca0684219.js":"locales/WAWebCountriesLocaleJA-js.f39d11bef0bca0684219.js","WAWebCountriesLocaleKK-js.9464c5bdcd5a7dc18d08.js":"locales/WAWebCountriesLocaleKK-js.9464c5bdcd5a7dc18d08.js","WAWebCountriesLocaleKN-js.06c8cfb6be413ebd677e.js":"locales/WAWebCountriesLocaleKN-js.06c8cfb6be413ebd677e.js","WAWebCountriesLocaleKO-js.c4df0d1149d443296e6d.js":"locales/WAWebCountriesLocaleKO-js.c4df0d1149d443296e6d.js","WAWebCountriesLocaleLT-js.36a9755e8d02f98c9c8e.js":"locales/WAWebCountriesLocaleLT-js.36a9755e8d02f98c9c8e.js","WAWebCountriesLocaleLV-js.3d9eaff2753fbd0cd2e7.js":"locales/WAWebCountriesLocaleLV-js.3d9eaff2753fbd0cd2e7.js","WAWebCountriesLocaleMK-js.c19ce14470e75fe9d744.js":"locales/WAWebCountriesLocaleMK-js.c19ce14470e75fe9d744.js","WAWebCountriesLocaleML-js.ffafe49f675e3146daa7.js":"locales/WAWebCountriesLocaleML-js.ffafe49f675e3146daa7.js","WAWebCountriesLocaleMR-js.c8b9b53a6407f597aa83.js":"locales/WAWebCountriesLocaleMR-js.c8b9b53a6407f597aa83.js","WAWebCountriesLocaleMS-js.adca7aa1834e2ffe9afb.js":"locales/WAWebCountriesLocaleMS-js.adca7aa1834e2ffe9afb.js","WAWebCountriesLocaleNB-js.4cffbb6867ea043b1f5c.js":"locales/WAWebCountriesLocaleNB-js.4cffbb6867ea043b1f5c.js","WAWebCountriesLocaleNL-js.3287b67ebc9fd4a6dfcc.js":"locales/WAWebCountriesLocaleNL-js.3287b67ebc9fd4a6dfcc.js","WAWebCountriesLocalePA-js.daec91ad833087e937b8.js":"locales/WAWebCountriesLocalePA-js.daec91ad833087e937b8.js","WAWebCountriesLocalePL-js.0cbafd870b040fc2430c.js":"locales/WAWebCountriesLocalePL-js.0cbafd870b040fc2430c.js","WAWebCountriesLocalePT-js.ec51c39477ff5c10a5fb.js":"locales/WAWebCountriesLocalePT-js.ec51c39477ff5c10a5fb.js","WAWebCountriesLocaleRO-js.0ef9ed28a90f004bb2ee.js":"locales/WAWebCountriesLocaleRO-js.0ef9ed28a90f004bb2ee.js","WAWebCountriesLocaleRU-js.0baef9e1320935404d97.js":"locales/WAWebCountriesLocaleRU-js.0baef9e1320935404d97.js","WAWebCountriesLocaleSK-js.53123c3ab87aa2c949dc.js":"locales/WAWebCountriesLocaleSK-js.53123c3ab87aa2c949dc.js","WAWebCountriesLocaleSL-js.4028a20691b65e43b9eb.js":"locales/WAWebCountriesLocaleSL-js.4028a20691b65e43b9eb.js","WAWebCountriesLocaleSQ-js.dcdd36a9efd25f268e93.js":"locales/WAWebCountriesLocaleSQ-js.dcdd36a9efd25f268e93.js","WAWebCountriesLocaleSR-js.d15578ec4baa9c985233.js":"locales/WAWebCountriesLocaleSR-js.d15578ec4baa9c985233.js","WAWebCountriesLocaleSV-js.a4809217fb5ebf3d3ade.js":"locales/WAWebCountriesLocaleSV-js.a4809217fb5ebf3d3ade.js","WAWebCountriesLocaleSW-js.e701aa8bf729a8fa821d.js":"locales/WAWebCountriesLocaleSW-js.e701aa8bf729a8fa821d.js","WAWebCountriesLocaleTA-js.22d2f8b375db32c0452f.js":"locales/WAWebCountriesLocaleTA-js.22d2f8b375db32c0452f.js","WAWebCountriesLocaleTE-js.58ef5ce5f23453f32e9b.js":"locales/WAWebCountriesLocaleTE-js.58ef5ce5f23453f32e9b.js","WAWebCountriesLocaleTH-js.5cadb207c54cf7fe1af9.js":"locales/WAWebCountriesLocaleTH-js.5cadb207c54cf7fe1af9.js","WAWebCountriesLocaleTR-js.5a1af588d4b3430a8ef6.js":"locales/WAWebCountriesLocaleTR-js.5a1af588d4b3430a8ef6.js","WAWebCountriesLocaleUK-js.4d4e59a0c15ae2198142.js":"locales/WAWebCountriesLocaleUK-js.4d4e59a0c15ae2198142.js","WAWebCountriesLocaleUR-js.d20ecabe90eb360f8e85.js":"locales/WAWebCountriesLocaleUR-js.d20ecabe90eb360f8e85.js","WAWebCountriesLocaleUZ-js.6b9eedf73a87bc19872b.js":"locales/WAWebCountriesLocaleUZ-js.6b9eedf73a87bc19872b.js","WAWebCountriesLocaleVI-js.2fc5d01f81c86067af96.js":"locales/WAWebCountriesLocaleVI-js.2fc5d01f81c86067af96.js","WAWebCountriesLocaleZH-CN-js.f00ea98e7132e7817fef.js":"locales/WAWebCountriesLocaleZH-CN-js.f00ea98e7132e7817fef.js","WAWebCountriesLocaleZH-HK-js.7ba9501ff0db4d01fc9f.js":"locales/WAWebCountriesLocaleZH-HK-js.7ba9501ff0db4d01fc9f.js","WAWebCountriesLocaleZH-TW-js.df4491710bb0e1943b79.js":"locales/WAWebCountriesLocaleZH-TW-js.df4491710bb0e1943b79.js","zh-CN.28b705759693a8f96054.js":"locales/zh-CN.28b705759693a8f96054.js","zh-HK.aa068182ef4f77158ee4.js":"locales/zh-HK.aa068182ef4f77158ee4.js","zh-TW.012388252bf43a70261f.js":"locales/zh-TW.012388252bf43a70261f.js"},styles:{}},releaseDate:1712014155903}},26857:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(28123),o=r(n(89482));const a=new RegExp(`(${self.registration.scope}|${i.DYN_ORIGIN}|https://dyn.web.whatsapp.com/)([^?]*)(?:\\?(.*))?`);class s{static parseUrl(e){const t=e.match(a);if(!t)return;let n;if(t[3]){const r={},i=new Set;t[3].split("&").forEach((t=>{const[n,a]=t.split("="),s=n.toLowerCase();if(i.has(s))throw __LOG__(4,void 0,new Error)`Unexpected duplicated query param: ${n}=${a} in the url: ${e}`,(0,o.default)("Detected url with duplicated query param");i.add(s),r[n]=a})),n=r}return{base:t[1],relativePath:t[2],queryParams:n}}static convertToUrl(e,t){const n=Object.keys(t).map((e=>[e,t[e]].map(encodeURIComponent).join("="))).join("&");return n.length?e.endsWith("/")?`${e}?${n}`:`${e}/?${n}`:e}constructor(e,t){this.matchFetch=()=>!1,this.matchAction=()=>!1,this.matchInstall=()=>!1,this.matchActivate=()=>!1,this.matchPush=()=>!1,this.matchNotificationClick=()=>!1,this.matchPeriodicSync=()=>!1,this.cache=e,this.store=t}}t.default=s,s.RequestType={GET:"GET"}},23006:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(78494),a=r(n(19194)),s=r(n(26857));const l=1e4,u=n(76672)({START:"start",END:"end",PING:"ping"}),c=n(76672).Mirrored(["ACTIVE","INACTIVE"]);class d extends s.default{constructor(){var e;super(...arguments),e=this,this._timer=null,this.heartbeatStatus=c.INACTIVE,this.previousHeartbeatTimestamp=self.performance.now(),this.counter=0,this.matchAction=e=>e===a.default.HEARTBEAT,this.onAction=function(){var t=(0,i.default)((function*(t,n){switch(n){case u.START:if(e.heartbeatStatus===c.ACTIVE)return;return e.heartbeatStatus=c.ACTIVE,e.previousHeartbeatTimestamp=self.performance.now(),e.counter=0,void e._registerChecker();case u.END:if(e.heartbeatStatus!==c.ACTIVE)return;return e.heartbeatStatus=c.INACTIVE,e.previousHeartbeatTimestamp=0,void e._unregisterChecker();case u.PING:{if(e.heartbeatStatus!==c.ACTIVE)return;const t=self.performance.now();return void(e.previousHeartbeatTimestamp=t)}}__LOG__(4,void 0,new Error)`Invalid heartbeat message: ${n}`}));return function(){return t.apply(this,arguments)}}()}_check(){null==this._timer&&(this._timer=new o.ShiftTimer((()=>{self.performance.now()-this.previousHeartbeatTimestamp>l?(this.heartbeatStatus=c.INACTIVE,__LOG__(4,void 0,new Error,!0)`Last heartbeat was received > ${10} seconds ago, app unresponsive`,SEND_LOGS("app-unresponsive-no-heartbeat")):this._check()}))),this._timer.onOrAfter(l)}_registerChecker(){this._unregisterChecker(),this._check()}_unregisterChecker(){this._timer&&(this._timer.cancel(),this._timer=null)}}t.default=d},35791:(e,t,n)=>{"use strict";n(41999);{const{LOG_CAPACITY_IN_DATABASE:e,LoggerImpl:t}=n(93724),{provideDb:i}=n(6508),o=new t((()=>Promise.resolve(i())),e,"service-worker");self.__LOG__=o.log;const a=n(3450).sendLogs;self.SEND_LOGS=a;const s=["TypeError: Failed to fetch","Failed to execute 'put' on 'Cache'"];function r(e){return s.some((t=>String(e).includes(t)))}self.onerror=e=>{const t=o.logUncaughtError(e);a(t,r(t)?0:1)},self.onunhandledrejection=e=>{const{promise:t,reason:n}=e,i=o.logUncaughtError(n,t);a(i,r(i)?0:1)};const{setWamRuntime:l}=n(5117);l({commit:n(61730).th,set:n(61730).t8})}},13986:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(26857)),a=n(97023);class s extends o.default{constructor(){super(...arguments),this.matchNotificationClick=()=>!0,this.onNotificationClick=e=>{e.notification.close(),e.waitUntil(self.clients.matchAll({type:"window"}).then(function(){var e=(0,i.default)((function*(e){if(!e)return;for(let t=0;t<e.length;t++){const n=e[t];if(null!=self.WindowClient&&n instanceof self.WindowClient)return n.focus()}try{const e=n(13447).initialize;yield e(),yield function(){return l.apply(this,arguments)}()}catch(e){__LOG__(4,void 0,new Error,!0)`Failed to log offline notification click engagement, error: ${e}`,SEND_LOGS("log-offline-notifications-click-failed")}const t=self.location.href.lastIndexOf("/"),r=self.location.href.substring(0,t+1),i="/serviceworker.js"===self.location.pathname?self.location.origin:r;return self.clients.openWindow(i)}));return function(){return e.apply(this,arguments)}}()))}}}function l(){return(l=(0,i.default)((function*(){var e,t;const n=yield(0,a.getOfflineNotificationEngagement)();(0,a.setOfflineNotificationContentEngagement)({totalNotifShown:null!==(e=null==n?void 0:n.totalNotifShown)&&void 0!==e?e:0,totalNotifTapToOpen:(null!==(t=null==n?void 0:n.totalNotifTapToOpen)&&void 0!==t?t:0)+1})}))).apply(this,arguments)}t.default=s},45588:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3563)).default;t.default=i},3563:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=r(n(49619)),a=r(n(91373));const s={prefs:{},pp:{},stickers:{}};let l;class u{constructor(e){this.storeName=e,this.storeCache={}}_callAction(e,t){var n=this;return(0,i.default)((function*(){const r=(yield l||(l=new Promise(((e,t)=>{const n=(0,o.default)(a.default,"indexedDB").open("sw",2);n.onupgradeneeded=e=>{const t=e.target.result;e.target.transaction.onerror=e=>{__LOG__(3)`Unable to upgrade database, error: ${e.target.error}`};for(const e in s)t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e,s[e])},n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{t(e.target.error)}})).catch((e=>{throw __LOG__(3)`Unable to open sw database, error: ${e}`,l=void 0,e})))).transaction([n.storeName],"readwrite").objectStore(n.storeName),i=r[e].apply(r,t);return new Promise(((e,t)=>{i.onsuccess=t=>{e(t.target.result)},i.onerror=e=>{t(e.target.error)}}))}))()}get(e){return void 0!==this.storeCache[e]?this.storeCache[e]:this.storeCache[e]=this._callAction("get",[e]).catch((t=>{__LOG__(3)`Unable to fetch from db, object store: ${this.storeName}, key: ${e}, error: ${t}`,this.storeCache[e]=void 0}))}put(e,t){return this.storeCache[e]=Promise.resolve(t),this._callAction("put",[t,e]).catch((n=>{__LOG__(3)`Unable to put to db, object store: ${this.storeName}, key: ${e}, value: ${t}, error: ${n}`}))}delete(e){return this.storeCache[e]=Promise.resolve(void 0),this._callAction("delete",[e]).catch((t=>{__LOG__(3)`Unable to delete in db, object store: ${this.storeName}, key: ${e}, error: ${t}`}))}clear(){return this.storeCache={},this._callAction("clear").catch((e=>{__LOG__(3)`Unable to clear object store: ${this.storeName}, error: ${e}`}))}}const c={ObjectStore:u};for(const e in s)c[e]=new u(e);var d=c;t.default=d},86278:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(28123),a=r(n(19194)),s=r(n(26857)),l=r(n(5420));class u extends s.default{constructor(){var e;super(...arguments),e=this,this.matchFetch=e=>{const{request:t}=e,n=s.default.parseUrl(t.url);return t.method===s.default.RequestType.GET&&!!n&&(n.base===o.DYN_ORIGIN||"https://dyn.web.whatsapp.com/"===n.base)&&"pp"===n.relativePath},this.onFetch=function(){var t=(0,i.default)((function*(t){const{request:n}=t,r=s.default.parseUrl(n.url);if(!r||!r.queryParams)return self.fetch(n);const{e:i,t:o,u:a,i:u,n:c}=r.queryParams,d=`${r.base}${r.relativePath}?t=${o}&u=${a}&i=${u}&n=${c}`,p=i?self.decodeURIComponent(i):n;l.default.assertIsAllowedHost(i?self.decodeURIComponent(i):n.url);const f=yield e.cache.matchOrFetch(p,d);return f.ok&&e.store.get(a).then((t=>{if(t!==u)return Promise.all([e.removePPFromCache(a,u),e.store.put(a,u)])})),l.default.assertIsAllowedHost(f.url),f}));return function(){return t.apply(this,arguments)}}(),this.matchAction=e=>a.default.REMOVE_PP===e||a.default.LOGOUT===e,this.onAction=(e,t)=>{switch(e){case a.default.REMOVE_PP:{const e=self.encodeURIComponent(t);return this.store.get(e).then((t=>{if(t)return Promise.all([this.removePPFromCache(e,t),this.store.delete(e)])})).then((()=>{}))}default:return Promise.all([this.cache.reset(),this.store.clear()]).then((()=>{}))}}}removePPFromCache(e,t){return Promise.all([this.cache.delete(`${o.DYN_ORIGIN}pp?t=s&u=${e}&i=${t}`),this.cache.delete(`${o.DYN_ORIGIN}pp?t=l&u=${e}&i=${t}`),this.cache.delete(`https://dyn.web.whatsapp.com/pp?t=s&u=${e}&i=${t}`),this.cache.delete(`https://dyn.web.whatsapp.com/pp?t=l&u=${e}&i=${t}`)])}}t.default=u},72100:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(17761),a=r(n(26857)),s=n(97023),l=n(38117);let u=!1;class c extends a.default{constructor(){super(...arguments),this.matchInstall=()=>!0,this.onInstall=()=>{},this.matchActivate=()=>!0,this.onActivate=()=>{},this.matchPush=()=>!0,this.onPush=e=>{const t=function(){var e=(0,i.default)((function*(){if(!(0,o.canSupportOfflineNotifications)())return Promise.resolve();if(u)return Promise.resolve();u=!0;const e=yield self.clients.matchAll({type:"window"});if((null==e?void 0:e.length)>0)return;let t;{__LOG__(2)`[PushNotif] Starting backend for push notification`;n(68231).WorkerOfflineResumeReporter.logWorkerInitialized(l.OFFLINE_PROCESS_RUN_REASONS.PUSH_NOTIFICATION);const e=n(40704);yield e.initializeDb(),e.handlePushNotification(),t=yield(0,s.getOfflineNotificationContent)()}return(0,n(35855).N)(t)}));return function(){return e.apply(this,arguments)}}();e.waitUntil(t())}}}t.default=c},92543:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(77674),o=r(n(26857));class a extends o.default{constructor(){super(...arguments),this.matchFetch=e=>{const{request:t}=e,n=new URL(t.url),r=new URLSearchParams(n.search);return t.method===o.default.RequestType.GET&&r.has(i.IS_MMS_URL_SEARCH_PARAM)&&(0===n.pathname.indexOf("/mms/sticker/")||"sticker"===r.get(i.MMS_URL_MEDIA_TYPE_SEARCH_PARAM))},this.onFetch=e=>this.cache.matchOrFetch(e.request)}}t.default=a},33681:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(93042),a=r(n(19194)),s=r(n(26857)),l=n(68231);class u extends s.default{constructor(){super(...arguments),this.matchAction=e=>e===a.default.STOP_COMMS,this.onAction=function(){var e=(0,i.default)((function*(){null!=l.WorkerOfflineResumeReporter.getCurrentStage()&&((0,o.getComms)()&&(yield(0,o.stopComms)(),__LOG__(2)`Successfully stopped Comms in service worker`),l.WorkerOfflineResumeReporter.logProcessInterrupted())}));return function(){return e.apply(this,arguments)}}()}}t.default=u},5420:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(89482));function o(e){const t=new URL(e),n=t.host;if("https:"!==t.protocol||!/\.whatsapp\.(net|com)(:\d+)?$/.test(n))throw __LOG__(4,void 0,new Error,!0)`Unexpected url`,SEND_LOGS("SW: Potential XSS attack"),(0,i.default)("URL is not of allowed host or protocol")}var a={manuallyCloneRequest:function(e,t,n){let r=n;if("string"==typeof e){r=r||{},r.credentials="same-origin";const n=null!=t?t:e;return o(n),new Request(n,r)}const i=null!=t?t:e.url;return o(i),new Request(i||e.url,{method:void 0===r.method?e.method:r.method,headers:void 0===r.headers?e.headers:r.headers,mode:void 0===r.mode?e.mode:r.mode,credentials:"same-origin",cache:void 0===r.cache?e.cache:r.cache,redirect:void 0===r.redirect?e.redirect:r.redirect,integrity:void 0===r.integrity?e.integrity:r.integrity})},getIndexPath:function(e){return(null==e?void 0:e.locale)?`%F0%9F%8C%90/${e.locale}`:""},assertIsAllowedHost:o};t.default=a},24414:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStreamer=void 0,t.parseClientRange=f;var i=r(n(48926)),o=n(44379),a=n(58358),s=n(78615),l=r(n(93948)),u=r(n(19194)),c=r(n(5420)),d=r(n(89482));const p=65536;function f(e){const{clientRangeStartString:t,clientRangeEndString:n}=function(e){const t=e.headers.get("Range");if(t){const[e,n]=t.replace("bytes=","").split("-");return{clientRangeStartString:e,clientRangeEndString:n}}const n=new URL(e.url);return{clientRangeStartString:n.searchParams.get("bytesstart"),clientRangeEndString:n.searchParams.get("bytesend")}}(e),r=parseInt(t,10),i=parseInt(n,10);return{clientRangeStart:isNaN(r)?0:r,clientRangeEnd:isNaN(i)?null:i}}t.VideoStreamer=class{constructor(e,t,n){this.generation=0;const{sidecar:r}=t,i=[];for(let e=0;e<r.byteLength;e+=s.HMAC_SIZE)i.push(r.slice(e,e+s.HMAC_SIZE));this.cryptoKeys={iv:t.iv,sidecar:i,encKey:t.encKey,macKey:t.macKey},this.streamData=n,this.clientId=e}fetchAndDecrypt(e){var t=this;return(0,i.default)((function*(){const{clientUrl:n,msgKey:r}=t.streamData,{clientRangeStart:i,clientRangeEnd:o}=f(e),{serverRangeStart:a,serverRangeEnd:c}=t.computeServerRange(i,o),d=t.createServerRequest(e,a,c,n),p=yield self.fetch(d);if(404===p.status)return t.handleRMR(e,r);if(p.status>=400)return __LOG__(2)`sw:videoStreaming:processRequest server returns ${p.status} error`,t.generation++,l.default.request(t.clientId,u.default.EXP_BACKOFF,{generation:t.generation}).then((()=>t.fetchAndDecrypt(e)));t.generation=0;const _=yield p.arrayBuffer(),g=_.byteLength;if(!_||g<s.BLOCK_SIZE)return __LOG__(2)`sw:videoStreaming:processRequest ciphertext is too short - ${g} bytes`,new Response(`Ciphertext is too short - ${g} bytes`,{status:500});yield t.validateSidecar(a,_);const{ciphertext:h,iv:A}=yield(0,s.cleanupCiphertextAndIv)({serverRangeStart:a,ciphertext:_,mediaKeys:t.cryptoKeys}),m=yield(0,s.decrypt)({ciphertext:h,iv:A,mediaKeys:t.cryptoKeys}),E=t.cleanupPlaintext(m,{clientRangeStart:i,clientRangeEnd:o},{serverRangeStart:a,serverRangeEnd:c}),y=t.createClientResponse(p,E,i);return t.sendBackArrayBuffer(i,E),y}))()}handleRMR(e,t){var n=this;return(0,i.default)((function*(){const r=yield l.default.request(n.clientId,u.default.REQUEST_RMR,{key:t});return n.cryptoKeys.encKey=r.encKey,n.cryptoKeys.iv=r.iv,n.streamData.clientUrl=r.clientUrl,n.streamData.size=r.size,n.fetchAndDecrypt(e)}))()}cleanupPlaintext(e,t,n){let{clientRangeStart:r,clientRangeEnd:i}=t,{serverRangeStart:o,serverRangeEnd:a}=n;const l=0===o?0:r-(o+s.BLOCK_SIZE),u=null!=i?a-i:0;return e.slice(l,e.byteLength-u)}validateSidecar(e,t){var n=this;return(0,i.default)((function*(){let r=t;const{macKey:i,iv:o,sidecar:l}=n.cryptoKeys;let u,c;0===e?(u=0,c=o):(u=(e+s.BLOCK_SIZE)/p,c=r.slice(0,s.BLOCK_SIZE),r=r.slice(s.BLOCK_SIZE));const d=r.byteLength/p,f=yield self.crypto.subtle.importKey("raw",new Uint8Array(i),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),_=[];for(let e=0;e<d;e++){const t=l[u+e],i=e*p,o=r.slice(i,i+p),d=c;c=o.slice(p-s.BLOCK_SIZE,p-s.BLOCK_SIZE+s.BLOCK_SIZE);const g=(0,a.concatTypedArrays)(Uint8Array,[new Uint8Array(d),new Uint8Array(o)]);_.push(n.validateChunk(g,f,t))}return Promise.all(_)}))()}validateChunk(e,t,n){return(0,i.default)((function*(){const r=(yield self.crypto.subtle.sign({name:"HMAC"},t,e)).slice(0,s.HMAC_SIZE);if(!(0,o.arrayBuffersEqual)(r,n))return Promise.reject((0,d.default)("Invalid Chunk: Does not match sidecar."))}))()}createClientResponse(e,t,n){const{size:r}=this.streamData,{contentRangeStart:i,contentRangeEnd:o}=this.getContentRange(n,t),a=new Headers(e.headers);a.set("Content-Range",`bytes ${i}-${o}/${r}`),a.set("Content-Length",`${t.byteLength}`);return new Response(t,{status:200===e.status?206:e.status,statusText:e.statusText,headers:a})}getContentRange(e,t){return{contentRangeStart:e,contentRangeEnd:e+t.byteLength-1}}sendBackArrayBuffer(e,t){const{contentRangeStart:n,contentRangeEnd:r}=this.getContentRange(e,t);l.default.request(this.clientId,u.default.SEND_STREAMING_CHUNK,{msgKey:this.streamData.msgKey,data:{start:n,end:r,buffer:t}})}createServerRequest(e,t,n,r){const i=new URL(r);i.searchParams.set("bytestart",t.toString()),i.searchParams.set("byteend",n.toString());return c.default.manuallyCloneRequest(e,i.toString(),{credentials:"omit",headers:new Headers({}),mode:"cors",referrer:e.referrer})}computeServerRange(e,t){let n=e,r=t;return n=e?this.roundDown(e,p):0,r=null!=t&&0!==t?this.roundUp(t,p)-1:n+1572864-1,n>0&&(n-=s.BLOCK_SIZE),{serverRangeStart:n,serverRangeEnd:r}}roundUp(e,t){return Math.ceil(e/t)*t}roundDown(e,t){return Math.floor(e/t)*t}}},29906:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(48926)),o=n(28123),a=r(n(93948)),s=r(n(19194)),l=r(n(26857)),u=n(24414),c=r(n(89482));const d=`${o.WEB_PUBLIC_PATH}stream/video`;class p extends l.default{constructor(){super(...arguments),this.matchFetch=e=>{const{request:t}=e,n=l.default.parseUrl(t.url);return!!(t.method===l.default.RequestType.GET&&n&&n.queryParams&&n.queryParams.key&&t.url.match(d))},this.onFetch=function(){var e=(0,i.default)((function*(e){const{request:t,client:n,clientId:r}=e,i=l.default.parseUrl(t.url),o=r||(null==n?void 0:n.id);if(!o)return Promise.reject((0,c.default)("No client id found."));const{cryptoKeys:d,streamData:p}=yield a.default.request(o,s.default.REQUEST_STREAMING_INFO,{key:i.queryParams.key});return new u.VideoStreamer(o,d,p).fetchAndDecrypt(t)}));return function(){return e.apply(this,arguments)}}(),this.matchAction=e=>e===s.default.STREAMING_SUPPORTED,this.onAction=()=>!(!self.crypto||!self.crypto.subtle&&!self.crypto.webkitSubtle)}}t.default=p},28123:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WS_ORIGIN=t.WEB_PUBLIC_PATH=t.VERSION_TERTIARY=t.VERSION_STR=t.VERSION_SECONDARY=t.VERSION_PRIMARY=t.VERSION_BASE=t.USER_TIMINGS=t.UNKNOWN_ID=t.LOCALHOST_ENV_CONFIG=t.HASH_PLACEHOLDER=t.FLB_PLATFORM=t.FB_APP_ID=t.DYN_ORIGIN=t.DIFF_VERSION=t.DIFF_ID=t.BUILD_URL=t.BUILD_TIMESTAMP=t.BUILD_ID=void 0;const n=("","");t.DIFF_ID=n;const r=("","");t.DIFF_VERSION=r;t.LOCALHOST_ENV_CONFIG=!1;t.HASH_PLACEHOLDER="84a9f6754622285e6d7436e9ac54c813c769d51c";t.VERSION_PRIMARY="2";t.VERSION_SECONDARY="2413";t.VERSION_TERTIARY="51";t.VERSION_BASE="2.2413.51";t.VERSION_STR="2.2413.51";t.DYN_ORIGIN="https://web.whatsapp.com/";t.WS_ORIGIN="";t.FLB_PLATFORM="web";t.FB_APP_ID="";t.UNKNOWN_ID="WAUnknownID";t.BUILD_ID="583972258";t.BUILD_TIMESTAMP="April 1, 2024";t.WEB_PUBLIC_PATH="/";t.BUILD_URL="https://web.whatsapp.com/";t.USER_TIMINGS=!1},95643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Promise.resolve(!1)};n(52143),n(88745)},9664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiPrefixHash=void 0;t.emojiPrefixHash="c5a15be93e425dcb8a26b06645ad4574"},64239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw(0,i.default)("Invariant Violation")};var i=r(n(89482))},63139:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(49619));class o{constructor(e,t,n){this.key=e,this.value=t,this.timestamp=null!=n?n:Date.now(),this.prev=void 0,this.next=void 0}}class a{constructor(){this.start=new o(null,null),this.end=new o(null,null),this.start.next=this.end,this.end.prev=this.start}append(e,t){const n=new o(e,t),r=this.end,a=(0,i.default)(this.end.prev,"this.end.prev");return n.next=r,n.prev=a,r.prev=n,a.next=n,n}prepend(e,t){const n=new o(e,t),r=this.start,a=(0,i.default)(this.start.next,"this.start.next");return n.prev=r,n.next=a,r.next=n,a.prev=n,n}popEnd(){const e=(0,i.default)(this.end.prev,"this.end.prev");if(e===this.start)return;const t=(0,i.default)(e.prev,"entry.prev"),n=(0,i.default)(e.next,"entry.next");return t.next=n,n.prev=t,e.next=void 0,e.prev=void 0,e}popFront(){const e=(0,i.default)(this.start.next,"this.start.next");if(e===this.end)return;const t=(0,i.default)(e.prev,"entry.prev"),n=(0,i.default)(e.next,"entry.next");return t.next=n,n.prev=t,e.next=void 0,e.prev=void 0,e}peekFront(){const e=(0,i.default)(this.start.next,"this.start.next");if(e!==this.end)return e}peekEnd(){const e=(0,i.default)(this.end.prev,"this.end.prev");if(e!==this.start)return e}remove(e){const t=(0,i.default)(e.prev,"entry.prev"),n=(0,i.default)(e.next,"entry.next");return t.next=n,n.prev=t,e.next=void 0,e.prev=void 0,e}stats(){let e=this.start,t=0;for(;e!==this.end;)e=(0,i.default)(e.next,"entry.next"),t+=1;return t-1}}t.default=class{constructor(){this.keyMap=new Map,this.entryList=new a}lookup(e){const t=this.keyMap.get(e);if(t){this.entryList.remove(t);const e=this.entryList.append(t.key,t.value);return this.keyMap.set(e.key,e),t.value}}add(e,t){let n=this.keyMap.get(e);return n?n.value=t:(n=this.entryList.append(e,t),this.keyMap.set(e,n)),t}expireKeys(e){let t=this.entryList.peekFront();for(;t&&t.timestamp<e;)this.entryList.popFront(),this.keyMap.delete(t.key),t=this.entryList.peekFront()}printStats(){__LOG__(2)`========================== STATS =============================`,__LOG__(2)`entry list: ${this.entryList.stats()}`,__LOG__(2)`map keys: ${this.keyMap.size}`}}},22026:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WAWebL10nGetRenderedLocale=function(){return(0,o.coerceWAWebL10nLocaleToFBLocale)(i.default.getLocale())};var i=r(n(14950)),o=n(63462)},94436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRTL=function(){return __LOG__(4,void 0,new Error,!0)`Locale.isRTL() should only be executed on WWW.`,SEND_LOGS("wajs-locale-rtl-unexpected-call"),!1}},52687:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(24753)),o=r(n(89482));let a;if("undefined"!=typeof self)a=self;else{if(void 0===n.g)throw(0,o.default)("Couldn't get global object");a=n.g}var s="AbortController"in a?a.AbortController:class{constructor(){this.signal=new i.default}abort(){const e=new Event("abort");this.signal.dispatchEvent(e)}};t.default=s},24753:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(85236)),o=class extends i.default{constructor(){super(),this.aborted=!1}dispatchEvent(e){return"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}toString(){return"[object AbortSignal]"}};t.default=o},85236:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7880));t.default=class{constructor(){this._emitter=new i.default}addEventListener(e,t){this._emitter.on(e,t,this)}removeEventListener(e,t){this._emitter.off(e,t,this)}dispatchEvent(e){return this._emitter.trigger(e.type),!0}}},53721:e=>{e.exports="6907502319358470"},43859:(e,t,n)=>{e.exports=n(23098)},98587:(e,t,n)=>{e.exports=n(54242)()},46808:(e,t,n)=>{"use strict";var r=n(95318)(n(51298)),i=n(66625),o=n(95160),a=n(59356);let s=null;(0,o.isWorker)()?s=n(98587).default:(0,i.isUserLoggedOut)()||"3.2.2"===(null===r.default||void 0===r.default?void 0:r.default.getItem(a.KEYS.DEXIE_VERSION))?(null===r.default||void 0===r.default||r.default.setItem(a.KEYS.DEXIE_VERSION,"3.2.2"),s=n(98587).default):(null===r.default||void 0===r.default||r.default.setItem(a.KEYS.DEXIE_VERSION,"2.0.4"),s=n(86128).Z),e.exports=s},19546:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(30381)).default;t.default=i},57874:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.loadSchemaVersions=function(){return _.apply(this,arguments)};var i=r(n(48926)),o=n(24858),a=n(3792),s=n(95160),l=n(49079),u=r(n(40409)),c=n(25163),d=n(80052);function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){const e=new Map,t=Array.from(l.DatabaseNames.members()).map(function(){var t=(0,i.default)((function*(t){let n=null;switch(t){case l.DatabaseNames.ModelStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_MODEL_STORAGE;break;case l.DatabaseNames.FtsStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_FTS_STORAGE;break;case l.DatabaseNames.JobsStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_JOBS_STORAGE;break;case l.DatabaseNames.LruMediaStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_LRU_MEDIA_STORAGE;break;case l.DatabaseNames.OffdStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_OFFD_STORAGE;break;case l.DatabaseNames.QplStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_QPL_STORAGE;break;case l.DatabaseNames.SignalStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_SIGNAL_STORAGE;break;case l.DatabaseNames.WorkerStorage:n=a.Killswitch.DB_ROLLOUT_VERSION_WORKER_STORAGE;break;case l.DatabaseNames.SW:n=a.Killswitch.DB_ROLLOUT_VERSION_SW;break;case l.DatabaseNames.WAWC:n=a.Killswitch.WAWC;break;case l.DatabaseNames.WAWCDBEnc:n=a.Killswitch.DB_ROLLOUT_VERSION_WAWC_DB_ENC}if(null!=n){const r=yield(0,a.getKillswitchValue)(n);"number"==typeof r&&e.set(t,r)}}));return function(){return t.apply(this,arguments)}}());return yield Promise.all(t),e}))).apply(this,arguments)}function _(){return(_=(0,i.default)((function*(){if((0,s.isWorker)()&&!(0,s.isServiceWorker)())return;if((0,l.hasSchemaVersions)())return;let e;__LOG__(2)`db: start load schema versions`;let t;if(yield(0,a.fetchKillswitchValuesAtLeastOnce)()){const n=yield(0,a.getKillswitchValue)("wa_web/db_rollout_version:db_rollout_killswitch");if(null!=n&&n)return __LOG__(2)`db: db versioning killswitch on, enabling all versions`,void(0,l.setSchemaVersions)(new Map);__LOG__(2)`db: using versions from killswitch`,e=yield p(),t=c.WEB_DB_VERSION_SOURCE_TYPE.KNOB;const r=yield(0,o.getLocalSchemaVersions)();__LOG__(2)`db: found ${r.size} local versions`,r.forEach(((n,r)=>{var i;const o=null===(i=e)||void 0===i?void 0:i.get(r);var a;null!=o&&n>o&&(__LOG__(4,void 0,new Error,!0)`db: overriding ks version ${o} with localVersion ${n} for db ${r}`,SEND_LOGS("db: overriding ks version with local version"),null===(a=e)||void 0===a||a.set(r,n),t=c.WEB_DB_VERSION_SOURCE_TYPE.KNOB_WITH_LOCAL_OVERRIDE)}))}else{const n=yield(0,o.getLocalSchemaVersions)();__LOG__(2)`db: found ${n.size} local versions`,t=n.size>0?c.WEB_DB_VERSION_SOURCE_TYPE.LOCAL:c.WEB_DB_VERSION_SOURCE_TYPE.STATIC;const r=new Map;u.default.forEach(((e,t)=>{r.set(t,e)})),n.forEach(((e,t)=>{r.set(t,e)})),e=r,__LOG__(2)`db: using local and static versions`}new d.WebDbVersionsSourceWamEvent({webDbVersionSource:t,webSchemaInitiator:(0,l.getLoaderType)()}).commit(),(0,l.hasSchemaVersions)()||(0,l.setSchemaVersions)(e)}))).apply(this,arguments)}},91262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.default}},7265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u17C9-\u17D3\u17DD\u1939-\u193B\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DF9\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD802[\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDF46-\uDF50]|\uD804[\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g;t.default=n},35855:(e,t,n)=>{"use strict";var r=n(95318);t.N=function(){return l.apply(this,arguments)};var i=r(n(48926)),o=n(46420),a=n(97023),s=r(n(60670));function l(){return(l=(0,i.default)((function*(e){if(Notification.permission&&Notification.permission===o.PERMISSION_ALLOWED){var t,n;const r=null!==(t=null==e?void 0:e.notificationTitle)&&void 0!==t?t:"WhatsApp",i=null!==(n=null==e?void 0:e.notificationText)&&void 0!==n?n:"Syncing messages in the background.";return 0===(yield c())&&p().catch((e=>{__LOG__(4,void 0,new Error,!0)`Failed to log offline notification shown engagement, error: ${e}`,SEND_LOGS("log-offline-notifications-shown-failed")})),u(r,i,s.default)}return Promise.resolve()}))).apply(this,arguments)}function u(e,t,n){return self.registration.showNotification(e,{body:t,icon:n})}function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){const e=yield self.registration.getNotifications();return e.forEach((e=>e.close())),e.length}))).apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(){var e,t;const n=yield(0,a.getOfflineNotificationEngagement)();(0,a.setOfflineNotificationContentEngagement)({totalNotifShown:(null!==(e=null==n?void 0:n.totalNotifShown)&&void 0!==e?e:0)+1,totalNotifTapToOpen:null!==(t=null==n?void 0:n.totalNotifTapToOpen)&&void 0!==t?t:0})}))).apply(this,arguments)}},6508:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.provideDb=function(){return a};var i=r(n(46808)),o=n(83750);const a=new i.default("wawc",{chromeTransactionDurability:"relaxed",addons:[]});(0,o.applyVersions)(a)},61730:(e,t,n)=>{"use strict";var r=n(95318);t.th=function(){return a.apply(this,arguments)},t.t8=function(e,t){try{const n=e.name,r=JSON.stringify({value:t});o.default.storeWorkerWamData({action:"set",name:n,payload:r})}catch(e){__LOG__(4,void 0,new Error)`wam set failed, ${e}`}};var i=r(n(48926)),o=r(n(27931));function a(){return(a=(0,i.default)((function*(e){try{const t=e.$className,n=JSON.stringify(e.all);yield o.default.storeWorkerWamData({action:"commit",name:t,payload:n})}catch(e){__LOG__(4,void 0,new Error)`wam commit failed, ${e}`}return Promise.resolve()}))).apply(this,arguments)}},14088:(e,t,n)=>{"use strict";var r=n(8905);n(41999),(0,r.patchDexie)(),n(52251)},89482:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){const n=new Error(t);if(void 0===n.stack)try{throw e}catch(e){}return n}},60938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.entries(e)}},9539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[];for(const n of e)null!=n&&t.push(n);return t}},41999:()=>{"use strict";null==Array.prototype.toSorted&&(Array.prototype.toSorted=function(e){return this.slice().sort(e)})},99758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(54302)({EN_US:"en_US",AF_ZA:"af_ZA",AK_GH:"ak_GH",AM_ET:"am_ET",AR_AR:"ar_AR",AS_IN:"as_IN",AY_BO:"ay_BO",AZ_AZ:"az_AZ",BE_BY:"be_BY",BG_BG:"bg_BG",BM_ML:"bm_ML",BN_IN:"bn_IN",BP_IN:"bp_IN",BR_FR:"br_FR",BS_BA:"bs_BA",BV_DE:"bv_DE",CA_ES:"ca_ES",CB_IQ:"cb_IQ",CK_US:"ck_US",CO_FR:"co_FR",CS_CZ:"cs_CZ",CX_PH:"cx_PH",CY_GB:"cy_GB",DA_DK:"da_DK",DE_DE:"de_DE",EH_IN:"eh_IN",EL_GR:"el_GR",EM_ZM:"em_ZM",EN_GB:"en_GB",EN_IN:"en_IN",EN_OP:"en_OP",EN_PI:"en_PI",EN_UD:"en_UD",EN_XA:"en_XA",EO_EO:"eo_EO",ES_CL:"es_CL",ES_CO:"es_CO",ES_ES:"es_ES",ES_LA:"es_LA",ES_MX:"es_MX",ES_VE:"es_VE",ET_EE:"et_EE",EU_ES:"eu_ES",FA_IR:"fa_IR",FB_AA:"fb_AA",FB_AC:"fb_AC",FB_AR:"fb_AR",FB_HA:"fb_HA",FB_HX:"fb_HX",FB_LL:"fb_LL",FB_LS:"fb_LS",FB_LT:"fb_LT",FB_RL:"fb_RL",FB_ZH:"fb_ZH",FBT_AC:"fbt_AC",FF_NG:"ff_NG",FI_FI:"fi_FI",FN_IT:"fn_IT",FO_FO:"fo_FO",FR_CA:"fr_CA",FR_FR:"fr_FR",FV_NG:"fv_NG",FY_NL:"fy_NL",GA_IE:"ga_IE",GL_ES:"gl_ES",GN_PY:"gn_PY",GU_IN:"gu_IN",GX_GR:"gx_GR",HA_NG:"ha_NG",HE_IL:"he_IL",HI_FB:"hi_FB",HI_IN:"hi_IN",HR_HR:"hr_HR",HT_HT:"ht_HT",HU_HU:"hu_HU",HY_AM:"hy_AM",ID_ID:"id_ID",IG_NG:"ig_NG",IK_US:"ik_US",IS_IS:"is_IS",IT_IT:"it_IT",IU_CA:"iu_CA",JA_JP:"ja_JP",JA_KS:"ja_KS",JV_ID:"jv_ID",KA_GE:"ka_GE",KK_KZ:"kk_KZ",KM_KH:"km_KH",KN_IN:"kn_IN",KO_KR:"ko_KR",KS_IN:"ks_IN",KU_TR:"ku_TR",KY_KG:"ky_KG",LA_VA:"la_VA",LG_UG:"lg_UG",LI_NL:"li_NL",LN_CD:"ln_CD",LO_LA:"lo_LA",LR_IT:"lr_IT",LT_LT:"lt_LT",LV_LV:"lv_LV",MG_MG:"mg_MG",MI_NZ:"mi_NZ",MK_MK:"mk_MK",ML_IN:"ml_IN",MN_MN:"mn_MN",MOS_BF:"mos_BF",MR_IN:"mr_IN",MS_MY:"ms_MY",MT_MT:"mt_MT",MY_MM:"my_MM",NB_NO:"nb_NO",ND_ZW:"nd_ZW",NE_NP:"ne_NP",NH_MX:"nh_MX",NL_BE:"nl_BE",NL_NL:"nl_NL",NN_NO:"nn_NO",NR_ZA:"nr_ZA",NS_ZA:"ns_ZA",NY_MW:"ny_MW",OM_ET:"om_ET",OR_IN:"or_IN",PA_IN:"pa_IN",PCM_NG:"pcm_NG",PL_PL:"pl_PL",PS_AF:"ps_AF",PT_BR:"pt_BR",PT_PT:"pt_PT",QB_DE:"qb_DE",QC_GT:"qc_GT",QE_US:"qe_US",QK_DZ:"qk_DZ",QR_GR:"qr_GR",QS_DE:"qs_DE",QT_US:"qt_US",QU_PE:"qu_PE",QV_IT:"qv_IT",QZ_MM:"qz_MM",RM_CH:"rm_CH",RN_BI:"rn_BI",RO_RO:"ro_RO",RU_RU:"ru_RU",RW_RW:"rw_RW",SA_IN:"sa_IN",SC_IT:"sc_IT",SE_NO:"se_NO",SI_LK:"si_LK",SK_SK:"sk_SK",SL_SI:"sl_SI",SN_ZW:"sn_ZW",SO_SO:"so_SO",SQ_AL:"sq_AL",SR_RS:"sr_RS",SS_SZ:"ss_SZ",ST_ZA:"st_ZA",SU_ID:"su_ID",SV_SE:"sv_SE",SW_KE:"sw_KE",SY_SY:"sy_SY",SZ_PL:"sz_PL",TA_IN:"ta_IN",TE_IN:"te_IN",TG_TJ:"tg_TJ",TH_TH:"th_TH",TI_ET:"ti_ET",TK_TM:"tk_TM",TL_PH:"tl_PH",TL_ST:"tl_ST",TN_BW:"tn_BW",TQ_AR:"tq_AR",TPI_PG:"tpi_PG",TR_TR:"tr_TR",TS_ZA:"ts_ZA",TT_RU:"tt_RU",TZ_MA:"tz_MA",UK_UA:"uk_UA",UR_PK:"ur_PK",UZ_UZ:"uz_UZ",VE_ZA:"ve_ZA",VI_VN:"vi_VN",WO_SN:"wo_SN",XH_ZA:"xh_ZA",YI_DE:"yi_DE",YO_NG:"yo_NG",ZH_CN:"zh_CN",ZH_HK:"zh_HK",ZH_TW:"zh_TW",ZU_ZA:"zu_ZA",ZZ_TR:"zz_TR"});t.default=r},43303:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=e.map(((e,n)=>({index:n,sortValue:t(e),value:e})));return n.sort(((e,t)=>{const n=e.sortValue,r=t.sortValue;return n>r?1:n<r?-1:e.index-t.index})),n.map((e=>e.value))}},38916:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.size!==t.size)return!1;return(0,i.default)(e,(e=>t.has(e)))};var i=r(n(51143))},51143:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const r=e.entries();let i=r.next();for(;!i.done;){const o=i.value;if(!t.call(n,o[1],o[0],e))return!1;i=r.next()}return!0}},35747:e=>{"use strict";e.exports=fs},42329:()=>{}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>({155:"locales/kn",165:"locales/cs",248:"locales/tr",319:"moment_locales/nl",321:"locales/WAWebCountriesLocaleID-js",326:"locales/WAWebCountriesLocaleVI-js",371:"locales/WAWebCountriesLocaleUR-js",513:"locales/WAWebCountriesLocalePT-js",673:"locales/es",743:"locales/WAWebCountriesLocaleZH-HK-js",792:"locales/et",820:"locales/ko",906:"locales/uk",907:"locales/fil",919:"locales/WAWebCountriesLocaleHI-js",951:"moment_locales/th",1055:"moment_locales/el",1069:"moment_locales/sv",1081:"locales/zh-HK",1204:"locales/el",1248:"locales/mr",1370:"locales/WAWebCountriesLocaleRU-js",1381:"moment_locales/hr",1473:"moment_locales/ar",1520:"moment_locales/ms-MY",1529:"locales/lt",1628:"locales/da",1649:"locales/WAWebCountriesLocaleNL-js",1762:"locales/WAWebCountriesLocaleAZ-js",1770:"locales/sk",1791:"moment_locales/es",1843:"locales/WAWebCountriesLocaleSV-js",2017:"moment_locales/sw",2023:"moment_locales/cs",2091:"locales/pt-BR",2105:"locales/WAWebCountriesLocaleSK-js",2135:"locales/th",2179:"locales/WAWebCountriesLocaleFIL-js",2189:"locales/WAWebCountriesLocaleSW-js",2394:"moment_locales/es-DO",2400:"locales/WAWebCountriesLocalePA-js",2445:"moment_locales/fr",2556:"locales/hu",2565:"locales/WAWebCountriesLocaleEN-js",2571:"locales/WAWebCountriesLocaleKN-js",2615:"locales/WAWebCountriesLocaleES-js",2739:"locales/ta",2752:"locales/WAWebCountriesLocaleUZ-js",2830:"locales/WAWebCountriesLocaleCS-js",2944:"locales/sv",2957:"moment_locales/ru",2966:"moment_locales/ar-MA",2979:"moment_locales/en-IE",3017:"moment_locales/uz",3047:"moment_locales/zh-CN",3106:"locales/WAWebCountriesLocaleMR-js",3113:"moment_locales/ml",3191:"locales/WAWebCountriesLocaleHE-js",3370:"locales/WAWebCountriesLocaleML-js",3422:"moment_locales/mr",3501:"moment_locales/sl",3561:"locales/WAWebCountriesLocaleAF-js",3569:"moment_locales/ro",3625:"locales/WAWebCountriesLocaleFR-js",3701:"locales/WAWebCountriesLocaleIT-js",3722:"locales/hi",3748:"moment_locales/af",3892:"moment_locales/en-NZ",3932:"locales/WAWebCountriesLocaleGU-js",3934:"moment_locales/ar-XB",3998:"locales/sw",4085:"locales/WAWebCountriesLocaleNB-js",4259:"locales/sl",4339:"moment_locales/hu",4361:"locales/ur",4468:"moment_locales/gu",4473:"moment_locales/et",4616:"moment_locales/en-CA",4708:"locales/lv",4818:"moment_locales/ko",4873:"locales/uz",4901:"locales/it",4980:"moment_locales/pl",4986:"locales/WAWebCountriesLocaleBG-js",5027:"moment_locales/he",5085:"lazy_loaded_relay",5125:"moment_locales/zh-TW",5128:"locales/id",5170:"moment_locales/sr",5182:"locales/ja",5201:"moment_locales/te",5211:"locales/[request]",5245:"locales/WAWebCountriesLocaleCA-js",5247:"moment_locales/it",5285:"locales/WAWebCountriesLocaleMS-js",5443:"locales/ms",5468:"locales/WAWebCountriesLocaleFI-js",5632:"locales/ca",5650:"locales/te",5671:"moment_locales/ar-LY",5708:"locales/hr",5710:"locales/WAWebCountriesLocalePL-js",5729:"locales/he",5740:"moment_locales/az",5790:"moment_locales/sr-CYRL",5807:"locales/WAWebCountriesLocaleJA-js",5862:"moment_locales/de",5888:"locales/WAWebCountriesLocaleDE-js",5942:"locales/WAWebCountriesLocaleEL-js",5959:"moment_locales/nb",5965:"moment_locales/sk",6038:"locales/gu",6163:"moment_locales/ur",6282:"moment_locales/ar-KW",6286:"locales/WAWebCountriesLocaleTH-js",6293:"locales/fr",6327:"locales/WAWebCountriesLocaleMK-js",6331:"locales/sr",6336:"locales/WAWebCountriesLocaleZH-CN-js",6365:"locales/af",6416:"locales/WAWebCountriesLocaleKK-js",6483:"locales/zh-CN",6496:"moment_locales/sq",6511:"moment_locales/id",6547:"moment_locales/pt-BR",6568:"moment_locales/kn",6651:"locales/mk",6655:"locales/ml",6679:"locales/WAWebCountriesLocaleBN-js",6709:"moment_locales/hi",6884:"moment_locales/ar-DZ",6920:"moment_locales/lt",6933:"locales/en",6953:"locales/pt",6999:"locales/WAWebCountriesLocaleLV-js",7072:"locales/az",7074:"moment_locales/kk",7102:"locales/bg",7107:"locales/WAWebCountriesLocaleTA-js",7162:"locales/ro",7216:"locales/de",7286:"locales/WAWebCountriesLocaleKO-js",7303:"locales/WAWebCountriesLocaleRO-js",7315:"moment_locales/da",7386:"moment_locales/fi",7542:"locales/zh-TW",7548:"locales/WAWebCountriesLocaleSQ-js",7637:"locales/WAWebCountriesLocaleZH-TW-js",7662:"moment_locales/fa",7728:"moment_locales/bn",7739:"moment_locales/ms",7749:"locales/nb",7799:"locales/WAWebCountriesLocaleAR-js",8054:"locales/ar",8117:"moment_locales/uz-LATN",8132:"moment_locales/pa-IN",8163:"locales/WAWebCountriesLocaleTR-js",8195:"locales/WAWebCountriesLocaleFA-js",8292:"locales/ru",8531:"locales/WAWebCountriesLocaleDA-js",8598:"locales/vi",8628:"locales/pl",8634:"moment_locales/ta",8678:"moment_locales/en-AU",8700:"locales/bn",8799:"moment_locales/fr-CH",8920:"locales/WAWebCountriesLocaleHU-js",9086:"locales/WAWebCountriesLocaleLT-js",9115:"locales/WAWebCountriesLocaleSL-js",9116:"moment_locales/pt",9227:"moment_locales/en-GB",9289:"moment_locales/ar-TN",9313:"moment_locales/tr",9342:"locales/WAWebCountriesLocaleTE-js",9545:"moment_locales/mk",9554:"locales/WAWebCountriesLocaleHR-js",9613:"locales/fi",9646:"moment_locales/ar-SA",9662:"locales/WAWebCountriesLocaleET-js",9682:"moment_locales/uk",9719:"locales/kk",9721:"locales/WAWebCountriesLocaleSR-js",9737:"locales/sq",9750:"locales/nl",9765:"moment_locales/fr-CA",9815:"locales/pa",9817:"moment_locales/ca",9919:"locales/WAWebCountriesLocaleUK-js",9995:"locales/ar-XB",9999:"locales/fa"}[e]+".js"),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/",(()=>{var e={6741:1};__webpack_require__.f.i=(t,n)=>{e[t]||importScripts(__webpack_require__.p+__webpack_require__.u(t))};var t=self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[],n=t.push.bind(t);t.push=t=>{var[r,i,o]=t;for(var a in i)__webpack_require__.o(i,a)&&(__webpack_require__.m[a]=i[a]);for(o&&o(__webpack_require__);r.length;)e[r.pop()]=1;n(t)}})();var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(95318);__webpack_require__(14088),__webpack_require__(35791);var t=__webpack_require__(28123),n=e(__webpack_require__(74784)),r=e(__webpack_require__(40478)),i=e(__webpack_require__(11157)),o=e(__webpack_require__(83933)),a=e(__webpack_require__(52612)),s=e(__webpack_require__(58043)),l=e(__webpack_require__(67719)),u=e(__webpack_require__(23006)),c=e(__webpack_require__(13986)),d=e(__webpack_require__(45588)),p=e(__webpack_require__(86278)),f=e(__webpack_require__(72100)),_=e(__webpack_require__(92543)),g=e(__webpack_require__(33681)),h=e(__webpack_require__(29906));const A=new l.default("wa-stickers"),m=[new p.default(new l.default("wa-pp"),d.default.pp),new h.default,new s.default(new l.default(`wa${t.VERSION_STR}`),d.default.prefs),new o.default(new l.default("wa-assets")),new _.default(A,d.default.stickers),new i.default,new f.default,new c.default,new r.default,new g.default,new u.default,new n.default];__LOG__(2)`sw version: ${t.VERSION_STR}`,(0,a.default)(m)})()})();