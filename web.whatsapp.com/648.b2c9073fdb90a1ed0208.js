/*! Copyright (c) 2024 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[648],{273925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobBuilder=void 0,t.definePersistedJob=function(){return new i([])};var n=r(811158),s=r(632157);class i{constructor(e){this.steps=e}step(e,t){return this._stepWithOptions(e,"function"==typeof t?{code:t}:t)}_stepWithOptions(e,t){const{stopRetryIf:r,requirements:a,code:d}=t;let c=u(a,d,r);if(r){const{timePassedSeconds:e,appCrashed:t,onStopRetry:i}=r,a=u(null,function(e){return(t,r,s)=>Promise.resolve(e(t,r,s)).then((e=>e instanceof n.InterruptJob?e:new n.InterruptJob(e)))}(i),r);null!=e&&(c=o(((t,r,n)=>{let{jobStartTime:i}=n;return(0,s.happenedWithin)(i,e)}),c,a)),t&&(c=o(((e,t,r)=>{let{afterCrash:n}=r;return!n}),c,a))}return new i([...this.steps,{stepName:e,info:c}])}finalStep(e,t){const r=this.step(e,t);return{end:()=>r.steps}}}function o(e,t,r){return(n,s,i)=>e(n,s,i)?t(n,s,i):r(n,s,i)}function u(e,t,r){const n={requirements:e,code:t,stopRetryIf:r};return()=>n}t.JobBuilder=i},720648:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryGetPublicKey=void 0;var s=n(r(348926)),i=r(415659),o=r(716358),u=n(r(225747)),a=n(r(67062)),d=r(984330),c=r(355813),l=r(193182),p=r(669050);const f=new a.default("getPublicKeyResponse",(e=>{var t,r;e.assertTag("iq"),e.assertFromServer();return{certificate:null===(t=e.maybeChild("public_key"))||void 0===t||null===(r=t.maybeChild("pem"))||void 0===r?void 0:r.contentString()}})),b=(0,l.defineWebPersistedJob)().finalStep("sendStanza",function(){var e=(0,s.default)((function*(e){let{businessJid:t}=e;const r=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"get",smax_id:(0,o.SMAX_ID)(u.default.BizGetPublicKey),xmlns:"w:biz:catalog",id:(0,o.generateId)()},(0,o.wap)("public_key",{jid:(0,c.USER_JID)((0,p.createWid)(t))})),n=yield(0,i.deprecatedSendIq)(r,f);if(n.success)return n.result;throw new d.ServerStatusCodeError(n.errorCode)}));return function(){return e.apply(this,arguments)}}()).end();t.QueryGetPublicKey=b},193182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineWebPersistedJob=function(){return(0,n.definePersistedJob)()};var n=r(273925)}}]);
//# sourceMappingURL=https://web.whatsapp.com/648.b2c9073fdb90a1ed0208.js.map
