/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[9488],{52778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyPostcode=void 0;var a=n(7799);t.verifyPostcode=(e,t)=>(0,a.verifyPostcode)(e,t)},91960:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addFailedString=function(e,t){return r.default.t(96,{participantNames:e,_plural:t})},t.addPartialFailedString=function(){return i.fbt._("Couldn't add some participants.",null,{hk:"2usrY"})},t.addSuccessString=function(e,t){return r.default.t(97,{participantNames:e,_plural:t})},t.demoteFailedString=function(e,t,n){switch(n){case 406:return r.default.t(100,{participant:e});default:return r.default.t(99,{participantNames:e,_plural:t})}},t.demotePartialFailedString=function(){return i.fbt._("Couldn't remove some participants as an admin.",null,{hk:"IRRDJ"})},t.demoteSuccessString=function(e,t){return r.default.t(101,{participantNames:e,_plural:t})},t.formatGroupStatusReasonString=c,t.formatParticipantActionString=d,t.formatParticipantStatusReasonString=u,t.formatRemoveResult=function(e,t){return s(e,f,h,p,t)},t.formatResult=s,t.promoteFailedString=function(e,t){return r.default.t(105,{participantNames:e,_plural:t})},t.promotePartialFailedString=function(){return i.fbt._("Couldn't make some participants admin.",null,{hk:"4A8lPV"})},t.promoteSuccessString=function(e,t){return r.default.t(106,{participantNames:e,_plural:t})},t.removeFailedString=h,t.removePartialFailedString=p,t.removeSuccessString=f;var o=a(n(89867)),i=n(48360),l=n(19380),r=a(n(14296));function s(e,t,n,a,i){let r;if(207===e.status){const i={};for(const t in e){if(!o.default.isWid(t))continue;const n=e[t];if(403===n)continue;if(207===n)continue;i[n]||(i[n]=[]);const a=l.ContactCollection.get(t);a&&i[n].push(a)}const s=[];for(const e in i){const a=d(t,n,u,parseInt(e,10),i[e]);a&&s.push(a)}r=s.length>0?s.join("\n"):a()}else r=d(t,n,c,e.status,i);return r}function d(e,t,n,a,o){const i=o.map((e=>e.formattedShortName)).join(r.default.t(406)),l=200===a,s=l?e(i,o.length):t(i,o.length,a),d=l?"":n(a,o.length);return s.toString()+d.toString()}function c(e){let t="";switch(e){case 403:t=" "+i.fbt._("You're not a participant.",null,{hk:"4GsI1U"}).toString();break;case 408:t=" "+r.default.t(104);break;case 404:t=" "+i.fbt._("This group has ended.",null,{hk:"C2izu"}).toString();break;case 429:t=" "+i.fbt._("You've added too many contacts to groups too quickly. Try again later.",null,{hk:"aTFA4"}).toString()}return t}function u(e,t){let n="";switch(e){case 401:case 406:case 409:break;case 404:n=" "+r.default.t(103,{_plural:t});break;case 408:n=" "+r.default.t(104,{_plural:t});break;case 500:n=" "+i.fbt._("This group is full.",null,{hk:"27htUz"}).toString();break;default:n=" "+i.fbt._("Please try again.",null,{hk:"3S6IYT"}).toString()}return n}function f(e,t){return r.default.t(110,{participantNames:e,_plural:t})}function h(e,t,n){switch(n){case 406:return r.default.t(109,{participant:e});default:return r.default.t(108,{participantNames:e,_plural:t})}}function p(){return i.fbt._("Couldn't remove some participants.",null,{hk:"3N0fyq"})}},89389:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipants=function(e,t){return m((0,u.unproxy)(e),t)},t.demoteParticipants=function(e,t){return S((0,u.unproxy)(e),t)},t.promoteParticipants=function(e,t){return v((0,u.unproxy)(e),t)},t.removeParticipants=function(e,t){return _((0,u.unproxy)(e),t)};var o=a(n(48926)),i=n(46331),l=n(88102),r=p(n(35232)),s=p(n(91960)),d=a(n(14296)),c=n(37722),u=n(31019),f=n(85893);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.default)((function*(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.genId)();const o=null===(n=e.groupMetadata)||void 0===n?void 0:n.participants;if(null==o)return Promise.reject(new r.ActionError);if(t.some((e=>o.get(e.id))))return __LOG__(3)`models:groupMetadata:participantCollection:addParticipants already a group member`,Promise.reject(new r.ActionError);if(!o.canAdd())return Promise.reject(new r.ActionError);const u=(0,c.sendAddParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.formattedShortName)).join(d.default.t(406)),p=new i.ActionType(d.default.t(98,{participantNames:h,_plural:t.length})),g=u.then((e=>{o.sendForNeededAddRequest(e);const n=s.formatResult(e,s.addSuccessString,s.addFailedString,s.addPartialFailedString,t);return new i.ActionType(n)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:addParticipants dropped`,new i.ActionType(d.default.t(96,{participantNames:h,_plural:t.length}),{actionText:d.default.t(129),actionHandler:()=>m(e,t,a)}))));l.Cmd.openToast((0,f.jsx)(i.ActionToast,{id:a,initialAction:p,pendingAction:g})),yield u}))).apply(this,arguments)}function _(){return C.apply(this,arguments)}function C(){return(C=(0,o.default)((function*(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.genId)();const o=null===(n=e.groupMetadata)||void 0===n?void 0:n.participants;if(null==o)return Promise.reject(new r.ActionError);if(t.some((e=>!o.canRemove(e))))return Promise.reject(new r.ActionError);const u=(0,c.sendRemoveParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(d.default.t(406)),p=new i.ActionType(d.default.t(111,{participantNames:h,_plural:t.length})),m=u.then((e=>{const n=s.formatRemoveResult(e,t.map((e=>e.contact)));return new i.ActionType(n)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new i.ActionType(d.default.t(108,{participantNames:h,_plural:t.length}),{actionText:d.default.t(129),actionHandler:()=>_(e,t,a)}))));l.Cmd.openToast((0,f.jsx)(i.ActionToast,{id:a,initialAction:p,pendingAction:m})),yield u}))).apply(this,arguments)}function v(){return x.apply(this,arguments)}function x(){return(x=(0,o.default)((function*(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.genId)();const o=null===(n=e.groupMetadata)||void 0===n?void 0:n.participants;if(null==o)return Promise.reject(new r.ActionError);if(t.some((e=>!o.canPromote(e))))return Promise.reject(new r.ActionError);const u=(0,c.sendPromoteParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(d.default.t(406)),p=new i.ActionType(d.default.t(107,{participantNames:h,_plural:t.length})),m=u.then((e=>{const n=s.formatResult(e,s.promoteSuccessString,s.promoteFailedString,s.promotePartialFailedString,t.map((e=>e.contact)));return new i.ActionType(n)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new i.ActionType(d.default.t(105,{participantNames:h,_plural:t.length}),{actionText:d.default.t(129),actionHandler:()=>v(e,t,a)}))));l.Cmd.openToast((0,f.jsx)(i.ActionToast,{id:a,initialAction:p,pendingAction:m})),yield u}))).apply(this,arguments)}function S(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.genId)();const o=null===(n=e.groupMetadata)||void 0===n?void 0:n.participants;if(null==o)return Promise.reject(new r.ActionError);if(t.some((e=>!o.canDemote(e))))return Promise.reject(new r.ActionError);const u=(0,c.sendDemoteParticipants)(e.id,t.map((e=>e.id))),h=t.map((e=>e.contact.formattedShortName)).join(d.default.t(406)),p=new i.ActionType(d.default.t(102,{participantNames:h,_plural:t.length})),m=u.then((e=>{const n=s.formatResult(e,s.demoteSuccessString,s.demoteFailedString,s.demotePartialFailedString,t.map((e=>e.contact)));return new i.ActionType(n)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:demoteParticipants dropped`,new i.ActionType(d.default.t(99,{participantNames:h,_plural:t.length}),{actionText:d.default.t(129),actionHandler:()=>S(e,t,a)}))));l.Cmd.openToast((0,f.jsx)(i.ActionToast,{id:a,initialAction:p,pendingAction:m})),yield u}))).apply(this,arguments)}},35255:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addGroupParticipants=function(e,t){return C(e,t,p).catch((0,l.filteredCatch)(d.ServerStatusCodeError,(e=>({status:e.statusCode}))))},t.demoteGroupParticipants=function(e,t){return C(e,t,m).catch((e=>{__LOG__(3)`error sending demoting group participants iq: ${e}`}))},t.promoteGroupParticipants=function(e,t){return C(e,t,g).catch((e=>{__LOG__(3)`error sending promoting group participants iq: ${e}`}))},t.removeGroupParticipants=function(e,t){return C(e,t,h).catch((e=>{__LOG__(3)`error sending removing group participants iq: ${e}`}))};var o=a(n(81109)),i=a(n(48926)),l=n(50796),r=n(31914),s=n(71914),d=n(92574),c=n(81663),u=n(24747),f=n(39410);const h="remove",p="add",m="demote",g="promote";function _(e){return new s.WapParser(`${e}GroupParticipantsReplyParser`,(t=>({id:t.attrString("id"),participants:t.child(e).mapChildren((e=>{const t=e.maybeChild("add_request");return{wid:(0,c.userJidToUserWid)(e.attrUserJid("jid")),error:e.hasAttr("error")?e.attrInt("error"):null,invite_code:t&&t.attrString("code"),invite_code_exp:t&&t.attrString("expiration")}}))})))}function C(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e,t,n){const a=t.map((e=>(0,r.wap)("participant",{jid:(0,f.JID)(e)})));let i;switch(n){case p:i=(0,r.wap)("add",null,a);break;case h:i=(0,r.wap)("remove",null,a);break;case m:i=(0,r.wap)("demote",null,a);break;case g:i=(0,r.wap)("promote",null,a);break;default:return Promise.reject(new Error(`invalid group operation ${n}`))}const l=(0,r.wap)("iq",{to:(0,f.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},i),s=yield(0,u.sendIq)(l,_(n));if(s.success){const{participants:e}=s.result,t={};return e.forEach((e=>{Object.assign(t,{[e.wid.toString()]:null!=e.error?e.error:200})})),(0,o.default)((0,o.default)({},t),{},{status:207,participants:e.map((e=>({[e.wid.toString()]:{code:null!=e.error&&e.error.toString()||"200",invite_code:e.invite_code,invite_code_exp:e.invite_code_exp}})))})}return Promise.reject(new d.ServerStatusCodeError(s.errorCode,s.errorText))}))).apply(this,arguments)}},7799:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.verifyPostcode=function(e,t){if((0,o.isLegacyWebdBackend)())return Promise.reject(new Error("Postcode feature not supported in Non MD mode"));return i.default.verifyAndSavePostcode(e,t)};var o=n(88555),i=a(n(15131))},37722:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddParticipants=function(e,t){if((0,o.isLegacyWebdBackend)())return l.default.addParticipants(e,t);return(0,i.addGroupParticipants)(e,t)},t.sendDemoteParticipants=function(e,t){if((0,o.isLegacyWebdBackend)())return l.default.demoteParticipants(e,t);return(0,i.demoteGroupParticipants)(e,t)},t.sendPromoteParticipants=function(e,t){if((0,o.isLegacyWebdBackend)())return l.default.promoteParticipants(e,t);return(0,i.promoteGroupParticipants)(e,t)},t.sendRemoveParticipants=function(e,t){if((0,o.isLegacyWebdBackend)())return l.default.removeParticipants(e,t);return(0,i.removeGroupParticipants)(e,t)};var o=n(88555),i=n(35255),l=a(n(56891))},82482:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogLink=function(e){return`https://wa.me/c/${e}`},t.createProductLink=function(e,t){return`https://wa.me/p/${t}/${e}`}},24697:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{contact:t,editable:n,profilePicThumb:a,onClick:x,onOpenStatus:S,onLoad:y,hideStatusV3:b}=e;const[j,P]=(0,l.useState)(window.innerWidth),[T,k]=(0,l.useState)(null);(0,l.useEffect)((()=>{function e(){P(window.innerWidth)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);const E=j>1300?152:122,I=!(0,u.canSeeStatusV3OnContact)()||t.statusMute||b?null:m.StatusV3Collection.get(t.id);function w(){I&&(r.Cmd.openModalMedia((0,v.jsx)(p.default,{removeTopDrawer:!1,statusV3:I}),{transition:"status-v3-modal"}),S&&S())}let O=null;T&&(O=(0,v.jsx)(_.UIE,{displayName:"ContextMenu",escapable:!0,popable:!0,requestDismiss:()=>{k(null)},children:(0,v.jsx)(C.default,{contextMenu:T})}));let A,M=null,L=s.default.noStatusBorder;null!=I&&(M=(0,v.jsx)(g.StatusV3ImageRing,{statusV3:I,size:E+24,stroke:3,theme:g.RingTheme.BUSINESS_CONTACT_INFO}),L=s.default.hasStatusBorder);A=n&&null!=a?(0,v.jsx)(h.default,{profilePicThumb:a,size:E}):(0,v.jsx)(d.DetailImage,{id:t.id,size:E,loader:!0,onLoad:y,onClick:function(e){if(x)if(null!=I&&I.totalCount>0){e.stopPropagation(),e.preventDefault();const t=[(0,v.jsx)(c.DropdownItem,{a8n:"mi-view-photo",action:()=>{x(e)},children:f.default.t(812)},"view-photo"),(0,v.jsx)(c.DropdownItem,{a8n:"mi-view-status",action:w,children:i.fbt._("View status",null,{hk:"1QQMZy"})},"view-status")];k({menu:t,event:e})}else x(e)},quality:d.DetailImageQuality.High});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:(0,o.default)(s.default.coverPhoto,{[s.default.isEditable]:n})}),(0,v.jsxs)("div",{className:s.default.avatar,children:[M,(0,v.jsx)("div",{className:L,children:A})]}),O]})};var o=a(n(94184)),i=n(48360),l=n(67294),r=n(88102),s=a(n(95941)),d=n(88984),c=n(71174),u=n(57701),f=a(n(14296)),h=a(n(79876)),p=a(n(10121)),m=n(59387),g=n(24391),_=n(18644),C=a(n(24717)),v=n(85893)},51070:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(l.default,{name:"shopping-cart",className:(0,o.default)(i.default.cartIcon,{[i.default.inheritColor]:"inherit-color"===e.theme})})};var o=a(n(94184)),i=a(n(97449)),l=a(n(23217)),r=n(85893)},77577:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{labels:t,theme:n}=e;if(!t||!(0,i.canDisplayLabel)())return null;const a="standalone"===n;return(0,s.jsx)("div",{className:(0,o.default)(l.default.labelContainer,{[l.default.standaloneLabelContainer]:a}),children:t.map(((e,t)=>(0,s.jsx)(d,{labelId:e,isStandalone:a},t)))})};var o=a(n(94184)),i=n(57701),l=a(n(65753)),r=n(84543),s=n(85893);function d(e){let{labelId:t,isStandalone:n}=e;return(0,s.jsx)("div",{className:(0,o.default)(l.default.labelRow,{[l.default.standaloneLabelRow]:n}),children:(0,s.jsx)(r.Labels,{labels:[t],showName:!0})})}},44043:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCartClick:t,cartCount:n,catalogId:a,canManageCatalog:o,onSendCatalog:i,onOpenCollections:r,onOpenMerchantDetailsForm:d,onOpenSettings:c}=e,u=(0,l.useContext)(s.DrawerContext);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(x,{onClick:null!=t&&null!=a?(0,p.getOnCartClickWithLog)(t,a,(0,_.getProductCatalogContext)(u)):void 0,catalogId:a,cartCount:n}),(0,v.jsx)(S,{canManageCatalog:o,onSendCatalog:i,onOpenCollections:r,onOpenMerchantDetailsForm:d,onOpenSettings:c})]})};var o=n(51737),i=n(48360),l=n(67294),r=a(n(51070)),s=n(27394),d=n(60811),c=n(71174),u=n(57701),f=a(n(14296)),h=a(n(62371)),p=n(41868),m=n(11362),g=n(46346),_=n(97567),C=a(n(23217)),v=n(85893);function x(e){let{onClick:t,catalogId:n,cartCount:a}=e;if(t&&n){const e=(0,o.isNumber)(a)&&a>0?a.toString():void 0;return(0,v.jsx)(g.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,v.jsx)(r.default,{theme:"inherit-color"}),text:e,title:i.fbt._("Your cart",null,{hk:"Sn66V"}),onClick:t})}return null}function S(e){let{canManageCatalog:t,onSendCatalog:n,onOpenCollections:a,onOpenMerchantDetailsForm:o,onOpenSettings:l}=e;return t?(0,v.jsx)(g.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,v.jsx)(C.default,{name:"menu"}),title:f.default.t(603),children:(0,v.jsxs)(d.Dropdown,{type:d.MenuType.DropdownMenu,flipOnRTL:!0,dirX:d.DirX.LEFT,children:[(0,v.jsx)(c.DropdownItem,{a8n:"mi-foward menu-item",action:n,children:f.default.t(464)}),a&&(0,v.jsx)(c.DropdownItem,{a8n:"mi-collections menu-item",action:a,children:i.fbt._("Collections",null,{hk:"1VWu7A"})}),(0,u.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)((0,m.getMeUser)().user)&&o&&(0,v.jsx)(c.DropdownItem,{a8n:"merchant-details",action:o,children:i.fbt._("Business details",null,{hk:"m9xzp"})},"merchantDetails"),(0,u.canToggleCartOnOff)()&&l&&(0,v.jsx)(c.DropdownItem,{a8n:"mi-settings menu-item",action:l,children:i.fbt._("Settings",null,{hk:"2RmHUB"})})]},"CatalogDetailHeader")}):(0,v.jsx)(g.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:(0,v.jsx)(h.default,{}),title:i.fbt._("Catalog link",null,{hk:"M36Dw"}),onClick:n})}},42953:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(48360),i=n(67294),l=(a(n(56720)),a(n(39770))),r=a(n(52892)),s=n(27394),d=a(n(33308)),c=n(29623),u=a(n(48846)),f=n(57701),h=n(77975),p=n(60263),m=n(97567),g=n(5641),_=n(3013),C=n(31019),v=a(n(23217)),x=a(n(1784)),S=n(85893);const y={addIcon:{position:"g0rxnol2",width:"d0st09ow",height:"bbl9m3t3",paddingBottom:"aus7m8kn",marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"svoq16ka",borderTop:"rom324v9",borderEnd:"na7ur5ty",borderBottom:"gjeyj30g",borderStart:"bmro6pka",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",":before":{position:"oxaw94s0",top:"ijeufx4s",start:"meq75apj",display:"oa3lyrek",width:"slvs4faj",height:"jaq0b63r",content:"lij4d1x3",background:"nkmjymgc",transform:"k95pjfv1"},":after":{position:"dkvli2l0",top:"qi2a0yje",start:"bunkm0yn",display:"b0f5vxaq",width:"qbfuvgfc",height:"i0r7mfoh",content:"k15o3o4i",background:"fji5f4ri",transform:"cai600lj"}},largeGallerySpacing:{width:"b8z6cu80",height:"bbl9m3t3",marginEnd:"jnwc1y2a",marginBottom:"qrsyb3yy"},placeholderThumb:{width:"d0st09ow",height:"fujac5jc",paddingBottom:"lxvt2vq0",marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"or9x5nie",marginStart:"svoq16ka",backgroundColor:"o27ac25e",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x"},subtitle:{marginTop:"tt8xd2xn",marginEnd:"q471nw87",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"sbs3osm6"}};function b(e){let{catalogEntryLabel:t,onClick:n}=e;return null==t?null:(0,S.jsx)("div",{className:r.default.catalogEntryButton,children:(0,S.jsx)(l.default,{a8nText:"catalog-entry-button",type:"secondary",onClick:n,children:t})})}function j(){return(0,S.jsx)("div",{className:r.default.shopsLogo,children:(0,S.jsx)(v.default,{name:"fbshops",display:"inline"})})}function P(e){let t,n,{productsToShow:a,catalog:i,hideIncompleteRows:l,filterProductId:r,seeMoreOverlay:s,showProductPlaceholders:d,onProductThumbClick:c,onProductImageClick:u}=e,h=[],m=a;if((0,f.canSeeBizProfileV3)()&&(n="largeGallerySpacing"),null!=i?(t=i.productCollection,h=i.productCollection.getProductModels(),l&&h.length>3&&(m=Math.min(a,h.length-h.length%3)),h=h.slice(0,m+1),h=h.filter((e=>e.id.toString()!==r)).map(((e,t)=>{var a;const l=null===(a=e.getPreviewImage())||void 0===a?void 0:a.mediaData;if(!l)return(0,S.jsx)(S.Fragment,{});let r;s&&t===m-1&&i.productCollection.length>m-1&&(r=o.fbt._("See more",null,{hk:"450jnd"}));return(0,S.jsx)(_.ProductThumb,{onClick:()=>c(null!=r,e),mediaData:l,overlayContent:r,theme:n},e.id.toString())})).slice(0,m)):(t=new g.ProductCollection,t.add({id:"_ph"})),!h.length&&!d)return null;let C,v=y.addIcon;for(;d&&h.length<m;)h.push((0,S.jsx)(x.default,{onClick:u,title:o.fbt._("Add product",null,{hk:"3gdovw"}),xstyle:[v,"largeGallerySpacing"===n&&y.largeGallerySpacing],children:(0,S.jsx)(S.Fragment,{})},`_ph${h.length}`)),v=y.placeholderThumb;return(0,f.canSeeBizProfileV3)()&&(C="space-between"),(0,S.jsx)(p.MediaGalleryView,{productMedias:h,mediaCollection:t,justify:C})}function T(e){const{onProductCatalog:t,title:n,subtitle:a,animation:l,sectionTheme:f,shouldLog:p,catalog:g,onProductDetail:_,filterProductId:x,productsToShow:T,hideIncompleteRows:k,showProductPlaceholders:E,seeMoreOverlay:I,catalogEntryLabel:w,showShopsLogo:O}=e,A=(0,i.useContext)(s.DrawerContext);(0,i.useEffect)((()=>{p&&null!=g&&(0,h.logBusinessProfileCatalogView)({catalogOwnerWid:g.id,catalogContext:(0,m.getProductCatalogContext)(A)})}),[]);const M=(0,S.jsx)(b,{catalogEntryLabel:w,onClick:()=>t((0,m.getProductCatalogContext)(A),"ContactInfo")}),L=(0,S.jsx)(P,{productsToShow:T,catalog:g,hideIncompleteRows:k,filterProductId:x,seeMoreOverlay:I,showProductPlaceholders:E,onProductThumbClick:(e,n)=>e?t((0,m.getProductCatalogContext)(A),"ContactInfo"):(e=>{p&&(0,h.logProfileProductClick)({product:(0,C.unproxy)(e),catalogContext:(0,m.getProductCatalogContext)(A)}),_(e)})(n),onProductImageClick:()=>t((0,m.getProductCatalogContext)(A),"ContactInfo")}),N=a?(0,S.jsx)(u.default,{xstyle:y.subtitle,children:a}):null,R=(0,S.jsxs)(c.FlexRow,{align:"center",children:[N,(0,S.jsx)(u.default,{children:(0,S.jsx)(v.default,{className:r.default.chevron,name:"chevron-right-alt",directional:!0})})]});return(0,S.jsxs)(d.default,{title:n||o.fbt._("Products",null,{hk:"3Ky71N"}),titleOnClick:()=>t((0,m.getProductCatalogContext)(A),"ContactInfo"),subtitle:R,theme:f,animation:l,children:[L,M,!0===O?(0,S.jsx)(j,{}):null]})}T.defaultProps={productsToShow:6,sectionTheme:"padding",hideIncompleteRows:!1};var k=T;t.default=k},7532:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onBack:t,onCancel:n,catalog:a,contact:j,prompt:P,centerDrawer:T,onSend:k}=e,E=(0,i.useContext)(h.DrawerContext),I=()=>{s.Cmd.openModal((0,y.jsx)(v.default,{catalog:a,onSend:k}),{transition:"modal-flow"}),(0,g.logShareCatalogViaWALinkClick)({catalogOwnerWid:a.id,catalogContext:(0,C.getProductCatalogContext)(E)})},w=(0,y.jsx)(c.DetailImage,{id:j.id,size:82,quality:c.DetailImageQuality.High});let O,A;T&&(O="labels",A="center-column");return(0,y.jsxs)(u.default,{theme:O,children:[(0,y.jsx)(p.DrawerHeader,{a8n:"catalog-link-title",title:o.fbt._("Catalog link",null,{hk:"M36Dw"}),onBack:t,onCancel:n,type:p.DRAWER_HEADER_TYPE.SMALL}),(0,y.jsxs)(f.default,{theme:A,children:[(0,y.jsx)("div",{className:l.default.prompt,children:P}),(0,y.jsx)(r.default,{image:w,primary:(0,y.jsx)(_.Name,{contact:j,useVerifiedName:!0}),theme:"identity",secondary:(0,y.jsx)(m.default,{id:b,href:(0,S.createCatalogLink)(a.id.user),onClick:e=>{e.preventDefault(),I()},noHandle:!0})}),(0,y.jsx)(x.default,{onClick:I}),(0,y.jsx)(d.default,{elementId:b,onClick:()=>{(0,g.logShareCatalogCopyLinkClick)({catalogOwnerWid:a.id,catalogContext:(0,C.getProductCatalogContext)(E)})}})]})]},"catalog-link-drawer")};var o=n(48360),i=n(67294),l=a(n(71429)),r=a(n(44356)),s=n(88102),d=a(n(26609)),c=n(88984),u=a(n(60453)),f=a(n(69637)),h=n(27394),p=n(94790),m=a(n(786)),g=n(77975),_=n(12176),C=n(97567),v=a(n(35400)),x=a(n(51628)),S=n(82482),y=n(85893);const b="catalog-link-anchor"},17986:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return l.apply(this,arguments)};var o=a(n(48926)),i=n(93581);function l(){return(l=(0,o.default)((function*(e){var t;let n=i.BusinessProfileCollection.get(e);if(!n||n.stale){const t=yield i.BusinessProfileCollection.update(e);n=Array.isArray(t)?t[0]:t}return(null===(t=n.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}},11466:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contactId:t,onSendProduct:n,onReportProduct:a,onProductLinkClick:o,onProductMoreInformation:l,onCartClick:r,cartCount:s,catalogId:p}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(v,{cartCount:s,catalogId:p,onClick:r}),(0,C.jsx)(m.MenuBarItem,{a8nText:"menu-bar-product-link",icon:(0,C.jsx)(h.default,{}),title:i.fbt._("Product link",null,{hk:"1RIlvV"}),onClick:o}),(0,C.jsx)(m.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,C.jsx)(_.default,{name:"menu"}),title:f.default.t(603),children:(0,C.jsxs)(d.Dropdown,{type:d.MenuType.DropdownMenu,flipOnRTL:!0,dirX:d.DirX.LEFT,children:[(0,C.jsx)(c.DropdownItem,{a8n:"mi-send menu-item",action:n,children:i.fbt._("Send product",null,{hk:"1wkzue"})}),(0,u.canSeeECommerceComplianceIndiaSoftEnforcement)(t)&&(0,C.jsx)(c.DropdownItem,{a8n:"mi-send menu-item",action:l,children:i.fbt._("More information",null,{hk:"2JHvi1"})}),(0,C.jsx)(c.DropdownItem,{a8n:"mi-report menu-item",action:a,children:i.fbt._("Report product",null,{hk:"1jgCyX"})})]},"ProductDetailHeader")})]})};var o=n(51737),i=n(48360),l=n(67294),r=a(n(51070)),s=n(27394),d=n(60811),c=n(71174),u=n(57701),f=a(n(14296)),h=a(n(62371)),p=n(41868),m=n(46346),g=n(97567),_=a(n(23217)),C=n(85893);function v(e){let{onClick:t,cartCount:n,catalogId:a}=e;const d=(0,l.useContext)(s.DrawerContext);if(t&&a){const e=(0,o.isNumber)(n)&&n>0?n.toString():void 0;return(0,C.jsx)(m.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,C.jsx)(r.default,{}),text:e,title:i.fbt._("Your cart",null,{hk:"Sn66V"}),onClick:(0,p.getOnCartClickWithLog)(t,a,(0,g.getProductCatalogContext)(d))})}return null}},14375:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorState=function(e,t){if(e instanceof o.Unmount);else if(e instanceof a.ServerStatusCodeError)"not_found"===e.status||404===e.status?t("NOT_FOUND"):(t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(e instanceof a.WebdDrop))throw t("ERROR"),e;t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var a=n(92574),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=o?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(a,l,r):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(35232));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}},61055:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{fetchState:t}=e;switch(t){case"NONE":case"SUCCESS":return null;case"PENDING":return(0,d.jsxs)("div",{className:(0,o.default)(l.default.loadingContainer),children:[(0,d.jsx)(r.Spinner,{size:14,color:r.colorOptions.highlight}),(0,d.jsx)(s.TextSpan,{className:(0,o.default)(l.default.text,l.default.loadingText),theme:"small",children:i.fbt._("Waiting for network",null,{hk:"3I2DtN"})})]});case"NOT_FOUND":case"ERROR":return(0,d.jsx)("div",{className:(0,o.default)(l.default.loadingContainer),children:(0,d.jsx)(s.TextSpan,{className:l.default.text,theme:"small",color:"danger",children:"NOT_FOUND"===t?i.fbt._("This product or service has been removed",null,{hk:"3mE1ld"}):i.fbt._("Something went wrong",null,{hk:"7C9hw"})})});default:throw new Error(`invalid fetchState ${t}`)}};var o=a(n(94184)),i=n(48360),l=a(n(52387)),r=n(11054),s=n(13923),d=n(85893)},62371:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(l.default,{name:"link",className:(0,o.default)(i.default.linkIcon,{[i.default.inheritColor]:"inherit-color"===e.theme})})};var o=a(n(94184)),i=a(n(34079)),l=a(n(23217)),r=n(85893)},786:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{id:t,href:n,onClick:a,noHandle:r}=e;return(0,l.jsx)("span",{className:o.default.linkContainer,children:(0,l.jsx)(i.SelectableLink,{id:t,href:n,className:o.default.activeLink,selectable:!0,onClick:a,"data-nohandle":r,children:n})})};var o=a(n(24100)),i=n(52596),l=n(85893)},47217:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleCollectionAppeal=function(){return b.apply(this,arguments)},t.handleCollectionDelete=function(e,t,n){return new Promise(((a,o)=>{s.Cmd.openModal((0,v.jsx)(d.default,{title:r.fbt._("Delete Collection",null,{hk:"2y3JZ4"}),okText:r.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:r.fbt._("Cancel",null,{hk:"H0gNq"}),onOK:()=>{s.Cmd.closeModal(),function(){return y.apply(this,arguments)}(e,t,n).then((e=>a(e))).catch((e=>o(e)))},onCancel:()=>{s.Cmd.closeModal(),a(!1)},children:(0,v.jsx)("div",{children:r.fbt._("When you delete this collection, items in the collection will not be deleted.",null,{hk:"192Jcv"})})}))}))},t.handleCollectionSave=function(e,t,n,a,o,i){let l;g.QPL.markerPoint(_.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,"datasource_start"),l=t?(0,m.editCollection)(t.id.toString()||"",n===t.name?void 0:n,!1,a.map((e=>e.id.toString())),o.map((e=>e.id.toString())),i.session.toString()).then((i=>(g.QPL.markerPoint(_.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,"datasource_end"),t.name=n,t.reviewStatus=i.reviewStatus,e.collections.replaceId(t.id,i.id),0===a.length&&0===o.length||(t.productCollection.reset(),t.afterCursor=void 0,e.collections.reset(),e.collections.afterCursor=""),!0))):(0,m.createCollection)(n,a.map((e=>e.id.toString())),i.session.toString()).then((t=>(g.QPL.markerPoint(_.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,"datasource_end"),(0,u.logCollectionCreated)({catalogContext:i,collectionId:t.id,productCount:a.length}),e.collections.reset(),e.collections.afterCursor="",!0)));return l.catch((e=>{const t=e=>{s.Cmd.openToast((0,v.jsx)(C.Toast,{msg:e,id:(0,C.genId)("catalog_save_collection_failed")}))};let n=r.fbt._("Failed to save collection",null,{hk:"3Chwhp"});if("not-acceptable"===e.text)return"products"===e.fieldName&&"duplicate"===e.fieldReason&&(n=r.fbt._("You already have a collection with this group of items. Add or delete items to make a different group.",null,{hk:"1fZXaY"})),"collection"===e.fieldName&&"empty"===e.fieldReason&&(n=r.fbt._("A collection must have at least one item in it",null,{hk:"39rLHR"})),t(n),!1;throw __LOG__(4,!0,new Error,!0)`Failed to save collection, error: ${e}`,SEND_LOGS("Saving collection failed"),t(n),e}))},t.handleProductDelete=function(e,t,n,a){return(0,c.logDeleteProductClick)(t,1,n),new Promise(((o,i)=>{s.Cmd.openModal((0,v.jsx)(d.default,{title:r.fbt._("Delete Item",null,{hk:"20DBg1"}),okText:r.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:r.fbt._("Cancel",null,{hk:"H0gNq"}),onOK:()=>{s.Cmd.closeModal(),g.QPL.markerStart(_.QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,{annotations:{string:{EntryPoint:a}}}),function(){return x.apply(this,arguments)}(e,t,n).then((e=>{g.QPL.markerEnd(_.QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,g.QuickLogActionType.SUCCESS),o(e)})).catch((e=>{g.QPL.markerEnd(_.QuickLogMarkerId.WHATSAPP_PRODUCT_DELETE,g.QuickLogActionType.FAIL),i(e)}))},onCancel:()=>{s.Cmd.closeModal(),o(!1)},children:(0,v.jsx)("div",{children:r.fbt._("Are you sure you want to delete this item from your catalog?",null,{hk:"2WwNSA"})})}))}))},t.handleProductVisibilityChange=function(e,t,n,a){const o=t.id.toString(),i=!t.isHidden;i?(0,c.logCatalogProductHideClick)(o,n):(0,c.logCatalogProductShowClick)(o,n);return new Promise(((l,u)=>{const f=t.isHidden?r.fbt._("Show item in your catalog?",null,{hk:"VfDKM"}):r.fbt._("Hide item in your catalog?",null,{hk:"1KmslI"});s.Cmd.openModal((0,v.jsx)(d.default,{okText:r.fbt._("OK",null,{hk:"2KEeHb"}),cancelText:r.fbt._("Cancel",null,{hk:"H0gNq"}),onOK:()=>{g.QPL.markerStart(_.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,{annotations:{string:{EntryPoint:a}}}),s.Cmd.closeModal(),function(){return S.apply(this,arguments)}(e,t).then((()=>{g.QPL.markerEnd(_.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,g.QuickLogActionType.SUCCESS),i?(0,c.logCatalogProductHideSuccess)(o,n):(0,c.logCatalogProductShowSuccess)(o,n),l(!0)})).catch((e=>{g.QPL.markerEnd(_.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,g.QuickLogActionType.FAIL),i?(0,c.logCatalogProductHideFailed)(o,n):(0,c.logCatalogProductShowFailed)(o,n),u(e)}))},onCancel:()=>{s.Cmd.closeModal(),i?(0,c.logCatalogProductHideCancelled)(o,n):(0,c.logCatalogProductShowCancelled)(o,n),l(!1)},children:(0,v.jsx)("div",{children:f})}))}))};var o=a(n(48926)),i=n(50796),l=n(92574),r=n(48360),s=n(88102),d=a(n(52665)),c=n(77975),u=n(35054),f=n(96519),h=n(21374),p=n(5641),m=n(60323),g=n(48870),_=n(27798),C=n(50452),v=n(85893);function x(){return(x=(0,o.default)((function*(e,t,n){try{return yield(0,f.deleteProducts)([t.id.toString()]),(0,c.logDeleteProductSuccess)(t,1,n),e.productCollection.evictImagesFromCache(t.id.toString()),e.productCollection.remove(t.id.toString()),e.collections&&e.collections.forEach((e=>e.productCollection.remove(t.id.toString()))),!0}catch(e){return(0,i.filteredCatch)(l.ServerStatusCodeError,(e=>((0,c.logDeleteProductFailed)(t,1,n,e.statusCode),s.Cmd.openToast((0,v.jsx)(C.Toast,{msg:r.fbt._("Failed to delete product",null,{hk:"18E03X"}),id:(0,C.genId)("catalog_delete_product_failed")})),!1)))(e)}}))).apply(this,arguments)}function S(){return(S=(0,o.default)((function*(e,t){yield(0,h.productVisibilitySet)([{productId:t.id.toString(),isHidden:!t.isHidden}]),t.isHidden=!t.isHidden;[e.productCollection,...(e.collections||[]).map((e=>e.productCollection))].forEach((e=>{const n=e.get(t.id);n&&(n.isHidden=t.isHidden)}))}))).apply(this,arguments)}function y(){return(y=(0,o.default)((function*(e,t,n){try{return yield(0,m.deleteCollection)(t.id.toString(),n.session.sessionId.toString()),e.collections.remove(t.id.toString()),(0,u.logCollectionDeleted)({catalogContext:n,collectionId:t.id}),!0}catch(e){return(0,i.filteredCatch)(l.ServerStatusCodeError,(e=>(__LOG__(4,!0,new Error,!0)`Failed to delete collection, error: ${e}`,SEND_LOGS("Deleteing collection failed"),s.Cmd.openToast((0,v.jsx)(C.Toast,{msg:r.fbt._("Failed to delete collection",null,{hk:"S7UrR"}),id:(0,C.genId)("catalog_delete_product_failed")})),!1)))(e)}}))).apply(this,arguments)}function b(){return(b=(0,o.default)((function*(e,t){g.QPL.markerPoint(_.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,"datasource_start"),yield(0,m.appealCollection)(e.id.toString(),t),e.set({canAppeal:!1,reviewStatus:p.PRODUCT_REVIEW_STATUS.PENDING}),g.QPL.markerPoint(_.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,"datasource_end")}))).apply(this,arguments)}},33889:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,a8nText:n="add-item"}=e,a=(0,o.default)(l.default.addItemButton,{[l.default.themeDefault]:"default"===e.theme,[l.default.themeInList]:"in-list"===e.theme,[l.default.themeCollections]:"collections"===e.theme}),u=(0,d.jsx)(s.default,{title:i.fbt._("Add new item",null,{hk:"2Tc6p3"}),onClick:()=>{},xstyle:c.addIcon,children:(0,d.jsx)(d.Fragment,{})});return(0,d.jsx)(r.default,{theme:"add-item",image:u,customImage:!0,primary:e.title||i.fbt._("Add new item",null,{hk:"2Tc6p3"}),className:a,onClick:t,idle:e.idle,a8n:n})};var o=a(n(94184)),i=n(48360),l=(a(n(56720)),a(n(57086))),r=a(n(44356)),s=a(n(1784)),d=n(85893);const c={addIcon:{position:"g0rxnol2",width:"o22r6p4i",height:"dng4fqht",borderTop:"btoh1681",borderEnd:"sngpozrj",borderBottom:"c2eze1zb",borderStart:"bd2x2sk5",borderTopStartRadius:"l147y7tb",borderTopEndRadius:"mjscftrx",borderBottomEndRadius:"fqwk616h",borderBottomStartRadius:"pkud3j3x",":focus":{borderTopStartRadius:"mmjxyicr",borderTopEndRadius:"r1jx4bdh",borderBottomEndRadius:"f9yclydc",borderBottomStartRadius:"mtzt60z0",boxShadow:"esbo3we0"},"::before":{position:"jiaumjzp",top:"iu8zqbur",left:"c4kjmepz",display:"chh99fau",width:"ln1ej6zg",height:"i0a739jv",content:"ckfn5qle",backgroundColor:"t4c1fkc8",transform:"bsbo06yw"},"::after":{position:"tkubpkrc",top:"khfyavfg",left:"nly7wueh",display:"l1wvjj35",width:"dbiwaw4z",height:"l9a7srmz",content:"lw9p9708",backgroundColor:"sadoqatt",transform:"n2obx7p9"}}}},79174:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionIntegrityBanner=function(e){const{collection:t,onEditCollection:n}=e,a=()=>{n&&n(t)},l=()=>{s.Cmd.openModal((0,m.jsx)(i.default,{collection:t}))};switch(t.reviewStatus){case h.PRODUCT_REVIEW_STATUS.PENDING:return(0,m.jsxs)("div",{className:d.default.pendingBanner,children:[o.fbt._("This collection is being reviewed. Once it’s approved, your customers will see it in your catalog.",null,{hk:"3DQb07"}),(0,m.jsx)("div",{className:d.default.iconContainerPending,children:(0,m.jsx)(p.default,{name:"info"})})]});case h.PRODUCT_REVIEW_STATUS.REJECTED:return(0,u.canAppealCollections)()?(0,m.jsx)(C,{collection:t,onRename:a,onAppeal:l}):(0,m.jsx)(_,{onRename:a});default:return null}},t.getCollectionIntegrityHeight=function(e){return(0,u.canAppealCollections)()&&e.reviewStatus===h.PRODUCT_REVIEW_STATUS.REJECTED?2*l.PRODUCT_LIST_ITEM_HEIGHT+10:l.PRODUCT_LIST_ITEM_HEIGHT+10};var o=n(48360),i=a(n(5970)),l=n(64481),r=a(n(99360)),s=n(88102),d=a(n(49437)),c=n(41399),u=n(57701),f=a(n(56074)),h=n(5641),p=a(n(23217)),m=n(85893);function g(){return(0,m.jsx)("div",{className:d.default.iconContainerRejected,children:(0,m.jsx)(p.default,{name:"info"})})}function _(e){let{onRename:t}=e;return(0,m.jsxs)("div",{className:d.default.rejectedBanner,children:[o.fbt._("This collection wasn’t approved because it doesn’t follow our guidelines.",null,{hk:"4bjvNq"}),(0,m.jsx)(r.default,{onClick:t,children:o.fbt._("Rename",null,{hk:"2U6ctb"})}),(0,m.jsx)(g,{})]})}function C(e){let{collection:t,onRename:n,onAppeal:a}=e;const i=(t.rejectReason||"other_violation").toLowerCase(),l=(0,c.getRejectedCollectionCopy)(i,t.commerceUrl),s=(0,m.jsx)(r.default,{onClick:n,children:o.fbt._("rename the collection",null,{hk:"2j5eIB"})});if(t.canAppeal){const e=(0,m.jsx)(r.default,{onClick:a,children:o.fbt._("request another review",null,{hk:"2BSEoy"})}),t=(0,m.jsx)(f.default,{id:306,params:{rename_collection_link:s,request_another_review_link:e}});return(0,m.jsxs)("div",{className:d.default.rejectedBannerWithAppeal,children:[l.first,(0,m.jsx)("br",{}),t,(0,m.jsx)(g,{})]})}const u=(0,m.jsx)(f.default,{id:330,params:{rename_collection_link:s}});return(0,m.jsxs)("div",{className:d.default.rejectedBannerWithAppeal,children:[l.second,(0,m.jsx)("br",{}),u,(0,m.jsx)(g,{})]})}},74259:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onProductDetail:t,onProductShare:n,onCartOpen:a,shareLinks:C,canManageCatalog:v}=e,[x,S]=(0,o.useState)(void 0),y=(0,i.useModelValues)(e.catalog,["productCollection","afterCursor","id","index"]),b=e=>{n&&n(e)};if(!y.productCollection||!y.productCollection.getProductModels(e.canManageCatalog).length)return null;return(0,_.jsx)(u.default,{flatListControllers:[e.flatListController],children:(0,_.jsx)(c.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{const e=void 0!==a;return y.productCollection.getProductModels(v).map((t=>({itemKey:`${t.id.toString()}_${e.toString()}`,product:t})))})(),renderItem:e=>{let{product:n}=e;return(0,_.jsx)(d.DrawerContext.Consumer,{children:e=>{const o=(0,p.getProductCatalogContext)(e);return(0,_.jsx)(m.default,{product:n,onCartOpen:a,onClick:()=>((e,n)=>((0,h.logCatalogListDetailClick)({product:(0,g.unproxy)(e),catalogContext:n}),S(e.id.toString()),t(e)))(n,o),onProductShare:C?b:null,onProductDelete:e=>((e,t)=>{(0,l.handleProductDelete)(y,e,t,"Catalog").then((()=>{e.id===x&&(s.Cmd.closeDrawerMid(),S(void 0))}))})(e,o),onProductHideShow:e=>((e,t)=>{(0,l.handleProductVisibilityChange)(y,e,t,"Catalog")})(e,o),canManageCatalog:v})}})},defaultItemHeight:r.PRODUCT_LIST_ITEM_HEIGHT,keyOrder:f.KeyOrder.INVERSE})})};var o=n(67294),i=n(35461),l=n(47217),r=n(64481),s=n(88102),d=n(27394),c=n(47915),u=a(n(44942)),f=n(43882),h=n(77975),p=n(97567),m=a(n(88990)),g=n(31019),_=n(85893)},10805:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=(0,r.default)(),[_,C]=(0,l.useState)({state:m.NOT_STARTED}),[v,x]=(0,l.useState)(e.existingPostcode),S=function(){var t=(0,o.default)((function*(){if("string"==typeof v){C({state:m.IN_PROGRESS});try{const t=yield(0,h.verifyPostcode)(e.catalogId,v);a()&&C({state:m.COMPLETED,data:t}),"success"===(null==t?void 0:t.resultCode)&&(e.onSuccess(),s.Cmd.openToast((0,p.jsx)(f.Toast,{msg:i.fbt._("Postcode Updated",null,{hk:"JqNfH"}),id:(0,f.genId)()})))}catch(e){__LOG__(4,!0,new Error,!0)`[direct-connection] Updating postcode failed ${e}`,SEND_LOGS("[direct-connection] Updating postcode failed"),a()&&C({state:m.FAILED})}}}));return function(){return t.apply(this,arguments)}}(),y=(0,l.useCallback)((()=>C({state:m.NOT_STARTED})),[]),b="unserviceable_location"===(null===(t=_.data)||void 0===t?void 0:t.resultCode);let j=null;"invalid_postcode"===(null===(n=_.data)||void 0===n?void 0:n.resultCode)?j=i.fbt._("Provided postcode is invalid",null,{hk:"1MOgzc"}):"string"!=typeof v||0===v.length?j=i.fbt._("Postcode must not be empty",null,{hk:"3OZGho"}):0!==v.search("^[0-9]{6}$")&&(j=i.fbt._("Postcode must be six digits. For example 400001",null,{hk:"3PYeri"}));const P=_.state===m.IN_PROGRESS;return(0,p.jsx)(d.default,{onOK:()=>{b?y():S()},title:b?null:i.fbt._("Change Pincode",null,{hk:"3R9hJZ"}),okDisabled:P||!!j,okSpinner:P,okText:b?i.fbt._("OK",null,{hk:"2sRDxR"}):i.fbt._("Enter",null,{hk:"3Qj2Bg"}),onCancel:b||P?null:e.onCancel,children:b?(0,p.jsx)(c.Text,{as:"p",children:i.fbt._("We are currently not delivering in this area.",null,{hk:"1ZEmzv"})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Text,{as:"p",xstyle:g.infoText,children:i.fbt._("To see items available in your area, enter your pincode.",null,{hk:"1QTxOy"})}),(0,p.jsx)(u.TextInput,{onChange:e=>{y(),x(e)},value:v,managed:!0,editable:_.state!==m.IN_PROGRESS,managedError:!0,selectOnMount:!0,focusOnMount:!0,error:j}),(0,p.jsx)(c.Text,{as:"p",theme:"muted",xstyle:g.privacyText,children:i.fbt._("This pincode and your phone number will be shared with JioMart.",null,{hk:"1lrs1z"})})]})})};var o=a(n(48926)),i=n(48360),l=n(67294),r=(a(n(56720)),a(n(16747))),s=n(88102),d=a(n(52665)),c=n(13923),u=n(90011),f=n(50452),h=n(52778),p=n(85893);const m=n(76672).Mirrored(["NOT_STARTED","COMPLETED","FAILED","IN_PROGRESS"]),g={infoText:{fontSize:"enbbiyaj",lineHeight:"erpdyial",marginBottom:"t4zgqcuo"},privacyText:{fontSize:"f8jlpxt4",lineHeight:"q5jc98e4",marginTop:"iy2cu22y"}}},70988:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{postcode:t,postcodeLocationName:n}=(0,r.useModelValues)(e.businessDirectConnection,["postcode","postcodeLocationName"]);return(0,p.jsxs)("div",(0,o.default)((0,o.default)({className:(0,l.default)(m.container)},(0,s.accessibleClickableButtonProps)({onClick:()=>{c.Cmd.openModal((0,p.jsx)(d.default,{existingPostcode:null!=t?t:"",catalogId:e.catalogId,onCancel:()=>c.Cmd.closeModal(),onSuccess:()=>c.Cmd.closeModal()}))}})),{},{children:[(0,p.jsx)("span",{className:(0,l.default)(m.svgWrapper),children:(0,p.jsx)(f.default,{name:"business-address"})}),(0,p.jsxs)(u.FlexColumn,{children:[(0,p.jsx)(h.Text,{as:"p",xstyle:m.postcodeDescription,children:i.fbt._("Items available in {postcode-of-a-geographic-area}",[i.fbt._param("postcode-of-a-geographic-area",t)],{hk:"2ZYFWA"})}),(0,p.jsx)(h.Text,{as:"p",xstyle:m.postcodeLocationName,theme:"muted",children:n})]})]}))};var o=a(n(81109)),i=n(48360),l=a(n(56720)),r=n(35461),s=n(55712),d=a(n(10805)),c=n(88102),u=n(29623),f=a(n(23217)),h=n(13923),p=n(85893);const m={container:{display:"p357zi0d",alignItems:"gndfcl4n",backgroundColor:"ihvf49ua",":hover":{backgroundColor:"os03hap6"}},svgWrapper:{paddingTop:"nlnf8xo7",paddingBottom:"r219jyu0",paddingStart:"sta02ykp",width:"i94gqilv",marginEnd:"oz083wsx",color:"kv0r5hzt"},postcodeDescription:{lineHeight:"erpdyial",fontSize:"enbbiyaj"},postcodeLocationName:{lineHeight:"r5qsrrlp",fontSize:"f8jlpxt4"}}},54414:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{catalogId:n,setScrollOffset:a,onCartClick:W,onCatalogLinkClick:H,canManageCatalog:G,canLogQpl:q=!0,isPushed:z=!0,scrollOffset:K,autoUpdate:Q,businessProfile:Y,blockCartInterstitialFn:$=(()=>!1),onAddProduct:X,onProductDetail:J,onProductShare:Z,onCollectionSeeAll:ee,onEditCollection:te,onOpenCollections:ne,onRemoveProduct:ae,onOpenSettings:oe,onOpenMerchantDetailsForm:ie}=e,le=(0,N.enablePostcodeInCatalog)()&&!0===(null==Y||null===(t=Y.directConnection)||void 0===t?void 0:t.enabled),re=(0,p.default)(),se=(0,c.default)(),de=(0,d.default)(se,100),ce=(0,u.default)((()=>new M.default)),ue=(0,f.useModelValues)(e.contact,["id"]),fe=(0,s.useMemo)((()=>C.CartCollection.findCart(ue.id.toString())),[ue.id]),[he,pe]=(0,s.useState)(!1),[me,ge]=(0,s.useState)(null),[_e,Ce]=(0,s.useState)(fe.itemCount),[ve,xe]=(0,s.useState)("NONE"),[Se,ye]=(0,s.useState)(null),[be,je]=(0,s.useState)(null),[Pe,Te]=(0,s.useState)(!0),ke=function(){var e=(0,o.default)((function*(e){yield null==e?void 0:e.loadInitialItems(),Te(!1)}));return function(){return e.apply(this,arguments)}}(),Ee=(0,d.default)((()=>{se(),null==ae||ae()}),100),[Ie,we]=(0,s.useState)(),[Oe,Ae]=(0,s.useState)(!1),Me=()=>{const e=q&&z,t=e?F.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW:void 0;x.CatalogCollection.find(n,{markerId:t}).then((t=>{if(re.aborted)return;const n=new P.CatalogWithCollectionsDataSource(t,G||!1,S.PRODUCT_LIST_ITEM_HEIGHT,e),a=new P.CatalogListItemScrollHelper(n);ge(t),ye(n),je(a),xe("SUCCESS"),ke(n).then((()=>{e&&V.QPL.markerEnd(F.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,V.QuickLogActionType.SUCCESS)})).catch((()=>{e&&V.QPL.markerEnd(F.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,V.QuickLogActionType.FAIL)})),(e=>{Q&&null!=e&&(e.productCollection.on("add",de),e.productCollection.on("remove",Ee),e.collections.on("add",de),e.collections.on("remove",de))})(t),void 0!==K&&ce.current.setScrollFromStart(K)})).catch((t=>{e&&V.QPL.markerEnd(F.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,V.QuickLogActionType.FAIL),(0,O.parseErrorState)(t,(e=>{xe(e),Te(!1)}))}))},Le=()=>{const e=fe.itemCount;_e!==e&&Ce(e)};(0,s.useEffect)((()=>{le?(Ae(!0),_.default.getCypher(n).then((e=>{we(e),Ae(!1),Me()}))):Me(),(0,k.default)(n).then((e=>{pe(e),e&&fe.on("all",Le)}))}),[]);const Ne=(0,h.default)(((e,t)=>{a&&a(t.scrollTop),(null==be?void 0:be.willLoadMore(t))&&Te(!0),null==be||be.onScroll(e,t).then((e=>{e&&Te(!1)})).catch((e=>{throw Te(!1),e}))}),100),Re=()=>{(0,R.qplStartCartView)("Catalog"),null==W||W(ue.id.toString())},De=(0,U.jsx)(y.default,{onSendCatalog:()=>{me&&H(me,ue)},onCartClick:he?Re:void 0,cartCount:fe.itemCount,catalogId:n.toString(),canManageCatalog:G,onOpenCollections:ne,onOpenMerchantDetailsForm:ie,onOpenSettings:oe});return(0,U.jsxs)(E.default,{theme:"products",onDrop:e.onBack,children:[(0,U.jsx)(w.DrawerHeader,{title:r.fbt._("Catalog",null,{hk:"3YVOSV"}),type:e.headerType||w.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:De,focusBackOrCancel:!0}),(0,U.jsx)(I.default,{onScroll:e=>{Ne(e,e.currentTarget)},flatListControllers:[ce.current],children:(()=>{const e=he&&W?Re:void 0;let t,a,o,s;if(G&&X&&(t=(0,U.jsx)(g.default,{onClick:()=>X(),theme:"collections",a8nText:"add-item"})),me&&G&&te){a=me.productCollection.getProductModels(!0).some((e=>!e.isHidden&&"REJECTED"!==e.reviewStatus))?(0,U.jsx)(g.default,{onClick:()=>{te(null)},theme:"collections",title:r.fbt._("Add new collection",null,{hk:"1DddmB"}),a8nText:"add-collection"}):null}return me&&Se?(o=(0,U.jsx)(D.default,{onCartOpen:e,onProductDetail:J,flatListController:ce.current,catalog:me,canManageCatalog:G,shareLinks:G,onProductShare:Z,onCollectionSeeAll:ee,data:Se.getData(),onEditCollection:te}),(0,l.isMDBackend)()&&G&&((0,m.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&he&&!$()&&(0,v.default)(),s=(0,U.jsx)(b.default,{onOpenCollections:ne}))):o=(0,U.jsx)(A.default,{fetchState:ve}),(0,U.jsxs)(U.Fragment,{children:[Y&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{"data-a8n":i.default.key("catalog-header"),className:T.default.header,children:(0,U.jsx)(B.default,{profilePicThumb:ue.getProfilePicThumb(),contact:ue,businessProfile:Y})}),le&&!Oe&&Ie&&(0,U.jsx)(j.default,{catalogId:n,businessDirectConnection:Ie})]}),(0,U.jsxs)("div",{"data-a8n":i.default.key("catalog-items"),className:T.default.list,children:[s,t,a,o,Pe&&(0,U.jsx)(L.default,{})]})]})})()})]})};var o=a(n(48926)),i=a(n(99964)),l=n(88555),r=n(48360),s=n(67294),d=a(n(51799)),c=a(n(59312)),u=a(n(16223)),f=n(35461),h=a(n(90886)),p=a(n(3409)),m=n(57849),g=a(n(33889)),_=a(n(15131)),C=n(12392),v=a(n(13712)),x=n(99989),S=n(64481),y=a(n(44043)),b=a(n(92351)),j=a(n(70988)),P=n(10448),T=a(n(71704)),k=a(n(17986)),E=a(n(60453)),I=a(n(69637)),w=n(94790),O=n(14375),A=a(n(61055)),M=a(n(30855)),L=a(n(29796)),N=n(90915),R=n(82145),D=a(n(44315)),B=a(n(62647)),V=n(48870),F=n(27798),U=n(85893)},19829:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContentDrawer=function(e){var t;const{catalogId:n,onCartClick:a,onCatalogLinkClick:D,setScrollOffset:B,canManageCatalog:V,scrollOffset:F,collection:U,onProductDetail:W,onProductShare:H,onEditCollection:G}=e,q=(0,s.default)(),z=(0,f.default)(),K=(0,l.useContext)(j.DrawerContext),Q=(0,u.useModelValues)(e.contact,["id"]),Y=(0,l.useMemo)((()=>p.CartCollection.findCart(Q.id.toString())),[Q.id]),$=(0,d.default)((()=>new E.default)),[X,J]=(0,l.useState)(!1),[Z,ee]=(0,l.useState)(null),[te,ne]=(0,l.useState)(Y.itemCount),[ae,oe]=(0,l.useState)("NONE"),[ie,le]=(0,l.useState)(null),[re,se]=(0,l.useState)(null),[de,ce]=(0,l.useState)(!0);(0,c.useListener)(null==U?void 0:U.productCollection,["add","remove"],q),(0,c.useListener)(null==Z?void 0:Z.productCollection,["add","remove"],q),(0,c.useListener)(null==Z?void 0:Z.collections,["add","remove"],q),(0,c.useListener)(U,["change:reviewStatus","canAppeal"],q);const ue=function(){var e=(0,o.default)((function*(e){yield null==e?void 0:e.loadInitialItems(),ce(!1),(0,w.logCollectionSeeAllView)({catalogOwnerJid:n.toString(),catalogContext:(0,A.getProductCatalogContext)(K),collectionId:null==e?void 0:e.collectionId})}));return function(){return e.apply(this,arguments)}}(),fe=()=>{const e=Y.itemCount;te!==e&&ne(e)};(0,l.useEffect)((()=>{m.CatalogCollection.find(n).then((e=>{if(z.aborted)return;ee(e),oe("SUCCESS");const t=new C.SingleCollectionDataSource(e,null==U?void 0:U.id.toString(),V||!1,g.PRODUCT_LIST_ITEM_HEIGHT),n=new C.CatalogListItemScrollHelper(t);le(t),se(n),ue(t).then((()=>{L.QPL.markerEnd(N.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,L.QuickLogActionType.SUCCESS)})).catch((()=>{L.QPL.markerEnd(N.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,L.QuickLogActionType.FAIL)})),void 0!==F&&$.current.setScrollFromStart(F)})).catch((e=>{L.QPL.markerEnd(N.QuickLogMarkerId.WHATSAPP_COLLECTION_VIEW_ALL,L.QuickLogActionType.FAIL),(0,T.parseErrorState)(e,(e=>{oe(e),ce(!1)}))})),(0,v.default)(n).then((e=>{J(e),e&&Y.on("all",fe)}))}),[]);const he=()=>{(0,O.qplStartCartView)("Collection"),null==a||a(Q.id.toString())},pe=(0,r.default)(((e,t)=>{null==B||B(t.scrollTop),(null==re?void 0:re.willLoadMore(t))&&ce(!0),null==re||re.onScroll(e,t).then((e=>{e&&ce(!1)})).catch((e=>{throw ce(!1),e}))}),100),me=(0,R.jsx)(_.default,{onSendCatalog:()=>{Z&&D(Z,Q)},onCartClick:X?he:void 0,cartCount:Y.itemCount,catalogId:n.toString(),canManageCatalog:V}),ge=(null===(t=e.collection)||void 0===t?void 0:t.name)||i.fbt._("All Items",null,{hk:"2x8dE2"});return(0,R.jsxs)(y.default,{theme:"products",onDrop:e.onBack,children:[(0,R.jsx)(P.DrawerHeader,{title:ge,type:e.headerType||P.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:me}),(0,R.jsx)(b.default,{flatListControllers:[$.current],onScroll:e=>{pe(e,e.currentTarget)},children:(()=>{const e=X&&a?he:void 0;if(!Z||!ie)return(0,R.jsx)(k.default,{fetchState:ae});const t=ie.getData();if(0===t.length&&!de&&V&&U)return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:x.default.list,children:[(0,R.jsx)(h.default,{theme:"collections",onClick:()=>{null==G||G(U)},a8nText:"add-collection"}),(0,R.jsx)("div",{className:x.default.addItemsNotice,children:i.fbt._("This collection won’t be visible to customers until you add at least 1 item",null,{hk:"34nbHb"})})]})});const n=(0,R.jsx)(M.default,{onCartOpen:e,onProductDetail:W,flatListController:$.current,catalog:Z,canManageCatalog:V,shareLinks:V,onProductShare:H,collectionId:null==U?void 0:U.id.toString(),data:t}),o=U?(0,R.jsx)(S.CollectionIntegrityBanner,{collection:U,onEditCollection:G}):void 0;return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:x.default.list,children:[o,n,de&&(0,R.jsx)(I.default,{})]})})})()})]})};var o=a(n(48926)),i=n(48360),l=n(67294),r=a(n(51799)),s=a(n(59312)),d=a(n(16223)),c=n(87550),u=n(35461),f=a(n(3409)),h=a(n(33889)),p=n(12392),m=n(99989),g=n(64481),_=a(n(44043)),C=n(10448),v=a(n(17986)),x=a(n(27897)),S=n(79174),y=a(n(60453)),b=a(n(69637)),j=n(27394),P=n(94790),T=n(14375),k=a(n(61055)),E=a(n(30855)),I=a(n(29796)),w=n(35054),O=n(82145),A=n(97567),M=a(n(44315)),L=n(48870),N=n(27798),R=n(85893)},36153:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collection:t,onSeeAll:n,allItems:a}=e;let h,p;t?({name:h,id:p}=t):a&&(h=o.fbt._("All Items",null,{hk:"2x8dE2"}));const m=(0,f.jsx)(u.TextDiv,{className:r.default.collectionName,theme:"title",children:(0,f.jsx)(s.EmojiText,{text:h,ellipsify:!0,titlify:!0})});function g(e){!function(e){e.preventDefault(),e.stopPropagation()}(e),(0,d.qplStartCollectionViewAll)("Catalog"),n&&t?n(t):n&&n()}let _;if(t)switch(t.reviewStatus){case c.PRODUCT_REVIEW_STATUS.REJECTED:_=(0,f.jsx)("span",{className:r.default.reviewStateRejected,children:o.fbt._("rejected",null,{hk:"3f3H8P"})})}return(0,f.jsx)(i.default,{primary:m,secondary:_,detail:(0,f.jsx)(l.default,{onClick:g,className:r.default.seeAllLink,title:o.fbt._("Collection {collectionName}, see all",[o.fbt._param("collectionName",h)],{hk:"1kqerQ"}),tabIndex:0,children:o.fbt._("See all",null,{hk:"UPjou"})}),theme:"collection-header",idle:!0,className:r.default.collectionListItem},p)};var o=n(48360),i=a(n(44356)),l=a(n(99360)),r=a(n(32067)),s=n(65417),d=n(82145),c=n(5641),u=n(13923),f=n(85893)},41399:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPolicyLink=c,t.getRejectedCollectionCopy=function(e,t){let n;switch(e){case"drugs":return n=i.fbt._("WhatsApp's Commerce Policy for prescription, recreational, or other types of Drugs",null,{hk:"B27ED"}),{first:(0,d.jsx)(s.default,{id:299,params:{collections_rejected_policy_drugs:c(n,t)}}),second:(0,d.jsx)(s.default,{id:323,params:{collections_rejected_policy_drugs:c(n,t)}})};case"weapons":return n=i.fbt._("WhatsApp's Commerce Policy for Weapons, ammunition, or explosives",null,{hk:"1X972I"}),{first:(0,d.jsx)(s.default,{id:315,params:{collections_rejected_policy_weapons:c(n,t)}}),second:(0,d.jsx)(s.default,{id:339,params:{collections_rejected_policy_weapons:c(n,t)}})};case"animals":return n=i.fbt._("WhatsApp's Commerce Policy for Animals",null,{hk:"3hxXr8"}),{first:(0,d.jsx)(s.default,{id:294,params:{collections_rejected_policy_animals:c(n,t)}}),second:(0,d.jsx)(s.default,{id:318,params:{collections_rejected_policy_animals:c(n,t)}})};case"alcohol":return n=i.fbt._("WhatsApp's Commerce Policy for Alcohol",null,{hk:"1G8YGL"}),{first:(0,d.jsx)(s.default,{id:293,params:{collections_rejected_policy_alcohol:c(n,t)}}),second:(0,d.jsx)(s.default,{id:317,params:{collections_rejected_policy_alcohol:c(n,t)}})};case"gambling":return n=i.fbt._("WhatsApp's Commerce Policy for Real money gambling services",null,{hk:"1zQIeM"}),{first:(0,d.jsx)(s.default,{id:300,params:{collections_rejected_policy_gambling:c(n,t)}}),second:(0,d.jsx)(s.default,{id:324,params:{collections_rejected_policy_gambling:c(n,t)}})};case"tobacco":return n=i.fbt._("WhatsApp's Commerce Policy for Tobacco items and related paraphernalia",null,{hk:"EAQLL"}),{first:(0,d.jsx)(s.default,{id:313,params:{collections_rejected_policy_tobacco:c(n,t)}}),second:(0,d.jsx)(s.default,{id:337,params:{collections_rejected_policy_tobacco:c(n,t)}})};case"overtly_sexualized_positioning":return n=i.fbt._("WhatsApp's Commerce Policy for Overtly sexualized positioning",null,{hk:"1oaFbX"}),{first:(0,d.jsx)(s.default,{id:308,params:{collections_rejected_policy_overtly_sexualized_positioning:c(n,t)}}),second:(0,d.jsx)(s.default,{id:332,params:{collections_rejected_policy_overtly_sexualized_positioning:c(n,t)}})};case"adult":return n=i.fbt._("WhatsApp's Commerce Policy for Adult products or service",null,{hk:"Wf7q5"}),{first:(0,d.jsx)(s.default,{id:292,params:{collections_rejected_policy_adult:c(n,t)}}),second:(0,d.jsx)(s.default,{id:316,params:{collections_rejected_policy_adult:c(n,t)}})};case"supplements":return n=i.fbt._("WhatsApp's Commerce Policy for Unsafe ingestible supplements",null,{hk:"9a4Y2"}),{first:(0,d.jsx)(s.default,{id:311,params:{collections_rejected_policy_supplements:c(n,t)}}),second:(0,d.jsx)(s.default,{id:335,params:{collections_rejected_policy_supplements:c(n,t)}})};case"body_parts_fluids":return n=i.fbt._("WhatsApp's Commerce Policy for Body parts and fluids",null,{hk:"2EAd21"}),{first:(0,d.jsx)(s.default,{id:295,params:{collections_rejected_policy_body_parts_fluids:c(n,t)}}),second:(0,d.jsx)(s.default,{id:319,params:{collections_rejected_policy_body_parts_fluids:c(n,t)}})};case"healthcare":return n=i.fbt._("WhatsApp's Commerce Policy for Medical and healthcare products",null,{hk:"3vvgOF"}),{first:(0,d.jsx)(s.default,{id:302,params:{collections_rejected_policy_healthcare:c(n,t)}}),second:(0,d.jsx)(s.default,{id:326,params:{collections_rejected_policy_healthcare:c(n,t)}})};case"misleading":return n=i.fbt._("WhatsApp's Commerce Policy for Business models, goods, items, or services that may be or are fraudulent, misleading, offensive, or deceptive, or may be or are exploitative, inappropriate, or exert undue pressure on targeted groups",null,{hk:"3TyOB"}),{first:(0,d.jsx)(s.default,{id:305,params:{collections_rejected_policy_misleading:c(n,t)}}),second:(0,d.jsx)(s.default,{id:329,params:{collections_rejected_policy_misleading:c(n,t)}})};case"real_fake_currency":return n=i.fbt._("WhatsApp's Commerce Policy for Real, virtual, or fake currency",null,{hk:"2XnVq2"}),{first:(0,d.jsx)(s.default,{id:309,params:{collections_rejected_policy_real_fake_currency:c(n,t)}}),second:(0,d.jsx)(s.default,{id:333,params:{collections_rejected_policy_real_fake_currency:c(n,t)}})};case"digital_services_products":return n=i.fbt._("WhatsApp's Commerce Policy for Digital and subscription services",null,{hk:"2mvwqB"}),{first:(0,d.jsx)(s.default,{id:297,params:{collections_rejected_policy_digital_services_products:c(n,t)}}),second:(0,d.jsx)(s.default,{id:321,params:{collections_rejected_policy_digital_services_products:c(n,t)}})};case"thrid_party_infringements":return n=i.fbt._("WhatsApp's Commerce Policy for Third-Party Infringement",null,{hk:"48SSD"}),{first:(0,d.jsx)(s.default,{id:312,params:{collections_rejected_policy_thrid_party_infringements:c(n,t)}}),second:(0,d.jsx)(s.default,{id:336,params:{collections_rejected_policy_thrid_party_infringements:c(n,t)}})};case"unauthorized_media":return n=i.fbt._("WhatsApp's Commerce Policy for Products or items that facilitate or encourage unauthorized access to digital media",null,{hk:"2ldhoF"}),{first:(0,d.jsx)(s.default,{id:314,params:{collections_rejected_policy_unauthorized_media:c(n,t)}}),second:(0,d.jsx)(s.default,{id:338,params:{collections_rejected_policy_unauthorized_media:c(n,t)}})};case"illegal_products":return n=i.fbt._("WhatsApp's Commerce Policy for Illegal products or services",null,{hk:"c5Zjc"}),{first:(0,d.jsx)(s.default,{id:304,params:{collections_rejected_policy_illegal_products:c(n,t)}}),second:(0,d.jsx)(s.default,{id:328,params:{collections_rejected_policy_illegal_products:c(n,t)}})};case"hazardous_goods_and_materials":return n=i.fbt._("WhatsApp's Commerce Policy for Business models, goods, items, or services that may be or are fraudulent, misleading, offensive, or deceptive, or may be or are exploitative, inappropriate, or exert undue pressure on targeted groups",null,{hk:"3TyOB"}),{first:(0,d.jsx)(s.default,{id:301,params:{collections_rejected_policy_hazardous_goods_and_materials:c(n,t)}}),second:(0,d.jsx)(s.default,{id:325,params:{collections_rejected_policy_hazardous_goods_and_materials:c(n,t)}})};case"stolen_goods":return n=i.fbt._("WhatsApp's Commerce Policy",null,{hk:"1kuvvN"}),{first:(0,d.jsx)(s.default,{id:310,params:{collections_rejected_policy_stolen_goods:c(n,t)}}),second:(0,d.jsx)(s.default,{id:334,params:{collections_rejected_policy_stolen_goods:c(n,t)}})};case"human_exploitation_and_sexual_services":return n=i.fbt._("WhatsApp's Commerce Policy",null,{hk:"1kuvvN"}),{first:(0,d.jsx)(s.default,{id:303,params:{collections_rejected_policy_human_exploitation_and_sexual_services:c(n,t)}}),second:(0,d.jsx)(s.default,{id:327,params:{collections_rejected_policy_human_exploitation_and_sexual_services:c(n,t)}})};case"community_standards":return n=i.fbt._("WhatsApp's Business Terms",null,{hk:"1x5ZqO"}),{first:(0,d.jsx)(s.default,{id:296,params:{collections_rejected_policy_community_standards:c(n,t)}}),second:(0,d.jsx)(s.default,{id:320,params:{collections_rejected_policy_community_standards:c(n,t)}})};case"discrimination":return n=i.fbt._("WhatsApp's Business Terms",null,{hk:"1x5ZqO"}),{first:(0,d.jsx)(s.default,{id:298,params:{collections_rejected_policy_discrimination:c(n,t)}}),second:(0,d.jsx)(s.default,{id:322,params:{collections_rejected_policy_discrimination:c(n,t)}})};default:return n=i.fbt._("WhatsApp's Commerce Policy",null,{hk:"1kuvvN"}),{first:(0,d.jsx)(s.default,{id:307,params:{collections_rejected_policy_other_violation:c(n,t)}}),second:(0,d.jsx)(s.default,{id:331,params:{collections_rejected_policy_other_violation:c(n,t)}})}}};var o=a(n(64369)),i=n(48360),l=a(n(99360)),r=n(12591),s=a(n(56074)),d=n(85893);function c(e,t){const n=t||o.default.WA_COMMERCE_POLICY_URL;return(0,d.jsx)(l.default,{href:n,onClick:e=>{e.preventDefault(),(0,r.openExternalLink)(n)},children:e})}},35054:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCollectionCreateClicked=function(e){new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATE_CLICKED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCollectionCreated=function(e){let{catalogContext:t,collectionId:n,productCount:a}=e;new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_CREATED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:a}).commit()},t.logCollectionDeleted=function(e){let{catalogContext:t,collectionId:n}=e;new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),collectionId:n}).commit()},t.logCollectionItemsAssignment=function(e){let{catalogContext:t,collectionId:n,addedCount:a,removedCount:o}=e;a>0&&new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_ASSIGN_ITEMS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:a,collectionId:n}).commit();o>0&&new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_UNASSIGN_ITEMS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productCount:o,collectionId:n}).commit()},t.logCollectionMenuClicked=function(e){new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_MENU_COLLECTIONS_CLICK,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCollectionRenamed=function(e){let{catalogContext:t,collectionId:n}=e;new l.default.CatalogBiz({catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_DELETED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),collectionId:n}).commit()},t.logCollectionSeeAllView=function(e){let{catalogOwnerJid:t,catalogContext:n,collectionId:a}=e;const d=(0,i.getProductStatsInFetched)(t,a),c=null==d?void 0:d.productIndex,u=null==d?void 0:d.collectionIndex;(0,s.createCatalogViewEvent)((0,o.default)({isOwner:(0,s.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:l.default.CATALOG_BIZ_ACTION.ACTION_COLLECTION_IMPRESSION,catalogViewAction:l.default.CATALOG_VIEW_ACTION.ACTION_COLLECTION_IMPRESSION,productIndex:c,collectionIndex:u},(0,r.toDataForCatalogViewEvents)(n))).commit()};var o=a(n(81109)),i=n(10448),l=a(n(11339)),r=n(97567),s=n(14545)},44315:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(67294),i=n(47217),l=n(64481),r=n(79174),s=a(n(36153)),d=n(27394),c=n(47915),u=a(n(44942)),f=a(n(30855)),h=n(43882),p=n(84387),m=n(77975),g=n(82145),_=n(97567),C=a(n(88990)),v=n(5641),x=a(n(65932)),S=n(31019),y=n(85893);class b extends o.Component{constructor(e){super(e),this.attachedListeners=new Set,this._catalogFlatListController=new f.default,this._handleProductDetail=(e,t)=>{const{onProductDetail:n}=this.props;return(0,g.qplStartProductView)("Collection"),(0,m.logCatalogListDetailClick)({product:(0,S.unproxy)(e),catalogContext:(0,_.getProductCatalogContext)(this.context)}),n(e,t)},this._handleProductShare=e=>{const{onProductShare:t}=this.props;t&&t(e)},this._handleProductDelete=e=>{const{catalog:t}=this.props;(0,i.handleProductDelete)(t,e,(0,_.getProductCatalogContext)(this.context),"Collection")},this._handleProductHideShow=e=>{const{catalog:t}=this.props;(0,i.handleProductVisibilityChange)(t,e,(0,_.getProductCatalogContext)(this.context),"Collections")},this.renderItem=e=>{const{collection:t,product:n,allItems:a,reviewBanner:o,collectionId:i}=e,{onCartOpen:l,shareLinks:d}=this.props;return t?o?(0,y.jsx)(r.CollectionIntegrityBanner,{collection:t,onEditCollection:this.props.onEditCollection}):(0,y.jsx)(s.default,{collection:t,onSeeAll:this.props.onCollectionSeeAll}):a?(0,y.jsx)(s.default,{allItems:a,onSeeAll:this.props.onCollectionSeeAll}):n?(0,y.jsx)(C.default,{collectionId:i,product:n,onCartOpen:l,onClick:()=>this._handleProductDetail(n,i),onProductShare:d?this._handleProductShare:null,onProductDelete:this._handleProductDelete,onProductHideShow:this._handleProductHideShow,theme:"product-of-collection",canManageCatalog:this.props.canManageCatalog}):null},this.state={loadingMore:!1,stopLoading:!1,catalogFetchState:e.catalog?"SUCCESS":"NONE"}}getData(){const{onCartOpen:e}=this.props,t=void 0!==e,n=this.props.data||[],a=[];return n.forEach((e=>{const n=e.collection,o=e.product,i=e.allItems;if(n&&o){const e=n.id;a.push({itemKey:`${e.toString()}_${o.id.toString()}_${t.toString()}`,product:o,collectionId:e})}else if(n)this.attachedListeners.has(n.id)||(this.attachedListeners.add(n.id),this.props.listeners.add(n,"change:reviewStatus canAppeal",(()=>{this.forceUpdate()}))),a.push({itemKey:`${n.id.toString()}_${n.reviewStatus.toString()}`,collection:n}),n.reviewStatus!==v.PRODUCT_REVIEW_STATUS.PENDING&&n.reviewStatus!==v.PRODUCT_REVIEW_STATUS.REJECTED||a.push({itemKey:`${n.id.toString()}_reviewBanner`,collection:n,height:(0,r.getCollectionIntegrityHeight)(n),reviewBanner:!0});else if(i)a.push({itemKey:"view_all",allItems:i});else if(o){const e=this.props.collectionId||void 0;a.push({itemKey:`${o.id.toString()}_${t.toString()}`,product:o,collectionId:e})}})),a}render(){const e=this.getData();return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(u.default,{flatListControllers:[this._catalogFlatListController],children:(0,y.jsx)(c.FlatList,{flatListController:this._catalogFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this.renderItem,defaultItemHeight:l.PRODUCT_LIST_ITEM_HEIGHT,keyOrder:h.KeyOrder.INVERSE})})})}}b.CONCERNS={catalog:["productCollection","collections","afterCursor","id","index"]},b.contextType=d.DrawerContext,b.displayName="ProductCollectionsList";var j=(0,p.ListenerHOC)((0,x.default)(b,b.CONCERNS));t.default=j},70107:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{collectionId:n,onCartClick:a,onProductLinkClick:d,onProductMoreInformation:w,onBack:G,onProductCatalog:z,onProductDetail:$,refreshCarousel:X,chat:J,isPushed:Z=!0}=e,ee=(0,f.default)(),te=(0,g.default)(),ne=(0,u.useContext)(I.DrawerContext),ae=(0,m.useModelValues)(e.product,["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]),[oe,ie]=(0,u.useState)(null),[le,re]=(0,u.useState)(!1),[se,de]=(0,u.useState)(null),[ce,ue]=(0,u.useState)("NONE"),[fe,he]=(0,u.useState)("NONE"),pe=(0,h.default)((()=>v.CartCollection.findCart(ae.catalogWid.toString())));(0,p.useListener)(pe.current,"change:cartItemCollection",ee);const me=()=>{if(G)return G()},ge=()=>{const e=ae.catalogWid,t=ae.id.toString(),n=x.CatalogCollection.findProduct({catalogWid:e,productId:t,productMsgMediaData:(0,q.unproxy)(ae).productMsgMediaData,canLogQpl:Z}),a=_.BusinessProfileCollection.find(e);let l=!0;return Promise.all([a,n]).then((e=>{let[t]=e;if(te.aborted)throw new o.AbortError;return l=!1,Z&&(0,M.qplEndProductView)(W.QuickLogActionType.SUCCESS),ie(t),ue("SUCCESS"),t})).then((e=>{"PENDING"===fe&&((0,C.hasCatalog)(e)?(()=>{const e=ae.catalogWid;x.CatalogCollection.findCarouselCatalog(e).then((e=>{if(te.aborted)return;const t=Array.isArray(e)?e[0]:e;de(t||null),he(t?"SUCCESS":"NONE")})).catch((0,i.filteredCatch)(s.ServerStatusCodeError,(e=>{"not_found"===e.status||404===e.status?(de(null),he("NOT_FOUND")):(de(null),he("ERROR"),__LOG__(3)`Failed to fetch product catalog from server`)}))).catch((0,i.filteredCatch)(s.WebdDrop,(()=>{de(null),he("ERROR"),__LOG__(3)`Failed to fetch product catalog`})))})():he("NONE"))})).catch((0,o.catchAbort)((()=>{}))).catch((0,i.filteredCatch)(s.E404,(()=>{me(),j.Cmd.openModal((0,K.jsx)(P.default,{onOK:()=>{j.Cmd.closeModal()},okText:c.fbt._("OK",null,{hk:"2KEeHb"}),children:c.fbt._("This product or service has been removed",null,{hk:"3mE1ld"})})),ue("NOT_FOUND"),l=!1,(0,M.qplDropProductView)()}))).catch((0,i.filteredCatch)(s.WebdDrop,(()=>{ue("ERROR"),__LOG__(3)`Failed to fetch product`}))).catch((0,i.filteredCatch)(s.ServerStatusCodeError,(()=>{ue("ERROR"),__LOG__(3)`Failed to fetch product from server`}))).finally((()=>{Z&&l&&(0,M.qplEndProductView)(W.QuickLogActionType.FAIL)}))};(0,u.useEffect)((()=>{if((0,O.commerceThreadsLoggingEnabled)()&&J&&(0,y.addChatThreadLoggingActivities)([{activityType:"pdpViews",ts:(0,l.unixTime)(),chatId:J.id}]),X){const e=x.CatalogCollection.get(ae.catalogWid);(null==e?void 0:e.productCollection)&&e.fetchedFromServer?he("SUCCESS"):he("PENDING")}const e=(0,L.getMaybeMeUser)();Z&&(0,M.qplAnnotateProductView)(!(null==e?void 0:e.equals(ae.catalogWid)));const t=ae.catalogWid,a=ae.id.toString();if(t&&a)return ge(),(0,b.default)(t).then((e=>{re(e)})),(0,A.logProductDetailView)({product:(0,q.unproxy)(ae),catalogContext:(0,R.getProductCatalogContext)(ne),cartToggle:le,collectionId:n}),()=>{const e=ae.catalogWid,t=ae.id.toString();if(!e||!t)return;const n=x.CatalogCollection.get(e),a=n&&n.msgProductCollection.get(t);(null==a?void 0:a.fetchedFromServer)&&n&&n.msgProductCollection.remove(a)};(0,M.qplDropProductView)()}),[]);const _e=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,O.commerceThreadsLoggingEnabled)()&&J&&(0,y.addChatThreadLoggingActivities)([{activityType:e,ts:(0,l.unixTime)(),chatId:J.id,boolValue:t}])},Ce=()=>"ERROR"!==ce&&"NOT_FOUND"!==ce&&!(()=>{const{reviewStatus:e}=ae;return e===D.PRODUCT_REVIEW_STATUS.REJECTED})(),ve=Ce(),xe=(0,C.hasCatalog)(oe);return(0,K.jsxs)(k.default,{onDrop:me,theme:"striped",children:[(0,K.jsx)(Y,{handleBack:me,menu:Ce()?(0,K.jsx)(T.default,{onSendProduct:()=>{const e=ae,{catalogWid:t}=e,n=x.CatalogCollection.get(t);if(!n)return;const a=n.productCollection.get(e.id);j.Cmd.attachProduct({product:a?(0,q.unproxy)(a):(0,q.unproxy)(e)})},onReportProduct:()=>{j.Cmd.openModal((0,K.jsx)(H.default,{product:ae,sessionId:(0,R.getProductCatalogSessionId)(ne)}))},onProductLinkClick:()=>{d(ae)},onProductMoreInformation:()=>{w(ae)},onCartClick:le?()=>{(0,M.qplStartCartView)("Product"),a&&a(ae.catalogWid.toString())}:void 0,cartCount:pe.current.itemCount,catalogId:ae.catalogWid.toString(),contactId:null==J?void 0:J.contact.id.user}):null}),(0,K.jsx)(E.default,{children:(0,K.jsxs)("div",{"data-a8n":r.default.key("product-details"),className:B.default.body,children:[(0,K.jsx)(Q,{productFetchState:ce,productCatalogFetchState:fe,isAvailable:ve}),(0,K.jsx)(F.default,{product:ae,isAvailable:ve,fetching:"PENDING"===ce}),ae.availability===U.ProductAvailability.OUT_OF_STOCK?(0,K.jsx)("div",{className:B.default.availabilityBanner,children:c.fbt._("This item is out of stock.",null,{hk:"4gOwiz"})}):null,(0,K.jsx)(V.default,{product:ae,collectionId:n,onSendChat:()=>{const e=x.CatalogCollection.get(ae.catalogWid);(0,N.sendProductToChat)(ae,e,(0,R.getProductCatalogContext)(ne)),_e("isCtaOnPdpClicked"),(0,A.logProductMessageBusinessClick)(ae,(0,R.getProductCatalogContext)(ne))},onAddToCart:()=>{_e("isCartAddClicked")},isAvailable:ve,hideRetailerID:null===(t=e.chat)||void 0===t?void 0:t.contact.isEnterprise}),xe&&se?(0,K.jsx)(S.default,{catalog:se,onProductCatalog:()=>{z&&z(ae.catalogWid,(0,R.getProductCatalogContext)(ne))},onProductDetail:e=>{if((0,M.qplStartProductView)("Product"),$)return $(e)},filterProductId:ae.id.toString(),title:c.fbt._("More",null,{hk:"2A3GqV"}),animation:!1}):null]})})]},"product-details-drawer")};var o=n(89385),i=n(50796),l=n(92844),r=a(n(99964)),s=n(92574),d=a(n(94184)),c=n(48360),u=n(67294),f=a(n(59312)),h=a(n(16223)),p=n(87550),m=n(35461),g=a(n(3409)),_=n(93581),C=n(94010),v=n(12392),x=n(99989),S=a(n(42953)),y=n(32107),b=a(n(17986)),j=n(88102),P=a(n(52665)),T=a(n(11466)),k=a(n(60453)),E=a(n(69637)),I=n(27394),w=n(94790),O=n(57701),A=n(77975),M=n(82145),L=n(11362),N=n(96519),R=n(97567),D=n(5641),B=a(n(52387)),V=a(n(16481)),F=a(n(33382)),U=n(6822),W=n(48870),H=a(n(79387)),G=n(11054),q=n(31019),z=n(13923),K=n(85893);function Q(e){let t,{productFetchState:n,productCatalogFetchState:a,isAvailable:o}=e;t="ERROR"===n?(0,K.jsx)(z.TextSpan,{className:B.default.text,theme:"small",color:"danger",children:c.fbt._("Something went wrong",null,{hk:"7C9hw"})}):o?[(0,K.jsx)(G.Spinner,{size:14,color:G.colorOptions.highlight},"DetailDrawer-loadingBar-spinner"),(0,K.jsx)(z.TextSpan,{className:(0,d.default)(B.default.text,B.default.loadingText),theme:"small",children:c.fbt._("Waiting for network",null,{hk:"3I2DtN"})},"DetailDrawer-loadingBar-msg")]:(0,K.jsx)(z.TextSpan,{className:B.default.text,theme:"small",color:"danger",children:c.fbt._("This product or service has been removed",null,{hk:"3mE1ld"})});const i="PENDING"===n||"PENDING"===a||!o;return(0,K.jsx)("div",{className:(0,d.default)({[B.default.loadingContainer]:i,[B.default.shiftUp]:!i}),children:t})}function Y(e){let{menu:t,handleBack:n}=e;return(0,K.jsx)(w.DrawerHeader,{title:c.fbt._("Details",null,{hk:"1hLRT1"}),onBack:n,type:w.DRAWER_HEADER_TYPE.SMALL,menu:t})}},16481:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collectionId:t,onSendChat:n,onAddToCart:a,isAvailable:o}=e,l=(0,s.useContext)(p.DrawerContext),r=(0,d.useModelValues)(e.product,["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id"]),[u,f]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(0,h.default)(r.catalogWid).then((e=>{S(e)}))}),[]),(0,I.jsxs)(m.default,{theme:"padding-product",animation:!1,children:[(0,I.jsx)(E.TextDiv,{theme:"title",className:y.default.name,children:(0,I.jsx)(g.EmojiText,{text:r.name,selectable:!0})}),null!=r.priceAmount1000?(0,I.jsx)(E.TextDiv,{className:y.default.price,color:"dark",theme:"plain",children:(0,I.jsx)(b.default,{product:r,selectable:!0,direction:"inherit"})}):null,(0,I.jsx)(L,{product:r,isAvailable:o,isDescExpanded:u,hideRetailerID:e.hideRetailerID,onReadMore:()=>{f(!0)},onClickUrl:(e,t)=>{e.stopPropagation(),(0,v.logDetailLinkClick)({product:(0,k.unproxy)(r),catalogContext:(0,x.getProductCatalogContext)(l)});const n=t&&i.findLink(t);n&&(0,_.openExternalLink)(n.url)}}),(0,I.jsx)(O,{onSendChat:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];null==n||n(...t)},isAvailable:o,product:r}),(0,I.jsx)(A,{cartEnabled:C,isAvailable:o,product:r,onClick:e=>{P.QPL.markerStart(T.QuickLogMarkerId.WHATSAPP_CART_ADD,{annotations:{string:{EntryPoint:"Product"}}}),(0,c.default)(r,(0,x.getProductCatalogContext)(l),t),null==a||a(),e.stopPropagation()}})]})};var o=a(n(64369)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(95726)),l=a(n(94184)),r=n(48360),s=n(67294),d=n(35461),c=a(n(31892)),u=a(n(24170)),f=a(n(39770)),h=a(n(17986)),p=n(27394),m=a(n(33308)),g=n(65417),_=n(12591),C=n(30695),v=n(77975),x=n(97567),S=n(5641),y=a(n(21540)),b=a(n(62089)),j=n(6822),P=n(48870),T=n(27798),k=n(31019),E=n(13923),I=n(85893);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function O(e){let{onSendChat:t,isAvailable:n,product:a}=e;if(!t||!a.fetchedFromServer||!n||a.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;const o=r.fbt._("Message Business",null,{hk:"byqjM"});return(0,I.jsx)("div",{className:y.default.buttonContainer,title:o,children:(0,I.jsx)(f.default,{a8nText:"product-message-business-btn",className:y.default.button,onClick:t,type:"secondary",children:o})})}function A(e){let{cartEnabled:t,isAvailable:n,product:a,onClick:o}=e;if(!t||!a.fetchedFromServer||!n||a.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;const i=r.fbt._("Add to cart",null,{hk:"2qbS08"}),s=a.availability===j.ProductAvailability.OUT_OF_STOCK;return(0,I.jsx)("div",{className:y.default.buttonContainer,title:i,children:(0,I.jsx)(f.default,{a8nText:"add-to-cart-btn",className:(0,l.default)(y.default.button,y.default.addToCartButton),onClick:o,type:"secondary",disabled:s,children:(0,I.jsxs)("span",{className:y.default.addToCartContainer,children:[(0,I.jsx)(u.default,{className:(0,l.default)(y.default.addToCartIcon,{[y.default.addToCartIconDisabled]:s})}),i]})})})}function M(e){let{isAvailable:t,product:n,onClick:a}=e;const{url:o}=n;if(!n.fetchedFromServer||!o||!t)return null;const l=C.Configuration.TrustedGroupDesc({links:i.findLinks(o)});return(0,I.jsx)("div",{children:(0,I.jsx)(g.EmojiText,{selectable:!0,formatters:l,text:o,onClick:e=>a(e,o)})})}function L(e){let{product:t,isAvailable:n,isDescExpanded:a,hideRetailerID:i,onReadMore:l,onClickUrl:s}=e;if(!t.description&&!t.url&&!t.retailerId)return null;const d=!!t.description&&t.description.length>o.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;let c;return t.description&&(c=(0,I.jsxs)("div",{children:[(0,I.jsx)(g.EmojiText,{selectable:!0,multiline:!0,text:t.description,textLimit:a?1/0:o.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),d&&!a?(0,I.jsxs)("span",{className:y.default.more,role:"button",onClick:l,children:[" ",r.fbt._("Read more",null,{hk:"2DvSvh"})]}):null]})),(0,I.jsxs)(E.TextDiv,{theme:"plain",className:y.default.description,children:[c,(0,I.jsx)(M,{isAvailable:n,product:t,onClick:s}),t.retailerId&&!i?(0,I.jsx)("div",{children:(0,I.jsx)(g.EmojiText,{text:t.retailerId,selectable:!0,direction:"inherit"})}):null]})}},79188:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductDetailsWithDeepLink=function(e){const{isPushed:t=!0,productInfo:{productId:n,businessOwnerJid:a},onBack:S}=e,[y,b]=(0,d.useState)((()=>(0,C.default)({productId:n,businessOwnerJid:a}))),[j,P]=(0,d.useState)((()=>y?"NONE":"PENDING"));if((0,d.useEffect)((()=>{y||(()=>{const e=(0,r.createWid)(a);c.CatalogCollection.findProduct({catalogWid:e,productId:n}).then((()=>{const t=c.CatalogCollection.get(e);b((0,i.default)(t,"catalog").productCollection.get(n)),P("SUCCESS")})).catch((0,o.filteredCatch)(l.E404,(()=>{S(),u.Cmd.openModal((0,x.jsx)(f.default,{onOK:()=>{u.Cmd.closeModal()},okText:s.fbt._("OK",null,{hk:"2KEeHb"}),children:s.fbt._("This product or service has been removed",null,{hk:"3mE1ld"})})),P("ERROR")}))).catch((e=>{(0,g.parseErrorState)(e,(e=>{P(e)}))}))})()}),[]),y)return(0,x.jsx)(v.default,{chat:e.chat,isPushed:t,product:y,onEnd:e.onEnd,onBack:e.onBack,onProductDetail:e.onProductDetail,onProductCatalog:e.onProductCatalog,refreshCarousel:!0,onProductLinkClick:e.onProductLinkClick,onProductMoreInformation:e.onProductMoreInformation,onCartClick:e.onCartClick});return(0,x.jsxs)(h.default,{onDrop:e.onBack,children:[(0,x.jsx)(m.DrawerHeader,{a8n:"drawer-title-profile",title:s.fbt._("Details",null,{hk:"1hLRT1"}),onBack:e.onBack,type:m.DRAWER_HEADER_TYPE.SMALL}),(0,x.jsx)(p.default,{children:(0,x.jsx)(_.default,{fetchState:j})})]},"product-details-drawer")};var o=n(50796),i=a(n(45095)),l=n(92574),r=n(45454),s=n(48360),d=n(67294),c=n(99989),u=n(88102),f=a(n(52665)),h=a(n(60453)),p=a(n(69637)),m=n(94790),g=n(14375),_=a(n(61055)),C=a(n(26218)),v=a(n(70107)),x=n(85893)},54050:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onBack:t,onCancel:n,product:a,prompt:o,centerDrawer:v,sendProductMsg:E,onSend:I}=e,w=(0,l.useContext)(f.DrawerContext),O=()=>{s.Cmd.openModal((0,P.jsx)(y.default,{product:a,onSend:I}),{transition:"modal-flow"}),(0,g.logShareProductViaWALinkClick)({product:a,catalogContext:(0,_.getProductCatalogContext)(w)})},A=()=>{s.Cmd.attachProduct({product:(0,j.unproxy)(a),onSend:I})},M=(0,b.createProductLink)(a.catalogWid.user,a.id.toString());let L,N,R;v&&(L="labels",N="center-column");R=null!=E?(0,P.jsx)(S.default,{onClick:A}):(0,P.jsx)(x.default,{onClick:O});return(0,P.jsxs)(c.default,{theme:L,children:[(0,P.jsx)(h.DrawerHeader,{a8n:"product-link-title",title:i.fbt._("Product link",null,{hk:"1RIlvV"}),onBack:t,onCancel:n,type:h.DRAWER_HEADER_TYPE.SMALL,focusBackOrCancel:!0}),(0,P.jsxs)(u.default,{theme:N,children:[(0,P.jsx)("div",{className:C.default.prompt,children:o}),(0,P.jsx)(r.default,{image:k(a),primary:(0,P.jsx)(p.EmojiText,{text:a.name,direction:"auto"}),theme:"identity",secondary:(0,P.jsx)(m.default,{id:T,href:M,onClick:e=>{e.preventDefault(),O()},noHandle:!0})}),R,(0,P.jsx)(d.default,{elementId:T,onClick:()=>{(0,g.logShareProductCopyLinkClick)({product:a,catalogContext:(0,_.getProductCatalogContext)(w)})}})]})]},"product-link-drawer")};var o=a(n(94184)),i=n(48360),l=n(67294),r=a(n(44356)),s=n(88102),d=a(n(26609)),c=a(n(60453)),u=a(n(69637)),f=n(27394),h=n(94790),p=n(65417),m=a(n(786)),g=n(77975),_=n(97567),C=a(n(49762)),v=n(3013),x=a(n(51628)),S=a(n(23358)),y=a(n(61266)),b=n(82482),j=n(31019),P=n(85893);const T="product-link-anchor";function k(e){const t=e.getProductImageCollectionHead();return t?(0,P.jsx)(v.ProductThumb,{className:(0,o.default)(C.default.productImage,C.default.productImageContainer),mediaData:t.mediaData}):(0,P.jsx)(v.ProductThumbPlaceholder,{className:(0,o.default)(C.default.productThumb,C.default.productThumbContainer)})}},11395:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductListDrawer=function(e){const{catalogId:t,canManageCatalog:n,setScrollOffset:a,onCartClick:i,onCatalogLinkClick:y,autoUpdate:$=!1,businessProfile:X,onAddProduct:J,onProductDetail:Z,onProductShare:ee,headerType:te,onOpenSettings:ne,blockCartInterstitialFn:ae=(()=>!1)}=e,oe=(0,C.default)(),ie=(0,u.useContext)(I.DrawerContext),le=(0,h.default)(),re=(0,f.default)(le,100),se=(0,g.useModelValues)(e.contact,["id"]),de=(0,p.default)((()=>new N.default)),ce=()=>{const e=j.CatalogCollection.get(t);return!e||e.stale?null:e},ue=(0,u.useMemo)((()=>S.CartCollection.findCart(se.id.toString())),[se.id]),[fe,he]=(0,u.useState)(!1),[pe,me]=(0,u.useState)(0),[ge,_e]=(0,u.useState)(!1),[Ce,ve]=(0,u.useState)(!1),[xe,Se]=(0,u.useState)(ce),[ye,be]=(0,u.useState)((()=>ue.itemCount)),[je,Pe]=(0,u.useState)((()=>ce()?"SUCCESS":"NONE"));(0,m.useListener)(ue,"all",(()=>{const e=ue.itemCount;ye!==e&&be(e)}));const Te=()=>{if(ge)return;const e=j.CatalogCollection.assertGet(t);if(!e.afterCursor)return;const n=e.productCollection.getProductModels().length;he(!0),me(n),j.CatalogCollection.update(t).then((e=>{if(oe.aborted)return;he(!1);(Array.isArray(e)?e[0]:e).productCollection.getProductModels().length===pe&&_e(!0),n*P.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&Te()})).catch((()=>{he(!1),_e(!0)}))},ke=(0,f.default)((()=>{var t;null===(t=e.onRemoveProduct)||void 0===t||t.call(e),le()}),100),Ee=$?null==xe?void 0:xe.productCollection:null;(0,m.useListener)(Ee,"add",re),(0,m.useListener)(Ee,"remove",ke);(0,u.useEffect)((()=>{(0,F.logCatalogListView)({catalogOwnerWid:t,catalogContext:(0,H.getProductCatalogContext)(ie),cartToggle:Ce}),xe?Te():j.CatalogCollection.find(t).then((e=>{Se(e),Pe("SUCCESS"),Te()})).catch((0,o.filteredCatch)(r.ServerStatusCodeError,(e=>{403!==e.status&&404!==e.status||(Se(null),Pe("NOT_FOUND"))}))).catch((e=>{(0,M.parseErrorState)(e,(e=>Pe(e)))})),(0,T.default)(t).then((e=>{ve(e),(0,s.isMDBackend)()&&n&&Ce&&!ae()&&(0,v.getABPropConfigValue)("web_abprop_nux_cart_interstitial")&&(0,b.default)()}))}),[]);const Ie=(0,_.default)((e=>{fe||e.scrollTop+d.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&Te()}),100),we=()=>{null==i||i(se.id.toString())},Oe=()=>{xe&&(y(xe,se),(0,F.logCatalogShareLinkClick)({catalogOwnerWid:t,catalogContext:(0,H.getProductCatalogContext)(ie)}))};return(0,Q.jsxs)(k.default,{theme:"products",onDrop:e.onBack,children:[(0,Q.jsx)(w.DrawerHeader,{title:c.fbt._("Catalog",null,{hk:"3YVOSV"}),type:e.headerType||w.DRAWER_HEADER_TYPE.SMALL,onBack:e.onBack,menu:(()=>{const e=n&&(0,D.canToggleCartOnOff)()?(0,Q.jsx)(W.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,Q.jsx)(K.default,{name:"menu"}),title:B.default.t(603),children:(0,Q.jsxs)(O.Dropdown,{type:O.MenuType.DropdownMenu,flipOnRTL:!0,dirX:O.DirX.LEFT,children:[(0,Q.jsx)(A.DropdownItem,{a8n:"mi-foward menu-item",action:Oe,children:B.default.t(464)}),ne&&(0,Q.jsx)(A.DropdownItem,{a8n:"mi-settings menu-item",action:ne,children:c.fbt._("Settings",null,{hk:"2RmHUB"})})]},"CatalogDetailHeader")}):(0,Q.jsx)(W.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:(0,Q.jsx)(V.default,{theme:te===w.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:c.fbt._("Catalog link",null,{hk:"M36Dw"}),onClick:Oe});return(0,Q.jsxs)(Q.Fragment,{children:[Ce&&i?(0,Q.jsx)(Y,{cartCount:ye,headerType:te,onClick:()=>{(0,U.getOnCartClickWithLog)(we,t.toString(),(0,H.getProductCatalogContext)(ie))}}):null,e]})})(),focusBackOrCancel:!0}),(0,Q.jsx)(E.default,{onScroll:e=>{var t,n;e.currentTarget&&Ie(e.currentTarget),null==a||a(null!==(t=null===(n=e.currentTarget)||void 0===n?void 0:n.scrollTop)&&void 0!==t?t:0)},flatListControllers:[de.current],scrollOffset:e.scrollOffset,children:(()=>{const e=Ce&&i?we:void 0;if(!xe)return(0,Q.jsx)(L.default,{fetchState:je});let t;return n&&J&&(t=(0,Q.jsx)(x.default,{onClick:()=>J(),theme:"in-list",a8nText:"add-item"})),(0,Q.jsxs)(Q.Fragment,{children:[X&&(0,Q.jsx)("div",{"data-a8n":l.default.key("catalog-header"),className:q.default.header,children:(0,Q.jsx)(z.default,{profilePicThumb:se.getProfilePicThumb(),contact:se,businessProfile:X})}),(0,Q.jsxs)("div",{"data-a8n":l.default.key("catalog-items"),className:q.default.list,children:[t,(0,Q.jsx)(G.default,{onCartOpen:e,onProductDetail:Z,flatListController:de.current,catalog:xe,canManageCatalog:n,shareLinks:n,onProductShare:ee}),fe&&(0,Q.jsx)(R.default,{})]})]})})()})]})};var o=n(50796),i=n(51737),l=a(n(99964)),r=n(92574),s=n(88555),d=n(41906),c=n(48360),u=n(67294),f=a(n(51799)),h=a(n(59312)),p=a(n(16223)),m=n(87550),g=n(35461),_=a(n(90886)),C=a(n(3409)),v=n(57849),x=a(n(33889)),S=n(12392),y=a(n(51070)),b=a(n(13712)),j=n(99989),P=n(64481),T=a(n(17986)),k=a(n(60453)),E=a(n(69637)),I=n(27394),w=n(94790),O=n(60811),A=n(71174),M=n(14375),L=a(n(61055)),N=a(n(30855)),R=a(n(29796)),D=n(57701),B=a(n(14296)),V=a(n(62371)),F=n(77975),U=n(41868),W=n(46346),H=n(97567),G=a(n(74259)),q=a(n(70270)),z=a(n(62647)),K=a(n(23217)),Q=n(85893);function Y(e){let{headerType:t,onClick:n,cartCount:a}=e;const o=(0,i.isNumber)(a)&&a>0?a.toString():void 0;return(0,Q.jsx)(W.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,Q.jsx)(y.default,{theme:t===w.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),text:o,title:c.fbt._("Your cart",null,{hk:"Sn66V"}),onClick:n})}},62647:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{profilePicThumb:t,contact:n,businessProfile:a}=e;return(0,c.jsxs)("div",{className:s.default.header,"data-testid":"product-list-header",children:[(0,c.jsx)(f,{profilePicThumb:t,contact:n}),(0,c.jsxs)("div",{className:s.default.text,children:[(0,c.jsx)(d.TextDiv,{className:s.default.name,theme:"large",children:(0,c.jsx)(r.Name,{contact:n,selectable:!0,useVerifiedName:!0})}),(0,c.jsx)(u,{businessProfile:a})]})]})};var o=n(35461),i=n(88984),l=n(65417),r=n(12176),s=a(n(72940)),d=n(13923),c=n(85893);function u(e){const t=(0,o.useOptionalModelValues)(e.businessProfile,["description"]);return t&&t.description?(0,c.jsx)("div",{className:s.default.description,children:(0,c.jsx)(l.EmojiText,{text:t.description,direction:"auto",selectable:!0,titlify:!0})}):null}function f(e){const t=(0,o.useOptionalModelValues)(e.profilePicThumb,["imgFull"]),n=(0,o.useModelValues)(e.contact,["id","isMe"]);if(!t)return null;const a=(0,i.getDefaultIcon)(n.id);return(0,c.jsx)("div",{className:s.default.photo,children:(0,c.jsx)(i.DetailImageCommon,{profilePicThumb:t,loader:!0,defaultIcon:a,profilePicThumbImg:t.imgFull,spinnerClassName:s.default.spinner,imgClassName:s.default.img,theme:"business"})})}},77776:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onBack:t}=e,n=(0,c.useModelValues)(e.product,["id","catalogWid"]),[a,S]=(0,s.useState)({}),[y,b]=(0,s.useState)(""),[j,P]=(0,s.useState)(""),[T,k]=(0,s.useState)(!0),E=e=>{var t,n;return(null===(t=e.complianceInfo)||void 0===t?void 0:t.countryCodeOrigin)===String(p.SyntheticCountryCode.NotApplicable)?Promise.resolve((0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:(0,d.default)(x),children:r.fbt._("Not Applicable",null,{hk:"2k1klN"})}),(0,v.jsx)("div",{children:r.fbt._("Item is a service or non-physical good",null,{hk:"3uDBY7"})})]})):(0,p.getCountryName)(null===(n=e.complianceInfo)||void 0===n?void 0:n.countryCodeOrigin)};(0,s.useEffect)((()=>{function e(){return(e=(0,i.default)((function*(){yield u.CatalogCollection.findProduct({catalogWid:n.catalogWid,productId:n.id.toString(),productMsgMediaData:(0,C.unproxy)(n).productMsgMediaData,shouldFetchComplianceFields:!0});const e=u.CatalogCollection.get(n.catalogWid),t=(0,l.default)(e,"catalog").productCollection.get(n.id);if(t){var a,o,i,r,s,d,c,f,h,m,g,_,v,x;const e=yield E(t),n=yield(0,p.getCountryName)(null===(a=t.complianceInfo)||void 0===a||null===(o=a.importerAddress)||void 0===o?void 0:o.countryCode),l={importerName:(null===(i=t.complianceInfo)||void 0===i?void 0:i.importerName)||"",countryCodeOrigin:(null===(r=t.complianceInfo)||void 0===r?void 0:r.countryCodeOrigin)||"",importerAddress:{street1:(null===(s=t.complianceInfo)||void 0===s||null===(d=s.importerAddress)||void 0===d?void 0:d.street1)||"",street2:(null===(c=t.complianceInfo)||void 0===c||null===(f=c.importerAddress)||void 0===f?void 0:f.street2)||"",city:(null===(h=t.complianceInfo)||void 0===h||null===(m=h.importerAddress)||void 0===m?void 0:m.city)||"",region:(null===(g=t.complianceInfo)||void 0===g||null===(_=g.importerAddress)||void 0===_?void 0:_.region)||"",postalCode:(null===(v=t.complianceInfo)||void 0===v||null===(x=v.importerAddress)||void 0===x?void 0:x.postalCode)||""}};S(l),k(!1),b(e),P(n)}else __LOG__(3)`Unable to fetch compliance for product: ${n.id}`}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);const I=()=>{if(t)return t()},{countryCodeOrigin:w,importerName:O,importerAddress:A}=a;return(0,v.jsxs)(m.default,{onDrop:I,theme:"striped",children:[(0,v.jsx)(_.DrawerHeader,{a8n:"drawer-title-profile",title:r.fbt._("More information",null,{hk:"2JHvi1"}),onBack:I,type:_.DRAWER_HEADER_TYPE.SMALL}),(0,v.jsx)(g.default,{theme:T?"center-content":void 0,children:T?(0,v.jsx)(h.ComplianceInfoLoading,{}):(0,v.jsxs)(h.ComplianceInfoGroup,{children:[(0,v.jsx)(h.ComplianceInfoPrimitiveField,{value:y,label:r.fbt._("Country of Origin",null,{hk:"2yl0F7"})}),w&&![f.COMPLIANCE_INFO_CODES.INDIA,p.SyntheticCountryCode.NotApplicable].includes(w)?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(h.ComplianceInfoPrimitiveField,{value:O,label:r.fbt._("Name of Importer",null,{hk:"3gfW35"})}),(0,v.jsx)(h.ComplianceInfoStructuralField,{valuesMap:(0,o.default)({importerAddressCountryNameOrigin:j},A),keys:["street1","street2","city","region","postalCode","importerAddressCountryNameOrigin"],label:r.fbt._("Address of Importer",null,{hk:"Kxo8I"})})]}):null]})})]},"product-details-drawer")};var o=a(n(81109)),i=a(n(48926)),l=a(n(45095)),r=n(48360),s=n(67294),d=a(n(56720)),c=n(35461),u=n(99989),f=n(33049),h=n(27105),p=n(9978),m=a(n(60453)),g=a(n(69637)),_=n(94790),C=n(31019),v=n(85893);const x={marginBottom:"ngycyvoj"}},33382:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{isAvailable:t,fetching:n}=e,a=(0,o.useContext)(r.DrawerContext),p=(0,i.useModelValues)(e.product,["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]),m=p.lazyloadProductImageCollection().toArray();return(0,h.jsx)("div",{className:u.default.imageCarouselContainer,children:(0,h.jsx)(s.default,{images:m,fetching:n,onClick:t?(e,t)=>{(0,d.logDetailImageClick)({product:(0,f.unproxy)(p),catalogContext:(0,c.getProductCatalogContext)(a)});const n={activeProductImage:t,productImageCollection:p.lazyloadProductImageCollection(),getZoomNode:()=>e,product:p};l.Cmd.productImageViewerModal(n,(0,c.getProductCatalogSessionId)(a))}:null,renderFallback:!t,fallbackMediaData:p.productMsgMediaData})})};var o=n(67294),i=n(35461),l=n(88102),r=n(27394),s=a(n(98046)),d=n(77975),c=n(97567),u=a(n(30836)),f=n(31019),h=n(85893)},65788:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onPopupCancel:t,onReport:n,onTellUsMore:a}=e,c=o.fbt._("Report this product?",null,{hk:"3IDG0p"}),u=(0,d.jsx)("div",{children:o.fbt._("We will review the product and if it does not meet our guidelines, it will be removed.",null,{hk:"2CRdfl"})},"ReportProductChoicePopup-desc"),f=(0,d.jsx)(i.default,{a8nText:"popup-controls-more",type:"secondary",onClick:a,children:o.fbt._("Tell Us More",null,{hk:"2CkelY"})},"ReportProductChoicePopup-moreBtn"),h=(0,d.jsx)(i.default,{a8nText:"popup-controls-report",type:"secondary",onClick:()=>n(),children:o.fbt._("Report Product",null,{hk:"3XLjyb"})},"ReportProductChoicePopup-reportBtn"),p=(0,d.jsx)(i.default,{type:"secondary",onClick:t,children:o.fbt._("Cancel",null,{hk:"H0gNq"})},0),m=(0,d.jsxs)("div",{className:s.default.buttons,children:[(0,d.jsx)("div",{className:s.default.button,children:f}),(0,d.jsx)("div",{className:s.default.button,children:h}),(0,d.jsx)("div",{className:s.default.button,children:p})]});return(0,d.jsx)(l.HotKeys,{handlers:{escape:t},children:(0,d.jsx)(r.Modal,{title:c,actions:m,children:u})})};var o=n(48360),i=a(n(39770)),l=n(29424),r=n(57224),s=a(n(11967)),d=n(85893)},79387:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(48360),i=n(46331),l=n(88102),r=a(n(32973)),s=n(77975),d=n(96519),c=n(48870),u=n(27798),f=a(n(65788)),h=a(n(14819)),p=n(31019),m=n(85893);class g extends r.default{constructor(){var e;super(...arguments),e=this,this._submitReason=e=>{const{product:t,sessionId:n}=this.props;return(0,s.logReportProduct)({product:(0,p.unproxy)(t),catalogSessionId:n}),(0,d.reportProduct)(t.catalogWid,t.id.toString(),e)},this._handleDelete=()=>{this.end()},this._handleReport=e=>{c.QPL.markerStart(u.QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT),this._handleShowSubmittedToast(e)},this._handleTellUsMore=()=>{this.push((0,m.jsx)(h.default,{onTellUsMoreSubmit:this._handleReport,onCancel:this._handleCancel}),"none")},this._handlePopupCancel=()=>{this.end()},this._handleCancel=()=>{this.end()},this._handleReportSubmitted=()=>{this.end()},this._handleShowSubmittedToast=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.genId)();const{product:a,sessionId:r}=e.props,d=e._submitReason(t),f=new i.ActionType(o.fbt._("Reporting product",null,{hk:"4qusYv"})),h=d.then((()=>((0,s.logReportProductSuccess)({product:(0,p.unproxy)(a),catalogSessionId:r}),c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,c.QuickLogActionType.SUCCESS),new i.ActionType(o.fbt._("Thanks for your feedback",null,{hk:"1vRsPv"}).toString()+". "+o.fbt._("Your report has now been submitted.",null,{hk:"40tL3T"}).toString())))).catch((()=>((0,s.logReportProductFailure)({product:(0,p.unproxy)(a),catalogSessionId:r}),c.QPL.markerEnd(u.QuickLogMarkerId.WHATSAPP_PRODUCT_REPORT,c.QuickLogActionType.FAIL),__LOG__(3)`error submitting product report`,new i.ActionType(o.fbt._("Couldn't report product",null,{hk:"11JN2U"}),{actionText:o.fbt._("Retry",null,{hk:"2jS9Tg"}),actionHandler:()=>e._handleShowSubmittedToast(t,n)}))));return l.Cmd.openToast((0,m.jsx)(i.ActionToast,{id:n,initialAction:f,pendingAction:h})),e._handleReportSubmitted(),d}}componentDidMount(){this.push((0,m.jsx)(f.default,{onTellUsMore:this._handleTellUsMore,onReport:this._handleReport,onPopupCancel:this._handlePopupCancel,onCancel:this._handleCancel}))}}t.default=g},14819:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCancel:t,onTellUsMoreSubmit:n}=e,[a,g]=(0,l.useState)(null),_=()=>{t&&t()},C=e=>{e.target.value&&g(e.target.value)},v=i.fbt._("Tell us more",null,{hk:"2fZHoO"}),x=(0,h.jsx)("div",{className:(0,o.default)(u.default.section),children:(0,h.jsx)("ul",{className:u.default.reasonList,children:p.map((e=>(0,h.jsx)(m,{reason:e,isChecked:a===e,onChange:C},`ReportProductReasonPopup-${e}-option`)))})}),S=(0,h.jsx)(r.default,{a8nText:"popup-controls-submit",type:"primary",onClick:()=>{a?n(a):s.Cmd.openToast((0,h.jsx)(f.Toast,{msg:i.fbt._("Please select a reason.",null,{hk:"3UgUaa"}),id:(0,f.genId)()}))},disabled:!a,children:i.fbt._("Submit",null,{hk:"3npRPm"})},"ReportProductReasonPopup-submitButton"),y=(0,h.jsx)(r.default,{type:"secondary",a8nText:"popup-controls-cancel",onClick:_,children:i.fbt._("Cancel",null,{hk:"H0gNq"})},"ReportProductReasonPopup-cancelButton"),b=(0,h.jsxs)("div",{className:u.default.buttons,children:[y,S]});return(0,h.jsx)(d.HotKeys,{handlers:{escape:_},children:(0,h.jsx)(c.Modal,{title:v,actions:b,children:x})})};var o=a(n(94184)),i=n(48360),l=n(67294),r=a(n(39770)),s=n(88102),d=n(29424),c=n(57224),u=a(n(48246)),f=n(50452),h=n(85893);const p=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];function m(e){let{reason:t,isChecked:n,onChange:a}=e;return(0,h.jsx)("li",{children:(0,h.jsxs)("label",{className:u.default.label,children:[(0,h.jsx)("input",{type:"radio",name:t,value:t,onChange:a,className:u.default.input,checked:n}),(0,h.jsx)(g,{reason:t})]})})}function g(e){const{reason:t}=e;switch(t){case"NO_MATCH":return i.fbt._("The pictures or descriptions don't match the item",null,{hk:"2ifaot"});case"SPAM":return i.fbt._("This is spam",null,{hk:"hjxQJ"});case"ILLEGAL":return i.fbt._("This is abusive, harmful or illegal",null,{hk:"3xz9jr"});case"SCAM":return i.fbt._("This is fraud or a scam",null,{hk:"2iFRd8"});case"KNOCKOFF":return i.fbt._("This appears to be a knockoff or counterfeit item",null,{hk:"UiFcs"});case"OTHER":return i.fbt._("Other",null,{hk:"1Kn4LY"});default:throw new Error(`Invalid reason: ${t}`)}}},96222:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{isEditMode:t,catalog:n,subtitle:a,hideIncompleteRows:p,productsToShow:m,businessProfile:g}=e;const _=(0,h.jsx)(f.default,{onViewShopClick:()=>{(0,c.logShopsManagementEvent)(u.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_VIEW_SHOPS_FROM_EDIT_BIZ_PROFILE)},onCommerceManagerClick:()=>{(0,c.logShopsManagementEvent)(u.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_COMMERCE_MANAGER_FROM_EDIT_BIZ_PROFILE)},onCancelClick:()=>{(0,c.logShopsManagementEvent)(u.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CANCEL_FROM_EDIT_BIZ_PROFILE)}});return(0,h.jsx)(r.default,{onProductDetail:function(e){if(t)s.Cmd.openModal(_),(0,c.logShopsManagementEvent)(u.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_SHOPS_PRODUCT_PREVIEW_TILE,{shouldLogJid:!1});else{const t=new URL((0,o.default)(e.url,"product.url"),`https://${d.HOSTNAME.FACEBOOK}`);i.default.open(String(t))}},onProductCatalog:function(){t?(s.Cmd.openModal(_),(0,c.logShopsManagementEvent)(u.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_MANAGE_SHOPS)):(0,l.goToShop)(g)},catalog:n,subtitle:a,hideIncompleteRows:p,productsToShow:m,showShopsLogo:!0})};var o=a(n(45095)),i=a(n(79264)),l=n(94010),r=a(n(42953)),s=n(88102),d=n(40875),c=n(67883),u=a(n(11339)),f=a(n(95042)),h=n(85893)},47834:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useModelValues)(e.msgInfoParticipant,["t"]),n=(0,i.useModelValues)(e.contact,["id","name","formattedName","notifyName"]),a=(0,c.jsx)(r.DetailImage,{id:n.id}),u=o.Clock.relativeDateAndTimeStr(t.t),f=(0,c.jsx)("span",{title:u,children:u});let h;!n.name&&n.notifyName&&(h=(0,c.jsx)(s.EmojiText,{className:d.default.notifyName,direction:"auto",text:n.notifyName}));return(0,c.jsx)(l.default,{contextEnabled:()=>!1,image:a,primary:(0,c.jsx)(s.EmojiText,{direction:"auto",text:n.formattedName,titlify:!0,ellipsify:!0}),secondary:f,secondaryDetail:h,style:{cursor:"auto"},theme:e.theme,idle:!0})};var o=n(40234),i=n(35461),l=a(n(49107)),r=n(88984),s=n(65417),d=a(n(42684)),c=n(85893)},27105:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGrievanceOfficerDetailsError=t.handleCustomerCareDetailsError=t.getLegalEntityDetails=t.ComplianceInfoStructuralField=t.ComplianceInfoPrimitiveField=t.ComplianceInfoLoading=t.ComplianceInfoHelpCenterBanner=t.ComplianceInfoGroup=void 0;var o=a(n(48926)),i=n(28298),l=n(48360),r=a(n(56720)),s=a(n(62738)),d=n(93581),c=n(83657),u=a(n(35721)),f=a(n(33308)),h=n(12591),p=n(29623),m=a(n(48846)),g=a(n(14296)),_=n(11054),C=n(13923),v=n(85893);const x={fieldLabel:{display:"f804f6gw",lineHeight:"gz7w46tb"},fieldValue:{display:"f804f6gw",wordBreak:"cw3vfol9",whiteSpace:"c2jc77nu"},helpCenterBanner:{fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},displayRight:{textAlign:"cb8ormfa"}},S=()=>l.fbt._("Not Provided",null,{hk:"43OpXI"});t.ComplianceInfoGroup=e=>{let{title:t,children:n}=e;return(0,v.jsx)(f.default,{title:t,xstyle:i.uiPadding.vert8,children:n})};t.ComplianceInfoPrimitiveField=e=>{let{value:t,label:n,forceLTR:a}=e;return(0,v.jsxs)(y,{children:[(0,v.jsx)(P,{value:t,forceLTR:a}),(0,v.jsx)(j,{label:n})]})};t.ComplianceInfoStructuralField=e=>{let{valuesMap:t={},keys:n=[],label:a}=e;const o=n.reduce(((e,n)=>t[n]?e.concat(t[n]):e),[]),i=o.length?o.join(", "):S();return(0,v.jsxs)(y,{children:[(0,v.jsx)(P,{value:i}),(0,v.jsx)(j,{label:a})]})};const y=e=>{let{children:t}=e;return(0,v.jsx)(u.default,{multiline:!0,restrictSpacing:!0,children:(0,v.jsx)("div",{className:(0,r.default)(i.uiPadding.vert8),children:t})})};t.ComplianceInfoLoading=()=>(0,v.jsx)(p.FlexRow,{align:"center",justify:"center",a8nText:"compliance-info-loading",children:(0,v.jsx)(m.default,{children:(0,v.jsx)(_.Spinner,{})})});t.ComplianceInfoHelpCenterBanner=e=>{let{xstyle:t}=e;return(0,v.jsxs)("div",{className:(0,r.default)(x.helpCenterBanner,t),"data-testid":"compliance-help-center-banner",children:[l.fbt._("Indian law requires additional information from businesses selling online.",null,{hk:"1zuHU2"})," ",(0,v.jsx)(h.ExternalLink,{href:"https://faq.whatsapp.com/general/account-and-profile/how-to-comply-with-the-laws-for-selling-online-in-India",children:l.fbt._("Learn more",null,{hk:"1JNnQ1"})})]})};const b=function(){var e=(0,o.default)((function*(e){const t=(e=>(Array.isArray(e)?e[0]:e).serialize())(yield d.BusinessProfileCollection.update(e,{getMerchantCompliance:!0}));if(t)return t.legalEntityDetails||void 0;__LOG__(3)`compliance: cannot fetch business details (${e.toString()})`}));return function(){return e.apply(this,arguments)}}();t.getLegalEntityDetails=b;const j=e=>{let{label:t}=e;return(0,v.jsx)("div",{className:(0,r.default)(x.fieldLabel),"data-testid":"compliance-info-field-label",children:(0,v.jsx)(C.TextSpan,{theme:"muted",children:t})})},P=e=>{let{value:t,forceLTR:n=!1}=e;const a=g.default.isRTL();return(0,v.jsx)("div",{className:(0,r.default)(x.fieldValue,i.uiMargin.vert3,a&&n&&x.displayRight),dir:n||!a?"ltr":"rtl","data-testid":"compliance-info-field-value",children:t||S()})};t.handleCustomerCareDetailsError=(e,t,n,a)=>{(0,c.existsCustomerCareDetailsContact)(e,t,n,a)||(0,s.default)(l.fbt._("At least one phone number is required. Please provide another phone number before removing this.",null,{hk:"2LGoJd"}))};t.handleGrievanceOfficerDetailsError=(e,t,n,a)=>{(0,c.existsGrievanceOfficerDetailsContact)(e,t,n,a)||(0,s.default)(l.fbt._("At least one contact method is required. Please provide another contact method first before removing this.",null,{hk:"NXBiy"}))}},58528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.pause(),e.src="",e.remove()}},35721:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;const a=null!=e.side?(0,d.jsx)("div",{className:(0,r.default)(c.side),children:e.side}):null,u=null===(t=e.separator)||void 0===t||t,f=(0,l.default)((0,r.default)(c.container,e.xstyle),e.className,{[s.default.separator]:u}),h=null!==(n=e.testid)&&void 0!==n?n:u?"container_with_separator":"container";return(0,d.jsx)("div",{"data-a8n":o.default.key(e.a8nText),className:f,role:e.onClick?"button":null,"data-testid":h,onClick:e.onClick,children:(0,d.jsxs)("div",{className:(0,l.default)(s.default.block,(0,r.default)(c.block,e.blockXstyle,e.multiline&&c.blockMultiline)),children:[(0,d.jsx)("div",{className:(0,l.default)((0,r.default)(c.main,e.multiline&&c.mainMultiline,e.restrictSpacing&&c.mainRestrictSpacing,i.isOSMac&&c.mainMac)),children:e.children}),a]})})};var o=a(n(99964)),i=n(77144),l=a(n(94184)),r=a(n(56720)),s=a(n(41323)),d=n(85893);const c={container:{paddingStart:"e8k79tju"},block:{display:"p357zi0d",alignItems:"gndfcl4n",height:"k45dudtp",paddingEnd:"bcymb0na"},blockMultiline:{height:"bvcnfjzh"},main:{flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"lb5m6g5c",marginTop:"kv6wexeh",overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},mainMultiline:{paddingTop:"hc2u0oym",paddingBottom:"myel2vfb",whiteSpace:"hmy10g0s"},mainMac:{marginTop:"tt8xd2xn"},mainRestrictSpacing:{paddingTop:"i5tg98hk",paddingBottom:"przvwfww",whiteSpace:"le5p0ye3"},side:{flexGrow:"tvf2evcx",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",marginStart:"jwvfxh5v"}}},99267:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(81109)),i=a(n(10901)),l=n(24808);const r={};r[l.Message$ExtendedTextMessageFontType.SERIF]={google:{families:["Roboto"]}},r[l.Message$ExtendedTextMessageFontType.SANS_SERIF]={google:{families:["Droid Serif"]}},r[l.Message$ExtendedTextMessageFontType.NORICAN_REGULAR]={google:{families:["Norican"]}},r[l.Message$ExtendedTextMessageFontType.BRYNDAN_WRITE]={custom:{families:["Bryndan-Write"]}},r[l.Message$ExtendedTextMessageFontType.OSWALD_HEAVY]={google:{families:["Oswald:bold"]}};const s={};s[l.Message$ExtendedTextMessageFontType.BRYNDAN_WRITE]=`@font-face {font-family:"Bryndan-Write"; src:url("${i.default}") format("truetype");}`;var d=new class{constructor(){this.loadedFonts={},this.loadingPromise={}}load(e){if(this.loadedFonts[e])return Promise.resolve();if(this.loadingPromise[e])return this.loadingPromise[e];const t=r[e],n=s[e];let a;a=n?new Promise(((e,t)=>{const a=document.createElement("style");a.appendChild(document.createTextNode(n)),a.onload=e,a.onerror=t,document.head&&document.head.appendChild(a)})):Promise.resolve();const i=a.then((()=>new Promise(((n,a)=>{const i=(0,o.default)((0,o.default)({},t),{},{active:()=>{this.loadedFonts[e]=!0,n()},inactive:()=>{this.loadingPromise[e]=void 0,a(new Error(`Failed to load font: ${e}`))}});WebFont.load(i)}))));return this.loadingPromise[e]=i,i}loadAllFonts(){return Promise.all(Array.from(l.Message$ExtendedTextMessageFontType.members()).map((e=>this.load(e))))}};t.default=d},98046:(e,t,n)=>{"use strict";var a=n(59182).default,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{images:t,renderFallback:n,fallbackMediaData:o,fetching:c,onClick:v}=e,x=(0,d.useRef)(null),S=(0,d.useRef)(null),y=(0,d.useRef)(null),b=(0,d.useRef)(null),j=(0,d.useRef)(null),[P,T]=(0,d.useState)(null),[k,E]=(0,d.useState)(t.filter((e=>e.mediaData.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED)).length),[I,w]=(0,d.useState)(!1),O=k===t.length,A=()=>E((e=>e+1));(0,d.useEffect)((()=>{let e=null;if(!O&&!n){var t,o;const n=S.current;if(!n)return;null===(t=y.current)||void 0===t||t.controller.abort(),e=new a;const s=e.signal,d=((null===(o=y.current)||void 0===o?void 0:o.promise)||Promise.resolve()).then((()=>(0,r.default)(n,{opacity:[1,0]},{delay:75,duration:50}))),c=(0,l.default)(d,s).then((()=>{if(s.aborted)throw new i.AbortError;w(!0)})).catch((0,i.catchAbort)((()=>{(0,r.default)(n,"stop",!0)}))).finally((()=>{y.current=null}));y.current={promise:c,controller:e}}return()=>{var t;null===(t=e)||void 0===t||t.abort()}}),[O,n]);const M=()=>{var e;return(null===(e=x.current)||void 0===e?void 0:e.children)?x.current.scrollWidth===x.current.offsetWidth?null:0===x.current.scrollLeft?"next":x.current.scrollWidth-1<=x.current.scrollLeft+x.current.offsetWidth?"prev":"both":null};if((0,d.useEffect)((()=>{T(M())}),[O]),n&&0===t.length)return(0,C.jsx)("div",{className:f.default.carousel,dir:"ltr",children:(0,C.jsx)("div",{className:(0,s.default)(f.default.contentContainer,f.default.slidesContainer),children:o&&(0,C.jsx)(h.default,{altText:"",mediaData:o,renderFallback:!0,singleSlide:!0})})});let L,N,R;const D=()=>{b.current=null;const e=M();P!==e&&T(e)};if(t.length>1){const e=()=>{const e=x.current;if(null!=e&&("prev"===P||"both"===P)){let t=0;const n=e.scrollLeft+Math.floor(e.offsetWidth/2);let a=e.lastElementChild;for(;a instanceof HTMLElement&&0===t;){const e=a.offsetLeft+Math.floor(a.offsetWidth/2);e<n&&(t=e-n),a=a.previousElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},t=()=>{const e=x.current;if(null!=e&&("next"===P||"both"===P)){let t=0;const n=e.scrollLeft+Math.floor(e.offsetWidth/2);let a=e.firstElementChild;for(;a instanceof HTMLElement&&0===t;){const e=a.offsetLeft+Math.floor(a.offsetWidth/2);n<e&&(t=e-n),a=a.nextElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},n=()=>{j.current=null;const e=M();P!==e&&T(e)};R=()=>{null==j.current&&(j.current=requestAnimationFrame(n))},O&&null!=P&&(L=(0,C.jsx)(u.ChevronButton,{type:u.ButtonType.Prev,onClick:e,onKeyDown:e,disabled:"prev"!==P&&"both"!==P,theme:g.RoundTheme.Small,overMedia:!0}),N=(0,C.jsx)(u.ChevronButton,{type:u.ButtonType.Next,onClick:t,onKeyDown:t,disabled:"next"!==P&&"both"!==P,theme:g.RoundTheme.Small,overMedia:!0}))}const B=1===t.length,V=t.map(((e,t)=>(0,C.jsx)(h.default,{altText:"",image:e,singleSlide:B,mediaData:e.mediaData,onClick:v,onLoad:A},t))),F=O?null:(0,C.jsx)("div",{className:(0,s.default)(f.default.contentContainer,f.default.spinnerContainer),children:(0,C.jsx)("div",{className:f.default.spinner,ref:S,children:(0,C.jsx)(_.Spinner,{color:"default",size:50,stroke:4})})}),U=(0,s.default)(f.default.carousel,{[f.default.loaded]:!c&&O,[f.default.fadeIn]:I});return(0,C.jsxs)("div",{className:U,dir:"ltr",children:[F,(0,C.jsx)("div",{ref:x,className:(0,s.default)(f.default.contentContainer,f.default.slidesContainer),onScroll:R,children:V}),L,N,(0,C.jsx)(m.default,{onResize:()=>{null==b.current&&(b.current=requestAnimationFrame(D))}})]})};var i=n(89385),l=o(n(47259)),r=o(n(62831)),s=o(n(94184)),d=n(67294),c=o(n(30523)),u=n(61991),f=o(n(55140)),h=o(n(98491)),p=n(58668),m=o(n(8694)),g=n(82857),_=n(11054),C=n(85893);c.default.polyfill()},98491:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(67294),i=n(35461),l=a(n(57246)),r=n(58668),s=n(85893);var d=e=>{let{mediaData:t,altText:n,image:a,singleSlide:d,renderFallback:c,onClick:u,onLoad:f,forwardRef:h}=e;const{fullHeight:p,fullWidth:m,mediaStage:g,renderableUrl:_}=(0,i.useModelValues)(t,["fullHeight","fullWidth","mediaStage","renderableUrl"]),C=(0,o.useRef)(null),v=(0,o.useRef)(g===r.MEDIA_DATA_STAGE.RESOLVED);(0,o.useEffect)((()=>{!f||v.current||c||g!==r.MEDIA_DATA_STAGE.RESOLVED||(f(),v.current=!0)}),[f,c,g]);const x=!!d;let S=m&&p?m/p:.8;S<.8&&(S=.8),S>1.91&&(S=1.91),S>1&&!x&&(S=1);const y={width:x&&S<1?100*S+"%":1!==S||d?null:"100%"},b={paddingTop:`${Math.floor(100/S)}%`},j={cursor:""+(u?"pointer":"auto")};return(0,s.jsx)("div",{ref:h?e=>h(e):null,className:l.default.slide,style:y,children:(0,s.jsx)("div",{className:l.default.slideInnerContainer,style:b,children:(0,s.jsx)("img",{ref:C,alt:n,src:_,className:l.default.image,style:j,draggable:"false",onClick:()=>{u&&C.current&&a&&u(C.current,a)}})})})};t.default=d},60263:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyCanvas=h,t.MediaGalleryView=function(e){const{mediaCollection:t,fullCollection:n,chat:a,onScroll:l,justify:s}=e,c=e.medias||e.productMedias,m="chat-info"===e.theme;if(!c)return null;let g=(0,i.default)(d.default.container,{[d.default.drawer]:n,[d.default.galleryEmpty]:0===t.length,[d.default.justifySpaceBetween]:"space-between"===s,[d.default.themeChatInfo]:m}),_=[...c];if(t.queryMediaBefore&&(n||_.length<6)){const e=(0,i.default)(d.default.more,d.default.canvasComponent,{[d.default.canvasSecondRow]:!n&&_.length>=3,[d.default.canvasFirst]:0===t.length});_.push((0,f.jsx)("div",{className:e,children:(0,f.jsx)(u.Spinner,{stroke:6,size:24})},"spinner"))}if(0===t.length){if(n)return t.queryMediaBefore?(0,f.jsx)("div",{className:(0,i.default)(d.default.drawer,d.default.drawerBody),children:(0,f.jsx)(r.Loading,{})}):(0,f.jsx)(r.MediaMsgs,{});if(m)return null;t.queryMediaBefore||t.hasMediaBefore||(g=(0,i.default)(g,d.default.galleryEmpty),_=[p(Math.max(a?a.docCount:0,0),Math.max(a?a.linkCount:0,0),Math.max(a?a.productCount:0,0))])}else for(let e=0;e<6;e++)_.push((0,f.jsx)(h,{},"empty"+e));return(0,f.jsx)("div",{onScroll:l,"data-a8n":o.default.key("media-gallery"),className:g,children:_})};var o=a(n(99964)),i=a(n(94184)),l=n(48360),r=n(85600),s=a(n(14296)),d=a(n(70764)),c=n(64551),u=n(11054),f=n(85893);function h(){return(0,f.jsx)("div",{className:d.default.canvasEmpty})}function p(e,t,n){const a=[];return null!=e&&e>0&&a.push(s.default.t(397,{count:e,_plural:e})),null!=t&&t>0&&a.push(s.default.t(548,{count:t,_plural:t})),c.ServerProps.productMediaAttachments&&null!=n&&n>0&&a.push(s.default.t(700,{count:n,_plural:n})),a.length>0?a.join(s.default.t(406)):c.ServerProps.productMediaAttachments?l.fbt._("No Media, Links, Docs and Products",null,{hk:"3RKA8T"}):l.fbt._("No Media, Links and Docs",null,{hk:"226fK3"})}},27315:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1769)),i=n(52835),l=n(18609),r=n(72761),s=a(n(8103)),d=a(n(68662));const c=new o.default;class u extends((0,r.PluggableInput)([i.EmojiPlugin,c,s.default])){}t.default=u,u.EmojiSuggestions=(0,d.default)(l.EmojiSuggestions,{plugin:c})},10595:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerDetailsStickerPackInfo=function(e){const{name:t,publisher:n,theme:a}=e;return(0,l.jsxs)(i.TextDiv,{theme:"plain",xstyle:[r.container,a===s.StickerStore&&r.stickerStore,a===s.MediaViewer&&r.mediaViewer],children:[t&&(0,l.jsx)(o.EmojiText,{xstyle:r.name,text:t}),t&&n&&(0,l.jsx)(o.EmojiText,{text:" • "}),n&&(0,l.jsx)(o.EmojiText,{text:n})]})},t.Theme=void 0;a(n(56720));var o=n(65417),i=n(13923),l=n(85893);const r={container:{color:"hp667wtd",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",textAlign:"qfejxiq4"},stickerStore:{marginBottom:"e2xccmyv"},mediaViewer:{marginBottom:"r2u2pyhj"},name:{fontSize:"enbbiyaj",lineHeight:"l85iiqla",color:"tl2vja3b"}},s=n(76672).Mirrored(["StickerStore","MediaViewer"]);t.Theme=s},99967:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(23279)),i=n(22712),l=n(26741),r=n(67294),s=a(n(58528)),d=n(99234),c=n(84387),u=a(n(34949)),f=n(62583),h=a(n(65932)),p=n(70437),m=n(65044),g=n(85893);const _=(0,o.default)(((e,t)=>{(0,d.setVideoVolumeSettings)(e,t)}),500);class C extends r.PureComponent{constructor(){super(...arguments),this.checkIteration=0,this.checkForSuccessInterval=0,this.hasCalledPlaying=!1,this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.refVideo=(0,r.createRef)(),this._handleVolumeChange=()=>{var e;const t=null===(e=this.refVideo)||void 0===e?void 0:e.current;t&&_(t.volume,t.muted)},this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval||(this.checkForSuccessInterval=setInterval(this.checkForSuccess,250))},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(clearInterval(this.checkForSuccessInterval),this.checkIteration=0,this.checkForSuccessInterval=0)},this.checkForSuccess=()=>{var e;if(m.Socket.state!==f.SOCKET_STATE.CONNECTED)return;this.checkIteration++;const t=null===(e=this.refVideo)||void 0===e?void 0:e.current,n=null==t?void 0:t.buffered;(null==n?void 0:n.length)&&n.end(0)>0?this._handlePlaying():this.checkIteration>240&&this.clearCheckForSuccess()},this._handlePlayerError=()=>{this.clearCheckForSuccess()},this.pause=()=>{var e;const t=null===(e=this.refVideo)||void 0===e?void 0:e.current;t&&(t.paused||t.pause())},this._handlePlaying=()=>{this.clearCheckForSuccess()},this._handleLoadedMetadata=e=>{this.setStartTime();const{onLoadedMetadata:t}=this.props;t&&t(e)},this.setStartTime=()=>{var e;const t=null===(e=this.refVideo)||void 0===e?void 0:e.current;null!=this.props.startTime&&0!==this.props.startTime&&t&&(t.currentTime=this.props.startTime)},this._handleContextMenu=e=>{this.props.disableContextMenu&&e.preventDefault()}}componentDidMount(){this._updateVideoUserPrefs(),this._updateAudioChannel(),this.props.refVideo&&this.props.refVideo(this.refVideo)}_updateAudioChannel(){var e;const t=this.refVideo.current;t!==this._prevVideo&&(this._prevVideo=t,null===(e=this._unregisterFromAudioChannel)||void 0===e||e.call(this),null!=t&&(this._unregisterFromAudioChannel=i.MainAudioChannel.registerMedia(t)))}componentWillUnmount(){var e;null===(e=this._unregisterFromAudioChannel)||void 0===e||e.call(this),_.flush(),this.clearCheckForSuccess(),this.pause(),l.UA.isBlink&&this.refVideo.current&&(0,s.default)(this.refVideo.current)}componentDidUpdate(e){this._updateVideoUserPrefs(),this._updateAudioChannel(),e.startTime!==this.props.startTime&&this.setStartTime(),this.props.refVideo&&this.props.refVideo(this.refVideo)}_updateVideoUserPrefs(){var e;const t=null===(e=this.refVideo)||void 0===e?void 0:e.current;if(t){const e=(0,d.getVideoVolumeSettings)();e&&("number"==typeof e.volume&&(t.volume=e.volume),"boolean"==typeof e.muted&&(t.muted=e.muted)),x()&&this.props.autoPlay&&this.startCheckForSuccess()}}render(){const e=this.props,{mediaData:t}=e,n=t.mediaBlob;let a;const o=t.streamable&&t.isStreamable();if((this.mediaBlobWasDownloadedBeforeMount||!o)&&n instanceof u.default)a=n.url();else{if(!t.streamable||!t.isStreamable())return null;a=`${p.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`}const i=x()&&!e.autoPlay?this.startCheckForSuccess:void 0;return(0,g.jsx)("video",{ref:this.refVideo,src:a,poster:e.poster,className:e.className,controls:e.controls,autoPlay:e.autoPlay,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onVolumeChange:this._handleVolumeChange,onLoadedMetadata:this._handleLoadedMetadata,onPlay:i,onPlaying:this._handlePlaying,onError:this.clearCheckForSuccess,onContextMenu:this._handleContextMenu,children:e.children})}}C.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable"]},C.displayName="VideoTag";var v=(0,c.ListenerHOC)((0,h.default)(C,C.CONCERNS));function x(){return l.UA.isGecko||l.UA.isSafari}t.default=v},35400:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{catalog:t,onSend:n}=e,a=(0,r.createCatalogLink)(t.id.user),d=t.id.equals((0,i.getMaybeMeUser)())?`${o.fbt._("Follow this link to view our catalog on WhatsApp:",null,{hk:"1bmMoC"}).toString()} ${a}`:a;return(0,s.jsx)(l.default,{text:d,onSend:n})};var o=n(48360),i=n(11362),l=a(n(24158)),r=n(82482),s=n(85893)},61266:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,onSend:n}=e,a=(0,r.createProductLink)(t.catalogWid.user,t.id.toString()),d=t.catalogWid.equals((0,i.getMaybeMeUser)())?`${o.fbt._("Follow this link to view our item on WhatsApp:",null,{hk:"H5KuN"}).toString()} ${a}`:a;return(0,s.jsx)(l.default,{text:d,onSend:n})};var o=n(48360),i=n(11362),l=a(n(24158)),r=n(82482),s=n(85893)},24158:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,n]=(0,m.useFlow)({initialStep:_.SelectModal,initialTransition:"none"}),a=(0,l.useRef)([]),C=(0,l.useRef)([]),v=function(){var e=(0,o.default)((function*(e){e.isUser&&e.contact.isBlocked()&&(yield(0,r.unblockContact)(e.contact))}));return function(){return e.apply(this,arguments)}}();if(null==n.step)return null;let x=null;switch(n.step){case _.SelectModal:const t=function(){var e=(0,o.default)((function*(e,t){yield v(e),e.active?s.Cmd.pasteChatTextInput(e,t):(e.setComposeContents({text:t}),s.Cmd.openChatFromUnread(e).then((t=>{t&&s.Cmd.focusChatTextInput(e)})))}));return function(){return e.apply(this,arguments)}}(),l=function(){var a=(0,o.default)((function*(a){if(C.current=a,1===a.length){const o=a[0];yield t(o,e.text),n.end(),window.innerWidth<=i.LAYOUT_2COLUMNS_MAX_WIDTH&&s.Cmd.closeDrawerRight()}else n.push(_.TextMessageModal,"none");e.onSend&&e.onSend()}));return function(){return a.apply(this,arguments)}}();x=(0,g.jsx)(c.SelectModal,{title:e.title||d.default.t(633),listType:c.ListType.CHAT_SELECT_MODAL,getInitialItems:()=>a.current,maxItems:h.ServerProps.multicastLimitGlobal,onConfirm:l,onCancel:()=>n.end(),onSelectionChanged:(e,t,n)=>{a.current=n},singleSelectionFooterType:u.FooterType.NEXT,multipleSelectionFooterType:u.FooterType.NEXT});break;case _.TextMessageModal:const r=(e,t,a)=>{e.forEach(function(){var e=(0,o.default)((function*(e){yield v(e),s.Cmd.once("ui_idle",(()=>{(0,f.sendTextMsgToChat)(e,t,{linkPreview:a})}))}));return function(){return e.apply(this,arguments)}}()),n.end()};x=(0,g.jsx)(p.default,{defaultText:e.text,title:e.title||d.default.t(633),onSend:(e,t)=>r(C.current,e,t),onBack:()=>n.pop("none")})}return(0,g.jsx)(t,{flow:n,children:x})};var o=a(n(48926)),i=n(41906),l=n(67294),r=n(80140),s=n(88102),d=a(n(14296)),c=n(56728),u=n(18963),f=n(5524),h=n(64551),p=a(n(9031)),m=n(76872),g=n(85893);const _=n(76672).Mirrored(["SelectModal","TextMessageModal"])},10121:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(32973)),i=a(n(61752)),l=n(85893);class r extends o.default{constructor(){super(...arguments),this.closeStatusViewer=()=>{this.end()}}componentDidMount(){this.push((0,l.jsx)(i.default,{initialStatusV3:this.props.statusV3,quotedMsgKey:this.props.msgKey,closeStatusViewer:this.closeStatusViewer,onMsgNotFound:this.props.onMsgNotFound}),"none")}}t.default=r},76872:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useFlow=function(e){const t=(0,u.default)(),{initialStep:n,initialTransition:a,onEnd:o}=e||{},[l,s]=(0,r.useReducer)(C,{initialStep:n,initialTransition:a},_),d=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;s({type:"push",payload:{step:e,transition:t}})}),[]),f=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;s({type:"pop",payload:{transition:e}})}),[]),h=(0,c.default)((e=>{o?o(e):(0,i.default)(t,"uim").requestDismiss(e)})),v=(0,c.default)((()=>l.stack.length));(0,r.useEffect)((()=>{l.ended&&h()}),[h,l.ended]);const x={push:d,pop:f,end:h,stackSize:v,step:l.stack[l.stack.length-1],transition:l.transition,activeKey:l.activeKey,isPushed:l.isPushed};return[p,x]};var o=a(n(81109)),i=a(n(45095)),l=a(n(40436)),r=n(67294),s=a(n(56720)),d=n(18644),c=a(n(89113)),u=a(n(95402)),f=n(85893);const h={height:"ppled2lx",start:"tkdu00h0",overflowX:"gfz4du6o",overflowY:"r7fjleex",position:"lhggkp7q",top:"qq0sjtgm",width:"ln8gz9je"},p=(0,r.forwardRef)(((e,t)=>{const{flow:n,children:a}=e,{pop:o,transition:i,activeKey:r}=n;return null==a?null:(0,f.jsx)(l.default,{transitionName:i,className:(0,s.default)(h),children:(0,f.jsx)(d.UIE,{ref:t,displayName:`FlowDrawer${r}`,escapable:!0,requestFocus:()=>{e.requestFocus&&e.requestFocus()},requestDismiss:t=>{e.requestDismiss?e.requestDismiss(t):o()},children:a},r)})}));p.displayName="FlowComponent";const m="flow-transition-drawer-push",g="flow-transition-drawer-pop";function _(e){let{initialStep:t,initialTransition:n}=e;return null==t?{stack:[],transition:"default",activeKey:0,ended:!1,isPushed:!1}:{stack:[t],transition:null!=n?n:m,activeKey:1,ended:!1,isPushed:!0}}function C(e,t){var n,a,i;switch(t.type){case"push":return null==(null===(n=t.payload)||void 0===n?void 0:n.step)?e:(0,o.default)((0,o.default)({},e),{},{stack:e.stack.concat(t.payload.step),transition:null!==(a=null===(i=t.payload)||void 0===i?void 0:i.transition)&&void 0!==a?a:e.transition,activeKey:e.activeKey+1,ended:!1,isPushed:!0});case"pop":const s=e.stack.slice(0,-1);var l,r;return s.length>=1?(0,o.default)((0,o.default)({},e),{},{stack:s,transition:null!==(l=null===(r=t.payload)||void 0===r?void 0:r.transition)&&void 0!==l?l:e.transition,activeKey:e.activeKey-1,isPushed:!1}):e.ended?e:(0,o.default)((0,o.default)({},e),{},{ended:!0});default:return e}}},29929:(e,t,n)=>{"use strict";var a=n(59182).default,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findFirstWebLink=void 0,t.useLinkPreview=function(e,t){const[n,o]=(0,u.useState)(null),d=()=>{o(null)};return(0,u.useEffect)((()=>{if(d(),!e)return;const n=new a,c=n.signal;return(0,l.default)((function*(){try{const n=yield(0,s.default)((0,p.default)(e,!0),c),a=null==n?void 0:n.data;if(!a)return;if(o(a),!a.thumbnailHQ)return;const l=yield function(){return x.apply(this,arguments)}(a.thumbnailHQ,c,t);if(!l)return;o((0,i.default)((0,i.default)({},a),l))}catch(e){if(e.name===r.ABORT_ERROR)return;__LOG__(2)`useLinkPreview: error`}}))(),()=>{n.signal.aborted||n.abort()}}),[e,t]),{linkPreview:n,clearLinkPreview:d}};var i=o(n(81109)),l=o(n(48926)),r=n(89385),s=o(n(47259)),d=o(n(64369)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(95726)),u=n(67294),f=n(4841),h=o(n(46220)),p=o(n(19146)),m=n(61596),g=o(n(34949)),_=o(n(15554)),C=o(n(74460));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function x(){return(x=(0,l.default)((function*(e,t,n){try{const a=yield(0,s.default)(g.default.createFromBase64Jpeg(e),t),o=yield(0,C.default)({thumbnail:a,mediaType:m.MEDIA_TYPES.THUMBNAIL_LINK,mediaKeyInfo:(0,_.default)(),uploadOrigin:(0,h.default)(n),forwardedFromWeb:!1,signal:t,timeout:d.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT,isViewOnce:!1}),i=o.mediaEntry;if(!i)return;return{mediaKey:i.mediaKey,mediaKeyTimestamp:i.mediaKeyTimestamp,thumbnailDirectPath:i.directPath,thumbnailSha256:o.filehash,thumbnailEncSha256:i.encFilehash}}catch(e){if(e.name===r.ABORT_ERROR)return;__LOG__(2)`useLinkPreview.uploadHQPreview: error`}}))).apply(this,arguments)}t.findFirstWebLink=e=>{const t=(0,f.removeCodeBlocks)(e),n=c.findLinks(t,!0)[0];if(n)return n}},62921:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(99964)),i=n(48360),l=n(67294),r=n(35461),s=a(n(59271)),d=n(16593),c=a(n(60453)),u=a(n(69637)),f=n(94790),h=n(92052),p=n(13923),m=n(85893);var g=(0,l.forwardRef)(((e,t)=>{const{settings:n,onClose:a}=e,{archive:l}=(0,r.useModelValues)(n,["archive"]),g=!l.classic;return(0,m.jsxs)(c.default,{ref:t,children:[(0,m.jsx)(f.DrawerHeader,{title:i.fbt._("Archive settings",null,{hk:"1YI0jC"}),type:f.DRAWER_HEADER_TYPE.LARGE,onBack:a}),(0,m.jsx)(u.default,{children:(0,m.jsxs)("div",{className:s.default.section,children:[(0,m.jsx)("div",{"data-a8n":o.default.key("auto-unarchive-setting"),className:s.default.control,children:(0,m.jsx)(d.CheckBox,{onChange:()=>{const e=!l.classic;(0,h.setArchiveClassicSetting)(e)},checked:g})}),(0,m.jsxs)("div",{"data-a8n":o.default.key("auto-unarchive-setting-text"),children:[i.fbt._("Keep chats archived",null,{hk:"IqSCS"}),(0,m.jsx)(p.TextDiv,{theme:"muted",children:i.fbt._("Archived chats will remain archived when you receive a new message",null,{hk:"jrtLe"})})]})]})})]})}));t.default=g},5970:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{collection:t}=e,[n,a]=(0,s.useState)(!1),[v,x]=(0,s.useState)(!1),[S,y]=(0,s.useState)(""),b=()=>{c.Cmd.closeModal()};if(v)return(0,C.jsx)(u.default,{title:r.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:b,children:(0,C.jsx)(m.TextDiv,{children:r.fbt._("We will review the collection and if it meets our guidelines, it will be added to your catalog.",null,{hk:"y5vML"})})});const j=S.length<1||n;return(0,C.jsx)(u.default,{title:r.fbt._("Request review",null,{hk:"1Rp2pL"}),onOK:()=>{a(!0);let e=!0;h.QPL.markerStart(p.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL),(0,d.handleCollectionAppeal)(t,S).then((()=>{a(!1),x(!0),e=!1,h.QPL.markerEnd(p.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,h.QuickLogActionType.SUCCESS)})).catch((0,o.filteredCatch)(i.ServerStatusCodeError,(()=>{c.Cmd.openToast((0,C.jsx)(_.Toast,{msg:r.fbt._("Something went wrong and your request wasn't submitted. Try again.",null,{hk:"3sAwQH"}),id:(0,_.genId)("catalog_collection_appeal_submission_failed")})),a(!1)}))).finally((()=>{e&&h.QPL.markerEnd(p.QuickLogMarkerId.WHATSAPP_COLLECTION_APPEAL,h.QuickLogActionType.FAIL)}))},onCancel:b,okDisabled:j,children:(0,C.jsxs)("form",{children:[(0,C.jsx)(g.TextInput,{a8n:"confirm-popup-text-input",placeholder:r.fbt._("Enter reason for this request...",null,{hk:"3U5nE7"}),onChange:e=>{y(e)},value:S,maxLength:1e3}),(0,C.jsx)(f.ExternalLink,{href:l.default.WA_COMMERCE_POLICY_URL,children:r.fbt._("Learn More",null,{hk:"FZuUT"})})]})})};var o=n(50796),i=n(92574),l=a(n(64369)),r=n(48360),s=n(67294),d=n(47217),c=n(88102),u=a(n(52665)),f=n(12591),h=n(48870),p=n(27798),m=n(13923),g=n(90011),_=n(50452),C=n(85893)},62738:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(48360),i=n(88102),l=a(n(52665)),r=n(85893);var s=e=>{i.Cmd.openModal((0,r.jsx)(l.default,{okText:o.fbt._("OK",null,{hk:"2KEeHb"}),onOK:()=>i.Cmd.closeModal(),children:e}))};t.default=s},13712:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=new f.CoolOffNux(g,C,{COOL_OFF_START_STORAGE_KEY:u.CoolOffPeriodKeys.CATALOG,MAX_VIEWS_IN_DAYS:1,COOL_OFF_DURATION_IN_DAYS:1});if(e.shouldShow()){const t=(0,m.jsx)(r.default,{onOK:()=>{e.dismiss(),l.Cmd.closeModal()},children:(0,m.jsxs)(s.FlexColumn,{align:"center",children:[(0,m.jsx)(d.default,{xstyle:_.graphic,children:(0,m.jsx)(h.default,{name:"cart-interstitial-graphic"})}),(0,m.jsx)(p.TextHeader,{theme:"popup-title",children:o.fbt._("New: Add to Cart",null,{hk:"34ysyY"})}),(0,m.jsx)(p.TextParagraph,{color:"secondary",className:i.default.description,children:o.fbt._("Simpler for you to keep track of order inquiries, manage requests, and close sales.",null,{hk:"25ZM2y"})})]})});l.Cmd.openModal(t),e.show(),e.startCoolOffToday()}};var o=n(48360),i=(a(n(56720)),a(n(31907))),l=n(88102),r=a(n(52665)),s=n(29623),d=a(n(48846)),c=a(n(11339)),u=n(61653),f=n(1710),h=a(n(23217)),p=n(13923),m=n(85893);const g=u.NuxKeyTypes.COOL_OFF_NUX.CART_INTERSTITIAL,_={graphic:{marginTop:"nylzjxre",marginEnd:"lfum0007",marginBottom:"bvhm1occ",marginStart:"r6x3u63k",color:"bc38n4nm"}},C=c.default.BANNER_TYPES.SMB_CATALOG_CART_INTERSTITIAL},92351:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onOpenCollections:t}=e;const[n,a]=(0,o.useState)(!1),u=l.CatalogCollection.get((0,s.getMeUser)());return(0,i.useListener)(null==u?void 0:u.collections,"change",(()=>{a(!0)})),n&&(0,c.jsx)(d.default,{children:(0,c.jsx)(r.default,{onClick:t})})};var o=n(67294),i=n(87550),l=n(99989),r=a(n(31502)),s=n(11362),d=a(n(26293)),c=n(85893)},31502:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(48360),i=n(57849),l=n(99989),r=a(n(22235)),s=n(17239),d=a(n(95993)),c=n(11362),u=a(n(11339)),f=n(61653),h=a(n(25550)),p=n(1710),m=n(85893);const g=f.NuxKeyTypes.COOL_OFF_NUX.COLLECTIONS,_={COOL_OFF_DURATION_IN_DAYS:2,VIEWS_BEFORE_COOL_OFF_IN_DAYS:1,CLICKS_BEFORE_COOL_OFF:1,MAX_VIEWS_IN_DAYS:2,COOL_OFF_START_STORAGE_KEY:f.CoolOffPeriodKeys.CATALOG};class C extends h.default{render(){const{onClick:e}=this.props,t=new p.CoolOffNux(g,u.default.BANNER_TYPES.SMB_COLLECTION_CREATION,_),n=(0,m.jsx)("span",{className:r.default.actionText,children:o.fbt._("Get started",null,{hk:"m7Zf5"})});return(0,m.jsx)(d.default,{title:o.fbt._("Create new collection",null,{hk:"19zBCQ"}),subtitle:o.fbt._("Group items into collections to stay organized.",null,{hk:"1sDPK6"}),actionText:n,onClick:e,nuxManager:t,theme:"nuxBlue"})}static shouldShow(){return(0,i.getABPropConfigValue)("web_abprop_collections_nux_banner")&&s.Conn.isSMB&&function(){const e=l.CatalogCollection.get((0,c.getMeUser)());if(null==e||null==e.collections)return!1;const t=e.collections.getCollectionModels(!0);return e.productCollection.getProductModels(!0).some((e=>!e.isHidden&&"REJECTED"!==e.reviewStatus))&&0===t.length}()&&(0,p.shouldShowNUX)(g,_)}}t.default=C,C.displayName="CollectionsBanner"},23358:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)(i.default,{a8nText:"li-share-link",icon:(0,s.jsx)(r.default,{name:"forward",className:l.default.icon}),onClick:e.onClick,children:o.fbt._("Send product",null,{hk:"1wkzue"})})};var o=n(48360),i=a(n(64738)),l=a(n(37295)),r=a(n(23217)),s=n(85893)},39902:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{a8nText:t,icon:n,iconWidth:a,iconHeight:u,label:f,disabled:h,xstyle:p,onClick:m}=e;const{isHovered:g,onMouseEnter:_,onMouseLeave:C}=function(){const[e,t]=(0,o.useState)(!1),n=(0,o.useCallback)((()=>{t(!0)}),[]),a=(0,o.useCallback)((()=>{t(!1)}),[]);return{isHovered:e,onMouseEnter:n,onMouseLeave:a}}(),v=(0,d.jsx)(r.default,{name:n,directional:!0,color:"teal",width:a,height:u});return(0,d.jsxs)("div",{className:(0,i.default)(c.button,h&&c.disabled,p),onMouseEnter:_,onMouseLeave:C,children:[(0,d.jsx)(l.Round,{inverted:!0,onClick:m,disabled:h,a8nText:t,hideBackground:h||!g,children:v}),(0,d.jsx)(s.default,{xstyle:c.label,disabled:h,a8nText:t,onClick:m,children:f})]})};var o=n(67294),i=a(n(56720)),l=n(82857),r=a(n(23217)),s=a(n(1784)),d=n(85893);const c={button:{textAlign:"qfejxiq4"},label:{marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"ovllcyds",marginTop:"qt60bha0",color:"jq3rn4u7"},disabled:{opacity:"ge6flnsz"}}},13062:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logCatalogClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_CATALOG_ICON,catalogSessionId:e,isProfileLinked:t})},t.logEmailClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_EMAIL,catalogSessionId:e,isProfileLinked:t})},t.logForwardClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_FORWARD,catalogSessionId:e,isProfileLinked:t})},t.logHoursClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_HOURS,catalogSessionId:e,isProfileLinked:t})},t.logLinkedFbClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_APP_LINK,linkedAccount:l.default.BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE.FACEBOOK,catalogSessionId:e,bizFbSize:s(t),isProfileLinked:!0})},t.logLinkedIgClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_APP_LINK,linkedAccount:l.default.BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE.INSTAGRAM,catalogSessionId:e,bizIgSize:s(t),isProfileLinked:!0})},t.logLocationClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_LOCATION,catalogSessionId:e,isProfileLinked:t})},t.logMessageClick=function(e){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_MESSAGE,catalogSessionId:e})},t.logProfileExit=function(e,t,n){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_EXIT,catalogSessionId:e,scrollDepth:t,isProfileLinked:n})},t.logProfileImpression=function(e,t,n){(0,i.smbBizProfileLoggingEnabled)()?new l.default.ViewBusinessProfile({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e,profileEntryPoint:t,isProfileLinked:!!n}).commit():new l.default.ViewBusinessProfile({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION,catalogSessionId:e,isProfileLinked:!!n}).commit()},t.logShopsClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_SHOPS_ICON,catalogSessionId:e,isProfileLinked:t})},t.logStatusClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_STATUS,catalogSessionId:e,isProfileLinked:t})},t.logVoiceCallClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_VOICE_CALL,catalogSessionId:e,isProfileLinked:t})},t.logWebsiteClick=function(e,t){r({viewBusinessProfileAction:l.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_CLICK_WEBSITE,catalogSessionId:e,isProfileLinked:t})};var o=a(n(81109)),i=n(57701),l=a(n(11339));function r(e){const t=new l.default.ViewBusinessProfile((0,o.default)((0,o.default)({},e),{},{isProfileLinked:!!e.isProfileLinked}));t&&t.commit()}function s(e){return e>1e6?l.default.TRUST_SIGNAL_BUCKETS.B1M:e>=1e5?l.default.TRUST_SIGNAL_BUCKETS.B100K:e>=1e4?l.default.TRUST_SIGNAL_BUCKETS.B10K:e>=1e3?l.default.TRUST_SIGNAL_BUCKETS.B1K:e>=501?l.default.TRUST_SIGNAL_BUCKETS.B501:e>=101?l.default.TRUST_SIGNAL_BUCKETS.B101:e>=51?l.default.TRUST_SIGNAL_BUCKETS.B51:e>=11?l.default.TRUST_SIGNAL_BUCKETS.B11:e>=2?l.default.TRUST_SIGNAL_BUCKETS.B2:1===e?l.default.TRUST_SIGNAL_BUCKETS.B1:l.default.TRUST_SIGNAL_BUCKETS.B0}},41470:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{text:t,secondary:n,icon:a,href:d,onClick:c,rowTheme:u}=e,f=(0,s.jsx)(r.default,{name:a});return(0,s.jsx)(i.default,{image:f,primary:t,secondary:n,theme:u,idle:void 0===d,onClick:()=>{if(void 0!==d){const e=(0,l.getWebsiteLink)(d);o.default.open(e),c&&c()}}})};var o=a(n(79264)),i=a(n(44356)),l=n(26316),r=a(n(23217)),s=n(85893)},35580:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var o=n(48360),i=n(67294),l=(a(n(56720)),n(35461)),r=n(13062),s=n(27394),d=a(n(33308)),c=n(65417),u=a(n(41470)),f=n(97567),h=n(85893);const p={infoText:{fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",color:"t35qvd06",paddingStart:"rtas09xs",paddingEnd:"hmmjlwtp",display:"f804f6gw",paddingBottom:"p9a4hubg"}};function m(e){const{showEditHint:t,businessProfile:n,sectionTheme:a,rowTheme:m}=e,{fbPage:g,igProfessional:_}=(0,l.useModelValues)(n,["fbPage","igProfessional"]),C=(0,f.getProductCatalogSessionId)((0,i.useContext)(s.DrawerContext)),v=[];if(null==g?void 0:g.displayName){const e=g.likes?o.fbt._({"*":"Facebook • {count} Likes",_1:"Facebook • 1 Like"},[o.fbt._plural(g.likes,"count")],{hk:"4fuveG"}):o.fbt._("Facebook",null,{hk:"2PcUTa"});v.push((0,h.jsx)(u.default,{icon:"logo-facebook-round",text:g.displayName,secondary:e,href:`https://www.facebook.com/${g.id}`,rowTheme:m,onClick:()=>{(0,r.logLinkedFbClick)(C,g.likes)}},"fb"))}if(null==_?void 0:_.handle){const e=_.followers?o.fbt._({"*":"Instagram • {count} Followers",_1:"Instagram • 1 Follower"},[o.fbt._plural(_.followers,"count")],{hk:"4gGhJG"}):o.fbt._("Instagram",null,{hk:"4kjnWv"});v.push((0,h.jsx)(u.default,{icon:"logo-instagram-color",text:`@${_.handle}`,secondary:e,href:`https://www.instagram.com/${_.handle}`,rowTheme:m,onClick:()=>{(0,r.logLinkedIgClick)(C,_.followers)}},"ig"))}if(0===v.length)return null;let x;if(!0===t){const e=o.fbt._("Facebook and Instagram handles can only be edited from the app on your mobile device.",null,{hk:"3JNYRt"});x=(0,h.jsx)(c.EmojiText,{xstyle:p.infoText,text:e.toString()})}return(0,h.jsxs)(d.default,{theme:a,children:[v.map((e=>e)),x]})}m.defaultProps={sectionTheme:"no-padding",rowTheme:"linked-account"}},26609:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{elementId:t,onClick:n}=e;return document.queryCommandSupported("copy")?(0,u.jsx)(s.default,{a8nText:"li-copy-link",icon:(0,u.jsx)(d.default,{name:"copy",className:r.default.icon}),onClick:()=>function(e,t){(0,o.default)(e)?l.Cmd.openToast((0,u.jsx)(c.Toast,{msg:i.fbt._("Link copied to clipboard.",null,{hk:"2d44NZ"}),id:(0,c.genId)()})):l.Cmd.openToast((0,u.jsx)(c.Toast,{msg:i.fbt._("Couldn't copy to clipboard. Copy using mouse or keyboard.",null,{hk:"4aKgWx"}),id:(0,c.genId)()}));null!=t&&t()}(t,n),children:i.fbt._("Copy link",null,{hk:"2ZtjA3"})}):null};var o=a(n(39311)),i=n(48360),l=n(88102),r=a(n(555)),s=a(n(64738)),d=a(n(23217)),c=n(50452),u=n(85893)},64738:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,onClick:n,icon:a,className:f,theme:h,disabled:p=!1,testid:m}=e,[g,_]=(0,r.default)(n,{disabled:p}),C=p?void 0:e.color,v=null!=a?(0,u.jsx)("div",{className:(0,l.default)(s.default.icon,{[s.default.danger]:"danger"===C,[s.default.success]:"success"===C}),children:a}):null,x=(0,l.default)(s.default.container,f,{[s.default.containerNoIcon]:!a,[s.default.disabled]:Boolean(p),[s.default.containerListAligned]:"list-aligned"===h,[s.default.themeChatInfo]:"chat-info"===h}),S=(0,d.isStringOrFbt)(t)?t:null;return(0,u.jsxs)("div",(0,o.default)((0,o.default)({},_),{},{className:x,"data-a8n":i.default.key(e.a8nText),"data-ignore-capture":"any","data-testid":m,ref:g,title:S,children:[v,(0,u.jsx)("div",{className:(0,l.default)(s.default.bodyContainer),children:(0,u.jsx)("div",{className:s.default.body,children:(0,u.jsx)(c.TextSpan,{theme:"title",color:C,children:t})})})]}))};var o=a(n(81109)),i=a(n(99964)),l=a(n(94184)),r=a(n(34470)),s=a(n(73858)),d=n(12733),c=n(13923),u=n(85893)},71528:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(45095)),i=a(n(62831)),l=a(n(94184)),r=n(48360),s=n(67294),d=a(n(44356)),c=n(88102),u=n(88984),f=n(65417),h=a(n(47065)),p=n(46346),m=a(n(11791)),g=a(n(67978)),_=a(n(65932)),C=a(n(23217)),v=n(18644),x=n(85893);class S extends s.Component{constructor(){super(...arguments),this.state={style:{visibility:"hidden"}},this.setRefImage=e=>{this._refImage=e},this._handleImageLoad=e=>{const t=e.currentTarget;this.setState({size:{width:t.naturalWidth,height:t.naturalHeight}},(()=>{this.props.getZoomNode((e=>{const n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),o=a.top-n.top,i={visibility:"hidden",transform:`translateX(${a.left-n.left}px) translateY(${o}px) scale(${e.clientWidth/t.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(i.borderRadius="50%"),this.setState({style:i},(()=>{let e={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(e={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:e})}))}))}))},this._handleClose=()=>{if(this.closing)return;let e;if(this.closing=!0,this.props.getZoomNode((t=>{e=t})),!e)return c.Cmd.closeModalMedia();const t=this._refImage;if(t){this.props.animateBorderRadius&&(t.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",t.style.borderRadius="50%");const n=(0,o.default)(e,"start"),a=t.getBoundingClientRect(),l=n.getBoundingClientRect(),r=l.top-a.top,s=l.left-a.left,d=n.clientWidth/t.clientWidth;(0,i.default)(t,{translateX:[s,0],translateY:[r,0],scale:[d,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{c.Cmd.closeModalMedia()}))}},this._handleScroll=e=>{Math.abs(e.deltaY)>3&&this._handleClose()}}shouldComponentUpdate(e){return!!e.profilePicThumb.imgFull||(this._handleClose(),!1)}render(){const{contact:e,profilePicThumb:t}=this.props;let n;return t.imgFull&&(n=(0,x.jsx)(h.default,{src:t.imgFull,hasPrivacyChecks:!0,onLoad:this._handleImageLoad,className:g.default.profileViewerImg})),(0,x.jsx)(v.UIE,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this._handleClose,children:(0,x.jsxs)("div",{className:(0,l.default)("overlay",g.default.container),onWheel:this._handleScroll,onClick:this._handleClose,children:[(0,x.jsxs)("div",{className:g.default.headerContainer,children:[(0,x.jsx)("div",{className:g.default.profileThumb,children:(0,x.jsx)(d.default,{image:(0,x.jsx)(u.DetailImage,{id:e.id,size:40}),theme:"plain",primary:(0,x.jsx)(f.EmojiText,{text:e.formattedUser})})}),(0,x.jsx)("div",{className:g.default.mediaPanelTools,children:(0,x.jsx)(p.MenuBar,{theme:"strong",children:(0,x.jsx)(p.MenuBarItem,{a8nText:"btn-close",icon:(0,x.jsx)(C.default,{name:"x-viewer"}),title:r.fbt._("Close",null,{hk:"19Jpec"}),onClick:this._handleClose})},"media-panel-header")})]}),(0,x.jsx)("div",{className:g.default.profileContainer,dir:"ltr",children:(0,x.jsx)("div",{className:g.default.media,children:(0,x.jsx)(m.default,{type:"scaleDown",size:this.state.size,children:(0,x.jsx)("div",{className:g.default.profileViewer,ref:this.setRefImage,style:this.state.style,children:n})})})})]})})}}S.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},S.displayName="PhotoViewerModal";var y=(0,_.default)(S,S.CONCERNS);t.default=y},79876:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{profilePicThumb:t,size:n}=e,a=!t.canSet()&&!t.canDelete(),[p,m]=(0,s.useState)(!1),g=(0,d.default)();return(0,h.jsx)(c.PhotoPickerLoadable,{type:u.default.PROFILE,id:t.id,attachToChat:!1,pending:p,startImage:t.imgFull,readOnly:a,onImageSet:(t,n)=>{const a=e.profilePicThumb;let s;m(!0),s=t&&n?(0,f.setProfilePic)(a,t,n):(0,f.deleteProfilePic)(a),(0,l.default)(s,g).catch((0,i.filteredCatch)(r.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`}))).catch((0,o.catchAbort)((()=>{}))).finally((()=>{m(!1)}))},size:n})};var o=n(89385),i=n(50796),l=a(n(47259)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(35232)),s=n(67294),d=a(n(3409)),c=n(33646),u=a(n(43556)),f=n(71517),h=n(85893);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}},51628:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)(i.default,{a8nText:"li-share-link",icon:(0,s.jsx)(r.default,{name:"forward",className:l.default.icon}),onClick:e.onClick,children:o.fbt._("Send link via WhatsApp",null,{hk:"459eKy"})})};var o=n(48360),i=a(n(64738)),l=a(n(60654)),r=a(n(23217)),s=n(85893)},95200:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{text:t,isExpandedCaptionText:n,onExpandCaptionText:a}=e;const p=t.length>120&&!n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.EmojiText,{formatters:r.Configuration.StatusV3Caption(),text:Array.from(t).slice(0,119).join("")}),s.default.t(703),(0,c.jsxs)("strong",{children:[" ",o.fbt._("Read more",null,{hk:"2DvSvh"})]})]}):(0,c.jsx)(l.EmojiText,{formatters:r.Configuration.StatusV3Caption(),text:t});return(0,c.jsx)("div",{className:(0,i.default)(u),children:(0,c.jsx)("div",{className:(0,i.default)(h),children:(0,c.jsx)(d.default,{onClick:a,children:(0,c.jsxs)("div",{className:(0,i.default)(f),children:[" ",p," "]})})})})};var o=n(48360),i=a(n(56720)),l=n(65417),r=n(30695),s=a(n(14296)),d=a(n(1784)),c=n(85893);const u={position:"g0rxnol2",width:"ln8gz9je",height:"ppled2lx"},f={paddingTop:"tvsr5v2h",paddingEnd:"clw8hvz5",paddingBottom:"ja2dfh8z",paddingStart:"p2tfx3a3",hyphens:"ndq9n57b",wordBreak:"cw3vfol9"},h={position:"lhggkp7q",width:"ln8gz9je",bottom:"jxacihee",zIndex:"px10qoeu",marginEnd:"k1jo73ug",marginStart:"isfiuinm",color:"lxozqee9",textAlign:"qfejxiq4",backgroundColor:"tp4bj0rl",cursor:"ajgl1lbb",fontSize:"cqiun4t2",lineHeight:"q6wg26sa"}},71607:(e,t,n)=>{"use strict";var a=n(59182).default,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(89385),l=n(50796),r=n(13959),s=o(n(47259)),d=o(n(40436)),c=n(48360),u=n(67294),f=o(n(56720)),h=o(n(3409)),p=n(88102),m=n(56512),g=o(n(96563)),_=(n(60811),n(30424),n(18609)),C=o(n(13699)),v=n(50101),x=n(29424),S=o(n(14296)),y=o(n(11339)),b=n(24264),j=o(n(35072)),P=o(n(8694)),T=n(85330),k=n(5524),E=o(n(58506)),I=o(n(27315)),w=o(n(23217)),O=n(50452),A=n(18644),M=o(n(24717)),L=n(85893);const N={container:{position:"lhggkp7q",right:"grt5ktjy",bottom:"f7v6by6u",left:"tukmaf4q",zIndex:"nbczt5ty",width:"b1qcobdr",maxWidth:"ckq3dtew",marginRight:"oc1ubkv0",marginLeft:"jzfo78pl",paddingBottom:"aiput80m"},popupPanel:{right:"grt5ktjy",bottom:"jxacihee",left:"tukmaf4q",zIndex:"thghmljt",paddingRight:"pppsat04",paddingBottom:"przvwfww",marginRight:"oc1ubkv0",marginLeft:"jzfo78pl",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",willChange:"d6finlhe"},popupPanelNonRichStatusReplies:{width:"ma66mwvu",maxWidth:"e91fykn7",backgroundColor:"rv6u8h8g"},popupPanelRichStatusReplies:{width:"t9hu7tsx",maxWidth:"ckq3dtew",paddingTop:"emrlamx0"},wrapper:{zIndex:"nbczt5ty",display:"p357zi0d",flexDirection:"sap93d0t",paddingRight:"fyqm2y5z",paddingLeft:"tw6b5hi5",paddingTop:"emrlamx0"},iconButton:{display:"l7jjieqr",alignSelf:"rwlvdxyg",marginTop:"opp68qpq",marginBottom:"rkip0xea",marginStart:"lhp4ctto",marginEnd:"ntr8esoy"},iconButtonColourFocused:{color:"svlsagor"},iconButtonColourOutOfFocus:{color:"lxozqee9"},square26Svg:{width:"ekdr8vow",height:"dhq51u3o"},lineWrapper:{position:"g0rxnol2",top:"qq0sjtgm",left:"tukmaf4q",display:"l7jjieqr",width:"crlpoz9d"},inputContainer:{boxSizing:"cm280p3y",width:"ln8gz9je",minHeight:"gc15jzxb",paddingTop:"eujn52yf",paddingEnd:"l9g3jx6n",paddingBottom:"ckm995li",paddingStart:"lyvj5e2u",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j"},containerInFocus:{backgroundColor:"rv6u8h8g",borderTopStartRadius:"llnowng2",borderTopEndRadius:"ap6veyk2",borderBottomEndRadius:"dc5qina8",borderBottomStartRadius:"kfr1vweg",transition:"iw1tz1w0"},containerInFocusStatusQuickReplies:{borderTopStartRadius:"g130k69c",borderTopEndRadius:"k1a7joe8",borderBottomEndRadius:"dc5qina8",borderBottomStartRadius:"kfr1vweg",paddingBottom:"aiput80m"},inputInFocus:{backgroundColor:"f6cvynhn",borderTopColor:"rsltai19",borderEndColor:"boshimb4",borderBottomColor:"lw07f11l",borderStartColor:"jy0rc3ak",borderTopStyle:"d1poss59",borderEndStyle:"gyj32ejw",borderBottomStyle:"cmcp1to6",borderStartStyle:"eg0col54",borderTopWidth:"gofg5ll1",borderEndWidth:"p7waza29",borderBottomWidth:"oteuebma",borderStartWidth:"mzoqfcbu"},inputOutOfFocus:{backgroundColor:"kx1rlajt"},panelButtons:{paddingEnd:"mgssq8h7"}};function R(e,t){const{isStatusQuickRepliesEnabled:n}=e,[o,R]=(0,u.useState)(!1),[D,B]=(0,u.useState)(void 0),[V,F]=(0,u.useState)(void 0),[U,W]=(0,u.useState)(null),[H,G]=(0,u.useState)(300),q=(0,u.useRef)(!1),z=(0,u.useRef)(null),K=(0,u.useRef)(null),Q=(0,u.useRef)(null),Y=(0,u.createRef)(),$=(0,h.default)();(0,u.useEffect)((()=>{(0,v.findChat)(e.msg.sender).then((e=>{$.aborted||F(e)}))}),[]);const X=((e,t,n)=>Boolean(e)||t||Boolean(n))(D,o,U);(0,u.useEffect)((()=>{X?e.pause():e.play()}),[X]);const J=()=>X,Z=()=>{var e;null===(e=K.current)||void 0===e||e.focus()},ee=()=>{W(null),Z()},te=()=>{B(void 0),W(null)},ne=()=>V?Promise.resolve(V):(0,v.findChat)(e.msg.sender),ae=()=>{var t;te(),null===(t=K.current)||void 0===t||t.reset(),e.dismissReply()},oe=(t,n)=>{e.statusReplyMetric.statusReplyMessageType=n;const o=(0,O.genId)(),d=n===y.default.STATUS_REPLY_MESSAGE_TYPE.QUICK_REPLY,u=new a,f=(0,L.jsx)(O.Toast,{action:d?{actionText:c.fbt._("Undo",null,{hk:"3krOOb"}),onAction:()=>{p.Cmd.closeToast(o),u.abort()}}:void 0,msg:d?c.fbt._("Reply sent",null,{hk:"3NwgLp"}):c.fbt._("Sending reply…",null,{hk:"WYxWt"}),id:o});p.Cmd.openToast(f),(0,s.default)((0,r.delayMs)(d?4e3:0),u.signal).then(t).then((()=>{e.statusReplyMetric.statusReplyResult=y.default.STATUS_REPLY_RESULT.OK,e.onSend()})).catch((0,i.catchAbort)((()=>{}))).catch((0,l.filteredCatch)(g.default,(()=>{V&&(p.Cmd.openToast((0,L.jsx)(O.Toast,{msg:S.default.t(851,{contact:V.contact.formattedName}),id:o})),e.statusReplyMetric.statusReplyResult=y.default.STATUS_REPLY_RESULT.ERROR_UNKNOWN)}))),d||ae()},ie=t=>{if(t.stopPropagation(),t.preventDefault(),!K.current)return;const n=K.current.value.trim();n.length&&ne().then((t=>{oe((()=>(0,k.sendTextMsgToChat)(t,(0,C.default)(n),{quotedMsg:e.msg})),y.default.STATUS_REPLY_MESSAGE_TYPE.TEXT)}))},le=()=>o,re=()=>{R(!1),te()},se=()=>{var e;null===(e=Q.current)||void 0===e||e.restoreFocus()},de=e=>{null==e?ee():(W(e),R(!0))};(0,u.useImperativeHandle)(t,(()=>({isFocused:le,isPaused:J,restoreFocus:Z,blur:re})));const ce=le()||null!=U;(0,u.useEffect)((()=>{var e;null===(e=K.current)||void 0===e||e.setTheme(ce?"rich-status-reply":"status-reply")}),[ce]);const ue=null!=H&&null!=U?(0,L.jsx)(P.default,{onResize:e=>{G(e.width)},children:(0,L.jsx)(m.ComposeBoxPanelsLoadable,{displayCache:z.current,width:H,onDisplayCache:e=>{z.current=e},onEmoji:e=>{const t=K.current;t&&t.replaceSelection(e)},onFocusRelease:()=>{},onGif:()=>{},onPanelChange:de,onSticker:(t,n)=>{t.isCreateButton||ne().then((a=>{oe((()=>(0,T.sendStickerToChat)(a,t,{stickerSendOrigin:n,quotedMsg:e.msg})),y.default.STATUS_REPLY_MESSAGE_TYPE.STICKER)}))},requestDismiss:ee,forwardedRef:e=>{Y.current=e},selectedPanelId:U,theme:b.PanelsTheme.StatusReplyComposeBox})}):null,fe=D?(0,L.jsx)(A.UIE,{displayName:"EmojiPicker",escapable:!0,requestFocus:se,children:(0,L.jsx)("div",{children:(0,L.jsx)(A.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:()=>{B(void 0),Z()},requestFocus:se,children:(0,L.jsx)(M.default,{contextMenu:D})})})}):null,he=n&&o?(0,L.jsx)(A.UIE,{displayName:"StatusV3QuickReply",escapable:!0,requestDismiss:e.dismissReply,children:(0,L.jsx)("div",{className:(0,f.default)(N.popupPanel,N.popupPanelRichStatusReplies),children:(0,L.jsx)(E.default,{onClick:(t,n)=>{t.stopPropagation(),ne().then((t=>{oe((()=>(0,k.sendTextMsgToChat)(t,(0,C.default)(n),{quotedMsg:e.msg})),y.default.STATUS_REPLY_MESSAGE_TYPE.QUICK_REPLY)}))},onClickAnimateEnd:ae})})}):null,pe=V&&!n&&(ce||o&&!D)?(0,L.jsx)(A.UIE,{displayName:"StatusV3Reply",escapable:!0,requestDismiss:e.dismissReply,children:(0,L.jsx)("div",{className:(0,f.default)(N.popupPanel,N.popupPanelRichStatusReplies),children:(0,L.jsx)(j.default,{msg:e.msg.safe(),theme:"statusV3",chat:V},e.msg.id.toString())})}):null,me=(0,L.jsx)("div",{className:(0,f.default)(N.panelButtons),children:(0,L.jsx)(b.ComposeBoxPanelsMenu,{selectedPanelId:U,onChange:de,theme:b.PanelsTheme.StatusReplyComposeBox,buttonStyle:[ce?N.iconButtonColourFocused:N.iconButtonColourOutOfFocus]})});return(0,L.jsxs)("div",{className:(0,f.default)(N.container),children:[(0,L.jsx)(d.default,{transitionName:"status-v3-quick-reply",transitionAppear:!0,children:he}),(0,L.jsxs)("div",{className:(0,f.default)([ce&&N.containerInFocus,n&&N.containerInFocusStatusQuickReplies]),children:[(0,L.jsx)(d.default,{transitionName:"status-v3-panel",transitionAppear:!0,children:ue}),(0,L.jsx)(d.default,{transitionName:"status-v3-quoted-msg",transitionAppear:!0,children:pe}),(0,L.jsxs)("div",{className:(0,f.default)(N.wrapper),children:[me,(0,L.jsxs)("div",{className:(0,f.default)(N.lineWrapper),children:[(0,L.jsx)(I.default.EmojiSuggestions,{theme:_.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:e=>{q.current=e}}),(0,L.jsx)(x.HotKeys,{className:(0,f.default)(N.inputContainer,ce?N.inputInFocus:N.inputOutOfFocus),onClick:Z,children:(0,L.jsx)(I.default,{ref:K,theme:"status-reply",spellCheck:!0,onFocus:()=>{R(!0)},onBlur:()=>{q.current||(document.activeElement,document.body)},onEnter:ie,placeholder:c.fbt._("Type a reply…",null,{hk:"3bHadc"}),multiline:!0})})]}),(0,L.jsx)("button",{className:(0,f.default)(N.iconButton,ce?N.iconButtonColourFocused:N.iconButtonColourOutOfFocus),onClick:ie,children:(0,L.jsx)(w.default,{name:"send",directional:!0,iconXstyle:N.square26Svg})}),fe]})]})]})}var D=(0,u.forwardRef)(R);t.default=D},89660:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3Img=function(e){const{msg:t,onMouseDown:n,onMouseUp:a,play:o,markRead:r,statusV3:s,pause:f}=e,h=(0,l.useModelValues)(e.mediaData,["mediaStage","renderableUrl","preview","fullWidth","fullHeight","aspectRatio","fullPreviewData"]);return(0,i.useEffect)((()=>(h.mediaStage!==d.MEDIA_DATA_STAGE.RESOLVED&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:u.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0}),()=>{f()})),[]),(0,i.useEffect)((()=>{o(),h.mediaStage===d.MEDIA_DATA_STAGE.RESOLVED&&r(s,t)}),[r,h.mediaStage,t,o,s]),(0,g.jsx)(c.default,{mediaData:h,placeholderRenderer:()=>(0,g.jsx)(C,{mediaData:h,onMouseDown:n,onMouseUp:a}),downloadMedia:()=>t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:u.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0}),renderProgressively:!0,children:e=>(0,g.jsx)(_,{src:e,msg:t,mediaData:h,onMouseUp:a,onMouseDown:n})})};var o=a(n(94184)),i=n(67294),l=n(35461),r=a(n(62190)),s=a(n(47065)),d=n(58668),c=a(n(20553)),u=a(n(11339)),f=a(n(11791)),h=a(n(34949)),p=a(n(31778)),m=a(n(80568)),g=n(85893);function _(e){var t;let{src:n,msg:a,mediaData:i,onMouseDown:l,onMouseUp:d}=e;const c=(0,o.default)(m.default.playerContent,m.default.v3Image);return(0,g.jsx)("div",{className:c,onMouseDown:l,onMouseUp:d,onDragEnd:d,children:(0,g.jsx)(f.default,{type:"contain",size:{width:i.fullWidth,height:i.fullHeight},children:(0,g.jsxs)("div",{className:m.default.mediaViewer,children:[(0,g.jsx)(s.default,{src:n,disableContextMenu:!0}),a.interactiveAnnotations&&a.interactiveAnnotations.length>0&&(0,g.jsx)(r.default,{annotations:a.interactiveAnnotations,onTooltipDisplay:l,onTooltipDismiss:d}),(null===(t=a.actionLink)||void 0===t?void 0:t.buttonTitle)&&a.actionLink.url&&(0,g.jsx)("div",{className:m.default.actionLink,children:(0,g.jsx)(p.default,{text:a.actionLink.buttonTitle,url:a.actionLink.url})}),null]})})})}function C(e){var t;let{mediaData:n,onMouseDown:a,onMouseUp:i}=e;const l=(0,o.default)(m.default.playerContent,m.default.v3Image,m.default.loading);return(0,g.jsx)("div",{className:l,onMouseDown:a,onMouseUp:i,children:(0,g.jsx)(f.default,{type:"contain",size:{width:n.aspectRatio,height:1},children:(0,g.jsx)(s.default,{src:null!==(t=v(n))&&void 0!==t?t:""})})})}function v(e){return e?e.fullPreviewData?e.fullPreviewData.url():e.preview instanceof h.default?e.preview.url():null:null}},87998:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3Player=function(e){const{msg:t,mediaData:n,statusV3:a,msgIdx:i,sessionId:r,rowIdx:u,onNext:h,markRead:m,closeStatusViewer:v}=e,b=(0,y.default)(),j=(0,_.default)((()=>(0,H.setupStatusV3Controller)(n,t))),D=(0,p.useRef)(!0),B=(0,_.default)((()=>new M.default.WebcStatusView({webcStatusLoaded:!1,webcStatusReplyCount:0,webcStatusViewT:0}))),V=(0,_.default)((()=>new M.default.StatusReply({statusReplyResult:M.default.STATUS_REPLY_RESULT.CANCELLED}))),X=(0,p.useRef)(null),te=(0,p.useRef)(null),se=(0,p.useRef)(null),de=(0,p.useRef)(null),ce=(0,p.useRef)(null),ue=(0,p.useRef)(null),fe=(0,p.useRef)(null),[he,pe]=(0,p.useState)(!1),[me,ge]=(0,p.useState)(!1),[_e,Ce]=(0,p.useState)(!1),[ve,xe]=(0,p.useState)(!1),[Se,ye]=(0,p.useState)(!1),[be,je]=(0,p.useState)(!1),[Pe,Te]=(0,p.useState)(null),[ke,Ee]=(0,p.useState)(!1),Ie=()=>{const e=ue.current,t=de.current;if(!e||!t)return;const n=e.getBoundingClientRect(),a=t.getBoundingClientRect();!w.default.isRTL()&&n.right>a.left-5||w.default.isRTL()&&n.left<a.right+5?pe(!0):pe(!1)},we=(0,g.default)(Ie),Oe=(0,S.default)((e=>{if(n&&n.mediaStage!==A.MEDIA_DATA_STAGE.RESOLVED)return;const t=X.current;null!=t&&(B.current.webcStatusViewT+=Math.round(window.performance.now()-t),X.current=void 0),j.current.pause(),te.current=e})),Ae=(0,S.default)((()=>{var e;if(n){if(n.mediaStage!==A.MEDIA_DATA_STAGE.RESOLVED)return;B.current.webcStatusLoadT||(B.current.markWebcStatusLoadT(),B.current.webcStatusLoaded=!0)}(null===(e=se.current)||void 0===e?void 0:e.isPaused())||D.current&&(X.current=window.performance.now(),j.current.resume())})),Me=()=>{var e;const t=fe.current;t&&d.default.focus(t),null===(e=se.current)||void 0===e||e.blur(),Ee(!1)},Le=e=>{var t,n;(e&&(e.stopPropagation(),e.preventDefault()),a.contact.isMe)||((null===(t=se.current)||void 0===t?void 0:t.isFocused())?Me():null===(n=se.current)||void 0===n||n.restoreFocus())},Ne=()=>{P.Cmd.closeModal(),Ae(),ge(!1)},Re=()=>{je(!be)},De=(0,S.default)((()=>{Oe(ee.MOUSEDOWN)})),Be=(0,S.default)((()=>{Ae()})),Ve=()=>{B.current.webcStatusReplyCount++,Z(a.contact,"statusReplies")},Fe=e=>{var t,n,a;(e&&(e.stopPropagation(),e.preventDefault()),null===(t=se.current)||void 0===t?void 0:t.isFocused())&&(null===(n=se.current)||void 0===n||n.restoreFocus());ne&&Ee(!!(null===(a=se.current)||void 0===a?void 0:a.isFocused()))};(0,p.useLayoutEffect)((()=>{var e;if(null!=r){let e;a.contact.isMe?(e=M.default.WEBC_STATUS_ROW_SECTION.MY,L.MsgInfoCollection.find(t.id).then((e=>{b.aborted||Te(e.read)})).catch((0,o.filteredCatch)(l.EphemeralDrop,(()=>{})))):e=a.contact.statusMute?M.default.WEBC_STATUS_ROW_SECTION.MUTED:a.hasUnread?M.default.WEBC_STATUS_ROW_SECTION.RECENT:M.default.WEBC_STATUS_ROW_SECTION.VIEWED;const s=a.msgs.length-1-i<a.unreadCount;let d;n?d=n.isGif?M.default.WEBC_STATUS_MEDIA_TYPE.GIF:"video"===n.type?M.default.WEBC_STATUS_MEDIA_TYPE.VIDEO:M.default.WEBC_STATUS_MEDIA_TYPE.IMAGE:(d=t.getLinks().length?M.default.WEBC_STATUS_MEDIA_TYPE.URL:M.default.WEBC_STATUS_MEDIA_TYPE.TEXT,B.current.markWebcStatusLoadT(),B.current.webcStatusLoaded=!0),B.current.webcStatusSessionId=r,B.current.webcStatusRowSection=e,B.current.webcStatusRowIndex=u||0,B.current.webcStatusMediaType=d,B.current.webcStatusUnread=s,V.current.statusSessionId=r,(0,E.smbStatusLoggingEnabled)()&&(B.current.webcIsPosterBiz=a.contact.isBusiness,V.current.isPosterBiz=a.contact.isBusiness,B.current.webcIsPostersAddressBook=a.contact.isMyContact,V.current.isPosterInAddressBook=a.contact.isMyContact)}null===(e=j.current)||void 0===e||e.addListeners(((e,t)=>{const n=ce.current;null==n||n.handleStart(e,t),Ce(!1),te.current=null}),(()=>{const e=ce.current;null==e||e.handlePause(),Ce(!0)}),(()=>{const e=ce.current;null==e||e.handleEnded().then((()=>{b.aborted||h()}))}),((e,t)=>{xe(t),ye(e)})),n?(Ae(),(null==n?void 0:n.mediaStage)===A.MEDIA_DATA_STAGE.RESOLVED&&m(a,t)):(t.type,c.MSG_TYPE.CHAT,Ae(),m(a,t));const s=fe.current;null==s||s.focus(),Ie()}),[]),(0,x.default)((()=>{if(j.current.removeListeners(),null!=r){const e=Math.round(j.current.duration||0);B.current.webcStatusPlaybackT=e;const t=X.current;null!=t&&(B.current.webcStatusViewT+=Math.round(window.performance.now()-t),X.current=void 0),B.current.commit(),V.current.commit()}Z(a.contact,"statusViews")}));const Ue=(0,S.default)(m);let We,He;if((0,C.useListener)(window,"focus",(()=>{D.current=!0,me||te.current!==ee.WINDOW_BLUR||Ae()})),(0,C.useListener)(window,"blur",(()=>{D.current=!1,_e||Oe(ee.WINDOW_BLUR)})),(0,C.useListener)(window,"resize",we),n){const e=re(n);e&&(We={backgroundImage:`url(${e})`})}else if(t.type===c.MSG_TYPE.CHAT){const e=t.statusV3TextBg;We={backgroundColor:e}}if(n)switch(n.type){case O.default.TYPE.IMAGE:He=(0,J.jsx)(W.StatusV3Img,{msg:t,statusV3:a,mediaData:n,markRead:Ue,play:Ae,pause:Oe,onMouseDown:De,onMouseUp:Be});break;case O.default.TYPE.VIDEO:He=(0,J.jsx)(ae,{msg:t,statusV3:a,mediaData:n,markRead:Ue,play:Ae,pause:Oe,playbackController:j.current,onMouseDown:De,onMouseUp:Be});break;default:__LOG__(3)`Invalid status v3 image type: ${n.type}`}else He=t.type===c.MSG_TYPE.CHAT?(0,J.jsx)(Q.StatusV3Text,{msg:t,onMouseDown:De,onMouseUp:Be}):(0,J.jsx)(oe,{onMouseDown:De,onMouseUp:Be});const Ge=(0,J.jsx)("div",{ref:de,children:(0,J.jsx)(z.default,{ref:ce,current:e.msgIdx,total:e.totalMsgs,onClick:e.onClickProgressBar})}),qe=t.isSentByMe||a.contact.isPSA,ze=(0,f.default)(G.default.profile,{[G.default.nonClickProfile]:qe,[G.default.profileNarrow]:he}),Ke=(0,f.default)(G.default.profile,G.default.measuringProfile,{}),Qe=e=>e.stopPropagation(),Ye=(0,J.jsx)(N.ContactName,{className:G.default.msgInfoName,contact:a.contact,you:!0,ellipsify:!0,showBusinessCheckmark:a.contact.showBusinessCheckmarkAsPrimary}),$e=(0,J.jsxs)("div",{className:ze,onClick:qe?null:()=>{const e=a.contact.id;(0,k.findChat)(e).then((e=>P.Cmd.openChatBottom(e))).then((()=>{v(!0)}))},children:[(0,J.jsx)("div",{className:G.default.playerAvatar,children:(0,J.jsx)(T.DetailImage,{id:a.contact.id,theme:"status_v3",size:40})}),(0,J.jsxs)("div",{className:G.default.msgInfo,children:[(0,J.jsx)("div",{className:(0,f.default)({[G.default.msgInfoNameWrapper]:!qe,[G.default.msgInfoNamePSA]:a.contact.isPSA}),children:Ye}),!a.contact.isPSA&&(0,J.jsx)("div",{className:G.default.timestamp,children:s.Clock.relativeDateAndTimeStr(t.t)})]}),(0,J.jsx)("div",{className:G.default.statusMediaControls,onClick:Qe,children:(0,J.jsx)(q.default,{isPaused:_e,hasAudio:(null==n?void 0:n.type)===O.default.TYPE.VIDEO&&Se,isMuted:ve,onPlay:Ae,onPause:()=>{Oe(ee.PAUSE_BUTTON)},onMute:()=>{j.current.mute(),xe(!0)},onUnmute:()=>{j.current.unmute(),xe(!1)}})})]}),Xe=(0,J.jsxs)("div",{ref:ue,className:Ke,children:[(0,J.jsx)("div",{className:G.default.playerAvatar,children:(0,J.jsx)(T.DetailImage,{id:a.contact.id,theme:"status_v3",size:40})}),(0,J.jsxs)("div",{className:G.default.msgInfo,children:[Ye,(0,J.jsx)("div",{className:G.default.timestamp,children:s.Clock.relativeDateAndTimeStr(t.t)})]})]});let Je,Ze;n&&(Je=(0,J.jsx)(ie,{mediaData:n}));a.contact.isMe||a.contact.isPSA||(Ze=(0,J.jsx)(I.HotKeys,{handlers:{left:Qe,right:Qe},onClick:Fe,children:(0,J.jsx)(U.default,{msg:e.msg,dismissReply:Me,onSend:Ve,pause:Oe,play:Ae,ref:e=>{se.current=e},statusReplyMetric:V.current,isStatusQuickRepliesEnabled:ne})}));const et=a.contact.isMe&&Pe?(0,J.jsx)("div",{className:G.default.seen,children:(0,J.jsx)(K.default,{seenCount:Pe.length,onClick:()=>{Pe&&(P.Cmd.openModal((0,J.jsx)(Y.default,{onClose:Ne,viewers:Pe})),Oe(ee.OPEN_SEE_VIEWERS_MODAL),ge(!0))}})}):null,tt=(0,f.default)(G.default.playerBackground,{[G.default.media]:n});let nt;const at=(0,f.default)(G.default.progressBackdrop,{[G.default.progressBarBackdropNarrow]:he});t.type!==c.MSG_TYPE.CHAT&&(nt=(0,J.jsx)("div",{className:at}));let ot;t.type!==c.MSG_TYPE.CHAT&&"string"==typeof t.caption&&(ot=(0,J.jsx)("div",{className:G.default.caption,children:(0,J.jsx)(R.default,{type:"contain",size:{width:n.fullWidth,height:n.fullHeight},children:(0,J.jsx)(F.default,{text:t.caption,isExpandedCaptionText:be,onExpandCaptionText:Re})})}));return(0,J.jsx)($.UIE,{displayName:"StatusV3Player",escapable:!0,requestDismiss:t=>{t||e.closeStatusViewer()},requestFocus:Me,children:(0,J.jsx)(I.HotKeys,{handlers:{tab:Le,"shift+tab":Le},onClick:Me,children:(0,J.jsxs)("div",{className:G.default.playerWrapper,tabIndex:-1,ref:fe,children:[Xe,$e,ke?(0,J.jsx)(le,{}):null,nt,Ge,(0,J.jsx)("div",{className:tt,style:We}),He,ot,Je,et,Ze]},t.id.toString())})})};var o=n(50796),i=n(92844),l=n(92574),r=n(88555),s=n(40234),d=a(n(52013)),c=n(15461),u=n(16116),f=a(n(94184)),h=n(48360),p=n(67294),m=a(n(56720)),g=a(n(51799)),_=a(n(16223)),C=n(87550),v=n(35461),x=a(n(55010)),S=a(n(89113)),y=a(n(3409)),b=n(57849),j=a(n(62190)),P=n(88102),T=n(88984),k=n(50101),E=n(57701),I=n(29424),w=a(n(14296)),O=a(n(2320)),A=n(58668),M=a(n(11339)),L=n(17972),N=n(12176),R=a(n(11791)),D=a(n(34949)),B=n(11054),V=a(n(31778)),F=a(n(95200)),U=a(n(71607)),W=n(89660),H=n(5358),G=a(n(80568)),q=a(n(78333)),z=a(n(4392)),K=a(n(21029)),Q=n(47786),Y=a(n(16495)),$=n(18644),X=a(n(99967)),J=n(85893);function Z(e,t){(0,E.btmThreadsLoggingEnabled)()&&!e.isMe&&(0,k.findChat)(e.id).then((e=>{(0,u.handleActivitiesForChatThreadLogging)([{activityType:t,ts:(0,i.unixTime)(),chatId:e.id}])}))}const ee=n(76672).Mirrored(["PAUSE_BUTTON","MOUSEDOWN","WINDOW_BLUR","OPEN_SEE_VIEWERS_MODAL"]),te={width:"ln8gz9je",height:"ppled2lx",backgroundColor:"ceoseaut",position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",opacity:"ebu6xrgy",zIndex:"nbczt5ty"},ne=(0,r.isMDBackend)()&&(0,b.getABPropConfigValue)("status_quick_reply_enabled");function ae(e){var t,n;const{msg:a,onMouseDown:o,onMouseUp:i,playbackController:l,play:r,markRead:s,statusV3:d,pause:c}=e,u=(0,p.useRef)(null),h=(0,v.useModelValues)(e.mediaData,["preview","mediaStage","fullWidth","fullHeight","streamable","fullPreviewData"]);(0,p.useEffect)((()=>{h.streamable||h.isStreamable()||a.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:M.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!0})}),[]),(0,x.default)((()=>{c()}));const m=(0,S.default)((e=>{u.current=e.current,l.setVideo(u.current)}));(0,p.useEffect)((()=>{r(),h.mediaStage===A.MEDIA_DATA_STAGE.RESOLVED&&s(d,a)}),[s,h.mediaStage,a,r,d]);const g=h.mediaStage!==A.MEDIA_DATA_STAGE.RESOLVED,_=(0,f.default)(G.default.playerContent,G.default.v3Video,{loading:g});return(0,J.jsx)("div",{className:_,onMouseDown:o,onMouseUp:i,children:(0,J.jsx)(R.default,{type:"contain",size:{width:h.fullWidth,height:h.fullHeight},children:(0,J.jsxs)("div",{className:G.default.mediaViewer,children:[(0,J.jsx)(X.default,{msg:a,mediaData:h,autoPlay:!0,refVideo:m,poster:null!==(t=re(h))&&void 0!==t?t:"",disableContextMenu:!0,children:w.default.t(807)}),a.interactiveAnnotations&&a.interactiveAnnotations.length>0&&(0,J.jsx)(j.default,{annotations:a.interactiveAnnotations,onTooltipDisplay:e.onMouseDown,onTooltipDismiss:e.onMouseUp}),(null===(n=a.actionLink)||void 0===n?void 0:n.buttonTitle)&&a.actionLink.url&&(0,J.jsx)("div",{className:G.default.actionLink,children:(0,J.jsx)(V.default,{text:a.actionLink.buttonTitle,url:a.actionLink.url})}),null]})})})}function oe(e){return(0,J.jsx)("div",{className:G.default.playerContent,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,children:(0,J.jsx)("div",{className:G.default.unknown,children:h.fbt._("You received a status, but your version of WhatsApp doesn't support it.",null,{hk:"RNPf0"})})})}function ie(e){return(0,v.useModelValues)(e.mediaData,["mediaStage"]).mediaStage!==A.MEDIA_DATA_STAGE.RESOLVED?(0,J.jsx)("div",{className:G.default.mediaStateControls,children:(0,J.jsx)("button",{className:"icon-media-disabled",children:(0,J.jsx)(B.Spinner,{size:50,stroke:4,color:"white"})})}):null}function le(){return(0,J.jsx)("div",{className:(0,m.default)(te)})}function re(e){return e?e.fullPreviewData?e.fullPreviewData.url():e.preview instanceof D.default?e.preview.url():null:null}},78333:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{isPaused:t,hasAudio:n,isMuted:a,onPlay:o,onPause:i,onMute:r,onUnmute:s}=e;return(0,d.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,d.jsxs)(l.FlexRow,{children:[(0,d.jsx)(h,{isPaused:t,handlePlayPauseButton:()=>{t?o():i()}}),(0,d.jsx)(p,{hasAudio:n,isMuted:a,handleMuteButton:()=>{a?s():r()}})]})})};var o=n(48360),i=a(n(56720)),l=n(29623),r=a(n(38932)),s=a(n(23217)),d=n(85893);const c={cursor:"bx7g2weo",width:"i94gqilv",height:"bmot90v7",color:"lxozqee9"},u={marginRight:"lyrceosr"},f={opacity:"brh521k9"};function h(e){let{isPaused:t,handlePlayPauseButton:n}=e;return(0,d.jsx)("div",{className:(0,i.default)(u,c),children:(0,d.jsx)(r.default,{"aria-label":t?o.fbt._("Play",null,{hk:"4CjEWt"}):o.fbt._("Pause",null,{hk:"1kvbzt"}),onClick:n,name:t?"status-media-controls-play":"status-media-controls-pause"})})}function p(e){let{hasAudio:t,isMuted:n,handleMuteButton:a}=e;return t?(0,d.jsx)("div",{className:(0,i.default)(c),children:(0,d.jsx)(r.default,{"aria-label":n?o.fbt._("Unmute",null,{hk:"aQpZx"}):o.fbt._("Mute",null,{hk:"1C7Sjw"}),onClick:a,name:n?"status-media-controls-volume-off":"status-media-controls-volume-on"})}):(0,d.jsx)("div",{className:(0,i.default)(f,c),children:(0,d.jsx)(s.default,{name:"status-media-controls-no-sound"})})}},58506:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,onClickAnimateEnd:n}=e,a=(0,i.useRef)(null),m=(0,i.useRef)(0),[g,_]=(0,i.useState)(null);(0,r.useListener)(n&&a.current,"animationend",(()=>{++m.current===h.length&&(null==n||n())}));const[C,v]=(0,s.default)(u.NUX.STATUS_QUICK_REPLIES);return(0,f.jsxs)("div",{ref:a,children:[C?(0,f.jsx)("div",{className:(0,l.default)(p.guidance),children:o.fbt._("Click to send",null,{hk:"48egRc"})}):null,(0,f.jsx)(c.FlexRow,{justify:"center",className:(0,l.default)(p.container),children:h.map(((e,n)=>(0,f.jsx)("div",{className:(0,l.default)([p.emoji,null!=g&&(g===n?p.emojiClicked:p.emojiClickedNeighbours)]),children:(0,f.jsx)(d.default,{onClick:a=>{t(a,e),v(),_(n)},children:e})},e)))})]})};var o=n(48360),i=n(67294),l=a(n(56720)),r=n(87550),s=a(n(59732)),d=a(n(39770)),c=n(29623),u=n(61653),f=n(85893);const h=["😍","😂","😮","😢","🙏","👏","🎉","💯"],p={container:{width:"ln8gz9je",fontSize:"fvnbr7o8",marginTop:"c46o30wg",marginEnd:"k1jo73ug",marginBottom:"du8bjn1j",marginStart:"isfiuinm"},emoji:{paddingStart:"lyvj5e2u",":first-child":{paddingStart:"k0v4dwxw"}},emojiClicked:{animationName:"px8j00m4",animationDuration:"izvjr1tp",animationTimingFunction:"bej5yntv",animationFillMode:"a21kwdn3",transformOrigin:"s79hpmcy"},emojiClickedNeighbours:{animationName:"d7qcm159",animationDuration:"a906e4bh",animationFillMode:"a21kwdn3",animationTimingFunction:"bej5yntv"},guidance:{textAlign:"qfejxiq4",color:"octy2vkd",fontSize:"enbbiyaj",marginBottom:"brac1wpa"}}},47786:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3Text=function(e){const{msg:t}=e;(0,l.useEffect)((()=>{s.default.load(t.font).catch((()=>{}))}),[]);const n=(0,o.numCodepoints)(e.msg.body);let a,f;const h={[c.default[`font_${e.msg.font}`]]:!0};n<=60?(a=(0,i.default)(c.default.text,c.default.textLarge,h),f=d.Configuration.StatusV3Text({links:e.msg.getLinks()})):n<=240?(a=(0,i.default)(c.default.text,c.default.textMedium,h),f=d.Configuration.StatusV3Text({links:e.msg.getLinks()})):a=(0,i.default)(c.default.text,c.default.textSmall,h);return(0,u.jsx)("div",{className:(0,i.default)(c.default.playerContent,{[c.default.statusPanelPlayerContent]:"status-panel"===e.theme,[c.default.statusThumbnailPlayerContent]:"status-thumbnail"===e.theme,[c.default.textThumbnailPlayerContent]:"text-thumb"===e.theme}),onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,children:(0,u.jsx)("div",{className:a,children:(0,u.jsx)(r.EmojiText,{text:e.msg.body,formatters:f})})})};var o=n(64331),i=a(n(94184)),l=n(67294),r=n(65417),s=a(n(99267)),d=n(30695),c=a(n(80568)),u=n(85893)},61752:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{initialStatusV3:t,quotedMsgKey:n,initialStatusMsg:a,onMsgNotFound:T}=e,k=(0,h.default)(),[E,I]=(0,f.useState)(null),[w,O]=(0,f.useState)(null),[A,M]=(0,f.useState)(!0),L=(0,f.useRef)(null),N=e=>{if((!E||e!==E.msgIdx)&&E&&L.current){const t=L.current.statusAt(E,e);M(!0),t.then((e=>{k.aborted||I(e)})).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`}))).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))).finally((()=>{M(!1)}))}};(0,f.useEffect)((()=>{const e=L.current;if(E&&e&&e.hasNext(E)){e.getNext(E).then((t=>{if(k.aborted)return;const n=e.statuses[t.statusIdx].msgs[t.msgIdx];if(!n)throw new S.StatusV3MsgNotFound;if(n.type===s.MSG_TYPE.CHAT)m.default.load(n.font).catch((()=>{}));else{const e=n.mediaData;e&&e.mediaStage!==_.MEDIA_DATA_STAGE.RESOLVED&&n.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:C.default.WEBC_RMR_REASON_CODE.STATUS_V3,isUserInitiated:!1})}})).catch((0,o.filteredCatch)(S.StatusV3MsgNotFound,(()=>{__LOG__(3)`Error finding next status while preloading next status`}))).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while preloading next status`}))).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})))}}),[E,L,k.aborted]);const R=t=>{O(!0),(0,i.delayMs)(200).then((()=>{k.aborted||e.closeStatusViewer(t)}))},D=()=>{const e=L.current;if(E&&e&&e.hasPrev(E)){const t=E.statusIdx;e.getPrev(E).then((e=>{k.aborted||(e.statusIdx===t?I(e):(O(!0),(0,i.delayMs)(200).then((()=>{k.aborted||(I(e),O(!1))}))))})).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting previous status msg`}))).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`})))}},B=()=>{const e=L.current;if(E&&e&&e.hasNext(E)){const t=E.statusIdx,n=e.getNext(E);M(!0),n.then((e=>{k.aborted||(e.statusIdx===t?I(e):(O(!0),M(!1),(0,i.delayMs)(200).then((()=>{k.aborted||(I(e),O(!1))}))))})).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while getting next status msg`,R()}))).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.StatusV3LoadingError,(()=>{__LOG__(3)`No more status v3 while preloading next status`}))).finally((()=>{M(!1)}))}else R()},V=(e,t)=>{const n=L.current;if(!t)return;const a=e.unreadCount,o=e.totalCount;if(e.msgs.getModelsArray().findIndex((e=>e===t))>=o-a){const n=(0,l.unixTime)(),a=t.id.participant;a&&a.isPSA()&&t.set("statusPSAReadTimestamp",n),e.sendReadStatus(t.id,t.author,n)}const i=null==n?void 0:n.statuses.find((t=>t.statusV3===e));i&&i.readMsgKeys.push(t.id.toString())};let F,U,W,H,G,q,z,K,Q;(0,f.useEffect)((()=>{const i=t;if(n){const t=n;if(-1!==i.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString()))){L.current=new S.Statusv3Snapshot(i,t);L.current.getFirstUnread(i,!0,t).then((e=>{k.aborted||(I(e),M(!1))})).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,p.Cmd.openToast((0,P.jsx)(j.Toast,{msg:u.fbt._("Status update not found",null,{hk:"1KSfSo"}),id:(0,j.genId)()})),e.closeStatusViewer()})))}else M(!0),i.loadMore(i.totalCount).then((()=>{M(!1);if(-1!==i.msgs.getModelsArray().findIndex((e=>e.id.toString()===t.toString()))){L.current=new S.Statusv3Snapshot(i,t);L.current.getFirstUnread(i,!0,t).then((e=>{k.aborted||(I(e),M(!1))})).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,p.Cmd.openToast((0,P.jsx)(j.Toast,{msg:u.fbt._("Status update not found",null,{hk:"1KSfSo"}),id:(0,j.genId)()})),e.closeStatusViewer()})))}else null==T||T(),p.Cmd.openToast((0,P.jsx)(j.Toast,{msg:u.fbt._("Status update not found",null,{hk:"1KSfSo"}),id:(0,j.genId)()})),e.closeStatusViewer()})).catch((()=>{p.Cmd.openToast((0,P.jsx)(j.Toast,{msg:u.fbt._("Status update not found",null,{hk:"1KSfSo"}),id:(0,j.genId)()})),R()})).finally((()=>{M(!1)}))}else{const t=a;L.current=new S.Statusv3Snapshot(i);L.current.getFirstUnread(i,!0,null==t?void 0:t.id).then((e=>{k.aborted||(I(e),M(!1))})).catch((0,o.filteredCatch)(r.EphemeralDrop,(()=>{}))).catch((0,o.filteredCatch)(S.InvalidStatusV3Iterator,(()=>{__LOG__(3)`Invalid iterator while loading first unread msg`,p.Cmd.openToast((0,P.jsx)(j.Toast,{msg:u.fbt._("Status update not found",null,{hk:"1KSfSo"}),id:(0,j.genId)()})),e.closeStatusViewer()})))}}),[]),E&&L.current&&(G=L.current,q=G.statuses[E.statusIdx],z=q.statusV3,K=q.msgs[E.msgIdx],G.hasPrev(E)&&(W=(0,P.jsx)("div",{className:y.default.chevronLeft,children:(0,P.jsx)(b.default,{name:"chevron-left"})}),H=(0,P.jsx)("div",{className:y.default.chevronLeftBg,onClick:D})),G.hasNext(E)&&(F=(0,P.jsx)("div",{className:y.default.chevronRight,children:(0,P.jsx)(b.default,{name:"chevron-right"})}),U=(0,P.jsx)("div",{className:y.default.chevronRightBg,onClick:()=>{B(),V(z,K)}})));!w&&!A&&K&&E&&q&&z&&(Q=(0,P.jsx)("div",{className:y.default.playerContainer,children:(0,P.jsx)(x.StatusV3Player,{statusV3:z,msg:K,mediaData:K.mediaData,msgIdx:E.msgIdx,totalMsgs:q.totalCount,markRead:V,closeStatusViewer:R,onClickProgressBar:N,onNext:B,onPrev:D,sessionId:e.sessionId,rowIdx:e.rowIdx},K.id)},K.id));const Y=(0,c.default)(y.default.v3X,{[y.default.v3X_mac]:!1}),$=(0,P.jsx)("button",{className:Y,onClick:()=>e.closeStatusViewer(!0),children:(0,P.jsx)(b.default,{name:"x-viewer"})}),X=(0,c.default)(y.default.backIcon,{[y.default.backIcon_mac]:!1}),J=(0,P.jsx)("button",{className:X,onClick:()=>e.closeStatusViewer(),children:(0,P.jsx)(b.default,{name:"back",directional:!0})});let Z;A&&(Z=(0,P.jsx)("div",{className:y.default.mediaStateControls,children:(0,P.jsx)("button",{children:(0,P.jsx)(v.Spinner,{size:50,stroke:4,color:"white"})})}));return(0,P.jsx)(g.HotKeys,{handlers:{left:D,right:B},children:(0,P.jsxs)("div",{className:y.default.viewer,"data-animate-status-v3-viewer":!0,children:[$,J,H,W,U,F,Z,(0,P.jsx)(d.default,{transitionName:"status-v3-player",transitionAppear:!0,children:Q})]})})};var o=n(50796),i=n(13959),l=n(92844),r=n(92574),s=n(15461),d=a(n(40436)),c=a(n(94184)),u=n(48360),f=n(67294),h=a(n(3409)),p=n(88102),m=a(n(99267)),g=n(29424),_=(a(n(14296)),n(58668)),C=a(n(11339)),v=n(11054),x=n(87998),S=n(70860),y=a(n(7497)),b=a(n(23217)),j=n(50452),P=n(85893)},16495:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{viewers:t,onClose:n}=e;(0,l.useEffect)((()=>n));const a=new f.default,o=function(e){const t=e.map((e=>({participant:e,itemKey:e.id.toString(),height:u.DEFAULT_ITEM_HEIGHT})));return t.sort(((e,t)=>t.participant.t-e.participant.t)),t}(t),i=o.length?(0,_.jsx)(u.FlatList,{flatListController:a,direction:"vertical",forceConsistentRenderCount:!0,data:o,renderItem:C}):(0,_.jsx)(x,{}),c=m.default.t(813,{count:o.length}),h={width:400,height:v(o.length)};return(0,_.jsx)(g.Modal,{type:g.ModalTheme.CustomSize,dimensions:h,children:(0,_.jsxs)(r.default,{theme:"settings",children:[(0,_.jsx)(d.DrawerHeader,{onCancel:n,title:c,type:d.DRAWER_HEADER_TYPE.POPUP}),(0,_.jsx)(s.default,{flatListControllers:[a],children:i})]})})};var o=n(88555),i=n(48360),l=n(67294),r=a(n(60453)),s=a(n(69637)),d=n(94790),c=n(85600),u=n(47915),f=a(n(30855)),h=n(99234),p=a(n(47834)),m=a(n(14296)),g=n(57224),_=n(85893);function C(e){const{participant:t}=e;return(0,_.jsx)(p.default,{msgInfoParticipant:t,contact:t.contact},t.id.toString())}function v(e){const t=e>0?72*e:(0,o.isMDBackend)()?100:150;return Math.min(500,t+59)}function x(){return(0,o.isMDBackend)()?(0,_.jsx)(c.Empty,{children:"none"===(0,h.getUserPrivacySettings)().readReceipts?i.fbt._("Can't see views because you disabled Read Receipts in Settings > Account > Privacy",null,{hk:"45oJGn"}):i.fbt._("No views yet",null,{hk:"456C0K"})}):(0,_.jsx)(c.Empty,{title:i.fbt._("No views yet",null,{hk:"456C0K"}),text:i.fbt._("Views are not visible if you have disabled Read Receipts in Settings > Account > Privacy on your phone",null,{hk:"1bIdNy"})})}},9031:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(64369)),i=n(67294),l=n(29929),r=a(n(60453)),s=a(n(69637)),d=n(94790),c=n(65417),u=n(29424),f=a(n(51845)),h=n(57224),p=a(n(81880)),m=n(82857),g=a(n(23217)),_=n(90011),C=a(n(43693)),v=n(18644),x=n(85893);var S=e=>{const{defaultText:t,title:n,onSend:a,onBack:S}=e,[y,b]=(0,i.useState)(t),j=(0,l.findFirstWebLink)(y),{linkPreview:P,clearLinkPreview:T}=(0,l.useLinkPreview)(j),k=n?(0,x.jsx)(c.EmojiText,{text:n,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:E,canonicalUrl:I,description:w,thumbnail:O}=P||{},A=P?(0,x.jsx)(v.UIE,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:T,children:(0,x.jsx)(p.default,{onOmit:T,children:(0,x.jsx)(f.default,{title:E,compose:!0,canonicalUrl:I,description:w,thumbnailJpeg:O})})}):null;return(0,x.jsx)(h.Modal,{type:h.ModalTheme.Box,children:(0,x.jsxs)(r.default,{children:[(0,x.jsx)(d.DrawerHeader,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:S,children:k}),(0,x.jsx)(s.default,{children:(0,x.jsxs)(u.HotKeys,{className:C.default.container,children:[(0,x.jsx)("div",{className:C.default.inputContainer,children:(0,x.jsx)(_.TextInput,{a8n:"text-message-modal-text-unput",value:y,maxLength:o.default.MAX_TXT_MSG_SIZE,onChange:e=>{b(e)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})}),A]})}),(0,x.jsx)("div",{className:C.default.btnContainer,children:(0,x.jsx)("div",{className:C.default.btnPosition,children:(0,x.jsx)(m.Round,{large:!0,onClick:()=>{y.length&&a(y,P)},children:(0,x.jsx)(g.default,{name:"send",directional:!0})})})})]})})};t.default=S},31778:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{text:t,url:n}=e;return(0,l.jsx)(i.default,{xstyle:r.button,onClick:()=>{(0,o.openExternalLink)(n)},children:t})};a(n(56720));var o=n(12591),i=a(n(1784)),l=n(85893);const r={button:{display:"p357zi0d",borderTopStartRadius:"m2gb0jvt",borderTopEndRadius:"rfxpxord",borderBottomEndRadius:"gwd8mfxi",borderBottomStartRadius:"mnh9o63b",width:"ltyqj8pj",paddingTop:"b7n2qyd4",paddingEnd:"l9g3jx6n",paddingBottom:"ekpn4oxx",paddingStart:"lyvj5e2u",maxWidth:"rkwy1u70",fontSize:"enbbiyaj",height:"ohuqqxaf",lineHeight:"erpdyial",transform:"bnt9nn9b",opacity:"axi1ht8l",backgroundColor:"ppv8chjk",color:"qiqvuef5",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",animationName:"hr4hzv79",animationFillMode:"a21kwdn3",animationDuration:"h6edk2v2",animationDelay:"fdmybch3",":hover":{backgroundColor:"jhshxy31"}}}},24391:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RingTheme=void 0,t.StatusV3ImageRing=c;var o=a(n(81109)),i=a(n(94184)),l=n(35461),r=a(n(50234)),s=n(85893);const d=n(76672).Mirrored(["STATUS_V3_PANEL","BUSINESS_CONTACT_INFO"]);t.RingTheme=d;function c(e){const{stroke:t,size:n}=e,a=(0,l.useModelValues)(e.statusV3,["unreadCount","totalCount","contact"]),c=e=>{const n=100+t;return(0,s.jsx)("circle",(0,o.default)({cx:n/2,cy:n/2,r:50,fill:"none",strokeLinecap:"round",strokeWidth:t},e))},u=(e,t,n,a)=>{let o="";for(let i=0;i<e;i++)o+=i===e-1?`${t} ${n-e*(a+t)+a} `:`${t} ${a} `;return o},f=100+t,h=a.totalCount;let p=10;const m=50*Math.PI*2;m-10*h<1&&(p=m/h/1.2);const g=(m-p*h)/h,_=m/4-p/2,C=a.contact.isMe?0:a.unreadCount,v=h-C;let x,S;if(C){const e=_+h*(p+g);let t;1!==h&&(t=u(C,g,m,p)),x=c({strokeDashoffset:e,strokeDasharray:t,className:r.default.unread})}if(v){const e=_+v*(p+g);let t;1!==h&&(t=u(v,g,m,p)),S=c({strokeDashoffset:e,strokeDasharray:t,className:r.default.read})}return(0,s.jsxs)("svg",{className:(0,i.default)({[r.default.statusV3PanelRing]:e.theme===d.STATUS_V3_PANEL,[r.default.businessContactInfoRing]:e.theme===d.BUSINESS_CONTACT_INFO}),width:n,height:n,viewBox:`0 0 ${f} ${f}`,children:[x,S]})}c.defaultProps={size:48,stroke:4,theme:d.STATUS_V3_PANEL}},5358:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StatusV3GifController=t.StatusV3CountdownController=void 0,t.setupStatusV3Controller=function(e,t){if(e){if(e.type===l.default.TYPE.IMAGE){let e=4500;return(0,o.default)(t.caption)||(e+=2e3*Math.min(t.caption.length/150,1)),new d(e)}return e.type===l.default.TYPE.VIDEO?t.isGif?new u:new r.default:new d(3e3)}if(t.type===i.MSG_TYPE.CHAT){const e=2e3+60*Math.min(t.body.length,1e3);return new d(e)}return new d(3e3)};var o=a(n(41609)),i=n(15461),l=a(n(2320)),r=a(n(25829));const s=()=>{};class d{constructor(e){this.addListeners=(e,t,n,a)=>{this._onStart=e,this._onPause=t,this._onEnded=n,this._onLoaded=a},this.removeListeners=()=>{this._onStart=void 0,this._onPause=void 0,this._onEnded=void 0,this._onLoaded=void 0},this.play=()=>{var e;if(this._timer)return void __LOG__(2)`Duplicate timer start`;this._timer=setTimeout(this._handleTimeup,this._timeout),this._start=(new Date).getTime();const t=this._onStart;t&&t(this._timeout,this._duration),null===(e=this._onLoaded)||void 0===e||e.call(this,!1,!0)},this.stop=()=>{if(this._timer){clearTimeout(this._timer),this._timer=null;const e=(new Date).getTime();this._timeout-=e-this._start;const t=this._onPause;t&&t()}else __LOG__(2)`Timer stop called on stopped timer`},this.resume=()=>{this.play()},this.pause=()=>{this.stop()},this._handleTimeup=()=>{const e=this._onEnded;e&&e()},this.mute=s,this.unmute=s,this._duration=e,this._timeout=this._duration,this._start=0}get duration(){return this._duration}}t.StatusV3CountdownController=d;const c=6e3;class u{constructor(){this.removeListeners=()=>{this._handleStart=void 0,this._handlePause=void 0,this._handleEnded=void 0,this._handleLoaded=void 0,this._videoController.removeListeners(),this._countdownController.removeListeners()},this.setVideo=(e,t)=>{this._video!==e&&(this._video=e,null!=t&&(this._duration=t),this._videoController.setVideo(e))},this._handleVideoStartHandler=()=>{const e=this._video;if(null==e)return;const t=this._handleStart,n=e.duration||this._duration,a=Math.max(3*n*1e3,c);t&&t(a-1e3*n*this._playCounter-1e3*e.currentTime,a)},this._handleVideoPauseHandler=()=>{const e=this._handlePause;e&&e()},this._handleVideoEndedHandler=()=>{const e=this._video;if(null==e)return;this._playCounter++;const t=this._handleEnded;3===this._playCounter&&(this._videoEnded=!0,this._timerEnded&&t&&t()),e.currentTime=0,this._videoEnded&&this._timerEnded||setTimeout((()=>{this._videoController.play()}),0)},this._handleVideoLoadedHandler=()=>{var e;null===(e=this._handleLoaded)||void 0===e||e.call(this,!1,!0)},this._handleTimerEndedHandler=()=>{const e=this._handleEnded;this._timerEnded=!0,e&&this._videoEnded&&e()},this.play=()=>{this._videoController.play(),this._countdownController.play()},this.stop=()=>{this._videoController.stop(),this._countdownController.stop()},this.resume=()=>{this._videoController.resume(),this._countdownController.resume()},this.pause=()=>{this._videoController.pause(),this._countdownController.pause()},this.mute=s,this.unmute=s,this._playCounter=0,this._timerEnded=!1,this._videoEnded=!1,this._videoController=new r.default,this._countdownController=new d(c),this._videoController.addListeners(this._handleVideoStartHandler,this._handleVideoPauseHandler,this._handleVideoEndedHandler,this._handleVideoLoadedHandler),this._countdownController.addListeners(void 0,void 0,this._handleTimerEndedHandler)}addListeners(e,t,n,a){this._handleStart=e,this._handlePause=t,this._handleEnded=n,this._handleLoaded=a}get duration(){var e;return Math.max(3*((null===(e=this._video)||void 0===e?void 0:e.duration)||this._duration)*1e3,c)}}t.StatusV3GifController=u},4392:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(62831)),i=a(n(94184)),l=n(67294),r=n(64551),s=a(n(57136)),d=n(85893);function c(e,t){const{onClick:n,current:a,total:c}=e,u=(0,l.useRef)(null),f=(0,l.useRef)(null),h=[];(0,l.useEffect)((()=>{__LOG__(2)`Current index: ${a}, total count: ${c}`,a>=0&&a<c||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("bad current status v3 index"))}),[]);const p=e=>{n&&n(e)},m=(e,t)=>{if(!u.current)return;const n=1e3*r.ServerProps.statusVideoMaxDuration,a=Math.min(e,n),i=Math.min(t,n);(0,o.default)(u.current,"stop"),f.current=(0,o.default)(u.current,{translateX:["0%",`-${a/i*100}%`]},{duration:a,easing:"linear"})},g=()=>{u.current&&(0,o.default)(u.current,"stop")},_=()=>{const e=f.current;return e||Promise.resolve()};(0,l.useImperativeHandle)(t,(()=>({handleStart:m,handlePause:g,handleEnded:_})));const C=100/e.total+"%";for(let t=0;t<e.total;++t){const n=(0,i.default)(s.default.foreground,{[s.default.filled]:t<e.current,[s.default.empty]:t>e.current,[s.default.active]:t===e.current}),a=(0,d.jsxs)("div",{className:s.default.wrapper,style:{width:C},onClick:()=>p(t),children:[(0,d.jsx)("div",{className:s.default.bg}),(0,d.jsx)("div",{className:s.default.mask,children:(0,d.jsx)("div",{className:n,ref:t===e.current?u:()=>{}})})]},t);h.push(a)}return(0,d.jsx)("div",{className:s.default.container,children:h})}var u=(0,l.forwardRef)(c);t.default=u},21029:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{seenCount:t,onClick:n}=e;const a=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.default,{name:"status-v3-seen",className:(0,o.default)(d.iconSeen)}),(0,s.jsx)("div",{className:(0,o.default)(d.seenCount),children:t})]}),c=n?(0,s.jsx)(r.default,{xstyle:d.container,onClick:n,children:a}):a;if(null!=t)return(0,s.jsx)("div",{className:(0,o.default)(d.container),children:c});return(0,s.jsx)(i.Spinner,{stroke:3,size:12})};var o=a(n(56720)),i=n(11054),l=a(n(23217)),r=a(n(1784)),s=n(85893);const d={iconSeen:{color:"lxozqee9"},seenCount:{marginLeft:"qddwjlxl",color:"lxozqee9"},container:{display:"p357zi0d",flexDirection:"sap93d0t",alignItems:"gndfcl4n",justifyContent:"ac2vgrno"}}},70860:(e,t,n)=>{"use strict";var a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Statusv3Snapshot=t.StatusV3MsgNotFound=t.StatusV3LoadingError=t.InvalidStatusV3Iterator=void 0;var o=a(n(48926)),i=a(n(57043)),l=a(n(44908)),r=a(n(35161)),s=n(40265),d=n(13959),c=n(4352),u=n(59387),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(47272));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}class p extends((0,s.customError)("InvalidStatusV3Iterator")){}t.InvalidStatusV3Iterator=p;class m extends((0,s.customError)("StatusV3LoadingError")){}t.StatusV3LoadingError=m;class g extends((0,s.customError)("StatusV3MsgNotFound")){}t.StatusV3MsgNotFound=g;t.Statusv3Snapshot=class{constructor(e,t){var n=this;if(this._printInfo=()=>{this.statuses.forEach((e=>{__LOG__(2)`Total count: ${e.totalCount}, unread count: ${e.unreadCount}, msgs length: ${e.msgs.length}`}))},this.getFirstUnread=(e,t,n)=>{const a=this.statuses.findIndex((t=>t.statusV3===e));if(-1!==a){const o=this.statuses[a],i=o.readMsgKeys;let l;return n?(l=o.msgs?o.msgs.findIndex((e=>n&&e.id.toString()===n.toString())):-1,l>=0?Promise.resolve({msgIdx:l,statusIdx:a}):Promise.reject(new p)):(l=o.msgs?o.msgs.findIndex((e=>!i.includes(e.id.toString()))):-1,-1===l&&e.msgs.msgLoadState.noEarlierMsgs?(l=t?0:o.msgs.length-1,Promise.resolve({msgIdx:l,statusIdx:a})):-1!==l?Promise.resolve({msgIdx:l,statusIdx:a}):0===o.unreadCount&&t&&o.msgs.length>0?Promise.resolve({msgIdx:0,statusIdx:a}):this._fetchMore(e).then((()=>this.getFirstUnread(e,t,n))).catch((e=>{throw __LOG__(3)`error while getting first unread status: ${String(e)}`,new p})))}return Promise.reject(new p)},this.hasNext=e=>{const t=this.statuses[e.statusIdx];return e.msgIdx+1<t.totalCount||e.statusIdx+1<this.statuses.length},this.getNext=e=>{const t=this.statuses[e.statusIdx],n=t.statusV3;if(e.msgIdx+1<t.totalCount&&e.msgIdx+1<t.msgs.length)return Promise.resolve({msgIdx:e.msgIdx+1,statusIdx:e.statusIdx});if(e.msgIdx+1<t.totalCount)return n.msgs.msgLoadState.noEarlierMsgs?(__LOG__(3)`Loaded ${t.msgs.length} messages with total count ${t.totalCount}, but noEarlierMsgs set`,Promise.reject(new p)):this._fetchMore(n).then((()=>this.getNext(e))).catch((t=>{if(__LOG__(3)`error while loading more status msgs: ${String(t)}`,e.statusIdx+1<this.statuses.length){const t=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(t,!0)}throw new p}));if(e.statusIdx+1<this.statuses.length){const t=this.statuses[e.statusIdx+1].statusV3;return this.getFirstUnread(t,!0)}return Promise.reject(new p)},this.hasPrev=e=>e.msgIdx>0||e.statusIdx>0,this.getPrev=e=>{if(e.msgIdx>0)return Promise.resolve({msgIdx:e.msgIdx-1,statusIdx:e.statusIdx});if(e.statusIdx>0){const t=this.statuses[e.statusIdx-1].statusV3;return this.getFirstUnread(t,!1)}return Promise.reject(new p)},this.statusAt=(e,t)=>{const n=this.statuses[e.statusIdx],a=n.statusV3;return t<n.msgs.length?Promise.resolve({msgIdx:t,statusIdx:e.statusIdx}):a.msgs.msgLoadState.noEarlierMsgs?Promise.reject(new p):this._fetchMore(a).then((()=>this.statusAt(e,t))).catch((e=>{throw __LOG__(3)`error while loading more status msgs: ${String(e)}`,new p}))},this._fetchMore=function(){var e=(0,o.default)((function*(e){if(!(yield(0,c.promiseLoop)(function(){var t=(0,o.default)((function*(t,a,o){const s=(0,d.delayMs)(f.expBackoff(o,12e4,1e3,.1));try{yield e.loadMore();const a=n.statuses.findIndex((t=>t.statusV3===e));if(-1!==a){const o=n.statuses[a],s=o.totalCount,d=o.unreadCount,c=e.msgs.getModelsArray().slice(0,s),u=c.slice(0,s-d),f=(0,r.default)(u,(e=>e.id.toString()));o.msgs=c,o.readMsgKeys=(0,l.default)((0,i.default)(o.readMsgKeys,f)),t(!0)}else{if(!(o>=4))return s;t(!1)}}catch(e){if(!(o>=4))return s;t(!1)}}));return function(){return t.apply(this,arguments)}}())))throw new m}));return function(){return e.apply(this,arguments)}}(),t){const n=e.msgs.getModelsArray().find((e=>t&&e.id.toString()===t.toString()));if(!n)throw new g;this.statuses=[{statusV3:e,totalCount:1,unreadCount:0,msgs:[n],readMsgKeys:[n.id.toString()]}]}else if(e.unreadCount>0&&!e.contact.isMe&&!e.contact.statusMute){const e=u.StatusV3Collection.getUnexpired(!0),t=[];e.forEach((e=>{if(e.contact.statusMute)return;const n=e.msgs.getModelsArray(),a=e.totalCount-e.unreadCount,o=n.slice(0,a),i=(0,r.default)(o,(e=>e.id.toString()));t.push({statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:n,readMsgKeys:i})})),this.statuses=t}else{const t=e.msgs.getModelsArray(),n=e.totalCount-e.unreadCount,a=t.slice(0,n),o=(0,r.default)(a,(e=>e.id.toString())),i=[{statusV3:e,totalCount:e.totalCount,unreadCount:e.unreadCount,msgs:t,readMsgKeys:o}];this.statuses=i}this._printInfo()}}},25829:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(64551);function o(e){return Math.min(e,a.ServerProps.statusVideoMaxDuration)}t.default=class{constructor(){this._isPlaying=!0,this.addListeners=(e,t,n,a)=>{this._handleStart=e,this._handlePause=t,this._handleEnded=n,this._handleLoaded=a},this.setVideo=e=>{this._video!==e&&(this._unsetVideo(),this._video=e,null!=e&&(e.addEventListener("playing",this._handlePlayingHandler),e.addEventListener("pause",this._handlePauseHandler),e.addEventListener("ended",this._handleEndedHandler),e.addEventListener("timeupdate",this._handleTimeUpdate),e.addEventListener("loadeddata",this._handleLoadedData)))},this._unsetVideo=()=>{const e=this._video;e&&(this.stop(),e.removeEventListener("playing",this._handlePlayingHandler),e.removeEventListener("pause",this._handlePauseHandler),e.removeEventListener("ended",this._handleEndedHandler),e.removeEventListener("timeupdate",this._handleTimeUpdate),e.removeEventListener("loadeddata",this._handleLoadedData))},this.play=()=>{var e;null===(e=this._video)||void 0===e||e.play()},this.pause=()=>{this._video&&!this._video.paused&&this._video.pause()},this.resume=()=>{this._video&&!this._isPlaying&&this._video.play()},this.stop=()=>{this._video&&!this._video.paused&&this._video.pause()},this._changeMuted=e=>{this._video&&(this._video.muted=e)},this.mute=()=>{this._changeMuted(!0)},this.unmute=()=>{this._changeMuted(!1)},this._handlePlayingHandler=()=>{this._isPlaying=!0;const e=this._video;if(null==e)return;const t=this._handleStart;if(t){const n=o(e.duration);t(1e3*(n-e.currentTime),1e3*n)}},this._handlePauseHandler=()=>{var e;this._isPlaying=!1,null===(e=this._handlePause)||void 0===e||e.call(this)},this._handleEndedHandler=()=>{var e;null===(e=this._handleEnded)||void 0===e||e.call(this)},this._handleTimeUpdate=()=>{var e;const t=null===(e=this._video)||void 0===e?void 0:e.currentTime;if(null!=t&&t>=a.ServerProps.statusVideoMaxDuration){this.stop(),this._handleEndedHandler();const e=this._video;e&&(e.removeEventListener("timeupdate",this._handleTimeUpdate),e.removeEventListener("ended",this._handleEndedHandler))}},this._handleLoadedData=()=>{const e=this._video;if(e){var t;const n=e.audioTracks&&e.audioTracks.length>0||!0===e.mozHasAudio||e.webkitAudioDecodedByteCount>0,a=e.muted;null===(t=this._handleLoaded)||void 0===t||t.call(this,n,a)}},this.removeListeners=()=>{this.stop(),this._handleStart=void 0,this._handlePause=void 0,this._handleEnded=void 0}}get duration(){return null==this._video?0:1e3*o(this._video.duration)}}},39311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.getSelection().removeAllRanges();const t=document.getElementById(e),n=document.createRange();t&&n.selectNode(t),window.getSelection().addRange(n);try{const e=document.execCommand("copy");return window.getSelection().removeAllRanges(),e}catch(e){return!1}}},10901:(e,t,n)=>{e.exports=n.p+"bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf"},95941:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={coverPhoto:"_3bmNw",isEditable:"_1k-Tj",avatar:"_1KIoW",noStatusBorder:"kNRox",hasStatusBorder:"_8N7c7"}},97449:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={cartIcon:"_3Nx1E",inheritColor:"_1lxeQ"}},65753:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={labelRow:"_49vG",standaloneLabelRow:"_2l3_Y",labelContainer:"_1Nfyf",standaloneLabelContainer:"DENbs"}},52892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={chevron:"_2iDVt",catalogEntryButton:"_2m9wT",shopsLogo:"_31fGS"}},71429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={prompt:"x-vzn"}},34079:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={linkIcon:"_1FiUT",inheritColor:"NwJSN"}},24100:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={linkContainer:"_39Tm3",activeLink:"_3YkDH"}},57086:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={addItemButton:"BmLy_",themeInList:"_3ZIW8",themeCollections:"NFwOH",themeDefault:"_2XlPd"}},49437:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={pendingBanner:"_26aYR",iconContainerPending:"L-2H5",iconContainerRejected:"_39dOD",rejectedBanner:"_1tqTc",rejectedBannerWithAppeal:"RHd_X"}},71704:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"ycpXx",list:"iQNxs"}},27897:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={list:"_3ShRn",addItemsNotice:"_31dcv"}},32067:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={collectionListItem:"nIB_q",collectionName:"uK8-H",seeAllLink:"P0xwG",reviewStateRejected:"_3BNoL"}},52387:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={body:"iEmhs",loadingContainer:"_6Jq-L",text:"_1t5Y4",loadingText:"_2ZaWw",shiftUp:"_2DwjK",availabilityBanner:"_39YKr"}},21540:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={buttonContainer:"_1uea4",button:"_3dAt6",addToCartButton:"NeLXF",addToCartIcon:"ZfREZ",addToCartIconDisabled:"_16avf",addToCartContainer:"_3L8a9",name:"_2_mFa",price:"_15XLs",originalPrice:"_1oNAr",description:"_3ROY2",more:"_1dlIm"}},49762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={productImage:"fkslc",productImageContainer:"_18n4q",productThumb:"IO4T6",productThumbContainer:"ime-i",prompt:"_3OFgQ"}},70270:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"_2tWjM",list:"_3XbAc"}},72940:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={header:"_16mlH",photo:"_21sHs",text:"_2lk6f",name:"pTNRM",description:"_2GV6F",spinner:"O1bTA",img:"_3i1KT"}},30836:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={imageCarouselContainer:"_3lMwD"}},11967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={buttons:"_1_Ctk",button:"_23YI8"}},48246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={section:"_2_Qk3",reasonList:"_3671k",label:"_1mEAu",input:"Ot7Tv",buttons:"_1HIH3"}},42684:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={notifyName:"_3Pmbe"}},41323:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={separator:"Wt3HP",block:"_11V85"}},55140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={carousel:"alksS",contentContainer:"OkAlG",slidesContainer:"_1w5W1",loaded:"j1J2j",fadeIn:"_2QkLV",spinnerContainer:"_1kDDe",spinner:"_3j4fM"}},57246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={slide:"_2MjCA",slideInnerContainer:"_2cG76",image:"ubkU5"}},70764:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={canvasComponent:"_1OaQb",canvasEmpty:"_3jEqW",canvasSecondRow:"_13Jdf",canvasFirst:"az8Pk",more:"_2e4dR",container:"_1TLrW",justifySpaceBetween:"_2UyBh",galleryEmpty:"_160BB",drawer:"v7KVf",drawerBody:"_1QjIY",themeChatInfo:"_1Y056"}},59271:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={section:"_17dED",control:"_3T0RE"}},31907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={description:"_1PJIk"}},22235:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={actionText:"-KBcF"}},37295:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={icon:"_3ovSZ"}},555:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={icon:"_2I7Gg"}},73858:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_2QzJd",disabled:"_37VyS",containerNoIcon:"_1EaD-",containerListAligned:"_1I4H7",icon:"_13qOF",danger:"_1O1hL",success:"x8B-w",bodyContainer:"_36Lzk",body:"Qy5WW",themeChatInfo:"_3U46U"}},67978:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={mediaPanelTools:"f3Dup",profileThumb:"_2xUs5",profileContainer:"Cq6XJ",media:"_1_TZb",profileViewer:"_3OWRM",profileViewerImg:"_2hH_e",container:"_9-YHG","media-viewer-animate":"_7DTuk",mediaViewerAnimate:"_7DTuk",headerContainer:"_1U_13"}},60654:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={icon:"woEzZ"}},80568:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={playerWrapper:"eRZop",mediaViewer:"_26Q83",mediaStateControls:"_1QgJ4",playerBackground:"_1NZyY",media:"_1cMSa",mediaCaption:"_3mK4N",progressBackdrop:"_2x6Y5",progressBarBackdropNarrow:"_1XJW2",profile:"_1DNOU",nonClickProfile:"_1VRZa",profileNarrow:"ib1vZ",verified:"_2iJLu",icon:"t9Exe",measuringProfile:"_2AJhM",profileMac:"_2_AIZ",msgInfo:"_20zpf",msgInfoNameWrapper:"_1tRGW",msgInfoName:"_3B-fQ",msgInfoNamePSA:"_3x4uR",msgInfoNamePsa:"_3x4uR",timestamp:"_5SjOa",playerContent:"_1xAJD",v3Image:"_2ATdo",actionLink:"_27-nF",v3Video:"EdAF7",statusPanelPlayerContent:"_2Ks9x",statusThumbnailPlayerContent:"_2RQ_J",loading:"_3aA3i",text:"_3KpnX",textLarge:"i-2rU",textMedium:"_2uTr8",textSmall:"_4WvQQ",font_1:"_2fG2M",font1:"_2fG2M",font_2:"_2MDaZ",font2:"_2MDaZ",font_3:"_1erpH",font3:"_1erpH",font_5:"Suusu",font5:"Suusu",unknown:"_3Rxrh",seen:"_3K-VL",caption:"o6dEt",playerAvatar:"_2rzx9",textThumbnailPlayerContent:"_1V-um",statusMediaControls:"SU2X1"}},43693:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_1ufTj",inputContainer:"_1rO5S",btnContainer:"_3KRZ3",btnPosition:"D6yuB"}},50234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={statusV3PanelRing:"cFfKt",businessContactInfoRing:"_3EL6s",read:"_3tgk6",unread:"_1min4"}},57136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const a={container:"_3b17O",wrapper:"sZBni",mask:"_3CRhO",bg:"_3r7AV",foreground:"_3f8oh",filled:"_3t0iC",empty:"_1A2HZ",active:"_2gskD"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_high_priority_components~lazy_loaded_low_priority_components.d07eecf63d77256db0e6.js.map
