/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[1761],{589332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){if(null==e)return[];if(Array.isArray(e))return[...e];return[e]}},31761:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(348926)),l=r(n(81109)),i=r(n(288306)),a=n(72696),u=r(n(873969)),d=n(919175),s=n(778945),c=n(542358),f=n(713464),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(r,l,i):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(27578)),p=n(900316),g=n(486392),h=n(114850),v=r(n(930440)),b=n(411597),y=n(25968),x=n(699411),S=n(100149),C=n(973176),j=n(238977),M=n(706197),w=r(n(94530)),I=n(873994),_=n(665195),R=r(n(454903)),P=n(832545),O=n(392632),k=n(459857),T=r(n(844453)),A=n(130756),D=n(667294),E=r(n(829686)),L=r(n(637660)),B=r(n(895851)),q=n(785893);function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}const N=n(76672).Mirrored(["CATALOG_PRODUCTS_FORM","CUSTOM_ITEM_FORM","ORDER_SUMMARY","ADDITIONAL_CHARGES_FORM"]),W=Array.from(N.members()),H=(0,i.default)((()=>m.currencyForCountryShortcode((0,g.getCountryShortcodeByPhone)((0,k.getMeUser)().user))));function z(e,t){var n,r;let{entryPoint:i,order:m,chat:g,onBack:F,onSend:z,onCancel:X}=e;const U=(0,B.default)(),[G,Y]=(0,D.useState)(N.ORDER_SUMMARY),[V,Q]=(0,D.useState)(null),[K,$]=(0,D.useState)(!1),[Z,J]=(0,D.useState)((()=>function(e){if(!e)return[];const t={isCustomItem:!1,isQuantitySet:!0},n=e.products.map((e=>new R.default((0,l.default)((0,l.default)({},t),e))));return(0,_.notifyIfAnyProductMissesPrice)(n,{}),n}(m))),[ee,te]=(0,D.useState)({}),[ne,re]=(0,D.useState)(null),oe=(0,L.default)((()=>new v.default([],(e=>e.id.toString())))).current,le=f.CatalogCollection.get((0,k.getMeUser)()),ie=(e,t)=>{te((n=>(0,l.default)((0,l.default)({},n),{},{[t]:e})))},ae=(0,D.useMemo)((()=>Z.reduce(((e,t)=>{var n,r;return e+(null!==(n=null!==(r=t.price)&&void 0!==r?r:ee[t.id])&&void 0!==n?n:0)*t.quantity}),0)),[Z,ee]),ue=(0,j.calculateFlatAmounts)({orderSubtotal:ae/j.DEFAULT_OFFSET,discountType:(null==ne?void 0:ne.discountType)||"",discountText:(null==ne?void 0:ne.discountText)||"",taxType:(null==ne?void 0:ne.taxType)||"",taxText:(null==ne?void 0:ne.taxText)||"",shippingText:(null==ne?void 0:ne.shippingText)||""}),de=(0,c.hasCatalog)(s.BusinessProfileCollection.get((0,k.getMaybeMeUser)())),se=H(),ce=(0,a.getOrdersExpansionAllowedCurrencies)(),fe=null!==(n=null===(r=Z.at(0))||void 0===r?void 0:r.currency)&&void 0!==n?n:se,me=()=>{const e=Z.some((e=>ee[e.id]));new I.OrderDetailsActionsSmbWamEvent({orderDetailsCreationAction:A.ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_DETAILS,actionCategory:String(w.default.ORDER_DETAILS_CREATION),hasCatalog:de,hasAddedPrice:e,orderDetailEntryPoint:String(i)}).commit();const t=null!=m?m:x.OrderCollection.addOrder();t.products=Z.map((e=>{var t,n;return e.price=null!==(t=e.price)&&void 0!==t?t:ee[e.id],e.currency=null!==(n=e.currency)&&void 0!==n?n:se,e})),t.currency=fe,t.subtotal=ae,t.triggerItemCollectionUpdate(),(0,d.sendOrderDetailsMessageAsMerchant)({order:t,chat:g,orderNote:"",offset:j.DEFAULT_OFFSET,total:ue.total,discount:ue.discount,shipping:ue.shipping,tax:ue.tax}),null==z||z(),p.DrawerManager.closeDrawerRight()},pe=(0,E.default)((()=>{F?F():(p.DrawerManager.closeDrawerRight(),null==X||X())})),ge=()=>{!function(e,t,n){return e?t.length!==e.products.length||t.some(((t,r)=>{var o,l;return t.id!==e.products[r].id||t.quantity!==e.products[r].quantity||(null!==(o=null!==(l=t.price)&&void 0!==l?l:n[t.id])&&void 0!==o?o:null)!==e.products[r].price})):t.length>0}(m,Z,ee)?pe():h.ModalManager.open((0,q.jsx)(S.ConfirmDiscardModal,{onOK:pe}))},he=e=>{U.aborted||(!0!==e&&(0,_.notifyIfAnyProductMissesPrice)(Z,ee),Y(N.ORDER_SUMMARY))},ve=()=>{Y(N.CATALOG_PRODUCTS_FORM)},be=(e,t)=>{const n=Number.isInteger(e)?e:null;Q(n),$(!0===t),Y(null==n||Z[n].isCustomItem?N.CUSTOM_ITEM_FORM:N.CATALOG_PRODUCTS_FORM)},ye=()=>{Y(N.ADDITIONAL_CHARGES_FORM)},xe=(e,t)=>{const n=e.length,r=e.reduce(((e,t,n)=>e.set(t.id,n)),new Map);return[...t].sort(((e,t)=>{var o,l;return(null!==(o=r.get(e.id))&&void 0!==o?o:n)-(null!==(l=r.get(t.id))&&void 0!==l?l:n)}))},Se=e=>e.map((e=>{var t;return new R.default({id:e.id,name:e.name,price:e.priceAmount1000,thumbnailUrl:null===(t=e.getPreviewImage())||void 0===t?void 0:t.mediaUrl,quantity:Number(oe.getVal(e)),isCustomItem:!1,isQuantitySet:!0})})),Ce=(e,t,n)=>{const r=null==le?void 0:le.productCollection.getProductModels(),o=new Set(t.map((e=>{let{id:t}=e;return t}))),l=new Set(null==r?void 0:r.map((e=>{let{id:t}=e;return t})));return n.reduce(((e,t)=>{const n=o.has(t.id),r=l.has(t.id);return n||r?e:e.concat(t)}),e)},je=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];de&&J((t=>{const n=oe.getSelected(),r=Se(n),o=Ce(r,n,t);return e&&(0,_.notifyIfAnyProductMissesPrice)(o,ee),xe(t,o)}))},Me=e=>oe.getSelected().find((t=>{let{id:n}=t;return n===e.id})),we=(e,t)=>{oe.setVal(e,t)},Ie=e=>{if(!Z[e].isCustomItem){const t=Me(Z[e]);t&&we(t,0)}J((t=>[...t.slice(0,e),...t.slice(e+1)]))},_e=(e,t)=>{if(Z[e].isCustomItem)((e,t)=>{t?J((n=>{const r=[...n];return r[e].quantity=t,r[e].isQuantitySet=!0,r})):Ie(e)})(e,t);else{const n=Me(Z[e]);n&&we(n,t),je(!1)}},Re=function(){var e=(0,o.default)((function*(e){var t;let n,r=null==le?void 0:le.productCollection.getProductModels(),o=(null===(t=r)||void 0===t?void 0:t.length)||0,l=0;for(;(!n||!oe.isSelected(n))&&l<o;){var i,a;yield f.CatalogCollection.update((0,k.getMaybeMeUser)()),l=o,r=null==le?void 0:le.productCollection.getProductModels(),n=null===(i=r)||void 0===i?void 0:i.find((t=>t.id===e.id)),n&&we(n,e.quantity),o=null===(a=r)||void 0===a?void 0:a.length}}));return function(){return e.apply(this,arguments)}}();(0,D.useEffect)((()=>{(()=>{if(!m)return[];const e=null==le?void 0:le.productCollection.getProductModels();for(const t of m.products){const n=null==e?void 0:e.find((e=>e.id===t.id));n?we(n,t.quantity):Re(t)}})()}),[]);const Pe=W.indexOf(G);return G?(0,q.jsx)(T.default,{ref:t,children:(0,q.jsx)(O.UIE,{displayName:`FlowDrawer${Pe}`,escapable:!0,children:(0,q.jsx)("div",{children:(e=>{switch(e){case N.CATALOG_PRODUCTS_FORM:return(0,q.jsx)(y.OrderCatalogFormDrawer,{currency:se,productsSelection:oe,orderItems:Z,priceMap:ee,onBack:he,onAddProducts:()=>{je(),he(!0)},onAddCustomItem:()=>{be(null,!0)},onProductSelectionChange:we});case N.CUSTOM_ITEM_FORM:return(0,q.jsx)(C.CustomItemFormDrawer,{currency:fe,eligibleCurrencies:0===Z.length&&0===oe.getSelected().length?ce:[],onBack:K?ve:he,onSaveCustomItem:e=>{je(),(e=>{let{name:t,priceAmount1000:n,quantity:r,isQuantitySet:o,currency:l}=e;const i=`${(0,M.getCustomItemIdPrefix)()}-${(0,u.default)()}`;J((e=>xe(e,[...e,new R.default({id:i,name:t,price:n,quantity:null!=r?r:1,isCustomItem:!0,isQuantitySet:o,currency:l})])))})(e),he()},customItem:Z[Number.isInteger(V)?Number(V):-1]});case N.ORDER_SUMMARY:return(0,q.jsx)(P.OrderSummaryDrawer,{chat:g,currency:fe,priceMap:ee,orderItems:Z,orderSubtotal:ae,additionalCharges:ne,flatAmounts:ue,onPriceChange:ie,onBack:ge,onSubmit:me,onAddItem:de&&(0,a.orderDetailsFromCatalogEnabled)()?ve:be,onAdditionalCharges:ye,onDeleteItem:Ie,onItemQuantityChange:_e});case N.ADDITIONAL_CHARGES_FORM:return(0,q.jsx)(b.AdditionalChargesFormDrawer,{currency:fe,additionalCharges:ne,subtotal:ae,onBack:he,onApply:e=>{re((t=>(0,l.default)((0,l.default)({},t),e))),he()}})}})(G)})},Pe)}):null}var X=(0,D.forwardRef)(z);t.default=X},702895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,a.jsx)(r.ConfirmPopup,{testid:"order-expansion-different-order-currency-title",title:i.fbt._("Orders can't have items with different currencies",null,{hk:"19WokI"}),onOK:()=>{o.ModalManager.close()},children:(0,a.jsx)(l.WDSTextSectionTitle,{testid:"order-expansion-different-order-currency-description",children:i.fbt._("Make sure all items in your order have the same currency.",null,{hk:"213L8w"})})})};var r=n(103440),o=n(114850),l=n(180519),i=n(548360),a=n(785893)},411597:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesFormDrawer=function(e){let{currency:t,subtotal:n,additionalCharges:r,onBack:f,onApply:C}=e;const j=(null==r?void 0:r.discountText)||"",[M,w]=(0,v.useState)(j),I=(null==r?void 0:r.taxText)||"",[_,R]=(0,v.useState)(I),P=(null==r?void 0:r.shippingText)||"",[O,k]=(0,v.useState)(P),T=(null==r?void 0:r.discountType)||x,[A,D]=(0,v.useState)(T),E=(null==r?void 0:r.taxType)||S,[L,B]=(0,v.useState)(E),[q,F]=(0,v.useState)(!1),[N,W]=(0,v.useState)(!1),H=(0,v.useMemo)((()=>(0,c.additionalChargeErrorHandler)({currency:t,value:O})),[t,O]),z=[q,N,H].some((e=>e));return(0,y.jsxs)(l.default,{children:[(0,y.jsx)(i.DrawerHeader,{title:h.fbt._("Add discount, shipping or tax",null,{hk:"nPDUK"}),type:i.DRAWER_HEADER_TYPE.SMALL,onBack:j!==M||I!==_||P!==O||T!==A||E!==L?()=>{u.ModalManager.open((0,y.jsx)(s.ConfirmDiscardModal,{onOK:f}))}:f,focusBackOrCancel:!0}),(0,y.jsxs)(a.default,{className:(0,b.default)(g.uiPadding.all16),children:[(0,y.jsx)(d.AdditionalChargesTextInput,{text:M,testid:"additional-charges-discount-input",label:h.fbt._("Discount",null,{hk:"3acZrp"}),symbol:A,currency:t,priceValue:n,setText:w,setError:F,setSymbol:D}),(0,y.jsx)(p.RichTextField,{value:O,testid:"additional-charges-shipping-input",placeholder:h.fbt._("Shipping ({currency_symbol})",[h.fbt._param("currency_symbol",(0,o.formatAmount1000ToParts)(t,0).symbol)],{hk:"H2WDY"}),onChange:e=>k(e.text),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:H}),(0,y.jsx)(d.AdditionalChargesTextInput,{text:_,testid:"additional-charges-tax-input",label:h.fbt._("Tax",null,{hk:"2r5wzT"}),symbol:L,currency:t,priceValue:n,setText:R,setError:W,setSymbol:B}),(0,y.jsx)(m.OrderApplyChangesButton,{disabled:z,testid:"apply-additional-costs-button",title:h.fbt._("Apply",null,{hk:"3E5Tq7"}),onClick:()=>C({discountText:M,taxText:_,shippingText:O,discountType:A,taxType:L})})]})]})};var o=n(27578),l=r(n(908081)),i=n(626194),a=r(n(969358)),u=n(114850),d=n(633571),s=n(100149),c=n(353950),f=n(238977),m=n(208160),p=n(202391),g=n(676345),h=n(548360),v=n(667294),b=r(n(156720)),y=n(785893);const x=f.PERCENTAGE_SYMBOL,S=f.PERCENTAGE_SYMBOL},633571:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesTextInput=function(e){let{text:t,label:n,symbol:r,testid:p,currency:g,priceValue:h,setText:v,setError:b,setSymbol:y}=e;const x=(0,d.useMemo)((()=>{const e=(0,l.additionalChargeErrorHandler)({label:n,currency:g,fieldType:r,maxFlatValue:h/i.DEFAULT_OFFSET,enablePercentValueCheck:!0,value:t});return b(Boolean(e)),e}),[t,n,r,g,b,h]);return(0,c.jsxs)("div",{className:(0,s.default)(f),children:[(0,c.jsx)(a.RichTextField,{value:t,testid:p,placeholder:u.fbt._("{input_label} ({currency_or_percentage})",[u.fbt._param("input_label",n),u.fbt._param("currency_or_percentage",r)],{hk:"vf1Ko"}),onChange:e=>v(e.text),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:x}),(0,c.jsx)("div",{className:(0,s.default)(m),children:(0,c.jsx)(o.OrderDetailAmountTypeSelector,{currency:g,value:r,onChange:e=>{let{value:t}=e;return y(t)}})})]})};var o=n(660516),l=n(353950),i=n(238977),a=n(202391),u=n(548360),d=n(667294),s=r(n(156720)),c=n(785893);const f={position:"g0rxnol2"},m={position:"lhggkp7q",end:"ebjesfe0",zIndex:"mb8var44",top:"agjvi7sf"}},25968:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCatalogFormDrawer=function(e){let{currency:t,productsSelection:n,orderItems:r,priceMap:I,onBack:_,onAddProducts:R,onAddCustomItem:P,onProductSelectionChange:O}=e;const[k,T]=(0,x.useState)(!1),A=(0,C.default)(),D=(0,j.default)((()=>new s.default)),E=n.getSelected().reduce(((e,t)=>{var r,o;return e+(null!==(r=null!==(o=t.priceAmount1000)&&void 0!==o?o:I[t.id.toString()])&&void 0!==r?r:0)*Number(n.getVal(t))}),0),L=r.filter((e=>e.isCustomItem)).reduce(((e,t)=>e+t.price*t.quantity),0);return(0,M.jsxs)(i.default,{children:[(0,M.jsx)(u.DrawerHeader,{title:y.fbt._("Add items",null,{hk:"2U1Vru"}),type:u.DRAWER_HEADER_TYPE.SMALL,onBack:k?()=>{c.ModalManager.open((0,M.jsx)(p.ConfirmDiscardModal,{onOK:_}))}:_,focusBackOrCancel:!0}),(0,M.jsxs)(a.default,{children:[(0,M.jsxs)(d.default,{theme:"expand-height",xstyle:w.drawerSection,children:[(0,o.orderDetailsCustomItemEnabled)()&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(f.AddOrderItem,{title:y.fbt._("Create new item",null,{hk:"2GmSAs"}),onClick:P}),(0,M.jsx)("hr",{className:(0,S.default)(w.catalogBar,b.uiMargin.vert0)})]}),(0,M.jsx)("p",{className:(0,S.default)(w.catalogTitleText,b.uiPadding.start16,b.uiPadding.vert10),children:y.fbt._("Catalog items",null,{hk:"4chzUe"})}),(0,M.jsx)(m.default,{className:(0,S.default)(w.catalogProductsList),productsSelection:n,orderItems:r,flatListController:D.current,onProductSelectChange:function(e,n){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,h.shouldPreventCatalogProductSelection)(r,t)?c.ModalManager.open((0,M.jsx)(g.default,{})):(O(e,n),o||k||T(!0),A())}})]}),(0,M.jsx)(v.OrderTotalPrice,{xstyle:[b.uiPadding.all16,b.uiMargin.top10],visible:!0,disabled:!k,totalPrice:(0,l.formatAmount1000)(t,E+L),testid:"save-products-button",onConfirm:R,title:y.fbt._("Subtotal",null,{hk:"4ciFet"}),confirmTitle:y.fbt._("Add to Order",null,{hk:"2SYeoP"})})]})]})};var o=n(72696),l=n(27578),i=r(n(908081)),a=r(n(324093)),u=n(626194),d=r(n(969358)),s=r(n(570834)),c=n(114850),f=n(359162),m=r(n(881238)),p=n(100149),g=r(n(702895)),h=n(272493),v=n(208160),b=n(676345),y=n(548360),x=n(667294),S=r(n(156720)),C=r(n(969651)),j=r(n(637660)),M=n(785893);const w={catalogTitleText:{fontWeight:"m1e7cby3",lineHeight:"tkq7s68q",fontSize:"ovllcyds",color:"q70jrbp7"},catalogBar:{width:"ln8gz9je",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv",borderTop:"gq6acybq"},catalogProductsList:{overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk"},drawerSection:{display:"p357zi0d",overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexDirection:"f8m0rgwh"}}},504234:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogFormProduct=function(e){let{product:t,productsSelection:n,onProductSelectChange:r}=e;const d=Number(n.getVal(t))||0,[s,c]=(0,a.useState)(!1);return(0,u.jsx)("div",{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,u.jsx)(l.default,{product:t,detail:(s||n.isSelected(t))&&(0,u.jsx)(o.default,{quantity:d,quantityTitle:i.fbt._("Items in order",null,{hk:"35Mpfd"}),isCollapsed:!s,onAddOneClick:()=>r(t,d+1),onRemoveOneClick:()=>r(t,d-1)}),managedFocus:!0,theme:"product-add-to-order"})})};var o=r(n(763879)),l=r(n(698690)),i=n(548360),a=n(667294),u=n(785893)},881238:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,productsSelection:n,orderItems:r,flatListController:x,onProductSelectChange:S}=e;const C=(0,b.default)(),j=(0,g.default)(),M=(0,p.default)(j,100),w=l.CatalogCollection.assertGet((0,f.getMaybeMeUser)()),[I,_]=(0,m.useState)(!1),[R,P]=(0,m.useState)(0),[O,k]=(0,m.useState)(!1),T=()=>{const e=new Set(r.map((e=>{let{id:t}=e;return t})));return w.productCollection.getProductModels().filter((t=>!e.has(t.id))).map((e=>({itemKey:e.id.toString(),product:e})))},A=e=>{e.forEach((e=>{const t=r.find((t=>{let{id:n}=t;return n===e.product.id}));void 0!==t&&S(e.product,Number(t.quantity),!0)}))},D=function(){var e=(0,o.default)((function*(){if(O)return;if(!w.afterCursor)return;const e=w.productCollection.getProductModels().length;_(!0),P(e);try{const t=yield l.CatalogCollection.update((0,f.getMaybeMeUser)());if(C.aborted)return;_(!1);const n=(Array.isArray(t)?t[0]:t).productCollection.getProductModels().length;if(A(T().slice(e)),n===R&&k(!0),e*c.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight)return D()}catch(e){_(!1),k(!0)}}));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((()=>{A(T()),D()}),[]),(0,h.useListener)(w.productCollection,"add",M);const E=(0,v.default)((e=>{I||e.scrollTop+d.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&D()}),100);return(0,y.jsxs)(a.default,{className:t,flatListControllers:[x],onScroll:e=>{e.currentTarget&&E(e.currentTarget)},children:[(0,y.jsx)(i.FlatList,{flatListController:x,direction:"vertical",forceConsistentRenderCount:!1,data:T(),renderItem:e=>{let{product:t}=e;return(0,y.jsx)(s.CatalogFormProduct,{product:t,productsSelection:n,onProductSelectChange:S})},defaultItemHeight:c.PRODUCT_LIST_ITEM_HEIGHT}),I&&(0,y.jsx)(u.default,{})]})};var o=r(n(348926)),l=n(713464),i=n(512938),a=r(n(964223)),u=r(n(495012)),d=n(914368),s=n(504234),c=n(899841),f=n(459857),m=n(667294),p=r(n(710629)),g=r(n(969651)),h=n(808446),v=r(n(286481)),b=r(n(895851)),y=n(785893)},100149:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmDiscardModal=function(e){let{onOK:t}=e;return(0,a.jsx)(r.ConfirmPopup,{title:i.fbt._("Discard changes?",null,{hk:"1SaEaC"}),onOK:()=>{o.ModalManager.close(),t()},okText:i.fbt._("Discard",null,{hk:"3etb6C"}),onCancel:()=>o.ModalManager.close(),children:(0,a.jsx)(l.TextDiv,{theme:"muted",children:i.fbt._("If you close this, your draft will be discarded.",null,{hk:"4G5DVj"})})})};var r=n(103440),o=n(114850),l=n(180519),i=n(548360),a=n(785893)},973176:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomItemFormDrawer=function(e){var t,n;let{currency:r,customItem:o,onBack:w,onSaveCustomItem:I,eligibleCurrencies:_}=e;const[R,P]=(0,S.useState)(null==o?void 0:o.name),[O,k]=(0,S.useState)(Number.isInteger(null==o?void 0:o.price)?String(Number(null==o?void 0:o.price)/1e3):null),[T,A]=(0,S.useState)(null==o?void 0:o.price),[D,E]=(0,S.useState)((null==o?void 0:o.isQuantitySet)?o.quantity:null),[L,B]=(0,S.useState)((null==o?void 0:o.isQuantitySet)?String(o.quantity):null),[q,F]=(0,S.useState)(null!==(t=null==o?void 0:o.currency)&&void 0!==t?t:r),N=(0,S.useMemo)((()=>function(e){if(null==e)return"";const t=String(x.fbt._("Add a title",null,{hk:"7Lm6B"}));return""===e.trim()?t:""}(R)),[R]),W=(0,S.useMemo)((()=>function(e,t){if(null==t)return"";const n=String(x.fbt._("Enter a valid price",null,{hk:"4yb1Sg"}));return""!==t.trim()&&(0,l.validatePriceString)(e,t,g.MIN_PRICE,g.MAX_PRICE)?"":n}(r,O)),[r,O]),H=(0,S.useMemo)((()=>function(e){if(null==e)return"";const t=String(x.fbt._("Enter a valid quantity",null,{hk:"u6SoG"}));return M(Number(e))?"":t}(L)),[L]),z=function(e,t,n,r){const o=(null==e?void 0:e.isQuantitySet)?Number(r)!==e.quantity:null!=r;return(null==e?void 0:e.name)!==t||(null==e?void 0:e.price)!==n||o}(o,R,T,L);return(0,j.jsxs)(i.default,{children:[(0,j.jsx)(u.DrawerHeader,{title:o?x.fbt._("Update item",null,{hk:"1TL07p"}):x.fbt._("Create new item",null,{hk:"4xRwlm"}),type:u.DRAWER_HEADER_TYPE.SMALL,onBack:z?()=>{f.ModalManager.open((0,j.jsx)(m.ConfirmDiscardModal,{onOK:w}))}:w,focusBackOrCancel:!0}),(0,j.jsx)(a.default,{children:(0,j.jsxs)(d.default,{className:(0,C.default)(v.uiPadding.all16),children:[(0,j.jsx)(h.RichTextField,{testid:"custom-item-edit-name-input",value:R,placeholder:x.fbt._("Item name",null,{hk:"1TMRR7"}),onChange:e=>{P(e.text)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:N}),(0,j.jsxs)(s.FlexRow,{children:[(0,j.jsx)(c.default,{grow:4,children:(0,j.jsx)(h.RichTextField,{testid:"custom-item-edit-price-input",value:O,placeholder:x.fbt._("Price {symbol}",[x.fbt._param("symbol",(0,l.formatAmount1000ToParts)(q,0).symbol)],{hk:"3jcGcb"}),onChange:e=>{const t=e.text,n=(0,l.valueFromString)(r,t);A(n),k(t)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:W})}),(null!==(n=null==_?void 0:_.length)&&void 0!==n?n:0)>1&&(0,j.jsx)(c.default,{testid:"custom-item-edit-currency-flex-item",children:(0,j.jsx)(y.Select,{ariaRoleDescription:"Currency selection in custom order item screen",initialSelection:q,width:150,onChange:e=>{F(e)},children:(null!=_?_:[]).map((e=>(0,j.jsx)(b.SelectMenuItem,{optionId:e,primary:`${e} ${(0,l.formatLocalSymbol)(e)}`},e)))})})]}),(0,j.jsx)(h.RichTextField,{testid:"custom-item-edit-quantity-input",value:L,placeholder:x.fbt._("Quantity (Optional)",null,{hk:"4swiuO"}),onChange:e=>{const t=e.text;let n=""===t?null:Number(t);M(n)||(n=null),E(n),B(""===t?null:t)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:H}),(0,j.jsx)(p.OrderApplyChangesButton,{title:o?x.fbt._("Update Order",null,{hk:"HjU1X"}):x.fbt._("Add to Order",null,{hk:"3p1U18"}),disabled:null==R||null==O||!(!o||z)||[N,W,H].some((e=>e)),onClick:()=>{const e={name:R,priceAmount1000:+T,quantity:D,isQuantitySet:Number.isInteger(D),currency:q};I(e)},testid:"save-custom-item-button"})]})})]})};var o=n(753958),l=n(27578),i=r(n(908081)),a=r(n(324093)),u=n(626194),d=r(n(969358)),s=n(690495),c=r(n(469733)),f=n(114850),m=n(100149),p=n(208160),g=n(517086),h=n(202391),v=n(676345),b=n(913290),y=n(825548),x=n(548360),S=n(667294),C=r(n(156720)),j=n(785893);function M(e){return Number.isInteger(e)&&+e>0&&+e<=o.CART_ITEM_MAX_QUANTITY}},660516:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:n,currency:r}=e;const s=o.formatLocalSymbol(r),c=a.fbt._("Select amount type",null,{hk:"1xddkG"}),f=[{id:"percentage",label:a.fbt._("by Percentage ({percentage-symbol})",[a.fbt._param("percentage-symbol",l.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:l.PERCENTAGE_SYMBOL},{id:"flat-amount",label:a.fbt._("by Flat amount ({currency-symbol})",[a.fbt._param("currency-symbol",s)],{hk:"duPhj"}),value:s}],m=(0,u.useMemo)((()=>f.findIndex((e=>e.value===t))),[]);return(0,d.jsx)(i.default,{"aria-label":c,options:f,defaultIndex:m,onChange:n})};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(r,l,i):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(27578)),l=n(238977),i=r(n(754493)),a=n(548360),u=n(667294),d=n(785893);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},754493:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:n,onChange:r,"aria-label":p}=e;const g=(0,s.useRef)(null),[h,v]=(0,s.useState)(!1),[b,y]=(0,s.useState)(t),x=n.map(((e,t)=>{const{id:n,label:o}=e;return(0,f.jsx)(i.DropdownItem,{testid:`mi-${n}`,action:()=>{r(e),y(t)},children:(0,f.jsx)("div",{className:(0,c.default)(m),role:"button","aria-label":o,children:t===b?(0,f.jsx)(a.TextSpan,{weight:"bold",children:o}):o})},n)}));return(0,f.jsxs)("div",{ref:g,children:[(0,f.jsx)(o.default,{"aria-label":p,PostfixIcon:l.DownIcon,label:n[b].value,onClick:()=>v((e=>!e))}),h&&g.current&&(0,f.jsx)(u.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>v(!1),children:(0,f.jsx)(d.default,{contextMenu:{menu:x,anchor:g.current}})})]})};var o=r(n(407284)),l=n(820765),i=n(675085),a=n(180519),u=n(392632),d=r(n(37875)),s=n(667294),c=r(n(156720)),f=n(785893);const m={boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"}},665195:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMsgFromProducts=a,t.notifyIfAnyProductMissesPrice=void 0;var r=n(625786),o=n(390737),l=n(548360),i=n(785893);function a(e){const t=e.length;return 0===t?"":1===t?l.fbt._("Enter a price for {first-product-name}",[l.fbt._param("first-product-name",e[0])],{hk:"Lf39K"}):2===t?l.fbt._("Enter prices for {first-product-name} and {second-product-name}",[l.fbt._param("first-product-name",e[0]),l.fbt._param("second-product-name",e[1])],{hk:"1uLet0"}):l.fbt._({"*":"Enter prices for {first-product-name}, {second-product-name} and {other-items} other items",_1:"Enter prices for {first-product-name}, {second-product-name} and 1 other item"},[l.fbt._plural(t-2,"other-items"),l.fbt._param("first-product-name",e[0]),l.fbt._param("second-product-name",e[1])],{hk:"1Crsuq"})}t.notifyIfAnyProductMissesPrice=(e,t)=>{const n=a(e.reduce(((e,n)=>{var r;const o=null!==(r=n.price)&&void 0!==r?r:t[n.id];return Number.isInteger(o)||e.push(n.name||""),e}),[]));n&&o.ToastManager.open((0,i.jsx)(r.Toast,{duration:1e4,msg:n,action:{actionText:l.fbt._("OKAY",null,{hk:"3RIrWh"}),dismiss:!0,theme:"success"}}))}},585110:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ContextDropdownMenu=function(e){const{popover:t}=f((0,o.default)((0,o.default)({},e),{},{initHandling:"contextmenu"}));return t},t.DropdownMenu=function(e){const{popover:t}=f(e);return t},Object.defineProperty(t,"PopoverAlignment",{enumerable:!0,get:function(){return a.PopoverAlignment}}),Object.defineProperty(t,"PopoverPosition",{enumerable:!0,get:function(){return a.PopoverPosition}}),t.useDropdownMenu=f;var o=r(n(81109)),l=r(n(506479)),i=n(690495),a=n(411342),u=n(913290),d=(r(n(156720)),n(785893));const s=["children","onSelect","menuRef","listControllerRef","maxHeight","minWidth","initialActiveOptionId","initHandling"],c={container:{borderTopStartRadius:"nl2xi1ke",borderTopEndRadius:"r2bxqa8h",borderBottomEndRadius:"jyp9psb5",borderBottomStartRadius:"n1nfpgil",backgroundColor:"rf2f03pv",boxShadow:"o8gxb310",color:"fkbpgrx9",overflowX:"gfz4du6o",overflowY:"r7fjleex"}};function f(e){const{children:t,onSelect:n,menuRef:r,listControllerRef:f,maxHeight:m,minWidth:p,initialActiveOptionId:g,initHandling:h}=e,v=(0,l.default)(e,s),b=(0,a.usePopoverElement)((0,o.default)((0,o.default)({},v),{},{initHandling:null!=h?h:"click",dismissable:!0,element:(0,d.jsx)(i.FlexItem,{xstyle:c.container,children:(0,d.jsx)(u.WDSMenu,{listControllerRef:f,ref:r,maxHeight:m,minWidth:p,initialActiveOptionId:g,onSelect:(e,t)=>{let{type:r}=t;null==n||n(e),!1===["multi-select","submenu","switch"].includes(r)&&b.hidePopover()},children:t})})}));return b}},41862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMap=function(e){const[t,n]=(0,r.useState)(e?e():()=>new Map),o=(0,r.useCallback)(((e,t)=>new Promise((r=>{n((n=>{const o=new Map(n);return o.set(e,t),r(o),o}))}))),[]),l=(0,r.useCallback)((e=>new Promise((t=>{n((n=>{const r=new Map(n);return r.delete(e),t(r),r}))}))),[]),i=(0,r.useCallback)((e=>new Promise((t=>{n((()=>{const n=null!=e?e:new Map;return t(n),n}))}))),[]);return[t,{set:o,unset:l,clear:i}]};var r=n(667294)},487655:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSet=function(e){const[t,n]=(0,r.useState)(e?e():()=>new Set),o=(0,r.useCallback)((e=>new Promise((t=>{n((n=>{const r=new Set(n);return r.add(e),t(r),r}))}))),[]),l=(0,r.useCallback)((e=>new Promise((t=>{n((n=>{const r=new Set(n);return r.delete(e),t(r),r}))}))),[]),i=(0,r.useCallback)((e=>new Promise((t=>{n((n=>{const r=new Set(n);return r.has(e)?r.delete(e):r.add(e),t(r),r}))}))),[]),a=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((t=>{n((()=>{const n=new Set(e);return t(n),n}))}))}),[]);return[t,{add:o,remove:l,toggle:i,clear:a}]};var r=n(667294)},219753:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WDSCell=void 0;var o=r(n(81109)),l=r(n(506479)),i=n(448266),a=n(667294),u=r(n(156720)),d=r(n(38085)),s=r(n(83233)),c=n(785893);const f=["containerXStyle","middleContainerXStyle","detailLeftXStyle","primaryXStyle","primaryRightXStyle","secondaryXStyle","secondaryRightXStyle","detailRightXStyle","tabIndex","onClick","title","border","disabled","interactive","active","idle","testid","colorScheme"],m={display:"p357zi0d",flexGrow:"ggj6brxn",position:"g0rxnol2",boxSizing:"cm280p3y",alignSelf:"l33m68ws"},p={container:{backgroundColor:"ihvf49ua"},containerActive:{backgroundColor:"i16jpgpt"},containerInteractive:{":hover":{backgroundColor:"os03hap6"},":focus":{backgroundColor:"d7xlm8yn"}},border:{borderBottom:"qmxv8cnq"},borderActive:{borderBottomColor:"pxdw8wyd"},borderHover:{borderBottomColor:"brezm3p7"}},g={container:{backgroundColor:"sjffjsx5"},containerActive:{backgroundColor:"h77y0my3"},containerInteractive:{":hover":{backgroundColor:"m7m2r1ls"},":focus":{backgroundColor:"csjkyafw"}},border:{borderBottom:"qmxv8cnq"},borderActive:{borderBottomColor:"ils5e9gq"},borderHover:{borderBottomColor:"kjc4e4iu"}},h={container:{backgroundColor:"hof29tx5"},containerActive:{backgroundColor:"gbpct7j9"},containerInteractive:{":hover":{backgroundColor:"ak67jf88"},":focus":{backgroundColor:"cdwtgchq"}},border:{borderBottom:"qmxv8cnq"},borderActive:{borderBottomColor:"tql9u9p7"},borderHover:{borderBottomColor:"cfn60c8b"}},v=(0,a.forwardRef)(((e,t)=>{var n,r,v;const{containerXStyle:b,middleContainerXStyle:y,detailLeftXStyle:x,primaryXStyle:S,primaryRightXStyle:C,secondaryXStyle:j,secondaryRightXStyle:M,detailRightXStyle:w,tabIndex:I,onClick:_,title:R,border:P,disabled:O=!1,interactive:k=!0,active:T=!1,idle:A=!1,testid:D,colorScheme:E="default"}=e,L=(0,l.default)(e,f),B=k&&!O,[q,F]=(0,a.useState)(!1),[N,W]=(0,a.useState)(!1),[H,z]=(0,s.default)(_,{tabIndex:I,disabled:O}),X=(0,d.default)(H,t),U=B?(0,o.default)((0,o.default)({},z),{},{"data-tab":z.tabIndex,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),onFocus:()=>W(!0),onBlur:()=>W(!1)}):{};let G;switch(E){case"none":break;case"default":G=p;break;case"lighter":G=g;break;case"lightest":G=h}const Y=null!=P&&null!=G?[G.border,(T||N)&&G.borderActive,q&&G.borderHover]:[],V=[null===(n=G)||void 0===n?void 0:n.container,Boolean(T)&&(null===(r=G)||void 0===r?void 0:r.containerActive),Boolean(B)&&!A&&(null===(v=G)||void 0===v?void 0:v.containerInteractive),b,"bottom-full"===P&&Y];return(0,c.jsx)("div",(0,o.default)((0,o.default)({ref:X,className:(0,u.default)(m),"data-testid":null!=D?D:"cell-frame-container",title:R},U),{},{children:(0,c.jsx)(i.WDSCellFrame,(0,o.default)((0,o.default)({},L),{},{containerXStyle:V,detailLeftXStyle:[x],middleContainerXStyle:[y,"bottom-partial"===P&&Y],primaryXStyle:[S],primaryRightXStyle:[C],secondaryXStyle:[j],secondaryRightXStyle:[M],detailRightXStyle:[w,"bottom-partial"===P&&Y]}))}))}));t.WDSCell=v,v.displayName="WDSCell"},448266:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WDSCellFrame=void 0;var o=n(690495),l=r(n(469733)),i=(r(n(156720)),n(785893));const a={container:{display:"p357zi0d",flexGrow:"ggj6brxn",position:"g0rxnol2",boxSizing:"cm280p3y"},middleContainer:{flex:"mx771qyo",alignItems:"elxb2u3l",justifyContent:"ac2vgrno",boxSizing:"cm280p3y"},primaryContainer:{alignItems:"gndfcl4n"},grow:{flexGrow:"ggj6brxn"},stretch:{alignItems:"elxb2u3l"},borderBox:{boxSizing:"cm280p3y"},ellipsis:{overflowX:"gfz4du6o",overflowY:"r7fjleex",whiteSpace:"le5p0ye3",textOverflow:"lhj4utae"}},u={container:{minHeight:"gc15jzxb"},detailLeft:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd",paddingStart:"nu34rnf1",paddingEnd:"ft2m32mm",minWidth:"mhp1pqu9"},middleContainer:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd"},middleContainerNoDetailLeft:{paddingStart:"nu34rnf1"},middleContainerNoDetailRight:{paddingEnd:"ft2m32mm"},detailRight:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd",paddingStart:"nu34rnf1",paddingEnd:"ft2m32mm",minWidth:"mhp1pqu9"}},d={container:{minHeight:"im5280se"},detailLeft:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",paddingEnd:"l9g3jx6n",minWidth:"byvcucqk"},middleContainer:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd"},middleContainerNoDetailLeft:{paddingStart:"lyvj5e2u"},middleContainerNoDetailRight:{paddingEnd:"l9g3jx6n"},detailRight:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",paddingEnd:"l9g3jx6n",minWidth:"byvcucqk"}},s={container:{minHeight:"lignnmtc"},detailLeft:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",paddingEnd:"l9g3jx6n",minWidth:"nucpke6t"},middleContainer:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd"},middleContainerNoDetailLeft:{paddingStart:"lyvj5e2u"},middleContainerNoDetailRight:{paddingEnd:"l9g3jx6n"},detailRight:{paddingTop:"fbgy3m38",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",paddingEnd:"l9g3jx6n",minWidth:"nucpke6t"}};t.WDSCellFrame=e=>{var t,n,r,c,f,m;let p,{size:g,detailLeft:h,detailRight:v,primary:b,primaryRight:y,secondary:x,secondaryRight:S,alignDetailRight:C="center",justifyDetailRight:j="center",containerXStyle:M,detailLeftXStyle:w,middleContainerXStyle:I,primaryXStyle:_,primaryRightXStyle:R,secondaryXStyle:P,secondaryRightXStyle:O,detailRightXStyle:k}=e;switch(g){case"large":p=s;break;case"medium":p=d;break;case"small":p=u}return(0,i.jsxs)(o.FlexRow,{align:"center",xstyle:[a.borderBox,a.grow,a.stretch,null===(t=p)||void 0===t?void 0:t.container,M].flat(),children:[Boolean(h)&&(0,i.jsx)(o.FlexRow,{xstyle:[null===(n=p)||void 0===n?void 0:n.detailLeft,w],justify:"center",align:"center",children:h}),(0,i.jsxs)(o.FlexColumn,{grow:1,xstyle:[a.middleContainer,null==h&&(null===(r=p)||void 0===r?void 0:r.middleContainerNoDetailLeft),null==v&&(null===(c=p)||void 0===c?void 0:c.middleContainerNoDetailRight),null===(f=p)||void 0===f?void 0:f.middleContainer,I],children:[(0,i.jsxs)(o.FlexRow,{xstyle:[a.primaryContainer],children:[(0,i.jsx)(l.default,{grow:1,shrink:0,xstyle:[a.ellipsis,a.borderBox,_],children:b}),Boolean(y)&&(0,i.jsx)(l.default,{shrink:1,xstyle:[a.ellipsis,a.borderBox,R],children:y})]}),Boolean(x)&&(0,i.jsxs)(o.FlexRow,{children:[(0,i.jsx)(l.default,{grow:1,shrink:0,xstyle:[a.ellipsis,a.borderBox,P],children:x}),Boolean(S)&&(0,i.jsx)(l.default,{shrink:1,xstyle:[a.ellipsis,a.borderBox,O],children:S})]})]}),Boolean(v)&&(0,i.jsx)(o.FlexRow,{justify:j,align:C,xstyle:[null===(m=p)||void 0===m?void 0:m.detailRight,k],children:v})]})}},281309:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createRegister=function(){const e=(0,i.createContext)();return{Register:function(t){return(0,u.jsx)(e.Provider,{value:t.registerRef,children:t.children})},useRegister:function(e){const t={items:new Map,events:new o.default,isRegistered:!1};return(0,i.useEffect)((()=>{var n;null==e||null===(n=e.onRegister)||void 0===n||n.call(e,t.items),t.isRegistered=!0}),[]),(0,a.useListener)(t.events,"change",(()=>{var n;t.isRegistered&&(null==e||null===(n=e.onChange)||void 0===n||n.call(e))})),t},useRegisterItem:function(t,n){const r=(0,i.useContext)(e);if(null==r)throw(0,l.default)("[Register] `useRegisterItem` must be used in a `Register` tree");const o=(0,i.useRef)(null);(0,i.useImperativeHandle)(o,(()=>n)),r.items.set(t,o),(0,i.useEffect)((()=>{const e=r.items;return e.set(t,o),r.events.trigger("change"),()=>{e.delete(t),r.events.trigger("change")}}),[t])}}};var o=r(n(395654)),l=r(n(556869)),i=n(667294),a=n(808446),u=n(785893)},913290:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActionMenuItem",{enumerable:!0,get:function(){return l.ActionMenuItem}}),Object.defineProperty(t,"MenuSearchInput",{enumerable:!0,get:function(){return d.MenuSearchInput}}),Object.defineProperty(t,"MenuSection",{enumerable:!0,get:function(){return f.MenuSection}}),Object.defineProperty(t,"SelectMenuItem",{enumerable:!0,get:function(){return c.SelectMenuItem}}),Object.defineProperty(t,"SelectMenuItemGroup",{enumerable:!0,get:function(){return c.SelectMenuItemGroup}}),Object.defineProperty(t,"SubMenuItem",{enumerable:!0,get:function(){return m.SubMenuItem}}),Object.defineProperty(t,"SwitchMenuItem",{enumerable:!0,get:function(){return p.SwitchMenuItem}}),t.WDSMenu=void 0,t.useMenu=function(){const e=(0,v.useContext)(C);if(null==e)throw(0,h.default)("[Menu] useMenu must be used in a child of a MenuList component");return e},t.useRegisterItem=void 0;var o=r(n(348926)),l=n(136351),i=n(465113),a=r(n(395654)),u=n(690495),d=n(891382),s=n(281309),c=n(401108),f=n(273275),m=n(279772),p=n(321725),g=n(676345),h=r(n(556869)),v=n(667294),b=r(n(156720)),y=n(41862),x=n(739783),S=n(785893);const C=(0,v.createContext)(null);const j={container:{display:"p357zi0d",flexGrow:"ggj6brxn"},listContainer:{display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",overflowY:"ag5g9lrv",width:"ln8gz9je"}},{useRegisterItem:M,useRegister:w,Register:I}=(0,s.createRegister)();t.useRegisterItem=M;const _=(0,v.forwardRef)(((e,t)=>{const{children:n,onSelect:r,forceSelection:l,initialActiveOptionId:d,maxHeight:s,minWidth:c}=e,[f,{clear:m}]=(0,y.useMap)(),p=w({onRegister:(h=(0,o.default)((function*(e){yield m(e)})),function(){return h.apply(this,arguments)})});var h;const[M,_]=(0,v.useState)(),R=(0,v.useMemo)((()=>new a.default),[]),P=(0,v.useRef)(),O=(0,v.useMemo)((()=>null!=M?M:Array.from(f.keys())),[M,f]),{activeItem:k,listSelection:T,NavigatableList:A}=(0,x.useNavigatableList)(O),D=function(){var e=(0,o.default)((function*(e){yield _(e)}));return function(){return e.apply(this,arguments)}}(),E=e=>{const t=f.get(e);if(null!=t&&null!=t.current){var n;const o=t.current;null===(n=o.onSelect)||void 0===n||n.call(o);const l=function(e){const t=[];return e.forEach(((e,n)=>{null!=e.current&&t.push([n,e.current])})),new Map(t)}(f);R.trigger("select",e,o,l),null==r||r(e,o,l)}else __LOG__(3)`[Menu] Trying to handle onSelect without a valid option '${e}'`},L=e=>{e.stopPropagation(),e.preventDefault()},B=(0,v.useCallback)((e=>{const t=O.indexOf(e);if(null!=P.current){var n;const e=null===(n=P.current)||void 0===n?void 0:n.children[t];null!=e&&(0,i.scrollIntoViewIfNeeded)(e,!1,P.current)}}),[O,P]);(0,v.useEffect)((()=>{null!=k&&B(k)}),[k,B]);const q=f.size>0;(0,v.useEffect)((()=>{null!=d&&O.includes(d)&&T.setVal(d)}),[q]);const F={items:f,events:R,activeItemId:k,filteredItems:null!=M?new Set(M):null,filterItems:D,selectItem:E};return(0,S.jsx)(I,{registerRef:p,children:(0,S.jsx)(C.Provider,{value:F,children:(0,S.jsx)("div",{ref:t,role:"listbox","data-testid":"dropdown",className:(0,b.default)([j.container,g.uiPadding.all8]),style:{maxHeight:s,minWidth:c},children:(0,S.jsx)(A,{xstyle:j.listContainer,items:T,onSelect:E,handlers:{down:L,up:L,enter:L},forceSelection:l,rotate:!0,children:(0,S.jsx)(u.FlexColumn,{align:"stretch",tabIndex:0,ref:P,children:n})})})})})}));t.WDSMenu=_,_.displayName="WDSMenu"},957533:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WDSMenuItem=void 0,t.useMenuGroup=function(e){const t=(0,a.useMenu)();if(null==t)throw(0,u.default)("[Menu] MenuGroup must be a child of a MenuItemList");const n=(0,d.useRef)();(0,d.useImperativeHandle)(n,e),(0,d.useEffect)((()=>{const e=(e,t,r)=>{var o;null!=n.current&&n.current.optionIds.has(e)&&(null===(o=n.current)||void 0===o||o.onSelect(e,t,r))};return t.events.on("select",e),()=>{t.events.off("select",e)}}),[n])},t.useMenuItem=c;var o=n(180519),l=r(n(625903)),i=n(219753),a=n(913290),u=r(n(556869)),d=n(667294),s=(r(n(156720)),n(785893));function c(e,t){(0,a.useRegisterItem)(e,t);const n=(0,a.useMenu)();if(null==n)throw(0,u.default)("[Menu] MenuItem must be a child of a MenuItemList");return{menu:n,isActive:(null==n?void 0:n.activeItemId)===e,isFiltered:null!=n.filteredItems&&!1===n.filteredItems.has(e)}}const f={container:{textAlign:"ljrqcn24",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",overflowX:"gfz4du6o",overflowY:"r7fjleex",display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",alignSelf:"l33m68ws",width:"ln8gz9je"},disabled:{cursor:"h2qzpyga"}},m=(0,d.forwardRef)(((e,t)=>{const{optionId:n,primary:r,detailRight:a,secondary:u,primaryDetail:d,secondaryDetail:m,detailLeft:p,disabled:g,children:h,type:v,onSelect:b}=e,{menu:y,isActive:x,isFiltered:S}=c(n,{id:n,type:v,label:r,searchCriteria:r.toString(),onSelect:b});return!0===S?null:(0,s.jsxs)(l.default,{ref:t,xstyle:[f.container,!0===g&&f.disabled],onClick:!0!==g?e=>{e.stopPropagation(),y.selectItem(n)}:null,tabIndex:-1,children:[(0,s.jsx)(i.WDSCell,{size:"small",colorScheme:"lighter",disabled:g,primary:(0,s.jsx)(o.WDSTextTitle,{children:r}),primaryRight:d,secondary:(0,s.jsx)(o.WDSTextMuted,{children:u}),secondaryRight:m,detailLeft:p,detailRight:a,active:x,tabIndex:-1}),h]})}));t.WDSMenuItem=m,m.displayName="WDSMenuItem"},136351:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ActionMenuItem=function(e){return(0,i.jsx)(l.WDSMenuItem,(0,o.default)((0,o.default)({},e),{},{type:"action"}))};var o=r(n(81109)),l=n(957533),i=n(785893)},891382:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSearchInput=function(){const e=(0,u.useMenu)(),t=e=>{e.stopPropagation(),e.preventDefault()},n=function(){var t=(0,o.default)((function*(t){const n=e.items;if(""===t){const t=Array.from(n.keys());return e.filterItems(t)}const r=Array.from(n.values()).map((e=>e.current)).filter(Boolean),o=(0,i.filterPaginate)(r,(e=>(0,a.simpleSearch)(t,[e.searchCriteria])),{pageLength:r.length});yield e.filterItems(o.map((e=>e.id)))}));return function(){return t.apply(this,arguments)}}();return(0,d.jsx)(l.SearchInput,{focusOnMount:!0,colorScheme:"darker",onEnter:()=>{null!=e.activeItemId&&e.selectItem(e.activeItemId)},onClick:t,onFocus:t,onBlur:t,onSearch:n,placeholder:""})};var o=r(n(348926)),l=n(745170),i=n(522519),a=n(268755),u=n(913290),d=n(785893)},401108:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SelectMenuItem=function(e){const t=(0,m.useContext)(v);if(null==t)throw(0,f.default)("[menu] `SelectMenuItem` must be used inside of a `SelectMenuGroup`");const n=t.selection.has(e.optionId);let r,l;t.isMultiselect?(r="multi-select",l=n?(0,h.jsx)(i.CheckboxRoundCheckedIcon,{}):(0,h.jsx)(a.CheckboxRoundUncheckedIcon,{})):(r="single-select",l=n?(0,h.jsx)(u.CheckmarkIcon,{color:d.SvgColorProp.TEAL}):null);return(0,h.jsx)(c.WDSMenuItem,(0,o.default)((0,o.default)({detailRight:l},e),{},{type:r}))},t.SelectMenuItemGroup=function(e){const{multiselect:t,children:n,initialSelection:r}=e,o=(0,s.useMenu)(),[i,{clear:a,toggle:u}]=(0,g.useSet)(),d=m.Children.map(n,(e=>e.props.optionId)),c=function(){var n=(0,l.default)((function*(n,r){var o;let l;l=!0===t?yield u(n):yield a([n]),null===(o=e.onSelect)||void 0===o||o.call(e,n,r,l)}));return function(){return n.apply(this,arguments)}}();return(0,p.useListener)(o.events,"select",function(){var e=(0,l.default)((function*(e,t){d.includes(e)&&(yield c(e,t))}));return function(){return e.apply(this,arguments)}}()),(0,m.useEffect)((()=>{if(null!=r){const e=Array.isArray(r)?r:[r];a(e)}}),[]),(0,h.jsx)(v.Provider,{value:{selection:i,isMultiselect:!0===t},children:n})};var o=r(n(81109)),l=r(n(348926)),i=n(95833),a=n(827728),u=n(969579),d=n(220584),s=n(913290),c=n(957533),f=r(n(556869)),m=n(667294),p=n(808446),g=n(487655),h=n(785893);const v=(0,m.createContext)(null)},273275:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSection=function(e){let{scroll:t}=e,n=(0,l.default)(e,d);return(0,u.jsx)(i.FlexColumn,(0,o.default)((0,o.default)({},n),{},{className:(0,a.default)(!0===t&&s.scroll)}))};var o=r(n(81109)),l=r(n(506479)),i=n(690495),a=r(n(156720)),u=n(785893);const d=["scroll"],s={scroll:{overflowY:"ag5g9lrv"}}},279772:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuItem=function(e){const{children:t}=e,n=(0,l.default)(e,f),{activeItemId:r}=(0,u.useMenu)(),m=(0,s.useRef)(null),p=(0,s.useRef)(),g=r===e.optionId;return(0,s.useEffect)((()=>{null!=p.current&&(g?p.current.showPopover():p.current.hidePopover())}),[g]),(0,c.jsx)(d.WDSMenuItem,(0,o.default)((0,o.default)({ref:m},n),{},{type:"submenu",onSelect:()=>{null!=p.current&&(p.current.popoverIsVisible?p.current.hidePopover():p.current.showPopover())},detailRight:(0,c.jsx)(i.ChevronRightIcon,{width:20}),children:(0,c.jsx)(a.DropdownMenu,{controllerRef:p,buffer:-8,target:m,position:a.PopoverPosition.End,alignment:a.PopoverAlignment.Start,initHandling:"hover-popover",children:t})}))};var o=r(n(81109)),l=r(n(506479)),i=n(181712),a=n(585110),u=n(913290),d=n(957533),s=n(667294),c=n(785893);const f=["children"]},321725:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchMenuItem=function(e){const{initialState:t=!1,onSelect:n}=e,r=(0,l.default)(e,s),[c,f]=(0,u.useState)(t);return(0,d.jsx)(a.WDSMenuItem,(0,o.default)((0,o.default)({},r),{},{type:"switch",onSelect:()=>{f(!c),null==n||n(!c)},primaryDetail:(0,d.jsx)(i.Switch,{checked:c,onChange:()=>{},tabIndex:-1})}))};var o=r(n(81109)),l=r(n(506479)),i=n(137506),a=n(957533),u=n(667294),d=n(785893);const s=["initialState","onSelect"]},825548:(e,t,n)=>{"use strict";var r=n(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;var o=r(n(81109)),l=n(641711),i=n(585110),a=r(n(469733)),u=n(891382),d=n(401108),s=n(589332),c=n(676345),f=r(n(625903)),m=n(667294),p=r(n(156720)),g=r(n(576191)),h=r(n(38085)),v=n(785893);const b={selectDropdownContainer:{position:"g0rxnol2",color:"k2bacm8l"},select:{display:"p357zi0d",alignItems:"gndfcl4n",textAlign:"ljrqcn24",position:"g0rxnol2",backgroundColor:"f6cvynhn",borderTop:"kagi745y",borderEnd:"evq3mrnv",borderBottom:"daad4uqs",borderStart:"jdssz2gn",borderTopStartRadius:"m2gb0jvt",borderTopEndRadius:"rfxpxord",borderBottomEndRadius:"gwd8mfxi",borderBottomStartRadius:"mnh9o63b",overflowX:"gfz4du6o",overflowY:"r7fjleex",whiteSpace:"le5p0ye3",textOverflow:"lhj4utae",cursor:"ajgl1lbb",userSelect:"rkxvyd19",boxSizing:"cm280p3y",width:"ln8gz9je"},selectFocused:{borderTop:"ggk2mtcd",borderEnd:"c4hi5cu5",borderBottom:"dorenqkw",borderStart:"pidw8noc"},label:{overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae"}},y={select:{height:"qmp0wt83"}},x={select:{height:"sai7fuui"}},S=(0,m.forwardRef)(((e,t)=>{const{children:n,label:r,size:o="large",width:i,ariaRoleDescription:u}=e,[d,s]=(0,g.default)(),m=(0,h.default)(d,t);return(0,v.jsxs)("div",{className:(0,p.default)(b.selectDropdownContainer),"aria-roledescription":u,style:{width:i},children:[(0,v.jsxs)(f.default,{onClick:e=>{e.stopPropagation()},ref:m,xstyle:[b.select,"large"===o&&[y.select,c.uiPadding.start24,c.uiPadding.end36],"small"===o&&[x.select,c.uiPadding.horiz16],s&&b.selectFocused],children:[(0,v.jsx)(a.default,{grow:1,justify:"start",xstyle:b.label,children:r}),(0,v.jsx)(l.CaretDownIcon,{xstyle:c.uiPadding.start8})]}),n]})}));S.displayName="SelectButton";const C=(0,m.forwardRef)(((e,t)=>{const{defaultLabel:n,customLabel:r,children:l,popoverControllerRef:a,menuMinWidth:c,menuMaxHeight:f,ariaRoleDescription:p,size:g,width:b,includeSearchInput:y}=e,x=new Map(m.Children.toArray(l).map((e=>[e.props.optionId,{optionId:e.props.optionId,label:e.props.primary}]))),C=e=>{var t,o;let l;return null!=r&&(l=r(e)),null==l&&null!=e&&e.size&&(l=Array.from(e).map((e=>{var t;return null===(t=x.get(e))||void 0===t?void 0:t.label.toString()})).filter(Boolean).join(", ")),null!==(t=null!==(o=l)&&void 0!==o?o:n)&&void 0!==t?t:""},j=(0,m.useRef)(null),M=(0,h.default)(t,j),w=(0,m.useRef)(null),I=(0,s.toArray)(e.initialSelection),[_,R]=(0,m.useState)(I),[P,O]=(0,m.useState)(C(new Set(I))),k=!0===e.multiselect?{multiselect:!0,initialSelection:_}:{multiselect:!1,initialSelection:_[0]};return(0,v.jsx)(S,{ref:M,ariaRoleDescription:p,size:g,label:P,width:b,children:(0,v.jsxs)(i.DropdownMenu,{target:j,listControllerRef:w,controllerRef:a,position:i.PopoverPosition.Bottom,alignment:i.PopoverAlignment.Start,maxHeight:f,minWidth:null!=c?Math.max(c,b):b,initHandling:"click",initialActiveOptionId:_[0],children:[!0===y?(0,v.jsx)(u.MenuSearchInput,{}):null,(0,v.jsx)(d.SelectMenuItemGroup,(0,o.default)((0,o.default)({},k),{},{onSelect:(t,n,r)=>{const o=C(r);var l,i;(O(o),R(Array.from(r)),!0===e.multiselect)?null===(l=e.onChange)||void 0===l||l.call(e,t,r.has(t),new Set(r)):null===(i=e.onChange)||void 0===i||i.call(e,t)},children:l}))]})})}));t.Select=C,C.displayName="Select"}}]);
//# sourceMappingURL=https://web.whatsapp.com/1761.5e7d20fb4bfddba0ae17.js.map
