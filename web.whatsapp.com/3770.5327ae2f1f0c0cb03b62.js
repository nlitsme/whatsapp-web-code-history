/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[3770],{63770:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,o.useState)(),[n,r]=(0,o.useState)([]);(0,o.useEffect)((()=>{const e=d.BusinessProfileCollection.get((0,S.getMaybeMeUser)());t((0,i.hasCatalog)(e)?R.ADD_CATALOG_PRODUCTS:R.ADD_CUSTOM_ITEMS_FORM)}),[]);const a=(0,l.default)((()=>{h.Cmd.closeDrawerRight()})),s=()=>{t(R.ITEMS_LIST_NO_CATALOG)},u=()=>{t(R.ADD_CUSTOM_ITEMS_FORM)},c=e=>{r((()=>[...n,e]))},m=N.indexOf(e);if(!e)return null;return(0,O.jsx)(M.default,{children:(0,O.jsx)(E.UIE,{displayName:`FlowDrawer${m}`,escapable:!0,requestDismiss:function(){a()},children:(0,O.jsx)("div",{children:function(e){switch(e){case R.ADD_CATALOG_PRODUCTS:return(0,O.jsx)(W,{onBack:a});case R.ADD_CUSTOM_ITEMS_FORM:return(0,O.jsx)($,{onBack:0===n.length?a:s,customItems:n,addNewCustomItem:c,onAddCustomItem:s});case R.ITEMS_LIST_NO_CATALOG:return(0,O.jsx)(V,{onBack:a,customItems:n,goToAddCustomItemsForm:u})}}(e)})},m)})};var l=a(n(51463)),s=n(48360),o=n(67294),u=a(n(56720)),d=n(93581),i=n(94010),c=a(n(39770)),m=n(99989),f=a(n(44356)),h=n(88102),p=a(n(69618)),g=n(79502),_=r(n(74764)),C=a(n(60453)),b=a(n(69637)),j=n(94790),x=n(47915),T=a(n(44942)),y=a(n(30855)),S=n(99234),A=n(9468),k=a(n(88990)),I=a(n(23217)),D=n(90011),E=n(18644),v=a(n(59552)),M=a(n(41956)),O=n(85893);const R=n(54302).Mirrored(["ADD_CATALOG_PRODUCTS","ADD_CUSTOM_ITEMS_FORM","ITEMS_LIST_NO_CATALOG"]),N=Array.from(R.members()),w={paddingTop:"tvsr5v2h",paddingEnd:"l9g3jx6n",paddingBottom:"jd93c9cp",paddingStart:"lyvj5e2u",backgroundColor:"ihvf49ua"},L={display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",marginTop:"fgtikrv0"},B={display:"p357zi0d",flexDirection:"sap93d0t",justifyContent:"o4u7okr9",fontWeight:"nbipi2bn"},P={display:"p357zi0d",alignItems:"gndfcl4n",width:"jgly3g7g",height:"graaj7av",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",borderTop:"gq6acybq",borderEnd:"toel9vei",borderBottom:"eyd9s9cm",borderStart:"ap1jplnr",backgroundColor:"lzol1dln"},F={marginTop:"m3ct2rho",marginEnd:"k1jo73ug",marginBottom:"ec1z5skj",marginStart:"isfiuinm",color:"s4recxw2"},q={marginTop:"b9l0eqez"},U={marginTop:"opp68qpq"},H=_.currencyForCountryShortcode((0,g.getCountryShortcodeByPhone)((0,S.getMeUser)().user));function G(e){return!Number.isNaN(e)&&Number.isInteger(e)&&Number(e)>0}function z(e){const t=_.formatAmount1000ToParts(H,e);return`${t.symbol}${t.integer}${t.decimal}`}function $(e){let{onBack:t,customItems:n,addNewCustomItem:r,onAddCustomItem:a}=e;const[l,d]=(0,o.useState)(null),[i,m]=(0,o.useState)(null),[f,h]=(0,o.useState)(0),[p,g]=(0,o.useState)(null),[x,T]=(0,o.useState)(null),y=(0,o.useMemo)((()=>function(e){if(null==e)return"";const t=String(s.fbt._("Add a title",null,{hk:"3QauyV"}));return""===e.trim()?t:""}(l)),[l]),S=(0,o.useMemo)((()=>function(e){if(null==e)return"";const t=String(s.fbt._("Enter a valid price",null,{hk:"nzgo4"}));return""!==e.trim()&&_.validatePriceString(H,e,A.MIN_PRICE,A.MAX_PRICE)?"":t}(i)),[i]),k=(0,o.useMemo)((()=>function(e){if(null==e)return"";const t=String(s.fbt._("Enter a valid quantity",null,{hk:"13oaEC"}));return G(Number(e))?"":t}(x)),[x]);return(0,O.jsxs)(C.default,{children:[(0,O.jsx)(j.DrawerHeader,{title:s.fbt._("Add items",null,{hk:"2SjafD"}),type:j.DRAWER_HEADER_TYPE.SMALL,onBack:t,focusBackOrCancel:!0}),(0,O.jsxs)(b.default,{className:(0,u.default)(w),children:[(0,O.jsx)(D.TextInput,{a8n:"product-edit-drawer-item-name-input",value:l,placeholder:s.fbt._("Item name",null,{hk:"1LDktG"}),onChange:e=>{d(e)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:y}),(0,O.jsx)(D.TextInput,{a8n:"product-edit-drawer-item-price-input",value:i,placeholder:s.fbt._("Price {symbol}",[s.fbt._param("symbol",_.formatAmount1000ToParts(H,0).symbol)],{hk:"3yCPZW"}),onChange:e=>{const t=_.valueFromString(H,e);h(t),m(e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:S}),(0,O.jsx)(D.TextInput,{a8n:"product-edit-drawer-item-quantity-input",value:x,placeholder:s.fbt._("Quantity (Optional)",null,{hk:"30uF5W"}),onChange:e=>{let t=""===e?null:Number(e);G(t)||(t=null),g(t),T(""===e?null:e)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:k}),(0,O.jsx)("div",{className:(0,u.default)(L),children:(0,O.jsx)(c.default,{type:"primary",disabled:null==l||null==i||[y,S,k].some((e=>e)),onClick:()=>{r({name:l,priceAmount1000:f,quantity:p}),a()},children:s.fbt._("Add",null,{hk:"1PtfmH"})})})]})]})}function W(e){let{onBack:t}=e;const n=(0,v.default)((()=>new y.default));return(0,O.jsxs)(C.default,{children:[(0,O.jsx)(j.DrawerHeader,{title:s.fbt._("Add items",null,{hk:"2nsVXo"}),type:j.DRAWER_HEADER_TYPE.SMALL,onBack:t,focusBackOrCancel:!0}),(0,O.jsx)(b.default,{className:(0,u.default)(w),children:(0,O.jsx)(T.default,{flatListControllers:[n.current],children:(0,O.jsx)(x.FlatList,{flatListController:n.current,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{const e=m.CatalogCollection.get((0,S.getMaybeMeUser)());if(!e)return[];return e.productCollection.getProductModels().map((e=>({itemKey:e.id.toString(),product:e})))})(),renderItem:e=>{let{product:t}=e;return(0,O.jsx)(k.default,{product:t,onClick:()=>{}})},defaultItemHeight:p.default.PRODUCT_LIST_ITEM_HEIGHT})})})]})}function V(e){let{onBack:t,customItems:n,goToAddCustomItemsForm:r}=e;const a=(0,O.jsx)("div",{className:(0,u.default)(P),children:(0,O.jsx)(I.default,{className:(0,u.default)(F),name:"add-item"})}),l=n.reduce(((e,t)=>{var n;return e+t.priceAmount1000*(null!==(n=t.quantity)&&void 0!==n?n:1)}),0);return(0,O.jsxs)(C.default,{children:[(0,O.jsx)(j.DrawerHeader,{title:s.fbt._("Add items",null,{hk:"1oTfXa"}),type:j.DRAWER_HEADER_TYPE.SMALL,onBack:t,focusBackOrCancel:!0}),(0,O.jsxs)(b.default,{children:[(0,O.jsx)("div",{className:(0,u.default)(w),children:(0,O.jsx)(f.default,{theme:"custom-item",image:a,primary:s.fbt._("Add another item",null,{hk:"44tHVV"}),onClick:r})}),(0,O.jsx)("div",{className:(0,u.default)(w,q),children:(()=>{const e=(0,O.jsx)("div",{className:(0,u.default)(P),children:(0,O.jsx)(I.default,{className:(0,u.default)(F),name:"shopping-cart"})});return n.map(((t,n)=>{var r;const a=z(t.priceAmount1000),l=String(s.fbt._("Qty",null,{hk:"4s6GFm"}));return(0,O.jsx)(f.default,{image:e,primary:t.name,secondary:null!=t.quantity?`${a} â€¢ ${l} ${t.quantity}`:a,theme:"custom-item",onClick:()=>{}},null!==(r=t.name)&&void 0!==r?r:""+n)}))})()}),(0,O.jsxs)("div",{className:(0,u.default)(w,U),children:[(0,O.jsxs)("div",{className:(0,u.default)(B),children:[(0,O.jsx)("p",{children:s.fbt._("Estimated total",null,{hk:"3RgCc1"})}),(0,O.jsx)("p",{children:z(l)})]}),(0,O.jsx)("div",{className:(0,u.default)(L),children:(0,O.jsx)(c.default,{type:"primary",disabled:0===n.length,onClick:()=>{},children:s.fbt._("Review Order",null,{hk:"34clF5"})})})]})]})]})}}}]);
//# sourceMappingURL=https://web.whatsapp.com/3770.5327ae2f1f0c0cb03b62.js.map
