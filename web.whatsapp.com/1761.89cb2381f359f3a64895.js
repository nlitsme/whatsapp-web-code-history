/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[1761],{589332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){if(null==e)return[];if(Array.isArray(e))return[...e];return[e]}},31761:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(348926)),l=n(r(81109)),i=n(r(288306)),u=r(72696),a=n(r(873969)),c=r(919175),s=r(778945),d=r(542358),f=r(713464),p=F(r(27578)),m=r(900316),g=r(486392),h=r(114850),y=n(r(930440)),v=r(411597),b=r(25968),M=r(699411),j=r(100149),O=r(973176),S=r(238977),x=r(706197),w=r(886066),P=r(665195),_=n(r(454903)),C=r(832545),I=r(392632),k=r(459857),R=n(r(844453)),D=F(r(667294)),T=n(r(829686)),A=n(r(637660)),E=n(r(895851)),W=r(785893);function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(L=function(e){return e?r:t})(e)}function F(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=L(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}const N=r(76672).Mirrored(["CATALOG_PRODUCTS_FORM","CUSTOM_ITEM_FORM","ORDER_SUMMARY","ADDITIONAL_CHARGES_FORM"]),B=Array.from(N.members()),q=(0,i.default)((()=>p.currencyForCountryShortcode((0,g.getCountryShortcodeByPhone)((0,k.getMeUser)().user))));function z(e,t){var r,n;let{entryPoint:i,order:p,chat:g,onBack:L,onSend:F,onCancel:z,onDeclineOrder:H}=e;const U=(0,E.default)(),[G,Y]=(0,D.useState)(N.ORDER_SUMMARY),[V,Q]=(0,D.useState)(null),[K,X]=(0,D.useState)(!1),[$,J]=(0,D.useState)((()=>function(e){if(!e)return[];const t={isCustomItem:!1,isQuantitySet:!0},r=e.products.map((e=>new _.default((0,l.default)((0,l.default)({},t),e))));return(0,P.notifyIfAnyProductMissesPrice)(r,{}),r}(p))),[Z,ee]=(0,D.useState)({}),[te,re]=(0,D.useState)(null),ne=(0,A.default)((()=>new y.default([],(e=>e.id.toString())))).current,oe=f.CatalogCollection.get((0,k.getMeUser)()),le=(e,t)=>{ee((r=>(0,l.default)((0,l.default)({},r),{},{[t]:e})))},ie=(0,D.useMemo)((()=>$.reduce(((e,t)=>{var r,n;return e+(null!==(r=null!==(n=t.price)&&void 0!==n?n:Z[t.id])&&void 0!==r?r:0)*t.quantity}),0)),[$,Z]),ue=(0,S.calculateFlatAmounts)({orderSubtotal:ie/S.DEFAULT_OFFSET,discountType:(null==te?void 0:te.discountType)||"",discountText:(null==te?void 0:te.discountText)||"",taxType:(null==te?void 0:te.taxType)||"",taxText:(null==te?void 0:te.taxText)||"",shippingText:(null==te?void 0:te.shippingText)||""}),ae=(0,d.hasCatalog)(s.BusinessProfileCollection.get((0,k.getMaybeMeUser)())),ce=q(),se=(0,u.getOrdersExpansionAllowedCurrencies)(g.contact.id.user),de=null!==(r=null===(n=$.at(0))||void 0===n?void 0:n.currency)&&void 0!==r?r:ce,fe=()=>{const e=$.some((e=>Z[e.id]));null!=i&&(0,w.createSendOrderDetailsWamEvent)(g,i,$,ue,ae,e).commit();const t=null!=p?p:M.OrderCollection.addOrder();t.products=$.map((e=>{var t,r;return e.price=null!==(t=e.price)&&void 0!==t?t:Z[e.id],e.currency=null!==(r=e.currency)&&void 0!==r?r:ce,e})),t.currency=de,t.subtotal=ie,t.triggerItemCollectionUpdate(),(0,c.sendOrderDetailsMessageAsMerchant)({order:t,chat:g,orderNote:"",offset:S.DEFAULT_OFFSET,total:ue.total,discount:ue.discount,shipping:ue.shipping,tax:ue.tax}),null==F||F(),m.DrawerManager.closeDrawerRight()},pe=(0,T.default)((()=>{L?L():(m.DrawerManager.closeDrawerRight(),null==z||z())})),me=()=>{!function(e,t,r){return e?t.length!==e.products.length||t.some(((t,n)=>{var o,l;return t.id!==e.products[n].id||t.quantity!==e.products[n].quantity||(null!==(o=null!==(l=t.price)&&void 0!==l?l:r[t.id])&&void 0!==o?o:null)!==e.products[n].price})):t.length>0}(p,$,Z)?pe():h.ModalManager.open((0,W.jsx)(j.ConfirmDiscardModal,{onOK:pe}))},ge=e=>{U.aborted||(!0!==e&&(0,P.notifyIfAnyProductMissesPrice)($,Z),Y(N.ORDER_SUMMARY))},he=()=>{Y(N.CATALOG_PRODUCTS_FORM)},ye=(e,t)=>{const r=Number.isInteger(e)?e:null;Q(r),X(!0===t),Y(null==r||$[r].isCustomItem?N.CUSTOM_ITEM_FORM:N.CATALOG_PRODUCTS_FORM)},ve=()=>{Y(N.ADDITIONAL_CHARGES_FORM)},be=(e,t)=>{const r=e.length,n=e.reduce(((e,t,r)=>e.set(t.id,r)),new Map);return[...t].sort(((e,t)=>{var o,l;return(null!==(o=n.get(e.id))&&void 0!==o?o:r)-(null!==(l=n.get(t.id))&&void 0!==l?l:r)}))},Me=e=>e.map((e=>{var t;return new _.default({id:e.id,name:e.name,price:e.priceAmount1000,thumbnailUrl:null===(t=e.getPreviewImage())||void 0===t?void 0:t.mediaUrl,quantity:Number(ne.getVal(e)),isCustomItem:!1,isQuantitySet:!0})})),je=(e,t,r)=>{const n=null==oe?void 0:oe.productCollection.getProductModels(),o=new Set(t.map((e=>{let{id:t}=e;return t}))),l=new Set(null==n?void 0:n.map((e=>{let{id:t}=e;return t})));return r.reduce(((e,t)=>{const r=o.has(t.id),n=l.has(t.id);return r||n?e:e.concat(t)}),e)},Oe=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ae&&J((t=>{const r=ne.getSelected(),n=Me(r),o=je(n,r,t);return e&&(0,P.notifyIfAnyProductMissesPrice)(o,Z),be(t,o)}))},Se=e=>ne.getSelected().find((t=>{let{id:r}=t;return r===e.id})),xe=(e,t)=>{ne.setVal(e,t)},we=e=>{if(!$[e].isCustomItem){const t=Se($[e]);t&&xe(t,0)}J((t=>[...t.slice(0,e),...t.slice(e+1)]))},Pe=(e,t)=>{if($[e].isCustomItem)((e,t)=>{t?J((r=>{const n=[...r];return n[e].quantity=t,n[e].isQuantitySet=!0,n})):we(e)})(e,t);else{const r=Se($[e]);r&&xe(r,t),Oe(!1)}},_e=function(){var e=(0,o.default)((function*(e){var t;let r,n=null==oe?void 0:oe.productCollection.getProductModels(),o=(null===(t=n)||void 0===t?void 0:t.length)||0,l=0;for(;(!r||!ne.isSelected(r))&&l<o;){var i,u;yield f.CatalogCollection.update((0,k.getMaybeMeUser)()),l=o,n=null==oe?void 0:oe.productCollection.getProductModels(),r=null===(i=n)||void 0===i?void 0:i.find((t=>t.id===e.id)),r&&xe(r,e.quantity),o=null===(u=n)||void 0===u?void 0:u.length}}));return function(){return e.apply(this,arguments)}}();(0,D.useEffect)((()=>((()=>{if(!p)return[];const e=null==oe?void 0:oe.productCollection.getProductModels();for(const t of p.products){const r=null==e?void 0:e.find((e=>e.id===t.id));r?xe(r,t.quantity):_e(t)}})(),()=>{})),[]);const Ce=B.indexOf(G);return G?(0,W.jsx)(R.default,{ref:t,children:(0,W.jsx)(I.UIE,{displayName:`FlowDrawer${Ce}`,escapable:!0,children:(0,W.jsx)("div",{children:(e=>{switch(e){case N.CATALOG_PRODUCTS_FORM:return(0,W.jsx)(b.OrderCatalogFormDrawer,{currency:ce,productsSelection:ne,orderItems:$,priceMap:Z,onBack:ge,onAddProducts:()=>{Oe(),ge(!0)},onAddCustomItem:()=>{ye(null,!0)},onProductSelectionChange:xe});case N.CUSTOM_ITEM_FORM:return(0,W.jsx)(O.CustomItemFormDrawer,{currency:de,eligibleCurrencies:0===$.length&&0===ne.getSelected().length?se:[],onBack:K?he:ge,onSaveCustomItem:e=>{Oe(),(e=>{let{name:t,priceAmount1000:r,quantity:n,isQuantitySet:o,currency:l}=e;const i=`${(0,x.getCustomItemIdPrefix)()}-${(0,a.default)()}`;J((e=>be(e,[...e,new _.default({id:i,name:t,price:r,quantity:null!=n?n:1,isCustomItem:!0,isQuantitySet:o,currency:l})])))})(e),ge()},customItem:$[Number.isInteger(V)?Number(V):-1]});case N.ORDER_SUMMARY:return(0,W.jsx)(C.OrderSummaryDrawer,{chat:g,currency:de,priceMap:Z,orderItems:$,orderSubtotal:ie,additionalCharges:te,flatAmounts:ue,onPriceChange:le,onBack:me,onSubmit:fe,onAddItem:ae&&(0,u.orderDetailsFromCatalogEnabled)()?he:ye,onAdditionalCharges:ve,onDeleteItem:we,onItemQuantityChange:Pe,entryPoint:i,onDeclineOrder:H});case N.ADDITIONAL_CHARGES_FORM:return(0,W.jsx)(v.AdditionalChargesFormDrawer,{currency:de,additionalCharges:te,subtotal:ie,onBack:ge,onApply:e=>{re((t=>(0,l.default)((0,l.default)({},t),e))),ge()}})}})(G)})},Ce)}):null}var H=(0,D.forwardRef)(z);t.default=H},702895:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,a.jsx)(o.ConfirmPopup,{testid:"order-expansion-different-order-currency-title",title:u.fbt._("Orders can't have items with different currencies",null,{hk:"19WokI"}),onOK:()=>{l.ModalManager.close()},children:(0,a.jsx)(i.WDSTextSectionTitle,{testid:"order-expansion-different-order-currency-description",children:u.fbt._("Make sure all items in your order have the same currency.",null,{hk:"213L8w"})})})};var o=r(103440),l=r(114850),i=r(180519),u=r(548360),a=(n(r(667294)),r(785893))},411597:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesFormDrawer=function(e){let{currency:t,subtotal:r,additionalCharges:n,onBack:f,onApply:M}=e;const S=(null==n?void 0:n.discountText)||"",[x,w]=(0,y.useState)(S),P=(null==n?void 0:n.taxText)||"",[_,C]=(0,y.useState)(P),I=(null==n?void 0:n.shippingText)||"",[k,R]=(0,y.useState)(I),D=(null==n?void 0:n.discountType)||j,[T,A]=(0,y.useState)(D),E=(null==n?void 0:n.taxType)||O,[W,L]=(0,y.useState)(E),[F,N]=(0,y.useState)(!1),[B,q]=(0,y.useState)(!1),z=(0,y.useMemo)((()=>(0,d.additionalChargeErrorHandler)({currency:t,value:k})),[t,k]),H=[F,B,z].some((e=>e));return(0,b.jsxs)(l.default,{children:[(0,b.jsx)(i.DrawerHeader,{title:h.fbt._("Add discount, shipping or tax",null,{hk:"nPDUK"}),type:i.DRAWER_HEADER_TYPE.SMALL,onBack:S!==x||P!==_||I!==k||D!==T||E!==W?()=>{a.ModalManager.open((0,b.jsx)(s.ConfirmDiscardModal,{onOK:f}))}:f,focusBackOrCancel:!0}),(0,b.jsxs)(u.default,{className:(0,v.default)(g.uiPadding.all16),children:[(0,b.jsx)(c.AdditionalChargesTextInput,{text:x,testid:"additional-charges-discount-input",label:h.fbt._("Discount",null,{hk:"3acZrp"}),symbol:T,currency:t,priceValue:r,setText:w,setError:N,setSymbol:A}),(0,b.jsx)(m.RichTextField,{value:k,testid:"additional-charges-shipping-input",placeholder:h.fbt._("Shipping ({currency_symbol})",[h.fbt._param("currency_symbol",(0,o.formatAmount1000ToParts)(t,0).symbol)],{hk:"H2WDY"}),onChange:e=>R(e.text),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:z}),(0,b.jsx)(c.AdditionalChargesTextInput,{text:_,testid:"additional-charges-tax-input",label:h.fbt._("Tax",null,{hk:"2r5wzT"}),symbol:W,currency:t,priceValue:r,setText:C,setError:q,setSymbol:L}),(0,b.jsx)(p.OrderApplyChangesButton,{disabled:H,testid:"apply-additional-costs-button",title:h.fbt._("Apply",null,{hk:"3E5Tq7"}),onClick:()=>M({discountText:x,taxText:_,shippingText:k,discountType:T,taxType:W})})]})]})};var o=r(27578),l=n(r(908081)),i=r(626194),u=n(r(969358)),a=r(114850),c=r(633571),s=r(100149),d=r(353950),f=r(238977),p=r(208160),m=r(202391),g=r(676345),h=r(548360),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),v=n(r(156720)),b=r(785893);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}const j=f.PERCENTAGE_SYMBOL,O=f.PERCENTAGE_SYMBOL},633571:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalChargesTextInput=function(e){let{text:t,label:r,symbol:n,testid:f,currency:g,priceValue:h,setText:y,setError:v,setSymbol:b}=e;const M=(0,c.useMemo)((()=>{const e=(0,l.additionalChargeErrorHandler)({label:r,currency:g,fieldType:n,maxFlatValue:h/i.DEFAULT_OFFSET,enablePercentValueCheck:!0,value:t});return v(Boolean(e)),e}),[t,r,n,g,v,h]);return(0,d.jsxs)("div",{className:(0,s.default)(p),children:[(0,d.jsx)(u.RichTextField,{value:t,testid:f,placeholder:a.fbt._("{input_label} ({currency_or_percentage})",[a.fbt._param("input_label",r),a.fbt._param("currency_or_percentage",n)],{hk:"vf1Ko"}),onChange:e=>y(e.text),theme:"small",maxLength:10,customStyleThemes:["desaturated"],error:M}),(0,d.jsx)("div",{className:(0,s.default)(m),children:(0,d.jsx)(o.OrderDetailAmountTypeSelector,{currency:g,value:n,onChange:e=>{let{value:t}=e;return b(t)}})})]})};var o=r(660516),l=r(353950),i=r(238977),u=r(202391),a=r(548360),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),s=n(r(156720)),d=r(785893);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}const p={position:"g0rxnol2"},m={position:"lhggkp7q",end:"ebjesfe0",zIndex:"mb8var44",top:"agjvi7sf"}},25968:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCatalogFormDrawer=function(e){let{currency:t,productsSelection:r,orderItems:n,priceMap:w,onBack:_,onAddProducts:C,onAddCustomItem:I,onProductSelectionChange:k}=e;const[R,D]=(0,M.useState)(!1),T=(0,O.default)(),A=(0,S.default)((()=>new s.default)),E=r.getSelected().reduce(((e,t)=>{var n,o;return e+(null!==(n=null!==(o=t.priceAmount1000)&&void 0!==o?o:w[t.id.toString()])&&void 0!==n?n:0)*Number(r.getVal(t))}),0),W=n.filter((e=>e.isCustomItem)).reduce(((e,t)=>e+t.price*t.quantity),0);return(0,x.jsxs)(i.default,{children:[(0,x.jsx)(a.DrawerHeader,{title:b.fbt._("Add items",null,{hk:"2U1Vru"}),type:a.DRAWER_HEADER_TYPE.SMALL,onBack:R?()=>{d.ModalManager.open((0,x.jsx)(m.ConfirmDiscardModal,{onOK:_}))}:_,focusBackOrCancel:!0}),(0,x.jsxs)(u.default,{children:[(0,x.jsxs)(c.default,{theme:"expand-height",xstyle:P.drawerSection,children:[(0,o.orderDetailsCustomItemEnabled)()&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.AddOrderItem,{title:b.fbt._("Create new item",null,{hk:"2GmSAs"}),onClick:I}),(0,x.jsx)("hr",{className:(0,j.default)(P.catalogBar,v.uiMargin.vert0)})]}),(0,x.jsx)("p",{className:(0,j.default)(P.catalogTitleText,v.uiPadding.start16,v.uiPadding.vert10),children:b.fbt._("Catalog items",null,{hk:"4chzUe"})}),(0,x.jsx)(p.default,{className:(0,j.default)(P.catalogProductsList),productsSelection:r,orderItems:n,flatListController:A.current,onProductSelectChange:function(e,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,h.shouldPreventCatalogProductSelection)(n,t)?d.ModalManager.open((0,x.jsx)(g.default,{})):(k(e,r),o||R||D(!0),T())}})]}),(0,x.jsx)(c.default,{children:(0,x.jsx)(y.OrderTotalPrice,{xstyle:[v.uiPadding.all16,v.uiMargin.top10],visible:!0,disabled:!R,totalPrice:(0,l.formatAmount1000)(t,E+W),testid:"save-products-button",onConfirm:C,title:b.fbt._("Subtotal",null,{hk:"4ciFet"}),confirmTitle:b.fbt._("Add to Order",null,{hk:"2SYeoP"})})})]})]})};var o=r(72696),l=r(27578),i=n(r(908081)),u=n(r(324093)),a=r(626194),c=n(r(969358)),s=n(r(570834)),d=r(114850),f=r(359162),p=n(r(881238)),m=r(100149),g=n(r(702895)),h=r(272493),y=r(208160),v=r(676345),b=r(548360),M=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),j=n(r(156720)),O=n(r(969651)),S=n(r(637660)),x=r(785893);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}const P={catalogTitleText:{fontWeight:"m1e7cby3",lineHeight:"tkq7s68q",fontSize:"ovllcyds",color:"q70jrbp7"},catalogBar:{width:"ln8gz9je",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv",borderTop:"gq6acybq"},catalogProductsList:{overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk"},drawerSection:{display:"p357zi0d",overflowX:"i44ccddp",overflowY:"ag5g9lrv",flexDirection:"f8m0rgwh"}}},504234:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogFormProduct=function(e){let{product:t,productsSelection:r,onProductSelectChange:n}=e;const c=Number(r.getVal(t))||0,[s,d]=(0,u.useState)(!1);return(0,a.jsx)("div",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:(0,a.jsx)(l.default,{product:t,detail:(s||r.isSelected(t))&&(0,a.jsx)(o.default,{quantity:c,quantityTitle:i.fbt._("Items in order",null,{hk:"35Mpfd"}),isCollapsed:!s,onAddOneClick:()=>n(t,c+1),onRemoveOneClick:()=>n(t,c-1)}),managedFocus:!0,theme:"product-add-to-order"})})};var o=n(r(763879)),l=n(r(698690)),i=r(548360),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),a=r(785893);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}},881238:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,productsSelection:r,orderItems:n,flatListController:M,onProductSelectChange:j}=e;const O=(0,v.default)(),S=(0,g.default)(),x=(0,m.default)(S,100),w=l.CatalogCollection.assertGet((0,f.getMaybeMeUser)()),[P,_]=(0,p.useState)(!1),[C,I]=(0,p.useState)(0),[k,R]=(0,p.useState)(!1),D=()=>{const e=new Set(n.map((e=>{let{id:t}=e;return t})));return w.productCollection.getProductModels().filter((t=>!e.has(t.id))).map((e=>({itemKey:e.id.toString(),product:e})))},T=e=>{e.forEach((e=>{const t=n.find((t=>{let{id:r}=t;return r===e.product.id}));void 0!==t&&j(e.product,Number(t.quantity),!0)}))},A=function(){var e=(0,o.default)((function*(){if(k)return;if(!w.afterCursor)return;const e=w.productCollection.getProductModels().length;_(!0),I(e);try{const t=yield l.CatalogCollection.update((0,f.getMaybeMeUser)());if(O.aborted)return;_(!1);const r=(Array.isArray(t)?t[0]:t).productCollection.getProductModels().length;if(T(D().slice(e)),r===C&&R(!0),e*d.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight)return A()}catch(e){_(!1),R(!0)}}));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((()=>{T(D()),A()}),[]),(0,h.useListener)(w.productCollection,"add",x);const E=(0,y.default)((e=>{P||e.scrollTop+c.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&A()}),100);return(0,b.jsxs)(u.default,{className:t,flatListControllers:[M],onScroll:e=>{e.currentTarget&&E(e.currentTarget)},children:[(0,b.jsx)(i.FlatList,{flatListController:M,direction:"vertical",forceConsistentRenderCount:!1,data:D(),renderItem:e=>{let{product:t}=e;return(0,b.jsx)(s.CatalogFormProduct,{product:t,productsSelection:r,onProductSelectChange:j})},defaultItemHeight:d.PRODUCT_LIST_ITEM_HEIGHT}),P&&(0,b.jsx)(a.default,{})]})};var o=n(r(348926)),l=r(713464),i=r(512938),u=n(r(964223)),a=n(r(495012)),c=r(914368),s=r(504234),d=r(899841),f=r(459857),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),m=n(r(710629)),g=n(r(969651)),h=r(808446),y=n(r(286481)),v=n(r(895851)),b=r(785893);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}},100149:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmDiscardModal=function(e){let{onOK:t}=e;return(0,a.jsx)(o.ConfirmPopup,{title:u.fbt._("Discard changes?",null,{hk:"1SaEaC"}),onOK:()=>{l.ModalManager.close(),t()},okText:u.fbt._("Discard",null,{hk:"3etb6C"}),onCancel:()=>l.ModalManager.close(),children:(0,a.jsx)(i.TextDiv,{theme:"muted",children:u.fbt._("If you close this, your draft will be discarded.",null,{hk:"4G5DVj"})})})};var o=r(103440),l=r(114850),i=r(180519),u=r(548360),a=(n(r(667294)),r(785893))},973176:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomItemFormDrawer=function(e){var t,r;let{currency:n,customItem:o,onBack:x,onSaveCustomItem:P,eligibleCurrencies:_}=e;const[C,I]=(0,j.useState)(null==o?void 0:o.name),[k,R]=(0,j.useState)(Number.isInteger(null==o?void 0:o.price)?String(Number(null==o?void 0:o.price)/1e3):null),[D,T]=(0,j.useState)(null==o?void 0:o.price),[A,E]=(0,j.useState)((null==o?void 0:o.isQuantitySet)?o.quantity:null),[W,L]=(0,j.useState)((null==o?void 0:o.isQuantitySet)?String(o.quantity):null),[F,N]=(0,j.useState)(null!==(t=null==o?void 0:o.currency)&&void 0!==t?t:n),B=(0,j.useMemo)((()=>function(e){if(null==e)return"";const t=String(M.fbt._("Add a title",null,{hk:"7Lm6B"}));return""===e.trim()?t:""}(C)),[C]),q=(0,j.useMemo)((()=>function(e,t){if(null==t)return"";const r=String(M.fbt._("Enter a valid price",null,{hk:"4yb1Sg"}));return""!==t.trim()&&(0,l.validatePriceString)(e,t,g.MIN_PRICE,g.MAX_PRICE)?"":r}(n,k)),[n,k]),z=(0,j.useMemo)((()=>function(e){if(null==e)return"";const t=String(M.fbt._("Enter a valid quantity",null,{hk:"u6SoG"}));return w(Number(e))?"":t}(W)),[W]),H=function(e,t,r,n){const o=(null==e?void 0:e.isQuantitySet)?Number(n)!==e.quantity:null!=n;return(null==e?void 0:e.name)!==t||(null==e?void 0:e.price)!==r||o}(o,C,D,W);return(0,S.jsxs)(i.default,{children:[(0,S.jsx)(a.DrawerHeader,{title:o?M.fbt._("Update item",null,{hk:"1TL07p"}):M.fbt._("Create new item",null,{hk:"4xRwlm"}),type:a.DRAWER_HEADER_TYPE.SMALL,onBack:H?()=>{f.ModalManager.open((0,S.jsx)(p.ConfirmDiscardModal,{onOK:x}))}:x,focusBackOrCancel:!0}),(0,S.jsx)(u.default,{children:(0,S.jsxs)(c.default,{className:(0,O.default)(y.uiPadding.all16),children:[(0,S.jsx)(h.RichTextField,{testid:"custom-item-edit-name-input",value:C,placeholder:M.fbt._("Item name",null,{hk:"1TMRR7"}),onChange:e=>{I(e.text)},theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:B}),(0,S.jsxs)(s.FlexRow,{children:[(0,S.jsx)(d.default,{grow:4,children:(0,S.jsx)(h.RichTextField,{testid:"custom-item-edit-price-input",value:k,placeholder:M.fbt._("Price {symbol}",[M.fbt._param("symbol",(0,l.formatAmount1000ToParts)(F,0).symbol)],{hk:"3jcGcb"}),onChange:e=>{const t=e.text,r=(0,l.valueFromString)(n,t);T(r),R(t)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:q})}),(null!==(r=null==_?void 0:_.length)&&void 0!==r?r:0)>1&&(0,S.jsx)(d.default,{testid:"custom-item-edit-currency-flex-item",children:(0,S.jsx)(b.Select,{ariaRoleDescription:"Currency selection in custom order item screen",initialSelection:F,width:150,onChange:e=>{N(e)},children:(null!=_?_:[]).map((e=>(0,S.jsx)(v.SelectMenuItem,{optionId:e,primary:`${e} ${(0,l.formatLocalSymbol)(e)}`},e)))})})]}),(0,S.jsx)(h.RichTextField,{testid:"custom-item-edit-quantity-input",value:W,placeholder:M.fbt._("Quantity (Optional)",null,{hk:"4swiuO"}),onChange:e=>{const t=e.text;let r=""===t?null:Number(t);w(r)||(r=null),E(r),L(""===t?null:t)},theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:z}),(0,S.jsx)(m.OrderApplyChangesButton,{title:o?M.fbt._("Update Order",null,{hk:"HjU1X"}):M.fbt._("Add to Order",null,{hk:"3p1U18"}),disabled:null==C||null==k||!(!o||H)||[B,q,z].some((e=>e)),onClick:()=>{const e={name:C,priceAmount1000:+D,quantity:A,isQuantitySet:Number.isInteger(A),currency:F};P(e)},testid:"save-custom-item-button"})]})})]})};var o=r(753958),l=r(27578),i=n(r(908081)),u=n(r(324093)),a=r(626194),c=n(r(969358)),s=r(690495),d=n(r(469733)),f=r(114850),p=r(100149),m=r(208160),g=r(517086),h=r(202391),y=r(676345),v=r(752104),b=r(825548),M=r(548360),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),O=n(r(156720)),S=r(785893);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function w(e){return Number.isInteger(e)&&+e>0&&+e<=o.CART_ITEM_MAX_QUANTITY}},660516:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:r,currency:n}=e;const s=o.formatLocalSymbol(n),d=u.fbt._("Select amount type",null,{hk:"1xddkG"}),f=[{id:"percentage",label:u.fbt._("by Percentage ({percentage-symbol})",[u.fbt._param("percentage-symbol",l.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:l.PERCENTAGE_SYMBOL},{id:"flat-amount",label:u.fbt._("by Flat amount ({currency-symbol})",[u.fbt._param("currency-symbol",s)],{hk:"duPhj"}),value:s}],p=(0,a.useMemo)((()=>f.findIndex((e=>e.value===t))),[]);return(0,c.jsx)(i.default,{"aria-label":d,options:f,defaultIndex:p,onChange:r})};var o=d(r(27578)),l=r(238977),i=n(r(754493)),u=r(548360),a=d(r(667294)),c=r(785893);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}},754493:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:r,onChange:n,"aria-label":m}=e;const h=(0,d.useRef)(null),[y,v]=(0,d.useState)(!1),[b,M]=(0,d.useState)(t),j=r.map(((e,t)=>{const{id:r,label:o}=e;return(0,p.jsx)(i.DropdownItem,{testid:`mi-${r}`,action:()=>{n(e),M(t)},children:(0,p.jsx)("div",{className:(0,f.default)(g.option),role:"button","aria-label":o,children:t===b?(0,p.jsx)(a.TextSpan,{weight:"bold",children:o}):o})},r)}));return(0,p.jsxs)("div",{ref:h,children:[(0,p.jsx)(o.default,{xstyle:u.default.isRTL()&&g.chipButtonRTL,"aria-label":m,PostfixIcon:l.DownIcon,label:r[b].value,onClick:()=>v((e=>!e))}),y&&h.current&&(0,p.jsx)(c.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:()=>v(!1),children:(0,p.jsx)(s.default,{contextMenu:{menu:j,anchor:h.current}})})]})};var o=n(r(407284)),l=r(820765),i=r(675085),u=n(r(932325)),a=r(180519),c=r(392632),s=n(r(37875)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),f=n(r(156720)),p=r(785893);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}const g={option:{boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"},chipButtonRTL:{paddingStart:"fif0zr45",paddingEnd:"gp4edbez"}}},886066:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSendOrderDetailsWamEvent=t.createSendOrderDetailsExtraAttributes=void 0;var o=r(738501),l=n(r(94530)),i=r(873994),u=r(130756);const a=(e,t,r)=>{var n,l,i;let u=0,a=0;return t.forEach((e=>{!0===e.isCustomItem?u+=e.quantity:a+=e.quantity})),{num_custom_items:u,num_catalog_items:a,has_additional_charges:(null!==(n=r.discount)&&void 0!==n?n:0)>0||(null!==(l=r.tax)&&void 0!==l?l:0)>0||(null!==(i=r.shipping)&&void 0!==i?i:0)>0,has_ephemeral_messages_turned_on:(0,o.isEphemeralSettingOn)(e)}};t.createSendOrderDetailsExtraAttributes=a;t.createSendOrderDetailsWamEvent=(e,t,r,n,o,c)=>{const s=a(e,r,n);return new i.OrderDetailsActionsSmbWamEvent({orderDetailsCreationAction:u.ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_DETAILS,actionCategory:l.default.ORDER_DETAILS_CREATION,hasCatalog:o,hasAddedPrice:c,orderDetailEntryPoint:t,extraAttributes:JSON.stringify(s)})}},665195:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMsgFromProducts=a,t.notifyIfAnyProductMissesPrice=void 0;var o=r(625786),l=r(390737),i=r(548360),u=(n(r(667294)),r(785893));function a(e){const t=e.length;return 0===t?"":1===t?i.fbt._("Enter a price for {first-product-name}",[i.fbt._param("first-product-name",e[0])],{hk:"Lf39K"}):2===t?i.fbt._("Enter prices for {first-product-name} and {second-product-name}",[i.fbt._param("first-product-name",e[0]),i.fbt._param("second-product-name",e[1])],{hk:"1uLet0"}):i.fbt._({"*":"Enter prices for {first-product-name}, {second-product-name} and {other-items} other items",_1:"Enter prices for {first-product-name}, {second-product-name} and 1 other item"},[i.fbt._plural(t-2,"other-items"),i.fbt._param("first-product-name",e[0]),i.fbt._param("second-product-name",e[1])],{hk:"1Crsuq"})}t.notifyIfAnyProductMissesPrice=(e,t)=>{const r=a(e.reduce(((e,r)=>{var n;const o=null!==(n=r.price)&&void 0!==n?n:t[r.id];return Number.isInteger(o)||e.push(r.name||""),e}),[]));r&&l.ToastManager.open((0,u.jsx)(o.Toast,{duration:1e4,msg:r,action:{actionText:i.fbt._("OKAY",null,{hk:"3RIrWh"}),dismiss:!0,theme:"success"}}))}},585110:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ContextDropdownMenu=function(e){const{popover:t}=f((0,o.default)((0,o.default)({},e),{},{initHandling:"contextmenu"}));return t},t.DropdownMenu=function(e){const{popover:t}=f(e);return t},Object.defineProperty(t,"PopoverAlignment",{enumerable:!0,get:function(){return u.PopoverAlignment}}),Object.defineProperty(t,"PopoverPosition",{enumerable:!0,get:function(){return u.PopoverPosition}}),t.useDropdownMenu=f;var o=n(r(81109)),l=n(r(506479)),i=r(690495),u=r(411342),a=r(913290),c=(n(r(667294)),n(r(156720)),r(785893));const s=["children","onSelect","menuRef","listControllerRef","maxHeight","minWidth","initialActiveOptionId","initHandling"],d={container:{borderTopStartRadius:"nl2xi1ke",borderTopEndRadius:"r2bxqa8h",borderBottomEndRadius:"jyp9psb5",borderBottomStartRadius:"n1nfpgil",backgroundColor:"rf2f03pv",boxShadow:"o8gxb310",color:"fkbpgrx9",overflowX:"gfz4du6o",overflowY:"r7fjleex"}};function f(e){const{children:t,onSelect:r,menuRef:n,listControllerRef:f,maxHeight:p,minWidth:m,initialActiveOptionId:g,initHandling:h}=e,y=(0,l.default)(e,s),v=(0,u.usePopoverElement)((0,o.default)((0,o.default)({},y),{},{initHandling:null!=h?h:"click",dismissable:!0,element:(0,c.jsx)(i.FlexItem,{xstyle:d.container,children:(0,c.jsx)(a.WDSMenu,{listControllerRef:f,ref:n,maxHeight:p,minWidth:m,initialActiveOptionId:g,onSelect:(e,t)=>{let{type:n}=t;null==r||r(e),!1===["multi-select","submenu","switch"].includes(n)&&v.hidePopover()},children:t})})}));return v}},41862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMap=function(e){const[t,r]=(0,n.useState)(e?e():()=>new Map),o=(0,n.useCallback)(((e,t)=>new Promise((n=>{r((r=>{const o=new Map(r);return o.set(e,t),n(o),o}))}))),[]),l=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Map(r);return n.delete(e),t(n),n}))}))),[]),i=(0,n.useCallback)((e=>new Promise((t=>{r((()=>{const r=null!=e?new Map(e):new Map;return t(r),r}))}))),[]);return[t,{set:o,unset:l,clear:i}]};var n=r(667294)},487655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSet=function(e){const[t,r]=(0,n.useState)(e?e():()=>new Set),o=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Set(r);return n.add(e),t(n),n}))}))),[]),l=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Set(r);return n.delete(e),t(n),n}))}))),[]),i=(0,n.useCallback)((e=>new Promise((t=>{r((r=>{const n=new Set(r);return n.has(e)?n.delete(e):n.add(e),t(n),n}))}))),[]),u=(0,n.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((t=>{r((()=>{const r=new Set(e);return t(r),r}))}))}),[]);return[t,{add:o,remove:l,toggle:i,clear:u}]};var n=r(667294)},281309:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.createRegister=function(){const e=(0,i.createContext)();return{Register:function(t){return(0,a.jsx)(e.Provider,{value:t.registerRef,children:t.children})},useRegister:function(e){const t={items:new Map,events:new o.default,isRegistered:!1};return(0,i.useEffect)((()=>{var r;null==e||null===(r=e.onRegister)||void 0===r||r.call(e,t.items),t.isRegistered=!0}),[]),(0,u.useListener)(t.events,"change",(()=>{var r;t.isRegistered&&(null==e||null===(r=e.onChange)||void 0===r||r.call(e))})),t},useRegisterItem:function(t,r){const n=(0,i.useContext)(e);if(null==n)throw(0,l.default)("[Register] `useRegisterItem` must be used in a `Register` tree");const o=(0,i.useRef)(null);(0,i.useImperativeHandle)(o,(()=>r)),n.items.set(t,o),(0,i.useEffect)((()=>{const e=n.items;return e.set(t,o),n.events.trigger("change"),()=>{e.delete(t),n.events.trigger("change")}}),[t])}}};var o=n(r(395654)),l=n(r(556869)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),u=r(808446),a=r(785893);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}},913290:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WDSMenu=void 0,t.useMenu=function(){const e=(0,d.useContext)(y);if(null==e)throw(0,s.default)("[Menu] useMenu must be used in a child of a MenuList component");return e},t.useRegisterItem=void 0;var o=n(r(348926)),l=r(465113),i=n(r(395654)),u=r(690495),a=r(281309),c=r(676345),s=n(r(556869)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),f=n(r(156720)),p=r(41862),m=r(739783),g=r(785893);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}const y=(0,d.createContext)(null);const v={container:{display:"p357zi0d",flexGrow:"ggj6brxn"},listContainer:{display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",overflowY:"ag5g9lrv",width:"ln8gz9je"}},{useRegisterItem:b,useRegister:M,Register:j}=(0,a.createRegister)();t.useRegisterItem=b;const O=(0,d.forwardRef)(((e,t)=>{const{children:r,onSelect:n,forceSelection:a,initialActiveOptionId:s,maxHeight:h,minWidth:b,colorScheme:O="lighter",size:S="small"}=e,[x,{clear:w}]=(0,p.useMap)(),P=M({onRegister:(_=(0,o.default)((function*(e){yield w(e)})),function(){return _.apply(this,arguments)})});var _;const[C,I]=(0,d.useState)(),k=(0,d.useMemo)((()=>new i.default),[]),R=(0,d.useRef)(),D=(0,d.useMemo)((()=>null!=C?C:Array.from(x.keys())),[C,x]),{activeItem:T,listSelection:A,NavigatableList:E}=(0,m.useNavigatableList)(D),W=function(){var e=(0,o.default)((function*(e){yield I(e)}));return function(){return e.apply(this,arguments)}}(),L=e=>{const t=x.get(e);if(null!=t&&null!=t.current){var r;const o=t.current;null===(r=o.onSelect)||void 0===r||r.call(o);const l=function(e){const t=[];return e.forEach(((e,r)=>{null!=e.current&&t.push([r,e.current])})),new Map(t)}(x);k.trigger("select",e,o,l),null==n||n(e,o,l)}else __LOG__(3)`[Menu] Trying to handle onSelect without a valid option '${e}'`},F=e=>{e.stopPropagation(),e.preventDefault()},N=(0,d.useCallback)((e=>{const t=D.indexOf(e);if(null!=R.current){var r;const e=null===(r=R.current)||void 0===r?void 0:r.children[t];null!=e&&(0,l.scrollIntoViewIfNeeded)(e,!1,R.current)}}),[D,R]);(0,d.useEffect)((()=>{null!=T&&N(T)}),[T,N]);const B=x.size>0;(0,d.useEffect)((()=>{null!=s&&D.includes(s)&&A.setVal(s)}),[B]);const q={items:x,events:k,activeItemId:T,filteredItems:null!=C?new Set(C):null,filterItems:W,selectItem:L,colorScheme:O,size:S};return(0,g.jsx)(j,{registerRef:P,children:(0,g.jsx)(y.Provider,{value:q,children:(0,g.jsx)("div",{ref:t,role:"listbox","data-testid":"dropdown",className:(0,f.default)([v.container,c.uiPadding.all8]),style:{maxHeight:h,minWidth:b},children:(0,g.jsx)(E,{xstyle:v.listContainer,items:A,onSelect:L,handlers:{down:F,up:F,enter:F},forceSelection:a,rotate:!0,children:(0,g.jsx)(u.FlexColumn,{align:"stretch",tabIndex:0,ref:R,children:r})})})})})}));t.WDSMenu=O,O.displayName="WDSMenu"},957533:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.WDSMenuItem=void 0,t.useMenuGroup=function(e){const t=(0,u.useMenu)();if(null==t)throw(0,a.default)("[Menu] MenuGroup must be a child of a MenuItemList");const r=(0,c.useRef)();(0,c.useImperativeHandle)(r,e),(0,c.useEffect)((()=>{const e=(e,t,n)=>{var o;null!=r.current&&r.current.optionIds.has(e)&&(null===(o=r.current)||void 0===o||o.onSelect(e,t,n))};return t.events.on("select",e),()=>{t.events.off("select",e)}}),[r])},t.useMenuItem=f;var o=r(180519),l=n(r(625903)),i=r(219753),u=r(913290),a=n(r(556869)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),s=(n(r(156720)),r(785893));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function f(e,t){(0,u.useRegisterItem)(e,t);const r=(0,u.useMenu)();if(null==r)throw(0,a.default)("[Menu] MenuItem must be a child of a MenuItemList");return{menu:r,colorScheme:r.colorScheme,size:r.size,isActive:(null==r?void 0:r.activeItemId)===e,isFiltered:null!=r.filteredItems&&!1===r.filteredItems.has(e)}}const p={container:{textAlign:"ljrqcn24",borderTopStartRadius:"bbr44loe",borderTopEndRadius:"ooj5yc5b",borderBottomEndRadius:"m8i16etx",borderBottomStartRadius:"cw0ivh8j",overflowX:"gfz4du6o",overflowY:"r7fjleex",display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"oq44ahr5",flexBasis:"lb5m6g5c",alignSelf:"l33m68ws",width:"ln8gz9je"},disabled:{cursor:"h2qzpyga"}},m=(0,c.forwardRef)(((e,t)=>{const{optionId:r,primary:n,detailRight:u,secondary:a,primaryRight:c,secondaryRight:d,detailLeft:m,disabled:g,children:h,type:y,onSelect:v,searchCriteria:b,size:M,testid:j}=e,{menu:O,isActive:S,isFiltered:x,colorScheme:w,size:P}=f(r,{id:r,type:y,label:n,searchCriteria:b,onSelect:v});return!0===x?null:(0,s.jsxs)(l.default,{ref:t,role:"listitem",xstyle:[p.container,!0===g&&p.disabled],onClick:!0!==g?e=>{e.stopPropagation(),O.selectItem(r)}:null,tabIndex:-1,testid:j,children:[(0,s.jsx)(i.WDSCell,{size:null!=M?M:P,colorScheme:w,disabled:g,primary:(0,s.jsx)(o.WDSTextTitle,{children:n}),primaryRight:c,secondary:(0,s.jsx)(o.WDSTextMuted,{children:a}),secondaryRight:d,detailLeft:m,detailRight:u,active:S,tabIndex:-1}),h]})}));t.WDSMenuItem=m,m.displayName="WDSMenuItem"},752104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActionMenuItem",{enumerable:!0,get:function(){return n.ActionMenuItem}}),Object.defineProperty(t,"MenuSearchInput",{enumerable:!0,get:function(){return o.MenuSearchInput}}),Object.defineProperty(t,"MenuSection",{enumerable:!0,get:function(){return i.MenuSection}}),Object.defineProperty(t,"SelectMenuItem",{enumerable:!0,get:function(){return l.SelectMenuItem}}),Object.defineProperty(t,"SelectMenuItemGroup",{enumerable:!0,get:function(){return l.SelectMenuItemGroup}}),Object.defineProperty(t,"SubMenuItem",{enumerable:!0,get:function(){return u.SubMenuItem}}),Object.defineProperty(t,"SwitchMenuItem",{enumerable:!0,get:function(){return a.SwitchMenuItem}});var n=r(136351),o=r(891382),l=r(401108),i=r(273275),u=r(279772),a=r(321725)},136351:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.ActionMenuItem=function(e){return(0,i.jsx)(l.WDSMenuItem,(0,o.default)((0,o.default)({},e),{},{type:"action"}))};var o=n(r(81109)),l=r(957533),i=(n(r(667294)),r(785893))},891382:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSearchInput=function(){const e=(0,a.useMenu)(),t=e=>{e.stopPropagation(),e.preventDefault()},r=function(){var t=(0,o.default)((function*(t){const r=e.items;if(""===t){const t=Array.from(r.keys());return e.filterItems(t)}const n=Array.from(r.values()).map((e=>e.current)).filter(Boolean),o=(0,i.filterPaginate)(n,(e=>(0,u.simpleSearch)(t,[e.searchCriteria])),{pageLength:n.length});yield e.filterItems(o.map((e=>e.id)))}));return function(){return t.apply(this,arguments)}}();return(0,c.jsx)(l.SearchInput,{focusOnMount:!0,colorScheme:"darker",onEnter:()=>{null!=e.activeItemId&&e.selectItem(e.activeItemId)},onClick:t,onFocus:t,onBlur:t,onSearch:r,placeholder:""})};var o=n(r(348926)),l=r(745170),i=r(522519),u=r(268755),a=r(913290),c=(n(r(667294)),r(785893))},401108:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SelectMenuItem=function(e){const t=(0,p.useContext)(v);if(null==t)throw(0,f.default)("[menu] `SelectMenuItem` must be used inside of a `SelectMenuItemGroup`");const r=t.selection.has(e.optionId);let n,l;t.isMultiselect?(n="multi-select",l=r?(0,h.jsx)(i.CheckboxRoundCheckedIcon,{}):(0,h.jsx)(u.CheckboxRoundUncheckedIcon,{})):(n="single-select",l=r?(0,h.jsx)(a.CheckmarkIcon,{color:c.SvgColorProp.TEAL}):null);return(0,h.jsx)(d.WDSMenuItem,(0,o.default)((0,o.default)({detailRight:l},e),{},{type:n}))},t.SelectMenuItemGroup=function(e){const{multiselect:t,children:r,initialSelection:n}=e,o=(0,s.useMenu)(),[i,{clear:u,toggle:a}]=(0,g.useSet)(),c=p.Children.map(r,(e=>e.props.optionId)),d=function(){var r=(0,l.default)((function*(r,n){var o;let l;l=!0===t?yield a(r):yield u([r]),null===(o=e.onSelect)||void 0===o||o.call(e,r,n,l)}));return function(){return r.apply(this,arguments)}}();return(0,m.useListener)(o.events,"select",function(){var e=(0,l.default)((function*(e,t){c.includes(e)&&(yield d(e,t))}));return function(){return e.apply(this,arguments)}}()),(0,p.useEffect)((()=>{if(null!=n){const e=Array.isArray(n)?n:[n];u(e)}}),[]),(0,h.jsx)(v.Provider,{value:{selection:i,isMultiselect:!0===t},children:r})};var o=n(r(81109)),l=n(r(348926)),i=r(95833),u=r(827728),a=r(969579),c=r(220584),s=r(913290),d=r(957533),f=n(r(556869)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),m=r(808446),g=r(487655),h=r(785893);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}const v=(0,p.createContext)(null)},273275:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuSection=function(e){let{scroll:t}=e,r=(0,l.default)(e,c);return(0,a.jsx)(i.FlexColumn,(0,o.default)((0,o.default)({},r),{},{className:(0,u.default)(!0===t&&s.scroll)}))};var o=n(r(81109)),l=n(r(506479)),i=r(690495),u=(n(r(667294)),n(r(156720))),a=r(785893);const c=["scroll"],s={scroll:{overflowY:"ag5g9lrv"}}},279772:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuItem=function(e){const{children:t}=e,r=(0,l.default)(e,f),{activeItemId:n}=(0,a.useMenu)(),p=(0,s.useRef)(null),m=(0,s.useRef)(),g=n===e.optionId;return(0,s.useEffect)((()=>{null!=m.current&&(g?m.current.showPopover():m.current.hidePopover())}),[g]),(0,d.jsx)(c.WDSMenuItem,(0,o.default)((0,o.default)({ref:p},r),{},{type:"submenu",onSelect:()=>{null!=m.current&&(m.current.popoverIsVisible?m.current.hidePopover():m.current.showPopover())},detailRight:(0,d.jsx)(i.ChevronRightIcon,{width:20}),children:(0,d.jsx)(u.DropdownMenu,{controllerRef:m,buffer:-8,target:p,position:u.PopoverPosition.End,alignment:u.PopoverAlignment.Start,initHandling:"hover-popover",children:t})}))};var o=n(r(81109)),l=n(r(506479)),i=r(181712),u=r(585110),a=r(913290),c=r(957533),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),d=r(785893);const f=["children"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}},321725:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchMenuItem=function(e){const{initialState:t=!1,onSelect:r}=e,n=(0,l.default)(e,s),[d,f]=(0,a.useState)(t);return(0,c.jsx)(u.WDSMenuItem,(0,o.default)((0,o.default)({},n),{},{type:"switch",onSelect:()=>{f(!d),null==r||r(!d)},primaryRight:(0,c.jsx)(i.Switch,{checked:d,onChange:()=>{},tabIndex:-1})}))};var o=n(r(81109)),l=n(r(506479)),i=r(137506),u=r(957533),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),c=r(785893);const s=["initialState","onSelect"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}},825548:(e,t,r)=>{"use strict";var n=r(595318);Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;var o=n(r(81109)),l=r(641711),i=r(585110),u=n(r(469733)),a=r(891382),c=r(401108),s=r(589332),d=r(676345),f=n(r(625903)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=o?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(667294)),m=n(r(156720)),g=n(r(576191)),h=n(r(38085)),y=r(785893);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}const b={selectDropdownContainer:{position:"g0rxnol2",color:"k2bacm8l"},select:{display:"p357zi0d",alignItems:"gndfcl4n",textAlign:"ljrqcn24",position:"g0rxnol2",backgroundColor:"f6cvynhn",borderTop:"kagi745y",borderEnd:"evq3mrnv",borderBottom:"daad4uqs",borderStart:"jdssz2gn",borderTopStartRadius:"m2gb0jvt",borderTopEndRadius:"rfxpxord",borderBottomEndRadius:"gwd8mfxi",borderBottomStartRadius:"mnh9o63b",overflowX:"gfz4du6o",overflowY:"r7fjleex",whiteSpace:"le5p0ye3",textOverflow:"lhj4utae",cursor:"ajgl1lbb",userSelect:"rkxvyd19",boxSizing:"cm280p3y",width:"ln8gz9je"},selectFocused:{borderTop:"ggk2mtcd",borderEnd:"c4hi5cu5",borderBottom:"dorenqkw",borderStart:"pidw8noc"},label:{overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae"}},M={select:{height:"qmp0wt83"}},j={select:{height:"sai7fuui"}},O=(0,p.forwardRef)(((e,t)=>{const{children:r,label:n,size:o="large",width:i,ariaRoleDescription:a}=e,[c,s]=(0,g.default)(),p=(0,h.default)(c,t);return(0,y.jsxs)("div",{className:(0,m.default)(b.selectDropdownContainer),"aria-roledescription":a,style:{width:i},children:[(0,y.jsxs)(f.default,{onClick:e=>{e.stopPropagation()},ref:p,xstyle:[b.select,"large"===o&&[M.select,d.uiPadding.start24,d.uiPadding.end36],"small"===o&&[j.select,d.uiPadding.horiz16],s&&b.selectFocused],children:[(0,y.jsx)(u.default,{grow:1,justify:"start",xstyle:b.label,children:n}),(0,y.jsx)(l.CaretDownIcon,{xstyle:d.uiPadding.start8})]}),r]})}));O.displayName="SelectButton";const S=(0,p.forwardRef)(((e,t)=>{const{defaultLabel:r,customLabel:n,children:l,popoverControllerRef:u,menuMinWidth:d,menuMaxHeight:f,ariaRoleDescription:m,size:g,width:v,includeSearchInput:b}=e,M=new Map(p.Children.toArray(l).map((e=>[e.props.optionId,{optionId:e.props.optionId,label:e.props.primary}]))),j=e=>{var t,o;let l;if(null!=n&&(l=n(e)),null==l&&null!=e&&e.size){const t=Array.from(e).map((e=>{var t;const r=null===(t=M.get(e))||void 0===t?void 0:t.label;return null!=r?[r,", "]:null})).filter(Boolean).flat().slice(0,-1);l=t.length?t:null}return null!==(t=null!==(o=l)&&void 0!==o?o:r)&&void 0!==t?t:""},S=(0,p.useRef)(null),x=(0,h.default)(t,S),w=(0,p.useRef)(null),P=(0,s.toArray)(e.initialSelection),[_,C]=(0,p.useState)(P),[I,k]=(0,p.useState)(j(new Set(P))),R=!0===e.multiselect?{multiselect:!0,initialSelection:_}:{multiselect:!1,initialSelection:_[0]};return(0,y.jsx)(O,{ref:x,ariaRoleDescription:m,size:g,label:I,width:v,children:(0,y.jsxs)(i.DropdownMenu,{target:S,listControllerRef:w,controllerRef:u,position:i.PopoverPosition.Bottom,alignment:i.PopoverAlignment.Start,maxHeight:f,minWidth:null!=d?Math.max(d,v):v,initHandling:"click",initialActiveOptionId:_[0],children:[!0===b?(0,y.jsx)(a.MenuSearchInput,{}):null,(0,y.jsx)(c.SelectMenuItemGroup,(0,o.default)((0,o.default)({},R),{},{onSelect:(t,r,n)=>{const o=j(n);var l,i;(k(o),C(Array.from(n)),!0===e.multiselect)?null===(l=e.onChange)||void 0===l||l.call(e,t,n.has(t),new Set(n)):null===(i=e.onChange)||void 0===i||i.call(e,t)},children:l}))]})})}));t.Select=S,S.displayName="Select"}}]);
//# sourceMappingURL=https://web.whatsapp.com/1761.89cb2381f359f3a64895.js.map
