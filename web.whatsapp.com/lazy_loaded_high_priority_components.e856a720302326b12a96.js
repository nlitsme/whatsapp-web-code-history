/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkbuild=self.webpackChunkbuild||[]).push([[7205],{73831:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupDesc=function(e,t=""){return f((0,h.unproxy)(e),t)};var n=i(a(2784)),l=a(8507),r=s(a(13277)),o=a(33576),d=i(a(24461)),c=s(a(38637)),u=a(78402),p=s(a(2661)),h=a(47138);function f(e,t="",a=(0,l.genId)()){var s=t&&t.trim();if(s===e.groupMetadata.desc)return Promise.reject(new d.ActionError);""===s&&(s=null);var i=(0,u.sendSetGroupDescription)(e.id,s,(0,p.default)(),e.groupMetadata.descId),h=e.groupMetadata.desc,m=new l.ActionType(c.default.t(103)),E=i.then((()=>new l.ActionType(c.default.t(105),{actionText:c.default.t(203),actionHandler:()=>f(e,h,a)}))).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=400)return new l.ActionType(c.default.t(104))})).catch((()=>(__LOG__(3)`models:chat:setGroupDesc dropped`,new l.ActionType(c.default.t(104),{actionText:c.default.t(199),actionHandler:()=>f(e,s,a)}))));return r.default.openToast(n.createElement(l.ActionToast,{id:a,initialAction:m,pendingAction:E})),i.then((t=>{t._duplicate||e.groupMetadata.set({desc:s||""})})).catchType(o.ServerStatusCodeError,(()=>{}))}},80650:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t=""){return f((0,p.unproxy)(e),t)};var n=i(a(2784)),l=a(8507),r=s(a(13277)),o=a(33576),d=i(a(24461)),c=s(a(38637)),u=a(78402),p=a(47138),h=a(30421);function f(e,t,a=(0,l.genId)()){var s=t.trim();if(!s)return Promise.reject(new d.ActionError);if(s===e.contact.name)return Promise.reject(new d.ActionError);var i=(0,u.sendSetGroupSubject)(e.id,s),p=e.contact.name,m=new l.ActionType(c.default.t(123)),E=i.then((()=>new l.ActionType(c.default.t(122,{subject:s}),{actionText:c.default.t(203),actionHandler:()=>f(e,p,a)}))).catchType(o.ServerStatusCodeError,(e=>{if(e.status>=400)return new l.ActionType(c.default.t(121))})).catch((()=>(__LOG__(3)`models:chat:setSubject dropped`,new l.ActionType(c.default.t(121),{actionText:c.default.t(199),actionHandler:()=>f(e,s,a)}))));return r.default.openToast(n.createElement(l.ActionToast,{id:a,initialAction:m,pendingAction:E})),i.then((t=>{if(!t._duplicate){var a={name:s};return(0,h.updateLocal)(e.contact.id,a).then((()=>{e.contact.set(a)}))}})).catchType(o.ServerStatusCodeError,(()=>{}))}},16531:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(10453)),r=s(a(90370));class o extends n.Component{constructor(...e){super(...e),this.contextEnabled=()=>{var{contextEnabled:e,contact:t}=this.props;return null!=e&&e(t)},this.onContext=e=>{var{onContext:t,contact:a}=this.props;return t&&t(e,a)}}render(){var{contact:e,participant:t,onClick:a,contextMenu:s,isPendingParticipant:i}=this.props;return n.createElement(l.default,{contact:e,admin:t.isAdmin,onClick:a,theme:"drawer-list",contextEnabled:this.contextEnabled,contextMenu:s,onContext:this.onContext,isPendingParticipant:i,showNotifyName:!0,waitIdle:!0})}}o.CONCERNS={participant:["isAdmin"]},o.displayName="Participant";var d=(0,r.default)(o,o.CONCERNS);t.default=d},61974:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(58527)),l=i(a(22220)),r=s(a(2784)),o=a(62820),d=i(a(13752)),c=i(a(20468)),u=i(a(38637)),p=i(a(4739)),h=i(a(11986)),f=i(a(18779));class m extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{docMsgs:a,chat:s}=this.props;this.props.listeners.uiIdle((()=>{a.queryDocs(s,t)}))}}componentDidMount(){this.props.listeners.add(this.props.docMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.docMsgs,"query_doc_before",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}))}render(){var e,t=this.props,{docMsgs:a,listeners:s,chat:i}=t,p=(0,l.default)(t,["docMsgs","listeners","chat"]);return c.default.supportsFeature(c.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.createElement(d.default,{icon:r.createElement(f.default,{name:"content-chat"}),theme:"list",secondary:u.default.t(500)},u.default.t(501))),r.createElement(r.Fragment,null,r.createElement(h.default,(0,n.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasDocBefore,queryBefore:a.queryDocBefore,emptyText:u.default.t(1086),chat:i},p)),e)}}m.displayName="DocGallery";var E=(0,p.default)(m);t.default=E},50018:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var n=i(a(2784)),l=s(a(72779)),r=s(a(32944)),o=s(a(37632));function d(e){var t=null!=e.side?n.createElement("div",{className:o.default.side},e.side):null,a=(0,l.default)(o.default.container,{[o.default.multiline]:e.multiline});return n.createElement("div",{"data-a8n":r.default.key(e.a8nText),className:a,role:e.onClick?"button":null,onClick:e.onClick},n.createElement("div",{className:o.default.block},n.createElement("div",{className:o.default.main},e.children),t))}d.displayName="DrawerBlock"},25758:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g,t.BaseEphemeralSettingRow=S;var n=i(a(2784)),l=a(25559),r=s(a(13277)),o=s(a(76176)),d=s(a(50018)),c=s(a(54151)),u=s(a(20468)),p=a(81322),h=s(a(38637)),f=s(a(90370)),m=s(a(18779)),E=a(74315);function g(e){var{chat:t,groupMetadata:a,onClick:s}=e;return a?n.createElement(M,{groupMetadata:a,onClick:s}):n.createElement(_,{chat:t,onClick:s})}g.displayName="EphemeralSettingRow";class v extends n.PureComponent{constructor(...e){super(...e),this._getEphemeralDuration=()=>{var e;return null!==(e=this.props.chat.ephemeralDuration)&&void 0!==e?e:0},this._unblockContact=()=>{var{chat:e,onClick:t}=this.props;e.contact.addPendingAction((0,l.unblockContact)(e.contact)).then((()=>{t(),r.default.closeModal()})).catch((()=>{}))},this._closeModal=()=>{r.default.closeModal()},this._openUnblockContactModal=()=>{r.default.openModal(n.createElement(o.default,{onOK:this._unblockContact,okText:h.default.t(1371),onCancel:this._closeModal,cancelText:h.default.t(1558)},this._getEphemeralDuration()?h.default.t(638):h.default.t(639)))},this._handleClick=()=>{var{chat:e,onClick:t}=this.props;e.contact.isContactBlocked?this._openUnblockContactModal():t()}}render(){return n.createElement(S,{ephemeralDuration:this._getEphemeralDuration(),canChange:!0,onClick:this._handleClick})}}v.CONCERNS={chat:["contact","ephemeralDuration"]},v.displayName="ContactEphemeralSettingRow";var _=(0,f.default)(v,v.CONCERNS);class C extends n.PureComponent{constructor(...e){super(...e),this._closeModal=()=>{r.default.closeModal()},this._openNonAdminModal=()=>{r.default.openModal(n.createElement(o.default,{onOK:this._closeModal,okText:h.default.t(1726)},h.default.t(578)))},this._handleClick=()=>{var{onClick:e,groupMetadata:t}=this.props;t.canSetEphemeralSetting()?e():this._openNonAdminModal()}}render(){var e,{groupMetadata:t}=this.props;return n.createElement(S,{ephemeralDuration:null!==(e=t.ephemeralDuration)&&void 0!==e?e:0,canChange:t.canSetEphemeralSetting(),onClick:this._handleClick})}}C.CONCERNS={groupMetadata:["ephemeralDuration","participants"]},C.displayName="GroupEphemeralSettingRow";var M=(0,f.default)(C,C.CONCERNS);function S(e){var t,{ephemeralDuration:a,canChange:s,onClick:i}=e;t=a>0?s?u.default.isEphemeral24HDurationEnabled()?(0,p.getEphemeralDurationString)(a):h.default.t(633):(0,p.getEphemeralExplanationString)(a):h.default.t(632);var l=n.createElement(m.default,{className:s?c.default.chevronIcon:c.default.ephemeralIcon,name:s?"chevron-right-alt":"disappearing",directional:!0});return n.createElement(d.default,{onClick:i,side:l,multiline:!0},n.createElement("div",{className:c.default.header},n.createElement(E.TextSpan,{theme:"title"},h.default.t(740))),n.createElement(E.TextDiv,{theme:"muted"},t))}S.displayName="BaseEphemeralSettingRow"},8688:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(58527)),l=i(a(22220)),r=s(a(2784)),o=a(62820),d=i(a(23045)),c=i(a(13752)),u=i(a(20468)),p=i(a(38637)),h=i(a(75969)),f=i(a(4739)),m=i(a(11986)),E=i(a(58987)),g=i(a(18779));class v extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._onNewMsgs=e=>{if(e){var t=[],a=Array.isArray(e)?e:[e];Promise.all(a.map((e=>(e.getLinks().length&&t.push(e),Promise.resolve())))).then((()=>{t.length&&this.props.linkMsgs.add(t)}))}},this._queryCollection=(e,t)=>{var{linkMsgs:a,chat:s}=this.props;this.props.listeners.uiIdle((()=>{a.queryLinks(s,t)}))},this._renderLinks=e=>{var{linkMsgs:t,selectedMessages:a}=this.props,s=[];return t.forEach((t=>{var i=!t.isSentByMe&&t.isGroupMsg;t.getGalleryLinks().forEach(((n,l)=>{n.href!==t.matchedText&&s.push(r.createElement(h.default,{key:`${t.id.toString()}-${l}`,msg:t.safe(),link:n,displayAuthor:i,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,onClickMsg:e}))})),t.linkPreview&&s.push(r.createElement(E.default,{key:t.id.toString(),msg:t,selectable:this.props.selectable,selectedMessages:a,onMessageSelect:this.props.onMessageSelect,displayType:d.default.DISP_TYPE.GALLERY,onClickMsg:e}))})),s.reverse(),s}}componentDidMount(){this.props.listeners.add(this.props.linkMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.linkMsgs,"query_link_before",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()})),this.props.listeners.add(this.props.chat.msgs,"add bulk_add",this._onNewMsgs)}render(){var e,t=this.props,{linkMsgs:a,listeners:s,chat:i}=t,d=(0,l.default)(t,["linkMsgs","listeners","chat"]);return u.default.supportsFeature(u.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.createElement(c.default,{icon:r.createElement(g.default,{name:"content-chat"}),theme:"list",secondary:p.default.t(500)},p.default.t(503))),r.createElement(r.Fragment,null,r.createElement(m.default,(0,n.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasLinkBefore,queryBefore:a.queryLinkBefore,renderElements:this._renderLinks,emptyText:p.default.t(1088),chat:i},d)),e)}}v.displayName="LinkGallery";var _=(0,f.default)(v);t.default=_},75969:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(72779)),l=s(a(2784)),r=i(a(79784)),o=a(90887),d=i(a(23045)),c=i(a(30905)),u=i(a(84160)),p=i(a(38637)),h=i(a(93794)),f=i(a(54384)),m=i(a(4739)),E=i(a(37662)),g=i(a(90370)),v=i(a(50171)),_=i(a(82838)),C=a(24782);class M extends l.Component{constructor(e){super(e),this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.onSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.onSelectClick=e=>{e&&e.stopPropagation(),this.props.onMessageSelect(this.props.msg.unsafe(),!this.state.selected)},this.onClick=()=>{this.props.onClickMsg(this.props.msg.unsafe(),!this.state.selected)};var{msg:t,selectedMessages:a}=e;this.state={hover:!1,selected:a.isSelected(t.unsafe())}}componentDidMount(){this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this.onSelectChange)}render(){var{msg:e,link:t,displayAuthor:a}=this.props,s=this.props.selectable||this.state.hover?l.createElement(E.default,{checked:this.state.selected,onClick:this.onSelectClick,msgTheme:"gallery"}):null,i=(0,o.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:true,trusted:e.isTrusted()}),m=e.body&&e.body.includes(t.url)?e.body:e.caption,g=a?l.createElement("div",{className:h.default.author},l.createElement(r.default,{msg:e,contact:e.senderObj})):null,M=e.getSuspiciousLinks().length>0;return l.createElement(u.default,{hover:this.state.hover,onClick:this.onClick,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},l.createElement("div",{className:h.default.msg},l.createElement(_.default,{transitionName:"delay-leave"},s),l.createElement(C.MessageContainer,{isSentByMe:e.isSentByMe},l.createElement("div",{className:(0,n.default)(h.default.bubble,{[h.default.hasAuthor]:a,[h.default.hasSuspiciousLinks]:M})},g,l.createElement(v.default,{link:t,displayType:d.default.DISP_TYPE.GALLERY}),l.createElement(f.default,{title:t.url,isSentByMe:e.isSentByMe,canonicalUrl:t.domain,displayType:d.default.DISP_TYPE.GALLERY,star:e.star}),l.createElement(c.default,{text:m,selectable:true,className:h.default.text,dirMismatch:e.rtl!==p.default.isRTL(),direction:e.dir,formatters:i})))))}}M.CONCERNS={msg:["body","caption","dir","id","isSentByMe","mediaData","type","rtl","senderObj","star","mediaData","asRevoked"]},M.displayName="LinkMsg";var S=(0,m.default)((0,g.default)(M,M.CONCERNS));t.default=S},11986:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(12436)),l=s(a(2784)),r=i(a(13277)),o=i(a(23045)),d=a(83251),c=i(a(13663)),u=i(a(4613)),p=i(a(58987)),h=a(47138);class f extends l.Component{constructor(...e){super(...e),this._setScrollContainer=e=>{this._scrollContainer=e},this._onScroll=e=>{this._handleScroll(e.target)},this._handleScroll=(0,n.default)((e=>{var{hasBefore:t,msgsCollection:a,setScrollOffset:s}=this.props,i=e.scrollHeight-e.clientHeight-e.scrollTop<o.default.SCROLL_FUDGE;t&&i&&this._queryCollection(a.head()),s&&s(e.scrollTop)}),100),this._handleClickMsg=(e,t)=>{var a=(0,h.unproxy)(e);this.props.selectable&&void 0!==t?this.props.onMessageSelect(a,t):r.default.openChatAt(a.chat,a.chat.getSearchContext(a))}}componentDidMount(){var{hasBefore:e,scrollOffset:t}=this.props;e&&this._queryCollection(),this._scrollContainer&&(this._scrollContainer.scrollTop=t)}componentWillUnmount(){this._handleScroll.cancel()}_queryCollection(e){var{hasBefore:t,queryCollection:a}=this.props;t&&a(e)}_renderElements(){var{msgsCollection:e,selectedMessages:t,renderElements:a}=this.props;return a?a(this._handleClickMsg):e.map(((e,a)=>l.createElement(p.default,{key:`${e.id.toString()}_${a}`,msg:e,selectable:this.props.selectable,selectedMessages:t,onMessageSelect:this.props.onMessageSelect,displayType:o.default.DISP_TYPE.GALLERY,onClickMsg:this._handleClickMsg,onProductClick:this.props.onProductDetail}))).reverse()}render(){var{queryBefore:e,hasBefore:t,msgsCollection:a,emptyText:s}=this.props,i=this._renderElements();if(e){if(0===i.length)return l.createElement(d.Loading,null);i.push(l.createElement(c.default,null))}return 0!==a.length||e||t?l.createElement("div",{ref:this._setScrollContainer,onScroll:this._onScroll,className:u.default.wrapper},i):l.createElement(d.Empty,{text:s,a8nText:"no-elements"})}}t.default=f,f.defaultProps={scrollOffset:0},f.displayName="MessageGallery"},85471:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(32944)),r=s(a(93257)),o=s(a(99461)),d=s(a(13277)),c=s(a(76176)),u=s(a(50018)),p=a(9690),h=s(a(38637)),f=s(a(90370)),m=a(47138),E=a(74315);class g extends n.PureComponent{constructor(...e){super(...e),this.onMute=e=>{d.default.muteChat((0,m.unproxy)(this.props.chat),e)},this.onUnmute=()=>{var e=this.props.chat.isGroup?h.default.t(487):h.default.t(485);d.default.openModal(n.createElement(c.default,{onOK:this.unmute,okText:h.default.t(83),onCancel:()=>d.default.closeModal(),cancelText:h.default.t(1558)},e))},this.unmute=()=>{this.onMute(!1),d.default.closeModal()}}render(){var{mute:e,settings:t,chat:a}=this.props,s=e.isMuted,i=a.muteExpiration;if(a.archive&&(0,p.archiveV2Supported)()&&t.showArchiveV2)return n.createElement(u.default,null,n.createElement(E.TextSpan,{theme:"muted",size:"16"},h.default.t(237)));var d,c=s?this.onUnmute:()=>{this.onMute(!0)},f=n.createElement(r.default,{checked:s,onChange:c}),m=s?h.default.t(1567):h.default.t(1706);if(s&&i){var g=o.default.untilStr(i);d=n.createElement(E.TextDiv,{theme:"muted"},g)}return n.createElement(u.default,{a8nText:l.default.key("block-mute"),side:f,onClick:c,multiline:!(!s||!i)},n.createElement(E.TextSpan,{theme:"title"},m),d)}}g.CONCERNS={chat:["isGroup","muteExpiration","archive"],mute:["isMuted"],settings:["showArchiveV2"]},g.displayName="MuteRow";var v=(0,f.default)(g,g.CONCERNS);t.default=v},63785:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(58527)),l=i(a(22220)),r=s(a(2784)),o=a(62820),d=i(a(13752)),c=i(a(20468)),u=i(a(38637)),p=i(a(4739)),h=i(a(11986)),f=i(a(18779));class m extends r.Component{constructor(...e){super(...e),this._setGallery=e=>{this._gallery=e},this._queryCollection=(e,t)=>{var{productMsgs:a,chat:s}=this.props;this.props.listeners.uiIdle((()=>{a.queryProducts(s,t)}))}}componentDidMount(){this.props.listeners.add(this.props.productMsgs,"add remove reset",(()=>{var e;null===(e=this._gallery)||void 0===e||e.forceUpdate()}))}render(){var e,t=this.props,{productMsgs:a,listeners:s,chat:i}=t,p=(0,l.default)(t,["productMsgs","listeners","chat"]);return c.default.supportsFeature(c.default.F.MD_BACKEND)&&i.endOfHistoryTransferType===o.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(e=r.createElement(d.default,{icon:r.createElement(f.default,{name:"content-chat"}),theme:"list",secondary:u.default.t(500)},u.default.t(506))),r.createElement(r.Fragment,null,r.createElement(h.default,(0,n.default)({ref:this._setGallery,msgsCollection:a,queryCollection:this._queryCollection,hasBefore:a.hasProductBefore,queryBefore:a.hasProductBefore?Promise.resolve():null,emptyText:u.default.t(1092),chat:i},p)),e)}}m.displayName="ProductGallery";var E=(0,p.default)(m);t.default=E},74052:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(13277)),r=s(a(76176)),o=s(a(43805)),d=s(a(86708)),c=s(a(30905)),u=s(a(94751)),p=s(a(38637)),h=a(30371);class f extends u.default{constructor(...e){super(...e),this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!o.default.isFilteredContact(e)&&(!t.participants.get(e.id)||p.default.t(224))},this.confirmAddParticipant=e=>{var t=this.onAddParticipant.bind(this,e),a=p.default.t(469,{participant:e.formattedName,subject:this.props.chat.contact.name});this.push(n.createElement(r.default,{onOK:t,okText:p.default.t(213),onCancel:this._pop,cancelText:p.default.t(1558)},n.createElement(c.default,{text:a})))},this.onAddParticipant=e=>{(0,h.addParticipants)(this.props.chat,[e]).catch((()=>{})),l.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(n.createElement(d.default,{title:p.default.t(213),filter:this.contactFilter,onCancel:this._pop,onSelect:this.confirmAddParticipant}))}}t.default=f},67164:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=a(28221),r=s(a(13277)),o=s(a(76176)),d=s(a(43805)),c=s(a(30905)),u=s(a(94751)),p=s(a(38637)),h=a(30371),f=i(a(55231));class m extends u.default{constructor(...e){super(...e),this._isGroupParticipant=e=>{var{chat:t}=this.props;return!!t.groupMetadata.participants.get(e)},this.customSecondaryText=e=>{var{chat:t}=this.props;return t.groupMetadata.participants.get(e)?p.default.t(224):null},this.contactFilter=e=>{var t=this.props.chat.groupMetadata;return!!d.default.isFilteredContact(e)&&(!t.participants.get(e.id)||p.default.t(224))},this.confirmAddParticipant=e=>{var{chat:t}=this.props;this.push(n.createElement(o.default,{onOK:this.onAddParticipant.bind(this,e),okText:p.default.t(213,{_plural:e.length}),onCancel:this._pop,cancelText:p.default.t(1558)},n.createElement(c.default,{text:this._makeNameEnumeration(e,t.contact.name)})))},this._makeNameEnumeration=(e,t)=>{var a=e.map((e=>e.formattedShortName||e.shortName)).reduce(((t,a,s)=>[...t,a,s!==e.length-1&&p.default.t(577)||""]),[]);return p.default.t(470,{participants:a.join(""),subject:t})},this.onAddParticipant=e=>{(0,h.addParticipants)(this.props.chat,e).catch((()=>{})),r.default.closeModal()},this._pop=()=>{this.pop()}}componentDidMount(){this.push(n.createElement(f.default,{onConfirm:this.confirmAddParticipant,filter:this.contactFilter,title:p.default.t(213),isDisabled:this._isGroupParticipant,isSelected:this._isGroupParticipant,customSecondaryText:this.customSecondaryText,listType:f.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:l.FooterType.CONFIRM,multipleSelectionFooterType:l.FooterType.CONFIRM}))}}t.default=m},88412:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(65236)),r=s(a(59649)),o=s(a(94751)),d=s(a(34749));class c extends o.default{constructor(...e){super(...e),this._showArchiveSettingsDrawer=()=>{this.push(n.createElement(l.default,{settings:d.default,onClose:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push(n.createElement(r.default,{showSettings:this._showArchiveSettingsDrawer,onClose:this._pop,settings:d.default}))}}t.default=c},94779:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(58527)),l=s(a(2784)),r=i(a(20673)),o=a(79930),d=i(a(38024)),c=i(a(53419)),u=i(a(39692)),p=i(a(84755)),h=i(a(9054)),f=i(a(94751)),m=i(a(26714)),E=i(a(63406)),g=i(a(12243)),v=a(41214),_=a(57934),C=s(a(49436)),M=a(55439),S=i(a(85387)),N=i(a(3956)),y=i(a(13692)),T=i(a(82773)),b=i(a(47162)),P=i(a(65430));class I extends f.default{constructor(...e){super(...e),this._scrollOffset=0,this._setScrollOffset=e=>{this._scrollOffset=e},this.onProductDetail=e=>{var{chat:t}=this.props,a=l.createElement(S.default,{chat:t,product:e,onEnd:this._end,onBack:this._popAndUpdate,refreshCarousel:!1,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(a)},this.onProductDetailFromInfo=e=>{var t=l.createElement(N.default,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onCartClick:this._onCartClick});this.push(t)},this._onProductLinkClick=e=>{this.push(l.createElement(y.default,{product:e,onBack:this._pop}))},this._onCatalogLinkClick=(e,t)=>{this.push(l.createElement(d.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{var t=(0,M.getProductCatalogContext)(this.props.context),a=(0,o.showCart)(e,this.props.chat,t);a&&this.push(a)},this.pushProductCatalog=()=>{var{chat:e}=this.props,t=l.createElement(T.default,{contact:e.contact,onProductDetail:this.onProductDetail,catalogId:e.id,onBack:this._pop,businessProfile:e.contact.businessProfile,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick});this.push(t)},this.onProductCatalog=e=>{var t=this.props.chat.id;(0,_.logCarouselViewMoreClick)({catalogOwnerWid:t,catalogSessionId:e}),this.pushProductCatalog(t)},this.onProductCatalogHeaderClick=(e,t)=>{(0,_.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogSessionId:t}),this.onProductCatalog(t)},this.onStarred=()=>{var e=l.createElement(b.default,{chat:this.props.chat,starredMsgs:this.props.chat.getStarredMsgs(),onClose:this._pop});this.push(e)},this.onAdminSetting=()=>{var{chat:e}=this.props,t=l.createElement(g.default,{chat:e,groupMetadata:e.groupMetadata,onClose:this._pop});this.push(t)},this.onContactCard=()=>{this.push(l.createElement(c.default,{chat:this.props.chat,onClose:this._pop}))},this.onMediaGallery=()=>{var e=l.createElement(C.default,{chat:this.props.chat,onBack:this._pop,onProductDetail:this.onProductDetail,setProductsScrollOffset:this._setScrollOffset});this.push(e)},this.onGroupInviteLink=()=>{var{chat:e}=this.props,t=l.createElement(E.default,{chat:this.props.chat,groupMetadata:e.groupMetadata,onBack:this._pop});this.push(t)},this._pop=()=>{this.pop()},this._popAndUpdate=()=>{this.popAndUpdate({initialTab:C.TABS.PRODUCTS,productsScrollOffset:this._scrollOffset})},this._end=()=>{this.end(!0)},this.onVerification=e=>{var t=e||this.props.chat.contact,a=l.createElement(P.default,{contact:t,onClose:this._pop,isFirstLevel:!1});this.push(a)},this.onLiveLocation=()=>{var e=l.createElement(v.LiveLocationDrawerLoadable,{chat:this.props.chat,onClose:this._pop});this.push(e)},this.onEphemeral=()=>{var{chat:e}=this.props,t=l.createElement(h.default,{chat:e,fromInfoFlow:!0,onClose:this._pop});this.push(t)}}componentDidMount(){var e=this.onStarred,t=this.onMediaGallery,a=this.props.chat;this.props.chat.isGroup?this.push(l.createElement(m.default,{chat:a,showFullGroupDescription:this.props.showFullGroupDescription,groupMetadata:a.groupMetadata,contact:a.contact,profilePicThumb:a.contact.getProfilePicThumb(),onVerification:this.onVerification,onStarred:e,onMediaGallery:t,onAdminSetting:this.onAdminSetting,onGroupInviteLink:this.onGroupInviteLink,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop})):a.isBroadcast?this.push(l.createElement(r.default,{chat:a,contact:a.contact,onStarred:e,onMediaGallery:t,onClose:this._pop})):a.isUser&&this.push(l.createElement(u.default,{contact:a.contact,onVerification:this.onVerification,onStarred:e,onContactCard:this.onContactCard,onMediaGallery:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,onLiveLocation:this.onLiveLocation,onEphemeral:this.onEphemeral,onClose:this._pop}))}}t.default=e=>l.createElement(p.default.Consumer,null,(t=>l.createElement(I,(0,n.default)({context:t},e))))},11177:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(12436)),l=s(a(2784)),r=i(a(13277)),o=i(a(23045)),d=s(a(24461)),c=i(a(20468)),u=i(a(38637)),p=i(a(4739)),h=a(60301),f=i(a(47770)),m=i(a(5929)),E=i(a(84161)),g=i(a(21830)),v=i(a(85185)),_=i(a(61671)),C=a(476);class M extends l.Component{constructor(e){super(e),this._unmounted=!1,this._addListeners=()=>{var e=()=>this.state.activeMsg,{mediaMsgs:t}=this,{listeners:a}=this.props;a.uiIdle((()=>{var a=e();a&&t.loadMoreAroundIfNeeded(a)}));var s=e();(null==s?void 0:s.isViewOnce)?a.add(s,"revoked",(()=>{this.setState({activeMsg:null}),this.endFlow()})):(a.add(t,"remove",((a,s,i)=>{var n=e();if(t.includes(a)||null!=n&&null!=n.id&&n.id.toString()!==a.id.toString())this.forceUpdate();else{var l=i.index;0===t.length?this.endFlow():t.length===l?this.onSelectThumb((0,g.default)(t.at(l-1),"mediaMsgs.at(index - 1)")):this.onSelectThumb((0,g.default)(t.at(l),"mediaMsgs.at(index)"))}})),a.add(t,"reset",(()=>{this.endFlow()})),a.add(t,"query_media_after",(()=>{this.forceUpdate()})),a.add(t,"query_media_before",(()=>{var e=this._refThumbs;e&&(this._prevScrollWidth=e.scrollWidth,e instanceof HTMLElement&&this.forceUpdate())})))},this.onKeyDown=e=>{var t=u.default.isRTL();37===e.keyCode?t?this.onNext():this.onPrev():39===e.keyCode&&(t?this.onPrev():this.onNext())},this.onImageLoad=()=>{var{uiActionEvent:e}=this;e&&(e.markUiActionT(),e.commit(),delete this.uiActionEvent)},this.onScroll=e=>{this._handleScrollThrottled(e.currentTarget,this.mediaMsgs,e.currentTarget.scrollLeft,this.props.listeners)},this.onNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=null;for(a=this.mediaMsgs.getAfter(t);a&&a.mediaData&&!(0,C.hasThumbnail)(a.mediaData);)a=this.mediaMsgs.getAfter(a);a?this.onSelectThumb(a):this.mediaMsgs.hasMediaAfter&&(this._queryMediaAfter||(this._queryMediaAfter=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"after"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.onNext()})).catchType(d.Unmount,(()=>{})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaAfter=null}))))}}},this.onPrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var t=this.state.activeMsg;if(t){var a=null;for(a=this.mediaMsgs.getBefore(t);a&&a.mediaData&&!(0,C.hasThumbnail)(a.mediaData);)a=this.mediaMsgs.getBefore(a);a?this.onSelectThumb(a):this.mediaMsgs.hasMediaBefore&&(this._queryMediaBefore||(this._queryMediaBefore=this.mediaMsgs.queryMedia({chat:t.chat,msg:t,direction:"before"}).checkpoint(this.props.rejectOnUnmount()).then((e=>{"number"==typeof e.length&&e.length>0&&this.state.activeMsg===t&&this.onPrev()})).catchType(d.Unmount,(()=>{})).catch((()=>{__LOG__(3)`query media msgs error: `})).finally((()=>{this._queryMediaBefore=null}))))}}},this.onImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{r.default.closeModalMedia()},this.willEndFlow=()=>{var e;(e=this._refThumbsContainer)&&(0,_.default)(e,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.onSelectThumb=e=>{this.props.listeners.uiIdle((()=>{this.mediaMsgs.loadMoreAroundIfNeeded(e)})),this.setState({activeMsg:e})},this.scrollToActive=(e=!1)=>{var t=this._refThumbsContainer,a=this._refThumbs,s=this._refActiveThumb;if(t&&a&&s){var i=0;s instanceof HTMLElement&&(i=s.clientWidth/2-t.clientWidth/2),(0,_.default)(a,"stop");var n=0;e&&(n=300),(0,_.default)(s,"scroll",{duration:n,container:a,offset:i,axis:"x",easing:[.1,.82,.25,1]})}},this._setRefActiveThumb=e=>{this._refActiveThumb=e},this.setRefThumbsContainer=e=>{this._refThumbsContainer=e},this.setRefThumbs=e=>{this._refThumbs=e},this._getActiveMsgIndexInAlbum=()=>{var e=-1,{highlightedMsgIds:t}=this.props;if(!t||!this.state.activeMsg)return e;var a=this.state.activeMsg.id.toString();if(!t.has(a))return e;var s=0;return t.forEach((t=>{t===a&&(e=s),s++})),e},this._previousMediaHasThumb=()=>{var e=this.state.activeMsg;if(!e)return!1;for(var t=this.mediaMsgs.indexOf(e)-1;t>0;t--){var a=this.mediaMsgs.at(t);if(a&&(0,C.hasThumbnail)(a.mediaData))return!0}return!1},this._prevScrollWidth=null;var t=this.props.msg;this.mediaMsgs=t.chat.constructMediaMsgs(t),this._handleScrollThrottled=(0,n.default)(this._handleScroll.bind(this),100),t.type===o.default.MSG_TYPE.IMAGE&&(this.uiActionEvent=new E.default.UiAction({uiActionType:E.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:t.mediaData.mediaStage===h.MEDIA_DATA_STAGE.RESOLVED})),this.state={activeMsg:t,imgZoomed:!1,animatingThumbs:this._hasThumbList(t)}}componentDidMount(){this.props.listeners.add(window,"keydown",this.onKeyDown),this._addListeners(),this.scrollToActive(),(e=>{e&&(0,_.default)(e,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then((()=>{this._unmounted||this.setState({animatingThumbs:!1})}))})(this._refThumbsContainer)}componentDidUpdate(e,t){if(t.activeMsg!==this.state.activeMsg)this.scrollToActive(!0);else{var a=this._refThumbs;if(!a||null==this._prevScrollWidth||0===this._prevScrollWidth)return;a instanceof HTMLElement&&(a.scrollLeft+=a.scrollWidth-this._prevScrollWidth),this._prevScrollWidth=null}}componentWillUnmount(){this._handleScrollThrottled.cancel(),this._unmounted=!0}_hasThumbList(e){return!(null==e?void 0:e.isViewOnce)}_handleScroll(e,t,a,s){if(0!==t.length&&null!=a){if(t.hasMediaBefore&&a<e.clientWidth){var i=(0,g.default)(t.head(),"mediaMsgs.head()");s.uiIdle((()=>{t.queryMedia({chat:i.chat,msg:i}),this.forceUpdate()}))}if(t.hasMediaAfter&&a+o.default.SCROLL_FUDGE>e.scrollWidth-2*e.clientWidth){var n=(0,g.default)(t.last(),"mediaMsgs.last()");s.uiIdle((()=>{t.queryMedia({chat:n.chat,msg:n,direction:"after"}),this.forceUpdate()}))}}}render(){var e,t=this.state.activeMsg;if(!t)return null;var a=this.mediaMsgs.last(),s=this.mediaMsgs.hasMediaAfter||this.state.activeMsg!==a?this.onNext:null,i=this.mediaMsgs.head(),n=null;return n=this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==i?this.onPrev:null,c.default.supportsFeature(c.default.F.MD_BACKEND)&&(n=(this.mediaMsgs.hasMediaBefore||this.state.activeMsg!==i)&&this._previousMediaHasThumb()?this.onPrev:null),l.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},this._hasThumbList(t)&&l.createElement(m.default,{activeMsg:t,mediaMsgs:this.mediaMsgs,highlightedMsgIds:this.props.highlightedMsgIds,onSelectThumb:this.onSelectThumb,onSetActiveThumb:this._setRefActiveThumb,onScroll:this.onScroll,setRefThumbsContainer:this.setRefThumbsContainer,setRefThumbs:this.setRefThumbs}),l.createElement(f.default,{msg:t,mediaData:t.mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:s,onPrev:n,onImgZoomIn:this.onImgZoomIn,getZoomNode:this.props.getZoomNode,startTime:this.props.startTime,isAnimatingIn:this.state.animatingThumbs,onImageLoad:this.uiActionEvent?this.onImageLoad:null,msgIndexInAlbum:this._getActiveMsgIndexInAlbum(),albumSize:(null===(e=this.props.highlightedMsgIds)||void 0===e?void 0:e.size)||0}))}}M.displayName="MediaViewerFlow";var S=(0,v.default)((0,p.default)(M));t.default=S},36339:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var n=i(a(2784)),l=s(a(89028)),r=s(a(23045)),o=s(a(38637)),d=s(a(98386)),c=(0,s(a(91163)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,36194)).then((e=>e.default))),"SendContactFlow");t.requireBundle=c;var u=(0,l.default)({loader:c,loading:e=>n.createElement(d.default,{title:o.default.t(1267),error:Boolean(e.error)}),delay:r.default.LOADABLE_DELAY});t.default=u},59649:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(78044)),r=i(a(40953)),o=s(a(85030)),d=s(a(13277)),c=s(a(23045)),u=s(a(3123)),p=s(a(96881)),h=i(a(32597)),f=s(a(81407)),m=s(a(77508)),E=a(83251),g=s(a(85530)),v=s(a(14076)),_=a(66368),C=s(a(18792)),M=a(66239),S=a(9690),N=s(a(19058)),y=s(a(38637)),T=s(a(4739)),b=a(58868),P=s(a(99979)),I=s(a(90370)),k=s(a(18779)),A=s(a(74315)),O=s(a(82838));class D extends n.Component{constructor(...e){super(...e),this.flatListController=new v.default,this.selection=new P.default([],(e=>e.id.toString())),this.state={forceHideNux:!1,chats:this._getArchivedChats()},this.onClick=(e,t)=>{d.default.openChatFromUnread(t).then((e=>{e&&d.default.focusChatTextInput(t)})),(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled||this.onClose()},this._updateSelected=e=>{this.selection.setVal(e,!1)},this.onClose=()=>{this.props.onClose()},this.onNextChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setNext(!0)},this.onPrevChat=e=>{e.preventDefault(),e.stopPropagation(),this.selection.setPrev(!0)},this.shouldShowArchiveV2=()=>(0,S.archiveV2Supported)()&&this.props.settings.showArchiveV2,this._handleCloseChat=e=>{e===this.selection.getVal()&&this.selection.unset()},this.renderItem=e=>n.createElement(r.default,{chat:e.chat,mode:r.Mode.LAST,active:this.selection,onClick:this.onClick,hideArchivedIcon:(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled,hideMuteIcon:this.shouldShowArchiveV2(),hideMuteOption:this.shouldShowArchiveV2(),showEphemeralIcon:!0}),this.setRefHotKeys=e=>{this.refList=e},this._onCloseNux=()=>{(0,M.setNUX)(c.default.NUX.ARCHIVE,{views:c.default.ARCHIVE_NUX_MAX_VIEWS,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),this.setState({forceHideNux:!0})},this._showNux=()=>{var e=o.default.some((e=>e.archive));return this.shouldShowArchiveV2()&&e&&(0,M.shouldShowNUX)(c.default.NUX.ARCHIVE)&&!this.state.forceHideNux}}componentDidMount(){this.shouldShowArchiveV2()&&!(0,M.getNUX)(c.default.NUX.ARCHIVE)&&(0,M.setNUX)(c.default.NUX.ARCHIVE,{views:0,maxViews:c.default.ARCHIVE_NUX_MAX_VIEWS}),this._showNux()&&(0,M.viewNUX)(c.default.NUX.ARCHIVE),this.shouldShowArchiveV2()?this.props.listeners.add(o.default,"sort change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})})):this.props.listeners.add(o.default,"change:archive add remove",(()=>{this.setState({chats:this._getArchivedChats()})})),this.refList&&C.default.focus(this.refList),this.props.listeners.add(d.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(d.default,"close_chat",this._handleCloseChat);var e=this._getActiveArchiveChat();e&&this._updateSelected(e)}_getActiveArchiveChat(){return o.default.toArray().find((e=>e.active&&e.archive))}_getArchivedChats(){return o.default.filter((e=>e.archive))}getData(){return this.state.chats.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){var e,t;if(this.selection.init(this.state.chats,!0),this._showNux()&&(t=n.createElement("div",{className:l.default.nuxContainer},n.createElement(_.FlexColumn,{align:"center"},n.createElement("span",{className:l.default.nuxIcon},n.createElement(k.default,{name:"archive-nux"})),n.createElement("div",{className:l.default.nuxHeader},n.createElement(A.default,{theme:"large",as:"h1"},y.default.t(232))),n.createElement("div",{className:l.default.nuxContent},n.createElement("div",{className:l.default.nuxText},n.createElement(A.default,{theme:"plain",as:"p"},y.default.t(231))))),n.createElement("button",{onClick:this._onCloseNux,className:l.default.btnClose},n.createElement(k.default,{name:"x-alt"})))),this.state.chats.length>0){var a={down:this.onNextChat,up:this.onPrevChat};e=n.createElement(N.default,{onRef:this.setRefHotKeys,handlers:a},n.createElement(O.default,{transitionName:"slide"},t),n.createElement(g.default,{className:l.default.flatListContainer,data:this.getData(),flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem}))}else e=n.createElement(E.Archived,null);var s=(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled?n.createElement(b.MenuBarItem,{a8nText:"archived-menu",icon:n.createElement(k.default,{name:"menu"}),title:y.default.t(941)},n.createElement(f.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ArchivedDrawerHeader",dirX:"LEFT"},n.createElement(m.default,{a8n:"open-archive-settings menu-item",action:this.props.showSettings},y.default.t(233)))):null,i=(0,S.archiveV2Supported)()&&this.props.settings.archive.enabled?y.default.t(236):y.default.t(235);return n.createElement(u.default,{theme:"archived"},n.createElement(h.default,{title:i,onBack:this.onClose,type:h.DRAWER_HEADER_TYPE.LARGE,menu:s}),n.createElement(p.default,{flatListControllers:[this.flatListController]},e))}}D.CONCERNS={settings:["showArchiveV2","archive"]},D.displayName="ArchivedDrawer";var R=(0,T.default)((0,I.default)(D,D.CONCERNS));t.default=R},20673:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(55533)),r=s(a(85030)),o=s(a(99461)),d=s(a(13277)),c=s(a(10453)),u=s(a(43805)),p=i(a(51045)),h=s(a(3123)),f=s(a(96881)),m=s(a(73018)),E=i(a(32597)),g=s(a(84340)),v=s(a(85530)),_=s(a(14076)),C=a(66239),M=s(a(62536)),S=s(a(38637)),N=s(a(4739)),y=s(a(36467)),T=s(a(90370)),b=a(47138),P=s(a(18779)),I=a(74315),k=s(a(43926)),A=s(a(20468)),O=s(a(14522)),D=s(a(18849));class R extends n.Component{constructor(...e){super(...e),this.flatListController=new _.default,this.onParticipantClick=(e,t)=>{k.default.equals((0,C.getMaybeMeUser)(),t.id)||r.default.find(t.id).then((function(e){d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)}))}))},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.onDelete=()=>{d.default.deleteOrExitChat((0,b.unproxy)(this.props.chat))},this.showEncryptionInfoPopup=()=>{d.default.openModal(n.createElement(D.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.renderItem=e=>{var{participant:t}=e,a=u.default.gadd(t.id);return n.createElement(c.default,{contact:a,theme:"drawer-list",admin:!!t.isAdmin,onClick:this.onParticipantClick,key:t.id.toString(),waitIdle:!0})}}componentDidMount(){var e=this.props.chat.groupMetadata;this.props.listeners.add(e.participants,"add remove sort reset",(()=>{this.forceUpdate()}))}getData(){return this.props.chat.groupMetadata.participants.map((e=>({itemKey:e.id.toString(),participant:e})))}render(){var e=this.props.chat,t=null;if(this.props.onMediaGallery){var a=n.createElement(P.default,{className:l.default.chevron,name:"chevron-right-alt",directional:!0}),s=S.default.t(922);t=n.createElement(g.default,{title:s,titleOnClick:this.props.onMediaGallery||(()=>{}),subtitle:a,theme:"padding"},n.createElement(y.default,{chat:(0,b.unproxy)(e),mediaMsgs:e.getMediaMsgs()}))}var i,r=this.props.chat.groupMetadata.participants,d=n.createElement(I.TextSpan,{theme:"section-title"},S.default.n(r.length)),c=r.length?n.createElement(g.default,{title:S.default.t(1780),subtitle:d},n.createElement(v.default,{flatListController:this.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem})):null,u=n.createElement(g.default,null,n.createElement(m.default,{a8nText:"li-delete-broadcast",icon:n.createElement(P.default,{name:"delete"}),color:"danger",theme:"list-aligned",onClick:this.onDelete},S.default.t(1599)));e.groupMetadata.creation?(i=o.default.createdStr(e.groupMetadata.creation),i=n.createElement(I.TextDiv,{theme:"small"},i)):i=null;var _=null;A.default.supportsFeature(A.default.F.MD_BACKEND)&&(_=n.createElement(O.default,{onClick:this.showEncryptionInfoPopup,text:S.default.t(1547)}));var C=null;return _&&(C=n.createElement(g.default,null,null,_)),n.createElement(h.default,{key:"contact-info-modal",theme:"striped"},n.createElement(E.default,{type:E.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose},n.createElement(I.TextDiv,{theme:"title"},S.default.t(286)),i),n.createElement(f.default,{flatListControllers:[this.flatListController]},n.createElement("div",{className:l.default.body},n.createElement("div",{className:l.default.photo},n.createElement(p.default,{id:e.id,size:p.DETAIL_IMAGE_SIZE.LARGE})),t,C,c,u)))}}R.CONCERNS={chat:["id","groupMetadata"]},R.displayName="BroadcastInfoDrawer";var x=(0,M.default)((0,N.default)((0,T.default)(R,R.CONCERNS)));t.default=x},76588:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(30430)),r=s(a(13277)),o=s(a(76176)),d=s(a(23045)),c=s(a(30905)),u=a(4170),p=a(55848),h=s(a(20468)),f=s(a(38637)),m=s(a(90370));class E extends n.PureComponent{constructor(...e){super(...e),this.onConfirm=()=>{r.default.closeModal()},this._onLearnMore=e=>{e.preventDefault(),r.default.closeModal("none"),setTimeout((()=>(0,u.openExternalLink)((0,p.getBusinessFaqUrl)())),10)},this._getMessage=()=>{var e=this.props.contact;switch(e.verifiedLevel){case d.default.VERIFIED_LEVEL.HIGH:return f.default.t(1808);case d.default.VERIFIED_LEVEL.LOW:return f.default.t(1810);case d.default.VERIFIED_LEVEL.UNKNOWN:return f.default.t(1812,{businessName:e.formattedName})}},this._getMessageV2=()=>{var e=this.props.contact;switch(e.verifiedLevel){case d.default.VERIFIED_LEVEL.HIGH:return e.name===e.verifiedName?f.default.t(1551,{businessName:e.verifiedName}):f.default.t(1552,{businessName:e.verifiedName});case d.default.VERIFIED_LEVEL.LOW:case d.default.VERIFIED_LEVEL.UNKNOWN:return f.default.t(1553)}}}render(){var e;e=h.default.supportsFeature(h.default.F.VNAME_V_2)?this._getMessageV2():this._getMessage();var t=n.createElement(l.default,{href:(0,p.getBusinessFaqUrl)(),onClick:this._onLearnMore},f.default.t(835));return n.createElement(o.default,{onOK:this.onConfirm,okText:f.default.t(1106)},n.createElement(c.default,{text:e})," ",t)}}E.CONCERNS={contact:["name","verifiedLevel","verifiedName","formattedName"]},E.displayName="BusinessInfoModal";var g=(0,m.default)(E,E.CONCERNS);t.default=g},46716:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var n=i(a(2784)),l=s(a(6695)),r=s(a(76588)),o=s(a(43602)),d=s(a(13277)),c=s(a(50018)),u=s(a(73018)),p=s(a(84340)),h=a(9690),f=s(a(38637)),m=s(a(18779));function E(e){var t,{contact:a}=e,s=f.default.t(338);function i(){d.default.openModal(n.createElement(r.default,{contact:a}))}function E(){d.default.openModal(n.createElement(o.default,{contact:a}))}return t=(0,h.canSeeSMBUpsell)()?n.createElement(c.default,{a8nText:"business-title",onClick:E,side:n.createElement(m.default,{display:"inline",name:"info"})},s):n.createElement(u.default,{a8nText:"business-title",className:l.default.businessTitleText,onClick:i},s),n.createElement(p.default,{className:l.default.businessAccount},t)}E.displayName="BusinessAccountBanner"},52207:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(72779)),l=s(a(2784)),r=i(a(93779)),o=a(19999),d=a(64001),c=i(a(85030)),u=i(a(13277)),p=(i(a(79435)),a(66368)),h=i(a(38637)),f=i(a(4739)),m=i(a(19432)),E=i(a(36339)),g=a(47138),v=i(a(18779));a(61506).default,a(85962).Z;function _(e){var{icon:t,label:a,disabled:s,onClick:i}=e;return l.createElement("div",{className:(0,n.default)(r.default.actionButton,{[r.default.actionDisabled]:s})},l.createElement(m.default,{inverted:!0,onClick:i,disabled:s},l.createElement(v.default,{name:t,directional:!0})),l.createElement("div",{className:r.default.actionLabel},a))}function C(e){var t,a,s,{contact:i,onProductCatalog:n}=e;var f,m,v=c.default.toArray().find((e=>e.active));(null==v?void 0:v.id.equals(i.id))||(s=l.createElement(_,{icon:"chat-msg",label:h.default.t(942),onClick:function(){c.default.find(i.id).then((function(e){u.default.openChatFromUnread(e).then((()=>{u.default.closeDrawerRight()}))}))}})),(null===(t=i.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.commerceExperience)===o.COMMERCE_EXPERIENCE_TYPES.CATALOG&&(f=l.createElement(_,{icon:"catalog-filled",label:h.default.t(821),onClick:()=>n("")})),(0,d.hasShop)(i.businessProfile)&&(m=l.createElement(_,{icon:"shop-filled",label:h.default.t(1296),onClick:function(){(0,d.goToShop)(i.businessProfile)}}));var C=l.createElement(_,{icon:"forward-filled",label:h.default.t(666),onClick:function(){u.default.openModal(l.createElement(E.default,{contacts:[(0,g.unproxy)(i)],onContactsSent:e=>{u.default.openChatFromUnread(e).then((()=>{}))}}))}});return l.createElement(p.FlexRow,{className:r.default.actionsRow,justify:"evenly"},s,undefined,f,m,C)}_.displayName="ActionButton",C.displayName="BusinessActions";var M=(0,f.default)(C);t.default=M},82027:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var n=i(a(72779)),l=s(a(2784)),r=i(a(13259)),o=i(a(30905)),d=i(a(38637)),c=a(16123),u=i(a(18779)),p=i(a(78126)),h=a(85289),{useState:f}=l;function m(e){var{businessHours:t}=e,a=(0,h.getBusinessOpenState)(t),[s,i]=f(!0);if(null==t)return null;var n=(0,c.getBusinessHours)(t).map((e=>{var{day:t,hours:i,first:n}=e,r=t,o=i,c=!1;if(n)switch(a.status){case h.BUSINESS_OPEN_STATUS.OPEN_24H:r=d.default.t(305),o=d.default.t(301),c=!0;break;case h.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:r=d.default.t(305),o=d.default.t(304),c=!0;break;case h.BUSINESS_OPEN_STATUS.OPEN:r=d.default.t(305),c=!0;break;case h.BUSINESS_OPEN_STATUS.CLOSED_TODAY:o=d.default.t(290)}return!n&&s?null:l.createElement(E,{day:r,dayIsOpen:c,key:t,hours:o,first:n,collapsed:s})}));return l.createElement(p.default,{className:r.default.businessHours,onClick:()=>{i(!s)}},n)}function E(e){if(e.first){var t=l.createElement("div",{className:r.default.businessHoursChevron,role:"button"},l.createElement(u.default,{className:e.collapsed?"":r.default.flipSvg,display:"inline",name:"chevron-down-alt"}));return l.createElement("div",{className:(0,n.default)(r.default.businessHoursRow,{[r.default.firstRow]:e.first})},l.createElement("div",{className:(0,n.default)(r.default.businessHoursDay,{[r.default.dayIsOpen]:e.dayIsOpen})},l.createElement(o.default,{direction:"auto",text:e.day})),l.createElement("div",{className:r.default.businessHoursHours},l.createElement(o.default,{direction:"auto",text:e.hours})),t)}return l.createElement("div",{className:r.default.businessHoursRow},l.createElement("div",{className:r.default.businessHoursDay},l.createElement(o.default,{direction:"auto",text:e.day})),l.createElement("div",{className:r.default.businessHoursHours},l.createElement(o.default,{direction:"auto",text:e.hours})))}m.displayName="BusinessHours",E.displayName="BusinessHoursRow"},89527:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(72779)),l=s(a(2784)),r=i(a(82027)),o=i(a(22815)),d=i(a(84340)),c=i(a(30905)),u=i(a(4170)),p=i(a(9528)),h=i(a(84161)),f=i(a(90370)),{useEffect:m}=l;function E(e){var t,a,s,i,f,E,{businessProfile:g}=e,{description:v,address:_,latitude:C,longitude:M,website:S,email:N,businessHours:y}=g;return m((()=>{new h.default.ViewBusinessProfile({viewBusinessProfileAction:h.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()})),null!=v&&(t=l.createElement("div",{className:o.default.section},l.createElement(c.default,{className:o.default.description,selectable:!0,direction:"auto",text:v}))),null!=y&&(a=l.createElement("div",{className:o.default.section},l.createElement(r.default,{businessHours:y}))),null!=_&&(s=l.createElement("div",{className:o.default.section},l.createElement(c.default,{selectable:!0,direction:"auto",text:_}))),null!=C&&null!=M&&(i=l.createElement("div",{style:{height:132},className:(0,n.default)(o.default.section,o.default.map)},l.createElement(p.default,{lat:C,lng:M,name:_||"",width:590,height:132}))),null!=N&&(f=l.createElement("div",{className:o.default.section},l.createElement(u.default,{href:`mailto:${N}`},N))),null!=S&&S.length>0&&(E=l.createElement("div",{className:o.default.section},S.map((e=>l.createElement("div",{key:e},l.createElement(u.default,{href:e},e)))))),null==t&&null==a&&null==s&&null==i&&null==f&&null==E?null:l.createElement(d.default,{theme:"padding"},t,a,s,i,f,E)}E.displayName="BusinessInfo";class g extends l.Component{render(){return l.createElement(E,{businessProfile:this.props.businessProfile})}}g.CONCERNS={businessProfile:["description","address","latitude","longitude","website","email","businessHours","structuredAddress"]},g.displayName="BusinessInfoContainer";var v=(0,f.default)(g,g.CONCERNS);t.default=v},4381:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=i(a(2784)),l=s(a(60604)),r=s(a(30905)),o=s(a(26553)),d=s(a(18779));function c(e){var t,a,{contact:s}=e;if(s.isMyContact)if(s.name!==s.verifiedName){var i;s.showBusinessCheckmarkAsSecondary&&(i=n.createElement("div",{className:l.default.icon},n.createElement(d.default,{name:"psa-verified"}))),t=n.createElement(o.default,{contact:s}),a=n.createElement("div",{className:l.default.wrapper},n.createElement(r.default,{text:`~${s.verifiedName}`,className:l.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),i)}else t=n.createElement(o.default,{contact:s,showBusinessCheckmark:s.showBusinessCheckmarkAsPrimary});else t=n.createElement(r.default,{text:s.verifiedName,direction:"auto",ellipsify:!0,titlify:!0}),a=n.createElement(o.default,{contact:s,showBusinessCheckmark:s.showBusinessCheckmarkAsPrimary});return n.createElement("div",null,n.createElement("div",{className:l.default.title},t),n.createElement("div",{className:l.default.subtitle},a))}c.displayName="BusinessName"},42635:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProfile=void 0;var n=i(a(72779)),l=s(a(2784)),r=i(a(76588)),o=i(a(43602)),d=i(a(5696)),c=i(a(13277)),u=i(a(23045)),p=i(a(50018)),h=i(a(73018)),f=i(a(84340)),m=i(a(30905)),E=i(a(4170)),g=i(a(20468)),v=a(9690),_=i(a(38637)),C=i(a(2739)),M=i(a(9528)),S=a(9613),N=i(a(84161)),y=a(16123),T=i(a(68267)),b=i(a(90370)),P=i(a(18779)),{VERIFIED_LEVEL:I}=u.default;class k extends l.PureComponent{constructor(...e){super(...e),this.state={collapsedHours:!0},this._onBusinessHoursClick=()=>{this.setState({collapsedHours:!this.state.collapsedHours})},this._onBusinessInfoClick=()=>{c.default.openModal(l.createElement(r.default,{contact:this.props.contact}))},this._onBusinessInfoWithUpsellClick=()=>{c.default.openModal(l.createElement(o.default,{contact:this.props.contact}))}}componentDidMount(){new N.default.ViewBusinessProfile({viewBusinessProfileAction:N.default.VIEW_BUSINESS_PROFILE_ACTION.ACTION_IMPRESSION}).commit()}_getBusinessInfoTitle(){var e,t=this.props.contact,a=!t.name||t.name===t.verifiedName,s="psa-unverified";switch(t.verifiedLevel){case I.HIGH:s="psa-verified",a?e=l.createElement(m.default,{className:d.default.verifiedLabel,text:_.default.t(341)}):(e=l.createElement(m.default,{className:d.default.verifiedLabel,text:_.default.t(339)}),e=l.createElement(C.default,{id:340,params:{verified:e,businessName:t.verifiedName}}));break;case I.LOW:e=a?l.createElement(m.default,{text:_.default.t(318)}):_.default.t(317,{businessName:t.verifiedName});break;case I.UNKNOWN:e=_.default.t(313)}return l.createElement(O,{icon:s,className:d.default.businessMarker,onClick:this._onBusinessInfoClick},e)}_getBusinessInfoTitleV2(){var e;switch(this.props.contact.verifiedLevel){case I.HIGH:e=_.default.t(336);break;case I.LOW:case I.UNKNOWN:e=_.default.t(313)}return l.createElement(h.default,{a8nText:"business-title",className:d.default.businessTitleText,onClick:this._onBusinessInfoClick},e)}_getBusinessInfoTitleWithSMBUpsell(){var e;switch(this.props.contact.verifiedLevel){case I.HIGH:e=_.default.t(336);break;case I.LOW:case I.UNKNOWN:e=_.default.t(313)}return l.createElement(p.default,{a8nText:"business-title",onClick:this._onBusinessInfoWithUpsellClick,side:l.createElement(P.default,{className:d.default.infoIcon,display:"inline",name:"info"})},e)}_getBusinessHours(e){var t=(0,y.getBusinessHours)(e).map((e=>{var{day:t,hours:a,first:s}=e;return!s&&this.state.collapsedHours?null:l.createElement(A,{day:t,key:t,hours:a,first:s,collapsed:this.state.collapsedHours})}));return l.createElement(O,{icon:"business-hours",onClick:this._onBusinessHoursClick},t)}getAddressString(e){var{streetAddress:t,localizedCityName:a,zipCode:s}=e;return t&&a&&s?_.default.t(312,{streetAddress:t,city:a,zipCode:s}):t&&a?_.default.t(311,{streetAddress:t,city:a}):t}_getAddress(e,t,a,s){var i,n,r,o=s?this.getAddressString(s):null;(null!=t&&null!=a&&(i=l.createElement("div",{style:{height:150},className:d.default.businessMap},l.createElement(M.default,{lat:t,lng:a,name:o||e,width:565,height:150}))),o)&&(r=null!=t&&null!=a?(0,S.getMapUrl)(t,a,o):(0,S.getSearchUrl)(o),n=l.createElement("div",{className:d.default.address},l.createElement(E.default,{href:r},l.createElement(m.default,{selectable:!0,direction:"auto",text:o}))));return n||i?l.createElement(O,{icon:"business-address"},n,i):null}render(){var e,t,a,s,i,n,r,o;e=(0,v.canSeeSMBUpsell)()?this._getBusinessInfoTitleWithSMBUpsell():g.default.supportsFeature(g.default.F.VNAME_V_2)?this._getBusinessInfoTitleV2():this._getBusinessInfoTitle();var c,u=this.props.businessProfile;if(u.stale)t=l.createElement("div",{className:d.default.contactBusinessInfoSpinner},l.createElement(T.default,{size:20,stroke:5}));else if(a=u.categories&&u.categories.length?l.createElement(O,{icon:"business-category"},l.createElement(m.default,{selectable:!0,direction:"auto",text:u.categories.map((e=>e.localized_display_name)).join(_.default.t(577))})):null,s=u.description?l.createElement(O,{icon:"business-description"},l.createElement(m.default,{selectable:!0,direction:"auto",text:u.description})):null,i=this._getAddress(this.props.contact.name,u.latitude,u.longitude,u.structuredAddress),u.website&&Array.isArray(u.website)&&u.website.length&&(n=u.website.map(((e,t)=>{var a=(0,y.getWebsiteLink)(e),s=l.createElement(m.default,{selectable:!0,direction:"auto",text:e}),i=l.createElement(E.default,{className:d.default.link,href:a},s);return l.createElement(O,{icon:"business-website",key:t},i)}))),u.businessHours&&(r=this._getBusinessHours(u.businessHours)),u.email){var p=l.createElement(m.default,{selectable:!0,direction:"auto",text:u.email}),h=l.createElement(E.default,{className:d.default.link,href:`mailto:${u.email}`},p);o=l.createElement(O,{icon:"business-email",dir:"auto"},h)}return(t||null!=i||a||s||null!=r||o||n)&&(c=l.createElement(f.default,{theme:"padding"},l.createElement("div",{className:d.default.contactBusinessInfo},t,i,a,s,r,o,n))),l.createElement(l.Fragment,null,l.createElement(f.default,null,e),c)}}t.BusinessProfile=k,k.CONCERNS={contact:["id","verifiedLevel","name","verifiedName"],businessProfile:["description","categories","website","email","stale","latitude","longitude","businessHours","structuredAddress"]},k.displayName="BusinessProfile";var A=e=>{var t=e.first?l.createElement("div",{className:d.default.businessHoursChevron,role:"button"},l.createElement(P.default,{className:e.collapsed?"":d.default.flipSvg,display:"inline",name:"chevron-down-alt"})):null;return l.createElement("div",{className:d.default.businessHoursRow},l.createElement("div",{className:d.default.businessHoursDay},l.createElement(m.default,{direction:"auto",text:e.day})),l.createElement("div",{className:d.default.businessHoursHours},l.createElement(m.default,{direction:"auto",text:e.hours})),t)};A.displayName="BusinessHoursRow";var O=e=>l.createElement("div",{className:(0,n.default)(d.default.dataRow,e.className),onClick:e.onClick},l.createElement("div",{className:d.default.dataRowIcon},l.createElement(P.default,{name:e.icon})),l.createElement("div",{className:d.default.dataRowText},e.children));O.displayName="DataRow";var D=(0,b.default)(k,k.CONCERNS);t.default=D},25428:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(78523)),r=i(a(40953)),o=s(a(13277)),d=s(a(23045)),c=s(a(84340)),u=a(11517),p=s(a(85530)),h=s(a(38637)),f=s(a(4739)),m=s(a(71673)),E=s(a(90370)),g=s(a(18779)),v=a(74315);class _ extends n.Component{constructor(...e){super(...e),this._commonGroupInitialized=!1,this.state={collapsed:!1,numGroups:0},this.rerender=()=>{this.forceUpdate()},this.onClick=(e,t)=>{o.default.openChatFromUnread(t).then((e=>{e&&o.default.focusChatTextInput(t)})),this.props.onClose()},this.onShowMore=()=>{this.setState({collapsed:!1})},this.renderItem=e=>{var{chat:t}=e;return n.createElement(r.default,{chat:t,theme:"drawer-list",contact:t.contact,mode:r.Mode.INFO,onClick:this.onClick,key:t.id.toString()})}}static getDerivedStateFromProps(e,t){var{commonGroups:a}=e.contact,s=a?a.length:0;return t.numGroups<=d.default.INFO_DRAWER_MAX_ROWS&&s>d.default.INFO_DRAWER_MAX_ROWS?{numGroups:s,collapsed:!0}:{numGroups:s}}componentDidMount(){var{commonGroups:e}=this.props.contact;e&&(this.props.listeners.add(e,"add remove",this.rerender),this._commonGroupInitialized=!0),(0,u.findCommonGroups)(this.props.contact).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))}componentDidUpdate(e){if(e.contact!==this.props.contact){var t=e.contact.commonGroups;t&&e.listeners.remove(t,"add remove",this.rerender),this._commonGroupInitialized=!1}var{commonGroups:a}=this.props.contact;a&&(this._commonGroupInitialized||(this.props.listeners.add(a,"add remove",this.rerender),this._commonGroupInitialized=!0))}componentWillUnmount(){var{commonGroups:e}=this.props.contact;e&&this._commonGroupInitialized&&(this.props.listeners.remove(e,"add remove",this.rerender),this._commonGroupInitialized=!1)}getData(){var e=this.props.contact.commonGroups;return e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed&&(e=e.slice(0,d.default.INFO_DRAWER_MAX_ROWS)),e.map((e=>({itemKey:e.id.toString(),chat:e})))}render(){var e=this.props.contact.commonGroups;if(!e||!e.length)return null;var t,a=n.createElement(v.TextSpan,{theme:"section-title"},h.default.n(e.length));if(e.length>d.default.INFO_DRAWER_MAX_ROWS&&this.state.collapsed){var s=e.length-d.default.INFO_DRAWER_MAX_ROWS,i=n.createElement(m.default,{theme:"transparent"},n.createElement(g.default,{name:"down"}));t=n.createElement(l.default,{image:i,theme:"drawer-list",primary:h.default.t(749,{count:s,_plural:s}),onClick:this.onShowMore})}return n.createElement(c.default,{a8nText:"section-common-groups",title:h.default.t(1683),subtitle:a},n.createElement(p.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),t)}}_.CONCERNS={contact:["commonGroups"]},_.displayName="CommonGroupsWell";var C=(0,f.default)((0,E.default)(_,_.CONCERNS));t.default=C},51817:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=a(25559),r=s(a(88025)),o=s(a(46716)),d=s(a(89527)),c=s(a(42635)),u=s(a(89962)),p=s(a(65610)),h=s(a(85030)),f=s(a(13277)),m=s(a(25428)),E=s(a(76176)),g=s(a(75949)),v=s(a(10074)),_=i(a(51045)),C=s(a(3123)),M=s(a(50018)),S=s(a(96881)),N=s(a(73018)),y=s(a(84755)),T=i(a(32597)),b=s(a(84340)),P=s(a(30905)),I=s(a(25758)),k=a(33576),A=s(a(14076)),O=s(a(20468)),D=a(9690),R=s(a(62536)),x=a(77658),w=s(a(1126)),L=s(a(38637)),B=s(a(2739)),F=s(a(4739)),G=s(a(86262)),U=s(a(36467)),V=s(a(84161)),H=s(a(85471)),W=s(a(26553)),j=s(a(70219)),q=a(55439),Y=s(a(85185)),K=s(a(26490)),Z=a(64812),z=a(11212),X=s(a(34749)),$=a(27372),Q=s(a(90370)),J=s(a(16426)),ee=s(a(18779)),te=a(74315),ae=s(a(69312)),se=s(a(58025)),ie=a(76604),ne=a(45822),le=a(66239),re=s(a(14522)),oe=s(a(6370));class de extends n.Component{constructor(e){super(e),this.flatListController=new A.default,this._init=()=>{O.default.supportsFeature(O.default.F.QUERY_IDENTITY)&&!O.default.supportsFeature(O.default.F.MD_BACKEND)&&(0,x.queryIdentity)(this.props.contact)},this._onBlocklistChange=()=>{this.state.contactIsBlocked!==!!r.default.get(this.props.contact.id)&&this.setState({contactIsBlocked:!!r.default.get(this.props.contact.id)})},this.onVerificationClick=()=>{this.props.onVerification()},this._onDeleteChat=()=>{var e=h.default.assertGet(this.props.contact.id);f.default.deleteOrExitChat(e)},this.onBlockContact=()=>{var e=n.createElement(W.default,{contact:this.props.contact});f.default.openModal(n.createElement(E.default,{onOK:this.blockContact,okText:L.default.t(279),onCancel:()=>f.default.closeModal(),cancelText:L.default.t(1558)},n.createElement(B.default,{id:280,params:{contact:e}})))},this.onReportSpam=()=>{f.default.openModal(n.createElement(K.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>f.default.closeModal()}))},this.reportSpam=()=>{var e=h.default.get(this.props.contact.id);e&&(0,z.sendSpamReport)(e,$.SpamFlow.Account),f.default.closeModal()},this.reportSpamBlockClear=()=>{var e=h.default.get(this.props.contact.id);e&&(0,z.sendSpamBlockClear)(e),f.default.closeModal()},this.onUnblockContact=()=>{var e=n.createElement(W.default,{contact:this.props.contact});f.default.openModal(n.createElement(E.default,{okText:L.default.t(1371),onOK:this.unblockContact,cancelText:L.default.t(1558),onCancel:()=>f.default.closeModal()},n.createElement(B.default,{id:1372,params:{contact:e}})))},this.blockContact=()=>{(0,l.blockContact)(this.props.contact),f.default.closeModal()},this.unblockContact=()=>{(0,l.unblockContact)(this.props.contact),f.default.closeModal()},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._onViewPicture=e=>{if(this._canViewPicture){var t=e.target;f.default.openModalMedia(n.createElement(j.default,{contact:this.props.contact,profilePicThumb:this.props.contact.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:e=>{e(t)}}),{transition:"profile-viewer",uim:this.props.uim})}},this._onDetailImageLoad=()=>{this._canViewPicture=!0},this._canViewPicture=!1,this.state={contactIsBlocked:!!r.default.get(e.contact.id)}}componentDidMount(){this.props.listeners.add(r.default,"add remove reset sync",this._onBlocklistChange),this.props.listeners.uiIdle(this._init);var{contact:e}=this.props;e.businessProfile&&!e.businessProfile.stale&&e.businessCatalog&&u.default.findCarouselCatalog(e.id).catchType(k.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog in contact drawer from server`})),O.default.supportsFeature(O.default.F.MD_BACKEND)&&(0,ne.getFanOutList)([e.id,(0,le.assertGetMe)()]).then((e=>{(0,ie.ensureE2ESessions)(e)}));var{session:t}=(0,q.getProductCatalogContext)(this.context);t.isAccidental()&&f.default.setDrawerContext("right",(0,q.buildProductCatalogContext)())}_shouldRenderCatalog(){var{contact:e}=this.props;return!!(e&&e.isBusiness&&e.businessProfile)&&!!e.businessCatalog}_renderBusinessProfileTopCard(){return this.props.contact.businessProfile?n.createElement(v.default,{contact:this.props.contact,onProfilePicLoad:this._onDetailImageLoad,onProfilePicClick:this._onViewPicture,businessProfile:this.props.contact.businessProfile,onProductCatalog:this.props.onProductCatalog}):null}_renderTopCard(){var{contact:e}=this.props;if((0,D.canSeeBizProfileV3)()&&e.isBusiness)return this._renderBusinessProfileTopCard();var t=h.default.get(e.id),a=!e.name&&e.notifyName?n.createElement("div",{className:g.default.nameSecondary},n.createElement(te.TextSpan,{theme:"muted"},n.createElement(P.default,{className:g.default.screenName,direction:"auto",text:e.notifyName,selectable:!0}))):null,s=e.showBusinessCheckmarkAsSecondary&&O.default.supportsFeature(O.default.F.VNAME_V_2)?n.createElement("div",{className:g.default.businessVname},n.createElement(P.default,{text:e.verifiedName,direction:"auto"}),n.createElement("div",{className:g.default.icon},n.createElement(ee.default,{name:"psa-verified"}))):null,i=t&&t.presence?n.createElement(ae.default,{contact:e,presence:t.presence,chatstate:t.presence.chatstate,location:"info"}):null;return n.createElement(b.default,{theme:"padding-large"},n.createElement("div",{className:g.default.avatar},n.createElement(_.default,{id:e.id,size:_.DETAIL_IMAGE_SIZE.LARGE,loader:!0,onLoad:this._onDetailImageLoad,onClick:this._onViewPicture,quality:_.DETAIL_IMAGE_QUALITY.HIGH})),n.createElement(te.TextHeader,{level:"2",theme:"large"},n.createElement(W.default,{contact:e,selectable:!0,showBusinessCheckmark:e.showBusinessCheckmarkAsPrimary})),a,n.createElement("div",{className:g.default.nameSecondary},n.createElement(te.TextSpan,{theme:"muted"},s),n.createElement(te.TextSpan,{theme:"muted"},i)),n.createElement(w.default,{labels:e.labels}))}renderProductCatalogSection(){if(!this._shouldRenderCatalog())return null;var{contact:e,onProductCatalog:t,onProductDetail:a}=this.props,s=u.default.get(e.id);if(!s)return null;var i="",l=!1;(0,D.canSeeBizProfileV3)()&&(i=L.default.t(416),l=!0);var{session:r}=(0,q.getProductCatalogContext)(this.context);return r.isAccidental()?null:n.createElement(p.default,{onProductDetail:a,onProductCatalog:t,catalog:s,subtitle:i,entryPoint:V.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE,hideIncompleteRows:l})}render(){var e,t=this.props.contact,a=n.createElement(m.default,{contact:this.props.contact,onClose:this.onClose,flatListController:this.flatListController}),s=h.default.get(t.id);s&&(e=n.createElement(b.default,null,n.createElement(N.default,{a8nText:"li-delete-chat",icon:n.createElement(ee.default,{name:"delete"}),color:"danger",onClick:this._onDeleteChat},L.default.t(520))));var i=null;i=this.state.contactIsBlocked?n.createElement(b.default,null,n.createElement(N.default,{a8nText:"li-unblock",color:"success",icon:n.createElement(ee.default,{name:"settings-blocked",directional:!0}),onClick:this.onUnblockContact},L.default.t(1371))):n.createElement(b.default,null,n.createElement(N.default,{a8nText:"li-block",color:"danger",icon:n.createElement(ee.default,{name:"settings-blocked",directional:!0}),onClick:this.onBlockContact},L.default.t(279)));var l=n.createElement(b.default,null,n.createElement(N.default,{a8nText:"li-report-spam",color:"danger",icon:n.createElement(ee.default,{name:"thumbs-down",directional:!0}),onClick:this.onReportSpam},t.isBusiness?L.default.t(1198):L.default.t(1201))),r=null;if(this.props.onMediaGallery&&s){var u=this.props.onMediaGallery,p=n.createElement(ee.default,{className:g.default.chevron,name:"chevron-right-alt",directional:!0}),f=L.default.t(922);r=n.createElement(b.default,{a8nText:"section-media",title:f,titleOnClick:u,subtitle:p,theme:"padding"},n.createElement(U.default,{chat:s,mediaMsgs:s.getMediaMsgs()}))}var E=null;O.default.supportsFeature(O.default.F.LIVE_LOCATIONS)&&s&&(E=n.createElement(G.default,{chat:s,onClick:this.props.onLiveLocation}));var v=null,_=null;(0,D.canSeeBizProfileV3)()?_=this.renderProductCatalogSection():v=this.renderProductCatalogSection();var y=s&&s.mute.canMute()?n.createElement(H.default,{chat:s,mute:s.mute,settings:X.default}):null,P=null;if(this.props.onStarred){var k=n.createElement(ee.default,{className:g.default.chevron,name:"chevron-right-alt",directional:!0});P=n.createElement(M.default,{a8nText:"block-starred-messages",side:k,onClick:this.props.onStarred},n.createElement(te.TextSpan,{theme:"title"},L.default.t(443)))}var A=s&&s.shouldShowEphemeralSetting()?n.createElement(I.default,{onClick:this.props.onEphemeral,chat:s}):null,R=null,x=s&&s.getReceivedVcardMsgs();if(O.default.supportsFeature(O.default.F.INDEX_RECEIVED_VCARD)&&x&&x.length){var w=n.createElement(ee.default,{className:g.default.chevron,name:"chevron-right-alt",directional:!0});R=n.createElement(M.default,{a8nText:"block-contact-card",side:w,onClick:this.props.onContactCard},n.createElement(te.TextSpan,{theme:"title"},L.default.t(492,{_plural:x.length})))}var B=null;O.default.supportsFeature(O.default.F.MD_BACKEND)&&(B=n.createElement(re.default,{onClick:this.onVerificationClick,text:oe.default.isVoiceCallEnabled()||oe.default.isVideoCallEnabled()?L.default.t(1574):L.default.t(1573)}));var F=null;(y||P||A||R||B)&&(F=n.createElement(b.default,null,y,P,A,R,B));var V,W=n.createElement(M.default,{multiline:!0},n.createElement(te.TextSpan,{theme:"title"},n.createElement(J.default,{id:t.id}))),j=n.createElement(M.default,null,n.createElement(Z.SelectableSpan,{dir:"auto",selectable:!0},n.createElement(te.TextSpan,{theme:"title"},(0,se.default)(t.id)))),q=n.createElement(b.default,{a8nText:"section-about-and-phone-number"},n.createElement("div",{className:g.default.titleAbout},n.createElement(te.TextSpan,{theme:"section-title"},L.default.t(493))),W,j),Y=this._renderTopCard(),K=null;return t.isBusiness&&t.businessProfile&&((0,D.canSeeBizProfileV3)()&&t.businessProfile?(K=n.createElement(d.default,{businessProfile:t.businessProfile}),V=n.createElement(o.default,{contact:t})):t.businessProfile&&(K=n.createElement(c.default,{contact:t,businessProfile:t.businessProfile}))),n.createElement(C.default,{key:"contact-info-modal",theme:"striped"},n.createElement(T.default,{title:L.default.t(1570),type:T.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose}),n.createElement(S.default,{flatListControllers:[this.flatListController]},n.createElement("section",{className:g.default.body},Y,V,_,K,E,v,r,F,q,null,a,i,l,e)))}}de.contextType=y.default,de.CONCERNS={contact:["id","formattedName","formattedUser","formattedShortName","isBusiness","isEnterprise","isMyContact","commonGroups","businessProfile","showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","verifiedName","verifiedLevel","name","notifyName","labels","businessCatalog","isContactBlocked","isMe"]},de.displayName="ContactInfoDrawer";var ce=(0,R.default)((0,Y.default)((0,F.default)((0,Q.default)(de,de.CONCERNS))));t.default=ce},10074:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var n=i(a(2784)),l=s(a(52207)),r=s(a(4381)),o=s(a(737)),d=s(a(32988)),c=s(a(84340)),u=s(a(38637)),p=s(a(40417));function h({contact:e,businessProfile:t,onProductCatalog:a,onProfilePicLoad:s,onProfilePicClick:i}){var h,f=n.createElement(r.default,{contact:e});null!=t.categories&&t.categories.length>0&&(h=n.createElement("div",{className:d.default.categories},t.categories.map((e=>e.localized_display_name)).join(u.default.t(576))));var m=t.businessHours?n.createElement(p.default,{hours:t.businessHours}):null;return n.createElement(c.default,{className:d.default.noPaddingBottom,theme:"padding"},n.createElement(o.default,{contact:e,onClick:i,onLoad:s}),n.createElement("div",{className:d.default.info},f,h,m,n.createElement(l.default,{contact:e,onProductCatalog:a})))}h.displayName="CoverPhotoTopCard"},39692:(e,t,a)=>{"use strict";var s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=s(a(51817))},40417:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=i(a(35368)),l=s(a(2784)),r=i(a(38637)),o=i(a(87228)),d=a(85289);function c(e){var{hours:t}=e,a=function(e){switch(e.status){case d.BUSINESS_OPEN_STATUS.OPEN_24H:return r.default.t(302,{open:`<span class="${o.default.open}">${r.default.t(300)}</span>`});case d.BUSINESS_OPEN_STATUS.OPEN_APPOINTMENT:return r.default.t(303,{open:`<span class="${o.default.open}">${r.default.t(300)}</span>`});case d.BUSINESS_OPEN_STATUS.OPEN:if(e.openUntil&&e.additionalOpen&&e.additionalClose)return r.default.t(307,{open:`<span class="${o.default.open}">${r.default.t(300)}</span>`,time:u(e.openUntil),additionalOpenTime:u(e.additionalOpen),additionalCloseTime:u(e.additionalClose)});if(e.openUntil)return r.default.t(306,{open:`<span class="${o.default.open}">${r.default.t(300)}</span>`,time:u(e.openUntil)});break;case d.BUSINESS_OPEN_STATUS.CLOSED:return e.opensAt?r.default.t(292,{closed:`<span class="${o.default.closed}">${r.default.t(291)}</span>`,time:u(e.opensAt)}):`<span class="${o.default.closed}">${r.default.t(291)}</span>`;case d.BUSINESS_OPEN_STATUS.CLOSED_TODAY:return`<span class="${o.default.closed}">${r.default.t(293)}</span>`}return null}((0,d.getBusinessOpenState)(t));if(null==a)return null;var s=n.default.sanitize(a);return l.createElement("div",{className:o.default.openStatus,dangerouslySetInnerHTML:{__html:s}})}function u(e){return null==e?"":e.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}c.displayName="OpenBusinessHours"},14522:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(20468)),r=a(74315),o=s(a(18779)),d=s(a(50018)),c=s(a(93948)),u=s(a(38637)),p=e=>{var t=null,{onClick:a,text:s}=e;if(l.default.supportsFeature(l.default.F.MD_BACKEND)&&l.default.supportsFeature(l.default.F.QUERY_IDENTITY)){var i=n.createElement(o.default,{name:"lock",className:c.default.icon});t=n.createElement(d.default,{onClick:a,side:i,multiline:!0},n.createElement("div",{className:c.default.header},n.createElement(r.TextSpan,{theme:"title"},u.default.t(1601))),n.createElement(r.TextDiv,{theme:"muted"},s))}return t};p.displayName="EncryptionDrawerSection";var h=p;t.default=h},26714:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(58527)),l=i(a(52954)),r=s(a(2784)),o=i(a(32944)),d=i(a(74052)),c=i(a(67164)),u=i(a(78523)),p=i(a(85030)),h=i(a(99461)),f=i(a(13277)),m=i(a(76176)),E=i(a(23045)),g=i(a(3123)),v=i(a(50018)),_=i(a(96881)),C=i(a(73018)),M=s(a(32597)),S=i(a(84340)),N=i(a(77508)),y=i(a(18849)),T=i(a(30905)),b=i(a(8451)),P=i(a(25758)),I=s(a(24461)),k=s(a(85530)),A=i(a(14076)),O=a(66239),D=i(a(20468)),R=i(a(3961)),x=i(a(67753)),w=i(a(62536)),L=a(66207),B=i(a(1126)),F=i(a(38637)),G=s(a(63428)),U=i(a(4739)),V=i(a(86262)),H=i(a(36467)),W=a(30371),j=i(a(85471)),q=a(26553),Y=i(a(16531)),K=i(a(71147)),Z=i(a(49398)),z=a(86690),X=i(a(85185)),$=i(a(26490)),Q=i(a(71673)),J=a(11212),ee=i(a(54559)),te=a(73831),ae=a(80650),se=i(a(34749)),ie=a(27372),ne=i(a(90370)),le=a(47138),re=i(a(48154)),oe=i(a(18779)),de=a(74315),ce=s(a(92915)),ue=s(a(97025)),pe=i(a(5431)),he=i(a(43195)),fe=i(a(43926)),me=i(a(14522)),Ee=i(a(6370)),ge=a(14963),ve=(0,ue.genId)("max_participant_toast");class _e extends r.Component{constructor(e){var t;super(e),t=this,this._participantFlatListController=new A.default,this._pendingParticipantFlatListController=new A.default,this._updateGroupDescOnModelChange=()=>{this.props.groupMetadata&&this.setState({groupDesc:this.props.groupMetadata.desc})},this.onImageSet=(e,t)=>{var a=this.props.profilePicThumb;this.setState({pendingPhoto:!0}),(e&&t?(0,z.setProfilePic)(a,e,t):(0,z.deleteProfilePic)(a)).checkpoint(this.props.rejectOnUnmount()).catchType(I.Unmount,(()=>{})).catchType(I.ActionError,(()=>{__LOG__(3)`GroupInfoDrawer: failed to set/delete group image`,this.setState({resetPhotoPicker:!this.state.resetPhotoPicker})})).finally((()=>{this.setState({pendingPhoto:!1})}))},this.onParticipantClick=(e,t)=>{fe.default.equals((0,O.getMaybeMeUser)(),t.id)||p.default.find(t.id).then((e=>{f.default.openChatFromUnread(e).then((t=>{t&&f.default.focusChatTextInput(e)}))}))},this._menuEnabled=e=>{var t=this.props.groupMetadata.participants,a=t.get(e.id);return!!a&&(t.canPromote(a)||t.canRemove(a)||t.canVerifyIdentity(a))},this.onDemoteAdmin=e=>{e.contact.pendingAction++,(0,W.demoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),this.setState({contextMenu:null})},this.onParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.participants,s=a.assertGet(t.id);if(this._menuEnabled(t)){var i=[];if(a.canPromote(s)){var n=this._confirmParticipantPromote.bind(this,s);i.push(r.createElement(N.default,{a8n:"mi-grp-promote-admin",key:"promote",action:n},F.default.t(930)))}if(a.canRemove(s)){var l=this._confirmParticipantRemove.bind(this,s);i.push(r.createElement(N.default,{a8n:"mi-grp-remove-participant",key:"remove",action:l},F.default.t(934)))}if(D.default.supportsFeature(D.default.F.GROUPS_V_3)&&a.canDemote(s)){var o=this.onDemoteAdmin.bind(this,s);i.push(r.createElement(N.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:o},F.default.t(543)))}if(D.default.supportsFeature(D.default.F.MD_BACKEND)&&a.canVerifyIdentity(s)){var d=this._onVerifyIdentity.bind(this,s);i.push(r.createElement(N.default,{a8n:"mi-grp-verify-identify",key:"verify-identity",action:d},F.default.t(1852)))}e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.event}})}},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._confirmParticipantRemove=e=>{var t=this.onParticipantRemove.bind(this,e,!0),a=F.default.t(478,{participant:e.contact.formattedName,subject:this.props.contact.name});f.default.openModal(r.createElement(m.default,{onOK:t,okText:F.default.t(1190),onCancel:()=>f.default.closeModal(),cancelText:F.default.t(1558)},r.createElement(T.default,{text:a})))},this.onParticipantRemove=(e,t)=>{e.contact.pendingAction++,(0,W.removeParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&f.default.closeModal()},this._confirmParticipantPromote=e=>{var t=this.onParticipantPromote.bind(this,e,!0),a=F.default.t(477,{participant:e.contact.formattedName,subject:this.props.contact.name});f.default.openModal(r.createElement(m.default,{onOK:t,okText:F.default.t(930),onCancel:()=>f.default.closeModal(),cancelText:F.default.t(1558)},r.createElement(T.default,{text:a})))},this.onParticipantPromote=(e,t)=>{e.contact.pendingAction++,(0,W.promoteParticipants)(this.props.chat,[e]).then((()=>{e.contact.pendingAction--})),t&&f.default.closeModal()},this._onVerifyIdentity=e=>{this.props.onVerification&&this.props.onVerification(e.contact)},this._openAddGroupParticipantFlow=()=>{var{chat:e}=this.props;if(this.props.groupMetadata.participants.length>=ee.default.maxParticipants){var t=F.default.t(96,{max:ee.default.maxParticipants});f.default.openToast(r.createElement(ue.default,{msg:t,id:ve}))}else{var a=D.default.supportsFeature(D.default.F.GROUPS_V_3)?r.createElement(c.default,{chat:(0,le.unproxy)(e),pushTransition:"none",popTransition:"none"}):r.createElement(d.default,{chat:(0,le.unproxy)(e),pushTransition:"none",popTransition:"none"});f.default.openModal(a,{transition:"modal-flow"})}},this._openParticpantSearch=()=>{f.default.openModal(r.createElement(x.default,{chat:(0,le.unproxy)(this.props.chat),onParticipantPromote:this.onParticipantPromote,onParticipantRemove:this.onParticipantRemove,onDemoteAdmin:this.onDemoteAdmin}),{transition:"modal-flow"})},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._onExitOrDeleteGroup=()=>{f.default.deleteOrExitChat(this.props.chat)},this._onGroupDescChange=e=>{this.setState({groupDesc:e})},this._onSetSubject=function(){var e=(0,l.default)((function*(e){var a=(0,b.default)(e);a!==t.props.contact.name&&(yield(0,ae.setGroupSubject)(t.props.chat,a).catchType(I.Unmount,(()=>{})).catch((()=>{__LOG__(3)`group_info_drawer:onSetSubject failed`})))}));return function(){return e.apply(this,arguments)}}(),this._onSetDescription=()=>{var{chat:e,groupMetadata:t}=this.props;if(t.canSetDescription()){var a=this.state.groupDesc||"",s=a.match(/\r\n/gm)?"\r\n":"\n",i=new RegExp(`^(${s}{2,})([^\n])`,"gm");a=a.replace(i,`${s}$2`);var n=(0,b.default)(a||"");if(n===t.desc)return this.setState({groupDesc:n});this.setState({pendingDesc:!0}),(0,te.setGroupDesc)(e,n).then((()=>{this.setState({groupDesc:t.desc,pendingDesc:!1})})).catchType(I.Unmount,(()=>{})).catch((()=>{__LOG__(3)`group_info_drawer:onSetDescription failed`,this.setState({groupDesc:this.props.groupMetadata.desc,pendingDesc:!1})}))}},this._onCancelDesc=()=>{this.setState({groupDesc:this.props.groupMetadata.desc})},this.showEncryptionInfoPopup=()=>{f.default.openModal(r.createElement(y.default,{chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this._showSecurityInfoPopup=()=>{f.default.openModal(r.createElement(y.default,{chat:this.props.chat,chatId:this.props.chat.id,e2eSubtype:"info_encrypted"}))},this.onShowMore=()=>{this.setState({participantListCollapsed:!1})},this._onShowMorePendingParticipants=()=>{this.setState({pendingParticipantListCollapsed:!1})},this.renderItem=e=>{var{id:t}=e,a=this.props.groupMetadata.participants.get(t);if(!a)throw new k.UnknownDataError(e);var s=a.contact,i=!!this.state.contextMenu&&fe.default.equals(s.id,this.state.contextMenu.contactId);return r.createElement(Y.default,{contact:s,participant:a,key:a.id.toString(),onClick:this.onParticipantClick,contextEnabled:this._menuEnabled.bind(this,s),contextMenu:i,onContext:e=>this.onParticipantMenu(e,s),showNotifyName:!0,waitIdle:!0})},this.onReportSpam=()=>{f.default.openModal(r.createElement($.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>f.default.closeModal()}))},this.reportSpam=()=>{(0,J.sendSpamReport)(this.props.chat,ie.SpamFlow.Group),f.default.closeModal()},this.reportSpamExitClear=()=>{(0,J.sendSpamExitClear)(this.props.chat),f.default.closeModal()},this._onDescriptionReadMore=()=>{this.setState({descTruncated:!1})},this._showEditRestrictionInfo=()=>{f.default.openModal(r.createElement(m.default,{onOK:()=>f.default.closeModal(),okText:F.default.t(1726)},F.default.t(1107)))},this.revokeGrpV4Invite=e=>{f.default.openModal(r.createElement(m.default,{onOK:()=>{f.default.closeModal(),this.props.groupMetadata.revokeGroupV4AddInvite([e.id.toString()]).then((()=>{f.default.openToast(r.createElement(ue.default,{msg:F.default.t(1681),id:(0,ue.genId)()}))}))},okText:F.default.t(1785),onCancel:()=>f.default.closeModal(),cancelText:F.default.t(1558)},r.createElement(T.default,{text:F.default.t(761,{participant:e.contact.formattedName})})))},this._renderPendingParticipantItem=e=>{var{id:t}=e,a=this.props.groupMetadata.pendingParticipants.get(t);if(!a)throw new k.UnknownDataError(e);var s=a.contact;return r.createElement(Y.default,{contact:s,participant:a,key:a.id.toString(),contextEnabled:()=>!0,contextMenu:!0,onContext:e=>this._onPendingParticipantMenu(e,s),showNotifyName:!0,isPendingParticipant:!0,waitIdle:!0})},this._onPendingParticipantMenu=(e,t)=>{var a=this.props.groupMetadata.pendingParticipants.assertGet(t.id),s=[r.createElement(N.default,{a8n:"mi-grp-promote-admin",key:"promote",action:this.revokeGrpV4Invite.bind(this,a)},F.default.t(1227))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id,menu:s,anchor:e.anchor,event:e.event}})};var{groupMetadata:{desc:a,participants:s,pendingParticipants:i},showFullGroupDescription:n}=this.props;this.state={pendingDesc:!1,pendingPhoto:!1,contextMenu:null,groupDraftSubject:null,groupDesc:a,descTruncated:!n&&!!(a&&a.length>30),participantListCollapsed:s.length>E.default.INFO_DRAWER_MAX_ROWS,pendingParticipantListCollapsed:i.length>E.default.INFO_DRAWER_MAX_ROWS,resetPhotoPicker:!1}}componentDidMount(){var e=this.props.groupMetadata;D.default.supportsFeature(D.default.F.MD_BACKEND)&&(0,ge.queryAndUpdateGroupMetadataById)(e.id),D.default.supportsFeature(D.default.F.GROUPS_V_4_JOIN_PERMISSION)&&e.queryGroupV4PendingInvite(),this.props.listeners.add(e.participants,"add remove reset sort change:isAdmin change:isSuperAdmin",(()=>{this.forceUpdate()})),this.props.listeners.add(e.pendingParticipants,"add remove reset",(()=>{this.forceUpdate()})),this.props.listeners.add(e,"change:desc",(()=>{this._updateGroupDescOnModelChange()})),this.ensureParticipantsSorted()}componentDidUpdate(){this.ensureParticipantsSorted()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted(),this.props.groupMetadata.pendingParticipants.ensureSorted()}getData(){var e,t=[],a=[],s=this.props.groupMetadata.participants;s.forEach((s=>{s.contact.isMe?e=s:s.isAdmin?t.push(s):a.push(s)}));var i=[];return e&&i.push(e),i=i.concat(t,a),s.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.participantListCollapsed&&(i=i.slice(0,E.default.INFO_DRAWER_MAX_ROWS)),i.map((e=>({itemKey:e.id.toString(),id:e.id})))}_getPendingParticipantListData(){var e=this.props.groupMetadata.pendingParticipants.toArray(),t=[...e];return e.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.pendingParticipantListCollapsed&&(t=t.slice(0,E.default.INFO_DRAWER_MAX_ROWS)),t.map((e=>({itemKey:e.id.toString(),id:e.id})))}_getTitle(){return ee.default.productMediaAttachments?F.default.t(923):F.default.t(922)}render(){var e,t,a,s,i,n,l,{chat:d,groupMetadata:c}=this.props,p=r.createElement(S.default,null,r.createElement(C.default,{a8nText:"li-delete-group",icon:r.createElement(oe.default,{name:"exit",directional:!0}),theme:"list-aligned",color:"danger",onClick:this._onExitOrDeleteGroup},d.isReadOnly?F.default.t(1598):F.default.t(1603)));if(d.isReadOnly||(e=r.createElement(S.default,null,r.createElement(C.default,{a8nText:"li-report-spam",theme:"list-aligned",color:"danger",icon:r.createElement(oe.default,{name:"thumbs-down",directional:!0}),onClick:this.onReportSpam},F.default.t(1204)))),c.participants.canAdd()&&!c.support){var f=r.createElement(Q.default,null,r.createElement(oe.default,{name:"add-user",directional:!0}));t=r.createElement(u.default,{image:f,theme:"drawer-list",primary:F.default.t(213),onClick:this._openAddGroupParticipantFlow})}if(c.participants.iAmAdmin()&&this.props.onGroupInviteLink&&!c.support){var m=r.createElement(Q.default,null,r.createElement(oe.default,{name:"link"}));a=r.createElement(u.default,{image:m,theme:"drawer-list",primary:F.default.t(723),onClick:this.props.onGroupInviteLink})}if(c.participants.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.participantListCollapsed){var N=c.participants.length-E.default.INFO_DRAWER_MAX_ROWS,y=r.createElement(Q.default,{theme:"transparent"},r.createElement(oe.default,{name:"down"}));s=r.createElement(u.default,{image:y,theme:"drawer-list",primary:F.default.t(749,{count:N,_plural:N}),onClick:this.onShowMore})}if(c.pendingParticipants.length>E.default.INFO_DRAWER_MAX_ROWS&&this.state.pendingParticipantListCollapsed){var T=c.pendingParticipants.length-E.default.INFO_DRAWER_MAX_ROWS,b=r.createElement(Q.default,{theme:"transparent"},r.createElement(oe.default,{name:"down"}));i=r.createElement(u.default,{image:b,theme:"drawer-list",primary:F.default.t(749,{count:T,_plural:T}),onClick:this._onShowMorePendingParticipants})}if(c.pendingParticipants.length>0&&(n=r.createElement(k.default,{flatListController:this._pendingParticipantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getPendingParticipantListData(),renderItem:this._renderPendingParticipantItem})),c.participants.iAmAdmin()&&D.default.supportsFeature(D.default.F.GROUPS_V_3)&&!c.support){var I=r.createElement(oe.default,{className:R.default.chevron,name:"chevron-right-alt",directional:!0});l=r.createElement(v.default,{onClick:this.props.onAdminSetting,side:I},r.createElement(de.TextSpan,{theme:"title"},F.default.t(747)))}var A,O=r.createElement(oe.default,{name:"search",className:R.default.iconSearch}),x=c.participants.length?r.createElement(S.default,{a8nText:"section-participants",title:F.default.t(1728,{count:c.participants.length,_plural:c.participants.length}),titleOnClick:D.default.supportsFeature(D.default.F.GROUPS_V_3)?this._openParticpantSearch:void 0,subtitle:D.default.supportsFeature(D.default.F.GROUPS_V_3)?O:void 0},t,a,r.createElement(k.default,{flatListController:this._participantFlatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem}),s):null;c.participants.iAmAdmin()&&c.pendingParticipants.length>0&&(A=r.createElement(S.default,{a8nText:"section-participants",title:F.default.t(753,{number:c.pendingParticipants.length})},n,i));var w=null;if(this.props.onMediaGallery){var U=this.props.onMediaGallery,W=r.createElement(oe.default,{className:R.default.chevron,name:"chevron-right-alt",directional:!0}),Y=this._getTitle();w=r.createElement(S.default,{a8nText:"section-media",title:Y,titleOnClick:U,subtitle:W,theme:"padding"},r.createElement(H.default,{chat:(0,le.unproxy)(d),mediaMsgs:d.getMediaMsgs()}))}var z=this.props.contact.profilePicThumb,X=Z.default.GROUP,$=d.isReadOnly||!z.canDelete()&&!z.canSet()||d.isSupportGroup(),J=r.createElement("div",{className:R.default.avatar},r.createElement(K.default,{key:String(this.state.resetPhotoPicker),type:X,id:this.props.contact.id,attachToChat:!0,pending:this.state.pendingPhoto,startImage:this.props.profilePicThumb.imgFull,readOnly:$,onImageSet:this.onImageSet})),te=null;this.props.groupMetadata.creation&&(te=r.createElement("div",{"data-a8n":o.default.key("group-created-time"),className:R.default.nameSecondary},r.createElement(de.TextSpan,{theme:"muted"},h.default.createdStr(this.props.groupMetadata.creation,this.props.chat.isSupportGroup()))));var ae=null;D.default.supportsFeature(D.default.F.LIVE_LOCATIONS)&&(ae=r.createElement(V.default,{chat:d,onClick:this.props.onLiveLocation}));var ie=d&&d.shouldShowEphemeralSetting()?r.createElement(P.default,{onClick:this.props.onEphemeral,chat:d,groupMetadata:c}):null,ne=null;D.default.supportsFeature(D.default.F.MD_BACKEND)&&(ne=r.createElement(me.default,{onClick:this.showEncryptionInfoPopup,text:Ee.default.isGroupCallEnabled()?F.default.t(1636):F.default.t(1635)})),this.props.chat.isSupportGroup()&&(ne=r.createElement(re.default,{onClick:this._showSecurityInfoPopup}));var ue,fe=d.mute.canMute()?r.createElement(j.default,{chat:d,mute:d.mute,settings:se.default}):null,ge=null;if(this.props.onStarred){var ve=r.createElement(oe.default,{className:R.default.chevron,name:"chevron-right-alt",directional:!0});ge=r.createElement(v.default,{side:ve,onClick:this.props.onStarred},r.createElement(de.TextSpan,{theme:"title"},F.default.t(443)))}this.state.contextMenu&&(ue=r.createElement(pe.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},r.createElement(he.default,{contextMenu:this.state.contextMenu})));var _e,Me=null;if((fe||ge||ne||ie)&&(Me=r.createElement(S.default,null,fe,ge,ie,ne,l)),D.default.supportsFeature(D.default.F.GROUPS_V_3)&&ee.default.groupDescLength>0){var Se=this.state.groupDesc||"",Ne={textLimit:this.state.descTruncated?E.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:1/0,readMoreText:F.default.t(1188),onReadMore:this._onDescriptionReadMore,formatters:this.props.chat.isTrusted()?L.Configuration.TrustedGroupDesc({links:G.findLinks(Se)}):L.Configuration.UntrustedGroupDesc()};_e=r.createElement(S.default,{theme:"group-desc-padding",title:F.default.t(712)},r.createElement("div",{className:R.default.description},r.createElement(ce.default,{a8n:"group-info-drawer-description-title-input",value:Se,emptyValuePlaceholder:F.default.t(211),renderEmojiTextInLockMode:Ne,editable:c.canSetDescription(),pending:this.state.pendingDesc,showRemaining:!0,maxLength:ee.default.groupDescLength,onChange:this._onGroupDescChange,onSave:this._onSetDescription,onCancel:this._onCancelDesc,multiline:!0,editRestrictionInfo:c.restrict?this._showEditRestrictionInfo:void 0,supportsEmoji:!0,lockable:!0,lowProfile:!0,customStyleThemes:[ce.TextInputCustomStyleThemes.groupInfoName],theme:"small"})))}return r.createElement(g.default,{key:"contact-info-modal",theme:"striped"},r.createElement(M.default,{title:F.default.t(1634),type:M.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose}),r.createElement(_.default,{flatListControllers:[this._pendingParticipantFlatListController,this._participantFlatListController]},r.createElement("section",{className:R.default.body},null,r.createElement(S.default,{theme:"padding-large"},J,c.support?r.createElement(de.TextHeader,{className:R.default.title,level:"2",theme:"large"},r.createElement(q.GroupNameClass,{chat:d,groupMetadata:c})):r.createElement(Ce,{subject:this.props.contact.name,onSave:this._onSetSubject,textInputProps:{editable:c.canSetSubject(),editRestrictionInfo:c.restrict?this._showEditRestrictionInfo:void 0}}),te,r.createElement(B.default,{labels:d.labels})),_e,ae,w,Me,null,x,A,p,e)),ue)}}function Ce(e){var[t,a]=r.useState(null),[s,i]=r.useState(!1),o=r.useRef(!1),d=function(){var s=(0,l.default)((function*(){if(!t||t===e.subject)return o.current=!1,void a(null);i(!0);try{yield e.onSave(t)}finally{o.current=!1,a(null),i(!1)}}));return function(){return s.apply(this,arguments)}}();return r.createElement(ce.default,(0,n.default)({a8n:"group-info-drawer-subject-input",value:null!=t?t:e.subject,pending:s,showRemaining:!0,validate:e=>!(!e||!e.trim()),maxLength:ee.default.maxSubject,onBeginEdit:()=>{o.current=!0},onChange:e=>{o.current&&a(e)},onSave:d,onError:()=>{f.default.openModal(r.createElement(m.default,{onOK:()=>f.default.closeModal(),okText:F.default.t(1726)},F.default.t(124)))},onCancel:()=>{o.current=!1,a(null)},supportsEmoji:!0,lockable:!0,lowProfile:!0,theme:"large",customStyleThemes:[ce.TextInputCustomStyleThemes.groupInfoName]},e.textInputProps))}_e.CONCERNS={chat:["isReadOnly","mute","id","pendingAction","liveLocation","labels"],groupMetadata:["id","desc","participants","pendingParticipants","creation","restrict","announce","support"],contact:["name","id","profilePicThumb","pendingAction"],profilePicThumb:["imgFull"]},_e.displayName="GroupInfoDrawer",Ce.displayName="GroupInfoSubjectInput";var Me=(0,w.default)((0,X.default)((0,U.default)((0,ne.default)(_e,_e.CONCERNS))));t.default=Me},67753:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(85030)),r=s(a(13277)),o=s(a(86708)),d=s(a(77508)),c=a(66239),u=s(a(20468)),p=s(a(38637)),h=s(a(4739)),f=s(a(5431)),m=s(a(43195)),E=s(a(43926));class g extends n.Component{constructor(...e){super(...e),this.state={contextMenu:null},this.openChat=e=>{l.default.find(e).then((e=>{r.default.closeModal(),r.default.openChatFromUnread(e)}))},this.contextMenu=e=>!E.default.equals((0,c.getMaybeMeUser)(),e),this.onParticipantMenu=(e,t)=>{var a=this.props.chat.groupMetadata.participants,s=a.assertGet(t.id),i=[];if(a.canPromote(s)){var l=this.props.onParticipantPromote.bind(null,s,!1);i.push(n.createElement(d.default,{a8n:"mi-grp-promote-admin",key:"promote",action:l},p.default.t(930)))}if(a.canRemove(s)){var r=this.props.onParticipantRemove.bind(null,s,!1);i.push(n.createElement(d.default,{a8n:"mi-grp-remove-participant",key:"remove",action:r},p.default.t(934)))}if(u.default.supportsFeature(u.default.F.GROUPS_V_3)&&a.canDemote(s)){var o=this.props.onDemoteAdmin.bind(this,s);i.push(n.createElement(d.default,{a8n:"mi-grp-verify-identify",key:"demote-admin",action:o},p.default.t(543)))}E.default.equals((0,c.getMaybeMeUser)(),s.id)||i.push(n.createElement(d.default,{key:"message author",action:this.openChat.bind(null,s.contact.id)},p.default.t(945,{author:s.contact.formattedName}))),e.anchor||e.event||e.persist(),this.setState({contextMenu:{contactId:t.id,menu:i,anchor:e.anchor,event:e.anchor?void 0:e}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.contextEnabled=()=>!1,this.cancel=()=>{r.default.closeModal()},this.isAdmin=e=>this.props.chat.groupMetadata.participants.assertGet(e).isAdmin,this.contactFilter=e=>!!this.props.chat.groupMetadata.participants.get(e.id)}componentDidMount(){var e=this.props.chat.groupMetadata.participants;this.props.listeners.add(e,"add remove reset",(()=>{this.forceUpdate()}))}render(){var e;return this.state.contextMenu&&(e=n.createElement(f.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},n.createElement(m.default,{contextMenu:this.state.contextMenu}))),n.createElement(n.Fragment,null,n.createElement(o.default,{title:p.default.t(1244),filter:this.contactFilter,onCancel:this.cancel,openContextOnClick:!0,contextEnabled:this.contextEnabled,contextMenu:this.contextMenu,onContext:this.onParticipantMenu,showNotifyName:!0,listenForAdminChange:!0,participantCollection:this.props.chat.groupMetadata.participants}),e)}}g.displayName="GroupParticipantSearch";var v=(0,h.default)(g);t.default=v},12243:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(29036)),l=s(a(2784)),r=a(28221),o=i(a(13277)),d=i(a(23045)),c=i(a(3123)),u=i(a(50018)),p=i(a(96881)),h=s(a(32597)),f=i(a(84340)),m=a(66239),E=i(a(20468)),g=i(a(77680)),v=i(a(47517)),_=i(a(62536)),C=i(a(38637)),M=i(a(4739)),S=a(30371),N=s(a(55231)),y=i(a(54559)),T=i(a(90370)),b=a(74315),P=i(a(43926)),I=({isRestricted:e,onClick:t})=>l.createElement(u.default,{onClick:t,multiline:!0},l.createElement("div",{className:g.default.header},l.createElement(b.TextSpan,{theme:"title"},C.default.t(739))),l.createElement(b.TextDiv,{theme:"muted"},e?C.default.t(745):C.default.t(738))),k=({isAnnouncement:e,onClick:t})=>l.createElement(u.default,{onClick:t,multiline:!0},l.createElement("div",{className:g.default.header},l.createElement(b.TextSpan,{theme:"title"},C.default.t(746))),l.createElement(b.TextDiv,{theme:"muted"},e?C.default.t(745):C.default.t(738))),A=({isNoFrequentlyForwarded:e,onClick:t})=>{var a=y.default.hfmStringChanges?C.default.t(743):C.default.t(742);return l.createElement(u.default,{onClick:t,multiline:!0},l.createElement("div",{className:g.default.header},l.createElement(b.TextSpan,{theme:"title"},a)),l.createElement(b.TextDiv,{theme:"muted"},e?C.default.t(744):C.default.t(741)))};class O extends l.Component{constructor(...e){super(...e),this._openSettingModal=e=>{var{chat:t,groupMetadata:a}=this.props;o.default.openModal(l.createElement(v.default,{settingType:e,chat:t,groupMetadata:a}),{transition:"modal",uim:this.props.uim})},this._openAnnouncementSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT)},this._openRestrictedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.RESTRICT)},this._openNoFrequentlyForwardedSettingModal=()=>{this._openSettingModal(d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED)},this._getCurrentAdmins=()=>{var{groupMetadata:e}=this.props;return e.participants.filter((e=>e.isAdmin)).map((e=>e.contact))},this._filterParticipants=e=>{var{groupMetadata:t}=this.props;return!!t.participants.get(e.id)},this.isDisabled=e=>{var{groupMetadata:t}=this.props;return P.default.equals(e,t.owner)||(0,m.getMaybeMeUser)().equals(e)},this._openManageAdminModal=()=>{o.default.openModal(l.createElement(N.default,{onConfirm:this._updateAdmins,getInitialItems:this._getCurrentAdmins,isDisabled:this.isDisabled,isSelected:this.isDisabled,filter:this._filterParticipants,title:C.default.t(892),useShortName:!0,useAllContacts:!0,listType:N.ListType.PARTICIPANT_MANAGE_MODAL,singleSelectionFooterType:r.FooterType.CONFIRM,multipleSelectionFooterType:r.FooterType.CONFIRM}))},this._updateAdmins=e=>{var{chat:t,groupMetadata:a}=this.props,s=a.participants,i=s.filter((e=>e.isAdmin)),l=(0,n.default)(e,i,((e,t)=>e.id.equals(t.id))).map((e=>s.assertGet(e.id))),r=(0,n.default)(i,e,((e,t)=>e.id.equals(t.id)));l.length>0&&(l.forEach((e=>{e.contact.pendingAction++})),(0,S.promoteParticipants)(t,l).finally((()=>{l.forEach((e=>{e.contact.pendingAction--}))}))),r.length>0&&(r.forEach((e=>{e.contact.pendingAction++})),(0,S.demoteParticipants)(t,r).finally((()=>{r.forEach((e=>{e.contact.pendingAction--}))}))),o.default.closeModal()}}render(){var{groupMetadata:e}=this.props;return l.createElement(c.default,{theme:"striped"},l.createElement(h.default,{title:C.default.t(747),type:h.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onClose}),l.createElement(p.default,null,l.createElement(f.default,{animation:!1},l.createElement(I,{onClick:this._openRestrictedSettingModal,isRestricted:e.restrict})),E.default.isEphemeralAllowGroupMembersEnabled()?l.createElement("div",{className:g.default.restrictText},l.createElement(b.TextSpan,{theme:"muted"},C.default.t(561))):null,l.createElement(f.default,{animation:!1},l.createElement(k,{onClick:this._openAnnouncementSettingModal,isAnnouncement:e.announce}),y.default.frequentlyForwardedGroupSetting&&E.default.supportsFeature(E.default.F.FREQUENTLY_FORWARDED_SETTING)?l.createElement(A,{onClick:this._openNoFrequentlyForwardedSettingModal,isNoFrequentlyForwarded:e.noFrequentlyForwarded}):null),l.createElement(f.default,{animation:!1},l.createElement(u.default,{onClick:this._openManageAdminModal,multiline:!0},l.createElement("div",{className:g.default.header},l.createElement(b.TextSpan,{theme:"title"},C.default.t(892)))))))}}O.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded","participants","owner"]},O.displayName="GroupAdminSetting";var D=(0,_.default)((0,M.default)((0,T.default)(O,O.CONCERNS)));t.default=D},47517:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(23045)),r=s(a(20468)),o=s(a(38637)),d=s(a(54559)),c=a(88161),u=s(a(10959)),p=s(a(90370));class h extends n.PureComponent{constructor(...e){super(...e),this._handleSelect=e=>{var{chat:t,settingType:a}=this.props;e!==this._getInitialValue()&&(0,c.setGroupProperty)(t,a,e).catch((()=>()=>{}))}}_getOptions(){var{settingType:e}=this.props;switch(e){case l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:case l.default.GROUP_SETTING_TYPE.RESTRICT:return[{label:o.default.t(738),value:0},{label:o.default.t(745),value:1}];case l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return[{label:o.default.t(741),value:0},{label:o.default.t(744),value:1}];default:return[]}}_getInitialValue(){var{settingType:e,groupMetadata:t}=this.props,{restrict:a,announce:s,noFrequentlyForwarded:i}=t;switch(e){case l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return s?1:0;case l.default.GROUP_SETTING_TYPE.RESTRICT:return a?1:0;case l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return i?1:0;default:return 0}}_getPopupTitle(){var{settingType:e}=this.props;switch(e){case l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:return o.default.t(746);case l.default.GROUP_SETTING_TYPE.RESTRICT:return o.default.t(739);case l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:return d.default.hfmStringChanges?o.default.t(743):o.default.t(742);default:return""}}_getExplanation(){return this.props.settingType===l.default.GROUP_SETTING_TYPE.RESTRICT&&r.default.isEphemeralAllowGroupMembersEnabled()?o.default.t(561):null}render(){return n.createElement(u.default,{options:this._getOptions(),initialValue:this._getInitialValue(),title:this._getPopupTitle(),onSelect:this._handleSelect,explanation:this._getExplanation()})}}h.CONCERNS={chat:["id"],groupMetadata:["restrict","announce","noFrequentlyForwarded"]},h.displayName="GroupSettingsPopup";var f=(0,p.default)(h,h.CONCERNS);t.default=f},86262:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(84340)),r=s(a(38637)),o=s(a(4739)),d=s(a(36839)),c=a(97117),u=s(a(71946)),p=s(a(90370)),h=a(47138),f=s(a(18779)),m=a(74315);class E extends n.Component{constructor(e){super(e),this._updateParticipants=()=>{this.setState({participants:this.getParticipants(this.props.chat)})},this.state={participants:this.getParticipants(e.chat)}}componentDidMount(){var{chat:e}=this.props;e.liveLocationQueried||d.default.getActive(e.id.toString()).then((()=>{e.liveLocationQueried=!0})).catch((()=>{})),this.props.listeners.add((0,h.unproxy)(e),"change:liveLocation",(()=>{var{liveLocation:t}=e;t&&(this._removeParticipantListener(t),this._addParticipantListener(t),this._updateParticipants())}));var{liveLocation:t}=e;t&&this._addParticipantListener(t)}_addParticipantListener(e){this.props.listeners.add(e.participants,"add remove",this._updateParticipants)}_removeParticipantListener(e){this.props.listeners.remove(e.participants,"add remove",this._updateParticipants)}getParticipants(e){var{liveLocation:t}=e;return t?t.participants.toArray():[]}getText(){var e,t,{chat:a}=this.props,{participants:s}=this.state,i=0;if(s.forEach((a=>{a.isMe?e=!0:(t||(t=a.contact),i++)})),a.isGroup)return e?1===s.length?r.default.t(865):r.default.t(864,{count:i,_plural:i}):r.default.t(861,{count:i,_plural:i});if(e){if(1===s.length)return r.default.t(865);if(t)return r.default.t(863,{name:t.formattedShortNameWithNonBreakingSpaces})}else if(t)return r.default.t(860,{name:t.formattedShortNameWithNonBreakingSpaces});return""}render(){var{onClick:e}=this.props;if(!this.state.participants.length)return null;var t=n.createElement(f.default,{name:(0,c.liveLocationIcon)(!0)});return n.createElement(l.default,{a8nText:"section-live-location",theme:"padding",title:r.default.t(868),titleOnClick:e},n.createElement(u.default,{side:t,onClick:e},n.createElement(m.TextSpan,{theme:"title"},this.getText())))}}E.CONCERNS={chat:["id","isGroup","liveLocation","liveLocationQueried"]},E.displayName="LiveLocationRow";var g=(0,o.default)((0,p.default)(E,E.CONCERNS));t.default=g},49436:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TABS=void 0;var n=i(a(98346)),l=i(a(72779)),r=s(a(2784)),o=a(8507),d=i(a(61974)),c=i(a(3123)),u=i(a(96881)),p=s(a(32597)),h=i(a(38637)),f=i(a(8688)),m=i(a(36467)),E=i(a(20672)),g=i(a(9073)),v=i(a(94548)),_=i(a(63785)),C=i(a(54559)),M=i(a(5431)),S=i(a(82838)),N={MEDIA:"media",DOCS:"docs",LINKS:"links",PRODUCTS:"products"};t.TABS=N;class y extends r.Component{constructor(){super(...arguments),this.state={selected:this.props.initialTab,direction:null,selectable:!1},this.onSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.onCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.onMessageSelect=(e,t)=>{this.onSelectMessages(),this.selectedMessages.setVal(e,t),0===this.selectedMessages.getSelected().length&&this.onCancelSelection()},this.selectedMessages=new v.default([],(e=>e.id.toString()))}_onSelectTab(e){var t=(0,n.default)(N).indexOf(this.state.selected),a=(0,n.default)(N).indexOf(e);t!==a&&this.selectedMessages.unsetAll();var s=a>t?"right":"left";this.setState({selected:e,direction:s,selectable:!1})}_getTabs(){var e=[{tab:N.MEDIA,title:h.default.t(898)},{tab:N.DOCS,title:h.default.t(544)},{tab:N.LINKS,title:h.default.t(839)}];C.default.productMediaAttachments&&e.push({tab:N.PRODUCTS,title:h.default.t(1180)});var t=e.map((e=>{var t=(0,l.default)(E.default.menuItem,{[E.default.active]:this.state.selected===e.tab});return r.createElement("button",{className:t,onClick:this._onSelectTab.bind(this,e.tab),key:e.tab,title:e.title},e.title)})),a=(0,l.default)(E.default.menuTabsLists,C.default.productMediaAttachments?E.default.fourTabs:E.default.threeTabs);return r.createElement("div",{className:a,"data-active-tab":this.state.selected},t)}_getContent(){var e,t=this.props.chat;switch(this.state.selected){case N.MEDIA:e=r.createElement(m.default,{chat:t,mediaMsgs:t.getMediaMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages,fullCollection:!0});break;case N.LINKS:e=r.createElement(f.default,{chat:t,linkMsgs:t.getLinkMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages});break;case N.DOCS:e=r.createElement(d.default,{chat:t,docMsgs:t.getDocMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages});break;case N.PRODUCTS:e=r.createElement(_.default,{chat:t,productMsgs:t.getProductMsgs(),selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,selectedMessages:this.selectedMessages,onProductDetail:this.props.onProductDetail,setScrollOffset:this.props.setProductsScrollOffset,scrollOffset:this.props.productsScrollOffset})}return e}render(){var e=this.props.chat,t=this._getTabs(),a=this._getContent(),s=[N.MEDIA,N.DOCS].includes(this.state.selected),i=this.state.selectable?r.createElement(M.default,{displayName:"MediaMultiSelect",escapable:!0,requestDismiss:this.onCancelSelection},r.createElement(g.default,{chat:e,noSortOnForward:!0,theme:"mediaGallery",toastPosition:o.ToastPosition.RIGHT,downloadButton:s,selectedMessages:this.selectedMessages,onCancel:this.onCancelSelection})):null,n="right"===this.state.direction?"slide-forward":"slide-back";return r.createElement(c.default,{theme:"gallery"},r.createElement(p.default,{title:" ",onBack:this.props.onBack,type:p.DRAWER_HEADER_TYPE.MULTI_MEDIA_GALLERY}),i,t,r.createElement(u.default,{"data-list-scroll-container":!0},r.createElement(S.default,{transitionName:n,className:E.default.column},r.createElement("div",{className:E.default.multimediaGallery,key:this.state.selected},r.createElement("div",{className:E.default.column},a)))))}}t.default=y,y.defaultProps={initialTab:N.MEDIA,productsScrollOffset:0},y.displayName="MediaGalleryDrawer"},18115:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(72779)),l=s(a(2784)),r=i(a(13024)),o=i(a(38637)),d=i(a(60158)),c=i(a(45884)),u=i(a(90370));class p extends l.PureComponent{constructor(...e){super(...e),this.stopPropagation=e=>{e.stopPropagation()},this._renderAudioTag=e=>l.createElement(r.default,{url:e,className:d.default.mediaViewerAudio,onClick:this.stopPropagation,autoPlay:!0,controls:!0},o.default.t(246)),this._renderPlaceholder=()=>l.createElement("div",{className:(0,n.default)(d.default.imageAudio,d.default.mediaViewerPlaceholder),onClick:this.stopPropagation})}render(){var{mediaData:e}=this.props;return l.createElement(c.default,{mediaData:e,placeholderRenderer:this._renderPlaceholder},this._renderAudioTag)}}p.CONCERNS={mediaData:["mediaStage","renderableUrl"]},p.displayName="MediaAudioClass";var h=(0,u.default)(p,p.CONCERNS);t.default=h},78938:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(78523)),r=s(a(99461)),o=s(a(51045)),d=i(a(81407)),c=s(a(77508)),u=s(a(30905)),p=s(a(38637)),h=s(a(99614)),f=a(60301),m=a(58868),E=s(a(90370)),g=s(a(18779));class v extends n.PureComponent{constructor(...e){super(...e),this._getMenuBtns=()=>this.props.msg.isViewOnce?this._getViewOnceMediaMenuBtns():this.props.msgIndexInAlbum>=0?this._getAlbumMediaMenuBtns():this._getNonAlbumMediaMenuBtns(),this._getViewOnceMediaMenuBtns=()=>[n.createElement(m.MenuBarItem,{key:"btnViewOnceInfo",icon:n.createElement(g.default,{name:"view-once",className:h.default.voIcon}),title:p.default.t(34),onClick:this.props.onViewOnceInfoClick})],this._getNonAlbumMediaMenuBtns=()=>{var{msg:e}=this.props;return[n.createElement(m.MenuBarItem,{key:"btnGoToMsg",icon:n.createElement(g.default,{name:"bubble"}),title:p.default.t(705),onClick:this.props.onGoToMsgClick}),e.canStar()?this._getStarMenuBarItem():null,e.canForward()?this._getForwardMenuBarItem():null,n.createElement(m.MenuBarItem,{key:"btnDownload",icon:n.createElement(g.default,{name:"download"}),title:p.default.t(1554),disabled:!this._isMediaDownloadable(),onClick:this.props.onDownloadClick})].filter(Boolean)},this._getAlbumMediaMenuBtns=()=>{var{msg:e}=this.props;return[e.canReply()?n.createElement(m.MenuBarItem,{key:"btnReply",icon:n.createElement(g.default,{name:"reply"}),title:p.default.t(1195),onClick:this.props.onReplyClick}):null,e.canStar()?this._getStarMenuBarItem():null,n.createElement(m.MenuBarItem,{key:"btnDelete",icon:n.createElement(g.default,{name:"delete"}),title:p.default.t(1597),onClick:this.props.onDeleteClick}),e.canForward()?this._getForwardMenuBarItem():null,this._getDropdownMenuBarItem()].filter(Boolean)},this._getStarMenuBarItem=()=>{var e,t,a,{msg:s}=this.props;return s.star?(e=this.props.onUnstarClick,t="unstar-btn",a=p.default.t(1382)):(e=this.props.onStarClick,t="star-btn",a=p.default.t(1304)),n.createElement(m.MenuBarItem,{key:t,icon:n.createElement(g.default,{name:t}),title:a,onClick:e})},this._getForwardMenuBarItem=()=>n.createElement(m.MenuBarItem,{key:"btnForward",icon:n.createElement(g.default,{name:"forward"}),title:p.default.t(666),onClick:this.props.openForwardFlow}),this._getDropdownMenuBarItem=()=>{var{msg:e}=this.props,t=[];return e.isSentByMe&&t.push(n.createElement(c.default,{key:"dropdownMsgInfo",action:this.props.onMsgInfoClick},p.default.t(949))),t.push(n.createElement(c.default,{key:"dropdownGoToMsg",action:this.props.onGoToMsgClick},p.default.t(705)),n.createElement(c.default,{key:"dropdownDownload",action:this.props.onDownloadClick,disabled:!this._isMediaDownloadable()},p.default.t(1554))),n.createElement(m.MenuBarItem,{key:"btnMenu",icon:n.createElement(g.default,{name:"menu"}),title:p.default.t(941)},n.createElement(d.default,{type:"dropdown_menu",key:"MediaPanelHeaderDropdown",flipOnRTL:!0,dirX:d.DirX.LEFT},t))},this._isMediaDownloadable=()=>{var{mediaData:e,msg:t}=this.props;return!t.isViewOnce&&(!!e.renderableUrl||e.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED)}}render(){var e=this.props.msg,t=e.displayName(!0,!0);return e.isGroupMsg&&(t+=" @ "+e.chat.title()),n.createElement("div",{className:h.default.mediaPanelHeader},n.createElement("div",{className:h.default.info},n.createElement(l.default,{idle:!0,image:n.createElement(o.default,{id:e.sender,size:40}),primary:n.createElement(u.default,{ellipsify:!0,text:t}),secondary:r.default.relativeDateAndTimeStr(e.t),theme:"media"})),n.createElement("div",{className:h.default.mediaPanelTools},n.createElement(m.MenuBar,{key:"media-panel-header",theme:"strong"},this._getMenuBtns(),n.createElement(m.MenuBarItem,{a8nText:"btn-close",icon:n.createElement(g.default,{name:"x-viewer"}),title:p.default.t(1569),onClick:this.props.onClose}))))}}v.CONCERNS={msg:["star","isGroupMsg","chat","type","isGif","isViewOnce","sender","t","isSentByMe"],mediaData:["filehash","mediaStage","renderableUrl"]},v.displayName="MediaPanelHeader";var _=(0,E.default)(v,v.CONCERNS);t.default=_},18493:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(41940)),r=s(a(65826)),o=a(53922),d=a(64496),c=s(a(38637)),u=s(a(27129)),p=a(60301),h=s(a(84161)),f=s(a(73852)),m=s(a(29986)),E=s(a(90370)),g=s(a(58060));class v extends n.PureComponent{constructor(...e){super(...e),this.state={played:!1,size:{width:0,height:0},isFullscreenMode:!1},this._setRefContainer=e=>{this.refContainer=e},this.stopPropagation=e=>{e.stopPropagation()},this._handleFullscreenToggle=e=>{this.setState({isFullscreenMode:e})}}static getDerivedStateFromProps(e){var{mediaData:t}=e;return(t.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable())&&t.fullWidth&&t.fullHeight?{size:v.getSize(t)}:null}static getSize(e){if(e.isGif){return e.fullWidth>=330?{width:e.fullWidth,height:e.fullHeight}:{width:330,height:330*e.fullHeight/e.fullWidth}}return e.fullWidth>=d.MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:d.MIN_WIDTH,height:e.fullHeight}}componentDidMount(){this.props.mediaData.isStreamable()||this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:h.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var e,{msg:t,mediaData:a}=this.props,s=a.isGif,i=a.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED||a.streamable&&a.isStreamable();if(i=i||t.isForcingRMR()){var d,h,E=c.default.t(1429);return!this.state.isFullscreenMode&&t&&t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&(d=n.createElement(l.default,{annotations:t.interactiveAnnotations})),h=s?n.createElement("div",{className:u.default.mediaViewerImg,ref:this._setRefContainer},n.createElement(g.default,{src:a.renderableUrl,onClick:this.stopPropagation,autoPlay:!0,loop:!0},E),d):n.createElement("div",{ref:this._setRefContainer,className:u.default.mediaViewerImg,onClick:this.stopPropagation},n.createElement(f.default,{msg:t,mediaData:a,startTime:this.props.startTime,onClose:this.props.onClose,onError:()=>{},onFullscreenToggle:this._handleFullscreenToggle,autoPlay:this.props.autoPlay,type:o.PLAYER_TYPE.MEDIA_VIEWER,overlays:d,noPip:t.isViewOnce})),n.createElement(m.default,{type:"scaleDown",position:"relative",objectPosition:"relative",size:this.state.size,onObjectLoad:this.props.onLoad},h)}return n.createElement(r.default,{altText:null!==(e=t.caption)&&void 0!==e?e:"",mediaData:a})}}v.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]},v.defaultProps={startTime:0},v.displayName="MediaVideo";var _=(0,E.default)(v,v.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent().refContainer}}},47770:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(12436)),l=i(a(72779)),r=a(60266),o=s(a(2784)),d=s(a(35474)),c=i(a(13277)),u=i(a(3986)),p=i(a(76176)),h=i(a(23045)),f=i(a(6067)),m=i(a(30905)),E=i(a(78046)),g=i(a(18792)),v=i(a(31666)),_=i(a(19058)),C=a(66207),M=i(a(38637)),S=a(83505),N=i(a(18115)),y=i(a(86619)),T=i(a(13764)),b=i(a(78938)),P=i(a(51008)),I=a(60301),k=i(a(18493)),A=i(a(24714)),O=i(a(33001)),D=a(19432),R=i(a(90370)),x=a(47138),w=a(61864),L=i(a(5431)),B=i(a(61671));function F(e){null==e||e.stopPropagation()}function G(e){var t=e.chat;t.composeQuotedMsg=e,c.default.focusChatTextInput(t)}class U extends o.PureComponent{constructor(e){super(e),this._setRefMediaImage=e=>{this._refMediaImage=e},this._setRefMediaVideo=e=>{this._refMediaVideo=e},this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleViewOnceInfoClick=()=>{var{mediaData:e}=this.props,t=o.createElement(O.default,{isPhoto:e.type===y.default.TYPE.IMAGE,onOkClick:()=>{c.default.closeModal()}});c.default.openModal(t)},this._handleImageLoad=e=>{this.props.onImageLoad&&this.props.onImageLoad();var t=this.state.zoomElement;t&&e&&this.props.isAnimatingIn&&e instanceof HTMLElement&&(this._zoomed||(this._zoomed=!0,this.animateZoom(t,e)))},this.animateZoom=(e,t)=>{var a,s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=i.top-s.top,l=i.left-s.left,r=e.clientWidth/t.clientWidth;n-=(t.clientHeight-e.clientHeight)/2,l-=(t.clientWidth-e.clientWidth)/2,(0,B.default)(t,{opacity:[1,0],translateX:[0,l],translateY:[0,n],scale:[1,r]},{duration:h.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]});var o=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();o&&(0,B.default)(o,{opacity:[1,0]},{duration:h.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.openForwardFlow=e=>{e.stopPropagation();var{msg:t}=this.props;t.isUnsentMedia?c.default.openModal(o.createElement(p.default,{title:M.default.t(650),onOK:()=>c.default.closeModal(),okText:M.default.t(1726)},M.default.t(647))):c.default.openModal(o.createElement(v.default,{msgs:[(0,x.unproxy)(t)]}),{transition:"modal-flow"})},this._handleReplyClick=()=>{this._handleClose(),(0,r.delayMs)(h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION).then(G.bind(null,(0,x.unproxy)(this.props.msg)))},this._handleDeleteClick=()=>{var{msg:e}=this.props;c.default.openModal(o.createElement(f.default,{chat:e.chat,msgList:[(0,x.unproxy)(e)],deletePrompt:!0,revokePrompt:e.canRevoke()}))},this._handleMsgInfoClick=()=>{this._handleClose(),(0,r.delayMs)(h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION+250).then(c.default.msgInfoDrawer.bind(c.default,(0,x.unproxy)(this.props.msg)))},this._handleScroll=e=>{Math.abs(e.deltaY)>7&&this._handleClose()},this._handleImgZoomIn=e=>{var t=this._refMediaImage;e&&t&&(this._listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this._handleZoomOut=e=>{this._updateZoomPosition.cancel();var t=this._refMediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this._handleMouseMove=e=>{this._updateZoomPosition(e.pageX,e.pageY)},this._updateZoomPosition=(0,n.default)(((e,t)=>{if(!this.state.annotationTooltipDisplayed){var a=this._refMediaImage;if(a){var s=a.getInsideContainer();if(s&&s instanceof HTMLElement){var i=a.getOutsideContainer();if(i&&i instanceof HTMLElement){var{translateX:n,translateY:l}=a.getTranslatePosition(i,e,t);(0,B.default)(s,"stop"),(0,B.default)(s,{translateX:n,translateY:l,scale:h.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}}})),this._handleKeyboardZoom=e=>{if(!this.props.isAnimatingIn){this._updateZoomPosition.cancel();var t=this._refMediaImage;null!=t&&t.onImageKeyboardZoom(e)}},this._handleDownloadClick=e=>{e.stopPropagation(),E.default.initDownload((0,x.unproxy)(this.props.msg))},this._handleStarClick=e=>{e.stopPropagation();var{msg:t}=this.props;c.default.sendStarMsgs(t.chat,[(0,x.unproxy)(t)])},this._handleUnstarClick=e=>{e.stopPropagation();var{msg:t}=this.props;c.default.sendUnstarMsgs(t.chat,[(0,x.unproxy)(t)])},this._handleGoToMsgClick=e=>{e.stopPropagation(),this._handleClose(),c.default.existsDrawerRight((e=>{e&&2===u.default.column&&c.default.closeDrawerRight()}));var{msg:t}=this.props,a=t.chat.getSearchContext((0,x.unproxy)(t));c.default.openChatAt(t.chat,a).then((e=>{e&&c.default.focusChatTextInput(t.chat)}))},this._handleClose=()=>{if(!this._closing){this._closing=!0,(0,w.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation();var e,t=this.props.getZoomNode&&this.props.getZoomNode(this.props.msg.id);if(!t)return this.props.onBack();if(this.props.mediaData.type===y.default.TYPE.IMAGE&&this._refMediaImage?e=this._refMediaImage.getInsideContainer():this.props.mediaData.isGif&&this._refMediaVideo&&(e=this._refMediaVideo.getContainerElement()),!e)return this.props.onBack();var a,s=e,i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),l=n.top-i.top,r=n.left-i.left,o=t.clientWidth/s.clientWidth;l-=(s.clientHeight-t.clientHeight)/2,r-=(s.clientWidth-t.clientWidth)/2,(0,B.default)(e,{translateX:[r,0],translateY:[l,0],scale:[o,1]},{duration:h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}));var d=null===(a=this._refCaption)||void 0===a?void 0:a.getContainerElement();d&&(0,B.default)(d,{opacity:[0,1]},{duration:h.default.MEDIA_VIEWER.CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},this._handleAnnotationTooltipDisplay=()=>this.setState({annotationTooltipDisplayed:!0}),this._handleAnnotationTooltipDismiss=()=>this.setState({annotationTooltipDisplayed:!1}),this._handleCaptionClick=e=>{e.stopPropagation(),this.setState((e=>({isCaptionExpanded:!e.isCaptionExpanded})))},this._zoomed=!1,this._closing=!1,this._listenToMouseMove=!1;var t=e.mediaData.mediaStage===I.MEDIA_DATA_STAGE.RESOLVED&&e.isAnimatingIn&&e.getZoomNode?e.getZoomNode(e.msg.id):null;this.state={zoomElement:t,imgZoomed:!1,annotationTooltipDisplayed:!1,isCaptionVisible:!e.isAnimatingIn,isCaptionExpanded:!1}}componentDidMount(){var{msg:e}=this.props;e.isViewOnce&&(0,S.canMarkPlayed)(e)&&(0,S.markPlayed)(e),g.default.focus(this._refHotKeys)}getSnapshotBeforeUpdate(){var e,t=null===(e=this._refCaption)||void 0===e?void 0:e.getContainerElement();return null!=t&&null==this._captionExpandable&&(this._captionExpandable=t.scrollHeight>t.clientHeight),null}componentDidUpdate(e){var{isCaptionVisible:t}=this.state,{isAnimatingIn:a}=this.props;a||t||!e.isAnimatingIn||this.setState({isCaptionVisible:!0})}componentWillUnmount(){this._updateZoomPosition.cancel()}render(){var e,t,a,s,i,n,{msg:r,mediaData:c}=this.props;switch(c.type){case y.default.TYPE.IMAGE:i=o.createElement(T.default,{key:r.id.toString(),msg:r,mediaData:c,onLoad:this._handleImageLoad,onImgZoomIn:this._handleImgZoomIn,onAnnotationTooltipDisplay:this._handleAnnotationTooltipDisplay,onAnnotationTooltipDismiss:this._handleAnnotationTooltipDismiss,preventDownload:r.isViewOnce,ref:this._setRefMediaImage});break;case y.default.TYPE.VIDEO:i=o.createElement(k.default,{key:r.id.toString(),autoPlay:!0,msg:r,mediaData:c,onLoad:c.isGif?this._handleImageLoad:null,startTime:this.props.startTime,onClose:this._handleClose,ref:this._setRefMediaVideo});break;case y.default.TYPE.AUDIO:i=o.createElement(N.default,{mediaData:c,key:r.id.toString()});break;default:__LOG__(4,void 0,new Error,!0)`type: ${c.type}`,SEND_LOGS("MediaViewerModal: unexpected media type")}var u=this.props.msgIndexInAlbum>=0&&this.props.albumSize>=0;if(r.caption||u){var p;if(u){var h={number:this.props.msgIndexInAlbum+1,totalNumber:this.props.albumSize};p=M.default.t(1100,h)}var f=C.Configuration.Conversation({mentions:r.mentionMap(),links:r.getLinks(),trusted:!0}),E=!this.state.isCaptionVisible&&(c.isGif||c.type===y.default.TYPE.IMAGE)||this.state.isCaptionExpanded;n=o.createElement(o.Fragment,null,o.createElement("p",{className:(0,l.default)(A.default.captionWrapper),onClick:this._captionExpandable?this._handleCaptionClick:void 0,title:this._captionExpandable?M.default.t(1188):void 0,"aria-hidden":this.state.isCaptionExpanded||void 0},o.createElement(m.default,{className:(0,l.default)(A.default.mediaCaption,{[A.default.captionHidden]:E}),formatters:f,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refCaption=e})),text:r.caption||p})),this.state.isCaptionExpanded&&o.createElement("p",{className:(0,l.default)(A.default.captionWrapper,A.default.expandedCaption),onClick:this._handleCaptionClick},o.createElement(m.default,{className:(0,l.default)(A.default.mediaCaption,A.default.mediaCaptionExpanded),formatters:f,text:r.caption})))}var g=(0,l.default)(A.default.media,{[A.default.mediaWithCaption]:!!n}),v=(0,l.default)("overlay",A.default.mediaViewer,{[A.default.viewOnce]:r.isViewOnce,[A.default.mediaViewerAnimate]:this.props.isAnimatingIn,[A.default.cursorZoomOut]:this.state.imgZoomed}),S=this.state.imgZoomed&&this._listenToMouseMove?this._handleMouseMove:null,I=this.state.imgZoomed?this._handleZoomOut:null,O=r.isViewOnce||this.state.imgZoomed?null:this._handleScroll,R=!r.isViewOnce;return o.createElement(L.default,{displayName:"MediaViewer",escapable:!0,requestDismiss:this._handleClose},o.createElement(_.default,{handlers:{space:this._handleKeyboardZoom},onRef:this._setRefHotKeys},o.createElement("div",{className:v,"data-animate-media-viewer":!0,onClick:I,onMouseMove:S,onWheel:O},o.createElement(b.default,{msg:r,mediaData:c,onClose:this._handleClose,onGoToMsgClick:this._handleGoToMsgClick,onReplyClick:this._handleReplyClick,onUnstarClick:this._handleUnstarClick,onStarClick:this._handleStarClick,onDeleteClick:this._handleDeleteClick,openForwardFlow:this.openForwardFlow,onDownloadClick:this._handleDownloadClick,onMsgInfoClick:this._handleMsgInfoClick,onViewOnceInfoClick:this._handleViewOnceInfoClick,msgIndexInAlbum:this.props.msgIndexInAlbum}),o.createElement("div",{className:A.default.mediaContent,onClick:this.state.imgZoomed?null:this._handleClose},R&&o.createElement("div",{className:(0,l.default)(A.default.btnMediaPrev)},o.createElement(d.default,{type:d.ButtonType.Prev,onClick:null!==(e=this.props.onPrev)&&void 0!==e?e:F,onKeyDown:null!==(t=this.props.onPrev)&&void 0!==t?t:F,disabled:!this.props.onPrev||this.state.imgZoomed,theme:D.RoundTheme.Default})),o.createElement("div",{className:g},o.createElement(P.default,{msg:r,mediaData:c}),i,n),R&&o.createElement("div",{className:(0,l.default)(A.default.btnMediaNext)},o.createElement(d.default,{type:d.ButtonType.Next,onClick:null!==(a=this.props.onNext)&&void 0!==a?a:F,onKeyDown:null!==(s=this.props.onNext)&&void 0!==s?s:F,disabled:!this.props.onNext||this.state.imgZoomed,theme:D.RoundTheme.Default}))))))}}U.CONCERNS={msg:["id","star","isUnsentMedia","isViewOnce","chat","caption","interactiveAnnotations"],mediaData:["mediaStage","type","isGif"]},U.displayName="MediaViewerModal";var V=(0,R.default)(U,U.CONCERNS);t.default=V},5929:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(12436)),l=s(a(2784)),r=i(a(40871)),o=i(a(476)),d=i(a(21126)),c=i(a(68267));class u extends l.Component{constructor(e){super(e),this._setThumbRef=(e,t)=>{this._thumbRefs[t]=e},this._isPreviewPreferred=e=>{var t=this._thumbRefs[e];if(!t)return!1;var a=t.getBoundingClientRect(),s=(a.left+a.right)/2;return!(s>-1*window.innerWidth&&s<2*window.innerWidth)},this._getMsgIdToPreferPreview=()=>{var e=new Map;return this.props.mediaMsgs.forEach((t=>{var a=t.id.toString();e.set(a,this._isPreviewPreferred(a))})),e},this.onScroll=e=>{this.handleScroll(),this.props.onScroll(e)},this._handleScroll=()=>{var e=this._getMsgIdToPreferPreview();(0,r.default)(this.state.msgIdToPreferPreview,e)||this.setState({msgIdToPreferPreview:e})},this.getThumbs=()=>{var{highlightedMsgIds:e}=this.props,t=e&&e.size>0&&e.has(this.props.activeMsg.id.toString()),a=[];return this.props.mediaMsgs.forEach((s=>{if(null!=s.mediaData){var i=t&&e&&!e.has(s.id.toString())?"viewerFlowTransparent":"viewerFlow";a.push(l.createElement(o.default,{theme:i,active:s===this.props.activeMsg,msg:s,containerRef:e=>{this._setThumbRef(e,s.id.toString()),s===this.props.activeMsg&&this.props.onSetActiveThumb(e)},key:`media-${s.id.id}`,onClick:()=>{this.props.onSelectThumb(s)},preferPreview:!!this.state.msgIdToPreferPreview.get(s.id.toString())}))}else{var n=this.props.activeMsg;__LOG__(3,!0)`MediaViewerFlow: attempted to render a msg without mediaData: ${JSON.stringify({type:s.type,isMedia:s.isMedia,startMsgType:n.type,startMsgIsMedia:n.isMedia})}`}})),a.push(l.createElement("div",{className:d.default.mediaThumb,key:"spinner-right"},this.props.mediaMsgs.queryMediaAfter?l.createElement(c.default,{stroke:6,size:24}):null)),a.unshift(l.createElement("div",{className:d.default.mediaThumb,key:"spinner-left"},this.props.mediaMsgs.queryMediaBefore?l.createElement(c.default,{stroke:6,size:24}):null)),a.push(l.createElement("div",{className:d.default.thumbPadding,key:"padding-right"})),a.unshift(l.createElement("div",{className:d.default.thumbPadding,key:"padding-left"})),a},this._thumbRefs={},this.handleScroll=(0,n.default)(this._handleScroll,100),this.state={msgIdToPreferPreview:this._getMsgIdToPreferPreview()}}componentWillUnmount(){this.handleScroll.cancel()}render(){var e=this.getThumbs();return l.createElement("div",{className:d.default.thumbsContainer,ref:this.props.setRefThumbsContainer},l.createElement("div",{className:d.default.scrollContainer,dir:"ltr"},l.createElement("div",{onScroll:this.onScroll,className:d.default.viewerThumbs,ref:this.props.setRefThumbs},e)))}}t.default=u,u.displayName="MediaViewerThumbList"},33001:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement(l.default,{onOK:e.onOkClick,cancelText:d.default.t(835),onCancel:()=>{(0,r.openExternalLink)((0,o.getViewOnceFaqUrl)())}},n.createElement(c.TextParagraph,null,e.isPhoto?d.default.t(1438):d.default.t(1440)))};var n=i(a(2784)),l=s(a(76176)),r=a(4170),o=a(55848),d=s(a(38637)),c=a(74315)},10959:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(2784)),l=s(a(13277)),r=s(a(76176)),o=s(a(38637)),d=s(a(76069)),c=a(74315);class u extends n.PureComponent{constructor(e){super(e),this._handleOK=()=>{var{selectedValue:e}=this.state;null!=e&&this.props.onSelect(e),this.closeModal()},this._handleChange=e=>{var{target:t}=e;t instanceof HTMLInputElement&&this.setState({selectedValue:parseInt(t.value,10)})},this.closeModal=()=>{l.default.closeModal()},this.state={selectedValue:e.initialValue}}render(){var{options:e,explanation:t}=this.props,a=e.map((({value:e,label:t})=>n.createElement("li",{key:`setting-${e}`},n.createElement("label",{className:d.default.label},n.createElement("input",{type:"radio",className:d.default.input,value:String(e),checked:e===this.state.selectedValue,onChange:this._handleChange}),t))));return n.createElement(r.default,{title:this.props.title,okText:o.default.t(471),onOK:this._handleOK,onCancel:this.closeModal},t?n.createElement(c.TextDiv,{theme:"muted",className:d.default.explanation},t):null,n.createElement("form",null,n.createElement("ol",null,a)))}}t.default=u,u.displayName="SettingsPopup"},43602:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){var{verifiedLevel:t,verifiedName:a}=(0,_.default)(e,["verifiedLevel","verifiedName"]),s=(0,f.getBusinessFaqUrl)(),i=!c.default.isSMB;(0,n.useEffect)((()=>{i&&new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.SHOWN}).commit()}),[i]);var C=t===u.default.VERIFIED_LEVEL.HIGH?m.default.t(1796,{businessName:a}):m.default.t(1795);return n.createElement(d.default,{title:m.default.t(1798),onOK:()=>{o.default.closeModal(),i&&new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.DISMISS}).commit()},okText:m.default.t(1726)},n.createElement(p.default,{text:C})," ",n.createElement(r.default,{href:s,onClick:e=>{e.preventDefault(),o.default.closeModal(),setTimeout((()=>(0,h.openExternalLink)(s)),10)}},m.default.t(835)),i&&n.createElement("div",{className:l.default.footerNote},n.createElement(v.TextSpan,{theme:"muted",size:"13"},m.default.t(1799),n.createElement("br",null),n.createElement(r.default,{onClick:e=>{e.preventDefault(),o.default.closeModal(),new E.default.BannerEvent({bannerType:E.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:E.default.BANNER_OPERATIONS.CLICK}).commit(),setTimeout((()=>o.default.openModal(n.createElement(g.default,null))),200)},className:l.default.getTheAppLink},m.default.t(1797)))))};var n=i(a(2784)),l=s(a(61066)),r=s(a(30430)),o=s(a(13277)),d=s(a(76176)),c=s(a(79435)),u=s(a(23045)),p=s(a(30905)),h=a(4170),f=a(55848),m=s(a(38637)),E=s(a(84161)),g=s(a(14894)),v=a(74315),_=s(a(66130))},14894:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.createElement(o.default,{title:u.default.t(1802),onOK:()=>{new p.default.BannerEvent({bannerType:p.default.BANNER_TYPES.CROSS_SELL_PROFILE_INTERSTITIAL,bannerOperation:p.default.BANNER_OPERATIONS.DISMISS}).commit(),r.default.closeModal()},okText:u.default.t(1569)},n.createElement(h.default,null),n.createElement("p",null,n.createElement(d.default,{text:u.default.t(1800)})),n.createElement("br",null),n.createElement("p",null,n.createElement(d.default,{text:u.default.t(1801)})," ",n.createElement(l.default,{href:f,onClick:e=>{e.preventDefault(),r.default.closeModal(),setTimeout((()=>(0,c.openExternalLink)(f)),10)}},u.default.t(835))))},t.WHATSAPP_BUSINESS_URL=void 0;var n=i(a(2784)),l=s(a(30430)),r=s(a(13277)),o=s(a(76176)),d=s(a(30905)),c=a(4170),u=s(a(38637)),p=s(a(84161)),h=s(a(907)),f="https://www.whatsapp.com/business";t.WHATSAPP_BUSINESS_URL=f},907:(e,t,a)=>{"use strict";var s=a(93291),i=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,l.useRef)(null),t=(0,l.useRef)(null),{theme:a}=(0,l.useContext)(c.default),s="dark"===a;return(0,l.useEffect)((()=>(null!=e.current&&(t.current=new o.default(e.current,{text:"https://www.whatsapp.com/business/download",colorDark:"#122e31",colorLight:"#ffffff",width:r.default.QR_EDGE/2,height:r.default.QR_EDGE/2,typeNumber:4,correctLevel:o.default.CorrectLevel.H})),()=>{null!=t.current&&(t.current.clear(),t.current=null,e.current=null)})),[s]),l.createElement("div",{className:d.default.wrapper},l.createElement("div",{ref:e,className:(0,n.default)(d.default.code,{[d.default.codeDarkMode]:s})},l.createElement(u,{theme:a})))};var n=i(a(72779)),l=s(a(2784)),r=i(a(23045)),o=i(a(88120)),d=i(a(96487)),c=i(a(57750));function u(){return l.createElement("div",{className:d.default.codeLogo},l.createElement("svg",{width:"100%",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M42.6776 42.6779C37.9558 47.3997 31.6777 50.0001 24.9999 50.0001C21.0047 50.0001 17.0541 49.0389 13.5244 47.2141L0.601068 49.3339L2.72832 36.3645C0.941278 32.8647 0 28.9525 0 25.0001C0 18.3223 2.60042 12.0443 7.32229 7.32237C12.0442 2.6005 18.3221 0 24.9999 0C31.6777 0 37.9558 2.6005 42.6776 7.32237C47.3995 12.0443 50 18.3223 50 25.0001C50 31.678 47.3995 37.9558 42.6776 42.6779ZM24.9999 4.33778C13.6067 4.33778 4.33772 13.607 4.33772 25.0001C4.33772 28.4792 5.21935 31.9192 6.8868 34.9487L7.24853 35.6054L5.85915 44.0756L14.2959 42.6918L14.9565 43.0601C18.0107 44.7624 21.4837 45.6622 24.9999 45.6622C36.3932 45.6622 45.6622 36.3933 45.6622 25.0001C45.6622 13.607 36.3932 4.33778 24.9999 4.33778ZM31.1133 24.3614C32.4522 24.9804 34.1536 26.3725 34.1208 29.3117C34.0749 33.4266 31.2191 35.6542 27.2744 35.6542H19.4594H18.3042C17.5079 35.6542 16.8645 35.0053 16.8713 34.2092L17.0344 15.0573C17.041 14.2714 17.6794 13.6377 18.4652 13.6366L27.1493 13.6256C31.4651 13.6256 33.9598 16.039 33.9177 19.8134C33.8903 22.2579 32.2484 23.8355 31.1133 24.3614ZM26.766 17.4622H21.3643L21.3076 22.5361H26.7093C28.5347 22.5361 29.5672 21.5152 29.584 19.9992C29.6009 18.4831 28.5915 17.4622 26.766 17.4622ZM26.9444 26.4035H21.2643L21.2038 31.8178H26.884C28.8333 31.8178 29.7752 30.5802 29.792 29.0952C29.8085 27.6101 28.8939 26.4035 26.9444 26.4035Z",fill:"currentColor"})))}},48154:(e,t,a)=>{"use strict";var s=a(14859),i=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=i(a(2784)),l=s(a(50018)),r=s(a(93948)),o=s(a(38637)),d=s(a(18779)),c=a(74315);function u(e){var{onClick:t}=e;return n.createElement(l.default,{onClick:t,side:n.createElement(d.default,{name:"lock",className:r.default.icon}),multiline:!0},n.createElement("div",{className:r.default.header},n.createElement(c.TextSpan,{theme:"title"},o.default.t(1344))),n.createElement(c.TextDiv,{theme:"muted"},o.default.t(1343)))}u.displayName="SupportSecurityDrawerSection"},40871:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.size!==t.size)return!1;for(var[a,s]of e)if(t.get(a)!==s)return!1;return!0}},37632:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2kOFZ",block:"RYIWw",main:"_10szZ",side:"_3KoVD",multiline:"_3JrO0"}},54151:(e,t,a)=>{"use strict";a.r(t),t.default={header:"pZ7LD",chevronIcon:"rRKDJ",ephemeralIcon:"_1WLw0"}},93794:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_3rdbB",text:"_3U8HP",bubble:"_2wvOi",author:"_6dcVq",hasSuspiciousLinks:"_19kns",hasAuthor:"_1OGhb",suspiciousLabel:"gQUJI"}},4613:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_29uOU"}},78044:(e,t,a)=>{"use strict";a.r(t),t.default={nuxContainer:"_2065p",flatListContainer:"l8-Rl",btnClose:"Yvbln",nuxHeader:"eoOdQ",nuxContent:"_1leJV",nuxIcon:"_1pV3Q",nuxText:"_29ak9"}},55533:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_33SrD",photo:"_2lCi8",chevron:"_2oBEb"}},6695:(e,t,a)=>{"use strict";a.r(t),t.default={businessAccount:"_2B-3x",businessTitleText:"_2Yk6F"}},93779:(e,t,a)=>{"use strict";a.r(t),t.default={actionsRow:"_14qQt",actionButton:"_2fqPa",actionLabel:"_1jE_b",actionDisabled:"_5279G"}},13259:(e,t,a)=>{"use strict";a.r(t),t.default={businessHours:"_1tkas",businessHoursRow:"AXJ98",firstRow:"aImWg",businessHoursDay:"_2mkeX",businessHoursHours:"_23bHp",dayIsOpen:"_2chmg",businessHoursChevron:"_1xXV5",flipSvg:"_3A_Po"}},22815:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_3eNMk",description:"_2ZCot",map:"_28OwR"}},60604:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"yFHrM",title:"cKOWv",subtitle:"gE-gR",verifiedText:"_2w8JH",icon:"_2qTjM"}},5696:(e,t,a)=>{"use strict";a.r(t),t.default={contactBusinessInfo:"_3kWnf",contactBusinessInfoSpinner:"_3cDIk",dataRow:"wGgmc",businessHoursRow:"_3QoFx",businessHoursDay:"_2ImEI",businessHoursHours:"_3ZHqN",businessHoursChevron:"_1oBhF",flipSvg:"NPymp",dataRowIcon:"_2gGSv",dataRowText:"rn_1d",businessTitleText:"_3kecW",businessMarker:"_38M3x",verifiedLabel:"_1rAnz",businessMap:"_3RNY_",address:"_3gChR",link:"_3d4tA",infoIcon:"_1P52c"}},75949:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1kkcj",avatar:"_1Qz61",nameSecondary:"_1TFjN",screenName:"_3e1tx",businessVname:"_3oeAe",icon:"_2mfHr",titleAbout:"NKhhL",chevron:"_2KrN8"}},32988:(e,t,a)=>{"use strict";a.r(t),t.default={info:"_2nGFN",categories:"_2Xe9C",noPaddingBottom:"_1ZuZl"}},87228:(e,t,a)=>{"use strict";a.r(t),t.default={open:"ELbKy",closed:"_3bx91",openStatus:"_2j2TC"}},93948:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_26JZV",icon:"_1rtCQ"}},3961:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2zCWg",avatar:"bnO5E",description:"_3NATg",nameSecondary:"_2VBEG",chevron:"pQbiR",iconSearch:"_32gq5",title:"lOB7J",dogfoodingGroupBannerInternalOnly:"_3o6i8"}},77680:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_1bhv2",restrictText:"_1iS3E"}},20672:(e,t,a)=>{"use strict";a.r(t),t.default={multimediaGallery:"_2OJCz",column:"_3uBgi",menuItem:"_2-q8E",active:"_2Rdwt",menuTabsLists:"_1xOYT",threeTabs:"HDR8D",fourTabs:"_2Ov65"}},60158:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerPlaceholder:"viFjD",imageAudio:"_2PyNo",mediaViewerAudio:"_1cxdm"}},21126:(e,t,a)=>{"use strict";a.r(t),t.default={thumbsContainer:"_1O9tq",scrollContainer:"_7fCtq",viewerThumbs:"_2gaFk",mediaThumb:"_2P46q",thumbPadding:"fAqrI"}},76069:(e,t,a)=>{"use strict";a.r(t),t.default={label:"u20ZK",input:"_3dBIO",explanation:"osDhr"}},61066:(e,t,a)=>{"use strict";a.r(t),t.default={footerNote:"aiKUN",getTheAppLink:"_1m5bt"}},96487:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_2c4cP",code:"_19Fja",codeDarkMode:"_1BVwF",codeLogo:"_1PBlf"}}}]);