/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[5460],{15760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineWebPersistedJob=function(e){return(0,a.definePersistedJob)(e)};var a=r(27682)},5460:(e,t,r)=>{"use strict";var a=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(34176),d=r(60110),s=r(15760),n=r(54438),u=a(r(90737)),l=a(r(75095)),o=r(40674),c=r(31668),p=r(52152),h=new u.default("productListResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("product_list"),r=[];return t.forEachChildWithTag("product",(e=>{var t=e.maybeChild("id");if(t){var a=e.maybeChild("status");(null==a?void 0:a.contentString())===o.INVALID_PRODUCT_TOKEN?r.push({id:t.contentString(),status:o.INVALID_PRODUCT_TOKEN}):r.push((0,l.default)(e))}})),r})),w=(0,s.defineWebPersistedJob)("queryProductList").finalStep("sendStanza",(({catalogWid:e,productIds:t,width:r,height:a})=>{var s=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"get",smax_id:"21",xmlns:"w:biz:catalog",id:(0,i.generateId)()},(0,i.wap)("product_list",{jid:(0,c.USER_JID)((0,p.createWid)(e))},t.map((e=>(0,i.wap)("product",null,(0,i.wap)("id",null,e)))).concat([(0,i.wap)("width",null,r.toString()),(0,i.wap)("height",null,a.toString())])));return(0,d.sendIq)(s,h).then((e=>{if(e.success)return e.result;throw new n.ServerStatusCodeError(e.errorCode)}))})).end();t.default=w}}]);