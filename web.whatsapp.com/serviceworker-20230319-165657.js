/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */(()=>{var e={4462:(e,t,n)=>{!function(e){"use strict";var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function _(e,t,n,r,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^n[r+o];return(1&s-1>>>8)-1}function v(e,t,n,r){return _(e,t,n,r,16)}function y(e,t,n,r){return _(e,t,n,r,32)}function g(e,t,n,r){!function(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,u=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,_=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,v=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,g=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,m=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,b=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=o,S=s,E=a,A=c,j=u,T=l,I=d,P=f,k=h,O=p,x=_,U=v,D=y,R=g,C=m,M=b,$=0;$<20;$+=2)w^=(i=(D^=(i=(k^=(i=(j^=(i=w+D|0)<<7|i>>>25)+w|0)<<9|i>>>23)+j|0)<<13|i>>>19)+k|0)<<18|i>>>14,T^=(i=(S^=(i=(R^=(i=(O^=(i=T+S|0)<<7|i>>>25)+T|0)<<9|i>>>23)+O|0)<<13|i>>>19)+R|0)<<18|i>>>14,x^=(i=(I^=(i=(E^=(i=(C^=(i=x+I|0)<<7|i>>>25)+x|0)<<9|i>>>23)+C|0)<<13|i>>>19)+E|0)<<18|i>>>14,M^=(i=(U^=(i=(P^=(i=(A^=(i=M+U|0)<<7|i>>>25)+M|0)<<9|i>>>23)+A|0)<<13|i>>>19)+P|0)<<18|i>>>14,w^=(i=(A^=(i=(E^=(i=(S^=(i=w+A|0)<<7|i>>>25)+w|0)<<9|i>>>23)+S|0)<<13|i>>>19)+E|0)<<18|i>>>14,T^=(i=(j^=(i=(P^=(i=(I^=(i=T+j|0)<<7|i>>>25)+T|0)<<9|i>>>23)+I|0)<<13|i>>>19)+P|0)<<18|i>>>14,x^=(i=(O^=(i=(k^=(i=(U^=(i=x+O|0)<<7|i>>>25)+x|0)<<9|i>>>23)+U|0)<<13|i>>>19)+k|0)<<18|i>>>14,M^=(i=(C^=(i=(R^=(i=(D^=(i=M+C|0)<<7|i>>>25)+M|0)<<9|i>>>23)+D|0)<<13|i>>>19)+R|0)<<18|i>>>14;w=w+o|0,S=S+s|0,E=E+a|0,A=A+c|0,j=j+u|0,T=T+l|0,I=I+d|0,P=P+f|0,k=k+h|0,O=O+p|0,x=x+_|0,U=U+v|0,D=D+y|0,R=R+g|0,C=C+m|0,M=M+b|0,e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=S>>>0&255,e[5]=S>>>8&255,e[6]=S>>>16&255,e[7]=S>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=A>>>0&255,e[13]=A>>>8&255,e[14]=A>>>16&255,e[15]=A>>>24&255,e[16]=j>>>0&255,e[17]=j>>>8&255,e[18]=j>>>16&255,e[19]=j>>>24&255,e[20]=T>>>0&255,e[21]=T>>>8&255,e[22]=T>>>16&255,e[23]=T>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=P>>>0&255,e[29]=P>>>8&255,e[30]=P>>>16&255,e[31]=P>>>24&255,e[32]=k>>>0&255,e[33]=k>>>8&255,e[34]=k>>>16&255,e[35]=k>>>24&255,e[36]=O>>>0&255,e[37]=O>>>8&255,e[38]=O>>>16&255,e[39]=O>>>24&255,e[40]=x>>>0&255,e[41]=x>>>8&255,e[42]=x>>>16&255,e[43]=x>>>24&255,e[44]=U>>>0&255,e[45]=U>>>8&255,e[46]=U>>>16&255,e[47]=U>>>24&255,e[48]=D>>>0&255,e[49]=D>>>8&255,e[50]=D>>>16&255,e[51]=D>>>24&255,e[52]=R>>>0&255,e[53]=R>>>8&255,e[54]=R>>>16&255,e[55]=R>>>24&255,e[56]=C>>>0&255,e[57]=C>>>8&255,e[58]=C>>>16&255,e[59]=C>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,n,r)}function m(e,t,n,r){!function(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,u=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,_=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,v=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,g=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,m=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,b=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=0;w<20;w+=2)o^=(i=(y^=(i=(h^=(i=(u^=(i=o+y|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+h|0)<<18|i>>>14,l^=(i=(s^=(i=(g^=(i=(p^=(i=l+s|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+g|0)<<18|i>>>14,_^=(i=(d^=(i=(a^=(i=(m^=(i=_+d|0)<<7|i>>>25)+_|0)<<9|i>>>23)+m|0)<<13|i>>>19)+a|0)<<18|i>>>14,b^=(i=(v^=(i=(f^=(i=(c^=(i=b+v|0)<<7|i>>>25)+b|0)<<9|i>>>23)+c|0)<<13|i>>>19)+f|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,l^=(i=(u^=(i=(f^=(i=(d^=(i=l+u|0)<<7|i>>>25)+l|0)<<9|i>>>23)+d|0)<<13|i>>>19)+f|0)<<18|i>>>14,_^=(i=(p^=(i=(h^=(i=(v^=(i=_+p|0)<<7|i>>>25)+_|0)<<9|i>>>23)+v|0)<<13|i>>>19)+h|0)<<18|i>>>14,b^=(i=(m^=(i=(g^=(i=(y^=(i=b+m|0)<<7|i>>>25)+b|0)<<9|i>>>23)+y|0)<<13|i>>>19)+g|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=_>>>0&255,e[9]=_>>>8&255,e[10]=_>>>16&255,e[11]=_>>>24&255,e[12]=b>>>0&255,e[13]=b>>>8&255,e[14]=b>>>16&255,e[15]=b>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=f>>>0&255,e[21]=f>>>8&255,e[22]=f>>>16&255,e[23]=f>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,n,r)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,n,r,i,o,s){var a,c,u=new Uint8Array(16),l=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=o[c];for(;i>=64;){for(g(l,u,s,b),c=0;c<64;c++)e[t+c]=n[r+c]^l[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,r+=64}if(i>0)for(g(l,u,s,b),c=0;c<i;c++)e[t+c]=n[r+c]^l[c];return 0}function S(e,t,n,r,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=r[s];for(;n>=64;){for(g(c,a,i,b),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;n-=64,t+=64}if(n>0)for(g(c,a,i,b),s=0;s<n;s++)e[t+s]=c[s];return 0}function E(e,t,n,r,i){var o=new Uint8Array(32);m(o,r,i,b);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=r[a+16];return S(e,t,n,s,o)}function A(e,t,n,r,i,o,s){var a=new Uint8Array(32);m(a,o,s,b);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=o[u+16];return w(e,t,n,r,i,c,a)}var j=function(e){var t,n,r,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function T(e,t,n,r,i,o){var s=new j(o);return s.update(n,r,i),s.finish(e,t),0}function I(e,t,n,r,i,o){var s=new Uint8Array(16);return T(s,0,n,r,i,o),v(e,t,s,0)}function P(e,t,n,r,i){var o;if(n<32)return-1;for(A(e,0,t,0,n,r,i),T(e,16,e,32,n-32,e),o=0;o<16;o++)e[o]=0;return 0}function k(e,t,n,r,i){var o,s=new Uint8Array(32);if(n<32)return-1;if(E(s,0,32,r,i),0!==I(t,16,t,32,n-32,s))return-1;for(A(e,0,t,0,n,r,i),o=0;o<32;o++)e[o]=0;return 0}function O(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function x(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function U(e,t,n){for(var r,i=~(n-1),o=0;o<16;o++)r=i&(e[o]^t[o]),e[o]^=r,t[o]^=r}function D(e,n){var r,i,o,s=t(),a=t();for(r=0;r<16;r++)a[r]=n[r];for(x(a),x(a),x(a),i=0;i<2;i++){for(s[0]=a[0]-65517,r=1;r<15;r++)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,U(a,s,1-o)}for(r=0;r<16;r++)e[2*r]=255&a[r],e[2*r+1]=a[r]>>8}function R(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return D(n,e),D(r,t),y(n,0,r,0)}function C(e){var t=new Uint8Array(32);return D(t,e),1&t[0]}function M(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function $(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function L(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function J(e,t,n){var r,i,o=0,s=0,a=0,c=0,u=0,l=0,d=0,f=0,h=0,p=0,_=0,v=0,y=0,g=0,m=0,b=0,w=0,S=0,E=0,A=0,j=0,T=0,I=0,P=0,k=0,O=0,x=0,U=0,D=0,R=0,C=0,M=n[0],$=n[1],L=n[2],J=n[3],N=n[4],B=n[5],F=n[6],K=n[7],W=n[8],z=n[9],Y=n[10],G=n[11],q=n[12],H=n[13],V=n[14],X=n[15];o+=(r=t[0])*M,s+=r*$,a+=r*L,c+=r*J,u+=r*N,l+=r*B,d+=r*F,f+=r*K,h+=r*W,p+=r*z,_+=r*Y,v+=r*G,y+=r*q,g+=r*H,m+=r*V,b+=r*X,s+=(r=t[1])*M,a+=r*$,c+=r*L,u+=r*J,l+=r*N,d+=r*B,f+=r*F,h+=r*K,p+=r*W,_+=r*z,v+=r*Y,y+=r*G,g+=r*q,m+=r*H,b+=r*V,w+=r*X,a+=(r=t[2])*M,c+=r*$,u+=r*L,l+=r*J,d+=r*N,f+=r*B,h+=r*F,p+=r*K,_+=r*W,v+=r*z,y+=r*Y,g+=r*G,m+=r*q,b+=r*H,w+=r*V,S+=r*X,c+=(r=t[3])*M,u+=r*$,l+=r*L,d+=r*J,f+=r*N,h+=r*B,p+=r*F,_+=r*K,v+=r*W,y+=r*z,g+=r*Y,m+=r*G,b+=r*q,w+=r*H,S+=r*V,E+=r*X,u+=(r=t[4])*M,l+=r*$,d+=r*L,f+=r*J,h+=r*N,p+=r*B,_+=r*F,v+=r*K,y+=r*W,g+=r*z,m+=r*Y,b+=r*G,w+=r*q,S+=r*H,E+=r*V,A+=r*X,l+=(r=t[5])*M,d+=r*$,f+=r*L,h+=r*J,p+=r*N,_+=r*B,v+=r*F,y+=r*K,g+=r*W,m+=r*z,b+=r*Y,w+=r*G,S+=r*q,E+=r*H,A+=r*V,j+=r*X,d+=(r=t[6])*M,f+=r*$,h+=r*L,p+=r*J,_+=r*N,v+=r*B,y+=r*F,g+=r*K,m+=r*W,b+=r*z,w+=r*Y,S+=r*G,E+=r*q,A+=r*H,j+=r*V,T+=r*X,f+=(r=t[7])*M,h+=r*$,p+=r*L,_+=r*J,v+=r*N,y+=r*B,g+=r*F,m+=r*K,b+=r*W,w+=r*z,S+=r*Y,E+=r*G,A+=r*q,j+=r*H,T+=r*V,I+=r*X,h+=(r=t[8])*M,p+=r*$,_+=r*L,v+=r*J,y+=r*N,g+=r*B,m+=r*F,b+=r*K,w+=r*W,S+=r*z,E+=r*Y,A+=r*G,j+=r*q,T+=r*H,I+=r*V,P+=r*X,p+=(r=t[9])*M,_+=r*$,v+=r*L,y+=r*J,g+=r*N,m+=r*B,b+=r*F,w+=r*K,S+=r*W,E+=r*z,A+=r*Y,j+=r*G,T+=r*q,I+=r*H,P+=r*V,k+=r*X,_+=(r=t[10])*M,v+=r*$,y+=r*L,g+=r*J,m+=r*N,b+=r*B,w+=r*F,S+=r*K,E+=r*W,A+=r*z,j+=r*Y,T+=r*G,I+=r*q,P+=r*H,k+=r*V,O+=r*X,v+=(r=t[11])*M,y+=r*$,g+=r*L,m+=r*J,b+=r*N,w+=r*B,S+=r*F,E+=r*K,A+=r*W,j+=r*z,T+=r*Y,I+=r*G,P+=r*q,k+=r*H,O+=r*V,x+=r*X,y+=(r=t[12])*M,g+=r*$,m+=r*L,b+=r*J,w+=r*N,S+=r*B,E+=r*F,A+=r*K,j+=r*W,T+=r*z,I+=r*Y,P+=r*G,k+=r*q,O+=r*H,x+=r*V,U+=r*X,g+=(r=t[13])*M,m+=r*$,b+=r*L,w+=r*J,S+=r*N,E+=r*B,A+=r*F,j+=r*K,T+=r*W,I+=r*z,P+=r*Y,k+=r*G,O+=r*q,x+=r*H,U+=r*V,D+=r*X,m+=(r=t[14])*M,b+=r*$,w+=r*L,S+=r*J,E+=r*N,A+=r*B,j+=r*F,T+=r*K,I+=r*W,P+=r*z,k+=r*Y,O+=r*G,x+=r*q,U+=r*H,D+=r*V,R+=r*X,b+=(r=t[15])*M,s+=38*(S+=r*L),a+=38*(E+=r*J),c+=38*(A+=r*N),u+=38*(j+=r*B),l+=38*(T+=r*F),d+=38*(I+=r*K),f+=38*(P+=r*W),h+=38*(k+=r*z),p+=38*(O+=r*Y),_+=38*(x+=r*G),v+=38*(U+=r*q),y+=38*(D+=r*H),g+=38*(R+=r*V),m+=38*(C+=r*X),o=(r=(o+=38*(w+=r*$))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),_=(r=_+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),_=(r=_+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=d,e[7]=f,e[8]=h,e[9]=p,e[10]=_,e[11]=v,e[12]=y,e[13]=g,e[14]=m,e[15]=b}function N(e,t){J(e,t,t)}function B(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=253;r>=0;r--)N(i,i),2!==r&&4!==r&&J(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function F(e,n){var r,i=t();for(r=0;r<16;r++)i[r]=n[r];for(r=250;r>=0;r--)N(i,i),1!==r&&J(i,i,n);for(r=0;r<16;r++)e[r]=i[r]}function K(e,n,r){var i,o,s=new Uint8Array(32),a=new Float64Array(80),u=t(),l=t(),d=t(),f=t(),h=t(),p=t();for(o=0;o<31;o++)s[o]=n[o];for(s[31]=127&n[31]|64,s[0]&=248,M(a,r),o=0;o<16;o++)l[o]=a[o],f[o]=u[o]=d[o]=0;for(u[0]=f[0]=1,o=254;o>=0;--o)U(u,l,i=s[o>>>3]>>>(7&o)&1),U(d,f,i),$(h,u,d),L(u,u,d),$(d,l,f),L(l,l,f),N(f,h),N(p,u),J(u,d,u),J(d,l,h),$(h,u,d),L(u,u,d),N(l,u),L(d,f,p),J(u,d,c),$(u,u,f),J(d,d,u),J(u,f,p),J(f,l,a),N(l,h),U(u,l,i),U(d,f,i);for(o=0;o<16;o++)a[o+16]=u[o],a[o+32]=d[o],a[o+48]=l[o],a[o+64]=f[o];var _=a.subarray(32),v=a.subarray(16);return B(_,_),J(v,v,_),D(e,v),0}function W(e,t){return K(e,t,o)}function z(e,t){return r(t,32),W(e,t)}function Y(e,t,n){var r=new Uint8Array(32);return K(r,n,t),m(e,i,r,b)}j.prototype.blocks=function(e,t,n){for(var r,i,o,s,a,c,u,l,d,f,h,p,_,v,y,g,m,b,w,S=this.fin?0:2048,E=this.h[0],A=this.h[1],j=this.h[2],T=this.h[3],I=this.h[4],P=this.h[5],k=this.h[6],O=this.h[7],x=this.h[8],U=this.h[9],D=this.r[0],R=this.r[1],C=this.r[2],M=this.r[3],$=this.r[4],L=this.r[5],J=this.r[6],N=this.r[7],B=this.r[8],F=this.r[9];n>=16;)f=d=0,f+=(E+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*D,f+=(A+=8191&(r>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*F),f+=(j+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*B),f+=(T+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*N),d=(f+=(I+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*J))>>>13,f&=8191,f+=(P+=a>>>1&8191)*(5*L),f+=(k+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*$),f+=(O+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),f+=(x+=8191&(u>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*C),h=d+=(f+=(U+=l>>>5|S)*(5*R))>>>13,h+=E*R,h+=A*D,h+=j*(5*F),h+=T*(5*B),d=(h+=I*(5*N))>>>13,h&=8191,h+=P*(5*J),h+=k*(5*L),h+=O*(5*$),h+=x*(5*M),d+=(h+=U*(5*C))>>>13,h&=8191,p=d,p+=E*C,p+=A*R,p+=j*D,p+=T*(5*F),d=(p+=I*(5*B))>>>13,p&=8191,p+=P*(5*N),p+=k*(5*J),p+=O*(5*L),p+=x*(5*$),_=d+=(p+=U*(5*M))>>>13,_+=E*M,_+=A*C,_+=j*R,_+=T*D,d=(_+=I*(5*F))>>>13,_&=8191,_+=P*(5*B),_+=k*(5*N),_+=O*(5*J),_+=x*(5*L),v=d+=(_+=U*(5*$))>>>13,v+=E*$,v+=A*M,v+=j*C,v+=T*R,d=(v+=I*D)>>>13,v&=8191,v+=P*(5*F),v+=k*(5*B),v+=O*(5*N),v+=x*(5*J),y=d+=(v+=U*(5*L))>>>13,y+=E*L,y+=A*$,y+=j*M,y+=T*C,d=(y+=I*R)>>>13,y&=8191,y+=P*D,y+=k*(5*F),y+=O*(5*B),y+=x*(5*N),g=d+=(y+=U*(5*J))>>>13,g+=E*J,g+=A*L,g+=j*$,g+=T*M,d=(g+=I*C)>>>13,g&=8191,g+=P*R,g+=k*D,g+=O*(5*F),g+=x*(5*B),m=d+=(g+=U*(5*N))>>>13,m+=E*N,m+=A*J,m+=j*L,m+=T*$,d=(m+=I*M)>>>13,m&=8191,m+=P*C,m+=k*R,m+=O*D,m+=x*(5*F),b=d+=(m+=U*(5*B))>>>13,b+=E*B,b+=A*N,b+=j*J,b+=T*L,d=(b+=I*$)>>>13,b&=8191,b+=P*M,b+=k*C,b+=O*R,b+=x*D,w=d+=(b+=U*(5*F))>>>13,w+=E*F,w+=A*B,w+=j*N,w+=T*J,d=(w+=I*L)>>>13,w&=8191,w+=P*$,w+=k*M,w+=O*C,w+=x*R,E=f=8191&(d=(d=((d+=(w+=U*D)>>>13)<<2)+d|0)+(f&=8191)|0),A=h+=d>>>=13,j=p&=8191,T=_&=8191,I=v&=8191,P=y&=8191,k=g&=8191,O=m&=8191,x=b&=8191,U=w&=8191,t+=16,n-=16;this.h[0]=E,this.h[1]=A,this.h[2]=j,this.h[3]=T,this.h[4]=I,this.h[5]=P,this.h[6]=k,this.h[7]=O,this.h[8]=x,this.h[9]=U},j.prototype.finish=function(e,t){var n,r,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=n,n=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,s[0]=this.h[0]+5,n=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+n,n=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,r=(1^n)-1,o=0;o<10;o++)s[o]&=r;for(r=~r,o=0;o<10;o++)this.h[o]=this.h[o]&r|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},j.prototype.update=function(e,t,n){var r,i;if(this.leftover){for((i=16-this.leftover)>n&&(i=n),r=0;r<i;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(i=n-n%16,this.blocks(e,t,i),t+=i,n-=i),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var G=P,q=k;var H=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function V(e,t,n,r){for(var i,o,s,a,c,u,l,d,f,h,p,_,v,y,g,m,b,w,S,E,A,j,T,I,P,k,O=new Int32Array(16),x=new Int32Array(16),U=e[0],D=e[1],R=e[2],C=e[3],M=e[4],$=e[5],L=e[6],J=e[7],N=t[0],B=t[1],F=t[2],K=t[3],W=t[4],z=t[5],Y=t[6],G=t[7],q=0;r>=128;){for(S=0;S<16;S++)E=8*S+q,O[S]=n[E+0]<<24|n[E+1]<<16|n[E+2]<<8|n[E+3],x[S]=n[E+4]<<24|n[E+5]<<16|n[E+6]<<8|n[E+7];for(S=0;S<80;S++)if(i=U,o=D,s=R,a=C,c=M,u=$,l=L,J,f=N,h=B,p=F,_=K,v=W,y=z,g=Y,G,T=65535&(j=G),I=j>>>16,P=65535&(A=J),k=A>>>16,T+=65535&(j=(W>>>14|M<<18)^(W>>>18|M<<14)^(M>>>9|W<<23)),I+=j>>>16,P+=65535&(A=(M>>>14|W<<18)^(M>>>18|W<<14)^(W>>>9|M<<23)),k+=A>>>16,T+=65535&(j=W&z^~W&Y),I+=j>>>16,P+=65535&(A=M&$^~M&L),k+=A>>>16,T+=65535&(j=H[2*S+1]),I+=j>>>16,P+=65535&(A=H[2*S]),k+=A>>>16,A=O[S%16],I+=(j=x[S%16])>>>16,P+=65535&A,k+=A>>>16,P+=(I+=(T+=65535&j)>>>16)>>>16,T=65535&(j=w=65535&T|I<<16),I=j>>>16,P=65535&(A=b=65535&P|(k+=P>>>16)<<16),k=A>>>16,T+=65535&(j=(N>>>28|U<<4)^(U>>>2|N<<30)^(U>>>7|N<<25)),I+=j>>>16,P+=65535&(A=(U>>>28|N<<4)^(N>>>2|U<<30)^(N>>>7|U<<25)),k+=A>>>16,I+=(j=N&B^N&F^B&F)>>>16,P+=65535&(A=U&D^U&R^D&R),k+=A>>>16,d=65535&(P+=(I+=(T+=65535&j)>>>16)>>>16)|(k+=P>>>16)<<16,m=65535&T|I<<16,T=65535&(j=_),I=j>>>16,P=65535&(A=a),k=A>>>16,I+=(j=w)>>>16,P+=65535&(A=b),k+=A>>>16,D=i,R=o,C=s,M=a=65535&(P+=(I+=(T+=65535&j)>>>16)>>>16)|(k+=P>>>16)<<16,$=c,L=u,J=l,U=d,B=f,F=h,K=p,W=_=65535&T|I<<16,z=v,Y=y,G=g,N=m,S%16==15)for(E=0;E<16;E++)A=O[E],T=65535&(j=x[E]),I=j>>>16,P=65535&A,k=A>>>16,A=O[(E+9)%16],T+=65535&(j=x[(E+9)%16]),I+=j>>>16,P+=65535&A,k+=A>>>16,b=O[(E+1)%16],T+=65535&(j=((w=x[(E+1)%16])>>>1|b<<31)^(w>>>8|b<<24)^(w>>>7|b<<25)),I+=j>>>16,P+=65535&(A=(b>>>1|w<<31)^(b>>>8|w<<24)^b>>>7),k+=A>>>16,b=O[(E+14)%16],I+=(j=((w=x[(E+14)%16])>>>19|b<<13)^(b>>>29|w<<3)^(w>>>6|b<<26))>>>16,P+=65535&(A=(b>>>19|w<<13)^(w>>>29|b<<3)^b>>>6),k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,O[E]=65535&P|k<<16,x[E]=65535&T|I<<16;T=65535&(j=N),I=j>>>16,P=65535&(A=U),k=A>>>16,A=e[0],I+=(j=t[0])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[0]=U=65535&P|k<<16,t[0]=N=65535&T|I<<16,T=65535&(j=B),I=j>>>16,P=65535&(A=D),k=A>>>16,A=e[1],I+=(j=t[1])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[1]=D=65535&P|k<<16,t[1]=B=65535&T|I<<16,T=65535&(j=F),I=j>>>16,P=65535&(A=R),k=A>>>16,A=e[2],I+=(j=t[2])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[2]=R=65535&P|k<<16,t[2]=F=65535&T|I<<16,T=65535&(j=K),I=j>>>16,P=65535&(A=C),k=A>>>16,A=e[3],I+=(j=t[3])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[3]=C=65535&P|k<<16,t[3]=K=65535&T|I<<16,T=65535&(j=W),I=j>>>16,P=65535&(A=M),k=A>>>16,A=e[4],I+=(j=t[4])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[4]=M=65535&P|k<<16,t[4]=W=65535&T|I<<16,T=65535&(j=z),I=j>>>16,P=65535&(A=$),k=A>>>16,A=e[5],I+=(j=t[5])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[5]=$=65535&P|k<<16,t[5]=z=65535&T|I<<16,T=65535&(j=Y),I=j>>>16,P=65535&(A=L),k=A>>>16,A=e[6],I+=(j=t[6])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[6]=L=65535&P|k<<16,t[6]=Y=65535&T|I<<16,T=65535&(j=G),I=j>>>16,P=65535&(A=J),k=A>>>16,A=e[7],I+=(j=t[7])>>>16,P+=65535&A,k+=A>>>16,k+=(P+=(I+=(T+=65535&j)>>>16)>>>16)>>>16,e[7]=J=65535&P|k<<16,t[7]=G=65535&T|I<<16,q+=128,r-=128}return r}function X(e,t,n){var r,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=n;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,V(i,o,t,n),n%=128,r=0;r<n;r++)s[r]=t[a-n+r];for(s[n]=128,s[(n=256-128*(n<112?1:0))-9]=0,p(s,n-8,a/536870912|0,a<<3),V(i,o,s,n),r=0;r<8;r++)p(e,8*r,i[r],o[r]);return 0}function Z(e,n){var r=t(),i=t(),o=t(),s=t(),a=t(),c=t(),u=t(),d=t(),f=t();L(r,e[1],e[0]),L(f,n[1],n[0]),J(r,r,f),$(i,e[0],e[1]),$(f,n[0],n[1]),J(i,i,f),J(o,e[3],n[3]),J(o,o,l),J(s,e[2],n[2]),$(s,s,s),L(a,i,r),L(c,s,o),$(u,s,o),$(d,i,r),J(e[0],a,c),J(e[1],d,u),J(e[2],u,c),J(e[3],a,d)}function Q(e,t,n){var r;for(r=0;r<4;r++)U(e[r],t[r],n)}function ee(e,n){var r=t(),i=t(),o=t();B(o,n[2]),J(r,n[0],o),J(i,n[1],o),D(e,i),e[31]^=C(r)<<7}function te(e,t,n){var r,i;for(O(e[0],s),O(e[1],a),O(e[2],a),O(e[3],s),i=255;i>=0;--i)Q(e,t,r=n[i/8|0]>>(7&i)&1),Z(t,e),Z(e,e),Q(e,t,r)}function ne(e,n){var r=[t(),t(),t(),t()];O(r[0],d),O(r[1],f),O(r[2],a),J(r[3],d,f),te(e,r,n)}function re(e,n,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||r(n,32),X(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64,ne(a,s),ee(e,a),o=0;o<32;o++)n[o+32]=e[o];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)t[i]+=n-16*t[r]*ie[i-(r-32)],n=Math.floor((t[i]+128)/256),t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*ie[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*ie[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function se(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,n)}function ae(e,n,r,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),l=new Float64Array(64),d=[t(),t(),t(),t()];X(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=r+64;for(o=0;o<r;o++)e[64+o]=n[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(X(u,e.subarray(32),r+32),se(u),ne(d,u),ee(e,d),o=32;o<64;o++)e[o]=i[o];for(X(c,e,r+64),se(c),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=u[o];for(o=0;o<32;o++)for(s=0;s<32;s++)l[o+s]+=c[o]*a[s];return oe(e.subarray(32),l),f}function ce(e,n,r,i){var o,c=new Uint8Array(32),l=new Uint8Array(64),d=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(r<64)return-1;if(function(e,n){var r=t(),i=t(),o=t(),c=t(),l=t(),d=t(),f=t();return O(e[2],a),M(e[1],n),N(o,e[1]),J(c,o,u),L(o,o,e[2]),$(c,e[2],c),N(l,c),N(d,l),J(f,d,l),J(r,f,o),J(r,r,c),F(r,r),J(r,r,o),J(r,r,c),J(r,r,c),J(e[0],r,c),N(i,e[0]),J(i,i,c),R(i,o)&&J(e[0],e[0],h),N(i,e[0]),J(i,i,c),R(i,o)?-1:(C(e[0])===n[31]>>7&&L(e[0],s,e[0]),J(e[3],e[0],e[1]),0)}(f,i))return-1;for(o=0;o<r;o++)e[o]=n[o];for(o=0;o<32;o++)e[o+32]=i[o];if(X(l,e,r),se(l),te(d,f,l),ne(f,n.subarray(32)),Z(d,f),ee(c,d),r-=64,y(n,0,c,0)){for(o=0;o<r;o++)e[o]=0;return-1}for(o=0;o<r;o++)e[o]=n[o+64];return r}var ue=16,le=64,de=32,fe=64;function he(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function _e(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:m,crypto_stream_xor:A,crypto_stream:E,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:S,crypto_onetimeauth:T,crypto_onetimeauth_verify:I,crypto_verify_16:v,crypto_verify_32:y,crypto_secretbox:P,crypto_secretbox_open:k,crypto_scalarmult:K,crypto_scalarmult_base:W,crypto_box_beforenm:Y,crypto_box_afternm:G,crypto_box:function(e,t,n,r,i,o){var s=new Uint8Array(32);return Y(s,i,o),G(e,t,n,r,s)},crypto_box_open:function(e,t,n,r,i,o){var s=new Uint8Array(32);return Y(s,i,o),q(e,t,n,r,s)},crypto_box_keypair:z,crypto_hash:X,crypto_sign:ae,crypto_sign_keypair:re,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:le,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:fe,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ie,pack25519:D,unpack25519:M,M:J,A:$,S:N,Z:L,pow2523:F,add:Z,set25519:O,modL:oe,scalarmult:te,scalarbase:ne},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,n){pe(e,t,n),he(n,t);for(var r=new Uint8Array(32+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+32]=e[o];return P(i,r,r.length,t,n),i.subarray(ue)},e.secretbox.open=function(e,t,n){pe(e,t,n),he(n,t);for(var r=new Uint8Array(ue+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+ue]=e[o];return r.length<32||0!==k(i,r,r.length,t,n)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return K(n,e,t),n},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return W(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox(t,n,o)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return Y(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox.open(t,n,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return z(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return W(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==fe)throw new Error("bad secret key size");var n=new Uint8Array(le+e.length);return ae(n,e,e.length,t),n},e.sign.open=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=ce(n,e,e.length,t);if(r<0)return null;for(var i=new Uint8Array(r),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached=function(t,n){for(var r=e.sign(t,n),i=new Uint8Array(le),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached.verify=function(e,t,n){if(pe(e,t,n),t.length!==le)throw new Error("bad signature size");if(n.length!==de)throw new Error("bad public key size");var r,i=new Uint8Array(le+e.length),o=new Uint8Array(le+e.length);for(r=0;r<le;r++)i[r]=t[r];for(r=0;r<e.length;r++)i[r+le]=e[r];return ce(o,i,i.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(fe);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==fe)throw new Error("bad secret key size");for(var t=new Uint8Array(de),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(de),n=new Uint8Array(fe),r=0;r<32;r++)n[r]=e[r];return re(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=de,e.sign.secretKeyLength=fe,e.sign.seedLength=32,e.sign.signatureLength=le,e.hash=function(e){pe(e);var t=new Uint8Array(64);return X(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===_(e,0,t,0,e.length))},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,n){var r,i=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(i.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=i[r];_e(i)}))}else(t=n(2329))&&t.randomBytes&&e.setPRNG((function(e,n){var r,i=t.randomBytes(n);for(r=0;r<n;r++)e[r]=i[r];_e(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},1504:e=>{function t(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var s=e.apply(n,r);function a(e){t(s,i,o,a,c,"next",e)}function c(e){t(s,i,o,a,c,"throw",e)}a(void 0)}))}}},5526:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7914:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},3982:(e,t,n)=>{var r=n(5526);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},4302:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="function"==typeof WeakMap?new WeakMap:new Map;function r(e){var t=n.get(e);if(void 0!==t)return t;var r=new Map;return Object.getOwnPropertyNames(e).forEach((function(t){r.set(e[t],t)})),n.set(e,r),r}var i=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return r(this).has(e)}},cast:{value:function(e){return this.isValid(e)?e:void 0}},members:{value:function(){return r(this).keys()}},getName:{value:function(e){return r(this).get(e)}}}));function o(e){var n=Object.create(i);for(var r in e)t.call(e,r)&&Object.defineProperty(n,r,{value:e[r]});return Object.freeze(n)}var s=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return"string"==typeof e&&t.call(this,e)}},cast:{value:i.cast},members:{value:function(){return Object.getOwnPropertyNames(this)}},getName:{value:function(e){return e}}}));o.Mirrored=function(e){for(var t=Object.create(s),n=0,r=e.length;n<r;++n)Object.defineProperty(t,e[n],{value:e[n]});return Object.freeze(t)},Object.freeze(o.Mirrored),e.exports=Object.freeze(o)},8926:e=>{function t(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var s=e.apply(n,r);function a(e){t(s,i,o,a,c,"next",e)}function c(e){t(s,i,o,a,c,"throw",e)}a(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},6128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Jt});var r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g;function s(e,t){return"object"!=typeof t||r(t).forEach((function(n){e[n]=t[n]})),e}var a=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(a(e))),r(t).forEach((function(n){f(e,n,t[n])}))}var d=Object.defineProperty;function f(e,t,n,r){d(e,t,s(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function h(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor;function _(e,t){var n;return p(e,t)||(n=a(e))&&_(n,t)}var v=[].slice;function y(e,t,n){return v.call(e,t,n)}function g(e,t){return t(e)}function m(e){if(!e)throw new Error("Assertion Failed")}function b(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function S(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function E(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function A(e,t){if(u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=A(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:A(a,t.substr(s+1))}}function j(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){m("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)j(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var c=e[s];c||(c=e[s]={}),j(c,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function T(e){var t={};for(var n in e)u(e,n)&&(t[n]=e[n]);return t}var I=[].concat;function P(e){return I.apply([],e)}var k="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(P([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return o[e]})).map((function(e){return o[e]}));function O(e){if(!e||"object"!=typeof e)return e;var t;if(i(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(O(e[n]))}else if(k.indexOf(e.constructor)>=0)t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)u(e,o)&&(t[o]=O(e[o]));return t}function x(e,t,n,i){return n=n||{},i=i||"",r(e).forEach((function(r){if(u(t,r)){var o=e[r],s=t[r];"object"==typeof o&&"object"==typeof s&&o&&s&&""+o.constructor==""+s.constructor?x(o,s,n,i+r+"."):o!==s&&(n[i+r]=t[r])}else n[i+r]=void 0})),r(t).forEach((function(r){u(e,r)||(n[i+r]=t[r])})),n}var U="undefined"!=typeof Symbol&&Symbol.iterator,D=U?function(e){var t;return null!=e&&(t=e[U])&&t.apply(e)}:function(){return null},R={};function C(e){var t,n,r,o;if(1===arguments.length){if(i(e))return e.slice();if(this===R&&"string"==typeof e)return[e];if(o=D(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var M="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $(e,t){M=e,L=t}var L=function(){return!0},J=!new Error("").stack;function N(){if(J)try{throw N.arguments,new Error}catch(e){return e}return new Error}function B(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(L).map((function(e){return"\n"+e})).join("")):""}var F=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(F),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function z(e,t){this._e=N(),this.name=e,this.message=t}function Y(e,t,n,r){this._e=N(),this.failures=t,this.failedKeys=r,this.successCount=n}function G(e,t){this._e=N(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map((function(e){return e.toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}(e,t)}h(z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+B(this._e,2))}},toString:function(){return this.name+": "+this.message}}),h(Y).from(z),h(G).from(z);var q=K.reduce((function(e,t){return e[t]=t+"Error",e}),{}),H=z,V=K.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=N(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=W[t]||n,this.inner=null)}return h(r).from(H),e[t]=r,e}),{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var X=F.reduce((function(e,t){return e[t+"Error"]=V[t],e}),{});var Z=K.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=V[t]),e}),{});function Q(){}function ee(e){return e}function te(e,t){return null==e||e===ee?t:function(n){return t(e(n))}}function ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function re(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ne(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ne(i,this.onerror):i),void 0!==o?o:n}}function ie(e,t){return e===Q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ne(r,this.onerror):r)}}function oe(e,t){return e===Q?t:function(n){var r=e.apply(this,arguments);s(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ne(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ne(o,this.onerror):o),void 0===r?void 0===a?void 0:a:s(r,a)}}function se(e,t){return e===Q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ae(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}Z.ModifyError=Y,Z.DexieError=z,Z.BulkError=G;var ce={},ue=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=o.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),le=ue[0],de=ue[1],fe=ue[2],he=de&&de.then,pe=le&&le.constructor,_e=ue[3],ve=!!fe,ye=!1,ge=fe?function(){fe.then(Be)}:o.setImmediate?setImmediate.bind(null,Be):o.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Be(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Be,0)},me=function(e,t){Pe.push([e,t]),we&&(ge(),we=!1)},be=!0,we=!0,Se=[],Ee=[],Ae=null,je=ee,Te={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dt,txRelaxedDurabilityEnabled:!1,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{dt(e[0],e[1])}catch(e){}}))}},Ie=Te,Pe=[],ke=0,Oe=[];function xe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Q,this._lib=!1;var t=this._PSD=Ie;if(M&&(this._stackHolder=N(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ce)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ce(this,this._value))}this._state=null,this._value=null,++t.ref,Re(this,e)}var Ue={get:function(){var e=Ie,t=Xe;function n(n,r){var i=this,o=!e.global&&(e!==Ie||t!==Xe);o&&tt();var s=new xe((function(t,s){$e(i,new De(ct(n,e,o),ct(r,e,o),t,s,e))}));return M&&Ne(s,this),s}return n.prototype=ce,n},set:function(e){f(this,"then",e&&e.prototype===ce?Ue:{get:function(){return e},set:Ue.set})}};function De(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Re(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Fe();t&&"function"==typeof t.then?Re(e,(function(e,n){t instanceof xe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Me(e)),n&&Ke()}}),Ce.bind(null,e))}catch(t){Ce(e,t)}}function Ce(e,t){if(Ee.push(t),null===e._state){var n=e._lib&&Fe();t=je(t),e._state=!1,e._value=t,M&&null!==t&&"object"==typeof t&&!t._promise&&E((function(){var n=_(t,"stack");t._promise=e,f(t,"stack",{get:function(){return ye?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Se.some((function(t){return t._value===e._value}))||Se.push(e)}(e),Me(e),n&&Ke()}}function Me(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)$e(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===ke&&(++ke,me((function(){0==--ke&&We()}),[]))}function $e(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ke,me(Le,[n,e,t])}else e._listeners.push(t)}function Le(e,t,n){try{Ae=t;var r,i=t._value;t._state?r=e(i):(Ee.length&&(Ee=[]),r=e(i),-1===Ee.indexOf(i)&&function(e){var t=Se.length;for(;t;)if(Se[--t]._value===e._value)return void Se.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ae=null,0==--ke&&We(),--n.psd.ref||n.psd.finalize()}}function Je(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=B(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return M&&((r=B(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Je(e._prev,t,n)),t}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Be(){Fe()&&Ke()}function Fe(){var e=be;return be=!1,we=!1,e}function Ke(){var e,t,n;do{for(;Pe.length>0;)for(e=Pe,Pe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Pe.length>0);be=!0,we=!0}function We(){var e=Se;Se=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Oe.slice(0),n=t.length;n;)t[--n]()}function ze(e){return new xe(ce,!1,e)}function Ye(e,t){var n=Ie;return function(){var r=Fe(),i=Ie;try{return ot(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ot(i,!1),r&&Ke()}}}l(xe.prototype,{then:Ue,_then:function(e,t){$e(this,new De(null,null,e,t,Ie))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):ze(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):ze(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),ze(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{ye=!0;var e=Je(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ye=!1}}},timeout:function(e,t){var n=this;return e<1/0?new xe((function(r,i){var o=setTimeout((function(){return i(new V.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(xe.prototype,Symbol.toStringTag,"Promise"),Te.env=st(),l(xe,{all:function(){var e=C.apply(null,arguments).map(nt);return new xe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return xe.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof xe)return e;if(e&&"function"==typeof e.then)return new xe((function(t,n){e.then(t,n)}));var t=new xe(ce,!0,e);return Ne(t,Ae),t},reject:ze,race:function(){var e=C.apply(null,arguments).map(nt);return new xe((function(t,n){e.map((function(e){return xe.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Ie},set:function(e){return Ie=e}},newPSD:Qe,usePSD:at,scheduler:{get:function(){return me},set:function(e){me=e}},rejectionMapper:{get:function(){return je},set:function(e){je=e}},follow:function(e,t){return new xe((function(n,r){return Qe((function(t,n){var r=Ie;r.unhandleds=[],r.onunhandled=n,r.finalize=ne((function(){var e=this;!function(e){function t(){e(),Oe.splice(Oe.indexOf(t),1)}Oe.push(t),++ke,me((function(){0==--ke&&We()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}});var Ge={awaits:0,echoes:0,id:0},qe=0,He=[],Ve=0,Xe=0,Ze=0;function Qe(e,t,n,r){var i=Ie,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Ze;var a=Te.env;o.env=ve?{Promise:xe,PromiseProp:{value:xe,configurable:!0,writable:!0},all:xe.all,race:xe.race,resolve:xe.resolve,reject:xe.reject,nthen:ut(a.nthen,o),gthen:ut(a.gthen,o)}:{},t&&s(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=at(o,e,n,r);return 0===o.ref&&o.finalize(),c}function et(){return Ge.id||(Ge.id=++qe),++Ge.awaits,Ge.echoes+=7,Ge.id}function tt(e){!Ge.awaits||e&&e!==Ge.id||(0==--Ge.awaits&&(Ge.id=0),Ge.echoes=7*Ge.awaits)}function nt(e){return Ge.echoes&&e&&e.constructor===pe?(et(),e.then((function(e){return tt(),e}),(function(e){return tt(),ft(e)}))):e}function rt(e){++Xe,Ge.echoes&&0!=--Ge.echoes||(Ge.echoes=Ge.id=0),He.push(Ie),ot(e,!0)}function it(){var e=He[He.length-1];He.pop(),ot(e,!1)}function ot(e,t){var n,r=Ie;if((t?!Ge.echoes||Ve++&&e===Ie:!Ve||--Ve&&e===Ie)||(n=t?rt.bind(null,e):it,he.call(le,n)),e!==Ie&&(Ie=e,r===Te&&(Te.env=st()),ve)){var i=Te.env.Promise,s=e.env;de.then=s.nthen,i.prototype.then=s.gthen,(r.global||e.global)&&(Object.defineProperty(o,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject)}}function st(){var e=o.Promise;return ve?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:de.then,gthen:e.prototype.then}:{}}function at(e,t,n,r,i){var o=Ie;try{return ot(e,!0),t(n,r,i)}finally{ot(o,!1)}}function ct(e,t,n){return"function"!=typeof e?e:function(){var r=Ie;n&&et(),ot(t,!0);try{return e.apply(this,arguments)}finally{ot(r,!1)}}}function ut(e,t){return function(n,r){return e.call(this,ct(n,t,!1),ct(r,t,!1))}}var lt="unhandledrejection";function dt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(lt,!0,!0),s(r,i)):o.CustomEvent&&s(r=new CustomEvent(lt,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var ft=xe.reject;function ht(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=a;for(var o=1,s=arguments.length;o<s;++o)a(arguments[o]);return n;function a(e,r,i){if("object"==typeof e)return c(e);r||(r=se),i||(i=Q);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function c(e){r(e).forEach((function(t){var n=e[t];if(i(n))a(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new V.InvalidArgument("Invalid event config");var r=a(t,ee,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){b((function(){e.apply(null,t)}))}))}))}}))}}var pt,_t="{version}",vt=String.fromCharCode(65535),yt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return vt}}(),gt=-1/0,mt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bt="String expected.",wt=[],St="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Et=St,At=St,jt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Tt(e,t){var n,a,c,d,h,p=Tt.dependencies,_=s({addons:Tt.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},t),v=_.addons,b=_.autoOpen,I=_.indexedDB,k=_.IDBKeyRange,U=this._dbSchema={},D=[],$=[],L={},J=null,F=null,K=!1,W=null,z=!1,q="readonly",H="readwrite",X=this,Z=new xe((function(e){n=e})),ne=new xe((function(e,t){a=t})),se=!0,ce=!!Lt(I);function ue(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function le(e,t,n){var i=X._createTransaction(H,$,U);i.create(t),i._completion.catch(n);var o=i._reject.bind(i);Qe((function(){Ie.trans=i,0===e?(r(U).forEach((function(e){de(t,e,U[e].primKey,U[e].indexes)})),xe.follow((function(){return X.on.populate.fire(i)})).catch(o)):function(e,t,n){var i=[],o=D.filter((function(t){return t._cfg.version===e}))[0];if(!o)throw new V.Upgrade("Dexie specification of currently installed DB version is missing");U=X._dbSchema=o._cfg.dbschema;var s=!1;function a(){return i.length?xe.resolve(i.shift()(t.idbtrans)).then(a):xe.resolve()}return D.filter((function(t){return t._cfg.version>e})).forEach((function(e){i.push((function(){var r=U,i=e._cfg.dbschema;Me(r,n),Me(i,n),U=X._dbSchema=i;var o=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,n.change.push(s);else{var a=i.idxByName,c=o.idxByName;for(var u in a)c[u]||s.del.push(u);for(u in c){var l=a[u],d=c[u];l?l.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}(r,i);if(o.add.forEach((function(e){de(n,e[0],e[1].primKey,e[1].indexes)})),o.change.forEach((function(e){if(e.recreate)throw new V.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach((function(e){fe(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),fe(t,e)})),e.del.forEach((function(e){t.deleteIndex(e)}))})),e._cfg.contentUpgrade)return s=!0,xe.follow((function(){e._cfg.contentUpgrade(t)}))})),i.push((function(t){s&&Et||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)}))})),a().then((function(){!function(e,t){r(e).forEach((function(n){t.db.objectStoreNames.contains(n)||de(t,n,e[n].primKey,e[n].indexes)}))}(U,n)}))}(e,i,t).catch(o)}))}function de(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){fe(i,e)})),i}function fe(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function he(e,t,n){if(z||Ie.letThrough){var r=X._createTransaction(e,t,U);try{r.create()}catch(e){return ft(e)}return r._promise(e,(function(e,t){return Qe((function(){return Ie.trans=r,n(e,t,r)}))})).then((function(e){return r._completion.then((function(){return e}))}))}if(!K){if(!b)return ft(new V.DatabaseClosed);X.open().catch(Q)}return Z.then((function(){return he(e,t,n)}))}function ve(e,t,n){var r=arguments.length;if(r<2)throw new V.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=P(i);return[e,o,n]}function ye(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=L[e]?L[e].hook:ht(null,{creating:[re,Q],reading:[te,ee],updating:[oe,Q],deleting:[ie,Q]})}function ge(e,t,n){return(n?Ut:Ot)((function(n){e.push(n),t&&t()}))}function me(e,t,n,r,i){return new xe((function(o,s){var a=n.length,c=a-1;if(0===a)return o();if(r){var u,l=Ut(s),d=kt(null);E((function(){for(var r=0;r<a;++r){u={onsuccess:null,onerror:null};var s=n[r];i.call(u,s[0],s[1],t);var f=e.delete(s[0]);f._hookCtx=u,f.onerror=l,f.onsuccess=r===c?kt(o):d}}),(function(e){throw u.onerror&&u.onerror(e),e}))}else for(var f=0;f<a;++f){var h=e.delete(n[f]);h.onerror=Ot(s),f===c&&(h.onsuccess=Ye((function(){return o()})))}}))}function be(e,t,n,r){var i=this;this.db=X,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=ht(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new xe((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),ft(e)}))}function we(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function Se(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function Ee(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ae(e,t){return e._cfg.version-t._cfg.version}function je(e,t,n){t.forEach((function(t){var r=n[t];e.forEach((function(e){t in e||(e===be.prototype||e instanceof be?f(e,t,{get:function(){return this.table(t)}}):e[t]=new ye(t,r))}))}))}function Te(e,t,n,r,i,o){var s=Ye(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=Ot(i)),e.onsuccess=S(t?function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,(function(e){o=e}),r,i)&&s(n.value,n,(function(e){o=e})),o()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};s(t.value,t,(function(e){n=e})),n()}else r()},i)}function Pe(e,t){return I.cmp(e,t)}function ke(e,t){return Pe(e,t)>0?e:t}function Oe(e,t){return I.cmp(e,t)}function Ue(e,t){return I.cmp(t,e)}function De(e,t){return e<t?-1:e===t?0:1}function Re(e,t){return e>t?-1:e===t?0:1}function Ce(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Me(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],s=t.objectStore(i);c="getAll"in s;for(var a=0;a<s.indexNames.length;++a){var u=s.indexNames[a],l=s.index(u).keyPath,d="string"==typeof l?l:"["+y(l).join("+")+"]";if(e[i]){var f=e[i].idxByName[d];f&&(f.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c=!1)}function $e(e){X.on("blocked").fire(e),wt.filter((function(e){return e.name===X.name&&e!==X&&!e._vcFired})).map((function(t){return t.on("versionchange").fire(e)}))}this.version=function(e){if(J||K)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=D.filter((function(t){return t._cfg.version===e}))[0];return t||(t=new ue(e),D.push(t),D.sort(Ae),se=!1,t)},s(ue.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var t={};D.forEach((function(e){s(t,e._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),U=X._dbSchema=n,[L,X,be.prototype].forEach((function(e){for(var t in e)e[t]instanceof ye&&delete e[t]})),je([L,X,be.prototype,this._cfg.tables],r(n),n),$=r(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){r(e).forEach((function(n){if(null!==e[n]){var r={},o=function(e){var t=[];return e.split(",").forEach((function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Ct(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(r),/\./.test(e)))})),t}(e[n]),s=o.shift();if(s.multi)throw new V.Schema("Primary key cannot be multi-valued");s.keyPath&&j(r,s.keyPath,s.auto?0:s.keyPath),o.forEach((function(e){if(e.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string");j(r,e.keyPath,e.compound?e.keyPath.map((function(){return""})):"")})),t[n]=new Mt(n,s,o,r)}}))}}),this._allTables=L,this._createTransaction=function(e,t,n,r){return new be(e,t,n,r)},this._whenReady=function(e){return z||Ie.letThrough?e():new xe((function(e,t){if(!K){if(!b)return void t(new V.DatabaseClosed);X.open().catch(Q)}Z.then(e,t)})).then(e)},this.verno=0,this.open=function(){if(K||J)return Z.then((function(){return F?ft(F):X}));M&&(ne._stackHolder=N()),K=!0,F=null,z=!1;var t=n,i=null;return xe.race([ne,new xe((function(t,n){if(!I)throw new V.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=se?I.open(e):I.open(e,Math.round(10*X.verno));if(!o)throw new V.MissingAPI("IndexedDB API not available");o.onerror=Ot(n),o.onblocked=Ye($e),o.onupgradeneeded=Ye((function(t){if(i=o.transaction,se&&!X._allowEmptyDB){o.onerror=Dt,i.abort(),o.result.close();var r=I.deleteDatabase(e);r.onsuccess=r.onerror=Ye((function(){n(new V.NoSuchDatabase("Database "+e+" doesnt exist"))}))}else{i.onerror=Ot(n),le((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,i,n)}}),n),o.onsuccess=Ye((function(){if(i=null,J=o.result,wt.push(X),se)!function(){if(X.verno=J.version/10,X._dbSchema=U={},0===($=y(J.objectStoreNames,0)).length)return;const e=Ie.txRelaxedDurabilityEnabled?{durability:"relaxed"}:{durability:"default"};var t=J.transaction($t($),"readonly",e);$.forEach((function(e){for(var n=t.objectStore(e),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Ct(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),s=[],a=0;a<n.indexNames.length;++a){var c=n.index(n.indexNames[a]);i=(r=c.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var u=new Ct(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,i);s.push(u)}U[e]=new Mt(e,o,s,{})})),je([L],r(U),U)}();else if(J.objectStoreNames.length>0)try{const e=Ie.txRelaxedDurabilityEnabled?{durability:"relaxed"}:{durability:"default"};Me(U,J.transaction($t(J.objectStoreNames),q,e))}catch(e){}J.onversionchange=Ye((function(e){X._vcFired=!0,X.on("versionchange").fire(e)})),ce||"__dbnames"===e||pt.dbnames.put({name:e}).catch(Q),t()}),n)}))]).then((function(){return W=[],xe.resolve(Tt.vip(X.on.ready.fire)).then((function e(){if(W.length>0){var t=W.reduce(ae,Q);return W=[],xe.resolve(Tt.vip(t)).then(e)}}))})).finally((function(){W=null})).then((function(){return K=!1,X})).catch((function(e){try{i&&i.abort()}catch(e){}return K=!1,X.close(),ft(F=e)})).finally((function(){z=!0,t()}))},this.close=function(){var e=wt.indexOf(X);if(e>=0&&wt.splice(e,1),J){try{J.close()}catch(e){}J=null}b=!1,F=new V.DatabaseClosed,K&&a(F),Z=new xe((function(e){n=e})),ne=new xe((function(e,t){a=t}))},this.delete=function(){var t=arguments.length>0;return new xe((function(n,r){if(t)throw new V.InvalidArgument("Arguments not allowed in db.delete()");function i(){X.close();var t=I.deleteDatabase(e);t.onsuccess=Ye((function(){ce||pt.dbnames.delete(e).catch(Q),n()})),t.onerror=Ot(r),t.onblocked=$e}K?Z.then(i):i()}))},this.backendDB=function(){return J},this.isOpen=function(){return null!==J},this.hasBeenClosed=function(){return F&&F instanceof V.DatabaseClosed},this.hasFailed=function(){return null!==F},this.dynamicallyOpened=function(){return se},this.name=e,l(this,{tables:{get:function(){return r(L).map((function(e){return L[e]}))}}}),this.on=ht(this,"populate","blocked","versionchange",{ready:[ae,Q]}),this.on.ready.subscribe=g(this.on.ready.subscribe,(function(e){return function(t,n){Tt.vip((function(){z?(F||xe.resolve().then(t),n&&e(t)):W?(W.push(t),n&&e(t)):(e(t),n||e((function e(){X.on.ready.unsubscribe(t),X.on.ready.unsubscribe(e)})))}))}})),this.transaction=function(){var e=ve.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Ie.trans;r&&r.db===X&&-1===e.indexOf("!")||(r=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var o=t.map((function(e){var t=e instanceof ye?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==e||e==q)e=q;else{if("rw"!=e&&e!=H)throw new V.InvalidArgument("Invalid transaction mode: "+e);e=H}if(r){if(r.mode===q&&e===H){if(!i)throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach((function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new V.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(function(t,n){n(e)})):ft(e)}return r?r._promise(e,s,"lock"):Ie.trans?at(Ie.transless,(function(){return X._whenReady(s)})):X._whenReady(s);function s(){return xe.resolve().then((function(){var t,i=Ie.transless||Ie,s=X._createTransaction(e,o,U,r),a={trans:s,transless:i};r?s.idbtrans=r.idbtrans:s.create(),n.constructor===_e&&et();var c=xe.follow((function(){if(t=n.call(s,s))if(t.constructor===pe){var e=tt.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Rt(t))}),a);return(t&&"function"==typeof t.then?xe.resolve(t).then((function(e){return s.active?e:ft(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return t}))).then((function(e){return r&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),ft(e)}))}))}},this.table=function(e){if(!u(L,e))throw new V.InvalidTable("Table "+e+" does not exist");return L[e]},l(ye.prototype,{_trans:function(e,t,n){var r=this._tx||Ie.trans;return r&&r.db===X?r===Ie.trans?r._promise(e,t,n):Qe((function(){return r._promise(e,t,n)}),{trans:r,transless:Ie.transless||Ie}):he(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,(function(e,n,i){if(-1===i.storeNames.indexOf(r))throw new V.NotFound("Table"+r+" not part of transaction");return t(e,n,i.idbtrans.objectStore(r),i)}),n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore(q,(function(t,r,i){var o=i.get(e);o.onerror=Ot(r),o.onsuccess=Ye((function(){t(n.hook.reading.fire(o.result))}),r)})).then(t)},where:function(e){if("string"==typeof e)return new we(this,e);if(i(e))return new we(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&yt!==vt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var o=this.schema.idxByName,s=t.reduce((function(t,n){return[t[0]||o[n],t[0]||!o[n]?Ce(t[1],(function(t){return""+A(t,n)==""+e[n]})):t[1]]}),[null,null]),a=s[0];return a?this.where(a.name).equals(e[a.keyPath]).filter(s[1]):n?this.filter(s[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new Se(new we(this,i(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new Se(new we(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&Pt(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(u(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(Tt.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Q?this._idbstore(H,(function(t,n,r,i){t(me(r,i,e,!1,Q))})):this.where(":id").anyOf(e).delete().then((function(){}))},bulkPut:function(e,t){var n=this;return this._idbstore(H,(function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new V.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var s,a,c=function(e){0===u.length?r(e):i(new G(n.name+".bulkPut(): "+u.length+" of "+l+" operations failed",u))},u=[],l=e.length,d=n;if(n.hook.creating.fire===Q&&n.hook.updating.fire===Q){a=ge(u);for(var f=0,h=e.length;f<h;++f)(s=t?o.put(e[f],t[f]):o.put(e[f])).onerror=a;s.onerror=ge(u,c),s.onsuccess=xt(c)}else{var p=t||o.keyPath&&e.map((function(e){return A(e,o.keyPath)})),_=p&&w(p,(function(t,n){return null!=t&&[t,e[n]]}));(p?d.where(":id").anyOf(p.filter((function(e){return null!=e}))).modify((function(){this.value=_[this.primKey],_[this.primKey]=null})).catch(Y,(function(e){u=e.failures})).then((function(){for(var n=[],r=t&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||_[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(_[o]=null))}return n.reverse(),t&&r.reverse(),d.bulkAdd(n,r)})).then((function(e){var t=p[p.length-1];return null!=t?t:e})):d.bulkAdd(e)).then(c).catch(G,(function(e){u=u.concat(e.failures),c()})).catch(i)}}),"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(H,(function(i,o,s,a){if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new V.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function c(e){0===f.length?i(e):o(new G(n.name+".bulkAdd(): "+f.length+" of "+h+" operations failed",f))}var u,l,d,f=[],h=e.length;if(r!==Q){var p,_=s.keyPath;l=ge(f,null,!0),d=kt(null),E((function(){for(var n=0,i=e.length;n<i;++n){p={onerror:null,onsuccess:null};var o=t&&t[n],c=e[n],f=t?o:_?A(c,_):void 0,h=r.call(p,f,c,a);null==f&&null!=h&&(_?j(c=O(c),_,h):o=h),(u=null!=o?s.add(c,o):s.add(c))._hookCtx=p,n<i-1&&(u.onerror=l,p.onsuccess&&(u.onsuccess=d))}}),(function(e){throw p.onerror&&p.onerror(e),e})),u.onerror=ge(f,c,!0),u.onsuccess=kt(c)}else{l=ge(f);for(var v=0,y=e.length;v<y;++v)(u=t?s.add(e[v],t[v]):s.add(e[v])).onerror=l;u.onerror=ge(f,c),u.onsuccess=xt(c)}}))},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(H,(function(r,i,o,s){var a={onsuccess:null,onerror:null};if(n!==Q){var c=null!=t?t:o.keyPath?A(e,o.keyPath):void 0,u=n.call(a,c,e,s);null==c&&null!=u&&(o.keyPath?j(e,o.keyPath,u):t=u)}try{var l=null!=t?o.add(e,t):o.add(e);l._hookCtx=a,l.onerror=Ut(i),l.onsuccess=kt((function(t){var n=o.keyPath;n&&j(e,n,t),r(t)}))}catch(e){throw a.onerror&&a.onerror(e),e}}))},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Q||i!==Q){var o=this.schema.primKey.keyPath,s=void 0!==t?t:o&&A(e,o);return null==s?this.add(e):(e=O(e),this._trans(H,(function(){return n.where(":id").equals(s).modify((function(){this.value=e})).then((function(r){return 0===r?n.add(e,t):s}))}),"locked"))}return this._idbstore(H,(function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=Ot(r),o.onsuccess=Ye((function(t){var r=i.keyPath;r&&j(e,r,t.target.result),n(o.result)}))}))},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(H,(function(t,n,r){var i=r.delete(e);i.onerror=Ot(n),i.onsuccess=Ye((function(){t(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(H,(function(e,t,n){var r=n.clear();r.onerror=Ot(t),r.onsuccess=Ye((function(){e(r.result)}))}))},update:function(e,t){if("object"!=typeof t||i(t))throw new V.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);r(t).forEach((function(n){j(e,n,t[n])}));var n=A(e,this.schema.primKey.keyPath);return void 0===n?ft(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),l(be.prototype,{_lock:function(){return m(!Ie.global),++this._reculock,1!==this._reculock||Ie.global||(Ie.lockOwnerFor=this),this},_unlock:function(){if(m(!Ie.global),0==--this._reculock)for(Ie.global||(Ie.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{at(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Ie.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(m(!this.idbtrans),!e&&!J)switch(F&&F.name){case"DatabaseClosedError":throw new V.DatabaseClosed(F);case"MissingAPIError":throw new V.MissingAPI(F.message,F);default:throw new V.OpenFailed(F)}if(!this.active)throw new V.TransactionInactive;m(null===this._completion._state);const n=Ie.txRelaxedDurabilityEnabled?{durability:"relaxed"}:{durability:"default"};return(e=this.idbtrans=e||J.transaction($t(this.storeNames),this.mode,n)).onerror=Ye((function(n){Dt(n),t._reject(e.error)})),e.onabort=Ye((function(n){Dt(n),t.active&&t._reject(new V.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Ye((function(){t.active=!1,t._resolve()})),this},_promise:function(e,t,n){var r=this;if(e===H&&this.mode!==H)return ft(new V.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new V.TransactionInactive);if(this._locked())return new xe((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Ie])}));if(n)return Qe((function(){var e=new xe((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new xe((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=xe.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return e}));else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new xe((function(n,i){e.then((function(e){return t._waitingQueue.push(Ye(n.bind(null,e)))}),(function(e){return t._waitingQueue.push(Ye(i.bind(null,e)))})).finally((function(){t._waitingFor===r&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new V.Abort),this.active=!1},tables:{get:(d="Transaction.tables",h=function(){return L},function(){return console.warn(d+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+B(N(),1)),h.apply(this,arguments)})},table:function(e){return new ye(e,X.table(e).schema,this)}}),l(we.prototype,(function(){function e(e,t,n){var r=e instanceof we?new Se(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new Se(e,(function(){return k.only("")})).limit(0)}function n(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[c],u)<0&&(a=c)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function r(t,r,i,o){var s,a,c,u,l,d,f,h=i.length;if(!i.every((function(e){return"string"==typeof e})))return e(t,bt);function p(e){s=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),a=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),c="next"===e?De:Re;var t=i.map((function(e){return{lower:a(e),upper:s(e)}})).sort((function(e,t){return c(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),d=e,f="next"===e?"":o}p("next");var _=new Se(t,(function(){return k.bound(u[0],l[h-1]+o)}));_._ondirectionchange=function(e){p(e)};var v=0;return _._addAlgorithm((function(e,t,i){var o=e.key;if("string"!=typeof o)return!1;var s=a(o);if(r(s,l,v))return!0;for(var p=null,_=v;_<h;++_){var y=n(o,s,u[_],l[_],c,d);null===y&&null===p?v=_+1:(null===p||c(p,y)>0)&&(p=y)}return t(null!==p?function(){e.continue(p+f)}:i),!1})),_}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return Pe(n,r)>0||0===Pe(n,r)&&(i||o)&&(!i||!o)?t(this):new Se(this,(function(){return k.bound(n,r,!i,!o)}))}catch(t){return e(this,mt)}},equals:function(e){return new Se(this,(function(){return k.only(e)}))},above:function(e){return new Se(this,(function(){return k.lowerBound(e,!0)}))},aboveOrEqual:function(e){return new Se(this,(function(){return k.lowerBound(e)}))},below:function(e){return new Se(this,(function(){return k.upperBound(e,!0)}))},belowOrEqual:function(e){return new Se(this,(function(){return k.upperBound(e)}))},startsWith:function(t){return"string"!=typeof t?e(this,bt):this.between(t,t+vt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],vt)},equalsIgnoreCase:function(e){return r(this,(function(e,t){return e===t[0]}),[e],"")},anyOfIgnoreCase:function(){var e=C.apply(R,arguments);return 0===e.length?t(this):r(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},startsWithAnyOfIgnoreCase:function(){var e=C.apply(R,arguments);return 0===e.length?t(this):r(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,vt)},anyOf:function(){var n=C.apply(R,arguments),r=Oe;try{n.sort(r)}catch(t){return e(this,mt)}if(0===n.length)return t(this);var i=new Se(this,(function(){return k.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(e){r="next"===e?Oe:Ue,n.sort(r)};var o=0;return i._addAlgorithm((function(e,t,i){for(var s=e.key;r(s,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(s,n[o])||(t((function(){e.continue(n[o])})),!1)})),i},notEqual:function(e){return this.inAnyRange([[gt,e],[e,yt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=C.apply(R,arguments);if(0===t.length)return new Se(this);try{t.sort(Oe)}catch(t){return e(this,mt)}var n=t.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[gt,t]]}),null);return n.push([t[t.length-1],yt]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&Oe(e[0],e[1])<=0})))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var s,a=Oe;function c(e,t){return a(e[0],t[0])}try{(s=n.reduce((function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(Pe(t[0],i[1])<0&&Pe(t[1],i[0])>0){i[0]=Pe(o=i[0],s=t[0])<0?o:s,i[1]=ke(i[1],t[1]);break}}var o,s;return n===r&&e.push(t),e}),[])).sort(c)}catch(t){return e(this,mt)}var u=0,l=o?function(e){return Oe(e,s[u][1])>0}:function(e){return Oe(e,s[u][1])>=0},d=i?function(e){return Ue(e,s[u][0])>0}:function(e){return Ue(e,s[u][0])>=0};var f=l,h=new Se(this,(function(){return k.bound(s[0][0],s[s.length-1][1],!i,!o)}));return h._ondirectionchange=function(e){"next"===e?(f=l,a=Oe):(f=d,a=Ue),s.sort(c)},h._addAlgorithm((function(e,t,n){for(var r=e.key;f(r);)if(++u===s.length)return t(n),!1;return!!function(e){return!l(e)&&!d(e)}(r)||(0===Pe(r,s[u][1])||0===Pe(r,s[u][0])||t((function(){a===Oe?e.continue(s[u][0]):e.continue(s[u][1])})),!1)})),h},startsWithAnyOf:function(){var n=C.apply(R,arguments);return n.every((function(e){return"string"==typeof e}))?0===n.length?t(this):this.inAnyRange(n.map((function(e){return[e,e+vt]}))):e(this,"startsWithAnyOf() only works with strings")}}})),l(Se.prototype,(function(){function e(e,t){e.filter=Ce(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ce(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new V.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function i(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function o(e,t,n,r,o){var s=e.replayFilter?Ce(e.filter,e.replayFilter()):e.filter;e.or?function(){var a={},c=0;function l(){2==++c&&n()}function d(e,n,i){if(!s||s(n,i,l,r)){var o=n.primaryKey,c=""+o;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(o)),u(a,c)||(a[c]=!0,t(e,n,i))}}e.or._iterate(d,l,r,o),Te(i(e,o),e.algorithm,d,l,r,!e.keysOnly&&e.valueMapper)}():Te(i(e,o),Ce(e.algorithm,s),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ft.bind(null,n.error)):n.table._idbstore(q,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,ft.bind(null,t.error)):t.table._idbstore(H,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Ce(t.algorithm,e)},_iterate:function(e,t,n,r){return o(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read((function(n,r,i){o(t,e,n,r,i)}))},count:function(e){var t=this._ctx;if(Ee(t,!0))return this._read((function(e,r,i){var o=n(t,i),s=t.range?o.count(t.range):o.count();s.onerror=Ot(r),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}}),e);var r=0;return this._read((function(e,n,i){o(t,(function(){return++r,!1}),(function(){e(r)}),n,i)}),e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(a)})).then(t)},toArray:function(e){var t=this._ctx;return this._read((function(e,r,i){if(c&&"next"===t.dir&&Ee(t,!0)&&t.limit>0){var s=t.table.hook.reading.fire,a=n(t,i),u=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);u.onerror=Ot(r),u.onsuccess=xt(s===ee?e:function(t){try{e(t.map(s))}catch(e){r(e)}})}else{var l=[];o(t,(function(e){l.push(e)}),(function(){e(l)}),r,i)}}),e)},offset:function(e){var n=this._ctx;return e<=0||(n.offset+=e,Ee(n)?t(n,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):t(n,(function(){var t=e;return function(){return--t<0}}))),this},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},until:function(t,n){return e(this._ctx,(function(e,r,i){return!t(e.value)||(r(i),n)})),this},first:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return e(this._ctx,(function(e){return t(e.value)})),function(e,t){e.isMatch=Ce(e.isMatch,t)}(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new we(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},primaryKeys:function(e){var t=this._ctx;if(c&&"next"===t.dir&&Ee(t,!0)&&t.limit>0)return this._read((function(e,r,i){var o=n(t,i),s=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);s.onerror=Ot(r),s.onsuccess=xt(e)})).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,(function(e){var t=e.primaryKey.toString(),n=u(r,t);return r[t]=!0,!n})),this},modify:function(e){var t=this,n=this._ctx.table.hook,i=n.updating.fire,o=n.deleting.fire;return this._write((function(n,a,c,l){var d;if("function"==typeof e)d=i===Q&&o===Q?e:function(t){var n=O(t);if(!1===e.call(this,t,this))return!1;if(u(this,"value")){var s=x(n,this.value),a=i.call(this,s,this.primKey,n,l);a&&(t=this.value,r(a).forEach((function(e){j(t,e,a[e])})))}else o.call(this,this.primKey,t,l)};else if(i===Q){var f=r(e),h=f.length;d=function(t){for(var n=!1,r=0;r<h;++r){var i=f[r],o=e[i];A(t,i)!==o&&(j(t,i,o),n=!0)}return n}}else{var p=e;e=T(p),d=function(t){var n=!1,o=i.call(this,e,this.primKey,O(t),l);return o&&s(e,o),r(e).forEach((function(r){var i=e[r];A(t,r)!==i&&(j(t,r,i),n=!0)})),o&&(e=T(p)),n}}var _=0,v=0,y=!1,g=[],m=[],b=null;function w(e){return e&&(g.push(e),m.push(b)),a(new Y("Error modifying one or more objects",g,v,m))}function S(){y&&v+g.length===_&&(g.length>0?w():n(v))}t.clone().raw()._iterate((function(e,t){b=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return g.push(e),m.push(n.primKey),S(),!0}if(!1!==d.call(n,e,n)){var i=!u(n,"value");++_,E((function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=Ut(r),e.onsuccess=kt((function(){++v,S()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){y=!0,S()}),w,c)}))},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==Q;if(!i&&Ee(t)&&(t.isPrimKey&&!At||!n))return this._write((function(e,t,r){var i=Ot(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var s=o.result;E((function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(s)}}),(function(e){return t(e)}))}}));var o=i?2e3:1e4;return this._write((function(n,s,a,c){var u=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),d=[],f=function(){return l.each(i?function(e,t){d.push([t.primaryKey,t.value])}:function(e,t){d.push(t.primaryKey)}).then((function(){return i?d.sort((function(e,t){return Oe(e[0],t[0])})):d.sort(Oe),me(a,c,d,i,r)})).then((function(){var e=d.length;return u+=e,d=[],e<o?u:f()}))};n(f())}))}}})),s(this,{Collection:Se,Table:ye,Transaction:be,Version:ue,WhereClause:we}),X.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+X.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+X.name+"'. Closing db now to resume the delete request."),X.close()})),X.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+X.name+"') was blocked"):console.warn("Upgrade '"+X.name+"' blocked by other connection holding version "+e.oldVersion/10)})),v.forEach((function(e){e(X)}))}function It(e){if("function"==typeof e)return new e;if(i(e))return[It(e[0])];if(e&&"object"==typeof e){var t={};return Pt(t,e),t}return e}function Pt(e,t){return r(t).forEach((function(n){var r=It(t[n]);e[n]=r})),e}function kt(e){return Ye((function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),e&&e(i)}),e)}function Ot(e){return Ye((function(t){return Dt(t),e(t.target.error),!1}))}function xt(e){return Ye((function(t){e(t.target.result)}))}function Ut(e){return Ye((function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),Dt(t),e(r),!1}))}function Dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Rt(e){var t=function(t){return e.next(t)},n=o(t),r=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),s=o.value;return o.done?s:s&&"function"==typeof s.then?s.then(n,r):i(s)?xe.all(s).then(n,r):n(s)}}return o(t)()}function Ct(e,t,n,r,i,o,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+a}function Mt(e,t,n,r){this.name=e,this.primKey=t||new Ct,this.indexes=n||[new Ct],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=w(n,(function(e){return[e.name,e]}))}function $t(e){return 1===e.length?e[0]:e}function Lt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}$(M,jt),l(Tt,Z),l(Tt,{delete:function(e){var t=new Tt(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new Tt(e).open().then((function(e){return e.close(),!0})).catch(Tt.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(e){var t=Lt(Tt.dependencies.indexedDB);return t?new xe((function(e,n){var r=t();r.onsuccess=function(t){e(y(t.target.result,0))},r.onerror=Ot(n)})).then(e):pt.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&s(this,e)}},applyStructure:Pt,ignoreTransaction:function(e){return Ie.trans?at(Ie.transless,e):e()},vip:function(e){return Qe((function(){return Ie.letThrough=!0,e()}))},async:function(e){return function(){try{var t=Rt(e.apply(this,arguments));return t&&"function"==typeof t.then?t:xe.resolve(t)}catch(e){return ft(e)}}},spawn:function(e,t,n){try{var r=Rt(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:xe.resolve(r)}catch(e){return ft(e)}},currentTransaction:{get:function(){return Ie.trans||null}},waitFor:function(e,t){var n=xe.resolve("function"==typeof e?Tt.ignoreTransaction(e):e).timeout(t||6e4);return Ie.trans?Ie.trans.waitFor(n):n},Promise:xe,debug:{get:function(){return M},set:function(e){$(e,"dexie"===e?function(){return!0}:jt)}},derive:h,extend:s,props:l,override:g,Events:ht,getByKeyPath:A,setByKeyPath:j,delByKeyPath:function(e,t){"string"==typeof t?j(e,t,void 0):"length"in t&&[].map.call(t,(function(t){j(e,t,void 0)}))},shallowClone:T,deepClone:O,getObjectDiff:x,asap:b,maxKey:yt,minKey:gt,addons:[],connections:wt,MultiModifyError:V.Modify,errnames:q,IndexSpec:Ct,TableSchema:Mt,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:_t,version:_t.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Tt,Dexie:Tt}),xe.rejectionMapper=function(e,t){if(!e||e instanceof z||e instanceof TypeError||e instanceof SyntaxError||!e.name||!X[e.name])return e;var n=new X[e.name](t||e.message,e);return"stack"in e&&f(n,"stack",{get:function(){return this.inner.stack}}),n},(pt=new Tt("__dbnames")).version(1).stores({dbnames:"name"}),function(){var e="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem(e)||"[]").forEach((function(e){return pt.dbnames.put({name:e}).catch(Q)})),localStorage.removeItem(e))}catch(e){}}();const Jt=Tt},4493:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SINGLE_BYTE_TOKEN=t.DICT_VERSION=t.DICTIONARY_3_TOKEN=t.DICTIONARY_2_TOKEN=t.DICTIONARY_1_TOKEN=t.DICTIONARY_0_TOKEN=t.DICTIONARIES=void 0;t.DICT_VERSION=3;t.SINGLE_BYTE_TOKEN=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","notification","disappearing_mode","status","jid","broadcast","user","devices","device_hash","to","offline","message","result","class","xmlns","duration","notify","iq","t","ack","g.us","enc","urn:xmpp:whatsapp:push","presence","config_value","picture","verified_name","config_code","key-index-list","contact","mediatype","routing_info","edge_routing","get","read","urn:xmpp:ping","fallback_hostname","0","chatstate","business_hours_config","unavailable","download_buckets","skmsg","verified_level","composing","handshake","device-list","media","text","fallback_ip4","media_conn","device","creation","location","config","item","fallback_ip6","count","w:profile:picture","image","business","2","hostname","call-creator","display_name","relaylatency","platform","abprops","success","msg","offline_preview","prop","key-index","v","day_of_week","pkmsg","version","1","ping","w:p","download","video","set","specific_hours","props","primary","unknown","hash","commerce_experience","last","subscribe","max_buckets","call","profile","member_since_text","close_time","call-id","sticker","mode","participants","value","query","profile_options","open_time","code","list","host","ts","contacts","upload","lid","preview","update","usync","w:stats","delivery","auth_ttl","context","fail","cart_enabled","appdata","category","atn","direct_connection","decrypt-fail","relay_id","mmg-fallback.whatsapp.net","target","available","name","last_id","mmg.whatsapp.net","categories","401","is_new","index","tctoken","ip4","token_id","latency","recipient","edit","ip6","add","thumbnail-document","26","paused","true","identity","stream:error","key","sidelist","background","audio","3","thumbnail-image","biz-cover-photo","cat","gcm","thumbnail-video","error","auth","deny","serial","in","registration","thumbnail-link","remove","00","gif","thumbnail-gif","tag","capability","multicast","item-not-found","description","business_hours","config_expo_key","md-app-state","expiration","fallback","ttl","300","md-msg-hist","device_orientation","out","w:m","open_24h","side_list","token","inactive","01","document","te2","played","encrypt","msgr","hide","direct_path","12","state","not-authorized","url","terminate","signature","status-revoke-delay","02","te","linked_accounts","trusted_contact","timezone","ptt","kyc-id","privacy_token","readreceipts","appointment_only","address","expected_ts","privacy","7","android","interactive","device-identity","enabled","attribute_padding","1080","03","screen_height"];const n=["read-self","active","fbns","protocol","reaction","screen_width","heartbeat","deviceid","2:47DEQpj8","uploadfieldstat","voip_settings","retry","priority","longitude","conflict","false","ig_professional","replaced","preaccept","cover_photo","uncompressed","encopt","ppic","04","passive","status-revoke-drop","keygen","540","offer","rate","opus","latitude","w:gp2","ver","4","business_profile","medium","sender","prev_v_id","email","website","invited","sign_credential","05","transport","skey","reason","peer_abtest_bucket","America/Sao_Paulo","appid","refresh","100","06","404","101","104","107","102","109","103","member_add_mode","105","transaction-id","110","106","outgoing","108","111","tokens","followers","ig_handle","self_pid","tue","dec","thu","joinable","peer_pid","mon","features","wed","peer_device_presence","pn","delete","07","fri","audio_duration","admin","connected","delta","rcat","disable","collection","08","480","sat","phash","all","invite","accept","critical_unblock_low","group_update","signed_credential","blinded_credential","eph_setting","net","09","background_location","refresh_id","Asia/Kolkata","privacy_mode_ts","account_sync","voip_payload_type","service_areas","acs_public_key","v_id","0a","fallback_class","relay","actual_actors","metadata","w:biz","5","connected-limit","notice","0b","host_storage","fb_page","subject","privatestats","invis","groupadd","010","note.m4r","uuid","0c","8000","sun","372","1020","stage","1200","720","canonical","fb","011","video_duration","0d","1140","superadmin","012","Opening.m4r","keystore_attestation","dleq_proof","013","timestamp","ab_key","w:sync:app:state","0e","vertical","600","p_v_id","6","likes","014","500","1260","creator","0f","rte","destination","group","group_info","syncd_anti_tampering_fatal_exception_enabled","015","dl_bw","Asia/Jakarta","vp8/h.264","online","1320","fb:multiway","10","timeout","016","nse_retry","urn:xmpp:whatsapp:dirty","017","a_v_id","web_shops_chat_header_button_enabled","nse_call","inactive-upgrade","none","web","groups","2250","mms_hot_content_timespan_in_seconds","contact_blacklist","nse_read","suspended_group_deletion_notification","binary_version","018","https://www.whatsapp.com/otp/copy/","reg_push","shops_hide_catalog_attachment_entrypoint","server_sync",".","ephemeral_messages_allowed_values","019","mms_vcache_aggregation_enabled","iphone","America/Argentina/Buenos_Aires","01a","mms_vcard_autodownload_size_kb","nse_ver","shops_header_dropdown_menu_item","dhash","catalog_status","communities_mvp_new_iqs_serverprop","blocklist","default","11","ephemeral_messages_enabled","01b","original_dimensions","8","mms4_media_retry_notification_encryption_enabled","mms4_server_error_receipt_encryption_enabled","original_image_url","sync","multiway","420","companion_enc_static","shops_profile_drawer_entrypoint","01c","vcard_as_document_size_kb","status_video_max_duration","request_image_url","01d","regular_high","s_t","abt","share_ext_min_preliminary_image_quality","01e","32","syncd_key_rotation_enabled","data_namespace","md_downgrade_read_receipts2","patch","polltype","ephemeral_messages_setting","userrate","15","partial_pjpeg_bw_threshold","played-self","catalog_exists","01f","mute_v2"];t.DICTIONARY_0_TOKEN=n;const r=["reject","dirty","announcement","020","13","9","status_video_max_bitrate","fb:thrift_iq","offline_batch","022","full","ctwa_first_business_reply_logging","h.264","smax_id","group_description_length","https://www.whatsapp.com/otp/code","status_image_max_edge","smb_upsell_business_profile_enabled","021","web_upgrade_to_md_modal","14","023","s_o","smaller_video_thumbs_status_enabled","media_max_autodownload","960","blocking_status","peer_msg","joinable_group_call_client_version","group_call_video_maximization_enabled","return_snapshot","high","America/Mexico_City","entry_point_block_logging_enabled","pop","024","1050","16","1380","one_tap_calling_in_group_chat_size","regular_low","inline_joinable_education_enabled","hq_image_max_edge","locked","America/Bogota","smb_biztools_deeplink_enabled","status_image_quality","1088","025","payments_upi_intent_transaction_limit","voip","w:g2","027","md_pin_chat_enabled","026","multi_scan_pjpeg_download_enabled","shops_product_grid","transaction_id","ctwa_context_enabled","20","fna","hq_image_quality","alt_jpeg_doc_detection_quality","group_call_max_participants","pkey","America/Belem","image_max_kbytes","web_cart_v1_1_order_message_changes_enabled","ctwa_context_enterprise_enabled","urn:xmpp:whatsapp:account","840","Asia/Kuala_Lumpur","max_participants","video_remux_after_repair_enabled","stella_addressbook_restriction_type","660","900","780","context_menu_ios13_enabled","mute-state","ref","payments_request_messages","029","frskmsg","vcard_max_size_kb","sample_buffer_gif_player_enabled","match_last_seen","510","4983","video_max_bitrate","028","w:comms:chat","17","frequently_forwarded_max","groups_privacy_blacklist","Asia/Karachi","02a","web_download_document_thumb_mms_enabled","02b","hist_sync","biz_block_reasons_version","1024","18","web_is_direct_connection_for_plm_transparent","view_once_write","file_max_size","paid_convo_id","online_privacy_setting","video_max_edge","view_once_read","enhanced_storage_management","multi_scan_pjpeg_encoding_enabled","ctwa_context_forward_enabled","video_transcode_downgrade_enable","template_doc_mime_types","hq_image_bw_threshold","30","body","u_aud_limit_sil_restarts_ctrl","other","participating","w:biz:directory","1110","vp8","4018","meta","doc_detection_image_max_edge","image_quality","1170","02c","smb_upsell_chat_banner_enabled","key_expiry_time_second","pid","stella_interop_enabled","19","linked_device_max_count","md_device_sync_enabled","02d","02e","360","enhanced_block_enabled","ephemeral_icon_in_forwarding","paid_convo_status","gif_provider","project_name","server-error","canonical_url_validation_enabled","wallpapers_v2","syncd_clear_chat_delete_chat_enabled","medianotify","02f","shops_required_tos_version","vote","reset_skey_on_id_change","030","image_max_edge","multicast_limit_global","ul_bw","21","25","5000","poll","570","22","031","1280","WhatsApp","032","bloks_shops_enabled","50","upload_host_switching_enabled","web_ctwa_context_compose_enabled","ptt_forwarded_features_enabled","unblocked","partial_pjpeg_enabled","fbid:devices","height","ephemeral_group_query_ts","group_join_permissions","order","033","alt_jpeg_status_quality","migrate","popular-bank","win_uwp_deprecation_killswitch_enabled","web_download_status_thumb_mms_enabled","blocking","url_text","035","web_forwarding_limit_to_groups","1600","val","1000","syncd_msg_date_enabled","bank-ref-id","max_subject","payments_web_enabled","web_upload_document_thumb_mms_enabled","size","request","ephemeral","24","receipt_agg","ptt_remember_play_position","sampling_weight","enc_rekey","mute_always","037","034","23","036","action","click_to_chat_qr_enabled","width","disabled","038","md_blocklist_v2","played_self_enabled","web_buttons_message_enabled","flow_id","clear","450","fbid:thread","bloks_session_state","America/Lima","attachment_picker_refresh","download_host_switching_enabled","1792","u_aud_limit_sil_restarts_test2","custom_urls","device_fanout","optimistic_upload","2000","key_cipher_suite","web_smb_upsell_in_biz_profile_enabled","e","039","siri_post_status_shortcut","pair-device","lg","lc","stream_attribution_url","model","mspjpeg_phash_gen","catalog_send_all","new_multi_vcards_ui","share_biz_vcard_enabled","-","clean","200","md_blocklist_v2_server","03b","03a","web_md_migration_experience","ptt_conversation_waveform","u_aud_limit_sil_restarts_test1"];t.DICTIONARY_1_TOKEN=r;const i=["64","ptt_playback_speed_enabled","web_product_list_message_enabled","paid_convo_ts","27","manufacturer","psp-routing","grp_uii_cleanup","ptt_draft_enabled","03c","business_initiated","web_catalog_products_onoff","web_upload_link_thumb_mms_enabled","03e","mediaretry","35","hfm_string_changes","28","America/Fortaleza","max_keys","md_mhfs_days","streaming_upload_chunk_size","5541","040","03d","2675","03f","...","512","mute","48","041","alt_jpeg_quality","60","042","md_smb_quick_reply","5183","c","1343","40","1230","043","044","mms_cat_v1_forward_hot_override_enabled","user_notice","ptt_waveform_send","047","Asia/Calcutta","250","md_privacy_v2","31","29","128","md_messaging_enabled","046","crypto","690","045","enc_iv","75","failure","ptt_oot_playback","AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk","w","048","2201","web_large_files_ui","Asia/Makassar","812","status_collapse_muted","1334","257","2HP4dm","049","patches","1290","43cY6T","America/Caracas","web_sticker_maker","campaign","ptt_pausable_enabled","33","42","attestation","biz","04b","query_linked","s","125","04a","810","availability","1411","responsiveness_v2_m1","catalog_not_created","34","America/Santiago","1465","enc_p","04d","status_info","04f","key_version","..","04c","04e","md_group_notification","1598","1215","web_cart_enabled","37","630","1920","2394","-1","vcard","38","elapsed","36","828","peer","pricing_category","1245","invalid","stella_ios_enabled","2687","45","1528","39","u_is_redial_audio_1104_ctrl","1025","1455","58","2524","2603","054","bsp_system_message_enabled","web_pip_redesign","051","verify_apps","1974","1272","1322","1755","052","70","050","1063","1135","1361","80","1096","1828","1851","1251","1921","key_config_id","1254","1566","1252","2525","critical_block","1669","max_available","w:auth:backup:token","product","2530","870","1022","participant_uuid","web_cart_on_off","1255","1432","1867","41","1415","1440","240","1204","1608","1690","1846","1483","1687","1749","69","url_number","053","1325","1040","365","59","Asia/Riyadh","1177","test_recommended","057","1612","43","1061","1518","1635","055","1034","1375","750","1430","event_code","1682","503","55","865","78","1309","1365","44","America/Guayaquil","535","LIMITED","1377","1613","1420","1599","1822","05a","1681","password","1111","1214","1376","1478","47","1082","4282","Europe/Istanbul","1307","46","058","1124","256","rate-overlimit","retail","u_a_socket_err_fix_succ_test","1292","1370","1388","520","861","psa","regular","1181","1766","05b","1183","1213","1304","1537"];t.DICTIONARY_2_TOKEN=i;const o=["1724","profile_picture","1071","1314","1605","407","990","1710","746","pricing_model","056","059","061","1119","6027","65","877","1607","05d","917","seen","1516","49","470","973","1037","1350","1394","1480","1796","keys","794","1536","1594","2378","1333","1524","1825","116","309","52","808","827","909","495","1660","361","957","google","1357","1565","1967","996","1775","586","736","1052","1670","bank","177","1416","2194","2222","1454","1839","1275","53","997","1629","6028","smba","1378","1410","05c","1849","727","create","1559","536","1106","1310","1944","670","1297","1316","1762","en","1148","1295","1551","1853","1890","1208","1784","7200","05f","178","1283","1332","381","643","1056","1238","2024","2387","179","981","1547","1705","05e","290","903","1069","1285","2436","062","251","560","582","719","56","1700","2321","325","448","613","777","791","51","488","902","Asia/Almaty","is_hidden","1398","1527","1893","1999","2367","2642","237","busy","065","067","233","590","993","1511","54","723","860","363","487","522","605","995","1321","1691","1865","2447","2462","NON_TRANSACTIONAL","433","871","432","1004","1207","2032","2050","2379","2446","279","636","703","904","248","370","691","700","1068","1655","2334","060","063","364","533","534","567","1191","1210","1473","1827","069","701","2531","514","prev_dhash","064","496","790","1046","1139","1505","1521","1108","207","544","637","final","1173","1293","1694","1939","1951","1993","2353","2515","504","601","857","modify","spam_request","p_121_aa_1101_test4","866","1427","1502","1638","1744","2153","068","382","725","1704","1864","1990","2003","Asia/Dubai","508","531","1387","1474","1632","2307","2386","819","2014","066","387","1468","1706","2186","2261","471","728","1147","1372","1961"];t.DICTIONARY_3_TOKEN=o;const s=[n,r,i,o];t.DICTIONARIES=s},1518:(e,t)=>{"use strict";t.Z=g;const n="undefined"!=typeof Promise?Promise:null,r="function"==typeof setImmediate?setImmediate:null;let i=0;const o=[],s=[],a=[],c={sentinel:"CONTINUE_AS_IF_NO_HANDLER"},u={sentinel:"RETRY_ASYNCHRONOUSLY"},l={sentinel:"TO_STRING"},d={sentinel:"DID_ERROR"};let f=null;const h=[],p=64,_=128,v=512,y="undefined"==typeof self?void 0:self;function g(e,t){this._flags=0,this._value=void 0,this._onFulfilled=void 0,this._onRejected=void 0,this._context=void 0,this._resolveLevel=0,this._control=void 0,this.x=void 0,this._thenableParent=null,this._parent=void 0,this._child=void 0,this._children=void 0,this.control=void 0,t&&(this._context=t.this),"function"==typeof e&&(this._onFulfilled=e,this._flags|=4,this._flags|=256,F(e,this._context,(e=>x(this,0,!0,!1,e)),(e=>x(this,0,!1,!1,e))))}let m,b;function w(e){if(void 0===e)return m;if(k(e))return e;{const t=new g;return x(t,0,!0,!1,e),z(t,v),t}}function S(e){const t=new g;return t._value=e,z(t,514),h.push(t),t}function E(e){let t="";if(e._flags&_){t=(e._onFulfilled||e._onRejected).call(e._context,l)}else if(e._control)t=`.addRawControl(${e._control.name}, ${e._control.foo})`;else if(16&e._flags)t=`.endWithControls(${Object.keys(e.control)})`;else if(e._flags&v)t=1&e._flags?`Promise.resolve(${void 0===e._value?"":e._value})`:`Promise.reject(${void 0===e._value?"":e._value})`;else if(256&e._flags)switch(3&e._flags){case 2:case 0:case 1:t=`new Promise(${e._onFulfilled})`}else e._onFulfilled&&e._onRejected?t=`.then(${e._onFulfilled}, ${e._onRejected})`:e._onFulfilled?t=`.then(${e._onFulfilled})`:e._onRejected&&(t=`.catch(${e._onRejected})`);return t}function A(e){this.message=e,this.stack=new Error(e||this.name).stack}function j(){0===i&&(s.length||h.length)&&(i=1,b||(b=function(){let e,t,i=0;return"undefined"==typeof MutationObserver||y&&y.navigator&&y.navigator.standalone?n?function(){n.resolve().then(J)}:"function"==typeof r?function(){r(J)}:function(){setTimeout(J,0)}:(e=document.createTextNode(""),t=new MutationObserver(J),t.observe(e,{characterData:!0}),function(){e.data=i=1-i})}()),b())}function T(e,t){z(e,8),t._parent=e,e._children?e._children.push(t):e._child?(e._children=[e._child,t],e._child=void 0):e._child=t}function I(e){if(e&&("object"==typeof e||"function"==typeof e)){let t;try{t=e.then}catch(e){return f=e,d}if("function"==typeof t)return t}}function P(e){if(!e||k(e))return e;const t=I(e);if(t===d)return S(f);if(t){const n=new g((function(n,r){t.call(e,n,r)}));return n._thenableParent=e,n}return e}function k(e){return e instanceof g}function O(e,t,n){const r=k(e=P(e));let i,o,s,a,l=!1;if(r){if(!(3&e._flags))return z(e.then(t,n),32);z(e,8),l=!!(e._flags&p),s=e._context,i=1&e._flags?t:n,o=e._value}else i=t,o=e;if(!i)return w(e).then();if(o=W(i,s,o,!0),o===d)a=S(f);else{if(o===u)return w(e).then(t,n);if(o===c)return r?e.then():w(e);a=w(o)}return l&&(a=a.cancellable()),void 0!==s&&(a=a.then(),a._context=s),a}function x(e,t,n,r,i){if(t!==e._resolveLevel)return;const o=++e._resolveLevel;if(z(e,4),e._thenableParent=null,n)if(i===e)e._parent=void 0,M(e,!1,r,new TypeError("promise resolved to itself"));else if(k(i)){const t=3&i._flags;0===t?T(i,e):(e._parent=i,z(e,1024),z(i,8),M(e,1===t,r,i._value))}else{const t=I(i);t===d?(e._parent=void 0,M(e,!1,r,f)):t?(e._parent=void 0,e._thenableParent=i,F(t,i,(t=>x(e,o,!0,!1,t)),(t=>x(e,o,!1,!1,t)))):M(e,!0,r,i)}else M(e,!1,r,i)}function U(e,t,n,r,i){t===e._resolveLevel&&(D(e),x(e,t,n,r,i))}function D(e){if(e._parent){const t=e._parent;if(e._parent=void 0,t._child===e)t._child=void 0;else if(t._children){const n=t._children;for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}0===n.length&&(t._children=void 0)}}}function R(e){if(null==e)throw new Error(`Invalid .catch guard ${e}`);if("function"==typeof e)return e;if("object"==typeof e)throw new Error("Object guards in .catch are currently unsupported");return function(t){return t===e}}function C(e,t){return function(n,r){return n===l?`.catch(..., ${t})`:e&&!function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r===Error||r.prototype instanceof Error){if(t instanceof r)return!0}else if(r(t))return!0}return!1}(e,n)?c:r?u:t.call(this,n)}}function M(e,t,n,r){if(z(e,4|(t?1:2)),e._value=r,e._child)$(e._child,t,n,r),e._child=void 0;else if(e._children){const i=e._children;e._children=void 0;for(let e=0;e<i.length;e++)$(i[e],t,n,r)}else t||8&e._flags||h.push(e)}function $(e,t,n,r){e._resolveLevel++;const i=K(e,t);if(i&&32&e._flags){z(e,4);const o=W(i,e._context,r,!0);if(o!==u)return void(o===d?(e._parent=void 0,M(e,!1,n,f)):o===c?M(e,t,n,r):(e._parent=void 0,x(e,e._resolveLevel,!0,n,o)));e._flags&=-5}i?((n?a:s).push(e),j()):M(e,t,n,r)}function L(e,t){for(;0!==e.length;)t.push(e.pop())}function J(){for(;0!==o.length||0!==s.length;){0===o.length&&L(s,o);const e=o.pop(),t=e._parent;let n=!!(t&&1&t._flags),r=t&&t._value;const i=K(e,n);if(z(e,4),i){let t;do{t=W(i,e._context,r,!1)}while(t===u);t===d?(r=f,n=!1,e._parent=void 0):t!==c&&(r=t,n=!0,e._parent=void 0)}3&e._flags||(x(e,e._resolveLevel,n,!0,r),L(a,o))}for(i--;0!==h.length;){const e=h.pop();8&e._flags||B(e,e._value)}}g.resolve=w,g.reject=S,g.prototype.then=function(e,t){"function"!=typeof e&&(e=void 0),"function"!=typeof t&&(t=void 0);const n=new g;n._onFulfilled=e,n._onRejected=t,n._context=this._context,this._flags&p&&z(n,p);const r=3&this._flags;return 0===r?T(this,n):(z(this,8),(1===r?e:t)?(n._parent=this,s.push(n),j()):(n._parent=this,z(n,r),n._value=this._value,2===r&&h.push(n))),n},g.prototype.catch=function(e){const t=arguments.length-1;if(0===t)return this.then(void 0,e);const n=new Array(t);for(let e=0;e<t;e++)n[e]=R(arguments[e]);const r=C(n,arguments[t]),i=O(this,void 0,r);return i._onRejected&&z(i,_),i},g.all=function(e){return new g((function(t,n){let r=e.length;if(0===r)return void t([]);const i=new Array(e.length);function o(e){if(0==--r){const n=[];for(let t=0;t<i.length;t++){const r=i[t];n.push(r&&3&r._flags?r._value:e)}t(n)}return e}for(let t=0;t<e.length;t++)i[t]=O(e[t],o,n)}))},g.allSettled=function(e){return new g((function(t){const n=Array.from(e);let r=n.length;if(0===r)return void t([]);const i=new Array(n.length);function o(e){return function(n){const o=e?{status:"rejected",reason:n}:{status:"fulfilled",value:n};if(0==--r){const e=[];for(let t=0;t<i.length;t++){const n=i[t];e.push(n&&3&n._flags?n._value:o)}t(e)}return o}}const s=o(!1),a=o(!0);for(let e=0;e<n.length;e++)i[e]=O(n[e],s,a)}))},g.race=function(e){const t=P(e);if(k(t)){const e=t.then((e=>g.race(e)));return e._context=void 0,e._flags&=-65,e}return new g((function(e,n){for(let r=0;r<t.length;r++){const i=P(t[r]);if(!k(i)||3&i._flags)for(e(i),r++;r<t.length;r++){const e=t[r];k(e)&&z(e,8)}else i.then(e,n)}}))},g.prototype.toString=function(){const e=[];let t;for(let n=this,r=!1;n;n=n._parent){t=n,!r&&3&n._flags&&(r=!0,n._flags&v||(1&n._flags?e.push(`[resolved value: ${n._value}]`):e.push(`[rejected reason: ${n._value}]`)));let i=E(n);1024&n._flags&&(i=`~${i}`),e.push(i)}return e.reverse(),768&t._flags||(e[0]=`[Promise]${e[0]}`),e.join("\n")},g.prototype.finally=function(e){function t(t){return t===l?`.finally(${e})`:(e.call(this),c)}return z(this.then(t,t),_)},A.prototype=Object.create(Error.prototype,{name:{value:"AbortError"}}),g.CancellationError=A,g.prototype.cancellable=function(){return z(this.then(),p)},g.prototype.cancel=function(e){let t;for(let e=this;e&&!(3&e._flags);e=e._parent)e._flags&p&&(t=e);if(t)if(void 0===e&&(e=new A),K(t,!1)){const n=new g;D(t),T(n,t),U(n,0,!1,!1,e)}else U(t,t._resolveLevel,!1,!1,e)};const N=null==(null==y?void 0:y.dispatchEvent)?null:class extends Event{constructor(e,t){super(e,{cancelable:!0}),Object.defineProperties(this,{promise:{value:t.promise,enumerable:!0},reason:{value:t.reason,enumerable:!0}})}};function B(e,t){if(null!=(null==y?void 0:y.dispatchEvent)){const n=new N("unhandledrejection",{promise:e,reason:t});if(y.dispatchEvent(n),!y.PromiseRejectionEvent&&y.onunhandledrejection)try{y.onunhandledrejection(n)}catch(e){}}else"undefined"!=typeof process&&null!=process.emit?process.emit("unhandledRejection",t,e):console.error(`StackPromise did not catch ${t}`,e,t)}function F(e,t,n,r){try{e.call(t,n,r)}catch(e){r(e)}}function K(e,t){if(!(4&e._flags))return t?e._onFulfilled:e._onRejected}function W(e,t,n,r){try{return r?e.call(t,n,!0):e.call(t,n)}catch(e){return f=e,d}}function z(e,t){return e._flags|=t,e}m=new g,x(m,0,!0,!1,void 0)},1330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decimalStringToLongInt=function(e){if(!/^-?\d+$/.test(e))throw __LOG__(2)`"${e}" is not a valid decimal string`,new Error("decimalStringToLongInt is given an invalid decimal string");const t="-"===e[0],n=e.replace(/^-?0*/,""),i=n.length;if(i<16||16===i&&n<="9007199254740991")return t?-Number(n):Number(n);if(i>20||20===i&&n>"18446744073709551615"||t&&(i>19||19===i&&n>"9223372036854775807"))throw __LOG__(2)`"${e}" is over 64 bits`,new Error("decimalStringToHexLong is given value over 64 bits");let o=0,s=0;for(let e=0;e<i;e++)o=10*o+Number(n[e]),s=10*s+Math.floor(o/4294967296),o%=4294967296;return(0,r.createHexLongFrom32Bits)(s,o,t)},t.isBiggerLongInt=function(e,t){if("number"==typeof e&&"number"==typeof t)return e>t;const n="number"==typeof e?(0,r.hexLongFromNumber)(e):e,i="number"==typeof t?(0,r.hexLongFromNumber)(t):t;return(0,r.isBiggerHexLong)(n,i)},t.longIntToDecimalString=function(e){if("number"==typeof e)return e.toString(10);const t=(0,r.hexLongToHex)(e),n=[0];let i=0;for(let e=0;e<t.length;e++){i=(0,r.hexAt)(t,e);for(let e=0;e<n.length;e++)n[e]=16*n[e]+i,i=n[e]/10|0,n[e]%=10;for(;i>0;)n.push(i%10),i=i/10|0}const o=n.reverse().join("");return(0,r.hexLongIsNegative)(e)?"-"+o:o},t.maybeNumberOrThrowIfTooLarge=void 0,t.numberOrThrowIfTooLarge=i;var r=n(5982);function i(e){if("number"!=typeof e)throw __LOG__(2)`${e} is not a safe integer`,new Error("numberOrThrowIfTooLarge is given a non-safe integer");return e}t.maybeNumberOrThrowIfTooLarge=e=>null==e?e:i(e)},6595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spec=void 0,t.compileSpec=function(e){if(e.internalCompiledSpec)return e.internalCompiledSpec;const t=e.internalSpec;if(!t)throw new Error(`Message Class ${String(e)} does not have internalSpec`);const n=e.internalDefaults||{},s=Object.keys(t).filter((e=>e!==r.KEYS.ONEOF)),a=new Array(s.length),c=[],u=[],l=new Array(s.length),d=t[r.KEYS.ONEOF]||{};s.sort(((e,n)=>{const r=o(t,e),i=o(t,n);return r[0]-i[0]}));for(let e=0;e<s.length;e++){const i=s[e],d=o(t,i);l[e]=n[i];const f=d[1],h=d[0];if(c.push(h),u.push(f),(f&r.TYPE_MASK)===r.TYPES.MESSAGE)a[e]=d[2];else if((f&r.TYPE_MASK)===r.TYPES.ENUM){const t=d[2];if("function"==typeof t.cast)a[e]=t;else{let n,r=!0,i=0;for(const e in t)r&&e!==i++&&(r=!1);if(r){n=[];for(let e=0;e<i;e++)n.push(!0)}else{n={};for(const e in t)n[t[e]]=!0}a[e]=n}}else a[e]=null}const f={};for(const e in d)d[e].forEach((t=>{f[t]||(f[t]=[]),f[t].push(e)}));const h=t[r.KEYS.RESERVED]&&t[r.KEYS.RESERVED][r.KEYS.RESERVED_TAGS],p=t[r.KEYS.RESERVED]&&t[r.KEYS.RESERVED][r.KEYS.RESERVED_FIELDS],_=new i(s,c,u,l,a,d,f,h,p);return e.internalCompiledSpec=_,_};var r=n(6154);class i{constructor(e,t,n,r,i,o,s,a,c){this.names=e,this.fields=t,this.types=n,this.defaults=r,this.meta=i,this.oneofToFields=o,this.fieldToOneof=s,this.reservedTags=a?a.reduce(((e,t)=>(e[t]=!0,e)),{}):{},this.reservedFields=c?c.reduce(((e,t)=>(e[t]=!0,e)),{}):{}}}function o(e,t){const n=e[t];if(null==n)throw new Error(`fieldData of ${t} is missing`);return n}t.Spec=i},6154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_MASK=t.TYPES=t.KEYS=t.FLAGS=t.ENC=void 0;t.FLAGS={REPEATED:64,PACKED:128,REQUIRED:256};t.TYPE_MASK=31;t.TYPES={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};t.ENC={VARINT:0,BIT64:1,BINARY:2,BIT32:5};t.KEYS={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"}},5036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeToEncType=function(e){if(e&o.PACKED)return c.BINARY;const t=e&a;return t<=s.ENUM?c.VARINT:t<=s.DOUBLE?c.BIT64:t<=s.MESSAGE?c.BINARY:c.BIT32};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(6154));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const{FLAGS:o,TYPES:s,TYPE_MASK:a,ENC:c}=r},2525:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.checkRequirements=c,t.checkValid=function(e,t){c(e,t);const n=_(t,e);if(n)throw n.path.reverse(),new TypeError(`Invalid value at ${n.path.join(".")}: ${n.error}`)};var i=r(n(9028)),o=n(6595),s=n(6154);const a=Number.MAX_SAFE_INTEGER;function c(e,t){const n=u(e,t);if(n)throw n.reverse(),new TypeError(`Message missing required value ${n.join(".")}`)}function u(e,t){const{names:n,types:r,meta:a}=(0,o.compileSpec)(e);let c;for(let e=0;e<r.length&&!c;e++){const o=r[e],l=n[e],d=(0,i.default)(t,l)?t[l]:void 0;if(o&s.FLAGS.REQUIRED&&null==d)c=[l];else if((o&s.TYPE_MASK)===s.TYPES.MESSAGE&&o&s.FLAGS.REPEATED&&null!=d){const t=a[e];let n;for(n=0;n<d.length&&!c;n++)c=u(t,d[n]);c&&c.push(`${l}[${n}]`)}else(o&s.TYPE_MASK)===s.TYPES.MESSAGE&&null!=d&&(c=u(a[e],d),c&&c.push(l))}return c}function l(e,t,n){return"string"==typeof e?!/^-?0x[0-9a-f]{16}$/i.test(e)&&(__LOG__(2)`"${h(e)}" is not a valid long`,{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}):d(e,t,n)}function d(e,t,n){return"number"!=typeof e||e!=e||Math.floor(e)!==e?(__LOG__(2)`"${h(e)}" is not a valid int`,{path:[],error:"value must be an int"}):(e<t||e>=n)&&(__LOG__(2)`"${h(e)}" is out of range`,{path:[],error:"value is out of range"})}function f(e,t,n){return e?void 0:(__LOG__(2)`"${h(n)}" is not ${t}`,{path:[],error:"value is invalid"})}function h(e){return"string"==typeof e?`"${e}"`:Array.isArray(e)?`[${e.join(", ")}]`:`${e}`}const p=[void 0,e=>d(e,-2147483648,2147483648),e=>l(e,-a,a+1),e=>d(e,0,4294967296),e=>l(e,0,a+1),e=>d(e,-2147483648,2147483648),e=>l(e,-a,a+1),e=>f("boolean"==typeof e,"boolean",e),(e,t)=>f("number"==typeof e&&(t[e]||void 0!==t.cast(e)),"in enum",e),e=>l(e,0,a+1),e=>l(e,-a,a+1),e=>f("number"==typeof e,"number",e),e=>f("string"==typeof e,"string",e),e=>f(e instanceof ArrayBuffer||e instanceof Uint8Array,"ArrayBuffer or Uint8Array",e),_,e=>d(e,0,4294967296),e=>d(e,-2147483648,2147483648),e=>f("number"==typeof e,"number",e)];function _(e,t){const{names:n,fields:r,types:i,meta:a,oneofToFields:c,fieldToOneof:u,reservedTags:l,reservedFields:d}=(0,o.compileSpec)(t);let f;for(let t=0;t<n.length&&!f;t++){const o=n[t],_=i[t],v=e[o],y=_&s.TYPE_MASK,g=p[y];if(void 0===g)throw new Error(`Can not find the validator for type ${y}`);if(_&(s.FLAGS.PACKED|s.FLAGS.REPEATED)&&null!=v)if(Array.isArray(v)){const e=a[t];for(let t=0;t<v.length&&!f;t++)f=g(v[t],e),f&&f.path.push(`${o}[${t}]`)}else __LOG__(2)`"${h(v)}" is not an array`,f={path:[o],error:"repeated field must be array"};else if(null!=v){f=g(v,a[t]),f&&f.path.push(o);const n=u[o];n&&n.forEach((t=>{c[t].filter((e=>e!==o)).forEach((n=>{void 0!==e[n]&&(f={path:[t],error:`oneof has fields '${o}' and '${n}' set`})}))})),l[r[t]]&&(f={path:[o],error:`tag ${r[t]} is reserved`}),d[o]&&(f={path:[o],error:"field name is reserved"})}}return f}},3955:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtobuf=function(e,t){const n=new o.Binary(t),r=g(e,n,void 0,!1);return(0,d.checkRequirements)(e,r),r},t.decodeProtobufWithUnknowns=function(e,t){const n=new o.Binary(t),r=g(e,n,void 0,!0);return(0,d.checkRequirements)(e,r),r},t.getUnknownFields=function(e){return(0,s.default)(e,"$$unsafeUnknownFields")?e.$$unsafeUnknownFields:null};var i=r(n(3982)),o=n(9323),s=r(n(9028)),a=n(5982),c=n(6595),u=n(6154),l=n(5036),d=n(2525);function f(e,t,n){if(e!==(0,l.typeToEncType)(t))throw new Error(`FormatError: ${n} encoded with wire type ${e}`)}function h(e,t,n){switch(t){case u.TYPES.INT32:return p(n,-2147483648,2147483648,e,o.parseInt64OrThrow);case u.TYPES.INT64:return n.readVarInt(_);case u.TYPES.UINT32:return p(n,0,4294967296,e,o.parseUint64OrThrow);case u.TYPES.UINT64:return n.readVarInt(v);case u.TYPES.SINT32:{const t=p(n,0,4294967296,e,o.parseInt64OrThrow);return 1&t?~(t>>>1):t>>>1}case u.TYPES.SINT64:return n.readVarInt(y);case u.TYPES.BOOL:return!!p(n,0,2,e,o.parseUint64OrThrow);case u.TYPES.ENUM:return n.readVarInt(o.parseInt64OrThrow);case u.TYPES.FIXED64:return n.readLong(v,!0);case u.TYPES.SFIXED64:return n.readLong(_,!0);case u.TYPES.DOUBLE:return n.readFloat64(!0);case u.TYPES.STRING:return n.readString(n.readVarInt(o.parseUint64OrThrow));case u.TYPES.BYTES:return n.readBuffer(n.readVarInt(o.parseUint64OrThrow));case u.TYPES.FIXED32:return n.readUint32(!0);case u.TYPES.SFIXED32:return n.readInt32(!0);case u.TYPES.FLOAT:return n.readFloat32(!0)}}function p(e,t,n,r,i){const o=e.readVarInt(i);if(o<t||o>=n)throw new Error(`FormatError: ${r} encoded with out-of-range value ${o}`);return o}function _(e,t){if((0,o.longFitsInDouble)(!0,e,t)){return 4294967296*e+m(t)}{const n=e<0;let r;r=n?0===t?-e:~e:e;const i=n?-t:t;return(0,a.createHexLongFrom32Bits)(r,i,n)}}function v(e,t){if((0,o.longFitsInDouble)(!1,e,t)){return 4294967296*m(e)+m(t)}return(0,a.createHexLongFrom32Bits)(e,t)}function y(e,t){let n=e>>>1,r=e<<31|t>>>1;return 1&t&&(n=~n,r=~r),_(n,r)}function g(e,t,n,r){var s;const{names:a,fields:l,types:d,meta:_,oneofToFields:v,fieldToOneof:y,reservedTags:m,reservedFields:b}=(0,c.compileSpec)(e),{internalDefaults:w}=e,S=n||(0,i.default)({},w)||{};S.$$unknownFieldCount=null!==(s=null==n?void 0:n.$$unknownFieldCount)&&void 0!==s?s:0;for(let e=0;e<a.length;e++)d[e]&u.FLAGS.REPEATED&&(S[a[e]]=[]);let E=0;const A=l.length>0;let j=l[0];for(;t.size();){const e=p(t,0,4294967296,"field and enc type",o.parseInt64OrThrow),n=7&e,i=e>>>3;if(A&&i!==j){const e=E;do{++E===l.length&&(E=0),j=l[E]}while(i!==j&&E!==e)}if(A&&i===j){const e=a[E],s=d[E];f(n,s,e);const c=s&u.TYPE_MASK,l=_[E];if(s&u.FLAGS.PACKED){const n=t.readVarInt(o.parseUint64OrThrow),r=t.readBinary(n);for(;r.size();){var T;const t=h(e,c,r);(c!==u.TYPES.ENUM||l[t]||void 0!==(null===(T=l.cast)||void 0===T?void 0:T.call(l,t)))&&S[e].push(t)}}else if(c===u.TYPES.MESSAGE){const n=t.readVarInt(o.parseUint64OrThrow),i=t.readBinary(n);if(s&u.FLAGS.REPEATED)S[e].push(g(l,i,void 0,r));else{const t=S[e];S[e]=g(l,i,t,r)}}else{var I;const n=h(e,c,t);(c!==u.TYPES.ENUM||l[n]||void 0!==(null===(I=l.cast)||void 0===I?void 0:I.call(l,n)))&&(s&u.FLAGS.REPEATED?S[e].push(n):S[e]=n)}const p=y[e];p&&void 0!==S[e]&&p.forEach((t=>{v[t].filter((t=>t!==e)).forEach((e=>{delete S[e]}))})),(m[i]||b[e])&&delete S[e]}else if(S.$$unknownFieldCount++,r){let e;switch(S.$$unsafeUnknownFields||(S.$$unsafeUnknownFields={}),n){case u.ENC.VARINT:e=t.readVarInt(o.parseInt64OrThrow);break;case u.ENC.BIT64:e=t.readBinary(8);break;case u.ENC.BINARY:e=t.readBinary(t.readVarInt(o.parseUint64OrThrow));break;case u.ENC.BIT32:e=t.readBinary(4)}S.$$unsafeUnknownFields[i]=e}else n===u.ENC.VARINT?t.readVarInt(o.parseInt64OrThrow):n===u.ENC.BIT64?t.advance(8):n===u.ENC.BINARY?t.advance(t.readVarInt(o.parseUint64OrThrow)):n===u.ENC.BIT32&&t.advance(4)}return S}function m(e){return e>=0?e:4294967296+e}},4753:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeErrorInfo=function(){return void 0!==u?`Last encoded value for ${u}`:"No information known"},t.encodeProtobuf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Binary;return(0,c.checkValid)(e,t),_(n,t,e),u=void 0,n};var r=n(9323),i=n(5982),o=n(6595),s=n(6154),a=n(5036),c=n(2525);let u;function l(e,t){e.writeVarInt(t)}function d(e,t){if("number"==typeof t&&t<4503599627370496&&t>=-4503599627370496)e.writeVarInt(t>=0?2*t:2*-t-1);else{const n=new r.Binary;let o;"number"==typeof t?(o=t<0,n.writeVarInt(o?-t:t)):(o=(0,i.hexLongIsNegative)(t),n.writeVarIntFromHexLong(o?(0,i.negateHexLong)(t):t));const s=n.peek((()=>n.readByteArray())),a=s.byteLength;if(o){let e,t=0;do{e=s[t],s[t]=128&e|(127&e)-1&127,t++}while(255===s[t-1])}let c=o?1:0;for(let e=0;e<a;e++){const t=s[e],n=128&t|(63&t)<<1|c;c=(64&t)>>6,s[e]=n}1===c&&(s[a-1]|=128,n.writeInt8(1)),e.writeBinary(n)}}function f(e,t){"number"==typeof t?e.writeVarInt(t):e.writeVarIntFromHexLong(t)}const h=[void 0,l,f,l,f,d,d,(e,t)=>{e.writeVarInt(t?1:0)},l,(e,t)=>{"number"==typeof t?e.writeUint64(t,!0):e.writeHexLong(t,!0)},(e,t)=>{"number"==typeof t?e.writeInt64(t,!0):e.writeHexLong(t,!0)},(e,t)=>{e.writeFloat64(t,!0)},function(e,t){e.writeVarInt((0,r.numUtf8Bytes)(t)),e.writeString(t)},function(e,t){e.writeVarInt(t.byteLength),e.writeBuffer(t)},function(e,t,n){e.writeWithVarIntLength(((e,t)=>_(e,t,n)),t)},(e,t)=>{e.writeUint32(t,!0)},(e,t)=>{e.writeInt32(t,!0)},(e,t)=>{e.writeFloat32(t,!0)}],p=h.map((e=>{if(null!=e)return(e,n)=>{e.writeWithVarIntLength(t,n)};function t(t,n){for(let r=0;r<n.length;r++)e(t,n[r])}}));function _(e,t,n){const{names:r,fields:i,types:c,meta:l}=(0,o.compileSpec)(n),{internalDefaults:d}=n;for(let n=0;n<r.length;n++){const o=r[n];let f=t[o];if(null==f&&d&&(f=d[o]),null!=f){u=o;const t=i[n],r=c[n],d=r&s.TYPE_MASK,_=l[n],v=8*t|(0,a.typeToEncType)(r);if(r&s.FLAGS.PACKED){if(f.length>0){e.writeVarInt(v);(0,p[d])(e,f,_)}}else if(r&s.FLAGS.REPEATED)for(let t=0;t<f.length;t++){e.writeVarInt(v);(0,h[d])(e,f[t],_)}else{e.writeVarInt(v);(0,h[d])(e,f,_)}}}}},1084:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClientResponseServerResponse=function(e,t){const n=(0,a.assertTag)(e,"iq");if(!n.success)return n;const c=(0,o.attrJidEnum)(e,"from",i.DOMAINJID_USERJID);if(!c.success)return c;const u=(0,a.literal)(a.attrString,e,"type","result");if(!u.success)return u;const l=(0,s.attrStringFromReference)(t,["id"]);if(!l.success)return l;const d=(0,a.literal)(a.attrString,e,"id",l.value);if(!d.success)return d;const f=(0,a.attrInt)(e,"t");if(!f.success)return f;return(0,r.makeResult)({from:c.value,type:u.value,t:f.value})};var r=n(2207),i=n(3716),o=n(5273),s=n(2375),a=n(3263)},3716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMAINJID_USERJID=void 0;var r=n(4037);const i={validators:[r.validateDomainJid,r.validateUserJid],typeName:"DomainJid|UserJid"};t.DOMAINJID_USERJID=i},8525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeClientRequest=function(){return(0,i.mergeClientWellFormedToMixin)((0,r.smax)("iq",{id:(0,o.generateId)(),type:"get",xmlns:"w:p"}))};var r=n(1399),i=n(4068),o=n(780)},4068:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClientWellFormedToMixin=function(e){const t=(0,r.smax)("iq",{to:o.S_WHATSAPP_NET});return(0,i.mergeStanzas)(e,t)};var r=n(1399),i=n(5640),o=n(780)},5273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attrBroadcastJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateBroadcastJid,"BroadcastJid")},t.attrCallJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateCallJid,"CallJid")},t.attrDeviceJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateDeviceJid,"DeviceJid")},t.attrDomainJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateDomainJid,"DomainJid")},t.attrGroupJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateGroupJid,"GroupJid")},t.attrJidEnum=function(e,t,n){const r=(0,o.attrString)(e,t);if(!r.success)return r;const{validators:s,typeName:a}=n;for(let e=0;e<s.length;e++){const t=s[e](r.value);if(null!=t)return(0,i.makeResult)(t)}return(0,o.errorMessage)(e,`to have "${t}"={${a}}, but instead has "${r.value}"`)},t.attrNewsletterJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateNewsletterJid,"NewsletterJid")},t.attrStatusJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateStatusJid,"StatusJid")},t.attrUserJid=function(e,t){return(0,o.attrValidate)(e,t,r.validateUserJid,"UserJid")},t.literalJid=function(e,t,n,r){const i=e(t,n);if(!i.success)return i;if(i.value===r)return i;return(0,o.errorMessage)(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)},t.optionalLiteralJid=function(e,t,n,r){const i=(0,o.optional)(e,t,n);if(!i.success)return i;if(null==i.value||i.value===r)return i;return(0,o.errorMessage)(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)};var r=n(4037),i=n(2207),o=n(3263)},2375:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.attrFromReference=a,t.attrStringFromReference=c,t.contentStringFromReference=function(e,t){const n=u(e,t);if(!n.success)return d(n);const r=(0,s.contentString)(n.value);if(!r.success)return d(r);return r},t.optionalAttrFromReference=function(e,t,n,r,i){return l(t,n)?a(e,t,n,r,i):s.voidSuccess},t.optionalAttrStringFromReference=function(e,t){return l(e,t)?c(e,t):s.voidSuccess};var i=r(n(9028)),o=n(2207),s=n(3263);function a(e,t,n,r,i){const o=u(t,n);if(!o.success)return d(o);const s=e(o.value,n[n.length-1],r,i);return s.success?s:d(s)}function c(e,t){return a(s.attrString,e,t)}function u(e,t){const n=t.length;let r=e;for(let e=0;e<n-1;e++){const n=t[e],i=(0,s.flattenedChildWithTag)(r,n);if(!i.success)return i;r=i.value}return(0,o.makeResult)(r)}function l(e,t){const n=u(e,t);return n.success&&(0,i.default)(n.value.attrs,t[t.length-1])}function d(e){return(0,o.makeError)(`in the reference, ${e.error}`)}},3263:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.assertAttr=function(e,t,n){const r=h(e,t);if(!r.success)return r;if(r.value!==n)return j(e,`to have "${t}"="${n}", but instead has "${r.value}"`);return f},t.assertTag=function(e,t){if(e.tag!==t)return j(e,`to be <${t}>`);return f},t.attrInt=v,t.attrIntRange=function(e,t,n,r){const i=v(e,t);if(!i.success)return i;const o=i.value;if(void 0!==n&&o<n)return j(e,`to have "${t}"={at least ${n}} but has value ${o}`);if(void 0!==r&&o>r)return j(e,`to have "${t}"={at most ${r}} but has value ${o}`);return(0,u.makeResult)(o)},t.attrStanzaId=function(e,t){return p(e,t,l.toStanzaId,"stanzaID")},t.attrString=h,t.attrStringEnum=function(e,t,n){const r=h(e,t);if(!r.success)return r;const i=n[r.value];if(null!=i)return(0,u.makeResult)(i);const o=Object.values(n).join("|");return j(e,`to have "${t}"={${o}}, but instead has "${r.value}"`)},t.attrValidate=p,t.childWithTag=function(e,t,n){const r=m(e,t,n);if(!r.success)return r;const i=r.value;if(null==i)return j(e,`to have 1 child <${t}>, but found 0`);return(0,u.makeResult)(i)},t.contentBytes=A,t.contentBytesRange=function(e,t,n){const r=A(e);if(!r.success)return r;const i=r.value.length;if(void 0!==t&&i<t)return j(e,`to have binary content at least ${t} bytes but has ${i} bytes`);if(void 0!==n&&i>n)return j(e,`to have binary content at most ${n} bytes but has ${i} bytes`);return(0,u.makeResult)(r.value)},t.contentInt=function(e){return _(e,I,"integer")},t.contentLiteralBytes=function(e,t){const n=A(e);if(!n.success)return n;if((0,s.uint8ArraysEqual)(n.value,t))return(0,u.makeResult)(t);return j(e,`to have content ":binary:${(0,i.encodeB64)(t)}", but instead has ":binary:${(0,i.encodeB64)(n.value)}"`)},t.contentString=E,t.contentStringEnum=function(e,t){const n=E(e);if(!n.success)return n;const r=t[n.value];if(null!=r)return(0,u.makeResult)(r);const i=Object.values(t).join("|");return j(e,`to have content "${i}", but instead has "${n.value}"`)},t.contentValidate=_,t.countChildrenWithTag=function(e,t,n,r,i){const o=P(e,t,n,r);if(!o.success)return o;const s=o.value.length;for(let e=0;e<s;e++){const t=i(o.value[e]);if(!t.success)return t}return(0,u.makeResult)(s)},t.countHomogeneousChildrenWithTag=function(e,t,n){const r=w(e,t,n);if(!r.success)return r;return(0,u.makeResult)(r.value.length)},t.emptyObject=void 0,t.errorMessage=j,t.errorMixinDisjunction=function(e,t,n){const r=t.map(((e,t)=>`${e}: ${n[t].error}`));return j(e,[`to match any of following mixins: ${t.join(", ")}, but all mixins failed.`,...r].join(" "))},t.flattenedChildWithTag=function(e,t){const n=g(e,t);if(!n.success)return n;if(null==n.value)return j(e,`to have 1 child <${t}>, but found 0`);return(0,u.makeResult)(n.value)},t.identity=function(e){return e},t.literal=function(e,t,n,r){const i=e(t,n);if(!i.success)return i;if(i.value===r)return(0,u.makeResult)(r);return j(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)},t.literalContent=function(e,t,n){const r=e(t);if(!r.success)return r;if(r.value===n)return(0,u.makeResult)(n);return j(t,`to have content "${n}", but instead has "${r.value}"`)},t.mapChildrenWithTag=b,t.mapHomogeneousChildrenWithTag=w,t.maybeChildren=y,t.optional=S,t.optionalChild=g,t.optionalChildWithTag=m,t.optionalLiteral=function(e,t,n,r){if(null==r)return f;const i=S(e,t,n);if(!i.success)return i;if(i.value===r)return(0,u.makeResult)(r);if(null==i.value)return f;return j(t,`to have "${n}"={${r}}, but instead has "${i.value}"`)},t.voidSuccess=void 0;var i=n(2089),o=n(9323),s=n(9093),a=n(2924),c=r(n(9028)),u=n(2207),l=n(3417),d=n(3486);const f=(0,u.makeResult)();function h(e,t){return T(e,t)?function(e,t){if(t instanceof d.WapJid)return(0,u.makeResult)(t.toString());if("string"==typeof t)return(0,u.makeResult)(t);return j(e,`decodeAsString: attribute is ${typeof t} not a string: ${String(t)}`)}(e,e.attrs[t]):j(e,`to have attribute "${t}"`)}function p(e,t,n,r){const i=h(e,t);if(!i.success)return i;const o=n(i.value);return null!=o?(0,u.makeResult)(o):j(e,`to have "${t}"={${r}}, but instead has "${i.value}"`)}function _(e,t,n){const r=E(e);if(!r.success)return r;const i=t(r.value);return null!=i?(0,u.makeResult)(i):j(e,`to have ${n} content, but instead has "${r.value}"`)}function v(e,t){return p(e,t,I,"integer")}function y(e){const t=e.content;return t instanceof Uint8Array?j(e,"to have children"):(0,u.makeResult)(t)}function g(e,t){const n=y(e);if(!n.success)return n;const r=n.value;if(null==r)return f;let i=null;for(let n=0;n<r.length;n++){const o=r[n];if(o.tag===t){if(null!=i)return j(e,`to have 1 child <${t}>, but found more than 1`);i=o}}return(0,u.makeResult)(i)}function m(e,t,n){const r=g(e,t);return r.success?null==r.value?f:n(r.value):r}function b(e,t,n,r,i){const o=P(e,t,n,r);if(!o.success)return o;const s=[];for(let e=0;e<o.value.length;e++){const t=i(o.value[e]);if(!t.success)return t;s.push(t.value)}return(0,u.makeResult)(s)}function w(e,t,n){const r=b(e,t,0,1/0,n);if(!r.success)return r;for(let t=0;t<r.value.length;t++)if(!(0,a.deepEqual)(r.value[0],r.value[t]))return j(e,"to have homogeneous children, but found two children that are not equal");return r}function S(e,t,n,r,i){return T(t,n)?e(t,n,r,i):f}function E(e){const t=A(e);if(!t.success)return t;try{const e=new o.Binary(t.value),n=e.readString(e.size());return(0,u.makeResult)(n)}catch(t){return j(e,`to have string content, but run into decoding error: ${t.message}`)}}function A(e){const{content:t}=e;return null==t?j(e,"to have content"):Array.isArray(t)?j(e,"to have content, but has children instead"):(0,u.makeResult)(t)}function j(e,t){return(0,u.makeError)(`expected <${e.tag}>: ${t}`)}function T(e,t){return(0,c.default)(e.attrs,t)}function I(e){const t=parseInt(e,10);return Number.isNaN(t)?null:t}function P(e,t,n,r){const i=y(e);if(!i.success)return i;const o=i.value;if(null==o)return 0!==n?j(e,`to have at least ${n} <${t}> children, but found 0`):(0,u.makeResult)([]);const s=[];for(let e=0;e<o.length;e++){const n=o[e];n.tag===t&&s.push(n)}const a=s.length;return a<n?j(e,`to have at least ${n} <${t}> children, but found ${a}`):a>r?j(e,`to have at most ${r} <${t}> children, but found ${a}`):(0,u.makeResult)(s)}t.voidSuccess=f;t.emptyObject={}},1399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.smax=void 0;const r=n(780).wap;t.smax=r},5640:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStanzas=s,t.optionalMerge=function(e,t,n,r){if(null!=n)return e(t,n,r);return t};var r=n(4080),i=n(3486);const o="smax$any";function s(e,t){return function(e,t){const n=e.tag,r=t.tag;if(r===o)return;if(n!==r)throw new Error(`tag mismatch: ${n} != ${r}`)}(e,t),function(e,t){const n=e.attrs,r=t.attrs;Object.keys(r).forEach((e=>{const t=r[e],o=n[e];if(null!=t&&null!=o){if(function(e,t){if("string"==typeof e&&"string"==typeof t)return e===t;if(e instanceof i.WapJid&&t instanceof i.WapJid)return e.toString()===t.toString();return!1}(t,o))return;throw new Error(`conflict for key: ${e}`)}n[e]=t}))}(e,t),t.content instanceof Uint8Array?function(e,t){const n=e.content;if(n instanceof Uint8Array){if(!(0,r.uint8ArraysEqualUNSAFE)(n,t))throw new Error("elementValue mismatch: bytes dose not equal");return}if(null!=n)throw new Error("elementValue mismatch: destination has children");e.content=t}(e,t.content):null!=t.content&&function(e,t){const n=e.content;if(n instanceof Uint8Array)throw new Error("children mismatch: destination has element value");if(null==n||0===n.length)return void(e.content=t);if(!function(e,t){const n=a(t),r=a(e),i=Object.keys(n);for(let e=0;e<i.length;e++){const t=i[e],o=n[t],s=r[t];if(null!=o&&null!=s&&o!==s)return!1}return!0}(n,t))throw new Error("children mismatch: child counts are not compatible");const r=[],i=Array.from(n);t.forEach((e=>{const t=i.findIndex((t=>t.tag===e.tag));if(-1===t)r.push(e);else{const n=s(i.splice(t,1)[0],e);r.push(n)}})),i.forEach((e=>r.push(e))),e.content=r}(e,t.content),e}function a(e){return e.reduce(((e,t)=>{const n=t.tag,r=e[n];return e[n]=null==r?1:r+1,e}),{})}},3274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Offline=t.Disconnected=t.BufferTooLargeError=void 0;var r=n(6911);const i=(0,r.customError)("BufferTooLarge",!1);t.BufferTooLargeError=i;const o=(0,r.customError)("Disconnected",!1);t.Disconnected=o;const s=(0,r.customError)("Offline",!1,o);t.Offline=s},4857:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AckParser=void 0,t.ackMatchesTemplate=function(e,t){return e.id===t.id&&(void 0===t.class||e.class===t.class)&&(void 0===t.type||e.type===t.type)&&(void 0===t.from||o(e.from,t.from))&&(void 0===t.participant||e.participant===t.participant)&&(void 0===t.ts||e.ts===t.ts)},t.fromJidsAreEqual=o;var r=n(4037);const i=new(n(8748).WapParser)("ack",(e=>(e.assertTag("ack"),{id:e.attrString("id"),ts:e.maybeAttrString("t"),class:e.attrString("class"),type:e.maybeAttrString("type"),from:e.attrJidWithType(),participant:e.hasAttr("participant")?e.attrDeviceJid("participant"):null})));function o(e,t){if((0,r.extractFromJid)(e)===t)return!0;if(null!=e.userJid)return(0,r.defaultDeviceJidForUser)(e.userJid)===t;if(null!=e.deviceJid){const{deviceJid:n}=e;return 0===(0,r.extractDeviceId)(n)&&(0,r.extractUserJid)(n)===t}return!1}t.AckParser=i},9026:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelDeadSocketTimer=function(){w&&w.deadSocketTimer.cancel()},t.castSmaxStanza=k,t.closeSocket=function(){const e=x("closeSocket").socket;e&&(__LOG__(2)`closeSocket called`,e.close())},t.closeSocketAndPreventRetry=function(){const e=x("closeSocketAndPreventRetry");e.socketLoop.endWithValue(),e.socket&&(__LOG__(2)`closeSocketAndPreventRetry called`,e.socket.close())},t.deprecatedCastStanza=function(e){k(e)},t.deprecatedSendIq=function(e,t){return O(e,!1).then((e=>(0,d.parseIqResponse)(e,t)))},t.deprecatedSendIqErrorParser=function(e,t,n){return O(e,!1).then((e=>(0,d.parseIqResponse)(e,t,n)))},t.deprecatedSendIqIfConnectedWithin=function(e,t,n){return O(e,!1,n).then((e=>(0,d.parseIqResponse)(e,t)))},t.deprecatedSendIqWithoutRetry=function(e,t){return O(e,!0).then((e=>(0,d.parseIqResponse)(e,t)))},t.deprecatedSendStanzaAndReturnAck=P,t.deprecatedSendStanzaAndWaitForAck=function(e,t){return P(e,t).then((()=>{}))},t.forceResetSocketLoop=function(){x("forceResetSocketLoop").socketLoop.reset()},t.getComms=function(){return w},t.isActiveSocket=function(e){return x("castStanza").socketId===e},t.isSocketConnected=T,t.maybeResetSocketLoop=function(){T()||x("maybeResetSocketLoop").socketLoop.reset()},t.onStreamErrorReceived=function(){x("onStreamErrorReceived").socketLoop.cancelReset()},t.openSocketLoop=j,t.resetStateForTests=function(){w=null,S=new h.Resolvable,E=1},t.sendPing=function(){return x("sendPing").sendPing()},t.sendSmaxStanza=function(e,t){var n,r;const i=null!==(n=null==t?void 0:t.withoutRetry)&&void 0!==n&&n,o=null!==(r=null==t?void 0:t.timeoutSeconds)&&void 0!==r?r:0;return O(e,i,o,"smax")},t.singletonOrThrowIfUninitialized=x,t.socketLoopIteration=I,t.startComms=function(e,t,n){if(w)return;w=new A(e,t,n),setTimeout(j,0)},t.startHandlingRequests=function(){return x("startHandlingRequests").startHandlingRequests()},t.stopComms=function(){const e=x("stopComms");e.socketLoop.endWithValue(),e.socket&&e.socket.close();w=null},t.waitForConnection=function(){x("waitForConnection").sendPing(),S||(S=new h.Resolvable);return S.promise};var i=r(n(3982)),o=r(n(1504)),s=n(4857),a=n(3558),c=r(n(2065)),u=n(3274),l=n(5584),d=n(2827),f=n(2521),h=n(1630),p=n(2207),_=n(8494),v=n(1084),y=n(8525),g=n(3263),m=n(9987),b=n(780);let w=null,S=null,E=1;class A{constructor(e,t,n){var r,i;this.nextSocketId=1,this.pendingIqs=new Map,this.ackHandlers=[],this.pendingSmaxStanzas=new Map,this._recvBlocker=new h.Resolvable,this.activePing=null,this._pending=new Set,this.socketId=0,this.socket=null,this.softCloseSocket=null,this.handleStanza=(e,t,n)=>{const r=(0,g.attrString)(e,"id");if(r.success){const t=r.value,n=this.pendingSmaxStanzas.get(t);if(n)return this.pendingSmaxStanzas.delete(t),n.resolve(e),this.maybeScheduleHealthCheck(),"NO_ACK"}const i=U(e);if(null!=i){const t=this.pendingIqs.get(i);t?(this.pendingIqs.delete(i),t.resolve(e),this.maybeScheduleHealthCheck()):(__LOG__(3)`handleIq no handler for iq with id ${i}`,__LOG__(4,void 0,new Error)`handleIq no handler for iq`)}else{if("ack"!==e.tag)return"failure"===e.tag&&this.config.shouldBlockReceivingUntilSuccess?this._handleStanza(e,t,n):this._recvBlocker.promise.then((()=>this._handleStanza(e,t,n)));this.handleAck(e)}return"NO_ACK"},this.healthCheckTimer=new _.ShiftTimer((()=>{this.socketId&&this.sendPing()})),this.deadSocketTimer=new _.ShiftTimer((e=>{__LOG__(2)`Comms: Socket ${e} expired`,e===this.socketId&&this.softCloseSocket&&this.softCloseSocket()})),this.sendPing=(0,o.default)((function*(){const e=x("sendPing");if(!e.socketId)return __LOG__(2)`sendPing when socket dead`,Promise.resolve();if(e.activePing&&e.activePing.socketId===e.socketId)return __LOG__(2)`sendPing ping still pending`,Promise.resolve();e.activePing&&e.activePing.handler.resolve();const t=(0,y.makeClientRequest)(),n=t.attrs.id;if("string"!=typeof n)return __LOG__(4,void 0,new Error)`No stanzaId in ping request stanza`,Promise.resolve();const r=new h.Resolvable;e.activePing={socketId:e.socketId,stanzaId:n,handler:r},e.callStanza(t);const i=yield r.promise;if(i){const n=(0,v.parseClientResponseServerResponse)(i,t);if(n.success){var o,s;const t=(0,m.castToUnixTime)(n.value.t),r=Math.round(Date.now()/1e3-t);null===(o=(s=e.config.handlers).onClockSkewUpdate)||void 0===o||o.call(s,r)}}})),this._handleStanza=e,this.onConnectionChange=(0,l.notifyConnectionChangeFactory)(null!==(r=t.handlers.onConnectionChange)&&void 0!==r?r:()=>{},null!==(i=t.handlers.onOptimisticConnectionChange)&&void 0!==i?i:()=>{}),this.gzipInflate=n,this.config=t,this.socketLoop=new f.PromiseRetryLoop({name:"MainSocketLoop",code:I,timer:{jitter:.1,max:t.maxSocketLoopWaitTime,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4})}filterPending(e){const t=[];function n(n){e(n)&&t.push(n)}return this.pendingIqs.forEach(n),this.ackHandlers.forEach(n),this.pendingSmaxStanzas.forEach(n),t}sendPendingStanza(e){const{timeoutId:t}=e;null!=t&&(clearTimeout(t),e.timeoutId=void 0),this.callStanza(e.stanza)}maybeSendPendingStanza(e){this.socket?this.sendPendingStanza(e):__LOG__(2)`Comms has no open socket, will resend stanza when socket opens`}callStanzaAsync(e){var t=this;return(0,o.default)((function*(){return yield t.callStanza(e)}))()}callStanza(e){const t=this.castStanza(e);return this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId),this.healthCheckTimer.cancel(),t}castStanzaAsync(e){var t=this;return(0,o.default)((function*(){return yield t.castStanza(e)}))()}castStanza(e){try{var t,n;const r=null===(t=(n=this.config.handlers).onBeforeCastStanzaForE2E)||void 0===t?void 0:t.call(n,e);if(null!=r)return this.handleStanza(r,this.socketId,0),__LOG__(4,void 0,new Error)`Dropping stanza since onBeforeCastStanza matched. (This is not expected in a non-E2E build!)`,Promise.resolve()}catch(e){}const r=this.socketOrThrow("castStanza");try{return r.sendFrame((0,b.encodeStanza)(e)).then((()=>{var t,n;null===(t=(n=this.config.handlers).onCastStanza)||void 0===t||t.call(n,e)})).catch((e=>{if(__LOG__(4,void 0,new Error)`castStanza async error ${e}`,e instanceof u.BufferTooLargeError)return Promise.reject(e)}))}catch(e){__LOG__(4,void 0,new Error)`castStanza error ${e}`}return Promise.resolve()}socketOrThrow(e){const t=this.socket;if(t)return t;throw(0,c.default)(`Comms.${e} called while no socket`)}startHandlingRequests(){return __LOG__(2)`Comms.startHandlingRequests`,this._recvBlocker.resolve(),this._recvBlocker.promise.then((()=>{}))}parseAndHandleStanza(e,t){e===this.socketId&&(this.deadSocketTimer.cancel(),S&&(S.resolve(),S=null));const n=(0,b.decodeStanza)(t,this.gzipInflate).catch((e=>{throw __LOG__(4,void 0,new Error)`Failure parsing stanza!`,e})).then((n=>{var r,i;null===(r=(i=this.config.handlers).onHandleStanza)||void 0===r||r.call(i,n,e,t.byteLength);const o=this.activePing;return o&&o.socketId===e&&o.stanzaId===U(n)?(this.activePing=null,o.handler.resolve(n),this.maybeScheduleHealthCheck(),"NO_ACK"):this.handleStanza(n,e,t.byteLength)})).then((t=>{if(e===this.socketId){if("CLOSE_SOCKET"===t){__LOG__(2)`Comms: job response is CLOSE_SOCKET`;const e=this.socket;e&&e.close()}else"NO_ACK"===t||this.castStanza(t);return"NO_ACK"}}));this._pending.add(n),n.finally((()=>{this._pending.delete(n)}))}handleAck(e){const t=this.ackHandlers;let n=-1,r=null;for(;!r&&++n<t.length;)r=t[n].parseAndTest(e);if(r){var i,o;const s=t[n];(0,a.removeIndexWithoutPreservingOrder)(t,n),null===(i=(o=this.config.handlers).onHandleAck)||void 0===i||i.call(o,e),s.resolve(r),this.maybeScheduleHealthCheck()}else __LOG__(3)`handleAck: unrecognized ${e}`}removeHandler(e){if("iq"===e.type||"smax"===e.type){const t=e.stanza.attrs.id;if(!t||"string"!=typeof t)return;if("iq"===e.type&&!this.pendingIqs.delete(t)||"smax"===e.type&&!this.pendingSmaxStanzas.delete(t))return}else{e.type;const t=this.ackHandlers.indexOf(e);if(-1===t)return;(0,a.removeIndexWithoutPreservingOrder)(this.ackHandlers,t)}e.resolve(Promise.reject(new u.Disconnected))}maybeScheduleHealthCheck(){if(this.healthCheckTimer.isScheduled())return;if(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)return;const e=this.config.healthCheckInterval,t=Math.ceil(1e3*e*(1+Math.random()));this.healthCheckTimer.onOrBefore(t)}}function j(){x("openSocketLoop").socketLoop.start()}function T(){var e;return!!(null===(e=w)||void 0===e?void 0:e.socket)}function I(){var e,t;const n=x("socketLoopIteration"),r=n.nextSocketId++;return __LOG__(2)`Comms: Socket ${r} opening`,null===(e=(t=n.config.handlers).onSocketLoopIteration)||void 0===e||e.call(t),n.config.openChatSocket((()=>{n.onConnectionChange("in_handshake")})).then((0,p.onResult)((e=>{var t,i,o,s;null===(t=(i=n.config.handlers).onSocketOpen)||void 0===t||t.call(i);const a=new h.Resolvable;return __LOG__(2)`Comms: Socket ${r} opened`,n.socketId=r,n.socket=e,n.softCloseSocket=()=>{n.softCloseSocket=null,n.socket&&n.config.shouldCloseStaleSocket&&(n.socket.close(),n.socket=null),a.resolve()},n.socketLoop.resetTimeoutAfter(1e4),n.deadSocketTimer.cancel(),n.maybeScheduleHealthCheck(),e.setOnFrame((e=>n.parseAndHandleStanza(r,e))),e.setOnClose((()=>{var e,t;__LOG__(2)`Comms: Socket ${r} closed`,n.activePing&&r===n.activePing.socketId&&(n.activePing.handler.resolve(),n.activePing=null),n.filterPending((e=>e.attachedToSocketId===r)).forEach((e=>{n.removeHandler(e)})),r===n.socketId&&(n.socketId=0,n.socket=null,n.onConnectionChange("disconnected"),null===(e=(t=n.config.handlers).onDisconnect)||void 0===e||e.call(t),a.resolve())})),n.onConnectionChange("connected"),null===(o=(s=n.config.handlers).onConnect)||void 0===o||o.call(s),n.filterPending((e=>!e.attachedToSocketId)).sort(((e,t)=>e.orderedId-t.orderedId)).forEach((e=>{switch(e.type){case"smax":case"iq":n.sendPendingStanza(e);break;case"ack":n.callStanza(e.stanza);break;default:e.type}})),a.promise}))).then((0,p.catchError)((e=>{switch(e){case"max-hunters":__LOG__(3)`socketLoopIteration socket closed while in noise handshake using treasureHunt strategy`;break;case"disconnected":__LOG__(3)`socketLoopIteration socket disconnected while in noise handshake`}}))).catch((e=>{e instanceof u.Disconnected?__LOG__(2)`socketLoopIteration socket closed while in noise handshake`:__LOG__(4,void 0,new Error)`socketLoopIteration failed ${e}`}))}function P(e,t){return new Promise((n=>{const r=x("deprecatedSendStanzaAndWaitForAck"),i={type:"ack",parseAndTest:e=>{const n=s.AckParser.parse(e);return!n.error&&(0,s.ackMatchesTemplate)(n.success,t)?e:null},resolve:n,stanza:e,attachedToSocketId:0,orderedId:E++};r.ackHandlers.push(i),r.socket?r.callStanza(e).catch((e=>{const t=r.ackHandlers.indexOf(i);-1!==t&&((0,a.removeIndexWithoutPreservingOrder)(r.ackHandlers,t),i.resolve(Promise.reject(e)))})):__LOG__(2)`Comms has no open socket, will send stanza when socket opens`}))}function k(e){const t=x("castStanza");t.socket?t.castStanza(e):__LOG__(2)`Comms has no open socket`}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"iq";return new Promise((o=>{const s=x("sendIq"),a=e.attrs.id;if(!a||"string"!=typeof a)throw(0,c.default)(`Comms:sendIq given iq without id: ${String(e)}`);const l=s.socketId;if(t&&!l)return void o(Promise.reject(new u.Offline));let d;n>0&&(d=setTimeout((()=>{const e="iq"===r?s.pendingIqs.get(a):s.pendingSmaxStanzas.get(a);e?s.removeHandler(e):o(Promise.reject((0,c.default)(`Comms:_sendIq unexisting stanza to be cancelled: ${a}`)))}),1e3*n));const f={resolve:o,stanza:e,attachedToSocketId:t?l:0,orderedId:E++,timeoutId:d};if("iq"===r){var h,p;const t=(0,i.default)({type:r},f);s.pendingIqs.set(a,t),null===(h=(p=s.config.handlers).onSendIq)||void 0===h||h.call(p,e),s.maybeSendPendingStanza(t)}else{const e=(0,i.default)({type:r},f);s.pendingSmaxStanzas.set(a,e),s.maybeSendPendingStanza(e)}}))}function x(e){if(w)return w;throw(0,c.default)(`Comms::${e} called before startComms`)}function U(e){if("iq"===e.tag){const t=e.attrs.type;if("result"===t||"error"===t)return(0,b.decodeAsString)(e.attrs.id)||null}return null}},5584:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyConnectionChangeFactory=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3;const r={timeoutID:null,connectionStatus:"disconnected",optimismLevel:"optimist"},i=()=>{const{optimismLevel:e,connectionStatus:i}=r;"optimist"===e?r.timeoutID=setTimeout((()=>{r.optimismLevel="realist",t(i)}),n):t(i)};return n=>{r.connectionStatus=n,"disconnected"===n||"in_handshake"===n?i():(null!=r.timeoutID&&(clearTimeout(r.timeoutID),r.timeoutID=null),t(n)),e(n)}}},6581:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.XmppParsingFailure=t.ParsableWapNode=void 0;var i=n(9323),o=r(n(2065)),s=n(4037),a=n(1330),c=n(8481),u=n(717),l=n(9987),d=n(780),f=n(3486);class h extends Error{constructor(e,t){super(`XmppParsingFailure: ${e}: ${t}`),this.name="XmppParsingFailure",this.parser=e,this.reason=t}toString(){return`XmppParsingFailure: ${this.parser}: ${this.reason}`}}t.XmppParsingFailure=h;class p extends c.ParsableXmlNode{constructor(e,t){super(e,t)}assertFromServer(){const e=this.attrString("from");e!==s.WA_SERVER_JID_SUFFIX&&this.throw(`to have "from"="s.whatsapp.net", but instead has "${e}"`)}attrUserJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return null==n.userJid?this.throw(`to have "${e}"={UserJid}, but instead has "${t}"`):n.userJid}attrPhoneUserJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return"phoneUser"===n.jidType?n.userJid:this.throw(`to have "${e}"={PhoneUserJid}, but instead has "${t}"`)}attrLidUserJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return"lidUser"===n.jidType?n.userJid:this.throw(`to have "${e}"={LidUserJid}, but instead has "${t}"`)}maybeAttrUserJid(e){return this.hasAttr(e)?this.attrUserJid(e):null}maybeAttrPhoneUserJid(e){return this.hasAttr(e)?this.attrPhoneUserJid(e):null}maybeAttrLidUserJid(e){return this.hasAttr(e)?this.attrLidUserJid(e):null}attrGroupJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return null==n.groupJid?this.throw(`to have "${e}"={GroupJid}, but instead has "${t}"`):n.groupJid}maybeAttrGroupJid(e){return this.hasAttr(e)?this.attrGroupJid(e):null}attrChatJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return null!=n.userJid?n.userJid:null!=n.groupJid?n.groupJid:this.throw(`to have "${e}"={ChatJid}, but instead has "${t}"`)}attrPhoneChatJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return"phoneUser"===n.jidType?n.userJid:"group"===n.jidType?n.groupJid:this.throw(`to have "${e}"={ChatJid}, but instead has "${t}"`)}attrDeviceJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return null!=n.deviceJid?n.deviceJid:null!=n.userJid?(0,s.defaultDeviceJidForUser)(n.userJid):this.throw(`to have "${e}"={DeviceJid}, but instead has "${t}"`)}attrPhoneDeviceJid(e){const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return"phoneDevice"===n.jidType?n.deviceJid:"phoneUser"===n.jidType?(0,s.defaultPhoneDeviceJidForUser)(n.userJid):this.throw(`to have "${e}"={DeviceJid}, but instead has "${t}"`)}attrDeviceId(e){const t=this.attrInt(e);return(0,s.interpretAsDeviceId)(t)}attrFromJidChat(){const e=this.attrJidWithType();switch(e.jidType){case"msgrUser":{const t=e.userJid,n=(0,s.defaultDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"interopUser":{const t=e.userJid,n=(0,s.defaultDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneUser":{const t=e.userJid,n=(0,s.defaultDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"lidUser":{const t=e.userJid,n=(0,s.defaultLidDeviceJidForLidUserJid)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneDevice":{const t=e.deviceJid;return{type:"device",chat:(0,s.extractUserJid)(t),deviceJid:t,author:t}}case"msgrDevice":{const t=e.deviceJid;return{type:"device",chat:(0,s.extractUserJid)(t),deviceJid:t,author:t}}case"interopDevice":{const t=e.deviceJid;return{type:"device",chat:(0,s.extractUserJid)(t),deviceJid:t,author:t}}case"lidDevice":{const t=e.deviceJid;return{type:"device",chat:(0,s.extractUserJid)(t),deviceJid:t,author:t}}case"group":{const t=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"group",chat:e.groupJid,groupJid:e.groupJid,author:t}}case"broadcast":{const t=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"broadcast",broadcastJid:e.broadcastJid,chat:(0,s.extractUserJid)(t),author:t}}case"call":throw __LOG__(4,void 0,new Error)`ParsableWapNode: attrFromJid() is called with ${e.callJid}`,(0,o.default)("ParsableWapNode: attrFromJid() does not support CallJid");default:return e.jidType,this.throw(`attrFromJidChat should not be used with jid of type ${e.jidType}`)}}attrFromJidPhoneChat(){const e=this.attrJidWithType();switch(e.jidType){case"phoneUser":{const t=e.userJid,n=(0,s.defaultPhoneDeviceJidForUser)(t);return{type:"device",chat:t,deviceJid:n,author:n}}case"phoneDevice":{const t=e.deviceJid;return{type:"device",chat:(0,s.extractPhoneUserJid)(t),deviceJid:t,author:t}}case"group":{const t=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"group",chat:e.groupJid,groupJid:e.groupJid,author:t}}case"broadcast":{const t=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==t?this.throw("expected to have participant JID for group"):{type:"broadcast",broadcastJid:e.broadcastJid,chat:(0,s.extractPhoneUserJid)(t),author:t}}case"call":throw __LOG__(4,void 0,new Error)`ParsableWapNode: attrFromJid() is called with ${e.callJid}`,(0,o.default)("ParsableWapNode: attrFromJid() does not support CallJid");default:return e.jidType,this.throw(`attrFromJidChat should not be used with jid of type ${e.jidType}`)}}attrFromPhoneJid(){if("status"===this.attrJidWithType().jidType){const e=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==e?this.throw("to have participant for status msg"):{type:"status",author:e}}return this.attrFromJidPhoneChat()}attrFromJid(){const e=this.attrJidWithType();if("status"===e.jidType){const e=this.hasAttr("participant")?this.attrPhoneDeviceJid("participant"):null;return null==e?this.throw("to have participant for status msg"):{type:"status",author:e}}return"newsletter"===e.jidType?{type:"newsletter",newsletterJid:e.newsletterJid}:this.attrFromJidChat()}attrJidWithType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return"unknown"===n.jidType?this.throw(`to have "${e}"={Jid}, but instead has "${t}"`):n}attrWapJid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";const t=this.attrString(e),n=(0,s.interpretAndValidateJid)(t);return"unknown"===n.jidType?f.WapJid.create(null,t):(0,d.JID)((0,s.extractFromJid)(n))}attrLongInt(e){const t=this.attrString(e);return(0,a.decimalStringToLongInt)(t)}attrTime(e){return(0,l.castToUnixTime)(this.attrInt(e))}attrFutureTime(e){const t=this.attrInt(e);return(0,l.futureUnixTime)(t)}contentString(){if(this.hasChildren())return this.throw("to have string content, but has children instead");if(this.hasContent()){const e=new i.Binary(this.contentBytes());return e.readString(e.size())}return this.throw("to have content")}decodeAsString(e){return(0,d.decodeAsString)(e)}contentSerializedPubKey(){return this.hasContent()?(0,u.serializeIdentity)(this.contentBytes()):this.throw("to have content")}createParseError(e){return new h(this.name(),`expected <${this.tag()}> ${e}`)}throw(e){throw this.createParseError(e)}}t.ParsableWapNode=p},2827:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIqResponse=function(e,t,n){const o=e.content;if(o&&Array.isArray(o)&&o[0]){const t=o[0];if("error"===t.tag){const o=t.attrs||{};let s;n&&(s="function"==typeof n?n(e):n.parseOrThrow(t));const a=s;return{success:!1,errorCode:parseInt(o.code,10),errorText:(0,r.decodeAsString)(o.text)||"",errorType:(0,r.decodeAsString)(o.type)||"",errorBackoff:parseInt(o.backoff,10),toString:i,customError:a}}}return"function"==typeof t?{success:!0,result:t(e)}:{success:!0,result:t.parseOrThrow(e)}};var r=n(780);function i(){return`IqError ${this.errorCode}: ${this.errorText}`}},780:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.BIG_ENDIAN_CONTENT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e;const r=new Uint8Array(t);for(let e=t-1;e>=0;e--)r[e]=255&n,n>>>=8;return r},t.BROADCAST_JID=function(e){return V(e)},t.CALL_JID=function(e){return V(e)},t.CUSTOM_STRING=function(e){return e},t.DEVICE_JID=function(e){return V(e)},t.DOMAIN_JID=X,t.DROP_ATTR=void 0,t.GROUP_JID=function(e){return V(e)},t.G_US=void 0,t.INT=function(e){return e.toString()},t.JID=V,t.LONG_INT=function(e){return(0,c.longIntToDecimalString)(e)},t.MAYBE_CUSTOM_STRING=function(e){if(null==e)return A;return e},t.NEWSLETTER=void 0,t.NEWSLETTER_JID=function(e){return V(e)},t.PARTICIPANT_JID=function(e){return"status"===e.type||"group"===e.type||"broadcast"===e.type?V(e.author):A},t.STANZA_ID=function(e){return e},t.S_WHATSAPP_NET=t.STATUS_BROADCAST=void 0,t.TO_JID=function(e){return V(H(e))},t.TO_WAP_JID=function(e){return"phoneDevice"===e.jidType||"msgrDevice"===e.jidType||"lidDevice"===e.jidType?V(e.deviceJid):"phoneUser"===e.jidType||"msgrUser"===e.jidType||"lidUser"===e.jidType?V(e.userJid):"group"===e.jidType?V(e.groupJid):"status"===e.jidType?V(e.statusJid):"call"===e.jidType?V(e.callJid):"interopDevice"===e.jidType?V(e.deviceJid):"interopUser"===e.jidType?V(e.userJid):"newsletter"===e.jidType?V(e.newsletterJid):(e.jidType,V(e.broadcastJid))},t.USER_JID=function(e){return V(e)},t.WapNode=void 0,t.decodeAsString=function(e){if(e instanceof l.WapJid)return e.toString();return e},t.decodeStanza=function(e,t){const n=new o.Binary(e);if(2&n.readUint8())return __LOG__(2)`Decoding compressed stanza`,t(n.readByteArray()).then((e=>z(new o.Binary(e))));return Promise.resolve(z(n))},t.decodeStanzaDebug=function(e){const t=new o.Binary(e);if(2&t.readUint8())throw(0,s.default)("Cannot pass compressed stanza to decodeStanzaDebug");return z(t)},t.enableXMLFormat=function(){O=!0},t.encodeStanza=function(e){const t=e instanceof x?e:R(e),n=new o.Binary;C(t,n);const r=n.readByteArray(),i=new Uint8Array(1+r.length);return i[0]=0,i.set(r,1),i},t.extractParticipantJid=function(e){switch(e.type){case"group":case"status":case"broadcast":return e.author;default:return e.type,null}},t.extractToJid=H,t.generateId=function(){if(!S){const e=new Uint16Array(2);self.crypto.getRandomValues(e),S=`${String(e[0])}.${String(e[1])}-`}return`${S}${E++}`},t.makeStanza=R,t.makeWapNode=U,t.wap=void 0;var i=r(n(7537)),o=n(9323),s=r(n(2065)),a=n(4037),c=n(1330),u=n(4493),l=n(3486),d=r(n(8132)),f=n(3260);const h=a.MSGR_USER_DOMAIN.replace("@",""),p=a.WA_USER_DOMAIN.replace("@",""),_=a.LID_DOMAIN.replace("@",""),v=a.INTEROP_DOMAIN.replace("@",""),y=[236,237,238,239],g=248,m=249,b=["0","1","2","3","4","5","6","7","8","9","-",".","�","�","�","�"],w=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];let S="",E=1;const A={sentinel:"DROP_ATTR"};t.DROP_ATTR=A;const j=l.WapJid.create(null,"g.us");t.G_US=j;const T=l.WapJid.create(null,a.WA_SERVER_JID_SUFFIX);t.S_WHATSAPP_NET=T;const I=l.WapJid.create("status","broadcast");t.STATUS_BROADCAST=I;const P=l.WapJid.create(null,"newsletter");t.NEWSLETTER=P;const k={};let O=!1;class x{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.tag=e,this.attrs=t,this.content=n}toString(){let e="<"+this.tag;e+=(0,f.attrsToString)(this.attrs);const t=this.content;return Array.isArray(t)?e+=`>${t.map(String).join("")}</${this.tag}>`:e+=t?`>${(0,f.uint8ArrayToDebugString)(t)}</${this.tag}>`:" />",O&&(e=(0,d.default)(e)),e}}function U(e,t,n){let r=null;if(t&&null!=t.children)throw(0,s.default)('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(n))r=n.filter(Boolean);else if("string"==typeof n)r=o.Binary.build(n).readByteArray();else if(n instanceof ArrayBuffer)r=new Uint8Array(n);else if(n instanceof Uint8Array)r=n;else{const e=[];for(let t=2;t<arguments.length;t++){const n=arguments[t];n&&e.push(n)}r=e}Array.isArray(r)&&0===r.length&&(r=null);const i={};if(t){const n=t;Object.keys(n).forEach((t=>{const r=n[t];if(null==r)throw(0,s.default)(`Attr ${t} in <${e}> is null`);r!==A&&(i[t]=r)}))}return new x(e,i,r)}t.WapNode=x;const D=U;function R(e){let t=e.content;return Array.isArray(t)?t=t.map(R):"string"==typeof t&&(t=o.Binary.build(t).readByteArray()),new x(e.tag,e.attrs||k,t)}function C(e,t){if(null==e)t.writeUint8(0);else if(e instanceof x)M(e,t);else if(e instanceof l.WapJid)!function(e,t){const n=e.getInnerJid();if(n.type===l.WAP_JID_SUBTYPE.JID_U){const{user:e,device:r,domainType:i}=n;t.writeUint8(247),t.writeUint8(i),t.writeUint8(r),C(e,t)}else if(n.type===l.WAP_JID_SUBTYPE.JID_FB){const{user:e,device:r}=n;t.writeUint8(246),C(e,t),t.writeUint16(r),C(p,t)}else if(n.type===l.WAP_JID_SUBTYPE.JID_INTEROP){const{user:e,device:r,integrator:i}=n;t.writeUint8(245),C(e,t),t.writeUint16(r),t.writeUint16(i),C(p,t)}else{const{user:e,server:r}=n;t.writeUint8(250),null!=e?C(e,t):t.writeUint8(0),C(r,t)}}(e,t);else if("string"==typeof e)N(e,t);else{if(!(e instanceof Uint8Array))throw(0,s.default)("Invalid payload type "+typeof e);!function(e,t){F(e.length,t),t.writeByteArray(e)}(e,t)}}function M(e,t){if(void 0===e.tag)return t.writeUint8(g),void t.writeUint8(0);let n=1;e.attrs&&(n+=2*Object.keys(e.attrs).length),e.content&&n++,n<256?(t.writeUint8(g),t.writeUint8(n)):n<65536&&(t.writeUint8(m),t.writeUint16(n)),C(e.tag,t),e.attrs&&Object.keys(e.attrs).forEach((n=>{N(n,t),C(e.attrs[n],t)}));const r=e.content;if(Array.isArray(r)){r.length<256?(t.writeUint8(g),t.writeUint8(r.length)):r.length<65536&&(t.writeUint8(m),t.writeUint16(r.length));for(let e=0;e<r.length;e++)M(r[e],t)}else r&&C(r,t)}let $,L;function J(e){const t=new Map;for(let n=0;n<e.length;n++)t.set(e[n],n);return t}function N(e,t){if(""===e)return t.writeUint8(252),void t.writeUint8(0);null==$&&($=J(u.SINGLE_BYTE_TOKEN));const n=$.get(e);if(null!=n)return void t.writeUint8(n+1);if(null==L){L=[];for(let e=0;e<u.DICTIONARIES.length;++e)L.push(J(u.DICTIONARIES[e]))}for(let n=0;n<L.length;++n){const r=L[n].get(e);if(null!=r)return t.writeUint8(y[n]),void t.writeUint8(r)}const r=(0,o.numUtf8Bytes)(e);if(r<128){if(!/[^0-9.-]+?/.exec(e))return void B(e,255,t);if(!/[^0-9A-F]+?/.exec(e))return void B(e,251,t)}F(r,t),t.writeString(e)}function B(e,t,n){const r=e.length%2==1;n.writeUint8(t);let i=Math.ceil(e.length/2);r&&(i|=128),n.writeUint8(i);let o=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);let a=null;if(48<=i&&i<=57?a=i-48:255===t?45===i?a=10:46===i&&(a=11):251===t&&65<=i&&i<=70&&(a=i-55),null==a)throw(0,s.default)(`Cannot nibble encode ${i}`);r%2==0?(o=a<<4,r===e.length-1&&(o|=15,n.writeUint8(o))):(o|=a,n.writeUint8(o))}}function F(e,t){if(e<256)t.writeUint8(252),t.writeUint8(e);else if(e<1048576)t.writeUint8(253),t.writeUint8(e>>>16&255),t.writeUint8(e>>>8&255),t.writeUint8(255&e);else{if(!(e<4294967296))throw(0,s.default)(`Binary with length ${e} is too big for WAP protocol`);t.writeUint8(254),t.writeUint32(e)}}function K(e,t){const n=e.readUint8();if(0===n)return null;if(n===g)return W(e,e.readUint8());if(n===m)return W(e,e.readUint16());if(252===n){const n=e.readUint8();return G(e,n,t)}if(253===n){const n=e.readUint8(),r=e.readUint8(),i=e.readUint8();return G(e,((15&n)<<16)+(r<<8)+i,t)}if(254===n){const n=e.readUint32();return G(e,n,t)}if(250===n)return function(e){const t=function(e){const t=K(e,!0);if(null!=t&&"string"!=typeof t)throw(0,s.default)("WAWap:decodeNullableString got invalid value, string expected");return t}(e),n=Y(e);return l.WapJid.create(t,n)}(e);if(246===n)return function(e){const t=Y(e),n=e.readUint16();return Y(e),l.WapJid.createFbJid(t,n)}(e);if(245===n)return function(e){const t=Y(e),n=e.readUint16(),r=e.readUint16();return Y(e),l.WapJid.createInteropJid(t,n,r)}(e);if(247===n)return function(e){let t=null;const n=e.readUint8();if(0===n)t=l.DomainType.WHATSAPP;else{if(1!==n)throw(0,s.default)(`decodeJidU - Invalid domain type encoding ${n}`);t=l.DomainType.LID}const r=e.readUint8(),i=Y(e);return l.WapJid.createJidU(i,t,r)}(e);if(255===n){const t=e.readUint8();return q(e,b,t>>>7,127&t)}if(251===n){const t=e.readUint8();return q(e,w,t>>>7,127&t)}if(n<=0||n>=240)throw(0,s.default)("Unable to decode WAP buffer");if(n>=236&&n<=239){const t=n-236,r=u.DICTIONARIES[t];if(void 0===r)throw(0,s.default)(`Missing WAP dictionary ${t}`);const i=e.readUint8(),o=r[i];if(void 0===o)throw(0,s.default)(`Invalid value index ${i} in dict ${t}`);return o}const r=u.SINGLE_BYTE_TOKEN[n-1];if(void 0===r)throw(0,s.default)(`Undefined token with index ${n}`);return r}function W(e,t){const n=[];for(let r=0;r<t;r++)n.push(z(e));return n}function z(e){const t=e.readUint8();let n,r;if(t===g)n=e.readUint8();else{if(t!==m)throw(0,s.default)(`Failed to decode node since type byte ${String(t)} is invalid`);n=e.readUint16()}let i=null;if(0===n)throw(0,s.default)("Failed to decode node, list cannot be empty");const o=Y(e);for(n-=1;n>1;){r||(r={});const t=Y(e),i=K(e,!0);r[t]=i,n-=2}return 1===n&&(i=K(e,!1),i instanceof l.WapJid&&(i=String(i))),new x(o,r,i)}function Y(e){const t=K(e,!0);if("string"!=typeof t)throw(0,s.default)("WAWap:decodeString got invalid value, string expected");return t}function G(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e.readString(t):e.readByteArray(t)}function q(e,t,n,r){const i=new Array(2*r-n);for(let n=0;n<i.length-1;n+=2){const r=e.readUint8();i[n]=t[r>>>4],i[n+1]=t[15&r]}if(n){const n=e.readUint8();i[i.length-1]=t[n>>>4]}return i.join("")}function H(e){switch(e.type){case"group":return e.groupJid;case"status":return a.STATUS_JID;case"device":return e.deviceJid;case"newsletter":return e.newsletterJid;default:return e.type,e.broadcastJid}}function V(e){const t=(0,a.validateDomainJid)(e);if(null!=t)return X(t);const n=e.split("@");let r=n[0];const i=n[1];let o=null,s=null;if(i!==p&&i!==h&&i!==v&&i!==_||-1!==r.indexOf(":")&&([r,o]=r.split(":"),s=parseInt(o,10)),i===v){const[e,t]=r.split("-");return l.WapJid.createInteropJid(t,s,parseInt(e,10))}if(i===h)return l.WapJid.createFbJid(r,s);const c=i===_?l.DomainType.LID:l.DomainType.WHATSAPP;return null!=s&&0!==s?l.WapJid.createJidU(r,c,s):l.WapJid.create(r,i)}function X(e){return"s.whatsapp.net"===e?T:"g.us"===e?j:"newsletter"===e?P:(0,i.default)(e)}t.wap=D},3486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WapJid=t.WAP_JID_SUBTYPE=t.DomainType=void 0;var r=n(4037);const i={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4};t.WAP_JID_SUBTYPE=i;const o=n(4302)({WHATSAPP:0,LID:1});t.DomainType=o;class s{constructor(e){this._jid=e}static createAD(e,t,n){return new s({type:i.JID_AD,user:e,device:null==n?0:n,agent:null==t?0:t,domainType:o.WHATSAPP})}static createJidU(e,t,n){return new s({type:i.JID_U,user:e,device:null==n?0:n,domainType:null==t?o.WHATSAPP:t})}static createFbJid(e,t){return new s({type:i.JID_FB,user:e,device:null==t?0:t})}static createInteropJid(e,t,n){return new s({type:i.JID_INTEROP,user:e,device:null==t?0:t,integrator:n})}static create(e,t){return new s({type:i.JID,user:e,server:t})}toString(){if(this._jid.type===i.JID_AD||this._jid.type===i.JID_U){const{user:e,device:t,domainType:n}=this._jid,i=n===o.WHATSAPP?r.WA_USER_JID_SUFFIX:r.LID_SUFFIX;return 0===t?`${e}@${i}`:`${e}:${t}@${i}`}if(this._jid.type===i.JID_FB){const{user:e,device:t}=this._jid;return`${e}:${t}@${r.MSGR_USER_JID_SUFFIX}`}if(this._jid.type===i.JID_INTEROP){const{user:e,device:t,integrator:n}=this._jid;return`${n}-${e}:${t}@${r.INTEROP_USER_JID_SUFFIX}`}{this._jid.type;const{user:e,server:t}=this._jid;return null!=e?`${e}@${t}`:t}}getInnerJid(){return this._jid}}t.WapJid=s},8748:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WapParser=void 0;var i=r(n(2065)),o=n(6581);t.WapParser=class{constructor(e,t){this._name=e,this._parser=t}parse(e){const t=new o.ParsableWapNode(this._name,e);try{return{success:this._parser(t)}}catch(e){if(e instanceof o.XmppParsingFailure)return{error:e};throw e}}parseOrThrow(e){const t=this.parse(e);if(t.error)throw(0,i.default)(String(t.error));return t.success}}},3417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toStanzaId=function(e){return e}},8397:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.expand=c,t.extractAndExpand=function(e,t,n){return(0,o.extractSha256)(null,e).then((e=>c(new Uint8Array(e),t,n)))},t.extractWithSaltAndExpand=function(e,t,n,r){return(0,o.extractSha256)(t,e).then((e=>c(new Uint8Array(e),n,r)))};var i=n(9323),o=n(3155),s=r(n(2065));const a=255*o.SHA256_BYTE_LENGTH;function c(e,t,n){if(n<0||n>a)return Promise.reject((0,s.default)(`HKDF::expand given bad length ${n}`));let r;const c=Math.ceil(n/o.SHA256_BYTE_LENGTH),u=i.Binary.build(t).readByteArray(),l=new i.Binary;let d=(0,o.encodeKeySha256)(e).then((e=>(r=e,new Uint8Array(0))));for(let e=1;e<=c;e++)d=d.then((t=>(0,o.sign)(r,i.Binary.build(t,u,e).readByteArray()))).then((e=>{const t=new Uint8Array(e);return l.writeByteArray(t),t}));return d.then((()=>l.readBuffer(n)))}},3155:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA256_BYTE_LENGTH=t.DEFAULT_SALT=void 0,t.encodeKeySha256=function(e){return c(o,e)},t.extractSha256=function(e,t){return c(o,null!=e?e:i).then((e=>u(e,t)))},t.hmacSha1=function(e,t,n){return c(a,e).then((e=>u(e,t,n)))},t.hmacSha256=function(e,t,n){return c(o,e).then((e=>u(e,t,n)))},t.hmacSha512=function(e,t,n){return c(s,e).then((e=>u(e,t,n)))},t.sign=u;var r=n(29);t.SHA256_BYTE_LENGTH=32;const i=new Uint8Array(32);t.DEFAULT_SALT=i;const o={name:"HMAC",hash:"SHA-256"},s={name:"HMAC",hash:"SHA-512"},a={name:"HMAC",hash:"SHA-1"};function c(e,t){const n=(0,r.castTypedArrays)(Uint8Array,t);return self.crypto.subtle.importKey("raw",n,e,!1,["sign"]).then((t=>({key:t,algo:e})))}function u(e,t,n){let{key:r,algo:i}=e;return self.crypto.subtle.sign(i,r,t).then((e=>null!=n&&0!==n?e.slice(0,n):e))}},3596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hash",{enumerable:!0,get:function(){return r.hash}}),t.lowlevel=t.keypairFromSecretKey=t.keyPair=void 0,Object.defineProperty(t,"scalarMult",{enumerable:!0,get:function(){return r.scalarMult}}),t.signDetachedVerify=void 0,Object.defineProperty(t,"verify",{enumerable:!0,get:function(){return r.verify}});var r=n(4462);const i={scalarbase:r.lowlevel.scalarbase,crypto_hash:r.lowlevel.crypto_hash,modL:r.lowlevel.modL,pack25519:r.lowlevel.pack25519,S:r.lowlevel.S,M:r.lowlevel.M,A:r.lowlevel.A,Z:r.lowlevel.Z,D:r.lowlevel.D,unpack25519:r.lowlevel.unpack25519,pow2523:r.lowlevel.pow2523,crypto_verify_32:r.lowlevel.crypto_verify_32,set25519:r.lowlevel.set25519,add:r.lowlevel.add,scalarmult:r.lowlevel.scalarmult};t.lowlevel=i;const o=r.box.keyPair.fromSecretKey;t.keypairFromSecretKey=o;const s=r.box.keyPair;t.keyPair=s;const a=r.sign.detached.verify;t.signDetachedVerify=a},9093:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.arrayBuffersEqual=function(e,t){return s(new Uint8Array(e),new Uint8Array(t))},t.randomNumberLessThan=function(e){if(e!==(0|e))throw(0,o.default)("bound must be int32");if(e<=0)throw(0,o.default)("bound must not be positive");const t=new Int32Array(1),n=e*Math.floor((-1>>>1)/e);let r=-1;for(;-1===r;){self.crypto.getRandomValues(t);const i=t[0]>>>1;i<n&&(r=i%e)}return r},t.rawKeysEqual=function(e,t){return 0===e.length&&0===t.length||(0,i.verify)(e,t)},t.serializedPubKeysEqual=function(e,t){return 0===e.length&&0===t.length||(0,i.verify)(e,t)},t.uint8ArraysEqual=s;var i=n(3596),o=r(n(2065));function s(e,t){return 0===e.length&&0===t.length||(0,i.verify)(e,t)}},479:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.SignedPreKeyRecordStructureSpec=t.SessionStructureSpec=t.SessionStructure$PendingPreKeySpec=t.SessionStructure$PendingKeyExchangeSpec=t.SessionStructure$ChainSpec=t.SessionStructure$Chain$MessageKeySpec=t.SessionStructure$Chain$ChainKeySpec=t.SenderKeyStateStructureSpec=t.SenderKeyStateStructure$SenderSigningKeySpec=t.SenderKeyStateStructure$SenderMessageKeySpec=t.SenderKeyStateStructure$SenderChainKeySpec=t.SenderKeyRecordStructureSpec=t.RecordStructureSpec=t.PreKeyRecordStructureSpec=t.IdentityKeyPairStructureSpec=void 0;var i=r(n(3982)),o=n(6154);const s=(0,i.default)({},null);t.SessionStructureSpec=s;const a=(0,i.default)({},null);t.SessionStructure$PendingPreKeySpec=a;const c=(0,i.default)({},null);t.SessionStructure$PendingKeyExchangeSpec=c;const u=(0,i.default)({},null);t.SessionStructure$ChainSpec=u;const l=(0,i.default)({},null);t.SessionStructure$Chain$MessageKeySpec=l;const d=(0,i.default)({},null);t.SessionStructure$Chain$ChainKeySpec=d;const f=(0,i.default)({},null);t.RecordStructureSpec=f;const h=(0,i.default)({},null);t.PreKeyRecordStructureSpec=h;const p=(0,i.default)({},null);t.SignedPreKeyRecordStructureSpec=p;const _=(0,i.default)({},null);t.IdentityKeyPairStructureSpec=_;const v=(0,i.default)({},null);t.SenderKeyStateStructureSpec=v;const y=(0,i.default)({},null);t.SenderKeyStateStructure$SenderSigningKeySpec=y;const g=(0,i.default)({},null);t.SenderKeyStateStructure$SenderMessageKeySpec=g;const m=(0,i.default)({},null);t.SenderKeyStateStructure$SenderChainKeySpec=m;const b=(0,i.default)({},null);t.SenderKeyRecordStructureSpec=b,s.internalSpec={sessionVersion:[1,o.TYPES.UINT32],localIdentityPublic:[2,o.TYPES.BYTES],remoteIdentityPublic:[3,o.TYPES.BYTES],rootKey:[4,o.TYPES.BYTES],previousCounter:[5,o.TYPES.UINT32],senderChain:[6,o.TYPES.MESSAGE,u],receiverChains:[7,o.FLAGS.REPEATED|o.TYPES.MESSAGE,u],pendingKeyExchange:[8,o.TYPES.MESSAGE,c],pendingPreKey:[9,o.TYPES.MESSAGE,a],remoteRegistrationId:[10,o.TYPES.UINT32],localRegistrationId:[11,o.TYPES.UINT32],needsRefresh:[12,o.TYPES.BOOL],aliceBaseKey:[13,o.TYPES.BYTES]},a.internalSpec={preKeyId:[1,o.TYPES.UINT32],signedPreKeyId:[3,o.TYPES.INT32],baseKey:[2,o.TYPES.BYTES]},c.internalSpec={sequence:[1,o.TYPES.UINT32],localBaseKey:[2,o.TYPES.BYTES],localBaseKeyPrivate:[3,o.TYPES.BYTES],localRatchetKey:[4,o.TYPES.BYTES],localRatchetKeyPrivate:[5,o.TYPES.BYTES],localIdentityKey:[7,o.TYPES.BYTES],localIdentityKeyPrivate:[8,o.TYPES.BYTES]},u.internalSpec={senderRatchetKey:[1,o.TYPES.BYTES],senderRatchetKeyPrivate:[2,o.TYPES.BYTES],chainKey:[3,o.TYPES.MESSAGE,d],messageKeys:[4,o.FLAGS.REPEATED|o.TYPES.MESSAGE,l]},l.internalSpec={index:[1,o.TYPES.UINT32],cipherKey:[2,o.TYPES.BYTES],macKey:[3,o.TYPES.BYTES],iv:[4,o.TYPES.BYTES]},d.internalSpec={index:[1,o.TYPES.UINT32],key:[2,o.TYPES.BYTES]},f.internalSpec={currentSession:[1,o.TYPES.MESSAGE,s],previousSessions:[2,o.FLAGS.REPEATED|o.TYPES.MESSAGE,s]},h.internalSpec={id:[1,o.TYPES.UINT32],publicKey:[2,o.TYPES.BYTES],privateKey:[3,o.TYPES.BYTES]},p.internalSpec={id:[1,o.TYPES.UINT32],publicKey:[2,o.TYPES.BYTES],privateKey:[3,o.TYPES.BYTES],signature:[4,o.TYPES.BYTES],timestamp:[5,o.TYPES.FIXED64]},_.internalSpec={publicKey:[1,o.TYPES.BYTES],privateKey:[2,o.TYPES.BYTES]},v.internalSpec={senderKeyId:[1,o.TYPES.UINT32],senderChainKey:[2,o.TYPES.MESSAGE,m],senderSigningKey:[3,o.TYPES.MESSAGE,y],senderMessageKeys:[4,o.FLAGS.REPEATED|o.TYPES.MESSAGE,g]},y.internalSpec={public:[1,o.TYPES.BYTES],private:[2,o.TYPES.BYTES]},g.internalSpec={iteration:[1,o.TYPES.UINT32],seed:[2,o.TYPES.BYTES]},m.internalSpec={iteration:[1,o.TYPES.UINT32],seed:[2,o.TYPES.BYTES]},b.internalSpec={senderKeyStates:[1,o.FLAGS.REPEATED|o.TYPES.MESSAGE,v]}},2560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=t.ABORT_ERROR=void 0,t.catchAbort=function(e){return t=>{if(t.name===o)return e(t);throw t}};var r=n(6911);class i extends((0,r.customError)("AbortError")){}t.AbortError=i;const o="AbortError";t.ABORT_ERROR=o},9959:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.createPromiseTimer=function(e){const t=o(e);return function(e){return new Promise((n=>{const r=t();r>0?setTimeout(n,r,e):n(e)}))}},t.createTimer=o,t.getDelay=function(e,t){if(0===e)return 0;const n=a(t.algo);for(let t=1;t<e;t++)n();return s(t,n())};var i=r(n(2065));function o(e){const{relativeDelay:t=!1}=e;let n=null;const r=a(e.algo);return function(){const i=n;if(null==i)return n=t?Date.now():0,0;let o=s(e,r());if(t){const e=Date.now(),t=e-i;t>0&&(o=Math.max(0,o-t)),n=e}return o}}function s(e,t){let{max:n,min:r,jitter:i=.1}=e,o=t;return null!=n&&o>n&&(o=n),null!=r&&o<r&&(o=r),0!==i&&(o=Math.ceil(o*(1+i*Math.random()))),o}function a(e){switch(e.type){case"fibonacci":return function(e){let t=e.second-e.first,n=e.first-t;return function(){const e=t+n;return n=t,t=e,e}}(e);case"exponential":return function(e){const{base:t=2}=e;let n=e.first;return function(){const e=n;return n*=t,e}}(e);case"constant":return function(e){const t=e.delay;return function(){return t}}(e);case"adjust":return function(e){const{toMs:t,backoff:n}=e,r=a(n);return function(){return t(r())}}(e);default:throw(0,i.default)(`makeTimeFunc unrecognized backoff ${e.type}`)}}},5068:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayMs=function(e,t){return new Promise(((n,i)=>{if(null==t?void 0:t.aborted)throw new r.AbortError;const o=setTimeout((function(){null==t||t.removeEventListener("abort",s),n()}),e);function s(){null==t||t.removeEventListener("abort",s),clearTimeout(o),i(new r.AbortError)}null==t||t.addEventListener("abort",s)}))},t.withTimeout=function(e,t,n){return new Promise(((r,i)=>{const o=setTimeout((()=>{try{r(n())}catch(e){i(e)}}),t);e.then((e=>{clearTimeout(o),r(e)}),(e=>{clearTimeout(o),i(e)}))}))};var r=n(2560)},2521:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseRetryLoop=void 0;var i=r(n(2065)),o=n(9959),s=n(5068),a=n(1630);t.PromiseRetryLoop=class{constructor(e){this._resolvable=new a.Resolvable,this._promise=null,this._resetTime=null,this._currentLoopIdentificator=0,this.endWithValue=e=>{this._currentLoopIdentificator++,this._resolvable.resolve(e)},this._options=e}resetTimeoutAfter(e){this._resetTime=Date.now()+e}cancelReset(){this._resetTime=null}reset(){this._resolvable.resolveWasCalled()||(__LOG__(2)`PromiseRetryLoop: resetting ${this._options.name}`,this._currentLoopIdentificator++,this._runLoop())}start(){this._resolvable.resolveWasCalled()||(__LOG__(2)`PromiseRetryLoop: starting ${this._options.name}`,0!==this._currentLoopIdentificator&&__LOG__(4,void 0,new Error)`PromiseRetryLoop was called several times. You may have race conditions`,this._currentLoopIdentificator++,this._runLoop())}_runLoop(){const e=this._options,t=this._currentLoopIdentificator;let n=(0,o.createTimer)(this._options.timer);n();const r=()=>{if(this._resolvable.resolveWasCalled())return;if(t!==this._currentLoopIdentificator)return;const i=Date.now();return this._promise=(0,e.code)(this.endWithValue).then((()=>{if(this._resolvable.resolveWasCalled())return;const{resetDelay:t}=e;(void 0!==t&&Date.now()>=i+t||null!=this._resetTime&&this._resetTime<=Date.now())&&(__LOG__(2)`PromiseRetryLoop: resetting ${e.name}`,n=(0,o.createTimer)(this._options.timer)),this._resetTime=null;const a=n();return __LOG__(2)`PromiseRetryLoop: retrying ${e.name} in ${a}ms`,(0,s.delayMs)(a).then(r)})),this._promise};this._promise=Promise.resolve().then(r)}promise(){return this._resolvable.resolveWasCalled()?this._resolvable.promise:this._promise?Promise.race([this._resolvable.promise,this._promise.then((()=>this._resolvable.promise))]):Promise.reject((0,i.default)(`PromiseRetryLoop ${this._options.name} had promise() called before start()`))}}},1630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resolvable=void 0;t.Resolvable=class{constructor(){this._resolve=()=>{},this._isResolved=!1,this.promise=new Promise((e=>{this._resolve=e}))}resolve(e){this._isResolved=!0,this._resolve(e)}reject(e){this.resolve(Promise.reject(e))}resolveWasCalled(){return this._isResolved}}},9069:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.loadStackPromisePolyfill=function(){function e(e){this.message=e,this.stack=(0,i.default)(e||this.name).stack}Promise.prototype.cancellable=function(){return console.info("StackPromise.cancellable noop"),this},Promise.prototype.cancel=function(){return console.info("StackPromise.cancel noop"),this},e.prototype=Object.create(Error.prototype,{name:{value:"AbortError"}}),Promise.CancellationError=e};var i=r(n(2065))},717:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_TYPE=void 0,t.castToPreKeyId=_,t.castToSerializedPubKey=v,t.castToSignedPreKeyId=function(e){return(0,a.ensureIntInRange)(e,0,u)},t.deserializePreKey=function(e){try{const{id:t,publicKey:n,privateKey:r}=(0,c.decodeProtobuf)(s.PreKeyRecordStructureSpec,e);return null==t||null==n||null==r?null:{id:_(t),keyPair:f((0,a.toBytes)(r,32),v(new Uint8Array(n)))}}catch(e){return null}},t.ecdh=function(e,t){return(0,i.scalarMult)(e,t.subarray(1)).buffer},t.makeKeyPair=d,t.makeKeyPairFrom=function(e){const{publicKey:t,secretKey:n}=(0,i.keypairFromSecretKey)(e);return l((0,a.ensureSize)(t,32),(0,a.ensureSize)(n,32))},t.makeKeyPairFromArrayBuffers=function(e,t){return{publicKey:(0,a.toBytes)(e,32),privateKey:(0,a.toBytes)(t,32)}},t.makeKeyPairFromSerialized=f,t.makePreKeys=function(e,t){let n=(e-1)%u;n<=0&&(n+=u);const r=[];for(let e=0;e<t;e++){const e=n===u?1:n+1,t=d(),i=(0,a.encodeSignalProto)(s.PreKeyRecordStructureSpec,{id:e,publicKey:p(t),privateKey:t.privateKey});r.push({plainObject:{id:e,keyPair:t},record:i}),n=e}return r},t.makeRawSenderKey=function(){const e=(0,a.makeBytes)(32);return self.crypto.getRandomValues(e),e},t.makeSerializedKeyPair=function(){const e=d();return h(e.privateKey,p(e))},t.makeSerializedKeyPairFrom=h,t.serializeIdentity=function(e){const t=(0,a.makeBytes)(33);return t[0]=5,t.set((0,a.ensureSize)(e,32),1),t},t.serializePubKey=p,t.toSerializedKeyPair=function(e){return h(e.privateKey,p(e))};var i=n(3596),o=r(n(2065)),s=n(479),a=n(1879),c=n(3955);t.KEY_TYPE=5;const u=16777215;function l(e,t){return{publicKey:e,privateKey:t}}function d(){const{publicKey:e,secretKey:t}=(0,i.keyPair)();return t[0]&=248,t[31]=64|63&t[31],l((0,a.ensureSize)(e,32),(0,a.ensureSize)(t,32))}function f(e,t){return l((0,a.sliceBytes)(t,1,32),e)}function h(e,t){return{serializedPubKey:t,privateKey:e}}function p(e){const t=(0,a.makeBytes)(33);return t[0]=5,t.set(e.publicKey,1),t}function _(e){return(0,a.ensureIntInRange)(e,1,u)}function v(e){if(0===e.length||5!==e[0])throw(0,o.default)("Unrecognized public key type");return(0,a.ensureSize)(e,33)}},1879:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.HMAC_SHA256=t.AES_CBC=void 0,t.areSessionHashesEqual=function(e,t){return(0,o.arrayBuffersEqual)(e,t)},t.castRegistrationId=function(e){return f(e)},t.castSenderKeyId=function(e){return f(e)},t.castToByteEncoded=function(e){return e},t.castToSessionHash=function(e){return e},t.decodeSignalProto=function(e,t,n){return n((0,a.decodeProtobuf)(e,t))},t.encodeSignalProto=function(e,t){return(0,c.encodeProtobuf)(e,t).readByteArray()},t.ensureIntInRange=f,t.ensureSize=d,t.hkdf=function(e,t,n,r){return(0,i.extractWithSaltAndExpand)(e,t,n,r).then((e=>new Uint8Array(e)))},t.makeBytes=function(e){return new Uint8Array(e)},t.makeCryptoKey=function(e,t){let n,r;"hmac-sha256"===t?(n=l,r=["sign"]):(n=u,r=["encrypt","decrypt"]);return self.crypto.subtle.importKey("raw",e,n,!1,r)},t.makeRegistrationId=function(e){const t="extendedRange"===e?2147483646:16380;return(0,o.randomNumberLessThan)(t)+1},t.makeSenderKeyId=function(){return(0,o.randomNumberLessThan)(-1>>>1)+1},t.readBytes=function(e,t){return e.readByteArray(t)},t.sliceBytes=function(e,t,n){if(e.length-t<n)throw(0,s.default)(`Can not split off ${n} bytes from index ${t} of ${e.length} bytes`);return e.slice(t,t+n)},t.toBuffer=function(e){const t=e.buffer,n=e.byteOffset,r=e.length;return 0===n&&r===t.byteLength?t:t.slice(n,n+r)},t.toBytes=function(e,t){return d(new Uint8Array(e),t)};var i=n(8397),o=n(9093),s=r(n(2065)),a=n(3955),c=n(4753);const u={name:"AES-CBC"};t.AES_CBC=u;const l={name:"HMAC",hash:"SHA-256"};function d(e,t){if(e.length!==t)throw(0,s.default)(`Signal expected ${t} bytes, given ${e.length}`);return e}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4294967296;if("number"==typeof e&&t<=e&&e<n&&Math.floor(e)===e)return e;throw(0,s.default)(`Expected integer in range [${t}, ${n}), given ${String(e)}`)}t.HMAC_SHA256=l},4080:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.arrayBufferMod=function(e,t){const n=new Uint8Array(e);if(t>8388607)throw(0,i.default)("Divisor is too big");let r=0;for(let e=0;e<n.length;++e)r=((r<<8)+n[e])%t;return r},t.arrayBufferToString=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},t.arrayBuffersEqualUNSAFE=function(e,t){const n=new Uint8Array(e),r=new Uint8Array(t);return o(n,r)},t.concatBuffers=function(e){const t=e.map((e=>new Uint8Array(e))),n=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(n);return t.reduce(((e,t)=>(r.set(t,e),e+t.byteLength)),0),r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)},t.largeStringToArrayBuffer=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e5;return new Promise((n=>{const r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);let s=0;setTimeout((function a(){const c=Math.min(s+t,r);for(;s<c;)o[s]=e.charCodeAt(s),s++;if(s===r)return void n(i);setTimeout(a,16)}),0)}))},t.stringToArrayBuffer=function(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);let r,i;for(r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n.buffer},t.uint8ArraysEqualUNSAFE=o;var i=r(n(2065));function o(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n!==e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}},3558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeIndexWithoutPreservingOrder=function(e,t){const n=e.pop();t<e.length&&(e[t]=n)}},7537:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){throw(0,i.default)(`Impossible value, the default statement should never be reached for value: ${e}`)};var i=r(n(2065))},2089:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.BASE64_DATA_URL_SCHEME=void 0,t.decodeB64=function(e){const t=u(e,43,47,61);if(t)return t.buffer;throw(0,i.default)("Base64.decode given invalid string")},t.decodeB64ToJsArray=function(e){const t=e instanceof ArrayBuffer?new Uint8Array(e):u(e,43,47,61);return t&&Array.from(t)},t.decodeB64UrlSafe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=u(e,45,95,t?61:-1);if(n)return n.buffer;throw(0,i.default)("Base64.decode given invalid string")},t.encodeB64=s,t.encodeB64UrlSafe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(e,45,95,t)},t.isBase64=void 0,t.randomBase64=function(e){const t=new Uint8Array(e);return self.crypto.getRandomValues(t),s(t)},t.sizeWhenB64Decoded=function(e){return Math.floor(3*e.length/4)};var i=r(n(2065));const o=3e3;t.BASE64_DATA_URL_SCHEME="data:image/jpeg;base64,";function s(e){return a(e,43,47,!0)}function a(e,t,n,r){const i=Array.isArray(e)||e instanceof ArrayBuffer?new Uint8Array(e):e;if(i.length<=o)return c(i,t,n,r);{const e=[];for(let s=0;s<i.length;s+=o)e.push(c(i.subarray(s,s+o),t,n,r));return e.join("")}}function c(e,t,n,r){const i=Math.ceil(4*e.length/3),o=4*Math.ceil(e.length/3),s=new Array(o);for(let t=0,n=0;t<o;t+=4,n+=3){const r=e[n]<<16|e[n+1]<<8|e[n+2];s[t]=r>>18,s[t+1]=r>>12&63,s[t+2]=r>>6&63,s[t+3]=63&r}for(let e=0;e<i;e++){const r=s[e];s[e]=r<26?65+r:r<52?71+r:r<62?r-4:62===r?t:n}for(let e=i;e<o;e++)s[e]=61;const a=String.fromCharCode.apply(String,s);return r?a:a.substring(0,i)}function u(e,t,n,r){let i=e.length;const o=new Int32Array(i+i%4);for(let s=0;s<i;s++){const a=e.charCodeAt(s);if(65<=a&&a<=90)o[s]=a-65;else if(97<=a&&a<=122)o[s]=a-71;else if(48<=a&&a<=57)o[s]=a+4;else if(a===t)o[s]=62;else{if(a!==n){if(a===r){i=s;break}return null!=self.ERROR&&__LOG__(4,void 0,new Error)`Found unexpected character code while decoding B64 at index ${s}, length ${i}: ${a}`,null}o[s]=63}}const s=o.length/4;for(let e=0,t=0;e<s;e++,t+=4)o[e]=o[t]<<18|o[t+1]<<12|o[t+2]<<6|o[t+3];const a=Math.floor(3*i/4),c=new Uint8Array(a);let u=0,l=0;for(;l+3<=a;u++,l+=3){const e=o[u];c[l]=e>>16,c[l+1]=e>>8&255,c[l+2]=255&e}switch(a-l){case 2:c[l]=o[u]>>16,c[l+1]=o[u]>>8&255;break;case 1:c[l]=o[u]>>16}return c}t.isBase64=e=>"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},9323:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.Binary=void 0,t.longFitsInDouble=h,t.numUtf8Bytes=f,t.parseInt64OrThrow=z,t.parseUint64OrThrow=Y;var i=r(n(2065)),o=n(5982);const s=65533,a=new Uint8Array(10),c=new Uint8Array(0);class u{constructor(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._buffer=new Uint8Array(0),this._readEndIndex=0,this._writeIndex=0,this.write=function(){for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];"string"==typeof n?e.writeString(n):"number"==typeof n?e.writeUint8(n):n instanceof u?e.writeBinary(n):n instanceof ArrayBuffer?e.writeBuffer(n):n instanceof Uint8Array&&e.writeByteArray(n)}},t instanceof ArrayBuffer?(this._buffer=new Uint8Array(t),this._readEndIndex=this._writeIndex=t.byteLength):t instanceof Uint8Array&&(this._buffer=t,this._readEndIndex=this._writeIndex=t.length),this._bytesTrashed=0,this._earliestIndex=this._readIndex=0,this._view=null,this._littleEndian=n,this._hiddenReads=0,this._hiddenWrites=0}size(){return this._readEndIndex-this._readIndex}peek(e,t){this._hiddenReads++;const n=this._readIndex,r=this._bytesTrashed;try{return e(this,t)}finally{this._hiddenReads--,this._readIndex=n-(this._bytesTrashed-r)}}advance(e){this._shiftReadOrThrow(e)}readWithViewParser(e,t,n,r){return t(this._getView(),this._shiftReadOrThrow(e),e,n,r)}readWithBytesParser(e,t,n,r){return t(this._buffer,this._shiftReadOrThrow(e),e,n,r)}readUint8(){return p(this,1,v,!1)}readInt8(){return p(this,1,v,!0)}readUint16(){return p(this,2,y,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readInt32(){return p(this,4,g,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readUint32(){return p(this,4,m,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readInt64(){return p(this,8,b,z,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readUint64(){return p(this,8,b,Y,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readLong(e){return p(this,8,b,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}readFloat32(){return p(this,4,w,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readFloat64(){return p(this,8,S,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian)}readVarInt(e){const t=_(this,0,E,this.size());return _(this,t,A,e)}readBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size();return 0===e?new ArrayBuffer(0):_(this,e,j)}readByteArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size();return 0===e?new Uint8Array(0):_(this,e,T)}readBinary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;if(0===e)return new u(void 0,t);const n=_(this,e,T);return new u(n,t)}indexOf(e){if(0===e.length)return 0;const t=this._buffer,n=this._readEndIndex,r=this._readIndex;let i=0,o=r;for(let s=r;s<n;s++)if(t[s]===e[i]){if(0===i&&(o=s),i++,i===e.byteLength)return s-r-e.byteLength+1}else i>0&&(i=0,s=o);return-1}readString(e){return _(this,e,I)}ensureCapacity(e){this._maybeReallocate(this._readIndex+e)}ensureAdditionalCapacity(e){this._maybeReallocate(this._writeIndex+e)}writeToView(e,t,n,r){const i=this._shiftWriteMaybeReallocate(e);return t(this._getView(),i,e,n,r)}writeToBytes(e,t,n,r){const i=this._shiftWriteMaybeReallocate(e);return t(this._buffer,i,e,n,r)}writeUint8(e){K(e,0,256,"uint8"),k(this,1,O,e,!1)}writeInt8(e){K(e,-128,128,"signed int8"),k(this,1,O,e,!0)}writeUint16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;K(e,0,65536,"uint16"),P(this,2,x,e,t)}writeInt16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;K(e,-32768,32768,"signed int16"),P(this,2,U,e,t)}writeUint32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;K(e,0,4294967296,"uint32"),P(this,4,D,e,t)}writeInt32(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;K(e,-2147483648,2147483648,"signed int32"),P(this,4,R,e,t)}writeUint64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;K(e,0,0x10000000000000000,"uint64"),P(this,8,C,e,t)}writeInt64(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;K(e,-0x8000000000000000,0x8000000000000000,"signed int64"),P(this,8,C,e,t)}writeFloat32(e){P(this,4,M,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}writeFloat64(e){P(this,8,$,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}writeVarInt(e){K(e,-0x8000000000000000,0x8000000000000000,"varint (signed int64)");const t=e<0,n=t?-e:e;let r=Math.floor(n/4294967296),i=n-4294967296*r;t&&(r=~r,0===i?r++:i=-i);k(this,F(r,i),L,r,i)}writeVarIntFromHexLong(e){const t=(0,o.hexLongIsNegative)(e),n=t?(0,o.negateHexLong)(e):e,r=(0,o.hexLongToHex)(n);let i=0,s=0;for(let e=0;e<o.NUM_HEX_IN_LONG;e++)i=i<<4|s>>>28,s=s<<4|(0,o.hexAt)(r,e);t&&(i=~i,0===s?i++:s=-s);k(this,F(i,s),L,i,s)}writeBinary(e){const t=e.peek((e=>e.readByteArray()));if(t.length){const e=this._shiftWriteMaybeReallocate(t.length);this._buffer.set(t,e)}}writeBuffer(e){this.writeByteArray(new Uint8Array(e))}writeByteArray(e){const t=this._shiftWriteMaybeReallocate(e.length);this._buffer.set(e,t)}writeBufferView(e){this.writeByteArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}writeString(e){k(this,f(e),J,e)}writeHexLong(e){P(this,8,N,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian)}writeBytes(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e=0;e<t.length;e++)K(t[e],0,256,"byte");k(this,t.length,B,t)}writeAtomically(e,t){this._hiddenWrites++;let n=this._writeIndex,r=this._bytesTrashed;try{const i=e(this,t);return n=this._writeIndex,r=this._bytesTrashed,i}finally{this._hiddenWrites--,this._writeIndex=n-(this._bytesTrashed-r)}}writeWithVarIntLength(e,t){const n=this._writeIndex,r=this.writeAtomically(e,t),i=this._writeIndex;this.writeVarInt(i-n);const o=this._writeIndex-i,s=this._buffer;for(let e=0;e<o;e++)a[e]=s[i+e];for(let e=i-1;e>=n;e--)s[e+o]=s[e];for(let e=0;e<o;e++)s[n+e]=a[e];return r}static build(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0;for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n?r+=f(n):"number"==typeof n?r++:n instanceof u?r+=n.size():n instanceof ArrayBuffer?r+=n.byteLength:n instanceof Uint8Array&&(r+=n.length)}const i=new u;return i.ensureCapacity(r),i.write.apply(i,arguments),i}_getView(){return this._view||(this._view=new DataView(this._buffer.buffer,this._buffer.byteOffset))}_shiftReadOrThrow(e){if(e<0)throw(0,i.default)("ReadError: given negative number of bytes to read");const t=this._readIndex,n=t+e;if(n>this._readEndIndex)throw(0,i.default)(t===this._readEndIndex?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");return this._readIndex=n,this._hiddenReads||(this._earliestIndex=n),t}_maybeReallocate(e){const t=this._buffer;if(e<=t.length)return e;{const n=this._earliestIndex,r=e-n,i=Math.max(r,2*(t.length-n),64),o=new Uint8Array(i);return n?(o.set(t.subarray(n)),this._bytesTrashed+=n,this._readIndex-=n,this._readEndIndex-=n,this._writeIndex-=n,this._earliestIndex=0):o.set(t),this._buffer=o,this._view=null,r}}_shiftWriteMaybeReallocate(e){const t=this._maybeReallocate(this._writeIndex+e),n=this._writeIndex;return this._writeIndex=t,this._hiddenWrites||(this._readEndIndex=t),n}}t.Binary=u;let l="",d=0;function f(e){if(e===l)return d;const t=e.length;let n=0;for(let r=0;r<t;r++){const i=e.charCodeAt(r);if(i<128)n++;else if(i<2048)n+=2;else if(i<55296||57344<=i&&i<=65535)n+=3;else if(55296<=i&&i<56320&&r+1!==t){const t=e.charCodeAt(r+1);56320<=t&&t<57344?(r++,n+=4):n+=3}else n+=3}return l=e,d=n}function h(e,t,n){const r=t>>21;if(e){const e=Boolean(2097151&t||n);return 0===r||-1===r&&e}return 0===r}function p(e,t,n,r,i){return e.readWithViewParser(t,n,r,i)}function _(e,t,n,r,i){return e.readWithBytesParser(t,n,r,i)}function v(e,t,n,r){return r?e.getInt8(t):e.getUint8(t)}function y(e,t,n,r){return e.getUint16(t,r)}function g(e,t,n,r){return e.getInt32(t,r)}function m(e,t,n,r){return e.getUint32(t,r)}function b(e,t,n,r,i){return r(e.getInt32(i?t+4:t,i),e.getInt32(i?t:t+4,i))}function w(e,t,n,r){return e.getFloat32(t,r)}function S(e,t,n,r){return e.getFloat64(t,r)}function E(e,t,n,r){const o=Math.min(r,10);let s=0,a=128;for(;s<o&&128&a;)a=e[t+s++];if(10===s&&a>1)throw(0,i.default)("ParseError: varint exceeds 64 bits");return 128&a?s+1:s}function A(e,t,n,r){let i=0,o=0,s=n;10===n&&(s--,o=1&e[t+s]);for(let n=s-1;n>=0;n--)i=i<<7|o>>>25,o=o<<7|127&e[t+n];return r(i,o)}function j(e,t,n){const r=t+e.byteOffset,i=e.buffer;return 0===r&&n===i.byteLength?i:i.slice(r,r+n)}function T(e,t,n){return e.subarray(t,t+n)}function I(e,t,n){const r=t+n;let i=[],o=null;for(let n=t;n<r;n++){i.length>5e3&&(o||(o=[]),o.push(String.fromCharCode.apply(String,i)),i=[]);const t=0|e[n];if(0==(128&t))i.push(t);else if(192==(224&t)){const o=G(e,n+1,r);if(o){n++;const e=(31&t)<<6|63&o;e>=128?i.push(e):i.push(s)}else i.push(s)}else if(224==(240&t)){const o=G(e,n+1,r),a=G(e,n+2,r);if(o&&a){n+=2;const e=(15&t)<<12|(63&o)<<6|63&a;e>=2048&&!(55296<=e&&e<57344)?i.push(e):i.push(s)}else o?(n++,i.push(s)):i.push(s)}else if(240==(248&t)){const o=G(e,n+1,r),a=G(e,n+2,r),c=G(e,n+3,r);if(o&&a&&c){n+=3;const e=(7&t)<<18|(63&o)<<12|(63&a)<<6|63&c;if(e>=65536&&e<=1114111){const t=e-65536;i.push(55296|t>>10,56320|1023&t)}else i.push(s)}else o&&a?(n+=2,i.push(s)):o?(n++,i.push(s)):i.push(s)}else i.push(s)}const a=String.fromCharCode.apply(String,i);return o?(o.push(a),o.join("")):a}function P(e,t,n,r,i){return e.writeToView(t,n,r,i)}function k(e,t,n,r,i){return e.writeToBytes(t,n,r,i)}function O(e,t,n,r){e[t]=r}function x(e,t,n,r,i){e.setUint16(t,r,i)}function U(e,t,n,r,i){e.setInt16(t,r,i)}function D(e,t,n,r,i){e.setUint32(t,r,i)}function R(e,t,n,r,i){e.setInt32(t,r,i)}function C(e,t,n,r,i){const o=r<0,s=o?-r:r;let a=Math.floor(s/4294967296),c=s-4294967296*a;o&&(a=~a,0===c?a++:c=-c),e.setUint32(i?t+4:t,a,i),e.setUint32(i?t:t+4,c,i)}function M(e,t,n,r,i){e.setFloat32(t,r,i)}function $(e,t,n,r,i){e.setFloat64(t,r,i)}function L(e,t,n,r,i){let o=r,s=i;const a=t+n-1;for(let n=t;n<a;n++)e[n]=128|127&s,s=o<<25|s>>>7,o>>>=7;e[a]=s}function J(e,t,n,r){let i=t;const o=r.length;for(let t=0;t<o;t++){const n=r.charCodeAt(t);if(n<128)e[i++]=n;else if(n<2048)e[i++]=192|n>>6,e[i++]=128|63&n;else if(n<55296||57344<=n)e[i++]=224|n>>12,e[i++]=128|n>>6&63,e[i++]=128|63&n;else if(55296<=n&&n<56320&&t+1!==o){const o=r.charCodeAt(t+1);if(56320<=o&&o<57344){t++;const r=65536+((1023&n)<<10|1023&o);e[i++]=240|r>>18,e[i++]=128|r>>12&63,e[i++]=128|r>>6&63,e[i++]=128|63&r}else e[i++]=239,e[i++]=191,e[i++]=189}else e[i++]=239,e[i++]=191,e[i++]=189}}function N(e,t,n,r,i){const s=(0,o.hexLongIsNegative)(r),a=(0,o.hexLongToHex)(r);let c=0,u=0;for(let e=0;e<16;e++)c=c<<4|u>>>28,u=u<<4|(0,o.hexAt)(a,e);s&&(c=~c,0===u?c++:u=-u),e.setUint32(i?t+4:t,c,i),e.setUint32(i?t:t+4,u,i)}function B(e,t,n,r){for(let i=0;i<n;i++)e[t+i]=r[i]}function F(e,t){let n,r;for(e?(n=5,r=e>>>3):(n=1,r=t>>>7);r;)n++,r>>>=7;return n}function K(e,t,n,r){if("number"!=typeof e||e!=e||Math.floor(e)!==e||e<t||e>=n)throw(0,i.default)("string"==typeof e?`TyperError WriteError: string "${e}" is not a valid ${r}`:`TypeError WriteError: ${String(e)} is not a valid ${r}`)}function W(e,t,n){let r;r=t>=0||e?t:4294967296+t;const o=4294967296*r+(n>=0?n:4294967296+n);if(!h(e,t,n))throw(0,i.default)(`ReadError: integer exceeded 53 bits (${o})`);return o}function z(e,t){return W(!0,e,t)}function Y(e,t){return W(!1,e,t)}function G(e,t,n){if(t>=n)return 0;const r=0|e[t];return 128==(192&r)?r:0}},6911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedError=t.UnimplementedMethod=t.TimeoutError=t.HttpError=t.AggregateError=void 0,t.customError=r,t.hasSupressedQuotaExceededError=function(){return c},t.obtainErrorSummary=function(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))},t.supressQuotaExceededError=function(e){if(null==e||"QuotaExceededError"!==e.name)throw e;c=!0};const n=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;function i(n){const r=Error.call(this,n);this.message=n,r.name=e,this.name=e,t&&(this.stack=r.stack)}return i.prototype=Object.create(r?r.prototype:n),i.prototype.constructor=i,i}class i extends(r("AggregateError",!0)){constructor(e,t){super(null!=t&&t.length>0?t:function(e){return 0===e.length?"No errors":1===e.length?e[0].message:e.map((e=>"- "+e.message)).join("\n")}(e)),this.errors=e}}t.AggregateError=i;class o extends(r("TimeoutError",!1)){}t.TimeoutError=o;class s extends(r("HttpError",!1)){constructor(e,t){super(e),this.code=t}}t.HttpError=s;class a extends(r("UnimplementedMethod")){}t.UnimplementedMethod=a;let c=!1;class u extends Error{constructor(e,t){super(e),this.inner=t}}t.WrappedError=u},2924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=function e(t,n){if(t===n)return!0;if(!t||!n||"object"!=typeof t&&"object"!=typeof n)return!1;const r=Array.isArray(t),i=Array.isArray(n);if(r!==i)return!1;let o=!0;if(r){const r=t.length;if(r!==n.length)return!1;for(let i=0;o&&i<r;i++)o=e(t[i],n[i]);return o}const s=Object.keys(t);for(let r=0;o&&r<s.length;r++){const i=s[r];o=n.propertyIsEnumerable(i)&&e(t[i],n[i])}return o&&Object.keys(n).length===s.length}},2065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=new Error(e);if(void 0===t.stack)try{throw t}catch(e){}return t}},9028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},5982:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.NUM_HEX_IN_LONG=t.HEX_LOWER=void 0,t.bytesToBuffer=function(e){const t=e.buffer;return 0===e.byteOffset&&e.length===t.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.length)},t.bytesToDebugString=function(e){let t=!0,n=e.length;for(;t&&n;){const r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):a(e)},t.createHexLong=l,t.createHexLongFrom32Bits=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=_(e),i=_(t);return`${n?"-":""}0x${r}${i}`},t.hexAt=c,t.hexLongFromNumber=function(e){const t=e<0;return l(t?(-e).toString(16):e.toString(16),t)},t.hexLongIsNegative=h,t.hexLongToHex=f,t.hexOrThrow=u,t.isBiggerHexLong=function(e,t){const n=h(e),r=h(t);if(n!==r)return!n;const i=f(e)>f(t);return n?!i:i},t.negateHexLong=function(e){return h(e)?e.slice(1):"-"+e},t.parseHex=function(e){const t=u(e);if(t.length%2!=0)throw(0,i.default)(`parseHex given hex "${t}" which is not a multiple of 8-bits.`);const n=new Uint8Array(t.length>>1);for(let e=0,r=0;e<t.length;e+=2,r++)n[r]=c(t,e)<<4|c(t,e+1);return n.buffer},t.randomHex=function(e){const t=new Uint8Array(e);return self.crypto.getRandomValues(t),a(t)},t.toHex=a,t.toLowerCaseHex=function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(s[r>>4],s[15&r])}return String.fromCharCode.apply(String,t)};var i=r(n(2065));t.NUM_HEX_IN_LONG=16;const o=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],s=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function a(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(o[r>>4],o[15&r])}return String.fromCharCode.apply(String,t)}function c(e,t){const n=e.charCodeAt(t);return n<=57?n-48:n<=70?10+n-65:10+n-97}function u(e){if(/[^0-9a-fA-F]/.test(e))throw(0,i.default)(`"${e}" is not a valid hex`);return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=u(e);return p(n,16),`${t?"-":""}0x${d(n,16)}`}function d(e,t){const n=t-e.length;let r=e;for(let e=0;e<n;e++)r="0"+r;return r}function f(e){return e.substring(e.indexOf("0x")+2)}function h(e){return"-"===e[0]}function p(e,t){if(e.length>t)throw(0,i.default)(`"${e}" is longer than ${4*t} bits.`)}function _(e){if(e>4294967295||e<-4294967296)throw(0,i.default)("uint32ToLowerCaseHex given number over 32 bits");return d((e>=0?e:4294967296+e).toString(16),8)}t.HEX_LOWER=s},4037:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WA_USER_JID_SUFFIX=t.WA_USER_DOMAIN=t.WA_SERVER_JID_SUFFIX=t.WA_NEWSLETTER_JID_DOMAIN=t.SURVEY_USER_JID=t.STATUS_JID=t.PSA_JID=t.MSGR_USER_JID_SUFFIX=t.MSGR_USER_DOMAIN=t.LID_SUFFIX=t.LID_DOMAIN=t.INTEROP_USER_JID_SUFFIX=t.INTEROP_DOMAIN=t.DEFAULT_DEVICE_ID=t.AUTHOR_SYSTEM=t.AUTHOR_ME=void 0,t.asChatJid=function(e){return e===c?null:e},t.asMulticastJid=function(e){return null==M(e)?e:null},t.asPhoneChatJid=function(e){return e===c?null:e},t.asStatusJid=function(e){return e===c?c:null},t.authorAsPhoneUserJid=function(e){if(e===s||e===a)return null;if(!e.endsWith(g))return null;return e},t.authorAsUserJid=function(e){if(e===s||e===a)return null;return e},t.authorToUserId=function(e,t){return e===s||e===a?t:U(e)},t.createJidUtils=function(e){let{platform:t}=e;const n="msgr"===t?d:g;return{toUserJid:function(e){return`${e}${n}`},getUserDomain:function(){return n},getGroupCallDomain:function(){return"@call"}}},t.defaultDeviceJidForUser=function(e){return`${O(e)}:0${V(e)}`},t.defaultLidDeviceJidForLidUserJid=function(e){return x(e,0)},t.defaultMsgrDeviceJidForUser=function(e){return`${O(e)}:0@msgr`},t.defaultPhoneDeviceJidForUser=function(e){return`${O(e)}:0@s.whatsapp.net`},t.extractDeviceIDParts=D,t.extractDeviceId=R,t.extractFromJid=N,t.extractJidFromJidWithType=function(e){return"phoneDevice"===e.jidType||"interopDevice"===e.jidType||"lidDevice"===e.jidType||"msgrDevice"===e.jidType?e.deviceJid:"lidUser"===e.jidType||"interopUser"===e.jidType||"msgrUser"===e.jidType||"phoneUser"===e.jidType?e.userJid:"group"===e.jidType?e.groupJid:"status"===e.jidType?e.statusJid:"call"===e.jidType?e.callJid:"newsletter"===e.jidType?e.newsletterJid:(e.jidType,e.broadcastJid)},t.extractPhoneUserJid=function(e){return L(e)},t.extractUserId=U,t.extractUserJid=L,t.fullFormDeviceJidString=function(e){const{user:t,agent:n="0",device:r="0",server:i}=J(e);return`${t}.${n}:${r}@${i}`},t.getGroupDomain=function(){return u},t.getMsgrUserDomain=function(){return d},t.getServerDomain=function(){return"@s.whatsapp.net"},t.getWhatsappUserDomain=function(){return g},t.groupIdFromJid=function(e){if(e.endsWith(u))return e.slice(0,-u.length);throw(0,o.default)(`groupId called with non-group jid "${e}"`)},t.interpretAndValidateJid=B,t.interpretAsDeviceId=function(e){return e},t.interpretAsGroupJid=G,t.interpretAsNumber=function(e){return e},t.interpretAsPhoneUserJid=function(e){return e.endsWith(g)?e:null},t.interpretAsUserJid=M,t.isAuthorMe=function(e){return"@me"===e},t.isAuthorSystem=function(e){return"@system"===e},t.isPrimaryDevice=function(e){return 0===R(e)},t.lidFromLidUserJid=$,t.lidOrPhoneFromUserJid=function(e){if(e.endsWith(g))return C(e);if(e.endsWith(E))return $(e);throw(0,o.default)(`lidOrPhoneFromUserJid called with non phone or lid jid "${e}"`)},t.maybeSanitizeLogLineText=function(e){if(!e.includes("@"))return e;return e.replace(P,Y)},t.parseJidParts=J,t.phoneNumberFromJid=C,t.sanitizeJidForLogging=Y,t.stripAgentIdFromPhoneDeviceJid=function(e){const{user:t,device:n="0",server:r}=J(e);return`${t}:${n}@${r}`},t.switchOnChatJidType=q,t.switchOnJidType=function(e,t){if(e===c)return t.status();return q(e,{interopUser:t.interopUser,phoneUser:t.phoneUser,msgrUser:t.msgrUser,lidUser:t.lidUser,group:t.group})},t.switchOnMsgrChatJidType=function(e,t){if(e.endsWith(d))return t.user(e);if(null!=G(e))return t.group(e);throw(0,o.default)(`Can not switch on chat jid ${e}`)},t.switchOnMulticastJidType=function(e,t){if(e===c)return t.multicast(c);return H(e,{user:t.user,group:t.multicast})},t.switchOnPhoneChatJidType=H,t.switchOnPhoneJidType=function(e,t){if(e===c)return t.status();return H(e,{user:t.user,group:t.group})},t.switchOnUserChatJidType=function(e,t){return q(e,{lidUser:e=>t.user(e),interopUser:e=>t.user(e),msgrUser:e=>t.user(e),phoneUser:e=>t.user(e),group:e=>t.group(e)})},t.toBroadcastJid=function(e){return`${e}@broadcast`},t.toDeviceJid=function(e,t){return`${O(e)}:${t}${V(e)}`},t.toGroupJid=function(e){if(e.endsWith(u))return e;return`${e}@g.us`},t.toLidDeviceJid=x,t.toLidUserJid=function(e){return`${e}@lid`},t.toMsgrDeviceJid=function(e,t){return`${O(e)}:${t}@msgr`},t.toMsgrUserJid=k,t.toNewsletterJid=function(e){if(e.endsWith(m))return e;return`${e}@newsletter`},t.toPhoneDeviceJid=function(e,t){return`${O(e)}:${t}@s.whatsapp.net`},t.toPhoneUserJid=function(e){return`${e}@s.whatsapp.net`},t.unsafeCoerceToDeviceId=ae,t.unsafeCoerceToDeviceJid=X,t.unsafeCoerceToGroupJid=se,t.unsafeCoerceToInteropDeviceJid=ee,t.unsafeCoerceToInteropUserJid=ie,t.unsafeCoerceToLidDeviceJid=te,t.unsafeCoerceToMsgrDeviceJid=Q,t.unsafeCoerceToMsgrUserJid=oe,t.unsafeCoerceToPhoneDeviceJid=Z,t.unsafeCoerceToPhoneUserJid=re,t.unsafeCoerceToUserJid=ne,t.userIdFromJid=O,t.validateBroadcastJid=W,t.validateCallJid=function(e){return I.test(e)?e:null},t.validateChatJid=function(e){return K(e)||z(e)},t.validateDeviceJid=function(e){return w.test(e)||S.test(e)||_.test(e)||h.test(e)||j.test(e)?e:null},t.validateDomainJid=function(e){return"s.whatsapp.net"===e||"g.us"===e?e:null},t.validateGroupJid=z,t.validateMulticastJid=function(e){return F(e)||z(e)||W(e)?e:null},t.validateNewsletterJid=function(e){return b.test(e)?e:null},t.validateStatusJid=F,t.validateUserJid=K;var i=r(n(7537)),o=r(n(2065));t.DEFAULT_DEVICE_ID=0;const s="@me";t.AUTHOR_ME=s;const a="@system";t.AUTHOR_SYSTEM=a;const c="status@broadcast";t.STATUS_JID=c;t.PSA_JID="0@s.whatsapp.net";const u="@g.us",l=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,d="@msgr";t.MSGR_USER_DOMAIN=d;t.MSGR_USER_JID_SUFFIX="msgr";const f="@interop";t.INTEROP_DOMAIN=f;t.INTEROP_USER_JID_SUFFIX="interop";const h=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,p=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,_=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,v=/^([1-9][0-9]{0,19})@msgr$/,y=/^([1-9][0-9]{0,19})(:0)?@msgr$/;t.WA_SERVER_JID_SUFFIX="s.whatsapp.net";const g="@s.whatsapp.net";t.WA_USER_DOMAIN=g;t.WA_USER_JID_SUFFIX="s.whatsapp.net";const m="@newsletter";t.WA_NEWSLETTER_JID_DOMAIN=m;const b=/^([1-9][0-9]{0,19})@newsletter$/,w=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,S=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,E="@lid";t.LID_DOMAIN=E;t.LID_SUFFIX="lid";const A=/^([1-9][0-9]{0,14})@lid$/,j=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,T=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,I=/^([0-9a-fA-F]{18,32})@call$/;t.SURVEY_USER_JID="16505361212@s.whatsapp.net";const P=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function k(e){return`${e}@msgr`}function O(e){if(e.endsWith(g))return e.slice(0,-g.length);if(e.endsWith(d))return e.slice(0,-d.length);if(e.endsWith(f))return e.slice(0,-f.length);if(e.endsWith(E))return e.slice(0,-E.length);throw(0,o.default)(`userIdFromJid called with non-user jid "${e}"`)}function x(e,t){return`${$(e)}:${t}@lid`}function U(e){return e.split("@")[0]}function D(e){const t=e.split("@")[0].split(":"),n=t[0],r=t[1];return{userId:n,deviceID:parseInt(r,10)}}function R(e){return D(e).deviceID}function C(e){if(!e.endsWith(g))throw(0,o.default)(`phoneNumberFromJid called with non-user jid "${e}"`);return e.slice(0,-g.length)}function M(e){return e.endsWith(g)||e.endsWith(f)||e.endsWith(d)||e.endsWith(E)?e:null}function $(e){if(!e.endsWith(E))throw(0,o.default)(`lidFromLidUserJid called with non-LidUserJid "${e}"`);return e.slice(0,-E.length)}function L(e){const t=e.split("@");let n=t[0];const r=t[1];return n=n.split(":")[0],n=n.split(".")[0],`${n}@${r}`}function J(e){const[t,n]=e.split("@"),[r,i]=t.split(":"),[o,s]=r.split(".");return{user:o,device:i,agent:s,server:n}}function N(e){switch(e.jidType){case"interopUser":case"lidUser":case"msgrUser":case"phoneUser":return e.userJid;case"group":return e.groupJid;case"status":return e.statusJid;case"interopDevice":case"lidDevice":case"msgrDevice":case"phoneDevice":return e.deviceJid;case"broadcast":return e.broadcastJid;case"call":return e.callJid;case"newsletter":return e.newsletterJid;default:return(0,i.default)(e.jidType)}}function B(e){if(e===c)return{jidType:"status",statusJid:c};if(S.test(e))return{jidType:"phoneUser",userJid:e};if(p.test(e))return{jidType:"interopUser",userJid:e};if(v.test(e))return{jidType:"msgrUser",userJid:e};if(y.test(e)){return{jidType:"msgrUser",userJid:k(e.substr(0,e.indexOf(":")))}}return w.test(e)?{jidType:"phoneDevice",deviceJid:e}:h.test(e)?{jidType:"interopDevice",deviceJid:e}:_.test(e)?{jidType:"msgrDevice",deviceJid:e}:l.test(e)?{jidType:"group",groupJid:e.endsWith(u)?e:`${e}@g.us`}:T.test(e)?{jidType:"broadcast",broadcastJid:e}:I.test(e)?{jidType:"call",callJid:e}:A.test(e)?{jidType:"lidUser",userJid:e}:j.test(e)?{jidType:"lidDevice",deviceJid:e}:b.test(e)?{jidType:"newsletter",newsletterJid:e}:{jidType:"unknown"}}function F(e){return"status@broadcast"===e?e:null}function K(e){if(S.test(e)||p.test(e)||v.test(e)||A.test(e))return e;if(y.test(e)){return k(e.substr(0,e.indexOf(":")))}return null}function W(e){return T.test(e)?e:null}function z(e){return l.test(e)?e:null}function Y(e){const t=B(e);return"unknown"===t.jidType?e:"status"===t.jidType?t.statusJid:(t.jidType,N(t).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3"))}function G(e){return e.endsWith(u)?e:null}function q(e,t){if(e.endsWith(g))return t.phoneUser(e);if(e.endsWith(d))return t.msgrUser(e);if(e.endsWith(f))return t.interopUser(e);if(e.endsWith(E))return t.lidUser(e);if(null!=G(e))return t.group(e);throw(0,o.default)(`Can not switch on chat jid ${e}`)}function H(e,t){if(e.endsWith(g))return t.user(e);if(null!=G(e))return t.group(e);throw(0,o.default)(`Can not switch on chat jid ${e}`)}function V(e){if(e.endsWith(g))return g;if(e.endsWith(d))return d;if(e.endsWith(E))return E;throw(0,o.default)(`userDomainFromJid called with non-user jid "${e}"`)}function X(e){return e}function Z(e){return e}function Q(e){return e}function ee(e){return e}function te(e){return e}function ne(e){return e}function re(e){return e}function ie(e){return e}function oe(e){return e}function se(e){return e}function ae(e){return e}},9619:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";if(null==e)throw(0,i.default)(`Unexpected null or undefined: ${t}`);return e};var i=r(n(2065))},2207:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.asyncChain=function(e,t){if(e.success)return t(e.value);return Promise.resolve(e)},t.asyncMapError=l,t.asyncMapResult=c,t.catchError=function(e){return function(){var t=(0,i.default)((function*(t){yield l(t,e)}));return function(){return t.apply(this,arguments)}}()},t.chain=function(e,t){if(e.success)return t(e.value);return e},t.makeError=o,t.makeResult=s,t.mapAsyncResult=function(){return a.apply(this,arguments)},t.mapError=function(e,t){if(e.success)return s(e.value);return o(t(e.error),e.payload)},t.mapResult=function(e,t){if(!e.success)return e;return s(t(e.value))},t.onResult=function(e){return t=>c(t,e)};var i=r(n(1504));function o(e,t){return null!=t?{success:!1,error:e,payload:t}:{success:!1,error:e}}function s(e){return{success:!0,value:e}}function a(){return(a=(0,i.default)((function*(e,t){const n=yield e;return n.success?s(t(n.value)):n}))).apply(this,arguments)}function c(){return u.apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e,t){if(!e.success)return e;return s(yield t(e.value))}))).apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e,t){if(e.success)return s(e.value);return o(yield t(e.error),e.payload)}))).apply(this,arguments)}},8494:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ShiftTimer=void 0;var i=r(n(2065));function o(e){if(!(e>=0))throw(0,i.default)("ShiftTimer must be given delay >= 0")}t.ShiftTimer=class{constructor(e){this._timer=0,this._rafId=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0,this._run=()=>{const e=this._arg,t=this._foo;this._rafId=0,this._timer=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0,t(e)},this.onOrBefore=(e,t)=>{o(e);const n=Date.now()+e,r=this._upperBound;if(0!==r&&r<n)return;const i=this._lowerBound;0!==i&&n<i||(this._upperBound=n,this._rafId||this._timer&&!(n<this.ts)||this._setDelay(n,e,t))},this.forceRunNow=e=>{this._timer&&clearTimeout(this._timer),this._rafId&&cancelAnimationFrame(this._rafId),this._arg=e,this._run()},this.cancel=()=>{this._timer&&clearTimeout(this._timer),this._rafId&&cancelAnimationFrame(this._rafId),this._timer=0,this._rafId=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0},this._foo=e}onOrBeforeRepaint(e){if(this._rafId)return;const t=Date.now(),n=this._lowerBound;if(0!==n&&t<n)return;const r=this._upperBound;(0===r||t<r)&&(this._upperBound=t),this._timer&&(clearTimeout(this._timer),this._timer=0),(!this.ts||this.ts>t)&&(this.ts=t),this._arg=e,this._rafId=requestAnimationFrame(this._run)}onOrAfter(e,t){o(e);const n=Date.now()+e,r=this._lowerBound;if(0!==r&&n<r)return;const i=this._upperBound;0!==i&&i<n||(this._lowerBound=n,(!this._timer||this.ts<n)&&this._setDelay(n,e,t))}debounce(e,t){o(e),this._debounce(Date.now(),e,t)}debounceAndCap(e,t,n){o(e),o(t);const r=Date.now(),i=r+t,s=this._lowerBound,a=this._upperBound;(0===s||s<=i)&&(0===a||i<a)&&(this._upperBound=i),this._debounce(r,e,n)}forceRunNowIfScheduled(){this._timer?(clearTimeout(this._timer),this._run()):this._rafId&&(cancelAnimationFrame(this._rafId),this._run())}isScheduled(){return 0!==this._timer||0!==this._rafId}_debounce(e,t,n){const r=e+t,i=this._lowerBound;if(0!==i&&r<i)return;const o=this.ts,s=this._upperBound;0!==s&&s<r?o<s&&this._setDelay(s,s-e,n):o<r&&this._setDelay(r,t,n)}_setDelay(e,t,n){if(this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._arg=n,this.ts=e,this._timer){const t=e-this._timerTs;if(-16<t&&t<16)return;clearTimeout(this._timer)}this._timer=setTimeout(this._run,t),this._timerTs=e}}},9987:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YEAR_SECONDS=t.WEEK_SECONDS=t.WEEK_MILLISECONDS=t.MonotonicTimer=t.MINUTE_SECONDS=t.MINUTE_MILLISECONDS=t.MAX_INT=t.HOUR_SECONDS=t.HOUR_MILLISECONDS=t.FIVE_MINUTES=t.DEFAULT_UNIXTIME=t.DAY_SECONDS=t.DAY_MILLISECONDS=void 0,t.cappedMillisecondsUntil=v,t.castLongIntToUnixTime=function(e){return"number"!=typeof e?(0,r.hexLongIsNegative)(e)?l:u:h(e)},t.castMilliSecondsToUnixTime=p,t.castMillisTimeToUnixTime=function(e){if(null==e)return e;return e>u?p(e):h(e)},t.castToMillisTime=_,t.castToUnixTime=h,t.castUnixTimeToMillisTime=function(e){return 1e3*e},t.convertHexToDate=function(e){const t=Number.parseInt(e,16);if(Number.isFinite(t))return new Date(1e3*h(t));return null},t.delayUntil=function(e){const t=v(e);return new Promise((e=>{setTimeout(e,t)}))},t.fromMillisTime=function(e){return e},t.futureUnixTime=function(e,t){const n=null!=t?t:y();return h(Math.ceil(n+Math.max(e,0)))},t.getClockSkew=function(){return f},t.happenedWithin=function(e,t){return w(y(),e,t)},t.happenedWithinAt=w,t.isInFuture=function(e){return g(e)>0},t.isOverflowTime=function(e){return e<l||e>u},t.isWithinNext24h=function(e){return e-y()<=o},t.midnight=function(){return h((new Date).setHours(0,0,0,0)/1e3-f)},t.midnightOn=function(e){return h(S(e).setHours(0,0,0,0)/1e3-f)},t.millisTime=function(){return E()-1e3*f},t.monotonicTime=m,t.monotonicTimeSince=b,t.oldest=function(e,t){return e<t?e:t},t.pastUnixTime=function(e,t){const n=null!=t?t:y();return h(Math.ceil(n-Math.max(e,0)))},t.performanceAbsoluteNow=E,t.sameDay=function(e,t){if(Math.abs(e-t)>o)return!1;const n=d.time===e?d.day:S(e+f).getDay(),r=d.time===t?d.day:S(t+f).getDay();return d.time=t,d.day=r,n===r},t.secondsUntil=g,t.setClockSkew=function(e){f=e},t.timeSince_USE_ONLY_IF_APPROVED=function(e){return Math.max(y()-e,0)},t.timeoutFor=function(e,t){const n=y(),r=Math.max(e+t-n,0);return Math.min(1e3*r,~(1<<31))},t.toDate=S,t.toHttpHeaderDate=function(e){return S(e).toUTCString()},t.unixTime=y,t.unixTimeMs=function(){return Date.now()-1e3*f},t.unixTimeWithoutClockSkewCorrection=function(){return h(Date.now()/1e3)},t.unskewedDate_USE_ONLY_IF_APPROVED=function(){return new Date};var r=n(5982);t.MINUTE_SECONDS=60;t.FIVE_MINUTES=300;const i=3600;t.HOUR_SECONDS=i;const o=86400;t.DAY_SECONDS=o;t.WEEK_SECONDS=604800;t.YEAR_SECONDS=31536e3;t.MINUTE_MILLISECONDS=6e4;const s=36e5;t.HOUR_MILLISECONDS=s;const a=864e5;t.DAY_MILLISECONDS=a;t.WEEK_MILLISECONDS=6048e5;const c=1<<31;t.DEFAULT_UNIXTIME=c;const u=2147483647;t.MAX_INT=u;const l=-2147483647,d={time:0,day:-4};let f=0;function h(e){return Math.max(l,Math.min(0|e,u))}function p(e){return h(e/1e3)}function _(e){return e}function v(e){const t=Math.max(e-y(),0);return Math.min(1e3*t,~(1<<31))}function y(){return h(Date.now()/1e3-f)}function g(e){return Math.max(e-y(),0)}function m(){return performance.now()}function b(e){return Math.floor(performance.now()-e)}function w(e,t,n){return Math.abs(e-t)<=n}function S(e){return new Date(1e3*e)}function E(){return Date.now()}t.MonotonicTimer=class{constructor(){const e=m();this._initTime=e,this._startTime=e}reset(){this._startTime=m()}elapsed(){return b(this._startTime)}cumulative(){return b(this._initTime)}}},7791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=[],r=e.length,i=t.length,o=Math.max(r,i);for(let s=0;s<o;s++)s<r&&n.push(e[s]),s<i&&n.push(t[s]);return n}},6432:(e,t)=>{"use strict";function n(e,t){const r=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const s=t?t.apply(this,i):i[0];if(null==s)return e.apply(this,i);const a=r.cache;if(a.has(s))return a.get(s);const c=e.apply(this,i);return r.cache=a.set(s,c)||a,c};return r.cache=new(n.Cache||Map),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.Cache=Map},29:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.castTypedArrays=function(e,t){if(t instanceof e)return t;if("string"==typeof t)return new e((0,r.decodeB64)(t));return new e(t)};var r=n(2089)},8358:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatTypedArrays=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.reduce(((e,t)=>e+t.length),n),i=new e(r);let o=0;return t.forEach((e=>{i.set(e,o),o+=e.length})),i}},8481:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableXmlNode=void 0,t.convertBytesToUint=a;var i=r(n(2065)),o=r(n(9028)),s=n(7448);function a(e,t){let n=0;for(let r=0;r<t;r++)n=256*n+e[r];return n}t.ParsableXmlNode=class{constructor(e,t){this._name=e,this._node=t,this._children=Array.isArray(t.content)?t.content.map((t=>new this.constructor(e,t))):null}name(){return this._name}node(){return this._node}hasAttr(e){return(0,o.default)(this._node.attrs,e)}assertTag(e){this._node.tag!==e&&this.throw(`to be <${e}>`)}tag(){return this._node.tag}maybeChild(e){const t=this._children;if(!t)return null;for(let n=0;n<t.length;n++)if(t[n].tag()===e)return t[n];return null}hasChild(e){return!!this.maybeChild(e)}child(e){const t=this.maybeChild(e);return t||this.throw(`to have child <${e}>`)}assertAttr(e,t){const n=this.attrString(e);n!==t&&this.throw(`to have "${e}"="${t}", but instead has "${n}"`)}attrString(e){return(0,o.default)(this._node.attrs,e)?this.decodeAsString(this._node.attrs[e]):this.throw(`to have attribute "${e}"`)}forEachAttributeKey(e){const t=this._node.attrs;Object.keys(t).forEach((t=>e(t)))}maybeAttrString(e){return this.hasAttr(e)?this.decodeAsString(this._node.attrs[e]):null}maybeAttrInt(e,t,n){return this.hasAttr(e)?this.attrInt(e,t,n):null}attrEnumValues(e,t,n){const r=new Set(t),i=this.attrString(e);if(!r.has(i)){if(null!=n)return n;const t=Array.from(r).join("|");return this.throw(`to have "${e}"={${t}} but has value "${i}"`)}return i}attrEnum(e,t){const n=this.attrString(e);if(!(0,o.default)(t,n)){const r=Object.keys(t).join("|");return this.throw(`to have "${e}"={${r}} but has value "${n}"`)}return t[n]}attrEnumOrNullIfUnknown(e,t){const n=this.attrString(e);return(0,o.default)(t,n)?t[n]:null}attrEnumOrDefault(e,t,n){return this.hasAttr(e)?this.attrEnum(e,t):n}attrInt(e,t,n){const r=this.attrString(e);return this._parseInt(r,e,t,n)}_parseInt(e,t,n,r){const i=parseInt(e,10);return Number.isNaN(i)?this.throw(`to have "${t}"={integer} but has value "${e}"`):void 0!==n&&i<n?this.throw(`to have "${t}"={at least ${n}} but has value ${i}`):void 0!==r&&i>=r?this.throw(`to have "${t}"={below ${r}} but has value ${i}`):i}forEachChild(e){const t=this._children;if(t)t.forEach((t=>e(t)));else if(null!=this._node.content)return this.throw("to have children")}forEachChildWithTag(e,t){this.forEachChild((n=>{n.tag()===e&&t(n)}))}mapChildren(e){const t=this._children;return t||null==this._node.content?t?t.map((t=>e(t))):[]:this.throw("to have children")}mapChildrenWithTag(e,t){const n=this._children;return n||null==this._node.content?n?n.filter((t=>t.tag()===e)).map((e=>t(e))):[]:this.throw("to have children")}mapFirstChild(e){const t=this._children;return t&&0!==t.length?e(t[0]):this.throw("to have children")}hasContent(){return!this._children&&!!this._node.content}hasChildren(){return null!=this._children}getChildren(){return this._children}mapAttrKeys(e){const t=this.getAttrKeys();return t&&t.length?t.map(e):[]}getAttrKeys(){return Object.keys(this._node.attrs)}hasAttrs(){return(this._node.attrs?Object.keys(this._node.attrs):[]).length>0}getNode(){return this._node}unsafeSetChildren(e){this._children=e}unsafeSetNodeContent(e){this._node.content=e}contentUint(e){return a(this.contentBytes(e),e)}contentBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this._children)return this.throw("to have binary content, but has children instead");if(null!=this._node.content){const t=this._node.content;return-1!==e&&t.length!==e?this.throw(`to be ${e} bytes, but got ${t.length} instead`):t}return this.throw("to have content")}contentString(){return this._children?this.throw("to have string content, but has children instead"):null!=this._node.content?this._node.content:this.throw("to have content")}contentInt(e,t){const n=this.contentString();return this._parseInt(n,"content",e,t)}contentEnum(e){const t=this.contentString();if(!(0,o.default)(e,t)){const n=Object.keys(e).join("|");return this.throw(`to have content {${n}} but has value "${t}"`)}return e[t]}decodeAsString(e){if("string"!=typeof e)throw(0,i.default)(`decodeAsString: attribute is ${typeof e} not a string: ${e}`);return e}throw(e){throw new s.XmlParsingFailure(this._name,`expected <${this._node.tag}> ${e}`)}toString(){return this._node.toString()}}},8132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~"),n=t.length;let r=!1,i=0,o="",s=0;const a=["\n"];for(s=0;s<100;s++)a.push(a[s]+"    ");const c=function(e,t){const n=/^<[\w:\-.,]+/.exec(e[t-1]),r=/^<\/[\w:\-.,]+/.exec(e[t]);return null!=n&&null!=r&&n[0]===r[0]};for(s=0;s<n;s++)t[s].search(/<!/)>-1?(o+=a[i]+t[s],r=!0,(t[s].search(/-->/)>-1||t[s].search(/\]>/)>-1||t[s].search(/!DOCTYPE/)>-1)&&(r=!1)):t[s].search(/-->/)>-1||t[s].search(/\]>/)>-1?(o+=t[s],r=!1):c(t,s)?(o+=t[s],r||i--):t[s].search(/<\w/)>-1&&-1===t[s].search(/<\//)&&-1===t[s].search(/\/>/)?o=o+=r?t[s]:a[i++]+t[s]:t[s].search(/<\w/)>-1&&t[s].search(/<\//)>-1?o=o+=r?t[s]:a[i]+t[s]:t[s].search(/<\//)>-1?o=o+=r?t[s]:a[0===i?i:--i]+t[s]:t[s].search(/\/>/)>-1?o=o+=r?t[s]:a[i]+t[s]:t[s].search(/<\?/)>-1||t[s].search(/xmlns:/)>-1||t[s].search(/xmlns=/)>-1?o+=a[i]+t[s]:o+=t[s];return"\n"===o[0]?o.slice(1):o}},3260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlNode=void 0,t.attrsToString=o,t.uint8ArrayToDebugString=s;var r=n(5982);const i={};function o(e){const t=Object.keys(e);let n="";for(let r=0;r<t.length;r++){const i=t[r];n+=` ${i}="${e[i].toString()}"`}return n}function s(e){let t="";return t=0===e.length?"\x3c!-- empty binary --\x3e":e.length<50?(0,r.bytesToDebugString)(e):`\x3c!-- ${e.length} bytes --\x3e`,t}t.XmlNode=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.tag=e,this.attrs=t,this.content=n}toString(){let e="<"+this.tag;e+=o(this.attrs);const t=this.content;return Array.isArray(t)?e+=`>${t.map(String).join("")}</${this.tag}>`:t instanceof Uint8Array?e+=`>${s(t)}</${this.tag}>`:e+=null!=t?`>${String(t)}</${this.tag}>`:" />",e}}},7448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlParsingFailure=void 0;t.XmlParsingFailure=class{constructor(e,t){this.parser=e,this.reason=t}toString(){return`XmlParsingFailure: ${this.parser}: ${this.reason}`}}},2271:(e,t,n)=>{const{isFeatureEnabled:r}=n(2765),i=n(6128).Z;if(i.Promise.PSD.onunhandled=()=>{},i.Promise.PSD.txRelaxedDurabilityEnabled=!0,r("native_promise_runtime")){const{loadStackPromisePolyfill:e}=n(9069);e()}else self.Promise=n(1518).Z},7674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM=t.IS_MMS_URL_SEARCH_PARAM=void 0;t.IS_MMS_URL_SEARCH_PARAM="__wa-mms";t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM="mms-type"},2765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugDisableFeatureFlag=function(e){n[e]=!1},t.debugEnableFeatureFlag=function(e){n[e]=!0},t.isFeatureEnabled=function(e){return n[e]},t.overwriteDebugFeatures=function(){};const n={a11y_block:!1,format_bulleted_msg:!1,media_existence_check:!1,web_voip_voice_call:!1,web_voip_video_call:!1,youtube_video_preview_without_blur:!1,message_add_ons:!1,reactions_filter_problematic_flags:!0,native_promise_runtime:!1,skip_compliance_phone_check:!1,debug_commands:!1}},8615:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptPartialMedia=t.decrypt=t.cleanupCiphertextAndIv=t.HMAC_SIZE=t.BLOCK_SIZE=void 0;var i=r(n(8926)),o=n(8358);t.BLOCK_SIZE=16;t.HMAC_SIZE=10;const s=function(){var e=(0,i.default)((function*(e){const{ciphertext:t,iv:n,mediaKeys:r}=e,{encKey:i}=r;try{const e=yield self.crypto.subtle.importKey("raw",new Uint8Array(i),"AES-CBC",!1,["decrypt"]).catch((e=>{throw __LOG__(2)`decryptPartialMedia:decrypt importKey error: ${String(e)}`,e}));return self.crypto.subtle.decrypt({name:"AES-CBC",iv:n},e,t)}catch(e){throw __LOG__(2)`decryptPartialMedia:decrypt decrypt error: ${String(e)}`,e}}));return function(){return e.apply(this,arguments)}}();t.decrypt=s;const a=function(){var e=(0,i.default)((function*(e){const{ciphertext:t,mediaKeys:n}=e,{encKey:r}=n,i={name:"AES-CBC",iv:(t instanceof Uint8Array?t:new Uint8Array(t)).slice(-16)};try{const e=yield self.crypto.subtle.importKey("raw",new Uint8Array(r),"AES-CBC",!1,["encrypt"]).catch((e=>{__LOG__(2)`decryptPartialMedia:getEncryptedPadding importKey error: ${String(e)}`})),t=new Uint8Array([]);return self.crypto.subtle.encrypt(i,e,t)}catch(e){return void __LOG__(2)`decryptPartialMedia:getEncryptedPadding encrypt error: ${String(e)}`}}));return function(){return e.apply(this,arguments)}}(),c=e=>{const{serverRangeStart:t,ciphertext:n,mediaKeys:r}=e;let i=n instanceof Uint8Array?n:new Uint8Array(n);const s=i.byteLength%16==0;let c;return 0===t?c=new Uint8Array(r.iv):(c=i.slice(0,16),i=i.slice(16)),s||(i=i.slice(0,i.byteLength-10)),s?a({ciphertext:i,mediaKeys:r}).then((e=>(i=(0,o.concatTypedArrays)(Uint8Array,[i,new Uint8Array(e)]),{ciphertext:i,iv:c}))):Promise.resolve({ciphertext:i,iv:c})};t.cleanupCiphertextAndIv=c;const u=function(){var e=(0,i.default)((function*(e){let{mediaKeys:t,ciphertext:n}=e;const{ciphertext:r,iv:i}=yield c({serverRangeStart:0,ciphertext:n,mediaKeys:t});return s({ciphertext:r,iv:i,mediaKeys:t})}));return function(){return e.apply(this,arguments)}}();t.decryptPartialMedia=u},1054:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:String,o=(0,i.default)(e,t.map(r)).join("");const s=n?4e3:Number.POSITIVE_INFINITY;o.length>s&&(o=o.slice(0,s).replace(/\s+$/," [truncated]"));return o};var i=r(n(7791))},3948:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926));class o{constructor(e){this._handleMessage=e=>{if(!e.data||!e.data.action)return;const t=e.data;if(!e.ports||0===e.ports.length)return;const n=e.ports;if(!o.isSW()&&window.navigator.serviceWorker&&e.source!==window.navigator.serviceWorker.controller)return;let r;r="function"==typeof e.waitUntil?t=>e.waitUntil(t):()=>{},r(Promise.resolve(this.requestHandler(t)).then((e=>{n[0].postMessage(e)})).catch((e=>{n[0].postMessage({error:e&&e.toString()})})))},this.requestHandler=e}init(){const e=o.isSW()?self:window.navigator.serviceWorker;try{if(!e)return;e.addEventListener("message",this._handleMessage)}catch(e){}}static isSW(){return"undefined"==typeof window}static getRequestor(e){return o.isSW()?"string"==typeof e?self.clients.get(e):Promise.resolve(e):window.navigator.serviceWorker?window.navigator.serviceWorker.ready.then((()=>window.navigator.serviceWorker?window.navigator.serviceWorker.controller:null)):Promise.resolve(null)}static broadcast(e,t){return(0,i.default)((function*(){if(!o.isSW())throw new Error("Broadcast called from non-serviceworker.");const n=yield self.clients.matchAll();return 0===n.length?Promise.reject(new Error("No clients available.")):Promise.all(n.map((n=>o.request(n,e,t))))}))()}static request(e,t,n){const r=new MessageChannel;return new Promise(((i,s)=>(r.port1.onmessage=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.error)?s(e.data.error):i(e.data)},o.getRequestor(e).then((e=>{if(!e)return s(new Error("No ServiceWorker controlling this client."));e.postMessage({action:t,message:n,version:"2.2312.7"},[r.port2])})))))}}t.default=o},9194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={REQUEST_STREAMING_INFO:"GET_STREAMING_INFO",REQUEST_RMR:"REQUEST_RMR",SEND_STREAMING_CHUNK:"SEND_STREAMING_CHUNK",EXP_BACKOFF:"EXP_BACKOFF",LOG:"LOG",UPLOAD_LOGS:"UPLOAD_LOGS",REQUEST_DOCUMENT_DOWNLOAD:"REQUEST_DOCUMENT_DOWNLOAD",SET_L10N:"SET_L10N",STREAMING_SUPPORTED:"STREAMING_SUPPORTED",REMOVE_PP:"REMOVE_PP",LOGOUT:"LOGOUT",CLEAN_ASSETS:"CLEAN_ASSETS",PRELOAD_LAZY_LOADED_BUNDLES:"PRELOAD_LAZY_LOADED_BUNDLES",ACTIVE_TAB:"ACTIVE_TAB",STOP_COMMS:"STOP_COMMS"};t.default=n},1373:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=self.indexedDB}catch(e){}var r=n;t.default=r},1157:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3948)),o=r(n(9194)),s=r(n(6857));class a extends s.default{constructor(){super(...arguments),this.matchAction=e=>e===o.default.ACTIVE_TAB,this.onAction=()=>i.default.broadcast(o.default.ACTIVE_TAB)}}t.default=a},3933:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=r(n(9194)),s=r(n(6857));class a extends s.default{constructor(){var e;super(...arguments),e=this,this.matchFetch=e=>{const{request:t}=e,n=s.default.parseUrl(t.url);return t.method===s.default.RequestType.GET&&!!n&&n.base===self.registration.scope&&!!n.relativePath.match("^img/")},this.onFetch=function(){var t=(0,i.default)((function*(t){const{request:n}=t,r=yield e.cache.matchOrFetch(n);return r.ok?r:e.cache.fetchAndPut(n)}));return function(){return t.apply(this,arguments)}}(),this.matchAction=e=>o.default.CLEAN_ASSETS===e,this.onAction=function(){var t=(0,i.default)((function*(t,n){const r=new Set(n),i=yield e.cache.keys();if(!i)return;const o=[];return i.forEach((e=>{const t=e.url.lastIndexOf("/")+1,n=e.url.slice(t);r.has(n)||o.push(e)})),Promise.all(o.map((t=>e.cache.delete(t))))}));return function(){return t.apply(this,arguments)}}()}}t.default=a},2612:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3948));t.default=e=>{self.addEventListener("install",(function(t){__LOG__(2)`Installing...`;const n=e.filter((e=>e.matchInstall(t))).map((e=>Promise.resolve(e.onInstall(t))));t.waitUntil(Promise.all(n).then((()=>self.skipWaiting())).catch((e=>{__LOG__(3)`onInstall error: ${String(e)}`})))})),self.addEventListener("activate",(function(t){__LOG__(2)`Activating...`;const n=e.filter((e=>e.matchActivate(t))).map((e=>e.onActivate(t)));t.waitUntil(self.clients.claim().then((()=>Promise.all(n))).catch((e=>{__LOG__(3)`onActivate error: ${e}.`})))})),self.addEventListener("fetch",(function(t){const n=e.find((e=>e.matchFetch(t)));if(n)return t.respondWith(n.onFetch(t))})),self.addEventListener("push",(function(t){const n=e.find((e=>e.matchPush(t)));if(n)return n.onPush(t)})),self.addEventListener("notificationclick",(function(t){const n=e.find((e=>e.matchNotificationClick(t)));if(n)return n.onNotificationClick(t)}));new i.default((t=>{let{action:n,message:r}=t;const i=e.find((e=>e.matchAction(n)));return i?i.onAction(n,r):Promise.reject(new Error(`Invalid Action: ${n}`))})).init()}},8043:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=r(n(9194)),s=r(n(3735)),a=r(n(6857)),c=r(n(5420));class u extends a.default{constructor(e,t){var n;super(e,t),n=this,this.matchInstall=()=>!0,this.onInstall=function(){var e=(0,i.default)((function*(){const e=yield n.store.get("l10n");return n.cacheObject.hashedResources.push(...n.cachedL10nHashes(n.cacheObject,e)),n.cache.update(n.cacheObject.hashedResources,n.cacheObject.unhashedResources)}));return function(){return e.apply(this,arguments)}}(),this.matchActivate=()=>!0,this.onActivate=()=>this.cache.cleanup(),this.matchFetch=e=>{const{request:t}=e,n=a.default.parseUrl(t.url);return t.method===a.default.RequestType.GET&&!this.isCacheStale()&&!!n&&n.base===self.registration.scope&&this.cacheList.has(n.relativePath)},this.onFetch=e=>{const{request:t}=e,n=a.default.parseUrl(t.url);return n?this.cache.matchOrFetch(t,`${n.base}${n.relativePath}`):self.fetch(t)},this.matchAction=e=>e===o.default.SET_L10N,this.onAction=function(){var e=(0,i.default)((function*(e,t){const r=yield n.store.get("l10n");if(r&&t.locale===r.locale)return;const[i]=n.cachedL10nHashes(n.cacheObject,t);if(!i)return n.store.delete("l10n");const o=`${self.registration.scope}${c.default.getIndexPath(t)}`;return Promise.all([n.cache.fetchAndPut(o,self.registration.scope),n.store.put("l10n",{locale:t.locale,isRTL:t.isRTL})])}));return function(){return e.apply(this,arguments)}}(),this.cacheObject=s.default,this.cacheList=new Set([...this.cacheObject.hashedResources,...this.cacheObject.unhashedResources,...Object.keys(this.cacheObject.l10n.locales).map((e=>this.cacheObject.l10n.locales[e]))])}cachedL10nHashes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{locale:n}=t,r=e.l10n.locales[n];return r?[r]:[]}isCacheStale(){return(new Date).getTime()-this.cacheObject.releaseDate>=2592e6}}t.default=u},7719:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=r(n(2083)),s=r(n(5420));const a=o.default.prefs,c=self.caches.keys(),u=/wa\d+\.\d+\.\d+(\.[id])?(\.canary)?$/,l=["wa-pp","wa-assets","wa-stickers","wa_web_user_prefs_cache_store"];function d(e){this.cacheName=e,this.openCachePromise=self.caches.open(this.cacheName)}function f(){return(f=(0,i.default)((function*(e){try{const t=(yield c).find((t=>t!==e&&u.test(t)));if(t)return new d(t)}catch(e){__LOG__(3)`Could not find previous cache, current cache:${this.cacheName}, error: ${e}`}}))).apply(this,arguments)}d.prototype={update(e,t){var n=this;return(0,i.default)((function*(){try{const r=yield function(){return f.apply(this,arguments)}(n.cacheName);if(!r)return;return __LOG__(2)`Updating cache: ${n.cacheName}`,a.get("l10n").then((i=>Promise.all(n.prefetchHashedResources(e,r).concat(n.prefetchUnhashedResources(t,i)))))}catch(e){__LOG__(3)`Error occured while updating cache:${n.cacheName}, error: ${e}`}}))()},prefetchHashedResources(e,t){var n=this;return e.map(function(){var e=(0,i.default)((function*(e){const r=self.registration.scope+e,i=yield t.match(r).catch((e=>{__LOG__(3)`Unable to match prev. cache, cache name: ${t.cacheName}, request: ${r}, error: ${e}`}));return i?n.put(r,i):n.fetchAndPut(r)}));return function(){return e.apply(this,arguments)}}())},prefetchUnhashedResources(e,t){return e.map((e=>""===e?this.fetchAndPut(self.registration.scope+s.default.getIndexPath(t),self.registration.scope,{cache:"reload"}):this.fetchAndPut(self.registration.scope+e)))},cleanup(){var e=this;return(0,i.default)((function*(){const t=yield c;return Promise.all(t.map((t=>{if(t!==e.cacheName&&!l.includes(t))return self.caches.delete(t).catch((n=>{__LOG__(3)`Unable to delete cache: ${t}, current cache: ${e.cacheName}, error: ${n}`}))})))}))()},matchOrFetch(e,t,n){var r=this;return(0,i.default)((function*(){const i=t||p(e);return(yield r.match(i))||r.fetchAndPut(e,i,n)}))()},fetchAndPut(e,t,n){var r=this;return(0,i.default)((function*(){const i=s.default.manuallyCloneRequest(e,void 0,{redirect:"manual",mode:"cors"});try{const o=yield self.fetch(i,n);if(o.ok){const n=t||p(e);r.put(n,o.clone())}else"opaqueredirect"!==o.type&&__LOG__(3)`Received invalid response, url: ${o.url}, status: ${o.status}, type: ${o.type}`;return o}catch(t){throw __LOG__(3)`Unable to fetch request: ${p(e)}, error: ${t}`,t}}))()},reset(){return this.openCachePromise=self.caches.delete(this.cacheName).then((()=>self.caches.open(this.cacheName)))},match(e,t){var n=this;return(0,i.default)((function*(){try{return(yield n.openCachePromise).match(e,t)}catch(t){__LOG__(3)`Unable to match request: ${p(e)}, in cache: ${n.cacheName}, error: ${t}`}}))()},put(e,t){var n=this;return(0,i.default)((function*(){try{return(yield n.openCachePromise).put(e,t)}catch(r){__LOG__(3)`Unable to put in cache: ${n.cacheName}, request: ${p(e)}, response status: ${t.status}, err: ${r}`}}))()},delete(e,t){var n=this;return(0,i.default)((function*(){try{return(yield n.openCachePromise).delete(e,t)}catch(t){__LOG__(3)`Unable to delete request: ${p(e)}, in cache: ${n.cacheName}, error: ${t}`}}))()},keys(e,t){var n=this;return(0,i.default)((function*(){try{return(yield n.openCachePromise).keys(e,t)}catch(t){__LOG__(3)`Unable to match request: ${p(e)}, in cache: ${n.cacheName}, error: ${t}`}}))()}};var h=d;function p(e){return e instanceof Request?e.url:e}t.default=h},3735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={version:"2.2312.7",hashedResources:["1761.ea34b1c8e3563c1635b8.js","2266.69d2da37212b0d2de4b4.js","4106.72cd2c40073b4a5ad77d.js","432.bfe726e73e73d6d5c2ec.js","4548.792c5da266e5ea08d5f3.js","4944.cae5d06abb1b7e4ee034.js","5346.72056a1c38e64d3393ae.js","6086.14cf80e6ae6763d7a026.js","6235.4b269b01580b6b336580.js","648.b63736481bc87d180992.js","app.39064ec0dec361638b30.js","early_error_handling.e78cd90bb7118ee4f802.js","lazy_loaded_ca_root_certificates.ab2711e7139ff1b2317d.js","lazy_loaded_high_priority_components.78528972d0624e955192.js","lazy_loaded_high_priority_components~lazy_loaded_low_priority_components.a68980f4a8f2b6f91b58.js","lazy_loaded_low_priority_components.37c855c22741b885c399.js","lazy_loaded_low_priority_components~.c847ac33e48664548fdf.js","lazy_loaded_remove_direct_connection_keys.a41bd0ff3fad452fa67e.js","libsignal-protocol-ee5b8ba.min.js","main.cb4af3d4b4e5c4e68d70.js","pdf.worker.96d1bc1f3d0105cd5a81bae7a9dad228.js","runtime.aeb7bc814cb4cdda9651.js","vendor1~app.0c8e960e5dfd7020f562.js","vendors~lazy_loaded_business_direct_utils.e24e12d5047d3b57fef7.js","vendors~lazy_loaded_high_priority_components~lazy_loaded_low_priority_components.e4bc397bdb594c85b9eb.js","vendors~lazy_loaded_low_priority_components.c8c8d4909f6ad2a4f8fd.js","vendors~lazy_loaded_relay.924f984ed0bd537f91a5.js","vendors~main.bfc632c7e596260920d9.js","vendors~pdf.9f876162b6247e9c8463.js","app-ed1130a5682b113aa262.css","browsers_2767db756145c71a601d.css","lazy_loaded_high_priority_components.741c7e96ab70c0c859af.css","lazy_loaded_low_priority_components.9bc11844bc08b98743e2.css","main.6ecc7c3af8c7d1fe0eca.css","stylex-5ca894150e39e3bf05c3ff16d6419c5a.css"],unhashedResources:["apple-touch-icon.png","assets-manifest-2.2312.7.json","binary-transparency-manifest-2.2312.7.json","bryndan_write_20e48b2ec8c64b2a1ceb5b28d9bcc9d0.ttf","crossdomain.xml","favicon-48x48.ico","favicon-64x64.ico","favicon.ico","manifest-apple.json","manifest.json","notification_2a485d84012c106acef03b527bb54635.mp3","noto_emoji_regular_40c0691231b767bd3e693d583006a1ed.ttf","robots.txt","sequential-ptt-end_62ed28be622237546fd39f9468a76a49.mp3","sequential-ptt-middle_7fa161964e93db72b8d00ae22189d75f.mp3","whatsapp_pwa_apple_icon_128.png","whatsapp_pwa_apple_icon_16.png","whatsapp_pwa_apple_icon_192.png","whatsapp_pwa_apple_icon_32.png","whatsapp_pwa_apple_icon_512.png","whatsapp_pwa_apple_icon_512.svg","whatsapp_pwa_apple_icon_60.png","whatsapp_pwa_apple_icon_64.png","whatsapp_pwa_apple_icon_90.png","whatsapp_pwa_icon_128.png","whatsapp_pwa_icon_16.png","whatsapp_pwa_icon_192.png","whatsapp_pwa_icon_32.png","whatsapp_pwa_icon_512.png","whatsapp_pwa_icon_512.svg","whatsapp_pwa_icon_60.png","whatsapp_pwa_icon_64.png","whatsapp_pwa_icon_90.png","whatsapp-webclient-login_c09223f0813e7c3adc16476cba2a5d0d.mp4","whatsapp-webclient-login-hq_0e0caf2391158ebc09fe32edd1022d03.mp4"],l10n:{locales:{"[request].18382cbd2fea006fbd6b.js":"locales/[request].18382cbd2fea006fbd6b.js","af-json.25988698145e9540014c.js":"locales/af-json.25988698145e9540014c.js","af.71298ba5c78ce5b481b4.js":"locales/af.71298ba5c78ce5b481b4.js","ar-json.711fd42dae4c6fd2f162.js":"locales/ar-json.711fd42dae4c6fd2f162.js","ar-XB.3600c98d30dcb35d24a5.js":"locales/ar-XB.3600c98d30dcb35d24a5.js","ar.097039c02afd208115a6.js":"locales/ar.097039c02afd208115a6.js","az-json.ac2e57fcbbbbb4413bdf.js":"locales/az-json.ac2e57fcbbbbb4413bdf.js","az.7dd2f855230809896ab9.js":"locales/az.7dd2f855230809896ab9.js","bg-json.8c9b9e32ce35abebbcb5.js":"locales/bg-json.8c9b9e32ce35abebbcb5.js","bg.2f13824073edac1deeb9.js":"locales/bg.2f13824073edac1deeb9.js","bn-json.aba923e60c7e394e9c69.js":"locales/bn-json.aba923e60c7e394e9c69.js","bn.2b7eda3518036fee9436.js":"locales/bn.2b7eda3518036fee9436.js","ca-json.e1ddd3ad02984ad281a5.js":"locales/ca-json.e1ddd3ad02984ad281a5.js","ca.0d4768d3edb50116456d.js":"locales/ca.0d4768d3edb50116456d.js","cs-json.8f706df20382364fffe1.js":"locales/cs-json.8f706df20382364fffe1.js","cs.0c15e231687513b5301c.js":"locales/cs.0c15e231687513b5301c.js","da-json.68367cd9b489d673a413.js":"locales/da-json.68367cd9b489d673a413.js","da.2abdbafc03a737648d68.js":"locales/da.2abdbafc03a737648d68.js","de-json.635a09ebc28de2716054.js":"locales/de-json.635a09ebc28de2716054.js","de.a9b565e04453069881ba.js":"locales/de.a9b565e04453069881ba.js","el-json.2e2f8bac9a5cd25050cb.js":"locales/el-json.2e2f8bac9a5cd25050cb.js","el.1106c6b21a3459f09aae.js":"locales/el.1106c6b21a3459f09aae.js","en-json.d665be4bfc342067f9bd.js":"locales/en-json.d665be4bfc342067f9bd.js","en.3087636934407f68b5b1.js":"locales/en.3087636934407f68b5b1.js","es-json.216d36ef3b32ec9b6aea.js":"locales/es-json.216d36ef3b32ec9b6aea.js","es.a118d191a59e3cd3e4f7.js":"locales/es.a118d191a59e3cd3e4f7.js","et-json.bb6dcec63eadddda1d57.js":"locales/et-json.bb6dcec63eadddda1d57.js","et.48f4c1651914ae0ef480.js":"locales/et.48f4c1651914ae0ef480.js","fa-json.add0b10bdc06d66bc040.js":"locales/fa-json.add0b10bdc06d66bc040.js","fa.267f6691aac91dead999.js":"locales/fa.267f6691aac91dead999.js","fi-json.09e47b9960d46c913a04.js":"locales/fi-json.09e47b9960d46c913a04.js","fi.4a9c801cce39ca1c5990.js":"locales/fi.4a9c801cce39ca1c5990.js","fil-json.854682a02cf129cd18d5.js":"locales/fil-json.854682a02cf129cd18d5.js","fil.d62030c5eb8095bc50f1.js":"locales/fil.d62030c5eb8095bc50f1.js","fr-json.6a722501db21be51bddf.js":"locales/fr-json.6a722501db21be51bddf.js","fr.b19a6a5385d6e52e6240.js":"locales/fr.b19a6a5385d6e52e6240.js","gu-json.05725aa16edac5dc0179.js":"locales/gu-json.05725aa16edac5dc0179.js","gu.4abe68819df1537cb60f.js":"locales/gu.4abe68819df1537cb60f.js","he-json.4de4932347c09714371b.js":"locales/he-json.4de4932347c09714371b.js","he.5accc4a10d95814f9bc9.js":"locales/he.5accc4a10d95814f9bc9.js","hi-json.04623748ba320e493047.js":"locales/hi-json.04623748ba320e493047.js","hi.85e1c2d6be6c61d2a96c.js":"locales/hi.85e1c2d6be6c61d2a96c.js","hr-json.26f4a1ab2c647aeb620e.js":"locales/hr-json.26f4a1ab2c647aeb620e.js","hr.129dcf5f075791ed2324.js":"locales/hr.129dcf5f075791ed2324.js","hu-json.86402b15e7707a6554b7.js":"locales/hu-json.86402b15e7707a6554b7.js","hu.d4f85559e69ef8d897e3.js":"locales/hu.d4f85559e69ef8d897e3.js","id-json.d04a2590e276f1550977.js":"locales/id-json.d04a2590e276f1550977.js","id.3caf55864ef4148637f6.js":"locales/id.3caf55864ef4148637f6.js","it-json.0e525895f812306e10da.js":"locales/it-json.0e525895f812306e10da.js","it.6576592d85e5c8e69f8d.js":"locales/it.6576592d85e5c8e69f8d.js","ja-json.94a6aa6c1afdfd487041.js":"locales/ja-json.94a6aa6c1afdfd487041.js","ja.66c31b45a39035e5646d.js":"locales/ja.66c31b45a39035e5646d.js","kk-json.9c79f3aca84e14358caf.js":"locales/kk-json.9c79f3aca84e14358caf.js","kk.768738c6e8d115da1a98.js":"locales/kk.768738c6e8d115da1a98.js","kn-json.5419b0bfa599a0891b0b.js":"locales/kn-json.5419b0bfa599a0891b0b.js","kn.bf4eb8c1ca07aa77120c.js":"locales/kn.bf4eb8c1ca07aa77120c.js","ko-json.2a2b0f6065b666b83aac.js":"locales/ko-json.2a2b0f6065b666b83aac.js","ko.5c6e6b8ab0d1fb5d04ff.js":"locales/ko.5c6e6b8ab0d1fb5d04ff.js","lt-json.3e80fa820282c51969f1.js":"locales/lt-json.3e80fa820282c51969f1.js","lt.49a6edc30deba6e9550d.js":"locales/lt.49a6edc30deba6e9550d.js","lv-json.e733e7592b554576f470.js":"locales/lv-json.e733e7592b554576f470.js","lv.8ff3cab86e72841c517b.js":"locales/lv.8ff3cab86e72841c517b.js","mk-json.e3dae2dd84c1c28fd400.js":"locales/mk-json.e3dae2dd84c1c28fd400.js","mk.725b22a2a943dda1b64d.js":"locales/mk.725b22a2a943dda1b64d.js","ml-json.d3a42aa6a9d2f0d7612c.js":"locales/ml-json.d3a42aa6a9d2f0d7612c.js","ml.f41cc2522c7e949b3f7f.js":"locales/ml.f41cc2522c7e949b3f7f.js","mr-json.363fcf59a04eac2783df.js":"locales/mr-json.363fcf59a04eac2783df.js","mr.dc59e78e6557fc1451a9.js":"locales/mr.dc59e78e6557fc1451a9.js","ms-json.57c6062648341831d629.js":"locales/ms-json.57c6062648341831d629.js","ms.095e89f4e6f80ec7577b.js":"locales/ms.095e89f4e6f80ec7577b.js","nb-json.574df781e00246579b3e.js":"locales/nb-json.574df781e00246579b3e.js","nb.958fe6400fc021095a8a.js":"locales/nb.958fe6400fc021095a8a.js","nl-json.64f211438e8c51d31857.js":"locales/nl-json.64f211438e8c51d31857.js","nl.1d6335890684eea69475.js":"locales/nl.1d6335890684eea69475.js","pa-json.04cad7f495f36700584a.js":"locales/pa-json.04cad7f495f36700584a.js","pa.255355cb5b9471306ba0.js":"locales/pa.255355cb5b9471306ba0.js","pl-json.772b13461c108f2adbb2.js":"locales/pl-json.772b13461c108f2adbb2.js","pl.6aaa00146cfacb304444.js":"locales/pl.6aaa00146cfacb304444.js","pt-BR.d311c75c70f540cc7bd0.js":"locales/pt-BR.d311c75c70f540cc7bd0.js","pt-json.b0dc4a8741ba589e17a1.js":"locales/pt-json.b0dc4a8741ba589e17a1.js","pt.06b2dd75180dd3d9b1cd.js":"locales/pt.06b2dd75180dd3d9b1cd.js","ro-json.e5d70c52e212ae8440ef.js":"locales/ro-json.e5d70c52e212ae8440ef.js","ro.88ee66f64e9df5f90e0a.js":"locales/ro.88ee66f64e9df5f90e0a.js","ru-json.1f60f8858a0e4b180728.js":"locales/ru-json.1f60f8858a0e4b180728.js","ru.c74c17c1a512c446dd8f.js":"locales/ru.c74c17c1a512c446dd8f.js","sk-json.cf010b39a88cca8b24fa.js":"locales/sk-json.cf010b39a88cca8b24fa.js","sk.690b575b5c77211466c4.js":"locales/sk.690b575b5c77211466c4.js","sl-json.6676bc63c7892e7500fb.js":"locales/sl-json.6676bc63c7892e7500fb.js","sl.e025050d285afeb0bb73.js":"locales/sl.e025050d285afeb0bb73.js","sq-json.b298824d8b51e7071b91.js":"locales/sq-json.b298824d8b51e7071b91.js","sq.0945dc8cc7d143b39a30.js":"locales/sq.0945dc8cc7d143b39a30.js","sr-json.eaf850bf121aaf81858f.js":"locales/sr-json.eaf850bf121aaf81858f.js","sr.3582dc39761407a7c508.js":"locales/sr.3582dc39761407a7c508.js","sv-json.f3de250c2f26fcf74d1c.js":"locales/sv-json.f3de250c2f26fcf74d1c.js","sv.83d17c20c87178c060ff.js":"locales/sv.83d17c20c87178c060ff.js","sw-json.c01f5483f6489d0feebf.js":"locales/sw-json.c01f5483f6489d0feebf.js","sw.1501ce672f1a68025562.js":"locales/sw.1501ce672f1a68025562.js","ta-json.87dcf918cd8457a3da64.js":"locales/ta-json.87dcf918cd8457a3da64.js","ta.f4ad8f0a368c388d1bb5.js":"locales/ta.f4ad8f0a368c388d1bb5.js","te-json.fe15e3214a762dc46db8.js":"locales/te-json.fe15e3214a762dc46db8.js","te.d4e66a77f2eac2e6a094.js":"locales/te.d4e66a77f2eac2e6a094.js","th-json.389a71b73cf6942381c6.js":"locales/th-json.389a71b73cf6942381c6.js","th.325296618929561f88b9.js":"locales/th.325296618929561f88b9.js","tr-json.9225266375a6144c40fd.js":"locales/tr-json.9225266375a6144c40fd.js","tr.f0b27d13dd1481872215.js":"locales/tr.f0b27d13dd1481872215.js","uk-json.896a06e70d5fa7821921.js":"locales/uk-json.896a06e70d5fa7821921.js","uk.88ce33e19ff170c55d3b.js":"locales/uk.88ce33e19ff170c55d3b.js","ur-json.c5c7df488a39b264c1c9.js":"locales/ur-json.c5c7df488a39b264c1c9.js","ur.7af858308a917a6cd634.js":"locales/ur.7af858308a917a6cd634.js","uz-json.cf8ffb2271e0350c737d.js":"locales/uz-json.cf8ffb2271e0350c737d.js","uz.6f57a2f4a82c907286f1.js":"locales/uz.6f57a2f4a82c907286f1.js","vi-json.b3221fce07cc46c1e361.js":"locales/vi-json.b3221fce07cc46c1e361.js","vi.a948998a94a43dd9bfe6.js":"locales/vi.a948998a94a43dd9bfe6.js","zh-CN-json.38d2a410caee876abb49.js":"locales/zh-CN-json.38d2a410caee876abb49.js","zh-CN.e9005526940f74aad81c.js":"locales/zh-CN.e9005526940f74aad81c.js","zh-HK-json.7082091be98973ef367c.js":"locales/zh-HK-json.7082091be98973ef367c.js","zh-HK.11bc54e0a8c895b59fa8.js":"locales/zh-HK.11bc54e0a8c895b59fa8.js","zh-TW-json.d423ed1bfe02fcc65122.js":"locales/zh-TW-json.d423ed1bfe02fcc65122.js","zh-TW.15f84914a7800a441843.js":"locales/zh-TW.15f84914a7800a441843.js"},styles:{}},releaseDate:1678815257254}},6857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=new RegExp(`(${self.registration.scope}|https://web.whatsapp.com/|https://dyn.web.whatsapp.com/)([^?]*)(?:\\?(.*))?`);class r{static parseUrl(e){const t=e.match(n);if(!t)return;let r;if(t[3]){const n={},i=new Set;t[3].split("&").forEach((t=>{const[r,o]=t.split("="),s=r.toLowerCase();if(i.has(s))throw __LOG__(4,void 0,new Error)`Unexpected duplicated query param: ${r}=${o} in the url: ${e}`,new Error("Detected url with duplicated query param");i.add(s),n[r]=o})),r=n}return{base:t[1],relativePath:t[2],queryParams:r}}static convertToUrl(e,t){const n=Object.keys(t).map((e=>[e,t[e]].map(encodeURIComponent).join("="))).join("&");return n.length?e.endsWith("/")?`${e}?${n}`:`${e}/?${n}`:e}constructor(e,t){this.matchFetch=()=>!1,this.matchAction=()=>!1,this.matchInstall=()=>!1,this.matchActivate=()=>!1,this.matchPush=()=>!1,this.matchNotificationClick=()=>!1,this.cache=e,this.store=t}}t.default=r,r.RequestType={GET:"GET"}},5791:(e,t,n)=>{self.__LOG__=n(4453).cM,self.SEND_LOGS=n(4453).ws},4453:(e,t,n)=>{"use strict";var r=n(5318);t.cM=void 0,t.ws=w;var i=r(n(8926)),o=r(n(6432)),s=r(n(1054)),a=r(n(3948)),c=r(n(9194));const u="log",l="info",d="warn",f="error",h="errorVerbose",p=1e3;let _,v=[],y=Promise.resolve();function g(e){return new Promise((t=>{setTimeout(t,e)}))}const m=function(e,t){let n,r;return function i(){if(!n){const o=Array.prototype.slice.call(arguments);return n=new Promise((function(e){self.setTimeout((function(){n=null,r&&(e(i.apply(null,o)),r=!1),e()}),t)})),Promise.resolve(e.apply(null,o))}return r=!0,n}}((function(){return b.apply(this,arguments)}),500);function b(){return(b=(0,i.default)((function*(){if(0!==v.length)try{yield a.default.broadcast(c.default.LOG,{buffer:v}),v=[]}catch(e){}}))).apply(this,arguments)}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length&&v.push({level:h,message:t}),_=_||S(),_}function S(){return E.apply(this,arguments)}function E(){return(E=(0,i.default)((function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{let t;try{yield y,t=yield a.default.broadcast(c.default.UPLOAD_LOGS,{buffer:v})}catch(n){if(!(e<3))throw new Error("Max generation reached. Failed to upload.");yield g(p),t=yield S(e+1)}return _=void 0,t}catch(e){__LOG__(3)`Unable to send upload request, error: ${e}`,_=void 0}}))).apply(this,arguments)}const A=(0,o.default)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return function(o){for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];const l=(0,s.default)(o,c,!t);let d;return n&&(d={name:n.name,stack:n.stack}),j(T(e,t),[l],d,r,i),l}}),((e,t,n,r,i)=>n||i?null:String(e)+String(Boolean(t))+String(Boolean(r))));function j(e,t,n,r,i){0!==t.length&&(v.push({level:e,message:t,error:n,attachedToSendLogs:r,extraTags:i}),y=m())}function T(e,t){switch(e){case 1:return l;case 2:return u;case 3:return d;case 4:return t?h:f}throw new Error(`Invalid numeric level ${e}${t?", verbose":""}`)}t.cM=A,self.addEventListener("error",(e=>{w(`Global Scope error: ${String(e.error)}, stack: ${e.error?e.error.stack:""}`)}))},3986:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(6857));class o extends i.default{constructor(){super(...arguments),this.matchNotificationClick=()=>!0,this.onNotificationClick=e=>{}}}t.default=o},2083:(e,t,n)=>{"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(n(3563)).default;t.default=i},3563:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=r(n(9619)),s=r(n(1373));const a={prefs:{},pp:{},stickers:{}};let c;class u{constructor(e){this.storeName=e,this.storeCache={}}_callAction(e,t){var n=this;return(0,i.default)((function*(){const r=(yield c||(c=new Promise(((e,t)=>{const n=(0,o.default)(s.default,"indexedDB").open("sw",2);n.onupgradeneeded=e=>{const t=e.target.result;e.target.transaction.onerror=e=>{__LOG__(3)`Unable to upgrade database, error: ${e.target.error}`};for(const e in a)t.objectStoreNames.contains(e)&&t.deleteObjectStore(e),t.createObjectStore(e,a[e])},n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{t(e.target.error)}})).catch((e=>{throw __LOG__(3)`Unable to open sw database, error: ${e}`,c=void 0,e})))).transaction([n.storeName],"readwrite").objectStore(n.storeName),i=r[e].apply(r,t);return new Promise(((e,t)=>{i.onsuccess=t=>{e(t.target.result)},i.onerror=e=>{t(e.target.error)}}))}))()}get(e){return void 0!==this.storeCache[e]?this.storeCache[e]:this.storeCache[e]=this._callAction("get",[e]).catch((t=>{__LOG__(3)`Unable to fetch from db, object store: ${this.storeName}, key: ${e}, error: ${t}`,this.storeCache[e]=void 0}))}put(e,t){return this.storeCache[e]=Promise.resolve(t),this._callAction("put",[t,e]).catch((n=>{__LOG__(3)`Unable to put to db, object store: ${this.storeName}, key: ${e}, value: ${t}, error: ${n}`}))}delete(e){return this.storeCache[e]=Promise.resolve(void 0),this._callAction("delete",[e]).catch((t=>{__LOG__(3)`Unable to delete in db, object store: ${this.storeName}, key: ${e}, error: ${t}`}))}clear(){return this.storeCache={},this._callAction("clear").catch((e=>{__LOG__(3)`Unable to clear object store: ${this.storeName}, error: ${e}`}))}}const l={ObjectStore:u};for(const e in a)l[e]=new u(e);var d=l;t.default=d},6278:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=r(n(9194)),s=r(n(6857)),a=r(n(5420));class c extends s.default{constructor(){var e;super(...arguments),e=this,this.matchFetch=e=>{const{request:t}=e,n=s.default.parseUrl(t.url);return t.method===s.default.RequestType.GET&&!!n&&("https://web.whatsapp.com/"===n.base||"https://dyn.web.whatsapp.com/"===n.base)&&"pp"===n.relativePath},this.onFetch=function(){var t=(0,i.default)((function*(t){const{request:n}=t,r=s.default.parseUrl(n.url);if(!r||!r.queryParams)return self.fetch(n);const{e:i,t:o,u:c,i:u,n:l}=r.queryParams,d=`${r.base}${r.relativePath}?t=${o}&u=${c}&i=${u}&n=${l}`,f=i?self.decodeURIComponent(i):n;a.default.assertIsAllowedHost(i?self.decodeURIComponent(i):n.url);const h=yield e.cache.matchOrFetch(f,d);return h.ok&&e.store.get(c).then((t=>{if(t!==u)return Promise.all([e.removePPFromCache(c,u),e.store.put(c,u)])})),a.default.assertIsAllowedHost(h.url),h}));return function(){return t.apply(this,arguments)}}(),this.matchAction=e=>o.default.REMOVE_PP===e||o.default.LOGOUT===e,this.onAction=(e,t)=>{switch(e){case o.default.REMOVE_PP:const e=self.encodeURIComponent(t);return this.store.get(e).then((t=>{if(t)return Promise.all([this.removePPFromCache(e,t),this.store.delete(e)])})).then((()=>{}));default:return Promise.all([this.cache.reset(),this.store.clear()]).then((()=>{}))}}}removePPFromCache(e,t){return Promise.all([this.cache.delete(`https://web.whatsapp.com/pp?t=s&u=${e}&i=${t}`),this.cache.delete(`https://web.whatsapp.com/pp?t=l&u=${e}&i=${t}`),this.cache.delete(`https://dyn.web.whatsapp.com/pp?t=s&u=${e}&i=${t}`),this.cache.delete(`https://dyn.web.whatsapp.com/pp?t=l&u=${e}&i=${t}`)])}}t.default=c},2100:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=n(9026),s=r(n(9194)),a=r(n(6857));class c extends a.default{constructor(){super(...arguments),this.matchInstall=()=>!0,this.onInstall=()=>{},this.matchActivate=()=>!0,this.onActivate=()=>{},this.matchPush=()=>!0,this.onPush=e=>{e.waitUntil(Promise.resolve())},this.matchAction=e=>e===s.default.STOP_COMMS,this.onAction=function(){var e=(0,i.default)((function*(){(0,o.getComms)()&&(yield(0,o.stopComms)(),__LOG__(2)`[push-notification] Successfully stopped Comms in service worker`)}));return function(){return e.apply(this,arguments)}}()}}t.default=c},2543:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(7674),o=r(n(6857));class s extends o.default{constructor(){super(...arguments),this.matchFetch=e=>{const{request:t}=e,n=new URL(t.url),r=new URLSearchParams(n.search);return t.method===o.default.RequestType.GET&&r.has(i.IS_MMS_URL_SEARCH_PARAM)&&(0===n.pathname.indexOf("/mms/sticker/")||"sticker"===r.get(i.MMS_URL_MEDIA_TYPE_SEARCH_PARAM))},this.onFetch=e=>this.cache.matchOrFetch(e.request)}}t.default=s},5420:(e,t)=>{"use strict";function n(e){const t=new URL(e),n=t.host;if("https:"!==t.protocol||!/\.whatsapp\.(net|com)(:\d+)?$/.test(n))throw __LOG__(4,void 0,new Error,!0)`Unexpected url`,SEND_LOGS("SW: Potential XSS attack"),new Error("URL is not of allowed host or protocol")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={manuallyCloneRequest:function(e,t,r){let i=r;if("string"==typeof e){i=i||{},i.credentials="same-origin";const r=null!=t?t:e;return n(r),new Request(r,i)}const o=null!=t?t:e.url;return n(o),new Request(o||e.url,{method:void 0===i.method?e.method:i.method,headers:void 0===i.headers?e.headers:i.headers,mode:void 0===i.mode?e.mode:i.mode,credentials:"same-origin",cache:void 0===i.cache?e.cache:i.cache,redirect:void 0===i.redirect?e.redirect:i.redirect,integrity:void 0===i.integrity?e.integrity:i.integrity})},getIndexPath:function(e){return(null==e?void 0:e.locale)?`%F0%9F%8C%90/${e.locale}`:""},assertIsAllowedHost:n};t.default=r},4414:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStreamer=void 0,t.parseClientRange=f;var i=r(n(8926)),o=n(9093),s=n(8358),a=n(8615),c=r(n(3948)),u=r(n(9194)),l=r(n(5420));const d=65536;function f(e){const{clientRangeStartString:t,clientRangeEndString:n}=function(e){const t=e.headers.get("Range");if(t){const[e,n]=t.replace("bytes=","").split("-");return{clientRangeStartString:e,clientRangeEndString:n}}const n=new URL(e.url);return{clientRangeStartString:n.searchParams.get("bytesstart"),clientRangeEndString:n.searchParams.get("bytesend")}}(e),r=parseInt(t,10),i=parseInt(n,10);return{clientRangeStart:isNaN(r)?0:r,clientRangeEnd:isNaN(i)?null:i}}t.VideoStreamer=class{constructor(e,t,n){this.generation=0;const{sidecar:r}=t,i=[];for(let e=0;e<r.byteLength;e+=a.HMAC_SIZE)i.push(r.slice(e,e+a.HMAC_SIZE));this.cryptoKeys={iv:t.iv,sidecar:i,encKey:t.encKey,macKey:t.macKey},this.streamData=n,this.clientId=e}fetchAndDecrypt(e){var t=this;return(0,i.default)((function*(){const{clientUrl:n,msgKey:r}=t.streamData,{clientRangeStart:i,clientRangeEnd:o}=f(e),{serverRangeStart:s,serverRangeEnd:l}=t.computeServerRange(i,o),d=t.createServerRequest(e,s,l,n),h=yield fetch(d);if(404===h.status)return t.handleRMR(e,r);if(h.status>=400)return __LOG__(2)`sw:videoStreaming:processRequest server returns ${h.status} error`,t.generation++,c.default.request(t.clientId,u.default.EXP_BACKOFF,{generation:t.generation}).then((()=>t.fetchAndDecrypt(e)));t.generation=0;const p=yield h.arrayBuffer(),_=p.byteLength;if(!p||_<a.BLOCK_SIZE)return __LOG__(2)`sw:videoStreaming:processRequest ciphertext is too short - ${_} bytes`,new Response(`Ciphertext is too short - ${_} bytes`,{status:500});yield t.validateSidecar(s,p);const{ciphertext:v,iv:y}=yield(0,a.cleanupCiphertextAndIv)({serverRangeStart:s,ciphertext:p,mediaKeys:t.cryptoKeys}),g=yield(0,a.decrypt)({ciphertext:v,iv:y,mediaKeys:t.cryptoKeys}),m=t.cleanupPlaintext(g,{clientRangeStart:i,clientRangeEnd:o},{serverRangeStart:s,serverRangeEnd:l}),b=t.createClientResponse(h,m,i);return t.sendBackArrayBuffer(i,m),b}))()}handleRMR(e,t){var n=this;return(0,i.default)((function*(){const r=yield c.default.request(n.clientId,u.default.REQUEST_RMR,{key:t});return n.cryptoKeys.encKey=r.encKey,n.cryptoKeys.iv=r.iv,n.streamData.clientUrl=r.clientUrl,n.streamData.size=r.size,n.fetchAndDecrypt(e)}))()}cleanupPlaintext(e,t,n){let{clientRangeStart:r,clientRangeEnd:i}=t,{serverRangeStart:o,serverRangeEnd:s}=n;const c=0===o?0:r-(o+a.BLOCK_SIZE),u=null!=i?s-i:0;return e.slice(c,e.byteLength-u)}validateSidecar(e,t){var n=this;return(0,i.default)((function*(){let r=t;const{macKey:i,iv:o,sidecar:c}=n.cryptoKeys;let u,l;0===e?(u=0,l=o):(u=(e+a.BLOCK_SIZE)/d,l=r.slice(0,a.BLOCK_SIZE),r=r.slice(a.BLOCK_SIZE));const f=r.byteLength/d,h=yield self.crypto.subtle.importKey("raw",new Uint8Array(i),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=[];for(let e=0;e<f;e++){const t=c[u+e],i=e*d,o=r.slice(i,i+d),f=l;l=o.slice(d-a.BLOCK_SIZE,d-a.BLOCK_SIZE+a.BLOCK_SIZE);const _=(0,s.concatTypedArrays)(Uint8Array,[new Uint8Array(f),new Uint8Array(o)]);p.push(n.validateChunk(_,h,t))}return Promise.all(p)}))()}validateChunk(e,t,n){return(0,i.default)((function*(){const r=(yield self.crypto.subtle.sign({name:"HMAC"},t,e)).slice(0,a.HMAC_SIZE);if(!(0,o.arrayBuffersEqual)(r,n))return Promise.reject(new Error("Invalid Chunk: Does not match sidecar."))}))()}createClientResponse(e,t,n){const{size:r}=this.streamData,{contentRangeStart:i,contentRangeEnd:o}=this.getContentRange(n,t),s=new Headers(e.headers);s.set("Content-Range",`bytes ${i}-${o}/${r}`),s.set("Content-Length",`${t.byteLength}`);return new Response(t,{status:200===e.status?206:e.status,statusText:e.statusText,headers:s})}getContentRange(e,t){return{contentRangeStart:e,contentRangeEnd:e+t.byteLength-1}}sendBackArrayBuffer(e,t){const{contentRangeStart:n,contentRangeEnd:r}=this.getContentRange(e,t);c.default.request(this.clientId,u.default.SEND_STREAMING_CHUNK,{msgKey:this.streamData.msgKey,data:{start:n,end:r,buffer:t}})}createServerRequest(e,t,n,r){const i=new URL(r);i.searchParams.set("bytestart",t.toString()),i.searchParams.set("byteend",n.toString());return l.default.manuallyCloneRequest(e,i.toString(),{credentials:"omit",headers:new Headers({}),mode:"cors",referrer:e.referrer})}computeServerRange(e,t){let n=e,r=t;return n=e?this.roundDown(e,d):0,r=null!=t&&0!==t?this.roundUp(t,d)-1:n+1572864-1,n>0&&(n-=a.BLOCK_SIZE),{serverRangeStart:n,serverRangeEnd:r}}roundUp(e,t){return Math.ceil(e/t)*t}roundDown(e,t){return Math.floor(e/t)*t}}},9906:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8926)),o=r(n(3948)),s=r(n(9194)),a=r(n(6857)),c=n(4414);class u extends a.default{constructor(){super(...arguments),this.matchFetch=e=>{const{request:t}=e,n=a.default.parseUrl(t.url);return!!(t.method===a.default.RequestType.GET&&n&&n.queryParams&&n.queryParams.key&&t.url.match("/stream/video"))},this.onFetch=function(){var e=(0,i.default)((function*(e){const{request:t,client:n,clientId:r}=e,i=a.default.parseUrl(t.url),u=r||(null==n?void 0:n.id);if(!u)return Promise.reject(new Error("No client id found."));const{cryptoKeys:l,streamData:d}=yield o.default.request(u,s.default.REQUEST_STREAMING_INFO,{key:i.queryParams.key});return new c.VideoStreamer(u,l,d).fetchAndDecrypt(t)}));return function(){return e.apply(this,arguments)}}(),this.matchAction=e=>e===s.default.STREAMING_SUPPORTED,this.onAction=()=>!(!self.crypto||!self.crypto.subtle&&!self.crypto.webkitSubtle)}}t.default=u},2329:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(5318);n(2271),n(5791);var t=e(n(1157)),r=e(n(3933)),i=e(n(2612)),o=e(n(8043)),s=e(n(7719)),a=e(n(3986)),c=e(n(2083)),u=e(n(6278)),l=e(n(2100)),d=e(n(2543)),f=e(n(9906));const h=new s.default("wa-stickers"),p=[new u.default(new s.default("wa-pp"),c.default.pp),new f.default,new o.default(new s.default("wa2.2312.7"),c.default.prefs),new r.default(new s.default("wa-assets")),new d.default(h,c.default.stickers),new t.default,new l.default,new a.default];(0,i.default)(p)})()})();