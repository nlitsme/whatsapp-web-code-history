/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[7964],{29127:(e,t,s)=>{var a={"./aa.json":[23205,1694],"./af.json":[88789,8288],"./ar.json":[58854,8801],"./bn.json":[93511,677],"./bo.json":[73571,9861],"./de.json":[3313,88],"./el.json":[24689,3004],"./en.json":[90084,7494],"./es.json":[96598,4739],"./fil.json":[46387,3565],"./fr.json":[12785,7334],"./gu.json":[50387,1244],"./ha.json":[54702,2146],"./hi.json":[27605,8606],"./hu.json":[92922,1389],"./id.json":[75608,4132],"./it.json":[54800,5881],"./kn.json":[78930,6700],"./ml.json":[7208,4794],"./mr.json":[30163,2771],"./ms.json":[13390,9911],"./nl.json":[23129,7055],"./pa.json":[66384,6032],"./pcm.json":[53070,5951],"./pl.json":[75495,9566],"./pt-BR.json":[24135,3721],"./pt.json":[8897,1992],"./ru.json":[34813,887],"./sw.json":[95881,6606],"./ta.json":[17574,1397],"./te.json":[96564,4771],"./th.json":[38728,5955],"./tr.json":[38704,8962],"./uk.json":[95304,5282],"./ur.json":[27814,2619],"./vi.json":[22521,5315],"./zh-HK.json":[17133,7920],"./zu.json":[54064,996]};function i(e){if(!s.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return s.e(t[1]).then((()=>s.t(i,3)))}i.keys=()=>Object.keys(a),i.id=29127,e.exports=i},16446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"number":return`n:${e}`;case"string":return`s:${e}`;case"boolean":return`b:${e.toString()}`;case"object":{let t=s.get(e);return null==t&&(t=a++,s.set(e,t)),`o:${t}`}default:throw new Error("Unsupported type")}};const s=new WeakMap;let a=0},31935:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{id:t,name:s,imageHash:a,currency:d}=e,u=e.catalogWid.toString(),c=i.default.findCart(u),h=c.cartItemCollection.get(t),f=(null==h?void 0:h.quantity)||0,p=Math.min(f+1,n.MAX_QUANTITY),m={id:t,priceAmount1000:(0,r.getActivePrice)(e),currency:d,name:s,imageHash:a,quantity:p};c.cartItemCollection.add(m,{merge:!0}),c.trigger("change:cartItemCollection");const _=f+1>n.MAX_QUANTITY?l.QUANTITY_LIMIT_REACHED:l.SUCCESS;return(0,o.default)(c),{newCount:p,status:_}},t.AddToCartStatus=void 0;var i=a(s(25523)),n=s(53685),r=s(60952),o=a(s(83622));const l=s(54302).Mirrored(["SUCCESS","QUANTITY_LIMIT_REACHED"]);t.AddToCartStatus=l},64883:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const l=s(96082).default;if(t&&t.id.toString()===e)return(0,o.jsx)(l,{sellerJid:e,chat:t});i.default.openModal((0,o.jsx)(n.default,{chatId:(0,r.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{i.default.openDrawerRight((0,o.jsx)(l,{sellerJid:e,chat:t}),"slide-left",void 0,a||void 0)}),100)},msgText:null}),{transition:"modal-flow"})};var i=a(s(91952)),n=a(s(78970)),r=s(89573),o=s(85893)},83622:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.updateCart)(e)};var a=s(62010)},61670:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDelete=function(e){return p((0,u.unproxy)(e))};var i=s(6467),n=s(58380),r=a(s(91952)),o=s(44568),l=a(s(12950)),d=a(s(2408)),u=s(15298),c=a(s(59606)),h=s(85893);function f(e){let t;switch(e){case n.KIND.GROUP:t=d.default.t(127);break;case n.KIND.BROADCAST:t=d.default.t(76);break;case n.KIND.CHAT:default:t=d.default.t(88)}return new i.ActionType(t)}function p(e){if(e.promises.sendDelete)return e.promises.sendDelete;const t=e.getLastMsgKeyForAction(),s=t?e.msgs.get(t):void 0,a=e.promises.sendDelete=(0,o.sendConversationDelete)(e.id,t,e.getLastMsgKeyForAction.bind(e)),u=e.kind,m=a.then((function(t){if(200===t.status)switch(c.default.removeAllLabelsMD(e),u){case n.KIND.GROUP:return l.default.supportsFeature(l.default.F.MD_BACKEND)?new i.ActionType(d.default.t(126)):new i.ActionType(d.default.t(125));case n.KIND.BROADCAST:return l.default.supportsFeature(l.default.F.MD_BACKEND)?new i.ActionType(d.default.t(75)):new i.ActionType(d.default.t(74));case n.KIND.CHAT:return l.default.supportsFeature(l.default.F.MD_BACKEND)?new i.ActionType(d.default.t(87)):new i.ActionType(d.default.t(86))}else if(t.status>=400)switch(u){case n.KIND.GROUP:return new i.ActionType(d.default.t(124));case n.KIND.BROADCAST:return new i.ActionType(d.default.t(73));case n.KIND.CHAT:return new i.ActionType(d.default.t(85))}})).catch((function(){let t;switch(__LOG__(3)`models:chat:sendDelete dropped`,u){case n.KIND.GROUP:t=d.default.t(124);break;case n.KIND.BROADCAST:t=d.default.t(73);break;case n.KIND.CHAT:default:t=d.default.t(85)}return new i.ActionType(t,{actionText:d.default.t(224),actionHandler:()=>p(e)})}));return r.default.openToast((0,h.jsx)(i.ActionToast,{id:(0,i.genId)(),initialAction:f(u),pendingAction:m})),a.then((function(a){if(200===a.status&&!a._duplicate){const a=e.getLastMsgKeyForAction();t&&t.equals(a)||t===a?e.delete():e.deleteMsgsBeforeMsgInclusive(s)}})).finally((()=>{e.promises.sendDelete=null}))}},45801:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){if(!e.hasEstablishedE2EESession){var t,s,i,n;return e.isGroup&&(null!==(t=null===(s=e.groupMetadata)||void 0===s?void 0:s.participants)&&void 0!==t?t:[]).length>256?Promise.resolve():(e.hasEstablishedE2EESession=!0,(0,a.eagerlyEstablishE2EESession)(e.isGroup?(null!==(i=null===(n=e.groupMetadata)||void 0===n?void 0:n.participants)&&void 0!==i?i:[]).map((e=>e.id)):[e.id]))}return Promise.resolve()}((0,i.unproxy)(e))};var a=s(56116),i=s(15298)},79465:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.apply(this,arguments)};var i=a(s(48926)),n=a(s(91952)),r=s(62238);function o(){return(o=(0,i.default)((function*(e){const t=yield(0,r.findChat)(e.sender);(yield n.default.openChatBottom(t))&&(t.composeQuotedMsg=e,e.chat&&(t.composeQuotedMsgRemoteJid=e.chat.id))}))).apply(this,arguments)}},52955:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const a=(0,l.getMaybeMeUser)(),h=e.msgContextInfo(s.id),f=(0,i.default)((0,i.default)({type:"buttons_response",ack:r.default.ACK.CLOCK,from:a,id:new d.default({from:a,to:s.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:n.default.globalUnixTime(),to:s.id},h),{},{buttonsResponse:{selectedButtonId:t.id,selectedDisplayText:t.displayText,type:o.ButtonsResponseMessageType.DISPLAY_TEXT},body:t.displayText||""});return(0,c.addAndSendMsgToChat)(s,f)[1]};var i=a(s(81109)),n=a(s(25142)),r=a(s(55454)),o=s(60934),l=s(86723),d=a(s(77043)),u=a(s(17754)),c=s(35339);s(88300)},66314:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=e.chat,a=e.msgContextInfo(s.id),h=(0,l.getMaybeMeUser)(),f=(0,i.default)((0,i.default)({type:"list_response",ack:r.default.ACK.CLOCK,from:h,id:new d.default({from:h,to:s.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:n.default.globalUnixTime(),to:s.id},a),{},{listResponse:{listType:o.ListResponseMessageListType.SINGLE_SELECT,title:t.title,description:t.description,singleSelectReply:{selectedRowId:t.rowId}},body:(t.title||"")+(t.description?`\n${t.description}`:"")});return(0,c.addAndSendMsgToChat)(s,f)[1]};var i=a(s(81109)),n=a(s(25142)),r=a(s(55454)),o=s(60934),l=s(86723),d=a(s(77043)),u=a(s(17754)),c=s(35339);s(88300)},30239:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendTextMsgToChat=function(e,t,s={}){return function(){return x.apply(this,arguments)}((0,E.unproxy)(e),t,s)};var i=a(s(48926)),n=a(s(41609)),r=a(s(91747)),o=a(s(57557)),l=a(s(25142)),d=a(s(55454)),u=s(86723),c=a(s(40907)),h=a(s(12950)),f=s(30333),p=s(52548),m=a(s(92954)),_=a(s(77043)),g=s(83271),v=s(42805),S=a(s(17754)),C=s(6560),y=(s(88300),a(s(65565))),E=s(15298),b=a(s(9810)),T=s(89573),M=s(22997);function x(){return(x=(0,i.default)((function*(e,t,s={}){var a,i;const E=(t||"").trim(),{linkPreview:x,quotedMsg:I,mentionedJidList:P,quotedMsgAdminGroupJid:A,selectedId:N,selectedIndex:O,ctwaContext:w}=s;if(""===E)return Promise.resolve();(0,g.clearPresence)(e);const D=e.id,j=(0,u.getMaybeMeUser)();let R;h.default.supportsFeature(h.default.F.MD_BACKEND)?e.isGroup&&(R=(0,T.toUserWid)(j)):R=void 0;const L=new _.default({from:j,to:D,id:(0,S.default)(),participant:R,selfDir:"out"});let k;I?k=I.msgContextInfo(e.id):A&&(k={quotedRemoteJid:A});const F=null==x||null==x.mediaKeyTimestamp||(0,b.default)(x.mediaKeyTimestamp)?x:(0,o.default)(x,["mediaKey","mediaKeyTimestamp","thumbnailHQ","thumbnailDirectPath","thumbnailSha256","thumbnailEncSha256","thumbnailHeight","thumbnailWidth"]),B=(0,r.default)({id:L,body:E,type:"chat",subtype:F&&!(0,n.default)(F)?"url":null,t:l.default.globalUnixTime(),from:j,to:D,self:"out",isNewMsg:!0,local:!0,ack:d.default.ACK.CLOCK,urlText:e.urlText,urlNumber:e.urlNumber},F||{},k||{},{mentionedJidList:P},{ctwaContext:w});if(e.urlText&&(e.urlText=void 0),e.urlNumber&&(e.urlNumber=void 0),null!=O&&(B.type="template_button_reply",B.selectedId=N,B.selectedIndex=O),B.type!==d.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(B.ephemeralDuration=e.getEphemeralSetting());const t=e.getEphemeralSettingTimestamp();null!=t&&(B.ephemeralSettingTimestamp=t);const s=e.getDisappearingModeInitiator();null!=s&&(B.disappearingModeInitiator=s)}if(y.default.bspSystemMessageEnabled){const t=(0,v.getContactPrivacyMode)(e.id);null!=t&&(B.privacyModeWhenSent=t)}const G=new m.default(B),U=(0,c.default)(G,e);h.default.supportsFeature(h.default.F.MD_BACKEND)&&(G.wamMessageSendPerfReporter=new M.MessageSendPerfReporter(G)),U&&e.msgs.add(U),e.msgs.add(G),null===(a=G.wamMessageSendPerfReporter)||void 0===a||a.postRenderedEvent();const V=U?[U,B]:[B];return I&&I.type===d.default.MSG_TYPE.PRODUCT&&(0,f.logProductMessageBusinessSend)(I,I.sessionId),yield(0,p.storeMessages)(V,e.id),null===(i=G.wamMessageSendPerfReporter)||void 0===i||i.postSavedEvent(),(0,C.sendMsgRecord)(G)}))).apply(this,arguments)}},56690:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchive=function(e,t){return h((0,u.unproxy)(e),t)};var n=s(6467),r=s(85099),o=i(s(91952)),l=a(s(13540)),d=i(s(2408)),u=s(15298),c=s(85893);function h(e,t,s=(0,n.genId)()){if(e.archive===t)return Promise.reject(new l.ActionError);const{promises:a}=e;if(a.setArchive)return a.setArchive;const i=e.getLastMsgKeyForAction(),u=(0,r.sendConversationArchive)(e.id,t,i).cancellable(),f=t?new n.ActionType(d.default.t(80)):new n.ActionType(d.default.t(107)),p=u.then((a=>{let i;return 200===a.status?(i=t?d.default.t(79):d.default.t(106),new n.ActionType(i,{actionText:d.default.t(228),actionHandler:()=>h(e,!t,s)})):a.status>=400?t?new n.ActionType(d.default.t(78)):new n.ActionType(d.default.t(105)):void 0})).catch((()=>{__LOG__(3)`models:chat:setArchive dropped`;const a=t?d.default.t(78):d.default.t(105);return new n.ActionType(a,{actionText:d.default.t(224),actionHandler:()=>h(e,t,s)})}));o.default.openToast((0,c.jsx)(n.ActionToast,{id:s,initialAction:f,pendingAction:p}));const m=a.setArchive=u.then((s=>{200!==s.status||s._duplicate||(e.archive=t,t&&(e.pin=void 0))})).finally((()=>{a.setArchive=null}));return m.archive=t,m}},3242:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t){return c((0,d.unproxy)(e),t)};var i=s(57148),n=s(6467),r=a(s(91952)),o=a(s(2408)),l=s(90127),d=s(15298),u=s(85893);function c(e,t,s=(0,n.genId)()){const{promises:a}=e;a.setPin&&a.setPin.cancel();let d,h=0;const f=(0,i.unixTimeMs)();t?h=f:d=e.pin;const p=(0,l.setPin)(e.id,h,d,f).cancellable(),m=t?new n.ActionType(o.default.t(104)):new n.ActionType(o.default.t(114)),_=p.then((()=>{const a=t?o.default.t(103):o.default.t(113);return new n.ActionType(a,{actionText:o.default.t(228),actionHandler:()=>c(e,!t,s)})})).catch((a=>{if(405===a.status)return new n.ActionType(o.default.t(102));if(a.status>=400)return t?new n.ActionType(o.default.t(101)):new n.ActionType(o.default.t(112));__LOG__(3)`models:chat:setPin dropped`;const i=t?o.default.t(101):o.default.t(112);return new n.ActionType(i,{actionText:o.default.t(224),actionHandler:()=>c(e,t,s)})}));return r.default.openToast((0,u.jsx)(n.ActionToast,{id:s,initialAction:m,pendingAction:_})),a.setPin=p.then((t=>{t._duplicate||(e.pin=h)})).finally((()=>{a.setPin=null}))}},60651:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findCommonGroups=function(e){const t=(0,d.unproxy)(e),{commonGroups:a,id:u,promises:c}=t;if(c.findCommonGroups)return c.findCommonGroups;if(a&&!a.stale)return Promise.resolve();return c.findCommonGroups=(0,l.default)(u).then((e=>{const n=(0,i.default)(e.map((e=>s(84758).default.get(e))));return a?(a.set(n),a.stale=!1):t.commonGroups=new r.default(n,u),!0})).catch((0,n.filteredCatch)(o.ServerStatusCodeError,(e=>(__LOG__(3)`models:Contact:findCommonGroups error: ${e.status}`,Promise.reject(new Error("models:Contact:findCommonGroups error: "+e.status)))))).finally((()=>{c.findCommonGroups=null}))};var i=a(s(39693)),n=s(55084),r=a(s(91427)),o=s(54647),l=a(s(49262)),d=s(15298)},62244:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(91952)),n=a(s(75940)),r=a(s(2408)),o=s(85893);var l=({title:e=r.default.t(479),body:t=r.default.t(478)}={})=>{i.default.openModal((0,o.jsx)(n.default,{title:e,okText:r.default.t(2085),onOK:()=>i.default.closeModal(),children:t}))};t.default=l},70991:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return function(e){if(e.groupInviteCodePromise)return e.groupInviteCodePromise;return e.groupInviteCodePromise=(0,l.sendQueryGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).finally((()=>{e.groupInviteCodePromise=null}))}((0,d.unproxy)(e))},t.revokeGroupInvite=function(e){return function(e){if(e.revokeGroupInvitePromise)return e.revokeGroupInvitePromise;return e.revokeGroupInvitePromise=(0,l.sendRevokeGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).catch((0,n.filteredCatch)(r.ServerStatusCodeError,(e=>{throw e}))).catch((()=>{__LOG__(3)`models:groupMetadata:participantCollection:revokeGroupInvite dropped`})).finally((()=>{e.revokeGroupInvitePromise=null}))}((0,d.unproxy)(e))},t.joinGroupViaInvite=function(){return u.apply(this,arguments)};var i=a(s(48926)),n=s(55084),r=s(54647),o=s(62238),l=s(23796),d=s(15298);function u(){return(u=(0,i.default)((function*(e){const t=yield(0,l.sendJoinGroupViaInvite)(e);return(0,o.findChat)(t)}))).apply(this,arguments)}},73533:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupProperty=function(e,t,s){return m((0,f.unproxy)(e),t,s)};var n=s(55084),r=s(6467),o=i(s(91952)),l=i(s(55454)),d=s(54647),u=a(s(13540)),c=i(s(2408)),h=s(19986),f=s(15298),p=s(85893);function m(e,t,s,a=(0,r.genId)()){var i,f;if(!t)return Promise.reject(new u.ActionError);if(t===l.default.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(i=e.groupMetadata)||void 0===i?void 0:i.canSetEphemeralSetting()))return Promise.reject(new u.ActionError);if(t!==l.default.GROUP_SETTING_TYPE.EPHEMERAL&&!(null===(f=e.groupMetadata)||void 0===f?void 0:f.canSetGroupProperty()))return Promise.reject(new u.ActionError);const _=(0,h.sendSetGroupProperty)(e.id,t,s),g={[l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT]:{on:[c.default.t(575),c.default.t(567)],off:[c.default.t(574),c.default.t(566)]},[l.default.GROUP_SETTING_TYPE.RESTRICT]:{on:[c.default.t(581),c.default.t(573)],off:[c.default.t(580),c.default.t(572)]},[l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED]:{on:[c.default.t(579),c.default.t(571)],off:[c.default.t(578),c.default.t(570)]},[l.default.GROUP_SETTING_TYPE.EPHEMERAL]:{on:[c.default.t(577),c.default.t(569)],off:[c.default.t(576),c.default.t(568)]}},v=0===s?"off":"on",[S,C]=g[t][v],y=new r.ActionType(S),E=_.then((()=>new r.ActionType(C))).catch((0,n.filteredCatch)(d.ServerStatusCodeError,(e=>{if(404===e.status)return new r.ActionType(c.default.t(77)+" "+c.default.t(135))}))).catch((()=>(__LOG__(3)`Error while setting property`,new r.ActionType(c.default.t(77),{actionText:c.default.t(224),actionHandler:()=>m(e,t,s,a)}))));return o.default.openToast((0,p.jsx)(r.ActionToast,{id:a,initialAction:y,pendingAction:E})),_.then((a=>{var i;a._duplicate||(null===(i=e.groupMetadata)||void 0===i||i.set(l.default.GROUP_SETTING_TO_METADATA[t],s))})).catch((0,n.filteredCatch)(d.ServerStatusCodeError,(()=>{})))}},64850:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markPlayed=function(e){return function(e){u(e)?(0,o.default)(e).then((()=>{e.ack=n.default.ACK.PLAYED})).catch((0,i.filteredCatch)(r.WebdDrop,(()=>{}))):__LOG__(2)`Msg:msg should not call sendPlayed`}((0,d.unproxy)(e))},t.canMarkPlayed=function(e){return u((0,d.unproxy)(e))};var i=s(55084),n=a(s(55454)),r=s(54647),o=a(s(71353)),l=a(s(65565)),d=s(15298);function u(e){return!e.isSentByMe&&(!(e.ack>=n.default.ACK.PLAYED)&&(e.type===n.default.MSG_TYPE.PTT||!!e.isViewOnce&&(l.default.viewOnceRead||l.default.viewOnceWrite)))}},53071:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,s,i){return(0,a.queryOrder)(e,t,s,i)},t.createOrder=function(e,t){return(0,a.createOrder)(e,t)};var a=s(71032)},28649:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.searchFirstPartyStickers=function(){return _.apply(this,arguments)};var n=i(s(81109)),r=i(s(48926)),o=s(94910),l=a(s(13540)),d=i(s(89178)),u=s(86723),c=i(s(4231)),h=i(s(92537)),f=i(s(1458)),p=i(s(85829));const m="https://static.whatsapp.net/sticker";function _(){return(_=(0,r.default)((function*(e,t){var s;const a=(0,o.getCountryShortcodeByPhone)(null===(s=(0,u.getMaybeMeUser)())||void 0===s?void 0:s.user)||"default";let i=0,r=0;for(;i<=250;)i+=3+encodeURIComponent(e[r++]).length;const _=e.slice(0,r-1).join(","),g={country:a,ver:"2"},v=f.default.build(m,(0,n.default)((0,n.default)({},g),{},{search:_})),S=yield(0,d.default)(v,{signal:null==t?void 0:t.signal}),C=new c.default.StickerCommonQueryToStaticServer;if(C.set({httpResponseCode:S.status,params:new p.default(g).toString(),queryType:c.default.QUERY_TYPE.STICKER_SEARCH}),C.commit(),!S.ok)throw new l.InvalidServerResponseError(v,S.status.toString(),"Invalid response from WhatsApp stickers endpoint");const y=yield S.json();if(null==y)throw new l.InvalidServerResponseError(v,S.status.toString(),`Invalid response from WhatsApp stickers endpoint: ${JSON.stringify(y)}`);return y.map(((e,t)=>new h.default({mimetype:e.mimetype,width:e.width,height:e.height,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0,index:t})))}))).apply(this,arguments)}},12208:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.upgradeToMD=function(e){let t,s,a;if(e){t="light"===(0,_.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark",s=c.default.t(1077);const e=(0,v.jsx)(r.default,{href:(0,o.getMdOptInFaqUrl)(),children:c.default.t(2041)});a=[(0,v.jsx)(h.default,{id:1745,params:{learn_more:e}},"learnmorelink"),c.default.t(1746)]}else t="light"===(0,_.getTheme)()?"logout-notice-light":"logout-notice-dark",s=c.default.t(1749),a=[c.default.t(1747)];i.default.openModal((0,v.jsx)(n.default,{onOK:S,type:f.ModalTheme.Upgrade,okText:c.default.t(763),onCancel:()=>i.default.closeModal(),cancelText:c.default.t(1912),children:(0,v.jsxs)(l.FlexColumn,{align:"center",justify:"center",children:[(0,v.jsx)(p.default,{name:t}),(0,v.jsx)(m.TextDiv,{theme:"popup-title",className:u.default.upgradeModalTitle,children:s}),a.map(((e,t)=>(0,v.jsx)(m.TextDiv,{theme:"small",className:u.default.upgradeModalText,children:e},`content${t}`)))]})}))};var i=a(s(91952)),n=a(s(75940)),r=a(s(4919)),o=s(57092),l=s(63290),d=s(86723),u=a(s(65384)),c=a(s(2408)),h=a(s(663)),f=s(79475),p=a(s(2966)),m=s(97504),_=s(13038),g=s(16460),v=s(85893);function S(){const e=()=>{(0,d.setShowMdUpgradeCompleteMsg)(!1),i.default.openModal((0,v.jsx)(n.default,{onOK:S,type:f.ModalTheme.Upgrade,okText:c.default.t(2196),onCancel:()=>i.default.closeModal(),cancelText:c.default.t(1912),children:(0,v.jsxs)(l.FlexColumn,{align:"center",justify:"center",children:[(0,v.jsx)(p.default,{name:"light"===(0,_.getTheme)()?"internet-disconnected-light":"internet-disconnected-dark"}),(0,v.jsx)(m.TextDiv,{className:u.default.upgradeModalErrorText,theme:"small",children:c.default.t(1180)})]})}))};i.default.closeModal(),(0,d.setShowMdUpgradeCompleteMsg)(!0),(0,g.sendUpgradeToMD)().then((({status:t})=>{200!==t&&e()})).catch((t=>{__LOG__(2)`Error while sending MdOptIn ${t}`,e()}))}},28622:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)},t.refreshCartResponse=void 0;var i=a(s(48926)),n=s(8701),r=s(43129),o=s(84922),l=s(54647),d=s(49438);const u=new n.WapParser("refreshCartResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("cart"),s=t.maybeChild("price"),a={},i=null==s?void 0:s.maybeChild("subtotal");i&&(a.subtotal=i.contentString());const n=null==s?void 0:s.maybeChild("total");n&&(a.total=n.contentString());const r=null==s?void 0:s.maybeChild("currency");r&&(a.currency=r.contentString());const o=null==s?void 0:s.maybeChild("price_status");o&&(a.price_status=o.contentString());const l=[];return t.forEachChildWithTag("product",(e=>{const t=e.child("id").contentString(),s=e.maybeChild("name"),a=s?s.contentString():null,i=e.maybeChild("price"),n=i?i.contentString():null,r=e.maybeChild("currency"),o=r?r.contentString():null;let d;const u=e.maybeChild("media"),c=u?u.maybeChild("image"):null;if(null!=c){d={image:{}};const e=c.maybeChild("id");e&&e.hasContent()&&(d.image.id=e.contentString());const t=c.maybeChild("request_image_url");t&&t.hasContent()&&(d.image.request_image_url=t.contentString())}const h={id:t,name:a,price:n,currency:o,media:d},f=e.maybeChild("sale_price");var p,m;f&&(h.sale_price={price:f.child("price").contentString(),start_date:null===(p=f.maybeChild("start_date"))||void 0===p?void 0:p.contentString(),end_date:null===(m=f.maybeChild("end_date"))||void 0===m?void 0:m.contentString()});const _=e.maybeChild("status");_&&(h.status=_.contentString()),l.push(h)})),{price:a,products:l}}));function c(){return(c=(0,i.default)((function*(e,t,s,a){const i=t.map((e=>(0,r.wap)("product",null,(0,r.wap)("id",null,e))));i.push((0,r.wap)("image_dimensions",null,(0,r.wap)("width",null,s.toString()),(0,r.wap)("height",null,a.toString())));const n=(0,r.wap)("iq",{to:r.S_WHATSAPP_NET,smax_id:"11",xmlns:"fb:thrift_iq",id:(0,r.generateId)(),type:"get"},(0,r.wap)("cart",{op:(0,r.CUSTOM_STRING)("refresh"),biz_jid:(0,d.USER_JID)(e)},i)),c=yield(0,o.sendIq)(n,u);if(c.success)return c.result;throw new l.ServerStatusCodeError(c.errorCode)}))).apply(this,arguments)}t.refreshCartResponse=u},40411:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return c((0,n.wap)("iq",{type:"get",xmlns:"w:g2",to:(0,d.GROUP_JID)(e),id:(0,n.generateId)()},(0,n.wap)("invite",null)))},t.revokeGroupInviteCode=function(e){return c((0,n.wap)("iq",{type:"set",xmlns:"w:g2",to:(0,d.GROUP_JID)(e),id:(0,n.generateId)()},(0,n.wap)("invite",null)))},t.joinGroupViaInvite=function(){return p.apply(this,arguments)};var i=a(s(48926)),n=s(43129),r=s(84922),o=s(54647),l=a(s(81771)),d=s(49438);const u=new l.default("queryGroupInviteCodeParser",(e=>({code:e.child("invite").attrString("code")})));function c(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){const t=yield(0,r.sendIq)(e,u);return t.success?t.result:(__LOG__(2)`sendGroupInviteIq failed: ${t.errorCode} : ${t.errorType}`,Promise.reject(new o.ServerStatusCodeError(t.errorCode,t.errorText)))}))).apply(this,arguments)}const f=new l.default("joinGroupViaInviteParser",(e=>{e.assertTag("iq"),e.assertAttr("from","g.us"),e.assertAttr("type","result");return{gid:e.child("group").attrGroupWid("jid")}}));function p(){return(p=(0,i.default)((function*(e){const t=(0,n.wap)("iq",{type:"set",xmlns:"w:g2",to:n.G_US,id:(0,n.generateId)()},(0,n.wap)("invite",{code:(0,n.CUSTOM_STRING)(e)})),s=yield(0,r.sendIq)(t,f);return s.success?s.result:(__LOG__(2)`joinGroupInvite failed: ${s.errorCode}:${s.errorType}`,Promise.reject(new o.ServerStatusCodeError(s.errorCode,s.errorText)))}))).apply(this,arguments)}},96570:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t){return h((0,r.wap)("iq",{to:(0,u.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},(0,r.wap)("subject",null,t)))},t.setGroupDescription=function(e,t,s,a){const i=t?(0,r.wap)("description",{id:(0,r.CUSTOM_STRING)(s),prev:(0,r.MAYBE_CUSTOM_STRING)(a)},(0,r.wap)("body",null,t)):(0,r.wap)("description",{delete:"true",prev:(0,r.MAYBE_CUSTOM_STRING)(a)});return h((0,r.wap)("iq",{to:(0,u.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},i))},t.setGroupProperty=function(e,t,s){let a;switch(t){case l.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:a=1===s?(0,r.wap)("announcement",null):(0,r.wap)("not_announcement",null);break;case l.default.GROUP_SETTING_TYPE.RESTRICT:a=1===s?(0,r.wap)("locked",null):(0,r.wap)("unlocked",null);break;case l.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:a=1===s?(0,r.wap)("no_frequently_forwarded",null):(0,r.wap)("frequently_forwarded_ok",null);break;case l.default.GROUP_SETTING_TYPE.EPHEMERAL:a=s>0?(0,r.wap)("ephemeral",{expiration:(0,r.INT)(s)}):(0,r.wap)("not_ephemeral",null);break;default:return Promise.reject(new Error(`invalid group property ${t}`))}return h((0,r.wap)("iq",{to:(0,u.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,r.generateId)()},a))};var i=a(s(48926)),n=s(8701),r=s(43129),o=s(84922),l=a(s(55454)),d=s(54647),u=s(49438);const c=new n.WapParser("setGroupInfoParser",(e=>{if(e.hasChild("error")){const t=e.child("error");return{errorCode:t.attrInt("code"),errorText:t.hasAttr("text")?t.attrString("text"):""}}return{success:!0}}));function h(){return f.apply(this,arguments)}function f(){return(f=(0,i.default)((function*(e){const t=yield(0,o.sendIq)(e,c);if(!t.success)return Promise.reject(new d.ServerStatusCodeError(t.errorCode,t.errorText))}))).apply(this,arguments)}},1115:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cartItemToNode=c,t.default=function(){return h.apply(this,arguments)},t.createOrderResponse=void 0;var i=a(s(48926)),n=s(8701),r=s(43129),o=s(84922),l=s(54647),d=s(49438);const u=new n.WapParser("createOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("order"),s=t.attrString("id"),a=t.attrString("token"),i=t.maybeChild("price"),n={},r=null==i?void 0:i.maybeChild("subtotal");r&&(n.subtotal=r.contentString());const o=null==i?void 0:i.maybeChild("total");o&&(n.total=o.contentString());const l=null==i?void 0:i.maybeChild("currency");l&&(n.currency=l.contentString());const d=null==i?void 0:i.maybeChild("price_status");return d&&(n.price_status=d.contentString()),{id:s,token:a,price:n}}));function c(e){const t=null!=e.priceAmount1000?(0,r.wap)("price",null,e.priceAmount1000.toString()):void 0,s=e.currency?(0,r.wap)("currency",null,e.currency):void 0;return(0,r.wap)("product",null,(0,r.wap)("id",null,e.id),(0,r.wap)("name",null,e.name),t,s,(0,r.wap)("quantity",null,e.quantity.toString()))}function h(){return(h=(0,i.default)((function*(e,t){const s=t.map((e=>c(e))),a=(0,r.wap)("iq",{to:r.S_WHATSAPP_NET,smax_id:"10",xmlns:"fb:thrift_iq",id:(0,r.generateId)(),type:"set"},(0,r.wap)("order",{op:(0,r.CUSTOM_STRING)("create"),biz_jid:(0,d.USER_JID)(e)},s)),i=yield(0,o.sendIq)(a,u);if(i.success)return i.result;throw new l.ServerStatusCodeError(i.errorCode)}))).apply(this,arguments)}t.createOrderResponse=u},30602:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return u.apply(this,arguments)},t.queryOrderResponse=void 0;var i=a(s(48926)),n=s(8701),r=s(43129),o=s(84922),l=s(54647);const d=new n.WapParser("queryOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("order"),s=t.hasAttr("creation_ts")?t.attrTime("creation_ts"):null,a=t.maybeChild("price"),i=null==a?void 0:a.maybeChild("subtotal"),n=i?parseInt(i.contentString(),10):null,r=null==a?void 0:a.maybeChild("currency"),o=r?r.contentString():null,l=null==a?void 0:a.maybeChild("tax"),d=l?parseInt(l.contentString(),10):null,u=null==a?void 0:a.maybeChild("total"),c=u?parseInt(u.contentString(),10):null,h=[];return t.forEachChildWithTag("product",(e=>{const t=e.child("id").contentString(),s=e.child("name").contentString(),a=e.maybeChild("price"),i=a?parseInt(a.contentString(),10):null,n=e.maybeChild("quantity"),r=n?parseInt(n.contentString(),10):null,o=e.maybeChild("currency"),l=o?o.contentString():null;let d=null,u=null;const c=e.maybeChild("image");if(null!=c){const e=c.maybeChild("url");u=e&&e.hasContent()?e.contentString():null;const t=c.maybeChild("id");d=t&&t.hasContent()?t.contentString():null}h.push({id:t,price:i,thumbnailId:d,thumbnailUrl:u,currency:l,name:s,quantity:r})})),{currency:o,createdAt:s,products:h,subtotal:n,total:c,tax:d}}));function u(){return(u=(0,i.default)((function*(e,t,s,a){const i=(0,r.wap)("iq",{to:r.S_WHATSAPP_NET,smax_id:"5",xmlns:"fb:thrift_iq",id:(0,r.generateId)(),type:"get"},(0,r.wap)("order",{op:(0,r.CUSTOM_STRING)("get"),id:(0,r.CUSTOM_STRING)(e)},(0,r.wap)("image_dimensions",null,(0,r.wap)("width",null,t.toString()),(0,r.wap)("height",null,s.toString())),(0,r.wap)("token",null,a))),n=yield(0,o.sendIq)(i,d);if(n.success)return n.result;throw new l.ServerStatusCodeError(n.errorCode)}))).apply(this,arguments)}t.queryOrderResponse=d},59313:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var i=a(s(48926)),n=s(43129),r=s(42977),o=s(84922),l=s(60934),d=s(54647),u=a(s(81771)),c=s(89573);const h=new u.default("ctwaContext",(e=>{e.assertTag("iq"),e.assertFromServer();const t=e.child("context"),s={};return e.hasChild("error")?(function(e){const t=e&&e.maybeAttrString("code"),s=e&&e.maybeAttrString("text");__LOG__(3)`getCtwaContext error: code ${t} text ${s}`}(e.child("error")),Promise.reject(new Error("invalid response"))):(s.sourceUrl=t.child("source").child("url").contentString(),s.sourceId=t.child("source").child("id").contentString(),s.sourceType=t.child("source").child("type").contentString(),t.hasChild("headline")&&(s.title=t.child("headline").contentString()),t.hasChild("body")&&(s.description=t.child("body").contentString()),t.hasChild("thumbnail")&&(t.child("thumbnail").hasChild("url")&&(s.thumbnailUrl=t.child("thumbnail").child("url").contentString()),t.child("thumbnail").hasChild("bytes")&&(s.thumbnail=(0,r.encodeB64)(t.child("thumbnail").child("bytes").contentBytes())),t.hasChild("video")?(s.mediaUrl=t.child("video").child("url").contentString(),s.mediaType=l.ExternalAdReplyInfoMediaType.VIDEO):s.mediaType=l.ExternalAdReplyInfoMediaType.IMAGE),s)}));function f(){return(f=(0,i.default)((function*(e,t,s){const a=(0,c.createWid)(e).toString({legacy:!0}),i=(0,n.wap)("iq",{xmlns:"fb:thrift_iq",id:(0,n.generateId)(),type:"get",to:n.S_WHATSAPP_NET,smax_id:"4"},(0,n.wap)("account_number",null,a),(0,n.wap)("code",null,t),(0,n.wap)("expected_source_url",null,s)),r=yield(0,o.sendIq)(i,h);if(r.success)return r.result;throw new d.ServerStatusCodeError(r.errorCode)}))).apply(this,arguments)}},30761:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return m.apply(this,arguments)};var i=a(s(48926)),n=s(43129),r=s(70359),o=s(29537),l=s(84922),d=a(s(55454)),u=s(86723),c=s(66199),h=s(83097),f=s(49438);function p(e){var t;if(e.isGroup())return o.RECEIPT_TYPE.PLAYED;const s=(0,r.getABPropConfigValue)("played_self_enabled");return(null===(t=(0,u.getUserPrivacySettings)())||void 0===t?void 0:t.readReceipts)===h.ALL_NONE.none&&!0===s?o.RECEIPT_TYPE.PLAYED_SELF:o.RECEIPT_TYPE.PLAYED}function m(){return(m=(0,i.default)((function*(e,t){const s=e.broadcastId||t,a=e.id.id,i=s.isUser()?null:e.author,r=p(t),o=(0,n.wap)("receipt",{to:(0,f.CHAT_JID)(s),type:r,id:(0,n.CUSTOM_STRING)(a),t:(0,n.CUSTOM_STRING)(Date.now().toString()),participant:i?(0,f.DEVICE_JID)(i):n.DROP_ATTR});return yield(0,l.sendStanzaAndWaitForAck)(o,{id:a,class:"receipt",type:r,from:s,participant:i}),(0,c.getTable)().merge(e.id.toString(),{ack:d.default.ACK.PLAYED})}))).apply(this,arguments)}},18339:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);t.Z=void 0;var n=i(s(48926)),r=i(s(81109)),o=i(s(91747)),l=i(s(35161)),d=i(s(82492)),u=i(s(66678)),c=s(78064),h=s(18400),f=s(29292),p=s(42977),m=i(s(7900)),_=i(s(30381)),g=i(s(63922)),v=i(s(55454)),S=s(60934),C=s(86723),y=s(48803),E=i(s(12950)),b=i(s(63106)),T=i(s(77043)),M=a(s(46099)),x=i(s(17754)),I=i(s(53370)),P=i(s(1458)),A=s(76600),N=i(s(67333)),O=s(68719),w=i(s(69635)),D=i(s(72787));const j=(0,r.default)((0,r.default)({version:"17",M:b.default,BinaryProtocol:null,N:null,addContact:function(e){return new Promise(((t,s)=>{const a=this.actionNode("set",[["contacts",{type:"add"},e]]);this.binSend("send",a,s,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(s)},{debugString:"action,contact,add",metricName:"CONTACT",ackRequest:!0})}))},addParticipants:function(e,t){return this.setGroupParticipants("add",e,t)},changeSubject:function(e,t){return new Promise(((s,a)=>{const i=D.default.tag(),n=this.wrap(s);n.tag=i;const r=["group",{id:i,jid:e,type:"subject",author:(0,C.getMaybeMeUser)(),subject:t},void 0],o=this.actionNode("set",[r]);this.binSend("send",o,a,{clientCacheable:!0,onSend:n,onDrop:this.wrap(a)},{debugString:"action,group,subject",metricName:"GROUP",ackRequest:!1,expires:(0,_.default)().unix()})}))},chatFindQuery:function(e,t){return new Promise(((s,a)=>{const i={type:"chat"};"boolean"==typeof e&&e?i.kind="retry":"string"==typeof e&&(i.jid=e);const n=this.queryNode(i,void 0);this.binSend("sendEphemeral",n,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let t=[];const a=this.N.children(e);if("response"===this.N.tag(e)&&"chat"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(a)){let e;const s=a.length;for(e=0;e<s;e++){const s=this.parseChat(a[e]);s&&t.push(s)}}s(t)})).catch(a)}),s),logOnSend:t,onDrop:this.wrap(a)},{debugString:["query","chat",e].join(),metricName:"QUERY_CHAT",ackRequest:!1})}))},contactFindQuery:function(e,t){return new Promise(((s,a)=>{const i=this.queryNode({type:"contacts",kind:e?"retry":void 0},void 0);this.binSend("send",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let t=[];const a=this.N.children(e);if("response"===this.N.tag(e)&&"contacts"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(a)){let e;const s=a.length;for(e=0;e<s;e++){const s=this.parseContact(a[e]);s&&t.push(s)}}s({checksum:this.N.attr("checksum",e),data:t})})).catch(a)}),s),logOnSend:t,onDrop:this.wrap(a)},{debugString:"query,contacts, "+String(e),metricName:"QUERY_CONTACTS",ackRequest:!1})}))},createGroup:function(e,t,s,a,i,n,r,o=!1){return new Promise(((s,a)=>{const i=D.default.tag(),n=this.wrap(s);n.tag=i;const o=t.map((e=>["participant",{jid:e},void 0]));r&&o.unshift(["ephemeral",{value:`${r}`},void 0]),__LOG__(2)`create group tag`;const l=["group",{id:i,type:"create",author:(0,C.getMaybeMeUser)(),subject:e},o],d=this.actionNode("set",[l]);this.binSend("send",d,a,{clientCacheable:!0,onSend:n,onDrop:this.wrap(a)},{debugString:"action,group,create",metricName:"GROUP",ackRequest:!1,expires:(0,_.default)().unix()})}))},deletePicture:function(e){return new Promise(((t,s)=>{const a=D.default.tag(),i=this.wrap(t);i.tag=a;const n=["picture",{id:a,jid:e,type:"delete"},void 0],r=this.actionNode("set",[n]);this.binSend("send",r,s,{clientCacheable:!0,onSend:i,onDrop:this.wrap(s)},{debugString:"action,delete_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,_.default)().unix()})}))},groupMetadataFindFromPhone:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"group",jid:e},[]);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((s=>{if("response"!==this.N.tag(s)||"group"!==this.N.attr("type",s))return void t({status:"error",info:"bad format: response incorrect"});const a=this.N.children(s),i=a&&a[0];if(!i)return void t({status:"error",info:"bad format: no group node"});if("missing"===this.N.attr("type"))return void t({status:"missing"});const n=[];let r;const o=this.N.children(i);let l=!1;Array.isArray(o)&&o.forEach((e=>{switch(this.N.tag(e)){case"participant":n.push({id:this.N.attr("jid",e),isAdmin:"admin"===this.N.attr("type",e)});break;case"description":r=this.N.dataStr(e);break;case"support":l=!0}})),t({status:"ok",data:{creation:parseInt(this.N.attr("create",i),10)||void 0,desc:r,id:e,owner:this.N.attr("creator",i),participants:n,support:l}})})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:"query,group,"+e,metricName:"QUERY_GROUP",ackRequest:!1})}))},leaveGroup:function(e){return new Promise(((t,s)=>{const a=D.default.tag(),i=this.wrap(t);i.tag=a;const n=["group",{id:a,jid:e,type:"leave",author:(0,C.getMaybeMeUser)()},void 0],r=this.actionNode("set",[n]);this.binSend("send",r,s,{clientCacheable:!0,onSend:i,onDrop:this.wrap(s)},{debugString:"action,group,delete",metricName:"GROUP",ackRequest:!1,expires:(0,_.default)().unix()})}))},parseBattery:function(e){if("battery"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: battery, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");const t=Math.min(parseInt(this.N.attr("value",e),10)||-1,100),s=this.N.attr("live",e),a={battery:t<0?void 0:t,plugged:s?"true"===s:void 0};return this.dropIfConditionMet([t<0&&!s],a)},parseBCUpdate:function(e){if("broadcast"!==this.N.tag(e)||"modify"!==this.N.attr("type",e))return __LOG__(4,void 0,new Error,!0)`expected tag: broadcast, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");const t=this.N.attr("jid",e),s=this.N.children(e),a=[];if(Array.isArray(s)){const e=s.length;let t,i,n;for(t=0;t<e;t++)i=s[t],n=this.N.attr("jid",i),"recipient"===this.N.tag(i)&&n&&w.default.isUser(n)&&a.push({id:n})}const i=[!t,!w.default.isBroadcast(t),0===a.length];return this.dropIfConditionMet(i,{id:t,participants:a})},parseChat:function(e){if("chat"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: chat, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");let t=this.N.attr("kind",e),s=this.N.attr("type",e);const a=this.N.attr("jid",e),i=parseInt(this.N.attr("t",e),10)||void 0,n=parseInt(this.N.attr("mute",e),10),r=parseInt(this.N.attr("before",e),10)||void 0,o="true"===this.N.attr("archive",e),l="true"===this.N.attr("read_only",e),d=parseInt(this.N.attr("modify_tag",e),10)||void 0,u=this.N.attr("name",e)||void 0,c=this.safeParseInt(e,"count"),h="true"===this.N.attr("message",e),f="true"===this.N.attr("star",e),p="false"===this.N.attr("spam",e),m=parseInt(this.N.attr("pin",e),10)||0,_=this.N.attr("old_jid",e),g=this.N.attr("new_jid",e),v=parseInt(this.N.attr("ephemeral",e),10)||0,S=parseInt(this.N.attr("eph_setting_ts",e),10)||0;switch(t){case"text":case"image":case"video":case"gif":case"audio":case"ptt":case"document":case"location":case"vcard":case"url":case"sticker":break;default:t=void 0}"ahead"===s&&(s="clear");const C=this.N.children(e);let y,E;if(Array.isArray(C)){let e,t;y=[],E=[];const s=C.length;for(e=0;e<s;e++)if(t=C[e],"item"===this.N.tag(t)){const e=this.N.attr("index",t);e&&y.push([e,"true"===this.N.attr("owner",t),this.N.attr("participant",t)])}else if("label"===this.N.tag(t)){const e=this.N.attr("id",t);e&&E.push(e)}else{const e=this.parseMsgMessage(t,"response");e&&y.push(e)}}const b={id:a,t:i,type:s,kind:t,keys:y,before:r,archive:o,isReadOnly:l,unreadCount:c,muteExpiration:isNaN(n)?void 0:n,modifyTag:d,name:u,pendingMsgs:h,star:f,notSpam:p,pin:m,changeNumberOldJid:_,changeNumberNewJid:g,ephemeralDuration:w.default.isUser(a)?v:void 0,ephemeralSettingTimestamp:w.default.isUser(a)?S:void 0,labels:E};this.pruneUndefinedProps(b);const T=[s&&"delete"!==s&&"clear"!==s&&"ephemeral"!==s&&"archive"!==s&&"unarchive"!==s&&"mute"!==s&&"star"!==s&&"unstar"!==s&&"spam"!==s&&"modify_tag"!==s&&"pin"!==s&&"modify"!==s,!s&&!a,o&&s&&"clear"!==s,"clear"!==s&&r&&r>0,"clear"!==s&&"star"!==s&&"unstar"!==s&&y&&y.length>0];return this.dropIfConditionMet(T,b)},parseMsg:function(e,t){switch(this.N.tag(e)){case"message":return this.parseMsgMessage(e,t);default:return __LOG__(4,void 0,new Error,!0)`received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unknown-tag")}},parseIdentity:function(e){const t=this.N.child("raw",e),s=this.N.child("text",e);if(t&&s&&this.N.children(t)instanceof ArrayBuffer&&this.N.dataStr(s))return{jid:this.N.attr("jid",e),binary:this.N.children(t),string:this.N.dataStr(s)}},profilePicFindThumbFromPhone:function(e,t,s){return new Promise(((a,i)=>{const n={type:"preview",jid:e};t&&t.tag&&t.raw&&(n.id=t.tag),s&&(n.kind="status");const r=this.queryNode(n,[]);this.binSend("sendEphemeral",r,i,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((s=>{"response"===this.N.tag(s)&&"preview"===this.N.attr("type",s)||i("Not response or preview");const n=this.N.children(s),r=n&&n[0];if(r||i("Missing preview node"),"missing"===this.N.attr("type",r))a({id:e,tag:void 0,raw:void 0});else{const s=this.N.attr("id",r);let i;if(t&&s===t.tag&&t.raw)i=t.raw;else{const e=this.N.children(r);i=e?(0,p.encodeB64)(e):void 0}a({id:e,tag:s,raw:i})}})).catch(i)}),a),onDrop:this.wrap(i)},{debugString:"query,thumb,"+e,metricName:"QUERY_PREVIEW",ackRequest:!1})}))},promoteParticipants:function(e,t){return this.setGroupParticipants("promote",e,t)},queryIdentity:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"identity",jid:e},void 0);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let s;__LOG__(2)`bin-recv: response,identity`,"response"===this.N.tag(e)&&"identity"===this.N.attr("type",e)&&(s=this.parseIdentity(e)),t(s)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:`query,identity,${e}`,metricName:"QUERY_IDENTITY",ackRequest:!1})}))},queryLinkPreview:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"url",url:e},void 0);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let s;if(__LOG__(2)`bin-recv: response,url`,"response"===this.N.tag(e)&&"url"===this.N.attr("type",e)){const t=this.N.children(e);s={title:this.N.attr("title",e),description:this.N.attr("description",e),canonicalUrl:this.N.attr("canonical-url",e),matchedText:this.N.attr("matched-text",e),preview:this.N.attr("preview",e),thumbnail:t?(0,p.encodeB64)(t):void 0,doNotPlayInline:"true"===this.N.attr("do-not-play-inline",e)}}t(s)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:"query,url",metricName:"QUERY_URL",ackRequest:!1})}))},queryMsgInfo:function(e){const t=e=>{let t,s;const a=[];if(Array.isArray(e)){t=e.length;for(let i=0;i<t;i++)s=e[i],"item"===this.N.tag(s)&&this.N.attr("jid",s)&&this.N.attr("t",s)&&a.push({id:this.N.attr("jid",s),t:parseInt(this.N.attr("t",s),10)||0})}return a};return new Promise(((s,a)=>{const i=this.queryNode({type:"message_info",index:e.id,jid:e.remote},void 0);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a={played:[],playedRemaining:0,read:[],readRemaining:0,delivery:[],deliveryRemaining:0};if(__LOG__(2)`bin-recv: response,msg,info`,"response"===this.N.tag(e)&&"message_info"===this.N.attr("type",e)){const s=this.N.child("played",e),i=this.N.child("read",e),n=this.N.child("delivery",e),r=this.N.children(s),o=this.N.children(i),l=this.N.children(n),d=parseInt(this.N.attr("count",e),10)||0;a.played=t(r),a.read=t(o),a.delivery=t(l);const u=d-a.played.length,c=d-a.played.length-a.read.length,h=d-a.played.length-a.read.length-a.delivery.length;a.playedRemaining=u<0?0:u,a.readRemaining=c<0?0:c,a.deliveryRemaining=h<0?0:h}s(a)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:["query,msg,info",e.id,e.remote,e.fromMe].join(),metricName:"QUERY_MESSAGE_INFO",ackRequest:!1})}))},queryReceivedActions:function(e){return new Promise(((t,s)=>{const a=e.map((e=>["item",{id:e},void 0])),i=this.queryNode({type:"action"},a);this.binSend("sendEphemeral",i,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let s=[];const a=this.N.children(e);if(__LOG__(2)`bin-recv: response,actions`,"response"===this.N.tag(e)&&"action"===this.N.attr("type",e))if(Array.isArray(a)){let e;const t=a.length;for(e=0;e<t;e++){const t=a[e],i=this.N.attr("id",t),n=parseInt(this.N.attr("code",t),10)||0;"item"===this.N.tag(t)&&i&&0!==n&&s.push({id:i,code:n})}}else"true"===this.N.attr("replaced",e)&&(s="replaced");t(s)})).catch(s)}),t),onDrop:this.wrap(s),serverCacheable:!0},{debugString:"query,actions",metricName:"QUERY_ACTIONS",ackRequest:!1})}))},recentEmojiQuery:function(e){return new Promise(((t,s)=>{const a=Array.isArray(e)?e.map((e=>["item",{code:e.id,value:e.weight.toString()},void 0])):void 0,i=this.queryNode({type:"emoji"},a);this.binSend("sendEphemeral",i,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s=[],a=this.N.children(e);if(__LOG__(2)`bin-recv: response,emoji`,"response"===this.N.tag(e)&&"emoji"===this.N.attr("type",e)&&Array.isArray(a)){let e;const t=a.length;for(e=0;e<t;e++){const t=a[e],i=this.N.attr("code",t),n=parseFloat(this.N.attr("value",t))||0;"item"===this.N.tag(t)&&i&&n&&!isNaN(n)&&s.push({id:i,weight:n})}}t(s)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:"query,emoji",metricName:"QUERY_EMOJI",ackRequest:!1})}))},removeParticipants:function(e,t){return this.setGroupParticipants("remove",e,t)},resyncMessages:function(e){return new I.default(((t,s)=>{const a=e.map((e=>{const t={jid:e.wid,index:e.id,owner:e.fromMe,participant:e.participant,archive:(!!e.archive).toString(),spam:(!e.notSpam).toString(),old_jid:e.changeNumberOldJid,new_jid:e.changeNumberNewJid};return e.mute&&(t.mute=e.mute.toString()),w.default.isUser(e.wid)&&e.ephemeralDuration&&(t.ephemeral=e.ephemeralDuration.toString()),w.default.isUser(e.wid)&&null!=e.ephemeralSettingTimestamp&&(t.eph_setting_ts=e.ephemeralSettingTimestamp.toString()),e.active&&(t.active="true"),w.default.isGroup(e.wid)&&(t.read_only=(!!e.isReadOnly).toString()),e.modifyTag&&(t.modify_tag=e.modifyTag.toString()),e.unreadCount&&(t.count=e.unreadCount.toString()),e.pin&&(t.pin=e.pin.toString()),["last",t,void 0]})),i=this.queryNode({type:"resume"},a);this.binSend("sendEphemeral",i,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s=[],a=this.N.children(e);if(__LOG__(2)`bin-recv: response,resume`,"response"===this.N.tag(e)&&"resume"===this.N.attr("type",e)&&Array.isArray(a)){let e;const t=a.length;for(e=0;e<t;e++){const t=this.parseChat(a[e]);t&&s.push(t)}}t({checksum:this.N.attr("checksum",e),statusChecksum:this.N.attr("status",e),labelsChecksum:this.N.attr("label",e),quickRepliesChecksum:this.N.attr("quick_reply",e),stickerPackChecksum:this.N.attr("sticker_pack",e),recentStickersChecksum:this.N.attr("recent_stickers",e),starredStickersChecksum:this.N.attr("starred_stickers",e),data:s})})).catch(s)}),t),onDrop:this.wrap(s),serverCacheable:!0},{debugString:"query,resume",metricName:"QUERY_RESUME",ackRequest:!1})}))},resyncReceipts:function(e){return new Promise(((t,s)=>{const a=e.map((e=>["last",{jid:e.remote,index:e.id,owner:e.fromMe.toString(),participant:e.participant,t:e.t.toString(),pay_t:e.payT&&e.payT.toString()},void 0])),i=this.queryNode({type:"receipt"},a);this.binSend("sendEphemeral",i,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s=[],a=this.N.children(e);if(__LOG__(2)`bin-recv: response,receipt`,"response"===this.N.tag(e)&&"receipt"===this.N.attr("type",e)&&Array.isArray(a)){let e,t,i;const n=a.length;for(e=0;e<n;e++){t=a[e],i=this.N.children(t);const n=this.N.attr("jid",t),r=this.N.attr("t",t),o=this.N.attr("pay_t",t);if("receipt"===this.N.tag(t)&&n&&(r||o)&&Array.isArray(i)){let e;const t=[],a=[],l=i.length;for(e=0;e<l;e++){const s=i[e];if("item"===this.N.tag(s)){const e=this.N.attr("index",s),a="true"===this.N.attr("owner",s),i=parseInt(this.N.attr("status",s),10)||0,n=this.N.attr("participant",s),r=parseInt(this.N.attr("t",s),10)||void 0;e&&0!==i&&i<=4&&t.push({id:e,fromMe:a,participant:n,status:i,t:r})}else if("message"===this.N.tag(s)){const e=this.parseMsgMessage(s);e&&a.push(e)}}t.length>0&&s.push({id:n,t:r&&parseInt(r,10),payT:o&&parseInt(o,10),acks:t,msgs:a})}}}t(s)})).catch(s)}),t),onDrop:this.wrap(s),serverCacheable:!0},{debugString:"query,receipt",metricName:"QUERY_RECEIPT",ackRequest:!1})}))},sendChatstateUpdate:function(e,t){if(["composing","paused","recording"].includes(e))return new Promise(((s,a)=>{const i=this.actionNode("set",[["presence",{type:e,to:t},void 0]],!0);this.binSend("sendEphemeralIgnore",i,a,{onSend:s,onDrop:a,epochIneligible:!0},{debugString:"action,chatstate,"+e,metricName:"PRESENCE",skipOffline:!0,ackRequest:!1})}))},sendConversationArchive:function(e,t,s){return this.sendConversationOpWithKey(t?"archive":"unarchive",e,s)},sendConversationClear:function(e,t,s){return this.sendConversationOpWithKey("clear",e,t,s)},sendConversationDelete:function(e,t){return this.sendConversationOpWithKey("delete",e,t)},sendConversationMute:function(e,t,s){return new Promise(((a,i)=>{const n=t?t.toString():void 0,r=s?s.toString():void 0,o=this.actionNode("set",[["chat",{type:"mute",mute:n,previous:r,jid:e},void 0]]);this.binSend("send",o,i,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(i)},{debugString:"action,chat,"+e+", "+(n?"mute,"+n:"unmute"),metricName:"CHAT",ackRequest:!0})}))},sendConversationNotSpam:function(e){return this.sendConversationOpWithKey("spam",e,void 0,!1)},sendConversationOpWithKey:function(e,t,s,a){return new Promise(((i,n)=>{let r,o;switch(e){case"clear":r=(!!a).toString();break;case"spam":o=(!!a).toString()}const l=this.actionNode("set",[["chat",{type:e,jid:t,index:s?s.id:void 0,owner:s?s.fromMe.toString():void 0,participant:s?s.participant:void 0,star:void 0!==r?r:void 0,spam:void 0!==o?o:void 0},void 0]]);this.binSend("send",l,n,{clientCacheable:!0,onSend:this.wrap(i),onDrop:this.wrap(n)},{debugString:"action,chat,"+[e,s,a].join(),metricName:"CHAT",ackRequest:!0})}))},sendConversationUnseen:function(e,t){return this.sendConversationSeen(e,t,-2)},sendMedia:function(e){return new Promise(((t,s)=>{const a=(0,u.default)(e);D.default.send({data:["query","sendMedia",a.url],onSend:this.wrap02((e=>{t((0,d.default)(a,e))})),onDrop:s})}))},sendMessageDelete:function(e,t,s){return new Promise(((a,i)=>{const n=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),r=this.actionNode("set",[["chat",{type:"clear",jid:e,media:s.toString()},n]]);this.binSend("send",r,i,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(i)},{debugString:"action,msgs,delete,"+[e,s,t.length].join(),metricName:"CHAT",ackRequest:!0})}))},sendMessagePlayed:function(e){return new Promise(((t,s)=>{const a=this.wrap(t),i=this.actionNode("set",[["received",{type:"played",index:e.id,from:e.remote,participant:e.participant},void 0]]);this.binSend("send",i,s,{onSend:a,onDrop:this.wrap(s)},{debugString:"action,played,"+e.toString(),metricName:"RECEIVED",ackRequest:!0})}))},sendMessageStarred:function(e,t,s){return new Promise(((a,i)=>{const n=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),r=this.actionNode("set",[["chat",{type:s?"star":"unstar",jid:e},n]]);this.binSend("send",r,i,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(i)},{debugString:"action,msgs,star,"+[e,s,t.length].join(),metrics:"CHAT",ackRequest:!0})}))},sendPresenceUpdate:function(e){if(["available","unavailable"].includes(e))return new Promise(((t,s)=>{const a="available"===e,i=this.actionNode("set",[["presence",{type:e},void 0]],!a),n=a?"sendEphemeral":"sendEphemeralIgnore";this.binSend(n,i,s,{onSend:a?this.wrap(t):t,onDrop:a?this.wrap(s):t,epochIneligible:!a},{debugString:"action,presence,"+e,metricName:"PRESENCE",available:"available"===e,ackRequest:a})}))},sendSetBlock:function(e,t){return new Promise(((s,a)=>{const i=t.map((e=>["user",{jid:e.jid},void 0])),n=["block",{type:e?"add":"remove"},i],r=this.actionNode("set",[n]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(a)},{debugString:"action,block,"+e+","+(0,l.default)(t,"jid").join(","),metricName:"BLOCK",ackRequest:!1,expires:(0,_.default)().unix()})}))},sendSetPicture:function(e,t,s){return new Promise(((a,i)=>{const n=P.default.parseDataURL(t).data,r=P.default.parseDataURL(s).data,o=(0,p.decodeB64)(n),l=(0,p.decodeB64)(r),d=D.default.tag(),u=this.wrap(a);u.tag=d;const c=["picture",{id:d,jid:e,type:"set"},[["image",void 0,l],["preview",void 0,o]]],h=this.actionNode("set",[c]);this.binSend("send",h,i,{clientCacheable:!0,onSend:u,onDrop:this.wrap(i)},{debugString:"action,set_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,_.default)().unix()})}))},sendSetStatus:function(e){return new Promise(((t,s)=>{const a=this.wrap(t),i=this.actionNode("set",[["status",void 0,e]]);this.binSend("send",i,s,{clientCacheable:!0,onSend:a,onDrop:this.wrap(s)},{debugString:"action,status,set",metricName:"STATUS",ackRequest:!1,expires:(0,_.default)().unix()})}))},sendSpamReport:function(e){return new Promise(((t,s)=>{const a=this.actionNode("set",[["spam",{jid:e},void 0]]);this.binSend("send",a,s,{onSend:this.wrap(t),onDrop:this.wrap(s)},{debugString:"action,spam,"+e,metricName:"SPAM",ackRequest:!1,expires:(0,_.default)().unix()})}))},sendUnstarAll:function(e){return new Promise(((t,s)=>{const a=this.actionNode("set",[["chat",{type:"unstar",jid:e||void 0},void 0]]);this.binSend("send",a,s,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(s)},{debugString:"action,unstar,all,"+e,metrics:"CHAT",ackRequest:!0,expires:(0,_.default)().unix()})}))},setGroupParticipants:function(e,t,s){return new Promise(((a,i)=>{const n=D.default.tag(),r=this.wrap(a),o=s.map((e=>["participant",{jid:e},void 0])),l=["group",{id:n,jid:t,type:e,author:(0,C.getMaybeMeUser)()},o],d=this.actionNode("set",[l]);this.binSend("send",d,i,{tag:n,clientCacheable:!0,onSend:r,onDrop:this.wrap(i)},{debugString:["action,group,participant",e,t].concat(s).join(),metricName:"GROUP",ackRequest:!1,expires:(0,_.default)().unix()})}))},setPushname:function(e){return new Promise(((t,s)=>{const a=this.actionNode("set",[["profile",{name:e},void 0]]);this.binSend("send",a,s,{onSend:this.binWrap(t,t),onDrop:this.wrap(s)},{debugString:"action,pushname",metricName:"PROFILE",ackRequest:!1})}))}},M.default),{},{parseLiveLocationMessageProto:function(e,t,s){E.default.supportsFeature(E.default.F.MD_BACKEND)?M.default.parseLiveLocationMessageProto(e,t,s):(e.type="location",e.isLive=!0,e.lat=void 0!==t.degreesLatitude?t.degreesLatitude:void 0,e.lng=void 0!==t.degreesLongitude?t.degreesLongitude:void 0,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.accuracy=t.accuracyInMeters,e.speed=t.speedInMps,e.degrees=t.degreesClockwiseFromMagneticNorth,e.comment=(0,M.convertToTextWithoutSpecialEmojis)(t.caption),e.sequence=t.sequenceNumber,s&&(e.finalLat=void 0!==s.degreesLatitude?s.degreesLatitude:void 0,e.finalLng=void 0!==s.degreesLongitude?s.degreesLongitude:void 0,e.finalThumbnail=this.decodeBytes(s.jpegThumbnail)||"",e.finalAccuracy=s.accuracyInMeters,e.finalSpeed=s.speedInMps,e.finalDegrees=s.degreesClockwiseFromMagneticNorth,e.finalTimeOffset=s.timeOffset))},parseSendPaymentMessageProto:function(e,t,s){if(E.default.supportsFeature(E.default.F.MD_BACKEND))M.default.parseSendPaymentMessageProto(e,t,s);else{if((0,A.hasUnsupportedCurrency)(s))return e.subtype="phone_only_feature",void __LOG__(2)`[novi] parseSendPaymentMessageProto: does not support novi transactions`;if(e.type="payment",this.callFeatureFlagFun(E.default.F.PAYMENTS,"parsePaymentInfo",e,s),E.default.supportsFeature(E.default.F.PAYMENTS)){e.subtype="send";const s=t.requestMessageKey;e.paymentRequestMessageKey=t.requestMessageKey?new T.default({fromMe:s.fromMe,remote:this.decodeJid(s.remoteJid),id:s.id,participant:this.decodeJid(s.participant)}):void 0,t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg))}}},parseRequestPaymentMessageProto:function(e,t,s){if(E.default.supportsFeature(E.default.F.MD_BACKEND))M.default.parseRequestPaymentMessageProto(e,t,s);else{if((0,A.hasUnsupportedCurrency)(s))return e.subtype="phone_only_feature",void __LOG__(2)`[novi] parseRequestPaymentMessageProto: does not support novi transactions`;e.type="payment",this.callFeatureFlagFun(E.default.F.PAYMENTS,"parsePaymentInfo",e,s),E.default.supportsFeature(E.default.F.PAYMENTS)&&(e.subtype="request",t.currencyCodeIso4217&&!e.paymentCurrency&&(e.paymentCurrency=t.currencyCodeIso4217),t.amount1000&&!e.paymentAmount1000&&(e.paymentAmount1000=t.amount1000),t.requestFrom&&!e.paymentMessageReceiverJid&&(e.paymentMessageReceiverJid=this.decodeJid(t.requestFrom)),t.expiryTimestamp&&!e.paymentExpiryTimestamp&&(e.paymentExpiryTimestamp=t.expiryTimestamp),t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)))}},parseGroupInviteMessageProto:function(e,t){e.type="groups_v4_invite",E.default.supportsFeature(E.default.F.GROUPS_V_4_JOIN_PERMISSION)&&(e.inviteCode=t.inviteCode,e.inviteCodeExp=t.inviteExpiration,e.inviteGrp=t.groupJid,e.inviteGrpName=t.groupName,e.inviteGrpJpegThum=this.decodeBytes(t.jpegThumbnail),e.comment=(0,M.convertToTextWithoutSpecialEmojis)(t.caption))},parseContextInfoProto:function(e,t,s){const a=t.quotedMessage,i=t.mentionedJid;e.quotedMsg=a&&this.parseMsgProto(a,{type:"unknown"}),e.quotedMsg&&"payment"===e.quotedMsg.type&&s&&this.callFeatureFlagFun(E.default.F.PAYMENTS,"parsePaymentInfo",e.quotedMsg,s),e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(i)?i.map(this.decodeJid):i,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret)},msgCreateRecord:(R=(0,n.default)((function*(e){const t=yield(0,c.promiseCallSync)((()=>{if(["ptt","audio","image","video","document","sticker","product"].includes(e.type)){const t="ptt"===e.type?"audio":e.type;let s;return e.asMms&&(s=e.isUnsentPhoneMsg()?{type:e.type}:e.avParams()),e.local&&!e.mediaKey?this.sendMedia(s):(0,d.default)({status:200,type:t},s)}})).catch((e=>(__LOG__(3)`wap:msgCreateRecord mPromise error (${(0,f.encodeErrorInfo)()}): ${e.stack}`,Promise.reject("wap:msgCreateRecord mPromise error"))));if(t&&200!==t.status)return __LOG__(3)`wap:msgCreateRecord:sendMedia error ${t.status}`,Promise.reject(`wap:msgCreateRecord:sendMedia error ${t.status}`);const a=e.id.id,i=(0,y.createMessageKey)(e),n=(0,y.createMsgProtobuf)(e,t||{}),r=!!e.multicast||void 0,o=!!e.urlText||void 0,l=!!e.urlNumber||void 0,u=!!e.clearMedia||void 0,h=w.default.isUser(e.id.remote)||null==e.ephemeralDuration?void 0:e.ephemeralDuration,p={key:i,message:n,messageTimestamp:e.t,multicast:r,urlText:o,urlNumber:l,clearMedia:u,ephemeralDuration:h},m=this.actionNode("relay",[["message",void 0,(0,f.encodeProtobuf)(O.WebMessageInfoSpec,p).readBuffer()]]);return new Promise(((t,i)=>{this.binSend("send",m,i,{tag:a,onSend:this.wrap(t),onDrop:this.wrap(i),retryOn5xx:!0,resendGuard:()=>{const t=s(45472).default.get(e.id);return"protocol"===e.type||t&&t.id.equals(e.id)}},{debugString:["action","message",e.type,e.subtype,a].join(),debugObj:{xml:m,pb:p},metricName:"MESSAGE",ackRequest:!1})}))})),function(){return R.apply(this,arguments)}),msgFindQuery:function(e,t,s,a){let i=e;return new Promise(((e,n)=>{let o,l="";switch(i){case"after":t.id||(i="before");case"before":o={type:"message",kind:i,jid:t.remote,count:t.count.toString(),index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l=[t instanceof T.default?t.toString():t.remote,t.count].join();break;case"search":o={type:"search",search:t.searchTerm,page:t.page.toString(),count:t.count.toString(),jid:t.remote,canceled:t.tagToCancel},t.label?o=(0,r.default)((0,r.default)({},o),{},{label:t.label}):t.filter&&(o=(0,r.default)((0,r.default)({},o),{},{filter:t.filter})),l=["search",t.page,t.count,t.jid,t.label].join();break;case"star":o={type:"star",media:"gif"===t.media?t.media:void 0,chat:t.chat,count:t.count.toString(),jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="starred";break;case"media":o={type:"media_message",media:"document"===t.media||"url"===t.media?t.media:void 0,count:t.count.toString(),kind:t.direction,jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="media"}const d=this.queryNode(o,void 0);this.binSend("sendEphemeral",d,n,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((s=>{let a=[];const n=this.N.children(s);if(__LOG__(2)`bin-recv: response,msg`,"response"===this.N.tag(s)&&("message"===this.N.attr("type",s)||"star"===this.N.attr("type",s)||"search"===this.N.attr("type",s)||"media_message"===this.N.attr("type",s)||"label"===this.N.attr("type",s))){if(Array.isArray(n)){let e;const s=n.length;for(e=0;e<s;e++){const s=this.parseMsg(n[e],"response");if(s)switch(i){case"star":("gif"!==t.media||"video"===s.type&&s.isGif)&&a.push(s);break;case"media":"document"===t.media&&"document"===s.type||"url"===t.media&&"chat"===s.type?a.push(s):t.media||a.push(s);break;default:a.push(s)}}}"search"===this.N.attr("type",s)||"label"===this.N.attr("type",s)?a={eof:"true"===this.N.attr("last",s),messages:a}:"media"!==i||t.media||(a={docCount:parseInt(this.N.attr("document",s),10)||void 0,linkCount:parseInt(this.N.attr("url",s),10)||void 0,mediaCount:parseInt(this.N.attr("media",s),10)||void 0,messages:a})}e(a)})).catch(n)}),e),onDrop:this.wrap(n),logOnSend:s,onTag:a,tagToCancel:t.tagToCancel},{debugString:"query,message,"+l,metricName:"search"===i?"QUERY_SEARCH":"QUERY_MESSAGES",ackRequest:!1})}))},queryVcard:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"vcard",jid:e},void 0);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s=[],a=this.N.children(e);if("response"===this.N.tag(e)&&"vcard"===this.N.attr("type",e)&&Array.isArray(a)){const e=a.length;for(let t=0;t<e;t++){const e=this.parseMsg(a[t],"response");!e||"vcard"!==e.type&&"multi_vcard"!==e.type||s.push(e)}}t(s)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:`query,vcard,${e}`,metricName:"QUERY_VCARD",ackRequest:!1})}))},parseContacts:function(e){if("contacts"!==this.N.tag(e))return;const t=this.N.attr("type",e),s=this.N.children(e);let a,i,n,r,o;switch(t){case"frequent":if(Array.isArray(s)){i=s.length;for(let e=0;e<i;e++)switch(o=s[e],n=this.N.tag(o),n){case"image":case"video":case"message":r=this.N.attr("jid",o),r&&(a||(a={type:"frequent"}),a[n]?a[n].push(r):a[n]=[r])}}}return a},statusQuery:function(){switch(arguments.length){case 2:case 3:case 4:return this.statusQueryUpdate.apply(this,arguments);case 0:default:return this.statusQueryAll()}},statusQueryAll:function(){return new Promise(((e,t)=>{const s=this.queryNode({type:"status"},void 0);this.binSend("sendEphemeral",s,t,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((t=>{const s={statuses:[]},a=this.N.children(t);if(__LOG__(2)`bin-recv: response,statusv3`,"response"===this.N.tag(t)&&"status"===this.N.attr("type",t)&&(s.checksum=this.N.attr("checksum",t),Array.isArray(a))){const e=a.length;for(let t=0;t<e;t++){const e=a[t],i=this.N.attr("jid",e),n=this.N.attr("unread",e),r=this.N.attr("count",e),o=this.N.attr("t",e);if("status"===this.N.tag(e)&&i&&r&&o){const t={id:i,unreadCount:parseInt(n,10)||0,totalCount:parseInt(r,10)||0,t:parseInt(o,10)||0,_msgs:[]},a=this.N.children(e);if(Array.isArray(a)){const e=a.length;for(let s=0;s<e;s++)switch(this.N.tag(a[s])){default:case"message":const e=this.parseMsgMessage(a[s],"response");e&&t._msgs.push(e);break;case"picture":const i=this.N.children(a[s]);i instanceof ArrayBuffer&&(t.pic=i)}}s.statuses.push(t)}}}e(s)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,statusv3",metricName:"QUERY_STATUS",ackRequest:!1})}))},statusQueryUpdate:function(e,t,s,a){return new Promise(((i,n)=>{const r="before"===a?"before":"after",o={type:"status",kind:r,chat:e,count:t.toString(),jid:s?s.remote:void 0,index:s?s.id:void 0,owner:s?s.fromMe.toString():void 0,participant:s?s.participant:void 0},l=this.queryNode(o,void 0);this.binSend("sendEphemeral",l,n,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const t=[],s=this.N.children(e);if(__LOG__(2)`bin-recv: response,statusv3`,"response"===this.N.tag(e)&&"status"===this.N.attr("type",e)&&Array.isArray(s)){const e=s.length;for(let a=0;a<e;a++){const e=this.parseMsg(s[a],"response");e&&t.push(e)}}i(t)})).catch(n)}),i),onDrop:this.wrap(n)},{debugString:["query","statusv3",r,t,s instanceof T.default?s.toString():e].join(),metricName:"QUERY_STATUS_UPDATE",ackRequest:!1})}))},sendConversationSeen:function(e,t,s,a,i){return new Promise(((n,r)=>{const o=this.actionNode("set",[["read",{kind:a?"status":void 0,chat:a?i:void 0,jid:e,index:t?t.id:void 0,owner:t?t.fromMe.toString():void 0,participant:t?t.participant:void 0,count:s&&t?s.toString():void 0},void 0]]);this.binSend("send",o,r,{clientCacheable:!0,onSend:this.wrap(n),onDrop:this.wrap(r)},{debugString:"action,"+(a?"status":"chat")+",read,"+JSON.stringify(t)+","+s,metricName:"READ",ackRequest:!0})}))},sendStatusSeen:function(e,t){return this.sendConversationSeen(e.remote,e,void 0,!0,t)},requestMediaReupload:function(e,t){return new Promise(((s,a)=>{const i=e.id,n=Array.isArray(t)?t.map((e=>["user",{jid:e},void 0])):void 0,r=i,o=this.queryNode({type:"media",index:r.id,jid:r.remote,owner:r.fromMe.toString(),participant:r.participant},n);this.binSend("sendEphemeral",o,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let t;if(__LOG__(2)`bin-recv: response,media`,"response"===this.N.tag(e)&&"media"===this.N.attr("type",e)){const s=parseInt(this.N.attr("code",e),10)||400,a=this.N.attr("url",e);s>=500&&502!==s?(__LOG__(3)`wap:requestMediaReupload:error ${s}`,t={status:s}):200===s&&a?t={status:200,url:a,mediaKey:this.N.attr("media_key",e),mediaKeyTimestamp:this.N.attr("media_key_timestamp",e),encFilehash:this.N.attr("enc_filehash",e),directPath:this.N.attr("direct_path",e)}:200!==s||a?(__LOG__(3)`wap:requestMediaReupload:error ${s}`,t={status:s}):(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("wap:requestMediaReupload:emptyUrl"),t={status:400})}else __LOG__(3)`wap:requestMediaReupload:malformed`,t={status:400};s(t)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))},parseCmd:function(e){switch(this.N.tag(e)){case"read":const t=this.N.attr("jid",e),s="false"===this.N.attr("type",e),a="status"===this.N.attr("kind",e),i=this.N.attr("checksum",e),n=this.N.attr("index",e),r="true"===this.N.attr("owner",e),o=this.N.attr("participant",e),l=this.N.attr("chat",e);let d;try{d=new T.default({id:n,fromMe:r,remote:t,participant:o})}catch(e){}const u={type:s?"unread":"read",jid:t,isStatus:a,checksum:i,chat:this.decodeJid(l),key:d},c=[!t,a&&!d];return this.dropIfConditionMet(c,u);case"identity":const h=this.parseIdentity(e);return h?(h.type="identity",h):void 0;default:return}},parseContact:function(e,t){if("user"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: user, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");let s=this.N.attr("name",e),a="true"===this.N.attr("enterprise",e);const i=this.N.attr("jid",e)||t,n=this.N.attr("short",e)||void 0,r=this.N.attr("type",e)||"in",o=this.N.attr("notify",e),l=this.N.attr("verify",e),d="true"===this.N.attr("status_mute",e),u=this.N.attr("index",e)||void 0,c=this.N.attr("vname",e),h=parseInt(this.N.attr("dm_duration",e),10)||0,f=parseInt(this.N.attr("dm_t",e),10)||0;let p,m;switch(l){case"true":case"0":case"1":case"2":p=!0,m=parseInt(l,10)||0;break;default:p=!1,a=!1}s||m!==v.default.VERIFIED_LEVEL.HIGH||(s=c);const _=this.N.children(e),g=[];if(Array.isArray(_))for(let e=0;e<_.length;e++){const t=_[e];if("label"===this.N.tag(t)){const e=this.N.attr("id",t);e&&g.push(e)}}const S={id:i,name:s,type:r,shortName:n,pushname:o,isBusiness:p,verifiedLevel:m,statusMute:d,sectionHeader:u,verifiedName:c,labels:g,isEnterprise:a,disappearingModeDuration:h,disappearingModeSettingTimestamp:f};return this.dropIfConditionMet([!i,"in"!==r&&"out"!==r&&!!r],S)},parseAck:function(e){if("received"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)`expected tag: received, received tag: ${this.N.tag(e)}, tag id: ${this.N.attr("id",e)}`,void SEND_LOGS("wap-unexpected-tag");const t=this.N.attr("type",e),s=this.N.attr("index",e),a=this.N.attr("jid",e),i="true"===this.N.attr("owner",e),n=this.N.attr("participant",e);let r;switch(t){case"message":r=v.default.ACK.RECEIVED;break;case"read":r=v.default.ACK.READ;break;case"played":r=v.default.ACK.PLAYED;break;case"error":r=v.default.ACK.FAILED;break;case"pending":default:r=v.default.ACK.CLOCK}const o=(0,C.getMaybeMeUser)(),l={cmd:"ack",id:s,ack:r,from:i?o:a,to:i?a:o,participant:n,self:i?"out":"in"},d=[!s,!a,w.default.isStatusV3(a),"message"!==t&&"read"!==t&&"played"!==t&&"error"!==t&&"pending"!==t];return this.dropIfConditionMet(d,l)},parseMsgMessage:function(e,t){if("message"!==this.N.tag(e))return void __LOG__(3)`drop: not message`;const s=this.N.children(e);if(s instanceof ArrayBuffer)try{const e=(0,h.decodeProtobuf)(O.WebMessageInfoSpec,s);return this.parseWebMessageInfo(e,t)}catch(e){return __LOG__(2)`wmi error: ${String(e)}`,__LOG__(4,void 0,new Error,!0)`drop: failed parsing wmi`,void SEND_LOGS("parse-error")}else __LOG__(3)`drop: no bytes`},parseWebMessageInfo:function(e,t){const s=e.key,a=this.decodeJid(s.remoteJid),i=(0,C.getMaybeMeUser)(),n=s.fromMe?a:i,r=s.fromMe?i:a;let o=this.decodeJid(s.participant),l=this.decodeJid(e.participant);E.default.supportsFeature(E.default.F.MD_BACKEND)&&(w.default.isGroup(a)||w.default.isStatusV3(a))&&(null==o&&(null!=e.participant?o=this.decodeJid(e.participant):s.fromMe&&(o=i)),l=l||o);let d,u="in";if(i.equals(a)&&(u=s.fromMe?"out":"in"),"broadcast"===n)return void __LOG__(3)`drop: broadcast`;try{d=new T.default({fromMe:(0,m.default)(s.fromMe,"key.fromMe"),remote:a,id:(0,m.default)(s.id,"key.id"),participant:o})}catch(e){return void __LOG__(3)`drop: cannot create MsgKey: ${e.stack}`}const c={id:d,from:r,to:n,self:u,participant:o,type:"unknown",t:e.messageTimestamp||0,ack:"fresh"===t?v.default.ACK.SENT:e.status-1,author:l,invis:!!e.ignore,star:!!e.starred,broadcast:s.fromMe&&e.broadcast,notifyName:e.pushName||"",encFilehash:this.decodeBytes(e.mediaCiphertextSha256),shareDuration:e.duration,labels:e.labels,ephemeralStartTimestamp:e.ephemeralStartTimestamp,ephemeralOutOfSync:e.ephemeralOutOfSync,bizPrivacyStatus:e.bizPrivacyStatus,verifiedBizName:e.verifiedBizName};return e.message?this.parseMsgProto(e.message,c,t,e.paymentInfo,e.finalLiveLocation,e.quotedPaymentInfo):this.parseMsgStubProto(e,c)},parseProtocolMessageProto:function(e,t,s){if("relay"===s||t.type===S.ProtocolMessageType.EPHEMERAL_SETTING)switch(e.type="protocol",t.type){case S.ProtocolMessageType.REVOKE:const s=t.key,a=new T.default({fromMe:s.fromMe,remote:this.decodeJid(s.remoteJid),id:s.id,participant:this.decodeJid(s.participant)});e.subtype="revoke",e.protocolMessageKey=a;break;case S.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case S.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp;break;default:e.subtype="unknown"}},sendConversationPin:function(e,t,s){return new Promise(((a,i)=>{const n=this.actionNode("set",[["chat",{type:"pin",pin:t?t.toString():void 0,previous:s?s.toString():void 0,jid:e},void 0]]);this.binSend("send",n,i,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(i)},{debugString:["action","chat",e,t?"pin,"+t:"unpin,"+s].join(),metricName:"CHAT",ackRequest:!0})}))},subscribeLiveLocation:function(e,t){return new Promise(((s,a)=>{const i=this.queryNode({type:"location",kind:"subscribe",jid:e,participant:t?"true":void 0},void 0);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a=this.N.children(e),i={participants:[]};if(__LOG__(2)`bin-recv: response,location`,"response"!==this.N.tag(e)||"location"!==this.N.attr("type",e))return void s(i);const n=parseInt(this.N.attr("duration",e),10);if(i.duration=Number.isNaN(n)?void 0:n,!t||!Array.isArray(a))return t&&__LOG__(2)`LiveLocation:response with no participants`,void s(i);const r=a.length;for(let e=0;e<r;e++){const t=a[e],s=this.N.attr("jid",t),n=parseInt(this.N.attr("expiration",t),10),r=parseInt(this.N.attr("elapsed",t),10)||0,o=this.N.children(t);if("participant"!==this.N.tag(t)||!s)continue;const l={id:s,expiration:Number.isNaN(n)?void 0:n,elapsed:r};if(o){const e=(0,h.decodeProtobuf)(S.MessageSpec,o).liveLocationMessage;e&&this.parseLiveLocationMessageProto(l,e)}l.lat&&l.lng?__LOG__(2)`LiveLocation:response with lat/lng`:__LOG__(2)`LiveLocation:response without lat/lng`,i.participants.push(l)}s(i)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:["query,location",e,t].join(),metricName:"QUERY_LIVE_LOCATIONS"})}))},unsubscribeLiveLocation:function(e){return new Promise(((t,s)=>{const a=this.actionNode("set",[["location",{type:"unsubscribe",jid:e},void 0]]);this.binSend("send",a,s,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(s)},{debugString:"action,location,unsubscribe,"+e,metricName:"LIVE_LOCATION"})}))},queryActiveLiveLocation:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"location",kind:"participant",jid:e},void 0);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s=this.N.children(e),a={participants:[]};if(__LOG__(2)`bin-recv: response,location`,"response"!==this.N.tag(e)||"location"!==this.N.attr("type",e))return void t(a);if(!Array.isArray(s))return void t(a);const i=s.length;for(let e=0;e<i;e++){const t=s[e],i=this.N.attr("jid",t),n=parseInt(this.N.attr("expiration",t),10);if("participant"!==this.N.tag(t)||!i)continue;const r={id:i,expiration:Number.isNaN(n)?void 0:n};a.participants.push(r)}t(a)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:"query,location,participant,"+e,metricName:"QUERY_LIVE_LOCATIONS"})}))},disableLiveLocation:function(e){return new Promise(((t,s)=>{const a=this.actionNode("set",[["location",{type:"disable",jid:e},void 0]]);this.binSend("send",a,s,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(s)},{debugString:"action,location,disable,"+e,metricName:"LIVE_LOCATION"})}))},parseLocation:function(e){if("location"!==this.N.tag(e))return;const t=this.N.attr("type",e),s=this.N.attr("jid",e),a=this.N.attr("author",e),i=parseInt(this.N.attr("elapsed",e),10)||0,n=parseInt(this.N.attr("id",e),10)||0,r=this.N.children(e),o={type:t};switch(t){case"update":if(o.jid=s,o.elapsed=i,r){const e=(0,h.decodeProtobuf)(S.MessageSpec,r).liveLocationMessage;e&&this.parseLiveLocationMessageProto(o,e)}o.type="update",o.lat&&o.lng?__LOG__(2)`LiveLocation:update with lat/lng`:__LOG__(2)`LiveLocation:update without lat/lng`;break;case"disable":o.jid=a||s,o.chat=s,o.seq=n}return this.pruneUndefinedProps(o),this.dropIfConditionMet(["update"!==t&&"disable"!==t,!("update"!==t||s&&r),"disable"===t&&!s],o)},parseMsgStubProto:function(e,t){const s=O.WebMessageInfoStubType;switch(e.messageStubType){case s.REVOKE:return t.type="revoked",t;case s.CIPHERTEXT:return t.type="ciphertext",t;case s.OVERSIZED:return t.type="oversized",t;case s.FUTUREPROOF:return t.subtype="phone",t;default:return this.parseMsgStubTemplate(e,t)}},parseMsgStubTemplate:function(e,t){const s=O.WebMessageInfoStubType;switch(t.type="notification_template",t.templateParams=Array.isArray(e.messageStubParameters)?e.messageStubParameters.map((t=>e.messageStubType===s.GROUP_CREATE||e.messageStubType===s.GROUP_CHANGE_SUBJECT?t:this.decodeJid(t))):void 0,e.messageStubType){case s.NON_VERIFIED_TRANSITION:t.subtype="non_verified_transition";break;case s.UNVERIFIED_TRANSITION:t.subtype="unverified_transition";break;case s.VERIFIED_TRANSITION:t.subtype="verified_transition";break;case s.VERIFIED_LOW_UNKNOWN:t.subtype="verified_low_unknown";break;case s.VERIFIED_HIGH:t.subtype="verified_high";break;case s.VERIFIED_INITIAL_UNKNOWN:t.subtype="verified_initial_unknown";break;case s.VERIFIED_INITIAL_LOW:t.subtype="verified_initial_low";break;case s.VERIFIED_INITIAL_HIGH:t.subtype="verified_initial_high";break;case s.VERIFIED_TRANSITION_ANY_TO_NONE:t.subtype="verified_transition_any_to_none";break;case s.VERIFIED_TRANSITION_ANY_TO_HIGH:t.subtype="verified_transition_any_to_high";break;case s.VERIFIED_TRANSITION_HIGH_TO_LOW:t.subtype="verified_transition_high_to_low";break;case s.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:t.subtype="verified_transition_high_to_unknown";break;case s.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:t.subtype="verified_transition_unknown_to_low";break;case s.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:t.subtype="verified_transition_low_to_unknown";break;case s.VERIFIED_TRANSITION_NONE_TO_LOW:t.subtype="verified_transition_none_to_low";break;case s.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:t.subtype="verified_transition_none_to_unknown";break;case s.GROUP_CREATE:t.type="gp2",t.subtype="create",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case s.GROUP_DELETE:t.type="gp2",t.subtype="delete",t.recipients=[],t.templateParams=void 0;break;case s.GROUP_CHANGE_SUBJECT:t.type="gp2",t.subtype="subject",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case s.GROUP_CHANGE_ICON:t.type="gp2",t.subtype="picture",t.recipients=[],t.body=t.templateParams[0],t.templateParams=void 0;break;case s.GROUP_CHANGE_INVITE_LINK:t.type="gp2",t.subtype="revoke_invite",t.recipients=[];break;case s.GROUP_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="description",t.recipients=[];break;case s.GROUP_CHANGE_RESTRICT:t.type="gp2",t.subtype="restrict",t.recipients=[],t.body=t.templateParams[0];break;case s.GROUP_CHANGE_ANNOUNCE:t.type="gp2",t.subtype="announce",t.recipients=[],t.body=t.templateParams[0];break;case s.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:t.type="gp2",t.subtype="no_frequently_forwarded",t.recipients=[],t.body=t.templateParams[0];break;case s.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:t.type="gp2",t.subtype="announce_msg_bounce",t.recipients=[],t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_ADD:t.type="gp2",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_REMOVE:t.type="gp2",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_INVITE:t.type="gp2",t.subtype="invite",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_LEAVE:t.type="gp2",t.subtype="leave",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_CHANGE_NUMBER:t.type="gp2",t.subtype="modify",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_V4_ADD_INVITE_SENT:t.type="gp2",t.subtype="v4_add_invite_sent",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:t.type="gp2",t.subtype="v4_add_invite_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.BROADCAST_CREATE:t.type="broadcast_notification",t.subtype="create",t.body=t.templateParams[0]||"0",t.templateParams=void 0;break;case s.BROADCAST_ADD:t.type="broadcast_notification",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.BROADCAST_REMOVE:t.type="broadcast_notification",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case s.GENERIC_NOTIFICATION:t.type="notification",t.body=t.templateParams[0],t.templateParams=void 0;break;case s.E2E_IDENTITY_CHANGED:t.type="e2e_notification",t.subtype="identity",t.body=t.templateParams[0]instanceof w.default?t.templateParams[0].toString():t.templateParams[0],t.templateParams=void 0;break;case s.E2E_IDENTITY_UNAVAILABLE:t.type="e2e_notification",t.subtype="e2e_identity_unavailable";break;case s.E2E_DEVICE_CHANGED:t.type="e2e_notification",t.subtype="device",t.body=t.templateParams[0]instanceof w.default?t.templateParams[0].toString():t.templateParams[0],t.devicesAdded=parseInt(t.templateParams[1],10),t.devicesRemoved=parseInt(t.templateParams[2],10),t.templateParams=void 0;break;case s.E2E_ENCRYPTED:t.type="e2e_notification",t.subtype="encrypt";break;case s.E2E_ENCRYPTED_NOW:t.type="e2e_notification",t.subtype="encrypt_now";break;case s.CALL_MISSED_VOICE:t.type="call_log",t.subtype="miss";break;case s.CALL_MISSED_VIDEO:t.type="call_log",t.subtype="miss_video";break;case s.CALL_MISSED_GROUP_VOICE:t.type="call_log",t.subtype="miss_group";break;case s.CALL_MISSED_GROUP_VIDEO:t.type="call_log",t.subtype="miss_group_video";break;case s.INDIVIDUAL_CHANGE_NUMBER:t.subtype="change_number";break;case s.CHANGE_EPHEMERAL_SETTING:t.type="gp2",t.subtype="ephemeral",t.author=t.templateParams[1],t.recipients=[];break;case s.PAYMENT_CIPHERTEXT:t.type="payment",t.subtype="ciphertext",this.callFeatureFlagFun(E.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case s.PAYMENT_FUTUREPROOF:t.type="payment",t.subtype="futureproof",this.callFeatureFlagFun(E.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case s.PAYMENT_ACTION_REQUEST_CANCELLED:t.subtype="payment_transaction_request_cancelled";break;case s.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:t.subtype="payment_transaction_status_update_failed";break;case s.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:t.subtype="payment_transaction_status_update_refunded";break;case s.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:t.subtype="payment_transaction_status_update_refund_failed";break;case s.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:t.subtype="payment_transaction_status_receiver_pending_setup";break;case s.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:t.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case s.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:t.subtype="payment_action_account_setup_reminder";break;case s.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:t.subtype="payment_action_send_payment_reminder";break;case s.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:t.subtype="payment_action_send_payment_invitation";break;case s.PAYMENT_ACTION_REQUEST_DECLINED:t.subtype="payment_action_request_declined";break;case s.PAYMENT_ACTION_REQUEST_EXPIRED:t.subtype="payment_action_request_expired";break;case s.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:t.subtype="biz_verified_transition_top_to_bottom";break;case s.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:t.subtype="biz_verified_transition_bottom_to_top";break;case s.BIZ_INTRO_TOP:t.subtype="biz_intro_top";break;case s.BIZ_INTRO_BOTTOM:t.subtype="biz_intro_bottom";break;case s.BIZ_NAME_CHANGE:t.subtype="biz_name_change";break;case s.BIZ_MOVE_TO_CONSUMER_APP:t.subtype="biz_move_to_consumer_app";break;case s.BIZ_TWO_TIER_MIGRATION_TOP:t.subtype="biz_two_tier_migration_top";break;case s.BIZ_TWO_TIER_MIGRATION_BOTTOM:t.subtype="biz_two_tier_migration_bottom";break;case s.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:t.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case s.BLUE_MSG_BSP_FB_TO_SELF_FB:t.subtype="blue_msg_bsp_fb_to_self_fb";break;case s.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_fb_to_self_premise";break;case s.BLUE_MSG_BSP_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_unverified";break;case s.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case s.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case s.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case s.BLUE_MSG_BSP_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_verified";break;case s.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case s.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case s.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case s.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_premise_to_self_premise";break;case s.BLUE_MSG_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_unverified";break;case s.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case s.BLUE_MSG_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_verified";break;case s.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case s.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case s.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case s.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_fb_unverified";break;case s.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_premise_unverified";break;case s.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:t.subtype="blue_msg_self_fb_to_bsp_premise";break;case s.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:t.subtype="blue_msg_self_fb_to_self_premise";break;case s.BLUE_MSG_SELF_FB_UNVERIFIED:t.subtype="blue_msg_self_fb_unverified";break;case s.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case s.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case s.BLUE_MSG_SELF_FB_VERIFIED:t.subtype="blue_msg_self_fb_verified";break;case s.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case s.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case s.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:t.subtype="blue_msg_self_premise_to_bsp_premise";break;case s.BLUE_MSG_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_premise_unverified";break;case s.BLUE_MSG_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_premise_verified";break;case s.BLUE_MSG_TO_BSP_FB:t.subtype="blue_msg_to_bsp_fb";break;case s.BLUE_MSG_TO_CONSUMER:t.subtype="blue_msg_to_consumer";break;case s.BLUE_MSG_TO_SELF_FB:t.subtype="blue_msg_to_self_fb";break;case s.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case s.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case s.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_unverified_to_self_fb_verified";break;case s.BLUE_MSG_UNVERIFIED_TO_VERIFIED:t.subtype="blue_msg_unverified_to_verified";break;case s.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case s.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case s.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_self_fb_unverified";break;case s.BLUE_MSG_VERIFIED_TO_UNVERIFIED:t.subtype="blue_msg_verified_to_unverified";break;case s.BIZ_PRIVACY_MODE_INIT_FB:t.subtype="biz_privacy_mode_init_fb";break;case s.BIZ_PRIVACY_MODE_INIT_BSP:t.subtype="biz_privacy_mode_init_bsp";break;case s.BIZ_PRIVACY_MODE_TO_FB:t.subtype="biz_privacy_mode_to_fb";break;case s.BIZ_PRIVACY_MODE_TO_BSP:t.subtype="biz_privacy_mode_to_bsp";break;case s.DISAPPEARING_MODE:t.subtype="disappearing_mode";break;case s.BLOCK_CONTACT:t.subtype="block_contact";break;default:t.templateParams=void 0}return t},sendCallOffer:function(e){return new Promise(((t,s)=>{const a=(0,x.default)(),i=N.default.formatCallOffer(this,a,e);this.binSend("send",i,s,{tag:a,onSend:this.wrap((e=>{t(e)}),t),onDrop:this.wrap(s),retryOn5xx:!0,isCallOffer:!0},{debugString:["action","call","offer",e.common.peer_jid].join(),debugObj:{xml:i,struct:e},metricName:"CALL"})}))},sendMdOptIn:function(){return new Promise(((e,t)=>{const s=this.actionNode("set",[["MDOptIn",{enabled:"true"},void 0]]);this.binSend("send",s,t,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((t=>{__LOG__(2)`bin-recv: response,MDOptIn`;const s={status:200};"error"===this.N.tag(t)&&(s.status=this.N.attr("code",t)),e(s)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"action,md_opt_in,enabled",metricName:"MD_OPT_IN"})}))},supportsFeatureFlags:!0,implementedFeatures:{}});var R,L=(0,o.default)(j,g.default);t.Z=L},63922:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=i(s(48926)),o=i(s(41609)),l=i(s(52628)),d=s(55084),u=s(42977),c=i(s(7900)),h=i(s(43674)),f=i(s(19681)),p=i(s(15971)),m=i(s(36806)),_=i(s(71618)),g=i(s(94727)),v=s(54647),S=a(s(13540)),C=s(86723),y=i(s(12950)),E=i(s(82456)),b=i(s(80959)),T=i(s(74937)),M=i(s(65963)),x=i(s(41341)),I=i(s(3060)),P=i(s(87947)),A=i(s(82095)),N=i(s(61848)),O=i(s(69635)),w=i(s(72787)),D={epochCount:0,epoch:0,epochSend:function(e){return 0===this.epochCount&&this.epoch++,e||this.epochCount++,__LOG__(2)`wap:epochCount: ${this.epochCount} epoch: ${this.epoch}`,this.epoch.toString()},epochRecv:function(){this.epochCount>0?this.epochCount--:__LOG__(3)`wap:epochRecv: NEGATIVE`,__LOG__(2)`wap:epochCount: ${this.epochCount} epoch: ${this.epoch}`},setSubProtocol:function(e){if(-1===e)this.BinaryProtocol=new f.default,this.N=this.BinaryProtocol.Node;else{if(null==e||0===e)throw __LOG__(3)`Wap:setSubProtocol unknown ${String(e)}`,new S.UpdateImmediately(`${this.version}_unknown_version`);this.BinaryProtocol=new h.default(e),this.N=this.BinaryProtocol.Node}},clearBPQueue:function(){return new Promise((e=>{this.BinaryProtocol.dropAllBecauseLogout(),e()}))},upgradeProtoVersion(e){if(e.BinaryProtocol instanceof f.default){const t=e.BinaryProtocol.getWriteQueue();for(;t.length;){const{n:e,resolve:s,reject:a}=t.shift();this.BinaryProtocol.write(e).then(s).catch(a)}}},delete:function(){this.epochCount=0,this.epoch=0},cannotReachPhone:function(){this.epochRecv()},dropIfConditionMet:function(e,t){return e.reduce((function(e,t){return e||t}),!1)?void 0:t},pruneUndefinedProps:function(e){for(const t in e){void 0===e[t]&&delete e[t]}},callFeatureFlagFun:function(e,t){if(y.default.supportsFeature(e)){const e=[];for(let t=2;t<arguments.length;t++)e.push(arguments[t]);return this[t](...e)}},safeParseInt:function(e,t){const s=parseInt(this.N.attr(t,e),10);return Number.isNaN(s)?void 0:s},wrap:function(e){return t=>{if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;this.epochRecv(),e(t)}},wrap02:function(e){return function(t){if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;e(t)}},binWrap:function(e,t){return s=>{if(s&&"object"==typeof s&&"number"==typeof s.status){if(401===s.status)throw this.epochRecv(),new v.E401;if(s.status>=500)return s;this.epochRecv(),t(s)}else this.epochRecv(),e(s)}},binSend:(n=(0,r.default)((function*(e,t,s,a,i){const n=a.epochIneligible?s:e=>{this.epochRecv(),s(e)};delete a.epochIneligible;try{const s=yield this.BinaryProtocol.write(t);i.debugObj||(i.debugObj=t),i.metric=this.M[i.metricName],i.ackRequest=!1,a.data=s,a.binaryOpts=i,w.default[e](a)}catch(e){return n(e)}})),function(){return n.apply(this,arguments)}),msgGetTarget:function(e){return O.default.equals(e.from,(0,C.getMaybeMeUser)())?e.to:e.from},thumbFromMediaXml:function(e){return"raw"===this.N.attr("encoding",e)?this.N.children(e)instanceof ArrayBuffer?(0,u.encodeB64)(this.N.children(e)):"":this.N.dataStr(e)},actionNode:function(e,t,s){return["action",{type:e,epoch:this.epochSend(s)},t]},queryNode:function(e,t){let s=e;return s||(s={}),s.epoch=this.epochSend(),["query",s,t]},responseNode:function(e,t){let s=e;return s||(s={}),s.epoch=this.epochSend(),["response",s,t]},errorNode:function(e){return["error",{code:e.toString(),epoch:this.epochSend()},void 0]},actionGetMeta:function(e){const t={};if("action"!==this.N.tag(e))return t;const s=this.N.attr("add",e),a=this.N.attr("missing",e),i=this.N.attr("checksum",e);switch(s){case"unread":t.unreadId=this.N.attr("index",e),t.unreadFromMe="true"===this.N.attr("owner",e),t.unreadParticipant=this.N.attr("participant",e);case"after":case"before":case"last":t.pendingMsgsDone="true"===this.N.attr("last",e),t.resume="true"===this.N.attr("resume",e);case"relay":case"update":t.add=s}switch(a){case"remove":t.missing=a}return i&&(t.checksum=i),t},groupActionsByType:function(e){const t={};if(!Array.isArray(e))return t;let s,a;const i=e.length;for(a=0;a<i;a++)switch(s=e[a],this.N.tag(s)){case"broadcast":switch(this.N.attr("type",s)){case"create":case"add":case"remove":t.msg||(t.msg=[]),t.msg.push(s);break;case"modify":t.bcUpdate||(t.bcUpdate=[]),t.bcUpdate.push(s)}break;case"message":case"groups_v2":case"notification":case"call_log":case"security":t.msg||(t.msg=[]),t.msg.push(s);break;case"read":case"log":case"identity":t.cmd||(t.cmd=[]),t.cmd.push(s);break;case"received":t.ack||(t.ack=[]),t.ack.push(s);break;case"user":t.contact||(t.contact=[]),t.contact.push(s);break;case"contacts":t.contacts||(t.contacts=[]),t.contacts.push(s);break;case"chat":switch(this.N.attr("type",s)){case"mute":t.mute||(t.mute=[]),t.mute.push(s);break;default:t.chat||(t.chat=[]),t.chat.push(s)}break;case"battery":t.battery||(t.battery=[]),t.battery.push(s);break;case"location":t.location||(t.location=[]),t.location.push(s);break;case"label":t.label||(t.label=[]),t.label.push(s);break;case"group":t.group||(t.group=[]),t.group.push(s);break;case"quick_reply":t.quickReply||(t.quickReply=[]),t.quickReply.push(s);break;case"call":t.call||(t.call=[]),t.call.push(s);break;case"stickerPack":case"sticker_pack":t.stickerPack||(t.stickerPack=[]),t.stickerPack.push(s);break;case"recent_stickers":t.recentStickers||(t.recentStickers=[]),t.recentStickers.push(s);break;case"starred_stickers":t.starredStickers||(t.starredStickers=[]),t.starredStickers.push(s);break;case"notice":t.notice||(t.notice=[]),t.notice.push(s);break;case"archive_v2":t.archiveSetting||(t.archiveSetting=[]),t.archiveSetting.push(s);break;case"disappearing_mode":t.disappearingModeSetting||(t.disappearingModeSetting=[]),t.disappearingModeSetting.push(s);break;default:__LOG__(3,!0)`Wap:groupActionsByType unknown action: ${this.N.toString(s)}`}return t},handleResponse:function(e,t,s){if(0===e.indexOf("preempt"))switch(this.N.attr("type",t)){case"chat":{__LOG__(2)`bin-recv: ${e},response,chat`;const a=this.N.children(t)||[];if(Array.isArray(a)){const e=a.length,t=[];for(let s=0;s<e;s++){const e=this.parseChat(a[s]);e&&t.push(e)}(0,m.default)([{cmd:"preempt",response:t,binarySize:s}])}break}case"contacts":{__LOG__(2)`bin-recv: ${e},response,contact`;const a=this.N.children(t);if(Array.isArray(a)){const e=a.length,i=[];for(let t=0;t<e;t++){const e=this.parseContact(a[t]);e&&i.push(e)}(0,g.default)([{cmd:"preempt",checksum:this.N.attr("checksum",t),response:i,binarySize:s}])}break}default:__LOG__(3)`Wap:handle unknown response type: ${this.N.toString(t,!0)}`}else __LOG__(3)`Wap:handle non-preemptive response: ${this.N.toString(t,!0)}`},handleActionMsg:function(e,t,s,a){const i=a.length;switch(s.add){case"relay":case"update":{const t=this.parseMsg(a[0],"relay");if(1!==i&&__LOG__(3)`Wap:handle action msg relay length not 1`,t){__LOG__(2)`bin-recv: ${[e,"action","msg",s.add,t.type,t.from,t.to,t.id,t.author].join(",")}`;const a=this.msgGetTarget(t);(0,E.default)([{meta:s,chat:a,msg:t}])}else __LOG__(3)`Wap:handle action msg relay dropped`;break}case"last":{const n=[];for(let e=0;e<i;e++){const t=this.parseMsg(a[e],"last");t?n.push(t):__LOG__(3)`Wap:handle action msg last dropped`}if(n.length>0){__LOG__(2)`bin-recv: ${[e,"action","msg","last",a.length].join(",")}`;const i={recent:!0,meta:s,binarySize:t};for(let e=0;e<n.length;e++)i[this.msgGetTarget(n[e])]=n[e];(0,E.default)([i])}else __LOG__(3)`Wap:handle action msg last dropped to 0`;break}case"before":case"after":case"unread":if(i>0){const n=[];for(let e=0;e<i;e++){const t=this.parseMsg(a[e],s.add);t?n.push(t):__LOG__(3)`Wap:handle action msg before/after dropped`}if(n.length>0){const a=this.msgGetTarget(n[0]);__LOG__(2)`bin-recv: ${[e,"action","msg",s.add,a,n.length].join(",")}`,(0,E.default)([{meta:s,chat:a,msgs:n,binarySize:t}])}else __LOG__(3)`Wap:handle action msg ${s.add} dropped to 0`}else __LOG__(3)`Wap:handle action msg before/after 0 msgs`;break;default:__LOG__(3)`Wap:handle action msg no meta.add`}},handleAction:function(e,t,a){const i=this.actionGetMeta(t),n=this.groupActionsByType(this.N.children(t)),r=Object.keys(n);if(!Array.isArray(r))return void __LOG__(3)`Wap:handle:action keys not array: ${typeof r}`;const d=r.length;if(0!==d||"last"!==i.add)for(let u=0;u<d;u++){const d=r[u],h=n[d],f=h.length;switch(d){case"msg":this.handleActionMsg(e,a,i,h,t);break;case"cmd":for(let t=0;t<f;t++){const a=this.parseCmd(h[t]);if(a){const t=(0,l.default)(a).join(",");__LOG__(2)`bin-recv: ${[e,"action","cmd",t].join(",")}`,s(90805).handle([a])}else __LOG__(3)`Wap:handle action cmd invalid`}break;case"bcUpdate":{const t=[];for(let e=0;e<f;e++){const s=this.parseBCUpdate(h[e]);s?t.push(s):__LOG__(3)`Wap:handle action bc update invalid`}if(__LOG__(2)`bin-recv: ${[e,"action","bcUpdate",t.length].join(",")}`,t.length>0){s(75798).default.handle(t)}break}case"ack":for(let t=0;t<f;t++){const s=this.parseAck(h[t]);s?(__LOG__(2)`bin-recv: ${[e,"action","ack",s.to,s.id,s.ack].join(",")}`,(0,E.default)([s])):__LOG__(3)`Wap:handle action ack invalid`}break;case"contact":{const t=[];for(let e=0;e<f;e++){const s=this.parseContact(h[e]);s?t.push(s):__LOG__(3)`Wap:handle action contact dropped`}if(__LOG__(2)`bin-recv: ${[e,"action","contact",t.length,i.missing].join(",")}`,t.length>0){const e=[t];(i.missing||i.checksum)&&e.push(i),(0,g.default)(e)}break}case"contacts":{const t=this.parseContacts(h[0]);__LOG__(2)`bin-recv: ${[e,"action","contacts"].join(",")}`,t?(0,g.default)([t]):__LOG__(3)`Wap:handle:action:contacts dropped`;break}case"chat":{const t=[];for(let e=0;e<f;e++){const s=this.parseChat(h[e]);s?t.push(s):__LOG__(3)`Wap:handle action chat dropped`}__LOG__(2)`bin-recv: ${[e,"action","chat",t.length].join(",")}`,t.length>0&&(0,m.default)([t]);break}case"battery":{const t=this.parseBattery(h[0]);t?(__LOG__(2)`bin-recv: ${[e,"action","battery",t.battery,t.plugged].join(",")}`,(0,_.default)([t])):__LOG__(3)`Wap:handle action battery dropped`;break}case"mute":{const t=[];for(let e=0;e<f;e++){const s=this.parseChat(h[e]);s?t.push(s):__LOG__(3)`Wap:handle action mute dropped`}__LOG__(2)`bin-recv: ${[e,"action","mute",t.length].join(",")}`,t.length>0&&b.default.handle(t);break}case"location":{const t=[];for(let a=0;a<f;a++){const i=this.parseLocation(h[a]);i?t.push(i):__LOG__(3)`Wap:handle:location dropped`,__LOG__(2)`bin-recv:${[e,"action,location",t.length].join()}`,t.length>0&&s(31104).default.handle(t)}break}case"label":{const t=[];for(let a=0;a<f;a++){const n=this.callFeatureFlagFun(y.default.F.LABELS_DISPLAY,"parseLabel",h[a]);n?t.push(n):__LOG__(3)`Wap:handle:label dropped`,__LOG__(2)`bin-recv:${[e,"action,label",t.length].join()}`,t.length>0&&s(59606).default.handle({checksum:i.checksum,labels:t})}break}case"group":for(let t=0;t<f;t++){const a=this.callFeatureFlagFun(y.default.F.GROUPS_V_4_JOIN_PERMISSION,"parseInviteUpdate",h[t]);if(__LOG__(2)`bin-recv:${[e,"action,group_v4_pending_invites",a&&a.length].join()}`,void 0!==a){s(75798).default.handlePendingInvite({gid:a.gid,participants:a.participants})}}break;case"quickReply":{const t=[];for(let s=0;s<f;s++){const a=this.callFeatureFlagFun(y.default.F.QUICK_REPLIES_QUERY,"parseQuickReply",h[s]);a?t.push(a):__LOG__(3)`Wap:handle:quickReply dropped`,__LOG__(2)`bin-recv:${[e,"action,quickReply",t.length].join()}`,t.length>0&&M.default.handle({checksum:i.checksum,quickReplies:t})}break}case"call":{const t=this.callFeatureFlagFun(y.default.F.VOIP_INDIVIDUAL_INCOMING,"parseCall",h[0]);__LOG__(2)`bin-recv:${[e,"action","call"].join()}`,t?p.default.handle([t]):__LOG__(3)`Wap:handle:action:call dropped`;break}case"stickerPack":case"sticker_pack":{const t=[];for(let s=0;s<f;s++){const a=this.callFeatureFlagFun(y.default.F.STICKER_PACK_QUERY,"parseStickerPackUpdate",h[s]);a?(t.push(a),N.default.sync(i.checksum)):__LOG__(3)`Wap:handle:stickerPack dropped`,__LOG__(2)`bin-recv:${[e,"action,stickerPack",t.length].join()}`}break}case"recentStickers":if(y.default.isRecentStickersEnabled())for(let t=0;t<f;t++){const s=(0,I.default)(h[t],this.N);s?(x.default.setChecksum(i.checksum),x.default.remove(s),__LOG__(2)`bin-recv:${[e,"action,recentStickers",s].join()}`):__LOG__(3)`Wap:handle:recentStickers dropped`}break;case"starredStickers":if(y.default.isStarredStickersEnabled())for(let t=0;t<f;t++){const a=(0,A.default)(h[t],this.N);if(a){const{type:t,filehash:i,sticker:n}=a,r=s(68477).default;switch(t){case"add":r.add((0,c.default)(n,"sticker"),{at:0,sort:!1},!0);break;case"delete":r.remove(i)}__LOG__(2)`bin-recv:${[e,"action,starredStickers",t,i].join()}`}else __LOG__(3)`Wap:handle:starredStickers dropped`}break;case"notice":{const t=[];for(let s=0;s<f;s++){const a=this.callFeatureFlagFun(y.default.F.USER_NOTICE,"parseNotice",h[s]);a?!(0,o.default)(a)&&t.push(a):__LOG__(3)`Wap:handle:notice dropped`,__LOG__(2)`bin-recv:${[e,"action,notice",t.length].join()}`,T.default.handleResponse(t)}break}case"archiveSetting":for(let t=0;t<f;t++){const s=this.callFeatureFlagFun(y.default.F.SETTINGS_SYNC,"parseSetting",h[t]);s||__LOG__(3)`Wap:handle:setting dropped`,__LOG__(2)`bin-recv:${[e,"action,setting,archive"].join()}`,P.default.handleResponse([s])}break;case"disappearingModeSetting":for(let t=0;t<f;t++){const s=this.callFeatureFlagFun(y.default.F.SETTINGS_SYNC,"parseSetting",h[t]);s||__LOG__(3)`Wap:handle:setting dropped`,__LOG__(2)`bin-recv:${[e,"action,setting,disappearing_mode"].join()}`,P.default.handleResponse([s])}break;default:__LOG__(3)`Wap:handle action unknown ${d}`}}else(0,E.default)([{recent:!0,meta:i,binarySize:a}])},handleQuery:function(e,t){const s=this.N.children(t);if(Array.isArray(s))for(let t=0;t<s.length;t++){const a=s[t],i=this.N.tag(a);let n;switch(__LOG__(2)`bin-recv:${[e,"query",i].join()}`,i){case"call":n=this.callFeatureFlagFun(y.default.F.VOIP_INDIVIDUAL_INCOMING,"handleCallQuery",a);break;default:__LOG__(3)`wap:handle:query unknown ${i}`}n||(n=Promise.resolve(this.errorNode(501))),n.then((t=>{this.BinaryProtocol.write(t).then((s=>{w.default.send({tag:e,data:s,onSend:this.wrap((()=>{})),onDrop:this.wrap((()=>{})),retryOn5xx:!0,binaryOpts:{debugString:["response",i].join(),debugObj:t,metricName:"QUERY_RESPONSE",ackRequest:!0}})})).catch((()=>{this.epochRecv()}))}))}},handle:function(e,t,a,i){return this.BinaryProtocol.read(e).then((e=>{switch(this.N.tag(e)){case"response":this.handleResponse(a,e,i,t);break;case"action":this.handleAction(a,e,i,t);break;case"query":this.handleQuery(a,e,i);break;case"read":const n=this.parseCmd(e);if(n){const e=(0,l.default)(n).join();__LOG__(2)`bin-recv:${[a,"action",e].join()}`,s(90805).handle([n])}else __LOG__(3)`Wap:handle read invalid`;break;default:__LOG__(3,!0)`TODO ${this.N.toString(e,!0)}`}return!0})).catch((0,d.filteredCatch)(v.LogoutDrop,(e=>{__LOG__(3)`LogoutDrop error: ${e.toString()}`}))).catch((e=>{throw __LOG__(2)`BinaryProtocol read error with tag ${a}, size: ${i}`,__LOG__(2)`BinaryProtocol read error stack: ${e.stack||""}`,new Error(`BinaryProtocol read error: ${e}`)}))}};t.default=D},19681:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(54647),r=i(s(13540)),o=a(s(26104));var l=class{constructor(){this._writeQueue=[],this.Node=o.default}read(){return __LOG__(3)`Attempted to call \`read\` on BinaryProtocolQueue`,Promise.reject(new r.Disconnected)}write(e){return new Promise(((t,s)=>{this._writeQueue.push({resolve:t,reject:s,n:e})}))}dropAllBecauseLogout(){const e=new n.LogoutDrop("cancelled binary protocol call");for(;this._writeQueue.length;){this._writeQueue.shift().reject(e)}}getWriteQueue(){return this._writeQueue}};t.default=l},43674:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(48926)),r=i(s(91747)),o=i(s(30236)),l=s(87517),d=i(s(94572)),u=i(s(60334)),c=i(s(44346)),h=i(s(24439)),f=i(s(11215)),p=i(s(14114)),m=i(s(93961)),_=i(s(76188)),g=a(s(13540)),v=i(s(12950)),S=i(s(37202)),C=i(s(47792)),y=i(s(30230)),E=i(s(15825)),b=i(s(54039)),T=i(s(97529));const M=(e,t)=>{if(Array.isArray(e)&&t)return e.concat(t)},x=(e,t)=>{if(e.Dictionary){const s={};(0,o.default)(s,t.Dictionary,e.Dictionary,M),e.Dictionary=s}return(0,r.default)(e,t)},I={OutputStream:C.default,Writer:b.default,InputStream:S.default,Reader:y.default,Dictionary:u.default,Crypto:d.default},P=x({Dictionary:c.default},I),A=x({Dictionary:h.default},P),N=x({Dictionary:f.default},A),O=x({Dictionary:p.default},N),w=x({Dictionary:m.default},O),D=x({Writer:T.default,Reader:E.default,Dictionary:_.default},w),j={"01":!0,"03":!0,"04":!0,"05":!0,"06":!0,v1:!0,v2:!0,v3:!0,v4:!0},R={v5:I,v6:P,v7:A,v8:N,v9:O,v10:w,v11:D};t.default=class{constructor(e){const t="number"==typeof e?`v${e}`:e;if(j[t])throw __LOG__(3)`binaryProtocol deprecated version: ${t}`,new g.DeprecatedProtocolVersion("bp_deprecated_version");const a=R[t];if(!a)throw __LOG__(3)`binaryProtocol unknown version: ${t}`,new g.UpdateImmediately("bp_unknown_version");const i=a.OutputStream,r=new a.Writer(a.Dictionary),o=a.InputStream,d=new a.Reader(a.Dictionary),u=a.Crypto;this.Node=s(26104).default,v.default.supportsFeature(v.default.F.MD_BACKEND)?this.read=e=>Promise.resolve(d.readNode(new o(e))):this.read=function(){var e=(0,n.default)((function*(e){const t=yield u.decrypt(e);return d.readNode(new o(t))}));return function(){return e.apply(this,arguments)}}(),this.write=(0,l.promiseWrapSync)((e=>{const t=new i;return r.writeNode(t,e),u.encrypt(t.toBuffer())})),this.dropAllBecauseLogout=()=>u.dropAllBecauseLogout()}}},93961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["vname","old_jid","new_jid","announcement","locked","prop","label","color","call","offer","call-id"]}},41585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,JID_AD:247,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},76188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["quick_reply","sticker","pay_t","accept","reject","sticker_pack","invalid","canceled","missed","connected","result","audio","video","recent"]}},15825:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t="",s="";const a=e.singleByte,r=e.doubleByte,l=e.nibbleDecode;this.readNode=function(e){let s=e.readByte();const a=this.readListSize(e,s);if(s=e.readByte(),s===i.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());const n=this.readString(e,s);if(t=n,0===a||!n)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());const r=this.readAttributes(e,a-2+a%2>>1);if(a%2==1)return[n,r,void 0];{let t;if(s=e.readByte(),this.isListTag(s))t=this.readList(e,s);else if(s===i.default.BINARY_8){const s=e.readByte();t=e.readBytes(s)}else if(s===i.default.BINARY_20){const s=e.readInt20();t=e.readBytes(s)}else if(s===i.default.BINARY_32){const s=e.readInt32();t=e.readBytes(s)}else t=this.readString(e,s);return[n,r,t]}},this.isListTag=function(e){return e===i.default.LIST_EMPTY||e===i.default.LIST_8||e===i.default.LIST_16},this.readListSize=function(e,t){if(t===i.default.LIST_EMPTY)return 0;if(t===i.default.LIST_8)return e.readByte();if(t===i.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,a,r=!0){let l;if(-1===a)throw new Error("invalid start token readString"+e.debugInfo());if(a>2&&a<236){let e=this.getToken(a);return"s.whatsapp.net"===e&&(e="c.us"),e}switch(a){case i.default.DICTIONARY_0:case i.default.DICTIONARY_1:case i.default.DICTIONARY_2:case i.default.DICTIONARY_3:const d=e.readByte();return this.getTokenDouble(a-i.default.DICTIONARY_0,d);case i.default.LIST_EMPTY:return;case i.default.BINARY_8:return l=e.readString(e.readByte()),this.isAttr&&r&&n.default.isWid(l)?o(l):l;case i.default.BINARY_20:return l=e.readString(e.readInt20()),this.isAttr&&r&&n.default.isWid(l)?o(l):l;case i.default.BINARY_32:return l=e.readString(e.readInt32()),this.isAttr&&r&&n.default.isWid(l)?o(l):l;case i.default.JID_PAIR:{const t=this.readString(e,e.readByte()),s=this.readString(e,e.readByte());if(void 0!==t&&void 0!==s){const e=t+"@"+s;return r&&n.default.isWid(e)?o(e):e}if(void 0!==s)return s;throw new Error("invalid jid "+t+","+s+" "+e.debugInfo())}case i.default.JID_AD:{const t=e.readByte(),s=e.readByte(),a=this.readString(e,e.readByte());if(void 0!==a)return o(t&&s?a+"."+t+":"+s+"@c.us":t?a+"."+t+"@c.us":s?a+":"+s+"@c.us":a+"@c.us");throw new Error(`invalid JID_AD agent:${t} device:${s} user:${a}`)}case i.default.NIBBLE_8:case i.default.HEX_8:return this.readPacked8(a,e);default:throw __LOG__(2,!0)`Unexpected token in binary protocol read. Token : ${a}
lastTag: ${t}
lastAttributeKey: ${s}
${e.debugInfoWithPadding()}`,new Error("invalid string "+a)}},this.getToken=function(e){let t;if(e>=0&&e<a.length&&(t=a[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){let s;const a=256*e+t;if(a>=0&&a<r.length&&(s=r[a]),void 0===s)throw new Error("invalid double byte token "+e+" "+t);return s},this.readAttributes=function(e,t){let a,i;this.isAttr=!0;const r=t?{}:void 0;for(let o=0;o<t;o++)a=this.readString(e,e.readByte()),s=a,i=this.readString(e,e.readByte(),n.default.canBeWid(a)),r[a]=i;return this.isAttr=!1,r},this.readList=function(e,t){const s=[],a=this.readListSize(e,t);for(let t=0;t<a;t++)s.push(this.readNode(e));return s},this.readPacked8=function(e,t){const s=t.readByte();let a="";for(let i=0;i<(127&s);i++){const s=t.readByte();a+=this.unpackByte(e,(240&s)>>4),a+=this.unpackByte(e,15&s)}return s>>7&&(a=a.substring(0,a.length-1)),a},this.unpackByte=function(e,t){switch(e){case i.default.NIBBLE_8:return this.unpackNibble(t);case i.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!l.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return l[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var i=a(s(41585)),n=a(s(69635)),r=s(89573);function o(e){try{return(0,r.createWid)(e)}catch(t){return e}}},97529:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;const s={},a=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(s[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(s[e.doubleByte[t]]=t+n.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(!t)return;if(3!==t.length)throw new Error("invalid node");const s=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+s+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])},this.writeString=function(e,t,a){if("string"!=typeof t&&!(t instanceof r.default))throw __LOG__(3)`writer:writeString passed non-string/wid type: ${typeof t}`,new Error("invalid string");if(t instanceof r.default)return void this.writeJid(e,t);const i=s.hasOwnProperty(t)?s[t]:void 0;let l,d;if("c.us"!==t||a)if(void 0===i){if(t.indexOf("@")<1)this.writeStringRaw(e,t);else try{const s=(0,o.createWid)(t);this.writeJid(e,s)}catch(s){this.writeStringRaw(e,t)}}else{if(i<n.default.SINGLE_BYTE_MAX)this.writeToken(e,i);else{const e=i-n.default.SINGLE_BYTE_MAX;switch(d=e%256,e>>8){case 0:l=n.default.DICTIONARY_0;break;case 1:l=n.default.DICTIONARY_1;break;case 2:l=n.default.DICTIONARY_2;break;case 3:l=n.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+i)}}this.writeToken(e,l),this.writeToken(e,d)}else this.writeToken(e,s["s.whatsapp.net"])},this.writeStringRaw=function(e,t){const s=(0,i.numUtf8Bytes)(t);if(s>=4294967296)throw new Error("string too large to encode (len = "+s+"): "+t);s>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(s)):s>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(s)):(e.pushByte(n.default.BINARY_8),e.pushByte(s)),e.pushString(t)},this.writeJid=function(e,t){const s=t.user,a=t.server,i=t.agent,r=t.device;if(i||r){if(i>255||r>255||"c.us"!==a&&"s.whatsapp.net"!==a)throw new Error(`invalid agent:${i} or device:${r} or server:${a} for wid ${t.toString()}`);e.pushByte(n.default.JID_AD),e.pushByte(i||0),e.pushByte(r||0),s?this.writePackedBytesStringFallback(e,s):this.writeToken(e,n.default.LIST_EMPTY)}else e.pushByte(n.default.JID_PAIR),s?this.writePackedBytesStringFallback(e,s):this.writeToken(e,n.default.LIST_EMPTY),this.writeString(e,a)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){this.isAttr=!0;for(const s in t)t[s]&&(this.writeString(e,s),this.writeString(e,t[s]));this.isAttr=!1}},this.writeChildren=function(e,t){let s;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if(s=t.byteLength,s>=4294967296)throw new Error("invalid children; too long (len = "+s);s>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(s)):s>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(s)):(e.pushByte(n.default.BINARY_8),e.pushByte(s)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");s=t.length,this.writeListStart(e,s);for(let a=0;a<s;a++)this.writeNode(e,t[a])}},this.writeListStart=function(e,t){0===t?e.pushByte(n.default.LIST_EMPTY):t<256?(e.pushByte(n.default.LIST_8),e.pushByte(t)):(e.pushByte(n.default.LIST_16),e.pushInt16(t))},this.writePackedBytesStringFallback=function(e,t){try{this.writePackedBytes(e,t)}catch(s){__LOG__(3,!0)`writer:encode-fallback "${s.message}"`,this.writeString(e,t)}},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,n.default.NIBBLE_8)}catch(s){__LOG__(3)`writer:enc nib fail, try hex "${s.message}"`,this.writePackedBytesImpl(e,t,n.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,s){const a=(0,i.numUtf8Bytes)(t);if(a>n.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+a);{const i=Math.ceil(a/2),n=[];let r,o=0;a%2>0&&(o=128);const l=o|i;n.push(s),n.push(l);const d=Math.floor(a/2);for(let e=0;e<d;e++)r=this.packBytePair(s,t[2*e],t[2*e+1]),n.push(r);o>0&&(r=this.packBytePair(s,t[a-1],"\0"),n.push(r));const u=new Uint8Array(n);e.pushUint8Array(u)}},this.packBytePair=function(e,t,s){let a,i;switch(e){case n.default.NIBBLE_8:a=this.packNibble(t),i=this.packNibble(s);break;case n.default.HEX_8:a=this.packHex(t),i=this.packHex(s);break;default:throw new Error("invalid byte pack type: "+e)}return a<<4|i},this.packNibble=function(e){if(!a.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return a[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var i=s(38438),n=a(s(41585)),r=a(s(69635)),o=s(89573)},17472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},94572:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(7900)),r=s(21902),o=s(54647),l=i(s(12761)),d=a(s(7125));class u{static encrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:encrypt"));const t=d.get(),s=(0,r.encryptAndMac)((0,n.default)(t.encKey,"bundle.encKey"),(0,n.default)(t.macKey,"bundle.macKey"),e);return this._encryptQueue.enqueue(s)}static decrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:decrypt"));const t=d.get(),s=(0,r.macAndDecrypt)((0,n.default)(t.encKey,"bundle.encKey"),(0,n.default)(t.macKey,"bundle.macKey"),e);return this._decryptQueue.enqueue(s)}static dropAllBecauseLogout(){const e=new o.LogoutDrop("cancelled binary protocol call");this._encryptQueue.cancelAll(e),this._decryptQueue.cancelAll(e)}}t.default=u,u._encryptQueue=new l.default,u._decryptQueue=new l.default},60334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={singleByte:[void 0,void 0,void 0,"200","400","404","500","501","502","action","add","after","archive","author","available","battery","before","body","broadcast","chat","clear","code","composing","contacts","count","create","debug","delete","demote","duplicate","encoding","error","false","filehash","from","g.us","group","groups_v2","height","id","image","in","index","invis","item","jid","kind","last","leave","live","log","media","message","mimetype","missing","modify","name","notification","notify","out","owner","participant","paused","picture","played","presence","preview","promote","query","raw","read","receipt","received","recipient","recording","relay","remove","response","resume","retry","s.whatsapp.net","seconds","set","size","status","subject","subscribe","t","text","to","true","type","unarchive","unavailable","url","user","value","web","width","mute","read_only","admin","creator","short","update","powersave","checksum","epoch","block","previous","409","replaced","reason","spam","modify_tag","message_info","delivery","emoji","title","description","canonical-url","matched-text","star","unstar","media_key","filename","identity","unread","page","page_count","search","media_message","security","call_log","profile"],doubleByte:[],nibbleEncode:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"-":10,".":11,"\0":15},nibbleDecode:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"-",11:".",15:"\0"}};t.default=s},37202:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(38438);t.default=class{constructor(e){this.binary=new a.Binary(e)}readByte(){return this.binary.readUint8()}readInt16(){return this.binary.readUint16()}readInt20(){return((15&this.binary.readUint8())<<16)+(this.binary.readUint8()<<8)+this.binary.readUint8()}readInt32(){return this.binary.readUint32()}readString(e){return this.binary.readString(e)}readBytes(e){return this.binary.readBuffer(e)}debugInfo(){const e=this.binary;return`offset: ${e._readIndex} byte: ${e._buffer[e._readIndex]}`}debugInfoWithPadding(){const e=this.binary,t=e._buffer.slice(Math.max(0,e._readIndex-20),e._readIndex).toString(),s=e._buffer.slice(e._readIndex,Math.min(e._buffer.length,e._readIndex+20)).toString();return`offset: ${e._readIndex} byte: ${e._buffer[e._readIndex]} previous 20 bytes: ${t}\n        following 20 bytes: ${s}\n        `}}},47792:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(38438);t.default=class{constructor(){this.buf=new a.Binary}pushInt16(e){this.buf.writeUint16(e)}pushInt20(e){if("number"!=typeof e)throw new Error("invalid int20");this.buf.writeUint8((983040&e)>>16),this.buf.writeUint16(65535&e)}pushInt32(e){this.buf.writeUint32(e)}pushByte(e){this.buf.writeUint8(e)}pushBytes(e){if(!(e instanceof ArrayBuffer))throw new Error("invalid byte buffer");this.buf.writeBuffer(e)}pushUint8Array(e){if("[object Uint8Array]"!==Object.prototype.toString.call(e))throw new Error("invalid Uint8Array");this.buf.writeByteArray(e)}pushString(e){if("string"!=typeof e)throw new Error("invalid string");this.buf.writeString(e)}toBuffer(){return this.buf.readBuffer()}}},30230:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t="",s="";const a=e.singleByte,r=e.doubleByte,l=e.nibbleDecode;this.readNode=function(e){let s=e.readByte();const a=this.readListSize(e,s);if(s=e.readByte(),s===i.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());const n=this.readString(e,s);if(0===a||!n)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());t=n;const r=this.readAttributes(e,a-2+a%2>>1);if(a%2==1)return[n,r,void 0];{let t;if(s=e.readByte(),this.isListTag(s))t=this.readList(e,s);else if(s===i.default.BINARY_8){const s=e.readByte();t=e.readBytes(s)}else if(s===i.default.BINARY_20){const s=e.readInt20();t=e.readBytes(s)}else if(s===i.default.BINARY_32){const s=e.readInt32();t=e.readBytes(s)}else t=this.readString(e,s);return[n,r,t]}},this.isListTag=function(e){return e===i.default.LIST_EMPTY||e===i.default.LIST_8||e===i.default.LIST_16},this.readListSize=function(e,t){if(t===i.default.LIST_EMPTY)return 0;if(t===i.default.LIST_8)return e.readByte();if(t===i.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,a,r=!0){let l;if(-1===a)throw new Error("invalid start token readString"+e.debugInfo());if(a>2&&a<236){let e=this.getToken(a);return"s.whatsapp.net"===e&&(e="c.us"),e}switch(a){case i.default.DICTIONARY_0:case i.default.DICTIONARY_1:case i.default.DICTIONARY_2:case i.default.DICTIONARY_3:const d=e.readByte();return this.getTokenDouble(a-i.default.DICTIONARY_0,d);case i.default.LIST_EMPTY:return;case i.default.BINARY_8:return l=e.readString(e.readByte()),this.isAttr&&r&&n.default.isWid(l)?o(l):l;case i.default.BINARY_20:return l=e.readString(e.readInt20()),this.isAttr&&r&&n.default.isWid(l)?o(l):l;case i.default.BINARY_32:return l=e.readString(e.readInt32()),this.isAttr&&r&&n.default.isWid(l)?o(l):l;case i.default.JID_PAIR:const u=this.readString(e,e.readByte()),c=this.readString(e,e.readByte());if(void 0!==u&&void 0!==c){const e=u+"@"+c;return r&&n.default.isWid(e)?o(e):e}if(void 0!==c)return c;throw new Error("invalid jid "+u+","+c+" "+e.debugInfo());case i.default.NIBBLE_8:case i.default.HEX_8:return this.readPacked8(a,e);default:throw __LOG__(2,!0)`Unexpected token in binary protocol read. Token : ${a}
lastTag: ${t}
lastAttributeKey: ${s}
${e.debugInfoWithPadding()}`,new Error("invalid string "+a)}},this.getToken=function(e){let t;if(e>=0&&e<a.length&&(t=a[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){let s;const a=256*e+t;if(a>=0&&a<r.length&&(s=r[a]),void 0===s)throw new Error("invalid double byte token "+e+" "+t);return s},this.readAttributes=function(e,t){let a,i;this.isAttr=!0;const r=t?{}:void 0;for(let o=0;o<t;o++)a=this.readString(e,e.readByte()),s=a,i=this.readString(e,e.readByte(),n.default.canBeWid(a)),r[a]=i;return this.isAttr=!1,r},this.readList=function(e,t){const s=[],a=this.readListSize(e,t);for(let t=0;t<a;t++)s.push(this.readNode(e));return s},this.readPacked8=function(e,t){const s=t.readByte();let a="";for(let i=0;i<(127&s);i++){const s=t.readByte();a+=this.unpackByte(e,(240&s)>>4),a+=this.unpackByte(e,15&s)}return s>>7&&(a=a.substring(0,a.length-1)),a},this.unpackByte=function(e,t){switch(e){case i.default.NIBBLE_8:return this.unpackNibble(t);case i.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!l.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return l[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var i=a(s(17472)),n=a(s(69635)),r=s(89573);function o(e){try{return(0,r.createWid)(e)}catch(t){return e}}},54039:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;const s={},a=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(s[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(s[e.doubleByte[t]]=t+n.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(!t)return;if(3!==t.length)throw new Error("invalid node");const s=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+s+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])},this.writeString=function(e,t,a){if("string"!=typeof t&&!(t instanceof r.default))throw __LOG__(3)`writer:writeString passed non-string/wid type: ${typeof t}`,new Error("invalid string");if(t instanceof r.default)return void this.writeJid(e,t.user,t.server);const i=s.hasOwnProperty(t)?s[t]:void 0;let o,l;if("c.us"!==t||a)if(void 0===i){const s=t.indexOf("@");if(s<1)this.writeStringRaw(e,t);else{const a=t.substring(0,s),i=t.substring(s+1);this.writeJid(e,a,i)}}else{if(i<n.default.SINGLE_BYTE_MAX)this.writeToken(e,i);else{const e=i-n.default.SINGLE_BYTE_MAX;switch(l=e%256,e>>8){case 0:o=n.default.DICTIONARY_0;break;case 1:o=n.default.DICTIONARY_1;break;case 2:o=n.default.DICTIONARY_2;break;case 3:o=n.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+i)}}this.writeToken(e,o),this.writeToken(e,l)}else this.writeToken(e,s["s.whatsapp.net"])},this.writeStringRaw=function(e,t){const s=(0,i.numUtf8Bytes)(t);if(s>=4294967296)throw new Error("string too large to encode (len = "+s+"): "+t);s>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(s)):s>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(s)):(e.pushByte(n.default.BINARY_8),e.pushByte(s)),e.pushString(t)},this.writeJid=function(e,t,s){if(e.pushByte(n.default.JID_PAIR),t)try{this.writePackedBytes(e,t)}catch(s){__LOG__(3,!0)`writer:encode-fallback "${s.message}"`,this.writeString(e,t)}else this.writeToken(e,n.default.LIST_EMPTY);this.writeString(e,s)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){this.isAttr=!0;for(const s in t)t[s]&&(this.writeString(e,s),this.writeString(e,t[s]));this.isAttr=!1}},this.writeChildren=function(e,t){let s;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if(s=t.byteLength,s>=4294967296)throw new Error("invalid children; too long (len = "+s);s>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(s)):s>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(s)):(e.pushByte(n.default.BINARY_8),e.pushByte(s)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");s=t.length,this.writeListStart(e,s);for(let a=0;a<s;a++)this.writeNode(e,t[a])}},this.writeListStart=function(e,t){0===t?e.pushByte(n.default.LIST_EMPTY):t<256?(e.pushByte(n.default.LIST_8),e.pushByte(t)):(e.pushByte(n.default.LIST_16),e.pushInt16(t))},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,n.default.NIBBLE_8)}catch(s){__LOG__(3)`writer:enc nib fail, try hex "${s.message}"`,this.writePackedBytesImpl(e,t,n.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,s){const a=(0,i.numUtf8Bytes)(t);if(a>n.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+a);{const i=Math.ceil(a/2),n=[];let r,o=0;a%2>0&&(o=128);const l=o|i;n.push(s),n.push(l);const d=Math.floor(a/2);for(let e=0;e<d;e++)r=this.packBytePair(s,t[2*e],t[2*e+1]),n.push(r);o>0&&(r=this.packBytePair(s,t[a-1],"\0"),n.push(r));const u=new Uint8Array(n);e.pushUint8Array(u)}},this.packBytePair=function(e,t,s){let a,i;switch(e){case n.default.NIBBLE_8:a=this.packNibble(t),i=this.packNibble(s);break;case n.default.HEX_8:a=this.packHex(t),i=this.packHex(s);break;default:throw new Error("invalid byte pack type: "+e)}return a<<4|i},this.packNibble=function(e){if(!a.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return a[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var i=s(38438),n=a(s(17472)),r=a(s(69635))},44346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["ciphertext","invite"]}},24439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["gif","vcard","frequent"]}},11215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["privacy","blacklist","whitelist","verify"]}},14114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["location","document","elapsed","revoke_invite","expiration","unsubscribe","disable"]}},32684:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={sendConversationDismissChangeNumber:function(e){return this.sendConversationOpWithKey("modify",e,void 0,void 0)}};t.default=s},77522:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(30381)),n=s(86723),r=a(s(72787)),o={setGroupEphemeralDuration:function(e,t){return new Promise(((s,a)=>{const o=r.default.tag(),l=this.wrap(s);l.tag=o;const d=[["ephemeral",{value:t.toString()},void 0]],u=["group",{id:o,jid:e,type:"prop",author:(0,n.getMaybeMeUser)()},d],c=this.actionNode("set",[u]);this.binSend("send",c,a,{clientCacheable:!0,onSend:l,onDrop:this.wrap(a)},{debugString:"action,group,ephemeral,"+t,metricName:"GROUP",expires:(0,i.default)().unix()})}))}};t.default=o},12033:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(30381)),n=s(86723),r=s(74289),o=a(s(72787)),l={setGroupDescription:function(e,t,s,a){return new Promise(((l,d)=>{const u=o.default.tag(),c=this.wrap(l);let h;c.tag=u,h=(0,r.isString)(t)?[["description",{id:s,prev:a||"none"},t]]:[["description",{prev:a||"none",delete:"true"},void 0]];const f=["group",{id:u,jid:e,type:"description",author:(0,n.getMaybeMeUser)()},h],p=this.actionNode("set",[f]);this.binSend("send",p,d,{clientCacheable:!0,onSend:c,onDrop:this.wrap(d)},{debugString:"action,group,desc",metricName:"GROUP",expires:(0,i.default)().unix()})}))},setGroupProperty:function(e,t,s){return"announcement"!==t&&"restrict"!==t&&"no_frequently_forwarded"!==t?Promise.reject("invalid group property"):new Promise(((a,r)=>{const l=o.default.tag(),d=this.wrap(a);let u;switch(d.tag=l,t){case"announcement":u=[["announcement",{value:(!!s).toString()},void 0]];break;case"restrict":u=[["locked",{value:(!!s).toString()},void 0]];break;case"no_frequently_forwarded":u=[["no_frequently_forwarded",{value:(!!s).toString()},void 0]]}const c=["group",{id:l,jid:e,type:"prop",author:(0,n.getMaybeMeUser)()},u],h=this.actionNode("set",[c]);this.binSend("send",h,r,{clientCacheable:!0,onSend:d,onDrop:this.wrap(r)},{debugString:["action,group,prop",t,s].join(),metricName:"GROUP",expires:(0,i.default)().unix()})}))},demoteParticipants:function(e,t){return this.setGroupParticipants("demote",e,t)}};t.default=l},80187:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(30381)),n=s(86723),r=s(74289),o=a(s(72787)),l={createGroup:function(e,t,s,a,l,d,u){return new Promise(((c,h)=>{const f=o.default.tag(),p=this.wrap(c);p.tag=f;const m=t.map((e=>["participant",{jid:e},void 0]));(0,r.isString)(s)&&(0,r.isString)(a)&&m.unshift(["description",{id:a},s]),l&&m.unshift(["locked",void 0,void 0]),d&&m.unshift(["announcement",void 0,void 0]),null!=u&&0!==u&&m.unshift(["ephemeral",{value:u.toString()},void 0]),__LOG__(2)`create group tag`;const _=["group",{id:f,type:"create",author:(0,n.getMaybeMeUser)(),subject:e},m],g=this.actionNode("set",[_]);this.binSend("send",g,h,{clientCacheable:!0,onSend:p,onDrop:this.wrap(h)},{debugString:"action,group,create",metricName:"GROUP",expires:(0,i.default)().unix()})}))}};t.default=l},92361:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(30381)),n=a(s(72787)),r={findGroupPendingInvitesFromPhone:function(e,t){return new Promise(((s,a)=>{const i=this.queryNode({type:"group",kind:"invite",from:e,jid:t},[]);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{if("response"!==this.N.tag(e)||"group"!==this.N.attr("type",e))return void s({status:"error",info:"bad format: response incorrect"});const t=this.N.children(e),a=t&&t[0];if(!a)return void s({status:"error",info:"bad format: no group node"});const i=[],n=this.N.children(a);Array.isArray(n)&&n.forEach((e=>{switch(this.N.tag(e)){case"participant":i.push({id:this.N.attr("jid",e)})}})),s({participants:i})})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:"query,group_pending_invite",metricName:"QUERY_GROUP",ackRequest:!1})}))},acceptGroupV4Invite:function(e,t,s,a,r){return new Promise(((o,l)=>{const d=n.default.tag(),u=this.wrap(o);u.tag=d;const c=[["accept",{admin:t,expiration:a,code:s},void 0]],h=this.actionNode("set",[["group",{id:d,author:r,jid:e,type:"accept"},c]]);this.binSend("send",h,l,{clientCacheable:!0,onSend:u,onDrop:this.wrap(l)},{debugString:"action,group_invite_accept,",ackRequest:!1,expires:(0,i.default)().unix()})}))},revokeGroupV4Invite:function(e,t,s){return new Promise(((a,r)=>{const o=n.default.tag(),l=this.wrap(a);l.tag=o;const d=e.map((e=>["participant",{jid:e},void 0])),u=this.actionNode("set",[["group",{id:o,author:s,jid:t,type:"revoke"},d]]);this.binSend("send",u,r,{clientCacheable:!0,onSend:l,onDrop:this.wrap(r)},{debugString:"action,group_invite_revoke,",ackRequest:!1,expires:(0,i.default)().unix()})}))},parseInviteUpdate(e){const t=[],[s,a,i]=[this.N.attr("kind",e),this.N.attr("jid",e),this.N.attr("type",e)];if("update"!==s||"invite"!==i||void 0===a)return;const n=this.N.children(e);for(let e=0;e<n.length;e++){const s=n[e];"participant"===this.N.tag(s)&&t.push(this.N.attr("jid",s))}return{gid:a,participants:t}}};t.default=r},50284:(e,t,s)=>{"use strict";var a=s(95318);t.Z=void 0;var i=a(s(32684)),n=a(s(77522)),r=a(s(12033)),o=a(s(80187)),l=a(s(92361)),d=a(s(42762)),u=a(s(88496)),c=a(s(28813)),h=a(s(8797)),f=a(s(28995)),p=a(s(77171)),m=a(s(88740)),_=a(s(2108)),g=a(s(90319)),v=a(s(49373)),S=a(s(47066)),C=a(s(12142)),y=a(s(56206)),E=a(s(33763)),b={labelsDisplay:d.default,groupsV3:r.default,groupsV3Create:o.default,changeNumberV2:i.default,queryStatusV3Thumbnail:p.default,queryVname:m.default,voipIndividualIncoming:E.default,quickRepliesQuery:_.default,payments:f.default,stickerPackQuery:C.default,labelsEdit:u.default,mediaUpload:c.default,videoPlaybackUrl:y.default,recentStickersV2:g.default,recentStickersV3:g.default,starredStickers:S.default,groupsV4JoinPermission:l.default,ephemeralMessages:n.default,userNotice:h.default,settingsSync:v.default};t.Z=b},42762:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(7900)),n=(s(50555),a(s(77043)));const r={chat:["Chat","Contact"],message:["Msg"],contact:["Contact"]};var o={queryLabels:function(){return new Promise(((e,t)=>{const s=this.queryNode({type:"label"});this.binSend("sendEphemeral",s,t,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((t=>{const s={labels:[]};if(__LOG__(2)`bin-recv: response,label`,"response"===this.N.tag(t)&&"label"===this.N.attr("type",t)){s.checksum=this.N.attr("checksum",t);const e=this.N.children(t);if(Array.isArray(e))for(let t=0;t<e.length;t++){const a=this.parseLabel(e[t]),i=a&&a.label;i&&s.labels.push(i)}}e(s)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,labels",metricName:"QUERY_LABELS"})}))},parseLabel:function(e){if("label"!==this.N.tag(e))return;const t=parseInt(this.N.attr("count",e),10),s=this.N.attr("id",e),a=this.N.attr("name",e),o=this.N.attr("color",e),d=isNaN(t)?void 0:t,u=this.N.attr("type",e);let c;if("update"===u){const t=this.N.children(e);for(let e=0;e<t.length;e++){const s=t[e];let a=null;switch(this.N.tag(s)){case"chat":a=this.N.attr("jid",s);break;case"message":const e=this.N.attr("jid",s),t=this.N.attr("index",s),i="true"===this.N.attr("owner",s),r=this.N.attr("participant",s);a=new n.default({fromMe:i,remote:e,id:t,participant:r})}const o={id:(0,i.default)(a,"updateId"),labels:l(this.N.children(s),this.N.attr),collection:r[this.N.tag(s)]};c=c?c.concat(o):[o]}}const h={label:{id:s,name:a,color:o,count:d},type:u,labelUpdates:c};return this.dropIfConditionMet([!(u||s&&a&&o),u&&"update"!==u&&"delete"!==u],h)}};function l(e,t){return e&&Array.isArray(e)?e.reduce(((e,s)=>[...e,(0,i.default)(t("id",s),"attr('id', label)")]),[]):[]}t.default=o},88496:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(30381)),n=a(s(17025)),r={queryNextLabelColor(){return this._queryLabelColor(!0)},queryLabelPalette(){return this._queryLabelColor()},createLabel(e,t){return this._createOrDeleteLabels("create",e,t)},deleteLabel(e){return this._createOrDeleteLabels("delete",void 0,void 0,e)},_queryLabelColor:function(e){const t=e?"next label color":"all label color palette";return new Promise(((s,a)=>{const i=this.queryNode({type:"label",kind:"color",create:e?"true":void 0});this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a={};if(__LOG__(2)`bin-recv: response,${t}`,"response"===this.N.tag(e)&&"label"===this.N.attr("type",e)){a.labelColors=[];const t=this.N.children(e);if(Array.isArray(t))for(let e=0;e<t.length;e++){const s=this.parseLabelColor(t[e]);s&&a.labelColors.push(s)}}s(a)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:`query,${t}`,metricName:e?"QUERY_NEXT_LABEL_COLOR":"QUERY_LABEL_PALETTE"})}))},addOrRemoveLabels:function(e,t=[]){return new Promise(((a,r)=>{const o=this.wrap(a),l=e.map((e=>["label",{id:e.id,type:e.type},void 0])),d=t.map((e=>e instanceof s(84758).default.modelClass?["chat",{jid:e.id},void 0]:e instanceof n.default.modelClass?["contact",{jid:e.id},void 0]:e instanceof s(45472).default.modelClass?["message",{index:e.id.id,owner:void 0===e.id.fromMe?void 0:e.id.fromMe.toString(),jid:e.id.remote},void 0]:void 0)),u=this.actionNode("set",[["label",{type:"update"},d.concat(l)]]);this.binSend("send",u,r,{onSend:o,onDrop:this.wrap(r)},{debugString:"action,label,remove or add",metricName:"ADD_OR_REMOVE_LABELS",expires:(0,i.default)().unix()})}))},_createOrDeleteLabels:function(e,t,s,a){return"delete"!==e&&"create"!==e?Promise.reject(new Error("_createOrDeleteLabels must be called with type of delete or create")):new Promise(((n,r)=>{const o=this.wrap(n),l={type:e,name:t,color:s,id:a||void 0},d=this.actionNode("set",[["label",l,void 0]]);this.binSend("send",d,r,{onSend:o,onDrop:this.wrap(r)},{debugString:"action,label,create or delete",metricName:"CREATE_OR_DELETE_LABELS",expires:(0,i.default)().unix()})}))},editLabel:function(e,t,s){return new Promise(((a,n)=>{const r=this.wrap(a),o={id:e,name:t||void 0,color:s||void 0,type:"update"},l=this.actionNode("set",[["label",o,void 0]]);this.binSend("send",l,n,{onSend:r,onDrop:this.wrap(n)},{debugString:"action,label,edit",metricName:"EDIT_LABELS",expires:(0,i.default)().unix()})}))},parseLabelColor:function(e){if("label"!==this.N.tag(e))return;const t=this.N.attr("color",e);return this.dropIfConditionMet([!t],{color:t})}};t.default=r},28813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const s=["url","mediaKey","filehash","encFilehash","width","height","mimetype"],a=["url","mediaKey","filehash","encFilehash","mimetype"];function i(e,t){for(let s=0;s<t.length;s++)if(!e[t[s]])return!1;return!0}var n={mediaUpload:function(e,t){return new Promise(((n,r)=>{const o=this.queryNode({type:"media",kind:e,id:t.toString()},void 0);this.binSend("sendEphemeral",o,r,{onSend:this.binWrap((t=>{this.BinaryProtocol.read(t).then((t=>{if(__LOG__(2)`bin-recv: response,media`,"response"!==this.N.tag(t)||"media"!==this.N.attr("type",t))return __LOG__(3)`wap:mediaUpload:malformed`,void n({status:400});const r=parseInt(this.N.attr("code",t),10)||200;if(200!==r)return __LOG__(3)`wap:mediaUpload:error ${r}`,void n({status:r});switch(e){case"sticker":{const e={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t),height:this.N.attr("height",t),width:this.N.attr("width",t)};return i(e,s)?void n({status:r,sticker:e}):(__LOG__(3)`wap:mediaUpload:missing-field`,void n({status:400}))}case"sticker-pack":{const e={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t)};return i(e,a)?void n({status:r,stickerPack:e}):(__LOG__(3)`wap:mediaUpload:missing-field`,void n({status:400}))}case"quick-reply":throw new Error('"quick-reply" not yet implemented');default:throw new Error(`unknown kind ${e}`)}}))}),n),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))}};t.default=n},8797:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(41609)),r={queryNoticeState:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"notice"},void 0),i=e?"query,notice_state,resume":"query,notice_state";this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s={notices:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)`bin-recv: response,notice_state`,"response"===this.N.tag(e)&&"notice"===this.N.attr("type",e)){const t=this.N.children(e);if(Array.isArray(t))for(let e=0;e<t.length;e++){const a=this.parseNotice(t[e]);(0,n.default)(a)||s.notices.push(a)}}t(s)})).catch(s)}),t),onDrop:this.wrap(s),serverCacheable:Boolean(e)},{debugString:i,metricName:"QUERY_NOTICE_STATE"})}))},parseNotice:function(e){if("notice"!==this.N.tag(e))return;const t=parseInt(this.N.attr("id",e),10),s=parseInt(this.N.attr("version",e),10),a={id:isNaN(t)?void 0:t,blocking:"true"===this.N.attr("blocking",e),version:isNaN(s)?void 0:s};return null!=a.id?a:(0,i.default)({},void 0)}};t.default=r},28995:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(76600),i={parsePaymentInfo:function(e,t){t&&(0,a.parseMsgPaymentInfo)(e,t)}};t.default=i},77171:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={statusQueryThumbnail:function(e){return this.profilePicFindThumbFromPhone(e,void 0,!0)}};t.default=s},88740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={queryVname:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"vname",jid:e},void 0);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((s=>{let a;__LOG__(2)`bin-recv: response,vname`,"response"===this.N.tag(s)&&"vname"===this.N.attr("type",s)&&(a=this.parseContact(this.N.child("user",s),e)),t(a)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:`query,vname,${e}`,metricName:"QUERY_VNAME"})}))}};t.default=s},2108:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(74289),i={queryQuickReplies:function(e){return this.sendQuickRepliesQuery(e,!1)},flushQuickReplyCounts:function(e){return this.sendQuickRepliesQuery(e,!0)},sendQuickRepliesQuery:function(e,t){return new Promise(((s,a)=>{const i=e?Object.keys(e).map((t=>["quick_reply",{id:t,count:e[t].toString()},void 0])):void 0,n={type:"quick_reply"};t&&(n.kind="count");const r=this.queryNode(n,i);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const a={data:[]};if(__LOG__(2)`bin-recv: response,quick_reply`,"response"===this.N.tag(e)&&"quick_reply"===this.N.attr("type",e)){a.checksum=this.N.attr("checksum",e);const s=this.N.children(e);if(Array.isArray(s))for(let e=0;e<s.length;e++){const i=(t?this.parseQuickReplyCount.bind(this):this.parseQuickReply.bind(this))(s[e]);i&&a.data.push(i)}}s(a)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:"query,quick_replies",metricName:"QUERY_QUICK_REPLIES"})}))},parseQuickReply:function(e){if("quick_reply"!==this.N.tag(e))return;const t=this.N.attr("id",e),s=this.N.attr("short",e),i=this.N.attr("message",e),n=parseInt(this.N.attr("count",e),10)||0,r=this.N.attr("type",e),o=[];if("delete"!==r){const t=this.N.children(e);if(Array.isArray(t))for(let e=0;e<t.length;e++){const s=t[e];"matched-text"===this.N.tag(s)&&o.push(this.N.dataStr(s))}}const l=[!(r||t&&s&&i&&(0,a.isNumber)(n)),r&&"delete"!==r,"delete"===r&&!t];return this.dropIfConditionMet(l,{id:t,shortcut:s,message:i,count:n,keywords:o,type:r})},parseQuickReplyCount:function(e){if("quick_reply"!==this.N.tag(e))return;const t=this.N.attr("id",e),s=parseInt(this.N.attr("count",e),10)||0,i=[!t||!(0,a.isNumber)(s)];return this.dropIfConditionMet(i,{id:t,count:s})}};t.default=i},90319:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(1233)),n={queryRecentStickers:function(){return new Promise(((e,t)=>{const s=this.queryNode({type:"recent_stickers"},void 0);this.binSend("sendEphemeral",s,t,{onSend:this.binWrap((s=>{this.BinaryProtocol.read(s).then((e=>(0,i.default)(e,this.N,"recent_stickers"))).then(e,t)}),e),onDrop:this.wrap(t)},{debugString:"query,recent_stickers",metricName:"QUERY_RECENT_STICKERS"})}))}};t.default=n},3060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("recent_stickers"!==t.tag(e))return;if("delete"!==t.attr("type",e))return;return t.attr("filehash",e)}},47066:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(1233)),n={queryStarredStickers:function(e=1,t=32){return new Promise(((s,a)=>{const n=this.queryNode({type:"starred_stickers",page:e.toString(),count:t.toString()},void 0);this.binSend("sendEphemeral",n,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>(0,i.default)(e,this.N,"starred_stickers"))).then(s,a)}),s),onDrop:this.wrap(a)},{debugString:"query,starred_stickers",metricName:"QUERY_STARRED_STICKERS"})}))}};t.default=n},82095:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("starred_stickers"!==t.tag(e))return;const s=t.attr("type",e);if("delete"!==s&&"add"!==s)return;const a=t.attr("filehash",e)||"";if("add"===s){const i={id:a,deprecatedMms3Url:t.attr("url",e)||"",directPath:t.attr("direct_path",e)||"",filehash:a,encFilehash:t.attr("enc_filehash",e),mediaKey:t.attr("media_key",e)||"",width:parseInt(t.attr("width",e)||"0",10),height:parseInt(t.attr("height",e)||"0",10),size:parseInt(t.attr("size",e)||"0",10),mimetype:t.attr("mimetype",e),index:0};return{filehash:a,type:s,sticker:i}}return{filehash:a,type:s}}},91223:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s;if("sticker"!==t.tag(e))return;const a=t.attr("filehash",e);if(!a)return __LOG__(4,void 0,new Error,!0)`filehash is missing in sticker from phone`,void SEND_LOGS("sticker-missing-filehash-from-phone");const i={id:a,deprecatedMms3Url:t.attr("url",e),directPath:t.attr("direct_path",e),mediaKey:t.attr("media_key",e),filehash:a,encFilehash:t.attr("enc_filehash",e),mimetype:t.attr("mimetype",e),width:parseInt(t.attr("width",e),10),height:parseInt(t.attr("height",e),10),size:parseInt(t.attr("size",e),10),weight:parseFloat(null!==(s=t.attr("weight",e))&&void 0!==s?s:1)};(!i.mimetype||Number.isNaN(i.width)||Number.isNaN(i.height)||Number.isNaN(i.size))&&__LOG__(3)`sticker:parse missing preferred fields: `;return i}},1233:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){__LOG__(2)`bin-recv: response,${s}`;const a=t.tag(e);if("response"!==a)throw new Error(`node tag for ${s} response is invalid: ${a}`);const r=t.attr("type",e)||"";if(r!==s)throw new Error(`node type for ${s} response is invalid: ${r}`);const o=parseInt(t.attr("code",e),10)||200;if(200!==o)throw new Error(`response status for ${s} is invalid: ${o}`);const l=t.attr("checksum",e)||"",d=parseInt(t.attr("total",e)||"0",10),u=t.children(e)||[];(0,i.default)(Array.isArray(u),"expects an Array of Stickers");const c=u.map((e=>(0,n.default)(e,t))).filter(Boolean);return{checksum:l,total:d,stickers:c}};var i=a(s(41143)),n=a(s(91223))},12142:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(12950)),r={queryStickerPacks:function(e=1,t=50){return new Promise(((s,a)=>{const i={type:n.default.isThirdPartyStickersEnabled()?"sticker_pack_v2":"sticker_pack",page:e.toString(),count:t.toString()},r=this.queryNode(i,void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const t={};if(__LOG__(2)`bin-recv: response,sticker_pack`,"response"===this.N.tag(e)&&"sticker_pack"===this.N.attr("type",e)){const s=parseInt(this.N.attr("code",e),10)||200;t.status=s,t.data=[],t.checksum=this.N.attr("checksum",e);const a=this.N.attr("count",e);t.count=null==a?null:parseInt(a,10);const i=this.N.children(e);if(Array.isArray(i))for(let e=0;e<i.length;e++){const s=this.parseStickerPack(i[e]);s&&t.data.push(s)}}s(t)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:"query,sticker_pack",metricName:"QUERY_STICKER_PACKS"})}))},queryStickersInStickerPack:function(e){return this.queryStickers({id:e})},queryStickers:function(e){return new Promise(((t,s)=>{const a=(0,i.default)({type:"sticker"},e),n=this.queryNode(a,void 0);this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const s={};if(__LOG__(2)`bin-recv: response,sticker`,"response"===this.N.tag(e)&&"sticker"===this.N.attr("type",e)){const t=parseInt(this.N.attr("code",e),10)||200;s.status=t,s.data=[];const a=this.N.children(e);if(Array.isArray(a))for(let e=0;e<a.length;e++){const t=this.parseSticker(a[e]);t&&s.data.push(t)}}t(s)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:`query,sticker,${e.id}`,metricName:"QUERY_STICKERS"})}))},parseSticker:function(e){if("sticker"!==this.N.tag(e))return;const t={url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e),width:parseInt(this.N.attr("width",e)||125,10),height:parseInt(this.N.attr("height",e)||125,10),size:parseInt(this.N.attr("size",e)||0,10)||null};return t.filehash?t:void 0},parseStickerPack:function(e){if("sticker_pack"!==this.N.tag(e))return;const t={id:this.N.attr("id",e),name:this.N.attr("name",e),url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e)};return t.id?t:void 0},parseStickerPackUpdate:function(e){if("sticker_pack"!==this.N.tag(e))return;const t=this.N.attr("type",e);return this.dropIfConditionMet([!t],{type:t})}};t.default=r},56206:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={queryVideoPlaybackUrl:function(e){return new Promise(((t,s)=>{const a=this.queryNode({type:"video",url:e},void 0);this.binSend("sendEphemeral",a,s,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{let s;if(__LOG__(2)`bin-recv: response,video_playback_url`,"response"===this.N.tag(e)&&"video"===this.N.attr("type",e)){const t=this.N.attr("url",e);t&&(s={url:t})}t(s)})).catch(s)}),t),onDrop:this.wrap(s)},{debugString:"query,video_playback_url",metricName:"QUERY_URL"})}))}};t.default=s},33763:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(18400),i=s(60934),n=s(34959),r={parseCall:function(e){if("call"!==this.N.tag(e))return;const t=this.N.child("offer",e);if(!t)return;const s=this.N.child("call",t);if(!s)return;const n=this.N.children(s),r=(0,a.decodeProtobuf)(i.MessageSpec,n).call;if(!r)return;const o=this.N.attr("from",e),l=this.N.attr("call-id",t),d=r.callKey;return this.dropIfConditionMet([!l,!o,!d],{type:"offer_key",id:l,peerJid:o,key:d})},queryCall:function(e,t){return new Promise(((s,a)=>{const i=this.queryNode({type:"call","call-id":e,kind:t});this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{const t={status:400};"response"===this.N.tag(e)&&"call"===this.N.attr("type",e)&&(t.status=parseInt(this.N.attr("code",e),10)||400),s(t)})).catch(a)}),s),onDrop:this.wrap(a)},{debugString:"query,call,"+e,metricName:"QUERY_CALL"})}))},handleCallQuery(){const e=s(15971).default.handleQuery({});if(e)return e.then((()=>this.responseNode(void 0,[["some",{formatted:"xml"},void 0]])))},sendCallEnd:function(e,t){return new Promise(((s,a)=>{const i={};i.jid=e.jid,i["call-id"]=e["call-id"],i.result=o(e.result),i.audio=e.audio.toString(),i.out=e.out.toString(),i.seconds=e.seconds.toString(),i.t=e.t.toString(),i.group=e.group.toString();const n=t.map((e=>["participant",{jid:e.jid,result:o(e.result)},void 0])),r=this.actionNode("relay",[["call_end",i,n]]);this.binSend("send",r,a,{onSend:this.wrap(s),onDrop:this.wrap(a)},{debugString:`action,call_end,${e["call-id"]}`})}))}};function o(e){return n.CALL_LOG_RESULT[e]||"invalid"}t.default=r},63106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={DEBUG_LOG:1,QUERY_RESUME:2,QUERY_RECEIPT:3,QUERY_MEDIA:4,QUERY_CHAT:5,QUERY_CONTACTS:6,QUERY_MESSAGES:7,PRESENCE:8,PRESENCE_SUBSCRIBE:9,GROUP:10,READ:11,CHAT:12,RECEIVED:13,PIC:14,STATUS:15,MESSAGE:16,QUERY_ACTIONS:17,BLOCK:18,QUERY_GROUP:19,QUERY_PREVIEW:20,QUERY_EMOJI:21,QUERY_MESSAGE_INFO:22,SPAM:23,QUERY_SEARCH:24,QUERY_IDENTITY:25,QUERY_URL:26,PROFILE:27,CONTACT:28,QUERY_VCARD:29,QUERY_STATUS:30,QUERY_STATUS_UPDATE:31,PRIVACY_STATUS:32,QUERY_LIVE_LOCATIONS:33,LIVE_LOCATION:34,QUERY_VNAME:35,QUERY_LABELS:36,CALL:37,QUERY_CALL:38,QUERY_QUICK_REPLIES:39,QUERY_CALL_OFFER:40,QUERY_RESPONSE:41,QUERY_STICKER_PACKS:42,QUERY_STICKERS:43,ADD_OR_REMOVE_LABELS:44,QUERY_NEXT_LABEL_COLOR:45,QUERY_LABEL_PALETTE:46,CREATE_OR_DELETE_LABELS:47,EDIT_LABELS:48,QUERY_RECENT_STICKERS:49,QUERY_NOTICE_STATE:50,QUERY_SETTINGS:51,SET_ARCHIVE_SETTING:51};t.default=s},62010:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCart=function(e,t,s,a){let l;i.default.supportsFeature(i.default.F.MD_BACKEND)?(l=(0,r.default)((0,o.createWid)(e),t,s,a),l||(l=Promise.reject(new Error("Should not reach here")))):l=n.default.refreshCart(e,t,s,a);return l},t.updateCart=function(e){let t=Promise.resolve();if(i.default.supportsFeature(i.default.F.MD_BACKEND))if(e.itemCount>0||e.message&&e.message.length>0){const s=function(e){const t=e.cartItemCollection.map((e=>({id:e.id,priceAmount1000:e.priceAmount1000,currency:e.currency,name:e.name,quantity:e.quantity,imageHash:e.imageHash})));return{id:e.id.toString(),message:e.message,total:e.total,currency:e.currency,itemCount:e.itemCount,products:t}}(e);t=(0,l.getCartTable)().createOrReplace(s)}else t=(0,l.getCartTable)().remove(e.id.toString());return t};var i=a(s(12950)),n=a(s(865)),r=a(s(28622)),o=s(89573),l=s(65335)},85099:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationArchive=function(e,t,s){let a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){{const s=(0,l.unixTimeMs)();a=d.default.getMutationsForArchive(s,t,e).then(function(){var s=(0,i.default)((function*(s){try{return yield(0,o.lockForMessageRangeSync)(["chat"],s,function(){var a=(0,i.default)((function*([a]){if(s[0].action!==h.Actions.Archive)throw new Error("syncd: expected archive action from getMutationsForArchive");return yield(0,u.addActiveMessageRange)(e.toString(),"archive",s[0].binarySyncAction),a.merge(e.toString(),function(e){const t={archive:e};e&&(t.pin=void 0);return t}(t))}));return function(){return a.apply(this,arguments)}}()),{status:200,_duplicate:null}}catch(e){if(e instanceof c.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when send conversation to archive"),new Error("update chat table failed")}}));return function(){return s.apply(this,arguments)}}())}a||(a=Promise.reject(new Error("Should not reach here")))}else a=r.default.sendConversationArchive(e,t,s);return a};var i=a(s(48926)),n=a(s(12950)),r=a(s(865)),o=s(98455),l=s(57148),d=a(s(38392)),u=s(50474),c=s(13540),h=s(97540)},56116:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eagerlyEstablishE2EESession=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND)){const t=(0,n.assertGetMe)();return(0,r.getFanOutList)([...e,t]).then((e=>{(0,o.ensureE2ESessions)(e)}))}return Promise.resolve()};var i=a(s(12950)),n=s(86723),r=s(65971),o=s(28535)},90127:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(){return h.apply(this,arguments)},t.getNumChatsPinned=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return u.default.getLocalPins().then((e=>e.length));return Promise.resolve(n.default.filter((e=>e.pin)).length)};var i=a(s(48926)),n=a(s(84758)),r=s(54647),o=a(s(12950)),l=a(s(865)),d=s(78487),u=a(s(57108)),c=a(s(35067));function h(){return(h=(0,i.default)((function*(e,t,s,a){let i;if(o.default.supportsFeature(o.default.F.MD_BACKEND)){{const s=0!==t,n=yield u.default.getMutationsForPin(a,s,e);s||c.default.addUnsetActionCount(1),i=(0,d.lockForSync)(["chat"],n,(([s])=>s.merge(e.toString(),{pin:t}))).then((()=>({status:200,_duplicate:null})))}i||(i=Promise.reject(new Error("Should not reach here")))}else i=l.default.sendConversationPin(e,t,s).then((e=>{if(200!==e.status)throw new r.ServerStatusCodeError(e.status);return e}));return i}))).apply(this,arguments)}},49262:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){{const s=e.toString();t=(0,o.getParticipantTable)().equals(["participants"],s).then((e=>e.map((e=>(0,l.createWid)(e.groupId)))))}t||(t=Promise.reject(new Error("Should not reach here")))}else t=r.default.commonGroupsFind(e).then((e=>{if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return e.groups}));return t};var i=s(54647),n=a(s(12950)),r=a(s(865)),o=s(65335),l=s(89573)},23796:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroupInviteCode=function(e){let t;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(t=(0,o.queryGroupInviteCode)(e).then((e=>e.code)),!t)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=r.default.groupInviteCode(e).then((e=>200===e.status?e.code:Promise.reject(new i.ServerStatusCodeError(e.status))));return t},t.sendRevokeGroupInviteCode=function(e){let t;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(t=(0,o.revokeGroupInviteCode)(e).then((e=>e.code)),!t)return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=r.default.revokeGroupInvite(e).then((e=>200===e.status?e.code:Promise.reject(new i.ServerStatusCodeError(e.status))));return t},t.sendJoinGroupViaInvite=function(e){let t;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(t=(0,o.joinGroupViaInvite)(e).then((e=>e.gid)),!t)return Promise.reject(new Error("joinGroupViaInvite: not supported when not build with MD_BACKEND"))}else t=r.default.acceptGroupInvite(e).then((e=>200===e.status?e.gid:Promise.reject(new i.ServerStatusCodeError(e.status))));return t};var i=s(54647),n=a(s(12950)),r=a(s(865)),o=s(40411)},19986:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetGroupSubject=function(e,t){let s;if(r.default.supportsFeature(r.default.F.MD_BACKEND)){if(s=(0,l.setGroupSubject)(e,t).then((()=>({_duplicate:null}))),!s)return Promise.reject(new Error("sendSetGroupSubject: not supported when not build with MD_BACKEND"))}else s=o.default.changeSubject(e,t).then((e=>200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return s},t.sendSetGroupDescription=function(e,t,s,a){let i;if(r.default.supportsFeature(r.default.F.MD_BACKEND)){if(i=(0,l.setGroupDescription)(e,t,s,a).then((()=>({_duplicate:!1}))),!i)return Promise.reject(new Error("sendSetGroupDescription: not supported when not build with MD_BACKEND"))}else i=o.default.setGroupDescription(e,t,s,a).then((e=>200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return i},t.sendSetGroupProperty=function(e,t,s){let a;if(r.default.supportsFeature(r.default.F.MD_BACKEND)){if(a=(0,l.setGroupProperty)(e,t,s).then((()=>({_duplicate:!1}))),!a)return Promise.reject(new Error("sendSetGroupProperty: not supported when not build with MD_BACKEND"))}else a=t===i.default.GROUP_SETTING_TYPE.EPHEMERAL?o.default.setGroupEphemeralDuration(e,s):o.default.setGroupProperty(e,t,Boolean(s)),a=a.then((e=>200!==e.status?Promise.reject(new n.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return a};var i=a(s(55454)),n=s(54647),r=a(s(12950)),o=a(s(865)),l=s(96570)},71353:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.default.supportsFeature(i.default.F.MD_BACKEND)?((0,r.default)(e,e.chat.id),Promise.resolve()):n.default.sendMessagePlayed(e.id).then((()=>{}))};var i=a(s(12950)),n=a(s(865)),r=a(s(30761))},71032:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,s,a){let r;i.default.supportsFeature(i.default.F.MD_BACKEND)?(r=(0,o.default)(e,t,s,a),r||(r=Promise.reject(new Error("md:queryOrder: should not reach here")))):r=n.default.queryOrder(e,t,s,a);return r},t.createOrder=function(e,t){let s;i.default.supportsFeature(i.default.F.MD_BACKEND)?(s=(0,r.default)(e,t),s||(s=Promise.reject(new Error("Should not reach here")))):s=n.default.createOrder(e.user,t);return s};var i=a(s(12950)),n=a(s(865)),r=a(s(1115)),o=a(s(30602))},86852:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCtwaContextData=function(e){const{phone:t,sourceUrl:s,context:a}=e;if(!t||!s||!a)return Promise.reject(new Error("Invalid params passed to fetchCtwaContextData"));let o;i.default.supportsFeature(i.default.F.MD_BACKEND)?(o=(0,r.default)(t,a,s),o||(o=Promise.reject(new Error("Should not reach fetchCtwaContextData MD")))):o=n.default.queryCtwaContext(t,a,s);return o};var i=a(s(12950)),n=a(s(865)),r=a(s(59313))},16460:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendUpgradeToMD=function(){return i.default.supportsFeature(i.default.F.MD_BACKEND)?Promise.reject(new Error("not supported for MD")):n.default.sendMdOptIn()};var i=a(s(12950)),n=a(s(865))},21457:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVDeviceStatusCode=t.AVDeviceStatusContext=t.AVDeviceType=void 0;t.AVDeviceType={AudioInput:0,AudioOutput:1,Video:2,NotIdentified:3};t.AVDeviceStatusContext={DeviceSetup:0,DeviceMidstream:1,DeviceSelection:2,DeviceStop:3,DeviceOther:4};t.AVDeviceStatusCode={DeviceSuccess:0,FailureNonDevice:1,VideoDeviceNotFound:2,VideoDeviceUnsupportedCapability:3,VideoDeviceUnusable:4,VideoDeviceInUse:5,VideoDeviceUnauthorized:6,VideoDeviceTimeout:7,VideoDeviceOther:127,AudioCaptureDeviceNotFound:128,AudioPlaybackDeviceNotFound:129,AudioDeviceNotFound:130,AudioCaptureDeviceUnusable:131,AudioPlaybackDeviceUnusable:132,AudioDeviceUnusable:133,AudioCaptureDeviceInUse:134,AudioPlaybackDeviceInUse:135,AudioDeviceInUse:136,AudioCaptureDeviceUnauthorized:137,AudioPlaybackDeviceUnauthorized:138,AudioDeviceUnauthorized:139,AudioCaptureDeviceTimeout:140,AudioPlaybackDeviceTimeout:141,AudioDeviceTimeout:142,AudioCaptureDeviceOther:253,AudioPlaybackDeviceOther:254,AudioDeviceOther:255}},10726:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(21457);function i(e){return{uid:e.uid,name:e.name,deviceType:Number(e.deviceType),isConnected:Boolean(e.connected),isSelected:Boolean(e.isSelected),isSystemDefault:Boolean(e.isDefault)}}function n(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSystemDefault&&e.deviceType===t))}function r(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSelected&&e.deviceType===t))}var o={parseDeviceInfo:i,getAvailableDevices:function(e,t){var s;return null!==(s=null==e?void 0:e.filter((e=>e.deviceType===t&&e.isConnected)))&&void 0!==s?s:[]},getSanitizedDevices:function(e){const t=null==e?void 0:e.map((e=>i(e))),s=null==t?void 0:t.filter((e=>e.deviceType!==a.AVDeviceType.NotIdentified&&e.isConnected));return null!=s?s:[]},deviceInfoComparator:function(e,t){return e.deviceType!==t.deviceType?e.deviceType-t.deviceType:e.isSystemDefault||t.isSystemDefault?e.isSystemDefault?-1:1:e.isConnected===t.isConnected?0:e.isConnected?-1:1},getSystemDefaultDevice:n,getSelectedDevice:r,getSelectedDeviceIdOrDefault:function(e,t){var s,a;return null!==(s=null===(a=r(e,t))||void 0===a?void 0:a.uid)&&void 0!==s?s:""},getSystemDefaultCamera:function(e){return n(e,a.AVDeviceType.Video)},getSystemDefaultMicrophone:function(e){return n(e,a.AVDeviceType.AudioInput)},getSystemDefaultSpeaker:function(e){return n(e,a.AVDeviceType.AudioOutput)},getDiff:function(e,t){return{added:t.filter((t=>!e.some((e=>e.uid===t.uid)))),removed:e.filter((e=>!t.some((t=>t.uid===e.uid))))}},DEFAULT_DEVICE_ID:""};t.default=o},92309:(e,t,s)=>{"use strict";var a=s(95318);t.y=function(e){e.setHandlers("msg_collection",{processMultipleMessages:({chatId:e,msgObjs:t,meta:s,chatMsgsCollection:a})=>r.default.processMultipleMessages(e,t,s,a),trigger({name:e,args:t}){r.default.trigger(e,t)},updateLastReceipt({wid:e,t}){r.default.updateLastReceipt(e,t)}}),e.setHandlers("contact_collection",{updatePushname({contactId:e,pushname:t}){const s=n.default.gadd(e);return s.pushname!==t&&(s.set({pushname:t}),!0)}}),e.setHandlers("chat_collection",{add:({things:e,options:t})=>i.default.add(e,t),trigger({name:e,args:t}){i.default.trigger(e,t)}}),e.setHandlers("status_v3_collection",{handleUpdate:({rawMsg:e,checksum:t,isMsgUpdate:s})=>l.default.handleUpdate(e,t,s)}),e.setHandlers("msg_info_collection",{updateInfo({id:e,from:t,to:s,ack:a,participant:i,t:n}){o.default.updateInfo(e,t,s,a,i,n)}})};var i=a(s(84758)),n=a(s(17025)),r=a(s(45472)),o=a(s(57636)),l=a(s(83125))},642:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.trim().normalize("NFKD");if((0,n.numCodepoints)(t)>=i.default.FTS_MIN_CHARS)return!0;if(r.test(t))return!0;if(o.test(t))return!0;return!1};var i=a(s(55454)),n=s(49002);const r=/(?!(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]))(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uFE0E\uFE0F]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/,o=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD81B[\uDFF0\uDFF1]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/},27546:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryName=function(){return l.apply(this,arguments)},t.getCountries=function(){return d.apply(this,arguments)};var i=a(s(48926)),n=a(s(55454)),r=a(s(2408));const o=["aa","af","ar","bn","bo","de","el","en","es","fil","fr","gu","ha","hi","hu","id","it","kn","ml","mr","ms","nl","pa","pcm","pl","pt-BR","pt","ru","sw","ta","te","th","tr","uk","ur","vi","zh-HK","zh-TW","vi"];function l(){return(l=(0,i.default)((function*(e){if(!e)return null;return(yield u(r.default.getLocale()))[e.toUpperCase()]}))).apply(this,arguments)}function d(){return(d=(0,i.default)((function*(){const e=yield u(r.default.getLocale());return Object.keys(e).filter((e=>!e.includes("@"))).map((t=>[t,e[t]]))}))).apply(this,arguments)}function u(){return c.apply(this,arguments)}function c(){return(c=(0,i.default)((function*(e){const t=o.includes(e)?e:n.default.L10N.DEFAULT;return(yield s(29127)(`./${t}.json`)).default}))).apply(this,arguments)}},2927:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(75571)),r=s(90672),o=a(s(79485));class l extends i.Component{constructor(e){super(e),this.refreshBlob=()=>{const e=this.blob;if(!e)throw new Error("Cannot call refreshBlob when the blob does not exist.");const t=new Blob([e],{type:e.type}),s=window.URL.createObjectURL(t);this.state.url&&window.URL.revokeObjectURL(this.state.url),this.setState({url:s})};const t=e.mediaData.filehash,s=n.default.has(t);!s&&e.mediaData.mediaStage===r.MEDIA_DATA_STAGE.RESOLVED&&e.downloadMedia&&e.downloadMedia();const a=s?this.createURL(t):null;this.state={url:a}}componentDidUpdate(){const e=this.props.mediaData.filehash;n.default.has(e)&&!this.state.url&&this.setState({url:this.createURL(e)})}componentWillUnmount(){this.state.url&&this.revokeURL(this.state.url)}createURL(e){const t=n.default.get(e);if(!t)throw new Error("Cannot call createURL when the blob does not exist.");this.blob=t;const s=new Blob([t],{type:t.type});return window.URL.createObjectURL(s)}revokeURL(e){window.URL.revokeObjectURL(e)}render(){return this.state.url?this.props.children(this.state.url):this.props.placeholderRenderer()}}l.CONCERNS={mediaData:["filehash","mediaStage"]},l.displayName="AnimatedStickerUrlProvider";const d=(0,o.default)(l,l.CONCERNS);t.default=class extends d{constructor(...e){super(...e),this.refreshBlob=()=>{this.getComponent().refreshBlob()}}}},67615:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(75571)),r=s(90672),o=a(s(79485));class l extends i.Component{constructor(e){super(e),this.state={blob:n.default.get(this.props.mediaData.filehash)},this.state.blob||e.mediaData.mediaStage!==r.MEDIA_DATA_STAGE.RESOLVED||e.downloadMedia()}componentDidUpdate(){if(this.state.blob)return;const{filehash:e}=this.props.mediaData;n.default.has(e)&&this.setState({blob:n.default.get(e)})}render(){const{blob:e}=this.state;return e?this.props.render(e):this.props.renderPlaceholder()}}l.CONCERNS={mediaData:["filehash","mediaStage"]},l.displayName="MediaBlobProvider";var d=(0,o.default)(l,l.CONCERNS);t.default=d},80747:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=s(68032),r=a(s(75571)),o=s(90672),l=a(s(73465)),d=a(s(79485)),u=s(85893);class c extends i.Component{constructor(...e){super(...e),this.state={}}static getDerivedStateFromProps(e,t){const{renderProgressively:s}=e,{filehash:a,progressiveStage:i}=e.mediaData,l=t.stackedUrls||[],d=null!=i?(0,n.getProgressiveMediaCacheKey)(a,i):null;if(null!=d&&s){if(!e.renderProgressively)return null;if(d!==t.progressiveKey&&e.mediaData.mediaStage!==o.MEDIA_DATA_STAGE.RESOLVED){if(!r.default.has(d))return __LOG__(4,void 0,new Error,!0)`Blob missing for trimmed-filehash: ${a.slice(0,10)} with progressive stage: ${i} and mediaStage: ${e.mediaData.mediaStage}`,SEND_LOGS("missing-progressive-blob"),null;t.url&&t.progressiveKey&&r.default.decreaseUsageCount(t.progressiveKey),r.default.increaseUsageCount(d);const s=r.default.getOrCreateURL(d);return{filehash:a,url:s,progressiveKey:d,stackedUrls:[...l,s]}}if(r.default.has(a)){const e=r.default.getOrCreateURL(a);return t.url===e?null:(r.default.increaseUsageCount(a),t.progressiveKey&&r.default.decreaseUsageCount(t.progressiveKey),{filehash:a,url:e,progressiveKey:d,stackedUrls:[...l,e]})}return null}if(a!==t.filehash){var u;if(null===(u=e.downloadMedia)||void 0===u||u.call(e),t.url&&t.filehash&&r.default.decreaseUsageCount(t.filehash),r.default.has(a)){const e=r.default.getOrCreateURL(a);return t.url===e?null:(r.default.increaseUsageCount(a),t.progressiveKey&&r.default.decreaseUsageCount(t.progressiveKey),{filehash:a,url:e,progressiveKey:d,stackedUrls:[...l,e]})}return{filehash:a}}if(r.default.has(a)){const e=r.default.getOrCreateURL(a);return t.url===e?null:(r.default.increaseUsageCount(a),t.progressiveKey&&r.default.decreaseUsageCount(t.progressiveKey),{filehash:a,url:e,progressiveKey:d,stackedUrls:[...l,e]})}return null}componentWillUnmount(){this.state.url&&(this.props.mediaData.mediaStage===o.MEDIA_DATA_STAGE.RESOLVED?r.default.decreaseUsageCount(this.state.filehash):this.state.progressiveKey&&r.default.decreaseUsageCount(this.state.progressiveKey))}render(){const{url:e,stackedUrls:t}=this.state,{renderProgressively:s}=this.props;return e?s?(0,u.jsxs)("div",{className:l.default.container,children:[(0,u.jsx)("div",{className:l.default.child,children:this.props.placeholderRenderer()}),t.map((e=>(0,u.jsx)("div",{className:l.default.child,children:this.props.children(e)},e)))]}):this.props.children(e):this.props.placeholderRenderer()}}c.CONCERNS={mediaData:["filehash","mediaStage","progressiveStage"]},c.displayName="MediaUrlProvider";var h=(0,d.default)(c,c.CONCERNS);t.default=h},79659:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CoolOffPeriodKeys=t.NuxKeyTypes=void 0;a(s(4231));t.NuxKeyTypes={COOL_OFF_NUX:{INCOMPLETE_BUSINESS_PROFILE_BANNER:"incomplete_business_profile_banner",PRODUCT_CATALOG_BANNER:"product_catalog_banner",COLLECTIONS:"collections_banner",CART_INTERSTITIAL:"cart_interstitial"},VIEW_COUNT_NUX:{REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",SAFARI_LIMITED_SUPPORT:"safari_limited_support",MESSENGER_ROOM_DIALOG_NEW:"messenger_room_dialog_new",MESSENGER_ROOM_DIALOG_RETURNING:"messenger_room_dialog_returning",MESSENGER_ROOM_DIALOG_FROM_CHATLIST:"messenger_room_dialog_from_chatlist",MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN:"messenger_room_dialog_from_attach_dropdown",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",ARCHIVE:"archive"}};t.CoolOffPeriodKeys={DEFAULT:"default_cool_off_banners_key",CATALOG:"catalog_banners_key"}},45009:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resetCoolOffNuxDate=function(){Object.keys(l.CoolOffPeriodKeys).forEach((e=>{d._setUser(l.CoolOffPeriodKeys[e])}))},t.shouldShowNUX=function(e,t){return new c(e,void 0,t).shouldShow()},t.resetNuxCoolOff=function(e){d._setUser(`${e}_cool_off`)},t.default=void 0;var n=i(s(81109)),r=i(s(30381)),o=i(s(4231)),l=s(79659),d=a(s(64028));const u={COOL_OFF_DURATION_IN_DAYS:4,VIEWS_BEFORE_COOL_OFF_IN_DAYS:2,CLICKS_BEFORE_COOL_OFF:1,MAX_DISMISSES:1,MAX_CLICKS:2,MAX_VIEWS_IN_DAYS:4,COOL_OFF_START_STORAGE_KEY:l.CoolOffPeriodKeys.DEFAULT};class c{constructor(e,t,s){this.key=`${e}_cool_off`,this.config=(0,n.default)((0,n.default)({},u),s),this.nux=this._getNUXOptions(),this.coolOffData=this._getCoolOffData(),this.metricField=t}_isValidNuxOptions(e){return null!=e.clicks&&null!=e.dismisses&&null!=e.lastViewedDay&&null!=e.viewDaysBeforeCoolOff&&null!=e.totalViewDays}_getNUXOptions(){let e=d._getUser(this.key);return null!=e&&this._isValidNuxOptions(e)||(this._setNUXOptions({viewDaysBeforeCoolOff:0,totalViewDays:0,clicks:0,dismisses:0,lastViewedDay:(0,r.default)(0)}),e=d._getUser(this.key)),e.lastViewedDay=(0,r.default)(e.lastViewedDay),e}_getCoolOffData(){let e=d._getUser(this.config.COOL_OFF_START_STORAGE_KEY);return null!=e&&null!=e.startDate&&null!=e.duration||(this._setLastCoolOffStartDay((0,r.default)(0)),e=d._getUser(this.config.COOL_OFF_START_STORAGE_KEY)),e.startDate=(0,r.default)(e.startDate),e}_setLastCoolOffStartDay(e){d._setUser(this.config.COOL_OFF_START_STORAGE_KEY,{startDate:e,duration:this.config.COOL_OFF_DURATION_IN_DAYS})}_startNewCoolOff(e){this._setLastCoolOffStartDay(e),this.coolOffData={startDate:e,duration:this.config.COOL_OFF_DURATION_IN_DAYS}}_setNUXOptions(e){d._setUser(this.key,e)}_updateNUXOptions(e){this._setNUXOptions(Object.assign(this.nux,e))}_isTodayCoolOff(){const e=(0,r.default)().diff(this.coolOffData.startDate,"days",!0);return e>=0&&e<this.coolOffData.duration}_logEvent(e){this.metricField&&new o.default.BannerEvent({bannerType:this.metricField,bannerOperation:e}).commit()}shouldShow(){const{totalViewDays:e,dismisses:t,clicks:s}=this.nux,{MAX_VIEWS_IN_DAYS:a,MAX_DISMISSES:i,MAX_CLICKS:n}=this.config;return e<a&&t<i&&s<n&&!this._isTodayCoolOff()}show(){let{lastViewedDay:e,viewDaysBeforeCoolOff:t,totalViewDays:s}=this.nux;const a=(0,r.default)();e.isSame(a,"day")||(t++,s++,t===this.config.VIEWS_BEFORE_COOL_OFF_IN_DAYS&&(t=0,this._startNewCoolOff((0,r.default)(a).add(1,"days"))),this._updateNUXOptions({viewDaysBeforeCoolOff:t,totalViewDays:s,lastViewedDay:a}),this._logEvent(o.default.BANNER_OPERATIONS.SHOWN))}click(){const e=this.nux.clicks+1;e===this.config.CLICKS_BEFORE_COOL_OFF&&this.startCoolOffToday(),this._updateNUXOptions({clicks:e}),this._logEvent(o.default.BANNER_OPERATIONS.CLICK)}dismiss(){this._updateNUXOptions({dismisses:this.nux.dismisses+1}),this._startNewCoolOff((0,r.default)()),this._logEvent(o.default.BANNER_OPERATIONS.DISMISS)}startCoolOffToday(){this._startNewCoolOff((0,r.default)())}}t.default=c},69787:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingSignalingMessage=function(e,t){const a=n.default.get(e.call_id);if(!a)return void __LOG__(3)`voip:voip_common_disabled: Received signaling msg type ${e.type} but could not find call for call ID`;switch(e.type){case r.TYPE.OFFER:null!=e.t&&(a.offerTime=e.t),a.isVideo=!!e.isVideoCall,a.setState(o.CALL_STATES.INCOMING_RING);break;case r.TYPE.TERMINATE:if(a.setState(o.CALL_STATES.ENDED),l.default.supportsFeature(l.default.F.MD_BACKEND)){switch(t.payload[1].reason){case"timeout":null==d&&(d=s(18124).Z),d.generateMissedCallLog(e.call_creator,a.offerTime,a.isVideo,!1)}}}};var n=i(s(15971)),r=a(s(24777)),o=s(34959),l=i(s(12950));let d=null},72120:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(38512),n=a(s(91952)),r=a(s(75940)),o=a(s(2408)),l=s(85893);function d(e,t){n.default.openModal((0,l.jsx)(r.default,{title:t,okText:o.default.t(2085),onOK:()=>n.default.closeModal(),children:(0,l.jsx)("div",{children:e})}))}var u={openModal:d,openUnblockModal:function(e){n.default.openModal((0,l.jsx)(r.default,{okText:o.default.t(1709),onOK:()=>{(0,i.unblockContact)(e).catch((()=>{})),n.default.closeModal()},cancelText:o.default.t(1912),onCancel:()=>{n.default.closeModal()},children:o.default.t(1868)}))},soundPortErrorModal:function(){d(o.default.t(1841),o.default.t(1842))},videoPortErrorModal:function(){const e=s(66386).default;n.default.openModal((0,l.jsx)(r.default,{title:o.default.t(1844),okText:o.default.t(1618),onOK:()=>{n.default.closeModal(),n.default.openModal((0,l.jsx)(e,{}))},cancelText:o.default.t(1912),onCancel:()=>{n.default.closeModal()},children:(0,l.jsx)("div",{children:o.default.t(1843)})}))}};t.default=u},18124:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);t.Z=void 0;var n=i(s(26654)),r=i(s(15971)),o=i(s(91952)),l=i(s(9322)),d=i(s(17025)),u=i(s(72414)),c=i(s(2408)),h=a(s(46364)),f=a(s(49201)),p=i(s(61057)),m=i(s(72120)),_=s(34959),g=i(s(98532)),v=s(89573),S=i(s(12950)),C=i(s(55454)),y=s(86723),E=i(s(77043)),b=s(25130),T=i(s(17754)),M=s(85893);function x(e){return{callId:e.call_id,peerJid:e.peer_jid,initialPeerJid:e.initial_peer_jid,creatorJid:e.creator_jid,callerStatus:Boolean(e.caller_status),callActiveTime:{sec:e.call_active_time.sec,msec:e.call_active_time.msec},callDuration:e.call_duration,audioDuration:e.audio_duration,videoDuration:e.video_duration,canInviteNewParticipant:p.default.isGroupCallEnabled()&&Boolean(e.can_invite_new_participant),canSwitchAudioVideo:Boolean(e.can_switch_audio_video),isGroupCall:Boolean(e.is_group_call),participantCount:e.participant_count,participants:e.participants.filter((e=>null!=e.jid)).map((e=>{const t=(0,v.createUserWid)(e.jid.user,e.jid.server);return{wid:t.toString(),userJid:t.toString({legacy:!0}),deviceRawJid:e.device_raw_jid,isMuted:Boolean(e.is_muted),isSelf:Boolean(e.is_self),isInterrupted:Boolean(e.is_interrupted),isBackgrounded:Boolean(e.is_backgrounded),orderId:e.order_id,videoOrientation:e.video_orientation,videoRenderStarted:Boolean(e.video_render_started),videoState:e.video_state,state:e.state}})),videoCaptureStarted:Boolean(e.video_capture_started),videoPreviewStarted:Boolean(e.video_preview_started),videoEnabled:Boolean(e.video_enabled),videoEnabledAtCallStart:Boolean(e.video_enabled_at_call_start),rotateVideo:Boolean(e.rotate_video)}}function I(e){return!r.default.activeCall&&!e.isContactBlocked&&h.default.displayInfo===h.StreamInfo.NORMAL}function P(e){if(e)return r.default.get(e)}var A={parseCallInfo:x,canStartCall:I,canStartVideoCall:function(e){return I(e)&&n.default.isVideoAvailable},isParticipantRequestingVideoUpgrade:function(e,t){const s=P(e);return!!(s&&s.callInfo&&s.callInfo.participants.length)&&!!s.callInfo.participants.find((e=>e.isSelf===t&&e.videoState===_.VideoState.VideoStateUpgradeRequest))},updateCallWithCallInfo:function(e){const t=e&&P(e.call_id);e&&t&&(t.callInfo=x(e))},callOfferNackToast:function(e,t,s,a){const i=t.map((e=>{const t=d.default.get(e);return t?t.shortName||t.name||t.displayName:(0,g.default)(e)})).join(c.default.t(815));let n=null;switch(e){case 401:n=c.default.t(1864);break;case 404:n=c.default.t(1867,{callee:i});break;case 405:n=c.default.t(1862,{callee:i});break;case 460:case 406:n=s?c.default.t(1869,{callee:i}):c.default.t(1866,{callee:i});break;case 426:n=s?c.default.t(1869,{callee:i}):c.default.t(1865,{callee:i});break;case 427:n=p.default.isGroupCallEnabled()?c.default.t(1849,{callee:i,_plural:t.length}):s?c.default.t(1885):c.default.t(1861);break;case 461:n=S.default.supportsFeature(S.default.F.MD_BACKEND)?a?c.default.t(1847):c.default.t(1863,{callee:i}):s?c.default.t(1885):c.default.t(1861);break;default:n=s?c.default.t(1885):c.default.t(1861)}n&&o.default.openToast((0,M.jsx)(f.default,{msg:n,id:(0,f.genId)()}))},getCallFromCallId:P,checkIfCanStartCall:function(e){var t;if(!e.isGroup&&!e.contact)return __LOG__(4,void 0,new Error)`voip:checkIfCanStartCall expected contact to be provided`,!1;let s=!0;if(h.default.displayInfo!==h.StreamInfo.NORMAL)switch(s=!1,h.default.displayInfo){case h.StreamInfo.RESUMING:case h.StreamInfo.TIMEOUT:m.default.openModal(c.default.t(1857),c.default.t(1858));break;case h.StreamInfo.OFFLINE:case h.StreamInfo.OPENING:case h.StreamInfo.CONNECTING:default:m.default.openModal(c.default.t(1855),c.default.t(1856))}else!e.isGroup&&(null===(t=e.contact)||void 0===t?void 0:t.isContactBlocked)?(s=!1,m.default.openUnblockModal(e.contact)):r.default.activeCall?(s=!1,m.default.openModal(c.default.t(1845))):n.default.isMicrophoneAvailable?n.default.isSpeakerAvailable?e.isVideo&&!n.default.isVideoAvailable&&(__LOG__(2)`voip:checkIfCanStartCall false due to camera not available`,s=!1,m.default.openModal(c.default.t(1851),c.default.t(1852))):(__LOG__(2)`voip:checkIfCanStartCall false due to speaker not available`,s=!1,m.default.openModal(c.default.t(1859),c.default.t(1860))):(__LOG__(2)`voip:checkIfCanStartCall false due to microphone not available`,s=!1,m.default.openModal(c.default.t(1853),c.default.t(1854)));return s},getGroupCallParticipantNameString:function(e,t){let s;return s=e.length<=2?e.map((e=>t?e.shortName:e.name)).join(c.default.t(815)):e[0].name+" "+c.default.t(813)+c.default.t(1850,{count:e.length-1,_plural:e.length-1}),s},generateMissedCallLog:function(e,t,s,a){const i=(0,v.toUserWid)(e);if(S.default.supportsFeature(S.default.F.MD_BACKEND)){let e;e=a?s?"miss_group_video":"miss_group":s?"miss_video":"miss";const n={id:new E.default({remote:i,fromMe:!1,id:(0,T.default)()}),type:C.default.MSG_TYPE.CALL_LOG,subtype:e,from:i,t:null!=t?t:Date.now()/1e3,to:(0,y.assertGetMe)()};(0,b.handleSingleMsgMD)(i,n)}},isVoiceCallEnabled:function(e,t){return!!l.default.isVoipInitialized&&((null==t||!(t.isUser&&!p.default.isVoiceCallEnabled()||t.isGroup&&!p.default.isGroupCallEnabled()))&&(null==e||!e.isEnterprise&&!(0,u.default)(e.id.user)))},isVideoCallEnabled:function(e){return!!l.default.isVoipInitialized&&(!!e&&(!e.isEnterprise&&!(0,u.default)(e.id.user)&&(e.isUser&&p.default.isVideoCallEnabled()||e.isGroup&&p.default.isGroupCallEnabled())))}};t.Z=A},69776:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);t.j=void 0;var n=i(s(84758)),r=i(s(91952)),o=i(s(55454)),l=i(s(17025)),d=i(s(90555)),u=i(s(95863)),c=s(86723),h=i(s(4231)),f=i(s(45472)),p=s(31170),m=i(s(98316)),_=a(s(46364));function g(){return Math.floor(window.performance.now())}class v extends u.default{constructor(){super(),this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},window.performance&&window.performance.now&&((0,c.knowsPhone)()?this.listenToOnce(r.default,"logout",this.init):this.init())}init(){this.timings.startSync=_.default.lastSyncStart,this.listenTo(_.default,"change:mode",this.changeStreamMode),this.listenTo(n.default,o.default.COLLECTION_HAS_SYNCED,this.onChatSync),this.listenTo(l.default,o.default.COLLECTION_HAS_SYNCED,this.onContactSync),this.listenTo(f.default,o.default.COLLECTION_HAS_SYNCED,this.onMsgSync),this.listenTo(f.default,"handle:msg_history",this.onMsgHistory)}changeStreamMode(){_.default.mode===_.StreamMode.SYNCING&&(this.timings.startSync=g(),this.data.webcPersistentLoginEnabled=(0,c.getRememberMe)()),_.default.mode===_.StreamMode.MAIN&&(this.timings.endSync=g(),this.maybeLogToWam())}onChatSync(e){null!=e.timing?this.data.webcSyncChatT=e.timing:this.timings.chatSync=g(),this.data.webcSyncChatCount=e.count,this.data.webcSyncChatSize=e.binarySize,this.maybeLogToWam()}onMsgSync(e){e&&(this.timings.msgSync=g(),this.data.webcSyncMessageCount+=e.count,this.data.webcSyncMessageSize+=e.binarySize),this.maybeLogToWam()}onContactSync(e){null!=e.timing?this.data.webcSyncContactT=e.timing:this.timings.contactSync=g(),this.data.webcSyncContactCount=e.count,this.data.webcSyncContactSize=e.binarySize,this.maybeLogToWam()}onMsgHistory(e){this.data.webcSyncMessageSize+=e.binarySize,this.data.webcSyncMessageCount+=e.count,null!=this.timings.msgSync&&(this.timings.msgSync=g())}maybeLogToWam(){const{contactSync:e,msgSync:t,chatSync:s}=this.timings,a=null!=s&&Number.isFinite(s||this.data.webcSyncChatT),i=null!=e&&Number.isFinite(e||this.data.webcSyncContactT),n=Number.isFinite(t);a&&i&&n&&(this._commitPromise||(this._commitPromise=(0,d.default)().then((e=>this._commitEvent(e))).catch((()=>{__LOG__(3)`wam:Error comitting login event`})).finally((()=>this.reset()))))}_commitEvent(e){const{startSync:t,endSync:s,contactSync:a,msgSync:i,chatSync:n}=this.timings,r=m.default.initialDisplayDate;if(null!=r&&0!==r&&null!=t&&null!=s&&null!=i&&null!=n&&null!=a&&Number.isFinite(r)&&Number.isFinite(t)&&Number.isFinite(s)){this.data.webcQrLoadT=r,this.data.webcQrCodes=m.default.get(),this.data.webcLoginT=t-r,this.data.webcSyncT=s-t,this.data.webcSyncMessageT=i-t,this.data.webcSyncChatT||(this.data.webcSyncChatT=n-t),this.data.webcSyncContactT||(this.data.webcSyncContactT=a-t),this.data.webcBrowserNetworkType=(0,p.getEffectiveNetworkType)(),e&&(this.data.webcBrowserStorageQuotaBytes=e.quota,this.data.webcBrowserStorageQuotaUsedBytes=e.usage);new h.default.WebcLogin(this.data).commit()}else __LOG__(3)`One or more of the login timings was not logged: `}reset(){this.stopListening(),this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this._commitPromise=void 0,this.listenToOnce(r.default,"logout",this.init)}}t.j=()=>new v},37026:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(78285);t.default=class{constructor(e){this.ship=e=>{const t=this.bitmap;if(!t)return;const s=Date.now();s>this.lastActiveInMS&&(this.bitmapLength=Math.min(64,Math.ceil(s/1e3-this.startTimeInSec)));const a={sessionId:this.sessionId,startTime:this.startTimeInSec,bitmap:t,bitmapLen:this.bitmapLength,sessionSeq:this.sequenceId,sessionCum:this.cumulativeBitsSet};(e||this.loggingCallback)(a),this.timer.cancel(),this.bitmap=null},this.loggingCallback=e,this.timer=new a.ShiftTimer(this.ship),this._initSession(),this._initArray(Math.floor(Date.now()/1e3))}_initSession(){this.cumulativeBitsSet=0,this.sequenceId=-1,this.sessionId=Math.floor(2147483648*Math.random()).toString(36)}_initArray(e){this.startTimeInSec=e,this.lastActiveInMS=1e3*this.startTimeInSec,this.bitmap=new Int32Array(2),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1;this.timer.debounceAndCap(64e3,64e3)}_doUpdate(e){const t=e-this.startTimeInSec;this.bitmap&&(t<0||t>=64)&&this.ship(),this.bitmap?(this.bitmap[t>>5]|=1<<(31&t),this.bitmapLength=t+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=1e3*e):this._initArray(e)}update(e){e>=this.lastActiveInMS&&e-this.lastActiveInMS<1e3||this._doUpdate(Math.floor(e/1e3))}shipAndEndSession(e){this.ship(e),this._initSession()}}},18732:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(55454)),r=a(s(39506)),o=a(s(71681)),l=a(s(4231)),d=a(s(60580)),u=a(s(37026));const c=[{source:window,name:"focus"},{source:document,name:"wheel"},{source:document,name:"keydown"},{source:document,name:"mouseover"},{source:document,name:"mousemove"},{source:document,name:"click"},{source:document,name:"scroll"}];class h extends i.Component{constructor(...e){super(...e),this.lastInform=Date.now(),this.lastPageX=-1,this.lastPageY=-1,this.bitArray=null,this.endSession=()=>{this.bitArray&&this.bitArray.shipAndEndSession()},this.handleRestore=()=>{const e=this.bitArray;e?(this.lastInform=Date.now(),e.update(this.lastInform)):__LOG__(3)`Time Spent Logger not started`},this.handleEvent=e=>{const t=this.bitArray;if(!t)return;if(e instanceof MouseEvent){if(e.pageX===this.lastPageX&&e.pageY===this.lastPageY&&"click"!==e.type)return;this.lastPageX=e.pageX,this.lastPageY=e.pageY}const s=Date.now(),a=s-this.lastInform;a>0?(this.lastInform=s,t.update(this.lastInform)):a<-5&&(this.lastInform=s)},this.handleUnload=()=>{this.bitArray&&(this.bitArray.ship(this.stashLogs),this.bitArray=null)},this.shipLogs=e=>{const t=new l.default.UserActivity({userActivitySessionId:e.sessionId,userActivityStartTime:e.startTime,userActivityBitmapLen:e.bitmapLen,userActivityBitmapLow:e.bitmap[0],userActivitySessionSeq:e.sessionSeq,userActivitySessionCum:e.sessionCum});e.bitmapLen>32&&(t.userActivityBitmapHigh=e.bitmap[1]),t.commit()},this.stashLogs=e=>{let t=`${e.bitmap[0]}`;for(let s=1;s<e.bitmap.length;++s)t+=`:${e.bitmap[s]}`;const s=`${e.sessionId}:${e.sessionSeq}:${e.sessionCum}:${e.startTime}:${e.bitmapLen}$${t}`;r.default.permanentStorage.setItem(n.default.KEY_TIME_SPENT_EVENT,s)}}componentDidMount(){const e=r.default.permanentStorage.getItem(n.default.KEY_TIME_SPENT_EVENT);e&&(this.parseAndShipStashed(e),r.default.permanentStorage.removeItem(n.default.KEY_TIME_SPENT_EVENT));const t=this.props.listeners;this.bitArray=new u.default(this.shipLogs);const s=!d.default||{passive:!0,capture:!0};t.add(window,"beforeunload",this.handleUnload);for(let e=0;e<c.length;++e){const{source:a,name:i}=c[e];t.add(a,i,this.handleEvent,s)}}componentWillUnmount(){this.bitArray&&(this.bitArray.ship(),this.bitArray=null)}parseAndShipStashed(e){let[t,s,...a]=e.split("$");if(a.length||!s)return void __LOG__(3)`Invalid stashed time spent event`;if(t=t.split(":"),5!==t.length)return void __LOG__(3)`Invalid stashed time spent event`;s=new Int32Array(s.split(":").map((e=>Number(e))));const i={sessionId:t[0],sessionSeq:Number(t[1]),sessionCum:Number(t[2]),startTime:Number(t[3]),bitmapLen:Number(t[4]),bitmap:s};this.shipLogs(i)}render(){return null}}h.displayName="TimeSpentLogger";var f=(0,o.default)(h);t.default=f},64923:e=>{e.exports={Action:"keyboard_action",Event:"keyboard_event",Events:{LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out",ARCHIVE:"archived",MUTE:"muted",PIN:"pinned",READ:"read",READ_ONLY:"read_only",CHAT_KIND:"chat_kind",ZOOM:"zoom",LAUNCH:"launch",BATCH_RENDER:"batch_render"}}},11426:(e,t,s)=>{"use strict";t.Z=function(e){s(69776).j(),s(25861).yj();{const e=s(35080).default,t=s(3165).default,a=s(32052).default,i=s(62615).default;e.supported&&t.on("change:tag",(e=>{const t=navigator.serviceWorker;t&&t.controller&&!e.tag&&i.request(t.controller,a.REMOVE_PP,e.id).catch((()=>{}))}))}(0,s(43600).default)((0,a.getEmojiTypeFromPlatform)(e));(0,s(36465).Z)();const t=s(35520);return{MainComponent:t.default,hasPending:t.hasPending,notificationBackend:s(66922),execApiCmd:s(57229).Z}};var a=s(18781)},14179:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IconSectionTheme=void 0;var i=a(s(94184)),n=a(s(89450)),r=a(s(2408)),o=a(s(40858)),l=a(s(2966)),d=s(85893);const u=s(54302)({SmallMargin:"small-margin",NoMargin:"no-margin",NoMarginSmallGutter:"no-margin-small-gutter"});t.IconSectionTheme=u;t.default=({icon:e,iconClass:t,content:s,onEdit:a,type:c="field",emptyText:h,hideEditIcon:f,theme:p,fieldName:m})=>{const _=a?(0,d.jsx)("div",{children:(0,d.jsx)(o.default,{name:"pencil",className:n.default.editPencil,directional:!0,onClick:a,"aria-label":r.default.t(10,{fieldName:m})})}):void 0,g=h&&!s,v=g?h:s,S=e?(0,d.jsx)(l.default,{name:e}):null;return(0,d.jsxs)("div",{className:(0,i.default)(n.default.section,{[n.default.smallMargin]:p===u.SmallMargin,[n.default.noMargin]:p===u.NoMargin,[n.default.noMarginSmallGutter]:p===u.NoMarginSmallGutter}),children:[(0,d.jsx)("div",{className:(0,i.default)(n.default.sectionPrimaryIcon,t,{[n.default.fieldPrimaryIcon]:"field"===c}),children:S}),(0,d.jsx)("div",{className:(0,i.default)(n.default.sectionMain,{[n.default.sectionContainerMain]:"container"===c,[n.default.sectionEmptyText]:g}),children:v}),_]})}},35832:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const a=(0,r.default)(e);switch(a.status){case r.AddToCartStatus.SUCCESS:!function(e,t){s=function(){var s=(0,n.default)((function*(){yield(0,u.default)(e.catalogWid.toString()),(0,d.logCartToastClick)(e.catalogWid.toString(),t)}));return function(){return s.apply(this,arguments)}}(),o.default.openToast((0,h.jsx)(c.default,{action:{actionText:l.default.t(1432),onAction:()=>{s()}},duration:6e3,id:(0,c.genId)(),msg:l.default.t(1458)}));var s}(e,t),(0,d.logAddProductToCart)(e,t,a.newCount,s);break;case r.AddToCartStatus.QUANTITY_LIMIT_REACHED:o.default.openToast((0,h.jsx)(c.default,{action:{onAction:()=>{},actionText:l.default.t(947),dismiss:!0,theme:"success"},duration:6e3,id:(0,c.genId)(),msg:l.default.t(488)}))}};var n=i(s(48926)),r=a(s(31935)),o=i(s(91952)),l=i(s(2408)),d=s(20232),u=i(s(64883)),c=a(s(49201)),h=s(85893)},27792:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t,onClick:s}=e,a={className:(0,n.default)(t,r.default.addToCartIcon),name:"add_shopping_cart",title:o.default.t(1457)};if(null!=s)return(0,u.jsx)(l.default,(0,i.default)((0,i.default)({},a),{},{"aria-label":o.default.t(1457),onClick:s}));return(0,u.jsx)(d.default,(0,i.default)({},a))};var i=a(s(81109)),n=a(s(94184)),r=a(s(83866)),o=a(s(2408)),l=a(s(40858)),d=a(s(2966)),u=s(85893)},20232:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logAddProductToCart=function(e,t,s,a){const n=(0,r.getProductStatsInFetched)(e.catalogWid.toString(),a,e)||void 0,o=u(e.catalogWid.toString(),"ACTION_CART_ADD_PRODUCT",(0,i.default)((0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)),{},{quantity:s,collectionStats:n}));o&&o.commit()},t.logEditProduct=function(e,t,s){const a=u(e.catalogWid.toString(),"ACTION_CART_EDIT_PRODUCT",(0,i.default)((0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)),{},{quantity:s}));a&&a.commit()},t.logDeleteProduct=function(e,t){const s=u(e.catalogWid.toString(),"ACTION_CART_DELETE_PRODUCT",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));s&&s.commit()},t.logCartAbandon=function(e,t){const s=u(e,"ACTION_CART_ABANDON",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));s&&s.commit()},t.getOnCartClickWithLog=function(e,t,s){return()=>{e(),function(e,t){const s=u(e,"ACTION_CART_ICON_CLICK",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));s&&s.commit()}(t,s)}},t.logCartToastClick=function(e,t){const s=u(e,"ACTION_CART_SNACKBAR_CLICK",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));s&&s.commit()},t.logCartListImpression=function(e,t){const s=u(e,"ACTION_CART_LIST_IMPRESSION",(0,i.default)({},(0,d.toDataForCatalogViewEvents)(t)));s&&s.commit()};var i=a(s(81109)),n=a(s(6479)),r=s(46215),o=s(86723),l=a(s(4231)),d=s(70790);function u(e,t,s){const a=e===(0,o.getMeUser)().toString(),{bizPlatform:r,collectionStats:d}=s,u=(0,n.default)(s,["bizPlatform","collectionStats"]);return a&&void 0!==l.default.CATALOG_BIZ_ACTION[t]?new l.default.CatalogBiz((0,i.default)({catalogBizAction:l.default.CATALOG_BIZ_ACTION[t],collectionIndex:null==d?void 0:d.collectionIndex,productIndex:null==d?void 0:d.productIndex},u)):a||void 0===l.default.CATALOG_VIEW_ACTION[t]?void __LOG__(3)`getCartLogAction: unsupported log action - ${t}`:new l.default.CatalogView((0,i.default)({catalogViewAction:l.default.CATALOG_VIEW_ACTION[t],bizPlatform:r,collectionIndex:null==d?void 0:d.collectionIndex,productIndex:null==d?void 0:d.productIndex},u))}},44966:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,i.useState)(0),[s,a]=(0,i.useState)(!1),C=()=>{const e=d.default.filter((e=>e.archive&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===c.default.MARKED_AS_UNREAD))).length;t(e)},y=()=>{if((0,p.isElevatedImportantMessageEnabled)()){const e=d.default.filter((e=>e.archive&&e.isGroup&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===c.default.MARKED_AS_UNREAD))).some((e=>{var t,s;const a=null!==(t=null===(s=e.groupMetadata)||void 0===s?void 0:s.unreadMentionMetadata.getUnreadMentionCount())&&void 0!==t?t:0,i=!e.archiveAtMentionViewedInDrawer;return a>0&&i}));a(e)}};(0,v.useListener)(d.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",C),(0,v.useListener)(d.default,"change:archive change:hasUnreadMention change:archiveAtMentionViewedInDrawer",y),(0,i.useEffect)((()=>{C(),(0,p.isElevatedImportantMessageEnabled)()&&y()}),[]);const E=0===e||s?null:(0,S.jsx)("div",{className:n.default.unreadCountWrapper,children:(0,S.jsx)(g.default,{count:e,transparentBg:!0})}),b=(0,S.jsx)(h.FlexRow,{align:"center",justify:"center",className:n.default.archivedIcon,children:(0,S.jsx)(_.default,{name:"archived"})}),T=s?(0,S.jsx)("div",{className:n.default.iconMentions,children:(0,S.jsx)(_.default,{name:"mentions",className:n.default.iconMentions})},"icon-mentions"):null,M=[f.default.t(254),s?f.default.t(54):""].join(" "),x=(0,S.jsxs)(S.Fragment,{children:[T,E]});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("button",{"data-tab":c.default.TAB_ORDERS.ARCHIVED_ENTRY_POINT,className:n.default.wrapper,onClick:()=>{new m.default.ChatFolderOpen({activityIndicatorCount:e,folderType:"Archive"}).commit(),u.default.openDrawerLeft((0,S.jsx)(r.default,{}))},"aria-label":M,children:(0,S.jsx)(l.default,{image:b,primary:f.default.t(254),detail:x,theme:"archive-panel"})}),(0,S.jsx)(o.default,{})]})};var i=s(67294),n=a(s(75089)),r=a(s(79563)),o=a(s(53407)),l=a(s(55092)),d=a(s(84758)),u=a(s(91952)),c=a(s(55454)),h=s(63290),f=a(s(2408)),p=s(21134),m=a(s(4231)),_=a(s(2966)),g=a(s(35690)),v=s(61192),S=s(85893)},85831:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(78285),r=s(67294),o=i(s(65615)),l=i(s(91952)),d=i(s(9322)),u=i(s(55454)),c=s(4919),h=s(57092),f=i(s(12950)),p=a(s(47683)),m=i(s(71681)),_=i(s(21791)),g=i(s(4231)),v=i(s(80959)),S=i(s(74937)),C=i(s(55066)),y=i(s(78884)),E=i(s(65565)),b=i(s(79485)),T=a(s(46364)),M=i(s(13038)),x=i(s(35371)),I=i(s(82669)),P=s(85893);class A extends r.PureComponent{constructor(e){var t;super(e),this._showBatteryTimer=new n.ShiftTimer((()=>this._batteryUpdate(!1))),this._onDismissLowBatteryWarning=()=>{const e=this.state.lowBatteryWarning;e>0&&this.setState({lowBatteryWarning:-e})},this._setShowButterBarTimer=new n.ShiftTimer((e=>{this.props.setShowButterBar&&this.props.setShowButterBar(e)})),this._showNotifyTimer=new n.ShiftTimer((e=>{this.setState({showNotify:e})})),this._onShowNotify=()=>{this._showNotifyTimer.onOrBefore(0,!1)},this._onShowNotifyDelay=()=>{this._showNotifyTimer.onOrBefore(u.default.NOTIFICATION_PROMPT_DELAY,!0),this._setShowButterBarTimer.onOrBefore(0,!0)},this._onRequestPermissions=()=>{l.default.openModal((0,P.jsx)(p.default,{messaging:p.Messaging.NOTIFICATIONS,onConfirm:O,onCancel:w,type:p.default.TYPE.GUIDE_ALLOW})),window.Notification.requestPermission((e=>{l.default.closeModal(),this.setState({notifyPermission:e})}))},this._shouldShowBanner=()=>f.default.supportsFeature(f.default.F.USER_NOTICE)&&S.default.shouldShowButterBar&&null!=S.default.noticeId&&null!=S.default.banner&&!1===S.default.blocking,this._handleNoticeBannerChange=()=>{if(this._shouldShowBanner()&&!this.state.bannerDisplayed){new g.default.UserNotice({userNoticeId:S.default.noticeId,userNoticeContentVersion:S.default.policyVersion,userNoticeEvent:g.default.USER_NOTICE_EVENT.BANNER_APPEAR}).commit(),this.setState({bannerDisplayed:!0})}},this.handleNoticeIdChange=()=>{this.setState({bannerDisplayed:!1})},this._onDismissNotice=()=>{S.default.dismissButterBarNotice()};const s=d.default.battery<u.default.BATTERY_LOW_THRESHOLD_1?d.default.battery<u.default.BATTERY_LOW_THRESHOLD_2?2:1:0;this.state={lowBatteryWarning:d.default.plugged?0:s,notifyPermission:null===(t=window.Notification)||void 0===t?void 0:t.permission,showNotify:!1,bannerDisplayed:!1};const a=()=>{this._batteryUpdate(!0)};e.listeners.add(d.default,"change:plugged",a),e.listeners.add(d.default,"change:battery",a),e.listeners.add(S.default,"change:noticeId",this.handleNoticeIdChange),e.listeners.add(S.default,"change:banner change:blocking",this._handleNoticeBannerChange)}componentWillUnmount(){this._showNotifyTimer.cancel(),this._showBatteryTimer.cancel(),this._setShowButterBarTimer.cancel()}_batteryUpdate(e){const t=this.state.lowBatteryWarning;d.default.plugged||d.default.battery>u.default.BATTERY_LOW_THRESHOLD_1?0!==t&&this.setState({lowBatteryWarning:0}):d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_2?-2!==t&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):2!==t&&this.setState({lowBatteryWarning:2})):t>-1&&d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_1&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):1!==t&&this.setState({lowBatteryWarning:1}))}_updateShowButterBarState(){this.props.setShowButterBar&&this.props.setShowButterBar(this.state.showNotify||this.state.bannerDisplayed)}componentDidMount(){this._updateShowButterBarState()}componentDidUpdate(){this._updateShowButterBarState()}render(){return f.default.supportsFeature(f.default.F.MD_BACKEND)&&(T.default.displayInfo===T.StreamInfo.RESUMING||T.default.displayInfo===T.StreamInfo.TIMEOUT||this.state.lowBatteryWarning>0)?null:(0,P.jsxs)(I.default,{transitionName:"butterbar",className:o.default.container,children:[null,(0,P.jsx)(C.default,{shouldShow:this._shouldShowBanner(),banner:S.default.banner,theme:this.context.theme,onDismissNotice:0===E.default.greenAlertBannerDuration?null:this._onDismissNotice}),(0,P.jsx)(y.default,{displayInfo:T.default.displayInfo,needsUpdate:T.default.needsUpdate,needsManualDownload:!1,lowBatteryWarning:this.state.lowBatteryWarning,showNotify:this.state.showNotify,isMuted:this.props.mute.isMuted,notifyPermission:this.state.notifyPermission,showAwarenessMsg:this.props.mdOptInDeadline.showAwarenessMsg,showCountDownMsg:this.props.mdOptInDeadline.showCountDownMsg,daysLeftTillDeadline:this.props.mdOptInDeadline.daysLeftTillDeadline,expirationTime:this.props.mdOptInDeadline.expirationTime,onShowNotify:this._onShowNotify,onShowNotifyDelay:this._onShowNotifyDelay,onRequestPermissions:this._onRequestPermissions,onDismissLowBatteryWarning:this._onDismissLowBatteryWarning})]})}}A.CONCERNS={stream:["displayInfo","needsUpdate"],notice:["noticeId","blocking","banner","shouldShowButterBar"],mute:["isMuted"],mdOptInDeadline:["showAwarenessMsg","showCountDownMsg","daysLeftTillDeadline","expirationTime"]},A.contextType=M.default,A.displayName="ButterBarClass";const N=(0,m.default)((0,b.default)(A,A.CONCERNS));function O(){l.default.closeModal()}function w(){switch(x.default.browser){case u.default.BROWSER_TYPE.CHROME:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)());case u.default.BROWSER_TYPE.FIREFOX:return(0,c.openExternalLink)((0,h.getNotificationFirefoxFaqUrl)());case u.default.BROWSER_TYPE.SAFARI:return(0,c.openExternalLink)((0,h.getNotificationSafariFaqUrl)());case u.default.BROWSER_TYPE.OPERA:return(0,c.openExternalLink)((0,h.getNotificationOperaFaqUrl)());case u.default.BROWSER_TYPE.EDGE:return(0,c.openExternalLink)((0,h.getNotificationEdgeFaqUrl)());default:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)())}}t.default=({setShowButterBar:e})=>(0,P.jsx)(N,{stream:T.default,notice:S.default,mute:v.default.globalMute(),mdOptInDeadline:_.default,setShowButterBar:e})},43420:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsxs)("span",{className:(0,i.default)({[n.default.block]:!e.inline}),children:[(0,o.jsx)("span",{className:n.default.actionText,onClick:e.action,children:e.children}),(0,o.jsx)(r.default,{className:n.default.chevron,directional:!0,name:"chevron-right-text"})]})};var i=a(s(94184)),n=a(s(87622)),r=a(s(2966)),o=s(85893)},62769:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{action:t=null,onDismiss:s,type:a}=e,p=(0,i.default)(n.default.butterbar,{[n.default.action]:t,[n.default.computer]:"computer"===a,[n.default.phone]:"phone"===a,[n.default.notification]:"notification"===a,[n.default.battery]:"battery"===a,[n.default.update]:"update"===a,[n.default.notice]:"notice"===a&&!r.default.isSMB,[n.default.noticeSmb]:"notice"===a&&r.default.isSMB,[n.default.fatal]:"fatal"===a,[n.default.nuxGreen]:"nuxGreen"===a,[n.default.nuxBlue]:"nuxBlue"===a,[n.default.mdOptInAwareness]:"mdOptInAwareness"===a,[n.default.mdOptInCountdown]:"mdOptInCountdown"===a}),m={computer:"alert-computer",phone:"alert-phone",notification:"alert-notification",battery:"alert-battery",update:"alert-update",notice:"alert-notice",fatal:"alert",nuxGreen:"business-description",nuxBlue:"collections_folder",mdOptInAwareness:"light"===(0,h.getTheme)()?"md-opt-in-green-light":"md-opt-in-green-dark",mdOptInCountdown:"light"===(0,h.getTheme)()?"md-opt-in-yellow-light":"md-opt-in-yellow-dark"},_=s?(0,f.jsx)("div",{className:n.default.controls,children:(0,f.jsx)(u.default,{className:n.default.controlsIcon,"aria-label":d.default.t(1923),name:"x",onClick:s})}):null,g=e.title?(0,f.jsx)("div",{className:n.default.title,children:e.title}):null,v=(0,f.jsx)(c.default,{name:m[e.type],"aria-label":e.iconDescription}),S=e.iconSvg&&(0,o.sanitizeNoticeSVG)(e.iconSvg),C=S?(0,f.jsx)("span",{"aria-label":e.iconDescription,dangerouslySetInnerHTML:{__html:S}}):v;let y;switch(e.type){case"notice":y=(0,f.jsx)(l.FlexRow,{className:n.default.noticeSvgWrapper,align:"center",justify:"center",children:C});break;case"fatal":y=(0,f.jsx)(l.FlexRow,{className:n.default.fatalSvgWrapper,align:"center",justify:"center",children:(0,f.jsx)(c.default,{name:m[e.type]})});break;case"nuxGreen":y=(0,f.jsx)(l.FlexRow,{className:n.default.nuxGreenSvgWrapper,align:"center",justify:"center",children:(0,f.jsx)(c.default,{name:m[e.type]})});break;case"nuxBlue":y=(0,f.jsx)(l.FlexRow,{className:n.default.nuxBlueSvgWrapper,align:"center",justify:"center",children:(0,f.jsx)(c.default,{name:m[e.type]})});break;case"mdOptInAwareness":y=(0,f.jsx)(c.default,{name:"light"===(0,h.getTheme)()?"md-opt-in-green-light":"md-opt-in-green-dark"});break;case"mdOptInCountdown":y=(0,f.jsx)(c.default,{name:"light"===(0,h.getTheme)()?"md-opt-in-yellow-light":"md-opt-in-yellow-dark"});break;default:y=(0,f.jsx)(c.default,{name:m[e.type]})}return(0,f.jsx)("div",{className:n.default.wrapper,children:(0,f.jsxs)("div",{className:p,onClick:t,children:[(0,f.jsx)("div",{className:n.default.icon,children:y}),(0,f.jsxs)("div",{className:n.default.body,children:[g,e.text?"notice"===e.type?(0,f.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,o.sanitizeNoticeText)(e.text)},className:n.default.text}):(0,f.jsx)("div",{className:n.default.text,children:e.text}):null]}),_]})})};var i=a(s(94184)),n=a(s(48651)),r=a(s(9322)),o=s(73554),l=s(63290),d=a(s(2408)),u=a(s(40858)),c=a(s(2966)),h=s(13038),f=s(85893)},55066:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({shouldShow:e,banner:t,theme:s,onDismissNotice:a}){if(!e)return null;if(!(null==t?void 0:t.text))return null;const{iconDescription:r,text:o,iconSvg:l}=t;let d;l&&(d="light"===s?l.light:l.dark);return(0,n.jsx)(i.default,{type:"notice",text:o,iconSvg:d,iconDescription:null!=r?r:"",onDismiss:a},"noticebbar")};var i=a(s(62769)),n=s(85893)},13547:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(78285),n=s(67294),r=a(s(43420)),o=a(s(62769)),l=a(s(2408)),d=a(s(72787)),u=s(85893);class c extends n.PureComponent{constructor(...e){super(...e),this.state={allowReconnect:!0},this.reconnect=()=>{d.default.poke(),this.setState({allowReconnect:!1}),this._reconnectTimeoutTimer.onOrAfter(3e3)},this._reconnectTimeoutTimer=new i.ShiftTimer((()=>{this.setState({allowReconnect:!0})}))}componentWillUnmount(){this._reconnectTimeoutTimer.cancel()}render(){let e,t;return this.state.allowReconnect?(e=(0,u.jsxs)(u.Fragment,{children:[`${l.default.t(1158)} `,(0,u.jsx)(r.default,{action:this.reconnect,children:l.default.t(1515)})]}),t=l.default.t(688)):(e=null,t=l.default.t(710)),(0,u.jsx)(o.default,{type:"computer",title:t,text:e})}}t.default=c,c.displayName="Offline"},78884:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({displayInfo:e,needsUpdate:t,needsManualDownload:s,lowBatteryWarning:a,showNotify:l,isMuted:d,notifyPermission:_,showAwarenessMsg:g,showCountDownMsg:E,daysLeftTillDeadline:b,expirationTime:T,onShowNotify:M,onShowNotifyDelay:x,onRequestPermissions:I,onDismissLowBatteryWarning:P}){let A=null;switch(e){case p.StreamInfo.OFFLINE:A=(0,v.jsx)(h.default,{},"bbar");break;case p.StreamInfo.OPENING:case p.StreamInfo.CONNECTING:A=(0,v.jsx)(f.default,{},"bbar");break;case p.StreamInfo.NORMAL:break;case p.StreamInfo.RESUMING:case p.StreamInfo.TIMEOUT:const e=(0,v.jsxs)(v.Fragment,{children:[u.default.t(1159),(0,v.jsx)(i.default,{action:C,children:u.default.t(1103)})]});A=(0,v.jsx)(n.default,{type:"phone",title:u.default.t(1447),text:e},"bbar")}!A&&a>0&&(A=(0,v.jsx)(n.default,{type:"battery",title:u.default.t(1443),text:u.default.t(582),dismissable:!0,onDismiss:P},"bbar"));if(g||E){let e,t,s;g?(e="mdOptInAwareness",t=u.default.t(1170),s=(0,v.jsxs)(v.Fragment,{children:[u.default.t(1168),(0,v.jsx)("div",{className:r.default.mdOptInLink,children:(0,v.jsx)(i.default,{action:y,children:u.default.t(1445)})})]})):(e="mdOptInCountdown",t=u.default.t(1174),(0,m.isNumber)(b)&&b>0?s=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.default,{id:1172,params:{num_days:b.toString()},plural:b}),(0,v.jsx)("div",{className:r.default.mdOptInLink,children:(0,v.jsx)(i.default,{action:y,children:u.default.t(1445)})})]}):T&&(s=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.default,{id:1176,params:{time:T}}),(0,v.jsx)("div",{className:r.default.mdOptInLink,children:(0,v.jsx)(i.default,{action:y,children:u.default.t(1445)})})]}))),A=(0,v.jsx)(n.default,{type:e,title:t,text:s},"bbar")}if(!A&&t){const e=(0,v.jsx)(i.default,{children:u.default.t(603)});A=(0,v.jsx)(n.default,{type:"update",title:u.default.t(1737),text:e,action:S},"bbar")}if(null==A&&window.Notification&&_===o.default.PERMISSION_DEFAULT&&!d)if(l){const e=(0,v.jsx)(i.default,{children:u.default.t(812)});A=(0,v.jsx)(n.default,{type:"notification",title:u.default.t(924),text:e,action:I},"bbar")}else x();else l&&M();return A};var i=a(s(43420)),n=a(s(62769)),r=a(s(48651)),o=a(s(55454)),l=s(4919),d=s(57092),u=a(s(2408)),c=a(s(663)),h=a(s(13547)),f=a(s(33267)),p=s(46364),m=s(74289),_=a(s(66810)),g=s(12208),v=s(85893);function S(){_.default.restart()}function C(){(0,l.openExternalLink)((0,d.getCannotConnectFaqUrl)())}function y(){(0,g.upgradeToMD)(!0)}},33267:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(78285),r=i(s(30381)),o=s(67294),l=i(s(43420)),d=i(s(62769)),u=i(s(2408)),c=i(s(71681)),h=a(s(46364)),f=i(s(72787)),p=s(85893);class m extends o.Component{constructor(...e){super(...e),this.state={takingTooLong:!1,didShowSubtitle:!1},this._timeoutTimer=new n.ShiftTimer((()=>{this.setState({takingTooLong:!0,didShowSubtitle:!0})})),this.handleProgress=()=>{this._rerenderTimer.cancel(),this._timeoutTimer.onOrBefore(3e3),this.setState({takingTooLong:!1})},this._rerenderTimer=new n.ShiftTimer((()=>{this.forceUpdate()})),this.retry=()=>{f.default.poke(),this.handleProgress()}}componentDidMount(){this.props.listeners.add(f.default,"change:state",this.handleProgress),this.props.listeners.add(f.default,"change:retryTimestamp",this.handleProgress),this._timeoutTimer.onOrBefore(3e3)}componentWillUnmount(){this._timeoutTimer.cancel(),this._rerenderTimer.cancel()}render(){let e,t;if(h.default.displayInfo===h.StreamInfo.OPENING)e=u.default.t(709);else{if(h.default.displayInfo!==h.StreamInfo.CONNECTING)return null;e=u.default.t(710)}if(this.state.takingTooLong){this._rerenderTimer.onOrAfter(1e3);let e=f.default.retryTimestamp-Date.now();if(isNaN(e)||e<1)e=u.default.t(1556),setTimeout((()=>{f.default.poke()}),0);else if(e<6e4){const t=Math.ceil(e/1e3);e=u.default.t(1558,{number:t,_plural:t})}else e=u.default.t(1557,{duration:r.default.duration(e).humanize()});t=(0,p.jsxs)(p.Fragment,{children:[e," ",(0,p.jsx)(l.default,{action:this.retry,children:u.default.t(1554)})]})}else t=this.state.didShowSubtitle?(0,p.jsx)("span",{children:u.default.t(1556)}):null;return(0,p.jsx)(d.default,{type:"computer",title:e,text:t})}}m.displayName="ResumeClass";var _=(0,c.default)(m);t.default=_},91749:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(7900)),r=s(67294),o=a(s(76610)),l=a(s(64659)),d=a(s(55092)),u=s(73294),c=a(s(85051)),h=a(s(40854)),f=a(s(47193)),p=s(49895),m=a(s(85911)),_=a(s(42229)),g=a(s(2408)),v=a(s(46714)),S=a(s(2966)),C=a(s(82669)),y=s(85893);class E extends r.PureComponent{constructor(...e){super(...e),this.state={hover:!1,contextMenu:!1,forceContextMenu:!1},this._setRefContextMenu=e=>{this._refContextMenu=e},this._setRefCellFrameDiv=e=>{this._refCellFrameDiv=e},this.getCellFrameDivRef=()=>this._refCellFrameDiv,this.indicateFocus=()=>{h.default.maybeIndicateFocus(this._refCellFrameDiv,l.default.focusAnimation)},this._handleMenuMouseDown=e=>{e.stopPropagation()},this._handleMenuClick=e=>{e.stopPropagation();const{contextEnabled:t,onContext:s}=this.props,{contextMenu:a}=this.state;(t()||a)&&(e.preventDefault(),s&&s({anchor:e.target}))},this._handleKeyboardActivation=e=>{if((0,m.default)(e)){e.stopPropagation();const{contextEnabled:t,onContext:s}=this.props,{contextMenu:a}=this.state;if(!t()&&!a)return;s&&s({anchor:this._refContextMenu})}},this.getContextMenuRef=()=>this._refContextMenu,this.onContextMenu=e=>{const{contextEnabled:t,onContext:s}=this.props;t()&&(e.stopPropagation(),e.preventDefault(),s&&s({event:e}))},this.openContextMenu=()=>{this.props.contextEnabled()&&this.setState({contextMenu:!0},(()=>{if(!this._refContextMenu)throw new Error("Context ref not set");const e=new MouseEvent("mousedown",{bubbles:!0});(0,n.default)(this._refContextMenu,"this._refContextMenu").dispatchEvent(e)}))},this.focusOnContextMenuButton=()=>{(this._refContextMenu||this.props.contextEnabled())&&f.default.focus(this._refContextMenu)},this.mouseOver=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this._onFocusContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.removeAttribute("aria-hidden")},this._onBlurContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.setAttribute("aria-hidden","true")}}static getDerivedStateFromProps(e,t){return t.forceContextMenu&&t.contextMenu&&!e.contextMenu?{contextMenu:!1,forceContextMenu:e.contextMenu}:{forceContextMenu:e.contextMenu}}isKeyboardUser(){return this.context}render(){const e=this.state.contextMenu,t=this.isKeyboardUser()&&this.props.active&&this.props.contextEnabled(),s=e||this.state.hover||t,a=(0,i.default)(this.props.className,{hover:s}),n="string"==typeof this.props.primary?(0,y.jsx)(c.default,{text:this.props.primary,direction:"auto",formatters:p.Configuration.Search({terms:this.props.searchText?[this.props.searchText]:[]}),titlify:!0,ellipsify:!0}):this.props.primary;let h=null,f=null;if(null!=this.props.pendingAction&&this.props.pendingAction>0)f=(0,y.jsx)("div",{className:l.default.btnContext,children:(0,y.jsx)(v.default,{size:18,stroke:6,color:"highlight"})});else if(s||this.props.active){var m;const e=(0,i.default)(l.default.btnContext,{[l.default.product]:"product"===this.props.theme}),t="new-chat-info"===this.props.theme;h=(0,y.jsx)("button",{"data-a8n":o.default.key("context-btn"),className:e,ref:this._setRefContextMenu,onMouseDown:this._handleMenuMouseDown,onClick:this._handleMenuClick,"aria-label":null!==(m=this.props.contextMenuAriaLabel)&&void 0!==m?m:g.default.t(9),onKeyDown:this._handleKeyboardActivation,onFocus:this._onFocusContextMenuButton,onBlur:this._onBlurContextMenuButton,"aria-hidden":!0,tabIndex:this.props.contextMenuControlled?-1:0,children:(0,y.jsx)(S.default,{name:"down",xstyle:t&&u.chatInfoStyles.iconColor})},"icon-context")}const _=(0,y.jsx)(C.default,{transitionName:"fade",children:f}),E=(0,y.jsx)(C.default,{transitionName:"pop-fast-chat",children:s?h:null});let b,T;return null!=this.props.secondary?(b=this.props.primaryDetail,T=[(0,y.jsx)(r.Fragment,{children:this.props.secondaryDetail},"prop"),(0,y.jsx)(r.Fragment,{children:_},"spinner"),(0,y.jsx)(r.Fragment,{children:E},"button")]):b=[(0,y.jsx)(r.Fragment,{children:this.props.primaryDetail},"prop"),(0,y.jsx)(r.Fragment,{children:_},"spinner"),(0,y.jsx)(r.Fragment,{children:E},"button")],(0,y.jsx)(d.default,{a8n:this.props.a8n,setDivRef:this._setRefCellFrameDiv,image:this.props.image,customImage:this.props.customImage,className:a,unread:this.props.unread,active:this.props.active,idle:this.props.idle,checkbox:this.props.checkbox,isMuted:this.props.isMuted,dragging:this.props.dragging,theme:this.props.theme,primary:n,primaryDetail:b,secondary:this.props.secondary,secondaryDetail:T,detail:this.props.detail,onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onContextMenu:this.props.contextEnabled()?this.onContextMenu:null,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null})}}t.default=E,E.contextType=_.default,E.displayName="Cell"},75381:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Mode=void 0;var n=i(s(48926)),r=s(55084),o=s(67294),l=s(80423),d=i(s(67873)),u=i(s(91749)),c=i(s(58380)),h=i(s(97776)),f=i(s(91952)),p=i(s(75940)),m=a(s(9322)),_=i(s(55454)),g=s(70521),v=i(s(84286)),S=i(s(47904)),C=i(s(88419)),y=s(73554),E=i(s(47452)),b=s(54647),T=s(54432),M=a(s(13540)),x=i(s(40854)),I=i(s(47193)),P=i(s(12950)),A=s(78615),N=i(s(75798)),O=i(s(96889)),w=i(s(39e3)),D=i(s(57153)),j=s(27241),R=s(31140),L=i(s(2408)),k=s(21134),F=i(s(71681)),B=i(s(22555)),G=i(s(62309)),U=i(s(4231)),V=i(s(78746)),H=i(s(78972)),W=i(s(82621)),Y=s(90127),K=i(s(51158)),q=s(77593),z=i(s(87947)),$=i(s(79485)),Q=s(15298),X=i(s(69217)),Z=i(s(71286)),J=i(s(63477)),ee=i(s(68062)),te=i(s(30584)),se=i(s(69635)),ae=s(85893);const ie={LAST:"LAST",INFO:"INFO"};t.Mode=ie;class ne extends o.PureComponent{static getDerivedStateFromProps(e,t){const s={};let a=e.active&&e.active.value instanceof c.default&&se.default.equals(e.active.value.id,e.chat.id);e.active&&e.active.value instanceof se.default&&se.default.isGroup(e.active.value)&&(a=se.default.equals(e.active.value,e.chat.id)),t.active!==a&&(s.active=a);const i=e.searchQuery?e.searchQuery.trimmed:"";t.searchText!==i&&(s.searchText=i);const n=e.chat.id;return t.chatId!==n&&(s.chatId=n,s.unreadCount=e.chat.optimisticUnreadCount),s}constructor(e){var t;super(e),t=this,this._hoverCounter=0,this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,dragging:!1,searchText:"",contextMenu:null,chatId:null,unreadCount:0,showUnreadMentonIcon:!1},this._setUnreadCount=()=>{const e=this.props.chat.optimisticUnreadCount;e!==this.state.unreadCount&&this.setState({unreadCount:e})},this._prefetchGroupMetadata=()=>{const{chat:e}=this.props;P.default.supportsFeature(P.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&N.default.find(e.id).catch((0,r.filteredCatch)([b.WebdDrop,M.ProtoVersionUndefined],(()=>{})))},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)`Chat: prop searchQuery is undefined`},this.onActiveChange=(e,t)=>{if("focus"===e){const e=this._hotKeysRef;e&&(I.default.focus(e),t&&(0,y.scrollIntoViewIfNeeded)(e))}this.setState({active:!!e})},this.contextEnabled=()=>{const{noContext:e}=this.props;return!e},this.editLabel=()=>{const{selectableState:e,multiSelection:t}=this.props;!this.props.searchQuery||this.props.searchQuery.isEmptyQuery?e&&t&&(e.setSelectable(!0),t.setVal((0,Q.unproxy)(this.props.chat))):this.addOrRemoveLabelOnSelected()},this.addOrRemoveLabelOnSelected=()=>{const e=[(0,Q.unproxy)(this.props.chat)];f.default.openModal((0,ae.jsx)(B.default,{modelsToUpdate:e}))},this.onMenu=e=>{if(this.state.contextMenu)return void this.setState({contextMenu:null});const t=this.props.chat,s=[];t.canArchive()&&s.push((0,ae.jsx)(d.default,{onArchive:this.onArchive,chat:(0,Q.unproxy)(t)},"archive")),t.mute.canMute()&&(t.archive&&this.props.hideMuteOption||s.push((0,ae.jsx)(V.default,{onMute:this.onMute,mute:t.mute,chat:t,settings:z.default},"mute"))),s.push((0,ae.jsx)(S.default,{onDeleteOrExit:this.onDeleteOrExit,chat:(0,Q.unproxy)(t)},"delete")),m.default.platform===m.PLATFORMS.IPHONE&&t.isBroadcast||!t.canPin()||s.push((0,ae.jsx)(K.default,{onPinOrUnpin:this._onPinOrUnpin,chat:t},"pin")),(0,A.canEditLabelAssociation)()&&s.push((0,ae.jsx)(E.default,{a8n:"mi-edit-label",action:this.editLabel,children:L.default.t(801)},"EditLabel")),t.canUnread&&s.push((0,ae.jsx)(G.default,{onMarkUnread:this.onMarkUnread,chat:(0,Q.unproxy)(t)},"mark_unread")),this.setState({contextMenu:{menu:s,event:e.event,anchor:e.anchor}})},this._removeContext=()=>{this.setState({contextMenu:null})},this.onMute=e=>{f.default.muteChat((0,Q.unproxy)(this.props.chat),e)},this.onArchive=e=>{f.default.archiveChat((0,Q.unproxy)(this.props.chat),e)},this.onDeleteOrExit=()=>{f.default.deleteOrExitChat((0,Q.unproxy)(this.props.chat),this)},this._onPinOrUnpin=function(){var e=(0,n.default)((function*(e){!e||(yield(0,Y.getNumChatsPinned)())<3?f.default.pinChat((0,Q.unproxy)(t.props.chat),e):f.default.openModal((0,ae.jsx)(p.default,{onOK:()=>f.default.closeModal(),okText:L.default.t(2085),children:L.default.t(102)}))}));return function(){return e.apply(this,arguments)}}(),this.onMarkUnread=e=>{f.default.markChatUnread((0,Q.unproxy)(this.props.chat),e),e||this._clearUnreadMentions()},this.onClick=e=>{const{onClick:t,chat:s}=this.props;t&&t(e,(0,Q.unproxy)(s))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),x.default.shouldIndicateFocus(),this.onClick(e)},this.onDragEnter=e=>{if(!this.props.chat.canSend)return;new v.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(0===this._hoverCounter&&this.setState({dragging:!0}),this._hoverCounter+=1)},this.onDragLeave=e=>{if(!this.props.chat.canSend)return;new v.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(this._hoverCounter-=1,0===this._hoverCounter&&this.setState({dragging:!1}))},this.onDrop=e=>{const{chat:t}=this.props;if(!t.canSend)return;this.setState({dragging:!1});const s=new v.default(e.dataTransfer);(s.hasType(_.default.DRAG_TYPE_FILE)||s.hasType("text/uri-list")||s.hasType("text/html"))&&(0,T.getFiles)(e).then((e=>{f.default.openChatFromUnread(t).then((s=>{s&&f.default.attachMediaDrawer({chat:t,attachments:e.map((e=>({file:e}))),fileOrigin:U.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY})}))})).catch((0,r.filteredCatch)(M.MediaDragDropError,(e=>{f.default.openChatFromUnread(t).then((s=>{s&&e.src&&f.default.pasteChatTextInput(t,e.src)}))})))},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()},this._toggleFocusInContact=()=>{this._hotKeysRef&&this._hotKeysRef!==document.activeElement?I.default.focus(this._hotKeysRef):this._cellRef&&this._cellRef.focusOnContextMenuButton()},this._handlers={enter:this.onKeyboardActivation,space:this.onKeyboardActivation,right:this._toggleFocusInContact,left:this._toggleFocusInContact},this._throttledSetUnreadCount=this.props.throttle(this._setUnreadCount,0,{leading:!1,tailing:!0})}componentDidMount(){const{chat:e}=this.props;this.initListeners(this.props),P.default.supportsFeature(P.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&j.UIBusyTasks.enqueue(this._prefetchGroupMetadata)}componentDidUpdate(e){const{chat:t}=this.props;t!==e.chat&&P.default.supportsFeature(P.default.F.GROUPS_V_3)&&t.isGroup&&t.groupMetadata&&t.groupMetadata.stale&&j.UIBusyTasks.enqueue(this._prefetchGroupMetadata),t.optimisticUnreadCount!==this.state.unreadCount&&this._throttledSetUnreadCount(),this.initListeners(this.props,e)}_clearUnreadMentions(){const{chat:e}=this.props;var t;(0,k.isGroupCatchUpEnabled)()&&e.isGroup&&(null===(t=e.groupMetadata)||void 0===t||t.unreadMentionMetadata.reset())}initListeners(e,t){const{listeners:s,active:a,chat:i,searchQuery:n,frequent:r}=e;t&&t.searchQuery&&t.searchQuery!==n&&s.remove(t.searchQuery,q.SEARCH_EVENT,this.onSearch),!n||t&&n===t.searchQuery||s.add(n,q.SEARCH_EVENT,this.onSearch);const o=t&&t.chat.id;if(!i.id.equals(o)&&(t&&t.active&&s.remove(t.active,t.chat.id.toString(),this.onActiveChange),a)){const e=(r?g.FREQUENT_PREFIX:"")+i.id.toString();s.add(a,e,this.onActiveChange)}}render(){let{chat:e,mode:t,secondary:s,theme:a,filterPreset:i,showEphemeralIcon:n,hideArchivedIcon:r,hideMuteIcon:o}=this.props;const{searchText:d,active:c,dragging:f,contextMenu:p,unreadCount:m}=this.state;let _,g;switch(t){case ie.LAST:_=(0,ae.jsx)(Z.default,{chat:e}),null==s&&(s=(0,ae.jsx)(h.default,{chat:e}),g=(0,ae.jsx)(D.default,{chat:e,mute:e.mute,unreadCount:m,hideArchivedIcon:!0===r,hideMuteIcon:!0===o,settings:z.default,unreadMentionIcon:e.hasUnreadMention}));break;case ie.INFO:null==s&&(s=e.isGroup||e.isBroadcast?(0,ae.jsx)(W.default,{groupMetadata:e.groupMetadata}):(0,ae.jsx)(te.default,{contact:e.contact,presence:e.presence,chatstate:e.presence.chatstate,location:"list"}))}const v=(0,ae.jsx)(C.default,{id:e.id,alt:"",showEphemeralIcon:n,waitIdle:!0,size:"new-chat-info"===a?40:void 0}),S=this.props.mouseDownAsClick;let y;p&&(y=(0,ae.jsx)(J.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this._removeContext,children:(0,ae.jsx)(ee.default,{contextMenu:p})}));const E=(0,ae.jsx)(H.default,{chat:e,firstLabel:null==i?void 0:i.label,highlightText:d,showLabel:!0,titlify:!0,ellipsify:!0});let b=null;const T=e.getEphemeralSetting();return null!=T&&0!==T&&(b=(0,ae.jsx)(l.InvisibleLabel,{children:(0,R.getDisappearingMessageExplanationString)(T)})),(0,ae.jsx)(O.default.Provider,{value:e.groupMetadata,children:(0,ae.jsxs)(w.default,{onRef:this._setHotKeysRef,handlers:this._handlers,onFocus:this.indicateFocus,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,"aria-selected":c,tabIndex:c?0:-1,role:"row",children:[(0,ae.jsx)(u.default,{id:e.id,ref:this._setCellRef,theme:a,contextEnabled:this.contextEnabled,pendingAction:e.pendingAction,contextMenu:!!p,unread:0!==m,active:!!c,isMuted:!1,dragging:!!f,image:v,primary:E,primaryDetail:_,secondary:s,secondaryDetail:g,onClick:S?void 0:this.onClick,onMouseDown:S?this.onMouseDown:void 0,onContext:this.onMenu}),b,y]})})}}ne.CONCERNS={chat:["id","isReadOnly","isGroup","pendingAction","canSend","isUser","contact","presence","groupMetadata","mute","isBroadcast","canUnread","optimisticUnreadCount","labels","archive","hasUnreadMention"]},ne.defaultProps={mode:ie.LAST},ne.displayName="Chat";var re=(0,X.default)((0,F.default)((0,$.default)(ne,ne.CONCERNS)));t.default=re},97776:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(92297)),n=a(s(85051)),r=a(s(12950)),o=a(s(2408)),l=a(s(17101)),d=a(s(76006)),u=s(85893);const c=function(e){const t=(0,d.default)(e.chat,["previewMessage","pendingInitialLoading"]);(0,d.default)(e.chatstate,["id","type"]);const s=(0,d.default)(e.presence,["hasData","withholdDisplayStage"],{isStrong:!1});if(s.isActive()){const e=s.getFormattedString();if(e)return(0,u.jsx)(n.default,{className:i.default.chatstateTyping,direction:"inherit",ellipsify:!0,titlify:!0,text:e})}const a=t.previewMessage;return a?(0,u.jsx)(l.default,{msg:a.safe(),msgType:"LastMessage"}):r.default.supportsFeature(r.default.F.MD_BACKEND)&&t.pendingInitialLoading?(0,u.jsx)(n.default,{className:i.default.loadingIndicate,direction:"inherit",titlify:!0,ellipsify:!0,text:o.default.t(1144)}):null};t.default=({chat:e})=>(0,u.jsx)(c,{chat:e,presence:e.presence,chatstate:e.presence.chatstate})},70521:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FREQUENT_PREFIX=t.Type=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(91749)),l=a(s(27387)),d=a(s(29713)),u=a(s(88419)),c=s(73554),h=a(s(85051)),f=a(s(47193)),p=a(s(39e3)),m=a(s(2408)),_=a(s(71681)),g=a(s(78972)),v=s(77593),S=a(s(79485)),C=s(15298),y=a(s(77898)),E=a(s(2966)),b=a(s(69635)),T=s(85893);const M={SMALL:"SMALL",DEFAULT:"DEFAULT"};t.Type=M;const x="freq_";t.FREQUENT_PREFIX=x;class I extends n.Component{constructor(...e){super(...e),this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,searchText:"",contextMenu:!1},this._handleSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)`Contact: prop searchQuery is undefined`},this._handleActiveChange=(e,t)=>{if("focus"===e){const e=this._hotKeysRef;e&&(f.default.focus(e),t&&(0,c.scrollIntoViewIfNeeded)(e))}this.setState({active:!!e})},this._handleDelete=e=>{e.stopPropagation();const t=this.props.onDelete;t&&t(e,(0,C.unproxy)(this.props.contact))},this._handleClick=e=>{const{onClick:t,contact:s}=this.props;t&&t(e,(0,C.unproxy)(s))},this._handleMouseDown=e=>{0===e.button&&this._handleClick(e)},this._handleKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),this._handleClick(e)},this._handleContext=e=>{var t,s;null===(t=(s=this.props).onContext)||void 0===t||t.call(s,e,this.props.contact)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e,t){const{active:s,contact:a,searchQuery:i}=e,n={},r=s&&s.value instanceof l.default&&a.isProxyOf(s.value);t.active!==r&&(n.active=r);const o=i?i.trimmed:"";return t.searchText!==o&&(n.searchText=o),n}componentDidMount(){this.initListeners(this.props);const{listenForAdminChange:e,listeners:t,participantCollection:s,contact:a}=this.props;e&&s&&t.add(s,"change:isAdmin change:isSuperAdmin",(e=>{b.default.equals(e.id,a.id)&&this.forceUpdate()}))}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){const{listeners:s,active:a,contact:i,searchQuery:n,frequent:r}=e;if(t&&t.searchQuery&&t.searchQuery!==n&&s.remove(t.searchQuery,v.SEARCH_EVENT,this._handleSearch),!n||t&&n===t.searchQuery||s.add(n,v.SEARCH_EVENT,this._handleSearch),(!t||!i.id.equals(t.contact.id))&&(t&&t.active&&s.remove(t.active,t.contact.id.toString(),this._handleActiveChange),a)){const e=(r?x:"")+i.id.toString();s.add(a,e,this._handleActiveChange)}}contextEnabled(){return!1}render(){const{contact:e,secondary:t,onDelete:s,contextEnabled:a,contextMenu:n,admin:l,showNotifyName:c,waitIdle:f,theme:_,useShortName:v,detail:S,listenForAdminChange:C,participantCollection:b,isPendingParticipant:x,showEphemeralIcon:I}=this.props,{active:P,searchText:A}=this.state,N=(0,i.default)({[d.default.contactSmall]:this.props.type===M.SMALL});let O,w,D;!e.name&&c&&e.notifyName&&(D=(0,T.jsx)("span",{className:d.default.screenName,children:(0,T.jsx)(h.default,{direction:"auto",text:e.notifyName})}));if((l||C&&b&&b.assertGet(e.id).isAdmin)&&(w=(0,T.jsx)("div",{className:d.default.markerAdmin,children:m.default.t(1962)})),x&&(w=(0,T.jsx)("div",{className:d.default.markerInvited,children:m.default.t(1008)})),null!=S)O=S;else if(s){const e=this.props.type===M.SMALL?"x-alt-small":"x-alt";O=(0,T.jsx)("div",{"data-a8n":r.default.key("chat-controls"),className:d.default.chatControls,role:"button",onClick:this._handleDelete,children:(0,T.jsx)(E.default,{name:e})})}let j=t;null==j&&(j=(0,T.jsx)(y.default,{id:e.id,waitIdle:f}));const R=this.props.type===M.SMALL?26:void 0,L={enter:this._handleKeyboardActivation,space:this._handleKeyboardActivation},k=this.props.mouseDownAsClick,F=(0,T.jsx)(g.default,{contact:e,useShortName:v,highlightText:A,showBusinessCheckmark:e.showBusinessCheckmarkAsPrimary,showLabel:!0,titlify:!0,ellipsify:!0,you:!0}),B="list-names"!==_||s?_:"list-names-no-delete";return(0,T.jsx)(p.default,{onRef:this._setHotKeysRef,handlers:L,onFocus:this.indicateFocus,className:N,children:(0,T.jsx)(o.default,{ref:this._setCellRef,theme:B,active:P,contextEnabled:a||this.contextEnabled,contextMenu:n,pendingAction:e.pendingAction,detail:O,image:(0,T.jsx)(u.default,{id:e.id,size:R,showEphemeralIcon:I,waitIdle:f}),primary:F,primaryDetail:w,secondary:j,secondaryDetail:D,onClick:k?null:this._handleClick,onMouseDown:k?this._handleMouseDown:null,onContext:this._handleContext})})}}I.CONCERNS={contact:["id","pendingAction","notifyName","name","showBusinessCheckmarkAsPrimary"]},I.displayName="Contact";var P=(0,_.default)((0,S.default)(I,I.CONCERNS));t.default=P},57153:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=s(78615),o=a(s(59405)),l=a(s(2408)),d=a(s(79485)),u=a(s(2966)),c=a(s(35690)),h=a(s(82669)),f=a(s(69635)),p=s(85893);class m extends n.PureComponent{constructor(...e){super(...e),this.state={chatId:null,shouldAnimate:!1}}static getDerivedStateFromProps(e,t){const s=e.chat.id;return{chatId:s,shouldAnimate:f.default.equals(t.chatId,s)}}_showMuteIcon(){const{chat:e,mute:t,hideMuteIcon:s,settings:a}=this.props;return e.archive&&(0,r.archiveV2Supported)()&&a.showArchiveV2?!s:t.isMuted}render(){const{chat:e,unreadCount:t,hideArchivedIcon:s,unreadMentionIcon:a}=this.props,n=this._showMuteIcon()?(0,p.jsx)("div",{className:o.default.icon,"aria-label":l.default.t(29),children:(0,p.jsx)(u.default,{name:"muted"})},"icon-muted"):null,r=null!=e.pin&&e.pin>0?(0,p.jsx)("div",{className:(0,i.default)(o.default.icon,o.default.iconPinned),children:(0,p.jsx)(u.default,{name:"pinned"})},"icon-pinned"):null,d=0!==t?(0,p.jsx)("div",{className:o.default.icon,children:(0,p.jsx)(c.default,{count:t})},"icon-unread"):null,f=a?(0,p.jsx)("div",{className:(0,i.default)(o.default.icon,o.default.iconMentions),"aria-label":l.default.t(54),children:(0,p.jsx)(u.default,{name:"mentions",className:o.default.iconMentions})},"icon-mentions"):null,m=e.archive&&!s?(0,p.jsx)("span",{className:(0,i.default)(o.default.icon,o.default.archived),children:l.default.t(583)},"icon-archived"):null;return(0,p.jsxs)(h.default,{transitionName:"pop",transitionEnter:this.state.shouldAnimate,transitionLeave:this.state.shouldAnimate,children:[n,m,r,f,d]})}}m.CONCERNS={chat:["id","archive","pin"],mute:["isMuted"],settings:["showArchiveV2"]},m.displayName="Icons";var _=(0,d.default)(m,m.CONCERNS);t.default=_},17101:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(17176)),o=a(s(55454)),l=a(s(85051)),d=a(s(75580)),u=a(s(12950)),c=a(s(62478)),h=s(49895),f=a(s(2408)),p=a(s(23771)),m=a(s(71681)),_=a(s(4231)),g=a(s(41132)),v=a(s(8163)),S=a(s(78972)),C=a(s(88893)),y=a(s(65565)),E=a(s(79485)),b=s(15298),T=s(85893);class M extends n.PureComponent{constructor(...e){super(...e),this.updateAfterFeatureFlagChange=()=>{this.props.listeners._unmounted||this.forceUpdate()}}componentDidMount(){const{listeners:e,msg:t}=this.props;e.add(u.default,u.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange),t.type===o.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.unsafe().size<=1024*y.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===o.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){const{msg:e,searchQuery:t=[],msgType:s,author:a}=this.props,n=[];u.default.supportsFeature(u.default.F.MD_BACKEND)?!e.isSentByMe||e.asRevoked||e.mdDowngrade||n.push((0,T.jsx)(g.default,{msg:e.unsafe()},"symbol")):e.isSentByMe&&!e.asRevoked&&n.push((0,T.jsx)(g.default,{msg:e.unsafe()},"symbol"));const o="Search"!==s&&!e.isSentByMe&&e.isGroupMsg&&!e.isNotification,m=a&&"Search"===s;if((o||m)&&(o?n.push((0,T.jsx)(S.default,{contact:e.senderObj,useShortName:!0},"author")):m&&n.push((0,T.jsx)(l.default,{text:a,direction:"auto"},"author")),n.push((0,T.jsxs)("span",{children:[":",""]},"divider"))),e.hasSymbol()&&n.push((0,T.jsx)(v.default,{msg:e.unsafe()},"msg-symbol")),"order"===e.type&&null!=e.itemCount&&n.push((0,T.jsxs)("div",{children:[f.default.t(1092,{count:e.itemCount||0,_plural:e.itemCount||0}),e.message?(0,T.jsxs)("span",{children:[":",""]},"item-divider"):null]},"item-count")),null!=e.asGroupNotification)n.push((0,T.jsx)(c.default,{msg:e.asGroupNotification,clickable:!1},"status"));else if(null!=e.asBroadcastNotification)n.push((0,T.jsx)(r.default,{msg:e.asBroadcastNotification,clickable:!1},"broadcast_notification"));else{let a=e.asRevoked;u.default.supportsFeature(u.default.F.MD_BACKEND)&&(a=a||e.mdDowngrade);const r=(0,i.default)({[p.default.product]:null!=e.asProduct,[p.default.italic]:a});n.push((0,T.jsx)(l.default,{className:r,direction:e.dir,text:(0,C.default)((0,d.default)((0,b.unproxy)(e.unsafe()),!1,!0)||"",!0),dirMismatch:e.rtl!==f.default.isRTL(),formatters:h.Configuration[s]({mentions:e.mentionMap(),terms:t}),ellipsify:!0,inlineblock:!0},"status"))}const _=f.default.embedDir((0,d.default)((0,b.unproxy)(e.unsafe()))||"",e.rtl);return(0,T.jsx)("span",{className:p.default.last,title:_,children:n})}}M.CONCERNS={msg:["ack","asBroadcastNotification","asGroupNotification","asProduct","asRevoked","dir","isGroupMsg","isNotification","isSentByMe","itemCount","rtl","senderObj","type","mediaData","message","isVcardOverMmsDocument","size","mdDowngrade"]},M.displayName="LastMsg";var x=(0,m.default)((0,E.default)(M,M.CONCERNS));t.default=x},77622:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91749)),r=s(73554),o=a(s(40854)),l=a(s(47193)),d=a(s(39e3)),u=a(s(17101)),c=a(s(71681)),h=a(s(92954)),f=a(s(45472)),p=a(s(78972)),m=s(77593),_=a(s(79485)),g=s(15298),v=a(s(71286)),S=s(74289),C=s(85893);class y extends i.PureComponent{constructor(...e){super(...e),this.state={searchText:"",active:!1},this._refCell=(0,i.createRef)(),this._handleSearch=()=>{this.setState({searchText:this.props.searchQuery.trimmed})},this._handleActiveChange=e=>{if("focus"===e){var t;const e=null===(t=this._refCell.current)||void 0===t?void 0:t.getCellFrameDivRef();e&&(l.default.focus(e),(0,r.scrollIntoViewIfNeeded)(e))}this.setState({active:!!e})},this._handleClick=e=>{const t=this.props.onClick;if((0,S.isFunction)(t)){const{msg:s,chat:a}=this.props,i=f.default.assertGet(s.id),n=a.getSearchContext(i);n.msg=i,t(e,(0,g.unproxy)(a),n)}},this._handleMouseDown=e=>{0===e.button&&this._handleClick(e)},this._handleEnter=e=>{e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),this._handleClick(e)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._refCell.current)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e){const{active:t,msg:s,searchQuery:a}=e,i=t&&t.value instanceof h.default&&t.value.id.equals(s.id);return{searchText:a.trimmed,active:i}}componentDidMount(){this.initListeners(this.props)}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){const{listeners:s,active:a,msg:i,searchQuery:n}=e;t&&t.searchQuery&&t.searchQuery!==n&&s.remove(n,m.SEARCH_EVENT,this._handleSearch),!n||t&&n===t.searchQuery||s.add(n,m.SEARCH_EVENT,this._handleSearch);const r=t?t.msg.id:null;r&&!i.id.equals(r)&&(t&&t.active&&s.remove(t.active,t.msg.id.toString(),this._handleActiveChange),a&&s.add(a,i.id.toString(),this._handleActiveChange))}render(){const{msg:e,chat:t,searchQuery:s,filterPreset:a}=this.props,{active:i}=this.state,r=(0,C.jsx)(v.default,{msg:e}),o=(0,C.jsx)(u.default,{msg:e.safe(),msgType:"FTSMessage",searchQuery:s.highlighted}),l={enter:this._handleEnter};return(0,C.jsx)(d.default,{handlers:l,onFocus:this.indicateFocus,children:(0,C.jsx)(n.default,{ref:this._refCell,contextEnabled:()=>!1,theme:"chat-checkbox"===this.props.theme?"cell-message-checkbox":"cell-message",active:!!i,primary:(0,C.jsx)(p.default,{chat:t,labels:e.labels,firstLabel:null==a?void 0:a.label,showLabel:!0,titlify:!0,ellipsify:!0}),primaryDetail:r,secondary:o,onClick:this._handleClick})})}}y.CONCERNS={msg:["id","isSentByMe","isGroupMsg","isNotification","senderObj","dir","rtl","type","labels"],chat:["id","isUser","contact","formattedTitle","groupMetadata"]},y.displayName="Message";var E=(0,c.default)((0,_.default)(y,y.CONCERNS));t.default=E},41132:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.default)(e.msg,["ack"]).ack;let s,a;t<n.default.ACK.SENT?s="status-time":t===n.default.ACK.SENT?s="status-check":t===n.default.ACK.RECEIVED?s="status-dblcheck":(s="status-dblcheck",a=r.default.ackBlue);return(0,d.jsx)("div",{className:(0,i.default)(r.default.ack,a),children:(0,d.jsx)(o.default,{name:s})})};var i=a(s(94184)),n=a(s(55454)),r=a(s(34769)),o=a(s(2966)),l=a(s(76006)),d=s(85893)},8163:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(55454)),o=a(s(12950)),l=a(s(71681)),d=a(s(44597)),u=a(s(281)),c=s(19407),h=a(s(79485)),f=a(s(2966)),p=s(83381),m=s(85893);class _ extends n.PureComponent{constructor(...e){super(...e),this.state={parsedVcards:null},this.updateAfterFeatureFlagChange=()=>{this.forceUpdate()}}static getDerivedStateFromProps(e,t){var s;const a=e.msg;var i;return(null===(s=a.mediaData)||void 0===s?void 0:s.parsedVcards)!==t.parsedVcards?{parsedVcards:null===(i=a.mediaData)||void 0===i?void 0:i.parsedVcards}:null}componentDidMount(){const{listeners:e}=this.props;e.add(o.default,o.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange)}render(){const{msg:e}=this.props,t=function(e,t){switch(e.type){case r.default.MSG_TYPE.IMAGE:case r.default.MSG_TYPE.VIDEO:return e.isViewOnce?!0!==t.viewOnceStatic&&(0,p.isViewed)(e.safe())?"view-once-viewed":"view-once":e.isGif?"status-gif":e.type===r.default.MSG_TYPE.VIDEO?"status-video":"status-image";case r.default.MSG_TYPE.AUDIO:return e.isGif?"status-gif":"status-audio";case r.default.MSG_TYPE.VCARD:case r.default.MSG_TYPE.MULTI_VCARD:return e.isGif?"status-gif":"status-vcard";case r.default.MSG_TYPE.DOCUMENT:return e.isGif?"status-gif":t.parsedVcards?"status-vcard":"status-document";case r.default.MSG_TYPE.CIPHERTEXT:return e.isGif?"status-gif":"status-ciphertext";case r.default.MSG_TYPE.UNKNOWN:return e.isGif?"status-gif":"status-unknown";case r.default.MSG_TYPE.PRODUCT:return"business-description";case r.default.MSG_TYPE.STICKER:return"status-sticker";case r.default.MSG_TYPE.CALL_LOG:switch(e.subtype){case"miss_video":case"miss_group_video":return"status-miss_video"}return"status-miss";case r.default.MSG_TYPE.PTT:return"status-ptt";case r.default.MSG_TYPE.REVOKED:return"recalled";case r.default.MSG_TYPE.LOCATION:return e.isLive?(0,c.liveLocationIcon)(!1):"status-location";case r.default.MSG_TYPE.GROUPS_V4_INVITE:return o.default.supportsFeature(o.default.F.GROUPS_V_4_JOIN_PERMISSION)?"group":"status-unknown";case r.default.MSG_TYPE.PAYMENT:return"status-unknown";case r.default.MSG_TYPE.ORDER:return"shopping-cart"}return __LOG__(2)`chat:getClasses Invalid msg type:"${e.type}"`,"status-unknown"}(e,{parsedVcards:this.state.parsedVcards,viewOnceStatic:this.props.viewOnceStatic}),s=(0,i.default)(d.default.symbol,t,{[d.default.margin]:!e.asRevoked,[d.default.miss]:e.type===r.default.MSG_TYPE.CALL_LOG,[d.default.pttBlue]:e.type===r.default.MSG_TYPE.PTT&&e.ack===r.default.ACK.PLAYED,[d.default.pttGreen]:e.type===r.default.MSG_TYPE.PTT&&e.ack!==r.default.ACK.PLAYED&&!e.isSentByMe}),a=e.paymentAmount1000&&e.paymentCurrency;return(0,m.jsx)("div",{className:s,children:e.type===r.default.MSG_TYPE.PAYMENT&&a?(0,m.jsx)(u.default,{currency:e.paymentCurrency,subtype:e.subtype,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,isCompact:!0}):(0,m.jsx)(f.default,{name:t})})}}_.CONCERNS={msg:["ack","isGif","isLive","isViewOnce","type","subtype","asRevoked","isSentByMe","paymentCurrency","paymentAmount1000","paymentStatus","paymentTxnStatus","mediaData"]},_.displayName="MsgSymbol";var g=(0,l.default)((0,h.default)(_,_.CONCERNS));t.default=g},77898:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(17025)),r=a(s(85051)),o=a(s(38057)),l=a(s(2408)),d=s(15298),u=a(s(49072)),c=a(s(22360)),h=a(s(76006)),f=a(s(69635)),p=s(85893);const m=(0,p.jsx)("span",{className:u.default.statusLoading,children:l.default.t(721)});const _=function(e){const t=(0,h.default)(e.status,["id","stale","status"],{isStrong:!1}),s=(0,p.jsx)(r.default,{direction:"auto",selectable:!0,titlify:!0,text:t.status,breakWord:!0}),a=(0,d.unproxy)(t).stale?m:s;return(0,p.jsx)(o.default,{id:t.id,onComplex:()=>(c.default.find(t.id),void 0!==t.status?s:m),waitIdle:e.waitIdle,children:a})};class g extends i.PureComponent{constructor(e){super(e),this.state={status:c.default.get(e.id)}}componentDidMount(){if(!this.state.status){const e=n.default.gadd(this.props.id);this.setState({status:e.getStatus()})}}componentDidUpdate(e){if(!f.default.equals(this.props.id,e.id)){const e=n.default.gadd(this.props.id);this.setState({status:e.getStatus()})}}render(){const{status:e}=this.state;return e?(0,p.jsx)(_,{status:e,waitIdle:this.props.waitIdle}):m}}t.default=g,g.displayName="StatusWrapper"},71286:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(30381)),r=s(67294),o=a(s(25142)),l=i(s(91952)),d=i(s(12950)),u=i(s(71681)),c=i(s(79485)),h=i(s(76006)),f=s(85893);class p extends r.PureComponent{constructor(...e){super(...e),this.state={updater:!1},this._listening=!1,this.rerender=()=>{this.setState({updater:!this.state.updater})}}componentDidMount(){this.props.listeners.add(o.default,o.HOUR24_FORMAT_CHANGE_EVENT,this.rerender),this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getDisplayedTimestamp(){return d.default.supportsFeature(d.default.F.MD_BACKEND)&&null!=this.props.t?this.props.t:this.props.msg.t}maybeRegMidnight(){const{listeners:e}=this.props,t=(0,n.default)().startOf("day").subtract(7,"day");this.getDisplayedTimestamp()>=t.unix()?this._listening||(this._listening=!0,e.add(l.default,"midnight",this.rerender)):this._listening&&(this._listening=!1,e.remove(l.default,"midnight",this.rerender))}render(){return(0,f.jsx)(f.Fragment,{children:o.default.relativeStr(this.getDisplayedTimestamp())})}}p.CONCERNS={msg:["t"]},p.displayName="TimestampWithMsg";const m=(0,u.default)((0,c.default)(p,p.CONCERNS));const _=function(e){const t=(0,h.default)(e.chat,["previewMessage","t"]);return t.previewMessage?(0,f.jsx)(m,{msg:t.previewMessage,t:t.t}):null};t.default=({chat:e,msg:t})=>e?(0,f.jsx)(_,{chat:e}):t?(0,f.jsx)(m,{msg:t}):null},60637:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=s(38512),r=a(s(70521)),o=a(s(47452)),l=a(s(2408)),d=a(s(71681)),u=a(s(79485)),c=a(s(63477)),h=a(s(68062)),f=s(85893);class p extends i.Component{constructor(...e){super(...e),this.state={contextMenu:null},this._unblockContactTrigger=e=>{const{contact:t}=this.props,s=[(0,f.jsx)(o.default,{a8n:"unblock-contact-in-multi-select",action:this.unblockContact,children:l.default.t(704,{contact:t.shortName||t.name})},"unblock")];this.setState({contextMenu:{contactId:t.id.toString(),menu:s,anchor:e.anchor,event:e.event}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.unblockContact=()=>{const{contact:e}=this.props;this.closeContextMenu(),e.addPendingAction((0,n.unblockContact)(e)).then((()=>this.props.onSelect())).catch((()=>{}))},this.handleSelect=e=>{if(this.props.disabled)return;if(this.props.allowBlockedContacts)return void this.props.onSelect();const{contact:t}=this.props;this.state.contextMenu?this.closeContextMenu():t.isContactBlocked?this._unblockContactTrigger({event:e}):this.props.onSelect()}}render(){const{disabled:e,customSecondaryText:t,contact:s,active:a,allowBlockedContacts:i,showEphemeralIcon:n}=this.props;let o;return this.state.contextMenu&&(o=(0,f.jsx)(c.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,children:(0,f.jsx)(h.default,{contextMenu:this.state.contextMenu})})),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.default,{theme:e||s.isContactBlocked&&!i?"chat-checkbox-no-delete":"chat-checkbox",active:a,contact:s,onClick:e?null:this.handleSelect,secondary:s.isContactBlocked&&!i?l.default.t(703):t||null,waitIdle:!0,showEphemeralIcon:n}),o]})}}p.CONCERNS={contact:["id","isGroup","isContactBlocked","pendingAction","shortName","name"]},p.displayName="UnblockableContactWrapper";var m=(0,d.default)((0,u.default)(p,p.CONCERNS));t.default=m},35690:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({count:e,transparentBg:t,ariaLabel:s}){let a="";e>0&&(a=n.default.t(1715,{count:n.default.n(e),_plural:e}));s&&(a=s);return(0,o.jsx)("span",{className:(0,i.default)(r.default.count,{[r.default.transparentBg]:t}),"aria-label":a,children:e>0?n.default.n(e):null})};var i=a(s(94184)),n=a(s(2408)),r=a(s(92255)),o=s(85893)},46670:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(7900)),r=s(67294),o=i(s(62202)),l=i(s(2711)),d=s(58380),u=i(s(99857)),c=i(s(91952)),h=i(s(17025)),f=i(s(39703)),p=i(s(11695)),m=i(s(73075)),_=i(s(52087)),g=i(s(87957)),v=i(s(2408)),S=i(s(71681)),C=s(63124),y=i(s(32666)),E=i(s(63362)),b=i(s(58753)),T=i(s(4231)),M=i(s(45472)),x=i(s(43085)),I=a(s(46364)),P=a(s(49201)),A=i(s(41631)),N=i(s(24082)),O=s(85893);class w extends r.Component{constructor(...e){super(...e),this._handleChatInfoDrawer=(e,t,s)=>{c.default.openDrawerRight((0,O.jsx)(g.default,{chat:e,showFullGroupDescription:t,scrollToParticipantList:s},`info-${e.id.toString()}`),"slide-left",this.props.uim)},this._handleLiveLocationDrawer=(e,t)=>{e.liveLocation&&e.liveLocation.active||c.default.openDrawerRight((0,O.jsx)(C.LiveLocationDrawerLoadable,{chat:e,openFrom:t,isFirstLevel:!0}),"slide-left",this.props.uim)},this._handleExpiredLocationDrawer=e=>{c.default.openDrawerRight((0,O.jsx)(C.ExpiredLocationDrawerLoadable,{msg:e}),"slide-left",this.props.uim)},this._handleVerificationDrawer=e=>{c.default.openDrawerRight((0,O.jsx)(A.default,{contact:h.default.assertGet(e),isFirstLevel:!0}),"slide-left",this.props.uim)},this._handleMsgInfoDrawer=e=>{I.default.displayInfo===I.StreamInfo.NORMAL?e.chat.kind===d.CHAT_KIND.CHAT?c.default.openDrawerRight((0,O.jsx)(f.default,{msg:e}),"slide-left",this.props.uim):c.default.openDrawerRight((0,O.jsx)(m.default,{msg:e}),"slide-left",this.props.uim):c.default.openToast((0,O.jsx)(P.default,{msg:v.default.t(1277),id:(0,P.genId)("msg_info_failed")}))},this._handleAttachMediaDrawer=({chat:e,attachments:t,animationName:s,initCaption:a,onComplete:i,fileOrigin:r})=>{const d=()=>{const s=e.attachMediaContents;s&&t&&(r?s.processAttachments(t,r):(__LOG__(3)`ChatActionListener:onAttachMediaDrawer fileOrigin is not specified, fallback to default`,s.processAttachments(t,T.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)))};c.default.existsDrawerMid((t=>{if(t)return void d();e.attachMediaContents||e.setAttachMediaContents(new o.default({chatParticipantCount:e.getParticipantCount()}));const r=(0,n.default)(e.attachMediaContents,"chat.attachMediaContents");c.default.openDrawerMid((0,O.jsx)(l.default,{chat:e,onComplete:i,initCaption:a,mediaCollection:r}),s||"slide-up",this.props.uim,{noFocus:!0,onEnterAnimationComplete:d})}))},this.handleChatSearch=e=>{c.default.openDrawerRight((0,O.jsx)(u.default,{chat:e}),"slide-left",this.props.uim)},this._handleMediaViewer=e=>{const{msg:t,getZoomNode:s,currentTime:a,highlightedMsgIds:i}=e;M.default.get(t.id)?c.default.openModalMedia((0,O.jsx)(E.default,{msg:t,startTime:a,getZoomNode:s,highlightedMsgIds:i}),{transition:"media-viewer",uim:this.props.uim}):c.default.openModal((0,O.jsx)(y.default,{msg:t}))},this._handleEphemeralDrawer=e=>{c.default.openDrawerRight((0,O.jsx)(p.default,{chat:e,fromInfoFlow:!1}),"slide-left",this.props.uim)},this._handleVoipStartGroupCall=(e,t)=>{var s,a;const i=(null!==(s=null===(a=e.groupMetadata)||void 0===a?void 0:a.participants)&&void 0!==s?s:[]).map((e=>e.contact.id)),n=(0,O.jsx)(x.default,{isVideo:t,groupParticipants:i,onStartGroupCall:e=>N.default.groupCallStart(e,t)});c.default.openModal(n,{transition:"modal-flow"})},this._handleMerchantDetailsDrawer=e=>{c.default.openDrawerRight((0,O.jsx)(b.default,{contactId:e},"legal-entity-details"),"slide-left",this.props.uim)}}componentDidMount(){const{listeners:e}=this.props;e.add(c.default,"chat_info_drawer",this._handleChatInfoDrawer),e.add(c.default,"msg_info_drawer",this._handleMsgInfoDrawer),e.add(c.default,"chat_search",this.handleChatSearch),e.add(c.default,"attach_media_drawer",this._handleAttachMediaDrawer),e.add(c.default,"verification_drawer",this._handleVerificationDrawer),e.add(c.default,"live_location_drawer",this._handleLiveLocationDrawer),e.add(c.default,"media_viewer_modal",this._handleMediaViewer),e.add(c.default,"expired_location_drawer",this._handleExpiredLocationDrawer),e.add(c.default,"ephemeral_drawer",this._handleEphemeralDrawer),e.add(c.default,"voip_start_group_call",this._handleVoipStartGroupCall),e.add(c.default,"merchant_details_drawer",this._handleMerchantDetailsDrawer)}render(){return null}}w.displayName="ChatActionListener";var D=(0,_.default)((0,S.default)(w));t.default=D},82754:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FooterType=void 0;var i=a(s(35161)),n=a(s(25325)),r=a(s(91966)),o=a(s(94184)),l=s(67294),d=a(s(58380)),u=a(s(55815)),c=a(s(85051)),h=a(s(2408)),f=a(s(71681)),p=a(s(78150)),m=a(s(3132)),_=a(s(2966)),g=a(s(82669)),v=s(85893);const S={CONFIRM:"CONFIRM",NEXT:"NEXT",SEND:"SEND",VOICE_CALL:"VOICE_CALL",VIDEO_CALL:"VIDEO_CALL"};t.FooterType=S;class C extends l.Component{constructor(e){super(e),this._forwardIsEnabled=!0,this.state={selected:[]},this._handleForwardClick=()=>{this._forwardIsEnabled&&(this._forwardIsEnabled=!1,this.props.onForward())},this._firstRenderActive=e.startActive||!1}componentDidMount(){const e=this.props.selections.getSelected();this.setState({selected:e}),this.props.listeners.add(this.props.selections,"all",(()=>{this.setState({selected:this.props.selections.getSelected()})})),0===e.length&&(this._firstRenderActive=!1)}componentDidUpdate(){this._hasSelected()||(this._firstRenderActive=!1)}_hasSelected(){return this.state.selected.length>0}render(){let e;if(this._hasSelected()){const t=1===this.state.selected.length?this.props.singleSelectionType:this.props.multipleSelectionType;let s;switch(t){case S.CONFIRM:s=(0,v.jsx)(_.default,{name:"checkmark-medium"});break;case S.NEXT:s=(0,v.jsx)(_.default,{name:"arrow-forward"});break;case S.VOICE_CALL:s=(0,v.jsx)(_.default,{name:"voice-call"});break;case S.VIDEO_CALL:s=(0,v.jsx)(_.default,{name:"video-call"});break;case S.SEND:default:s=(0,v.jsx)(_.default,{directional:!0,name:"send"})}e=(0,v.jsxs)("div",{className:(0,o.default)(u.default.controlsSummary,{[u.default.confirm]:t===S.CONFIRM}),children:[t!==S.CONFIRM&&(0,v.jsx)(E,{chats:this.state.selected}),(0,v.jsx)("div",{"data-animate-btn":!0,className:this._firstRenderActive?u.default.btnActive:u.default.btnAction,children:(0,v.jsx)(m.default,{large:!0,onClick:this._handleForwardClick,children:s})})]})}return(0,v.jsx)(g.default,{transitionName:"slide-up-down-footer",className:u.default.container,children:e})}}C.defaultProps={singleSelectionType:S.SEND,multipleSelectionType:S.SEND},C.displayName="ChatSelectorFooter";var y=(0,f.default)(C);t.default=y;class E extends l.Component{constructor(e){super(e),this.state={chats:this.props.chats}}static getDerivedStateFromProps(e,t){let s=t.chats;const a=e.chats;return s=a&&a.length>s.length?s.concat((0,r.default)(a,s)):(0,n.default)(s,a),{chats:s}}render(){const e=(0,i.default)(this.state.chats,(e=>e instanceof d.default?e.formattedTitle:e instanceof p.default?e.name:e.formattedShortNameWithNonBreakingSpaces)),t=[];for(let s=e.length-1;s>=0;s--)t.push((0,v.jsx)(c.default,{className:u.default.item,text:e[s]},s)),s>0&&t.push((0,v.jsx)("span",{children:h.default.t(815)},`comma-${s}`));return(0,v.jsx)(g.default,{transitionName:"pop",className:u.default.summaryText,children:t})}}E.displayName="SelectedChatsList"},14966:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(93386)),r=i(s(91966)),o=s(67294),l=i(s(58380)),d=a(s(75381)),u=i(s(84758)),c=i(s(46806)),h=i(s(91952)),f=i(s(55454)),p=(i(s(27387)),i(s(70521))),m=i(s(92329)),_=i(s(85051)),g=s(62238),v=a(s(86025)),S=i(s(47193)),C=i(s(39e3)),y=s(49895),E=i(s(2408)),b=i(s(71681)),T=i(s(77622)),M=(i(s(92954)),i(s(37314))),x=i(s(69217)),I=i(s(63477)),P=s(85893);const A="SEC_CHATS",N="SEC_CONTACTS",O="SEC_GROUPCHATS",w="SEC_STARRED",D="SEC_MSG",j="SEC_MUTED_CHATS",R="ROW_CHATS",L="ROW_CONTACTS",k="ROW_GROUPCHATS",F="ROW_STARRED",B="ROW_MSG";class G extends o.Component{static getDerivedStateFromProps(e){return{ftsStarred:e.ftsResult.filter((({star:e})=>e)),ftsMessages:e.ftsResult.filter((({star:e})=>!e))}}constructor(e){super(e),this._setRefHotKeys=e=>{this._refHotKeys=e},this._handleListPointerEventsOff=()=>{this._listPointerEvents=!1},this._handleListPointerEventsOn=()=>{this._listPointerEvents=!0},this._updateSelected=e=>{this._debouncedOpenSelected.cancel(),this.props.selection.setVal(e,!1),this._oldSelection=e},this.handleContactClick=(e,t)=>{this.handleClick(e,t.id)},this._handleChatClick=(e,t)=>{this.handleClick(e,t.id)},this.handleMessageClick=(e,t,s)=>{this.handleClick(e,t.id,s)},this.handleClick=(e,t,s)=>{e.preventDefault(),e.stopPropagation(),(0,g.findChat)(t).then((e=>{s?h.default.openChatAt(e,s).then((t=>{t&&h.default.focusChatTextInput(e)})):e!==this._getActiveChat()?h.default.openChatFromUnread(e).then((t=>{t&&h.default.focusChatTextInput(e)})):h.default.focusChatTextInput(e)}))},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.handleFocusGain=e=>{if(e.target===this._refHotKeys&&this._listPointerEvents)if(this.props.selection.index<0)this.focusFirst();else{const{uie:e}=this;e&&e.activate(),this.props.selection.reset(!0)}},this._handleCloseChat=e=>{e===this.props.selection.getVal()&&this.props.selection.unset()},this.handleFocusSearch=e=>{e.stopPropagation(),e.preventDefault(),this.props.onFocusSearch()},this.setRefUIE=e=>{this.uie=e},this.handleFocusList=()=>{this.refList&&this._refHotKeys&&S.default.focus(this._refHotKeys)},this.requestFocus=()=>{this.props.selection.reset(!1),this.props.selection.index>-1&&document.activeElement===document.body&&this.handleFocusList()},this.setRefList=e=>{this.refList=e},this.handleMultiSelect=(e,t,s)=>{const{multiSelection:a}=this.props;a&&a.setVal(e,t,s)},this._renderWrappedItem=(e,t)=>{const{multiSelection:s,selectableState:a}=this.props;return s&&a?(0,P.jsx)(c.default,{model:t,theme:"chat-checkbox",selectableState:a,multiSelection:s,onSelect:this.handleMultiSelect,children:e}):e},this.renderItem=e=>{const{searchQuery:t,filterPreset:s}=this.props;switch(e.type){case A:return(0,P.jsx)(M.default,{header:E.default.t(1922)});case N:return(0,P.jsx)(M.default,{header:E.default.t(1930)});case O:return(0,P.jsx)(M.default,{header:E.default.t(2038)});case w:return(0,P.jsx)(M.default,{header:E.default.t(2164)});case D:return(0,P.jsx)(M.default,{header:E.default.t(2073)});case R:const{data:a}=e;return this._renderWrappedItem((0,P.jsx)(d.default,{chat:a,contact:a.contact,mode:d.Mode.LAST,searchQuery:t,filterPreset:s,onClick:this._handleChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection,showEphemeralIcon:!0}),a);case L:const{data:i}=e;return this._renderWrappedItem((0,P.jsx)(p.default,{contact:i,active:this.props.selection,searchQuery:t,onClick:this.handleContactClick,mouseDownAsClick:!0,waitIdle:!0}),i);case k:const{data:n}=e,r=n[0],o=this._getGroupChatSubtitle(n);return this._renderWrappedItem((0,P.jsx)(d.default,{chat:r,contact:r.contact,secondary:o,mode:d.Mode.LAST,searchQuery:t,filterPreset:s,onClick:this._handleChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection}),r);case F:const{data:l}=e;return this._renderWrappedItem((0,P.jsx)(T.default,{msg:l,chat:l.chat,searchQuery:t,filterPreset:s,onClick:this.handleMessageClick,active:this.props.selection}),l);case B:const{data:u}=e;return this._renderWrappedItem((0,P.jsx)(T.default,{msg:u,chat:u.chat,searchQuery:t,filterPreset:s,onClick:this.handleMessageClick,active:this.props.selection}),u);default:throw new v.UnknownDataError(e)}},this._listPointerEvents=!0,this._oldSelection=null,this._debouncedOpenSelected=this.props.debounce((()=>{this._openSelected(this._focusComposer),this._focusComposer=!1}),200),this.state={textsize:m.default.get().textsize,ftsStarred:[],ftsMessages:[],mutedChats:[],collapseMutedChatsEnabled:!1,mutedChatsCollapsed:!0}}componentWillUnmount(){const e=this.getSelection(),t=this.props.selection.getVal();t&&t.isState&&!this.props.isSearching&&!e.length&&h.default.closeChat(t)}componentDidMount(){this.props.selection.init(this.getSelection()),this.props.listeners.add(h.default,"focus_chat_list",this.restoreFocus),this.props.listeners.add(h.default,"focus_next_chat",(e=>{this.handleNextChat(null,!0,e)})),this.props.listeners.add(h.default,"focus_prev_chat",(e=>{this.handlePrevChat(null,!0,e)})),this.props.listeners.add(h.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(h.default,"close_chat",this._handleCloseChat),this.props.listeners.add(h.default,"textsize_change",(e=>{this.setState({textsize:e})}))}componentDidUpdate(e){const t=e.selection.getVal();this.props.selection.init(this.getSelection(),!e.isSearching&&!this.props.isSearching);const s=this.props.selection.getVal();e.isSearching&&!this.props.isSearching&&!s&&this._oldSelection&&this.props.selection.setVal(this._oldSelection),s&&s!==t&&(this._focusComposer=!0,this._debouncedOpenSelected())}_openSelected(e=!1){const t=this.props.selection.getVal();t&&(t instanceof l.default&&t!==this._getActiveChat()?h.default.openChatFromUnread(t).then((s=>{s&&e&&h.default.focusChatTextInput(t)})):e&&h.default.focusChatTextInput(t))}getSelection(){return[...this.props.chats,...this.props.contacts,...this.props.messages,...this.props.groupChats.map((e=>e[0])),...this.state.ftsStarred,...this.state.ftsMessages]}_scrollListIntoFocusedItem(e=100){this.refList&&this.refList.scrollIntoViewIfNeeded(this.props.selection.index,e)}focusFirst(){const{uie:e}=this;e&&e.activate(),this.props.selection.setFirst(),this._scrollListIntoFocusedItem(0),this._debouncedOpenSelected()}handleNextChat(e,t,s){e&&e.preventDefault();const a=this.props.selection.next();this.props.selection.index!==a&&(this.props.selection.setNext(!0),this._focusComposer=s,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected())}handlePrevChat(e,t,s){e&&e.preventDefault();this.props.selection.prev()>-1?(this.props.selection.setPrev(!0),this._focusComposer=s,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected()):t||(this._debouncedOpenSelected.cancel(),this._openSelected(),this.props.onFocusSearch())}_getHeight(){const{textsize:e}=this.state,t=f.default.LIST_HEIGHT_TEXTSIZE_MAP.find((t=>t.scale===e));return t?t.height:72}getData(){const{chats:e,contacts:t,groupChats:s,isSearching:a,messages:i}=this.props,{ftsStarred:n,ftsMessages:r,mutedChats:o,mutedChatsCollapsed:l,collapseMutedChatsEnabled:d}=this.state,u=[];return a&&e.length>0&&u.push({itemKey:"section-chats",type:A}),!a&&d?(o.length>0&&u.push({itemKey:"section-collapse-muted",contentKey:`${String(l)}-${o.length}`,type:j,height:30}),l||u.push(...o.map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,expanded:!l,type:R})))),u.push(...e.filter((e=>!e.mute.isMuted)).map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,type:R}))))):u.push(...e.map((e=>({itemKey:`chat-${e.id.toString()}`,data:e,type:R})))),a&&t.length>0&&u.push({itemKey:"section-contacts",type:N}),u.push(...t.map((e=>({itemKey:`contact-${e.id.toString()}`,data:e,type:L})))),a&&s.length>0&&u.push({itemKey:"section-groupchats",type:O}),u.push(...s.map((e=>({itemKey:`groupchat-${e[0].id.toString()}-${e[1].map((e=>e.id.toString())).join("-")}`,data:e,type:k})))),a&&n.length>0&&u.push({itemKey:"section-starred",type:w}),u.push(...n.map((e=>({itemKey:`starred-${e.id.toString()}`,data:e,type:F})))),a&&r.length>0&&u.push({itemKey:"section-msg",type:D}),u.push(...r.map((e=>({itemKey:`msg-${e.id.toString()}`,data:e,type:B})))),a&&i.length>0&&u.push({itemKey:"section-msg",type:D}),u.push(...i.map((e=>({itemKey:`msg-${e.id.toString()}`,data:e,type:B})))),u}render(){var e;const{isSearching:t,chats:s}=this.props;let a;return a=t?E.default.t(43):E.default.t(5),(0,P.jsx)(I.default,{displayName:"Chatlist",ref:this.setRefUIE,uimState:I.default.State.PASSIVE,requestFocus:this.requestFocus,children:(0,P.jsx)(C.default,{handlers:{down:e=>this.handleNextChat(e,!0),j:e=>this.handleNextChat(e,!0),up:e=>this.handlePrevChat(e,!0),k:e=>this.handlePrevChat(e,!0),"/":e=>this.handleFocusSearch(e)},onFocus:this.handleFocusGain,onRef:this._setRefHotKeys,"data-tab":f.default.TAB_ORDERS.CHAT_LIST,children:(0,P.jsx)(v.default,{"aria-label":a,data:this.getData(),renderItem:this.renderItem,flatListController:this.props.flatListController,direction:"vertical",defaultItemHeight:this._getHeight(),onPointerEventsOff:this._handleListPointerEventsOff,onPointerEventsOn:this._handleListPointerEventsOn,ref:this.setRefList,role:"grid","aria-rowcount":null!==(e=null==s?void 0:s.length)&&void 0!==e?e:0})})})}_getActiveChat(){return u.default.toArray().find((e=>e.active))}_getGroupChatSubtitle(e){var t;const s=e[1],a=e[0].groupMetadata,i=(null!==(t=null==a?void 0:a.participants)&&void 0!==t?t:[]).map((e=>e.contact)),o=(0,r.default)(i,s),l=(0,n.default)(s,o).map((e=>e.formattedShortNameWithNonBreakingSpaces)).join(E.default.t(815)),d=y.Configuration.Search({terms:[this.props.searchQuery.trimmed]});return(0,P.jsx)(_.default,{text:l,formatters:d,titlify:!0,direction:"auto"})}}G.defaultProps={chats:[],groupChats:[]},G.displayName="Chatlist";const U=(0,b.default)((0,x.default)(G));t.default=class extends U{focusFirst(){return this.getComponent().focusFirst()}}},4699:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,i.useState)(!0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{setShowButterBar:t}),!e&&o.default.supportsFeature(o.default.F.MD_BACKEND)&&(0,l.jsx)(r.default,{})]})};var i=s(67294),n=a(s(85831)),r=a(s(12366)),o=a(s(12950)),l=s(85893)},13483:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=s(70359),l=i(s(8581)),d=s(47874),u=s(77512),c=i(s(78076)),h=i(s(75154)),f=i(s(91952)),p=i(s(9322)),m=i(s(17025)),_=i(s(88419)),g=s(86723),v=i(s(12950)),S=i(s(2408)),C=i(s(71681)),y=s(47941),E=i(s(4231)),b=i(s(80959)),T=i(s(3268)),M=i(s(2606)),x=i(s(3165)),I=i(s(37741)),P=i(s(79485)),A=i(s(22360)),N=i(s(64064)),O=i(s(2966)),w=i(s(69217)),D=a(s(49201)),j=i(s(82669)),R=s(85893);class L extends r.Component{constructor(){super(...arguments),this.handleWindowFocus=()=>{},this.handleMouseDown=()=>{},this.handleDrag=()=>{this.didDrag=!0},this.handleClickCapture=()=>{},this._handleNewChat=e=>{e.preventDefault(),f.default.openDrawerLeft((0,R.jsx)(T.default,{}))},this.handleProfile=()=>{const e=(0,g.getMaybeMeUser)(),t=A.default.assertGet(e),s=x.default.assertGet(e),a=m.default.assertGet(e);f.default.openDrawerLeft((0,R.jsx)(M.default,{status:t,profilePicThumb:s,contact:a,conn:p.default}))},this.handleUnmute=()=>{b.default.globalMute().unmute(),f.default.openToast((0,R.jsx)(D.default,{msg:S.default.t(943),id:(0,D.genId)()}))},this.onCatalogIcon=()=>{(0,u.openCatalogManagementFlow)(null,E.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_TOP_BAR)},this.onShopsIcon=()=>{f.default.openModal((0,R.jsx)(I.default,{}))},this.state={bizProfileLoaded:!1}}componentDidMount(){p.default.isSMB&&l.default.find((0,g.getMaybeMeUser)()).then((()=>{this.setState({bizProfileLoaded:!0})}))}render(){let e=null;this.props.mute.isMuted&&(e=(0,R.jsx)(y.MenuBarItem,{a8nText:"menu-bar-unmute",icon:(0,R.jsx)(O.default,{name:"dnd"}),title:S.default.t(942),onClick:this.handleUnmute},"btn-dnd"));let t,s=(0,R.jsx)("div",{className:c.default.listUser,children:(0,R.jsx)(_.default,{id:(0,g.getMaybeMeUser)(),size:40,onClick:this.handleProfile})});if(v.default.supportsFeature(v.default.F.MD_BACKEND)){if(this.state.bizProfileLoaded&&p.default.isSMB&&(0,o.getABPropConfigValue)("web_abprop_catalog_icon_on_top_bar")){const e=l.default.get((0,g.getMaybeMeUser)()),s=(0,d.hasShop)(e)?(0,R.jsx)(y.MenuBarItem,{a8nText:"menu-bar-shops",icon:(0,R.jsx)(O.default,{name:"shop-filled",directional:!0,className:c.default.shopsIcon}),title:S.default.t(2069),onClick:this.onShopsIcon}):(0,R.jsx)(y.MenuBarItem,{a8nText:"menu-bar-catalog",icon:(0,R.jsx)(O.default,{name:"catalog-filled",directional:!0}),title:S.default.t(2064),onClick:this.onCatalogIcon});t=(0,R.jsx)("div",{className:c.default.commerceIconContainer,children:s})}if(0===(0,o.getABPropConfigValue)("md_migration_experience")){const e=(0,R.jsx)("div",{className:c.default.betaIcon,children:(0,R.jsx)("b",{className:c.default.betaIconText,title:S.default.t(282),children:S.default.t(281)})});s=(0,R.jsxs)("div",{className:c.default.listUserBeta,children:[(0,R.jsx)(_.default,{id:(0,g.getMaybeMeUser)(),size:40,onClick:this.handleProfile}),e]})}}return(0,R.jsxs)("header",{className:(0,n.default)(c.default.header,{[c.default.withCommerceIcon]:null!=t}),onMouseDown:this.handleMouseDown,onClickCapture:this.handleClickCapture,children:[s,(0,R.jsx)("div",{className:c.default.listControls,children:(0,R.jsx)(y.MenuBar,{children:(0,R.jsxs)(j.default,{transitionName:"btn",children:[e,t,(0,R.jsx)(N.default,{}),(0,R.jsx)(y.MenuBarItem,{a8nText:"menu-bar-chat",icon:(0,R.jsx)(O.default,{name:"chat",directional:!0}),title:S.default.t(2068),onClick:this._handleNewChat}),(0,R.jsx)(y.MenuBarItem,{a8nText:"menu-bar-menu",icon:(0,R.jsx)(O.default,{name:"menu"}),title:S.default.t(1227),children:(0,R.jsx)(h.default,{settings:this.props.settings})})]})},"chatlist-header")})]})}}L.CONCERNS={mute:["isMuted"]},L.displayName="ChatlistHeader";var k=(0,w.default)((0,C.default)((0,P.default)(L,L.CONCERNS)));t.default=k},75154:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(97688));class n extends i.default{}t.default=n},97688:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(79563)),o=i(s(8581)),l=s(47874),d=s(77512),u=i(s(55602)),c=i(s(91952)),h=i(s(75940)),f=i(s(9322)),p=i(s(55454)),m=i(s(17025)),_=i(s(64800)),g=a(s(9492)),v=i(s(47452)),S=s(86723),C=s(78615),y=i(s(2408)),E=i(s(96516)),b=s(29931),T=s(36042),M=s(83680),x=i(s(55127)),I=i(s(4231)),P=i(s(45472)),A=i(s(52172)),N=i(s(2606)),O=i(s(3165)),w=s(68598),D=i(s(65565)),j=i(s(41253)),R=i(s(37741)),L=i(s(46707)),k=i(s(30118)),F=i(s(22360)),B=i(s(72787)),G=s(85893);class U extends n.Component{getElement(){return this._refDropdown}constructor(){super(...arguments),this.openTime=-1,this.handleCreateGroup=()=>{c.default.openDrawerLeft((0,G.jsx)(A.default,{})),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.NEW_GROUP)},this.handleCreateMessengerRoom=()=>{(0,S.shouldShowNUX)(p.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,S.shouldShowNUX)(p.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,S.shouldShowNUX)(p.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)?c.default.openModal((0,G.jsx)(x.default,{})):(0,M.openMessengerRoomUrl)(),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.CREATE_A_ROOM)},this.handleProfile=()=>{const e=(0,S.getMaybeMeUser)(),t=F.default.assertGet(e),s=O.default.assertGet(e),a=m.default.assertGet(e);c.default.openDrawerLeft((0,G.jsx)(N.default,{status:t,profilePicThumb:s,contact:a,conn:f.default}),void 0,void 0,void 0,w.FocusType.TABBABLE),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.PROFILE)},this.handleDisconnect=()=>{const e=P.default.some((e=>e.ack===p.default.ACK.CLOCK&&e.local&&e.isSentByMe));if((0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.LOG_OUT),!e)return B.default.logout();c.default.openModal((0,G.jsx)(h.default,{title:y.default.t(696),onOK:()=>B.default.logout(),okText:y.default.t(1214),onCancel:()=>c.default.closeModal(),cancelText:y.default.t(1912),children:y.default.t(1637)}))},this.handleArchived=()=>{c.default.openDrawerLeft((0,G.jsx)(r.default,{})),new I.default.ChatFolderOpen({folderType:"Archive"}).commit(),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.ARCHIVED)},this.handleSettings=()=>{c.default.openDrawerLeft((0,G.jsx)(j.default,{})),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.SETTINGS)},this.handleStarred=()=>{c.default.openDrawerLeft((0,G.jsx)(L.default,{starredMsgs:k.default})),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.STARRED)},this.handleLabel=()=>{c.default.openDrawerLeft((0,G.jsx)(E.default,{})),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.LABELS)},this.handleContactUsOpen=()=>{this.openTime=performance.now(),c.default.openModal((0,G.jsx)(_.default,{onCancel:this.handleContactUsCancel,onSend:this.handleContactUsSend}))},this.handleContactUsCancel=()=>{(0,T.logSessionEvent)(I.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION,this.openTime)},this.handleContactUsSend=e=>{(0,T.logSessionEvent)(I.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,this.openTime,e)},this.handleCatalog=()=>{this.isShopsEnabled()?(c.default.openModal((0,G.jsx)(h.default,{title:y.default.t(522),onOK:this.goToCommerceManager,okText:y.default.t(686),onCancel:()=>{c.default.closeModal(),(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CANCEL_IN_CATALOG_SETTING)},children:y.default.t(523)})),(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CATALOG_SETTING)):((0,d.openCatalogManagementFlow)(null,I.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS),(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.CATALOG))},this.handleShops=()=>{c.default.openModal((0,G.jsx)(R.default,{onViewShopClick:()=>{(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_VIEW_SHOPS_IN_SHOPS_SETTING)},onCommerceManagerClick:()=>{(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_COMMERCE_MANAGER_IN_SHOPS_SETTING)},onCancelClick:()=>{(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_CANCEL_IN_SHOPS_SETTING)}})),(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_SHOPS_SETTING)},this.goToCommerceManager=()=>{const e=o.default.get((0,S.getMaybeMeUser)());(0,l.goToCommerceManager)(e),(0,b.logShopsManagementEvent)(I.default.SHOPS_MANAGEMENT_ACTION.ACTION_CLICK_COMMERCE_MANAGER_IN_CATALOG_SETTING)},this.state={rememberMe:(0,S.getRememberMe)()}}componentDidMount(){(0,u.default)(I.default.WEBC_MENU_ITEM_LABEL.OPEN)}isShopsEnabled(){if(!f.default.isSMB||!D.default.shopsHeaderDropdownMenuItem)return!1;const e=o.default.get((0,S.getMaybeMeUser)());return(0,l.hasShop)(e)}getShopsItem(){return this.isShopsEnabled()?(0,G.jsx)(v.default,{a8n:"mi-shop menu-item",action:this.handleShops,children:y.default.t(892)}):null}getCatalogLabel(){return this.isShopsEnabled()?y.default.t(1089):y.default.t(1088)}render(){const e=(0,G.jsx)(v.default,{a8n:"mi-new-group menu-item",action:this.handleCreateGroup,children:y.default.t(2065)}),t=(0,G.jsx)(v.default,{a8n:"mi-create-messenger-room menu-item",action:this.handleCreateMessengerRoom,children:y.default.t(1259)}),s=(0,G.jsx)(v.default,{a8n:"mi-starred menu-item",action:this.handleStarred,children:y.default.t(1223)}),a=(0,C.canEditLabelAssociation)()&&(0,G.jsx)(v.default,{a8n:"mi-setting menu-item",action:this.handleLabel,children:y.default.t(1101)}),i=f.default.isSMB?(0,G.jsx)(v.default,{a8n:"mi-catalog menu-item",action:this.handleCatalog,children:this.getCatalogLabel()}):null,n=f.default.isSMB?(0,G.jsx)(v.default,{a8n:"mi-profile-status menu-item",action:this.handleProfile,children:y.default.t(1219)}):null;return(0,G.jsxs)(g.default,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",flipOnRTL:!0,dirX:g.DirX.LEFT,children:[e,t,n,this.getShopsItem(),i,(0,C.archiveV2Supported)()&&this.props.settings.showArchiveV2?null:(0,G.jsx)(v.default,{a8n:"mi-archived menu-item",action:this.handleArchived,children:y.default.t(1209)}),s,a,(0,G.jsx)(v.default,{a8n:"mi-setting menu-item",action:this.handleSettings,children:y.default.t(1222)}),null,(0,G.jsx)(v.default,{a8n:"mi-logout menu-item",action:this.handleDisconnect,children:y.default.t(1214)})]},"ChatlistHeader")}}t.default=U,U.displayName="ChatlistHeaderDropdown"},55602:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){new i.default.WebcMenu({webcMenuAction:i.default.WEBC_MENU_TYPE.THREADS_SCREEN_CLICK,webcMenuItemLabel:e}).commit()};var i=a(s(4231))},48392:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(82569)),r=i(s(35161)),o=i(s(23279)),l=i(s(94184)),d=s(55084),u=s(78285),c=s(67294),h=i(s(44966)),f=i(s(84758)),p=i(s(14966)),m=i(s(4699)),_=i(s(13483)),g=i(s(42620)),v=i(s(25142)),S=i(s(91952)),C=i(s(55454)),y=i(s(17025)),E=i(s(52384)),b=i(s(92329)),T=s(92231),M=a(s(13540)),x=s(62238),I=s(60651),P=i(s(19257)),A=i(s(67893)),N=i(s(40854)),O=i(s(47193)),w=i(s(86654)),D=s(86723),j=i(s(12950)),R=s(78615),L=i(s(39e3)),k=i(s(642)),F=i(s(2408)),B=i(s(59606)),G=s(50555),U=i(s(55325)),V=i(s(71681)),H=i(s(4231)),W=i(s(904)),Y=i(s(45472)),K=i(s(66329)),q=i(s(80959)),z=i(s(70422)),$=i(s(40630)),Q=i(s(77593)),X=i(s(23721)),Z=i(s(16967)),J=i(s(55865)),ee=i(s(46714)),te=i(s(79485)),se=i(s(2966)),ae=i(s(69217)),ie=i(s(63477)),ne=i(s(45285)),re=s(85893);const oe=450,le=75;class de extends c.Component{constructor(e){super(e),this._refPanel=null,this.flatListController=new A.default,this._batchState={},this.setRefSearch=e=>{this.refSearch=e},this._setRefInputHotkey=e=>{this._refInputHotkey=e},this._refChatlist=(0,c.createRef)(),this._smbFilterSession=new J.default,this._hasLabelEditGK=!1,this._refContainer=(0,c.createRef)(),this._debounceSetState=new u.ShiftTimer((()=>{this.setState(this._batchState),this._batchState={}})),this.debounceSetState=(e,t,s)=>{Object.assign(this._batchState,e),void 0===t?this._debounceSetState.onOrBeforeRepaint():void 0===s?this._debounceSetState.debounce(t):this._debounceSetState.debounceAndCap(t,s)},this._updateLabelFeatureFlagChange=()=>{!this._hasLabelEditGK&&(0,R.canEditLabelAssociation)()&&(this._hasLabelEditGK=!0,this.props.listeners.add(B.default,"bulk_msg_chat_label_change",(()=>{this.searchQuery&&!this.searchQuery.isEmptyQuery&&(this.ftsMsgs.updateFtsAfterMsgLabelUpdate(),this.handleSearch(this.searchQuery.trimmed,{label:this.searchQuery.filter.label,kind:this.searchQuery.filter.kind}))})),this.selectableState=new X.default(this.props.selectable||!1),this.props.listeners.add(this._multiSelection,"all",this._updateShowMultiselectBar),this.setState({chatlistKeyId:1}))},this._updateShowMultiselectBar=()=>{const{showMultiSelectBar:e}=this.state,t=this._multiSelection&&this._multiSelection.getSelected().length>0&&!this.props.hideMultiSelectBar;!1===e&&t&&this.setState({showMultiSelectBar:!0})},this._scrollChatListToTop=()=>{const e=this._refPanel;if(e){const t=e.scrollTop;0!==e.scrollTop&&(t<e.clientHeight?(0,ne.default)(e,"scroll",{duration:300,container:e,offset:-(e.scrollTop+e.getBoundingClientRect().top)}):e.scrollTop=0)}},this.getFilteredContacts=(e,t={},s=!1)=>{let a=(e||"").trim();if(!a&&this._isEmptyFilterQuery(t))return[];a=F.default.accentFold(a);const i=(0,z.default)(a);return y.default.getFilteredContacts().filter((function(e){if(!e.searchMatch(a,i,t.label))return!1;if(!s){const t=f.default.get(e.id);if(t&&t.shouldAppearInList)return!1}return!0}))},this._getFilteredMessages=(e={})=>{var t;if(this._isEmptyFilterQuery(e))return;if(!e.label)return;const s=(null===(t=B.default.get(e.label))||void 0===t?void 0:t.labelItemCollection.filter((e=>e.parentType===G.LabelItemParentType.Msg)).map((e=>e.parentId)))||[];Y.default.getMessagesById(s).then((e=>{this.setState({messages:e.messages})}))},this._getFilteredChats=(e,t={})=>{let s=(e||"").trim();if(s||!this._isEmptyFilterQuery(t)){s=F.default.accentFold(s);const e=(0,z.default)(s);return(0,R.canDisplayLabel)()?f.default.filter((a=>{const i=t.label&&a.contact.searchMatch(s,e,t.label),n=!s||a.contact.searchMatch(s,e),r=!t.kind&&!t.label||a.matchFilter(t);return i||n&&r})):f.default.filter((t=>t.contact.searchMatch(s,e)&&t.shouldAppearInList))}return f.default.filter((e=>!e.archive&&e.shouldAppearInList))},this.fullTextSearch=(e,t)=>{const s=e||this.searchQuery.query;(0,k.default)(s)||t&&t.label?(this.state.searching||this.debounceSetState({searching:!0}),this._fts()):this.isFTSSearching()?this._cancelSearch():this.ftsMsgs.reset()},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.isFTSSearching()||(0,k.default)(this.searchQuery.query||""))&&e.scrollTop+C.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this._mapGroupToContacts=(e,t)=>{const s=new Map;for(let a=0;a<e.length;a++){const i=e[a];i&&i.forEach((e=>{e&&(s.has(e)||s.set(e,[]),s.get(e).push(t[a]))}))}const a=[];return s.forEach(((e,t)=>{a.push([t,e])})),a.sort((function(e,t){return e[1].length===t[1].length?null!=e[0].t&&null!=t[0].t?t[0].t-e[0].t:null!=e[0].t?-1:1:t[1].length-e[1].length})),a.slice(0,10)},this.handleSearch=(e,t)=>{const s=(0,R.canDisplayLabel)()?t:{};if(!e&&this._isEmptyFilterQuery(s))return this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery({}),void this.handleStopSearch();e===this.searchQuery.query&&this._isEmptyFilterQuery(s)||(this.fullTextSearch(e,s),this._commonGroupSearch(),this._throttledFilteredChats(e,s),this._throttledFilteredContacts(e,s),this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery(s))},this._hasSearchText=()=>(0,R.canDisplayLabel)()?!!this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter):!!this.searchQuery.query,this.isFTSSearching=()=>{const e=this._batchState;return"searching"in e?e.searching:this.state.searching},this._cancelSearch=()=>{this._fts.cancel(),this._commonGroupSearch.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.reset(),this._ftsPromise&&this._ftsPromise.cancel(),this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this.setState({groupChats:[]}),this.isFTSSearching()&&this.debounceSetState({searching:!1},le)},this._cancelThrottled=()=>{this._throttledFilteredChats.cancel(),this._throttledFilteredContacts.cancel(),this._throttledOnScroll.cancel()},this.handleStopSearch=()=>new Promise((e=>{var t;this._isEmptyFilterQuery(this.searchQuery.filter)||(t=this._smbFilterSession.sessionId,new H.default.ChatFilterEvent({actionType:H.default.CHAT_FILTER_ACTION_TYPES.SEARCH_WITH_FILTER,filterType:H.default.CHAT_FILTER_TYPES.OTHER_LABELS,sessionId:t}).commit()),this._cancelSearch(),this.searchQuery.clear(),this._cancelThrottled(),null!=this.refSearch&&this.refSearch.reset(),this.setState({chats:this._getFilteredChats(),contacts:this.getFilteredContacts(),searching:!1},(()=>e()))})),this.handleFocusList=e=>{var t;e.repeat||this._refChatlist.current&&(this.refSearch&&!this.refSearch.cursorIsAtEnd()||(e.preventDefault(),N.default.shouldIndicateFocus(),null===(t=this._refChatlist.current)||void 0===t||t.focusFirst()))},this.handleOpenFirst=e=>{e.preventDefault();const t=this.searchQuery.query,s=this.searchQuery.filter,a=this._getFilteredChats(t,s)[0]||this.getFilteredContacts(t,s)[0];a&&(0,x.findChat)(a.id).then((e=>{this.handleStopSearch(),N.default.shouldIndicateFocus(),S.default.openChatFromUnread(e).then((t=>{t&&S.default.focusChatTextInput(e)}))}))},this.handleFocusSearch=()=>{S.default.existsDrawerLeft((e=>{e||(N.default.shouldIndicateFocus(),O.default.focus(this.refSearch))}))},this.indicateFocus=()=>{N.default.maybeIndicateFocus(this._refInputHotkey)},this.handleScroll=e=>{this._throttledOnScroll(e.target)},this.getEmptyChatlistState=(e,t,s,a)=>e&&e.length||t&&t.length||s&&s.length||a&&a.length?null:this.props.labelFilter?this.state.searching?(0,re.jsx)("span",{}):(0,re.jsx)(T.NoResultForLabel,{labelId:this.props.labelFilter}):this.searchQuery.query?this.state.searching?(0,re.jsx)(T.Searching,{}):(0,re.jsx)(T.Search,{}):f.default.some((e=>e.shouldAppearInList))?(0,re.jsx)(T.AllArchived,{}):(0,re.jsx)(T.ListChats,{}),this._setRefPanel=e=>{this._refPanel=e},this.handleCancelLabelSelection=()=>{this.setState({showMultiSelectBar:!1}),this._multiSelection&&this._multiSelection.unsetAll(),this.selectableState&&this.selectableState.setSelectable(!!this.props.selectable)},this.ftsMsgs=new w.default,this.selection=new Z.default([],(e=>e.id.toString())),this.searchQuery=new Q.default,this._multiSelection=this.props.multiSelection||new K.default([],(e=>e.id.toString())),this._fts=this.props.debounce((()=>{const e=this.searchQuery.trimmed;this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this.debounceSetState({searching:!0},le)})).then((()=>this.ftsMsgs.search({count:C.default.FTS_NUM_RESULTS,filter:this.searchQuery.filter,searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((e=>{e&&!e.canceled&&this.debounceSetState({searching:!1},le)})).catch((0,d.filteredCatch)(M.Unmount,(()=>{}))).catch((0,d.filteredCatch)(Promise.CancellationError,(()=>{}))).finally((()=>{this._ftsPromise=void 0})).catch((()=>{this.isFTSSearching()&&this.debounceSetState({searching:!1},le)}))}),C.default.FTS_TYPING_DELAY),this._throttledFilteredChats=this.props.throttle(((e,t)=>{const s=this._getFilteredChats(e,t);this.debounceSetState({chats:s},le,50)}),oe,{leading:!1,trailing:!0}),this._throttledFilteredContacts=this.props.throttle(((e,t)=>{const s=this.getFilteredContacts(e,t);this.debounceSetState({contacts:s},le,50)}),oe,{leading:!1,trailing:!0}),this._throttledOnScroll=this.props.throttle((e=>{this.shouldFTSSearch(e)&&this.fullTextSearch()}),100),this._commonGroupSearch=(0,o.default)((()=>{const e=this.searchQuery.trimmed;if(!e)return void this.setState({groupChats:[]});const t=this.getFilteredContacts(e,{},!0);if(0===t.length||t.length>5)return void this.setState({groupChats:[]});const s=(0,r.default)(t,(e=>(0,I.findCommonGroups)(e).then((()=>e.commonGroups)).catch((()=>{throw __LOG__(4,!0,new Error,!0)`get from participants table failed`,SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))));this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this._findCommonGroupsPromise=Promise.all(s).then((s=>{if(e===this.searchQuery.trimmed){const e=this._mapGroupToContacts(s,t);this.setState({groupChats:e})}})).catch((()=>{})).finally((()=>{this._findCommonGroupsPromise=null}))}),750);const{labelFilter:t}=this.props,s=this.props.labelFilter?{label:t}:void 0;this.state={searching:!!s,chats:this._getFilteredChats("",s),contacts:this.getFilteredContacts("",s),groupChats:[],showMultiSelectBar:!1,chatlistKeyId:0,filterPreset:s,textsize:b.default.get().textsize},this.searchQuery.updateLabelQuery(s),this._getFilteredMessages(s)}componentDidMount(){const{labelFilter:e,listeners:t}=this.props;e&&this.handleSearch("",{label:e}),this._updateLabelFeatureFlagChange(),t.add(j.default,j.default.FEATURE_CHANGE_EVENT,this._updateLabelFeatureFlagChange),this.props.listeners.add(f.default,"remove",(e=>{if(this.searchQuery.query){const t=(0,n.default)(this.state.chats,e);this.state.chats&&t.length!==this.state.chats.length&&this.debounceSetState({chats:t})}else this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()})})),this.props.listeners.add(y.default,"remove",(e=>{if(this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter)){const t=(0,n.default)(this.state.contacts,e);this.state.contacts&&t.length!==this.state.contacts.length&&this.debounceSetState({contacts:t})}else this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()})})),this.props.listeners.add(f.default,"sort change:archive",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(y.default,"sort",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()}))})),this.props.listeners.add(this.ftsMsgs,"bulk_remove reset",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(S.default,"focus_chat_search",this.handleFocusSearch),this.props.listeners.add(S.default,"textsize_change",(e=>{this.debounceSetState({textsize:e})})),this.props.listeners.add(Y.default,C.default.NEW_MSG_SENT,(()=>{this._hasSearchText()||!this._isEmptyFilterQuery(this.searchQuery.filter)?this.handleStopSearch().then((()=>this._scrollChatListToTop())):this._scrollChatListToTop()}))}getClientWidth(){var e;return null===(e=this._refContainer.current)||void 0===e?void 0:e.clientWidth}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}componentWillUnmount(){this._cancelSearch(),this._cancelThrottled(),this._debounceSetState.cancel()}_isEmptyFilterQuery(e){return!e||!(e.label||e.kind)}_showUnread(){}_showArchivedPanel(){return(0,R.archiveV2Supported)()&&this.props.settings.showArchiveV2&&!this.state.showMultiSelectBar&&this.searchQuery.isEmptyQuery&&this.state.chats&&this.state.chats.length>0&&f.default.some((e=>e.archive))}render(){const{chats:e,contacts:t,groupChats:s,filterPreset:a,messages:i}=this.state,n=this.ftsMsgs.toArray();let r=this.getEmptyChatlistState(e,t,n,i);null==r&&(r=(0,re.jsx)(p.default,{ref:this._refChatlist,flatListController:this.flatListController,chats:e,contacts:t||[],messages:i||[],filterPreset:a,groupChats:s,isSearching:!!this._hasSearchText(),searchQuery:this.searchQuery,ftsResult:n,selection:this.selection,onFocusSearch:this.handleFocusSearch,multiSelection:this._multiSelection,selectableState:this.selectableState},this.state.chatlistKeyId));const o={down:this.handleFocusList},d=this.state.searching&&this.props.labelFilter||this.state.searching&&this.ftsMsgs.length?(0,re.jsx)("div",{className:g.default.spinner,children:(0,re.jsx)(ee.default,{stroke:6,size:24})},"spinner"):null;let u;const c=C.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));c&&(u=c.classname);const f=(0,l.default)(g.default.chatListPanel,u),S=this.ftsMsgs.hasMoreMsgs&&n.length||this._showUnread()?this.handleScroll:void 0;let y,b,T,M,x;if(this.state.showMultiSelectBar?y=(0,re.jsx)(ie.default,{displayName:"MultiSelect",escapable:!0,requestDismiss:this.handleCancelLabelSelection,children:(0,re.jsx)(W.default,{theme:"chatlist-panel",selectedModels:this._multiSelection,labelEditEnabled:!0,iconColor:"#8d9194",onCancel:this.handleCancelLabelSelection})},"multiSelectBar"):T=(0,re.jsx)(L.default,{handlers:o,onFocus:this.indicateFocus,onRef:this._setRefInputHotkey,className:g.default.panelSearch,children:(0,re.jsx)(U.default,{ref:this.setRefSearch,onSearch:this.handleSearch,onEnter:this.handleOpenFirst,loading:this.state.searching,smbFilterSession:this._smbFilterSession,listFilterEnabled:!0})},"ListSearchHotKey"),this.props.labelFilter||(b=(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(_.default,{mute:q.default.globalMute(),settings:this.props.settings}),(0,re.jsx)(m.default,{}),T,y]})),this._showArchivedPanel()&&(M=(0,re.jsx)(h.default,{})),j.default.supportsFeature(j.default.F.MD_BACKEND)&&this._hasSearchText()){const e=v.default.relativeDateStr((0,D.getHistorySyncEarliestDate)());x=(0,re.jsx)(E.default,{icon:(0,re.jsx)(se.default,{name:"content-search"}),theme:"list",secondary:F.default.t(734,{date:e}),children:F.default.t(918)})}return(0,re.jsxs)("div",{id:"side",className:f,ref:this._refContainer,children:[b,(0,re.jsxs)(P.default,{flatListControllers:[this.flatListController],onRef:this._setRefPanel,className:g.default.panelBody,onScroll:S,id:"pane-side",children:[M,r,d,x]})]})}}de.CONCERNS={settings:["showArchiveV2"]},de.displayName="ChatlistPanel";const ue=(0,$.default)((0,ae.default)((0,V.default)((0,te.default)(de,de.CONCERNS))));t.default=class extends ue{getClientWidth(){return this.getComponent().getClientWidth()}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},46806:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=a(s(33287)),l=i(s(39709)),d=i(s(71681)),u=s(85893);class c extends r.Component{constructor(e){super(e),this._handleSelectableChange=()=>{this.forceUpdate()},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this._handleSelect=e=>{e&&e.stopPropagation();const{onSelect:t,model:s}=this.props,{selected:a}=this.state;let i;a?(this.setState({selected:!1,partialSelected:!1}),i=!1):i=!0,t&&t(s,i,!1)};const{multiSelection:t,initialSelection:s,model:a}=this.props;let i=!1,n=!1;switch(s){case 0:i=!1,n=!1;break;case 1:i=!0,n=!1;break;case 2:i=!0,n=!0;break;default:i=t.isSelected(a),n=!1}this.state={selected:i,partialSelected:n,modelId:a.id.toString()}}componentDidMount(){this.props.listeners.add(this.props.multiSelection,this.props.model.id.toString(),this._handleSelectChange),this.props.selectableState&&this.props.listeners.add(this.props.selectableState,"all",this._handleSelectableChange)}componentDidUpdate(e){const{model:t,multiSelection:s,listeners:a}=e,i=t.id.toString(),n=this.props.model.id.toString();s&&i!==n&&(a.remove(s,i,this._handleSelectChange),a.add(s,n,this._handleSelectChange))}static getDerivedStateFromProps(e,t){const{modelId:s}=t,{multiSelection:a,model:i}=e,n=i.id.toString();return a&&s!==n?{modelId:n,selected:a.isSelected(i)}:null}render(){const{theme:e,selectableState:t,children:s}=this.props,a=(0,n.default)(l.default.checkboxChatControl,{[l.default.labelSelection]:"label-selection"===this.props.theme}),i=t&&t.isSelectable,d={};if(i&&e&&Object.assign(d,{theme:e}),i&&Object.assign(d,{noContext:!0}),null==s)return null;const c=r.Children.toArray(s)[0],h="label-selection"===e?this._handleSelect:null;return(0,u.jsxs)("div",{className:l.default.checkboxChatWrapper,onClick:h,children:[i&&(0,u.jsx)("div",{className:a,onClick:this._handleSelect,children:(0,u.jsx)(o.default,{onChange:this._handleSelect,checked:this.state.selected,theme:this.state.selected&&this.state.partialSelected?o.CHECKBOX_THEME.PARTIAL:void 0})}),(0,r.cloneElement)(c,d)]})}}c.displayName="CheckboxWrapper";var h=(0,d.default)(c);t.default=h},97310:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=s(67294),o=a(s(70521)),l=i(s(51322)),d=i(s(71681)),u=i(s(82669)),c=s(85893);class h extends r.Component{constructor(e){super(e),this._refBottomDiv=(0,r.createRef)(),this._renderPills=e=>{const{useShortName:t,isDisabled:s,onDelete:a}=this.props;if(!e.length)return null;return e.map((e=>{const i=s&&s(e.id)?null:{onDelete:a};return(0,r.createElement)(o.default,(0,n.default)((0,n.default)({contact:e,useShortName:t},i),{},{type:o.Type.SMALL,key:e.id.toString(),theme:"list-names",waitIdle:!0}))}))},this.props.listeners.add(this.props.selections,"all",((e,t)=>{this.forceUpdate((()=>{t&&this._scrollLastContactIntoView()}))}))}componentDidMount(){this.forceUpdate()}_scrollLastContactIntoView(){this._refBottomDiv.current instanceof HTMLDivElement&&this._refBottomDiv.current.scrollIntoView({behavior:"smooth"})}render(){return(0,c.jsxs)(u.default,{transitionName:"slide-up-down-footer",className:l.default.selectedListContainer,children:[this._renderPills(this.props.selections.getSelected()),(0,c.jsx)("div",{className:l.default.bottomDiv,ref:this._refBottomDiv})]})}}h.displayName="ContactSelectionPill";var f=(0,d.default)(h);t.default=f},55325:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(7900)),r=s(67294),o=a(s(76610)),l=a(s(55454)),d=a(s(47452)),u=a(s(96962)),c=a(s(40854)),h=s(78615),f=a(s(2408)),p=a(s(59606)),m=a(s(84498)),_=a(s(76414)),g=a(s(71681)),v=a(s(4231)),S=a(s(45472)),C=a(s(46714)),y=a(s(2966)),E=a(s(69217)),b=a(s(63477)),T=a(s(68062)),M=a(s(82669)),x=s(85893);const I=()=>{};class P extends r.Component{constructor(...e){super(...e),this.state={searchText:"",searchLabel:null,searchKind:null,isSearching:!1,contextMenu:null},this._emojiInputComponent=(0,u.default)(),this.refInput=(0,r.createRef)(),this.refContainer=(0,r.createRef)(),this._disableOnBlur=!1,this.handleBlur=()=>{this._disableOnBlur||this.props.setTimeout((()=>{this.state.searchText||this.state.searchLabel||this.state.searchKind||this.handleCancel()}),0)},this._handleChange=e=>{this.setState({searchText:e},(()=>{this.props.onSearch(e,{label:this.state.searchLabel,kind:this.state.searchKind})}))},this._renderSmbSearchKindDropDownItem=(e,t,s)=>{const a=`chat_filter_${e}`;return(0,x.jsx)(d.default,{a8n:a,action:this._updateSearchFilter.bind(this,{kind:e}),children:(0,x.jsxs)("div",{className:_.default.kind,children:[(0,x.jsx)(y.default,{name:t}),(0,x.jsx)("div",{className:_.default.kindName,children:s})]})},a)},this._renderMsgTypeFilter=()=>"chat-msg-search"===this.props.type?[]:[(0,x.jsx)("div",{className:_.default.filterTitle,children:f.default.t(1922)},"chat_filter_kind_header"),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.UNREAD,"search-unread",f.default.t(1633)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.GROUP,"group",f.default.t(2038)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.BROADCAST,"search-broadcasts",f.default.t(1632))],this._renderFilterLabels=()=>{const e=p.default.toArray().reduce(((e,t)=>t.name&&t.count&&0!==t.count?[...e,(0,x.jsx)(d.default,{a8n:`label_item_${t.id}`,action:this._updateSearchFilter.bind(this,{label:t.id}),children:(0,x.jsx)("button",{className:_.default.labels,children:(0,x.jsx)(m.default,{labels:[t.id],showName:!0,theme:"label-filter"})})},`label_item_${t.id}`)]:e),[]);if(e.length>0){return[(0,x.jsx)("div",{className:_.default.filterTitle,children:f.default.t(1635)},"chat_filter_label_header"),...e]}return[]},this._renderFilterSelectorMenu=()=>[...this._renderMsgTypeFilter(),...this._renderFilterLabels()],this.handleCancel=()=>{const e=this.refInput&&this.refInput.current;e&&!this.state.contextMenu&&(e.reset(),e.blur(),this.setState({searchLabel:null,searchKind:null,searchText:"",isSearching:!1}),this.props.onSearch("",void 0))},this.handleReset=e=>{e.stopPropagation(),this.focus();const t=this.refInput.current;t&&(t.reset(),this.setState({searchLabel:null,searchKind:null}),this.props.onSearch("",void 0))},this._handleSearchButtonClick=()=>{this.focus()},this._handleSearchOn=()=>{this.setState({isSearching:!0}),this.props.setTimeout(this.focus,0)},this.focus=()=>{(0,n.default)(this.refInput.current,"this.refInput.current").focus()},this._showFilterSelector=e=>{const{smbFilterSession:t}=this.props;var s;t&&(s=t.newSessionId(),new v.default.ChatFilterEvent({actionType:v.default.CHAT_FILTER_ACTION_TYPES.OPEN,sessionId:s}).commit()),e.stopPropagation(),this.setState({contextMenu:{menu:this._renderFilterSelectorMenu(),anchor:e.target}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._updateSearchFilter=e=>{const{smbFilterSession:t}=this.props;this.state.contextMenu&&this.closeContextMenu(),this.setState({searchLabel:e.label,searchKind:e.kind}),t&&function(e,t){new v.default.ChatFilterEvent({actionType:v.default.CHAT_FILTER_ACTION_TYPES.SELECT_FILTER,filterType:N(t),sessionId:e}).commit()}(t.sessionId,e),this.props.onSearch("",e)},this._labelSelectorMouseEnter=()=>{(0,h.canDisplayLabel)()&&(this._disableOnBlur=!0)},this._labelSelectorMouseLeave=()=>{this._disableOnBlur=!1},this.handleContextClose=()=>{this.setState({contextMenu:null})},this._constructSearchPlaceholder=e=>(0,x.jsx)("div",{"data-a8n":o.default.key("input-placeholder"),className:_.default.labelSearchPlaceholder,children:e})}componentWillUnmount(){this.handleCancel()}componentDidMount(){this._checkIfActive(),this.props.listeners.add(S.default,l.default.NEW_MSG_SENT,(()=>{(this.state.searchKind||this.state.searchLabel)&&this.handleCancel()}))}componentDidUpdate(){this._checkIfActive()}indicateFocus(){c.default.shouldIndicateFocus(),c.default.maybeIndicateFocus(this.refContainer.current)}_checkIfActive(){if(!this.state.isSearching||this.state.searchText||this.state.searchLabel||this.state.searchKind)return;const e=this.refContainer&&this.refContainer.current;e&&e.contains(document.activeElement)||this.handleCancel()}cursorIsAtEnd(){return(0,n.default)(this.refInput.current,"this.refInput.current").cursorIsAtEnd()}select(){(0,n.default)(this.refInput.current,"this.refInput.current").select()}reset(){const e=this.refInput.current;e&&e.reset()}render(){const{loading:e,placeholder:t,spellCheck:s,listFilterEnabled:a}=this.props,{isSearching:n,searchText:r,searchLabel:d,searchKind:u}=this.state;let c,m=null;n&&(e?m=(0,x.jsx)("div",{className:_.default.iconSpinner,onClick:this.handleReset,children:(0,x.jsx)(C.default,{size:20,stroke:5,color:"highlight"})},"icon-clear-search"):r.length||d||u?m=(0,x.jsx)("button",{className:_.default.iconCloseSearch,onClick:this.handleReset,children:(0,x.jsx)(y.default,{name:"x-alt"})},"icon-clear-search"):(0,h.canDisplayLabel)()&&a&&(m=(0,x.jsx)("button",{className:_.default.iconLabelSelect,onClick:this._showFilterSelector,children:(0,x.jsx)(y.default,{name:"filter"})},"icon-select-label"))),n&&(c=(0,x.jsx)(b.default,{displayName:"ListSearch",escapable:!0,requestDismiss:this.handleCancel,requestFocus:this.focus,requestRecentFocusOnUnmount:!1}));const g=t||f.default.t(1576),v=n?this.handleCancel:this._handleSearchButtonClick,S=(0,i.default)(_.default.listSearch,{[_.default.active]:n||d||u});let E,P;this.state.contextMenu&&(E=(0,x.jsx)(b.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.handleContextClose,requestRecentFocusOnUnmount:!1,children:(0,x.jsx)(T.default,{contextMenu:this.state.contextMenu})})),!r&&(0,h.canDisplayLabel)()&&(d?P=this._constructSearchPlaceholder(f.default.t(1100,{labelName:p.default.assertGet(d).name})):u===l.default.SMB_SEARCH_FILTERS.GROUP?P=this._constructSearchPlaceholder(f.default.t(1634)):u===l.default.SMB_SEARCH_FILTERS.UNREAD?P=this._constructSearchPlaceholder(f.default.t(1636)):u===l.default.SMB_SEARCH_FILTERS.BROADCAST&&(P=this._constructSearchPlaceholder(f.default.t(1631))));const A=this._emojiInputComponent;return(0,x.jsxs)("div",{ref:this.refContainer,onMouseEnter:this._labelSelectorMouseEnter,onMouseLeave:this._labelSelectorMouseLeave,className:S,children:[(0,x.jsxs)("button",{"data-a8n":o.default.key("icon-search-morph"),className:_.default.iconSearchMorph,onMouseDown:v,children:[(0,x.jsx)("div",{className:(0,i.default)(_.default.iconMorph,_.default.iconMorphBack),children:(0,x.jsx)(y.default,{name:"back"})}),(0,x.jsx)("div",{className:(0,i.default)(_.default.iconMorph,_.default.iconMorphSearch),children:(0,x.jsx)(y.default,{name:"search"})})]}),(0,x.jsxs)(M.default,{transitionName:"pop",children:[m,E]}),(0,x.jsx)("div",{"data-a8n":o.default.key("input-placeholder"),className:_.default.inputPlaceholder,children:r?null:g}),P,(0,x.jsx)("label",{className:_.default.contInputSearch,children:(0,x.jsx)(A,{a8n:"chat-list-search",ref:this.refInput,theme:"list-search",tabOrder:l.default.TAB_ORDERS.CHAT_LIST_SEARCH,spellCheck:s,onBlur:this.handleBlur,onFocus:n?I:this._handleSearchOn,onChange:n?this._handleChange:I,onEnter:this.props.onEnter})}),c]})}}P.displayName="ListSearch";const A=(0,E.default)((0,g.default)(P));function N(e){switch(e.kind){case l.default.SMB_SEARCH_FILTERS.UNREAD:return v.default.CHAT_FILTER_TYPES.UNREAD;case l.default.SMB_SEARCH_FILTERS.GROUP:return v.default.CHAT_FILTER_TYPES.GROUP;case l.default.SMB_SEARCH_FILTERS.BROADCAST:return v.default.CHAT_FILTER_TYPES.BROADCAST_LIST;default:return v.default.CHAT_FILTER_TYPES.OTHER_LABELS}}t.default=class extends A{focus(){this.getComponent().focus()}cursorIsAtEnd(){return this.getComponent().cursorIsAtEnd()}reset(){this.getComponent().reset()}select(){this.getComponent().select()}}},77593:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SEARCH_EVENT=void 0;var i=a(s(39693)),n=a(s(44908)),r=a(s(95863));const o="SEARCH_EVENT";t.SEARCH_EVENT=o;class l extends r.default{constructor(...e){super(...e),this.query="",this.filter={}}get trimmed(){return this.query.trim()}get highlighted(){const e=this.trimmed.toLowerCase().split(" ");return(0,n.default)((0,i.default)(e))}get _isEmptySearchTerm(){return""===this.trimmed||!this.trimmed}get isEmptyQuery(){return this._isEmptySearchTerm&&!this.filter.kind&&!this.filter.label}updateQuery(e){const t=this.query;this.query=e,e.trim()!==t&&this.trigger(o)}updateLabelQuery(e){this.filter=e||{}}clear(){this.updateQuery("")}}t.default=l},80423:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleLabel=function({children:e}){return(0,a.jsx)("span",{"aria-label":e})};var a=s(85893)},29100:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(55084),r=i(s(7900)),o=s(67294),l=s(6467),d=i(s(38606)),u=i(s(91952)),c=i(s(75940)),h=i(s(55454)),f=i(s(46079)),p=i(s(39746)),m=s(54647),_=a(s(13540)),g=s(86723),v=i(s(12950)),S=s(78615),C=i(s(34523)),y=i(s(52087)),E=i(s(2408)),b=i(s(71681)),T=i(s(70662)),M=i(s(17008)),x=i(s(36334)),I=i(s(92915)),P=s(88300),A=i(s(56837)),N=i(s(65565)),O=s(56690),w=s(3242),D=s(97504),j=a(s(49201)),R=s(74109),L=i(s(865)),k=s(85893);function F(e){switch(e){case 1:return E.default.t(939);case 8:return E.default.t(941);case 24:return E.default.t(938);case 168:return E.default.t(940);default:return __LOG__(2)`DoNotDisturbSettings:globalMuteDurationLabel non standard global mute duration:${e}`,E.default.t(937)}}class B extends o.PureComponent{constructor(...e){super(...e),this._onAttachProduct=({product:e,onSend:t})=>{u.default.openModal((0,k.jsx)(A.default,{product:e,onSend:t}),{transition:"modal-flow",uim:this.props.uim})},this._onProductImageViewer=(e,t)=>{u.default.openModalMedia((0,k.jsx)(I.default,{activeProductImage:e.activeProductImage,productImageCollection:e.productImageCollection,getZoomNode:e.getZoomNode,product:e.product,sessionId:t}),{transition:"media-viewer",uim:this.props.uim})},this.openGroupV4InviteRequestFlow=(e,t,s,a)=>{u.default.openModal((0,k.jsx)(C.default,{participantNeedInvite:e,groupGid:t,subject:s,groupDesc:a}))},this.onToggleMute=(e,t)=>{if(t){const t=E.default.t(1292,{name:e.title()});u.default.openModal((0,k.jsx)(x.default,{title:t,mute:e.mute,onMute:t=>{e.pendingAction++,e.mute.mute(t,!0).finally((()=>{e.pendingAction--}))}}),{transition:"modal",uim:this.props.uim})}else e.pendingAction++,e.mute.unmute(!0).finally((()=>{e.pendingAction--}))},this._onToggleMuteAll=(e,t)=>{t?u.default.openModal((0,k.jsx)(x.default,{mute:e,title:E.default.t(1705),onMute:(t,s)=>{e.mute(t),u.default.openToast((0,k.jsx)(j.default,{msg:F(s),id:(0,j.genId)()}))},muteAll:!0}),{transition:"modal",uim:this.props.uim}):u.default.openModal((0,k.jsx)(c.default,{onOK:()=>{e.unmute(),u.default.closeModal(),u.default.openToast((0,k.jsx)(j.default,{msg:E.default.t(943),id:(0,j.genId)()}))},okText:E.default.t(108),onCancel:()=>u.default.closeModal(),cancelText:E.default.t(1912),children:E.default.t(706)}))},this.onDeleteOrExit=e=>{var t;const s=t=>{e.pendingAction++,t.finally((()=>{e.pendingAction--}))},a=e.isGroup&&e.isReadOnly||e.isUser||e.isBroadcast,i=()=>u.default.openModal((0,k.jsx)(p.default,{chat:e,onDeleteOrExit:s,isDelete:a}),{transition:"modal",uim:this.props.uim}),n=null!==(t=(0,r.default)(T.default,"localStorage").getItem(h.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";v.default.supportsFeature(v.default.F.MD_BACKEND)&&a&&"true"===n?u.default.openModal((0,k.jsx)(c.default,{title:E.default.t(2052),onOK:()=>{(0,r.default)(T.default,"localStorage").setItem(h.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),i()},okText:E.default.t(1931),onCancel:()=>u.default.closeModal(),children:(0,k.jsx)(D.TextDiv,{theme:"muted",children:E.default.t(2051)})})):i()},this.onPin=(e,t)=>{v.default.supportsFeature(v.default.F.MD_BACKEND)&&!N.default.syncdPinChatEnabled?u.default.openModal((0,k.jsx)(c.default,{title:E.default.t(2062),onOK:()=>{u.default.closeModal()},okText:E.default.t(1923),children:E.default.t(2061)})):(e.pendingAction++,(0,w.setPin)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--})))},this.onClear=e=>{var t;const s=()=>u.default.openModal((0,k.jsx)(d.default,{chat:e}),{transition:"modal",uim:this.props.uim}),a=null!==(t=(0,r.default)(T.default,"localStorage").getItem(h.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";v.default.supportsFeature(v.default.F.MD_BACKEND)&&!(0,S.clearOrDeleteChatSyncEnabled)()&&"true"===a?u.default.openModal((0,k.jsx)(c.default,{title:E.default.t(2052),onOK:()=>{(0,r.default)(T.default,"localStorage").setItem(h.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),s()},okText:E.default.t(1931),onCancel:()=>u.default.closeModal(),children:(0,k.jsx)(D.TextDiv,{theme:"muted",children:E.default.t(2051)})})):s()},this.onArchive=(e,t)=>{e.pendingAction++,(0,O.setArchive)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--}))},this.onMarkUnread=(e,t)=>{e.pendingAction++,(0,R.markUnread)(e,t).finally((()=>{e.pendingAction--}))},this._onSendStarMsgs=(e,t,s,a="LEFT")=>{if(!t)return Promise.reject(new _.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new _.ActionError);const i=s||(0,l.genId)(),r=t.length,o={count:r,_plural:r},d=new l.ActionType(E.default.t(174,o)),c=e.sendStarMsgs(t,!0).then((()=>new l.ActionType(E.default.t(173,o),{actionText:E.default.t(228),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,i,a)}))).catch((0,n.filteredCatch)(m.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new l.ActionType(E.default.t(171,o)):new l.ActionType(E.default.t(172,o)):void 0))).catch((()=>(__LOG__(3)`chatAction:sendStarMsgs dropped`,new l.ActionType(E.default.t(172,o),{actionText:E.default.t(224),actionHandler:this._onSendStarMsgs.bind(this,e,t,i,a)}))));return u.default.openToast((0,k.jsx)(l.ActionToast,{id:i,toastPosition:a,initialAction:d,pendingAction:c})),c},this._onSendUnstarMsgs=(e,t,s,a="LEFT")=>{if(!t)return Promise.reject(new _.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new _.ActionError);const i=s||(0,l.genId)(),r=t.length,o={count:r,_plural:r},d=new l.ActionType(E.default.t(180,o)),c=e.sendStarMsgs(t,!1).then((()=>new l.ActionType(E.default.t(178,o),{actionText:E.default.t(228),actionHandler:this._onSendStarMsgs.bind(this,e,t,i,a)}))).catch((0,n.filteredCatch)(m.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new l.ActionType(E.default.t(176,o)):new l.ActionType(E.default.t(177,o)):void 0))).catch((()=>(__LOG__(3)`chatAction:sendUnstarMsgs dropped`,new l.ActionType(E.default.t(177,o),{actionText:E.default.t(224),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,i,a)}))));return u.default.openToast((0,k.jsx)(l.ActionToast,{id:i,toastPosition:a,initialAction:d,pendingAction:c})),c},this._onSendDeleteMsgs=(e,t,s,a,i="LEFT")=>{if(!t)return Promise.reject(new _.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new _.ActionError);const n=t.length,r=a||(0,l.genId)();let o={count:n,_plural:n};const d=new l.ActionType(E.default.t(170,o)),c=e.sendDeleteMsgs(t,s).then((e=>{if(e===n)return new l.ActionType(E.default.t(169,o));{const t=n-e;return o={count:t,_plural:t},new l.ActionType(E.default.t(168,o))}})).catch((()=>(__LOG__(3)`chatAction:sendDeleteMsgs dropped`,new l.ActionType(E.default.t(168,o),{actionText:E.default.t(224),actionHandler:this._onSendDeleteMsgs.bind(this,e,t,!1,r,i)}))));return u.default.openToast((0,k.jsx)(l.ActionToast,{id:r,toastPosition:i,initialAction:d,pendingAction:c})),c},this._onSendRevokeMsgs=(e,t,s,a,i="LEFT")=>{let n=a;if(!t)return Promise.reject(new _.ActionError);const[r,o]=t.reduce(((e,t)=>{const[s,a]=[t.canRevoke(),t.type!==h.default.MSG_TYPE.GROUPS_V4_INVITE||t.isGroupsV4InviteExpired?null:t];return[e[0]||!s,e[1]||a]}),[!1,null]);if(r)return Promise.reject(new _.ActionError);o&&this._handleGroupInviteMsgRevoke(e,o);const d=t.length;n=n||(0,l.genId)();const c={count:d,_plural:d},f=new l.ActionType(E.default.t(170,c)),p=e.sendRevokeMsgs(t,s).then((e=>{const t=e.filter((e=>e!==P.SendMsgResult.OK)).length;if(t>0)throw new Error(`${t} / ${e.length} dropped`);return new l.ActionType(E.default.t(169,c))})).catch((()=>(__LOG__(3)`chatAction:sendRevokeMsgs fail`,e.isEphemeralSettingOn()?new l.ActionType(E.default.t(167,c)):new l.ActionType(E.default.t(168,c)))));return u.default.openToast((0,k.jsx)(l.ActionToast,{id:n,toastPosition:i,initialAction:f,pendingAction:p})),p},this._handleGroupInviteMsgRevoke=(e,t)=>{const s=t.inviteGrp,a=(0,g.getMaybeMeUser)().toString();L.default.revokeGroupV4Invite([t.to.toString()],s,a)},this._handleShowMerchantDetailsEntityTypePopup=(e,t)=>{u.default.openModal((0,k.jsx)(M.default,{legalEntityDetails:e,onSave:t}),{transition:"modal",uim:this.props.uim})},this._handleShowCountrySelector=(e,t,s)=>{u.default.openModal((0,k.jsx)(f.default,{title:e,countryCode:t,onSave:s}),{transition:"modal",uim:this.props.uim})}}componentDidMount(){this.props.listeners.add(u.default,"mute_all",this._onToggleMuteAll),this.props.listeners.add(u.default,"mute_chat",this.onToggleMute),this.props.listeners.add(u.default,"delete_or_exit_chat",this.onDeleteOrExit),this.props.listeners.add(u.default,"archive_chat",this.onArchive),this.props.listeners.add(u.default,"clear_chat",this.onClear),this.props.listeners.add(u.default,"mark_chat_unread",this.onMarkUnread),this.props.listeners.add(u.default,"pin_chat",this.onPin),this.props.listeners.add(u.default,"send_star_msgs",this._onSendStarMsgs),this.props.listeners.add(u.default,"send_unstar_msgs",this._onSendUnstarMsgs),this.props.listeners.add(u.default,"send_delete_msgs",this._onSendDeleteMsgs),this.props.listeners.add(u.default,"send_revoke_msgs",this._onSendRevokeMsgs),this.props.listeners.add(u.default,"product_image_viewer_modal",this._onProductImageViewer),this.props.listeners.add(u.default,"attach_product",this._onAttachProduct),this.props.listeners.add(u.default,"open_group_v4_invite_request_flow",this.openGroupV4InviteRequestFlow),this.props.listeners.add(u.default,"show_merchant_details_entity_type_popup",this._handleShowMerchantDetailsEntityTypePopup),this.props.listeners.add(u.default,"show_country_selector_popup",this._handleShowCountrySelector)}render(){return null}}B.displayName="ActionListener";var G=(0,y.default)((0,b.default)(B));t.default=G},181:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(8139),n=s(55084),r=a(s(41143)),o=s(67294),l=a(s(91952)),d=s(27241),u=a(s(88155)),c=a(s(47822)),h=a(s(45285)),f=s(85893);const p={duration:300,easing:[.1,.82,.25,1]};class m extends o.Component{constructor(...e){super(...e),this.containerHeight=0,this._childAnimations=[],this.didCancel=!1,this._unmounting=!1,this.state={children:this.props.children},this._refChildren=new Map,this._setRefChild=(e,t)=>{t?this._refChildren.set(e,t):this._refChildren.delete(e)},this._setChildRefCache=new c.default(this._setRefChild),this._heightCallbackCache=new Map}componentWillUnmount(){this._unmounting=!0}_getHeightChange(e,t){return e.reduce(((e,s)=>{if(s<t)return e;const a=this._refChildren.get(`${s}`);return a?e+a.clientHeight:e}),0)}_animateElement(e,t,s,a){this._childAnimations[e]&&(this.didCancel=!0,this._childAnimations[e].cancel());const r=s>0?[0,s]:[-s,0];return this._childAnimations[e]=(this._childAnimations[e]||Promise.resolve()).then((()=>(0,h.default)(t,{translateY:r},p))).then((()=>(0,i.delayMs)(100))).cancellable().then((()=>(s<0&&(a.includes(e)?t.style.opacity="0":t.style.transform=""),e))).catch((0,n.filteredCatch)(Promise.CancellationError,(()=>((0,h.default)(t,"stop",!0),t.style.transform="",!1)))).finally((t=>{if(!this.didCancel)return delete this._childAnimations[e],l.default.setUiBusy(!1,"animation_group"),t;this.didCancel=!1})),this._childAnimations[e]}_transitionAffected(e,t){if(!e)return Promise.resolve(new Set);const s=[],[a]=e.slice(-1);for(let i=0;i<=a;++i){const a=this._refChildren.get(`${i}`);a&&s.push(this._animateElement(i,a,(t?1:-1)*this._getHeightChange(e,i),e))}return Promise.all(s).then((e=>new Set(e.filter((e=>!1!==e)))))}_notifyHeightChange(e,t){e.length&&this.props.onHeightChange&&this.props.onHeightChange((t?1:-1)*this._getHeightChange(e,0))}static getDerivedStateFromProps(e,t){const s=e.children,a=t.children;let i=!1;const n=a.map(((e,t)=>{var a;const n=null!==(a=s[t])&&void 0!==a?a:e;return n!==e&&(i=!0),n}));return i?{children:n}:null}componentDidUpdate(e,t){const s=this.state.children,a=t.children;(0,r.default)(s.length===a.length&&this.props.children.length===s.length,"The number of children in an AnimationGroup must remain constant. Render null for children you don't want to appear.");const i=s.map(((e,t)=>t)),n=i.filter((t=>null!=this.props.children[t]&&null==e.children[t])),o=i.filter((t=>null==this.props.children[t]&&null!=e.children[t]));o.length>0&&(o.forEach((()=>{this.busyId=d.UIBusyTasks.setBusy(this.busyId),l.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(o,!1),this._transitionAffected(o,!1).then((e=>{this._unmounting||0!==e.size&&this.setState((t=>({children:t.children.map(((t,s)=>e.has(s)?null:t))})),(()=>{d.UIBusyTasks.decBusy(this.busyId)}))}))),n.length>0&&(n.forEach((()=>{this.busyId=d.UIBusyTasks.setBusy(this.busyId),l.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(n,!0),this._transitionAffected(n,!0).then((()=>{d.UIBusyTasks.decBusy(this.busyId)})))}componentDidMount(){const e=this.state.children.reduce(((e,t,s)=>{const a=this._refChildren.get(`${s}`);return a?(a.style.transform="translateY(0)",e+a.clientHeight):e}),0);this.props.onHeightChange(e,!0)}_childHeightCallback(e){const t=this._heightCallbackCache.get(e);if(t)return t;const s=this._refChildren.get(`${e}`);let a=s?s.clientHeight:0;const i=({height:e})=>{a&&e&&e!==a?(this.props.onHeightChange(e-a),a=e):a=e};return this._heightCallbackCache.set(e,i),i}_cloneChild(e,t){if(!e)return e;const s=this._setChildRefCache.getRefSetter(`${t}`);return(0,o.cloneElement)(e,{ref:s})}render(){return this.state.children.map(((e,t)=>(0,f.jsx)(u.default,{onResize:this._childHeightCallback(t),children:this._cloneChild(e,t)},`.${t}`)))}}t.default=m,m.displayName="AnimationGroup"},45309:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(67294),i=s(85893),n=(0,a.forwardRef)((function({children:e},t){return(0,i.jsx)("div",{ref:t,children:e})}));t.default=n},20396:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(23279)),r=a(s(7900)),o=s(67294),l=a(s(90149)),d=s(9492),u=a(s(4919)),c=a(s(2408)),h=s(25281),f=a(s(88155)),p=a(s(63477)),m=a(s(54136)),_=s(85893);function g(e,t){if(null==e)return null;const s=e.parentNode;if(!(null!=s&&s instanceof HTMLElement))return null;let[a,i,n]=t.polygonVertices;(0,r.default)(a.x,"topLeft.x")!==(0,r.default)(i.x,"topRight.x")&&(0,r.default)(i.y,"topRight.y")!==(0,r.default)(n.y,"bottomRight.y")||([,a,i,n]=t.polygonVertices);const o=(0,r.default)(a.x,"topLeft.x"),l=(0,r.default)(a.y,"topLeft.y"),d=(0,r.default)(i.x,"topRight.x"),u=(0,r.default)(i.y,"topRight.y"),c=(0,r.default)(n.y,"bottomRight.y"),h=o*s.offsetWidth,f=l*s.offsetHeight,p=s.offsetWidth*(o-d),m=s.offsetHeight*(l-u),_=o>d?Math.PI:0,g=p?Math.atan(m/p)+_:0,v=180*g/Math.PI,S=Math.abs(p/Math.cos(g)),C=Math.abs(s.offsetHeight*(c-u)/Math.cos(g));return{left:Math.round(h),top:Math.round(f),width:Math.round(S),height:Math.round(C),transform:`rotate(${v}deg)`,transformOrigin:"top left"}}class v extends o.Component{constructor(...e){super(...e),this._annotationRef=(0,o.createRef)()}componentDidMount(){this.forceUpdate()}render(){const{annotation:e}=this.props;return(0,_.jsx)("div",{ref:this._annotationRef,className:l.default.annotation,style:g(this._annotationRef.current,e),onClick:t=>this.props.onClick(t,e),onKeyDown:t=>this.props.onKeyDown(t,e),role:"button","aria-label":e.location.name,tabIndex:"0"})}}v.displayName="AnnotationItem";class S extends o.Component{constructor(...e){super(...e),this.state={tooltip:null},this._displayTooltip=(e,t,s)=>{if(null==t&&null==s)return;const{location:a}=e,n=(0,h.getMapUrl)((0,r.default)(a.degreesLatitude,"location.degreesLatitude"),(0,r.default)(a.degreesLongitude,"location.degreesLongitude"));let o={menu:(0,_.jsx)(u.default,{href:n,className:l.default.tooltip,onClick:this._hideTooltip,children:c.default.t(1596)}),type:d.MenuType.tooltip,dirX:d.DirX.RIGHT,dirY:d.DirY.TOP};o=null!=t?(0,i.default)((0,i.default)({},o),{},{event:t,autoFocus:!1,offsetX:0,offsetY:0}):(0,i.default)((0,i.default)({},o),{},{anchor:s,autoFocus:!0}),this.setState({tooltip:o},(()=>{this.props.onTooltipDisplay&&this.props.onTooltipDisplay()}))},this._hideTooltip=()=>{this.setState({tooltip:null},(()=>{this.props.onTooltipDismiss&&this.props.onTooltipDismiss()}))},this._handleAnnotationClick=(e,t)=>{e.stopPropagation(),this._displayTooltip(t,e)},this._handleAnnotationKeyDown=(e,t)=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this._displayTooltip(t,null,e.target))},this.handleResize=(0,n.default)((()=>{this._hideTooltip()}),100)}componentWillUnmount(){this.handleResize.cancel()}render(){const{annotations:e}=this.props;if(!e.length)return null;const t=this.state.tooltip&&(0,_.jsx)(p.default,{displayName:"InteractiveAnnotationTooltip",popable:!0,escapable:!0,requestDismiss:this._hideTooltip,requestRecentFocusOnUnmount:!1,children:(0,_.jsx)(m.default,{tooltip:this.state.tooltip})});return(0,_.jsxs)(_.Fragment,{children:[e.map((e=>function(e){const{polygonVertices:t,location:s}=e,[a,,i]=t;return null!=a&&null!=a.x&&null!=a.y&&null!=i&&null!=i.x&&null!=i.y&&null!=s.degreesLatitude&&null!=s.degreesLongitude}(e)&&(0,_.jsx)(v,{annotation:e,onClick:t=>this._handleAnnotationClick(t,e),onKeyDown:t=>this._handleAnnotationKeyDown(t,e)},function(e){const[t,,s]=e.polygonVertices;return`${(0,r.default)(t.x,"topLeft.x")}:${(0,r.default)(t.y,"topLeft.y")}:${(0,r.default)(s.x,"bottomRight.x")}:${(0,r.default)(s.y,"bottomRight.y")}`}(e)))),t,(0,_.jsx)(f.default,{onResize:this.handleResize})]})}}t.default=S,S.displayName="Annotation"},67873:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t}=e,s=(0,r.default)(e.chat,["archive"]),a=e.onArchive.bind(null,!s.archive);return(0,o.jsx)(i.default,{a8n:"mi-archive",action:a,disabled:t,children:s.archive?n.default.t(1708):n.default.t(253)},"ArchiveMenuItem")};var i=a(s(47452)),n=a(s(2408)),r=a(s(76006)),o=s(85893)},37781:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(7900)),r=s(67294),o=i(s(24613)),l=i(s(91952)),d=i(s(26821)),u=i(s(71681)),c=i(s(69217)),h=i(s(35371)),f=a(s(72787)),p=s(85893);class m extends r.Component{constructor(...e){super(...e),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(f.default.state!==f.STATE.CONNECTED)return;this.checkIteration++;const e=this.props.url;if(this.checkIteration>40)return void this.handlePlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});const t=(0,n.default)(this._audioElement,"this._audioElement").buffered;t&&t.length&&t.end(0)>0&&this.handlePlaying()},this.handlePlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.handleOtherPlaying=e=>{e!==this&&(0,n.default)(this._audioElement,"this._audioElement").pause()},this.handlePlaying=()=>{this.clearCheckForSuccess(),l.default.mediaPlaying(this)},this._setRefAudio=e=>{this._audioElement=e,null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){const{listeners:e}=this.props,t=(0,n.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.handlePlayerError,!0),e.add(t,"playing",this.handlePlaying),e.add(l.default,"mediaPlaying",this.handleOtherPlaying),(h.default.isGecko||h.default.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentWillUnmount(){h.default.isBlink&&(0,d.default)((0,n.default)(this._audioElement,"this._audioElement"))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){const e=(0,n.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}render(){return(0,p.jsx)("div",{className:this.props.className,children:(0,p.jsx)("audio",{ref:this._setRefAudio,className:o.default.audioTag,src:this.props.url,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,autoPlay:this.props.autoPlay,children:this.props.children})})}}m.displayName="AudioTag";var _=(0,u.default)((0,c.default)(m));t.default=_},89545:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t}=e;return(0,o.jsx)("div",{className:(0,i.default)(n.default.container,t),children:(0,o.jsx)(r.default,{size:50,stroke:3,color:"solidwhite"})})};var i=a(s(94184)),n=a(s(6732)),r=a(s(46714)),o=s(85893)},21615:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{theme:t,svg:s}=e,a=(0,i.default)(n.default.badge,{[n.default.pending]:"pending"===t,[n.default.warning]:"warning"===t}),l=s?(0,o.jsx)(r.default,{className:n.default.icon,name:s}):null;return(0,o.jsx)("div",{className:a,children:l})};var i=a(s(94184)),n=a(s(98676)),r=a(s(2966)),o=s(85893)},45834:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(58568),n=s(67294),r=a(s(32994)),o=a(s(35371)),l=a(s(92741)),d=s(85893);class u extends n.PureComponent{constructor(...e){super(...e),this.refVideo=null,this._autoPlayErrorCount=0,this.setRefVideo=e=>{e!==this.refVideo&&(this.refVideo&&this.refVideo.removeEventListener("playing",this.onPlaying),this.refVideo=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:e.src||__LOG__(3)`srcObject is not supported in video tag while src is not set.`,e&&e.addEventListener("playing",this.onPlaying),this.props.autoPlay&&this.setupAutoplay(e,o.default.isGecko||o.default.isSafari)))},this.setupAutoplay=(e,t)=>{this.props.autoPlay&&(e.removeEventListener("playing",this._onceAutoplay),e.addEventListener("playing",this._onceAutoplay),(e.srcObject||t&&e.paused)&&this.play())},this._onceAutoplay=()=>{const e=this.refVideo;if(e&&(e.removeEventListener("playing",this._onceAutoplay),!e.videoHeight||!e.videoWidth)){this.pause(),this.play();const e=6;let t;this._autoPlayErrorCount<e&&this._autoPlayErrorCount++,this._autoPlayErrorCount>1&&this._autoPlayErrorCount<e&&(t=`the height and width of the video is not zero, count (larger than 1): ${this._autoPlayErrorCount}`),this._autoPlayErrorCount>=e&&(t=`the height and width of the video is not zero, count larger than ${this._autoPlayErrorCount}`),t&&(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${t}`,SEND_LOGS("non-zero height and width"))}},this.onPlaying=()=>{const e=this.refVideo;e&&(e.paused||null!=e.videoHeight&&e.videoHeight>0&&null!=e.videoWidth&&e.videoWidth>0&&this.props.onPlaying&&this.props.onPlaying())},this.getVolume=()=>this.refVideo?this.refVideo.volume:0,this.setVolume=e=>{this.refVideo&&(this.refVideo.volume=e)},this.getMuted=()=>!!this.refVideo&&this.refVideo.muted,this.setMuted=e=>{this.refVideo&&(this.refVideo.muted=e)},this.getPaused=()=>!this.refVideo||this.refVideo.paused,this.getCurrentTime=()=>this.refVideo?this.refVideo.currentTime:0,this.setCurrentTime=e=>{this.refVideo&&(this.refVideo.currentTime=e)},this.getDuration=()=>this.refVideo?this.refVideo.duration:0,this.setDuration=e=>{this.refVideo&&(this.refVideo.duration=e)},this.getBuffered=()=>this.refVideo?this.refVideo.buffered:null}underlyingVideo(){return this.refVideo}componentDidUpdate(e){const t=this.refVideo;null!=t&&this.props.autoPlay&&!e.autoPlay&&this.setupAutoplay(t,!0)}play(){this._play()}_play(){const e=this.refVideo;return e?e.paused?(e.removeEventListener("playing",this.onPlaying),(0,r.default)(e).then((()=>{e&&e.addEventListener("playing",this.onPlaying),this.onPlaying()})).catch((t=>{if(e&&e.addEventListener("playing",this.onPlaying),t.name===i.ABORT_ERROR)return void __LOG__(3)`video.play() promise rejected w/ AbortError: ${t.message}, error code: ${t.code}`;const s=this.refVideo&&this.refVideo.error&&this.refVideo.error.message?this.refVideo.error.message:"",a=this.refVideo&&this.refVideo.error?this.refVideo.error.code:"";__LOG__(3)`video.play() promise rejected: ${s} The error code is ${a}.`,this.props.onError&&this.props.onError(t)}))):Promise.resolve():Promise.reject(new Error("cannot play unmounted video"))}pause(){const e=this.refVideo;e&&(e.paused||e.pause())}pauseAndReset(){const e=this.refVideo;e&&(e.currentTime=0,this.pause())}render(){return(0,d.jsx)("video",{ref:this.setRefVideo,autoPlay:this.props.src?this.props.autoPlay:void 0,className:this.props.className?this.props.className:l.default.video,controls:this.props.controls,height:this.props.height,loop:this.props.loop,muted:this.props.muted,poster:this.props.poster,src:this.props.src?this.props.src:void 0,width:this.props.width,onClick:this.props.onClick,onAbort:this.props.onAbort,onCanPlay:this.props.onCanPlay,onCanPlayThrough:this.props.onCanPlayThrough,onDurationChange:this.props.onDurationChange,onEmptied:this.props.onEmptied,onEncrypted:this.props.onEncrypted,onEnded:this.props.onEnded,onError:this.props.onError,onLoadedData:this.props.onLoadedData,onLoadedMetadata:this.props.onLoadedMetadata,onLoadStart:this.props.onLoadStart,onPause:this.props.onPause,onPlay:this.props.onPlay,onProgress:this.props.onProgress,onRateChange:this.props.onRateChange,onSeeked:this.props.onSeeked,onSeeking:this.props.onSeeking,onStalled:this.props.onStalled,onSuspend:this.props.onSuspend,onTimeUpdate:this.props.onTimeUpdate,onVolumeChange:this.props.onVolumeChange,onWaiting:this.props.onWaiting,children:this.props.children})}}t.default=u,u.displayName="BaseVideo"},53407:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,n.jsx)("div",{className:i.default.border})};var i=a(s(22301)),n=s(85893)},55092:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(76610)),r=a(s(80031)),o=s(85893);var l=e=>{var t;const s=(0,i.default)(e.className,r.default.chat,{[r.default.cartProduct]:"cart-product"===e.theme,[r.default.themeCheckbox]:e.checkbox||"chat-checkbox"===e.theme||"label-list"===e.theme||"chat-checkbox-no-delete"===e.theme||"cell-message-checkbox"===e.theme,[r.default.themeDrawerList]:"drawer-list"===e.theme||"new-chat-info"===e.theme,[r.default.themeNewChatInfo]:"new-chat-info"===e.theme,[r.default.themeIdentity]:"identity"===e.theme,[r.default.themeListNames]:"list-names"===e.theme||"list-names-no-delete"===e.theme,[r.default.themeMessage]:"cell-message"===e.theme||"cell-message-checkbox"===e.theme,[r.default.themePlain]:"plain"===e.theme,[r.default.themeSearch]:"chat-search"===e.theme,[r.default.themeStatus]:"status-list"===e.theme,[r.default.themeLabel]:"label-selection"===e.theme,[r.default.themeAddItem]:"add-item"===e.theme,[r.default.themeAddItemPlaceholder]:"add-item-placeholder"===e.theme,[r.default.idle]:e.idle,[r.default.member]:"group-modal"===e.theme||"chat-checkbox-no-delete"===e.theme,[r.default.unread]:!!e.unread,[r.default.chatDrag]:!!e.dragging,[r.default.active]:!!e.active,[r.default.isMuted]:!!e.isMuted,[r.default.groupV4Invite]:"group_v4_invite"===e.theme,[r.default.product]:"product"===e.theme||"product-out-of-stock"===e.theme||"product-of-collection"===e.theme||"collection-header"===e.theme||"collection-edit"===e.theme,[r.default.productOfCollection]:"product-of-collection"===e.theme,[r.default.productOutOfStock]:"product-out-of-stock"===e.theme,[r.default.collectionEdit]:"collection-edit"===e.theme,[r.default.collectionHeader]:"collection-header"===e.theme,[r.default.orderProduct]:"order-product"===e.theme,[r.default.media]:"media"===e.theme,[r.default.listButton]:"list-button-compact"===e.theme,[r.default.listMsg]:"list-msg"===e.theme,[r.default.archivePanel]:"archive-panel"===e.theme,[r.default.themeRadioButtonRow]:"radio-button-row"===e.theme});let a;e.image&&(a=e.customImage?e.image:(0,o.jsx)("div",{className:r.default.chatAvatar,children:e.image}));const l=null!=e.primaryDetail?(0,o.jsx)("div",{className:(0,i.default)({[r.default.chatMeta]:!["product","product-out-of-stock","product-of-collection"].includes(e.theme)}),children:e.primaryDetail}):null;let d,u;null!=e.secondary&&(u=null!=e.secondaryDetail?(0,o.jsx)("div",{role:"gridcell","aria-colindex":"1",className:r.default.chatMeta,children:e.secondaryDetail}):null,d=(0,o.jsxs)("div",{className:r.default.chatSecondary,children:[(0,o.jsx)("div",{className:r.default.chatStatus,children:e.secondary}),u]}));const c=null!=e.detail?(0,o.jsx)("div",{className:(0,i.default)(r.default.chatBody,r.default.chatDetails),children:e.detail}):null,h=null!==(t=e.a8n)&&void 0!==t?t:"chat-card";return(0,o.jsxs)("div",{ref:e.setDivRef,"data-testid":"cell-frame-container","data-a8n":n.default.key(h),className:s,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,children:[(0,o.jsx)("div",{className:r.default.image,children:a}),(0,o.jsxs)("div",{className:r.default.chatBody,children:[(0,o.jsxs)("div",{role:"gridcell","aria-colindex":"2",className:(0,i.default)(r.default.chatMain,{[r.default.noDelete]:"list-names-no-delete"===e.theme}),children:[(0,o.jsx)("div",{className:r.default.chatTitle,children:e.primary}),l]}),d]}),c]})};t.default=l},19887:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(r.default.chatSubtitle,{[r.default.chatSubtitleHeader]:"title"===e.location});return(0,l.jsx)("div",{"data-a8n":n.default.key("chat-subtitle"),className:t,children:(0,l.jsx)(o.default,{titlify:!0,className:r.default.chatSubtitleText,direction:"inherit",text:e.text,selectable:!0})})};var i=a(s(94184)),n=a(s(76610)),r=a(s(98150)),o=a(s(85051)),l=s(85893)},33287:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({checked:e,id:t,onChange:s,theme:a,disabled:c,tabIndex:h}){const f=(0,n.useRef)(null),p=e&&a===u.PARTIAL,[m,_]=(0,o.default)(),g=(0,l.default)(f,m);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:g,className:r.default.a11yHidden,checked:e,disabled:!!c||void 0,indeterminate:!!p||void 0,onChange:function(e){e.stopPropagation();const t=f.current;null!=t&&t.focus(),s(e)},type:"checkbox",id:t,tabIndex:null!=h?h:0}),(0,d.jsx)("div",{onClick:function(){const e=f.current;null!=e&&e.click()},className:(0,i.default)(r.default.checkboxContainer,{[r.default.containerDisabled]:c,[r.default.itemFocused]:_}),tabIndex:-1,"aria-hidden":"true","data-testid":"visual-checkbox",children:(0,d.jsx)("div",{className:(0,i.default)(r.default.checkbox,{[r.default.checkedCheckbox]:e,[r.default.disabled]:c}),children:(0,d.jsx)("div",{className:(0,i.default)(r.default.checkmark,{[r.default.checkedCheckmark]:e&&a!==u.PARTIAL,[r.default.uncheckedCheckmark]:!e,[r.default.partialCheckMark]:p})})})})]})},t.CHECKBOX_THEME=void 0;var i=a(s(94184)),n=s(67294),r=a(s(8313)),o=a(s(2887)),l=a(s(69509)),d=s(85893);const u={PARTIAL:"PARTIAL"};t.CHECKBOX_THEME=u},88540:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,s;e.checked?(s=e.radio?"checkbox-round-radio-checked":"checkbox-round-checked",t="checked"):(t="unchecked",s=e.hover?"checkbox-round-unchecked":"checkbox-round-passive");const a=(0,i.default)(n.default.roundIcon,{[n.default.unchecked]:!e.checked&&e.hover&&!e.systemUncheckedColor,[n.default.passive]:!e.checked&&!e.hover&&!e.systemUncheckedColor,[n.default.uncheckedSystemColor]:!e.checked&&e.systemUncheckedColor});return(0,l.jsx)(o.default,{className:n.default.container,transitionName:"pop",children:(0,l.jsx)("div",{className:a,onClick:t=>{t&&t.stopPropagation(),e.onChange()},children:(0,l.jsx)(r.default,{name:s})},t)})};var i=a(s(94184)),n=a(s(53219)),r=a(s(2966)),o=a(s(82669)),l=s(85893)},93972:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({type:e,onClick:t,onKeyDown:s,disabled:a,theme:i,overMedia:o}){const p=(0,n.default)(r.default.btn,{[r.default.btnMediaPrev]:e===c.Prev,[r.default.btnMediaNext]:e===c.Next,[r.default.disabledBtn]:a,[r.default.overMedia]:o}),m=h[e],_=f[e];return(0,u.jsx)(l.default,{className:p,onClick:a?null:t,onKeyDown:s,label:m,theme:i,disabled:a,children:(0,u.jsx)(d.default,{name:_,title:m,directional:!0})})},t.ButtonType=void 0;var n=i(s(94184)),r=i(s(25363)),o=i(s(2408)),l=a(s(3132)),d=i(s(2966)),u=s(85893);const c=s(54302).Mirrored(["Prev","Next"]);t.ButtonType=c;const h={Prev:o.default.t(1455),Next:o.default.t(1372)},f={Prev:"chevron-left",Next:"chevron-right"}},52384:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(94822)),r=a(s(55454)),o=a(s(29698)),l=s(85893);var d=({children:e,icon:t,secondary:s,theme:a})=>{let d=(0,i.default)(o.default.container,{[o.default.inConversation]:"conversation"===a,[o.default.inList]:"list"===a,[o.default.newChatInfo]:"new-chat-info"===a});if("conversation"===a){const e=n.default.get("defaultPreference");e&&e.wallpaperColor===r.default.DEFAULT_CHAT_WALLPAPER&&(d=(0,i.default)(d,o.default.defaultWallpaper))}const u=t?(0,l.jsx)("div",{className:o.default.icon,children:t}):null,c=null!=s?(0,l.jsx)("div",{className:o.default.secondary,children:s}):null;return(0,l.jsxs)("div",{className:d,children:[u,(0,l.jsxs)("div",{className:o.default.body,children:[(0,l.jsx)("div",{className:o.default.main,children:e}),c]})]})};t.default=d},14361:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createDataLink=function(e){const t=document.createElement("a"),s=i.default.isBlob(e)||i.default.isData(e);return t.href=s?e:"",t};var i=a(s(1458))},47904:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=s(58380),r=a(s(47452)),o=a(s(2408)),l=a(s(76006)),d=s(85893);function u(e){const{isReadOnly:t,kind:s}=(0,l.default)(e.chat,["isReadOnly","kind"]);let a;switch(s){case n.CHAT_KIND.GROUP:a=t?o.default.t(1953):o.default.t(1958);break;case n.CHAT_KIND.BROADCAST:a=o.default.t(1954);break;case n.CHAT_KIND.CHAT:a=o.default.t(747)}return(0,d.jsx)(r.default,{a8n:"mi-delete",action:e.onDeleteOrExit,disabled:e.disabled,children:a})}var c=(0,i.memo)(u);t.default=c},88419:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSize=P,t.getDefaultIcon=N,t.default=t.DetailImageCommon=t.DETAIL_IMAGE_QUALITY=t.DETAIL_IMAGE_SIZE=void 0;var n=i(s(81109)),r=i(s(94184)),o=s(78285),l=s(67294),d=i(s(89545)),u=i(s(84758)),c=i(s(31680)),h=a(s(13540)),f=i(s(38057)),p=i(s(13985)),m=i(s(71681)),_=i(s(91619)),g=i(s(3165)),v=s(15298),S=i(s(2966)),C=i(s(76006)),y=i(s(69635)),E=s(85893);const b={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",AUTO:"AUTO",NONE:"NONE"};t.DETAIL_IMAGE_SIZE=b;const T={LOW:"LOW",HIGH:"HIGH"};t.DETAIL_IMAGE_QUALITY=T;class M extends l.PureComponent{constructor(e){super(e),this._retriedAfter403=!1,this.state={loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:null},this.onLoad=()=>{this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),this.setState({loading:!1,loaded:!0}),this.props.onLoad&&this.props.onLoad()},this.onError=e=>{if(this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),e instanceof h.ServerStatusError){const{profilePicThumb:t}=this.props;switch(e.status){case 403:t.markStale({eurl:!0}),this._retriedAfter403||(this._retriedAfter403=!0,t.validate());break;case 410:t.markStale()}}this.setState({loading:!1,loaded:!1})},this._enableSpinner="business"!==e.theme,e.loader&&this._enableSpinner&&(this._showSpinnerTimeout=new o.ShiftTimer((()=>{this.setState({showSpinner:!0})})),this._showSpinnerTimeout.onOrAfter(100))}static getDerivedStateFromProps(e,t){return t.profilePicThumbImg!==e.profilePicThumbImg?{loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:e.profilePicThumbImg}:{profilePicThumbImg:e.profilePicThumbImg}}componentDidUpdate(e){e.profilePicThumbImg!==this.props.profilePicThumbImg&&this._showSpinnerTimeout&&this._showSpinnerTimeout.onOrAfter(100)}componentWillUnmount(){this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel()}_shouldShowSpinner(){const{profilePicThumb:e,loader:t}=this.props,{loading:s,showSpinner:a}=this.state;return!!this._enableSpinner&&(!!t&&a&&s&&!(!(0,v.unproxy)(e).stale&&!this.props.profilePicThumbImg))}render(){const{profilePicThumbImg:e,spinnerClassName:t,imgClassName:s,alt:a}=this.props,{loading:i,loaded:o}=this.state;let l={[c.default.isLoaded]:!i};s&&(l=(0,n.default)((0,n.default)({},l),{},{[s]:"string"==typeof s}));const u=(0,r.default)(c.default.avatarImage,l);let h,f;this._shouldShowSpinner()&&(h=(0,E.jsx)(d.default,{className:t},"spinner")),e&&(f=(0,E.jsx)(p.default,{src:e,hasPrivacyChecks:!0,crossOrigin:!1,className:u,draggable:!1,onLoad:this.onLoad,onError:this.onError,alt:a},"image"));const m=this.props.defaultIcon;return(0,E.jsxs)(E.Fragment,{children:[h,m,f]})}}function x(e){const t=(0,C.default)(e.profilePicThumb,["imgFull"]);return(0,E.jsx)(M,(0,n.default)((0,n.default)({},e),{},{profilePicThumbImg:t.imgFull}))}function I(e){const t=(0,C.default)(e.profilePicThumb,["img"]);return(0,E.jsx)(M,(0,n.default)((0,n.default)({},e),{},{profilePicThumbImg:t.img}))}function P(e){if("string"!=typeof e)return e;switch(e){case b.SMALL:return 49;case b.MEDIUM:return 100;case b.LARGE:return 200;case b.NONE:return;default:throw new Error(`Unsupported size type: ${e}`)}}t.DetailImageCommon=M,M.displayName="DetailImageCommon";class A extends l.Component{constructor(...e){super(...e),this.state={ephemeral:!1},this._updateEphemeral=()=>{const e=u.default.get(this.props.id);e&&this.setState({ephemeral:e.isEphemeralSettingOn()})}}componentDidMount(){const e=u.default.get(this.props.id);e&&this.props.listeners.add(e.isGroup?(0,_.default)(e.groupMetadata,"chat.groupMetadata"):e,"change:ephemeralDuration",this._updateEphemeral)}componentDidUpdate(e){if(e.id!==this.props.id){const t=u.default.get(e.id);t&&this.props.listeners.remove(t.isGroup?(0,_.default)(t.groupMetadata,"prevChat.groupMetadata"):t,"change:ephemeralDuration",this._updateEphemeral);const s=u.default.get(this.props.id);s&&this.props.listeners.add(s.isGroup?(0,_.default)(s.groupMetadata,"chat.groupMetadata"):s,"change:ephemeralDuration",this._updateEphemeral)}}componentWillUnmount(){const e=u.default.get(this.props.id);e&&this.props.listeners.remove(e.isGroup?(0,_.default)(e.groupMetadata,"chat.groupMetadata"):e,"change:ephemeralDuration",this._updateEphemeral)}render(){var e;const{id:t,size:s,quality:a,loader:i,onClick:n,onLoad:o,quoted:l,square:d,border:h,waitIdle:p,showEphemeralIcon:m,theme:_,alt:v}=this.props;let C;C="number"==typeof s?s>0?s:b.SMALL:null!=s?s:b.SMALL;const y=a||T.LOW,M={height:P(C),width:P(C)};n&&(M.cursor="pointer");const A=(0,r.default)(c.default.avatar,{[c.default.status_v3]:"status_v3"===_,[c.default.avatarSquare]:d,[c.default.avatarBorder]:h}),O=N(t,l),w=(0,E.jsx)(f.default,{id:t,onComplex:()=>{let e=null;const s=g.default.gadd(t);return s&&(e=y===T.HIGH?(0,E.jsx)(x,{profilePicThumb:s,defaultIcon:O,loader:i,onLoad:o,alt:v}):(0,E.jsx)(I,{profilePicThumb:s,defaultIcon:O,loader:i,onLoad:o,alt:v})),(0,E.jsxs)("div",{className:A,style:M,onClick:n,children:[null,e,null]})},waitIdle:p,children:(0,E.jsx)("div",{className:A,style:M,onClick:n,children:O})});let D;return m&&(null===(e=u.default.get(t))||void 0===e?void 0:e.isEphemeralSettingOn())&&(D=(0,E.jsxs)("div",{className:c.default.wrapper,children:[(0,E.jsx)("div",{className:c.default.badge,children:(0,E.jsx)(S.default,{name:"disappearing",className:c.default.badgeIcon})}),w]})),D||w}}function N(e,t){let s="default-user";y.default.isUser(e)&&!y.default.isPSA(e)&&t?s="default-user-square":y.default.isGroup(e)?s="default-group":y.default.isBroadcast(e)?s="default-broadcast":y.default.isPSA(e)&&(s="default-psa");return(0,E.jsx)("div",{className:c.default.avatarDefault,children:(0,E.jsx)(S.default,{name:s})},"default")}A.displayName="DetailImage";var O=(0,m.default)(A);t.default=O},74504:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=t.PendingCancel=t.Pending=t.Download=t.DocState=void 0;var i=a(s(81109)),n=a(s(50282)),r=a(s(46714)),o=a(s(2966)),l=s(85893);const d=({children:e,onClick:t})=>{const s=t?{onClick:t}:{};return(0,l.jsx)("div",(0,i.default)((0,i.default)({className:n.default.docState},s),{},{children:e}))};t.DocState=d;t.Download=({onClick:e})=>(0,l.jsx)(d,{onClick:e||(()=>{}),children:(0,l.jsx)(o.default,{name:"audio-download"})});t.Pending=({outgoingMsg:e})=>(0,l.jsx)(d,{children:(0,l.jsx)("div",{className:n.default.spinner,children:(0,l.jsx)(r.default,{stroke:3,size:32,outgoingMsg:e})})});t.PendingCancel=({outgoingMsg:e})=>(0,l.jsxs)(d,{children:[(0,l.jsx)("div",{className:n.default.spinner,children:(0,l.jsx)(r.default,{stroke:3,size:32,outgoingMsg:e})}),(0,l.jsx)(o.default,{name:"audio-cancel-noborder"})]});t.Upload=()=>(0,l.jsx)(d,{children:(0,l.jsx)(o.default,{name:"audio-upload"})})},47452:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=a(s(81109)),n=a(s(94184)),r=s(67294),o=a(s(76610)),l=a(s(50687)),d=a(s(52087)),u=a(s(39e3)),c=a(s(4158)),h=s(74289),f=s(85893);const p=(0,c.default)({COMPACT:null,MUTED:null});t.ThemeOptions=p;class m extends r.PureComponent{constructor(...e){super(...e),this.state={hover:!1,focus:!1},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this.onFocus=()=>{this.setState({focus:!0})},this.onBlur=()=>{this.setState({focus:!1})},this.onClick=e=>{this.onAction(e)},this.onKeyboardActivation=e=>{e.repeat||this.onAction(e)},this.onAction=e=>{const{action:t}=this.props;if(!t)return;if(!1===t(e))return;const s=this.props.uim;s&&s.uie.requestDismiss()}}render(){const{children:e,tooltip:t,type:s,disabled:a=!1,theme:r}=this.props,{hover:d,focus:c}=this.state,m=(d||c)&&null!=t?t:null,g=(0,h.isString)(e)?(0,f.jsx)("div",{className:(0,n.default)(l.default.ellipsify,l.default.action,{[l.default.compact]:r===p.COMPACT}),role:"button","aria-label":e,children:e}):e,v={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},S=(0,n.default)(l.default.item,l.default.shortcut,{[l.default.hover]:d||c,[l.default.text]:"text"===s,[l.default.emoji]:"emoji"===s||"emoji-grid"===s,[l.default.emojiGrid]:"emoji-grid"===s,[l.default.icon]:"icon"===s,[l.default.disabled]:a||r===p.MUTED}),C=a?{}:{handlers:v,onContextMenu:_,onMouseDown:_,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onFocus,onBlur:this.onBlur};return(0,f.jsxs)(u.default,(0,i.default)((0,i.default)({component:"li","data-a8n":o.default.key(this.props.a8n),className:S,"data-animate-dropdown-item":!0},C),{},{children:[g,(0,f.jsx)("div",{children:m})]}))}}function _(e){e.preventDefault()}m.defaultProps={type:"text"},m.displayName="DropdownItem";var g=(0,d.default)(m);t.default=g},54179:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.useContext)(o.InitialEmojisCompletionContext);(0,r.useEffect)((()=>{const s=h(e.emoji);null!=s&&(t.incrementLoadingEmojisCount(),l.default.loadEmoji(s,l.LOAD_PRIORITY.LAZY_LOAD_EMOJI).finally((()=>{t.decrementLoadingEmojisCount()})))}),[t,e.emoji]);const{className:s,element:a,emoji:i,selectable:d,selected:m,size:_,src:g,onLoad:v,tabIndex:S}=e,C=h(i);if(null==C)return null;let y,E;g||(y=f(C,_),E=p(C,_));const b=(0,n.default)(s,E,{selected:m});if("span"===a)return(0,c.jsx)("span",{className:b,style:y,onLoad:v,tabIndex:S,"data-unicode":e["data-unicode"],"data-variant":e["data-variant"],"data-emoji-index":e["data-emoji-index"]});return(0,c.jsx)(u.default,{alt:i,className:b,draggable:!1,onLoad:v,plainText:i,selectable:d,style:y,src:g})};var n=i(s(94184)),r=s(67294),o=s(35765),l=a(s(61970)),d=i(s(2561)),u=i(s(13985)),c=s(85893);const{getGlyphId:h,getStyle:f,getCssClasses:p}=d.default},85051:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_SIZE=void 0;var n=i(s(81109)),r=i(s(23279)),o=i(s(94184)),l=a(s(40052)),d=i(s(7900)),u=s(67294),c=i(s(56720)),h=i(s(91952)),f=i(s(2561)),p=i(s(40743)),m=i(s(29730)),_=s(49895),g=i(s(2408)),v=i(s(71681)),S=i(s(20845)),C=s(6249),y=i(s(35371)),E=s(85893);const b={SMALL:"SMALL",LARGE:"LARGE"};t.EMOJI_SIZE=b;const T=4096;function M(e){return f.default.containsEmoji(e.substring(0,T))}class x extends u.PureComponent{constructor(...e){super(...e),this.state={text:this.props.text||"",ellipsified:null},this.refContainer=(0,u.createRef)(),this._registeredListener=!1,this._registerResizeListener=()=>{this._registeredListener||(this._registeredListener=!0,this.props.listeners.add(window,"resize",this._recompute),this.props.listeners.add(h.default,"resize",this._recompute))},this._unregisterResizeListener=()=>{this._registeredListener&&(this._registeredListener=!1,this.props.listeners.remove(window,"resize",this._recompute),this.props.listeners.remove(h.default,"resize",this._recompute))},this._recompute=(0,r.default)((()=>{this.setState({ellipsified:null},this.ellipsify)}),10),this._ellipsifyCheck=()=>M(this.state.text)&&this.ellipsify(),this.ellipsify=()=>{const e=this.refContainer.current;if(!e)return;const t=(0,d.default)(e.parentElement,"node.parentElement"),s=e.querySelectorAll("img");if(!s.length)return;const a=e.clientWidth;e.style.overflow="visible";const i=e.clientWidth!==a;if(e.style.overflow="hidden",!i)return;const n=Boolean(g.default.isRTL())===Boolean(this.props.dirMismatch),r=s[function(e,t,s){let a=0;for(;a<e.length;){const i=e[a];if(s&&i.offsetLeft+i.clientWidth>=t)break;if(!s&&i.offsetLeft<=t)break;a++}return a}(s,n?t.clientWidth-function(e,t){let s=0;const{childNodes:a}=e;for(let e=0;e<a.length;e++){const i=a[e];if(i===t)break;s+=i instanceof Element?i.clientWidth:0}return s}(t,e)-12:12,n)];this.setState({ellipsified:P(e,r)})},this._buildBidiModel=e=>e.reduce(((e,t)=>{if("string"==typeof t){const s=t.split(/(\r?\n|\r)/g).map((e=>({dir:l.dir(e),content:e})));return e.concat(s)}return e.push({content:t}),e}),[]),this._explodeOutputByLines=(e,t)=>{const{direction:s}=this.props,a=[],i=this._buildBidiModel(e);let n=[],r=s;"auto"!==s&&"inherit"!==s||(r=null);const o=(e,t=!1)=>{const i=null==r||null==s||r===s,o=i?null:r,l=!i||"rtl"===r!==g.default.isRTL()?p.default.dirMismatch:null;a.push((0,E.jsxs)("span",{dir:o,className:l,children:[n,t?"":null]},e))};for(let e=0;e<i.length;e++){const t=i[e];r!==t.dir&&null!=r&&void 0!==t.dir&&(o(e),n=[]),void 0!==t.dir&&(r=t.dir),n.push(t.content)}return o(i.length,t),a},this.componentDidMount=()=>{!y.default.supportsEmojiEllipsification&&this.props.ellipsify&&M(this.state.text)&&this._registerResizeListener(),!y.default.supportsEmojiEllipsification&&this.props.ellipsify&&this._ellipsifyCheck()},this.render=()=>{if(!this.state.text)return null;const{onClick:e,ellipsify:t,dirMismatch:s,inferLinesDirection:a,inlineblock:i,direction:n,textLimit:r,multiline:l,breakWord:d}=this.props,u=this.state.ellipsified?this.state.ellipsified:this.state.text,h="inherit"===n?null:n||"auto",f=!!this.props.selectable,g=this.props.formatters||_.Configuration.EmojiOnly({selectable:f});let v=r||1/0;t&&u.length>T&&v>T&&(v=T);const y=(0,o.default)(this.props.className,(0,c.default)(this.props.xstyle),{[p.default.ellipsify]:!!t,[p.default.inlineblock]:!!i,[p.default.clickable]:!!e,[p.default.dirMismatch]:s&&!a,[p.default.multiline]:l,[p.default.breakWord]:d}),b=(0,m.default)(u,g,C.JSXSerializer,void 0,v),M=!!this.state.ellipsified||u.length>v,x=this.props.inferLinesDirection?this._explodeOutputByLines(b,M):b;return(0,E.jsx)(S.default,{className:y,dir:h,element:this.props.element,onClick:e,ref:this.refContainer,selectable:f,title:this.props.titlify?this.state.text:void 0,children:x})}}getContainerElement(){return this.refContainer.current}getWidth(){const e=this.refContainer.current;return e?e.getBoundingClientRect().width:0}static getDerivedStateFromProps(e,t){var s;let a=null;const i=null!==(s=e.text)&&void 0!==s?s:"";return i!==t.text&&(a={text:i}),y.default.supportsEmojiEllipsification||!e.ellipsify||null==a||M(i)||(a=(0,n.default)((0,n.default)({},a),{},{ellipsified:null})),a}componentDidUpdate(e,t){!y.default.supportsEmojiEllipsification&&this.props.ellipsify&&t.text!==this.state.text&&(M(this.state.text)?(this._recompute(),this._registerResizeListener()):this._unregisterResizeListener())}componentWillUnmount(){this._recompute.cancel()}}x.defaultProps={element:"span",emojiSize:b.SMALL,textLimit:1/0};const I=(0,v.default)(x);function P(e,t,s={found:!1}){if(e===t)return s.found=!0,"";if(e instanceof HTMLImageElement)return e.alt;if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;const a=function(e){if(e instanceof Element)switch(e.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}(e);let i="",n=0;for(;n<e.childNodes.length&&(i+=P(e.childNodes[n],t,s),!s.found);)n++;if(null==a)return i;const[r,o]=a;return`${r}${i}${o}`}t.default=class extends I{getWidth(){return this.getComponent().getWidth()}getContainerElement(){return this.getComponent().getContainerElement()}}},92231:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LazyLoadRetry=t.NoResultForLabel=t.LoadingWithText=t.Loading=t.ImageSearchEmpty=t.SearchingImages=t.BeforeImageSearch=t.DocMsgs=t.LinkMsgs=t.MediaMsgs=t.StarredMsgs=t.AllArchived=t.ListStatus=t.BeforeSearchMessages=t.ListGroups=t.ListProducts=t.ListChats=t.SearchMessagesUnavailable=t.SearchMessages=t.SearchGroups=t.SearchWithKeyword=t.SearchWithoutKeyword=t.SearchContacts=t.SearchingMessages=t.Searching=t.Search=t.Archived=t.Blocked=t.Empty=void 0;var i=a(s(94184)),n=a(s(76610)),r=a(s(84758)),o=a(s(91952)),l=a(s(85051)),d=a(s(20823)),u=a(s(2408)),c=a(s(59606)),h=a(s(46714)),f=a(s(2966)),p=s(85893);const m=({a8nText:e,a8nTitle:t,children:s,className:a,icon:r,text:o,theme:u,title:c,onClick:h})=>{const f=c?(0,p.jsx)("div",{"data-a8n":n.default.key(t),className:d.default.title,children:c}):null,m=o?(0,p.jsx)("div",{"data-a8n":n.default.key(e),className:d.default.text,children:(0,p.jsx)(l.default,{text:o})}):null,_=(0,i.default)(d.default.empty,a,{[d.default.compact]:"compact"===u});return(0,p.jsxs)("div",{className:_,onClick:h,children:[r,f,m,s]})};t.Empty=m;t.Blocked=()=>{const e=(0,p.jsx)("div",{className:d.default.icon,children:(0,p.jsx)(f.default,{name:"empty-blocked"})});return(0,p.jsx)(m,{icon:e,title:u.default.t(322),text:u.default.t(231),a8nTitle:"blocked-empty",a8nText:"add-blocked-description"})};t.Archived=()=>{const e=(0,p.jsx)("div",{className:d.default.icon,children:(0,p.jsx)(f.default,{name:"empty-archived"})});return(0,p.jsx)(m,{icon:e,title:u.default.t(260),a8nTitle:"archived-empty"})};t.Search=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1571),a8nText:"search-no-chats-or-contacts"});t.Searching=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1583),a8nText:"searching-chats-contacts-messages"});t.SearchingMessages=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1585),a8nText:"searching-messages"});t.SearchContacts=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1572),a8nText:"search-no-contacts"});t.SearchWithoutKeyword=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1385),a8nText:"search-no-results-without-keyword"});t.SearchWithKeyword=e=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1575,{keyword:e}),a8nText:"search-no-results-without-keyword"});t.SearchGroups=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1573),a8nText:"search-no-groups"});t.SearchMessages=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1574),a8nText:"search-no-messages"});t.SearchMessagesUnavailable=()=>(0,p.jsx)(m,{className:d.default.emptyTop,text:u.default.t(1578),a8nText:"search-results-unavailable"});t.ListChats=()=>(0,p.jsx)(m,{text:u.default.t(1374),a8nText:"no-chats"});t.ListProducts=({hasCatalog:e=!0})=>{const t=e?u.default.t(1382):u.default.t(1373);return(0,p.jsx)(m,{text:t,a8nText:"no-products"})};t.ListGroups=()=>(0,p.jsx)(m,{text:u.default.t(1377),a8nText:"no-groups"});t.BeforeSearchMessages=(e,t)=>{const s=t?u.default.t(585,{chatName:e}):u.default.t(738,{chatName:e});return(0,p.jsx)(m,{className:d.default.emptyTop,text:s,a8nText:"chat-search-prompt"})};function _(){const e=s(79563).default;o.default.openDrawerLeft((0,p.jsx)(e,{}))}t.ListStatus=()=>(0,p.jsx)(m,{});t.AllArchived=()=>{const e=r.default.filter((e=>e.archive)).length;return(0,p.jsx)(m,{title:u.default.t(248),a8nTitle:"all-chats-archived",children:(0,p.jsx)("div",{"data-a8n":n.default.key("see-archived"),role:"button",onClick:_,className:d.default.action,children:u.default.t(1595,{count:e,_plural:e})})})};t.StarredMsgs=()=>(0,p.jsx)(m,{text:u.default.t(1386),a8nText:"no-starred-messages"});t.MediaMsgs=()=>(0,p.jsx)(m,{text:u.default.t(1379),a8nText:"no-media"});t.LinkMsgs=()=>(0,p.jsx)(m,{text:u.default.t(1378),a8nText:"no-links"});t.DocMsgs=()=>(0,p.jsx)(m,{text:u.default.t(1376),a8nText:"no-docs"});t.BeforeImageSearch=()=>(0,p.jsx)(m,{text:u.default.t(1050),a8nText:"image-search-prompt"});t.SearchingImages=()=>(0,p.jsx)(m,{text:u.default.t(1584),a8nText:"searching-images"});t.ImageSearchEmpty=()=>(0,p.jsx)(m,{text:u.default.t(1049),a8nText:"image-search-no-results"});t.Loading=()=>(0,p.jsx)(m,{children:(0,p.jsx)(h.default,{size:50,stroke:4})});t.LoadingWithText=({text:e})=>(0,p.jsxs)(m,{children:[(0,p.jsx)("div",{className:d.default.spinner,children:(0,p.jsx)(h.default,{size:50,stroke:4})}),(0,p.jsx)(l.default,{element:"div",className:d.default.text,text:e})]});t.NoResultForLabel=({labelId:e})=>{const t=c.default.assertGet(e);return(0,p.jsx)(m,{children:(0,p.jsx)(l.default,{element:"div",className:d.default.text,text:u.default.t(1384,{labelName:t.name})})})};t.LazyLoadRetry=({className:e,onClick:t})=>(0,p.jsxs)(m,{className:e,onClick:t,children:[(0,p.jsx)(f.default,{name:"live-location-refresh",className:d.default.iconRetry}),(0,p.jsx)("div",{children:u.default.t(1553)})]})},34295:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(67294);class i extends a.Component{constructor(...e){super(...e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){this.props.sendLogs&&(__LOG__(4,void 0,new Error,!0)`${e.stack}\n${t.componentStack}`,SEND_LOGS(`error-boundary:${this.props.reason}`))}render(){return this.state.hasError?this.props.fallback:this.props.children}}t.default=i,i.defaultProps={sendLogs:!0,fallback:null},i.displayName="ErrorBoundary"},44719:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(70772)),n=s(85893);var r=({children:e})=>(0,n.jsx)("div",{className:i.default.tooltip,role:"tooltip",children:e});t.default=r},18598:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(55454)),r=a(s(50798)),o=a(s(2408)),l=s(49002),d=s(85893);function u({text:e,textLimit:t,children:s}){const[a,l]=(0,i.useState)((()=>c(e,t,t)?t:1/0));return(0,d.jsxs)(d.Fragment,{children:[s({textLimit:a}),a!==1/0?(0,d.jsx)("span",{className:r.default.read_more,role:"button",onClick:()=>{const t=a+n.default.SUBSEQUENT_PAGE_SIZE;l(c(e,t,n.default.SUBSEQUENT_PAGE_SIZE)?t:1/0)},children:" "+o.default.t(1514)}):null]})}function c(e,t,s){return(0,l.numCodepoints)(e)-t>s*n.default.OVERFLOWING_PAGE_THRESHOLD}var h=(0,i.memo)(u);t.default=h},85688:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(71681)),r=s(85893);class o extends i.PureComponent{constructor(...e){super(...e),this._setRefInput=e=>{this._refInput=e},this._handleClick=e=>{e.stopPropagation()},this._handleChange=e=>{this.props.onChange(e)}}open(){this._refInput&&this._refInput.click()}render(){return(0,r.jsx)("input",{accept:this.props.mimes,ref:this._setRefInput,type:"file",multiple:!0,style:{display:"none"},onClick:this._handleClick,onChange:this._handleChange})}}o.displayName="FilePicker";const l=(0,n.default)(o);t.default=class extends l{open(){return this.getComponent().open()}}},40186:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,r.default)(e.chatstate,["id","type","deny","t"]);const t=(0,r.default)(e.groupMetadata,["announce","participants"]),s=(0,r.default)(e.presence,["forceDisplay","withholdDisplayStage"]),a=s.withholdDisplayStage===n.WithholdDisplayStage.Info?e.placeholder:s.getGroupSubtitleText();return(0,o.jsx)(i.default,{groupMetadata:t,overridingText:a,placeholder:e.placeholder,location:e.location})};var i=a(s(82621)),n=s(84065),r=a(s(76006)),o=s(85893)},52275:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{active:s=!1,delay:a=0}=null!=t?t:{},r=(0,i.useRef)(e);r.current=e;const o=(0,i.useRef)();(0,i.useEffect)((()=>{const e=e=>r.current(e),t=()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.call(o)};return t(),s&&(o.current=(0,n.default)(e,{delay:a})),t}),[s,a])};var i=s(67294),n=a(s(18282))},38853:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const a=(0,r.default)(e),o=(0,n.useMemo)((()=>(0,i.default)(a,t,s)),[t,s,a]);return(0,n.useEffect)((()=>o.cancel),[]),o};var i=a(s(23279)),n=s(67294),r=a(s(37110))},68900:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,n.useState)((()=>r().getValue()));return(0,n.useEffect)((()=>r().subscribe((e=>{t(e)}))),[]),e};var i=a(s(51463)),n=s(67294);const r=(0,i.default)((()=>new o));class o{constructor(){this._subscribers=new Set}subscribe(e){if(this._subscribers.has(e))throw new Error("Callback can only be added once.");return this._subscribers.add(e),this._updateListener(),()=>{this._subscribers.delete(e),this._updateListener()}}getValue(){var e;return null!==(e=window.devicePixelRatio)&&void 0!==e?e:1}_updateListener(){var e;if(0===this._subscribers.size)return void(null===(e=this._destroyListener)||void 0===e||e.call(this));if(null!=this._destroyListener)return;const t=matchMedia(`(resolution: ${this.getValue()}dppx)`),s=()=>{var e;null===(e=this._destroyListener)||void 0===e||e.call(this);const t=this.getValue();this._subscribers.forEach((e=>{e(t)})),this._updateListener()};t.addListener(s),this._destroyListener=()=>{t.removeListener(s),this._destroyListener=null}}}},33155:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.useMemo)((()=>function(e){return t=>{e&&("function"==typeof e?e(t):e.current=t)}}(e)),[e])};var a=s(67294)},39406:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={}){const[t,s]=(0,l.useState)(null),[a,i]=(0,l.useState)(u),n=f(e);return(0,l.useEffect)((()=>{if(t)return c().observe(t,i,e)}),[t,n]),[s,a]};var i=a(s(81109)),n=a(s(51463)),r=a(s(16446)),o=a(s(7900)),l=s(67294);const d={root:null,rootMargin:"0px",threshold:0},u={intersectionRatio:0,isIntersecting:!1};const c=(0,n.default)((()=>new h));class h{constructor(){this._observers=new Map,this._getObserver=e=>{const t=f(e);if(!this._observers.has(t)){const s=new Map,a=new IntersectionObserver((e=>{for(const t of e){const e=s.get(t.target),{intersectionRatio:a,isIntersecting:i}=t;null==e||e({intersectionRatio:a,isIntersecting:i})}}),e);this._observers.set(t,{observer:a,callbacks:s})}return(0,o.default)(this._observers.get(t),"this._observers.get(key)")},this._cleanup=e=>{const t=f(e);this._observers.delete(t)},this.observe=(e,t,s)=>{const{observer:a,callbacks:i}=this._getObserver(s);if(i.has(e))throw new Error("You can't observe the same element twice.");return i.set(e,t),a.observe(e),()=>{a.unobserve(e),i.delete(e),0===i.size&&(a.disconnect(),this._cleanup(s))}}}}function f(e){const{root:t,rootMargin:s,threshold:a}=(0,i.default)((0,i.default)({},d),e);return[t,s,a].map((e=>(0,r.default)(e))).join("-")}},50589:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,s){const{immediate:a=!1}=null!=s?s:{},r=(0,n.default)(e),o=(0,i.useRef)(),l=(0,i.useCallback)((()=>{o.current&&clearInterval(o.current)}),[]),d=(0,i.useCallback)((()=>{l(),o.current=setInterval(r,t)}),[l,t,r]);return(0,i.useEffect)((()=>(a&&d(),l)),[a,d,l]),[d,l]};var i=s(67294),n=a(s(37110))},79939:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,a.useRef)();null==t.current&&(t.current=e());return t};var a=s(67294)},93387:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(n);return(0,a.useLayoutEffect)((()=>{if(e)return(0,i.observe)(e,r)}),[e]),[t,s]};var a=s(67294),i=s(72253);const n={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0}},76006:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const{isStrong:a=!0,componentName:i}=null!=s?s:{};if(null==e)throw __LOG__(4,void 0,new Error,!0)`useModelValues hook received an unexpected \`null\` model`,SEND_LOGS("state-hook-null-model"),new l("Unknown");const d=(0,o.unproxy)(e),u=(0,n.useRef)();function c(){return null==u.current&&(u.current=new r.default(null!=i?i:"Hook(useModelValues)",d.proxyName,t,a,!0)),u.current}const[h,f]=(0,n.useState)((()=>{const e=c(),t=e.getModelAndValidate(d);if(!t)throw new l(e.name);return e.createProxy(t)})),p=(0,n.useCallback)(((e,t)=>{const s=e.getModelAndValidate(t);if(!s)throw new l(e.name);f(e.createProxy(s))}),[]);(0,n.useEffect)((()=>{const e=c(),t=e.getModel(d);return e.attachConcern(t,h.proxyBitMask,p),()=>{e.detachConcern(t,p)}}),[d,h,p]);const[m,_]=(0,n.useState)(d);if(m!==d){const e=c();e.detachConcern(m,p);const t=e.getModelAndValidate(d);if(!t)throw new l(e.name);_(t),f(e.createProxy(t))}return h},t.StateHookMissingModelError=void 0;var i=s(13253),n=s(67294),r=a(s(33586)),o=s(15298);class l extends((0,i.customError)("StateHookMissingModelError")){constructor(e){super(`Received a null value for model key: ${e}`)}}t.StateHookMissingModelError=l},75169:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(e);(0,i.useEffect)((()=>t),[t])};var i=s(67294),n=a(s(37110))},35523:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e})),t.current};var a=s(67294)},55333:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=(0,i.unproxy)(e),o=s.proxyName;null==r[o]&&(r[o]=new Set([...s.__props,...s.__session]));if(!r[o].has(t))throw new n(e.proxyName,t);return(0,a.useCallback)((e=>{if("function"==typeof e){const a=s.get(t);s.set(t,e(a))}else s.set(t,e)}),[t,s])},t.SetStateHookMissingModelPropertyError=void 0;var a=s(67294),i=s(15298);class n extends Error{constructor(e,t){super(`The model "${e}" has no property/sessions "${t}" defined`),this.name="SetStateHookMissingModelPropertyError"}}t.SetStateHookMissingModelPropertyError=n;const r={}},16297:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const a=(0,r.default)(e),o=(0,n.useMemo)((()=>(0,i.default)(a,t,s)),[t,s,a]);return(0,n.useEffect)((()=>o.cancel),[]),o};var i=a(s(23493)),n=s(67294),r=a(s(37110))},33156:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,s){const{immediate:a=!1}=null!=s?s:{},[n,o]=r(e),l=(0,i.useCallback)((()=>n(t)),[n,t]);return(0,i.useEffect)((()=>{a&&l()}),[a,l]),[l,o]},t.useManualTimeout=r;var i=s(67294),n=a(s(37110));function r(e){const t=(0,n.default)(e),s=(0,i.useRef)(),a=(0,i.useCallback)((()=>{s.current&&clearTimeout(s.current)}),[]),r=(0,i.useCallback)((e=>{a(),s.current=setTimeout(t,e)}),[a,t]);return(0,i.useEffect)((()=>a),[a]),[r,a]}},20994:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e]=(0,l.useAddListenerOnce)(),t=(0,d.default)();return(0,n.useCallback)((s=>{r.default.uiBusy?e(r.default,"ui_idle",s):(0,o.default)({signal:t}).then((()=>{s()})).catch((0,i.catchAbort)((()=>{})))}),[e,t])};var i=s(58568),n=s(67294),r=a(s(91952)),o=a(s(61841)),l=s(61192),d=a(s(29579))},29579:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e]=(0,i.useState)((()=>new n.default));return(0,i.useEffect)((()=>()=>e.abort()),[e]),e.signal};var i=s(67294),n=a(s(14505))},38057:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=s(27241),r=a(s(69635)),o=s(85893);class l extends i.PureComponent{constructor(...e){super(...e),this.state={isBusy:n.UIBusyTasks.isBusy()},this.onIdle=()=>{this.setState({isBusy:!1})}}componentDidMount(){this.props.waitIdle&&(this._idleTaskId=n.UIBusyTasks.enqueue(this.onIdle))}componentDidUpdate(e){if(!r.default.equals(e.id,this.props.id)||!this.props.waitIdle){this.state.isBusy&&n.UIBusyTasks.dequeue(this._idleTaskId);const e=n.UIBusyTasks.isBusy();e&&this.props.waitIdle&&(this._idleTaskId=n.UIBusyTasks.enqueue(this.onIdle)),this.setState({isBusy:e})}}componentWillUnmount(){this.props.waitIdle&&n.UIBusyTasks.dequeue(this._idleTaskId)}render(){const{children:e,onComplex:t,waitIdle:s}=this.props,{isBusy:a}=this.state;return a&&s?(0,o.jsx)(o.Fragment,{children:e}):t()}}t.default=l,l.displayName="IdleComponent"},47357:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(41609)),n=a(s(94184)),r=s(67294),o=a(s(89545)),l=a(s(13985)),d=a(s(9297)),u=a(s(2966)),c=s(85893);const h="SMALL",f="MEDIUM",p="LARGE",m="NONE";function _(e){switch(e){case h:return 49;case f:return 100;case p:return 200;case m:return;default:return e}}class g extends r.PureComponent{constructor(...e){super(...e),this.state={isLoaded:!1},this.onLoad=()=>{this.setState({isLoaded:!0})}}render(){const{size:e,fallbackSVG:t,className:s,loader:a,wrapOptions:r={},transition:h,roundContainer:f=!0,imgProps:p}=this.props,{src:m,alt:g,crossOrigin:v,draggable:S}=p,{centerWrapperChild:C,wrapperClassName:y}=r,{isLoaded:E}=this.state,b=(0,n.default)(d.default.avatarImage,{[d.default.isLoaded]:E,[d.default.transition]:h}),T={height:_(e),width:_(e)};let M;a&&!E&&(M=(0,c.jsx)(o.default,{}));const x=(0,c.jsx)(l.default,{src:m,className:b,onLoad:this.onLoad,alt:g,crossOrigin:v,draggable:S}),I=(0,i.default)(r)?x:(0,c.jsx)("div",{className:(0,n.default)(y,d.default.avatarWrapper,d.default.avatarImageWrapper,{[d.default.centerChild]:C,[d.default.isLoaded]:E}),children:x}),P=""!==m?(0,c.jsxs)(c.Fragment,{children:[M,I]}):null;return(0,c.jsxs)("div",{className:(0,n.default)(d.default.avatar,s,{[d.default.roundBorder]:f}),style:T,children:[P,(0,c.jsx)("div",{className:(0,n.default)(y,d.default.avatarWrapper,d.default.avatarSvgWrapper,{[d.default.centerChild]:C,[d.default.transition]:h}),children:(0,c.jsx)(u.default,{name:t})})]})}}t.default=g,g.defaultProps={size:h,loader:!1},g.displayName="ImgWithFallback"},12497:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(40854)),r=a(s(47193)),o=a(s(39e3)),l=s(85149),d=s(45135),u=s(85893);class c extends i.Component{constructor(...e){super(...e),this._setRef=e=>{this._ref=e,this.props.onRef(e)},this.getElement=()=>this._ref,this._rotateFocus=e=>{if(!this._ref)return;let t=d.TabDirection.FORWARD;e&&(e.preventDefault(),t=e.shiftKey?d.TabDirection.BACKWARD:d.TabDirection.FORWARD,n.default.shouldIndicateFocus());const s=(0,l.first)((0,l.filterIterator)((0,d.getTabLoop)(this._ref,t),(e=>!this.props.skipNode(e))));null!=s&&(n.default.shouldIndicateFocus(),s.restoreFocus?s.restoreFocus():r.default.focus(s))}}componentDidMount(){r.default.focus(this._ref)}render(){const{className:e,children:t,onBlur:s}=this.props,a={tab:this._rotateFocus,"shift+tab":this._rotateFocus,"shift+?":this.props.onShowKeyboardShortcuts};return(0,u.jsx)(o.default,{handlers:a,className:e,onBlur:s,onRef:this._setRef,children:t})}}t.default=c,c.displayName="TopLevelHotKeys"},19666:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({action:e,addModifiers:t=!0}){const s=(0,r.getShortcutKey)(e);if(!s)return null;const a=u(s);let c;c=-1===a.indexOf(d)?(0,l.jsx)("span",{className:n.default.key,children:a}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:n.default.key,children:"Shift"}),(0,l.jsx)("span",{className:n.default.key,children:a.substr(d.length)})]});const h=t?function(){const e=[o.default.os===i.default.OS_TYPE.MAC?"Cmd":"Ctrl"];return e.push(o.default.os===i.default.OS_TYPE.MAC?"Ctrl":"Alt"),e.map((e=>(0,l.jsx)("span",{className:n.default.key,children:e},e)))}():null;return(0,l.jsxs)(l.Fragment,{children:[h,c]})},t.expandRawShortcut=u;var i=a(s(55454)),n=a(s(87120)),r=s(6794),o=a(s(35371)),l=s(85893);const d="Shift+";function u(e){if(1!==e.length)return e;switch(e){case">":return"Shift+.";case"<":return"Shift+,"}return e.toLowerCase()!==e?`Shift+${e}`:e.toUpperCase()}},86245:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){if(0===e.length)return"";const s=e[0];if(1===e.length)return s;const a=e[e.length-1];if(2===e.length)return function(e,t,s=!1){return s?i.default.t(1296,o(e,t)):(0,r.jsx)(n.default,{id:1296,params:{A:e,B:t}})}(s,a,t);const l=e[1],d=e.slice(2,e.length-1);return function(e,t,s,a,l=!1){const d=[l?i.default.t(1295,o(e,t)):(0,r.jsx)(n.default,{id:1295,params:{A:e,B:t}},"listItem_firstItem")],u=s.reduce(((e,t,s)=>[l?i.default.t(1293,o(t,e)):(0,r.jsx)(n.default,{id:1293,params:{A:t,B:e}},`listItem_${s}`)]),d);return l?i.default.t(1293,o(u,a)):(0,r.jsx)(n.default,{id:1294,params:{A:u,B:a}})}(s,l,d,a)};var i=a(s(2408)),n=a(s(663)),r=s(85893);function o(e,t){return{A:e,B:t}}},86025:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UnknownDataError=t.DEFAULT_ITEM_HEIGHT=t.DEFAULT_ITEM_WIDTH=void 0;var n=i(s(81109)),r=i(s(23279)),o=i(s(94184)),l=s(13253),d=s(67294),u=i(s(76610)),c=i(s(40954)),h=s(27241),f=a(s(82474)),p=i(s(39683)),m=i(s(55868)),_=i(s(82669)),g=s(85893);t.DEFAULT_ITEM_WIDTH=72;t.DEFAULT_ITEM_HEIGHT=72;class v extends((0,l.customError)("UnknownDataError")){constructor(e){super(`Unknown data encountered while rendering. Item key: ${e.itemKey}`)}}t.UnknownDataError=v;class S extends d.Component{constructor(e){super(e),this.keyPool=new f.default,this.hanging=!1,this.pointerEvents=!0,this.setRefList=e=>{this.refList=e},this.setListLength=()=>{this.setState({renderedListLength:this.state.listLength})},this.getListLength=()=>this.state.renderedListLength,this.handleLayout=e=>{const t=this.refList;if(!t)return;const s="horizontal"===this.props.direction?t.getBoundingClientRect().left-e.position.left:t.getBoundingClientRect().top-e.position.top,a=Math.max(s,0),i="horizontal"===this.props.direction?e.width:e.height,{firstIndex:r,lastIndex:o}=S.computeIndexes(this.props,(0,n.default)((0,n.default)({},this.state),{},{offsetFromStart:a,bodyDimension:i}));this.setState({firstIndex:r,lastIndex:o,bodyDimension:i,offsetFromStart:a})},this.handleScroll=()=>{this.animationFrame?this.hanging=!0:(this.hanging=!1,this.animationFrame=requestAnimationFrame(this._handleScroll))},this._handleScroll=()=>{this.disablePointerEvents();const e=this.props.flatListController.getScrollFromStart();if(null==e)throw new Error("FlatList:ScrollEvent thrown while container is unmounted");const t=Math.max(e,0),s=S.computeIndexes(this.props,(0,n.default)((0,n.default)({},this.state),{},{scrollFromStart:t}));this.setState({scrollFromStart:t,firstIndex:s.firstIndex,lastIndex:s.lastIndex},this.handleFinishScroll)},this.handleFinishScroll=()=>{this.animationFrame=void 0,this.enablePointerEvents(),this.hanging&&this.handleScroll()},this.enablePointerEvents=(0,r.default)((()=>{if(this.animationFrame)return this.enablePointerEvents();null!=this.busyId&&(h.UIBusyTasks.clearBusy(this.busyId),delete this.busyId),this.props.onPointerEventsOn&&this.props.onPointerEventsOn();const e=this.refList;e&&(e.style.pointerEvents="auto"),this.pointerEvents=!1}),150);const{enhancedData:t,listLength:s}=S.computeDataAndListLength(e);this.state={firstIndex:0,lastIndex:0,scrollFromStart:0,offsetFromStart:0,bodyDimension:0,enhancedData:t,listLength:s,renderedListLength:s}}static getDerivedStateFromProps(e,t){const{enhancedData:s,listLength:a}=S.computeDataAndListLength(e),{firstIndex:i,lastIndex:r}=S.computeIndexes(e,(0,n.default)((0,n.default)({},t),{},{enhancedData:s,listLength:a})),o={enhancedData:s,listLength:a,firstIndex:i,lastIndex:r};return(!e.itemEnterAnimationsEnabled||a>=t.renderedListLength)&&(o.renderedListLength=a),o}static computeDataAndListLength(e){let t=0;return{enhancedData:e.data.map((s=>{const a=(0,n.default)((0,n.default)({},s),{},{offset:t}),i=S.getDimension(s,e.direction,e.defaultItemWidth,e.defaultItemHeight);return t+=i,a})),listLength:t}}static getDimension(e,t,s,a){return"horizontal"===t?S.getItemWidth(e,s):S.getItemHeight(e,a)}static getItemWidth(e,t){return null!=e.width&&e.width>0?e.width:t}static getItemHeight(e,t){return null!=e.height&&e.height>0?e.height:t}static computeIndexes(e,t){const{bodyDimension:s,offsetFromStart:a,scrollFromStart:i,listLength:n,enhancedData:r}=t;if(void 0===s||void 0===a)throw new Error("FlatList:Computing FlatList without a valid Container");const{extraItems:o,forceConsistentRenderCount:l,direction:d,defaultItemWidth:u,defaultItemHeight:c}=e;let h=0;for(let e=0;e<r.length;e++){const t=r[e],s=S.getDimension(t,d,u,c);if(a+t.offset+s>i){h=e;break}}let f=r.length-1;const p=l?Math.min(r[h].offset+s,n):Math.min(i+s,n+a);for(let e=h;e<r.length;e++){const t=r[e],s=S.getDimension(t,d,u,c);if(a+t.offset+s>=p){f=e;break}}let m=o;const _=o-h;_>0&&(m+=_);let g=o;const v=f+o-r.length;v>0&&(g+=v);return{firstIndex:Math.max(h-g,0),lastIndex:Math.min(f+m,r.length-1)}}componentDidMount(){this.props.flatListController.registerList({handleLayout:this.handleLayout,handleScroll:this.handleScroll})}componentWillUnmount(){this.props.flatListController.unregisterList(),this.enablePointerEvents.cancel(),this.cancelScroll()}cancelScroll(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0,this.hanging=!1)}disablePointerEvents(){if(this.busyId=h.UIBusyTasks.setBusy(this.busyId),this.pointerEvents)return;this.props.onPointerEventsOff&&this.props.onPointerEventsOff();const e=this.refList;e&&(e.style.pointerEvents="none"),this.pointerEvents=!0}scrollIntoViewIfNeeded(e,t=0){const{enhancedData:s,scrollFromStart:a,bodyDimension:i}=this.state;if(e<0||e>=s.length)throw new Error("Invalid Index.");const n=s[e].offset;(n<a-t||n>a+i+t)&&this.props.flatListController.setScrollFromStart(n)}getComponents(){const{reorderAnimationsEnabled:e,renderItem:t,defaultItemWidth:s,defaultItemHeight:a,keyOrder:i}=this.props,{firstIndex:r,lastIndex:o}=this.state,l=this.state.enhancedData.slice(r,o+1);return this.keyPool.recycleKeysAndMap(l,i).map((({rctKey:i,data:r},o)=>{const l="horizontal"===this.props.direction?{width:S.getItemWidth(r,s)}:{height:S.getItemHeight(r,a)};return(0,g.jsx)(m.default,{data:(0,n.default)((0,n.default)({},r),l),animate:!!e&&p.default.shouldAnimate,zIndex:this.state.enhancedData.length-o-1,renderItem:t,listDirection:this.props.direction},i)}))}render(){const{role:e}=this.props,t="horizontal"===this.props.direction?{width:this.state.renderedListLength}:{height:this.state.renderedListLength};return(0,g.jsx)("div",{className:(0,o.default)(this.props.className),"data-a8n":u.default.key(this.props.a8nKey),ref:this.setRefList,children:(0,g.jsx)("div",{"aria-label":this.props["aria-label"],className:(0,o.default)(c.default.viewport,{[c.default.horizontalListViewport]:"horizontal"===this.props.direction,[c.default.verticalListViewport]:"vertical"===this.props.direction}),role:e,"aria-rowcount":this.props["aria-rowcount"],style:t,children:this.props.itemEnterAnimationsEnabled?(0,g.jsx)(_.default,{transitionName:"fade",onAnimationComplete:this.setListLength,children:this.getComponents()}):this.getComponents()})})}}t.default=S,S.defaultProps={defaultItemHeight:72,defaultItemWidth:72,forceConsistentRenderCount:!0,extraItems:5,initialScrollFromStart:0,reorderAnimationsEnabled:!0,keyOrder:f.KeyOrder.NORMAL},S.displayName="FlatList"},19257:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,flatListControllers:s,onScroll:a,onLayout:u,onRef:c,scrollOffset:h}=e,f=(0,n.default)(e,["children","flatListControllers","onScroll","onLayout","onRef","scrollOffset"]),{children:p,onRef:m,direction:_,flatListControllers:g,onScroll:v,onLayout:S,scrollOffset:C}=e,y=(0,o.useRef)(null),E=(0,o.useCallback)((e=>{y.current=e,m&&m(e)}),[m]),b=()=>{const e=y.current;if(e)return"horizontal"===_?e.scrollLeft:e.scrollTop},T=e=>{const t=y.current;t&&("horizontal"===_?t.scrollLeft=e:t.scrollTop=e)},M=()=>{const e=(0,r.default)(y.current,"observerRef.current");g.forEach((t=>t.triggerLayout({position:e.getBoundingClientRect(),width:e.clientWidth,height:e.clientHeight})))};return(0,o.useEffect)((()=>(g.forEach((e=>e.registerContainer({getScrollFromStart:b,setScrollFromStart:T,onRegisterList:M}))),void 0!==C&&T(C),()=>{g.forEach((e=>e.unregisterContainer()))})),[]),(0,d.jsx)(l.default,(0,i.default)((0,i.default)({},f),{},{onResize:e=>{const t=(0,r.default)(y.current,"observerRef.current"),s=(0,i.default)((0,i.default)({},e),{},{position:t.getBoundingClientRect()});g.forEach((e=>e.triggerLayout(s))),S&&S(s)},onScroll:e=>{v&&v(e),g.forEach((e=>e.triggerScroll()))},onRef:E,children:p}))};var i=a(s(81109)),n=a(s(6479)),r=a(s(7900)),o=s(67294),l=a(s(88155)),d=s(85893)},67893:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{registerContainer(e){this._containerAPI=e,this._listHandlers&&e.onRegisterList()}unregisterContainer(){delete this._containerAPI}triggerScroll(){this._listHandlers&&this._listHandlers.handleScroll()}triggerLayout(e){this._listHandlers&&this._listHandlers.handleLayout(e)}registerList(e){this._listHandlers=e,this._containerAPI&&this._containerAPI.onRegisterList()}unregisterList(){delete this._listHandlers}getScrollFromStart(){if(this._containerAPI)return this._containerAPI.getScrollFromStart()}setScrollFromStart(e){this._containerAPI&&this._containerAPI.setScrollFromStart(e)}}},52715:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.jsx)("div",{className:i.default.loadingSpinner,children:(0,r.jsx)(n.default,{color:"default",size:24,stroke:6})})};var i=a(s(59230)),n=a(s(46714)),r=s(85893)},82474:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KeyOrder=void 0;var i=a(s(89734)),n=a(s(7900));const r=s(54302)({NORMAL:"NORMAL",INVERSE:"INVERSE"});t.KeyOrder=r;t.default=class{constructor(){this._rctKeyToData=new Map,this._keyToRctKey=new Map}_genNewKeys(e){const t=e-this._rctKeyToData.size;if(t<=0)return[];const s=[];for(let a=0;a<e&&(this._rctKeyToData.has(a)||(s.push(a),t!==s.length));a++);return s}recycleKeysAndMap(e,t){const s=new Map,a=new Map,o=this._genNewKeys(e.length),l=new Set(this._rctKeyToData.keys()),d=[];e.forEach((e=>{const t=this._keyToRctKey.get(e.itemKey);void 0!==t?(a.set(e.itemKey,t),s.set(t,e),l.delete(t)):d.push(e)}));const u=[...o,...l];d.forEach((e=>{const i=t===r.NORMAL?u.pop():u.shift();a.set(e.itemKey,i),s.set(i,e)}));const c=(0,i.default)(e,[e=>a.get(e.itemKey)]).map((e=>({rctKey:(0,n.default)(a.get(e.itemKey),"keyToRctKey.get(item.itemKey)"),data:e})));return this._rctKeyToData=s,this._keyToRctKey=a,c}}},39683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={shouldAnimate:!0}},55868:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=s(67294),r=a(s(96774)),o=a(s(96142)),l=a(s(12544)),d=s(85893);const u=o.default.prefix("transform"),c=o.default.prefix("transition");class h extends n.Component{constructor(...e){super(...e),this.state={shouldAnimate:!0,prevItemKey:null,prevRowOffset:null}}static getDerivedStateFromProps(e,t){return(0,i.default)((0,i.default)({},t),{},{prevItemKey:e.data.itemKey,prevRowOffset:e.data.offset,shouldAnimate:f(e,t)})}shouldComponentUpdate(e,t){return this.props.animate!==e.animate||this.props.zIndex!=this.props.zIndex||this.props.renderItem!==e.renderItem||this.state.shouldAnimate!==t.shouldAnimate||!(0,r.default)(this.props.data,e.data)}render(){const{data:e,zIndex:t}=this.props,{shouldAnimate:s}=this.state,a=s?`${u} 200ms ease-in-out`:"none",n="horizontal"===this.props.listDirection?{width:e.width,[u]:`translateX(${e.offset}px)`}:{height:e.height,[u]:`translateY(${e.offset}px)`},r=(0,i.default)({zIndex:t,[c]:a},n),o=this.props.renderItem(e);return(0,d.jsx)("div",{className:l.default.item,style:r,children:o})}}function f(e,t){if(!e.animate)return!1;const{prevItemKey:s}=t;return e.data.itemKey===s&&e.data.offset!==t.prevRowOffset}t.default=h,h.displayName="ListItem"},23958:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=i(s(94184)),o=s(55084),l=s(67294),d=i(s(55454)),u=i(s(49187)),c=a(s(13540)),h=i(s(4919)),f=a(s(49288)),p=i(s(13985)),m=i(s(2408)),_=i(s(71681)),g=i(s(23131)),v=s(25281),S=i(s(40630)),C=i(s(2966)),y=i(s(13038)),E=i(s(1458)),b=s(85893);class T extends l.PureComponent{constructor(e){super(e),this._updateImgSrcUrl=e=>{var t;const s=e.height+50,a="color:red|"+e.lat+", "+e.lng,i=e.lat+", "+e.lng,r=e.width+"x"+s,l=u.default.currentRes===u.default.RES.HIGH?2:1,h=m.default.getLocale(),p=E.default.GSM_NAME,_=E.default.build(d.default.G_MAPS_IMG_URL,(0,n.default)({zoom:15,size:r,scale:l,language:h,client:p},e.showMarker?{markers:a}:{center:i})),g="dark"===(null===(t=this.context)||void 0===t?void 0:t.theme)?`${_}&${d.default.G_MAPS_DARK_MODE_STYLE}`:_;this._lastURL!==g&&(this._lastURL=g,E.default.gsmURL(g,E.default.GSM_NUMS).checkpoint(e.rejectOnUnmount()).then((e=>{this.setState({imgSrcUrl:e,hiResAvail:f.isCached(e)})})).catch((0,o.filteredCatch)(c.Unmount,(()=>{}))))},this._onImgLoaded=()=>{this.state.hiResAvail||this.setState({hiResAvail:!0}),this.props.onLoad&&this.props.onLoad()},this.state={imgSrcUrl:null,hiResAvail:!1},this._updateImgSrcUrl(e)}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>this._updateImgSrcUrl(this.props)))}componentDidUpdate(){this._updateImgSrcUrl(this.props)}render(){const{lat:e,lng:t,name:s,width:a,height:i,className:n,linkify:o,onClick:l,a8nText:d}=this.props,u={pointerEvents:"none",width:a,height:this.state.hiResAvail?void 0:i},c=(0,r.default)(n,{[g.default.hidden]:!this.state.hiResAvail}),f=this.state.hiResAvail?null:(0,b.jsx)(C.default,{name:"map-placeholder",display:"inline"}),_=(0,b.jsx)(p.default,{src:this.state.imgSrcUrl||"",className:c,style:u,hasPrivacyChecks:!1,onLoad:this._onImgLoaded,noXHR:!0});return o?(0,b.jsxs)(h.default,{href:(0,v.getMapUrl)(e,t,s),className:g.default.container,onClick:l,a8nText:d,"aria-label":m.default.t(32),children:[f,_]}):(0,b.jsxs)("span",{className:g.default.container,children:[f,_]})}}T.defaultProps={linkify:!0,showMarker:!0},T.contextType=y.default,T.displayName="Map";var M=(0,_.default)((0,S.default)(T));t.default=M},62309:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t}=e,s=(0,r.default)(e.chat,["unreadCount"]),a=e.onMarkUnread.bind(null,!s.unreadCount);return(0,o.jsx)(i.default,{a8n:"mi-mark-as",action:a,disabled:t,children:s.unreadCount?n.default.t(1162):n.default.t(1163)},"MarkUnreadMenuItem")};var i=a(s(47452)),n=a(s(2408)),r=a(s(76006)),o=s(85893)},15377:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Pending=function(e){const{cancelable:t}=e,s=(0,i.default)(r.default.icon,t?r.default.cursorPointer:null);return(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-pending",children:(0,d.jsxs)("div",{className:s,children:[(0,d.jsx)("div",{className:r.default.spinner,children:(0,d.jsx)(o.default,{size:50,stroke:3,color:"white"})}),t?(0,d.jsx)("div",{className:r.default.cancel,children:(0,d.jsx)(l.default,{name:"media-cancel"})}):null]})})},t.Download=function({filesize:e=0,onClick:t}){return e>0?(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-download",children:(0,d.jsxs)("button",{className:(0,i.default)(r.default.btnMeta,r.default.cursorPointer),onClick:t,children:[(0,d.jsx)(l.default,{name:"media-download",className:r.default.iconMeta}),(0,d.jsx)("span",{children:n.default.filesize(e)})]})}):(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-download",children:(0,d.jsx)("button",{className:(0,i.default)(r.default.button,r.default.cursorPointer),onClick:t,children:(0,d.jsx)(l.default,{name:"media-download"})})})},t.Upload=function({filesize:e=0}){return e>0?(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-upload",children:(0,d.jsxs)("button",{className:(0,i.default)(r.default.btnMeta,r.default.cursorPointer),children:[(0,d.jsx)(l.default,{name:"media-upload",className:r.default.iconMeta}),(0,d.jsx)("span",{children:n.default.filesize(e)})]})}):(0,d.jsx)("div",{className:r.default.controls,"data-testid":"media-state-upload",children:(0,d.jsx)("div",{className:r.default.button,children:(0,d.jsx)(l.default,{name:"media-upload"})})})},t.Play=function(){return(0,d.jsx)("div",{className:r.default.controls,children:(0,d.jsx)("div",{className:r.default.button,children:(0,d.jsx)(l.default,{name:"media-play",className:r.default.play})})})},t.GifIcon=function({onClick:e}){return(0,d.jsx)("div",{role:"button",className:r.default.controls,onClick:e,"data-testid":"media-state-gif-icon",children:(0,d.jsx)("div",{className:r.default.button,children:(0,d.jsx)(l.default,{name:"media-gif"})})})};var i=a(s(94184)),n=a(s(2408)),r=a(s(45023)),o=a(s(46714)),l=a(s(2966)),d=s(85893)},99053:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,thumbnailPlaceholder:s}=e,a=(0,n.default)(e,["msg","thumbnailPlaceholder"]),{mediaData:r}=(0,d.default)(t,["mediaData"]);if(null==r){return null!=s?(0,u.jsx)(h,{className:a.containerClassName,children:s}):null}return(0,u.jsx)(c,(0,i.default)({mediaData:r,thumbnailPlaceholder:s},a))};var i=a(s(81109)),n=a(s(6479)),r=a(s(94184)),o=s(67294),l=a(s(21279)),d=a(s(76006)),u=s(85893);function c(e){const{containerClassName:t,childClassName:s,mediaData:a,thumbnailPlaceholder:i}=e,{preview:n,fullPreviewData:r}=(0,d.default)(a,["preview","fullPreviewData"]),o=[];if(null!=n&&o.push({opaque:n,key:"preview"}),null!=r&&o.push({opaque:r,key:"fullPreviewData"}),0===o.length){return null!=i?(0,u.jsx)(h,{className:t,children:i}):null}return(0,u.jsx)(h,{className:t,children:o.map((({key:e,opaque:t})=>(0,u.jsx)(f,{className:s,opaque:t},e)))})}function h(e){const{className:t,children:s}=e;return(0,u.jsx)("div",{className:(0,r.default)(l.default.container,t),children:s})}function f(e){const{className:t,opaque:s}=e;return(0,o.useEffect)((()=>{if(null!=s)return s.retain(),()=>{s.autorelease()}}),[s]),(0,u.jsx)("div",{className:(0,r.default)(l.default.child,t),style:s?{backgroundImage:`url("${s.url()}")`}:null})}},47941:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBar=function(e){const t=(0,n.default)(l.default.menu,{[l.default.menuDefault]:!e.theme,[l.default.menuStrong]:"strong"===e.theme,[l.default.menuInverse]:"inverse"===e.theme,[l.default.menuMediaEditor]:"media-editor"===e.theme});return(0,p.jsx)("div",{className:t,children:e.children})},t.MenuBarItem=function(e){const{text:t,transitionName:s="dropdown",disabled:a=!1,children:m,icon:_,title:g,selected:v}=e,[S,C]=(0,r.useState)(!1),y=null!=m&&S?(0,p.jsx)(d.default,{displayName:"MenuBarMenuItem",escapable:!0,popable:!0,requestDismiss:()=>{C(!1)},children:m}):null,E=(0,n.default)(l.default.item,{[l.default.selected]:v,[l.default.active]:S,[l.default.disabled]:a}),[b,T]=(0,h.default)((t=>{e.onClick&&e.onClick(t),t.isDefaultPrevented()||(t.preventDefault(),S||null!=m&&C(!0))}),{disabled:a}),[M,x]=(0,u.default)(),I=(0,c.default)(b,M);return(0,p.jsxs)("div",{"data-a8n":o.default.key(e.a8nText),className:E,children:[(0,p.jsxs)("div",(0,i.default)((0,i.default)({},T),{},{className:(0,n.default)(l.default.button,x&&l.default.itemFocused),"data-tab":a?void 0:e.tabOrder,title:g,"aria-label":g,ref:I,children:[_,t&&(0,p.jsx)("span",{className:l.default.itemText,children:t})]})),(0,p.jsx)(f.default,{transitionName:s,children:y})]})};var i=a(s(81109)),n=a(s(94184)),r=s(67294),o=a(s(76610)),l=a(s(471)),d=a(s(63477)),u=a(s(2887)),c=a(s(69509)),h=a(s(82275)),f=a(s(82669)),p=s(85893)},904:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(91952)),o=a(s(2408)),l=a(s(71681)),d=a(s(22555)),u=a(s(5265)),c=a(s(2966)),h=s(85893);class f extends n.Component{constructor(...e){super(...e),this.refDiv=(0,n.createRef)(),this.getElement=()=>this.refDiv.current,this.addOrRemoveLabelOnSelected=()=>{const e=this.props.selectedModels.getSelected();r.default.openModal((0,h.jsx)(d.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))}}componentDidMount(){this.props.selectedModels&&this.props.listeners.add(this.props.selectedModels,"all",(()=>{this.forceUpdate()}))}componentDidUpdate(){0===this.props.selectedModels.getSelected().length&&this.props.onCancel&&this.props.onCancel()}render(){const{labelEditEnabled:e,onRemoveLabel:t}=this.props,s=this.props.selectedModels.getSelected().length;let a,n,r;const{onDelete:l}=this.props;e&&s>0&&(a=(0,h.jsx)(m,{name:"label",disabled:!s,title:o.default.t(1909),onClick:this.addOrRemoveLabelOnSelected})),t&&s>0&&(r=(0,h.jsx)(m,{name:"label-delete",disabled:!s,title:o.default.t(1911),onClick:t})),l&&s>0&&(n=(0,h.jsx)(m,{name:"delete",disabled:!s,title:o.default.t(1910),onClick:l}));const d=(0,i.default)(u.default.multiControls,{[u.default.drawerHeader]:"drawer-header"===this.props.theme,[u.default.chatListPanel]:"chatlist-panel"===this.props.theme});return(0,h.jsxs)("div",{className:d,ref:this.refDiv,children:[(0,h.jsx)(m,{name:"x",onClick:this.props.onCancel}),(0,h.jsx)("div",{className:u.default.multiCount,children:o.default.t(1598,{count:s,_plural:s})}),a,n,r]})}}f.displayName="MixedMultiselectBar";var p=(0,l.default)(f);t.default=p;const m=({name:e,title:t,onClick:s,directional:a,disabled:i})=>(0,h.jsx)("button",{className:u.default.multiselectIcon,title:t,onClick:s,disabled:i?"disabled":void 0,children:(0,h.jsx)(c.default,{name:e,directional:a})})},7542:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=i(s(59854)),o=i(s(18446)),l=i(s(78718)),d=i(s(23279)),u=i(s(94184)),c=s(55084),h=s(78285),f=i(s(7900)),p=s(67294),m=i(s(91952)),_=a(s(13540)),g=i(s(71681)),v=i(s(39200)),S=i(s(40630)),C=i(s(2966)),y=i(s(45285)),E=s(85893);const b=s(54302).Mirrored(["TOP","BOTTOM","LEFT","RIGHT","TOP_RIGHT","TOP_LEFT","BOTTOM_RIGHT","BOTTOM_LEFT"]),T=s(54302).Mirrored(["IDLE","RESIZE","MOVE"]);function M(e){switch(e){case b.LEFT:return v.default.leftResizer;case b.BOTTOM:return v.default.bottomResizer;case b.RIGHT:return v.default.rightResizer;case b.TOP:return v.default.topResizer;case b.TOP_LEFT:return v.default.topLeftResizer;case b.TOP_RIGHT:return v.default.topRightResizer;case b.BOTTOM_LEFT:return v.default.bottomLeftResizer;case b.BOTTOM_RIGHT:return v.default.bottomRightResizer}}function x({getResizeCallback:e,currentAction:t}){return Array.from(b.members()).map((s=>(0,E.jsx)("div",{"data-testid":`move_resize_component_resizer_${s}`,className:(0,u.default)(M(s),v.default.resizer,{[v.default.defaultCursor]:t===T.RESIZE}),onMouseDown:e(s)},s)))}function I(e){return e.disabled?e.children:(0,E.jsx)("div",{className:(0,u.default)(v.default.moveable,{[v.default.defaultCursor]:e.currentAction===T.RESIZE}),onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,grab:e.currentAction===T.MOVE?"true":"supported",children:e.children})}class P extends p.Component{constructor(e){let t;super(e),this._setStateTimer=new h.ShiftTimer((e=>{this.setState(e)})),this._setRefComponent=e=>{this._refComponent=e},this.addListeners=()=>{window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("resize",this.handleResize),this.props.listeners.add(m.default,"floater_escape_overlap",this._escapeOverlapMove)},this._getInitialStyle=()=>this.props.initialStyle?{width:this.props.initialStyle.width,left:this.props.initialStyle.left,bottom:this.props.initialStyle.bottom}:{width:this.props.minWidth,left:this.props.margin.x,bottom:this.props.margin.y},this._getResizerCallback=e=>t=>{0===t.button&&this.setState({resizeDirection:e,currentAction:T.RESIZE,resizeStartPiPStyle:{width:this.state.width,left:this.state.left,bottom:this.state.bottom},resizeStartMousePosition:{x:t.clientX,y:t.clientY}}),t.stopPropagation()},this.handleMoveStart=e=>{0===e.button&&this.setState({currentAction:T.MOVE,moveStartPositionStyle:{left:this.state.left,bottom:this.state.bottom},moveStartMousePosition:{x:e.clientX,y:e.clientY}}),e.stopPropagation()},this.handleMoveStop=()=>{const e=this._getRect();this.props.onMoveStop&&this.props.onMoveStop(e)},this.handleResize=(0,d.default)((()=>{const e=window.innerHeight-2*this.props.margin.y,t=window.innerWidth-2*this.props.margin.x;let s=this.state.width,a=s/this.props.aspectRatio,i=this.state.bottom,n=this.state.left;a>e&&(a=e,s=e*this.props.aspectRatio),s>t&&(a=t/this.props.aspectRatio,s=t),i+a>e+this.props.margin.y&&(i=e+this.props.margin.y-a),n+s>t+this.props.margin.x&&(n=t+this.props.margin.x-s),this.state.previousWindowSize.width<n+s+this.props.margin.x+3&&(n=t+this.props.margin.x-s),this.state.previousWindowSize.height<i+a+this.props.margin.y+3&&(i=e+this.props.margin.y-a);const r=null!=this.state.previousConvPanelRightBorder&&this.state.previousConvPanelRightBorder>0&&Math.abs(this.state.left+s+this.props.margin.x-this.state.previousConvPanelRightBorder)<3;let d;this.props.escapeConversationHeader&&m.default.getConversationHeaderOffset((e=>{d=e.right}));const u=d&&d<window.innerWidth;r&&null!=d&&0!==d&&u&&(n=d-this.props.margin.x-s);const c={bottom:Math.max(this.props.margin.y,i),left:Math.max(this.props.margin.x,n),width:Math.max(this.props.minWidth,s),previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:d},h=(0,l.default)(this.state,["bottom","left","width","previousWindowSize","previousConvPanelRightBorder"]);(0,o.default)(c,h)||this.setState(c)}),50),this._validateMoveResize=(e,t,s,a)=>{let i=e,n=t,o=s,l=0,d=0,u=0;switch(a){case T.RESIZE:l=this.state.resizeStartPiPStyle.width,d=this.state.resizeStartPiPStyle.left,u=this.state.resizeStartPiPStyle.bottom;break;case T.MOVE:l=this.state.width,d=this.state.moveStartPositionStyle.left,u=this.state.moveStartPositionStyle.bottom}const c=window.innerHeight,h=window.innerWidth,f=l+i,p=f/this.props.aspectRatio,m=u+o,_=(0,r.default)(m,2),g=d+n,v=(0,r.default)(g,2),S=this.props.minWidth,C=(0,r.default)(this.props.margin.y,2),y=(0,r.default)(c-p-this.props.margin.y,2),E=(0,r.default)(this.props.margin.x,2),b=(0,r.default)(h-f-this.props.margin.x,2);if(C>_||_>y)switch(a){case T.RESIZE:o=0,n=0,i=0;break;case T.MOVE:o=0}if(E>v||v>b)switch(a){case T.RESIZE:o=0,n=0,i=0;break;case T.MOVE:n=0}if(i&&m+p+this.props.margin.y>c)switch(a){case T.RESIZE:o=0,n=0,i=0}if(i&&g+f+this.props.margin.x>h)switch(a){case T.RESIZE:o=0,n=0,i=0}return(f<S||p+2*this.props.margin.y>c||f+2*this.props.margin.x>h)&&(o=0,n=0,i=0),{deltaWidth:i,deltaBottom:o,deltaLeft:n}},this.handleMouseMove=e=>{let t,s=0,a=0,i=0,n=0;switch(this.state.currentAction){case T.IDLE:return;case T.RESIZE:switch(this.state.resizeDirection){case b.TOP:a=this.state.resizeStartMousePosition.y-e.clientY,s=a*this.props.aspectRatio;break;case b.BOTTOM:a=e.clientY-this.state.resizeStartMousePosition.y,s=a*this.props.aspectRatio,n=-a;break;case b.RIGHT:s=e.clientX-this.state.resizeStartMousePosition.x,a=s/this.props.aspectRatio,n=-a;break;case b.LEFT:s=this.state.resizeStartMousePosition.x-e.clientX,a=s/this.props.aspectRatio,n=-a,i=-s;break;case b.TOP_RIGHT:s=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)),a=s/this.props.aspectRatio;break;case b.TOP_LEFT:s=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)),a=s/this.props.aspectRatio,i=-s;break;case b.BOTTOM_RIGHT:s=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)),a=s/this.props.aspectRatio,n=-a;break;case b.BOTTOM_LEFT:s=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)),a=s/this.props.aspectRatio,n=-a,i=-s}t=this._validateMoveResize(s,i,n,T.RESIZE);let r=0,o=0,l=0;if(0===t.deltaWidth&&0===t.deltaLeft&&0===t.deltaBottom){if(s<0)switch(this.state.resizeDirection){case b.TOP:case b.TOP_RIGHT:s=this.props.minWidth-this.state.resizeStartPiPStyle.width,n=0,i=0;break;case b.TOP_LEFT:s=this.props.minWidth-this.state.resizeStartPiPStyle.width,i=-s,n=0;break;case b.BOTTOM:case b.RIGHT:case b.BOTTOM_RIGHT:s=this.props.minWidth-this.state.resizeStartPiPStyle.width,a=s/this.props.aspectRatio,n=-a,i=0;break;case b.LEFT:case b.BOTTOM_LEFT:s=this.props.minWidth-this.state.resizeStartPiPStyle.width,a=s/this.props.aspectRatio,n=-a,i=-s}else if(s>0){const e=this.state.resizeStartPiPStyle.width/this.props.aspectRatio;switch(this.state.resizeDirection){case b.TOP:case b.TOP_RIGHT:s=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-e-this.state.resizeStartPiPStyle.bottom))-.1;break;case b.TOP_LEFT:s=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-e-this.state.resizeStartPiPStyle.bottom))-.1,a=s/this.props.aspectRatio,i=-s;break;case b.BOTTOM:case b.RIGHT:case b.BOTTOM_RIGHT:s=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1,a=s/this.props.aspectRatio,n=-a;break;case b.LEFT:case b.BOTTOM_LEFT:s=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1,a=s/this.props.aspectRatio,n=-a,i=-s}}r=this.state.resizeStartPiPStyle.width+s,o=this.state.resizeStartPiPStyle.left+i,l=this.state.resizeStartPiPStyle.bottom+n,this.setState({width:r,left:o,bottom:l})}else r=this.state.resizeStartPiPStyle.width+t.deltaWidth,o=this.state.resizeStartPiPStyle.left+t.deltaLeft,l=this.state.resizeStartPiPStyle.bottom+t.deltaBottom,this.setState({width:r,left:o,bottom:l});this.props.onResize&&this.props.onResize(r,o,l);break;case T.MOVE:i=e.clientX-this.state.moveStartMousePosition.x,n=this.state.moveStartMousePosition.y-e.clientY,t=this._validateMoveResize(s,i,n,T.MOVE);let d=0,u=0;d=0!==i&&0===t.deltaLeft?i>0?window.innerWidth-this.state.width-this.props.margin.x:this.props.margin.x:this.state.moveStartPositionStyle.left+t.deltaLeft,u=0!==n&&0===t.deltaBottom?n>0?window.innerHeight-this.state.width/this.props.aspectRatio-this.props.margin.y-.1:this.props.margin.y:this.state.moveStartPositionStyle.bottom+t.deltaBottom,this.setState({left:d,bottom:u}),this.props.onMove&&this.props.onMove(d,u)}},this.handleMouseUp=()=>{this.setState({currentAction:T.IDLE})},this._getRect=()=>({top:window.innerHeight-this.state.bottom-this.state.width/this.props.aspectRatio,left:this.state.left,bottom:window.innerHeight-this.state.bottom,right:this.state.left+this.state.width}),this._escapeOverlapMove=(e,t)=>{const s=e.getBoundingClientRect(),a={left:s.left-t,top:s.top-t,right:s.right+t,bottom:s.bottom+t},i=this._getRect();if(!this._doOverlap(i,a))return;const n=this._escapeDistance(i,a);let r,o;if(this._isTranslationOutOfBound(-n.toLeftDistance,0)||(void 0===r||n.toLeftDistance<r)&&(r=n.toLeftDistance,o=b.LEFT),this._isTranslationOutOfBound(0,-n.toBottomDistance)||(void 0===r||n.toBottomDistance<r)&&(r=n.toBottomDistance,o=b.BOTTOM),this._isTranslationOutOfBound(n.toRightDistance,0)||(void 0===r||n.toRightDistance<r)&&(r=n.toRightDistance,o=b.RIGHT),this._isTranslationOutOfBound(0,n.toTopDistance)||(void 0===r||n.toTopDistance<r)&&(r=n.toTopDistance,o=b.TOP),void 0===r||null==o)return;let l={};switch(o){case b.LEFT:l={left:this.state.left-n.toLeftDistance};break;case b.BOTTOM:l={bottom:this.state.bottom-n.toBottomDistance};break;case b.RIGHT:l={left:this.state.left+n.toRightDistance};break;case b.TOP:l={bottom:this.state.bottom+n.toTopDistance}}const d=(0,y.default)((0,f.default)(this._refComponent,"this._refComponent"),l,{duration:200});Promise.race([d,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState(l)})).catch((0,c.filteredCatch)(_.Unmount,(()=>{})))},this.props.escapeConversationHeader&&m.default.getConversationHeaderOffset((e=>{t=e.right}));const s={resizeDirection:b.TOP,currentAction:T.IDLE,resizeStartMousePosition:{x:0,y:0},resizeStartPiPStyle:{width:0,bottom:0,left:0},moveStartMousePosition:{x:0,y:0},moveStartPositionStyle:{left:0,bottom:0},previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:t};this.props.animationStartStyle?this.state=(0,n.default)((0,n.default)({},s),this.props.animationStartStyle):this.state=(0,n.default)((0,n.default)({},s),this._getInitialStyle())}componentWillUnmount(){this.handleResize.cancel(),this._setStateTimer.cancel(),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("resize",this.handleResize)}componentDidMount(){if(!this.props.animationStartStyle)return this.addListeners(),void this.handleResize();const e=this.props.animationStartStyle,t=this._getInitialStyle(),s=e.width/this.props.aspectRatio,a=e.height,i=a/s,r=(0,n.default)((0,n.default)({},t),{},{height:t.width/this.props.aspectRatio,scaleY:[1,i],translateY:[0,(s-a)/2/i]}),o=(0,y.default)((0,f.default)(this._refComponent,"this._refComponent"),r,{easing:"easeInOutQuart",duration:400});this._initialAnimationPromise=Promise.race([o,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this._initialAnimationPromise=null,this.setState(t),this.addListeners(),this.handleResize()})).catch((0,c.filteredCatch)(_.Unmount,(()=>{})))}componentDidUpdate(e){if(this.props.aspectRatio!==e.aspectRatio&&this.props.initialStyle){if(this._initialAnimationPromise)return void this._setStateTimer.onOrAfter(400,this.props.initialStyle);const e=this.props.initialStyle.width,t=this.props.initialStyle.left+e-(this.state.width+this.state.left),s=this.props.initialStyle.bottom+e/this.props.aspectRatio-(this.state.bottom+this.state.width/this.props.aspectRatio);Math.abs(t)<.1&&Math.abs(s)<.1?this.setState(this.props.initialStyle):this.setState({width:e})}}_getDimensions(){return{width:this.state.width,height:this.state.width/this.props.aspectRatio}}_doOverlap(e,t){return!(e.right<=t.left||e.left>=t.right)&&!(e.bottom<=t.top||e.top>=t.bottom)}_escapeDistance(e,t){return{toLeftDistance:e.right-t.left,toBottomDistance:t.bottom-e.top,toRightDistance:t.right-e.left,toTopDistance:e.bottom-t.top}}_isTranslationOutOfBound(e,t){const s=window.innerWidth,a=window.innerHeight,i=this.state.left+e,n=this.state.bottom+t,r=this.state.width,o=r/this.props.aspectRatio,l=this.props.margin.x,d=s-r-this.props.margin.x,u=this.props.margin.y,c=a-o-this.props.margin.y;return u>n||n>c||(l>i||i>d)}render(){const e=this._getDimensions(),t={width:e.width,height:e.height,bottom:this.state.bottom+"px",left:this.state.left+"px"};return(0,E.jsxs)("div",{"data-testid":"move_resize_component",ref:this._setRefComponent,className:(0,u.default)(v.default.moveResizeComponentContainer),style:t,onMouseMove:this.props.onMouseMove,children:[this.props.enableDragBar||null!=this.props.topContent?(0,E.jsxs)("div",{className:(0,u.default)(v.default.extraContent,v.default.topContent,{[v.default.extraContentVisible]:this.props.extraContentVisible}),children:[this.props.enableDragBar?(0,E.jsx)(I,{onMouseDown:this.handleMoveStart,onMouseUp:this.handleMoveStop,currentAction:this.state.currentAction,children:(0,E.jsx)(C.default,{className:v.default.dragBar,name:"drag-texture"})}):null,this.props.topContent]}):null,null!=this.props.bottomContent?(0,E.jsxs)("div",{className:(0,u.default)(v.default.extraContent,v.default.bottomContent,{[v.default.extraContentVisible]:this.props.extraContentVisible}),children:[(0,E.jsx)("div",{className:(0,u.default)(v.default.blurryBackground)}),this.props.bottomContent]}):null,this.props.disableResize?null:(0,E.jsx)(x,{getResizeCallback:this._getResizerCallback,currentAction:this.state.currentAction}),(0,E.jsx)("div",{className:(0,u.default)(v.default.moveResizeComponentInnerContainer,this.props.className),children:(0,E.jsx)(I,{onMouseDown:this.handleMoveStart,onMouseUp:this.handleMoveStop,currentAction:this.state.currentAction,disabled:this.props.enableDragBar,children:this.props.children})})]})}}P.displayName="MoveResizeComponent";var A=(0,g.default)((0,S.default)(P));t.default=A},74343:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(35161)),r=i(s(63105)),o=i(s(94184)),l=s(67294),d=i(s(91952)),u=i(s(75940)),c=i(s(7235)),h=i(s(97227)),f=i(s(85033)),p=s(78615),m=i(s(2408)),_=i(s(71681)),g=i(s(22555)),v=i(s(4231)),S=i(s(45472)),C=i(s(31430)),y=s(15298),E=i(s(2966)),b=a(s(49201)),T=s(85893);class M extends l.Component{constructor(...e){super(...e),this._refDiv=(0,l.createRef)(),this.getElement=()=>this._refDiv.current,this._handleStarChanged=e=>{this.props.selectedMessages.isSelected(e)&&this.forceUpdate()},this._handleStarSelected=()=>{const{chat:e,selectedMessages:t,toastPosition:s}=this.props,a=t.getSelected();e&&d.default.sendStarMsgs(e,a,null,s),this.props.onCancel()},this._handleUnstarSelected=()=>{const{chat:e,selectedMessages:t,toastPosition:s}=this.props,a=t.getSelected();e&&d.default.sendUnstarMsgs(e,a,null,s),this.props.onCancel()},this._handleDownloadSelected=()=>{const e=(0,r.default)(this.props.selectedMessages.getSelected(),(e=>e.mediaData));if(!e.length)return;const t=(0,r.default)(e,(e=>!e.mediaData.isDownloadable()));t.length>0?(d.default.openToast((0,T.jsx)(b.default,{msg:m.default.t(789),id:(0,b.genId)()})),Promise.all((0,n.default)(t,(e=>e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MULTI_SELECT_DOWNLOAD,isUserInitiated:!0})))).then((()=>{const t=(0,r.default)(e,(e=>e.mediaData.isDownloadable()));e.length>t.length&&d.default.openToast((0,T.jsx)(b.default,{msg:m.default.t(896,{_plural:e.length-t.length,count:e.length-t.length}),id:(0,b.genId)()})),t.length&&h.default.initDownload(t)}))):h.default.initDownload(e),this.props.onCancel()},this.addOrRemoveLabelOnSelected=()=>{const e=this.props.selectedMessages.getSelected();d.default.openModal((0,T.jsx)(g.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))},this._handleDeleteSelected=()=>{const{chat:e,selectedMessages:t,toastPosition:s}=this.props,a=t.getSelected(),i=a.every((e=>e.canRevoke()));e&&d.default.openModal((0,T.jsx)(c.default,{chat:e,msgList:a.map(y.unproxy),deletePrompt:!0,revokePrompt:i&&!this.props.disableRevoke,toastPosition:s,onCancel:this.props.onCancel}))},this._handleForwardSelected=()=>{let e=this.props.selectedMessages.getSelected();!this.props.noSortOnForward&&this.props.chat&&(e=this.props.chat.sortMsgs(e));const t=e.length,s=()=>{this.props.onCancel()},a=(0,r.default)(e,(e=>e.canForward()));a.length?t!==a.length?d.default.openModal((0,T.jsx)(u.default,{title:m.default.t(694),onOK:()=>{d.default.openModal((0,T.jsx)(f.default,{msgs:a,pushTransition:"none",popTransition:"none",onForward:s}),{transition:"modal-flow"})},okText:m.default.t(904),onCancel:()=>d.default.closeModal(),cancelText:m.default.t(1912),children:m.default.t(693)})):d.default.openModal((0,T.jsx)(f.default,{msgs:e,pushTransition:"none",popTransition:"none",onForward:s}),{transition:"modal-flow"}):d.default.openModal((0,T.jsx)(u.default,{title:m.default.t(888),onOK:()=>d.default.closeModal(),okText:m.default.t(2085),children:m.default.t(885,{_plural:t})}))}}componentDidMount(){this.props.selectedMessages.getSelected().forEach((e=>{this.props.listeners.add(e,"change:star",(()=>{this.forceUpdate()}))})),this.props.listeners.add(this.props.selectedMessages,"all",(()=>{this.forceUpdate()})),this.props.listeners.add(S.default,"change:star",this._handleStarChanged)}render(){const e=this.props.selectedMessages.getSelected(),t=e.length,s=e.every((e=>e.canForward())),a=e.every((e=>e.canStar())),i=e.every((e=>e.mediaData)),n=e.every((e=>!e.asRevoked)),r=(0,T.jsx)(I,{disabled:!t||!s,name:"forward",onClick:this._handleForwardSelected,title:m.default.t(909,{_plural:t})}),l=(0,T.jsx)(I,{name:"delete",disabled:!t,title:m.default.t(754,{_plural:t}),onClick:this._handleDeleteSelected});let d,u,c;t&&e.every((e=>e.star))?(d=this._handleUnstarSelected,u="unstar-btn",c=m.default.t(1722,{_plural:t})):(d=this._handleStarSelected,u="star-btn",c=m.default.t(1639,{_plural:t}));const h=(0,T.jsx)(I,{name:u,disabled:!t||!a,title:c,onClick:d}),f=(0,p.canEditLabelAssociation)()&&(0,T.jsx)(I,{disabled:!t||!n,name:"label",onClick:this.addOrRemoveLabelOnSelected,title:m.default.t(1093)});let _;Modernizr.adownload&&this.props.downloadButton&&i&&(_=(0,T.jsx)(I,{name:"download",disabled:!t,title:m.default.t(1908),onClick:this._handleDownloadSelected}));const g=(0,o.default)(C.default.multiControls,{[C.default.mediaGalleryTheme]:"mediaGallery"===this.props.theme});return(0,T.jsxs)("div",{className:g,ref:this._refDiv,children:[(0,T.jsx)(I,{name:"x",onClick:this.props.onCancel}),(0,T.jsx)("span",{className:C.default.multiCount,children:m.default.t(1598,{count:t,_plural:t})}),f,h,l,r,_]})}}M.defaultProps={downloadButton:!0},M.displayName="MultiselectBar";var x=(0,_.default)(M);t.default=x;const I=({name:e,title:t,onClick:s,directional:a,disabled:i})=>(0,T.jsx)("button",{className:C.default.multiselectIcon,title:t,onClick:s,disabled:i?"disabled":void 0,children:(0,T.jsx)(E.default,{name:e,directional:a})})},78746:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t}=e,s=(0,d.default)(e.mute,["isMuted"]),a=(0,d.default)(e.chat,["archive"]),i=(0,d.default)(e.settings,["showArchiveV2"]),h=e.onMute.bind(null,!s.isMuted);let f,p,m,_;a.archive&&(0,r.archiveV2Supported)()&&i.showArchiveV2?(f=c,_=o.default.t(2067),p=n.ThemeOptions.MUTED,m=(0,u.jsx)(l.default,{anchor:l.TooltipAnchor.Left,children:o.default.t(263)})):(_=s.isMuted?o.default.t(2067):o.default.t(2066),f=h);return(0,u.jsx)(n.default,{action:f,disabled:t,theme:p,tooltip:m,children:_})};var n=i(s(47452)),r=s(78615),o=a(s(2408)),l=i(s(32437)),d=a(s(76006)),u=s(85893);const c=()=>{}},78972:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ContactName=g,t.GroupName=v,t.default=function(e){if(e.chat&&!e.chat.isUser){const{chat:t}=e,s=(0,n.default)(e,["chat"]);return(0,_.jsx)(v,(0,i.default)({chat:t,groupMetadata:t.groupMetadata},s))}let t,s;if(e.chat){const{chat:a}=e,i=(0,n.default)(e,["chat"]);t=a.contact,s=i}else{const{contact:a}=e,i=(0,n.default)(e,["contact"]);t=a,s=i}return(0,_.jsx)(g,(0,i.default)({contact:t},s))};var i=a(s(81109)),n=a(s(6479)),r=a(s(94184)),o=a(s(85051)),l=a(s(12950)),d=s(49895),u=a(s(84498)),c=a(s(29462)),h=a(s(37151)),f=a(s(88893)),p=a(s(2966)),m=a(s(76006)),_=s(85893);function g(e){const{element:t="span",highlightText:s,titlify:a,ellipsify:i,you:n,selectable:g,useShortName:v,useDisplayName:S,onClick:C,showLabel:y,showBusinessCheckmark:E,showNotifyName:b,useVerifiedName:T,firstLabel:M}=e,x=(0,m.default)(e.contact,["isPSA","formattedUser","formattedName","formattedShortName","displayName","labels","name","notifyName","isMe","verifiedName"]);let I;s&&(I=d.Configuration.SearchName({terms:[s]}));const P=(0,r.default)(x.isPSA?h.default.psa:null,e.className);let A;if(A=S&&x.displayName?x.displayName:v&&x.formattedShortName?x.formattedShortName:T&&x.verifiedName?x.verifiedName:n&&x.isMe?x.formattedName:b&&!x.name&&x.notifyName?`~${x.notifyName}`:x.formattedUser,!A)return __LOG__(4,void 0,new Error,!0)`displayName:${A},
formattedName:${x.formattedName},
name:${x.name},
formattedShortName:${x.formattedShortName},
formattedUser:${x.formattedUser}`,SEND_LOGS("display name is null or undefined"),"";const N=(0,_.jsx)(o.default,{text:(0,f.default)(A),element:t,className:P,formatters:I,titlify:a,ellipsify:i,direction:"auto",selectable:g,inlineblock:!0,onClick:C}),O=e.labels||x.labels;O&&M&&(0,c.default)(O,M);const w=y&&O&&(0,_.jsx)("div",{className:h.default.labels,children:(0,_.jsx)(u.default,{labels:O,showName:!1})});return x.isPSA||l.default.supportsFeature(l.default.F.VNAME_V_2)&&E?(0,_.jsxs)("span",{className:h.default.verified,children:[N,(0,_.jsx)("div",{className:h.default.icon,children:(0,_.jsx)(p.default,{name:"psa-verified"})}),w]}):w?(0,_.jsxs)("span",{className:h.default.hasLabels,children:[N,w]}):N}function v(e){const{element:t,highlightText:s,titlify:a,ellipsify:i,onClick:n,showLabel:l,firstLabel:g}=e;let v;const S=(0,m.default)(e.chat,["formattedTitle","labels"]),C=(0,m.default)(e.groupMetadata,["support"]);s&&(v=d.Configuration.SearchName({terms:[s]}));const y=e.labels||S.labels;y&&g&&(0,c.default)(y,g);const E=l&&y?(0,_.jsx)("div",{className:h.default.labels,children:(0,_.jsx)(u.default,{labels:y,showName:!1})}):null,b=(0,_.jsx)(o.default,{text:(0,f.default)(S.title()),element:t,formatters:v,titlify:a,ellipsify:i,direction:"auto",inlineblock:!0,onClick:n});return C.support?(0,_.jsxs)("div",{className:(0,r.default)({[h.default.verified]:!0,[h.default.hasLabels]:!!E}),children:[b,(0,_.jsx)("div",{className:h.default.icon,children:(0,_.jsx)(p.default,{name:"psa-verified"})}),E]}):E?(0,_.jsxs)("div",{className:h.default.hasLabels,children:[b,E]}):b}},15172:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(84758)),o=i(s(91952)),l=i(s(71681)),d=a(s(66922)),u=s(38293),c=a(s(46364));class h extends n.Component{constructor(...e){super(...e),this.count=null,this._updateUnreadCount=()=>{let e;e=c.default.displayInfo===c.StreamInfo.OFFLINE||c.default.displayInfo===c.StreamInfo.TIMEOUT?-1:r.default.filter((e=>e.shouldShowUnreadInTitle)).length,this.count!==e&&(this.count=e,(0,u.setTitleAndIcon)(e))}}componentDidMount(){const e=this.props.listeners;e.add(o.default,"alert_new_msg",(e=>d.showMsgNotification(e))),e.add(o.default,"alert_call",d.showCallNotification),e.add(o.default,"cancel_call",d.cancelCallNotification),e.add(r.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",this._updateUnreadCount),e.add(r.default,"change:hasUnread",d.closeNotifications),e.add(c.default,"change:displayInfo",this._updateUnreadCount),this._updateUnreadCount()}render(){return null}}h.displayName="NotificationManager";var f=(0,l.default)(h);t.default=f},90904:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(23493)),n=a(s(94184)),r=s(67294),o=a(s(58866)),l=s(85893);const d="transform 300ms cubic-bezier(.1,.82,.25,1)";var u=(0,r.forwardRef)((function(e,t){const s=(0,r.useRef)(),a=(0,r.useRef)();(0,r.useImperativeHandle)(t,(()=>({get insideContainer(){return a.current},get outsideContainer(){return s.current}})));const{objectPosition:u,onObjectLoad:h,position:f,size:p,type:m,zoomIn:_}=e,g=null==p?void 0:p.width,v=null==p?void 0:p.height,S=null==_?void 0:_.factor,C=null==_?void 0:_.translateX,y=null==_?void 0:_.translateY,E=(0,r.useCallback)((()=>{null!=h&&null!=a.current&&h(a.current.firstChild)}),[h]),b=(0,r.useCallback)((()=>{if(null==g||null==v)return;const e=s.current,t=a.current;if(!e||!t)return;let i;switch(m){case"contain":i=function(e,t,s){const a=e.clientWidth,i=e.clientHeight;let r=t,l=s,d=0,u=0;r/a>l/i?(l*=a/r,r=a,l<i&&(d=i/2-l/2)):(r*=i/l,l=i,r<a&&(u=a/2-r/2));return{style:{width:r,height:l,top:d,left:u,position:"absolute"},className:(0,n.default)(o.default.fit)}}(e,g,v);break;case"cover":i=function(e,t,s){const a=e.clientWidth,i=e.clientHeight;let r=t,l=s,d=0,u=0;r!==a&&(l*=a/r,r=a,l>i&&(d=i/2-l/2));l<i&&(r*=i/l,l=i,r>a&&(u=a/2-r/2));return{style:{width:r,height:l,top:d,left:u,position:"absolute"},className:(0,n.default)(o.default.fit)}}(e,g,v);break;case"scaleDown":i=c(e,g,v);break;case"zoomIn":i=function(e,t,s,a){const i=c(e,t,s).style;let r;r=a?{width:i.width,height:i.height,transition:d,transform:`translateX(${a.translateX}px) translateY(${a.translateY}px) scale(${a.factor})`}:{width:i.width,height:i.height,transition:d};return{style:r,className:(0,n.default)(o.default.fit,o.default.fitScaledown,o.default.fitZoomin)}}(e,g,v,null!=S&&null!=C&&null!=y?{factor:S,translateX:C,translateY:y}:null);break;default:return __LOG__(4,void 0,new Error,!0)`unrecognized type ${m}`,void SEND_LOGS("object-fit")}e.removeAttribute("class"),t.removeAttribute("style"),e.classList.add(...i.className.split(" ")),"relative"===f&&e.classList.add(o.default.fitRelative);const r=null!=u?u:i.style.position;t.style.setProperty("position",r);for(const e of Object.keys(i.style)){const s=i.style[e];null==s||Number.isNaN(s)||t.style.setProperty(e,"number"==typeof s?s+"px":s)}E()}),[E,u,f,v,g,m,S,C,y]);return(0,r.useEffect)((()=>{const e=(0,i.default)((()=>{b()}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[b]),(0,r.useLayoutEffect)((()=>{b()}),[b]),(0,l.jsx)("div",{className:(0,n.default)({[o.default.fit]:!0,[o.default.fitRelative]:"relative"===f}),ref:s,children:(0,l.jsx)("div",{style:{visibility:"hidden"},ref:a,children:e.children})})}));function c(e,t,s){const a=e.clientWidth,i=e.clientHeight;let r=s,l=t;return r>i&&(r=i,l=t*(i/s)),l>a&&(l=a,r=s*(a/t)),{style:{width:l,height:r},className:(0,n.default)(o.default.fit,o.default.fitScaledown)}}t.default=u},82621:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(78285),n=s(67294),r=a(s(52100)),o=a(s(19887)),l=a(s(12950)),d=a(s(2408)),u=a(s(71681)),c=a(s(79485)),h=s(85893);const f="sort remove reset add";class p extends n.PureComponent{constructor(e){super(e),this._onParticipantsUpdate=()=>{this._recalculateParticipantsTimer.debounce(100)},this._recalculateParticipantsTimer=new i.ShiftTimer((()=>{this.setState({participants:m(this.props.groupMetadata)})}));const{listeners:t,groupMetadata:{participants:s}}=e;this.state={participants:m(e.groupMetadata)},t.add(s,f,this._onParticipantsUpdate)}componentDidMount(){this.ensureParticipantsSorted()}componentDidUpdate(e){this.ensureParticipantsSorted();const t=e.groupMetadata.participants,s=this.props.groupMetadata.participants;if(s!==t){const e=this.props.listeners;e.remove(t,f,this._onParticipantsUpdate),e.add(s,f,this._onParticipantsUpdate),this._recalculateParticipantsTimer.cancel(),this.setState({participants:m(this.props.groupMetadata)})}}componentWillUnmount(){this._recalculateParticipantsTimer.cancel()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted()}render(){const e=this.props.groupMetadata.support?d.default.t(1682):this.props.overridingText||this.state.participants.join(d.default.t(815))||this.props.placeholder;return e?(0,h.jsx)(o.default,{text:e,location:this.props.location}):null}}function m(e){return l.default.isDropLastNameEnabled()?e.participants.map((t=>{const s=t.contact;return e.hasUniqueShortNameMention(s)?s.formattedShortNameWithNonBreakingSpaces:s.formattedName.replace(/\s/g," ")})):e.participants.map((e=>{const t=e.contact.formattedShortNameWithNonBreakingSpaces,[s]=t.split(/\s/);return r.default.exec(s)?s:t}))}p.CONCERNS={groupMetadata:["participants","support"]},p.displayName="ParticipantsListClass";var _=(0,u.default)((0,c.default)(p,p.CONCERNS));t.default=_},76870:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={GROUP:"GROUP",PROFILE:"PROFILE"};t.default=s},51158:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t,onPinOrUnpin:s}=e,a=(0,r.default)(e.chat,["pin"]);return(0,o.jsx)(i.default,{a8n:"mi-pin",action:()=>{s(!a.pin)},disabled:t,children:null!=a.pin&&0!==a.pin?n.default.t(1713):n.default.t(1453)},"PinChat")};var i=a(s(47452)),n=a(s(2408)),r=a(s(76006)),o=s(85893)},88155:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,className:s,onRef:a,onResize:c,onRef:h}=e,f=(0,n.default)(e,["children","className","onRef","onResize","onRef"]),p=(0,o.useRef)(null),m=(0,o.useRef)(null),_=(0,o.useCallback)((e=>{m.current=e,a&&a(e)}),[a]);return(0,u.jsxs)("div",(0,i.default)((0,i.default)({className:(0,r.default)(l.default.container,s),ref:_},f),{},{children:[t,(0,u.jsx)(d.default,{onResize:({width:t,height:s})=>{if(!m.current)return;const a=p.current;null!=a&&a.width===t&&a.height===s||(p.current={height:s,width:t},e.onResize({height:s,width:t}))}})]}))};var i=a(s(81109)),n=a(s(6479)),r=a(s(94184)),o=s(67294),l=a(s(31693)),d=a(s(97127)),u=s(85893)},72253:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getObserverMap=o,t.getResizeObserver=l,t.observe=function(e,t){const s=l(),a=o();if(a.has(e))throw new Error("You can't observe the same element twice.");return a.set(e,t),s.observe(e),()=>{s.unobserve(e),a.delete(e)}};var i=a(s(91033));let n,r;function o(){return null==n&&(n=new WeakMap),n}function l(){return null==r&&(r=new i.default((e=>{for(const t of e){const e=o().get(t.target),s=t.contentRect,{x:a,y:i,width:n,height:r,top:l,left:d,bottom:u,right:c}=s;null!=e&&e({x:a,y:i,width:n,height:r,top:l,left:d,bottom:u,right:c})}}))),r}},97127:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ResizeSensor=void 0;var i=s(67294),n=s(72253),r=a(s(22577)),o=s(85893);class l extends i.Component{constructor(...e){super(...e),this._resizeObserver=(0,n.getResizeObserver)(),this._observerMap=(0,n.getObserverMap)(),this._handleDiv=e=>{const t=this._sensorEl;e!==t&&null!=t&&(this._resizeObserver.unobserve(t),this._observerMap.delete(t)),this._sensorEl=e,null!=e&&(this._observerMap.set(e,this._handleResize),this._resizeObserver.observe(e))},this._handleResize=e=>{this.props.onResize(e)}}shouldComponentUpdate(){return!1}render(){return(0,o.jsx)("div",{ref:this._handleDiv,className:r.default.sensor})}}t.ResizeSensor=l,l.displayName="ResizeSensor";var d=l;t.default=d},11274:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(67294),i=s(85893);class n extends a.PureComponent{constructor(...e){super(...e),this._onRefChange=e=>{e?(this._ctx=e.getContext("2d"),this._imageData=this._ctx.createImageData(this.props.width,this.props.height)):(this._ctx=null,this._imageData=null)}}_updateCanvas(){const e=this._ctx,t=this._imageData,{rgbaBuffer:s}=this.props;e&&t&&s&&(t.data.set(new Uint8Array(s)),e.putImageData(t,0,0))}componentDidMount(){this._updateCanvas()}componentDidUpdate(){this._updateCanvas()}render(){return(0,i.jsx)("canvas",{role:"button",className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,ref:this._onRefChange})}}t.default=n,n.displayName="RGBACanvas"},44991:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginContext=function(){return Symbol("rte-plugin")},t.default=void 0;t.default=class{constructor(){this._internalHandlers=new Map}initialize(e){this.ctx=e}registerHandler(e,t,s){const a=this._internalHandlers.get(t)||new Map;a.set(e,s),this._internalHandlers.set(t,a)}unregisterHandler(e,t){const s=this._internalHandlers.get(t);s&&(s.delete(e),s.size||this._internalHandlers.delete(t))}handle(e,t=[]){const s=this._internalHandlers.get(e);return!!s&&function(e){const t=[];return e.forEach((e=>t.push(e))),t}(s).some((e=>e.apply(null,t)))}}},22083:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(68635)),n=a(s(28856)),r=a(s(22252)),o=a(s(99818)),l=a(s(31719)),d=a(s(67920)),u=a(s(1718)),c=a(s(88224)),h=a(s(2904)),f=a(s(80921)),p=a(s(34701));const m=new o.default,_=new i.default;class g extends((0,l.default)([n.default,_,u.default,m,c.default,d.default])){}t.default=g,g.Suggestions=(0,p.default)(h.default,{plugin:m}),g.EmojiSuggestions=(0,p.default)(r.default,{plugin:_}),g.QuickRepliesSuggestions=(0,p.default)(f.default,{plugin:d.default})},96962:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t;const s=new n.default,a=(0,l.default)([r.default,s,d.default]);return t=e=class extends a{},e.EmojiSuggestions=(0,u.default)(o.default,{plugin:s}),t};var n=i(s(68635)),r=i(s(28856)),o=i(s(22252)),l=a(s(31719)),d=i(s(1718)),u=i(s(34701))},59888:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{base:t,unicode:s,action:a,children:d}=e;return(0,l.jsxs)("div",{className:r.default.gridContainer,children:[(0,l.jsx)("span",{className:r.default.baseEmoji,children:(0,l.jsx)(i.default,{type:"emoji-grid",a8n:"mi-emoji-variant",action:e=>a(e,s,t),children:(0,l.jsx)(n.default,{text:t,formatters:o.Configuration.LargeEmojiOnly(),tabIndex:"-1"})},"base")}),(0,l.jsx)("div",{className:r.default.options,children:d})]})};var i=a(s(47452)),n=a(s(85051)),r=a(s(5538)),o=s(49895),l=s(85893)},6240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=e.reduce(((e,t)=>{const{handlers:s}=t;return s?(Object.keys(s).forEach((a=>{e[a]||(e[a]=[]);const i=s[a];null!=i&&e[a].push([t,i])})),e):e}),{});return Object.keys(s).reduce(((e,a)=>{const i=s[a];return e[a]=function(e,t){return s=>{e.some((([e,a])=>{const i=a.call(e,s,t);return!!s.defaultPrevented||!0===i&&(s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation(),!0)}))}}(i,t),e}),{})}},94485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=e.reduce(((e,t)=>{const{hooks:s}=t;return s?(Object.keys(s).forEach((a=>{e[a]||(e[a]=[]),e[a].push([t,s[a]])})),e):e}),{});return Object.keys(s).reduce(((e,a)=>(e[a]=function(e,t){return(...s)=>{e.forEach((([e,a])=>a.call(e,...s,t)))}}(s[a],t),e)),{})}},93187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=e.reduce(((e,t)=>{const{hotkeys:s}=t;return s?(Object.keys(s).forEach((a=>{e[a]||(e[a]=[]),e[a].push([t,s[a]])})),e):e}),{});return Object.keys(s).reduce(((e,a)=>(e[a]=function(e,t){return s=>{e.some((([e,a])=>{const i=a.call(e,s,t);return!!s.defaultPrevented||!0===i&&(s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation(),!0)}))}}(s[a],t),e)),{})}},62533:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=window.getSelection();if(!s||!s.rangeCount)return null;const a=s.getRangeAt(0);if(!a.collapsed)return null;const{startContainer:n,startOffset:r}=a;if(n===e){const{childNodes:e}=n,{length:s}=e;if(t===i.FORWARD&&r>s||t===i.BACKWARD&&!r)return null;const a=t===i.BACKWARD?1:0,o=e[r-a];return o instanceof Element?o:null}{const e=n.length===r;if(t===i.BACKWARD&&r)return null;if(t===i.FORWARD&&!e)return null;const s=t===i.BACKWARD?"previousSibling":"nextSibling",a=n[s];return a instanceof Element?a:null}},t.Direction=void 0;const i=(0,a(s(4158)).default)({FORWARD:void 0,BACKWARD:void 0});t.Direction=i},56849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e.getModifierState("Shift")&&!e.getModifierState("Alt")&&!e.getModifierState("Control")}},38753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement&&Boolean(e.dataset&&e.dataset.mentionJid)}},56847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.metaKey||e.shiftKey||e.altKey||e.ctrlKey}},8092:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(s,a){let o="",l=!1,d=!0;return(0,n.default)(s,a,(s=>{return l?(a=s,d=i.default.isEmoji(a)||r.test(a),!0):o.length>e||(l=s===t,void(l||(o=s+o)));var a})),l&&d?o:null}};var i=a(s(2561)),n=a(s(15872));const r=/\W/},15872:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){if(1!==t.rangeCount)return;if(!t.getRangeAt(0).collapsed)return;let{anchorNode:a,anchorOffset:d}=t;if(a&&a===e.refInput){if(d-=1,-1===d)return;if(a=a.childNodes[d],null==a)return;d=a.textContent.length}a=(0,o.default)(a)?l(a):a,(0,i.default)(a,(e=>{const t=l(e);return t?[t]:[]}),(e=>{let t,i;if((0,r.isEmojiEl)(e))return t=n.default.fromNode(e,!0).toPlainString(),s(t,0,t);i=e===a?e.textContent.slice(0,d):e.textContent;const o=i.lastIndexOf("\n"),l=o>=0;let u;l&&(i=i.slice(o+1));for(let e=i.length-1;e>=0;e--)if(t=i.charAt(e),u=s(t,e,i),u)return!0;return!!l||void 0}))};var i=a(s(3336)),n=a(s(82715)),r=s(28856),o=a(s(52019));function l(e){let t=e;do{if(t=t&&t.previousSibling,t&&t.nodeType!==Node.TEXT_NODE&&!(0,r.isEmojiEl)(t))return null}while(t&&(0,o.default)(t));return t}},93154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s=t;for(;s>0;)e.modify("extend","backward","character"),s--}},40456:(e,t)=>{"use strict";function s(e,t){return e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.matches(t)}function a(e,t){for(let a=0;a<t.length;++a){const{serializers:i}=t[a];if(i)for(let t=0;t<i.length;++t){const[a,n]=i[t];if(s(e,a))return n}}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=[];let r=e.cloneNode(!0).firstChild;for(;r;){switch(r.nodeType){case i:{const e=a(r,t);if(e){s.push(e(r));break}switch(r.tagName){case"P":case"BR":case"PRE":s.push("\n");break;case"DIV":r.firstChild&&3!==r.firstChild.nodeType||s.push("\n")}break}case n:s.push(r.nodeValue)}if(r.hasChildNodes())r=r.firstChild;else{for(;r&&!r.nextSibling;)if(r=r.parentNode,r===e){r=null;break}r&&(r=r.nextSibling)}}return s.join("")};const i=1,n=3},13091:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(40456));var n=(e,t)=>{t.focusNode||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("serializeTextBeforeCursor requires selection.focusNode"));const s=document.createRange();s.setStart(e,0),s.setEnd(t.focusNode,t.focusOffset);const a=s.cloneContents();return(0,i.default)(a,[])};t.default=n},21530:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.reduce(((e,{parsers:t})=>t?t.reduce(((e,t)=>t(e)),e):e),(0,i.default)(e))};var i=a(s(7187))},34701:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=s(85893);var r=(e,t)=>{var s,a;function r(s){return(0,n.jsx)(e,(0,i.default)((0,i.default)({},s),t))}return r.displayName=`Wrapper(${null!==(s=null!==(a=e.displayName)&&void 0!==a?a:e.name)&&void 0!==s?s:"Component"})`,r};t.default=r},56069:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,a(s(4158)).default)({CHANGE:void 0,MOUNT:void 0,INPUT:void 0});t.default=i},27549:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(56410)),o=a(s(54262)),l=a(s(74868)),d=a(s(77504)),u=a(s(2408)),c=a(s(88155)),h=a(s(2966)),f=a(s(39417)),p=a(s(82669)),m=s(85893);class _ extends n.PureComponent{constructor(e){super(e),this.state={menuWidth:null,offset:0},this._handleItemClick=(e,t)=>{this.props.onItemClick&&this.props.onItemClick(e,t)},this._handleNextClick=()=>{const e=this.props.numItems,t=this.state.offset+this.props.numColumns;"number"!=typeof e||t>e||this.setState({offset:this.state.offset+1})},this._handlePrevClick=()=>{0!==this.state.offset&&this.setState({offset:this.state.offset-1})},this._handleResize=({width:e})=>{this.setState({menuWidth:e})},this._renderItem=(e,t,s)=>{const a=this.props.numItems;if("number"==typeof a&&e>=a)return null;const i=e-this.state.offset;return(0,m.jsx)(l.default,{column:i,carouselNumColumns:this.props.numColumns,menuWidth:s,onClick:this._handleItemClick,index:e,selected:t,children:this.props.renderItem(e)},e)},this._checkSelectedIndex(e)}componentDidUpdate(){this._checkSelectedIndex(this.props)}_checkSelectedIndex({onItemClick:e,numItems:t,selectedIndex:s}){if(!e||0===t)return;s<0&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("carousel_menu: selectedIndex is smaller than 0"));const a=t-1;s>a&&e(a)}_renderPrevButton(){if(0===this.state.offset)return null;const e=u.default.isRTL()?"chevron-right":"chevron-left";return this._renderButton({className:o.default.prevButton,icon:e,onClick:this._handlePrevClick,id:"prev-button"})}_renderNextButton(){const{numColumns:e,numItems:t}=this.props;if("number"!=typeof t)return null;if(this.state.offset+e>=t)return null;const s=u.default.isRTL()?"chevron-left":"chevron-right";return this._renderButton({className:o.default.nextButton,icon:s,onClick:this._handleNextClick,id:"next-button"})}_renderButton({className:e,icon:t,onClick:s,id:a}){const{numColumns:n}=this.props;let r;return r=null!=this.state.menuWidth&&0!==this.state.menuWidth?`${Math.round(this.state.menuWidth/n)}px`:100/n+"%",(0,m.jsx)("div",{className:(0,i.default)(o.default.button,e),style:{width:r},onClick:s,role:"button","data-testid":a,children:(0,m.jsx)(h.default,{className:o.default.buttonIcon,name:t})})}render(){const{numColumns:e,numItems:t,selectedIndex:s}=this.props,{menuWidth:a,offset:i}=this.state;let n;return n=s<i?-1:s>=i+e?e-1+1:(s-i)%e,(0,m.jsx)(r.default,{className:this.props.className,children:(0,m.jsxs)(c.default,{className:o.default.resizeContainer,onResize:this._handleResize,children:[(0,m.jsx)(p.default,{children:this._renderPrevButton()}),(0,m.jsx)(d.default,{menuWidth:a,numColumns:e,numItems:t,offset:i,renderItem:this._renderItem,selectedIndex:s}),(0,m.jsx)(p.default,{children:this._renderNextButton()}),(0,m.jsx)(f.default,{numTabs:e,selectedTabIndex:n,hide:-1===n||0===n&&i>0||n===e,animate:!0})]})})}}t.default=_,_.displayName="CarouselMenu"},74868:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{column:t,carouselNumColumns:s,index:a,menuWidth:i}=e,d=(0,n.useRef)(null);let u;u=null!=i&&0!==i?`${Math.round(i/s)}px`:100/s+"%";const c=r.default.isRTL()?-1:1;return(0,l.jsx)(o.default,{onRef:e=>{d.current=e},onClick:e.onClick,sectionId:a,selected:e.selected,theme:0!==a&&(t<=0||t>=s)?o.THEMES.CAROUSEL_END:o.THEMES.CAROUSEL,transform:`translateX(${100*t*c}%)`,width:u,children:e.children})};var n=s(67294),r=i(s(2408)),o=a(s(274)),l=s(85893)},77504:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{numItems:t,offset:s,renderItem:a,selectedIndex:r,menuWidth:o}=e;let{numColumns:l}=e;return(0,n.jsx)(n.Fragment,{children:(()=>{let e=0;const n=t-l;return 1===s&&(l+=1,e=-1),s===n-1&&(l+=1),(0,i.default)(l,(i=>{const n=i+e+s;return n<0||n>=t?null:a(n,n===r,o)}))})()})};var i=a(s(98913)),n=s(85893)},15140:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINIMUM_LOADING_TIME=t.convertTabToMood=t.StickerTabs=t.ValidMoods=t.INPUT_SHOW_POINT=t.INPUT_HIDE_POINT=t.INPUT_BAR_SCROLL_FAST=t.INPUT_BAR_SCROLL_SENSITIVITY=t.INPUT_BAR_TOTAL_HEIGHT=t.SCROLL_THROTTLE_TIME=t.SCROLL_CLICK_TIME_GAP=void 0;t.SCROLL_CLICK_TIME_GAP=1e3;t.SCROLL_THROTTLE_TIME=100;t.INPUT_BAR_TOTAL_HEIGHT=63;t.INPUT_BAR_SCROLL_SENSITIVITY=5;t.INPUT_BAR_SCROLL_FAST=15;t.INPUT_HIDE_POINT=44.099999999999994;t.INPUT_SHOW_POINT=94.5;const a=s(54302).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.ValidMoods=a;const i=s(54302).Mirrored(["RECENTS","LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.StickerTabs=i;t.convertTabToMood=e=>{const t=e;return a.isValid(t)?a.cast(t):null};t.MINIMUM_LOADING_TIME=1500},63775:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(60057));var n=(0,a(s(4158)).default)(i.default);t.default=n},41965:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=t.EMOJI_HEIGHT=t.SIDE_MARGIN=void 0;var i=s(67294),n=a(s(91952)),r=s(9492),o=a(s(2561)),l=a(s(54179)),d=a(s(22399)),u=a(s(41098)),c=a(s(47193)),h=a(s(39e3)),f=a(s(71681)),p=a(s(87519)),m=a(s(63477)),_=a(s(54136)),g=s(85893);const v=parseInt(d.default["-side-margin"],10);t.SIDE_MARGIN=v;const S=parseInt(d.default["-emoji-height"],10);t.EMOJI_HEIGHT=S;const C=parseInt(d.default["-emoji-width"],10);t.EMOJI_WIDTH=C;class y extends i.Component{constructor(...e){super(...e),this.state={skinTonePicker:null},this._lastFocusedElement=null,this._closeSkinTonePicker=()=>{const e=this.state.skinTonePicker&&this.state.skinTonePicker.anchor;e&&e instanceof HTMLElement&&this._focusElement(e),this.setState({skinTonePicker:null})},this._setEmojiVariant=(e,t,s)=>{b(e),u.default.setVariant(t,s),this._handleEmoji(t)},this._clearPickerTimer=()=>{this._pickerTimer&&clearTimeout(this._pickerTimer)},this._showContextMenu=(e,t,s)=>{const a=o.default.getSkinToneBase(e);a&&this.setState({skinTonePicker:{menu:(0,g.jsx)(p.default,{base:a,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:r.DirX.RIGHT,dirY:r.DirY.TOP,horizontal:!0,autoFocus:s,findFirstItem:!0}})},this._handleEmoji=e=>{let t=e;if(o.default.getSkinToneBase(t)){const e=u.default.getVariantIfExists(t);if(null!=e)t=e;else if(this.props.allowVariantPrompt)return!0}this.props.onEmoji(t)},this._handleEmojiArrowDown=e=>{b(e);const t=T(e);null!=t&&this.props.focusBelow&&this.props.focusBelow(t)},this._handleEmojiArrowLeft=e=>{b(e);const t=T(e);if(null==t)return;const s=t-1;s<0?this.props.focusAbove(this.props.numColumns-1):this.focusEmojiAt(s)},this._handleEmojiArrowRight=e=>{b(e);const t=T(e);if(null==t)return;const s=t+1;s>=this.props.emojis.length?this.props.focusBelow&&this.props.focusBelow(0):this.focusEmojiAt(s)},this._handleEmojiArrowUp=e=>{b(e);const t=T(e);null!=t&&this.props.focusAbove(t)},this._handleEmojiEnter=e=>{b(e);const t=T(e);this._selectEmojiAt(t)},this._handleClick=e=>{b(e);const t=T(e);this._selectEmojiAt(t)},this._handleContextMenu=e=>{b(e);const t=this._getEmojiUnicode(e);t&&e.target instanceof HTMLElement&&this._showContextMenu(t,e.target)},this._handleMouseDown=e=>{b(e),this.state.skinTonePicker&&this.setState({skinTonePicker:null});const t=e.target;if(!(t instanceof HTMLElement))return;const s=this._getEmojiUnicode(e);s&&this._startPickerTimer(s,t)},this._setRefEmojis=e=>{this._refEmojis=e}}shouldComponentUpdate(e,t){return this.props.emojis!==e.emojis||this.state.skinTonePicker!==t.skinTonePicker}componentDidMount(){this.props.listeners.add(u.default,"add remove change:variant",(()=>this.forceUpdate()))}componentDidUpdate(e,t){t.skinTonePicker&&this.state.skinTonePicker&&this._closeSkinTonePicker()}focusEmojiAt(e){const t=this._getRefEmojiAt(e);t&&this._focusElement(t)}selectFirstEmoji(){this._selectEmojiAt(0)}restoreFocus(){this._lastFocusedElement&&this._focusElement(this._lastFocusedElement)}_focusElement(e){const t=parseInt(e.dataset.emojiIndex,10);isNaN(t)||(c.default.focus(e,{preventScroll:!0}),this.props.onEmojiFocus(e),this._lastFocusedElement=e)}_selectEmojiAt(e){if(null==e)return;const t=this.props.emojis[e];if(!t)return;const s=this._getRefEmojiAt(e);if(!s)return;this._clearPickerTimer();this._handleEmoji(t)&&this._showContextMenu(t,s,!0)}_getEmojiUnicode(e){const t=T(e);if(null==t)return;const s=this.props.emojis[t];return s||null}_getRefEmojiAt(e){const t=this.props.emojis.length-1,s=Math.max(Math.min(e,t),0);if(null!=this._refEmojis)return this._refEmojis.children[s]}_startPickerTimer(e,t){this._clearPickerTimer(),this._pickerTimer=setTimeout((()=>{delete this._pickerTimer,this.props.listeners.addOnce(n.default,"window_click",b),this._showContextMenu(e,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}render(){let e;this.state.skinTonePicker&&(e=(0,g.jsx)(m.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,requestRecentFocusOnUnmount:!1,children:(0,g.jsx)(_.default,{tooltip:this.state.skinTonePicker})}));const{emojis:t}=this.props;return t.length?(0,g.jsxs)("div",{className:d.default.panel,children:[(0,g.jsx)(h.default,{onMouseDown:this._handleMouseDown,onClick:this._handleClick,onContextMenu:this._handleContextMenu,handlers:{up:this._handleEmojiArrowUp,down:this._handleEmojiArrowDown,left:this._handleEmojiArrowLeft,right:this._handleEmojiArrowRight,enter:this._handleEmojiEnter,space:this._handleEmojiEnter},children:(0,g.jsx)("div",{ref:this._setRefEmojis,className:d.default.section,children:t.map(((e,t)=>{const s=u.default.getVariantIfExists(e);return(0,g.jsx)(l.default,{element:"span",emoji:s||e,size:"large",tabIndex:"-1","data-emoji-index":t},e)}))})}),e]}):null}}y.displayName="EmojiRow";const E=(0,f.default)(y);function b(e){e.preventDefault(),e.stopPropagation()}function T(e){if(!(e.target instanceof HTMLElement))return null;const t=parseInt(e.target.dataset.emojiIndex,10);return isNaN(t)?null:t}t.default=class extends E{focusEmojiAt(e){this.getComponent().focusEmojiAt(e)}selectFirstEmoji(){this.getComponent().selectFirstEmoji()}restoreFocus(){this.getComponent().restoreFocus()}}},3483:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(44908)),r=i(s(10691)),o=i(s(18446)),l=i(s(74691)),d=i(s(94184)),u=s(67294),c=i(s(2561)),h=i(s(98741)),f=i(s(46847)),p=i(s(39e3)),m=i(s(70446)),_=i(s(2408)),g=i(s(16625)),v=i(s(30462)),S=i(s(18259)),C=a(s(45080)),y=i(s(82669)),E=s(85893);class b extends u.PureComponent{constructor(...e){super(...e),this._fastScroll=!1,this._scrollFromAnimation=!1,this._scrollFromFocus=!1,this._lastScrollTop=this.props.displayCache.scrollTop,this._lastSectionId=this.props.displayCache.sectionId,this.state={scrolledToTop:0===this.props.displayCache.scrollTop,searchText:this.props.defaultSearchText||"",showSearchInput:this.props.displayCache.showSearchInput},this._handleEmojiFocus=(e,t)=>{this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200);const s=t.scrollTop,a=e.getBoundingClientRect().top-t.getBoundingClientRect().top+s,i=a-t.clientHeight+e.clientHeight+2,n=this.state.showSearchInput?a-C.TOTAL_SEARCH_HEIGHT:a-2;t.scrollTop=(0,l.default)(s,i,n)},this._handleListFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleListScroll=e=>{const t=e-this._lastScrollTop;if(this._lastScrollTop=e,this._scrollFromFocus)return;if(this._scrollFromAnimation)return;if(this._checkScrollTop())return;const s=Math.abs(t);this._fastScroll=s>15;const a=t>=0?1:-1,i=0===e;e<C.TOTAL_SEARCH_HEIGHT?this.setState({scrolledToTop:i,showSearchInput:!0}):s<5||(this.state.showSearchInput?1===a&&this.setState({scrolledToTop:i,showSearchInput:!1}):-1===a&&this.setState({scrolledToTop:i,showSearchInput:!0}))},this._handleListSection=e=>{this._scrollFromAnimation||(this._lastSectionId=e,this.props.onSection(e))},this._handleSearchResultsFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e})},this._handleScrollListFocusUp=()=>{this._focusSearchAndScrollToTop()},this._handleSearchDownKey=()=>{if(this.state.searchText){if(!this._refSearchResults)return;this._refSearchResults.focusFirstVisibleEmoji()}else this._refScrollList&&this._refScrollList.focusFirstVisibleEmoji(C.TOTAL_SEARCH_HEIGHT)},this._handleSearchEnterKey=()=>{this.state.searchText&&this._refSearchResults&&this._refSearchResults.selectFirstVisibleEmoji()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusPrev():this.focusSearchInput()},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusNext():this.focusSearchInput()},this._setRefSearchInput=e=>{this._refSearchInput=e},this._setRefScrollList=e=>{this._refScrollList=e},this._setRefSearchResults=e=>{this._refSearchResults=e},this._getSectionListDataMemoized=(0,g.default)((({sectionIds:e})=>e.map((e=>({sectionId:e,emojis:"RECENT"===e?(0,n.default)(v.default.reduce(((e,t)=>{const s=c.default.getSkinToneBase(t.id)||t.id;return null!=c.default.getGlyphId(s)&&e.push(s),e}),[])):c.default.getEmojisInCategory(e)})))),((e,t)=>e.sectionIds===t.sectionIds||(0,o.default)(e.sectionIds,t.sectionIds))),this._getSearchResultsDataMemoized=(0,g.default)((({searchText:e})=>[{sectionId:f.default.SEARCH_RESULT,emojis:(0,h.default)((0,r.default)(e))}]))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,sectionId:this._lastSectionId,showSearchInput:this.state.showSearchInput})}focusSearchInput(e){if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._refSearchInput.focus(e)}scrollToSection(e){return this._lastSectionId=e,new Promise((e=>{this._fastScroll=!0,this.setState({searchText:"",showSearchInput:!0},e)})).then((()=>{this._scrollFromAnimation=!0;const t=this._refScrollList?this._refScrollList.scrollToSection(e,0-C.TOTAL_SEARCH_HEIGHT):Promise.resolve();return t.finally((()=>{t===this._animationPromise&&(this._scrollFromAnimation=!1,this._checkScrollTop()||this.state.showSearchInput&&this.setState({scrolledToTop:0===this._lastScrollTop}))})),this._animationPromise=t,t}))}_checkScrollTop(){const e=0===this._lastScrollTop;return e&&this.setState({scrolledToTop:e,showSearchInput:!0}),e}_focusSearchAndScrollToTop(){this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200),this.focusSearchInput(),this._refScrollList&&this._refScrollList.scrollToTop()}_stopEvent(e){e.preventDefault(),e.stopPropagation()}render(){return(0,E.jsx)(p.default,{handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey},children:(0,E.jsxs)("div",{className:m.default.bodyContainer,children:[this._renderSearchInput(),this._renderSearchResults(),(0,E.jsx)("div",{className:(0,d.default)(m.default.list,{[m.default.hidden]:!!this.state.searchText}),children:(0,E.jsx)(C.default,{data:this._getSectionListData(),width:this.props.width,onFocusUp:this._handleScrollListFocusUp,initialScrollTop:this.props.displayCache.scrollTop,searchInputVisible:this.state.showSearchInput,focusAbove:this._handleListFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,onScroll:this._handleListScroll,onSection:this._handleListSection,ref:this._setRefScrollList,showTitles:!0})})]})})}_renderSearchInput(){let e=null;this.state.showSearchInput&&(e=(0,E.jsx)(S.default,{label:_.default.t(1567),onChange:this._handleSearchChange,onUpKey:this.props.onFocusUp,onDownKey:this._handleSearchDownKey,onEnterKey:this._handleSearchEnterKey,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,value:this.state.searchText||""}));const t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return(0,E.jsx)(y.default,{transitionName:t,className:m.default.search,children:e})}_renderSearchResults(){return this.state.searchText?(0,E.jsx)("div",{className:m.default.list,children:(0,E.jsx)(C.default,{data:this._getSearchResultsData(),width:this.props.width,initialScrollTop:0,searchInputVisible:!0,focusAbove:this._handleSearchResultsFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:this._setRefSearchResults,showTitles:!1})}):null}_getSectionListData(){return this._getSectionListDataMemoized({sectionIds:this.props.sectionIds})}_getSearchResultsData(){const e=(this.state.searchText||"").replace(/^\s+/,"");return this._getSearchResultsDataMemoized({searchText:e})}}t.default=b,b.displayName="EmojiPanelContent"},45080:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findEmojiRowAt=T,t.getNumColumns=M,t.default=t.TOTAL_SEARCH_HEIGHT=void 0;var n=i(s(30621)),r=s(8139),o=s(67294),l=i(s(63775)),d=a(s(41965)),u=i(s(46847)),c=i(s(86025)),h=i(s(19257)),f=i(s(67893)),p=i(s(2408)),m=i(s(16625)),_=i(s(6067)),g=i(s(45285)),v=s(85893);const S=parseInt(_.default["-total-search-height"],10);t.TOTAL_SEARCH_HEIGHT=S;const C=parseInt(_.default["-title-height"],10),y={[u.default.SEARCH_RESULT]:()=>{throw new Error("Search results should not be shown with a title.")},[u.default.RECENT]:()=>p.default.t(1437),[l.default.SMILEYS_PEOPLE]:()=>p.default.t(809),[l.default.ANIMALS_NATURE]:()=>p.default.t(805),[l.default.FOOD_DRINK]:()=>p.default.t(807),[l.default.ACTIVITY]:()=>p.default.t(804),[l.default.TRAVEL_PLACES]:()=>p.default.t(811),[l.default.OBJECTS]:()=>p.default.t(808),[l.default.SYMBOLS]:()=>p.default.t(810),[l.default.FLAGS]:()=>p.default.t(806)};let E=0;E=parseInt(_.default["-scrollbar-width"].replace(/px$/,""),10);class b extends o.PureComponent{constructor(e){super(e),this._rowComponents=new Map,this._flatListController=new f.default,this._renderBlanks=!1,this._getRowsAndSectionDataMemoized=(0,m.default)((e=>{const{numColumns:t,data:s,showTitles:a}=e;let i=S;const r={},o=[];return s.forEach((({sectionId:e,emojis:l},u)=>{let c=0;const h=i;if(0===l.length)return;a&&(o.push({kind:"title",itemKey:`section_${e}_title`,index:o.length,title:y[e](),sectionId:e,height:C,offsetTop:i}),c+=C,i+=C);const f=(0,n.default)(l,t),p=u===s.length-1;f.forEach(((t,s)=>{const a=s===f.length-1&&!p?d.EMOJI_HEIGHT+parseInt(_.default["-section-bottom-margin"],10):d.EMOJI_HEIGHT;o.push({kind:"emojis",itemKey:`section_${e}_emoji_${s}`,index:o.length,emojis:t,sectionId:e,height:a,offsetTop:i}),c+=a,i+=a})),r[e]={height:c,offsetTop:h}})),{rows:o,sectionData:r}})),this._handleEmojiFocus=e=>{const t=this._refScrollContainer;t&&this.props.onEmojiFocus(e,t)},this._handleScroll=()=>{this._animationFrameID||(this._animationFrameID=requestAnimationFrame(this._handleScrollOnAnimationFrame))},this._handleScrollOnAnimationFrame=()=>{if(delete this._animationFrameID,!this._refScrollContainer)return;const e=this._refScrollContainer.scrollTop;this.props.onScroll&&this.props.onScroll(e);const t=this._getSectionIdFromScrollTop(e);t&&this.props.onSection&&this.props.onSection(t)},this._setRefScrollContainer=e=>{this._refScrollContainer=e},this._renderRow=e=>{switch(e.kind){case"title":return(0,v.jsx)("div",{className:_.default.title,children:e.title});case"emojis":return(0,v.jsx)(d.default,{emojis:e.emojis,focusAbove:t=>{var s,a;1===e.index&&(null===(s=(a=this.props).onFocusUp)||void 0===s||s.call(a)),this._focusEmojiAt(e.index,-1,t)},focusBelow:t=>{this._focusEmojiAt(e.index,1,t)},numColumns:this._getNumColumns(),onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:t=>{t?this._rowComponents.set(e.itemKey,t):this._rowComponents.delete(e.itemKey)},allowVariantPrompt:e.sectionId!==u.default.RECENT});default:throw e.kind,new Error(`Invalid row kind: ${e.kind}`)}},this._getRowsAndSectionData()}componentDidMount(){this._refScrollContainer&&this._refScrollContainer.scrollTop!==this.props.initialScrollTop&&(this._refScrollContainer.scrollTop=this.props.initialScrollTop)}focusFirstVisibleEmoji(e){const t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.focusEmojiAt(0)}scrollToSection(e,t){const s=this._refScrollContainer;if(!s)return Promise.resolve();const{sectionData:a}=this._getRowsAndSectionData(),i=a[e];if(!i)return Promise.resolve();const n=i.offsetTop;if(s.scrollTop===n)return Promise.resolve();if(this._activeAnimation){if(this._activeAnimation.sectionId===e)return this._activeAnimation.promise;(0,g.default)(this._activeAnimation.scrollTarget,"stop"),this._activeAnimation&&this._activeAnimation.promise.cancel()}if(s.scrollTop===n)return Promise.resolve();const o=document.createElement("div");o.style.position="absolute",o.style.top=`${n+(t||0)}px`,o.style.left="0px",s.appendChild(o);const l=(0,g.default)(o,"scroll",{container:s,duration:300,easing:[.99,.13,.13,.99]}).then((()=>{})).then((()=>(0,r.delayMs)(100)));return this._activeAnimation={promise:l,sectionId:e,scrollTarget:o},l.finally((()=>{s.removeChild(o),this._activeAnimation&&this._activeAnimation.promise===l&&delete this._activeAnimation})),l}scrollToTop(){this._refScrollContainer&&(this._refScrollContainer.scrollTop=0)}selectFirstVisibleEmoji(e){const t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.selectFirstEmoji()}_getCurrentSearchInputHeight(){return this.props.searchInputVisible?S:0}_getNumColumns(){return M(this.props.width)}_getRowsAndSectionData(){return this._getRowsAndSectionDataMemoized({numColumns:this._getNumColumns(),data:this.props.data,showTitles:this.props.showTitles})}_getFirstVisibleEmojiRowComponent(e){if(!this._refScrollContainer)return;const t=this._refScrollContainer.scrollTop+e,s=this._getEmojiRowFromScrollTop(t);if(!s)return;return this._rowComponents.get(s.itemKey)}_getEmojiRowFromScrollTop(e){const{rows:t}=this._getRowsAndSectionData();return t.map((e=>"emojis"===e.kind?e:null)).filter(Boolean).find((t=>t.offsetTop+t.height>e))}_getSectionIdFromScrollTop(e){const t=this._getEmojiRowFromScrollTop(e+this._getCurrentSearchInputHeight());if(t)return t.sectionId}_focusEmojiAt(e,t,s){const{rows:a}=this._getRowsAndSectionData(),i=T(a,e,t);if(!i)return;const n=this._rowComponents.get(i.itemKey);n&&n.focusEmojiAt(s)}render(){const{rows:e}=this._getRowsAndSectionData(),t=Math.min(e.length,2);let s;return(this.props.onScroll||this.props.onSection)&&(s=this._handleScroll),(0,v.jsx)(h.default,{onScroll:s,className:_.default.container,onRef:this._setRefScrollContainer,flatListControllers:[this._flatListController],children:(0,v.jsx)(c.default,{data:e,reorderAnimationsEnabled:!1,forceConsistentRenderCount:!1,flatListController:this._flatListController,direction:"vertical",extraItems:t,initialScrollFromStart:this.props.initialScrollTop,renderItem:this._renderRow})})}}function T(e,t,s){const a=s<0?-1:1;let i=t+s;for(;i>=0&&i<e.length;){const t=e[i];if("emojis"===t.kind)return t;i+=a}}function M(e){const t=e-2*d.SIDE_MARGIN-E;return Math.floor(t/d.EMOJI_WIDTH)}t.default=b,b.displayName="EmojiSectionScrollList"},10538:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(n.default,{name:o[e.sectionId]})},t.sectionIdToIcon=void 0;var i=a(s(46847)),n=a(s(2966)),r=s(85893);const o={[i.default.RECENT]:"panel-recent",[i.default.SMILEYS_PEOPLE]:"panel-emoji-people",[i.default.ANIMALS_NATURE]:"panel-emoji-nature",[i.default.FOOD_DRINK]:"panel-emoji-food",[i.default.ACTIVITY]:"panel-emoji-activity",[i.default.TRAVEL_PLACES]:"panel-emoji-travel",[i.default.OBJECTS]:"panel-emoji-objects",[i.default.SYMBOLS]:"panel-emoji-symbols",[i.default.FLAGS]:"panel-emoji-flags"};t.sectionIdToIcon=o},13552:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t={[n.default.RECENT]:r.default.t(1437),[n.default.SMILEYS_PEOPLE]:r.default.t(809),[n.default.ANIMALS_NATURE]:r.default.t(805),[n.default.FOOD_DRINK]:r.default.t(807),[n.default.ACTIVITY]:r.default.t(804),[n.default.TRAVEL_PLACES]:r.default.t(811),[n.default.OBJECTS]:r.default.t(808),[n.default.SYMBOLS]:r.default.t(810),[n.default.FLAGS]:r.default.t(806)},{sectionId:s}=e,a=t[s];return(0,d.jsx)(l.default,{onClick:e.onClick,sectionId:s,selected:e.selected,showFocusIndicator:e.showFocusIndicator,theme:l.THEMES.MENU,title:a,onRef:e.onRef,children:(0,d.jsx)(o.default,{sectionId:s})})};var n=i(s(46847)),r=i(s(2408)),o=i(s(10538)),l=a(s(274)),d=s(85893)},46847:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var i=a(s(81109)),n=a(s(55454));const{EMOJI:{CATEGORIES:r,ORDERED_CATEGORY_IDS:o}}=n.default,l=(0,i.default)((0,i.default)({RECENT:"RECENT"},r),{},{SEARCH_RESULT:"SEARCH_RESULT"});var d=l;t.default=d;const u=[{[l.RECENT]:l.RECENT,[l.SMILEYS_PEOPLE]:l.SMILEYS_PEOPLE,[l.ANIMALS_NATURE]:l.ANIMALS_NATURE,[l.FOOD_DRINK]:l.FOOD_DRINK,[l.ACTIVITY]:l.ACTIVITY,[l.TRAVEL_PLACES]:l.TRAVEL_PLACES,[l.OBJECTS]:l.OBJECTS,[l.SYMBOLS]:l.SYMBOLS,[l.FLAGS]:l.FLAGS}.RECENT,...o];t.ORDERED_TAB_SECTION_IDS=u},17017:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=void 0;var i=a(s(35161)),n=a(s(7900)),r=s(67294),o=a(s(91952)),l=s(9492),d=a(s(2561)),u=a(s(54179)),c=a(s(95118)),h=a(s(41098)),f=a(s(52087)),p=a(s(39e3)),m=a(s(71681)),_=a(s(87519)),g=a(s(69217)),v=a(s(63477)),S=a(s(54136)),C=s(85893);const y=parseInt(c.default["-emoji-width"].replace(/px$/,""),10);t.EMOJI_WIDTH=y;class E extends r.Component{constructor(...e){super(...e),this.state={selectedIndex:0,skinTonePicker:null},this.emojiList=null,this._rowLength=0,this._emojiPanelRef=(0,r.createRef)(),this._emojisRef=(0,r.createRef)(),this._windowResized=()=>{const e=this._getEmojiRowLength();if(this._rowLength!==e){this._rowLength=e;const t=this.state.selectedIndex>=e?e-1:this.state.selectedIndex;this.setState({selectedIndex:t})}},this._handleEmojiClick=e=>{if(T(e),!(e.target instanceof HTMLElement))return;const t=e.target.dataset.unicode;if(t)if(d.default.getSkinToneBase(t)){const s=this._getEmojiVariant(t);s?this.handleEmoji(s):this.handleContextMenu(e)}else this.handleEmoji(t)},this._handleEmojiMouseDown=e=>{if(T(e),!(e.target instanceof HTMLElement))return;const t=e.target.dataset.unicode;t&&d.default.getSkinToneBase(t)&&this._startPickerTimer(e)},this.handleEmoji=e=>{this.props.onEmoji(e),this.releaseFocus()},this.releaseFocus=()=>{this.props.onFocusRelease&&this.props.onFocusRelease()},this._getEmojiVariant=e=>d.default.getSkinToneBase(e)?h.default.getVariant(e):null,this._setEmojiVariant=(e,t,s)=>{T(e),this.handleEmoji(s),h.default.setVariant(t,s);const a=this.props.uim;return a&&(a.pop(!1,!1),a.uie.requestDismiss()),!1},this.handleContextMenu=e=>{T(e);const t=e.target;if(!(t instanceof HTMLElement))return;const s=t.dataset.unicode;s&&d.default.getSkinToneBase(s)&&this._handleContextMenu(s,t)},this._handleContextMenu=(e,t,s)=>{this._clearPickerTimer();const a=(0,n.default)(d.default.getSkinToneBase(e),"Emoji.getSkinToneBase(unicode)");this.setState({skinTonePicker:{menu:(0,C.jsx)(_.default,{base:a,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:l.DirX.RIGHT,dirY:l.DirY.TOP,horizontal:!0,autoFocus:s,findFirstItem:!0}},(()=>{const{onSkinTonePicker:e}=this.props;e&&e(!0)}))},this._closeSkinTonePicker=()=>{this.setState({skinTonePicker:null},(()=>{const{onSkinTonePicker:e}=this.props;e&&e(!1)}))},this._clearPickerTimer=()=>{null!=this._pickerTimer&&(this.props.clearTimeout(this._pickerTimer),this._pickerTimer=null)},this._startPickerTimer=e=>{T(e),this._clearPickerTimer();const t=e.target;if(!(t instanceof HTMLElement))return;const s=t.dataset.unicode;this._pickerTimer=this.props.setTimeout((()=>{this.props.listeners.addOnce(o.default,"window_click",T),this._handleContextMenu(s,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)},this._getEmojiRowLength=()=>{const e=this._emojiPanelRef.current&&this._emojiPanelRef.current.offsetWidth;return null==e?8:Math.floor(e/y)},this.handleEmojiArrowLeft=e=>{this._handleEmojiArrow(e,"left")},this.handleEmojiArrowRight=e=>{this._handleEmojiArrow(e,"right")},this._handleEmojiArrow=(e,t)=>{if(T(e),!(e.target instanceof HTMLElement))return;let s=e.target.dataset.emojiIndex;if(!s)return;s=Number(s);const a=this.props.emojiList;let i=s;switch(t){case"left":s>0&&(i=s-1);break;case"right":if(s+1>=a.length)return;i=s+1}this.setState({selectedIndex:i})},this._renderEmojiList=e=>{let t=e;const s=this._getEmojiRowLength();t&&t.length>s&&(t=t.slice(0,s));const a=(0,i.default)(t,((e,t)=>{const s=this._getEmojiVariant(e),a=this.state.selectedIndex===t&&!this.state.skinTonePicker;return(0,C.jsx)(u.default,{element:"span",emoji:s||e,size:"large","data-unicode":e,"data-variant":s,tabIndex:"-1","data-emoji-index":t,selected:a},e)}));return(0,C.jsx)(p.default,{onMouseDown:this._handleEmojiMouseDown,onClick:this._handleEmojiClick,onContextMenu:this.handleContextMenu,children:(0,C.jsx)("div",{className:c.default.panel,ref:this._emojisRef,children:a})})},this.handleEmojiEnter=e=>{if(T(e),!(e.target instanceof HTMLElement))return;const t=e.target.dataset.emojiIndex;if(t&&this.props.emojiList){const s=this.props.emojiList[Number(t)];this._keyboardSelectEmoji(e,s)}},this._keyboardSelectEmoji=(e,t)=>{if(d.default.getSkinToneBase(t)){const s=this._getEmojiVariant(t);if(s)this.handleEmoji(s);else{if(T(e),!(e.target instanceof HTMLElement))return;this._handleContextMenu(t,e.target,!0)}}else this.handleEmoji(t)}}static getDerivedStateFromProps(e,t){return{selectedIndex:Math.min(t.selectedIndex,e.emojiList.length-1)}}componentDidUpdate(e,t){this.state.skinTonePicker&&this.state.skinTonePicker===t.skinTonePicker&&this._closeSkinTonePicker()}componentDidMount(){this.props.listeners.add(h.default,"add remove change:variant",(()=>this.forceUpdate()));const e=this.props.debounce(this._windowResized,100);this.props.listeners.add(window,"resize",e),this._windowResized()}_getEmojiAtIndex(e){var t;return null!==(t=this.props.emojiList[e])&&void 0!==t?t:null}_getEmojiElement(e){if(e<0)return;if(!this._emojisRef.current)return;const t=this._emojisRef.current.children;return e>=t.length?void 0:t[e]}render(){let e;return this.state.skinTonePicker&&(e=(0,C.jsx)(v.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,children:(0,C.jsx)(S.default,{tooltip:this.state.skinTonePicker})})),(0,C.jsxs)("div",{ref:this._emojiPanelRef,children:[this._renderEmojiList(this.props.emojiList),e]})}moveSelectionLeft(){this.setState({selectedIndex:Math.max(this.state.selectedIndex-1,0)})}moveSelectionRight(){this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this._getEmojiRowLength()-1,this.props.emojiList.length-1)})}pickSelectedEmoji(){const e=this._getEmojiAtIndex(this.state.selectedIndex);if(e)if(d.default.getSkinToneBase(e)){const t=this._getEmojiVariant(e);if(t)this.handleEmoji(t);else{const t=this._getEmojiElement(this.state.selectedIndex);t&&this._handleContextMenu(e,t,!0)}}else this.handleEmoji(e)}}E.displayName="BaseEmojiSuggestionsPanel";const b=(0,f.default)((0,m.default)((0,g.default)(E)));function T(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=class extends b{moveSelectionLeft(){this.getComponent().moveSelectionLeft()}moveSelectionRight(){this.getComponent().moveSelectionRight()}pickSelectedEmoji(){this.getComponent().pickSelectedEmoji()}}},91137:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var n=i(s(94184)),r=s(67294),o=s(9492),l=i(s(3483)),d=a(s(46847)),u=i(s(30787)),c=i(s(71681)),h=i(s(11441)),f=i(s(30462)),p=i(s(13552)),m=s(85893);const _={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=_;class g extends r.PureComponent{constructor(e){let t;super(e),this._refDiv=(0,r.createRef)(),this.getElement=()=>this._refDiv.current,this._sectionIds=0===f.default.length?d.ORDERED_TAB_SECTION_IDS.filter((e=>e!==d.default.RECENT)):d.ORDERED_TAB_SECTION_IDS,this._refMenuTabs=new Map,this._handleEmojiPanelFocusUp=()=>{var e;null===(e=this._refMenuTabs.get(this.state.selectedSectionId))||void 0===e||e.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleEmojiPanelFocusEnter=e=>{null==e||e.preventDefault();const t=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(t)},this._handleEmojiPanelFocusNext=()=>{var e;const t=(this.state.focusedTabIndex+1)%this._sectionIds.length,s=this._sectionIds[t];null===(e=this._refMenuTabs.get(s))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleEmojiPanelFocusPrev=()=>{var e;const t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,s=this._sectionIds[t];null===(e=this._refMenuTabs.get(s))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.setState({focusedTabIndex:-1}),this._focusSearchInput()},this._handleMenuTabClick=(e,t)=>{var s,a;this._selectSection(e),null===(s=(a=this.props).onChange)||void 0===s||s.call(a,""),this._focusSearchInput(),null==t||t.preventDefault()},this._handlePanelSection=e=>{this._animationPromise||this.state.selectedSectionId!==e&&this.setState({selectedSectionId:e})},this._onEmoji=e=>{f.default.increment(e),this.props.onEmoji(e)},this._onChange=(e,t)=>{var s,a;null===(s=(a=this.props).onChange)||void 0===s||s.call(a,e,t),this.setState({})},this._setRefContent=e=>{this._refContent=e},this._renderEmojiTab=(e,t)=>(0,m.jsx)(p.default,{onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}},e),this._scrollSectionIds=this._sectionIds,t=this.props.displayCache?this.props.displayCache:{scrollTop:0,sectionId:this._sectionIds[0],showSearchInput:!0},this._displayCache=t,this.state={selectedSectionId:t.sectionId,focusedTabIndex:-1}}componentDidMount(){this.props.listeners.uiIdle((()=>{this.restoreFocus()}))}restoreFocus(e){this._focusSearchInput(e)}_focusSearchInput(e){this._refContent&&this._refContent.focusSearchInput(e)}_selectSection(e){this.state.selectedSectionId!==e&&(this.setState({selectedSectionId:e}),this._scrollToSection(e))}_scrollToSection(e){if(!this._refContent)return;const t=this._refContent.scrollToSection(e);this._animationPromise=t,t.finally((()=>{t===this._animationPromise&&delete this._animationPromise}))}render(){var e;const t=(0,n.default)(u.default.emojiPanel,{[u.default.panelDropdown]:this.props.displayLocation===_.DROPDOWN}),{width:s=o.EMOJI_PICKER_WIDTH}=this.props;return(0,m.jsxs)("div",{className:t,ref:this._refDiv,children:[(0,m.jsx)(h.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderEmojiTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext,onFocusLeave:this._handleFocusLeave,onEnter:this._handleEmojiPanelFocusEnter}),(0,m.jsx)(l.default,{displayCache:this._displayCache,width:s,onDisplayCache:this.props.onDisplayCache,onFocusUp:this._handleEmojiPanelFocusUp,onFocusPrev:this.props.onFocusPrev,onFocusNext:this.props.onFocusNext,onEmoji:this._onEmoji,onSection:this._handlePanelSection,ref:this._setRefContent,sectionIds:this._scrollSectionIds,onChange:this._onChange,defaultSearchText:this.props.defaultSearchText})]})}}g.defaultProps={displayLocation:_.DROPDOWN},g.displayName="EmojiPanel";const v=(0,c.default)(g);t.default=class extends v{restoreFocus(e){this.getComponent().restoreFocus(e)}}},67071:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SKIN_TONE_VARIATIONS=void 0;var i=a(s(2561));const n=[""].concat(i.default.skinToneVariations);t.SKIN_TONE_VARIATIONS=n},93798:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={TRENDING:"TRENDING",HAHA:"HAHA",SAD:"SAD",LOVE:"LOVE",REACTIONS:"REACTIONS",SPORTS:"SPORTS",TV:"TV"};t.default=s},17939:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.gifProvider=function(){switch(i.default.gifSearch){case"giphy":return n;case"tenor":default:return r}},t.GIPHY_LOCALES=t.BRAND_NAMES=t.GifInfo=t.TENOR=t.GIPHY=t.GAP_SIZE=t.TARGET_GIF_HEIGHT=void 0;var i=a(s(65565));t.TARGET_GIF_HEIGHT=130;t.GAP_SIZE=6;const n="giphy";t.GIPHY=n;const r="tenor";t.TENOR=r;let o=0;t.GifInfo=class{constructor(e,t,s,a,i,n,r,l){this.rank=e,this.gifId=++o,this.url=t,this.size=s,this.previewUrl=a||t,this.nonVideoUrl=i,this.width=n,this.widthStr=`${n}px`,this.ratioStr=`${Math.ceil(13e3/n)}%`,this.attribution=r,this.trending=l}};t.BRAND_NAMES={giphy:"GIPHY",tenor:"Tenor"};t.GIPHY_LOCALES=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"]},87637:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.sectionId&&e.sectionId===i.default.FAVORITES)return(0,o.jsx)(r.default,{name:"panel-starred"});return(0,o.jsx)("span",{className:n.default.text,children:e.sectionTitle})};var i=a(s(98056)),n=a(s(98616)),r=a(s(2966)),o=s(85893)},20636:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t={[n.default.FAVORITES]:r.default.t(929),[n.default.TRENDING]:r.default.t(935),[n.default.HAHA]:r.default.t(930),[n.default.SAD]:r.default.t(933),[n.default.LOVE]:r.default.t(931),[n.default.REACTIONS]:r.default.t(932),[n.default.SPORTS]:r.default.t(934),[n.default.TV]:r.default.t(936)},{sectionId:s}=e,a=t[s];return(0,d.jsx)(l.default,{onClick:e.onClick,sectionId:s,selected:e.selected,showFocusIndicator:e.showFocusIndicator,title:a,theme:l.THEMES.MENU,onRef:e.onRef,children:(0,d.jsx)(o.default,{sectionId:s,sectionTitle:a})})};var n=i(s(98056)),r=i(s(2408)),o=i(s(87637)),l=a(s(274)),d=s(85893)},27666:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(84566)),r=a(s(2966)),o=a(s(35371)),l=s(85893);class d extends i.Component{get messagePreviewRef(){return this._messagePreviewRef}constructor(e){super(e),this.setRefVideo=e=>{this._videoRef=e,this._synchronizeVideo()},this._synchronizeVideo=()=>{const e=this._videoRef;e&&(this.state.animate?e.paused&&e.play():e.paused||(e.pause(),e.currentTime=0))},this.setShouldAnimate=e=>{this.state.animate===e&&this.state.show||this.setState({animate:e,show:!0},this._synchronizeVideo)},this.handleClick=()=>{this.props.onSend(this.props.gif)},this.setRefHotKeys=e=>{this._messagePreviewRef=e},this.handleFocus=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!0})},this.handleBlur=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!1})},this._videoRef=null,this.state={animate:!1,show:!1,focused:!1}}render(){const e=this.props.gif;let t,s=null;return this.state.show&&(s=o.default.troublesWithLotsOfVideos&&e.nonVideoUrl?(0,l.jsx)("img",{className:n.default.body,onClick:this.handleClick,src:e.nonVideoUrl}):(0,l.jsx)("video",{className:n.default.body,onClick:this.handleClick,controls:!1,autoPlay:this.state.animate,loop:!0,muted:!0,ref:this.setRefVideo,src:e.previewUrl})),this.props.isStarred&&this.props.onUnstarMsg&&(t=(0,l.jsx)("button",{className:n.default.icon,onClick:this.props.onUnstarMsg,children:(0,l.jsx)(r.default,{name:"star"})})),(0,l.jsxs)("div",{ref:this.setRefHotKeys,className:n.default.preview,tabIndex:"-1",onFocus:this.handleFocus,onBlur:this.handleBlur,style:{flexBasis:e.widthStr},children:[this.state.focused&&(0,l.jsx)("div",{style:{flexBasis:e.widthStr},className:n.default.focusBorder}),(0,l.jsx)("div",{style:{width:e.widthStr},className:n.default.wrapper,children:(0,l.jsx)("div",{style:{paddingBottom:e.ratioStr},className:n.default.container,children:s})}),t]})}}d.displayName="GifPreview";var u=d;t.default=u},21585:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getGifDimensions=U,t.giphyResultsToGifs=V,t.default=void 0;var n=i(s(48926)),r=s(55084),o=s(99935),l=s(78285),d=s(67294),u=s(60934),c=s(92231),h=a(s(13540)),f=i(s(89178)),p=i(s(47193)),m=s(17939),_=i(s(27666)),g=i(s(85633)),v=i(s(98056)),S=i(s(39e3)),C=i(s(2408)),y=i(s(4231)),E=i(s(40298)),b=i(s(40630)),T=i(s(82181)),M=i(s(47822)),x=i(s(61268)),I=i(s(1458)),P=i(s(18051)),A=s(85893);const N="3o85xmWDYKgihhIKSA",O="DLAQBEYLJJIM",w={giphy:y.default.GIF_SEARCH_PROVIDER.GIPHY,tenor:y.default.GIF_SEARCH_PROVIDER.TENOR},D={giphy:u.VideoMessageAttribution.GIPHY,tenor:u.VideoMessageAttribution.TENOR},j=new T.default((function(e){switch((0,m.gifProvider)()){case"giphy":return function(){return G.apply(this,arguments)}(e);case"tenor":return function(){return H.apply(this,arguments)}(e);default:throw new Error(`Unrecognized provider ${(0,m.gifProvider)()}`)}}),{maxCached:6,maxAge:36e4,shouldCache:e=>!(!e||!e.length)}),R="UP",L="DOWN",k="LEFT",F="RIGHT";class B extends d.Component{constructor(e){super(e),this._scrollTop=0,this._didSendGif=!1,this._onlineRestarter=null,this._pendingQuery=null,this._refGifs={},this._refGifsBySectionId={},this.setRefGif=(e,t)=>{const[s,a]=e;t?(this._refGifs[s]=t,this._refGifsBySectionId[a]=t):(delete this._refGifs[s],delete this._refGifsBySectionId[a])},this._setRefGifCache=new M.default(this.setRefGif),this.handleSend=e=>{const t=w[e.attribution];new y.default.GifFromProviderSent({gifSearchProvider:t}).commit(),e.trending||"number"!=typeof e.rank||new y.default.GifSearchResultTapped({gifSearchProvider:t,rank:e.rank}).commit(),this._didSendGif=!0,this.props.onGif(e.url,D[e.attribution])},this.animateGif=()=>{const e=this._animatingRow;let t=this._scrollTop+m.GAP_SIZE;this._starredGifs&&(t-=this._starredGifs.getClientHeight()||0);const s=Math.round(t/(m.TARGET_GIF_HEIGHT+m.GAP_SIZE)),a=this.state.gifRows[s];if(a&&a.gifs.length&&a!==e){if(this._animatingRow=a,e)for(let t=0;t<e.gifs.length;t++)this._setGifAnimating(e.gifs[t].gifId,!1);for(let e=0;e<a.gifs.length;e++)this._setGifAnimating(a.gifs[e].gifId,!0)}[s+1,s-1].forEach((e=>{if(this.state.gifRows[e]){const t=this.state.gifRows[e].gifs;for(let e=0;e<t.length;e++)this._setGifAnimating(t[e].gifId,!1)}}))},this._searchForAndSetGifs=()=>{const e=w[(0,m.gifProvider)()],t=this.props.searchText||this.props.selectedSectionId||v.default.TRENDING;let s=j.getOrRun(t);s=s.then(),this._pendingQuery=s,this.props.setIsFetching(!0),s.checkpoint(this.props.rejectOnUnmount()).then((t=>{if(t&&0===t.length&&new y.default.GifSearchNoResults({gifSearchProvider:e}).commit(),s!==this._pendingQuery)return;if(this._pendingQuery=null,this.props.setIsFetching(!1),!t)return;let a=this._containerDom&&this._containerDom.clientWidth||0;a-=2*m.GAP_SIZE,this._resetScroll=!0,this._animateTimer.debounce(0),this.setState({gifRows:Y(t,a),width:a})})).catch((0,r.filteredCatch)([h.Unmount,Promise.CancellationError],(()=>{})))},this._handleStarredGifsMount=e=>{this._starredGifs=e},this._handleContainerMount=e=>{this._containerDom=e,null!=e&&e&&this._resetScroll&&(e.scrollTop=0)},this.initSelection=(e=!1)=>{var t;var s;(null===(t=this._starredGifs)||void 0===t?void 0:t.hasGifs())&&!e?null===(s=this._starredGifs)||void 0===s||s.initSelection():(this.selection=[0,0],this._focusGif())},this._getNewColPostion=e=>{const{gifRows:t}=this.state,[s,a,i,n,r]=[this.selection[0],this.selection[1],t[Math.min(this.selection[0],t.length-1)].gifs.length-1,t[Math.min(this.selection[0]+1,t.length-1)].gifs.length-1,t[Math.max(this.selection[0]-1,0)].gifs.length-1],o=a/i;switch(e){case R:const e=Math.floor(r*o);return[Math.max(s-1,0),e];case L:return[s+1,Math.floor(n*o)]}return[0,0]},this.contains=e=>!!this._containerDom&&this._containerDom.contains(e),this.getStarredGifsRef=()=>this._starredGifs,this._handleArrowKeys=(e,t)=>{const{gifRows:s}=this.state,[a,i]=[this.selection[0],this.selection[1]];switch(t){case R:if(0===a)return;this.selection=this._getNewColPostion(R);break;case L:if(a===s.length-1)return;this.selection=this._getNewColPostion(L);break;case k:if(0===i&&0===a)return;this.selection=0===i?this._getNewSelection(a-1,s[a-1].gifs.length-1):this._getNewSelection(a,i-1);break;case F:s[a]?s[a].gifs.length===i+1?this.selection=this._getNewSelection(a+1,0):this.selection=this._getNewSelection(a,i+1):this.selection=[0,0]}this.stopEvent(e),this._focusGif()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.restoreFocus=()=>{},this._focusGif=()=>{const e=this.selection.join("_"),t=this._refGifsBySectionId[e];if(t){const e=t.messagePreviewRef;e&&(p.default.focus(e),this.props.scrollGifIntoViewIfNeeded(e))}},this._handleUpArrow=e=>{this._handleArrowKeys(e,R)},this.handleDownArrow=e=>{this._handleArrowKeys(e,L)},this.handleLeftArrow=e=>{this._handleArrowKeys(e,k)},this.handleRightArrow=e=>{this._handleArrowKeys(e,F)},this.handleEnter=e=>{this.stopEvent(e);const{gifRows:t}=this.state,[s,a]=[this.selection[0],this.selection[1],this.selection[2]];this.handleSend(t[s].gifs[a])},this._scrollTop=0,this._animatingRow=null,this._containerDom=null,this._didSendGif=!1,this.state={gifRows:[],width:0}}componentDidUpdate(e){e.searchText!==this.props.searchText&&this._scheduleQuery()}shouldComponentUpdate(e,t){return e.onGif!==this.props.onGif||t.gifRows!==this.state.gifRows||e.selectedSectionId!==this.props.selectedSectionId||e.searchText!==this.props.searchText}componentDidMount(){this._searchTimer=new l.ShiftTimer(this._searchForAndSetGifs),this._animateTimer=new l.ShiftTimer(this.animateGif),this._onlineRestarter=(0,o.promiseLoop)((()=>(0,P.default)(E.default,"change:online",(()=>E.default.online)).then((()=>this._scheduleQuery())))).cancellable(),this._onlineRestarter.catch((0,r.filteredCatch)(Promise.CancellationError,(()=>{}))),this._searchForAndSetGifs(),new y.default.GifSearchSessionStarted({gifSearchProvider:w[(0,m.gifProvider)()]}).commit()}componentWillUnmount(){this._animateTimer.cancel(),this._searchTimer.cancel(),this._onlineRestarter&&this._onlineRestarter.cancel(),this._didSendGif||new y.default.GifSearchCancelled({gifSearchProvider:w[(0,m.gifProvider)()]}).commit()}_scheduleQuery(){this._searchTimer.debounceAndCap(200,2e3)}animateOnScroll(e){this._scrollTop=e.scrollTop,this._animateTimer.debounce(200)}_setGifAnimating(e,t=!1){const s=this._refGifs[String(e)];s&&s.setShouldAnimate(t)}_getNewSelection(e,t){return[Math.max(0,e),Math.max(0,t)]}render(){const{gifRows:e}=this.state,t={up:this._handleUpArrow,down:this.handleDownArrow,left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},s=e.map(((e,t)=>{const s=e.gifs.map(((e,s)=>(0,A.jsx)(_.default,{ref:this._setRefGifCache.getRefSetter([`${e.gifId}`,`${t}_${s}`]),gif:e,onSend:this.handleSend},e.gifId)));let a=null;return e.blankStr&&(a=(0,A.jsx)("div",{className:g.default.blank,style:{flexBasis:e.blankStr}})),(0,A.jsxs)("div",{className:g.default.row,children:[s,a]},t)})),a=this.props.selectedSectionId!==v.default.FAVORITES&&(0===s.length?(0,A.jsx)("div",{className:g.default.noResults,children:this.props.searchText?(0,A.jsx)(c.SearchWithoutKeyword,{}):(0,A.jsx)(c.Loading,{})}):(0,A.jsx)(S.default,{className:g.default.section,handlers:t,children:s})),i=!this.props.searchText&&this.props.selectedSectionId===v.default.FAVORITES&&(0,A.jsx)(x.default,{onSend:this.handleSend,ref:this._handleStarredGifsMount});return(0,A.jsxs)("div",{className:g.default.searchContainer,ref:this._handleContainerMount,children:[a,i]})}}function G(){return(G=(0,n.default)((function*(e){const t=e===v.default.TRENDING;let s;if(t)s=I.default.build("https://api.giphy.com/v1/gifs/trending",{api_key:N,limit:100,rating:"pg-13"});else{const t=C.default.getLocale();let a=t;switch(t){case"zh-HK":a="zh-TW";break;case"pt-BR":a="pt"}let i="";m.GIPHY_LOCALES.includes(a)&&(i=a),s=I.default.build("https://api.giphy.com/v1/gifs/search",{q:e,api_key:N,limit:100,rating:"pg-13",lang:i})}try{const e=yield(0,f.default)(s);if(!e.ok)throw new Error(e.statusText);return V(yield e.json(),t)}catch(e){return __LOG__(4,void 0,new Error)`gif_search:searchGiphy fetch failed with an error : ${e}`,null}}))).apply(this,arguments)}function U(e,t){if(e){const t=parseInt(e.width,10),s=parseInt(e.height,10);if(t&&s)return{width:t,height:s};__LOG__(4,void 0,new Error,!0)`gif_search:getGifDimensions fullContent does not have valid dimensions'`,SEND_LOGS("gif_search:getGifDimensions fullContent does not have valid dimensions")}if(t){const e=parseInt(t.width,10),s=parseInt(t.height,10);if(e&&s)return{width:m.TARGET_GIF_HEIGHT*e/s,height:m.TARGET_GIF_HEIGHT};__LOG__(4,void 0,new Error,!0)`gif_search:getGifDimensions original does not have valid dimensions`,SEND_LOGS("gif_search:getGifDimensions original does not have valid dimensions")}return{width:m.TARGET_GIF_HEIGHT,height:m.TARGET_GIF_HEIGHT}}function V(e,t){if(!e||!Array.isArray(e.data))return[];if(!e.data.length&&t)return[];const s=e.data,a=[];for(let e=0;e<s.length;e++){const i=s[e],n=i&&i.images;if(!n)continue;const{original:r,preview:o,downsized_small:l,preview_webp:d,preview_gif:u}=n;if(!l)continue;const c=l.mp4;if(!c)continue;const{width:h,height:f}=U(l,r);a.push(new m.GifInfo(a.length,c,parseInt(l.mp4_size,10),o&&o.mp4||void 0,d&&d.url||u&&u.url||void 0,Math.round(h*m.TARGET_GIF_HEIGHT/f),m.GIPHY,t))}return 0===a.length&&s.length>0&&(__LOG__(4,void 0,new Error,!0)`gif_search: All the gifs were skipped, check if there is a change in giphys response`,SEND_LOGS("gif_search: All the gifs were skipped, check if there is a change in giphys response")),a}function H(){return(H=(0,n.default)((function*(e){const t=e===v.default.TRENDING,s=C.default.getLocale().replace("-","_");let a;a=t?I.default.build("https://wa.tenor.co/v1/trending",{key:O,limit:50,contentfilter:"high",locale:s}):I.default.build("https://wa.tenor.co/v1/search",{q:e,key:O,limit:50,contentfilter:"high",locale:s});try{const e=yield(0,f.default)(a);if(!e.ok)throw new Error(e.statusText);return W(yield e.json())}catch(e){return __LOG__(4,void 0,new Error)`gif_search:searchTenor fetch failed with an error : ${e}`,null}}))).apply(this,arguments)}function W(e,t=!1){if(!e||!Array.isArray(e.results))return[];const s=e.results,a=[];for(let e=0;e<s.length;e++){const i=s[e];if(!i||!i.media||!i.media[0])continue;const{tinymp4:n,previewmp4:r,previewgif:o}=i.media[0];if(!n)continue;const[l,d]=n.dims;a.push(new m.GifInfo(a.length,n.url,n.size,r&&r.url||void 0,o&&o.url||void 0,Math.round(l*m.TARGET_GIF_HEIGHT/d),m.TENOR,t))}return a}function Y(e,t){const s=[],a=.9*t;let i=e,n=null;for(let e=.05;e<1&&i.length;e+=.05){i.sort(((e,t)=>{const s=e.rank-t.rank;return Math.abs(s)>8?s:t.width-e.width}));const r=(1+e)*t,o=[],l=[];for(let e=0;e<i.length;e++){const t=i[e];let s=!1;const n=Math.min(r-t.width,a);for(let e=0;!s&&e<o.length;e++)o[e]<n&&(o[e]+=t.width+m.GAP_SIZE,l[e].push(t),s=!0);s||(o.push(t.width),l.push([t]))}if(1===l.length){i=[];const e=t-o[0]-m.GAP_SIZE;n={gifs:l[0],blankStr:e>0?`${e}px`:void 0}}else{i=[];for(let e=0;e<l.length;e++)o[e]>a?s.push(l[e]):i.push.apply(i,l[e])}}s.forEach((e=>e.sort(((e,t)=>e.rank-t.rank)))),s.sort(((e,t)=>e[0].rank-t[0].rank));const r=s.map((e=>({gifs:e,blankStr:void 0})));return n&&r.push(n),r}B.displayName="GifSearch";const K=(0,b.default)(B);t.default=class extends K{constructor(...e){super(...e),this.initSelection=e=>{this.getComponent().initSelection(e)},this.animateOnScroll=e=>{this.getComponent().animateOnScroll(e)},this.getStarredGifsRef=()=>this.getComponent().getStarredGifsRef()}contains(e){return this.getComponent().contains(e)}}},98056:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var i=a(s(93798));const n={FAVORITES:"FAVORITES",[i.default.TRENDING]:i.default.TRENDING,[i.default.HAHA]:i.default.HAHA,[i.default.SAD]:i.default.SAD,[i.default.LOVE]:i.default.LOVE,[i.default.REACTIONS]:i.default.REACTIONS,[i.default.SPORTS]:i.default.SPORTS,[i.default.TV]:i.default.TV};var r=n;t.default=r;const o={[n.FAVORITES]:n.FAVORITES,[n.TRENDING]:n.TRENDING,[n.HAHA]:n.HAHA,[n.SAD]:n.SAD,[n.LOVE]:n.LOVE,[n.REACTIONS]:n.REACTIONS,[n.SPORTS]:n.SPORTS,[n.TV]:n.TV},l=[o.FAVORITES,o.TRENDING,o.HAHA,o.SAD,o.LOVE,o.REACTIONS,o.SPORTS,o.TV];t.ORDERED_TAB_SECTION_IDS=l},72292:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GifPanel=void 0;var n=i(s(41609)),r=i(s(23493)),o=i(s(91747)),l=i(s(7900)),d=s(67294),u=s(15140),c=a(s(73554)),h=s(17939),f=i(s(21585)),p=a(s(98056)),m=i(s(12950)),_=i(s(39e3)),g=i(s(11441)),v=i(s(98952)),S=i(s(2408)),C=i(s(71681)),y=i(s(48830)),E=i(s(4231)),b=i(s(18259)),T=i(s(20636)),M=i(s(82669)),x=s(85893);class I extends d.PureComponent{constructor(e){super(e),this._refMenuTabs=new Map,this.getElement=()=>this._refContainer,this._setRefContainer=e=>{this._refContainer=e},this._lastScrollTop=0,this._fastScroll=!1,this._lastFetchStart=0,this._lastClickTime=0,this._setGifPanelRef=e=>{this._gifPanelRef=e},this._refScrollContainer=(0,d.createRef)(),this._sectionIds=p.ORDERED_TAB_SECTION_IDS,this.handleScroll=(0,r.default)((()=>{const e=this._refScrollContainer.current;if(null==this.state.selectedSectionId&&this.state.searchText&&e&&this._gifPanelRef)return void this._gifPanelRef.animateOnScroll(e);if(Date.now()-this._lastClickTime<u.SCROLL_CLICK_TIME_GAP)return;const t={};if(this.state.isPreview&&(t.isPreview=!1),!e)return;const s=e.scrollTop,a=s<=0;a!==this.state.scrolledToTop&&(t.scrolledToTop=a);const i=this._lastScrollTop-s,r=Math.abs(i)>u.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(i)>u.INPUT_BAR_SCROLL_FAST,i<0?this.state.showSearchInput&&(s>u.INPUT_HIDE_POINT&&r||this._lastScrollTop<u.INPUT_HIDE_POINT&&s>=u.INPUT_HIDE_POINT)&&(t.showSearchInput=!1):this.state.showSearchInput||(r||s<u.INPUT_SHOW_POINT)&&(t.showSearchInput=!0),this._gifPanelRef&&this._gifPanelRef.animateOnScroll(e),this._lastScrollTop=s,(0,n.default)(t)||this.setState(t)}),u.SCROLL_THROTTLE_TIME),this._setRefSearchInput=e=>{this._searchInput=e},this.restoreFocus=e=>{this.focusSearchInput(e)},this.onRotateFocus=e=>{this.stopEvent(e),this._searchInputHasFocus()?this.props.onFocusRelease&&this.props.onFocusRelease():this.focusSearchInput()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.scrollGifIntoViewIfNeeded=e=>{const t=this._refScrollContainer.current;t&&e.offsetTop-t.scrollTop<u.INPUT_BAR_TOTAL_HEIGHT&&c.scrollIntoView(e,!0,t)},this._searchInputHasFocus=()=>!!this._searchInput&&this._searchInput.hasFocus(),this.focusSearchInput=e=>{if(!this._searchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._searchInput.focus(e)},this._onGifSearchDown=e=>{this.stopEvent(e),this._gifPanelRef&&this._gifPanelRef.initSelection()},this._getSearchBox=()=>{let e=null;this.state.showSearchInput&&(e=(0,x.jsx)(b.default,{label:S.default.t(1568,{service:h.BRAND_NAMES[(0,h.gifProvider)()]}),onChange:this.onSearch,onUpKey:this._handleFocusUp,onDownKey:this._onGifSearchDown,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,tabFocused:this.state.tabFocused,value:this.state.searchText||""}));const t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return(0,x.jsx)(M.default,{transitionName:t,children:e})},this.onSearch=(e,t)=>{var s;(this.stopEvent(t),null==this.state.searchText)&&(this._scrollTopBeforeSearch=null===(s=this._refScrollContainer.current)||void 0===s?void 0:s.scrollTop);this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e,tabFocused:!1})},this.preventBlur=e=>{this.stopEvent(e),this.restoreFocus()},this._handleIsFetching=()=>{if(this.state.isFetching){const e=Date.now()-this._lastFetchStart;e<u.MINIMUM_LOADING_TIME?window.setTimeout((()=>this.setState({isFetching:!1})),u.MINIMUM_LOADING_TIME-e):this.setState({isFetching:!1})}else this.setState({isFetching:!0}),this._lastFetchStart=Date.now()},this._handleParentContainerUp=e=>{var t;const s=e&&e.nativeEvent.target,a=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef(),i=s instanceof HTMLElement&&(null==a?void 0:a.isStarredGif(s)),n=s instanceof HTMLElement&&!!this._gifPanelRef&&this._gifPanelRef.contains(s);i?(this.focusSearchInput(),this.stopEvent(e)):n&&(null==a?void 0:a.hasGifs())?(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e)):n&&(this.focusSearchInput(),this.stopEvent(e))},this.handleDownArrow=e=>{var t;const s=e&&e.nativeEvent.target,a=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef();s instanceof HTMLElement&&(null==a?void 0:a.isStarredGif(s))?(this._gifPanelRef&&this._gifPanelRef.initSelection(!0),this.stopEvent(e)):s instanceof Node&&this._gifPanelRef&&this._gifPanelRef.contains(s)&&(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e))},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusNext&&this.props.onFocusNext()):this.focusSearchInput()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusPrev&&this.props.onFocusPrev()):this.focusSearchInput()},this._handleFocusUp=()=>{var e,t;const s=null!==(e=this.state.selectedSectionId)&&void 0!==e?e:this._sectionIds[0];null===(t=this._refMenuTabs.get(s))||void 0===t||t.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleFocusEnter=()=>{const e=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(e)},this._handleMenuFocusNext=()=>{var e;const t=(this.state.focusedTabIndex+1)%this._sectionIds.length,s=this._sectionIds[t];null===(e=this._refMenuTabs.get(s))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleMenuFocusPrev=()=>{var e;const t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,s=this._sectionIds[t];null===(e=this._refMenuTabs.get(s))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleMenuTabClick=e=>{var t,s,a;e===p.default.FAVORITES?this.setState({showSearchInput:!0,selectedSectionId:e,searchText:null,tabFocused:!0}):this.setState({showSearchInput:!0,selectedSectionId:e,searchText:e,tabFocused:!0}),null===(t=(s=this.props).onChange)||void 0===t||t.call(s,""),null===(a=this._searchInput)||void 0===a||a.focus(!1)},this._renderGifTab=(e,t)=>(0,x.jsx)(T.default,{onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}},e);const t=(0,o.default)(this.props.displayCache||{},{scrollTop:0,showSearchInput:!0});m.default.supportsFeature(m.default.F.STARRED_GIFS)||(this._sectionIds=this._sectionIds.filter((e=>e!==p.default.FAVORITES))),this.state={isPreview:!t.scrollTop,scrolledToTop:0===t.scrollTop,searchText:this.props.defaultSearchText||null,searchResults:null,showSearchInput:t.showSearchInput,selectedSectionId:t.selectedSectionId||p.default.TRENDING,tabFocused:!1,focusedTabIndex:-1,isFetching:!1}}componentDidMount(){this._lastClickTime=Date.now();const e=this.props.displayCache&&this.props.displayCache.scrollTop,t=this._refScrollContainer.current;t&&null!=e&&0!==e&&(t.scrollTop=e),this.props.listeners.uiIdle((()=>{this.restoreFocus(),new E.default.WebcEmojiOpen({webcEmojiOpenTab:"GIF"}).commit(),this.setState({isPreview:!1})}))}componentWillUnmount(){var e;const t=this._refScrollContainer.current;this.props.onDisplayCache({scrollTop:null!==(e=null==t?void 0:t.scrollTop)&&void 0!==e?e:0,showSearchInput:this.state.showSearchInput,selectedSectionId:this.state.selectedSectionId}),this.handleScroll.cancel()}componentDidUpdate(e,t){const s=this._refScrollContainer.current;if(t.searchText!==this.state.searchText){if(!s)return;this.state.searchText?s.scrollTop=0:null!=this._scrollTopBeforeSearch&&0!==this._scrollTopBeforeSearch&&(s.scrollTop=this._scrollTopBeforeSearch)}}render(){var e;const t=this._getSearchBox(),s=(this.state.searchText||"").replace(/^\s+/,"");return(0,x.jsxs)(_.default,{onRef:this._setRefContainer,handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey,up:this._handleParentContainerUp,down:this.handleDownArrow},children:[(0,x.jsx)(g.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderGifTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),(0,x.jsxs)("div",{className:v.default.gifPanel,children:[(0,x.jsx)(y.default,{loading:this.state.isFetching}),(0,x.jsxs)("div",{className:v.default.bodyContainer,onMouseDown:this.preventBlur,children:[t,(0,x.jsx)("div",{className:v.default.panelBody,onScroll:this.handleScroll,ref:this._refScrollContainer,children:(0,x.jsx)(f.default,{ref:this._setGifPanelRef,onGif:(0,l.default)(this.props.onGif,"this.props.onGif"),searchText:s,scrollGifIntoViewIfNeeded:this.scrollGifIntoViewIfNeeded,selectedSectionId:this.state.selectedSectionId,setIsFetching:this._handleIsFetching})})]})]})]})}}t.GifPanel=I,I.displayName="GifPanel";const P=(0,C.default)(I);t.default=class extends P{focusSearchInput(e){this.getComponent().focusSearchInput(e)}restoreFocus(e){this.getComponent().restoreFocus(e)}}},7942:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=i(s(91952)),l=i(s(75940)),d=s(60934),u=s(17939),c=i(s(27666)),h=i(s(2408)),f=i(s(71681)),p=a(s(15377)),m=s(90672),_=i(s(4231)),g=i(s(82394)),v=i(s(7566)),S=i(s(2966)),C=s(85893);class y extends r.Component{constructor(...e){super(...e),this.setRefGif=e=>{this._gifRef=e},this._getGifProvider=()=>{switch(this.props.msg.gifAttribution){case d.VideoMessageAttribution.GIPHY:return u.GIPHY;case d.VideoMessageAttribution.TENOR:return u.TENOR;default:return""}},this.handleClick=e=>{e.stopPropagation();switch(this.props.msg.mediaData.mediaStage){case m.MEDIA_DATA_STAGE.NEED_POKE:this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0});break;case m.MEDIA_DATA_STAGE.FETCHING:this.props.msg.cancelDownload();break;case m.MEDIA_DATA_STAGE.UPLOADING:this.props.msg.cancelUpload();break;case m.MEDIA_DATA_STAGE.ERROR_MISSING:o.default.openModal((0,C.jsx)(l.default,{title:h.default.t(1272),onOK:()=>o.default.closeModal(),okText:h.default.t(2085),children:h.default.t(1271)}))}},this.handleUnstarMsg=()=>{const{msg:e}=this.props;g.default.remove(e)}}getGifRef(){return this._gifRef}animateGif(){this.props.listeners.uiIdle((()=>{this._gifRef&&this._gifRef.setShouldAnimate(!0)}))}componentDidMount(){const e=this.props.msg;this.props.listeners.add(e,"change:mediaData.mediaStage",(()=>{this.forceUpdate()})),this.props.listeners.uiIdle((()=>{e.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})})),this.animateGif()}componentDidUpdate(){this.animateGif()}render(){const e=this.props.msg,t=e.mediaData,s=new u.GifInfo(void 0,t.renderableUrl,void 0,void 0,void 0,Math.round(t.aspectRatio*u.TARGET_GIF_HEIGHT),this._getGifProvider(),!1);if(t.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED)return(0,C.jsx)(c.default,{ref:this.setRefGif,gif:s,onSend:this.props.onSend,isStarred:!0,onUnstarMsg:this.handleUnstarMsg},e.filehash);if(t.preview){const a=t.preview.url();let i;switch(t.mediaStage){case m.MEDIA_DATA_STAGE.ERROR_MISSING:break;case m.MEDIA_DATA_STAGE.NEED_POKE:i=(0,C.jsx)(p.Download,{});break;case m.MEDIA_DATA_STAGE.FETCHING:case m.MEDIA_DATA_STAGE.UPLOADING:i=(0,C.jsx)(p.Pending,{cancelable:!0});break;default:i=(0,C.jsx)(p.Pending,{})}const r=(0,n.default)(v.default.thumb,{[v.default.blur]:t.mediaStage===m.MEDIA_DATA_STAGE.ERROR_MISSING}),o=(0,C.jsx)("div",{className:r,style:{backgroundImage:`url(${a})`,height:`${u.TARGET_GIF_HEIGHT}px`}});return(0,C.jsxs)("div",{className:v.default.container,style:{flexBasis:s.widthStr},children:[(0,C.jsx)("div",{className:v.default.wrapper,style:{width:s.widthStr},onClick:this.handleClick,children:(0,C.jsxs)("div",{className:v.default.innerWrapper,style:{paddingBottom:s.ratioStr},children:[i,o]})}),(0,C.jsx)("button",{className:v.default.starIcon,onClick:this.handleUnstarMsg,children:(0,C.jsx)(S.default,{name:"star"})})]},e.filehash)}return null}}y.displayName="StarredGifPreview";const E=(0,f.default)(y);t.default=class extends E{getGifRef(){return this.getComponent().getGifRef()}}},61268:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(45578)),n=a(s(94184)),r=s(67294),o=a(s(47193)),l=s(17939),d=a(s(39e3)),u=a(s(71681)),c=a(s(82394)),h=a(s(7942)),f=a(s(29123)),p=a(s(2966)),m=s(85893);const _="RIGHT",g="LEFT";class v extends r.Component{constructor(...e){super(...e),this.state={curIndex:0,direction:_},this._msgLength=0,this._refStarredPreview={},this._selectionIndex=0,this._handleSlideLeft=()=>this._hasLeft()?new Promise((e=>{this.setState({curIndex:this.state.curIndex-1,direction:g},(()=>{e(!0)}))})):Promise.resolve(!1),this._handleSlideRight=()=>this._hasRight()?new Promise((e=>{this.setState({curIndex:this.state.curIndex+1,direction:_},(()=>{e(!0)}))})):Promise.resolve(!1),this.setRef=e=>{this._ref=e},this._hasRight=()=>this.state.curIndex+4<this._msgLength,this._hasLeft=()=>this.state.curIndex>0,this.handleLeftArrow=e=>{this._handleSlideLeft().then((t=>{this._selectionIndex=t?this._selectionIndex:this._selectionIndex-1,this._selectionIndex<0?this.stopEvent(e):(this.stopEvent(e),this._focusStarredGif())}))},this.handleRightArrow=e=>{this._handleSlideRight().then((t=>{this._selectionIndex=t?this._selectionIndex-1:this._selectionIndex;const s=Object.keys(this._refStarredPreview).length;if(this._selectionIndex<3&&this._selectionIndex<s-1)this._selectionIndex=this._selectionIndex+1;else{if(!this._hasRight())return void this.stopEvent(e);this._selectionIndex=3}this.stopEvent(e),this._focusStarredGif()}))},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.handleEnter=e=>{var t;this.stopEvent(e),null===(t=this._refStarredPreview[this._selectionIndex])||void 0===t||t.getGifRef().handleClick()},this._focusStarredGif=()=>{var e,t;const s=null===(e=this._refStarredPreview[this._selectionIndex])||void 0===e||null===(t=e.getGifRef())||void 0===t?void 0:t.messagePreviewRef;s&&o.default.focus(s)},this.initSelection=()=>{this._selectionIndex=0,this._focusStarredGif()}}componentDidMount(){const e=c.default;this.props.listeners.add(e,"add remove reset",(()=>{this.forceUpdate()})),e.isSynced||e.sync()}getClientHeight(){return this._ref&&this._ref.clientHeight}hasGifs(){return Boolean(this._ref&&this._ref.childNodes.length)}isStarredGif(e){return!!e&&(!!this._ref&&this._ref.contains(e))}render(){const e={left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},t=(0,i.default)(c.default.toArray(),"filehash");if(this._msgLength=t.length,0===t.length)return(0,m.jsx)("div",{});if(t.length<=4){let s=0;const a=t.map(((e,t)=>(s+=Math.round(e.mediaData.aspectRatio*l.TARGET_GIF_HEIGHT),(0,m.jsx)(h.default,{ref:e=>this._refStarredPreview[t]=e,msg:e,onSend:this.props.onSend},e.filehash))));return s+=(a.length-1)*l.GAP_SIZE,(0,m.jsx)(d.default,{className:f.default.section,handlers:e,children:(0,m.jsx)("div",{ref:this.setRef,className:f.default.searchRow,style:{maxWidth:`${s}px`},children:a})})}{const s=this._hasLeft(),a=this._hasRight(),i=s?this._handleSlideLeft:null,r=a?this._handleSlideRight:null,o=(0,n.default)(f.default.pager,f.default.pagerLeft,{[f.default.pagerDisabled]:!s}),l=(0,n.default)(f.default.pager,f.default.pagerRight,{[f.default.pagerDisabled]:!a}),u=(0,m.jsx)("div",{className:o,onClick:i,children:(0,m.jsx)(p.default,{name:"chevron-left-alt"})}),c=(0,m.jsx)("div",{className:l,onClick:r,children:(0,m.jsx)(p.default,{name:"chevron-right-alt"})}),_=t.slice(this.state.curIndex,this.state.curIndex+4).map(((e,t)=>(0,m.jsx)(h.default,{ref:e=>this._refStarredPreview[t]=e,msg:e,onSend:this.props.onSend},e.filehash)));return(0,m.jsx)("div",{className:f.default.section,children:(0,m.jsxs)(d.default,{onRef:this.setRef,className:f.default.searchRow,handlers:e,children:[u,(0,m.jsx)("div",{className:f.default.body,children:_}),c]})})}}}v.displayName="StarredGifs";const S=(0,u.default)(v);t.default=class extends S{getClientHeight(){return this.getComponent().getClientHeight()}hasGifs(){return this.getComponent().hasGifs()}isStarredGif(e){return this.getComponent().isStarredGif(e)}initSelection(){return this.getComponent().initSelection()}}},48830:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.jsx)("div",{className:i.default.barContainer,role:"progressbar",children:e.loading&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:i.default.movingBar1}),(0,n.jsx)("span",{className:i.default.movingBar2})]})})};var i=a(s(75228)),n=s(85893)},56410:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)("div",{className:(0,i.default)(n.default.container,e.className),onMouseDown:e=>{e.stopPropagation()},children:e.children})};var i=a(s(94184)),n=a(s(40870)),r=s(85893)},11441:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let s=-1;const a=e.sectionIds.map(((t,a)=>{let i=!1;return t===e.selectedSectionId&&(e.showTabHighlight?(s=a,i=!0):s=-1),e.renderSectionTab(t,i)}));return(0,l.jsx)(r.default,{component:"div",handlers:(0,n.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext,down:e.onFocusLeave,left:e.onFocusPrev,right:e.onFocusNext,enter:e.onEnter,space:e.onEnter}),children:(0,l.jsxs)(i.default,{children:[(0,l.jsx)(o.default,{numTabs:e.sectionIds.length,selectedTabIndex:s,animate:null===(t=e.showTabHighlight)||void 0===t||t}),a]})})};var i=a(s(56410)),n=a(s(28416)),r=a(s(39e3)),o=a(s(39417)),l=s(85893)},274:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var i=a(s(18446)),n=a(s(94184)),r=s(67294),o=a(s(47193)),l=a(s(92466)),d=s(85893);const u={CAROUSEL:"CAROUSEL",CAROUSEL_END:"CAROUSEL_END",MENU:"MENU"};t.THEMES=u;class c extends r.PureComponent{constructor(...e){super(...e),this._setRefTab=e=>{var t,s;this._refTab=e,null===(t=(s=this.props).onRef)||void 0===t||t.call(s,e)},this._handleClick=e=>{this.props.onClick&&this.props.onClick(this.props.sectionId,e)}}focus(){this._refTab&&(this.hasFocus()||o.default.focus(this._refTab))}hasFocus(){return!!document.activeElement&&this._refTab===document.activeElement}_getStyle(e){return(0,i.default)(this._style,e)||(this._style=e),this._style}render(){const{theme:e,title:t}=this.props;return(0,d.jsx)("div",{ref:this._setRefTab,role:"button",className:(0,n.default)(l.default.tab,{[l.default.menu]:e===u.MENU,[l.default.carousel]:e===u.CAROUSEL||e===u.CAROUSEL_END,[l.default.carouselEnd]:e===u.CAROUSEL_END,[l.default.selected]:this.props.selected,[l.default.highlightOnFocus]:this.props.showFocusIndicator}),onClick:this._handleClick,style:this._getStyle({width:this.props.width,transform:this.props.transform}),title:t,tabIndex:"0",children:this.props.children})}}t.default=c,c.displayName="MenuTab"},39417:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(18446)),n=a(s(94184)),r=s(67294),o=a(s(2408)),l=a(s(33607)),d=s(85893);class u extends r.PureComponent{constructor(...e){super(...e),this._isRTL=o.default.isRTL()?-1:1,this.state={height:"4px",transform:`translateX(${100*this.props.selectedTabIndex*this._isRTL}%)`,animateWithTransform:Boolean(this.props.animate)}}componentDidUpdate(e){(0,i.default)(e,this.props)||(-1===e.selectedTabIndex&&this.props.selectedTabIndex!==e.selectedTabIndex?this.setState({animateWithTransform:!1}):this.setState({animateWithTransform:this.props.animate}),-1!==this.props.selectedTabIndex?this.setState({transform:`translateX(${100*this.props.selectedTabIndex*this._isRTL}%)`,height:"4px"}):-1!==e.selectedTabIndex&&-1===this.props.selectedTabIndex&&this.setState({height:"0px"}))}render(){return(0,d.jsx)("div",{className:(0,n.default)(l.default.menuTabsMarker,{[l.default.hide]:this.props.hide,[l.default.animate]:!this.state.animateWithTransform&&this.props.animate,[l.default.animateWithTransform]:this.state.animateWithTransform}),style:{width:100/this.props.numTabs+"%",transform:this.state.transform,height:this.state.height}})}}u.displayName="MenuTabMarker";var c=u;t.default=c},18259:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HEIGHT=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(55454)),l=a(s(40854)),d=a(s(47193)),u=a(s(39e3)),c=a(s(2408)),h=a(s(74760)),f=s(20845),p=a(s(2966)),m=a(s(35371)),_=s(85893);t.HEIGHT=56;var g=(0,n.forwardRef)(((e,t)=>{const s=(0,n.useRef)(),a=(0,n.useRef)(),[g,v]=(0,n.useState)(e.value||"");null!=e.value&&e.value!==g&&v(e.value);const S=()=>!!document.activeElement&&s.current===document.activeElement,C=e=>{const t=s.current;t&&(S()||(d.default.focus(t),e&&l.default.indicateFocus(a.current)))};(0,n.useImperativeHandle)(t,(()=>({focus:C,hasFocus:S})));const y=t=>{var s;v(""),null===(s=e.onChange)||void 0===s||s.call(e,"",t)};let E=null;return g&&!e.tabFocused&&(E=(0,_.jsx)("button",{className:h.default.cancelIcon,onClick:y,children:(0,_.jsx)(p.default,{name:"x-alt-small"})})),(0,_.jsx)(u.default,{handlers:{enter:t=>{var s;t.preventDefault(),t.stopPropagation(),null===(s=e.onEnterKey)||void 0===s||s.call(e,t)},up:t=>{var s;t.stopPropagation(),t.preventDefault(),null===(s=e.onUpKey)||void 0===s||s.call(e,t)},down:t=>{var s;t.stopPropagation(),t.preventDefault(),null===(s=e.onDownKey)||void 0===s||s.call(e,t)}},"data-tab":o.default.TAB_ORDERS.PANEL_SEARCH_INPUT,className:(0,i.default)(h.default.searchRow,{[h.default.ffFix]:m.default.isGecko,[h.default.rowShadow]:e.shadow}),onFocus:()=>C(),children:(0,_.jsx)("label",{ref:a,className:h.default.rowInput,children:(0,_.jsxs)("div",{className:h.default.inputContainer,children:[(0,_.jsx)("input",{"data-a8n":r.default.key("input-emoji-search"),ref:s,className:(0,i.default)(h.default.inputEmojiSearch,f.SELECTABLE_INPUT_CSS_CLASS),type:"text",role:"searchbox",dir:c.default.isRTL()?"rtl":"ltr",value:e.tabFocused?"":g,title:e.label,placeholder:e.label,onMouseDown:e=>{e.stopPropagation()},onChange:t=>{var s;v(t.target.value),null===(s=e.onChange)||void 0===s||s.call(e,t.target.value,t)}}),E]})})},"search-input")}));t.default=g},3754:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var n=i(s(94184)),r=s(67294),o=i(s(47193)),l=i(s(12950)),d=i(s(57379)),u=i(s(71681)),c=i(s(61848)),h=a(s(14457)),f=i(s(82840)),p=s(85893);const m={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=m;class _ extends r.PureComponent{constructor(...e){super(...e),this._refDiv=(0,r.createRef)(),this.getElement=()=>this._refDiv.current,this.state={hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0,menuShadow:!1,selectedStickerPackIndex:this._getInitialStickerPackIndex()},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._setRefMenu=e=>{this._refMenu=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusNext=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleContentFocusPrev=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=e=>{this.setState({selectedStickerPackIndex:e})},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleMenuFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleMenuFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleScroll=({scrollTop:e})=>{this._lastScrollTop=e,this.setState({menuShadow:e>0})},this._handleStickerPacksChange=()=>{this.setState({hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0})}}_getInitialStickerPackIndex(){const{displayCache:e}=this.props;return e&&null!=e.selectedStickerPackIndex?e.selectedStickerPackIndex:0}componentDidMount(){this.props.listeners.add(c.default,"change:length",this._handleStickerPacksChange),this.props.listeners.add(c.default,"change:pageFetchStates",this._handleStickerPacksChange),this.props.listeners.uiIdle((()=>{this.restoreFocus(),c.default.fetchAt(0)}))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedStickerPackIndex:this.state.selectedStickerPackIndex})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;o.default.focus(this._refEmptyContent)}else this._refMenu&&this._refMenu.focus()}))}_focusPrev(){this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){const e=l.default.isRecentStickersEnabled(),t=l.default.isStarredStickersEnabled(),s=(e?1:0)+(t?1:0),{selectedStickerPackIndex:a}=this.state;if(!e&&this.state.hasFetchedData&&!this.state.hasStickers)return(0,p.jsx)(h.StickerPanelEmpty,{containerClassName:d.default.panelContainer,onClick:this._handleContainerClick,onFocusPrev:this._handleEmptyFocusPrev,onFocusNext:this._handleEmptyFocusNext,onRef:this._setRefEmptyContent});const{displayLocation:i}=this.props,r=(0,n.default)(d.default.panelContainer,{[d.default.panelDropdown]:i===m.DROPDOWN});return(0,p.jsxs)("div",{className:r,onClick:this._handleContainerClick,ref:this._refDiv,children:[(0,p.jsx)(f.default,{ref:this._setRefMenu,displayLocation:i,onFocusBelow:this._handleMenuFocusBelow,onFocusNext:this._handleMenuFocusNext,onFocusPrev:this._handleMenuFocusPrev,onItemClick:this._handleItemClick,selectedStickerPackIndex:a,shadow:this.state.menuShadow,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:s}),(0,p.jsx)(h.default,{ref:this._setRefContent,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onSticker:this.props.onSticker,selectedStickerPackIndex:a,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:s})]})}}_.defaultProps={displayLocation:m.DROPDOWN},_.displayName="StickerPanel";const g=(0,u.default)(_);t.default=class extends g{restoreFocus(){this.getComponent().restoreFocus()}}},30023:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DisplayLocation=void 0;var n=i(s(94184)),r=s(67294),o=s(15140),l=i(s(57379)),d=i(s(11441)),u=i(s(98374)),c=i(s(22315)),h=i(s(2408)),f=i(s(2966)),p=a(s(274)),m=i(s(79939)),_=i(s(75169)),g=i(s(20994)),v=s(85893);const S=s(54302).Mirrored(["ComposeBox","Dropdown"]);t.DisplayLocation=S;const C=Array.from(o.StickerTabs.members());var y=(0,r.forwardRef)(((e,t)=>{var s,a;const{displayLocation:i=S.Dropdown}=e,h=(0,r.useRef)(),y=(0,r.useRef)(),T=(0,r.useRef)(),M=(0,m.default)((()=>new Map)),[x,I]=(0,r.useState)((null===(s=e.displayCache)||void 0===s?void 0:s.selectedTab)||o.StickerTabs.RECENTS),[P,A]=(0,r.useState)(-1);(0,_.default)((()=>{var t;null===(t=e.onDisplayCache)||void 0===t||t.call(e,{scrollTop:y.current,selectedTab:x})}));const N=(0,g.default)(),O=()=>N((()=>{const e=T.current;e&&e.focus()}));(0,r.useImperativeHandle)(t,(()=>({restoreFocus:O,getElement:()=>h.current})));const w=(t,s)=>{var a,i,n;null==s||s.preventDefault(),I(t),null===(a=T.current)||void 0===a||a.clearSearchText(),null===(i=e.onChange)||void 0===i||i.call(e,""),null===(n=T.current)||void 0===n||n.focus()},D=(0,n.default)(l.default.panelContainer,{[l.default.panelDropdown]:i===S.Dropdown});return(0,v.jsxs)("div",{className:D,ref:h,children:[(0,v.jsx)(d.default,{selectedSectionId:x,sectionIds:Array.from(o.StickerTabs.members()),renderSectionTab:(e,t)=>{const s=E(e),a=function(e){switch(e){case o.StickerTabs.RECENTS:return(0,v.jsx)(f.default,{name:"panel-recent"});default:return E(e)}}(e);return(0,v.jsx)(p.default,{onClick:w,sectionId:e,selected:t,showFocusIndicator:-1!==P,title:s,theme:p.THEMES.MENU,onRef:t=>{M.current.set(e,t)},children:(0,v.jsx)("span",{className:u.default.tabIconOrText,children:a})},s)},showTabHighlight:!(null===(a=e.defaultSearchText)||void 0===a?void 0:a.trim()),onFocusPrev:e=>{var t;b(e);const s=(C.length+P-1)%C.length,a=C[s];null===(t=M.current.get(a))||void 0===t||t.focus(),A(s)},onFocusNext:e=>{var t;b(e);const s=(P+1)%C.length,a=C[s];null===(t=M.current.get(a))||void 0===t||t.focus(),A(s)},onEnter:()=>{A(-1),w(C[P])},onFocusLeave:e=>{b(e),O(),A(-1)}}),(0,v.jsx)(c.default,{ref:T,onFocusUp:e=>{var t;b(e),null===(t=M.current.get(x))||void 0===t||t.focus(),A(C.indexOf(x))},onFocusNext:t=>{b(t),e.onFocusNext()},onFocusPrev:t=>{b(t),e.onFocusPrev()},onScroll:({scrollTop:e})=>{y.current=e},onChange:e.onChange,onSticker:e.onSticker,defaultSearchText:e.defaultSearchText,selectedTab:x})]})}));function E(e){switch(e){case o.StickerTabs.RECENTS:return h.default.t(1437);case o.StickerTabs.LOVE:return h.default.t(1665);case o.StickerTabs.GREETINGS:return h.default.t(1663);case o.StickerTabs.HAPPY:return h.default.t(1664);case o.StickerTabs.SAD:return h.default.t(1666);case o.StickerTabs.ANGRY:return h.default.t(1661);case o.StickerTabs.CELEBRATE:return h.default.t(1662)}}function b(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=y},14457:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelEmpty=function({containerClassName:e,onClick:t,onFocusPrev:s,onFocusNext:a,onRef:n}){return(0,m.jsxs)("div",{className:(0,i.default)(e,l.default.emptyContainer),onClick:t,children:[(0,m.jsx)("div",{className:l.default.emptySticker,style:{backgroundImage:`url(${c.default})`}}),(0,m.jsx)(o.default,{handlers:{"shift+tab":s,tab:a},onRef:n,children:(0,m.jsx)("p",{className:l.default.emptyText,children:d.default.t(1660)})})]})},t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(28416)),o=a(s(39e3)),l=a(s(49972)),d=a(s(2408)),u=a(s(4231)),c=a(s(46023)),h=a(s(70183)),f=a(s(24129)),p=a(s(37981)),m=s(85893);class _ extends n.PureComponent{constructor(...e){super(...e),this._handleGridFocusPrev=()=>{this.props.onFocusPrev()},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._onStickerFromRecent=e=>{this.props.onSticker(e,{stickerSendOrigin:u.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS})},this._onStickerFromStarred=e=>{this.props.onSticker(e,{stickerSendOrigin:u.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_FAVORITES})}}focus(){this._refScrollGrid&&this._refScrollGrid.focus()}_getContent(){return this.props.recentStickersEnabled&&0===this.props.selectedStickerPackIndex?(0,m.jsx)(h.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromRecent,onStickerEnter:this._onStickerFromRecent}):this.props.starredStickersEnabled&&1===this.props.selectedStickerPackIndex?(0,m.jsx)(p.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromStarred,onStickerEnter:this._onStickerFromStarred}):(0,m.jsx)(f.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onSticker,onStickerEnter:this.props.onSticker,selectedStickerPackIndex:this.props.selectedStickerPackIndex-this.props.specialItemsCount})}render(){const e=(0,i.default)(l.default.container);return(0,m.jsx)(o.default,{className:e,handlers:(0,r.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext}),children:this._getContent()})}}t.default=_,_.displayName="StickerPanelContent"},22315:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(48926)),n=a(s(94184)),r=s(67294),o=s(15140),l=a(s(28416)),d=a(s(39e3)),u=a(s(49972)),c=a(s(2408)),h=a(s(48830)),f=a(s(4231)),p=a(s(18259)),m=a(s(21809)),_=a(s(6009)),g=a(s(17400)),v=a(s(38853)),S=s(61192),C=a(s(16297)),y=a(s(33156)),E=a(s(82669)),b=s(85893);const T=(0,r.forwardRef)(((e,t)=>{if(e.searchText)return(0,b.jsx)(g.default,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,searchText:e.searchText,resetScroll:e.resetScroll});if(e.selectedTab===o.StickerTabs.RECENTS)return(0,b.jsx)(m.default,{ref:t,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,resetScroll:e.resetScroll});return null!=(0,o.convertTabToMood)(e.selectedTab)?(0,b.jsx)(g.default,{ref:t,selectedTab:e.selectedTab,onFocusPrev:e.onFocusPrev,onStickerClick:e.onStickerClick,searchText:e.searchText,resetScroll:e.resetScroll}):(__LOG__(4,void 0,new Error,!0)`_renderStickerScrollGrid attempted with an invalid selectedTab: ${e.selectedTab}`,SEND_LOGS("_renderStickerScrollGrid attempted with an invalid selectedTab"),null)}));var M=(0,r.forwardRef)(((e,t)=>{const{defaultSearchText:s,selectedTab:a}=e,m=function(){const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!0),[i]=(0,y.default)((()=>{a(!0)}),o.MINIMUM_LOADING_TIME);return(0,S.useListener)(_.default,"start_fetching",(()=>{t(!0),a(!1),i()})),(0,S.useListener)(_.default,"stop_fetching",(()=>{t(!1)})),e||!s}(),g=(0,r.useRef)(!1),M=(0,r.useRef)(),x=(0,r.useRef)(0),I=(0,r.useRef)(0),P=()=>{const e=M.current;null!=e&&(e.scrollTop=0,I.current=0,x.current=0)},[A,N]=(0,r.useState)(s||""),O=(0,r.useRef)(!1);(0,r.useEffect)((()=>{O.current?N(""):O.current=!0}),[a]);const w=function(){var e=(0,i.default)((function*(e){P();try{yield _.default.search(e)}catch(e){__LOG__(4,void 0,new Error,!0)`Sticker search promise failed`,SEND_LOGS(e)}}));return function(){return e.apply(this,arguments)}}(),D=(0,v.default)(w,250),j=(0,r.useRef)(),[R,L]=(0,r.useState)(!0),k=()=>{const e=j.current;if(!e)return g.current=!0,void L(!0);e.focus(!1)};(0,r.useEffect)((()=>{R&&k()}),[R]),(0,r.useEffect)((()=>{k(),s&&w(s)}),[]),(0,r.useImperativeHandle)(t,(()=>({focus(){var e;null===(e=j.current)||void 0===e||e.focus()},clearSearchText(){N("")}})));const[F,B]=(0,r.useState)(!0),G=(0,C.default)((()=>{var t;const s=M.current;if(!s)return;null===(t=e.onScroll)||void 0===t||t.call(e,s);const{scrollTop:a}=s,i=I.current-a;if(i===o.INPUT_BAR_TOTAL_HEIGHT)return x.current=i,void(I.current=a);const n=Math.abs(i)>o.INPUT_BAR_SCROLL_SENSITIVITY;g.current=Math.abs(i)>o.INPUT_BAR_SCROLL_FAST,i<0?R&&(a>o.INPUT_HIDE_POINT&&n||I.current<o.INPUT_HIDE_POINT&&a>=o.INPUT_HIDE_POINT)&&L(!1):R||(n||a<o.INPUT_SHOW_POINT)&&L(!0),I.current=a,x.current=i,B(a<=0)}),o.SCROLL_THROTTLE_TIME),U=(0,r.useRef)(),V=g.current?"emoji-search-slide-away-fast":"emoji-search-slide-away",H=(0,b.jsx)(E.default,{transitionName:V,children:R&&(0,b.jsx)(p.default,{label:c.default.t(1579),onChange:(t,s)=>{var a;null===(a=e.onChange)||void 0===a||a.call(e,t,s),N(t),""!==t?D(t):D.cancel()},value:A||"",shadow:!F,ref:j,onUpKey:e.onFocusUp,onDownKey:()=>{var e;null===(e=U.current)||void 0===e||e.focus()}})}),W=(0,n.default)(u.default.containerSearch);return(0,b.jsxs)(d.default,{className:W,handlers:(0,l.default)({"shift+tab":e.onFocusPrev,tab:e.onFocusNext}),onClick:e=>{!function(e){if(!e)return;e.preventDefault(),e.stopPropagation()}(e),k()},children:[(0,b.jsx)(h.default,{loading:m}),(0,b.jsxs)("div",{className:u.default.bodyContainer,children:[H,(0,b.jsx)("div",{className:(0,n.default)(u.default.contentContainer,u.default.contentContainerSearch),onScroll:G,ref:M,children:(0,b.jsx)(T,{ref:U,onFocusPrev:k,onStickerClick:t=>{var s;let i;i=A?f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_SEARCH:a===o.StickerTabs.RECENTS?f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS:f.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_EMOTION,e.onSticker(t,{stickerSendOrigin:i}),A&&(null===(s=j.current)||void 0===s||s.focus())},searchText:A.trim(),selectedTab:e.selectedTab,resetScroll:P})})]})]})}));t.default=M},29430:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(51463)),n=s(67294),r=a(s(47193)),o=a(s(39e3)),l=s(15298),d=a(s(63348)),u=a(s(95885)),c=a(s(39406)),h=a(s(76006)),f=s(85893);var p=(0,n.forwardRef)(((e,t)=>{const s=(0,h.default)(e.sticker,["id","mediaData"]),a=(0,n.useRef)(),p=(0,n.useMemo)((()=>(0,i.default)((()=>s.downloadMedia()))),[s]),m=()=>!!a.current&&a.current===document.activeElement,_=()=>{a.current&&(m()||r.default.focus(a.current))},g=()=>a.current?a.current.offsetTop:0;(0,n.useImperativeHandle)(t,(()=>({hasFocus:m,focus:_,getOffsetTop:g})));const[v,{isIntersecting:S}]=(0,c.default)({root:null,rootMargin:"10px",threshold:0});return(0,n.useEffect)((()=>{S&&p()}),[S,p]),(0,f.jsx)(o.default,{onRef:e=>{e&&(a.current=e,v(e))},className:u.default.container,handlers:{enter:t=>{const a=e.onEnter;a&&a((0,l.unproxy)(s),t)}},children:(0,f.jsx)("div",{className:u.default.border,children:S&&(0,f.jsx)(d.default,{mediaData:s.mediaData,onClick:t=>{const a=e.onClick;a&&a((0,l.unproxy)(s),t)},theme:"stickerPanel",loopAnimation:!0,downloadMedia:p})})})}));t.default=p},70183:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(2408)),o=a(s(41341)),l=i(s(39532)),d=i(s(54405)),u=i(s(77256)),c=s(85893);class h extends n.PureComponent{constructor(...e){super(...e),this.state={isCollectionReady:o.default.isSynced()},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){this.state.isCollectionReady||o.default.sync().then((()=>{this.setState({isCollectionReady:!0})}))}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.state.isCollectionReady?0===o.default.length?(0,c.jsx)(l.default,{text:r.default.t(1667)}):(0,c.jsx)(u.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:o.default.toArray()}):(0,c.jsx)(d.default,{quantity:o.RECENT_STICKERS_LIMIT})}}t.default=h,h.displayName="StickerPackStickersRecent"},21809:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(2408)),r=a(s(27686)),o=a(s(39532)),l=a(s(77256)),d=s(61192),u=s(85893);var c=(0,i.forwardRef)(((e,t)=>{const s=(0,i.useRef)(),a=function(e){const[t,s]=(0,i.useState)([]),a=()=>{const t=r.default.toArray();s(t.map((e=>e.sticker))),null==e||e()};return(0,i.useEffect)((()=>{a()}),[]),(0,d.useListener)(r.default,"add remove change sort",a),t}(e.resetScroll);return(0,i.useImperativeHandle)(t,(()=>({focus(e){var t;null===(t=s.current)||void 0===t||t.focus(e)}}))),0===a.length?(0,u.jsx)(o.default,{text:n.default.t(1667)}):(0,u.jsx)(l.default,{ref:s,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:a,theme:"searchable"})}));t.default=c},24129:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(2408)),o=i(s(71681)),l=i(s(4231)),d=a(s(61848)),u=i(s(93881)),c=i(s(18215)),h=s(85893);class f extends n.PureComponent{constructor(e){super(e),this._handleRetryClick=()=>{d.default.fetchAt(this.props.selectedStickerPackIndex,!0)},this._handleStickerPackPageFetchState=(e,t)=>{d.default.pageWithIndex(this.props.selectedStickerPackIndex)===e&&(t?this.forceUpdate():d.default.fetchAt(this.props.selectedStickerPackIndex))},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._renderError=e=>(0,h.jsxs)("div",{className:u.default.container,children:[(0,h.jsx)("div",{children:r.default.t(1158)}),(0,h.jsx)("div",{"data-id":"retry",className:u.default.retryButton,onClick:e,children:r.default.t(1553).toUpperCase()})]}),d.default.fetchAt(this.props.selectedStickerPackIndex)}componentDidMount(){this.props.listeners.add(d.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentDidUpdate(e){const{selectedStickerPackIndex:t}=this.props,{selectedStickerPackIndex:s}=e;if(t===s)return;const a=d.default.pageWithIndex(t);d.default.pageFetchStates[a]===d.PAGE_FETCH_STATE.ERROR&&d.default.fetchAt(t,!0)}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){const e=d.default.at(this.props.selectedStickerPackIndex);if(!e)return null;const t=d.default.pageWithIndex(this.props.selectedStickerPackIndex);if(d.default.pageFetchStates[t]===d.PAGE_FETCH_STATE.ERROR)return this._renderError(this._handleRetryClick);const s={stickerIsFirstParty:e.isFirstParty,stickerSendOrigin:l.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_PACK};return(0,h.jsx)(c.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:e=>this.props.onStickerClick(e,s),onStickerEnter:e=>this.props.onStickerEnter(e,s),stickers:e.stickers,renderError:this._renderError})}}f.displayName="StickerPackStickersScrollGrid";const p=(0,o.default)(f);t.default=class extends p{focus(e){this.getComponent().focus(e)}}},37981:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(98913)),r=s(58568),o=s(67294),l=i(s(2408)),d=i(s(79267)),u=a(s(68477)),c=i(s(92537)),h=i(s(39532)),f=i(s(54405)),p=i(s(77256)),m=s(61192),_=i(s(29579)),g=s(85893);var v=(0,o.forwardRef)(((e,t)=>{const{onScroll:s}=e,[a,i]=(0,o.useState)((()=>u.default.isSynced())),[v,S]=(0,o.useState)((()=>u.default.toArray())),[C,y]=(0,o.useState)(!1),E=(0,_.default)();(0,o.useEffect)((()=>{a||(0,d.default)(u.default.sync(),E).then((()=>i(!0))).catch((0,r.catchAbort)((()=>{})))}),[]),(0,m.useListener)(u.default,"add remove",(()=>S(u.default.toArray()))),(0,m.useListener)(u.default,"sync",(()=>{S(u.default.toArray()),i(!0)})),(0,m.useListener)(u.default,"next_page_sync",(()=>{S(u.default.toArray()),y(!1)}));const b=(0,o.useCallback)((e=>{const{scrollTop:t,clientHeight:a,scrollHeight:i}=e;if(null==s||s(e),i-a-t<200&&!C&&u.default.canLoadMore()){const e=u.default.getRemaining(),t=Math.min(u.STARRED_STICKERS_PAGE_SIZE,e),s=(0,n.default)(t,(()=>c.default.getPlaceholder()));y(!0),S((e=>e.concat(s))),u.default.syncNextPage()}}),[C,s]),T=(0,o.useRef)();return(0,o.useImperativeHandle)(t,(()=>({focus:e=>{var t;return null===(t=T.current)||void 0===t?void 0:t.focus(e)}}))),a?0===u.default.length?(0,g.jsx)(h.default,{text:l.default.t(1668)}):(0,g.jsx)(p.default,{ref:T,onFocusPrev:e.onFocusPrev,onScroll:b,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerEnter,stickers:v}):(0,g.jsx)(f.default,{quantity:u.STARRED_STICKERS_PAGE_SIZE})}));t.default=v},39532:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(49972)),r=a(s(46023)),o=s(85893);var l=({text:e})=>(0,o.jsxs)("div",{className:(0,i.default)(n.default.emptyContainer,n.default.panelHeight),children:[(0,o.jsx)("div",{className:n.default.emptySticker,style:{backgroundImage:`url(${r.default})`}}),(0,o.jsx)("p",{className:n.default.emptyText,children:e})]});t.default=l},54405:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(98913)),n=a(s(92537)),r=a(s(29430)),o=a(s(13822)),l=s(85893);var d=({quantity:e})=>{const t=n.default.getPlaceholder();return(0,l.jsx)("div",{className:o.default.container,children:(0,i.default)(e,(e=>(0,l.jsx)(r.default,{sticker:t},e)))})};t.default=d},17400:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelNoResults=p,t.default=void 0;var i=s(67294),n=s(15140),r=a(s(2408)),o=a(s(46023)),l=a(s(6009)),d=a(s(70193)),u=a(s(77256)),c=a(s(38853)),h=s(61192),f=s(85893);function p(){return(0,f.jsxs)("div",{className:d.default.emptyContainer,children:[(0,f.jsx)("div",{className:d.default.emptySticker,style:{backgroundImage:`url(${o.default})`}}),(0,f.jsx)("p",{className:d.default.emptyText,children:r.default.t(1385)})]})}var m=(0,i.forwardRef)(((e,t)=>{const{selectedTab:s}=e,[a,r]=(0,i.useState)((()=>l.default.toArray())),o=()=>{r(l.default.toArray()),e.resetScroll()},d=(0,c.default)(o,250);(0,h.useListener)(l.default,"add remove reset",d),(0,i.useEffect)((()=>{if(s){const e=(0,n.convertTabToMood)(s);null!=e&&l.default.searchMood(e),l.default.hasFetchedData()&&o()}}),[s]);const m=(0,i.useRef)();return(0,i.useImperativeHandle)(t,(()=>({focus(e){const t=m.current;t&&t.focus(e)}}))),e.searchText&&!1===l.default.isFetchingData()&&0===l.default.length?(0,f.jsx)(p,{}):(0,f.jsx)(u.default,{ref:m,onFocusPrev:e.onFocusPrev,onScroll:e.onScroll,onStickerClick:e.onStickerClick,onStickerEnter:e.onStickerClick,stickers:a,theme:"searchable"})}));t.default=m},18215:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(71681)),r=s(16482),o=a(s(54405)),l=a(s(77256)),d=s(85893);class u extends i.PureComponent{constructor(e){super(e),this._handleFetchState=()=>{this.forceUpdate()},this._handleRetryClick=()=>{this.props.stickers.fetch(!0)},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._fetchStickers(this.props.stickers)}componentDidUpdate(e){const t=e.stickers,s=this.props.stickers;this._handleStickersChange(t,s)}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}_fetchStickers(e,t){this.props.listeners.add(e,"change:fetchState",this._handleFetchState),e.fetch(t)}_handleStickersChange(e,t){if(e===t)return;e&&this.props.listeners.remove(e,"change:fetchState",this._handleFetchState);const s=t.fetchState===r.FETCH_STATE.ERROR;this._fetchStickers(t,s),this._refScrollGrid&&this._refScrollGrid.scrollToTop()}render(){const{stickers:e}=this.props;return e.fetchState===r.FETCH_STATE.ERROR?this.props.renderError(this._handleRetryClick):e.fetchState&&e.fetchState!==r.FETCH_STATE.PENDING?(0,d.jsx)(l.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:this.props.stickers.toArray()}):(0,d.jsx)(o.default,{quantity:24})}}u.displayName="StickersScrollGrid";const c=(0,n.default)(u);t.default=class extends c{focus(e){this.getComponent().focus(e)}}},77256:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(34295)),o=a(s(39e3)),l=a(s(29430)),d=s(86668),u=a(s(13822)),c=a(s(79939)),h=s(85893);var f=(0,n.forwardRef)(((e,t)=>{const s=(0,n.useRef)(),a=(0,c.default)((()=>new Map));(0,n.useImperativeHandle)(t,(()=>({focus(e){const t=a.current;let s=e||0;s=Math.min(s,t.size),s=Math.max(s,0);const i=t.get(s);i&&i.focus()},scrollToTop(){const e=s.current;e&&(e.scrollTop=0)}})));const f=()=>{const e=a.current,t=e.size;for(let s=0;s<t;s++){const t=e.get(s);if(t&&t.hasFocus())return s}return-1},p=()=>{const e=a.current,t=e.get(0);if(!t)return 0;const s=t.getOffsetTop(),i=e.size;for(let t=0;t<i;t++){const a=e.get(t);if(a&&a.getOffsetTop()!==s)return t}return e.size},m=t=>{var i;if(0===t)return;const n=f();if(-1===n)return;let r=n+t;var o;if(r<0)return void(null===(o=e.onFocusPrev)||void 0===o||o.call(e));const l=null===(i=s.current)||void 0===i?void 0:i.parentElement;r<p()&&l&&(l.scrollTop=0);const d=a.current;r=Math.min(r,d.size-1);const u=d.get(r);u&&u.focus()},_=e=>{m(0-e)},g=e.stickers.map(((t,s)=>{const i=a.current,n=t.isPlaceholder?`${d.PRE_PLACEHOLDER_ID}${s}`:t.id;return(0,h.jsx)(r.default,{reason:"sticker-item",children:(0,h.jsx)(l.default,{onClick:e.onStickerClick,onEnter:e.onStickerEnter,ref:e=>{e?i.set(s,e):i.delete(s)},sticker:t})},n)})),v=(0,i.default)(u.default.container,"searchable"===e.theme&&u.default.unscrollable);return(0,h.jsx)(o.default,{onRef:e=>{s.current=e},className:v,handlers:{up:e=>{e.stopPropagation(),e.preventDefault(),_(p())},down:e=>{e.stopPropagation(),e.preventDefault();const t=f(),s=p(),i=a.current,n=Math.min(t+s,i.size-1);Math.floor(t/s)!==Math.floor(n/s)&&m(s)},left:e=>{e.stopPropagation(),e.preventDefault(),_(1)},right:e=>{e.stopPropagation(),e.preventDefault(),m(1)}},onScroll:()=>{const t=s.current;var a;t&&(null===(a=e.onScroll)||void 0===a||a.call(e,t))},children:g})}));t.default=f},82840:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=i(s(27549)),l=i(s(28416)),d=i(s(47193)),u=i(s(39e3)),c=i(s(40194)),h=i(s(71681)),f=a(s(61848)),p=i(s(84033)),m=i(s(2966)),_=s(85893);class g extends r.PureComponent{constructor(...e){super(...e),this.state={numItems:this.props.specialItemsCount+f.default.length},this._handleLengthChange=()=>{this.setState({numItems:this.props.specialItemsCount+f.default.length})},this._setRefContainer=e=>{this._refContainer=e},this._renderItem=e=>this.props.recentStickersEnabled&&0===e?(0,_.jsx)(m.default,{name:"panel-recent"}):this.props.starredStickersEnabled&&1===e?(0,_.jsx)(m.default,{name:"panel-starred"}):(0,_.jsx)(p.default,{index:e-this.props.specialItemsCount})}componentDidMount(){this.props.listeners.add(f.default,"change:length",this._handleLengthChange),this._handleLengthChange()}focus(){this._refContainer&&(this.hasFocus()||d.default.focus(this._refContainer))}hasFocus(){return!!this._refContainer&&this._refContainer===document.activeElement}render(){const{numItems:e}=this.state,{displayLocation:t}=this.props;let s=f.PAGE_SIZE_COMPOSE_BOX;return"DROPDOWN"===t&&(s=f.PAGE_SIZE_POPUP),(0,_.jsx)(u.default,{onRef:this._setRefContainer,handlers:(0,l.default)({down:this.props.onFocusBelow,"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext}),children:(0,_.jsx)(o.default,{className:(0,n.default)({[c.default.shadow]:this.props.shadow}),numItems:e,numColumns:s,onItemClick:this.props.onItemClick,renderItem:this._renderItem,selectedIndex:this.props.selectedStickerPackIndex})})}}g.displayName="StickerPanelMenu";const v=(0,h.default)(g);t.default=class extends v{focus(){this.getComponent().focus()}}},95432:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({id:e,name:t,url:s}){return(0,r.jsx)("div",{className:n.default.container,"data-id":e,children:(0,r.jsx)(i.default,{fallbackSVG:"sticker",wrapOptions:{wrapperClassName:n.default.stickerPackIconWrapper,centerWrapperChild:!0},className:n.default.stickerPackContainer,size:"NONE",roundContainer:!1,imgProps:{src:s||"",alt:t,draggable:!1}})})};var i=a(s(47357)),n=a(s(43177)),r=s(85893)},84033:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(71681)),r=a(s(61848)),o=a(s(61033)),l=a(s(59663)),d=a(s(2966)),u=s(85893);class c extends i.PureComponent{constructor(e){super(e),this._handleStickerPackPageFetchState=(e,t)=>{if(this._unmounted)return;const{index:s}=this.props;r.default.pageWithIndex(s)===e&&(t||r.default.fetchAt(s),this.setState({stickerPack:r.default.at(s)}))},r.default.fetchAt(e.index),this.state={stickerPack:r.default.at(e.index)},this._unmounted=!1}componentDidMount(){this.props.listeners.add(r.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentWillUnmount(){this._unmounted=!0}render(){const{stickerPack:e}=this.state;return e?e.isPlaceholder?(0,u.jsx)(d.default,{name:"sticker"}):e.isFirstParty?(0,u.jsx)(o.default,{stickerPack:e}):(0,u.jsx)(l.default,{stickerPack:e,mediaData:e.mediaData}):null}}c.displayName="StickerPackIconAtIndex";var h=(0,n.default)(c);t.default=h},61033:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(e.stickerPack,["id","name","url"]),{id:s,name:a,url:o}=t;return(0,r.jsx)(i.default,{id:s,name:a,url:o})};var i=a(s(95432)),n=a(s(76006)),r=s(85893)},59663:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.default)(e.stickerPack,["id","name"]),s=(0,o.default)(e.mediaData,["renderableUrl","mediaStage"]),a=()=>t.downloadMedia();(0,i.useEffect)((()=>{a()}),[]);const d=e=>{const{id:s,name:a}=t;return(0,l.jsx)(r.default,{id:s,name:a,url:e})};return(0,l.jsx)(n.default,{mediaData:s,placeholderRenderer:function(){return d(null)},downloadMedia:a,children:d})};var i=s(67294),n=a(s(80747)),r=a(s(95432)),o=a(s(76006)),l=s(85893)},31719:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseInput=void 0;var n=i(s(81109)),r=i(s(94184)),o=a(s(40052)),l=i(s(7900)),d=s(67294),u=i(s(76610)),c=i(s(44991)),h=i(s(55454)),f=i(s(6240)),p=i(s(94485)),m=i(s(93187)),_=i(s(33200)),g=i(s(9355)),v=i(s(84286)),S=i(s(47193)),C=i(s(12950)),y=i(s(56069)),E=i(s(39e3)),b=i(s(2408)),T=s(61214),M=i(s(42532)),x=s(20845),I=i(s(40456)),P=i(s(13091)),A=i(s(21530)),N=s(49002),O=s(85893);class w extends d.Component{constructor(...e){super(...e),this.__changeDueToReset=!1,this.__isMounted=!0,this.__isComposing=!1,this.containerRef=null,this.selection=this.props.initialSelection,this.state={direction:j(this.props.initialValue||""),focused:!1,value:this.props.initialValue||""},this.trigger=(e,t=[])=>{const s=this._hookMap[e];s&&s(...t)},this.serializeTextBeforeCursor=()=>(0,P.default)(this.refInput||document.createElement("span"),window.getSelection()),this._hasFocus=(e=this.refInput)=>{if(!e)return!1;const{activeElement:t}=document;return!!t&&(t===e||e.contains(t))},this.forceFocus=(e=!1)=>{if(this.props.readOnly||!this.__isMounted)return;const{refInput:t}=this;if(!t)return;const s=this._hasFocus(t);if(!s||e)if(s||S.default.focus(t),!e&&this.selection)this._restoreSelection(this.selection);else{const e=window.getSelection();e&&e.rangeCount&&(e.selectAllChildren(t),e.collapseToEnd())}},this.focus=(e=!1)=>{this._hasFocus()&&!e||setTimeout((()=>{this.forceFocus(e)}),0)},this.reset=(e="")=>{this.__changeDueToReset=!0,this.selection=null,this._setValue(e)},this._setValue=e=>{if(e===this.state.value)return;const t=e||"";this.setState({value:t,direction:j(t)},(()=>{this.trigger(y.default.CHANGE,[t]),this.props.onChange&&this.props.onChange(t)}))},this.onSelect=()=>{this.selection=this.getSelection(),this.props.onSelect&&this.props.onSelect(this.selection)},this.shouldComponentUpdate=(e,{value:t,focused:s,direction:a})=>{null!=this.refInput&&this.props.readOnly!==e.readOnly&&this.refInput.setAttribute("contentEditable",String(!e.readOnly));const i=R(e);null!=this.refInput&&i!==R(this.props)&&(null==i?this.refInput.removeAttribute("data-tab"):this.refInput.setAttribute("data-tab",i.toString()));s!==this.state.focused&&this.containerRef&&(s?this.containerRef.classList.add("focused"):this.containerRef.classList.remove("focused"));if(a!==this.state.direction&&this.refInput&&this.refInput.setAttribute("dir",a),this.__changeDueToReset){this.__changeDueToReset=!1;const e=(0,A.default)(t,this._plugins);this.refInput&&(this.refInput.innerHTML=e)}const n=!t.length&&!!this.state.value.length,r=!!t.length&&!this.state.value.length;if(!r&&!n)return!1;const o=r?"hidden":"visible";return this._refPlaceholder&&this._refPlaceholder.setAttribute("style",`visibility: ${o}`),!1},this.componentWillUnmount=()=>{this.__isMounted=!1,this.refInput&&(this.refInput.restoreFocus=null)},this.onInput=()=>{const{refInput:e}=this,t=e?(0,I.default)(e,this._plugins):"",s=this.props.multiline&&"\n"!==t?t:t.replace(/\n$/,""),{maxLength:a}=this.props;if(null!=a&&(0,N.numCodepoints)(s)>a){const t=this.selection;return e&&(e.innerHTML=(0,A.default)(this.state.value,this._plugins)),void(t&&this._restoreSelection(t))}this.trigger(y.default.INPUT),this._setValue(s)},this.onPaste=e=>{e.preventDefault(),e.stopPropagation();const t=new v.default(e.clipboardData),{onFiles:s,onTextPaste:a}=this.props;t.hasFiles()&&s&&s(t)||t.hasText()&&t.getText(this.props.textPasteMimePriority).then((e=>{if(!e)return;if(a&&a(e))return;const t=this.length-this._selectionLength,{maxLength:s}=this.props;if(null!=s&&t+(0,N.numCodepoints)(e)>s){const{onMaxPasteExceeded:e}=this.props;return e&&e()}this.replaceSelection(e)}))},this._onBeforeInput=e=>{if(this.props.readOnly)return!0;const{maxLength:t}=this.props;if(null==t)return!1;const s=e.data.charCodeAt(0);if(8===s||127===s)return!1;const a=t+this._selectionLength-this.length;return(0,N.numCodepoints)(e.data)>a},this.onKeyDown=e=>!(!this.props.onKeyDown||!this.props.onKeyDown(e))||13===e.which&&(this.props.multiline&&function(e){return 13===e.which&&(e.shiftKey||e.altKey||e.ctrlKey)}(e)?!(""!==this.state.value.trim()||!this.cursorIsAtStart())||(C.default.supportsFeature(C.default.F.FORMAT_BULLETED_MSG)&&this._cursorIsOnListItem()?(this._insertNewLineAtSelection(T.LIST_ITEM_DELIMITER),!0):(this._insertNewLineAtSelection(),!0)):(this.props.onEnter&&this.props.onEnter(e),!0)),this.componentDidMount=()=>{this.refInput&&(this.refInput.restoreFocus=this.focus),this.trigger(y.default.MOUNT)},this.onBlur=e=>{this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this._onCompositionStart=()=>!(this.__isComposing=!0),this._onCompositionEnd=()=>this.__isComposing=!1,this.setRefContainer=e=>{this.containerRef=e},this._setRefPlaceholder=e=>{this._refPlaceholder=e},this.setRefInput=e=>{this.refInput=e},this.getRefInput=()=>this.refInput}get value(){return this.state.value}get _selectionLength(){if(this.props.readOnly)return 0;this._hasFocus(this.refInput)||S.default.focus(this.refInput);const e=window.getSelection();return e.rangeCount?(0,N.numCodepoints)((0,I.default)(e.getRangeAt(0).cloneContents(),this._plugins)):0}get length(){return(0,N.numCodepoints)(this.state.value)}serialize(e){const t=e||this.state.value;return this._plugins.reduce((([e,t],s)=>s.serialize?s.serialize(e,t):[e,t]),[t,{}])}_adjustScrollAfterModification(e,t,s){const{scrollHeight:a,clientHeight:i}=e;a<=i||(e.scrollTop=(s||0)+(a-t))}_ensureFocus(e){this._hasFocus(e)||(S.default.focus(e),this.selection&&this._restoreSelection(this.selection))}replaceSelection(e,t=!1){const{refInput:s}=this;if(this.props.readOnly||null==s)return;this._ensureFocus(s);let a=this._trimToFit(e);if(!a.length&&!t)return;this.props.multiline||(a=a.replace(/\r?\n/g,""));const i=window.getSelection().getRangeAt(0);(function({startOffset:e,startContainer:t},s){return 0===e&&t!==s&&(!(!t||!t.previousSibling)&&"\n"===t.previousSibling.textContent.slice(-1))})(i,s)&&(a=`\n${a}`),i.deleteContents();const{scrollHeight:n,scrollTop:r}=s;document.execCommand("insertHTML",!1,(0,A.default)(a,this._plugins)),this.onSelect(),this._adjustScrollAfterModification(s,n,r)}_insertNewLineAtSelection(e=""){this.props.multiline&&this._insertTextAtSelection("\n"+e)}_insertTextAtSelection(e){const{refInput:t}=this;if(!this.props.multiline||this.props.readOnly||null==t)return;this._ensureFocus(t);const{scrollHeight:s,scrollTop:a}=t,i=this.cursorIsAtEnd(),n=document.createTextNode(e),r=window.getSelection(),o=r.getRangeAt(0);o.deleteContents(),o.insertNode(n);if(/^\n/.test(e)&&s===t.scrollHeight&&i){o.setStartBefore(n);const e=document.createTextNode("\n");o.insertNode(e)}o.setStartAfter(n),o.setEndAfter(n),o.collapse(!1),r.removeAllRanges(),r.addRange(o),t.normalize(),this._adjustScrollAfterModification(t,s,a),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}deleteSelection(){this.replaceSelection("",!0)}_restoreSelection(e){const{refInput:t}=this;if(!t)return;const{anchorIndex:s,focusIndex:a}=e;let{anchorOffset:i,focusOffset:n}=e;const{childNodes:r}=t,o=-1===s?t:r[s],l=-1===a?t:r[a];if(o&&l)try{o===l&&i>n&&([i,n]=[n,i]);const e=document.createRange();e.setStart(o,i),e.setEnd(l,n);const t=window.getSelection();t.removeAllRanges(),t.addRange(e);try{const e=document.createRange();e.setStart(l,n),e.setEnd(l,n);const t=e.getBoundingClientRect(),{bottom:s,top:a}=t,i=this.refInput&&this.refInput.getBoundingClientRect(),{bottom:r,top:o}=i||{};if(a>=o&&s<=r)return;this.refInput&&(this.refInput.scrollTop+=s<o?a-o:s-r)}catch(e){}}catch(e){this.focus(!0)}}getSelection(){const{refInput:e}=this;if(!e||document.activeElement!==e)return null;const t=window.getSelection(),{anchorNode:s,anchorOffset:a,focusNode:i,focusOffset:n}=t,r=e.childNodes;let o,l=-1,d=-1,u=0;for(;(l<0||d<0)&&(o=r[u++]);)s===o&&(l=u-1),i===o&&(d=u-1);return{anchorIndex:l,anchorOffset:a,focusIndex:d,focusOffset:n}}_trimToFit(e){const{maxLength:t}=this.props;if(null==t)return e;const s=t+this._selectionLength-this.length;return s<=0?"":(0,N.substring)(String(e),0,s)}_cursorIsOnListItem(){return C.default.supportsFeature(C.default.F.FORMAT_BULLETED_MSG)&&T.LAST_LIST_ITEM_REGEX.test(this.serializeTextBeforeCursor())}cursorIsAtEnd(){return null!=this.refInput&&(!(!this.state.focused||""!==this.state.value)||(0,_.default)(this.refInput))}cursorIsAtStart(){return!(!this.state.focused||""!==this.state.value)||(0,g.default)(this.refInput)}isFocused(){return this.state.focused}get isComposing(){return this.__isComposing}blur(){(0,l.default)(this.refInput,"this.refInput").blur()}select(){const e=(0,l.default)(this.refInput,"this.refInput"),t=document.createRange();t.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(t)}render(){var e;const{props:{placeholder:t},state:{value:s,direction:a}}=this,i=s.length>0?"hidden":"visible",o=(0,r.default)(M.default.input,{[M.default.compose]:"compose"===this.props.theme,[M.default.default]:"default"===this.props.theme||"media-caption"===this.props.theme||"text-input"===this.props.theme,[M.default.large]:"large"===this.props.theme,[M.default.media]:"media-caption"===this.props.theme,[M.default.invite]:"v4-invite-caption"===this.props.theme,[M.default.small]:"small"===this.props.theme,[M.default.status]:"status-reply"===this.props.theme,[M.default["list-search"]]:"list-search"===this.props.theme,[M.default.textInput]:"text-input"===this.props.theme,[M.default.mediaEditorTextInput]:"media-editor-text-input"===this.props.theme}),l=null!==(e=this.props.a8n)&&void 0!==e?e:"pluggable-input-body";return(0,O.jsxs)(E.default,{className:o,handlers:this._hotKeyMap,onRef:this.setRefContainer,children:[(0,O.jsx)("div",{"data-a8n":u.default.key("pluggable-input-placeholder"),className:(0,r.default)(M.default.placeholder,{[M.default.mediaEditorTextInputPlaceholder]:"media-editor-text-input"===this.props.theme}),ref:this._setRefPlaceholder,style:{visibility:i},children:t}),(0,O.jsx)("div",(0,n.default)((0,n.default)({},this._handlerMap),{},{"data-a8n":u.default.key(l),title:this.props.title,"aria-required":this.props.required,role:"textbox",className:(0,r.default)(M.default.body,x.SELECTABLE_INPUT_CSS_CLASS),contentEditable:!this.props.readOnly,dangerouslySetInnerHTML:{__html:(0,A.default)(s,this._plugins)},"data-tab":R(this.props),dir:a,ref:this.setRefInput,spellCheck:this.props.spellCheck,style:this.props.style}))]})}}t.BaseInput=w,w.displayName="BaseInput";t.default=e=>class extends w{constructor(...t){var s,a,i;super(...t),this._plugins=[...e.map((e=>(e instanceof c.default&&e.initialize(this),e))),(i=this,{handlers:(s=i,a=D,a.reduce(((e,t)=>(Array.isArray(t)?e[t[0]]=s[t[1]]:e[t]=s[t],e)),{}))})],this._handlerMap=(0,f.default)(this._plugins,this),this._hookMap=(0,p.default)(this._plugins,this),this._hotKeyMap=(0,m.default)(this._plugins,this)}};const D=["onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onFocus","onInput","onKeyDown","onPaste","onSelect"];function j(e){return o.dir(e)||b.default.LR("ltr","rtl")}function R({tabOrder:e,readOnly:t}){return null!=e?e:t?null:h.default.TAB_ORDERS.COMPOSE_BOX_INPUT}},22252:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=a(s(94184)),n=s(67294),r=a(s(91952)),o=a(s(98741)),l=a(s(41757)),d=a(s(17017)),u=a(s(71587)),c=a(s(56847)),h=a(s(4158)),f=a(s(30462)),p=a(s(63477)),m=a(s(80870)),_=a(s(82669)),g=s(85893);const v=(0,h.default)({MEDIA_CAPTION:null,EMOJI_INPUT:null});t.ThemeOptions=v;var S=e=>{const[t,s]=(0,n.useState)(""),[a,h]=(0,n.useState)(""),[S,C]=(0,n.useState)(null),y=(0,n.useRef)(),E=()=>{s(""),h(""),C(null)},b=e=>{if((0,c.default)(e))return;const t=y.current;return t?(e.preventDefault(),e.stopPropagation(),t.pickSelectedEmoji(),!1):void 0};(0,m.default)(e.plugin,u.default.EMOJI_SEARCH,(t=>{const i=t?t.trim():t,n=a,r=e.chat;if(r&&r.isGroup&&i&&i.includes("@"))return C(null),void s("");if(!n||!i.startsWith(n))if(i.length<2){if(!S)return;s(i),C(""===i?null:(0,o.default)(i))}else{const e=(0,o.default)(i);e.length?(s(i),h(null),C(e)):(s(i),C(null))}})),(0,m.default)(e.plugin,u.default.EMOJI_INACTIVE,E),(0,m.default)(e.plugin,u.default.EMOJI_ENTER,b),(0,m.default)(e.plugin,u.default.EMOJI_LEFT,(e=>{if((0,c.default)(e))return;const t=y.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionLeft())})),(0,m.default)(e.plugin,u.default.EMOJI_RIGHT,(e=>{if((0,c.default)(e))return;const t=y.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionRight())})),(0,m.default)(e.plugin,u.default.EMOJI_TAB,b);const T=S?(0,g.jsx)(p.default,{displayName:"EmojiSuggestions",escapable:!0,requestDismiss:()=>{s(""),h(t),C(null)},requestFocus:()=>{e.plugin.ctx.focus()},children:(0,g.jsx)("div",{className:(0,i.default)(l.default.overlayContainer,{[l.default.mediaCaption]:e.theme===v.MEDIA_CAPTION,[l.default.emojiInput]:e.theme===v.EMOJI_INPUT}),children:(0,g.jsx)("div",{className:l.default.resultsContainer,"data-list-scroll-container":"false",children:(0,g.jsx)("div",{className:l.default.emojiSearch,onKeyPress:t=>{t.preventDefault();const{chat:s}=e;s&&r.default.pasteChatTextInput(s,String.fromCharCode(t.charCode))},onKeyDown:t=>("Backspace"===t.key&&(t.preventDefault(),document.execCommand("delete"),e.plugin.ctx.focus()),!1),children:(0,g.jsx)("div",{className:l.default.searchBody,children:(0,g.jsx)(d.default,{ref:y,onEmoji:t=>{f.default.increment(t),e.plugin.handleSelect(t)},onFocusRelease:E,onSkinTonePicker:e.onSkinTonePicker,emojiList:S},t)},"RECENT")})})})}):null;return(0,g.jsx)(_.default,{component:"div",className:l.default.positioningContainer,transitionName:"emoji-search-panel-slide-up",children:T})};t.default=S},71587:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,a(s(4158)).default)({EMOJI_ENTER:void 0,EMOJI_INACTIVE:void 0,EMOJI_LEFT:void 0,EMOJI_RIGHT:void 0,EMOJI_SEARCH:void 0,EMOJI_TAB:void 0});t.default=i},68635:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(44991)),n=a(s(2561)),r=a(s(71587)),o=a(s(56069)),l=a(s(15872)),d=a(s(93154));const u={ArrowLeft:r.default.EMOJI_LEFT,ArrowRight:r.default.EMOJI_RIGHT,Enter:r.default.EMOJI_ENTER,Tab:r.default.EMOJI_TAB};class c extends i.default{constructor(...e){super(...e),this.hooks={[o.default.CHANGE](e,{refInput:t}){""===t.textContent&&this.handle(r.default.EMOJI_INACTIVE)}},this.handlers={onKeyDown(e,t){8!==e.keyCode&&e.repeat&&(this._lastSyncKeyDownWasRepeat=!0,setTimeout((()=>{delete this._lastSyncKeyDownWasRepeat}),0));const s=u[e.key];return!!s&&this.handle(s,[e,t])},onSelect(e,t){if(this.ctx.isComposing)return!1;if(this._lastSyncKeyDownWasRepeat)return!1;const s=window.getSelection();if(!s.modify)return!1;let a=h(t,s);return a?(a=a.slice(1),this.handle(r.default.EMOJI_SEARCH,[a]),!1):this.handle(r.default.EMOJI_INACTIVE)}}}handleSelect(e){this.ctx.forceFocus(),h(this.ctx,window.getSelection(),!0)&&(this.ctx.replaceSelection(e),this.handle(r.default.EMOJI_INACTIVE))}}function h(e,t,s=!1){let a=null,i=null,r="",o=0,u=null;return(0,l.default)(e,t,((e,t,s)=>{if("@"===e||" "===e&&" "===i)return!0;if(":"===i)if(" "===a);else{if(n.default.isEmoji(e))return u=r,!0;if(/\W/.test(e))return u=s.slice(t+1)+r,!0}return 0===t&&(r=s+r),a=i,i=e,o+=1,o>=50||void 0})),!u&&o<50&&":"===i&&(u=r),s&&u&&u.length&&(0,d.default)(t,u.length),u}t.default=c},28856:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isEmojiEl=function(e){return!!e&&(e instanceof HTMLElement&&!!e.dataset.isEmoji)},t.default=void 0;var i=a(s(94184)),n=s(8139),r=a(s(91952)),o=a(s(55454)),l=a(s(2561)),d=a(s(56069)),u=s(20845);let c=!1;var h={serializers:[["img.emoji",e=>e.getAttribute("alt")||""]],parsers:[e=>e.replace(l.default.emojiRegex(),((e,t)=>{const s=(e=>{const t=l.default.getGlyphId(e);if(null==t)return null;const s=(0,u.createSelectableElement)("img",e);s.setAttribute("alt",e),s.setAttribute("draggable","false"),s.setAttribute("class",(0,i.default)(s.getAttribute("class"),l.default.getCssClasses(t)));const a=l.default.getStyle(t);return Object.assign(s.style,a),s.setAttribute("src",o.default.ONE_BY_ONE_TRANS_GIF),s.dataset.isEmoji="true",s})(t);return s?s.outerHTML:""}))],hooks:{[d.default.MOUNT](){c||(c=!0,new Promise((e=>{0===r.default.uiBusy&&e(),r.default.once("ui_idle",(()=>{e()}))})).then((()=>(0,n.delayMs)(0))).then((()=>{document.execCommand("enableObjectResizing",!1,!1)})).catch((()=>{})))}},handlers:{onBeforeInput(e,t){const s=l.default.emojiRegex().exec(e.data);return!!s&&(e.cancelable&&t.replaceSelection(s[0]),!0)},onClick(e){if(!e.target)return!1;const t=e.target.getAttribute("class");if(!t||!~t.indexOf("emoji"))return!1;const s=window.getSelection(),a=new Range;return e.pageX<e.target.x+e.target.width/2?(a.setStartBefore(e.target),a.setEndBefore(e.target)):(a.setStartAfter(e.target),a.setEndAfter(e.target)),s.removeAllRanges(),s.addRange(a),!0}}};t.default=h},89914:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,a(s(4158)).default)({SEARCH:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0});t.default=i},99818:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(40052),r=i(s(44991)),o=i(s(3336)),l=i(s(84758)),d=i(s(55454)),u=i(s(17025)),c=i(s(2561)),h=i(s(89914)),f=a(s(79923)),p=i(s(62533)),m=i(s(12950)),_=i(s(56069)),g=i(s(50470)),v=i(s(30672)),S=i(s(37625)),C=i(s(56849)),y=i(s(38753)),E=i(s(50204)),b=i(s(53377)),T=i(s(63794)),M=i(s(65691)),x=i(s(15872)),I=i(s(93154)),P=s(20845),A=i(s(35371)),N=s(89573);const O=2*d.default.MAX_PUSHNAME_LENGTH,w=/\u200B((\d+)@c\.us)\u200B/g,D={Enter:h.default.ENTER,Tab:h.default.TAB,ArrowUp:h.default.UP,ArrowDown:h.default.DOWN};class j extends r.default{constructor(...e){super(...e),this.serializers=[["span[data-mention-jid]",e=>(function(e){if(!e.hasChildNodes())return;for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),`${e.getAttribute("data-mention-jid")||""}`)]],this.parsers=[e=>e.replace(w,((e,t)=>{const s=u.default.get(t);if(!s)return t;let a=!s.isMyContact&&s.notifyName?s.notifyName:s.formattedName;const i=`@${a}`,r=l.default.toArray().find((e=>e.active));if(null==r||!r.isGroup)return i;if(!(null!=r.groupMetadata&&r.groupMetadata.participants.get(t)))return i;m.default.isDropLastNameEnabled()&&r.groupMetadata&&r.groupMetadata.hasUniqueShortNameMention(s)&&(a=s.shortName);const o=(0,P.createSelectableElement)("span");o.dataset.mentionJid=s.id.toString();const d=document.createElement("span");d.className="at-symbol",d.appendChild(document.createTextNode("@"));const c=document.createElement("span");return c.setAttribute("dir",(0,n.dir)(a)||"auto"),c.appendChild(document.createTextNode(a)),o.appendChild(d),o.appendChild(c),o.dataset.originalName=o.textContent||"",o.dataset.plainText=o.textContent||"",o.dataset.appTextTemplate=`${t}`,o.outerHTML}))],this.serialize=(e,t)=>{t.mentionedJidList=[];return[e.replace(w,((e,s,a)=>(t.mentionedJidList.push((0,N.createWid)(s)),`@${a}`))),t]},this.handleSelect=e=>{let t=window.getSelection();if(function(e,t){let{anchorNode:s,anchorOffset:a}=t;s&&s===e.containerRef&&(s=s.childNodes[a],a=s.textContent.length);if(!s||s&&s.nodeType!==Node.TEXT_NODE)return!1;let i=s.textContent.slice(a),n=s;for(;0===i.length;){if(n=n.nextSibling,!n||n.nodeType!==Node.TEXT_NODE)return!1;i=n.textContent}return" "===i.charAt(0)}(this.ctx,t)&&t.modify("move","forward","character"),!G(this.ctx,t,!0))return;t=window.getSelection();const{refInput:s}=this.ctx,{mentionAfterEnd:a}=s?R(s):{};a&&B(a),this.ctx.replaceSelection(`${e.id.toString()} `),this.handle(h.default.INACTIVE)},this.hooks={[_.default.CHANGE](e,{refInput:t}){if(A.default.isGecko)if(""===e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createElement("br"))}else{const e=t.querySelectorAll("[data-mention-jid]");for(let t=0;t<e.length;++t){const{nextSibling:s}=e[t];s&&(s instanceof Element&&"BR"===s.tagName&&"_moz"===s.getAttribute("type")&&s.remove())}}},[_.default.INPUT]({refInput:e}){const t=e.querySelectorAll("[data-mention-jid]");if(t.length)for(let e=0;e<t.length;++e){const s=t[e];if(null==s||s.textContent===s.getAttribute("data-original-name"))continue;const a=s.querySelector(".at-symbol"),i=s.querySelector("span [dir]"),n=window.getSelection();let r=n.focusOffset;const o=n.focusNode&&n.focusNode.parentNode&&n.focusNode.parentNode.className,l=s.parentNode,d=document.createDocumentFragment();a&&d.appendChild(document.createTextNode(a.textContent)),i&&d.appendChild(document.createTextNode(i.textContent));const u="at-symbol"===o?d.firstChild:d.lastChild;if(1===d.childNodes.length&&d.lastChild&&(r="@"===d.lastChild.textContent?1:0),l.replaceChild(d,s),n.rangeCount<=0)return;const c=n.getRangeAt(0);c.setEnd(u,r),c.collapse(!1),n.removeAllRanges(),n.addRange(c)}}},this.handlers={onKeyDown(e,t){const{key:s}=e;if(!this.ctx.isComposing&&("Backspace"===s||"Delete"===s&&(0,C.default)(e))){const e=window.getSelection();if(e.isCollapsed){const{mentionBeforeStart:t,mentionAfterEnd:a}=R(this.ctx.refInput);let i=null;if("Delete"===s&&a&&(i=a),"Backspace"===s&&t&&(i=t),i){e.removeAllRanges();const t=document.createRange();t.selectNode(i),e.addRange(t),L(this.ctx.refInput),window.setTimeout((()=>{(0,M.default)()}),0)}}else L(this.ctx.refInput)}const a=D[e.key];return!!a&&this.handle(a,[e,t])},onKeyPress(){return this.ctx.isComposing||L(this.ctx.refInput),!1},onBlur(){return this.handle(h.default.INACTIVE),!1},onSelect(e,t){if(A.default.isTrident||this.ctx.isComposing)return!1;const s=window.getSelection();s.isCollapsed&&s.rangeCount>0&&s.anchorNode&&function(e,t){let{anchorNode:s,anchorOffset:a}=t;if(s&&s===e.refInput){if(0===a)return!0;s=s.childNodes[t.getRangeAt(0).startOffset],a=(0,b.default)(s)?s.textContent.length:0}if((0,S.default)(s,"br"))return!0;if(!s)return!1;if(!(0,b.default)(s))return!1;if("\n"===s.textContent)return!0;let i=s.textContent.slice(0,a);if(""===i){const e=(0,f.default)(s,f.DIR.PREV);if(!e)return!0;if(!(0,b.default)(e))return!1;i=e.textContent}return"\n"===i.charAt(i.length-1)}(t,s)&&(0,M.default)();const a=G(this.ctx,s);if(!a||s.focusNode&&s.focusNode.parentElement&&(0,y.default)(s.focusNode.parentElement.parentElement))return this.handle(h.default.INACTIVE),!1;const i=a.slice(1);return this.handle(h.default.SEARCH,[i]),!1},onPaste(){return L(this.ctx.refInput),!1}}}}function R(e){const t=window.getSelection();if(0===t.rangeCount)return{};const s=t.getRangeAt(0),{startContainer:a,startOffset:i,endContainer:n,endOffset:r}=s,l=n instanceof HTMLElement?n.childNodes.length===r:n.textContent&&n.textContent.length===r;let d,u,c,h,p,m;0===i&&(d=a===e?e.childNodes[i]:(0,o.default)(a,(t=>t&&t!==e&&(t.parentElement===e||(0,E.default)(t,0))?[t.parentElement]:[]),(t=>t&&t.parentElement===e))),l&&(u=n===e?e.childNodes[r]:(0,o.default)(n,(t=>t&&t!==e&&(t.parentElement===e||(0,E.default)(t,-1))?[t.parentElement]:[]),(t=>t&&t.parentElement===e)));const _=(0,f.default)(d,f.DIR.PREV);(0,y.default)(_)&&(c=_),(0,y.default)(d)&&(h=d),(0,y.default)(u)&&(p=u,s.collapsed&&(c=c||p));const g=(0,f.default)(u,f.DIR.NEXT);return(0,y.default)(g)&&(m=g,s.collapsed&&(h=h||m)),{mentionBeforeStart:c,mentionAfterStart:h,mentionBeforeEnd:p,mentionAfterEnd:m}}function L(e){const{mentionBeforeStart:t,mentionAfterStart:s,mentionBeforeEnd:a,mentionAfterEnd:i}=R(e);if(!(t||s||a||i))return;const n=window.getSelection(),r=n.getRangeAt(0),o=r.collapsed;let l=!1;if(t){const e=F(t);l=!0,r.setStartAfter(e),r.collapsed&&r.setEndAfter(e)}if(s){const e=B(s);l=!0,r.setStartBefore(e),o&&r.setEndBefore(e)}if(!o){if(a){const e=F(a);l=!0,r.setEndAfter(e)}if(i){const e=B(i);l=!0,r.setEndBefore(e)}}l&&(n.removeAllRanges(),n.addRange(r))}function k(){const e=document.createElement("span");return e.textContent="",e.contentEditable="false",setTimeout((()=>(0,T.default)(e)),0),e}function F(e){const t=k();return(0,g.default)(t,e),t}function B(e){const t=k();return(0,v.default)(t,e),t}function G(e,t,s=!1){const a=(0,p.default)(e.refInput,"BACKWARD");if((0,y.default)(a))return"";let i=null,n="",r=0,o=null;return(0,x.default)(e,t,((e,t,s)=>{if("@"===i){if(c.default.isEmoji(e))return o=n,!0;if(/\W/.test(e))return o=s.slice(t+1)+n,!0}if(0===t&&(n=s+n),i=e,r+=1,r>=O)return!0})),!o&&r<O&&"@"===i&&(o=n),s&&o&&o.length&&(0,I.default)(t,o.length),o}t.default=j},23654:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({theme:e,contact:{id:t,formattedName:s,isMyContact:a,notifyName:u},onMouseDown:c,onMouseUp:h,onMouseEnter:f,term:p,selected:m}){const _=o.Configuration.Search({terms:p?[p]:[],boundary:!0});return(0,d.jsxs)("div",{className:(0,i.default)(l.default.mentionsResult,{[l.default.mediaCaption]:"mediaCaption"===e,[l.default.selected]:!0===m}),onMouseDown:c,onMouseUp:h,onMouseEnter:f,children:[(0,d.jsx)("div",{className:l.default.resultImage,children:(0,d.jsx)(n.default,{id:t,size:32})}),(0,d.jsx)("div",{className:l.default.textContact,dir:"auto",children:(0,d.jsx)(r.default,{text:s,formatters:_})}),(0,d.jsx)("div",{className:l.default.textPushname,dir:"auto",children:!a&&u?(0,d.jsx)(r.default,{text:`~${u}`,formatters:_}):null}),null]})};var i=a(s(94184)),n=a(s(88419)),r=a(s(85051)),o=s(49895),l=a(s(74019)),d=s(85893)},2904:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=a(s(94184)),n=s(67294),r=a(s(89914)),o=a(s(86025)),l=a(s(19257)),d=a(s(67893)),u=a(s(56847)),c=a(s(4158)),h=s(94367),f=a(s(23654)),p=a(s(75311)),m=a(s(63477)),_=a(s(79939)),g=a(s(76006)),v=a(s(80870)),S=a(s(82669)),C=s(85893);const y=(0,c.default)({MEDIA_CAPTION:null});t.ThemeOptions=y;var E=e=>{const{theme:t,plugin:s}=e,a=(0,g.default)(e.chat,["groupMetadata","isGroup"]),c=(0,_.default)((()=>new d.default)),[E,b]=(0,n.useState)(!1),[T,M]=(0,n.useState)(0),[x,I]=(0,n.useState)(""),[P,A]=(0,n.useState)(""),[N,O]=(0,n.useState)([]),w=(0,n.useRef)(),D=e=>(t,s)=>!(!E||!N.length)&&((!t||!(0,u.default)(t))&&(e(t,s),!0)),j=e=>{const t=N[e];if(!t||!t.id)return;const i=a.assignedColor(t.id);s.handleSelect(t,i+"")},R=(e,t=!1)=>M((s=>{var a;return t||s===e||null===(a=w.current)||void 0===a||a.scrollIntoViewIfNeeded(T),e})),L=D((()=>j(T))),k=D((()=>{b(!1),M(0),I(""),A(""),O([])})),F=D((()=>R(Math.max(T-1,0)))),B=D((()=>{const e=N.length-1;R(Math.min(T+1,e))}));if((0,v.default)(s,r.default.ENTER,L),(0,v.default)(s,r.default.TAB,L),(0,v.default)(s,r.default.SEARCH,(e=>{if(x&&e.startsWith(x))return;if(!a||!a.isGroup)return;const{groupMetadata:t}=a,{participants:s}=null!=t?t:{};b(!0),M(0),I(null),A(e),O((0,h.getResults)(e,s))})),(0,v.default)(s,r.default.INACTIVE,k),(0,v.default)(s,r.default.UP,F),(0,v.default)(s,r.default.DOWN,B),!E||!N.length)return null;const G=N.map(((e,t)=>({height:52,itemKey:e.id.toString(),contentKey:`${P}${t===T?"-selected":""}`,index:t,contact:e})));return(0,C.jsx)(S.default,{component:"div",className:p.default.positioningContainer,transitionName:"slide-up",children:(0,C.jsx)(m.default,{displayName:"MentionSuggestions",escapable:!0,requestDismiss:()=>{b(!1),M(0),I(P),A(""),O([])},requestRecentFocusOnUnmount:!1,children:(0,C.jsx)("div",{className:(0,i.default)(p.default.overlayContainer,{[p.default.mediaCaption]:t===y.MEDIA_CAPTION}),children:(0,C.jsx)(l.default,{className:p.default.resultsContainer,flatListControllers:[c.current],children:(0,C.jsx)(o.default,{ref:w,data:G,flatListController:c.current,direction:"vertical",renderItem:e=>{const{index:s,contact:a}=e;return(0,C.jsx)(f.default,{contact:a,term:P,selected:s===T,theme:t===y.MEDIA_CAPTION?"mediaCaption":null,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>j(s),onMouseEnter:()=>R(s,!0)},a.id.toString())}})})})})})};t.default=E},85883:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,a(s(4158)).default)({FILTER:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0,BACKSPACE:void 0});t.default=i},67920:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(44991)),n=a(s(85883)),r=a(s(8092)),o=a(s(93154)),l=a(s(35371));const d=(0,r.default)(25,"/"),u={Enter:n.default.ENTER,Tab:n.default.TAB,ArrowUp:n.default.UP,ArrowDown:n.default.DOWN,Backspace:n.default.BACKSPACE};class c extends i.default{constructor(...e){super(...e),this.handleSelect=e=>{e.useOnce();const t=window.getSelection(),s=d(this.ctx,t);null!=s&&((0,o.default)(t,s.length+1),this.ctx.replaceSelection(e.message),(0,o.default)(t,e.message.length),this.handle(n.default.INACTIVE))},this.handlers={onKeyDown(e,t){const s=u[e.key];return!!s&&this.handle(s,[e,t])},onSelect(){if(l.default.isTrident)return!1;if(this.ctx.isComposing)return!1;const e=window.getSelection(),t=d(this.ctx,e);return null==t?(this.handle(n.default.INACTIVE),!1):(this.handle(n.default.FILTER,[t]),!1)},onBlur(){return this.handle(n.default.INACTIVE),!1}}}}var h=new c;t.default=h},92816:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logFilterEvent=function(e){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_IMPRESSION,quickReplyCount:e}).commit()},t.logSelectEvent=function(){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK,quickReplyKeywordMatched:!1}).commit()},t.logCancelEvent=function(){new i.default.QuickReply({quickReplyAction:i.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK_CANCEL}).commit()};var i=a(s(4231))},33451:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{shortcut:t,message:s}=(0,l.default)(e.quickReply,["shortcut","message"]),{query:a,selected:u,onMouseDown:c,onMouseEnter:h,onMouseUp:f}=e,p=t.slice(a.length);return(0,d.jsxs)("div",{className:(0,i.default)(o.default.result,{[o.default.selected]:u}),onMouseDown:c,onMouseUp:f,onMouseEnter:h,children:[(0,d.jsx)("span",{className:o.default.slash,children:"/"}),(0,d.jsx)(n.default,{className:o.default.shortcutPrefix,text:a}),(0,d.jsx)(n.default,{className:o.default.shortcutSuffix,text:p}),(0,d.jsx)(n.default,{className:o.default.message,ellipsify:!0,text:s,formatters:r.Configuration.QuickReply()})]})};var i=a(s(94184)),n=a(s(85051)),r=s(49895),o=a(s(63293)),l=a(s(76006)),d=s(85893)},80921:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(23493)),n=a(s(94184)),r=s(67294),o=s(44991),l=a(s(85883)),d=a(s(86025)),u=a(s(19257)),c=a(s(67893)),h=a(s(56847)),f=a(s(71681)),p=s(92816),m=a(s(65963)),_=a(s(33451)),g=a(s(91162)),v=a(s(63477)),S=a(s(82669)),C=s(85893);const y={query:"",results:[],active:!1,offset:0};class E extends r.Component{constructor(...e){super(...e),this.state=y,this.flatListController=new c.default,this.setRefList=e=>{this.list=e},this._pluginCtx=(0,o.pluginContext)(),this.handleUpdate=b((()=>this._handleFilter(this.state.query)),this),this._handleFilter=e=>{m.default.synced()||this._syncIfNeeded();const t=m.default.filterShortcuts(e);t.length&&(0,p.logFilterEvent)(t.length),this.setState({query:e,results:t,active:!0,offset:0})},this.handleInactive=b((()=>{this.setState(y)}),this),this._handleSelect=b((()=>this.handleSelect(this.state.offset)),this),this.handleUp=b((()=>{const e=Math.max(this.state.offset-1,0);this.setOffset(e)}),this),this.handleDown=b((()=>{const e=this.state.results.length-1,t=Math.min(this.state.offset+1,e);this.setOffset(t)}),this),this._handleBackspace=()=>{const e=window.getSelection().toString();this._lastInsertedText&&e===this._lastInsertedText&&(0,p.logCancelEvent)()},this.handleEscape=()=>{this.setState(y)},this._syncIfNeeded=(0,i.default)((()=>{m.default.synced()||m.default.sync()}),1e3),this.renderItem=e=>{const{index:t,quickReply:s}=e;return(0,C.jsx)(_.default,{quickReply:s,query:this.state.query,selected:t===this.state.offset,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>this.handleSelect(t),onMouseEnter:()=>this.setOffset(t,!0)},s.id)}}componentDidMount(){const{plugin:e}=this.props,t=this._pluginCtx;e.registerHandler(t,l.default.ENTER,this._handleSelect),e.registerHandler(t,l.default.TAB,this._handleSelect),e.registerHandler(t,l.default.FILTER,this._handleFilter),e.registerHandler(t,l.default.INACTIVE,this.handleInactive),e.registerHandler(t,l.default.UP,this.handleUp),e.registerHandler(t,l.default.DOWN,this.handleDown),e.registerHandler(t,l.default.BACKSPACE,this._handleBackspace),this.props.listeners.add(m.default,"add remove change:shortcut",this.handleUpdate)}componentWillUnmount(){const{plugin:e}=this.props,t=this._pluginCtx;e.unregisterHandler(t,l.default.ENTER),e.unregisterHandler(t,l.default.TAB),e.unregisterHandler(t,l.default.FILTER),e.unregisterHandler(t,l.default.INACTIVE),e.unregisterHandler(t,l.default.UP),e.unregisterHandler(t,l.default.DOWN),e.unregisterHandler(t,l.default.BACKSPACE),this._syncIfNeeded.cancel()}setOffset(e,t=!1){e!==this.state.offset&&this.setState({offset:e},(()=>{!t&&this.list&&this.list.scrollIntoViewIfNeeded(e)}))}handleSelect(e){const t=this.state.results[e];t&&t.id&&(this._lastInsertedText=t.message,(0,p.logSelectEvent)(),this.props.plugin.handleSelect(t))}renderList(){const{results:e,query:t,offset:s}=this.state,a=e.map(((e,a)=>({height:52,itemKey:e.id,contentKey:`${t}${a===s?"-selected":""}`,index:a,quickReply:e})));return e.length?(0,C.jsx)(v.default,{displayName:"QuickReplySuggestions",escapable:!0,requestDismiss:this.handleEscape,children:(0,C.jsx)("div",{className:(0,n.default)(g.default.overlayContainer),children:(0,C.jsx)(u.default,{className:g.default.resultsContainer,flatListControllers:[this.flatListController],children:(0,C.jsx)(d.default,{ref:this.setRefList,data:a,flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem})})})}):null}render(){return(0,C.jsx)(S.default,{component:"div",className:g.default.positioningContainer,transitionName:"slide-up",children:this.renderList()})}}function b(e,t){return(s,a)=>!(!t.state.active||!t.state.results.length)&&((!s||!(0,h.default)(s))&&(e.call(t,s,a),!0))}E.displayName="Suggestions";var T=(0,f.default)(E);t.default=T},72094:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.isComposing)return!1;const s=window.getSelection();return function(e,t,s){if(!t.modify)return!1;if(1!==t.rangeCount)return!1;let a=u.backwardsEmojiTextsTrie;const i=e.data||"";if(a=a.get(i),!a)return!1;if(!t.getRangeAt(0).collapsed)return!1;let c=i,h=null,f=null;if((0,l.default)(s,t,((e,t,s)=>((0,n.default)(a,"Trie ptr somehow not set"),a=a.get(e),!a||(a.hasChildren()?void(0===t&&(c=s+c)):(c=s.slice(t)+c,f=(0,u.default)(c),f&&(h=c),!0))))),!h)return!1;const p=s.serializeTextBeforeCursor();if((0,r.isInsideCodeBlock)(p))return!1;(0,d.default)(t,h.length-1),s.replaceSelection(f||"");const{refInput:m}=s,_=(0,o.default)(m,o.Direction.BACKWARD);if(!_)return!0;return _.dataset.replacedEmojiText=h,!0}(e,s,t)};var n=i(s(41143)),r=s(52646),o=a(s(62533)),l=i(s(15872)),d=i(s(93154)),u=a(s(26500))},97924:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(8===e.keyCode)return function(e,t){if(t.isComposing)return!1;const s=window.getSelection();return function(e,t,s){if(!t.modify)return!1;const{refInput:a}=s,n=(0,i.default)(a,i.Direction.BACKWARD);if(!n)return!1;if(r=n,!Boolean(r&&r.dataset&&r.dataset.replacedEmojiText))return!1;var r;t.modify("extend","backward","character"),t.modify("move","backward","character");const o=n.dataset.replacedEmojiText,l=n.parentNode;if(!l)return!1;l.replaceChild(document.createTextNode(o+" "),n);const d=o.length;for(let e=0;e<d+1;e++)t.modify("extend","forward","character"),t.modify("move","forward","character");return!1}(0,s,t)}(0,t);return!1};var i=a(s(62533))},1718:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(44991)),n=a(s(72094)),r=a(s(97924));class o extends i.default{constructor(...e){super(...e),this.handlers={onBeforeInput:n.default,onKeyDown:r.default}}}var l=new o;t.default=l},26500:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=o[e];let s;t&&(s=i.default.getSkinToneBase(t)&&n.default.getVariant(t));return s||t},t.backwardsEmojiTextsTrie=void 0;var i=a(s(2561)),n=a(s(41098)),r=a(s(81075));const o={"(y)":"","(Y)":"","(n)":"","(N)":"",":-)":"",":-(":"",":-p":"",":-P":"",":-|":"",":-\\":"",":-D":"",":-*":"",":-o":"","<3":"","^_^":"",">_<":"",";-)":""};const l=Object.keys(o),d=r.default.fromBackwardsStrings(l);t.backwardsEmojiTextsTrie=d},88224:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(44991)),n=a(s(91952)),r=a(s(56849));class o extends i.default{constructor(...e){super(...e),this.handlers={onKeyDown(e){return!this.ctx.isComposing&&(!(" "!==e.key||!(0,r.default)(e))&&(!this.ctx.value.length&&(n.default.scrollMessages(),!0)))}}}}var l=new o;t.default=l},6858:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t}=e;return(0,n.jsxs)("div",{className:i.default.container,children:[" ",t," "]})};var i=a(s(60576)),n=s(85893)},87519:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{base:t,unicode:s,action:a}=e,i=(0,r.isBaseCoupleEmoji)(t),f=i?(0,r.getPermutations)(c.SKIN_TONE_VARIATIONS.slice(1),2):c.SKIN_TONE_VARIATIONS.map((e=>[e])),p=f.reduce(((e,s)=>{const a=r.default.getSkinToneVariant(t,s);return a?(e.push(a),e):e}),[]).filter((e=>r.default.isEmoji(e))).map(((e,t)=>(0,h.jsx)(n.default,{type:i?"emoji-grid":"emoji",a8n:"mi-emoji-variant",action:t=>a(t,s,e),children:(0,h.jsx)(o.default,{text:e,formatters:d.Configuration.LargeEmojiOnly(),tabIndex:"-1"})},e+t)));return i?(0,h.jsx)(l.default,{base:t,action:a,unicode:s,children:p}):(0,h.jsx)(u.default,{children:p})};var n=i(s(47452)),r=a(s(2561)),o=i(s(85051)),l=i(s(59888)),d=s(49895),u=i(s(6858)),c=s(67071),h=s(85893)},80870:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const a=(0,r.default)(n.pluginContext),o=(0,i.useRef)(s);o.current=s,(0,i.useEffect)((()=>{const s=a.current;return e.registerHandler(s,t,((...e)=>o.current(...e))),()=>e.unregisterHandler(s,t)}),[e,t,a])};var i=s(67294),n=s(44991),r=a(s(79939))},3132:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RoundTheme=void 0;var i=a(s(81109)),n=a(s(94184)),r=a(s(76610)),o=a(s(85911)),l=a(s(59071)),d=a(s(82275)),u=s(85893);const c=s(54302).Mirrored(["Default","Small","Large","Inverted"]);t.RoundTheme=c;var h=({large:e,small:t,inverted:s,theme:a,a8nText:h,label:f,onClick:p,onKeyDown:m,className:_,children:g,disabled:v,dataTab:S,showBackgroundOnHover:C})=>{const y=(0,n.default)(_,l.default.btn,{[l.default.large]:e||a===c.Large,[l.default.small]:t||a===c.Small,[l.default.inverted]:s||a===c.Inverted||C,[l.default.disabled]:v,[l.default.showBackgroundOnHover]:C}),[E,b]=(0,d.default)(p,{disabled:v}),T=m?e=>{(0,o.default)(e)&&(e.preventDefault(),v||m(e))}:b.onKeyPress;return(0,u.jsx)("div",(0,i.default)((0,i.default)({},b),{},{"data-a8n":r.default.key(h),role:"button","aria-label":f,tabIndex:"0",className:y,onKeyDown:T,onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},ref:E,"data-tab":S,children:g}))};t.default=h},16211:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(94184)),r=a(s(76708)),o=a(s(82275)),l=s(85893);var d=({children:e,side:t,ellipsify:s,onClick:a,"aria-label":d})=>{const u=(0,n.default)({[r.default.clickable]:a}),c=(0,n.default)(r.default.main,{[r.default.mainEllipsify]:s}),h=null!=t?(0,l.jsx)("div",{className:r.default.side,children:t}):null;let f={};const[p,m]=(0,o.default)(a);return null!=a&&(f=(0,i.default)({ref:p},m)),(0,l.jsx)("div",(0,i.default)((0,i.default)({className:u,"aria-label":d},f),{},{children:(0,l.jsxs)("div",{className:r.default.body,children:[(0,l.jsx)("div",{className:c,children:e}),h]})}))};t.default=d},37314:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(29766)),n=s(85893);var r=({header:e})=>(0,n.jsx)("div",{className:i.default.container,children:e});t.default=r},33586:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(5860),r=i(s(57283));s(7144);var o=s(17982),l=a(s(46364));t.default=class{constructor(e,t,s,a,i=!1){this.componentName=e,this.name=t,this._isStrong=a,this.keys=s;const r=o.ProxyStates[t];r||(__LOG__(4,void 0,new Error,!0)`Unknown StateHOC concern type "${t}"`,SEND_LOGS("state-hoc-error")),this._proxyClass=r,this._limitedAccessProxyClass=function(e,t,s,a){const i={$ProxyState$ComponentName:{value:e},proxyBitMask:{value:(0,n.genBitMask)(t.prototype.mirrorMask,s)}};for(const t of s){const s={enumerable:!0};s.get=function(){return this.$ProxyState$state.get(t)},s.set=function(){__LOG__(4,void 0,new Error)`READ ONLY: Cannot write to proxied property "${t}", created in <${e} />, it is not writable.`},a||(s.set=function(e){this.$ProxyState$state.set(t,e)}),i[t]=s}function r(e){t.call(this,e)}return r.prototype=Object.create(t.prototype,i),r.prototype.constructor=r,r}(e,r,s,i)}getModel(e){return e instanceof this._proxyClass?e.$ProxyState$state:e}getModelAndValidate(e){const t=e instanceof this._proxyClass?e.$ProxyState$state:e;return t?t instanceof r.default?t:(__LOG__(4,void 0,new Error,!0)`${this.componentName} given invalid object for ${this.name}: ${s=t,"string"==typeof s?s:s.toString?s.toString():"Invalid Object"}`,SEND_LOGS("state-hoc-error"),null):(l.default.mode===l.StreamMode.MAIN&&(__LOG__(4,void 0,new Error,!0)`${this.componentName} was not supplied the ${this.name} model with keys ${String(this.keys)}.`,SEND_LOGS("state-hoc-error")),null);var s}createProxy(e){return new this._limitedAccessProxyClass(e)}attachConcern(e,t,s){e.incObservers(!this._isStrong),e.mirror.addListener(s,t,this)}detachConcern(e,t){e.decObservers(),e.mirror.removeListener(t)}}},94192:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({animationFrames:e,signal:t,onFrameChange:s,shouldStop:i}){if(t.aborted)return Promise.reject(new a.AbortError);if(0===e.length)return Promise.resolve();const n=(new Date).getTime();let r=0,o=0,l=n,d=()=>{};return new Promise(((n,u)=>{const c=()=>{0!==r&&window.cancelAnimationFrame(r),u(new a.AbortError)};t.addEventListener("abort",c),d=()=>{t.removeEventListener("abort",c)};const h=()=>{const t=(new Date).getTime();if(t<l)return void(r=window.requestAnimationFrame(h));const{duration:a,rgbaBuffer:d}=e[o];s(d),o=(o+1)%e.length,l=t+a,1===o&&i()?n():r=window.requestAnimationFrame(h)};r=window.requestAnimationFrame(h)})).finally((()=>{d()}))};var a=s(58568)},67346:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(6747)),r=s(57085),o=a(s(85472)),l=s(85893);class d extends i.PureComponent{constructor(e){super(e),this.state={animationFramesInfo:null},(0,r.blobToArrayBuffer)(this.props.blob).then(o.default).then((e=>{this.setState({animationFramesInfo:e})})).catch((e=>{__LOG__(3)`AnimationCanvas error: ${e}`}))}render(){const{animationFramesInfo:e}=this.state;if(!e)return this.props.renderPreview();const{width:t,height:s,frames:a}=e;return(0,l.jsx)(n.default,{className:this.props.className,width:t,height:s,animationFrames:a,startAnimation:Boolean(this.props.loopAnimation||this.props.startAnimation),maxLoops:this.props.maxLoops,onClick:this.props.onClick})}}t.default=d,d.displayName="AnimationCanvas"},50751:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(7900)),n=s(67294),r=a(s(2927)),o=a(s(39406)),l=s(61192),d=a(s(55333)),u=s(33156),c=s(85893);var h=(0,n.forwardRef)(((e,t)=>{const s=(0,n.useRef)(),a=(0,n.useRef)(),h=(0,n.useRef)(),f=(0,n.useRef)(),[p,{isIntersecting:m}]=(0,o.default)({root:null,rootMargin:"25px",threshold:.99}),[_,g]=(0,n.useState)(e.startAnimation),[v,S]=(0,n.useState)(!1),[C,y]=(0,u.useManualTimeout)((()=>{const e=h.current;null==e||e.refreshBlob(),g(!1),f.current=null})),E=()=>{const t=(0,i.default)(e.mediaData.singleLoopDuration,"props.mediaData.singleLoopDuration"),s=(Date.now()-(0,i.default)(f.current,"startedAtRef.current"))%t,a=e.mediaData.animationDuration-s;C(a)},b=()=>{y(),null==f.current&&(f.current=Date.now()),g(!0)};(0,l.useListener)(document,"visibilitychange",(()=>{const e="visible"===document.visibilityState;m&&e?(b(),E()):g(!1)})),(0,n.useEffect)((()=>{m?(b(),E()):null!=f.current&&E()}),[m]);const T=(0,d.default)(e.mediaData,"animatedAsNewMsg"),M=()=>{if(v)return;const t=s.current,i=a.current;t&&i&&(t.width=i.naturalWidth/2,t.height=i.naturalHeight/2,t.getContext("2d").drawImage(i,0,0,t.width,t.height)),e.startAnimation&&(f.current=Date.now(),E(),T(!0)),S(!0)};(0,n.useImperativeHandle)(t,(()=>({startAnimation:b})));const x=!v||_;return(0,c.jsxs)("div",{className:e.className,onMouseEnter:b,onMouseLeave:()=>{null!=f.current&&E()},onClick:e.onClick,ref:p,children:[(0,c.jsx)(r.default,{ref:h,mediaData:e.mediaData,placeholderRenderer:e.placeholderRenderer,downloadMedia:e.downloadMedia,children:t=>(0,c.jsx)("img",{alt:e.label,className:e.className,style:{display:x?"block":"none"},draggable:"false",src:t,ref:a,onLoad:M})}),(0,c.jsx)("canvas",{className:e.className,style:{display:x?"none":"block"},draggable:"false",ref:s})]})}));t.default=h},6747:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(58568),n=s(67294),r=a(s(14505)),o=a(s(94192)),l=a(s(11274)),d=s(85893);class u extends n.PureComponent{constructor(...e){super(...e),this._abortController=new r.default,this._isAnimating=!1,this.state={rgbaBuffer:null},this._iterations=0,this._isFocused=!1,this._startAnimation=()=>{this._isAnimating||(this._isAnimating=!0,(0,o.default)({animationFrames:this.props.animationFrames,signal:this._abortController.signal,onFrameChange:e=>this.setState({rgbaBuffer:e}),shouldStop:()=>this._iterations>=this.props.maxLoops||(this._isFocused||this._iterations++,!1)}).catch((e=>{if(e.name!==i.ABORT_ERROR)throw e})).finally((()=>{this._isAnimating=!1})))},this._onMouseEnter=()=>{this.props.maxLoops!==1/0&&(this._isFocused=!0,this._iterations=1,this._startAnimation())},this._onMouseLeave=()=>{this._isFocused=!1}}componentDidMount(){this.props.startAnimation?this._startAnimation():this._renderFirstFrame()}_renderFirstFrame(){const{animationFrames:e}=this.props;0!==e.length&&this.setState({rgbaBuffer:e[0].rgbaBuffer})}componentWillUnmount(){this._abortController.abort()}render(){const{rgbaBuffer:e}=this.state;return e?(0,d.jsx)(l.default,{rgbaBuffer:e,className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}):null}}t.default=u,u.displayName="ControlledAnimationCanvas"},63348:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(58568),o=i(s(7900)),l=s(67294),d=i(s(67346)),u=i(s(50751)),c=a(s(6002)),h=i(s(32243)),f=i(s(2408)),p=i(s(67615)),m=s(90672),_=i(s(80747)),g=i(s(90174)),v=i(s(79267)),S=i(s(11274)),C=i(s(79939)),y=i(s(76006)),E=i(s(29579)),b=s(85893);function T({className:e,loopAnimation:t,mediaData:s,startAnimation:a,renderPreview:i,downloadMedia:n,onClick:r,forwardRef:o,label:l}){return s.animationDuration>0&&!t?(0,b.jsx)(u.default,{className:e,mediaData:s,startAnimation:a,onClick:r,placeholderRenderer:i,downloadMedia:n,ref:o,label:l}):(0,b.jsx)(_.default,{mediaData:s,placeholderRenderer:i,downloadMedia:n,children:t=>(0,b.jsx)("img",{className:e,draggable:"false",onClick:r,src:t,alt:l})})}function M({className:e,loopAnimation:t,mediaData:s,startAnimation:a,renderPreview:i,downloadMedia:n,onClick:r}){if(s.animationDuration>0){const l=t?1/0:s.animationDuration/(0,o.default)(s.singleLoopDuration,"mediaData.singleLoopDuration");return(0,b.jsx)(p.default,{mediaData:s,render:s=>(0,b.jsx)(d.default,{className:e,loopAnimation:t,maxLoops:l,blob:s,renderPreview:i,startAnimation:a,onClick:r}),renderPlaceholder:i,downloadMedia:n})}return s.rgbaBuffer?(0,b.jsx)(S.default,{className:e,height:s.rgbaHeight,onClick:r,rgbaBuffer:s.rgbaBuffer,width:s.rgbaWidth}):i()}var x=e=>{const t=(0,y.default)(e.mediaData,["animatedAsNewMsg","animationDuration","singleLoopDuration","mediaBlob","preview","renderableUrl","rgbaBuffer","rgbaHeight","rgbaWidth","emojis","mediaStage"]),s=(0,C.default)((()=>t.animatedAsNewMsg)).current,a=function(){const[e,t]=(0,l.useState)(c.getCachedWebpSupport),s=(0,E.default)();return(0,l.useEffect)((()=>{null==e&&(0,v.default)((0,c.default)(),s).then(t).catch((e=>{if(e.name!==r.ABORT_ERROR)throw e}))}),[]),e}(),i=(0,n.default)({[h.default.conversation]:"conversation"===e.theme,[h.default.quoted]:"quoted"===e.theme,[h.default.composeBoxQuoted]:"composeBoxQuoted"===e.theme,[h.default.stickerPanel]:"stickerPanel"===e.theme,[h.default.clickable]:Boolean(e.onClick)}),o=()=>{var s;const a=t.preview,r=a&&a.url(),o=null===(s=t.emojis)||void 0===s?void 0:s.join(" "),l=o?f.default.t(47,{emojis:o}):f.default.t(48);return r?(0,b.jsx)("img",{className:i,draggable:"false",onClick:e.onClick,src:r,alt:l}):(0,b.jsx)(g.default,{className:(0,n.default)(h.default.placeholder,i)})};return(0,b.jsx)("span",{className:(0,n.default)({[h.default.showSticker]:t.mediaStage===m.MEDIA_DATA_STAGE.RESOLVED}),children:(()=>{var n;if(null==a)return o();const r=null===(n=t.emojis)||void 0===n?void 0:n.join(" "),l=r?f.default.t(47,{emojis:r}):f.default.t(48),d=Boolean(e.animateOnView||e.isNewMsg&&!s),u=Boolean(e.loopAnimation);return a?(0,b.jsx)(T,{className:i,mediaData:t,loopAnimation:u,startAnimation:d,renderPreview:o,onClick:e.onClick,downloadMedia:e.downloadMedia,forwardRef:e.forwardRef,label:l}):(0,b.jsx)(M,{className:i,mediaData:t,loopAnimation:u,startAnimation:d,renderPreview:o,onClick:e.onClick,downloadMedia:e.downloadMedia,label:l})})()})};t.default=x},90174:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t}=e;return(0,n.jsx)(i.default,{className:t,name:"sticker-placeholder"})};var i=a(s(2966)),n=s(85893)},40858:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{disabled:t,onClick:s,type:a,title:u,"aria-label":c}=e,h=(0,n.default)(e,["disabled","onClick","type","title","aria-label"]);return(0,l.jsx)(o.default,{xstyle:t&&d.disabled,disabled:t,onClick:s,"aria-label":c,title:u,type:a,children:(0,l.jsx)(r.default,(0,i.default)({},h))})};var i=a(s(81109)),n=a(s(6479)),r=(a(s(56720)),a(s(2966))),o=a(s(89135)),l=s(85893);const d={disabled:{opacity:"aiwu9bi8"}}},29458:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextInputCustomStyleThemes=void 0;var n=i(s(94184)),r=s(67294),o=(i(s(56720)),s(9492)),l=i(s(96962)),d=i(s(91137)),u=s(22252),c=a(s(85051)),h=i(s(47193)),f=i(s(39e3)),p=i(s(4158)),m=i(s(2408)),_=i(s(46714)),g=i(s(2966)),v=i(s(8082)),S=i(s(63477)),C=i(s(68062)),y=s(49002),E=i(s(89135)),b=i(s(82669)),T=s(85893);const M=(0,p.default)({groupInfoName:null,desaturated:null,noErrorInfo:null});t.TextInputCustomStyleThemes=M;const x={iconMain:{position:"lhggkp7q",top:"jgz0asyo",right:"grt5ktjy",color:"gtscxtjd",cursor:"ajgl1lbb",":focus":{boxShadow:"esbo3we0"}},emojiBtn:{marginEnd:"kjemk6od",marginStart:"p3lsiedt",color:"gtscxtjd",cursor:"ajgl1lbb",":focus":{boxShadow:"esbo3we0"}}};class I extends r.Component{constructor(...e){super(...e),this.state={active:this.props.startActive||!1,locked:!this.props.startActive&&!!this.props.lockable,emojiPicker:null},this.emojiInputComponent=(0,l.default)(),this._refInputLine=(0,r.createRef)(),this._refEmojiPanel=(0,r.createRef)(),this._refEditButton=(0,r.createRef)(),this.isSkinTonePickerOpen=!1,this.handleEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());const t=(0,T.jsx)(d.default,{onEmoji:this.handleEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:o.DirY.TOP,type:"emoji_picker",anchor:e.target}}),this.restoreFocus()},this.handleEmojiPickerClose=()=>{this.setState({emojiPicker:null})},this.handleRestoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this.handleEmoji=e=>{var t;null===(t=this._refInputLine.current)||void 0===t||t.replaceSelection(e)},this.handleEnter=e=>{this.props.lockable&&this._handleSaveAndLock(),this.props.onEnter&&!this.props.multiline&&this.props.onEnter(e)},this.handleChange=e=>{this.props.onChange&&this.props.onChange(e)},this.restoreFocus=()=>{var e;null===(e=this._refInputLine.current)||void 0===e||e.focus()},this.handleFocus=e=>{const t=e.relatedTarget;var s;t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)&&(null===(s=this._refInputLine.current)||void 0===s||s.focus())},this.handleBlur=e=>{this.isSkinTonePickerOpen||(this.state.active&&this.setState({active:!1}),this.props.onBlur&&this.props.onBlur(e))},this.handleFocus=e=>{e.stopPropagation(),this.state.active||this.setState({active:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this._handleUnlock=()=>{this.props.onBeginEdit&&this.props.onBeginEdit(),this.setState({locked:!1})},this._handleSaveAndLock=()=>{let e=!(!this.props.lowProfile&&this.props.error);this.props.validate&&e&&(e=this.props.validate(this.props.value)),e?(this.props.onSave&&this.props.onSave(),this.setState({locked:!0})):this.props.onError&&this.props.onError()},this.handleCancel=()=>{this.props.onCancel&&this.props.onCancel(),this.setState({locked:!0})},this._showEmptyValuePlaceholder=()=>{const{value:e}=this.props;return(!e||""===e)&&this.props.emptyValuePlaceholder&&this.state.locked},this.isEditing=()=>this.props.editable&&!this.state.locked,this._renderEmojiText=()=>{const{renderEmojiTextInLockMode:e,value:t}=this.props;if(!e||!t)return;const{textLimit:s,readMoreText:a,onReadMore:i,formatters:n}=e;return(0,T.jsxs)("div",{className:v.default.emojiText,children:[(0,T.jsx)(c.default,{text:t,selectable:!0,emojiSize:c.EMOJI_SIZE.SMALL,textLimit:s,formatters:n}),(0,y.numCodepoints)(t)>s&&(0,T.jsx)("span",{className:v.default.more,role:"button",onClick:i,children:` ${a}`})]})},this.handleEmojiFocus=()=>{this.state.emojiPicker&&this.handleRestoreEmojiPickerFocus()}}componentDidMount(){this.props.focusOnMount&&this.restoreFocus()}componentDidUpdate(e,t){if(t.locked||!e.editable||this.props.editable||this.handleCancel(),this._refEditButton){const s=!t.locked&&this.state.locked,a=e.pending&&!this.props.pending;(s||a)&&h.default.focus(this._refEditButton.current)}const s=this._refInputLine.current;this.isEditing()&&!this.props.managed||(null==s?void 0:s.value)===this.props.value||null==s||s.reset(this.props.value||"")}render(){const e=this.props.maxLength||I.defaultProps.maxLength,t=this.isEditing(),s=t&&!!this.props.error&&!this.props.lowProfile,{customStyleThemes:a=[]}=this.props,i={container:(0,n.default)(v.default.textInput,a&&a.map((e=>v.default[e])),{[v.default.noPlaceholder]:!this.props.placeholder,[v.default.invite]:"v4-invite-caption"===this.props.theme,[v.default.active]:t,[v.default.small]:"small"===this.props.theme,[v.default.inputLarge]:"large"===this.props.theme}),label:(0,n.default)(v.default.labelText,{[v.default.float]:!!this.props.value,[v.default.hideFloatingLabel]:!!this.props.hideFloatingLabel}),inputWrapper:(0,n.default)(v.default.wrapper,{[v.default.textError]:s,[v.default.invite]:"v4-invite-caption"===this.props.theme,[v.default.textActive]:this.state.active,[v.default.locked]:this.state.locked}),infoWrapper:(0,n.default)(v.default.infoStrip,{[v.default.textError]:s,[v.default.textActive]:this.state.active})};let r,o;if(this.props.lockable){if(this.props.pending)o=(0,T.jsx)("div",{className:(0,n.default)(v.default.iconSpinner,v.default.iconMain),children:(0,T.jsx)(_.default,{size:18,stroke:6,color:"highlight"})},"spinner");else if(this.state.locked)if(this.props.editable){var l;o=(0,T.jsx)("button",{className:v.default.iconMain,onClick:this._handleUnlock,title:m.default.t(10,{fieldName:null!==(l=this.props.fieldName)&&void 0!==l?l:""}),ref:this._refEditButton,children:(0,T.jsx)(g.default,{className:v.default.icon,name:"pencil",directional:!0})},"btn-edit")}else this.props.editRestrictionInfo&&!this.props.editable&&(o=(0,T.jsx)("div",{className:v.default.iconMain,onClick:this.props.editRestrictionInfo,children:(0,T.jsx)(g.default,{className:v.default.icon,name:"info"})},"btn-info"));else o=(0,T.jsx)(E.default,{xstyle:x.iconMain,onClick:this._handleSaveAndLock,title:m.default.t(602),children:(0,T.jsx)(g.default,{className:v.default.icon,name:"checkmark"})},"btn-done");r=this.props.lockable?(0,T.jsx)(b.default,{className:v.default.iconMainContainer,transitionName:"pop",children:o}):null}const d=t&&this.props.supportsEmoji?(0,T.jsx)(E.default,{xstyle:x.emojiBtn,onClick:this.handleEmojiPicker,onFocus:this.handleEmojiFocus,title:m.default.t(30),children:(0,T.jsx)(g.default,{className:v.default.icon,name:"emoji-input"})},"emoji-btn"):null;let c;if(this.props.showRemaining){const s=(0,y.numCodepoints)(this.props.value||"");c=e-s<50&&t?(0,T.jsx)("div",{className:(0,n.default)(v.default.charCounter),children:m.default.n(e-s)},"counter"):null}const h=this.props.supportsEmoji||this.props.showRemaining?(0,T.jsxs)(b.default,{className:v.default.iconsEditContainer,transitionName:"pop",children:[c,d]}):null,p=this.props.error?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:v.default.errorText,children:s?this.props.error:null}),(0,T.jsx)("div",{className:v.default.visiblyHidden,role:"alert",children:m.default.t(12,{error:this.props.error})})]}):null,M=this.props.lowProfile?null:(0,T.jsx)("div",{className:i.infoWrapper,children:p});let P;if(this.props.lockable&&!this.state.locked){let e;this.state.emojiPicker&&(e=(0,T.jsx)(S.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.handleEmojiPickerClose,requestFocus:this.handleRestoreEmojiPickerFocus,children:(0,T.jsx)(C.default,{contextMenu:this.state.emojiPicker})})),P=(0,T.jsx)(S.default,{displayName:"TextInput",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.handleCancel,children:(0,T.jsx)("div",{children:e})})}else!this.props.lockable&&this.state.emojiPicker&&(P=(0,T.jsx)(S.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.handleEmojiPickerClose,requestFocus:this.handleRestoreEmojiPickerFocus,children:(0,T.jsx)(C.default,{contextMenu:this.state.emojiPicker})}));const A=this.props.editable&&!this.state.locked,{emptyValuePlaceholder:N,renderEmojiTextInLockMode:O}=this.props,w=this.emojiInputComponent,D=A||!O,j=D?(0,T.jsx)(w,{a8n:this.props.a8n,ref:this._refInputLine,initialValue:this.props.value,theme:this.props.theme||"default",multiline:this.props.multiline,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onEnter:this.handleEnter,onFiles:this.props.onFiles,spellCheck:this.props.spellCheck,maxLength:this.props.maxLength,readOnly:!A,title:this.props.title,placeholder:this.props.inputPlaceholder}):this._renderEmojiText();let R,L;return this.props.placeholder&&(R=(!this.props.value||!this.props.hideFloatingLabel)&&(0,T.jsx)("span",{className:i.label,children:this.props.placeholder}),L=(0,T.jsx)("div",{className:v.default.spacer})),(0,T.jsxs)(f.default,{className:i.container,onFocus:this.handleFocus,children:[R,L,(0,T.jsxs)("div",{className:i.inputWrapper,children:[j,this._showEmptyValuePlaceholder()&&(0,T.jsx)("div",{className:v.default.emptyValPlaceholder,children:N}),h,r]}),D&&(0,T.jsx)(w.EmojiSuggestions,{theme:u.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.handleSkinTonePicker}),M,P]})}}t.default=I,I.defaultProps={maxLength:25,editable:!0},I.displayName="TextInput"},32437:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TooltipAnchor=void 0;var i=a(s(94184)),n=a(s(76610)),r=a(s(40726)),o=s(85893);const l=s(54302).Mirrored(["Left","Right","Top","Bottom"]);function d(e){switch(e){case l.Left:return r.default.left;case l.Right:return r.default.right;case l.Top:return r.default.top;case l.Bottom:return r.default.bottom}}t.TooltipAnchor=l;var u=({children:e,anchor:t=l.Right})=>(0,o.jsx)("div",{"data-a8n":n.default.key("tooltip"),className:(0,i.default)(r.default.tooltip,d(t)),children:e});t.default=u},68062:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=s(67294),r=a(s(91952)),o=a(s(52087));class l extends n.Component{componentDidMount(){const e=(0,i.default)((0,i.default)({},this.props.contextMenu),{},{uim:this.props.uim});r.default.openContextMenu(e,(e=>{this.element=e}))}componentWillUnmount(){r.default.closeContextMenu(this.props.uim)}getElement(){return this.element}render(){return null}}l.displayName="UIEMenu";var d=(0,o.default)(l);t.default=d},54136:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=s(67294),r=a(s(91952)),o=a(s(52087));class l extends n.Component{componentDidMount(){const e=(0,i.default)((0,i.default)({},this.props.tooltip),{},{uim:this.props.uim});r.default.openTooltip(e,(e=>{this.element=e}))}componentWillUnmount(){r.default.closeTooltip(this.props.uim)}getElement(){return this.element}render(){return null}}l.displayName="UIETooltip";var d=(0,o.default)(l);t.default=d},89135:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{a8nText:t,children:s,disabled:a,onClick:c,title:h,type:f="button",onFocus:p,xstyle:m}=e,_=(0,n.default)(e,["a8nText","children","disabled","onClick","title","type","onFocus","xstyle"]);const[g,v]=(0,l.default)(),S={};null!=_["aria-label"]&&(S["aria-label"]=_["aria-label"]);null!=_["aria-pressed"]&&(S["aria-pressed"]=_["aria-pressed"]);return(0,d.jsx)("button",(0,i.default)((0,i.default)({className:(0,r.default)(u.button,v&&u.focused,a&&u.disabled,m),"data-a8n":o.default.key(t),disabled:!0===a,onClick:c,onFocus:p,ref:g,title:h,type:f},S),{},{children:s}))};var i=a(s(81109)),n=a(s(6479)),r=a(s(56720)),o=a(s(76610)),l=a(s(2887)),d=s(85893);const u={button:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",fontFamily:"shdiholb",fontSize:"phqmzxqs",color:"gtscxtjd",cursor:"ajgl1lbb",backgroundColor:"thr4l2wc",borderTop:"cc8mgx9x",borderEnd:"eta5aym1",borderBottom:"d9802myq",borderStart:"e4xiuwjv"},focused:{borderTopStartRadius:"dntxsmpk",borderTopEndRadius:"ixn6u0rb",borderBottomEndRadius:"s2vc4xk1",borderBottomStartRadius:"o0wkt7aw",boxShadow:"lgxs6e1q"},disabled:{cursor:"rcg4vxlo"}}},30584:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(19887)),r=a(s(85051)),o=a(s(12950)),l=a(s(2408)),d=s(84065),u=a(s(79485)),c=a(s(2966)),h=a(s(23992)),f=s(85893);class p extends i.PureComponent{render(){const e=l.default.t(599),t=l.default.t(1701),{contact:s,presence:a}=this.props;let i,u;return i="list"===this.props.location||"info"===this.props.location?a.getUserSubtitleText():a.withholdDisplayStage===d.WithholdDisplayStage.Info?e:a.withholdDisplayStage===d.WithholdDisplayStage.Business?t:a.getUserSubtitleText()||(a.forceDisplay?"":e),i&&(u=(0,f.jsx)(n.default,{text:i,location:this.props.location})),"title"===this.props.location&&o.default.supportsFeature(o.default.F.VNAME_V_2)&&i!==e&&i!==t&&this.props.showBusinessCheckmark?(0,f.jsxs)("div",{className:h.default.wrapper,children:[(0,f.jsx)(r.default,{text:s.verifiedName,className:h.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),(0,f.jsx)("div",{className:h.default.icon,children:(0,f.jsx)(c.default,{name:"psa-verified"})}),u&&(0,f.jsx)("span",{className:h.default.divider,children:""}),u]}):u||null}}p.CONCERNS={contact:["name","verifiedName"],presence:["withholdDisplayStage","forceDisplay","hasData"],chatstate:["type","deny","t"]},p.displayName="UserSubtitle";var m=(0,u.default)(p,p.CONCERNS);t.default=m},92018:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(91952)),o=a(s(71681)),l=a(s(92741)),d=s(85893);class u extends n.PureComponent{constructor(...e){super(...e),this._videoRef=null,this._onPlayTriggered=!1,this.setRefVideo=e=>{this._videoRef&&this.props.listeners.remove(this._videoRef,"playing",this.onPlay),this._videoRef=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:this.props.src&&(e.src=this.props.src),this.props.listeners.add(e,"playing",this.onPlay),this.props.autoPlay&&e.play())},this.onPlay=()=>{const e=this._videoRef;e&&(e.videoHeight&&e.videoWidth||this._onPlayTriggered||(this._onPlayTriggered=!0,e.pause(),e.play(),__LOG__(4,void 0,new Error,!0)`Neither the height nor the width of video should have zero value`,SEND_LOGS("non-zero height and width")),e.videoHeight&&e.videoWidth&&this.props.onPlay&&(this.props.onPlay(e),this._onPlayTriggered=!1),this.props.muted||r.default.mediaPlaying(this))},this.onOtherPlaying=e=>{e!==this&&this._videoRef&&this._videoRef.pause()},this.onLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}componentDidMount(){this.props.controls&&this.props.listeners.add(r.default,"mediaPlaying",this.onOtherPlaying)}underlyingVideo(){return this._videoRef}play(){const e=this._videoRef;e&&e.paused&&e.play()}pauseAndReset(){const e=this._videoRef;e&&(e.currentTime=0,e.paused||e.pause())}getDuration(){return null==this._videoRef?null:this._videoRef.duration}render(){const e=this.props;return(0,d.jsx)("video",{ref:this.setRefVideo,className:(0,i.default)(l.default.video,e.className),muted:e.muted,controls:e.controls,controlsList:e.controlsList,width:e.width,height:e.height,loop:e.loop,onClick:e.onClick,onEnded:e.onEnded,onLoadedMetadata:this.onLoadedMetadata,style:e.style,children:e.children})}}u.displayName="Video";const c=(0,o.default)(u);t.default=class extends c{pauseAndReset(){return this.getComponent().pauseAndReset()}underlyingVideo(){return this.getComponent().underlyingVideo()}play(){return this.getComponent().play()}getDuration(){return this.getComponent().getDuration()}}},60669:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PlayerState=void 0;var i=a(s(81109)),n=a(s(18446)),r=s(67294),o=a(s(11062)),l=s(85893);function d(e){return(0,i.default)((0,i.default)({},e),{},{playerVars:(0,i.default)((0,i.default)({},e.playerVars),{},{autoplay:0,start:0,end:0})})}const u={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};t.PlayerState=u;class c extends r.Component{constructor(...e){super(...e),this.listeners=[],this.handlePlayerReady=e=>this.props.onReady(e),this.handlePlayerError=e=>this.props.onError(e),this.handlePlayerStateChange=e=>{switch(this.props.onStateChange(e),e.data){case u.ENDED:this.props.onEnd(e);break;case u.PLAYING:this.props.onPlay(e);break;case u.PAUSED:this.props.onPause(e)}},this.handlePlayerPlaybackRateChange=e=>this.props.onPlaybackRateChange(e),this.handlePlayerPlaybackQualityChange=e=>this.props.onPlaybackQualityChange(e),this.createPlayer=()=>{const e=(0,i.default)((0,i.default)({},this.props.opts),{},{videoId:this.props.videoId});this.internalPlayer=(0,o.default)(this.container,e),this.listeners.push(this.internalPlayer.on("ready",this.handlePlayerReady),this.internalPlayer.on("error",this.handlePlayerError),this.internalPlayer.on("stateChange",this.handlePlayerStateChange),this.internalPlayer.on("playbackRateChange",this.handlePlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.handlePlayerPlaybackQualityChange))},this.resetPlayer=()=>this.internalPlayer.destroy().then(this.createPlayer),this.updatePlayer=()=>{const e=this.internalPlayer.getIframe();this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.className?e.setAttribute("class",this.props.className):e.removeAttribute("class")},this.updateVideo=()=>{if(null==this.props.videoId)return void this.internalPlayer.stopVideo();let e,t,s=!1;"playerVars"in this.props.opts&&(s=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(e=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(t=this.props.opts.playerVars.end));const a={videoId:this.props.videoId,startSeconds:e,endSeconds:t};s?this.internalPlayer.loadVideoById(a):this.internalPlayer.cueVideoById(a)},this.refContainer=e=>{this.container=e}}componentDidMount(){this.createPlayer()}componentDidUpdate(e){(function(e,t){return e.id===t.id||e.className===t.className})(e,this.props)&&this.updatePlayer(),function(e,t){return!(0,n.default)(d(e.opts),d(t.opts))}(e,this.props)&&this.resetPlayer(),function(e,t){if(e.videoId!==t.videoId)return!0;const s=e.opts.playerVars||{},a=t.opts.playerVars||{};return s.start!==a.start||s.end!==a.end}(e,this.props)&&this.updateVideo()}componentWillUnmount(){this.listeners.forEach((e=>{this.internalPlayer.off(e)})),this.internalPlayer.destroy()}render(){return(0,l.jsx)("span",{className:this.props.containerClassName,children:(0,l.jsx)("div",{id:this.props.id,className:this.props.className,ref:this.refContainer})})}}c.defaultProps={id:null,className:null,opts:{playerVars:{}},containerClassName:"",onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},c.displayName="YouTube";var h=c;t.default=h},96203:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,u.default)(e.mute,["isMuted"]);const t=(0,u.default)(e.chat,["id"]),s=(0,u.default)(e.groupMetadata,["participants"]),a=e=>{const t=s.participants.get(e.id);return!(!t||!t.isAdmin)},h=e=>{(0,o.findChat)(e).then((e=>{t.quotedMsgAdminGroupJid=t.id,n.default.openChatBottom(e)}))},f=e=>{h(e.id),n.default.closeModal()},p=(0,c.jsx)("span",{role:"button",onClick:()=>{const e=s.participants.getAdmins();1!==e.length?n.default.openModal((0,c.jsx)(r.default,{title:l.default.t(1229),filter:a,onCancel:()=>n.default.closeModal(),onSelect:f})):h(e[0].id)},className:i.default.adminBtn,children:l.default.t(252)});return(0,c.jsx)(d.default,{id:251,params:{admins:p}})};var i=a(s(14237)),n=a(s(91952)),r=a(s(18260)),o=s(62238),l=a(s(2408)),d=a(s(663)),u=a(s(76006)),c=s(85893)},73237:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.onChangeNumberNotificationClick=v,t.default=function(e){const t=(0,p.default)(e.chat,["changeNumberOldJid","changeNumberNewJid","id","showChangeNumberNotification"]),s=()=>{const{changeNumberNewJid:e}=t,s=t.id;v((0,i.default)(e,"changeNumberNewJid"),s)},a=()=>{t.sendDismissChangeNumber()},{changeNumberOldJid:l,changeNumberNewJid:d,id:S}=t,C=void 0===l&&void 0!==d,y=void 0!==l&&void 0===d,E=(0,n.useMemo)((()=>{const e=l||S,t=u.default.get(e),s=t&&t.isMyContact?t.formattedName:(0,_.default)(e);return y?h.default.t(562,{name:s}):h.default.t(563,{name:s})}),[l,S,y]);let b=null;if(t.showChangeNumberNotification){const e=C?(0,g.jsx)("div",{className:o.default.messageNewNumberButton,children:(0,g.jsx)(r.default,{onClick:s,type:"plain-white",nowrap:!0,children:h.default.t(561)})}):null;b=(0,g.jsx)(c.default,{onClose:a,children:(0,g.jsxs)("div",{className:o.default.container,children:[(0,g.jsx)(f.TextSpan,{theme:"plain",className:o.default.text,children:E}),e]})})}return(0,g.jsx)(m.default,{transitionName:"butterbar",children:b})};var i=a(s(7900)),n=s(67294),r=a(s(69991)),o=a(s(80475)),l=a(s(84758)),d=a(s(91952)),u=a(s(17025)),c=a(s(93228)),h=a(s(2408)),f=s(97504),p=a(s(76006)),m=a(s(82669)),_=a(s(98532)),g=s(85893);function v(e,t){const s=l.default.gadd(e);s.changeNumberOldJid||(s.changeNumberOldJid=t),s.changeNumberNewJid=void 0,d.default.openChatFromUnread(s).then((e=>{e&&d.default.focusChatTextInput(s)}))}},91971:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s},t.setHasText=function(e){s=e};let s=!1},36029:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(48926)),r=i(s(81109)),o=i(s(94184)),l=s(55084),d=s(78285),u=i(s(7900)),c=s(67294),h=i(s(76610)),f=i(s(14505)),p=i(s(181)),m=i(s(45309)),_=i(s(26346)),g=i(s(15701)),v=s(82715),S=i(s(91952)),C=s(52646),y=i(s(22083)),E=i(s(17272)),b=i(s(75940)),T=i(s(55454)),M=i(s(92329)),x=i(s(69209)),I=i(s(61791)),P=s(60934),A=i(s(45801)),N=s(54647),O=a(s(13540)),w=i(s(89178)),D=s(57085),j=i(s(40854)),R=s(86723),L=i(s(22079)),k=i(s(12950)),F=s(78615),B=s(91971),G=i(s(39e3)),U=a(s(49288)),V=i(s(56165)),H=i(s(2408)),W=i(s(26976)),Y=i(s(22750)),K=s(67659),q=a(s(17126)),z=i(s(71681)),$=s(57990),Q=i(s(56346)),X=i(s(4231)),Z=i(s(52937)),J=i(s(49596)),ee=i(s(85599)),te=s(88340),se=s(83271),ae=i(s(1381)),ie=i(s(25952)),ne=i(s(16723)),re=s(86852),oe=i(s(199)),le=i(s(13727)),de=i(s(19895)),ue=s(42237),ce=i(s(88155)),he=s(30239),fe=i(s(65565)),pe=i(s(55174)),me=i(s(79485)),_e=s(15298),ge=i(s(2966)),ve=i(s(69217)),Se=a(s(49201)),Ce=i(s(63477)),ye=i(s(44503)),Ee=i(s(1458)),be=s(61192),Te=i(s(67392)),Me=s(85893);const xe=/^https?:\/\/media\.giphy\.com\/media\/([a-zA-Z0-9]+)/,Ie=parseInt(V.default["-overlay-border-left"].replace(/px$/,""),10);class Pe extends c.PureComponent{constructor(e){var t;super(e),t=this,this._height=0,this._pendingLinkPreviewPromises=[],this._linkPreviewAbortControllers=[],this._pasteTriggeredOnChange=!1,this._wasCleared=!1,this._refUie=(0,c.createRef)(),this._refContainer=(0,c.createRef)(),this._refComposeBlock=(0,c.createRef)(),this._refInputHotkey=(0,c.createRef)(),this._refComposeBoxInput=(0,c.createRef)(),this._refPanels=(0,c.createRef)(),this._refPttComposer=(0,c.createRef)(),this._dismissVcardPanel=()=>{(0,_e.unproxy)(this.props.chat).dismissVcard()},this._saveComposeContent=()=>{this.props.chat.setComposeContents({text:this._text,selection:this._selection,omittedURL:this._omittedURL,ctwaContextLinkData:this.state.ctwaContextLinkData,ctwaContext:this.state.ctwaContextData})},this._onTextSizeChange=e=>{this.setState({textsize:e})},this._pasteEmojiInput=e=>{if(" "===e&&!this._hasText())return S.default.scrollMessages();const t=this._refComposeBoxInput.current;null!=t&&(t.focus(!0),t.replaceSelection(e))},this._handleRoutedPaste=e=>{const t=this._refComposeBoxInput.current;null!=t&&(t.focus(!0),t.onPaste(e))},this._onMaxPasteExceeded=()=>{S.default.openModal((0,Me.jsx)(b.default,{title:H.default.t(1251),onOK:()=>{S.default.closeModal()},okText:H.default.t(2085),children:H.default.t(1250)}))},this._restoreFocus=()=>{var e;null===(e=this._refComposeBoxInput.current)||void 0===e||e.focus()},this._clearLinkPreview=()=>{this._preview=null,this._omitLinkPreview()},this._cancelPendingLinkPreviews=()=>{this._pendingLinkPreviewPromises.forEach((e=>e.cancel())),this._pendingLinkPreviewPromises=[],this._linkPreviewAbortControllers.forEach((e=>e.abort())),this._linkPreviewAbortControllers=[],!0===this.state.isLoadingLinkPreview&&this.setState({isLoadingLinkPreview:!1})},this._omitLinkPreview=(e=!1)=>{!0!==e&&this.state.linkPreview&&(this._omittedURL=this._preview,this.setState({linkPreview:null}))},this._omitQuotedPreview=(e=!1)=>{!0!==e&&(this.props.chat.composeQuotedMsg=null)},this._omitQuotedMsgAdminGroupNamePreview=(e=!1)=>{!0!==e&&(this.props.chat.quotedMsgAdminGroupJid=null)},this._findFirstWebLink=()=>{const e=(0,C.removeCodeBlocks)(this._text);return q.findLinks(e,!0)[0]},this._uploadHQPreview=e=>{const{thumbnailHQ:t}=e.data;if(!t)return Promise.resolve();const s=new f.default;return this._linkPreviewAbortControllers.push(s),Z.default.createFromBase64Jpeg(t).cancellable().then((e=>(0,ye.default)({thumbnail:e,mediaType:Q.default.THUMBNAIL_LINK,mediaKeyInfo:(0,de.default)(),uploadOrigin:(0,$.getUploadOriginForChat)(this.props.chat),forwardedFromWeb:!1,signal:s.signal,timeout:T.default.MMS_THUMBNAIL_UPLOAD_TIMEOUT}))).then((t=>{const s=t.mediaEntry;if(!s)return;const a={mediaKey:s.mediaKey,mediaKeyTimestamp:s.mediaKeyTimestamp,thumbnailDirectPath:s.directPath,thumbnailSha256:t.filehash,thumbnailEncSha256:s.encFilehash};if(this.state.linkPreview&&this.state.linkPreview.url===e.url){const t=(0,r.default)((0,r.default)({},e),{},{data:(0,r.default)((0,r.default)({},e.data),a)});this.setState({linkPreview:t})}})).catch((0,l.filteredCatch)(Promise.CancellationError,(()=>{}))).catch((()=>{__LOG__(2)`Full preview upload has failed: `}))},this._scanForLinksTimer=new d.ShiftTimer((()=>{if(!this.state.hasText||this.state.ctwaContextLinkData)return void this._clearLinkPreview();const e=this._findFirstWebLink();if(!e)return void this._clearLinkPreview();const t=e.url;if(this._preview&&this._preview===t)return;this._preview=t,this._omittedURL=null;const s=(0,K.hqLinkPreviewUploadSupported)(),a=(0,Y.default)(t,s).cancellable().then((e=>{if(e&&this._preview&&this._preview===e.url&&e.data&&(e.data.title||e.data.description))return this.setState({linkPreview:e}),this._uploadHQPreview(e)}));this._pendingLinkPreviewPromises.push(a),a.catch((0,l.filteredCatch)([O.Unmount,N.WebdDrop,Promise.CancellationError],(()=>{})))})),this._onInputFocus=()=>{this._indicateFocus(),this._addEmojisToTouchBar()},this._onInputBlur=()=>{this._removeEmojisFromTouchBar()},this._onVoiceRecordingSent=()=>{this._omitCtwa()},this._setChatCtwaContextLinkData=e=>{this.setState({ctwaContextLinkData:e,ctwaContextData:null},(()=>{this._updateCtwaContextState(e)}))},this._omitCtwa=()=>{this.setState({ctwaContextLinkData:null,ctwaContextData:null},(()=>{this._saveComposeContent(),this._scanForLinksTimer.onOrBefore(1)}))},this._indicateFocus=()=>{var e,t;null===(e=this._refUie.current)||void 0===e||e.activate(),j.default.maybeIndicateFocus(this._refInputHotkey.current,V.default.focusAnimation),null===(t=this._refComposeBoxInput.current)||void 0===t||t.focus(!1)},this._addEmojisToTouchBar=()=>{},this._removeEmojisFromTouchBar=()=>{},this._onPageUpDown=e=>{this.props.onPageUpDown&&(e.stopPropagation(),this.props.onPageUpDown(e),this._restoreFocusTimer.debounce(0))},this._restoreFocusTimer=new d.ShiftTimer((()=>{var e;null===(e=this._refComposeBoxInput.current)||void 0===e||e.focus(!1)})),this._handleEmoji=e=>{var t;null===(t=this._refComposeBoxInput.current)||void 0===t||t.replaceSelection(e)},this._handleGif=(e,t,s)=>{const a=(0,w.default)(e,{headers:{Accept:"video/mp4"}}).then((e=>{if(!e.ok)throw __LOG__(3)`failed loading gif (status: ${e.status})`,new O.MediaFileFailedLoad;return e.blob()})).then((e=>U.generateVideoThumbsAndDuration({file:e,maxDimensions:[T.default.IMG_THUMB_MAX_EDGE],debugHint:"handleGif"}).then((({thumbs:[a],duration:i})=>({file:e,filename:t,mimetype:e.type,isGif:!0,gifAttribution:s,fullPreview:window.URL.createObjectURL(e),fullPreviewSize:{width:a.fullWidth,height:a.fullHeight},preview:Ee.default.parseDataURL(a.url).data,duration:i})))));return this.saveComposeContentDebounced.flush(),S.default.attachMediaDrawer({chat:this.props.chat,attachments:[a],initCaption:this.getCurrentComposeContent(),fileOrigin:X.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_GIF_INAPP,onComplete:(e,t)=>{this.updateTextAfterMediaDrawerClose(e,t),e&&this._closeEmojiPanel()}}),a.catch((()=>{})),a},this._handlePanelsDisplayCache=e=>{this._panelsDisplayCache=e},this._handlePanelsGif=(e,t)=>{this._handleGif(e,e,t)},this._handlePanelsSticker=(e,t)=>{e.sendToChat((0,_e.unproxy)(this.props.chat),t),this._omitCtwa()},this._handlePanelsFocusRelease=()=>{j.default.shouldIndicateFocus(),this._restoreFocus()},this._closeEmojiPanel=()=>{this._setSelectedPanelId(null),this._restoreFocus()},this._onPTTRecState=e=>{this.setState({recording:e})},this._preventBlur=e=>{var t,s;let{target:a}=e;const i=null===(t=this._refComposeBoxInput.current)||void 0===t?void 0:t.getRefInput(),n=(0,u.default)(this._refContainer.current,"this._refContainer.current");do{if(a===i)return}while(a!==n&&a instanceof HTMLElement&&(a=a.parentNode));Oe(e),null===(s=this._refComposeBoxInput.current)||void 0===s||s.focus(!1)},this._onChange=e=>{const t=(0,u.default)(this._refComposeBlock.current,"this._refComposeBlock.current").clientHeight,s=t-this._height;s&&this.props.onComposeHeightChange({input:s},!1),this._height=t;const a=this._hasText();this._text=e||"",""===e&&(this._wasCleared=!0);const i=this._hasText();i!==a&&this.setState({hasText:i}),i?(this.props.chat.presence.subscribe().catch((0,l.filteredCatch)(N.WebdDrop,(()=>{}))),(0,se.markComposing)(this.props.chat),(0,A.default)(this.props.chat)):(0,se.markPaused)(this.props.chat);const n=this._findFirstWebLink();(!n&&this._preview||n&&n.url!==this._preview)&&this._clearLinkPreview(),this._pasteTriggeredOnChange?this._scanForLinksTimer.onOrBefore(1):this._scanForLinksTimer.debounce(700),this._pasteTriggeredOnChange=!1,this.saveComposeContentDebounced()},this._startRecording=(0,n.default)((function*(){const e=(0,u.default)(t._refPttComposer.current,"_this._refPttComposer.current");(yield e.start())&&t.setState({pttComposerActive:!0})})),this._renderSendButton=()=>{const e=L.default&&window.AudioContext,{hasText:t}=this.state,s=!t&&e;return s&&!fe.default.pttDraftEnabled?(0,Me.jsx)(ie.default,{chat:(0,_e.unproxy)(this.props.chat),onRecState:this._onPTTRecState,onRecordingSent:this._onVoiceRecordingSent},"ptt"):s?(0,Me.jsx)(ne.default,{disabled:this.state.pttComposerActive,onConfirm:()=>{this._startRecording()}}):(0,Me.jsx)("button",{"data-a8n":h.default.key("compose-btn-send"),className:V.default.btnSend,onClick:this._onSendText,disabled:!t,children:(0,Me.jsx)(ge.default,{name:"send",directional:!0})})},this._renderPopupPanel=()=>{let e;if(this.state.linkPreview){const{title:t,canonicalUrl:s,description:a,thumbnail:i}=this.state.linkPreview.data;e=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(Ce.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:this._omitLinkPreview,children:(0,Me.jsx)(ee.default,{onOmit:this._omitLinkPreview,children:(0,Me.jsx)(W.default,{title:t,compose:!0,canonicalUrl:s,description:a,thumbnailJpeg:i})})})})}const t=this.props.chat.composeQuotedMsg,s=this.props.chat.quotedMsgAdminGroupJid,a=this.props.chat.composeQuotedMsgRemoteJid;let i;t?i=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(Ce.default,{displayName:"ComposeBoxQuotedMsg",escapable:!0,requestFocus:this._restoreFocus,requestDismiss:this._omitQuotedPreview,children:(0,Me.jsx)(ee.default,{onOmit:this._omitQuotedPreview,children:(0,Me.jsx)(oe.default,{msg:t.safe(),composeQuotedMsgRemoteJid:a,theme:"composeBox",chat:t.chat},t.id.toString())})})}):s&&(i=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(Ce.default,{displayName:"QuotedMsgAdminGroupName",escapable:!0,requestFocus:this._restoreFocus,requestDismiss:this._omitQuotedPreview,children:(0,Me.jsx)(ee.default,{onOmit:this._omitQuotedMsgAdminGroupNamePreview,children:(0,Me.jsx)(le.default,{isComposePreview:!0,quotedGroupJid:s},s.toString())})})}));const n=(0,_e.unproxy)(this.props.chat),r=!n.isPSA&&n.shouldAppearInList&&n.msgs&&n.msgs.length>0;let o=null;if(r){const e=g.default.get(n.id),t=n.getReceivedVcardMsgs();Boolean(!e&&t&&t.length&&!n.vcardDismissed)&&(o=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(Te.default,{chat:n,dismissVcardPanel:this._dismissVcardPanel})}))}let l=null;!n.trusted&&r&&null==o&&(l=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(pe.default,{chat:n,contact:n.contact})}));let d,u=null;return this.state.selectedPanelId&&null!=this.state.width&&(u=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(ce.default,{onResize:this._handleResize,children:(0,Me.jsx)(E.default,{displayCache:this._panelsDisplayCache,width:this.state.width,onDisplayCache:this._handlePanelsDisplayCache,onEmoji:this._handleEmoji,onFocusRelease:this._handlePanelsFocusRelease,onGif:this._handlePanelsGif,onPanelChange:this._handlePanelChange,onSticker:this._handlePanelsSticker,requestDismiss:this._closeEmojiPanel,forwardedRef:e=>{this._refPanels.current=e},selectedPanelId:this.state.selectedPanelId})})})),this.state.ctwaContextLinkData&&(d=(0,Me.jsx)(m.default,{children:(0,Me.jsx)(Ce.default,{displayName:"ComposeBoxCtwaContextPreview",escapable:!0,requestDismiss:this._omitCtwa,children:(0,Me.jsx)(ee.default,{onOmit:this._omitCtwa,children:(0,Me.jsx)(I.default,{context:this.state.ctwaContextData,sourceUrl:this.state.ctwaContextLinkData.sourceUrl,compose:!0})})})})),(0,Me.jsx)("div",{className:V.default.positioningContainer,children:(0,Me.jsx)("div",{className:V.default.overlayContainer,children:(0,Me.jsxs)(p.default,{onHeightChange:this._onHeightChange,children:[l,o,u,i,e,d]})})})},this._onHeightChange=(e,t=!1)=>{this.props.onComposeHeightChange({overlay:e},t)},this._onFiles=e=>{const t=e.getFiles().filter((e=>{const t=(0,D.typeFromMimetype)(e.type);return"image"===t||"video"===t}));if(e.hasType("text/html")){const t=e.getData("text/html");if(t){if(t.includes("<meta name=ProgId content=PowerPoint.Slide>"))return!1;const e=t.includes("urn:schemas-microsoft-com:office"),s=t.includes("urn:schemas-microsoft-com:office:excel");if(e&&!s)return!1}}if(t.length)return this.saveComposeContentDebounced.flush(),S.default.attachMediaDrawer({chat:this.props.chat,attachments:t.map((e=>({file:e}))),fileOrigin:X.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE,initCaption:this.getCurrentComposeContent(),onComplete:this.updateTextAfterMediaDrawerClose}),!0},this.updateTextAfterMediaDrawerClose=(e,t={})=>{const{initCaptionUsed:s}=t;var a;e&&s&&(null===(a=this._refComposeBoxInput.current)||void 0===a||a.reset());e&&this._omitCtwa()},this.getCurrentComposeContent=()=>this.props.chat.getComposeContents(),this._onTextPaste=e=>{const t=xe.exec(e);if(t){const s=`https://media.giphy.com/media/${t[1]}/200w.mp4`;return this._handleGif(s,e,P.VideoMessageAttribution.GIPHY).catch((()=>{S.default.closeDrawerMid();const t=this._refComposeBoxInput.current;null!=t&&(t.focus(!0),t.replaceSelection(e)),S.default.openToast((0,Me.jsx)(Se.default,{msg:H.default.t(1205),id:(0,Se.genId)()}))})),!0}return this._pasteTriggeredOnChange=!0,!1},this._onSelectionChange=e=>{this._selection=e},this._hasText=()=>{const e=this._text.trim().length>0;return(0,B.setHasText)(e),e},this._onEnter=e=>{e&&e.repeat||this._onSendText()},this._onSendText=()=>{var e;(0,ue.reconnect)();const t=this._refComposeBoxInput.current,{chat:s}=this.props;if(!t)return;const a=t.serialize(),[i,n]=[a[0].trim(),a[1]];if(0===i.length&&!this.state.ctwaContextLinkData)return;this._cancelPendingLinkPreviews();const r=s.composeQuotedMsg,o=s.quotedMsgAdminGroupJid,l=null===(e=this.state.linkPreview)||void 0===e?void 0:e.data,d=n.mentionedJidList||[],u=(0,te.prepareCtwaContextSend)(this.state.ctwaContextLinkData,this.state.ctwaContextData),c=this._wasCleared;this._setSelectedPanelId(null),this.setState({hasText:!1,linkPreview:null},(()=>{if(c){const e=(0,_e.unproxy)(s);e.urlText&&(e.urlText=void 0)}(0,he.sendTextMsgToChat)(s,i,{linkPreview:l,quotedMsg:r,mentionedJidList:d,quotedMsgAdminGroupJid:o,ctwaContext:u}),this._wasCleared=!1})),this._omitCtwa(),s.composeQuotedMsg=null,s.quotedMsgAdminGroupJid=null,s.composeQuotedMsgRemoteJid=null,s.setComposeContents({}),t.reset(),this._text="",this._hasText()},this._handlePanelChange=e=>{this._setSelectedPanelId(e),null!=e&&(0,R.setLastComposeBoxPanel)(e)},this._handleTab=e=>{var t;this.state.selectedPanelId&&(null===(t=this._refPanels.current)||void 0===t||t.restoreFocus(!0),Oe(e))},this._handleResize=({width:e})=>{this.state.width!==e&&this.setState({width:e})},this._handlePttComposerCancel=()=>{this.setState({pttComposerActive:!1})},this._handlePttComposerSend=()=>{this.setState({pttComposerActive:!1})};const{chat:s}=e,a=s.getComposeContents();this._text=a.text||"",this._selection=a.selection,this._preview=this._omittedURL=a.omittedURL,this.saveComposeContentDebounced=this.props.debounce(this._saveComposeContent,200),this.state={hasText:!!this._text,recording:!1,linkPreview:null,isLoadingLinkPreview:!1,pttComposerActive:!1,selectedPanelId:null,textsize:M.default.get().textsize,width:null,ctwaContextLinkData:a.ctwaContextLinkData,ctwaContextData:a.ctwaContext}}componentDidMount(){const{listeners:e,chat:t}=this.props;if(this.props.listeners.add(g.default,"add remove reset",(()=>{this.forceUpdate()})),k.default.supportsFeature(k.default.F.INDEX_RECEIVED_VCARD)){const s=t.getReceivedVcardMsgs();s&&e.add(s,"add remove reset",(()=>{this.forceUpdate()}))}this._height=(0,u.default)(this._refComposeBlock.current,"this._refComposeBlock.current").clientHeight,this._scanForLinksTimer.debounceAndCap(50,50);const{ctwaContextLinkData:s}=this.state;!s||this.state.ctwaContextData&&this.state.ctwaContextData.sourceUrl===s.sourceUrl||this.setState({ctwaContextData:null},(()=>{this._updateCtwaContextState(s)}))}componentWillUnmount(){this._scanForLinksTimer.cancel(),this._pendingLinkPreviewPromises.forEach((e=>e.cancel())),this._pendingLinkPreviewPromises=[],this._linkPreviewAbortControllers.forEach((e=>e.abort())),this._linkPreviewAbortControllers=[],this._restoreFocusTimer.cancel(),this._saveComposeContent(),this._removeEmojisFromTouchBar()}_updateCtwaContextState(e){this._saveComposeContent(),this._clearLinkPreview();e.sourceUrl&&(0,re.fetchCtwaContextData)(e).then((e=>{this.setState({ctwaContextData:e},(()=>{this._saveComposeContent()}))})).catch((e=>{__LOG__(3)`Unable to retrieve CTWA context data, error: ${e}`}))}_setSelectedPanelId(e){const t=null==this.state.selectedPanelId&&null!=e;this.setState({selectedPanelId:e,width:t&&null!=this._refComposeBlock.current?this._refComposeBlock.current.offsetWidth-Ie:this.state.width})}_renderInput(){return(0,Me.jsx)(y.default,{a8n:"conversation-compose-box-input",placeholder:H.default.t(1706),readOnly:this.state.pttComposerActive,ref:this._refComposeBoxInput,initialValue:this._text,initialSelection:this._selection,spellCheck:!0,multiline:!0,maxLength:T.default.MAX_TXT_MSG_SIZE,onMaxPasteExceeded:this._onMaxPasteExceeded,onEnter:this._onEnter,onFiles:this._onFiles,onTextPaste:this._onTextPaste,onChange:this._onChange,onSelect:this._onSelectionChange,textPasteMimePriority:[v.APP_TEXT_MIMETYPE,"text/plain"],theme:"compose"})}_renderPttComposer(){return fe.default.pttDraftEnabled?(0,Me.jsx)("div",{className:V.default.pttComposerContainer,children:(0,Me.jsx)(ae.default,{ref:this._refPttComposer,active:this.state.pttComposerActive,chat:(0,_e.unproxy)(this.props.chat),onCancel:this._handlePttComposerCancel,onSend:this._handlePttComposerSend})}):null}render(){return(0,Me.jsx)(Ce.default,{displayName:"ComposeBox",ref:this._refUie,uimState:Ce.default.State.PASSIVE,requestFocus:this._restoreFocus,children:(0,Me.jsxs)(G.default,{component:"footer",handlers:{pagedown:this._onPageUpDown,pageup:this._onPageUpDown},className:(0,o.default)(V.default.footer,{[V.default.pttDraftPreviewDisabled]:!fe.default.pttDraftEnabled,[V.default.pttComposerActive]:this.state.pttComposerActive}),onRef:e=>{this._refContainer.current=e},onContextMenu:this._preventBlur,onMouseDown:this._preventBlur,children:[null,(0,Me.jsx)(x.default,{canCut:!0,className:(0,o.default)(V.default.blockCompose,we(this.state.textsize)),ref:this._refComposeBlock,children:(0,Me.jsxs)("div",{className:V.default.mainContentContainer,children:[(0,Me.jsxs)("div",{className:V.default.textMessageComposerContainer,children:[(0,Me.jsxs)("div",{className:(0,o.default)(V.default.childPadding,V.default.boxPanelWrapper),children:[(0,Me.jsx)(J.default,{selectedPanelId:this.state.selectedPanelId,onChange:this._handlePanelChange,readOnly:this.state.pttComposerActive}),(0,Me.jsx)("div",{className:V.default.attachButtonContainer,children:(0,Me.jsx)(_.default,{chat:(0,_e.unproxy)(this.props.chat),getComposeContents:this.getCurrentComposeContent,onMenuComplete:this.updateTextAfterMediaDrawerClose})})]}),(0,Me.jsxs)("div",{className:V.default.textMessageComposerInputContainer,children:[(0,Me.jsx)(G.default,{onRef:e=>{this._refInputHotkey.current=e},className:(0,o.default)(V.default.inputContainer,{[V.default.disabled]:this.state.recording}),handlers:{tab:this._handleTab,"shift+tab":this._handleTab},onFocus:this._onInputFocus,onBlur:this._onInputBlur,children:this._renderInput()}),(0,Me.jsx)("div",{className:(0,o.default)(V.default.childPadding,V.default.sendButtonContainer),children:this._renderSendButton()})]})]}),this._renderPttComposer()]})}),this._renderPopupPanel(),(0,Me.jsx)(y.default.EmojiSuggestions,{chat:(0,_e.unproxy)(this.props.chat)}),(0,Me.jsx)(Ne,{chatId:this.props.chat.id,restoreFocus:this._restoreFocus,pasteEmojiInput:this._pasteEmojiInput,handleRoutedPaste:this._handleRoutedPaste,onSendText:this._onSendText,onTextSizeChange:this._onTextSizeChange,setChatCtwaContextLinkData:this._setChatCtwaContextLinkData},this.props.chat.id.toString()),(0,Me.jsx)(y.default.Suggestions,{chat:(0,_e.unproxy)(this.props.chat)}),(0,F.canSendQuickReply)()&&(0,Me.jsx)(y.default.QuickRepliesSuggestions,{chat:(0,_e.unproxy)(this.props.chat)})]})})}}Pe.CONCERNS={chat:["id","trusted","composeContents","composeQuotedMsg","isPSA","isGroup","shouldAppearInList","presence","contact","attachMediaContents","quotedMsgAdminGroupJid","receivedVcardMsgs","vcardDismissed","composeQuotedMsgRemoteJid"]},Pe.displayName="ComposeBox";const Ae=(0,ve.default)((0,z.default)((0,me.default)(Pe,Pe.CONCERNS)));function Ne(e){const{chatId:t}=e;return(0,be.useListener)(S.default,`focus_chat_text_input_${t.toString()}`,e.restoreFocus),(0,be.useListener)(S.default,`paste_chat_text_input_${t.toString()}`,e.pasteEmojiInput),(0,be.useListener)(S.default,`send_paste_to_compose_${t.toString()}`,e.handleRoutedPaste),(0,be.useListener)(S.default,`enter_chat_text_input_${t.toString()}`,e.onSendText),(0,be.useListener)(S.default,`chat_set_ctwa_context_link_data_${t.toString()}`,e.setChatCtwaContextLinkData),(0,be.useListener)(S.default,"focus_chat_text_input",e.restoreFocus),(0,be.useListener)(S.default,"textsize_change",e.onTextSizeChange),null}function Oe(e){e&&(e.preventDefault(),e.stopPropagation())}function we(e){const t=T.default.TEXTSIZE_CLASS_MAP;for(let s=0;s<t.length;s++)if(t[s].scale===e)return t[s].classname}t.default=class extends Ae{constructor(...e){super(...e),this.updateTextAfterMediaDrawerClose=(e,t)=>{this.getComponent().updateTextAfterMediaDrawerClose(e,t)}}flushSaveComposeContentDebounced(){this.getComponent().saveComposeContentDebounced.flush()}getCurrentComposeContent(){return this.getComponent().getCurrentComposeContent()}}},95535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PANELS=void 0;t.PANELS={EMOJI:"EMOJI",GIF:"GIF",STICKER:"STICKER"}},96699:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{forwardedRef:t}=e,s=(0,r.default)(e,["forwardedRef"]);return(0,_.jsx)(g,(0,n.default)({ref:t},s))};var n=i(s(81109)),r=i(s(6479)),o=s(67294),l=(s(15140),a(s(91137))),d=i(s(72292)),u=i(s(12950)),c=s(95535),h=a(s(3754)),f=i(s(63477)),p=a(s(30023)),m=i(s(65565)),_=s(85893);class g extends o.PureComponent{constructor(e){super(e),this.restoreFocus=e=>{switch(this.props.selectedPanelId){case c.PANELS.STICKER:this._refStickerPanel&&this._refStickerPanel.restoreFocus();break;case c.PANELS.GIF:this._refGifPanel&&this._refGifPanel.restoreFocus(e);break;case c.PANELS.EMOJI:default:this._refEmojiPanel&&this._refEmojiPanel.restoreFocus(e)}},this._setRefEmojiPanel=e=>{this._refEmojiPanel=e},this._setRefGifPanel=e=>{this._refGifPanel=e},this._setRefStickerPanel=e=>{this._refStickerPanel=e},this._setRefStickerPanelMd=e=>{this._refStickerPanel=e},this._handleEmojiPanelDisplayCache=e=>{this._emojiPanelDisplayCache=e,this._triggerDisplayCache()},this._handleEmojiPanelFocusNext=()=>{this.props.onPanelChange(c.PANELS.GIF)},this._handleEmojiPanelFocusPrev=()=>{this.props.onFocusRelease()},this._handleGifPanelDisplayCache=e=>{this._gifPanelDisplayCache=e,this._triggerDisplayCache()},this._handleTextChange=e=>{this.setState({searchText:e})},this._handleGifPanelFocusNext=()=>{this.props.onPanelChange(c.PANELS.STICKER)},this._handleGifPanelFocusPrev=()=>{this.props.onPanelChange(c.PANELS.EMOJI)},this._handleRequestFocus=()=>{this.restoreFocus(!1)},this._handleStickerPanelDisplayCache=e=>{this._stickerPanelDisplayCache=e,this._triggerDisplayCache()},this._handleStickerPanelFocusNext=()=>{this.props.onFocusRelease()},this._handleStickerPanelFocusPrev=()=>{this.props.onPanelChange(c.PANELS.GIF)},e.displayCache&&(this._emojiPanelDisplayCache=e.displayCache.emojiPanel,this._gifPanelDisplayCache=e.displayCache.gifPanel,this._stickerPanelDisplayCache=e.displayCache.stickerPanel),this.state={searchText:""}}_triggerDisplayCache(){this.props.onDisplayCache({emojiPanel:this._emojiPanelDisplayCache,gifPanel:this._gifPanelDisplayCache,stickerPanel:this._stickerPanelDisplayCache})}render(){let e=null;switch(this.props.selectedPanelId){case c.PANELS.STICKER:u.default.supportsFeature(u.default.F.MD_BACKEND)?m.default.webServerStickerPanel&&(e=(0,_.jsx)(p.default,{ref:this._setRefStickerPanelMd,displayLocation:p.DisplayLocation.ComposeBox,displayCache:this._stickerPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker})):e=(0,_.jsx)(h.default,{ref:this._setRefStickerPanel,displayCache:this._stickerPanelDisplayCache,displayLocation:h.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker});break;case c.PANELS.EMOJI:default:e=(0,_.jsx)(l.default,{ref:this._setRefEmojiPanel,displayCache:this._emojiPanelDisplayCache,width:this.props.width,displayLocation:l.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleEmojiPanelDisplayCache,onEmoji:this.props.onEmoji,onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext});break;case c.PANELS.GIF:e=(0,_.jsx)(d.default,{ref:this._setRefGifPanel,displayCache:this._gifPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleGifPanelDisplayCache,onFocusRelease:this.props.onFocusRelease,onFocusNext:this._handleGifPanelFocusNext,onFocusPrev:this._handleGifPanelFocusPrev,onGif:this.props.onGif})}return e&&(0,_.jsx)(f.default,{displayName:"ComposeBoxPanels",escapable:!0,requestDismiss:this.props.requestDismiss,requestFocus:this._handleRequestFocus,children:e})}}g.displayName="ComposeBoxPanels"},49596:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.useRef)(),s=(0,r.useRef)(),a=(0,r.useRef)(),i=(0,r.useRef)(),S=(0,r.useRef)(),C=t=>{e.onChange(t)};(0,g.useListener)(l.default,"open_compose_box_panel",C);const{readOnly:y}=e,E=Boolean(e.selectedPanelId),b=!c.default.supportsFeature(c.default.F.MD_BACKEND)||_.default.webServerStickerPanel;return(0,v.jsxs)("div",{"data-state":E?"open":"closed",ref:e=>{S.current=e},className:(0,n.default)(p.default.menu,{[p.default.open]:E,[p.default.full]:b}),children:[(0,v.jsx)(m.default,{"aria-label":h.default.t(7),className:(0,n.default)(p.default.button,p.default.closeButton),"data-tab":E&&!y?d.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON:null,icon:"x",onClick:()=>{e.onChange(null)},ref:t,size:m.SIZES.SQUARE24}),(0,v.jsx)(m.default,{"aria-label":h.default.t(30),className:(0,n.default)(p.default.button,p.default.firstButton),"data-a8n":o.default.key("compose-btn-emoji"),"data-tab":E||y?null:d.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON,icon:"smiley",isActive:e.selectedPanelId===f.PANELS.EMOJI,isMain:!0,onClick:()=>{Boolean(e.selectedPanelId)?C(f.PANELS.EMOJI):e.onChange((0,u.getLastComposeBoxPanel)()||f.PANELS.EMOJI)},ref:s,size:m.SIZES.SQUARE26}),(0,v.jsx)(m.default,{"aria-label":h.default.t(31),className:(0,n.default)(p.default.button,p.default.secondButton),icon:"gif",isActive:e.selectedPanelId===f.PANELS.GIF,onClick:()=>C(f.PANELS.GIF),ref:a,size:m.SIZES.SQUARE26}),b&&(0,v.jsx)(m.default,{"aria-label":h.default.t(33),className:(0,n.default)(p.default.button,p.default.thirdButton),icon:"sticker",isActive:e.selectedPanelId===f.PANELS.STICKER,onClick:()=>C(f.PANELS.STICKER),ref:i,size:m.SIZES.SQUARE26})]})},t.OPEN_MENU_WIDTH=void 0;var n=i(s(94184)),r=s(67294),o=i(s(76610)),l=i(s(91952)),d=i(s(55454)),u=s(86723),c=i(s(12950)),h=i(s(2408)),f=s(95535),p=i(s(46432)),m=a(s(54207)),_=i(s(65565)),g=s(61192),v=s(85893);const S=parseInt(p.default["-open-menu-width"].replace(/px$/,""),10);t.OPEN_MENU_WIDTH=S},54207:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZES=t.ITEM_SPACING=t.ITEM_WIDTH=void 0;var i=a(s(94184)),n=s(67294),r=a(s(39e3)),o=a(s(60662)),l=a(s(2966)),d=a(s(33155)),u=s(85893);const c=parseInt(o.default["-item-width"].replace(/px$/,""),10);t.ITEM_WIDTH=c;const h=parseInt(o.default["-item-spacing"].replace(/px$/,""),10);t.ITEM_SPACING=h;const f={SQUARE24:"SQUARE24",SQUARE26:"SQUARE26"};t.SIZES=f;const p=(0,n.forwardRef)(((e,t)=>{const s=t=>{t.stopPropagation(),t.preventDefault(),e.onClick()},a=(0,d.default)(t);return(0,u.jsx)(r.default,{component:"button",className:(0,i.default)(o.default.container,e.className,{[o.default.active]:e.isActive,[o.default.top]:e.isMain||e.singleButton,[o.default.padding]:e.singleButton,[o.default.square24]:e.size===f.SQUARE24,[o.default.square26]:e.size===f.SQUARE26}),"aria-label":e["aria-label"],"data-tab":e["data-tab"],"data-a8n":e["data-a8n"],onClick:()=>{e.onClick()},onRef:a,handlers:{enter:s,space:s},children:(0,u.jsx)(l.default,{name:e.icon})})}));var m=(0,n.memo)(p);t.default=m},85599:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(86667)),r=a(s(2966)),o=s(85893);var l=(0,i.forwardRef)(((e,t)=>{const s=(0,i.useRef)();return(0,i.useImperativeHandle)(t,(()=>({getElement:()=>s.current}))),(0,o.jsxs)("div",{className:n.default.panel,ref:s,children:[(0,o.jsx)("div",{className:n.default.body,children:e.children}),(0,o.jsx)("div",{className:n.default.cancelButton,children:(0,o.jsx)("div",{role:"button",onClick:e.onOmit,children:(0,o.jsx)(r.default,{name:"x"})})})]})}));t.default=l},6055:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttCancelButton=t.PttSendButton=void 0;var i=a(s(94184)),n=a(s(7900)),r=s(67294),o=a(s(76610)),l=a(s(55454)),d=a(s(36251)),u=a(s(2408)),c=a(s(67433)),h=a(s(2966)),f=s(85893);const{KEYBOARD_EVENT_KEY_VALUE:p}=d.default,m=(0,r.forwardRef)(((e,t)=>(0,f.jsx)(g,{ref:t,a8nKey:"ptt-send-btn",className:c.default.btnSend,ariaLabel:u.default.t(39),iconName:"round-send",invertedIconName:"round-send-inv",onConfirm:e.onConfirm})));t.PttSendButton=m;const _=(0,r.forwardRef)(((e,t)=>(0,f.jsx)(g,{ref:t,a8nKey:"ptt-cancel-btn",className:c.default.btnCancel,ariaLabel:u.default.t(37),iconName:"round-x",invertedIconName:"round-x-inv",onConfirm:e.onConfirm})));t.PttCancelButton=_;const g=(0,r.forwardRef)(((e,t)=>{const s=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>({focus:()=>(0,n.default)(s.current,"buttonRef.current").focus()})));const[a,d]=(0,r.useState)(!1),u=(0,i.default)(e.className,c.default.btnBorder,{[c.default.hovered]:a});return(0,f.jsxs)("button",{ref:s,"data-a8n":o.default.key(e.a8nKey),"data-tab":l.default.TAB_ORDERS.PTT_BUTTON,className:u,onMouseOver:()=>{d(!0)},onMouseOut:()=>{d(!1)},onMouseUp:()=>{e.onConfirm()},onKeyPress:t=>{t.key!==p.ENTER&&t.key!==p.SPACE||(t.preventDefault(),t.stopPropagation(),e.onConfirm())},"aria-label":e.ariaLabel,"data-animate-btn-border":!0,children:[(0,f.jsx)("div",{className:(0,i.default)(c.default.btnBorderIcon,c.default.btnStateDefault),children:(0,f.jsx)(h.default,{name:e.iconName})}),(0,f.jsx)("div",{className:(0,i.default)(c.default.btnBorderIcon,c.default.btnStateHover),children:(0,f.jsx)(h.default,{name:e.invertedIconName})})]})}))},28581:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=s(38512),o=i(s(52218)),l=i(s(91952)),d=i(s(75940)),u=i(s(47904)),c=a(s(9492)),h=i(s(47452)),f=s(78615),p=i(s(2408)),m=i(s(663)),_=i(s(71681)),g=i(s(78746)),v=i(s(78972)),S=i(s(19582)),C=s(84254),y=i(s(87947)),E=s(48224),b=i(s(79485)),T=i(s(46364)),M=s(85893);class x extends n.PureComponent{constructor(...e){super(...e),this._refDropdown=(0,n.createRef)(),this.getElement=()=>this._refDropdown.current,this._forceUpdate=()=>{this.forceUpdate()},this.reportSpam=()=>{(0,C.sendSpamReport)(this.props.chat,E.SpamFlow.Dropdown),l.default.closeModal()},this.reportSpamBlock=()=>{const{chat:e,contact:t}=this.props;(0,C.sendSpamReport)(e,E.SpamFlow.Block),(0,r.blockContact)(t),l.default.closeModal()},this.reportSpamBlockClear=()=>{(0,C.sendSpamBlockClear)(this.props.chat,E.SpamFlow.Block),l.default.closeModal()},this.onReportSpam=()=>{l.default.openModal((0,M.jsx)(S.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>l.default.closeModal()}))},this.blockContact=()=>{(0,r.blockContact)(this.props.contact),l.default.closeModal()},this.unblockContact=()=>{(0,r.unblockContact)(this.props.contact),l.default.closeModal()},this.onBlockContact=()=>{l.default.openModal((0,M.jsx)(o.default,{contact:this.props.contact,onCancel:()=>l.default.closeModal(),onBlock:this.blockContact,onReportSpamBlock:this.reportSpamBlock}))},this.onUnblockContact=()=>{const e=(0,M.jsx)(v.default,{contact:this.props.contact});l.default.openModal((0,M.jsx)(d.default,{okText:p.default.t(1709),onOK:this.unblockContact,cancelText:p.default.t(1912),onCancel:()=>l.default.closeModal(),children:(0,M.jsx)(m.default,{id:1710,params:{contact:e}})}))},this._onStartAudioCall=()=>{},this._onStartVideoCall=()=>{}}componentDidMount(){this.props.listeners.add(T.default,"change:displayInfo",this._forceUpdate)}menus(){const{chat:e,contact:t,onSelectMessages:s}=this.props,a=[];return e.isPSA||a.push((0,M.jsx)(h.default,{a8n:"mi-contact",action:()=>l.default.chatInfoDrawer(e),children:p.default.t(1924)},"info")),t.isBusiness&&((0,f.canSeeECommerceComplianceIndiaUserJourney)(this.props.contact.id.user)&&a.push((0,M.jsx)(h.default,{a8n:"merchant-details",action:()=>l.default.merchantDetailsDrawer(this.props.contact.id),children:p.default.t(394)},"merchantDetails")),a.push((0,M.jsx)(h.default,{a8n:"report",action:this.onReportSpam,children:p.default.t(1524)},"report"),(0,M.jsx)(h.default,{a8n:"block",action:t.isBlocked()?this.onUnblockContact:this.onBlockContact,children:t.isBlocked()?p.default.t(1709):p.default.t(317)},"block"))),a.push((0,M.jsx)(h.default,{a8n:"mi-select-messages",action:s,children:p.default.t(2151)},"select")),e.mute.canMute()&&a.push((0,M.jsx)(g.default,{onMute:t=>l.default.muteChat(e,t),mute:e.mute,chat:e,settings:y.default},"mute")),a.push((0,M.jsx)(h.default,{a8n:"mi-clear",action:()=>l.default.clearChat(e),children:p.default.t(593)},"clear")),a.push((0,M.jsx)(u.default,{onDeleteOrExit:()=>l.default.deleteOrExitChat(e),chat:e},"delete")),a}render(){return this.props.toContextMenuManager?(0,M.jsx)("div",{ref:this._refDropdown,children:this.menus()}):(0,M.jsx)(c.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:c.DirX.LEFT,children:this.menus()},"ContactMenuDropdown")}}x.CONCERNS={chat:["isPSA","mute"],contact:["id","isBusiness","name","isContactBlocked"]},x.displayName="ContactMenuDropdown";var I=(0,_.default)((0,b.default)(x,x.CONCERNS));t.default=I},24076:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(41609)),n=s(55084),r=s(67294),o=a(s(8581)),l=a(s(94822)),d=a(s(91952)),u=a(s(55454)),c=a(s(17079)),h=s(54647),f=a(s(66)),p=a(s(71681)),m=a(s(21791)),_=a(s(45472)),g=a(s(65565)),v=a(s(46364)),S=a(s(69217)),C=s(85893);class y extends r.Component{constructor(){super(...arguments),this._refContainer=(0,r.createRef)(),this._msgCollectionChanged=(e,t,s,a)=>{const i=this.state.msgCollection;i!==e&&i!==t||this.setState({msgCollection:s,focusCtx:a&&(a.msg||a.collection)?a:this.state.focusCtx})},this._windowGainedFocus=()=>{v.default.markAvailable();const e=this.state.chat;e&&e.isUser&&e.presence.subscribe().catch((0,n.filteredCatch)(h.WebdDrop,(()=>{})))},this._windowLostFocus=()=>{v.default.markUnavailable(u.default.SEND_UNAVAILABLE_WAIT)},this._handleCloseChat=e=>{this.state.chat===e&&this.setState({chat:void 0,msgCollection:void 0,focusCtx:void 0})},this._handleOpenChatId=0,this._handleOpenChat=(e,t,s)=>{d.default.updateChatlistSelection(e);const a=this._openedChatInfo,i={};this._openedChatInfo=i;const n=t?t.collection:e.msgs;this._handleOpenChatId++;const r=this._handleOpenChatId,o=()=>r===this._handleOpenChatId;let l=!1;const u=()=>{o()&&(l=!0,s(this._newChatScrollInfo(a,t)))},c=t&&t.msg&&t.msg.id||t&&t.key;this.setState({chat:e,msgCollection:n,focusCtx:t,notifyChatRendered:e=>{if(l||!o())return;if(!c)return void u();e.some((e=>e.id.equals(c)))&&u()},updateOpenedChatInfo:e=>{Object.assign(i,e)}})},this._newChatScrollInfo=(e,t)=>{const s=t?t.msg||_.default.get(t.key):void 0;if(t&&s&&e){const{chat:t,renderedMsgsInfo:a,visibleMsgOrder:n}=e;if(t&&a&&n&&!(0,i.default)(a)&&!(0,i.default)(n)){const e=a[n[0].toString()],i=Object.keys(a).find((e=>e===s.id.toString())),r=i?a[i]:null;if(r)return{wasVisible:!0,offset:r.offset};if(t===s.chat)return e&&s.t<e.t?{wasVisible:!1,alignAt:"top"}:{wasVisible:!1,alignAt:"bottom"}}}return{wasVisible:!1,alignAt:"center"}},this.state={chat:void 0,msgCollection:void 0,focusCtx:void 0,showConversationPreview:!1,animate:void 0}}componentDidMount(){this.props.listeners.add(d.default,"open_chat",this._handleOpenChat),this.props.listeners.add(d.default,"close_chat",this._handleCloseChat),this.props.listeners.add(window,"focus",this._windowGainedFocus),this.props.listeners.add(window,"blur",this._windowLostFocus),g.default.wallpapersV2&&(this.props.listeners.add(l.default,"wallpaper_drawer_open",(()=>{this.setState({showConversationPreview:!0})})),this.props.listeners.add(l.default,"wallpaper_drawer_close",(()=>{this.setState({showConversationPreview:!1})})))}shouldComponentUpdate(e,t){return t!==this.state||e.animate!==this.props.animate}componentDidUpdate(e,t){const s=this.state.chat,a=t.chat;s&&a!==s&&(this.props.listeners.add(s,"change:cmc:merge",this._msgCollectionChanged),a&&this.props.listeners.remove(a,"change:cmc:merge",this._msgCollectionChanged),s.contact.isBusiness&&o.default.find(s.id))}animatePanel(e,t){return!!this._refContainer.current&&this._refContainer.current.animatePanel(e,t)}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.containsDOMNode(e)}static getDerivedStateFromProps(e,t){return null==t.animate?{animate:e.animate}:!1!==t.animate?{animate:!1}:null}render(){const{chat:e,msgCollection:t,focusCtx:s,showConversationPreview:a,animate:i}=this.state;return e&&t||a?(0,C.jsx)(c.default,{chat:e,groupMetadata:null==e?void 0:e.groupMetadata,chatPreference:l.default.assertGet("defaultPreference"),focusCtx:s,msgCollection:t,notifyChatRendered:this.state.notifyChatRendered||(()=>{}),updateOpenedChatInfo:this.state.updateOpenedChatInfo||(()=>{}),ref:this._refContainer,showPreview:a},null==e?void 0:e.id.toString()):(0,C.jsx)(f.default,{animate:i,ref:this._refContainer,mdOptInDeadline:m.default})}}y.displayName="Conversation";const E=(0,p.default)((0,S.default)(y));t.default=class extends E{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},98213:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({wallpaperColor:e,showDoodle:t}){const{theme:s}=(0,n.useContext)(d.default);let a;a=l.default.wallpapersV2?t:e===r.default.DEFAULT_CHAT_WALLPAPER;if(a&&(0,u.colorExistsInTheme)(e,s)){const t={opacity:(0,u.getDoodleOpacity)(e,s)},a=(0,u.getDoodleAssetName)(e,s),n={};return n[a]=!0,(0,c.jsx)("div",(0,i.default)((0,i.default)({className:o.default.tile},n),{},{style:t}))}return null};var i=a(s(81109)),n=s(67294),r=a(s(55454)),o=a(s(8937)),l=a(s(65565)),d=a(s(13038)),u=s(62437),c=s(85893)},71570:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(6479)),r=i(s(81109)),o=i(s(41609)),l=i(s(52353)),d=i(s(23279)),u=i(s(23493)),c=i(s(94184)),h=s(58568),f=s(55084),p=s(78285),m=i(s(7900)),_=s(67294),g=i(s(73935)),v=i(s(96774)),S=s(58380),C=i(s(25142)),y=i(s(91952)),E=i(s(55454)),b=i(s(28581)),T=i(s(52384)),M=i(s(92329)),x=i(s(71352)),I=i(s(69209)),P=i(s(61841)),A=s(54647),N=a(s(13540)),O=i(s(47193)),w=i(s(12950)),D=i(s(2408)),j=s(21134),R=i(s(71681)),L=i(s(70603)),k=s(6637),F=i(s(55741)),B=i(s(45472)),G=i(s(77043)),U=i(s(40630)),V=i(s(42321)),H=i(s(3132)),W=i(s(52013)),Y=i(s(2966)),K=a(s(49201)),q=i(s(35371)),z=i(s(63477)),$=i(s(68062)),Q=i(s(35690)),X=s(74109),Z=i(s(45285)),J=i(s(82669)),ee=s(85893);class te extends _.Component{constructor(e){super(e),this._chatOpenScrollTimestamp=0,this._renderedMsgCache=new Map,this._visibleMsgOrder=[],this._loadEarlierScrollThreshold=300,this._mdHistorySyncStatusContentPlaceholderShown=!1,this._blockAdditionalLoadEalierRequest=!1,this._setScrollContainer=e=>this.scrollContainer=e,this._refStickyDateMarker=(0,_.createRef)(),this._refMessageList=(0,_.createRef)(),this._handleHistorySyncStateUpdate=e=>{e.has(this.props.chat.id.toString())&&(__LOG__(2,void 0,void 0,void 0,["Conversaion msgs"])`_onHistorySyncStateUpdate called, attempt to load earlier`,this._blockAdditionalLoadEalierRequest=!1,this.loadEarlierMsgs())},this.handlePanesWillChange=()=>{const e=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(!e)return;const t=e.toString(),s=this._refMessageList.current;if(t&&s){var a;const e=null===(a=s.getMsgWrapperRef(t))||void 0===a?void 0:a.getContainerElement();if(e){const t=this.scrollContainer;if(!t)return;const s=this._getMsgBottom(t,e);this._panesChanging={msg:e,container:t,msgBottom:s}}}},this.handlePanesDidChange=()=>{if(!this._panesChanging)return;const{msg:e,container:t,msgBottom:s}=this._panesChanging;this._setMsgBottom(t,e,s),this._panesChanging=void 0},this._attachMsgCollectionObservers=e=>{const{listeners:t,chat:s,msgCollection:a}=this.props,{focusCtx:i,chat:n,msgCollection:r}=e;var o,l;(a&&(t.remove(a,"remove_msgs insert_msgs",this._handleMsgsUpdate),t.remove(s.msgs,"change:last",this._handleLastMsgChanged)),t.remove(s,"change:unreadCount",this._handleUnreadCount),null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._msgLoadStateChangeUnsubscribe=r.onMsgLoadStateChange(this._handleMsgLoadStateChange),(0,j.isGroupCatchUpEnabled)())&&(s.isGroup&&(null===(o=s.groupMetadata)||void 0===o?void 0:o.unreadMentionMetadata.unreadMentionCollection)&&t.remove(s.groupMetadata.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMentionCount),n.isGroup&&(null===(l=n.groupMetadata)||void 0===l?void 0:l.unreadMentionMetadata.unreadMentionCollection)&&t.add(n.groupMetadata.unreadMentionMetadata.unreadMentionCollection,"add remove reset",this._handleUnreadMentionCount));t.add(n,"change:unreadCount",this._handleUnreadCount),t.add(n.msgs,"change:last",this._handleLastMsgChanged),t.add(r,"remove_msgs insert_msgs",this._handleMsgsUpdate),i&&r.loadAroundPromise&&r.loadAroundPromise.checkpoint(this.props.rejectOnUnmount()).catch((0,f.filteredCatch)(N.Unmount,(()=>{}))).catch((0,f.filteredCatch)(A.E404,(()=>{y.default.openToast((0,ee.jsx)(K.default,{msg:D.default.t(1249),id:(0,K.genId)()}))})))},this._updateForCurrentPosition=(0,u.default)((()=>{const e=this.props.rejectOnUnmount();(0,P.default)({signal:e}).then((()=>{e.isRejected()||(this._updateRenderedMsgCache(),g.default.unstable_batchedUpdates((()=>{const{scrollContainer:e}=this;if(null==e)return;if(this._blockAdditionalLoadEalierRequest&&e.scrollTop<80)return;e.scrollTop>80&&(this._blockAdditionalLoadEalierRequest=!1),e.scrollTop<300&&this.loadEarlierMsgs();const{isNearBottom:t,cursor:s}=this.state,a=this._nearBottom();a?(this._maybeSendSeen(!0),le(this.props)&&t!==a&&this.setState({isNearBottom:a,newUnread:0}),(s.getEnd(this.props.msgCollection)<this.props.msgCollection.length||!le(this.props))&&this._loadRecentMsgs()):t!==a&&this.setState({isNearBottom:a})})))})).catch((0,f.filteredCatch)(h.AbortError,(()=>{})))}),100),this._handleMsgLoadStateChange=()=>{const e=this.state.msgLoadState,t=ie(this.props.msgCollection);let s={msgLoadState:t};if(e.isLoadingAroundMsgs&&!t.isLoadingAroundMsgs){const e=ae(this.props.focusCtx),t=e&&e.msg;t&&(s=(0,r.default)((0,r.default)({},s),{},{cursor:this.state.cursor.init(t.id,this.props.msgCollection),focusCtx:e}))}this.setState(s)},this._handleResizeThrottle=(0,u.default)((()=>{this._updateRenderedMsgCache()}),100),this.handleMsgKeyChange=({newKey:e,oldKey:t})=>{const s=t.toString(),a=e.toString(),i=this._renderedMsgCache.get(s);i&&(this._renderedMsgCache.delete(s),this._renderedMsgCache.set(a,i));for(let s=0;s<this._visibleMsgOrder.length;++s)if(this._visibleMsgOrder[s]===t){this._visibleMsgOrder[s]=e;break}},this._handleResizeDebounce=(0,d.default)((()=>{const e=this._nearBottom();this._nearBottom!==e&&this.setState({isNearBottom:e})}),100),this.loadEarlierMsgs=()=>{const{chat:e,msgCollection:t}=this.props,{cursor:s,msgLoadState:a}=this.state;if(s.getStart(t)>0)s.hasBefore(t)&&this.setState({cursor:s.loadBefore(t)});else{if(a.isLoadingEarlierMsgs||a.isLoadingAroundMsgs)return;if(ne(e,le(this.props),a)&&(t.msgLoadState.noEarlierMsgs=!1),t.msgLoadState.noEarlierMsgs)return;e.loadEarlierMsgs(t).checkpoint(this.props.rejectOnUnmount()).then((e=>{!w.default.supportsFeature(w.default.F.MD_BACKEND)||e&&0!==e.length||(this._blockAdditionalLoadEalierRequest=!0);const a={};this.state.focusCtx||(a.focusCtx=oe(this.props,this.state.unreadCount)),s.hasBefore(t)?(a.cursor=s.loadBefore(t),this.setState(a)):this.setState(a)})).catch((0,f.filteredCatch)(N.Unmount,(()=>{}))).catch((e=>{__LOG__(2)`ConversationMsgs:loadEarlierMsgs failed\n${e}`}))}},this._loadRecentMsgs=()=>{const{chat:e,msgCollection:t}=this.props,{cursor:s,msgLoadState:a}=this.state;if(s.getEnd(t)<t.length)this.setState({cursor:s.loadAfter(t)});else{if(a.isLoadingRecentMsgs||a.isLoadingAroundMsgs)return;this._loadRecentMsgsPromise=e.loadRecentMsgs(t).cancellable().checkpoint(this.props.rejectOnUnmount()).then((()=>{s.hasAfter(t)?this.setState({cursor:s.loadAfter(t)}):this.state.cursor.getEnd(t)>=t.length&&le(this.props)&&this.forceUpdate()})).catch((0,f.filteredCatch)(N.Unmount,(()=>{}))).catch((e=>{__LOG__(2)`ConversationMsgs:loadRecentMsgs failed\n${e}`})).finally((()=>{this._loadRecentMsgsPromise=null}))}},this.handleComposeHeightChange=e=>{const t=this.scrollContainer;if(t)if(e){if(t&&e<0&&t.scrollTop===t.scrollHeight-t.clientHeight)return;this._setScrollTop(t,t.scrollTop+e)}else{const e=t.scrollHeight-(t.scrollTop+t.clientHeight);(0,Z.default)(t,{tween:18},{progress:()=>{this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)},duration:300},[.1,.82,.25,1])}},this._getScrollContainer=()=>(0,m.default)(this.scrollContainer,"this.scrollContainer"),this.getScrollBottom=()=>{const e=this.scrollContainer;return e?e.scrollHeight-(e.scrollTop+e.clientHeight):0},this._hideStickyDateMarker=new p.ShiftTimer((()=>{var e;null===(e=this._refStickyDateMarker.current)||void 0===e||e.setVisibility(!1)})),this._updateStickyDateMarker=new p.ShiftTimer((e=>{const{dateMarkerIdx:t,silent:s=!1}=e||{},a=this._refMessageList.current;if(!a||"number"!=typeof t)return;s||Date.now()-(this._programmaticScroll||0)<200||this._showStickyDateMarker();const i=a.getDateMarkerRef(t);var n;if(-1===t)null===(n=this._refStickyDateMarker.current)||void 0===n||n.updateDateMarkerText();else if(i){var r;const e=i.getTimestamp(),t=C.default.relativeDateStr(e).toUpperCase();null===(r=this._refStickyDateMarker.current)||void 0===r||r.updateDateMarkerText(t)}if(this._dateMarkerIdx!==t){const e=a.getDateMarkerRef(this._dateMarkerIdx);e&&e.show(),i&&i.hide()}})),this._removeViewedMentions=()=>{this._renderedMsgCache.forEach(((e,t)=>{var s,a;(null===(s=this.props.chat.groupMetadata)||void 0===s?void 0:s.unreadMentionMetadata.hasMentionId(t))&&(null===(a=this.props.chat.groupMetadata)||void 0===a||a.unreadMentionMetadata.removeUnreadMentions(t))}))},this.isMsgVisible=(e,t=!1)=>this._renderedMsgCache.has(e.toString())&&(!!t||this.getMsgComponent(e)),this.getSequentialMsg=e=>{const t=this.getMsgs();if(t){const s=t.findIndex((t=>e.equals(t.id)));return s>=t.length-1?null:t[s+1]}},this.handleScroll=()=>{this._updateForCurrentPosition()},this.handleWindowGainedFocus=()=>{const e=this.props.chat;!this._clearUnreadTimer&&e.isDirty()&&(this._clearUnreadTimer=setTimeout((()=>{delete this._clearUnreadTimer,this._maybeSendSeen()}),E.default.CLEAR_CHAT_DIRTY_WAIT))},this.handleWindowLostFocus=()=>{if(!this.state.unreadCount||!le(this.props))return;const e=this.props.chat;0===e.unreadCount&&this.setState({unreadCount:0}),e.markedUnread=!1},this._jumpToBottom=()=>{const{msgCollection:e}=this.props;le(this.props)&&this.state.cursor.getEnd(e)>=e.length?this._scrollToBottom():y.default.openChatBottom(this.props.chat).then((e=>{e&&y.default.focusChatTextInput(this.props.chat)}))},this._jumpToMention=()=>{if((0,j.isGroupCatchUpEnabled)()){var e;const t=this.props.chat,s=null===(e=t.groupMetadata)||void 0===e?void 0:e.unreadMentionMetadata;if(s){const e=s.pendingUnreadMentionCount;if(e>0){const t=D.default.t(1714,{count:D.default.n(e),_plural:e});return y.default.openToast((0,ee.jsx)(K.default,{msg:t,id:(0,K.genId)()})),s.pendingUnreadMentionCount=0,void this.setState({unreadMentionCount:s.getUnreadMentionCount()})}if(s.unreadMentionCollection.length){const e=s.oldestUnreadMention(),a=G.default.fromString(null==e?void 0:e.id),i=B.default.get(a.toString()),n=t.getSearchContext(i||a);n.highlightMentionMsg=!0,n.enableAnimation=!1,n&&y.default.openChatAt(this.props.chat,n)}}}},this._scrollToBottom=e=>{const t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight),e&&e();const s=this.props.rejectOnUnmount();(0,P.default)({signal:s}).then((()=>{s.isRejected()||this.setState({cursor:this.state.cursor.resetBeforeCursor(this.props.msgCollection)})})).catch((0,f.filteredCatch)(h.AbortError,(()=>{})))},this._handleLastMsgChanged=(e,t)=>{const{msgCollection:s}=this.props,{focusCtx:a}=this.state;let{cursor:i}=this.state;const n=s.last();if(!le(this.props))return void(t&&e&&e.isSentByMe&&this._jumpToBottom());const r={},l=document.hasFocus(),d=this._nearBottom();let u=d;l&&d?(r.unreadCount=0,r.focusCtx=void 0,i=i.setFocusedMsgKey(s)):n&&n.isSentByMe&&t&&(u=!0,this.state.unreadCount&&(r.unreadCount=0,r.focusCtx=void 0,i=i.setFocusedMsgKey(s)),this._jumpToBottom()),i=a&&!r.hasOwnProperty("focusCtx")?i.loadAfter(s,{count:1}):i.loadBeforeCapped(s,{count:1}),i!==this.state.cursor&&(r.cursor=i),(0,o.default)(r)||this.setState(r,(()=>{u&&this._scrollToBottom()}))},this._handleUnreadMentionCount=()=>{var e,t;const{chat:s}=this.props,a=null!==(e=null===(t=s.groupMetadata)||void 0===t?void 0:t.unreadMentionMetadata.getUnreadMentionCount())&&void 0!==e?e:0;this.setState({unreadMentionCount:a})},this._handleUnreadCount=()=>{const{chat:e}=this.props,t=this._nearBottom(),s=document.hasFocus();this._maybeSendSeen(t,s);const a={};if(e.unreadCount&&!e.pendingSeenCount&&le(this.props)){a.unreadCount=e.unreadCount;const t=oe(this.props,this.state.unreadCount);t&&(a.focusCtx=t,a.cursor=this.state.cursor.setFocusedMsgKey(this.props.msgCollection,t.msg&&t.msg.id))}const i=t&&a.unreadCount-this.state.unreadCount==1;(!t&&le(this.props)||!e.pendingSeenCount&&this.state.newUnread!==e.unreadCount)&&(a.newUnread=e.unreadCount),(0,o.default)(a)||this.setState(a,(()=>{i&&this._scrollToBottom()}))},this._handleMsgsUpdate=()=>{const e=this.state.cursor.ensureValidFocus(this.props.msgCollection);this.state.cursor!==e?this.setState({cursor:e}):this.forceUpdate()},this.handlePageUpDown=()=>{O.default.focus(this.scrollContainer)},this.scrollMessages=()=>{var e;const t=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(!t)return;const s=this._refMessageList.current;if(!s)return;const a=null===(e=s.getMsgWrapperRef(t.toString()))||void 0===e?void 0:e.getContainerElement();if(!a)return;const i=1===this._visibleMsgOrder.length?a.clientHeight:0,n=this.scrollContainer;(0,Z.default)(a,"stop"),n&&(0,Z.default)(n,"stop"),(0,Z.default)(a,"scroll",{duration:300,container:n,offset:i})},this.handleKeyPress=e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),"Enter"!==e.key||e.shiftKey?y.default.pasteChatTextInput(this.props.chat,String.fromCharCode(e.charCode)):y.default.enterChatTextInput(this.props.chat))},this.handleContextMenu=e=>{const t=this.props.chat,s=this.props.onSelectMessages;let a;if(t.isUser)a=(0,ee.jsx)(b.default,{chat:t,toContextMenuManager:!0,contact:t.contact,onSelectMessages:s});else if(t.isGroup)a=(0,k.groupMenu)(t,s);else{if(!t.isBroadcast)return;a=(0,k.broadcastMenu)(t,s)}e.preventDefault(),e.stopPropagation(),this.setState({contextMenu:{menu:a,event:e}})},this.handleContextClose=()=>{this.setState({contextMenu:null})},this.handlePaste=e=>{e.preventDefault(),y.default.sendPasteToCompose(this.props.chat,e)},this._notifyChatRendered=()=>{this.props.notifyChatRendered&&this.props.notifyChatRendered(this.getMsgs())};const{chat:t}=e,s=t.pendingSeenCount?0:t.unreadCount;let a=0;var i,n;(0,j.isGroupCatchUpEnabled)()&&t.isGroup&&(a=null!==(i=null===(n=t.groupMetadata)||void 0===n?void 0:n.unreadMentionMetadata.getUnreadMentionCount())&&void 0!==i?i:0);this.state=(0,r.default)((0,r.default)({},re(e,s)),{},{unreadCount:s,unreadMentionCount:a,isNearBottom:!0,newUnread:0,contextMenu:null,textsize:M.default.get().textsize,msgLoadState:ie(e.msgCollection),lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx})}componentWillUnmount(){var e;(null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._updateStickyDateMarker.cancel(),this._updateForCurrentPosition.cancel(),this._handleResizeThrottle.cancel(),this._handleResizeDebounce.cancel(),this._hideStickyDateMarker.cancel(),this._clearUnreadTimer&&clearTimeout(this._clearUnreadTimer),this._maybeSendSeen(),this.props.chat.markedUnread=!1,(0,j.isGroupCatchUpEnabled)()&&this.props.chat.isGroup)&&(null===(e=this.props.chat.groupMetadata)||void 0===e||e.unreadMentionMetadata.reset())}componentDidMount(){const{chat:e,listeners:t}=this.props;t.add(y.default,"scroll_chat_to_bottom",(e=>{this._scrollToBottom(e)})),t.add(y.default,"scroll_messages",this.scrollMessages),t.add(y.default,"textsize_change",(e=>this.setState({textsize:e}))),t.add(y.default,"panes_will_change",this.handlePanesWillChange),t.add(y.default,"panes_did_change",this.handlePanesDidChange),t.add(y.default,"scroll_to_focused_msg",(()=>{this._chatOpenScrollTimestamp=Date.now()})),t.add(window,"focus",this.handleWindowGainedFocus),t.add(window,"blur",this.handleWindowLostFocus),t.add(window,"resize",this._handleResizeThrottle),t.add(window,"resize",this._handleResizeDebounce),t.add(B.default,"change:msgKey",this.handleMsgKeyChange),t.add(y.default,"new_history_sync_chunk_processed",this._handleHistorySyncStateUpdate),this._attachMsgCollectionObservers(this.props);const s=this.props.rejectOnUnmount();(0,P.default)({signal:s}).then((()=>{s.isRejected()||this._showStickyDateMarker()})).catch((0,f.filteredCatch)(h.AbortError,(()=>{}))),this.props.updateOpenedChatInfo({chat:e}),(0,X.sendSeen)(e),this._updateForCurrentPosition(),this._notifyChatRendered()}static getDerivedStateFromProps(e,t){let s={lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx};return e.selectable!==t.lastSelectable||e.chat===t.lastChat&&e.msgCollection===t.lastMsgCollection&&e.focusCtx===t.lastFocusCtx||(s=(0,r.default)((0,r.default)({},s),{},{msgLoadState:ie(e.msgCollection)},re(e,t.unreadCount))),s}shouldComponentUpdate(e,t){if(!(0,v.default)(e,this.props))return!0;const s=this.state,{msgLoadState:a}=s,i=(0,n.default)(s,["msgLoadState"]),{msgLoadState:r}=t,o=(0,n.default)(t,["msgLoadState"]);return!(0,v.default)(r,a)||!(0,v.default)(o,i)}componentDidUpdate(e){e.selectable!==this.props.selectable||e.chat===this.props.chat&&e.msgCollection===this.props.msgCollection&&e.focusCtx===this.props.focusCtx||(this._loadRecentMsgsPromise&&this._loadRecentMsgsPromise.cancel(),this._attachMsgCollectionObservers(this.props));const{chat:t}=this.props;this._updateRenderedMsgCache(e.chat===t),this.props.updateOpenedChatInfo({chat:t}),e.msgCollection!==this.props.msgCollection&&this._updateForCurrentPosition(),this._notifyChatRendered()}_getMsgBottom(e,t){const s=e.scrollTop,a=e.scrollHeight,i=e.clientHeight;return a-(t.offsetTop+t.clientHeight+(a-(s+i)))}_setMsgBottom(e,t,s){const a=t.offsetTop+t.clientHeight+s-e.clientHeight;this._setScrollTop(e,a)}getRenderedMessageCount(){return this.getMsgs().length}setScrollBottom(e){const t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)}_setScrollTop(e,t){this._programmaticScroll=Date.now(),e&&(e.scrollTop=t)}_showStickyDateMarker(){var e;null===(e=this._refStickyDateMarker.current)||void 0===e||e.setVisibility(!0),this._hideStickyDateMarker.debounce(3e3)}_nearBottom(){const e=this.scrollContainer;return!!e&&e.scrollTop+E.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight}getUnreadFocusCtx(e){const{chat:t,msgCollection:s,focusCtx:a}=e||this.props;let i;if(t.unreadCount?i=t.unreadCount:this.state&&this.state.unreadCount&&(i=this.state.unreadCount),a&&!le(this.props)||!i)return;let n=s.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,i);return n.length===i?(n=n[n.length-1],{msg:n,isUnreadDivider:t.shouldShowUnreadDivider,highlightMsg:!1}):void 0}getMsgs(){const{focusCtx:e,msgCollection:t}=this.props,{cursor:s,msgLoadState:a}=this.state;return e&&a.isLoadingAroundMsgs?[]:t.toArray().slice(s.getStart(t),s.getEnd(t)).map((e=>e.safe()))}_updateRenderedMsgCache(e){const t=this._refMessageList.current;if(!t)return void this._renderedMsgCache.clear();const s=[],a=t.props.msgs,i=new Map,n={};let r=0,o=a.length-1;for(;r<o;){const e=Math.floor((r+o)/2),s=a[e].id.toString(),i=t.getMsgWrapperRef(s);t.getMsgVisibility(i).visibility===E.default.VISIBILITY.ABOVE?r=e+1:o=e}for(let e=r;e<a.length;e++){const r=a[e].id.toString(),o=t.getMsgWrapperRef(r);if(!o)throw new Error("msgRef not found!");const l=t.getMsgVisibility(o);if(l.visibility!==E.default.VISIBILITY.VISIBLE)break;n[r]={offset:l.offset,t:a[e].t},i.set(r,o),s.push(a[e].id)}if(!this.scrollContainer)return;const l=this.scrollContainer.scrollTop;r=0,o=Object.keys(t.getRenderedDateMarkers()).length-1;const d=t.getDateMarkerRef(0),u=d&&d.getElement();if(u&&u.offsetTop<=l+8.5)for(;r<o;){const e=Math.ceil((r+o)/2),s=t.getDateMarkerRef(e);if(!s)throw new Error(`DateMarkerRef: ${e} not found. ${Object.keys(t.getRenderedDateMarkers()).toString()}}`);(0,m.default)(s.getElement(),"midDateMarkerRef.getElement()").offsetTop>l+8.5?o=e-1:r=e}else r=-1;this._updateStickyDateMarker.onOrBefore(0,{dateMarkerIdx:r,silent:e}),this._dateMarkerIdx=r,this.pauseHiddenGifs(this._renderedMsgCache,i),this._renderedMsgCache=i,this._visibleMsgOrder=s,(0,j.isGroupCatchUpEnabled)()&&this.props.chat.isGroup&&this._removeViewedMentions(),this.props.updateOpenedChatInfo({renderedMsgsInfo:n,visibleMsgOrder:s,clientHeight:this.scrollContainer?this.scrollContainer.clientHeight:0})}getMsgComponent(e){const t=this._refMessageList.current;if(t)return t.getMsgComponentRef(e.toString())}pauseHiddenGifs(e,t){e.forEach(((e,s)=>{if(t.has(s))return;const a=this.props.msgCollection.get(s),i=this._refMessageList.current,n=null==i?void 0:i.getMsgComponentRef(s);(null==a?void 0:a.isGif)&&(null==n||n.pause())}))}_maybeSendSeen(e,t){let s=e,a=t;const{chat:i,msgCollection:n}=this.props,{cursor:r}=this.state;if(i.isDirty()&&le(this.props)&&r.getEnd(n)>=n.length&&((0,l.default)(a)&&(a=document.hasFocus()),a&&((0,l.default)(s)&&(s=this._nearBottom()),s)))return(0,X.sendSeen)(i),!0}render(){const{chat:e,msgCollection:t,selectable:s,onMessageSelect:a}=this.props,{focusCtx:i,msgLoadState:n,unreadMentionCount:r}=this.state,o=(0,c.default)(x.default.pane,{[x.default.selectable]:s});let l;const d=E.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));d&&(l=d.classname);const u=this.getMsgs(),h=(0,ee.jsx)(F.default,{ref:this._refMessageList,getScrollContainer:this._getScrollContainer,chat:e,unreadCount:this.state.unreadCount,selectable:s,onMessageSelect:a,msgs:u,focusedMsgCtx:i,selectedMessages:this.props.selectedMessages,isMsgVisible:this.isMsgVisible,getSequentialMsg:this.getSequentialMsg,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs});let f,p,m,_,g=(0,ee.jsx)(L.default,{direction:"around",isMostRecentCMC:le(this.props),loadMoreMsgs:()=>{},isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs});(this.state.cursor.getStart(t)>0||!n.noEarlierMsgs||ne(e,le(this.props),n))&&(f=(0,ee.jsx)(L.default,{direction:"earlier",isMostRecentCMC:le(this.props),loadMoreMsgs:this.loadEarlierMsgs,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs})),(this.state.cursor.getEnd(t)<t.length||!le(this.props))&&(p=(0,ee.jsx)(L.default,{direction:"recent",isMostRecentCMC:le(this.props),loadMoreMsgs:this._loadRecentMsgs,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs})),i&&n.isLoadingAroundMsgs?(p=void 0,f=void 0):g=void 0;const{isNearBottom:v,newUnread:C}=this.state;if(!v||!n.isLoadingAroundMsgs&&!le(this.props)){C&&e.unreadCount&&(_=(0,ee.jsx)(Q.default,{count:this.state.newUnread},"icon-unread"));const t=(0,c.default)(x.default.incoming,{[x.default.ffFix]:q.default.isGecko});m=(0,ee.jsxs)(H.default,{className:t,dataTab:E.default.TAB_ORDERS.MESSAGE_LIST_SCROLL_BUTTON,onClick:this._jumpToBottom,children:[(0,ee.jsx)(J.default,{transitionName:"pop",className:x.default.unread,children:_}),(0,ee.jsx)(Y.default,{name:"down",className:x.default.iconDown})]})}let y,b,M=null;if((0,j.isGroupCatchUpEnabled)()&&e.isGroup&&r>0){const e=(0,c.default)(x.default.atMentions,{[x.default.ffFix]:q.default.isGecko,[x.default.buttonGap]:m,[x.default.buttonGapRemove]:!m}),t=D.default.t(55,{count:D.default.n(r),_plural:r}),s=(0,ee.jsxs)(H.default,{className:e,onClick:this._jumpToMention,dataTab:E.default.TAB_ORDERS.MESSAGE_LIST_SCROLL_BUTTON,children:[(0,ee.jsx)(J.default,{transitionName:"pop",className:x.default.unread,children:(0,ee.jsx)(Q.default,{count:r,ariaLabel:t})}),(0,ee.jsx)(Y.default,{name:"mentions",className:x.default.iconMentions})]});M=v?s:(0,ee.jsx)(J.default,{transitionName:"pop",children:s})}if(this.state.contextMenu&&(y=(0,ee.jsx)(z.default,{displayName:"ConversationContextMenu",escapable:!0,popable:!0,requestDismiss:this.handleContextClose,children:(0,ee.jsx)($.default,{contextMenu:this.state.contextMenu})})),w.default.supportsFeature(w.default.F.MD_BACKEND)&&!n.isLoadingEarlierMsgs&&!n.isLoadingRecentMsgs&&!n.isLoadingAroundMsgs){let t,s;if(e.endOfHistoryTransferType===S.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE)t=D.default.t(737);else if(null!=e.endOfHistoryTransferType&&n.noEarlierMsgs&&!n.isLoadingEarlierMsgs)switch(e.endOfHistoryTransferType){case S.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:t=D.default.t(736),s=D.default.t(735);break;case S.ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:case S.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE:}null!=t&&(b=(0,ee.jsx)(T.default,{icon:(0,ee.jsx)(Y.default,{name:"content-chat"}),theme:"conversation",secondary:s,children:t}))}return(0,ee.jsxs)(I.default,{className:l,children:[(0,ee.jsx)(W.default,{ref:this._refStickyDateMarker}),(0,ee.jsxs)("div",{className:x.default.incomingContainer,children:[M,(0,ee.jsx)(J.default,{transitionName:"pop",children:m})]}),(0,ee.jsxs)("div",{className:o,ref:this._setScrollContainer,onScroll:this.handleScroll,onKeyPress:this.handleKeyPress,onContextMenu:s?null:this.handleContextMenu,onPaste:this.handlePaste,tabIndex:"0",children:[b,(0,ee.jsx)("div",{className:x.default.empty}),g,f,h,p]}),y]})}}te.displayName="ConversationMsgs";const se=(0,U.default)((0,R.default)(te));function ae(e){return null==e?null:null!=e.key?(0,r.default)((0,r.default)({},e),{},{msg:B.default.get(e.key)}):e}function ie(e){const{msgLoadState:t}=e;return{noEarlierMsgs:t.noEarlierMsgs,isLoadingEarlierMsgs:t.isLoadingEarlierMsgs,isLoadingRecentMsgs:t.isLoadingRecentMsgs,isLoadingAroundMsgs:t.isLoadingAroundMsgs,contextLoaded:t.contextLoaded}}function ne(e,t,s){const a=s.noEarlierMsgs&&e.shouldAppearInList&&t&&e.msgChunks.filter((e=>e.filter((t=>t.msgChunk===e)).length>0)).length>0;return a&&(__LOG__(4,void 0,new Error,!0)`MRM noEarlierMsgs on chat ${String(e.id)} is true but chat.msgChunks has length: ${e.msgChunks.length},
and chat.msgs.length: ${e.msgs.length}`,SEND_LOGS("noEarlierMsgs-error")),a}function re(e,t){const{focusCtx:s,chat:a,msgCollection:i}=e,n=ae(s)||oe(e,t),r=n&&n.msg,o=r&&r.id;return{cursor:V.default.create({msgCollection:i,focusedMsgKey:o,type:a.isGroup?E.default.RENDER_CURSOR.GROUP_CONVERSATION:E.default.RENDER_CURSOR.CONVERSATION}),focusCtx:n}}function oe(e,t){const{chat:s,msgCollection:a,focusCtx:i}=e;let n;if(n=s.unreadCount?s.unreadCount:t,i&&!le(e)||!n)return;let r=a.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,n);return r.length===n?(r=r[r.length-1],{msg:r,isUnreadDivider:s.shouldShowUnreadDivider,highlightMsg:!1}):void 0}function le(e){return e.chat.msgs===e.msgCollection}t.default=class extends se{getRenderedMessageCount(){return this.getComponent().getRenderedMessageCount()}getScrollBottom(){return this.getComponent().getScrollBottom()}onComposeHeightChange(e){this.getComponent().handleComposeHeightChange(e)}onPageUpDown(e){this.getComponent().handlePageUpDown(e)}setScrollBottom(e){this.getComponent().setScrollBottom(e)}}},46081:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(78718)),r=s(58568),o=s(55084),l=i(s(7900)),d=s(67294),u=i(s(76610)),c=i(s(96203)),h=i(s(73237)),f=i(s(46670)),p=i(s(91952)),m=i(s(36029)),_=i(s(55454)),g=i(s(98213)),v=i(s(71570)),S=i(s(38038)),C=i(s(93228)),y=i(s(84286)),E=i(s(61841)),b=a(s(13540)),T=s(86723),M=i(s(77710)),x=i(s(12950)),I=i(s(77642)),P=i(s(63133)),A=i(s(2408)),N=i(s(71681)),O=i(s(4231)),w=i(s(74343)),D=i(s(66329)),j=i(s(40630)),R=i(s(65565)),L=i(s(7394)),k=i(s(68565)),F=i(s(63477)),B=i(s(45285)),G=i(s(82669)),U=s(85893);class V extends d.Component{constructor(e){super(e),this._fillerHeight=0,this._composeBoxRef=(0,d.createRef)(),this._refConversationMsgs=(0,d.createRef)(),this._maybeOpenEphemeralNUX=()=>{const{chat:e}=this.props;(0,T.shouldShowNUX)(_.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&p.default.ephemeralDrawer(e)},this._updateAnnounceGrpState=()=>{this.forceUpdate()},this._handleComposeState=()=>{const e=this.props.chat.canSend;this.state.canCompose!==e&&(e||(this._fillerHeight=0),this.setState({canCompose:e}),this.maybeTriggerTosGatingModal())},this.handleComposeHeightChange=({input:e,overlay:t=0},s)=>{const a=this._refMsgPanel,i=this._refConversationMsgs.current;if(!a||!i)return;const n=i.getScrollBottom();if(void 0===e){if(s)return this._fillerHeight=t,this._updateFillerHeight(),void i.setScrollBottom(n);this._fillerHeight+=t,t<0&&(this._updateFillerHeight(),i.setScrollBottom(n)),this._msgPanelAnimation&&(this.didCancel=!0,this._msgPanelAnimation.cancel()),this._msgPanelAnimation=(this._msgPanelAnimation||Promise.resolve()).then((()=>(0,B.default)(a,{translateY:t>0?[-t,0]:[0,t]},{duration:300,easing:[.1,.82,.25,1]}))).cancellable().catch((0,o.filteredCatch)(b.Unmount,(()=>{}))).then((()=>{t>0&&this._updateFillerHeight(),a.style.transform="";const e=this._refConversationMsgs.current;t>0&&(null==e||e.setScrollBottom(n))})).catch((0,o.filteredCatch)(Promise.CancellationError,(()=>{(0,B.default)(a,"finish",!0)}))).then((()=>{this.didCancel?this.didCancel=!1:this._msgPanelAnimation=void 0}))}else i.onComposeHeightChange(e)},this.handleSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.handleCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.handleMessageSelect=(e,t,s)=>{this.handleSelectMessages();const a=this.selectedMessages.getSelected().pop(),i=s&&s.shiftKey;this.selectedMessages.setVal(e,t,!0),i&&this._selectMsgRange(a,e,t)},this._selectMsgRange=(e,t,s)=>{const{msgCollection:a}=this.props;if(!e||!a)return;const i=a.indexOf(e);if(!i)return;let n=a.indexOf(t);const r=n>i?-1:1,o=i+(s?r:n<i?0:2*r);for(;n!==o;)this.selectedMessages.setVal((0,l.default)(a.at(n),"msgCollection.at(currentSelectedIndex)").safe(),s,!0),n+=r},this.handlePageUpDown=e=>{var t;null===(t=this._refConversationMsgs.current)||void 0===t||t.onPageUpDown(e)},this.handleDragStart=()=>{this.state.canCompose&&(this.blockDrop=!0)},this.handleDragEnd=()=>{this.state.canCompose&&(this.blockDrop=!1)},this.handleDragEnter=e=>{if(!this.state.canCompose)return;this.handleCancelSelection();const t=new y.default(e.dataTransfer),s=this._composeBoxRef.current;null!=s&&!this.blockDrop&&(t.hasType("Files")||t.hasType("text/uri-list")||t.hasType("text/html"))&&(s.flushSaveComposeContentDebounced(),p.default.attachMediaDrawer({chat:this.props.chat,initCaption:s.getCurrentComposeContent(),onComplete:s.updateTextAfterMediaDrawerClose}),e.stopPropagation(),e.preventDefault())},this._setRefFiller=e=>{this._refFiller=e},this._setRefMsgPanel=e=>{this._refMsgPanel=e},this._handleSetRefHeader=e=>{this._refHeader=e},this._getHeaderOffset=e=>{if(this._refHeader){const t=this._refHeader.getBoundingClientRect();e((0,n.default)(t,["right","bottom"]))}else e(null)},this._closeGroupDescription=()=>{this.setState({showGroupDesc:!1})},this._getFillerHeight=()=>Math.max(0,this._fillerHeight),this._updateFillerHeight=()=>{const e=this._getFillerHeight();this._refFiller&&(this._refFiller.style.height=`${e}px`)};const{chat:t}=this.props;this.selectedMessages=new D.default([],(e=>e.id.toString())),this.state={canCompose:t.canSend,selectable:!1,showGroupDesc:t.isGroup&&this._showGroupDesc()},this._openEvent=new O.default.WebcChatOpen({webcUnreadCount:t.unreadCount,webcWindowHeightFloat:(0,M.default)()}),this.uiActionEvent=new O.default.UiAction({uiActionType:O.default.UI_ACTION_TYPE.CHAT_OPEN,uiActionPreloaded:!0})}_showGroupDesc(){if(!(x.default.supportsFeature(x.default.F.GROUPS_V_3)&&R.default.groupDescLength>0))return!1;const{chat:e}=this.props;return!(0,T.getSeenGroupDesc)(e.id)&&((0,T.setSeenGroupDesc)(e.id),0===e.unreadCount?!e.msgs.some((e=>e.type!==_.default.MSG_TYPE.E2E_NOTIFICATION&&e.type!==_.default.MSG_TYPE.GP2)):!e.shouldShowUnreadDivider)}componentDidMount(){const{chat:e}=this.props;this.props.listeners.add(e,"change:canSend",this._handleComposeState),this.props.listeners.add(e,"change:isReadOnly change:isAnnounceGrpRestrict",this._updateAnnounceGrpState),this.props.listeners.add(p.default,"get_conversation_header_offset",this._getHeaderOffset),this.props.listeners.add(e.msgs,"remove",(e=>{this.selectedMessages.isSelected(e)&&this.handleMessageSelect(e,!1)}));const t=e.getReceivedVcardMsgs();t&&!t.isSynced&&t.sync(e),e.active=!0,this.maybeTriggerTosGatingModal();const s=this._openEvent;if(s){this._openEvent=null,this._refConversationMsgs.current&&(s.webcRenderedMessageCount=this._refConversationMsgs.current.getRenderedMessageCount()),s.markWebcChatOpenT(),this._beforePaintRafId=requestAnimationFrame((()=>{this._beforePaintRafId=null,s.markWebcChatOpenBeforePaintT()}));const e=this.props.rejectOnUnmount();(0,E.default)({signal:e}).then((()=>{e.isRejected()||(this._refConversationMsgs.current&&(s.webcFinalRenderedMessageCount=this._refConversationMsgs.current.getRenderedMessageCount()),s.markWebcChatOpenPaintedT(),s.commit())})).catch((0,o.filteredCatch)(r.AbortError,(()=>{})))}const a=this.uiActionEvent;var i;a&&(e.isGroup&&null!=(null===(i=e.groupMetadata)||void 0===i?void 0:i.deviceSizeBucketForLogging)&&(a.sizeBucket=e.groupMetadata.deviceSizeBucketForLogging),a.markUiActionT(),a.commit(),this.uiActionEvent=void 0);e.attachMediaContents&&p.default.attachMediaDrawer({chat:e,animationName:"noop"}),(0,T.shouldShowNUX)(_.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&p.default.ephemeralDrawer(e),(0,T.shouldShowNUX)(_.default.NUX.EPHEMERAL)&&(e.isGroup&&null!=e.groupMetadata?this.props.listeners.add(e.groupMetadata,"change:ephemeralDuration",this._maybeOpenEphemeralNUX):e.isUser&&this.props.listeners.add(e,"change:ephemeralDuration",this._maybeOpenEphemeralNUX))}componentWillUnmount(){const{chat:e}=this.props;e.urlText&&(e.urlText=void 0),e.urlNumber&&(e.urlNumber=void 0),e.active=!1,null!=this._beforePaintRafId&&cancelAnimationFrame(this._beforePaintRafId)}maybeTriggerTosGatingModal(){(0,k.default)(this.props.chat.contact)&&p.default.openModal((0,U.jsx)(L.default,{contact:this.props.chat.contact}),{transition:"modal-flow"})}render(){const{chat:e,msgCollection:t,focusCtx:s,groupMetadata:a}=this.props;let i,n,r,o;if(this.state.showGroupDesc&&a&&a.desc&&(o=(0,U.jsx)(F.default,{displayName:"GroupDesc",escapable:!0,requestDismiss:this._closeGroupDescription,children:(0,U.jsx)(C.default,{onClose:this._closeGroupDescription,children:(0,U.jsx)(I.default,{chat:e,groupMetadata:a})})})),this.state.selectable)n=(0,U.jsx)(F.default,{displayName:"MultiSelect",escapable:!0,requestDismiss:this.handleCancelSelection,children:(0,U.jsx)(w.default,{chat:e,selectedMessages:this.selectedMessages,disableRevoke:!1,noSortOnForward:!1,onCancel:this.handleCancelSelection})}),i=(0,U.jsx)("footer",{className:S.default.footer}),r=(0,U.jsx)("div",{ref:this._setRefFiller,className:S.default.filler});else if(this.state.canCompose)i=(0,U.jsx)(m.default,{chat:e,ref:this._composeBoxRef,onComposeHeightChange:this.handleComposeHeightChange,onPageUpDown:this.handlePageUpDown}),r=(0,U.jsx)("div",{ref:this._setRefFiller,style:{height:`${this._getFillerHeight()}px`},className:S.default.filler});else{let t,s;(0,k.default)(e.contact)?s=A.default.t(2191,{contact:e.contact.formattedName}):e.isGroup&&!e.isReadOnly&&e.isAnnounceGrpRestrict&&a?t=(0,U.jsx)(c.default,{chat:e,groupMetadata:a,mute:e.mute}):s=e.isGroup?a.support?A.default.t(1670):A.default.t(1913):e.isPSA?A.default.t(2137):A.default.t(1914,{contact:e.contact.formattedName}),i=(0,U.jsx)("footer",{className:S.default.footer,children:(0,U.jsx)("div",{"data-a8n":u.default.key("block-message"),className:S.default.footerMessage,children:t||s})})}return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(g.default,{wallpaperColor:this.props.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),(0,U.jsx)(P.default,{chat:e,contact:e.contact,onSelectMessages:this.handleSelectMessages,onRef:this._handleSetRefHeader}),(0,U.jsx)(G.default,{transitionName:"butterbar",className:S.default.subheader,children:o}),(0,U.jsx)("div",{className:S.default.subheader,children:(0,U.jsx)(h.default,{chat:e})}),(0,U.jsx)("div",{className:S.default.body,ref:this._setRefMsgPanel,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onDragEnter:this.handleDragEnter,children:(0,U.jsx)(v.default,{ref:this._refConversationMsgs,chat:e,selectable:this.state.selectable,onMessageSelect:this.handleMessageSelect,msgCollection:t,onSelectMessages:this.handleSelectMessages,focusCtx:s,selectedMessages:this.selectedMessages,notifyChatRendered:this.props.notifyChatRendered,updateOpenedChatInfo:this.props.updateOpenedChatInfo})}),r,i,(0,U.jsx)(G.default,{transitionName:"slide-up",children:n}),(0,U.jsx)(f.default,{})]})}}V.displayName="ConversationPanel";var H=(0,j.default)((0,N.default)(V));t.default=H},17079:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(94184)),r=s(67294),o=s(61068),l=a(s(94822)),d=a(s(55454)),u=a(s(98213)),c=a(s(38038)),h=a(s(46081)),f=a(s(99890)),p=a(s(98229)),m=a(s(2408)),_=a(s(71681)),g=a(s(79485)),v=a(s(63477)),S=s(85893);class C extends r.Component{constructor(e){super(e),this._setRefContainer=e=>{this._refContainer=e},this._handleWallpaperColorPreview=e=>{e?this.state.wallpaperColor!==e&&this.setState({wallpaperColor:e}):this.setState({wallpaperColor:l.default.assertGet("defaultPreference").wallpaperColor})},this.state={wallpaperColor:this.props.chatPreference.wallpaperColor,prevWallpaperColor:this.props.chatPreference.wallpaperColor}}static getDerivedStateFromProps(e,t){return e.chatPreference.wallpaperColor!==t.prevWallpaperColor?(0,i.default)((0,i.default)({},t),{},{wallpaperColor:e.chatPreference.wallpaperColor,prevWallpaperColor:e.chatPreference.wallpaperColor}):null}componentDidMount(){this.props.listeners.add(l.default,"wallpaper_color_preview",this._handleWallpaperColorPreview)}animatePanel(e,t){var s;const a=null===(s=this._refContainer)||void 0===s?void 0:s.clientWidth;return null!=a&&e!==t&&(0,o.animateConversationPanel)(this._refContainer,a/(e-t))}containsDOMNode(e){return!!this._refContainer&&this._refContainer.contains(e)}render(){let e,t={};this.state.wallpaperColor!==d.default.DEFAULT_CHAT_WALLPAPER&&(t={backgroundColor:this.state.wallpaperColor});const{chat:s,msgCollection:a,focusCtx:i,notifyChatRendered:r,updateOpenedChatInfo:o,showPreview:_}=this.props;return s&&a?e=(0,S.jsx)(h.default,{chat:s,groupMetadata:s.groupMetadata,chatPreference:l.default.assertGet("defaultPreference"),focusCtx:i,msgCollection:a,notifyChatRendered:r,updateOpenedChatInfo:o,wallpaperColor:this.state.wallpaperColor},s.id.toString()):_&&(e=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("header",{className:(0,n.default)(p.default.chatHeader,f.default.header),children:(0,S.jsx)("span",{className:(0,n.default)(f.default.title,p.default.chatTitle),children:m.default.t(1893)})}),(0,S.jsx)(u.default,{wallpaperColor:this.state.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),(0,S.jsx)("footer",{className:c.default.footer})]})),(0,S.jsx)(v.default,{displayName:"ConversationPanel",uimState:v.default.State.INACTIVE,children:(0,S.jsx)("div",{id:"main",className:(0,n.default)(f.default.pane,{[f.default.previewPane]:this.props.showPreview}),style:t,ref:this._setRefContainer,children:e})})}}C.CONCERNS={chatPreference:["wallpaperColor","showDoodle"]},C.displayName="ConversationPreviewPanel";const y=(0,_.default)((0,g.default)(C,C.CONCERNS));t.default=class extends y{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},93228:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(89827)),r=a(s(2966)),o=s(85893);class l extends i.Component{constructor(...e){super(...e),this._refDiv=(0,i.createRef)(),this.getElement=()=>this._refDiv.current}render(){const e=this.props.onClose?(0,o.jsx)("div",{className:n.default.closeBtn,role:"button",onClick:this.props.onClose,children:(0,o.jsx)(r.default,{name:"x"})}):null;return(0,o.jsxs)("div",{className:n.default.subheader,ref:this._refDiv,children:[(0,o.jsx)("div",{className:n.default.main,children:this.props.children}),e]})}}t.default=l,l.displayName="ConversationSubheader"},77642:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=i(s(91952)),l=i(s(85051)),d=i(s(77063)),u=s(49895),c=i(s(2408)),h=a(s(17126)),f=i(s(88155)),p=i(s(79485)),m=s(97504),_=s(85893);class g extends r.Component{constructor(e){super(e),this._setBodyRef=e=>{this._bodyRef=e},this._setDescRef=e=>{this._descRef=e},this.handleResize=({width:e})=>{const{descWidth:t}=this.state;t<=0||this.setState({truncated:e<t})},this.handleReadMore=()=>{const{chat:e}=this.props;o.default.chatInfoDrawer(e,!0)},this.state={desc:S(e.groupMetadata),descWidth:0,truncated:!1,hidden:!0}}componentDidMount(){this._handleDescWidthObtained()}static getDerivedStateFromProps(e,t){const s=S(e.groupMetadata);return s===t.desc?null:{desc:s,descWidth:0,truncated:!1,hidden:!0}}componentDidUpdate(e,t){t.desc!==this.state.desc&&this._handleDescWidthObtained()}_handleDescWidthObtained(){const{_bodyRef:e,_descRef:t}=this;if(!e||!t)return;const s=e.clientWidth,a=t.getWidth();this.setState({descWidth:a,truncated:s<a,hidden:!1})}render(){const{desc:e}=this.state;if(!e)return null;const{truncated:t,hidden:s}=this.state,a=this.props.chat.isTrusted()?u.Configuration.TrustedGroupDesc({links:h.findLinks(e)}):u.Configuration.UntrustedGroupDesc();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.TextDiv,{theme:"title",children:c.default.t(1987)}),(0,_.jsx)(f.default,{onRef:this._setBodyRef,onResize:this.handleResize,className:d.default.body,children:(0,_.jsxs)(m.TextSpan,{theme:"small",className:(0,n.default)(d.default.text,{[d.default.hidden]:s}),children:[(0,_.jsx)(l.default,{ref:this._setDescRef,text:e,selectable:!0,formatters:a,className:d.default.desc}),t&&(0,_.jsx)("div",{className:d.default.more,role:"button",onClick:this.handleReadMore,children:c.default.t(1514)})]})})]})}}g.CONCERNS={groupMetadata:["desc"]},g.displayName="GroupDescriptionBar";var v=(0,p.default)(g,g.CONCERNS);function S(e){return e&&e.desc}t.default=v},61874:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(64809)),r=a(s(97703)),o=a(s(3031)),l=a(s(8581)),d=s(47874),u=a(s(91952)),c=a(s(9322)),h=a(s(55454)),f=a(s(9492)),p=a(s(47452)),m=s(57085),_=a(s(85688)),g=s(86723),v=a(s(22079)),S=a(s(52087)),C=a(s(2408)),y=a(s(71681)),E=s(30333),b=s(83680),T=a(s(55127)),M=a(s(4231)),x=s(38961),I=a(s(90277)),P=a(s(65565)),A=a(s(2966)),N=a(s(32437)),O=s(85893);class w extends i.Component{constructor(...e){super(...e),this._refContainer=(0,i.createRef)(),this._setDocPicker=e=>this._docPicker=e,this._setMediaPicker=e=>this._mediaPicker=e,this._handleDocumentPick=e=>{if(!e)return void this.dismiss();e.stopPropagation();const t=null==e.target.files?[]:Array.from(e.target.files);if(this.dismiss(),!t.length)return;const s=t.map((e=>({file:e,type:m.FILETYPE.DOCUMENT})));this.attachMediaDrawer(s)},this._handleMediaPick=e=>{if(!e)return void this.dismiss();e.stopPropagation();const t=null==e.target.files?[]:Array.from(e.target.files);this.dismiss(),t.length&&this.attachMediaDrawer(t.map((e=>({file:e}))))},this._handleMediaClick=e=>{if(e.preventDefault(),this._mediaPicker)return this._mediaPicker.open(),!1},this._handleDocumentClick=e=>{if(e.preventDefault(),this._docPicker)return this._docPicker.open(),!1},this.handleContactClick=e=>{e.preventDefault(),u.default.openModal((0,O.jsx)(o.default,{chat:this.props.chat,onContactsSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,{initCaptionUsed:!1})}}))},this.handleProductCatalogClick=e=>{e.preventDefault();const t=this._productCatalogSession.toString();(0,E.logCatalogAttachmentButtonClick)(t),u.default.openModal((0,O.jsx)(r.default,{chat:this.props.chat,sessionId:t}))},this.handleCreateMessengerRoom=()=>{(0,g.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,g.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,g.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)?u.default.openModal((0,O.jsx)(T.default,{chat:this.props.chat})):(0,b.openMessengerRoomUrl)(this.props.chat)}}getElement(){return this._refContainer.current}componentDidMount(){this._productCatalogSession=new I.default;const e=l.default.get((0,g.getMaybeMeUser)());e&&this.props.listeners.add(e,"change:profileOptions",(()=>{this.forceUpdate()}))}_canSendProductCatalog(){if(!c.default.isSMB)return!1;if(!P.default.shopsHideCatalogAttachmentEntrypoint)return!0;const e=l.default.get((0,g.getMaybeMeUser)());return!(0,d.hasShop)(e)}dismiss(){const{uim:e}=this.props;e&&e.uie.requestDismiss()}attachMediaDrawer(e){u.default.attachMediaDrawer({chat:this.props.chat,attachments:e,fileOrigin:M.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,initCaption:this.props.getComposeContents&&this.props.getComposeContents(),onComplete:(e,t)=>{this.props.onMenuComplete&&this.props.onMenuComplete(e,t)}})}_renderAttachDocDropdownItem(){return(0,O.jsx)(p.default,{type:"icon",tooltip:(0,O.jsx)(N.default,{children:C.default.t(266)}),a8n:"mi-attach-document",action:this._handleDocumentClick,children:(0,O.jsxs)("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0,children:[(0,O.jsx)(A.default,{name:"attach-document",className:n.default.iconImage}),(0,O.jsx)(_.default,{ref:this._setDocPicker,mimes:x.DOC_MIMES,onChange:this._handleDocumentPick})]})})}_renderAttachMessengerRoomDropdownItem(){return(0,O.jsx)(p.default,{type:"icon",tooltip:(0,O.jsx)(N.default,{children:C.default.t(1253)}),a8n:"mi-create-messenger-room",action:this.handleCreateMessengerRoom,children:(0,O.jsx)("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0,children:(0,O.jsx)(A.default,{name:"attach-rooms",className:n.default.iconImage})})})}_renderAttachProductCatalogDropdownItem(){return this._canSendProductCatalog()?(0,O.jsx)(p.default,{type:"icon",tooltip:(0,O.jsx)(N.default,{children:C.default.t(269)}),a8n:"mi-attach-product-catalog",action:this.handleProductCatalogClick,children:(0,O.jsx)("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0,children:(0,O.jsx)(A.default,{name:"attach-product",className:n.default.iconImage})})}):null}render(){return(0,O.jsxs)("div",{className:n.default.attachMenuContainer,ref:this._refContainer,children:[(0,O.jsx)(A.default,{name:"attach-shadow"}),(0,O.jsxs)(f.default,{type:"menu",children:[(0,O.jsx)(p.default,{type:"icon",tooltip:(0,O.jsx)(N.default,{children:C.default.t(268)}),a8n:"mi-attach-media",action:this._handleMediaClick,children:(0,O.jsxs)("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0,children:[(0,O.jsx)(A.default,{name:"attach-image",className:n.default.iconImage}),(0,O.jsx)(_.default,{ref:this._setMediaPicker,mimes:[h.default.IMAGE_MIMES,h.default.VIDEO_MIMES].join(","),onChange:this._handleMediaPick})]})}),(0,O.jsx)(p.default,{type:"icon",tooltip:(0,O.jsx)(N.default,{children:C.default.t(264)}),a8n:"mi-attach-camera",action:this.props.onCaptureClick,disabled:!v.default,children:(0,O.jsx)("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0,children:(0,O.jsx)(A.default,{name:"attach-camera",className:n.default.iconImage})})}),this._renderAttachDocDropdownItem(),(0,O.jsx)(p.default,{type:"icon",tooltip:(0,O.jsx)(N.default,{children:C.default.t(270)}),a8n:"mi-attach-contact",action:this.handleContactClick,children:(0,O.jsx)("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0,children:(0,O.jsx)(A.default,{name:"attach-contact",className:n.default.iconImage})})}),this._renderAttachProductCatalogDropdownItem(),this._renderAttachMessengerRoomDropdownItem()]},"AttachMenuDropdown")]})}}w.displayName="AttachMenuDropdown";var D=(0,y.default)((0,S.default)(w));t.default=D},26346:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,onMenuComplete:s}=e,a=(0,C.default)(),i=(0,o.useRef)(null),E=(0,o.useContext)(S.default);(0,o.useEffect)((()=>()=>{var e;null===(e=i.current)||void 0===e||e.call(i),u.default.closeDrawerMid()}),[]);return(0,y.jsx)(m.MenuBarItem,{a8nText:"conversation-clip",icon:(0,y.jsx)(v.default,{name:"clip"}),title:f.default.t(1226),transitionName:"menu",onClick:e=>{(e=>{u.default.existsDrawerMid((t=>{t&&e.preventDefault()}))})(e)},children:(0,y.jsx)(l.default,{chat:e.chat,onCaptureClick:()=>{(()=>{const{asyncStream:e,disposeStream:o}=p.start("camera");i.current=o,(0,_.default)(e,a).then((e=>{e&&u.default.openDrawerMid((0,y.jsx)(d.default,{chat:(0,g.unproxy)(t),stream:e,disposeStream:i.current,onCaptureSent:()=>{s&&s(!0,{initCaptionUsed:!1})}}),"slide-up",(0,r.default)(E,"uimContext"),{noFocus:!0})})).catch((0,n.filteredCatch)(c.GUM.NotAllowedError,(()=>{u.default.openModal((0,y.jsx)(h.default,{messaging:h.Messaging.CAMERA_FAIL,type:h.default.TYPE.GUIDE_UNBLOCK}))}))).catch((0,n.filteredCatch)(c.GUM.GUMError,(()=>{u.default.openModal((0,y.jsx)(h.default,{messaging:h.Messaging.CAMERA_MISSING,type:h.default.TYPE.GUIDE_NONE}))})))})()},getComposeContents:e.getComposeContents,onMenuComplete:e.onMenuComplete})})};var n=s(55084),r=i(s(7900)),o=s(67294),l=i(s(61874)),d=i(s(25215)),u=i(s(91952)),c=a(s(13540)),h=a(s(47683)),f=i(s(2408)),p=a(s(10214)),m=s(47941),_=i(s(79267)),g=s(15298),v=i(s(2966)),S=i(s(64029)),C=i(s(29579)),y=s(85893)},70272:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(9492)),r=s(6637),o=s(85893);class l extends i.Component{constructor(...e){super(...e),this._refDropdown=(0,i.createRef)(),this.getElement=()=>this._refDropdown.current}render(){const{chat:e,onSelectMessages:t}=this.props,s=(0,r.broadcastMenu)(e,t);return this.props.toContextMenuManager?(0,o.jsx)("div",{ref:this._refDropdown,children:s}):(0,o.jsx)(n.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:n.DirX.LEFT,children:s},"BroadcastMenuDropdown")}}t.default=l,l.displayName="BroadcastMenuDropdown"},69827:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(9492)),r=s(6637),o=s(85893);class l extends i.Component{constructor(...e){super(...e),this._refDropdown=(0,i.createRef)(),this.getElement=()=>this._refDropdown.current}render(){const{chat:e,onSelectMessages:t}=this.props,s=(0,r.groupMenu)(e,t);return this.props.toContextMenuManager?(0,o.jsx)("div",{ref:this._refDropdown,children:s}):(0,o.jsx)(n.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:n.DirX.LEFT,children:s},"GroupMenuDropdown")}}t.default=l,l.displayName="GroupMenuDropdown"},63133:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(48926)),r=s(67294),o=i(s(70272)),l=a(s(8581)),d=s(4650),u=s(47874),c=i(s(99857)),h=i(s(91952)),f=i(s(9322)),p=i(s(55454)),m=i(s(28581)),_=i(s(88419)),g=s(9492),v=i(s(69827)),S=i(s(40186)),C=i(s(52087)),y=i(s(98229)),E=i(s(87957)),b=i(s(2408)),T=i(s(71681)),M=s(30333),x=s(47941),I=i(s(4231)),P=i(s(78972)),A=s(70790),N=i(s(90277)),O=i(s(62002)),w=i(s(40630)),D=i(s(65565)),j=i(s(43085)),R=i(s(79485)),L=s(15298),k=i(s(2966)),F=i(s(69217)),B=i(s(68062)),G=i(s(30584)),U=s(85893);const V=s(24082).default,H=s(18124).Z;class W extends r.Component{constructor(){super(...arguments),this._setRefMenuBarItemContainer=e=>{this.setState({refMenuBarItemContainer:e})},this.isListeningForMove=!1,this.didDrag=!1,this._forceUpdate=()=>{this.forceUpdate()},this._updateVoipAvailability=()=>{this.setState({isVoipAvailable:f.default.isVoipInitialized})},this.setRef=e=>{this.ref=e,this.props.onRef(e)},this.handleWindowFocus=()=>{},this.handleMouseDown=()=>{},this.handleDrag=()=>{this.didDrag=!0},this.handleClickCapture=()=>{},this._handleInfoPanel=()=>{const e=this.props.chat;!e.isPSA&&(e.isUser||e.isBroadcast||e.isGroup)&&h.default.openDrawerRight((0,U.jsx)(E.default,{chat:(0,L.unproxy)(e)},`info-${e.id.toString()}`),"slide-left",this.props.uim)},this._checkForDrawerMid=e=>{h.default.existsDrawerMid((t=>{t&&e.preventDefault()}))},this.handleChatSearch=e=>{e.preventDefault();const t=this.props.chat;h.default.existsDrawerMid((e=>{e||h.default.openDrawerRight((0,U.jsx)(c.default,{chat:(0,L.unproxy)(t)},`chat-search-${t.id.toString()}`),"slide-left",this.props.uim)}))},this._handleStartCall=e=>{const t=this.props.chat;if(this.props.chat.isUser)H.checkIfCanStartCall({contact:t.contact,isVideo:e})&&V&&V.callStart(t.contact.id,e);else if(H.checkIfCanStartCall({isGroup:!0,isVideo:e})){var s,a,i;const n=null!==(s=null===(a=t.groupMetadata)||void 0===a?void 0:a.participants)&&void 0!==s?s:[],r=null!==(i=n.map((e=>e.contact.id)))&&void 0!==i?i:[];if(n.length>p.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS){const t=(0,U.jsx)(j.default,{isVideo:e,groupParticipants:r,onStartGroupCall:t=>V.groupCallStart(t,e)});h.default.openModal(t,{transition:"modal-flow"})}else V&&V.groupCallStart(r,e)}},this.handleProductCatalogClick=e=>{e.preventDefault();const t=(0,A.buildProductCatalogContext)(new N.default,I.default.BIZ_PLATFORM.SMB,I.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_CHAT),s=this.props.chat.contact.id;(0,M.logChatCatalogView)({catalogOwnerWid:s,catalogContext:t}),h.default.openDrawerRight((0,U.jsx)(O.default,{chat:this.props.chat,catalogOwnerJid:s.toJid()}),"slide-left",this.props.uim,t)},this.handleShopClick=e=>{e.preventDefault(),(0,u.goToShop)(this.props.chat.contact.businessProfile)},this.state={newlyFocused:!1,isVoipAvailable:f.default.isVoipInitialized,refMenuBarItemContainer:null}}_maybeAddProfileListeners(){this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:profileOptions",this._forceUpdate),this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:catalogStatus",this._forceUpdate)}componentDidMount(){var e=this;return(0,n.default)((function*(){e.props.contact.shouldForceBusinessUpdate&&(yield l.default.find(e.props.chat.contact.id),e._forceUpdate()),e._maybeAddProfileListeners(),e.props.listeners.add(f.default,"change:isVoipInitialized",e._updateVoipAvailability)}))()}_getVoiceCallButton(){const{chat:e}=this.props;if(!H.isVoiceCallEnabled(e.contact,e))return null;let t=e.contact.isMe,s=e.isUser?b.default.t(1800):b.default.t(1011);return CallCollection.activeCall&&(t=!0,s=b.default.t(1845)),(0,U.jsx)(x.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"voice-call-button",icon:(0,U.jsx)(k.default,{name:"voice-call"}),onClick:()=>this._handleStartCall(!1),disabled:t,title:s})}_getVideoCallButton(){const{chat:e}=this.props;if(!H.isVideoCallEnabled(e.contact))return null;let t=e.contact.isMe,s=e.isUser?b.default.t(1773):b.default.t(1010);return CallCollection.activeCall&&(t=!0,s=b.default.t(1845)),(0,U.jsx)(x.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"video-call-button",icon:(0,U.jsx)(k.default,{name:"video-call"}),onClick:()=>this._handleStartCall(!0),disabled:t,title:s})}_getCommerceButton(){var e;const{businessProfile:t}=this.props.chat.contact;return D.default.webShopsChatHeaderButtonEnabled&&(0,u.hasShop)(t)?(0,U.jsx)(x.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"shop-button",icon:(0,U.jsx)(k.default,{name:"shop"}),title:b.default.t(1630),onClick:this.handleShopClick}):(null==t||null===(e=t.profileOptions)||void 0===e?void 0:e.commerceExperience)===d.COMMERCE_EXPERIENCE_TYPES.CATALOG||(null==t?void 0:t.catalogStatus)===l.CATALOG_EXISTS?(0,U.jsx)(x.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"product_catalog-button",icon:(0,U.jsx)(k.default,{name:"catalog-entrypoint"}),title:b.default.t(1459),onClick:this.handleProductCatalogClick}):null}render(){const e=this.props.chat,{contact:t}=this.props;let s,a,i;if(e.isUser)s=(0,U.jsx)(m.default,{chat:e,contact:e.contact,onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0}),a=(0,U.jsx)(G.default,{contact:e.contact,presence:e.presence,chatstate:e.presence.chatstate,location:"title",showBusinessCheckmark:t.showBusinessCheckmarkAsSecondary});else if(e.isBroadcast)s=(0,U.jsx)(o.default,{chat:(0,L.unproxy)(e),onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0}),a=null;else if(e.isGroup){s=(0,U.jsx)(v.default,{chat:(0,L.unproxy)(e),onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0});const t=e.groupMetadata&&e.groupMetadata.participants&&e.groupMetadata.participants.iAmAdmin()&&e.groupMetadata.announce?b.default.t(250):b.default.t(598);a=(0,U.jsx)(S.default,{chatstate:e.presence.chatstate,groupMetadata:e.groupMetadata,presence:e.presence,placeholder:t,location:"title"})}if(this.state.refMenuBarItemContainer&&s){const e={menu:s,anchor:this.state.refMenuBarItemContainer,autoFocus:!0,dirX:b.default.isRTL()?g.DirX.RIGHT:g.DirX.LEFT,dirY:g.DirY.BOTTOM,offsetY:5,type:"dropdown_menu"};i=(0,U.jsx)(B.default,{contextMenu:e})}let n;const r=(0,U.jsx)(x.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"search-button",icon:(0,U.jsx)(k.default,{name:"search-alt"}),title:b.default.t(1565),onClick:this.handleChatSearch});return e.isPSA&&(a=null),(0,U.jsxs)("header",{ref:this.setRef,className:y.default.chatHeader,onClickCapture:this.handleClickCapture,onMouseDown:this.handleMouseDown,children:[(0,U.jsx)("div",{className:y.default.chatAvatar,onClick:this._handleInfoPanel,role:e.isPSA?null:"button",children:(0,U.jsx)(_.default,{id:e.id,size:40,showEphemeralIcon:!0})}),(0,U.jsxs)("div",{className:y.default.chatBody,onClick:this._handleInfoPanel,role:e.isPSA?null:"button",children:[(0,U.jsx)("div",{className:y.default.chatMain,children:(0,U.jsx)("div",{className:y.default.chatTitle,children:(0,U.jsx)(P.default,{chat:e,titlify:!0,ellipsify:!0,showBusinessCheckmark:t.showBusinessCheckmarkAsPrimary})})}),a]}),(0,U.jsx)("div",{className:y.default.chatControls,children:(0,U.jsxs)(x.MenuBar,{children:[null,null,n,this._getCommerceButton(),r,(0,U.jsx)("div",{ref:this._setRefMenuBarItemContainer,children:(0,U.jsx)(x.MenuBarItem,{tabOrder:p.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"conversation-menu",icon:(0,U.jsx)(k.default,{name:"menu"}),title:b.default.t(1227),onClick:this._checkForDrawerMid,children:i})})]},"conversation-header")})]})}}W.CONCERNS={chat:["id","formattedTitle","presence","isUser","isGroup","isBroadcast","groupMetadata","isPSA","contact","name"],contact:["showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary","shouldForceBusinessUpdate"]},W.displayName="ConversationHeader";var Y=(0,C.default)((0,F.default)((0,T.default)((0,w.default)((0,R.default)(W,W.CONCERNS)))));t.default=Y},26976:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({canonicalUrl:e,compose:t,description:s,displayType:a,invite:i,onClick:r,isSentByMe:d,star:m,thumbnail:_,thumbnailJpeg:g,thumbnailJpegHQ:v,thumbnailJpegDirectPath:S,thumbnailJpegHeight:C,thumbnailJpegWidth:y,title:E,theme:b}){const T=a===o.default.DISP_TYPE.GALLERY,M=("high-quality"===b||"high-quality-extended"===b)&&!T;let x,I;if(null!=_)I=(0,h.jsx)("div",{className:u.default.media,children:_});else if(g||v){const e=v&&!T?v:g;if(e&&(I=(0,h.jsx)("img",{alt:"",className:u.default.media,src:`data:image/jpeg;base64,${e}`}),(S||v)&&null!=C&&null!=y&&!T))if(M){const e=Math.min(Math.max(C/y,.25),1),t=e<1?330:240;I=(0,h.jsx)("div",{className:(0,n.default)(u.default.thumbnailContainer,{[u.default.blurred]:!v}),style:{height:t*e},children:I})}else{const e=Math.min(Math.max(C/y,1),1.4),t=90;I=(0,h.jsx)("div",{className:(0,n.default)(u.default.thumbnailContainer,{[u.default.blurred]:!v}),style:{width:t/e,minWidth:t/e},children:I})}}else a===o.default.DISP_TYPE.GALLERY&&(I=(0,h.jsx)("div",{className:u.default.noThumbContainer,children:(0,h.jsx)(c.default,{className:u.default.noThumbIcon,name:"link"})}));if(a===o.default.DISP_TYPE.GALLERY){const e=m?(0,h.jsx)(c.default,{className:u.default.iconStar,name:"star"}):null;x=(0,h.jsxs)("div",{className:u.default.galleryContainer,children:[I,e]})}else x=I;const P=f(E),A=p(P),N="string"==typeof s?f(s):void 0,O=p(N),w=null!=s?(0,h.jsx)("div",{className:u.default.description,children:"string"==typeof s?(0,h.jsx)(l.default,{text:s,titlify:!0,direction:N,dirMismatch:O}):s}):null,D=e?(0,h.jsx)("div",{className:u.default.source,children:(0,h.jsx)(l.default,{text:e,direction:P,dirMismatch:A})}):null,j=(0,n.default)(u.default.preview,{[u.default.isInvite]:a!==o.default.DISP_TYPE.GALLERY&&i,[u.default.isCompose]:t,[u.default.bubbleIn]:!d,[u.default.bubbleOut]:d,[u.default.extended]:"extended"===b,[u.default.highQualityLayout]:M});return(0,h.jsxs)("div",{className:j,onClick:r,children:[x,(0,h.jsxs)("div",{className:u.default.body,children:[(0,h.jsx)("div",{className:u.default.title,title:E,children:(0,h.jsx)(l.default,{text:E,direction:P,dirMismatch:A})}),w,D]})]})};var n=i(s(94184)),r=a(s(40052)),o=i(s(55454)),l=i(s(85051)),d=i(s(2408)),u=i(s(60484)),c=i(s(2966)),h=s(85893);function f(e){return e?r.dir(e):void 0}function p(e){return"rtl"===e!==d.default.isRTL()}},70603:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({direction:e,loadMoreMsgs:t,isLoadingEarlierMsgs:s,isLoadingRecentMsgs:a,isLoadingAroundMsgs:u}){let c,h,f;if("earlier"===e&&s||"recent"===e&&a||"around"===e&&u)c=(0,d.jsx)(o.default,{stroke:6,size:24,color:"highlight"}),h=n.default.t(1145);else{if(i.default.supportsFeature(i.default.F.MD_BACKEND)&&"earlier"===e)return null;switch(e){case"earlier":h=n.default.t(1142);break;case"recent":h=n.default.t(1143);break;default:h=n.default.t(1145)}c=(0,d.jsx)(l.default,{name:"refresh"}),f=t}return(0,d.jsx)("div",{className:r.default.wrapper,children:(0,d.jsx)("div",{className:r.default.button,title:h,onClick:f,children:c})})},t.MessageListButton=function({children:e,onClick:t,title:s}){return(0,d.jsx)("div",{className:r.default.wrapper,children:(0,d.jsx)("div",{className:r.default.button,title:s,onClick:t,children:e})})};var i=a(s(12950)),n=a(s(2408)),r=a(s(92419)),o=a(s(46714)),l=a(s(2966)),d=s(85893)},6637:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.groupMenu=function(e,t){const s=[];s.push((0,u.jsx)(r.default,{a8n:"mi-group-info",action:()=>i.default.chatInfoDrawer(e),children:o.default.t(1989)},"info")),s.push((0,u.jsx)(r.default,{a8n:"mi-select-messages",action:t,children:o.default.t(2151)},"select")),e.mute.canMute()&&s.push((0,u.jsx)(l.default,{onMute:t=>i.default.muteChat(e,t),mute:e.mute,chat:e,settings:d.default},"mute"));return s.push((0,u.jsx)(r.default,{a8n:"mi-clear",action:()=>i.default.clearChat(e),children:o.default.t(593)},"clear")),s.push((0,u.jsx)(n.default,{onDeleteOrExit:()=>i.default.deleteOrExitChat(e),chat:e},"delete")),s},t.broadcastMenu=function(e,t){const s=[];return s.push((0,u.jsx)(r.default,{a8n:"mi-broadcast-info",action:()=>i.default.chatInfoDrawer(e),children:o.default.t(2042)},"info")),s.push((0,u.jsx)(r.default,{a8n:"mi-select-messages",action:t,children:o.default.t(2151)},"select")),s.push((0,u.jsx)(r.default,{a8n:"mi-clear",action:()=>i.default.clearChat(e),children:o.default.t(593)},"clear")),s.push((0,u.jsx)(n.default,{onDeleteOrExit:()=>i.default.deleteOrExitChat(e),chat:e},"delete")),s};var i=a(s(91952)),n=a(s(47904)),r=a(s(47452)),o=a(s(2408)),l=a(s(78746)),d=a(s(87947)),u=s(85893)},74909:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(7900)),r=s(67294),o=a(s(63764)),l=s(72987),d=a(s(91952)),u=a(s(55454)),c=a(s(2408)),h=a(s(71681)),f=s(92310),p=a(s(64863)),m=s(97504),_=a(s(51474)),g=s(85893);class v extends r.Component{constructor(...e){super(...e),this._refContainer=(0,r.createRef)(),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{d.default.refreshMessages()},this.ref=(0,r.createRef)()}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}getRef(){var e;return null===(e=this.ref)||void 0===e?void 0:e.current}getContainerElement(){return(0,n.default)(this._refContainer.current,"this._refContainer.current")}render(){const{msg:e,albumMsgs:t,albumPosition:s,isMsgVisible:a,zoomMsg:n,numAdditionalMedia:r}=this.props,d=(0,i.default)({[o.default.albumTopLeft]:s===l.AlbumPosition.TOP_LEFT,[o.default.albumTopRight]:s===l.AlbumPosition.TOP_RIGHT,[o.default.albumBottomLeft]:s===l.AlbumPosition.BOTTOM_LEFT,[o.default.albumBottomRight]:s===l.AlbumPosition.BOTTOM_RIGHT});let h,v;if(null!=r&&0!==r&&(h=(0,g.jsx)(m.TextSpan,{theme:"large",className:(0,i.default)(o.default.numberText),children:c.default.t(1393,{number:r})})),e.type===u.default.MSG_TYPE.IMAGE)v=(0,g.jsx)(p.default,{theme:f.DisplayTheme.Album,albumMsgs:t,msg:e,mediaData:e.mediaData,ref:this.ref,isMsgVisible:a,zoomMsg:n,overlayContent:h,displayAuthor:!1});else{if(e.type!==u.default.MSG_TYPE.VIDEO)throw new Error("Unexpected Album Type: "+e.type);v=(0,g.jsx)(_.default,{theme:f.DisplayTheme.Album,albumMsgs:t,msg:e,mediaData:e.mediaData,ref:this.ref,zoomMsg:n,displayAuthor:!1,overlayContent:h})}return(0,g.jsx)("div",{ref:this._refContainer,className:o.default.albumGridClass,children:(0,g.jsx)("div",{className:d,children:v})})}}v.displayName="AlbumGrid";const S=(0,h.default)(v);t.default=class extends S{constructor(...e){super(...e),this.getRef=()=>this.getComponent().getRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},72987:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlbumPosition=void 0;t.AlbumPosition={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}},23719:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=i(s(7900)),o=i(s(41143)),l=s(67294),d=i(s(96774)),u=i(s(74909)),c=s(72987),h=i(s(17850)),f=s(33287),p=i(s(91952)),m=i(s(75940)),_=i(s(55454)),g=i(s(7235)),v=s(73554),S=a(s(47452)),C=i(s(97227)),y=i(s(40854)),E=i(s(47193)),b=i(s(85033)),T=i(s(89513)),M=i(s(12950)),x=i(s(3748)),I=i(s(67008)),P=i(s(42229)),A=i(s(2408)),N=s(50256),O=s(57990),w=i(s(87459)),D=s(51435),j=i(s(18416)),R=s(17223),L=s(15298),k=i(s(2966)),F=i(s(63477)),B=i(s(68062)),G=i(s(82669)),U=i(s(33947)),V=s(61211),H=s(66893),W=s(85893);class Y extends l.Component{getContainerElement(){return this._refAlbumWrapper.current}constructor(e){super(e),this._refAlbumWrapper=(0,l.createRef)(),this.refAlbumComponents={},this.setRefContext=e=>{this.refContext=e},this._refTail=(0,l.createRef)(),this.setRefBubble=e=>{this.refBubble=e},this._setRefLeftStickerBubble=e=>{this._refLeftStickerBubble=e},this._setRefRightStickerBubble=e=>{this._refRightStickerBubble=e},this._firstStickerRef=(0,l.createRef)(),this._secondStickerRef=(0,l.createRef)(),this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.contextMenu=e=>{e.stopPropagation()},this.openForwardFlow=(e,t)=>{const{msgs:s}=this.props;let a;for(let e=0;e<s.length;e++)if(s[e].isUnsentMedia){a=A.default.t(885,{_plural:1});break}a?p.default.openModal((0,W.jsx)(m.default,{title:A.default.t(888),onOK:()=>p.default.closeModal(),okText:A.default.t(2085),children:a})):e?this.handleSelectClick({selectedMsg:t}):p.default.openModal((0,W.jsx)(b.default,{msgs:s.map((e=>e.unsafe()))}),{transition:"modal-flow"})},this.handleStar=()=>{const{msgs:e}=this.props;p.default.sendStarMsgs(e[0].chat,e)},this.handleUnstar=()=>{const{msgs:e}=this.props;p.default.sendUnstarMsgs(e[0].chat,e)},this.handleSelectClick=e=>{const{selectedMsg:t,event:s}=e;if(s&&s.stopPropagation(),t)return void this.props.onMessageSelect((0,L.unproxy)(t.unsafe()),!this.props.selectedMessages.isSelected((0,L.unproxy)(t)),s);const a=0===this.state.selectedCount;this.props.msgs.forEach((e=>{this.props.onMessageSelect((0,L.unproxy)(e.unsafe()),a,s)}))},this._computeSelectedCount=()=>{const{msgs:e,selectedMessages:t}=this.props;let s=0;return e.forEach((e=>{t.isSelected((0,L.unproxy)(e.unsafe()))&&s++})),s},this.handleDownload=()=>{C.default.initDownload(this.props.msgs.map((e=>e.unsafe())))},this.handleDeleteMessage=()=>{const{msgs:e}=this.props;p.default.openModal((0,W.jsx)(g.default,{chat:e[0].chat,msgList:e.map((e=>e.unsafe())),deletePrompt:!0,revokePrompt:e[0].canRevoke(),isMsgVisible:this.props.isMsgVisible}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.handleMenu=(e,t)=>{const{msgs:s}=this.props;if(t&&this.state.contextMenu)return void this.setState({contextMenu:null});const a=t?this._getMenuRefContext():e,i=[];s.every((e=>e.mediaData&&e.mediaData.isDownloadable()))&&i.push((0,W.jsx)(S.default,{a8n:"mi-msg-download",action:this.handleDownload,children:A.default.t(784)},"download"));s.every((e=>e.canForward()))&&i.push((0,W.jsx)(S.default,{a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)},children:A.default.t(905)},"forward"));if(s.every((e=>e.canStar()))){s.every((e=>e.star))?i.push((0,W.jsx)(S.default,{a8n:"mi-msg-unstar",action:()=>{this.handleUnstar()},children:A.default.t(1721)},"star")):i.push((0,W.jsx)(S.default,{a8n:"mi-msg-star",action:()=>{this.handleStar()},children:A.default.t(1638)},"star"))}i.push((0,W.jsx)(S.default,{a8n:"mi-msg-delete",action:this.handleDeleteMessage,children:A.default.t(744)},"delete")),this.setState({contextMenu:{menu:i,anchor:a,theme:S.ThemeOptions.COMPACT}})},this.openContextMenu=()=>{this.state.hover?this.handleMenu(void 0,!0):this.setState({hover:!0},(()=>{this.handleMenu(void 0,!0)}))},this.closeContextMenu=()=>{const e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this._handleAlbumGridRendered=(e,t)=>{e?this.refAlbumComponents[t.id.toString()]=e:delete this.refAlbumComponents[t.id.toString()]},this.scrollMsg=(e,t)=>{const s=this._refAlbumWrapper.current;if(!s)return;const a=s.offsetParent;a&&((0,o.default)(a instanceof HTMLElement,"DOM offset parent is not a valid HTMLElement"),(0,v.scrollAt)(s,a,t).then(e))},this.highlight=()=>{const e=this._refTail.current;let t;this.isGroupedSticker()?0===this.props.focusedMsgIndex?t=this._refLeftStickerBubble:1===this.props.focusedMsgIndex&&(t=this._refRightStickerBubble):t=this.refBubble,t&&(y.default.indicateFocus(t,U.default.highlightAnimation),y.default.indicateFocus(e,U.default.highlightAnimation),this.props.isFocusable&&this.focus({preventScroll:!0}))};const t=this._computeSelectedCount();this.state={contextMenu:null,hover:!1,selectedCount:t}}componentDidMount(){M.default.supportsFeature(M.default.F.MEDIA_EXISTENCE_CHECK)&&this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).forEach((e=>{(0,O.checkExistence)(e)}))}componentDidUpdate(e){if(this.props.msgs!==e.msgs&&M.default.supportsFeature(M.default.F.MEDIA_EXISTENCE_CHECK)){const t=new Set(e.msgs);this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).filter((e=>!t.has(e))).forEach((e=>{(0,O.checkExistence)(e)}))}}shouldComponentUpdate(e,t){if(!(0,d.default)(t,this.state))return!0;return!(0,d.default)(e,this.props,((e,t,s)=>{if("msgs"===s)return(0,d.default)(e,t)}))}onSelectChange(e){let t;t=this.isGroupedSticker()?this._computeSelectedCount():e?this.props.msgs.length:0,this.state.selectedCount!==t&&this.setState({selectedCount:t})}_isKeyboardUser(){return this.context}isGroupedSticker(){const[e,t]=this.props.msgs;return null!=e.asGroupedSticker&&null!=t.asGroupedSticker}focus(e){var t;(null===(t=this._refAlbumWrapper)||void 0===t?void 0:t.current)&&E.default.focus(this._refAlbumWrapper.current,e)}render(){const{msgs:e,position:t,isMsgVisible:s,albumId:a,isFocusedAlbum:i,focusedMsgIndex:o,selectedMessages:l,isFocusable:d}=this.props,p=e[0],m=e[1],g=p.isSentByMe,v=p.isGroupMsg,S=this.isGroupedSticker(),C=e.length>_.default.ALBUM_MIN_SIZE?e.length-_.default.ALBUM_MIN_SIZE+1:null,y=t===D.MsgPosition.FRONT||t===D.MsgPosition.SINGLE||S,E=(0,n.default)(U.default.msg,{[U.default.msgContinuation]:t===D.MsgPosition.FRONT||t===D.MsgPosition.MID,"message-out":g,"message-in":!g,[N.LIST_FOCUSABLE_ITEM_CLASS_NAME]:d}),b=!g&&v;let M;if(b){const t=(0,n.default)(U.default.author,{[U.default.groupStickerAuthor]:S});M=(0,W.jsx)("div",{className:t,children:(0,W.jsx)(h.default,{msg:e[0],contact:e[0].senderObj,albumId:a})})}const P=(0,n.default)(U.default.message,{[U.default.messageTransparent]:S,[U.default.hasTail]:y,[U.default.tailOverrideHide]:S&&y&&(g||!v),[U.default.hasAuthor]:!this.isGroupedSticker()&&b,[U.default.forwarded]:!this.isGroupedSticker()&&(0,R.showForwarded)(e[0])}),A=(0,n.default)(U.default.albumBubbleContainer,{[U.default.messageBackground]:!S,[U.default.hasBorderBox]:!S});let O,Y,K,q,z;y&&(O=(0,W.jsx)(k.default,{name:(0,V.getTailName)(g),className:U.default.tail,containerRef:this._refTail})),p.canQuickForward()&&(Y=(0,W.jsx)("div",{className:(0,n.default)(U.default.quickActionButton,{[U.default.authorForward]:b}),onClick:()=>{this.openForwardFlow(!1)},role:"button",children:(0,W.jsx)(k.default,{name:"forward-chat"})})),(this.state.hover||this.state.contextMenu)&&(K=(0,W.jsx)(w.default,{msg:p.unsafe(),hasAuthor:b,position:t,ref:this.setRefContext,onToggle:e=>{this.handleMenu(e)}},"icon-context")),q=this.state.contextMenu?"none":p.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(z=(0,W.jsx)(F.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,W.jsx)(B.default,{contextMenu:this.state.contextMenu})}));const $=this.props.selectable?(0,W.jsx)(j.default,{checked:this.state.selectedCount>0,theme:this.state.selectedCount>0&&this.state.selectedCount<e.length?f.CHECKBOX_THEME.PARTIAL:void 0,onClick:e=>{this.handleSelectClick({event:e})}}):null;let Q;if(this.props.isFocusedAlbum&&(Q=(0,W.jsx)(H.WhileFocusedListener,{parent:this})),S){var X,Z;const t=e.map((e=>(0,W.jsx)(H.SelectionListener,{parent:this,msgId:e.id.toString(),selectedMessages:l},e.id.toString()))),n=this.props.selectable?(0,W.jsx)(I.default,{checked:this.props.selectedMessages.isSelected((0,L.unproxy)(p.unsafe())),onClick:()=>{this.handleSelectClick({selectedMsg:p.unsafe()})}}):null,d=this.props.selectable?(0,W.jsx)(I.default,{checked:this.props.selectedMessages.isSelected((0,L.unproxy)(m.unsafe())),onClick:()=>{this.handleSelectClick({selectedMsg:m.unsafe()})}}):null;return(0,W.jsxs)("div",{className:E,"data-id":a,ref:this._refAlbumWrapper,tabIndex:-1,children:[(0,W.jsx)(G.default,{transitionName:"delay-leave",children:$}),(0,W.jsxs)("div",{className:P,onContextMenu:this.contextMenu,children:[O,M,(0,W.jsxs)("div",{className:U.default.groupStickerContainer,children:[(0,W.jsxs)("div",{onMouseEnter:null===(X=this._firstStickerRef.current)||void 0===X?void 0:X.startAnimation,className:U.default.singleGroupedStickerContainer,ref:this._setRefLeftStickerBubble,children:[(0,W.jsx)(G.default,{transitionName:"delay-leave",children:n}),(0,W.jsx)(x.default,{msg:(0,r.default)(p.asGroupedSticker,"firstMsg.asGroupedSticker"),menuTransition:q,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:s,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:i&&0===o,forwardRef:this._firstStickerRef})]}),(0,W.jsxs)("div",{onMouseEnter:null===(Z=this._secondStickerRef.current)||void 0===Z?void 0:Z.startAnimation,className:U.default.singleGroupedStickerContainer,ref:this._setRefRightStickerBubble,children:[(0,W.jsx)(G.default,{transitionName:"delay-leave",children:d}),(0,W.jsx)(x.default,{msg:(0,r.default)(m.asGroupedSticker,"secondMsg.asGroupedSticker"),menuTransition:q,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:s,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:i&&1===o,forwardRef:this._secondStickerRef})]})]})]}),t]})}{const t=e.map((e=>e.asAlbumAsset)).filter(Boolean);t.length!==e.length&&(__LOG__(4,void 0,new Error,!0)`Only ${t.length}/${e.length} were valid album messages`,SEND_LOGS("invalid-album-grid"));const i=t.length>_.default.ALBUM_MIN_SIZE?t[0]:null,n=(0,R.showForwarded)(e[0])?(0,W.jsx)(T.default,{msg:e[0].unsafe(),className:U.default.forwardedIndicator}):null;return(0,W.jsxs)("div",{className:E,"data-id":a,ref:this._refAlbumWrapper,tabIndex:-1,children:[(0,W.jsx)(G.default,{transitionName:"delay-leave",children:$}),(0,W.jsxs)("div",{className:P,onContextMenu:this.contextMenu,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown,children:[O,(0,W.jsxs)("div",{className:A,ref:this.setRefBubble,children:[M,n,(0,W.jsxs)("div",{className:U.default.gridContainer,children:[(0,W.jsx)(u.default,{msg:(0,r.default)(e[0].asAlbumAsset,"msgs[0].asAlbumAsset"),albumMsgs:t,albumPosition:c.AlbumPosition.TOP_LEFT,isMsgVisible:s,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[0])}))}),(0,W.jsx)(u.default,{msg:(0,r.default)(e[1].asAlbumAsset,"msgs[1].asAlbumAsset"),albumMsgs:t,albumPosition:c.AlbumPosition.TOP_RIGHT,isMsgVisible:s,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[1])}))}),(0,W.jsx)(u.default,{msg:(0,r.default)(e[2].asAlbumAsset,"msgs[2].asAlbumAsset"),albumMsgs:t,albumPosition:c.AlbumPosition.BOTTOM_LEFT,isMsgVisible:s,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[2])}))}),(0,W.jsx)(u.default,{msg:(0,r.default)(e[3].asAlbumAsset,"msgs[3].asAlbumAsset"),albumMsgs:t,albumPosition:c.AlbumPosition.BOTTOM_RIGHT,isMsgVisible:s,zoomMsg:i,numAdditionalMedia:C,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{this._handleAlbumGridRendered(t,e[3])}))})]})]}),(0,W.jsx)(G.default,{transitionName:q,children:K}),Y]}),z,Q,(0,W.jsx)(H.SelectionListener,{parent:this,msgId:e[0].id.toString(),selectedMessages:l})]})}}}t.default=Y,Y.contextType=P.default,Y.displayName="AlbumWrapper"},20615:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(4991)),o=i(s(45660)),l=a(s(89906)),d=i(s(17850)),u=i(s(91952)),c=(i(s(55454)),i(s(32666))),h=s(90672),f=i(s(23929)),p=i(s(4231)),m=i(s(79485)),_=s(15298),g=i(s(2966)),v=s(85893);class S extends n.PureComponent{constructor(e){super(e),this._refAudioPlayer=(0,n.createRef)(),this.showMediaMissing=()=>{u.default.openModal((0,v.jsx)(c.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),u.default.openModal((0,v.jsx)(f.default,{msg:(0,_.unproxy)(this.props.msg.unsafe())}))},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}handleKeyActivation(e){var t;null===(t=this._refAudioPlayer.current)||void 0===t||t.handleKeyActivation(e)}render(){const e=this.props.msg,t=this.props.mediaData;let s;const a=this.state.playing?this.state.currentTime:t.duration;switch(t.mediaStage){case h.MEDIA_DATA_STAGE.RESOLVED:s=(0,v.jsx)(l.default,{ref:this._refAudioPlayer,mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,duration:a,playing:this.state.playing,played:!0,autoPlay:!1,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:e.isSentByMe,displayType:this.props.displayType});break;case h.MEDIA_DATA_STAGE.NEED_POKE:s=(0,v.jsx)(l.AudioPlayerFrame,{icon:(0,v.jsx)(g.default,{name:"audio-download"}),outgoingMsg:e.isSentByMe,action:this._forceDownloadMedia});break;case h.MEDIA_DATA_STAGE.NEED_UPLOAD:s=(0,v.jsx)(l.AudioPlayerFrame,{icon:(0,v.jsx)(g.default,{name:"audio-upload"}),outgoingMsg:e.isSentByMe,action:this.resumeUpload});break;case h.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:s=(0,v.jsx)(l.AudioPlayerFrame,{icon:(0,v.jsx)(g.default,{name:"audio-upload"}),outgoingMsg:e.isSentByMe,action:this.resumeRemoteUpload});break;case h.MEDIA_DATA_STAGE.ERROR_MISSING:s=(0,v.jsx)(l.AudioPlayerFrame,{icon:(0,v.jsx)(g.default,{name:"audio-play",directional:!0}),outgoingMsg:e.isSentByMe,action:this.showMediaMissing});break;default:s=(0,v.jsx)(l.AudioPlayerFrame,{outgoingMsg:e.isSentByMe,spinner:!0})}const i=(0,v.jsx)("div",{className:r.default.icon,children:(0,v.jsx)(g.default,{name:"audio-file"})}),n=this.props.displayAuthor?(0,v.jsx)(d.default,{msg:e,contact:e.senderObj}):null;return(0,v.jsx)(o.default,{msg:e,quotedMsg:this.props.quotedMsg,author:n,player:s,avatar:i,displayType:this.props.displayType})}}S.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj"],mediaData:["duration","type","mediaStage","renderableUrl"]},S.displayName="Audio";const C=(0,m.default)(S,S.CONCERNS);t.default=class extends C{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}},45660:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(84284)),r=a(s(55454)),o=a(s(32646)),l=a(s(89513)),d=a(s(2408)),u=a(s(76480)),c=s(17223),h=a(s(68835)),f=a(s(59594)),p=a(s(65565)),m=a(s(76006)),_=s(85893);var g=e=>{const{msg:t}=e,{id:s,type:a,ack:g,isSentByMe:v}=(0,m.default)(t,["id","type","ack","isSentByMe"]),S=d.default.isRTL()?!v:v,C=(0,i.default)(n.default.bubble,{[n.default.bubbleRightAvatar]:!S,[n.default.bubbleLeftAvatar]:S,[n.default.hasAuthor]:e.author,[n.default.hasQuote]:e.quotedMsg,[n.default.isGallery]:e.displayType===r.default.DISP_TYPE.STARRED_MSGS||e.displayType===r.default.DISP_TYPE.GALLERY,[n.default.isForwarded]:(0,c.showForwarded)(t)}),y=e.status?(0,_.jsx)("div",{className:n.default.status,children:e.status}):null,E=null!=e.author?(0,_.jsx)("div",{className:n.default.author,children:e.author}):null,b=(0,c.showForwarded)(t)?(0,_.jsx)(l.default,{msg:t.unsafe(),className:n.default.forwardedIndicator}):null,T=e.quotedMsg?(0,_.jsx)("div",{className:n.default.quote,children:e.quotedMsg}):null,{playbackRate:M,playbackControlMessageId:x}=(0,m.default)(f.default,["playbackRate","playbackControlMessageId"]);let I,P=!1;if(p.default.pttPlaybackSpeedEnabled&&"ptt"===a){P=x===s.toString();const e=(0,i.default)(n.default.playbackRateButtonContainer,{[n.default.playbackRateButtonContainerVisible]:P});I=(0,_.jsx)("div",{className:e,children:(0,_.jsx)(h.default,{playbackRate:M,onClick:()=>{f.default.advancePlaybackRateFor(s)},isSentByMe:v,played:g===r.default.ACK.PLAYED})})}const A=(0,i.default)(n.default.avatar,{[n.default.avatarVisible]:!P});return(0,_.jsxs)("div",{className:C,children:[E,b,T,(0,_.jsx)(o.default,{msg:t.unsafe(),wrapperClass:n.default.ctwaContext}),(0,_.jsxs)("div",{className:n.default.body,children:[(0,_.jsx)("div",{className:n.default.player,children:e.player}),(0,_.jsxs)("div",{className:n.default.avatarContainer,children:[I,(0,_.jsxs)("div",{className:A,children:[e.avatar,y]})]})]}),(0,_.jsx)("div",{className:n.default.meta,children:(0,_.jsx)(u.default,{msg:t})})]})};t.default=g},89906:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayerFrame=N,t.default=void 0;var i=a(s(94184)),n=a(s(7900)),r=s(67294),o=s(80423),l=a(s(35370)),d=a(s(37781)),u=a(s(25142)),c=a(s(91952)),h=a(s(55454)),f=s(74504),p=a(s(2408)),m=a(s(71681)),_=a(s(80747)),g=a(s(4231)),v=a(s(65281)),S=a(s(80959)),C=s(85607),y=a(s(59594)),E=a(s(94577)),b=a(s(65565)),T=a(s(79485)),M=s(15298),x=a(s(2966)),I=a(s(69217)),P=s(85893);class A extends r.PureComponent{constructor(e){super(e),this.setRefAudio=e=>{this._refAudio=e},this._scrollPositionDetectorRef=(0,r.createRef)(),this._onPlayClick=()=>{this._scrollPositionDetectorRef.current&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);const e=this._refAudio;e&&(this.props.playing?e.pause():this._playAudio(!1))},this.handleKeyActivation=e=>{e.preventDefault(),this._onPlayClick()},this._onPttPlayback=e=>{if(this.props.currMsgId!==e)return;this.setState({sequentialPlayback:!0,currentTime:0}),this._scrollPositionDetectorRef.current&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);const t=this._refAudio;t&&(this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{t.currentTime=0,this._playAudio(!0)})).catch((e=>{__LOG__(3)`AudioPlayer:onPttPlayback error: ${e}`})).finally((()=>{this._delayPttPromise=null})))},this._delayPtt=e=>new Promise((t=>this.props.setInterval(t,e))),this._onNewPttRecording=()=>{const e=this._refAudio;e&&(this.props.playing&&e.pause(),this._delayPttPromise&&this._delayPttPromise.cancel())},this.onPlaying=()=>{const{currMsgId:e,onPlayingUpdate:t,pttPrefs:s}=this.props;if(e){c.default.pttPlaying(e);const t=s.setPlayingMessage(e);this._playingMessageEnded=()=>{this._playingMessageEnded=null,t()}}t(!0)},this.onPause=()=>{this.props.onPlayingUpdate(!1)},this.onEnded=()=>{var e;const t=this._refAudio;t&&(t.currentTime=0,t.load(),this._maybePlayNextPTT(),this._commitPttPlaybackWamEvent(!0),null===(e=this._playingMessageEnded)||void 0===e||e.call(this))},this._updateProgress=()=>{const e=this._refAudio;if(!e)return;const{currentTime:t,duration:s}=e,a=this._pttPlaybackWamEvent;if(null!=a){var i;const e=null!==(i=a.pttPlayedPct)&&void 0!==i?i:0;a.pttPlayedPct=Math.max(t/s,e)}const n=Math.round(t);n!==this._previousNotifiedTime&&(this._previousNotifiedTime=n,this.props.onTimeUpdate(n));const r=this.state.currentTime,o=D(this.props,this.state);!isFinite(s)||t===r&&s===o||this.setState({currentTime:t,audioDuration:s})},this._handleSeekBarChange=e=>{const t=this._refAudio;if(!t)return;const{duration:s}=t;e!==s||this.props.playing?(this.setState({currentTime:e}),t.currentTime=e):(this.setState({currentTime:0}),t.currentTime=0),null!=this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent.pttSeekCnt+=1)},this.onPlayerError=()=>{this._commitPttPlaybackWamEvent(!1)},this._onOtherPttPlaying=e=>{this.props.currMsgId!==e&&this._delayPttPromise&&this._delayPttPromise.cancel()},this._renderAudioTag=e=>(0,P.jsx)(d.default,{autoPlay:this.props.autoPlay,onError:this.onPlayerError,preload:"auto",setRefAudio:this.setRefAudio,url:e,playbackRate:this.props.isPtt?this.props.pttPrefs.playbackRate:1}),this._prevPlaybackRate=e.pttPrefs.playbackRate,this.state={currentTime:0,audioDuration:D(e,null),playedBefore:e.played,sequentialPlayback:!1}}componentDidMount(){const e=(0,n.default)(this._refAudio,"this._refAudio");this.props.listeners.add(e,"playing",this.onPlaying),this.props.listeners.add(e,"pause",this.onPause),this.props.listeners.add(e,"ended",this.onEnded),this.props.listeners.add(e,"timeupdate",this._updateProgress),this.props.listeners.add(e,"durationchange",this._updateProgress),this.props.listeners.add(e,"progress",this._updateProgress),this.props.listeners.add(c.default,"pttRecording",this._onNewPttRecording),this.props.listeners.add(c.default,"sequential_playback_ptt",this._onPttPlayback),this.props.listeners.add(c.default,"pttPlaying",this._onOtherPttPlaying)}componentDidUpdate(e){var t;this.props.playing!==e.playing&&(this.props.playing?this._cancelProgressUpdateInterval=function(e){let t;const s=()=>{t=requestAnimationFrame((()=>{e(),s()}))};return s(),()=>{cancelAnimationFrame(t)}}(this._updateProgress):null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this));if(null!=this._pttPlaybackWamEvent){const{playbackRate:e}=this.props.pttPrefs;e!==this._prevPlaybackRate&&(this._prevPlaybackRate=e,this._pttPlaybackWamEvent.pttPlaybackSpeedCnt+=1)}}componentWillUnmount(){var e,t;null===(e=this._playingMessageEnded)||void 0===e||e.call(this),null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this),this._commitPttPlaybackWamEvent(!0)}_isValidPlaybackSequence(e){return e.type===h.default.MSG_TYPE.PTT&&!(e.isSentByMe&&!this.props.outgoingMsg&&!this.state.playedBefore)}_playAudio(e){const t=this._refAudio;t&&(t.play(),this.props.isPtt&&null==this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent=new g.default.PttPlayback({pttSeekCnt:0,pttPlaybackSpeedCnt:0,pttTrigger:e?g.default.PTT_TRIGGER_TYPE.SEQUENTIAL:g.default.PTT_TRIGGER_TYPE.MANUAL})))}_maybePlayNextPTT(){let e=this.state.sequentialPlayback;if(!this.props.getSequentialMsg||!this.props.currMsgId)return;const t=this.props.getSequentialMsg(this.props.currMsgId);t&&this._isValidPlaybackSequence(t)?this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{var e;S.default.getGlobalSounds()&&(0,C.playMidPttTone)();const s=null===(e=this._scrollPositionDetectorRef.current)||void 0===e?void 0:e.getBoundingClientRect().top;null!=s&&this._startingScrollPos===s&&c.default.scrollToPtt(t.unsafe()),c.default.autoplayPTT(t.id)})).catch((e=>{__LOG__(3)`AudioPlayer:maybePlayNextPTT (with next message) error: ${e}`})).finally((()=>{this._delayPttPromise=null})):this.state.sequentialPlayback&&(this._delayPttPromise=this._delayPtt(h.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{S.default.getGlobalSounds()&&(0,C.playEndPttTone)(),this._delayPttPromise=null})).catch((e=>{__LOG__(3)`AudioPlayer:maybePlayNextPTT (last message) error: ${e}`})).finally((()=>{this._delayPttPromise=null})),e=!1),this.setState({playedBefore:!0,sequentialPlayback:e})}render(){const{isPtt:e}=this.props,t=this.props.playing?"audio-pause":"audio-play",s=null!=this.props.duration&&0!==this.props.duration?(0,P.jsx)("div",{className:l.default.metadata,"aria-hidden":!0,children:u.default.durationStr(this.props.duration)}):null,a=(0,P.jsx)("button",{className:l.default.button,onClick:this._onPlayClick,children:(0,P.jsx)(x.default,{name:t})}),i=(0,n.default)(this.props.mediaData,"this.props.mediaData"),r=(0,n.default)(this.props.downloadMedia,"this.props.downloadMedia"),o=(0,P.jsx)(_.default,{mediaData:i,placeholderRenderer:()=>this._renderAudioTag(""),downloadMedia:r,children:this._renderAudioTag}),d=(0,P.jsx)("div",{ref:this._scrollPositionDetectorRef,className:l.default.scrollPositionDetector}),c=e&&i.waveform&&b.default.pttConversationWaveform?(0,P.jsx)(v.default,{currentTime:this.state.currentTime,duration:D(this.props,this.state),onSeekEnd:this._handleSeekBarChange,outgoing:this.props.outgoingMsg,waveform:(0,n.default)(i.waveform,"mediaData.waveform")}):(0,P.jsx)(E.default,{currentTime:this.state.currentTime,duration:D(this.props,this.state),onChange:this._handleSeekBarChange,outgoing:this.props.outgoingMsg,played:Boolean(this.props.played)});return(0,P.jsxs)(N,{button:a,played:this.props.played,outgoingMsg:this.props.outgoingMsg,displayType:this.props.displayType,children:[d,s,c,o]})}_commitPttPlaybackWamEvent(e){const t=this._pttPlaybackWamEvent;null!=t&&(t.pttPlaybackFailed=!e,t.pttType=function(e){switch(null==e?void 0:e.split(";")[0]){case"audio/ogg":return g.default.PTT_STREAM_TYPE.OPUS;case"audio/aac":return g.default.PTT_STREAM_TYPE.AAC;case"audio/mpeg":return g.default.PTT_STREAM_TYPE.MP3;case"audio/amr-wb":return g.default.PTT_STREAM_TYPE.AMR_WB;case"audio/amr":case"audio/3gpp2":return g.default.PTT_STREAM_TYPE.AMR_NB;case"audio/3gpp":default:return g.default.PTT_STREAM_TYPE.UNKNOWN}}((0,M.unproxy)(this.props.mediaData).mimetype),t.pttPlaybackSpeed=function(e){switch(e){case 1:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1;case 1.5:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1_5;case 2:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_2;default:throw new Error(`Invalid playback rate: ${e}`)}}(this.props.pttPrefs.playbackRate),null!=this.state.audioDuration&&(t.pttDuration=1e3*Math.round(this.state.audioDuration)),t.commit(),this._pttPlaybackWamEvent=null)}}function N(e){var t;const s=e.spinner&&null==e.button?(0,P.jsx)("button",{className:l.default.button,onClick:e.action,children:(0,P.jsx)("div",{className:l.default.spinner,children:e.canCancel?(0,P.jsx)(f.PendingCancel,{outgoingMsg:e.outgoingMsg}):(0,P.jsx)(f.Pending,{outgoingMsg:e.outgoingMsg})})}):null,a=e.icon&&null==e.button&&!e.spinner?(0,P.jsx)("button",{className:l.default.button,onClick:e.action,children:e.icon}):null,n=null!=e.fileSize&&0!==e.fileSize?(0,P.jsx)("div",{className:l.default.metadata,children:p.default.filesize(e.fileSize)}):null,r=null!==(t=e.children)&&void 0!==t?t:(0,P.jsx)(E.default,{currentTime:0,duration:100,outgoing:e.outgoingMsg,played:Boolean(e.played),disabled:!0}),d=(0,i.default)(l.default.audio,{[l.default.isGallery]:e.displayType===h.default.DISP_TYPE.STARRED_MSGS||e.displayType===h.default.DISP_TYPE.GALLERY});return(0,P.jsxs)("div",{className:d,children:[(0,P.jsxs)("div",{className:l.default.controls,children:[e.button,s,a]}),(0,P.jsxs)("div",{className:l.default.body,children:[(0,P.jsx)(o.InvisibleLabel,{children:p.default.t(28)}),r,n]})]})}A.CONCERNS={pttPrefs:["playbackRate"]},A.displayName="AudioPlayer";const O=(0,T.default)((0,I.default)((0,m.default)(A)),A.CONCERNS);class w extends O{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}function D(e,t){const s=null==t?void 0:t.audioDuration;if(null!=s)return s;const a=null==e.duration?null:parseFloat(e.duration);return null==a||Number.isNaN(a)?0:a}t.default=w,w.defaultProps={pttPrefs:y.default}},17850:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(78923)),o=a(s(84758)),l=a(s(91952)),d=a(s(85051)),u=s(62238),c=a(s(2408)),h=a(s(79485)),f=a(s(98532)),p=s(85893);function m(e,t,s){let a;if(s){const e=o.default.get(s);a=e?e.formattedTitle:c.default.t(948)}return t?`${e}  ${c.default.t(1643)}`:a?`${e}  ${a}`:e}class _ extends n.PureComponent{constructor(...e){super(...e),this.onClick=()=>{(0,u.findChat)(this.props.msg.sender).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)}))}))}}render(){const{msg:e,chat:t,contact:s,disableClick:a,displaySelf:n,quotedRemoteJid:o,albumId:l}=this.props,u=t||e.chat;u||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("author-with-no-chat"));const h=u?u.assignedColor(e.sender):1,_=a?null:this.onClick,g=(0,i.default)(r.default.author,`color-${h}`,{[r.default.hoverable]:_});let v;if(n)v=(0,p.jsx)(d.default,{text:m(c.default.t(2225),e.isStatusV3,o)});else if(s.name||s.verifiedName){var S;v=[(0,p.jsx)(d.default,{text:m(null!==(S=s.name)&&void 0!==S?S:s.verifiedName,e.isStatusV3,o),className:r.default.name,onClick:_},"author")]}else{v=[(0,p.jsx)("span",{className:r.default.number,role:_?"button":null,onClick:_,children:m((0,f.default)(s.id),e.isStatusV3,o)},`${e.id.toString()}-number`)];const t=v;if(!e.isStatusV3){const a=l?`${l}-push-name`:`${e.id.toString()}-push-name`;let i;i=s.notifyName?s.notifyName:s.pushname,t.push((0,p.jsx)(d.default,{className:r.default.screenName,onClick:_,direction:"auto",ellipsify:!0,text:i},a))}}return(0,p.jsx)("div",{className:g,role:this.props.role||"",children:v})}}_.CONCERNS={msg:["sender","chat","type","isLive","isStatusV3","id","quotedMsg"],contact:["id","name","notifyName","pushname","verifiedName"]},_.displayName="Author";var g=(0,h.default)(_,_.CONCERNS);t.default=g},17176:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.default)(e.msg,["type","subtype","body","recipients"]),{subtype:s,body:a,recipients:l}=t;if("create"===s){const e=parseInt(a,10);return(0,o.jsx)(n.default,{id:2226,params:{count:e},plural:e,wrapInHiddenToken:!0})}if("add"===s)return(0,o.jsx)(n.default,{id:2043,params:{name:(0,i.getFormattedNames)(l,!0)},plural:l.length,wrapInHiddenToken:!0});if("remove"===s)return(0,o.jsx)(n.default,{id:2044,params:{name:(0,i.getFormattedNames)(l,!0)},plural:l.length,wrapInHiddenToken:!0});return null};var i=s(82677),n=a(s(663)),r=a(s(76006)),o=s(85893)},61630:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t;t=e.placeholder?(0,d.jsx)("div",{className:r.default.actionsBtn,children:""}):e.items.map(((e,t)=>(0,d.jsxs)("div",{"data-a8n":n.default.key(e.a8nKey),className:r.default.actionsBtn,onClick:e.onClick,role:"button",title:e.title||e.label,children:[e.icon?(0,d.jsx)(l.default,{name:e.icon,className:r.default.icon}):null,e.label]},t)));return(0,d.jsx)(o.FlexRow,{className:(0,i.default)(r.default.actions,{[r.default.noDivider]:"no-divider"===e.theme}),align:"center",justify:"evenly",children:t})};var i=a(s(94184)),n=a(s(76610)),r=a(s(22319)),o=s(63290),l=a(s(2966)),d=s(85893)},41340:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,className:s,contact:a,msg:d,onClick:u,style:c}=e,{isMe:h,formattedUser:f}=(0,o.default)(a,["formattedUser","name","isMe"]),{t:p}=(0,o.default)(d,["senderObj","t"]),m=i.default.timeStr(p),_=function(e,t){const s=null!=t?t:"";return e&&n.default.pushname?n.default.pushname:s}(h,f);return(0,l.jsx)(r.CopyableDiv,{className:s,onClick:u,prePlainText:`[${m}] ${_}: `,style:c,children:t})};var i=a(s(25142)),n=a(s(9322)),r=s(89925),o=a(s(76006)),l=s(85893)},51994:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e}){const{replyButtons:t}=e;if(null==t||0===t.length)return null;const s=t.some((e=>e.displayText.length>10));return(0,h.jsx)("div",{className:(0,n.default)(r.default.buttonContainer,{[r.default.stacked]:t.length>=3||s,[r.default.withLargeButtonsSpace]:s}),children:t.map(((t,s)=>(0,h.jsx)(f,{msg:e,replyButton:t},s)))})};var i=a(s(81109)),n=a(s(94184)),r=a(s(41946)),o=a(s(52955)),l=s(88300),d=a(s(76006)),u=a(s(55333)),c=a(s(82275)),h=s(85893);function f({msg:e,replyButton:t}){const{chat:s,isSentByMe:a}=(0,d.default)(e,["chat","isSentByMe"]),f=(0,d.default)(t,["selected","displayText","id"]),p=(0,u.default)(t,"selected"),{selected:m,displayText:_}=t,[g,v]=(0,c.default)((()=>{p(!0),(0,o.default)(e,f,s).then((e=>{e!==l.SendMsgResult.OK&&p(!1)})).catch((()=>{p(!1)}))}),{disabled:m});return _?(0,h.jsx)("div",(0,i.default)((0,i.default)({ref:g,className:(0,n.default)(r.default.buttonWrapper,{[r.default.disabled]:m})},v),{},{children:(0,h.jsx)("div",{className:(0,n.default)(r.default.buttonLabel,{[r.default.sentByMe]:a}),children:(0,h.jsx)("span",{children:_})})})):null}},74574:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{spacer:t,trusted:s}=e,a=(0,u.default)(e.msg,["t","id","dir","rtl","text","initialPageSize","footer","ctwaContext"]),h=a.text;if(!h)return null;const f=!(!a.dir||a.rtl===o.default.isRTL());return(0,c.jsxs)(c.Fragment,{children:[!a.ctwaContext&&(0,c.jsx)(d.default,{msg:a}),(0,c.jsx)(l.default,{msg:a,"data-id":a.id,spacer:t,children:(0,c.jsx)(r.default,{text:h,textLimit:a.initialPageSize,children:({textLimit:e})=>{const t=(0,i.Conversation)({mentions:a.mentionMap(),links:a.getLinks(e),selectable:true,trusted:!0===s});return(0,c.jsx)(n.default,{direction:a.dir,dirMismatch:f,formatters:t,inferLinesDirection:!0,selectable:true,text:a.text,textLimit:e})}})})]})};var i=s(68551),n=a(s(85051)),r=a(s(18598)),o=a(s(2408)),l=a(s(42120)),d=a(s(89589)),u=a(s(76006)),c=s(85893)},81793:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,r.default)(e.msg,["thumbnail","title","description","matchedText","isSentByMe","star"]);return(0,o.jsx)(n.default,{title:t.title,description:t.description,thumbnailJpeg:t.thumbnail,onClick:()=>{const e=t.matchedText;(0,i.openExternalLink)(e)},isSentByMe:t.isSentByMe,star:t.star})};var i=s(4919),n=a(s(26976)),r=a(s(76006)),o=s(85893)},84686:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,c.default)(e.msg,["isSentByMe","isGroupMsg","senderObj"]);return(0,h.jsx)(u.default,{msg:(0,d.unproxy)(t),displayAuthor:e.displayAuthor,children:(0,h.jsxs)(l.default,{iconName:"ciphertext",msg:t.unsafe(),children:[o.default.t(1454)," ",(0,h.jsx)("span",{className:i.default.action,role:"button",onClick:f,children:o.default.t(1103)})]})})};var i=a(s(36091)),n=s(4919),r=s(57092),o=a(s(2408)),l=a(s(25606)),d=s(15298),u=a(s(41184)),c=a(s(76006)),h=s(85893);const f=()=>{(0,n.openExternalLink)((0,r.getCiphertextFaqUrl)())}},71920:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBubbleDimension=function(e,t,s,a,i,d){const u=d&&s<1?1:s,f=function(e,t,s){return h(e,t,s)?l:o}(e,a,i);let p,m;a===r.DisplayTheme.Album?(p=n.default.ALBUM_MAX_HEIGHT-n.default.ALBUM_PADDING,m=n.default.ALBUM_MAX_HEIGHT):(p=u<1?f.portraitWidth:f.width,m=function(e,t,s,a){if(a&&t<=n.default.HSM_ASPECT_RATIO)return c(n.default.HSM_ASPECT_RATIO,e,s);return c(t,e,s)}(f,u,e,t));return{bubbleWidth:p,bubbleHeight:m}},t.getImgStyle=function(e,t,s,a){if(null==e||0===e||null==t||0===t||null==s||0===s||null==a||0===a)return{width:"100%",height:"100%"};return e/t>s/a?{height:"100%"}:{width:"100%"}},t.canUseCustomCropping=h;var i=a(s(81109)),n=a(s(55454)),r=s(92310);const o={width:330,portraitWidth:330,minAspectRatio:1,maxAspectRatio:2.4},l=(0,i.default)((0,i.default)({},o),{},{portraitWidth:240,minAspectRatio:.71,maxAspectRatio:4}),d=new Set([n.default.MSG_TYPE.IMAGE,n.default.MSG_TYPE.VIDEO]),u=new Set([n.default.DISP_TYPE.CONVERSATION,n.default.DISP_TYPE.MSG_INFO,n.default.DISP_TYPE.STARRED_MSGS]);function c(e,t,s){if(null==e)return s===n.default.MSG_TYPE.VIDEO?240:330;let a;return a=e<t.minAspectRatio?t.portraitWidth/t.minAspectRatio:e<1?t.portraitWidth/e:e<=t.maxAspectRatio?t.width/e:t.width/t.maxAspectRatio,a}function h(e,t,s){return d.has(e)&&u.has(s)&&t!==r.DisplayTheme.Album}},32646:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.unproxy)(e.msg);if(t.ctwaContext){const s=t.ctwaContext.mediaType!==r.ExternalAdReplyInfoMediaType.VIDEO||t.ctwaContext.isSuspiciousLink?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.default,{msg:t}),(0,d.jsx)(i.default,{context:t.ctwaContext,isSentByMe:t.isSentByMe,compose:!1})]}):(0,d.jsx)(n.default,{msg:t,context:t.ctwaContext});return(0,d.jsx)("div",{className:e.wrapperClass,children:s})}return null};var i=a(s(61791)),n=a(s(2488)),r=s(60934),o=s(15298),l=a(s(89589)),d=s(85893)},61791:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({sourceUrl:e,context:t,isSentByMe:s,compose:a}){let m;m=(null==t?void 0:t.isSuspiciousLink)||!(null==t?void 0:t.thumbnailUrl)&&!(null==t?void 0:t.thumbnail)?(0,p.jsx)("div",{className:o.default.noThumbContainer,children:(0,p.jsx)(h.default,{className:o.default.noThumbIcon,name:"link"})}):(0,p.jsx)("img",{alt:"",className:o.default.media,src:t.thumbnailUrl?t.thumbnailUrl:`data:image/jpeg;base64,${t.thumbnail||""}`});const _=null!=(null==t?void 0:t.description)&&!t.isSuspiciousLink&&(0,p.jsx)("div",{className:o.default.description,children:(0,p.jsx)(l.default,{text:t.description,titlify:!0})});let g=e;if(t&&(g=t.sourceUrl,!t.isSuspiciousLink&&(t.title||t.thumbnailUrl||t.thumbnail))){g=f.default.hostname(g);try{g=n.default.toUnicode(g)}catch(e){}}const v=g&&(0,p.jsx)("div",{className:o.default.source,children:(0,p.jsx)(l.default,{text:g})}),S=(null==t?void 0:t.isSuspiciousLink)?null:null==t?void 0:t.title,C=(0,i.default)(o.default.preview,{[o.default.isCompose]:a,[o.default.bubbleIn]:!a&&!s,[o.default.bubbleOut]:s});return(0,p.jsxs)("div",{className:C,onClick:()=>{if(!a)if(null==t?void 0:t.isSuspiciousLink){const e=(0,u.findLink)(t.sourceUrl);e&&r.default.openModal((0,p.jsx)(c.default,{link:e}))}else(null==t?void 0:t.sourceUrl)&&(0,d.openExternalLink)(t.sourceUrl)},children:[m,(0,p.jsxs)("div",{className:o.default.body,children:[(0,p.jsx)("div",{className:o.default.title,title:S,children:(0,p.jsx)(l.default,{text:S})}),_,v]})]})};var i=a(s(94184)),n=a(s(74971)),r=a(s(91952)),o=a(s(21665)),l=a(s(85051)),d=s(4919),u=s(17126),c=a(s(13803)),h=a(s(2966)),f=a(s(1458)),p=s(85893)},2488:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=i(s(91952)),l=i(s(55454)),d=i(s(60857)),u=i(s(85051)),c=a(s(4919)),h=i(s(12950)),f=i(s(2408)),p=i(s(71681)),m=a(s(15377)),_=i(s(92954)),g=i(s(77043)),v=i(s(77961)),S=i(s(66772)),C=i(s(17754)),y=i(s(2966)),E=a(s(49201)),b=i(s(1458)),T=i(s(28061)),M=i(s(865)),x=s(85893);const I="PREVIEW",P="FLOATER";class A extends r.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==I&&this.setState({mode:I})},this.setFloaterMode=()=>{this.state.mode!==P&&this.setState({mode:P})},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),(0,c.openExternalLink)(this.props.context.sourceUrl)};let t=e.msg;if(t.type===l.default.MSG_TYPE.VIDEO){const s=e.msg.toJSON(),a=new g.default({fromMe:e.msg.id.fromMe,remote:e.msg.id.remote,id:(0,C.default)()});s.id=a,t=new _.default(s)}const s=v.default.isOpened(t)?P:I;this.state={mode:s,msg:t}}componentDidMount(){this.props.listeners.add(v.default,`${this.state.msg.id.toString()}_pip_did_open`,this.setFloaterMode),this.props.listeners.add(v.default,`${this.state.msg.id.toString()}_pip_did_close`,this.setPreviewMode)}render(){const e=this.props.context.description?(0,x.jsx)("div",{className:T.default.description,title:this.props.context.description,children:(0,x.jsx)(u.default,{text:this.props.context.description})}):null,t=b.default.withoutWww(b.default.hostname(this.props.context.sourceUrl)),s=(0,x.jsx)("div",{className:T.default.source,children:(0,x.jsx)(u.default,{text:t})}),a=(0,n.default)(T.default.body,{[T.default.noThumb]:!this.props.context.thumbnail}),i=(0,n.default)(T.default.preview,{[T.default.bubbleIn]:!this.state.msg.isSentByMe,[T.default.bubbleOut]:this.state.msg.isSentByMe}),r=this.state.mode!==I||h.default.supportsFeature(h.default.F.MD_BACKEND)?null:(0,x.jsx)("div",{className:T.default.mediaStateControlsWrapper,children:(0,x.jsx)(m.Play,{})}),p=this.state.mode===P?(0,x.jsx)(S.default,{icon:(0,x.jsx)(y.default,{name:"video-pip-large"}),children:f.default.t(1451)}):null;let _;_=this.props.context.thumbnail||this.props.context.thumbnailUrl?(0,x.jsx)("img",{alt:"",className:(0,n.default)(T.default.thumbnail,{[T.default.youtubeThumbnail]:!1}),src:this.props.context.thumbnail?`data:image/jpeg;base64,${this.props.context.thumbnail}`:this.props.context.thumbnailUrl}):(0,x.jsx)("div",{className:T.default.thumbnailPlaceholder});const g=(0,n.default)(T.default.attribution,d.default.clickable),C=t===l.default.HOSTNAME.INSTAGRAM,A=(0,x.jsx)("div",{className:g,onClick:this.handleCtwaSourceButtonClick,children:(0,x.jsx)(y.default,{name:C?"logo-instagram":"logo-facebook"})});return(0,x.jsxs)("div",{className:i,children:[(0,x.jsxs)("div",{ref:this.setRefThumbnailWrapper,className:T.default.thumbnailWrapper,onClick:h.default.supportsFeature(h.default.F.MD_BACKEND)?this.handleCtwaSourceButtonClick:()=>{v.default.openOgVideoPiP("",this.props.context.thumbnail||"",this.state.msg,0,this.getThumbnailWrapperRect()),M.default.queryVideoPlaybackUrl(this.props.context.mediaUrl).then((e=>{if(v.default.isOpened(this.state.msg)){if(!e.url)throw new Error("Url is missing in response.");v.default.openOgVideoPiP(e.url,this.props.context.thumbnail||"",this.state.msg,0,null)}})).catch((()=>{v.default.closePiP(),o.default.openToast((0,x.jsx)(E.default,{id:(0,E.genId)(),msg:f.default.t(1449),action:{actionText:f.default.t(1450),onAction:()=>{(0,c.openExternalLink)(this.props.context.sourceUrl)}}}))}))},children:[A,_,r,p]}),(0,x.jsxs)(c.default,{className:a,href:this.props.context.sourceUrl,children:[(0,x.jsx)("div",{className:T.default.title,title:this.props.context.title,children:(0,x.jsx)(u.default,{text:this.props.context.title})}),e,s]})]})}}A.displayName="CtwaContextVideoPreview";var N=(0,p.default)(A);t.default=N},69258:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(30381)),n=s(67294),r=a(s(25142)),o=a(s(91952)),l=a(s(85051)),d=a(s(71681)),u=s(61211),c=s(85893);class h extends n.PureComponent{constructor(...e){super(...e),this.state={hidden:!1},this._setRefBubble=e=>{this.refBubble=e},this.rerender=()=>{this.forceUpdate()}}componentDidMount(){this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getTimestamp(){return this.props.timestamp}show(){this.state.hidden&&this.setState({hidden:!1})}hide(){this.state.hidden||this.setState({hidden:!0})}maybeRegMidnight(){this.props.listeners.remove(o.default,"midnight",this.rerender);const e=(0,i.default)().startOf("day").subtract(7,"day");this.props.timestamp>=e.unix()&&this.props.listeners.add(o.default,"midnight",this.rerender)}render(){const{isFocusable:e}=this.props,{hidden:t}=this.state;let s;if(!t)try{const e=r.default.relativeDateStr(this.props.timestamp);s=(0,c.jsx)(l.default,{direction:"auto",text:e.toUpperCase()})}catch(e){__LOG__(4,void 0,new Error,void 0,["date_marker"])`Clock.relativeDateStr threw with error ${null==e?void 0:e.name}, stack: ${null==e?void 0:e.stack}`}return(0,c.jsx)(u.SystemBubble,{ref:this._setRefBubble,hidden:t,isFocusable:e,children:s})}}h.displayName="DateMarker";const f=(0,d.default)(h);t.default=class extends f{getTimestamp(){return this.getComponent().getTimestamp()}show(){return this.getComponent().show()}hide(){return this.getComponent().hide()}getElement(){return this.getComponent().refBubble}}},45880:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({className:e,children:t,direction:s="horizontal",outgoingMsg:a,position:o,withBorder:l=!1}){return(0,n.jsx)("div",{className:(0,i.default)(r.wrapper,l&&r.wrapperWithBorder,"bottom"===o&&r.posBottom,"top"===o&&r.posTop,!a&&r.wrapperIn,a&&r.wrapperOut),children:t})};var i=a(s(56720)),n=s(85893);const r={posBottom:{borderTopStartRadius:"bi2mdrpt",borderTopEndRadius:"hsk1pqkj"},posTop:{borderBottomStartRadius:"a0vc5f8u",borderBottomEndRadius:"e3yfz9gx"},wrapper:{borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw",borderBottomEndRadius:"sfeitywo",borderBottomStartRadius:"cqsf3vkf",cursor:"ajgl1lbb",overflowX:"gfz4du6o",overflowY:"r7fjleex",textDecoration:"aja0x350",width:"ln8gz9je"},wrapperWithBorder:{boxShadow:"rol4brr3"},wrapperIn:{backgroundColor:"rrq4r3yd"},wrapperOut:{backgroundColor:"s0eflmyh"}}},558:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{displayAuthor:s,displayType:a,quotedMsg:i,trusted:o}=e,F=(0,w.default)(e.msg,["ack","caption","dir","isFromTemplate","isFailed","isSentByMe","rtl","senderObj","subtype","type","isVcardOverMmsDocument","mediaData","isDynamicReplyButtonsMsg"]),B=(0,w.default)(e.mediaData,["mediaStage","filename","pageCount","size","mimetype","preview","fullPreviewData"]);let G;(0,d.useEffect)((()=>{B.fullPreviewData||A.default.webDownloadDocumentThumbMmsEnabled&&(0,g.default)({msg:(0,N.unproxy)(F),isPreload:!1})}),[]);const U=e=>{L(e),u.default.openModal((0,j.jsx)(b.default,{msg:F.unsafe()}))},V=e=>{if(L(e),Modernizr.adownload)F.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:I.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0}).catch((()=>{})).then((()=>{switch(B.mediaStage){case M.MEDIA_DATA_STAGE.RESOLVED:case M.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:F.isVcardOverMmsDocument||((()=>{const e=B.filename||E.default.t(1736);u.default.openToast((0,j.jsx)(D.default,{msg:E.default.t(781,{name:e}),id:(0,D.genId)()}))})(),C.default.initDownload((0,N.unproxy)(F.unsafe())));break;case M.MEDIA_DATA_STAGE.ERROR_MISSING:U()}}));else{const e=E.default.t(2238,{chrome_homepage:h.default.BROWSER_LINK.CHROME,firefox_homepage:h.default.BROWSER_LINK.FIREFOX,opera_homepage:h.default.BROWSER_LINK.OPERA});u.default.openModal((0,j.jsx)(c.default,{onOK:()=>u.default.closeModal(),okText:E.default.t(2085),children:(0,j.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}))}},H=e=>{L(e),F.cancelDownload()},W=e=>{L(e),F.cancelUpload()},Y=e=>{L(e),F.resumeUpload()},K=e=>{L(e),F.resumeRemoteUpload()};if(B.pageCount>0){const e=E.default.t(1943,{count:B.pageCount,_plural:B.pageCount});G=(0,j.jsx)("span",{className:_.default.metaValue,title:e,children:e})}let q,z;if(B.size>0){const e=E.default.filesize(B.size);q=(0,j.jsx)("span",{className:_.default.metaValue,title:e,children:e})}let $,Q,X=_.default.filetypeIcon;if(R.hasOwnProperty(B.mimetype)){var Z;$=null===(Z=R[B.mimetype].ext)||void 0===Z?void 0:Z.toLowerCase(),Q=B.mimetype}const J=B.filename?(0,S.getFileExtension)(B.filename):null;(!$||J&&$!==J)&&($=J,Q=(0,r.default)(P.EXT_TO_MIME,$));if(X=(0,l.default)(X,Q&&(0,r.default)(R,[Q,"icon"])||"icon-doc-generic"),$){const e=$.toUpperCase();z=(0,j.jsx)("span",{"data-meta-key":"type","data-testid":"type",className:_.default.metaValue,title:e,children:e})}const ee=B.filename||E.default.t(1736);let te=null;const se={onClick:()=>{}};switch(B.mediaStage){case M.MEDIA_DATA_STAGE.RESOLVED:case M.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case M.MEDIA_DATA_STAGE.NEED_POKE:case M.MEDIA_DATA_STAGE.INIT:se.onClick=V,se.title=E.default.t(1955,{name:ee}),te=(0,j.jsx)(m.Download,{onClick:se.onClick});break;case M.MEDIA_DATA_STAGE.FETCHING:te=(0,j.jsx)(m.PendingCancel,{outgoingMsg:F.isSentByMe}),se.onClick=H;break;case M.MEDIA_DATA_STAGE.UPLOADING:te=(0,j.jsx)(m.PendingCancel,{outgoingMsg:F.isSentByMe}),se.onClick=W;break;case M.MEDIA_DATA_STAGE.NEED_UPLOAD:te=(0,j.jsx)(m.Upload,{}),se.onClick=Y;break;case M.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:te=(0,j.jsx)(m.Upload,{}),se.onClick=K;break;case M.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:break;case M.MEDIA_DATA_STAGE.ERROR_MISSING:se.onClick=U;break;case M.MEDIA_DATA_STAGE.SENDING:te=F.isFailed?null:(0,j.jsx)(m.Pending,{outgoingMsg:F.isSentByMe});break;default:te=(0,j.jsx)(m.Pending,{outgoingMsg:F.isSentByMe})}const ae=(F.isFromTemplate||F.isDynamicReplyButtonsMsg)&&F.caption,ie=ae?null:(0,j.jsxs)("div",{className:_.default.docMeta,children:[G,z,q]}),ne=null!=(null!==(t=B.preview)&&void 0!==t?t:B.fullPreviewData);return(0,j.jsx)("div",{className:(0,l.default)({[_.default.bubble]:!ae,[_.default.templateBubble]:ae,[_.default.isPreview]:a===h.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:a===h.default.DISP_TYPE.STARRED_MSGS||a===h.default.DISP_TYPE.GALLERY}),children:(0,j.jsxs)(x.default,{displayType:a,msg:F,quotedMsg:i,showAuthor:s,hideCaption:!(F.isFromTemplate||F.isDynamicReplyButtonsMsg),trusted:o,children:[(0,j.jsx)(f.default,{msg:F.unsafe(),wrapperClass:_.default.ctwaContext}),(0,j.jsxs)(O.default,(0,n.default)((0,n.default)({xstyle:k.buttonContainer,a8nText:"document-thumb"},se),{},{children:[e.trusted?(0,j.jsx)(T.default,{msg:F.unsafe(),containerClassName:_.default.thumbContainer,childClassName:_.default.thumb}):null,(0,j.jsx)(p.default,{outgoingMsg:F.isSentByMe,position:ne?"bottom":void 0,children:(0,j.jsxs)(y.FlexRow,{className:_.default.deepContainerContent,align:"center",children:[(0,j.jsx)(y.FlexItem,{xstyle:k.icon,shrink:0,children:(0,j.jsx)("div",{className:X})}),(0,j.jsx)(y.FlexItem,{xstyle:[k.text,E.default.isRTL()&&k.textRTL],grow:1,children:(0,j.jsx)(v.default,{text:ee,dirMismatch:F.rtl!==E.default.isRTL(),direction:"auto"})}),(0,j.jsx)(y.FlexItem,{grow:0,shrink:0,children:te})]})})]})),ie]})})};var n=i(s(81109)),r=i(s(27361)),o=i(s(35937)),l=i(s(94184)),d=s(67294),u=(i(s(56720)),i(s(91952))),c=i(s(75940)),h=i(s(55454)),f=i(s(32646)),p=i(s(45880)),m=s(74504),_=i(s(17792)),g=i(s(66492)),v=i(s(85051)),S=s(57085),C=i(s(97227)),y=s(63290),E=i(s(2408)),b=i(s(32666)),T=i(s(99053)),M=s(90672),x=i(s(38125)),I=i(s(4231)),P=s(38961),A=i(s(65565)),N=s(15298),O=i(s(89135)),w=i(s(76006)),D=a(s(49201)),j=s(85893);const R=(0,o.default)(P.MIMETYPES,(e=>"document"===e.msgType));function L(e){e&&(e.stopPropagation(),e.preventDefault())}const k={buttonContainer:{boxSizing:"cm280p3y",display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"elxb2u3l",width:"ln8gz9je",overflowX:"gfz4du6o",overflowY:"r7fjleex",color:"gtscxtjd",textAlign:"tffp5ko5",cursor:"ajgl1lbb",borderTopStartRadius:"l8fojup5",borderTopEndRadius:"paxyh2gw"},text:{position:"g0rxnol2",top:"g3ewzqzm",marginTop:"tt8xd2xn",marginBottom:"mpdn4nr2",marginEnd:"spjzgwxb",marginStart:"a3oefunm",overflowX:"gfz4du6o",overflowY:"r7fjleex",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3"},textRTL:{textAlign:"cb8ormfa"},icon:{marginTop:"o9i7y497"}}},58878:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,s]=(0,r.useState)(!1);let a;const[f,p]=(0,c.default)(e.onClick);null!=e.onClick&&(a=p);return(0,h.jsxs)("div",{className:(0,n.default)(d.default.container,{[d.default.compact]:e.displayType===o.default.DISP_TYPE.MSG_INFO}),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),"data-testid":"fail-container",children:[t?(0,h.jsx)(l.default,{children:e.tooltip}):null,(0,h.jsx)("div",(0,i.default)((0,i.default)({className:d.default.error,ref:f},a),{},{children:(0,h.jsx)(u.default,{name:"error"})}))]})};var i=a(s(81109)),n=a(s(94184)),r=s(67294),o=a(s(55454)),l=a(s(44719)),d=a(s(29667)),u=a(s(2966)),c=a(s(82275)),h=s(85893)},38920:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:s,mdDowngrade:a}=e,{isFailed:u,to:c}=(0,l.default)(t,["isFailed","to"]);if(!u)return null;return(0,d.jsx)(n.default,{displayType:s,tooltip:r.default.t(2072),onClick:()=>{i.default.openModal((0,d.jsx)(o.default,{to:c,participant:a,msg:t}))}})};var i=a(s(91952)),n=(a(s(55454)),a(s(58878))),r=a(s(2408)),o=a(s(59090)),l=a(s(76006)),d=s(85893)},83469:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:s}=e,{isFailed:a}=(0,l.default)(t,["isFailed"]);if(!a)return null;return(0,d.jsx)(n.default,{displayType:s,tooltip:r.default.t(2072),onClick:()=>{i.default.openModal((0,d.jsx)(o.default,{msg:t}))}})};var i=a(s(91952)),n=(a(s(55454)),a(s(58878))),r=a(s(2408)),o=a(s(71249)),l=a(s(76006)),d=s(85893)},40994:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayType:t,msg:s}=e,{mediaData:a,mdDowngrade:c,isSendFailure:h}=(0,r.default)(s,["mediaData","mdDowngrade","isSendFailure"]);if(a)return(0,u.jsx)(i.default,{displayType:t,msg:s});if(o.default.supportsFeature(o.default.F.MD_BACKEND)){if(c)return(0,u.jsx)(l.default,{msg:s,displayType:t,mdDowngrade:c});if(h)return(0,u.jsx)(d.default,{msg:s,displayType:t})}return(0,u.jsx)(n.default,{msg:s,displayType:t})};a(s(55454));var i=a(s(41831)),n=a(s(73667)),r=a(s(76006)),o=a(s(12950)),l=a(s(38920)),d=a(s(83469)),u=s(85893)},41831:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayType:t,msg:s}=e,{isFailed:a,type:f,isUnsentMedia:p}=(0,u.default)(s,["isFailed","type","isUnsentMedia"]),{mediaStage:m,type:_}=(0,u.default)(s.mediaData,["mediaStage","type"]),g=t===i.default.DISP_TYPE.CONVERSATION;if(f===i.default.MSG_TYPE.REVOKED)return null;if(m===l.MEDIA_DATA_STAGE.ERROR_TOO_LARGE)return(0,c.jsx)(d.default,{displayType:t,mediaType:_});if(p&&(m===l.MEDIA_DATA_STAGE.ERROR_MISSING||m===l.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED))return(0,c.jsx)(n.default,{displayType:t,tooltip:o.default.t(1602)});if(a)return m===l.MEDIA_DATA_STAGE.ERROR_MISSING?(0,c.jsx)(n.default,{displayType:t,tooltip:o.default.t(1717)}):f===i.default.MSG_TYPE.PTT&&m===l.MEDIA_DATA_STAGE.PREPARING?(0,c.jsx)(n.default,{displayType:t,tooltip:o.default.t(1509)}):r.default.supportsFeature(r.default.F.RESEND_ICON)&&g&&m!==l.MEDIA_DATA_STAGE.REMOTE_UPLOADING?(0,c.jsx)(n.default,{displayType:t,onClick:h.bind(null,s),tooltip:o.default.t(1551)}):(0,c.jsx)(n.default,{displayType:t,tooltip:o.default.t(1602)});return null};var i=a(s(55454)),n=a(s(58878)),r=a(s(12950)),o=a(s(2408)),l=s(90672),d=a(s(75006)),u=a(s(76006)),c=s(85893);function h(e){e.resend().catch((function(e){__LOG__(2)`msg_media_fail_icon:resend failure: ${e}`}))}},75006:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){const t={maxSize:l.default.filesize(d.default.media)},s={maxSize:l.default.filesize(d.default.maxFileSize)};switch(e){case r.default.MSG_TYPE.AUDIO:case r.default.MSG_TYPE.PTT:return l.default.t(1230,t);case r.default.MSG_TYPE.IMAGE:return l.default.t(1234,t);case r.default.MSG_TYPE.VIDEO:return l.default.t(1252,t);case r.default.MSG_TYPE.DOCUMENT:return l.default.t(1232,s);case r.default.MSG_TYPE.UNKNOWN:default:return l.default.t(1233,s)}}(e.mediaType);return(0,u.jsx)(o.default,{displayType:e.displayType,onClick:c.bind(null,t),tooltip:t})};var i=a(s(91952)),n=a(s(75940)),r=a(s(55454)),o=a(s(58878)),l=a(s(2408)),d=a(s(65565)),u=s(85893);function c(e){i.default.openModal((0,u.jsx)(n.default,{onOK:()=>i.default.closeModal(),children:e}))}},73667:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,displayType:s}=e,{isFailed:a}=(0,r.default)(t,["isFailed"]);if(!a)return null;return(0,o.jsx)(i.default,{displayType:s,tooltip:n.default.t(1551),onClick:()=>{t.resend().catch((()=>{__LOG__(2)`PlainMsgFailIcon: failed to resend message`}))}})};a(s(55454));var i=a(s(58878)),n=a(s(2408)),r=a(s(76006)),o=s(85893)},89513:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{className:t}=e,s=(0,u.default)(e.msg,["isForwarded","forwardingScore","numTimesForwarded","isFrequentlyForwarded"]);if(!(0,o.showForwarded)(s))return null;const a=s.isFrequentlyForwarded,h=l.default.hfmStringChanges?"highly-forwarded-v2":"highly-forwarded",f=a?h:"forwarded",p=(0,i.default)(n.default.icon,{[n.default.iconHighlyForwarded]:a&&!l.default.hfmStringChanges}),m=l.default.hfmStringChanges?r.default.t(914):r.default.t(911),_=a?m:r.default.t(911);return(0,c.jsxs)("div",{className:(0,i.default)(n.default.container,t),children:[(0,c.jsx)(d.default,{name:f,display:"inline",className:p}),(0,c.jsx)("span",{className:n.default.text,children:_})]})};var i=a(s(94184)),n=a(s(90477)),r=a(s(2408)),o=s(17223),l=a(s(65565)),d=a(s(2966)),u=a(s(76006)),c=s(85893)},16712:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(40854)),o=a(s(31211)),l=s(85893);class d extends n.PureComponent{constructor(...e){super(...e),this._setCellFrameDivRef=e=>{this._cellFrameDivRef=e}}indicateFocus(){r.default.maybeIndicateFocus(this._cellFrameDivRef,o.default.focusAnimation)}render(){const e=this.props,t=(0,i.default)(o.default.msg,{[o.default.hover]:e.hover,[o.default.current]:e.current,[o.default.active]:e.active});return(0,l.jsx)("div",{ref:this._setCellFrameDivRef,className:t,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,children:e.children})}}t.default=d,d.displayName="GalleryMsg"},70217:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BUBBLE_PADDING=t.MAX_DIM=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(17850)),l=a(s(41340)),d=a(s(74574)),u=a(s(91952)),c=a(s(55454)),h=a(s(32646)),f=s(60934),p=a(s(89513)),m=a(s(49155)),_=a(s(86428)),g=a(s(2408)),v=a(s(32666)),S=s(90672),C=a(s(76480)),y=a(s(4231)),E=s(17223),b=(s(63140),a(s(79485))),T=s(15298),M=s(61087),x=a(s(2966)),I=a(s(32473)),P=a(s(92018)),A=s(85893);const N=(0,M.getIntFromStylesProp)(m.default,"-width-picture-bubble-inner");t.MAX_DIM=N;const O=(0,M.getIntFromStylesProp)(m.default,"-padding-picture-bubble");t.BUBBLE_PADDING=O;const w=N/4;class D extends n.PureComponent{constructor(...e){super(...e),this.state={playing:!1},this._refPlayer=(0,n.createRef)(),this.playCount=0,this.pause=()=>{this.playCount=0,this._pause()},this.handleKeyActivation=e=>{e.stopPropagation(),e.preventDefault(),this._handleClick(e)},this.play=e=>{const{mediaData:t}=this.props,s=this._refPlayer.current;if(t.mediaStage!==S.MEDIA_DATA_STAGE.RESOLVED)return;if(!s)return;e&&e.stopPropagation();let a=this.duration;if(null==a||0===a){const e=s.getDuration();null!=e?a=e:t.duration&&"0"!==t.duration&&(a=parseInt(t.duration,10))}if(null!=a&&0!==a){const e=Math.ceil(6/a);this.playCount=Math.max(e,3)}else this.playCount=3;this._play()},this._pause=()=>{var e;this.setState({playing:!1}),null===(e=this._refPlayer.current)||void 0===e||e.pauseAndReset()},this._play=()=>{this._refPlayer.current&&(this.playCount<=0?this.pause():(this.playCount-=1,this.state.playing||this.setState({playing:!0}),this._refPlayer.current.play()))},this.showMediaMissing=()=>{u.default.openModal((0,A.jsx)(v.default,{msg:this.props.msg.unsafe()}))},this.getZoomNode=e=>{const t=this.props.isMsgVisible;if(!t)return null;const s=t(e);return s?s.getImgNode&&s.getImgNode():null},this.launchMediaViewer=e=>{e&&e.stopPropagation(),u.default.mediaViewerModal({msg:(0,T.unproxy)(this.props.msg.unsafe()),getZoomNode:this.getZoomNode})},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:y.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._handleClick=e=>{switch(this.props.mediaData.mediaStage){case S.MEDIA_DATA_STAGE.RESOLVED:this._shouldPlay()?this.play(e):this.launchMediaViewer(e);break;case S.MEDIA_DATA_STAGE.INIT:this.launchMediaViewer(e);break;case S.MEDIA_DATA_STAGE.FETCHING:this.cancelDownload();break;case S.MEDIA_DATA_STAGE.NEED_POKE:this._downloadMedia();break;case S.MEDIA_DATA_STAGE.UPLOADING:this.cancelUpload();break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:this.resumeUpload();break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:this.resumeRemoteUpload();break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:this.showMediaMissing()}}}componentDidMount(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:y.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}getStyle(){const e=this.props.mediaData,t=e.aspectRatio||e.fullWidth/e.fullHeight;if(!t)return{bubbleWidth:N,bubbleHeight:"100%",contentWidth:N,contentHeight:"100%"};let s,a;t<=1/4?(a=N,s=1.2*w):t<1?(a=N,s=N*t):t<4?(s=N,a=N/t):(s=N,a=w);let i=e.renderableUrl&&e.fullWidth||s,n=e.renderableUrl&&e.fullHeight||a;return i/n>s/a?(i=i*a/n,n=a):(n=n*s/i,i=s),n>N&&(n=N),{bubbleWidth:s,bubbleHeight:a,contentWidth:i,contentHeight:n}}_getFlexSize(e){const t=this.props.mediaData,s=t.aspectRatio||t.fullWidth/t.fullHeight;let a,i;const n=1.2*w;s>=1?e<N?(a=e,i=a/s,i<w&&(i=w)):(a=N,i=a/s,i<w&&(i=w)):(i=N,a=i*s,a<n&&(a=n),e<N&&a>e&&(a=e));let r=a,o=i;return r/o>a/i?(r=r*i/o,o=i):(o=o*a/r,r=a),{bubbleWidth:a,bubbleHeight:i,contentWidth:r,contentHeight:o}}getImgNode(){var e;return null===(e=this._refPlayer.current)||void 0===e?void 0:e.underlyingVideo()}_shouldPlay(){return!this.state.playing&&this.playCount!==1/0}render(){const e=this.props.msg,t=this.props.mediaData,s=t.preview?t.preview.url():void 0;let a=null,n=this.getStyle();null!=this.props.maxWidth&&this.props.maxWidth<n.bubbleWidth&&(n=this._getFlexSize(this.props.maxWidth));const{bubbleWidth:u,contentWidth:v,contentHeight:y}=n;if(t.mediaStage===S.MEDIA_DATA_STAGE.RESOLVED){const e=t.aspectRatio>=1?{width:"auto",height:y}:{width:v,height:"auto"};a=(0,A.jsx)("div",{className:m.default.thumbVideo,children:(0,A.jsx)(P.default,{ref:this._refPlayer,src:t.renderableUrl,style:e,onEnded:this._play,muted:!0,children:g.default.t(1776)})})}const b=s?(0,A.jsx)("div",{className:m.default.thumbImage,style:{backgroundImage:`url(${s})`}}):null,T=e.caption?(0,A.jsx)("div",{className:m.default.caption,style:{maxWidth:u},children:(0,A.jsx)(d.default,{msg:e.unsafe(),trusted:this.props.trusted})}):null,M=T?null:(0,A.jsx)(I.default,{}),N=(0,E.showForwarded)(e),w=(0,i.default)(m.default.bubble,{[m.default.hasCaption]:e.caption,[m.default.hasAuthor]:this.props.displayAuthor,[m.default.forwarded]:N,[m.default.isPSA]:e.isPSA,[m.default.isGallery]:this.props.displayType===c.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===c.default.DISP_TYPE.GALLERY,[m.default.isInfo]:this.props.displayType===c.default.DISP_TYPE.MSG_INFO}),D=this.props.displayAuthor?(0,A.jsx)("div",{className:m.default.author,children:(0,A.jsx)(o.default,{msg:e,contact:e.senderObj})}):null,R=N?(0,A.jsx)(p.default,{msg:e.unsafe(),className:m.default.forwardedIndicator}):null;let L;switch(e.gifAttribution){case f.VideoMessageAttribution.GIPHY:L=(0,A.jsx)("div",{className:m.default.vendor,children:(0,A.jsx)(x.default,{name:"giphy"})});break;case f.VideoMessageAttribution.TENOR:L=(0,A.jsx)("div",{className:m.default.vendor,children:(0,A.jsx)(x.default,{name:"tenor"})});break;default:L=null}const k=this.props.quotedMsg?(0,A.jsx)("div",{className:m.default.quote,children:this.props.quotedMsg}):null,F=(0,A.jsxs)(A.Fragment,{children:[D,R,k,(0,A.jsx)(h.default,{msg:e.unsafe(),wrapperClass:m.default.ctwaContext}),(0,A.jsxs)("div",{"data-a8n":r.default.key("image-thumb-gif"),className:m.default.thumb,onClick:this._handleClick,style:{width:v,height:y},children:[(0,A.jsx)(_.default,{mediaStage:t.mediaStage,mediaDataFileSize:t.size,isFailed:e.isFailed,shouldPlay:this._shouldPlay(),onClick:this._handleClick}),b,a,M,L]}),T,(0,A.jsx)("div",{className:m.default.meta,children:(0,A.jsx)(C.default,{msg:this.props.msg})})]});return T?(0,A.jsx)(l.default,{contact:e.senderObj,msg:e.unsafe(),className:w,onClick:j,style:{width:u},children:F}):(0,A.jsx)("div",{className:w,onClick:j,style:{width:u+2*O},children:F})}}function j(e){e.stopPropagation()}D.CONCERNS={msg:["id","ack","caption","isFailed","isPSA","isSentByMe","isGroupMsg","gifAttribution","senderObj"],mediaData:["aspectRatio","preview","duration","type","mediaStage","renderableUrl","fullWidth","fullHeight","size"]},D.displayName="Gif";const R=(0,b.default)(D,D.CONCERNS);t.default=class extends R{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}pause(){return this.getComponent().pause()}getPlayCount(){return this.getComponent().playCount}getImgNode(){return this.getComponent().getImgNode()}}},86428:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({mediaStage:e,isFailed:t,mediaDataFileSize:s,shouldPlay:a,onClick:o}){switch(e){case n.MEDIA_DATA_STAGE.INIT:case n.MEDIA_DATA_STAGE.EXISTS:return null;case n.MEDIA_DATA_STAGE.RESOLVED:return a?(0,r.jsx)(i.GifIcon,{onClick:o}):null;case n.MEDIA_DATA_STAGE.FETCHING:case n.MEDIA_DATA_STAGE.UPLOADING:case n.MEDIA_DATA_STAGE.REUPLOADING:case n.MEDIA_DATA_STAGE.DECRYPTING:return(0,r.jsx)(i.Pending,{cancelable:!0});case n.MEDIA_DATA_STAGE.NEED_POKE:return(0,r.jsx)(i.Download,{filesize:s});case n.MEDIA_DATA_STAGE.NEED_UPLOAD:case n.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return(0,r.jsx)(i.Upload,{filesize:s});case n.MEDIA_DATA_STAGE.SENDING:return t?null:(0,r.jsx)(i.Pending,{cancelable:!0});default:return(0,r.jsx)(i.Pending,{})}};var i=a(s(15377)),n=s(90672),r=s(85893)},62478:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(85051)),o=s(86723),l=s(82677),d=a(s(22510)),u=a(s(52087)),c=s(31140),h=a(s(663)),f=a(s(71681)),p=a(s(79485)),m=a(s(2966)),_=a(s(69635)),g=a(s(98532)),v=s(85893);class S extends i.PureComponent{componentDidMount(){const{chat:e}=this.props.msg;null!=e.groupMetadata&&this.props.listeners.add(e.groupMetadata,"change:support",(()=>this.forceUpdate()))}stopEvent(e){e.stopPropagation(),e.preventDefault()}openInfoDrawer(){return e=>{this.stopEvent(e),n.default.chatInfoDrawer(this.props.msg.chat)}}_openGroupInviteLinkDrawer(){return e=>{this.stopEvent(e);const t=this.props.msg.chat,a=s(14804).default;n.default.openDrawerRight((0,v.jsx)(a,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>n.default.closeDrawerRight()}),"slide-left",this.props.uim)}}_openExpandedGroupDesc(e){return t=>{this.stopEvent(t);const s=this.props.msg.chat;n.default.chatInfoDrawer(s,!0,e)}}_openEphemeralSetting(){return e=>{this.stopEvent(e);const t=this.props.msg.chat;n.default.ephemeralDrawer(t)}}_getFormattedText(e){return(0,v.jsx)(r.default,{direction:"auto",text:e})}_getEphemeralDuration(){var e;const t=null===(e=this.props.msg.templateParams)||void 0===e?void 0:e[0];return t&&parseInt(t,10)||0}isMe(e){return _.default.equals(e,(0,o.getMaybeMeUser)())}_renderGroupNotificationL10n(e,t,s,a){const i=t?(0,l.getFormattedName)(t,!this.props.clickable):null;switch(e){case"add":return this.isMe(t)?(0,v.jsx)(h.default,{id:2004}):(0,v.jsx)(h.default,{id:2003,params:{name:i}});case"remove":return this.isMe(t)?(0,v.jsx)(h.default,{id:2016}):(0,v.jsx)(h.default,{id:2015,params:{name:i}});case"leave":return this.isMe(t)?(0,v.jsx)(h.default,{id:2012}):(0,v.jsx)(h.default,{id:2011,params:{name:i}});case"picture":return"remove"===a?this.isMe(t)?(0,v.jsx)(h.default,{id:2135}):(0,v.jsx)(h.default,{id:2134,params:{name:i}}):this.isMe(t)?(0,v.jsx)(h.default,{id:2133}):(0,v.jsx)(h.default,{id:2132,params:{name:i}});case"subject":{const e=this._getFormattedText(a);return this.isMe(t)?(0,v.jsx)(h.default,{id:2034,params:{subject:e}}):null!=i?(0,v.jsx)(h.default,{id:2032,params:{subject:e,name:i}}):(0,v.jsx)(h.default,{id:2033,params:{subject:e}})}case"modify":if(this.isMe(t)){const e=(0,g.default)(a);return(0,v.jsx)(h.default,{id:2006,params:{new_number:e,name:i}})}return(0,v.jsx)(h.default,{id:2005,params:{name:i}});default:__LOG__(2)`wa:groupNotification:unknown message subtype: ${e}`}}_renderGp2L10n(e,t,s,a,i,n){var r;const o=t?(0,l.getFormattedName)(t,!this.props.clickable):null,d=i?i[0]:void 0,u=d?(0,l.getFormattedName)(d,!this.props.clickable):null,f=(0,l.getFormattedNames)(i,!this.props.clickable);switch(e){case"add":return t?this.isMe(t)?(0,v.jsx)(h.default,{id:2025,params:{participants:f}}):this.isMe(d)?null!=o?(0,v.jsx)(h.default,{id:2018,params:{name:o}}):(0,v.jsx)(h.default,{id:2022}):null!=o?(0,v.jsx)(h.default,{id:2017,params:{participants:f,name:o}}):(0,v.jsx)(h.default,{id:2021,params:{participants:f}}):this.isMe(d)?(0,v.jsx)(h.default,{id:2004}):(0,v.jsx)(h.default,{id:2003,params:{name:u}});case"remove":return t?_.default.equals(t,d)?(0,v.jsx)(h.default,{id:2016}):this.isMe(t)?(0,v.jsx)(h.default,{id:2026,params:{participants:f}}):this.isMe(d)?null!=o?(0,v.jsx)(h.default,{id:2020,params:{name:o}}):(0,v.jsx)(h.default,{id:2024}):null!=o?(0,v.jsx)(h.default,{id:2019,params:{participants:f,name:o}}):(0,v.jsx)(h.default,{id:2023,params:{participants:f}}):this.isMe(d)?(0,v.jsx)(h.default,{id:2016}):(0,v.jsx)(h.default,{id:2015,params:{name:u}});case"leave":return this.isMe(d)?(0,v.jsx)(h.default,{id:2012}):(0,v.jsx)(h.default,{id:2011,params:{name:f}});case"picture":return"remove"===a?this.isMe(t)?(0,v.jsx)(h.default,{id:2135}):(0,v.jsx)(h.default,{id:2134,params:{name:o}}):this.isMe(t)?(0,v.jsx)(h.default,{id:2133}):(0,v.jsx)(h.default,{id:2132,params:{name:o}});case"subject":{const e=this._getFormattedText(a);return this.isMe(t)?(0,v.jsx)(h.default,{id:2034,params:{subject:e}}):null!=o?(0,v.jsx)(h.default,{id:2032,params:{name:o,subject:e}}):(0,v.jsx)(h.default,{id:2033,params:{subject:e}})}case"modify":{const e=(0,g.default)(t),a=(0,g.default)(d);return e===s?(0,v.jsx)(h.default,{id:2006,params:{name:s,new_number:a}}):(0,v.jsx)(h.default,{id:2005,params:{name:s}})}case"create":if(this.isMe(t))return a?(0,v.jsx)(h.default,{id:1972,params:{subject:this._getFormattedText(a)}}):(0,v.jsx)(h.default,{id:1973});if(a)return null!=o?(0,v.jsx)(h.default,{id:1969,params:{subject:this._getFormattedText(a),name:o}}):(0,v.jsx)(h.default,{id:1971,params:{subject:this._getFormattedText(a)}});if(null!=o){const e=n.title();return""===e.trim()?(0,v.jsx)(h.default,{id:1970,params:{name:o}}):(0,v.jsx)(h.default,{id:1969,params:{name:o,subject:e}})}return(0,v.jsx)(h.default,{id:1968});case"delete":return n.isSupportGroup()?(0,v.jsx)(h.default,{id:1670}):(0,v.jsx)(h.default,{id:1988});case"promote":{const e=i.length;return 1===e&&this.isMe(d)?(0,v.jsx)(h.default,{id:2014}):(0,v.jsx)(h.default,{id:2013,params:{count:e,participants:f},plural:e})}case"demote":{const e=i.length;return 1===e&&this.isMe(d)?(0,v.jsx)(h.default,{id:2008}):(0,v.jsx)(h.default,{id:2007,params:{count:e,participants:f},plural:e})}case"invite":return this.isMe(d)?(0,v.jsx)(h.default,{id:2010}):(0,v.jsx)(h.default,{id:2009,params:{name:u}});case"revoke_invite":return this.isMe(t)?(0,v.jsx)(h.default,{id:1998}):(0,v.jsx)(h.default,{id:1997,params:{name:o}});case"description":return this.isMe(t)?(0,v.jsx)(h.default,{id:1986}):null!=o?(0,v.jsx)(h.default,{id:1982,params:{name:o}}):(0,v.jsx)(h.default,{id:1984});case"announce":return"on"===a?this.isMe(t)?(0,v.jsx)(h.default,{id:1967}):(0,v.jsx)(h.default,{id:1966,params:{name:o}}):this.isMe(t)?(0,v.jsx)(h.default,{id:1965}):(0,v.jsx)(h.default,{id:1964,params:{name:o}});case"restrict":return"on"===a?this.isMe(t)?(0,v.jsx)(h.default,{id:2030}):(0,v.jsx)(h.default,{id:2029,params:{name:o}}):this.isMe(t)?(0,v.jsx)(h.default,{id:2028}):(0,v.jsx)(h.default,{id:2027,params:{name:o}});case"no_frequently_forwarded":return"on"===a?this.isMe(t)?(0,v.jsx)(h.default,{id:2002}):(0,v.jsx)(h.default,{id:2001,params:{name:o}}):this.isMe(t)?(0,v.jsx)(h.default,{id:2e3}):(0,v.jsx)(h.default,{id:1999,params:{name:o}});case"announce_msg_bounce":return(0,v.jsx)(h.default,{id:1963});case"v4_add_invite_sent":return(0,v.jsx)(h.default,{id:1752,params:{participants:f,count:i.length}});case"v4_add_invite_join":return(0,v.jsx)(h.default,{id:1751,params:{participants:f,count:i.length}});case"ephemeral":const l=null===(r=n.groupMetadata)||void 0===r?void 0:r.canSetEphemeralSetting(),p=this._getEphemeralDuration();return t?this.isMe(t)?l?(0,v.jsx)(c.EphemeralL10n,{type:c.EphemeralStringType.SettingChangeByYouAsAdmin,numSeconds:p}):(0,v.jsx)(c.EphemeralL10n,{type:c.EphemeralStringType.SettingChangeByYou,numSeconds:p}):l?(0,v.jsx)(c.EphemeralL10n,{type:c.EphemeralStringType.SettingChangeByOthersAsAdmin,numSeconds:p,name:o}):(0,v.jsx)(c.EphemeralL10n,{type:c.EphemeralStringType.SettingChangeByOthers,numSeconds:p,name:o}):l?(0,v.jsx)(c.EphemeralL10n,{type:c.EphemeralStringType.SettingChangeByUnknownAsAdmin,numSeconds:p}):(0,v.jsx)(c.EphemeralL10n,{type:c.EphemeralStringType.SettingChangeByUnknown,numSeconds:p});case"initial_pHash_mismatch":return(0,v.jsx)(h.default,{id:1996});default:__LOG__(2)`wa:groupNotification:unknown message subtype: ${e}`}}_renderIcon(e,t){if("gp2"===e){if("announce"===t)return(0,v.jsx)("div",{className:d.default.icon,children:(0,v.jsx)(m.default,{name:"megaphone"})});if("ephemeral"===t&&this.props.clickable)return(0,v.jsx)("div",{className:d.default.icon,children:(0,v.jsx)(m.default,{name:"disappearing"})})}}_getClickHandler(e,t){var s;if(this.props.clickable)switch(t){case"picture":case"subject":return this.openInfoDrawer();case"revoke_invite":return this._openGroupInviteLinkDrawer();case"description":return this._openExpandedGroupDesc();case"ephemeral":const{chat:e}=this.props.msg;if(null===(s=e.groupMetadata)||void 0===s?void 0:s.canSetEphemeralSetting())return this._openEphemeralSetting();break;case"initial_pHash_mismatch":return this._openExpandedGroupDesc(!0)}}render(){const{msg:e}=this.props,{type:t,subtype:s,author:a,body:i,recipients:n,chat:r,templateParams:o}=e,l=e.displayName();if("group_notification"!==t&&"gp2"!==t)return null;const u="gp2"===t?this._renderGp2L10n(s,a,l,i,n,r,o):this._renderGroupNotificationL10n(s,a,l,i);if(!u)return null;const c=this._getClickHandler(t,s);return(0,v.jsxs)("div",{role:c?"button":void 0,className:d.default.notification,onClick:c,children:[this._renderIcon(t,s),u]})}}S.CONCERNS={msg:["author","body","chat","recipients","subtype","templateParams","type"]},S.displayName="GroupNotification";var C=(0,u.default)((0,f.default)((0,p.default)(S,S.CONCERNS)));t.default=C},3748:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(91952)),o=i(s(7235)),l=a(s(47452)),d=s(62238),u=i(s(66513)),c=i(s(2408)),h=i(s(71681)),f=i(s(87459)),p=s(51435),m=i(s(79465)),_=s(15298),g=i(s(18504)),v=i(s(63477)),S=i(s(68062)),C=i(s(82669)),y=s(66893),E=s(85893);class b extends n.Component{constructor(...e){super(...e),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{r.default.refreshMessages()},this.state={contextMenu:null,hover:!1},this.setRefContext=e=>this.refContext=e,this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.openContextMenu=()=>{this.handleMenu(void 0,!0)},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._handleOpenInfoDrawer=()=>{r.default.msgInfoDrawer((0,_.unproxy)(this.props.msg.unsafe()))},this.handleReplyMessage=()=>{const e=(0,_.unproxy)(this.props.msg.unsafe()),t=e.chat;t.composeQuotedMsg=e,r.default.focusChatTextInput(t)},this.handlePrivateReplyMessage=()=>{const e=(0,_.unproxy)(this.props.msg.unsafe());(0,m.default)(e)},this.handleStarMessage=()=>{const e=(0,_.unproxy)(this.props.msg.unsafe());r.default.sendStarMsgs(e.chat,[e])},this.handleUnstarMessage=()=>{const e=(0,_.unproxy)(this.props.msg.unsafe());r.default.sendUnstarMsgs(e.chat,[e])},this.handleDeleteMessage=()=>{const{msg:e,isMsgVisible:t}=this.props;r.default.openModal((0,E.jsx)(o.default,{chat:e.chat,msgList:[(0,_.unproxy)(e.unsafe())],deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))},this.openContactChat=()=>{(0,d.findChat)(this.props.msg.author).then((e=>{r.default.openChatFromUnread(e).then((t=>{t&&r.default.focusChatTextInput(e)}))}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.handleMenu=(e,t)=>{if(t&&this.state.contextMenu)return void this.setState({contextMenu:null});const s=t?this._getMenuRefContext():e,a=(0,_.unproxy)(this.props.msg),i=[];a.isSentByMe&&!a.asRevoked&&i.push((0,E.jsx)(l.default,{a8n:"mi-msg-info",action:this._handleOpenInfoDrawer,children:c.default.t(1235)},"info")),a.canReply()&&i.push((0,E.jsx)(l.default,{a8n:"mi-msg-reply",action:this.handleReplyMessage,children:c.default.t(1521)},"reply")),(a.canPrivateReply()||a.canPrivateReplyInRestrictedGrp())&&i.push((0,E.jsx)(l.default,{a8n:"mi-msg-reply",action:this.handlePrivateReplyMessage,children:c.default.t(1456)},"private_reply")),a.canForward()&&i.push((0,E.jsx)(l.default,{a8n:"mi-msg-forward",action:()=>{this.props.onOpenForwardFlow(!0,a.unsafe())},children:c.default.t(909)},"forward")),a.canStar()&&(a.star?i.push((0,E.jsx)(l.default,{a8n:"mi-msg-unstar",action:this.handleUnstarMessage,children:c.default.t(1722)},"star")):i.push((0,E.jsx)(l.default,{a8n:"mi-msg-star",action:this.handleStarMessage,children:c.default.t(1639)},"star"))),i.push((0,E.jsx)(l.default,{a8n:"mi-msg-delete",action:this.handleDeleteMessage,children:c.default.t(754)},"delete")),a.isGroupMsg&&a.author&&!a.isSentByMe&&i.push((0,E.jsx)(l.default,{a8n:"mi-msg-author",action:this.openContactChat,children:c.default.t(1231,{author:a.displayName()})},"author")),this.setState({contextMenu:{menu:i,anchor:s,theme:l.ThemeOptions.COMPACT}})}}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}scrollMsg(e,t){this.props.scrollMsg(e,t)}highlight(e){this.props.highlight(e)}render(){const{msg:e,menuTransition:t}=this.props;let s,a,i;return(this.state.hover||this.state.contextMenu)&&(s=(0,E.jsx)(f.default,{msg:e.unsafe(),hasAuthor:!1,position:p.MsgPosition.SINGLE,ref:this.setRefContext,onToggle:e=>{this.handleMenu(e)},isGroupedSticker:!0},"icon-context")),this.props.isFocused&&(a=(0,E.jsx)(y.WhileFocusedListener,{parent:this})),this.state.contextMenu&&(i=(0,E.jsx)(v.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,E.jsx)(S.default,{contextMenu:this.state.contextMenu})})),(0,E.jsxs)("div",{className:u.default.stickerItem,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown,children:[(0,E.jsx)(g.default,{mediaData:e.mediaData,msg:e,displayAuthor:!1,forwardRef:this.props.forwardRef,animateOnView:!0}),(0,E.jsx)("div",{className:u.default.stickerMenu,children:(0,E.jsx)(C.default,{transitionName:t,children:s})}),i,a]})}}b.displayName="GroupedSticker";var T=(0,h.default)(b);t.default=T},67008:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)("div",{className:n.default.outerContainer,onClick:e.onClick,children:(0,r.jsx)("div",{className:n.default.innerContainer,children:(0,r.jsx)(i.default,{onChange:e.onClick,checked:e.checked})})})};var i=a(s(33287)),n=a(s(9587)),r=s(85893)},75749:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayAuthor:t}=e,s=(0,C.default)(e.msg,["id","inviteCode","inviteCodeExp","inviteGrp","inviteGrpName","inviteGrpJpegThum","senderObj","comment","isSentByMe","isGroupMsg","isPSA","isGroupsV4InviteExpired"]),a=()=>{l.default.openModal((0,y.jsx)(u.default,{msg:s}))},E=s.isGroupsV4InviteExpired,b=s.inviteGrpName;if(!d.default.supportsFeature(d.default.F.GROUPS_V_4_JOIN_PERMISSION))return(0,y.jsx)(h.default,{msg:(0,v.unproxy)(s),displayAuthor:t});const T=(0,y.jsx)(_.default,{size:49,thumb:s.inviteGrpJpegThum}),M=s.comment?(0,y.jsx)("div",{className:c.default.caption,children:(0,y.jsx)(o.default,{msg:s.unsafe(),spacer:!0,trusted:s.isTrusted()})}):null,x=E?null:(0,y.jsx)(n.default,{items:[{label:s.isSentByMe?f.default.t(1009):f.default.t(963),onClick:a}],theme:s.comment?void 0:"no-divider"}),I=!E||!M,P=I?(0,y.jsx)("div",{className:c.default.meta,children:(0,y.jsx)(m.default,{msg:s})}):null,A=s.comment?f.default.t(1007):(0,y.jsx)(g.default,{msg:s.unsafe(),children:f.default.t(1007)});let N;if(E){const e=M?f.default.t(1004):(0,y.jsx)(g.default,{msg:s.unsafe(),children:f.default.t(1004)});N=(0,y.jsx)("div",{className:c.default.status,children:e})}return(0,y.jsxs)(S.default,{msg:s,displayAuthor:t,hideMeta:I,children:[(0,y.jsxs)(r.default,{contact:s.senderObj,msg:s.unsafe(),className:(0,i.default)(c.default.container,{[c.default.expired]:E,[c.default.noCaption]:!M}),children:[(0,y.jsx)("div",{className:c.default.linkPreview,children:(0,y.jsx)(p.default,{description:A,invite:!0,isSentByMe:s.isSentByMe,onClick:E?void 0:a,thumbnail:T,title:b,theme:E?"extended":void 0})}),N,M,P]}),x]})};var i=a(s(94184)),n=a(s(61630)),r=a(s(41340)),o=a(s(74574)),l=a(s(91952)),d=a(s(12950)),u=a(s(45842)),c=a(s(9027)),h=a(s(41267)),f=a(s(2408)),p=a(s(26976)),m=a(s(76480)),_=a(s(18327)),g=a(s(91266)),v=s(15298),S=a(s(41184)),C=a(s(76006)),y=s(85893)},41267:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){return(0,o.jsx)(r.default,{msg:e,displayAuthor:t,children:(0,o.jsx)(n.default,{iconName:"unknown",msg:e.unsafe(),children:i.default.t(588)})})};var i=a(s(2408)),n=a(s(25606)),r=a(s(41184)),o=s(85893)},14666:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,header:s,actions:a}){const g=e.isTrusted(),v={selectable:g,dirMismatch:e.rtl!==c.default.isRTL(),direction:e.dir,inferLinesDirection:!0},S=(0,m.jsx)(d.default,{text:e.body,textLimit:e.initialPageSize,children:({textLimit:t})=>(0,m.jsx)(l.default,(0,i.default)((0,i.default)({},v),{},{text:e.body,formatters:(0,o.Conversation)({links:e.getLinks(t),trusted:g}),textLimit:t}))}),C=e.footer?(0,m.jsx)(l.default,(0,i.default)((0,i.default)({},v),{},{text:e.footer,formatters:(0,o.Conversation)({links:e.getFooterLinks(),trusted:g}),xstyle:_.footer})):null,y=(null==a?void 0:a.length)?(0,m.jsx)("div",{className:(0,n.default)(_.actionRow),children:(0,m.jsx)(r.default,{items:a.map((e=>{var t;return{label:e.label,onClick:null!==(t=e.onClick)&&void 0!==t?t:()=>(0,f.default)()}}))})}):null;return(0,m.jsxs)(u.FlexColumn,{align:"stretch",xstyle:_.bubble,children:[(0,m.jsxs)(p.default,{msg:e,displayAuthor:t,children:[s,(0,m.jsx)(h.default,{msg:e.unsafe(),"data-id":e.id,children:S}),C]}),y]})};var i=a(s(81109)),n=a(s(56720)),r=a(s(61630)),o=s(68551),l=a(s(85051)),d=a(s(18598)),u=s(63290),c=a(s(2408)),h=a(s(42120)),f=a(s(62244)),p=a(s(41184)),m=s(85893);const _={bubble:{width:"nwuq7i8t"},footer:{display:"f804f6gw",marginTop:"iin4x6c7",fontSize:"ovllcyds",lineHeight:"q6wg26sa",color:"hp667wtd"},actionRow:{paddingBottom:"oq31bsqd",paddingLeft:"t6kbzwdk",paddingRight:"thbdkvv5"}}},38500:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e}){var t;const{title:s,subtitle:a}=null!==(t=e.interactiveHeader)&&void 0!==t?t:{},u={selectable:e.isTrusted(),dirMismatch:e.rtl!==o.default.isRTL(),direction:e.dir,inferLinesDirection:!0};return(0,l.jsxs)(r.FlexColumn,{xstyle:d.container,children:[s?(0,l.jsx)(n.default,(0,i.default)((0,i.default)({},u),{},{text:s,xstyle:d.title})):null,a?(0,l.jsx)(n.default,(0,i.default)((0,i.default)({},u),{},{text:a,xstyle:d.subtitle})):null]})};var i=a(s(81109)),n=(a(s(56720)),a(s(85051))),r=s(63290),o=a(s(2408)),l=s(85893);const d={container:{marginBottom:"ngycyvoj"},title:{fontSize:"bze30y65",fontWeight:"hnx8ox4h"},subtitle:{color:"hp667wtd"}}},47240:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){var s;const a=null===(s=(0,i.default)(e))||void 0===s?void 0:s.map((e=>{var t;return{label:e.label,onClick:null!==(t=e.onClick)&&void 0!==t?t:()=>(0,o.default)()}}));return(0,l.jsx)(n.default,{msg:e,displayAuthor:t,header:e.interactiveHeader?(0,l.jsx)(r.default,{msg:e}):null,actions:a})};var i=a(s(10868)),n=a(s(14666)),r=a(s(38500)),o=a(s(62244)),l=s(85893)},34249:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZE=void 0;var i=a(s(94184)),n=s(67294),r=a(s(55454)),o=a(s(49187)),l=a(s(54179)),d=a(s(2561)),u=s(22306),c=a(s(13985)),h=a(s(30157)),f=a(s(71681)),p=s(20845),m=s(85893);const{getGlyphId:_,getGlyphPath:g,markGlyphCached:v,isGlyphCached:S}=d.default,C=u.LARGE_EMOJI_SIZE;t.SIZE=C;const y="large",E="xlarge";class b extends n.Component{constructor(e){super(e),this._handleHighResLoaded=()=>{const e=_(this.props.emoji);null!=e&&v(e),this.setState({highResLoaded:!0})};const t=_(e.emoji),s=Boolean(null!=t&&S(t));this.state={highResLoaded:s}}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>{const e=_(this.props.emoji),t=Boolean(null!=e&&S(e));this.setState({highResLoaded:t})}))}render(){const{emoji:e,size:t,animation:s,element:a,selectable:n}=this.props,{highResLoaded:d}=this.state,u=_(e);if(null==u)return null;const f=(0,i.default)({[h.default.medium]:t===C.MEDIUM,[h.default.large]:t===C.LARGE,[h.default.xlarge]:t===C.XLARGE});let v;v=t===C.XLARGE?E:y;const S=g(u,v)[o.default.currentRes];if(d&&s)return(0,m.jsxs)(a,{className:h.default.animation,children:[(0,m.jsx)(p.SelectableImg,{alt:e,className:(0,i.default)(h.default.highRes,f),draggable:!1,plainText:e,selectable:Boolean(n),src:r.default.ONE_BY_ONE_TRANS_GIF}),(0,m.jsx)(c.default,{className:(0,i.default)(h.default.highRes,f,h.default.heartbeat),draggable:!1,selectable:!1,src:S})]});const b=d?void 0:(0,m.jsx)(l.default,{className:(0,i.default)(h.default.lowRes,f),emoji:e,selectable:n},"low-res"),T=(0,m.jsx)(l.default,{className:(0,i.default)(h.default.highRes,f,{[h.default.invisible]:!d}),emoji:e,selectable:n,src:S,onLoad:this._handleHighResLoaded},"high-res");return(0,m.jsxs)("span",{className:h.default.wrapper,children:[b,T]})}}b.defaultProps={animation:!1,element:"div",size:C.MEDIUM},b.displayName="LargeEmoji";var T=(0,f.default)(b);t.default=T},63384:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(74971)),n=s(67294),r=a(s(91952)),o=(a(s(55454)),a(s(66492))),l=s(4919),d=a(s(26976)),u=s(67659),c=a(s(13803)),h=a(s(1458)),f=a(s(76006)),p=s(85893);function m(e){const{msg:t,displayType:s,invite:a,theme:m}=e,_=(0,f.default)(t,["t","thumbnail","thumbnailHQ","thumbnailDirectPath","thumbnailHeight","thumbnailWidth","title","description","canonicalUrl","matchedText","isSentByMe","star","asUrl"]);(0,n.useEffect)((()=>{const e=_.asUrl;e&&(0,u.hqLinkPreviewDownloadSupported)()&&!(0,u.hqLinkPreviewExpired)(_.t)&&!e.thumbnailHQ&&(0,o.default)({msg:e,isPreload:!1})}),[_]);let g=null;if(!a){g=h.default.hostname(_.canonicalUrl||_.matchedText);try{g=i.default.toUnicode(g)}catch(e){}}const v=_.getSuspiciousLinks().filter((({url:e})=>_.matchedText===e));let S,C,y,E,b,T,M;return v.length?M=()=>{const e=v[0];r.default.openModal((0,p.jsx)(c.default,{link:e}))}:(M=()=>{const e=_.matchedText;(0,l.openExternalLink)(e)},S=_.description,C=_.thumbnail,(0,u.hqLinkPreviewDownloadSupported)()&&!(0,u.hqLinkPreviewExpired)(_.t)&&(y=_.thumbnailHQ,E=_.thumbnailDirectPath,b=_.thumbnailHeight,T=_.thumbnailWidth)),(0,p.jsx)(d.default,{canonicalUrl:g,description:S,displayType:s,invite:a,onClick:M,isSentByMe:_.isSentByMe,thumbnailJpeg:C,thumbnailJpegHQ:y,thumbnailJpegDirectPath:E,thumbnailJpegHeight:b,thumbnailJpegWidth:T,title:_.title,star:_.star,theme:m})}var _=(0,n.memo)(m);t.default=_},54044:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{displayAuthor:s,msg:a}=e,l=a.list,p=(0,r.useContext)(T.default);if(!l)return null;const g={selectable:!0,dirMismatch:a.rtl!==h.default.isRTL(),direction:a.dir,inferLinesDirection:!0},v=(0,d.Conversation)({links:a.getHeaderLinks(),selectable:!0,trusted:a.isTrusted()}),S=(0,d.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),selectable:!0,trusted:a.isTrusted()}),C=(0,d.Conversation)({links:a.getFooterLinks(),selectable:!0,trusted:a.isTrusted()}),E=l.listType===u.ListMessageListType.PRODUCT_LIST?(0,M.jsx)("div",{className:(0,n.default)(f.default.productListPreview,{[f.default.productListPreviewForwarded]:a.isForwarded}),children:(0,M.jsx)(y.default,{msg:a,onClick:e=>{e&&e.stopPropagation(),x(a,p)}})}):null,A=l.listType!==u.ListMessageListType.PRODUCT_LIST?(0,M.jsx)(c.default,(0,i.default)((0,i.default)({},g),{},{className:f.default.title,text:l.title,formatters:v,ellipsify:!0})):null,N=(0,M.jsx)(c.default,(0,i.default)((0,i.default)({},g),{},{text:l.description,formatters:S})),O=(0,M.jsx)(c.default,(0,i.default)((0,i.default)({},g),{},{className:f.default.footer,text:a.footer,formatters:C})),w=(0,M.jsx)("div",{className:f.default.meta,children:(0,M.jsx)(_.default,{msg:a})}),D=(0,M.jsx)(o.default,{items:[{label:null!==(t=I(l))&&void 0!==t?t:"",icon:P(l),onClick:e=>{e&&e.stopPropagation(),x(a,p)}}]});return(0,M.jsx)("div",{className:f.default.bubble,children:(0,M.jsxs)(b.default,{msg:a,displayAuthor:s,hideMeta:!0,children:[E,A,(0,M.jsxs)(m.default,{msg:a.unsafe(),"data-id":a.id,children:[N,a.footer?O:null,w]}),D]})})};var i=a(s(81109)),n=a(s(94184)),r=s(67294),o=a(s(61630)),l=a(s(91952)),d=s(68551),u=s(60934),c=a(s(85051)),h=a(s(2408)),f=a(s(90373)),p=a(s(30906)),m=a(s(42120)),_=a(s(76480)),g=a(s(4231)),v=s(70790),S=a(s(90277)),C=a(s(62002)),y=a(s(65330)),E=a(s(97038)),b=a(s(41184)),T=a(s(64029)),M=s(85893);function x(e,t){const{list:{listType:s}}=e;if(null!=s)switch(s){case u.ListMessageListType.SINGLE_SELECT:l.default.openModal((0,M.jsx)(p.default,{msg:e}));break;case u.ListMessageListType.PRODUCT_LIST:!function(e,t){const s=e.isForwarded?e.businessOwnerJid:e.from.toString({legacy:!0});if(null==e.list.productListInfo||null==s)return;const a=E.default.getOrAdd(e.id,e.list.productListInfo,s,e.list.title);null!=a&&l.default.openDrawerRight((0,M.jsx)(C.default,{chat:e.chat,catalogOwnerJid:s,productListId:a.id}),"slide-left",t,(0,v.buildProductCatalogContext)(new S.default,g.default.BIZ_PLATFORM.ENT,g.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE))}(e,t)}}function I(e){const{listType:t}=e;return t===u.ListMessageListType.PRODUCT_LIST?h.default.t(1484):e.buttonText}function P(e){const{listType:t}=e;if(t!==u.ListMessageListType.PRODUCT_LIST)return"list-msg-icon"}},518:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MSG_HEIGHT=void 0;var i=a(s(94184)),n=s(67294),r=a(s(17850)),o=a(s(41340)),l=a(s(74574)),d=a(s(25142)),u=a(s(91952)),c=a(s(88419)),h=a(s(12950)),f=a(s(2408)),p=a(s(71681)),m=a(s(75649)),_=a(s(33499)),g=a(s(70998)),v=a(s(23958)),S=a(s(76480)),C=s(19407),y=a(s(79485)),E=a(s(2966)),b=s(85893);t.MSG_HEIGHT=220;class T extends n.Component{constructor(e){super(e),this._openLiveLocationDrawer=()=>{const{chat:e,sender:t}=this.props.msg;u.default.liveLocationDrawer(e,t)},this._openExpiredLocationDrawer=()=>{u.default.expiredLocationDrawer(this.props.msg.unsafe())},this._stopSharing=()=>{const{chat:e}=this.props.msg;u.default.openModal((0,b.jsx)(g.default,{chat:e}))},this._handleMapLoad=()=>{this.setState({mapLoaded:!0})},this.state={mapLoaded:!1}}_getExpiration(){const{msg:{t:e,shareDuration:t}}=this.props;return null==t?e:e+t}isExpired(){return d.default.globalUnixTime()>=this._getExpiration()}render(){const{msg:e,trusted:t,displayAuthor:s,quotedMsg:a}=this.props;if(h.default.supportsFeature(h.default.F.LIVE_LOCATIONS)){const n=s?(0,b.jsx)("div",{className:m.default.author,children:(0,b.jsx)(r.default,{msg:e,contact:e.senderObj})}):null,u=a?(0,b.jsx)("div",{className:m.default.quote,children:a}):null,p=this.isExpired(),_=p&&void 0!==e.finalLat&&void 0!==e.finalLng;let g=e.lat,y=e.lng,T=p?void 0:this._openLiveLocationDrawer;h.default.supportsFeature(h.default.F.LIVE_LOCATIONS_FINAL)&&(T||(T=this._openExpiredLocationDrawer),_&&(g=e.finalLat,y=e.finalLng));const M=(0,b.jsxs)("div",{className:m.default.thumb,onClick:T,style:{height:150},children:[(0,b.jsx)("div",{className:m.default.map,children:(0,b.jsx)(v.default,{lat:g,lng:y,width:270,height:150,className:m.default.thumbBody,linkify:!1,showMarker:!1,onLoad:this._handleMapLoad})}),(0,b.jsx)("div",{className:(0,i.default)(m.default.avatar,{[m.default.hidden]:!this.state.mapLoaded}),children:(0,b.jsx)(c.default,{id:e.sender,size:40,border:!0})}),(0,b.jsx)("div",{className:m.default.overlay})]}),x=this._getExpiration(),I=p?f.default.t(1111):f.default.t(1117,{time:d.default.timestampStr(x),_plural:d.default.timestampHour(x)}),P=(0,b.jsxs)("div",{className:m.default.status,onClick:T,children:[(0,b.jsx)("span",{className:m.default.statusIcon,children:(0,b.jsx)(E.default,{name:(0,C.liveLocationIcon)(!p),display:"inline"})}),(0,b.jsx)("span",{className:m.default.statusText,children:I})]}),A=e.comment?(0,b.jsx)("div",{className:m.default.caption,children:(0,b.jsx)(l.default,{msg:e.unsafe(),trusted:t})}):null,N=(0,b.jsx)("div",{className:m.default.meta,children:(0,b.jsx)(S.default,{msg:e})});let O;if(!p){let t,s,a;e.isSentByMe?(t=this._stopSharing,s=m.default.stopLocation,a=f.default.t(1134)):(t=this._openLiveLocationDrawer,s=m.default.viewLocation,a=f.default.t(1141)),O=(0,b.jsx)("div",{className:m.default.actionButton,onClick:t,children:(0,b.jsx)("span",{className:s,children:a})})}return(0,b.jsxs)("div",{className:(0,i.default)({[m.default.expired]:p,[m.default.hasCaption]:!!e.comment}),children:[(0,b.jsxs)(o.default,{className:(0,i.default)(m.default.container,{[m.default.clickable]:!!T}),contact:e.senderObj,msg:e.unsafe(),children:[n,u,M,P,A,N]}),O]})}return(0,b.jsx)(_.default,{msg:e,displayAuthor:s,quotedMsg:a})}}T.CONCERNS={msg:["chat","comment","dir","finalLat","finalLng","isGroupMsg","isPSA","isSentByMe","lat","lng","rtl","sender","senderObj","shareDuration","t"]},T.displayName="LiveLocation";var M=(0,p.default)((0,y.default)(T,T.CONCERNS));t.default=M},33499:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(68551),r=a(s(85051)),o=a(s(2408)),l=a(s(94563)),d=a(s(42120)),u=a(s(25606)),c=s(17223),h=s(19407),f=a(s(41184)),p=s(85893);var m=e=>{const{msg:t}=e,s=(0,n.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),selectable:!0,trusted:t.isTrusted()}),a=t.comment?(0,p.jsx)(d.default,{msg:t.unsafe(),children:(0,p.jsx)(r.default,{text:t.comment,formatters:s,selectable:!0,dirMismatch:t.rtl!==o.default.isRTL(),direction:t.dir})}):null;let m;if(e.quotedMsg){const s=(0,i.default)(l.default.quote,{[l.default.hasAuthor]:e.displayAuthor,[l.default.forwarded]:(0,c.showForwarded)(t)});m=(0,p.jsx)("div",{className:s,children:e.quotedMsg})}return(0,p.jsxs)(f.default,{msg:t,displayAuthor:e.displayAuthor,children:[m,(0,p.jsx)("div",{className:a?l.default.hasText:l.default.noText,children:(0,p.jsx)(u.default,{hasCaption:!!a,iconName:(0,h.liveLocationIcon)(!1),msg:e.msg.unsafe(),theme:"small-icon",children:o.default.t(589)})}),a]})};t.default=m},44199:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,y.default)(e.msg,["caption","clientUrl","dir","footer","id","isGroupMsg","isSentByMe","lat","lng","rtl","senderObj","type","ctwaContext","supportsMessageFooter","isDynamicReplyButtonsMsg","hasBodyOrFooter"]),s=()=>{let e=t.get("loc");if(t.get("loc"))return e=e.split("\n"),2===e.length?{name:e[0],addr:e[1]}:{name:e}},a=s(),T=a&&a.name,M=t,{lat:x,lng:I}=M,P=(0,f.getMapUrl)(x,I,T),A=M.isDynamicReplyButtonsMsg?null:(e=>{const r=s(),o=t.clientUrl||e;let l,d,u;const h=C.default.hostname(o),f=(0,i.default)(b.filter((e=>h.includes(e)))),m=f?(0,E.jsx)("span",{className:c.default.link,children:h}):null,_=C.default.isHttps(o);if(!_)return o.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)`Bad url: ${o}`,SEND_LOGS("URL error")),null;if(!f&&_&&r&&!o.includes("javascript")){l=r.name?(0,E.jsx)(g.SelectableLink,{className:c.default.title,dir:"auto",href:o,plainText:`${r.name}\n${o}`,selectable:!0,target:"_blank",title:r.name,children:r.name}):null;const e=(0,n.default)(c.default.address,{[c.default.hasURL]:m});d=(null==a?void 0:a.addr)?(0,E.jsx)(g.SelectableDiv,{className:e,selectable:!0,title:a.addr,children:a.addr}):null}return(l||d||m)&&(u=(0,E.jsx)("div",{className:c.default.text,children:(0,E.jsxs)(p.default,{msg:t.unsafe(),"data-id":t.id,children:[l,d,m]})})),u})(P),N=null!=A||M.supportsMessageFooter&&M.hasBodyOrFooter?null:(0,E.jsx)(S.default,{}),O=(0,_.showForwarded)(M),w=e.displayAuthor?(0,E.jsx)("div",{className:c.default.author,children:(0,E.jsx)(r.default,{msg:M,contact:M.senderObj})}):null,D=O?(0,E.jsx)(u.default,{msg:M.unsafe(),className:c.default.forwardedIndicator}):null,j=(0,n.default)(c.default.container,{[c.default.hasCaption]:A,[c.default.hasAuthor]:e.displayAuthor,[c.default.forwarded]:O,[c.default.ctwaContainerWidth]:null!=M.ctwaContext}),R=e.quotedMsg?(0,E.jsx)("div",{className:c.default.quote,children:e.quotedMsg}):null;let L,k;M.supportsMessageFooter&&(L=M.caption?(0,E.jsx)("div",{className:c.default.caption,children:(0,E.jsx)(l.default,{msg:M.unsafe(),spacer:!M.footer,trusted:e.trusted})}):null,k=(0,E.jsx)(v.default,{dir:M.dir,footer:M.footer,isShown:M.supportsMessageFooter,msg:M.unsafe(),rtl:M.rtl,type:M.type,trusted:e.trusted}));return(0,E.jsx)("div",{children:(0,E.jsxs)(o.default,{className:j,contact:M.senderObj,msg:M.unsafe(),children:[w,D,R,(0,E.jsx)(d.default,{msg:M.unsafe(),wrapperClass:c.default.ctwaContext}),(0,E.jsxs)(g.SelectableDiv,{className:c.default.thumb,onClick:e=>{e.stopPropagation()},plainText:P,selectable:!0,style:{height:150},children:[(0,E.jsx)(h.default,{lat:M.lat,lng:M.lng,width:M.ctwaContext?330:270,height:150,name:T,className:c.default.thumbBody}),N]}),A,L,k,(0,E.jsx)("div",{className:c.default.meta,children:(0,E.jsx)(m.default,{msg:M})})]})})},t.PREVIEW_HEIGHT=void 0;var i=a(s(41609)),n=a(s(94184)),r=a(s(17850)),o=a(s(41340)),l=a(s(74574)),d=a(s(32646)),u=a(s(89513)),c=a(s(1696)),h=a(s(23958)),f=s(25281),p=a(s(42120)),m=a(s(76480)),_=s(17223),g=s(20845),v=a(s(73502)),S=a(s(32473)),C=a(s(1458)),y=a(s(76006)),E=s(85893);t.PREVIEW_HEIGHT=150;const b=["foursquare.com","facebook.com","maps.google.com"]},57087:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,u.showForwarded)(e.msg),s=e.displayAuthor?(0,c.jsx)("div",{className:l.default.author,children:(0,c.jsx)(n.default,{msg:e.msg,contact:e.msg.senderObj})}):null,a=e.displayType===r.default.DISP_TYPE.GALLERY||e.hideMeta?null:(0,c.jsx)("div",{className:l.default.meta,children:(0,c.jsx)(d.default,{msg:e.msg})}),h=t?(0,c.jsx)(o.default,{msg:e.msg.unsafe(),className:l.default.forwardedIndicator}):null,f=e.quotedMsg?(0,c.jsx)("div",{className:l.default.quote,children:e.quotedMsg}):null,p=(0,i.default)(l.default.bubble,{[l.default.forwarded]:t,[l.default.hasAuthor]:e.displayAuthor,[l.default.hasCaption]:e.hasCaption,[l.default.isPSA]:e.msg.isPSA});return(0,c.jsxs)("div",{className:p,children:[s,h,f,e.children,a]})};var i=a(s(94184)),n=a(s(17850)),r=a(s(55454)),o=a(s(89513)),l=a(s(8546)),d=a(s(76480)),u=s(17223),c=s(85893)},17302:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isMediaTypeWithImage=d,t.default=function(e){const t=(0,o.default)(e.mediaData,["filehash","fullPreviewData","mediaStage","preview","type"]),s=()=>{var e,s,a,i;const n=[],r=null===(e=t.preview)||void 0===e||null===(s=e.url)||void 0===s?void 0:s.call(e);r&&n.push((0,l.jsx)(u,{url:r},"preview"));const o=null===(a=t.fullPreviewData)||void 0===a||null===(i=a.url)||void 0===i?void 0:i.call(a);return o&&n.push((0,l.jsx)(u,{url:o},"fullPreview")),n.length?n:null};if(!d(t.type))return s();return(0,l.jsx)(r.default,{mediaData:t,placeholderRenderer:s,renderProgressively:!0,children:e=>(0,l.jsx)(u,{url:e})},t.filehash)};var i=a(s(55454)),n=a(s(42315)),r=a(s(80747)),o=a(s(76006)),l=s(85893);function d(e){return e===i.default.MSG_TYPE.IMAGE||e===i.default.MSG_TYPE.PRODUCT}function u({url:e}){return(0,l.jsx)("div",{className:n.default.preview,style:{backgroundImage:`url(${e})`}})}},41482:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBase64=i,t.convertToDataURI=function(e){return`data:image/jpeg;base64,${i(e)}`};var a=s(38438);function i(e){return btoa(String.fromCharCode.apply(null,a.Binary.build(e).readByteArray()))}},87459:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(94822)),l=a(s(55454)),d=s(60934),u=s(78471),c=a(s(2408)),h=s(67659),f=a(s(61276)),p=s(17223),m=a(s(79485)),_=s(15298),g=a(s(2966)),v=a(s(13038)),S=s(83381),C=s(62437),y=s(85893);class E extends n.PureComponent{constructor(...e){super(...e),this.setRefContext=e=>this.refContext=e,this.handleClick=e=>{this.props.onToggle(e.target)},this.handleMouseDown=e=>{e.stopPropagation()}}render(){var e;const{msg:t,isGroupedSticker:s,hasAuthor:a}=this.props,{isSentByMe:n,type:m}=t,v=!!t.quotedMsg,E=!t.quotedMsg&&t.quotedRemoteJid,b=(0,p.showForwarded)(t),T=E?null:n?f.default.contextOut:f.default.contextIn,M=m===l.default.MSG_TYPE.DOCUMENT&&!t.body,x=m===l.default.MSG_TYPE.DOCUMENT&&t.body,I=m===l.default.MSG_TYPE.LOCATION,P=t.linkPreview&&(0,u.isParsableOnlineVideoURL)(t.richPreviewType,t.matchedText,t.doNotPlayInline),A=m===l.default.MSG_TYPE.LIST&&(null===(e=t.list)||void 0===e?void 0:e.listType)===d.ListMessageListType.PRODUCT_LIST,N=x||I||v||A||m===l.default.MSG_TYPE.PAYMENT||P||m===l.default.MSG_TYPE.PRODUCT||t.ctwaContext||t.isMedia&&!t.isViewOnce&&m!==l.default.MSG_TYPE.AUDIO||t.isViewOnce&&!n&&!(0,S.isViewed)(t.safe()),O=t.getSuspiciousLinks().length>0,w=m===l.default.MSG_TYPE.CHAT&&t.linkPreview&&!P&&!a&&!b&&!O&&t.isTrusted(),D=(0,h.displayHighQualityLinkPreview)((0,_.unproxy)(t.unsafe())),j=N&&!a&&!O&&!b||w&&D,R=(0,i.default)(j?f.default.contextIconMedia:f.default.contextIcon),L=m===l.default.MSG_TYPE.PTT||m===l.default.MSG_TYPE.AUDIO,k=t.type===l.default.MSG_TYPE.MULTI_VCARD&&!v&&!a&&!b,F=m===l.default.MSG_TYPE.GROUPS_V4_INVITE,B=m===l.default.MSG_TYPE.ORDER,G=(w&&!D||M||F||B)&&!a&&!b&&!v,U=m===l.default.MSG_TYPE.STICKER&&!t.ctwaContext&&!v&&(s||!t.isGroupMsg||t.isGroupMsg&&t.isSentByMe);let V,H;if(U){const e=o.default.get("defaultPreference"),t=e?e.wallpaperColor:l.default.DEFAULT_CHAT_WALLPAPER;H=(0,y.jsx)("div",{className:f.default.badge,style:{backgroundColor:t,opacity:.9}}),V=(0,C.invertTransparentWallpaperColors)(this.context.theme,t)}const W=!(m!==l.default.MSG_TYPE.CHAT||v||a||b||P||!t.dir||t.rtl===c.default.isRTL()),Y=(m===l.default.MSG_TYPE.PTT||m===l.default.MSG_TYPE.AUDIO)&&c.default.isRTL()&&!a,K=(0,i.default)(T,j?c.default.isRTL()?f.default.contextMediaRtl:f.default.contextMediaLtr:null,{[f.default.context]:!(j||w)||G,[f.default.contextMedia]:j,[f.default.contextPtt]:L,[f.default.contextPttFix]:L&&!v&&!a,[f.default.contextSpecial]:G,[f.default.contextDoc]:M&&!a&&!b&&!v,[f.default.contextMediaDocument]:x,[f.default.contextMultiVcard]:k,[f.default.contextInverse]:W||Y,[f.default.contextStickerAuthor]:m===l.default.MSG_TYPE.STICKER&&!U,[f.default.contextStickerTransparent]:U,[f.default.contextStickerInverse]:U&&V});return(0,y.jsxs)("div",{className:K,children:[(0,y.jsx)("div",{"data-a8n":r.default.key("icon-down-context"),"data-js-context-icon":!0,className:R,ref:this.setRefContext,onMouseDown:this.handleMouseDown,onClick:this.handleClick,children:(0,y.jsx)(g.default,{name:"down-context"})}),H]})}}E.contextType=v.default,E.CONCERNS={msg:["ack","linkPreview","matchedText","dir","rtl","isMedia","isSentByMe","isGroupMsg","isViewOnce","type","quotedMsg","body","quotedRemoteJid","richPreviewType","doNotPlayInline","ctwaContext","list","thumbnailDirectPath","thumbnailHeight","thumbnailWidth","text"]},E.displayName="Menu";var b=(0,m.default)(E,E.CONCERNS);t.default=b},38125:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e,displayType:t,hideCaption:s=!1,hideMeta:a=!1,msg:m,quotedMsg:_,showAuthor:g=!1,trusted:v}){const{caption:S,dir:C,footer:y,isSentByMe:E,isGroupMsg:b,rtl:T,senderObj:M,supportsMessageFooter:x,type:I}=(0,f.default)(m,["caption","dir","footer","isFromTemplate","isSentByMe","isGroupMsg","rtl","senderObj","supportsMessageFooter","type"]),P=g&&!E&&b,A=!s&&S,N=(0,c.showForwarded)(m);return(0,p.jsxs)(p.Fragment,{children:[P?(0,p.jsx)("div",{className:(0,i.default)(d.default.author,{[d.default.hasForwarded]:N}),children:(0,p.jsx)(n.default,{msg:m,contact:M})}):null,N?(0,p.jsx)(l.default,{msg:m.unsafe(),className:(0,i.default)(d.default.forwardedIndicator,{[d.default.hasAuthor]:P})}):null,null!=_?(0,p.jsx)("div",{className:d.default.quote,children:_}):null,e,A?(0,p.jsx)("div",{className:d.default.caption,children:(0,p.jsx)(r.default,{msg:m.unsafe(),trusted:v,spacer:!y})}):null,x?(0,p.jsx)(h.default,{dir:C,footer:y,isShown:x,msg:m.unsafe(),rtl:T,type:I,trusted:v}):null,!a&&(0,p.jsx)("div",{className:(0,i.default)(d.default.meta,{[d.default.hasCaption]:A}),children:(0,p.jsx)(u.default,{msg:m,theme:t===o.default.DISP_TYPE.GALLERY?"date":void 0})})]})};var i=a(s(94184)),n=a(s(17850)),r=a(s(74574)),o=a(s(55454)),l=a(s(89513)),d=a(s(25153)),u=a(s(76480)),c=s(17223),h=a(s(73502)),f=a(s(76006)),p=s(85893)},51435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgPosition=void 0;t.MsgPosition={FRONT:"FRONT",MID:"MID",END:"END",SINGLE:"SINGLE"}},42120:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{broadcast:s,isFromTemplate:a,isSentByMe:u,labels:c,star:h,type:f}=(0,l.default)(e.msg,["broadcast","isFromTemplate","isSentByMe","labels","star","type"]);let p={};const m=null===(t=e.spacer)||void 0===t||t;if(m){let e;switch(f){case n.default.MSG_TYPE.REVOKED:e=[s,c&&c.length&&(0,r.canDisplayLabel)()];break;default:e=[s,u,c&&c.length&&(0,r.canDisplayLabel)(),h]}const t=e.filter(Boolean).length;t>0&&(p={[o.default.icons1]:1===t,[o.default.icons2]:2===t,[o.default.icons3]:3===t,[o.default.icons4]:t>=4})}return(0,d.jsxs)("div",{className:(0,i.default)(e.className,{[o.default.text]:!0,[o.default.placeholder]:"placeholder"===e.theme,[o.default.template]:a}),children:[e.children,m&&(0,d.jsx)("span",{className:(0,i.default)(o.default.spacer,p)})]})};var i=a(s(94184)),n=a(s(55454)),r=s(78615),o=a(s(57155)),l=a(s(76006)),d=s(85893)},76480:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,theme:t}){const{broadcast:s,caption:a,isLive:i,asRevoked:n,isMdHistoryMsg:d,isSentByMe:h,isViewOnce:_,labels:b,loc:T,star:M,t:x,type:I,subtype:P,isSendFailure:A}=(0,v.default)(e.unsafe(),["broadcast","caption","isLive","asRevoked","isMdHistoryMsg","isSentByMe","isViewOnce","labels","loc","star","t","type","subtype","isSendFailure"]),[N,O]=(0,r.useState)(!1);(0,g.useListener)(o.default,o.HOUR24_FORMAT_CHANGE_EVENT,(()=>{O(!N)}));const w=[],D=(I===y.IMAGE||I===y.VIDEO)&&!a&&!_||I===y.LOCATION&&!i&&!T;M&&!n&&w.push((0,C.jsx)(m.default,{name:"star","aria-label":` ${u.default.t(46)} `}));s&&w.push((0,C.jsx)(m.default,{name:"broadcast"}));const j=h&&I!==y.REVOKED;let R=null;j&&(R=(0,C.jsx)(p.default,{msg:e.unsafe()}));S.default.supportsFeature(S.default.F.MD_BACKEND)&&(I===y.UNKNOWN&&"fanout"===P||A)&&(R=null);const L=b&&b.length>0?(0,C.jsx)(c.default,{labels:b,showName:!1}):null;return(0,C.jsx)(E,{icons:w,labels:L,light:D,onClick:j&&!d?()=>{l.default.msgInfoDrawer((0,f.unproxy)(e.unsafe()))}:null,status:R,children:"date"!==t?x?o.default.timestampStr(x):null:x?o.default.relativeStr(x):null})},t.MetaFrame=E;var n=i(s(94184)),r=s(67294),o=a(s(25142)),l=i(s(91952)),d=i(s(55454)),u=i(s(2408)),c=i(s(84498)),h=i(s(18981)),f=s(15298),p=i(s(81538)),m=i(s(2966)),_=i(s(35371)),g=s(61192),v=i(s(76006)),S=i(s(12950)),C=s(85893);const y=d.default.MSG_TYPE;function E(e){const t=e.icons&&e.icons.length>0?e.icons.map(((e,t)=>(0,C.jsx)("div",{className:h.default.icon,children:e},`icon-${t}`))):null,s=e.labels?(0,C.jsx)("div",{className:h.default.labels,children:e.labels}):null,a=e.status?(0,C.jsx)("div",{className:h.default.status,children:e.status}):null,i=(0,n.default)(h.default.meta,{[h.default.metaLight]:e.light,[h.default.chromeFix]:_.default.os===d.default.OS_TYPE.MAC&&_.default.browser===d.default.BROWSER_TYPE.CHROME&&_.default.osVersion.includes("10.15")});return(0,C.jsxs)("div",{className:i,onClick:e.onClick,role:e.onClick?"button":null,children:[t,s,(0,C.jsx)("span",{className:h.default.timestamp,dir:"auto",children:e.children}),a]})}},18416:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(r.default.container,{[r.default.isChecked]:e.checked,[r.default.gallery]:"gallery"===e.msgTheme});return(0,o.jsx)("div",{className:t,onClick:e.onClick,children:(0,o.jsx)(n.default,{onChange:e.onClick,checked:e.checked,theme:e.theme})})};var i=a(s(94184)),n=a(s(33287)),r=a(s(21123)),o=s(85893)},62015:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgComponent=void 0;var i=a(s(81109)),n=s(67294),r=a(s(20615)),o=a(s(84686)),l=a(s(55454)),d=a(s(558)),u=a(s(70217)),c=a(s(75749)),h=a(s(47240)),f=a(s(54044)),p=a(s(518)),m=a(s(44199)),_=a(s(16625)),g=s(74818),v=a(s(97711)),S=a(s(33090)),C=a(s(22953)),y=a(s(51538)),E=a(s(15218)),b=a(s(2804)),T=a(s(64863)),M=a(s(76866)),x=a(s(38732)),I=a(s(199)),P=a(s(13727)),A=a(s(72426)),N=a(s(79485)),O=s(15298),w=a(s(18504)),D=a(s(80153)),j=a(s(52481)),R=a(s(27058)),L=a(s(17951)),k=s(50313),F=a(s(51474)),B=a(s(64404)),G=s(85893);class U extends n.PureComponent{constructor(...e){super(...e),this.ref=(0,n.createRef)(),this._getParsedVcardList=(0,_.default)((({vcardList:e})=>e?e.map((e=>(0,i.default)((0,i.default)({},e),{},{parsedVcard:(0,k.parseVcard)(e.vcard)}))):[]))}getQuotedMsg(){const{displayType:e,msg:t,chat:s}=this.props;let a;if(e!==l.default.DISP_TYPE.GALLERY){const i=t.quotedMsgObj();if(i)a=(0,G.jsx)(I.default,{msg:i,rootMsg:(0,O.unproxy)(t.safe()),displayType:e,theme:"conversation",chat:(0,O.unproxy)(s),t:t.t},i.id.toString());else{const e=t.getQuotedMsgAdminGroupJid();e&&(a=(0,G.jsx)(P.default,{quotedGroupJid:e}))}}return a}getRef(){return this.ref.current}render(){const{chat:e,displayAuthor:t,displayType:s,isMsgVisible:a,msg:i}=this.props,n=i.safe();if(null!=n.asViewOnce){const e=n.asViewOnce;return(0,G.jsx)(B.default,{displayType:s,displayAuthor:t,mediaData:e.mediaData,msg:e,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:i.isTrusted()})}switch(n.type){case l.default.MSG_TYPE.CHAT:case l.default.MSG_TYPE.LIST_RESPONSE:case l.default.MSG_TYPE.BUTTONS_RESPONSE:return n.nativeFlowName?(0,G.jsx)(S.default,{msg:(0,O.unproxy)(n),displayAuthor:t}):(0,G.jsx)(D.default,{msg:(0,O.unproxy)(n),contact:n.senderObj,quotedMsg:this.getQuotedMsg(),trusted:n.isTrusted(),displayType:s,displayAuthor:t});case l.default.MSG_TYPE.IMAGE:return(0,G.jsx)(T.default,{msg:n,displayType:s,mediaData:n.mediaData,ref:this.ref,quotedMsg:this.getQuotedMsg(),isMsgVisible:a,trusted:n.isTrusted(),displayAuthor:t});case l.default.MSG_TYPE.PRODUCT:return(0,G.jsx)(M.default,{msg:n,mediaData:n.mediaData,displayAuthor:t,trusted:n.isTrusted(),onProductClick:this.props.onProductClick,quotedMsg:this.getQuotedMsg()});case l.default.MSG_TYPE.GROUP_NOTIFICATION:case l.default.MSG_TYPE.GP2:case l.default.MSG_TYPE.BROADCAST_NOTIFICATION:case l.default.MSG_TYPE.NOTIFICATION:case l.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case l.default.MSG_TYPE.E2E_NOTIFICATION:case l.default.MSG_TYPE.CALL_LOG:return(0,G.jsx)(C.default,{contact:(0,O.unproxy)(e).contact,msg:n,ref:this.ref});case l.default.MSG_TYPE.AUDIO:return(0,G.jsx)(r.default,{msg:n,mediaData:n.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:s,ref:this.ref});case l.default.MSG_TYPE.VIDEO:return!0===n.isGif?(0,G.jsx)(u.default,{displayAuthor:t,displayType:s,isMsgVisible:a,maxWidth:this.props.maxWidth,mediaData:n.mediaData,msg:n,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:n.isTrusted()}):(0,G.jsx)(F.default,{displayAuthor:t,displayType:s,hover:this.props.hover,isMsgVisible:a,mediaData:n.mediaData,msg:n,quotedMsg:this.getQuotedMsg(),ref:this.ref,trusted:n.isTrusted()});case l.default.MSG_TYPE.VCARD:return(0,G.jsx)(R.default,{msg:n,vcard:n.vcard,ref:this.ref,quotedMsg:this.getQuotedMsg(),displayType:s,displayAuthor:t,onMessageClick:this.props.onMessageClick});case l.default.MSG_TYPE.MULTI_VCARD:return(0,G.jsx)(v.default,{msg:n,vcardList:this._getParsedVcardList({vcardList:this.props.msg.vcardList}),ref:this.ref,quotedMsg:this.getQuotedMsg(),displayType:s,displayAuthor:t});case l.default.MSG_TYPE.GROUPS_V4_INVITE:return(0,G.jsx)(c.default,{msg:n,ref:this.ref,displayAuthor:t});case l.default.MSG_TYPE.LOCATION:return!0===n.isLive?(0,G.jsx)(p.default,{msg:(0,O.unproxy)(n),ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:n.isTrusted(),displayAuthor:t}):(0,G.jsx)(m.default,{msg:(0,O.unproxy)(n),ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:n.isTrusted(),displayAuthor:t});case l.default.MSG_TYPE.PAYMENT:return(0,G.jsx)(b.default,{msg:n,ref:this.ref,quotedMsg:this.getQuotedMsg(),displayAuthor:t});case l.default.MSG_TYPE.PTT:return(0,G.jsx)(x.default,{msg:n,mediaData:n.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:s,ref:this.ref,getSequentialMsg:this.props.getSequentialMsg});case l.default.MSG_TYPE.STICKER:return(0,G.jsx)(w.default,{msg:n,mediaData:n.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,position:this.props.position,forwardRef:this.props.forwardStickerRef,animateOnView:!0});case l.default.MSG_TYPE.DOCUMENT:return i.isVcardOverMmsDocument?(0,G.jsx)(L.default,{chat:e,msg:n,mediaData:i.mediaData,displayAuthor:t,displayType:s,getQuotedMsg:()=>this.getQuotedMsg(),onMessageClick:this.props.onMessageClick}):(0,G.jsx)(d.default,{msg:n,displayType:s,mediaData:n.mediaData,ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:n.isTrusted(),displayAuthor:t});case l.default.MSG_TYPE.UNKNOWN:return(0,G.jsx)(j.default,{msg:(0,O.unproxy)(n),displayAuthor:t,hideUpdateButton:"phone_only_feature"===n.subtype});case l.default.MSG_TYPE.CIPHERTEXT:return(0,G.jsx)(o.default,{msg:n,ref:this.ref,displayAuthor:t});case l.default.MSG_TYPE.REVOKED:return this.ref.current=null,(0,G.jsx)(A.default,{msg:(0,O.unproxy)(n)});case l.default.MSG_TYPE.OVERSIZED:return(0,G.jsx)(E.default,{msg:(0,O.unproxy)(n),displayAuthor:t});case l.default.MSG_TYPE.HSM:case l.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:return(0,G.jsx)(D.default,{msg:(0,O.unproxy)(n),contact:n.senderObj,ref:this.ref,quotedMsg:this.getQuotedMsg(),trusted:n.isTrusted(),displayType:s,displayAuthor:t});case l.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===i.subtype?(0,G.jsx)(C.default,{contact:(0,O.unproxy)(e).contact,msg:n,ref:this.ref}):(0,G.jsx)(j.default,{msg:(0,O.unproxy)(n),ref:this.ref,displayAuthor:t});case l.default.MSG_TYPE.ORDER:return(0,G.jsx)(y.default,{displayAuthor:t,msg:(0,O.unproxy)(n)});case l.default.MSG_TYPE.LIST:if((0,g.listMsgCanRender)(n))return(0,G.jsx)(f.default,{msg:(0,O.unproxy)(n),displayAuthor:t});break;case l.default.MSG_TYPE.INTERACTIVE:return(0,G.jsx)(h.default,{msg:(0,O.unproxy)(n),displayAuthor:t})}return __LOG__(2)`messageList:render Unknown message type: ${i.type}`,(0,G.jsx)(j.default,{msg:(0,O.unproxy)(n),ref:this.ref,displayAuthor:t})}}t.MsgComponent=U,U.CONCERNS={msg:["body","caption","rtl","dir","isSentByMe","isPSA","isViewOnce","ctwaContext","initialPageSize","hasTemplateButtons","thumbnail","orderTitle","totalAmount1000","totalCurrencyCode","itemCount","isGif","isLive","isVcardOverMmsDocument","mediaData","nativeFlowName","nativeFlowButtons","senderObj","subtype","type","t","id","title","isFromTemplate","vcard","vcardList"],chat:["trusted"]},U.displayName="MsgComponent";const V=(0,N.default)(U,U.CONCERNS);t.default=class extends V{getRef(){return this.getComponent().getRef()}}},25606:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(42120)),r=a(s(87581)),o=a(s(2966)),l=s(85893);var d=e=>{const t=e.hasCaption?e.children:(0,l.jsx)("div",{className:r.default.text,children:(0,l.jsx)(n.default,{msg:e.msg,theme:"placeholder",children:e.children})}),s=e.iconName?(0,l.jsx)("div",{className:r.default.icon,children:(0,l.jsx)(o.default,{name:e.iconName})}):null;return(0,l.jsxs)("div",{className:(0,i.default)(r.default.container,{[r.default.containerSmallIcon]:"small-icon"===e.theme}),children:[s,t]})};t.default=d},65281:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{currentTime:t,duration:s,onSeekEnd:a,outgoing:i,waveform:h}=e,f=(0,n.useContext)(o.default),p=(0,n.useCallback)((()=>null!=t?t:0),[t]),m=(0,n.useCallback)((()=>[...h].map((e=>e/100))),[h]),_=(0,n.useCallback)((()=>s),[s]);return(0,d.jsx)("div",{className:(0,r.default)(u),children:(0,d.jsx)(l.default,{theme:c(f.theme,i),sampleRate:6,getSamples:m,getCurrentTime:p,getDuration:_,live:!1,mode:l.WaveformMode.PREVIEW,onSeekEnd:a})})};var n=s(67294),r=i(s(56720)),o=i(s(13038)),l=a(s(37374)),d=s(85893);const u={display:"p357zi0d",height:"bmot90v7"};function c(e,t){const s="dark"===e;return t?s?l.WaveformTheme.CONVERSATION_OUTGOING_DARK:l.WaveformTheme.CONVERSATION_OUTGOING_LIGHT:s?l.WaveformTheme.CONVERSATION_INCOMING_DARK:l.WaveformTheme.CONVERSATION_INCOMING_LIGHT}},84398:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({emojis:e,animation:t}){const s=e?e.length:0;if(0===s)return null;let a;switch(s){default:case 3:a=n.SIZE.MEDIUM;break;case 2:a=n.SIZE.LARGE;break;case 1:a=n.SIZE.XLARGE}const i=e.map(((e,s)=>(0,l.jsx)(n.default,{animation:t,size:a,emoji:e,selectable:!0},e+s)));return(0,l.jsx)(o.SelectableDiv,{selectable:!0,className:r.default.wrapper,children:i})};var n=i(s(34249)),r=a(s(54777)),o=s(20845),l=s(85893)},97711:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(8139),r=s(67294),o=a(s(17850)),l=a(s(61630)),d=a(s(91952)),u=a(s(55454)),c=a(s(85051)),h=a(s(2408)),f=a(s(16625)),p=a(s(76480)),m=a(s(78039)),_=a(s(29830)),g=a(s(18327)),v=a(s(3165)),S=a(s(79485)),C=s(50313),y=s(85893);class E extends r.PureComponent{constructor(e){super(e),this._getUnsortedVcardDisplayDataMemo=(0,f.default)((({vcardList:e})=>e.map((({displayName:e,parsedVcard:t})=>({displayName:e,wids:(0,C.vcardWids)(t),thumbnail:(0,C.vcardThumbnail)(t)}))))),this._showContactsModal=()=>{const{vcardList:e}=this.props;if(e){const t=e.map((e=>e.parsedVcard));d.default.openModal((0,y.jsx)(_.default,{vcards:t}))}},this.state={loading:!0,sortedVcardData:null,vcardList:e.vcardList}}componentDidMount(){this._loadProfilePics()}static getDerivedStateFromProps(e,t){return t.vcardList!==e.vcardList?{loading:!0,sortedVcardData:null,vcardList:e.vcardList}:null}componentDidUpdate(e){e.vcardList!==this.props.vcardList&&this._loadProfilePics()}_getUnsortedVcardDisplayData(){return this._getUnsortedVcardDisplayDataMemo({vcardList:this.props.vcardList})}_loadProfilePics(){const e=this.props.vcardList,t=this._getUnsortedVcardDisplayData(),s=[].concat(...t.map((({wids:e})=>e))).slice(0,10);Promise.all(s.map((e=>v.default.find(e)))).then((()=>(0,n.delayMs)(0))).then((()=>{var s;this.props.vcardList===e&&this.setState({loading:!1,sortedVcardData:(s=t,[...s].sort(((e,t)=>{const s=T(e),a=T(t);return s&&!a?-1:!s&&a?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})))})}))}_renderProfilePics(e){const t=Math.min(e.length,3),s=[];for(let a=0;a<t;a++){const{wids:t,thumbnail:i}=e[a],n=v.default.findThumbnailWid(t);this.state.loading||!n&&!i?s.push((0,y.jsx)("div",{className:m.default.image,children:(0,y.jsx)(g.default,{size:39,border:!0})},`default-pic-${a}`)):s.push((0,y.jsx)("div",{className:m.default.image,children:(0,y.jsx)(g.default,{wid:n,thumb:i,size:39,border:!0})},`profile-pic-${a}`))}return s}render(){const{msg:e}=this.props,t=this.props.displayAuthor?(0,y.jsx)("div",{className:m.default.author,children:(0,y.jsx)(o.default,{msg:e,contact:e.senderObj})}):null,s=this.state.sortedVcardData||this._getUnsortedVcardDisplayData(),a=s.map((({displayName:e})=>e)),n=(0,C.getNameStringFromNames)(a),r=this._renderProfilePics(s),d=this.props.vcardList||e.chat.isTrusted(),f=this.props.quotedMsg?(0,y.jsx)("div",{className:m.default.quote,children:this.props.quotedMsg}):null,_=(0,i.default)(m.default.bubble,{[m.default.hasAuthor]:t,[m.default.hasQuote]:f,[m.default.isPreview]:this.props.displayType===u.default.DISP_TYPE.MSG_INFO,[m.default.isGallery]:this.props.displayType===u.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===u.default.DISP_TYPE.GALLERY||this.props.displayType===u.default.DISP_TYPE.CONTACT_CARD});return(0,y.jsxs)("div",{className:_,children:[t,f,(0,y.jsxs)("div",{className:m.default.vcard,role:d?"button":null,title:n,onClick:this._showContactsModal,children:[(0,y.jsx)("div",{className:m.default.avatar,children:r}),(0,y.jsx)("div",{className:m.default.body,children:(0,y.jsx)(c.default,{text:n,element:"div",className:m.default.name,dirMismatch:e.rtl!==h.default.isRTL(),direction:e.dir,wbr:15})}),(0,y.jsx)("div",{className:m.default.meta,children:(0,y.jsx)(p.default,{msg:e})})]}),(0,y.jsx)(l.default,{items:[{label:h.default.t(1285),onClick:this._showContactsModal}]})]})}}E.CONCERNS={msg:["rtl","dir","senderObj","isSentByMe","isGroupMsg","chat"]},E.displayName="MultiVcard";var b=(0,S.default)(E,E.CONCERNS);function T(e){return Boolean(v.default.findThumbnailWid(e.wids)||e.thumbnail)}t.default=b},33090:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){var s;let a,m=()=>(0,h.default)();if(e.nativeFlowName===d.default.ORDER_DETAILS){const t=(0,u.getOrderInfo)(e);t&&(a=(0,f.jsx)(c.default,{amount:(0,n.formatAmount)(t.currency,t.totalAmount),quantity:t.quantity,orderId:t.referenceId,text:t.title,className:(0,i.default)(p.header),isSentByMe:e.isSentByMe})),m=(0,h.default)({title:l.default.t(1430),body:l.default.t(1429)})}else a=e.title?(0,f.jsx)(r.default,{text:e.title,selectable:e.isTrusted(),direction:e.dir,dirMismatch:e.rtl!==l.default.isRTL(),inferLinesDirection:!0,xstyle:[p.header,p.headerTitle]}):null;const _=null===(s=e.nativeFlowButtons)||void 0===s?void 0:s.map((e=>{var t,s;return{label:null!==(t=null===(s=e.buttonText)||void 0===s?void 0:s.displayText)&&void 0!==t?t:"",onClick:m}}));return(0,f.jsx)(o.default,{msg:e,displayAuthor:t,header:a,actions:_})};var i=a(s(56720)),n=s(61447),r=a(s(85051)),o=a(s(14666)),l=a(s(2408)),d=a(s(2297)),u=s(54186),c=a(s(64539)),h=a(s(62244)),f=s(85893);const p={header:{marginBottom:"or9x5nie"},headerTitle:{fontSize:"bze30y65",fontWeight:"hnx8ox4h"}}},22953:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(17176)),r=s(73237),o=a(s(84758)),l=a(s(91952)),d=a(s(55454)),u=a(s(17025)),c=a(s(37719)),h=a(s(85051)),f=a(s(21840)),p=a(s(8381)),m=a(s(46014)),_=a(s(60408)),g=a(s(55554)),v=a(s(62478)),S=a(s(2408)),C=a(s(3553)),y=a(s(65838)),E=a(s(20838)),b=a(s(79485)),T=s(15298),M=a(s(2966)),x=a(s(69635)),I=a(s(98532)),P=s(89573),A=s(85893);class N extends i.PureComponent{constructor(...e){super(...e),this._ref=(0,i.createRef)()}handleKeyActivation(){var e;null===(e=this._ref.current)||void 0===e||e.click()}render(){const e=this.props.msg;let t,s,a,i;switch(e.type){case d.default.MSG_TYPE.NOTIFICATION:s=e.body;break;case d.default.MSG_TYPE.GP2:case d.default.MSG_TYPE.GROUP_NOTIFICATION:return(0,A.jsx)(v.default,{msg:e,clickable:!0});case d.default.MSG_TYPE.BROADCAST_NOTIFICATION:return(0,A.jsx)(n.default,{msg:e,clickable:!0});case d.default.MSG_TYPE.E2E_NOTIFICATION:const h=(0,T.unproxy)(e);s=(0,p.default)(h);const D=e.subtype,j=e.body?(0,P.createWid)(e.body):null,R=e.id.remote;i=()=>{!function(e,t,s,a){"e2e_identity_unavailable"!==e&&l.default.openModal((0,A.jsx)(c.default,{e2eSubtype:e,jid:t,chatId:s,msg:a}))}(D,j,R,e)},t=function(e){if("encrypt"===e.subtype&&e.chat.isSupportGroupOrSupportAdmin())return(0,A.jsx)("div",{className:C.default.iconSupportGroup,children:(0,A.jsx)(M.default,{name:"info-filled"})});if("encrypt"===e.subtype||"encrypt_now"===e.subtype)return(0,A.jsx)("div",{className:C.default.iconE2E,children:(0,A.jsx)(M.default,{name:"lock-small"})})}(h);break;case d.default.MSG_TYPE.CALL_LOG:const L="miss_video"===e.subtype||"miss_group_video"===e.subtype;t=(0,A.jsx)("div",{className:C.default.icon,children:L?(0,A.jsx)(M.default,{name:"miss_video",className:C.default.iconMiss}):(0,A.jsx)(M.default,{name:"miss",className:C.default.iconMiss})}),s=(0,f.default)((0,T.unproxy)(e.unsafe()),!0);break;case d.default.MSG_TYPE.NOTIFICATION_TEMPLATE:if("change_number"===e.subtype){const t=e.templateParams[0],a=e.templateParams[1],n=u.default.get(t),o=n&&n.isMyContact?n.formattedName:(0,I.default)(t),l=x.default.equals(e.chat.id,t);s=l?S.default.t(564,{name:o}):S.default.t(562,{name:o}),l&&(i=()=>function(e,t){(0,r.onChangeNumberNotificationClick)(e,t)}(a,t))}else if(s=(0,g.default)((0,T.unproxy)(e.unsafe())),a=(0,_.default)((0,T.unproxy)(e.unsafe())),null!=a){const t=(0,y.default)(e.subtype);i=()=>{(0,E.default)(a,t)}}N=e.type,O=e.subtype,N===d.default.MSG_TYPE.NOTIFICATION_TEMPLATE&&w.has(O)&&(t=(0,A.jsx)("div",{className:C.default.bizInfo,children:(0,A.jsx)(M.default,{name:"info-filled"})}));break;case d.default.MSG_TYPE.PROTOCOL:if("ephemeral_setting"===e.subtype){var b;const t=e.from,a=e.id.remote,n=o.default.gadd(a),r=null!==(b=e.ephemeralDuration)&&void 0!==b?b:0;s=(0,m.default)(r,t,a),i=()=>{!function(e){l.default.ephemeralDrawer(e)}(n)}}}var N,O;const D=(0,A.jsxs)("span",{children:[t,(0,A.jsx)(h.default,{direction:S.default.isRTL()?"rtl":"ltr",text:s})]});return i?(0,A.jsx)("div",{role:"button",ref:this._ref,onClick:i,children:D}):(0,A.jsx)("span",{children:D})}}N.CONCERNS={contact:["id","isEnterprise","isContactBlocked","verifiedLevel","verifiedName"],msg:["id","body","chat","from","type","subtype","templateParams","ephemeralDuration"]},N.displayName="Notification";const O=(0,b.default)(N,N.CONCERNS);t.default=class extends O{handleKeyActivation(){return this.getComponent().handleKeyActivation()}};const w=new Set(["blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_verified","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_verified","blue_msg_self_fb_unverified","blue_msg_self_fb_verified","biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"])},20838:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){const a=(0,u.jsx)(i.default,{href:t,onClick:e=>{e.preventDefault(),n.default.closeModal("none"),setTimeout((()=>(0,o.openExternalLink)(t)),10)},children:null!=s?s:l.default.t(1103)}),c=(0,u.jsxs)(r.default,{onOK:()=>n.default.closeModal(),okText:l.default.t(2085),type:d.ModalTheme.Multiline,children:[e,"",a]});n.default.openModal(c)};var i=a(s(44683)),n=a(s(91952)),r=a(s(75940)),o=s(4919),l=a(s(2408)),d=s(79475),u=s(85893)},51538:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({displayAuthor:e,msg:t}){const s=(0,d.getMaybeMeUser)(),a=t.sender.equals(s),b=(0,i.useContext)(y.default),T=e=>{e&&e.stopPropagation();const{orderId:s,sellerJid:i,token:n}=t;if(null!=s&&null!=i&&null!=n){const e=(0,g.buildProductCatalogContext)(new v.default,(0,o.getMaybeBizPlatformForLogging)(i),p.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ORDER_MESSAGE);(0,c.logOrderMessageClick)({catalogContext:e,catalogOwnerJid:i,orderId:s}),null!=t.orderId&&r.default.openDrawerRight((0,E.jsx)(S.default,{chat:t.chat,orderId:s,token:n,userIsCartOwner:a,sellerJid:i}),"slide-left",b,e)}},M=(0,E.jsx)(l.default,{text:t.message,dirMismatch:t.rtl!==u.default.isRTL(),direction:t.dir,inferLinesDirection:!0}),x=(0,E.jsx)("div",{className:m.default.meta,children:(0,E.jsx)(f.default,{msg:t})}),I=(0,E.jsx)(n.default,{items:[{label:a?u.default.t(1433):u.default.t(1432),a8nKey:"view-cart-button",onClick:T}]});return(0,E.jsxs)(C.default,{msg:t,displayAuthor:e,hideMeta:!0,children:[(0,E.jsx)("div",{className:m.default.orderPreview,children:(0,E.jsx)(_.default,{msg:t.unsafe(),onClick:T})}),(0,E.jsxs)(h.default,{msg:t.unsafe(),"data-id":t.id,className:m.default.messageText,children:[M,x]}),I]})};var i=s(67294),n=a(s(61630)),r=a(s(91952)),o=s(59014),l=a(s(85051)),d=s(86723),u=a(s(2408)),c=s(1236),h=a(s(42120)),f=a(s(76480)),p=a(s(4231)),m=a(s(35404)),_=a(s(96196)),g=s(70790),v=a(s(90277)),S=a(s(62002)),C=a(s(41184)),y=a(s(64029)),E=s(85893)},64539:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({amount:e,className:t,quantity:s,orderId:a,thumbnail:c,text:h,isSentByMe:f}){return(0,u.jsxs)(n.FlexColumn,{className:(0,i.default)(l.default.header,{[l.default.bubbleIn]:!f,[l.default.bubbleOut]:f},t),children:[(0,u.jsx)(d.TextDiv,{color:"secondary",weight:"medium",className:l.default.orderId,size:"10",children:r.default.t(1440,{order:a})}),(0,u.jsx)("div",{className:l.default.hr}),(0,u.jsxs)(n.FlexRow,{align:"center",children:[c?(0,u.jsx)("div",{className:l.default.media,style:{backgroundImage:`url(${(0,o.convertToDataURI)(c)})`}}):null,(0,u.jsxs)("div",{children:[(0,u.jsx)(d.TextParagraph,{size:"15",children:h}),(0,u.jsx)(d.TextParagraph,{size:"12",color:"secondary",children:r.default.t(1427,{quantity:s})})]})]}),(0,u.jsx)("div",{className:l.default.hr}),(0,u.jsxs)(n.FlexRow,{className:l.default.total,justify:"all",children:[(0,u.jsx)(d.TextParagraph,{size:"15",children:r.default.t(1441)}),(0,u.jsx)(d.TextParagraph,{size:"15",weight:"medium",children:e})]})]})};var i=a(s(94184)),n=s(63290),r=a(s(2408)),o=s(41482),l=a(s(99081)),d=s(97504),u=s(85893)},15218:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t}){return(0,d.jsxs)(l.default,{msg:e,displayAuthor:t,children:[(0,d.jsx)("div",{className:r.default.icon,children:(0,d.jsx)(o.default,{name:"unknown"})}),(0,d.jsx)("div",{className:r.default.text,children:(0,d.jsx)(n.default,{msg:e.unsafe(),theme:"placeholder",children:(0,i.default)(e.unsafe())})})]})};var i=a(s(75580)),n=a(s(42120)),r=a(s(33519)),o=a(s(2966)),l=a(s(41184)),d=s(85893)},4731:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.formatAmount1000ToParts)(e.currency,e.amount1000);return(0,o.jsx)("div",{className:(0,i.default)(r.default.container,{[r.default.isQuoted]:e.isQuoted,[r.default.isQuotedInComposeBox]:e.isQuotedInComposeBox}),children:(0,o.jsx)("div",{"data-testid":"payment-amount-thumb",className:(0,i.default)(r.default.thumb,{"bg-payments":!e.isQuoted}),children:(0,o.jsxs)("div",{className:r.default.amount,children:[(0,o.jsx)("span",{className:r.default.amountCurrency,children:t.symbol}),(0,o.jsx)("span",{className:r.default.amountInteger,children:t.integer}),(0,o.jsx)("span",{className:r.default.amountDecimal,children:t.decimal})]})})})};var i=a(s(94184)),n=s(61447),r=a(s(36246)),o=s(85893)},281:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({currency:e,subtype:t,paymentStatus:s,paymentTxnStatus:a,isCompact:u}){const c=(0,n.formatLocalSymbol)(e),h=null!=a?function(e){switch(null!=e?e:l.PaymentInfoTxnStatus.UNKNOWN){case l.PaymentInfoTxnStatus.SUCCESS:case l.PaymentInfoTxnStatus.COMPLETED:return r.default.success;case l.PaymentInfoTxnStatus.FAILED:case l.PaymentInfoTxnStatus.FAILED_RISK:case l.PaymentInfoTxnStatus.FAILED_DA_FINAL:case l.PaymentInfoTxnStatus.REFUNDED_TXN:case l.PaymentInfoTxnStatus.REFUND_FAILED:case l.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case l.PaymentInfoTxnStatus.REFUND_FAILED_DA:case l.PaymentInfoTxnStatus.AUTH_CANCELED:case l.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case l.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case l.PaymentInfoTxnStatus.COLLECT_FAILED:case l.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:return r.default.failed;default:return r.default.pending}}(a):function(e){switch(null!=e?e:l.PaymentInfoStatus.UNKNOWN_STATUS){case l.PaymentInfoStatus.COMPLETE:return r.default.success;case l.PaymentInfoStatus.CANCELLED:case l.PaymentInfoStatus.COULD_NOT_COMPLETE:case l.PaymentInfoStatus.REFUNDED:case l.PaymentInfoStatus.EXPIRED:case l.PaymentInfoStatus.REJECTED:return r.default.failed;default:return r.default.pending}}(s),f="send"===t?(0,d.jsx)(o.default,{name:"payment-send"}):(0,d.jsx)(o.default,{name:"payment-request"});return(0,d.jsxs)("div",{"data-testid":"payment-icon-container",className:(0,i.default)(r.default.icon,h,{[r.default.compact]:u}),children:[(0,d.jsx)("div",{className:(0,i.default)(r.default.iconSymbol,r.default[e]),children:c}),f]})};var i=a(s(94184)),n=s(61447),r=a(s(43809)),o=a(s(2966)),l=s(68719),d=s(85893)},95060:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(4731)),o=a(s(281)),l=a(s(37291)),d=a(s(95486)),u=a(s(23344)),c=a(s(91266)),h=s(68719),f=s(85893);class p extends n.PureComponent{constructor(...e){super(...e),this.state={isMultilineText:!1},this._setRefText=e=>{e&&this.setState({isMultilineText:e.getBoundingClientRect().height>20})}}render(){const{paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:s}=this.props,a=(0,i.default)({[l.default.bubbleOut]:this.props.isSentByMe,[l.default.bubbleIn]:!this.props.isSentByMe}),n=null!=t&&t!==h.PaymentInfoTxnStatus.UNKNOWN||null!=e&&e!==h.PaymentInfoStatus.UNKNOWN_STATUS;let p;if(this.props.hasCaption)p=(0,f.jsxs)("div",{ref:this._setRefText,children:[(0,f.jsx)("div",{children:(0,f.jsx)(u.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})}),(0,f.jsx)(d.default,{paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:s})]});else if(n){var m;p=(0,f.jsxs)("div",{ref:this._setRefText,children:[(0,f.jsx)("div",{children:(0,f.jsx)(u.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})}),(0,f.jsx)(c.default,{msg:null===(m=this.props.msg)||void 0===m?void 0:m.unsafe(),children:(0,f.jsx)(d.default,{paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:s})})]})}else{var _;p=(0,f.jsx)(c.default,{msg:null===(_=this.props.msg)||void 0===_?void 0:_.unsafe(),children:(0,f.jsx)("span",{ref:this._setRefText,children:(0,f.jsx)(u.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})})})}return(0,f.jsxs)("div",{className:a,children:[(0,f.jsx)(r.default,{currency:this.props.currency,amount1000:this.props.amount1000}),(0,f.jsxs)("div",{className:l.default.body,children:[(0,f.jsx)("div",{className:(0,i.default)(l.default.bodyIcon,{[l.default.bodyIconMultiline]:this.state.isMultilineText}),children:(0,f.jsx)(o.default,{currency:this.props.currency,subtype:this.props.subtype,paymentStatus:e,paymentTxnStatus:t})}),(0,f.jsx)("div",{className:l.default.bodyText,children:p})]})]})}}t.default=p,p.displayName="PaymentInfo"},95486:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:s}){let a,n;(function(){const e=(0,d.default)();(0,u.default)(e,1e3,{immediate:!0})})(),({str:a,themeClassName:n}=null!=t?function(e,t){let s=null,a=null;if(null!=e)switch(e){case c.PaymentInfoTxnStatus.UNKNOWN:s=null,a=null;break;case c.PaymentInfoTxnStatus.PENDING_SETUP:s=f(t),a=l.default.pending;break;case c.PaymentInfoTxnStatus.PENDING_RECEIVER_SETUP:case c.PaymentInfoTxnStatus.COLLECT_INIT:s=o.default.t(2113),a=l.default.pending;break;case c.PaymentInfoTxnStatus.INIT:case c.PaymentInfoTxnStatus.FAILED_PROCESSING:case c.PaymentInfoTxnStatus.FAILED_RECEIVER_PROCESSING:case c.PaymentInfoTxnStatus.FAILED_DA:s=o.default.t(2117),a=l.default.pending;break;case c.PaymentInfoTxnStatus.SUCCESS:case c.PaymentInfoTxnStatus.COMPLETED:s=o.default.t(2109),a=l.default.success;break;case c.PaymentInfoTxnStatus.FAILED:case c.PaymentInfoTxnStatus.FAILED_RISK:case c.PaymentInfoTxnStatus.FAILED_DA_FINAL:case c.PaymentInfoTxnStatus.REFUNDED_TXN:case c.PaymentInfoTxnStatus.REFUND_FAILED:case c.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case c.PaymentInfoTxnStatus.REFUND_FAILED_DA:case c.PaymentInfoTxnStatus.AUTH_CANCELED:case c.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case c.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case c.PaymentInfoTxnStatus.COLLECT_FAILED:case c.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:s=o.default.t(2110),a=l.default.failed;break;case c.PaymentInfoTxnStatus.EXPIRED_TXN:case c.PaymentInfoTxnStatus.COLLECT_EXPIRED:s=o.default.t(2111),a=l.default.pending;break;case c.PaymentInfoTxnStatus.COLLECT_SUCCESS:s=f(t),a=l.default.pending;break;case c.PaymentInfoTxnStatus.COLLECT_REJECTED:s=o.default.t(2120),a=l.default.pending;break;case c.PaymentInfoTxnStatus.COLLECT_CANCELED:case c.PaymentInfoTxnStatus.COLLECT_CANCELLING:s=o.default.t(2108),a=l.default.pending;break;case c.PaymentInfoTxnStatus.IN_REVIEW:s=o.default.t(2112),a=l.default.pending}return{str:s,themeClassName:a}}(t,s):function(e,t){let s=null,a=null;if(null!=e)switch(e){case c.PaymentInfoStatus.PROCESSING:s=o.default.t(2117),a=l.default.pending;break;case c.PaymentInfoStatus.COMPLETE:s=o.default.t(2109),a=l.default.success;break;case c.PaymentInfoStatus.SENT:s=o.default.t(2113),a=l.default.pending;break;case c.PaymentInfoStatus.NEED_TO_ACCEPT:s=f(t),a=l.default.pending;break;case c.PaymentInfoStatus.COULD_NOT_COMPLETE:case c.PaymentInfoStatus.REFUNDED:s=o.default.t(2110),a=l.default.failed;break;case c.PaymentInfoStatus.EXPIRED:s=o.default.t(2111),a=l.default.failed;break;case c.PaymentInfoStatus.REJECTED:s=o.default.t(2120),a=l.default.failed;break;case c.PaymentInfoStatus.CANCELLED:s=o.default.t(2108),a=l.default.failed;break;case c.PaymentInfoStatus.WAITING_FOR_PAYER:case c.PaymentInfoStatus.WAITING:s=f(t),a=l.default.pending;break;case c.PaymentInfoStatus.UNKNOWN_STATUS:s=null,a=null}return{str:s,themeClassName:a}}(e,s));if(null==a)return null;return(0,h.jsx)("span",{"data-testid":"payment-status",className:(0,i.default)(l.default.status,n),children:a})};var i=a(s(94184)),n=a(s(30381)),r=a(s(25142)),o=a(s(2408)),l=a(s(70649)),d=a(s(45172)),u=a(s(50589)),c=s(68719),h=s(85893);function f(e){if(null==e)return o.default.t(2113);const t=1e3*r.default.globalUnixTime(),s=1e3*e;if(s-t>6e4){const e=(0,n.default)(t).to((0,n.default)(s));return o.default.t(2115,{timeSpan:e})}return s-t>0?o.default.t(2116):o.default.t(2114)}},23344:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.receiverJid)return null;const t=n.default.get(e.receiverJid),s=(0,c.jsx)("span",{className:d.default.name,children:t?t.isMe?r.default.t(2227):(0,c.jsx)(l.default,{contact:t,showNotifyName:!0}):(0,u.default)(e.receiverJid)});let a;switch(e.subtype){case"send":a=(0,c.jsx)(o.default,{id:2107,params:{receiverName:s}});break;case"request":a=(0,c.jsx)(o.default,{id:2100,params:{receiverName:s}})}return(0,c.jsx)("span",{className:(0,i.default)(d.default.container,{[d.default.isQuoted]:e.isQuoted}),children:a})};var i=a(s(94184)),n=a(s(17025)),r=a(s(2408)),o=a(s(663)),l=a(s(78972)),d=a(s(17468)),u=a(s(98532)),c=s(85893)},2804:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{displayAuthor:t,displayType:s,quotedMsg:a}=e,c=(0,d.default)(e.msg,["paymentAmount1000","paymentCurrency","id","isSentByMe","paymentNoteMsg","paymentStatus","paymentTxnStatus","paymentExpiryTimestamp","paymentMessageReceiverJid","subtype"]);if(!i.default.supportsFeature(i.default.F.PAYMENTS))return(0,u.jsx)(o.default,{msg:c,displayAuthor:t,displayType:s,quotedMsg:a});{const e=!(!c.paymentNoteMsg||!c.paymentNoteMsg.body);if(!(c.paymentAmount1000&&c.paymentCurrency))return(0,u.jsx)(o.default,{msg:c,displayAuthor:t,displayType:s,quotedMsg:a});const i=(0,u.jsx)(r.default,{isSentByMe:c.isSentByMe,currency:c.paymentCurrency,amount1000:c.paymentAmount1000,receiverJid:c.paymentMessageReceiverJid,paymentStatus:c.paymentStatus,paymentTxnStatus:c.paymentTxnStatus,expiryTimestamp:c.paymentExpiryTimestamp,subtype:c.subtype,hasCaption:e,msg:c});switch(c.subtype){case"ciphertext":return(0,u.jsx)(o.default,{msg:c,displayAuthor:t,displayType:s,quotedMsg:a,paymentInfo:i,placeholderText:n.default.t(2097)});case"futureproof":return(0,u.jsx)(o.default,{msg:c,displayAuthor:t,displayType:s,quotedMsg:a,paymentInfo:i,placeholderText:n.default.t(2099)});case"send":case"request":return(0,u.jsx)(l.default,{msg:c,displayAuthor:t,displayType:s,quotedMsg:a,paymentInfo:i});default:return(0,u.jsx)(o.default,{msg:c,displayAuthor:t,displayType:s,quotedMsg:a})}}};a(s(55454));var i=a(s(12950)),n=a(s(2408)),r=a(s(95060)),o=a(s(94525)),l=a(s(92529)),d=a(s(76006)),u=s(85893)},94525:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const s=(0,f.default)(e.msg,["rtl","dir","isSentByMe","isGroupMsg","isPSA","senderObj","paymentNoteMsg"]);let a;const m=null===(t=s.paymentNoteMsg)||void 0===t?void 0:t.body;if(m){const e=(0,n.Conversation)({mentions:s.mentionMap(),links:s.getLinks(),trusted:s.isTrusted()});a=(0,p.jsx)(l.default,{msg:s.unsafe(),children:(0,p.jsx)(r.default,{text:m,selectable:!0,formatters:e,dirMismatch:s.rtl!==o.default.isRTL(),direction:s.dir})})}let _,g;if(e.quotedMsg){const t=(0,i.default)(c.default.quote,{[c.default.hasAuthor]:e.displayAuthor,[c.default.forwarded]:(0,u.showForwarded)(s)});_=(0,p.jsx)("div",{className:t,children:e.quotedMsg})}let v=o.default.t(2098);e.placeholderText&&(g="ciphertext",v=e.placeholderText);const S=(0,i.default)({[c.default.hasText]:a,[c.default.noText]:!a});return(0,p.jsxs)(h.default,{msg:s,displayAuthor:e.displayAuthor,children:[_,e.paymentInfo,(0,p.jsx)("div",{className:S,children:(0,p.jsx)(d.default,{hasCaption:!!a,iconName:g,msg:s.unsafe(),children:v})}),a]})};var i=a(s(94184)),n=s(68551),r=(a(s(55454)),a(s(85051))),o=a(s(2408)),l=a(s(42120)),d=a(s(25606)),u=s(17223),c=a(s(83662)),h=a(s(41184)),f=a(s(76006)),p=s(85893)},64863:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=i(s(76610)),l=i(s(17850)),d=i(s(41340)),u=i(s(74574)),c=i(s(91952)),h=i(s(55454)),f=s(71920),p=i(s(32646)),m=i(s(89513)),_=s(92310),g=i(s(32666)),v=a(s(15377)),S=s(90672),C=i(s(80747)),y=i(s(76480)),E=i(s(4231)),b=s(17223),T=i(s(41536)),M=s(15298),x=i(s(73502)),I=i(s(32473)),P=s(49002),A=i(s(76006)),N=s(85893);function O(e){e.stopPropagation()}function w(e,t){var s;const{contentContainerClassName:a,captionComponent:i,thumbClassName:w,onThumbClick:D,theme:j,overlayContent:R,displayType:L,displayAuthor:k,isMsgVisible:F,albumMsgs:B,zoomMsg:G}=e,U=(0,r.useRef)(null),V=(0,A.default)(e.msg,["ack","caption","dir","footer","isFromTemplate","id","isFailed","isGroupMsg","isPSA","isSentByMe","rtl","senderObj","type","supportsMessageFooter","text"]),H=(0,A.default)(e.mediaData,["aspectRatio","preview","mediaStage","fullWidth","fullHeight","size","progressiveStage"]),W=()=>V.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:E.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1});(0,r.useEffect)((()=>{W()}),[]);const Y=()=>{c.default.openModal((0,N.jsx)(g.default,{msg:V.unsafe()}))},K=e=>{if(!F)return null;const t=F(e);return t?t.getImgNode&&t.getImgNode():null},q=()=>{V.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:E.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},z=()=>{V.cancelDownload()},$=()=>{V.cancelUpload()},Q=()=>{V.resumeUpload()},X=()=>{V.resumeRemoteUpload()},Z=()=>V.type===h.default.MSG_TYPE.IMAGE&&V.caption?V.caption:void 0,J=(e,t=!1,s,a)=>{const{fullHeight:i,fullWidth:r}=H,o=(0,n.default)(T.default.thumbBody,{[T.default.thumbBodyLores]:t}),l=(0,f.getImgStyle)(r||s,i||a,s,a);return(0,N.jsx)("img",{alt:Z(),src:e,className:o,style:l,ref:U})},ee=()=>U.current;(0,r.useImperativeHandle)(t,(()=>({getImgNode:ee})));const te=e=>{if(e&&e.stopPropagation(),j===_.DisplayTheme.Album){const e=new Set((B||[]).map((e=>e.id.toString())));c.default.mediaViewerModal({msg:(0,M.unproxy)((G||V).unsafe()),getZoomNode:K,highlightedMsgIds:e})}else c.default.mediaViewerModal({msg:(0,M.unproxy)(V.unsafe()),getZoomNode:K})},se=Z(),ae=se?null:(0,N.jsx)(I.default,{}),ie=se?(0,N.jsx)("div",{className:T.default.caption,children:(0,N.jsx)(u.default,{msg:V.unsafe(),trusted:e.trusted,spacer:!(V.supportsMessageFooter&&V.footer)})}):null;let ne=null,re=null;if(null!=R)re=D||te;else{const{mediaStage:e,progressiveStage:t}=H;switch(e){case S.MEDIA_DATA_STAGE.RESOLVED:case S.MEDIA_DATA_STAGE.PROGRESSIVE_READY:re=D||te;break;case S.MEDIA_DATA_STAGE.FETCHING:ne=(0,N.jsx)(v.Pending,{cancelable:!0}),re=z;break;case S.MEDIA_DATA_STAGE.NEED_POKE:ne=(0,N.jsx)(v.Download,{filesize:H.size}),re=q;break;case S.MEDIA_DATA_STAGE.UPLOADING:case S.MEDIA_DATA_STAGE.REUPLOADING:ne=(0,N.jsx)(v.Pending,{cancelable:!0}),re=$;break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:ne=(0,N.jsx)(v.Upload,{filesize:H.size}),re=Q;break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:ne=(0,N.jsx)(v.Upload,{filesize:H.size}),re=X;break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:re=D||Y;break;case S.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:ne=(0,N.jsx)(v.Download,{filesize:H.size}),re=D||te;break;case S.MEDIA_DATA_STAGE.SENDING:V.isFailed||(ne=(0,N.jsx)(v.Pending,{}));break;case S.MEDIA_DATA_STAGE.DECRYPTING:null==t&&(ne=(0,N.jsx)(v.Pending,{cancelable:!0}));break;case S.MEDIA_DATA_STAGE.INIT:case S.MEDIA_DATA_STAGE.EXISTS:break;case S.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case S.MEDIA_DATA_STAGE.PREPARING:case S.MEDIA_DATA_STAGE.REMOTE_UPLOADING:ne=(0,N.jsx)(v.Pending,{})}}const oe=(0,b.showForwarded)(V)&&e.theme!==_.DisplayTheme.Album,le=(0,P.numCodepoints)(null!==(s=V.text)&&void 0!==s?s:"")>h.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:de,bubbleHeight:ue}=(0,f.getBubbleDimension)(V.type,V.isFromTemplate,H.aspectRatio,j,L,le),ce=(0,n.default)(T.default.bubble,{[T.default.isAlbum]:j===_.DisplayTheme.Album,[T.default.portrait]:de<ue&&(0,f.canUseCustomCropping)(V.type,j,L)}),he=(0,n.default)(ce,{[T.default.hasCaption]:se,[T.default.hasAuthor]:k,[T.default.forwarded]:oe,[T.default.isPSA]:V.isPSA,[T.default.isPreview]:e.displayType===h.default.DISP_TYPE.MSG_INFO||e.displayType===h.default.DISP_TYPE.STARRED_MSGS,[T.default.isGallery]:e.displayType===h.default.DISP_TYPE.GALLERY}),fe=k?(0,N.jsx)("div",{className:T.default.author,children:(0,N.jsx)(l.default,{msg:V,contact:V.senderObj})}):null,pe=oe?(0,N.jsx)(m.default,{msg:V.unsafe(),className:T.default.forwardedIndicator}):null,me=e.quotedMsg?(0,N.jsx)("div",{className:T.default.quote,children:e.quotedMsg}):null,_e=(0,n.default)(T.default.thumb,{[T.default.overlay]:R});let ge;null==R&&(ge=(0,N.jsx)("div",{className:T.default.meta,children:(0,N.jsx)(y.default,{msg:V})}));let ve=(0,N.jsxs)("div",{className:a,children:[fe,pe,me,(0,N.jsx)(p.default,{msg:V.unsafe(),wrapperClass:T.default.ctwaContext}),(0,N.jsxs)("div",{role:"button","data-a8n":o.default.key("image-thumb"),className:w||_e,onClick:re,style:{width:de,height:ue},children:[ne,(0,N.jsx)(C.default,{mediaData:H,placeholderRenderer:()=>((e,t)=>J(H.preview&&H.preview.url(),!0,e,t))(de,ue),downloadMedia:W,renderProgressively:!0,children:(e,t)=>J(e,t,de,ue)}),ae]}),i||ie,(0,N.jsx)(x.default,{dir:V.dir,footer:V.footer,isShown:V.supportsMessageFooter,msg:V.unsafe(),rtl:V.rtl,trusted:e.trusted,type:V.type}),ge]});return ie?(0,N.jsx)(d.default,{contact:V.senderObj,msg:V.unsafe(),className:he,onClick:O,children:ve}):(null!=R&&(ve=(0,N.jsxs)("div",{className:T.default.overlayAlbumText,children:[ve,R]})),(0,N.jsx)("div",{className:he,onClick:O,children:ve}))}var D=(0,r.forwardRef)(w);t.default=D},68835:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{playbackRate:t,onClick:s}=e,a=()=>{o.default.delayClearPlaybackRateControl(),s()};return(0,l.jsx)("div",{role:"button","aria-hidden":!0,className:r.default.wrapper,tabIndex:"0",onClick:a,onKeyPress:e=>{e.key!==d.ENTER&&e.key!==d.SPACE||(e.preventDefault(),e.stopPropagation(),a())},children:(0,l.jsx)("div",{className:r.default.badge,children:u(t)})})};var i=a(s(36251)),n=a(s(2408)),r=a(s(37335)),o=a(s(59594)),l=s(85893);const{KEYBOARD_EVENT_KEY_VALUE:d}=i.default;function u(e){switch(e){case 1:return n.default.t(274);case 1.5:return n.default.t(273);case 2:return n.default.t(275)}}},76866:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(17850)),o=a(s(60028)),l=a(s(91952)),d=s(68551),u=a(s(55454)),c=s(59014),h=a(s(85051)),f=a(s(62602)),p=a(s(52087)),m=a(s(2408)),_=s(30333),g=a(s(4231)),v=a(s(64863)),S=a(s(73819)),C=s(70790),y=a(s(90277)),E=a(s(62002)),b=a(s(22986)),T=a(s(91266)),M=a(s(79485)),x=s(15298),I=s(89573),P=s(85893);class A extends n.Component{constructor(...e){super(...e),this.ProductCatalogSession=new y.default,this._launchProductView=e=>{e&&e.stopPropagation();const{msg:t,onProductClick:s}=this.props;if(!t)return;const{productId:a,businessOwnerJid:i}=t;if(!a||!i)return;const n=(0,f.default)({productId:a,businessOwnerJid:i,msgT:t.t});if(!n)return;const r=(0,C.buildProductCatalogContext)(this.ProductCatalogSession,(0,c.getMaybeBizPlatformForLogging)(i),g.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE);(0,_.logProductMsgClick)({product:(0,x.unproxy)(n),catalogContext:r});const o=this.ProductCatalogSession.toString();s?s(n,o):l.default.openDrawerRight((0,P.jsx)(E.default,{refreshCarousel:!0,chat:t.chat,product:n}),"slide-left",this.props.uim,r)}}componentDidMount(){const{msg:e}=this.props;e.businessOwnerJid&&(0,I.createWid)(e.businessOwnerJid)&&o.default.addMsgAsProduct((0,x.unproxy)(e.unsafe()))}_renderProductInfo(){const{msg:e,trusted:t}=this.props,{title:s,description:a,currencyCode:i,priceAmount1000:n,salePriceAmount1000:r}=e,o=(0,d.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:!0,trusted:!0===t});let l;null!=n&&i?l=(0,P.jsx)(b.default,{product:{currency:i,priceAmount1000:n,salePriceAmount1000:r},direction:"inherit",selectable:!0}):a&&(l=(0,P.jsx)(h.default,{direction:"inherit",selectable:!0,text:a,formatters:o,textLimit:u.default.MAX_PRODUCT_SUBTITLE_LENGTH}));const c=(0,P.jsx)(h.default,{direction:"inherit",selectable:!0,text:s,formatters:o,ellipsify:!0,className:S.default.title}),f=l?(0,P.jsx)(T.default,{msg:e.unsafe(),className:S.default.subtitle,children:l}):null;return(0,P.jsxs)("div",{className:S.default.productInfo,onClick:this._launchProductView,children:[c,f]})}render(){const{displayAuthor:e,msg:t,mediaData:s,trusted:a,quotedMsg:n}=this.props,o=e?(0,P.jsx)("div",{className:S.default.author,children:(0,P.jsx)(r.default,{msg:t,contact:t.senderObj})}):null,l=(0,P.jsx)(v.default,{msg:t,mediaData:s,trusted:a,displayAuthor:!1,contentContainerClassName:S.default.productContainer,captionComponent:this._renderProductInfo(),thumbClassName:S.default.thumb,onThumbClick:this._launchProductView,quotedMsg:n}),d=(0,P.jsx)(h.default,{className:S.default.productCta,onClick:this._launchProductView,text:m.default.t(1488)});return(0,P.jsxs)("div",{className:(0,i.default)(S.default.bubble,{[S.default.bubbleIn]:!t.isSentByMe,[S.default.bubbleOut]:t.isSentByMe}),children:[o,l,d]})}}A.CONCERNS={msg:["businessOwnerJid","chat","chat","currencyCode","description","dir","id","isGroupMsg","asProductInquiry","isSentByMe","mediaData","priceAmount1000","productId","productImageCount","retailerId","rtl","salePriceAmount1000","senderObj","t","title","url"]},A.displayName="Product";var N=(0,p.default)((0,M.default)(A,A.CONCERNS));t.default=N},18327:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(8139),o=s(67294),l=a(s(88419)),d=s(63290),u=i(s(71681)),c=i(s(88137)),h=i(s(3165)),f=i(s(2966)),p=s(85893);class m extends o.PureComponent{constructor(e){super(e),this.promise=null,this._clearPromise=()=>{this.promise=null},this._handleImageChange=(e={})=>{this.setState({img:e.img})},this.state={img:null}}componentDidMount(){const e=this.props.wid;e&&(this.promise=h.default.find(e).then((e=>(0,r.delayMs)(0,e))).then((e=>{this.props.listeners.add(e,"change:img",this._handleImageChange),this._handleImageChange(e)})).catch((()=>{})).finally(this._clearPromise))}componentWillUnmount(){this.promise&&this.promise.cancel()}render(){const{theme:e}=this.props;if(this.state.img&&this.props.wid)return(0,p.jsx)(l.default,{id:this.props.wid,quoted:this.props.quoted,size:this.props.size,square:this.props.square,border:this.props.border});let t;t="number"==typeof this.props.size&&0!==this.props.size||"number"!=typeof this.props.size&&null!=this.props.size?this.props.size:l.DETAIL_IMAGE_SIZE.SMALL;const s=(0,l.getSize)(t)||void 0,a=this.props.thumbs?this.props.thumbs:[this.props.thumb],i=a.map(((e,t)=>{if(e)return(0,p.jsx)("img",{className:c.default.image,src:e,alt:""},t);{const e=s&&s/(a.length>2&&t>0?2:1);return(0,p.jsx)(d.FlexRow,{className:c.default.default,justify:"center",align:"center",children:(0,p.jsx)(f.default,{name:this.props.quoted?"default-user-square":"default-user",style:{width:e,height:e},className:c.default.icon})},t)}}));let r;return r=1===i.length?i[0]:2===i.length?(0,p.jsxs)(d.FlexRow,{className:c.default.row,justify:"stretch",align:"stretch",children:[i[0],i[1]]}):(0,p.jsxs)(d.FlexRow,{className:c.default.row,justify:"stretch",align:"stretch",children:[i[0],(0,p.jsxs)(d.FlexColumn,{className:c.default.col,justify:"stretch",align:"stretch",children:[i[1],i[2]]})]}),(0,p.jsx)(d.FlexRow,{className:(0,n.default)(c.default.container,{[c.default.square]:this.props.square,[c.default.hasBorder]:this.props.border,[c.default.hasInnerBorder]:"voip"===e||"voip-dimmed"===e,[c.default.hasLargeInnerBorder]:"voip-large"===e||"voip-large-dimmed"===e,[c.default.dimmed]:"voip-dimmed"===e||"voip-large-dimmed"===e}),style:{width:s,height:s},children:r})}}m.displayName="ProfileImage";var _=(0,u.default)(m);t.default=_},38732:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(45660)),o=a(s(89906)),l=i(s(17850)),d=i(s(91952)),u=i(s(55454)),c=i(s(88419)),h=s(64850),f=i(s(32666)),p=s(90672),m=i(s(4231)),_=i(s(14103)),g=i(s(79485)),v=i(s(2966)),S=s(85893);class C extends n.PureComponent{constructor(e){super(e),this._refAudioPlayer=(0,n.createRef)(),this.showMediaMissing=()=>{d.default.openModal((0,S.jsx)(f.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{const{msg:t}=this.props;e&&(0,h.canMarkPlayed)(t.unsafe())&&(0,h.markPlayed)(t.unsafe()),this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}handleKeyActivation(e){var t;null===(t=this._refAudioPlayer.current)||void 0===t||t.handleKeyActivation(e)}render(){const{msg:e,mediaData:t}=this.props,s=e.ack===u.default.ACK.PLAYED,a=(0,S.jsx)(_.default,{played:s,isSentByMe:e.isSentByMe});let i;const n=this.state.playing?this.state.currentTime:t.duration;switch(t.mediaStage){case p.MEDIA_DATA_STAGE.RESOLVED:i=(0,S.jsx)(o.default,{ref:this._refAudioPlayer,mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,autoPlay:this.state.autoPlay,duration:n,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:e.isSentByMe,playing:this.state.playing,played:s,displayType:this.props.displayType,getSequentialMsg:this.props.getSequentialMsg,currMsgId:e.id,isPtt:!0});break;case p.MEDIA_DATA_STAGE.NEED_POKE:i=(0,S.jsx)(o.AudioPlayerFrame,{icon:(0,S.jsx)(v.default,{name:"audio-download"}),outgoingMsg:e.isSentByMe,action:this._forceDownloadMedia});break;case p.MEDIA_DATA_STAGE.NEED_UPLOAD:i=(0,S.jsx)(o.AudioPlayerFrame,{icon:(0,S.jsx)(v.default,{name:"audio-upload"}),outgoingMsg:e.isSentByMe,action:this.resumeUpload});break;case p.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:i=(0,S.jsx)(o.AudioPlayerFrame,{icon:(0,S.jsx)(v.default,{name:"audio-upload"}),outgoingMsg:e.isSentByMe,action:this.resumeRemoteUpload});break;case p.MEDIA_DATA_STAGE.ERROR_MISSING:i=(0,S.jsx)(o.AudioPlayerFrame,{icon:(0,S.jsx)(v.default,{name:"audio-play",directional:!0}),outgoingMsg:e.isSentByMe,action:this.showMediaMissing});break;case p.MEDIA_DATA_STAGE.UPLOADING:case p.MEDIA_DATA_STAGE.SENDING:const a=t.mediaStage===p.MEDIA_DATA_STAGE.UPLOADING;i=(0,S.jsx)(o.AudioPlayerFrame,{action:a?this.cancelUpload:void 0,canCancel:a,fileSize:t.size,outgoingMsg:e.isSentByMe,spinner:!0});break;default:i=(0,S.jsx)(o.AudioPlayerFrame,{spinner:!0,outgoingMsg:e.isSentByMe})}const d=this.props.displayAuthor?(0,S.jsx)(l.default,{msg:e,contact:e.senderObj}):null,h=(0,S.jsx)(c.default,{id:e.senderObj.id,size:55});return(0,S.jsx)(r.default,{msg:e,quotedMsg:this.props.quotedMsg,author:d,status:a,player:i,avatar:h,displayType:this.props.displayType})}}C.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj","id"],mediaData:["duration","type","mediaStage","renderableUrl","size","waveform"]},C.displayName="Ptt";const y=(0,g.default)(C,C.CONCERNS);t.default=class extends y{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}},85607:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.playMidPttTone=function(){n.play()},t.playEndPttTone=function(){r.play()};var i=a(s(55454));const n=new window.Audio(i.default.PTT_MIDDLE_TONE_PATH),r=new window.Audio(i.default.PTT_END_TONE_PATH)},14103:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(l.icon,function({played:e,isSentByMe:t}){return e?l.blue:t?l.gray:l.green}(e),{[l.outgoing]:e.isSentByMe,[l.incoming]:!e.isSentByMe});return(0,o.jsx)("div",{className:n.default.wrapper,children:(0,o.jsx)("div",{className:t,children:(0,o.jsx)(r.default,{name:"ptt-status"})})})};var i=a(s(94184)),n=a(s(24378)),r=a(s(2966)),o=s(85893);const l={incoming:n.default.incoming,outgoing:n.default.outgoing,green:n.default.green,blue:n.default.blue,gray:n.default.gray,icon:n.default.icon}},31847:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,theme:s}=e,{type:a,productListHeaderImage:i}=(0,p.default)(t,["type","productListHeaderImage"]);if(t.isViewOnce)return null;function o(){return["conversation","starred","msgInfo"].includes(e.theme)?58:79}let P;switch(t.type){case v:case S:case y:case T:const e=(0,l.isMediaTypeWithImage)(a),{preview:n,fullPreviewData:p}=t.mediaData;(e||null!=n||null!=p)&&(P=(0,_.jsx)(l.default,{mediaData:t.mediaData}));break;case C:t.body&&(P=(0,_.jsx)("div",{"data-testid":"msgImage",style:{backgroundImage:`url(data:image/jpeg;base64,${t.body})`},className:f.default.image}));break;case g:t.thumbnail&&(P=(0,_.jsx)("div",{"data-testid":"msgImage",style:{backgroundImage:`url("data:image/jpeg;base64,${t.thumbnail}")`},className:f.default.image}));break;case E:P=(0,_.jsx)(c.default,{wid:h.default.getThumbnailWidFromVcard(t.vcard),thumb:(0,m.vcardThumbnail)(t.vcard),quoted:!0,square:!0,size:o()});break;case b:P=(0,_.jsx)(c.default,{size:o(),square:!0,quoted:!0});break;case M:(0,r.isNonZeroNumber)(t.paymentAmount1000)&&t.paymentCurrency&&(P=(0,_.jsx)(u.default,{currency:t.paymentCurrency,amount1000:t.paymentAmount1000,isQuoted:!0,isQuotedInComposeBox:"composeBox"===s}));break;case x:t.thumbnail&&(P=(0,_.jsx)("div",{className:f.default.image,style:{backgroundImage:`url("data:image/jpeg;base64,${t.thumbnail}")`}}));break;case I:i&&(P=(0,_.jsx)("div",{className:f.default.image,style:{backgroundImage:`url("${(0,d.convertToDataURI)(i)}")`}}))}const A=(0,n.default)(f.default.imageWrapper,{[f.default.composeBox]:"composeBox"===s,[f.default.statusV3]:"statusV3"===s,[f.default.isPayment]:t.type===M});return P?(0,_.jsx)("div",{className:A,children:(0,_.jsx)("div",{className:f.default.msgImage,children:P})}):null};var n=i(s(94184)),r=s(71730),o=i(s(55454)),l=a(s(17302)),d=s(41482),u=i(s(4731)),c=i(s(18327)),h=i(s(3165)),f=i(s(97900)),p=i(s(76006)),m=s(50313),_=s(85893);const{CHAT:g,IMAGE:v,VIDEO:S,LOCATION:C,DOCUMENT:y,VCARD:E,MULTI_VCARD:b,PRODUCT:T,PAYMENT:M,ORDER:x,LIST:I}=o.default.MSG_TYPE},199:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(8139),o=s(55084),l=s(67294),d=i(s(76610)),u=i(s(17850)),c=i(s(60028)),h=i(s(91952)),f=i(s(55454)),p=s(59014),m=s(54647),_=s(86723),g=i(s(52087)),v=i(s(2408)),S=s(30333),C=i(s(4231)),y=i(s(45472)),E=s(70790),b=i(s(90277)),T=i(s(62002)),M=i(s(31847)),x=i(s(16679)),I=i(s(9626)),P=s(15298),A=i(s(83125)),N=a(s(49201)),O=i(s(69635)),w=s(89573),D=s(85893);class j extends l.PureComponent{constructor(...e){super(...e),this.ProductCatalogSession=new b.default,this.state={hover:!1},this.onClick=()=>{const{rootMsg:e,msg:t}=this.props;if(t.isStatusV3)return void(e&&e.isQuotedMsgAvailable?A.default.find(t.sender).then((a=>{const i=s(3500).default;h.default.openModalMedia((0,D.jsx)(i,{removeTopDrawer:!1,statusV3:a,msgKey:t.id,onMsgNotFound:()=>{e&&(e.isQuotedMsgAvailable=!1)}}),{transition:"quoted-status-v3-modal"})})):h.default.openToast((0,D.jsx)(N.default,{msg:v.default.t(1647),id:(0,N.genId)()})));if(null!=t.asProductInquiry)return this._onProductInquiry(t.asProductInquiry);if(e&&!e.isQuotedMsgAvailable)return void h.default.openToast((0,D.jsx)(N.default,{msg:v.default.t(1249),id:(0,N.genId)()}));const a=t.id,i=t.chat,n=y.default.get(a),l=i.getSearchContext(n||a,null==e?void 0:e.unsafe());l&&(l.slideToMsg=!0),h.default.openChatAt(i,l).then((e=>{if(!e)return;const s=y.default.get(t.id);s&&(0,r.delayMs)(500).then((()=>{h.default.openMediaViewerForAlbumMedia((0,P.unproxy)(s))}))})),n||l.collection.loadAroundPromise.catch((0,o.filteredCatch)(m.E404,(()=>{const t=null==e?void 0:e.unsafe(),s=null==t?void 0:t.chat;null!=t&&null!=s&&h.default.openChatAt(s,s.getSearchContext(t))})))},this.onMouseOver=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseEnter=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})}}componentDidMount(){const{msg:e,t}=this.props,s=e.asProductInquiry;if(null==s)return;s.businessOwnerJid&&(0,w.createWid)(s.businessOwnerJid)&&(null!=t&&(s.t=t),c.default.addMsgAsProduct((0,P.unproxy)(s.unsafe())))}_onProductInquiry(e){const{t}=this.props,s=e.businessOwnerJid&&(0,w.createWid)(e.businessOwnerJid);if(!s)return;const a=c.default.get(s);if(!a)return;const i=e.productId&&a.productCollection.get(e.productId),n=e.productId&&a.msgProductCollection.get(e.productId);if(!i&&!n)return;let r=n;if(i&&null!=t&&i.t>=t&&(r=i,n&&a.productCollection.remove(n)),!r)return;const o=(0,E.buildProductCatalogContext)(this.ProductCatalogSession,(0,p.getMaybeBizPlatformForLogging)(e.businessOwnerJid),C.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE);return(0,S.logProductInquiryClick)({product:(0,P.unproxy)(r),catalogContext:o}),h.default.openDrawerRight((0,D.jsx)(T.default,{product:r,chat:e.chat,refreshCarousel:!0}),"slide-left",this.props.uim,o)}hoverable(){return!this.state.hover&&!!this.props.rootMsg}render(){const{msg:e,displayType:t,chat:s,rootMsg:a,composeQuotedMsgRemoteJid:i}=this.props,r=s.assignedColor(e.sender),o=[f.default.DISP_TYPE.CONVERSATION,f.default.DISP_TYPE.STARRED_MSGS].includes(t),l=i||(null==a?void 0:a.quotedRemoteJid),c=o?"button":null,h=(0,D.jsx)(u.default,{msg:e,contact:e.senderObj,role:c,chat:s,displaySelf:O.default.equals(e.sender,(0,_.getMaybeMeUser)()),quotedRemoteJid:l,disableClick:!0}),p=(0,n.default)(x.default.quotedMsg,{[x.default.statusV3QuotedMsg]:"statusV3"===this.props.theme,[x.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme,[x.default.hover]:this.state.hover}),m=(0,D.jsxs)("div",{className:x.default.msgText,children:[h,(0,D.jsx)(I.default,{msg:e,theme:this.props.theme})]}),g=t===f.default.DISP_TYPE.STARRED_MSGS?"starred":this.props.theme;return(0,D.jsx)("div",{"data-a8n":d.default.key("quotted-message"),className:x.default.container,onMouseOver:o?this.onMouseOver:null,onMouseEnter:o?this.onMouseEnter:null,onMouseLeave:o?this.onMouseLeave:null,children:(0,D.jsxs)("div",{className:p,role:c,onClick:o?this.onClick:null,children:[(0,D.jsx)("span",{className:(0,n.default)(`bg-color-${r}`,x.default.colorBar)}),(0,D.jsx)("div",{className:x.default.msgBody,dir:o?null:e.dir,children:m}),(0,D.jsx)(M.default,{msg:e.unsafe(),theme:g})]})})}}j.displayName="QuotedMsg";var R=(0,g.default)(j);t.default=R},9626:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(8139),o=s(55084),l=s(71730),d=s(67294),u=i(s(25142)),c=i(s(55454)),h=i(s(85051)),f=a(s(13540)),p=i(s(75580)),m=s(49895),_=i(s(2408)),g=i(s(71681)),v=i(s(4231)),S=i(s(8163)),C=s(96196),y=i(s(23344)),E=i(s(40630)),b=i(s(33595)),T=s(6757),M=i(s(65565)),x=i(s(63348)),I=s(85893);const{CHAT:P,IMAGE:A,VIDEO:N,AUDIO:O,STICKER:w,PAYMENT:D,ORDER:j}=c.default.MSG_TYPE;class R extends d.PureComponent{constructor(...e){super(...e),this._handleDownloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}componentDidMount(){const{listeners:e,msg:t}=this.props;t.type===w&&t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===c.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.size<=1024*M.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}).checkpoint(this.props.rejectOnUnmount()).then((()=>(0,r.delayMs)(0))).catch((0,o.filteredCatch)(f.Unmount,(()=>{}))),t.type===c.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){const{msg:e,theme:t}=this.props,s=[];e.hasSymbol()&&e.type!==w&&e.type!==j&&s.push((0,I.jsx)(S.default,{msg:e.unsafe(),viewOnceStatic:!0},"msg-symbol")),(e.type!==N||e.isGif||e.caption||e.isViewOnce)&&e.type!==O||s.push(u.default.durationStr(Number(e.duration))+" ");const a=m.Configuration.QuotedMention({mentions:e.mentionMap()});if(e.type===P||e.type===A||e.type===N||e.isFromTemplate||e.isDynamicReplyButtonsMsg){var i;let t;t=(null===(i=e.asViewOnce)||void 0===i?void 0:i.isViewOnce)?e.type===A?_.default.t(1787):_.default.t(1794):e.isFromTemplate&&e.type===c.default.MSG_TYPE.CHAT&&e.title?"*"+e.title+"*\n"+e.body:(0,p.default)(e.unsafe(),!1),s.push((0,I.jsx)(h.default,{formatters:a,className:"quoted-mention",text:t,textLimit:e.initialPageSize,direction:"auto"},"status"))}else if(w===e.type){const t="composeBox"===this.props.theme?"composeBoxQuoted":"quoted";s.push((0,I.jsx)(x.default,{mediaData:e.mediaData,theme:t,downloadMedia:this._handleDownloadMedia},"sticker"))}else e.type===D?(0,l.isNonZeroNumber)(e.paymentAmount1000)&&e.paymentCurrency?s.push((0,I.jsx)(y.default,{subtype:e.subtype,receiverJid:e.paymentMessageReceiverJid,isQuoted:!0},"payment")):s.push(_.default.t(2098)):e.type===j?s.push((0,I.jsx)(C.OrderDescription,{msg:e.unsafe(),showMessage:!0},"order")):s.push((0,I.jsx)(h.default,{formatters:a,className:"quoted-mention",text:(0,T.formatQuotedMsg)(e),textLimit:e.initialPageSize,direction:"auto"},"status"));const r=(0,n.default)(b.default.messageText,{[b.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme}),o="conversation"===t||"starred"===t?"button":null;return(0,I.jsx)("div",{className:r,dir:e.dir,role:o,children:s})}}R.displayName="QuotedMsgContent";var L=(0,E.default)((0,g.default)(R));t.default=L},6757:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatQuotedMsg=function(e){const{MSG_TYPE:t}=r.default;switch(e.type){case t.DOCUMENT:return e.isVcardOverMmsDocument?h(e):(0,l.default)(e.unsafe());case t.MULTI_VCARD:return c(e);case t.PRODUCT:return f(e);default:return(0,l.default)(e.unsafe())}},t.formatMultiVcardText=c,t.formatVcardOverMmsText=h,t.formatProductText=f;var n=i(s(39138)),r=i(s(55454)),o=a(s(61447)),l=i(s(75580)),d=i(s(2408)),u=s(50313);function c(e){const t=e.vcardList.length;return t>0?d.default.t(1283,{count:t,_plural:t}):d.default.t(1282)}function h(e){var t;if(e.mediaData.parsedVcards){const{parsedVcards:t}=e.mediaData;return t.length>1?d.default.t(1283,{count:t.length,_plural:t.length}):(0,u.vcardGetNameFromParsed)(t[0])||d.default.t(1942)}return null!=e.pageCount?d.default.t(1283,{count:e.pageCount,_plural:e.pageCount}):(null===(t=e.mediaData)||void 0===t?void 0:t.filename)||d.default.t(1944)}function f({title:e,description:t,currencyCode:s,priceAmount1000:a,salePriceAmount1000:i}){let l;if(null!=s&&null!=a){const e=e=>o.formatAmount1000(s,e);l=null!=i?`~${e(a)}~ ${e(i)}`:e(a)}else t&&(l=(0,n.default)(t,{length:r.default.MAX_REPLY_PRODUCT_DESC_LENGTH}));return[(0,n.default)(e,{length:r.default.MAX_REPLY_PRODUCT_TITLE_LENGTH}),l].filter(Boolean).join("\n")}},13727:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(84758)),o=a(s(91952)),l=a(s(85051)),d=s(62238),u=a(s(2408)),c=a(s(85098)),h=s(85893);class f extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1},this.onMouseOver=()=>{this.setState({hover:!0})},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this._getGroupName=()=>{const{quotedGroupJid:e}=this.props,t=r.default.get(e);return t&&t.formattedTitle},this.onClick=()=>{const{quotedGroupJid:e}=this.props;(0,d.findChat)(e).then((e=>o.default.openChatBottom(e)))}}hoverable(){return!this.state.hover&&!this.props.isComposePreview}render(){const{isComposePreview:e}=this.props,t=this._getGroupName();if(!t)return null;const s=(0,i.default)(c.default.quotedMsg,{[c.default.hover]:this.state.hover,[c.default.composeBoxQuotedMsg]:!!e});return(0,h.jsx)("div",{onMouseOver:this.onMouseOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,className:s,children:(0,h.jsxs)("div",{className:c.default.msg,role:e?"none":"button",onClick:this.onClick,children:[(0,h.jsx)("span",{className:c.default.colorBar}),(0,h.jsx)("div",{className:c.default.msgBody,children:(0,h.jsx)(l.default,{className:"quoted-mention",text:u.default.t(1513,{groupName:t}),direction:"auto"},"status")})]})})}}t.default=f,f.displayName="QuotedAdminMsgGroupName"},72426:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,s=t.isSentByMe?n.default.t(1563):n.default.t(1561);return(0,d.jsx)(l.default,{msg:t,displayAuthor:!t.isSentByMe&&t.isGroupMsg,children:(0,d.jsxs)(i.FlexRow,{align:"center",children:[(0,d.jsx)(i.FlexItem,{xstyle:u.icon,children:(0,d.jsx)(o.default,{name:"recalled"})}),(0,d.jsx)(i.FlexItem,{children:(0,d.jsx)(r.default,{msg:t.unsafe(),theme:"placeholder",children:s})})]})})};a(s(56720)),a(s(55454));var i=s(63290),n=a(s(2408)),r=a(s(42120)),o=a(s(2966)),l=a(s(41184)),d=s(85893);const u={icon:{display:"l7jjieqr",marginEnd:"mw4yctpw",overflowX:"gfz4du6o",overflowY:"r7fjleex",color:"a6r0u4sv"}}},94577:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=n.default.durationStr(e.currentTime)+" / "+n.default.durationStr(e.duration);return(0,o.jsx)(r.default,{value:e.currentTime,valueText:t,min:0,max:e.duration,smallSkip:1,largeSkip:10,onChange:e.onChange,disabled:e.disabled,theme:l(e)})};var n=i(s(25142)),r=a(s(37957)),o=s(85893);function l({outgoing:e,played:t}){return e?t?r.SmoothRangeInputTheme.AUDIO_OUTGOING_PLAYED:r.SmoothRangeInputTheme.AUDIO_OUTGOING_UNPLAYED:t?r.SmoothRangeInputTheme.AUDIO_INCOMING_PLAYED:r.SmoothRangeInputTheme.AUDIO_INCOMING_UNPLAYED}},92529:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const s=(0,c.default)(e.msg,["rtl","dir","isGroupMsg","isPSA","isSentByMe","senderObj","paymentNoteMsg"]),a=null===(t=s.paymentNoteMsg)||void 0===t?void 0:t.body;let f,p=null;if(a){const e=(0,i.Conversation)({mentions:s.mentionMap(),links:s.getLinks(),trusted:s.isTrusted()});p=(0,h.jsx)("div",{className:u.default.caption,children:(0,h.jsx)(l.default,{msg:s.unsafe(),children:(0,h.jsx)(n.default,{text:a,selectable:!0,formatters:e,dirMismatch:s.rtl!==r.default.isRTL(),direction:s.dir})})})}else f=(0,h.jsx)("div",{className:u.default.meta,children:(0,h.jsx)(d.default,{msg:s})});return(0,h.jsxs)(o.default,{displayAuthor:e.displayAuthor,displayType:e.displayType,hasCaption:!!p,msg:s,quotedMsg:e.quotedMsg,hideMeta:!a,children:[e.paymentInfo,f,p]})};var i=s(68551),n=(a(s(55454)),a(s(85051))),r=a(s(2408)),o=a(s(57087)),l=a(s(42120)),d=a(s(76480)),u=a(s(18041)),c=a(s(76006)),h=s(85893)},37957:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{value:t,valueText:s,min:a,max:c,smallSkip:h,largeSkip:f,onChange:p,disabled:m,theme:_}=e,[g,v]=(0,r.useState)(null),S=(0,r.useCallback)((e=>{v(null),null==p||p(e)}),[v,p]),C=null!=g?g:t,y=100*(0,i.default)((C-a)/(c-a),0,1),E=(0,n.default)(l.default.container,function(e){switch(e){case u.AUDIO_OUTGOING_UNPLAYED:return l.default.containerOutgoingUnplayed;case u.AUDIO_OUTGOING_PLAYED:return l.default.containerOutgoingPlayed;case u.AUDIO_INCOMING_UNPLAYED:return l.default.containerIncomingUnplayed;case u.AUDIO_INCOMING_PLAYED:return l.default.containerIncomingPlayed}}(_),{[l.default.containerDisabled]:m});return(0,d.jsx)(o.default,{value:t,valueText:s,min:0,max:c,smallSkip:h,largeSkip:f,onChange:v,onCommit:S,disabled:m,children:(0,d.jsxs)("div",{className:E,children:[(0,d.jsx)("div",{className:l.default.track}),(0,d.jsx)("span",{className:l.default.progress,style:{width:`${y}%`}}),(0,d.jsx)("div",{className:l.default.thumbTravelContainer,children:(0,d.jsx)("div",{className:l.default.thumbContainer,style:{transform:`translateX(${y}%)`},children:(0,d.jsx)("div",{className:l.default.thumb})})})]})})},t.SmoothRangeInputTheme=void 0;var i=a(s(74691)),n=a(s(94184)),r=s(67294),o=a(s(92594)),l=a(s(97103)),d=s(85893);const u=s(54302).Mirrored(["AUDIO_OUTGOING_UNPLAYED","AUDIO_OUTGOING_PLAYED","AUDIO_INCOMING_UNPLAYED","AUDIO_INCOMING_PLAYED"]);t.SmoothRangeInputTheme=u},91266:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=s(78615),o=a(s(57155)),l=a(s(79485)),d=s(85893);class u extends n.PureComponent{render(){const{children:e,className:t,msg:s}=this.props;if(!s)return __LOG__(4,void 0,new Error,!0)`Missing msg model for SpacerText component`,SEND_LOGS("missing-msg-model"),(0,d.jsx)(d.Fragment,{children:e});const a=[s.broadcast,s.isSentByMe,s.labels&&s.labels.length>0&&(0,r.canDisplayLabel)(),s.star].filter(Boolean).length,n=[o.default.icons1,o.default.icons2,o.default.icons3,o.default.icons4],l=a>0?n[a-1]:"";return(0,d.jsxs)("span",{className:t,children:[e,(0,d.jsx)("span",{className:(0,i.default)(o.default.spacer,l)})]})}}u.CONCERNS={msg:["broadcast","isEphemeral","isSentByMe","labels","star"]},u.displayName="SpacerText";var c=(0,l.default)(u,u.CONCERNS);t.default=c},14784:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(7900)),n=s(67294),r=a(s(25142)),o=a(s(55454)),l=a(s(17025)),d=a(s(88419)),u=s(73554),c=a(s(85051)),h=a(s(47193)),f=a(s(16712)),p=a(s(39e3)),m=a(s(2408)),_=a(s(71681)),g=s(51435),v=a(s(27238)),S=a(s(2966)),C=a(s(98532)),y=a(s(61211)),E=s(85893);class b extends n.Component{constructor(e){super(e),this._setWrapperRef=e=>{this._wrapperRef=e},this._setGalleryMsgRef=e=>{this._galleryMsgRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.handleSelectionChange=(e,t)=>{const s="focus"===e;if(s){const e=this._hotKeysRef;e&&(h.default.focus(e),t&&(0,u.scrollIntoViewIfNeeded)(e))}this.setState({current:s})},this.handleActiveChange=(e,t)=>{if("focus"===e){const e=this._hotKeysRef;e&&(h.default.focus(e),t&&(0,u.scrollIntoViewIfNeeded)(e))}this.setState({active:!!e})},this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.handleEnter=e=>{e.stopPropagation(),e.preventDefault(),this.props.onClickMsg&&this.props.onClickMsg(this.props.msg)},this.openContextMenu=()=>{this._wrapperRef&&this._wrapperRef.openContextMenu()},this.handleFocus=()=>{this.setState({focus:!0}),this.indicateFocus()},this.handleBlur=()=>{this.setState({focus:!1})},this.indicateFocus=()=>{var e;null===(e=this._galleryMsgRef)||void 0===e||e.indicateFocus()},this.getWrapperRef=()=>this._wrapperRef;const{currSelection:t,activeSelection:s,msg:a}=e;this.state={hover:!1,current:!!t&&t.value===a,active:!!s&&s.value===a,focus:!1}}componentDidMount(){const{msg:e,currSelection:t,activeSelection:s,listeners:a}=this.props;t&&a.add(t,e.id.toString(),this.handleSelectionChange),s&&a.add(s,e.id.toString(),this.handleActiveChange)}getContainerElement(){return(0,i.default)(this._hotKeysRef,"this._hotKeysRef")}render(){const{msg:e,selectedMessages:t,displayType:s}=this.props,a=e.senderObj.formattedName,i=e.chat.isUser?l.default.assertGet(e.to).formattedName?l.default.assertGet(e.to).formattedName:(0,C.default)(e.to):e.chat.title(),n=s===o.default.DISP_TYPE.GALLERY?null:(0,E.jsxs)("div",{className:v.default.title,children:[(0,E.jsxs)("div",{className:v.default.titleMain,children:[(0,E.jsx)("div",{className:v.default.avatar,children:(0,E.jsx)(d.default,{id:e.senderObj.id,size:26})}),(0,E.jsx)(c.default,{className:v.default.author,text:a,direction:"auto",titlify:!0}),(0,E.jsx)("span",{className:v.default.divider}),(0,E.jsx)(c.default,{className:v.default.chat,text:i,direction:"auto",titlify:!0})]}),(0,E.jsx)("div",{className:v.default.meta,dir:"auto",children:r.default.relativeStr(e.t)}),(0,E.jsx)("div",{className:v.default.chevron,children:(0,E.jsx)(S.default,{name:"chevron-right-alt",directional:!0})})]}),u={enter:this.handleEnter};u[m.default.LR("right","left")]=this.openContextMenu;const h=this.props.selectable||this.state.hover&&s===o.default.DISP_TYPE.GALLERY;return(0,E.jsx)(p.default,{onRef:this._setHotKeysRef,handlers:u,onFocus:this.handleFocus,onBlur:this.handleBlur,children:(0,E.jsxs)(f.default,{ref:this._setGalleryMsgRef,hover:this.state.hover,current:this.state.current&&this.state.focus,active:this.state.active,onClick:()=>this.props.onClickMsg&&this.props.onClickMsg(e,t&&!t.isSelected(e)),onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null,children:[n,(0,E.jsx)(y.default,{msg:e,ref:this._setWrapperRef,current:this.state.current&&this.state.focus,displayType:s||o.default.DISP_TYPE.STARRED_MSGS,isMsgVisible:this.props.isMsgVisible,selectable:h,selectedMessages:t,onMessageSelect:this.props.onMessageSelect,position:g.MsgPosition.END,tailOverride:"left",onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick},e.id.toString())]})})}}b.displayName="StarredMsg";const T=(0,_.default)(b);t.default=class extends T{getWrapperRef(){return this.getComponent().getWrapperRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},81538:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e}){const{ack:t,isMedia:s,isViewOnce:a,caption:h,type:f,loc:p,isLive:m}=(0,d.default)(e,["ack","isMedia","isViewOnce","caption","type","loc","isLive"]),_=s&&!h&&!a&&f!==c.AUDIO||f===c.LOCATION&&!p&&!m;let g,v,S;t<n.default.ACK.SENT?(g="msg-time",v=r.default.t(25)):t===n.default.ACK.SENT?(g="msg-check",v=r.default.t(27)):t===n.default.ACK.RECEIVED?(g="msg-dblcheck",v=r.default.t(24)):(g="msg-dblcheck",v=r.default.t(26),S=o.default.ackBlue);return(0,u.jsx)(l.default,{"aria-label":` ${v} `,name:g,className:(0,i.default)(S,{[o.default.light]:_})})};var i=a(s(94184)),n=a(s(55454)),r=a(s(2408)),o=a(s(54669)),l=a(s(2966)),d=a(s(76006)),u=s(85893);const c=n.default.MSG_TYPE},18504:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,p.default)(e.msg,["isNewMsg","isSentByMe","isGroupMsg","senderObj","quotedMsg","ctwaContext"]);(0,n.useEffect)((()=>{t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:u.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[]);const s=e.displayAuthor?(0,m.jsx)("div",{className:h.default.author,children:(0,m.jsx)(r.default,{msg:t,contact:t.senderObj})}):null,a=e.quotedMsg?(0,m.jsx)("div",{className:h.default.quote,children:e.quotedMsg}):null,_=(0,i.default)(h.default.bubble,{[h.default.hasAuthor]:e.displayAuthor,[h.default.isFirst]:e.position===l.MsgPosition.FRONT||e.position===l.MsgPosition.SINGLE,[h.default.isTransparent]:!t.quotedMsg&&!t.ctwaContext});return(0,m.jsxs)("div",{className:_,onClick:e=>{e.stopPropagation()},children:[s,a,(0,m.jsx)(o.default,{msg:t.unsafe(),wrapperClass:h.default.ctwaContext}),(0,m.jsxs)("div",{className:h.default.body,children:[(0,m.jsx)(f.default,{mediaData:e.mediaData,msg:t,children:(0,m.jsx)(c.default,{mediaData:e.mediaData,theme:"conversation",isNewMsg:t.isNewMsg,downloadMedia:()=>t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:u.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),forwardRef:e.forwardRef,animateOnView:e.animateOnView})}),(0,m.jsx)("div",{className:h.default.meta,children:(0,m.jsx)(d.default,{msg:t})})]})]})};var i=a(s(94184)),n=s(67294),r=a(s(17850)),o=a(s(32646)),l=s(51435),d=a(s(76480)),u=a(s(4231)),c=a(s(63348)),h=a(s(80079)),f=a(s(5373)),p=a(s(76006)),m=s(85893)},5373:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e,s=(0,f.default)(e.mediaData,["mediaStage","size"]),a=()=>{r.default.openModal((0,p.jsx)(o.default,{msg:t.unsafe()}))},i=()=>{t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:u.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},m=()=>{t.cancelDownload()},_=()=>{t.cancelUpload()},g=()=>{t.resumeUpload()},v=()=>{t.resumeRemoteUpload()};let S,C;const{mediaStage:y}=s;switch(y){case d.MEDIA_DATA_STAGE.RESOLVED:S=null,C=null;break;case d.MEDIA_DATA_STAGE.FETCHING:S=m,C=(0,p.jsx)(l.Pending,{cancelable:!0});break;case d.MEDIA_DATA_STAGE.NEED_POKE:S=i,C=(0,p.jsx)(l.Download,{filesize:s.size});break;case d.MEDIA_DATA_STAGE.UPLOADING:S=_,C=(0,p.jsx)(l.Pending,{cancelable:!0});break;case d.MEDIA_DATA_STAGE.NEED_UPLOAD:S=g,C=(0,p.jsx)(l.Upload,{filesize:s.size});break;case d.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:S=v,C=(0,p.jsx)(l.Upload,{filesize:s.size});break;case d.MEDIA_DATA_STAGE.ERROR_MISSING:S=a,C=(0,p.jsx)(l.Upload,{filesize:s.size});break;case d.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:S=a,C=(0,p.jsx)(l.Download,{filesize:s.size});break;case d.MEDIA_DATA_STAGE.SENDING:case d.MEDIA_DATA_STAGE.DECRYPTING:case d.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case d.MEDIA_DATA_STAGE.INIT:case d.MEDIA_DATA_STAGE.PREPARING:case d.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case d.MEDIA_DATA_STAGE.REUPLOADING:case d.MEDIA_DATA_STAGE.EXISTS:C=(0,p.jsx)(l.Pending,{});break;case d.MEDIA_DATA_STAGE.PROGRESSIVE_READY:throw new Error(`invalid value for sticker mediaStage '${y}'`)}return(0,p.jsxs)("div",{className:(0,n.default)(c.default.thumb,h.default.cursorAuto),onClick:S,children:[C,e.children]})};var n=i(s(94184)),r=i(s(91952)),o=i(s(32666)),l=a(s(15377)),d=s(90672),u=i(s(4231)),c=i(s(41536)),h=i(s(86542)),f=i(s(76006)),p=s(85893)},52013:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(85051)),r=a(s(11706)),o=a(s(82669)),l=s(61211),d=s(85893);class u extends i.PureComponent{constructor(...e){super(...e),this.state={date:void 0,visible:!0}}updateDateMarkerText(e){this.setState({date:e})}setVisibility(e){this.setState({visible:e})}render(){let e;return this.state.date&&this.state.visible&&(e=(0,d.jsx)("div",{className:r.default.sticky,children:(0,d.jsx)(l.SystemBubble,{theme:"sticky",children:(0,d.jsx)(n.default,{direction:"auto",text:this.state.date})})})),(0,d.jsx)(o.default,{transitionName:"slide-down-date",children:e})}}t.default=u,u.displayName="StickyDateMarker"},89589:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{msg:s,link:a,displayType:u}=e;if(!s&&!a)return null;let c;if(null==s||null===(t=s.ctwaContext)||void 0===t?void 0:t.isSuspiciousLink)c=r.default.t(1683);else if(a)a.suspiciousCharacters&&a.suspiciousCharacters.size&&(c=r.default.t(1683));else if(s){const e=s.getSuspiciousLinks().length;if(e){const t=s.getLinks().length;c=1===t||u===n.default.DISP_TYPE.GALLERY?r.default.t(1683):r.default.t(1684,{count:e,_plural:e})}}return c?(0,d.jsxs)("div",{className:(0,i.default)(o.default.container,{[o.default.isLinkMsg]:Boolean(a),[o.default.ctwaContainer]:null!=(null==s?void 0:s.ctwaContext)}),children:[(0,d.jsx)(l.default,{name:"alert",display:"inline",className:o.default.icon}),(0,d.jsx)("span",{className:o.default.text,children:c})]}):null};var i=a(s(94184)),n=a(s(55454)),r=a(s(2408)),o=a(s(56692)),l=a(s(2966)),d=s(85893)},889:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(94184)),r=s(67294),o=i(s(69991)),l=i(s(91952)),d=i(s(55454)),u=a(s(4919)),c=i(s(2408)),h=s(17126),f=i(s(71681)),p=i(s(79475)),m=s(30239),_=i(s(79485)),g=s(15298),v=i(s(13803)),S=i(s(2966)),C=i(s(36741)),y=s(85893);const{QUICK_REPLY:E,URL:b,CALL:T}=d.default.TEMPLATE_BUTTON_SUBTYPE;function M(e,t){const s=(0,h.findLink)(e,!1,t.from);if(s&&s.suspiciousCharacters)return l.default.openModal((0,y.jsx)(v.default,{link:s}));const a=(0,y.jsx)(o.default,{a8nText:"popup-controls-go",type:"primary",onClick:()=>function(e){(0,u.openExternalLink)(e),l.default.closeModal()}(e),children:c.default.t(1960)},0),i=(0,y.jsx)(o.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:()=>l.default.closeModal(),children:c.default.t(1912)},1),n=d.default.TEMPLATE_URL_START+d.default.TEMPLATE_URL_END;l.default.openModal((0,y.jsxs)(p.default,{title:c.default.t(1409),actions:[i,a],children:[(0,y.jsx)("div",{children:c.default.t(1410)}),(0,y.jsx)(u.default,{href:e,isLongTemplateUrl:e.length>n,children:e})]}))}class x extends r.PureComponent{constructor(...e){super(...e),this.handleClick=e=>{const{subtype:t,url:s,displayText:a,selectionId:i,id:n}=e;t===T?function(){const e=(0,y.jsx)(o.default,{a8nText:"popup-controls-ok",type:"primary",onClick:()=>l.default.closeModal(),children:c.default.t(2085)},0);l.default.openModal((0,y.jsx)(p.default,{actions:[e],children:c.default.t(470)}))}():t===b&&s?M(s,this.props.msg):t===E&&(0,m.sendTextMsgToChat)(this.props.chat,a,{quotedMsg:(0,g.unproxy)(this.props.msg),selectedIndex:parseInt(n,10),selectedId:i}).then((()=>{e.selected=!0}))}}componentDidMount(){const{msg:e}=this.props;e.buttons&&e.buttons.length&&e.buttons.forEach((e=>this.props.listeners.add(e,"change:selected",(()=>this.forceUpdate()))))}render(){const{msg:e}=this.props;let t;return e.buttons&&(t=e.buttons.map((e=>{let t;switch(e.subtype){case T:t=(0,y.jsx)(S.default,{name:"hsm-call",className:C.default.icon});break;case b:t=(0,y.jsx)(S.default,{name:"hsm-link",className:C.default.icon})}const s=e.selected?void 0:()=>this.handleClick(e);return(0,y.jsxs)("button",{className:(0,n.default)(C.default.actionButton,{[C.default.firstButton]:0===parseInt(e.id,10)&&e.subtype!==E,[C.default.disabled]:e.selected}),onClick:s,children:[t,(0,y.jsx)("span",{className:C.default.actionText,children:e.displayText})]},e.id)}))),(0,y.jsx)("div",{className:(0,n.default)({[C.default.quickReply]:e.isQuickReply,[C.default.callUrl]:!e.isQuickReply}),children:(0,y.jsx)("div",{className:C.default.buttonContainer,children:t})})}}x.CONCERNS={msg:["buttons","isQuickReply","from"]},x.displayName="TemplateButtons";var I=(0,f.default)((0,_.default)(x,x.CONCERNS));t.default=I},73502:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{dir:t,footer:s,isShown:a,msg:h,rtl:f,type:p,trusted:m}=e,_=f!==l.default.isRTL();if(a&&s){const e=(0,i.default)(u.default.footer,{[u.default.isMedia]:p!==n.default.MSG_TYPE.CHAT,[u.default.dirMismatch]:_}),{formatters:a,selectable:l}=h.isDynamicReplyButtonsMsg?(0,o.enableHeaderAndFooterFormatting)(h.getFooterLinks(),!0===m):{};return(0,c.jsx)(d.default,{className:e,spacer:!f,msg:h,children:(0,c.jsx)(r.default,{text:s,direction:t,dirMismatch:_,selectable:l,formatters:a})})}return null};var i=a(s(94184)),n=a(s(55454)),r=a(s(85051)),o=s(40895),l=a(s(2408)),d=a(s(42120)),u=a(s(50784)),c=s(85893)},80153:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,trusted:s,displayType:a,quotedMsg:D}){let j,R,L,k,F;if(s&&(e.linkPreview||e.ctwaContext)){const t=O.default.supportsFeature(O.default.F.MD_BACKEND)?e.matchedText&&(0,g.isParsableYouTubeVideoUrl)(e.richPreviewType,e.matchedText,e.doNotPlayInline):e.matchedText&&(0,g.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline);if(e.ctwaContext)j=(0,w.jsx)(c.default,{msg:e.unsafe(),wrapperClass:P.default.linkPreview});else if(t)j=(0,w.jsx)("div",{className:P.default.linkPreview,children:(0,w.jsx)(N.default,{msg:e.unsafe()})});else{const t=(0,M.parseAPICmd)(e.matchedText);if(t.resultType===n.APICmd.GROUP_INVITE){if(j=(0,w.jsx)("div",{className:P.default.linkPreview,children:(0,w.jsx)(S.default,{msg:e.unsafe(),displayType:a,invite:!0})}),a!==u.default.DISP_TYPE.GALLERY){const t=e.isSentByMe?v.default.t(987):v.default.t(963);R=(0,w.jsx)(r.default,{items:[{label:t,onClick:()=>{const t=e.matchedText;(0,m.openExternalLink)(t)}}]})}}else if(t.resultType===n.APICmd.CATALOG){if(j=(0,w.jsx)("div",{className:P.default.linkPreview,children:(0,w.jsx)(l.default,{msg:e.unsafe()})}),a!==u.default.DISP_TYPE.GALLERY){const t=v.default.t(1465);R=(0,w.jsx)(r.default,{items:[{label:t,onClick:()=>{const t=e.matchedText;(0,m.openExternalLink)(t)}}]})}}else{const t=e.asUrl;if(t){let s;if((0,C.displayHighQualityLinkPreview)(e.unsafe(),a)&&null!=t.thumbnailHeight&&null!=t.thumbnailWidth){const e=t.thumbnailHeight/t.thumbnailWidth;L=e>=1?"portrait":"landscape",s="high-quality"}j=(0,w.jsx)("div",{className:P.default.linkPreview,children:(0,w.jsx)(S.default,{msg:e.unsafe(),displayType:a,theme:s})})}}}}const B=h.default.matchLargeEmojiPattern(e.body);if(B){const e=1===B.length&&h.default.getHeartEmojis().some((e=>h.default.normalizeEmoji(e)===h.default.normalizeEmoji(B[0])));k=(0,w.jsx)(T.default,{animation:e,emojis:B}),F=!0}else{const t=!0;k=(0,w.jsx)(p.default,{text:e.body,textLimit:e.initialPageSize,children:({textLimit:i})=>{const n=(0,d.Conversation)({mentions:e.mentionMap(),links:e.getLinks(i),selectable:t,trusted:!0===s});return(0,w.jsx)(f.default,{text:e.body,className:a===u.default.DISP_TYPE.GALLERY?"message-text-link":"",dirMismatch:e.rtl!==v.default.isRTL(),direction:e.dir,inferLinesDirection:!0,formatters:n,selectable:t,textLimit:i})}})}let G,U;if(e.supportsMessageFooter){const{formatters:t,selectable:a}=e.isDynamicReplyButtonsMsg?(0,_.enableHeaderAndFooterFormatting)(e.getHeaderLinks(),!0===s):{};G=e.title?(0,w.jsx)("div",{className:P.default.title,children:(0,w.jsx)(f.default,{text:e.title,dirMismatch:e.rtl!==v.default.isRTL(),direction:e.dir,selectable:a,formatters:t})}):null,U=(0,w.jsx)(I.default,{dir:e.dir,footer:e.footer,isShown:e.supportsMessageFooter,msg:e.unsafe(),rtl:e.rtl,trusted:s,type:e.type})}const V=a!==u.default.DISP_TYPE.GALLERY&&!e.isPSA&&!F;let H;D&&(H=(0,w.jsx)("div",{className:P.default.quote,children:D}));const W=(0,b.showForwarded)(e),Y=e.getSuspiciousLinks().length>0,K=!!R||!!e.hasTemplateButtons||!!e.isDynamicReplyButtonsMsg;let q;K&&(q=(0,w.jsx)("div",{className:P.default.meta,children:(0,w.jsx)(E.default,{msg:e})}));return(0,w.jsx)(A.default,{msg:e,displayType:a,displayAuthor:t,hideMeta:K,theme:L,children:(0,w.jsxs)(o.default,{className:(0,i.default)({[P.default.hasAuthor]:t,[P.default.forwarded]:W,[P.default.hasSuspiciousLinks]:Y}),contact:e.senderObj,msg:e.unsafe(),children:[H,!e.ctwaContext&&(0,w.jsx)(x.default,{msg:e.unsafe(),displayType:a}),j,(0,w.jsxs)(y.default,{msg:e.unsafe(),spacer:e.isFromTemplate||e.isDynamicReplyButtonsMsg?V&&!e.footer:V,"data-id":e.id,children:[G,k,U,q]}),R]})})};var i=a(s(94184)),n=s(67012),r=a(s(61630)),o=a(s(41340)),l=a(s(81793)),d=s(68551),u=a(s(55454)),c=a(s(32646)),h=a(s(2561)),f=a(s(85051)),p=a(s(18598)),m=s(4919),_=s(40895),g=s(78471),v=a(s(2408)),S=a(s(63384)),C=s(67659),y=a(s(42120)),E=a(s(76480)),b=s(17223),T=a(s(84398)),M=s(48460),x=a(s(89589)),I=a(s(73502)),P=a(s(79901)),A=a(s(41184)),N=a(s(5197)),O=a(s(12950)),w=s(85893)},41184:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)(u.default.bubble,{[u.default.isPSA]:e.msg.isPSA,[u.default.portrait]:"portrait"===e.theme,[u.default.landscape]:"landscape"===e.theme}),s=!1!==e.displayAuthor&&(!e.msg.isSentByMe&&e.msg.isGroupMsg)?(0,c.jsx)(n.default,{msg:e.msg,contact:e.msg.senderObj}):null,a=(0,d.showForwarded)(e.msg)?(0,c.jsx)(o.default,{msg:e.msg.unsafe()}):null,h=e.displayType===r.default.DISP_TYPE.GALLERY||e.hideMeta?null:(0,c.jsx)("div",{className:u.default.meta,children:(0,c.jsx)(l.default,{msg:e.msg})});return(0,c.jsxs)("div",{className:t,children:[s,a,e.children,h]})};var i=a(s(94184)),n=a(s(17850)),r=a(s(55454)),o=a(s(89513)),l=a(s(76480)),d=s(17223),u=a(s(14390)),c=s(85893)},32473:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,n.jsx)("div",{className:i.default.shade})};var i=a(s(51469)),n=s(85893)},92310:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayTheme=void 0;const a=s(54302).Mirrored(["Album"]);t.DisplayTheme=a},63140:()=>{},83486:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(2408)),r=s(50256),o=a(s(81661)),l=s(85893);t.default=({count:e,textContainerRef:t})=>{const s=n.default.t(1715,{count:n.default.n(e),_plural:e});return(0,l.jsx)("div",{className:(0,i.default)(o.default.msgUnread,r.LIST_FOCUSABLE_ITEM_CLASS_NAME),ref:t,tabIndex:-1,children:(0,l.jsx)("span",{className:o.default.msgUnreadBody,"aria-live":"polite",children:s})})}},52481:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,displayType:s,hideUpdateButton:a=!1}){return(0,m.jsx)(u.default,{msg:e,displayAuthor:t,children:(0,m.jsxs)(d.default,{iconName:"unknown",msg:e.unsafe(),children:[(0,o.default)(e.unsafe())," ",a?null:g(e)]})})};var n=s(16125),r=i(s(91952)),o=(i(s(55454)),i(s(75580))),l=i(s(2408)),d=i(s(25606)),u=i(s(41184)),c=a(s(49201)),h=i(s(98795)),f=i(s(66810)),p=i(s(12950)),m=s(85893);function _(){r.default.openToast((0,m.jsx)(c.default,{msg:l.default.t(1742),id:(0,c.genId)()})),f.default.update().then((e=>{e===n.DownloadState.UPDATE_NOT_AVAILABLE?(__LOG__(3)`Got unsupported message but no newer release found`,r.default.openToast((0,m.jsx)(c.default,{msg:l.default.t(1388),id:(0,c.genId)()}))):e===n.DownloadState.UPDATE_DOWNLOADED?f.default.restart():__LOG__(3)`Got unsupported message but updater errored`}))}function g(e){if(p.default.supportsFeature(p.default.F.MD_BACKEND)&&"fanout"===e.subtype)return null;let t=null;return!e.isSentByMe&&e.subtype||(t=(0,m.jsx)("span",{className:h.default.action,role:"button",onClick:_,children:l.default.t(1730)})),t}window.updater=f.default},27058:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(39138)),r=a(s(94184)),o=s(67294),l=a(s(19491)),d=a(s(17850)),u=a(s(61630)),c=a(s(41340)),h=a(s(91952)),f=a(s(75940)),p=a(s(55454)),m=a(s(17025)),_=a(s(303)),g=a(s(32646)),v=a(s(85051)),S=a(s(97227)),C=s(62238),y=s(49895),E=a(s(2408)),b=a(s(32666)),T=s(90672),M=a(s(76480)),x=a(s(18327)),I=a(s(3165)),P=a(s(79485)),A=s(15298),N=a(s(40858)),O=a(s(2966)),w=a(s(96594)),D=a(s(39029)),j=s(50313),R=a(s(54052)),L=s(85893);class k extends o.Component{constructor(...e){super(...e),this.handleMessageClick=e=>{const{vcard:t}=this.props;if(!t)return;const s=(0,j.vcardWids)(t),a=(0,j.vcardIsBiz)(t);s.length>1?h.default.openModal((0,L.jsx)(R.default,{icon:(0,L.jsx)(O.default,{name:"chat",className:D.default.icon,directional:!0}),vcard:t,onCancel:()=>h.default.closeModal(),onSelect:t=>this.openContactChat(t,e,a)})):s.length>0&&this.openContactChat(s[0],e,a)},this.openContactChat=(e,t,a)=>{(0,C.findChat)(e,a).then((e=>{this.props.onMessageClick&&this.props.onMessageClick(),h.default.closeModal(),h.default.openChatFromUnread(e).then((a=>{if(a){if(t){const t=s(87957).default;h.default.openDrawerRight((0,L.jsx)(t,{chat:e},`info-${e.id.toString()}`),"slide-left",w.default.Manager.top)}h.default.focusChatTextInput(e)}}))}))},this.handleViewContact=()=>{const{msg:e,vcard:t}=this.props;t?h.default.openModal((0,L.jsx)(_.default,{vcard:t})):h.default.openModal((0,L.jsx)(f.default,{onCancel:()=>h.default.closeModal(),onOK:()=>{h.default.closeModal(),S.default.initDownload((0,A.unproxy)(e.unsafe()))},okText:E.default.t(1908),cancelText:E.default.t(1912),title:E.default.t(786),children:E.default.t(785)}))},this._handleAddToGroupClick=()=>{const e=(0,j.vcardWids)(this.props.vcard),{vcard:t}=this.props;e.length>1&&t?h.default.openModal((0,L.jsx)(R.default,{icon:(0,L.jsx)(O.default,{name:"add-user",directional:!0}),vcard:t,onCancel:()=>h.default.closeModal(),onSelect:this._addContactToGroup})):e.length>0&&this._addContactToGroup(e[0])},this._showMediaMissing=()=>{h.default.openModal((0,L.jsx)(b.default,{msg:this.props.msg.unsafe()}))},this._getBubbleActionItems=(e,t)=>{const s={label:E.default.t(1228),onClick:()=>this.handleMessageClick(!1),title:e?E.default.t(1231,{author:e}):E.default.t(1228)};if(t){return[s,{label:E.default.t(1778),onClick:()=>this.handleMessageClick(!0)}]}return[s,{label:E.default.t(234),onClick:this._handleAddToGroupClick}]}}_addContactToGroup(e){m.default.find(e).then((e=>{h.default.openModal((0,L.jsx)(l.default,{contact:e,pushTransition:"none",popTransition:"none"}),{transition:"modal-flow"})}))}render(){const{downloadMedia:e,mediaStage:t,msg:s,vcard:a}=this.props;let o,l,h;if(a){o=(0,j.vcardWids)(a);const e=s.type===p.default.MSG_TYPE.VCARD?s.vcardFormattedName:null;l=(0,n.default)(e||(0,j.vcardGetNameFromParsed)(a)||E.default.t(270),{length:120,omission:E.default.t(1510)}),o.length>0&&(h=(0,L.jsx)(u.default,{items:this._getBubbleActionItems(l,(0,j.vcardIsBiz)(a))}))}const f=this.props.displayAuthor?(0,L.jsx)("div",{className:D.default.author,children:(0,L.jsx)(d.default,{msg:s,contact:s.senderObj})}):null,m=this.props.quotedMsg?(0,L.jsx)("div",{className:D.default.quote,children:this.props.quotedMsg}):null,_=(0,r.default)(D.default.bubble,{[D.default.hasAuthor]:f,[D.default.hasQuote]:m,[D.default.isPreview]:this.props.displayType===p.default.DISP_TYPE.MSG_INFO,[D.default.isGallery]:this.props.displayType===p.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===p.default.DISP_TYPE.CONTACT_CARD||this.props.displayType===p.default.DISP_TYPE.GALLERY}),S=s.type===p.default.MSG_TYPE.DOCUMENT&&s.isVcardOverMmsDocument&&t===T.MEDIA_DATA_STAGE.ERROR_MISSING,C=S||!this.props.placeholder&&(a||s.chat.isTrusted()),b=C?S?this._showMediaMissing:this.handleViewContact:()=>{},P=y.Configuration.Compatibility({selectable:true}),A=this.props.placeholder?(0,L.jsx)(F,{downloadMedia:e,mediaStage:t}):(0,L.jsx)(x.default,{size:49,thumb:(0,j.vcardThumbnail)(a),wid:I.default.getThumbnailWidFromVcard(a)}),N=this.props.placeholder?(0,L.jsx)(B,{mediaStage:t}):(0,L.jsx)(v.default,{text:l,element:"div",className:D.default.name,selectable:true,dirMismatch:s.rtl!==E.default.isRTL(),direction:s.dir,formatters:P});return this.props.placeholder&&(h=t===T.MEDIA_DATA_STAGE.ERROR_MISSING?(0,L.jsx)(u.default,{items:this._getBubbleActionItems().map((e=>(0,i.default)((0,i.default)({},e),{},{onClick:this._showMediaMissing})))}):(0,L.jsx)(u.default,{items:[],placeholder:!0})),(0,L.jsxs)(c.default,{className:_,contact:s.senderObj,msg:s.unsafe(),children:[f,m,(0,L.jsx)(g.default,{msg:s.unsafe(),wrapperClass:D.default.ctwaContext}),(0,L.jsxs)("div",{className:D.default.vcard,role:C?"button":null,onClick:b,children:[(0,L.jsx)("div",{className:D.default.avatar,children:A}),(0,L.jsx)("div",{className:D.default.body,children:N}),(0,L.jsx)("div",{className:D.default.meta,children:(0,L.jsx)(M.default,{msg:s})})]}),h]})}}function F(e){const{downloadMedia:t,mediaStage:s}=e;if(!s)return(0,L.jsx)(U,{downloadMedia:t});switch(s){case T.MEDIA_DATA_STAGE.NEED_POKE:case T.MEDIA_DATA_STAGE.INIT:return(0,L.jsx)(U,{downloadMedia:t});case T.MEDIA_DATA_STAGE.FETCHING:case T.MEDIA_DATA_STAGE.REUPLOADING:case T.MEDIA_DATA_STAGE.DECRYPTING:return(0,L.jsx)(G,{animate:!0,type:"profileImage"});case T.MEDIA_DATA_STAGE.RESOLVED:return(0,L.jsx)(G,{type:"profileImage"});case T.MEDIA_DATA_STAGE.ERROR_MISSING:return(0,L.jsx)(U,{downloadMedia:()=>{}});default:return(0,L.jsx)(G,{animate:!0,type:"profileImage"})}}function B(e){const{mediaStage:t}=e;if(!t)return(0,L.jsx)(G,{type:"body"});switch(t){case T.MEDIA_DATA_STAGE.NEED_POKE:case T.MEDIA_DATA_STAGE.INIT:return(0,L.jsx)(G,{type:"body"});case T.MEDIA_DATA_STAGE.FETCHING:case T.MEDIA_DATA_STAGE.REUPLOADING:case T.MEDIA_DATA_STAGE.DECRYPTING:return(0,L.jsx)(G,{animate:!0,type:"body"});case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.ERROR_MISSING:default:return(0,L.jsx)(G,{type:"body"})}}function G(e){const{animate:t,type:s}=e,a=[D.default.placeholder,"profileImage"===s?D.default.placeholderImage:D.default.placeholderText,t?D.default.placeholderAnimation:null].filter(Boolean);return(0,L.jsx)("div",{className:(0,r.default)(a)})}function U(e){const{downloadMedia:t}=e;return(0,L.jsx)(N.default,{"aria-label":E.default.t(1908),name:"audio-download",className:D.default.vcardDownloadStageIcon,onClick:()=>{t&&t()}})}k.CONCERNS={msg:["vcardFormattedName","rtl","dir","isSentByMe","isGroupMsg","senderObj","chat","isVcardOverMmsDocument","type"]},k.displayName="Vcard";var V=(0,P.default)(k,k.CONCERNS);t.default=V},17951:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{displayAuthor:s,displayType:a,onMessageClick:p,msg:m}=e,_=(0,u.default)(e.mediaData,["mediaBlob","mediaStage","parsedVcards","size"]),g=()=>{m.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:o.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})};(0,i.useEffect)((()=>{m.isTrusted()&&_.size<=1024*d.default.mmsVcardAutodownloadSizeKb&&g()}),[]);const v=(0,r.default)((({parsedVcards:e})=>e?e.map((e=>({parsedVcard:e,displayName:(0,h.vcardGetNameFromParsed)(e)||n.default.t(270),isMultiVcard:!1,vcard:""}))):[])),{parsedVcards:S}=_;if(S)return S.length>1?(0,f.jsx)(l.default,{msg:m,vcardList:v({parsedVcards:S}),quotedMsg:e.getQuotedMsg(),displayType:a,displayAuthor:s}):(0,f.jsx)(c.default,{msg:m,vcard:S[0],quotedMsg:e.getQuotedMsg(),displayType:a,displayAuthor:s,onMessageClick:p});return(0,f.jsx)(c.default,{mediaStage:null===(t=m.mediaData)||void 0===t?void 0:t.mediaStage,msg:m,vcard:null,quotedMsg:e.getQuotedMsg(),displayType:a,displayAuthor:s,onMessageClick:p,downloadMedia:m.isTrusted()?g:null,placeholder:!0})};var i=s(67294),n=(a(s(55454)),a(s(2408))),r=a(s(16625)),o=a(s(4231)),l=a(s(97711)),d=a(s(65565)),u=a(s(76006)),c=a(s(27058)),h=s(50313),f=s(85893)},51474:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=i(s(94184)),o=s(67294),l=i(s(17850)),d=i(s(41340)),u=i(s(74574)),c=i(s(25142)),h=i(s(91952)),f=i(s(55454)),p=s(71920),m=i(s(32646)),_=i(s(89513)),g=i(s(12950)),v=i(s(2408)),S=i(s(71681)),C=s(57990),y=s(92310),E=i(s(32666)),b=a(s(15377)),T=s(90672),M=i(s(23929)),x=i(s(76480)),I=i(s(4231)),P=s(17223),A=a(s(27448)),N=i(s(77961)),O=i(s(66772)),w=i(s(79485)),D=s(15298),j=i(s(2966)),R=i(s(73502)),L=i(s(32473)),k=s(49002),F=i(s(1458)),B=i(s(29683)),G=s(85893);const U="PREVIEW",V="FLOATER";function H(e){e.stopPropagation()}class W extends o.PureComponent{constructor(e){super(e),this._setRefThumb=e=>{this._refThumb=e},this.showMediaMissing=()=>{h.default.openModal((0,G.jsx)(E.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:I.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),h.default.openModal((0,G.jsx)(M.default,{msg:(0,D.unproxy)(this.props.msg.unsafe())}))},this.launchMediaViewer=e=>{if(e&&e.stopPropagation(),this.props.theme===y.DisplayTheme.Album){const e=this.props.zoomMsg||this.props.msg,t=new Set((this.props.albumMsgs||[]).map((e=>e.id.toString())));h.default.mediaViewerModal({msg:(0,D.unproxy)(e.unsafe()),highlightedMsgIds:t})}else h.default.mediaViewerModal({msg:(0,D.unproxy)(this.props.msg.unsafe())})},this._launchVideoFloater=e=>{e&&e.stopPropagation();const t=this._refThumb?this._refThumb.getBoundingClientRect():null;N.default.openPiP((0,D.unproxy)(this.props.msg.unsafe()),0,t)},this.setPreviewMode=()=>{this.state.mode!==U&&this.setState({mode:U})},this.setFloaterMode=()=>{this.state.mode!==V&&this.setState({mode:V})};const t=N.default.isOpened((0,D.unproxy)(e.msg.unsafe()))?V:U;this.state={mode:t}}componentDidMount(){const{listeners:e,msg:t}=this.props;e.add(N.default,`${t.id.toString()}_pip_did_open`,this.setFloaterMode),e.add(N.default,`${t.id.toString()}_pip_did_close`,this.setPreviewMode),g.default.supportsFeature(g.default.F.MEDIA_EXISTENCE_CHECK)&&(0,C.checkExistence)((0,D.unproxy)(t)),g.default.isHighQualityVideoThumbnailsEnabled()&&(0,C.downloadVideoThumbnail)({msg:(0,D.unproxy)(t)})}render(){var e,t;const{msg:s,mediaData:a,theme:i,overlayContent:o,displayType:h,displayAuthor:g}=this.props;let S=null,C=null;switch(a.mediaStage){case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.INIT:case T.MEDIA_DATA_STAGE.EXISTS:S=(0,G.jsx)(b.Play,{}),C=this.launchMediaViewer;break;case T.MEDIA_DATA_STAGE.NEED_POKE:S=(0,G.jsx)(b.Download,{filesize:a.size}),C=this.downloadMedia;break;case T.MEDIA_DATA_STAGE.UPLOADING:S=(0,G.jsx)(b.Pending,{cancelable:!0}),C=this.cancelUpload;break;case T.MEDIA_DATA_STAGE.FETCHING:S=(0,G.jsx)(b.Pending,{cancelable:!0}),C=this.cancelDownload;break;case T.MEDIA_DATA_STAGE.NEED_UPLOAD:S=(0,G.jsx)(b.Upload,{filesize:a.size}),C=this.resumeUpload;break;case T.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:S=(0,G.jsx)(b.Upload,{filesize:a.size}),C=this.resumeRemoteUpload;break;case T.MEDIA_DATA_STAGE.ERROR_MISSING:C=this.showMediaMissing;break;case T.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:s.isUnsentMedia||(S=(0,G.jsx)(b.Download,{filesize:a.size}),C=this._downloadUnsupportedToDesktop);break;case T.MEDIA_DATA_STAGE.SENDING:s.isFailed||(S=(0,G.jsx)(b.Pending,{}));break;case T.MEDIA_DATA_STAGE.DECRYPTING:case T.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case T.MEDIA_DATA_STAGE.PREPARING:case T.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case T.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case T.MEDIA_DATA_STAGE.REUPLOADING:S=(0,G.jsx)(b.Pending,{})}const E=parseInt(a.duration,10)?c.default.durationStr(a.duration):null,M=E?(0,G.jsxs)("span",{className:B.default.duration,children:[(0,G.jsx)("div",{className:B.default.icon,children:(0,G.jsx)(j.default,{name:"msg-video"})}),E]}):null,I=(0,k.numCodepoints)(null!==(e=s.text)&&void 0!==e?e:"")>f.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:N,bubbleHeight:w}=(0,p.getBubbleDimension)(s.type,!1,a.aspectRatio,i,h,I),D=a.fullHeight||w,W=a.fullWidth||N,Y=(0,p.getImgStyle)(W,D,N,w),K=null!==(t=a.fullPreviewData)&&void 0!==t?t:a.preview,q=null!=a.fullPreviewData,z=null!=K?(0,n.default)({backgroundImage:F.default.thumbAsBackgroundImage(K.url()).backgroundImage},Y):void 0,$=(0,G.jsx)("div",{className:(0,r.default)(B.default.thumbBody,{[B.default.thumbBodyLowQuality]:!q}),style:z}),Q=g?(0,G.jsx)("div",{className:B.default.author,children:(0,G.jsx)(l.default,{msg:s,contact:s.senderObj})}):null,X=(0,P.showForwarded)(s)&&this.props.theme!==y.DisplayTheme.Album,Z=X?(0,G.jsx)(_.default,{msg:s.unsafe(),className:B.default.forwardedIndicator}):null,J=(0,G.jsx)(L.default,{}),ee=s.caption?(0,G.jsx)("div",{className:B.default.caption,children:(0,G.jsx)(u.default,{msg:s.unsafe(),trusted:this.props.trusted,spacer:!(s.supportsMessageFooter&&s.footer)})}):null,te=(0,r.default)(B.default.bubble,{[B.default.nonAlbumBubble]:!i||i!==y.DisplayTheme.Album,[B.default.portrait]:N<w&&(0,p.canUseCustomCropping)(s.type,i,h)}),se=(0,r.default)(te,{[B.default.hasCaption]:ee,[B.default.hasAuthor]:g,[B.default.isHover]:this.props.hover,[B.default.forwarded]:X,[B.default.isPSA]:s.isPSA,[B.default.ctwaContainerWidth]:null!=s.ctwaContext});let ae;switch(a.mediaStage){case T.MEDIA_DATA_STAGE.INIT:case T.MEDIA_DATA_STAGE.RESOLVED:ae=(0,G.jsx)("div",{className:(0,r.default)(B.default.pipBtn,{[B.default.isHover]:!!this.props.hover}),children:(0,G.jsx)(A.default,{onClick:e=>{e&&e.stopPropagation(),this._launchVideoFloater()},theme:A.PIP_BUTTON_THEME.PREVIEW})});break;default:ae=null}const ie=this.props.quotedMsg?(0,G.jsx)("div",{className:B.default.quote,children:this.props.quotedMsg}):null;let ne;switch(this.state.mode){case U:ne=(0,G.jsxs)(G.Fragment,{children:[ae,S]});break;case V:ne=(0,G.jsx)(O.default,{icon:(0,G.jsx)(j.default,{name:"video-pip-large"}),children:v.default.t(1451)})}const re=(0,r.default)(B.default.thumb,{[B.default.inAlbum]:i===y.DisplayTheme.Album});let oe;null==o&&(oe=(0,G.jsx)("div",{className:B.default.meta,children:(0,G.jsx)(x.default,{msg:s})}));let le=(0,G.jsxs)("div",{className:se,children:[Q,Z,ie,(0,G.jsx)(m.default,{msg:s.unsafe(),wrapperClass:B.default.ctwaContext}),(0,G.jsxs)("div",{ref:this._setRefThumb,className:(0,r.default)(re,{[B.default.cursorPointer]:this.state.mode===U,[B.default.overlay]:o,[B.default.ctwaThumbWidth]:null!=s.ctwaContext}),onClick:C,style:{width:N,height:w},children:[null==o?ne:null,$,J,null==o?M:null]}),ee,(0,G.jsx)(R.default,{dir:s.dir,footer:s.footer,isShown:s.supportsMessageFooter,msg:s.unsafe(),rtl:s.rtl,type:s.type,trusted:this.props.trusted}),oe]});return ee?(0,G.jsx)(d.default,{contact:s.senderObj,msg:s.unsafe(),onClick:H,children:le}):(null!=o&&(le=(0,G.jsxs)("div",{className:B.default.overlayAlbumText,children:[le,o]})),(0,G.jsx)("div",{onClick:H,children:le}))}}W.CONCERNS={msg:["ack","caption","dir","footer","gifAttribution","id","isGroupMsg","isPSA","isSentByMe","isUnsentMedia","rtl","senderObj","type","isFailed","ctwaContext","supportsMessageFooter","text"],mediaData:["aspectRatio","preview","fullPreviewData","duration","mediaStage","fullWidth","fullHeight","size"]},W.displayName="Video";var Y=(0,S.default)((0,w.default)(W,W.CONCERNS));t.default=Y},91968:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(52628)),r=i(s(94184)),o=s(67294),l=i(s(91952)),d=i(s(55454)),u=s(90246),c=i(s(85051)),h=a(s(4919)),f=i(s(12950)),p=i(s(2408)),m=s(67659),_=i(s(71681)),g=a(s(15377)),v=i(s(77961)),S=i(s(66772)),C=s(15298),y=i(s(2966)),E=a(s(49201)),b=i(s(1458)),T=i(s(85829)),M=i(s(28061)),x=i(s(865)),I=s(85893);const P="PREVIEW",A="FLOATER",N=[d.default.HOSTNAME.YOUTUBE,d.default.HOSTNAME.YOUTUBE_MOBILE,d.default.HOSTNAME.YOUTUBE_SHORTENED];class O extends o.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==P&&this.setState({mode:P})},this.setFloaterMode=()=>{this.state.mode!==A&&this.setState({mode:A})},this.parseYoutubeVideoId=e=>{const t=u.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE;let s=null;for(let a=0;a<t.length;a++){const i=b.default.withoutWww(e).match(t[a]);if(i){s=i[1];break}}return s},this.parseYoutubeVideoStartTime=e=>{const t=e.split("?");if(2!==t.length)return 0;const s=t[1],a=new T.default(s).get(u.YOUTUBE_URL_TIME_PARAM_NAME);if(!a)return 0;const i=a.match(u.YOUTUBE_URL_TIME_PARAM_PATTERN);let n=0;if(i&&i.length)for(let e=1;e<i.length;e++){const t=i[e];if(!t)continue;const s=parseInt(t,10);if(isNaN(s))return 0;t.endsWith("h")&&(n+=3600*s),t.endsWith("m")&&(n+=60*s),t.endsWith("s")&&(n+=s),/^\d+$/.test(t)&&(n+=s)}return n};const t=v.default.isOpened((0,C.unproxy)(e.msg))?A:P;this.state={mode:t}}componentDidMount(){this.props.listeners.add(v.default,`${this.props.msg.id.toString()}_pip_did_open`,this.setFloaterMode),this.props.listeners.add(v.default,`${this.props.msg.id.toString()}_pip_did_close`,this.setPreviewMode)}render(){const e=this.props.msg.description?(0,I.jsx)("div",{className:M.default.description,title:this.props.msg.description,children:(0,I.jsx)(c.default,{text:this.props.msg.description})}):null;let t=b.default.hostname(this.props.msg.canonicalUrl||this.props.msg.matchedText);t=b.default.withoutWww(t),t===d.default.HOSTNAME.YOUTUBE_SHORTENED&&(t=d.default.HOSTNAME.YOUTUBE);const s=(0,I.jsx)("div",{className:M.default.source,children:(0,I.jsx)(c.default,{text:t})}),a=(0,r.default)(M.default.body,{[M.default.noThumb]:!this.props.msg.thumbnail}),i=(0,m.hqLinkPreviewDownloadSupported)(),o=(0,m.hqLinkPreviewExpired)(this.props.msg.t),u=i&&!o&&this.props.msg.thumbnailHQ?this.props.msg.thumbnailHQ:this.props.msg.thumbnail;let _;if(this.state.mode===P)switch(t){case d.default.HOSTNAME.YOUTUBE:case d.default.HOSTNAME.YOUTUBE_MOBILE:const e=this.parseYoutubeVideoId(this.props.msg.matchedText);if(e){const t=this.parseYoutubeVideoStartTime(this.props.msg.matchedText);_=s=>{s&&s.stopPropagation(),v.default.openYoutubePiP(e,this.props.msg,t,this.getThumbnailWrapperRect())}}break;case d.default.HOSTNAME.INSTAGRAM:case d.default.HOSTNAME.STREAMABLE:case d.default.HOSTNAME.FACEBOOK:case d.default.HOSTNAME.FBWATCH:case d.default.HOSTNAME.FBWATCH_ALT:case d.default.HOSTNAME.LASSOVIDEOS:case d.default.HOSTNAME.LASSO_SHORTENED:case d.default.HOSTNAME.SHARECHAT:f.default.supportsFeature(f.default.F.VIDEO_PLAYBACK_URL)&&(_=()=>{v.default.openOgVideoPiP("",u,this.props.msg,0,this.getThumbnailWrapperRect());const e=b.default.build(this.props.msg.matchedText,{wa_logging_event:"video_play_open"});x.default.queryVideoPlaybackUrl(e).then((e=>{if(v.default.isOpened(this.props.msg)){if(!e.url)throw new Error("Url is missing in response.");v.default.openOgVideoPiP(e.url,u,this.props.msg,0,null)}})).catch((e=>{__LOG__(3)`handlePiPLauncherClick: queryVideoPlaybackUrl has failed with error ${e}`,v.default.closePiP(),l.default.openToast((0,I.jsx)(E.default,{id:(0,E.genId)(),msg:p.default.t(1449),action:{actionText:p.default.t(1450),onAction:()=>{(0,h.openExternalLink)(this.props.msg.matchedText)}}}))}))});break;default:return null}const C=(0,r.default)(M.default.preview,{[M.default.bubbleIn]:!this.props.msg.isSentByMe,[M.default.bubbleOut]:this.props.msg.isSentByMe}),T=this.state.mode===P?(0,I.jsx)("div",{className:M.default.mediaStateControlsWrapper,children:(0,I.jsx)(g.Play,{})}):null,O=this.state.mode===A?(0,I.jsx)(S.default,{icon:(0,I.jsx)(y.default,{name:"video-pip-large"}),children:p.default.t(1451)}):null;let w,D;if(u&&(0,n.default)(d.default.HOSTNAME).includes(t)){const e=function(e){return N.includes(e)}(t);let s;switch(w=(0,I.jsx)("img",{alt:"",className:(0,r.default)(M.default.thumbnail,{[M.default.youtubeThumbnail]:e,[M.default.noBlur]:e&&f.default.supportsFeature(f.default.F.YOUTUBE_VIDEO_PREVIEW_WITHOUT_BLUR)||i&&!o&&!!this.props.msg.thumbnailHQ}),src:`data:image/jpeg;base64,${u}`}),t){case d.default.HOSTNAME.YOUTUBE:s=(0,I.jsx)(y.default,{name:"logo-youtube"});break;case d.default.HOSTNAME.INSTAGRAM:s=(0,I.jsx)(y.default,{name:"logo-instagram"});break;case d.default.HOSTNAME.FACEBOOK:s=(0,I.jsx)(y.default,{name:"logo-facebook"});break;case d.default.HOSTNAME.LASSOVIDEOS:s=(0,I.jsx)(y.default,{name:"logo-lasso"})}s&&(D=(0,I.jsx)("div",{className:M.default.attribution,children:s}))}else w=(0,I.jsx)("div",{className:M.default.thumbnailPlaceholder});return(0,I.jsxs)("div",{className:C,children:[(0,I.jsxs)("div",{ref:this.setRefThumbnailWrapper,className:M.default.thumbnailWrapper,onClick:_,children:[D,w,T,O]}),(0,I.jsxs)(h.default,{className:a,href:this.props.msg.matchedText,children:[(0,I.jsx)("div",{className:M.default.title,title:this.props.msg.title,children:(0,I.jsx)(c.default,{text:this.props.msg.title})}),e,s]})]})}}O.displayName="VideoLinkPreview";var w=(0,_.default)(O);t.default=w},5197:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(66492)),r=s(67659),o=a(s(76006)),l=a(s(91968)),d=s(85893);function u(e){const t=(0,o.default)(e.msg,["t","thumbnailHQ","asUrl","isSentByMe"]);return(0,i.useEffect)((()=>{const e=t.asUrl;e&&(0,r.hqLinkPreviewDownloadSupported)()&&!(0,r.hqLinkPreviewExpired)(t.t)&&!e.thumbnailHQ&&(0,n.default)({msg:e,isPreload:!1})}),[t]),(0,d.jsx)(l.default,{msg:t.unsafe()})}var c=(0,i.memo)(u);t.default=c},64404:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=(a(s(56720)),a(s(76610))),o=a(s(91952)),l=a(s(75940)),d=(a(s(55454)),a(s(45880))),u=s(63290),c=a(s(2408)),h=s(90672),f=a(s(38125)),p=a(s(42120)),m=a(s(76480)),_=a(s(4231)),g=s(15298),v=a(s(40858)),S=a(s(2966)),C=s(97504),y=a(s(41184)),E=a(s(89135)),b=a(s(76006)),T=a(s(51033)),M=a(s(24064)),x=s(83381),I=s(85893);const P={buttonContainer:{position:"g0rxnol2",display:"p357zi0d",alignItems:"elxb2u3l",minWidth:"llkbrke6",height:"smoo1fur",color:"gtscxtjd",textAlign:"tffp5ko5",cursor:"ajgl1lbb"},statusIcon:{color:"mymavskd",height:"bmot90v7"},statusDone:{color:"a6r0u4sv"},content:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"r15c9g6i",maxHeight:"ruh8h8mp",paddingEnd:"btzf6ewn"}};function A(e){e.stopPropagation(),e.preventDefault()}function N({displayAuthor:e,displayType:t,mediaData:s,msg:a,trusted:N,quotedMsg:O},w){const{mediaStage:D,size:j}=(0,b.default)(s,["mediaStage","size"]),R=(0,b.default)(a,["ack","isGroupMsg","isFailed","isPSA","isSentByMe","senderObj","type"]),L=function(e,t){return(0,n.useMemo)((()=>{const s=t.type===h.OUTWARD_TYPES.IMAGE,a=s?c.default.t(1787):c.default.t(1794);if((0,x.isViewed)(t))return{type:"complete",icon:(0,I.jsx)(S.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:c.default.t(1795),labelClassname:T.default.labelInactive};if((0,x.isExpired)(t)&&!t.isSentByMe)return{type:"unviewed",icon:(0,I.jsx)(S.default,{className:(0,i.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once"}),handleClick:()=>{const e=t.senderObj.displayName,a=s?c.default.t(1783):c.default.t(1784),i=s?c.default.t(1781,{name:e}):c.default.t(1782,{name:e});o.default.openModal((0,I.jsx)(l.default,{onOK:()=>o.default.closeModal(),children:(0,I.jsxs)(u.FlexColumn,{children:[(0,I.jsx)(C.TextHeader,{className:T.default.dialogTitle,theme:"popup-title",children:a}),(0,I.jsx)(C.TextParagraph,{color:"secondary",children:i})]})}))},label:a};switch(e){case h.MEDIA_DATA_STAGE.RESOLVED:case h.MEDIA_DATA_STAGE.PROGRESSIVE_READY:return t.isSentByMe?{type:"complete",icon:(0,I.jsx)(S.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:T.default.labelActive}:{type:"unviewed",icon:(0,I.jsx)(S.default,{className:(0,i.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once"}),handleClick:function(){o.default.mediaViewerModal({msg:(0,g.unproxy)(t.unsafe())})},label:a};case h.MEDIA_DATA_STAGE.FETCHING:return t.isSentByMe?{type:"complete",icon:(0,I.jsx)(S.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:T.default.labelActive}:{type:"unviewed",icon:(0,I.jsx)(M.default,{}),handleClick:e=>{A(e),t.cancelDownload()},label:a};case h.MEDIA_DATA_STAGE.NEED_POKE:return{type:"unviewed",icon:(0,I.jsx)(S.default,{className:(0,i.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-download"}),handleClick:e=>{A(e),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},label:a};case h.MEDIA_DATA_STAGE.UPLOADING:return{type:"complete",icon:(0,I.jsx)(M.default,{onClick:e=>{A(e),t.cancelUpload()}}),label:a,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.NEED_UPLOAD:return{type:"complete",icon:(0,I.jsx)(v.default,{className:(0,i.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-retry",onClick:e=>{A(e),t.resumeUpload()},"aria-label":c.default.t(1553)}),label:c.default.t(1553),labelClassname:T.default.labelRetry};case h.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return{type:"complete",icon:(0,I.jsx)(v.default,{className:(0,i.default)(T.default.nonSpinnerIcon,T.default.accentIcon),name:"view-once-retry",onClick:e=>{A(e),t.resumeRemoteUpload()},"aria-label":c.default.t(1553)}),label:c.default.t(1553),labelClassname:T.default.labelRetry};case h.MEDIA_DATA_STAGE.SENDING:return{type:"complete",icon:(0,I.jsx)(M.default,{}),label:a,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.ERROR_MISSING:return{type:"complete",icon:(0,I.jsx)(S.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:c.default.t(1780),labelClassname:T.default.labelInactive};case h.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case h.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:return __LOG__(4,void 0,new Error,!0)`Unsupported/too large view once media message`,SEND_LOGS("view-once-hook-error"),{type:"complete",icon:(0,I.jsx)(S.default,{className:T.default.nonSpinnerIcon,name:"view-once-viewed"}),label:a,labelClassname:T.default.labelActive};case h.MEDIA_DATA_STAGE.INIT:case h.MEDIA_DATA_STAGE.PREPARING:case h.MEDIA_DATA_STAGE.DECRYPTING:case h.MEDIA_DATA_STAGE.EXISTS:if(!t.isSentByMe)return{type:"unviewed",icon:(0,I.jsx)(M.default,{}),handleClick:A,label:a};case h.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case h.MEDIA_DATA_STAGE.REUPLOADING:return{type:"complete",icon:(0,I.jsx)(S.default,{className:T.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:T.default.labelActive}}}),[e,t])}(D,R);(0,n.useImperativeHandle)(w,(()=>({handleKeyActivation(e){N&&null!=L.handleClick&&L.handleClick(e)}}))),(0,n.useEffect)((()=>{!R.isSentByMe&&(0,x.isUnviewed)(R)&&R.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[R]);const k=a.type===h.OUTWARD_TYPES.IMAGE?c.default.t(60):c.default.t(61);let F;if("complete"===L.type){const{label:t,labelClassname:s,icon:n}=L,o=(0,x.isUnviewed)(a)?k:[t,k].join(" - ");F=(0,I.jsxs)(y.default,{msg:a,displayAuthor:e,children:[null!=O?(0,I.jsx)("div",{className:T.default.quote,children:O}):null,(0,I.jsxs)(u.FlexRow,{className:T.default.labelContainer,align:"center",a8nText:r.default.key("view-once-complete"),"aria-label":o,children:[(0,I.jsx)(u.FlexItem,{xstyle:[P.statusIcon,(0,x.isViewed)(R)&&P.statusDone],grow:0,children:n}),(0,I.jsx)(u.FlexItem,{grow:1,children:(0,I.jsx)(p.default,{className:(0,i.default)(s,T.default.labelText),msg:R.unsafe(),children:t})})]})]})}else{const{handleClick:s,label:i,icon:n}=L,o=D===h.MEDIA_DATA_STAGE.NEED_POKE||D===h.MEDIA_DATA_STAGE.FETCHING?c.default.filesize(j):null;F=(0,I.jsx)(f.default,{displayType:t,hideCaption:!0,hideMeta:!0,msg:a,quotedMsg:O,showAuthor:e,trusted:N,children:(0,I.jsx)(E.default,{a8nText:r.default.key("view-once-unviewed"),xstyle:P.buttonContainer,onClick:N?s:()=>{},"aria-label":k,children:(0,I.jsxs)(d.default,{outgoingMsg:R.isSentByMe,withBorder:!0,children:[(0,I.jsxs)(u.FlexRow,{className:T.default.deepContainerContent,align:"center",children:[(0,I.jsx)(u.FlexItem,{xstyle:P.statusIcon,grow:0,children:n}),(0,I.jsxs)(u.FlexItem,{xstyle:P.content,grow:1,children:[(0,I.jsx)(C.TextHeader,{color:"secondary",level:"3",weight:"medium",size:"15",children:i}),null!=o?(0,I.jsx)(C.TextParagraph,{className:T.default.contentMeta,size:"10",children:o}):null]})]}),(0,I.jsx)("div",{className:T.default.meta,children:(0,I.jsx)(m.default,{msg:a})})]})})})}return(0,I.jsx)("div",{className:(0,i.default)({[T.default.unviewedBubble]:"unviewed"===L.type}),children:F})}var O=(0,n.forwardRef)(N);t.default=O},24064:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({onClick:e}){const[t,s]=(0,u.default)(e),a=null!=e?s:{};return(0,h.jsxs)("div",(0,i.default)((0,i.default)({className:(0,n.default)({[c.default.container]:!0,[c.default.inactive]:null==e}),ref:t,"aria-label":o.default.t(1912)},a),{},{children:[(0,h.jsx)("div",{className:c.default.icon,children:(0,h.jsx)(d.default,{name:"x-soft"})}),(0,h.jsx)(r.FlexRow,{className:c.default.spinner,align:"center",justify:"center",children:(0,h.jsx)(l.default,{color:"accent",size:18,stroke:5})})]}))};var i=a(s(81109)),n=a(s(94184)),r=s(63290),o=a(s(2408)),l=a(s(46714)),d=a(s(2966)),u=a(s(82275)),c=a(s(93831)),h=s(85893)},61211:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainer=function(e){const t=(0,n.default)(J.default.msgContainer,{"message-out":e.isSentByMe,"message-in":!e.isSentByMe}),s=(0,n.default)(J.default.message,J.default.hasTail,"tail-override-left");return(0,se.jsx)("div",{className:t,children:(0,se.jsx)("div",{className:s,children:(0,se.jsxs)("div",{className:J.default.messageBackground,children:[(0,se.jsx)("div",{className:J.default.tail,children:(0,se.jsx)(q.default,{name:ue(ae)})}),e.children]})})})},t.getTailName=ue,t.SystemBubble=t.default=t.Wrapper=void 0;var n=i(s(94184)),r=i(s(7900)),o=s(67294),l=i(s(76610)),d=s(80423),u=s(2084),c=i(s(51994)),h=i(s(84758)),f=i(s(91952)),p=i(s(52646)),m=i(s(75940)),_=i(s(55454)),g=i(s(7235)),v=s(73554),S=a(s(47452)),C=i(s(34295)),y=i(s(97227)),E=s(62238),b=i(s(40854)),T=i(s(47193)),M=i(s(85033)),x=s(78615),I=i(s(96889)),P=i(s(39e3)),A=s(78471),N=i(s(42229)),O=s(31140),w=i(s(2408)),D=s(50256),j=i(s(71681)),R=i(s(22555)),L=i(s(87459)),k=s(51435),F=i(s(18416)),B=i(s(62015)),G=i(s(40994)),U=s(74818),V=i(s(59594)),H=i(s(79465)),W=i(s(65565)),Y=i(s(79485)),K=s(15298),q=i(s(2966)),z=i(s(889)),$=i(s(63477)),Q=i(s(68062)),X=i(s(82669)),Z=i(s(9599)),J=i(s(33947)),ee=s(66893),te=i(s(12950)),se=s(85893);const ae=!1,ie=!0;class ne extends o.PureComponent{getContainerElement(){return(0,r.default)(this._refContainer,"this._refContainer")}constructor(e){super(e),this.setRefMsgComponent=e=>this.refMsgComponent=e,this.setRefContext=e=>this.refContext=e,this._refTail=(0,o.createRef)(),this.setRefBubble=e=>this.refBubble=e,this._sizeMismatch=!1,this._stickerRef=(0,o.createRef)(),this._setRefContainer=e=>{this._refContainer=e},this.resend=()=>{this.props.msg.resend().catch((function(e){__LOG__(2)`wrapper:resend failure: ${e}`}))},this._openWebSearchFlow=()=>{const e=this.props.msg;f.default.openModal((0,se.jsx)(Z.default,{messageText:e.body}),{transition:"modal-flow"})},this._openEphemeralInfoPopup=()=>{const e=this.props.msg.ephemeralDuration||0;f.default.openModal((0,se.jsx)(m.default,{onOK:()=>{f.default.closeModal()},children:(0,O.getDisappearingMessageOutOfSyncInfoString)(e)}),{transition:"modal-flow"})},this._openBizPrivacyInfoPopup=()=>{const e=this.props.msg,{bizPrivacyStatus:t}=e;null!=t&&f.default.openModal((0,se.jsx)(m.default,{onOK:()=>{f.default.closeModal()},children:(0,u.getBizPrivacyInfoString)(t)}),{transition:"modal-flow"})},this._onMouseEnter=e=>{e.buttons||this.state.hover||!this._hasContextMenu()||this.setState({hover:!0})},this._onMouseLeave=()=>{this._hasContextMenu()&&this._unsetHover()},this._unsetHover=()=>{this.state.hover&&this.setState({hover:!1})},this._handleMouseContextMenu=e=>{e.stopPropagation()},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{if(t&&this.state.contextMenu)return void this.setState({contextMenu:null});const s=t?this._getMenuRefContext():e,a=(0,K.unproxy)(this.props.msg),i=[];!a.isSentByMe||this.props.displayType===_.default.DISP_TYPE.MSG_INFO||a.asRevoked||a.isMdHistoryMsg||i.push((0,se.jsx)(S.default,{a8n:"mi-msg-info",action:()=>{this.openInfoDrawer()},children:w.default.t(1235)},"info")),a.canReply()&&i.push((0,se.jsx)(S.default,{a8n:"mi-msg-reply",action:()=>{this.onReplyMessage()},children:w.default.t(1521)},"reply")),(a.canPrivateReply()||a.canPrivateReplyInRestrictedGrp())&&i.push((0,se.jsx)(S.default,{a8n:"mi-msg-reply",action:()=>{this.onPrivateReplyMessage()},children:w.default.t(1456)},"private_reply")),a.isDownloadable()&&i.push((0,se.jsx)(S.default,{a8n:"mi-msg-download",action:()=>{this.onDownload()},children:w.default.t(1908)},"download")),a.canForward()&&i.push((0,se.jsx)(S.default,{a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)},children:w.default.t(909)},"forward")),(0,x.canEditLabelAssociation)()&&!a.asRevoked&&i.push((0,se.jsx)(S.default,{a8n:"mi-edit-label",action:()=>{this._openEditLabelFlow()},children:w.default.t(801)},"editLabel")),a.canStar()&&(a.star?i.push((0,se.jsx)(S.default,{a8n:"mi-msg-unstar",action:()=>{this.onUnstarMessage()},children:w.default.t(1722)},"star")):i.push((0,se.jsx)(S.default,{a8n:"mi-msg-star",action:()=>{this.onStarMessage()},children:w.default.t(1639)},"star"))),i.push((0,se.jsx)(S.default,{a8n:"mi-msg-delete",action:()=>{this.onDeleteMessage()},children:w.default.t(754)},"delete")),a.isGroupMsg&&a.author&&!a.isSentByMe&&i.push((0,se.jsx)(S.default,{a8n:"mi-msg-author",action:()=>{this.openContactChat()},children:w.default.t(1231,{author:a.displayName()})},"author")),this.setState({contextMenu:{menu:i,anchor:s,theme:S.ThemeOptions.COMPACT,autoFocus:this._isKeyboardUser()}})},this.openContextMenu=()=>{this._hasContextMenu()&&(this.state.hover?this.onMenu(void 0,!0):this.setState({hover:!0},(()=>{this.onMenu(void 0,!0)})))},this.closeContextMenu=()=>{const e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this.onSelectClick=e=>{e&&e.stopPropagation();const t=this.props.onMessageSelect;t?t((0,K.unproxy)(this.props.msg),!this.state.selected,e):(__LOG__(4,void 0,new Error,!0)`no onMessageSelect`,SEND_LOGS("wrapper-onSelectClick"))},this.onDoubleClick=e=>{const{displayType:t}=this.props,s=(0,K.unproxy)(this.props.msg);!s.canReply()||this.props.selectable||t!==_.default.DISP_TYPE.CONVERSATION||this.state.contextMenu||e.target instanceof HTMLElement&&((e,t)=>{let s=t;for(;s;){if(s===e)return!0;s=s.parentNode}return!1})(this.refBubble,e.target)||(s.chat.composeQuotedMsg=s,f.default.focusChatTextInput(s.chat),this.highlight())},this.onResize=()=>{this.forceUpdate()},this._handleKeyActivation=e=>{var t,s;null===(t=this.getMsgComponentRef())||void 0===t||null===(s=t.handleKeyActivation)||void 0===s||s.call(t,e)},this.state={canQuickForward:e.msg.canQuickForward(),contextMenu:null,hover:!1,highlighting:!1,selected:!!e.selectedMessages&&e.selectedMessages.isSelected((0,K.unproxy)(e.msg)),isRevoked:Boolean(e.msg.asRevoked),isViewOncePeeking:!1};const t=this.props.displayType===_.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===_.default.DISP_TYPE.GALLERY||this.props.displayType===_.default.DISP_TYPE.MSG_INFO||this.props.displayType===_.default.DISP_TYPE.CONTACT_CARD;this._sizeMismatch=t&&this.props.msg.isGif}componentDidMount(){this._sizeMismatch&&this.refBubble&&(this.maxWidth=this.refBubble.offsetWidth,this.forceUpdate(),window.addEventListener("resize",this.onResize)),this.props.listeners.add(this.props.msg,"change",(()=>{const e=this.props.msg.canQuickForward();e!==this.state.canQuickForward&&this.setState({canQuickForward:e});const t=Boolean(this.props.msg.asRevoked);t!==this.state.isRevoked&&this.setState({isRevoked:t})})),this.props.listeners.add(document,"selectionchange",(()=>{var e,t;""!==(null!==(e=null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&void 0!==e?e:"")&&this._unsetHover()})),this.props.listeners.add(f.default,"media_viewer_modal",this._unsetHover)}componentWillUnmount(){this._sizeMismatch&&window.removeEventListener("resize",this.onResize)}componentDidUpdate(e,t){this.state.contextMenu&&t.isRevoked!==this.state.isRevoked&&this.closeContextMenu()}scrollMsg(e,t){this._refContainer&&(0,v.scrollAt)(this._refContainer,void 0,t).then(e)}highlight(){const e=this.refBubble,t=this._refTail.current;e&&(this.setState({highlighting:!0}),b.default.indicateFocus(e,J.default.highlightAnimation),b.default.indicateFocus(t,J.default.highlightAnimation),this.props.listeners.addOnce(e,"animationend",(()=>{this.setState({highlighting:!1})})),this.props.isFocusable&&this.focus({preventScroll:!0}))}highlightMention(){this._refContainer&&b.default.indicateFocus(this._refContainer,J.default.highlightMentionAnimation)}openForwardFlow(e){const t=this.props.msg;let s;t.type===_.default.MSG_TYPE.CIPHERTEXT?s=w.default.t(886):t.asRevoked?s=w.default.t(887):t.isUnsentMedia&&(s=w.default.t(885,{_plural:1})),s?f.default.openModal((0,se.jsx)(m.default,{title:w.default.t(888),onOK:()=>f.default.closeModal(),okText:w.default.t(2085),children:s})):e&&this.props.displayType===_.default.DISP_TYPE.CONVERSATION?this.onSelectClick():f.default.openModal((0,se.jsx)(M.default,{msgs:[(0,K.unproxy)(t)]}),{transition:"modal-flow"})}_openEditLabelFlow(){this.props.displayType===_.default.DISP_TYPE.CONVERSATION?this.onSelectClick():f.default.openModal((0,se.jsx)(R.default,{modelsToUpdate:[(0,K.unproxy)(this.props.msg)]}))}openInfoDrawer(){f.default.msgInfoDrawer((0,K.unproxy)(this.props.msg))}openContactChat(){(0,E.findChat)(this.props.msg.author).then((function(e){f.default.openChatFromUnread(e).then((t=>{t&&f.default.focusChatTextInput(e)}))}))}onDeleteMessage(){const{msg:e,isMsgVisible:t}=this.props;f.default.openModal((0,se.jsx)(g.default,{chat:e.chat,msgList:[e].map(K.unproxy),deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))}onReplyMessage(){const e=(0,K.unproxy)(this.props.msg),t=e.chat;t.composeQuotedMsg=e,t===h.default.toArray().find((e=>e.active))?f.default.focusChatTextInput(t):f.default.openChatBottom(t)}onPrivateReplyMessage(){const e=(0,K.unproxy)(this.props.msg);(0,H.default)(e)}onDownload(){y.default.initDownload((0,K.unproxy)(this.props.msg))}onStarMessage(){const e=(0,K.unproxy)(this.props.msg);f.default.sendStarMsgs(e.chat,[e])}onUnstarMessage(){const e=(0,K.unproxy)(this.props.msg);f.default.sendUnstarMsgs(e.chat,[e])}_isKeyboardUser(){return this.context}getMsgComponent(e){const{msg:t,position:s,displayType:a,isMsgVisible:i,getSequentialMsg:n}=this.props;return(0,se.jsx)(C.default,{reason:"msg",children:(0,se.jsx)(I.default.Provider,{value:t.chat.groupMetadata,children:(0,se.jsx)(B.default,{chat:t.chat,displayAuthor:e,displayType:a,hover:this.state.hover,isMsgVisible:i,maxWidth:this.maxWidth,msg:t,ref:this.setRefMsgComponent,position:s,getSequentialMsg:n,onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick,forwardStickerRef:this._stickerRef})})})}getMsgComponentRef(){return this.refMsgComponent&&this.refMsgComponent.getRef()}onSelectChange(e){this.state.selected!==e&&this.setState({selected:e})}focus(e){this._refContainer&&T.default.focus(this._refContainer,e)}_hasContextMenu(){const{msg:e,displayType:t}=this.props;return!e.isNotification&&t!==_.default.DISP_TYPE.GALLERY&&t!==_.default.DISP_TYPE.CONTACT_CARD}_shouldShowMenuButton(){return this._hasContextMenu()&&!this.props.selectable&&(this.state.hover&&!this.state.highlighting||!!this.props.current||!!this.state.contextMenu)}_getHotkeysHandlers(){const{msg:e}=this.props;let t,s;return"ptt"===e.type&&W.default.pttPlaybackSpeedEnabled&&(t=t=>{t.preventDefault(),t.stopPropagation(),V.default.increasePlaybackRateFor(e.id)},s=t=>{t.preventDefault(),t.stopPropagation(),V.default.decreasePlaybackRateFor(e.id)}),{enter:this._handleKeyActivation,space:this._handleKeyActivation,"shift+>":t,"shift+<":s}}render(){const{msg:e,position:t,displayType:s,selectedMessages:a,isFocusable:i}=this.props,r=s===_.default.DISP_TYPE.CONVERSATION,o=function({msg:e,position:t,displayType:s}){if(e.isSentByMe||!e.isGroupMsg)return!1;if(e.type===_.default.MSG_TYPE.CHAT)return!(s===_.default.DISP_TYPE.STARRED_MSGS||!e.quotedMsg)||(t!==k.MsgPosition.MID&&t!==k.MsgPosition.END||(s===_.default.DISP_TYPE.GALLERY||(!!e.linkPreview||!!(0,A.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline))));return!0}({msg:e,position:t,displayType:s});let u;this._shouldShowMenuButton()&&(u=(0,se.jsx)(L.default,{msg:e,hasAuthor:o,position:t,ref:this.setRefContext,onToggle:e=>{this.onMenu(e)}},"icon-context"));let h=null;if(!e.isNotification&&this.props.selectable){const e=s===_.default.DISP_TYPE.GALLERY?"gallery":null;h=(0,se.jsx)(F.default,{checked:!!this.state.selected,onClick:this.onSelectClick,msgTheme:e})}let f=null;var m;e.type===_.default.MSG_TYPE.STICKER&&this.props.selectable&&(f=(0,se.jsx)("span",{children:(0,se.jsx)("div",{className:J.default.stickerWrapperContainer,onMouseEnter:null===(m=this._stickerRef.current)||void 0===m?void 0:m.startAnimation,onClick:this.onSelectClick})}));let g=!1;if(e.type===_.default.MSG_TYPE.CHAT){const t=p.default.match(e.body);g=1===t.length&&t[0][4][0].length===e.body.length}const v=e.chat&&e.chat.isPSA,S=!v&&!e.isNotification&&!this.props.tailOverride&&(t===k.MsgPosition.FRONT||t===k.MsgPosition.SINGLE)||s===_.default.DISP_TYPE.MSG_INFO||this.props.tailOverride,C=de(e)&&(!o||e.isSentByMe||!e.isGroupMsg&&!e.quotedMsg)&&(r&&(t===k.MsgPosition.FRONT||t===k.MsgPosition.SINGLE)||!r),y=!this.props.selectable&&(s===_.default.DISP_TYPE.CONVERSATION||s===_.default.DISP_TYPE.MSG_INFO||s===_.default.DISP_TYPE.STARRED_MSGS),E=e.ephemeralOutOfSync&&!e.isNotification&&!e.isFutureproof,b=y&&this.state.canQuickForward,T=y&&e.isFrequentlyForwarded&&e.type===_.default.MSG_TYPE.CHAT,M=null!=e.bizPrivacyStatus,x=(0,n.default)(J.default.msg,{[J.default.msgContinuation]:!(t!==k.MsgPosition.FRONT&&t!==k.MsgPosition.MID||e.isFromTemplate&&e.isQuickReply),[J.default.msgPSA]:s!==_.default.DISP_TYPE.STARRED_MSGS&&v,[J.default.msgSystem]:e.isNotification,[J.default.msgGallery]:s===_.default.DISP_TYPE.STARRED_MSGS||s===_.default.DISP_TYPE.CONTACT_CARD||s===_.default.DISP_TYPE.GALLERY,[J.default.msgInfo]:s===_.default.DISP_TYPE.MSG_INFO,[J.default.msgWithQuickAction]:M||E||b||T,"message-out":!e.isNotification&&e.isSentByMe||s===_.default.DISP_TYPE.MSG_INFO,"message-in":!e.isNotification&&!e.isSentByMe,[D.LIST_FOCUSABLE_ITEM_CLASS_NAME]:i}),I=(0,n.default)(J.default.message,function(e){if(e.isViewOnce)return J.default.messageChat;switch(e.type){case _.default.MSG_TYPE.NOTIFICATION_TEMPLATE:return oe.includes(e.subtype)?J.default.messageNonE2ENotification:e.isBizNotification?J.default.messageBizNotification:void 0;case _.default.MSG_TYPE.E2E_NOTIFICATION:return"encrypt"===e.subtype&&e.chat.isSupportGroupOrSupportAdmin()?J.default.messageNonE2ENotification:J.default.messageE2ENotification;case _.default.MSG_TYPE.GROUPS_V4_INVITE:return J.default.messageChat;case _.default.MSG_TYPE.CHAT:return(te.default.supportsFeature(te.default.F.MD_BACKEND)&&e.matchedText?(0,A.isParsableYouTubeVideoUrl)(e.richPreviewType,e.matchedText,e.doNotPlayInline):(0,A.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline))?J.default.messageVideoLinkPreview:J.default.messageChat;case _.default.MSG_TYPE.LOCATION:return e.isLive?J.default.messageLiveLocation:J.default.messageLocation;case _.default.MSG_TYPE.VCARD:return J.default.messageVcard;case _.default.MSG_TYPE.CIPHERTEXT:return(0,n.default)(J.default.messageChat,J.default.messagePlaceholder);case _.default.MSG_TYPE.MULTI_VCARD:return J.default.messageMultiVcard;case _.default.MSG_TYPE.IMAGE:return J.default.messageImage;case _.default.MSG_TYPE.PRODUCT:return J.default.messageProduct;case _.default.MSG_TYPE.STICKER:return de(e)?J.default.messageTransparent:J.default.messageSticker;case _.default.MSG_TYPE.VIDEO:return e.mediaData.isGif?J.default.messageGif:J.default.messageVideo;case _.default.MSG_TYPE.AUDIO:return J.default.messageAudio;case _.default.MSG_TYPE.PTT:return J.default.messagePTT;case _.default.MSG_TYPE.DOCUMENT:return J.default.messageDocument;case _.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:case _.default.MSG_TYPE.BUTTONS_RESPONSE:case _.default.MSG_TYPE.LIST_RESPONSE:return J.default.messageChat;case _.default.MSG_TYPE.ORDER:return J.default.messageProduct;case _.default.MSG_TYPE.LIST:if((0,U.listMsgCanRender)(e))return J.default.messageList;case _.default.MSG_TYPE.UNKNOWN:return(0,n.default)(J.default.messageChat,J.default.messagePlaceholder);default:return}}(e),{[J.default.messageSystem]:e.isNotification,[J.default.messageCode]:g,[J.default.hasTail]:S,"tail-override-left":"left"===this.props.tailOverride,"tail-override-right":"right"===this.props.tailOverride,[J.default.tailOverrideHide]:C}),N=(0,n.default)({[J.default.messageBackground]:!de(e),[J.default.hasBorderBox]:!e.isNotification&&!de(e),[J.default.hasUrlCallButtons]:e.isFromTemplate&&e.hasTemplateButtons&&!e.isQuickReply});if(this._sizeMismatch&&!this.refBubble)return(0,se.jsx)("div",{className:J.default.placeholder,ref:this.setRefBubble});let O,j,R,B,V,H;O=this.state.contextMenu?"none":e.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(j=(0,se.jsx)($.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,se.jsx)(Q.default,{contextMenu:this.state.contextMenu})})),this.props.isFocusedMsg&&(R=(0,se.jsx)(ee.WhileFocusedListener,{parent:this})),a&&(B=(0,se.jsx)(ee.SelectionListener,{parent:this,msgId:e.id.toString(),selectedMessages:a})),E?V=(0,se.jsx)("div",{className:J.default.quickActionButton,onClick:this._openEphemeralInfoPopup,role:"button",children:(0,se.jsx)(q.default,{name:"info-alt"})}):M?V=(0,se.jsx)("div",{className:J.default.quickActionButton,onClick:this._openBizPrivacyInfoPopup,role:"button",children:(0,se.jsx)(q.default,{name:"info-alt"})}):b?V=(0,se.jsx)("div",{className:J.default.quickActionButton,onClick:()=>this.openForwardFlow(!1),role:"button",children:(0,se.jsx)(q.default,{name:"forward-chat"})}):T&&(V=(0,se.jsx)("div",{className:J.default.quickActionButton,onClick:this._openWebSearchFlow,role:"button",children:(0,se.jsx)(q.default,{name:"search"})})),e.mediaData&&(H=(0,se.jsx)(ee.MediaListener,{parent:this,mediaData:e.mediaData}));let W,Y,K,Z="msg-container";if(e.isNotification&&(Z="msg-notification-container"),S){let t;t="left"===this.props.tailOverride?ue(ae):"right"===this.props.tailOverride?ue(ie):ue(e.isSentByMe),W=(0,se.jsx)(q.default,{name:t,className:J.default.tail,containerRef:this._refTail})}e.isFromTemplate&&e.hasTemplateButtons?Y=(0,se.jsx)(z.default,{msg:e,chat:e.chat}):null!=e.dynamicReplyButtons&&e.dynamicReplyButtons.length>0&&s!==_.default.DISP_TYPE.STARRED_MSGS&&(Y=(0,se.jsx)(c.default,{msg:e})),e.isNotification||t===k.MsgPosition.MID?K=null:e.isSentByMe?K=(0,se.jsx)(d.InvisibleLabel,{children:w.default.t(23)}):e.isGroupMsg||(K=(0,se.jsx)(d.InvisibleLabel,{children:w.default.t(22,{author:e.displayName()})}));let ne=null;return e.isEphemeral&&(ne=(0,se.jsx)(d.InvisibleLabel,{children:w.default.t(11)})),(0,se.jsxs)(P.default,{className:x,"data-id":e.id.toString(),handlers:this._getHotkeysHandlers(),onDoubleClick:this.onDoubleClick,onRef:this._setRefContainer,tabIndex:-1,children:[(0,se.jsx)(X.default,{transitionName:"delay-leave",children:h}),(0,se.jsxs)("div",{"data-a8n":l.default.key(Z),className:I,onContextMenu:this._handleMouseContextMenu,onMouseOver:this._onMouseEnter,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,children:[W,(0,se.jsx)(G.default,{displayType:s,msg:e}),f,(0,se.jsxs)("div",{className:N,ref:this.setRefBubble,children:[K,this.getMsgComponent(o),(0,se.jsx)(X.default,{transitionName:O,children:u})]}),V,Y,ne]}),j,R,B,H]})}}t.Wrapper=ne,ne.defaultProps={displayType:_.default.DISP_TYPE.CONVERSATION},ne.CONCERNS={msg:["asMms","asRevoked","author","body","chat","dir","ephemeralDuration","ephemeralOutOfSync","id","isBizNotification","isEphemeral","isFailed","isFrequentlyForwarded","isFutureproof","isGif","isGroupMsg","isLive","isMedia","isNotification","isRTL","isSentByMe","isUnsentMedia","isViewOnce","linkPreview","list","mediaData","matchedText","quotedMsg","richPreviewType","sender","star","subtype","type","title","hasTemplateButtons","isQuickReply","isFromTemplate","doNotPlayInline","ctwaContext","bizPrivacyStatus","verifiedBizName","templateParams","dynamicReplyButtons","replyButtons"]},ne.contextType=N.default,ne.displayName="Wrapper";const re=(0,j.default)((0,Y.default)(ne,ne.CONCERNS));t.default=class extends re{focus(e){this.getComponent().focus(e)}openContextMenu(){this.getComponent().openContextMenu()}getContainerElement(){return this.getComponent().getContainerElement()}getMsgComponentRef(){return this.getComponent().getMsgComponentRef()}};const oe=["biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"];const le=(0,o.forwardRef)((function(e,t){const s=e.theme?J.default[e.theme]:null,a=(0,n.default)(J.default.msg,J.default.msgSystem,s,{[D.LIST_FOCUSABLE_ITEM_CLASS_NAME]:e.isFocusable}),i=(0,n.default)(J.default.message,J.default.messageSystem,{[J.default.messageHidden]:e.hidden});return(0,se.jsx)("div",{className:a,tabIndex:-1,ref:t,children:(0,se.jsx)("div",{className:i,children:e.children})})}));function de(e){return e.type===_.default.MSG_TYPE.STICKER&&!e.quotedMsg&&!e.ctwaContext}function ue(e){return e?w.default.isRTL()?"tail-in":"tail-out":w.default.isRTL()?"tail-out":"tail-in"}t.SystemBubble=le},55741:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(6479)),n=a(s(94184)),r=a(s(7900)),o=s(67294),l=a(s(96774)),d=a(s(23719)),u=a(s(12959)),c=a(s(91952)),h=a(s(55454)),f=a(s(69258)),p=a(s(44456)),m=a(s(2408)),_=a(s(50256)),g=a(s(71681)),v=a(s(55170)),S=s(51435),C=a(s(45472)),y=a(s(83486)),E=a(s(61211)),b=s(85893);class T extends o.Component{constructor(e){super(e),this._renderedMsgs={},this._renderedDateMarkers={},this._renderedAlbums={},this._renderedMsgToAlbum={},this._refUnread=(0,o.createRef)(),this._getRefUnread=()=>this._refUnread.current,this._handleRefreshMessages=()=>{this.forceUpdate()},this._handleOpenMediaViewerForAlbumMedia=e=>{const t=this._renderedMsgToAlbum[e.id.toString()];if(!t)return;if(t.isGroupedSticker())return;const s=t.props.msgs,a=new Set((s||[]).map((e=>e.id.toString()))),i=()=>{const s=t.refAlbumComponents[e.id.toString()];return null==s?void 0:s.getContainerElement()};this._renderedMsgToAlbum[e.id.toString()]&&c.default.mediaViewerModal({msg:e,getZoomNode:i,highlightedMsgIds:a})},this.handleMsgKeyChange=({newKey:e,oldKey:t})=>{const s=e.toString(),a=t.toString(),i=this._renderedMsgs[a];i&&(delete this._renderedMsgs[a],this._renderedMsgs[s]=i)},this._handleMsgRendered=(e,t)=>{e?this._renderedMsgs[t]=e:delete this._renderedMsgs[t]},this._rowRenderers={msg:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(((e,t,s,a)=>{const i=this.props;let n;n=a&&!s?S.MsgPosition.FRONT:a&&s?S.MsgPosition.MID:!a&&s?S.MsgPosition.END:S.MsgPosition.SINGLE;const r=e.type===h.default.MSG_TYPE.IMAGE||e.type===h.default.MSG_TYPE.VIDEO||e.type===h.default.MSG_TYPE.AUDIO;return(0,b.jsx)(E.default,{ref:t=>{this._handleMsgRendered(t,e.id.toString())},msg:e.unsafe(),displayType:h.default.DISP_TYPE.CONVERSATION,isMsgVisible:r?i.isMsgVisible:()=>{},selectable:i.selectable,selectedMessages:i.selectedMessages,onMessageSelect:i.onMessageSelect,position:n,isFocusedMsg:t,getSequentialMsg:this.props.getSequentialMsg,isFocusable:!0},"msg-"+e.id.toString())})),album:(e,t,s,a,i,n)=>{const r=this.props;let o;return o=a&&!s?S.MsgPosition.FRONT:a&&s?S.MsgPosition.MID:!a&&s?S.MsgPosition.END:S.MsgPosition.SINGLE,(0,b.jsx)(d.default,{msgs:e,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((s=>{this._handleAlbumRendered(s,t,e)})),position:o,isMsgVisible:r.isMsgVisible,selectable:r.selectable,selectedMessages:r.selectedMessages,onMessageSelect:r.onMessageSelect,albumId:t,isFocusedAlbum:i,focusedMsgIndex:n,isFocusable:!0},"album-"+t)},date:(e,t)=>{const{isLoadingEarlierMsgs:s}=this.props;return(0,b.jsx)(f.default,{ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._handleDateMarkerRendered(t,e)})),timestamp:e.t,isFocusable:!s||0!==t},"msg-"+e.id.toString()+"-date")},unread:()=>(0,b.jsx)(y.default,{count:this.props.unreadCount,textContainerRef:this._refUnread},"msg-unread")},this._openMsgContextMenu=e=>{if(e.target instanceof HTMLElement){var t,s;const a=null===(t=e.target.dataset)||void 0===t?void 0:t.id,i=this._renderedMsgs[a]||this._renderedAlbums[a];null==i||null===(s=i.openContextMenu)||void 0===s||s.call(i)}},this._handleBeforeEnd=()=>c.default.openChatBottom(this.props.chat).then((()=>{}));const{msgs:t}=e;this._latestMsgWhenChatOpen=t.length>0?t[t.length-1]:null}shouldComponentUpdate(e){const{msgs:t}=e,s=(0,i.default)(e,["msgs"]),a=this.props,{msgs:n}=a,r=(0,i.default)(a,["msgs"]);return!(0,l.default)(s,r)||!(0,u.default)(t,n)}getSnapshotBeforeUpdate(){var e;const t=this.props.getScrollContainer(),s=this.props.msgs.find((e=>this._renderedMsgs.hasOwnProperty(e.id)));if(null==s)return null;const a=s.id.toString();return{commonMessageId:a,commonMessageTop:(0,r.default)(null===(e=this.getMsgWrapperRef(a))||void 0===e?void 0:e.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()").offsetTop-t.scrollTop}}componentDidMount(){this.props.listeners.add(C.default,"change:msgKey",this.handleMsgKeyChange),this.props.listeners.add(c.default,"refresh_messages",this._handleRefreshMessages),this.props.listeners.add(c.default,"open_media_viewer_for_album_media",this._handleOpenMediaViewerForAlbumMedia)}componentDidUpdate(e,t,s){const a=this.props.getScrollContainer();if(null!=s){var i;const{commonMessageId:e,commonMessageTop:t}=s,n=(0,r.default)(null===(i=this.getMsgWrapperRef(e))||void 0===i?void 0:i.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()");a.scrollTop=n.offsetTop-t}}getMsgVisibility(e){const t=this.props.getScrollContainer(),s=t.scrollTop,a=s+t.clientHeight,i=null==e?void 0:e.getContainerElement();return i?i.offsetTop+i.clientHeight<=s?{visibility:h.default.VISIBILITY.ABOVE,offset:i.offsetTop-s}:i.offsetTop>=a?{visibility:h.default.VISIBILITY.BELOW,offset:i.offsetTop-s}:{visibility:h.default.VISIBILITY.VISIBLE,offset:i.offsetTop-s}:(__LOG__(3)`getMsgVisibility on invalid ref: ${e}`,{visibility:h.default.VISIBILITY.VISIBLE,offset:0})}getMsgWrapperRef(e){return this._renderedMsgs[e]||this._renderedMsgToAlbum[e]}getMsgComponentRef(e){return this._renderedMsgs[e]?this._renderedMsgs[e].getMsgComponentRef():this._renderedMsgToAlbum[e]?this._renderedMsgToAlbum[e].refAlbumComponents[e]&&this._renderedMsgToAlbum[e].refAlbumComponents[e].getRef():void 0}getDateMarkerRef(e){return this._renderedDateMarkers[e]}_handleDateMarkerRendered(e,t){t?this._renderedDateMarkers[e]=t:delete this._renderedDateMarkers[e]}getRenderedDateMarkers(){return this._renderedDateMarkers}_handleAlbumRendered(e,t,s){e?(this._renderedAlbums[t]=e,s.forEach((t=>{this._renderedMsgToAlbum[t.id.toString()]=e}))):delete this._renderedAlbums[t]}render(){var e,t;const{msgs:s,focusedMsgCtx:a,unreadCount:i}=this.props;let r,o;a&&(r=a.msg,a.isUnreadDivider&&i>0&&(o=a.msg));const l=(0,n.default)(v.default.messageList,{[v.default.messageListSelectable]:this.props.selectable}),d={[`${m.default.LR("right","left")}`]:this._openMsgContextMenu},u=m.default.LR(m.default.t(20),m.default.t(21));return(0,b.jsx)(_.default,{dataTab:h.default.TAB_ORDERS.MESSAGE_LIST,className:l,getPriorityFocusItem:this._getRefUnread,onBeforeEnd:this._handleBeforeEnd,handlers:d,role:"region","aria-label":u,children:(0,p.default)(this._rowRenderers,s,null===(e=r)||void 0===e?void 0:e.safe(),null===(t=o)||void 0===t?void 0:t.safe(),i,this._latestMsgWhenChatOpen)})}}T.displayName="MessageList";const M=(0,g.default)(T);t.default=class extends M{getDateMarkerRef(e){return this.getComponent().getDateMarkerRef(e)}getMsgComponentRef(e){return this.getComponent().getMsgComponentRef(e)}getMsgWrapperRef(e){return this.getComponent().getMsgWrapperRef(e)}getMsgVisibility(e){return this.getComponent().getMsgVisibility(e)}getRenderedDateMarkers(){return this.getComponent().getRenderedDateMarkers()}}},96196:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,onClick:s,theme:a}=e,{thumbnail:i,isSentByMe:r}=t;let o;i&&(o=(0,h.jsx)("div",{className:d.default.media,style:{backgroundImage:`url("data:image/jpeg;base64,${i}")`}}));const l=(0,n.default)(d.default.preview,{[d.default.bubbleIn]:!r&&"quoted"!==a,[d.default.bubbleOut]:r||"quoted"===a,[d.default.quoted]:"quoted"===a});return(0,h.jsxs)("div",{className:l,onClick:s,children:[o,(0,h.jsxs)("div",{className:d.default.body,children:[(0,h.jsx)(f,{msg:t}),(0,h.jsx)(p,{msg:t})]})]})},t.OrderTitle=f,t.OrderDescription=p;var n=i(s(94184)),r=a(s(61447)),o=i(s(85051)),l=i(s(2408)),d=i(s(6241)),u=i(s(65565)),c=i(s(2966)),h=s(85893);function f(e){const{msg:t}=e;let s;if(u.default.webCartV11OrderMessageChanges){const e=l.default.t(1092,{count:t.itemCount||0,_plural:t.itemCount||0});s=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.default,{className:d.default.titleIcon,name:"shopping-cart"}),(0,h.jsx)(o.default,{text:e})]})}else s=(0,h.jsx)(o.default,{text:t.orderTitle});return(0,h.jsx)("div",{className:d.default.title,children:s})}function p(e){const{msg:t,showMessage:s}=e,{totalAmount1000:a,totalCurrencyCode:i,itemCount:n}=t;let f=null;if(u.default.webCartV11OrderMessageChanges&&null!=a&&null!=i&&""!==i){const e=l.default.t(1428,{total:r.formatAmount1000(i,a)});f=(0,h.jsx)(o.default,{text:e})}else if(!u.default.webCartV11OrderMessageChanges){const e=l.default.t(1092,{count:n||0,_plural:n||0});f=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.default,{className:d.default.descriptionIcon,name:"shopping-cart"}),(0,h.jsx)(o.default,{text:e})]})}const p=!0===s?(0,h.jsx)(o.default,{text:t.message}):null;return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:d.default.description,children:f}),p]})}},65330:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,onClick:t}){const{list:s,isSentByMe:a,dir:f,productListHeaderImage:p}=(0,u.default)(e,["list","isSentByMe","dir","productListHeaderImage"]),[m,_]=(0,c.default)(t);if(null==s)return null;const g=null!=p?(0,h.jsx)("div",{alt:"",className:d.default.media,style:{backgroundImage:`url(${(0,l.convertToDataURI)(p)})`}}):null,v=(0,h.jsx)("div",{className:d.default.title,children:(0,h.jsx)(r.default,{text:s.title,ellipsify:!0})}),S=o.default.t(1092,{count:e.productListItemCount||0,_plural:e.productListItemCount||0}),C=(0,h.jsx)(r.default,{text:S,direction:f,ellipsify:!0}),y=(0,n.default)(d.default.preview,{[d.default.bubbleOut]:a});return(0,h.jsxs)("div",(0,i.default)((0,i.default)({},_),{},{className:y,ref:m,children:[g,(0,h.jsxs)("div",{className:d.default.body,children:[v,(0,h.jsx)("div",{className:d.default.description,children:C})]})]}))};var i=a(s(81109)),n=a(s(94184)),r=a(s(85051)),o=a(s(2408)),l=s(41482),d=a(s(84772)),u=a(s(76006)),c=a(s(82275)),h=s(85893)},36486:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PttPlayPauseButton=t.PttStopButton=t.PttCancelButton=t.PttSendButton=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(7410)),l=a(s(55454)),d=a(s(47193)),u=a(s(36251)),c=a(s(2408)),h=a(s(91619)),f=s(85893);const{KEYBOARD_EVENT_KEY_VALUE:p}=u.default,m=(0,n.forwardRef)(((e,t)=>{const{disabled:s,confirmOnMouseUp:a,onConfirm:i,hidden:n}=e;return(0,f.jsx)(S,{ref:t,className:o.default.pttSendButton,a8nKey:"ptt-send-btn",ariaLabel:c.default.t(39),confirmOnMouseUp:a,onConfirm:i,disabled:s,hidden:n,children:(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35",children:[(0,f.jsx)("path",{d:"M17.5,0h0A17.51,17.51,0,0,1,35,17.5h0A17.51,17.51,0,0,1,17.5,35h0A17.51,17.51,0,0,1,0,17.5H0A17.51,17.51,0,0,1,17.5,0Z",fill:"currentColor"}),(0,f.jsx)("path",{className:o.default.bounceOnHover,d:"M25.64,18.55,11.2,24.93a.86.86,0,0,1-1.13-.44.83.83,0,0,1-.06-.44l.48-4.11a1.36,1.36,0,0,1,1.24-1.19l7.51-.6a.16.16,0,0,0,.14-.16.16.16,0,0,0-.14-.14l-7.51-.6a1.36,1.36,0,0,1-1.24-1.19L10,12a.84.84,0,0,1,.74-.94.87.87,0,0,1,.45.06l14.44,6.38a.61.61,0,0,1,.31.79A.59.59,0,0,1,25.64,18.55Z",fill:"#fff"})]})})}));t.PttSendButton=m;const _=(0,n.forwardRef)(((e,t)=>{const{onConfirm:s,confirmOnMouseUp:a,disabled:i,hidden:n}=e;return(0,f.jsx)(S,{ref:t,className:o.default.pttCancelButton,a8nKey:"ptt-cancel-btn",ariaLabel:c.default.t(37),confirmOnMouseUp:a,onConfirm:s,disabled:i,hidden:n,children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 22",children:(0,f.jsx)("path",{d:"M5,0,3,2H0V4H16V2H13L11,0ZM15,5H1V19.5A2.5,2.5,0,0,0,3.5,22h9A2.5,2.5,0,0,0,15,19.5Z",fill:"currentColor"})})})}));t.PttCancelButton=_;const g=(0,n.forwardRef)(((e,t)=>{const{onConfirm:s,confirmOnMouseUp:a,disabled:i,hidden:n}=e;return(0,f.jsx)(S,{ref:t,className:o.default.pttStopButton,a8nKey:"ptt-stop-button",ariaLabel:c.default.t(40),confirmOnMouseUp:a,onConfirm:s,disabled:i,hidden:n,children:(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[(0,f.jsx)("path",{fill:"currentColor",d:"M16,0C7.2,0,0,7.2,0,16s7.2,16,16,16s16-7.2,16-16S24.8,0,16,0z M16,30C8.3,30,2,23.7,2,16S8.3,2,16,2 s14,6.3,14,14S23.7,30,16,30z"}),(0,f.jsx)("path",{className:o.default.bounceOnHover,fill:"currentColor",d:"M13,11c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2v-6c0-1.1-0.9-2-2-2H13z"})]})})}));t.PttStopButton=g;const v=(0,n.forwardRef)(((e,t)=>{const{paused:s,onConfirm:a,disabled:n,hidden:r}=e,l=s?(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 18",children:(0,f.jsx)("path",{d:"M15.05,8.39,2,.32a1,1,0,0,0-1.53.85V16.83A1,1,0,0,0,2,17.7L15,10.1A1,1,0,0,0,15.05,8.39Z",fill:"currentColor"})}):(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 18",children:[(0,f.jsx)("path",{fill:"currentColor",d:"M1.9,1c-0.6,0-1,0.4-1,1v14c0,0.6,0.4,1,1,1H5c0.6,0,1-0.4,1-1V2c0-0.6-0.4-1-1-1H1.9z"}),(0,f.jsx)("path",{fill:"currentColor",d:"M10.9,1c-0.6,0-1,0.4-1,1v14c0,0.6,0.4,1,1,1h3.1c0.6,0,1-0.4,1-1V2c0-0.6-0.4-1-1-1H10.9z"})]});return(0,f.jsx)(S,{ref:t,className:(0,i.default)(o.default.pttPlayPauseButton,{[o.default.paused]:s}),a8nKey:"ptt-play-pause-button",onConfirm:a,confirmOnMouseUp:!1,disabled:n,ariaLabel:s?c.default.t(17):c.default.t(16),hidden:r,children:l})}));t.PttPlayPauseButton=v;const S=(0,n.forwardRef)(((e,t)=>{const{a8nKey:s,ariaLabel:a,children:u,className:c,confirmOnMouseUp:m,disabled:_,onConfirm:g,hidden:v}=e,S=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({focus:()=>d.default.focus((0,h.default)(S.current,"buttonRef.current"))})));const C=_||!m?null:e=>{0===e.button&&g(e)},y=_?null:e=>{e.key!==p.ENTER&&e.key!==p.SPACE||(e.preventDefault(),e.stopPropagation(),g(e))};return(0,f.jsx)("button",{ref:S,"data-a8n":r.default.key(s),"data-tab":v?void 0:l.default.TAB_ORDERS.PTT_BUTTON,className:(0,i.default)(c,o.default.clipFix),onClick:_?null:g,onMouseUp:C,onKeyPress:y,"aria-label":a,"aria-disabled":_,children:u})}))},1381:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(48926)),r=i(s(94184)),o=s(67294),l=s(36486),d=i(s(25142)),u=i(s(55454)),c=i(s(26821)),h=i(s(91619)),f=i(s(24589)),p=i(s(95566)),m=i(s(13038)),_=s(61192),g=i(s(75169)),v=i(s(35523)),S=a(s(37374)),C=s(85893);const y=s(54302).Mirrored(["RECORDER","PREVIEW"]);var E=(0,o.forwardRef)(((e,t)=>{var s,a;const{active:i,chat:E,onCancel:b,onSend:T}=e,[M,x]=(0,o.useState)(y.RECORDER),I=(0,o.useRef)(),[P,A]=(0,o.useState)(!1),[N,O]=(0,o.useState)(!1),w=function(e){const[t,s]=(0,o.useState)(!1),[a,i]=(0,o.useState)(e);e&&!a&&(i(e),s(!1));return(0,o.useEffect)((()=>{if(!e)return;const t=setTimeout((()=>{s(!0)}),250),a=()=>{s(!1),i()};window.addEventListener("mouseup",a);const i=()=>{window.removeEventListener("mouseup",a),clearTimeout(t)};return i}),[e]),t}(N),[D,j]=(0,o.useState)(null),[R,L]=(0,o.useState)(!1),[k,F]=(0,o.useState)(null),B=(0,o.useContext)(m.default),G=(0,o.useRef)(),U=(0,o.useRef)(),[V,H]=(0,o.useState)(0),[W,Y]=(0,o.useState)(null),[K,q]=(0,o.useState)(0),z=function(){var e=(0,n.default)((function*(){q(0),A(!1);const e=new p.default({chat:E,onDurationChange:e=>{q(Math.round(e)),L(e>=1.5)}});I.current=e,L(!1);return!!(yield e.start())&&(H(0),x(y.RECORDER),O(!0),!0)}));return function(){return e.apply(this,arguments)}}(),$=(0,o.useCallback)((({canceled:e=!1,updateState:t=!0}={})=>{const s=I.current;e?null==s||s.cancel():null==s||s.stop(),t&&O(!1)}),[]);(0,o.useImperativeHandle)(t,(()=>({start:z}))),(0,o.useEffect)((()=>{N&&setTimeout((()=>{var e;null===(e=G.current)||void 0===e||e.focus()}),100)}),[N]),(0,o.useEffect)((()=>{var e,t;M===y.PREVIEW&&(null===(e=U.current)||void 0===e||e.focus(),null===(t=I.current)||void 0===t||t.markDraftPreviewSeen())}),[M]);const Q=(0,o.useCallback)((()=>{$({updateState:!1}),null==D||D.pause(),D&&(0,c.default)(D),null==k||k.autorelease()}),[D,$,k]),X=(0,v.default)(i);(0,o.useEffect)((()=>{X&&!i&&(Q(),I.current=null)}),[i,X,Q]),(0,g.default)(Q);const Z=()=>{$();const e=(0,h.default)(I.current,"recordingSessionRef.current").getDataForPlayback();e.then((e=>{F(e)})),j(function(e){const t=new Audio;return(0,n.default)((function*(){const s=yield e;t.src=s.url()}))(),t}(e)),x(y.PREVIEW)},J=()=>{const e=(0,h.default)(D,"audio");var t;e.paused?(e.play(),null===(t=I.current)||void 0===t||t.incrementDraftPlayCount()):e.pause()};(0,_.useListener)(D,"play",(()=>{A(!0)})),(0,_.useListener)(D,"pause",(()=>{A(!1)})),(0,_.useListener)(D,"timeupdate",(()=>{H((0,h.default)(D,"audio").currentTime)})),(0,_.useListener)(D,"ended",(()=>{(0,h.default)(D,"audio").load()}));const ee=(0,r.default)(f.default.container,{[f.default.recorderMode]:M===y.RECORDER,[f.default.previewMode]:M===y.PREVIEW});let te;te=null!=W?W:N||0===V?K:Math.floor(V);const se=(0,C.jsx)("div",{className:f.default.timerContainer,children:d.default.durationStr(te)}),ae=(0,o.useCallback)((()=>{var e;return null!==(e=null==D?void 0:D.currentTime)&&void 0!==e?e:0}),[D]),ie=(0,o.useCallback)((()=>{var e,t;return null!==(e=null===(t=I.current)||void 0===t?void 0:t.getDuration())&&void 0!==e?e:0}),[I]),ne=(0,o.useCallback)((()=>{var e,t;return null!==(e=null===(t=I.current)||void 0===t?void 0:t.getWaveformSamples())&&void 0!==e?e:[]}),[I]),re=(0,o.useCallback)((e=>{var t;H(e),Y(null),(0,h.default)(D,"audio").currentTime=e,null===(t=I.current)||void 0===t||t.incrementDraftSeekCount()}),[D]),oe=(0,o.useCallback)((e=>{Y(Math.floor(e))}),[]),le=(0,C.jsx)("div",{className:f.default.waveformContainer,children:(0,C.jsx)(S.default,{theme:"dark"===B.theme?S.WaveformTheme.DRAFT_DARK:S.WaveformTheme.DRAFT_LIGHT,sampleRate:null!==(s=null===(a=I.current)||void 0===a?void 0:a.getWaveformSampleRate())&&void 0!==s?s:6,getSamples:ne,getCurrentTime:ae,getDuration:ie,live:i&&(P||N),mode:M===y.RECORDER?S.WaveformMode.RECORDER:S.WaveformMode.PREVIEW,onSeek:oe,onSeekEnd:re,disabled:!i,tabIndex:i?u.default.TAB_ORDERS.PTT_BUTTON:void 0})});let de;return de=M===y.RECORDER?(0,C.jsxs)("div",{className:f.default.previewContainer,children:[se,le,(0,C.jsx)(l.PttStopButton,{disabled:!R,confirmOnMouseUp:w,onConfirm:Z,hidden:!i})]}):(0,C.jsxs)("div",{className:f.default.previewContainer,children:[(0,C.jsx)(l.PttPlayPauseButton,{ref:U,paused:!P,onConfirm:J,hidden:!i}),le,se]}),(0,C.jsxs)("div",{className:ee,children:[(0,C.jsx)(l.PttCancelButton,{ref:G,confirmOnMouseUp:w,onConfirm:()=>{$({canceled:!0}),b()},hidden:!i}),de,(0,C.jsx)(l.PttSendButton,{disabled:!R,confirmOnMouseUp:w,onConfirm:()=>{$();const e=I.current;null!=e&&(I.current=null,e.send(),T())},hidden:!i})]})}));t.default=E},92594:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{ariaLabel:t,value:s,valueText:a,min:l,max:h,smallSkip:f,largeSkip:p,onChange:m,onCommit:_,disabled:g,children:v,tabIndex:S}=e,[C,y]=(0,o.useState)(!1),E=(0,o.useCallback)((()=>{y(!0)}),[y]),b=(0,o.useCallback)((()=>{y(!1)}),[y]),T=(0,o.useRef)(),M=(0,o.useRef)(),x=(0,o.useRef)(),I=(0,o.useCallback)((e=>{const t=(0,r.default)(M.current,"minPxRef.current"),s=(0,r.default)(x.current,"maxPxRef.current"),a=e.clientX,n=(0,i.default)((a-t)/(s-t),0,1);return l+n*(h-l)}),[l,h]),P=(0,o.useCallback)((e=>{e.preventDefault(),0!==e.buttons?null==m||m(I(e)):b()}),[b,m,I]),A=(0,o.useCallback)((e=>{if(0!==e.button)return;b();const t=I(e);null==m||m(t),_(t)}),[I,b,m,_]);return(0,o.useEffect)((()=>{if(C)return window.addEventListener("mousemove",P),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",A)}}),[P,A,C]),(0,u.jsx)("div",{ref:T,className:(0,n.default)(d.default.container,{[d.default.disabled]:g}),role:"slider","aria-label":t,"aria-valuenow":s,"aria-valuetext":a,"aria-valuemin":l,"aria-valuemax":h,"data-tab":S,tabIndex:"0",onMouseDown:e=>{var t;if(0!==e.button)return;e.preventDefault();const s=(0,r.default)(null===(t=T.current)||void 0===t?void 0:t.getBoundingClientRect(),"containerRef.current?.getBoundingClientRect()");M.current=s.left,x.current=s.left+s.width,E(),null==m||m(I(e))},onKeyDown:e=>{if(g)return;let t;switch(e.key){case c.ARROW_RIGHT:case c.ARROW_UP:t=f;break;case c.ARROW_LEFT:case c.ARROW_DOWN:t=-f;break;case c.PAGE_UP:t=p;break;case c.PAGE_DOWN:t=-p}if(null!=t){e.preventDefault();const a=(0,i.default)(s+t,l,h);_(a)}},children:v})};var i=a(s(74691)),n=a(s(94184)),r=a(s(7900)),o=s(67294),l=a(s(36251)),d=a(s(36496)),u=s(85893);const{KEYBOARD_EVENT_KEY_VALUE:c}=l.default},95566:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(48926)),r=i(s(59854)),o=s(55084),l=i(s(7900)),d=i(s(41143)),u=i(s(15971)),c=i(s(91952)),h=i(s(75940)),f=s(54647),p=a(s(13540)),m=a(s(47683)),_=i(s(2408)),g=s(57990),v=a(s(10214)),S=s(42856),C=i(s(4231)),y=i(s(52937)),E=s(83271),b=i(s(41329)),T=i(s(25710)),M=i(s(18282)),x=i(s(37613)),I=s(85893);const P=s(54302).Mirrored(["NOT_STARTED","STARTED","STOPPED","CANCELLED"]);function A(){return(A=(0,n.default)((function*(){return!0}))).apply(this,arguments)}t.default=class{constructor(e){this._state=P.NOT_STARTED,this._markedRecording=!1,this._waveformSamples=[],this._draftPreviewSeen=!1,this._draftPlayCount=0,this._draftSeekCount=0,this._pendingAmplitude=0,this._handleRecorderDataAvailable=e=>{const t=e.detail;(0,d.default)(t instanceof Blob,"Recorder didn't dispatch blob"),this._resolveBlobPromise(t)},this._updateWaveformSamples=()=>{this._pendingAmplitude=Math.max(this._pendingAmplitude,this._getCurrentAmplitude());const e=this.getDuration(),t=this.getWaveformSampleRate(),s=this._waveformSamples.length/t,a=Math.floor((e-s)*t);if(0!==a)for(let e=0;e<a;e++)this._waveformSamples.push(this._pendingAmplitude),this._pendingAmplitude=0},this._handleRecorderDuration=e=>{var t;const s=e.detail;null===(t=this._timer)||void 0===t||t.sync(1e3*s),this._updateWaveformSamples(),this._onDurationChange(this.getDuration())},this._chat=e.chat,this._onDurationChange=e.onDurationChange,this._blobPromise=new Promise((e=>{this._resolveBlobPromise=e}))}start(){var e=this;return(0,n.default)((function*(){if(e._isEnded())throw new Error("Can't restart a stopped recording session");if(e._state===P.STARTED)return!0;e._state=P.STARTED;if(!(yield function(){return A.apply(this,arguments)}()))return e.stop(),!1;if(e._isEnded())return!1;if(u.default.activeCall)return c.default.openModal((0,I.jsx)(h.default,{onOK:()=>c.default.closeModal(),children:_.default.t(1033)})),e.stop(),!1;try{const{disposeStream:t,asyncStream:a}=v.start("microphone");e._disposeStream=t;const i=yield a;if(!i)return e.stop(),!1;if(e._isEnded())return t(),!1;c.default.pttRecording(),e._initRecorder(i);const n=(0,l.default)(e._recorder,"_this._recorder");return yield n.start(),e._timer=new x.default,e._timer.start(),s(48327).default.update(e._chat.presence.id).catch((0,o.filteredCatch)(f.WebdDrop,(()=>{}))),(0,E.markRecording)(e._chat),e._markedRecording=!0,e._stopWaveformSamplesUpdater=(0,M.default)(e._updateWaveformSamples),!0}catch(t){return e.stop(),t instanceof p.GUM.NotAllowedError?(c.default.openModal((0,I.jsx)(m.default,{messaging:m.Messaging.MIC_FAIL,type:m.default.TYPE.GUIDE_UNBLOCK})),!1):t instanceof p.GUM.GUMError?(c.default.openModal((0,I.jsx)(m.default,{messaging:m.Messaging.MIC_MISSING,type:m.default.TYPE.GUIDE_NONE})),!1):(__LOG__(3)`PTT Recording Error`,!1)}}))()}_initRecorder(e){const t=new b.default({bitRate:16e3,encoderSampleRate:16e3,encoderApplication:2048});t.addEventListener("dataAvailable",this._handleRecorderDataAvailable),t.addEventListener("duration",this._handleRecorderDuration),t.initStream(e);const s=(0,l.default)(t.sourceNode,"recorder.sourceNode"),a=function(e){const t=e.context.createAnalyser();return t.fftSize=32,t.smoothingTimeConstant=0,t.minDecibels=-60,t.maxDecibels=-10,t}(s);s.connect(a),this._recorder=t,this._analyserNode=a}_getCurrentAmplitude(){var e;const t=(0,l.default)(this._analyserNode,"this._analyserNode");this._analyserData=null!==(e=this._analyserData)&&void 0!==e?e:new Uint8Array(t.frequencyBinCount);const s=this._analyserData;return t.getByteFrequencyData(s),Math.max(...s)/255}getWaveformSamples(){return this._waveformSamples}getScaledWaveformSamples(){return(0,T.default)(this._waveformSamples,64).map((e=>Math.floor(100*e)))}getDuration(){var e,t;return(null!==(e=null===(t=this._timer)||void 0===t?void 0:t.getTime())&&void 0!==e?e:0)/1e3}stop(){var e,t,s;if(this._isEnded())return;this._state=P.STOPPED;const a=this._recorder;null===(e=this._stopWaveformSamplesUpdater)||void 0===e||e.call(this),null===(t=this._timer)||void 0===t||t.stop(),null===(s=this._disposeStream)||void 0===s||s.call(this),this._markedRecording&&(0,E.markPaused)(this._chat),null==a||a.stop()}cancel(){if(this._state===P.CANCELLED)return;this.stop(),this._state=P.CANCELLED;null!=this._recorder&&this._sendPttWamEvent(C.default.PTT_RESULT_TYPE.CANCELLED)}_isEnded(){return this._state===P.STOPPED||this._state===P.CANCELLED}_getDataForSending(){var e=this;return this._chat.regCancellablePromise((0,n.default)((function*(){const t=(0,l.default)(yield e._blobPromise,"yield _this2._blobPromise");return y.default.createFromData(t,t.type)}))())}getDataForPlayback(){var e=this;return(0,n.default)((function*(){const t=(0,l.default)(yield e._blobPromise,"yield _this3._blobPromise"),s=yield(0,S.transcode)(t);return y.default.createFromData(s,s.type)}))()}getWaveformSampleRate(){return 6}send(){var e=this;return(0,n.default)((function*(){const t=(0,l.default)(e._recorder,"_this4._recorder"),s=e._chat;e._sendPttWamEvent(C.default.PTT_RESULT_TYPE.SENT);const a=e._getDataForSending(),i=s.getComposeContents().ctwaContext||void 0;(0,g.prepRawMedia)(a,{isPtt:!0,precomputedFields:{duration:~~t.duration,waveform:new Uint8Array(e.getScaledWaveformSamples())}}).sendToChat(s,{quotedMsg:s.composeQuotedMsg||void 0,addEvenWhilePreparing:!0,ctwaContext:i}),s.composeQuotedMsg=null,e.stop(),yield a.catch((0,o.filteredCatch)(Promise.CancellationError,(()=>{})))}))()}_sendPttWamEvent(e){var t=this;return(0,n.default)((function*(){var s;const a=yield t._blobPromise,i=t.getDuration();new C.default.Ptt({pttSource:C.default.PTT_SOURCE_TYPE.FROM_CONVERSATION,pttResult:e,pttDuration:1e3*Math.round(i),pttSize:(0,r.default)(null!==(s=null==a?void 0:a.size)&&void 0!==s?s:0,-3),pttStop:t._draftPreviewSeen,pttDraftPlayCnt:t._draftPlayCount,pttDraftSeekCnt:t._draftSeekCount}).commit()}))()}markDraftPreviewSeen(){this._draftPreviewSeen=!0}incrementDraftPlayCount(){this._draftPlayCount++}incrementDraftSeekCount(){this._draftSeekCount++}}},25710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(0===e.length)return new Array(t).fill(0);let s;if(1===e.length)s=0;else{const a=(t-e.length)/(e.length-1);s=1/(1+a)}const a=[];t>=1&&a.push(e[0]);for(let r=1;r<t-1;r++){const t=r*s,o=Math.floor(t);a.push((i=e[o],n=e[Math.ceil(t)],i+(n-i)*(t-o)))}var i,n;t>=2&&a.push(e[e.length-1]);return a}},37613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{start(){if(null!=this._syncedStopTime)throw new Error("Can't restart a stopped SyncableTimer");this._syncedStartTime=Date.now()}stop(){this._syncedStopTime=this.getTime()}getTime(){if(null!=this._syncedStopTime)return this._syncedStopTime;const e=this._syncedStartTime;return null==e?0:Date.now()-e}sync(e){null==this._syncedStopTime?this._syncedStartTime=Date.now()-e:this._syncedStopTime=e}}},37374:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,{width:s,height:a}]=(0,m.default)(),n=0===s||0===a?null:(0,g.jsx)(y,(0,i.default)((0,i.default)({},e),{},{width:s,height:a}));return(0,g.jsx)("div",{ref:t,className:_.default.container,children:(0,g.jsx)("div",{className:_.default.containerInner,children:n})})},t.WaveformMode=t.WaveformTheme=void 0;var i=a(s(81109)),n=s(67294),r=a(s(25142)),o=a(s(16625)),l=a(s(91619)),d=a(s(92594)),u=a(s(25710)),c=a(s(52275)),h=a(s(38853)),f=a(s(68900)),p=a(s(79939)),m=a(s(93387)),_=a(s(4643)),g=s(85893);const v=s(54302).Mirrored(["DRAFT_LIGHT","DRAFT_DARK","CONVERSATION_INCOMING_LIGHT","CONVERSATION_INCOMING_DARK","CONVERSATION_OUTGOING_LIGHT","CONVERSATION_OUTGOING_DARK"]);t.WaveformTheme=v;const S=s(54302).Mirrored(["RECORDER","PREVIEW"]);t.WaveformMode=S;const C=new Map([[v.DRAFT_LIGHT,{barColorPlayed:"#00897b",barColorUnplayed:"#bfbfbf"}],[v.DRAFT_DARK,{barColorPlayed:"#00af9c",barColorUnplayed:"#c4c4c4"}],[v.CONVERSATION_OUTGOING_LIGHT,{barColorPlayed:"#43b4ff",barColorUnplayed:"#a5ba94"}],[v.CONVERSATION_OUTGOING_DARK,{barColorPlayed:"#43b4ff",barColorUnplayed:"#769698"}],[v.CONVERSATION_INCOMING_LIGHT,{barColorPlayed:"#43b4ff",barColorUnplayed:"#bfbfbf"}],[v.CONVERSATION_INCOMING_DARK,{barColorPlayed:"#68bbe4",barColorUnplayed:"#71777b"}]]);const y=e=>{const t=(0,n.useRef)(),{getSamples:s,sampleRate:a,width:i,height:m,getCurrentTime:_,getDuration:v,live:y,theme:M,mode:x,onSeek:I,onSeekEnd:P,disabled:A,tabIndex:N}=e,O=(0,l.default)(C.get(M),"ThemeValues.get(theme)"),w=(0,f.default)(),[D,j]=(0,n.useState)(null),[R,L]=(0,n.useState)({value:_(),max:v()}),k=(0,h.default)((()=>{L({value:_(),max:v()})}),500),F=(0,n.useCallback)((()=>{k(),k.flush()}),[k]);(0,n.useEffect)((()=>{x===S.PREVIEW&&F()}),[x,F]);const B=(0,p.default)((()=>(0,o.default)((({samples:e,desiredSize:t})=>(0,u.default)(e,t)),((e,t)=>e.samples===t.samples&&e.samples.length===t.samples.length&&e.desiredSize===t.desiredSize)))),G=(0,n.useCallback)((()=>{k(),function(e){const{canvas:t,width:s,height:a,currentTime:i,duration:n,sampleRate:r,themeValues:o,mode:l,pixelRatio:d,scaleSamples:u}=e,c=l===S.PREVIEW,h=c?u({samples:e.samples,desiredSize:Math.floor(s/E)}):e.samples,f=t.getContext("2d");f.lineCap="round",f.setTransform(d,0,0,d,0,0);const p=c?0:s-n*r*E,m=l===S.PREVIEW?i/n*s:0,_=p>0?0:Math.floor(-p/E);f.clearRect(0,0,s,a);let g=_,v=p+_*E;for(;g<h.length&&v<s;){const e=v+1.25;let t;if(c)t=1;else{const a=e,i=s-(e+3);t=T(a<i?Math.min(1,a/25):Math.min(1,i/7))}const i=Math.max(0,t*(4+h[g]*(a-4)));b(f,o,e,(a-i)/2,3,i,m),g+=1,v+=E}}({canvas:(0,l.default)(t.current,"canvasRef.current"),samples:s(),width:i,height:m,currentTime:null!=D?D:_(),duration:v(),sampleRate:a,themeValues:O,mode:x,pixelRatio:w,scaleSamples:B.current})}),[t,s,i,m,_,D,v,a,O,x,k,w,B]);(0,c.default)(G,{active:y}),(0,n.useEffect)((()=>{y||G()}),[y,G]);const U=(0,n.useCallback)((e=>{null==I||I(e),j(e),G()}),[j,I,G]),V=(0,n.useCallback)((e=>{j(null),null==I||I(e),P(e),G(),F()}),[j,I,P,G,F]),H=(0,g.jsx)("canvas",{ref:t,width:w*i,height:w*m,style:{width:`${i}px`,height:`${m}px`}});if(x===S.RECORDER)return H;const{value:W,max:Y}=R,K=r.default.durationStr(W)+"/"+r.default.durationStr(Y);return(0,g.jsx)(d.default,{value:W,valueText:K,min:0,max:Y,smallSkip:1,largeSkip:10,onChange:U,onCommit:V,disabled:A,tabIndex:N,children:H})},E=5.5;function b(e,t,s,a,i,n,r){if(0===i||0===n)return;e.strokeStyle=r>=s+i?t.barColorPlayed:t.barColorUnplayed;const o=Math.min(i/2,n/2);e.lineWidth=2*o,e.beginPath(),e.moveTo(s+i/2,a+o),e.lineTo(s+i/2,a+n-o),e.stroke(),r>s&&r<s+i&&(e.globalCompositeOperation="source-atop",e.fillStyle=t.barColorPlayed,e.rect(s,a,r-s,n),e.fill(),e.globalCompositeOperation="source-over")}function T(e){return e<.5?4*e*e*e:1-(-2*e+2)**3/2}},25952:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(48926)),n=a(s(94184)),r=a(s(7900)),o=s(67294),l=a(s(25142)),d=a(s(47193)),u=a(s(71681)),c=a(s(40630)),h=s(6055),f=a(s(97469)),p=a(s(16723)),m=a(s(95566)),_=a(s(69217)),g=a(s(63477)),v=a(s(82669)),S=s(85893);class C extends o.PureComponent{constructor(...e){var t;super(...e),t=this,this._cancelButtonRef=(0,o.createRef)(),this._lastRecordingStartTime=0,this.state={state:"ready",elapsed:0},this._stopRecording=(e=!1)=>{var t,s;(this.setState({state:"ready",elapsed:0}),this.props.onRecState(!1),e)?null===(t=this._recordingSession)||void 0===t||t.cancel():null===(s=this._recordingSession)||void 0===s||s.stop();this._recordingSession=null},this._onPTTReady=()=>{"delay"===this.state.state&&this.setState({state:"recording"})},this._handleCancelButtonConfirm=()=>{"ready"!==this.state.state&&(Date.now()-this._lastRecordingStartTime<250||(this._cancelPTTTimer(),this._stopRecording(!0)))},this._handleSendButtonConfirm=()=>{if("recording"!==this.state.state)return;this._cancelPTTTimer(),this.setState({state:"processing"}),this.props.onRecState(!1);(0,r.default)(this._recordingSession,"this._recordingSession").send().finally((()=>{this._stopRecording()})),this.props.onRecordingSent()},this._startRecord=(0,i.default)((function*(){if("ready"!==t.state.state)return;const e=t._recordingSession=new m.default({chat:t.props.chat,onDurationChange:e=>{const s=t.state.elapsed;Math.round(e)!==s&&t.setState({elapsed:e})}});(yield e.start())&&(t._lastRecordingStartTime=Date.now(),t.setState({state:"delay"}),t.props.onRecState(!0),t._pttTimer=t.props.setTimeout(t._onPTTReady,1500))}))}componentDidMount(){this.props.listeners.add(window,"blur",(()=>{this._stopRecording()}))}componentWillUnmount(){this._stopRecording()}componentDidUpdate(e,t){"delay"===this.state.state&&"delay"!==t.state&&d.default.focus(this._cancelButtonRef.current)}_cancelPTTTimer(){null!=this._pttTimer&&(this.props.clearTimeout(this._pttTimer),this._pttTimer=null)}render(){const e=this.state.state,t="delay"===e||"recording"===e?(0,S.jsx)(g.default,{displayName:"PTT",popable:!0,escapable:!0,children:(0,S.jsxs)("div",{className:f.default.recording,children:[(0,S.jsx)(h.PttCancelButton,{ref:this._cancelButtonRef,onConfirm:this._handleCancelButtonConfirm}),(0,S.jsx)("div",{className:f.default.pttCounter,"data-animate-ptt-counter":!0,children:l.default.durationStr(this.state.elapsed)}),(0,S.jsx)(h.PttSendButton,{onConfirm:this._handleSendButtonConfirm})]},"recording")}):null,s="ready"===e||"processing"===e?(0,S.jsx)("div",{className:f.default.pttStartRecordingButtonContainer,children:(0,S.jsx)(p.default,{disabled:"processing"===e,onConfirm:this._startRecord})},"button"):null,a=(0,n.default)(f.default.container,{[f.default.active]:!!t});return(0,S.jsx)("div",{className:a,children:(0,S.jsx)(v.default,{transitionName:"ptt",children:t||s})})}}C.displayName="PttRecorder";var y=(0,c.default)((0,_.default)((0,u.default)(C)));t.default=y},16723:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{onConfirm:s}=e,a=null!==(t=e.disabled)&&void 0!==t&&t;return(0,u.jsx)("button",{"data-a8n":i.default.key("ptt-ready-btn"),className:l.default.btnPtt,onMouseDown:e=>{0===e.button&&s()},onKeyPress:e=>{e.key!==c.ENTER&&e.key!==c.SPACE||(e.preventDefault(),e.stopPropagation(),s())},disabled:a,"aria-label":o.default.t(38),"data-tab":a?void 0:n.default.TAB_ORDERS.PTT_BUTTON,children:(0,u.jsx)(d.default,{name:"ptt"})})};var i=a(s(76610)),n=a(s(55454)),r=a(s(36251)),o=a(s(2408)),l=a(s(66967)),d=a(s(2966)),u=s(85893);const{KEYBOARD_EVENT_KEY_VALUE:c}=r.default},55174:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=s(38512),r=a(s(52218)),o=a(s(15701)),l=a(s(69991)),d=a(s(91952)),u=a(s(75940)),c=a(s(55454)),h=a(s(12950)),f=a(s(52087)),p=a(s(87957)),m=a(s(2408)),_=a(s(71681)),g=a(s(19582)),v=s(84254),S=a(s(82478)),C=s(48224),y=a(s(19633)),E=a(s(79485)),b=s(15298),T=s(85893);class M extends i.PureComponent{constructor(...e){super(...e),this._confirmReportGroupSpam=()=>{d.default.openModal((0,T.jsx)(g.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>d.default.closeModal()}))},this._exitChat=()=>{d.default.deleteOrExitChat(this.props.chat)},this._confirmReportSpam=()=>{d.default.openModal((0,T.jsx)(g.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>d.default.closeModal()}))},this.reportSpam=()=>{(0,v.sendSpamReport)(this.props.chat,C.SpamFlow.Chat),d.default.closeModal()},this.reportSpamExitClear=()=>{(0,v.sendSpamExitClear)(this.props.chat,C.SpamFlow.Block),d.default.closeModal()},this.reportSpamBlockClear=()=>{(0,v.sendSpamBlockClear)(this.props.chat,C.SpamFlow.Block),d.default.closeModal()},this.notSpam=()=>{(0,v.sendNotSpam)(this.props.chat,!0).catch((()=>{}))},this._confirmBlock=()=>{d.default.openModal((0,T.jsx)(r.default,{contact:this.props.contact,onCancel:()=>d.default.closeModal(),onBlock:this.block,onReportSpamBlock:this.reportSpamBlock}))},this.block=()=>{(0,n.blockContact)(this.props.contact).catch((()=>{})),d.default.closeModal()},this.reportSpamBlock=()=>{(0,v.sendSpamReport)(this.props.chat,C.SpamFlow.Block),(0,n.blockContact)(this.props.contact).catch((()=>{})),d.default.closeModal()},this._confirmUnblock=()=>{d.default.openModal((0,T.jsx)(u.default,{okText:m.default.t(1709),onOK:this.unblock,cancelText:m.default.t(1912),onCancel:()=>d.default.closeModal(),children:m.default.t(1710,{contact:this.props.contact.formattedName})}))},this.unblock=()=>{(0,n.unblockContact)(this.props.contact).catch((()=>{})),d.default.closeModal()},this._getNotSpamButton=()=>(0,T.jsx)("div",{className:S.default.button,children:(0,T.jsx)(l.default,{onClick:this.notSpam,type:"plain-white",children:m.default.t(2085)})},"not_spam"),this._onViewInfo=()=>{d.default.openDrawerRight((0,T.jsx)(p.default,{chat:(0,b.unproxy)(this.props.chat)},`info-${this.props.chat.id.toString()}`),"slide-left",this.props.uim)}}componentDidMount(){this.props.listeners.add(o.default,"add remove reset",(()=>{this.forceUpdate()}))}render(){const{chat:e,contact:t}=this.props;if(e.isPSA||!e.shouldAppearInList||e.trusted)return null;const s=o.default.get(e.id);let a;const i=[];if(e.isGroup)a=m.default.t(949),i.push((0,T.jsx)("div",{className:S.default.button,children:(0,T.jsx)(l.default,{type:"plain-white",onClick:this._confirmReportGroupSpam,children:m.default.t(1522)})},"report_spam")),i.push((0,T.jsx)("div",{className:S.default.button,children:(0,T.jsx)(l.default,{type:"plain-white",onClick:this._exitChat,children:m.default.t(1958)})},"exit_group")),i.push(this._getNotSpamButton());else{if(a=(0,T.jsx)("div",{className:S.default.text,children:m.default.t(1628)}),t.isBusiness)if(h.default.supportsFeature(h.default.F.VNAME_V_2)){const e=t.verifiedLevel===c.default.VERIFIED_LEVEL.HIGH?m.default.t(1406):m.default.t(1157);a=(0,T.jsx)("div",{className:S.default.text,children:e})}else t.verifiedLevel>c.default.VERIFIED_LEVEL.UNKNOWN&&t.businessProfile&&(a=(0,T.jsx)(y.default,{contact:t,businessProfile:t.businessProfile,onClick:this._onViewInfo}));i.push((0,T.jsx)("div",{className:S.default.button,children:(0,T.jsx)(l.default,{type:"plain-white",onClick:this._confirmReportSpam,children:m.default.t(1522)})},"report_spam")),s?i.push((0,T.jsx)("div",{className:S.default.button,children:(0,T.jsx)(l.default,{onClick:this._confirmUnblock,type:"plain-white",children:m.default.t(1709)})},"unblock")):i.push((0,T.jsx)("div",{className:S.default.button,children:(0,T.jsx)(l.default,{onClick:this._confirmBlock,type:"plain-white",children:m.default.t(317)})},"block")),i.push(this._getNotSpamButton())}return(0,T.jsxs)("div",{className:S.default.spam,children:[a,(0,T.jsx)("div",{className:S.default.controls,children:i})]})}}M.CONCERNS={chat:["id","isPSA","shouldAppearInList","trusted","isGroup","vcardDismissed"],contact:["id","isBusiness","verifiedLevel","formattedName","businessProfile"]},M.displayName="Spam";var x=(0,f.default)((0,_.default)((0,E.default)(M,M.CONCERNS)));t.default=x},19633:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,c.default)(e.contact,["id","verifiedLevel","formattedName"]),s=(0,c.default)(e.businessProfile,["stale","structuredAddress","description"]),{id:a,formattedName:f,verifiedLevel:p}=t;let m,_,g,v;if(s.stale)g=(0,h.jsx)("div",{children:(0,h.jsx)(d.default,{size:20,stroke:5})});else{const e=s.structuredAddress&&(e=>{const{streetAddress:t,localizedCityName:s,zipCode:a}=e;return t&&s&&a?o.default.t(437,{streetAddress:t,city:s,zipCode:a}):t&&s?o.default.t(436,{streetAddress:t,city:s}):t})(s.structuredAddress);e&&(m=(0,h.jsx)("div",{className:l.default.address,children:(0,h.jsx)(r.default,{selectable:!0,direction:"auto",text:e})})),s.description&&(_=(0,h.jsx)("div",{className:l.default.description,title:s.description,children:(0,h.jsx)(r.default,{selectable:!0,direction:"auto",text:s.description})}))}p===i.default.VERIFIED_LEVEL.HIGH&&(v=(0,h.jsx)("div",{className:l.default.badge,children:(0,h.jsx)(u.default,{name:"psa-verified"})}));return(0,h.jsxs)("div",{className:l.default.container,onClick:e.onClick,children:[(0,h.jsxs)("div",{className:l.default.image,children:[(0,h.jsx)(n.default,{id:a,size:55}),v]}),(0,h.jsxs)("div",{className:l.default.body,children:[(0,h.jsx)("div",{className:l.default.name,children:f}),g,m,_]})]})};var i=a(s(55454)),n=a(s(88419)),r=a(s(85051)),o=a(s(2408)),l=a(s(98712)),d=a(s(46714)),u=a(s(2966)),c=a(s(76006)),h=s(85893)},67392:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(69991)),r=a(s(91952)),o=a(s(30841)),l=a(s(52087)),d=a(s(663)),u=a(s(79485)),c=a(s(88797)),h=s(85893);class f extends i.PureComponent{constructor(...e){super(...e),this.onViewContact=()=>{r.default.openDrawerRight((0,h.jsx)(o.default,{chat:this.props.chat}),"slide-left",this.props.uim)}}render(){const{chat:e,dismissVcardPanel:t}=this.props,s=e.receivedVcardMsgs;return(0,h.jsxs)("div",{className:c.default.vcard,children:[(0,h.jsx)(d.default,{id:917,plural:s.length}),(0,h.jsxs)("div",{className:c.default.controls,children:[(0,h.jsx)(n.default,{onClick:this.onViewContact,type:"plain-white",children:(0,h.jsx)(d.default,{id:1779,plural:s.length})}),(0,h.jsx)(n.default,{onClick:t,type:"plain-white",children:(0,h.jsx)(d.default,{id:1387})})]})]})}}f.CONCERNS={chat:["receivedVcardMsgs"]},f.displayName="VcardPanel";var p=(0,l.default)((0,u.default)(f,f.CONCERNS));t.default=p},78970:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearChatIdCorrectionCache=function(){S.clear()},t.default=void 0;var n=i(s(48926)),r=s(8139),o=s(55084),l=i(s(91952)),d=i(s(75940)),u=s(62238),c=i(s(99942)),h=s(86723),f=i(s(2408)),p=a(s(17126)),m=i(s(57681)),_=i(s(66469)),g=i(s(46714)),v=s(85893);const S=new Map;function C(){return(C=(0,n.default)((function*(e){if(!e.isUser())return e;const t=S.get(e.user);if(t)return t;const s=yield(0,_.default)(e),a=null==s?e:s.wid;return S.set(e.user,a),a}))).apply(this,arguments)}class y extends c.default{constructor(...e){super(...e),this._cancel=()=>{this._queryChatPromise&&this._queryChatPromise.cancel(),this._queryChatPromise=void 0,this.end()},this.error=()=>{this.push((0,v.jsx)(d.default,{onOK:()=>this.end(),okText:f.default.t(2085),children:f.default.t(1278)}))}}componentDidMount(){let e=!1;const t=(0,r.delayMs)(250).cancellable().then((()=>{e=!0,this.push((0,v.jsx)(d.default,{title:f.default.t(1642),onCancel:this._cancel,cancelText:f.default.t(1912),children:(0,v.jsx)("div",{className:m.default.spinner,children:(0,v.jsx)(g.default,{stroke:6,size:24})})}))})).catch((0,o.filteredCatch)(Promise.CancellationError,(()=>{}))),s=Date.now();this._queryChatPromise=function(){return C.apply(this,arguments)}(this.props.chatId).then((e=>(0,u.findChat)(e,!0))).cancellable().then((a=>{e||t.cancel();const i=Date.now()-s,n=e?Math.max(750-i,0):0;return this.openChat(a),(0,r.delayMs)(n).then((()=>{this.end(),this.props.onSuccess(a)}))})).catch((0,o.filteredCatch)(Promise.CancellationError,(()=>{}))).catch((e=>{t.cancel(),this.error(e)}))}openChat(e){let{msgText:t}=this.props,s=this.props.ctwaContextLinkData;if(s){const e=p.findLink(s.sourceUrl||"",!1,(0,h.getMaybeMeUser)());e&&e.suspiciousCharacters&&e.suspiciousCharacters.size>0&&(s=null)}s&&(t=s.icebreaker),e.active&&t?(l.default.pasteChatTextInput(e,t),s&&l.default.setChatCtwaContextLinkData(e,s)):(t&&e.setComposeContents({text:t}),l.default.openChatFromUnread(e).then((t=>{t&&(l.default.focusChatTextInput(e),s&&l.default.setChatCtwaContextLinkData(e,s))})))}}t.default=y,y.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},43085:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(82754),r=i(s(91952)),o=i(s(55454)),l=i(s(99942)),d=i(s(2408)),u=a(s(57774)),c=s(85893);class h extends l.default{constructor(...e){super(...e),this._onStartGroupCall=e=>{this.props.onStartGroupCall(e.map((e=>e.id))),r.default.closeModal()},this.contactFilter=e=>!this.props.groupParticipants||!!this.props.groupParticipants.find((t=>t.equals(e.id))),this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,c.jsx)(u.default,{title:this.props.isVideo?d.default.t(1010):d.default.t(1011),filter:this.contactFilter,onCancel:this._pop,onConfirm:this._onStartGroupCall,listType:u.ListType.PARTICIPANT_MANAGE_MODAL,maxItems:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,maxItemsExceedErrorMsg:d.default.t(1848,{count:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,_plural:o.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS}),singleSelectionFooterType:this.props.isVideo?n.FooterType.VIDEO_CALL:n.FooterType.VOICE_CALL,multipleSelectionFooterType:this.props.isVideo?n.FooterType.VIDEO_CALL:n.FooterType.VOICE_CALL,allowBlockedContacts:!1}))}}t.default=h},99942:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(7900)),n=s(67294),r=a(s(54257)),o=a(s(63477)),l=a(s(64029)),d=a(s(82669)),u=s(85893);class c extends n.Component{constructor(...e){super(...e),this.state={_stack:[],_transition:"default",_activeKey:0,_ended:!1},this.setRefUIE=e=>{this.refUIE=e},this.popAndUpdate=(e,t)=>{const s=this.state._stack;if(s.length<2)return void this.pop(t);const a=(0,n.cloneElement)(s[s.length-2],e);s[s.length-2]=a,this.pop(t)},this.push=(e,t=this.props.pushTransition)=>{this.setState((s=>({_stack:s._stack.concat(e),_transition:t,_activeKey:++s._activeKey,_ended:!1})))},this.pop=(e=this.props.popTransition)=>{const t=this.state._stack.slice(0,-1);t.length?this.setState((s=>({_stack:t,_transition:e,_activeKey:--s._activeKey}))):this.state._ended||this.setState({_ended:!0},this.end)},this.end=e=>{this.props.onEnd?this.props.onEnd(e):(0,i.default)(this.context,"this.context").uie.requestDismiss(e)},this.stackSize=()=>this.state._stack.length,this.requestFocus=()=>{this.props.requestFocus&&this.props.requestFocus()}}handleRequestDismiss(){this.pop()}render(){const{_stack:e,_transition:t,_activeKey:s}=this.state;if(0===e.length)return null;let a=e[e.length-1];return a=(0,u.jsx)(o.default,{displayName:`FlowDrawer${s}`,escapable:!0,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.handleRequestDismiss.bind(this),children:a},s),(0,u.jsx)(d.default,{transitionName:t,className:r.default.container,children:this.props.removeTopDrawer?a:e})}}t.default=c,c.contextType=l.default,c.defaultProps={removeTopDrawer:!0,pushTransition:"flow-transition-drawer-push",popTransition:"flow-transition-drawer-pop"},c.displayName="FlowComponent"},79485:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var a,d;const u=(0,r.default)(e);t||s||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`StateHOC wrapping class with no concerns, check ${u}`));const c=[];if(t)for(const e in t)c.push(new n.default(u,e,t[e],!0));if(s)for(const e in s)t&&t.hasOwnProperty(e)&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`Component has marked "${e}" as both a normal and weak concern, check ${u}`)),c.push(new n.default(u,e,s[e],!1));return d=a=class t extends o.WrappedComponent{constructor(e){super(e),this._rr=(e,t)=>{this.setState((s=>({proxies:(0,i.default)((0,i.default)({},s.proxies),{},{[e.name]:e.createProxy(t)})})))};const s={};let a=!1;for(let i=0;i<c.length;i++){const n=c[i],r=n.name,o=n.getModelAndValidate(t._getModelOrProxy(r,e));if(o){const e=n.createProxy(o);n.attachConcern(o,e.proxyBitMask,this._rr),s[r]=e}else a=!0}this.state={props:e,proxies:s,hasBroken:a}}static _getModelOrProxy(e,t){return t[e]}static getDerivedStateFromProps(e,s){const a=(0,i.default)({},s.proxies);let n=!1;if(!s.hasBroken){const i=s.props;for(let s=0;s<c.length;s++){const r=c[s],o=r.name,l=r.getModel(t._getModelOrProxy(o,i)),d=r.getModelAndValidate(t._getModelOrProxy(o,e));l!==d&&(d?a[o]=r.createProxy(d):n=!0)}}return{props:e,proxies:a,hasBroken:n}}componentDidUpdate(e){if(!this.state.hasBroken)for(let s=0;s<c.length;s++){const a=c[s],i=a.name,n=a.getModel(t._getModelOrProxy(i,e)),r=a.getModelAndValidate(t._getModelOrProxy(i,this.props));if(n!==r&&(a.detachConcern(n,this._rr),r)){const e=this.state.proxies[i];a.attachConcern(r,e.proxyBitMask,this._rr)}}}componentWillUnmount(){if(!this.state.hasBroken)for(let e=0;e<c.length;e++){const s=c[e];s.detachConcern(s.getModel(t._getModelOrProxy(s.name,this.props)),this._rr)}}_getComponent(){return o._getComponent.call(this)}render(){const{proxies:t,hasBroken:s,hasError:a}=this.state;return s||a?null:(0,l.jsx)(e,(0,i.default)((0,i.default)({ref:this.setComponent},this.props),t))}},a.displayName=`State(${u})`,d};var i=a(s(81109)),n=a(s(33586)),r=a(s(88404)),o=s(40832),l=s(85893)},84498:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleLabelId=p,t.renderLabelSvg=_,t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(85051)),o=a(s(12950)),l=s(78615),d=a(s(59606)),u=a(s(41882)),c=a(s(71681)),h=a(s(2966)),f=s(85893);function p(e){if(0===e.length)return;if(!o.default.supportsFeature(o.default.F.MD_BACKEND))return e[0];const t=Math.max(...e.map((e=>parseInt(e,10))));return isNaN(t)?e[0]:t.toString()}class m extends n.PureComponent{constructor(...e){super(...e),this._forceUpdate=()=>{this.forceUpdate()}}componentDidMount(){const e=p(this.props.labels);null!=e&&this._listenToLabelChange(e)}componentDidUpdate(e){const t=p(e.labels),s=p(this.props.labels);s!==t&&(null!=s&&this._listenToLabelChange(s),null!=t&&this._unlistenToLabelChange(t))}_listenToLabelChange(e){this.props.listeners.add(d.default,`label_updated_${e}`,this._forceUpdate)}_unlistenToLabelChange(e){this.props.listeners.remove(d.default,`label_updated_${e}`,this._forceUpdate)}render(){const{labels:e,showName:t,renderAsCircle:s}=this.props;if(!(0,l.canDisplayLabel)())return null;const a=function(e){const t=p(e);return null==t?null:d.default.get(t)}(e);if(!a||!a.name)return null;if(1===e.length){const e=t?(0,f.jsx)("span",{className:u.default.name,children:(0,f.jsx)(r.default,{text:a.name})}):null,n=(0,i.default)({[u.default.container]:!t&&!s,[u.default.containerCircleIconFull]:!!s,[u.default.containerFull]:t&&!s,[u.default.labelFilter]:"label-filter"===this.props.theme,[u.default.drawerTitle]:"drawer-title"===this.props.theme}),o=s?{backgroundColor:a.hexColor}:{},l=s?(0,f.jsx)(h.default,{name:"label",className:u.default.icon}):_(a.hexColor);return(0,f.jsxs)("div",{className:n,children:[(0,f.jsx)("div",{className:(0,i.default)(u.default.iconContainer,{[u.default.circleIcon]:s}),style:o,children:l}),e]})}return(0,f.jsx)("div",{className:u.default.container,children:(0,f.jsxs)("svg",{width:"18px",height:"15px",viewBox:"0 0 18 15",children:[(0,f.jsx)("path",{fill:a.hexColor,d:"M11.208,3.925H2.236C1.556,3.925,1,4.565,1,5.357v7.213C1,13.362,1.556,14,2.236,14h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,4.53C11.993,4.162,11.622,3.925,11.208,3.925z"}),(0,f.jsx)("path",{fill:"currentColor",d:"M15.541,7.832L13.164,3.93 c-0.423-0.698-1.15-1.142-1.956-1.142H2.595V2.432C2.595,1.64,3.151,1,3.831,1h9.1c0.414,0,0.782,0.237,1.005,0.605l2.696,4.433 L15.541,7.832z"})]})})}}function _(e){return(0,f.jsx)("svg",{width:"18px",height:"12px",viewBox:"0 0 18 12",className:u.default.icon,children:(0,f.jsx)("path",{fill:e||"#ffffff",d:"M11.208,0.925H2.236C1.556,0.925,1,1.565,1,2.357V9.57C1,10.362,1.556,11,2.236,11h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,1.53C11.993,1.162,11.622,0.925,11.208,0.925z"})},2)}m.displayName="LabelIcon";var g=(0,c.default)(m);t.default=g},19491:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,43348)).then((e=>e.default))),"AddContactToGroupFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(2038),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},79563:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(9488),s.e(7205)]).then(s.bind(s,31530)).then((e=>e.default))),"ArchivedFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},2711:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,9679)).then((e=>e.default))),"AttachMediaFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},97703:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,91338)).then((e=>e.default))),"AttachProductsFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1627),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},3031:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,68050)).then((e=>e.default))),"AttachVcardsFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1601),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},25215:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,40993)).then((e=>e.default))),"CaptureFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},96082:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(57740)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,58665)).then((e=>e.default))),"CartFlowLoadable");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},77512:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openCatalogManagementFlow=function(e,t){const s=(0,d.getMeUser)(),a=(0,h.buildProductCatalogContext)(new f.default,(0,l.getMaybeBizPlatformForLogging)(s.toString()),t),i=n.default.get(s);null==i?n.default.find(s).then((t=>{r.default.openDrawerLeft((0,_.jsx)(v,{catalog:t,catalogId:s,product:e}),void 0,void 0,a,m.FocusType.TABBABLE)})).catch((()=>{r.default.openDrawerLeft((0,_.jsx)(v,{catalogId:s,product:e}),void 0,void 0,a,m.FocusType.TABBABLE)})):(i.stale=!0,i.markProductCollectionOld(),r.default.openDrawerLeft((0,_.jsx)(v,{catalog:i,catalogId:s,product:e}),void 0,void 0,a,m.FocusType.TABBABLE))},t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(60028)),r=a(s(91952)),o=a(s(55454)),l=s(59014),d=s(86723),u=a(s(2408)),c=a(s(6615)),h=s(70790),f=a(s(90277)),p=a(s(33961)),m=s(68598),_=s(85893);const g=(0,p.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,85445)).then((e=>e.default))),"CatalogManagementFlow");t.requireBundle=g;const v=(0,i.default)({loader:g,loading:e=>(0,_.jsx)(c.default,{title:u.default.t(1088),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});var S=v;t.default=S},17272:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(86532)),o=a(s(33961)),l=a(s(96699)),d=s(85893);const u=(0,o.default)((()=>Promise.all([s.e(8295),s.e(9488),s.e(7205)]).then(s.bind(s,96699)).then((e=>e.default))),"ComposeBoxPanels");t.requireBundle=u;(0,i.default)({loader:u,loading:e=>(0,d.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});var c=l.default;t.default=c},39703:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,64732)).then((e=>e.default))),"ContactMsgInfoFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1235),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},26809:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(57818)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,16926)).then((e=>e.default))),"ContactUsModal");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1675),okText:r.default.t(1604),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},28174:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,50179)).then((e=>e.default))),"EditCaptureFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},85033:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,65682)).then((e=>e.default))),"ForwardMessageFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(910,{_plural:1}),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},14804:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,90581)).then((e=>e.default))),"GroupInviteLinkDrawer");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(964),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},73075:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,12158)).then((e=>e.default))),"GroupMsgInfoFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},34523:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(57818)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,50731)).then((e=>e.default))),"GroupV4InviteFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{okText:r.default.t(2035),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},87957:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(9488),s.e(7205)]).then(s.bind(s,78080)).then((e=>e.default))),"InfoFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},96516:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,92243)).then((e=>e.default))),"LabelFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1101),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},51434:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(57818)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,75402)).then((e=>e.default))),"LicensesPopup");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1104),okText:r.default.t(2085),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},63124:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ExpiredLocationDrawerLoadable=t.LiveLocationDrawerLoadable=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,78418)).then((e=>({LiveLocationDrawer:e.LiveLocationDrawer,ExpiredLocationDrawer:e.ExpiredLocationDrawer})))),"LiveLocationDrawer");t.requireBundle=u;const c=(0,i.default)({loader:()=>u().then((e=>e.LiveLocationDrawer)),loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1136),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.LiveLocationDrawerLoadable=c;const h=(0,i.default)({loader:()=>u().then((e=>e.ExpiredLocationDrawer)),loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1112),error:Boolean(e.error),retry:e.retry}),delay:n.default.LOADABLE_DELAY});t.ExpiredLocationDrawerLoadable=h},30977:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireSetHandlers=t.requireVoipCommonDisabled=t.requireVoip=t.requireCallCollection=t.requireStickerPackCollection=t.requireMsgCollection=t.requireChatCollection=t.requireLabelCollection=t.requireHandleVideoStreamingRequest=t.requireClearAppStates=t.requireStatusV3Collection=t.requireEmojiAssetMapCreator=t.requireEmojiConfig=t.requireHandleSocketMessage=t.requireLoadProtoVersions=t.requireContactCollection=t.requireMain=void 0;t.requireMain=()=>s(11426).Z;t.requireContactCollection=()=>s(17025).default;t.requireLoadProtoVersions=()=>({features:s(50284).Z,17:s(18339).Z});t.requireHandleSocketMessage=()=>s(49636).default;t.requireEmojiConfig=()=>({APPLE:{UNICODE_TO_EMOJI:s(6427).Z,SELECTOR:"apple"},WHATSAPP:{UNICODE_TO_EMOJI:s(32273).Z,SELECTOR:"wa"}});t.requireEmojiAssetMapCreator=()=>s(18781).default;t.requireStatusV3Collection=()=>s(83125).default;t.requireClearAppStates=()=>s(28279).Z;t.requireHandleVideoStreamingRequest=()=>s(66523).D;t.requireLabelCollection=()=>s(59606).default;t.requireChatCollection=()=>s(84758).default;t.requireMsgCollection=()=>s(45472).default;t.requireStickerPackCollection=()=>s(61848).default;t.requireCallCollection=()=>s(15971).default;t.requireVoip=()=>s(24082).default;t.requireVoipCommonDisabled=()=>s(69787);t.requireSetHandlers=()=>s(92309).y},43705:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(92231),n=a(s(2408)),r=a(s(67224)),o=a(s(2966)),l=s(85893);function d(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:r.default.circle,children:(0,l.jsx)(o.default,{name:"live-location-refresh"})}),(0,l.jsx)("div",{className:r.default.text,children:e.text})]})}function u(e){const{error:t,text:s,retry:a}=e;return(0,l.jsx)("div",{className:r.default.container,onClick:t?a:null,children:t?(0,l.jsx)(d,{text:s}):(0,l.jsx)(i.Loading,{})})}u.defaultProps={text:n.default.t(1102),retry:()=>window.location.reload()};var c=u;t.default=c},57740:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.jsx)("div",{children:(0,n.jsx)(i.default,{error:e.error})})};var i=a(s(43705)),n=s(85893)},86532:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)({[l.default.panelBodyError]:e.error},l.default.panelBody);return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:r.default.container}),(0,c.jsxs)("div",{className:l.default.gifPanel,children:[(0,c.jsx)("div",{className:u.default.barContainer}),(0,c.jsx)("div",{className:l.default.bodyContainer,children:(0,c.jsx)("div",{className:t,children:(0,c.jsx)("div",{className:o.default.noResults,children:(0,c.jsx)(d.default,(0,i.default)({},e))})})})]})]})};var i=a(s(81109)),n=a(s(94184)),r=a(s(40870)),o=a(s(85633)),l=a(s(98952)),d=a(s(43705)),u=a(s(75228)),c=s(85893)},57818:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)(n.default,{title:e.title,onOK:()=>{},okText:e.okText,okDisabled:!0,onCancel:()=>i.default.closeModal(),children:(0,l.jsx)("div",{className:o.default.container,children:(0,l.jsx)(r.default,{error:e.error})})})};var i=a(s(91952)),n=a(s(75940)),r=a(s(43705)),o=a(s(76067)),l=s(85893)},6615:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=i(s(6479)),o=s(67294),l=i(s(17747)),d=i(s(9042)),u=a(s(55588)),c=i(s(52087)),h=i(s(43705)),f=s(85893);class p extends o.PureComponent{constructor(...e){super(...e),this.onCancel=()=>{this.props.uim.uie.requestDismiss()}}render(){const e=this.props,{title:t,headerType:s,uim:a}=e,i=(0,r.default)(e,["title","headerType","uim"]);return(0,f.jsxs)(l.default,{children:[(0,f.jsx)(u.default,{title:t,type:s,onCancel:this.onCancel}),(0,f.jsx)(d.default,{children:(0,f.jsx)(h.default,(0,n.default)({},i))})]})}}p.defaultProps={headerType:u.DRAWER_HEADER_TYPE.SMALL},p.displayName="BaseLoadingDrawer";var m=(0,c.default)(p);t.default=m},74972:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.default)("overlay",d.default.mediaViewer),s=()=>n.default.closeModalMedia();return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:t,"data-animate-media-viewer":!0,children:[(0,h.jsxs)("div",{className:l.default.mediaPanelHeader,children:[(0,h.jsx)("div",{className:l.default.info}),(0,h.jsx)("div",{className:l.default.mediaPanelTools,children:(0,h.jsx)(u.MenuBar,{theme:"strong",children:(0,h.jsx)(u.MenuBarItem,{a8nText:"btn-close",icon:(0,h.jsx)(c.default,{name:"x-viewer"}),title:r.default.t(1923),onClick:s})},"media-panel-header")})]}),(0,h.jsx)("div",{className:d.default.mediaContent,dir:"ltr",onClick:s,children:(0,h.jsx)("div",{className:d.default.media,children:(0,h.jsx)(o.default,{error:e.error})})})]})})};var i=a(s(94184)),n=a(s(91952)),r=a(s(2408)),o=a(s(43705)),l=a(s(42784)),d=a(s(7674)),u=s(47941),c=a(s(2966)),h=s(85893)},74878:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,d.jsx)(l.default,{type:l.ModalTheme.Tower,children:(0,d.jsx)(o.default,(0,n.default)({headerType:r.DRAWER_HEADER_TYPE.POPUP},e))})};var n=i(s(81109)),r=s(55588),o=i(s(6615)),l=a(s(79475)),d=s(85893)},12979:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)("div",{className:r.default.container,children:(0,l.jsxs)("div",{className:r.default.body,dir:"ltr",children:[(0,l.jsx)("div",{className:r.default.imageContainer,children:(0,l.jsx)("div",{className:r.default.defaultIcon,children:(0,l.jsx)(o.default,{name:e.svgName})})}),e.error?(0,l.jsx)(n.LazyLoadRetry,{className:r.default.lazyLoadRetry,onClick:e.retry}):(0,l.jsx)(i.default,{})]})})};var i=a(s(89545)),n=s(92231),r=a(s(5582)),o=a(s(2966)),l=s(85893)},27260:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{error:t,text:s,retry:a}=e,c=(0,i.default)(o.default.closeButton,l.default.v3X,{}),h=(0,i.default)(o.default.closeButton,l.default.backIcon,{}),f=()=>n.default.closeModalMedia();return(0,u.jsxs)("div",{className:l.default.viewer,"data-animate-status-v3-viewer":!0,children:[(0,u.jsx)("button",{className:c,onClick:f,children:(0,u.jsx)(d.default,{name:"x-viewer"})}),(0,u.jsx)("button",{className:h,onClick:f,children:(0,u.jsx)(d.default,{name:"back",directional:!0})}),(0,u.jsx)(r.default,{error:t,text:s,retry:a})]})};var i=a(s(94184)),n=a(s(91952)),r=a(s(43705)),o=a(s(9614)),l=a(s(44704)),d=a(s(2966)),u=s(85893)},96467:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(d.default.closeButton,c.default.v3_x,{});return(0,p.jsx)("div",{className:c.default.modalBackground,"data-animate-status-v3-modal-background":!0,children:(0,p.jsxs)("div",{className:c.default.mainWrapper,children:[(0,p.jsx)("div",{className:u.default.listPanel,children:(0,p.jsxs)("div",{className:u.default.panelHeader,children:[(0,p.jsx)("div",{className:u.default.headerButtonsPrimary}),(0,p.jsx)("div",{className:u.default.headerText,children:(0,p.jsx)("span",{className:u.default.primaryHeaderText,children:o.default.t(1649)})}),(0,p.jsx)("div",{className:u.default.headerButtonsSecondary})]})}),(0,p.jsx)("div",{className:h.default.outStatusPanel,children:(0,p.jsx)(l.default,(0,i.default)({},e))}),(0,p.jsx)("button",{className:t,onClick:()=>r.default.closeModalMedia(),children:(0,p.jsx)(f.default,{name:"x-viewer"})})]})})};var i=a(s(81109)),n=a(s(94184)),r=a(s(91952)),o=a(s(2408)),l=a(s(43705)),d=a(s(9614)),u=a(s(58036)),c=a(s(15750)),h=a(s(86020)),f=a(s(2966)),p=s(85893)},22555:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,4255)).then((e=>e.default))),"ManageLabelFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1093),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},63362:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(74972)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(9488),s.e(7205)]).then(s.bind(s,23377)).then((e=>e.default))),"MediaViewerFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},58753:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(9488),s.e(7205)]).then(s.bind(s,88772)).then((e=>e.default))),"MerchantDetails");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},3268:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,58716)).then((e=>e.default))),"NewChatFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},52172:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,44692)).then((e=>e.default))),"NewGroupFlow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},45605:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.type===l.default.PROFILE?(0,u.jsx)(h,(0,i.default)((0,i.default)({},e),{},{a8nText:"profile-pic-picker"})):(0,u.jsx)(f,(0,i.default)((0,i.default)({},e),{},{a8nText:"group-pic-picker"}))},t.requireBundle=void 0;var i=a(s(81109)),n=a(s(68356)),r=a(s(55454)),o=a(s(12979)),l=a(s(76870)),d=a(s(33961)),u=s(85893);const c=(0,d.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,29827)).then((e=>e.default))),"PhotoPicker");t.requireBundle=c;const h=(0,n.default)({loader:c,loading:e=>(0,u.jsx)(o.default,{svgName:"default-user",error:Boolean(e.error),retry:e.retry}),delay:r.default.LOADABLE_DELAY}),f=(0,n.default)({loader:c,loading:e=>(0,u.jsx)(o.default,{svgName:"default-group",error:Boolean(e.error),retry:e.retry}),delay:r.default.LOADABLE_DELAY})},36465:(e,t,s)=>{"use strict";var a=s(95318);t.Z=function(){return L.apply(this,arguments)};var i=a(s(48926)),n=s(19491),r=s(79563),o=s(2711),l=s(97703),d=s(3031),u=s(25215),c=s(96082),h=s(39703),f=s(28174),p=s(85033),m=s(14804),_=s(73075),g=s(34523),v=s(87957),S=s(96516),C=s(63124),y=s(22555),E=s(63362),b=s(3268),T=s(52172),M=s(45605),x=s(62002),I=s(2606),P=s(3500),A=s(70475),N=s(19938),O=s(54500),w=s(56837),D=s(41253),j=s(46707),R=s(93474);function L(){return(L=(0,i.default)((function*(){try{const e=[(0,E.requireBundle)(),(0,v.requireBundle)()];yield Promise.all(e);const t=[(0,I.requireBundle)(),(0,M.requireBundle)(),(0,C.requireBundle)(),(0,j.requireBundle)(),(0,o.requireBundle)(),(0,u.requireBundle)(),(0,f.requireBundle)(),(0,_.requireBundle)(),(0,b.requireBundle)(),(0,T.requireBundle)(),(0,w.requireBundle)(),(0,l.requireBundle)(),(0,A.requireBundle)(),(0,O.requireBundle)(),(0,p.requireBundle)(),(0,d.requireBundle)(),(0,x.requireBundle)(),(0,c.requireBundle)(),(0,S.requireBundle)(),(0,y.requireBundle)(),(0,n.requireBundle)(),(0,D.requireBundle)(),(0,m.requireBundle)(),(0,R.requireBundle)(),(0,P.requireBundle)(),(0,h.requireBundle)(),(0,N.requireBundle)(),(0,g.requireBundle)(),(0,r.requireBundle)()];yield Promise.all(t)}catch(e){__LOG__(3)`Error prefetching loadables: ${e.stack}`}}))).apply(this,arguments)}},62002:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,48105)).then((e=>e.default))),"ProductDetailsFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1481),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},2606:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,28682)).then((e=>e.default))),"ProfileDrawer");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},3500:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(27260)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,58719)).then((e=>e.default))),"QuotedStatusV3Flow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},33961:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=function(e){return(t,s)=>{__LOG__(3)`Loadable error: ${t.stack}`;const a=s>1?"s":"";__LOG__(4,void 0,new Error,!0)`Failed to load a component`,SEND_LOGS(`loadable:${e} failed to load after [${s}] attempt${a}`)}}(t);let a,o="INIT",l=0;return function d(){switch(o){case"INIT":case"FAILURE":return o="INFLIGHT",a=e().then((e=>(e||s(new Error("Lazyload response is empty"),l),o="SUCCESS",e))).catch(function(){var e=(0,i.default)((function*(e){if(__LOG__(3)`Lazyload failure for component ${t}`,o="FAILURE",l++,l<=10)return yield(0,n.delayMs)(1e3*l),d();throw s(e,l),e}));return function(){return e.apply(this,arguments)}}()),a;case"INFLIGHT":case"SUCCESS":return(0,r.default)(a,"inflightPromise");default:return Promise.reject(new Error("retriable_promise_hoc:promiseStatus is invalid"))}}};var i=a(s(48926)),n=s(8139),r=a(s(7900))},70475:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,57825)).then((e=>e.default))),"SendGroupInviteFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(979),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},19938:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(57818)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,66386)).then((e=>e.default))),"SendLogsPopup");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1618),okText:r.default.t(1604),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},54500:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,45510)).then((e=>e.default))),"SendMsgMultiFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1279),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},56837:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(74878)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,1483)).then((e=>e.default))),"SendProductFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1279),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},41253:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961)),d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,55310)).then((e=>e.default))),"SettingsFlow");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(1629),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},46707:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(6615)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,72403)).then((e=>e.default))),"StarredDrawer");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},93474:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(96467)),o=a(s(33961)),l=s(85893);const d=(0,o.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,38992)).then((e=>e.default))),"StatusV3Flow");t.requireBundle=d;var u=(0,i.default)({loader:d,loading:e=>(0,l.jsx)(r.default,{error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=u},41631:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=a(s(68356)),n=a(s(55454)),r=a(s(2408)),o=a(s(6615)),l=a(s(33961));s(17040);var d=s(85893);const u=(0,l.default)((()=>Promise.all([s.e(8295),s.e(1702),s.e(9488),s.e(275)]).then(s.bind(s,409)).then((e=>e.default))),"VerificationDrawer");t.requireBundle=u;var c=(0,i.default)({loader:u,loading:e=>(0,d.jsx)(o.default,{title:r.default.t(2215),error:Boolean(e.error)}),delay:n.default.LOADABLE_DELAY});t.default=c},30906:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,s]=(0,n.useState)(null),a=()=>{r.default.closeModal()},i=e=>{s(e)},S=e.msg.list;if(!S)return null;const C=()=>{t&&((0,m.default)(e.msg,t),a())};let y;t&&(y=(0,v.jsxs)("div",{className:c.default.controlsSummary,children:[t.title,(0,v.jsx)("div",{className:c.default.btnActive,children:(0,v.jsx)(p.default,{large:!0,onClick:C,children:(0,v.jsx)(_.default,{directional:!0,name:"send"})})})]}));return(0,v.jsx)(f.default,{type:f.ModalTheme.Tower,children:(0,v.jsxs)(o.default,{theme:"products",children:[(0,v.jsx)(d.default,{title:S.buttonText,type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:a}),(0,v.jsx)(l.default,{theme:"padding",children:S.sections.map(((e,s)=>(0,v.jsx)(u.default,{title:e.title,theme:"list-section",children:e.rows.map(((e,s)=>(0,v.jsx)(h.default,{row:e,onSelect:i.bind(null,e),selected:e===t},s)))},s)))}),(0,v.jsx)(g.default,{transitionName:"slide-up-down-footer",className:c.default.container,children:y})]})})};var n=s(67294),r=i(s(91952)),o=i(s(17747)),l=i(s(9042)),d=a(s(55588)),u=i(s(25061)),c=i(s(17050)),h=i(s(27668)),f=a(s(79475)),p=i(s(3132)),m=i(s(66314)),_=i(s(2966)),g=i(s(82669)),v=s(85893)},27668:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(i.default,{primary:e.row.title,secondary:e.row.description,theme:"list-msg",onClick:e.onSelect,detail:(0,r.jsx)(n.default,{checked:e.selected,hover:!1,radio:!0,onChange:e.onSelect,systemUncheckedColor:!0})})};var i=a(s(55092)),n=a(s(88540)),r=s(85893)},35520:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPending=function(){if(!N.default.supportsFeature(N.default.F.MD_BACKEND)&&!b.default.connected)return!1;const e=s(91971).default,t=k.default.some((e=>e.ack===T.default.ACK.CLOCK&&e.local&&e.isSentByMe)),a=g.default.some((e=>!!e.composeContents.text));return t||a||e()},t.default=void 0;var n=i(s(59854)),r=i(s(94184)),o=s(8139),l=s(55084),d=s(99935),u=s(78285),c=s(71730),h=i(s(30381)),f=s(67294),p=i(s(29100)),m=i(s(43385)),_=i(s(61970)),g=i(s(84758)),v=s(23821),S=i(s(94822)),C=i(s(48392)),y=i(s(91952)),E=i(s(75940)),b=i(s(9322)),T=i(s(55454)),M=i(s(24076)),x=a(s(68559)),I=s(18781),P=s(86723),A=i(s(22079)),N=i(s(12950)),O=i(s(64923)),w=i(s(74121)),D=i(s(2408)),j=i(s(71681)),R=i(s(37236)),L=i(s(4231)),k=i(s(45472)),F=i(s(74937)),B=i(s(15172)),G=i(s(84408)),U=i(s(40630)),V=s(33690),H=i(s(65565)),W=i(s(87947)),Y=i(s(43600)),K=i(s(45745)),q=i(s(46364)),z=i(s(13038)),$=i(s(18732)),Q=i(s(12497)),X=i(s(12650)),Z=i(s(35371)),J=i(s(63477)),ee=i(s(96594)),te=i(s(1458)),se=i(s(9678)),ae=i(s(21053)),ie=s(62437),ne=i(s(72787)),re=i(s(53683)),oe=i(s(35080)),le=i(s(32052)),de=i(s(62615)),ue=s(85893);const ce=[[document,"mousemove"],[document,"scroll"],[document,"keydown"],[window,"focus"],[window,"resize"]];function he(){window.history.pushState({},"",window.location.href)}const fe=Math.random()<.001?s(31423).Z:null;class pe extends f.PureComponent{constructor(e){super(e),this.state={drawerActive:!1,drawerAnimating:!1,isVoipInitialized:b.default.isVoipInitialized},this._idleMonitor=null,this._serverPropsQueryLoop=null,this._rightDrawerOut=!1,this._setRefContainer=e=>{this._refContainer=e},this._refChatlistPanel=(0,f.createRef)(),this._refConversation=(0,f.createRef)(),this._onBlurTimer=new u.ShiftTimer((()=>{if(document.activeElement!==document.body)return;const{top:e}=ee.default.Manager;e&&e.uie.requestFocus()})),this.onBlur=()=>{this._onBlurTimer.debounce(10)},this._onRightDrawerIn=()=>{this._rightDrawerOut=!1,y.default.onPanesWillChange(3),this.setState({drawerActive:!0,drawerAnimating:!0},(()=>{y.default.onPanesDidChange(3)})),this._animateConversationPanel()},this._onRightDrawerOut=()=>{this._rightDrawerOut=!0;const e={drawerActive:this.state.drawerActive,drawerAnimating:!0};this._animateConversationPanel()?(y.default.onPanesWillChange(2),e.drawerActive=!1,this.setState(e,y.default.onPanesDidChange.bind(y.default,2))):this.setState(e)},this._onRightDrawerAnimationComplete=()=>{const e={drawerActive:this.state.drawerActive,drawerAnimating:!1};this.state.drawerActive&&this._rightDrawerOut&&(e.drawerActive=!1),this.setState(e)},this._skipNode=e=>{let t=!1;return y.default.existsDrawerLeft((s=>{var a;const i=null===(a=this._refChatlistPanel)||void 0===a?void 0:a.current;t=t||s&&Boolean(null==i?void 0:i.containsDOMNode(e))})),y.default.existsDrawerMid((s=>{var a;const i=null===(a=this._refConversation)||void 0===a?void 0:a.current;t=t||s&&Boolean(null==i?void 0:i.containsDOMNode(e))})),t},this._updateVoip=()=>{this.setState({isVoipInitialized:b.default.isVoipInitialized})},this._showTOS=()=>{switch(b.default.tos){case 1:case 2:y.default.openModal((0,ue.jsx)(X.default,{}),{blockClose:!0});break;case 3:__LOG__(2)`TOS (terms of service) stage number 3, logging out`,ne.default.logout()}},this._showSmbTos=()=>{b.default.smbTos&&y.default.openModal((0,ue.jsx)(K.default,{}),{blockClose:!0})},this._showUserNotice=()=>{N.default.supportsFeature(N.default.F.USER_NOTICE)&&(0,c.isNonZeroNumber)(F.default.noticeId)&&!0===F.default.blocking&&y.default.openModal((0,ue.jsx)(se.default,{notice:F.default}),{blockClose:!0})},this.showKeyboardShortcuts=e=>{let{target:t}=e;for(let e=0;e<5;e++){if((s=t)&&s.getAttribute("contentEditable")||s instanceof HTMLInputElement)return;t=t.parentNode}var s;y.default.openModal((0,ue.jsx)(re.default,{})),e.preventDefault()},q.default.uiActive=!0,q.default.markAvailable();const{platform:t}=b.default;(0,Y.default)((0,I.getEmojiTypeFromPlatform)(t)),_.default.setPlatform(t)}componentWillUnmount(){var e;this._onBlurTimer.cancel(),w.default.menuBatchRenderWith((()=>{w.default.trigger(`${O.default.Event}:${O.default.Events.LOGGED_OUT}`)})),te.default.canMuckHistory()&&window.history.back(),q.default.uiActive=!1,this._clearIdleMonitor(),this._clearServerPropsQueryLoop(),null===(e=this._stopTrackingFPS)||void 0===e||e.call(this)}componentDidMount(){const{listeners:e}=this.props;if(w.default.menuBatchRenderWith((()=>{w.default.trigger(`${O.default.Event}:${O.default.Events.LOGGED_IN}`)})),te.default.canMuckHistory()&&(window.history.pushState({},"",window.location.href),e.add(window,"popstate",he)),this._beginIdleMonitor(!0),this._beginServerPropsQueryLoop(),e.add(b.default,"change:isVoipInitialized",this._updateVoip),e.add(b.default,"change:tos",this._showTOS),this._showTOS(),b.default.isSMB&&(e.add(b.default,"change:smbTos",this._showSmbTos),this._showSmbTos()),e.add(F.default,"change:blocking change:noticeId",this._showUserNotice),this._showUserNotice(),Z.default.isSafari&&!A.default&&(0,P.shouldShowNUX)(T.default.NUX.SAFARI_LIMITED_SUPPORT)&&(setTimeout((()=>{const e=D.default.t(2238,{chrome_homepage:T.default.BROWSER_LINK.CHROME,firefox_homepage:T.default.BROWSER_LINK.FIREFOX,opera_homepage:T.default.BROWSER_LINK.OPERA});y.default.openModal((0,ue.jsx)(E.default,{onOK:()=>y.default.closeModal(),okText:D.default.t(1407),children:(0,ue.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}))}),250),(0,P.setNUX)(T.default.NUX.SAFARI_LIMITED_SUPPORT,{views:1,maxViews:1})),this._stopTrackingFPS=null==fe?void 0:fe.whenLessThan(1,((e,t)=>{new L.default.WebcUiFreeze({webcUiFreezeFps:e,webcUiFreezeT:(0,n.default)(t,0)}).commit(),__LOG__(2)`Low FPS Tracker: ${(0,n.default)(e,2)}fps, ${(0,n.default)(t,3)/1e3}s since page open.`})),oe.default.supported){const e=navigator.serviceWorker;e&&e.controller&&de.default.request(e.controller,le.default.PRELOAD_LAZY_LOADED_BUNDLES).catch((()=>{}))}if(H.default.wallpapersV2){const e=S.default.get(v.DEFAULT_PREFERENCE);if(e&&T.default.DEFAULT_CHAT_WALLPAPER!==e.wallpaperColor){const t=this.context.theme;if(!(0,ie.colorExistsInTheme)(e.wallpaperColor,t)){const s="light"===t?"dark":"light";if((0,ie.colorExistsInTheme)(e.wallpaperColor,s)){const t=(0,ie.toggleWallpaperColor)(e.wallpaperColor,s);e.set("wallpaperColor",t)}}}}}_beginIdleMonitor(e){let t=e?T.default.IDLE_TIMEOUT:0;this._idleMonitor=(0,d.promiseLoop)((()=>(0,o.delayMs)(t).addCancelControl().then((()=>{let e;q.default.markUnavailable(3e4);const s=new Promise((t=>{e=t}));return ce.forEach((([t,s])=>{this.props.listeners.add(t,s,e)})),s.addCancelControl().finally((()=>{ce.forEach((([t,s])=>{this.props.listeners.remove(t,s,e)}))})).then((function(){document.hasFocus()&&q.default.markAvailable(),t=T.default.IDLE_TIMEOUT}))})))).finally((()=>{this._idleMonitor=null})).catch((0,l.filteredCatch)(Promise.CancellationError,(()=>{}))).endWithControls("cancel")}_clearIdleMonitor(){this._idleMonitor&&this._idleMonitor.control.cancel()}_beginServerPropsQueryLoop(){this._serverPropsQueryLoop=m.default.setLocalTimeout((()=>{(0,V.queryServerProps)(),this._beginServerPropsQueryLoop()}),(0,h.default)().add(1,"days").valueOf())}_clearServerPropsQueryLoop(){m.default.clearTimeout(this._serverPropsQueryLoop)}_animateConversationPanel(){var e,t,s,a;const i=null===(e=this._refChatlistPanel)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getClientWidth();if(null==i)return!1;const n=null===(s=this._refContainer)||void 0===s?void 0:s.clientWidth;return null!=n&&(!!(null===(a=this._refConversation)||void 0===a?void 0:a.current)&&this._refConversation.current.animatePanel(n,i))}render(){const e=(0,r.default)(R.default.app,{three:this.state.drawerActive,two:!this.state.drawerActive,"app-animating":this.state.drawerAnimating,[R.default.noAnimation]:!this.props.animate});let t=(0,ue.jsx)(ae.default,{});return(0,ue.jsx)(J.default,{uimState:J.default.State.INACTIVE,displayName:"Main",children:(0,ue.jsxs)(Q.default,{className:e,onBlur:this.onBlur,onRef:this._setRefContainer,onShowKeyboardShortcuts:this.showKeyboardShortcuts,skipNode:this._skipNode,children:[(0,ue.jsx)(B.default,{}),(0,ue.jsx)(p.default,{}),(0,ue.jsx)(G.default,{}),(0,ue.jsx)($.default,{}),t,undefined,(0,ue.jsxs)("div",{className:R.default.drawerManager,children:[(0,ue.jsx)("div",{className:(0,r.default)(R.default.pane,R.default.paneOne),children:(0,ue.jsx)(x.default,{direction:x.Dir.LEFT})}),(0,ue.jsx)("div",{className:(0,r.default)(R.default.pane,R.default.paneTwo),children:(0,ue.jsx)(x.default,{direction:x.Dir.MID})}),(0,ue.jsx)("div",{className:(0,r.default)(R.default.pane,R.default.paneThree),children:(0,ue.jsx)(x.default,{direction:x.Dir.RIGHT,onDrawerIn:this._onRightDrawerIn,onDrawerOut:this._onRightDrawerOut,onDrawerAnimationComplete:this._onRightDrawerAnimationComplete})})]}),(0,ue.jsx)("div",{className:(0,r.default)(R.default.pane,R.default.paneOne,R.default.chatlistHeader),children:(0,ue.jsx)(C.default,{ref:this._refChatlistPanel,settings:W.default})}),(0,ue.jsx)("div",{className:(0,r.default)(R.default.pane,R.default.paneTwo),children:(0,ue.jsx)(M.default,{animate:this.props.animate,ref:this._refConversation})}),!1]})})}}pe.contextType=z.default,pe.displayName="Main";var me=(0,j.default)((0,U.default)(pe));t.default=me},52218:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onBlock:t,onCancel:s,onReportSpamBlock:a}=e,c=e=>{e.stopPropagation(),e.preventDefault(),t()},h=e=>{e.stopPropagation(),e.preventDefault(),s()},f=(0,u.jsx)(i.default,{a8nText:"popup-controls-block",type:"primary",onClick:c,children:r.default.t(317)},0),p=(0,u.jsx)(i.default,{a8nText:"popup-controls-report-spam",type:"secondary",onClick:e=>{e.stopPropagation(),e.preventDefault(),a()},children:r.default.t(1523)},1),m=(0,u.jsx)(i.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:h,children:r.default.t(1912)},2),_=(0,u.jsx)(d.default,{contact:e.contact}),g=(0,u.jsx)(o.default,{id:319,params:{contact:_}});return(0,u.jsx)(n.default,{handlers:{enter:c,escape:h},children:(0,u.jsx)(l.default,{children:g,actions:[p,f,m]})})};var i=a(s(69991)),n=a(s(39e3)),r=a(s(2408)),o=a(s(663)),l=a(s(79475)),d=a(s(78972)),u=s(85893)},17676:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){t.stopPropagation(),t.preventDefault(),e.onCancel&&e.onCancel()}const s=i.Children.count(e.actions)>0,a=e.onCancel?(0,d.jsx)(n.default,{a8nText:"popup-controls-cancel",type:s?"secondary":"primary",onClick:t,children:e.cancelText||o.default.t(1912)}):null,u={escape:e.onCancel?t:()=>{}},c=(0,d.jsxs)(d.Fragment,{children:[e.actions,a]});return(0,d.jsx)(r.default,{handlers:u,children:(0,d.jsx)(l.default,{actions:c,children:e.children,cover:e.cover,onDragChange:e.onDragChange,onDrop:e.onDrop,type:e.type,title:e.title})})};var i=s(67294),n=a(s(69991)),r=a(s(39e3)),o=a(s(2408)),l=a(s(79475)),d=s(85893)},83966:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(23279)),r=i(s(23493)),o=s(55084),l=s(78285),d=s(67294),u=s(58380),c=i(s(22719)),h=i(s(25142)),f=i(s(91952)),p=i(s(55454)),m=i(s(52384)),_=i(s(17747)),g=i(s(9042)),v=a(s(55588)),S=s(92231),C=s(54647),y=a(s(13540)),E=s(86025),b=i(s(67893)),T=i(s(40854)),M=i(s(47193)),x=i(s(86654)),I=s(86723),P=i(s(12950)),A=i(s(52087)),N=i(s(39e3)),O=i(s(642)),w=i(s(2408)),D=i(s(55325)),j=i(s(71681)),R=i(s(54083)),L=i(s(40630)),k=i(s(16967)),F=i(s(46714)),B=i(s(2966)),G=s(49002),U=s(85893);class V extends d.Component{constructor(e){super(e),this.flatListController=new b.default,this.state={searchText:"",searching:!1,resultsUnavailable:!1},this.setSearch=e=>{this.search=e},this.selection=new k.default([],(e=>e.id.toString())),this.pending=!1,this._batchRenderState={},this._handleScroll=e=>{this.shouldFTSSearch(e)&&(this.fts(),this.pending=!0)},this.handleScroll=(0,r.default)(this._handleScroll,100),this._debounceSetState=new l.ShiftTimer((()=>{this.setState(this._batchRenderState),this._batchRenderState={}})),this._batchSetState=(e,t=75)=>{Object.assign(this._batchRenderState,e),this._debounceSetState.debounce(t)},this.fts=(0,n.default)((()=>{this.pending=!1;const e=(this.state.searchText||"").trim();(0,O.default)(e)&&(this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this._batchSetState({searching:!0})})).then((()=>this.ftsMsgs.search({chat:this.props.chat,count:this._getSearchCount(),searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((t=>{t&&!t.canceled&&e===this.state.searchText.trim()&&this._batchSetState({searching:!1,resultsUnavailable:!1})})).catch((0,o.filteredCatch)(y.Unmount,(()=>{}))).catch((e=>{this.pending||this._batchSetState({searching:!1,resultsUnavailable:e instanceof C.E404})})))}),p.default.FTS_TYPING_DELAY),this.fullTextSearch=e=>{const t=e.trim();(0,O.default)(t)?(this.fts(),this.pending=!0,this.state.searching||this._batchSetState({searching:!0})):(this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.state.searching&&this._batchSetState({searching:!1,resultsUnavailable:!1}))},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.pending||this.state.searching||this.ftsMsgs.searchPromise||(0,G.numCodepoints)(this.state.searchText||"")<p.default.FTS_MIN_CHARS)&&e.scrollTop+p.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this.isFTSSearching=()=>{const e=this._batchRenderState;return"searching"in e?e.searching:this.state.searching},this.handleSearch=e=>{if(!e)return void this.handleStopSearch();e!==this.state.searchText&&(this.fullTextSearch(e),this.setState({searchText:e}),this._batchSetState({searchText:e,resultsUnavailable:!1}))},this.handleStopSearch=()=>{this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.setState({searchText:"",searching:!1})},this.handleFocusList=e=>{e.repeat||this._refMsglist&&(this.search&&!this.search.cursorIsAtEnd()||(e.preventDefault(),e.stopPropagation(),T.default.shouldIndicateFocus(),this._refMsglist&&this._refMsglist.focusFirst()))},this.handleOpenFirst=e=>{e.preventDefault();const t=this.ftsMsgs.head();if(!t)return;const s=t.chat,a=s.getSearchContext(t);f.default.focusChatTextInput(s),f.default.openChatAt(s,a)},this.handleFocusSearch=()=>{T.default.shouldIndicateFocus(),M.default.focus(this.search)},this.handleClose=()=>{this.props.uim.uie.requestDismiss()},this.indicateFocus=()=>{T.default.maybeIndicateFocus(this.refInputHotkey)},this.onScroll=e=>{this.handleScroll(e.currentTarget)},this.getEmptyChatlistState=e=>{if(e.length)return null;const t=(this.state.searchText||"").trim();return(0,G.numCodepoints)(t)>=p.default.FTS_MIN_CHARS?this.state.searching?(0,U.jsx)(S.SearchingMessages,{}):this.state.resultsUnavailable?(0,U.jsx)(S.SearchMessagesUnavailable,{}):(0,U.jsx)(S.SearchMessages,{}):(0,S.BeforeSearchMessages)(this.props.chat.title(),this.props.chat.isGroup)},this._setRefMsglist=e=>{this._refMsglist=e},this._setInputHotkey=e=>{this.refInputHotkey=e},this.ftsMsgs=new x.default(e.chat)}componentDidMount(){this.handleFocusSearch(),this.props.listeners.add(this.ftsMsgs,"bulk_remove",(()=>{this.forceUpdate()}))}componentWillUnmount(){this.handleScroll.cancel(),this.fts.cancel(),this.ftsMsgs.delete(!0),this._ftsPromise&&this._ftsPromise.cancel(),this._debounceSetState.cancel()}_getSearchCount(){return Math.round(window.innerHeight/E.DEFAULT_ITEM_HEIGHT)+1}render(){const e=this.ftsMsgs.toArray();let t=this.getEmptyChatlistState(e);if(null==t){const s=this.state.searchText?this.state.searchText.trim():null;t=(0,U.jsx)(R.default,{ref:this._setRefMsglist,flatListController:this.flatListController,isSearching:!!this.state.searchText,searchText:s,ftsResult:e,selection:this.selection,onFocusSearch:this.handleFocusSearch})}const s={down:this.handleFocusList},a=this.state.searching&&e.length?(0,U.jsx)("div",{className:c.default.searchSpinner,children:(0,U.jsx)(F.default,{stroke:6,size:24})}):null;let i;if(P.default.supportsFeature(P.default.F.MD_BACKEND)&&this.props.chat.endOfHistoryTransferType===u.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){const e=(this.state.searchText||"").trim();if((0,G.numCodepoints)(e)>=p.default.FTS_MIN_CHARS){const e=h.default.relativeDateStr((0,I.getHistorySyncEarliestDate)());i=(0,U.jsx)(m.default,{icon:(0,U.jsx)(B.default,{name:"content-search"}),theme:"list",secondary:w.default.t(734,{date:e}),children:w.default.t(918)})}}return(0,U.jsxs)(_.default,{children:[(0,U.jsx)(v.default,{title:w.default.t(1570),type:v.DRAWER_HEADER_TYPE.SMALL,onCancel:this.handleClose}),(0,U.jsx)(N.default,{handlers:s,onFocus:this.indicateFocus,onRef:this._setInputHotkey,className:c.default.panelSearch,children:(0,U.jsx)(D.default,{ref:this.setSearch,type:"chat-msg-search",onSearch:this.handleSearch,onEnter:this.handleOpenFirst,placeholder:w.default.t(1565),loading:this.state.searching})}),(0,U.jsxs)(g.default,{flatListControllers:[this.flatListController],className:c.default.panelBody,onScroll:this.onScroll,id:"pane-side",children:[t,a,i]})]},"search-modal")}}V.displayName="ChatSearch";var H=(0,A.default)((0,j.default)((0,L.default)(V)));t.default=H},99857:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=a(s(83966))},2185:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91749)),r=s(73554),o=a(s(40854)),l=a(s(47193)),d=a(s(39e3)),u=a(s(17101)),c=a(s(71681)),h=a(s(79485)),f=s(15298),p=a(s(71286)),m=s(74289),_=s(85893);class g extends i.Component{constructor(e){super(e),this.handleActiveChange=(e,t)=>{if("focus"===e){const e=this._refHotKeys;l.default.focus(e),t&&e&&(0,r.scrollIntoViewIfNeeded)(e)}this.setState({active:!!e})},this.handleClick=e=>{if((0,m.isFunction)(this.props.onClick)){const t=(0,f.unproxy)(this.props.msg),s=t.chat,a=s.getSearchContext(t);a.msg=t,this.props.onClick(e,s,a)}},this.handleEnter=e=>{e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),this.handleClick(e)},this.indicateFocus=()=>{var e;null===(e=this._refCell)||void 0===e||e.indicateFocus()},this.contextEnabled=()=>!1,this._setRefCell=e=>{this._refCell=e},this._setRefHotKeys=e=>{this._refHotKeys=e};const{msg:t,active:s}=e;this.state={active:!!s&&s.value===t}}componentDidMount(){this.props.active&&this.props.listeners.add(this.props.active,this.props.msg.id.toString(),this.handleActiveChange)}render(){const{msg:e,author:t}=this.props,s=(0,_.jsx)(p.default,{msg:e}),a=(0,_.jsx)(u.default,{msg:e.safe(),msgType:"Search",author:t,searchQuery:this.props.searchText?[this.props.searchText]:[]}),i={enter:this.handleEnter};return(0,_.jsx)(d.default,{handlers:i,onFocus:this.indicateFocus,onRef:this._setRefHotKeys,children:(0,_.jsx)(n.default,{ref:this._setRefCell,contextEnabled:this.contextEnabled,theme:"chat-search",active:!!this.state.active,primaryDetail:s,secondary:a,primary:void 0,onClick:this.handleClick})})}}g.CONCERNS={msg:["id","chat","isSentByMe","senderObj","rtl","dir","type"]},g.displayName="MessageClass";var v=(0,c.default)((0,h.default)(g,g.CONCERNS));t.default=v},58165:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.default)(e.msg,["id","chat"]),s=(0,n.default)(e.contact,["formattedShortName"]);return(0,r.jsx)(i.default,{msg:t,chat:t.chat,author:s.formattedShortName,searchText:e.searchText,onClick:e.onClick,active:e.active},t.id.toString())};var i=a(s(2185)),n=a(s(76006)),r=s(85893)},54083:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(91547)),o=a(s(55454)),l=s(62238),d=a(s(86025)),u=a(s(52087)),c=a(s(39e3)),h=a(s(2185)),f=a(s(58165)),p=s(85893);class m extends i.Component{constructor(){super(...arguments),this._listPointerEvents=!0,this._setRefHotKeys=e=>{this._refHotKeys=e},this.handleListPointerEventsOff=()=>{this._listPointerEvents=!1},this.handleListPointerEventsOn=()=>{this._listPointerEvents=!0},this.handleClick=(e,t,s)=>{e.preventDefault(),e.stopPropagation(),(0,l.findChat)(t.id).then((e=>{2===r.default.column&&this.props.uim.uie.requestDismiss(),n.default.focusChatTextInput(e),n.default.openChatAt(e,s)}))},this.getSelection=()=>this.props.ftsResult||[],this.renderItem=e=>{const{msg:t}=e;return t.sender&&t.isGroupMsg&&!t.isNotification&&!t.isSentByMe?(0,p.jsx)(f.default,{contact:t.senderObj,msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.handleClick,active:this.props.selection},t.id.toString()):(0,p.jsx)(h.default,{msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.handleClick,active:this.props.selection},t.id.toString())},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.handleFocusGain=e=>{e.target===this._refHotKeys&&this._listPointerEvents&&(this.props.selection.index<0?this.focusFirst():this.props.selection.reset(!0))},this.focusFirst=()=>{this.props.selection.setFirst(!0)},this.handleNextChat=e=>{e&&(e.preventDefault(),e.stopPropagation());const t=this.props.selection.next();this.props.selection.index!==t&&this.props.selection.setNext(!0)},this.handlePrevChat=e=>{e&&(e.stopPropagation(),e.preventDefault());this.props.selection.prev()>-1?this.props.selection.setPrev(!0):this.props.onFocusSearch()},this.props.selection.init(this.getSelection())}getData(){return this.props.ftsResult.map((e=>({itemKey:e.id.toString(),msg:e})))}render(){return(0,p.jsx)(c.default,{handlers:{down:e=>this.handleNextChat(e),up:e=>this.handlePrevChat(e)},onFocus:this.handleFocusGain,"data-tab":o.default.TAB_ORDERS.CHAT_SEARCH_MSG_LIST,onRef:this._setRefHotKeys,children:(0,p.jsx)(d.default,{flatListController:this.props.flatListController,direction:"vertical",data:this.getData(),renderItem:this.renderItem,forceConsistentRenderCount:!1})})}}m.displayName="MsgListBase";const _=(0,u.default)(m);t.default=class extends _{focusFirst(){this.getComponent().focusFirst()}}},43016:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(33287)),r=a(s(66103)),o=a(s(71681)),l=s(85893);class d extends i.Component{constructor(...e){super(...e),this.state={selected:this.props.selections.isSelected(this.props.model)||!!this.props.checked},this.handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})}}componentDidMount(){this.props.listeners.add(this.props.selections,this.props.model.id.toString(),this.handleSelectChange)}render(){const{children:e,disabled:t,tabIndex:s}=this.props;return(0,l.jsxs)("div",{className:r.default.checkboxSelectableWrapper,children:[(0,l.jsx)("div",{className:r.default.checkboxSelectableControl,children:(0,l.jsx)(n.default,{onChange:()=>{},checked:this.state.selected,disabled:t,tabIndex:s})}),e]})}}d.displayName="CheckboxSelectableWrapper";var u=(0,o.default)(d);t.default=u},38606:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(76610)),r=s(58380),o=a(s(33287)),l=a(s(28931)),d=a(s(91952)),u=a(s(75940)),c=a(s(85051)),h=a(s(12950)),f=s(78615),p=a(s(2408)),m=s(67357),_=s(97504),g=s(85893);class v extends i.Component{constructor(...e){super(...e),this.state={keepStarred:!h.default.supportsFeature(h.default.F.MD_BACKEND)},this.handleCancel=()=>{d.default.closeModal()},this.handleClear=()=>{const e=this.props.chat;e.pendingAction++,(0,m.sendClear)(e,this.state.keepStarred).finally((()=>{e.pendingAction--})),d.default.closeModal()},this._handleToggleStarred=()=>{this.setState({keepStarred:!this.state.keepStarred})}}getText(){switch(this.props.chat.kind){case r.CHAT_KIND.GROUP:return p.default.t(597);case r.CHAT_KIND.CHAT:return p.default.t(595);case r.CHAT_KIND.BROADCAST:return p.default.t(592);default:return""}}render(){return h.default.supportsFeature(h.default.F.MD_BACKEND)&&!(0,f.clearOrDeleteChatSyncEnabled)()?(0,g.jsx)(u.default,{title:this.getText(),onOK:this.handleClear,okText:p.default.t(594),onCancel:this.handleCancel,children:(0,g.jsx)("div",{className:l.default.note,children:(0,g.jsx)(_.TextParagraph,{theme:"muted",children:p.default.t(2053)})})}):(0,g.jsx)(u.default,{onOK:this.handleClear,okText:p.default.t(594),onCancel:this.handleCancel,children:(0,g.jsxs)("div",{children:[(0,g.jsx)(c.default,{text:this.getText()}),(0,g.jsxs)("div",{className:l.default.section,children:[(0,g.jsx)("div",{"data-a8n":n.default.key("menu-icon-clear-chat"),className:l.default.control,children:(0,g.jsx)(o.default,{onChange:this._handleToggleStarred,checked:this.state.keepStarred,id:"menu-icon-clear-chat"})}),(0,g.jsx)("label",{htmlFor:"menu-icon-clear-chat",className:l.default.label,children:p.default.t(1083)})]})]})})}}t.default=v,v.displayName="ClearChatPopup"},30841:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(55454)),o=i(s(17747)),l=i(s(9042)),d=a(s(55588)),u=i(s(52087)),c=i(s(2408)),h=i(s(14784)),f=s(85893);class p extends n.Component{constructor(...e){super(...e),this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()}}render(){var e;const t=this.props.chat.getReceivedVcardMsgs(),s=null!==(e=null==t?void 0:t.map((e=>(0,f.jsx)(h.default,{msg:e,displayType:r.default.DISP_TYPE.CONTACT_CARD,onMessageClick:this.handleClose},e.id.toString()))))&&void 0!==e?e:[];return(0,f.jsxs)(o.default,{children:[(0,f.jsx)(d.default,{title:c.default.t(712,{_plural:t?t.length:0}),onBack:this.handleClose,type:d.DRAWER_HEADER_TYPE.LARGE}),(0,f.jsx)(l.default,{children:s})]})}}p.displayName="ContactCardDrawer";var m=(0,u.default)(p);t.default=m},64800:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCancel:t,onSend:s}=e,a=(0,i.useCallback)((e=>{n.default.openModal((0,d.jsx)(l.default,{onCancel:t,onSend:s,description:null==e?void 0:e.description}))}),[t,s]);if((0,o.isInAppSupportEnabled)())return(0,d.jsx)(r.default,{onEmail:a,onCancel:t,onFailure:a});return(0,d.jsx)(l.default,{onCancel:t,onSend:s})};var i=s(67294),n=a(s(91952)),r=a(s(26809)),o=s(21134),l=a(s(19938)),d=s(85893)},73294:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.chatInfoStyles=void 0;a(s(56720));t.chatInfoStyles={primaryColor:{color:"niybmf2x"},highEmphasisColor:{color:"mao7dklk"},mediumEmphasisColor:{color:"kq8fr2r7"},iconColor:{color:"c1poma2z"},teal:{color:"esvtugf7"},red:{color:"bg1v5910"},sectionTitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"or9x5nie"},sectionTitleText:{color:"kq8fr2r7",fontSize:"bze30y65",lineHeight:"a4ywakfo"},drawerSectionContainer:{paddingTop:"i4pc7asj",paddingEnd:"bcymb0na",paddingBottom:"myel2vfb",paddingStart:"e8k79tju"},sectionContainerNoTitle:{paddingTop:"i5tg98hk",paddingEnd:"bcymb0na",paddingBottom:"przvwfww",paddingStart:"e8k79tju"}}},303:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(91952)),r=i(s(17747)),o=i(s(9042)),l=a(s(55588)),d=i(s(39e3)),u=i(s(2408)),c=a(s(79475)),h=i(s(46873)),f=s(50313),p=s(85893);t.default=e=>{const{vcard:t}=e;return(0,p.jsx)(c.default,{type:c.ModalTheme.Box,children:(0,p.jsxs)(r.default,{children:[(0,p.jsx)(l.default,{title:u.default.t(722),type:l.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.default.closeModal()}),(0,p.jsx)(o.default,{children:(0,p.jsx)(d.default,{children:(0,p.jsx)(h.default,{parsedVcard:t,thumbnail:(0,f.vcardThumbnail)(t)})})})]},"vcard-modal")})}},18260:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=s(67294),r=a(s(70521)),o=a(s(17025)),l=s(92231),d=s(86025),u=a(s(2408)),c=a(s(15058)),h=a(s(71681)),f=a(s(70422)),p=a(s(37314)),m=a(s(16967)),_=a(s(69217)),g=s(74289),v=s(85893);const S="HEADER",C="ROW";class y extends n.Component{constructor(...e){super(...e),this.selection=new m.default([],(e=>e.id)),this.state={searchFilter:void 0},this.handleSelect=(e,t)=>{if(t.type!==C)return;const s=t.contact;!0===this.props.filter(s)&&this.props.onSelect&&this.props.onSelect(s)},this.handleSearch=this.props.debounce((e=>{this.setState({searchFilter:e})}),100),this.renderItem=e=>{var t;const{filter:s,onSelect:a,onContext:n,contextEnabled:o,contextMenu:l,openContextOnClick:u,showNotifyName:c,participantCollection:h,listenForAdminChange:f}=this.props;switch(e.type){case S:return(0,v.jsx)(p.default,{header:null!==(t=e.header)&&void 0!==t?t:""});case C:const m=(0,g.isString)(s(e.contact)),_=m?"group-modal":null,y=m?s(e.contact):null,E=n&&l?{contextEnabled:o,contextMenu:l(e.contact.id),onContext:n}:{};return(0,v.jsx)(r.default,(0,i.default)({contact:e.contact,active:this.selection,theme:_,secondary:y,onClick:u&&n?n:m?void 0:a?()=>{a(e.contact)}:()=>{},waitIdle:!0,showNotifyName:c,listenForAdminChange:f,participantCollection:h},E));default:throw new d.UnknownDataError(e)}}}componentDidMount(){this.props.contacts||this.props.listeners.add(o.default,"add remove change:name",(()=>{this.forceUpdate()}))}getData(){const{filter:e}=this.props,t=u.default.accentFold(this.state.searchFilter),s=(0,f.default)(t),a=(this.props.contacts||o.default).filter((a=>e(a)&&(!t||t&&a.searchMatch(t,s))));this.selection.init(a.filter((t=>!0===e(t))));const i=[];if(!a.length)return i;let n,r;const l=a.length>10;for(let e=0;e<a.length;e++)n=a[e],l&&n.header!==r&&i.push({type:S,header:n.header,itemKey:`${n.header||""}_${e}`}),i.push({type:C,contact:n,itemKey:`${n.id.toString()}_${e}`}),r=n.header;return i}render(){const{title:e,onCancel:t}=this.props;return(0,v.jsx)(c.default,{title:e,data:this.getData(),renderItem:this.renderItem,emptyState:(0,v.jsx)(l.SearchContacts,{}),selection:this.selection,onSearch:this.handleSearch,searchPlaceholder:u.default.t(1566),onSelect:this.handleSelect,onCancel:t})}}y.defaultProps={filter:e=>o.default.isFilteredContact(e)},y.displayName="ContactsModal";var E=(0,h.default)((0,_.default)(y));t.default=E},46079:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,countryCode:t,onSave:s}){const[a,i]=(0,r.useState)(!1),[b,T]=(0,r.useState)([]),[M,x]=(0,r.useState)(""),[I,P]=(0,r.useState)(t),A=(0,r.useCallback)((()=>{d.default.closeModal(),s(I)}),[I,s]),N=(0,r.useCallback)((e=>{P(e.target.value)}),[]);return(0,r.useEffect)((()=>{(0,n.default)((function*(){i(!0),T(yield(0,u.getCountries)()),i(!1)}))()}),[]),(0,C.jsx)(g.default,{type:g.ModalTheme.Box,children:(0,C.jsxs)(c.default,{theme:"settings",children:[(0,C.jsx)(f.default,{title:e,type:f.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>d.default.closeModal()}),(0,C.jsx)(h.default,{theme:a?"center-content":void 0,children:a?(0,C.jsx)(p.FlexRow,{align:"center",justify:"center",children:(0,C.jsx)(p.FlexItem,{children:(0,C.jsx)(v.default,{})})}):(0,C.jsxs)(p.FlexColumn,{align:"stretch",children:[(0,C.jsx)(p.FlexItem,{shrink:0,xstyle:y.search,children:(0,C.jsx)(m.default,{icon:"search",theme:m.IconSectionTheme.NoMarginSmallGutter,content:(0,C.jsx)(S.default,{value:M,editable:!0,inputPlaceholder:_.default.t(1565),onChange:x,focusOnMount:!0,theme:"text-input",lowProfile:!0})})}),(0,C.jsx)(p.FlexItem,{xstyle:y.formWrapper,grow:1,children:(0,C.jsx)("form",{className:(0,o.default)(y.form),children:(0,C.jsx)("ol",{children:b.filter((([e,t])=>e.toLowerCase().includes(M.toLowerCase())||t.toLowerCase().includes(M.toLowerCase()))).map((([e,t])=>(0,C.jsx)(E,{selectedCountryCode:I,countryCode:e,label:t,onChange:N},e)))})})})]})}),(0,C.jsx)(p.FlexRow,{justify:"end",className:(0,o.default)(y.footer),children:(0,C.jsx)(p.FlexItem,{children:(0,C.jsx)(l.default,{type:"primary",onClick:A,className:(0,o.default)(y.submitButton),children:_.default.t(1564)})})})]})})};var n=i(s(48926)),r=s(67294),o=i(s(56720)),l=i(s(69991)),d=i(s(91952)),u=s(27546),c=i(s(17747)),h=i(s(9042)),f=a(s(55588)),p=s(63290),m=a(s(14179)),_=i(s(2408)),g=a(s(79475)),v=i(s(46714)),S=i(s(29458)),C=s(85893);const y={inputWrapper:{display:"p357zi0d",alignSelf:"o2es7gts",paddingEnd:"iffbo4e8"},formWrapper:{overflowY:"ag5g9lrv"},form:{paddingTop:"emrlamx0",paddingEnd:"bcymb0na",paddingBottom:"aiput80m",paddingStart:"e8k79tju"},search:{backgroundColor:"amaavye1",paddingTop:"emrlamx0",paddingEnd:"bcymb0na",paddingBottom:"aiput80m",paddingStart:"e8k79tju"},label:{display:"f804f6gw",paddingTop:"emrlamx0",paddingEnd:"f9ovudaz",paddingBottom:"aiput80m",paddingStart:"gx1rr48f",fontSize:"fe5nidar"},footer:{paddingTop:"emrlamx0",paddingEnd:"itegkywt",paddingBottom:"aiput80m",paddingStart:"rppts313",backgroundColor:"lkjmyc96",borderTop:"swyb62mu"},submitButton:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},indentedOption:{marginStart:"dl2ettod"},cursorPointer:{cursor:"ajgl1lbb"}};function E({selectedCountryCode:e,countryCode:t,label:s,"data-testid":a="country-selector-popup-option",onChange:i}){return(0,C.jsx)("li",{className:(0,o.default)(y.cursorPointer),children:(0,C.jsxs)(p.FlexRow,{align:"center",children:[(0,C.jsx)(p.FlexItem,{xstyle:y.inputWrapper,children:(0,C.jsx)("input",{id:t,value:t,type:"radio",name:"countryCode",checked:t===e,className:(0,o.default)(y.cursorPointer),onChange:i})}),(0,C.jsx)(p.FlexItem,{grow:1,children:(0,C.jsx)("label",{htmlFor:t,className:(0,o.default)(y.label,y.cursorPointer),"data-testid":`${a}-label`,children:s})})]})})}},39746:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onCancel:t,onDeleteOrExit:s}=e,a=(0,f.default)(e.chat,["isReadOnly","isGroup","isUser","isBroadcast"]),m=()=>a.isGroup?a.isReadOnly?u.default.t(751):u.default.t(891):a.isUser?u.default.t(749):a.isBroadcast?u.default.t(745):void 0,_=()=>a.isGroup?a.isReadOnly?u.default.t(750):u.default.t(890):a.isUser||a.isBroadcast?u.default.t(748):void 0,g=()=>{i.default.closeModal(),t&&(0,h.isFunction)(t)&&t()},v=()=>{let e;a.isGroup?e=a.isReadOnly?(0,r.sendDelete)(a):(0,l.sendExitGroup)(a):a.isUser||a.isBroadcast?e=(0,r.sendDelete)(a):__LOG__(3)`deleteChatPopup:onDelete Unsupported chat type`,(0,h.isFunction)(s)&&e&&s(e),i.default.closeModal()};return d.default.supportsFeature(d.default.F.MD_BACKEND)&&e.isDelete?(0,p.jsx)(n.default,{title:m(),onOK:v,okText:_(),onCancel:g,children:(0,p.jsx)(c.TextDiv,{theme:"muted",children:u.default.t(2054)})}):(0,p.jsx)(n.default,{onOK:v,okText:_(),onCancel:g,children:(0,p.jsx)(o.default,{text:m()})})};var i=a(s(91952)),n=a(s(75940)),r=s(61670),o=a(s(85051)),l=s(36193),d=a(s(12950)),u=a(s(2408)),c=s(97504),h=s(74289),f=a(s(76006)),p=s(85893)},7235:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(69991)),n=a(s(55454)),r=a(s(68077)),o=a(s(1638)),l=s(4919),d=s(57092),u=a(s(99942)),c=s(86723),h=a(s(39e3)),f=a(s(2408)),p=a(s(79475)),m=a(s(63477)),_=s(85893);class g extends u.default{constructor(){super(),this.onDelete=()=>{this.end()},this.onRevoke=()=>{this._showRevokeNux?(this.push(this._renderRevokeNux(),"none"),(0,c.setNUX)(n.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX,{views:1,maxViews:1})):this.end()},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._openRevokeLearnMore=()=>{(0,l.openExternalLink)((0,d.getRevokeFaqUrl)())},this._onRevokeNuxClicked=()=>{this.end()},this._renderRevokeNux=()=>{const e=[(0,_.jsx)(i.default,{type:"secondary",onClick:this._openRevokeLearnMore,children:f.default.t(1103)},1),(0,_.jsx)(i.default,{type:"primary",onClick:this._onRevokeNuxClicked,children:f.default.t(2085)},0)];return(0,_.jsx)(m.default,{displayName:"MsgRevokeNuxModal",escapable:!1,children:(0,_.jsx)(h.default,{handlers:{enter:this._onRevokeNuxClicked},children:(0,_.jsx)(p.default,{actions:e,children:(0,_.jsx)("div",{className:r.default.label,children:f.default.t(1562)})})})})},this._showRevokeNux=(0,c.shouldShowNUX)(n.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX)}componentDidMount(){const{chat:e,msgList:t,deletePrompt:s,revokePrompt:a,toastPosition:i,onCancel:n,isMsgVisible:r}=this.props;this.push((0,_.jsx)(o.default,{chat:e,msgList:t,deletePrompt:s,revokePrompt:a,toastPosition:i,onDelete:this.onDelete,onRevoke:this.onRevoke,onPopupCancel:this.onPopupCancel,onCancel:n,isMsgVisible:r}))}}t.default=g},1638:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(76610)),r=a(s(69991)),o=a(s(33287)),l=a(s(91952)),d=a(s(55454)),u=a(s(68077)),c=a(s(39e3)),h=a(s(2408)),f=a(s(79475)),p=s(85893);class m extends i.Component{constructor(...e){super(...e),this.state={clearMedia:!0},this.handleCancel=()=>{const{onPopupCancel:e}=this.props;e()},this.handleRevoke=()=>{const{chat:e,msgList:t,toastPosition:s,onCancel:a,onRevoke:i}=this.props,n=t.filter((e=>e.type!==d.default.MSG_TYPE.REVOKED));n.length>0&&l.default.sendRevokeMsgs(e,n,this.state.clearMedia,null,s),i(),a&&a()},this.handleDelete=()=>{const{chat:e,msgList:t,toastPosition:s,onCancel:a,onDelete:i,isMsgVisible:n}=this.props;l.default.sendDeleteMsgs(e,t,this.state.clearMedia,null,s),i(),a&&a(),l.default.existsDrawerRight((e=>{e&&n&&t.forEach((e=>{n(e.id,!0)&&l.default.closeDrawerRight()}))}))},this._handleToggleClearMedia=()=>{this.setState({clearMedia:!this.state.clearMedia})}}render(){let e;const{msgList:t,deletePrompt:s,revokePrompt:a}=this.props;t.some((e=>e.asMms&&e.type!==d.default.MSG_TYPE.STICKER))&&(e=(0,p.jsxs)("div",{className:u.default.container,onClick:this._handleToggleClearMedia,children:[(0,p.jsx)("div",{"data-a8n":n.default.key("menu-icon-revoke-message"),className:u.default.control,children:(0,p.jsx)(o.default,{onChange:this._handleToggleClearMedia,checked:this.state.clearMedia})}),(0,p.jsx)("div",{className:u.default.label,children:h.default.t(596)})]},0));const i=(0,p.jsx)(r.default,{type:"secondary",onClick:this.handleCancel,children:h.default.t(1912)},0);let l=null,m=null,_=null,g=()=>{};const v=t.length,S=h.default.t(755,{_plural:v});a&&(l=(0,p.jsx)(r.default,{a8nText:"popup-controls-revoke",type:"secondary",onClick:this.handleRevoke,children:h.default.t(1559)},1),g=this.handleRevoke),s&&(m=(0,p.jsx)(r.default,{a8nText:"popup-controls-delete",type:a?"secondary":"primary",onClick:this.handleDelete,children:h.default.t(746)},2),g=this.handleDelete);const C={enter:g,escape:this.handleCancel};return m&&(_=l?(0,p.jsxs)("div",{className:u.default.buttons,children:[(0,p.jsx)("div",{className:u.default.button,children:m}),(0,p.jsx)("div",{className:u.default.button,children:i}),(0,p.jsx)("div",{className:u.default.button,children:l})]}):[i,m]),(0,p.jsx)(c.default,{handlers:C,children:(0,p.jsx)(f.default,{title:S,actions:_,children:[e]})})}}t.default=m,m.displayName="DeleteRevokeMsgPopup"},17747:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(69209)),o=a(s(34169)),l=a(s(42480)),d=s(85893);function u(e,t){const{children:s,onDrop:a,onDragChange:u,theme:c}=e,h=(0,n.useRef)(null),f=(0,n.useRef)(null);(0,n.useImperativeHandle)(t,(()=>({getElement:()=>h.current})));const p=(0,i.default)(l.default.drawer,{[l.default.white]:"invite"===c||"products"===c||"labels"===c||"settings"===c||"archived"===c,[l.default.drawerCapture]:"capture-contain"===c||"capture-cover"===c,[l.default.drawerEdit]:"edit"===c,[l.default.drawerMedia]:"media"===c,[l.default.drawerGallery]:"gallery"===c,[l.default.drawerCatalog]:"catalog"===c,[l.default.striped]:"striped"===c,[l.default.belowHeader]:"capture-contain"===c||"media"===c,"drawer-verification":"verification"===c});return(0,d.jsxs)(r.default,{ref:h,className:p,onDragOver:e=>{var t;null===(t=f.current)||void 0===t||t.onDragOver(e)},onDragStart:e=>{var t;null===(t=f.current)||void 0===t||t.onDragStart(e)},onDragEnd:e=>{var t;null===(t=f.current)||void 0===t||t.onDragEnd(e)},children:[a&&(0,d.jsx)(o.default,{ref:f,disableFromWithin:!0,onDragChange:u,onDrop:a}),s]})}var c=(0,n.forwardRef)(u);t.default=c},9042:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(6479)),r=a(s(94184)),o=s(67294),l=a(s(79634)),d=a(s(19257)),u=s(85893),c=(0,o.forwardRef)((function(e,t){const{overflow:s,flatListControllers:a,children:o,theme:c}=e,h=(0,n.default)(e,["overflow","flatListControllers","children","theme"]),f=(0,r.default)(l.default.container,{[l.default.noscroll]:"hidden"===s,[l.default.centerItem]:"center-content"===c,[l.default.padding]:"padding"===c,[l.default.centerColumn]:"center-column"===c});return a&&a.length>0?(0,u.jsx)(d.default,(0,i.default)((0,i.default)({flatListControllers:a,className:f},h),{},{children:o})):(0,u.jsx)("div",(0,i.default)((0,i.default)({className:f,ref:t},h),{},{children:o}))}));t.default=c},79864:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,s(67294).createContext)({type:null});t.default=a},55588:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DRAWER_HEADER_TYPE=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(74324)),l=a(s(47193)),d=a(s(2408)),u=s(47941),c=a(s(2966)),h=s(97504),f=a(s(82669)),p=s(85893);const m={SMALL:"small",LARGE:"large",POPUP:"popup",OFFSET:"offset",MULTI_MEDIA_GALLERY:"multiMediaGallery",LABELS:"labels"};t.DRAWER_HEADER_TYPE=m;var _=e=>{const{title:t,onBack:s,onCancel:a,type:_,children:g,menu:v,headingLevel:S,focusBackOrCancel:C}=e,y=(0,n.useRef)(null);(0,n.useEffect)((()=>{C&&y.current&&l.default.focus(y.current)}),[C]);const E=s?(0,p.jsx)("button",{className:o.default.btnCloseDrawer,"data-a8n":r.default.key("btn-closer-drawer"),onClick:s,"aria-label":d.default.t(4),ref:y,children:(0,p.jsx)(c.default,{name:"back",directional:!0})}):null,b=a?(0,p.jsx)("button",{className:o.default.btnCloseDrawer,"data-a8n":r.default.key("btn-closer-drawer"),onClick:a,"aria-label":d.default.t(6),ref:y,children:(0,p.jsx)(c.default,{name:"x"})}):null,T=null!=v?(0,p.jsx)("span",{className:o.default.paneListControls,children:(0,p.jsx)(u.MenuBar,{theme:_!==m.SMALL?"inverse":null,children:(0,p.jsx)(f.default,{transitionName:"btn",children:v})},"drawer-header")}):null,M=(0,i.default)({[o.default.multiMediaGallery]:_===m.MULTI_MEDIA_GALLERY,[o.default.labels]:_===m.LABELS,[o.default.drawerHeader]:_===m.LARGE||_===m.MULTI_MEDIA_GALLERY||_===m.LABELS,[o.default.drawerHeaderSmall]:_===m.SMALL,[o.default.drawerHeaderOffset]:_===m.OFFSET||_===m.POPUP,[o.default.drawerHeaderPopup]:_===m.POPUP}),x=t&&null!=g?(0,p.jsx)("div",{className:o.default.side,children:g}):null;return(0,p.jsx)("header",{className:M,children:(0,p.jsxs)("div",{className:o.default.drawerTitle,"data-animate-drawer-title":!0,children:[(0,p.jsxs)("div",{className:o.default.drawerTitleAction,children:[E,b]}),(0,p.jsx)("div",{"data-a8n":r.default.key("drawer-title-body"),className:o.default.drawerTitleBody,children:(0,p.jsx)(h.TextHeader,{level:S,weight:"inherit",customSize:"inherit",children:t||g})}),x,T]})})};t.default=_},33249:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=a(s(10226)),r=s(20845),o=s(85893);var l=({title:e,icon:t,onClick:s,children:a})=>{const l=(0,i.default)(n.default.itemBody,{[n.default.row]:t}),d=(0,i.default)({[n.default.main]:t}),u=(0,i.default)({[n.default.side]:t});return(0,o.jsx)("div",{className:n.default.item,onClick:s,role:s?"button":"",children:(0,o.jsxs)("div",{className:l,children:[(0,o.jsxs)("div",{className:d,dir:"auto",children:[(0,o.jsx)(r.SelectableDiv,{className:n.default.primary,selectable:!0,children:e}),(0,o.jsx)("div",{className:n.default.secondary,children:a})]}),(0,o.jsx)("div",{className:u,children:t})]})})};t.default=l},68559:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Dir=t.Transition=void 0;var n=i(s(11700)),r=i(s(18446)),o=i(s(73955)),l=s(67294),d=i(s(91952)),u=i(s(79864)),c=i(s(34166)),h=i(s(47193)),f=i(s(71681)),p=a(s(68598)),m=s(74289),_=i(s(63477)),g=i(s(64029)),v=i(s(82669)),S=s(85893);const C={LEFT:"drawer-left",MID:"slide-up",NONE:"none",RIGHT:"slide-left"};t.Transition=C;t.Dir={LEFT:"left",MID:"mid",RIGHT:"right"};const y=e=>C[e.toUpperCase()];class E extends l.PureComponent{constructor(...e){super(...e),this.state={drawer:void 0,drawerId:null,transition:y(this.props.direction),uim:void 0,option:void 0,drawerContext:void 0,focusType:p.FocusType.CUSTOM},this._blockTransition=null,this._flowDismissPending=!1,this.setRefUIE=e=>{this.refUIE=e},this.updateContext=e=>{this.setState({drawerContext:e})},this.openFlow=(e,t=y(this.props.direction),s,a,i,n)=>{const l=(0,o.default)(`DrawerManager${this.props.direction}`);if(!this._flowDismissPending&&this.state.drawer){if(null!=e.key&&(0,r.default)(this.state.drawer.key,e.key))return;this._blockTransition=C.NONE,this.setState({drawer:e,drawerId:l,transition:t,uim:s,option:a,drawerContext:i,focusType:n},(()=>{this._blockTransition=t}))}else this.props.onDrawerIn&&this.props.onDrawerIn(),this.setState({drawer:e,drawerId:l,transition:t,uim:s,option:a,drawerContext:i,focusType:n})},this._existsFlow=e=>{e(!0!==this._flowDismissPending&&!!this.state.drawer)},this.closeFlow=e=>{e&&this.state.drawerId!==e||this.state.drawer&&(this.props.onDrawerOut&&this.props.onDrawerOut(),this._flowDismissPending=!0,this.setState({drawer:void 0,drawerContext:void 0},(()=>{this._flowDismissPending=!1})))},this.requestFocus=()=>{if(!this.refUIE)return;const e=this.refUIE.getNode();e&&!e.contains(document.activeElement)&&h.default.focus(e)},this._onAnimationComplete=e=>{const t=this.props.onDrawerAnimationComplete;t&&t();const{option:s,drawer:a}=this.state;s&&a&&e===this.state.drawerId&&(0,m.isFunction)(s.onEnterAnimationComplete)&&s.onEnterAnimationComplete()}}componentDidMount(){this.props.listeners.add(d.default,`open_drawer_${this.props.direction}`,this.openFlow),this.props.listeners.add(d.default,`exists_drawer_${this.props.direction}`,this._existsFlow),this.props.listeners.add(d.default,`close_drawer_${this.props.direction}`,this.closeFlow),this.props.listeners.add(d.default,`update_context_${this.props.direction}`,this.updateContext)}componentDidUpdate(e){this.props.direction!==e.direction&&(e.listeners.remove(d.default,`open_drawer_${e.direction}`,this.openFlow),e.listeners.remove(d.default,`exists_drawer_${e.direction}`,this._existsFlow),e.listeners.remove(d.default,`close_drawer_${e.direction}`,this.closeFlow),this.props.listeners.add(d.default,`update_context_${this.props.direction}`,this.updateContext),this.props.listeners.add(d.default,`open_drawer_${this.props.direction}`,this.openFlow),this.props.listeners.add(d.default,`exists_drawer_${this.props.direction}`,this._existsFlow),this.props.listeners.add(d.default,`close_drawer_${this.props.direction}`,this.closeFlow),this.props.listeners.add(d.default,`update_context_${this.props.direction}`,this.updateContext))}render(){const{direction:e}=this.props;let{drawer:t,drawerId:s,transition:a,option:i,focusType:r}=this.state;const o=this._blockTransition||a,l=i&&i.noFocus?null:this.requestFocus;return t&&(t=(0,S.jsx)(_.default,{displayName:`Drawer${(0,n.default)(e)}`,escapable:!0,ref:this.setRefUIE,requestFocus:l,requestDismiss:this.closeFlow.bind(null,s),children:(0,S.jsx)(p.default,{style:{height:"100%"},focusType:r,children:this.state.drawerContext?(0,S.jsx)(u.default.Provider,{value:this.state.drawerContext,children:t}):(0,S.jsx)(S.Fragment,{children:t})})},s)),(0,S.jsx)(g.default.Consumer,{children:e=>(0,S.jsx)(g.default.Provider,{value:this.state.uim||e,children:(0,S.jsx)(v.default,{className:c.default.container,transitionName:o,onAnimationComplete:this._onAnimationComplete.bind(this,s),children:t})})})}}E.displayName="DrawerManager";var b=(0,f.default)(E);t.default=b},25061:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e,title:t,titleXStyle:s,titleTextXStyle:a,subtitle:h,titleOnClick:f,a8nText:p,"data-list-scroll-offset":m,theme:_,animation:g=!0,className:v,xstyle:S,onRef:C}){const y=_?o.default[_]:null,E=(0,i.default)(o.default.container,{[o.default.animate]:g},y,v,(0,n.default)(S));let b;null!=t&&(b=(0,u.jsx)("div",{className:(0,i.default)(o.default.title,(0,n.default)(c,s)),"data-a8n":r.default.key(p),role:f?"button":null,onClick:f,children:(0,u.jsx)(l.default,{side:h,ellipsify:!0,children:(0,u.jsx)(d.TextSpan,{xstyle:a,theme:"list-section"===_||"title-larger"===_?"section-title-larger":"section-title",children:t})})}));return(0,u.jsxs)("div",{ref:C,className:E,"data-list-scroll-offset":m,children:[b,e]})};var i=a(s(94184)),n=a(s(56720)),r=a(s(76610)),o=a(s(61422)),l=a(s(16211)),d=s(97504),u=s(85893);const c={paddingTop:"gaujl5hk",paddingEnd:"bcymb0na",paddingBottom:"p9a4hubg",paddingStart:"e8k79tju"}},37719:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(41143)),n=s(67294),r=a(s(91952)),o=a(s(75940)),l=a(s(17025)),d=a(s(4919)),u=s(57092),c=a(s(5503)),h=a(s(80821)),f=s(86723),p=a(s(23388)),m=a(s(12950)),_=a(s(2408)),g=a(s(65565)),v=s(15298),S=s(62701),C=a(s(61057)),y=a(s(69635)),E=a(s(98532)),b=s(28535),T=s(10608),M=s(89573),x=s(85893);class I extends n.Component{constructor(...e){super(...e),this.handleVerificationClick=()=>{const{jid:e,chatId:t}=this.props;if(!e)return;const s=e.equals((0,f.getMeUser)())?t:e;r.default.closeModal(),r.default.verificationDrawer(s)}}componentDidMount(){if(m.default.supportsFeature(m.default.F.MD_BACKEND)){const e=(0,f.assertGetMe)(),t=this.props.jid?[(0,M.createWid)(this.props.jid.toString()),e]:[e];(0,T.getFanOutList)(t).then((e=>{(0,b.ensureE2ESessions)(e)}))}}render(){let e,t,s=null,a=null,n=null,f=null,b=_.default.t(1103),T=null;n=()=>r.default.closeModal(),f=_.default.t(2085);const{e2eSubtype:M,chatId:I,chat:P,msg:A}=this.props;switch(M){case"info_encrypted":t=(0,u.getE2EFaqUrl)(),y.default.isGroup(I)?(null==P?void 0:P.isSupportGroup())?(e=_.default.t(1677),b=_.default.t(1678),t=(0,u.getSupportChatSafetyFaqUrl)()):e=C.default.isGroupCallEnabled()?_.default.t(1994):_.default.t(1993):y.default.isBroadcast(I)&&(e=_.default.t(1903));break;case"identity":{const{jid:i}=this.props,r=i&&l.default.get(i);if(r&&r.isMe)if(__LOG__(4,void 0,new Error,!0)`formatE2ENotification: receive identity notification of self`,SEND_LOGS("SelfIdentityNotificationError"),y.default.isGroup(I))e=_.default.t(2150);else if(y.default.isBroadcast(I))e=_.default.t(2148);else{const t=l.default.get(I),s=t?t.formattedName:(0,E.default)(I);e=_.default.t(2149,{name:s})}else{const t=r?r.formattedName:(0,E.default)(this.props.jid);e=_.default.t(2147,{name:t})}m.default.supportsFeature(m.default.F.MD_BACKEND)?(s=n,a=f,n=this.handleVerificationClick,f=_.default.t(2207),t=(0,u.getMDCodeChangeFaqUrl)()):(s=n,a=_.default.t(1912),t=(0,u.getCodeChangeFaqUrl)());break}case"device":{(0,i.default)(null!=A,"msg shouldn't be null");const r=(0,v.unproxy)(A);if(e=(0,c.default)(r,!0),m.default.supportsFeature(m.default.F.MD_BACKEND)){s=n,a=f;const e=r.body?l.default.get(r.body):null;e&&e.isMe&&(I.isGroup()||I.isBroadcast())?(n=void 0,f=void 0):(n=this.handleVerificationClick,f=_.default.t(2207)),t=(0,u.getMDCodeChangeFaqUrl)()}else s=n,a=_.default.t(1912),t=(0,u.getCodeChangeFaqUrl)();break}case"encrypt":case"encrypt_now":default:if(t=(0,S.securityUrl)(),y.default.isGroup(I))(null==A?void 0:A.chat.isSupportGroup())?(e=_.default.t(1677),b=_.default.t(1678),t=(0,u.getSupportChatSafetyFaqUrl)()):e=C.default.isGroupCallEnabled()?_.default.t(1920):_.default.t(1919);else if((0,p.default)(I.user))e=_.default.t(1677),b=_.default.t(1678),t=(0,u.getSupportChatSafetyFaqUrl)();else if(y.default.isBroadcast(I))e=_.default.t(1919);else{const s=C.default.isVoiceCallEnabled()||C.default.isVideoCallEnabled();if(g.default.bspSystemMessageEnabled)T=_.default.t(795),e=s?_.default.t(796):_.default.t(797);else{const a=l.default.get(I);if(a&&a.isEnterprise){const s=(0,h.default)(a);e=_.default.t(2040,{businessName:s}),t=(0,u.getE2EEnterpriseFaqUrl)()}else e=s?_.default.t(1920):_.default.t(1919)}}}const N=(0,x.jsx)(d.default,{href:t,children:b});return(0,x.jsxs)(o.default,{title:T,onOK:n,okText:f,onCancel:s,cancelText:a,children:[e,"",N]})}}t.default=I,I.displayName="E2EInfoModal"},11695:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(69991)),o=i(s(91952)),l=i(s(55454)),d=i(s(17747)),u=i(s(9042)),c=a(s(55588)),h=i(s(25061)),f=s(13976),p=i(s(17840)),m=i(s(51119)),_=i(s(4919)),g=s(57092),v=s(86723),S=s(33906),C=i(s(52087)),y=i(s(2408)),E=s(21134),b=i(s(4231)),T=i(s(40298)),M=s(73533),x=s(97504),I=a(s(49201)),P=s(85893);class A extends n.Component{constructor(e){super(e),this._saveSetting=()=>{const{chat:e}=this.props,{duration:t}=this.state;if(t===this._getInitialDuration(e))return;if(!T.default.online)return void this._showOfflineToast();e.isGroup?(0,M.setGroupProperty)(e,l.default.GROUP_SETTING_TYPE.EPHEMERAL,t).catch((()=>()=>{__LOG__(2)`EphemeralDrawer:unable to set ephemeral setting for ${e.id.toString()}`})):(0,f.changeEphemeralDuration)(e,t);new b.default.EphemeralSettingChange({chatEphemeralityDuration:t}).commit()},this._shouldShowSelections=()=>!(0,v.shouldShowNUX)(l.default.NUX.EPHEMERAL)||this.props.fromInfoFlow,this._showOfflineToast=()=>{o.default.openToast((0,P.jsx)(I.default,{msg:y.default.t(869),id:(0,I.genId)()}))},this._handleBack=()=>{this._shouldShowSelections()&&this._saveSetting(),this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleChange=e=>{const t=parseInt(e.target.value,10);this.setState({duration:t})},this.state={duration:this._getInitialDuration(e.chat)}}_getInitialDuration(e){return e.getEphemeralSetting()||0}componentWillUnmount(){(0,v.shouldShowNUX)(l.default.NUX.EPHEMERAL)&&(0,v.setNUX)(l.default.NUX.EPHEMERAL,{views:1,maxViews:1})}render(){const e=this._shouldShowSelections()?null:(0,P.jsx)("div",{className:p.default.nuxAction,children:(0,P.jsx)(r.default,{type:"primary",onClick:this._handleBack,children:y.default.t(2085)})});let t;t=(0,E.isEphemeral24HDurationEnabled)()?this.props.fromInfoFlow?y.default.t(862):y.default.t(864):this.props.fromInfoFlow?y.default.t(861):y.default.t(863);const s=(0,v.shouldShowNUX)(l.default.NUX.EPHEMERAL)?(0,P.jsxs)(h.default,{animation:!1,children:[(0,P.jsx)(m.default,{}),(0,P.jsx)("div",{className:p.default.nuxHeader,children:(0,P.jsx)(x.TextSpan,{theme:"large",children:this.props.fromInfoFlow?y.default.t(867):y.default.t(868)})}),(0,P.jsxs)("div",{className:p.default.nuxContent,children:[(0,P.jsx)("div",{className:p.default.nuxText,children:(0,P.jsx)(x.TextSpan,{theme:"muted",children:t})}),(0,P.jsx)("div",{className:p.default.nuxText,children:(0,P.jsx)(x.TextSpan,{theme:"muted",children:y.default.t(865)})}),(0,P.jsx)("div",{className:p.default.nuxText,children:(0,P.jsxs)(x.TextSpan,{theme:"muted",children:[y.default.t(866)," ",(0,P.jsx)(_.default,{href:(0,g.getEphemeralFaqUrl)(),children:y.default.t(1103)})]})}),e]})]}):null,a=this._shouldShowSelections()?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(h.default,{animation:!1,children:(0,S.getAllDurations)().map((({value:e,label:t})=>(0,P.jsx)("div",{className:p.default.option,children:(0,P.jsxs)("label",{className:p.default.label,children:[(0,P.jsx)("input",{type:"radio",className:p.default.input,value:String(e),checked:e===this.state.duration,onChange:this._handleChange}),t]})},`option-${e}`)))}),(0,P.jsxs)("div",{className:p.default.footer,children:[(0,P.jsxs)(x.TextParagraph,{className:p.default.footerText,theme:"plain",children:[(0,E.isEphemeral24HDurationEnabled)()?y.default.t(848):y.default.t(847)," ",(0,P.jsx)(_.default,{href:(0,g.getEphemeralFaqUrl)(),children:y.default.t(1103)})]}),(0,E.isEphemeralAllowGroupMembersEnabled)()?(0,P.jsx)(x.TextParagraph,{className:p.default.footerText,theme:"muted",children:this.props.chat.isGroup?y.default.t(855):y.default.t(854)}):null]})]}):null;return(0,P.jsxs)(d.default,{theme:"gallery",children:[(0,P.jsx)(c.default,{title:y.default.t(992),onBack:this._handleBack,type:c.DRAWER_HEADER_TYPE.LARGE}),(0,P.jsxs)(u.default,{children:[s,a]})]})}}A.displayName="EphemeralDrawer";var N=(0,C.default)(A);t.default=N},51119:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,o.jsxs)("div",{className:n.default.nuxIllustration,children:[(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.chatIcon,n.default.chatIcon1),children:(0,o.jsx)(r.default,{name:"chat-alt"})}),(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.chatIcon,n.default.chatIcon2),children:(0,o.jsx)(r.default,{name:"chat-alt"})}),(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.chatIcon,n.default.chatIcon3),children:(0,o.jsx)(r.default,{name:"chat-alt"})}),(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.chatIcon,n.default.chatIcon4),children:(0,o.jsx)(r.default,{name:"chat-alt"})}),(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.chatIcon,n.default.chatIcon5),children:(0,o.jsx)(r.default,{name:"chat-alt"})}),(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.chatIcon,n.default.chatIcon6),children:(0,o.jsx)(r.default,{name:"chat-alt"})}),(0,o.jsx)("div",{className:(0,i.default)(n.default.nuxIcon,n.default.bannerIcon),children:(0,o.jsx)(r.default,{name:"disappearing"})})]})};var i=a(s(94184)),n=a(s(12433)),r=a(s(2966)),o=s(85893)},15687:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(55084),r=s(67294),o=i(s(84758)),l=i(s(91952)),d=i(s(75940)),u=i(s(55454)),c=i(s(17025)),h=i(s(88419)),f=i(s(85051)),p=s(92231),m=s(54647),_=a(s(13540)),g=s(70991),v=i(s(49896)),S=i(s(47357)),C=i(s(2408)),y=s(79475),E=i(s(40630)),b=s(35544),T=s(85893);const M=0,x=1,I=2;class P extends r.Component{constructor(...e){super(...e),this.state={state:M,status:void 0,groupMetadata:void 0,subject:void 0},this.handleViewGroup=e=>{let t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&l.default.openChatFromUnread(o.default.assertGet(t)),l.default.closeModal()},this.handleJoinGroup=()=>{(0,g.joinGroupViaInvite)(this.props.groupCode).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)})),l.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catch((0,n.filteredCatch)(_.Unmount,(()=>{}))).catch((0,n.filteredCatch)(m.ServerStatusCodeError,(e=>{this.setState({state:I,status:e.status})})))},this.handleCancel=()=>{l.default.closeModal()}}componentDidMount(){(0,b.queryGroupInviteInfo)(this.props.groupCode).checkpoint(this.props.rejectOnUnmount()).then((e=>{const{status:t,subject:s,groupMetadata:a,inGroup:i}=e;i?this.handleViewGroup(a.id):this.setState({status:t,groupMetadata:a,subject:s,state:x})})).catch((0,n.filteredCatch)(m.ServerStatusCodeError,(e=>{this.setState({status:e.status,state:I})}))).catch((0,n.filteredCatch)(_.Unmount,(()=>{})))}render(){const{groupCode:e}=this.props,{state:t,status:s,groupMetadata:a,subject:i}=this.state,n={cancelText:C.default.t(959),onCancel:this.handleCancel,onOK:void 0,okText:void 0};let r,l;if(t===M)r=(0,T.jsx)(p.LoadingWithText,{text:C.default.t(960)});else if(t===x&&a){const t=a.participants,s=a.size||t.length,d=t.filter((e=>!!c.default.assertGet(e.id).name));let p;const m=a.desc?(0,T.jsx)("div",{className:v.default.metadataDesc,children:a.desc}):null;p=d.length?(0,T.jsxs)("div",{className:v.default.participantList,children:[(0,T.jsxs)("div",{className:v.default.participantsTitle,children:[C.default.t(966,{count:s,_plural:s})," ",""," ",C.default.t(961,{count:d.length,_plural:d.length})]}),(0,T.jsx)("div",{className:v.default.participantsContainer,children:d.map((e=>(0,T.jsxs)("div",{className:v.default.participantWrapper,children:[(0,T.jsx)(h.default,{id:e.id}),(0,T.jsx)(f.default,{className:v.default.participantText,text:e.contact.formattedName})]},e.id.toString())))})]}):(0,T.jsxs)("div",{className:v.default.emptyContentContainer,children:[(0,T.jsx)("span",{className:v.default.participantsText,children:C.default.t(966,{count:s,_plural:s})}),(0,T.jsxs)("span",{className:v.default.contactsText,children:[" ",""," ",C.default.t(961,{count:d.length,_plural:d.length})]})]});const _=`${u.default.GROUP_INVITE_URL}${e}`;r=(0,T.jsxs)("div",{className:v.default.container,children:[(0,T.jsxs)("div",{className:v.default.metadataContainer,children:[(0,T.jsx)(S.default,{fallbackSVG:"default-group",size:82,imgProps:{src:_}}),(0,T.jsxs)("div",{className:v.default.metadataText,children:[(0,T.jsx)(f.default,{className:v.default.metadataTitle,text:i}),m]})]}),p]});const g=o.default.get(a.id),E=!!g&&!g.isReadOnly;n.onOK=E?this.handleViewGroup:this.handleJoinGroup,n.okText=E?C.default.t(987):C.default.t(963),l=y.ModalTheme.Flex}else{let e;switch(s){case 401:e=C.default.t(953);break;case 404:e=C.default.t(954);break;case 410:e=C.default.t(956);break;case 419:e=C.default.t(957);break;default:e=C.default.t(958)}n.cancelText=C.default.t(2085),r=(0,T.jsx)("div",{children:e})}return(0,T.jsx)(d.default,{cancelText:n.cancelText,onCancel:n.onCancel,onOK:n.onOK,okText:n.okText,type:l,children:r})}}P.displayName="GroupInviteModal";var A=(0,E.default)(P);t.default=A},45842:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(55084),r=i(s(30381)),o=s(67294),l=i(s(84758)),d=i(s(91952)),u=i(s(75940)),c=i(s(55454)),h=i(s(17025)),f=i(s(88419)),p=i(s(85051)),m=s(92231),_=s(54647),g=a(s(13540)),v=s(62238),S=s(86723),C=i(s(28197)),y=i(s(75798)),E=i(s(35552)),b=i(s(47357)),T=i(s(2408)),M=s(79475),x=i(s(18327)),I=i(s(40630)),P=i(s(79485)),A=i(s(2966)),N=a(s(49201)),O=(i(s(865)),s(89573)),w=s(59423),D=s(85893);const j=0,R=1,L=2;class k extends o.Component{constructor(...e){super(...e),this.state={state:j,status:void 0,errString:void 0,groupMetadata:void 0,subject:void 0},this.handleViewGroup=e=>{let t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&d.default.openChatFromUnread(l.default.assertGet(t)),d.default.closeModal()},this.revokeGrpV4Invite=()=>{const{msg:e}=this.props,{inviteGrp:t}=this.props.msg,s=l.default.assertGet((0,O.createWid)(t)).groupMetadata;d.default.openModal((0,D.jsx)(u.default,{onOK:()=>{d.default.closeModal(),null==s||s.revokeGroupV4AddInvite([e.to.toString()]).then((e=>{d.default.openToast((0,D.jsx)(N.default,{msg:null!=e&&e>=400?this.groupInviteRevokeErrorStr(e):T.default.t(2037),id:(0,N.genId)()}))}))},okText:T.default.t(2144),onCancel:()=>d.default.closeModal(),cancelText:T.default.t(1912),children:(0,D.jsx)(p.default,{text:T.default.t(1013,{participant:e.chat.contact.formattedName})})}))},this.handleJoinGroup=()=>{const{inviteCode:e,inviteCodeExp:t,inviteGrp:s,from:a}=this.props.msg;let i=Promise.resolve();i=(0,w.joinGroupViaInviteV4)(e,t.toString(),s,a.toString()),i.then((e=>200===e.status?(0,v.findChat)((0,O.createWid)(s)):Promise.reject(e.status))).then((e=>{d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)})),d.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catch((0,n.filteredCatch)(g.Unmount,(()=>{}))).catch((e=>{this.setState({state:L,status:e})}))},this.handleCancel=()=>{d.default.closeModal()},this.groupInviteAcceptErrorStr=e=>{let t;switch(e){case 400:t=T.default.t(952);break;case 401:t=T.default.t(953);break;case 404:t=T.default.t(954);break;case 409:t=T.default.t(955);break;case 410:t=T.default.t(956);break;case 419:t=T.default.t(957);break;default:t=T.default.t(958)}return t},this.groupInviteQueryErrorStr=e=>{let t;switch(e){case 403:t=T.default.t(968);break;case 404:t=T.default.t(969);break;default:t=T.default.t(1277)}return t},this.groupInviteRevokeErrorStr=e=>{let t;switch(e){case 400:t=T.default.t(971);break;case 401:t=T.default.t(972);break;case 403:t=T.default.t(973);break;case 404:t=T.default.t(974);break;default:t=T.default.t(975)}return t}}componentDidMount(){const{inviteCode:e,inviteCodeExp:t,inviteGrp:s,isSentByMe:a}=this.props.msg;if(a){const e=l.default.assertGet((0,O.createWid)(s));return void(e.groupMetadata&&y.default.find(e.id).catch((0,n.filteredCatch)([_.WebdDrop,g.ProtoVersionUndefined],(()=>{}))).finally((()=>{this.setState({status:200,groupMetadata:e.groupMetadata,subject:e.formattedTitle||e.name,state:R})})))}let i=Promise.resolve();i=(0,w.queryGroupInviteV4Info)(e,t.toString(),s,this.props.msg.from.toString()),i.then((e=>{if(null!=e.status&&e.status>=400)this.setState({status:e.status,state:L,errString:this.groupInviteAcceptErrorStr(e.status)});else if(e.id){const t=new C.default({id:e.id,owner:e.owner,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict,announce:e.announce,participants:e.participants});this.setState({status:200,groupMetadata:t,subject:e.subject,state:R})}else this.setState({status:e.status,state:L,errString:this.groupInviteAcceptErrorStr(e.status)})})).catch((0,n.filteredCatch)(g.Unmount,(()=>{})))}render(){const{msg:e}=this.props,{inviteGrp:t,inviteCodeExp:s,inviteCode:a,isGroupsV4InviteExpired:i,from:n,isSentByMe:r}=e,{state:o,status:d,groupMetadata:_,subject:g,errString:v}=this.state,C={cancelText:T.default.t(959),onCancel:this.handleCancel,onOK:void 0,okText:void 0};let y,I;if(o===j)y=(0,D.jsx)(m.Loading,{});else if(o===R&&_){const o=_.participants,d=_.size||o.length,u=o.filter((e=>!!h.default.assertGet(e.id).name));let m;const v=_.desc?(0,D.jsx)("div",{className:E.default.metadataDesc,children:(0,D.jsx)(p.default,{text:_.desc})}):null;m=u.length?(0,D.jsxs)("div",{className:E.default.participantList,children:[(0,D.jsxs)("div",{className:E.default.participantsTitle,children:[T.default.t(966,{count:d,_plural:d})," ",""," ",T.default.t(961,{count:u.length,_plural:u.length})]}),(0,D.jsx)("div",{className:E.default.participantsContainer,children:u.map((e=>(0,D.jsxs)("div",{className:E.default.participantWrapper,children:[(0,D.jsx)(f.default,{id:e.id}),(0,D.jsx)(p.default,{className:E.default.participantText,text:e.contact.formattedName})]},e.id.toString())))})]}):(0,D.jsxs)("div",{className:E.default.emptyContentContainer,children:[(0,D.jsx)("span",{className:E.default.participantsText,children:T.default.t(966,{count:d,_plural:d})}),(0,D.jsxs)("span",{className:E.default.contactsText,children:[" ",""," ",T.default.t(961,{count:u.length,_plural:u.length})]})]});const P=`w=${encodeURIComponent((0,S.getMaybeMeUser)().toString())}&g=${encodeURIComponent(t)}&c=${encodeURIComponent(a)}&e=${encodeURIComponent(String(s))}&a=${encodeURIComponent(n.toString())}`,A=`${c.default.GROUP_V4_INVITE_ICON_URL}?${P}`;y=(0,D.jsxs)("div",{className:E.default.container,children:[(0,D.jsxs)("div",{className:E.default.metadataContainer,children:[r?(0,D.jsx)(x.default,{size:82,wid:(0,O.createWid)(t)}):(0,D.jsx)(b.default,{fallbackSVG:"default-group",size:82,imgProps:{src:A}}),(0,D.jsxs)("div",{className:E.default.metadataText,children:[(0,D.jsx)(p.default,{className:E.default.metadataTitle,text:g}),v]})]}),m]});const N=l.default.get(_.id),w=!!N&&!N.isReadOnly;e.isSentByMe?(C.onOK=this.revokeGrpV4Invite,C.okText=T.default.t(1560)):w?(C.onOK=this.handleViewGroup,C.okText=T.default.t(987)):i||(C.onOK=this.handleJoinGroup,C.okText=T.default.t(963)),I=M.ModalTheme.Flex}else C.cancelText=T.default.t(2085),y=(0,D.jsx)("div",{children:v});const P=o===R?(0,D.jsxs)("div",{className:E.default.inviteExpiration,children:[(0,D.jsx)(A.default,{name:"panel-recent",display:"inline",className:E.default.inviteExpirationIcon}),(0,D.jsx)("span",{children:F(parseInt(s,10))})]}):null;return(0,D.jsxs)(u.default,{cancelText:C.cancelText,onCancel:C.onCancel,onOK:C.onOK,okText:C.okText,type:I,children:[y,P]})}}k.CONCERNS={msg:["id","to","inviteCode","inviteCodeExp","inviteGrp","isGroupsV4InviteExpired","from","chat","isSentByMe"]},k.displayName="GroupV4InviteModal";function F(e){const t=(0,r.default)(1e3*e).diff((0,r.default)()),s=Math.floor(t/36e5);return t<=0?T.default.t(1082):s<12?T.default.t(1080,{time:(0,r.default)().local().format("LT")}):s<24?T.default.t(1081,{number:1,_plural:1}):s<48?T.default.t(1081,{number:2,_plural:2}):T.default.t(1081,{number:3,_plural:3})}var B=(0,P.default)((0,I.default)(k),k.CONCERNS);t.default=B},47683:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Messaging=void 0;var n=i(s(94184)),r=s(67294),o=i(s(69991)),l=i(s(91952)),d=i(s(75940)),u=i(s(55454)),c=i(s(87390)),h=i(s(2408)),f=i(s(663)),p=a(s(79475)),m=i(s(2966)),_=i(s(35371)),g=s(85893);t.Messaging={NOTIFICATIONS:"NOTIFICATIONS",CAMERA_FAIL:"CAMERA_FAIL",CAMERA_MISSING:"CAMERA_MISSING",MIC_FAIL:"MIC_FAIL",MIC_MISSING:"MIC_MISSING",CAMERA:"CAMERA",MIC:"MIC"};const v={GUIDE_ALLOW:"guide-allow",GUIDE_UNBLOCK:"guide-unblock",GUIDE_NONE:"guide-none"},S="chrome_media_error",C="firefox_lock",y="opera_media";class E extends r.Component{render(){const{type:e,onCancel:t,onConfirm:s,messaging:a}=this.props,i=(0,g.jsx)(T,{messaging:a});if(e===v.GUIDE_ALLOW){let e;switch(_.default.browser){case u.default.BROWSER_TYPE.CHROME:case u.default.BROWSER_TYPE.FIREFOX:e=c.default.topLeft;break;case u.default.BROWSER_TYPE.EDGE:e=c.default.bottomCenter;break;default:e=c.default.topCenter}return(0,g.jsx)(p.default,{type:p.ModalTheme.Guide,children:(0,g.jsxs)("div",{className:(0,n.default)(c.default.containerAllow,e),children:[(0,g.jsx)("div",{className:c.default.icon,children:(0,g.jsx)(m.default,{name:"back",directional:!0})}),(0,g.jsx)("div",{className:c.default.title,children:(0,g.jsx)(b,{messaging:a})}),(0,g.jsx)("div",{className:c.default.description,children:i}),(0,g.jsx)("div",{className:c.default.controls,children:(0,g.jsx)(o.default,{onClick:s,type:"primary",children:h.default.t(1407)})})]})})}return(0,g.jsx)(d.default,{title:(0,g.jsx)(b,{messaging:a}),onOK:s,okText:h.default.t(1407),onCancel:t,cancelText:t?h.default.t(1103):void 0,children:(0,g.jsx)("div",{className:c.default.description,children:i})})}}function b(e){const{messaging:t}=e;switch(t){case"NOTIFICATIONS":return(0,g.jsx)(f.default,{id:1038});case"CAMERA_FAIL":return(0,g.jsx)(f.default,{id:1023});case"CAMERA_MISSING":return(0,g.jsx)(f.default,{id:1022});case"MIC_MISSING":return(0,g.jsx)(f.default,{id:1032});case"CAMERA":return(0,g.jsx)(f.default,{id:1023});case"MIC_FAIL":case"MIC":return(0,g.jsx)(f.default,{id:1034});default:throw new Error(`Invalid messaging: ${t}`)}}function T(e){const{messaging:t}=e,{browser:s}=_.default,a={[S]:(0,g.jsx)("span",{className:"chrome-media-icon"}),[C]:(0,g.jsx)("span",{className:"firefox-lock-icon"}),[y]:(0,g.jsx)("span",{className:"opera-media-icon"})};switch(t){case"NOTIFICATIONS":return"edge"===s?(0,g.jsx)(f.default,{id:1036,params:a}):"firefox"===s?(0,g.jsx)(f.default,{id:1037,params:a}):(0,g.jsx)(f.default,{id:1035,params:a});case"CAMERA_FAIL":return"edge"===s?(0,g.jsx)(f.default,{id:1017,params:a}):"firefox"===s?(0,g.jsx)(f.default,{id:1018,params:a}):"safari"===s?(0,g.jsx)(f.default,{id:1020,params:a}):"opera"===s?(0,g.jsx)(f.default,{id:1019,params:a}):(0,g.jsx)(f.default,{id:1016,params:a});case"CAMERA_MISSING":return(0,g.jsx)(f.default,{id:1021,params:a});case"MIC_FAIL":return"edge"===s?(0,g.jsx)(f.default,{id:1027,params:a}):"firefox"===s?(0,g.jsx)(f.default,{id:1028,params:a}):"safari"===s?(0,g.jsx)(f.default,{id:1030,params:a}):"opera"===s?(0,g.jsx)(f.default,{id:1029,params:a}):(0,g.jsx)(f.default,{id:1026,params:a});case"MIC_MISSING":return(0,g.jsx)(f.default,{id:1031,params:a});case"CAMERA":return"edge"===s?(0,g.jsx)(f.default,{id:1015,params:a}):(0,g.jsx)(f.default,{id:1014,params:a});case"MIC":return"edge"===s?(0,g.jsx)(f.default,{id:1025,params:a}):(0,g.jsx)(f.default,{id:1024,params:a});default:throw new Error(`Invalid messaging type: ${t}`)}}t.default=E,E.TYPE=v,E.defaultProps={type:v.GUIDE_NONE,onConfirm:()=>l.default.closeModal()},E.displayName="GuidePopup"},66:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=s(67294),o=i(s(76610)),l=s(61068),d=i(s(69991)),u=i(s(55454)),c=i(s(4919)),h=s(57092),f=i(s(12950)),p=i(s(65384)),m=i(s(2408)),_=i(s(663)),g=i(s(79485)),v=a(s(13038)),S=s(74289),C=s(12208),y=i(s(45285)),E=s(70359),b=i(s(35371)),T=s(85893);let M=s(2966).default;class x extends r.PureComponent{constructor(...e){super(...e),this.imgRef=(0,r.createRef)(),this._txtRef=(0,r.createRef)(),this._refContainer=(0,r.createRef)()}componentDidMount(){const e=this.imgRef.current,t=this._txtRef.current;this.props.animate?((0,y.default)(e,{scale:[1,0],opacity:[1,0]},{delay:1340,duration:180,easing:[.05,1.02,0,1.01]}),(0,y.default)(t,{translateY:[0,80],opacity:[1,0]},{delay:1300,duration:140,easing:[.05,1.02,0,1.01]})):(e&&(e.style.opacity="1"),t&&(t.style.opacity="1"))}animatePanel(e,t){var s;const a=null===(s=this._refContainer.current)||void 0===s?void 0:s.clientWidth;return null!=a&&e!==t&&(0,l.animateConversationPanel)(this._refContainer.current,a/(e-t))}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}render(){const e={[`data-asset-intro-image-${this.context.theme}`]:!0};let t,s,a;if(f.default.supportsFeature(f.default.F.MD_BACKEND))if(t=(0,T.jsx)("div",{ref:this.imgRef,className:p.default.mdImageWrapper,children:(0,T.jsx)(M,{className:p.default.mdBetaImage,name:"light"===(0,v.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark"})}),(0,E.getABPropConfigValue)("md_migration_experience")>0){const e=(0,T.jsx)("div",{className:p.default.betaIcon,children:(0,T.jsx)("b",{className:p.default.betaIconText,children:m.default.t(1371)})});s=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:p.default.betaTitle,children:[(0,T.jsx)("h1",{"data-a8n":o.default.key("intro-title"),children:m.default.t(1062)}),e]}),(0,T.jsxs)("div",{"data-a8n":o.default.key("intro-text"),className:p.default.betaText,children:[m.default.t(1069),(0,T.jsx)("br",{}),m.default.t(1070)]})]})}else{const e=(0,T.jsx)("div",{className:p.default.betaIcon,children:(0,T.jsx)("b",{className:p.default.betaIconText,children:m.default.t(281)})});s=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:p.default.betaTitle,children:[(0,T.jsx)("h1",{"data-a8n":o.default.key("intro-title"),children:m.default.t(1062)}),e]}),(0,T.jsxs)("div",{"data-a8n":o.default.key("intro-text"),className:p.default.betaText,children:[m.default.t(1060),(0,T.jsx)("br",{}),m.default.t(1061)]})]})}else if(f.default.supportsFeature(f.default.F.EXTERNAL_MD_OPT_IN_AVAILABLE)){t=(0,T.jsx)("div",{ref:this.imgRef,className:p.default.mdImageWrapper,children:(0,T.jsx)(M,{className:p.default.mdBetaImage,name:"light"===(0,v.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark"})});const e=(0,T.jsx)(c.default,{href:(0,h.getMdOptInFaqUrl)(),children:m.default.t(2041)});let i,n=m.default.t(1077);if(this.props.mdOptInDeadline.showCountDownMsg){const t=this.props.mdOptInDeadline.daysLeftTillDeadline;n=m.default.t(1174),(0,S.isNumber)(t)&&t>0?i=(0,T.jsx)(_.default,{id:1065,params:{num_days:t.toString(),learn_more:e},plural:t}):this.props.mdOptInDeadline.expirationTime&&(i=(0,T.jsx)(_.default,{id:1066,params:{time:this.props.mdOptInDeadline.expirationTime,learn_more:e}}))}else i=(0,T.jsx)(_.default,{id:1064,params:{learn_more:e}});s=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("h1",{"data-a8n":o.default.key("intro-title"),className:p.default.title,children:n}),(0,T.jsx)("div",{"data-a8n":o.default.key("intro-text"),className:p.default.text,children:i})]}),a=(0,T.jsx)("div",{className:p.default.upgradeBtn,children:(0,T.jsx)(d.default,{type:"strong-primary",onClick:()=>(0,C.upgradeToMD)(!1),a8nText:"product-info-drawer edit-button",children:m.default.t(1079)})})}else t=(0,T.jsx)("div",(0,n.default)({ref:this.imgRef,className:p.default.image},e)),s=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("h1",{"data-a8n":o.default.key("intro-title"),className:p.default.title,children:m.default.t(1076)}),(0,T.jsx)("div",{"data-a8n":o.default.key("intro-text"),className:p.default.text,children:m.default.t(1063)})]});return(0,T.jsx)("div",{className:p.default.intro,ref:this._refContainer,children:(0,T.jsxs)("div",{className:p.default.body,children:[t,(0,T.jsxs)("div",{ref:this._txtRef,className:p.default.textContainer,children:[s,a,(0,T.jsx)(I,{})]})]})})}}x.CONCERNS={mdOptInDeadline:["showCountDownMsg","daysLeftTillDeadline","expirationTime"]},x.contextType=v.default,x.displayName="IntroPanel";const I=()=>{let e;const t=`<a href="https://www.whatsapp.com/download" target="_blank">${m.default.t(1071)}</a>`;switch(b.default.os){case u.default.OS_TYPE.MAC:e=m.default.t(1073,{get_it_here:t});break;case u.default.OS_TYPE.WINDOWS:e=m.default.t(1075,{get_it_here:t})}return e?(0,T.jsxs)(P,{children:[(0,T.jsx)("span",{className:p.default.secondaryIcon,children:(0,T.jsx)(M,{name:"laptop"})}),(0,T.jsx)("div",{dangerouslySetInnerHTML:{__html:e},className:p.default.secondaryTextBody})]}):null},P=({children:e})=>(0,T.jsxs)("div",{className:p.default.secondary,children:[(0,T.jsx)("div",{className:p.default.divider}),(0,T.jsx)("div",{className:p.default.secondaryText,children:e})]}),A=(0,g.default)(x,x.CONCERNS);t.default=class extends A{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},53683:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=function(){const e=c.default.pttPlaybackSpeedEnabled?p:[];return[[d.default.t(1306),i.default.TOGGLE_UNREAD],[d.default.t(1357),i.default.TOGGLE_MUTE],[d.default.t(1297),i.default.TOGGLE_ARCHIVE],[d.default.t(1301),i.default.DELETE_OR_EXIT_CHAT],[d.default.t(1360),i.default.TOGGLE_PIN],[d.default.t(1328),i.default.SEARCH],[d.default.t(1339),i.default.SEARCH_IN_CHAT],[d.default.t(1358),i.default.OPEN_NEW_CHAT],[d.default.t(1359),i.default.OPEN_NEW_GROUP],[d.default.t(1361),i.default.OPEN_PROFILE],...e,[d.default.t(1222),i.default.OPEN_SETTINGS],[d.default.t(1084),i.default.OPEN_EMOJI_PANEL],[d.default.t(1085),i.default.OPEN_GIF_PANEL],[d.default.t(1086),i.default.OPEN_STICKER_PANEL]]}().map((([e,t,s=!0],a)=>{const i=(0,f.jsx)(o.default,{action:t,addModifiers:s});if(i)return(0,f.jsxs)("div",{className:l.default.section,children:[(0,f.jsx)("div",{className:l.default.action,title:e,children:e}),(0,f.jsx)("div",{className:l.default.shortcut,children:i})]},a)}));return(0,f.jsx)(r.default,{onOK:()=>{n.default.closeModal()},okText:d.default.t(2085),type:u.ModalTheme.Flex,children:(0,f.jsxs)("div",{className:l.default.container,children:[(0,f.jsx)(h.TextSpan,{theme:"popup-title",children:d.default.t(1087)}),(0,f.jsx)("div",{className:l.default.list,children:e})]})})};var i=a(s(80489)),n=a(s(91952)),r=a(s(75940)),o=a(s(19666)),l=a(s(90975)),d=a(s(2408)),u=s(79475),c=a(s(65565)),h=s(97504),f=s(85893);const p=[[d.default.t(1059),i.default.INCREASE_PTT_SPEED,!1],[d.default.t(740),i.default.DECREASE_PTT_SPEED,!1]]},15058:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(17747)),o=i(s(9042)),l=a(s(55588)),d=i(s(86025)),u=i(s(67893)),c=i(s(40854)),h=i(s(47193)),f=i(s(39e3)),p=i(s(2408)),m=i(s(55325)),_=a(s(79475)),g=s(85893);class v extends n.Component{constructor(...e){super(...e),this.flatListController=new u.default,this._refList=(0,n.createRef)(),this._refSearch=(0,n.createRef)(),this.handleNext=e=>{e.preventDefault(),e.stopPropagation();const t=this.props.selection;t&&t.setNext(!0)},this.handlePrev=e=>{const t=this.props.selection;if(!t)return;e.preventDefault(),e.stopPropagation();t.prev()>-1?t.setPrev(!0):(t.unset(),c.default.shouldIndicateFocus(),h.default.focus(this._refSearch.current))},this.handleFocusList=e=>{this._refList.current&&(e.preventDefault(),e.stopPropagation(),c.default.shouldIndicateFocus(),this.props.selection.setFirst(!0))},this.handleSelectFirst=e=>{e.preventDefault(),e.stopPropagation();const t=this.props.data[0];t&&this.props.onSelect(e,t)},this.handleSearch=e=>{this.props.onSearch(e)},this._isFocusInContainer=e=>{const t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},this._handleFocus=e=>{this._isFocusInContainer(e)&&this.props.selection.setFirst(!0)},this._handleBlur=e=>{this._isFocusInContainer(e)&&this.props.selection.unset()}}componentDidMount(){h.default.focus(this._refSearch.current)}render(){const{title:e,onCancel:t,onSearch:s,onRef:a,searchPlaceholder:i,renderItem:n,data:u,emptyState:c}=this.props,h={down:this.handleFocusList},v={down:this.handleNext,up:this.handlePrev};let S;s&&(S=(0,g.jsx)(f.default,{handlers:h,children:(0,g.jsx)(m.default,{ref:this._refSearch,onSearch:this.handleSearch,onEnter:this.handleSelectFirst,placeholder:i||p.default.t(1565)})}));const C=u.length?(0,g.jsx)(f.default,{handlers:v,onFocus:this._handleFocus,onBlur:this._handleBlur,tabIndex:0,children:(0,g.jsx)(d.default,{data:u,ref:this._refList,flatListController:this.flatListController,direction:"vertical",renderItem:n})}):c;return(0,g.jsx)(_.default,{type:_.ModalTheme.Tower,onRef:a,children:(0,g.jsxs)(r.default,{children:[(0,g.jsx)(l.default,{title:e,type:l.DRAWER_HEADER_TYPE.POPUP,onCancel:t}),S,(0,g.jsx)(o.default,{flatListControllers:[this.flatListController],children:C})]},"contact-modal")})}}t.default=v,v.displayName="ListModal"},70998:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.default)(e.chat,["name","isGroup","liveLocation"]),{name:s,isGroup:a}=t,u=a?o.default.t(160,{name:s}):o.default.t(161,{name:s});return(0,d.jsx)(n.default,{onOK:()=>{const{liveLocation:e}=t;e&&e.stopMyLiveLocation(),i.default.closeModal()},okText:o.default.t(1134),onCancel:()=>{i.default.closeModal()},children:(0,d.jsx)(r.default,{text:u})})};var i=a(s(91952)),n=a(s(75940)),r=a(s(85051)),o=a(s(2408)),l=a(s(76006)),d=s(85893)},36042:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logSessionEvent=function(e,t,s){const a=new i.default.ContactUsSession({contactUsExitState:e,contactUsT:Math.ceil(performance.now()-t)});s&&(a.contactUsAutomaticEmail=!0,a.contactUsProblemDescription=s.subject,a.contactUsScreenshotC=s.numScreenshots);a.commit()};var i=a(s(4231))},59090:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{to:t,participant:s,msg:a}=e;let f;if(t.isUser()){const e=r.default.get(t),s=e?e.formattedName:(0,u.default)(t);f=o.default.t(2050,{name:s})}else if("string"==typeof s&&d.default.isUser(s)){const e=r.default.get((0,c.createWid)(s)),t=e?e.formattedName:(0,u.default)(s);f=o.default.t(2048,{name:d.default.user(t)})}else f=o.default.t(2047);return(0,h.jsx)(n.default,{onOK:()=>{a.resend().then((e=>{e===l.SendMsgResult.ERROR_UNKNOWN&&__LOG__(2,void 0,void 0,void 0,["messaging"])`MdDowngradeModal:resend: failure with SendMsgResult.ERROR_UNKNOWN`})).catch((function(e){__LOG__(2,void 0,void 0,void 0,["messaging"])`MdDowngradeModal:resend: resend failure ${e}`})),i.default.closeModal()},okText:o.default.t(2196),cancelText:o.default.t(1912),onCancel:()=>{i.default.closeModal()},title:o.default.t(2072),children:f})};var i=a(s(91952)),n=a(s(75940)),r=a(s(17025)),o=a(s(2408)),l=s(88300),d=a(s(69635)),u=a(s(98532)),c=s(89573),h=s(85893)},71249:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;return(0,l.jsx)(n.default,{onOK:()=>{t.resend().then((e=>{e===o.SendMsgResult.ERROR_UNKNOWN&&__LOG__(2,void 0,void 0,void 0,["messaging"])`MdSendRetryModal:resend: failure with SendMsgResult.ERROR_UNKNOWN`})).catch((function(e){__LOG__(2,void 0,void 0,void 0,["messaging"])`MdSendRetryModal:resend: resend failure ${e}`})),i.default.closeModal()},okText:r.default.t(2196),cancelText:r.default.t(1912),onCancel:()=>i.default.closeModal(),children:r.default.t(2072)})};var i=a(s(91952)),n=a(s(75940)),r=a(s(2408)),o=s(88300),l=s(85893)},32666:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.default)(e.msg,["type","isGif","isVcardOverMmsDocument"]),{type:s}=t;let a,u;switch(s){case r.default.MSG_TYPE.VIDEO:t.isGif?(a=o.default.t(1269),u=o.default.t(1268)):(a=o.default.t(1276),u=o.default.t(1275));break;case r.default.MSG_TYPE.AUDIO:a=o.default.t(1263),u=o.default.t(1262);break;case r.default.MSG_TYPE.IMAGE:a=o.default.t(1272),u=o.default.t(1271);break;case r.default.MSG_TYPE.DOCUMENT:if(t.isVcardOverMmsDocument){a=o.default.t(1265),u=o.default.t(1264);break}a=o.default.t(1267),u=o.default.t(1266);break;case r.default.MSG_TYPE.STICKER:a=o.default.t(1274),u=o.default.t(1273);break;default:a=o.default.t(1270),__LOG__(4,void 0,new Error,!0)`type: ${s}`,SEND_LOGS("MediaMissingModal: unexpected message type")}return(0,d.jsx)(n.default,{title:a,onOK:()=>{i.default.closeModal()},okText:o.default.t(2085),children:u})};var i=a(s(91952)),n=a(s(75940)),r=a(s(55454)),o=a(s(2408)),l=a(s(76006)),d=s(85893)},33734:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,l.default)(e.msg,["type","isGif"]);let s;switch(t.type){case r.default.MSG_TYPE.VIDEO:t.isGif||(s=o.default.t(1368))}return(0,d.jsx)(n.default,{onOK:()=>{i.default.closeModal()},okText:o.default.t(2085),children:s})};var i=a(s(91952)),n=a(s(75940)),r=a(s(55454)),o=a(s(2408)),l=a(s(76006)),d=s(85893)},23929:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t}=e;return(0,l.jsx)(n.default,{onCancel:()=>i.default.closeModal(),onOK:()=>{i.default.closeModal(),r.default.initDownload(t)},okText:o.default.t(1908),cancelText:o.default.t(1912),title:o.default.t(792),children:o.default.t(791)})};var i=a(s(91952)),n=a(s(75940)),r=a(s(97227)),o=a(s(2408)),l=s(85893)},36083:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({altText:e,mediaData:t}){const{preview:s}=(0,n.default)(t,["preview"]),a=null==s?void 0:s.url();return(0,r.jsx)("div",{className:i.default.mediaViewerBlurCrop,onClick:o,children:(0,r.jsx)("img",{className:i.default.mediaViewerBlurImg,src:a,alt:e})})};var i=a(s(66921)),n=a(s(76006)),r=s(85893);function o(e){e.stopPropagation()}},41552:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(20396)),o=a(s(36083)),l=a(s(55454)),d=a(s(13985)),u=a(s(92660)),c=s(90672),h=a(s(80747)),f=a(s(4231)),p=a(s(90904)),m=a(s(79485)),_=a(s(63477)),g=s(85893);class v extends n.PureComponent{constructor(...e){super(...e),this.state={zoomIn:null},this._refObjectFit=(0,n.createRef)(),this.getOutsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.outsideContainer},this.getInsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.insideContainer},this.onImageClick=e=>{e.stopPropagation(),this._onZoomIn(e.pageX,e.pageY)},this.onImageKeyboardZoom=e=>{e.stopPropagation(),this._onZoomIn(window.innerWidth/2,window.innerHeight/2)},this._onZoomIn=(e,t)=>{if(this.state.zoomIn)return void this._cancelZoomIn();const s=this.getInsideContainer(),a=this.getOutsideContainer();if(!(s instanceof HTMLElement&&a instanceof HTMLElement))return;this.heightOverflow=s.clientHeight*l.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-a.clientHeight,this.widthOverflow=s.clientWidth*l.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-a.clientWidth;const{translateX:i,translateY:n}=this.getTranslatePosition(a,e,t);this.props.onImgZoomIn(!0),this.setState({zoomIn:{factor:l.default.MEDIA_VIEWER.ZOOM_IN_FACTOR,translateX:i,translateY:n}})},this._cancelZoomIn=()=>{this.props.onImgZoomIn(!1),this.setState({zoomIn:null})},this.getTranslatePosition=(e,t,s)=>{const a=window.innerWidth/2-t,i=window.innerHeight/2-s;return{translateX:this.widthOverflow>0?Math.round(1.2*a*this.widthOverflow/e.clientWidth):0,translateY:this.heightOverflow>0?Math.round(1.2*i*this.heightOverflow/e.clientHeight):0}},this._renderBlurredImage=()=>(0,g.jsx)(p.default,{type:"scaleDown",size:{width:this.props.mediaData.fullWidth,height:this.props.mediaData.fullHeight},position:"relative",objectPosition:"relative",children:(0,g.jsx)(o.default,{altText:"",mediaData:this.props.mediaData})}),this._renderImage=e=>{const{zoomIn:t}=this.state,{preventDownload:s}=this.props;return(0,g.jsx)(d.default,{className:(0,i.default)(u.default.mediaViewerImg,{[u.default.cursorZoomIn]:!t,[u.default.isDownloadPrevented]:s}),draggable:!s,onClick:this.onImageClick,disableContextMenu:s,src:e})},this._renderDownloadPreventedImage=e=>{const{zoomIn:t}=this.state;return(0,g.jsx)("figure",{className:(0,i.default)(u.default.mediaViewerImg,{[u.default.cursorZoomIn]:!t}),draggable:"false",onClick:this.onImageClick,onContextMenu:e=>e.preventDefault(),children:this._renderImage(e)})}}componentDidMount(){var e;null===(e=this.props.msg)||void 0===e||e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg&&this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){const{mediaData:e,msg:t,preventDownload:s}=this.props;switch(e.mediaStage){case c.MEDIA_DATA_STAGE.DECRYPTING:if(null==e.progressiveStage)return this._renderBlurredImage();break;case c.MEDIA_DATA_STAGE.RESOLVED:case c.MEDIA_DATA_STAGE.PROGRESSIVE_READY:break;default:return this._renderBlurredImage()}const a={width:e.fullWidth,height:e.fullHeight},i=s?this._renderDownloadPreventedImage:this._renderImage;let n=(0,g.jsx)("div",{className:u.default.mediaViewerImg,children:null!=t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.default,{mediaData:e,placeholderRenderer:this._renderBlurredImage,downloadMedia:()=>{if(null!=t.mediaObject)return t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})},renderProgressively:!0,children:i}),t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&(0,g.jsx)(r.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onAnnotationTooltipDisplay,onTooltipDismiss:this.props.onAnnotationTooltipDismiss})]}):i(e.renderableUrl)});return this.state.zoomIn&&(n=(0,g.jsx)(_.default,{displayName:"ZoomInImage",escapable:!0,requestDismiss:this._cancelZoomIn,children:n})),(0,g.jsx)(p.default,{type:"zoomIn",size:a,position:"relative",objectPosition:"relative",zoomIn:this.state.zoomIn,onObjectLoad:this.props.onLoad,ref:this._refObjectFit,children:n})}}v.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","renderableUrl","progressiveStage"]},v.displayName="MediaImage";const S=(0,m.default)(v,v.CONCERNS);t.default=class extends S{get heightOverflow(){return this.getComponent().heightOverflow}get widthOverflow(){return this.getComponent().widthOverflow}onImageClick(e){return this.getComponent().onImageClick(e)}onImageKeyboardZoom(e){return this.getComponent().onImageKeyboardZoom(e)}getTranslatePosition(e,t,s){return this.getComponent().getTranslatePosition(e,t,s)}getOutsideContainer(){return this.getComponent().getOutsideContainer()}getInsideContainer(){return this.getComponent().getInsideContainer()}}},53608:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{msg:t,mediaData:s}=e,{mediaStage:a,size:i,streamable:f}=(0,c.default)(s,["mediaStage","size","streamable"]);if(f&&s.isStreamable())return null;switch(a){case o.MEDIA_DATA_STAGE.INIT:case o.MEDIA_DATA_STAGE.EXISTS:case o.MEDIA_DATA_STAGE.RESOLVED:case o.MEDIA_DATA_STAGE.ERROR_MISSING:case o.MEDIA_DATA_STAGE.NEED_UPLOAD:case o.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case o.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case o.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return null;case o.MEDIA_DATA_STAGE.NEED_POKE:return(0,h.jsx)(r.Download,{filesize:i,onClick:e=>function(e,t){e.stopPropagation(),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}(e,t)});case o.MEDIA_DATA_STAGE.FETCHING:case o.MEDIA_DATA_STAGE.PREPARING:case o.MEDIA_DATA_STAGE.UPLOADING:case o.MEDIA_DATA_STAGE.REUPLOADING:case o.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case o.MEDIA_DATA_STAGE.DECRYPTING:case o.MEDIA_DATA_STAGE.SENDING:return(0,h.jsx)("div",{onClick:e=>function(e,t){e.stopPropagation(),t.cancelDownload()}(e,t),children:(0,h.jsx)(r.Pending,{cancelable:!0})});case o.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return(0,h.jsx)(r.Download,{filesize:i,onClick:e=>function(e,t){e.stopPropagation(),n.default.openModal((0,h.jsx)(l.default,{msg:(0,u.unproxy)(t)}))}(e,t)})}};var n=i(s(91952)),r=a(s(15377)),o=s(90672),l=i(s(23929)),d=i(s(4231)),u=s(15298),c=i(s(76006)),h=s(85893)},17008:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({legalEntityDetails:e,onSave:t}){const[s,a]=(0,n.useState)(null==e?void 0:e.entityType),[i,y]=(0,n.useState)(null==e?void 0:e.entityTypeCustom),[E,b]=(0,n.useState)(null==e?void 0:e.isRegistered);(0,n.useEffect)((()=>{s!==(null==e?void 0:e.entityType)&&(y(""),b(!1))}),[s,null==e?void 0:e.entityType]);const T=(0,n.useCallback)((()=>{d.default.closeModal(),t(s,i,E)}),[s,i,E,t]),M=(0,n.useCallback)((e=>{a(e.target.value)}),[]),x=(0,n.useCallback)((e=>b(e.target.checked)),[]),I=(0,v.jsx)(C,{value:E,label:m.default.t(411),inputType:"checkbox",xstyle:S.indentedOption,onChange:x,"data-testid":"registered"});return(0,v.jsx)(_.default,{type:_.ModalTheme.Box,children:(0,v.jsxs)(c.default,{theme:"settings",children:[(0,v.jsx)(f.default,{title:m.default.t(403),type:f.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>d.default.closeModal()}),(0,v.jsx)(h.default,{children:(0,v.jsx)("form",{className:(0,r.default)(S.form),children:(0,v.jsxs)("ol",{children:[(0,v.jsx)(C,{id:o.businessTypeOptions.limitedLiabilityPartnership,value:s,label:m.default.t(404),onChange:M,"data-testid":"limited-liability-partnership"}),(0,v.jsx)(C,{id:o.businessTypeOptions.soleProprietorship,value:s,label:m.default.t(412),onChange:M,"data-testid":"sole-proprietorship"}),(0,v.jsx)(C,{id:o.businessTypeOptions.partnership,value:s,label:m.default.t(408),onChange:M,"data-testid":"partnership"}),s===o.businessTypeOptions.partnership&&I,(0,v.jsx)(C,{id:o.businessTypeOptions.publicCompany,value:s,label:m.default.t(410),onChange:M,"data-testid":"public-company"}),(0,v.jsx)(C,{id:o.businessTypeOptions.privateCompany,value:s,label:m.default.t(409),onChange:M,"data-testid":"private-company"}),(0,v.jsx)(C,{id:o.businessTypeOptions.other,value:s,label:m.default.t(406),onChange:M,"data-testid":"other"}),s===o.businessTypeOptions.other&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:(0,r.default)(S.indentedOption),"data-testid":"other-input",children:(0,v.jsx)(g.default,{value:i,editable:!0,maxLength:u.default.COMPLIANCE_INFO_LENGTH.ENTITY_TYPE_CUSTOM,inputPlaceholder:m.default.t(407),showRemaining:!0,onChange:y,theme:"text-input",lowProfile:!0})}),I]})]})})}),(0,v.jsx)(p.FlexRow,{justify:"end",className:(0,r.default)(S.footer),children:(0,v.jsx)(p.FlexItem,{children:(0,v.jsx)(l.default,{type:"primary",onClick:T,disabled:s===o.businessTypeOptions.other&&!i,className:(0,r.default)(S.submitButton),children:m.default.t(1564)})})})]})})};var n=s(67294),r=i(s(56720)),o=s(4650),l=i(s(69991)),d=i(s(91952)),u=i(s(55454)),c=i(s(17747)),h=i(s(9042)),f=a(s(55588)),p=s(63290),m=i(s(2408)),_=a(s(79475)),g=i(s(29458)),v=s(85893);const S={inputWrapper:{display:"p357zi0d",alignSelf:"o2es7gts",paddingEnd:"iffbo4e8"},form:{paddingTop:"pxvlsfnc",paddingEnd:"bcymb0na",paddingBottom:"n3bptxsn",paddingStart:"e8k79tju"},label:{display:"f804f6gw",paddingTop:"emrlamx0",paddingEnd:"f9ovudaz",paddingBottom:"aiput80m",paddingStart:"gx1rr48f",fontSize:"fe5nidar"},footer:{paddingTop:"emrlamx0",paddingEnd:"itegkywt",paddingBottom:"aiput80m",paddingStart:"rppts313",backgroundColor:"lkjmyc96",borderTop:"swyb62mu"},submitButton:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},indentedOption:{marginStart:"dl2ettod"},cursorPointer:{cursor:"ajgl1lbb"}};function C({id:e,value:t,label:s,inputType:a="radio",xstyle:i,onChange:n,"data-testid":o="merchant-details-entity-type-option-popup"}){const l=e||s;return(0,v.jsx)("li",{className:(0,r.default)(S.cursorPointer,i),children:(0,v.jsxs)(p.FlexRow,{align:"center",children:[(0,v.jsx)(p.FlexItem,{xstyle:S.inputWrapper,children:(0,v.jsx)("input",{id:l,value:l,type:a,name:"entityType",checked:"radio"===a?t===l:t,className:(0,r.default)(S.cursorPointer),onChange:n})}),(0,v.jsx)(p.FlexItem,{grow:1,children:(0,v.jsx)("label",{htmlFor:l,className:(0,r.default)(S.label,S.cursorPointer),"data-testid":`${o}-label`,children:s})})]})})}},55127:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(91952)),o=a(s(75940)),l=a(s(55454)),d=a(s(49187)),u=s(86723),c=a(s(2408)),h=a(s(71681)),f=s(83680),p=a(s(91866)),m=a(s(4231)),_=s(97504),g=a(s(13038)),v=s(85893);const S={light:{low:s(85019),high:s(44481)},dark:{low:s(80722),high:s(52022)}};class C extends n.PureComponent{constructor(e){super(e),this.onOK=()=>{(0,f.openMessengerRoomUrl)(this.props.chat),r.default.closeModal()},this.onCancel=()=>{const e=m.default.DESTINATION.CANCELLED,t=this.props.chat?m.default.ROOMS_ENTRY_POINT.ATTACHMENT:m.default.ROOMS_ENTRY_POINT.WEB_MENU;new m.default.RoomsCreationFlow({entryResult:e,roomsEntryPoint:t}).commit(),r.default.closeModal()},(0,u.getNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,u.setNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_NEW,{views:0,maxViews:1}),(0,u.getNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,u.setNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING,{views:0,maxViews:5}),e.chat||(0,u.getNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)||(0,u.setNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST,{views:0,maxViews:1}),e.chat&&!(0,u.getNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)&&(0,u.setNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN,{views:0,maxViews:1})}componentDidMount(){(0,u.shouldShowNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_NEW)?((0,u.viewNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_NEW),this.props.listeners.add(window,"dpichange",(()=>{this.forceUpdate()}))):(0,u.viewNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING),this.props.chat?(0,u.viewNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN):(0,u.viewNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)}render(){const e=(0,u.shouldShowNUX)(l.default.NUX.MESSENGER_ROOM_DIALOG_NEW),t=S[this.context.theme][d.default.currentRes],s=e?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{alt:"",src:t,className:p.default.illustration}),(0,v.jsx)(_.TextDiv,{theme:"popup-title",className:(0,i.default)(p.default.title,p.default.block),children:c.default.t(1257)}),(0,v.jsx)(_.TextDiv,{theme:"plain",className:p.default.block,children:c.default.t(1255)}),(0,v.jsx)(_.TextDiv,{theme:"muted-small",className:p.default.block,children:c.default.t(1256)})]}):(0,v.jsx)(_.TextDiv,{theme:"plain",children:c.default.t(1258)});return(0,v.jsx)(o.default,{okText:c.default.t(1254),onOK:this.onOK,onCancel:this.onCancel,children:s})}}C.contextType=g.default,C.displayName="MessengerRoomPopup";var y=(0,h.default)(C);t.default=y},42984:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(58380)),o=a(s(75381)),l=i(s(84758)),d=i(s(43016)),u=i(s(91952)),c=i(s(17025)),h=s(92231),f=a(s(86025)),p=i(s(47193)),m=i(s(2408)),_=i(s(49127)),g=i(s(70422)),v=i(s(37314)),S=i(s(65565)),C=a(s(49201)),y=i(s(68565)),E=i(s(60637)),b=s(85893);const T="SEC_FREQUENT_CONTACTS",M="SEC_CHATS",x="SEC_CONTACTS",I="ROW_FREQUENT_CONTACTS",P="ROW_CHATS",A="ROW_CONTACTS";class N extends n.Component{constructor(...e){super(...e),this.setSearch=e=>{this.search=e},this.setList=e=>{this.list=e},this.state={filteredData:this.calculateFilteredData(this.props.searchText)},this._handleRef=e=>{this._refHotKey=e},this.handleCancelSelection=()=>{this.props.selections.unsetAll()},this._handleSelect=(e,t,s)=>{const{selections:a,maxChats:i,active:n,onSelectionChanged:r,hasFrequentlyForwarded:o}=this.props;if(t&&"number"==typeof i&&a.getSelected().length>=i){const e=S.default.hfmStringChanges?m.default.t(908,{count:i,_plural:i}):m.default.t(907,{count:i,_plural:i}),t=o?e:m.default.t(906,{count:i,_plural:i});u.default.openToast((0,b.jsx)(C.default,{id:(0,C.genId)(),msg:t}))}else a.setVal(e,t,s),n.setVal(e,s),r&&r(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case T:return(0,b.jsx)(v.default,{header:m.default.t(1959)});case M:return(0,b.jsx)(v.default,{header:m.default.t(2138)});case x:return(0,b.jsx)(v.default,{header:m.default.t(2086)});case I:case P:case A:const{data:t}=e;let s,a=!1;this.props.hasFrequentlyForwarded&&t.groupMetadata&&t.groupMetadata.noFrequentlyForwarded&&(a=!0,s=m.default.t(913));const i=()=>this._handleChatClick(t);return(0,b.jsx)(d.default,{model:t,selections:this.props.selections,tabIndex:-1,disabled:a,children:t instanceof r.default?(0,b.jsx)(o.default,{theme:a?"chat-checkbox-no-delete":"chat-checkbox",active:this.props.active,chat:t,mode:o.Mode.INFO,noContext:!0,onClick:a?()=>{}:i,secondary:s,showEphemeralIcon:this.props.showEphemeralIcon}):(0,b.jsx)(E.default,{contact:t,onSelect:i,customSecondaryText:s,active:this.props.active,showEphemeralIcon:this.props.showEphemeralIcon})},t.id.toString());default:throw new f.UnknownDataError(e)}}}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){if(this.props.searchText!==e.searchText){const e=this.calculateFilteredData(this.props.searchText);this.setState({filteredData:e}),this.props.active.init(this._flattenData(e))}}calculateFrequentContacts(e){const{msgType:t,excludeChat:s}=this.props;return e?[]:c.default.frequentContacts(t,s)}_maybeApplyTosGating(e){return e.filter((e=>!(0,y.default)(e)))}_calculateFilteredChats(e){let t=e;if(t){t=m.default.accentFold(t);const e=(0,g.default)(t);return l.default.filter((function(s){return s.canSend&&s.shouldAppearInList&&s.contact.searchMatch(t,e)}))}return l.default.filter((function(e){return e.canSend&&e.shouldAppearInList}))}calculateFilteredContacts(e){let t=e;const s=c.default.getFilteredContacts();if(!t)return s;t=m.default.accentFold(e);const a=(0,g.default)(t);return s.filter((function(e){return e.searchMatch(t,a)}))}calculateFilteredData(e){const t={};return{frequentContacts:this._maybeApplyTosGating(this.calculateFrequentContacts(e)).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;const s=e.isGroup||e.isBroadcast?l.default.get(e.id):e;return s&&(t[s.id]=!0),s})).filter(Boolean),chats:this._calculateFilteredChats(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;const s=e.isGroup||e.isBroadcast?e:e.contact;return t[s.id]?null:(t[s.id]=!0,s)})).filter(Boolean),contacts:this._maybeApplyTosGating(this.calculateFilteredContacts(e)).map((e=>t[e.id]?null:e)).filter(Boolean)}}_flattenData(e){const{frequentContacts:t,chats:s,contacts:a}=e;return t.concat(s,a)}_isEmpty(){const{frequentContacts:e,chats:t,contacts:s}=this.state.filteredData;return!e.length&&!t.length&&!s.length}_getData(){const e=[],{frequentContacts:t,chats:s,contacts:a}=this.state.filteredData;return t.length&&(e.push({itemKey:T,type:T}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:I,data:e}))))),s.length&&(e.push({itemKey:M,type:M}),e.push(...s.map((e=>({itemKey:e.id.toString(),type:P,data:e}))))),a.length&&(e.push({itemKey:x,type:x}),e.push(...a.map((e=>({itemKey:e.id.toString(),type:A,data:e}))))),e}toggleFirst(e){const{frequentContacts:t,chats:s,contacts:a}=this.state.filteredData;let i;if(t.length)i=t[0];else if(s.length)i=s[0];else{if(!a.length)return;i=a[0]}const n=!this.props.selections.isSelected(i);this._handleSelect(i,n,e)}focus(){this._refHotKey&&p.default.focus(this._refHotKey)}_handleChatClick(e){const t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){return this._isEmpty()?this.props.searchText?(0,b.jsx)(h.Search,{}):(0,b.jsx)(h.ListChats,{}):(0,b.jsx)(f.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return(0,b.jsx)(_.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange,children:this._renderList()})}}t.default=N,N.displayName="MultiSelectChatList"},90504:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(43016)),o=i(s(91952)),l=i(s(17025)),d=s(92231),u=a(s(86025)),c=i(s(47193)),h=i(s(2408)),f=i(s(49127)),p=i(s(70422)),m=i(s(37314)),_=a(s(49201)),g=i(s(60637)),v=s(85893);const S="SEC_CONTACTS",C="ROW_CONTACTS";class y extends n.Component{constructor(e){super(e),this.setList=e=>{this.list=e},this._handleRef=e=>{this._refHotKey=e},this._handleSelect=(e,t,s)=>{const{selections:a,maxContacts:i,active:n,onSelectionChanged:r}=this.props;t&&"number"==typeof i&&a.getSelected().length>=i?o.default.openToast((0,v.jsx)(_.default,{id:(0,_.genId)(),msg:this.props.maxContactsExceedErrorMsg?this.props.maxContactsExceedErrorMsg:h.default.t(1284,{count:i,_plural:i})})):(a.setVal(e,t,s),n.setVal(e,s),r&&r(e,t))},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case S:return(0,v.jsx)(m.default,{header:h.default.t(1930)});case C:const{data:t}=e,{isDisabled:s,customSecondaryText:a}=this.props;return(0,v.jsx)(r.default,{model:t,selections:this.props.selections,checked:!!this.props.isSelected&&this.props.isSelected(t.id),children:(0,v.jsx)(g.default,{contact:t,disabled:s&&s(t.id),onSelect:()=>this._handleContactClick(t),customSecondaryText:a&&a(t.id),active:this.props.active,allowBlockedContacts:this.props.allowBlockedContacts})},t.id.toString());default:throw new u.UnknownDataError(e)}},this.state={filteredData:y.calculateFilteredData(e)}}static getDerivedStateFromProps(e){return{filteredData:y.calculateFilteredData(e)}}static calculateFilteredData(e){return{contacts:y.calculateFilteredContacts(e)}}static calculateFilteredContacts(e){const{filter:t,useAllContacts:s,searchText:a}=e;let i=s?l.default.toArray():l.default.getFilteredContacts();if(t&&(i=i.filter((e=>t(e)))),!a)return i;const n=h.default.accentFold(a),r=(0,p.default)(n);return i.filter((e=>e.searchMatch(n,r)))}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){this.props.searchText!==e.searchText&&this.props.active.init(this._flattenData(this.state.filteredData))}_flattenData(e){return e.contacts}_isEmpty(){return!this.state.filteredData.contacts.length}_getData(){const e=[],{contacts:t}=this.state.filteredData;return t.length&&(e.push({itemKey:S,type:S}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:C,data:e}))))),e}toggleFirst(e){if(this.state.filteredData.contacts.length){const t=this.state.filteredData.contacts[0],s=!this.props.selections.isSelected(t);this._handleSelect(t,s,e)}}focus(){this._refHotKey&&c.default.focus(this._refHotKey)}_clearActive(){this.props.active.unset()}_handleContactClick(e){const{isDisabled:t}=this.props;if(t&&t(e.id))return;const s=this.props.selections.isSelected(e);this._handleSelect(e,!s,!1)}_renderList(){return this._isEmpty()?this.props.searchText?(0,v.jsx)(d.Search,{}):(0,v.jsx)(d.ListChats,{}):(0,v.jsx)(u.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return(0,v.jsx)(f.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange,children:this._renderList()})}}t.default=y,y.displayName="MultiSelectContactList"},49127:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{active:t,onIndexChange:s,onLeave:a,onEnter:r}=e,o=e=>{r&&r(e)},l=e=>{const t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)};return(0,n.jsx)(i.default,{handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),t.setNext(!0),s&&s(t.index)},up:e=>{e.stopPropagation(),e.preventDefault();t.prev()>-1?(t.setPrev(!0),s&&s(t.index)):a&&(a(e),t.unset())},enter:o,space:o},onRef:e.onRef,onFocus:e=>{l(e)&&t.setFirst(!0)},onBlur:e=>{l(e)&&t.unset()},tabIndex:0,children:e.children})};var i=a(s(39e3)),n=s(85893)},86519:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(55084),n=s(67294),r=a(s(60028)),o=a(s(55454)),l=s(92231),d=s(54647),u=a(s(86025)),c=a(s(52715)),h=a(s(47193)),f=s(86723),p=a(s(49127)),m=a(s(40630)),_=a(s(65161)),g=s(74289),v=s(89573),S=s(85893);class C extends n.Component{constructor(...e){super(...e),this.setList=e=>{this.list=e},this.state={products:this._getCollectionProducts(),loadingMore:!1,loadedProducts:this._getCollectionProducts().length,canLoadMore:!0,hasCatalog:!0},this._handleRef=e=>{this._refHotKey=e},this.updateForScrollEvent=e=>{const t=e.currentTarget,{scrollTop:s,clientHeight:a,scrollHeight:i}=t;i-a-s<o.default.SCROLL_FUDGE&&!this.state.loadingMore&&this._loadMoreProducts()},this._handleEnter=e=>{e.stopPropagation(),e.preventDefault();const{active:t}=this.props;t.value&&this._handleProductClick(t.value)},this._handleSelect=(e,t,s)=>{const{selections:a,active:i,onSelectionChanged:n}=this.props;a.setVal(e,t,s),i.setVal(e,s),n&&n(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{const{data:t}=e;return(0,S.jsx)(_.default,{product:t,selections:this.props.selections,onClick:()=>this._handleProductClick(t),active:this.props.active},t.id.toString())}}componentDidMount(){this.props.active.init(this.state.products),this._findProducts()}toggleFirst(e){const t=this.state.products;if(0===t.length)return;const s=t[0],a=!this.props.selections.isSelected(s);this._handleSelect(s,a,e)}focus(){this._refHotKey&&h.default.focus(this._refHotKey)}_findProducts(){this.setState({loadingMore:!0}),r.default.find((0,f.getMaybeMeUser)()).catch((0,i.filteredCatch)(d.ServerStatusCodeError,(()=>this.setState({hasCatalog:!1,loadingMore:!1,canLoadMore:!1})))).then((()=>this._loadMoreProducts()))}_loadMoreProducts(){const e=this._getCatalog();if(e)if(e.afterCursor&&this.state.canLoadMore)this.setState({loadingMore:!0}),r.default.findNextProductPage(e.id).checkpoint(this.props.rejectOnUnmount()).then((e=>{const t=e.length;this.setState((({loadedProducts:s})=>({products:e,loadingMore:!1,loadedProducts:t,canLoadMore:s!==t})),(()=>{this.props.onProductsLoaded&&this.props.onProductsLoaded(e)})),this.props.active.init(e)})).catch((()=>{this.setState({loadingMore:!1,canLoadMore:!0})}));else{const t=e.productCollection.getProductModels();this.setState({products:t,loadingMore:!1,canLoadMore:!1}),this.props.onProductsLoaded&&this.props.onProductsLoaded(t)}}_getCollectionProducts(){const e=this._getCatalog();return null!=e?e.productCollection.getProductModels():[]}_getCatalog(){const e=(0,f.getMaybeMeUser)(),t=(0,g.isString)(e)?(0,v.createWid)(e):e;return r.default.get(t)}_handleProductClick(e){const t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){if(0===this.state.products.length&&!this.state.loadingMore&&!this.state.canLoadMore)return(0,S.jsx)(l.ListProducts,{hasCatalog:this.state.hasCatalog});const e=this.state.products.map((e=>({itemKey:e.id.toString(),data:e})));return(0,S.jsx)(u.default,{ref:this.setList,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this._renderItem,flatListController:this.props.flatListController,defaultItemHeight:o.default.PRODUCT_LIST_ITEM_HEIGHT})}render(){return(0,S.jsxs)(p.default,{active:this.props.active,onEnter:this._handleEnter,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange,children:[this._renderList(),this.state.loadingMore&&(0,S.jsx)(c.default,{})]})}}C.displayName="MultiSelectProductList";const y=(0,m.default)(C);t.default=class extends y{toggleFirst(e){this.getComponent().toggleFirst(e)}focus(){this.getComponent().focus()}updateForScrollEvent(e){this.getComponent().updateForScrollEvent(e)}}},29830:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{vcards:t}=e;return(0,m.jsx)(c.default,{type:c.ModalTheme.Box,children:(0,m.jsxs)(r.default,{children:[(0,m.jsx)(l.default,{title:u.default.t(1283,{count:t.length,_plural:t.length}),type:l.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.default.closeModal()}),(0,m.jsx)(o.default,{children:(0,m.jsx)(d.default,{children:(0,m.jsx)("div",{className:h.default.body,children:t.map(((e,t)=>e?(0,m.jsx)("div",{className:h.default.vcardWrapper,children:(0,m.jsx)(f.default,{parsedVcard:e,thumbnail:(0,p.vcardThumbnail)(e)})},t):null))})})})]})})};var n=i(s(91952)),r=i(s(17747)),o=i(s(9042)),l=a(s(55588)),d=i(s(39e3)),u=i(s(2408)),c=a(s(79475)),h=i(s(67504)),f=i(s(46873)),p=s(50313),m=s(85893)},36334:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(75940)),o=a(s(85051)),l=s(86723),d=a(s(2408)),u=s(6084),c=a(s(25232)),h=a(s(79485)),f=s(85893);function p(){n.default.closeModal()}class m extends i.PureComponent{constructor(...e){super(...e),this.state={},this.onChange=({target:e})=>{e instanceof HTMLInputElement&&this.setState({mute:parseFloat(e.value)})},this.onMute=()=>{n.default.closeModal();const e=this._getMuteDuration();(0,l.setLastChatMuteDuration)(e),this.props.onMute((0,u.calculateMuteExpiration)(e),e)}}componentDidUpdate(){null!=this.props.mute.expiration&&0!==this.props.mute.expiration&&p()}_getMuteDuration(){return null!=this.state.mute&&0!==this.state.mute?this.state.mute:(0,l.getLastChatMuteDuration)()||(0,u.getDefaultMuteDuration)()}render(){const e=this.props.onCancel||p,t=this._getMuteDuration(),s=(0,u.getAllMuteDurations)().map((({label:e,duration:s})=>{const a=`duration-${s}`;return(0,f.jsxs)("li",{children:[(0,f.jsx)("input",{id:a,type:"radio",name:"duration",className:c.default.input,value:s,checked:t===s,onChange:this.onChange}),(0,f.jsx)("label",{htmlFor:a,className:c.default.label,children:e})]},"mute-"+s)}));return(0,f.jsx)(r.default,{title:(0,f.jsx)(o.default,{text:this.props.title}),okText:d.default.t(2066),onOK:this.onMute,onCancel:e,children:(0,f.jsx)("form",{children:(0,f.jsx)("ol",{children:s})})})}}m.CONCERNS={mute:["id","expiration"]},m.displayName="MutePopup";var _=(0,h.default)(m,m.CONCERNS);t.default=_},63360:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(70359),r=s(47874),o=i(s(91952)),l=i(s(9322)),d=i(s(17025)),u=i(s(41651)),c=s(86723),h=i(s(2408)),f=i(s(4231)),p=s(79659),m=i(s(40325)),_=a(s(45009)),g=i(s(2606)),v=i(s(3165)),S=i(s(22360)),C=s(85893);const y=p.NuxKeyTypes.COOL_OFF_NUX.INCOMPLETE_BUSINESS_PROFILE_BANNER;class E extends m.default{render(){const{onInteract:e}=this.props,t=new _.default(y,f.default.BANNER_TYPES.SMB_EDIT_PROFILE);return(0,C.jsx)(u.default,{title:h.default.t(1395),actionText:h.default.t(1394),onDismiss:e,onClick:()=>{!function(){const e=(0,c.getMaybeMeUser)(),t=S.default.assertGet(e),s=v.default.assertGet(e),a=d.default.assertGet(e);o.default.openDrawerLeft((0,C.jsx)(g.default,{status:t,profilePicThumb:s,contact:a,conn:l.default}))}(),e&&e()},nuxManager:t,theme:"nuxGreen"})}static shouldShow(){const e=(0,c.getMaybeMeUser)(),t=d.default.assertGet(e).businessProfile;return!!t&&(0,n.getABPropConfigValue)("web_abprop_business_profile_incomplete_nux_banner")&&l.default.isSMB&&!(0,r.isCompleteBizProfile)(t)&&(0,_.shouldShowNUX)(y)}}t.default=E,E.displayName="BusinessProfileBanner"},12366:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(63360)),r=a(s(8581)),o=a(s(9322)),l=s(86723),d=a(s(71681)),u=a(s(8820)),c=a(s(45184)),h=s(85893);class f extends i.Component{constructor(){super(),this.interactWithBanner=()=>{this.forceUpdate()};const e=r.default.getValid((0,l.getMaybeMeUser)());this.state={isBusinessProfileUpdated:null!=e}}componentDidMount(){if(o.default.isSMB){const e=r.default.get((0,l.getMaybeMeUser)());e&&this.props.listeners.add(e,"change",(()=>{this.setState({isBusinessProfileUpdated:!0})}))}}render(){return this.state.isBusinessProfileUpdated&&(0,h.jsxs)(u.default,{children:[(0,h.jsx)(n.default,{onInteract:this.interactWithBanner}),(0,h.jsx)(c.default,{onInteract:this.interactWithBanner})]})}}f.displayName="ChatListPanelNuxBanners";var p=(0,d.default)(f);t.default=p},41651:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,subtitle:t,onDismiss:s,onClick:a,nuxManager:l,theme:d,actionText:u}){const[c,h]=(0,i.useState)(!0);l.show();const f=(0,o.jsxs)(o.Fragment,{children:[t," ",u&&(0,o.jsx)(n.default,{inline:!0,children:u})]});return(0,o.jsx)(o.Fragment,{children:c&&(0,o.jsx)(r.default,{type:d,title:e,text:f,onDismiss:e=>{e.preventDefault(),e.stopPropagation(),l.dismiss(),s&&s(),h(!1)},action:()=>{l.click(),a&&a()}})})};var i=s(67294),n=a(s(43420)),r=a(s(62769)),o=s(85893)},40325:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(67294);class i extends a.Component{static shouldShow(){return!1}}t.default=i},8820:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e}){const t=i.Children.toArray(e).find((e=>e.type.shouldShow()));return(0,r.jsx)(n.default,{transitionName:"butterbar",children:t})};var i=s(67294),n=(a(s(40325)),a(s(82669))),r=s(85893)},45184:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(70359),r=i(s(8581)),o=s(47874),l=s(77512),d=i(s(9322)),u=i(s(41651)),c=s(86723),h=i(s(2408)),f=i(s(4231)),p=s(79659),m=i(s(40325)),_=a(s(45009)),g=i(s(65565)),v=s(85893);const S=p.NuxKeyTypes.COOL_OFF_NUX.PRODUCT_CATALOG_BANNER;class C extends m.default{render(){const{onInteract:e}=this.props,t=new _.default(S,f.default.BANNER_TYPES.SMB_CATALOG);return(0,v.jsx)(u.default,{title:h.default.t(1400),actionText:h.default.t(1399),onDismiss:e,onClick:()=>{(0,l.openCatalogManagementFlow)(null,f.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_NUX),e&&e()},nuxManager:t,theme:"nuxGreen"})}static shouldShow(){const e=(0,c.getMaybeMeUser)(),t=r.default.get(e);return(0,n.getABPropConfigValue)("web_abprop_product_catalog_nux_banner")&&d.default.isSMB&&!function(){if(!d.default.isSMB||!g.default.shopsHeaderDropdownMenuItem)return!1;const e=r.default.get((0,c.getMaybeMeUser)());return(0,o.hasShop)(e)}()&&!(0,o.hasCatalog)(t)&&(0,_.shouldShowNUX)(S)}}t.default=C,C.displayName="ProductCatalogBanner"},19582:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(67294),r=a(s(76610)),o=a(s(33287)),l=a(s(75940)),d=a(s(12950)),u=a(s(2408)),c=a(s(86638)),h=s(97504),f=s(85893);class p extends n.Component{constructor(...e){super(...e),this.state={additionalActions:!0},this._handleToggleAdditionalActions=()=>{this.setState({additionalActions:!this.state.additionalActions})},this.handleReport=()=>{this.state.additionalActions?this.props.isGroupChat?this.props.onReportExitClear():this.props.onReportBlockClear():this.props.onReport()}}render(){let e,t,s;this.props.isGroupChat?(e=u.default.t(1533),t=u.default.t(1532),s=d.default.supportsFeature(d.default.F.MD_BACKEND)?u.default.t(2056):u.default.t(1547)):this.props.isBusiness?(e=u.default.t(1526),t=u.default.t(1525),s=d.default.supportsFeature(d.default.F.MD_BACKEND)?u.default.t(2058):u.default.t(1549)):(e=u.default.t(1529),t=u.default.t(1528),s=d.default.supportsFeature(d.default.F.MD_BACKEND)?u.default.t(2057):u.default.t(1548));const a=(0,f.jsx)("div",{"data-a8n":r.default.key("menu-icon-report-spam"),className:c.default.control,children:(0,f.jsx)(o.default,{onChange:this._handleToggleAdditionalActions,checked:this.state.additionalActions,id:"menu-icon-report-spam"})}),n=(0,f.jsx)("label",{htmlFor:"menu-icon-report-spam",className:c.default.label,children:t});return d.default.supportsFeature(d.default.F.MD_BACKEND)?(0,f.jsxs)(l.default,{title:e,onOK:this.handleReport,okText:u.default.t(1522),onCancel:this.props.onCancel,children:[(0,f.jsxs)("div",{className:(0,i.default)(c.default.section,c.default.border),children:[a,n]}),(0,f.jsx)(h.TextParagraph,{className:c.default.mdMetaText,theme:"muted",children:s})]}):(0,f.jsxs)(l.default,{onOK:this.handleReport,okText:u.default.t(1522),onCancel:this.props.onCancel,children:[e,(0,f.jsx)(h.TextDiv,{className:c.default.metaText,theme:"muted",children:s}),(0,f.jsxs)("div",{className:c.default.section,children:[a,n]})]})}}t.default=p,p.displayName="ReportSpamPopup"},57774:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListType=void 0;var n=s(67294),r=i(s(82754)),o=i(s(91952)),l=i(s(27387)),d=i(s(97310)),u=i(s(17747)),c=i(s(9042)),h=a(s(55588)),f=s(62238),p=i(s(67893)),m=i(s(40854)),_=i(s(47193)),g=a(s(79475)),v=i(s(42984)),S=i(s(90504)),C=i(s(86519)),y=i(s(66329)),E=i(s(12212)),b=i(s(16967)),T=s(85893);const M={CHAT_SELECT_MODAL:"CHAT_SELECT_MODAL",CONTACT_SELECT_MODAL:"CONTACT_SELECT_MODAL",PARTICIPANT_MANAGE_MODAL:"PARTICIPANT_MANAGE_MODAL",PRODUCT_SELECT_MODAL:"PRODUCT_SELECT_MODAL"};t.ListType=M;class x extends n.Component{constructor(...e){super(...e),this.state={searchText:""},this._setRefSearch=e=>{this._refSearch=e},this._setRefList=e=>{this._refList=e},this.active=new b.default([],(e=>e.id)),this.selections=new y.default([],(e=>e.id.toString())),this.flatListController=new p.default,this._setSearchText=e=>{this.setState({searchText:e})},this.handleFocusList=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.handleDown=()=>{this.active.setFirst(!0)},this.handleScroll=e=>{this._refList instanceof C.default&&this._refList.updateForScrollEvent&&this._refList.updateForScrollEvent(e)},this._indicateSearchFocus=()=>{var e;this.active.unset(),null===(e=this._refSearch)||void 0===e||e.getComponent().indicateFocus()},this.handleLeaveList=()=>{m.default.shouldIndicateFocus(),_.default.focus(this._refSearch)},this.handleEnter=()=>{var e;null===(e=this._refList)||void 0===e||e.toggleFirst(!1)},this._handleForward=()=>{const{onConfirm:e,listType:t}=this.props,s=this.selections.getSelected();t===M.CONTACT_SELECT_MODAL||t===M.PARTICIPANT_MANAGE_MODAL||t===M.PRODUCT_SELECT_MODAL?e(s):Promise.all(s.map((e=>e instanceof l.default?(0,f.findChat)(e.id):e))).then((t=>{e(t)}))},this._handleSelectionChanged=(e,t)=>{var s;null===(s=this._refSearch)||void 0===s||s.select();const{onSelectionChanged:a}=this.props;if(null!=a){a(e,t,this.selections.getSelected())}},this._handleSelectedListDelete=(e,t)=>{this.selections.setVal(t,!1)},this.handleCancel=this.props.onCancel?this.props.onCancel:()=>o.default.closeModal()}componentDidMount(){_.default.focus(this._refSearch)}_renderList(){switch(this.props.listType){case M.CHAT_SELECT_MODAL:{const e=this.props.getInitialItems,t=this.selections;return(0,T.jsx)(v.default,{ref:this._setRefList,msgType:this.props.msgType,excludeChat:this.props.excludeChat,excludeBroadcast:this.props.excludeBroadcast,getInitialItems:e,searchText:this.state.searchText,active:this.active,selections:t,maxChats:this.props.maxItems,onLeaveList:this.handleLeaveList,onSelectionChanged:this._handleSelectionChanged,hasFrequentlyForwarded:this.props.hasFrequentlyForwarded,flatListController:this.flatListController,showEphemeralIcon:this.props.showEphemeralIcon})}case M.PARTICIPANT_MANAGE_MODAL:case M.CONTACT_SELECT_MODAL:{const e=this.props.getInitialItems,t=this.selections;return(0,T.jsx)(S.default,{ref:this._setRefList,useAllContacts:this.props.useAllContacts,getInitialItems:e,searchText:this.state.searchText,active:this.active,selections:t,maxContacts:this.props.maxItems,maxContactsExceedErrorMsg:this.props.maxItemsExceedErrorMsg,onLeaveList:this.handleLeaveList,onSelectionChanged:this._handleSelectionChanged,isDisabled:this.props.isDisabled,isSelected:this.props.isSelected,customSecondaryText:this.props.customSecondaryText,filter:this.props.filter,allowBlockedContacts:this.props.allowBlockedContacts,flatListController:this.flatListController})}case M.PRODUCT_SELECT_MODAL:{const e=this.selections;return(0,T.jsx)(C.default,{ref:this._setRefList,flatListController:this.flatListController,active:this.active,selections:e,onSelectionChanged:this._handleSelectionChanged,onProductsLoaded:this.props.onDataLoaded})}default:throw new Error(`Invalid list type: ${this.props.listType}`)}}render(){const{listType:e,useShortName:t,singleSelectionFooterType:s,multipleSelectionFooterType:a}=this.props,i=!!this.props.getInitialItems&&0!==this.props.getInitialItems().length,n=e===M.PARTICIPANT_MANAGE_MODAL?(0,T.jsx)(d.default,{selections:this.selections,useShortName:t,onDelete:this._handleSelectedListDelete,isDisabled:this.props.isDisabled}):null;return(0,T.jsx)(g.default,{type:g.ModalTheme.Tower,children:(0,T.jsxs)(u.default,{children:[(0,T.jsx)(h.default,{title:this.props.title,type:h.DRAWER_HEADER_TYPE.POPUP,onCancel:this.handleCancel}),(0,T.jsx)(E.default,{searchRef:this._setRefSearch,setSearchText:this._setSearchText,onDown:this.handleDown,onEnter:this.handleEnter,onFocus:this._indicateSearchFocus,enabled:this.props.enableSearchBox}),this.props.customHeader,n,(0,T.jsx)(c.default,{flatListControllers:[this.flatListController],onScroll:this.handleScroll,children:this._renderList()}),(0,T.jsx)(r.default,{singleSelectionType:s,multipleSelectionType:a,selections:this.selections,onForward:this._handleForward,startActive:i})]},"chat-modal")})}}t.default=x,x.displayName="SelectModal"},12212:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{enabled:t=!0,setSearchText:s,searchRef:a,onEnter:d}=e,u=(0,o.default)((e=>{s(e)}),100);return t?(0,l.jsx)(i.default,{handlers:{down:e.onDown},onFocus:e.onFocus,children:(0,l.jsx)(r.default,{ref:a,onSearch:u,onEnter:d,placeholder:n.default.t(1565)})}):null};var i=a(s(39e3)),n=a(s(2408)),r=a(s(55325)),o=a(s(38853)),l=s(85893)},66386:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(41609)),r=i(s(94184)),o=s(59118),l=s(67294),d=s(28047),u=i(s(91952)),c=i(s(75940)),h=i(s(9322)),f=i(s(55454)),p=s(54432),m=s(86723),_=i(s(39e3)),g=i(s(2408)),v=a(s(17126)),S=i(s(10044)),C=i(s(2966)),y=i(s(29458)),E=a(s(49201)),b=s(85893);const{SEND_LOGS_MAX_EMAIL_LENGTH:T,SEND_LOGS_MAX_SUBJECT_LENGTH:M,SEND_LOGS_MIN_DESC_LENGTH:x,SEND_LOGS_MAX_DESC_LENGTH:I,SEND_LOGS_MAX_SCREENSHOTS:P,SEND_LOGS_MAX_SCREENSHOT_SIZE:A}=f.default;class N extends l.Component{constructor(...e){var t;super(...e),this.state={email:"",emailError:void 0,confirmEmail:"",confirmEmailError:void 0,subject:h.default.isSMB?g.default.t(1621):g.default.t(1622),subjectError:void 0,description:null!==(t=this.props.description)&&void 0!==t?t:"",descriptionError:void 0,screenshots:[],isDragging:!1},this._setAttachButton=e=>{this._attachButton=e},this._setEmailAddr=e=>{this._emailAddrInput=e},this.handleSend=()=>{const e={},{email:t,confirmEmail:s,subject:a,description:i,screenshots:r}=this.state,l=t.trim(),c=s.trim();if(this._validateEmail(l)||(e.emailError=g.default.t(1608)),this._validateConfirmEmail(c)||(e.confirmEmailError=g.default.t(1609)),this.validateDescription(i)||(e.descriptionError=g.default.t(1620)),this._validateSubject(a)||(e.subjectError=g.default.t(1617)),(0,n.default)(e)){this.setState({email:l,confirmEmail:c,emailError:void 0,confirmEmailError:void 0,descriptionError:void 0,subjectError:void 0}),r.map((e=>{e.url&&(URL.revokeObjectURL(e.url),delete e.url)}));const e=(0,m.getMaybeMeUser)(),t=e?(0,o.formatPhone)(e.user):null,s=a.trim()||g.default.t(1605);(0,d.uploadUserReport)(t,l,s,i,r),this.props.onSend&&this.props.onSend({subject:s,description:i,numScreenshots:r.length}),u.default.closeModal(),u.default.openToast((0,b.jsx)(E.default,{msg:g.default.t(1616),id:(0,E.genId)()}))}else e.email=l,e.confirmEmail=c,this.setState(e)},this.handleCancel=()=>{this.props.onCancel&&this.props.onCancel(),u.default.closeModal()},this.handleSubjectChange=e=>{const t={subject:e,subjectError:this.state.subjectError};this.state.subjectError&&this._validateSubject(t.subject)&&(t.subjectError=void 0),this.setState(t)},this._handleSubjectBlur=()=>{let e;this._validateSubject(this.state.subject)||(e=g.default.t(1617)),this.state.subjectError!==e&&this.setState({subjectError:e})},this.handleDescriptionChange=e=>{const t={description:e,descriptionError:this.state.descriptionError};this.state.descriptionError&&this.validateDescription(t.description)&&(t.descriptionError=void 0),this.setState(t)},this._handleDescriptionBlur=()=>{let e;!this.state.description&&!this.state.descriptionError||this.validateDescription(this.state.description)||(e=g.default.t(1620)),this.state.descriptionError!==e&&this.setState({descriptionError:e})},this._handleEmailChange=e=>{const t={email:e,emailError:this.state.emailError};this.state.emailError&&this._validateEmail(t.email)&&(t.emailError=void 0),this.setState(t)},this._handleEmailBlur=()=>{let e;const t=this.state.email.trim(),s={};!this.state.email&&!this.state.emailError||this._validateEmail(t)||(e=g.default.t(1608)),this.state.emailError!==e&&(s.emailError=e),this.state.email!==t&&(s.email=t),(0,n.default)(s)||this.setState(s)},this._handleConfirmEmailChange=e=>{const t={confirmEmail:e,confirmEmailError:this.state.confirmEmailError};this.state.confirmEmailError&&this._validateConfirmEmail(t.confirmEmail)&&(t.confirmEmailError=void 0),this.setState(t)},this._handleConfirmEmailBlur=()=>{let e;const t=this.state.confirmEmail.trim(),s={};!this.state.confirmEmail&&!this.state.confirmEmailError||this._validateConfirmEmail(t)||(e=g.default.t(1609)),this.state.confirmEmailError!==e&&(s.confirmEmailError=e),this.state.confirmEmail!==t&&(s.confirmEmail=t),(0,n.default)(s)||this.setState(s)},this._validateEmail=e=>v.validateEmail(e),this._validateConfirmEmail=e=>this.state.email===e,this.validateDescription=e=>e.length>x,this._validateSubject=()=>!0,this.handleFilePick=e=>{e.preventDefault(),e.stopPropagation(),this._reachMaxScreenshots()||(0,p.getFiles)(e,"image/*").then((e=>{this._attachButton&&(this._attachButton.value="");const t=e.filter((e=>e.size<=A));t.length<e.length&&u.default.openToast((0,b.jsx)(E.default,{msg:g.default.t(1611),id:(0,E.genId)()}));const s=this.state.screenshots.concat(t).slice(0,P);s.map((e=>{e.url||(e.url=URL.createObjectURL(e))})),this.setState({screenshots:s})}))},this.handleDragChange=e=>{this.setState({isDragging:e})},this._handleAttachClick=()=>{this._attachButton&&!this._reachMaxScreenshots()&&this._attachButton.click()},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this._emailAddrInput&&this._emailAddrInput.restoreFocus()}componentWillUnmount(){this.state.screenshots.map((({url:e})=>e&&URL.revokeObjectURL(e)))}_reachMaxScreenshots(){return this.state.screenshots.length>=P}_deleteScreenshot(e){const t=this.state.screenshots.slice(),[s]=t.splice(e,1);s.url&&URL.revokeObjectURL(s.url),this.setState({screenshots:t})}_getScreenshotsList(){const e=this.state.screenshots.map(((e,t)=>{if(!e.url)return null;const s=`url(${e.url})`;return(0,b.jsx)("div",{className:S.default.screenshotsImg,style:{backgroundImage:s},children:(0,b.jsx)("button",{className:S.default.btnDelete,onClick:()=>{this._deleteScreenshot(t)},children:(0,b.jsx)(C.default,{name:"x-alt"})})},`screenshot-${t}`)}));return e.length?(0,b.jsx)("div",{className:S.default.screenshotPreview,children:e}):null}_getScreenshotAction(){if(this._reachMaxScreenshots()){const e=P;return(0,b.jsx)("div",{className:(0,r.default)(S.default.action,S.default.disabled),children:g.default.t(1619,{count:e,_plural:e})})}return this.state.isDragging?(0,b.jsx)("div",{className:S.default.action,children:g.default.t(1614)}):(0,b.jsx)("div",{className:S.default.action,onClick:this._handleAttachClick,children:g.default.t(1615)})}render(){const e={enter:this.stopPropagation},t=(0,b.jsxs)("div",{className:S.default.screenshots,children:[this._getScreenshotsList(),this._getScreenshotAction(),(0,b.jsx)("input",{accept:"image/*",type:"file",multiple:!0,onClick:this.stopPropagation,onChange:this.handleFilePick,ref:this._setAttachButton,disabled:this._reachMaxScreenshots()})]});return(0,b.jsx)(c.default,{title:g.default.t(1618),okText:g.default.t(1604),onOK:this.handleSend,onCancel:this.handleCancel,onDrop:this.handleFilePick,onDragChange:this.handleDragChange,children:(0,b.jsxs)(_.default,{handlers:e,children:[(0,b.jsx)(y.default,{ref:this._setEmailAddr,value:this.state.email,error:this.state.emailError,maxLength:T,onChange:this._handleEmailChange,onBlur:this._handleEmailBlur,placeholder:g.default.t(1606)}),(0,b.jsx)(y.default,{editable:!0,value:this.state.confirmEmail,error:this.state.confirmEmailError,maxLength:T,onChange:this._handleConfirmEmailChange,onBlur:this._handleConfirmEmailBlur,placeholder:g.default.t(1607)}),(0,b.jsx)(y.default,{value:this.state.subject,error:this.state.subjectError,maxLength:M,onChange:this.handleSubjectChange,onBlur:this._handleSubjectBlur,placeholder:g.default.t(1610)}),(0,b.jsx)(y.default,{value:this.state.description,error:this.state.descriptionError,maxLength:I,onChange:this.handleDescriptionChange,onBlur:this._handleDescriptionBlur,placeholder:g.default.t(756),multiline:!0}),t]})})}}t.default=N,N.displayName="SendLogsPopup"},37741:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,h.jsx)(o.default,{type:c.ModalTheme.ColumnButtons,title:u.default.t(2248),onCancel:function(){l.default.closeModal(),e.onCancelClick&&e.onCancelClick()},actions:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.default,{type:"primary",onClick:function(){const t=i.default.get((0,d.getMaybeMeUser)());(0,n.goToShop)(t),e.onViewShopClick&&e.onViewShopClick()},children:u.default.t(1798)}),(0,h.jsx)(r.default,{type:"primary",onClick:function(){const t=i.default.get((0,d.getMaybeMeUser)());(0,n.goToCommerceManager)(t),e.onCommerceManagerClick&&e.onCommerceManagerClick()},children:u.default.t(686)})]}),children:u.default.t(2249)})};var i=a(s(8581)),n=s(47874),r=a(s(69991)),o=a(s(17676)),l=a(s(91952)),d=s(86723),u=a(s(2408)),c=s(79475),h=s(85893)},45745:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(75940)),o=a(s(9322)),l=a(s(2408)),d=a(s(71681)),u=a(s(84361)),c=a(s(72787)),h=s(85893);class f extends i.Component{constructor(...e){super(...e),this.close=()=>{o.default.smbTos||n.default.closeModal()},this.logout=()=>{__LOG__(2)`SMB: terms of service modal, user clicked logout`,n.default.closeModal(),c.default.logout()}}componentDidMount(){this.props.listeners.add(o.default,"change:smbTos",this.close)}render(){const e=l.default.t(2162),t=l.default.t(1214),s=this.logout;return(0,h.jsxs)(r.default,{onOK:s,okText:t,children:[e,"",(0,h.jsx)(u.default,{})]})}}f.displayName="TermsOfServiceModal";var p=(0,d.default)(f);t.default=p},13803:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{link:t}=e,{suspiciousCharacters:s,domain:a,href:i}=t,p=a.split("."),m=p.map(((e,t)=>{let a=!1;const i=e.split("").map(((e,i)=>{const n=s&&s.has(e);a=n||a;const r=n?c.default.suspiciousCharacter:void 0;return(0,h.jsx)("span",{className:r,children:e},`${t}-${i}-${e}`)})),r=a?c.default.suspiciousHostname:void 0;return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)("span",{className:r,children:i}),t+1!==p.length?(0,h.jsx)("span",{children:"."}):null]},`${t}-${e}`)})),[_,g]=i.split(a);return(0,h.jsxs)(o.default,{title:u.default.t(1683),okText:u.default.t(1912),cancelText:u.default.t(1685),onOK:f,onCancel:()=>{const{href:e}=t;(0,l.openExternalLink)(e),r.default.closeModal()},children:[(0,h.jsxs)("div",{className:c.default.explanation,children:[u.default.t(1686)+" ",(0,h.jsx)(l.default,{href:(0,d.getSuspiciousLinkFaqUrl)(),children:u.default.t(1103)})]}),(0,h.jsxs)("div",{className:c.default.url,children:[_,m,g]})]})};var n=s(67294),r=i(s(91952)),o=i(s(75940)),l=a(s(4919)),d=s(57092),u=i(s(2408)),c=i(s(89042)),h=s(85893);const f=()=>{r.default.closeModal()}},7394:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e}){const t=()=>{(0,l.default)(e)||i.default.closeModal()};return(0,d.useListener)(e,"change:privacyMode",t),(0,d.useListener)(o.default,"change",t),(0,u.jsx)(n.default,{onOK:()=>i.default.closeModal(),okText:r.default.t(1407),children:r.default.t(2190)})};var i=a(s(91952)),n=a(s(75940)),r=a(s(2408)),o=a(s(49074)),l=a(s(68565)),d=s(61192),u=s(85893)},12650:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(75940)),o=a(s(9322)),l=a(s(2408)),d=a(s(71681)),u=a(s(72787)),c=s(85893);class h extends i.Component{constructor(...e){super(...e),this.close=()=>{0===o.default.tos&&n.default.closeModal()},this.logout=()=>{n.default.closeModal(),u.default.logout()}}componentDidMount(){this.props.listeners.add(o.default,"change:tos",this.close)}render(){let e,t,s;switch(o.default.tos){default:case 1:e=l.default.t(2188),t=l.default.t(1407),s=()=>n.default.closeModal();break;case 2:e=l.default.t(2189),t=l.default.t(1214),s=this.logout}return(0,c.jsx)(r.default,{onOK:s,okText:t,children:e})}}h.displayName="TermsOfServiceModal";var f=(0,d.default)(h);t.default=f},9678:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(69991)),o=i(s(91952)),l=i(s(9322)),d=s(73554),u=s(63290),c=i(s(39e3)),h=i(s(71681)),f=i(s(4231)),p=a(s(79475)),m=i(s(74937)),_=i(s(79485)),g=i(s(2966)),v=s(97504),S=i(s(13038)),C=i(s(17490)),y=i(s(72787)),E=s(85893);const b=()=>{};class T extends n.PureComponent{constructor(e){super(e),this._shouldShowModal=()=>null!=m.default.noticeId&&null!=m.default.blockingModal&&!0===m.default.blocking,this._handleNoticeBlockingModalChange=()=>{if(this._shouldShowModal()&&!this.state.blockingModalDisplayed){new f.default.UserNotice({userNoticeId:m.default.noticeId,userNoticeContentVersion:m.default.policyVersion,userNoticeEvent:f.default.USER_NOTICE_EVENT.BLOCKING_MODAL_APPEAR}).commit(),this.setState({blockingModalDisplayed:!0})}},this.handleNoticeIdChange=()=>{this.setState({blockingModalDisplayed:!1})},this.close=()=>{m.default.blocking||o.default.closeModal()},this.logout=()=>{__LOG__(2)`user notice modal, user clicked logout`,o.default.closeModal(),y.default.logout()},this.refresh=()=>{location.reload()},this.state={blockingModalDisplayed:!1}}componentDidMount(){this.props.listeners.add(m.default,"change:blocking",this.close),this.props.listeners.add(m.default,"change:noticeId",this.handleNoticeIdChange),this.props.listeners.add(m.default,"change:blockingModal change:blocking",this._handleNoticeBlockingModalChange),this._handleNoticeBlockingModalChange()}_getClickHandler(e){if(e){if("logout"===e.action)return this.logout;if("refresh"===e.action)return this.refresh}return b}_renderButton(e,t=!1){if(null==e)return null;const s=`UserNoticeModalPopup-${e.action}Btn`,a=`popup-controls-${e.action}`;return(0,E.jsx)(r.default,{a8nText:a,type:t?"primary":"secondary",onClick:this._getClickHandler(e),children:e.label},s)}render(){const{notice:e}=this.props,{blockingModal:t}=e;if(!t||!this._shouldShowModal())return null;const{iconSvg:s,iconDescription:a="",title:i,body:n,primaryButton:r,secondaryButton:o}=t;let h;s&&(h="light"===this.context.theme?s.light:s.dark);const f=(0,E.jsx)(g.default,{name:"alert-notice","aria-label":a}),m=h&&(0,d.sanitizeNoticeSVG)(h),_=m?(0,E.jsx)("span",{"aria-label":a,dangerouslySetInnerHTML:{__html:m}}):f,S=this._renderButton(o),y=this._renderButton(r,!0),b={enter:this._getClickHandler(r)},T=i?(0,d.sanitizeNoticeText)(i):null,M=n?(0,d.sanitizeNoticeText)(n):null;return(0,E.jsx)(c.default,{handlers:b,children:(0,E.jsx)("div",{className:l.default.isSMB?C.default.noticeSmbContainer:C.default.noticeContainer,children:(0,E.jsx)(p.default,{actions:[S,y],type:p.ModalTheme.Flex,children:(0,E.jsxs)("div",{className:C.default.noticeModalContentWrapper,children:[(0,E.jsx)(u.FlexRow,{className:C.default.noticeSvgWrapper,align:"center",justify:"center",children:_}),(0,E.jsx)(v.TextDiv,{theme:"popup-title",className:C.default.headerText,children:(0,E.jsx)("div",{dangerouslySetInnerHTML:{__html:T}})}),(0,E.jsx)(v.TextDiv,{theme:"plain",className:C.default.bodyText,children:(0,E.jsx)("div",{dangerouslySetInnerHTML:{__html:M}})})]})})})})}}T.CONCERNS={notice:["noticeId","blocking","blockingModal"]},T.contextType=S.default,T.displayName="UserNoticeModal";var M=(0,h.default)((0,_.default)(T,T.CONCERNS));t.default=M},46873:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{parsedVcard:t,thumbnail:s}=e,a=e.parsedVcard,T=(0,i.default)(a.TEL,(e=>e.properties.waid)),M=(0,i.default)(a.TEL,(e=>!e.properties.waid)),x=(0,n.default)(T,(e=>{const t=e.properties.waid[0],s=(0,b.jsx)(v.default,{onClick:()=>(e=>{o.default.closeModal(),(0,h.findChat)((0,E.createUserWid)(e)).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))})(t),children:(0,b.jsx)(g.default,{name:"chat",className:S.default.icon})}),a=(0,b.jsx)(_.SelectableSpan,{selectable:!0,children:(0,y.default)(t)});return(0,b.jsx)(d.default,{title:a,icon:s,children:(0,C.vcardGetType)(e)},`vCard-${String(e.index)}`)})),I=(0,n.default)(a.EMAIL,(e=>(0,b.jsx)(d.default,{title:f.default.forceLTR(e.value),onClick:()=>{return t=e.value,void(0,c.openExternalLink)(`mailto:${t}`);var t},children:(0,C.vcardGetType)(e)},`vCard-${String(e.index)}`))),P=(0,n.default)(a.ADR,(e=>{const t=e.value.join(" ");return(0,b.jsx)(d.default,{title:t,onClick:()=>(e=>{const t=`https://maps.google.com/maps/search/${(0,n.default)((0,i.default)(e),encodeURIComponent).join(", ")}?hl=${f.default.getLocale()}`;(0,c.openExternalLink)(t)})(e.value),children:(0,C.vcardGetType)(e)},`vCard-${String(e.index)}`)})),A=(0,n.default)(M,(e=>(0,b.jsx)(d.default,{title:f.default.forceLTR(e.value),children:(0,C.vcardGetType)(e)},`vCard-${String(e.index)}`))),N=(0,n.default)(a.SERVICE,(e=>(0,b.jsx)(d.default,{title:e.value,children:(0,C.vcardGetType)(e)},`vCard-${String(e.index)}`))),O=(0,n.default)(a.BDAY,(e=>(0,b.jsx)(d.default,{title:(0,C.vcardGetDate)(e.value),children:f.default.t(1754)},`vCard-${String(e.index)}`))),w=(0,n.default)(a.NICKNAME,(e=>(0,b.jsx)(d.default,{title:e.value,children:f.default.t(1766)},`vCard-${String(e.index)}`))),D=(()=>{const e=(0,C.vcardWids)(t),a=(0,b.jsx)(u.default,{text:(0,C.vcardGetNameFromParsed)(t),direction:"auto",titlify:!0,ellipsify:!0,selectable:!0}),i=(0,C.vcardGetOrganizationString)(t),n=(0,b.jsx)(p.default,{thumb:s,size:l.DETAIL_IMAGE_SIZE.SMALL,wid:m.default.findThumbnailWid(e)});return(0,b.jsx)(r.default,{image:n,theme:"plain",primary:a,secondary:i})})();return(0,b.jsxs)("div",{children:[D,(0,b.jsxs)("div",{className:S.default.content,children:[x,I,P,A,O,w,N]})]})};var i=a(s(63105)),n=a(s(35161)),r=a(s(55092)),o=a(s(91952)),l=s(88419),d=a(s(33249)),u=a(s(85051)),c=s(4919),h=s(62238),f=a(s(2408)),p=a(s(18327)),m=a(s(3165)),_=s(20845),g=a(s(2966)),v=a(s(89135)),S=a(s(42694)),C=s(50313),y=a(s(98532)),E=s(89573),b=s(85893)},54052:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onSelect:t,vcard:s}=e,a=(0,r.useMemo)((()=>{const a=e=>{t(e)};return(0,n.default)(s.TEL,(e=>e.properties.waid)).map((t=>{const s=(0,g.createUserWid)(t.properties.waid[0]);let i=e.icon;return i&&(i=(0,v.jsx)(f.default,{onClick:e=>{((e,t)=>{e.stopPropagation(),a(t)})(e,s)},children:i})),(0,v.jsx)("div",{className:m.default.container,children:(0,v.jsx)(u.default,{title:(0,_.default)(s),onClick:()=>a(s),icon:i,children:(0,p.vcardGetType)(t)})},`vCard-${t.value}`)}))}),[s.TEL,t,e.icon]);return(0,v.jsx)(h.default,{type:h.ModalTheme.Box,children:(0,v.jsxs)(o.default,{children:[(0,v.jsx)(d.default,{onCancel:e.onCancel,type:d.DRAWER_HEADER_TYPE.POPUP,title:c.default.t(591)}),(0,v.jsx)(l.default,{children:a})]})})};var n=i(s(63105)),r=s(67294),o=i(s(17747)),l=i(s(9042)),d=a(s(55588)),u=i(s(33249)),c=i(s(2408)),h=a(s(79475)),f=i(s(89135)),p=s(50313),m=i(s(54585)),_=i(s(98532)),g=s(89573),v=s(85893)},9599:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{messageText:t}=e,s=()=>{const e=(0,c.firstNEncodedBytes)(t,2e3),s=5===u.default.frequentlyForwardedThreshold?"wa":`wa${u.default.frequentlyForwardedThreshold}`,a=h.default.build("https://www.google.com/search",{ctx:s,q:e});(0,r.openExternalLink)(a),(new l.default.HfmTextSearchComplete).commit(),i.default.closeModal()},a=()=>{i.default.closeModal()};return d.default.online?(0,f.jsx)(n.default,{cancelText:o.default.t(1912),onCancel:a,okText:o.default.t(1580),onOK:s,children:o.default.t(1582)}):(0,f.jsx)(n.default,{okText:o.default.t(2085),onOK:a,children:o.default.t(1581)})};var i=a(s(91952)),n=a(s(75940)),r=s(4919),o=a(s(2408)),l=a(s(4231)),d=a(s(40298)),u=a(s(65565)),c=s(49002),h=a(s(1458)),f=s(85893)},1236:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logOrderMessageClick=function({catalogContext:e,catalogOwnerJid:t,orderId:s}){(0,o.createCatalogViewEvent)((0,i.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_ORDER_MESSAGE_CLICK},(0,r.toDataForCatalogViewEvents)(e))).commit()},t.logOrderListImpression=function({catalogContext:e,catalogOwnerJid:t,orderId:s,productCount:a}){(0,o.createCatalogViewEvent)((0,i.default)((0,i.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_IMPRESSION},(0,r.toDataForCatalogViewEvents)(e)),{},{bizActionConfig:{orderId:s,productCount:a}})).commit()},t.logOrderListItemClick=function({catalogOwnerJid:e,catalogContext:t,orderId:s}){(0,o.createCatalogViewEvent)((0,i.default)((0,i.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_ITEM_CLICK},(0,r.toDataForCatalogViewEvents)(t)),{},{bizActionConfig:{orderId:s}})).commit()},t.logSendOrderMessage=function({orderId:e,catalogOwnerJid:t,catalogContext:s,isOrderMsgAttached:a,quantity:l}){(0,o.createCatalogViewEvent)((0,i.default)((0,i.default)({isOwner:(0,o.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:n.default.CATALOG_BIZ_ACTION.ACTION_SEND_ORDER_MESSAGE,catalogViewAction:n.default.CATALOG_VIEW_ACTION.ACTION_SEND_ORDER_MESSAGE,isOrderMsgAttached:a},(0,r.toDataForCatalogViewEvents)(s)),{},{bizActionConfig:{orderId:e,quantity:l}})).commit()};var i=a(s(81109)),n=a(s(4231)),r=s(70790),o=s(28)},81408:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=i.default.supportsFeature(i.default.F.PIP_VIDEO_REDESIGN),s=t?16:void 0,a=e.isFullscreenMode?34:s;return(0,l.jsx)(o.default,{xstyle:[d.closeBtn,e.isFullscreenMode&&d.fullscreen,t&&d.closeBtnNew,e.isStatic&&d.static],onClick:e.onClick,children:(0,l.jsx)(r.default,{"aria-label":n.default.t(1923),name:"video-x",height:a,width:a})})};a(s(56720));var i=a(s(12950)),n=a(s(2408)),r=a(s(2966)),o=a(s(89135)),l=s(85893);const d={closeBtn:{position:"lhggkp7q",top:"r8dd7jr1",end:"ohq8n1fk",zIndex:"mb8var44",cursor:"ajgl1lbb"},closeBtnNew:{top:"jgz0asyo",end:"b4u6kxhc"},static:{position:"gire0wgi"},fullscreen:{top:"a70a3vn1",end:"h223g3sc"}}},86837:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsx)("div",{className:(0,i.default)(n.default.button,{[n.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick,children:(0,o.jsx)(r.default,{name:e.isInstagram?"logo-instagram":"logo-facebook"})})};var i=a(s(94184)),n=a(s(59029)),r=a(s(2966)),o=s(85893)},10011:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsx)(r.default,{xstyle:[l.button,e.isFullscreenMode&&l.fullscreen,e.isStatic&&l.static],onClick:e.onClick,children:e.isFullscreenMode?(0,o.jsx)(n.default,{"aria-label":i.default.t(14),name:"video-exit-fullscreen"}):(0,o.jsx)(n.default,{"aria-label":i.default.t(13),name:"video-fullscreen"})})};a(s(56720));var i=a(s(2408)),n=a(s(2966)),r=a(s(89135)),o=s(85893);const l={button:{position:"lhggkp7q",top:"r8dd7jr1",start:"sxdjimme",zIndex:"mb8var44",cursor:"ajgl1lbb"},static:{position:"gire0wgi"},fullscreen:{top:"ba95y10t",start:"guo0zu0m"}}},27448:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.jsx)("div",{className:(0,i.default)(n.default.pipBtn,{[n.default.player]:e.theme===l.PLAYER,[n.default.preview]:e.theme===l.PREVIEW}),onClick:e.onClick,children:(0,o.jsx)(r.default,{name:"video-pip"})})},t.PIP_BUTTON_THEME=void 0;var i=a(s(94184)),n=a(s(7893)),r=a(s(2966)),o=s(85893);const l={PLAYER:"PLAYER",PREVIEW:"PREVIEW"};t.PIP_BUTTON_THEME=l},66772:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.icon?(0,n.jsx)("div",{className:i.default.icon,children:e.icon}):null;return(0,n.jsxs)("div",{className:i.default.note,children:[t,(0,n.jsx)("div",{className:i.default.noteBody,children:e.children})]})};var i=a(s(18230)),n=s(85893)},56329:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=null;switch(e.theme){case"upper":t=(0,r.jsx)("div",{className:(0,i.default)(n.default.fullWidthShade,n.default.stripHeightShade,n.default.upperShade)},"upper-shade");break;case"lower":t=(0,r.jsx)("div",{className:(0,i.default)(n.default.fullWidthShade,n.default.stripHeightShade,n.default.lowerShade)},"lower-shade");break;case"full-rounded":t=(0,r.jsx)("div",{className:(0,i.default)(n.default.fullWidthShade,n.default.fullHeightShade,n.default.roundedCorners)},"full-rounded-shade");break;case"full-sharp":t=(0,r.jsx)("div",{className:(0,i.default)(n.default.fullWidthShade,n.default.fullHeightShade)},"full-sharp-shade")}return t};var i=a(s(94184)),n=a(s(92825)),r=s(85893)},90246:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YOUTUBE_URL_TIME_PARAM_PATTERN=t.YOUTUBE_URL_TIME_PARAM_NAME=t.URL_PATTERNS=t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=t.PLAYER_TYPE=void 0;const a=s(54302).Mirrored(["FLOATER","OG_FLOATER","MEDIA_VIEWER"]);t.PLAYER_TYPE=a;t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=16/9;t.URL_PATTERNS={ONLINE_VIDEO_URL:{YOUTUBE:[/^https?:\/\/youtu\.be\/(.{11})/,/^https?:\/\/youtube\.com\/watch\?v=(.{11})/,/^https?:\/\/m\.youtube\.com\/watch\?v=(.{11})/]}};t.YOUTUBE_URL_TIME_PARAM_NAME="t";t.YOUTUBE_URL_TIME_PARAM_PATTERN=/^(\d+h)?(\d+m)?(\d+s)?(\d+)?$/},20874:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.default)(e.mediaData,["preview","aspectRatio"]),s=t.preview?`url(${t.preview.url()})`:void 0;return(0,l.jsx)(n.default,{aspectRatio:t.aspectRatio,previewUrl:s,animationStartStyle:e.animationStartStyle,bottomContent:e.bottomContent,topContent:e.topContent,enableDragBar:e.enableDragBar,children:(0,l.jsx)(r.default,{msg:e.msg,mediaData:t,startTime:e.startTime,onClose:e.onClose,onError:e.onError,onOpenMediaViewer:e.onOpenMediaViewer,onMissingMedia:e.onMissingMedia,onUnsupportedMedia:e.onUnsupportedMedia,autoPlay:e.autoPlay,type:i.PLAYER_TYPE.FLOATER,disablePiPControls:e.disablePiPControls,onRefSet:e.onRefSet,onVideoMetadataChange:e.onVideoMetadataChange,onSetFullscreenToggleCallback:e.onSetFullscreenToggleCallback})})};var i=s(90246),n=a(s(50472)),r=a(s(96419)),o=a(s(76006)),l=s(85893)},27657:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(71730),n=s(67294),r=a(s(50472)),o=a(s(4294)),l=a(s(53373)),d=s(85893);class u extends n.Component{constructor(e){super(e),this._handleAspectRatio=e=>{((null==this.state.aspectRatio||0===this.state.aspectRatio)&&e||null!=this.state.aspectRatio&&0!==this.state.aspectRatio&&e&&Math.abs(e-this.state.aspectRatio)>.01)&&this.setState({aspectRatio:e})};const t=(0,o.default)(this.props.ogVideoInfo.previewUrl),s=(0,i.isNonZeroNumber)(t.width)&&(0,i.isNonZeroNumber)(t.height)?t.width/t.height:void 0;this.state={aspectRatio:s}}render(){return(0,d.jsx)(r.default,{aspectRatio:this.state.aspectRatio,previewUrl:this.props.ogVideoInfo.previewUrl,animationStartStyle:this.props.animationStartStyle,bottomContent:this.props.bottomContent,topContent:this.props.topContent,enableDragBar:this.props.enableDragBar,children:(0,d.jsx)(l.default,{ogVideoInfo:this.props.ogVideoInfo,startTime:this.props.startTime,onClose:this.props.onClose,onError:this.props.onError,onAspectRatio:this._handleAspectRatio,autoPlay:!0,disablePiPControls:this.props.disablePiPControls,onRefSet:this.props.onRefSet,onVideoMetadataChange:this.props.onVideoMetadataChange,onSetFullscreenToggleCallback:this.props.onSetFullscreenToggleCallback})})}}t.default=u,u.displayName="FloatingOgVideoPlayer"},50472:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const[s,a]=(0,i.useState)(!1),g=(0,i.useRef)(null);(0,i.useEffect)((()=>()=>clearTimeout(g.current)),[g]);const v=(0,l.default)((()=>{clearTimeout(g.current),a(!0),g.current=setTimeout((()=>{a(!1)}),3e3)}),50),S=function(e){if(null==e)return 1;switch(!0){case e<f:return f;case e>p:return p;default:return e}}(e.aspectRatio),C=null!==(t=e.initialPiPStyle)&&void 0!==t?t:function(e){const{initialWidth:t,initialHeight:s}=function(e){if(e>1)return{initialWidth:c,initialHeight:c/e};return{initialHeight:c,initialWidth:c*e}}(e),a=function(){var e;let t;return n.default.getConversationHeaderOffset((e=>{t=e})),null!==(e=t)&&void 0!==e?e:{right:window.innerWidth,bottom:0}}(),i=a.right<window.innerWidth?a.right-t-u:window.innerWidth-t-u,r=window.innerHeight-10-s-a.bottom;return{width:t,left:i,bottom:r}}(S),y=145*S,E=h<y?y:h;return(0,d.jsxs)(o.default,{aspectRatio:S,margin:_,minWidth:E,className:r.default.videoFloater,initialStyle:C,animationStartStyle:e.animationStartStyle,escapeConversationHeader:!0,topContent:e.topContent,bottomContent:e.bottomContent,onMouseMove:null!=e.bottomContent||null!=e.topContent||e.enableDragBar?v:void 0,extraContentVisible:s,enableDragBar:e.enableDragBar,children:[(0,d.jsx)(m,{aspectRatio:S,originalAspectRatio:e.aspectRatio,backgroundImage:e.previewUrl}),e.children]})},t.MAX_ASPECT_RATIO=t.MIN_ASPECT_RATIO=t.MIN_WIDTH=t.MIN_HEIGHT=t.LONGER_SIDE_DEFAULT_LENGTH=t.MARGIN_Y=t.MARGIN_X=void 0;var i=s(67294),n=a(s(91952)),r=a(s(86950)),o=(a(s(49694)),a(s(7542))),l=a(s(38853)),d=s(85893);const u=10;t.MARGIN_X=u;t.MARGIN_Y=10;const c=330;t.LONGER_SIDE_DEFAULT_LENGTH=c;t.MIN_HEIGHT=145;const h=145;t.MIN_WIDTH=h;const f=.4393939393939394;t.MIN_ASPECT_RATIO=f;const p=2.2758620689655173;function m({aspectRatio:e,originalAspectRatio:t,backgroundImage:s}){if(null==t||0===t)return null;if(!(e===f&&e>t||e===p&&e<t))return null;const a=s?(0,d.jsx)("div",{className:r.default.bgImg,style:{backgroundImage:s}}):null;return(0,d.jsx)("div",{className:r.default.bottomLayer,children:a})}t.MAX_ASPECT_RATIO=p;const _={x:u,y:10}},4294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=document.createElement("img");return t.src=e,{width:t.naturalWidth,height:t.naturalHeight}}},78471:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isParsableOnlineVideoURL=function(e,t,s){if(!o.default.supportsFeature(o.default.F.VIDEO_PLAYBACK_URL))return!1;if(s)return!1;if(e===r.ExtendedTextMessagePreviewType.VIDEO&&t){const e=l.default.withoutWww(l.default.hostname(t));if(e===n.default.HOSTNAME.INSTAGRAM||e===n.default.HOSTNAME.STREAMABLE||e===n.default.HOSTNAME.FACEBOOK||e===n.default.HOSTNAME.FBWATCH||e===n.default.HOSTNAME.FBWATCH_ALT||e===n.default.HOSTNAME.LASSOVIDEOS||e===n.default.HOSTNAME.LASSO_SHORTENED||e===n.default.HOSTNAME.SHARECHAT)return!0}if(t)for(const e in i.URL_PATTERNS.ONLINE_VIDEO_URL){const s=i.URL_PATTERNS.ONLINE_VIDEO_URL[e];for(let e=0;e<s.length;e++)if(s[e].test(l.default.withoutWww(t)))return!0}return!1},t.isParsableYouTubeVideoUrl=function(e,t,s){if(!o.default.supportsFeature(o.default.F.VIDEO_PLAYBACK_URL))return!1;if(s)return!1;if(t){const e=i.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE,s=l.default.withoutWww(t);return e.some((e=>e.test(s)))}return!1};var i=s(90246),n=a(s(55454)),r=s(60934),o=a(s(12950)),l=a(s(1458))},96419:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var i=s(67294),n=a(s(91952)),r=a(s(32666)),o=a(s(33734)),l=s(90672),d=a(s(23929)),u=a(s(77961)),c=a(s(3069)),h=a(s(79485)),f=s(15298),p=s(85893);t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class m extends i.Component{constructor(...e){super(...e),this._setRefVideoPlayer=e=>{this._refVideoPlayer=e},this._handleOpenMediaViewer=()=>{this.props.onOpenMediaViewer&&this.props.onOpenMediaViewer(),n.default.mediaViewerModal({msg:(0,f.unproxy)(this.props.msg),currentTime:this.getCurrentTimeFromVideo()})},this._handleOpenVideoFloater=()=>{this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater(),u.default.openPiP((0,f.unproxy)(this.props.msg),this.getCurrentTimeFromVideo(),null)},this._handleMissingMedia=()=>{this.props.onMissingMedia&&this.props.onMissingMedia(),n.default.openModal((0,p.jsx)(r.default,{msg:this.props.msg})),this.props.onClose()},this._handleUnsupportedMedia=()=>{this.props.onUnsupportedMedia&&this.props.onUnsupportedMedia(),n.default.openModal((0,p.jsx)(d.default,{msg:this.props.msg})),this.props.onClose()},this._handleNeedPokeMedia=()=>{this.props.onNeedPokeMedia&&this.props.onNeedPokeMedia(),n.default.openModal((0,p.jsx)(o.default,{msg:this.props.msg})),this.props.onClose()},this.handleLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}getContainerElement(){var e;return null===(e=this._refVideoPlayer)||void 0===e?void 0:e.getContainerElement()}componentDidUpdate(){switch(this.props.mediaData.mediaStage){case l.MEDIA_DATA_STAGE.ERROR_MISSING:this._handleMissingMedia();break;case l.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:this._handleUnsupportedMedia();break;case l.MEDIA_DATA_STAGE.NEED_POKE:this._handleNeedPokeMedia()}}getCurrentTimeFromVideo(){return this._refVideoPlayer?this._refVideoPlayer.getCurrentTimeFromVideo():0}render(){const e={msg:this.props.msg,mediaData:this.props.mediaData};return(0,p.jsx)(c.default,{ref:this._setRefVideoPlayer,type:this.props.type,msgVideoInfo:e,startTime:this.props.startTime,onClose:this.props.onClose,onVideoEnded:this.props.onVideoEnded,onError:this.props.onError,onOpenMediaViewer:this._handleOpenMediaViewer,onOpenVideoFloater:this._handleOpenVideoFloater,onMissingMedia:this._handleMissingMedia,onUnsupportedMedia:this._handleUnsupportedMedia,onLoadedMetadata:this.handleLoadedMetadata,onFullscreenToggle:this.props.onFullscreenToggle,autoPlay:this.props.autoPlay,overlays:this.props.overlays,noPip:this.props.noPip,disablePiPControls:this.props.disablePiPControls,onRefSet:this.props.onRefSet,onVideoMetadataChange:this.props.onVideoMetadataChange,onSetFullscreenToggleCallback:this.props.onSetFullscreenToggleCallback})}}m.CONCERNS={msg:["id"],mediaData:["mediaStage","preview","streamable"]},m.displayName="MsgVideoPlayer";const _=(0,h.default)(m,m.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent.getContainerElement()}}},13224:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(55454)),r=s(86723),o=a(s(79485)),l=a(s(83884)),d=s(85893);class u extends i.PureComponent{constructor(...e){super(...e),this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){const t=(0,r.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onLoadedMetadata=(e,t)=>{const s=this.props.mediaData.aspectRatio,a=0!==e.videoWidth&&0!==e.videoHeight?e.videoWidth/e.videoHeight:void 0;(!s&&null!=a&&0!==a||s&&null!=a&&0!==a&&Math.abs(a-s)>.01)&&this.props.mediaData.set({aspectRatio:a}),this.props.onLoadedMetadata(e,t)},this.play=()=>{const e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{const e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)}}render(){const e=this.props,{mediaData:t}=e,s=t.mediaBlob;let a;const i=t.streamable&&t.isStreamable();return a=!this.mediaBlobWasDownloadedBeforeMount&&i||!s?t.streamable&&t.isStreamable()?`${n.default.VIDEO_STREAM_URL}?key=${this.props.msg.id.toString()}`:void 0:s.url(),(0,d.jsx)(l.default,{ref:this.setRefVideo,url:a,startTime:this.props.startTime,poster:this.props.poster,className:this.props.className,onVolumeChange:this.props.onVolumeChange,onEnded:this.props.onEnded,onError:this.props.onError,onPause:this.props.onPause,onPlaying:this.props.onPlaying,onProgress:this.props.onProgress,onTimeUpdate:this.props.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay,children:e.children})}}u.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable","aspectRatio"]},u.displayName="MsgVideoTag";const c=(0,o.default)(u,u.CONCERNS);t.default=class extends c{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},53373:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(n.default,{type:i.PLAYER_TYPE.OG_FLOATER,ogVideoInfo:e.ogVideoInfo,startTime:e.startTime,onClose:e.onClose,onVideoEnded:e.onVideoEnded,onError:e.onError,onAspectRatio:e.onAspectRatio,autoPlay:e.autoPlay,disablePiPControls:e.disablePiPControls,onRefSet:e.onRefSet,onVideoMetadataChange:e.onVideoMetadataChange,onSetFullscreenToggleCallback:e.onSetFullscreenToggleCallback})};var i=s(90246),n=a(s(3069)),r=s(85893)},77961:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(95863));class n extends i.default{constructor(){super(),this.openPiP=(e,t,s)=>{this.manager&&this.manager.openPiP(e,t,s)},this.closePiP=()=>{this.manager&&this.manager.closePiP()},this._pausePiP=()=>{this.manager&&this.manager.pausePiP()},this.openYoutubePiP=(e,t,s,a)=>{this.manager&&this.manager.openYoutubePiP(e,t,s,a)},this.openOgVideoPiP=(e,t,s,a,i)=>{this.manager&&this.manager.openOgVideoPiP(e,t,s,a,i)},this.isOpened=e=>!!this.manager&&this.manager.isOpened(e)}register(e){this.manager=e}unregister(){this.manager=null}didOpen(e){this.trigger(`${e.id.toString()}_pip_did_open`)}didClose(e){this.trigger(`${e.id.toString()}_pip_did_close`)}didError(e){this.trigger(`${e.id.toString()}_pip_did_error`)}}var r=new n;t.default=r},84408:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PiPManager=void 0;var n=s(67294),r=i(s(81408)),o=i(s(91952)),l=s(90246),d=i(s(20874)),u=i(s(27657)),c=i(s(50472)),h=i(s(12950)),f=i(s(2408)),p=i(s(71681)),m=i(s(4231)),_=i(s(45472)),g=i(s(77961)),v=i(s(37640)),S=a(s(49201)),C=i(s(82669)),y=i(s(96157)),E=i(s(25275)),b=s(85893);class T extends n.Component{constructor(e){super(e),this._handleSetFullscreenToggleCallback=e=>{this.setState({onFullscreenToggle:e})},this._handleVideoMetadataChange=(e,t)=>{this.setState({videoMetadata:e,isVideoPlaying:t})},this._handleRefSet=e=>{this.setState({videoRef:e})},this._handleMediaViewerModal=e=>{var t;const{msg:s}=e;(null===(t=this.state.msg)||void 0===t?void 0:t.id.equals(s.id))&&this.closePiP()},this._closePiPFromMsg=e=>{var t,s,a;[null===(t=this.state.msg)||void 0===t?void 0:t.id,null===(s=this.state.youtubeVideoInfo)||void 0===s?void 0:s.videoMsg.id,null===(a=this.state.ogVideoInfo)||void 0===a?void 0:a.videoMsg.id].some((t=>null==t?void 0:t.equals(e.id)))&&this.closePiP()},this.openPiP=(e,t,s)=>{this._previousPiPDidClose(),g.default.didOpen(e),e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.PIP,isUserInitiated:!0}),this.setState({msg:e,youtubeVideoInfo:null,ogVideoInfo:null,startTime:t,zoomRect:s})},this.closePiP=()=>{var e,t,s,a;const i=null!==(e=null!==(t=this.state.msg)&&void 0!==t?t:null===(s=this.state.ogVideoInfo)||void 0===s?void 0:s.videoMsg)&&void 0!==e?e:null===(a=this.state.youtubeVideoInfo)||void 0===a?void 0:a.videoMsg;i&&g.default.didClose(i),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.pausePiP=()=>{},this.isOpened=e=>!(!this.state.msg||!e.id.equals(this.state.msg.id))||(!(!this.state.youtubeVideoInfo||!e.id.equals(this.state.youtubeVideoInfo.videoMsg.id))||!(!this.state.ogVideoInfo||!e.id.equals(this.state.ogVideoInfo.videoMsg.id))),this.openYoutubePiP=(e,t,s,a)=>{this._previousPiPDidClose(),g.default.didOpen(t),this.setState({msg:null,youtubeVideoInfo:{videoId:e,videoMsg:t},ogVideoInfo:null,startTime:s,zoomRect:a})},this.openOgVideoPiP=(e,t,s,a,i)=>{this._previousPiPDidClose(),g.default.didOpen(s),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:{videoUrl:e,previewUrl:`data:image/jpeg;base64,${t}`,videoMsg:s},startTime:a,zoomRect:i})},this._previousPiPDidClose=()=>{var e,t,s,a;const i=null!==(e=null!==(t=this.state.msg)&&void 0!==t?t:null===(s=this.state.youtubeVideoInfo)||void 0===s?void 0:s.videoMsg)&&void 0!==e?e:null===(a=this.state.ogVideoInfo)||void 0===a?void 0:a.videoMsg;i&&g.default.didClose(i)},this.handleMsgVideoPiPError=()=>{this.state.msg&&g.default.didError(this.state.msg)},this._handleOgVideoPiPError=()=>{this.state.ogVideoInfo&&g.default.didError(this.state.ogVideoInfo.videoMsg)},this.state={msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null,videoMetadata:null,videoRef:null,isVideoPlaying:!1}}componentDidMount(){g.default.register(this),this.props.listeners.add(o.default,"media_viewer_modal",this._handleMediaViewerModal),this.props.listeners.add(_.default,"remove",(e=>{this._closePiPFromMsg(e)})),this.props.listeners.add(_.default,"change:asRevoked",(e=>{if(e.asRevoked){if(!e.isSentByMe){const t=this.state.msg&&this.state.msg.id.equals(e.id),s=this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id),a=this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id);(s||t||a)&&o.default.openToast((0,b.jsx)(S.default,{id:(0,S.genId)(),msg:f.default.t(1452)}))}this._closePiPFromMsg(e)}}))}componentWillUnmount(){g.default.unregister()}_getExtraContentProps(){const e=h.default.supportsFeature(h.default.F.PIP_VIDEO_REDESIGN);return e?{enableDragBar:e,bottomContent:(0,b.jsx)(y.default,{refVideo:this.state.videoRef,videoMetadata:this.state.videoMetadata,isFullscreenMode:!1,isVideoPlaying:this.state.isVideoPlaying,newPiPStyle:!0,onFullscreenToggle:this.state.onFullscreenToggle}),topContent:(0,b.jsx)(r.default,{isFullscreenMode:!1,onClick:this.closePiP})}:Object.freeze({})}_renderVideoPlayer(){const{msg:e,youtubeVideoInfo:t,ogVideoInfo:s}=this.state,{enableDragBar:a,topContent:i,bottomContent:n}=this._getExtraContentProps();return e?(0,b.jsx)(d.default,{msg:e,mediaData:e.mediaData,animationStartStyle:this._getAnimationStartStyle(),startTime:this.state.startTime,onClose:this.closePiP,onError:this._handleOgVideoPiPError,onOpenMediaViewer:this.closePiP,onMissingMedia:this.closePiP,onUnsupportedMedia:this.closePiP,autoPlay:!0,enableDragBar:a,topContent:i,bottomContent:n,disablePiPControls:a,onRefSet:this._handleRefSet,onVideoMetadataChange:this._handleVideoMetadataChange,onSetFullscreenToggleCallback:this._handleSetFullscreenToggleCallback},e.id.toString()):t?(0,b.jsx)(c.default,{aspectRatio:l.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO,animationStartStyle:this._getAnimationStartStyle(),enableDragBar:a,topContent:i,bottomContent:n,children:(0,b.jsx)(E.default,{youtubeVideoId:t.videoId,startTime:this.state.startTime,onClose:this.closePiP,disablePiPControls:a,onRefSet:this._handleRefSet,onVideoMetadataChange:this._handleVideoMetadataChange,autoPlay:!0,onSetFullscreenToggleCallback:this._handleSetFullscreenToggleCallback,exposeIframeInPiP:a},t.videoId)},t.videoId):s?(0,b.jsx)(u.default,{ogVideoInfo:s,startTime:this.state.startTime,onClose:this.closePiP,onError:this._handleOgVideoPiPError,animationStartStyle:this._getAnimationStartStyle(),autoPlay:!0,enableDragBar:a,topContent:i,bottomContent:n,disablePiPControls:a,onRefSet:this._handleRefSet,onVideoMetadataChange:this._handleVideoMetadataChange,onSetFullscreenToggleCallback:this._handleSetFullscreenToggleCallback},s.videoMsg.id.toString()):null}_getAnimationStartStyle(){return this.state.zoomRect?{height:this.state.zoomRect.bottom-this.state.zoomRect.top,width:this.state.zoomRect.right-this.state.zoomRect.left,left:this.state.zoomRect.left,bottom:window.innerHeight-this.state.zoomRect.bottom}:null}render(){return(0,b.jsx)(C.default,{transitionName:"pip",className:v.default.playerWrapper,component:"div",children:this._renderVideoPlayer()})}}t.PiPManager=T,T.displayName="PiPManager";var M=(0,p.default)(T);t.default=M},3069:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var n=i(s(81109)),r=i(s(18446)),o=i(s(23279)),l=i(s(94184)),d=s(67294),u=i(s(81408)),c=s(90246),h=i(s(4919)),f=i(s(58134)),p=i(s(10011)),m=i(s(12950)),_=i(s(2408)),g=i(s(71681)),v=i(s(53608)),S=a(s(15377)),C=s(90672),y=i(s(13224)),E=a(s(27448)),b=i(s(66772)),T=i(s(56329)),M=i(s(11644)),x=i(s(2966)),I=i(s(35371)),P=i(s(83884)),A=i(s(82669)),N=i(s(96157)),O=s(85893);t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class w extends d.Component{constructor(e){super(e),this._resetMouseMoveRecently=(0,o.default)((()=>{this.setState({mouseMoveRecently:!1})}),3e3),this.buffered=[],this.setRefVideo=e=>{var t,s;(this.refVideo=e,null!=e)&&(null===(t=(s=this.props).onRefSet)||void 0===t||t.call(s,e))},this.setRefContainer=e=>{this.refContainer=e,this.refContainer},this.handleLoadedMetadata=(e,t)=>{const s=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:s,volume:e.volume,muted:e.muted,bufferedTime:0}}),this.props.onAspectRatio&&e.videoWidth&&e.videoHeight&&this.props.onAspectRatio(e.videoWidth/e.videoHeight),this.props.onLoadedMetadata&&this.props.onLoadedMetadata(t)},this.handleTimeUpdate=e=>{let t=null;const s=this.state.videoMetadata;if(s){const a=this._getRelevantBufferedTime(this.buffered,e);t=(0,n.default)((0,n.default)({},s),{},{currentTime:e,bufferedTime:a})}this.setState({videoMetadata:t})},this._handleVolumeChange=e=>{let t=null;this.state.videoMetadata&&(t=(0,n.default)((0,n.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this._handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded(),this.setState({isVideoPlaying:!1})},this._handleError=e=>{20!==e?(this.setState({isVideoError:!0}),this.props.onError&&this.props.onError()):this.setState({isVideoPlaying:!1})},this.handlePause=()=>{this.setState({isVideoPlaying:!1})},this._handlePlaying=()=>{this.setState({isVideoPlaying:!0})},this.handleProgress=e=>{this.buffered=e;const t=this.state.videoMetadata;if(!t)return;const s=t.currentTime,a=this._getRelevantBufferedTime(e,s),i=(0,n.default)((0,n.default)({},t),{},{bufferedTime:a});this.setState({videoMetadata:i})},this.handleEnterFullscreen=e=>{e.stopPropagation(),f.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),f.default.exitFullscreen()},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this._isNewFullscreenStyleActive=()=>m.default.supportsFeature(m.default.F.PIP_VIDEO_REDESIGN)&&this.state.isFullscreenMode,this.state={videoMetadata:null,isVideoPlaying:!1,isVideoError:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:f.default.isFullscreenMode}}getContainerElement(){return this.refContainer}componentDidUpdate(e,t){var s,a;t.isVideoPlaying===this.state.isVideoPlaying&&(0,r.default)(t.videoMetadata,this.state.videoMetadata)||(null===(s=(a=this.props).onVideoMetadataChange)||void 0===s||s.call(a,this.state.videoMetadata,this.state.isVideoPlaying))}componentDidMount(){var e,t;this.props.listeners.add(f.default,"fullscreen_change",(()=>{f.default.isFullscreenMode&&f.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)})):f.default.isFullscreenMode||this.setState({isFullscreenMode:!1},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)}))})),null===(e=(t=this.props).onSetFullscreenToggleCallback)||void 0===e||e.call(t,this.handleFullscreenToggleButtonClick)}componentWillUnmount(){this._resetMouseMoveRecently.cancel()}getCurrentTimeFromVideo(){return this.refVideo?this.refVideo.getCurrentTime():0}getVolumeFromVideo(){return this.refVideo?this.refVideo.getVolume():0}getMutedFromVideo(){return!!this.refVideo&&this.refVideo.getMuted()}_getRelevantBufferedTime(e,t){let s=0;for(let a=0;a<e.length;a++)if(t>=e[a][0]&&t<e[a][1]){s=e[a][1];break}return s}_renderMedia(){switch(this.props.type){case c.PLAYER_TYPE.FLOATER:case c.PLAYER_TYPE.MEDIA_VIEWER:return this._renderMsgMedia();case c.PLAYER_TYPE.OG_FLOATER:return this._renderOgMedia()}return null}_renderOgMedia(){const e=this.props.ogVideoInfo;if(!e)return null;const t={backgroundImage:`url(${e.previewUrl})`};return(0,O.jsxs)(O.Fragment,{children:[this.state.isFullscreenMode?null:(0,O.jsx)("div",{className:M.default.preview,style:t}),""!==e.videoUrl?(0,O.jsx)(P.default,{ref:this.setRefVideo,url:e.videoUrl,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay,children:_.default.t(1776)},"floating-media"):null]})}_renderMsgMedia(){const e=this.props.msgVideoInfo;if(!e)return null;const{preview:t}=e.mediaData;if(this._isMediaRenderable()){const s=t?{backgroundImage:`url(${t.url()})`}:void 0;return(0,O.jsxs)(O.Fragment,{children:[this.state.isFullscreenMode||this.props.type!==c.PLAYER_TYPE.FLOATER?null:(0,O.jsx)("div",{className:M.default.preview,style:s}),(0,O.jsx)(y.default,{ref:this.setRefVideo,msg:e.msg,mediaData:e.mediaData,className:M.default.videoTag,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay,children:_.default.t(1776)},"floating-media")]})}return t?(0,O.jsx)("img",{alt:_.default.t(2136),src:t.url(),draggable:"false"},"floating-media"):null}_isMediaRenderable(){switch(this.props.type){case c.PLAYER_TYPE.FLOATER:case c.PLAYER_TYPE.MEDIA_VIEWER:const e=this.props.msgVideoInfo;if(!e)return!1;const t=e.mediaData;return t.mediaStage===C.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable();case c.PLAYER_TYPE.OG_FLOATER:return!0}return!0}_renderMediaStage(){switch(this.props.type){case c.PLAYER_TYPE.FLOATER:case c.PLAYER_TYPE.MEDIA_VIEWER:const e=this.props.msgVideoInfo;return e?(0,O.jsx)("div",{className:M.default.mediaStageWrapper,children:(0,O.jsx)(v.default,{msg:e.msg,mediaData:e.mediaData})}):null;case c.PLAYER_TYPE.OG_FLOATER:const t=this.props.ogVideoInfo;return t&&""===t.videoUrl?(0,O.jsx)("div",{className:M.default.mediaStageWrapper,children:(0,O.jsx)(S.Pending,{})}):null}return null}_renderVideoControls(){var e,t;if(!this._isMediaRenderable())return null;const s=this.state.videoMetadata;if(!s)return null;const a=this._isNewFullscreenStyleActive();return(0,O.jsx)(N.default,{refVideo:this.refVideo,videoMetadata:s,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,ctwaSourceUrl:null===(e=this.props.ogVideoInfo)||void 0===e||null===(t=e.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl,newPiPStyle:a,onFullscreenToggle:a?this.handleFullscreenToggleButtonClick:void 0,onClose:a?this.props.onClose:void 0})}renderErrorMessage(){return(0,O.jsxs)(b.default,{children:[_.default.t(1449),this._renderErrorMessageLink()]})}_renderErrorMessageLink(){var e,t;if(this.props.type!==c.PLAYER_TYPE.OG_FLOATER)return null;if(!this.props.ogVideoInfo)return null;const s=null!==(e=null===(t=this.props.ogVideoInfo.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl)&&void 0!==e?e:this.props.ogVideoInfo.videoMsg.matchedText;return(0,O.jsxs)(h.default,{className:M.default.errorLink,href:s,children:[(0,O.jsx)("span",{children:_.default.t(1450)}),(0,O.jsx)(x.default,{directional:!0,display:"inline",name:"chevron-right-text",className:M.default.errorLinkChevron})]})}render(){let e,t,s;const a=this._isMediaRenderable(),i=this._isNewFullscreenStyleActive();a&&!i&&(t=(0,O.jsx)(p.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick}));const n=i?null:(0,O.jsx)(u.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}});switch(this.props.type){case c.PLAYER_TYPE.OG_FLOATER:case c.PLAYER_TYPE.FLOATER:e=(0,O.jsxs)(O.Fragment,{children:[I.default.isSafari?null:t,n]});break;case c.PLAYER_TYPE.MEDIA_VIEWER:let i;i=this.state.isFullscreenMode?n:!this.props.noPip&&a?(0,O.jsx)(E.default,{onClick:e=>{e.stopPropagation(),this.props.onClose&&this.props.onClose(),this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater()},theme:E.PIP_BUTTON_THEME.PLAYER}):null,e=(0,O.jsxs)(O.Fragment,{children:[t,i]}),s=e=>{e.stopPropagation(),this.refVideo&&(this.state.isVideoPlaying?this.refVideo.pause():this.refVideo.play())}}let r;r=this.state.isFullscreenMode?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(T.default,{theme:"upper"}),(0,O.jsx)(T.default,{theme:"lower"})]}):this.props.type===c.PLAYER_TYPE.MEDIA_VIEWER?(0,O.jsx)(T.default,{theme:"full-sharp"}):(0,O.jsx)(T.default,{theme:"full-rounded"});const o=this.state.isVideoError?this.renderErrorMessage():null,d=this.props.disablePiPControls&&!this.state.isFullscreenMode;return(0,O.jsxs)("div",{ref:this.setRefContainer,className:(0,l.default)(M.default.container,{[M.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this._resetMouseMoveRecently()},onClick:s,children:[(0,O.jsx)("div",{className:(0,l.default)(M.default.videoFloaterMedia,{[M.default.fullScreenRedesign]:i}),children:this._renderMedia()}),this._renderMediaStage(),o,this.props.overlays,(0,O.jsx)(A.default,{transitionName:"fade-fast",children:this.state.isMouseOver&&this.state.mouseMoveRecently&&!d?(0,O.jsxs)(O.Fragment,{children:[r,this._renderVideoControls(),e]}):null})]},"elementsWrapped")}}w.displayName="SharedVideoPlayer";const D=(0,g.default)(w);t.default=class extends D{constructor(...e){super(...e),this.getCurrentTimeFromVideo=()=>this.getComponent().getCurrentTimeFromVideo(),this.getContainerElement=()=>this.getComponent().getContainerElement()}}},83884:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(78718)),n=a(s(23279)),r=s(67294),o=a(s(45834)),l=a(s(91952)),d=s(86723),u=a(s(71681)),c=s(85893);const h=(0,n.default)(((e,t)=>{(0,d.setVideoVolumeSettings)(e,t)}),500);class f extends r.PureComponent{constructor(...e){super(...e),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){const t=(0,d.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onVolumeChange=()=>{const e=this.videoRef;if(e){const t=e.getVolume(),s=e.getMuted();h(t,s),this.props.onVolumeChange({volume:t,muted:s})}},this.onOtherPlaying=e=>{e!==this&&this.videoRef&&this.videoRef.pause()},this.onPlaying=()=>{l.default.mediaPlaying(this),this.props.onPlaying()},this.setStartTime=()=>{this.videoRef&&"number"==typeof this.props.startTime&&this.videoRef.setCurrentTime(this.props.startTime)},this.play=()=>{const e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{const e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.onLoadedMetadata=e=>{null!=this.props.startTime&&this.setStartTime();const t=(0,i.default)(e.target,["duration","volume","muted","videoWidth","videoHeight"]);this.props.onLoadedMetadata(t,e)},this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)},this.onProgress=()=>{if(!this.videoRef)return;const e=this.videoRef.getBuffered(),t=[];if(e)for(let s=0;s<e.length;s++)t.push([e.start(s),e.end(s)]);this.props.onProgress(t)},this.onTimeUpdate=e=>{const t=e.target.currentTime;this.props.onTimeUpdate(t)},this.onError=e=>{const t=this.videoRef&&this.videoRef.refVideo&&this.videoRef.refVideo.error?this.videoRef.refVideo.error.code:null;null!=t||null==e.code?this.props.onError(t):this.props.onError(e.code)}}componentDidMount(){this.props.listeners.add(l.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(l.default,"pttRecording",this.pause)}componentWillUnmount(){h.flush()}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){return(0,c.jsx)(o.default,{ref:this.setRefVideo,src:this.props.url,poster:this.props.poster,className:this.props.className,onVolumeChange:this.onVolumeChange,onEnded:this.props.onEnded,onError:this.onError,onPause:this.props.onPause,onPlaying:this.onPlaying,onProgress:this.onProgress,onTimeUpdate:this.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay,children:this.props.children})}}f.displayName="UrlVideoTag";const p=(0,u.default)(f);t.default=class extends p{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},71951:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THUMB_RADIUS_FULLSCREEN=t.THUMB_RADIUS_WINDOW=void 0;var i=a(s(5558)),n=a(s(94184)),r=s(67294),o=a(s(25142)),l=a(s(81408)),d=a(s(55454)),u=a(s(86837)),c=s(4919),h=a(s(10011)),f=a(s(2408)),p=a(s(40858)),m=a(s(35371)),_=a(s(1458)),g=a(s(18840)),v=s(85893);const S=parseFloat(g.default["-thumb-radius-window"].replace(/px$/,""));t.THUMB_RADIUS_WINDOW=S;const C=parseFloat(g.default["-thumb-radius-fullscreen"].replace(/px$/,""));t.THUMB_RADIUS_FULLSCREEN=C;function y(e,t){switch(!0){case t:return"video-volume-muted";case e<.5:return"video-volume-1";case e>=1:return"video-volume"}return"video-volume-2"}class E extends r.PureComponent{constructor(e){super(e),this.handlePause=()=>{this.props.onPause()},this._handlePlay=()=>{this.props.onPlay()},this._isVideoPlayingBeforeDrag=null,this._handleProgressChange=e=>{const t=parseFloat(e.target.value);this.props.onProgressChange(t);const s=Math.abs(this.state.bufferedTime-this.props.duration)<.1?this.state.bufferedTime:0;this.setState({progress:t,bufferedTime:s})},this._handleProgressMouseUp=()=>{this.setState({isDraggingProgress:!1}),null!=this._isVideoPlayingBeforeDrag&&(this._isVideoPlayingBeforeDrag&&this._handlePlay(),this._isVideoPlayingBeforeDrag=null)},this._handleProgressMouseDown=()=>{this.setState({isDraggingProgress:!0}),this._isVideoPlayingBeforeDrag=this.props.isVideoPlaying,this._isVideoPlayingBeforeDrag&&this.handlePause()},this._handleVolumeValueChange=e=>{const t=parseFloat(e.target.value);this.props.onVolumeValueChange(t),this.setState({volume:t})},this._handleMute=()=>{this.props.onMutedValueChange(!0),this.setState({muted:!0})},this._handleUnmute=()=>{this.props.onMutedValueChange(!1),this.setState({muted:!1})},this._stopEventPropagation=e=>{e.stopPropagation()},this._renderTooltip=()=>{const e=this.state.mouseOverProgressRatio;if(void 0===e)return(0,v.jsx)("div",{className:g.default.tooltipWrapper});const t=o.default.durationStr(e*this.props.duration);return(0,v.jsx)("div",{className:g.default.tooltipWrapper,style:{left:100*e+"%"},children:(0,v.jsx)("div",{className:(0,n.default)(g.default.tooltipTextBoxGeneral,g.default.tooltipTextBoxPosAndSize),children:t})})},this._renderVolume=()=>{const e=this.state.muted||0===this.state.volume,t=(0,v.jsx)(p.default,{"aria-label":e?f.default.t(19):f.default.t(15),name:y(this.state.volume,e),display:"inline",onClick:()=>{e?this._handleUnmute():this._handleMute(),0===this.props.volume&&this.props.onVolumeValueChange(.25)}}),s={width:100*this.state.volume+"%"},a=this.state.isMouseOverVolumeControl&&!this.state.muted,i=(0,v.jsxs)("div",{className:(0,n.default)(g.default.volumeBarContainer,{[g.default.visible]:a}),children:[(0,v.jsx)("div",{className:(0,n.default)(g.default.volumeLowerTrack,{[g.default.lowerTrackLongest]:1===this.state.volume,[g.default.firefoxFix]:m.default.isGecko}),style:s}),(0,v.jsx)("input",{className:g.default.volumeBar,dir:"ltr",onChange:this._handleVolumeValueChange,type:"range",min:"0",max:1,step:"any",value:this.state.volume})]});return(0,v.jsxs)("div",{className:(0,n.default)(g.default.volumeContainer),onClick:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverVolumeControl:!0})},onMouseLeave:()=>{this.setState({isMouseOverVolumeControl:!1}),0!==this.props.volume||this.state.muted||this._handleMute()},onMouseDown:this._stopEventPropagation,children:[t,i]})},this._renderFullscreenToggle=()=>{const{onFullscreenToggle:e}=this.props;return null==e?null:(0,v.jsx)("div",{className:(0,n.default)(g.default.fullscreenBtn),children:(0,v.jsx)(h.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:e,isStatic:!0})})},this._renderCloseButton=()=>{const{onClose:e}=this.props;return null==e?null:(0,v.jsx)("div",{className:(0,n.default)(g.default.closeBtn),children:(0,v.jsx)(l.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:e,isStatic:!0})})},this._renderProgress=()=>{let e=this.state.progress/this.props.duration;e>1&&(e=1);const t=100*e+"%";let s=this.state.bufferedTime/this.props.duration;s>1&&(s=1);const a=100*s+"%";return(0,v.jsxs)("div",{className:(0,n.default)(g.default.progressBarContainer),onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverProgressBar:!0})},onMouseLeave:()=>{this.setState({isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0})},onMouseMove:e=>{const t=this.props.isFullscreenMode?C:S,s=e.currentTarget.getBoundingClientRect().left,a=e.pageX,i=e.currentTarget.offsetWidth-2*t;let n=(a-s-t)/i;const r=i*(this.state.progress/this.props.duration),o=Math.abs(a-s-t-r)<=t;n<0?n=o?0:void 0:n>1&&(n=o?1:void 0),this.setState({mouseOverProgressRatio:n})},children:[(0,v.jsx)("input",{"data-testid":"progress",className:g.default.hiddenProgressBar,dir:"ltr",onChange:this._handleProgressChange,onMouseDown:this._handleProgressMouseDown,onMouseUp:this._handleProgressMouseUp,type:"range",min:"0",max:(0,i.default)(this.props.duration,2),step:"any",value:this.state.progress}),(0,v.jsxs)("div",{className:g.default.displayedProgressBar,children:[(0,v.jsx)("div",{className:(0,n.default)(g.default.progressItem,g.default.displayedTrack)}),(0,v.jsx)("div",{className:(0,n.default)(g.default.progressItem,g.default.displayedBuffer,{[g.default.lowerTrackLongest]:1===s}),style:{width:a}}),(0,v.jsx)("div",{className:(0,n.default)(g.default.progressItem,g.default.displayedProgress,{[g.default.lowerTrackLongest]:1===e}),style:{width:t}}),(0,v.jsx)("div",{className:(0,n.default)(g.default.thumb,{[g.default.hideThumb]:!this.state.isMouseOverProgressBar}),style:{left:t}}),this._renderTooltip()]})]})},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.props.ctwaSourceUrl&&(0,c.openExternalLink)(this.props.ctwaSourceUrl)},this.state={progress:this.props.progress,volume:this.props.volume,muted:this.props.muted,bufferedTime:this.props.bufferedTime,isMouseOverVolumeControl:!1,isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0,isDraggingProgress:!1,prevPropProgress:this.props.progress,prevPropVolume:this.props.volume,prevPropMuted:this.props.muted,prevPropBufferedTime:this.props.bufferedTime}}componentDidMount(){0!==this.props.volume||this.props.muted||this._handleMute()}static getDerivedStateFromProps(e,t){const s={};return t.prevPropProgress===e.progress||t.isDraggingProgress||(s.progress=e.progress,s.prevPropProgress=e.progress),t.prevPropVolume!==e.volume&&(s.volume=e.volume,s.prevPropVolume=e.volume),t.prevPropMuted!==e.muted&&(s.muted=e.muted,s.prevPropMuted=e.muted),t.prevPropBufferedTime!==e.bufferedTime&&(s.bufferedTime=e.bufferedTime,s.prevPropBufferedTime=e.bufferedTime),s}_renderCtwaSourceIcon(){if(!(this.state.isMouseOverVolumeControl&&!this.state.muted)&&this.props.ctwaSourceUrl){const e=_.default.withoutWww(_.default.hostname(this.props.ctwaSourceUrl));return(0,v.jsx)(u.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:this.handleCtwaSourceButtonClick,isInstagram:e===d.default.HOSTNAME.INSTAGRAM})}return null}render(){const e=this.props.isFullscreenMode,t=e?(0,v.jsx)("div",{className:(0,n.default)(g.default.timeText,g.default.currentTime),onClick:this._stopEventPropagation,children:o.default.durationStr(this.state.progress)}):null,s=e?(0,v.jsx)("div",{className:(0,n.default)(g.default.timeText,g.default.duration),onClick:this._stopEventPropagation,children:o.default.durationStr(this.props.duration)}):null,a=this.props.className?this.props.className:g.default.controls,i=this.props.newPiPStyle&&Math.ceil(this.state.progress)>=this.props.duration,r=i?"refresh":"video-play",l=i?f.default.t(18):f.default.t(17);return(0,v.jsxs)("div",{className:(0,n.default)(a,{[g.default.fullscreen]:e,[g.default.pipContainer]:this.props.newPiPStyle}),children:[(0,v.jsx)("div",{className:g.default.playpauseBtnContainer,onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseUp:this._stopEventPropagation,children:(0,v.jsx)(p.default,{"aria-label":this.props.isVideoPlaying?f.default.t(16):l,name:this.props.isVideoPlaying?"video-pause":r,display:"inline",onClick:this.props.isVideoPlaying?this.handlePause:this._handlePlay})}),this._renderProgress(),this._renderVolume(),t,s,this._renderFullscreenToggle(),this._renderCloseButton(),this._renderCtwaSourceIcon()]})}}t.default=E,E.displayName="VideoControls"},96157:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{refVideo:t}=e;if(!e.refVideo)return null;const s=e.videoMetadata;if(!s)return null;return(0,n.jsx)(i.default,{duration:s.duration,progress:s.currentTime,volume:s.volume,muted:s.muted,bufferedTime:s.bufferedTime,onPlay:()=>{null==t||t.play()},onPause:()=>{null==t||t.pause()},onProgressChange:e.handleSetCurrentTimeByControls?e.handleSetCurrentTimeByControls:e=>{null==t||t.setCurrentTime(e)},onVolumeValueChange:e=>{null==t||t.setVolume(e)},onMutedValueChange:e=>{null==t||t.setMuted(e)},isVideoPlaying:e.isVideoPlaying,isFullscreenMode:e.isFullscreenMode,className:e.controlsClassName,ctwaSourceUrl:e.ctwaSourceUrl,newPiPStyle:e.newPiPStyle,onFullscreenToggle:e.onFullscreenToggle,onClose:e.onClose})};var i=a(s(71951)),n=s(85893)},25275:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(18446)),r=a(s(23279)),o=a(s(94184)),l=s(67294),d=a(s(81408)),u=a(s(58134)),c=a(s(10011)),h=a(s(12950)),f=a(s(71681)),p=a(s(56329)),m=s(3069),_=a(s(35371)),g=a(s(82669)),v=a(s(96157)),S=a(s(37326)),C=a(s(75369)),y=s(85893);class E extends l.Component{constructor(e){super(e),this._newStyleActive=h.default.supportsFeature(h.default.F.PIP_VIDEO_REDESIGN),this.setRefContainer=e=>{this.refContainer=e},this.setRefVideo=e=>{var t,s;(this.refVideo=e,null!=e)&&(null===(t=(s=this.props).onRefSet)||void 0===t||t.call(s,e))},this.resetMouseMoveRecently=(0,r.default)((()=>{this.setState({mouseMoveRecently:!1})}),m.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT),this.mouseDownCoor=null,this.handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded();const e=this.refVideo;e&&!h.default.supportsFeature(h.default.F.PIP_VIDEO_REDESIGN)&&(e.play(),e.pause()),this.setState({isVideoPlaying:!1})},this.handleError=()=>{this.props.onError&&this.props.onError()},this.handlePause=()=>{const e=this.refVideo?this.refVideo.getCurrentTime():null;let t=null;this.state.videoMetadata&&null!=e&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!1,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handlePlaying=()=>{const e=this.refVideo?this.refVideo.getCurrentTime():null;let t=null;this.state.videoMetadata&&null!=e&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!0,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handleLoadedMetadata=e=>{const t=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:t,volume:e.volume,muted:e.muted,bufferedTime:0}})},this.handleVolumeChange=e=>{let t=null;this.state.videoMetadata&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this.handleTimeUpdate=e=>{if(this.blockTimeUpdateOnce)return void(this.blockTimeUpdateOnce=!1);let t=null;this.state.videoMetadata&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({videoMetadata:t})},this.handleFullScreenToggle=e=>{e.stopPropagation(),this.state.isFullscreenMode?u.default.exitFullscreen():u.default.requestFullscreen(this.refContainer)},this.handleSetCurrentTimeByControls=e=>{if(this.refVideo){let t=e;this.state.videoMetadata&&e>=this.state.videoMetadata.duration-1&&this.state.videoMetadata.duration>1&&(t=this.state.videoMetadata.duration-1),this.refVideo.setCurrentTime(t)}},this.handleProgress=e=>{const t=e[0][1];let s=null;this.state.videoMetadata&&(s=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{bufferedTime:t})),this.setState({videoMetadata:s})},this.state={videoMetadata:void 0,isVideoPlaying:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:!1,exposeIframeInPiP:!1}}componentDidMount(){var e,t;this.props.listeners.add(u.default,"fullscreen_change",(()=>{u.default.isFullscreenMode&&u.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):u.default.isFullscreenMode||this.setState({isFullscreenMode:!1})})),null===(e=(t=this.props).onSetFullscreenToggleCallback)||void 0===e||e.call(t,this.handleFullScreenToggle)}componentWillUnmount(){this.resetMouseMoveRecently.cancel()}componentDidUpdate(e,t){var s,a;t.isVideoPlaying===this.state.isVideoPlaying&&(0,n.default)(t.videoMetadata,this.state.videoMetadata)||(null===(s=(a=this.props).onVideoMetadataChange)||void 0===s||s.call(a,this.state.videoMetadata,this.state.isVideoPlaying))}renderVideoControls(){let e=null;const t=this.state.videoMetadata;if(t){const s=(0,o.default)(S.default.strippedVideoControls,S.default.opacityTransition,{[S.default.dimmed]:!this.state.mouseMoveRecently});e=(0,y.jsx)(v.default,{refVideo:this.refVideo,videoMetadata:t,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,handleSetCurrentTimeByControls:this.handleSetCurrentTimeByControls,controlsClassName:this.state.isFullscreenMode?s:void 0,onFullscreenToggle:this._newStyleActive?this.handleFullScreenToggle:void 0,onClose:this._newStyleActive?this.props.onClose:void 0,newPiPStyle:this._newStyleActive}),this.state.isFullscreenMode||(e=(0,y.jsx)("div",{className:S.default.videoControlsWrapper,onMouseDown:e=>{this.mouseDownCoor={x:e.clientX,y:e.clientY}},onMouseUp:e=>{const t=e.clientX,s=e.clientY,a=this.mouseDownCoor?this.mouseDownCoor.x:void 0,i=this.mouseDownCoor?this.mouseDownCoor.y:void 0;null!=a&&null!=i&&Math.abs(t-a)+Math.abs(s-i)<4&&this.setState({exposeIframeInPiP:!0})},children:e}))}return e}render(){const e=this.props.exposeIframeInPiP||this.state.exposeIframeInPiP||this.state.isFullscreenMode?null:(0,y.jsx)("div",{className:S.default.blockYoutube}),t=(0,y.jsxs)("div",{className:(0,o.default)(S.default.youtubeContainer,{[S.default.fullscreen]:this.state.isFullscreenMode}),children:[e,(0,y.jsx)(C.default,{ref:this.setRefVideo,youtubeVideoId:this.props.youtubeVideoId,startTime:this.props.startTime,onEnded:this.handleEnded,onError:this.handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this.handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this.handleVolumeChange,autoPlay:this.props.autoPlay})]}),s=!this.props.disablePiPControls||this.state.isFullscreenMode?this.renderVideoControls():null;let a;_.default.isSafari||(a=(0,y.jsx)(c.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullScreenToggle}));const i=(0,y.jsx)(p.default,{theme:"full-rounded"}),n=this.state.isFullscreenMode?(0,y.jsxs)(y.Fragment,{children:[t,s,this._newStyleActive?null:(0,y.jsxs)("div",{className:(0,o.default)(S.default.widgetsWrapper,S.default.opacityTransition,{[S.default.dimmed]:!this.state.mouseMoveRecently}),children:[a,(0,y.jsx)(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}})]})]}):(0,y.jsxs)(y.Fragment,{children:[t,(0,y.jsx)(g.default,{transitionName:"fade-fast",children:this.state.isMouseOver&&this.state.mouseMoveRecently&&!this.state.exposeIframeInPiP&&!this.props.disablePiPControls?(0,y.jsxs)(y.Fragment,{children:[i,s,a,(0,y.jsx)(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}})]}):null})]});return(0,y.jsx)("div",{ref:this.setRefContainer,className:(0,o.default)(S.default.container,{[S.default.fullscreen]:this.state.isFullscreenMode,[S.default.redesign]:this._newStyleActive}),onMouseEnter:()=>{if(this.state.exposeIframeInPiP){if(_.default.isGecko&&this.state.isMouseOver)return;this.setState({exposeIframeInPiP:!1})}this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this.resetMouseMoveRecently()},children:n},"elementsWrapped")}}E.displayName="YoutubeVideoPlayer";var b=(0,f.default)(E);t.default=b},75369:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(82492)),r=a(s(23279)),o=s(67294),l=a(s(91952)),d=a(s(55454)),u=s(86723),c=a(s(12950)),h=a(s(71681)),f=a(s(60669)),p=s(85893);const m=(0,r.default)((e=>{(0,u.setVideoVolumeSetting)(e)}),500),_=(0,r.default)((e=>{(0,u.setVideoMutedSetting)(e)}),500),g=1,v={width:"100%",height:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,controls:0,playsinline:1,rel:0,modestbranding:0,autoplay:0}};class S extends o.PureComponent{constructor(...e){super(...e),this.updateInterval=null,this.player=void 0,this.currentTime=0,this.videoLoadedFraction=0,this.getPlayerState=()=>this.player?this.player.getPlayerState():void 0,this.setStartTime=()=>{this.player&&"number"==typeof this.props.startTime&&this.player.seekTo(this.props.startTime,!0)},this.onOtherPlaying=e=>{e!==this&&this.player&&this.player.pauseVideo()},this.onReady=e=>{this.player=e.target;const t=this.player,s=(0,u.getVideoVolumeSettings)();let a,i;s&&("number"==typeof s.volume&&(a=s.volume),"boolean"==typeof s.muted&&(i=s.muted));const n=t.getDuration(),r=null!=a?a:.01*t.getVolume(),o=null!=i?i:t.isMuted(),l=t.getIframe().getBoundingClientRect(),d=l.width,c=l.height;this.videoTagMetadata={duration:n,volume:r,muted:o,videoWidth:d,videoHeight:c},this.props.onLoadedMetadata(this.videoTagMetadata),this.currentTime=t.getCurrentTime(),this.updateInterval=setInterval(this.update,250),null!=this.props.startTime&&this.setStartTime(),null!=a&&this.setVolume(a),null!=i&&this.setMuted(i)},this.update=()=>{const e=this.player;if(e){const t=e.getCurrentTime();t!==this.currentTime&&(this.currentTime=t,this.props.onTimeUpdate(t));const s=e.getVideoLoadedFraction();if(s!==this.videoLoadedFraction){this.videoLoadedFraction=s;const e=this.videoTagMetadata?this.videoTagMetadata.duration*s:0;this.props.onProgress([[0,e]])}const a=this.videoTagMetadata;if(a){const t=.01*e.getVolume(),s=e.isMuted();t===a.volume&&s===a.muted||(this.videoTagMetadata=(0,i.default)((0,i.default)({},a),{},{volume:t,muted:s}),this.props.onVolumeChange({volume:t,muted:s}))}}},this.onPlay=()=>{l.default.mediaPlaying(this),this.props.onPlaying()},this.onPause=()=>{this.props.onPause()},this.onEnd=()=>{this.props.onEnded();const e=this.player;e&&!c.default.supportsFeature(c.default.F.PIP_VIDEO_REDESIGN)&&(e.playVideo(),e.pauseVideo())},this.onError=()=>{this.props.onError()},this.onStateChange=e=>{e.target.getPlayerState()!==g&&this.props.onPause()},this.play=()=>{this.player&&this.player.playVideo()},this.pause=()=>{this.player&&this.player.pauseVideo()},this.getPaused=()=>!this.player||this.getPlayerState()!==g,this.getCurrentTime=()=>this.player?this.player.getCurrentTime():0,this.setCurrentTime=e=>{this.player&&this.player.seekTo(e,!0)},this.getDuration=()=>this.player?this.player.getDuration():0,this.getVolume=()=>this.player?.01*this.player.getVolume():0,this.setVolume=e=>{this.player&&(this.player.setVolume(100*e),m(e))},this.getMuted=()=>!!this.player&&this.player.isMuted(),this.setMuted=e=>{const t=this.player;t&&(e?t.mute():t.unMute(),_(e))}}componentDidMount(){this.props.listeners.add(l.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(l.default,"pttRecording",this.pause)}componentWillUnmount(){this.updateInterval&&clearInterval(this.updateInterval)}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){const e=(0,n.default)({},v,{playerVars:{autoplay:this.props.autoPlay?1:0,widget_referrer:d.default.WHATSAPP_ORIGIN,origin:window.location.origin}});return(0,p.jsx)(f.default,{videoId:this.props.youtubeVideoId,opts:e,onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.onEnd,onError:this.onError,onStateChange:this.onStateChange})}}S.displayName="YoutubeVideoTag";const C=(0,h.default)(S);t.default=class extends C{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},62602:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({productId:e,businessOwnerJid:t,msgT:s}){const a=(0,n.createWid)(t);if(!a)return;const r=i.default.get(a);if(!r)return;const o=r.productCollection.get(e),l=r.msgProductCollection.get(e);if(l&&o){const e=null!=s?s:l.t;return o.t>=e?(r.msgProductCollection.remove(l),o):l}return o||l};var i=a(s(60028)),n=s(89573)},30333:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logBusinessProfileCatalogView=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)((0,i.default)({},(0,l.toDataForCatalogViewEvents)(t)),{},{isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CARD_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CARD_IMPRESSION})).commit()},t.logChatCatalogView=function({catalogOwnerWid:e,catalogContext:t}){new o.default.CatalogView((0,i.default)({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CHAT_CATALOG_ICON_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logProfileProductClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CARD_ITEM_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CARD_ITEM_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logCarouselViewMoreClick=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CARD_MORE_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_CARD_MORE_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogListView=function({catalogOwnerWid:e,catalogContext:t,cartToggle:s}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_LIST_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_LIST_IMPRESSION,cartToggle:s},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogShareLinkClick=function({catalogOwnerWid:e,catalogContext:t}){const s=(0,d.isCatalogOwner)({catalogOwnerWid:e});(0,d.createCatalogViewEvent)((0,i.default)({isOwner:s,catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogListDetailClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_LIST_ITEM_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_LIST_ITEM_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logDetailImageClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMAGE_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logDetailLinkClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logImageCarouselModalView=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogSessionId:t}).commit()},t.logImageListClick=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_CLICK,catalogSessionId:t}).commit()},t.logFullImageView=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogSessionId:t}).commit()},t.logImageNavigate=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogSessionId:t}).commit()},t.logProductDetailView=function({product:e,catalogContext:t,cartToggle:s,collectionId:a}){const r=a?(0,n.getProductStatsInFetched)(e.catalogWid.toString(),a,e):void 0,u=null==r?void 0:r.productIndex,c=null==r?void 0:r.collectionIndex;(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMPRESSION,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMPRESSION,cartToggle:s,productIndex:u,collectionIndex:c},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logReportProduct=function({product:e,catalogSessionId:t}){new o.default.CatalogView({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT,catalogSessionId:t}).commit()},t.logReportProductSuccess=function({product:e,catalogSessionId:t}){new o.default.CatalogView({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_SUCCESS,catalogSessionId:t}).commit()},t.logReportProductFailure=function({product:e,catalogSessionId:t}){new o.default.CatalogView({catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_FAILURE,catalogSessionId:t}).commit()},t.logProductInquiryClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logProductMsgClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logProductDeepLinkOpen=function({catalogOwnerJid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logProductMessageBusinessClick=function(e,t){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logProductMessageBusinessSend=function(e,t){let s=!1;if(null!=e.businessOwnerJid){const t=e.businessOwnerJid;s=(0,r.getMeUser)().equals((0,c.createWid)(t))}(0,d.createCatalogViewEvent)({isOwner:s,catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogSessionId:t||(new u.default).toString()}).commit()},t.logShareProductCopyLinkClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,productId:e.id.toString()},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logShareProductViaWALinkClick=function({product:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,productId:e.id.toString()},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logCatalogAttachmentButtonClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CATALOG_IN_CONVERSATION_CLICK,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ATTACHMENT_PANEL,catalogSessionId:e}).commit()},t.logProductMessageSent=function({product:e,catalogSessionId:t}){(0,d.createCatalogViewEvent)({isOwner:(0,d.isCatalogOwner)({product:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logSendCatalogClick=function({catalogOwnerWid:e,catalogSessionId:t}){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SEND_CATALOG_CLICK,catalogSessionId:t}).commit()},t.logShareCatalogCopyLinkClick=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logShareCatalogViaWALinkClick=function({catalogOwnerWid:e,catalogContext:t}){(0,d.createCatalogViewEvent)((0,i.default)({isOwner:(0,d.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogViewAction:o.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK},(0,l.toDataForCatalogViewEvents)(t))).commit()},t.logAddProductClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_CLICKED,catalogSessionId:e.session.toString(),catalogEntryPoint:e.entryPoint}).commit()},t.logAddProductSuccess=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_SUCCESS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logAddProductFailed=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_FAILED,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logEditProductClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_CLICKED,productId:e.id.toString(),catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString()}).commit()},t.logEditProductSuccess=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_SUCCESS,catalogEntryPoint:t.entryPoint,productId:e.id.toString(),catalogSessionId:t.session.toString()}).commit()},t.logEditProductFailed=function(e,t,s){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_FAILED,catalogEntryPoint:t.entryPoint,productId:e.id.toString(),errorCode:s,catalogSessionId:t.session.toString()}).commit()},t.logDeleteProductClick=function(e,t,s){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_CLICKED,catalogEntryPoint:s.entryPoint,productId:e.id.toString(),productCount:t,catalogSessionId:s.session.toString()}).commit()},t.logDeleteProductSuccess=function(e,t,s){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_SUCCESS,catalogEntryPoint:s.entryPoint,productId:e.id.toString(),productCount:t,catalogSessionId:s.session.toString()}).commit()},t.logDeleteProductFailed=function(e,t,s,a){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_FAILED,catalogEntryPoint:s.entryPoint,productId:e.id.toString(),productCount:t,errorCode:a,catalogSessionId:s.session.toString()}).commit()},t.logCreateProductCatalogClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCreateProductCatalogSuccess=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_SUCCESS,catalogEntryPoint:e.entryPoint,catalogSessionId:e.session.toString()}).commit()},t.logCreateProductCatalogFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_FAILED,catalogEntryPoint:e.entryPoint,errorCode:t,catalogSessionId:e.session.toString()}).commit()},t.logAppealProductCatalogClick=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_CLICKED,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogSuccess=function(e){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_SUCCESS,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_FAILED,catalogEntryPoint:o.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logCatalogContextMenuClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_MENU_CLICK,catalogEntryPoint:null==t?void 0:t.entryPoint,catalogSessionId:null==t?void 0:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideSuccess=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_SUCCESS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideCancelled=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CANCELLED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductHideFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_FAILED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowClick=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CLICKED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowSuccess=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_SUCCESS,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowCancelled=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CANCELLED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()},t.logCatalogProductShowFailed=function(e,t){new o.default.CatalogBiz({catalogBizAction:o.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_FAILED,catalogEntryPoint:t.entryPoint,catalogSessionId:t.session.toString(),productId:e}).commit()};var i=a(s(81109)),n=s(46215),r=s(86723),o=a(s(4231)),l=s(70790),d=s(28),u=a(s(90277)),c=s(89573)},70790:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildProductCatalogContext=r,t.buildProductCatalogAccidentalContext=o,t.getProductCatalogSessionId=function(e){return l(e).session.toString()},t.getProductCatalogContext=l,t.toDataForCatalogViewEvents=function(e){return{catalogSessionId:e.session.toString(),bizPlatform:e.bizPlatform,catalogEntryPoint:e.entryPoint}};var i=a(s(4231)),n=a(s(90277));function r(e=new n.default,t=i.default.BIZ_PLATFORM.UNKNOWN,s){return{type:"product_catalog",session:e,entryPoint:s,bizPlatform:t}}function o(){return r(new n.default(!0))}function l(e){return"product_catalog"===e.type?e:o()}},28:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogViewEvent=t.isCatalogOwner=void 0;var i=a(s(81109)),n=a(s(6479)),r=s(86723),o=a(s(4231)),l=a(s(69635)),d=s(89573);t.isCatalogOwner=e=>{const t=(0,r.getMeUser)();let s;return e.catalogOwnerJid?s=(0,d.createWid)(e.catalogOwnerJid):e.catalogOwnerWid?s=e.catalogOwnerWid:e.product&&(s=e.product.catalogWid),l.default.equals(t,s)};t.createCatalogViewEvent=e=>{const{isOwner:t,catalogBizAction:s,catalogViewAction:a,bizActionConfig:r,bizPlatform:l}=e,d=(0,n.default)(e,["isOwner","catalogBizAction","catalogViewAction","bizActionConfig","bizPlatform"]);return t?new o.default.CatalogBiz((0,i.default)((0,i.default)({catalogBizAction:s},d),r)):new o.default.CatalogView((0,i.default)({catalogViewAction:a,bizPlatform:l},d))}},34290:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=s(80423),r=a(s(35832)),o=a(s(27792)),l=a(s(21615)),d=a(s(91749)),u=a(s(79864)),c=a(s(47452)),h=a(s(85051)),f=a(s(40854)),p=a(s(47193)),m=s(86723),_=a(s(39e3)),g=a(s(2408)),v=a(s(71681)),S=s(30333),C=s(70790),y=a(s(23398)),E=s(26491),b=a(s(22986)),T=s(60952),M=a(s(84241)),x=s(14654),I=a(s(79485)),P=s(15298),A=a(s(40858)),N=a(s(2966)),O=a(s(63477)),w=a(s(68062)),D=s(85893);class j extends i.Component{constructor(...e){super(...e),this.state={active:!1,contextMenu:null,focused:!1},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),f.default.shouldIndicateFocus(),this.props.onClick()},this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.mouseOver(),this.setState({focused:!0})},this.onBlur=()=>{var e;null===(e=this._cellRef)||void 0===e||e.mouseLeave(),this.setState({focused:!1})},this.handleActiveChange=e=>{this.setState({active:!!e})},this.handleAddToCart=e=>{const{product:t,collectionId:s}=this.props,a=(0,C.getProductCatalogContext)(this.context);a.session.isAccidental()||((0,r.default)(t,a,s),e.preventDefault(),e.stopPropagation())},this.handleProductHideShow=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductHideShow&&this.props.onProductHideShow(this.props.product)},this.handleDeleteProduct=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductDelete&&this.props.onProductDelete(this.props.product)},this.removeContext=()=>{this.setState({contextMenu:null}),p.default.focus(this._hotKeysRef)},this.buildContextMenu=()=>{var e;const t=[],{product:s,onProductShare:a,onCartOpen:i}=this.props;null!=a&&s.reviewStatus===E.PRODUCT_REVIEW_STATUS.APPROVED&&!1===s.isHidden&&t.push((0,D.jsx)(c.default,{a8n:"mi-share-label",action:e=>{e.stopPropagation(),a((0,P.unproxy)(s))},children:g.default.t(538)},"ShareLabel"));const n=null===(e=(0,m.getMaybeMeUser)())||void 0===e?void 0:e.equals(s.catalogWid);return n&&this.props.onProductHideShow&&(s.isHidden?t.push((0,D.jsx)(c.default,{a8n:"mi-show-label",action:this.handleProductHideShow,children:g.default.t(539)},"ShowLabel")):t.push((0,D.jsx)(c.default,{a8n:"mi-hide-label",action:this.handleProductHideShow,children:g.default.t(537)},"HideLabel"))),s.isHidden||s.reviewStatus!==E.PRODUCT_REVIEW_STATUS.APPROVED||null==i||t.push((0,D.jsx)(c.default,{a8n:"mi-addcart-label",action:this.handleAddToCart,children:g.default.t(535)},"AddToCartLabel")),n&&this.props.onProductDelete&&t.push((0,D.jsx)(c.default,{a8n:"mi-edit-label",action:this.handleDeleteProduct,children:g.default.t(536)},"DeleteLabel")),t},this.handleContext=e=>{if(this.state.contextMenu)return void this.setState({contextMenu:null});const{product:t}=this.props,s=this.buildContextMenu(),a=(0,C.getProductCatalogContext)(this.context);(0,S.logCatalogContextMenuClick)(t.id.toString(),a.session.isAccidental()?void 0:a),this.setState({contextMenu:{menu:s,event:e.event,anchor:e.anchor}})}}componentDidMount(){const{active:e,listeners:t,product:s}=this.props;e&&t.add(e,s.id.toString(),this.handleActiveChange)}_getShareIcon(){const{product:e,onProductShare:t}=this.props;return null!=t&&e.reviewStatus===E.PRODUCT_REVIEW_STATUS.APPROVED?(0,D.jsx)(A.default,{"aria-label":"",className:y.default.shareButton,onClick:s=>{s.stopPropagation(),t((0,P.unproxy)(e))},name:"link"}):null}_getAddToCartIcon(){const{onCartOpen:e,product:t}=this.props;return null!=e&&t.reviewStatus===E.PRODUCT_REVIEW_STATUS.APPROVED?(0,D.jsx)(o.default,{onClick:this.handleAddToCart}):null}_renderDetail(){return this.props.canManageCatalog?null:(0,D.jsxs)("div",{className:y.default.detailContainer,children:[this._getShareIcon(),this._getAddToCartIcon()]})}render(){var e;const{product:t,onClick:s,checkbox:a,isMuted:i,disableOutOfStockAppearance:r,theme:o}=this.props,u=null===(e=t.getPreviewImage())||void 0===e?void 0:e.mediaData,c=o||(r||t.availability!==x.ProductAvailability.OUT_OF_STOCK?"product":"product-out-of-stock");let f,m,v;switch(t.reviewStatus){case E.PRODUCT_REVIEW_STATUS.NO_REVIEW:case E.PRODUCT_REVIEW_STATUS.OUTDATED:case E.PRODUCT_REVIEW_STATUS.PENDING:f=(0,D.jsx)(l.default,{theme:"pending",svg:"business-hours"});break;case E.PRODUCT_REVIEW_STATUS.REJECTED:f=(0,D.jsx)(l.default,{theme:"warning",svg:"error"})}t.isHidden&&(m=(0,D.jsx)(N.default,{name:"hide"}),v=(0,D.jsx)(n.InvisibleLabel,{children:g.default.t(35)}));const S=u?(0,D.jsx)(M.default,{theme:"list",mediaData:u,badge:f,overlayContent:m}):null,C=(0,D.jsx)(h.default,{text:t.name,ellipsify:!0,titlify:!0}),I=(0,T.isEmptyPrice)(t)?null:(0,D.jsx)(b.default,{product:t,showAvailabilityNotice:!0}),P=I||t.description&&t.description.length>0?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:y.default.description,children:(0,D.jsx)(h.default,{text:t.description,ellipsify:!0})}),(0,D.jsx)("div",{className:y.default.price,children:I}),v]}):null;let A;return this.state.contextMenu&&(A=(0,D.jsx)(O.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.removeContext,children:(0,D.jsx)(w.default,{contextMenu:this.state.contextMenu})})),(0,D.jsxs)(_.default,{onRef:this._setHotKeysRef,handlers:{space:this.onKeyboardActivation,right:()=>{var e;p.default.focus(null===(e=this._cellRef)||void 0===e?void 0:e.getContextMenuRef())}},onFocus:this.indicateFocus,onBlur:this.onBlur,tabIndex:0,role:"button",children:[(0,D.jsx)(d.default,{a8n:"product-catalog-item",customImage:!0,image:S,primary:C,onClick:s,secondary:P,theme:c,active:this.state.focused||!!this.state.contextMenu,checkbox:a,idle:i,detail:this._renderDetail(),className:y.default.catalogListItem,contextEnabled:()=>!0===this.props.canManageCatalog,onContext:this.handleContext,ref:this._setCellRef,contextMenuControlled:!0},t.id.toString()),A]})}}j.contextType=u.default,j.CONCERNS={product:["id","name","description","availability","url","retailerId","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","reviewStatus","catalogWid","productImageCollection","imageHash","imageCdnUrl","isHidden"]},j.defaultProps={checkbox:!1,isMuted:!1,disableOutOfStockAppearance:!1},j.displayName="ProductCatalogListItem";var R=(0,v.default)((0,I.default)(j,j.CONCERNS));t.default=R},90277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ACCIDENTAL_SESSION=void 0;const s="accidental_session";t.ACCIDENTAL_SESSION=s;t.default=class{constructor(e){this.accidental=e||!1,this.initSessionId()}isAccidental(){return this.accidental}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}toString(){let e=`${this.sessionId}`;return this.accidental&&(__LOG__(4,void 0,new Error)`Session ID requested without being set, returning a randon accidental session. Please investigate.`,e=`accidental_session_${e}`),e}}},92915:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(71681)),o=s(30333),l=a(s(87949)),d=a(s(17181)),u=a(s(84241)),c=s(15298),h=a(s(45285)),f=a(s(82669)),p=s(85893);class m extends i.Component{constructor(e){super(e),this.handleKeyDown=e=>{37===e.keyCode?this.handlePrev(e):39===e.keyCode&&this.handleNext(e)},this.handleNext=e=>{if(e&&e.stopPropagation(),this.state.imgZoomed)return;const{productImageCollection:t}=this.props,s=t.length,a=this.state.activeImgIndex;this.handleSelectThumb((a+1)%s)},this.handlePrev=e=>{if(e&&e.stopPropagation(),this.state.imgZoomed)return;const{productImageCollection:t}=this.props,s=t.length,a=this.state.activeImgIndex,i=a-1<0?s-1:(a-1)%s;this.handleSelectThumb(i)},this.handleImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{n.default.closeModalMedia()},this.willEndFlow=()=>{this._refThumbsContainer&&(0,h.default)(this._refThumbsContainer,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.handleSelectThumb=e=>{if(e!==this.state.activeImgIndex){const{product:e,sessionId:t}=this.props;(0,o.logImageNavigate)({product:(0,c.unproxy)(e),catalogSessionId:t}),(0,o.logImageListClick)({product:(0,c.unproxy)(e),catalogSessionId:t})}this.setState({activeImgIndex:e})},this.scrollToActive=(e=!1)=>{var t,s;const a=this._refThumbsContainer,i=null===(t=this._refScrollContainer)||void 0===t?void 0:t.firstChild,n=null===(s=this._refActiveThumb)||void 0===s?void 0:s.getImageContainerElement();if(!a||!i||!n)return;let r=0;n instanceof HTMLElement&&(r=n.clientWidth/2-a.clientWidth/2),(0,h.default)(n,"stop");let o=0;e&&(o=300),(0,h.default)(n,"scroll",{duration:o,container:i,offset:r,axis:"x",easing:[.1,.82,.25,1]})},this._setRefActiveThumb=e=>this._refActiveThumb=e,this._setRefThumbsContainer=e=>this._refThumbsContainer=e,this._setRefScrollContainer=e=>{this._refScrollContainer=e},this.getThumbs=()=>{const{productImageCollection:e}=this.props,t=e.toArray().map(((e,t)=>{const s=t===this.state.activeImgIndex;return(0,p.jsx)(u.default,{theme:"viewerFlow",active:s,ref:s?this._setRefActiveThumb:null,mediaData:e.mediaData,onClick:this.handleSelectThumb.bind(this,t)},`product-image-${t}`)}));return[(0,p.jsx)("div",{className:l.default.thumbPadding},"padding-left"),t,(0,p.jsx)("div",{className:l.default.thumbPadding},"padding-right")]},this.zoomIn=!0;const{activeProductImage:t,productImageCollection:s}=this.props;this.state={activeImgIndex:s.toArray().indexOf(t),imgZoomed:!1}}componentDidMount(){this.zoomIn=!1,this.props.listeners.add(window,"keydown",this.handleKeyDown),this.scrollToActive(),this._refThumbsContainer&&(0,h.default)(this._refThumbsContainer,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]});const{product:e,sessionId:t}=this.props;(0,o.logFullImageView)({product:(0,c.unproxy)(e),catalogSessionId:t}),(0,o.logImageCarouselModalView)({product:(0,c.unproxy)(e),catalogSessionId:t})}componentDidUpdate(e,t){const{product:s,sessionId:a}=e;t.activeImgIndex!==this.state.activeImgIndex&&(this.scrollToActive(!0),(0,o.logFullImageView)({product:(0,c.unproxy)(s),catalogSessionId:a}))}render(){const e=this.getThumbs(),{product:t,productImageCollection:s}=this.props,a=s.length,i=this.state.activeImgIndex,n=i>0?this.handlePrev:null,r=i+1<a?this.handleNext:null;return(0,p.jsxs)("div",{className:this.state.imgZoomed?"img-zoomed-in":null,children:[(0,p.jsx)("div",{className:l.default.thumbsContainer,ref:this._setRefThumbsContainer,children:(0,p.jsx)("div",{ref:this._setRefScrollContainer,className:l.default.scrollContainer,dir:"ltr",children:(0,p.jsx)(f.default,{className:l.default.viewerThumbs,transitionName:"thumb-scale",children:e})})}),(0,p.jsx)(d.default,{mediaData:s.toArray()[this.state.activeImgIndex].mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:r,onPrev:n,onImgZoomIn:this.handleImgZoomIn,getZoomNode:this.props.getZoomNode,zoomIn:this.zoomIn,product:t,sessionId:this.props.sessionId})]})}}m.displayName="ProductImageViewerFlow";var _=(0,r.default)(m);t.default=_},68976:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,p.default)(e.mediaData,["renderableUrl"]);const t=(0,p.default)(e.product,["name","catalogWid"]),s=n.default.get(t.catalogWid);let a;if(s){const e=(0,m.jsx)(u.default,{contact:s,selectable:!0,useVerifiedName:!0}),n=(0,m.jsx)(r.default,{id:s.id,size:40}),l=(0,m.jsxs)("div",{className:c.default.productName,children:[(0,m.jsx)(h.default,{className:c.default.productNameIcon,name:"business-description",display:"inline"}),(0,m.jsx)(o.default,{text:t.name,titlify:!0,ellipsify:!0})]});a=(0,m.jsx)(i.default,{idle:!0,image:n,primary:e,secondary:l,theme:"media"})}else a=(0,m.jsx)(f.TextSpan,{theme:"large",className:c.default.infoName,children:(0,m.jsx)(o.default,{text:t.name,titlify:!0,ellipsify:!0})});return(0,m.jsxs)("div",{className:c.default.mediaPanelHeader,children:[(0,m.jsx)("div",{className:c.default.info,children:a}),(0,m.jsx)("div",{className:c.default.mediaPanelTools,children:(0,m.jsx)(d.MenuBar,{theme:"strong",children:(0,m.jsx)(d.MenuBarItem,{a8nText:"btn-close",icon:(0,m.jsx)(h.default,{name:"x-viewer"}),title:l.default.t(1923),onClick:e.onClose})},"media-panel-header")})]})};var i=a(s(55092)),n=a(s(17025)),r=a(s(88419)),o=a(s(85051)),l=a(s(2408)),d=s(47941),u=a(s(78972)),c=a(s(30794)),h=a(s(2966)),f=s(97504),p=a(s(76006)),m=s(85893)},17181:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(23493)),r=i(s(94184)),o=i(s(7900)),l=s(67294),d=a(s(93972)),u=i(s(55454)),c=i(s(85051)),h=i(s(49694)),f=i(s(41552)),p=s(90672),m=i(s(68976)),_=i(s(94567)),g=i(s(79485)),v=s(74289),S=i(s(63477)),C=i(s(45285)),y=s(85893);class E extends l.PureComponent{constructor(e){super(e),this.setMediaImage=e=>this.mediaImage=e,this.onImageLoad=e=>{if(this.zoomed)return;this.zoomed=!0;const t=this.state.zoomElement;t&&e&&this.props.zoomIn&&e instanceof HTMLElement&&this.animateZoom(t,e)},this.animateZoom=(e,t)=>{const s=t.getBoundingClientRect(),a=e.getBoundingClientRect();let i=a.top-s.top,n=a.left-s.left;const r=e.clientWidth/t.clientWidth;i-=(t.clientHeight-e.clientHeight)/2,n-=(t.clientWidth-e.clientWidth)/2,(0,C.default)(t,{opacity:[1,0],translateX:[0,n],translateY:[0,i],scale:[1,r]},{duration:u.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]}),this._refCaption.current&&(0,C.default)(this._refCaption.current,{opacity:[1,0]},{duration:u.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.onScroll=e=>{Math.abs(e.deltaY)>7&&this.onClose()},this.onImgZoomIn=e=>{const t=this.mediaImage;e&&t&&(this.listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this.onZoomOut=e=>{const t=this.mediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this.onMouseMove=e=>{this.handleMouseMove(e.pageX,e.pageY)},this._handleMouseMove=(e,t)=>{const s=this.mediaImage;if(!s)return;const a=s.getInsideContainer();if(!(a&&a instanceof HTMLElement))return;const i=s.getOutsideContainer();if(!(i&&i instanceof HTMLElement))return;const{translateX:n,translateY:r}=s.getTranslatePosition(i,e,t);(0,C.default)(a,"stop"),(0,C.default)(a,{translateX:n,translateY:r,scale:u.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})},this.onClose=()=>{var e;if(this.closing)return;if(this.closing=!0,(0,v.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation(),!this.props.getZoomNode)return this.props.onBack();const t=this.props.getZoomNode();if(!t)return this.props.onBack();const s=(0,o.default)(null===(e=this.mediaImage)||void 0===e?void 0:e.getInsideContainer(),"this.mediaImage?.getInsideContainer()"),a=s.getBoundingClientRect(),i=t.getBoundingClientRect();let n=i.top-a.top,r=i.left-a.left;const l=t.clientWidth/s.clientWidth;n-=(s.clientHeight-t.clientHeight)/2,r-=(s.clientWidth-t.clientWidth)/2,(0,C.default)(s,{translateX:[r,0],translateY:[n,0],scale:[l,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}))},this.zoomed=!1,this.closing=!1,this._refCaption=(0,l.createRef)();const t=this.props.mediaData.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED&&this.props.zoomIn&&this.props.getZoomNode?this.props.getZoomNode():null;this.state={imgZoomed:!1,zoomElement:t},this.handleMouseMove=(0,n.default)(this._handleMouseMove)}render(){const{mediaData:e,product:t}=this.props,s=(0,y.jsx)(f.default,{mediaData:e,onLoad:this.onImageLoad,onImgZoomIn:this.onImgZoomIn,ref:this.setMediaImage},e.renderableUrl);let a;if(t.description){const s=this.props.zoomIn&&(e.isGif||e.type===h.default.TYPE.IMAGE);a=(0,y.jsx)("span",{className:{[_.default.captionHidden]:s},ref:this._refCaption,children:(0,y.jsx)(c.default,{text:t.description,className:_.default.mediaCaption})})}const i=(0,r.default)(_.default.media,{[_.default.mediaWithCaption]:!!a}),n=(0,y.jsx)("div",{className:(0,r.default)(_.default.btnMediaNext),children:(0,y.jsx)(d.default,{type:d.ButtonType.Next,onClick:this.props.onNext||(e=>e.stopPropagation()),onKeyDown:this.props.onNext||(()=>{}),disabled:!this.props.onNext||this.state.imgZoomed})}),o=(0,y.jsx)("div",{className:(0,r.default)(_.default.btnMediaPrev),children:(0,y.jsx)(d.default,{type:d.ButtonType.Prev,onClick:this.props.onPrev||(e=>e.stopPropagation()),onKeyDown:this.props.onPrev||(()=>{}),disabled:!this.props.onPrev||this.state.imgZoomed})}),l=(0,r.default)("overlay",_.default.mediaViewer,{[_.default.mediaViewerAnimate]:this.props.zoomIn,[_.default.cursorZoomOut]:this.state.imgZoomed}),u=this.state.imgZoomed?null:this.onScroll,p=this.state.imgZoomed?null:this.onClose,g=this.state.imgZoomed&&this.listenToMouseMove?this.onMouseMove:null,v=this.state.imgZoomed?this.onZoomOut:null;return(0,y.jsx)(S.default,{displayName:"ProductViewer",escapable:!0,requestDismiss:this.onClose,children:(0,y.jsxs)("div",{className:l,"data-animate-media-viewer":!0,onClick:v,onMouseMove:g,children:[(0,y.jsx)(m.default,{mediaData:e,onClose:this.onClose,product:this.props.product}),(0,y.jsxs)("div",{className:_.default.mediaContent,dir:"ltr",onWheel:u,onClick:p,children:[o,(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)("div",{className:_.default.media,children:s}),a]}),n]})]})})}}E.CONCERNS={mediaData:["mediaStage","renderableUrl","isGif","type"],product:["description"]},E.displayName="ProductImageViewerModal";var b=(0,g.default)(E,E.CONCERNS);t.default=b},22986:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{product:t,fallback:s=null,showAvailabilityNotice:a=!1}=e,i=(0,r.default)(e,["product","fallback","showAvailabilityNotice"]);const{currency:p,priceAmount1000:m}=t,_=(0,c.getActivePrice)(t);if(!p||null==m||null==_)return s;const g=e=>o.formatAmount1000(p,e),v=g(_);let S=(0,c.isSalePriceActive)(t)?`~${g(m)}~ ${v}`:v;const C=(e=>e.availability===h.ProductAvailability.OUT_OF_STOCK?d.default.t(1489):null)(t);a&&C&&(S+="  "+C);return(0,f.jsx)(l.default,(0,n.default)((0,n.default)({},i),{},{text:S,formatters:[[[u.Strikethrough,{selectable:i.selectable}]]],ellipsify:!0}))};var n=i(s(81109)),r=i(s(6479)),o=a(s(61447)),l=i(s(85051)),d=i(s(2408)),u=s(63367),c=s(60952),h=s(14654),f=s(85893)},84241:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductThumbPlaceholder=c,t.default=void 0;var i=a(s(94184)),n=s(67294),r=s(90672),o=a(s(18413)),l=a(s(2966)),d=a(s(76006)),u=s(85893);function c({onClick:e,className:t}){return(0,u.jsx)("div",{className:(0,i.default)(t,o.default.mediaCanvas,o.default.placeholder),onClick:e,children:(0,u.jsx)(l.default,{name:"business-description"})})}var h=(0,n.forwardRef)(((e,t)=>{const{theme:s,active:a,onClick:l,badge:h,overlayContent:f,imgRef:p}=e,m=(0,n.useRef)(null),_=(0,n.useRef)(null),g=(0,d.default)(e.mediaData,["mediaStage","mediaBlob","renderableUrl","preview"]);(0,n.useEffect)((()=>(null==p||p(_.current),()=>{null==p||p(null)})),[]);const v=()=>m.current;let S,C;(0,n.useImperativeHandle)(t,(()=>({getImageContainerElement:v}))),g.mediaStage===r.MEDIA_DATA_STAGE.RESOLVED?(S=(0,u.jsx)("div",{className:o.default.mediaCanvas,style:{backgroundImage:`url(${g.renderableUrl})`},onClick:l,ref:_}),null!=f&&(C=(0,u.jsx)("div",{className:o.default.overlay,children:f}))):S=g.mediaStage===r.MEDIA_DATA_STAGE.PREPARING?(0,u.jsx)(c,{className:e.className,onClick:e.onClick}):g.mediaStage===r.MEDIA_DATA_STAGE.ERROR_MISSING?null:(0,u.jsx)("div",{className:o.default.mediaCanvas});const y=(0,i.default)(e.className,{[o.default.canvasSecondRow]:"hideableSecondRow"===s,[o.default.canvasComponent]:"list"!==s,[o.default.canvasComponentLargeGallerySpacing]:"largeGallerySpacing"===s,[o.default.list]:"list"===s,[o.default.viewerFlow]:"viewerFlow"===s,[o.default.active]:!0===a});if(e.large)return(0,u.jsx)("div",{className:o.default.canvasComponentLarge,children:S});const E=(0,u.jsxs)("div",{ref:m,className:y,children:[(0,u.jsx)("div",{className:o.default.canvasBody}),S,C,h]});return"list"===s?(0,u.jsx)("div",{className:o.default.listWrapper,children:E}):E}));t.default=h},65161:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const s=null===(t=e.product.getPreviewImage())||void 0===t?void 0:t.mediaData;if(!s)return null;return(0,d.jsx)(u,(0,i.default)({mediaData:s},e))};var i=a(s(81109)),n=a(s(43016)),r=s(90672),o=a(s(34290)),l=a(s(76006)),d=s(85893);const u=function(e){const{product:t,selections:s,active:a,onClick:i}=e,u=(0,l.default)(e.mediaData,["mediaStage"]).mediaStage!==r.MEDIA_DATA_STAGE.RESOLVED,c=u?()=>{}:i;return(0,d.jsx)(n.default,{model:t,selections:s,disabled:u,children:(0,d.jsx)(o.default,{product:t,onClick:c,active:a,checkbox:!0,disableOutOfStockAppearance:!0,isMuted:u})},t.id.toString())}},64064:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(55454)),o=a(s(17025)),l=a(s(2408)),d=a(s(71681)),u=s(47941),c=a(s(83125)),h=a(s(93474)),f=a(s(2966)),p=s(85893);class m extends i.PureComponent{constructor(){super(...arguments),this._onUnreadChange=()=>{const e=c.default.getUnexpired(!0).some((e=>{const t=this._lastViewerTimestamps[e.id.toString()],s=!t||e.t>t;return!e.contact.statusMute&&e.unreadCount>0&&s}));e!==this.state.hasUnread&&this.setState({hasUnread:e})},this._updateViewerTimestamps=()=>{c.default.getUnexpired(!0).forEach((e=>{this._lastViewerTimestamps[e.id.toString()]=e.t}))},this.onFlowEnd=()=>{this._updateViewerTimestamps(),this.setState({hasUnread:!1})},this._onStatus=e=>{e.preventDefault(),n.default.openModalMedia((0,p.jsx)(h.default,{onFlowEnd:this.onFlowEnd,removeTopDrawer:!1}),{transition:"status-v3-modal"})};const e=c.default.getUnexpired(!0).some((e=>e.unreadCount>0&&!e.contact.statusMute));this.state={hasUnread:e},this._lastViewerTimestamps={}}componentDidMount(){this.props.listeners.add(c.default,"add remove change:unreadCount change:t",this._onUnreadChange),this.props.listeners.add(o.default,r.default.COLLECTION_HAS_SYNCED,this._onUnreadChange)}render(){const e=this.state.hasUnread?(0,p.jsx)(f.default,{name:"status-v3-unread",directional:!0}):(0,p.jsx)(f.default,{name:"status-v3"});return(0,p.jsx)(u.MenuBarItem,{a8nText:"menu-bar-status",icon:e,title:l.default.t(2071),onClick:this._onStatus})}}m.CONCERNS={statusV3:["unreadCount"]},m.displayName="StatusV3MenuBarItem";var _=(0,d.default)(m);t.default=_},83935:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(91952)),r=a(s(97881)),o=(a(s(49694)),a(s(7542))),l=s(85893);class d extends i.Component{constructor(e){super(e),this.state=this.getInitialMediaStyle()}getInitialMediaStyle(){const e=.67;if(this.props.initialStyle)return{initialStyle:this.props.initialStyle,aspectRatio:e};let t;n.default.getConversationHeaderOffset((e=>{t=e}));const s=330*e;t||(t={right:window.innerWidth,bottom:0});return{initialStyle:{width:s,left:t.right<window.innerWidth?t.right-s-10:window.innerWidth-s-10,bottom:window.innerHeight-10-330-t.bottom},aspectRatio:e}}render(){return(0,l.jsx)(o.default,{aspectRatio:.67,margin:{x:10,y:10},minWidth:145,className:r.default.voipFloater,initialStyle:this.state.initialStyle,escapeConversationHeader:!0,children:this.props.children})}}t.default=d,d.displayName="FloatingVoipWindow"},59900:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(95863));class n extends i.default{constructor(){super(),this.openVoipWindow=()=>{this.manager&&this.manager.openVoipWindow()},this.closeVoipWindow=()=>{this.manager&&this.manager.closeVoipWindow()}}register(e){this.manager=e}unregister(){this.manager&&this.manager.closeVoipWindow(),this.manager=null}}var r=new n;t.default=r},21053:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(83935)),r=a(s(12950)),o=a(s(62734)),l=a(s(71681)),d=a(s(82669)),u=a(s(59900)),c=a(s(34999)),h=a(s(45440)),f=s(85893);class p extends i.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.openVoipWindow=()=>{r.default.supportsFeature(r.default.F.WEB_VOIP_VOICE_CALL)&&this.setState({isOpen:!0})},this.closeVoipWindow=()=>{this.setState({isOpen:!1})},this.handleCallAccept=()=>{},this.handleCallReject=()=>{this.setState({isOpen:!1})},this.handleCallEnd=()=>{this.setState({isOpen:!1})}}componentDidMount(){u.default.register(this)}componentWillUnmount(){u.default.unregister()}render(){return this.state.isOpen?(0,f.jsx)(d.default,{transitionName:"voip",className:c.default.wrapper,component:"div",children:(0,f.jsx)(n.default,{children:(0,f.jsx)(h.default,{callUi:o.default,onCallAccept:this.handleCallAccept,onCallReject:this.handleCallReject,onCallEnd:this.handleCallEnd})})}):null}}p.displayName="VoipModalManager";var m=(0,l.default)(p);t.default=m},45440:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(67294),r=i(s(17025)),o=a(s(88419)),l=i(s(58134)),d=i(s(10011)),u=i(s(2408)),c=i(s(71681)),h=i(s(78972)),f=i(s(79485)),p=i(s(24082)),m=i(s(30099)),_=s(34959),g=s(85893);class v extends n.PureComponent{constructor(...e){super(...e),this.state={isMouseOver:!1,isFullscreenMode:l.default.isFullscreenMode},this._toggleMute=()=>{this.props.callUi.muted=!this.props.callUi.muted,p.default.mute(this.props.callUi.muted)},this.setRefContainer=e=>{this.refContainer=e},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.handleEnterFullscreen=e=>{e.stopPropagation(),l.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),l.default.exitFullscreen()},this._onWebrtcStop=()=>{p.default.endCall(),this.props.onCallEnd()},this._onWebrtcStart=()=>{const e=this.props.callUi.to,t=this.props.callUi.type;if(!e)throw new Error("Callee is null.");p.default.registerWebRTCCallback((e=>{const s=e.type,a=e.data;switch(s){case _.WEB_CALL_EVENTS.AUDIO_TRACK_RECEIVED:this._refAudioElement&&(this._refAudioElement.srcObject=a);break;case _.WEB_CALL_EVENTS.VIDEO_TRACK_RECEIVED:this._refVideoElement&&"video"===t&&(this._refVideoElement.srcObject=a);break;case _.WEB_CALL_EVENTS.MEDIA_READY:"video"===t&&this._refVideoPreviewElement&&(this._refVideoPreviewElement.srcObject=a);break;default:throw new Error(`VoipWindow:onWebrtcStart unsupported webrtc event type: ${s}`)}})),p.default.callStart(e,"video"===t)}}componentDidMount(){this.props.listeners.add(l.default,"fullscreen_change",(()=>{l.default.isFullscreenMode&&l.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):l.default.isFullscreenMode||this.setState({isFullscreenMode:!1})})),this.props.callUi.outgoing&&this._onWebrtcStart()}render(){const{onCallAccept:e,onCallReject:t,onCallEnd:a}=this.props,{state:i,outgoing:n,from:l,to:c,type:f}=this.props.callUi,p=n?c:l,v=r.default.get(p||""),S=v?(0,g.jsx)("div",{className:m.default.participantName,children:(0,g.jsx)(h.default,{contact:v,titlify:!0,ellipsify:!0})}):null,C=v?(0,g.jsx)(o.default,{id:v.id,size:82,quality:o.DETAIL_IMAGE_QUALITY.HIGH}):null,y=(0,g.jsx)("div",{className:m.default.actionRow,children:(0,g.jsxs)("div",{className:m.default.btnGroup,children:[(0,g.jsx)("button",{className:m.default.btnReject,onClick:t}),(0,g.jsx)("button",{className:m.default.btnAccept,onClick:e})]})}),E=(0,g.jsx)("div",{className:m.default.actionRow,children:(0,g.jsxs)("div",{className:m.default.btnGroup,children:[(0,g.jsx)("button",{className:m.default.btnMute,onClick:this._toggleMute}),(0,g.jsx)("button",{className:m.default.btnEnd,onClick:a})]})});let b,T=(0,g.jsx)("div",{className:m.default.actionRow,children:(0,g.jsx)("div",{className:m.default.btnGroup,children:(0,g.jsx)("button",{className:m.default.btnEnd,onClick:a})})});const M=s(12950).default;if(M.supportsAnyFeature(M.F.WEB_VOIP_VOICE_CALL,M.F.WEB_VOIP_VIDEO_CALL)){T=(0,g.jsx)("div",{className:m.default.actionRow,children:(0,g.jsxs)("div",{className:m.default.btnGroup,children:[(0,g.jsx)("button",{className:m.default.btnEnd,onClick:this._onWebrtcStop}),(0,g.jsx)("button",{className:m.default.btnAccept,onClick:this._onWebrtcStart})]})});const e=M.supportsFeature(M.F.WEB_VOIP_VIDEO_CALL)&&"video"===f?(0,g.jsx)("video",{className:m.default.webrtcVideo,id:"webRtcVideo",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoElement=e}))}):null,t=M.supportsFeature(M.F.WEB_VOIP_VIDEO_CALL)&&"video"===f?(0,g.jsx)("video",{className:m.default.webrtcVideoPreview,id:"webRtcVideoPreview",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoPreviewElement=e}))}):null;b=(0,g.jsxs)("div",{className:m.default.webrtcCanvas,children:[e,t,(0,g.jsx)("audio",{className:m.default.webrtcAudio,id:"webRtcAudio",controls:!0,autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refAudioElement=e}))})]})}let x;switch(i){case _.CALL_STATES.INCOMING_RING:x=y;break;case _.CALL_STATES.ACTIVE:x=E;break;default:x=T}const I=(0,g.jsx)("div",{className:m.default.callTitle,children:"video"===f?u.default.t(2220):u.default.t(2221)}),P=(0,g.jsx)(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick});return(0,g.jsxs)("div",{className:m.default.body,ref:this.setRefContainer,onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},children:[I,S,C,b,this.state.isMouseOver&&P,x]})}}v.CONCERNS={callUi:["state","muted","speaker","outgoing","from","to","type"]},v.displayName="VoipWindowWeb";var S=(0,c.default)((0,f.default)(v,v.CONCERNS));t.default=S},26654:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(21457),r=i(s(10726)),o=a(s(57283));class l extends o.default{constructor(...e){super(...e),this.isMicrophoneAvailable=(0,o.prop)(!1),this.isSpeakerAvailable=(0,o.prop)(!1),this.isVideoAvailable=(0,o.prop)(!1)}initialize(){super.initialize()}refreshDeviceList(e){this._deviceList=e,this.isVideoAvailable=r.default.getAvailableDevices(e,n.AVDeviceType.Video).length>0,this.isMicrophoneAvailable=r.default.getAvailableDevices(e,n.AVDeviceType.AudioInput).length>0,this.isSpeakerAvailable=r.default.getAvailableDevices(e,n.AVDeviceType.AudioOutput).length>0}}var d=new((0,o.defineModel)(l));t.default=d},58226:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CALL_TYPES=void 0;var i=a(s(57283)),n=s(34959);t.CALL_TYPES={VOICE:"VOICE",VIDEO:"VIDEO"};class r extends i.default{constructor(...e){super(...e),this.callId=(0,i.session)(),this.state=(0,i.session)(n.CALL_UI_STATES.NONE),this.from=(0,i.session)(),this.to=(0,i.session)(),this.type=(0,i.session)(),this.muted=(0,i.session)(),this.peerMuted=(0,i.session)(),this.speaker=(0,i.session)(),this.outgoing=(0,i.session)(),this.startTime=(0,i.session)(),this.showFullscreenCallView=(0,i.session)(!1),this.showCallStatusBar=(0,i.session)(!1),this.externalInputAvailable=(0,i.session)(),this.interrupted=(0,i.session)(),this.peerBusy=(0,i.session)(),this.peerVideoState=(0,i.session)(),this.voipWindowId=(0,i.session)(),this.isGroup=(0,i.session)(),this.groupCallParticipants=(0,i.session)()}onStateChange(){}onAudioOutputChange(){}overrideOutputRoute(){return Promise.resolve()}}t.default=r,r.Proxy="callUi"},62734:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OUTPUT_DEVICES",{enumerable:!0,get:function(){return i.OUTPUT_DEVICES}}),Object.defineProperty(t,"CALL_TYPES",{enumerable:!0,get:function(){return n.CALL_TYPES}}),Object.defineProperty(t,"CALL_UI_STATES",{enumerable:!0,get:function(){return o.CALL_UI_STATES}}),t.default=void 0;var i=s(95246),n=a(s(58226)),r=s(57283),o=s(34959);var l=new((0,r.defineModel)(n.default));t.default=l},28279:(e,t,s)=>{"use strict";var a=s(95318);t.Z=function(){!l.default.supportsFeature(l.default.F.MD_BACKEND)&&r.default.protoVersion&&C.default.clearBPQueue().catch((()=>{}));(0,c.clearAllMemoizeCache)(),(0,f.clearChatIdCorrectionCache)(),r.default.delete(),h.default.delete(),m.default.delete(),p.default.delete(),v.default.delete(),y.default.delete(),C.default.delete(),E(i.default),E(_.default),g.default.forEach((e=>{E(e.stickers)})),E(g.default);const e=["Chat","StatusV3","StickerPack","Sticker"];Object.keys(n.default).forEach((t=>{e.includes(t)||E(n.default[t])})),(0,u.delistAndDeleteAllMedia)(),(0,o.clearAllTemporaryStorageData)(),d.default.clear(),r.default.blockStoreAdds=!0};var i=a(s(84758)),n=a(s(7144)),r=a(s(9322)),o=s(86723),l=a(s(12950)),d=a(s(75571)),u=s(70233),c=s(11439),h=a(s(74937)),f=s(78970),p=a(s(65565)),m=a(s(87947)),_=a(s(83125)),g=a(s(61848)),v=a(s(46364)),S=s(74289),C=a(s(865)),y=a(s(29023));function E(e){const t=[...e.models];e.reset(),t.forEach((e=>{(0,S.isFunction)(e.delete)&&e.delete()})),e.delete()}},7144:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(15701)),n=a(s(54100)),r=a(s(8581)),o=a(s(15971)),l=a(s(60028)),d=a(s(84758)),u=a(s(94822)),c=a(s(17025)),h=a(s(74612)),f=a(s(41098)),p=a(s(75798)),m=a(s(59606)),_=a(s(31104)),g=a(s(45472)),v=a(s(57636)),S=a(s(80959)),C=a(s(98052)),y=a(s(48327)),E=a(s(3165)),b=a(s(65963)),T=a(s(30462)),M=a(s(41341)),x=a(s(82394)),I=a(s(30118)),P=a(s(68477)),A=a(s(22360)),N=a(s(83125)),O=a(s(16482)),w=a(s(6009)),D=a(s(27686)),j={Blocklist:i.default,BusinessCategoryResult:n.default,BusinessProfile:r.default,Call:o.default,Catalog:l.default,Chat:d.default,ChatPreference:u.default,Contact:c.default,ConversionTuple:h.default,EmojiVariant:f.default,GroupMetadata:p.default,Label:m.default,LiveLocation:_.default,Msg:g.default,MsgInfo:v.default,Mute:S.default,Order:C.default,Presence:y.default,ProfilePicThumb:E.default,QuickReply:b.default,RecentEmoji:T.default,RecentSticker:M.default,StarredGifMsg:x.default,StarredMsg:I.default,StarredSticker:P.default,Status:A.default,StatusV3:N.default,Sticker:O.default,StickerSearch:w.default,RecentStickerMD:D.default};t.default=j},91427:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(36513)),r=i(s(58380)),o=i(s(84758)),l=i(s(71189)),d=s(86723),u=i(s(75798)),c=a(s(72787));class h extends n.default{constructor(e,t){super(),this.stale=!1,this.add(e,{silent:!0}),this.contact=t,this.listenTo(u.default,`group_participant_change_${(0,d.getMaybeMeUser)().toString()}`,this.updateCommonGroups),this.listenTo(u.default,`group_participant_change_${this.contact.toString()}`,this.updateCommonGroups),this.listenTo(c.default,"change:stream",(()=>{c.default.stream===c.STREAM.DISCONNECTED&&(this.stale=!0)}))}updateCommonGroups(e){const t=u.default.assertGet(e).participants,s=(0,d.getMaybeMeUser)();this.get(e)?t.get(this.contact)&&t.get(s)||this.remove(e):t.get(this.contact)&&t.get(s)&&this.add(o.default.assertGet(e))}}t.default=h,h.model=r.default,h.comparator=l.default},59014:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMaybeBizPlatformForLogging=function(e){if(null==e)return n.default.BIZ_PLATFORM.UNKNOWN;const t=i.default.get((0,r.createWid)(e));if(null==t||!t.isBusiness)return n.default.BIZ_PLATFORM.UNKNOWN;return t.isEnterprise?n.default.BIZ_PLATFORM.ENT:n.default.BIZ_PLATFORM.SMB};var i=a(s(17025)),n=a(s(4231)),r=s(89573)},14996:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(57283));class n extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.variant=(0,i.prop)()}}n.Proxy="emojiVariant";var r=(0,i.defineModel)(n);t.default=r},41098:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmojiVariantCollection=void 0;var n=i(s(36513)),r=a(s(55454)),o=a(s(2561)),l=a(s(14996));class d extends n.default{setVariant(e,t){const s=o.default.getSkinToneBase(e);if(!s)throw new Error("attempt to store variantless emoji");this.gadd({id:s,variant:t})}getVariant(e){if(o.default.getSkinToneBase(e)){const t=this.get(e);return t?o.default.normalizeEmoji(t.variant):null}throw new Error("attempt to get variantless emoji")}getVariantIfExists(e){if(o.default.getSkinToneBase(e)){const t=this.get(e);return t?o.default.normalizeEmoji(t.variant):null}return null}}t.EmojiVariantCollection=d,d.model=l.default,d.cachePolicy={id:r.default.KEY_EMOJI_VARIANT_COLLECTION,policy:n.CACHE_POLICY.LOAD,delay:1e3};var u=new d;t.default=u},86654:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(55084),n=a(s(36513)),r=a(s(84758)),o=s(54647),l=a(s(4231)),d=a(s(92954)),u=a(s(45472));class c extends n.default{constructor(e){super(),this.hasMoreMsgs=!0,this.resultPage=0,this.searchPromise=null,this.searchTerm=null,this.searchLabel=null,this.updateFtsAfterMsgLabelUpdate=()=>{if(!this.currentLabelSearch)return;const e=this.filter((e=>!e.labels||!e.labels.includes(this.currentLabelSearch)));this.remove(e,{silent:!0})};const t=e?e.msgs:u.default;this.listenTo(t,"remove_msgs",(e=>{this.remove(e,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")})),this.listenTo(r.default,"remove",(e=>{const t=[];this.forEach((s=>{s.chat===e&&t.push(s)}));this.remove(t,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")}))}delete(e){e&&this.stopListening(),super.delete()}resetSearch(){this.hasMoreMsgs=!0,this.resultPage=0,this.searchTerm=null,this.searchPromise&&this.searchPromise.cancel()}search({chat:e,count:t,filter:s={},searchTerm:a}){const n=`${a}__${s.label||s.kind||""}`;this.currentLabelSearch=s.label;let r=!1;this.searchTerm!==n?(this.searchTerm&&0===a.indexOf(this.searchTerm)?r=!0:(this.searchTerm=n,this.delete()),this.resultPage=0,this.hasMoreMsgs=!0):r=!0;const d=new l.default.UiAction({uiActionType:l.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:r});if(this.searchPromise){if(this.searchTerm===n)return this.searchPromise;this.searchPromise.cancel()}let c;return c=e?e.fts(a,++this.resultPage,t):u.default.search(a,++this.resultPage,t,void 0,s),this.searchPromise=c.cancellable().then((e=>(e.eof&&(this.hasMoreMsgs=!1),this.searchTerm!==n&&this.delete(),this.searchTerm=n,e.messages&&this.add(e.messages.filter((e=>!e.asRevoked))),d.markUiActionT(),d.commit(),e))).catch((0,i.filteredCatch)([o.WebdDrop,Promise.CancellationError],(()=>{}))).finally((()=>{this.searchPromise=null,this.trigger("searchPromise_update")})),this.trigger("searchPromise_update"),this.searchPromise}}t.default=c,c.model=d.default},96889:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,s(67294).createContext)(null);t.default=a},63444:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(81109)),r=a(s(57283)),o=i(s(70334)),l=i(s(2414));class d extends r.default{constructor(...e){super(...e),this.id=(0,r.prop)(),this.products=(0,r.prop)(),this.itemCount=(0,r.prop)(),this.subtotal=(0,r.prop)(),this.tax=(0,r.prop)(),this.total=(0,r.prop)(),this.currency=(0,r.prop)(),this.createdAt=(0,r.prop)(),this.sellerJid=(0,r.prop)(),this.totalItemCount=(0,r.derived)(this._totalItemCount,["products"])}_totalItemCount(){return this.products.reduce(((e,t)=>e+t.quantity),0)}initialize(){super.initialize(),this.orderItemCollection=new l.default,this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()}triggerItemCollectionUpdate(){this.orderItemCollection.add(this.products.map((e=>new o.default((0,n.default)({},e)))),{merge:!0})}getCollection(){return s(98052).default}}d.Proxy="order";var u=(0,r.defineModel)(d);t.default=u},98052:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderCollection=void 0;var i=a(s(81109)),n=a(s(36513)),r=a(s(63444)),o=s(53071);class l extends n.default{constructor(e,t){super(),this.width=80,this.height=80,null!=e&&(this.width=e),null!=t&&(this.height=t)}findOrder(e,t,s){const a=this.get(e);return null!=a?Promise.resolve(a):this._queryOrder(e,t,s)}_queryOrder(e,t,s){return(0,o.queryOrder)(e,this.width,this.height,s).then((s=>{super.add((0,i.default)({id:e,fetchedFromServer:!0,sellerJid:t},s));const a=this.get(e);if(null!=a)return Promise.resolve(a)}))}}t.OrderCollection=l,l.model=r.default,l.staleCollection=!0;var d=new l;t.default=d},70334:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(57283)),r=a(s(49694)),o=s(90672);class l extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.price=(0,n.prop)(),this.currency=(0,n.prop)(),this.name=(0,n.prop)(),this.quantity=(0,n.prop)(),this.thumbnailId=(0,n.prop)(),this.thumbnailUrl=(0,n.prop)(),this.mediaData=(0,n.derived)(this._mediaData,["thumbnailUrl"])}_mediaData(){return new r.default({mediaStage:null!=this.thumbnailUrl?o.MEDIA_DATA_STAGE.RESOLVED:o.MEDIA_DATA_STAGE.PREPARING,renderableUrl:null!=this.thumbnailUrl?`${this.thumbnailUrl}`:null})}getCollection(){return s(98052).default}}l.Proxy="order-item";var d=(0,n.defineModel)(l);t.default=d},2414:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderItemCollection=void 0;var i=a(s(36513)),n=a(s(70334));class r extends i.default{}t.OrderItemCollection=r,r.model=n.default;var o=r;t.default=o},59594:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PttPrefs=void 0;var n=i(s(74691)),r=s(78285),o=a(s(57283)),l=s(86723),d=i(s(65565));const u=[1,1.5,2];class c extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.playbackRate=(0,o.prop)(1),this.playbackControlMessageId=(0,o.prop)(null)}initialize(){o.default.prototype.initialize.call(this),this._restorePlaybackRate(),this.listenTo(d.default,"change:pttPlaybackSpeedEnabled",(()=>{this._restorePlaybackRate()})),this.on("change:playbackRate",((e,t)=>{(0,l.setPttPlaybackRate)(t)}))}setPlayingMessage(e){this._setPlayingMessage(e);let t=()=>{this._playingMessageId===e.toString()&&this._setPlayingMessage(null)};return()=>{var e;null===(e=t)||void 0===e||e(),t=null}}_setPlayingMessage(e){var t;this._playingMessageId=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:null,null!=this._playingMessageId?(h.cancel(),this.playbackControlMessageId=this._playingMessageId):this._scheduleClearPlaybackRateControl()}_restorePlaybackRate(){this.playbackRate=d.default.pttPlaybackSpeedEnabled?(0,l.getPttPlaybackRate)():1}advancePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!0)}increasePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!1)}decreasePlaybackRateFor(e){this._changePlaybackRateFor(e,-1,!1)}_changePlaybackRateFor(e,t,s){const a=u.indexOf(this.playbackRate),i=s?(a+t+u.length)%u.length:(0,n.default)(a+t,0,u.length-1);this.playbackRate=u[i],null==this._playingMessageId&&(this.playbackControlMessageId=e.toString(),this._scheduleClearPlaybackRateControl())}_scheduleClearPlaybackRateControl(){const{playbackControlMessageId:e}=this;null!=e&&h.onOrAfter(d.default.pttPlaybackSpeedHideDelay,e)}delayClearPlaybackRateControl(){if(!h.isScheduled())return;const{playbackControlMessageId:e}=this;null!=e&&h.onOrAfter(d.default.pttPlaybackSpeedHideDelay,e)}}t.PttPrefs=c,c.Proxy="pttPrefs";const h=new r.ShiftTimer((e=>{e===f.playbackControlMessageId&&(f.playbackControlMessageId=null)})),f=new((0,o.defineModel)(c))({id:"1"});var p=f;t.default=p},10868:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(60934),n=a(s(99441));var r=({interactiveType:e,interactivePayload:t})=>{if(!t)return null;const s=[];switch(e){case n.default.SHOPS:t.type===i.ShopsMessageType.COLLECTION?s.push({label:"View collection"}):t.type===i.ShopsMessageType.PRODUCT?s.push({label:"View item"}):t.type===i.ShopsMessageType.STOREFRONT&&s.push({label:"View shops"});break;default:return null}return s};t.default=r},17223:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showForwarded=function(e){const t=(0,a.unproxy)(e);return t.numTimesForwarded>0&&!t.asRevoked};var a=s(15298)},6009:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerSearchCollection=void 0;var i=a(s(48926)),n=a(s(36513)),r=(s(15140),a(s(2561))),o=a(s(98741)),l=s(28649),d=a(s(92537));const u={HAPPY:["","","","","","","","","",""],LOVE:["","","","","","","","","","","","","","","","","","","","","",""],GREETINGS:["","","","","","","","","","","","","","","","","","","","","",""],SAD:["","","","","","","","","","","","","","","","","",""],ANGRY:["","","","","","",""],CELEBRATE:["","","","",""]};class c extends n.default{constructor(...e){super(...e),this._cache=new Map,this._hasFetched=!1,this._isFetching=!0}isFetchingData(){return this._isFetching}hasFetchedData(){return this._hasFetched}setStartFetching(){this._isFetching=!0,this.trigger("start_fetching")}setStopFetching(){this._isFetching=!1,this.trigger("stop_fetching")}search(e){var t=()=>super.delete,s=this;return(0,i.default)((function*(){s._lastQuery!==e&&s._hasFetched&&t().call(s);const a=e.trim().toUpperCase();if(s._cache.has(e)){const t=s._cache.get(e);if(null!=t)return s.add(t),void(s._lastQuery=e);__LOG__(2)`StickerMoodCollection cache was invalid, re-searching.`}const i=[];if(u.hasOwnProperty(a))i.push(...u[a]);else{const n=r.default.containsOnlyEmoji(a)?r.default.splitEmojis(a):(0,o.default)(a);if(null==n||0===n.length)return s._lastQuery=e,s.setStopFetching(),void t().call(s);i.push(...n)}s.setStartFetching();let n=[];try{n=yield(0,l.searchFirstPartyStickers)(i)}catch(e){return __LOG__(3,void 0,void 0,!0)`Sticker search request failed: error: ${e}`,SEND_LOGS("sticker-search-request-failed"),void s.setStopFetching()}s._cache.set(e,n),s._hasFetched=!0,s._lastQuery=e,s.add(n),s.setStopFetching()}))()}searchMood(e){return this.search(e)}delete(){super.delete(),this._cache=new Map,this._hasFetched=!1,this._isFetching=!1}}t.StickerSearchCollection=c,c.model=d.default;var h=new c;t.default=h},42841:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.canBeGroupedAsAlbum=function(e,t){return(e.isGroupMsg?n.default.equals(e.author,t.author):n.default.equals(e.from,t.from))&&e.isForwarded===t.isForwarded&&t.t-e.t<=i.default.ALBUM_DIFF_INTERVAL},t.canBeGroupedWithNext=function(e,t){if(e.isNotification||t.isNotification)return!1;return e.isGroupMsg?n.default.equals(e.author,t.author)&&e.isSentByMe===t.isSentByMe:n.default.equals(e.from,t.from)};var i=a(s(55454)),n=a(s(69635))},61068:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.animateConversationPanel=function(e,t){return(0,i.default)(e,{scaleX:[1,t]},{duration:300,easing:[.1,.82,.25,1]}),1!==t};var i=a(s(45285))},57229:(e,t,s)=>{"use strict";var a=s(95318);t.Z=function({cmd:e,untypedData:t,isExternal:s}){const a=s?h.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_EXTERNAL:h.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_WA_LINK_CLICK;switch(e){case u.APICmd.GROUP_INVITE:return r.default.closeStatusViewer(),r.default.openModal((0,y.jsx)(d.default,{groupCode:t.code})),new h.default.DeepLinkOpen({deepLinkOpenFrom:a,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_GROUP_INVITE}).commit(),!0;case u.APICmd.CATALOG:{const{catalogOwnerJid:e}=t;return function(e){r.default.openModal((0,y.jsx)(f.default,{chatId:(0,C.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{r.default.openDrawerRight((0,y.jsx)(_.default,{chat:t,catalogOwnerJid:e}),"slide-left",S.default.Manager.top,(0,p.buildProductCatalogContext)())}),100)},msgText:null}),{transition:"modal-flow"})}(e),new h.default.DeepLinkOpen({deepLinkOpenFrom:a,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_CATALOG}).commit(),!0}case u.APICmd.PRODUCT:{const{businessOwnerJid:e,productId:s}=t;return function(e,t){const s=(0,p.buildProductCatalogContext)(new m.default,(0,o.getMaybeBizPlatformForLogging)(e),h.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_DEEPLINK);(0,c.logProductDeepLinkOpen)({catalogOwnerJid:e,catalogContext:s}),r.default.openModal((0,y.jsx)(f.default,{chatId:(0,C.createWid)(e),onSuccess:a=>{window.setTimeout((()=>{r.default.openDrawerRight((0,y.jsx)(_.default,{chat:a,productInfo:{productId:t,businessOwnerJid:e},refreshCarousel:!0}),"slide-left",S.default.Manager.top,s)}),100)},msgText:null}),{transition:"modal-flow"})}(e,s),new h.default.DeepLinkOpen({deepLinkOpenFrom:a,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_PRODUCT}).commit(),!0}case u.APICmd.MSG_SEND:r.default.closeStatusViewer();const e=t,{text:s,phone:E,conversionTuple:b}=e,T=v.default.ctwaContextCompose?e.ctwaContextLinkData:void 0;return E?(r.default.openModal((0,y.jsx)(f.default,{chatId:(0,C.createWid)(E),msgText:s,onSuccess:e=>{b&&l.default.add((0,i.default)((0,i.default)({},b),{},{id:e.id,timestamp:n.default.globalUnixTime()}),{merge:!0}),s&&(e.urlText=!0),e.urlNumber=!0},ctwaContextLinkData:T}),{transition:"modal-flow"}),new h.default.DeepLinkOpen({deepLinkOpenFrom:a,deepLinkType:T?h.default.DEEP_LINK_TYPE.DEEP_LINK_CTWA:h.default.DEEP_LINK_TYPE.DEEP_LINK_CHAT}).commit()):(r.default.openModal((0,y.jsx)(g.default,{msgText:s,urlText:!0}),{transition:"modal-flow"}),new h.default.DeepLinkOpen({deepLinkOpenFrom:a,deepLinkType:h.default.DEEP_LINK_TYPE.DEEP_LINK_MSG_FORWARD}).commit()),!0;default:return!1}};var i=a(s(81109)),n=a(s(25142)),r=a(s(91952)),o=s(59014),l=a(s(74612)),d=a(s(15687)),u=s(67012),c=s(30333),h=a(s(4231)),f=a(s(78970)),p=s(70790),m=a(s(90277)),_=a(s(62002)),g=a(s(54500)),v=a(s(65565)),S=a(s(96594)),C=s(89573),y=s(85893)},12959:(e,t)=>{"use strict";function s(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=s){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,s)=>a(e,t[s])))}},29462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s,a=!1;for(s=0;s<e.length;s++)if(e[s]===t){a=!0;break}if(a){const t=e[s];e.splice(s,1),e.unshift(t)}}},95246:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AudioSession=t.OUTPUT_DEVICES=t.AUDIO_EVENTS=void 0;var i=a(s(95863));t.AUDIO_EVENTS={OUTPUT_ROUTES_CHANGED:"OUTPUT_ROUTES_CHANGED"};t.OUTPUT_DEVICES={UNKNOWN:0,LINE_OUT:1,HEADPHONES:2,BLUETOOTH:3,INTERNAL_RECEIVER:4,INTERAL_SPEAKER:5,HDMI:6,REMOTE:7,BLUETOOTH_LE:8,BLUETOOTH_HANDS_FREE:9,USB:10,CAR:11};t.AudioSession=class{constructor(){}startUse(){}endUse(){}};class n extends i.default{constructor(){super()}startAudioSession(){}isRoutingToOutput(){return!1}get isRoutingToSpeaker(){return null}get outputRoutes(){return[]}get isBluetoothInputAvailable(){return null}overrideOutputRoute(){return Promise.resolve()}}var r=new n;t.default=r},2084:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBizPrivacyInfoString=function(e){switch(e){case n.WebMessageInfoBizPrivacyStatus.E2EE:return i.default.t(297);case n.WebMessageInfoBizPrivacyStatus.BSP:return i.default.t(294);case n.WebMessageInfoBizPrivacyStatus.BSP_AND_FB:case n.WebMessageInfoBizPrivacyStatus.FB:return i.default.t(299)}};var i=a(s(2408)),n=s(68719)},3336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){if(!e)return;let a=[];a.push(e);for(;a.length;){const e=a.shift();if(s(e))return e;a=a.concat(t(e))}}},46215:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductStatsInFetched=function(e,t,s){const a=n.default.get(e);let i,r;if(!a)return;if(!t&&s){const e=a.productCollection.get(s.id);return i=e&&a.productCollection.indexOf(e),{productIndex:(0,o.isNumber)(i)&&i>-1?i.toString():void 0}}if(t){const e=t&&a.collections.get(t);r=e&&a.collections.indexOf(e);const n=s&&(null==e?void 0:e.productCollection.get(s.id));i=n&&(null==e?void 0:e.productCollection.indexOf(n))}return{collectionIndex:(0,o.isNumber)(r)&&r>-1?r.toString():void 0,productIndex:(0,o.isNumber)(i)&&i>-1?i.toString():void 0}},t.CatalogListItemScrollHelper=t.CollectionsContentDataSource=t.CollectionsDataSource=t.CatalogWithCollectionsDataSource=t.SingleCollectionDataSource=void 0;var i=a(s(48926)),n=a(s(60028)),r=a(s(55454)),o=s(74289);function l(){return d.apply(this,arguments)}function d(){return(d=(0,i.default)((function*(e){const t=e.getData().length||0;if(!e.getCanLoadMore()||!u(t,e.listItemHeight))return!0;yield e.loadMore();return!u(e.getData().length||0,e.listItemHeight)||e.loadInitialItems()}))).apply(this,arguments)}t.SingleCollectionDataSource=class{constructor(e,t,s,a){var i;(this.loading=null,this.catalog=e,this.collectionId=t,this.forCatalogManager=s,this.listItemHeight=a,t)?this.canLoadMoreCollectionItems=!(e.collections.length>0)||""!==(null===(i=this.catalog.collections.get(t))||void 0===i?void 0:i.afterCursor):this.canLoadMoreAllItems=!(e.productCollection.length>0)||!!this.catalog.afterCursor}loadMore(){if(this.loading)return this.loading;if(!this.getCanLoadMore())return Promise.resolve();const e=this.collectionId;return this.loading=e?this.catalog.collections.findCollectionProducts(this.catalog.id,e,!1).then((()=>{var t;this.canLoadMoreCollectionItems=!!(null===(t=this.catalog.collections.get(e))||void 0===t?void 0:t.afterCursor),this.loading=null})):n.default.update(this.catalog.id).then((()=>{this.canLoadMoreAllItems=!!this.catalog.afterCursor,this.loading=null})),this.loading}loadInitialItems(){return l(this)}getCanLoadMore(){return this.canLoadMoreCollectionItems||this.canLoadMoreAllItems}getData(){const e=this.collectionId;let t;var s;e?t=(null===(s=this.catalog.collections.get(e))||void 0===s?void 0:s.productCollection.getProductModels(this.forCatalogManager))||[]:t=this.catalog.productCollection.getProductModels(this.forCatalogManager)||[];return t.map((e=>({product:e,collection:void 0})))}};t.CatalogWithCollectionsDataSource=class{constructor(e,t,s){this.loading=null,this.catalog=e,this.forCatalogManager=t,this.listItemHeight=s,this.canLoadMoreCollections=!(e.collections.length>0)||!!this.catalog.collections.afterCursor,this.canLoadMoreCatalog=!(e.productCollection.length>0)||!!this.catalog.afterCursor}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMoreCollections?this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,3,this.forCatalogManager).then((()=>{this.canLoadMoreCollections=!!this.catalog.collections.afterCursor,this.loading=null})):this.loading=n.default.update(this.catalog.id).then((()=>{this.canLoadMoreCatalog=!!this.catalog.afterCursor,this.loading=null})),this.loading):Promise.resolve()}loadInitialItems(){return l(this)}getCanLoadMore(){return this.canLoadMoreCollections||this.canLoadMoreCatalog}getData(){const e=this.catalog.collections.getCollectionModels(this.forCatalogManager),t=e.length>0,s=e.reduce(((e=[],t)=>{e.push({collection:t,product:void 0});const s=t.productCollection.getProductModels(this.forCatalogManager)||[];return s.length>3&&(s.length=3),e.push(...s.map((e=>({product:e,collection:t})))),e}),[]);if(this.canLoadMoreCollections)return s;t&&s.push({allItems:{totalItemsCount:s.length}});const a=this.catalog.productCollection.getProductModels(this.forCatalogManager).map((e=>({product:e,collection:void 0})));return s.push(...a),s}};t.CollectionsDataSource=class{constructor(e,t,s){this.loading=null,this.canLoadMoreCollections=!0,this.catalog=e,this.forCatalogManager=t,this.listItemHeight=s}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMoreCollections&&(this.loading=this.catalog.collections.findCollectionsList(this.catalog.id,3,this.forCatalogManager).then((()=>{this.canLoadMoreCollections=!!this.catalog.collections.afterCursor,this.loading=null}))),this.loading||Promise.resolve()):Promise.resolve()}loadInitialItems(){return l(this)}getCanLoadMore(){return this.canLoadMoreCollections}getData(){return this.catalog.collections.getCollectionModels(this.forCatalogManager).map((e=>({collection:e,product:void 0})))}};function u(e,t){return e*t<window.innerHeight}t.CollectionsContentDataSource=class{constructor(e,t,s){this.loading=null,this.canLoadMore=!0,this.catalog=e,this.catalog.stale=!0,this.catalog.markProductCollectionOld(),this.catalog.productCollection.reset(),this.listItemHeight=t,this.collectionId=s}loadMore(){return this.loading?this.loading:this.getCanLoadMore()?(this.canLoadMore&&(this.collectionId?this.loading=n.default.findCollectionMembership(this.catalog.id,this.collectionId).then((()=>{this.canLoadMore=!!this.catalog.afterCursor,this.loading=null})):this.loading=n.default.update(this.catalog.id).then((()=>{this.canLoadMore=!!this.catalog.afterCursor,this.loading=null}))),this.loading||Promise.resolve()):Promise.resolve()}loadInitialItems(){return l(this)}getCanLoadMore(){return this.canLoadMore}getData(){return this.catalog.productCollection.getProductModels(!0).map((e=>({product:e,collection:void 0})))}};t.CatalogListItemScrollHelper=class{constructor(e){this.dataSource=e}isScrollAtBottom(e){return e.scrollTop+r.default.SCROLL_FUDGE>=e.scrollHeight-e.clientHeight}willLoadMore(e){return Boolean(this.dataSource.loading||this.isScrollAtBottom(e))}onScroll(e,t){var s=this;return(0,i.default)((function*(){return s.dataSource.loading?(yield s.dataSource.loading,!0):!!s.isScrollAtBottom(t)&&(yield s.dataSource.loadMore(),!0)}))()}}},91547:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(55454));const n=window.matchMedia(`\nonly screen and (max-width: ${i.default.LAYOUT_2COLUMNS_MAX_WIDTH}px)\n`),r={column:n.matches?2:3};n.addListener((function(e){const t=e.matches?2:3;if(r.column===t)return;r.column=t;const s=document.createEvent("Event");s.initEvent("columnChange",!0,!0),window.dispatchEvent(s)}));var o=r;t.default=o},92329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=new class{init(){}get(){return{textsize:0}}set(){}};t.default=s},79808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const s=3988292384;let a;function i(e,t){let i=t;for(a||(a=function(){const e=new Uint32Array(256);for(let t=0,a=0,i=0;t<256;a=++t){for(i=0;i<8;++i)a=1&a?a>>>1^s:a>>>1;e[t]=a}return e}());e.size();)i=a[255&(i^e.readUint8())]^i>>>8;return~i>>>0}t.default=(e,t=4294967295)=>e.peek(i,t)},61447:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatAmount1000ToParts=function(e,t){const s=l(),a=c(s),i=h(s,e),n=u(e,t).replace(i,"").trim(),r=n.indexOf(a),o=-1===r?n:n.substring(0,r),d=-1===r?"":n.substring(r);return{symbol:i,integer:o,decimal:d}},t.formatLocalSymbol=function(e){return h(o[e],e)},t.valueFromString=f,t.parseValueFromString=p,t.validatePriceString=function(e,t,s,a){const i=l(),r=void 0!==n.CURRENCY_DIGITS[e]?n.CURRENCY_DIGITS[e]:n.DEFAULT_DIGITS,o=f(e,t),d=t.replace(/\D+$/g,""),u=c(i);if(null!=s&&o<s)return!1;if(null!=a&&o>a)return!1;if(isNaN(o)||d!==t||(t.split(u)[1]||"").length>r)return!1;return!0},t.currencyForCountryShortcode=function(e){const t=n.REGION_TO_CURRENCY[e.toUpperCase()];return(null==t?void 0:t.length)>0?t[0]:n.DEFAULT_CURRENCY},t.formatAmount1000=t.formatAmount=void 0;var i=a(s(81109)),n=s(38454),r=a(s(2408));const o={IDR:"in-ID",MXN:"es-MX",INR:"en-IN"},l=()=>[r.default.getFullLocale(),r.default.getLocale()].filter(Boolean),d=(e,t,s,a=l())=>new Intl.NumberFormat(a,(0,i.default)({style:"currency",currency:e},s)).format(t);t.formatAmount=d;const u=(e,t,s,a)=>d(e,t/1e3,s,a);function c(e){return new Intl.NumberFormat(e).format(1.1).substring(1,2)}function h(e,t){return u(t,0,{},e).replace(/\d+([,.]\d+)?/g,"").trim()}function f(e,t){const s=l(),a=h(s,e),i=function(e){return new Intl.NumberFormat(e).format(1e4).substring(2,3)}(s);return p(t,a,c(s),i)}function p(e,t,s,a){const i=e.replace(t,"").trim().split(a).join(""),n=parseFloat(i.replace(s,".")||"0");return Math.round(1e3*n)}t.formatAmount1000=u},38454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGION_TO_CURRENCY=t.CURRENCY_DIGITS=t.DEFAULT_DIGITS=t.MAX_FRACTION_DIGITS=t.DEFAULT_CURRENCY=void 0;t.DEFAULT_CURRENCY="USD";t.MAX_FRACTION_DIGITS=4;t.DEFAULT_DIGITS=2;t.CURRENCY_DIGITS={ADP:0,AFN:0,ALL:0,BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,ESP:0,GNF:0,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MRO:0,OMR:3,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};t.REGION_TO_CURRENCY={AC:["SHP"],AD:["EUR"],AE:["AED"],AF:["AFN"],AG:["XCD"],AI:["XCD"],AL:["ALL"],AM:["AMD"],AO:["AOA"],AR:["ARS"],AS:["USD"],AT:["EUR"],AU:["AUD"],AW:["AWG"],AX:["EUR"],AZ:["AZN"],BA:["BAM"],BB:["BBD"],BD:["BDT"],BE:["EUR"],BF:["XOF"],BG:["BGN"],BH:["BHD"],BI:["BIF"],BJ:["XOF"],BL:["EUR"],BM:["BMD"],BN:["BND"],BO:["BOB"],BQ:["USD"],BR:["BRL"],BS:["BSD"],BT:["BTN","INR"],BV:["NOK"],BW:["BWP"],BY:["BYN"],BZ:["BZD"],CA:["CAD"],CC:["AUD"],CD:["CDF"],CF:["XAF"],CG:["XAF"],CH:["CHF"],CI:["XOF"],CK:["NZD"],CL:["CLP"],CM:["XAF"],CN:["CNY"],CO:["COP"],CR:["CRC"],CU:["CUP","CUC"],CV:["CVE"],CW:["ANG"],CX:["AUD"],CY:["EUR"],CZ:["CZK"],DE:["EUR"],DG:["USD"],DJ:["DJF"],DK:["DKK"],DM:["XCD"],DO:["DOP"],DZ:["DZD"],EA:["EUR"],EC:["USD"],EE:["EUR"],EG:["EGP"],EH:["MAD"],ER:["ERN"],ES:["EUR"],ET:["ETB"],EU:["EUR"],FI:["EUR"],FJ:["FJD"],FK:["FKP"],FM:["USD"],FO:["DKK"],FR:["EUR"],GA:["XAF"],GB:["GBP"],GD:["XCD"],GE:["GEL"],GF:["EUR"],GG:["GBP"],GH:["GHS"],GI:["GIP"],GL:["DKK"],GM:["GMD"],GN:["GNF"],GP:["EUR"],GQ:["XAF"],GR:["EUR"],GS:["GBP"],GT:["GTQ"],GU:["USD"],GW:["XOF"],GY:["GYD"],HK:["HKD"],HM:["AUD"],HN:["HNL"],HR:["HRK"],HT:["HTG","USD"],HU:["HUF"],IC:["EUR"],ID:["IDR"],IE:["EUR"],IL:["ILS"],IM:["GBP"],IN:["INR"],IO:["USD"],IQ:["IQD"],IR:["IRR"],IS:["ISK"],IT:["EUR"],JE:["GBP"],JM:["JMD"],JO:["JOD"],JP:["JPY"],KE:["KES"],KG:["KGS"],KH:["KHR"],KI:["AUD"],KM:["KMF"],KN:["XCD"],KP:["KPW"],KR:["KRW"],KW:["KWD"],KY:["KYD"],KZ:["KZT"],LA:["LAK"],LB:["LBP"],LC:["XCD"],LI:["CHF"],LK:["LKR"],LR:["LRD"],LS:["ZAR","LSL"],LT:["EUR"],LU:["EUR"],LV:["EUR"],LY:["LYD"],MA:["MAD"],MC:["EUR"],MD:["MDL"],ME:["EUR"],MF:["EUR"],MG:["MGA"],MH:["USD"],MK:["MKD"],ML:["XOF"],MM:["MMK"],MN:["MNT"],MO:["MOP"],MP:["USD"],MQ:["EUR"],MR:["MRU"],MS:["XCD"],MT:["EUR"],MU:["MUR"],MV:["MVR"],MW:["MWK"],MX:["MXN"],MY:["MYR"],MZ:["MZN"],NA:["NAD","ZAR"],NC:["XPF"],NE:["XOF"],NF:["AUD"],NG:["NGN"],NI:["NIO"],NL:["EUR"],NO:["NOK"],NP:["NPR"],NR:["AUD"],NU:["NZD"],NZ:["NZD"],OM:["OMR"],PA:["PAB","USD"],PE:["PEN"],PF:["XPF"],PG:["PGK"],PH:["PHP"],PK:["PKR"],PL:["PLN"],PM:["EUR"],PN:["NZD"],PR:["USD"],PS:["ILS","JOD"],PT:["EUR"],PW:["USD"],PY:["PYG"],QA:["QAR"],RE:["EUR"],RO:["RON"],RS:["RSD"],RU:["RUB"],RW:["RWF"],SA:["SAR"],SB:["SBD"],SC:["SCR"],SD:["SDG"],SE:["SEK"],SG:["SGD"],SH:["SHP"],SI:["EUR"],SJ:["NOK"],SK:["EUR"],SL:["SLL"],SM:["EUR"],SN:["XOF"],SO:["SOS"],SR:["SRD"],SS:["SSP"],ST:["STN"],SV:["USD"],SX:["ANG"],SY:["SYP"],SZ:["SZL"],TA:["GBP"],TC:["USD"],TD:["XAF"],TF:["EUR"],TG:["XOF"],TH:["THB"],TJ:["TJS"],TK:["NZD"],TL:["USD"],TM:["TMT"],TN:["TND"],TO:["TOP"],TR:["TRY"],TT:["TTD"],TV:["AUD"],TW:["TWD"],TZ:["TZS"],UA:["UAH"],UG:["UGX"],UM:["USD"],US:["USD"],UY:["UYU"],UZ:["UZS"],VA:["EUR"],VC:["XCD"],VE:["VES"],VG:["USD"],VI:["USD"],VN:["VND"],VU:["VUV"],WF:["XPF"],WS:["WST"],XK:["EUR"],YE:["YER"],YT:["EUR"],ZA:["ZAR"],ZM:["ZMW"],ZW:["USD"]}},84286:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(48926));const n=/\r\n/g;t.default=class{constructor(e){this.hasText=()=>this.hasType("text/plain"),this.hasType=e=>this.types.includes(e),this.data=e,this.types=e.types?Array.isArray(e.types)?e.types:Object.keys(e.types).map((t=>e.types[t])):[]}getItems(){if(this.data.items)return Array.prototype.slice.call(this.data.items);const e=this._getFileTypes();return this.types.map((t=>({type:t,data:this.data.getData(t),kind:e.includes(t)?"string":"file"})))}_getFileTypes(){return Array.prototype.slice.call(this.data.files).map((({type:e})=>e))}getText(e){var t=this;return(0,i.default)((function*(){const s=yield t._getText(e);return s?s.replace(n,"\n"):null}))()}_getText(e){var t=this;return(0,i.default)((function*(){const s=e||[];0===s.length&&s.push("text/plain");const{data:a}=t;if(a.getData){let e;return s.some((t=>{if(a.getData(t))return e=a.getData(t),!0})),Promise.resolve(e)}const i=function(e,t){const s=Array.from(e);return t.reduce(((e,t)=>{const a=s.find((e=>e.type===t));return a&&e.push(a),e}),[])}(t.data.items,s);if(!i.length)return;const n=Promise.all(i.map((e=>new Promise((t=>e.getAsString(t))))));return(yield n).find((e=>e.length))}))()}getFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).filter((({kind:e})=>"file"===e)).map((e=>e.getAsFile())).filter((e=>!!e)):Array.prototype.slice.call(this.data.files||[])}getData(e){return this.data.getData(e)}hasFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).some((({kind:e})=>"file"===e)):!!Array.prototype.slice.call(this.data.files||[]).length}}},89923:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.startOfDaySkew;if(void 0!==t&&t>n.default.skew-30&&t<n.default.skew+30)return e.startOfDay;return e.startOfDaySkew=n.default.skew,e.startOfDay=i.default.unix(e.t+n.default.skew).startOf("day").unix()};var i=a(s(30381)),n=a(s(25142))},26821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.pause(),e.src="",e.remove()}},73554:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.scrollIntoViewIfNeeded=function(e,t=!0,s){if(e.scrollIntoViewIfNeeded&&(0,n.isFunction)(e.scrollIntoViewIfNeeded))return e.scrollIntoViewIfNeeded(t);const a=o(s||e.parentNode),i=window.getComputedStyle(a,null),r=parseInt(i.getPropertyValue("border-top-width"),10),l=e.offsetTop-a.offsetTop<a.scrollTop,d=e.offsetTop-a.offsetTop+e.clientHeight-r>a.scrollTop+a.clientHeight;(l||d)&&t&&(a.scrollTop=e.offsetTop-a.offsetTop-a.clientHeight/2-r+e.clientHeight/2);!l&&!d||t||e.scrollIntoView(l&&!d);return!(l||d)},t.scrollIntoView=function(e,t=!0,s){const a=o(s||e.parentNode),i=window.getComputedStyle(a,null),n=parseInt(i.getPropertyValue("border-top-width"),10),r=e.offsetTop-a.offsetTop<a.scrollTop,l=e.offsetTop-a.offsetTop+e.clientHeight-n>a.scrollTop+a.clientHeight;t?a.scrollTop=e.offsetTop-a.offsetTop-a.clientHeight/2-n+e.clientHeight/2:e.scrollIntoView(r&&!l);return!(r||l)},t.scrollAt=function(e,t,s={}){const a=o(t||e.offsetParent),i=s.pos||"center",n=null!=s.duration&&0!==s.duration?s.duration:1e3,l=s.offset||0;switch(i){case"top":return a.scrollTop=e.offsetTop+l,Promise.resolve();case"bottom":return a.scrollTop=e.offsetTop+e.clientHeight-a.clientHeight,Promise.resolve();case"center":return s.animate?((0,r.default)(e,"stop"),(0,r.default)(a,"stop"),(0,r.default)(e,"scroll",{duration:n,container:a,offset:(e.clientHeight-a.clientHeight)/2,easing:s.easing})):(a.scrollTop=e.offsetTop+e.clientHeight/2-a.clientHeight/2,Promise.resolve());case"offset":return s.animate?((0,r.default)(e,"stop"),(0,r.default)(a,"stop"),(0,r.default)(e,"scroll",{duration:n,container:a,offset:-l,easing:s.easing})):(a.scrollTop=e.offsetTop-l,Promise.resolve())}return Promise.resolve()},t.sanitizeNoticeText=function(e){return i.default.sanitize(e,{ALLOWED_TAGS:["b","i","a","#text"],ALLOWED_ATTR:["href"],KEEP_CONTENT:!1})},t.sanitizeNoticeSVG=function(e){return i.default.sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})};var i=a(s(27856)),n=s(74289),r=a(s(45285));function o(e){if(e&&e instanceof HTMLElement)return e;throw new Error("utils:DOM parent not defined or is not a valid HTMLElement")}},58134:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(95863));const n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},r=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],l=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","msfullscreenchange","msfullscreenerror"];let d,u;class c extends i.default{constructor(){if(super(),this.requestFullscreen=e=>{e?d?e[d[n.requestFullscreen]]():__LOG__(3)`Your browser does not support fullscreen API.`:__LOG__(3)`The element requesting fullscreen is null or undefined.`},this._fullscreenChangeTrigger=e=>{this.trigger("fullscreen_change",e)},this._fullscreenErrorTrigger=e=>{this.trigger("fullscreen_error",e)},"object"!=typeof window||"object"!=typeof window.document)return void __LOG__(3)`document object does not exist`;u=window.document;const e=u;if("fullscreenEnabled"in u?d=Object.keys(n):r[n.fullscreenEnabled]in u?d=r:o[n.fullscreenEnabled]in u?d=o:l[n.fullscreenEnabled]in u&&(d=l),!d)return void __LOG__(3)`Your browser does not support fullscreen API.`;const t=d;e.addEventListener(t[n.fullscreenchange],this._fullscreenChangeTrigger),e.addEventListener(t[n.fullscreenerror],this._fullscreenErrorTrigger)}get exitFullscreen(){return u?d?u[d[n.exitFullscreen]].bind(u):(__LOG__(3)`Your browser does not support fullscreen API.`,()=>{}):(__LOG__(3)`document object does not exist`,()=>{})}get isFullscreenMode(){return u?d?!!u[d[n.fullscreenElement]]:(__LOG__(3)`Your browser does not support fullscreen API.`,!1):(__LOG__(3)`document object does not exist`,!1)}get fullscreenEnabled(){return u?d?Boolean(u[d[n.fullscreenEnabled]]):(__LOG__(3)`Your browser does not support fullscreen API.`,!1):(__LOG__(3)`document object does not exist`,!1)}get fullscreenElement(){if(u){if(d)return u[d[n.fullscreenElement]];__LOG__(3)`Your browser does not support fullscreen API.`}else __LOG__(3)`document object does not exist`}}var h=new c;t.default=h},50470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=t.parentNode;if(!s)return;if(t.nextSibling)return void s.insertBefore(e,t.nextSibling);return s.appendChild(e),e}},30672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.parentNode)return;return t.parentNode.insertBefore(e,t),e}},50204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;const s=e.parentElement;if(!s)return!1;const a=t>=0?t:s.childNodes.length+t;return e===s.childNodes[a]}},52019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(e.nodeType===Node.TEXT_NODE&&0===e.textContent.length)}},63794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.parentNode)return;e.parentNode.removeChild(e)}},33200:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;const t=window.getSelection();if(1!==t.rangeCount)return!1;const s=t.getRangeAt(0);if(!s.collapsed)return!1;const a=s.endContainer;if(s.startOffset!==function(e){return(0,i.default)(e)?e.textContent.length:e.childNodes.length}(a))return!1;if(e===a)return!0;if(!e.contains(a))return!1;let n=a;do{if(n.nextSibling)return!1;n=n.parentNode}while(n!==e);return!0};var i=a(s(53377))},9355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;const t=window.getSelection();if(1!==t.rangeCount)return!1;const s=t.getRangeAt(0);if(!s.collapsed||0!==s.startOffset)return!1;const a=s.startContainer;if(e===a)return!0;if(!e.contains(a))return!1;let i=a;do{if(i.previousSibling)return!1;i=i.parentNode}while(i!==e);return!0}},65691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=window.getSelection();if(1!==e.rangeCount)return!1;const t=e.getRangeAt(0);return!!t.collapsed&&(e.removeAllRanges(),e.addRange(t),!0)}},79923:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s=e;if(!s)return;do{s=t===n.NEXT?s.nextSibling:s.previousSibling}while(s&&(0,i.default)(s));return s},t.DIR=void 0;var i=a(s(52019));const n={NEXT:"NEXT",PREV:"PREV"};t.DIR=n},32994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.__playPromise)return e.__playPromise;const t=new Promise(((t,s)=>{function a(s){e.removeEventListener("playing",a),e.removeEventListener("error",i),e.videoHeight&&e.videoWidth||a(s),delete e.__playPromise,t(s)}function i(t){e.removeEventListener("playing",a),e.removeEventListener("error",i),delete e.__playPromise,s(t)}e.addEventListener("playing",a),e.addEventListener("error",i);const n=e.play();var r;(r=n)&&"function"==typeof r.then&&(e.removeEventListener("playing",a),e.removeEventListener("error",i),n.then((()=>{delete e.__playPromise,t()})).catch((t=>{delete e.__playPromise,s(t)})))}));return e.__playPromise=t,t}},60057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SMILEYS_PEOPLE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ANIMALS_NATURE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FOOD_DRINK:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ACTIVITY:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],TRAVEL_PLACES:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],OBJECTS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SYMBOLS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FLAGS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},23221:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#":1,"":1,"*":2,"0":3,"":3,"1":4,"":4,"2":5,"":5,"3":6,"":6,"4":7,"":7,"5":8,"":8,"6":9,"":9,"7":10,"":10,"8":11,"":11,"9":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":80,"":81,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":93,"":94,"":95,"":96,"":97,"":100,"":109,"":110,"":116,"":117,"":118,"":121,"":127,"":130,"":131,"":133,"":154,"":155,"":156,"":158,"":160,"":166,"":177,"":190,"":191,"":192,"":195,"":197,"":198,"":199,"":200,"":202,"":208,"":210,"":213,"":214,"":215,"":218,"":219,"":221,"":222,"":223,"":224,"":226,"":227,"":228,"":229,"":230,"":232,"":234,"":235,"":237,"":239,"":240,"":289,"":299,"":312,"":320,"":322,"":356,"":360,"":368,"":437,"":481,"":481,"":499,"":500,"":501,"":502,"":504,"":506,"":507,"":508,"":509,"":510,"":511,"":512,"":514,"":516,"":517,"":518,"":519,"":520,"":521,"":522,"":524,"":539,"":545,"":564,"":565,"":567,"":568,"":569,"":570,"":571,"":574,"":576,"":577,"":578,"":579,"":581,"":582,"":585,"":586,"":590,"":595,"":596,"":600,"":601,"":602,"":603,"":604,"":605,"":606,"":607,"":609,"":610,"":611,"":614,"":615,"":624,"":625,"":626,"":627,"":628,"":629,"":630,"":632,"":634,"":635,"":640,"":641,"":642,"":643,"":644,"":645,"":651,"":652,"":653,"":654,"":657,"":658,"":659,"":660,"":661,"":662,"":663,"":664,"":673,"":674,"":676,"":677,"":678,"":679,"":680,"":681,"":683,"":684,"":687,"":688,"":689,"":693,"":694,"":695,"":696,"":698,"":702,"":703,"":704,"":705,"":712,"":730,"":749,"":756,"":758,"":831,"":833,"":834,"":836,"":837,"":838,"":839,"":840,"":841,"":842,"":843,"":844,"":846,"":847,"":853,"":854,"":855,"":880,"":881,"":884,"":885,"":887,"":891,"":892,"":893,"":894,"":895,"":899,"":900,"":904,"":906,"":907,"":908,"":911,"":912,"":913,"":914,"":915,"":916,"":917,"":919,"":920,"":921,"":922,"":923,"":924,"":925,"":926,"":927,"":933,"":936,"":942,"":948,"":950,"":956,"":962,"":968,"":974,"":980,"":986,"":992,"":998,"":1004,"":1010,"":1016,"":1017,"":1019,"":1020,"":1022,"":1023,"":1024,"":1027,"":1030,"":1031,"":1032,"":1033,"":1034,"":1037,"":1043,"":1049,"":1286,"":1591,"":1609,"":1627,"":1648,"":1666,"":1672,"":1690,"":1696,"":1702,"":1708,"":1726,"":1734,"":1735,"":1741,"":1742,"":1743,"":1744,"":1745,"":1763,"":1781,"":1787,"":1788,"":1794,"":1812,"":1830,"":1831,"":1832,"":1833,"":1835,"":1836,"":1837,"":1843,"":1844,"":1850,"":1851,"":1852,"":1855,"":1856,"":1857,"":1858,"":1859,"":1860,"":1861,"":1863,"":1865,"":1866,"":1867,"":1868,"":1870,"":1872,"":1873,"":1874,"":1885,"":1886,"":1894,"":1895,"":1896,"":1897,"":1898,"":1900,"":1901,"":1923,"":1930,"":1933,"":1934,"":1935,"":1936,"":1942,"":1944,"":1947,"":1950,"":1951,"":1952,"":1953,"":1955,"":1956,"":1959,"":1960,"":1961,"":1974,"":1977,"":1981,"":1982,"":1983,"":1984,"":1993,"":1994,"":2001,"":2004,"":2007,"":2011,"":2012,"":2013,"":2014,"":2015,"":2016,"":2032,"":2033,"":2034,"":2035,"":2036,"":2037,"":2038,"":2039,"":2040,"":2041,"":2042,"":2043,"":2137,"":2138,"":2139,"":2143,"":2144,"":2145,"":2146,"":2151,"":2152,"":2154,"":2155,"":2157,"":2160,"":2161,"":2162,"":2164,"":2166,"":2168,"":2170,"":2171,"":2172,"":2174,"":2175,"":2176,"":2177,"":2179,"":2182,"":2184,"":2187,"":2191,"":2192,"":2193,"":2194,"":2200,"":2214,"":2232,"":2250,"":2289,"":2331,"":2337,"":2340,"":2341,"":2342,"":2344,"":2346,"":2349,"":2352,"":2354,"":2355,"":2356,"":2358,"":2360,"":2362,"":2363,"":2371,"":2390,"":2391,"":2393,"":2398,"":2399,"":2404,"":2442,"":2462,"":2463,"":2464,"":2465,"":2466,"":2467,"":2469}},6427:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#","*","0","1","2","3","4","5","6","7","8","9","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},64939:(e,t)=>{"use strict";t.Z=void 0;t.Z={SMILEYS_PEOPLE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ANIMALS_NATURE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FOOD_DRINK:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ACTIVITY:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],TRAVEL_PLACES:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],OBJECTS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SYMBOLS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FLAGS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},26930:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#":1,"":1,"*":2,"0":3,"":3,"1":4,"":4,"2":5,"":5,"3":6,"":6,"4":7,"":7,"5":8,"":8,"6":9,"":9,"7":10,"":10,"8":11,"":11,"9":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":92,"":93,"":95,"":96,"":97,"":98,"":99,"":102,"":112,"":113,"":119,"":120,"":121,"":124,"":130,"":133,"":134,"":136,"":152,"":153,"":154,"":156,"":158,"":164,"":175,"":188,"":189,"":190,"":193,"":195,"":196,"":197,"":198,"":200,"":206,"":208,"":211,"":212,"":213,"":216,"":217,"":219,"":220,"":221,"":222,"":224,"":225,"":226,"":227,"":228,"":230,"":232,"":233,"":235,"":237,"":238,"":287,"":297,"":310,"":318,"":320,"":354,"":358,"":366,"":435,"":479,"":479,"":497,"":498,"":499,"":500,"":502,"":504,"":505,"":506,"":507,"":508,"":509,"":510,"":512,"":514,"":515,"":516,"":517,"":518,"":519,"":520,"":522,"":537,"":543,"":562,"":563,"":565,"":566,"":567,"":568,"":569,"":572,"":574,"":575,"":576,"":577,"":579,"":580,"":583,"":584,"":588,"":593,"":594,"":598,"":599,"":600,"":601,"":602,"":603,"":604,"":605,"":607,"":608,"":609,"":612,"":613,"":622,"":623,"":624,"":625,"":626,"":627,"":628,"":630,"":632,"":633,"":638,"":639,"":640,"":641,"":642,"":643,"":649,"":650,"":651,"":652,"":655,"":656,"":657,"":658,"":659,"":660,"":661,"":662,"":671,"":672,"":674,"":675,"":676,"":677,"":678,"":679,"":681,"":682,"":685,"":686,"":687,"":691,"":692,"":693,"":694,"":696,"":700,"":701,"":702,"":703,"":705,"":718,"":732,"":739,"":741,"":798,"":800,"":801,"":803,"":804,"":805,"":806,"":807,"":808,"":809,"":810,"":811,"":813,"":814,"":821,"":822,"":823,"":824,"":849,"":850,"":853,"":854,"":856,"":860,"":861,"":862,"":863,"":864,"":868,"":869,"":873,"":875,"":876,"":877,"":880,"":881,"":882,"":883,"":884,"":885,"":886,"":888,"":889,"":890,"":891,"":892,"":893,"":894,"":895,"":896,"":902,"":905,"":911,"":917,"":919,"":925,"":931,"":937,"":943,"":949,"":955,"":961,"":967,"":973,"":979,"":985,"":986,"":988,"":989,"":991,"":992,"":993,"":996,"":999,"":1e3,"":1001,"":1002,"":1003,"":1006,"":1012,"":1018,"":1195,"":1390,"":1462,"":1480,"":1486,"":1492,"":1510,"":1518,"":1519,"":1525,"":1526,"":1527,"":1528,"":1553,"":1559,"":1560,"":1590,"":1591,"":1592,"":1593,"":1595,"":1596,"":1597,"":1598,"":1599,"":1600,"":1601,"":1602,"":1605,"":1606,"":1607,"":1608,"":1609,"":1610,"":1611,"":1613,"":1615,"":1616,"":1617,"":1618,"":1620,"":1622,"":1623,"":1624,"":1635,"":1636,"":1644,"":1645,"":1646,"":1647,"":1648,"":1650,"":1651,"":1673,"":1680,"":1683,"":1684,"":1685,"":1686,"":1692,"":1694,"":1697,"":1700,"":1701,"":1702,"":1703,"":1705,"":1706,"":1709,"":1710,"":1711,"":1724,"":1727,"":1731,"":1732,"":1733,"":1734,"":1743,"":1744,"":1751,"":1754,"":1757,"":1761,"":1762,"":1763,"":1764,"":1765,"":1766,"":1782,"":1783,"":1784,"":1785,"":1786,"":1787,"":1788,"":1789,"":1790,"":1791,"":1792,"":1793,"":1881,"":1882,"":1883,"":1887,"":1888,"":1889,"":1890,"":1895,"":1896,"":1898,"":1899,"":1901,"":1904,"":1905,"":1906,"":1908,"":1910,"":1912,"":1914,"":1915,"":1916,"":1918,"":1919,"":1920,"":1921,"":1923,"":1926,"":1928,"":1931,"":1935,"":1936,"":1937,"":1938,"":1944,"":2009,"":2039,"":2045,"":2048,"":2049,"":2050,"":2052,"":2054,"":2057,"":2060,"":2062,"":2063,"":2064,"":2066,"":2068,"":2070,"":2071,"":2079,"":2093,"":2094,"":2096,"":2101,"":2102,"":2107,"":2135,"":2150,"":2151,"":2152,"":2153,"":2154,"":2155,"":2157,"":1409,"":1420,"":1451,"":1469,"":1499,"":1529,"":1542,"":1566,"":1578,"":1958,"":1970,"":1983}},32273:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#","*","0","1","2","3","4","5","6","7","8","9","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},98741:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,u.default)(e,(0,h.default)(g,"Emoji Trie expected to be loaded."))};var n=i(s(48926)),r=i(s(44908)),o=s(8139),l=s(99935),d=i(s(12959)),u=a(s(75796)),c=i(s(2408)),h=i(s(91619)),f=a(s(46364)),p=a(s(77062)),m=i(s(18051));const _=new Set(["ar","bn","cs","de","en","es","fa","fr","gu","he","hi","hu","id","it","mr","ms","nl","pl","pt","pt-BR","ro","ru","sk","th","tr","uk","ur","zh-CN","zh-TW","zh-HK"]);let g=null;let v=null,S=[];function C(){const e=(0,r.default)(["en",c.default.getLocale()]).filter((e=>_.has(e)));if((0,d.default)(S,e))return;S=e;const t=Promise.all(e.map((e=>function(e){return(0,l.promiseLoop)(function(){var t=(0,n.default)((function*(t,a,i){const n=(0,o.delayMs)(p.expBackoff(i,12e4,1e3,.1)),r=yield s(26299)(`./${e}`);try{const[,e]=yield r.default();return t(e)}catch(e){return n}}));return function(){return t.apply(this,arguments)}}()).catch((()=>({})))}(e)))).then((e=>{v===t&&(g=(0,u.emojiLocaleDictsToTrie)(e))})).catch((()=>{})).finally((()=>{v===t&&(v=null)}));v=t}c.default.on("locale_change",(()=>{C()})),(0,m.default)(f.default,"change:mode",(()=>f.default.mode===f.StreamMode.MAIN)).then((()=>{C()}))},75796:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s=[];if(e){const a=function(e,t){const s=function(e,t){if(!t)return[];if(e.length<=5)return t.getMatches(e);const s=e.substring(0,5).trim();let a=t.getMatches(s);return a=(0,u.default)(a,(t=>t.keyword.startsWith(e))),a}(e,t),a=g((0,d.default)(s,(e=>e.value))),i=g((0,d.default)(s.filter((t=>t.keyword===e)),(e=>e.value))),n=(0,l.default)(g(f.default.map((e=>e.id))),a),r=(0,l.default)(g(m),a),c=(0,l.default)((0,o.default)(n,r),i);return(0,o.default)(c,S(i),n,r,S(a))}(e.toLowerCase(),t);s=(0,c.default)(a)}return s},t.emojiLocaleDictsToTrie=function(e){let t=e[0];e.length>1&&(t=(0,i.default)((0,i.default)({},t),e[1]));return function(e,t){const s=p.default.fromForwardsStrings(e.map((e=>e[t])),e);return{getMatches:e=>s.search(e)}}((0,n.default)(t,((e,t)=>{const s=t.toLowerCase(),a=s.substring(0,5);return{value:e,keyword:s,shortKeyword:a}})),"shortKeyword")};var i=a(s(81109)),n=a(s(35161)),r=a(s(51463)),o=a(s(93386)),l=a(s(25325)),d=a(s(94654)),u=a(s(63105)),c=a(s(44908)),h=a(s(2561)),f=a(s(30462)),p=a(s(81075));const m=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function g(e){return e.map(h.default.normalizeEmoji).filter(Boolean)}const v=(0,r.default)((()=>{const e=new Map;let t=0;for(const s of _){const a=h.default.getEmojisInCategory(s);for(const s of a)e.set(s,t),t++}return e}));function S(e){const t=v();return[...e].sort(((e,s)=>{var a,i;return(null!==(a=t.get(e))&&void 0!==a?a:Number.MAX_SAFE_INTEGER)-(null!==(i=t.get(s))&&void 0!==i?i:Number.MAX_SAFE_INTEGER)}))}},43600:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e===r)return;r=e;const[t,a,o]=e===i.EMOJI_TYPE.APPLE?[s(6427).Z,s(23221).Z,s(60057).default]:[s(32273).Z,s(26930).Z,s(64939).Z];n.default.configure({emojiType:e,orderedEmojis:t,legacyToEmoji:a,categorizedEmojis:o})};var i=s(22306),n=a(s(2561));let r},33906:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDurations=function(){const e=[];(0,r.isEphemeral24HDurationEnabled)()?(e.push({value:24*i.HOUR_SECONDS,label:n.default.t(873,{number:24,_plural:24})}),e.push({value:7*i.DAY_SECONDS,label:n.default.t(872,{number:7,_plural:7})}),e.push({value:90*i.DAY_SECONDS,label:n.default.t(872,{number:90,_plural:90})})):e.push({value:7*i.DAY_SECONDS,label:n.default.t(871)});return e.push({value:0,label:n.default.t(870)}),e};var i=s(57148),n=a(s(2408)),r=s(21134)},31140:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDisappearingMessageSettingOthersString=function(e=0,t){return l(o.SettingChangeByOthers,e,t)},t.getDisappearingMessageSettingYouString=function(e=0){return l(o.SettingChangeByYou,e)},t.getDisappearingMessageSettingUnknownString=function(e=0){return l(o.SettingChangeByUnknown,e)},t.getDisappearingMessageSettingOthersAsAdminString=function(e=0,t){return l(o.SettingChangeByOthersAsAdmin,e,t)},t.getDisappearingMessageSettingYouAsAdminString=function(e=0){return l(o.SettingChangeByYouAsAdmin,e)},t.getDisappearingMessageSettingUnknownAsAdminString=function(e=0){return l(o.SettingChangeByUnknownAsAdmin,e)},t.getDisappearingMessageDurationString=function(e=0){return l(o.Duration,e)},t.getDisappearingMessageOutOfSyncInfoString=function(e=0){return l(o.OutOfSyncInfo,e)},t.getDisappearingMessageExplanationString=function(e=0){return l(o.Explanation,e)},t.getDisappearingModeOtherString=function(e=0,t){return l(o.ModeChangeByOthers,e,t)},t.getDisappearingModeYouString=function(e=0){return l(o.ModeChangeByYou,e)},t.EphemeralL10n=function(e){const{type:t,numSeconds:s=0,name:a}=e;if(s<0)return __LOG__(4,void 0,new Error,!0)`getEphemeralL10nComponent ${t} is given invalid duration ${s}`,SEND_LOGS("invalid-duration"),null;if(0===s)return function(e,t){return e===o.SettingChangeByOthers&&null!=t?(0,r.jsx)(n.default,{id:827,params:{name:t}}):e===o.SettingChangeByYou?(0,r.jsx)(n.default,{id:822}):e===o.SettingChangeByUnknown?(0,r.jsx)(n.default,{id:817}):e===o.SettingChangeByOthersAsAdmin&&null!=t?(0,r.jsx)(n.default,{id:842,params:{name:t}}):e===o.SettingChangeByYouAsAdmin?(0,r.jsx)(n.default,{id:837}):e===o.SettingChangeByUnknownAsAdmin?(0,r.jsx)(n.default,{id:832}):e===o.Duration?(0,r.jsx)(n.default,{id:870}):e===o.OutOfSyncInfo?(0,r.jsx)(n.default,{id:856}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOffL10nComponent is given invalid type ${e}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,a);if(s<=60)return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:831,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYou?(0,r.jsx)(n.default,{id:826,params:{number:t},plural:t}):e===o.SettingChangeByUnknown?(0,r.jsx)(n.default,{id:821,params:{number:t},plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?(0,r.jsx)(n.default,{id:846,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYouAsAdmin?(0,r.jsx)(n.default,{id:841,params:{number:t},plural:t}):e===o.SettingChangeByUnknownAsAdmin?(0,r.jsx)(n.default,{id:836,params:{number:t},plural:t}):e===o.Duration?(0,r.jsx)(n.default,{id:875,params:{number:t},plural:t}):e===o.OutOfSyncInfo?(0,r.jsx)(n.default,{id:860,params:{number:t},plural:t}):e===o.Explanation?(0,r.jsx)(n.default,{id:852,params:{number:t},plural:t}):e===o.ModeChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:772,params:{name:s,number:t},plural:t}):e===o.ModeChangeByYou?(0,r.jsx)(n.default,{id:776,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnSecondsL10nComponent is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,s,a);if(s<=3600){const e=Math.floor(s/60);return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:830,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYou?(0,r.jsx)(n.default,{id:825,params:{number:t},plural:t}):e===o.SettingChangeByUnknown?(0,r.jsx)(n.default,{id:820,params:{number:t},plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?(0,r.jsx)(n.default,{id:845,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYouAsAdmin?(0,r.jsx)(n.default,{id:840,params:{number:t},plural:t}):e===o.SettingChangeByUnknownAsAdmin?(0,r.jsx)(n.default,{id:835,params:{number:t},plural:t}):e===o.Duration?(0,r.jsx)(n.default,{id:874,params:{number:t},plural:t}):e===o.OutOfSyncInfo?(0,r.jsx)(n.default,{id:859,params:{number:t},plural:t}):e===o.Explanation?(0,r.jsx)(n.default,{id:851,params:{number:t},plural:t}):e===o.ModeChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:771,params:{name:s,number:t},plural:t}):e===o.ModeChangeByYou?(0,r.jsx)(n.default,{id:775,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnMinutesL10nComponent is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,e,a)}if(s<=86400){const e=Math.floor(s/60/60);return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:829,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYou?(0,r.jsx)(n.default,{id:824,params:{number:t},plural:t}):e===o.SettingChangeByUnknown?(0,r.jsx)(n.default,{id:819,params:{number:t},plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?(0,r.jsx)(n.default,{id:844,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYouAsAdmin?(0,r.jsx)(n.default,{id:839,params:{number:t},plural:t}):e===o.SettingChangeByUnknownAsAdmin?(0,r.jsx)(n.default,{id:834,params:{number:t},plural:t}):e===o.Duration?(0,r.jsx)(n.default,{id:873,params:{number:t},plural:t}):e===o.OutOfSyncInfo?(0,r.jsx)(n.default,{id:858,params:{number:t},plural:t}):e===o.Explanation?(0,r.jsx)(n.default,{id:850,params:{number:t},plural:t}):e===o.ModeChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:770,params:{name:s,number:t},plural:t}):e===o.ModeChangeByYou?(0,r.jsx)(n.default,{id:774,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnHoursL10nComponent is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,e,a)}{const e=Math.floor(s/24/60/60);return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:828,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYou?(0,r.jsx)(n.default,{id:823,params:{number:t},plural:t}):e===o.SettingChangeByUnknown?(0,r.jsx)(n.default,{id:818,params:{number:t},plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?(0,r.jsx)(n.default,{id:843,params:{name:s,number:t},plural:t}):e===o.SettingChangeByYouAsAdmin?(0,r.jsx)(n.default,{id:838,params:{number:t},plural:t}):e===o.SettingChangeByUnknownAsAdmin?(0,r.jsx)(n.default,{id:833,params:{number:t},plural:t}):e===o.Duration?(0,r.jsx)(n.default,{id:872,params:{number:t},plural:t}):e===o.OutOfSyncInfo?(0,r.jsx)(n.default,{id:857,params:{number:t},plural:t}):e===o.Explanation?(0,r.jsx)(n.default,{id:849,params:{number:t},plural:t}):e===o.ModeChangeByOthers&&null!=s?(0,r.jsx)(n.default,{id:769,params:{name:s,number:t},plural:t}):e===o.ModeChangeByYou?(0,r.jsx)(n.default,{id:773,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnDaysL10nComponent is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,e,a)}},t.EphemeralStringType=void 0;var i=a(s(2408)),n=a(s(663)),r=s(85893);const o=s(54302).Mirrored(["SettingChangeByOthers","SettingChangeByYou","SettingChangeByUnknown","SettingChangeByOthersAsAdmin","SettingChangeByYouAsAdmin","SettingChangeByUnknownAsAdmin","Duration","OutOfSyncInfo","Explanation","ModeChangeByOthers","ModeChangeByYou"]);function l(e,t=0,s){if(t<0)return __LOG__(4,void 0,new Error,!0)`getEphemeralString ${e} is given invalid duration ${t}`,SEND_LOGS("invalid-duration"),"";if(0===t)return function(e,t){return e===o.SettingChangeByOthers&&null!=t?i.default.t(827,{name:t}):e===o.SettingChangeByYou?i.default.t(822):e===o.SettingChangeByUnknown?i.default.t(817):e===o.SettingChangeByOthersAsAdmin&&null!=t?i.default.t(842,{name:t}):e===o.SettingChangeByYouAsAdmin?i.default.t(837):e===o.SettingChangeByUnknownAsAdmin?i.default.t(832):e===o.Duration?i.default.t(870):e===o.OutOfSyncInfo?i.default.t(856):(__LOG__(4,void 0,new Error,!0)`getEphemeralOffString is given invalid type ${e}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,s);if(t<=60)return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?i.default.t(831,{name:s,number:t,_plural:t}):e===o.SettingChangeByYou?i.default.t(826,{number:t,_plural:t}):e===o.SettingChangeByUnknown?i.default.t(821,{number:t,_plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?i.default.t(846,{name:s,number:t,_plural:t}):e===o.SettingChangeByYouAsAdmin?i.default.t(841,{number:t,_plural:t}):e===o.SettingChangeByUnknownAsAdmin?i.default.t(836,{number:t,_plural:t}):e===o.Duration?i.default.t(875,{number:t,_plural:t}):e===o.OutOfSyncInfo?i.default.t(860,{number:t,_plural:t}):e===o.Explanation?i.default.t(852,{number:t,_plural:t}):e===o.ModeChangeByOthers?i.default.t(772,{name:s,number:t,_plural:t}):e===o.ModeChangeByYou?i.default.t(776,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnSecondsString is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,t,s);if(t<=3600){return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?i.default.t(830,{name:s,number:t,_plural:t}):e===o.SettingChangeByYou?i.default.t(825,{number:t,_plural:t}):e===o.SettingChangeByUnknown?i.default.t(820,{number:t,_plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?i.default.t(845,{name:s,number:t,_plural:t}):e===o.SettingChangeByYouAsAdmin?i.default.t(840,{number:t,_plural:t}):e===o.SettingChangeByUnknownAsAdmin?i.default.t(835,{number:t,_plural:t}):e===o.Duration?i.default.t(874,{number:t,_plural:t}):e===o.OutOfSyncInfo?i.default.t(859,{number:t,_plural:t}):e===o.Explanation?i.default.t(851,{number:t,_plural:t}):e===o.ModeChangeByOthers?i.default.t(771,{name:s,number:t,_plural:t}):e===o.ModeChangeByYou?i.default.t(775,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnMinutesString is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60),s)}if(t<=86400){return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?i.default.t(829,{name:s,number:t,_plural:t}):e===o.SettingChangeByYou?i.default.t(824,{number:t,_plural:t}):e===o.SettingChangeByUnknown?i.default.t(819,{number:t,_plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?i.default.t(844,{name:s,number:t,_plural:t}):e===o.SettingChangeByYouAsAdmin?i.default.t(839,{number:t,_plural:t}):e===o.SettingChangeByUnknownAsAdmin?i.default.t(834,{number:t,_plural:t}):e===o.Duration?i.default.t(873,{number:t,_plural:t}):e===o.OutOfSyncInfo?i.default.t(858,{number:t,_plural:t}):e===o.Explanation?i.default.t(850,{number:t,_plural:t}):e===o.ModeChangeByOthers?i.default.t(770,{name:s,number:t,_plural:t}):e===o.ModeChangeByYou?i.default.t(774,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnHoursString is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60/60),s)}return function(e,t,s){return e===o.SettingChangeByOthers&&null!=s?i.default.t(828,{name:s,number:t,_plural:t}):e===o.SettingChangeByYou?i.default.t(823,{number:t,_plural:t}):e===o.SettingChangeByUnknown?i.default.t(818,{number:t,_plural:t}):e===o.SettingChangeByOthersAsAdmin&&null!=s?i.default.t(843,{name:s,number:t,_plural:t}):e===o.SettingChangeByYouAsAdmin?i.default.t(838,{number:t,_plural:t}):e===o.SettingChangeByUnknownAsAdmin?i.default.t(833,{number:t,_plural:t}):e===o.Duration?i.default.t(872,{number:t,_plural:t}):e===o.OutOfSyncInfo?i.default.t(857,{number:t,_plural:t}):e===o.Explanation?i.default.t(849,{number:t,_plural:t}):e===o.ModeChangeByOthers?i.default.t(769,{name:s,number:t,_plural:t}):e===o.ModeChangeByYou?i.default.t(773,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)`getEphemeralOnDaysString is given type ${e} and name ${s}`,SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/24/60/60),s)}t.EphemeralStringType=o},54432:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=function(e,t){const s=e.target.files||e.dataTransfer&&e.dataTransfer.files;let a=s?Array.from(s):[];if(t){const e=("string"==typeof t?[t]:t).map((e=>new RegExp(e)));a=a.filter((t=>e.some((e=>t.type.match(e)))))}if(a.length)return Promise.resolve(a);const o=e.dataTransfer;if(o&&o.getData("text/uri-list"))return r.urlToFile(o.getData("text/uri-list")).then((e=>[(0,n.createFile)([e],"",{type:e.type})]));if(o&&o.getData("text/html")){const e=(new DOMParser).parseFromString(o.getData("text/html"),"text/html");if(e.createNodeIterator(e.childNodes[0],NodeFilter.SHOW_TEXT).nextNode()){if(o.getData("text/plain"))return Promise.reject(new i.MediaDragDropError("dropped html has text nodes"))}else{const t=e.getElementsByTagName("img");if(t.length)return r.urlToFile(t[0].src).then((e=>[(0,n.createFile)([e],"",{type:e.type})]))}}return Promise.resolve([])};var i=a(s(13540)),n=s(57085),r=a(s(49288))},97227:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AllowedFileExtensions",{enumerable:!0,get:function(){return f.AllowedFileExtensions}}),t.default=void 0;var i=a(s(94666)),n=a(s(91952)),r=a(s(75940)),o=a(s(55454)),l=s(14361),d=a(s(2380)),u=a(s(2408)),c=a(s(23407)),h=s(85893),f=s(85097);var p=new class{downloadData(e,t,s){const a=window.URL.createObjectURL(e),i=(0,l.createDataLink)(a);return i.style.display="none",i.download=`${t}${s}`,document.body&&document.body.appendChild(i),i.click(),document.body&&document.body.removeChild(i),(0,c.default)(100).then((()=>{window.URL.revokeObjectURL(i.href)})),Promise.resolve()}initDownload(e){let t=e;if(!window.Modernizr.adownload){const e=u.default.t(2238,{chrome_homepage:o.default.BROWSER_LINK.CHROME,firefox_homepage:o.default.BROWSER_LINK.FIREFOX,opera_homepage:o.default.BROWSER_LINK.OPERA});return n.default.openModal((0,h.jsx)(r.default,{onOK:()=>n.default.closeModal(),okText:u.default.t(2085),children:e})),__LOG__(4,void 0,new Error,!0)`Assertion failed!`,void SEND_LOGS("safari, adownload is false in download mgr")}i.default.startDownloading(),(0,d.default)(t).then((e=>{e.url||e.blob||(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${Array.isArray(t)?"download a zip file":`download ${t.id.toString()} type ${t.type} with state ${t.mediaData&&t.mediaData.mediaStage}`}`,SEND_LOGS("download-url-creation-error"));const s=e.url||window.URL.createObjectURL(e.blob),a=(0,l.createDataLink)(s);a.download=e.name,a.style.display="none",Array.isArray(t)&&1===t.length&&(t=t[0]),a.href||(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${Array.isArray(t)?"download a zip file":`download ${t.id.toString()} type ${t.type} with state ${t.mediaData&&t.mediaData.mediaStage}`}`,SEND_LOGS("no-download-url")),document.body&&document.body.appendChild(a),a.click(),document.body&&document.body.removeChild(a),e.url||(0,c.default)(100).then((()=>{window.URL.revokeObjectURL(a.href)}))})).catch((e=>{__LOG__(3)`Download failed, error: ${String(e)}`}))}};t.default=p},85097:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;const a=s(54302)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=a},12006:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(48403)),n=a(s(30381)),r=a(s(25142)),o=a(s(55454)),l=a(s(2408)),d=s(38961),u=s(50313),c={getDefaultName(e){let t;if(e.type===o.default.MSG_TYPE.DOCUMENT){const s=(e.filename||"").trim();t=s||(e.caption||"").trim()||l.default.t(1736),s&&function(e){return/[\.].{1,4}$/.test(e)}(s)||(t=h(t,e))}else e.type===o.default.MSG_TYPE.VCARD?(t=(e.vcardFormattedName||"").trim()||f(e),t=h(t,e)):e.type===o.default.MSG_TYPE.MULTI_VCARD?(t=e.vcardList?(0,u.getNameString)(e.vcardList):f(e),t=h(t,e)):(t=f(e),t=h(t,e));return t}};function h(e,t){let s=e;const a=t.type===o.default.MSG_TYPE.VCARD||t.type===o.default.MSG_TYPE.MULTI_VCARD?"text/vcard":t.mimetype,i=(0,d.getExtension)(a);return s.endsWith(i)||(s+=i),s}function f(e){const t=n.default.unix(e.t).locale("en"),s=`${t.format("YYYY-MM-DD")} at ${t.format(r.default.getIs24Hour()?"HH.mm.ss":"h.mm.ss A")}`;return`WhatsApp ${(0,i.default)(e.type)} ${s}`}t.default=c},68551:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldedContactName=t.HeaderAndFooter=t.UntrustedGroupDesc=t.TrustedGroupDesc=t.FormattedGroupNotification=t.RawGroupNotification=t.FormattedNotification=t.RawNotification=t.ComposeBox=t.QuotedMention=t.Format=t.QuickReply=t.FTSMessage=t.LastMessage=t.SearchName=t.Search=t.Conversation=t.Compatibility=t.StatusV3Caption=t.StatusV3Text=t.LargeEmojiOnly=t.EmojiOnly=void 0;var a=s(63367);t.EmojiOnly=({selectable:e}={})=>[[[a.Emoji,{selectable:e}]]];t.LargeEmojiOnly=({selectable:e}={})=>[[[a.Emoji,{selectable:e,size:"large"}]]];t.StatusV3Text=({links:e,selectable:t}={})=>[[[a.Code,{selectable:t}]],[[a.Link,{links:e,selectable:t}]],[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]],[[a.Emoji,{selectable:t,size:"xlarge"}]]];t.StatusV3Caption=({selectable:e}={})=>[[[a.Code,{selectable:e}]],[[a.Bold,{selectable:e}],[a.Italic,{selectable:e}],[a.Strikethrough,{selectable:e}]],[[a.Emoji,{selectable:e}]]];t.Compatibility=({selectable:e}={})=>[[[a.Emoji,{selectable:e}]]];t.Conversation=({mentions:e,links:t,selectable:s,trusted:i}={})=>[[[a.Code,{selectable:s}]],i?[[a.Link,{links:t,selectable:s}]]:null,e?[[a.Mention,{mentions:e,selectable:s}]]:null,[[a.Bold,{selectable:s}],[a.Italic,{selectable:s}],[a.Strikethrough,{selectable:s}]],[[a.Emoji,{selectable:s}]]].filter(Boolean);t.Search=({boundary:e,terms:t,selectable:s,mentions:i})=>[[[a.TextMention,{mentions:i,selectable:s}]],[[a.Bold,{selectable:s}],[a.Italic,{selectable:s}],[a.Strikethrough,{selectable:s}]],[[a.Highlight,{terms:t,boundary:e,selectable:s,ignoreDiacritics:!0}]],[[a.Emoji,{selectable:s}]]];t.SearchName=({terms:e})=>[[[a.Highlight,{terms:e,ignoreDiacritics:!0}]],[[a.Emoji,{selectable:!1}]]];t.LastMessage=({mentions:e,selectable:t}={})=>[[[a.Code,{selectable:t}]],e?[[a.TextMention,{mentions:e,selectable:t}]]:null,[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]],[[a.Emoji,{selectable:t}]]].filter(Boolean);t.FTSMessage=({boundary:e,mentions:t,terms:s,selectable:i})=>[[[a.Code,{selectable:i}]],[[a.TextMention,{mentions:t,selectable:i}]],[[a.Bold,{selectable:i}],[a.Italic,{selectable:i}],[a.Strikethrough,{selectable:i}]],[[a.Highlight,{terms:s,boundary:e,selectable:i}]],[[a.Emoji,{selectable:i}]]];t.QuickReply=({selectable:e}={})=>[[[a.Code,{selectable:e}]],[[a.Bold,{selectable:e}],[a.Italic,{selectable:e}],[a.Strikethrough,{selectable:e}]],[[a.Emoji,{selectable:e}]]];t.Format=({mentions:e,selectable:t})=>[[[a.Code,{selectable:t}]],[[a.TextMention,{mentions:e,selectable:t}]],[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]],[[a.Emoji,{selectable:t}]]];t.QuotedMention=({mentions:e,selectable:t})=>[[[a.Code,{selectable:t}]],[[a.TextMention,{mentions:e,selectable:t,theme:{quoted:!0}}]],[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]],[[a.Emoji,{selectable:t}]]].filter(Boolean);t.ComposeBox=({selectable:e}={})=>[[[a.Code,{selectable:e}]],[[a.Link,{selectable:e}]],[[a.Bold,{selectable:e}],[a.Italic,{selectable:e}],[a.Strikethrough,{selectable:e}]],[[a.Emoticon,{selectable:e}]]];t.RawNotification=({mentions:e,selectable:t})=>[[[a.RawMention,{mentions:e,selectable:t}]]];t.FormattedNotification=({mentions:e,selectable:t})=>[[[a.Code,{selectable:t}]],[[a.RawMention,{mentions:e,selectable:t}]],[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]]].filter(Boolean);t.RawGroupNotification=({mentions:e,selectable:t,groupMetadata:s})=>[[[a.RawGroupMention,{mentions:e,selectable:t,groupMetadata:s}]]];t.FormattedGroupNotification=({mentions:e,selectable:t,groupMetadata:s})=>[[[a.Code,{selectable:t}]],[[a.RawGroupMention,{mentions:e,selectable:t,groupMetadata:s}]],[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]]].filter(Boolean);t.TrustedGroupDesc=({links:e})=>{const t=!0;return[[[a.Code,{selectable:t}]],[[a.Link,{links:e,selectable:t}]],[[a.Bold,{selectable:t}],[a.Italic,{selectable:t}],[a.Strikethrough,{selectable:t}]],[[a.Emoji,{selectable:t}]]]};t.UntrustedGroupDesc=()=>{const e=!0;return[[[a.Code,{selectable:e}]],[[a.Bold,{selectable:e}],[a.Italic,{selectable:e}],[a.Strikethrough,{selectable:e}]],[[a.Emoji,{selectable:e}]]]};t.HeaderAndFooter=({links:e,selectable:t,trusted:s}={})=>[s?[[a.Link,{links:e,selectable:t}]]:null,[[a.Emoji,{selectable:t}]]].filter(Boolean);t.BoldedContactName=({selectable:e})=>[[[a.BoldFirstWord,{selectable:e}]],[[a.Emoji,{selectable:e}]]]},29730:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s,a,r=1/0){return(0,n.default)(s,(0,i.default)(e,t,r),a)};var i=a(s(13652)),n=a(s(93364))},11108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,s){const a=2*e.length+t[1].length,i=t[0].length-a;return i>0&&(t.index+=i,t[0]=t[0].slice(i)),s.lastIndex--,t}}},40895:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableHeaderAndFooterFormatting=function(e,t){return{formatters:(0,a.HeaderAndFooter)({links:e,selectable:!0,trusted:t}),selectable:!0}};var a=s(68551)},37343:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,s){return class extends n.default{static match(a){return(0,i.default)(a,e,t,s)}}};var i=a(s(75421)),n=a(s(26749))},5094:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0){const{index:s}=e,[a]=e,i=s+a.length-1,n=[s,s,i,i,e];if(t){const i=e[t];n[1]=s+a.indexOf(i),n[2]=n[1]+i.length-1}return n}},75421:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s=0,a){const n=[];let r;t.lastIndex=0;for(;(r=t.exec(e))&&t.lastIndex>0;)a&&(r=a(r,t)),r&&n.push((0,i.default)(r,s));return n};var i=a(s(5094))},49895:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;const i=a(s(68551));t.Configuration=i},26749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class s{static match(){throw new Error("Subclasses of `Mutator` must override `match()`")}static mutate(e){return e}}t.default=s,s.nestable=()=>!0,s.format=!0,s.fragment=!1,s.compatibility=!1,s.mutates=!1},15931:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(11108)),n=a(s(92125)),r=a(s(37343)),o=s(85893);const l=(0,i.default)("*"),d=(0,r.default)(/(?:^|[\s\W_])\*([^\s\u20e3]|[^\s\u20e3][^\n]*?\S)\*(?=$|[[\s\W_])/g,1,l);t.default=class extends d{static jsx(e,t,{selectable:s=!1}){return(0,o.jsx)(n.default,{selectable:s,children:e})}}},50403:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(92125)),n=a(s(37343)),r=s(85893);const o=(0,n.default)(/^(\w*)\b/g);t.default=class extends o{static jsx(e,t,{selectable:s=!1}){return(0,r.jsx)(i.default,{selectable:s,children:e})}}},52646:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeCodeBlocks=t.isInsideCodeBlock=t.default=void 0;var i=a(s(76462)),n=a(s(37343)),r=s(85893);const o=/```([\s\S]*?\S[\s\S]*?)```/g,l=(0,n.default)(o,1),d=new Set(["ListItem","List"]);class u extends l{static jsx(e,t,{selectable:s=!1}){return(0,r.jsx)(i.default,{selectable:s,children:e})}}t.default=u,u.nestable=e=>d.has(e),u.format=!1;t.isInsideCodeBlock=e=>{const t=e.split(o).pop();return/```/.test(t)};t.removeCodeBlocks=e=>e.replace(o," ")},92125:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(20845),i=s(85893);function n({children:e,selectable:t}){return(0,i.jsx)(a.SelectableStrong,{selectable:t,appTextTemplate:"*${appText}*",children:e})}n.defaultProps={children:""};var r=n;t.default=r},48331:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(40052),r=s(67294),o=a(s(35027)),l=a(s(29730)),d=s(20845),u=s(6249),c=a(s(79485)),h=s(85893);class f extends r.Component{render(){const{contact:e,onClick:t,theme:s,selectable:a}=this.props,r=e.id,c=!!s&&s.quoted,f=e.displayName,p=(0,n.dir)(f)||"auto",m=(0,l.default)(f,[[[o.default,{selectable:a}]]],u.JSXSerializer,void 0,1/0);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.SelectableSpan,{"data-jid":r.toString(),"data-display":f,className:(0,i.default)("matched-mention",{"quoted-mention":c,"inactive-mention":!t||c}),onClick:t,plainText:`@${f}`,selectable:a,selectAll:!0,appTextTemplate:`${r.toString()}`,children:[(0,h.jsx)("span",{className:"at-symbol",children:"@"}),(0,h.jsx)("span",{dir:p,children:m})]})})}}f.CONCERNS={contact:["id","displayName"]},f.displayName="ChatTextMention";var p=(0,c.default)(f,f.CONCERNS);t.default=p},76462:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",selectable:t}){return(0,i.jsx)(a.SelectableCode,{selectable:t,appTextTemplate:"```${appText}```",children:e})};var a=s(20845),i=s(85893)},62451:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(s(54179)),r=a(s(34249)),o=s(85893);t.default=({emoji:e,selectable:t,size:s})=>"xlarge"===s?(0,o.jsx)(r.default,{emoji:e,size:r.SIZE.XLARGE,element:"span",selectable:t}):(0,o.jsx)(n.default,{emoji:e,selectable:t,size:s})},35909:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(94184)),n=s(40052),r=s(67294),o=a(s(35027)),l=a(s(29730)),d=a(s(12950)),u=s(20845),c=s(6249),h=a(s(79485)),f=s(85893);class p extends r.Component{_getNameToDisplay(){const{contact:e,groupMetadata:t}=this.props;return d.default.isDropLastNameEnabled()&&t&&t.hasUniqueShortNameMention(e)?e.shortName:e.displayName}render(){const{contact:e,onClick:t,theme:s,selectable:a}=this.props,r=e.id,d=!!s&&s.quoted,h=this._getNameToDisplay(),p=(0,n.dir)(h)||"auto",m=(0,l.default)(h,[[[o.default,{selectable:a}]]],c.JSXSerializer,void 0,1/0);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(u.SelectableSpan,{"data-jid":r.toString(),"data-display":h,className:(0,i.default)("matched-mention",{"quoted-mention":d,"inactive-mention":!t||d}),onClick:t,plainText:`@${h}`,selectable:a,selectAll:!0,appTextTemplate:`${r.toString()}`,children:[(0,f.jsx)("span",{className:"at-symbol",children:"@"}),(0,f.jsx)("span",{dir:p,children:m})]})})}}p.CONCERNS={contact:["id","displayName","shortName","isMyContact"],groupMetadata:["uniqueShortNameMap"]},p.displayName="GroupTextMention";var m=(0,h.default)(p,p.CONCERNS);t.default=m},23673:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(20845),i=s(85893);function n({children:e,selectable:t}){return(0,i.jsx)(a.SelectableSpan,{className:"matched-text",selectable:t,children:e})}n.defaultProps={children:""};var r=n;t.default=r},86812:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.jsx)(n.default,(0,i.default)((0,i.default)({},e),{},{children:e.children}))};var i=a(s(81109)),n=a(s(76711)),r=s(85893)},38836:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(20845),i=s(85893);function n({children:e,selectable:t}){return(0,i.jsx)(a.SelectableEm,{selectable:t,appTextTemplate:"_${appText}_",children:e})}n.defaultProps={children:""};var r=n;t.default=r},76711:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(20845),i=s(85893);function n({href:e,children:t,selectable:s}){return(0,i.jsx)(a.SelectableLink,{href:e,title:e,target:"_blank",rel:"noopener noreferrer",selectable:s,children:t})}n.defaultProps={children:""};var r=n;t.default=r},22443:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,isAtStart:s,selectable:a}){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.SelectableUl,{appTextTemplate:s?"${appText}":"\n${appText}",className:(0,i.default)({[n.default.inline]:t},n.default.ul),selectable:a,children:e})})};var i=a(s(94184)),n=a(s(52552)),r=s(20845),o=s(85893)},55696:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,selectable:s}){return(0,o.jsx)("li",{className:(0,i.default)({[n.default.inline]:t}),children:(0,o.jsx)(r.SelectableSpan,{selectable:s,appTextTemplate:"* ${appText}",children:e})})};var i=a(s(94184)),n=a(s(6778)),r=s(20845),o=s(85893)},77107:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{mentionMeta:t,theme:s,selectable:a}=e;return(0,n.jsx)(i.default,{contact:t.contact,theme:s,selectable:a})};var i=a(s(49009)),n=s(85893)},31338:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(20845),i=s(85893);function n({children:e,selectable:t}){return(0,i.jsx)(a.SelectableDel,{selectable:t,appTextTemplate:"~${appText}~",children:e})}n.defaultProps={children:""};var r=n;t.default=r},16783:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(91952)),n=s(20845),r=a(s(13803)),o=s(85893);function l({link:e,children:t,selectable:s}){return(0,o.jsx)(n.SelectableLink,{onClick:()=>i.default.openModal((0,o.jsx)(r.default,{link:e})),selectable:s,style:{cursor:"pointer"},children:t})}l.defaultProps={children:""};var d=l;t.default=d},28150:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.useContext)(l.default);if(o.default.isDropLastNameEnabled()&&t)return(0,u.jsx)(d.default,(0,i.default)((0,i.default)({},e),{},{groupMetadata:t}));return(0,u.jsx)(r.default,(0,i.default)({},e))};var i=a(s(81109)),n=s(67294),r=a(s(48331)),o=a(s(12950)),l=a(s(96889)),d=a(s(35909)),u=s(85893)},49009:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({contact:e,theme:t,selectable:s}){const{isMe:a}=(0,o.default)(e,["id","isMe"]),d=a?void 0:()=>{(0,n.findChat)(e.id).then((e=>i.default.openChatBottom(e)))};return(0,l.jsx)(r.default,{contact:e,theme:t,selectable:s,onClick:d})};var i=a(s(91952)),n=s(62238),r=a(s(28150)),o=a(s(76006)),l=s(85893)},35027:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(2561)),n=a(s(62451)),r=a(s(75421)),o=a(s(26749)),l=s(49002),d=s(85893);class u extends o.default{static jsx(e,[t],{size:s,selectable:a=!1}){return(0,d.jsx)(n.default,{emoji:t,size:s,selectable:a})}static match(e,t,s){const a=null!=s&&0!==s?s:e.length,n=(0,l.firstNCodepoints)(e,a);return(0,r.default)(n,i.default.emojiRegex(),0,c)}}function c(e){return i.default.getGlyphId(e[0])?e:null}t.default=u,u.compatibility=!0},139:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(3522)),n=a(s(37343)),r=a(s(2561)),o=a(s(41098));const l={"(y)":"","(n)":"",":-)":"",":-(":"",":-p":"",":-|":"",":-\\":"",":-d":"",":-*":"","<3":"","^_^":"",">_<":"",";-)":""},d=Object.keys(l).map(i.default).join("|"),u=new RegExp(`(^|\\s|\`\`\`|[*_~])((?:${d})+)(?=$|\\s|\`\`\`|[*_~])`,"ig"),c=new RegExp(`(${d})`,"i"),h=(0,n.default)(u,2,(function(e){const[,t]=e;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));class f extends h{static mutate(e){return e.split(c).map((e=>{const t=l[e.toLowerCase()];return t?r.default.getSkinToneBase(t)&&o.default.getVariant(t)||t:e})).join("")}}t.default=f,f.fragment=!0,f.mutates=!0},45631:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(3522)),n=a(s(75421)),r=a(s(23673)),o=a(s(2408)),l=a(s(26749)),d=s(85893);class u extends l.default{static match(e,t){if(!t)return[];const{terms:s,boundary:a=!1,ignoreDiacritics:r=!1}=t;if(!s.length)return[];const l=r&&o.default.isLatinAlphabetLanguage(e)&&s.every((e=>o.default.isLatinAlphabetLanguage(e)))&&!o.default.isRTL(),d=l?o.default.removeAccents(e):e;return(0,n.default)(d,function(e,t,s){const a=(s?e.map((e=>o.default.removeAccents(e))):e).map(i.default).join("|");if(o.default.isRTL())return new RegExp(`${t?"(?:^|\\b)":""}(\\S+)?(${a})(\\S+)?`,"ig");return new RegExp(`${t?"(?:^|\\b)":""}(${a})`,"ig")}(s,a,l))}}t.default=u,u.jsx=(e,t,{selectable:s})=>(0,d.jsx)(r.default,{selectable:s,children:e})},63367:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoldFirstWord",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Bold",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Emoji",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Emoticon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Intern",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Italic",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Mention",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"RawMention",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"Strikethrough",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"TextMention",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"RawGroupMention",{enumerable:!0,get:function(){return S.default}});var i=a(s(50403)),n=a(s(15931)),r=a(s(52646)),o=a(s(35027)),l=a(s(139)),d=a(s(45631)),u=a(s(22362)),c=a(s(48239)),h=a(s(2535)),f=a(s(69806)),p=a(s(61214)),m=a(s(5203)),_=a(s(70209)),g=a(s(85275)),v=a(s(90449)),S=a(s(14993))},22362:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(37343)),n=a(s(86812)),r=s(85893);const o=(0,i.default)(/(^|\b|\s)(((#|t|T|d|D|p|P|s|S)([0-9]{3,16}))|([0-9a-fA-F]{8,40}))(?=$|\b)/g,2,(function(e){const[,t,,,,,s]=e;if(s&&(!l.test(s)||!d.test(s)))return null;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));t.default=class extends o{static jsx(e,t,{selectable:s=!1}){const a=function([,,,,e,t,s]){if(s)return`${u}${s.toLowerCase()}`;switch(e){case"T":case"t":case"#":return`${c}${t}`;case"D":case"d":return`${h}${t}`;case"P":case"p":return`${f}${t}`;case"S":case"s":return`${p}${t}`;default:return`${m}${e}${t}`}}(t);return(0,r.jsx)(n.default,{href:a,selectable:s,children:e})}};const l=/[a-fA-F]/,d=/[0-9]/;const u="https://internalfb.com/intern/bunny/?q=hash%20",c="https://internalfb.com/intern/tasks/?t=",h="https://internalfb.com/intern/diff/D",f="https://internalfb.com/intern/paste/P",p="https://internalfb.com/intern/sevmanager/view/s/",m="https://internalfb.com/intern/"},48239:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(11108)),n=a(s(37343)),r=a(s(38836)),o=s(85893);const l=(0,i.default)("_"),d=(0,n.default)(/(?:^|\s|_|[^\w\\])_(\S|\S[^\n]*?\S)_(?=$|[[\s\W_])/g,1,l);t.default=class extends d{static jsx(e,t,{selectable:s=!1}){return(0,o.jsx)(r.default,{selectable:s,children:e})}}},2535:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(15931)),n=a(s(48239)),r=a(s(76711)),o=a(s(26749)),l=a(s(85275)),d=a(s(16783)),u=s(85893);class c extends o.default{static jsx(e,t,{selectable:s=!1}){const{href:a,suspiciousCharacters:i}=t;return i&&i.size?(0,u.jsx)(d.default,{link:t,selectable:s,children:e}):(0,u.jsx)(r.default,{href:a,selectable:s,children:e})}}function h(e){const{index:t,url:s}=e,a=t+s.length-1;return[t,t,a,a,e]}function f(e,t){let s=0,a=0;for(;s<e.length&&a<t.length;){const i=t[a][3]-e[s][3];if(i>0)s++;else if(i<0)a++;else{e[s][2]--,e[s][3]--;const t=e[s][5];t.href=t.href.slice(0,-1),t.path=t.path&&t.path.slice(0,-1),t.url=t.url.slice(0,-1),a++,s++}}}t.default=c,c.format=!1,c.match=(e,t)=>{if(!t)return[];const{links:s=[]}=t;return s.map(h)},c.conflictResolvers=new Map([[i.default,f],[n.default,f],[l.default,f]])},69806:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(37343)),n=a(s(22443)),r=s(85893);const o=(0,i.default)(/((?:^)(?:\* (?:[^\n]+)(?:\n(?:\* [^\n]+)){0,})(?:\n|$))/gm,0);class l extends o{static jsx(e,t,{selectable:s=!1,inline:a}){const i=0===t.index;return(0,r.jsx)(n.default,{inline:a,isAtStart:i,selectable:s,children:e})}}t.default=l,l.nestable=()=>!1},61214:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LAST_LIST_ITEM_REGEX=t.LIST_ITEM_DELIMITER=void 0;var i=a(s(37343)),n=a(s(55696)),r=s(85893);t.LIST_ITEM_DELIMITER="* ";t.LAST_LIST_ITEM_REGEX=/(?:^|\n)\* [^\n]+$/;const o=(0,i.default)(/(?:^)\* ([^\n]+(?:$))/gm,1),l=new Set(["List"]);class d extends o{static jsx(e,t,{selectable:s=!1,inline:a}){return(0,r.jsx)(n.default,{inline:a,selectable:s,children:e})}}t.default=d,d.nestable=e=>l.has(e),d.unformatDecorations={pre:" "}},5203:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(3522)),n=a(s(41609)),r=a(s(75421)),o=a(s(77107)),l=a(s(26749)),d=s(85893);class u extends l.default{static match(e,t){if(!t)return[];const{mentions:s,groupMetadata:a}=t;if(!s||(0,n.default)(s))return[];const o=function(e){const t=Object.keys(e).map(i.default).join("|");return new RegExp(`(${t})`,"g")}(s),l=(0,r.default)(e,o);for(let e=0;e<l.length;++e)l[e][4]={contact:s[l[e][4][0]],groupMetadata:a};return l}static jsx(e,t,{selectable:s}){return(0,d.jsx)(o.default,{mentionMeta:t,selectable:s})}}t.default=u,u.format=!1},14993:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(12950)),n=a(s(5203));class r extends n.default{}t.default=r,r.mutates=!0,r.mutate=(e,t)=>{const{contact:s,groupMetadata:a}=t;return i.default.isDropLastNameEnabled()&&a&&a.hasUniqueShortNameMention(s)?`@${s.shortName}`:`@${s.displayName}`}},70209:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(5203));class n extends i.default{}t.default=n,n.mutates=!0,n.mutate=(e,{contact:t})=>`@${t.displayName}`},85275:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(11108)),n=a(s(37343)),r=a(s(31338)),o=s(85893);const l=(0,i.default)("_"),d=(0,n.default)(/(?:^|[\s\W_])~(\S|\S[^\n]*?\S)~(?=$|[[\s\W_])/g,1,l);t.default=class extends d{static jsx(e,t,{selectable:s}){return(0,o.jsx)(r.default,{selectable:s,children:e})}}},90449:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(5203)),n=a(s(28150)),r=s(85893);class o extends i.default{static jsx(e,{contact:t},{selectable:s,theme:a}){return(0,r.jsx)(n.default,{contact:t,selectable:s,theme:a})}}t.default=o},55009:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;const s=[];let a;for(;a=e.pop();){const[e,,,i,n]=a,[{nestable:r,compatibility:o},,l]=t[n];let d=!0;const{length:u}=s;for(let a=u-1;a>=0;--a){const[,,n,u,c]=s[a];if(e>u)break;const[{mutates:h,format:f,compatibility:p,name:m},,_]=t[c];if(i>n){if(l<_&&s.splice(a,1))continue;d=!1;break}if(h&&!(d=!1))break;if(o)break;if((r(m)||p||!(l<_)||!s.splice(a,1))&&(!o&&!f)){d=!1;break}}d&&s.push(a)}return s}},14003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[];for(let s=0;s<e.length;++s)for(let a=0;a<e[s].length;++a){const[i,n]=e[s][a];t.push([i,n,s])}return t}},13652:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s=1/0){return d(e,(0,n.default)(t),s)},t._parse=d;var i=a(s(55009)),n=a(s(14003)),r=a(s(72724)),o=a(s(83978)),l=s(49002);function d(e,t,s=1/0){const a=(0,r.default)(e,t,s),n=a.length?(0,o.default)(e,(0,i.default)(a,t),t):{children:[{type:"text",value:e}]};return s<(0,l.numCodepoints)(e)&&u(n,{limit:s}),n}function u(e,t){if(t.limit<=0)return;if(e.type&&"text"===e.type){if(e.value.length>=t.limit){let s=(0,l.toArray)(e.value);s.length>=t.limit&&(s=s.slice(0,t.limit)),e.value=s.join(""),t.limit=t.limit-s.length}else t.limit=t.limit-e.value.length;return}if(e.type&&"delimiter"===e.type)return;let s=0;for(;s<e.children.length&&(u(e.children[s],t),!(t.limit<=0));)s++;e.children=e.children.slice(0,s+1)}},72724:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s=1/0){const a=[];for(let i=0;i<t.length;++i){const[n,r]=t[i],o=n.match(e,r,s),l=[],{length:d}=o;for(let e=0,t=o[e];e<d;t=o[++e])l[e]=[t[0],t[1],t[2],t[3],i,t[4]];l.length&&a.push(l)}for(let e=0;e<a.length;e++){const{conflictResolvers:s}=t[a[e][0][4]][0];if(s)for(let i=0;i<a.length;i++){const n=t[a[i][0][4]][0],r=s.get(n);r&&r(a[e],a[i])}}const i=[];for(let e=0;e<a.length;++e)i[e]=a[e].length-1;const n=[];let r=0;for(;a.length;){for(let e=0,t=-1;e<a.length;++e)a[e][i[e]][0]>t&&(r=e,t=a[e][i[e]][0]);n.push(a[r][i[r]]),--i[r]<0&&(a.splice(r,1),i.splice(r,1))}return n}},83978:(e,t,s)=>{"use strict";function a({format:e},t,s){const a=[],i=function(e){let t=e;const s=[];do{t.mutator&&s.push(t.mutator)}while(t.parent&&(t=t.parent));return s}(s);for(let s=0;s<t.length;++s)(e||t[s][0].compatibility)&&(i.includes(t[s][0])||a.push(t[s]));return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){const n={children:[]};let r=0,o=n,l=0;for(let n=0;n<t.length;++n){const d=t[n],[u,c]=d;for(;o.parent&&u>(l=o.match[2]);){if(r<=l&&o.children.push({type:"text",value:e.substring(r,l+1)}),r=o.match[3]+1,o.mutator.fragment){const{children:e}=o.parent;e.pop(),e.push.apply(e,o.children)}l!==o.match[3]&&o.parent.children.push({type:"delimiter",value:e.substring(l+1,r)}),o=o.parent}r<u&&o.children.push({type:"text",value:e.substring(r,u)});const[h,f]=i[d[4]],{mutates:p}=h;r=c,u!==c&&o.children.push({type:"delimiter",value:e.substring(u,c)});const m={children:[],match:d,mutator:h,opts:f,parent:o};if(p){const t=e.substring(d[1],d[2]+1),n=h.mutate(t,d[5]),o=a(h,i,m),l=(0,s(13652)._parse)(n,o);m.children=l.children,r=d[2]+1}o.children.push(m),o=m}do{if(!o.match)continue;const[,,t,s]=o.match;if(r<=t&&o.children.push({type:"text",value:e.substring(r,t+1)}),r=s+1,o.mutator.fragment){const{children:e}=o.parent;e.pop(),e.push.apply(e,o.children)}t!==s&&o.parent.children.push({type:"delimiter",value:e.substring(t+1,r)})}while(o.parent&&(o=o.parent)&&o.parent);r!==e.length&&o.children.push({type:"text",value:e.substring(r)});return n}},93364:(e,t)=>{"use strict";function s(e,t,a){return t.reduce(((t,i)=>(t.push(function(e,t,a){if(t.type){const{value:s}=t;switch(t.type){case"text":return e.onText(s,a);case"delimiter":return e.onDelimiter(s,a);default:throw new Error("Invalid node type")}}return e.onMutator(t.mutator,s(e,t.children,a),t.match[5],t.opts,a)}(e,i,a)),t)),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){return e.onRoot(s(e,t.children,a),a)}},72693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{static onMutator(){throw new Error("Subclasses of `Serializer` must override `onMutator()`")}static onRoot(){throw new Error("Subclasses of `Serializer` must override `onRoot()`")}static onText(){throw new Error("Subclasses of `Serializer` must override `onText()`")}static onDelimiter(){throw new Error("Subclasses of `Serializer` must override `onDelimiter()`")}}},6249:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JSXSerializer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TextSerializer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"UnformatSerializer",{enumerable:!0,get:function(){return r.default}});var i=a(s(16074)),n=a(s(85347)),r=a(s(62608))},16074:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(67294),n=a(s(95601)),r=a(s(72693));class o extends r.default{}function l(e){const t=[];for(let s=0;s<e.length;s++){const a=e[s];if(void 0===a)continue;if("string"==typeof a){t.push(a);continue}const n=`jsx-child-${s}`;t.push((0,i.cloneElement)(a,{key:n}))}return t}t.default=o,o.onText=n.default,o.onDelimiter=()=>{},o.onRoot=e=>l(e),o.onMutator=(e,t,s,a)=>e.jsx(l(t),s,a)},95601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e},85347:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(72693));class n extends i.default{}t.default=n,n.onDelimiter=e=>e,n.onMutator=(e,t)=>t.join(""),n.onRoot=e=>e.join(""),n.onText=e=>e},62608:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(72693));class n extends i.default{}function r(e){return e.filter(Boolean).join("")}t.default=n,n.onDelimiter=()=>{},n.onMutator=(e,t)=>null!=e.unformatDecorations?r([e.unformatDecorations.pre,...t,e.unformatDecorations.post]):r(t),n.onRoot=e=>r(e),n.onText=e=>e},75580:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!0,s=!1){var a,i,o;const x=e.safe();if(g.default.supportsFeature(g.default.F.MD_BACKEND)&&e.mdDowngrade&&s)return S.default.t(2049);switch(x.type){case T.BUTTONS_RESPONSE:case T.TEMPLATE_BUTTON_REPLY:case T.HSM:return t?(0,y.default)(e,e.body):e.body;case T.CIPHERTEXT:return S.default.t(1454);case T.REVOKED:return e.isSentByMe?S.default.t(1563):S.default.t(1561);case T.CHAT:if(e.isFromTemplate)return e.title?t?(0,y.default)(e,e.title+" "+e.body):"*"+e.title+"* "+e.body:t?(0,y.default)(e,e.body):e.body;if(e.isDynamicReplyButtonsMsg&&e.title){const s=M(e.body,e);if(null!=s)return t?(0,y.default)(e,e.title+"\n"+s):`*${e.title}*\n${s}`}return t?(0,y.default)(e,e.body):e.body;case T.IMAGE:if(x.isViewOnce)return(0,b.isViewed)(x)?S.default.t(1795):S.default.t(1787);const A=M(e.caption,e);return A?t?(0,y.default)(e,A):A:S.default.t(1945);case T.VIDEO:if(x.isViewOnce)return(0,b.isViewed)(x)?S.default.t(1795):S.default.t(1794);const N=M(e.caption,e);return N?t?(0,y.default)(e,N):N:e.isGif?"GIF":S.default.t(1950);case T.STICKER:return S.default.t(1949);case T.PTT:const O=r.default.durationStr(e.duration);return O||S.default.t(1951);case T.AUDIO:return S.default.t(1941);case T.LOCATION:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){const s=M(e.caption,e);return s?t?(0,y.default)(e,s):s:e.loc||S.default.t(1947)}return e.isLive?e.comment||S.default.t(1946):e.loc||S.default.t(1947);case T.GROUP_NOTIFICATION:case T.GP2:return(0,f.default)(e,s);case T.BROADCAST_NOTIFICATION:return(0,d.default)(e);case T.NOTIFICATION:return e.body;case T.VCARD:return e.vcardFormattedName||S.default.t(1942);case T.GROUPS_V4_INVITE:return g.default.supportsFeature(g.default.F.GROUPS_V_4_JOIN_PERMISSION)?S.default.t(1007):S.default.t(588);case T.MULTI_VCARD:return(0,E.getNameString)(e.vcardList);case T.DOCUMENT:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){const s=e.pageCount>0?S.default.t(1943,{count:e.pageCount+"",_plural:e.pageCount}):null,a=M(e.caption,e);return a?t?(0,y.default)(e,a):a:(0,n.default)([a||S.default.t(1944),s]).join("  ")}if(e.isVcardOverMmsDocument&&e.mediaData.parsedVcards)return function(e){if(e.length>1){const t=e.map((e=>(0,E.vcardGetNameFromParsed)(e))).filter(Boolean);return(0,E.getNameStringFromNames)(t)}return(0,E.vcardGetNameFromParsed)(e[0])||S.default.t(270)}(e.mediaData.parsedVcards);const w=e.pageCount>0?S.default.t(1943,{count:e.pageCount+"",_plural:e.pageCount}):null;return(0,n.default)([e.mediaData.filename||S.default.t(1944),w]).join("  ");case T.E2E_NOTIFICATION:return(0,c.default)(x);case T.CALL_LOG:return(0,u.default)(e,!1);case T.PRODUCT:return e.text?t?(0,y.default)(e,e.text):e.text:S.default.t(1948);case T.OVERSIZED:return(0,m.formatOversizedMsgText)(e);case T.INTERACTIVE:return[null===(a=e.interactiveHeader)||void 0===a?void 0:a.title,e.body].filter(Boolean).join("\n");case T.UNKNOWN:return(0,_.formatUnknownMsgText)(e);case T.PAYMENT:return function(e){switch(e.subtype){case"ciphertext":return S.default.t(2097);case"futureproof":return S.default.t(2099);case"send":const t=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?l.formatAmount1000(e.paymentCurrency,e.paymentAmount1000):S.default.t(1439))+t;case"request":const s=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?l.formatAmount1000(e.paymentCurrency,e.paymentAmount1000):S.default.t(1439))+s;default:return S.default.t(590)}}(e);case T.NOTIFICATION_TEMPLATE:return(0,p.default)(e);case T.PROTOCOL:return"ephemeral_setting"===e.subtype?(0,h.default)(e.ephemeralDuration||0,e.from,e.id.remote):"";case T.ORDER:return e.message||"";case T.LIST:var I,P;return(0,C.listMsgCanRender)(e)?[null===(I=e.list)||void 0===I?void 0:I.title,null===(P=e.list)||void 0===P?void 0:P.description,e.footer].filter(Boolean).join("\n"):(0,_.formatUnknownMsgText)(e);case T.LIST_RESPONSE:return`${(null===(i=e.listResponse)||void 0===i?void 0:i.title)||""} ${(null===(o=e.listResponse)||void 0===o?void 0:o.description)||""}`;case T.REACTION:return(0,v.sendReactionsEnabled)(),(0,_.formatUnknownMsgText)(e);default:return""}};var n=i(s(39693)),r=i(s(25142)),o=i(s(55454)),l=a(s(61447)),d=i(s(61090)),u=i(s(21840)),c=i(s(8381)),h=i(s(46014)),f=i(s(50215)),p=i(s(55554)),m=s(53676),_=s(41269),g=i(s(12950)),v=s(78615),S=i(s(2408)),C=s(74818),y=i(s(33070)),E=s(50313),b=s(83381);const T=o.default.MSG_TYPE;function M(e,t){if(null==e)return null;const s=!0===t.isDynamicReplyButtonsMsg;return t.footer&&s?`${e}\n${t.footer}`:e}},53676:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatOversizedMsgText=function(){return n.default.isElectron?i.default.t(1435):i.default.t(1436)},t.formatOversizedMsgNotification=function(){return i.default.t(1436)};var i=a(s(2408)),n=a(s(35371))},92522:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,s,a;let i,o,x,I="";const P=e.dir,A=e.safe(),N=!(null===(t=A.asViewOnce)||void 0===t?void 0:t.isViewOnce)&&C.default.getGlobalPreviews();!(0,_.getMaybeMeUser)().equals(e.from)&&e.isGroupMsg&&(I=e.displayName());switch(A.type){case M.CHAT:if(N)i=(0,E.default)(e,e.body);else if(e.isGroupMsg)i=I?v.default.t(1041,{author:I}):v.default.t(1040),I="";else{const t=e.chat;i=v.default.t(1042,{unreadCount:v.default.n(t.unreadCount),_plural:t.unreadCount})}break;case M.IMAGE:o="",y.default.hasEmoji&&(o=A.isViewOnce?"1 ":" "),i=o+(N&&(0,E.default)(e,e.caption)||v.default.t(1945));break;case M.PRODUCT:o=y.default.hasEmoji?" ":"",i=o+(e.text&&(0,E.default)(e,e.text)||v.default.t(1948));break;case M.STICKER:o=y.default.hasEmoji?" ":"",i=o+v.default.t(1949);break;case M.VIDEO:e.isGif?(o=y.default.hasEmoji?" ":"",x=N&&(0,E.default)(e,e.caption)||"GIF"):(o="",y.default.hasEmoji&&(o=A.isViewOnce?"1 ":" "),x=N&&(0,E.default)(e,e.caption)||v.default.t(1950),A.isViewOnce||(x=`${x} (${r.default.durationStr(e.duration)})`)),i=`${o}${x}`;break;case M.PTT:o=y.default.hasEmoji?" ":"",i=`${o} ${v.default.t(1951)} (${r.default.durationStr(e.duration)})`;break;case M.AUDIO:o=y.default.hasEmoji?" ":"",i=`${o} ${v.default.t(1941)} (${r.default.durationStr(e.duration)})`;break;case M.LOCATION:o=y.default.hasEmoji?" ":"",x=e.isLive?N&&(0,E.default)(e,e.comment)||v.default.t(1946):N&&e.loc||v.default.t(1947),i=`${o} ${x}`;break;case M.GROUPS_V4_INVITE:i=g.default.supportsFeature(g.default.F.GROUPS_V_4_JOIN_PERMISSION)?v.default.t(1007):v.default.t(588);break;case M.GROUP_NOTIFICATION:case M.GP2:i=(0,f.default)(e,!0),I="";break;case M.BROADCAST_NOTIFICATION:i=(0,u.default)(e);break;case M.NOTIFICATION:i=e.body;break;case M.VCARD:o=y.default.hasEmoji?" ":"",i=o+(e.subtype||v.default.t(1942));break;case M.MULTI_VCARD:o=y.default.hasEmoji?" ":"",i=o+(0,b.getNameString)(e.vcardList);break;case M.DOCUMENT:if(e.isVcardOverMmsDocument){o=y.default.hasEmoji?" ":"",i=o+(e.filename||v.default.t(1283,{count:e.pageCount,_plural:e.pageCount}));break}o=y.default.hasEmoji?" ":"",i=o+(e.subtype||v.default.t(1944));break;case M.E2E_NOTIFICATION:i=(0,h.default)(A);break;case M.CALL_LOG:i=(0,c.default)(e,!1);break;case M.CIPHERTEXT:i=v.default.t(1454);break;case M.REVOKED:i=e.isSentByMe?v.default.t(1563):v.default.t(1561);break;case M.PAYMENT:i=function(e){if(!e.paymentCurrency||!e.paymentAmount1000)return v.default.t(2098);if("send"!==e.subtype&&"request"!==e.subtype)return v.default.t(590);let t;const s=d.formatAmount1000(e.paymentCurrency,e.paymentAmount1000),a=(0,T.default)(e.sender),i=(0,T.default)(e.paymentMessageReceiverJid),n=l.default.get(e.paymentMessageReceiverJid),r={senderName:a,receiverName:i,amount:s,_plural:e.paymentAmount1000/1e3};t="send"===e.subtype?e.isGroupMsg?n&&n.isMe?v.default.t(2105,r):v.default.t(2106,r):v.default.t(2104,r):e.isGroupMsg?n&&n.isMe?v.default.t(2102,r):v.default.t(2103,r):v.default.t(2101,r);return t}(e);break;case M.OVERSIZED:i=(0,p.formatOversizedMsgNotification)(e);break;case M.UNKNOWN:i=(0,m.formatUnknownMsgNotification)(e);break;case M.LIST:if((0,S.listMsgCanRender)(A)){var O,w;i=`${(null===(O=e.list)||void 0===O?void 0:O.title)||""} ${(null===(w=e.list)||void 0===w?void 0:w.description)||""}`;break}return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,"";case M.LIST_RESPONSE:i=`${(null===(s=e.listResponse)||void 0===s?void 0:s.title)||""} ${(null===(a=e.listResponse)||void 0===a?void 0:a.description)||""}`;break;default:return __LOG__(3)`asDesktopNotification: Unrecognized type ${e.type}`,""}const D=v.default.isRTL()?"rtl":"ltr";let j="";if(j=r.default.relativeStr(e.t),I){const e=n.dir(I);return"ltr"!==D||P&&"ltr"!==P||e&&"ltr"!==e?"ltr"!==D||P&&"ltr"!==P?"ltr"!==D||e&&"ltr"!==e?"ltr"===D?(j&&(j=`- ${j}`),`${I}: ${i}${j}`):P&&"rtl"!==P||e&&"rtl"!==e?P&&"rtl"!==P?e&&"rtl"!==e?(j&&(j=`- ${j}`),`${I}: ${i}${j}`):(j&&(j=` - ${j}`),`${I}: ${i}`):(j&&(j=` - ${j}`),`${I}: ${i}`):(j&&(j=` - ${j}`),`${I}: ${i}`):(j&&(j=` - ${j}`),`${I}: ${i}`):(j&&(j=` - ${j}`),`${I}: ${i}`):(j&&(j=` - ${j}`),`${I}: ${i}`)}return j?"ltr"===D?`${i} - ${j}`:`${i} - ${j}`:i};var n=i(s(40052)),r=a(s(25142)),o=a(s(55454)),l=a(s(17025)),d=i(s(61447)),u=a(s(61090)),c=a(s(21840)),h=a(s(8381)),f=a(s(50215)),p=s(53676),m=s(41269),_=s(86723),g=a(s(12950)),v=a(s(2408)),S=s(74818),C=a(s(80959)),y=a(s(35371)),E=a(s(33070)),b=s(50313),T=a(s(92104));const M=o.default.MSG_TYPE},39276:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=i.default.get(e),a=null==s?void 0:s.name;return!a||a===t};var i=a(s(17025))},61090:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{subtype:t,body:s,recipients:a}=e;if("create"===t){const e=parseInt(s,10);return n.default.t(2226,{_plural:e,count:e})}if("add"===t){const e=a.length;return n.default.t(2043,{_plural:e,name:(0,i.getFormattedNames)(a,!0)})}if("remove"===t){const e=a.length;return n.default.t(2044,{_plural:e,name:(0,i.getFormattedNames)(a,!0)})}return""};var i=s(82677),n=a(s(2408))},21840:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s="";switch(e.subtype){case"miss":s=t?n.default.t(2081,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):n.default.t(2080);break;case"miss_video":s=t?n.default.t(2079,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):n.default.t(2078);break;case"miss_group":s=t?n.default.t(2077,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):n.default.t(2076);break;case"miss_group_video":s=t?n.default.t(2075,{time:i.default.timestampStr(e.t),_plural:i.default.timestampHour(e.t)}):n.default.t(2074)}return s};var i=a(s(25142)),n=a(s(2408))},8381:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e.subtype){case"identity":{const t=null==e.body?null:i.default.get(e.body);if(t&&t.isMe){__LOG__(4,void 0,new Error,!0)`formatE2ENotification: receive identity notification of self`,SEND_LOGS("SelfIdentityNotificationError");const t=e.chat;if(t.isUser){const e=t.contact?t.contact.formattedName:(0,h.default)(t.id);return l.default.t(2146,{contactName:e})}return t.isGroup?l.default.t(2031):t.isBroadcast?l.default.t(1904):""}{const s=t?t.formattedName:(0,h.default)(e.body);return l.default.t(2146,{contactName:s})}}case"device":return(0,n.default)(e);case"encrypt":{const t=e.id.remote;if(c.default.isGroup(t))return e.chat.isSupportGroup()?l.default.t(1681):u.default.isGroupCallEnabled()?l.default.t(1995):l.default.t(1992);if((0,o.default)(t.user))return l.default.t(1681);if(c.default.isBroadcast(t))return l.default.t(1902);{const e=u.default.isVoiceCallEnabled()||u.default.isVideoCallEnabled()?l.default.t(1929):l.default.t(1925),s=i.default.get(t);if(s&&s.isEnterprise){const t=(0,r.default)(s);return d.default.bspSystemMessageEnabled?e:l.default.t(1926,{businessName:t})}return e}}case"encrypt_now":return l.default.t(945);case"e2e_identity_unavailable":return l.default.t(1586);default:return""}};var i=a(s(17025)),n=a(s(5503)),r=a(s(80821)),o=a(s(23388)),l=a(s(2408)),d=a(s(65565)),u=a(s(61057)),c=a(s(69635)),h=a(s(98532))},5503:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){(0,i.default)("device"===e.subtype,"Shouldn't call this function if msg is not a device notification msg");let s,a=e.body?n.default.get(e.body):null;const l=1===e.devicesAdded&&0===e.devicesRemoved,d=0===e.devicesAdded&&1===e.devicesRemoved,u=!l&&!d;if(a&&a.isMe){const a=e.chat;if(a.isUser){const i=a.contact.formattedName;t?l?s=e.isThisDeviceAdded?r.default.t(1899,{contactName:i}):r.default.t(1897,{contactName:i}):d?s=r.default.t(2142,{contactName:i}):u&&(s=r.default.t(1917,{contactName:i})):s=r.default.t(2146,{contactName:i})}else a.isGroup?t?l?s=e.isThisDeviceAdded?r.default.t(1961):r.default.t(1898):d?s=r.default.t(2143):u&&(s=r.default.t(1918)):s=r.default.t(2031):a.isBroadcast&&(t?l?s=e.isThisDeviceAdded?r.default.t(1900):r.default.t(1896):d?s=r.default.t(2141):u&&(s=r.default.t(1916)):s=r.default.t(1904))}else{const i=e.body;a=null==i?null:n.default.get(i);const c=a?a.formattedName:(0,o.default)(i);t?l?s=r.default.t(1894,{contactName:c}):d?s=r.default.t(2140,{contactName:c}):u&&(s=r.default.t(1915,{contactName:c})):s=r.default.t(2146,{contactName:c})}return(0,i.default)(null!=s,"text shouldn't be null in the end"),s};var i=a(s(41143)),n=a(s(17025)),r=a(s(2408)),o=a(s(98532))},80821:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.verifiedLevel===i.default.VERIFIED_LEVEL.HIGH?e.verifiedName:e.formattedName};var i=a(s(55454))},46014:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var a;const u=i.default.gadd(s),c=l.default.isUser(s)||(null==u||null===(a=u.groupMetadata)||void 0===a?void 0:a.canSetEphemeralSetting());if(!t)return c?(0,o.getDisappearingMessageSettingUnknownAsAdminString)(e):(0,o.getDisappearingMessageSettingUnknownString)(e);const h=n.default.gadd(t);if(l.default.equals(t,(0,r.getMaybeMeUser)()))return c?(0,o.getDisappearingMessageSettingYouAsAdminString)(e):(0,o.getDisappearingMessageSettingYouString)(e);const f=h&&h.isMyContact?h.formattedName:(0,d.default)(t);if(c)return(0,o.getDisappearingMessageSettingOthersAsAdminString)(e,f);return(0,o.getDisappearingMessageSettingOthersString)(e,f)};var i=a(s(84758)),n=a(s(17025)),r=s(86723),o=s(31140),l=a(s(69635)),d=a(s(98532))},50215:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let s="";const a=e.get("type"),c=e.get("subtype"),h=e.displayName(),f=e.get("author"),p=e.get("body");let m,_;const g=""===h||null==h;if("group_notification"===a){const t=(0,r.getMaybeMeUser)();switch(c){case"add":s=d.default.equals(f,t)?l.default.t(2004):l.default.t(2003,{name:h});break;case"remove":s=d.default.equals(f,t)?l.default.t(2016):l.default.t(2015,{name:h});break;case"leave":s=d.default.equals(f,t)?l.default.t(2012):l.default.t(2011,{name:h});break;case"picture":s="remove"===p?d.default.equals(f,t)?l.default.t(2135):l.default.t(2134,{name:h}):d.default.equals(f,t)?l.default.t(2133):l.default.t(2132,{name:h});break;case"subject":s=d.default.equals(f,t)?l.default.t(2034,{subject:p}):g?l.default.t(2033,{subject:p}):l.default.t(2032,{name:h,subject:p});break;case"modify":m=(0,u.default)(e.get("author")),_=(0,u.default)(p),s=m===h?l.default.t(2006,{name:h,new_number:_}):l.default.t(2005,{name:h});break;default:__LOG__(2)`wa:formatGroupNotification:unknown message subtype: ${c}`}}else if("gp2"===a){const a=e.recipients,v=a?(0,o.getFormattedNames)(a,!0):"",S=a?a[0]:void 0,C=S?i.default.get(S):void 0,y=C?C.get("formattedName"):S?(0,u.default)(S):"";let E;const b=(0,r.getMaybeMeUser)();switch(c){case"add":s=f?d.default.equals(f,b)?l.default.t(2025,{participants:v}):d.default.equals(S,b)?g?l.default.t(2022):l.default.t(2018,{name:h}):g?l.default.t(2021,{participants:v}):l.default.t(2017,{name:h,participants:v}):d.default.equals(S,b)?l.default.t(2004):l.default.t(2003,{name:y});break;case"remove":s=!d.default.equals(S,b)||!d.default.equals(f,b)&&f?d.default.equals(S,b)&&f?g?l.default.t(2024):l.default.t(2020,{name:h}):d.default.equals(f,b)?l.default.t(2026,{participants:v}):f?g?l.default.t(2023,{participants:v}):l.default.t(2019,{name:h,participants:v}):l.default.t(2015,{name:y}):l.default.t(2016);break;case"leave":s=d.default.equals(S,b)?l.default.t(2012):l.default.t(2011,{name:v});break;case"picture":s="remove"===p?d.default.equals(f,b)?l.default.t(2135):l.default.t(2134,{name:h}):d.default.equals(f,b)?l.default.t(2133):l.default.t(2132,{name:h});break;case"subject":s=d.default.equals(f,b)?l.default.t(2034,{subject:p}):g?l.default.t(2033,{subject:p}):l.default.t(2032,{name:h,subject:p});break;case"modify":m=(0,u.default)(f),_=(0,u.default)(S),s=m===h?l.default.t(2006,{name:h,new_number:_}):l.default.t(2005,{name:h});break;case"create":s=d.default.equals(f,b)?p?l.default.t(1972,{subject:p}):l.default.t(1973):p?g?l.default.t(1971,{subject:p}):l.default.t(1969,{name:h,subject:p}):g?l.default.t(1968):l.default.t(1970,{name:h});break;case"delete":s=e.chat.isSupportGroup()?l.default.t(1670):l.default.t(1988);break;case"promote":E=a.length,s=1===E&&d.default.equals(S,b)?l.default.t(2014):l.default.t(2013,{participants:v,_plural:E});break;case"demote":E=a.length,s=1===E&&d.default.equals(S,b)?l.default.t(2008):l.default.t(2007,{participants:v,_plural:E});break;case"invite":s=d.default.equals(S,b)?l.default.t(2010):l.default.t(2009,{name:y});break;case"revoke_invite":s=d.default.equals(f,b)?l.default.t(1998):l.default.t(1997,{name:h});break;case"description":const i=t?g?l.default.t(1985):l.default.t(1983,{name:h}):g?l.default.t(1984):l.default.t(1982,{name:h});s=d.default.equals(f,b)?l.default.t(1986):i;break;case"announce":s="on"===p?d.default.equals(f,b)?l.default.t(1967):l.default.t(1966,{name:h}):d.default.equals(f,b)?l.default.t(1965):l.default.t(1964,{name:h});break;case"restrict":s="on"===p?d.default.equals(f,b)?l.default.t(2030):l.default.t(2029,{name:h}):d.default.equals(f,b)?l.default.t(2028):l.default.t(2027,{name:h});break;case"no_frequently_forwarded":s="on"===p?d.default.equals(f,b)?l.default.t(2002):l.default.t(2001,{name:h}):d.default.equals(f,b)?l.default.t(2e3):l.default.t(1999,{name:h});break;case"announce_msg_bounce":s=l.default.t(1963);break;case"v4_add_invite_sent":s=l.default.t(1752,{participants:v,_plural:a.length});break;case"v4_add_invite_join":s=l.default.t(1751,{participants:v,_plural:a.length});break;case"ephemeral":const r=parseInt(e.templateParams[0],10)||0,o=e.templateParams[1],C=e.id.remote;return(0,n.default)(r,o,C);default:__LOG__(2)`wa:formatGroupNotification:unknown message subtype: ${c}`}}l.default.isRTL()&&(s=l.default.forceRTL(s));return s};var i=a(s(17025)),n=a(s(46014)),r=s(86723),o=s(82677),l=a(s(2408)),d=a(s(69635)),u=a(s(98532))},60408:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{id:t}=e;switch(e.subtype){case"non_verified_transition":return o.default.t(2083,{businessName:(0,n.default)(e)});case"unverified_transition":return o.default.t(2199,{businessName:(0,n.default)(e)});case"verified_transition":return o.default.t(2205,{businessName:(0,n.default)(e)});case"verified_low_unknown":return o.default.t(2203,{businessName:(0,n.default)(e)});case"verified_high":return o.default.t(2201,{businessName:(0,n.default)(e)});case"verified_initial_unknown":return o.default.t(2171,{businessName:e.displayName()});case"verified_initial_low":return o.default.t(2169);case"verified_initial_high":return o.default.t(2167);case"verified_transition_any_to_none":return o.default.t(2175);case"verified_transition_any_to_high":return o.default.t(2173);case"verified_transition_high_to_low":return o.default.t(2177,{businessName:(0,n.default)(e)});case"verified_transition_high_to_unknown":return o.default.t(2179,{businessName:(0,n.default)(e)});case"verified_transition_unknown_to_low":return o.default.t(2187);case"verified_transition_low_to_unknown":return o.default.t(2181,{businessName:(0,n.default)(e)});case"verified_transition_none_to_low":return o.default.t(2183,{businessName:(0,n.default)(e)});case"verified_transition_none_to_unknown":return o.default.t(2185,{businessName:e.displayName()});case"biz_verified_transition_top_to_bottom":return o.default.t(316,{businessName:(0,n.default)(e)});case"biz_verified_transition_bottom_to_top":return o.default.t(314,{businessName:(0,n.default)(e)});case"biz_intro_top":{const s=(0,n.default)(e),a=l.default.isOfficialBizAccount(t.remote);return(0,i.default)(t.remote,s)?a?o.default.t(1404):o.default.t(286,{businessName:s}):a?o.default.t(1405):o.default.t(287,{businessName:s})}case"biz_intro_bottom":return o.default.t(284,{businessName:(0,d.default)(t.remote)});case"biz_name_change":return o.default.t(291,{businessName:(0,n.default)(e)});case"biz_move_to_consumer_app":return o.default.t(289);case"biz_two_tier_migration_top":{const s=(0,n.default)(e);return(0,i.default)(t.remote,s)?o.default.t(311,{businessName:s}):o.default.t(312,{businessName:s})}case"biz_two_tier_migration_bottom":return o.default.t(309,{businessName:(0,d.default)(t.remote)});case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_verified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_verified_to_bsp_premise_unverified":return o.default.t(324,{businessName:(0,n.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return o.default.t(325);case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_self_fb_unverified":case"blue_msg_to_bsp_fb":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_self_fb_unverified":return o.default.t(326,{businessName:(0,n.default)(e)});case"blue_msg_self_fb_verified":const s=(0,r.default)(e.chat.id.user),a=(0,n.default)(e);return s?o.default.t(327,{businessName:a}):o.default.t(326,{businessName:a});case"blue_msg_self_premise_unverified":return o.default.t(328,{businessName:(0,n.default)(e)});case"blue_msg_self_premise_verified":{const s=(0,n.default)(e);return(0,i.default)(t.remote,s)?o.default.t(329,{businessName:s}):o.default.t(330,{businessName:s})}case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_verified_to_unverified":return o.default.t(333,{businessName:(0,n.default)(e)});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_unverified_to_verified":{const s=(0,n.default)(e);return(0,i.default)(t.remote,s)?o.default.t(331,{businessName:s}):o.default.t(332,{businessName:s})}case"biz_privacy_mode_init_fb":case"biz_privacy_mode_to_fb":return c();case"biz_privacy_mode_init_bsp":case"biz_privacy_mode_to_bsp":return h();default:return null}},t.formatFbModalText=c,t.formatBspModalText=h;var i=a(s(39276)),n=a(s(31482)),r=a(s(72414)),o=a(s(2408)),l=a(s(69635)),d=a(s(92104)),u=s(85893);function c(){return(0,u.jsxs)(u.Fragment,{children:[o.default.t(302),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),o.default.t(303),"",o.default.t(304),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),o.default.t(305)]})}function h(){return(0,u.jsxs)(u.Fragment,{children:[o.default.t(302),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),o.default.t(303),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),o.default.t(305)]})}},55554:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{templateParams:t,id:s}=e;switch(e.subtype){case"non_verified_transition":return h.default.t(2084);case"unverified_transition":return h.default.t(2200);case"verified_transition":return h.default.t(2206);case"verified_low_unknown":return h.default.t(2204);case"verified_high":return h.default.t(2202);case"verified_initial_unknown":return h.default.t(2170);case"verified_initial_low":return h.default.t(2168,{businessName:(0,u.default)(e)});case"verified_initial_high":return h.default.t(2166,{businessName:(0,u.default)(e)});case"verified_transition_any_to_none":return h.default.t(2174);case"verified_transition_any_to_high":return h.default.t(2172,{businessName:(0,u.default)(e)});case"verified_transition_high_to_low":return h.default.t(2176,{businessName:(0,u.default)(e)});case"verified_transition_high_to_unknown":return h.default.t(2178,{businessName:(0,u.default)(e)});case"verified_transition_unknown_to_low":return h.default.t(2186,{businessName:(0,u.default)(e)});case"verified_transition_low_to_unknown":return h.default.t(2180,{businessName:(0,u.default)(e)});case"verified_transition_none_to_low":return h.default.t(2182);case"verified_transition_none_to_unknown":return h.default.t(2184);case"change_number":const a=t[0],i=r.default.get(a),v=i&&i.isMyContact?i.formattedName:(0,_.default)(a);return m.default.equals(e.chat.id,a)?h.default.t(563,{name:v}):h.default.t(562,{name:v});case"payment_transaction_status_update_failed":return h.default.t(2121,{receiverName:(0,g.default)(t[0]),relativeTime:n.default.paymentTimestampStr(e.t)});case"payment_transaction_request_cancelled":{const s=t[0],a=(0,g.default)(s),i=t[1],n=parseInt(t[2],10),r=o.formatAmount1000(i,n),l={contactName:a,currencyAndAmount:r,_plural:n/1e3};return e.id.fromMe?h.default.t(2090,l):h.default.t(2089,l)}case"payment_transaction_status_update_refunded":return h.default.t(2123,{receiverName:(0,g.default)(t[0]),relativeTime:n.default.paymentTimestampStr(e.t)});case"payment_transaction_status_update_refund_failed":return h.default.t(2122,{receiverName:(0,g.default)(t[0]),relativeTime:n.default.paymentTimestampStr(e.t)});case"payment_transaction_status_receiver_pending_setup":{const e=t[0],s=(0,g.default)(e),a=t[1],i=parseInt(t[2],10),n=o.formatAmount1000(a,i);return h.default.t(2118,{senderName:s,currencyAndAmount:n,_plural:i/1e3})}case"payment_transaction_status_receiver_success_after_hiccup":return h.default.t(2119,{senderName:(0,g.default)(t[0]),relativeTime:n.default.paymentTimestampStr(e.t)});case"payment_action_account_setup_reminder":return h.default.t(2088,{senderName:(0,g.default)(t[0])});case"payment_action_send_payment_reminder":return h.default.t(2096,{receiverName:(0,g.default)(t[0])});case"payment_action_send_payment_invitation":return h.default.t(2095,{receiverName:(0,g.default)(t[0])});case"payment_action_request_declined":{const s=t[0],a=(0,g.default)(s),i=t[1],n=parseInt(t[2],10),r=o.formatAmount1000(i,n),l={contactName:a,currencyAndAmount:r,_plural:n/1e3};return e.id.fromMe?h.default.t(2092,l):h.default.t(2091,l)}case"payment_action_request_expired":{const e=t[0],s=(0,g.default)(e),a=t[1],i=(0,g.default)(a),n=t[2],r=parseInt(t[3],10),l=o.formatAmount1000(n,r);return m.default.equals(e,(0,d.getMaybeMeUser)())?h.default.t(2094,{receiverName:i,currencyAndAmount:l,_plural:r/1e3}):h.default.t(2093,{senderName:s,currencyAndAmount:l,_plural:r/1e3})}case"biz_verified_transition_top_to_bottom":return h.default.t(315,{businessName:(0,u.default)(e)});case"biz_verified_transition_bottom_to_top":return h.default.t(313,{businessName:(0,u.default)(e)});case"biz_intro_top":const S=e.id.remote;return m.default.isOfficialBizAccount(S)?h.default.t(1403):h.default.t(285,{businessName:(0,u.default)(e)});case"biz_intro_bottom":return h.default.t(283);case"biz_name_change":return h.default.t(290,{businessName:(0,u.default)(e)});case"biz_move_to_consumer_app":return h.default.t(288);case"biz_two_tier_migration_top":return h.default.t(310,{businessName:(0,u.default)(e)});case"biz_two_tier_migration_bottom":return h.default.t(308);case"blue_msg_bsp_fb_to_bsp_premise":return h.default.t(334,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_fb":return h.default.t(335,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_premise":return h.default.t(336,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_unverified":return h.default.t(337);case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(338,{businessName:t}):h.default.t(339,{businessName:t})}case"blue_msg_bsp_fb_unverified_to_self_fb_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(340,{businessName:t}):h.default.t(341,{businessName:t})}case"blue_msg_bsp_fb_unverified_to_self_premise_verified":return h.default.t(342,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(343,{businessName:t}):h.default.t(344,{businessName:t})}case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":return h.default.t(345,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_fb_unverified":return h.default.t(346,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":return h.default.t(347,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_to_self_premise":return h.default.t(348,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_unverified":return h.default.t(349);case"blue_msg_bsp_premise_unverified_to_self_premise_verified":return h.default.t(350,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(351,{businessName:t}):h.default.t(352,{businessName:t})}case"blue_msg_bsp_premise_verified_to_self_premise_unverified":return h.default.t(353,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_fb_unverified":return h.default.t(354,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_premise_unverified":return h.default.t(355,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_fb_unverified":return h.default.t(356,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return h.default.t(357,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_bsp_premise":return h.default.t(358,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_self_premise":return h.default.t(359,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_unverified":return h.default.t(360);case"blue_msg_self_fb_unverified_to_bsp_premise_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(361,{businessName:t}):h.default.t(362,{businessName:t})}case"blue_msg_self_fb_unverified_to_self_premise_verified":return h.default.t(363,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified":{const t=(0,u.default)(e),a=(0,c.default)(e.chat.id.user);return(0,l.default)(s.remote,t)?a?h.default.t(367,{businessName:t}):h.default.t(364,{businessName:t}):a?h.default.t(366,{businessName:t}):h.default.t(365,{businessName:t})}case"blue_msg_self_fb_verified_to_bsp_premise_unverified":return h.default.t(368,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified_to_self_premise_unverified":return h.default.t(369,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_to_bsp_premise":return h.default.t(370,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_unverified":return h.default.t(371);case"blue_msg_self_premise_verified":return h.default.t(372,{businessName:(0,u.default)(e)});case"blue_msg_to_bsp_fb":return h.default.t(373,{businessName:(0,u.default)(e)});case"blue_msg_to_consumer":return h.default.t(374,{businessName:(0,u.default)(e)});case"blue_msg_to_self_fb":return h.default.t(375,{businessName:(0,u.default)(e)});case"blue_msg_unverified_to_bsp_fb_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(376,{businessName:t}):h.default.t(377,{businessName:t})}case"blue_msg_unverified_to_bsp_premise_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(378,{businessName:t}):h.default.t(379,{businessName:t})}case"blue_msg_unverified_to_self_fb_verified":{const t=(0,u.default)(e);return(0,l.default)(s.remote,t)?h.default.t(380,{businessName:t}):h.default.t(381,{businessName:t})}case"blue_msg_unverified_to_verified":return h.default.t(382,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_fb_unverified":return h.default.t(383,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_premise_unverified":return h.default.t(384,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_self_fb_unverified":return h.default.t(385,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_unverified":return h.default.t(386,{businessName:(0,u.default)(e)});case"biz_privacy_mode_init_fb":return h.default.t(301);case"biz_privacy_mode_to_fb":return h.default.t(307);case"biz_privacy_mode_init_bsp":return h.default.t(300);case"biz_privacy_mode_to_bsp":return h.default.t(306);case"block_contact":return"true"===t[0]?h.default.t(723):h.default.t(724);case"disappearing_mode":const C=t[0],y=parseInt(C,10)||0,E=t[1];if(m.default.equals(E,(0,d.getMaybeMeUser)()))return(0,f.getDisappearingModeYouString)(y);{const e=r.default.gadd(E);return(0,f.getDisappearingModeOtherString)(y,e.formattedName)}default:return p.default.isElectron?h.default.t(1723):h.default.t(1729)}};var n=i(s(25142)),r=i(s(17025)),o=a(s(61447)),l=i(s(39276)),d=s(86723),u=i(s(31482)),c=i(s(72414)),h=i(s(2408)),f=s(31140),p=i(s(35371)),m=i(s(69635)),_=i(s(98532)),g=i(s(92104))},31482:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.templateParams&&e.templateParams[0]?e.templateParams[0].toString():(0,i.default)(e.id.remote)};var i=a(s(92104))},65838:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"non_verified_transition":return(0,a.getNonVerifiedTransitionFaqUrl)();case"unverified_transition":return(0,a.getUnverifiedTransitionFaqUrl)();case"verified_transition":return(0,a.getVerifiedTransitionFaqUrl)();case"verified_low_unknown":return(0,a.getVerifiedLowUnknownFaqUrl)();case"verified_high":return(0,a.getVerifiedHighFaqUrl)();case"biz_intro_top":case"biz_intro_bottom":case"biz_two_tier_migration_bottom":case"biz_name_change":case"biz_verified_transition_top_to_bottom":case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":return(0,a.getBusinessFaqUrl)();case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_to_self_premise":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_to_self_premise":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_verified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_consumer_to_self_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_to_self_premise":case"blue_msg_self_fb_unverified":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_self_fb_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_self_premise_unverified":case"blue_msg_self_premise_verified":case"blue_msg_to_bsp_fb":case"blue_msg_to_consumer":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_unverified_to_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_bsp_premise_unverified":case"blue_msg_verified_to_self_fb_unverified":case"blue_msg_verified_to_unverified":return(0,a.getE2EEnterpriseFaqUrl)();case"biz_privacy_mode_init_fb":case"biz_privacy_mode_init_bsp":return(0,a.getE2EEnterpriseFaqUrl)();default:return(0,a.getFaqUrl)()}};var a=s(57092)},33070:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=null!=t?t:"",a=e.mentionMap();if(!a)return function(e){return n.default.supportsFeature(n.default.F.RICH_TEXT)?(0,i.default)(e,l,o.UnformatSerializer):e}(s);if(n.default.isDropLastNameEnabled()&&e.chat.groupMetadata){const t=e.chat.groupMetadata,l=n.default.supportsFeature(n.default.F.RICH_TEXT)?r.Configuration.FormattedGroupNotification({mentions:a,groupMetadata:t}):r.Configuration.RawGroupNotification({mentions:a,groupMetadata:t});return(0,i.default)(s,l,o.UnformatSerializer)}const d=n.default.supportsFeature(n.default.F.RICH_TEXT)?r.Configuration.FormattedNotification({mentions:a}):r.Configuration.RawNotification({mentions:a});return(0,i.default)(s,d,o.UnformatSerializer)};var i=a(s(29730)),n=a(s(12950)),r=s(49895),o=s(6249);const l=r.Configuration.Format({mentions:{}})},92104:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=i.default.get(e);return t?t.formattedName:(0,n.default)(e)};var i=a(s(17025)),n=a(s(98532))},41269:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatUnknownMsgText=function(e){if(e.isSentByMe)switch(e.type){case"reaction":return i.default.t(1727);default:switch(e.subtype){case"reaction":return i.default.t(1727);default:return i.default.t(1728)}}switch(e.subtype){case"phone":return i.default.t(1725);case"phone_only_feature":return n.default.isElectron?i.default.t(1724):i.default.t(1731);case"reaction":return i.default.t(1726);default:return n.default.isElectron?i.default.t(1723):i.default.t(1729)}},t.formatUnknownMsgNotification=function(e){switch(e.subtype){case"phone":return i.default.t(1725);case"phone_only_feature":return i.default.t(1731);case"reaction":return i.default.t(1726);default:return i.default.t(1729)}};var i=a(s(2408)),n=a(s(35371))},31423:(e,t,s)=>{"use strict";t.Z=void 0;var a=s(33237);var i=new class{constructor(){this._trackers=[],this._currFPS=0,this._numSamples=0,this._totalTime=0,this._startTracking=()=>{this._frameId||(this._prevFrameTS=this._prevUpdateTS=window.performance.now(),this._frameId=requestAnimationFrame(this._handleFrame))},this._stopTracking=()=>{this._frameId&&(this._prevFrameTS=this._prevUpdateTS=void 0,cancelAnimationFrame(this._frameId),this._frameId=void 0)},this._handleFrame=()=>{if(!this._trackers.length)return;const e=this._prevFrameTS,t=this._prevUpdateTS;if(null==e||null==t)return;const s=window.performance.now();this._numSamples+=1,this._totalTime+=s-e,s-t>=500&&this._update(s),this._prevFrameTS=s,this._frameId=requestAnimationFrame(this._handleFrame)}}whenLessThan(e,t){if(e<0||e>60)throw new RangeError("fps must be between 0 and 60");return this._insertTracker([e,t]),()=>{this._removeTracker(t)}}_insertTracker(e){const t=e[0],s=function(e,t){let s=0,a=e.length-1,i=Math.floor((s+a)/2);for(;e[i]!==t&&s<a;)t<e[i]?a=i-1:s=i+1,i=Math.floor((s+a)/2);if(e[i]<t)return i+1;return i}(this._trackers.map((e=>e[0])),t);this._trackers.splice(s,0,e),1===this._trackers.length&&(this._addEventListeners(),this._startTracking())}_removeTracker(e){const t=this._trackers.length;for(let s=0;s<t;s++)if(e===this._trackers[s][1]){this._trackers.splice(s,1),0===this._trackers.length&&(this._removeEventListeners(),this._stopTracking());break}}_update(e){const t=1e3/(this._totalTime/this._numSamples),s=Math.min(t,60);if(Math.abs(s-this._currFPS)>1){this._currFPS=s;const e=this._filterCallbacks();e.length&&this._triggerCallbacks(e,s)}this._numSamples=0,this._totalTime=0,this._prevUpdateTS=e}_filterCallbacks(){const e=[];for(let t=this._trackers.length-1;t>=0;t--){const[s,a]=this._trackers[t];if(s<=this._currFPS)break;e.push(a)}return e}_triggerCallbacks(e,t){const s=window.performance.now();(0,a.requestIdleCallback)((()=>{e.forEach((e=>e(t,s)))}))}_addEventListeners(){window.addEventListener("focus",this._startTracking),window.addEventListener("blur",this._stopTracking)}_removeEventListeners(){window.removeEventListener("focus",this._startTracking),window.removeEventListener("blur",this._stopTracking)}};t.Z=i},44456:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,date:t,unread:s,album:a},d,u,c,h,f){const p=[];let m,_=0;for(_=0;!m&&_<d.length;_++)m=d[_];_--;let g=!1,v=!1,S=m?(0,r.default)(m):0,C=0,y=_;for(;m;){const E=m;let b;v||p.push(t(E,C++)),E===c&&s&&p.push(s(h));let T,M,x,I=_+1;for(;!b&&I<d.length;I++)b=d[I];const P=[];let A,N=!1,O=!1,w=null;if(E.asGroupedSticker&&!o(E,f)){P.push(E.asGroupedSticker),O=E===u,w=0,y=_+1;const e=d[y];e&&e.asGroupedSticker&&(0,i.canBeGroupedAsAlbum)(E,e)&&e!==c&&!o(e,f)&&(P.push(e.asGroupedSticker),b=d[y+1],N=!0,A=!0,e===u&&(O=!0,w=1))}if(E.asAlbumAsset&&!o(E,f)){P.push(E.asAlbumAsset);let e,t=m;for(O=m===u,y=_;y<d.length-1&&P.length<n.default.ALBUM_MAX_SIZE&&(t=d[y],e=d[y+1],e&&e.asAlbumAsset&&(0,i.canBeGroupedAsAlbum)(t,e)&&e!==c&&!o(e,f));y++)P.push(e.asAlbumAsset),e===u&&(O=!0);P.length>=n.default.ALBUM_MIN_SIZE&&(N=!0,A=!1,b=d[y+1])}if(b){const e=b;x=(0,r.default)(b),M=x===S,T=M&&(0,i.canBeGroupedWithNext)(E,e)&&b!==c}else T=!1,M=!1,x=0;if(N){let e;e=A?P.reduce(((e,t)=>`${e}-${t.id.toString()}`),"grouped-sticker-"):l(P),p.push(a(P,e,g,T,O,w)),_=y+1,m=d[_],g=T,v=M,S=x}else p.push(e(E,E===u,g,T)),_++,g=T,v=M,S=x,m=b}return p};var i=s(42841),n=a(s(55454)),r=a(s(89923));function o(e,t){return null==t||e.t>t.t}function l(e){const t=e.length;return`album-${e[0]?e[0].id.toString():""}-${e[t-1]?e[t-1].id.toString():""}-${t}`}},82677:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedName=d,t.getFormattedNames=function(e,t=!1){if(!Array.isArray(e))return d(e,t);const s=e.map((e=>d(e,t)));return(0,o.default)(s,t)};var i=a(s(91952)),n=a(s(17025)),r=s(62238),o=a(s(86245)),l=s(85893);function d(e,t=!1){const a=n.default.gadd(e,{silent:!0}),o=t?void 0:(d=e,e=>{e&&(e.preventDefault(),e.stopPropagation()),(0,r.findChat)(d).then((e=>{i.default.openChatFromUnread(e).then((t=>{t&&i.default.focusChatTextInput(e)}))}))});var d;const u=s(78972).default;return t?a.formattedUser:(0,l.jsx)(u,{contact:a,onClick:o})}},2380:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return u.apply(this,arguments)},t.getMsgDownloadData=c;var i=a(s(48926)),n=a(s(55454)),r=a(s(12006)),o=a(s(75571)),l=a(s(4231)),d=a(s(99389));function u(){return(u=(0,i.default)((function*(e){const t=Array.isArray(e)?e:[e];try{const e=yield Promise.all(t.map((e=>c(e))));if(e.length>1){return{blob:yield(0,d.default)(e),name:r.default.getDefaultName({t:Math.round(Date.now()/1e3),type:"unknown",mimetype:"application/zip",isVcardOverMmsDocument:!1,filename:"",vcardList:[]})}}return e[0]}catch(e){throw __LOG__(4,void 0,new Error,!0)`Failed to get msg download data: ${e.message}`,SEND_LOGS("msg-download-data-failed"),e}}))).apply(this,arguments)}function c(){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e){const t="text/vcard";if(e.type===n.default.MSG_TYPE.VCARD)return{name:r.default.getDefaultName(e),blob:new Blob([e.body],{type:t})};if(e.type===n.default.MSG_TYPE.MULTI_VCARD)return{name:r.default.getDefaultName(e),blob:new Blob([e.vcardList.map((e=>e.vcard)).join("\n")],{type:t})};const s=f(e);if(s)return s;yield e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD,isUserInitiated:!0});const a=f(e);if(a)return a;throw new Error("Unable to download because blob cannot be found")}))).apply(this,arguments)}function f(e){const{filehash:t,mediaBlob:s,renderableUrl:a}=e.mediaData;if(s)return{name:r.default.getDefaultName(e),url:a,blob:s.forceToBlob()};const i=o.default.get(t);return i?{blob:i,name:r.default.getDefaultName(e),url:o.default.getOrCreateURL(t)}:null}},77710:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n};var i=a(s(23279));let n=window.innerHeight;const r=(0,i.default)((()=>{n=window.innerHeight}),500);window.addEventListener("resize",r)},98251:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=0;if(!e)return t;e.quotedMsg&&(t+=54);e.caption&&(t+=31);switch(e.type){case l.NOTIFICATION:case l.GROUP_NOTIFICATION:case l.GP2:case l.BROADCAST_NOTIFICATION:case l.E2E_NOTIFICATION:case l.CALL_LOG:case l.CIPHERTEXT:case l.REVOKED:case l.CHAT:e.linkPreview&&(t+=53);const s=(0,o.numCodepoints)(e.body&&e.body.toString());return t+19*Math.ceil(s/100)+13;case l.IMAGE:return t+(e.mediaData&&e.mediaData.fullWidth&&e.mediaData.fullHeight||0)?Math.floor(Math.min(330/e.mediaData.fullWidth*e.mediaData.fullHeight,330)):330;case l.VIDEO:case l.AUDIO:return e.isGif?t+137:t+166;case l.LOCATION:return t+e.isLive?n.MSG_HEIGHT:r.PREVIEW_HEIGHT;case l.PTT:return t+67;case l.VCARD:return t+74;case l.DOCUMENT:return t+188;case l.STICKER:return t+125;case l.UNKNOWN:default:return t}};var i=a(s(55454)),n=s(518),r=s(44199),o=s(49002);const{MSG_TYPE:l}=i.default},80489:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(54302).Mirrored(["CONTACT_US","LICENSES","DECREASE_PTT_SPEED","DELETE_OR_EXIT_CHAT","GO_TO_NEXT_CHAT","GO_TO_PREV_CHAT","INCREASE_PTT_SPEED","LOGOUT","OPEN_NEW_CHAT","OPEN_NEW_GROUP","OPEN_PROFILE","OPEN_SETTINGS","SEARCH","SEARCH_IN_CHAT","TOGGLE_ARCHIVE","TOGGLE_MUTE","TOGGLE_PIN","TOGGLE_UNREAD","ZOOM_IN","ZOOM_OUT","ZOOM_RESET","OPEN_EMOJI_PANEL","OPEN_GIF_PANEL","OPEN_STICKER_PANEL"]);t.default=a},74121:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(88283)),n=s(6794);var r=new class{constructor(){document.addEventListener("keydown",(e=>{const t=(0,n.getAction)(e);t&&(0,i.default)(t)}))}trigger(e,...t){}menuBatchRenderWith(){}};t.default=r},50256:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LIST_FOCUSABLE_ITEM_CLASS_NAME=void 0;var i=a(s(81109)),n=a(s(48926)),r=s(67294),o=a(s(47193)),l=a(s(39e3)),d=a(s(42229)),u=a(s(63477)),c=s(85893);const h="focusable-list-item";t.LIST_FOCUSABLE_ITEM_CLASS_NAME=h;class f extends r.Component{constructor(...e){var t;super(...e),t=this,this._focusedItem=null,this._listIsFocused=!1,this._listHasBeenFocused=!1,this._priorityItemHasBeenFocused=!1,this._setRef=e=>{this._ref=e},this._setRefUIE=e=>{this._refUIE=e},this._handleKeyUp=e=>{e.preventDefault(),this._shiftFocus(-1)},this._handleKeyDown=e=>{e.preventDefault(),this._shiftFocus(1)},this._handleKeyEnd=e=>{e.preventDefault(),this._asyncHandleKeyEnd()},this._asyncHandleKeyEnd=(0,n.default)((function*(){var e,s;const{onBeforeEnd:a}=t.props;a&&(yield a());const i=t._getLastItem(),n=null===(e=(s=t.props).getPriorityFocusItem)||void 0===e?void 0:e.call(s);n&&!t._priorityItemHasBeenFocused?t._focusItem(n):i&&t._focusItem(i)})),this._handleFocusGain=e=>{if(this._ref===e.target){var t;if(this._isKeyboardUser()){var s,a;const e=null===(s=(a=this.props).getPriorityFocusItem)||void 0===s?void 0:s.call(a);!this._listHasBeenFocused&&e?this._focusItem(e):this._focusCurrentItem()}null===(t=this._refUIE)||void 0===t||t.activate()}else e.target instanceof HTMLElement&&e.target.classList.contains(h)&&this._setFocusedItem(e.target);this._listIsFocused=!0,this._listHasBeenFocused=!0},this._handleBlur=()=>{this._listIsFocused=!1},this._handleFocusRequest=()=>{this._ref&&!this._ref.contains(document.activeElement)&&o.default.focus(this._ref)}}componentDidUpdate(){this._priorityItemHasBeenFocused=!1,this._listIsFocused&&this._focusedItem&&this._ref&&!this._ref.contains(this._focusedItem)&&o.default.focus(this._ref)}_setFocusedItem(e){e.setAttribute("tabIndex","0"),this._focusedItem&&this._focusedItem!==e&&this._focusedItem.setAttribute("tabIndex","-1"),this._focusedItem=e}_isKeyboardUser(){return this.context}_getItems(){return this._ref?Array.from(this._ref.getElementsByClassName(h)):[]}_getLastItem(){const e=this._getItems();return e.length>0?e[e.length-1]:null}_focusItem(e){var t,s;const a=null===(t=(s=this.props).getPriorityFocusItem)||void 0===t?void 0:t.call(s);a&&a===e&&(this._priorityItemHasBeenFocused=!0),o.default.focus(e,{preventScroll:!1})}_focusCurrentItem(){this._shiftFocus(0)}_shiftFocus(e){const t=this._getItems();if(0===t.length)return;let s;if(this._focusedItem){const a=t.indexOf(this._focusedItem);-1!==a&&(s=a+e<0?t[0]:t[a+e])}s||(s=t[t.length-1]);const a=s;a.hasAttribute("tabIndex")||(__LOG__(3)`Focusable list items should have \`tabIndex\` attribute (that makes it programmatically focusable), but this element did not have it:`,function(e){e.setAttribute("tabIndex","-1")}(a)),this._focusItem(a)}render(){const{"aria-label":e,className:t,children:s,dataTab:a,handlers:n,role:r}=this.props,o=(0,i.default)((0,i.default)({},n),{},{up:this._handleKeyUp,down:this._handleKeyDown,end:this._handleKeyEnd,"command+down":this._handleKeyEnd});return(0,c.jsx)(u.default,{displayName:"ListHotKeys",ref:this._setRefUIE,uimState:u.default.State.PASSIVE,requestFocus:this._handleFocusRequest,children:(0,c.jsx)(l.default,{handlers:o,className:t,"data-tab":a,onFocus:this._handleFocusGain,onBlur:this._handleBlur,onRef:this._setRef,role:r,"aria-label":e,children:s})})}}t.default=f,f.contextType=d.default,f.displayName="ListHotKeys"},88283:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){switch(e){case i.default.CONTACT_US:return B;case i.default.LICENSES:return G;case i.default.DELETE_OR_EXIT_CHAT:return L;case i.default.GO_TO_NEXT_CHAT:return k;case i.default.GO_TO_PREV_CHAT:return F;case i.default.LOGOUT:return A;case i.default.OPEN_NEW_CHAT:return x;case i.default.OPEN_NEW_GROUP:return I;case i.default.OPEN_PROFILE:return P;case i.default.OPEN_SETTINGS:return M;case i.default.SEARCH:return N;case i.default.SEARCH_IN_CHAT:return R;case i.default.TOGGLE_ARCHIVE:return O;case i.default.TOGGLE_MUTE:return w;case i.default.TOGGLE_PIN:return D;case i.default.TOGGLE_UNREAD:return j;case i.default.ZOOM_IN:return U;case i.default.ZOOM_OUT:return V;case i.default.ZOOM_RESET:return H;case i.default.OPEN_EMOJI_PANEL:return Y;case i.default.OPEN_GIF_PANEL:return K;case i.default.OPEN_STICKER_PANEL:return q;case i.default.INCREASE_PTT_SPEED:case i.default.DECREASE_PTT_SPEED:return null}}(e);if(!t)return;try{t()}catch(t){__LOG__(3)`keyboard:error occurred running action ${e}.`}};var i=a(s(80489)),n=a(s(84758)),r=a(s(91952)),o=a(s(75940)),l=a(s(9322)),d=a(s(55454)),u=a(s(17025)),c=s(86723),h=a(s(2408)),f=a(s(51434)),p=a(s(45472)),m=a(s(3268)),_=a(s(52172)),g=s(95535),v=a(s(2606)),S=a(s(3165)),C=a(s(19938)),y=a(s(41253)),E=a(s(22360)),b=a(s(72787)),T=s(85893);function M(){r.default.existsDrawerLeft((e=>{e&&r.default.closeDrawerLeft(),r.default.openDrawerLeft((0,T.jsx)(y.default,{}))}))}function x(){r.default.existsDrawerLeft((e=>{e&&r.default.closeDrawerLeft(),r.default.openDrawerLeft((0,T.jsx)(m.default,{}))}))}function I(){r.default.existsDrawerLeft((e=>{e&&r.default.closeDrawerLeft(),r.default.openDrawerLeft((0,T.jsx)(_.default,{}))}))}function P(){r.default.existsDrawerLeft((e=>{e&&r.default.closeDrawerLeft();const t=(0,c.getMaybeMeUser)(),s=E.default.assertGet(t),a=S.default.assertGet(t),i=u.default.assertGet(t);r.default.openDrawerLeft((0,T.jsx)(v.default,{status:s,profilePicThumb:a,contact:i,conn:l.default}))}))}function A(){if(!p.default.some((e=>e.ack===d.default.ACK.CLOCK&&e.local&&e.isSentByMe)))return b.default.logout();r.default.openModal((0,T.jsx)(o.default,{title:h.default.t(696),onOK:()=>{__LOG__(2)`Keyboard: user inputs logout`,b.default.logout()},okText:h.default.t(1214),onCancel:()=>r.default.closeModal(),cancelText:h.default.t(1912),children:h.default.t(1637)}))}function N(){r.default.focusChatSearch()}function O(){const e=W();if(e&&e.canArchive()){const t=e.archive;r.default.archiveChat(e,!t)}}function w(){const e=W();if(e&&e.mute.canMute()){const t=e.mute.isMuted;r.default.muteChat(e,!t)}}function D(){const e=W();if(e&&(null!=e.pin||n.default.filter((e=>e.pin)).length<3)){const t=Boolean(e.pin);r.default.pinChat(e,!t)}}function j(){const e=W();if(e){const t=e.markedUnread;r.default.markChatUnread(e,!t)}}function R(){const e=W();e&&r.default.chatSearch(e)}function L(){const e=W();e&&r.default.deleteOrExitChat(e)}function k(){r.default.focusNextChat(!0)}function F(){r.default.focusPrevChat(!0)}function B(){r.default.openModal((0,T.jsx)(C.default,{}))}function G(){r.default.openModal((0,T.jsx)(f.default,{}))}function U(){}function V(){}function H(){}function W(){const e=n.default.filter((e=>e.active));return e.length?e[0]:void 0}function Y(){r.default.openComposeBoxPanel(g.PANELS.EMOJI)}function K(){r.default.openComposeBoxPanel(g.PANELS.GIF)}function q(){r.default.openComposeBoxPanel(g.PANELS.STICKER)}},6794:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAction=function(e){const{key:t,ctrlKey:s,metaKey:a,altKey:i,shiftKey:n}=e;if("Control"===t||"Meta"===t||"Alt"===t||"Shift"===t)return;return s&&a||s&&i?o[function(e,t){if(t&&("Tab"===e||"Enter"===e||"Backspace"===e||" "===e))return`Shift+${e}`;return e}(t,n)]:void 0},t.getKey=function(e){const t=r(e);if(!t.length)return;const{key:s,nativeKey:a,nativeModifier:i}=t[0],n=a||s;return n?l(n,i):void 0},t.getAdditionalShortcuts=function(){const e={};return[...n.default.members()].forEach((t=>{const s=r(t);s.length<=1||s.slice(1).forEach((({key:s,nativeKey:a,nativeModifier:i})=>{const n=a||s;n&&(e[l(n,i)]=t)}))})),e},t.getShortcutKey=function(e){const t=r(e);if(t.length){const{key:e,nativeKey:s,webKey:a}=t[0];return a||e}return};var i=a(s(11700)),n=a(s(80489));function r(e){switch(e){case n.default.CONTACT_US:return[{key:"H"}];case n.default.DELETE_OR_EXIT_CHAT:return[{key:"Backspace",nativeKey:"D"}];case n.default.GO_TO_NEXT_CHAT:return[{key:"Tab",nativeModifier:"Ctrl"},{key:"}"}];case n.default.GO_TO_PREV_CHAT:return[{key:"Shift+Tab",nativeModifier:"Ctrl"},{key:"{"}];case n.default.LOGOUT:return[];case n.default.OPEN_NEW_CHAT:return[{key:"n"}];case n.default.OPEN_NEW_GROUP:return[{key:"N"}];case n.default.OPEN_PROFILE:return[{key:"p"}];case n.default.OPEN_SETTINGS:return[{key:","}];case n.default.SEARCH:return[{webKey:"/",nativeKey:"f"}];case n.default.SEARCH_IN_CHAT:return[{key:"F"}];case n.default.TOGGLE_ARCHIVE:return[{key:"E"}];case n.default.TOGGLE_MUTE:return[{key:"M"}];case n.default.TOGGLE_PIN:return[{key:"P"}];case n.default.TOGGLE_UNREAD:return[{key:"U"}];case n.default.ZOOM_IN:return[{key:"+"},{key:"="}];case n.default.ZOOM_OUT:return[{key:"-"}];case n.default.ZOOM_RESET:return[{key:"0"}];case n.default.INCREASE_PTT_SPEED:return[{key:">"}];case n.default.DECREASE_PTT_SPEED:return[{key:"<"}];case n.default.OPEN_EMOJI_PANEL:return[{key:"e"}];case n.default.OPEN_GIF_PANEL:return[{key:"g"}];case n.default.OPEN_STICKER_PANEL:return[{key:"s"}];default:return[]}}const o=function(){const e={};return[...n.default.members()].forEach((t=>{r(t).forEach((({key:s,webKey:a})=>{const i=a||s;i&&(e[i]=t)}))})),e}();function l(e,t="CmdOrCtrl"){const s="+"!==e?e:"Plus";if(!(1===s.length&&s.match(/[a-z]/i)))return`${t}+${(0,i.default)(s)}`;return s.match(/[a-z]/)?`${t}+${(0,i.default)(s)}`:`Shift+${t}+${s}`}},22750:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(48926)),n=a(s(88306)),r=s(67012),o=s(60934),l=a(s(12950)),d=s(45002),u=s(48460),c=a(s(865));function h(){return(h=(0,i.default)((function*(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND)){const t=(0,u.parseAPICmd)(e);return t.resultType===r.APICmd.CATALOG?(0,d.getProductOrCatalogLinkPreview)(e,t.data.catalogOwnerJid):t.resultType===r.APICmd.PRODUCT?(0,d.getProductOrCatalogLinkPreview)(e,t.data.businessOwnerJid,t.data.productId):null}const{title:t,description:s,canonicalUrl:a,matchedText:i,preview:n,thumbnail:h,doNotPlayInline:f}=yield c.default.queryLinkPreview(e);return i&&(t||s)?{url:e,data:{title:t||void 0,description:s||void 0,canonicalUrl:a||void 0,matchedText:i,richPreviewType:"video"===n?o.ExtendedTextMessagePreviewType.VIDEO:o.ExtendedTextMessagePreviewType.NONE,thumbnail:h||void 0,doNotPlayInline:f}}:null}))).apply(this,arguments)}var f=(0,n.default)((function(){return h.apply(this,arguments)}));t.default=f},45002:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductOrCatalogLinkPreview=function(){return _.apply(this,arguments)};var i=a(s(48926)),n=a(s(60028)),r=a(s(17025)),o=s(61447),l=s(60934),d=s(86723),u=a(s(45993)),c=a(s(2408)),h=s(63063),f=a(s(69635)),p=s(89573);const m=100;function _(){return(_=(0,i.default)((function*(e,t,s){var a,i,_,g;if(!f.default.isWid(t))return null;const v=(0,p.createWid)(t);let S;try{S=yield n.default.find(v)}catch(e){return null}const C=s?S.productCollection.get(s):S.productCollection.getProductModels().find((e=>"APPROVED"===e.reviewStatus&&!e.isHidden));if(null==C||"APPROVED"!==C.reviewStatus||C.isHidden)return null;const y=C.getPreviewImage();let E,b,T,M;if(y&&([E]=yield(0,h.getResizedThumbData)(y.mediaUrl,[{width:m,height:m,imageFormat:"image/jpeg",imageFormatOptions:.75}])),null===(a=(0,d.getMaybeMeUser)())||void 0===a?void 0:a.equals(v)){const e=r.default.get(v);if(null==e)return null;b=e.displayName}else{var x;b=null===(x=(yield(0,u.default)(v)).bizInfo)||void 0===x?void 0:x.verifiedName.name}s?(T=c.default.t(555,{productName:C.name,catalogOwnerName:b}),C.description&&null!=C.priceAmount1000&&C.currency?M=`${C.description}  ${(0,o.formatAmount1000)(C.currency,C.priceAmount1000)}`:C.description?M=C.description:null!=C.priceAmount1000&&C.currency&&(M=(0,o.formatAmount1000)(C.currency,C.priceAmount1000))):(T=c.default.t(554,{catalogOwnerName:b}),M=c.default.t(553));return{url:e,data:{title:T,description:M||void 0,canonicalUrl:e,matchedText:e,richPreviewType:l.ExtendedTextMessagePreviewType.NONE,thumbnail:null===(i=E)||void 0===i?void 0:i.dataUrl,thumbnailHeight:null===(_=E)||void 0===_?void 0:_.height,thumbnailWidth:null===(g=E)||void 0===g?void 0:g.width,doNotPlayInline:!0}}}))).apply(this,arguments)}},25281:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectionUrl=function(e,t){const s=n.default.getLocale();return`${o}//${e},${t}?hl=${s}`},t.getSearchUrl=function(e){const t=n.default.getLocale();return`${l}/${encodeURIComponent(e)}/z?hl=${t}`},t.getMapUrl=function(e,t,s){const a=n.default.getLocale();return s?`${l}/${encodeURIComponent(s)}/@${e},${t},${u}z?hl=${a}`:r.default.build(d,{q:`${e},${t}`,z:u,hl:a})};var i=a(s(55454)),n=a(s(2408)),r=a(s(1458));const{G_MAPS_DIR_URL:o,G_MAPS_SEARCH_URL:l,G_MAPS_URL:d,SEARCH_ZOOM:u}=i.default},10214:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(e,t){let s,a=!1,i=0,u=!1;function p(){i&&clearTimeout(i),i=setTimeout((()=>{t?t():(!function(e){"camera"===e?n.default.openModal((0,c.jsx)(l.default,{messaging:l.Messaging.CAMERA,type:l.default.TYPE.GUIDE_ALLOW})):n.default.openModal((0,c.jsx)(l.default,{messaging:l.Messaging.MIC,type:l.default.TYPE.GUIDE_ALLOW}))}(e),u=!0)}),1e3)}return{asyncStream:(0,d.default)((({retry:t,failCount:i})=>new Promise(((n,l)=>{p(),o.default?(0,o.default)(h[e][i]).then((e=>a?void f(e):(s=e,e))).then(n).catch((s=>{"NotReadableError"===s.name&&h[e][i+1]?t():l(s)})):(__LOG__(2)`MediaCapture:start() no ability to capture media`,l(new r.GUM.GUMError))})))).catch((e=>{const t=e&&e.name||e,s=r.GUM[t]||r.GUM.GUMError;return Promise.reject(new s)})).finally((()=>{u&&n.default.closeModal(),i&&clearTimeout(i)})),disposeStream:()=>{a=!0,s&&f(s)}}},t.stop=f,t.isSrcObjectInVideoElement=function(){void 0===p&&(p="srcObject"in document.createElement("video"));return p};var n=i(s(91952)),r=s(13540),o=i(s(22079)),l=a(s(47683)),d=i(s(90923)),u=i(s(65565)),c=s(85893);const h={camera:[{video:{width:u.default.imageMaxEdge,height:u.default.imageMaxEdge}},{video:{width:Math.min(1280,u.default.imageMaxEdge),height:Math.min(720,u.default.imageMaxEdge)}},{video:!0}],microphone:[{audio:!0}]};function f(e){if("function"==typeof e.stop)e.stop();else{const t=e.getTracks();for(let e=0;e<t.length;e++)t[e].stop()}}let p},25861:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);t.yj=function(){if(!h())return;setInterval((()=>{new o.default.WebcMemoryStat((0,n.default)((0,n.default)({},(0,d.default)(h(),"getMemoryInfo()")),{},{hasVerifiedNumber:u.default.mode===u.StreamMode.MAIN,numMessages:l.default.length})).commit()}),r.default.MEMORY_METRIC_INTERVAL)};var n=i(s(81109)),r=i(s(55454)),o=i(s(4231)),l=i(s(45472)),d=i(s(91619)),u=a(s(46364));const c=Date.now();function h(){const e=performance&&performance.memory;if(e)return{uptime:(Date.now()-c)/1e3,jsHeapSizeLimit:e.jsHeapSizeLimit,totalJsHeapSize:e.totalJSHeapSize,usedJsHeapSize:e.usedJSHeapSize}}},94367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResults=function(e,t){const s=t.map((({contact:e})=>e)),a=(e||"").toLowerCase();return s.filter((e=>function(e,t){if(t.isMe)return!1;const s=[t.searchName||t.formattedName];!t.isMyContact&&t.notifyName&&s.push(t.notifyName.toLowerCase());return s.some((t=>function(e,t){let s=-1;do{if(t.indexOf(e,s+1)===s+1)return!0}while(-1!==(s=t.indexOf(" ",s+1)));return!1}(e,t)))}(a,e)))}},83680:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openMessengerRoomUrl=function(e){const t={source:"whatsapp",ep:e?3:4},s=r.default.build("https://messenger.com/groupcall/create",t);(0,i.openExternalLink)(s);const a=n.default.DESTINATION.BROWSER,o=e?n.default.ROOMS_ENTRY_POINT.ATTACHMENT:n.default.ROOMS_ENTRY_POINT.WEB_MENU;new n.default.RoomsCreationFlow({entryResult:a,roomsEntryPoint:o}).commit()};var i=s(4919),n=a(s(4231)),r=a(s(1458))},66329:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(2525)),n=a(s(41609)),r=a(s(95863));class o extends r.default{constructor(e,t){super(),this.list=e,this.selected=e.reduce(((e,t,s)=>(e[s]=!1,e)),{}),this.getter=t}init(e=[]){(0,n.default)(this.selected)||((0,n.default)(e)?this.unsetAll():(this.selected=e.reduce(((e,t,s)=>{const a=this.list.indexOf(t);return e[s]=a>-1&&this.selected[a],e}),{}),this.list=e))}unsetAll(){(0,i.default)(this.selected,((e,t)=>{e&&this.set(t,!1)}))}reset(e=!0){(0,i.default)(this.selected,((t,s)=>{t&&this.trigger(this.getter(this.list[s]),!0,!0,e)}))}set(e,t=!0,s=!0){if(!this.list.length)return;const a=Math.min(Math.max(e,-1),this.list.length-1),i=a>-1?this.list[a]:void 0;i&&(this.selected[a]&&!t||!this.selected[a]&&t)&&(this.selected[a]=t,this.trigger(this.getter(i),t,s))}setVal(e,t=!0,s=!0){let a=this.list.indexOf(e);-1===a&&(a=this.list.length,this.list.push(e),this.selected[a]=!1),this.set(a,t,s)}setFirst(e=!0){(0,n.default)(this.list)||this.set(0,!0,e)}setLast(e=!0){(0,n.default)(this.list)||this.set(this.list.length-1,!0,e)}getSelected(){return this.list.reduce(((e,t,s)=>(this.selected[s]&&e.push(t),e)),[])}isSelected(e){return!!this.selected[this.list.indexOf(e)]}isInList(e){return this.list.includes(e)}}t.default=o},6084:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllMuteDurations=l,t.getDefaultMuteDuration=function(){return l()[0].duration},t.calculateMuteExpiration=function(e){if(e===Number.POSITIVE_INFINITY)return n.default.MUTE_ALWAYS_EXPIRATION_SENTINEL;return 60*e*60+(0,i.default)().unix()};var i=a(s(30381)),n=a(s(55454)),r=a(s(2408)),o=a(s(65565));function l(e){return e?[{label:r.default.t(1287),duration:1},{label:r.default.t(1290),duration:8},{label:r.default.t(1286),duration:24},{label:r.default.t(1288),duration:168}]:[{label:r.default.t(1290),duration:8},{label:r.default.t(1288),duration:168},o.default.muteAlways?{label:r.default.t(1291),duration:Number.POSITIVE_INFINITY}:{label:r.default.t(1289),duration:8760}]}},36073:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=a(s(6479)),r=a(s(15971)),o=a(s(84758)),l=a(s(91952)),d=a(s(55454)),u=a(s(2408)),c=a(s(45472)),h=s(74289);t.default=class{constructor(e,t,s){this.close=()=>{this.notification&&this._waitForInteractionStop().then((()=>{this.notification&&(0,h.isFunction)(this.notification.close)&&this.notification.close()})).catch((()=>{}))},this._onClose=()=>{this.waitingPromise.resolver(),window.removeEventListener("beforeunload",this.close),this.notification&&(this.notification.removeEventListener("click",this._onClick),this.notification.removeEventListener("close",this._onClose),this.notification.removeEventListener("show",this._onShow)),window.clearTimeout(this._onShowTimeout),this.msg&&this.msg.off("change:type",this._onRevoke)},this._onClick=()=>{window.focus(),this.onClick();const e=this.chat,t=this.msg;if(!e)return;const s=t&&t!==e.msgs.last()?e.getSearchContext(t):void 0;l.default.openChatAt(e,s).then((t=>{t&&l.default.focusChatTextInput(e)})),l.default.closeModalMedia(),this.close()},this._onShow=()=>{this.msg&&this.msg.on("change:type",this._onRevoke)},this._onRevoke=()=>{this.msg&&this.msg.type===d.default.MSG_TYPE.REVOKED&&this.close()},this.msg=c.default.get(t),this.chat=o.default.get(e);const a=!!r.default.get(t);this._timeoutDuration=a?d.default.CALL_NOTIFICATION_TIMEOUT:d.default.NOTIFICATION_TIMEOUT;const f=new Promise((e=>{this.waitingPromise={resolver:e}}));this.waitingPromise.promise=f;const{title:p,notification:m}=s,_=(0,n.default)(s,["title","notification"]);try{this.notification=new m(p,(0,i.default)({tag:a?t:e.toString(),renotify:!0,dir:"auto",lang:u.default.getLocale(),silent:!0},_)),this.notification.addEventListener("click",this._onClick),this.notification.addEventListener("close",this._onClose),this.notification.addEventListener("show",this._onShow),window.addEventListener("beforeunload",this.close)}catch(e){__LOG__(2)`Failed to create notification: ${e.name}:${e.message}`,this.waitingPromise.resolver()}}onClick(){}_waitForInteractionStop(){return Promise.resolve()}waitForClose(){return this.waitingPromise.promise}detach(){this._onClose()}}},66922:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownAsNeeded=function(){T.forEach(((e,t)=>{O(T,t)})),M.forEach(((e,t)=>{O(M,t)}))},t.showCallNotification=function(e,t,s,a){if(!e||!t||_.default.globalMute().isMuted)return;if(window.Notification&&window.Notification.permission===d.default.PERMISSION_ALLOWED&&_.default.getGlobalNotifications()){const i=u.default.get(e),n=i?i.formattedName:(0,y.default)(e);let r;r=a?s?m.default.t(1055,{name:n}):m.default.t(1056,{name:n}):s?m.default.t(1057,{name:n}):m.default.t(1058,{name:n});const o=m.default.t(1054);A(M,e,t,r,o,d.default.USER_DEFAULT_ICON)}_.default.getGlobalSounds()&&(M.get(e.toString())||Promise.resolve()).then(g.playNotification).catch((()=>{}))},t.showMsgNotification=function(e){const t=e.chat;if(document.hasFocus()&&t.active)return;if(_.default.globalMute().isMuted)return;if(function(e){if(!e.isGroup)return!1;if(e.isGroup&&e.isReadOnly)return!1;const t=Date.now(),s=e.squelch||0;if(t>s)return p.default.find(e.id).then((()=>{const t=p.default.get(e.id);if(!t)return;const s=t.participants.length,a=1e3*Math.min(120,30+5*s);e.squelch=Date.now()+a})).catch((0,i.filteredCatch)(c.WebdDrop,(function(){e.squelch=Date.now()+6e4}))),!1;return!0}(t))return;if(!x(e))return;if(b.default.supportsFeature(b.default.F.MD_BACKEND)&&E.default.isResumeOnSocketDisconnectInProgress())return;if(window.Notification&&window.Notification.permission===d.default.PERMISSION_ALLOWED&&_.default.getGlobalNotifications()){let s=(0,o.default)(e);s&&s.charCodeAt(0)>=128&&(s=" "+s);const a=t.isGroup?d.default.GROUP_DEFAULT_ICON:d.default.USER_DEFAULT_ICON,i=t.isGroup?m.default.t(742):m.default.t(741),n=t.contact.formattedName||i;A(T,t.id,e.id.toString(),n,s,a,t.canSend)}_.default.getGlobalSounds()&&(t.id&&T.get(t.id.toString())||Promise.resolve()).then(g.playNotification).catch((()=>{}))},t.cancelCallNotification=function(e){e&&O(M,e.toString())},t.closeNotifications=function(e){if(!e||!e.id)return;O(T,e.id.toString()),O(M,e.id.toString())},t.shouldNotify=x,t.shouldNotifyForType=I,t.isArchivedAndNotMentioned=P;var i=s(55084),n=s(90536),r=s(13253),o=a(s(92522)),l=a(s(84758)),d=a(s(55454)),u=a(s(17025)),c=s(54647),h=s(86723),f=s(78615),p=a(s(75798)),m=a(s(2408)),_=a(s(80959)),g=s(3766),v=a(s(23082)),S=a(s(3165)),C=a(s(87947)),y=a(s(98532)),E=a(s(23301)),b=a(s(12950));const T=new Map,M=new Map;function x(e){return!function(e){const t=e.chat;if(!t.mute.isMuted)return!1;if(!t.isGroup)return!0;const s=(0,h.getMaybeMeUser)();if(e.isMentioned(s)||e.isQuoted(s)){const t=l.default.get(e.sender);return!0===(null==t?void 0:t.mute.isMuted)}return!0}(e)&&(!P(e)&&I(e))}function I(e){return!e.isFutureproof}function P(e){const t=e.chat;if(!(0,f.archiveV2Supported)())return!1;if(!C.default.showArchiveV2)return!1;if(!t.archive)return!1;if(!t.isGroup)return!0;const s=(0,h.getMaybeMeUser)();if(e.isMentioned(s)||e.isQuoted(s)){const t=l.default.get(e.sender);return!0===(null==t?void 0:t.mute.isMuted)}return!0}function A(e,t,s,a,o,l,u){const h=(0,n.promiseTimeout)(S.default.find(t).cancellable(),1500,"showNotificationTimeout").then((function(e){const t=e&&e.img?e.img:l;return(0,g.cachePath)(t)})).catch((0,i.filteredCatch)([c.WebdDrop,r.TimeoutError],(function(){return __LOG__(2)`NotificationBackend:IconLoadTimeoutError:${t.toString()}`,(0,g.cachePath)(l)}))).then((i=>{if(window.Notification.permission!==d.default.PERMISSION_ALLOWED)return Promise.reject(new Promise.CancellationError("Permission Denied"));const n=new v.default(t,s,a,o,i,u);return n.waitForClose().then((()=>{N(e,t,n)})),n}));return h.catch((0,i.filteredCatch)(Promise.CancellationError,(function(){N(e,t)}))),e.set(t.toString(),h),h}function N(e,t,s){const a=e.get(t.toString());if(a){if(s){if(a.isFulfilled()&&s!==a.value())return;if(a.isPending())return}e.delete(t.toString())}}function O(e,t){const s=e.get(t);if(s){if(s.isFulfilled()){s.value().close()}else s.cancel();e.delete(t)}}},3766:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.playNotification=function(){n.play().catch((()=>{}))},t.cachePath=function(e){return Promise.resolve(e)};var i=a(s(55454));const n=new window.Audio(i.default.NOTIFICATION_TONE_PATH)},23082:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(36073)),n=a(s(2561)),r=a(s(1458));class o extends i.default{constructor(e,t,s,a,i){super(e,t,{title:n.default.normalizeAllEmojis(s),notification:window.Notification,body:n.default.normalizeAllEmojis(a),icon:r.default.relToAbs(i)})}}t.default=o},70422:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.test(e)?e.replace(/[^0-9]/g,""):null};const s=/^[0-9+()\- ]+$/},41329:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(7900)),n=a(s(22079)),r=a(s(47815));class o{constructor(e){this.duration=0,this.totalLength=0,this.recordedPages=[],this.state="inactive",this._isFirstBuffer=!1,this.storePage=({data:e})=>{if(this.recordedPages.push(e),this.totalLength+=e.length,4&e[5]){(0,i.default)(this.encoder,"this.encoder").removeEventListener("message",this.storePage);const e=new Uint8Array(this.totalLength);let t=0;for(let s=0;s<this.recordedPages.length;s++)e.set(this.recordedPages[s],t),t+=this.recordedPages[s].length;this.eventTarget.dispatchEvent(new CustomEvent("dataAvailable",{detail:new Blob([e],{type:"audio/ogg; codecs=opus"})})),this.recordedPages=[],this.eventTarget.dispatchEvent(new Event("stop"))}};let t=e;if(!o.isRecordingSupported())throw new Error("Recording is not supported in this browser");this.audioContext=new window.AudioContext,this.config=t=t||{},this.config.bufferLength=t.bufferLength||4096,this.config.monitorGain=t.monitorGain||0,this.config.numberOfChannels=t.numberOfChannels||1,this.config.originalSampleRate=this.audioContext.sampleRate,this.config.encoderSampleRate=t.encoderSampleRate||48e3,this.config.leaveStreamOpen=t.leaveStreamOpen||!1,this.config.maxBuffersPerPage=t.maxBuffersPerPage||40,this.config.encoderApplication=t.encoderApplication||2049,this.config.encoderFrameSize=t.encoderFrameSize||20,this.config.streamOptions=t.streamOptions||{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}},this.eventTarget=document.createDocumentFragment(),this.scriptProcessorNode=this.audioContext.createScriptProcessor(this.config.bufferLength,this.config.numberOfChannels,this.config.numberOfChannels),this.scriptProcessorNode.onaudioprocess=e=>{this.encodeBuffers(e.inputBuffer)},this.monitorNode=this.audioContext.createGain(),this.setMonitorGain(this.config.monitorGain),this.config.sampleRate<this.audioContext.sampleRate&&this.createButterworthFilter()}static isRecordingSupported(){return Boolean(window.AudioContext&&n.default)}addEventListener(e,t,s){this.eventTarget.addEventListener(e,t,s)}clearStream(){this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),delete this.stream)}createButterworthFilter(){const e=this.audioContext.createBiquadFilter(),t=this.audioContext.createBiquadFilter(),s=this.audioContext.createBiquadFilter();this.filterNode=e,this.filterNode2=t,this.filterNode3=s,e.type=t.type=s.type="lowpass";const a=this.config.sampleRate/2;e.frequency.value=t.frequency.value=s.frequency.value=a-a/3.5355,e.Q.value=.51764,t.Q.value=.70711,s.Q.value=1.93184,e.connect(t),t.connect(s),s.connect(this.scriptProcessorNode)}encodeBuffers(e){if(this._isFirstBuffer)this._isFirstBuffer=!1;else if("recording"===this.state){const t=[];for(let s=0;s<e.numberOfChannels;s++)t[s]=e.getChannelData(s);(0,i.default)(this.encoder,"this.encoder").postMessage({command:"encode",buffers:t}),this.duration+=e.duration,this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration}))}}initStream(e){if(this.stream)this.eventTarget.dispatchEvent(new Event("streamReady"));else{if(e){this.stream=e;const t=this.audioContext.createMediaStreamSource(e);return this.sourceNode=t,t.connect(this.filterNode||this.scriptProcessorNode),t.connect(this.monitorNode),void this.eventTarget.dispatchEvent(new Event("streamReady"))}if(!n.default)throw new Error("Recorder:initStream no audio capability");(0,n.default)({audio:this.config.streamOptions}).then((e=>{this.stream=e;const t=this.audioContext.createMediaStreamSource(e);this.sourceNode=t,t.connect(this.filterNode||this.scriptProcessorNode),t.connect(this.monitorNode),this.eventTarget.dispatchEvent(new Event("streamReady"))})).catch((e=>{this.eventTarget.dispatchEvent(new ErrorEvent("streamError",{error:e}))}))}}pause(){"recording"===this.state&&(this.state="paused",this.eventTarget.dispatchEvent(new Event("pause")))}removeEventListener(e,t,s){this.eventTarget.removeEventListener(e,t,s)}resume(){"paused"===this.state&&(this.state="recording",this.eventTarget.dispatchEvent(new Event("resume")))}setMonitorGain(e){this.monitorNode.gain.value=e}start(){if("inactive"===this.state&&this.stream){const e=new r.default;this.encoder=e,this.recordedPages=[],this.totalLength=0,e.addEventListener("message",this.storePage),this._isFirstBuffer=!0,this.duration=0,this.state="recording",this.monitorNode.connect(this.audioContext.destination),this.scriptProcessorNode.connect(this.audioContext.destination),this.eventTarget.dispatchEvent(new Event("start")),this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration})),e.postMessage({command:"encode-init",config:this.config})}}stop(){if("inactive"!==this.state){this.state="inactive",this.audioContext.close&&this.audioContext.close(),this.monitorNode.disconnect(),this.scriptProcessorNode.disconnect(),this.config.leaveStreamOpen||this.clearStream();(0,i.default)(this.encoder,"this.encoder").postMessage({command:"encode-done"})}}}t.default=o},19407:(e,t,s)=>{"use strict";var a=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.liveLocationIcon=function(e){let t="live-location";e&&(t+="-active");const s=function(){switch(i.default.platform){case i.PLATFORMS.ANDROID:case i.PLATFORMS.SMBA:return"android";case i.PLATFORMS.IPHONE:case i.PLATFORMS.SMBI:case i.PLATFORMS.IPAD:case i.PLATFORMS.IPOD:return"iphone";case i.PLATFORMS.WP7:return"wp";default:return""}}();s&&(t+="-"+s);return t};var i=a(s(9322))},82181:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class s{constructor(e){this.promise=e,this.lastUsedTime=this.createdTime=+Date.now()}}t.default=class{constructor(e,{maxCached:t=10,maxAge:s=1/0,shouldCache:a}){this._cache={},this._maxCached=t,this._maxAge=s,this._createPromiseFunc=e,this._shouldCacheFunc=a}getOrRun(e,...t){const a=this._cache;if(this._maxAge!==1/0){const e=Date.now()-this._maxAge,t=Object.keys(a);for(let s=0;s<t.length;s++){const i=t[s];a[i].createdTime<e&&delete a[i]}}const i=a[e];if(i)return i.lastUsedTime=+Date.now(),i.promise;const n=Object.keys(a);if(n.length>=this._maxCached){let e,t;for(let s=0;s<n.length;s++){const i=n[s],r=a[i];(null==t||r.lastUsedTime<t)&&(t=r.lastUsedTime,e=i)}e&&delete a[e]}const r=this._createPromiseFunc.apply(void 0,[e,...t]);return a[e]=new s(r),r.then((t=>{const s=this._shouldCacheFunc;s&&this._cache[e]===r&&!s(t)&&delete this._cache[e]})).catch((()=>{this._cache[e]===r&&delete this._cache[e]})),r}}},42321:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(81109)),n=s(42841),r=a(s(55454)),o=s(86723),l=a(s(77710)),d=a(s(98251));const u="before",c="after";function h(e,t,s){let a=t;const i=e.toArray(),n=s===u?-1:1;return{hasNext:()=>a>=0&&a<i.length,next(){const e=i[a];return e||__LOG__(3)`Invalid cursor at ${a}, array.length = ${i.length}, element = ${e}`,a+=n,e}}}function f(e,t,s,a=1,i){const o=(0,l.default)()*a,u=h(e,t,s);let c,f=0,p=0;for(;u.hasNext();){const e=u.next(),t=(0,d.default)(e),s=2*(e.isNotification?1:0)+e.isSentByMe;if(f+=t+(s&&s===c?2:12),p++,f>o)break;if(p>=i)break;const a=e.asGroupedSticker,l=null!=e.asAlbumAsset;if(a||l){const t=[];let s=!1,c=1;if(a){let a;if(u.hasNext()){if(a=u.next(),t.push(a),p++,p>=i)break;(0,n.canBeGroupedAsAlbum)(e.safe(),a.safe())&&a.asGroupedSticker&&(s=!0)}}if(l){let s,a=e;for(;u.hasNext()&&c<r.default.ALBUM_MAX_SIZE&&(s=u.next(),t.push(s),p++,!(p>=i))&&(0,n.canBeGroupedAsAlbum)(a.safe(),s.safe())&&s.asAlbumAsset;)c++,a=s}if(a&&!s||l&&c<r.default.ALBUM_MIN_SIZE){if(f+=t.reduce(((e,t)=>e+(0,d.default)(t)),0),f>o)break}}c=s}return p}function p(e,t,s,a=1,i){const u=(0,l.default)()*a,c=h(e,t,s);let f,p=0,m=0;for(;c.hasNext();){const e=c.next(),t=(0,d.default)(e),s=e.author||(e.isSentByMe?(0,o.getMaybeMeUser)():void 0);if(p+=t+(s&&!e.isSentByMe&&s!==f?19:0)+(s&&s===f?2:12),m++,p>u)break;if(m>=i)break;const a=e.asGroupedSticker,l=null!=e.asAlbumAsset;if(a||l){const t=[];let s=!1,o=1;if(a){let a;if(c.hasNext()){if(a=c.next(),t.push(a),m++,m>=i)break;(0,n.canBeGroupedAsAlbum)(e.safe(),a.safe())&&a.asGroupedSticker&&(s=!0)}}if(l){let s,a=e;for(;c.hasNext()&&o<r.default.ALBUM_MAX_SIZE&&(s=c.next(),t.push(s),m++,!(m>=i))&&(0,n.canBeGroupedAsAlbum)(a.safe(),s.safe())&&null!=s.asAlbumAsset;)o++,a=s}if(a&&!s||l&&o<r.default.ALBUM_MIN_SIZE){if(p+=t.reduce(((e,t)=>e+(0,d.default)(t)),0),p>u)break}}f=s}return m}function m(e,t,s,a=1,i){const n=(0,l.default)()*a,r=h(e,t,s);let o=0,u=0;for(;r.hasNext();){const e=r.next();if(o+=(0,d.default)(e)+65,u++,o>n)break;if(u>=i)break}return u}function _(e,t,s=c){const a=2*(0,l.default)(),i=h(e,t,s);let[n,r,o]=[0,!0,null];for(;i.hasNext();){const e=i.next(),t=(0,d.default)(e),s=2*(e.isNotification?1:0)+e.isSentByMe;if(n+=t+(s&&s===o?2:12),n>a){r=!1;break}o=s}return r}class g{static create(e){const{msgCollection:t,focusedMsgKey:s,type:a,maxInitialCount:i=Number.MAX_SAFE_INTEGER}=e;return new g({type:a}).init(s,t,i)}constructor(e){const{type:t,before:s,after:a,focusedMsgKey:i,prevFocusedMsgKey:n}=e;this._type=t,this._focusedMsgKey=i,this._prevFocusedMsgKey=n,this.before=s||0,this.after=a||0}_cloneWith(e){return new g((0,i.default)({type:this._type,before:this.before,after:this.after,focusedMsgKey:this._focusedMsgKey,prevFocusedMsgKey:this._prevFocusedMsgKey},e))}_getCursorSize(e,t,s,a,i){return function(e){switch(e){case r.default.RENDER_CURSOR.CONVERSATION:return f;case r.default.RENDER_CURSOR.GROUP_CONVERSATION:return p;case r.default.RENDER_CURSOR.STARRED_DRAWER:return m;default:return f}}(this._type)(e,t,s,a,i)}getStart(e){return Math.max(v(this._focusedMsgKey,e,this._type)-this.before,0)}getEnd(e){return Math.min(v(this._focusedMsgKey,e,this._type)+this.after+1,e.length)}hasBefore(e){return v(this._focusedMsgKey,e,this._type)-this.before>0}hasAfter(e){return v(this._focusedMsgKey,e,this._type)+this.after<e.length-1}init(e,t,s=Number.MAX_SAFE_INTEGER){return new g({type:this._type,before:0,after:0,focusedMsgKey:e}).loadBefore(t,{factor:1,maxCount:s}).loadAfter(t,{factor:1,maxCount:s})}setFocusedMsgKey(e,t){const s=v(this._focusedMsgKey,e,this._type),a=v(t,e,this._type);let i,n;return t?(n=this.after-(a-s),i=this.before+(a-s)):(i=this.before+this.after,n=0),this._cloneWith({focusedMsgKey:t,before:i,after:n})._updatePrev(e)}ensureValidFocus(e){const t=null!=this._prevFocusedMsgKey&&null==e.get(this._prevFocusedMsgKey),s=null!=this._focusedMsgKey&&null==e.get(this._focusedMsgKey);let a=this;return t&&(a=a._updatePrev(e)),s&&(a=a.focusBefore(e)),a}_updatePrev(e){const t=v(this._focusedMsgKey,e,this._type);return this._cloneWith({prevFocusedMsgKey:t>0?e.at(t-1).id:void 0})}focusBefore(e){return this._cloneWith({focusedMsgKey:this._prevFocusedMsgKey})._updatePrev(e)}loadBefore(e,t){const{count:s,maxCount:a=Number.MAX_SAFE_INTEGER,factor:i=2}=t||{},n=null!=s&&0!==s?s:this._getCursorSize(e,Math.max(0,this.getStart(e)-1),u,i,a);return this._cloneWith({before:this.before+n})}loadAfter(e,t){const{count:s,maxCount:a=Number.MAX_SAFE_INTEGER,factor:i=2}=t||{},n=null!=s&&0!==s?s:this._getCursorSize(e,this.getEnd(e),c,i,a);return this._cloneWith({after:this.after+n})}loadBeforeCapped(e,t){const{count:s,factor:a=2}=t||{};return _(e,this.getStart(e),c)?this.loadBefore(e,{count:s,factor:a}):this}resetBeforeCursor(e,t=Number.MAX_SAFE_INTEGER){if(!_(e,this.getStart(e),c)){const s=Math.max(0,this.getEnd(e)-1),a=this._getCursorSize(e,s,u,2,t);return this._cloneWith({before:Math.min(this.before,a)})}return this}}function v(e,t,s){if(e){const s=t.get(e),a=t.indexOf(s);if(-1!==a)return a}return function(e){switch(e){case r.default.RENDER_CURSOR.CONVERSATION:case r.default.RENDER_CURSOR.GROUP_CONVERSATION:return r.default.RENDER_CURSOR.RECENT_AT_BOTTOM;case r.default.RENDER_CURSOR.STARRED_DRAWER:return r.default.RENDER_CURSOR.RECENT_AT_TOP;default:return r.default.RENDER_CURSOR.RECENT_AT_BOTTOM}}(s)===r.default.RENDER_CURSOR.RECENT_AT_TOP?0:t.length-1}t.default=g},88893:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return/\s\s+/.test(e)?e.replace(/\s\s+/g,(e=>{let s="";for(let a=0;a<e.length;a++)s+=t&&"\n"===e[a]?"\n":"";return s})):e}},23721:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s(95863));class n extends i.default{constructor(e){super(),this.isSelectable=e}setSelectable(e){return this.isSelectable=e,this.trigger("update-selectable",e),this.isSelectable}}t.default=n},29931:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logShopsManagementEvent=function(e,t){const{shouldLogJid:s=!0,isShopsProductPreviewVisible:a}=null!=t?t:{};new r.default.WaShopsManagement({shopsManagementAction:e,shopsSellerJid:s?o():void 0,isShopsProductPreviewVisible:a}).commit()};var i=a(s(9322)),n=s(86723),r=a(s(4231));function o(){const e=i.default.isSMB?(0,n.getMaybeMeUser)():void 0;return null==e?void 0:e.user}},55865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.initSessionId()}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}}},42237:(e,t,s)=>{"use strict";var a=s(95318),i=s(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.reconnect=void 0;var n=i(s(46364)),r=a(s(72787));const o=(new class{constructor(){this.isReconnecting=!1,this.reconnectIfDisconnected=()=>{this.isReconnecting||n.default.displayInfo!==n.StreamInfo.OFFLINE||(this.isReconnecting=!0,r.default.poke(),r.default.summary(),setTimeout((()=>this.isReconnecting=!1),3e3))}}}).reconnectIfDisconnected;t.reconnect=o},18282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{delay:s=0}=null!=t?t:{};let a,i,n;const r=t=>{(null==n||t-n>=s)&&(e(t),n=t),i||(a=requestAnimationFrame(r))};return a=requestAnimationFrame(r),()=>{i=!0,cancelAnimationFrame(a)}}},62701:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.securityUrl=function(){return r.default.build(i.default.SECURITY_LINK,{lg:n.default.getLocale()})};var i=a(s(55454)),n=a(s(2408)),r=a(s(1458))},61087:(e,t)=>{"use strict";function s(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFromStylesProp=s,t.getIntFromStylesProp=function(e,t){return parseInt(s(e,t),10)},t.getFloatFromStylesProp=function(e,t){return parseFloat(s(e,t))}},66523:(e,t,s)=>{"use strict";var a=s(95318);t.D=function({action:e,message:t}){switch(e){case r.default.REQUEST_STREAMING_INFO:return function(e){const t=d.default.get(e);return t?(0,o.videoStreamingInfo)(t):null}(t.key);case r.default.EXP_BACKOFF:return s(77062).expDelaySec(t.generation,60).then((()=>u.default.waitIfOffline({signal:(new n.default).signal})));case r.default.REQUEST_RMR:return function(){return h.apply(this,arguments)}(t);case r.default.SEND_STREAMING_CHUNK:const e=t.msgKey,a=d.default.get(e);if(!a)return void delete f[e.toString()];let i;f.hasOwnProperty(e)?i=f[e.toString()]:f[e.toString()]=i=new c(a.size),i.push(t.data),i.isComplete()&&((0,o.manuallySetMedia)({msg:a,media:i.serialize(),rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING}),delete f[e.toString()]);break;default:return Promise.reject("Invalid Video Streaming Action")}};var i=a(s(48926)),n=a(s(14505)),r=a(s(32052)),o=s(57990),l=a(s(4231)),d=a(s(45472)),u=a(s(40298));class c{constructor(e){this.ranges=[],this.buffer=[],this.size=e,e||__LOG__(3)`video buffer falsy size: ${e}`}push(e){this.buffer.push(e),this.add(e.start,e.end)}add(e,t){let s=e;const a=this.ranges;for(let e=0;e<a.length;e++){let[i,n]=a[e];if(!(s>n+1)){if(t+1<i)return a.splice(e,0,[s,t]);for(;e+1<a.length;){const[r,o]=a[e+1];if(t+1<r)break;s=Math.min(s,i),a.splice(e,1),i=r,n=o}return void(a[e]=[Math.min(s,i),Math.max(t,n)])}}return a.push([s,t])}isComplete(){const e=this.ranges,t=this.size;return!!t&&(1===e.length&&0===e[0][0]&&e[0][1]===t-1)}serialize(){const e=new Uint8Array(this.size),t=this.buffer;for(let s=0;s<t.length;s++){const{start:a,buffer:i}=t[s];e.set(new Uint8Array(i),a)}return e}}function h(){return(h=(0,i.default)((function*(e){const t=d.default.get(e.key);if(!t)return null;throw yield t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING,isUserInitiated:!0}),new Error("downloaded media instead of streaming")}))).apply(this,arguments)}const f={}},85472:(e,t,s)=>{"use strict";var a=s(20862),i=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,s)=>{const a=new n.default;a.onerror=function(e){a.terminate(),s(new r.DecodeWebpResultsError("worker error",e))},a.onmessageerror=function(e){a.terminate(),s(new r.DecodeWebpResultsError("worker message error",e))},a.onmessage=e=>{a.terminate();const s=e.data;t(s)},a.postMessage({webpBuffer:e},[e])}))};var n=i(s(49704)),r=a(s(13540))},66893:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListener=t.SelectionListener=t.WhileFocusedListener=void 0;var i=s(67294),n=a(s(91952)),r=a(s(71681)),o=a(s(79485));class l extends i.PureComponent{constructor(...e){super(...e),this.scrollMsg=(e,t)=>{this.props.parent.scrollMsg(e,t)},this.flashFocusedMsg=()=>{var e,t;null===(e=(t=this.props.parent).highlight)||void 0===e||e.call(t)},this.flashMentionMsg=()=>{var e,t;null===(e=(t=this.props.parent).highlightMention)||void 0===e||e.call(t)}}componentDidMount(){this.props.listeners.add(n.default,"scroll_to_focused_msg",this.scrollMsg),this.props.listeners.add(n.default,"flash_focused_msg",this.flashFocusedMsg),this.props.listeners.add(n.default,"flash_mention_msg",this.flashMentionMsg)}render(){return null}}l.displayName="WhileFocused";const d=(0,r.default)(l);t.WhileFocusedListener=d;class u extends i.PureComponent{constructor(...e){super(...e),this.onSelectChange=e=>{this.props.parent.onSelectChange(e)}}componentDidMount(){const{listeners:e,msgId:t,selectedMessages:s}=this.props;e.add(s,t,this.onSelectChange)}componentDidUpdate(e){const{listeners:t,msgId:s,selectedMessages:a}=this.props;e.selectedMessages!==a&&(t.remove(e.selectedMessages,s,this.onSelectChange),t.add(a,s,this.onSelectChange))}render(){return null}}u.displayName="Selection";const c=(0,r.default)(u);t.SelectionListener=c;class h extends i.PureComponent{componentDidUpdate(){this.props.parent.forceUpdate()}render(){return null}}h.CONCERNS={mediaData:["isGif"]},h.displayName="MediaListenerClass";const f=(0,o.default)(h,h.CONCERNS);t.MediaListener=f},7380:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(38438),n=a(s(79808));function r(e){return(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2}function o(e){return(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}const l=/[^\x00-\x7F]/g;t.default=class{constructor(){this.files=[],this.filenameCount={}}add(e,t,s=new Date){let a=function(e){return e.replace(/\\/,"/").replace(l,"")}(t);this.filenameCount[a]>=0?(this.filenameCount[a]+=1,a=a.replace(/\.(\w+)$/," ("+this.filenameCount[a]+").$1")):this.filenameCount[a]=0,this.files.push([e,{crc:(0,n.default)(e),path:a,date:s}])}create(){let e=0,t=0,s=0;const a=[],n=[];this.files.forEach((l=>{const[d]=l,u=d.size(),c=function([e,{path:t,crc:s,date:a}]){const n=new i.Binary(void 0,!0);return n.ensureCapacity(30+t.length),n.writeUint32(67324752),n.writeUint8(10),n.writeUint8(0),n.writeUint16(0),n.writeUint16(0),n.writeUint16(r(a)),n.writeUint16(o(a)),n.writeUint32(s),n.writeUint32(e.size()),n.writeUint32(e.size()),n.writeUint16(t.length),n.writeUint16(0),n.writeString(t),n}(l),h=function([e,{path:t,crc:s,date:a}],n){const l=new i.Binary(void 0,!0);return l.ensureCapacity(46+t.length),l.writeUint32(33639248),l.writeUint8(10),l.writeUint8(0),l.writeUint8(10),l.writeUint8(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(r(a)),l.writeUint16(o(a)),l.writeUint32(s),l.writeUint32(e.size()),l.writeUint32(e.size()),l.writeUint16(t.length),l.writeUint16(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(0),l.writeUint32(0),l.writeUint32(n),l.writeString(t),l}(l,s),f=c.size()+u;s+=f,e+=f+h.size(),t+=h.size(),n.push(c,d),a.push(h)}));const l=function(e,t,s){const a=new i.Binary(void 0,!0);return a.ensureCapacity(22),a.writeUint32(101010256),a.writeUint16(0),a.writeUint16(0),a.writeUint16(e),a.writeUint16(e),a.writeUint32(t),a.writeUint32(s),a.writeUint16(0),a}(this.files.length,t,s),d=new i.Binary(void 0,!0);return d.ensureCapacity(e+l.size()),d.write(...n,...a,l),d}}},99389:(e,t,s)=>{"use strict";var a=s(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.apply(this,arguments)};var i=a(s(48926)),n=s(38438),r=a(s(7380));function o(){return(o=(0,i.default)((function*(e){const t=yield Promise.all(e.map((({blob:e})=>d(e)))),s=new r.default;return t.forEach(((t,a)=>s.add(t,e[a].name))),l(s.create())}))).apply(this,arguments)}function l(e){return new Blob([e.readByteArray()],{type:"application/zip"})}function d(e){let t;return new Promise(((s,a)=>{t=new FileReader,t.addEventListener("loadend",(()=>{s(n.Binary.build(t.result))})),t.addEventListener("error",(e=>a(e))),t.readAsArrayBuffer(e)}))}},30621:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const s=[];let a=0;for(;e.length>a;)s.push(e.slice(a,a+t)),a+=t;return s}},44481:(e,t,s)=>{e.exports=s.p+"img/rooms-2x_909204b15b49fc2ef16b123e8afc3bf0.jpg"},52022:(e,t,s)=>{e.exports=s.p+"img/rooms-dark-2x_e4f7bea856269e5e75cef04bbbf104a4.jpg"},80722:(e,t,s)=>{e.exports=s.p+"img/rooms-dark_88f4fbf81adf3532145c6eb491776f06.jpg"},85019:(e,t,s)=>{e.exports=s.p+"img/rooms_ddca60c97a36e2b80c29bce69502c93b.jpg"},46023:(e,t,s)=>{e.exports=s.p+"img/sticker-empty_9d7feb47a66ef5b59cc731acafd02266.png"},73465:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1bJJV",child:"_3IfUe"}},89450:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={editPencil:"_3n6oF",section:"_1SrUt",smallMargin:"_2TAxi",noMargin:"_3jvCQ",sectionPrimaryIcon:"_1rZAT",noMarginSmallGutter:"pZejE",fieldPrimaryIcon:"p8Oeo",sectionMain:"_3rWgV",sectionContainerMain:"_39NMC",sectionEmptyText:"qn8pr"}},83866:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={addToCartIcon:"_1u05M"}},75089:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={archivedIcon:"_3u7yy",unreadCountWrapper:"hlFup",wrapper:"_3hD9c",iconMentions:"TPCLW"}},65615:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3z9_h"}},87622:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={block:"Hbbsz",chevron:"gGn1n",actionText:"_3jR9Y"}},48651:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={action:"_1-SiY",wrapper:"_2XcXo",butterbar:"_22XJC",icon:"_384go",body:"_1Yy79",controls:"_3UDm1",controlsIcon:"_1K1wg",title:"_2z7gr",text:"_2BxMU",notification:"_2C_7j",update:"xx0PQ",computer:"f2_qc",phone:"_3C1U5",battery:"_1sNMG",notice:"_3izPF",noticeSmb:"_1d_P-",noticeSvgWrapper:"_2JUqz",fatalSvgWrapper:"afTH_",fatal:"cwVT9",nuxGreenSvgWrapper:"_3aqmZ",nuxGreen:"_3Olve",nuxBlueSvgWrapper:"_2Abc7",nuxBlue:"_3tjOE",mdOptInAwareness:"_3EMDj",mdOptInLink:"_1OdW7",mdOptInCountdown:"ZklOu"}},64659:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={btnContext:"_2fQtj",focusAnimation:"_3XzQD",focusAnimationKeyframes:"_3KZWs",product:"_32mRR"}},92297:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={chatstateTyping:"_16h0X",loadingIndicate:"_32N7I"}},29713:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={markerAdmin:"_3bTNW",markerInvited:"_3Vyb8",chatControls:"_2NICU",screenName:"_1ux8Y",contactSmall:"_2cL8h"}},59405:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={icon:"_1pJ9J",iconPinned:"_2XH9R",archived:"_3f7yK",iconMentions:"_2ky6D"}},23771:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={italic:"_1ZqY2",product:"JZX9V",last:"Hy9nV"}},34769:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={ack:"_2qo4q",ackBlue:"_3NIfV"}},44597:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={symbol:"_2tHs0",margin:"_3Bn0t",miss:"_3HpRC",pttBlue:"_1ujr9",pttGreen:"_3ryBz"}},49072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={statusLoading:"_1E3Vj"}},92255:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={count:"_23LrM",transparentBg:"_3t-zO"}},55815:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3oxzv",btnActive:"_32h6H",btnAction:"_3cwUy",controlsSummary:"_2t-e4",confirm:"ck4rc",summaryText:"_3F8DS",item:"_2qbj2"}},78076:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={listUser:"YtmXM",listUserBeta:"_1X8rk",betaIcon:"_2BYrr",betaIconText:"_3hcUV",commerceIconContainer:"_1e4Bn",withCommerceIcon:"_1atcO",header:"_1G3Wr",listControls:"_3yZPA",shopsIcon:"_2sN2H"}},42620:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={chatListPanel:"_1KDb8",panelBody:"_20c87",panelSearch:"uwk68",spinner:"t7NWw",unreadContainer:"_2Pcmr",unread:"_2ZNpT",unreadBody:"_1tQ8u",unreadIcon:"_1SNuR"}},39709:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={checkboxChatWrapper:"_1Oe6M",checkboxChatControl:"_1-gER",labelSelection:"_2OHxv"}},51322:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={selectedListContainer:"iH7Ic",bottomDiv:"_1WEqd"}},76414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={iconSpinner:"_1A60C",iconCloseSearch:"_3GYfN",iconLabelSelect:"iy1jQ",iconMorph:"_1KJ7A",inputPlaceholder:"_3Qnsr",labelSearchPlaceholder:"_2S-ZM",listSearch:"_3yWey",contInputSearch:"_1Jn3C",active:"XKmj6",iconSearchMorph:"_28-cz",iconMorphSearch:"bHvlO",iconMorphBack:"_2nifA",kind:"_3mVPR",labels:"_1YvFX",kindName:"_26c7g",filterTitle:"_3lIPP"}},90149:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={annotation:"DjLL1",tooltip:"_3xcb4"}},24613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={audioTag:"_1ichq"}},6732:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_27mo0"}},98676:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={badge:"_3zy8i",icon:"_3cYWo",pending:"_2UImM",warning:"_2Jofj"}},22301:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={border:"bSwEu"}},80031:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={chat:"_2nY6U",chatAvatar:"HONz8",image:"_2EU3r",chatBody:"_3OvU8",chatDetails:"_1BgCC",chatMain:"_3vPI2",noDelete:"_3k68H",chatSecondary:"_37FrU",chatTitle:"zoWT4",chatStatus:"_1qB8f",chatMeta:"_1i_wG",unread:"_3C4Vf",active:"_2_TVt",chatDrag:"_2Oquw",idle:"_1ws0F",isMuted:"_3Xgye",themeMessage:"_7qwtH",themeSearch:"_3VUnw",themeDrawerList:"_3A-iD",themeNewChatInfo:"_qREt",themeRadioButtonRow:"_16zEN",themeStatus:"_1q2v5",themeCheckbox:"_2OR6D",themeIdentity:"BdOK7",themePlain:"_2gbXd",themeAddItem:"_3xRmF",themeAddItemPlaceholder:"_2ildA",themeListNames:"_3Y0ff",member:"_1Bc31",themeLabel:"CujId",groupV4Invite:"_1p-UT",cartProduct:"V-2Ax",orderProduct:"_1SM19",product:"_16m7g",media:"_1IYWo",listButton:"_3zMLK",productOfCollection:"_2nU2J",collectionEdit:"_2KLau",collectionHeader:"_17-Rm",productOutOfStock:"_3NZY0",listMsg:"_2eixh",archivePanel:"_1frFQ"}},98150:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={chatSubtitle:"zzgSd",chatSubtitleHeader:"_3e6xi",chatSubtitleText:"_2YPr_"}},8313:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={checkboxContainer:"_2MZaO",containerDisabled:"_20RDY",checkbox:"_3yThi",checkmark:"_2IweK",partialCheckMark:"_1XWr-",checkedCheckbox:"UF5Li",checkedCheckmark:"_2PGX8","checkmark-expand":"_2iPfE",checkmarkExpand:"_2iPfE",uncheckedCheckmark:"_1NdIy",disabled:"_11GT7",a11yHidden:"_1WKtK",a11YHidden:"_1WKtK",itemFocused:"_2Haw6"}},53219:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2wHUf",roundIcon:"_33mBu",unchecked:"_3oogs",passive:"rT1uC",uncheckedSystemColor:"_3ahqr"}},25363:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={btn:"_23JDg",overMedia:"_3HNBm",btnMediaPrev:"_3jb3a",btnMediaNext:"_3x1a0",disabledBtn:"_2_1tu"}},29698:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2XifE",defaultWallpaper:"_31Spn",icon:"fxStU",body:"pJIFJ",main:"m9hHr",secondary:"_3oWGj",inConversation:"_3yL8P",inList:"_1WKb_",newChatInfo:"vlWi6"}},31680:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={avatar:"_3GlyB",avatarDefault:"_1lPgH",avatarImage:"_8hzr9",isLoaded:"M0JmA",avatarSquare:"_3eYBS",avatarBorder:"_32GIw",status_v3:"_1DSb6",statusV3:"_1DSb6",wrapper:"_36VU6",badge:"JUffF",badgeIcon:"_1D5Hn"}},50282:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={docState:"_3y4sD",spinner:"_3dpj1"}},50687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={item:"_2qR8G",text:"_18oo2",hover:"_19zgN",action:"dJxPU",compact:"_3gcnK",icon:"_26nDl",emoji:"_17jhh",emojiGrid:"_34jUG",ellipsify:"_2oldI",disabled:"_3BFHH",shortcut:"_1wMaz"}},40743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={ellipsify:"_ccCW",inlineblock:"FqYAR",dirMismatch:"J9IUQ",clickable:"_3xSVM",multiline:"_1SjQX",breakWord:"_2Qc5p"}},20823:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={empty:"_3Iwj9",emptyTop:"_16QtD",compact:"_2skyp",icon:"_2t_t3",title:"_2Vemb",text:"_1JFry",spinner:"znLut",action:"_2tVx6",iconRetry:"_3wgVc"}},70772:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={tooltip:"_1y99G","tooltip-left-ltr":"YpTYF",tooltipLeftLtr:"YpTYF","tooltip-left-rtl":"_31yGq",tooltipLeftRtl:"_31yGq"}},50798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={read_more:"_208p2",readMore:"_208p2"}},9297:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={avatar:"_2ji7x",roundBorder:"_2QeZT",avatarWrapper:"_2urgy",avatarSvgWrapper:"srmST",avatarImageWrapper:"Pipu6",transition:"Ao5N0",isLoaded:"_15kIa",centerChild:"_3yoVb",avatarImage:"zlBZO"}},87120:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={key:"_3XnBm"}},40954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={viewport:"_3uIPm",verticalListViewport:"WYyr1",horizontalListViewport:"_1iA0_"}},59230:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={loadingSpinner:"_1L0jz"}},12544:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={item:"_3m_Xw"}},23131:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={hidden:"_3BWgW",container:"_2RbXT"}},45023:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={controls:"rA7Wy","progress-container":"sF9iS",progressContainer:"sF9iS",spinner:"_1W07j",btnMeta:"dIMN_",button:"_t1Fc",icon:"_2A6Wl",cancel:"_1gk5U",disabled:"_3Y2FH",cursorPointer:"_3yiLE",play:"_27eUl",iconMeta:"_3WLdp"}},21279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2Z7E4",child:"_32rqz"}},471:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={menu:"_1QVfy",menuDefault:"_3UaCz",menuStrong:"_2aN_u",menuInverse:"_1s6XL",item:"_2cNrC",active:"_1CTfw",selected:"_2V9Ss",disabled:"_2YC8z",itemText:"_2eqEq",menuMediaEditor:"_2rY6b",itemFocused:"M43gW",button:"_26lC3"}},5265:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={multiControls:"_37jUe",chatListPanel:"_3pRIl",drawerHeader:"_1ok6W",multiselectIcon:"Pd4jb",multiCount:"_3sYvo",mediaGalleryTheme:"hFRPE"}},39200:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={moveResizeComponentContainer:"_5h2Mi",moveResizeComponentInnerContainer:"_32d1N",resizer:"_3Ikyy",topResizer:"_1tDOX",bottomResizer:"_3ErRI",leftResizer:"sDbQK",rightResizer:"_2HQO5",topRightResizer:"_3BmU0",topLeftResizer:"Hzoas",bottomRightResizer:"_3F8SQ",bottomLeftResizer:"_1auhr",moveable:"Bjqxx",defaultCursor:"_2OoF8",extraContent:"_3VQEm",blurryBackground:"_3GVtj",bottomContent:"_1BIBj",extraContentVisible:"_3FNw6",topContent:"_2A-Ve",dragBar:"_1XQxk"}},31430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={multiControls:"OVz7E",multiselectIcon:"_1fimr",multiCount:"_2k8WS",mediaGalleryTheme:"wdgqh"}},37151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={verified:"_3vLho",psa:"_2A4wP",icon:"_1M6Ay",hasLabels:"_3q9s6",labels:"_3dulN"}},58866:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={fit:"_1Lu8G",fitRelative:"Rwf_x",fitScaledown:"_1p0Ic",fitZoomin:"_3n6Y4",nativeCover:"_2rdv3",nativeScaleDown:"_3pDwe"}},5582:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3yg5l",body:"_1TGpC",imageContainer:"_2VMR2",lazyLoadRetry:"_3a7W9",defaultIcon:"_1Jya3"}},31693:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3Bc7H"}},22577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={sensor:"_1lRek"}},5538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={gridContainer:"_2aoOW",baseEmoji:"yz0X-",options:"watw2"}},54262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={button:"ynx4l",buttonIcon:"_17WeP",nextButton:"RMIjM",prevButton:"_27Ool",resizeContainer:"_1MNGY"}},22399:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-emoji-width":"44px",emojiWidth:"44px","-emoji-height":"44px",emojiHeight:"44px","-side-margin":"12px",sideMargin:"12px",panel:"_2Wd6U",section:"_27GWS"}},70446:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bodyContainer:"_2bgh7",list:"_3Cc11",search:"_1Kk5B",hidden:"VaOo_"}},6067:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-total-search-height":"62px",totalSearchHeight:"62px","-scrollbar-width":"6px",scrollbarWidth:"6px","-windows-scrollbar-width":"8px",windowsScrollbarWidth:"8px","-section-bottom-margin":"12px",sectionBottomMargin:"12px","-title-height":"27px",titleHeight:"27px",container:"_1rtUb",title:"xfDtH"}},95118:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-emoji-width":"44px",emojiWidth:"44px",panel:"_2ikL3"}},30787:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={emojiPanel:"_1DP8V",panelBody:"_2Gmvm",panelDropdown:"_30SX6"}},98616:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={text:"_1YMR5"}},84566:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={body:"VNeTl",icon:"_38Dyo",wrapper:"_137vP",container:"_1VzGk",focusBorder:"_7-H4u",preview:"_1iDDZ"}},85633:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={searchContainer:"_2uZmp",section:"_10r3b",blank:"_1EQNa",row:"_1ISLd",noResults:"_1YG-A"}},98952:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bodyContainer:"_1TdPb",gifPanel:"_4_8s1",panelBody:"Jcl24",panelBodyError:"_1Z21u"}},7566:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2eA1Q",wrapper:"_1feSF",innerWrapper:"_1jisR",starIcon:"_3Wz0y",thumb:"_2RmLM",blur:"_32XHJ"}},29123:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={pager:"_29Hr8",pagerLeft:"_1ZIOd",pagerRight:"AczAh",pagerDisabled:"_3f1Qz",body:"dA_JN",section:"_21CMd",searchRow:"_3YSFd"}},75228:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={barContainer:"_2i-wM",movingBar1:"_13HVn",movingBar2:"rgmWD","indeterminate1-ltr":"_2nkMC",indeterminate1Ltr:"_2nkMC","indeterminate1-rtl":"_1R6n4",indeterminate1Rtl:"_1R6n4","indeterminate2-ltr":"KjuiJ",indeterminate2Ltr:"KjuiJ","indeterminate2-rtl":"_3bSf2",indeterminate2Rtl:"_3bSf2"}},40870:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_16kef"}},92466:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={tab:"_1zlQ1",highlightOnFocus:"JRJYO",menu:"_-2oTK",carousel:"_3hl6E",carouselEnd:"_3GM_s",selected:"_1v2yz"}},33607:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={menuTabsMarker:"NCirl",animate:"_1PHGw",animateWithTransform:"_2TG0r",hide:"_3gVEQ"}},74760:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={cancelIcon:"_3pgom",inputContainer:"M1or0",inputEmojiSearch:"_3K9QW",searchRow:"_10mnt",ffFix:"_3KMMv",rowShadow:"_3wgrR",rowInput:"_2VSMU"}},57379:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={panelContainer:"_3x7O3",panelDropdown:"_1m0Ug"}},98374:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={tabIconOrText:"vwr6Y"}},49972:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1rX68",containerSearch:"_2-e_h",panelHeight:"_3i8Zn",contentContainer:"_2XY3B",contentContainerSearch:"_3ijFX",bodyContainer:"_1NPzg",emptyContainer:"_2YslO",emptySticker:"_1xgRn",emptyText:"_255pA"}},95885:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2elZc",border:"_1QpHK"}},93881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1u3Az",retryButton:"ek3q4"}},70193:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={emptyContainer:"tX668",emptySticker:"_3eX8j",emptyText:"_1ENK0"}},13822:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_268Mf",unscrollable:"nnnSk"}},40194:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={shadow:"_1qMTr"}},43177:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2yXP9",stickerPackContainer:"ez5TU",stickerPackIconWrapper:"_1qoGD"}},42532:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={input:"_1UWac",placeholder:"_2vbn4",mediaEditorTextInputPlaceholder:"_2it_2",body:"_13NKt",default:"Z2O8p",compose:"_1LbR4",large:"czcZD",status:"_23wR2",media:"oHEu9",invite:"y2xeH",mediaEditorTextInput:"_3pH28",small:"_9SNTl","list-search":"_3hKpJ",listSearch:"_3hKpJ",textInput:"_1aweH"}},41757:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={emojiSearch:"yY6AE",searchBody:"dVelf",positioningContainer:"_57r8B",overlayContainer:"_3gMHK",resultsContainer:"ECdkZ",mediaCaption:"_1TBzR",emojiInput:"_30wt2"}},74019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mentionsResult:"_12x9I",selected:"xVUcj",mediaCaption:"aspBo",textContact:"_1IiiX",textPushname:"_2nhlG",resultImage:"KWld3"}},75311:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={positioningContainer:"_3lPuS",resultsContainer:"_3I-Ax",overlayContainer:"_2ERUw",mediaCaption:"_356RS"}},63293:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={result:"_5oJyH",selected:"e800t",slash:"_2uNxr",shortcutPrefix:"_3G7pN",shortcutSuffix:"_1hpAY",message:"K_laH"}},91162:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={positioningContainer:"_1fzlS",resultsContainer:"_3Jarj",overlayContainer:"_3zovQ"}},60576:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1Y6d8"}},59071:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={btn:"_165_h",disabled:"_20QIU",large:"_2HL9j",small:"_3KkV3",inverted:"p0cPs",showBackgroundOnHover:"_3OU6t"}},76708:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={clickable:"Hme-t",body:"_2l7bQ",main:"_25m4C",mainEllipsify:"_3weqn",side:"qqWrX"}},29766:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"YGe90"}},32243:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={conversation:"_3mPXD",placeholder:"_28a19",composeBoxQuoted:"_3QSK-",quoted:"_2xrJ4",stickerPanel:"PD3sk",clickable:"_9QB_N",showSticker:"_2afZN",fadeIn:"_37JBw"}},8082:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={textInput:"_10Mbz",labelText:"_2Pq6r",hideFloatingLabel:"_1RVBL",float:"_3zbxJ",spacer:"X2s7w",noPlaceholder:"q_gDO",wrapper:"_3mpG7",locked:"_1M8UY",errorText:"_1SeZ5",textError:"_1PQrR",textActive:"_23KyQ",iconMainContainer:"hS9Jh",iconsEditContainer:"_27Wz_",icon:"_27Yui",invite:"_1misX",charCounter:"_17PfY",iconSpinner:"_2NNpn",noErrorInfo:"_1JgEV",infoStrip:"_37xeC",inputLarge:"_1pGaf",active:"_2fOd_",emptyValPlaceholder:"_12vlY",more:"_2mPox",emojiText:"_3-H1x",groupInfoName:"_2KoKm",small:"_3skxK",iconMain:"_8o4MO",desaturated:"bIGyp",visiblyHidden:"_2Ny8c"}},40726:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={tooltip:"_2W0IZ","menu-tooltip":"pYOck",menuTooltip:"pYOck",left:"_3qM-S",right:"_3z1FZ",top:"_29rrz",bottom:"_12zi2"}},23992:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={wrapper:"_3DzYC",icon:"bElHk",verifiedText:"_2N5II",divider:"rFHB8"}},92741:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={video:"LHFBt"}},14237:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={adminBtn:"_3J8YW"}},80475:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"D7_Sl",text:"_2bjNw",messageNewNumberButton:"_1SKXZ"}},56165:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-overlay-border-right":"1px",overlayBorderRight:"1px","-overlay-border-left":"1px",overlayBorderLeft:"1px",footer:"_2cYbV",positioningContainer:"_3A_K1",overlayContainer:"_33f6r",blockCompose:"_2BU3P",pttDraftPreviewDisabled:"_30KVb",inputContainer:"p3_M1",boxPanelWrapper:"_1un-p",pttComposerActive:"_18OWa",attachButtonContainer:"_2jitM",mainContentContainer:"_1SEwr",textMessageComposerContainer:"_6h3Ps",textMessageComposerInputContainer:"_2lMWa",pttComposerContainer:"_2tiyZ",childPadding:"_3HQNh",sendButtonContainer:"_1Ae7k",disabled:"_1g8Im",btnSend:"_4sWnG",focusAnimation:"_1YbbN",focusAnimationKeyframes:"_3RoZE"}},46432:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-open-menu-width":"110px",openMenuWidth:"110px",menu:"_1uqmP",button:"_3V3JJ",open:"_1PC8N",full:"_3agz_",closeButton:"_6kzle",firstButton:"l9Mer",secondButton:"_3Wl8Y",thirdButton:"_1Eec4"}},60662:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-item-spacing":"16px",itemSpacing:"16px","-item-width":"26px",itemWidth:"26px",container:"_23sAs",active:"_2ijNh",square24:"_3t9Gs",square26:"_1owZM",top:"_2Bl6V",padding:"_2NlZY"}},86667:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={panel:"a-HbF",body:"_1IN0t",cancelButton:"_1Hccy"}},67433:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={btnBorder:"_1IP_h",btnBorderIcon:"_6I6m-",btnSend:"_2bJ3z",btnCancel:"_13r35",hovered:"qXuQN",btnStateDefault:"_3YsRd",btnStateHover:"gulXL"}},8937:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={tile:"_1PzAL"}},71352:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={pane:"_33LGR",selectable:"_1HzbD",empty:"_2AL2u",atMentions:"_1cQWN",incoming:"_1GLVO",buttonGap:"_37rpp",buttonGapRemove:"_1YWBB",iconDown:"_3K42l",iconMentions:"_1ec6v",ffFix:"EnLWz",unread:"_38VQ8",incomingContainer:"_27Uai"}},38038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={footer:"_1YfMk",body:"_1LcQK",filler:"VjtCX",footerMessage:"_31enr",subheader:"_2K2u4"}},99890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={pane:"_1fqrG",previewPane:"M_3Ni",header:"_4KLAo",title:"y67RY"}},89827:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={subheader:"_1GHsB",main:"ee09o",closeBtn:"_1_fE7"}},77063:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={body:"_1v2iU",text:"QoGDK",hidden:"_1JfIG",desc:"_26wVQ",more:"_2SaOr"}},64809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={attachMenuContainer:"_3iTtj",iconsItem:"_2t8DP",iconImage:"_2QbRL"}},98229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={chatControls:"_1yNrt",chatAvatar:"_2YnE3",divider:"qR2GF",chatHeader:"_23P3O",chatBody:"_24-Ff",chatMain:"_2rlF7",chatTitle:"_21nHd"}},60484:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={preview:"_3tcao",bubbleIn:"_2gZCX",bubbleOut:"_3yKRR",extended:"_3YsnQ",highQualityLayout:"_8CB4o",thumbnailContainer:"_3h4Aa",noThumbContainer:"cTZ5j",galleryContainer:"_30KWh",noThumbIcon:"_2BwKs",media:"_1hT12",blurred:"UmakP",iconStar:"_2AQbU",isInvite:"_2kdpj",title:"_1C3Ha",description:"_3czJ-",source:"_25gVJ",body:"_1tyuK",isCompose:"_2tmq2"}},92419:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={wrapper:"_3M3aq",button:"PWkc7"}},63764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={albumGridClass:"-dRqA",albumTopLeft:"_1JM3j",albumTopRight:"_1u0wN",albumBottomLeft:"_1nyzV",albumBottomRight:"_2qFXR",numberText:"WrYa3"}},4991:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={icon:"_2Gryy"}},84284:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_35n_s",hasAuthor:"FFKC-",forwardedIndicator:"SzXIb",hasQuote:"_2aRIF",author:"_3CM-O",isForwarded:"_3l04q",quote:"_2sNeT",isGallery:"_1ZLsD",ctwaContext:"_3n6X6",meta:"_1w-OG",bubbleLeftAvatar:"_1J6Dz",bubbleRightAvatar:"A8nAT",body:"_2f6-b",player:"MZ2N2",avatarContainer:"_20pN2",playbackRateButtonContainer:"Dtxcu",playbackRateButtonContainerVisible:"BTg57",avatar:"_7eHF6",avatarVisible:"_8X9Yy",status:"rBpS9"}},35370:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={audio:"_3GLtT",controls:"_3xGap",body:"_17C8h",scrollPositionDetector:"_3VvAH",button:"_2oSLN",spinner:"_1wvbg",metadata:"_2j9ZT",isGallery:"Wjuil"}},78923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={author:"hooVq",name:"a71At",number:"_1BUvv",screenName:"_1u3M2",verifiedIcon:"_1_7Ir",hoverable:"_1B9Rc"}},22319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={actions:"_38sw1",actionsBtn:"_2qiMb",noDivider:"oUwuU",icon:"_1Nz4r"}},41946:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={buttonContainer:"rn1U_",withLargeButtonsSpace:"_3bcUY",buttonWrapper:"_31pvq",disabled:"_2BLmN",stacked:"_3R6jb",buttonLabel:"_1U18t",sentByMe:"tLcVC"}},36091:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={action:"_1MBzh"}},21665:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={preview:"O9jTV",bubbleIn:"_2oGZe",bubbleOut:"_3fYaH",isCompose:"_1gKmE",noThumbContainer:"_1Wg3e",noThumbIcon:"IkAc0",media:"_1mJqX",title:"_3g0R_",description:"y-sQi",source:"wxlf4",body:"_2vpnj"}},60857:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={clickable:"_1ElRA"}},17792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"Hcx4J",templateBubble:"_17J94",isPreview:"W2dO7",isGallery:"_1JOPv",deepContainerContent:"_2AHlA",docMeta:"_2V7xt",metaValue:"_3pRPb",filetypeIcon:"_2-Gn2",thumbContainer:"_1iZQW",thumb:"MidYK",ctwaContext:"_3kAh9"}},29667:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2UGGA",error:"_9CNbN",compact:"eKlTB"}},90477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2tsYl",icon:"_2suca",iconHighlyForwarded:"_1sxwa",text:"_25ont"}},31211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={msg:"_36BuW",hover:"_2ZoZ2",current:"_3dZYx",active:"_1GjPw",focusAnimation:"_2AQt_",focusAnimationKeyframes:"-fZFX"}},49155:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-width-picture-bubble-inner":"330px",widthPictureBubbleInner:"330px","-padding-picture-bubble":"3px",paddingPictureBubble:"3px",bubble:"_1FpDI",vendor:"Z3Htq",meta:"zE8pI",hasCaption:"_2_tMn",author:"_1E1x2",forwarded:"_1niOx",forwardedIndicator:"_1CzZV",hasAuthor:"qS_dv",quote:"_2cHQo",thumb:"_1HqS9",caption:"_3mTJL",isPSA:"_366kD",isPsa:"_366kD",thumbVideo:"_2ugLp",thumbImage:"-tfJt",isGallery:"CGrlN",isInfo:"_3AcU2",ctwaContext:"_1-1zI"}},22510:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={notification:"_2ad1k",icon:"zjSQ_"}},66513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={stickerItem:"_1EoEw",stickerMenu:"_38YQn"}},9587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={outerContainer:"_3cBW5",innerContainer:"bcn_I"}},9027:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3wB0E",status:"_3DThG",caption:"FvmtX",linkPreview:"_3ccZe",expired:"fW561",noCaption:"_3Dr0h",meta:"_1crxl"}},30157:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={highRes:"_2UdhN",wrapper:"_3R6rC",large:"_3zyju",lowRes:"_2LodA",medium:"_3Ci02",xlarge:"_1xeoG",animation:"KPHJD",invisible:"_1gSQr",heartbeat:"_1jJBG"}},90373:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_34_Xq",title:"_2kYWh",meta:"_2R4Kk",footer:"_2o9mS",productListPreview:"_2rvnm",productListPreviewForwarded:"_2qh_q"}},75649:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2W7-y",clickable:"_3u-0F",caption:"_34gLy",author:"_3wuG0",meta:"_3y3nx",hasCaption:"_2Uvnb",actionButton:"ZfIV3",thumb:"_1K98J",avatar:"_29KJh",map:"-x5Fr",overlay:"_26ALV",expired:"ZKyI8",thumbBody:"eZEWk",quote:"_2T9UJ",status:"_2DxYf",statusIcon:"_1wRXt",statusText:"_1EdD8",stopLocation:"_1p9qB",viewLocation:"_28sTG",hidden:"_3mCpr"}},94563:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={hasText:"_3pk8n",noText:"ayWBM",quote:"_1PXpa",forwarded:"_3j_MG",hasAuthor:"_3cXIV"}},1696:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1O7Qw",link:"_2NMzP",title:"a5x1L",address:"_16GEO",hasURL:"_1uGHA",hasUrl:"_1uGHA",text:"_10e3n",author:"_38kO0",forwarded:"_2F595",forwardedIndicator:"_1Ui2Y",hasAuthor:"_3xqkd",meta:"PWnOL",thumb:"_2dClC",thumbBody:"_1cPOs",quote:"mZtXF",hasCaption:"_1cDYl",caption:"_1Kl0h",ctwaContext:"s6NhA",ctwaContainerWidth:"_21LuH"}},8546:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_3syqI",hasCaption:"_40stu",meta:"L3vXB",isPSA:"_2kcyS",isPsa:"_2kcyS",author:"_8gEIp",forwarded:"_396OZ",forwardedIndicator:"_3Sm7S",hasAuthor:"l_Ti4",quote:"ORufR"}},42315:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={preview:"fX8hW"}},61276:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={context:"_18oGY",contextIn:"_2copG",contextOut:"_1UyGr",contextIcon:"_3e9My",contextSpecial:"_3U8t1",contextInverse:"MAFpw",contextMedia:"_3I4pa",contextMediaLtr:"_3snhK",contextMediaRtl:"u5x7Z",contextMediaDocument:"fsbrQ",contextIconMedia:"_3sryO",contextDoc:"_2t2UT",contextPtt:"_1SfBg",contextPttFix:"_1qLtS",contextMultiVcard:"_3Zf7E",contextStickerAuthor:"_3QvcT",contextStickerTransparent:"fL8od",badge:"_3Vg32",contextStickerInverse:"sXuJ5"}},25153:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={author:"_1aJWo",hasForwarded:"_12iIz",caption:"_1WihM",forwardedIndicator:"_1bT9q",hasAuthor:"uStkE",meta:"_1a1gY",hasCaption:"_2L1FC",quote:"_26Orz"}},57155:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={text:"_1Gy50",template:"_36bJ3",placeholder:"_3TjU1",spacer:"_20bHr",icons1:"_2ui2p",icons2:"_2k1_e",icons3:"_2c6ge",icons4:"_29c8S"}},18981:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={meta:"_15K2I",chromeFix:"_3QDB6",metaLight:"_1OX94",timestamp:"kOrB_",icon:"_2NDV3",status:"_2F01v",labels:"_1-t6k"}},21123:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3BK98",isChecked:"_3vy-1",gallery:"_3b_q4"}},87581:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1x75M",icon:"_3TQyU",text:"fGkSE",containerSmallIcon:"_2GaDw"}},54777:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={wrapper:"JwMbj"}},78039:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"lsgDP",isGallery:"_3g4g6",isPreview:"_37wDH",quote:"_2Cwna",hasAuthor:"_3DJ5p",vcard:"_3JXMS",author:"_1l9dG",hasQuote:"_18WKw",body:"_26ZRH",avatar:"_10G7D",meta:"_10uUU",name:"_1GdIz",image:"_3G9hz"}},3553:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={icon:"_129rK",bizInfo:"dOOrj",iconE2E:"_3DF-v",iconSupportGroup:"_2yNLS",iconMiss:"_27IZa"}},35404:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={orderPreview:"_3Ly8y",meta:"_1Ia-r",messageText:"_1D8u3"}},99081:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={header:"_29moP",bubbleIn:"_3boVq",bubbleOut:"_2TtB_",orderId:"_2ryD-",hr:"_2prkR",media:"_3OIyG",total:"_2L07G"}},33519:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={icon:"_37d07",text:"_3NDmC"}},36246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3AKvj",thumb:"_1puGD",amount:"_2sFh6",amountCurrency:"_2v-Oh",amountInteger:"dnINe",amountDecimal:"_15T9I",isQuoted:"vmShS",isQuotedInComposeBox:"_1H1Py"}},43809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={icon:"_2N4Gy",success:"_3aNyY",failed:"_1VIdA",pending:"_1SRza",iconSymbol:"_2xEyu",compact:"_156-W"}},37291:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={body:"_2oQsk",bubbleIn:"_25qjo",bubbleOut:"_1nlBk",bodyIcon:"_2F85q",bodyIconMultiline:"_31jNG",bodyText:"_11BDX"}},70649:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={status:"_3l0Zb",failed:"_28WXG",pending:"_1Cqss",success:"_126yN"}},17468:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_14JTW",isQuoted:"_2C1pR",name:"_32Z_R"}},83662:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={hasText:"_1SeXE",noText:"UF5lM",quote:"_3Q47_",forwarded:"_2Qbk-",hasAuthor:"_3ERBM"}},41536:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_33Jbv",portrait:"_3RuOs",isPreview:"_38UIy",author:"_2nOdl",forwarded:"_3E82p",forwardedIndicator:"_3uVBe",hasAuthor:"SXyGp",meta:"_2AKAp",hasCaption:"_3r8ao",caption:"_2t5l8",isPSA:"_3gULZ",isPsa:"_3gULZ",quote:"l9kYZ",thumb:"_10-BC",isAlbum:"_2x8Vu",thumbBody:"_1WrWf",thumbBodyLores:"mFB5y",isGallery:"SzjBD",overlay:"cSicd",overlayAlbumText:"_3iQe5",ctwaContext:"_1tkCp"}},37335:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={wrapper:"_3QEso",badge:"_1vaz6"}},73819:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_1QYU4",productInfo:"_2yDL5",author:"_16tZk",title:"_2k-9J",subtitle:"_34u6v",thumb:"_3fOqz",productContainer:"yW3W2",bubbleIn:"_33uIf",bubbleOut:"_3hh_M",productCta:"_1x-HA"}},88137:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={image:"_3mSTX",default:"LacDz",icon:"_3TcVw",container:"_1JhMF",hasBorder:"_374fh",dimmed:"Qrclb",hasInnerBorder:"_1HLgI",hasLargeInnerBorder:"_2OuQU",square:"_1avFe",col:"_3UWjv",row:"_3nYfM"}},24378:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={icon:"_2sFz4",incoming:"_3NyWk",outgoing:"_1TKVr",blue:"_1_lrh",gray:"_1k-_q",green:"_2PvBP",wrapper:"i87tO"}},97900:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={imageWrapper:"_3yqEq",msgImage:"_2W5Qi",composeBox:"NdQ5u",statusV3:"_2CyOs",isPayment:"_3RjjZ",image:"_1HKX6"}},16679:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3hPBO",quotedMsg:"_3o5fT",statusV3QuotedMsg:"_2stdY",composeBoxQuotedMsg:"_3XUNQ",hover:"O_MMl",colorBar:"_3jrlM",msgBody:"-gKwI",msgText:"E_Te0"}},33595:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={messageText:"eWQsx",composeBoxQuotedMsg:"_2fkyH"}},85098:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={hover:"_2Kajt",quotedMsg:"_1apSG",msg:"_3hnu6",colorBar:"_37TOd",msgBody:"_2saPi",composeBoxQuotedMsg:"_3e9sI"}},18041:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={caption:"kbh9x",meta:"L-lId"}},97103:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3kxQ0",track:"_1tYaO",containerIncomingPlayed:"_3AEe_",containerIncomingUnplayed:"_2Dnx-",containerOutgoingPlayed:"_3-AGg",containerOutgoingUnplayed:"_1tsJt",thumbTravelContainer:"_2ujFr",thumbContainer:"_2Ni3Y",thumb:"_2yqJw",containerDisabled:"_3P77p",progress:"_9Zdab"}},27238:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={title:"_2g2jh",titleMain:"_2PElp",meta:"Ow8Il",chat:"_2NNvx",divider:"_7VvVk",chevron:"_2conS",avatar:"_2BgQo",author:"_19E70"}},54669:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={light:"N4ItZ",ackBlue:"_3l4_3"}},80079:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={hasAuthor:"_1u9qp",quote:"O2yv0",bubble:"_26F99",meta:"_3Lby7",isTransparent:"_2JUrU",body:"_3BGWx",author:"_3OC33",isFirst:"_2ecOY",ctwaContext:"_1BMHI"}},86542:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={cursorAuto:"_1atlx"}},11706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={sticky:"_3Iosq"}},56692:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3tnd4",isLinkMsg:"_3RjPV",icon:"_27ymf",text:"_2p23z",ctwaContainer:"_1FZ6n"}},36741:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={actionButton:"_1BRNh",actionText:"_3xFaq",disabled:"_1a7m4",buttonContainer:"_2BdLo",firstButton:"_1ZjA4",quickReply:"_23rhp",callUrl:"_2-SfQ",icon:"_19CsY"}},50784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={footer:"_20thf",isMedia:"prQDN",dirMismatch:"_1_Ort"}},79901:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={quote:"_2Fo6S",forwarded:"_3HH9A",hasAuthor:"_2jGOb",hasSuspiciousLinks:"_2bdeW",linkPreview:"GAiYx",meta:"_3GEz5",title:"to3eh"}},14390:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_22Msk",portrait:"_24PSW",landscape:"_2T1i2",meta:"_1beEj",isPSA:"_2kk7U",isPsa:"_2kk7U"}},51469:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={shade:"_23IDz"}},81661:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={msgUnread:"_5ML0C",msgUnreadBody:"_3cOAM"}},98795:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={action:"_1t8dg"}},39029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_1tfap",isGallery:"_2WYy8",isPreview:"_2GU93",quote:"_35w8x",hasAuthor:"_3QaM3",vcard:"_2GhDW",author:"_1tStr",hasQuote:"_2iCgE",body:"_26nhK",avatar:"_1DYXt",meta:"_2YJfd",name:"Wx25u",ctwaContext:"_3sss8",placeholder:"_1eaPn",placeholderAnimation:"_2dH4k","gradient-ltr":"_3Ghom",gradientLtr:"_3Ghom","gradient-rtl":"_1r4eb",gradientRtl:"_1r4eb",placeholderImage:"_1gIrs",placeholderText:"_1RBL5",vcardDownloadStageIcon:"_3Us45",icon:"_37K6A"}},29683:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={bubble:"_1t37P",portrait:"_134Es",nonAlbumBubble:"_2xC3a",author:"_2atsY",forwarded:"_1RlD4",forwardedIndicator:"_43alh",hasAuthor:"_20KVs",meta:"_11fZT",hasCaption:"_1SOMD",caption:"_3eos6",isPSA:"_2o8XZ",isPsa:"_2o8XZ",quote:"_1yEuI",thumb:"_1ypsO",inAlbum:"_3PsvI",cursorPointer:"_2Vb1G",thumbBody:"UYCLA",thumbBodyLowQuality:"_3srmQ",duration:"_14Z-M",icon:"_16slm",pipBtn:"_3hdyf",isHover:"_3Qmuz",overlay:"_282B-",overlayAlbumText:"_2Iq8p",ctwaContext:"_1zWXT",ctwaContainerWidth:"_2ttrC",ctwaThumbWidth:"_1cD6W"}},28061:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={preview:"_39dtd",bubbleIn:"_1L3Ws",bubbleOut:"_1Z4jT",title:"_2p7aG",description:"_20Ubt",source:"_1zFU4",body:"S5xZL",noThumb:"QCZcQ",thumbnailWrapper:"_1ywEL",thumbnail:"_2_uq6",noBlur:"_3V1nv",thumbnailPlaceholder:"lzcge",youtubeThumbnail:"_1EVQk",mediaStateControlsWrapper:"_26bsH",attribution:"_2xLE7"}},51033:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={unviewedBubble:"_3vq6v",deepContainerContent:"Iuuun",accentIcon:"_128Ua",nonSpinnerIcon:"_1dhgC",contentMeta:"_11Cmm",labelContainer:"_2x9gu",labelText:"_1f8PP",labelActive:"_2uA_l",labelInactive:"_1PxFw",labelRetry:"_2bElB",quote:"_26O9z",meta:"_3W6bj",dialogTitle:"_3YXCQ"}},93831:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_9RSth",inactive:"Uo1hc",icon:"lwwpK",spinner:"bjI3o"}},33947:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={msg:"_2wUmf",msgContinuation:"_21bY5",msgSystem:"V-zSs",sticky:"_1bp3Q",message:"cvjcv",hasTail:"_8YVHI",messageBackground:"Nm1g1",tail:"_3nrYb",tailHighlight:"_33ElR",messageTransparent:"_1S-gg",tailOverrideHide:"fe1wa",messageSystem:"EtBAv",messageChat:"_1Ilru",messageCode:"NuMBJ",messageDebugNotification:"b9OGT",messageE2ENotification:"_1p8Qv",messageBizNotification:"EkgRd",messageNonE2ENotification:"tokhT",messagePlaceholder:"_2i2ot",msgGallery:"_1JOu_",messageAudio:"_2G-o1",messageDocument:"_1CJ4I",messageList:"IdKDv",messageMultiVcard:"_1BUp2",messageProduct:"TV0H8",messagePTT:"JZd-w",messagePtt:"JZd-w",messageSticker:"XWVkh",messageVcard:"_3Q9cR",messageGif:"_29jDW",messageImage:"_3QK-g",messageLiveLocation:"_3zfPb",messageLocation:"_3Y4UU",messageVideo:"_3bxPY",msgInfo:"_1fwLN",msgWithQuickAction:"_1q25n",messageHidden:"_2o1bS",msgContainer:"_16Lhn",quickActionButton:"_3JXTQ",msgPSA:"mwr1_",msgPsa:"mwr1_",messageVideoLinkPreview:"R5FJb",placeholder:"_1r2Rq",gridContainer:"_1LCu0",author:"_3Hxe_",forwarded:"_18j3q",albumBubbleContainer:"_3dSQU",forwardedIndicator:"_3Ldzf",hasAuthor:"_3muY2",authorForward:"_3Pc1A",groupStickerContainer:"_1p8l-",singleGroupedStickerContainer:"_3tRFQ",groupStickerAuthor:"_1xswm",transparent:"_14jRh",hasBorderBox:"_22AX6",hasUrlCallButtons:"_3Bwen",stickerWrapperContainer:"_3fAhg",highlightAnimation:"_2Mxoz",highlightAnimationDarkIn:"_24_ZS",highlightAnimationDark:"oT5bl",highlightMentionAnimation:"jvg4k"}},55170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={messageList:"y8WcF",messageListSelectable:"_1RYqc"}},6241:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={preview:"_1fHaQ",media:"_3wSUT",bubbleIn:"_2Tdav",bubbleOut:"_1C93k",title:"H6KiG",description:"W0fmS",body:"MjVnZ",descriptionIcon:"h7Gvb",titleIcon:"_22uJ6",quoted:"_3njlI"}},84772:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={preview:"_26S5d",bubbleOut:"KaulV",media:"RwCuI",title:"_3Hadc",description:"_3GhB-",body:"_3KPUU"}},7410:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={pttSendButton:"_1Me6x",pttCancelButton:"_1lCb2",pttStopButton:"b01Bg",pttPlayPauseButton:"_1Ppyp",paused:"bxe1M",bounceOnHover:"_2T6uS",bounce:"_3V93w",clipFix:"_2BWjh"}},24589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3dUfq",previewContainer:"_38ucq",recorderMode:"_1YI1x",previewMode:"Hfklx",timerContainer:"DOFUq",waveformContainer:"_1ofZ4"}},36496:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2CkHc",disabled:"_8IpdG"}},4643:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_22WF5",containerInner:"_3GUzQ"}},97469:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={recording:"_3CjUT",pttCounter:"UYzXm","ptt-indicator":"_1HNpL",pttIndicator:"_1HNpL",container:"_1KJY9",active:"_3zg1V",pttStartRecordingButtonContainer:"ocadv"}},66967:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={btnPtt:"_30ggS"}},82478:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={spam:"_3ImlL",text:"nyOSn",controls:"_3E-9Z",button:"_12bMD"}},98712:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3XVrM",image:"bYfXc",body:"_2LRJ",badge:"_3VTQv",name:"_3RHSW",address:"FUBUr",description:"_0ffS"}},88797:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={vcard:"_1q9Fo",controls:"_1FIfN"}},57681:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={spinner:"_3_EXz"}},54257:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2J8hu"}},41882:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2RNQH",containerFull:"_39sdI",icon:"r4PR4",containerCircleIconFull:"NdjtU",name:"_2SClx",labelFilter:"_2P0Mi",iconContainer:"_3FLUp",drawerTitle:"_2qNIm",circleIcon:"K-Qhf"}},67224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2qwDL",circle:"JHRtT",text:"_1FOpn"}},76067:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1ExdJ"}},9614:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={closeButton:"_35o6i"}},17050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={controlsSummary:"_2tvYd",container:"uyolZ",btnActive:"_7Q6yp"}},37236:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={app:"_1XkO3","app-enter":"_2xtgz",appEnter:"_2xtgz",noAnimation:"_22rDB",drawerManager:"_3ArsE",pane:"ldL67",paneTwo:"_3sh5K",paneThree:"_1bLj8",paneOne:"_2i3T7",chatlistHeader:"_191H_"}},22719:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-color-bg-light":"#f7f7f7",colorBgLight:"#f7f7f7",panelBody:"pXnLN",searchSpinner:"_3hEhb",panelSearch:"_3K-bg"}},66103:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={checkboxSelectableWrapper:"_1Ux09",checkboxSelectableControl:"_1f5_O"}},28931:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={section:"_1Y2N1",control:"ovk9m",label:"_1CKaR",note:"_2K2OR"}},68077:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"gyxUD",control:"_2xfkv",label:"_2Xa9G",buttons:"_1zS9w",button:"_311E8"}},42480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={drawer:"nBIOd",white:"_3kIRz",drawerGallery:"_1MulP",drawerCapture:"_3pakh",drawerEdit:"_1pz_d",drawerMedia:"_22TsG",drawerCatalog:"_7jJPW",striped:"_2T-Z0",belowHeader:"_1g4QS"}},79634:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"KPJpj",noscroll:"_2M_x0",centerItem:"_1-EIp",padding:"_3jVZG",centerColumn:"GiGr9"}},74324:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={drawerHeader:"_1PGhQ",drawerTitle:"_1Yy4I",drawerTitleBody:"_1FrBz",side:"_3sr6g",drawerTitleAction:"_2-1k7",multiMediaGallery:"_3ov47",drawerHeaderSmall:"_2mQtw",drawerHeaderOffset:"-bGGW",drawerHeaderPopup:"_1S5wN",btnCloseDrawer:"_18eKe",paneListControls:"_2zjLK",labels:"_1bXem"}},10226:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={item:"_1oVqk",itemBody:"hBx4i",row:"_2E0YI",main:"_3fa-x",side:"_6IY10",primary:"_18Bwj",secondary:"_2XZQl"}},34166:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"vXLk5"}},61422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_2P1rL","padding-large":"RVTrW",paddingLarge:"RVTrW","padding-small":"_1dqt0",paddingSmall:"_1dqt0","padding-no-margin":"_2FcG4",paddingNoMargin:"_2FcG4",refresh:"BnR7O",title:"_10vh8","refresh-padding-title":"_3sBQd",refreshPaddingTitle:"_3sBQd",padding:"_1zkaQ","group-desc-padding":"mf5g4",groupDescPadding:"mf5g4","no-padding":"_36WbZ",noPadding:"_36WbZ","padding-product":"_2ROcQ",paddingProduct:"_2ROcQ","center-column-fixed-width":"_1-HQq",centerColumnFixedWidth:"_1-HQq",animate:"_1is6W","well-animation2":"_1sr9L",wellAnimation2:"_1sr9L","list-section":"_3-Bxb",listSection:"_3-Bxb","title-larger":"_2zE_D",titleLarger:"_2zE_D",form:"NgU7K"}},17840:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={option:"_3WnsF",label:"_34BcH",input:"_1HqB3",footer:"_2cid2",footerText:"_1dR22",nuxHeader:"_3jqp_",nuxContent:"_2DmHt",nuxText:"_1zYm2",nuxAction:"_1K7oE"}},12433:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={nuxIllustration:"_2_GUB",nuxIcon:"BoZ4c",chatIcon:"_1XHiQ",chatIcon1:"UEsgv",chatIcon2:"Mg4_z",chatIcon3:"_2N6Ma",chatIcon4:"_17YEq",chatIcon5:"_1cD1O",chatIcon6:"_3PvSL",bannerIcon:"_3_bUO"}},49896:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1q9_k",metadataContainer:"_2a2H4",metadataText:"R3UG9",metadataTitle:"_1gPl9",metadataDesc:"_1PYAC",participantList:"_2zMeO",participantsTitle:"_1A6yW",participantsContainer:"ThClE",participantWrapper:"_19Pam",emptyContentContainer:"_2I2QE",participantsText:"_124as",contactsText:"_3-Rac",participantText:"_52dzE"}},35552:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"wkMfH",metadataContainer:"_1-GpK",metadataText:"Ju06N",metadataTitle:"_2Ilb2",metadataDesc:"_3ssy9",participantList:"_3qUpq",participantsTitle:"_1NaaQ",participantsContainer:"_4ULH-",participantWrapper:"oN3jd",emptyContentContainer:"_1n8L6",participantsText:"_2b4hy",contactsText:"_1B4j_",participantText:"_2UPqr",inviteExpiration:"_1iSLZ",inviteExpirationIcon:"TlapI"}},87390:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={description:"_2FqEP",containerAllow:"_2BTU8",icon:"_1kXIp",title:"_2hxax",controls:"mtD53",topCenter:"_2ySXX",topLeft:"J0OBZ",bottomCenter:"_361JZ"}},65384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={intro:"zaKsw",body:"_1RAKT",title:"_1vPMT",text:"_2-IT7",betaTitle:"_1vjYt",betaText:"_1y6Yk",betaIcon:"mDUle",betaIconText:"_3Lm9O",image:"_2JIth",textContainer:"_35HSa",mdImageWrapper:"WM0_u",mdBetaImage:"IVxyB",mdImage:"wuLkd",secondary:"_11TMV",divider:"_1_9wz",secondaryText:"_3ZJFu",secondaryTextBody:"_3yRMq",secondaryIcon:"_33d9M",upgradeBtn:"_1ReCe",upgradeModalTitle:"_1SMVi",upgradeModalText:"_2PkCn",upgradeModalErrorText:"_2t0jp"}},90975:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"Ph7CX",list:"_3_bJS",section:"_3FmxE",action:"_1rse8",shortcut:"_1Cbf3"}},66921:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaViewerBlurCrop:"_29V76",mediaViewerBlurImg:"_3lbCb"}},92660:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaViewerImg:"_2dXkT",cursorZoomIn:"_1ctu4",isDownloadPrevented:"_3YTjm"}},42784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaPanelHeader:"_1w-Ol",mediaPanelTools:"_2OBzR",info:"_3ii0l",voIcon:"_3DT5C",highlightClose:"_3tWb8","highlight-ltr":"MOdnb",highlightLtr:"MOdnb","highlight-rtl":"U56ii",highlightRtl:"U56ii"}},7674:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaViewerAnimate:"_1DmUx","media-viewer-animate":"_1DmUx",cursorZoomOut:"ls2-S",mediaViewer:"_3IBSU",viewOnce:"de89i",mediaContent:"zMiDB",btnMediaNext:"_3jdhc",btnMediaPrev:"_1vA6Y",media:"_2E0wf",mediaWithCaption:"_32hvM",captionWrapper:"_2A70N",captionWrapperExpandable:"_1JNVL",mediaCaption:"_2Naut",captionHidden:"EQKPE",expanded:"Y9XL1",mediaCaptionExpanded:"_2p2gD",captionExpanded:"_1aBpn"}},91866:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={title:"AHWnp",block:"_29x_V",illustration:"_23H4S"}},67504:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={body:"_1nYgI",vcardWrapper:"_3loXS"}},25232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={label:"_1F1Ky",input:"_39gup"}},86638:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={section:"_3BpxF",control:"JS6_m",label:"oZdoE",metaText:"_3Zvr1",border:"_2C05p",mdMetaText:"_3DIQo"}},10044:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={screenshots:"_2N-Sr",action:"_2Z00h",disabled:"_1dCWS",screenshotPreview:"_1aNKD",screenshotsImg:"_1vJ4T",btnDelete:"_1J6XW"}},58036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={listPanel:"_1xTTG",listBody:"_3r7by",listSectionSep:"_2Kk0v",listSectionText:"_2AKL6",listSectionAction:"_3rfc-",panelHeader:"UIGre",headerText:"_3UMOa",primaryHeaderText:"_3cSb-",secondaryHeaderText:"btY4I",headerButtonsPrimary:"_2Ohh0",headerButtonsSecondary:"_2VTZ7"}},15750:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mainWrapper:"_2QTec",v3_x:"_35ycQ",v3X:"_35ycQ",v3_x_mac:"IbXBn",v3XMac:"IbXBn",modalBackground:"_1MKT7"}},86020:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={updateWrapper:"Mj2NJ",updateTitle:"_3UOVI",uploadButtons:"_3kEgT",buttonContainer:"_1og7g",buttonIcon:"_1J0rq",outStatusPanel:"FrEHq",outDetail:"_2UERf",seen:"_21t7t",timestamp:"_3bEgA",placeholderIcon:"zfSRK",placeholderText:"_1i0DV",viewWrapper:"_1xUiP",viewTitle:"_88iAO",viewUpdates:"_2N7oy"}},44704:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={chevronLeftBg:"_1MFTK",chevronRightBg:"XzUO1",chevronLeft:"_1ElYg",chevronRight:"_1scx6",playerContainer:"ziHaZ",mediaStateControls:"_2om51",viewer:"_3KtSV",v3X:"z4GOz",v3X_mac:"_17UNH",v3XMac:"_17UNH",backIcon:"_2RuoM",backIcon_mac:"_16nW_",backIconMac:"_16nW_"}},89042:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={suspiciousHostname:"_1xz_9",suspiciousCharacter:"_2x-Eg",explanation:"_3eYuR",url:"_6nRAy"}},17490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={headerText:"_2T4uY",bodyText:"MClO-",noticeSvgWrapper:"_2xtg4",noticeModalContentWrapper:"gWDq0",noticeSmbContainer:"_3Sqbv",noticeContainer:"_2AgSI"}},42694:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={content:"_2x3kE",icon:"_2cPNo"}},54585:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3vLeQ"}},17040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={form:"_1_psp",section:"S4s9L","well-animation2":"_3PdLd",wellAnimation2:"_3PdLd",circle:"_1C64q",spinner:"_3Ea-7",container:"xvgoq",show:"_2FUyH",circleContainer:"_28mPV",checkmarkContainer:"_1TMgk",errorContainer:"_1ScAm",checkmark:"qlZ5I",error:"_3Fr6b",errorBanner:"_3PYWJ",code:"xYqL-",row:"hsOn4",block:"_3WPv2",digit:"_3Muc-",explanation:"_37tSc",dragAndDropExplanation:"Lbmtf",photo:"_1Ua6g","drawer-scale":"_2OqK6",drawerScale:"_2OqK6",webcam:"_17NcY",webcamVideo:"PKLd7",btnClose:"_35Nbq",overlay:"_3APck"}},59029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={button:"_1krwj",fullscreen:"_3kq_J"}},7893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={pipBtn:"_1lwah",player:"_3SImV",preview:"_2Wc_a"}},18230:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={note:"JnYV-",icon:"_3UuEL",noteBody:"r9R96"}},92825:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={fullWidthShade:"_1jlME",stripHeightShade:"_2hBQZ",lowerShade:"_7fWf0",upperShade:"_2I5Pn",fullHeightShade:"_26m2r",roundedCorners:"_11aOe"}},86950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={videoFloater:"_1yCOB",bgImg:"_3KBRF",bottomLayer:"_3U70F"}},37640:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={playerWrapper:"_3DJrq"}},11644:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_1GTRd",fullscreen:"_2agWE",videoFloaterMedia:"_1L9_f",fullScreenRedesign:"_3Ctk9",mediaStageWrapper:"YEIj6",videoTag:"Nu3Wb",preview:"_1U2GK",errorLink:"_1pC8H",errorLinkChevron:"_1Wl8F"}},18840:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={"-thumb-radius-window":"4.5px",thumbRadiusWindow:"4.5px","-thumb-radius-fullscreen":"5px",thumbRadiusFullscreen:"5px",controls:"JoCWT",fullscreen:"_3xiak",pipContainer:"R3QyF",closeBtn:"_3IFz7",duration:"_16nh8",fullscreenBtn:"_2bdZG",playpauseBtnContainer:"_12yJA",volumeContainer:"_2VCkS",currentTime:"_2_4KF",timeText:"_3uSsO",progressBarContainer:"_3jydI",hiddenProgressBar:"_3pwnf",displayedProgressBar:"_21ku_",progressItem:"_3KsQN",displayedProgress:"_3BMKG",displayedBuffer:"_30H64",displayedTrack:"hSz6i",thumb:"al2Th",hideThumb:"_3F6-u",volumeBarContainer:"_1HuQo",visible:"_3MSTc",volumeLowerTrack:"_1doUo",firefoxFix:"_--MFl",lowerTrackLongest:"_2Ui3v",volumeBar:"R14Al",tooltipWrapper:"_2q2Ao",tooltipTextBoxPosAndSize:"_3QlVv",tooltipTextBoxGeneral:"sbESo"}},37326:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={container:"_3zkWT",fullscreen:"_2vZwf",youtubeContainer:"_1V2K3",blockYoutube:"_1x9uu",videoControlsWrapper:"_1U1Mw",strippedVideoControls:"_2HmZV",redesign:"_2f5jE",opacityTransition:"_1gTDs",widgetsWrapper:"_3gJPS",dimmed:"_1DumA"}},23398:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={description:"_3R1ue",price:"_3m_Hd",shareButton:"_3pVFc",detailContainer:"_3kf37",catalogListItem:"_1fb_h"}},87949:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={thumbsContainer:"_3qN7p",scrollContainer:"_1JJ7Z",viewerThumbs:"_258nw",thumbPadding:"_3L1Ml"}},30794:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaPanelHeader:"dFinM",info:"BG-df",productNameIcon:"_28a8d",productName:"_15N7L",mediaPanelTools:"LfZzj",infoName:"_3FYIN"}},94567:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaViewerAnimate:"_2uKUG","media-viewer-animate":"_2uKUG",cursorZoomOut:"_1ySjD",mediaViewer:"XDLQm",mediaContent:"_1ASvF",btnMediaNext:"_1Hcpd",btnMediaPrev:"_1cbLm",media:"_2R0bK",mediaWithCaption:"_3nZnk",mediaCaption:"_2mZu5",captionHidden:"_1rdGM"}},18413:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={mediaCanvas:"_27sCZ",canvasBody:"_1VwnE",list:"_4LH-P",listWrapper:"_1SLfK",canvasComponent:"_2bqRm",canvasComponentLarge:"_12SQt",canvasSecondRow:"_3r1Yv",canvasComponentLargeGallerySpacing:"_3VkTU",viewerFlow:"_1blm3",active:"_3ej1w",overlay:"mrr7z",placeholder:"_3z3XE",gradient:"CjdoI"}},97881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={voipFloater:"_1O6Us"}},34999:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={wrapper:"_3xKYi"}},30099:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={body:"IHGZG",callTitle:"_3dgg6",participantName:"_3Y4xy",actionRow:"VBnae",btnGroup:"_1UTAJ",btnAccept:"x24Wk",btnReject:"_2OWwK",btnEnd:"_2N43F",btnMute:"_2cngH",webrtcCanvas:"TA3bw",webrtcVideo:"_3eyg5",webrtcVideoPreview:"Nk6pN",webrtcAudio:"_3y1ot"}},52552:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={ul:"LP6da",inline:"_1VtNw"}},6778:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});const a={inline:"_2ZEMa"}},49704:(e,t,s)=>{"use strict";function a(){return new Worker(s.p+"webp_to_animation_frames.worker.d056f39f4ec5a8f7bc28.worker.js")}s.r(t),s.d(t,{default:()=>a})}}]);