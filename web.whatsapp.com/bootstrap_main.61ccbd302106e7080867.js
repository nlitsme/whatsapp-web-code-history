/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkbuild=self.webpackChunkbuild||[]).push([[7964],{93774:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.addProductToCart=function(e){var{id:t,name:a,imageHash:r,currency:s}=e,i=e.catalogWid.toString(),n=u.default.findCart(i),o=n.cartItemCollection.get(t),l=(null==o?void 0:o.quantity)||0,d=Math.min(l+1,h.MAX_QUANTITY),c={id:t,priceAmount1000:(0,C.getActivePrice)(e),currency:s,name:a,imageHash:r,quantity:d};n.cartItemCollection.add(c,{merge:!0}),n.trigger("change:cartItemCollection");var f=l+1>h.MAX_QUANTITY?N.QUANTITY_LIMIT_REACHED:N.SUCCESS;return O(n),{newCount:d,status:f}},t.updateProductQuantity=function(e,t,a){var r=u.default.findCart(e),s=r.cartItemCollection.get(t.id);null==s||s.set("quantity",a),r.trigger("change:cartItemCollection"),O(r)},t.deleteProductFromCart=function(e,t){var a=u.default.findCart(e);return a.cartItemCollection.remove(t),a.trigger("change:cartItemCollection"),O(a),a.itemCount},t.clearCart=I,t.updateCartMessage=function(e,t){e.set("message",t),O(e)},t.submitOrder=function(){return P.apply(this,arguments)},t.matchCartItemsToProducts=function(){return k.apply(this,arguments)},t.showGenericErrorToast=function(){p.default.openToast(o.createElement(b.default,{msg:v.default.t(429),duration:6e3,id:(0,b.genId)()}))},t.pullCartUpdate=x,t.showCart=function(e,t,a){return(0,c.showCartFlow)(e,t,a)},t.parsePrice=B,t.isPriceMatch=G,t.createProductFromRefreshCartItem=U,t.checkCartEnabled=function(){return j.apply(this,arguments)},t.AddToCartStatus=void 0;var i=s(a(70417)),n=s(a(52954)),o=r(a(2784)),l=s(a(89216)),d=a(78091),u=s(a(99601)),c=a(90440),h=a(69160),f=s(a(65468)),p=s(a(79711)),m=s(a(9386)),_=a(75459),v=s(a(17957)),g=a(47296),E=s(a(37163)),S=a(8125),C=a(52918),y=s(a(55009)),b=r(a(75074)),T=a(11419),M=a(75637),N=a(28103).Mirrored(["SUCCESS","QUANTITY_LIMIT_REACHED"]);function I(e){e.cartItemCollection.reset(),e.set("message",void 0),e.trigger("change:cartItemCollection"),O(e)}function P(){return(P=(0,n.default)((function*(e,t){var a=yield(0,g.createOrder)(t.id,e.cartItemCollection.toArray());return yield(0,y.default)(t,a,e.itemCount,A(e),e.message),O(e),a.id}))).apply(this,arguments)}function A(e){var t,a,r=e.cartItemCollection.at(0);if(null==r)return"";var s=f.default.get((0,M.createWid)(e.id)),i=null==s?void 0:s.productCollection.get(r.id),n=null==i||null===(t=i.productImageCollection.at(0))||void 0===t?void 0:t.mediaData;if(null==n)return"";var o=null===(a=n.preview)||void 0===a?void 0:a.getBase64();return null!=o?o:""}function O(e){return(0,d.updateCart)(e)}function D(e,t){var a=function(e,t){return e.priceAmount1000===(0,C.getActivePrice)(t)&&e.currency===t.currency&&e.name===t.name&&e.imageHash===t.imageHash}(e,t);return a||e.set({priceAmount1000:(0,C.getActivePrice)(t),currency:t.currency,name:t.name,imageHash:t.imageHash},{silent:!0}),a}function w(e,t){var a=!t||function(e,t){var a,r,s=(0,C.getActivePrice)(F(t));return G(e.priceAmount1000,s)&&(!(0,T.isString)(e.currency)&&!(0,T.isString)(t.currency)||e.currency===t.currency)&&e.name===t.name&&e.imageHash===(null===(a=t.media)||void 0===a||null===(r=a.image)||void 0===r?void 0:r.id)}(e,t);if(!a&&t){var r=F(t);e.set({priceAmount1000:(0,C.getActivePrice)(r),currency:r.currency,name:r.name,imageHash:r.imageHash},{silent:!0})}return a}function R(e,t){if(!e||"deleted"!==e.status)return e;t.productCollection.remove(e.id)}function k(){return(k=(0,n.default)((function*(e,t){var a=f.default.get((0,M.createWid)(e.id)),r=[],s=[],i=!0,n=void 0;return t&&(n=yield x(e)),a&&e.cartItemCollection.forEach((o=>{var l=a.productCollection.get(o.id),d=n&&n.products.find((e=>e.id===o.id));if(d=R(d,a),!t&&l){var u=D(o,l);i=i&&u,r.push({product:l,cartItem:o})}else if(t&&d){var c=w(o,d);i=i&&c,r.push({product:U(d,e.id),cartItem:o})}else i=!1,s.push(o.id)})),a||I(e),i||(s.length&&e.cartItemCollection.remove(s),e.trigger("change:cartItemCollection"),L()),O(e),Promise.resolve(r)}))).apply(this,arguments)}function L(){p.default.openModal(o.createElement(m.default,{onOK:()=>{p.default.closeModal()}},v.default.t(421)))}function x(e){if(0===e.cartItemCollection.length)return Promise.resolve({products:[],price:{}});var t=e.cartItemCollection.map((e=>e.id));return(0,d.refreshCart)(e.id,t,u.default.imageWidth,u.default.imageHeight)}function F(e){var t,a,r,s,i;return{id:e.id,name:null!==(t=e.name)&&void 0!==t?t:"",imageCdnUrl:null===(a=e.media)||void 0===a||null===(r=a.image)||void 0===r?void 0:r.request_image_url,imageHash:null===(s=e.media)||void 0===s||null===(i=s.image)||void 0===i?void 0:i.id,currency:e.currency,priceAmount1000:B(e.price),salePriceAmount1000:e.sale_price,salePriceStartDate:(0,S.parseDateValue)(e.sale_start_date),salePriceEndDate:(0,S.parseDateValue)(e.sale_end_date)}}function B(e){return"string"==typeof e?e.length>0?parseInt(e,10):null:e}function G(e,t){var a=B(e),r=B(t);return(0,T.isNumber)(a)&&(0,T.isNumber)(r)?a===r:!(0,T.isNumber)(a)&&!(0,T.isNumber)(r)}function U(e,t){return new E.default((0,i.default)((0,i.default)({},F(e)),{},{catalogWid:(0,M.createWid)(t),productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1}))}function j(){return(j=(0,n.default)((function*(e){var t;if(!(0,_.cartPropEnabled)())return!1;var a=l.default.get(e);if(!a||a.stale){var r=yield l.default.update(e);a=Array.isArray(r)?r[0]:r}return(null===(t=a.profileOptions)||void 0===t?void 0:t.cartEnabled)||!1}))).apply(this,arguments)}t.AddToCartStatus=N},62315:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.genEncryptNotificationMsg)(e);return(0,r.handleSingleMsgMD)(t.from,t)};var r=a(39778),s=a(57385)},70750:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDelete=function(e){return v((0,f.unproxy)(e))};var i=s(a(19976)),n=r(a(2784)),o=a(12073),l=a(46774),d=s(a(79711)),u=a(60383),c=s(a(18120)),h=s(a(17957)),f=a(64658),p=s(a(23539));function m(){var e=(0,i.default)(["models:chat:sendDelete dropped"]);return m=function(){return e},e}function _(e){var t;switch(e){case l.KIND.GROUP:t=h.default.t(102);break;case l.KIND.BROADCAST:t=h.default.t(51);break;case l.KIND.CHAT:default:t=h.default.t(63)}return new o.ActionType(t)}function v(e){if(e.promises.sendDelete)return e.promises.sendDelete;var t=e.getLastMsgKeyForAction(),a=t?e.msgs.get(t):void 0,r=e.promises.sendDelete=(0,u.sendConversationDelete)(e.id,t,e.getLastMsgKeyForAction.bind(e)),s=e.kind,i=r.then((function(t){if(200===t.status)switch(p.default.removeAllLabelsMD(e),s){case l.KIND.GROUP:return c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(101)):new o.ActionType(h.default.t(100));case l.KIND.BROADCAST:return c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(50)):new o.ActionType(h.default.t(49));case l.KIND.CHAT:return c.default.supportsFeature(c.default.F.MD_BACKEND)?new o.ActionType(h.default.t(62)):new o.ActionType(h.default.t(61))}else if(t.status>=400)switch(s){case l.KIND.GROUP:return new o.ActionType(h.default.t(99));case l.KIND.BROADCAST:return new o.ActionType(h.default.t(48));case l.KIND.CHAT:return new o.ActionType(h.default.t(60))}})).catch((function(){var t;switch(__LOG__(3)(m()),s){case l.KIND.GROUP:t=h.default.t(99);break;case l.KIND.BROADCAST:t=h.default.t(48);break;case l.KIND.CHAT:default:t=h.default.t(60)}return new o.ActionType(t,{actionText:h.default.t(199),actionHandler:()=>v(e)})}));return d.default.openToast(n.createElement(o.ActionToast,{id:(0,o.genId)(),initialAction:_(s),pendingAction:i})),r.then((function(r){if(200===r.status&&!r._duplicate){var s=e.getLastMsgKeyForAction();t&&t.equals(s)||t===s?e.delete():e.deleteMsgsBeforeMsgInclusive(a)}})).finally((()=>{e.promises.sendDelete=null}))}},31659:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,l.getMaybeMeUser)(),h=e.msgContextInfo(a.id),f=(0,s.default)((0,s.default)({type:"buttons_response",ack:n.default.ACK.CLOCK,from:r,id:new d.default({from:r,to:a.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.default.globalUnixTime(),to:a.id},h),{},{buttonsResponse:{selectedButtonId:t.id,selectedDisplayText:t.displayText,type:o.ButtonsResponseMessageType.DISPLAY_TEXT},body:t.displayText||""});return(0,c.addAndSendMsgToChat)(a,f)[1]};var s=r(a(70417)),i=r(a(19899)),n=r(a(50935)),o=a(28703),l=a(95595),d=r(a(77865)),u=r(a(49213)),c=a(95721);a(59420)},63505:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.chat,r=e.msgContextInfo(a.id),h=(0,l.getMaybeMeUser)(),f=(0,s.default)((0,s.default)({type:"list_response",ack:n.default.ACK.CLOCK,from:h,id:new d.default({from:h,to:a.id,id:(0,u.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.default.globalUnixTime(),to:a.id},r),{},{listResponse:{listType:o.ListResponseMessageListType.SINGLE_SELECT,title:t.title,description:t.description,singleSelectReply:{selectedRowId:t.rowId}},body:(t.title||"")+(t.description?"\n".concat(t.description):"")});return(0,c.addAndSendMsgToChat)(a,f)[1]};var s=r(a(70417)),i=r(a(19899)),n=r(a(50935)),o=a(28703),l=a(95595),d=r(a(77865)),u=r(a(49213)),c=a(95721);a(59420)},55009:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,s){var m=(0,o.getMaybeMeUser)(),_=function(e,t,a,r,s){var u=(0,o.getMaybeMeUser)(),c={type:"order",ack:n.default.ACK.CLOCK,from:u,id:new l.default({from:u,to:e.id,id:(0,d.default)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:i.default.globalUnixTime(),to:e.id,orderId:t.id,token:t.token,orderTitle:e.name||e.formattedTitle,sellerJid:e.id.toString({legacy:!0}),thumbnail:r,itemCount:a,message:s},h=t.price.total;h&&h.length>0&&(c.totalAmount1000=parseInt(h,10));t.price.currency&&t.price.currency.length>0&&(c.totalCurrencyCode=t.price.currency);return c}(e,t,a,r,s);if(h.default.equals(e.id,m))return(0,u.addAndSendMsgToChat)(e,_)[0].then((()=>{})).catch((e=>{throw __LOG__(3)(p(),e),e}));return(0,u.addAndSendMsgToChat)(e,_)[1].then((e=>{if(!e||e!==c.SendMsgResult.OK)throw new Error("Order message SendMsgResult failure status")})).catch((e=>{throw __LOG__(3)(f(),e),e}))};var s=r(a(19976)),i=r(a(19899)),n=r(a(50935)),o=a(95595),l=r(a(77865)),d=r(a(49213)),u=a(95721),c=a(59420),h=r(a(68384));function f(){var e=(0,s.default)(["Order message send to chat failure: ",""]);return f=function(){return e},e}function p(){var e=(0,s.default)(["Order message send to chat failure: ",""]);return p=function(){return e},e}},37960:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendTextMsgToChat=function(e,t,a={}){return function(e,t,a={}){var r=(t||"").trim(),{linkPreview:g,quotedMsg:S,mentionedJidList:C,quotedMsgAdminGroupJid:y,selectedId:b,selectedIndex:T,ctwaContext:M}=a;if(""===r)return Promise.resolve();(0,p.clearPresence)(e);var N=e.id,I=(0,l.getMaybeMeUser)(),P=void 0;d.default.supportsFeature(d.default.F.MD_BACKEND)?e.isGroup&&(P=(0,E.toUserWid)(I)):P=void 0;var A,O=new f.default({from:I,to:N,id:(0,m.default)(),participant:P,selfDir:"out"});S?A=S.msgContextInfo(e.id):y&&(A={quotedRemoteJid:y});var D=(0,i.default)({id:O,body:r,type:"chat",subtype:g&&!(0,s.default)(g)?"url":null,t:n.default.globalUnixTime(),from:I,to:N,self:"out",isNewMsg:!0,local:!0,ack:o.default.ACK.CLOCK,urlText:e.urlText,urlNumber:e.urlNumber},g||{},A||{},{mentionedJidList:C},{ctwaContext:M});e.urlText&&(e.urlText=void 0);e.urlNumber&&(e.urlNumber=void 0);null!=T&&(D.type="template_button_reply",D.selectedId=b,D.selectedIndex=T);if(v.default.ephemeralMessages&&D.type!==o.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(D.ephemeralDuration=e.getEphemeralSetting());var w=e.getEphemeralSettingTimestamp();null!=w&&(D.ephemeralSettingTimestamp=w)}var R=new h.default(D);e.msgs.add(R),S&&S.type===o.default.MSG_TYPE.PRODUCT&&(0,u.logProductMessageBusinessSend)(S,S.sessionId);return(0,c.storeMessages)([D],e.id).then((()=>(0,_.sendMsgRecord)(R)))}((0,g.unproxy)(e),t,a)};var s=r(a(45455)),i=r(a(84573)),n=r(a(19899)),o=r(a(50935)),l=a(95595),d=r(a(18120)),u=a(83974),c=a(12425),h=r(a(27e3)),f=r(a(77865)),p=a(207),m=r(a(49213)),_=a(45591),v=(a(59420),r(a(72424))),g=a(64658),E=a(75637)},32544:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchive=function(e,t){return p((0,h.unproxy)(e),t)};var i=s(a(19976)),n=r(a(2784)),o=a(12073),l=a(69227),d=s(a(79711)),u=r(a(96452)),c=s(a(17957)),h=a(64658);function f(){var e=(0,i.default)(["models:chat:setArchive dropped"]);return f=function(){return e},e}function p(e,t,a=(0,o.genId)()){if(e.archive===t)return Promise.reject(new u.ActionError);var{promises:r}=e;if(r.setArchive)return r.setArchive;var s=e.getLastMsgKeyForAction(),i=(0,l.sendConversationArchive)(e.id,t,s).cancellable(),h=t?new o.ActionType(c.default.t(55)):new o.ActionType(c.default.t(82)),m=i.then((r=>{var s;return 200===r.status?(s=t?c.default.t(54):c.default.t(81),new o.ActionType(s,{actionText:c.default.t(203),actionHandler:()=>p(e,!t,a)})):r.status>=400?t?new o.ActionType(c.default.t(53)):new o.ActionType(c.default.t(80)):void 0})).catch((()=>{__LOG__(3)(f());var r=t?c.default.t(53):c.default.t(80);return new o.ActionType(r,{actionText:c.default.t(199),actionHandler:()=>p(e,t,a)})}));d.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:h,pendingAction:m}));var _=r.setArchive=i.then((a=>{200!==a.status||a._duplicate||(e.archive=t,t&&(e.pin=void 0))})).finally((()=>{r.setArchive=null}));return _.archive=t,_}},10131:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t){return f((0,c.unproxy)(e),t)};var i=s(a(19976)),n=r(a(2784)),o=a(12073),l=s(a(79711)),d=s(a(17957)),u=a(50015),c=a(64658);function h(){var e=(0,i.default)(["models:chat:setPin dropped"]);return h=function(){return e},e}function f(e,t,a=(0,o.genId)()){var{promises:r}=e;r.setPin&&r.setPin.cancel();var s,i=0;t?i=Math.round(+new Date):s=e.pin;var c=(0,u.setPin)(e.id,i,s).cancellable(),p=t?new o.ActionType(d.default.t(79)):new o.ActionType(d.default.t(89)),m=c.then((()=>{var r=t?d.default.t(78):d.default.t(88);return new o.ActionType(r,{actionText:d.default.t(203),actionHandler:()=>f(e,!t,a)})})).catch((r=>{if(405===r.status)return new o.ActionType(d.default.t(77));if(r.status>=400)return t?new o.ActionType(d.default.t(76)):new o.ActionType(d.default.t(87));__LOG__(3)(h());var s=t?d.default.t(76):d.default.t(87);return new o.ActionType(s,{actionText:d.default.t(199),actionHandler:()=>f(e,t,a)})}));return l.default.openToast(n.createElement(o.ActionToast,{id:a,initialAction:p,pendingAction:m})),r.setPin=c.then((t=>{t._duplicate||(e.pin=i)})).finally((()=>{r.setPin=null}))}},87819:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.findCommonGroups=function(e){var t=(0,d.unproxy)(e),{commonGroups:r,id:s,promises:c}=t;if(c.findCommonGroups)return c.findCommonGroups;if(r&&!r.stale)return Promise.resolve();return c.findCommonGroups=(0,l.default)(s).then((e=>{var o=(0,i.default)(e.map((e=>a(43334).default.get(e))));return r?(r.set(o),r.stale=!1):t.commonGroups=new n.default(o,s),!0})).catchType(o.ServerStatusCodeError,(e=>(__LOG__(3)(u(),e.status),Promise.reject(new Error("models:Contact:findCommonGroups error: "+e.status))))).finally((()=>{c.findCommonGroups=null}))};var s=r(a(19976)),i=r(a(60417)),n=r(a(16804)),o=a(19741),l=r(a(21552)),d=a(64658);function u(){var e=(0,s.default)(["models:Contact:findCommonGroups error: ",""]);return u=function(){return e},e}},55600:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return function(e){if(e.groupInviteCodePromise)return e.groupInviteCodePromise;return e.groupInviteCodePromise=(0,l.sendQueryGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).finally((()=>{e.groupInviteCodePromise=null}))}((0,d.unproxy)(e))},t.revokeGroupInvite=function(e){return function(e){if(e.revokeGroupInvitePromise)return e.revokeGroupInvitePromise;return e.revokeGroupInvitePromise=(0,l.sendRevokeGroupInviteCode)(e.id).then((t=>{e.inviteCode=t})).catchType(n.ServerStatusCodeError,(e=>{throw e})).catch((()=>{__LOG__(3)(u())})).finally((()=>{e.revokeGroupInvitePromise=null}))}((0,d.unproxy)(e))},t.joinGroupViaInvite=function(e){return(0,l.sendJoinGroupViaInvite)(e).then((e=>o.default.supportsFeature(o.default.F.MD_BACKEND)?i.default.gadd(e):i.default.find(e)))};var s=r(a(19976)),i=r(a(43334)),n=a(19741),o=r(a(18120)),l=a(29697),d=a(64658);function u(){var e=(0,s.default)(["models:groupMetadata:participantCollection:revokeGroupInvite dropped"]);return u=function(){return e},e}},63590:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupProperty=function(e,t,a){return _((0,p.unproxy)(e),t,a)};var i=s(a(19976)),n=r(a(2784)),o=a(12073),l=s(a(79711)),d=s(a(50935)),u=a(19741),c=r(a(96452)),h=s(a(17957)),f=a(88011),p=a(64658);function m(){var e=(0,i.default)(["Error while setting property"]);return m=function(){return e},e}function _(e,t,a,r=(0,o.genId)()){if(!t)return Promise.reject(new c.ActionError);if(t===d.default.GROUP_SETTING_TYPE.EPHEMERAL&&!e.groupMetadata.canSetEphemeralSetting())return Promise.reject(new c.ActionError);if(t!==d.default.GROUP_SETTING_TYPE.EPHEMERAL&&!e.groupMetadata.canSetGroupProperty())return Promise.reject(new c.ActionError);var s=(0,f.sendSetGroupProperty)(e.id,t,a),i={[d.default.GROUP_SETTING_TYPE.ANNOUNCEMENT]:{on:[h.default.t(477),h.default.t(469)],off:[h.default.t(476),h.default.t(468)]},[d.default.GROUP_SETTING_TYPE.RESTRICT]:{on:[h.default.t(483),h.default.t(475)],off:[h.default.t(482),h.default.t(474)]},[d.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED]:{on:[h.default.t(481),h.default.t(473)],off:[h.default.t(480),h.default.t(472)]},[d.default.GROUP_SETTING_TYPE.EPHEMERAL]:{on:[h.default.t(479),h.default.t(471)],off:[h.default.t(478),h.default.t(470)]}},p=0===a?"off":"on",[v,g]=i[t][p],E=new o.ActionType(v),S=s.then((()=>new o.ActionType(g))).catchType(u.ServerStatusCodeError,(e=>{if(404===e.status)return new o.ActionType(h.default.t(52)+" "+h.default.t(110))})).catch((()=>(__LOG__(3)(m()),new o.ActionType(h.default.t(52),{actionText:h.default.t(199),actionHandler:()=>_(e,t,a,r)}))));return l.default.openToast(n.createElement(o.ActionToast,{id:r,initialAction:E,pendingAction:S})),s.then((r=>{r._duplicate||e.groupMetadata.set(d.default.GROUP_SETTING_TO_METADATA[t],a)})).catchType(u.ServerStatusCodeError,(()=>{}))}},55488:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.markPlayed=function(e){return function(e){c(e)?(0,o.default)(e).then((()=>{e.ack=i.default.ACK.PLAYED})).catchType(n.WebdDrop,(()=>{})):__LOG__(2)(u())}((0,d.unproxy)(e))},t.canMarkPlayed=function(e){return c((0,d.unproxy)(e))};var s=r(a(19976)),i=r(a(50935)),n=a(19741),o=r(a(77021)),l=r(a(72424)),d=a(64658);function u(){var e=(0,s.default)(["Msg:msg should not call sendPlayed"]);return u=function(){return e},e}function c(e){return!e.isSentByMe&&(!(e.ack>=i.default.ACK.PLAYED)&&(e.type===i.default.MSG_TYPE.PTT||!!e.isViewOnce&&l.default.viewOnceWrite))}},47296:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,a,s){return(0,r.queryOrder)(e,t,a,s)},t.createOrder=function(e,t){return(0,r.createOrder)(e,t)};var r=a(63928)},18920:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.searchFirstPartyStickers=function(){return _.apply(this,arguments)};var i=s(a(70417)),n=s(a(52954)),o=a(8430),l=r(a(96452)),d=s(a(93601)),u=a(95595),c=s(a(40210)),h=s(a(86484)),f=s(a(74185)),p=s(a(99340)),m="https://static.whatsapp.net/sticker";function _(){return(_=(0,n.default)((function*(e,t){for(var a,r=(0,o.getCountryShortcodeByPhone)(null===(a=(0,u.getMaybeMeUser)())||void 0===a?void 0:a.user)||"default",s=0,n=0;s<=250;)s+=3+encodeURIComponent(e[n++]).length;var _=e.slice(0,n-1).join(","),v={country:r,ver:"2"},g=f.default.build(m,(0,i.default)((0,i.default)({},v),{},{search:_})),E=yield(0,d.default)(g,{signal:null==t?void 0:t.signal}),S=new c.default.StickerCommonQueryToStaticServer;if(S.set({httpResponseCode:E.status,params:new p.default(v).toString(),queryType:c.default.QUERY_TYPE.STICKER_SEARCH}),S.commit(),!E.ok)throw new l.InvalidServerResponseError(g,E.status.toString(),"Invalid response from WhatsApp stickers endpoint");var C=yield E.json();if(null==C)throw new l.InvalidServerResponseError(g,E.status.toString(),"Invalid response from WhatsApp stickers endpoint: ".concat(JSON.stringify(C)));return C.map(((e,t)=>new h.default({mimetype:e.mimetype,width:e.width,height:e.height,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0,index:t})))}))).apply(this,arguments)}},1012:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){var s=t.map((e=>(0,i.wap)("product",null,(0,i.wap)("id",null,e))));s.push((0,i.wap)("image_dimensions",null,(0,i.wap)("width",null,a.toString()),(0,i.wap)("height",null,r.toString())));var l=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,smax_id:"11",xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get"},(0,i.wap)("cart",{op:(0,i.CUSTOM_STRING)("refresh"),biz_jid:(0,u.USER_JID)(e)},s));return(0,n.sendIq)(l,c).then((e=>{if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))},t.refreshCartResponse=void 0;var s=r(a(70417)),i=a(30691),n=a(54086),o=a(19741),l=r(a(23767)),d=a(82296),u=a(95778),c=new l.default("refreshCartResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("cart"),a=t.maybeChild("price"),r={},i=null==a?void 0:a.maybeChild("subtotal");i&&(r.subtotal=i.contentString());var n=null==a?void 0:a.maybeChild("total");n&&(r.total=n.contentString());var o=null==a?void 0:a.maybeChild("currency");o&&(r.currency=o.contentString());var l=null==a?void 0:a.maybeChild("price_status");l&&(r.price_status=l.contentString());var u=[];return t.forEachChildWithTag("product",(e=>{var t,a=e.child("id").contentString(),r=e.maybeChild("name"),i=r?r.contentString():null,n=e.maybeChild("price"),o=n?parseInt(n.contentString(),10):null,l=e.maybeChild("currency"),c=l?l.contentString():null,h=e.maybeChild("sale_price"),f=h?(0,d.parseProductSalePriceNode)(h):void 0,p=e.maybeChild("media"),m=p?p.maybeChild("image"):null;if(null!=m){t={image:{}};var _=m.maybeChild("id");_&&_.hasContent()&&(t.image.id=_.contentString());var v=m.maybeChild("request_image_url");v&&v.hasContent()&&(t.image.request_image_url=v.contentString())}var g=(0,s.default)((0,s.default)({id:a,name:i,price:o,currency:c},f),{},{media:t}),E=e.maybeChild("status");E&&(g.status=E.contentString()),u.push(g)})),{price:r,products:u}}));t.refreshCartResponse=c},6556:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupInviteCode=function(e){return f((0,i.wap)("iq",{type:"get",xmlns:"w:g2",to:(0,d.GROUP_JID)(e),id:(0,i.generateId)()},(0,i.wap)("invite",null)))},t.revokeGroupInviteCode=function(e){return f((0,i.wap)("iq",{type:"set",xmlns:"w:g2",to:(0,d.GROUP_JID)(e),id:(0,i.generateId)()},(0,i.wap)("invite",null)))},t.joinGroupViaInvite=function(e){var t=(0,i.wap)("iq",{type:"set",xmlns:"w:g2",to:i.G_US,id:(0,i.generateId)()},(0,i.wap)("invite",{code:(0,i.CUSTOM_STRING)(e)}));return(0,n.sendIq)(t,p).then((e=>e.success?e.result:(__LOG__(2)(u(),e.errorCode,e.errorType),Promise.reject(new o.ServerStatusCodeError(e.errorCode,e.errorText)))))};var s=r(a(19976)),i=a(30691),n=a(54086),o=a(19741),l=r(a(23767)),d=a(95778);function u(){var e=(0,s.default)(["joinGroupInvite failed: ",":",""]);return u=function(){return e},e}function c(){var e=(0,s.default)(["sendGroupInviteIq failed: "," : ",""]);return c=function(){return e},e}var h=new l.default("queryGroupInviteCodeParser",(e=>({code:e.child("invite").attrString("code")})));function f(e){return(0,n.sendIq)(e,h).then((e=>e.success?e.result:(__LOG__(2)(c(),e.errorCode,e.errorType),Promise.reject(new o.ServerStatusCodeError(e.errorCode,e.errorText)))))}var p=new l.default("joinGroupViaInviteParser",(e=>(e.assertTag("iq"),e.assertAttr("from","g.us"),e.assertAttr("type","result"),{gid:e.child("group").attrGroupWid("jid")})))},55148:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setGroupSubject=function(e,t){return c((0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,s.generateId)()},(0,s.wap)("subject",null,t)))},t.setGroupDescription=function(e,t,a,r){var i=t?(0,s.wap)("description",{id:(0,s.CUSTOM_STRING)(a),prev:(0,s.MAYBE_CUSTOM_STRING)(r)},(0,s.wap)("body",null,t)):(0,s.wap)("description",{delete:"true",prev:(0,s.MAYBE_CUSTOM_STRING)(r)});return c((0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,s.generateId)()},i))},t.setGroupProperty=function(e,t,a){var r;switch(t){case n.default.GROUP_SETTING_TYPE.ANNOUNCEMENT:r=1===a?(0,s.wap)("announcement",null):(0,s.wap)("not_announcement",null);break;case n.default.GROUP_SETTING_TYPE.RESTRICT:r=1===a?(0,s.wap)("locked",null):(0,s.wap)("unlocked",null);break;case n.default.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED:r=1===a?(0,s.wap)("no_frequently_forwarded",null):(0,s.wap)("frequently_forwarded_ok",null);break;case n.default.GROUP_SETTING_TYPE.EPHEMERAL:r=a>0?(0,s.wap)("ephemeral",{expiration:(0,s.INT)(a)}):(0,s.wap)("not_ephemeral",null);break;default:return Promise.reject(new Error("invalid group property ".concat(t)))}return c((0,s.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,s.generateId)()},r))};var s=a(30691),i=a(54086),n=r(a(50935)),o=a(19741),l=r(a(23767)),d=a(95778),u=new l.default("setGroupInfoParser",(e=>{if(e.hasChild("error")){var t=e.child("error");return{errorCode:t.attrInt("code"),errorText:t.hasAttr("text")?t.attrString("text"):""}}return{success:!0}}));function c(e){return(0,i.sendIq)(e,u).then((e=>{if(!e.success)return Promise.reject(new o.ServerStatusCodeError(e.errorCode,e.errorText))}))}},24860:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.cartItemToNode=u,t.default=function(e,t){var a=t.map((e=>u(e))),r=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,smax_id:"10",xmlns:"fb:thrift_iq",id:(0,s.generateId)(),type:"set"},(0,s.wap)("order",{op:(0,s.CUSTOM_STRING)("create"),biz_jid:(0,l.USER_JID)(e)},a));return(0,i.sendIq)(r,d).then((e=>{if(e.success)return e.result;throw new n.ServerStatusCodeError(e.errorCode)}))},t.createOrderResponse=void 0;var s=a(30691),i=a(54086),n=a(19741),o=r(a(23767)),l=a(95778),d=new o.default("createOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("order"),a=t.attrString("id"),r=t.attrString("token"),s=t.maybeChild("price"),i={},n=null==s?void 0:s.maybeChild("subtotal");n&&(i.subtotal=n.contentString());var o=null==s?void 0:s.maybeChild("total");o&&(i.total=o.contentString());var l=null==s?void 0:s.maybeChild("currency");l&&(i.currency=l.contentString());var d=null==s?void 0:s.maybeChild("price_status");return d&&(i.price_status=d.contentString()),{id:a,token:r,price:i}}));function u(e){var t=null!=e.priceAmount1000?(0,s.wap)("price",null,e.priceAmount1000.toString()):void 0,a=e.currency?(0,s.wap)("currency",null,e.currency):void 0;return(0,s.wap)("product",null,(0,s.wap)("id",null,e.id),(0,s.wap)("name",null,e.name),t,a,(0,s.wap)("quantity",null,e.quantity.toString()))}t.createOrderResponse=d},22165:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){var l=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,smax_id:"5",xmlns:"fb:thrift_iq",id:(0,s.generateId)(),type:"get"},(0,s.wap)("order",{op:(0,s.CUSTOM_STRING)("get"),id:(0,s.CUSTOM_STRING)(e)},(0,s.wap)("image_dimensions",null,(0,s.wap)("width",null,t.toString()),(0,s.wap)("height",null,a.toString())),(0,s.wap)("token",null,r)));return(0,i.sendIq)(l,o).then((e=>{if(e.success)return e.result;throw new n.ServerStatusCodeError(e.errorCode)}))},t.queryOrderResponse=void 0;var s=a(30691),i=a(54086),n=a(19741),o=new(r(a(23767)).default)("queryOrderResponse",(e=>{e.assertTag("iq"),e.assertFromServer();var t=e.child("order"),a=t.hasAttr("creation_ts")?t.attrTime("creation_ts"):null,r=t.maybeChild("price"),s=null==r?void 0:r.maybeChild("subtotal"),i=s?parseInt(s.contentString(),10):null,n=null==r?void 0:r.maybeChild("currency"),o=n?n.contentString():null,l=null==r?void 0:r.maybeChild("tax"),d=l?parseInt(l.contentString(),10):null,u=null==r?void 0:r.maybeChild("total"),c=u?parseInt(u.contentString(),10):null,h=[];return t.forEachChildWithTag("product",(e=>{var t=e.child("id").contentString(),a=e.child("name").contentString(),r=e.maybeChild("price"),s=r?parseInt(r.contentString(),10):null,i=e.maybeChild("quantity"),n=i?parseInt(i.contentString(),10):null,o=e.maybeChild("currency"),l=o?o.contentString():null,d=null,u=null,c=e.maybeChild("image");if(null!=c){var f=c.maybeChild("url");u=f&&f.hasContent()?f.contentString():null;var p=c.maybeChild("id");d=p&&p.hasContent()?p.contentString():null}h.push({id:t,price:s,thumbnailId:d,thumbnailUrl:u,currency:l,name:a,quantity:n})})),{currency:o,createdAt:a,products:h,subtotal:i,total:c,tax:d}}));t.queryOrderResponse=o},834:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,c.createWid)(e).toString({legacy:!0}),s=(0,i.wap)("iq",{xmlns:"fb:thrift_iq",id:(0,i.generateId)(),type:"get",to:i.S_WHATSAPP_NET,smax_id:"4"},(0,i.wap)("account_number",null,r),(0,i.wap)("code",null,t),(0,i.wap)("expected_source_url",null,a));return(0,o.sendIq)(s,f).then((e=>{if(e.success)return e.result;throw new d.ServerStatusCodeError(e.errorCode)}))};var s=r(a(19976)),i=a(30691),n=a(60339),o=a(54086),l=a(28703),d=a(19741),u=r(a(23767)),c=a(75637);function h(){var e=(0,s.default)(["getCtwaContext error: code "," text ",""]);return h=function(){return e},e}var f=new u.default("ctwaContext",(e=>{e.assertTag("iq"),e.assertFromServer();var t,a,r,s=e.child("context"),i={};return e.hasChild("error")?(t=e.child("error"),a=t&&t.maybeAttrString("code"),r=t&&t.maybeAttrString("text"),__LOG__(3)(h(),a,r),Promise.reject(new Error("invalid response"))):(i.sourceUrl=s.child("source").child("url").contentString(),i.sourceId=s.child("source").child("id").contentString(),i.sourceType=s.child("source").child("type").contentString(),s.hasChild("headline")&&(i.title=s.child("headline").contentString()),s.hasChild("body")&&(i.description=s.child("body").contentString()),s.hasChild("thumbnail")&&(s.child("thumbnail").hasChild("url")&&(i.thumbnailUrl=s.child("thumbnail").child("url").contentString()),s.child("thumbnail").hasChild("bytes")&&(i.thumbnail=(0,n.encodeB64)(s.child("thumbnail").child("bytes").contentBytes())),s.hasChild("video")?(i.mediaUrl=s.child("video").child("url").contentString(),i.mediaType=l.ExternalAdReplyInfoMediaType.VIDEO):i.mediaType=l.ExternalAdReplyInfoMediaType.IMAGE),i)}))},77766:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return m.apply(this,arguments)};var s=r(a(52954)),i=a(30691),n=a(97148),o=a(41714),l=a(54086),d=r(a(50935)),u=a(95595),c=a(52303),h=a(73095),f=a(95778);function p(){var e,t=(0,n.getABPropConfigValue)("played_self_enabled");return(null===(e=(0,u.getUserPrivacySettings)())||void 0===e?void 0:e.readReceipts)===h.ALL_NONE.none&&!0===t?o.RECEIPT_TYPE.PLAYED_SELF:o.RECEIPT_TYPE.PLAYED}function m(){return(m=(0,s.default)((function*(e,t){var a=e.broadcastId||t,r=e.id.id,s=a.isUser()?null:e.author,n=p(),o=(0,i.wap)("receipt",{to:(0,f.CHAT_JID)(a),type:n,id:(0,i.CUSTOM_STRING)(r),t:(0,i.CUSTOM_STRING)(Date.now().toString()),participant:s?(0,f.DEVICE_JID)(s):i.DROP_ATTR});return yield(0,l.sendStanzaAndWaitForAck)(o,{id:r,class:"receipt",type:n,from:a,participant:s}),(0,c.getTable)().merge(e.id.toString(),{ack:d.default.ACK.PLAYED})}))).apply(this,arguments)}},13309:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(52954)),n=a(63487),o=a(3531),l=a(11008),d=r(a(43334)),u=a(75637),c=a(8239),h=r(a(82657)),f=a(84139),p=a(68519),m=a(61239),_=a(49887);function v(){var e=(0,s.default)(["pin chat sync: operation not supported"]);return v=function(){return e},e}function g(){var e=(0,s.default)(["pin_message_sync: chat with "," not found in collection"]);return g=function(){return e},e}function E(){var e=(0,s.default)(["pin message sync: malformed mutation"]);return E=function(){return e},e}class S extends c.SyncActionBase{constructor(...e){super(...e),this.version=3}getChatJidAndMessageKey(e){var[,t]=e.index;return{chatJid:t,messageKey:null}}applyMutations(e){return Promise.all(e.map(function(){var e=(0,i.default)((function*(e){try{if("set"===e.operation){var t,{indexParts:a,value:r,timestamp:s}=e,[,i]=a;i||(0,_.throwInvalidActionIndex)();var o=null===(t=r.pinAction)||void 0===t?void 0:t.pinned;if(null==o)return __LOG__(3)(E()),{actionState:n.SyncActionState.Malformed};var c=(0,u.createWid)(i).toString();if(!(yield(0,l.getChatTable)().get(c)))return{actionState:n.SyncActionState.Orphan,orphanModel:{modelType:n.SyncModelType.Chat,modelId:c}};var h=s,f=[];if(o){var p=(yield(0,l.getChatTable)().all()).filter((e=>e.pin));if(p.length>=3){var m=p.reduce(((e,t)=>null!=e.pin&&null!=t.pin&&e.pin<t.pin?e:t));null!=m.pin&&null!=h&&m.pin<=h&&(f.push({id:m.id.toString(),pin:0}),f.push({id:c,pin:h,archive:!1}))}else f.push({id:c,pin:h,archive:!1})}else f.push({id:c,pin:0});return yield(0,l.getChatTable)().bulkCreateOrMerge(f),f.forEach((e=>{var t=d.default.get(e.id);t?(t.pin=e.pin,o&&(t.archive=!1)):__LOG__(3)(g(),e.id)})),{actionState:n.SyncActionState.Success}}return __LOG__(3)(v()),{actionState:n.SyncActionState.Unsupported}}catch(e){return{actionState:n.SyncActionState.Failed}}}));return function(){return e.apply(this,arguments)}}()))}getPinMutation(e,t,a,r){return{collection:n.CollectionName.RegularLow,index:JSON.stringify([n.Actions.Pin,a.toString({legacy:!0})]),binarySyncAction:(0,p.encodeProto)(m.SyncActionValueSpec,{timestamp:r,pinAction:{pinned:t}}).readBuffer(),version:this.version,operation:o.SyncdMutationSyncdOperation.SET,timestamp:e}}dropMutationDueToCrossIndexConflict(e,t){return(0,i.default)((function*(){var a,r,s,i=e=>(0,f.decodeProto)(m.SyncActionValueSpec,e);if(!(null===(a=i(e.binarySyncAction).pinAction)||void 0===a?void 0:a.pinned))return!1;var o=JSON.parse(e.index)[1],l=JSON.stringify([n.Actions.Archive,o]),d=yield h.default.getSyncAction(l);if(d&&(null===(r=i(d.binarySyncAction).archiveChatAction)||void 0===r?void 0:r.archived)&&d.timestamp>e.timestamp)return!0;var u=t.get(l);return!!(u&&(null===(s=i(u.binarySyncAction).archiveChatAction)||void 0===s?void 0:s.archived)&&u.timestamp>e.timestamp)}))()}}var C=new S;Object.freeze(C);var y=C;t.default=y},4870:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);t.Z=void 0;var i=s(a(19976)),n=s(a(70417)),o=s(a(84573)),l=s(a(16760)),d=s(a(98537)),u=s(a(54004)),c=a(73559),h=a(84139),f=a(68519),p=a(60339),m=s(a(19034)),_=s(a(31225)),v=s(a(50935)),g=a(28703),E=a(95595),S=a(84962),C=s(a(18120)),y=s(a(86014)),b=s(a(77865)),T=s(a(61941)),M=r(a(69338)),N=s(a(49213)),I=s(a(53397)),P=s(a(74185)),A=s(a(5361)),O=a(21617),D=s(a(68384)),w=s(a(12767));function R(){var e=(0,i.default)(["LiveLocation:update without lat/lng"]);return R=function(){return e},e}function k(){var e=(0,i.default)(["LiveLocation:update with lat/lng"]);return k=function(){return e},e}function L(){var e=(0,i.default)(["bin-recv: response,location"]);return L=function(){return e},e}function x(){var e=(0,i.default)(["LiveLocation:response without lat/lng"]);return x=function(){return e},e}function F(){var e=(0,i.default)(["LiveLocation:response with lat/lng"]);return F=function(){return e},e}function B(){var e=(0,i.default)(["LiveLocation:response with no participants"]);return B=function(){return e},e}function G(){var e=(0,i.default)(["bin-recv: response,location"]);return G=function(){return e},e}function U(){var e=(0,i.default)(["drop: cannot create MsgKey: ",""]);return U=function(){return e},e}function j(){var e=(0,i.default)(["drop: broadcast"]);return j=function(){return e},e}function V(){var e=(0,i.default)(["drop: failed parsing wmi"]);return V=function(){return e},e}function H(){var e=(0,i.default)(["wmi error: ",""]);return H=function(){return e},e}function W(){var e=(0,i.default)(["drop: no bytes"]);return W=function(){return e},e}function Y(){var e=(0,i.default)(["drop: not message"]);return Y=function(){return e},e}function K(){var e=(0,i.default)(["expected tag: received, received tag: ",", tag id: ",""]);return K=function(){return e},e}function q(){var e=(0,i.default)(["expected tag: user, received tag: ",", tag id: ",""]);return q=function(){return e},e}function z(){var e=(0,i.default)(["wap:requestMediaReupload:malformed"]);return z=function(){return e},e}function Q(){var e=(0,i.default)(["wap:requestMediaReupload:error ",""]);return Q=function(){return e},e}function X(){var e=(0,i.default)(["Assertion failed!"]);return X=function(){return e},e}function J(){var e=(0,i.default)(["wap:requestMediaReupload:error ",""]);return J=function(){return e},e}function Z(){var e=(0,i.default)(["bin-recv: response,media"]);return Z=function(){return e},e}function $(){var e=(0,i.default)(["bin-recv: response,statusv3"]);return $=function(){return e},e}function ee(){var e=(0,i.default)(["bin-recv: response,statusv3"]);return ee=function(){return e},e}function te(){var e=(0,i.default)(["bin-recv: response,msg"]);return te=function(){return e},e}function ae(){var e=(0,i.default)(["wap:msgCreateRecord:sendMedia error ",""]);return ae=function(){return e},e}function re(){var e=(0,i.default)(["wap:msgCreateRecord mPromise error (","): ",""]);return re=function(){return e},e}function se(){var e=(0,i.default)(["bin-recv: response,receipt"]);return se=function(){return e},e}function ie(){var e=(0,i.default)(["bin-recv: response,resume"]);return ie=function(){return e},e}function ne(){var e=(0,i.default)(["bin-recv: response,emoji"]);return ne=function(){return e},e}function oe(){var e=(0,i.default)(["bin-recv: response,actions"]);return oe=function(){return e},e}function le(){var e=(0,i.default)(["bin-recv: response,msg,info"]);return le=function(){return e},e}function de(){var e=(0,i.default)(["bin-recv: response,url"]);return de=function(){return e},e}function ue(){var e=(0,i.default)(["bin-recv: response,identity"]);return ue=function(){return e},e}function ce(){var e=(0,i.default)(["received tag: ",", tag id: ",""]);return ce=function(){return e},e}function he(){var e=(0,i.default)(["expected tag: chat, received tag: ",", tag id: ",""]);return he=function(){return e},e}function fe(){var e=(0,i.default)(["expected tag: broadcast, received tag: ",", tag id: ",""]);return fe=function(){return e},e}function pe(){var e=(0,i.default)(["expected tag: battery, received tag: ",", tag id: ",""]);return pe=function(){return e},e}function me(){var e=(0,i.default)(["create group tag"]);return me=function(){return e},e}var _e=(0,n.default)((0,n.default)({version:"17",M:y.default,BinaryProtocol:null,N:null,addContact:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["contacts",{type:"add"},e]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,contact,add",metricName:"CONTACT",ackRequest:!0})}))},addParticipants:function(e,t){return this.setGroupParticipants("add",e,t)},changeSubject:function(e,t){return new Promise(((a,r)=>{var s=w.default.tag(),i=this.wrap(a);i.tag=s;var n=["group",{id:s,jid:e,type:"subject",author:(0,E.getMaybeMeUser)(),subject:t},void 0],o=this.actionNode("set",[n]);this.binSend("send",o,r,{clientCacheable:!0,onSend:i,onDrop:this.wrap(r)},{debugString:"action,group,subject",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},chatFindQuery:function(e,t){return new Promise(((a,r)=>{var s={type:"chat"};"boolean"==typeof e&&e?s.kind="retry":"string"==typeof e&&(s.jid=e);var i=this.queryNode(s,void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"chat"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(r)){var s,i=r.length;for(s=0;s<i;s++){var n=this.parseChat(r[s]);n&&t.push(n)}}a(t)})).catch(r)}),a),logOnSend:t,onDrop:this.wrap(r)},{debugString:["query","chat",e].join(),metricName:"QUERY_CHAT",ackRequest:!1})}))},contactFindQuery:function(e,t){return new Promise(((a,r)=>{var s=this.queryNode({type:"contacts",kind:e?"retry":void 0},void 0);this.binSend("send",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"contacts"===this.N.attr("type",e))if("true"===this.N.attr("duplicate",e))t="preempted";else if(Array.isArray(r)){var s,i=r.length;for(s=0;s<i;s++){var n=this.parseContact(r[s]);n&&t.push(n)}}a({checksum:this.N.attr("checksum",e),data:t})})).catch(r)}),a),logOnSend:t,onDrop:this.wrap(r)},{debugString:"query,contacts, "+String(e),metricName:"QUERY_CONTACTS",ackRequest:!1})}))},createGroup:function(e,t,a=!1){return new Promise(((a,r)=>{var s=w.default.tag(),i=this.wrap(a);i.tag=s;var n=t.map((e=>["participant",{jid:e},void 0]));__LOG__(2)(me());var o=["group",{id:s,type:"create",author:(0,E.getMaybeMeUser)(),subject:e},n],l=this.actionNode("set",[o]);this.binSend("send",l,r,{clientCacheable:!0,onSend:i,onDrop:this.wrap(r)},{debugString:"action,group,create",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},deletePicture:function(e){return new Promise(((t,a)=>{var r=w.default.tag(),s=this.wrap(t);s.tag=r;var i=["picture",{id:r,jid:e,type:"delete"},void 0],n=this.actionNode("set",[i]);this.binSend("send",n,a,{clientCacheable:!0,onSend:s,onDrop:this.wrap(a)},{debugString:"action,delete_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},groupMetadataFindFromPhone:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"group",jid:e},[]);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((r=>{this.BinaryProtocol.read(r).then((a=>{if("response"===this.N.tag(a)&&"group"===this.N.attr("type",a)){var r=this.N.children(a),s=r&&r[0];if(s)if("missing"!==this.N.attr("type")){var i,n=[],o=this.N.children(s),l=!1;Array.isArray(o)&&o.forEach((e=>{switch(this.N.tag(e)){case"participant":n.push({id:this.N.attr("jid",e),isAdmin:"admin"===this.N.attr("type",e)});break;case"description":i=this.N.dataStr(e);break;case"support":l=!0}})),t({status:"ok",data:{creation:parseInt(this.N.attr("create",s),10)||void 0,desc:i,id:e,owner:this.N.attr("creator",s),participants:n,support:l}})}else t({status:"missing"});else t({status:"error",info:"bad format: no group node"})}else t({status:"error",info:"bad format: response incorrect"})})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,group,"+e,metricName:"QUERY_GROUP",ackRequest:!1})}))},leaveGroup:function(e){return new Promise(((t,a)=>{var r=w.default.tag(),s=this.wrap(t);s.tag=r;var i=["group",{id:r,jid:e,type:"leave",author:(0,E.getMaybeMeUser)()},void 0],n=this.actionNode("set",[i]);this.binSend("send",n,a,{clientCacheable:!0,onSend:s,onDrop:this.wrap(a)},{debugString:"action,group,delete",metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},parseBattery:function(e){if("battery"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(pe(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t=Math.min(parseInt(this.N.attr("value",e),10)||-1,100),a=this.N.attr("live",e),r={battery:t<0?void 0:t,plugged:a?"true"===a:void 0};return this.dropIfConditionMet([t<0&&!a],r)},parseBCUpdate:function(e){if("broadcast"!==this.N.tag(e)||"modify"!==this.N.attr("type",e))return __LOG__(4,void 0,new Error,!0)(fe(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t=this.N.attr("jid",e),a=this.N.children(e),r=[];if(Array.isArray(a)){var s,i,n,o=a.length;for(s=0;s<o;s++)i=a[s],n=this.N.attr("jid",i),"recipient"===this.N.tag(i)&&n&&D.default.isUser(n)&&r.push({id:n})}var l=[!t,!D.default.isBroadcast(t),0===r.length];return this.dropIfConditionMet(l,{id:t,participants:r})},parseChat:function(e){if("chat"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(he(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t=this.N.attr("kind",e),a=this.N.attr("type",e),r=this.N.attr("jid",e),s=parseInt(this.N.attr("t",e),10)||void 0,i=parseInt(this.N.attr("mute",e),10),n=parseInt(this.N.attr("before",e),10)||void 0,o="true"===this.N.attr("archive",e),l="true"===this.N.attr("read_only",e),d=parseInt(this.N.attr("modify_tag",e),10)||void 0,u=this.N.attr("name",e)||void 0,c=this.safeParseInt(e,"count"),h="true"===this.N.attr("message",e),f="true"===this.N.attr("star",e),p="false"===this.N.attr("spam",e),m=parseInt(this.N.attr("pin",e),10)||0,_=this.N.attr("old_jid",e),v=this.N.attr("new_jid",e),g=parseInt(this.N.attr("ephemeral",e),10)||0,E=parseInt(this.N.attr("eph_setting_ts",e),10)||0;switch(t){case"text":case"image":case"video":case"gif":case"audio":case"ptt":case"document":case"location":case"vcard":case"url":case"sticker":break;default:t=void 0}"ahead"===a&&(a="clear");var S,C,y=this.N.children(e);if(Array.isArray(y)){var b,T;S=[],C=[];var M=y.length;for(b=0;b<M;b++)if(T=y[b],"item"===this.N.tag(T)){var N=this.N.attr("index",T);N&&S.push([N,"true"===this.N.attr("owner",T),this.N.attr("participant",T)])}else if("label"===this.N.tag(T)){var I=this.N.attr("id",T);I&&C.push(I)}else{var P=this.parseMsgMessage(T,"response");P&&S.push(P)}}var A={id:r,t:s,type:a,kind:t,keys:S,before:n,archive:o,isReadOnly:l,unreadCount:c,muteExpiration:isNaN(i)?void 0:i,modifyTag:d,name:u,pendingMsgs:h,star:f,notSpam:p,pin:m,changeNumberOldJid:_,changeNumberNewJid:v,ephemeralDuration:D.default.isUser(r)?g:void 0,ephemeralSettingTimestamp:D.default.isUser(r)?E:void 0,labels:C};this.pruneUndefinedProps(A);var O=[a&&"delete"!==a&&"clear"!==a&&"ephemeral"!==a&&"archive"!==a&&"unarchive"!==a&&"mute"!==a&&"star"!==a&&"unstar"!==a&&"spam"!==a&&"modify_tag"!==a&&"pin"!==a&&"modify"!==a,!a&&!r,o&&a&&"clear"!==a,"clear"!==a&&n&&n>0,"clear"!==a&&"star"!==a&&"unstar"!==a&&S&&S.length>0];return this.dropIfConditionMet(O,A)},parseMsg:function(e,t){switch(this.N.tag(e)){case"message":return this.parseMsgMessage(e,t);default:return __LOG__(4,void 0,new Error,!0)(ce(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unknown-tag")}},parseIdentity:function(e){var t=this.N.child("raw",e),a=this.N.child("text",e);if(t&&a&&this.N.children(t)instanceof ArrayBuffer&&this.N.dataStr(a))return{jid:this.N.attr("jid",e),binary:this.N.children(t),string:this.N.dataStr(a)}},profilePicFindThumbFromPhone:function(e,t,a){return new Promise(((r,s)=>{var i={type:"preview",jid:e};t&&t.tag&&t.raw&&(i.id=t.tag),a&&(i.kind="status");var n=this.queryNode(i,[]);this.binSend("sendEphemeral",n,s,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{"response"===this.N.tag(a)&&"preview"===this.N.attr("type",a)||s("Not response or preview");var i=this.N.children(a),n=i&&i[0];if(n||s("Missing preview node"),"missing"===this.N.attr("type",n))r({id:e,tag:void 0,raw:void 0});else{var o,l=this.N.attr("id",n);if(t&&l===t.tag&&t.raw)o=t.raw;else{var d=this.N.children(n);o=d?(0,p.encodeB64)(d):void 0}r({id:e,tag:l,raw:o})}})).catch(s)}),r),onDrop:this.wrap(s)},{debugString:"query,thumb,"+e,metricName:"QUERY_PREVIEW",ackRequest:!1})}))},promoteParticipants:function(e,t){return this.setGroupParticipants("promote",e,t)},queryIdentity:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"identity",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=void 0;__LOG__(2)(ue()),"response"===this.N.tag(e)&&"identity"===this.N.attr("type",e)&&(a=this.parseIdentity(e)),t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,identity,".concat(e),metricName:"QUERY_IDENTITY",ackRequest:!1})}))},queryLinkPreview:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"url",url:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=void 0;if(__LOG__(2)(de()),"response"===this.N.tag(e)&&"url"===this.N.attr("type",e)){var r=this.N.children(e);a={title:this.N.attr("title",e),description:this.N.attr("description",e),canonicalUrl:this.N.attr("canonical-url",e),matchedText:this.N.attr("matched-text",e),preview:this.N.attr("preview",e),thumbnail:r?(0,p.encodeB64)(r):void 0,doNotPlayInline:"true"===this.N.attr("do-not-play-inline",e)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,url",metricName:"QUERY_URL",ackRequest:!1})}))},queryMsgInfo:function(e){var t=e=>{var t,a,r=[];if(Array.isArray(e)){t=e.length;for(var s=0;s<t;s++)a=e[s],"item"===this.N.tag(a)&&this.N.attr("jid",a)&&this.N.attr("t",a)&&r.push({id:this.N.attr("jid",a),t:parseInt(this.N.attr("t",a),10)||0})}return r};return new Promise(((a,r)=>{var s=this.queryNode({type:"message_info",index:e.id,jid:e.remote},void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={played:[],playedRemaining:0,read:[],readRemaining:0,delivery:[],deliveryRemaining:0};if(__LOG__(2)(le()),"response"===this.N.tag(e)&&"message_info"===this.N.attr("type",e)){var s=this.N.child("played",e),i=this.N.child("read",e),n=this.N.child("delivery",e),o=this.N.children(s),l=this.N.children(i),d=this.N.children(n),u=parseInt(this.N.attr("count",e),10)||0;r.played=t(o),r.read=t(l),r.delivery=t(d);var c=u-r.played.length,h=u-r.played.length-r.read.length,f=u-r.played.length-r.read.length-r.delivery.length;r.playedRemaining=c<0?0:c,r.readRemaining=h<0?0:h,r.deliveryRemaining=f<0?0:f}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:["query,msg,info",e.id,e.remote,e.fromMe].join(),metricName:"QUERY_MESSAGE_INFO",ackRequest:!1})}))},queryReceivedActions:function(e){return new Promise(((t,a)=>{var r=e.map((e=>["item",{id:e},void 0])),s=this.queryNode({type:"action"},r);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(oe()),"response"===this.N.tag(e)&&"action"===this.N.attr("type",e))if(Array.isArray(r)){var s,i=r.length;for(s=0;s<i;s++){var n=r[s],o=this.N.attr("id",n),l=parseInt(this.N.attr("code",n),10)||0;"item"===this.N.tag(n)&&o&&0!==l&&a.push({id:o,code:l})}}else"true"===this.N.attr("replaced",e)&&(a="replaced");t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,actions",metricName:"QUERY_ACTIONS",ackRequest:!1})}))},recentEmojiQuery:function(e){return new Promise(((t,a)=>{var r=Array.isArray(e)?e.map((e=>["item",{code:e.id,value:e.weight.toString()},void 0])):void 0,s=this.queryNode({type:"emoji"},r);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(ne()),"response"===this.N.tag(e)&&"emoji"===this.N.attr("type",e)&&Array.isArray(r)){var s,i=r.length;for(s=0;s<i;s++){var n=r[s],o=this.N.attr("code",n),l=parseFloat(this.N.attr("value",n))||0;"item"===this.N.tag(n)&&o&&l&&!isNaN(l)&&a.push({id:o,weight:l})}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,emoji",metricName:"QUERY_EMOJI",ackRequest:!1})}))},removeParticipants:function(e,t){return this.setGroupParticipants("remove",e,t)},resyncMessages:function(e){return new I.default(((t,a)=>{var r=e.map((e=>{var t={jid:e.wid,index:e.id,owner:e.fromMe,participant:e.participant,archive:(!!e.archive).toString(),spam:(!e.notSpam).toString(),old_jid:e.changeNumberOldJid,new_jid:e.changeNumberNewJid};return e.mute&&(t.mute=e.mute.toString()),D.default.isUser(e.wid)&&e.ephemeralDuration&&(t.ephemeral=e.ephemeralDuration.toString()),D.default.isUser(e.wid)&&null!=e.ephemeralSettingTimestamp&&(t.eph_setting_ts=e.ephemeralSettingTimestamp.toString()),e.active&&(t.active="true"),D.default.isGroup(e.wid)&&(t.read_only=(!!e.isReadOnly).toString()),e.modifyTag&&(t.modify_tag=e.modifyTag.toString()),e.unreadCount&&(t.count=e.unreadCount.toString()),e.pin&&(t.pin=e.pin.toString()),["last",t,void 0]})),s=this.queryNode({type:"resume"},r);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(ie()),"response"===this.N.tag(e)&&"resume"===this.N.attr("type",e)&&Array.isArray(r)){var s,i=r.length;for(s=0;s<i;s++){var n=this.parseChat(r[s]);n&&a.push(n)}}t({checksum:this.N.attr("checksum",e),statusChecksum:this.N.attr("status",e),labelsChecksum:this.N.attr("label",e),quickRepliesChecksum:this.N.attr("quick_reply",e),stickerPackChecksum:this.N.attr("sticker_pack",e),recentStickersChecksum:this.N.attr("recent_stickers",e),starredStickersChecksum:this.N.attr("starred_stickers",e),data:a})})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,resume",metricName:"QUERY_RESUME",ackRequest:!1})}))},resyncReceipts:function(e){return new Promise(((t,a)=>{var r=e.map((e=>["last",{jid:e.remote,index:e.id,owner:e.fromMe.toString(),participant:e.participant,t:e.t.toString(),pay_t:e.payT&&e.payT.toString()},void 0])),s=this.queryNode({type:"receipt"},r);this.binSend("sendEphemeral",s,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if(__LOG__(2)(se()),"response"===this.N.tag(e)&&"receipt"===this.N.attr("type",e)&&Array.isArray(r)){var s,i,n,o=r.length;for(s=0;s<o;s++){i=r[s],n=this.N.children(i);var l=this.N.attr("jid",i),d=this.N.attr("t",i),u=this.N.attr("pay_t",i);if("receipt"===this.N.tag(i)&&l&&(d||u)&&Array.isArray(n)){var c=void 0,h=[],f=[],p=n.length;for(c=0;c<p;c++){var m=n[c];if("item"===this.N.tag(m)){var _=this.N.attr("index",m),v="true"===this.N.attr("owner",m),g=parseInt(this.N.attr("status",m),10)||0,E=this.N.attr("participant",m),S=parseInt(this.N.attr("t",m),10)||void 0;_&&0!==g&&g<=4&&h.push({id:_,fromMe:v,participant:E,status:g,t:S})}else if("message"===this.N.tag(m)){var C=this.parseMsgMessage(m);C&&f.push(C)}}h.length>0&&a.push({id:l,t:d&&parseInt(d,10),payT:u&&parseInt(u,10),acks:h,msgs:f})}}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:!0},{debugString:"query,receipt",metricName:"QUERY_RECEIPT",ackRequest:!1})}))},sendChatstateUpdate:function(e,t){if(["composing","paused","recording"].includes(e))return new Promise(((a,r)=>{var s=this.actionNode("set",[["presence",{type:e,to:t},void 0]],!0);this.binSend("sendEphemeralIgnore",s,r,{onSend:a,onDrop:r,epochIneligible:!0},{debugString:"action,chatstate,"+e,metricName:"PRESENCE",skipOffline:!0,ackRequest:!1})}))},sendConversationArchive:function(e,t,a){return this.sendConversationOpWithKey(t?"archive":"unarchive",e,a)},sendConversationClear:function(e,t,a){return this.sendConversationOpWithKey("clear",e,t,a)},sendConversationDelete:function(e,t){return this.sendConversationOpWithKey("delete",e,t)},sendConversationMute:function(e,t,a){return new Promise(((r,s)=>{var i=t?t.toString():void 0,n=a?a.toString():void 0,o=this.actionNode("set",[["chat",{type:"mute",mute:i,previous:n,jid:e},void 0]]);this.binSend("send",o,s,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(s)},{debugString:"action,chat,"+e+", "+(i?"mute,"+i:"unmute"),metricName:"CHAT",ackRequest:!0})}))},sendConversationNotSpam:function(e){return this.sendConversationOpWithKey("spam",e,void 0,!1)},sendConversationOpWithKey:function(e,t,a,r){return new Promise(((s,i)=>{var n,o;switch(e){case"clear":n=(!!r).toString();break;case"spam":o=(!!r).toString()}var l=this.actionNode("set",[["chat",{type:e,jid:t,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0,star:void 0!==n?n:void 0,spam:void 0!==o?o:void 0},void 0]]);this.binSend("send",l,i,{clientCacheable:!0,onSend:this.wrap(s),onDrop:this.wrap(i)},{debugString:"action,chat,"+[e,a,r].join(),metricName:"CHAT",ackRequest:!0})}))},sendConversationUnseen:function(e,t){return this.sendConversationSeen(e,t,-2)},sendMedia:function(e){return new Promise(((t,a)=>{var r=(0,u.default)(e);w.default.send({data:["query","sendMedia",r.url],onSend:this.wrap02((e=>{t((0,d.default)(r,e))})),onDrop:a})}))},sendMessageDelete:function(e,t,a){return new Promise(((r,s)=>{var i=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),n=this.actionNode("set",[["chat",{type:"clear",jid:e,media:a.toString()},i]]);this.binSend("send",n,s,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(s)},{debugString:"action,msgs,delete,"+[e,a,t.length].join(),metricName:"CHAT",ackRequest:!0})}))},sendMessagePlayed:function(e){return new Promise(((t,a)=>{var r=this.wrap(t),s=this.actionNode("set",[["received",{type:"played",index:e.id,from:e.remote,participant:e.participant},void 0]]);this.binSend("send",s,a,{onSend:r,onDrop:this.wrap(a)},{debugString:"action,played,"+e.toString(),metricName:"RECEIVED",ackRequest:!0})}))},sendMessageStarred:function(e,t,a){return new Promise(((r,s)=>{var i=t.map((e=>["item",{index:e.id,owner:e.fromMe.toString(),participant:e.participant},void 0])),n=this.actionNode("set",[["chat",{type:a?"star":"unstar",jid:e},i]]);this.binSend("send",n,s,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(s)},{debugString:"action,msgs,star,"+[e,a,t.length].join(),metrics:"CHAT",ackRequest:!0})}))},sendPresenceUpdate:function(e){if(["available","unavailable"].includes(e))return new Promise(((t,a)=>{var r="available"===e,s=this.actionNode("set",[["presence",{type:e},void 0]],!r),i=r?"sendEphemeral":"sendEphemeralIgnore";this.binSend(i,s,a,{onSend:r?this.wrap(t):t,onDrop:r?this.wrap(a):t,epochIneligible:!r},{debugString:"action,presence,"+e,metricName:"PRESENCE",available:"available"===e,ackRequest:r})}))},sendSetBlock:function(e,t){return new Promise(((a,r)=>{var s=t.map((e=>["user",{jid:e.jid},void 0])),i=["block",{type:e?"add":"remove"},s],n=this.actionNode("set",[i]);this.binSend("send",n,r,{clientCacheable:!0,onSend:this.wrap(a),onDrop:this.wrap(r)},{debugString:"action,block,"+e+","+(0,l.default)(t,"jid").join(","),metricName:"BLOCK",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetPicture:function(e,t,a){return new Promise(((r,s)=>{var i=P.default.parseDataURL(t).data,n=P.default.parseDataURL(a).data,o=(0,p.decodeB64)(i),l=(0,p.decodeB64)(n),d=w.default.tag(),u=this.wrap(r);u.tag=d;var c=["picture",{id:d,jid:e,type:"set"},[["image",void 0,l],["preview",void 0,o]]],h=this.actionNode("set",[c]);this.binSend("send",h,s,{clientCacheable:!0,onSend:u,onDrop:this.wrap(s)},{debugString:"action,set_pic,"+e,metricName:"PIC",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSetStatus:function(e){return new Promise(((t,a)=>{var r=this.wrap(t),s=this.actionNode("set",[["status",void 0,e]]);this.binSend("send",s,a,{clientCacheable:!0,onSend:r,onDrop:this.wrap(a)},{debugString:"action,status,set",metricName:"STATUS",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendSpamReport:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["spam",{jid:e},void 0]]);this.binSend("send",r,a,{onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,spam,"+e,metricName:"SPAM",ackRequest:!1,expires:(0,m.default)().unix()})}))},sendUnstarAll:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["chat",{type:"unstar",jid:e||void 0},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,unstar,all,"+e,metrics:"CHAT",ackRequest:!0,expires:(0,m.default)().unix()})}))},setGroupParticipants:function(e,t,a){return new Promise(((r,s)=>{var i=w.default.tag(),n=this.wrap(r),o=a.map((e=>["participant",{jid:e},void 0])),l=["group",{id:i,jid:t,type:e,author:(0,E.getMaybeMeUser)()},o],d=this.actionNode("set",[l]);this.binSend("send",d,s,{tag:i,clientCacheable:!0,onSend:n,onDrop:this.wrap(s)},{debugString:["action,group,participant",e,t].concat(a).join(),metricName:"GROUP",ackRequest:!1,expires:(0,m.default)().unix()})}))},setPushname:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["profile",{name:e},void 0]]);this.binSend("send",r,a,{onSend:this.binWrap(t,t),onDrop:this.wrap(a)},{debugString:"action,pushname",metricName:"PROFILE",ackRequest:!1})}))}},M.default),{},{parseLiveLocationMessageProto:function(e,t,a){e.type="location",e.isLive=!0,e.lat=void 0!==t.degreesLatitude?t.degreesLatitude:void 0,e.lng=void 0!==t.degreesLongitude?t.degreesLongitude:void 0,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.accuracy=t.accuracyInMeters,e.speed=t.speedInMps,e.degrees=t.degreesClockwiseFromMagneticNorth,e.comment=(0,M.convertToTextWithoutSpecialEmojis)(t.caption),e.sequence=t.sequenceNumber,a&&(e.finalLat=void 0!==a.degreesLatitude?a.degreesLatitude:void 0,e.finalLng=void 0!==a.degreesLongitude?a.degreesLongitude:void 0,e.finalThumbnail=this.decodeBytes(a.jpegThumbnail)||"",e.finalAccuracy=a.accuracyInMeters,e.finalSpeed=a.speedInMps,e.finalDegrees=a.degreesClockwiseFromMagneticNorth,e.finalTimeOffset=a.timeOffset)},parseSendPaymentMessageProto:function(e,t,a){if(e.type="payment",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",e,a),C.default.supportsFeature(C.default.F.PAYMENTS)){e.subtype="send";var r=t.requestMessageKey;e.paymentRequestMessageKey=t.requestMessageKey?new b.default({fromMe:r.fromMe,remote:this.decodeJid(r.remoteJid),id:r.id,participant:this.decodeJid(r.participant)}):void 0,t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg))}},parseRequestPaymentMessageProto:function(e,t,a){e.type="payment",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",e,a),C.default.supportsFeature(C.default.F.PAYMENTS)&&(e.subtype="request",t.currencyCodeIso4217&&!e.paymentCurrency&&(e.paymentCurrency=t.currencyCodeIso4217),t.amount1000&&!e.paymentAmount1000&&(e.paymentAmount1000=t.amount1000),t.requestFrom&&!e.paymentMessageReceiverJid&&(e.paymentMessageReceiverJid=this.decodeJid(t.requestFrom)),t.expiryTimestamp&&!e.paymentExpiryTimestamp&&(e.paymentExpiryTimestamp=t.expiryTimestamp),t.noteMessage&&(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)))},parseGroupInviteMessageProto:function(e,t){e.type="groups_v4_invite",C.default.supportsFeature(C.default.F.GROUPS_V_4_JOIN_PERMISSION)&&(e.inviteCode=t.inviteCode,e.inviteCodeExp=t.inviteExpiration,e.inviteGrp=t.groupJid,e.inviteGrpName=t.groupName,e.inviteGrpJpegThum=this.decodeBytes(t.jpegThumbnail),e.comment=(0,M.convertToTextWithoutSpecialEmojis)(t.caption))},parseContextInfoProto:function(e,t,a){var r=t.quotedMessage,s=t.mentionedJid;e.quotedMsg=r&&this.parseMsgProto(r,{type:"unknown"}),e.quotedMsg&&"payment"===e.quotedMsg.type&&a&&this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",e.quotedMsg,a),e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(s)?s.map(this.decodeJid):s,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret)},msgCreateRecord:function(e){return(0,c.callSyncPromise)((()=>{if(["ptt","audio","image","video","document","sticker","product"].includes(e.type)){var t,a="ptt"===e.type?"audio":e.type;return e.asMms&&(t=e.isUnsentPhoneMsg()?{type:e.type}:e.avParams()),e.local&&!e.mediaKey?this.sendMedia(t):(0,d.default)({status:200,type:a},t)}})).catch((e=>(__LOG__(3)(re(),(0,f.encodeErrorInfo)(),e.stack),Promise.reject("wap:msgCreateRecord mPromise error")))).then((t=>{if(t&&200!==t.status)return __LOG__(3)(ae(),t.status),Promise.reject("wap:msgCreateRecord:sendMedia error ".concat(t.status));var r=e.id.id,s=(0,S.createMessageKey)(e),i=(0,S.createMsgProtobuf)(e,t||{}),n=!!e.multicast||void 0,o=!!e.urlText||void 0,l=!!e.urlNumber||void 0,d=!!e.clearMedia||void 0,u=D.default.isUser(e.id.remote)||null==e.ephemeralDuration?void 0:e.ephemeralDuration,c={key:s,message:i,messageTimestamp:e.t,multicast:n,urlText:o,urlNumber:l,clearMedia:d,ephemeralDuration:u},h=this.actionNode("relay",[["message",void 0,(0,f.encodeProto)(O.WebMessageInfoSpec,c).readBuffer()]]);return new Promise(((t,s)=>{this.binSend("send",h,s,{tag:r,onSend:this.wrap(t),onDrop:this.wrap(s),retryOn5xx:!0,resendGuard:()=>{var t=a(58885).default.get(e.id);return"protocol"===e.type||t&&t.id.equals(e.id)}},{debugString:["action","message",e.type,e.subtype,r].join(),debugObj:{xml:h,pb:c},metricName:"MESSAGE",ackRequest:!1})}))}))},msgFindQuery:function(e,t,a,r){var s=e;return new Promise(((e,i)=>{var o,l="";switch(s){case"after":t.id||(s="before");case"before":o={type:"message",kind:s,jid:t.remote,count:t.count.toString(),index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l=[t instanceof b.default?t.toString():t.remote,t.count].join();break;case"search":o={type:"search",search:t.searchTerm,page:t.page.toString(),count:t.count.toString(),jid:t.remote,canceled:t.tagToCancel},t.label?o=(0,n.default)((0,n.default)({},o),{},{label:t.label}):t.filter&&(o=(0,n.default)((0,n.default)({},o),{},{filter:t.filter})),l=["search",t.page,t.count,t.jid,t.label].join();break;case"star":o={type:"star",media:"gif"===t.media?t.media:void 0,chat:t.chat,count:t.count.toString(),jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="starred";break;case"media":o={type:"media_message",media:"document"===t.media||"url"===t.media?t.media:void 0,count:t.count.toString(),kind:t.direction,jid:t.remote,index:t.id,owner:void 0===t.fromMe?void 0:t.fromMe.toString(),participant:t.participant},l="media"}var d=this.queryNode(o,void 0);this.binSend("sendEphemeral",d,i,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((a=>{var r=[],i=this.N.children(a);if(__LOG__(2)(te()),"response"===this.N.tag(a)&&("message"===this.N.attr("type",a)||"star"===this.N.attr("type",a)||"search"===this.N.attr("type",a)||"media_message"===this.N.attr("type",a)||"label"===this.N.attr("type",a))){if(Array.isArray(i)){var n,o=i.length;for(n=0;n<o;n++){var l=this.parseMsg(i[n],"response");if(l)switch(s){case"star":("gif"!==t.media||"video"===l.type&&l.isGif)&&r.push(l);break;case"media":"document"===t.media&&"document"===l.type||"url"===t.media&&"chat"===l.type?r.push(l):t.media||r.push(l);break;default:r.push(l)}}}"search"===this.N.attr("type",a)||"label"===this.N.attr("type",a)?r={eof:"true"===this.N.attr("last",a),messages:r}:"media"!==s||t.media||(r={docCount:parseInt(this.N.attr("document",a),10)||void 0,linkCount:parseInt(this.N.attr("url",a),10)||void 0,mediaCount:parseInt(this.N.attr("media",a),10)||void 0,messages:r})}e(r)})).catch(i)}),e),onDrop:this.wrap(i),logOnSend:a,onTag:r,tagToCancel:t.tagToCancel},{debugString:"query,message,"+l,metricName:"search"===s?"QUERY_SEARCH":"QUERY_MESSAGES",ackRequest:!1})}))},queryVcard:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"vcard",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=[],r=this.N.children(e);if("response"===this.N.tag(e)&&"vcard"===this.N.attr("type",e)&&Array.isArray(r))for(var s=r.length,i=0;i<s;i++){var n=this.parseMsg(r[i],"response");!n||"vcard"!==n.type&&"multi_vcard"!==n.type||a.push(n)}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,vcard,".concat(e),metricName:"QUERY_VCARD",ackRequest:!1})}))},parseContacts:function(e){if("contacts"===this.N.tag(e)){var t,a,r,s,i,n=this.N.attr("type",e),o=this.N.children(e);switch(n){case"frequent":if(Array.isArray(o)){a=o.length;for(var l=0;l<a;l++)switch(i=o[l],r=this.N.tag(i)){case"image":case"video":case"message":(s=this.N.attr("jid",i))&&(t||(t={type:"frequent"}),t[r]?t[r].push(s):t[r]=[s])}}}return t}},statusQuery:function(){switch(arguments.length){case 2:case 3:case 4:return this.statusQueryUpdate.apply(this,arguments);case 0:default:return this.statusQueryAll()}},statusQueryAll:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"status"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{var a={statuses:[]},r=this.N.children(t);if(__LOG__(2)(ee()),"response"===this.N.tag(t)&&"status"===this.N.attr("type",t)&&(a.checksum=this.N.attr("checksum",t),Array.isArray(r)))for(var s=r.length,i=0;i<s;i++){var n=r[i],o=this.N.attr("jid",n),l=this.N.attr("unread",n),d=this.N.attr("count",n),u=this.N.attr("t",n);if("status"===this.N.tag(n)&&o&&d&&u){var c={id:o,unreadCount:parseInt(l,10)||0,totalCount:parseInt(d,10)||0,t:parseInt(u,10)||0,_msgs:[]},h=this.N.children(n);if(Array.isArray(h))for(var f=h.length,p=0;p<f;p++)switch(this.N.tag(h[p])){default:case"message":var m=this.parseMsgMessage(h[p],"response");m&&c._msgs.push(m);break;case"picture":var _=this.N.children(h[p]);_ instanceof ArrayBuffer&&(c.pic=_)}a.statuses.push(c)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,statusv3",metricName:"QUERY_STATUS",ackRequest:!1})}))},statusQueryUpdate:function(e,t,a,r){return new Promise(((s,i)=>{var n="before"===r?"before":"after",o={type:"status",kind:n,chat:e,count:t.toString(),jid:a?a.remote:void 0,index:a?a.id:void 0,owner:a?a.fromMe.toString():void 0,participant:a?a.participant:void 0},l=this.queryNode(o,void 0);this.binSend("sendEphemeral",l,i,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t=[],a=this.N.children(e);if(__LOG__(2)($()),"response"===this.N.tag(e)&&"status"===this.N.attr("type",e)&&Array.isArray(a))for(var r=a.length,i=0;i<r;i++){var n=this.parseMsg(a[i],"response");n&&t.push(n)}s(t)})).catch(i)}),s),onDrop:this.wrap(i)},{debugString:["query","statusv3",n,t,a instanceof b.default?a.toString():e].join(),metricName:"QUERY_STATUS_UPDATE",ackRequest:!1})}))},sendConversationSeen:function(e,t,a,r,s){return new Promise(((i,n)=>{var o=this.actionNode("set",[["read",{kind:r?"status":void 0,chat:r?s:void 0,jid:e,index:t?t.id:void 0,owner:t?t.fromMe.toString():void 0,participant:t?t.participant:void 0,count:a&&t?a.toString():void 0},void 0]]);this.binSend("send",o,n,{clientCacheable:!0,onSend:this.wrap(i),onDrop:this.wrap(n)},{debugString:"action,"+(r?"status":"chat")+",read,"+JSON.stringify(t)+","+a,metricName:"READ",ackRequest:!0})}))},sendStatusSeen:function(e,t){return this.sendConversationSeen(e.remote,e,void 0,!0,t)},requestMediaReupload:function(e,t){return new Promise(((a,r)=>{var s=e.id,i=Array.isArray(t)?t.map((e=>["user",{jid:e},void 0])):void 0,n=s,o=this.queryNode({type:"media",index:n.id,jid:n.remote,owner:n.fromMe.toString(),participant:n.participant},i);this.binSend("sendEphemeral",o,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t;if(__LOG__(2)(Z()),"response"===this.N.tag(e)&&"media"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||400,s=this.N.attr("url",e);r>=500&&502!==r?(__LOG__(3)(J(),r),t={status:r}):200===r&&s?t={status:200,url:s,mediaKey:this.N.attr("media_key",e),mediaKeyTimestamp:this.N.attr("media_key_timestamp",e),encFilehash:this.N.attr("enc_filehash",e),directPath:this.N.attr("direct_path",e)}:200!==r||s?(__LOG__(3)(Q(),r),t={status:r}):(__LOG__(4,void 0,new Error,!0)(X()),SEND_LOGS("wap:requestMediaReupload:emptyUrl"),t={status:400})}else __LOG__(3)(z()),t={status:400};a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))},parseCmd:function(e){switch(this.N.tag(e)){case"read":var t,a=this.N.attr("jid",e),r="false"===this.N.attr("type",e),s="status"===this.N.attr("kind",e),i=this.N.attr("checksum",e),n=this.N.attr("index",e),o="true"===this.N.attr("owner",e),l=this.N.attr("participant",e),d=this.N.attr("chat",e);try{t=new b.default({id:n,fromMe:o,remote:a,participant:l})}catch(e){}var u={type:r?"unread":"read",jid:a,isStatus:s,checksum:i,chat:this.decodeJid(d),key:t},c=[!a,s&&!t];return this.dropIfConditionMet(c,u);case"identity":var h=this.parseIdentity(e);return h?(h.type="identity",h):void 0;default:return}},parseContact:function(e,t){if("user"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(q(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var a,r,s=this.N.attr("name",e),i="true"===this.N.attr("enterprise",e),n=this.N.attr("jid",e)||t,o=this.N.attr("short",e)||void 0,l=this.N.attr("type",e)||"in",d=this.N.attr("notify",e),u=this.N.attr("verify",e),c="true"===this.N.attr("status_mute",e),h=this.N.attr("index",e)||void 0,f=this.N.attr("vname",e);switch(u){case"true":case"0":case"1":case"2":a=!0,r=parseInt(u,10)||0;break;default:a=!1,i=!1}s||r!==v.default.VERIFIED_LEVEL.HIGH||(s=f);var p=this.N.children(e),m=[];if(Array.isArray(p))for(var _=0;_<p.length;_++){var g=p[_];if("label"===this.N.tag(g)){var E=this.N.attr("id",g);E&&m.push(E)}}var S={id:n,name:s,type:l,shortName:o,pushname:d,isBusiness:a,verifiedLevel:r,statusMute:c,sectionHeader:h,verifiedName:f,labels:m,isEnterprise:i};return this.dropIfConditionMet([!n,"in"!==l&&"out"!==l&&!!l],S)},parseAck:function(e){if("received"!==this.N.tag(e))return __LOG__(4,void 0,new Error,!0)(K(),this.N.tag(e),this.N.attr("id",e)),void SEND_LOGS("wap-unexpected-tag");var t,a=this.N.attr("type",e),r=this.N.attr("index",e),s=this.N.attr("jid",e),i="true"===this.N.attr("owner",e),n=this.N.attr("participant",e);switch(a){case"message":t=v.default.ACK.RECEIVED;break;case"read":t=v.default.ACK.READ;break;case"played":t=v.default.ACK.PLAYED;break;case"error":t=v.default.ACK.FAILED;break;case"pending":default:t=v.default.ACK.CLOCK}var o=(0,E.getMaybeMeUser)(),l={cmd:"ack",id:r,ack:t,from:i?o:s,to:i?s:o,participant:n,self:i?"out":"in"},d=[!r,!s,D.default.isStatusV3(s),"message"!==a&&"read"!==a&&"played"!==a&&"error"!==a&&"pending"!==a];return this.dropIfConditionMet(d,l)},parseMsgMessage:function(e,t){if("message"===this.N.tag(e)){var a=this.N.children(e);if(a instanceof ArrayBuffer)try{var r=(0,h.decodeProto)(O.WebMessageInfoSpec,a);return this.parseWebMessageInfo(r,t)}catch(e){return __LOG__(2)(H(),String(e)),__LOG__(4,void 0,new Error,!0)(V()),void SEND_LOGS("parse-error")}else __LOG__(3)(W())}else __LOG__(3)(Y())},parseWebMessageInfo:function(e,t){var a=e.key,r=this.decodeJid(a.remoteJid),s=(0,E.getMaybeMeUser)(),i=a.fromMe?r:s,n=a.fromMe?s:r,o=this.decodeJid(a.participant),l=this.decodeJid(e.participant);C.default.supportsFeature(C.default.F.MD_BACKEND)&&(D.default.isGroup(r)||D.default.isStatusV3(r))&&(null==o&&(null!=e.participant?o=this.decodeJid(e.participant):a.fromMe&&(o=s)),l=l||o);var d="in";if(s.equals(r)&&(d=a.fromMe?"out":"in"),"broadcast"!==i){var u;try{u=new b.default({fromMe:(0,T.default)(a.fromMe,"key.fromMe"),remote:r,id:(0,T.default)(a.id,"key.id"),participant:o})}catch(e){return void __LOG__(3)(U(),e.stack)}var c={id:u,from:n,to:i,self:d,participant:o,type:"unknown",t:e.messageTimestamp||0,ack:"fresh"===t?v.default.ACK.SENT:e.status-1,author:l,invis:!!e.ignore,star:!!e.starred,broadcast:a.fromMe&&e.broadcast,notifyName:e.pushName||"",encFilehash:this.decodeBytes(e.mediaCiphertextSha256),shareDuration:e.duration,labels:e.labels,ephemeralStartTimestamp:e.ephemeralStartTimestamp,ephemeralOutOfSync:e.ephemeralOutOfSync,bizPrivacyStatus:e.bizPrivacyStatus,verifiedBizName:e.verifiedBizName};return e.message?this.parseMsgProto(e.message,c,t,e.paymentInfo,e.finalLiveLocation,e.quotedPaymentInfo):this.parseMsgStubProto(e,c)}__LOG__(3)(j())},parseProtocolMessageProto:function(e,t,a){if("relay"===a||t.type===g.ProtocolMessageType.EPHEMERAL_SETTING)switch(e.type="protocol",t.type){case g.ProtocolMessageType.REVOKE:var r=t.key,s=new b.default({fromMe:r.fromMe,remote:this.decodeJid(r.remoteJid),id:r.id,participant:this.decodeJid(r.participant)});e.subtype="revoke",e.protocolMessageKey=s;break;case g.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case g.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp;break;default:e.subtype="unknown"}},sendConversationPin:function(e,t,a){return new Promise(((r,s)=>{var i=this.actionNode("set",[["chat",{type:"pin",pin:t?t.toString():void 0,previous:a?a.toString():void 0,jid:e},void 0]]);this.binSend("send",i,s,{clientCacheable:!0,onSend:this.wrap(r),onDrop:this.wrap(s)},{debugString:["action","chat",e,t?"pin,"+t:"unpin,"+a].join(),metricName:"CHAT",ackRequest:!0})}))},subscribeLiveLocation:function(e,t){return new Promise(((a,r)=>{var s=this.queryNode({type:"location",kind:"subscribe",jid:e,participant:t?"true":void 0},void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r=this.N.children(e),s={participants:[]};if(__LOG__(2)(G()),"response"===this.N.tag(e)&&"location"===this.N.attr("type",e)){var i=parseInt(this.N.attr("duration",e),10);if(s.duration=Number.isNaN(i)?void 0:i,!t||!Array.isArray(r))return t&&__LOG__(2)(B()),void a(s);for(var n=r.length,o=0;o<n;o++){var l=r[o],d=this.N.attr("jid",l),u=parseInt(this.N.attr("expiration",l),10),c=parseInt(this.N.attr("elapsed",l),10)||0,f=this.N.children(l);if("participant"===this.N.tag(l)&&d){var p={id:d,expiration:Number.isNaN(u)?void 0:u,elapsed:c};if(f){var m=(0,h.decodeProto)(g.MessageSpec,f).liveLocationMessage;m&&this.parseLiveLocationMessageProto(p,m)}p.lat&&p.lng?__LOG__(2)(F()):__LOG__(2)(x()),s.participants.push(p)}}a(s)}else a(s)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:["query,location",e,t].join(),metricName:"QUERY_LIVE_LOCATIONS"})}))},unsubscribeLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["location",{type:"unsubscribe",jid:e},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,unsubscribe,"+e,metricName:"LIVE_LOCATION"})}))},queryActiveLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"location",kind:"participant",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a=this.N.children(e),r={participants:[]};if(__LOG__(2)(L()),"response"===this.N.tag(e)&&"location"===this.N.attr("type",e))if(Array.isArray(a)){for(var s=a.length,i=0;i<s;i++){var n=a[i],o=this.N.attr("jid",n),l=parseInt(this.N.attr("expiration",n),10);if("participant"===this.N.tag(n)&&o){var d={id:o,expiration:Number.isNaN(l)?void 0:l};r.participants.push(d)}}t(r)}else t(r);else t(r)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,location,participant,"+e,metricName:"QUERY_LIVE_LOCATIONS"})}))},disableLiveLocation:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["location",{type:"disable",jid:e},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,location,disable,"+e,metricName:"LIVE_LOCATION"})}))},parseLocation:function(e){if("location"===this.N.tag(e)){var t=this.N.attr("type",e),a=this.N.attr("jid",e),r=this.N.attr("author",e),s=parseInt(this.N.attr("elapsed",e),10)||0,i=parseInt(this.N.attr("id",e),10)||0,n=this.N.children(e),o={type:t};switch(t){case"update":if(o.jid=a,o.elapsed=s,n){var l=(0,h.decodeProto)(g.MessageSpec,n).liveLocationMessage;l&&this.parseLiveLocationMessageProto(o,l)}o.type="update",o.lat&&o.lng?__LOG__(2)(k()):__LOG__(2)(R());break;case"disable":o.jid=r||a,o.chat=a,o.seq=i}return this.pruneUndefinedProps(o),this.dropIfConditionMet(["update"!==t&&"disable"!==t,!("update"!==t||a&&n),"disable"===t&&!a],o)}},parseMsgStubProto:function(e,t){var a=O.WebMessageInfoStubType;switch(e.messageStubType){case a.REVOKE:return t.type="revoked",t;case a.CIPHERTEXT:return t.type="ciphertext",t;case a.OVERSIZED:return t.type="oversized",t;case a.FUTUREPROOF:return t.subtype="phone",t;default:return this.parseMsgStubTemplate(e,t)}},parseMsgStubTemplate:function(e,t){var a=O.WebMessageInfoStubType;switch(t.type="notification_template",t.templateParams=Array.isArray(e.messageStubParameters)?e.messageStubParameters.map((t=>e.messageStubType===a.GROUP_CREATE||e.messageStubType===a.GROUP_CHANGE_SUBJECT?t:this.decodeJid(t))):void 0,e.messageStubType){case a.NON_VERIFIED_TRANSITION:t.subtype="non_verified_transition";break;case a.UNVERIFIED_TRANSITION:t.subtype="unverified_transition";break;case a.VERIFIED_TRANSITION:t.subtype="verified_transition";break;case a.VERIFIED_LOW_UNKNOWN:t.subtype="verified_low_unknown";break;case a.VERIFIED_HIGH:t.subtype="verified_high";break;case a.VERIFIED_INITIAL_UNKNOWN:t.subtype="verified_initial_unknown";break;case a.VERIFIED_INITIAL_LOW:t.subtype="verified_initial_low";break;case a.VERIFIED_INITIAL_HIGH:t.subtype="verified_initial_high";break;case a.VERIFIED_TRANSITION_ANY_TO_NONE:t.subtype="verified_transition_any_to_none";break;case a.VERIFIED_TRANSITION_ANY_TO_HIGH:t.subtype="verified_transition_any_to_high";break;case a.VERIFIED_TRANSITION_HIGH_TO_LOW:t.subtype="verified_transition_high_to_low";break;case a.VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:t.subtype="verified_transition_high_to_unknown";break;case a.VERIFIED_TRANSITION_UNKNOWN_TO_LOW:t.subtype="verified_transition_unknown_to_low";break;case a.VERIFIED_TRANSITION_LOW_TO_UNKNOWN:t.subtype="verified_transition_low_to_unknown";break;case a.VERIFIED_TRANSITION_NONE_TO_LOW:t.subtype="verified_transition_none_to_low";break;case a.VERIFIED_TRANSITION_NONE_TO_UNKNOWN:t.subtype="verified_transition_none_to_unknown";break;case a.GROUP_CREATE:t.type="gp2",t.subtype="create",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_DELETE:t.type="gp2",t.subtype="delete",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_SUBJECT:t.type="gp2",t.subtype="subject",t.body=t.templateParams[0],t.recipients=[],t.templateParams=void 0;break;case a.GROUP_CHANGE_ICON:t.type="gp2",t.subtype="picture",t.recipients=[],t.body=t.templateParams[0],t.templateParams=void 0;break;case a.GROUP_CHANGE_INVITE_LINK:t.type="gp2",t.subtype="revoke_invite",t.recipients=[];break;case a.GROUP_CHANGE_DESCRIPTION:t.type="gp2",t.subtype="description",t.recipients=[];break;case a.GROUP_CHANGE_RESTRICT:t.type="gp2",t.subtype="restrict",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_ANNOUNCE:t.type="gp2",t.subtype="announce",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:t.type="gp2",t.subtype="no_frequently_forwarded",t.recipients=[],t.body=t.templateParams[0];break;case a.GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:t.type="gp2",t.subtype="announce_msg_bounce",t.recipients=[],t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD:t.type="gp2",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_REMOVE:t.type="gp2",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_PROMOTE:t.type="gp2",t.subtype="promote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_DEMOTE:t.type="gp2",t.subtype="demote",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_INVITE:t.type="gp2",t.subtype="invite",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_LEAVE:t.type="gp2",t.subtype="leave",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_CHANGE_NUMBER:t.type="gp2",t.subtype="modify",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_V4_ADD_INVITE_SENT:t.type="gp2",t.subtype="v4_add_invite_sent",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GROUP_PARTICIPANT_ADD_REQUEST_JOIN:t.type="gp2",t.subtype="v4_add_invite_join",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_CREATE:t.type="broadcast_notification",t.subtype="create",t.body=t.templateParams[0]||"0",t.templateParams=void 0;break;case a.BROADCAST_ADD:t.type="broadcast_notification",t.subtype="add",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.BROADCAST_REMOVE:t.type="broadcast_notification",t.subtype="remove",t.recipients=t.templateParams,t.templateParams=void 0;break;case a.GENERIC_NOTIFICATION:t.type="notification",t.body=t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_CHANGED:t.type="e2e_notification",t.subtype="identity",t.body=t.templateParams[0]instanceof D.default?t.templateParams[0].toString():t.templateParams[0],t.templateParams=void 0;break;case a.E2E_IDENTITY_UNAVAILABLE:t.subtype="blue_msg_e2e_identity_unavailable";break;case a.E2E_DEVICE_CHANGED:t.type="e2e_notification",t.subtype="device",t.body=t.templateParams[0]instanceof D.default?t.templateParams[0].toString():t.templateParams[0],t.devicesAdded=parseInt(t.templateParams[1],10),t.devicesRemoved=parseInt(t.templateParams[2],10),t.templateParams=void 0;break;case a.E2E_ENCRYPTED:t.type="e2e_notification",t.subtype="encrypt";break;case a.E2E_ENCRYPTED_NOW:t.type="e2e_notification",t.subtype="encrypt_now";break;case a.CALL_MISSED_VOICE:t.type="call_log",t.subtype="miss";break;case a.CALL_MISSED_VIDEO:t.type="call_log",t.subtype="miss_video";break;case a.CALL_MISSED_GROUP_VOICE:t.type="call_log",t.subtype="miss_group";break;case a.CALL_MISSED_GROUP_VIDEO:t.type="call_log",t.subtype="miss_group_video";break;case a.INDIVIDUAL_CHANGE_NUMBER:t.subtype="change_number";break;case a.CHANGE_EPHEMERAL_SETTING:t.type="gp2",t.subtype="ephemeral",t.author=t.templateParams[1],t.recipients=[];break;case a.PAYMENT_CIPHERTEXT:t.type="payment",t.subtype="ciphertext",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_FUTUREPROOF:t.type="payment",t.subtype="futureproof",this.callFeatureFlagFun(C.default.F.PAYMENTS,"parsePaymentInfo",t,e.paymentInfo);break;case a.PAYMENT_ACTION_REQUEST_CANCELLED:t.subtype="payment_transaction_request_cancelled";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:t.subtype="payment_transaction_status_update_failed";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:t.subtype="payment_transaction_status_update_refunded";break;case a.PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:t.subtype="payment_transaction_status_update_refund_failed";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:t.subtype="payment_transaction_status_receiver_pending_setup";break;case a.PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:t.subtype="payment_transaction_status_receiver_success_after_hiccup";break;case a.PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:t.subtype="payment_action_account_setup_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_REMINDER:t.subtype="payment_action_send_payment_reminder";break;case a.PAYMENT_ACTION_SEND_PAYMENT_INVITATION:t.subtype="payment_action_send_payment_invitation";break;case a.PAYMENT_ACTION_REQUEST_DECLINED:t.subtype="payment_action_request_declined";break;case a.PAYMENT_ACTION_REQUEST_EXPIRED:t.subtype="payment_action_request_expired";break;case a.BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:t.subtype="biz_verified_transition_top_to_bottom";break;case a.BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:t.subtype="biz_verified_transition_bottom_to_top";break;case a.BIZ_INTRO_TOP:t.subtype="biz_intro_top";break;case a.BIZ_INTRO_BOTTOM:t.subtype="biz_intro_bottom";break;case a.BIZ_NAME_CHANGE:t.subtype="biz_name_change";break;case a.BIZ_MOVE_TO_CONSUMER_APP:t.subtype="biz_move_to_consumer_app";break;case a.BIZ_TWO_TIER_MIGRATION_TOP:t.subtype="biz_two_tier_migration_top";break;case a.BIZ_TWO_TIER_MIGRATION_BOTTOM:t.subtype="biz_two_tier_migration_bottom";break;case a.BLUE_MSG_BSP_FB_TO_BSP_PREMISE:t.subtype="blue_msg_bsp_fb_to_bsp_premise";break;case a.BLUE_MSG_BSP_FB_TO_SELF_FB:t.subtype="blue_msg_bsp_fb_to_self_fb";break;case a.BLUE_MSG_BSP_FB_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_fb_to_self_premise";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_unverified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_fb_verified";break;case a.BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED:t.subtype="blue_msg_bsp_fb_verified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_fb_unverified";break;case a.BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:t.subtype="blue_msg_bsp_premise_to_self_premise";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_unverified";break;case a.BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_unverified_to_self_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_bsp_premise_verified";break;case a.BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_bsp_premise_verified_to_self_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_bsp_premise_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_fb_unverified";break;case a.BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_consumer_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_FB_TO_BSP_PREMISE:t.subtype="blue_msg_self_fb_to_bsp_premise";break;case a.BLUE_MSG_SELF_FB_TO_SELF_PREMISE:t.subtype="blue_msg_self_fb_to_self_premise";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED:t.subtype="blue_msg_self_fb_unverified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_fb_unverified_to_self_premise_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED:t.subtype="blue_msg_self_fb_verified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_fb_verified_to_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:t.subtype="blue_msg_self_premise_to_bsp_premise";break;case a.BLUE_MSG_SELF_PREMISE_UNVERIFIED:t.subtype="blue_msg_self_premise_unverified";break;case a.BLUE_MSG_SELF_PREMISE_VERIFIED:t.subtype="blue_msg_self_premise_verified";break;case a.BLUE_MSG_TO_BSP_FB:t.subtype="blue_msg_to_bsp_fb";break;case a.BLUE_MSG_TO_CONSUMER:t.subtype="blue_msg_to_consumer";break;case a.BLUE_MSG_TO_SELF_FB:t.subtype="blue_msg_to_self_fb";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:t.subtype="blue_msg_unverified_to_bsp_premise_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:t.subtype="blue_msg_unverified_to_self_fb_verified";break;case a.BLUE_MSG_UNVERIFIED_TO_VERIFIED:t.subtype="blue_msg_unverified_to_verified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:t.subtype="blue_msg_verified_to_bsp_premise_unverified";break;case a.BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:t.subtype="blue_msg_verified_to_self_fb_unverified";break;case a.BLUE_MSG_VERIFIED_TO_UNVERIFIED:t.subtype="blue_msg_verified_to_unverified";break;default:t.templateParams=void 0}return t},sendCallOffer:function(e){return new Promise(((t,a)=>{var r=(0,N.default)(),s=A.default.formatCallOffer(this,r,e);this.binSend("send",s,a,{tag:r,onSend:this.wrap((e=>{t(e)}),t),onDrop:this.wrap(a),retryOn5xx:!0,isCallOffer:!0},{debugString:["action","call","offer",e.common.peer_jid].join(),debugObj:{xml:s,struct:e},metricName:"CALL"})}))},supportsFeatureFlags:!0,implementedFeatures:{}}),ve=(0,o.default)(_e,_.default);t.Z=ve},31225:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(45455)),o=s(a(98346)),l=a(60339),d=s(a(49968)),u=s(a(50278)),c=s(a(79504)),h=s(a(79626)),f=s(a(96985)),p=s(a(75001)),m=a(19741),_=r(a(96452)),v=a(95595),g=s(a(18120)),E=s(a(67964)),S=s(a(85059)),C=s(a(11680)),y=s(a(61941)),b=s(a(75537)),T=s(a(49569)),M=s(a(92961)),N=s(a(2734)),I=s(a(24499)),P=s(a(48967)),A=s(a(68384)),O=s(a(12767));function D(){var e=(0,i.default)(["BinaryProtocol read error stack: ",""]);return D=function(){return e},e}function w(){var e=(0,i.default)(["BinaryProtocol read error with tag ",", size: ",""]);return w=function(){return e},e}function R(){var e=(0,i.default)(["LogoutDrop error: ",""]);return R=function(){return e},e}function k(){var e=(0,i.default)(["TODO ",""]);return k=function(){return e},e}function L(){var e=(0,i.default)(["Wap:handle read invalid"]);return L=function(){return e},e}function x(){var e=(0,i.default)(["bin-recv:",""]);return x=function(){return e},e}function F(){var e=(0,i.default)(["wap:handle:query unknown ",""]);return F=function(){return e},e}function B(){var e=(0,i.default)(["bin-recv:",""]);return B=function(){return e},e}function G(){var e=(0,i.default)(["Wap:handle action unknown ",""]);return G=function(){return e},e}function U(){var e=(0,i.default)(["bin-recv:",""]);return U=function(){return e},e}function j(){var e=(0,i.default)(["Wap:handle:setting dropped"]);return j=function(){return e},e}function V(){var e=(0,i.default)(["bin-recv:",""]);return V=function(){return e},e}function H(){var e=(0,i.default)(["Wap:handle:notice dropped"]);return H=function(){return e},e}function W(){var e=(0,i.default)(["Wap:handle:starredStickers dropped"]);return W=function(){return e},e}function Y(){var e=(0,i.default)(["bin-recv:",""]);return Y=function(){return e},e}function K(){var e=(0,i.default)(["Wap:handle:recentStickers dropped"]);return K=function(){return e},e}function q(){var e=(0,i.default)(["bin-recv:",""]);return q=function(){return e},e}function z(){var e=(0,i.default)(["bin-recv:",""]);return z=function(){return e},e}function Q(){var e=(0,i.default)(["Wap:handle:stickerPack dropped"]);return Q=function(){return e},e}function X(){var e=(0,i.default)(["Wap:handle:action:call dropped"]);return X=function(){return e},e}function J(){var e=(0,i.default)(["bin-recv:",""]);return J=function(){return e},e}function Z(){var e=(0,i.default)(["bin-recv:",""]);return Z=function(){return e},e}function $(){var e=(0,i.default)(["Wap:handle:quickReply dropped"]);return $=function(){return e},e}function ee(){var e=(0,i.default)(["bin-recv:",""]);return ee=function(){return e},e}function te(){var e=(0,i.default)(["bin-recv:",""]);return te=function(){return e},e}function ae(){var e=(0,i.default)(["Wap:handle:label dropped"]);return ae=function(){return e},e}function re(){var e=(0,i.default)(["bin-recv:",""]);return re=function(){return e},e}function se(){var e=(0,i.default)(["Wap:handle:location dropped"]);return se=function(){return e},e}function ie(){var e=(0,i.default)(["bin-recv: ",""]);return ie=function(){return e},e}function ne(){var e=(0,i.default)(["Wap:handle action mute dropped"]);return ne=function(){return e},e}function oe(){var e=(0,i.default)(["Wap:handle action battery dropped"]);return oe=function(){return e},e}function le(){var e=(0,i.default)(["bin-recv: ",""]);return le=function(){return e},e}function de(){var e=(0,i.default)(["bin-recv: ",""]);return de=function(){return e},e}function ue(){var e=(0,i.default)(["Wap:handle action chat dropped"]);return ue=function(){return e},e}function ce(){var e=(0,i.default)(["Wap:handle:action:contacts dropped"]);return ce=function(){return e},e}function he(){var e=(0,i.default)(["bin-recv: ",""]);return he=function(){return e},e}function fe(){var e=(0,i.default)(["bin-recv: ",""]);return fe=function(){return e},e}function pe(){var e=(0,i.default)(["Wap:handle action contact dropped"]);return pe=function(){return e},e}function me(){var e=(0,i.default)(["Wap:handle action ack invalid"]);return me=function(){return e},e}function _e(){var e=(0,i.default)(["bin-recv: ",""]);return _e=function(){return e},e}function ve(){var e=(0,i.default)(["bin-recv: ",""]);return ve=function(){return e},e}function ge(){var e=(0,i.default)(["Wap:handle action bc update invalid"]);return ge=function(){return e},e}function Ee(){var e=(0,i.default)(["Wap:handle action cmd invalid"]);return Ee=function(){return e},e}function Se(){var e=(0,i.default)(["bin-recv: ",""]);return Se=function(){return e},e}function Ce(){var e=(0,i.default)(["Wap:handle:action keys not array: ",""]);return Ce=function(){return e},e}function ye(){var e=(0,i.default)(["Wap:handle action msg no meta.add"]);return ye=function(){return e},e}function be(){var e=(0,i.default)(["Wap:handle action msg before/after 0 msgs"]);return be=function(){return e},e}function Te(){var e=(0,i.default)(["Wap:handle action msg "," dropped to 0"]);return Te=function(){return e},e}function Me(){var e=(0,i.default)(["bin-recv: ",""]);return Me=function(){return e},e}function Ne(){var e=(0,i.default)(["Wap:handle action msg before/after dropped"]);return Ne=function(){return e},e}function Ie(){var e=(0,i.default)(["Wap:handle action msg last dropped to 0"]);return Ie=function(){return e},e}function Pe(){var e=(0,i.default)(["bin-recv: ",""]);return Pe=function(){return e},e}function Ae(){var e=(0,i.default)(["Wap:handle action msg last dropped"]);return Ae=function(){return e},e}function Oe(){var e=(0,i.default)(["Wap:handle action msg relay dropped"]);return Oe=function(){return e},e}function De(){var e=(0,i.default)(["bin-recv: ",""]);return De=function(){return e},e}function we(){var e=(0,i.default)(["Wap:handle action msg relay length not 1"]);return we=function(){return e},e}function Re(){var e=(0,i.default)(["Wap:handle non-preemptive response: ",""]);return Re=function(){return e},e}function ke(){var e=(0,i.default)(["Wap:handle unknown response type: ",""]);return ke=function(){return e},e}function Le(){var e=(0,i.default)(["bin-recv: ",",response,contact"]);return Le=function(){return e},e}function xe(){var e=(0,i.default)(["bin-recv: ",",response,chat"]);return xe=function(){return e},e}function Fe(){var e=(0,i.default)(["Wap:groupActionsByType unknown action: ",""]);return Fe=function(){return e},e}function Be(){var e=(0,i.default)(["Wap:setSubProtocol unknown ",""]);return Be=function(){return e},e}function Ge(){var e=(0,i.default)(["wap:epochCount: "," epoch: ",""]);return Ge=function(){return e},e}function Ue(){var e=(0,i.default)(["wap:epochRecv: NEGATIVE"]);return Ue=function(){return e},e}function je(){var e=(0,i.default)(["wap:epochCount: "," epoch: ",""]);return je=function(){return e},e}var Ve={epochCount:0,epoch:0,epochSend:function(e){return 0===this.epochCount&&this.epoch++,e||this.epochCount++,__LOG__(2)(je(),this.epochCount,this.epoch),this.epoch.toString()},epochRecv:function(){this.epochCount>0?this.epochCount--:__LOG__(3)(Ue()),__LOG__(2)(Ge(),this.epochCount,this.epoch)},setSubProtocol:function(e){if(-1===e)this.BinaryProtocol=new u.default,this.N=this.BinaryProtocol.Node;else{if(null==e||0===e)throw __LOG__(3)(Be(),String(e)),new _.UpdateImmediately("".concat(this.version,"_unknown_version"));this.BinaryProtocol=new d.default(e),this.N=this.BinaryProtocol.Node}},clearBPQueue:function(){return new Promise((e=>{this.BinaryProtocol.dropAllBecauseLogout(),e()}))},upgradeProtoVersion(e){if(e.BinaryProtocol instanceof u.default)for(var t=e.BinaryProtocol.getWriteQueue();t.length;){var{n:a,resolve:r,reject:s}=t.shift();this.BinaryProtocol.write(a).then(r).catch(s)}},delete:function(){this.epochCount=0,this.epoch=0},cannotReachPhone:function(){this.epochRecv()},dropIfConditionMet:function(e,t){return e.reduce((function(e,t){return e||t}),!1)?void 0:t},pruneUndefinedProps:function(e){for(var t in e){void 0===e[t]&&delete e[t]}},callFeatureFlagFun:function(e,t){if(g.default.supportsFeature(e)){for(var a=[],r=2;r<arguments.length;r++)a.push(arguments[r]);return this[t](...a)}},safeParseInt:function(e,t){var a=parseInt(this.N.attr(t,e),10);return Number.isNaN(a)?void 0:a},wrap:function(e){return t=>{if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;this.epochRecv(),e(t)}},wrap02:function(e){return function(t){if(t&&"object"==typeof t&&"number"==typeof t.status&&t.status>=500)return t;e(t)}},binWrap:function(e,t){return a=>{if(a&&"object"==typeof a&&"number"==typeof a.status){if(401===a.status)throw this.epochRecv(),new m.E401;if(a.status>=500)return a;this.epochRecv(),t(a)}else this.epochRecv(),e(a)}},binSend:function(e,t,a,r,s){var i=r.epochIneligible?a:e=>{this.epochRecv(),a(e)};return delete r.epochIneligible,this.BinaryProtocol.write(t).then((a=>{s.debugObj||(s.debugObj=t),s.metric=this.M[s.metricName],s.ackRequest=!1,r.data=a,r.binaryOpts=s,O.default[e](r)})).catch(i)},msgGetTarget:function(e){return A.default.equals(e.from,(0,v.getMaybeMeUser)())?e.to:e.from},thumbFromMediaXml:function(e){return"raw"===this.N.attr("encoding",e)?this.N.children(e)instanceof ArrayBuffer?(0,l.encodeB64)(this.N.children(e)):"":this.N.dataStr(e)},actionNode:function(e,t,a){return["action",{type:e,epoch:this.epochSend(a)},t]},queryNode:function(e,t){var a=e;return a||(a={}),a.epoch=this.epochSend(),["query",a,t]},responseNode:function(e,t){var a=e;return a||(a={}),a.epoch=this.epochSend(),["response",a,t]},errorNode:function(e){return["error",{code:e.toString(),epoch:this.epochSend()},void 0]},actionGetMeta:function(e){var t={};if("action"!==this.N.tag(e))return t;var a=this.N.attr("add",e),r=this.N.attr("missing",e),s=this.N.attr("checksum",e);switch(a){case"unread":t.unreadId=this.N.attr("index",e),t.unreadFromMe="true"===this.N.attr("owner",e),t.unreadParticipant=this.N.attr("participant",e);case"after":case"before":case"last":t.pendingMsgsDone="true"===this.N.attr("last",e),t.resume="true"===this.N.attr("resume",e);case"relay":case"update":t.add=a}switch(r){case"remove":t.missing=r}return s&&(t.checksum=s),t},groupActionsByType:function(e){var t,a,r={};if(!Array.isArray(e))return r;var s=e.length;for(a=0;a<s;a++)switch(t=e[a],this.N.tag(t)){case"broadcast":switch(this.N.attr("type",t)){case"create":case"add":case"remove":r.msg||(r.msg=[]),r.msg.push(t);break;case"modify":r.bcUpdate||(r.bcUpdate=[]),r.bcUpdate.push(t)}break;case"message":case"groups_v2":case"notification":case"call_log":case"security":r.msg||(r.msg=[]),r.msg.push(t);break;case"read":case"log":case"identity":r.cmd||(r.cmd=[]),r.cmd.push(t);break;case"received":r.ack||(r.ack=[]),r.ack.push(t);break;case"user":r.contact||(r.contact=[]),r.contact.push(t);break;case"contacts":r.contacts||(r.contacts=[]),r.contacts.push(t);break;case"chat":switch(this.N.attr("type",t)){case"mute":r.mute||(r.mute=[]),r.mute.push(t);break;default:r.chat||(r.chat=[]),r.chat.push(t)}break;case"battery":r.battery||(r.battery=[]),r.battery.push(t);break;case"location":r.location||(r.location=[]),r.location.push(t);break;case"label":r.label||(r.label=[]),r.label.push(t);break;case"group":r.group||(r.group=[]),r.group.push(t);break;case"quick_reply":r.quickReply||(r.quickReply=[]),r.quickReply.push(t);break;case"call":r.call||(r.call=[]),r.call.push(t);break;case"stickerPack":case"sticker_pack":r.stickerPack||(r.stickerPack=[]),r.stickerPack.push(t);break;case"recent_stickers":r.recentStickers||(r.recentStickers=[]),r.recentStickers.push(t);break;case"starred_stickers":r.starredStickers||(r.starredStickers=[]),r.starredStickers.push(t);break;case"notice":r.notice||(r.notice=[]),r.notice.push(t);break;case"archive_v2":r.archiveSetting||(r.archiveSetting=[]),r.archiveSetting.push(t);break;default:__LOG__(3,!0)(Fe(),this.N.toString(t))}return r},handleResponse:function(e,t,a){if(0===e.indexOf("preempt"))switch(this.N.attr("type",t)){case"chat":__LOG__(2)(xe(),e);var r=this.N.children(t)||[];if(Array.isArray(r)){for(var s=r.length,i=[],n=0;n<s;n++){var o=this.parseChat(r[n]);o&&i.push(o)}(0,h.default)([{cmd:"preempt",response:i,binarySize:a}])}break;case"contacts":__LOG__(2)(Le(),e);var l=this.N.children(t);if(Array.isArray(l)){for(var d=l.length,u=[],c=0;c<d;c++){var f=this.parseContact(l[c]);f&&u.push(f)}(0,p.default)([{cmd:"preempt",checksum:this.N.attr("checksum",t),response:u,binarySize:a}])}break;default:__LOG__(3)(ke(),this.N.toString(t,!0))}else __LOG__(3)(Re(),this.N.toString(t,!0))},handleActionMsg:function(e,t,a,r){var s=r.length;switch(a.add){case"relay":case"update":var i=this.parseMsg(r[0],"relay");if(1!==s&&__LOG__(3)(we()),i){__LOG__(2)(De(),[e,"action","msg",a.add,i.type,i.from,i.to,i.id,i.author].join(","));var n=this.msgGetTarget(i);(0,E.default)([{meta:a,chat:n,msg:i}])}else __LOG__(3)(Oe());break;case"last":for(var o=[],l=0;l<s;l++){var d=this.parseMsg(r[l],"last");d?o.push(d):__LOG__(3)(Ae())}if(o.length>0){__LOG__(2)(Pe(),[e,"action","msg","last",r.length].join(","));for(var u={recent:!0,meta:a,binarySize:t},c=0;c<o.length;c++)u[this.msgGetTarget(o[c])]=o[c];(0,E.default)([u])}else __LOG__(3)(Ie());break;case"before":case"after":case"unread":if(s>0){for(var h=[],f=0;f<s;f++){var p=this.parseMsg(r[f],a.add);p?h.push(p):__LOG__(3)(Ne())}if(h.length>0){var m=this.msgGetTarget(h[0]);__LOG__(2)(Me(),[e,"action","msg",a.add,m,h.length].join(",")),(0,E.default)([{meta:a,chat:m,msgs:h,binarySize:t}])}else __LOG__(3)(Te(),a.add)}else __LOG__(3)(be());break;default:__LOG__(3)(ye())}},handleAction:function(e,t,r){var s=this.actionGetMeta(t),i=this.groupActionsByType(this.N.children(t)),l=Object.keys(i);if(Array.isArray(l)){var d=l.length;if(0!==d||"last"!==s.add)for(var u=0;u<d;u++){var m=l[u],_=i[m],v=_.length;switch(m){case"msg":this.handleActionMsg(e,r,s,_,t);break;case"cmd":for(var A=0;A<v;A++){var O=this.parseCmd(_[A]);if(O){var D=(0,o.default)(O).join(",");__LOG__(2)(Se(),[e,"action","cmd",D].join(",")),a(42871).handle([O])}else __LOG__(3)(Ee())}break;case"bcUpdate":for(var w=[],R=0;R<v;R++){var k=this.parseBCUpdate(_[R]);k?w.push(k):__LOG__(3)(ge())}if(__LOG__(2)(ve(),[e,"action","bcUpdate",w.length].join(",")),w.length>0)a(99922).default.handle(w);break;case"ack":for(var L=0;L<v;L++){var x=this.parseAck(_[L]);x?(__LOG__(2)(_e(),[e,"action","ack",x.to,x.id,x.ack].join(",")),(0,E.default)([x])):__LOG__(3)(me())}break;case"contact":for(var F=[],B=0;B<v;B++){var ye=this.parseContact(_[B]);ye?F.push(ye):__LOG__(3)(pe())}if(__LOG__(2)(fe(),[e,"action","contact",F.length,s.missing].join(",")),F.length>0){var be=[F];(s.missing||s.checksum)&&be.push(s),(0,p.default)(be)}break;case"contacts":var Te=this.parseContacts(_[0]);__LOG__(2)(he(),[e,"action","contacts"].join(",")),Te?(0,p.default)([Te]):__LOG__(3)(ce());break;case"chat":for(var Me=[],Ne=0;Ne<v;Ne++){var Ie=this.parseChat(_[Ne]);Ie?Me.push(Ie):__LOG__(3)(ue())}__LOG__(2)(de(),[e,"action","chat",Me.length].join(",")),Me.length>0&&(0,h.default)([Me]);break;case"battery":var Pe=this.parseBattery(_[0]);Pe?(__LOG__(2)(le(),[e,"action","battery",Pe.battery,Pe.plugged].join(",")),(0,f.default)([Pe])):__LOG__(3)(oe());break;case"mute":for(var Ae=[],Oe=0;Oe<v;Oe++){var De=this.parseChat(_[Oe]);De?Ae.push(De):__LOG__(3)(ne())}__LOG__(2)(ie(),[e,"action","mute",Ae.length].join(",")),Ae.length>0&&S.default.handle(Ae);break;case"location":for(var we=[],Re=0;Re<v;Re++){var ke=this.parseLocation(_[Re]);ke?we.push(ke):__LOG__(3)(se()),__LOG__(2)(re(),[e,"action,location",we.length].join()),we.length>0&&a(84383).default.handle(we)}break;case"label":for(var Le=[],xe=0;xe<v;xe++){var Fe=this.callFeatureFlagFun(g.default.F.LABELS_DISPLAY,"parseLabel",_[xe]);Fe?Le.push(Fe):__LOG__(3)(ae()),__LOG__(2)(te(),[e,"action,label",Le.length].join()),Le.length>0&&a(23539).default.handle({checksum:s.checksum,labels:Le})}break;case"group":for(var Be=0;Be<v;Be++){var Ge=this.callFeatureFlagFun(g.default.F.GROUPS_V_4_JOIN_PERMISSION,"parseInviteUpdate",_[Be]);if(__LOG__(2)(ee(),[e,"action,group_v4_pending_invites",Ge&&Ge.length].join()),void 0!==Ge)a(99922).default.handlePendingInvite({gid:Ge.gid,participants:Ge.participants})}break;case"quickReply":for(var Ue=[],je=0;je<v;je++){var Ve=this.callFeatureFlagFun(g.default.F.QUICK_REPLIES_QUERY,"parseQuickReply",_[je]);Ve?Ue.push(Ve):__LOG__(3)($()),__LOG__(2)(Z(),[e,"action,quickReply",Ue.length].join()),Ue.length>0&&b.default.handle({checksum:s.checksum,quickReplies:Ue})}break;case"call":var He=this.callFeatureFlagFun(g.default.F.VOIP_INDIVIDUAL_INCOMING,"parseCall",_[0]);__LOG__(2)(J(),[e,"action","call"].join()),He?c.default.handle([He]):__LOG__(3)(X());break;case"stickerPack":case"sticker_pack":for(var We=[],Ye=0;Ye<v;Ye++){var Ke=this.callFeatureFlagFun(g.default.F.STICKER_PACK_QUERY,"parseStickerPackUpdate",_[Ye]);Ke?(We.push(Ke),P.default.sync(s.checksum)):__LOG__(3)(Q()),__LOG__(2)(z(),[e,"action,stickerPack",We.length].join())}break;case"recentStickers":if(g.default.isRecentStickersEnabled())for(var qe=0;qe<v;qe++){var ze=(0,M.default)(_[qe],this.N);ze?(T.default.setChecksum(s.checksum),T.default.remove(ze),__LOG__(2)(q(),[e,"action,recentStickers",ze].join())):__LOG__(3)(K())}break;case"starredStickers":if(g.default.isStarredStickersEnabled())for(var Qe=0;Qe<v;Qe++){var Xe=(0,I.default)(_[Qe],this.N);if(Xe){var{type:Je,filehash:Ze,sticker:$e}=Xe,et=a(47805).default;switch(Je){case"add":et.add((0,y.default)($e,"sticker"),{at:0,sort:!1},!0);break;case"delete":et.remove(Ze)}__LOG__(2)(Y(),[e,"action,starredStickers",Je,Ze].join())}else __LOG__(3)(W())}break;case"notice":for(var tt=[],at=0;at<v;at++){var rt=this.callFeatureFlagFun(g.default.F.USER_NOTICE,"parseNotice",_[at]);rt?!(0,n.default)(rt)&&tt.push(rt):__LOG__(3)(H()),__LOG__(2)(V(),[e,"action,notice",tt.length].join()),C.default.handleResponse(tt)}break;case"archiveSetting":for(var st=0;st<v;st++){var it=this.callFeatureFlagFun(g.default.F.SETTINGS_SYNC,"parseSetting",_[st]);it||__LOG__(3)(j()),__LOG__(2)(U(),[e,"action,setting,archive"].join()),N.default.handleResponse([it])}break;default:__LOG__(3)(G(),m)}}else(0,E.default)([{recent:!0,meta:s,binarySize:r}])}else __LOG__(3)(Ce(),typeof l)},handleQuery:function(e,t){var a=this,r=this.N.children(t);if(Array.isArray(r))for(var s=function(t){var s=r[t],i=a.N.tag(s);__LOG__(2)(B(),[e,"query",i].join());var n=void 0;switch(i){case"call":n=a.callFeatureFlagFun(g.default.F.VOIP_INDIVIDUAL_INCOMING,"handleCallQuery",s);break;default:__LOG__(3)(F(),i)}n||(n=Promise.resolve(a.errorNode(501))),n.then((t=>{a.BinaryProtocol.write(t).then((r=>{O.default.send({tag:e,data:r,onSend:a.wrap((()=>{})),onDrop:a.wrap((()=>{})),retryOn5xx:!0,binaryOpts:{debugString:["response",i].join(),debugObj:t,metricName:"QUERY_RESPONSE",ackRequest:!0}})})).catch((()=>{a.epochRecv()}))}))},i=0;i<r.length;i++)s(i)},handle:function(e,t,r,s){return this.BinaryProtocol.read(e).then((e=>{switch(this.N.tag(e)){case"response":this.handleResponse(r,e,s,t);break;case"action":this.handleAction(r,e,s,t);break;case"query":this.handleQuery(r,e,s);break;case"read":var i=this.parseCmd(e);if(i){var n=(0,o.default)(i).join();__LOG__(2)(x(),[r,"action",n].join()),a(42871).handle([i])}else __LOG__(3)(L());break;default:__LOG__(3,!0)(k(),this.N.toString(e,!0))}return!0})).catchType(m.LogoutDrop,(e=>{__LOG__(3)(R(),e.toString())})).catch((e=>{throw __LOG__(2)(w(),r,s),__LOG__(2)(D(),e.stack||""),new Error("BinaryProtocol read error: ".concat(e))}))}};t.default=Ve},50278:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=a(19741),o=r(a(96452)),l=s(a(73631));function d(){var e=(0,i.default)(["Attempted to call `read` on BinaryProtocolQueue"],["Attempted to call \\`read\\` on BinaryProtocolQueue"]);return d=function(){return e},e}var u=class{constructor(){this._writeQueue=[],this.Node=l.default}read(){return __LOG__(3)(d()),Promise.reject(new o.Disconnected)}write(e){return new Promise(((t,a)=>{this._writeQueue.push({resolve:t,reject:a,n:e})}))}dropAllBecauseLogout(){for(var e=new n.LogoutDrop("cancelled binary protocol call");this._writeQueue.length;){this._writeQueue.shift().reject(e)}}getWriteQueue(){return this._writeQueue}};t.default=u},49968:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(84573)),o=s(a(12782)),l=a(78692),d=s(a(2008)),u=s(a(21107)),c=s(a(98546)),h=s(a(78499)),f=s(a(14848)),p=s(a(92810)),m=s(a(26522)),_=s(a(52761)),v=r(a(96452)),g=s(a(18120)),E=s(a(65986)),S=s(a(76564)),C=s(a(44341)),y=s(a(43339)),b=s(a(51629)),T=s(a(74284));function M(){var e=(0,i.default)(["binaryProtocol unknown version: ",""]);return M=function(){return e},e}function N(){var e=(0,i.default)(["binaryProtocol deprecated version: ",""]);return N=function(){return e},e}var I=(e,t)=>{if(Array.isArray(e)&&t)return e.concat(t)},P=(e,t)=>{if(e.Dictionary){var a={};(0,o.default)(a,t.Dictionary,e.Dictionary,I),e.Dictionary=a}return(0,n.default)(e,t)},A={OutputStream:S.default,Writer:b.default,InputStream:E.default,Reader:C.default,Dictionary:u.default,Crypto:d.default},O=P({Dictionary:c.default},A),D=P({Dictionary:h.default},O),w=P({Dictionary:f.default},D),R=P({Dictionary:p.default},w),k=P({Dictionary:m.default},R),L=P({Writer:T.default,Reader:y.default,Dictionary:_.default},k),x={"01":!0,"03":!0,"04":!0,"05":!0,"06":!0,v1:!0,v2:!0,v3:!0,v4:!0},F={v5:A,v6:O,v7:D,v8:w,v9:R,v10:k,v11:L};t.default=class{constructor(e){var t="number"==typeof e?"v".concat(e):e;if(x[t])throw __LOG__(3)(N(),t),new v.DeprecatedProtocolVersion("bp_deprecated_version");var r=F[t];if(!r)throw __LOG__(3)(M(),t),new v.UpdateImmediately("bp_unknown_version");var s=r.OutputStream,i=new r.Writer(r.Dictionary),n=r.InputStream,o=new r.Reader(r.Dictionary),d=r.Crypto;this.Node=a(73631).default,g.default.supportsFeature(g.default.F.MD_BACKEND)?this.read=e=>Promise.resolve(o.readNode(new n(e))):this.read=e=>d.decrypt(e).then((e=>o.readNode(new n(e)))),this.write=(0,l.wrapSyncPromise)((e=>{var t=new s;return i.writeNode(t,e),d.encrypt(t.toBuffer())})),this.dropAllBecauseLogout=()=>d.dropAllBecauseLogout()}}},26522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["vname","old_jid","new_jid","announcement","locked","prop","label","color","call","offer","call-id"]}},74227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,JID_AD:247,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},52761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["quick_reply","sticker","pay_t","accept","reject","sticker_pack","invalid","canceled","missed","connected","result","audio","video","recent"]}},43339:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="",a="",r=e.singleByte,s=e.doubleByte,o=e.nibbleDecode;this.readNode=function(e){var a=e.readByte(),r=this.readListSize(e,a);if((a=e.readByte())===i.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());var s=this.readString(e,a);if(t=s,0===r||!s)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());var n,o=this.readAttributes(e,r-2+r%2>>1);if(r%2==1)return[s,o,void 0];if(a=e.readByte(),this.isListTag(a))n=this.readList(e,a);else if(a===i.default.BINARY_8){var l=e.readByte();n=e.readBytes(l)}else if(a===i.default.BINARY_20){var d=e.readInt20();n=e.readBytes(d)}else if(a===i.default.BINARY_32){var u=e.readInt32();n=e.readBytes(u)}else n=this.readString(e,a);return[s,o,n]},this.isListTag=function(e){return e===i.default.LIST_EMPTY||e===i.default.LIST_8||e===i.default.LIST_16},this.readListSize=function(e,t){if(t===i.default.LIST_EMPTY)return 0;if(t===i.default.LIST_8)return e.readByte();if(t===i.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,r,s=!0){var o;if(-1===r)throw new Error("invalid start token readString"+e.debugInfo());if(r>2&&r<236){var u=this.getToken(r);return"s.whatsapp.net"===u&&(u="c.us"),u}switch(r){case i.default.DICTIONARY_0:case i.default.DICTIONARY_1:case i.default.DICTIONARY_2:case i.default.DICTIONARY_3:var c=e.readByte();return this.getTokenDouble(r-i.default.DICTIONARY_0,c);case i.default.LIST_EMPTY:return;case i.default.BINARY_8:return o=e.readString(e.readByte()),this.isAttr&&s&&n.default.isWid(o)?d(o):o;case i.default.BINARY_20:return o=e.readString(e.readInt20()),this.isAttr&&s&&n.default.isWid(o)?d(o):o;case i.default.BINARY_32:return o=e.readString(e.readInt32()),this.isAttr&&s&&n.default.isWid(o)?d(o):o;case i.default.JID_PAIR:var h=this.readString(e,e.readByte()),f=this.readString(e,e.readByte());if(void 0!==h&&void 0!==f){var p=h+"@"+f;return s&&n.default.isWid(p)?d(p):p}if(void 0!==f)return f;throw new Error("invalid jid "+h+","+f+" "+e.debugInfo());case i.default.JID_AD:var m=e.readByte(),_=e.readByte(),v=this.readString(e,e.readByte());if(void 0!==v)return d(m&&_?v+"."+m+":"+_+"@c.us":m?v+"."+m+"@c.us":_?v+":"+_+"@c.us":v+"@c.us");throw new Error("invalid JID_AD agent:".concat(m," device:").concat(_," user:").concat(v));case i.default.NIBBLE_8:case i.default.HEX_8:return this.readPacked8(r,e);default:throw __LOG__(2,!0)(l(),r,t,a,e.debugInfoWithPadding()),new Error("invalid string "+r)}},this.getToken=function(e){var t;if(e>=0&&e<r.length&&(t=r[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){var a,r=256*e+t;if(r>=0&&r<s.length&&(a=s[r]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){var r,s;this.isAttr=!0;for(var i=t?{}:void 0,o=0;o<t;o++)r=this.readString(e,e.readByte()),a=r,s=this.readString(e,e.readByte(),n.default.canBeWid(r)),i[r]=s;return this.isAttr=!1,i},this.readList=function(e,t){for(var a=[],r=this.readListSize(e,t),s=0;s<r;s++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){for(var a=t.readByte(),r="",s=0;s<(127&a);s++){var i=t.readByte();r+=this.unpackByte(e,(240&i)>>4),r+=this.unpackByte(e,15&i)}return a>>7&&(r=r.substring(0,r.length-1)),r},this.unpackByte=function(e,t){switch(e){case i.default.NIBBLE_8:return this.unpackNibble(t);case i.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!o.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return o[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var s=r(a(19976)),i=r(a(74227)),n=r(a(68384)),o=a(75637);function l(){var e=(0,s.default)(["Unexpected token in binary protocol read. Token : ","\nlastTag: ","\nlastAttributeKey: ","\n",""]);return l=function(){return e},e}function d(e){try{return(0,o.createWid)(e)}catch(t){return e}}},74284:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a={},r=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+n.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(t){if(3!==t.length)throw new Error("invalid node");var a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])}},this.writeString=function(e,t,r){if("string"!=typeof t&&!(t instanceof o.default))throw __LOG__(3)(c(),typeof t),new Error("invalid string");if(t instanceof o.default)this.writeJid(e,t);else{var s,i,d=a.hasOwnProperty(t)?a[t]:void 0;if("c.us"!==t||r)if(void 0===d){if(t.indexOf("@")<1)this.writeStringRaw(e,t);else try{var u=(0,l.createWid)(t);this.writeJid(e,u)}catch(a){this.writeStringRaw(e,t)}}else{if(d<n.default.SINGLE_BYTE_MAX)this.writeToken(e,d);else{var h=d-n.default.SINGLE_BYTE_MAX;switch(i=h%256,h>>8){case 0:s=n.default.DICTIONARY_0;break;case 1:s=n.default.DICTIONARY_1;break;case 2:s=n.default.DICTIONARY_2;break;case 3:s=n.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+d)}}this.writeToken(e,s),this.writeToken(e,i)}else this.writeToken(e,a["s.whatsapp.net"])}},this.writeStringRaw=function(e,t){var a=(0,i.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t){var a=t.user,r=t.server,s=t.agent,i=t.device;if(s||i){if(s>255||i>255||"c.us"!==r&&"s.whatsapp.net"!==r)throw new Error("invalid agent:".concat(s," or device:").concat(i," or server:").concat(r," for wid ").concat(t.toString()));e.pushByte(n.default.JID_AD),e.pushByte(s||0),e.pushByte(i||0),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,n.default.LIST_EMPTY)}else e.pushByte(n.default.JID_PAIR),a?this.writePackedBytesStringFallback(e,a):this.writeToken(e,n.default.LIST_EMPTY),this.writeString(e,r)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){for(var a in this.isAttr=!0,t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){var a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if((a=t.byteLength)>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(var r=0;r<a;r++)this.writeNode(e,t[r])}},this.writeListStart=function(e,t){0===t?e.pushByte(n.default.LIST_EMPTY):t<256?(e.pushByte(n.default.LIST_8),e.pushByte(t)):(e.pushByte(n.default.LIST_16),e.pushInt16(t))},this.writePackedBytesStringFallback=function(e,t){try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)(u(),a.message),this.writeString(e,t)}},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,n.default.NIBBLE_8)}catch(a){__LOG__(3)(d(),a.message),this.writePackedBytesImpl(e,t,n.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){var r=(0,i.numUtf8Bytes)(t);if(r>n.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+r);var s,o=[],l=0;r%2>0&&(l=128);var d=l|Math.ceil(r/2);o.push(a),o.push(d);for(var u=Math.floor(r/2),c=0;c<u;c++)s=this.packBytePair(a,t[2*c],t[2*c+1]),o.push(s);l>0&&(s=this.packBytePair(a,t[r-1],"\0"),o.push(s));var h=new Uint8Array(o);e.pushUint8Array(h)},this.packBytePair=function(e,t,a){var r,s;switch(e){case n.default.NIBBLE_8:r=this.packNibble(t),s=this.packNibble(a);break;case n.default.HEX_8:r=this.packHex(t),s=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return r<<4|s},this.packNibble=function(e){if(!r.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return r[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var s=r(a(19976)),i=a(46378),n=r(a(74227)),o=r(a(68384)),l=a(75637);function d(){var e=(0,s.default)(['writer:enc nib fail, try hex "','"']);return d=function(){return e},e}function u(){var e=(0,s.default)(['writer:encode-fallback "','"']);return u=function(){return e},e}function c(){var e=(0,s.default)(["writer:writeString passed non-string/wid type: ",""]);return c=function(){return e},e}},7188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={STREAM_END:2,LIST_EMPTY:0,DICTIONARY_0:236,DICTIONARY_1:237,DICTIONARY_2:238,DICTIONARY_3:239,LIST_8:248,LIST_16:249,JID_PAIR:250,HEX_8:251,BINARY_8:252,BINARY_20:253,BINARY_32:254,NIBBLE_8:255,SINGLE_BYTE_MAX:256,PACKED_MAX:254}},2008:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(38174),n=a(19741),o=s(a(22605)),l=s(a(61941)),d=r(a(8292));class u{static encrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:encrypt"));var t=d.get(),a=(0,i.encryptAndMac)((0,l.default)(t.encKey,"bundle.encKey"),(0,l.default)(t.macKey,"bundle.macKey"),e);return this._encryptQueue.enqueue(a)}static decrypt(e){if(!e)return Promise.reject(new Error("Missing ArrayBuffer in cryptoAsync:decrypt"));var t=d.get(),a=(0,i.macAndDecrypt)((0,l.default)(t.encKey,"bundle.encKey"),(0,l.default)(t.macKey,"bundle.macKey"),e);return this._decryptQueue.enqueue(a)}static dropAllBecauseLogout(){var e=new n.LogoutDrop("cancelled binary protocol call");this._encryptQueue.cancelAll(e),this._decryptQueue.cancelAll(e)}}t.default=u,u._encryptQueue=new o.default,u._decryptQueue=new o.default},21107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={singleByte:[void 0,void 0,void 0,"200","400","404","500","501","502","action","add","after","archive","author","available","battery","before","body","broadcast","chat","clear","code","composing","contacts","count","create","debug","delete","demote","duplicate","encoding","error","false","filehash","from","g.us","group","groups_v2","height","id","image","in","index","invis","item","jid","kind","last","leave","live","log","media","message","mimetype","missing","modify","name","notification","notify","out","owner","participant","paused","picture","played","presence","preview","promote","query","raw","read","receipt","received","recipient","recording","relay","remove","response","resume","retry","s.whatsapp.net","seconds","set","size","status","subject","subscribe","t","text","to","true","type","unarchive","unavailable","url","user","value","web","width","mute","read_only","admin","creator","short","update","powersave","checksum","epoch","block","previous","409","replaced","reason","spam","modify_tag","message_info","delivery","emoji","title","description","canonical-url","matched-text","star","unstar","media_key","filename","identity","unread","page","page_count","search","media_message","security","call_log","profile"],doubleByte:[],nibbleEncode:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"-":10,".":11,"\0":15},nibbleDecode:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"-",11:".",15:"\0"}};t.default=a},65986:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(46378);t.default=class{constructor(e){this.binary=new r.Binary(e)}readByte(){return this.binary.readUint8()}readInt16(){return this.binary.readUint16()}readInt20(){return((15&this.binary.readUint8())<<16)+(this.binary.readUint8()<<8)+this.binary.readUint8()}readInt32(){return this.binary.readUint32()}readString(e){return this.binary.readString(e)}readBytes(e){return this.binary.readBuffer(e)}debugInfo(){var e=this.binary;return"offset: ".concat(e._readIndex," byte: ").concat(e._buffer[e._readIndex])}debugInfoWithPadding(){var e=this.binary,t=e._buffer.slice(Math.max(0,e._readIndex-20),e._readIndex).toString(),a=e._buffer.slice(e._readIndex,Math.min(e._buffer.length,e._readIndex+20)).toString();return"offset: ".concat(e._readIndex," byte: ").concat(e._buffer[e._readIndex]," previous 20 bytes: ").concat(t,"\n        following 20 bytes: ").concat(a,"\n        ")}}},76564:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(46378);t.default=class{constructor(){this.buf=new r.Binary}pushInt16(e){this.buf.writeUint16(e)}pushInt20(e){if("number"!=typeof e)throw new Error("invalid int20");this.buf.writeUint8((983040&e)>>16),this.buf.writeUint16(65535&e)}pushInt32(e){this.buf.writeUint32(e)}pushByte(e){this.buf.writeUint8(e)}pushBytes(e){if(!(e instanceof ArrayBuffer))throw new Error("invalid byte buffer");this.buf.writeBuffer(e)}pushUint8Array(e){if("[object Uint8Array]"!==Object.prototype.toString.call(e))throw new Error("invalid Uint8Array");this.buf.writeByteArray(e)}pushString(e){if("string"!=typeof e)throw new Error("invalid string");this.buf.writeString(e)}toBuffer(){return this.buf.readBuffer()}}},44341:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="",a="",r=e.singleByte,s=e.doubleByte,o=e.nibbleDecode;this.readNode=function(e){var a=e.readByte(),r=this.readListSize(e,a);if((a=e.readByte())===i.default.STREAM_END)throw new Error("unexpected stream end "+e.debugInfo());var s=this.readString(e,a);if(0===r||!s)throw new Error("invalid node. 0 list or empty tag"+e.debugInfo());t=s;var n,o=this.readAttributes(e,r-2+r%2>>1);if(r%2==1)return[s,o,void 0];if(a=e.readByte(),this.isListTag(a))n=this.readList(e,a);else if(a===i.default.BINARY_8){var l=e.readByte();n=e.readBytes(l)}else if(a===i.default.BINARY_20){var d=e.readInt20();n=e.readBytes(d)}else if(a===i.default.BINARY_32){var u=e.readInt32();n=e.readBytes(u)}else n=this.readString(e,a);return[s,o,n]},this.isListTag=function(e){return e===i.default.LIST_EMPTY||e===i.default.LIST_8||e===i.default.LIST_16},this.readListSize=function(e,t){if(t===i.default.LIST_EMPTY)return 0;if(t===i.default.LIST_8)return e.readByte();if(t===i.default.LIST_16)return e.readInt16();throw new Error("invalid list size "+e.debugInfo())},this.readString=function(e,r,s=!0){var o;if(-1===r)throw new Error("invalid start token readString"+e.debugInfo());if(r>2&&r<236){var u=this.getToken(r);return"s.whatsapp.net"===u&&(u="c.us"),u}switch(r){case i.default.DICTIONARY_0:case i.default.DICTIONARY_1:case i.default.DICTIONARY_2:case i.default.DICTIONARY_3:var c=e.readByte();return this.getTokenDouble(r-i.default.DICTIONARY_0,c);case i.default.LIST_EMPTY:return;case i.default.BINARY_8:return o=e.readString(e.readByte()),this.isAttr&&s&&n.default.isWid(o)?d(o):o;case i.default.BINARY_20:return o=e.readString(e.readInt20()),this.isAttr&&s&&n.default.isWid(o)?d(o):o;case i.default.BINARY_32:return o=e.readString(e.readInt32()),this.isAttr&&s&&n.default.isWid(o)?d(o):o;case i.default.JID_PAIR:var h=this.readString(e,e.readByte()),f=this.readString(e,e.readByte());if(void 0!==h&&void 0!==f){var p=h+"@"+f;return s&&n.default.isWid(p)?d(p):p}if(void 0!==f)return f;throw new Error("invalid jid "+h+","+f+" "+e.debugInfo());case i.default.NIBBLE_8:case i.default.HEX_8:return this.readPacked8(r,e);default:throw __LOG__(2,!0)(l(),r,t,a,e.debugInfoWithPadding()),new Error("invalid string "+r)}},this.getToken=function(e){var t;if(e>=0&&e<r.length&&(t=r[e]),void 0===t)throw new Error("invalid token "+e);return t},this.getTokenDouble=function(e,t){var a,r=256*e+t;if(r>=0&&r<s.length&&(a=s[r]),void 0===a)throw new Error("invalid double byte token "+e+" "+t);return a},this.readAttributes=function(e,t){var r,s;this.isAttr=!0;for(var i=t?{}:void 0,o=0;o<t;o++)r=this.readString(e,e.readByte()),a=r,s=this.readString(e,e.readByte(),n.default.canBeWid(r)),i[r]=s;return this.isAttr=!1,i},this.readList=function(e,t){for(var a=[],r=this.readListSize(e,t),s=0;s<r;s++)a.push(this.readNode(e));return a},this.readPacked8=function(e,t){for(var a=t.readByte(),r="",s=0;s<(127&a);s++){var i=t.readByte();r+=this.unpackByte(e,(240&i)>>4),r+=this.unpackByte(e,15&i)}return a>>7&&(r=r.substring(0,r.length-1)),r},this.unpackByte=function(e,t){switch(e){case i.default.NIBBLE_8:return this.unpackNibble(t);case i.default.HEX_8:return this.unpackHex(t);default:throw new Error("unpack non-nibble/hex type: "+e)}},this.unpackNibble=function(e){if(!o.hasOwnProperty(e))throw new Error("invalid nibble to unpack: "+e);return o[e]},this.unpackHex=function(e){if(e>=0&&e<=15)return e.toString(16).toUpperCase();throw new Error("invalid hex to unpack: "+e)}};var s=r(a(19976)),i=r(a(7188)),n=r(a(68384)),o=a(75637);function l(){var e=(0,s.default)(["Unexpected token in binary protocol read. Token : ","\nlastTag: ","\nlastAttributeKey: ","\n",""]);return l=function(){return e},e}function d(e){try{return(0,o.createWid)(e)}catch(t){return e}}},51629:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a={},r=e.nibbleEncode;for(t=0;t<e.singleByte.length;t++)e.singleByte[t]&&(a[e.singleByte[t]]=t);for(t=0;t<e.doubleByte.length;t++)e.doubleByte[t]&&(a[e.doubleByte[t]]=t+n.default.SINGLE_BYTE_MAX);this.writeNode=function(e,t){if(t){if(3!==t.length)throw new Error("invalid node");var a=t[1]?2*Object.keys(t[1]).filter((function(e){return!!t[1][e]})).length:0;this.writeListStart(e,1+a+(t[2]?1:0)),this.writeString(e,t[0]),this.writeAttributes(e,t[1]),this.writeChildren(e,t[2])}},this.writeString=function(e,t,r){if("string"!=typeof t&&!(t instanceof o.default))throw __LOG__(3)(u(),typeof t),new Error("invalid string");if(t instanceof o.default)this.writeJid(e,t.user,t.server);else{var s,i,l=a.hasOwnProperty(t)?a[t]:void 0;if("c.us"!==t||r)if(void 0===l){var d=t.indexOf("@");if(d<1)this.writeStringRaw(e,t);else{var c=t.substring(0,d),h=t.substring(d+1);this.writeJid(e,c,h)}}else{if(l<n.default.SINGLE_BYTE_MAX)this.writeToken(e,l);else{var f=l-n.default.SINGLE_BYTE_MAX;switch(i=f%256,f>>8){case 0:s=n.default.DICTIONARY_0;break;case 1:s=n.default.DICTIONARY_1;break;case 2:s=n.default.DICTIONARY_2;break;case 3:s=n.default.DICTIONARY_3;break;default:throw new Error("double byte dictionary token out of range: "+t+" "+l)}}this.writeToken(e,s),this.writeToken(e,i)}else this.writeToken(e,a["s.whatsapp.net"])}},this.writeStringRaw=function(e,t){var a=(0,i.numUtf8Bytes)(t);if(a>=4294967296)throw new Error("string too large to encode (len = "+a+"): "+t);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushString(t)},this.writeJid=function(e,t,a){if(e.pushByte(n.default.JID_PAIR),t)try{this.writePackedBytes(e,t)}catch(a){__LOG__(3,!0)(d(),a.message),this.writeString(e,t)}else this.writeToken(e,n.default.LIST_EMPTY);this.writeString(e,a)},this.writeToken=function(e,t){if(t<245)e.pushByte(t);else if(t<=500)throw new Error("invalid token")},this.writeAttributes=function(e,t){if(t){for(var a in this.isAttr=!0,t)t[a]&&(this.writeString(e,a),this.writeString(e,t[a]));this.isAttr=!1}},this.writeChildren=function(e,t){var a;if(t)if("string"==typeof t)this.writeString(e,t,!0);else if(t instanceof ArrayBuffer){if((a=t.byteLength)>=4294967296)throw new Error("invalid children; too long (len = "+a);a>=1<<20?(e.pushByte(n.default.BINARY_32),e.pushInt32(a)):a>=256?(e.pushByte(n.default.BINARY_20),e.pushInt20(a)):(e.pushByte(n.default.BINARY_8),e.pushByte(a)),e.pushBytes(t)}else{if(!Array.isArray(t))throw new Error("invalid children");a=t.length,this.writeListStart(e,a);for(var r=0;r<a;r++)this.writeNode(e,t[r])}},this.writeListStart=function(e,t){0===t?e.pushByte(n.default.LIST_EMPTY):t<256?(e.pushByte(n.default.LIST_8),e.pushByte(t)):(e.pushByte(n.default.LIST_16),e.pushInt16(t))},this.writePackedBytes=function(e,t){try{this.writePackedBytesImpl(e,t,n.default.NIBBLE_8)}catch(a){__LOG__(3)(l(),a.message),this.writePackedBytesImpl(e,t,n.default.HEX_8)}},this.writePackedBytesImpl=function(e,t,a){var r=(0,i.numUtf8Bytes)(t);if(r>n.default.PACKED_MAX)throw new Error("too many bytes to nibble-encode: len = "+r);var s,o=[],l=0;r%2>0&&(l=128);var d=l|Math.ceil(r/2);o.push(a),o.push(d);for(var u=Math.floor(r/2),c=0;c<u;c++)s=this.packBytePair(a,t[2*c],t[2*c+1]),o.push(s);l>0&&(s=this.packBytePair(a,t[r-1],"\0"),o.push(s));var h=new Uint8Array(o);e.pushUint8Array(h)},this.packBytePair=function(e,t,a){var r,s;switch(e){case n.default.NIBBLE_8:r=this.packNibble(t),s=this.packNibble(a);break;case n.default.HEX_8:r=this.packHex(t),s=this.packHex(a);break;default:throw new Error("invalid byte pack type: "+e)}return r<<4|s},this.packNibble=function(e){if(!r.hasOwnProperty(e))throw new Error("invalid byte to nibble-pack: "+e);return r[e]},this.packHex=function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return parseInt(e,16);case"\0":return 15;default:throw new Error("packHex:invalid byte: "+e)}}};var s=r(a(19976)),i=a(46378),n=r(a(7188)),o=r(a(68384));function l(){var e=(0,s.default)(['writer:enc nib fail, try hex "','"']);return l=function(){return e},e}function d(){var e=(0,s.default)(['writer:encode-fallback "','"']);return d=function(){return e},e}function u(){var e=(0,s.default)(["writer:writeString passed non-string/wid type: ",""]);return u=function(){return e},e}},98546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["ciphertext","invite"]}},78499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["gif","vcard","frequent"]}},14848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["privacy","blacklist","whitelist","verify"]}},92810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={singleByte:["location","document","elapsed","revoke_invite","expiration","unsubscribe","disable"]}},17318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={sendConversationDismissChangeNumber:function(e){return this.sendConversationOpWithKey("modify",e,void 0,void 0)}};t.default=a},72711:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19034)),i=a(95595),n=r(a(12767)),o={setGroupEphemeralDuration:function(e,t){return new Promise(((a,r)=>{var o=n.default.tag(),l=this.wrap(a);l.tag=o;var d=[["ephemeral",{value:t.toString()},void 0]],u=["group",{id:o,jid:e,type:"prop",author:(0,i.getMaybeMeUser)()},d],c=this.actionNode("set",[u]);this.binSend("send",c,r,{clientCacheable:!0,onSend:l,onDrop:this.wrap(r)},{debugString:"action,group,ephemeral,"+t,metricName:"GROUP",expires:(0,s.default)().unix()})}))}};t.default=o},58305:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19034)),i=a(95595),n=a(11419),o=r(a(12767)),l={setGroupDescription:function(e,t,a,r){return new Promise(((l,d)=>{var u,c=o.default.tag(),h=this.wrap(l);h.tag=c,u=(0,n.isString)(t)?[["description",{id:a,prev:r||"none"},t]]:[["description",{prev:r||"none",delete:"true"},void 0]];var f=["group",{id:c,jid:e,type:"description",author:(0,i.getMaybeMeUser)()},u],p=this.actionNode("set",[f]);this.binSend("send",p,d,{clientCacheable:!0,onSend:h,onDrop:this.wrap(d)},{debugString:"action,group,desc",metricName:"GROUP",expires:(0,s.default)().unix()})}))},setGroupProperty:function(e,t,a){return"announcement"!==t&&"restrict"!==t&&"no_frequently_forwarded"!==t?Promise.reject("invalid group property"):new Promise(((r,n)=>{var l,d=o.default.tag(),u=this.wrap(r);switch(u.tag=d,t){case"announcement":l=[["announcement",{value:(!!a).toString()},void 0]];break;case"restrict":l=[["locked",{value:(!!a).toString()},void 0]];break;case"no_frequently_forwarded":l=[["no_frequently_forwarded",{value:(!!a).toString()},void 0]]}var c=["group",{id:d,jid:e,type:"prop",author:(0,i.getMaybeMeUser)()},l],h=this.actionNode("set",[c]);this.binSend("send",h,n,{clientCacheable:!0,onSend:u,onDrop:this.wrap(n)},{debugString:["action,group,prop",t,a].join(),metricName:"GROUP",expires:(0,s.default)().unix()})}))},demoteParticipants:function(e,t){return this.setGroupParticipants("demote",e,t)}};t.default=l},98283:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(19034)),n=a(95595),o=a(11419),l=r(a(12767));function d(){var e=(0,s.default)(["create group tag"]);return d=function(){return e},e}var u={createGroup:function(e,t,a,r,s,u,c){return new Promise(((h,f)=>{var p=l.default.tag(),m=this.wrap(h);m.tag=p;var _=t.map((e=>["participant",{jid:e},void 0]));(0,o.isString)(a)&&(0,o.isString)(r)&&_.unshift(["description",{id:r},a]),s&&_.unshift(["locked",void 0,void 0]),u&&_.unshift(["announcement",void 0,void 0]),null!=c&&0!==c&&_.unshift(["ephemeral",{value:c.toString()},void 0]),__LOG__(2)(d());var v=["group",{id:p,type:"create",author:(0,n.getMaybeMeUser)(),subject:e},_],g=this.actionNode("set",[v]);this.binSend("send",g,f,{clientCacheable:!0,onSend:m,onDrop:this.wrap(f)},{debugString:"action,group,create",metricName:"GROUP",expires:(0,i.default)().unix()})}))}};t.default=u},21017:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19034)),i=r(a(12767)),n={findGroupPendingInvitesFromPhone:function(e,t){return new Promise(((a,r)=>{var s=this.queryNode({type:"group",kind:"invite",from:e,jid:t},[]);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{if("response"===this.N.tag(e)&&"group"===this.N.attr("type",e)){var t=this.N.children(e),r=t&&t[0];if(r){var s=[],i=this.N.children(r);Array.isArray(i)&&i.forEach((e=>{switch(this.N.tag(e)){case"participant":s.push({id:this.N.attr("jid",e)})}})),a({participants:s})}else a({status:"error",info:"bad format: no group node"})}else a({status:"error",info:"bad format: response incorrect"})})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,group_pending_invite",metricName:"QUERY_GROUP",ackRequest:!1})}))},acceptGroupV4Invite:function(e,t,a,r,n){return new Promise(((o,l)=>{var d=i.default.tag(),u=this.wrap(o);u.tag=d;var c=[["accept",{admin:t,expiration:r,code:a},void 0]],h=this.actionNode("set",[["group",{id:d,author:n,jid:e,type:"accept"},c]]);this.binSend("send",h,l,{clientCacheable:!0,onSend:u,onDrop:this.wrap(l)},{debugString:"action,group_invite_accept,",ackRequest:!1,expires:(0,s.default)().unix()})}))},revokeGroupV4Invite:function(e,t,a){return new Promise(((r,n)=>{var o=i.default.tag(),l=this.wrap(r);l.tag=o;var d=e.map((e=>["participant",{jid:e},void 0])),u=this.actionNode("set",[["group",{id:o,author:a,jid:t,type:"revoke"},d]]);this.binSend("send",u,n,{clientCacheable:!0,onSend:l,onDrop:this.wrap(n)},{debugString:"action,group_invite_revoke,",ackRequest:!1,expires:(0,s.default)().unix()})}))},parseInviteUpdate(e){var t=[],[a,r,s]=[this.N.attr("kind",e),this.N.attr("jid",e),this.N.attr("type",e)];if("update"===a&&"invite"===s&&void 0!==r){for(var i=this.N.children(e),n=0;n<i.length;n++){var o=i[n];"participant"===this.N.tag(o)&&t.push(this.N.attr("jid",o))}return{gid:r,participants:t}}}};t.default=n},90806:(e,t,a)=>{"use strict";var r=a(14859);t.Z=void 0;var s=r(a(17318)),i=r(a(72711)),n=r(a(58305)),o=r(a(98283)),l=r(a(21017)),d=r(a(22999)),u=r(a(9304)),c=r(a(5450)),h=r(a(50568)),f=r(a(16219)),p=r(a(64716)),m=r(a(49749)),_=r(a(69525)),v=r(a(88981)),g=r(a(99891)),E=r(a(94953)),S=r(a(13494)),C=r(a(30144)),y=r(a(47668)),b={labelsDisplay:d.default,groupsV3:n.default,groupsV3Create:o.default,changeNumberV2:s.default,queryStatusV3Thumbnail:p.default,queryVname:m.default,voipIndividualIncoming:y.default,quickRepliesQuery:_.default,payments:f.default,stickerPackQuery:S.default,labelsEdit:u.default,mediaUpload:c.default,videoPlaybackUrl:C.default,recentStickersV2:v.default,recentStickersV3:v.default,starredStickers:E.default,groupsV4JoinPermission:l.default,ephemeralMessages:i.default,userNotice:h.default,settingsSync:g.default};t.Z=b},22999:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=(a(12824),r(a(77865))),n=r(a(61941));function o(){var e=(0,s.default)(["bin-recv: response,label"]);return o=function(){return e},e}var l={chat:["Chat","Contact"],message:["Msg"],contact:["Contact"]},d={queryLabels:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"label"});this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((t=>{var a={labels:[]};if(__LOG__(2)(o()),"response"===this.N.tag(t)&&"label"===this.N.attr("type",t)){a.checksum=this.N.attr("checksum",t);var r=this.N.children(t);if(Array.isArray(r))for(var s=0;s<r.length;s++){var i=this.parseLabel(r[s]),n=i&&i.label;n&&a.labels.push(n)}}e(a)})).catch(t)}),e),onDrop:this.wrap(t)},{debugString:"query,labels",metricName:"QUERY_LABELS"})}))},parseLabel:function(e){if("label"===this.N.tag(e)){var t,a=parseInt(this.N.attr("count",e),10),r=this.N.attr("id",e),s=this.N.attr("name",e),o=this.N.attr("color",e),d=isNaN(a)?void 0:a,c=this.N.attr("type",e);if("update"===c)for(var h=this.N.children(e),f=0;f<h.length;f++){var p=h[f],m=null;switch(this.N.tag(p)){case"chat":m=this.N.attr("jid",p);break;case"message":var _=this.N.attr("jid",p),v=this.N.attr("index",p),g="true"===this.N.attr("owner",p),E=this.N.attr("participant",p);m=new i.default({fromMe:g,remote:_,id:v,participant:E})}var S={id:(0,n.default)(m,"updateId"),labels:u(this.N.children(p),this.N.attr),collection:l[this.N.tag(p)]};t=t?t.concat(S):[S]}var C={label:{id:r,name:s,color:o,count:d},type:c,labelUpdates:t};return this.dropIfConditionMet([!(c||r&&s&&o),c&&"update"!==c&&"delete"!==c],C)}}};function u(e,t){return e&&Array.isArray(e)?e.reduce(((e,a)=>[...e,(0,n.default)(t("id",a),"attr('id', label)")]),[]):[]}t.default=d},9304:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(19034)),n=r(a(7470));function o(){var e=(0,s.default)(["bin-recv: response,",""]);return o=function(){return e},e}var l={queryNextLabelColor(){return this._queryLabelColor(!0)},queryLabelPalette(){return this._queryLabelColor()},createLabel(e,t){return this._createOrDeleteLabels("create",e,t)},deleteLabel(e){return this._createOrDeleteLabels("delete",void 0,void 0,e)},_queryLabelColor:function(e){var t=e?"next label color":"all label color palette";return new Promise(((a,r)=>{var s=this.queryNode({type:"label",kind:"color",create:e?"true":void 0});this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={};if(__LOG__(2)(o(),t),"response"===this.N.tag(e)&&"label"===this.N.attr("type",e)){r.labelColors=[];var s=this.N.children(e);if(Array.isArray(s))for(var i=0;i<s.length;i++){var n=this.parseLabelColor(s[i]);n&&r.labelColors.push(n)}}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,".concat(t),metricName:e?"QUERY_NEXT_LABEL_COLOR":"QUERY_LABEL_PALETTE"})}))},addOrRemoveLabels:function(e,t=[]){return new Promise(((r,s)=>{var o=this.wrap(r),l=e.map((e=>["label",{id:e.id,type:e.type},void 0])),d=t.map((e=>e instanceof a(43334).default.modelClass?["chat",{jid:e.id},void 0]:e instanceof n.default.modelClass?["contact",{jid:e.id},void 0]:e instanceof a(58885).default.modelClass?["message",{index:e.id.id,owner:void 0===e.id.fromMe?void 0:e.id.fromMe.toString(),jid:e.id.remote},void 0]:void 0)),u=this.actionNode("set",[["label",{type:"update"},d.concat(l)]]);this.binSend("send",u,s,{onSend:o,onDrop:this.wrap(s)},{debugString:"action,label,remove or add",metricName:"ADD_OR_REMOVE_LABELS",expires:(0,i.default)().unix()})}))},_createOrDeleteLabels:function(e,t,a,r){return"delete"!==e&&"create"!==e?Promise.reject(new Error("_createOrDeleteLabels must be called with type of delete or create")):new Promise(((s,n)=>{var o=this.wrap(s),l={type:e,name:t,color:a,id:r||void 0},d=this.actionNode("set",[["label",l,void 0]]);this.binSend("send",d,n,{onSend:o,onDrop:this.wrap(n)},{debugString:"action,label,create or delete",metricName:"CREATE_OR_DELETE_LABELS",expires:(0,i.default)().unix()})}))},editLabel:function(e,t,a){return new Promise(((r,s)=>{var n=this.wrap(r),o={id:e,name:t||void 0,color:a||void 0,type:"update"},l=this.actionNode("set",[["label",o,void 0]]);this.binSend("send",l,s,{onSend:n,onDrop:this.wrap(s)},{debugString:"action,label,edit",metricName:"EDIT_LABELS",expires:(0,i.default)().unix()})}))},parseLabelColor:function(e){if("label"===this.N.tag(e)){var t=this.N.attr("color",e);return this.dropIfConditionMet([!t],{color:t})}}};t.default=l},5450:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976));function i(){var e=(0,s.default)(["wap:mediaUpload:missing-field"]);return i=function(){return e},e}function n(){var e=(0,s.default)(["wap:mediaUpload:missing-field"]);return n=function(){return e},e}function o(){var e=(0,s.default)(["wap:mediaUpload:error ",""]);return o=function(){return e},e}function l(){var e=(0,s.default)(["wap:mediaUpload:malformed"]);return l=function(){return e},e}function d(){var e=(0,s.default)(["bin-recv: response,media"]);return d=function(){return e},e}var u=["url","mediaKey","filehash","encFilehash","width","height","mimetype"],c=["url","mediaKey","filehash","encFilehash","mimetype"];function h(e,t){for(var a=0;a<t.length;a++)if(!e[t[a]])return!1;return!0}var f={mediaUpload:function(e,t){return new Promise(((a,r)=>{var s=this.queryNode({type:"media",kind:e,id:t.toString()},void 0);this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((t=>{this.BinaryProtocol.read(t).then((t=>{if(__LOG__(2)(d()),"response"!==this.N.tag(t)||"media"!==this.N.attr("type",t))return __LOG__(3)(l()),void a({status:400});var r=parseInt(this.N.attr("code",t),10)||200;if(200!==r)return __LOG__(3)(o(),r),void a({status:r});switch(e){case"sticker":var s={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t),height:this.N.attr("height",t),width:this.N.attr("width",t)};return h(s,u)?void a({status:r,sticker:s}):(__LOG__(3)(n()),void a({status:400}));case"sticker-pack":var f={directPath:this.N.attr("direct_path",t),url:this.N.attr("url",t),filehash:this.N.attr("filehash",t),encFilehash:this.N.attr("enc_filehash",t),mediaKey:this.N.attr("media_key",t),mimetype:this.N.attr("mimetype",t)};return h(f,c)?void a({status:r,stickerPack:f}):(__LOG__(3)(i()),void a({status:400}));case"quick-reply":throw new Error('"quick-reply" not yet implemented');default:throw new Error("unknown kind ".concat(e))}}))}),a),onDrop:this.wrap(r)},{debugString:"query,media",metricName:"QUERY_MEDIA",ackRequest:!1})}))}};t.default=f},50568:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(70417)),i=r(a(19976)),n=r(a(45455));function o(){var e=(0,i.default)(["bin-recv: response,notice_state"]);return o=function(){return e},e}var l={queryNoticeState:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"notice"},void 0),s=e?"query,notice_state,resume":"query,notice_state";this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={notices:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)(o()),"response"===this.N.tag(e)&&"notice"===this.N.attr("type",e)){var r=this.N.children(e);if(Array.isArray(r))for(var s=0;s<r.length;s++){var i=this.parseNotice(r[s]);(0,n.default)(i)||a.notices.push(i)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:Boolean(e)},{debugString:s,metricName:"QUERY_NOTICE_STATE"})}))},parseNotice:function(e){if("notice"===this.N.tag(e)){var t=parseInt(this.N.attr("id",e),10),a=parseInt(this.N.attr("version",e),10),r={id:isNaN(t)?void 0:t,blocking:"true"===this.N.attr("blocking",e),version:isNaN(a)?void 0:a};return null!=r.id?r:(0,s.default)({},void 0)}}};t.default=l},16219:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(44880),i=r(a(61941)),n={parsePaymentInfo:function(e,t){t&&(e.paymentStatus=t.status,e.paymentTxnStatus=t.txnStatus,e.paymentCurrency=t.currency||"",e.paymentAmount1000=(0,i.default)((0,s.maybeNumberOrThrowIfTooLarge)(t.amount1000),"maybeNumberOrThrowIfTooLarge(paymentInfo.amount1000)"),e.paymentMessageReceiverJid=this.decodeJid((0,i.default)(t.receiverJid,"paymentInfo.receiverJid")),e.paymentExpiryTimestamp=(0,s.maybeNumberOrThrowIfTooLarge)(t.expiryTimestamp),e.paymentTransactionTimestamp=(0,i.default)((0,s.maybeNumberOrThrowIfTooLarge)(t.transactionTimestamp),"maybeNumberOrThrowIfTooLarge(paymentInfo.transactionTimestamp)"))}};t.default=n},64716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={statusQueryThumbnail:function(e){return this.profilePicFindThumbFromPhone(e,void 0,!0)}};t.default=a},49749:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976));function i(){var e=(0,s.default)(["bin-recv: response,vname"]);return i=function(){return e},e}var n={queryVname:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"vname",jid:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((r=>{this.BinaryProtocol.read(r).then((a=>{var r;__LOG__(2)(i()),"response"===this.N.tag(a)&&"vname"===this.N.attr("type",a)&&(r=this.parseContact(this.N.child("user",a),e)),t(r)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,vname,".concat(e),metricName:"QUERY_VNAME"})}))}};t.default=n},69525:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=a(11419);function n(){var e=(0,s.default)(["bin-recv: response,quick_reply"]);return n=function(){return e},e}var o={queryQuickReplies:function(e){return this.sendQuickRepliesQuery(e,!1)},flushQuickReplyCounts:function(e){return this.sendQuickRepliesQuery(e,!0)},sendQuickRepliesQuery:function(e,t){return new Promise(((a,r)=>{var s=e?Object.keys(e).map((t=>["quick_reply",{id:t,count:e[t].toString()},void 0])):void 0,i={type:"quick_reply"};t&&(i.kind="count");var o=this.queryNode(i,s);this.binSend("sendEphemeral",o,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var r={data:[]};if(__LOG__(2)(n()),"response"===this.N.tag(e)&&"quick_reply"===this.N.attr("type",e)){r.checksum=this.N.attr("checksum",e);var s=this.N.children(e);if(Array.isArray(s))for(var i=0;i<s.length;i++){var o=(t?this.parseQuickReplyCount.bind(this):this.parseQuickReply.bind(this))(s[i]);o&&r.data.push(o)}}a(r)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,quick_replies",metricName:"QUERY_QUICK_REPLIES"})}))},parseQuickReply:function(e){if("quick_reply"===this.N.tag(e)){var t=this.N.attr("id",e),a=this.N.attr("short",e),r=this.N.attr("message",e),s=parseInt(this.N.attr("count",e),10)||0,n=this.N.attr("type",e),o=[];if("delete"!==n){var l=this.N.children(e);if(Array.isArray(l))for(var d=0;d<l.length;d++){var u=l[d];"matched-text"===this.N.tag(u)&&o.push(this.N.dataStr(u))}}var c=[!(n||t&&a&&r&&(0,i.isNumber)(s)),n&&"delete"!==n,"delete"===n&&!t];return this.dropIfConditionMet(c,{id:t,shortcut:a,message:r,count:s,keywords:o,type:n})}},parseQuickReplyCount:function(e){if("quick_reply"===this.N.tag(e)){var t=this.N.attr("id",e),a=parseInt(this.N.attr("count",e),10)||0,r=[!t||!(0,i.isNumber)(a)];return this.dropIfConditionMet(r,{id:t,count:a})}}};t.default=o},88981:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(38739)),i={queryRecentStickers:function(){return new Promise(((e,t)=>{var a=this.queryNode({type:"recent_stickers"},void 0);this.binSend("sendEphemeral",a,t,{onSend:this.binWrap((a=>{this.BinaryProtocol.read(a).then((e=>(0,s.default)(e,this.N,"recent_stickers"))).then(e,t)}),e),onDrop:this.wrap(t)},{debugString:"query,recent_stickers",metricName:"QUERY_RECENT_STICKERS"})}))}};t.default=i},92961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("recent_stickers"!==t.tag(e))return;if("delete"!==t.attr("type",e))return;return t.attr("filehash",e)}},99891:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(45455));function n(){var e=(0,s.default)(["bin-recv: response,settings"]);return n=function(){return e},e}var o={querySettings:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"settings"},void 0),s=e?"query,settings,resume":"query,settings";this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={settings:[],status:parseInt(this.N.attr("code",e),10)||200};if(__LOG__(2)(n()),"response"===this.N.tag(e)&&"settings"===this.N.attr("type",e)){var r=this.N.children(e);if(Array.isArray(r))for(var s=0;s<r.length;s++){var o=this.parseSetting(r[s]);(0,i.default)(o)||a.settings.push(o)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a),serverCacheable:Boolean(e)},{debugString:s,metricName:"QUERY_SETTINGS"})}))},setArchiveSetting:function(e){return new Promise(((t,a)=>{var r=this.actionNode("set",[["archive_v2",{classic:e.toString()},void 0]]);this.binSend("send",r,a,{clientCacheable:!0,onSend:this.wrap(t),onDrop:this.wrap(a)},{debugString:"action,settings,archive",metrics:"SET_ARCHIVE_SETTING",ackRequest:!0})}))},parseSetting:function(e){switch(this.N.tag(e)){case"archive_v2":return{type:"Archive",value:{classic:"true"===this.N.attr("classic",e),enabled:this.N.attr("enabled",e)&&"true"===this.N.attr("enabled",e)}};default:return}}};t.default=o},94953:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(38739)),i={queryStarredStickers:function(e=1,t=32){return new Promise(((a,r)=>{var i=this.queryNode({type:"starred_stickers",page:e.toString(),count:t.toString()},void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>(0,s.default)(e,this.N,"starred_stickers"))).then(a,r)}),a),onDrop:this.wrap(r)},{debugString:"query,starred_stickers",metricName:"QUERY_STARRED_STICKERS"})}))}};t.default=i},24499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("starred_stickers"!==t.tag(e))return;var a=t.attr("type",e);if("delete"!==a&&"add"!==a)return;var r=t.attr("filehash",e)||"";if("add"===a){var s={id:r,deprecatedMms3Url:t.attr("url",e)||"",directPath:t.attr("direct_path",e)||"",filehash:r,encFilehash:t.attr("enc_filehash",e),mediaKey:t.attr("media_key",e)||"",width:parseInt(t.attr("width",e)||"0",10),height:parseInt(t.attr("height",e)||"0",10),size:parseInt(t.attr("size",e)||"0",10),mimetype:t.attr("mimetype",e),index:0};return{filehash:r,type:a,sticker:s}}return{filehash:r,type:a}}},41335:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a;if("sticker"!==t.tag(e))return;var r=t.attr("filehash",e);if(!r)return __LOG__(4,void 0,new Error,!0)(n()),void SEND_LOGS("sticker-missing-filehash-from-phone");var s={id:r,deprecatedMms3Url:t.attr("url",e),directPath:t.attr("direct_path",e),mediaKey:t.attr("media_key",e),filehash:r,encFilehash:t.attr("enc_filehash",e),mimetype:t.attr("mimetype",e),width:parseInt(t.attr("width",e),10),height:parseInt(t.attr("height",e),10),size:parseInt(t.attr("size",e),10),weight:parseFloat(null!==(a=t.attr("weight",e))&&void 0!==a?a:1)};(!s.mimetype||Number.isNaN(s.width)||Number.isNaN(s.height)||Number.isNaN(s.size))&&__LOG__(3)(i());return s};var s=r(a(19976));function i(){var e=(0,s.default)(["sticker:parse missing preferred fields: "]);return i=function(){return e},e}function n(){var e=(0,s.default)(["filehash is missing in sticker from phone"]);return n=function(){return e},e}},38739:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){__LOG__(2)(o(),a);var r=t.tag(e);if("response"!==r)throw new Error("node tag for ".concat(a," response is invalid: ").concat(r));var s=t.attr("type",e)||"";if(s!==a)throw new Error("node type for ".concat(a," response is invalid: ").concat(s));var l=parseInt(t.attr("code",e),10)||200;if(200!==l)throw new Error("response status for ".concat(a," is invalid: ").concat(l));var d=t.attr("checksum",e)||"",u=parseInt(t.attr("total",e)||"0",10),c=t.children(e)||[];(0,i.default)(Array.isArray(c),"expects an Array of Stickers");var h=c.map((e=>(0,n.default)(e,t))).filter(Boolean);return{checksum:d,total:u,stickers:h}};var s=r(a(19976)),i=r(a(47677)),n=r(a(41335));function o(){var e=(0,s.default)(["bin-recv: response,",""]);return o=function(){return e},e}},13494:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(70417)),i=r(a(19976)),n=r(a(18120));function o(){var e=(0,i.default)(["bin-recv: response,sticker"]);return o=function(){return e},e}function l(){var e=(0,i.default)(["bin-recv: response,sticker_pack"]);return l=function(){return e},e}var d={queryStickerPacks:function(e=1,t=50){return new Promise(((a,r)=>{var s={type:n.default.isThirdPartyStickersEnabled()?"sticker_pack_v2":"sticker_pack",page:e.toString(),count:t.toString()},i=this.queryNode(s,void 0);this.binSend("sendEphemeral",i,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t={};if(__LOG__(2)(l()),"response"===this.N.tag(e)&&"sticker_pack"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||200;t.status=r,t.data=[],t.checksum=this.N.attr("checksum",e);var s=this.N.attr("count",e);t.count=null==s?null:parseInt(s,10);var i=this.N.children(e);if(Array.isArray(i))for(var n=0;n<i.length;n++){var o=this.parseStickerPack(i[n]);o&&t.data.push(o)}}a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,sticker_pack",metricName:"QUERY_STICKER_PACKS"})}))},queryStickersInStickerPack:function(e){return this.queryStickers({id:e})},queryStickers:function(e){return new Promise(((t,a)=>{var r=(0,s.default)({type:"sticker"},e),i=this.queryNode(r,void 0);this.binSend("sendEphemeral",i,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var a={};if(__LOG__(2)(o()),"response"===this.N.tag(e)&&"sticker"===this.N.attr("type",e)){var r=parseInt(this.N.attr("code",e),10)||200;a.status=r,a.data=[];var s=this.N.children(e);if(Array.isArray(s))for(var i=0;i<s.length;i++){var n=this.parseSticker(s[i]);n&&a.data.push(n)}}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,sticker,".concat(e.id),metricName:"QUERY_STICKERS"})}))},parseSticker:function(e){if("sticker"===this.N.tag(e)){var t={url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e),width:parseInt(this.N.attr("width",e)||125,10),height:parseInt(this.N.attr("height",e)||125,10),size:parseInt(this.N.attr("size",e)||0,10)||null};return t.filehash?t:void 0}},parseStickerPack:function(e){if("sticker_pack"===this.N.tag(e)){var t={id:this.N.attr("id",e),name:this.N.attr("name",e),url:this.N.attr("url",e),directPath:this.N.attr("direct_path",e),mediaKey:this.N.attr("media_key",e),filehash:this.N.attr("filehash",e),encFilehash:this.N.attr("enc_filehash",e),mimetype:this.N.attr("mimetype",e)};return t.id?t:void 0}},parseStickerPackUpdate:function(e){if("sticker_pack"===this.N.tag(e)){var t=this.N.attr("type",e);return this.dropIfConditionMet([!t],{type:t})}}};t.default=d},30144:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976));function i(){var e=(0,s.default)(["bin-recv: response,video_playback_url"]);return i=function(){return e},e}var n={queryVideoPlaybackUrl:function(e){return new Promise(((t,a)=>{var r=this.queryNode({type:"video",url:e},void 0);this.binSend("sendEphemeral",r,a,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{__LOG__(2)(i());var a=void 0;if("response"===this.N.tag(e)&&"video"===this.N.attr("type",e)){var r=this.N.attr("url",e);r&&(a={url:r})}t(a)})).catch(a)}),t),onDrop:this.wrap(a)},{debugString:"query,video_playback_url",metricName:"QUERY_URL"})}))}};t.default=n},47668:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(84139),s=a(28703),i=a(35205),n={parseCall:function(e){if("call"===this.N.tag(e)){var t=this.N.child("offer",e);if(t){var a=this.N.child("call",t);if(a){var i=this.N.children(a),n=(0,r.decodeProto)(s.MessageSpec,i).call;if(n){var o=this.N.attr("from",e),l=this.N.attr("call-id",t),d=n.callKey;return this.dropIfConditionMet([!l,!o,!d],{type:"offer_key",id:l,peerJid:o,key:d})}}}}},queryCall:function(e,t){return new Promise(((a,r)=>{var s=this.queryNode({type:"call","call-id":e,kind:t});this.binSend("sendEphemeral",s,r,{onSend:this.binWrap((e=>{this.BinaryProtocol.read(e).then((e=>{var t={status:400};"response"===this.N.tag(e)&&"call"===this.N.attr("type",e)&&(t.status=parseInt(this.N.attr("code",e),10)||400),a(t)})).catch(r)}),a),onDrop:this.wrap(r)},{debugString:"query,call,"+e,metricName:"QUERY_CALL"})}))},handleCallQuery(){var e=a(79504).default.handleQuery({});if(e)return e.then((()=>this.responseNode(void 0,[["some",{formatted:"xml"},void 0]])))},sendCallEnd:function(e,t){return new Promise(((a,r)=>{var s={};s.jid=e.jid,s["call-id"]=e["call-id"],s.result=o(e.result),s.audio=e.audio.toString(),s.out=e.out.toString(),s.seconds=e.seconds.toString(),s.t=e.t.toString(),s.group=e.group.toString();var i=t.map((e=>["participant",{jid:e.jid,result:o(e.result)},void 0])),n=this.actionNode("relay",[["call_end",s,i]]);this.binSend("send",n,r,{onSend:this.wrap(a),onDrop:this.wrap(r)},{debugString:"action,call_end,".concat(e["call-id"])})}))}};function o(e){return i.CALL_LOG_RESULT[e]||"invalid"}t.default=n},86014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={DEBUG_LOG:1,QUERY_RESUME:2,QUERY_RECEIPT:3,QUERY_MEDIA:4,QUERY_CHAT:5,QUERY_CONTACTS:6,QUERY_MESSAGES:7,PRESENCE:8,PRESENCE_SUBSCRIBE:9,GROUP:10,READ:11,CHAT:12,RECEIVED:13,PIC:14,STATUS:15,MESSAGE:16,QUERY_ACTIONS:17,BLOCK:18,QUERY_GROUP:19,QUERY_PREVIEW:20,QUERY_EMOJI:21,QUERY_MESSAGE_INFO:22,SPAM:23,QUERY_SEARCH:24,QUERY_IDENTITY:25,QUERY_URL:26,PROFILE:27,CONTACT:28,QUERY_VCARD:29,QUERY_STATUS:30,QUERY_STATUS_UPDATE:31,PRIVACY_STATUS:32,QUERY_LIVE_LOCATIONS:33,LIVE_LOCATION:34,QUERY_VNAME:35,QUERY_LABELS:36,CALL:37,QUERY_CALL:38,QUERY_QUICK_REPLIES:39,QUERY_CALL_OFFER:40,QUERY_RESPONSE:41,QUERY_STICKER_PACKS:42,QUERY_STICKERS:43,ADD_OR_REMOVE_LABELS:44,QUERY_NEXT_LABEL_COLOR:45,QUERY_LABEL_PALETTE:46,CREATE_OR_DELETE_LABELS:47,EDIT_LABELS:48,QUERY_RECENT_STICKERS:49,QUERY_NOTICE_STATE:50,QUERY_SETTINGS:51,SET_ARCHIVE_SETTING:51};t.default=a},78091:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCart=function(e,t,a,r){var l;s.default.supportsFeature(s.default.F.MD_BACKEND)?(l=(0,n.default)((0,o.createWid)(e),t,a,r))||(l=Promise.reject(new Error("Should not reach here"))):l=i.default.refreshCart(e,t,a,r);return l},t.updateCart=function(e){var t=Promise.resolve();if(s.default.supportsFeature(s.default.F.MD_BACKEND))if(e.itemCount>0||e.message&&e.message.length>0){var a=function(e){var t=e.cartItemCollection.map((e=>({id:e.id,priceAmount1000:e.priceAmount1000,currency:e.currency,name:e.name,quantity:e.quantity,imageHash:e.imageHash})));return{id:e.id.toString(),message:e.message,total:e.total,currency:e.currency,itemCount:e.itemCount,products:t}}(e);t=(0,l.getCartTable)().createOrReplace(a)}else t=(0,l.getCartTable)().remove(e.id.toString());return t};var s=r(a(18120)),i=r(a(76022)),n=r(a(1012)),o=a(75637),l=a(11008)},69227:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationArchive=function(e,t,a){var r;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var s=(0,l.unixTimeMs)();(r=d.default.getArchiveChatMutation(s,t,e).then((a=>(0,o.lockForMessageRangeSync)(["chat"],[a],(([r])=>(0,u.addActiveMessageRange)(e.toString(),"archive",a.binarySyncAction).then((()=>r.merge(e.toString(),function(e){var t={archive:e};e&&(t.pin=void 0);return t}(t)))))).then((()=>({status:200,_duplicate:null}))).catch((e=>{if(e instanceof c.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)(h()),SEND_LOGS("update chat table failed when send conversation to archive"),new Error("update chat table failed")})))))||(r=Promise.reject(new Error("Should not reach here")))}else r=n.default.sendConversationArchive(e,t,a);return r};var s=r(a(19976)),i=r(a(18120)),n=r(a(76022)),o=a(54212),l=a(71684),d=r(a(33729)),u=a(16976),c=a(96452);function h(){var e=(0,s.default)(["update chat table failed"]);return h=function(){return e},e}},60383:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationDelete=function(e,t,a){var r=Promise.resolve({status:400,_duplicate:!1});if(n.default.supportsFeature(n.default.F.MD_BACKEND)){var s=a();(t&&t.equals(s)||t===s)&&(r=(0,l.getStorage)().lock(["chat","label-association","message",...m.SYNCD_INTERNAL_TABLES_TO_LOCK],(()=>Promise.all([(0,u.getChatTable)().remove(e.toString()),(0,c.default)(e),v(e)]))).then((()=>({status:200,_duplicate:!1}))).catch((()=>{throw __LOG__(4,!0,new Error,!0)(_()),SEND_LOGS("failed to send conversation delete"),new Error("get storage or update chat/label-assoc failed")})))}else r=o.default.sendConversationDelete(e,t);return r};var s=r(a(19976)),i=r(a(52954)),n=r(a(18120)),o=r(a(76022)),l=a(77993),d=a(75459),u=a(11008),c=r(a(29146)),h=a(98538),f=a(63504),p=a(74108),m=a(61392);function _(){var e=(0,s.default)(["get storage or update chat/label-assoc failed"]);return _=function(){return e},e}function v(){return g.apply(this,arguments)}function g(){return(g=(0,i.default)((function*(e){if((0,d.canEditLabelAssociation)()){var t=yield(0,p.queryLocalLabelAssociation)([{associationId:e.toString(),type:h.LabelAssociationType.Jid}]);return(0,f.editLabelAssociationMD)(t.map((({labelId:e})=>({id:e,type:"remove"}))),[{labelAssociationType:h.LabelAssociationType.Jid,modelId:e.toString(),mutationIndexSegments:[e.toString({legacy:!0})]}])}}))).apply(this,arguments)}},63789:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{wid:t}=e;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var a=s.default.get(t);return a?Promise.resolve(a):(0,n.default)(e)}return s.default.find(t)};var s=r(a(43334)),i=r(a(18120)),n=r(a(95361))},50015:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.setPin=function(e,t,a){var r;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var c=void 0!==t&&0!==t,h=(0,l.unixTimeMs)(),f=d.default.getPinMutation(h,c,e,t);c||u.default.addUnsetActionCount(1),(r=(0,o.lockForSync)(["chat"],[f],(([a])=>a.merge(e.toString(),{pin:t}))).then((()=>({status:200,_duplicate:null}))))||(r=Promise.reject(new Error("Should not reach here")))}else r=n.default.sendConversationPin(e,t,a).then((e=>{if(200!==e.status)throw new s.ServerStatusCodeError(e.status);return e}));return r};var s=a(19741),i=r(a(18120)),n=r(a(76022)),o=a(61392),l=a(71684),d=r(a(13309)),u=r(a(70546))},21552:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var a=e.toString();(t=(0,o.getParticipantTable)().equals(["participants"],a).then((e=>e.map((e=>(0,l.createWid)(e.groupId))))))||(t=Promise.reject(new Error("Should not reach here")))}else t=n.default.commonGroupsFind(e).then((e=>{if(200!==e.status)throw new s.ServerStatusCodeError(e.status);return e.groups}));return t};var s=a(19741),i=r(a(18120)),n=r(a(76022)),o=a(11008),l=a(75637)},29697:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroupInviteCode=function(e){var t;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(t=(0,o.queryGroupInviteCode)(e).then((e=>e.code))))return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=n.default.groupInviteCode(e).then((e=>200===e.status?e.code:Promise.reject(new s.ServerStatusCodeError(e.status))));return t},t.sendRevokeGroupInviteCode=function(e){var t;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(t=(0,o.revokeGroupInviteCode)(e).then((e=>e.code))))return Promise.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else t=n.default.revokeGroupInvite(e).then((e=>200===e.status?e.code:Promise.reject(new s.ServerStatusCodeError(e.status))));return t},t.sendJoinGroupViaInvite=function(e){var t;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){if(!(t=(0,o.joinGroupViaInvite)(e).then((e=>e.gid))))return Promise.reject(new Error("joinGroupViaInvite: not supported when not build with MD_BACKEND"))}else t=n.default.acceptGroupInvite(e).then((e=>200===e.status?e.gid:Promise.reject(new s.ServerStatusCodeError(e.status))));return t};var s=a(19741),i=r(a(18120)),n=r(a(76022)),o=a(6556)},88011:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetGroupSubject=function(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(a=(0,l.setGroupSubject)(e,t).then((()=>({_duplicate:null})))))return Promise.reject(new Error("sendSetGroupSubject: not supported when not build with MD_BACKEND"))}else a=o.default.changeSubject(e,t).then((e=>200!==e.status?Promise.reject(new i.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return a},t.sendSetGroupDescription=function(e,t,a,r){var s;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(s=(0,l.setGroupDescription)(e,t,a,r).then((()=>({_duplicate:!1})))))return Promise.reject(new Error("sendSetGroupDescription: not supported when not build with MD_BACKEND"))}else s=o.default.setGroupDescription(e,t,a,r).then((e=>200!==e.status?Promise.reject(new i.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return s},t.sendSetGroupProperty=function(e,t,a){var r;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(r=(0,l.setGroupProperty)(e,t,a).then((()=>({_duplicate:!1})))))return Promise.reject(new Error("sendSetGroupProperty: not supported when not build with MD_BACKEND"))}else r=(r=t===s.default.GROUP_SETTING_TYPE.EPHEMERAL?o.default.setGroupEphemeralDuration(e,a):o.default.setGroupProperty(e,t,Boolean(a))).then((e=>200!==e.status?Promise.reject(new i.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}));return r};var s=r(a(50935)),i=a(19741),n=r(a(18120)),o=r(a(76022)),l=a(55148)},77021:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.supportsFeature(s.default.F.MD_BACKEND)?((0,n.default)(e,e.chat.id),Promise.resolve()):i.default.sendMessagePlayed(e.id).then((()=>{}))};var s=r(a(18120)),i=r(a(76022)),n=r(a(77766))},63928:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,a,r){var n;s.default.supportsFeature(s.default.F.MD_BACKEND)?(n=(0,o.default)(e,t,a,r))||(n=Promise.reject(new Error("md:queryOrder: should not reach here"))):n=i.default.queryOrder(e,t,a,r);return n},t.createOrder=function(e,t){var a;s.default.supportsFeature(s.default.F.MD_BACKEND)?(a=(0,n.default)(e,t))||(a=Promise.reject(new Error("Should not reach here"))):a=i.default.createOrder(e.user,t);return a};var s=r(a(18120)),i=r(a(76022)),n=r(a(24860)),o=r(a(22165))},90920:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCtwaContextData=function(e){var t,{phone:a,sourceUrl:r,context:o}=e;if(!a||!r||!o)return Promise.reject(new Error("Invalid params passed to fetchCtwaContextData"));s.default.supportsFeature(s.default.F.MD_BACKEND)?(t=(0,n.default)(a,o,r))||(t=Promise.reject(new Error("Should not reach fetchCtwaContextData MD"))):t=i.default.queryCtwaContext(a,o,r);return t};var s=r(a(18120)),i=r(a(76022)),n=r(a(834))},75780:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(t){var a=s.default.gadd(e);(0,o.updateVerifiedInfo)(a,t.verifiedName)}}else l.default.queryVname(e).catchType(i.WebdDrop,(()=>{}))};var s=r(a(7470)),i=a(19741),n=r(a(18120)),o=a(40690),l=r(a(76022))},92436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVDeviceStatusCode=t.AVDeviceStatusContext=t.AVDeviceType=void 0;t.AVDeviceType={AudioInput:0,AudioOutput:1,Video:2,NotIdentified:3};t.AVDeviceStatusContext={DeviceSetup:0,DeviceMidstream:1,DeviceSelection:2,DeviceStop:3,DeviceOther:4};t.AVDeviceStatusCode={DeviceSuccess:0,FailureNonDevice:1,VideoDeviceNotFound:2,VideoDeviceUnsupportedCapability:3,VideoDeviceUnusable:4,VideoDeviceInUse:5,VideoDeviceUnauthorized:6,VideoDeviceTimeout:7,VideoDeviceOther:127,AudioCaptureDeviceNotFound:128,AudioPlaybackDeviceNotFound:129,AudioDeviceNotFound:130,AudioCaptureDeviceUnusable:131,AudioPlaybackDeviceUnusable:132,AudioDeviceUnusable:133,AudioCaptureDeviceInUse:134,AudioPlaybackDeviceInUse:135,AudioDeviceInUse:136,AudioCaptureDeviceUnauthorized:137,AudioPlaybackDeviceUnauthorized:138,AudioDeviceUnauthorized:139,AudioCaptureDeviceTimeout:140,AudioPlaybackDeviceTimeout:141,AudioDeviceTimeout:142,AudioCaptureDeviceOther:253,AudioPlaybackDeviceOther:254,AudioDeviceOther:255}},97430:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(92436);function s(e){return{uid:e.uid,name:e.name,deviceType:Number(e.deviceType),isConnected:Boolean(e.connected),isSelected:Boolean(e.isSelected),isSystemDefault:Boolean(e.isDefault)}}function i(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSystemDefault&&e.deviceType===t))}function n(e,t){return null==e?void 0:e.find((e=>e.isConnected&&e.isSelected&&e.deviceType===t))}var o={parseDeviceInfo:s,getAvailableDevices:function(e,t){var a;return null!==(a=null==e?void 0:e.filter((e=>e.deviceType===t&&e.isConnected)))&&void 0!==a?a:[]},getSanitizedDevices:function(e){var t=null==e?void 0:e.map((e=>s(e))),a=null==t?void 0:t.filter((e=>e.deviceType!==r.AVDeviceType.NotIdentified&&e.isConnected));return null!=a?a:[]},deviceInfoComparator:function(e,t){return e.deviceType!==t.deviceType?e.deviceType-t.deviceType:e.isSystemDefault||t.isSystemDefault?e.isSystemDefault?-1:1:e.isConnected===t.isConnected?0:e.isConnected?-1:1},getSystemDefaultDevice:i,getSelectedDevice:n,getSelectedDeviceIdOrDefault:function(e,t){var a,r;return null!==(a=null===(r=n(e,t))||void 0===r?void 0:r.uid)&&void 0!==a?a:""},getSystemDefaultCamera:function(e){return i(e,r.AVDeviceType.Video)},getSystemDefaultMicrophone:function(e){return i(e,r.AVDeviceType.AudioInput)},getSystemDefaultSpeaker:function(e){return i(e,r.AVDeviceType.AudioOutput)},getDiff:function(e,t){return{added:t.filter((t=>!e.some((e=>e.uid===t.uid)))),removed:e.filter((e=>!t.some((t=>t.uid===e.uid))))}},DEFAULT_DEVICE_ID:""};t.default=o},6469:(e,t,a)=>{"use strict";var r=a(14859);t.y=function(e){e.setHandlers("msg_collection",{processMultipleMessages:({chatId:e,msgObjs:t,meta:a,chatMsgsCollection:r})=>n.default.processMultipleMessages(e,t,a,r),trigger({name:e,args:t}){n.default.trigger(e,t)},updateLastReceipt({wid:e,t}){n.default.updateLastReceipt(e,t)}}),e.setHandlers("contact_collection",{updatePushname({contactId:e,pushname:t}){var a=i.default.gadd(e);return a.pushname!==t&&(a.set({pushname:t}),!0)}}),e.setHandlers("chat_collection",{add:({things:e,options:t})=>s.default.add(e,t),trigger({name:e,args:t}){s.default.trigger(e,t)}}),e.setHandlers("status_v3_collection",{handleUpdate:({rawMsg:e,checksum:t,isMsgUpdate:a})=>l.default.handleUpdate(e,t,a)}),e.setHandlers("msg_info_collection",{updateInfo({id:e,from:t,to:a,ack:r,participant:s,t:i}){o.default.updateInfo(e,t,a,r,s,i)}})};var s=r(a(43334)),i=r(a(7470)),n=r(a(58885)),o=r(a(92313)),l=r(a(57185))},83005:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.trim().normalize("NFKD");if((0,i.numCodepoints)(t)>=s.default.FTS_MIN_CHARS)return!0;if(n.test(t))return!0;if(o.test(t))return!0;return!1};var s=r(a(50935)),i=a(86145),n=/(?!(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]))(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\uFE0E\uFE0F]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/,o=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD81B[\uDFF0\uDFF1]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/},52741:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(54146)),o=a(96645),l=r(a(40207));class d extends i.Component{constructor(e){super(e),this.refreshBlob=()=>{var e=this.blob;if(!e)throw new Error("Cannot call refreshBlob when the blob does not exist.");var t=new Blob([e],{type:e.type}),a=window.URL.createObjectURL(t);this.state.url&&window.URL.revokeObjectURL(this.state.url),this.setState({url:a})};var t=e.mediaData.filehash,a=n.default.has(t);!a&&e.mediaData.mediaStage===o.MEDIA_DATA_STAGE.RESOLVED&&e.downloadMedia&&e.downloadMedia();var r=a?this.createURL(t):null;this.state={url:r}}componentDidUpdate(){var e=this.props.mediaData.filehash;n.default.has(e)&&!this.state.url&&this.setState({url:this.createURL(e)})}componentWillUnmount(){this.state.url&&this.revokeURL(this.state.url)}createURL(e){var t=n.default.get(e);if(!t)throw new Error("Cannot call createURL when the blob does not exist.");this.blob=t;var a=new Blob([t],{type:t.type});return window.URL.createObjectURL(a)}revokeURL(e){window.URL.revokeObjectURL(e)}render(){return this.state.url?this.props.children(this.state.url):this.props.placeholderRenderer()}}d.CONCERNS={mediaData:["filehash","mediaStage"]},d.displayName="AnimatedStickerUrlProvider";var u=(0,l.default)(d,d.CONCERNS);t.default=class extends u{constructor(...e){super(...e),this.refreshBlob=()=>{this.getComponent().refreshBlob()}}}},94011:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(54146)),o=a(96645),l=r(a(40207));class d extends i.Component{constructor(e){super(e),this.state={blob:n.default.get(this.props.mediaData.filehash)},this.state.blob||e.mediaData.mediaStage!==o.MEDIA_DATA_STAGE.RESOLVED||e.downloadMedia()}componentDidUpdate(){if(!this.state.blob){var{filehash:e}=this.props.mediaData;n.default.has(e)&&this.setState({blob:n.default.get(e)})}}render(){var{blob:e}=this.state;return e?this.props.render(e):this.props.renderPlaceholder()}}d.CONCERNS={mediaData:["filehash","mediaStage"]},d.displayName="MediaBlobProvider";var u=(0,l.default)(d,d.CONCERNS);t.default=u},19125:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=a(64724),l=s(a(54146)),d=a(96645),u=s(a(94883)),c=s(a(40207));function h(){var e=(0,i.default)(["Blob missing for trimmed-filehash: "," with progressive stage: "," and mediaStage: ",""]);return h=function(){return e},e}class f extends n.Component{constructor(...e){super(...e),this.state={}}static getDerivedStateFromProps(e,t){var{renderProgressively:a}=e,{filehash:r,progressiveStage:s}=e.mediaData,i=t.stackedUrls||[],n=null!=s?(0,o.getProgressiveMediaCacheKey)(r,s):null;if(null!=n&&a){if(!e.renderProgressively)return null;if(n!==t.progressiveKey&&e.mediaData.mediaStage!==d.MEDIA_DATA_STAGE.RESOLVED){if(!l.default.has(n))return __LOG__(4,void 0,new Error,!0)(h(),r.slice(0,10),s,e.mediaData.mediaStage),SEND_LOGS("missing-progressive-blob"),null;t.url&&t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),l.default.increaseUsageCount(n);var u=l.default.getOrCreateURL(n);return{filehash:r,url:u,progressiveKey:n,stackedUrls:[...i,u]}}if(l.default.has(r)){var c=l.default.getOrCreateURL(r);return t.url===c?null:(l.default.increaseUsageCount(r),t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:c,progressiveKey:n,stackedUrls:[...i,c]})}return null}if(r!==t.filehash){if(e.downloadMedia&&e.downloadMedia(),t.url&&t.filehash&&l.default.decreaseUsageCount(t.filehash),l.default.has(r)){var f=l.default.getOrCreateURL(r);return t.url===f?null:(l.default.increaseUsageCount(r),t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:f,progressiveKey:n,stackedUrls:[...i,f]})}return{filehash:r}}if(l.default.has(r)){var p=l.default.getOrCreateURL(r);return t.url===p?null:(l.default.increaseUsageCount(r),t.progressiveKey&&l.default.decreaseUsageCount(t.progressiveKey),{filehash:r,url:p,progressiveKey:n,stackedUrls:[...i,p]})}return null}componentWillUnmount(){this.state.url&&(this.props.mediaData.mediaStage===d.MEDIA_DATA_STAGE.RESOLVED?l.default.decreaseUsageCount(this.state.filehash):this.state.progressiveKey&&l.default.decreaseUsageCount(this.state.progressiveKey))}render(){var{url:e,stackedUrls:t}=this.state,{renderProgressively:a}=this.props;return e?a?n.createElement("div",{className:u.default.container},n.createElement("div",{className:u.default.child},this.props.placeholderRenderer()),t.map((e=>n.createElement("div",{className:u.default.child,key:e},this.props.children(e))))):this.props.children(e):this.props.placeholderRenderer()}}f.CONCERNS={mediaData:["filehash","mediaStage","progressiveStage"]},f.displayName="MediaUrlProvider";var p=(0,c.default)(f,f.CONCERNS);t.default=p},17689:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(43322),o=r(a(79711)),l=r(a(9386)),d=r(a(17957));function u(e,t){o.default.openModal(i.createElement(l.default,{title:t,okText:d.default.t(1761),onOK:()=>o.default.closeModal()},i.createElement("div",null,e)))}var c={openModal:u,openUnblockModal:function(e){o.default.openModal(i.createElement(l.default,{okText:d.default.t(1407),onOK:()=>{(0,n.unblockContact)(e).catch((()=>{})),o.default.closeModal()},cancelText:d.default.t(1593),onCancel:()=>{o.default.closeModal()}},d.default.t(1549)))},soundPortErrorModal:function(){u(d.default.t(1522),d.default.t(1523))},videoPortErrorModal:function(){var e=a(59694).default;o.default.openModal(i.createElement(l.default,{title:d.default.t(1525),okText:d.default.t(1320),onOK:()=>{o.default.closeModal(),o.default.openModal(i.createElement(e,null))},cancelText:d.default.t(1593),onCancel:()=>{o.default.closeModal()}},i.createElement("div",null,d.default.t(1524))))}};t.default=c},89524:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);t.Z=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(44764)),l=s(a(79504)),d=s(a(79711)),u=s(a(7470)),c=s(a(17957)),h=r(a(17026)),f=r(a(75074)),p=s(a(43711)),m=s(a(17689)),_=a(35205),v=s(a(3111)),g=a(75637),E=s(a(18120));function S(){var e=(0,i.default)(["voip:checkIfCanStartCall expected contact to be provided"]);return S=function(){return e},e}function C(e){return{callId:e.call_id,peerJid:e.peer_jid,initialPeerJid:e.initial_peer_jid,creatorJid:e.creator_jid,callerStatus:Boolean(e.caller_status),callActiveTime:{sec:e.call_active_time.sec,msec:e.call_active_time.msec},callDuration:e.call_duration,audioDuration:e.audio_duration,videoDuration:e.video_duration,canInviteNewParticipant:p.default.isGroupCallEnabled()&&Boolean(e.can_invite_new_participant),canSwitchAudioVideo:Boolean(e.can_switch_audio_video),isGroupCall:Boolean(e.is_group_call),participantCount:e.participant_count,participants:e.participants.filter((e=>null!=e.jid)).map((e=>{var t=(0,g.createUserWid)(e.jid.user,e.jid.server);return{wid:t.toString(),userJid:t.toString({legacy:!0}),deviceRawJid:e.device_raw_jid,isMuted:Boolean(e.is_muted),isSelf:Boolean(e.is_self),isInterrupted:Boolean(e.is_interrupted),isBackgrounded:Boolean(e.is_backgrounded),orderId:e.order_id,videoOrientation:e.video_orientation,videoRenderStarted:Boolean(e.video_render_started),videoState:e.video_state,state:e.state}})),videoCaptureStarted:Boolean(e.video_capture_started),videoPreviewStarted:Boolean(e.video_preview_started),videoEnabled:Boolean(e.video_enabled),videoEnabledAtCallStart:Boolean(e.video_enabled_at_call_start),rotateVideo:Boolean(e.rotate_video)}}function y(e){return!l.default.activeCall&&!e.isContactBlocked&&h.default.displayInfo===h.StreamInfo.NORMAL}function b(e){if(e)return l.default.get(e)}var T={parseCallInfo:C,canStartCall:y,canStartVideoCall:function(e){return y(e)&&o.default.isVideoAvailable},isParticipantRequestingVideoUpgrade:function(e,t){var a=b(e);return!!(a&&a.callInfo&&a.callInfo.participants.length)&&!!a.callInfo.participants.find((e=>e.isSelf===t&&e.videoState===_.VideoState.VideoStateUpgradeRequest))},updateCallWithCallInfo:function(e){var t=e&&b(e.call_id);e&&t&&(t.callInfo=C(e))},callOfferNackToast:function(e,t,a,r){var s=t.map((e=>{var t=u.default.get(e);return t?t.shortName||t.name||t.displayName:(0,v.default)(e)})).join(c.default.t(619)),i=null;switch(e){case 401:i=c.default.t(1545);break;case 404:i=c.default.t(1548,{callee:s});break;case 405:i=c.default.t(1543,{callee:s});break;case 460:case 406:i=a?c.default.t(1550,{callee:s}):c.default.t(1547,{callee:s});break;case 426:i=a?c.default.t(1550,{callee:s}):c.default.t(1546,{callee:s});break;case 427:i=p.default.isGroupCallEnabled()?c.default.t(1530,{callee:s,_plural:t.length}):a?c.default.t(1566):c.default.t(1542);break;case 461:i=E.default.supportsFeature(E.default.F.MD_BACKEND)?r?c.default.t(1528):c.default.t(1544,{callee:s}):a?c.default.t(1566):c.default.t(1542);break;default:i=a?c.default.t(1566):c.default.t(1542)}i&&d.default.openToast(n.createElement(f.default,{msg:i,id:(0,f.genId)()}))},getCallFromCallId:b,checkIfCanStartCall:function(e){var t;if(!e.isGroup&&!e.contact)return __LOG__(4,void 0,new Error)(S()),!1;var a=!0;if(h.default.displayInfo!==h.StreamInfo.NORMAL)switch(a=!1,h.default.displayInfo){case h.StreamInfo.RESUMING:case h.StreamInfo.TIMEOUT:m.default.openModal(c.default.t(1538),c.default.t(1539));break;case h.StreamInfo.OFFLINE:case h.StreamInfo.OPENING:case h.StreamInfo.CONNECTING:default:m.default.openModal(c.default.t(1536),c.default.t(1537))}else!e.isGroup&&(null===(t=e.contact)||void 0===t?void 0:t.isContactBlocked)?(a=!1,m.default.openUnblockModal(e.contact)):l.default.activeCall?(a=!1,m.default.openModal(c.default.t(1526))):o.default.isMicrophoneAvailable?o.default.isSpeakerAvailable?e.isVideo&&!o.default.isVideoAvailable&&(a=!1,m.default.openModal(c.default.t(1532),c.default.t(1533))):(a=!1,m.default.openModal(c.default.t(1540),c.default.t(1541))):(a=!1,m.default.openModal(c.default.t(1534),c.default.t(1535)));return a},getGroupCallParticipantNameString:function(e,t){return e.length<=2?e.map((e=>t?e.contactShortName:e.contactName)).join(c.default.t(619)):e[0].contactName+" "+c.default.t(617)+c.default.t(1531,{count:e.length-1,_plural:e.length-1})}};t.Z=T},23062:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);t.j=void 0;var i=s(a(19976)),n=s(a(43334)),o=s(a(79711)),l=s(a(50935)),d=s(a(7470)),u=s(a(25353)),c=s(a(28267)),h=a(95595),f=s(a(40210)),p=s(a(58885)),m=a(86809),_=s(a(35920)),v=r(a(17026));function g(){var e=(0,i.default)(["One or more of the login timings was not logged: "]);return g=function(){return e},e}function E(){var e=(0,i.default)(["wam:Error comitting login event"]);return E=function(){return e},e}function S(){return Math.floor(window.performance.now())}class C extends c.default{constructor(){super(),this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},window.performance&&window.performance.now&&((0,h.knowsPhone)()?this.listenToOnce(o.default,"logout",this.init):this.init())}init(){this.timings.startSync=v.default.lastSyncStart,this.listenTo(v.default,"change:mode",this.changeStreamMode),this.listenTo(n.default,l.default.COLLECTION_HAS_SYNCED,this.onChatSync),this.listenTo(d.default,l.default.COLLECTION_HAS_SYNCED,this.onContactSync),this.listenTo(p.default,l.default.COLLECTION_HAS_SYNCED,this.onMsgSync),this.listenTo(p.default,"handle:msg_history",this.onMsgHistory)}changeStreamMode(){v.default.mode===v.StreamMode.SYNCING&&(this.timings.startSync=S(),this.data.webcPersistentLoginEnabled=(0,h.getRememberMe)()),v.default.mode===v.StreamMode.MAIN&&(this.timings.endSync=S(),this.maybeLogToWam())}onChatSync(e){null!=e.timing?this.data.webcSyncChatT=e.timing:this.timings.chatSync=S(),this.data.webcSyncChatCount=e.count,this.data.webcSyncChatSize=e.binarySize,this.maybeLogToWam()}onMsgSync(e){e&&(this.timings.msgSync=S(),this.data.webcSyncMessageCount+=e.count,this.data.webcSyncMessageSize+=e.binarySize),this.maybeLogToWam()}onContactSync(e){null!=e.timing?this.data.webcSyncContactT=e.timing:this.timings.contactSync=S(),this.data.webcSyncContactCount=e.count,this.data.webcSyncContactSize=e.binarySize,this.maybeLogToWam()}onMsgHistory(e){this.data.webcSyncMessageSize+=e.binarySize,this.data.webcSyncMessageCount+=e.count,null!=this.timings.msgSync&&(this.timings.msgSync=S())}maybeLogToWam(){var{contactSync:e,msgSync:t,chatSync:a}=this.timings,r=null!=a&&Number.isFinite(a||this.data.webcSyncChatT),s=null!=e&&Number.isFinite(e||this.data.webcSyncContactT),i=Number.isFinite(t);r&&s&&i&&(this._commitPromise||(this._commitPromise=(0,u.default)().then((e=>this._commitEvent(e))).catch((()=>{__LOG__(3)(E())})).finally((()=>this.reset()))))}_commitEvent(e){var{startSync:t,endSync:a,contactSync:r,msgSync:s,chatSync:i}=this.timings,n=_.default.initialDisplayDate;null!=n&&0!==n&&null!=t&&null!=a&&null!=s&&null!=i&&null!=r&&Number.isFinite(n)&&Number.isFinite(t)&&Number.isFinite(a)?(this.data.webcQrLoadT=n,this.data.webcQrCodes=_.default.get(),this.data.webcLoginT=t-n,this.data.webcSyncT=a-t,this.data.webcSyncMessageT=s-t,this.data.webcSyncChatT||(this.data.webcSyncChatT=i-t),this.data.webcSyncContactT||(this.data.webcSyncContactT=r-t),this.data.webcBrowserNetworkType=(0,m.getEffectiveNetworkType)(),e&&(this.data.webcBrowserStorageQuotaBytes=e.quota,this.data.webcBrowserStorageQuotaUsedBytes=e.usage),new f.default.WebcLogin(this.data).commit()):__LOG__(3)(g())}reset(){this.stopListening(),this.data={webcPersistentLoginEnabled:!1,webcQrCodes:0,webcSyncMessageCount:0,webcSyncMessageSize:0},this.timings={chatSync:void 0,contactSync:void 0,endSync:void 0,msgSync:void 0,startSync:void 0},this._commitPromise=void 0,this.listenToOnce(o.default,"logout",this.init)}}t.j=()=>new C},954:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(39329);t.default=class{constructor(e){this.ship=e=>{var t=this.bitmap;if(t){var a=Date.now();a>this.lastActiveInMS&&(this.bitmapLength=Math.min(64,Math.ceil(a/1e3-this.startTimeInSec)));var r={sessionId:this.sessionId,startTime:this.startTimeInSec,bitmap:t,bitmapLen:this.bitmapLength,sessionSeq:this.sequenceId,sessionCum:this.cumulativeBitsSet};(e||this.loggingCallback)(r),this.timer.cancel(),this.bitmap=null}},this.loggingCallback=e,this.timer=new r.ShiftTimer(this.ship),this._initSession(),this._initArray(Math.floor(Date.now()/1e3))}_initSession(){this.cumulativeBitsSet=0,this.sequenceId=-1,this.sessionId=Math.floor(2147483648*Math.random()).toString(36)}_initArray(e){this.startTimeInSec=e,this.lastActiveInMS=1e3*this.startTimeInSec,this.bitmap=new Int32Array(2),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1;this.timer.debounceAndCap(64e3,64e3)}_doUpdate(e){var t=e-this.startTimeInSec;this.bitmap&&(t<0||t>=64)&&this.ship(),this.bitmap?(this.bitmap[t>>5]|=1<<(31&t),this.bitmapLength=t+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=1e3*e):this._initArray(e)}update(e){e>=this.lastActiveInMS&&e-this.lastActiveInMS<1e3||this._doUpdate(Math.floor(e/1e3))}shipAndEndSession(e){this.ship(e),this._initSession()}}},85217:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(50935)),l=s(a(77771)),d=s(a(20642)),u=s(a(40210)),c=s(a(32510)),h=s(a(954));function f(){var e=(0,i.default)(["Invalid stashed time spent event"]);return f=function(){return e},e}function p(){var e=(0,i.default)(["Invalid stashed time spent event"]);return p=function(){return e},e}function m(){var e=(0,i.default)(["Time Spent Logger not started"]);return m=function(){return e},e}var _=[{source:window,name:"focus"},{source:document,name:"wheel"},{source:document,name:"keydown"},{source:document,name:"mouseover"},{source:document,name:"mousemove"},{source:document,name:"click"},{source:document,name:"scroll"}];class v extends n.Component{constructor(...e){super(...e),this.lastInform=Date.now(),this.lastPageX=-1,this.lastPageY=-1,this.bitArray=null,this.endSession=()=>{this.bitArray&&this.bitArray.shipAndEndSession()},this.handleRestore=()=>{var e=this.bitArray;e?(this.lastInform=Date.now(),e.update(this.lastInform)):__LOG__(3)(m())},this.handleEvent=e=>{var t=this.bitArray;if(t){if(e instanceof MouseEvent){if(e.pageX===this.lastPageX&&e.pageY===this.lastPageY&&"click"!==e.type)return;this.lastPageX=e.pageX,this.lastPageY=e.pageY}var a=Date.now(),r=a-this.lastInform;r>0?(this.lastInform=a,t.update(this.lastInform)):r<-5&&(this.lastInform=a)}},this.handleUnload=()=>{this.bitArray&&(this.bitArray.ship(this.stashLogs),this.bitArray=null)},this.shipLogs=e=>{var t=new u.default.UserActivity({userActivitySessionId:e.sessionId,userActivityStartTime:e.startTime,userActivityBitmapLen:e.bitmapLen,userActivityBitmapLow:e.bitmap[0],userActivitySessionSeq:e.sessionSeq,userActivitySessionCum:e.sessionCum});e.bitmapLen>32&&(t.userActivityBitmapHigh=e.bitmap[1]),t.commit()},this.stashLogs=e=>{for(var t="".concat(e.bitmap[0]),a=1;a<e.bitmap.length;++a)t+=":".concat(e.bitmap[a]);var r="".concat(e.sessionId,":").concat(e.sessionSeq,":").concat(e.sessionCum)+":".concat(e.startTime,":").concat(e.bitmapLen,"$").concat(t);l.default.permanentStorage.setItem(o.default.KEY_TIME_SPENT_EVENT,r)}}componentDidMount(){var e=l.default.permanentStorage.getItem(o.default.KEY_TIME_SPENT_EVENT);e&&(this.parseAndShipStashed(e),l.default.permanentStorage.removeItem(o.default.KEY_TIME_SPENT_EVENT));var t=this.props.listeners;this.bitArray=new h.default(this.shipLogs);var a=!c.default||{passive:!0,capture:!0};t.add(window,"beforeunload",this.handleUnload);for(var r=0;r<_.length;++r){var{source:s,name:i}=_[r];t.add(s,i,this.handleEvent,a)}}componentWillUnmount(){this.bitArray&&(this.bitArray.ship(),this.bitArray=null)}parseAndShipStashed(e){var[t,a,...r]=e.split("$");if(!r.length&&a)if(5===(t=t.split(":")).length){a=new Int32Array(a.split(":").map((e=>Number(e))));var s={sessionId:t[0],sessionSeq:Number(t[1]),sessionCum:Number(t[2]),startTime:Number(t[3]),bitmapLen:Number(t[4]),bitmap:a};this.shipLogs(s)}else __LOG__(3)(f());else __LOG__(3)(p())}render(){return null}}v.displayName="TimeSpentLogger";var g=(0,d.default)(v);t.default=g},21088:e=>{e.exports={Action:"keyboard_action",Event:"keyboard_event",Events:{LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out",ARCHIVE:"archived",MUTE:"muted",PIN:"pinned",READ:"read",READ_ONLY:"read_only",CHAT_KIND:"chat_kind",ZOOM:"zoom",LAUNCH:"launch",BATCH_RENDER:"batch_render"}}},80401:(e,t,a)=>{"use strict";t.Z=function(e){a(23062).j(),a(81063).yj();var t=a(58906).default,s=a(15118).default,i=a(99215).default,n=a(30734).default;t.supported&&s.on("change:tag",(e=>{var t=navigator.serviceWorker;t&&t.controller&&!e.tag&&n.request(t.controller,i.REMOVE_PP,e.id).catch((()=>{}))}));(0,a(76533).default)((0,r.getEmojiTypeFromPlatform)(e)),(0,a(19979).Z)();var o=a(35590);return{MainComponent:o.default,hasPending:o.hasPending,notificationBackend:a(4651),execApiCmd:a(29233).Z}};var r=a(38527)},84767:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=(0,o.addProductToCart)(e);switch(a.status){case o.AddToCartStatus.SUCCESS:!function(e,t){a=function(){var a=(0,i.default)((function*(){yield(0,o.showCart)(e.catalogWid.toString(),t),(0,u.logCartToastClick)(e.catalogWid.toString(),t)}));return function(){return a.apply(this,arguments)}}(),l.default.openToast(n.createElement(c.default,{action:{actionText:d.default.t(1164),onAction:()=>{a()}},duration:6e3,id:(0,c.genId)(),msg:d.default.t(1186)}));var a}(e,t),(0,u.logAddProductToCart)(e,t,a.newCount);break;case o.AddToCartStatus.QUANTITY_LIMIT_REACHED:l.default.openToast(n.createElement(c.default,{action:{onAction:()=>{},actionText:d.default.t(749),dismiss:!0,theme:"success"},duration:6e3,id:(0,c.genId)(),msg:d.default.t(422)}))}};var i=s(a(52954)),n=r(a(2784)),o=a(93774),l=s(a(79711)),d=s(a(17957)),u=a(49080),c=r(a(75074))},18392:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var i=s(a(58527)),n=s(a(72779)),o=r(a(2784)),l=s(a(78714)),d=s(a(17957)),u=s(a(22948)),c=s(a(82631));function h(e){var{className:t,onClick:a}=e,r={className:(0,n.default)(t,l.default.addToCartIcon),name:"add_shopping_cart",title:d.default.t(1185)};return null!=a?o.createElement(u.default,(0,i.default)({},r,{"aria-label":d.default.t(1185),onClick:a})):o.createElement(c.default,r)}h.displayName="AddToCartIcon"},49080:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logAddProductToCart=function(e,t,a){var r=d(e.catalogWid.toString(),"ACTION_CART_ADD_PRODUCT",{catalogSessionId:t,quantity:a});r&&r.commit()},t.logEditProduct=function(e,t,a){var r=d(e.catalogWid.toString(),"ACTION_CART_EDIT_PRODUCT",{catalogSessionId:t,quantity:a});r&&r.commit()},t.logDeleteProduct=function(e,t){var a=d(e.catalogWid.toString(),"ACTION_CART_DELETE_PRODUCT",{catalogSessionId:t});a&&a.commit()},t.logCartAbandon=function(e,t){var a=d(e,"ACTION_CART_ABANDON",{catalogSessionId:t});a&&a.commit()},t.getOnCartClickWithLog=function(e,t,a){return()=>{e(),function(e,t){var a=d(e,"ACTION_CART_ICON_CLICK",{catalogSessionId:t});a&&a.commit()}(t,a)}},t.logCartToastClick=function(e,t){var a=d(e,"ACTION_CART_SNACKBAR_CLICK",{catalogSessionId:t});a&&a.commit()},t.logCartListImpression=function(e,t){var a=d(e,"ACTION_CART_LIST_IMPRESSION",{catalogSessionId:t});a&&a.commit()};var s=r(a(19976)),i=r(a(70417)),n=a(95595),o=r(a(40210));function l(){var e=(0,s.default)(["getCartLogAction: unsupported log action - ",""]);return l=function(){return e},e}function d(e,t,a){var r=e===(0,n.getMeUser)().toString();return r&&void 0!==o.default.CATALOG_BIZ_ACTION[t]?new o.default.CatalogBiz((0,i.default)({catalogBizAction:o.default.CATALOG_BIZ_ACTION[t]},a)):r||void 0===o.default.CATALOG_VIEW_ACTION[t]?void __LOG__(3)(l(),t):new o.default.CatalogView((0,i.default)({catalogViewAction:o.default.CATALOG_VIEW_ACTION[t]},a))}},67790:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(30950)),o=r(a(67524)),l=r(a(44572)),d=r(a(96066)),u=r(a(43334)),c=r(a(79711)),h=r(a(50935)),f=a(90973),p=r(a(17957)),m=r(a(20642)),_=r(a(82631)),v=r(a(42097));class g extends i.PureComponent{constructor(e){super(e),this._updateUnreadArchivedCount=()=>{var e=u.default.filter((e=>e.archive&&(e.optimisticUnreadCount>0||e.optimisticUnreadCount===h.default.MARKED_AS_UNREAD))).length;this.setState({count:e})},this._archivedIcon=()=>i.createElement(f.FlexRow,{align:"center",justify:"center",className:n.default.archivedIcon},i.createElement(_.default,{name:"archived"})),this._unreadArchivedCount=()=>{var{count:e}=this.state;return 0===e?null:i.createElement("div",{className:n.default.unreadCountWrapper},i.createElement(v.default,{count:e,transparentBg:!0}))},this.state={count:0}}componentDidMount(){this.props.listeners.add(u.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",this._updateUnreadArchivedCount),this._updateUnreadArchivedCount()}render(){return i.createElement(i.Fragment,null,i.createElement(d.default,{image:this._archivedIcon(),primary:p.default.t(229),detail:this._unreadArchivedCount(),onClick:()=>{c.default.openDrawerLeft(i.createElement(o.default,null))},theme:"archive-panel"}),i.createElement(l.default,null))}}g.displayName="ArchivedEntryPoint";var E=(0,m.default)(g);t.default=E},90513:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(39329),n=s(a(2784)),o=r(a(39594)),l=r(a(79711)),d=r(a(52737)),u=r(a(50935)),c=a(35387),h=a(95585),f=r(a(18120)),p=s(a(45356)),m=r(a(20642)),_=r(a(40210)),v=r(a(85059)),g=r(a(11680)),E=r(a(7729)),S=r(a(93569)),C=r(a(72424)),y=r(a(40207)),b=s(a(17026)),T=r(a(2220)),M=r(a(77626)),N=r(a(74824));class I extends n.PureComponent{constructor(e){var t;super(e),this._showBatteryTimer=new i.ShiftTimer((()=>this._batteryUpdate(!1))),this._onDismissLowBatteryWarning=()=>{var e=this.state.lowBatteryWarning;e>0&&this.setState({lowBatteryWarning:-e})},this._showNotifyTimer=new i.ShiftTimer((e=>{this.setState({showNotify:e})})),this._onShowNotify=()=>{this._showNotifyTimer.onOrBefore(0,!1)},this._onShowNotifyDelay=()=>{this._showNotifyTimer.onOrBefore(u.default.NOTIFICATION_PROMPT_DELAY,!0)},this._onRequestPermissions=()=>{l.default.openModal(n.createElement(p.default,{messaging:p.Messaging.NOTIFICATIONS,onConfirm:A,onCancel:O,type:p.default.TYPE.GUIDE_ALLOW})),window.Notification.requestPermission((e=>{l.default.closeModal(),this.setState({notifyPermission:e})}))},this._shouldShowBanner=()=>f.default.supportsFeature(f.default.F.USER_NOTICE)&&g.default.shouldShowButterBar&&null!=g.default.noticeId&&null!=g.default.banner&&!1===g.default.blocking,this._handleNoticeBannerChange=()=>{this._shouldShowBanner()&&(this.state.bannerDisplayed||(new _.default.UserNotice({userNoticeId:g.default.noticeId,userNoticeContentVersion:g.default.policyVersion,userNoticeEvent:_.default.USER_NOTICE_EVENT.BANNER_APPEAR}).commit(),this.setState({bannerDisplayed:!0})))},this.handleNoticeIdChange=()=>{this.setState({bannerDisplayed:!1})},this._onDismissNotice=()=>{g.default.dismissButterBarNotice()};var a=d.default.battery<u.default.BATTERY_LOW_THRESHOLD_1?d.default.battery<u.default.BATTERY_LOW_THRESHOLD_2?2:1:0;this.state={lowBatteryWarning:d.default.plugged?0:a,notifyPermission:null===(t=window.Notification)||void 0===t?void 0:t.permission,showNotify:!1,bannerDisplayed:!1};var r=()=>{this._batteryUpdate(!0)};e.listeners.add(d.default,"change:plugged",r),e.listeners.add(d.default,"change:battery",r),e.listeners.add(g.default,"change:noticeId",this.handleNoticeIdChange),e.listeners.add(g.default,"change:banner change:blocking",this._handleNoticeBannerChange)}componentWillUnmount(){this._showNotifyTimer.cancel(),this._showBatteryTimer.cancel()}_batteryUpdate(e){var t=this.state.lowBatteryWarning;d.default.plugged||d.default.battery>u.default.BATTERY_LOW_THRESHOLD_1?0!==t&&this.setState({lowBatteryWarning:0}):d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_2?-2!==t&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):2!==t&&this.setState({lowBatteryWarning:2})):t>-1&&d.default.battery<=u.default.BATTERY_LOW_THRESHOLD_1&&(e?this._showBatteryTimer.onOrBefore(u.default.BATTERY_DELAY):1!==t&&this.setState({lowBatteryWarning:1}))}render(){return f.default.supportsFeature(f.default.F.MD_BACKEND)&&(b.default.displayInfo===b.StreamInfo.RESUMING||b.default.displayInfo===b.StreamInfo.TIMEOUT||this.state.lowBatteryWarning>0)?null:n.createElement(N.default,{transitionName:"butterbar",className:o.default.container},null,n.createElement(E.default,{shouldShow:this._shouldShowBanner(),banner:g.default.banner,theme:this.context.theme,onDismissNotice:0===C.default.greenAlertBannerDuration?null:this._onDismissNotice}),n.createElement(S.default,{displayInfo:b.default.displayInfo,needsUpdate:b.default.needsUpdate,needsManualDownload:!1,lowBatteryWarning:this.state.lowBatteryWarning,showNotify:this.state.showNotify,isMuted:this.props.mute.isMuted,notifyPermission:this.state.notifyPermission,onShowNotify:this._onShowNotify,onShowNotifyDelay:this._onShowNotifyDelay,onRequestPermissions:this._onRequestPermissions,onDismissLowBatteryWarning:this._onDismissLowBatteryWarning}))}}I.CONCERNS={stream:["displayInfo","needsUpdate"],notice:["noticeId","blocking","banner","shouldShowButterBar"],mute:["isMuted"]},I.contextType=T.default,I.displayName="ButterBarClass";var P=(0,m.default)((0,y.default)(I,I.CONCERNS));function A(){l.default.closeModal()}function O(){switch(M.default.browser){case u.default.BROWSER_TYPE.CHROME:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)());case u.default.BROWSER_TYPE.FIREFOX:return(0,c.openExternalLink)((0,h.getNotificationFirefoxFaqUrl)());case u.default.BROWSER_TYPE.SAFARI:return(0,c.openExternalLink)((0,h.getNotificationSafariFaqUrl)());case u.default.BROWSER_TYPE.OPERA:return(0,c.openExternalLink)((0,h.getNotificationOperaFaqUrl)());case u.default.BROWSER_TYPE.EDGE:return(0,c.openExternalLink)((0,h.getNotificationEdgeFaqUrl)());default:return(0,c.openExternalLink)((0,h.getNotificationChromeFaqUrl)())}}t.default=()=>n.createElement(P,{stream:b.default,notice:g.default,mute:v.default.globalMute()})},20301:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(a(2784)),n=r(a(84621)),o=r(a(82631));function l(e){return i.createElement("span",{className:n.default.actionLink},i.createElement("span",{className:n.default.actionText,onClick:e.action},e.children),i.createElement(o.default,{className:n.default.chevron,directional:!0,name:"chevron-right-text"}))}l.displayName="ActionLink"},12588:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var i=s(a(72779)),n=r(a(2784)),o=s(a(51421)),l=s(a(52737)),d=a(62436),u=a(90973),c=s(a(17957)),h=s(a(22948)),f=s(a(82631));function p(e){var{action:t=null,onDismiss:a,type:r}=e,s=(0,i.default)(o.default.butterbar,{[o.default.action]:t,[o.default.computer]:"computer"===r,[o.default.phone]:"phone"===r,[o.default.notification]:"notification"===r,[o.default.battery]:"battery"===r,[o.default.update]:"update"===r,[o.default.notice]:"notice"===r&&!l.default.isSMB,[o.default.noticeSmb]:"notice"===r&&l.default.isSMB,[o.default.fatal]:"fatal"===r}),p={computer:"alert-computer",phone:"alert-phone",notification:"alert-notification",battery:"alert-battery",update:"alert-update",notice:"alert-notice",fatal:"alert"},m=a?n.createElement("div",{className:o.default.controls},n.createElement(h.default,{className:o.default.controlsIcon,"aria-label":c.default.t(1604),name:"x",onClick:a})):null,_=e.title?n.createElement("div",{className:o.default.title},e.title):null,v=n.createElement(f.default,{name:p[e.type],"aria-label":e.iconDescription}),g=e.iconSvg&&(0,d.sanitizeNoticeSVG)(e.iconSvg),E=g?n.createElement("span",{"aria-label":e.iconDescription,dangerouslySetInnerHTML:{__html:g}}):v,S="notice"===e.type?n.createElement(u.FlexRow,{className:o.default.noticeSvgWrapper,align:"center",justify:"center"},E):"fatal"===e.type?n.createElement(u.FlexRow,{className:o.default.fatalSvgWrapper,align:"center",justify:"center"},n.createElement(f.default,{name:p[e.type]})):n.createElement(f.default,{name:p[e.type]});return n.createElement("div",{className:o.default.wrapper},n.createElement("div",{className:s,onClick:t},n.createElement("div",{className:o.default.icon},S),n.createElement("div",{className:o.default.body},_,e.text?"notice"===e.type?n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,d.sanitizeNoticeText)(e.text)},className:o.default.text}):n.createElement("div",{className:o.default.text},e.text):null),m))}p.displayName="BB"},7729:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s(a(12588)),n=r(a(2784));function o({shouldShow:e,banner:t,theme:a,onDismissNotice:r}){if(!e)return null;if(!(null==t?void 0:t.text))return null;var s,{iconDescription:o,text:l,iconSvg:d}=t;return d&&(s="light"===a?d.light:d.dark),n.createElement(i.default,{type:"notice",key:"noticebbar",text:l,iconSvg:s,iconDescription:null!=o?o:"",onDismiss:r})}o.displayName="NoticeButterBar"},73113:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(39329),n=s(a(2784)),o=r(a(20301)),l=r(a(12588)),d=r(a(17957)),u=r(a(40210)),c=s(a(17026)),h=r(a(17744)),f=r(a(79345)),p=r(a(12767));class m extends n.PureComponent{constructor(...e){super(...e),this.state={allowReconnect:!0},this.reconnect=()=>{var e=f.default.numSocketsAttempted+1;p.default.poke(),(0,h.default)(c.default,"change:displayInfo",(()=>c.default.displayInfo===c.StreamInfo.NORMAL)).then((()=>{new u.default.WebcManualWebsocketAttempt({webcManualWebsocketAttemptSuccessful:f.default.numSocketsAttempted===e}).commit()})),this.setState({allowReconnect:!1}),this._reconnectTimeoutTimer.onOrAfter(3e3)},this._reconnectTimeoutTimer=new i.ShiftTimer((()=>{this.setState({allowReconnect:!0})}))}componentWillUnmount(){this._reconnectTimeoutTimer.cancel()}render(){var e,t;return this.state.allowReconnect?(e=n.createElement(n.Fragment,null,"".concat(d.default.t(930)," "),n.createElement(o.default,{action:this.reconnect},d.default.t(1226))),t=d.default.t(511)):(e=null,t=d.default.t(533)),n.createElement(l.default,{type:"computer",title:t,text:e})}}t.default=m,m.displayName="Offline"},93569:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var i=s(a(2784)),n=r(a(20301)),o=r(a(12588)),l=r(a(50935)),d=a(35387),u=a(95585),c=r(a(17957)),h=r(a(73113)),f=r(a(89797)),p=a(17026),m=r(a(78135));function _({displayInfo:e,needsUpdate:t,needsManualDownload:a,lowBatteryWarning:r,showNotify:s,isMuted:d,notifyPermission:u,onShowNotify:m,onShowNotifyDelay:_,onRequestPermissions:E,onDismissLowBatteryWarning:S}){var C=null;switch(e){case p.StreamInfo.OFFLINE:C=i.createElement(h.default,{key:"bbar"});break;case p.StreamInfo.OPENING:case p.StreamInfo.CONNECTING:C=i.createElement(f.default,{key:"bbar"});break;case p.StreamInfo.NORMAL:break;case p.StreamInfo.RESUMING:case p.StreamInfo.TIMEOUT:var y=i.createElement(i.Fragment,null,c.default.t(931)," ",i.createElement(n.default,{action:g},c.default.t(875)));C=i.createElement(o.default,{type:"phone",key:"bbar",title:c.default.t(1175),text:y})}if(!C&&r>0&&(C=i.createElement(o.default,{type:"battery",key:"bbar",title:c.default.t(1173),text:c.default.t(484),dismissable:!0,onDismiss:S})),!C&&t){var b=i.createElement(n.default,null,c.default.t(505));C=i.createElement(o.default,{type:"update",key:"bbar",title:c.default.t(1431),text:b,action:v})}if(C)s&&m();else if(s){if(window.Notification&&u===l.default.PERMISSION_DEFAULT&&!d){var T=i.createElement(n.default,null,c.default.t(616));C=i.createElement(o.default,{type:"notification",key:"bbar",title:c.default.t(727),text:T,action:E})}}else _();return C}function v(){m.default.restart()}function g(){(0,d.openExternalLink)((0,u.getCannotConnectFaqUrl)())}_.displayName="PrimaryButterBar"},89797:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(39329),n=s(a(19034)),o=r(a(2784)),l=s(a(20301)),d=s(a(12588)),u=s(a(17957)),c=s(a(20642)),h=r(a(17026)),f=s(a(12767));class p extends o.Component{constructor(...e){super(...e),this.state={takingTooLong:!1,didShowSubtitle:!1},this._timeoutTimer=new i.ShiftTimer((()=>{this.setState({takingTooLong:!0,didShowSubtitle:!0})})),this.onProgress=()=>{this._rerenderTimer.cancel(),this._timeoutTimer.onOrBefore(3e3),this.setState({takingTooLong:!1})},this._rerenderTimer=new i.ShiftTimer((()=>{this.forceUpdate()})),this.retry=()=>{f.default.poke(),this.onProgress()}}componentDidMount(){this.props.listeners.add(f.default,"change:state",this.onProgress),this.props.listeners.add(f.default,"change:retryTimestamp",this.onProgress),this._timeoutTimer.onOrBefore(3e3)}componentWillUnmount(){this._timeoutTimer.cancel(),this._rerenderTimer.cancel()}render(){var e,t;if(h.default.displayInfo===h.StreamInfo.OPENING)e=u.default.t(532);else{if(h.default.displayInfo!==h.StreamInfo.CONNECTING)return null;e=u.default.t(533)}if(this.state.takingTooLong){this._rerenderTimer.onOrAfter(1e3);var a=f.default.retryTimestamp-Date.now();if(isNaN(a)||a<1)a=u.default.t(1260),setTimeout((()=>{f.default.poke()}),0);else if(a<6e4){var r=Math.ceil(a/1e3);a=u.default.t(1262,{number:r,_plural:r})}else a=u.default.t(1261,{duration:n.default.duration(a).humanize()});t=o.createElement(o.Fragment,null,a," ",o.createElement(l.default,{action:this.retry},u.default.t(1258)))}else t=this.state.didShowSubtitle?o.createElement("span",null,u.default.t(1260)):null;return o.createElement(d.default,{type:"computer",title:e,text:t})}}p.displayName="ResumeClass";var m=(0,c.default)(p);t.default=m},73549:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(19475)),d=s(a(96066)),u=s(a(91581)),c=s(a(38147)),h=s(a(6660)),f=a(62902),p=s(a(72509)),m=s(a(50868)),_=s(a(17957)),v=s(a(61941)),g=s(a(2825)),E=s(a(82631)),S=s(a(74824));class C extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1,contextMenu:!1,forceContextMenu:!1},this._setRefContextMenu=e=>{this._refContextMenu=e},this._setRefCellFrameDiv=e=>{this._refCellFrameDiv=e},this.getCellFrameDivRef=()=>this._refCellFrameDiv,this.indicateFocus=()=>{c.default.maybeIndicateFocus(this._refCellFrameDiv,l.default.focusAnimation)},this._handleMenuMouseDown=e=>{e.stopPropagation()},this._handleMenuClick=e=>{e.stopPropagation();var{contextEnabled:t,onContext:a}=this.props,{contextMenu:r}=this.state;(t()||r)&&(e.preventDefault(),a&&a({anchor:e.target}))},this._handleKeyboardActivation=e=>{if((0,p.default)(e)){e.stopPropagation();var{contextEnabled:t,onContext:a}=this.props,{contextMenu:r}=this.state;if(!t()&&!r)return;a&&a({anchor:this._refContextMenu})}},this.onContextMenu=e=>{var{contextEnabled:t,onContext:a}=this.props;t()&&(e.stopPropagation(),e.preventDefault(),a&&a({event:e}))},this.openContextMenu=()=>{this.props.contextEnabled()&&this.setState({contextMenu:!0},(()=>{if(!this._refContextMenu)throw new Error("Context ref not set");var e=new MouseEvent("mousedown",{bubbles:!0});(0,v.default)(this._refContextMenu,"this._refContextMenu").dispatchEvent(e)}))},this.focusOnContextMenuButton=()=>{(this._refContextMenu||this.props.contextEnabled())&&h.default.focus(this._refContextMenu)},this.mouseOver=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.state.contextMenu||!this.props.contextEnabled()||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this._onFocusContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.removeAttribute("aria-hidden")},this._onBlurContextMenuButton=()=>{var e;null===(e=this._refContextMenu)||void 0===e||e.setAttribute("aria-hidden","true")}}static getDerivedStateFromProps(e,t){return t.forceContextMenu&&t.contextMenu&&!e.contextMenu?{contextMenu:!1,forceContextMenu:e.contextMenu}:{forceContextMenu:e.contextMenu}}isKeyboardUser(){return this.context}render(){var e=this.state.contextMenu,t=this.isKeyboardUser()&&this.props.active&&this.props.contextEnabled(),a=e||this.state.hover||t,r=(0,i.default)(this.props.className,{hover:a}),s="string"==typeof this.props.primary?n.createElement(u.default,{text:this.props.primary,direction:"auto",formatters:f.Configuration.Search({terms:this.props.searchText?[this.props.searchText]:[]}),titlify:!0,ellipsify:!0}):this.props.primary,c=null,h=null;if(null!=this.props.pendingAction&&this.props.pendingAction>0)h=n.createElement("div",{className:l.default.btnContext},n.createElement(g.default,{size:18,stroke:6,color:"highlight"}));else if(a){var p=(0,i.default)(l.default.btnContext,{[l.default.product]:"product"===this.props.theme});c=n.createElement("button",{"data-a8n":o.default.key("context-btn"),className:p,key:"icon-context",ref:this._setRefContextMenu,onMouseDown:this._handleMenuMouseDown,onClick:this._handleMenuClick,"aria-label":_.default.t(4),onKeyDown:this._handleKeyboardActivation,onFocus:this._onFocusContextMenuButton,onBlur:this._onBlurContextMenuButton,"aria-hidden":!0},n.createElement(E.default,{name:"down"}))}var m,v,C=n.createElement(S.default,{transitionName:"fade"},h),y=n.createElement(S.default,{transitionName:"pop-fast-chat"},a?c:null);return null!=this.props.secondary?(m=this.props.primaryDetail,v=[n.createElement(n.Fragment,{key:"prop"},this.props.secondaryDetail),n.createElement(n.Fragment,{key:"spinner"},C),n.createElement(n.Fragment,{key:"button"},y)]):m=[n.createElement(n.Fragment,{key:"prop"},this.props.primaryDetail),n.createElement(n.Fragment,{key:"spinner"},C),n.createElement(n.Fragment,{key:"button"},y)],n.createElement(d.default,{setDivRef:this._setRefCellFrameDiv,image:this.props.image,customImage:this.props.customImage,className:r,unread:this.props.unread,active:this.props.active,idle:this.props.idle,isMuted:this.props.isMuted,dragging:this.props.dragging,theme:this.props.theme,primary:s,primaryDetail:m,secondary:this.props.secondary,secondaryDetail:v,detail:this.props.detail,onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onContextMenu:this.props.contextEnabled()?this.onContextMenu:null,onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null})}}t.default=C,C.contextType=m.default,C.displayName="Cell"},13886:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=t.Mode=void 0;var i=s(a(19976)),n=r(a(2784)),o=a(60474),l=s(a(26387)),d=s(a(73549)),u=s(a(46774)),c=s(a(43334)),h=s(a(43433)),f=s(a(79711)),p=s(a(9386)),m=r(a(52737)),_=s(a(50935)),v=a(65219),g=s(a(28515)),E=s(a(24211)),S=s(a(46478)),C=a(62436),y=s(a(71201)),b=a(19741),T=a(555),M=r(a(96452)),N=s(a(38147)),I=s(a(6660)),P=s(a(18120)),A=a(75459),O=s(a(99922)),D=a(86038),w=s(a(44343)),R=s(a(35239)),k=a(78986),L=a(13735),x=s(a(17957)),F=s(a(20642)),B=s(a(26432)),G=s(a(27862)),U=s(a(40210)),j=(s(a(85059)),s(a(60733))),V=s(a(60949)),H=s(a(59477)),W=a(4859),Y=s(a(2734)),K=s(a(40207)),q=a(64658),z=s(a(67134)),Q=s(a(74223)),X=s(a(17693)),J=s(a(63498)),Z=s(a(37698)),$=s(a(68384));function ee(){var e=(0,i.default)(["Chat: prop searchQuery is undefined"]);return ee=function(){return e},e}var te={LAST:"LAST",INFO:"INFO"};t.Mode=te;class ae extends n.PureComponent{static getDerivedStateFromProps(e,t){var a={},r=e.active&&e.active.value instanceof u.default&&$.default.equals(e.active.value.id,e.chat.id);e.active&&e.active.value instanceof $.default&&$.default.isGroup(e.active.value)&&(r=$.default.equals(e.active.value,e.chat.id)),t.active!==r&&(a.active=r);var s=e.searchQuery?e.searchQuery.trimmed:"";t.searchText!==s&&(a.searchText=s);var i=e.chat.id;return t.chatId!==i&&(a.chatId=i,a.unreadCount=e.chat.optimisticUnreadCount),a}constructor(e){super(e),this._hoverCounter=0,this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,dragging:!1,searchText:"",contextMenu:null,chatId:null,unreadCount:0},this._setUnreadCount=()=>{var e=this.props.chat.optimisticUnreadCount;e!==this.state.unreadCount&&this.setState({unreadCount:e})},this._prefetchGroupMetadata=()=>{var{chat:e}=this.props;P.default.supportsFeature(P.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&O.default.find(e.id).catchTypes(b.WebdDrop,M.ProtoVersionUndefined,(()=>{}))},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)(ee())},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(I.default.focus(a),t&&(0,C.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.contextEnabled=()=>{var{noContext:e}=this.props;return!e},this.editLabel=()=>{var{selectableState:e,multiSelection:t}=this.props;!this.props.searchQuery||this.props.searchQuery.isEmptyQuery?e&&t&&(e.setSelectable(!0),t.setVal((0,q.unproxy)(this.props.chat))):this.addOrRemoveLabelOnSelected()},this.addOrRemoveLabelOnSelected=()=>{var e=[(0,q.unproxy)(this.props.chat)];f.default.openModal(n.createElement(B.default,{modelsToUpdate:e}))},this.onMenu=e=>{if(this.state.contextMenu)this.setState({contextMenu:null});else{var t=this.props.chat,a=[];t.canArchive()&&a.push(n.createElement(l.default,{key:"archive",onArchive:this.onArchive,chat:(0,q.unproxy)(t)})),t.mute.canMute()&&(t.archive&&this.props.hideMuteOption||a.push(n.createElement(j.default,{key:"mute",onMute:this.onMute,mute:t.mute,chat:t,settings:Y.default}))),a.push(n.createElement(E.default,{key:"delete",onDeleteOrExit:this.onDeleteOrExit,chat:(0,q.unproxy)(t)})),m.default.platform===m.PLATFORMS.IPHONE&&t.isBroadcast||!t.canPin()||a.push(n.createElement(H.default,{key:"pin",onPinOrUnpin:this._onPinOrUnpin,chat:t})),(0,A.canEditLabelAssociation)()&&a.push(n.createElement(y.default,{a8n:"mi-edit-label",action:this.editLabel,key:"EditLabel"},x.default.t(605))),t.canUnread&&a.push(n.createElement(G.default,{key:"mark_unread",onMarkUnread:this.onMarkUnread,chat:(0,q.unproxy)(t)})),e.event&&e.event.persist(),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})}},this._removeContext=()=>{this.setState({contextMenu:null})},this.onMute=e=>{f.default.muteChat((0,q.unproxy)(this.props.chat),e)},this.onArchive=e=>{f.default.archiveChat((0,q.unproxy)(this.props.chat),e)},this.onDeleteOrExit=()=>{f.default.deleteOrExitChat((0,q.unproxy)(this.props.chat),this)},this._onPinOrUnpin=e=>{!e||c.default.filter((e=>e.pin)).length<3?f.default.pinChat((0,q.unproxy)(this.props.chat),e):f.default.openModal(n.createElement(p.default,{onOK:()=>f.default.closeModal(),okText:x.default.t(1761)},x.default.t(77)))},this.onMarkUnread=e=>{f.default.markChatUnread((0,q.unproxy)(this.props.chat),e)},this.onClick=e=>{var{onClick:t,chat:a}=this.props;t&&t(e,(0,q.unproxy)(a))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),N.default.shouldIndicateFocus(),this.onClick(e)},this.onDragEnter=e=>{this.props.chat.canSend&&(new g.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(0===this._hoverCounter&&this.setState({dragging:!0}),this._hoverCounter+=1))},this.onDragLeave=e=>{this.props.chat.canSend&&(new g.default(e.dataTransfer).hasType(_.default.DRAG_TYPE_FILE)&&(this._hoverCounter-=1,0===this._hoverCounter&&this.setState({dragging:!1})))},this.onDrop=e=>{var{chat:t}=this.props;if(t.canSend){this.setState({dragging:!1});var a=new g.default(e.dataTransfer);(a.hasType(_.default.DRAG_TYPE_FILE)||a.hasType("text/uri-list")||a.hasType("text/html"))&&(0,T.getFiles)(e).then((e=>{f.default.openChatFromUnread(t).then((a=>{a&&f.default.attachMediaDrawer({chat:t,attachments:e.map((e=>({file:e}))),fileOrigin:U.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY})}))})).catchType(M.MediaDragDropError,(e=>{f.default.openChatFromUnread(t).then((a=>{a&&e.src&&f.default.pasteChatTextInput(t,e.src)}))}))}},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()},this._toggleFocusInContact=()=>{this._hotKeysRef&&this._hotKeysRef!==document.activeElement?I.default.focus(this._hotKeysRef):this._cellRef&&this._cellRef.focusOnContextMenuButton()},this._handlers={enter:this.onKeyboardActivation,space:this.onKeyboardActivation,right:this._toggleFocusInContact,left:this._toggleFocusInContact},this._throttledSetUnreadCount=this.props.throttle(this._setUnreadCount,0,{leading:!1,tailing:!0})}componentDidMount(){var{chat:e}=this.props;this.initListeners(this.props),P.default.supportsFeature(P.default.F.GROUPS_V_3)&&e.isGroup&&e.groupMetadata&&e.groupMetadata.stale&&k.UIBusyTasks.enqueue(this._prefetchGroupMetadata)}componentDidUpdate(e){var{chat:t}=this.props;t!==e.chat&&P.default.supportsFeature(P.default.F.GROUPS_V_3)&&t.isGroup&&t.groupMetadata&&t.groupMetadata.stale&&k.UIBusyTasks.enqueue(this._prefetchGroupMetadata),t.optimisticUnreadCount!==this.state.unreadCount&&this._throttledSetUnreadCount(),this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,chat:s,searchQuery:i,frequent:n}=e;t&&t.searchQuery&&t.searchQuery!==i&&a.remove(t.searchQuery,W.SEARCH_EVENT,this.onSearch),!i||t&&i===t.searchQuery||a.add(i,W.SEARCH_EVENT,this.onSearch);var o=t&&t.chat.id;if(!s.id.equals(o)&&(t&&t.active&&a.remove(t.active,t.chat.id.toString(),this.onActiveChange),r)){var l=(n?v.FREQUENT_PREFIX:"")+s.id.toString();a.add(r,l,this.onActiveChange)}}render(){var e,t,{chat:a,mode:r,secondary:s,theme:i,filterPreset:l,showEphemeralIcon:u,hideArchivedIcon:c,hideMuteIcon:f}=this.props,{searchText:p,active:m,dragging:_,contextMenu:v,unreadCount:g}=this.state;switch(r){case te.LAST:e=n.createElement(Q.default,{chat:a}),null==s&&(s=n.createElement(h.default,{chat:a}),t=n.createElement(R.default,{chat:a,mute:a.mute,unreadCount:g,hideArchivedIcon:!0===c,hideMuteIcon:!0===f,settings:Y.default}));break;case te.INFO:null==s&&(s=a.isGroup||a.isBroadcast?n.createElement(D.ParticipantsList,{groupMetadata:a.groupMetadata}):n.createElement(Z.default,{presence:a.presence,chatstate:a.presence.chatstate,location:"list"}))}var E,C=n.createElement(S.default,{id:a.id,alt:"",showEphemeralIcon:u,waitIdle:!0}),y=this.props.mouseDownAsClick;v&&(E=n.createElement(X.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this._removeContext},n.createElement(J.default,{contextMenu:v})));var b=n.createElement(V.default,{chat:a,firstLabel:null==l?void 0:l.label,highlightText:p,showLabel:!0,titlify:!0,ellipsify:!0}),T=null,M=a.getEphemeralSetting();return null!=M&&0!==M&&(T=n.createElement(o.InvisibleLabel,null,(0,L.getEphemeralExplanationString)(M))),n.createElement(w.default,{onRef:this._setHotKeysRef,handlers:this._handlers,onFocus:this.indicateFocus,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,"aria-selected":m,tabIndex:m?0:-1,role:"row"},n.createElement(d.default,{id:a.id,ref:this._setCellRef,theme:i,contextEnabled:this.contextEnabled,pendingAction:a.pendingAction,contextMenu:!!v,unread:0!==g,active:!!m,isMuted:!1,dragging:!!_,image:C,primary:b,primaryDetail:e,secondary:s,secondaryDetail:t,onClick:y?void 0:this.onClick,onMouseDown:y?this.onMouseDown:void 0,onContext:this.onMenu}),T,E)}}ae.CONCERNS={chat:["id","isReadOnly","isGroup","pendingAction","canSend","isUser","contact","presence","groupMetadata","mute","isBroadcast","canUnread","optimisticUnreadCount","labels","archive"]},ae.defaultProps={mode:te.LAST},ae.displayName="Chat";var re=ae;t.Component=re;var se=(0,z.default)((0,F.default)((0,K.default)(ae,ae.CONCERNS)));t.default=se},43433:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(48880)),o=r(a(91581)),l=r(a(45420)),d=r(a(40207));class u extends i.PureComponent{render(){var{chat:e,presence:t}=this.props;if(t.isActive()){var a=t.getFormattedString();if(a)return i.createElement(o.default,{className:n.default.chatstateTyping,direction:"inherit",ellipsify:!0,titlify:!0,text:a})}var r=e.previewMessage;return r?i.createElement(l.default,{msg:r.safe(),msgType:"LastMessage"}):null}}u.displayName="ChatStateInfo",u.CONCERNS={chat:["previewMessage"],chatstate:["id","type"]},u.WEAK_CONCERNS={presence:["hasData","withholdDisplay"]},u.displayName="ChatstateInfo";var c=(0,d.default)(u,u.CONCERNS,u.WEAK_CONCERNS);t.default=({chat:e})=>i.createElement(c,{chat:e,presence:e.presence,chatstate:e.presence.chatstate})},65219:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=t.FREQUENT_PREFIX=t.Type=void 0;var i=s(a(19976)),n=s(a(72779)),o=r(a(2784)),l=s(a(32960)),d=s(a(73549)),u=s(a(40147)),c=s(a(28714)),h=s(a(46478)),f=a(62436),p=s(a(91581)),m=s(a(6660)),_=s(a(44343)),v=s(a(17957)),g=s(a(20642)),E=s(a(60949)),S=a(4859),C=s(a(40207)),y=a(64658),b=s(a(58914)),T=s(a(82631)),M=s(a(68384));function N(){var e=(0,i.default)(["Contact: prop searchQuery is undefined"]);return N=function(){return e},e}var I={SMALL:"SMALL",DEFAULT:"DEFAULT"};t.Type=I;var P="freq_";t.FREQUENT_PREFIX=P;class A extends o.Component{constructor(...e){super(...e),this._setCellRef=e=>{this._cellRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.state={active:!1,searchText:"",contextMenu:!1},this.onSearch=()=>{this.props.searchQuery?this.setState({searchText:this.props.searchQuery.trimmed}):__LOG__(3)(N())},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(m.default.focus(a),t&&(0,f.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.onDelete=e=>{e.stopPropagation();var t=this.props.onDelete;t&&t(e,(0,y.unproxy)(this.props.contact))},this.onClick=e=>{var{onClick:t,contact:a}=this.props;t&&t(e,(0,y.unproxy)(a))},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onKeyboardActivation=e=>{e.preventDefault(),e.stopPropagation(),this.onClick(e)},this.onContext=e=>{this.props.onContext&&this.props.onContext(e,this.props.contact)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this._cellRef)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e,t){var{active:a,contact:r,searchQuery:s}=e,i={},n=a&&a.value instanceof u.default&&r.isProxyOf(a.value);t.active!==n&&(i.active=n);var o=s?s.trimmed:"";return t.searchText!==o&&(i.searchText=o),i}componentDidMount(){this.initListeners(this.props);var{listenForAdminChange:e,listeners:t,participantCollection:a,contact:r}=this.props;e&&a&&t.add(a,"change:isAdmin change:isSuperAdmin",(e=>{M.default.equals(e.id,r.id)&&this.forceUpdate()}))}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,contact:s,searchQuery:i,frequent:n}=e;if(t&&t.searchQuery&&t.searchQuery!==i&&a.remove(t.searchQuery,S.SEARCH_EVENT,this.onSearch),!i||t&&i===t.searchQuery||a.add(i,S.SEARCH_EVENT,this.onSearch),(!t||!s.id.equals(t.contact.id))&&(t&&t.active&&a.remove(t.active,t.contact.id.toString(),this.onActiveChange),r)){var o=(n?P:"")+s.id.toString();a.add(r,o,this.onActiveChange)}}contextEnabled(){return!1}render(){var e,t,a,{contact:r,secondary:s,onContext:i,onDelete:u,contextEnabled:f,contextMenu:m,admin:g,showNotifyName:S,waitIdle:C,theme:y,useShortName:M,detail:N,listenForAdminChange:P,participantCollection:A,isPendingParticipant:O,showEphemeralIcon:D}=this.props,{active:w,searchText:R}=this.state,k=(0,n.default)({[c.default.contactSmall]:this.props.type===I.SMALL});if(!r.name&&S&&r.notifyName&&(a=o.createElement("span",{className:c.default.screenName},o.createElement(p.default,{direction:"auto",text:r.notifyName}))),(g||P&&A&&A.assertGet(r.id).isAdmin)&&(t=o.createElement("div",{className:c.default.markerAdmin},v.default.t(1642))),O&&(t=o.createElement("div",{className:c.default.markerInvited},v.default.t(797))),null!=N)e=N;else if(u){var L=this.props.type===I.SMALL?"x-alt-small":"x-alt";e=o.createElement("div",{"data-a8n":l.default.key("chat-controls"),className:c.default.chatControls,role:"button",onClick:this.onDelete},o.createElement(T.default,{name:L}))}var x,F=s;null==F&&(F=o.createElement(b.default,{id:r.id,waitIdle:C})),i&&(x=this.onContext);var B=this.props.type===I.SMALL?26:void 0,G={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},U=this.props.mouseDownAsClick,j=o.createElement(E.default,{contact:r,useShortName:M,highlightText:R,showLabel:!0,titlify:!0,ellipsify:!0,you:!0}),V="list-names"!==y||u?y:"list-names-no-delete";return o.createElement(_.default,{onRef:this._setHotKeysRef,handlers:G,onFocus:this.indicateFocus,className:k},o.createElement(d.default,{ref:this._setCellRef,theme:V,active:w,contextEnabled:f||this.contextEnabled,contextMenu:m,pendingAction:r.pendingAction,detail:e,image:o.createElement(h.default,{id:r.id,size:B,showEphemeralIcon:D,waitIdle:C}),primary:j,primaryDetail:t,secondary:F,secondaryDetail:a,onClick:U?null:this.onClick,onMouseDown:U?this.onMouseDown:null,onContext:x}))}}A.CONCERNS={contact:["id","pendingAction","notifyName","name"]},A.displayName="Contact";var O=A;t.Component=O;var D=(0,g.default)((0,C.default)(A,A.CONCERNS));t.default=D},35239:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(75459),l=s(a(51758)),d=s(a(17957)),u=s(a(40207)),c=s(a(82631)),h=s(a(42097)),f=s(a(74824)),p=s(a(68384));class m extends n.PureComponent{constructor(...e){super(...e),this.state={chatId:null,shouldAnimate:!1}}static getDerivedStateFromProps(e,t){var a=e.chat.id;return{chatId:a,shouldAnimate:p.default.equals(t.chatId,a)}}_showMuteIcon(){var{chat:e,mute:t,hideMuteIcon:a,settings:r}=this.props;return e.archive&&(0,o.archiveV2Supported)()&&r.showArchiveV2?!a:t.isMuted}render(){var{chat:e,unreadCount:t,hideArchivedIcon:a}=this.props,r=this._showMuteIcon()?n.createElement("div",{className:l.default.icon,key:"icon-muted","aria-label":d.default.t(21)},n.createElement(c.default,{name:"muted"})):null,s=null!=e.pin&&e.pin>0?n.createElement("div",{className:(0,i.default)(l.default.icon,l.default.iconPinned),key:"icon-pinned"},n.createElement(c.default,{name:"pinned"})):null,o=0!==t?n.createElement("div",{className:l.default.icon,key:"icon-unread"},n.createElement(h.default,{count:t})):null,u=e.archive&&!a?n.createElement("span",{className:(0,i.default)(l.default.icon,l.default.archived),key:"icon-archived"},d.default.t(485)):null;return n.createElement(f.default,{transitionName:"pop",transitionEnter:this.state.shouldAnimate,transitionLeave:this.state.shouldAnimate},r,u,s,o)}}m.CONCERNS={chat:["id","archive","pin"],mute:["isMuted"],settings:["showArchiveV2"]},m.displayName="Icons";var _=(0,u.default)(m,m.CONCERNS);t.default=_},45420:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(87400)),l=s(a(50935)),d=s(a(91581)),u=s(a(73540)),c=s(a(18120)),h=s(a(87162)),f=a(62902),p=s(a(17957)),m=s(a(33359)),_=s(a(20642)),v=s(a(40210)),g=s(a(6903)),E=s(a(56266)),S=s(a(60949)),C=s(a(10385)),y=s(a(72424)),b=s(a(40207)),T=a(64658);class M extends n.PureComponent{constructor(...e){super(...e),this.updateAfterFeatureFlagChange=()=>{this.props.listeners._unmounted||this.forceUpdate()}}componentDidMount(){var{listeners:e,msg:t}=this.props;e.add(c.default,c.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange),t.type===l.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.unsafe().size<=1024*y.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:v.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===l.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){var{msg:e,searchQuery:t=[],msgType:a,author:r}=this.props,s=[];c.default.supportsFeature(c.default.F.MD_BACKEND)?!e.isSentByMe||e.asRevoked||e.mdDowngrade||s.push(n.createElement(g.default,{msg:e.unsafe(),key:"symbol"})):e.isSentByMe&&!e.asRevoked&&s.push(n.createElement(g.default,{msg:e.unsafe(),key:"symbol"}));var l="Search"!==a&&!e.isSentByMe&&e.isGroupMsg&&!e.isNotification,_=r&&"Search"===a;if((l||_)&&(l?s.push(n.createElement(S.default,{contact:e.senderObj,useShortName:!0,key:"author"})):_&&s.push(n.createElement(d.default,{text:r,direction:"auto",key:"author"})),s.push(n.createElement("span",{key:"divider"},":",""))),e.hasSymbol()&&s.push(n.createElement(E.default,{msg:e.unsafe(),key:"msg-symbol"})),"order"===e.type&&null!=e.itemCount&&s.push(n.createElement("div",{key:"item-count"},p.default.t(864,{count:e.itemCount||0,_plural:e.itemCount||0}),e.message?n.createElement("span",{key:"item-divider"},":",""):null)),null!=e.asGroupNotification)s.push(n.createElement(h.default,{msg:e.asGroupNotification,groupMetadata:e.chat.groupMetadata,clickable:!1,key:"status"}));else if(null!=e.asBroadcastNotification)s.push(n.createElement(o.default,{msg:e.asBroadcastNotification,clickable:!1,key:"broadcast_notification"}));else{var v=e.asRevoked;c.default.supportsFeature(c.default.F.MD_BACKEND)&&(v=v||e.mdDowngrade);var y=(0,i.default)({[m.default.product]:null!=e.asProduct,[m.default.italic]:v});s.push(n.createElement(d.default,{className:y,direction:e.dir,text:(0,C.default)((0,u.default)((0,T.unproxy)(e.unsafe()),!1,!0)||"",!0),dirMismatch:e.rtl!==p.default.isRTL(),formatters:f.Configuration[a]({mentions:e.mentionMap(),terms:t}),ellipsify:!0,inlineblock:!0,key:"status"}))}var b=p.default.embedDir((0,u.default)((0,T.unproxy)(e.unsafe()))||"",e.rtl);return n.createElement("span",{className:m.default.last,title:b},s)}}M.CONCERNS={msg:["ack","asBroadcastNotification","asGroupNotification","asProduct","asRevoked","chat","dir","isGroupMsg","isNotification","isSentByMe","itemCount","rtl","senderObj","type","mediaData","message","isVcardOverMmsDocument","size","mdDowngrade"]},M.displayName="LastMsg";var N=(0,_.default)((0,b.default)(M,M.CONCERNS));t.default=N},99639:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(73549)),o=a(62436),l=r(a(38147)),d=r(a(6660)),u=a(13414),c=r(a(44343)),h=r(a(45420)),f=r(a(20642)),p=r(a(27e3)),m=r(a(58885)),_=r(a(60949)),v=a(4859),g=r(a(40207)),E=a(64658),S=r(a(74223)),C=a(11419);class y extends i.PureComponent{constructor(...e){super(...e),this.onSearch=()=>{this.setState({searchText:this.props.searchQuery.trimmed})},this.onActiveChange=e=>{if("focus"===e){var t,a=null===(t=this.cell)||void 0===t?void 0:t.getCellFrameDivRef();a&&(d.default.focus(a),(0,o.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.onClick=e=>{var t=this.props.onClick;if((0,C.isFunction)(t)){var{msg:a,chat:r}=this.props,s=m.default.assertGet(a.id),i=r.getSearchContext(s);i.msg=s,t(e,(0,E.unproxy)(r),i)}},this.onMouseDown=e=>{0===e.button&&this.onClick(e)},this.onEnter=e=>{e.preventDefault(),e.stopPropagation(),l.default.shouldIndicateFocus(),this.onClick(e)},this.indicateFocus=e=>{var t;e.stopPropagation(),e.preventDefault(),null===(t=this.cell)||void 0===t||t.indicateFocus()}}static getDerivedStateFromProps(e){var{active:t,msg:a,searchQuery:r}=e,s=t&&t.value instanceof p.default&&t.value.id.equals(a.id);return{searchText:r.trimmed,active:s}}componentDidMount(){this.initListeners(this.props)}componentDidUpdate(e){this.initListeners(this.props,e)}initListeners(e,t){var{listeners:a,active:r,msg:s,searchQuery:i}=e;t&&t.searchQuery&&t.searchQuery!==i&&a.remove(i,v.SEARCH_EVENT,this.onSearch),!i||t&&i===t.searchQuery||a.add(i,v.SEARCH_EVENT,this.onSearch);var n=t?t.msg.id:null;n&&!s.id.equals(n)&&(t&&t.active&&a.remove(t.active,t.msg.id.toString(),this.onActiveChange),r&&a.add(r,s.id.toString(),this.onActiveChange))}render(){var{msg:e,chat:t,searchQuery:a,filterPreset:r}=this.props,{active:s}=this.state,o=i.createElement(S.default,{msg:e}),l=i.createElement(h.default,{msg:e.safe(),msgType:"FTSMessage",searchQuery:a.highlighted}),d={enter:this.onEnter};return i.createElement(c.default,{handlers:d,onFocus:this.indicateFocus},i.createElement(n.default,{ref:(0,u.GetRef)((e=>{this.cell=e})),contextEnabled:()=>!1,theme:"chat-checkbox"===this.props.theme?"cell-message-checkbox":"cell-message",active:!!s,primary:i.createElement(_.default,{chat:t,labels:e.labels,firstLabel:null==r?void 0:r.label,showLabel:!0,titlify:!0,ellipsify:!0}),primaryDetail:o,secondary:l,onClick:this.onClick}))}}y.CONCERNS={msg:["id","isSentByMe","isGroupMsg","isNotification","senderObj","dir","rtl","type","labels"],chat:["id","isUser","contact","formattedTitle","groupMetadata"]},y.displayName="Message";var b=(0,f.default)((0,g.default)(y,y.CONCERNS));t.default=b},6903:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(40722)),d=s(a(40207)),u=s(a(82631));class c extends n.PureComponent{render(){var e,t,a=this.props.msg.ack;return a<o.default.ACK.SENT?e="status-time":a===o.default.ACK.SENT?e="status-check":a===o.default.ACK.RECEIVED?e="status-dblcheck":(e="status-dblcheck",t=l.default.ackBlue),n.createElement("div",{className:(0,i.default)(l.default.ack,t)},n.createElement(u.default,{name:e}))}}c.CONCERNS={msg:["ack"]},c.displayName="MsgAck";var h=(0,d.default)(c,c.CONCERNS);t.default=h},56266:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(72779)),o=r(a(2784)),l=s(a(50935)),d=s(a(18120)),u=s(a(20642)),c=s(a(39399)),h=s(a(74287)),f=a(57052),p=s(a(40207)),m=s(a(82631)),_=a(89526);function v(){var e=(0,i.default)(['chat:getClasses Invalid msg type:"','"']);return v=function(){return e},e}class g extends o.PureComponent{constructor(...e){super(...e),this.state={parsedVcards:null},this.updateAfterFeatureFlagChange=()=>{this.forceUpdate()}}static getDerivedStateFromProps(e,t){var a,r,s=e.msg;return(null===(a=s.mediaData)||void 0===a?void 0:a.parsedVcards)!==t.parsedVcards?{parsedVcards:null===(r=s.mediaData)||void 0===r?void 0:r.parsedVcards}:null}componentDidMount(){var{listeners:e}=this.props;e.add(d.default,d.default.FEATURE_CHANGE_EVENT,this.updateAfterFeatureFlagChange)}render(){var{msg:e}=this.props,t=function(e,t){switch(e.type){case l.default.MSG_TYPE.IMAGE:case l.default.MSG_TYPE.VIDEO:return e.isViewOnce?!0===t.viewOnceStatic||(0,_.isUnviewed)(e.safe())?"view-once":"view-once-viewed":e.isGif?"status-gif":e.type===l.default.MSG_TYPE.VIDEO?"status-video":"status-image";case l.default.MSG_TYPE.AUDIO:return e.isGif?"status-gif":"status-audio";case l.default.MSG_TYPE.VCARD:case l.default.MSG_TYPE.MULTI_VCARD:return e.isGif?"status-gif":"status-vcard";case l.default.MSG_TYPE.DOCUMENT:return e.isGif?"status-gif":t.parsedVcards?"status-vcard":"status-document";case l.default.MSG_TYPE.CIPHERTEXT:return e.isGif?"status-gif":"status-ciphertext";case l.default.MSG_TYPE.UNKNOWN:return e.isGif?"status-gif":"status-unknown";case l.default.MSG_TYPE.PRODUCT:return"business-description";case l.default.MSG_TYPE.STICKER:return"status-sticker";case l.default.MSG_TYPE.CALL_LOG:switch(e.subtype){case"miss_video":case"miss_group_video":return"status-miss_video"}return"status-miss";case l.default.MSG_TYPE.PTT:return"status-ptt";case l.default.MSG_TYPE.REVOKED:return"recalled";case l.default.MSG_TYPE.LOCATION:return e.isLive?(0,f.liveLocationIcon)(!1):"status-location";case l.default.MSG_TYPE.GROUPS_V4_INVITE:return d.default.supportsFeature(d.default.F.GROUPS_V_4_JOIN_PERMISSION)?"group":"status-unknown";case l.default.MSG_TYPE.PAYMENT:return"status-unknown";case l.default.MSG_TYPE.ORDER:return"shopping-cart"}return __LOG__(2)(v(),e.type),"status-unknown"}(e,{parsedVcards:this.state.parsedVcards,viewOnceStatic:this.props.viewOnceStatic}),a=(0,n.default)(c.default.symbol,t,{[c.default.margin]:!e.asRevoked,[c.default.miss]:e.type===l.default.MSG_TYPE.CALL_LOG,[c.default.pttBlue]:e.type===l.default.MSG_TYPE.PTT&&e.ack===l.default.ACK.PLAYED,[c.default.pttGreen]:e.type===l.default.MSG_TYPE.PTT&&e.ack!==l.default.ACK.PLAYED&&!e.isSentByMe}),r=e.paymentAmount1000&&e.paymentCurrency;return o.createElement("div",{className:a},e.type===l.default.MSG_TYPE.PAYMENT&&r?o.createElement(h.default,{currency:e.paymentCurrency,subtype:e.subtype,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,isCompact:!0}):o.createElement(m.default,{name:t}))}}g.CONCERNS={msg:["ack","isGif","isLive","isViewOnce","type","subtype","asRevoked","isSentByMe","paymentCurrency","paymentAmount1000","paymentStatus","paymentTxnStatus","mediaData"]},g.displayName="MsgSymbol";var E=(0,u.default)((0,p.default)(g,g.CONCERNS));t.default=E},58914:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(7470)),o=r(a(91581)),l=r(a(92507)),d=r(a(17957)),u=r(a(40207)),c=a(64658),h=r(a(58362)),f=r(a(76019)),p=r(a(68384)),m=i.createElement("span",{className:h.default.statusLoading},d.default.t(538));class _ extends i.PureComponent{render(){var{status:e}=this.props,t=i.createElement(o.default,{direction:"auto",selectable:!0,titlify:!0,text:e.status}),a=(0,c.unproxy)(e).stale?m:t;return i.createElement(l.default,{id:e.id,onComplex:()=>(f.default.find(e.id),void 0!==e.status?t:m),waitIdle:this.props.waitIdle},a)}}_.WEAK_CONCERNS={status:["id","stale","status"]},_.displayName="Status";var v=(0,u.default)(_,void 0,_.WEAK_CONCERNS);class g extends i.PureComponent{constructor(e){super(e),this.state={status:f.default.get(e.id)}}componentDidMount(){if(!this.state.status){var e=n.default.gadd(this.props.id);this.setState({status:e.getStatus()})}}componentDidUpdate(e){if(!p.default.equals(this.props.id,e.id)){var t=n.default.gadd(this.props.id);this.setState({status:t.getStatus()})}}render(){var{status:e}=this.state;return e?i.createElement(v,{status:e,waitIdle:this.props.waitIdle}):m}}t.default=g,g.displayName="StatusWrapper"},74223:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19034)),n=r(a(2784)),o=r(a(19899)),l=s(a(79711)),d=s(a(18120)),u=s(a(20642)),c=s(a(40207));class h extends n.PureComponent{constructor(...e){super(...e),this.state={updater:!1},this._listening=!1,this.rerender=()=>{this.setState({updater:!this.state.updater})}}componentDidMount(){this.props.listeners.add(o.default,o.HOUR24_FORMAT_CHANGE_EVENT,this.rerender),this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getDisplayedTimestamp(){return d.default.supportsFeature(d.default.F.MD_BACKEND)&&null!=this.props.t?this.props.t:this.props.msg.t}maybeRegMidnight(){var{listeners:e}=this.props,t=(0,i.default)().startOf("day").subtract(7,"day");this.getDisplayedTimestamp()>=t.unix()?this._listening||(this._listening=!0,e.add(l.default,"midnight",this.rerender)):this._listening&&(this._listening=!1,e.remove(l.default,"midnight",this.rerender))}render(){return n.createElement(n.Fragment,null,o.default.relativeStr(this.getDisplayedTimestamp()))}}h.CONCERNS={msg:["t"]},h.displayName="TimestampWithMsg";var f=(0,u.default)((0,c.default)(h,h.CONCERNS));class p extends n.PureComponent{render(){var{chat:e}=this.props;return e.previewMessage?n.createElement(f,{msg:e.previewMessage,t:e.t}):null}}p.CONCERNS={chat:["previewMessage","t"]},p.displayName="TimestampWithChat";var m=(0,c.default)(p,p.CONCERNS);t.default=({chat:e,msg:t})=>e?n.createElement(m,{chat:e}):t?n.createElement(f,{msg:t}):null},97702:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(43322),o=r(a(65219)),l=r(a(71201)),d=r(a(17957)),u=r(a(20642)),c=r(a(40207)),h=r(a(17693)),f=r(a(63498));class p extends i.Component{constructor(...e){super(...e),this.state={contextMenu:null},this._unblockContactTrigger=e=>{var{contact:t}=this.props,a=[i.createElement(l.default,{a8n:"unblock-contact-in-multi-select",key:"unblock",action:this.unblockContact},d.default.t(527,{contact:t.shortName||t.name}))];e.event&&e.event.persist(),this.setState({contextMenu:{contactId:t.id.toString(),menu:a,anchor:e.anchor,event:e.event}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.unblockContact=()=>{var{contact:e}=this.props;this.closeContextMenu(),e.addPendingAction((0,n.unblockContact)(e)).then((()=>this.props.onSelect())).catch((()=>{}))},this.onSelect=e=>{if(!this.props.disabled)if(this.props.allowBlockedContacts)this.props.onSelect();else{var{contact:t}=this.props;this.state.contextMenu?this.closeContextMenu():t.isContactBlocked?this._unblockContactTrigger({event:e}):this.props.onSelect()}}}render(){var e,{disabled:t,customSecondaryText:a,contact:r,active:s,allowBlockedContacts:n,showEphemeralIcon:l}=this.props;return this.state.contextMenu&&(e=i.createElement(h.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0},i.createElement(f.default,{contextMenu:this.state.contextMenu}))),i.createElement(i.Fragment,null,i.createElement(o.default,{theme:t||r.isContactBlocked&&!n?"chat-checkbox-no-delete":"chat-checkbox",active:s,contact:r,onClick:t?null:this.onSelect,secondary:r.isContactBlocked&&!n?d.default.t(526):a||null,waitIdle:!0,showEphemeralIcon:l}),e)}}p.CONCERNS={contact:["id","isGroup","isContactBlocked","pendingAction","shortName","name"]},p.displayName="UnblockableContactWrapper";var m=(0,u.default)((0,c.default)(p,p.CONCERNS));t.default=m},42097:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(72779)),n=r(a(2784)),o=s(a(17957)),l=s(a(99165));function d({count:e,transparentBg:t}){var a="";return e>0&&(a=o.default.t(1412,{count:o.default.n(e),_plural:e})),n.createElement("span",{className:(0,i.default)(l.default.count,{[l.default.transparentBg]:t}),"aria-label":a},e>0?o.default.n(e):null)}d.displayName="UnreadCount"},35528:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(36543)),l=s(a(59853)),d=a(46774),u=s(a(13574)),c=s(a(79711)),h=s(a(26871)),f=s(a(44537)),p=s(a(77906)),m=s(a(98294)),_=s(a(71292)),v=s(a(17957)),g=s(a(20642)),E=a(94469),S=s(a(69345)),C=s(a(62303)),y=s(a(40210)),b=s(a(58885)),T=s(a(61941)),M=s(a(91944)),N=r(a(17026)),I=r(a(75074)),P=s(a(64786)),A=s(a(7470)),O=s(a(58534));function D(){var e=(0,i.default)(["ChatActionListener:onAttachMediaDrawer fileOrigin is not specified, fallback to default"]);return D=function(){return e},e}class w extends n.Component{constructor(...e){super(...e),this._onChatInfoDrawer=(e,t)=>{c.default.openDrawerRight(n.createElement(_.default,{chat:e,key:"info-".concat(e.id.toString()),showFullGroupDescription:t}),"slide-left",this.props.uim)},this._onLiveLocationDrawer=(e,t)=>{e.liveLocation&&e.liveLocation.active||c.default.openDrawerRight(n.createElement(E.LiveLocationDrawerLoadable,{chat:e,openFrom:t,isFirstLevel:!0}),"slide-left",this.props.uim)},this._onExpiredLocationDrawer=e=>{c.default.openDrawerRight(n.createElement(E.ExpiredLocationDrawerLoadable,{msg:e}),"slide-left",this.props.uim)},this._onVerificationDrawer=e=>{c.default.openDrawerRight(n.createElement(O.default,{contact:A.default.assertGet(e),isFirstLevel:!0}),"slide-left",this.props.uim)},this._onMsgInfoDrawer=e=>{N.default.displayInfo===N.StreamInfo.NORMAL?e.chat.kind===d.CHAT_KIND.CHAT?c.default.openDrawerRight(n.createElement(h.default,{msg:e}),"slide-left",this.props.uim):c.default.openDrawerRight(n.createElement(p.default,{msg:e}),"slide-left",this.props.uim):c.default.openToast(n.createElement(I.default,{msg:v.default.t(1027),id:(0,I.genId)("msg_info_failed")}))},this._onAttachMediaDrawer=({chat:e,attachments:t,animationName:a,initCaption:r,onComplete:s,fileOrigin:i})=>{var d=()=>{var a=e.attachMediaContents;a&&t&&(i?a.processAttachments(t,i):(__LOG__(3)(D()),a.processAttachments(t,y.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)))};c.default.existsDrawerMid((t=>{if(t)d();else{e.attachMediaContents||e.setAttachMediaContents(new o.default({chatParticipantCount:e.getParticipantCount()}));var i=(0,T.default)(e.attachMediaContents,"chat.attachMediaContents");c.default.openDrawerMid(n.createElement(l.default,{chat:e,onComplete:s,initCaption:r,mediaCollection:i}),a||"slide-up",this.props.uim,{noFocus:!0,onEnterAnimationComplete:d})}}))},this.onChatSearch=e=>{c.default.openDrawerRight(n.createElement(u.default,{chat:e}),"slide-left",this.props.uim)},this._onMediaViewer=e=>{var{msg:t,getZoomNode:a,currentTime:r,highlightedMsgIds:s}=e;b.default.get(t.id)?c.default.openModalMedia(n.createElement(C.default,{msg:t,startTime:r,getZoomNode:a,highlightedMsgIds:s}),{transition:"media-viewer",uim:this.props.uim}):c.default.openModal(n.createElement(S.default,{msg:t}))},this._onEphemeralDrawer=e=>{c.default.openDrawerRight(n.createElement(f.default,{chat:e,fromInfoFlow:!1}),"slide-left",this.props.uim)},this._onVoipStartGroupCall=(e,t)=>{var a=e.groupMetadata.participants.map((e=>e.contact.id)),r=n.createElement(M.default,{isVideo:t,groupParticipants:a,onStartGroupCall:e=>P.default.groupCallStart(e,t)});c.default.openModal(r,{transition:"modal-flow"})}}componentDidMount(){var{listeners:e}=this.props;e.add(c.default,"chat_info_drawer",this._onChatInfoDrawer),e.add(c.default,"msg_info_drawer",this._onMsgInfoDrawer),e.add(c.default,"chat_search",this.onChatSearch),e.add(c.default,"attach_media_drawer",this._onAttachMediaDrawer),e.add(c.default,"verification_drawer",this._onVerificationDrawer),e.add(c.default,"live_location_drawer",this._onLiveLocationDrawer),e.add(c.default,"media_viewer_modal",this._onMediaViewer),e.add(c.default,"expired_location_drawer",this._onExpiredLocationDrawer),e.add(c.default,"ephemeral_drawer",this._onEphemeralDrawer),e.add(c.default,"voip_start_group_call",this._onVoipStartGroupCall)}render(){return null}}w.displayName="ChatActionListener";var R=(0,m.default)((0,g.default)(w));t.default=R},60846:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FooterType=void 0;var i=s(a(16760)),n=s(a(30898)),o=s(a(17335)),l=s(a(72779)),d=r(a(2784)),u=s(a(46774)),c=s(a(46394)),h=s(a(91581)),f=s(a(17957)),p=s(a(20642)),m=s(a(37163)),_=s(a(94461)),v=s(a(82631)),g=s(a(74824)),E={CONFIRM:"CONFIRM",NEXT:"NEXT",SEND:"SEND",VOICE_CALL:"VOICE_CALL",VIDEO_CALL:"VIDEO_CALL"};t.FooterType=E;class S extends d.Component{constructor(e){super(e),this._forwardIsEnabled=!0,this.state={selected:[]},this._handleForwardClick=()=>{this._forwardIsEnabled&&(this._forwardIsEnabled=!1,this.props.onForward())},this._firstRenderActive=e.startActive||!1}componentDidMount(){var e=this.props.selections.getSelected();this.setState({selected:e}),this.props.listeners.add(this.props.selections,"all",(()=>{this.setState({selected:this.props.selections.getSelected()})})),0===e.length&&(this._firstRenderActive=!1)}componentDidUpdate(){this._hasSelected()||(this._firstRenderActive=!1)}_hasSelected(){return this.state.selected.length>0}render(){var e;if(this._hasSelected()){var t,a=1===this.state.selected.length?this.props.singleSelectionType:this.props.multipleSelectionType;switch(a){case E.CONFIRM:t=d.createElement(v.default,{name:"checkmark-medium"});break;case E.NEXT:t=d.createElement(v.default,{name:"arrow-forward"});break;case E.VOICE_CALL:t=d.createElement(v.default,{name:"voice-call"});break;case E.VIDEO_CALL:t=d.createElement(v.default,{name:"video-call"});break;case E.SEND:default:t=d.createElement(v.default,{directional:!0,name:"send"})}e=d.createElement("div",{className:(0,l.default)(c.default.controlsSummary,{[c.default.confirm]:a===E.CONFIRM})},a!==E.CONFIRM&&d.createElement(y,{chats:this.state.selected}),d.createElement("div",{"data-animate-btn":!0,className:this._firstRenderActive?c.default.btnActive:c.default.btnAction},d.createElement(_.default,{large:!0,onClick:this._handleForwardClick},t)))}return d.createElement(g.default,{transitionName:"slide-up-down-footer",className:c.default.container},e)}}S.defaultProps={singleSelectionType:E.SEND,multipleSelectionType:E.SEND},S.displayName="ChatSelectorFooter";var C=(0,p.default)(S);t.default=C;class y extends d.Component{constructor(e){super(e),this.state={chats:this.props.chats}}static getDerivedStateFromProps(e,t){var a=t.chats,r=e.chats;return{chats:a=r&&r.length>a.length?a.concat((0,o.default)(r,a)):(0,n.default)(a,r)}}render(){for(var e=(0,i.default)(this.state.chats,(e=>e instanceof u.default?e.formattedTitle:e instanceof m.default?e.name:e.formattedShortNameWithNonBreakingSpaces)),t=[],a=e.length-1;a>=0;a--)t.push(d.createElement(h.default,{className:c.default.item,key:a,text:e[a]})),a>0&&t.push(d.createElement("span",{key:"comma-".concat(a)},f.default.t(619)));return d.createElement(g.default,{transitionName:"pop",className:c.default.summaryText},t)}}y.displayName="SelectedChatsList"},64237:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var i=s(a(26139)),n=s(a(17335)),o=r(a(2784)),l=s(a(46774)),d=r(a(13886)),u=s(a(43334)),c=s(a(68580)),h=s(a(79711)),f=s(a(50935)),p=(s(a(40147)),s(a(65219))),m=s(a(17029)),_=s(a(91581)),v=r(a(35598)),g=s(a(6660)),E=s(a(44343)),S=a(62902),C=s(a(17957)),y=s(a(20642)),b=s(a(99639)),T=(s(a(27e3)),s(a(73073))),M=s(a(67134)),N=s(a(17693)),I="SEC_CHATS",P="SEC_CONTACTS",A="SEC_GROUPCHATS",O="SEC_STARRED",D="SEC_MSG",w="SEC_MUTED_CHATS",R="ROW_CHATS",k="ROW_CONTACTS",L="ROW_GROUPCHATS",x="ROW_STARRED",F="ROW_MSG";class B extends o.Component{static getDerivedStateFromProps(e){return{ftsStarred:e.ftsResult.filter((({star:e})=>e)),ftsMessages:e.ftsResult.filter((({star:e})=>!e))}}constructor(e){super(e),this._setRefHotKeys=e=>{this._refHotKeys=e},this._onListPointerEventsOff=()=>{this._listPointerEvents=!1},this._onListPointerEventsOn=()=>{this._listPointerEvents=!0},this._updateSelected=e=>{this._debouncedOpenSelected.cancel(),this.props.selection.setVal(e,!1),this._oldSelection=e},this.onContactClick=(e,t)=>{this.onClick(e,t.id)},this._onChatClick=(e,t)=>{this.onClick(e,t.id)},this.onMessageClick=(e,t,a)=>{this.onClick(e,t.id,a)},this.onClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),u.default.find(t).then((e=>{a?h.default.openChatAt(e,a).then((t=>{t&&h.default.focusChatTextInput(e)})):e!==this._getActiveChat()?h.default.openChatFromUnread(e).then((t=>{t&&h.default.focusChatTextInput(e)})):h.default.focusChatTextInput(e)}))},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.onFocusGain=e=>{if(e.target===this._refHotKeys&&this._listPointerEvents)if(this.props.selection.index<0)this.focusFirst();else{var{uie:t}=this;t&&t.activate(),this.props.selection.reset(!0)}},this._handleCloseChat=e=>{e===this.props.selection.getVal()&&this.props.selection.unset()},this.onFocusSearch=e=>{e.stopPropagation(),e.preventDefault(),this.props.onFocusSearch()},this.setRefUIE=e=>{this.uie=e},this.onFocusList=()=>{this.refList&&this._refHotKeys&&g.default.focus(this._refHotKeys)},this.requestFocus=()=>{this.props.selection.reset(!1),this.props.selection.index>-1&&document.activeElement===document.body&&this.onFocusList()},this.setRefList=e=>{this.refList=e},this.onMultiSelect=(e,t,a)=>{var{multiSelection:r}=this.props;r&&r.setVal(e,t,a)},this._renderWrappedItem=(e,t)=>{var{multiSelection:a,selectableState:r}=this.props;return a&&r?o.createElement(c.default,{model:t,theme:"chat-checkbox",selectableState:r,multiSelection:a,onSelect:this.onMultiSelect},e):e},this.renderItem=e=>{var{searchQuery:t,filterPreset:a}=this.props;switch(e.type){case I:return o.createElement(T.default,{header:C.default.t(1603)});case P:return o.createElement(T.default,{header:C.default.t(1610)});case A:return o.createElement(T.default,{header:C.default.t(1717)});case O:return o.createElement(T.default,{header:C.default.t(1840)});case D:return o.createElement(T.default,{header:C.default.t(1747)});case R:var{data:r}=e;return this._renderWrappedItem(o.createElement(d.default,{chat:r,contact:r.contact,mode:d.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._onChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection,showEphemeralIcon:!0}),r);case k:var{data:s}=e;return this._renderWrappedItem(o.createElement(p.default,{contact:s,active:this.props.selection,searchQuery:t,onClick:this.onContactClick,mouseDownAsClick:!0,waitIdle:!0}),s);case L:var{data:i}=e,n=i[0],l=this._getGroupChatSubtitle(i);return this._renderWrappedItem(o.createElement(d.default,{chat:n,contact:n.contact,secondary:l,mode:d.Mode.LAST,searchQuery:t,filterPreset:a,onClick:this._onChatClick,mouseDownAsClick:!0,selectableState:this.props.selectableState,multiSelection:this.props.multiSelection,active:this.props.selection}),n);case x:var{data:u}=e;return this._renderWrappedItem(o.createElement(b.default,{msg:u,chat:u.chat,searchQuery:t,filterPreset:a,onClick:this.onMessageClick,active:this.props.selection}),u);case F:var{data:c}=e;return this._renderWrappedItem(o.createElement(b.default,{msg:c,chat:c.chat,searchQuery:t,filterPreset:a,onClick:this.onMessageClick,active:this.props.selection}),c);default:throw new v.UnknownDataError(e)}},this._listPointerEvents=!0,this._oldSelection=null,this._debouncedOpenSelected=this.props.debounce((()=>{this._openSelected(this._focusComposer),this._focusComposer=!1}),200),this.state={textsize:m.default.get().textsize,ftsStarred:[],ftsMessages:[],mutedChats:[],collapseMutedChatsEnabled:!1,mutedChatsCollapsed:!0}}componentWillUnmount(){var e=this.getSelection(),t=this.props.selection.getVal();t&&t.isState&&!this.props.isSearching&&!e.length&&h.default.closeChat(t)}componentDidMount(){this.props.selection.init(this.getSelection()),this.props.listeners.add(h.default,"focus_chat_list",this.restoreFocus),this.props.listeners.add(h.default,"focus_next_chat",(e=>{this.onNextChat(null,!0,e)})),this.props.listeners.add(h.default,"focus_prev_chat",(e=>{this.onPrevChat(null,!0,e)})),this.props.listeners.add(h.default,"update_chatlist_selection",this._updateSelected),this.props.listeners.add(h.default,"close_chat",this._handleCloseChat),this.props.listeners.add(h.default,"textsize_change",(e=>{this.setState({textsize:e})}))}componentDidUpdate(e){var t=e.selection.getVal();this.props.selection.init(this.getSelection(),!e.isSearching&&!this.props.isSearching);var a=this.props.selection.getVal();e.isSearching&&!this.props.isSearching&&!a&&this._oldSelection&&this.props.selection.setVal(this._oldSelection),a&&a!==t&&(this._focusComposer=!0,this._debouncedOpenSelected())}_openSelected(e=!1){var t=this.props.selection.getVal();t&&(t instanceof l.default&&t!==this._getActiveChat()?h.default.openChatFromUnread(t).then((a=>{a&&e&&h.default.focusChatTextInput(t)})):e&&h.default.focusChatTextInput(t))}getSelection(){return[...this.props.chats,...this.props.contacts,...this.props.messages,...this.props.groupChats.map((e=>e[0])),...this.state.ftsStarred,...this.state.ftsMessages]}_scrollListIntoFocusedItem(e=100){this.refList&&this.refList.scrollIntoViewIfNeeded(this.props.selection.index,e)}focusFirst(){var{uie:e}=this;e&&e.activate(),this.props.selection.setFirst(),this._scrollListIntoFocusedItem(0),this._debouncedOpenSelected()}onNextChat(e,t,a){e&&e.preventDefault();var r=this.props.selection.next();this.props.selection.index!==r&&(this.props.selection.setNext(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected())}onPrevChat(e,t,a){e&&e.preventDefault(),this.props.selection.prev()>-1?(this.props.selection.setPrev(!0),this._focusComposer=a,this._scrollListIntoFocusedItem(),this._debouncedOpenSelected()):t||(this._debouncedOpenSelected.cancel(),this._openSelected(),this.props.onFocusSearch())}_getHeight(){var{textsize:e}=this.state,t=f.default.LIST_HEIGHT_TEXTSIZE_MAP.find((t=>t.scale===e));return t?t.height:72}getData(){var{chats:e,contacts:t,groupChats:a,isSearching:r,messages:s}=this.props,{ftsStarred:i,ftsMessages:n,mutedChats:o,mutedChatsCollapsed:l,collapseMutedChatsEnabled:d}=this.state,u=[];return r&&e.length>0&&u.push({itemKey:"section-chats",type:I}),!r&&d?(o.length>0&&u.push({itemKey:"section-collapse-muted",contentKey:"".concat(String(l),"-").concat(o.length),type:w,height:30}),l||u.push(...o.map((e=>({itemKey:"chat-".concat(e.id.toString()),data:e,expanded:!l,type:R})))),u.push(...e.filter((e=>!e.mute.isMuted)).map((e=>({itemKey:"chat-".concat(e.id.toString()),data:e,type:R}))))):u.push(...e.map((e=>({itemKey:"chat-".concat(e.id.toString()),data:e,type:R})))),r&&t.length>0&&u.push({itemKey:"section-contacts",type:P}),u.push(...t.map((e=>({itemKey:"contact-".concat(e.id.toString()),data:e,type:k})))),r&&a.length>0&&u.push({itemKey:"section-groupchats",type:A}),u.push(...a.map((e=>({itemKey:"groupchat-".concat(e[0].id.toString(),"-").concat(e[1].map((e=>e.id.toString())).join("-")),data:e,type:L})))),r&&i.length>0&&u.push({itemKey:"section-starred",type:O}),u.push(...i.map((e=>({itemKey:"starred-".concat(e.id.toString()),data:e,type:x})))),r&&n.length>0&&u.push({itemKey:"section-msg",type:D}),u.push(...n.map((e=>({itemKey:"msg-".concat(e.id.toString()),data:e,type:F})))),r&&s.length>0&&u.push({itemKey:"section-msg",type:D}),u.push(...s.map((e=>({itemKey:"msg-".concat(e.id.toString()),data:e,type:F})))),u}render(){var e,t,{isSearching:a,chats:r}=this.props;return t=a?C.default.t(29):C.default.t(2),o.createElement(N.default,{displayName:"Chatlist",ref:this.setRefUIE,uimState:N.default.State.PASSIVE,requestFocus:this.requestFocus},o.createElement(E.default,{handlers:{down:e=>this.onNextChat(e,!0),j:e=>this.onNextChat(e,!0),up:e=>this.onPrevChat(e,!0),k:e=>this.onPrevChat(e,!0),"/":e=>this.onFocusSearch(e)},onFocus:this.onFocusGain,onRef:this._setRefHotKeys,"data-tab":f.default.TAB_ORDERS.CHAT_LIST},o.createElement(v.default,{"aria-label":t,data:this.getData(),renderItem:this.renderItem,flatListController:this.props.flatListController,direction:"vertical",defaultItemHeight:this._getHeight(),onPointerEventsOff:this._onListPointerEventsOff,onPointerEventsOn:this._onListPointerEventsOn,ref:this.setRefList,role:"grid","aria-rowcount":null!==(e=null==r?void 0:r.length)&&void 0!==e?e:0})))}_getActiveChat(){return u.default.toArray().find((e=>e.active))}_getGroupChatSubtitle(e){var t=e[1],a=e[0].groupMetadata.participants.map((e=>e.contact)),r=(0,n.default)(a,t),s=(0,i.default)(t,r).map((e=>e.formattedShortNameWithNonBreakingSpaces)).join(C.default.t(619)),l=S.Configuration.Search({terms:[this.props.searchQuery.trimmed]});return o.createElement(_.default,{text:s,formatters:l,titlify:!0,direction:"auto"})}}B.defaultProps={chats:[],groupChats:[]},B.displayName="Chatlist";var G=B;t.Component=G;var U=(0,y.default)((0,M.default)(B));t.default=U},38593:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(28080)),o=r(a(15271)),l=r(a(79711)),d=r(a(52737)),u=r(a(7470)),c=r(a(46478)),h=a(95595),f=r(a(18120)),p=r(a(17957)),m=r(a(20642)),_=a(80898),v=r(a(85059)),g=r(a(57557)),E=r(a(35194)),S=r(a(15118)),C=r(a(40207)),y=r(a(76019)),b=r(a(15553)),T=r(a(82631)),M=r(a(67134)),N=s(a(75074)),I=r(a(74824));class P extends i.Component{constructor(){super(...arguments),this.onWindowFocus=()=>{},this.onMouseDown=()=>{},this.onDrag=()=>{this.didDrag=!0},this.onClickCapture=()=>{},this._onNewChat=e=>{e.preventDefault(),l.default.openDrawerLeft(i.createElement(g.default,null))},this.onProfile=()=>{var e=(0,h.getMaybeMeUser)(),t=y.default.assertGet(e),a=S.default.assertGet(e),r=u.default.assertGet(e);l.default.openDrawerLeft(i.createElement(E.default,{status:t,profilePicThumb:a,contact:r,conn:d.default}))},this.onUnmute=()=>{v.default.globalMute().unmute(),l.default.openToast(i.createElement(N.default,{msg:p.default.t(745),id:(0,N.genId)()}))},this.state={}}componentDidMount(){}render(){var e=null;this.props.mute.isMuted&&(e=i.createElement(_.MenuBarItem,{a8nText:"menu-bar-unmute",icon:i.createElement(T.default,{name:"dnd"}),title:p.default.t(744),onClick:this.onUnmute,key:"btn-dnd"}));var t=i.createElement("div",{className:n.default.listUser},i.createElement(c.default,{id:(0,h.getMaybeMeUser)(),size:40,onClick:this.onProfile}));if(f.default.supportsFeature(f.default.F.MD_BACKEND)){var a=i.createElement("div",{className:n.default.betaIcon},i.createElement("b",{className:n.default.betaIconText,title:p.default.t(255)},p.default.t(254)));t=i.createElement("div",{className:n.default.listUserBeta},i.createElement(c.default,{id:(0,h.getMaybeMeUser)(),size:40,onClick:this.onProfile}),a)}return i.createElement("header",{className:n.default.header,onMouseDown:this.onMouseDown,onClickCapture:this.onClickCapture},t,i.createElement("div",{className:n.default.listControls},i.createElement(_.MenuBar,{key:"chatlist-header"},i.createElement(I.default,{transitionName:"btn"},e,i.createElement(b.default,null),i.createElement(_.MenuBarItem,{a8nText:"menu-bar-chat",icon:i.createElement(T.default,{name:"chat",directional:!0}),title:p.default.t(1743),onClick:this._onNewChat}),i.createElement(_.MenuBarItem,{a8nText:"menu-bar-menu",icon:i.createElement(T.default,{name:"menu"}),title:p.default.t(980)},i.createElement(o.default,{settings:this.props.settings}))))))}}P.CONCERNS={mute:["isMuted"]},P.displayName="ChatlistHeader";var A=(0,M.default)((0,m.default)((0,C.default)(P,P.CONCERNS)));t.default=A},15271:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(17057));class i extends s.default{}t.default=i},17057:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(67524)),o=a(66181),l=r(a(49951)),d=r(a(79711)),u=r(a(9386)),c=r(a(52737)),h=r(a(50935)),f=r(a(7470)),p=s(a(14457)),m=r(a(71201)),_=a(95595),v=a(75459),g=r(a(17957)),E=r(a(54700)),S=a(69421),C=a(53527),y=r(a(91729)),b=r(a(40210)),T=r(a(58885)),M=r(a(82476)),N=r(a(35194)),I=r(a(15118)),P=r(a(40773)),A=r(a(92062)),O=r(a(11405)),D=r(a(63095)),w=r(a(76019)),R=r(a(12767));class k extends i.Component{getElement(){return this._refDropdown}constructor(){super(...arguments),this.openTime=-1,this.onCreateGroup=()=>{d.default.openDrawerLeft(i.createElement(M.default,null)),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.NEW_GROUP)},this.onCreateMessengerRoom=()=>{(0,_.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,_.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,_.shouldShowNUX)(h.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)?d.default.openModal(i.createElement(y.default,null)):(0,C.openMessengerRoomUrl)(),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.CREATE_A_ROOM)},this.onProfile=()=>{var e=(0,_.getMaybeMeUser)(),t=w.default.assertGet(e),a=I.default.assertGet(e),r=f.default.assertGet(e);d.default.openDrawerLeft(i.createElement(N.default,{status:t,profilePicThumb:a,contact:r,conn:c.default})),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.PROFILE)},this.onDisconnect=()=>{var e=T.default.some((e=>e.ack===h.default.ACK.CLOCK&&e.local&&e.isSentByMe));if((0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.LOG_OUT),!e)return R.default.logout();d.default.openModal(i.createElement(u.default,{title:g.default.t(519),onOK:()=>R.default.logout(),okText:g.default.t(968),onCancel:()=>d.default.closeModal(),cancelText:g.default.t(1593)},g.default.t(1339)))},this.onArchived=()=>{d.default.openDrawerLeft(i.createElement(n.default,null)),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.ARCHIVED)},this.onSettings=()=>{d.default.openDrawerLeft(i.createElement(A.default,null)),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.SETTINGS)},this.onStarred=()=>{d.default.openDrawerLeft(i.createElement(O.default,{starredMsgs:D.default})),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.STARRED)},this.onLabel=()=>{d.default.openDrawerLeft(i.createElement(E.default,null)),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.LABELS)},this.onContactUsOpen=()=>{this.openTime=performance.now(),d.default.openModal(i.createElement(P.default,{onCancel:this.onContactUsCancel,onSend:this.onContactUsSend}))},this.onContactUsCancel=()=>{(0,S.logSessionEvent)(b.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION,this.openTime)},this.onContactUsSend=e=>{(0,S.logSessionEvent)(b.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,this.openTime,e)},this.onCatalog=()=>{(0,o.openCatalogManagementFlow)(),(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.CATALOG)},this.state={rememberMe:(0,_.getRememberMe)()}}componentDidMount(){(0,l.default)(b.default.WEBC_MENU_ITEM_LABEL.OPEN)}render(){var e=i.createElement(m.default,{a8n:"mi-new-group menu-item",action:this.onCreateGroup},g.default.t(1740)),t=i.createElement(m.default,{a8n:"mi-create-messenger-room menu-item",action:this.onCreateMessengerRoom},g.default.t(1009)),a=i.createElement(m.default,{a8n:"mi-starred menu-item",action:this.onStarred},g.default.t(976)),r=(0,v.canEditLabelAssociation)()&&i.createElement(m.default,{a8n:"mi-setting menu-item",action:this.onLabel},g.default.t(873)),s=c.default.isSMB?i.createElement(m.default,{a8n:"mi-setting menu-item",action:this.onCatalog},g.default.t(862)):null,n=g.default.t(972);return i.createElement(p.default,{onRef:e=>{this._refDropdown=e},type:"dropdown_menu",flipOnRTL:!0,key:"ChatlistHeader",dirX:p.DirX.LEFT},e,t,i.createElement(m.default,{a8n:"mi-profile-status menu-item",action:this.onProfile},n),s,(0,v.archiveV2Supported)()&&this.props.settings.showArchiveV2?null:i.createElement(m.default,{a8n:"mi-archived menu-item",action:this.onArchived},g.default.t(963)),a,r,i.createElement(m.default,{a8n:"mi-setting menu-item",action:this.onSettings},g.default.t(975)),null,i.createElement(m.default,{a8n:"mi-logout menu-item",action:this.onDisconnect},g.default.t(968)))}}t.default=k,k.displayName="ChatlistHeaderDropdown"},49951:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){new s.default.WebcMenu({webcMenuAction:s.default.WEBC_MENU_TYPE.THREADS_SCREEN_CLICK,webcMenuItemLabel:e}).commit()};var s=r(a(40210))},662:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(67304)),o=s(a(16760)),l=s(a(54073)),d=s(a(72779)),u=a(39329),c=r(a(2784)),h=s(a(67790)),f=s(a(90513)),p=s(a(43334)),m=s(a(64237)),_=s(a(38593)),v=s(a(97838)),g=s(a(79711)),E=s(a(50935)),S=s(a(7470)),C=s(a(17029)),y=a(20485),b=r(a(96452)),T=a(87819),M=s(a(63097)),N=s(a(22004)),I=s(a(38147)),P=s(a(6660)),A=s(a(92803)),O=s(a(18120)),D=a(75459),w=a(13414),R=s(a(44343)),k=s(a(83005)),L=s(a(17957)),x=s(a(23539)),F=a(12824),B=s(a(81610)),G=s(a(20642)),U=s(a(40210)),j=s(a(51956)),V=s(a(58885)),H=s(a(42913)),W=s(a(85059)),Y=s(a(46821)),K=s(a(72259)),q=s(a(4859)),z=s(a(38362)),Q=s(a(73664)),X=s(a(79953)),J=s(a(2825)),Z=s(a(40207)),$=s(a(82631)),ee=s(a(67134)),te=s(a(17693)),ae=s(a(91378)),re=s(a(19899)),se=a(95595),ie=s(a(7681));function ne(){var e=(0,i.default)(["get from participants table failed"]);return ne=function(){return e},e}var oe=450,le=75;class de extends c.Component{constructor(e){super(e),this._refPanel=null,this.flatListController=new N.default,this._batchState={},this.setRefSearch=e=>{this.refSearch=e},this._setRefInputHotkey=e=>{this._refInputHotkey=e},this._smbFilterSession=new X.default,this._hasLabelEditGK=!1,this._refContainer=c.createRef(),this._debounceSetState=new u.ShiftTimer((()=>{this.setState(this._batchState),this._batchState={}})),this.debounceSetState=(e,t,a)=>{Object.assign(this._batchState,e),void 0===t?this._debounceSetState.onOrBeforeRepaint():void 0===a?this._debounceSetState.debounce(t):this._debounceSetState.debounceAndCap(t,a)},this._updateLabelFeatureFlagChange=()=>{!this._hasLabelEditGK&&(0,D.canEditLabelAssociation)()&&(this._hasLabelEditGK=!0,this.props.listeners.add(x.default,"bulk_msg_chat_label_change",(()=>{this.searchQuery&&!this.searchQuery.isEmptyQuery&&(this.ftsMsgs.updateFtsAfterMsgLabelUpdate(),this.onSearch(this.searchQuery.trimmed,{label:this.searchQuery.filter.label,kind:this.searchQuery.filter.kind}))})),this.selectableState=new z.default(this.props.selectable||!1),this.props.listeners.add(this._multiSelection,"all",this._updateShowMultiselectBar),this.setState({chatlistKeyId:1}))},this._updateShowMultiselectBar=()=>{var{showMultiSelectBar:e}=this.state,t=this._multiSelection&&this._multiSelection.getSelected().length>0&&!this.props.hideMultiSelectBar;!1===e&&t&&this.setState({showMultiSelectBar:!0})},this._scrollChatListToTop=()=>{var e=this._refPanel;if(e){var t=e.scrollTop;0!==e.scrollTop&&(t<e.clientHeight?(0,ae.default)(e,"scroll",{duration:300,container:e,offset:-(e.scrollTop+e.getBoundingClientRect().top)}):e.scrollTop=0)}},this.getFilteredContacts=(e,t={},a=!1)=>{var r=(e||"").trim();if(!r&&this._isEmptyFilterQuery(t))return[];r=L.default.accentFold(r);var s=(0,Y.default)(r);return S.default.getFilteredContacts().filter((function(e){if(!e.searchMatch(r,s,t.label))return!1;if(!a){var i=p.default.get(e.id);if(i&&i.shouldAppearInList)return!1}return!0}))},this._getFilteredMessages=(e={})=>{var t;if(!this._isEmptyFilterQuery(e)&&e.label){var a=(null===(t=x.default.get(e.label))||void 0===t?void 0:t.labelItemCollection.filter((e=>e.parentType===F.LabelItemParentType.Msg)).map((e=>e.parentId)))||[];V.default.getMessagesById(a).then((e=>{this.setState({messages:e.messages})}))}},this._getFilteredChats=(e,t={})=>{var a=(e||"").trim();if(a||!this._isEmptyFilterQuery(t)){a=L.default.accentFold(a);var r=(0,Y.default)(a);return(0,D.canDisplayLabel)()?p.default.filter((e=>{var s=t.label&&e.contact.searchMatch(a,r,t.label),i=!a||e.contact.searchMatch(a,r),n=!t.kind&&!t.label||e.matchFilter(t);return s||i&&n})):p.default.filter((e=>e.contact.searchMatch(a,r)&&e.shouldAppearInList))}return p.default.filter((e=>!e.archive&&e.shouldAppearInList))},this.fullTextSearch=(e,t)=>{var a=e||this.searchQuery.query;(0,k.default)(a)||t&&t.label?(this.state.searching||this.debounceSetState({searching:!0}),this._fts()):this.isFTSSearching()?this._cancelSearch():this.ftsMsgs.reset()},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.isFTSSearching()||(0,k.default)(this.searchQuery.query||""))&&e.scrollTop+E.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this._mapGroupToContacts=(e,t)=>{for(var a=new Map,r=function(r){var s=e[r];s&&s.forEach((e=>{e&&(a.has(e)||a.set(e,[]),a.get(e).push(t[r]))}))},s=0;s<e.length;s++)r(s);var i=[];return a.forEach(((e,t)=>{i.push([t,e])})),i.sort((function(e,t){return e[1].length===t[1].length?null!=e[0].t&&null!=t[0].t?t[0].t-e[0].t:null!=e[0].t?-1:1:t[1].length-e[1].length})),i.slice(0,10)},this.onSearch=(e,t)=>{var a=(0,D.canDisplayLabel)()?t:{};if(!e&&this._isEmptyFilterQuery(a))return this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery({}),void this.onStopSearch();e===this.searchQuery.query&&this._isEmptyFilterQuery(a)||(this.fullTextSearch(e,a),this._commonGroupSearch(),this._throttledFilteredChats(e,a),this._throttledFilteredContacts(e,a),this.searchQuery.updateQuery(e),this.searchQuery.updateLabelQuery(a))},this._hasSearchText=()=>(0,D.canDisplayLabel)()?!!this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter):!!this.searchQuery.query,this.isFTSSearching=()=>{var e=this._batchState;return"searching"in e?e.searching:this.state.searching},this._cancelSearch=()=>{this._fts.cancel(),this._commonGroupSearch.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.reset(),this._ftsPromise&&this._ftsPromise.cancel(),this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this.setState({groupChats:[]}),this.isFTSSearching()&&this.debounceSetState({searching:!1},le)},this._cancelThrottled=()=>{this._throttledFilteredChats.cancel(),this._throttledFilteredContacts.cancel(),this._throttledOnScroll.cancel()},this.onStopSearch=()=>new Promise((e=>{var t;this._isEmptyFilterQuery(this.searchQuery.filter)||(t=this._smbFilterSession.sessionId,new U.default.ChatFilterEvent({actionType:U.default.CHAT_FILTER_ACTION_TYPES.SEARCH_WITH_FILTER,filterType:U.default.CHAT_FILTER_TYPES.OTHER_LABELS,sessionId:t}).commit()),this._cancelSearch(),this.searchQuery.clear(),this._cancelThrottled(),null!=this.refSearch&&this.refSearch.reset(),this.setState({chats:this._getFilteredChats(),contacts:this.getFilteredContacts(),searching:!1},(()=>e()))})),this.onFocusList=e=>{e.repeat||this._chatlist&&(this.refSearch&&!this.refSearch.cursorIsAtEnd()||(e.preventDefault(),I.default.shouldIndicateFocus(),this._chatlist.focusFirst()))},this.onOpenFirst=e=>{e.preventDefault();var t=this.searchQuery.query,a=this.searchQuery.filter,r=this._getFilteredChats(t,a)[0]||this.getFilteredContacts(t,a)[0];r&&p.default.find(r.id).then((e=>{this.onStopSearch(),I.default.shouldIndicateFocus(),g.default.openChatFromUnread(e).then((t=>{t&&g.default.focusChatTextInput(e)}))}))},this.onFocusSearch=()=>{g.default.existsDrawerLeft((e=>{e||(I.default.shouldIndicateFocus(),P.default.focus(this.refSearch))}))},this.indicateFocus=()=>{I.default.maybeIndicateFocus(this._refInputHotkey)},this.onScroll=e=>{this._throttledOnScroll(e.target)},this.getEmptyChatlistState=(e,t,a,r)=>e&&e.length||t&&t.length||a&&a.length||r&&r.length?null:this.props.labelFilter?this.state.searching?c.createElement("span",null):c.createElement(y.NoResultForLabel,{labelId:this.props.labelFilter}):this.searchQuery.query?this.state.searching?c.createElement(y.Searching,null):c.createElement(y.Search,null):p.default.some((e=>e.shouldAppearInList))?c.createElement(y.AllArchived,null):c.createElement(y.ListChats,null),this._setRefPanel=e=>{this._refPanel=e},this.onCancelLabelSelection=()=>{this.setState({showMultiSelectBar:!1}),this._multiSelection&&this._multiSelection.unsetAll(),this.selectableState&&this.selectableState.setSelectable(!!this.props.selectable)},this.ftsMsgs=new A.default,this.selection=new Q.default([],(e=>e.id.toString())),this.searchQuery=new q.default,this._multiSelection=this.props.multiSelection||new H.default([],(e=>e.id.toString())),this._fts=this.props.debounce((()=>{var e=this.searchQuery.trimmed;this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this.debounceSetState({searching:!0},le)})).then((()=>this.ftsMsgs.search({count:E.default.FTS_NUM_RESULTS,filter:this.searchQuery.filter,searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((e=>{e&&!e.canceled&&this.debounceSetState({searching:!1},le)})).catchType(b.Unmount,(()=>{})).catchType(Promise.CancellationError,(()=>{})).finally((()=>{this._ftsPromise=void 0})).catch((()=>{this.isFTSSearching()&&this.debounceSetState({searching:!1},le)}))}),E.default.FTS_TYPING_DELAY),this._throttledFilteredChats=this.props.throttle(((e,t)=>{var a=this._getFilteredChats(e,t);this.debounceSetState({chats:a},le,50)}),oe,{leading:!1,trailing:!0}),this._throttledFilteredContacts=this.props.throttle(((e,t)=>{var a=this.getFilteredContacts(e,t);this.debounceSetState({contacts:a},le,50)}),oe,{leading:!1,trailing:!0}),this._throttledOnScroll=this.props.throttle((e=>{this.shouldFTSSearch(e)&&this.fullTextSearch()}),100),this._commonGroupSearch=(0,l.default)((()=>{var e=this.searchQuery.trimmed;if(e){var t=this.getFilteredContacts(e,{},!0);if(0===t.length||t.length>5)this.setState({groupChats:[]});else{var a=(0,o.default)(t,(e=>(0,T.findCommonGroups)(e).then((()=>e.commonGroups)).catch((()=>{throw __LOG__(4,!0,new Error,!0)(ne()),SEND_LOGS("get from participants table failed when finding common groups"),new Error("get from participants table failed")}))));this._findCommonGroupsPromise&&this._findCommonGroupsPromise.cancel(),this._findCommonGroupsPromise=Promise.all(a).then((a=>{if(e===this.searchQuery.trimmed){var r=this._mapGroupToContacts(a,t);this.setState({groupChats:r})}})).catch((()=>{})).finally((()=>{this._findCommonGroupsPromise=null}))}}else this.setState({groupChats:[]})}),750);var{labelFilter:t}=this.props,a=this.props.labelFilter?{label:t}:void 0;this.state={searching:!!a,chats:this._getFilteredChats("",a),contacts:this.getFilteredContacts("",a),groupChats:[],showMultiSelectBar:!1,chatlistKeyId:0,filterPreset:a,textsize:C.default.get().textsize},this.searchQuery.updateLabelQuery(a),this._getFilteredMessages(a)}componentDidMount(){var{labelFilter:e,listeners:t}=this.props;e&&this.onSearch("",{label:e}),this._updateLabelFeatureFlagChange(),t.add(O.default,O.default.FEATURE_CHANGE_EVENT,this._updateLabelFeatureFlagChange),this.props.listeners.add(p.default,"remove",(e=>{if(this.searchQuery.query){var t=(0,n.default)(this.state.chats,e);this.state.chats&&t.length!==this.state.chats.length&&this.debounceSetState({chats:t})}else this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()})})),this.props.listeners.add(S.default,"remove",(e=>{if(this.searchQuery.query||!this._isEmptyFilterQuery(this.searchQuery.filter)){var t=(0,n.default)(this.state.contacts,e);this.state.contacts&&t.length!==this.state.contacts.length&&this.debounceSetState({contacts:t})}else this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()})})),this.props.listeners.add(p.default,"sort change:archive",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(S.default,"sort",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredContacts.cancel(),this.debounceSetState({contacts:this.getFilteredContacts()}))})),this.props.listeners.add(this.ftsMsgs,"bulk_remove reset",(()=>{!this.searchQuery.query&&this._isEmptyFilterQuery(this.searchQuery.filter)&&(this._throttledFilteredChats.cancel(),this.debounceSetState({chats:this._getFilteredChats()}))})),this.props.listeners.add(g.default,"focus_chat_search",this.onFocusSearch),this.props.listeners.add(g.default,"textsize_change",(e=>{this.debounceSetState({textsize:e})})),this.props.listeners.add(V.default,E.default.NEW_MSG_SENT,(()=>{this._hasSearchText()||!this._isEmptyFilterQuery(this.searchQuery.filter)?this.onStopSearch().then((()=>this._scrollChatListToTop())):this._scrollChatListToTop()}))}getClientWidth(){var e;return null===(e=this._refContainer.current)||void 0===e?void 0:e.clientWidth}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}componentWillUnmount(){this._cancelSearch(),this._cancelThrottled(),this._debounceSetState.cancel()}_isEmptyFilterQuery(e){return!e||!(e.label||e.kind)}_showUnread(){}_showArchivedPanel(){return(0,D.archiveV2Supported)()&&this.props.settings.showArchiveV2&&!this.state.showMultiSelectBar&&this.searchQuery.isEmptyQuery&&this.state.chats&&this.state.chats.length>0&&p.default.some((e=>e.archive))}render(){var{chats:e,contacts:t,groupChats:a,filterPreset:r,messages:s}=this.state,i=this.ftsMsgs.toArray(),n=this.getEmptyChatlistState(e,t,i,s);null==n&&(n=c.createElement(m.default,{key:this.state.chatlistKeyId,ref:(0,w.GetRef)((e=>{this._chatlist=e})),flatListController:this.flatListController,chats:e,contacts:t||[],messages:s||[],filterPreset:r,groupChats:a,isSearching:!!this._hasSearchText(),searchQuery:this.searchQuery,ftsResult:i,selection:this.selection,onFocusSearch:this.onFocusSearch,multiSelection:this._multiSelection,selectableState:this.selectableState}));var o,l={down:this.onFocusList},u=this.state.searching&&this.props.labelFilter||this.state.searching&&this.ftsMsgs.length?c.createElement("div",{key:"spinner",className:v.default.spinner},c.createElement(J.default,{stroke:6,size:24})):null,p=E.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));p&&(o=p.classname);var g,S,C,y,b,T=(0,d.default)(v.default.chatListPanel,o),N=this.ftsMsgs.hasMoreMsgs&&i.length||this._showUnread()?this.onScroll:void 0;if(this.state.showMultiSelectBar?g=c.createElement(te.default,{key:"multiSelectBar",displayName:"MultiSelect",escapable:!0,requestDismiss:this.onCancelLabelSelection},c.createElement(j.default,{theme:"chatlist-panel",selectedModels:this._multiSelection,labelEditEnabled:!0,iconColor:"#8d9194",onCancel:this.onCancelLabelSelection})):C=c.createElement(R.default,{key:"ListSearchHotKey",handlers:l,onFocus:this.indicateFocus,onRef:this._setRefInputHotkey,className:v.default.panelSearch},c.createElement(B.default,{ref:this.setRefSearch,onSearch:this.onSearch,onEnter:this.onOpenFirst,loading:this.state.searching,smbFilterSession:this._smbFilterSession,listFilterEnabled:!0})),this.props.labelFilter||(S=c.createElement(c.Fragment,null,c.createElement(_.default,{mute:W.default.globalMute(),settings:this.props.settings}),c.createElement(f.default,null),C,g)),this._showArchivedPanel()&&(y=c.createElement(h.default,null)),O.default.supportsFeature(O.default.F.MD_BACKEND)&&this._hasSearchText()){var I=re.default.relativeDateStr((0,se.getHistorySyncEarliestDate)());b=c.createElement(ie.default,{icon:c.createElement($.default,{name:"content-search"}),theme:"list",secondary:L.default.t(549,{date:I})},L.default.t(721))}return c.createElement("div",{id:"side",className:T,ref:this._refContainer},S,c.createElement(M.default,{flatListControllers:[this.flatListController],onRef:this._setRefPanel,className:v.default.panelBody,onScroll:N,id:"pane-side"},y,n,u,b))}}de.CONCERNS={settings:["showArchiveV2"]},de.displayName="ChatlistPanel";var ue=(0,K.default)((0,ee.default)((0,G.default)((0,Z.default)(de,de.CONCERNS))));t.default=class extends ue{getClientWidth(){return this.getComponent().getClientWidth()}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},68580:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=r(a(21403)),l=s(a(74269)),d=s(a(20642));class u extends n.Component{constructor(e){super(e),this._onSelectableChange=()=>{this.forceUpdate()},this.onSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.onSelect=e=>{e&&e.stopPropagation();var t,{onSelect:a,model:r}=this.props,{selected:s}=this.state;s?(this.setState({selected:!1,partialSelected:!1}),t=!1):t=!0,a&&a(r,t,!1)};var{multiSelection:t,initialSelection:a,model:r}=this.props,s=!1,i=!1;switch(a){case 0:s=!1,i=!1;break;case 1:s=!0,i=!1;break;case 2:s=!0,i=!0;break;default:s=t.isSelected(r),i=!1}this.state={selected:s,partialSelected:i,modelId:r.id.toString()}}componentDidMount(){this.props.listeners.add(this.props.multiSelection,this.props.model.id.toString(),this.onSelectChange),this.props.selectableState&&this.props.listeners.add(this.props.selectableState,"all",this._onSelectableChange)}componentDidUpdate(e){var{model:t,multiSelection:a,listeners:r}=e,s=t.id.toString(),i=this.props.model.id.toString();a&&s!==i&&(r.remove(a,s,this.onSelectChange),r.add(a,i,this.onSelectChange))}static getDerivedStateFromProps(e,t){var{modelId:a}=t,{multiSelection:r,model:s}=e,i=s.id.toString();return r&&a!==i?{modelId:i,selected:r.isSelected(s)}:null}render(){var{theme:e,selectableState:t,children:a}=this.props,r=(0,i.default)(l.default.checkboxChatControl,{[l.default.labelSelection]:"label-selection"===this.props.theme}),s=t&&t.isSelectable,d={};if(s&&e&&Object.assign(d,{theme:e}),s&&Object.assign(d,{noContext:!0}),null==a)return null;var u=n.Children.toArray(a)[0],c="label-selection"===e?this.onSelect:null;return n.createElement("div",{className:l.default.checkboxChatWrapper,onClick:c},s&&n.createElement("div",{className:r,onClick:this.onSelect},n.createElement(o.default,{onChange:this.onSelect,checked:this.state.selected,theme:this.state.selected&&this.state.partialSelected?o.CHECKBOX_THEME.PARTIAL:void 0})),n.cloneElement(u,d))}}u.displayName="CheckboxWrapper";var c=(0,d.default)(u);t.default=c},37097:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=r(a(2784)),o=r(a(65219)),l=s(a(17110)),d=s(a(20642)),u=s(a(74824));class c extends n.Component{constructor(e){super(e),this._renderPills=e=>{var{useShortName:t,isDisabled:a,onDelete:r}=this.props;return e.length?e.map((e=>{var s=a&&a(e.id)?null:{onDelete:r};return n.createElement(o.default,(0,i.default)({contact:e,useShortName:t},s,{type:o.Type.SMALL,key:e.id.toString(),theme:"list-names",waitIdle:!0}))})):null},this.props.listeners.add(this.props.selections,"all",(()=>{this.forceUpdate()}))}componentDidMount(){this.forceUpdate()}render(){return n.createElement(u.default,{transitionName:"slide-up-down-footer",className:l.default.selectedListContainer},this._renderPills(this.props.selections.getSelected()))}}c.displayName="ContactSelectionPill";var h=(0,d.default)(c);t.default=h},81610:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(50935)),d=s(a(71201)),u=s(a(99003)),c=s(a(38147)),h=a(75459),f=s(a(17957)),p=s(a(23539)),m=s(a(49984)),_=s(a(46526)),v=s(a(20642)),g=s(a(40210)),E=s(a(58885)),S=s(a(61941)),C=s(a(2825)),y=s(a(82631)),b=s(a(67134)),T=s(a(17693)),M=s(a(63498)),N=s(a(74824)),I=()=>{};class P extends n.Component{constructor(...e){super(...e),this.state={searchText:"",searchLabel:null,searchKind:null,isSearching:!1,contextMenu:null},this._emojiInputComponent=(0,u.default)(),this.refInput=n.createRef(),this.refContainer=n.createRef(),this._disableOnBlur=!1,this.onBlur=()=>{this._disableOnBlur||this.props.setTimeout((()=>{this.state.searchText||this.state.searchLabel||this.state.searchKind||this.onCancel()}),0)},this._handleChange=e=>{this.setState({searchText:e},(()=>{this.props.onSearch(e,{label:this.state.searchLabel,kind:this.state.searchKind})}))},this._renderSmbSearchKindDropDownItem=(e,t,a)=>{var r="chat_filter_".concat(e);return n.createElement(d.default,{a8n:r,key:r,action:this._updateSearchFilter.bind(this,{kind:e})},n.createElement("div",{className:_.default.kind},n.createElement(y.default,{name:t}),n.createElement("div",{className:_.default.kindName},a)))},this._renderMsgTypeFilter=()=>"chat-msg-search"===this.props.type?[]:[n.createElement("div",{className:_.default.filterTitle,key:"chat_filter_kind_header"},f.default.t(1603)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.UNREAD,"search-unread",f.default.t(1335)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.GROUP,"group",f.default.t(1717)),this._renderSmbSearchKindDropDownItem(l.default.SMB_SEARCH_FILTERS.BROADCAST,"search-broadcasts",f.default.t(1334))],this._renderFilterLabels=()=>{var e=p.default.toArray().reduce(((e,t)=>t.name&&t.count&&0!==t.count?[...e,n.createElement(d.default,{a8n:"label_item_".concat(t.id),key:"label_item_".concat(t.id),action:this._updateSearchFilter.bind(this,{label:t.id})},n.createElement("button",{className:_.default.labels},n.createElement(m.default,{labels:[t.id],showName:!0,theme:"label-filter"})))]:e),[]);return e.length>0?[n.createElement("div",{className:_.default.filterTitle,key:"chat_filter_label_header"},f.default.t(1337)),...e]:[]},this._renderFilterSelectorMenu=()=>[...this._renderMsgTypeFilter(),...this._renderFilterLabels()],this.onCancel=()=>{var e=this.refInput&&this.refInput.current;e&&!this.state.contextMenu&&(e.reset(),e.blur(),this.setState({searchLabel:null,searchKind:null,searchText:"",isSearching:!1}),this.props.onSearch("",void 0))},this.onReset=e=>{e.stopPropagation(),this.focus();var t=this.refInput.current;t&&(t.reset(),this.setState({searchLabel:null,searchKind:null}),this.props.onSearch("",void 0))},this._handleSearchButtonClick=()=>{this.focus()},this._onSearchOn=()=>{this.setState({isSearching:!0}),this.props.setTimeout(this.focus,0)},this.focus=()=>{(0,S.default)(this.refInput.current,"this.refInput.current").focus()},this._showFilterSelector=e=>{var t,{smbFilterSession:a}=this.props;a&&(t=a.newSessionId(),new g.default.ChatFilterEvent({actionType:g.default.CHAT_FILTER_ACTION_TYPES.OPEN,sessionId:t}).commit()),e.stopPropagation(),this.setState({contextMenu:{menu:this._renderFilterSelectorMenu(),anchor:e.target}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._updateSearchFilter=e=>{var{smbFilterSession:t}=this.props;this.state.contextMenu&&this.closeContextMenu(),this.setState({searchLabel:e.label,searchKind:e.kind}),t&&function(e,t){new g.default.ChatFilterEvent({actionType:g.default.CHAT_FILTER_ACTION_TYPES.SELECT_FILTER,filterType:O(t),sessionId:e}).commit()}(t.sessionId,e),this.props.onSearch("",e)},this._labelSelectorMouseEnter=()=>{(0,h.canDisplayLabel)()&&(this._disableOnBlur=!0)},this._labelSelectorMouseLeave=()=>{this._disableOnBlur=!1},this.onContextClose=()=>{this.setState({contextMenu:null})},this._constructSearchPlaceholder=e=>n.createElement("div",{"data-a8n":o.default.key("input-placeholder"),className:_.default.labelSearchPlaceholder},e)}componentWillUnmount(){this.onCancel()}componentDidMount(){this._checkIfActive(),this.props.listeners.add(E.default,l.default.NEW_MSG_SENT,(()=>{(this.state.searchKind||this.state.searchLabel)&&this.onCancel()}))}componentDidUpdate(){this._checkIfActive()}indicateFocus(){c.default.shouldIndicateFocus(),c.default.maybeIndicateFocus(this.refContainer.current)}_checkIfActive(){if(this.state.isSearching&&!this.state.searchText&&!this.state.searchLabel&&!this.state.searchKind){var e=this.refContainer&&this.refContainer.current;e&&e.contains(document.activeElement)||this.onCancel()}}cursorIsAtEnd(){return(0,S.default)(this.refInput.current,"this.refInput.current").cursorIsAtEnd()}select(){(0,S.default)(this.refInput.current,"this.refInput.current").select()}reset(){var e=this.refInput.current;e&&e.reset()}render(){var e,{loading:t,placeholder:a,spellCheck:r,listFilterEnabled:s}=this.props,{isSearching:d,searchText:u,searchLabel:c,searchKind:m}=this.state,v=null;d&&(t?v=n.createElement("div",{className:_.default.iconSpinner,key:"icon-clear-search",onClick:this.onReset},n.createElement(C.default,{size:20,stroke:5,color:"highlight"})):u.length||c||m?v=n.createElement("button",{className:_.default.iconCloseSearch,key:"icon-clear-search",onClick:this.onReset},n.createElement(y.default,{name:"x-alt"})):(0,h.canDisplayLabel)()&&s&&(v=n.createElement("button",{className:_.default.iconLabelSelect,key:"icon-select-label",onClick:this._showFilterSelector},n.createElement(y.default,{name:"filter"})))),d&&(e=n.createElement(T.default,{displayName:"ListSearch",escapable:!0,requestDismiss:this.onCancel,requestFocus:this.focus}));var g,E,S=a||f.default.t(1280),b=d?this.onCancel:this._handleSearchButtonClick,P=(0,i.default)(_.default.listSearch,{[_.default.active]:d||c||m});this.state.contextMenu&&(g=n.createElement(T.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.onContextClose},n.createElement(M.default,{contextMenu:this.state.contextMenu}))),!u&&(0,h.canDisplayLabel)()&&(c?E=this._constructSearchPlaceholder(f.default.t(872,{labelName:p.default.assertGet(c).name})):m===l.default.SMB_SEARCH_FILTERS.GROUP?E=this._constructSearchPlaceholder(f.default.t(1336)):m===l.default.SMB_SEARCH_FILTERS.UNREAD?E=this._constructSearchPlaceholder(f.default.t(1338)):m===l.default.SMB_SEARCH_FILTERS.BROADCAST&&(E=this._constructSearchPlaceholder(f.default.t(1333))));var A=this._emojiInputComponent;return n.createElement("div",{ref:this.refContainer,onMouseEnter:this._labelSelectorMouseEnter,onMouseLeave:this._labelSelectorMouseLeave,className:P},n.createElement("button",{"data-a8n":o.default.key("icon-search-morph"),className:_.default.iconSearchMorph,onMouseDown:b},n.createElement("div",{className:(0,i.default)(_.default.iconMorph,_.default.iconMorphBack)},n.createElement(y.default,{name:"back"})),n.createElement("div",{className:(0,i.default)(_.default.iconMorph,_.default.iconMorphSearch)},n.createElement(y.default,{name:"search"}))),n.createElement(N.default,{transitionName:"pop"},v,g),n.createElement("div",{"data-a8n":o.default.key("input-placeholder"),className:_.default.inputPlaceholder},u?null:S),E,n.createElement("label",{className:_.default.contInputSearch},n.createElement(A,{a8n:"chat-list-search",ref:this.refInput,theme:"list-search",tabOrder:l.default.TAB_ORDERS.CHAT_LIST_SEARCH,spellCheck:r,onBlur:this.onBlur,onFocus:d?I:this._onSearchOn,onChange:d?this._handleChange:I,onEnter:this.props.onEnter})),e)}}P.displayName="ListSearch";var A=(0,b.default)((0,v.default)(P));function O(e){switch(e.kind){case l.default.SMB_SEARCH_FILTERS.UNREAD:return g.default.CHAT_FILTER_TYPES.UNREAD;case l.default.SMB_SEARCH_FILTERS.GROUP:return g.default.CHAT_FILTER_TYPES.GROUP;case l.default.SMB_SEARCH_FILTERS.BROADCAST:return g.default.CHAT_FILTER_TYPES.BROADCAST_LIST;default:return g.default.CHAT_FILTER_TYPES.OTHER_LABELS}}t.default=class extends A{focus(){this.getComponent().focus()}cursorIsAtEnd(){return this.getComponent().cursorIsAtEnd()}reset(){this.getComponent().reset()}select(){this.getComponent().select()}}},4859:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SEARCH_EVENT=void 0;var s=r(a(60417)),i=r(a(75652)),n=r(a(28267)),o="SEARCH_EVENT";t.SEARCH_EVENT=o;class l extends n.default{constructor(...e){super(...e),this.query="",this.filter={}}get trimmed(){return this.query.trim()}get highlighted(){var e=this.trimmed.toLowerCase().split(" ");return(0,i.default)((0,s.default)(e))}get _isEmptySearchTerm(){return""===this.trimmed||!this.trimmed}get isEmptyQuery(){return this._isEmptySearchTerm&&!this.filter.kind&&!this.filter.label}updateQuery(e){var t=this.query;this.query=e,e.trim()!==t&&this.trigger(o)}updateLabelQuery(e){this.filter=e||{}}clear(){this.updateQuery("")}}t.default=l},60474:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleLabel=i;var s=r(a(2784));function i({children:e}){return s.createElement("span",{"aria-label":e})}i.displayName="InvisibleLabel"},15566:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=a(12073),l=s(a(17707)),d=s(a(79711)),u=s(a(9386)),c=s(a(50935)),h=s(a(43225)),f=a(19741),p=r(a(96452)),m=a(95595),_=s(a(18120)),v=s(a(71559)),g=s(a(98294)),E=s(a(17957)),S=s(a(20642)),C=s(a(80521)),y=s(a(87095)),b=s(a(61941)),T=s(a(93714)),M=a(59420),N=s(a(11086)),I=a(32544),P=a(10131),A=a(40263),O=r(a(75074)),D=a(58269),w=s(a(76022));function R(){var e=(0,i.default)(["chatAction:sendRevokeMsgs fail"]);return R=function(){return e},e}function k(){var e=(0,i.default)(["chatAction:sendDeleteMsgs dropped"]);return k=function(){return e},e}function L(){var e=(0,i.default)(["chatAction:sendUnstarMsgs dropped"]);return L=function(){return e},e}function x(){var e=(0,i.default)(["chatAction:sendStarMsgs dropped"]);return x=function(){return e},e}function F(){var e=(0,i.default)(["DoNotDisturbSettings:globalMuteDurationLabel non standard global mute duration:",""]);return F=function(){return e},e}function B(e){switch(e){case 1:return E.default.t(741);case 8:return E.default.t(743);case 24:return E.default.t(740);case 168:return E.default.t(742);default:return __LOG__(2)(F(),e),E.default.t(739)}}class G extends n.PureComponent{constructor(...e){super(...e),this._onAttachProduct=({product:e,onSend:t})=>{d.default.openModal(n.createElement(N.default,{product:e,onSend:t}),{transition:"modal-flow",uim:this.props.uim})},this._onProductImageViewer=(e,t)=>{d.default.openModalMedia(n.createElement(T.default,{activeProductImage:e.activeProductImage,productImageCollection:e.productImageCollection,getZoomNode:e.getZoomNode,product:e.product,sessionId:t}),{transition:"media-viewer",uim:this.props.uim})},this.openGroupV4InviteRequestFlow=(e,t,a,r)=>{d.default.openModal(n.createElement(v.default,{participantNeedInvite:e,groupGid:t,subject:a,groupDesc:r}))},this.onToggleMute=(e,t)=>{if(t){var a=E.default.t(1042,{name:e.title()});d.default.openModal(n.createElement(y.default,{title:a,mute:e.mute,onMute:t=>{e.pendingAction++,e.mute.mute(t,!0).finally((()=>{e.pendingAction--}))}}),{transition:"modal",uim:this.props.uim})}else e.pendingAction++,e.mute.unmute(!0).finally((()=>{e.pendingAction--}))},this._onToggleMuteAll=(e,t)=>{t?d.default.openModal(n.createElement(y.default,{mute:e,title:E.default.t(1403),onMute:(t,a)=>{e.mute(t),d.default.openToast(n.createElement(O.default,{msg:B(a),id:(0,O.genId)()}))},muteAll:!0}),{transition:"modal",uim:this.props.uim}):d.default.openModal(n.createElement(u.default,{onOK:()=>{e.unmute(),d.default.closeModal(),d.default.openToast(n.createElement(O.default,{msg:E.default.t(745),id:(0,O.genId)()}))},okText:E.default.t(83),onCancel:()=>d.default.closeModal(),cancelText:E.default.t(1593)},E.default.t(529)))},this.onDeleteOrExit=e=>{var t,a=t=>{e.pendingAction++,t.finally((()=>{e.pendingAction--}))},r=e.isGroup&&e.isReadOnly||e.isUser||e.isBroadcast,s=()=>d.default.openModal(n.createElement(h.default,{chat:e,onDeleteOrExit:a,isDelete:r}),{transition:"modal",uim:this.props.uim}),i=null!==(t=(0,b.default)(C.default,"localStorage").getItem(c.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";_.default.supportsFeature(_.default.F.MD_BACKEND)&&r&&"true"===i?d.default.openModal(n.createElement(u.default,{title:E.default.t(1730),onOK:()=>{(0,b.default)(C.default,"localStorage").setItem(c.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),s()},okText:E.default.t(1611)},n.createElement(A.TextDiv,{theme:"muted"},E.default.t(1729)))):s()},this.onPin=(e,t)=>{_.default.supportsFeature(_.default.F.MD_BACKEND)?d.default.openModal(n.createElement(u.default,{title:E.default.t(1738),onOK:()=>{d.default.closeModal()},okText:E.default.t(1604)},E.default.t(1737))):(e.pendingAction++,(0,P.setPin)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--})))},this.onClear=e=>{var t,a=()=>d.default.openModal(n.createElement(l.default,{chat:e}),{transition:"modal",uim:this.props.uim}),r=null!==(t=(0,b.default)(C.default,"localStorage").getItem(c.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE))&&void 0!==t?t:"true";_.default.supportsFeature(_.default.F.MD_BACKEND)&&"true"===r?d.default.openModal(n.createElement(u.default,{title:E.default.t(1730),onOK:()=>{(0,b.default)(C.default,"localStorage").setItem(c.default.KEY_SYNCD_FIRST_CLEAR_OR_DELETE,"false"),a()},okText:E.default.t(1611)},n.createElement(A.TextDiv,{theme:"muted"},E.default.t(1729)))):a()},this.onArchive=(e,t)=>{e.pendingAction++,(0,I.setArchive)(e,t).catch((()=>{})).finally((()=>{e.pendingAction--}))},this.onMarkUnread=(e,t)=>{e.pendingAction++,(0,D.markUnread)(e,t).finally((()=>{e.pendingAction--}))},this._onSendStarMsgs=(e,t,a,r="LEFT")=>{if(!t)return Promise.reject(new p.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new p.ActionError);var s=a||(0,o.genId)(),i=t.length,l={count:i,_plural:i},u=new o.ActionType(E.default.t(149,l)),c=e.sendStarMsgs(t,!0).then((()=>new o.ActionType(E.default.t(148,l),{actionText:E.default.t(203),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,s,r)}))).catchType(f.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new o.ActionType(E.default.t(146,l)):new o.ActionType(E.default.t(147,l)):void 0)).catch((()=>(__LOG__(3)(x()),new o.ActionType(E.default.t(147,l),{actionText:E.default.t(199),actionHandler:this._onSendStarMsgs.bind(this,e,t,s,r)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:s,toastPosition:r,initialAction:u,pendingAction:c})),c},this._onSendUnstarMsgs=(e,t,a,r="LEFT")=>{if(!t)return Promise.reject(new p.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new p.ActionError);var s=a||(0,o.genId)(),i=t.length,l={count:i,_plural:i},u=new o.ActionType(E.default.t(155,l)),c=e.sendStarMsgs(t,!1).then((()=>new o.ActionType(E.default.t(153,l),{actionText:E.default.t(203),actionHandler:this._onSendStarMsgs.bind(this,e,t,s,r)}))).catchType(f.ServerStatusCodeError,(t=>t.status>=400?e.isEphemeralSettingOn()?new o.ActionType(E.default.t(151,l)):new o.ActionType(E.default.t(152,l)):void 0)).catch((()=>(__LOG__(3)(L()),new o.ActionType(E.default.t(152,l),{actionText:E.default.t(199),actionHandler:this._onSendUnstarMsgs.bind(this,e,t,s,r)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:s,toastPosition:r,initialAction:u,pendingAction:c})),c},this._onSendDeleteMsgs=(e,t,a,r,s="LEFT")=>{if(!t)return Promise.reject(new p.ActionError);if(t.some((e=>!e.id)))return Promise.reject(new p.ActionError);var i=t.length,l=r||(0,o.genId)(),u={count:i,_plural:i},c=new o.ActionType(E.default.t(145,u)),h=e.sendDeleteMsgs(t,a).then((e=>{if(e===i)return new o.ActionType(E.default.t(144,u));var t=i-e;return u={count:t,_plural:t},new o.ActionType(E.default.t(143,u))})).catch((()=>(__LOG__(3)(k()),new o.ActionType(E.default.t(143,u),{actionText:E.default.t(199),actionHandler:this._onSendDeleteMsgs.bind(this,e,t,!1,l,s)}))));return d.default.openToast(n.createElement(o.ActionToast,{id:l,toastPosition:s,initialAction:c,pendingAction:h})),h},this._onSendRevokeMsgs=(e,t,a,r,s="LEFT")=>{var i=r;if(!t)return Promise.reject(new p.ActionError);var[l,u]=t.reduce(((e,t)=>{var[a,r]=[t.canRevoke(),t.type!==c.default.MSG_TYPE.GROUPS_V4_INVITE||t.isGroupsV4InviteExpired?null:t];return[e[0]||!a,e[1]||r]}),[!1,null]);if(l)return Promise.reject(new p.ActionError);u&&this._handleGroupInviteMsgRevoke(e,u);var h=t.length;i=i||(0,o.genId)();var f={count:h,_plural:h},m=new o.ActionType(E.default.t(145,f)),_=e.sendRevokeMsgs(t,a).then((e=>{var t=e.filter((e=>e!==M.SendMsgResult.OK)).length;if(t>0)throw new Error("".concat(t," / ").concat(e.length," dropped"));return new o.ActionType(E.default.t(144,f))})).catch((()=>(__LOG__(3)(R()),e.isEphemeralSettingOn()?new o.ActionType(E.default.t(142,f)):new o.ActionType(E.default.t(143,f)))));return d.default.openToast(n.createElement(o.ActionToast,{id:i,toastPosition:s,initialAction:m,pendingAction:_})),_},this._handleGroupInviteMsgRevoke=(e,t)=>{var a=t.inviteGrp,r=(0,m.getMaybeMeUser)().toString();w.default.revokeGroupV4Invite([t.to.toString()],a,r)}}componentDidMount(){this.props.listeners.add(d.default,"mute_all",this._onToggleMuteAll),this.props.listeners.add(d.default,"mute_chat",this.onToggleMute),this.props.listeners.add(d.default,"delete_or_exit_chat",this.onDeleteOrExit),this.props.listeners.add(d.default,"archive_chat",this.onArchive),this.props.listeners.add(d.default,"clear_chat",this.onClear),this.props.listeners.add(d.default,"mark_chat_unread",this.onMarkUnread),this.props.listeners.add(d.default,"pin_chat",this.onPin),this.props.listeners.add(d.default,"send_star_msgs",this._onSendStarMsgs),this.props.listeners.add(d.default,"send_unstar_msgs",this._onSendUnstarMsgs),this.props.listeners.add(d.default,"send_delete_msgs",this._onSendDeleteMsgs),this.props.listeners.add(d.default,"send_revoke_msgs",this._onSendRevokeMsgs),this.props.listeners.add(d.default,"product_image_viewer_modal",this._onProductImageViewer),this.props.listeners.add(d.default,"attach_product",this._onAttachProduct),this.props.listeners.add(d.default,"open_group_v4_invite_request_flow",this.openGroupV4InviteRequestFlow)}render(){return null}}G.displayName="ActionListener";var U=(0,g.default)((0,S.default)(G));t.default=U},72696:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(91460),n=s(a(47677)),o=r(a(2784)),l=s(a(79711)),d=a(78986),u=s(a(61124)),c=s(a(6155)),h=s(a(91378)),f={duration:300,easing:[.1,.82,.25,1]};class p extends o.Component{constructor(...e){super(...e),this.containerHeight=0,this._childAnimations=[],this.didCancel=!1,this._unmounting=!1,this.state={children:this.props.children},this._refChildren=new Map,this._setRefChild=(e,t)=>{t?this._refChildren.set(e,t):this._refChildren.delete(e)},this._setChildRefCache=new c.default(this._setRefChild),this._heightCallbackCache=new Map}componentWillUnmount(){this._unmounting=!0}_getHeightChange(e,t){return e.reduce(((e,a)=>{if(a<t)return e;var r=this._refChildren.get("".concat(a));return r?e+r.clientHeight:e}),0)}_animateElement(e,t,a,r){this._childAnimations[e]&&(this.didCancel=!0,this._childAnimations[e].cancel());var s=a>0?[0,a]:[-a,0];return this._childAnimations[e]=(this._childAnimations[e]||Promise.resolve()).then((()=>(0,h.default)(t,{translateY:s},f))).then((()=>(0,i.delayMs)(100))).cancellable().then((()=>(a<0&&(r.includes(e)?t.style.opacity="0":t.style.transform=""),e))).catchType(Promise.CancellationError,(()=>((0,h.default)(t,"stop",!0),t.style.transform="",!1))).finally((t=>{if(!this.didCancel)return delete this._childAnimations[e],l.default.setUiBusy(!1,"animation_group"),t;this.didCancel=!1})),this._childAnimations[e]}_transitionAffected(e,t){if(!e)return Promise.resolve(new Set);for(var a=[],[r]=e.slice(-1),s=0;s<=r;++s){var i=this._refChildren.get("".concat(s));i&&a.push(this._animateElement(s,i,(t?1:-1)*this._getHeightChange(e,s),e))}return Promise.all(a).then((e=>new Set(e.filter((e=>!1!==e)))))}_notifyHeightChange(e,t){e.length&&this.props.onHeightChange&&this.props.onHeightChange((t?1:-1)*this._getHeightChange(e,0))}static getDerivedStateFromProps(e,t){var a=e.children,r=t.children,s=!1,i=r.map(((e,t)=>{var r,i=null!==(r=a[t])&&void 0!==r?r:e;return i!==e&&(s=!0),i}));return s?{children:i}:null}componentDidUpdate(e,t){var a=this.state.children,r=t.children;(0,n.default)(a.length===r.length&&this.props.children.length===a.length,"The number of children in an AnimationGroup must remain constant. Render null for children you don't want to appear.");var s=a.map(((e,t)=>t)),i=s.filter((t=>null!=this.props.children[t]&&null==e.children[t])),o=s.filter((t=>null==this.props.children[t]&&null!=e.children[t]));o.length>0&&(o.forEach((()=>{this.busyId=d.UIBusyTasks.setBusy(this.busyId),l.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(o,!1),this._transitionAffected(o,!1).then((e=>{this._unmounting||0!==e.size&&this.setState((t=>({children:t.children.map(((t,a)=>e.has(a)?null:t))})),(()=>{d.UIBusyTasks.decBusy(this.busyId)}))}))),i.length>0&&(i.forEach((()=>{this.busyId=d.UIBusyTasks.setBusy(this.busyId),l.default.setUiBusy(!0,"animation_group")})),this._notifyHeightChange(i,!0),this._transitionAffected(i,!0).then((()=>{d.UIBusyTasks.decBusy(this.busyId)})))}componentDidMount(){var e=this.state.children.reduce(((e,t,a)=>{var r=this._refChildren.get("".concat(a));return r?(r.style.transform="translateY(0)",e+r.clientHeight):e}),0);this.props.onHeightChange(e,!0)}_childHeightCallback(e){var t=this._heightCallbackCache.get(e);if(t)return t;var a=this._refChildren.get("".concat(e)),r=a?a.clientHeight:0,s=({height:e})=>{r&&e&&e!==r?(this.props.onHeightChange(e-r),r=e):r=e};return this._heightCallbackCache.set(e,s),s}_cloneChild(e,t){if(!e)return e;var a=this._setChildRefCache.getRefSetter("".concat(t));return o.cloneElement(e,{ref:a})}render(){return this.state.children.map(((e,t)=>o.createElement(u.default,{key:".".concat(t),onResize:this._childHeightCallback(t)},this._cloneChild(e,t))))}}t.default=p,p.displayName="AnimationGroup"},85567:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=s.forwardRef((function({children:e},t){return s.createElement("div",{ref:t},e)}));t.default=i},43596:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(54073)),o=r(a(2784)),l=s(a(20838)),d=a(14457),u=s(a(35387)),c=s(a(17957)),h=a(65935),f=s(a(61941)),p=s(a(61124)),m=s(a(17693)),_=s(a(68768));function v(e){var[t,,a]=e.polygonVertices;return"".concat((0,f.default)(t.x,"topLeft.x"),":").concat((0,f.default)(t.y,"topLeft.y"),":").concat((0,f.default)(a.x,"bottomRight.x"),":").concat((0,f.default)(a.y,"bottomRight.y"))}function g(e,t){if(null==e)return null;var a=e.parentNode;if(!(null!=a&&a instanceof HTMLElement))return null;var[r,s,i]=t.polygonVertices;(0,f.default)(r.x,"topLeft.x")!==(0,f.default)(s.x,"topRight.x")&&(0,f.default)(s.y,"topRight.y")!==(0,f.default)(i.y,"bottomRight.y")||([,r,s,i]=t.polygonVertices);var n=(0,f.default)(r.x,"topLeft.x"),o=(0,f.default)(r.y,"topLeft.y"),l=(0,f.default)(s.x,"topRight.x"),d=(0,f.default)(s.y,"topRight.y"),u=(0,f.default)(i.y,"bottomRight.y"),c=n*a.offsetWidth,h=o*a.offsetHeight,p=a.offsetWidth*(n-l),m=a.offsetHeight*(o-d),_=n>l?Math.PI:0,v=p?Math.atan(m/p)+_:0,g=180*v/Math.PI,E=Math.abs(p/Math.cos(v)),S=Math.abs(a.offsetHeight*(u-d)/Math.cos(v)),C="rotate(".concat(g,"deg)");return{left:Math.round(c),top:Math.round(h),width:Math.round(E),height:Math.round(S),transform:C,transformOrigin:"top left"}}class E extends o.Component{constructor(...e){super(...e),this._annotationRef=o.createRef()}componentDidMount(){this.forceUpdate()}render(){var{annotation:e}=this.props;return o.createElement("div",{ref:this._annotationRef,className:l.default.annotation,style:g(this._annotationRef.current,e),onClick:t=>this.props.onClick(t,e),onKeyDown:t=>this.props.onKeyDown(t,e),role:"button","aria-label":e.location.name,tabIndex:"0"})}}E.displayName="AnnotationItem";class S extends o.Component{constructor(...e){super(...e),this.state={tooltip:null},this._displayTooltip=(e,t,a)=>{if(null!=t||null!=a){var{location:r}=e,s=(0,h.getMapUrl)((0,f.default)(r.degreesLatitude,"location.degreesLatitude"),(0,f.default)(r.degreesLongitude,"location.degreesLongitude")),n={menu:o.createElement(u.default,{href:s,className:l.default.tooltip,onClick:this._hideTooltip},c.default.t(1300)),type:d.MenuType.tooltip,dirX:d.DirX.RIGHT,dirY:d.DirY.TOP};null!=t?(t.persist(),n=(0,i.default)((0,i.default)({},n),{},{event:t,autoFocus:!1,offsetX:0,offsetY:0})):n=(0,i.default)((0,i.default)({},n),{},{anchor:a,autoFocus:!0}),this.setState({tooltip:n},(()=>{this.props.onTooltipDisplay&&this.props.onTooltipDisplay()}))}},this._hideTooltip=()=>{this.setState({tooltip:null},(()=>{this.props.onTooltipDismiss&&this.props.onTooltipDismiss()}))},this._handleAnnotationClick=(e,t)=>{e.stopPropagation(),this._displayTooltip(t,e)},this._handleAnnotationKeyDown=(e,t)=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this._displayTooltip(t,null,e.target))},this.handleResize=(0,n.default)((()=>{this._hideTooltip()}),100)}componentWillUnmount(){this.handleResize.cancel()}render(){var{annotations:e}=this.props;if(!e.length)return null;var t=this.state.tooltip&&o.createElement(m.default,{displayName:"InteractiveAnnotationTooltip",popable:!0,escapable:!0,requestDismiss:this._hideTooltip,requestRecentFocusOnUnmount:!1},o.createElement(_.default,{tooltip:this.state.tooltip}));return o.createElement(o.Fragment,null,e.map((e=>function(e){var{polygonVertices:t,location:a}=e,[r,,s]=t;return null!=r&&null!=r.x&&null!=r.y&&null!=s&&null!=s.x&&null!=s.y&&null!=a.degreesLatitude&&null!=a.degreesLongitude}(e)&&o.createElement(E,{key:v(e),annotation:e,onClick:t=>this._handleAnnotationClick(t,e),onKeyDown:t=>this._handleAnnotationKeyDown(t,e)}))),t,o.createElement(p.default,{onResize:this.handleResize}))}}t.default=S,S.displayName="Annotation"},26387:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(71201)),o=r(a(17957)),l=r(a(40207));class d extends i.PureComponent{render(){var{chat:e,disabled:t}=this.props,a=this.props.onArchive.bind(null,!e.archive);return i.createElement(n.default,{a8n:"mi-archive",action:a,key:"ArchiveMenuItem",disabled:t},e.archive?o.default.t(1406):o.default.t(228))}}d.CONCERNS={chat:["archive"]},d.displayName="ArchiveMenuItem";var u=(0,l.default)(d,d.CONCERNS);t.default=u},18984:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(20642)),l=r(a(61941)),d=r(a(67134)),u=r(a(77626)),c=s(a(12767));class h extends i.Component{constructor(...e){super(...e),this.startCheckForSuccess=()=>{this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)},this.clearCheckForSuccess=()=>{this.checkForSuccessInterval&&(this.props.clearInterval(this.checkForSuccessInterval),this.checkForSuccessInterval=0,this.checkIteration=0)},this.checkForSuccess=()=>{if(c.default.state===c.STATE.CONNECTED){this.checkIteration++;var e=this.props.url;if(this.checkIteration>40)this.onPlayerError({target:{src:e,error:{code:window.MediaError.MEDIA_ERR_NETWORK}}});else{var t=(0,l.default)(this._audioElement,"this._audioElement"),a=t.buffered;a&&a.length&&a.end(0)>0&&this.onPlaying({target:t})}}},this.onPlayerError=e=>{this.clearCheckForSuccess(),this.props.onError&&this.props.onError(e.target.src)},this.onOtherPlaying=e=>{e!==this&&(0,l.default)(this._audioElement,"this._audioElement").pause()},this.onPlaying=e=>{this.clearCheckForSuccess(),n.default.mediaPlaying(this),this.props.onPlay&&this.props.onPlay(e)},this._setRefAudio=e=>{this._audioElement=e,null!=this.props.setRefAudio&&this.props.setRefAudio(e)}}componentDidMount(){var{listeners:e}=this.props,t=(0,l.default)(this._audioElement,"this._audioElement");this._updatePlaybackRate(),e.add(t,"error",this.onPlayerError,!0),e.add(t,"playing",this.onPlaying),e.add(n.default,"mediaPlaying",this.onOtherPlaying),(u.default.isGecko||u.default.isSafari)&&(this.props.autoPlay?(this.checkIteration=0,this.checkForSuccessInterval=this.props.setInterval(this.checkForSuccess,250)):this.props.autoPlay?this.startCheckForSuccess():e.add(t,"play",this.startCheckForSuccess))}componentDidUpdate(){this._updatePlaybackRate()}_updatePlaybackRate(){var e=(0,l.default)(this._audioElement,"this._audioElement"),{playbackRate:t}=this.props;e.defaultPlaybackRate===t&&e.playbackRate===t||(e.defaultPlaybackRate=e.playbackRate=null!=t?t:1)}render(){return i.createElement("audio",{ref:this._setRefAudio,src:this.props.url,className:this.props.className,onClick:this.props.onClick,controls:this.props.controls,preload:this.props.preload,type:this.props.type,autoPlay:this.props.autoPlay},this.props.children)}}h.displayName="AudioTag";var f=(0,o.default)((0,d.default)(h));t.default=f},72174:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(61104)),l=s(a(2825));class d extends n.Component{render(){var{className:e}=this.props;return n.createElement("div",{className:(0,i.default)(o.default.container,e)},n.createElement(l.default,{size:50,stroke:3,color:"solidwhite"}))}}t.default=d,d.displayName="AvatarSpinner"},43903:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(2784)),n=r(a(72779)),o=r(a(90631)),l=r(a(82631));function d(e){var{theme:t,svg:a}=e,r=(0,n.default)(o.default.badge,{[o.default.pending]:"pending"===t,[o.default.warning]:"warning"===t}),s=a?i.createElement(l.default,{className:o.default.icon,name:a}):null;return i.createElement("div",{className:r},s)}d.displayName="Badge"},54374:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=a(8701),o=r(a(2784)),l=s(a(58922)),d=s(a(77626)),u=s(a(2694));function c(){var e=(0,i.default)(["video.play() promise rejected: "," The error code is ","."]);return c=function(){return e},e}function h(){var e=(0,i.default)(["video.play() promise rejected w/ AbortError: ",", error code: ",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["Assertion failed! ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["srcObject is not supported in video tag while src is not set."]);return p=function(){return e},e}class m extends o.PureComponent{constructor(...e){super(...e),this.refVideo=null,this._autoPlayErrorCount=0,this.setRefVideo=e=>{e!==this.refVideo&&(this.refVideo&&this.refVideo.removeEventListener("playing",this.onPlaying),this.refVideo=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:e.src||__LOG__(3)(p()),e&&e.addEventListener("playing",this.onPlaying),this.props.autoPlay&&this.setupAutoplay(e,d.default.isGecko||d.default.isSafari)))},this.setupAutoplay=(e,t)=>{this.props.autoPlay&&(e.removeEventListener("playing",this._onceAutoplay),e.addEventListener("playing",this._onceAutoplay),(e.srcObject||t&&e.paused)&&this.play())},this._onceAutoplay=()=>{var e=this.refVideo;if(e&&(e.removeEventListener("playing",this._onceAutoplay),!e.videoHeight||!e.videoWidth)){this.pause(),this.play();var t;this._autoPlayErrorCount<6&&this._autoPlayErrorCount++,this._autoPlayErrorCount>1&&this._autoPlayErrorCount<6&&(t="the height and width of the video is not zero, count (larger than 1): ".concat(this._autoPlayErrorCount)),this._autoPlayErrorCount>=6&&(t="the height and width of the video is not zero, count larger than ".concat(this._autoPlayErrorCount)),t&&(__LOG__(4,void 0,new Error,!0)(f(),t),SEND_LOGS("non-zero height and width"))}},this.onPlaying=()=>{var e=this.refVideo;e&&(e.paused||null!=e.videoHeight&&e.videoHeight>0&&null!=e.videoWidth&&e.videoWidth>0&&this.props.onPlaying&&this.props.onPlaying())},this.getVolume=()=>this.refVideo?this.refVideo.volume:0,this.setVolume=e=>{this.refVideo&&(this.refVideo.volume=e)},this.getMuted=()=>!!this.refVideo&&this.refVideo.muted,this.setMuted=e=>{this.refVideo&&(this.refVideo.muted=e)},this.getPaused=()=>!this.refVideo||this.refVideo.paused,this.getCurrentTime=()=>this.refVideo?this.refVideo.currentTime:0,this.setCurrentTime=e=>{this.refVideo&&(this.refVideo.currentTime=e)},this.getDuration=()=>this.refVideo?this.refVideo.duration:0,this.setDuration=e=>{this.refVideo&&(this.refVideo.duration=e)},this.getBuffered=()=>this.refVideo?this.refVideo.buffered:null}underlyingVideo(){return this.refVideo}componentDidUpdate(e){var t=this.refVideo;null!=t&&this.props.autoPlay&&!e.autoPlay&&this.setupAutoplay(t,!0)}play(){this._play()}_play(){var e=this.refVideo;return e?e.paused?(e.removeEventListener("playing",this.onPlaying),(0,l.default)(e).then((()=>{e&&e.addEventListener("playing",this.onPlaying),this.onPlaying()})).catch((t=>{if(e&&e.addEventListener("playing",this.onPlaying),t.name!==n.ABORT_ERROR){var a=this.refVideo&&this.refVideo.error&&this.refVideo.error.message?this.refVideo.error.message:"",r=this.refVideo&&this.refVideo.error?this.refVideo.error.code:"";__LOG__(3)(c(),a,r),this.props.onError&&this.props.onError(t)}else __LOG__(3)(h(),t.message,t.code)}))):Promise.resolve():Promise.reject(new Error("cannot play unmounted video"))}pause(){var e=this.refVideo;e&&(e.paused||e.pause())}pauseAndReset(){var e=this.refVideo;e&&(e.currentTime=0,this.pause())}render(){return o.createElement("video",{ref:this.setRefVideo,autoPlay:this.props.src?this.props.autoPlay:void 0,className:this.props.className?this.props.className:u.default.video,controls:this.props.controls,height:this.props.height,loop:this.props.loop,muted:this.props.muted,poster:this.props.poster,src:this.props.src?this.props.src:void 0,width:this.props.width,onClick:this.props.onClick,onAbort:this.props.onAbort,onCanPlay:this.props.onCanPlay,onCanPlayThrough:this.props.onCanPlayThrough,onDurationChange:this.props.onDurationChange,onEmptied:this.props.onEmptied,onEncrypted:this.props.onEncrypted,onEnded:this.props.onEnded,onError:this.props.onError,onLoadedData:this.props.onLoadedData,onLoadedMetadata:this.props.onLoadedMetadata,onLoadStart:this.props.onLoadStart,onPause:this.props.onPause,onPlay:this.props.onPlay,onProgress:this.props.onProgress,onRateChange:this.props.onRateChange,onSeeked:this.props.onSeeked,onSeeking:this.props.onSeeking,onStalled:this.props.onStalled,onSuspend:this.props.onSuspend,onTimeUpdate:this.props.onTimeUpdate,onVolumeChange:this.props.onVolumeChange,onWaiting:this.props.onWaiting},this.props.children)}}t.default=m,m.displayName="BaseVideo"},44572:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s(a(2784)),n=r(a(48290));function o(){return i.createElement("div",{className:n.default.border})}o.displayName="CellBorder"},96066:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(72779)),o=r(a(32960)),l=r(a(58520)),d=e=>{var t,a=(0,n.default)(e.className,l.default.chat,{[l.default.cartProduct]:"cart-product"===e.theme,[l.default.themeCheckbox]:"chat-checkbox"===e.theme||"label-list"===e.theme||"chat-checkbox-no-delete"===e.theme||"cell-message-checkbox"===e.theme||"product-checkbox"===e.theme,[l.default.themeDrawerList]:"drawer-list"===e.theme,[l.default.themeIdentity]:"identity"===e.theme,[l.default.themeListNames]:"list-names"===e.theme||"list-names-no-delete"===e.theme,[l.default.themeMessage]:"cell-message"===e.theme||"cell-message-checkbox"===e.theme,[l.default.themePlain]:"plain"===e.theme,[l.default.themeSearch]:"chat-search"===e.theme,[l.default.themeStatus]:"status-list"===e.theme,[l.default.themeLabel]:"label-selection"===e.theme,[l.default.themeAddItem]:"add-item"===e.theme,[l.default.themeAddItemPlaceholder]:"add-item-placeholder"===e.theme,[l.default.idle]:e.idle,[l.default.member]:"group-modal"===e.theme||"chat-checkbox-no-delete"===e.theme,[l.default.unread]:!!e.unread,[l.default.chatDrag]:!!e.dragging,[l.default.active]:!!e.active,[l.default.isMuted]:!!e.isMuted,[l.default.groupV4Invite]:"group_v4_invite"===e.theme,[l.default.product]:"product"===e.theme||"product-checkbox"===e.theme,[l.default.orderProduct]:"order-product"===e.theme,[l.default.media]:"media"===e.theme,[l.default.listButton]:"list-button-compact"===e.theme,[l.default.listMsg]:"list-msg"===e.theme,[l.default.archivePanel]:"archive-panel"===e.theme});e.image&&(t=e.customImage?e.image:i.createElement("div",{className:l.default.chatAvatar},e.image));var r,s,d=null!=e.primaryDetail?i.createElement("div",{className:l.default.chatMeta},e.primaryDetail):null;null!=e.secondary&&(s=null!=e.secondaryDetail?i.createElement("div",{role:"gridcell","aria-colindex":"1",className:l.default.chatMeta},e.secondaryDetail):null,r=i.createElement("div",{className:l.default.chatSecondary},i.createElement("div",{className:l.default.chatStatus},e.secondary),s));var u=null!=e.detail?i.createElement("div",{className:(0,n.default)(l.default.chatBody,l.default.chatDetails)},e.detail):null;return i.createElement("div",{ref:e.setDivRef,"data-testid":"cell-frame-container","data-a8n":o.default.key("chat-card"),className:a,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu},t,i.createElement("div",{className:l.default.chatBody},i.createElement("div",{role:"gridcell","aria-colindex":"2",className:(0,n.default)(l.default.chatMain,{[l.default.noDelete]:"list-names-no-delete"===e.theme})},i.createElement("div",{className:l.default.chatTitle},e.primary),d),r),u)};d.displayName="CellFrame";var u=d;t.default=u},85395:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(72779)),n=r(a(2784)),o=s(a(95122)),l=s(a(91581));function d(e){var t=(0,i.default)(o.default.chatSubtitle,{[o.default.chatSubtitleHeader]:"title"===e.location});return n.createElement("div",{className:t},n.createElement(l.default,{titlify:!0,className:o.default.chatSubtitleText,direction:"inherit",text:e.text,selectable:!0}))}d.displayName="ChatSubtitleText"},21403:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CHECKBOX_THEME=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(35905)),l=s(a(71203)),d=s(a(14578)),u={PARTIAL:"PARTIAL"};function c({checked:e,id:t,onChange:a,theme:r,disabled:s,tabIndex:c}){var h=(0,n.useRef)(null),f=e&&r===u.PARTIAL,[p,m]=(0,l.default)(),_=(0,d.default)(h,p);return n.createElement(n.Fragment,null,n.createElement("input",{ref:_,className:o.default.a11yHidden,checked:e,disabled:!!s||void 0,indeterminate:!!f||void 0,onChange:function(e){e.stopPropagation();var t=h.current;null!=t&&t.focus(),a(e)},type:"checkbox",id:t,tabIndex:null!=c?c:0}),n.createElement("div",{onClick:function(){var e=h.current;null!=e&&e.click()},className:(0,i.default)(o.default.checkboxContainer,{[o.default.containerDisabled]:s,[o.default.itemFocused]:m}),tabIndex:-1,"aria-hidden":"true","data-testid":"visual-checkbox"},n.createElement("div",{className:(0,i.default)(o.default.checkbox,{[o.default.checkedCheckbox]:e,[o.default.disabled]:s})},n.createElement("div",{className:(0,i.default)(o.default.checkmark,{[o.default.checkedCheckmark]:e&&r!==u.PARTIAL,[o.default.uncheckedCheckmark]:!e,[o.default.partialCheckMark]:f})}))))}t.CHECKBOX_THEME=u,c.displayName="CheckBox";var h=c;t.default=h},32337:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(66692)),l=s(a(82631)),d=s(a(74824));class u extends n.Component{constructor(...e){super(...e),this.onToggle=e=>{e&&e.stopPropagation(),this.props.onChange()}}render(){var e,t;this.props.checked?(t=this.props.radio?"checkbox-round-radio-checked":"checkbox-round-checked",e="checked"):(e="unchecked",t=this.props.hover?"checkbox-round-unchecked":"checkbox-round-passive");var a=(0,i.default)(o.default.roundIcon,{[o.default.unchecked]:!this.props.checked&&this.props.hover&&!this.props.systemUncheckedColor,[o.default.passive]:!this.props.checked&&!this.props.hover&&!this.props.systemUncheckedColor,[o.default.uncheckedSystemColor]:!this.props.checked&&this.props.systemUncheckedColor});return n.createElement(d.default,{className:o.default.container,transitionName:"pop"},n.createElement("div",{className:a,key:e,onClick:this.onToggle},n.createElement(l.default,{name:t})))}}u.displayName="CheckBoxRound";var c=u;t.default=c},60519:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=p,t.ButtonType=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(77095)),l=s(a(17957)),d=r(a(94461)),u=s(a(82631)),c=a(28103).Mirrored(["Prev","Next"]);t.ButtonType=c;var h={Prev:l.default.t(1183),Next:l.default.t(1121)},f={Prev:"chevron-left",Next:"chevron-right"};function p({type:e,onClick:t,onKeyDown:a,disabled:r,theme:s,overMedia:l}){var p=(0,i.default)(o.default.btn,{[o.default.btnMediaPrev]:e===c.Prev,[o.default.btnMediaNext]:e===c.Next,[o.default.disabledBtn]:r,[o.default.overMedia]:l}),m=h[e],_=f[e];return n.createElement(d.default,{className:p,onClick:r?null:t,onKeyDown:a,label:m,theme:s,disabled:r},n.createElement(u.default,{name:_,title:m,directional:!0}))}p.displayName="ChevronButton"},7681:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(23109)),l=s(a(50935)),d=s(a(23695)),u=({children:e,icon:t,secondary:a,theme:r})=>{var s=(0,i.default)(d.default.container,{[d.default.inConversation]:"conversation"===r,[d.default.inList]:"list"===r});if("conversation"===r){var u=o.default.get("defaultPreference");u&&u.wallpaperColor===l.default.DEFAULT_CHAT_WALLPAPER&&(s=(0,i.default)(s,d.default.defaultWallpaper))}var c=t?n.createElement("div",{className:d.default.icon},t):null,h=null!=a?n.createElement("div",{className:d.default.secondary},a):null;return n.createElement("div",{className:s},c,n.createElement("div",{className:d.default.body},n.createElement("div",{className:d.default.main},e),h))};u.displayName="ContentPlaceholder";var c=u;t.default=c},96268:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createDataLink=function(e){var t=document.createElement("a"),a=s.default.isBlob(e)||s.default.isData(e);return t.href=a?e:"",t};var s=r(a(74185))},24211:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(46774),o=r(a(71201)),l=r(a(17957)),d=r(a(40207));class u extends i.PureComponent{render(){var e;switch(this.props.chat.kind){case n.CHAT_KIND.GROUP:e=this.props.chat.isReadOnly?l.default.t(1633):l.default.t(1638);break;case n.CHAT_KIND.BROADCAST:e=l.default.t(1634);break;case n.CHAT_KIND.CHAT:e=l.default.t(562)}return i.createElement(o.default,{a8n:"mi-delete",action:this.props.onDeleteOrExit,disabled:this.props.disabled},e)}}u.CONCERNS={chat:["isReadOnly","kind"]},u.displayName="DeleteMenuItem";var c=(0,d.default)(u,u.CONCERNS);t.default=c},46478:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getSize=A,t.getDefaultIcon=D,t.default=t.DetailImageCommon=t.DETAIL_IMAGE_QUALITY=t.DETAIL_IMAGE_SIZE=void 0;var i=s(a(58527)),n=s(a(70417)),o=s(a(72779)),l=a(39329),d=r(a(2784)),u=s(a(72174)),c=s(a(43334)),h=s(a(13303)),f=r(a(96452)),p=s(a(92507)),m=s(a(53632)),_=s(a(20642)),v=s(a(15118)),g=s(a(40207)),E=a(64658),S=s(a(82631)),C=s(a(68384)),y={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",AUTO:"AUTO",NONE:"NONE"};t.DETAIL_IMAGE_SIZE=y;var b={LOW:"LOW",HIGH:"HIGH"};t.DETAIL_IMAGE_QUALITY=b;class T extends d.PureComponent{constructor(e){super(e),this._retriedAfter403=!1,this.state={loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:null},this.onLoad=()=>{this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),this.setState({loading:!1,loaded:!0}),this.props.onLoad&&this.props.onLoad()},this.onError=e=>{if(this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel(),e instanceof f.ServerStatusError){var{profilePicThumb:t}=this.props;switch(e.status){case 403:t.markStale({eurl:!0}),this._retriedAfter403||(this._retriedAfter403=!0,t.validate());break;case 410:t.markStale()}}this.setState({loading:!1,loaded:!1})},this._enableSpinner="business"!==e.theme,e.loader&&this._enableSpinner&&(this._showSpinnerTimeout=new l.ShiftTimer((()=>{this.setState({showSpinner:!0})})),this._showSpinnerTimeout.onOrAfter(100))}static getDerivedStateFromProps(e,t){return t.profilePicThumbImg!==e.profilePicThumbImg?{loading:!0,loaded:!1,showSpinner:!1,profilePicThumbImg:e.profilePicThumbImg}:{profilePicThumbImg:e.profilePicThumbImg}}componentDidUpdate(e){e.profilePicThumbImg!==this.props.profilePicThumbImg&&this._showSpinnerTimeout&&this._showSpinnerTimeout.onOrAfter(100)}componentWillUnmount(){this._showSpinnerTimeout&&this._showSpinnerTimeout.cancel()}_shouldShowSpinner(){var{profilePicThumb:e,loader:t}=this.props,{loading:a,showSpinner:r}=this.state;return!!this._enableSpinner&&(!!t&&r&&a&&!(!(0,E.unproxy)(e).stale&&!this.props.profilePicThumbImg))}render(){var{profilePicThumbImg:e,spinnerClassName:t,imgClassName:a,alt:r}=this.props,{loading:s,loaded:i}=this.state,l={[h.default.isLoaded]:!s};a&&(l=(0,n.default)((0,n.default)({},l),{},{[a]:"string"==typeof a}));var c,f,p=(0,o.default)(h.default.avatarImage,l);this._shouldShowSpinner()&&(c=d.createElement(u.default,{key:"spinner",className:t})),e&&(f=d.createElement(m.default,{src:e,hasPrivacyChecks:!0,crossOrigin:!1,className:p,draggable:!1,key:"image",onLoad:this.onLoad,onError:this.onError,alt:r}));var _=this.props.defaultIcon;return d.createElement(d.Fragment,null,c,_,f)}}t.DetailImageCommon=T,T.displayName="DetailImageCommon";class M extends d.PureComponent{render(){return d.createElement(T,(0,i.default)({},this.props,{profilePicThumbImg:this.props.profilePicThumb.imgFull}))}}M.CONCERNS={profilePicThumb:["imgFull"]},M.displayName="DetailImageFull";var N=(0,g.default)(M,M.CONCERNS);class I extends d.PureComponent{render(){return d.createElement(T,(0,i.default)({},this.props,{profilePicThumbImg:this.props.profilePicThumb.img}))}}I.CONCERNS={profilePicThumb:["img"]},I.displayName="DetailImageThumb";var P=(0,g.default)(I,I.CONCERNS);function A(e){if("string"!=typeof e)return e;switch(e){case y.SMALL:return 49;case y.MEDIUM:return 100;case y.LARGE:return 200;case y.NONE:return;default:throw new Error("Unsupported size type: ".concat(e))}}class O extends d.Component{constructor(...e){super(...e),this.state={ephemeral:!1},this._updateEphemeral=()=>{var e=c.default.get(this.props.id);e&&this.setState({ephemeral:e.isEphemeralSettingOn()})}}componentDidMount(){var e=c.default.get(this.props.id);e&&this.props.listeners.add(e.isGroup?e.groupMetadata:e,"change:ephemeralDuration",this._updateEphemeral)}componentDidUpdate(e){if(e.id!==this.props.id){var t=c.default.get(e.id);t&&this.props.listeners.remove(t.isGroup?t.groupMetadata:t,"change:ephemeralDuration",this._updateEphemeral);var a=c.default.get(this.props.id);a&&this.props.listeners.add(a.isGroup?a.groupMetadata:a,"change:ephemeralDuration",this._updateEphemeral)}}render(){var e,t,{id:a,size:r,quality:s,loader:i,onClick:n,onLoad:l,quoted:u,square:f,border:m,waitIdle:_,showEphemeralIcon:g,theme:E,alt:C}=this.props,T=s||b.LOW,M={height:A(t="number"==typeof r?r>0?r:y.SMALL:null!=r?r:y.SMALL),width:A(t)};n&&(M.cursor="pointer");var I,O=(0,o.default)(h.default.avatar,{[h.default.status_v3]:"status_v3"===E,[h.default.avatarSquare]:f,[h.default.avatarBorder]:m}),w=D(a,u),R=d.createElement(p.default,{id:a,onComplex:()=>{var e=null,t=v.default.gadd(a);return t&&(e=T===b.HIGH?d.createElement(N,{profilePicThumb:t,defaultIcon:w,loader:i,onLoad:l,alt:C}):d.createElement(P,{profilePicThumb:t,defaultIcon:w,loader:i,onLoad:l,alt:C})),d.createElement("div",{className:O,style:M,onClick:n},null,e)},waitIdle:_},d.createElement("div",{className:O,style:M,onClick:n},w));return g&&(null===(e=c.default.get(a))||void 0===e?void 0:e.isEphemeralSettingOn())&&(I=d.createElement("div",{className:h.default.wrapper},d.createElement("div",{className:h.default.badge},d.createElement(S.default,{name:"disappearing",className:h.default.badgeIcon})),R)),I||R}}function D(e,t){var a="default-user";return C.default.isUser(e)&&!C.default.isPSA(e)&&t?a="default-user-square":C.default.isGroup(e)?a="default-group":C.default.isBroadcast(e)?a="default-broadcast":C.default.isPSA(e)&&(a="default-psa"),d.createElement("div",{className:h.default.avatarDefault,key:"default"},d.createElement(S.default,{name:a}))}O.displayName="DetailImage";var w=(0,_.default)(O);t.default=w},98864:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=t.PendingCancel=t.Pending=t.Download=t.DocState=void 0;var i=s(a(58527)),n=r(a(2784)),o=s(a(32514)),l=s(a(2825)),d=s(a(82631)),u=({children:e,onClick:t})=>{var a=t?{onClick:t}:{};return n.createElement("div",(0,i.default)({className:o.default.docState},a),e)};t.DocState=u,u.displayName="DocState";var c=({onClick:e})=>n.createElement(u,{onClick:e||(()=>{})},n.createElement(d.default,{name:"audio-download"}));t.Download=c,c.displayName="Download";var h=({outgoingMsg:e})=>n.createElement(u,null,n.createElement("div",{className:o.default.spinner},n.createElement(l.default,{stroke:3,size:32,outgoingMsg:e})));t.Pending=h,h.displayName="Pending";var f=({outgoingMsg:e})=>n.createElement(u,null,n.createElement("div",{className:o.default.spinner},n.createElement(l.default,{stroke:3,size:32,outgoingMsg:e})),n.createElement(d.default,{name:"audio-cancel-noborder"}));t.PendingCancel=f,f.displayName="PendingCancel";var p=()=>n.createElement(u,null,n.createElement(d.default,{name:"audio-upload"}));t.Upload=p,p.displayName="Upload"},71201:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=s(a(58527)),n=s(a(72779)),o=r(a(2784)),l=s(a(32960)),d=s(a(56061)),u=s(a(98294)),c=s(a(44343)),h=s(a(63252)),f=a(11419),p=(0,h.default)({COMPACT:null,MUTED:null});t.ThemeOptions=p;class m extends o.PureComponent{constructor(...e){super(...e),this.state={hover:!1,focus:!1},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this.onFocus=()=>{this.setState({focus:!0})},this.onBlur=()=>{this.setState({focus:!1})},this.onClick=e=>{this.onAction(e)},this.onKeyboardActivation=e=>{e.repeat||this.onAction(e)},this.onAction=e=>{var{action:t}=this.props;if(t&&!(!1===t(e))){var a=this.props.uim;a&&a.uie.requestDismiss()}}}render(){var{children:e,tooltip:t,type:a,disabled:r=!1,theme:s}=this.props,{hover:u,focus:h}=this.state,m=(u||h)&&null!=t?t:null,v=(0,f.isString)(e)?o.createElement("div",{className:(0,n.default)(d.default.ellipsify,d.default.action,{[d.default.compact]:s===p.COMPACT}),role:"button","aria-label":e},e):e,g={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},E=(0,n.default)(d.default.item,d.default.shortcut,{[d.default.hover]:u||h,[d.default.text]:"text"===a,[d.default.emoji]:"emoji"===a||"emoji-grid"===a,[d.default.emojiGrid]:"emoji-grid"===a,[d.default.icon]:"icon"===a,[d.default.disabled]:r||s===p.MUTED}),S=r?{}:{handlers:g,onContextMenu:_,onMouseDown:_,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onFocus,onBlur:this.onBlur};return o.createElement(c.default,(0,i.default)({component:"li","data-a8n":l.default.key(this.props.a8n),className:E,"data-animate-dropdown-item":!0},S),v,o.createElement("div",null,m))}}function _(e){e.preventDefault()}m.defaultProps={type:"text"},m.displayName="DropdownItem";var v=(0,u.default)(m);t.default=v},44977:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(86884),l=r(a(86634)),d=s(a(12396)),u=s(a(53632)),{getGlyphId:c,getStyle:h,getCssClasses:f}=d.default;class p extends n.Component{componentDidMount(){var{emoji:e}=this.props,t=this.context,a=c(e);null!=a&&(t.incrementLoadingEmojisCount(),l.default.loadEmoji(a,l.LOAD_PRIORITY.LAZY_LOAD_EMOJI).finally((()=>{t.decrementLoadingEmojisCount()})))}render(){var e,t,{className:a,element:r,emoji:s,selectable:o,selected:l,size:d,src:p,onLoad:m,tabIndex:_}=this.props,v=c(s);if(null==v)return null;p||(e=h(v,d),t=f(v,d));var g=(0,i.default)(a,t,{selected:l});return"span"===r?n.createElement("span",{className:g,style:e,onLoad:m,tabIndex:_,"data-unicode":this.props["data-unicode"],"data-variant":this.props["data-variant"],"data-emoji-index":this.props["data-emoji-index"]}):n.createElement(u.default,{alt:s,className:g,draggable:!1,onLoad:m,plainText:s,selectable:o,style:e,src:p})}}t.default=p,p.contextType=o.InitialEmojisCompletionContext,p.displayName="Emoji"},91581:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_SIZE=void 0;var i=s(a(70417)),n=s(a(54073)),o=s(a(72779)),l=r(a(2784)),d=r(a(82704)),u=s(a(79711)),c=s(a(12396)),h=s(a(89170)),f=s(a(72034)),p=a(62902),m=s(a(17957)),_=s(a(20642)),v=s(a(61941)),g=s(a(66615)),E=a(89659),S=s(a(77626)),C={SMALL:"SMALL",LARGE:"LARGE"};t.EMOJI_SIZE=C;var y=4096;function b(e){return c.default.containsEmoji(e.substring(0,y))}class T extends l.PureComponent{constructor(...e){super(...e),this.state={text:this.props.text||"",ellipsified:null},this.refContainer=l.createRef(),this._registeredListener=!1,this._registerResizeListener=()=>{this._registeredListener||(this._registeredListener=!0,this.props.listeners.add(window,"resize",this._recompute),this.props.listeners.add(u.default,"resize",this._recompute))},this._unregisterResizeListener=()=>{this._registeredListener&&(this._registeredListener=!1,this.props.listeners.remove(window,"resize",this._recompute),this.props.listeners.remove(u.default,"resize",this._recompute))},this._recompute=(0,n.default)((()=>{this.setState({ellipsified:null},this.ellipsify)}),10),this._ellipsifyCheck=()=>b(this.state.text)&&this.ellipsify(),this.ellipsify=()=>{var e=this.refContainer.current;if(e){var t=(0,v.default)(e.parentElement,"node.parentElement"),a=e.querySelectorAll("img");if(a.length){var r=e.clientWidth;e.style.overflow="visible";var s=e.clientWidth!==r;if(e.style.overflow="hidden",s){var i=Boolean(m.default.isRTL())===Boolean(this.props.dirMismatch),n=a[function(e,t,a){var r=0;for(;r<e.length;){var s=e[r];if(a&&s.offsetLeft+s.clientWidth>=t)break;if(!a&&s.offsetLeft<=t)break;r++}return r}(a,i?t.clientWidth-function(e,t){for(var a=0,{childNodes:r}=e,s=0;s<r.length;s++){var i=r[s];if(i===t)break;a+=i instanceof Element?i.clientWidth:0}return a}(t,e)-12:12,i)];this.setState({ellipsified:N(e,n)})}}}},this._buildBidiModel=e=>e.reduce(((e,t)=>{if("string"==typeof t){var a=t.split(/(\r?\n|\r)/g).map((e=>({dir:d.dir(e),content:e})));return e.concat(a)}return e.push({content:t}),e}),[]),this._explodeOutputByLines=(e,t)=>{var{direction:a}=this.props,r=[],s=this._buildBidiModel(e),i=[],n=a;"auto"!==a&&"inherit"!==a||(n=null);for(var o=(e,t=!1)=>{var s=null==n||null==a||n===a,o=s?null:n,d=!s||"rtl"===n!==m.default.isRTL()?h.default.dirMismatch:null;r.push(l.createElement("span",{key:e,dir:o,className:d},i,t?"":null))},d=0;d<s.length;d++){var u=s[d];n!==u.dir&&null!=n&&void 0!==u.dir&&(o(d),i=[]),void 0!==u.dir&&(n=u.dir),i.push(u.content)}return o(s.length,t),r},this.componentDidMount=()=>{!S.default.supportsEmojiEllipsification&&this.props.ellipsify&&b(this.state.text)&&this._registerResizeListener(),!S.default.supportsEmojiEllipsification&&this.props.ellipsify&&this._ellipsifyCheck()},this.render=()=>{if(!this.state.text)return null;var{onClick:e,ellipsify:t,dirMismatch:a,inferLinesDirection:r,inlineblock:s,direction:i,textLimit:n,multiline:d}=this.props,u=this.state.ellipsified?this.state.ellipsified:this.state.text,c="inherit"===i?null:i||"auto",m=!!this.props.selectable,_=this.props.formatters||p.Configuration.EmojiOnly({selectable:m}),v=n||1/0;t&&u.length>y&&v>y&&(v=y);var S=(0,o.default)(this.props.className,{[h.default.ellipsify]:!!t,[h.default.inlineblock]:!!s,[h.default.clickable]:!!e,[h.default.dirMismatch]:a&&!r,[h.default.multiline]:d}),C=(0,f.default)(u,_,E.JSXSerializer,void 0,v),b=!!this.state.ellipsified||u.length>v,T=this.props.inferLinesDirection?this._explodeOutputByLines(C,b):C;return l.createElement(g.default,{className:S,dir:c,element:this.props.element,onClick:e,ref:this.refContainer,selectable:m,title:this.props.titlify?this.state.text:void 0},T)}}getContainerElement(){return this.refContainer.current}getWidth(){var e=this.refContainer.current;return e?e.getBoundingClientRect().width:0}static getDerivedStateFromProps(e,t){var a,r=null,s=null!==(a=e.text)&&void 0!==a?a:"";return s!==t.text&&(r={text:s}),S.default.supportsEmojiEllipsification||!e.ellipsify||null==r||b(s)||(r=(0,i.default)((0,i.default)({},r),{},{ellipsified:null})),r}componentDidUpdate(e,t){!S.default.supportsEmojiEllipsification&&this.props.ellipsify&&t.text!==this.state.text&&(b(this.state.text)?(this._recompute(),this._registerResizeListener()):this._unregisterResizeListener())}componentWillUnmount(){this._recompute.cancel()}}T.defaultProps={element:"span",emojiSize:C.SMALL,textLimit:1/0};var M=(0,_.default)(T);function N(e,t,a={found:!1}){if(e===t)return a.found=!0,"";if(e instanceof HTMLImageElement)return e.alt;if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;for(var r=function(e){if(e instanceof Element)switch(e.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}(e),s="",i=0;i<e.childNodes.length&&(s+=N(e.childNodes[i],t,a),!a.found);)i++;if(null==r)return s;var[n,o]=r;return"".concat(n).concat(s).concat(o)}t.default=class extends M{getWidth(){return this.getComponent().getWidth()}getContainerElement(){return this.getComponent().getContainerElement()}}},20485:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.LazyLoadRetry=t.NoResultForLabel=t.LoadingWithText=t.Loading=t.ImageSearchEmpty=t.SearchingImages=t.BeforeImageSearch=t.DocMsgs=t.LinkMsgs=t.MediaMsgs=t.StarredMsgs=t.AllArchived=t.ListStatus=t.BeforeSearchMessages=t.ListGroups=t.ListProducts=t.ListChats=t.SearchMessagesUnavailable=t.SearchMessages=t.SearchGroups=t.SearchWithKeyword=t.SearchWithoutKeyword=t.SearchContacts=t.SearchingMessages=t.Searching=t.Search=t.Archived=t.Blocked=t.Empty=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(43334)),d=s(a(79711)),u=s(a(91581)),c=s(a(81226)),h=s(a(17957)),f=s(a(23539)),p=s(a(2825)),m=s(a(82631)),_=({a8nText:e,a8nTitle:t,children:a,className:r,icon:s,text:l,theme:d,title:h,onClick:f})=>{var p=h?n.createElement("div",{"data-a8n":o.default.key(t),className:c.default.title},h):null,m=l?n.createElement("div",{"data-a8n":o.default.key(e),className:c.default.text},n.createElement(u.default,{text:l})):null,_=(0,i.default)(c.default.empty,r,{[c.default.compact]:"compact"===d});return n.createElement("div",{className:_,onClick:f},s,p,m,a)};t.Empty=_;var v=()=>{var e=n.createElement("div",{className:c.default.icon},n.createElement(m.default,{name:"empty-blocked"}));return n.createElement(_,{icon:e,title:h.default.t(283),text:h.default.t(206),a8nTitle:"blocked-empty",a8nText:"add-blocked-description"})};t.Blocked=v,v.displayName="Blocked";var g=()=>{var e=n.createElement("div",{className:c.default.icon},n.createElement(m.default,{name:"empty-archived"}));return n.createElement(_,{icon:e,title:h.default.t(234),a8nTitle:"archived-empty"})};t.Archived=g,g.displayName="Archived";var E=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1275),a8nText:"search-no-chats-or-contacts"});t.Search=E,E.displayName="Search";var S=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1287),a8nText:"searching-chats-contacts-messages"});t.Searching=S,S.displayName="Searching";var C=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1289),a8nText:"searching-messages"});t.SearchingMessages=C,C.displayName="SearchingMessages";var y=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1276),a8nText:"search-no-contacts"});t.SearchContacts=y,y.displayName="SearchContacts";var b=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1133),a8nText:"search-no-results-without-keyword"});t.SearchWithoutKeyword=b,b.displayName="SearchWithoutKeyword";var T=e=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1279,{keyword:e}),a8nText:"search-no-results-without-keyword"});t.SearchWithKeyword=T,T.displayName="SearchWithKeyword";var M=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1277),a8nText:"search-no-groups"});t.SearchGroups=M,M.displayName="SearchGroups";var N=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1278),a8nText:"search-no-messages"});t.SearchMessages=N,N.displayName="SearchMessages";var I=()=>n.createElement(_,{className:c.default.emptyTop,text:h.default.t(1282),a8nText:"search-results-unavailable"});t.SearchMessagesUnavailable=I,I.displayName="SearchMessagesUnavailable";var P=()=>n.createElement(_,{text:h.default.t(1123),a8nText:"no-chats"});t.ListChats=P,P.displayName="ListChats";t.ListProducts=({hasCatalog:e=!0})=>{var t=e?h.default.t(1131):h.default.t(1122);return n.createElement(_,{text:t,a8nText:"no-products"})};var A=()=>n.createElement(_,{text:h.default.t(1126),a8nText:"no-groups"});t.ListGroups=A,A.displayName="ListGroups";var O=(e,t)=>{var a=t?h.default.t(487,{chatName:e}):h.default.t(553,{chatName:e});return n.createElement(_,{className:c.default.emptyTop,text:a,a8nText:"chat-search-prompt"})};t.BeforeSearchMessages=O,O.displayName="BeforeSearchMessages";var D=()=>n.createElement(_,null);function w(){var e=a(67524).default;d.default.openDrawerLeft(n.createElement(e,null))}t.ListStatus=D,D.displayName="ListStatus";var R=()=>{var e=l.default.filter((e=>e.archive)).length;return n.createElement(_,{title:h.default.t(223),a8nTitle:"all-chats-archived"},n.createElement("div",{"data-a8n":o.default.key("see-archived"),role:"button",onClick:w,className:c.default.action},h.default.t(1299,{count:e,_plural:e})))};t.AllArchived=R,R.displayName="AllArchived";var k=()=>n.createElement(_,{text:h.default.t(1134),a8nText:"no-starred-messages"});t.StarredMsgs=k,k.displayName="StarredMsgs";var L=()=>n.createElement(_,{text:h.default.t(1128),a8nText:"no-media"});t.MediaMsgs=L,L.displayName="MediaMsgs";var x=()=>n.createElement(_,{text:h.default.t(1127),a8nText:"no-links"});t.LinkMsgs=x,x.displayName="LinkMsgs";var F=()=>n.createElement(_,{text:h.default.t(1125),a8nText:"no-docs"});t.DocMsgs=F,F.displayName="DocMsgs";var B=()=>n.createElement(_,{text:h.default.t(839),a8nText:"image-search-prompt"});t.BeforeImageSearch=B,B.displayName="BeforeImageSearch";var G=()=>n.createElement(_,{text:h.default.t(1288),a8nText:"searching-images"});t.SearchingImages=G,G.displayName="SearchingImages";var U=()=>n.createElement(_,{text:h.default.t(838),a8nText:"image-search-no-results"});t.ImageSearchEmpty=U,U.displayName="ImageSearchEmpty";var j=()=>n.createElement(_,null,n.createElement(p.default,{size:50,stroke:4}));t.Loading=j,j.displayName="Loading";var V=({text:e})=>n.createElement(_,null,n.createElement("div",{className:c.default.spinner},n.createElement(p.default,{size:50,stroke:4})),n.createElement(u.default,{element:"div",className:c.default.text,text:e}));t.LoadingWithText=V,V.displayName="LoadingWithText";var H=({labelId:e})=>{var t=f.default.assertGet(e);return n.createElement(_,null,n.createElement(u.default,{element:"div",className:c.default.text,text:h.default.t(1132,{labelName:t.name})}))};t.NoResultForLabel=H,H.displayName="NoResultForLabel";var W=({className:e,onClick:t})=>n.createElement(_,{className:e,onClick:t},n.createElement(m.default,{name:"live-location-refresh",className:c.default.iconRetry}),n.createElement("div",null,h.default.t(1257)));t.LazyLoadRetry=W,W.displayName="LazyLoadRetry"},34092:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(65633)),o=({children:e})=>i.createElement("div",{className:n.default.tooltip,role:"tooltip"},e);o.displayName="ErrorTooltip";var l=o;t.default=l},47642:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(50935)),o=r(a(73823)),l=r(a(17957)),d=a(86145);class u extends i.PureComponent{constructor(e){super(e),this._handleReadMoreClick=()=>{var{text:e}=this.props,t=n.default.SUBSEQUENT_PAGE_SIZE;this.setState((a=>{var r=a.textLimit+n.default.SUBSEQUENT_PAGE_SIZE;return{textLimit:c(e,r,t)?r:1/0}}))};var{text:t,textLimit:a}=e;this.state={textLimit:c(t,a,a)?a:1/0}}render(){return i.createElement(i.Fragment,null,this.props.children(this.state),this.state.textLimit!==1/0?i.createElement("span",{className:o.default.read_more,role:"button",onClick:this._handleReadMoreClick}," "+l.default.t(1225)):null)}}function c(e,t,a){return(0,d.numCodepoints)(e)-t>a*n.default.OVERFLOWING_PAGE_THRESHOLD}t.default=u,u.displayName="ExpandableText"},47685:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(20642));class o extends i.PureComponent{constructor(...e){super(...e),this._setRefInput=e=>{this._refInput=e},this._handleClick=e=>{e.stopPropagation()},this._handleChange=e=>{this.props.onChange(e)}}open(){this._refInput&&this._refInput.click()}render(){return i.createElement("input",{accept:this.props.mimes,ref:this._setRefInput,type:"file",multiple:!0,style:{display:"none"},onClick:this._handleClick,onChange:this._handleChange})}}o.displayName="FilePicker";var l=(0,n.default)(o);t.default=class extends l{open(){return this.getComponent().open()}}},86038:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ParticipantsList=void 0;var i=a(39329),n=s(a(2784)),o=r(a(77690)),l=r(a(85395)),d=r(a(17957)),u=r(a(20642)),c=r(a(40207)),h="sort remove reset add";class f extends n.PureComponent{constructor(e){super(e),this._onParticipantsUpdate=()=>{this._recalculateParticipantsTimer.debounce(100)},this._recalculateParticipantsTimer=new i.ShiftTimer((()=>{this.setState({participants:v(this.props.groupMetadata.participants)})}));var{listeners:t,groupMetadata:{participants:a}}=e;this.state={participants:v(a)},t.add(a,h,this._onParticipantsUpdate)}componentDidMount(){this.ensureParticipantsSorted()}componentDidUpdate(e){this.ensureParticipantsSorted();var t=e.groupMetadata.participants,a=this.props.groupMetadata.participants;if(a!==t){var r=this.props.listeners;r.remove(t,h,this._onParticipantsUpdate),r.add(a,h,this._onParticipantsUpdate),this._recalculateParticipantsTimer.cancel(),this.setState({participants:v(a)})}}componentWillUnmount(){this._recalculateParticipantsTimer.cancel()}ensureParticipantsSorted(){this.props.groupMetadata.participants.ensureSorted()}render(){var e=this.props.groupMetadata.support?d.default.t(1382):this.props.overridingText||this.state.participants.map((e=>{var[t]=e.split(/\s/);return o.default.exec(t)?t:e})).join(d.default.t(619))||this.props.placeholder;return e?n.createElement(l.default,{text:e,location:this.props.location}):null}}f.CONCERNS={groupMetadata:["participants","support"]},f.displayName="ParticipantsListClass";var p=(0,u.default)((0,c.default)(f,f.CONCERNS));t.ParticipantsList=p;class m extends n.PureComponent{render(){var e=this.props,t=e.presence.withholdDisplay?e.placeholder:e.presence.getFormattedString();return n.createElement(p,{groupMetadata:e.groupMetadata,overridingText:t,placeholder:e.placeholder,location:e.location})}}m.CONCERNS={chatstate:["id","type","deny","t"],groupMetadata:["announce","participants"],presence:["forceDisplay","withholdDisplay"]},m.displayName="GroupSubtitle";var _=(0,c.default)(m,m.CONCERNS);function v(e){return e.map((e=>e.contact.formattedShortNameWithNonBreakingSpaces))}t.default=_},38063:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=s.useRef();s.useEffect((()=>{a.current=e}),[e]),s.useEffect((()=>{if(null!=t){var e=setInterval((function(){a.current&&a.current()}),t);return()=>clearInterval(e)}}),[t])};var s=r(a(2784))},47609:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=(0,o.unproxy)(e),s=i.useRef();function d(){return null==s.current&&(s.current=new n.default(null!=a?a:"Hook(useModelValues)",r.proxyName,t,!0,!0)),s.current}var[u,c]=i.useState((()=>{var e=d(),t=e.getModelAndValidate(r);if(!t)throw new l(e.name);return e.createProxy(t)})),h=i.useCallback(((e,t)=>{var a=e.getModelAndValidate(t);if(!a)throw new l(e.name);c(e.createProxy(a))}),[]);i.useEffect((()=>{var e=d(),t=e.getModel(r);return e.attachConcern(t,u.proxyBitMask,h),()=>{e.detachConcern(t,h)}}),[r,u,h]);var[f,p]=i.useState(r);if(f!==r){var m=d();m.detachConcern(f,h);var _=m.getModelAndValidate(r);if(!_)throw new l(m.name);p(_),c(m.createProxy(_))}return u},t.StateHookMissingModelError=void 0;var i=s(a(2784)),n=r(a(97591)),o=a(64658);class l extends Error{constructor(e){super("Received a null value for model key: ".concat(e)),this.name="StateHookMissingModelError"}}t.StateHookMissingModelError=l},74494:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=(0,s.unproxy)(e),o=a.proxyName;null==n[o]&&(n[o]=new Set([...a.__props,...a.__session]));if(!n[o].has(t))throw new i(e.proxyName,t);return(0,r.useCallback)((e=>{if("function"==typeof e){var r=a.get(t);a.set(t,e(r))}else a.set(t,e)}),[t,a])},t.SetStateHookMissingModelPropertyError=void 0;var r=a(2784),s=a(64658);class i extends Error{constructor(e,t){super('The model "'.concat(e,'" has no property/sessions "').concat(t,'" defined')),this.name="SetStateHookMissingModelPropertyError"}}t.SetStateHookMissingModelPropertyError=i;var n={}},92507:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(78986),o=r(a(68384));class l extends i.PureComponent{constructor(...e){super(...e),this.state={isBusy:n.UIBusyTasks.isBusy()},this.onIdle=()=>{this.setState({isBusy:!1})}}componentDidMount(){this.props.waitIdle&&(this._idleTaskId=n.UIBusyTasks.enqueue(this.onIdle))}componentDidUpdate(e){if(!o.default.equals(e.id,this.props.id)||!this.props.waitIdle){this.state.isBusy&&n.UIBusyTasks.dequeue(this._idleTaskId);var t=n.UIBusyTasks.isBusy();t&&this.props.waitIdle&&(this._idleTaskId=n.UIBusyTasks.enqueue(this.onIdle)),this.setState({isBusy:t})}}componentWillUnmount(){this.props.waitIdle&&n.UIBusyTasks.dequeue(this._idleTaskId)}render(){var{children:e,onComplex:t,waitIdle:a}=this.props,{isBusy:r}=this.state;return r&&a?i.createElement(i.Fragment,null,e):t()}}t.default=l,l.displayName="IdleComponent"},27536:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(45455)),n=s(a(72779)),o=r(a(2784)),l=s(a(72174)),d=s(a(53632)),u=s(a(8196)),c=s(a(82631)),h="SMALL",f="MEDIUM",p="LARGE",m="NONE";function _(e){switch(e){case h:return 49;case f:return 100;case p:return 200;case m:return;default:return e}}class v extends o.PureComponent{constructor(...e){super(...e),this.state={isLoaded:!1},this.onLoad=()=>{this.setState({isLoaded:!0})}}render(){var e,{size:t,fallbackSVG:a,className:r,loader:s,wrapOptions:h={},transition:f,roundContainer:p=!0,imgProps:m}=this.props,{src:v,alt:g,crossOrigin:E,draggable:S}=m,{centerWrapperChild:C,wrapperClassName:y}=h,{isLoaded:b}=this.state,T=(0,n.default)(u.default.avatarImage,{[u.default.isLoaded]:b,[u.default.transition]:f}),M={height:_(t),width:_(t)};s&&!b&&(e=o.createElement(l.default,null));var N=o.createElement(d.default,{src:v,className:T,onLoad:this.onLoad,alt:g,crossOrigin:E,draggable:S}),I=(0,i.default)(h)?N:o.createElement("div",{className:(0,n.default)(y,u.default.avatarWrapper,u.default.avatarImageWrapper,{[u.default.centerChild]:C,[u.default.isLoaded]:b})},N),P=""!==v?o.createElement(o.Fragment,null,e,I):null;return o.createElement("div",{className:(0,n.default)(u.default.avatar,r,{[u.default.roundBorder]:p}),style:M},P,o.createElement("div",{className:(0,n.default)(y,u.default.avatarWrapper,u.default.avatarSvgWrapper,{[u.default.centerChild]:C,[u.default.transition]:f})},o.createElement(c.default,{name:a})))}}t.default=v,v.defaultProps={size:h,loader:!1},v.displayName="ImgWithFallback"},43486:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){if(0===e.length)return"";var a=e[0];if(1===e.length)return a;var r=e[e.length-1];if(2===e.length)return function(e,t,a=!1){return a?n.default.t(1046,l(e,t)):i.createElement(o.default,{id:1046,params:{A:e,B:t}})}(a,r,t);var s=e[1],d=e.slice(2,e.length-1);return function(e,t,a,r,s=!1){var d=[s?n.default.t(1045,l(e,t)):i.createElement(o.default,{id:1045,key:"listItem_firstItem",params:{A:e,B:t}})],u=a.reduce(((e,t,a)=>[s?n.default.t(1043,l(t,e)):i.createElement(o.default,{id:1043,key:"listItem_".concat(a),params:{A:t,B:e}})]),d);return s?n.default.t(1043,l(u,r)):i.createElement(o.default,{id:1044,params:{A:u,B:r}})}(a,s,d,r)};var i=s(a(2784)),n=r(a(17957)),o=r(a(81524));function l(e,t){return{A:e,B:t}}},35598:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UnknownDataError=t.DEFAULT_ITEM_HEIGHT=t.DEFAULT_ITEM_WIDTH=void 0;var i=s(a(70417)),n=s(a(54073)),o=s(a(72779)),l=a(29351),d=r(a(2784)),u=s(a(25610)),c=a(78986),h=s(a(1100)),f=s(a(66346)),p=s(a(5701)),m=s(a(74824));t.DEFAULT_ITEM_WIDTH=72;t.DEFAULT_ITEM_HEIGHT=72;class _ extends((0,l.customError)("UnknownDataError")){constructor(e){super("Unknown data encountered while rendering. Item key: ".concat(e.itemKey))}}t.UnknownDataError=_;class v extends d.Component{constructor(e){super(e),this.keyPool=new h.default,this.hanging=!1,this.pointerEvents=!0,this.setRefList=e=>{this.refList=e},this.setListLength=()=>{this.setState({renderedListLength:this.state.listLength})},this.getListLength=()=>this.state.renderedListLength,this.onLayout=e=>{var t=this.refList;if(t){var a="horizontal"===this.props.direction?t.getBoundingClientRect().left-e.position.left:t.getBoundingClientRect().top-e.position.top,r=Math.max(a,0),s="horizontal"===this.props.direction?e.width:e.height,{firstIndex:n,lastIndex:o}=v.computeIndexes(this.props,(0,i.default)((0,i.default)({},this.state),{},{offsetFromStart:r,bodyDimension:s}));this.setState({firstIndex:n,lastIndex:o,bodyDimension:s,offsetFromStart:r})}},this.onScroll=()=>{this.animationFrame?this.hanging=!0:(this.hanging=!1,this.animationFrame=requestAnimationFrame(this._onScroll))},this._onScroll=()=>{this.disablePointerEvents();var e=this.props.flatListController.getScrollFromStart();if(null==e)throw new Error("FlatList:ScrollEvent thrown while container is unmounted");var t=Math.max(e,0),a=v.computeIndexes(this.props,(0,i.default)((0,i.default)({},this.state),{},{scrollFromStart:t}));this.setState({scrollFromStart:t,firstIndex:a.firstIndex,lastIndex:a.lastIndex},this.onFinishScroll)},this.onFinishScroll=()=>{this.animationFrame=void 0,this.enablePointerEvents(),this.hanging&&this.onScroll()},this.enablePointerEvents=(0,n.default)((()=>{if(this.animationFrame)return this.enablePointerEvents();null!=this.busyId&&(c.UIBusyTasks.clearBusy(this.busyId),delete this.busyId),this.props.onPointerEventsOn&&this.props.onPointerEventsOn();var e=this.refList;e&&(e.style.pointerEvents="auto"),this.pointerEvents=!1}),150);var{enhancedData:t,listLength:a}=v.computeDataAndListLength(e);this.state={firstIndex:0,lastIndex:0,scrollFromStart:0,offsetFromStart:0,bodyDimension:0,enhancedData:t,listLength:a,renderedListLength:a}}static getDerivedStateFromProps(e,t){var{enhancedData:a,listLength:r}=v.computeDataAndListLength(e),{firstIndex:s,lastIndex:n}=v.computeIndexes(e,(0,i.default)((0,i.default)({},t),{},{enhancedData:a,listLength:r})),o={enhancedData:a,listLength:r,firstIndex:s,lastIndex:n};return(!e.itemEnterAnimationsEnabled||r>=t.renderedListLength)&&(o.renderedListLength=r),o}static computeDataAndListLength(e){var t=0;return{enhancedData:e.data.map((a=>{var r=(0,i.default)((0,i.default)({},a),{},{offset:t}),s=v.getDimension(a,e.direction,e.defaultItemWidth,e.defaultItemHeight);return t+=s,r})),listLength:t}}static getDimension(e,t,a,r){return"horizontal"===t?v.getItemWidth(e,a):v.getItemHeight(e,r)}static getItemWidth(e,t){return null!=e.width&&e.width>0?e.width:t}static getItemHeight(e,t){return null!=e.height&&e.height>0?e.height:t}static computeIndexes(e,t){var{bodyDimension:a,offsetFromStart:r,scrollFromStart:s,listLength:i,enhancedData:n}=t;if(void 0===a||void 0===r)throw new Error("FlatList:Computing FlatList without a valid Container");for(var{extraItems:o,forceConsistentRenderCount:l,direction:d,defaultItemWidth:u,defaultItemHeight:c}=e,h=0,f=0;f<n.length;f++){var p=n[f],m=v.getDimension(p,d,u,c);if(r+p.offset+m>s){h=f;break}}for(var _=n.length-1,g=l?Math.min(n[h].offset+a,i):Math.min(s+a,i+r),E=h;E<n.length;E++){var S=n[E],C=v.getDimension(S,d,u,c);if(r+S.offset+C>=g){_=E;break}}var y=o,b=o-h;b>0&&(y+=b);var T=o,M=_+o-n.length;return M>0&&(T+=M),{firstIndex:Math.max(h-T,0),lastIndex:Math.min(_+y,n.length-1)}}componentDidMount(){this.props.flatListController.registerList({handleLayout:this.onLayout,handleScroll:this.onScroll})}componentWillUnmount(){this.props.flatListController.unregisterList(),this.enablePointerEvents.cancel(),this.cancelScroll()}cancelScroll(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0,this.hanging=!1)}disablePointerEvents(){if(this.busyId=c.UIBusyTasks.setBusy(this.busyId),!this.pointerEvents){this.props.onPointerEventsOff&&this.props.onPointerEventsOff();var e=this.refList;e&&(e.style.pointerEvents="none"),this.pointerEvents=!0}}scrollIntoViewIfNeeded(e,t=0){var{enhancedData:a,scrollFromStart:r,bodyDimension:s}=this.state;if(e<0||e>=a.length)throw new Error("Invalid Index.");var i=a[e].offset;(i<r-t||i>r+s+t)&&this.props.flatListController.setScrollFromStart(i)}getComponents(){var{reorderAnimationsEnabled:e,renderItem:t,defaultItemWidth:a,defaultItemHeight:r}=this.props,{firstIndex:s,lastIndex:n}=this.state,o=this.state.enhancedData.slice(s,n+1);return this.keyPool.recycleKeysAndMap(o).map((({rctKey:s,data:n},o)=>{var l="horizontal"===this.props.direction?{width:v.getItemWidth(n,a)}:{height:v.getItemHeight(n,r)};return d.createElement(p.default,{key:s,data:(0,i.default)((0,i.default)({},n),l),animate:!!e&&f.default.shouldAnimate,zIndex:this.state.enhancedData.length-o-1,renderItem:t,listDirection:this.props.direction})}))}render(){var{role:e}=this.props,t="horizontal"===this.props.direction?{width:this.state.renderedListLength}:{height:this.state.renderedListLength};return d.createElement("div",{className:(0,o.default)(this.props.className),ref:this.setRefList},d.createElement("div",{"aria-label":this.props["aria-label"],className:(0,o.default)(u.default.viewport,{[u.default.horizontalListViewport]:"horizontal"===this.props.direction,[u.default.verticalListViewport]:"vertical"===this.props.direction}),role:e,"aria-rowcount":this.props["aria-rowcount"],style:t},this.props.itemEnterAnimationsEnabled?d.createElement(m.default,{transitionName:"fade",onAnimationComplete:this.setListLength},this.getComponents()):this.getComponents()))}}t.default=v,v.defaultProps={defaultItemHeight:72,defaultItemWidth:72,forceConsistentRenderCount:!0,extraItems:5,initialScrollFromStart:0,reorderAnimationsEnabled:!0},v.displayName="FlatList"},63097:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=s(a(22220)),o=s(a(70417)),l=r(a(2784)),d=s(a(61941)),u=s(a(61124));class c extends l.Component{constructor(...e){super(...e),this._setRefObserver=e=>{this._refObserver=e,this.props.onRef&&this.props.onRef(e)},this.getScrollFromStart=()=>{var e=this._refObserver;if(e)return"horizontal"===this.props.direction?e.scrollLeft:e.scrollTop},this.setScrollFromStart=e=>{var t=this._refObserver;t&&("horizontal"===this.props.direction?t.scrollLeft=e:t.scrollTop=e)},this._handleRegisterList=()=>{var e=(0,d.default)(this._refObserver,"this._refObserver"),{flatListControllers:t}=this.props;t.forEach((t=>t.triggerLayout({position:e.getBoundingClientRect(),width:e.clientWidth,height:e.clientHeight})))},this._handleScroll=e=>{var{flatListControllers:t,onScroll:a}=this.props;a&&a(e),t.forEach((e=>e.triggerScroll()))},this._handleResize=e=>{var{flatListControllers:t,onLayout:a}=this.props,r=(0,d.default)(this._refObserver,"this._refObserver"),s=(0,o.default)((0,o.default)({},e),{},{position:r.getBoundingClientRect()});t.forEach((e=>e.triggerLayout(s))),a&&a(s)}}componentDidMount(){var{flatListControllers:e,scrollOffset:t}=this.props;e.forEach((e=>e.registerContainer({getScrollFromStart:this.getScrollFromStart,setScrollFromStart:this.setScrollFromStart,onRegisterList:this._handleRegisterList}))),void 0!==t&&this.setScrollFromStart(t)}componentWillUnmount(){var{flatListControllers:e}=this.props;e.forEach((e=>e.unregisterContainer()))}render(){var e=this.props,{children:t,flatListControllers:a,onScroll:r,onLayout:s,onRef:o,scrollOffset:d}=e,c=(0,n.default)(e,["children","flatListControllers","onScroll","onLayout","onRef","scrollOffset"]);return l.createElement(u.default,(0,i.default)({},c,{onResize:this._handleResize,onScroll:this._handleScroll,onRef:this._setRefObserver}),t)}}t.default=c,c.displayName="FlatListContainer"},22004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{registerContainer(e){this._containerAPI=e,this._listHandlers&&e.onRegisterList()}unregisterContainer(){delete this._containerAPI}triggerScroll(){this._listHandlers&&this._listHandlers.handleScroll()}triggerLayout(e){this._listHandlers&&this._listHandlers.handleLayout(e)}registerList(e){this._listHandlers=e,this._containerAPI&&this._containerAPI.onRegisterList()}unregisterList(){delete this._listHandlers}getScrollFromStart(){if(this._containerAPI)return this._containerAPI.getScrollFromStart()}setScrollFromStart(e){this._containerAPI&&this._containerAPI.setScrollFromStart(e)}}},89286:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(a(2784)),n=r(a(31547)),o=r(a(2825));function l(){return i.createElement("div",{className:n.default.loadingSpinner},i.createElement(o.default,{color:"default",size:24,stroke:6}))}l.displayName="LoadingSpinner"},1100:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(829)),i=r(a(61941));t.default=class{constructor(){this._rctKeyToData=new Map,this._keyToRctKey=new Map}_genNewKeys(e){var t=e-this._rctKeyToData.size;if(t<=0)return[];for(var a=[],r=0;r<e&&(this._rctKeyToData.has(r)||(a.push(r),t!==a.length));r++);return a}recycleKeysAndMap(e){var t=new Map,a=new Map,r=this._genNewKeys(e.length),n=new Set(this._rctKeyToData.keys()),o=[];e.forEach((e=>{var r=this._keyToRctKey.get(e.itemKey);void 0!==r?(a.set(e.itemKey,r),t.set(r,e),n.delete(r)):o.push(e)}));var l=[...r,...n];o.forEach((e=>{var r=l.pop();a.set(e.itemKey,r),t.set(r,e)}));var d=(0,s.default)(e,[e=>a.get(e.itemKey)]).map((e=>({rctKey:(0,i.default)(a.get(e.itemKey),"keyToRctKey.get(item.itemKey)"),data:e})));return this._rctKeyToData=t,this._keyToRctKey=a,d}}},66346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={shouldAnimate:!0}},5701:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=r(a(2784)),o=s(a(88665)),l=s(a(74489)),d=s(a(28787)),u=l.default.prefix("transform"),c=l.default.prefix("transition");class h extends n.Component{constructor(...e){super(...e),this.state={shouldAnimate:!0,prevItemKey:null,prevRowOffset:null}}static getDerivedStateFromProps(e,t){return(0,i.default)((0,i.default)({},t),{},{prevItemKey:e.data.itemKey,prevRowOffset:e.data.offset,shouldAnimate:f(e,t)})}shouldComponentUpdate(e,t){return this.props.animate!==e.animate||this.props.zIndex!=this.props.zIndex||this.props.renderItem!==e.renderItem||this.state.shouldAnimate!==t.shouldAnimate||!(0,o.default)(this.props.data,e.data)}render(){var{data:e,zIndex:t}=this.props,{shouldAnimate:a}=this.state,r=a?"".concat(u," ").concat(200,"ms ease-in-out"):"none",s="horizontal"===this.props.listDirection?{width:e.width,[u]:"translateX(".concat(e.offset,"px)")}:{height:e.height,[u]:"translateY(".concat(e.offset,"px)")},o=(0,i.default)({zIndex:t,[c]:r},s),l=this.props.renderItem(e);return n.createElement("div",{className:d.default.item,style:o},l)}}function f(e,t){if(!e.animate)return!1;var{prevItemKey:a}=t;return e.data.itemKey===a&&e.data.offset!==t.prevRowOffset}t.default=h,h.displayName="ListItem"},43562:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(72779)),o=r(a(2784)),l=s(a(50935)),d=s(a(56117)),u=r(a(96452)),c=s(a(35387)),h=r(a(44202)),f=s(a(53632)),p=s(a(17957)),m=s(a(20642)),_=s(a(26327)),v=a(65935),g=s(a(72259)),E=s(a(82631)),S=s(a(2220)),C=s(a(74185));class y extends o.PureComponent{constructor(e){super(e),this._updateImgSrcUrl=e=>{var t,a=e.height+50,r="color:red|"+e.lat+", "+e.lng,s=e.lat+", "+e.lng,n=e.width+"x"+a,o=d.default.currentRes===d.default.RES.HIGH?2:1,c=p.default.getLocale(),f=C.default.GSM_NAME,m=C.default.build(l.default.G_MAPS_IMG_URL,(0,i.default)({zoom:15,size:n,scale:o,language:c,client:f},e.showMarker?{markers:r}:{center:s})),_="dark"===(null===(t=this.context)||void 0===t?void 0:t.theme)?"".concat(m,"&").concat(l.default.G_MAPS_DARK_MODE_STYLE):m;this._lastURL!==_&&(this._lastURL=_,C.default.gsmURL(_,C.default.GSM_NUMS).checkpoint(e.rejectOnUnmount()).then((e=>{this.setState({imgSrcUrl:e,hiResAvail:h.isCached(e)})})).catchType(u.Unmount,(()=>{})))},this._onImgLoaded=()=>{this.state.hiResAvail||this.setState({hiResAvail:!0}),this.props.onLoad&&this.props.onLoad()},this.state={imgSrcUrl:null,hiResAvail:!1},this._updateImgSrcUrl(e)}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>this._updateImgSrcUrl(this.props)))}componentDidUpdate(){this._updateImgSrcUrl(this.props)}render(){var{lat:e,lng:t,name:a,width:r,height:s,className:i,linkify:l}=this.props,d={pointerEvents:"none",width:r,height:this.state.hiResAvail?void 0:s},u=(0,n.default)(i,{[_.default.hidden]:!this.state.hiResAvail}),h=this.state.hiResAvail?null:o.createElement(E.default,{name:"map-placeholder",display:"inline"}),p=o.createElement(f.default,{src:this.state.imgSrcUrl||"",className:u,style:d,hasPrivacyChecks:!1,onLoad:this._onImgLoaded,noXHR:!0});return l?o.createElement(c.default,{href:(0,v.getMapUrl)(e,t,a),className:_.default.container},h,p):o.createElement("span",{className:_.default.container},h,p)}}y.defaultProps={linkify:!0,showMarker:!0},y.contextType=S.default,y.displayName="Map";var b=(0,m.default)((0,g.default)(y));t.default=b},27862:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(71201)),o=r(a(17957)),l=r(a(40207));class d extends i.PureComponent{render(){var{chat:e,disabled:t}=this.props,a=this.props.onMarkUnread.bind(null,!e.unreadCount);return i.createElement(n.default,{a8n:"mi-mark-as",action:a,key:"MarkUnreadMenuItem",disabled:t},e.unreadCount?o.default.t(933):o.default.t(934))}}d.CONCERNS={chat:["unreadCount"]},d.displayName="MarkUnreadMenuItem";var u=(0,l.default)(d,d.CONCERNS);t.default=u},68084:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.Pending=c,t.PendingCancel=h,t.Download=f,t.Upload=p,t.Play=m,t.GifIcon=_;var i=s(a(72779)),n=r(a(2784)),o=s(a(17957)),l=s(a(43406)),d=s(a(2825)),u=s(a(82631));function c(){return n.createElement("div",{className:l.default.controls},n.createElement("div",{className:(0,i.default)(l.default.icon)},n.createElement("div",{className:l.default.spinner},n.createElement(d.default,{size:50,stroke:3,color:"white"}))))}function h(){return n.createElement("div",{className:l.default.controls},n.createElement("div",{className:(0,i.default)(l.default.icon,l.default.cursorPointer)},n.createElement("div",{className:l.default.spinner},n.createElement(d.default,{size:50,stroke:3,color:"white"})),n.createElement("div",{className:l.default.cancel},n.createElement(u.default,{name:"media-cancel"}))))}function f({filesize:e=0,onClick:t}){return e>0?n.createElement("div",{className:l.default.controls},n.createElement("button",{className:(0,i.default)(l.default.btnMeta,l.default.cursorPointer),onClick:t},n.createElement(u.default,{name:"media-download",className:l.default.iconMeta}),n.createElement("span",null,o.default.filesize(e)))):n.createElement("div",{className:l.default.controls},n.createElement("button",{className:(0,i.default)(l.default.button,l.default.cursorPointer),onClick:t},n.createElement(u.default,{name:"media-download"})))}function p({filesize:e=0}){return e>0?n.createElement("div",{className:l.default.controls},n.createElement("button",{className:(0,i.default)(l.default.btnMeta,l.default.cursorPointer)},n.createElement(u.default,{name:"media-upload",className:l.default.iconMeta}),n.createElement("span",null,o.default.filesize(e)))):n.createElement("div",{className:l.default.controls},n.createElement("div",{className:l.default.button},n.createElement(u.default,{name:"media-upload"})))}function m(){return n.createElement("div",{className:l.default.controls},n.createElement("div",{className:l.default.button},n.createElement(u.default,{name:"media-play",className:l.default.play})))}function _({onClick:e}){return n.createElement("div",{role:"button",className:l.default.controls,onClick:e},n.createElement("div",{className:l.default.button},n.createElement(u.default,{name:"media-gif"})))}c.displayName="Pending",h.displayName="PendingCancel",f.displayName="Download",p.displayName="Upload",m.displayName="Play",_.displayName="GifIcon"},40686:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=s(a(22220)),o=s(a(72779)),l=r(a(2784)),d=s(a(25997)),u=s(a(40207));class c extends l.PureComponent{render(){var e=this.props,{msg:t,thumbnailPlaceholder:a}=e,r=(0,n.default)(e,["msg","thumbnailPlaceholder"]);return t.mediaData?l.createElement(p,(0,i.default)({mediaData:t.mediaData,thumbnailPlaceholder:a},r)):null!=a?l.createElement(m,{className:r.containerClassName},a):null}}c.CONCERNS={msg:["mediaData"]},c.displayName="MediaThumbnail";var h=(0,u.default)(c,c.CONCERNS);t.default=h;class f extends l.PureComponent{render(){var{containerClassName:e,childClassName:t,mediaData:a,thumbnailPlaceholder:r}=this.props,s=[];return a&&(a.preview&&s.push({opaque:a.preview,key:"preview"}),a.fullPreviewData&&s.push({opaque:a.fullPreviewData,key:"fullPreviewData"})),s.length?l.createElement(m,{className:e},s.map((({key:e,opaque:a})=>l.createElement(_,{className:t,key:e,opaque:a})))):null!=r?l.createElement(m,{className:e},r):null}}f.CONCERNS={mediaData:["preview","fullPreviewData"]},f.displayName="InternalMediaThumbnailMediaData";var p=(0,u.default)(f,f.CONCERNS);function m(e){var{className:t,children:a}=e;return l.createElement("div",{className:(0,o.default)(d.default.container,t)},a)}class _ extends l.PureComponent{componentDidMount(){var e;null===(e=this.props.opaque)||void 0===e||e.retain()}componentDidUpdate(e){var t,a;e.opaque!==this.props.opaque&&(null===(t=e.opaque)||void 0===t||t.autorelease(),null===(a=this.props.opaque)||void 0===a||a.retain())}componentWillUnmount(){var e;null===(e=this.props.opaque)||void 0===e||e.autorelease()}render(){var{className:e,opaque:t}=this.props;return l.createElement("div",{className:(0,o.default)(d.default.child,e),style:t?{backgroundImage:'url("'.concat(t.url(),'")')}:null})}}_.displayName="Thumbnail"},80898:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuBar=m,t.MenuBarItem=_;var i=s(a(58527)),n=s(a(72779)),o=r(a(2784)),l=s(a(32960)),d=s(a(44417)),u=s(a(17693)),c=s(a(71203)),h=s(a(14578)),f=s(a(72376)),p=s(a(74824));function m(e){var t=(0,n.default)(d.default.menu,{[d.default.menuDefault]:!e.theme,[d.default.menuStrong]:"strong"===e.theme,[d.default.menuInverse]:"inverse"===e.theme,[d.default.menuNarrow]:"narrow"===e.theme});return o.createElement("div",{className:t},e.children)}function _(e){var{text:t,transitionName:a="dropdown",disabled:r=!1,children:s,icon:m,title:_,selected:v}=e,[g,E]=o.useState(!1),S=null!=s&&g?o.createElement(u.default,{displayName:"MenuBarMenuItem",escapable:!0,popable:!0,requestDismiss:()=>{E(!1)}},s):null,C=(0,n.default)(d.default.item,{[d.default.selected]:v,[d.default.active]:g,[d.default.disabled]:r}),[y,b]=(0,f.default)((t=>{e.onClick&&e.onClick(t),t.isDefaultPrevented()||(t.preventDefault(),g||null!=s&&E(!0))}),{disabled:r}),[T,M]=(0,c.default)(),N=(0,h.default)(y,T);return o.createElement("div",{"data-a8n":l.default.key(e.a8nText),className:C},o.createElement("div",(0,i.default)({},b,{className:(0,n.default)(d.default.button,M&&d.default.itemFocused),"data-tab":r?void 0:e.tabOrder,title:_,"aria-label":_,ref:N}),m,t&&o.createElement("span",{className:d.default.itemText},t)),o.createElement(p.default,{transitionName:a},S))}m.displayName="MenuBar",_.displayName="MenuBarItem"},51956:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(17957)),d=s(a(20642)),u=s(a(26432)),c=s(a(94660)),h=s(a(82631));class f extends n.Component{constructor(...e){super(...e),this.refDiv=n.createRef(),this.getElement=()=>this.refDiv.current,this.addOrRemoveLabelOnSelected=()=>{var e=this.props.selectedModels.getSelected();o.default.openModal(n.createElement(u.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))}}componentDidMount(){this.props.selectedModels&&this.props.listeners.add(this.props.selectedModels,"all",(()=>{this.forceUpdate()}))}componentDidUpdate(){0===this.props.selectedModels.getSelected().length&&this.props.onCancel&&this.props.onCancel()}render(){var e,t,a,{labelEditEnabled:r,onRemoveLabel:s}=this.props,o=this.props.selectedModels.getSelected().length,{onDelete:d}=this.props;r&&o>0&&(e=n.createElement(m,{name:"label",disabled:!o,title:l.default.t(1590),onClick:this.addOrRemoveLabelOnSelected})),s&&o>0&&(a=n.createElement(m,{name:"label-delete",disabled:!o,title:l.default.t(1592),onClick:s})),d&&o>0&&(t=n.createElement(m,{name:"delete",disabled:!o,title:l.default.t(1591),onClick:d}));var u=(0,i.default)(c.default.multiControls,{[c.default.drawerHeader]:"drawer-header"===this.props.theme,[c.default.chatListPanel]:"chatlist-panel"===this.props.theme});return n.createElement("div",{className:u,ref:this.refDiv},n.createElement(m,{name:"x",onClick:this.props.onCancel}),n.createElement("div",{className:c.default.multiCount},l.default.t(1302,{count:o,_plural:o})),e,t,a)}}f.displayName="MixedMultiselectBar";var p=(0,d.default)(f);t.default=p;var m=({name:e,title:t,onClick:a,directional:r,disabled:s})=>n.createElement("button",{className:c.default.multiselectIcon,title:t,onClick:a,disabled:s?"disabled":void 0},n.createElement(h.default,{name:e,directional:r}));m.displayName="BtnIcon"},85472:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(68015)),o=s(a(18149)),l=s(a(13888)),d=s(a(54073)),u=s(a(72779)),c=a(39329),h=r(a(2784)),f=s(a(79711)),p=r(a(96452)),m=s(a(20642)),_=s(a(43050)),v=s(a(61941)),g=s(a(72259)),E=s(a(91378));class S extends h.Component{constructor(e){var t;super(e),this._setStateTimer=new c.ShiftTimer((e=>{this.setState(e)})),this._setRefComponent=e=>{this._refComponent=e},this.addListeners=()=>{window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.handleResize),this.props.listeners.add(f.default,"floater_escape_overlap",this._escapeOverlapMove)},this._getInitialStyle=()=>this.props.initialStyle?{width:this.props.initialStyle.width,left:this.props.initialStyle.left,bottom:this.props.initialStyle.bottom}:{width:this.props.minWidth,left:this.props.margin.x,bottom:this.props.margin.y},this._getResizerCallback=e=>t=>{0===t.button&&this.setState({resizeDirection:e,currentAction:1,resizeStartPiPStyle:{width:this.state.width,left:this.state.left,bottom:this.state.bottom},resizeStartMousePosition:{x:t.clientX,y:t.clientY}}),t.stopPropagation()},this.onMoveStart=e=>{0===e.button&&this.setState({currentAction:2,moveStartPositionStyle:{left:this.state.left,bottom:this.state.bottom},moveStartMousePosition:{x:e.clientX,y:e.clientY}}),e.stopPropagation()},this.onMoveStop=()=>{var e=this._getRect();this.props.onMoveStop&&this.props.onMoveStop(e)},this.handleResize=(0,d.default)((()=>{var e=window.innerHeight-2*this.props.margin.y,t=window.innerWidth-2*this.props.margin.x,a=this.state.width,r=a/this.props.aspectRatio,s=this.state.bottom,i=this.state.left;r>e&&(r=e,a=e*this.props.aspectRatio),a>t&&(r=t/this.props.aspectRatio,a=t),s+r>e+this.props.margin.y&&(s=e+this.props.margin.y-r),i+a>t+this.props.margin.x&&(i=t+this.props.margin.x-a),this.state.previousWindowSize.width<i+a+this.props.margin.x+3&&(i=t+this.props.margin.x-a),this.state.previousWindowSize.height<s+r+this.props.margin.y+3&&(s=e+this.props.margin.y-r);var n,d=null!=this.state.previousConvPanelRightBorder&&this.state.previousConvPanelRightBorder>0&&Math.abs(this.state.left+a+this.props.margin.x-this.state.previousConvPanelRightBorder)<3;this.props.escapeConversationHeader&&f.default.getConversationHeaderOffset((e=>{n=e.right}));var u=n&&n<window.innerWidth;d&&null!=n&&0!==n&&u&&(i=n-this.props.margin.x-a);var c={bottom:Math.max(this.props.margin.y,s),left:Math.max(this.props.margin.x,i),width:Math.max(this.props.minWidth,a),previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:n},h=(0,l.default)(this.state,["bottom","left","width","previousWindowSize","previousConvPanelRightBorder"]);(0,o.default)(c,h)||this.setState(c)}),50),this._validateMoveResize=(e,t,a,r)=>{var s=e,i=t,o=a,l=0,d=0,u=0;switch(r){case 1:l=this.state.resizeStartPiPStyle.width,d=this.state.resizeStartPiPStyle.left,u=this.state.resizeStartPiPStyle.bottom;break;case 2:l=this.state.width,d=this.state.moveStartPositionStyle.left,u=this.state.moveStartPositionStyle.bottom}var c=window.innerHeight,h=window.innerWidth,f=l+s,p=f/this.props.aspectRatio,m=u+o,_=(0,n.default)(m,2),v=d+i,g=(0,n.default)(v,2),E=this.props.minWidth,S=(0,n.default)(this.props.margin.y,2),C=(0,n.default)(c-p-this.props.margin.y,2),y=(0,n.default)(this.props.margin.x,2),b=(0,n.default)(h-f-this.props.margin.x,2);if(S>_||_>C)switch(r){case 1:o=0,i=0,s=0;break;case 2:o=0}if(y>g||g>b)switch(r){case 1:o=0,i=0,s=0;break;case 2:i=0}if(s&&m+p+this.props.margin.y>c)switch(r){case 1:o=0,i=0,s=0}if(s&&v+f+this.props.margin.x>h)switch(r){case 1:o=0,i=0,s=0}return(f<E||p+2*this.props.margin.y>c||f+2*this.props.margin.x>h)&&(o=0,i=0,s=0),{deltaWidth:s,deltaBottom:o,deltaLeft:i}},this.onMouseMove=e=>{var t,a=0,r=0,s=0,i=0;switch(this.state.currentAction){case 0:return;case 1:switch(this.state.resizeDirection){case 0:a=(r=this.state.resizeStartMousePosition.y-e.clientY)*this.props.aspectRatio;break;case 1:a=(r=e.clientY-this.state.resizeStartMousePosition.y)*this.props.aspectRatio,i=-r;break;case 3:i=-(r=(a=e.clientX-this.state.resizeStartMousePosition.x)/this.props.aspectRatio);break;case 2:i=-(r=(a=this.state.resizeStartMousePosition.x-e.clientX)/this.props.aspectRatio),s=-a;break;case 4:r=(a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)))/this.props.aspectRatio;break;case 5:r=(a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(this.state.resizeStartMousePosition.y-e.clientY)))/this.props.aspectRatio,s=-a;break;case 6:i=-(r=(a=Math.max(e.clientX-this.state.resizeStartMousePosition.x,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)))/this.props.aspectRatio);break;case 7:i=-(r=(a=Math.max(this.state.resizeStartMousePosition.x-e.clientX,this.props.aspectRatio*(e.clientY-this.state.resizeStartMousePosition.y)))/this.props.aspectRatio),s=-a}var n=0,o=0,l=0;if(0===(t=this._validateMoveResize(a,s,i,1)).deltaWidth&&0===t.deltaLeft&&0===t.deltaBottom){if(a<0)switch(this.state.resizeDirection){case 0:case 4:a=this.props.minWidth-this.state.resizeStartPiPStyle.width,i=0,s=0;break;case 5:s=-(a=this.props.minWidth-this.state.resizeStartPiPStyle.width),i=0;break;case 1:case 3:case 6:i=-(r=(a=this.props.minWidth-this.state.resizeStartPiPStyle.width)/this.props.aspectRatio),s=0;break;case 2:case 7:i=-(r=(a=this.props.minWidth-this.state.resizeStartPiPStyle.width)/this.props.aspectRatio),s=-a}else if(a>0){var d=this.state.resizeStartPiPStyle.width/this.props.aspectRatio;switch(this.state.resizeDirection){case 0:case 4:a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-d-this.state.resizeStartPiPStyle.bottom))-.1;break;case 5:r=(a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(window.innerHeight-this.props.margin.y-d-this.state.resizeStartPiPStyle.bottom))-.1)/this.props.aspectRatio,s=-a;break;case 1:case 3:case 6:i=-(r=(a=Math.min(window.innerWidth-this.props.margin.x-this.state.resizeStartPiPStyle.width-this.state.resizeStartPiPStyle.left,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1)/this.props.aspectRatio);break;case 2:case 7:i=-(r=(a=Math.min(this.state.resizeStartPiPStyle.left-this.props.margin.x,this.props.aspectRatio*(this.state.resizeStartPiPStyle.bottom-this.props.margin.y))-.1)/this.props.aspectRatio),s=-a}}n=this.state.resizeStartPiPStyle.width+a,o=this.state.resizeStartPiPStyle.left+s,l=this.state.resizeStartPiPStyle.bottom+i,this.setState({width:n,left:o,bottom:l})}else n=this.state.resizeStartPiPStyle.width+t.deltaWidth,o=this.state.resizeStartPiPStyle.left+t.deltaLeft,l=this.state.resizeStartPiPStyle.bottom+t.deltaBottom,this.setState({width:n,left:o,bottom:l});this.props.onResize&&this.props.onResize(n,o,l);break;case 2:s=e.clientX-this.state.moveStartMousePosition.x,i=this.state.moveStartMousePosition.y-e.clientY,t=this._validateMoveResize(a,s,i,2);var u=0,c=0;u=0!==s&&0===t.deltaLeft?s>0?window.innerWidth-this.state.width-this.props.margin.x:this.props.margin.x:this.state.moveStartPositionStyle.left+t.deltaLeft,c=0!==i&&0===t.deltaBottom?i>0?window.innerHeight-this.state.width/this.props.aspectRatio-this.props.margin.y-.1:this.props.margin.y:this.state.moveStartPositionStyle.bottom+t.deltaBottom,this.setState({left:u,bottom:c}),this.props.onMove&&this.props.onMove(u,c)}},this.onMouseUp=()=>{this.setState({currentAction:0})},this._getRect=()=>({top:window.innerHeight-this.state.bottom-this.state.width/this.props.aspectRatio,left:this.state.left,bottom:window.innerHeight-this.state.bottom,right:this.state.left+this.state.width}),this._escapeOverlapMove=(e,t)=>{var a=e.getBoundingClientRect(),r={left:a.left-t,top:a.top-t,right:a.right+t,bottom:a.bottom+t},s=this._getRect();if(this._doOverlap(s,r)){var i,n,o=this._escapeDistance(s,r);if(this._isTranslationOutOfBound(-o.toLeftDistance,0)||(void 0===i||o.toLeftDistance<i)&&(i=o.toLeftDistance,n=2),this._isTranslationOutOfBound(0,-o.toBottomDistance)||(void 0===i||o.toBottomDistance<i)&&(i=o.toBottomDistance,n=1),this._isTranslationOutOfBound(o.toRightDistance,0)||(void 0===i||o.toRightDistance<i)&&(i=o.toRightDistance,n=3),this._isTranslationOutOfBound(0,o.toTopDistance)||(void 0===i||o.toTopDistance<i)&&(i=o.toTopDistance,n=0),void 0!==i){var l={};switch(n){case 2:l={left:this.state.left-o.toLeftDistance};break;case 1:l={bottom:this.state.bottom-o.toBottomDistance};break;case 3:l={left:this.state.left+o.toRightDistance};break;case 0:l={bottom:this.state.bottom+o.toTopDistance}}var d=(0,E.default)((0,v.default)(this._refComponent,"this._refComponent"),l,{duration:200});Promise.race([d,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState(l)})).catchType(p.Unmount,(()=>{}))}}},this.props.escapeConversationHeader&&f.default.getConversationHeaderOffset((e=>{t=e.right}));var a={resizeDirection:0,currentAction:0,resizeStartMousePosition:{x:0,y:0},resizeStartPiPStyle:{width:0,bottom:0,left:0},moveStartMousePosition:{x:0,y:0},moveStartPositionStyle:{left:0,bottom:0},previousWindowSize:{height:window.innerHeight,width:window.innerWidth},previousConvPanelRightBorder:t};this.props.animationStartStyle?this.state=(0,i.default)((0,i.default)({},a),this.props.animationStartStyle):this.state=(0,i.default)((0,i.default)({},a),this._getInitialStyle())}componentWillUnmount(){this.handleResize.cancel(),this._setStateTimer.cancel(),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.handleResize)}componentDidMount(){if(!this.props.animationStartStyle)return this.addListeners(),void this.handleResize();var e=this.props.animationStartStyle,t=this._getInitialStyle(),a=e.width/this.props.aspectRatio,r=e.height,s=r/a,n=(0,i.default)((0,i.default)({},t),{},{height:t.width/this.props.aspectRatio,scaleY:[1,s],translateY:[0,(a-r)/2/s]}),o=(0,E.default)((0,v.default)(this._refComponent,"this._refComponent"),n,{easing:"easeInOutQuart",duration:400});this._initialAnimationPromise=Promise.race([o,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((()=>{this._initialAnimationPromise=null,this.setState(t),this.addListeners(),this.handleResize()})).catchType(p.Unmount,(()=>{}))}componentDidUpdate(e){if(this.props.aspectRatio!==e.aspectRatio&&this.props.initialStyle){if(this._initialAnimationPromise)return void this._setStateTimer.onOrAfter(400,this.props.initialStyle);var t=this.props.initialStyle.width,a=this.props.initialStyle.left+t-(this.state.width+this.state.left),r=this.props.initialStyle.bottom+t/this.props.aspectRatio-(this.state.bottom+this.state.width/this.props.aspectRatio);Math.abs(a)<.1&&Math.abs(r)<.1?this.setState(this.props.initialStyle):this.setState({width:t})}}_getDimensions(){return{width:this.state.width,height:this.state.width/this.props.aspectRatio}}_doOverlap(e,t){return!(e.right<=t.left||e.left>=t.right)&&!(e.bottom<=t.top||e.top>=t.bottom)}_escapeDistance(e,t){return{toLeftDistance:e.right-t.left,toBottomDistance:t.bottom-e.top,toRightDistance:t.right-e.left,toTopDistance:e.bottom-t.top}}_isTranslationOutOfBound(e,t){var a=window.innerWidth,r=window.innerHeight,s=this.state.left+e,i=this.state.bottom+t,n=this.state.width,o=n/this.props.aspectRatio,l=this.props.margin.x,d=a-n-this.props.margin.x,u=this.props.margin.y,c=r-o-this.props.margin.y;return u>i||i>c||(l>s||s>d)}render(){var e=this._getDimensions(),t={width:e.width,height:e.height,bottom:this.state.bottom+"px",left:this.state.left+"px"};return h.createElement("div",{ref:this._setRefComponent,className:(0,u.default)(this.props.className,_.default.moveResizeComponentContainer),style:t},this.props.disableResize?null:h.createElement(h.Fragment,null,h.createElement("div",{className:(0,u.default)(_.default.topResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(0)}),h.createElement("div",{className:(0,u.default)(_.default.bottomResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(1)}),h.createElement("div",{className:(0,u.default)(_.default.leftResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(2)}),h.createElement("div",{className:(0,u.default)(_.default.rightResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(3)}),h.createElement("div",{className:(0,u.default)(_.default.topRightResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(4)}),h.createElement("div",{className:(0,u.default)(_.default.topLeftResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(5)}),h.createElement("div",{className:(0,u.default)(_.default.bottomRightResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(6)}),h.createElement("div",{className:(0,u.default)(_.default.bottomLeftResizer,_.default.resizer,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this._getResizerCallback(7)})),h.createElement("div",{className:(0,u.default)(_.default.moveable,{[_.default.defaultCursor]:1===this.state.currentAction}),onMouseDown:this.onMoveStart,onMouseUp:this.onMoveStop,grab:2===this.state.currentAction?"true":"supported"},this.props.children))}}S.displayName="MoveResizeComponent";var C=(0,m.default)((0,g.default)(S));t.default=C},51465:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(16760)),n=s(a(90882)),o=s(a(72779)),l=r(a(2784)),d=s(a(79711)),u=s(a(9386)),c=s(a(55236)),h=s(a(43396)),f=s(a(93329)),p=a(75459),m=s(a(17957)),_=s(a(20642)),v=s(a(26432)),g=s(a(40210)),E=s(a(58885)),S=s(a(4018)),C=a(64658),y=s(a(82631)),b=r(a(75074));class T extends l.Component{constructor(...e){super(...e),this._refDiv=l.createRef(),this.getElement=()=>this._refDiv.current,this._onStarChanged=e=>{this.props.selectedMessages.isSelected(e)&&this.forceUpdate()},this._onStarSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected();e&&d.default.sendStarMsgs(e,r,null,a),this.props.onCancel()},this._onUnstarSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected();e&&d.default.sendUnstarMsgs(e,r,null,a),this.props.onCancel()},this._onDownloadSelected=()=>{var e=(0,n.default)(this.props.selectedMessages.getSelected(),(e=>e.mediaData));if(e.length){var t=(0,n.default)(e,(e=>!e.mediaData.isDownloadable()));t.length>0?(d.default.openToast(l.createElement(b.default,{msg:m.default.t(596),id:(0,b.genId)()})),Promise.all((0,i.default)(t,(e=>e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:g.default.WEBC_RMR_REASON_CODE.MULTI_SELECT_DOWNLOAD,isUserInitiated:!0})))).then((()=>{var t=(0,n.default)(e,(e=>e.mediaData.isDownloadable()));e.length>t.length&&d.default.openToast(l.createElement(b.default,{msg:m.default.t(699,{_plural:e.length-t.length,count:e.length-t.length}),id:(0,b.genId)()})),t.length&&h.default.initDownload(t)}))):h.default.initDownload(e),this.props.onCancel()}},this.addOrRemoveLabelOnSelected=()=>{var e=this.props.selectedMessages.getSelected();d.default.openModal(l.createElement(v.default,{onLabelUpdateComplete:this.props.onCancel,modelsToUpdate:e}))},this._onDeleteSelected=()=>{var{chat:e,selectedMessages:t,toastPosition:a}=this.props,r=t.getSelected(),s=r.every((e=>e.canRevoke()));e&&d.default.openModal(l.createElement(c.default,{chat:e,msgList:r.map(C.unproxy),deletePrompt:!0,revokePrompt:s&&!this.props.disableRevoke,toastPosition:a,onCancel:this.props.onCancel}))},this._onForwardSelected=()=>{var e=this.props.selectedMessages.getSelected();!this.props.noSortOnForward&&this.props.chat&&(e=this.props.chat.sortMsgs(e));var t=e.length,a=()=>{this.props.onCancel()},r=(0,n.default)(e,(e=>e.canForward()));r.length?t!==r.length?d.default.openModal(l.createElement(u.default,{title:m.default.t(517),onOK:()=>{d.default.openModal(l.createElement(f.default,{msgs:r,pushTransition:"none",popTransition:"none",onForward:a}),{transition:"modal-flow"})},okText:m.default.t(707),onCancel:()=>d.default.closeModal(),cancelText:m.default.t(1593)},m.default.t(516))):d.default.openModal(l.createElement(f.default,{msgs:e,pushTransition:"none",popTransition:"none",onForward:a}),{transition:"modal-flow"}):d.default.openModal(l.createElement(u.default,{title:m.default.t(692),onOK:()=>d.default.closeModal(),okText:m.default.t(1761)},m.default.t(689,{_plural:t})))}}componentDidMount(){this.props.selectedMessages.getSelected().forEach((e=>{this.props.listeners.add(e,"change:star",(()=>{this.forceUpdate()}))})),this.props.listeners.add(this.props.selectedMessages,"all",(()=>{this.forceUpdate()})),this.props.listeners.add(E.default,"change:star",this._onStarChanged)}render(){var e,t,a,r=this.props.selectedMessages.getSelected(),s=r.length,i=r.every((e=>e.canForward())),n=r.every((e=>e.canStar())),d=r.every((e=>e.mediaData)),u=r.every((e=>!e.asRevoked)),c=l.createElement(N,{disabled:!s||!i,name:"forward",onClick:this._onForwardSelected,title:m.default.t(712,{_plural:s})}),h=l.createElement(N,{name:"delete",disabled:!s,title:m.default.t(569,{_plural:s}),onClick:this._onDeleteSelected});s&&r.every((e=>e.star))?(e=this._onUnstarSelected,t="unstar-btn",a=m.default.t(1418,{_plural:s})):(e=this._onStarSelected,t="star-btn",a=m.default.t(1340,{_plural:s}));var f,_=l.createElement(N,{name:t,disabled:!s||!n,title:a,onClick:e}),v=(0,p.canEditLabelAssociation)()&&l.createElement(N,{disabled:!s||!u,name:"label",onClick:this.addOrRemoveLabelOnSelected,title:m.default.t(865)});Modernizr.adownload&&this.props.downloadButton&&d&&(f=l.createElement(N,{name:"download",disabled:!s,title:m.default.t(1589),onClick:this._onDownloadSelected}));var g=(0,o.default)(S.default.multiControls,{[S.default.mediaGalleryTheme]:"mediaGallery"===this.props.theme});return l.createElement("div",{className:g,ref:this._refDiv},l.createElement(N,{name:"x",onClick:this.props.onCancel}),l.createElement("span",{className:S.default.multiCount},m.default.t(1302,{count:s,_plural:s})),v,_,h,c,f)}}T.defaultProps={downloadButton:!0},T.displayName="MultiselectBar";var M=(0,_.default)(T);t.default=M;var N=({name:e,title:t,onClick:a,directional:r,disabled:s})=>l.createElement("button",{className:S.default.multiselectIcon,title:t,onClick:a,disabled:s?"disabled":void 0},l.createElement(y.default,{name:e,directional:r}));N.displayName="BtnIcon"},60733:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=s(a(71201)),o=a(75459),l=r(a(17957)),d=r(a(40207)),u=r(a(67360)),c=()=>{};class h extends i.PureComponent{render(){var e,t,a,r,{mute:s,disabled:d,chat:h,settings:f}=this.props,p=this.props.onMute.bind(null,!s.isMuted);return h.archive&&(0,o.archiveV2Supported)()&&f.showArchiveV2?(e=c,r=l.default.t(1742),t=n.ThemeOptions.MUTED,a=i.createElement(u.default,{left:!0},l.default.t(237))):(r=s.isMuted?l.default.t(1742):l.default.t(1741),e=p),i.createElement(n.default,{action:e,disabled:d,theme:t,tooltip:a},r)}}h.CONCERNS={mute:["isMuted"],chat:["archive"],settings:["showArchiveV2"]},h.displayName="MuteMenuItem";var f=(0,d.default)(h,h.CONCERNS);t.default=f},60949:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=T,t.GroupNameClass=t.ContactNameClass=void 0;var i=s(a(58527)),n=s(a(22220)),o=s(a(19976)),l=s(a(72779)),d=r(a(2784)),u=s(a(91581)),c=s(a(18120)),h=a(62902),f=s(a(49984)),p=s(a(86638)),m=s(a(26079)),_=s(a(10385)),v=s(a(40207)),g=s(a(82631));function E(){var e=(0,o.default)(["displayName:",",\nformattedName:",",\nname:",",\nformattedShortName:",",\nformattedUser:",""]);return E=function(){return e},e}class S extends d.PureComponent{render(){var e,{element:t,contact:a,highlightText:r,titlify:s,ellipsify:i,you:n,selectable:o,useShortName:v,useDisplayName:S,onClick:C,showLabel:y,showBusinessCheckmark:b,showNotifyName:T,useVerifiedName:M,firstLabel:N}=this.props;r&&(e=h.Configuration.SearchName({terms:[r]}));var I,P=(0,l.default)(a.isPSA?m.default.psa:null,this.props.className);if(!(I=S&&a.displayName?a.displayName:v&&a.formattedShortName?a.formattedShortName:M&&a.verifiedName?a.verifiedName:n&&a.isMe?a.formattedName:T&&!a.name&&a.notifyName?"~".concat(a.notifyName):a.formattedUser))return __LOG__(4,void 0,new Error,!0)(E(),I,a.formattedName,a.name,a.formattedShortName,a.formattedUser),SEND_LOGS("display name is null or undefined"),"";var A=d.createElement(u.default,{text:(0,_.default)(I),element:t,className:P,formatters:e,titlify:s,ellipsify:i,direction:"auto",selectable:o,inlineblock:!0,onClick:C}),O=this.props.labels||a.labels;O&&N&&(0,p.default)(O,N);var D=y&&O&&d.createElement("div",{className:m.default.labels},d.createElement(f.default,{labels:O,showName:!1}));return a.isPSA||c.default.supportsFeature(c.default.F.VNAME_V_2)&&b?d.createElement("span",{className:m.default.verified},A,d.createElement("div",{className:m.default.icon},d.createElement(g.default,{name:"psa-verified"})),D):D?d.createElement("span",{className:m.default.hasLabels},A,D):A}}t.ContactNameClass=S,S.CONCERNS={contact:["isPSA","formattedUser","formattedName","formattedShortName","displayName","labels","name","notifyName","isMe","verifiedName"]},S.defaultProps={element:"span"},S.displayName="ContactNameClass";var C=(0,v.default)(S,S.CONCERNS);class y extends d.PureComponent{render(){var e,{element:t,chat:a,groupMetadata:r,highlightText:s,titlify:i,ellipsify:n,onClick:o,showLabel:c,firstLabel:v}=this.props;s&&(e=h.Configuration.SearchName({terms:[s]}));var E=this.props.labels||a.labels;E&&v&&(0,p.default)(E,v);var S=c&&E?d.createElement("div",{className:m.default.labels},d.createElement(f.default,{labels:E,showName:!1})):null,C=d.createElement(u.default,{text:(0,_.default)(a.title()),element:t,formatters:e,titlify:i,ellipsify:n,direction:"auto",inlineblock:!0,onClick:o});return r.support?d.createElement("div",{className:(0,l.default)({[m.default.verified]:!0,[m.default.hasLabels]:!!S})},C,d.createElement("div",{className:m.default.icon},d.createElement(g.default,{name:"psa-verified"})),S):S?d.createElement("div",{className:m.default.hasLabels},C,S):C}}t.GroupNameClass=y,y.CONCERNS={chat:["formattedTitle","labels"],groupMetadata:["support"]},y.displayName="GroupNameClass";var b=(0,v.default)(y,y.CONCERNS);function T(e){if(e.chat&&!e.chat.isUser){var{chat:t}=e,a=(0,n.default)(e,["chat"]);return d.createElement(b,(0,i.default)({chat:t,groupMetadata:t.groupMetadata},a))}var r,s;if(e.chat){var{chat:o}=e,l=(0,n.default)(e,["chat"]);r=o.contact,s=l}else{var{contact:u}=e;r=u,s=l=(0,n.default)(e,["contact"])}return d.createElement(C,(0,i.default)({contact:r},s))}T.displayName="Name"},3303:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(20642)),d=s(a(4651)),u=a(53274),c=s(a(17026));class h extends i.Component{constructor(...e){super(...e),this.count=null,this._updateUnreadCount=()=>{var e;e=c.default.displayInfo===c.StreamInfo.OFFLINE||c.default.displayInfo===c.StreamInfo.TIMEOUT?-1:n.default.filter((e=>e.shouldShowUnreadInTitle)).length,this.count!==e&&(this.count=e,(0,u.setTitleAndIcon)(e))}}componentDidMount(){var e=this.props.listeners;e.add(o.default,"alert_new_msg",(e=>d.showMsgNotification(e))),e.add(o.default,"alert_call",d.showCallNotification),e.add(o.default,"cancel_call",d.cancelCallNotification),e.add(n.default,"add remove reset change:archive change:optimisticUnreadCount change:muteExpiration",this._updateUnreadCount),e.add(n.default,"change:hasUnread",d.closeNotifications),e.add(c.default,"change:displayInfo",this._updateUnreadCount),this._updateUnreadCount()}render(){return null}}h.displayName="NotificationManager";var f=(0,l.default)(h);t.default=f},88352:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(12436)),o=s(a(72779)),l=r(a(2784)),d=s(a(50525));function u(){var e=(0,i.default)(["unrecognized type ",""]);return u=function(){return e},e}var c="transform 300ms cubic-bezier(.1,.82,.25,1)",h=l.forwardRef((function(e,t){var a=l.useRef(),r=l.useRef();l.useImperativeHandle(t,(()=>({get insideContainer(){return r.current},get outsideContainer(){return a.current}})));var{objectPosition:s,onObjectLoad:i,position:h,size:p,type:m,zoomIn:_}=e,v=null==p?void 0:p.width,g=null==p?void 0:p.height,E=null==_?void 0:_.factor,S=null==_?void 0:_.translateX,C=null==_?void 0:_.translateY,y=l.useCallback((()=>{null!=i&&null!=r.current&&i(r.current.firstChild)}),[i]),b=l.useCallback((()=>{if(null!=v&&null!=g){var e=a.current,t=r.current;if(e&&t){var i;switch(m){case"contain":i=function(e,t,a){var r=e.clientWidth,s=e.clientHeight,i=t,n=a,l=0,u=0;i/r>n/s?(n*=r/i,i=r,n<s&&(l=s/2-n/2)):(i*=s/n,n=s,i<r&&(u=r/2-i/2));return{style:{width:i,height:n,top:l,left:u,position:"absolute"},className:(0,o.default)(d.default.fit)}}(e,v,g);break;case"cover":i=function(e,t,a){var r=e.clientWidth,s=e.clientHeight,i=t,n=a,l=0,u=0;i!==r&&(n*=r/i,i=r,n>s&&(l=s/2-n/2));n<s&&(i*=s/n,n=s,i>r&&(u=r/2-i/2));return{style:{width:i,height:n,top:l,left:u,position:"absolute"},className:(0,o.default)(d.default.fit)}}(e,v,g);break;case"scaleDown":i=f(e,v,g);break;case"zoomIn":i=function(e,t,a,r){var s,i=f(e,t,a).style;s=r?{width:i.width,height:i.height,transition:c,transform:"translateX(".concat(r.translateX,"px) translateY(").concat(r.translateY,"px) scale(").concat(r.factor,")")}:{width:i.width,height:i.height,transition:c};return{style:s,className:(0,o.default)(d.default.fit,d.default.fitScaledown,d.default.fitZoomin)}}(e,v,g,null!=E&&null!=S&&null!=C?{factor:E,translateX:S,translateY:C}:null);break;default:return __LOG__(4,void 0,new Error,!0)(u(),m),void SEND_LOGS("object-fit")}e.removeAttribute("class"),t.removeAttribute("style"),e.classList.add(...i.className.split(" ")),"relative"===h&&e.classList.add(d.default.fitRelative);var n=null!=s?s:i.style.position;for(var l of(t.style.setProperty("position",n),Object.keys(i.style))){var p=i.style[l];null==p||Number.isNaN(p)||t.style.setProperty(l,"number"==typeof p?p+"px":p)}y()}}}),[y,s,h,g,v,m,E,S,C]);return l.useEffect((()=>{var e=(0,n.default)((()=>{b()}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[b]),l.useLayoutEffect((()=>{b()}),[b]),l.createElement("div",{className:(0,o.default)(d.default.fit),ref:a},l.createElement("div",{style:{visibility:"hidden"},ref:r},e.children))}));function f(e,t,a){var r=e.clientWidth,s=e.clientHeight,i=a,n=t;return i>s&&(i=s,n=t*(s/a)),n>r&&(n=r,i=a*(r/t)),{style:{width:n,height:i},className:(0,o.default)(d.default.fit,d.default.fitScaledown)}}t.default=h},96183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={GROUP:"GROUP",PROFILE:"PROFILE"};t.default=a},59477:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(71201)),o=r(a(17957)),l=r(a(40207));class d extends i.PureComponent{constructor(...e){super(...e),this.pin=()=>{var{chat:e,onPinOrUnpin:t}=this.props;t(!e.pin)}}render(){var{chat:e,disabled:t}=this.props;return i.createElement(n.default,{a8n:"mi-pin",action:this.pin,key:"PinChat",disabled:t},null!=e.pin&&0!==e.pin?o.default.t(1411):o.default.t(1181))}}d.CONCERNS={chat:["pin"]},d.displayName="PinMenuItem";var u=(0,l.default)(d,d.CONCERNS);t.default=u},61124:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=s(a(22220)),o=s(a(72779)),l=r(a(2784)),d=s(a(62969)),u=s(a(88613));class c extends l.PureComponent{constructor(...e){super(...e),this._setRefResizeObserver=e=>{this._refResizeObserver=e,this.props.onRef&&this.props.onRef(e)},this._handleResize=(e,t)=>{this._refResizeObserver&&(null!=this._prevDimensions&&this._prevDimensions.width===e&&this._prevDimensions.height===t||(this._prevDimensions={height:t,width:e},this.props.onResize({height:t,width:e})))}}render(){var e=this.props,{children:t,className:a,onResize:r,onRef:s}=e,c=(0,n.default)(e,["children","className","onResize","onRef"]);return l.createElement("div",(0,i.default)({className:(0,o.default)(d.default.container,a),ref:this._setRefResizeObserver},c),t,l.createElement(u.default,{onResize:this._handleResize}))}}t.default=c,c.displayName="ResizeObserver"},88613:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ResizeSensor=void 0;var i,n,o=s(a(2784)),l=r(a(97209)),d=r(a(89678));function u(){return null==n&&(n=new WeakMap),n}class c extends o.Component{constructor(...e){super(...e),this._resizeObserver=(null==i&&(i=new l.default((e=>{for(var t of e){var{width:a,height:r}=t.contentRect,s=u().get(t.target);null!=s&&s(a,r)}}))),i),this._observerMap=u(),this._handleDiv=e=>{var t=this._sensorEl;e!==t&&null!=t&&(this._resizeObserver.unobserve(t),this._observerMap.delete(t)),this._sensorEl=e,null!=e&&(this._observerMap.set(e,this._handleResize),this._resizeObserver.observe(e))},this._handleResize=(e,t)=>{this.props.onResize(e,t)}}shouldComponentUpdate(){return!1}render(){return o.createElement("div",{ref:this._handleDiv,className:d.default.sensor})}}t.ResizeSensor=c,c.displayName="ResizeSensor";var h=c;t.default=h},2426:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784));class i extends s.PureComponent{constructor(...e){super(...e),this._onRefChange=e=>{e?(this._ctx=e.getContext("2d"),this._imageData=this._ctx.createImageData(this.props.width,this.props.height)):(this._ctx=null,this._imageData=null)}}_updateCanvas(){var e=this._ctx,t=this._imageData,{rgbaBuffer:a}=this.props;e&&t&&a&&(t.data.set(new Uint8Array(a)),e.putImageData(t,0,0))}componentDidMount(){this._updateCanvas()}componentDidUpdate(){this._updateCanvas()}render(){return s.createElement("canvas",{role:"button",className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,ref:this._onRefChange})}}t.default=i,i.displayName="RGBACanvas"},11896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this._internalHandlers=new Map}initialize(e){this.ctx=e}registerHandler(e,t,a){var r=this._internalHandlers.get(t)||new Map;r.set(e,a),this._internalHandlers.set(t,r)}unregisterHandler(e,t){var a=this._internalHandlers.get(t);a&&(a.delete(e),a.size||this._internalHandlers.delete(t))}handle(e,t=[]){var a,r,s=this._internalHandlers.get(e);return!!s&&(a=s,r=[],a.forEach((e=>r.push(e))),r).some((e=>e.apply(null,t)))}}},60353:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(67804)),i=r(a(37688)),n=r(a(40789)),o=r(a(20881)),l=r(a(81059)),d=r(a(79445)),u=r(a(55765)),c=r(a(64887)),h=r(a(57817)),f=r(a(69666)),p=r(a(40314)),m=new o.default,_=new s.default;class v extends((0,l.default)([i.default,_,u.default,m,c.default,d.default])){}t.default=v,v.Suggestions=(0,p.default)(h.default,{plugin:m}),v.EmojiSuggestions=(0,p.default)(n.default,{plugin:_}),v.QuickRepliesSuggestions=(0,p.default)(f.default,{plugin:d.default})},99003:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,a=new i.default,r=(0,l.default)([n.default,a,d.default]);return t=e=class extends r{},e.EmojiSuggestions=(0,u.default)(o.default,{plugin:a}),t};var i=s(a(67804)),n=s(a(37688)),o=s(a(40789)),l=r(a(81059)),d=s(a(55765)),u=s(a(40314))},80857:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(71201)),o=r(a(91581)),l=r(a(63353)),d=a(62902);class u extends i.Component{componentDidMount(){}render(){var{base:e,unicode:t,action:a,children:r}=this.props;return i.createElement("div",{className:l.default.gridContainer},i.createElement("span",{className:l.default.baseEmoji},i.createElement(n.default,{type:"emoji-grid",key:"base",a8n:"mi-emoji-variant",action:r=>a(r,t,e)},i.createElement(o.default,{text:e,formatters:d.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))),i.createElement("div",{className:l.default.options},r))}}t.default=u,u.displayName="GridPicker"},93735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{handlers:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]);var s=a[r];null!=s&&e[r].push([t,s])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>{var s=a[r];return e[r]=function(e,t){return a=>{e.some((([e,r])=>{var s=r.call(e,a,t);return!!a.defaultPrevented||!0===s&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(s,t),e}),{})}},81646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{hooks:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]),e[r].push([t,a[r]])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>(e[r]=function(e,t){return(...a)=>{e.forEach((([e,r])=>r.call(e,...a,t)))}}(a[r],t),e)),{})}},24529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.reduce(((e,t)=>{var{hotkeys:a}=t;return a?(Object.keys(a).forEach((r=>{e[r]||(e[r]=[]),e[r].push([t,a[r]])})),e):e}),{});return Object.keys(a).reduce(((e,r)=>(e[r]=function(e,t){return a=>{e.some((([e,r])=>{var s=r.call(e,a,t);return!!a.defaultPrevented||!0===s&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),!0)}))}}(a[r],t),e)),{})}},8494:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=window.getSelection();if(!a||!a.rangeCount)return null;var r=a.getRangeAt(0);if(!r.collapsed)return null;var{startContainer:i,startOffset:n}=r;if(i===e){var{childNodes:o}=i,{length:l}=o;if(t===s.FORWARD&&n>l||t===s.BACKWARD&&!n)return null;var d=t===s.BACKWARD?1:0,u=o[n-d];return u instanceof Element?u:null}var c=i.length===n;if(t===s.BACKWARD&&n)return null;if(t===s.FORWARD&&!c)return null;var h=t===s.BACKWARD?"previousSibling":"nextSibling",f=i[h];return f instanceof Element?f:null},t.Direction=void 0;var s=(0,r(a(63252)).default)({FORWARD:void 0,BACKWARD:void 0});t.Direction=s},95716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!e.getModifierState("Shift")&&!e.getModifierState("Alt")&&!e.getModifierState("Control")}},4314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement&&Boolean(e.dataset&&e.dataset.mentionJid)}},14517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.metaKey||e.shiftKey||e.altKey||e.ctrlKey}},90633:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(a,r){var o="",l=!1,d=!0;return(0,i.default)(a,r,(a=>{return l?(r=a,d=s.default.isEmoji(r)||n.test(r),!0):o.length>e||void((l=a===t)||(o=a+o));var r})),l&&d?o:null}};var s=r(a(12396)),i=r(a(25812)),n=/\W/},25812:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(1!==t.rangeCount)return;if(!t.getRangeAt(0).collapsed)return;var{anchorNode:r,anchorOffset:d}=t;if(r&&r===e.refInput){if(-1===(d-=1))return;r=r.childNodes[d],d=r.textContent.length}r=(0,o.default)(r)?l(r):r,(0,s.default)(r,(e=>{var t=l(e);return t?[t]:[]}),(e=>{var t,s;if((0,n.isEmojiEl)(e))return t=i.default.fromNode(e,!0).toPlainString(),a(t,0,t);var o=(s=e===r?e.textContent.slice(0,d):e.textContent).lastIndexOf("\n"),l=o>=0;l&&(s=s.slice(o+1));for(var u=s.length-1;u>=0;u--)if(t=s.charAt(u),a(t,u,s))return!0;return!!l||void 0}))};var s=r(a(97990)),i=r(a(76736)),n=a(37688),o=r(a(78185));function l(e){var t=e;do{if((t=t&&t.previousSibling)&&t.nodeType!==Node.TEXT_NODE&&!(0,n.isEmojiEl)(t))return null}while(t&&(0,o.default)(t));return t}},23340:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=t;for(;a>0;)e.modify("extend","backward","character"),a--}},34293:(e,t)=>{"use strict";function a(e,t){return e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.matches(t)}function r(e,t){for(var r=0;r<t.length;++r){var{serializers:s}=t[r];if(s)for(var i=0;i<s.length;++i){var[n,o]=s[i];if(a(e,n))return o}}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=[],n=e.cloneNode(!0).firstChild;for(;n;){switch(n.nodeType){case s:var o=r(n,t);if(o){a.push(o(n));break}switch(n.tagName){case"P":case"BR":case"PRE":a.push("\n");break;case"DIV":n.firstChild&&3!==n.firstChild.nodeType||a.push("\n")}break;case i:a.push(n.nodeValue)}if(n.hasChildNodes())n=n.firstChild;else{for(;n&&!n.nextSibling;)if((n=n.parentNode)===e){n=null;break}n&&(n=n.nextSibling)}}return a.join("")};var s=1,i=3},95580:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(34293));function n(){var e=(0,s.default)(["Assertion failed!"]);return n=function(){return e},e}var o=(e,t)=>{t.focusNode||(__LOG__(4,void 0,new Error,!0)(n()),SEND_LOGS("serializeTextBeforeCursor requires selection.focusNode"));var a=document.createRange();a.setStart(e,0),a.setEnd(t.focusNode,t.focusOffset);var r=a.cloneContents();return(0,i.default)(r,[])};t.default=o},53633:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.reduce(((e,{parsers:t})=>t?t.reduce(((e,t)=>t(e)),e):e),(0,s.default)(e))};var s=r(a(8972))},40314:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=r(a(2784));t.default=(e,t)=>{var a,r;return r=a=class extends n.Component{render(){return n.createElement(e,(0,i.default)({},this.props,t))}},a.displayName="Wrapper(".concat(e.displayName||e.name,")"),r}},96697:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,r(a(63252)).default)({CHANGE:void 0,MOUNT:void 0,INPUT:void 0});t.default=s},32520:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(72779)),l=s(a(55547)),d=s(a(6047)),u=s(a(16730)),c=s(a(25407)),h=s(a(17957)),f=s(a(61124)),p=s(a(82631)),m=s(a(71449)),_=s(a(74824));function v(){var e=(0,i.default)(["Assertion failed!"]);return v=function(){return e},e}class g extends n.PureComponent{constructor(e){super(e),this.state={menuWidth:null,offset:0},this._handleItemClick=(e,t)=>{this.props.onItemClick&&this.props.onItemClick(e,t)},this._handleNextClick=()=>{var e=this.props.numItems,t=this.state.offset+this.props.numColumns;"number"!=typeof e||t>e||this.setState({offset:this.state.offset+1})},this._handlePrevClick=()=>{0!==this.state.offset&&this.setState({offset:this.state.offset-1})},this._handleResize=({width:e})=>{this.setState({menuWidth:e})},this._renderItem=(e,t,a)=>{var r=this.props.numItems;if("number"==typeof r&&e>=r)return null;var s=e-this.state.offset;return n.createElement(u.default,{column:s,carouselNumColumns:this.props.numColumns,key:e,menuWidth:a,onClick:this._handleItemClick,index:e,selected:t},this.props.renderItem(e))},this._checkSelectedIndex(e)}componentDidUpdate(){this._checkSelectedIndex(this.props)}_checkSelectedIndex({onItemClick:e,numItems:t,selectedIndex:a}){if(e&&0!==t){a<0&&(__LOG__(4,void 0,new Error,!0)(v()),SEND_LOGS("carousel_menu: selectedIndex is smaller than 0"));var r=t-1;a>r&&e(r)}}_renderPrevButton(){if(0===this.state.offset)return null;var e=h.default.isRTL()?"chevron-right":"chevron-left";return this._renderButton({className:d.default.prevButton,icon:e,onClick:this._handlePrevClick,id:"prev-button"})}_renderNextButton(){var{numColumns:e,numItems:t}=this.props;if("number"!=typeof t)return null;if(this.state.offset+e>=t)return null;var a=h.default.isRTL()?"chevron-left":"chevron-right";return this._renderButton({className:d.default.nextButton,icon:a,onClick:this._handleNextClick,id:"next-button"})}_renderButton({className:e,icon:t,onClick:a,id:r}){var s,{numColumns:i}=this.props;return s=null!=this.state.menuWidth&&0!==this.state.menuWidth?"".concat(Math.round(this.state.menuWidth/i),"px"):"".concat(100/i,"%"),n.createElement("div",{className:(0,o.default)(d.default.button,e),style:{width:s},onClick:a,role:"button","data-testid":r},n.createElement(p.default,{className:d.default.buttonIcon,name:t}))}render(){var e,{numColumns:t,numItems:a,selectedIndex:r}=this.props,{menuWidth:s,offset:i}=this.state;return e=r<i?-1:r>=i+t?t-1+1:(r-i)%t,n.createElement(l.default,{className:this.props.className},n.createElement(f.default,{className:d.default.resizeContainer,onResize:this._handleResize},n.createElement(_.default,null,this._renderPrevButton()),n.createElement(c.default,{menuWidth:s,numColumns:t,numItems:a,offset:i,renderItem:this._renderItem,selectedIndex:r}),n.createElement(_.default,null,this._renderNextButton()),n.createElement(m.default,{numTabs:t,selectedTabIndex:e,hide:-1===e||0===e&&i>0||e===t,animate:!0})))}}t.default=g,g.displayName="CarouselMenu"},16730:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(17957)),o=s(a(59591));class l extends i.PureComponent{constructor(...e){super(...e),this._setRef=e=>{this._ref=e}}render(){var e,{column:t,carouselNumColumns:a,index:r,menuWidth:s}=this.props;e=null!=s&&0!==s?"".concat(Math.round(s/a),"px"):"".concat(100/a,"%");var l=n.default.isRTL()?-1:1;return i.createElement(o.default,{onRef:this._setRef,onClick:this.props.onClick,sectionId:r,selected:this.props.selected,theme:0!==r&&(t<=0||t>=a)?o.THEMES.CAROUSEL_END:o.THEMES.CAROUSEL,transform:"translateX(".concat(100*t*l,"%)"),width:e},this.props.children)}}t.default=l,l.displayName="CarouselMenuItem"},25407:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(61258)),n=r(a(2784));class o extends n.PureComponent{_renderColumns(){var{numColumns:e,numItems:t,offset:a,renderItem:r,selectedIndex:s}=this.props,n=0,o=t-e;return 1===a&&(e+=1,n=-1),a===o-1&&(e+=1),(0,i.default)(e,(e=>{var i=e+n+a;return i<0||i>=t?null:r(i,i===s,this.props.menuWidth)}))}render(){return n.createElement(n.Fragment,null,this._renderColumns())}}t.default=o,o.displayName="CarouselMenuItems"},12097:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTabToMood=t.StickerTabs=t.ValidMoods=t.INPUT_SHOW_POINT=t.INPUT_HIDE_POINT=t.INPUT_BAR_SCROLL_FAST=t.INPUT_BAR_SCROLL_SENSITIVITY=t.INPUT_BAR_TOTAL_HEIGHT=t.SCROLL_THROTTLE_TIME=t.SCROLL_CLICK_TIME_GAP=void 0;t.SCROLL_CLICK_TIME_GAP=1e3;t.SCROLL_THROTTLE_TIME=100;t.INPUT_BAR_TOTAL_HEIGHT=63;t.INPUT_BAR_SCROLL_SENSITIVITY=5;t.INPUT_BAR_SCROLL_FAST=15;t.INPUT_HIDE_POINT=44.099999999999994;t.INPUT_SHOW_POINT=94.5;var r=a(28103).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.ValidMoods=r;var s=a(28103).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.StickerTabs=s;t.convertTabToMood=e=>{var t=e;return r.isValid(t)?r.cast(t):null}},18919:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(63833)),i=(0,r(a(63252)).default)(s.default);t.default=i},73928:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=t.EMOJI_HEIGHT=t.SIDE_MARGIN=void 0;var i=s(a(2784)),n=r(a(79711)),o=a(14457),l=r(a(12396)),d=r(a(44977)),u=r(a(15301)),c=r(a(61311)),h=r(a(6660)),f=r(a(44343)),p=r(a(20642)),m=r(a(86921)),_=r(a(17693)),v=r(a(68768)),g=parseInt(u.default["-side-margin"],10);t.SIDE_MARGIN=g;var E=parseInt(u.default["-emoji-height"],10);t.EMOJI_HEIGHT=E;var S=parseInt(u.default["-emoji-width"],10);t.EMOJI_WIDTH=S;class C extends i.Component{constructor(...e){super(...e),this.state={skinTonePicker:null},this._lastFocusedElement=null,this._closeSkinTonePicker=()=>{var e=this.state.skinTonePicker&&this.state.skinTonePicker.anchor;e&&e instanceof HTMLElement&&this._focusElement(e),this.setState({skinTonePicker:null})},this._setEmojiVariant=(e,t,a)=>{b(e),c.default.setVariant(t,a),this._handleEmoji(t)},this._clearPickerTimer=()=>{this._pickerTimer&&clearTimeout(this._pickerTimer)},this._showContextMenu=(e,t,a)=>{var r=l.default.getSkinToneBase(e);r&&this.setState({skinTonePicker:{menu:i.createElement(m.default,{base:r,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:o.DirX.RIGHT,dirY:o.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}})},this._handleEmoji=e=>{var t=e;if(l.default.getSkinToneBase(t)){var a=c.default.getVariantIfExists(t);if(null!=a)t=a;else if(this.props.allowVariantPrompt)return!0}this.props.onEmoji(t)},this._handleEmojiArrowDown=e=>{b(e);var t=T(e);null!=t&&this.props.focusBelow&&this.props.focusBelow(t)},this._handleEmojiArrowLeft=e=>{b(e);var t=T(e);if(null!=t){var a=t-1;a<0?this.props.focusAbove(this.props.numColumns-1):this.focusEmojiAt(a)}},this._handleEmojiArrowRight=e=>{b(e);var t=T(e);if(null!=t){var a=t+1;a>=this.props.emojis.length?this.props.focusBelow&&this.props.focusBelow(0):this.focusEmojiAt(a)}},this._handleEmojiArrowUp=e=>{b(e);var t=T(e);null!=t&&this.props.focusAbove(t)},this._handleEmojiEnter=e=>{b(e);var t=T(e);this._selectEmojiAt(t)},this._handleClick=e=>{b(e);var t=T(e);this._selectEmojiAt(t)},this._handleContextMenu=e=>{b(e);var t=this._getEmojiUnicode(e);t&&e.target instanceof HTMLElement&&this._showContextMenu(t,e.target)},this._handleMouseDown=e=>{b(e),this.state.skinTonePicker&&this.setState({skinTonePicker:null});var t=e.target;if(t instanceof HTMLElement){var a=this._getEmojiUnicode(e);a&&this._startPickerTimer(a,t)}},this._setRefEmojis=e=>{this._refEmojis=e}}shouldComponentUpdate(e,t){return this.props.emojis!==e.emojis||this.state.skinTonePicker!==t.skinTonePicker}componentDidMount(){this.props.listeners.add(c.default,"add remove change:variant",(()=>this.forceUpdate()))}componentDidUpdate(e,t){t.skinTonePicker&&this.state.skinTonePicker&&this._closeSkinTonePicker()}focusEmojiAt(e){var t=this._getRefEmojiAt(e);t&&this._focusElement(t)}selectFirstEmoji(){this._selectEmojiAt(0)}restoreFocus(){this._lastFocusedElement&&this._focusElement(this._lastFocusedElement)}_focusElement(e){var t=parseInt(e.dataset.emojiIndex,10);isNaN(t)||(h.default.focus(e,{preventScroll:!0}),this.props.onEmojiFocus(e),this._lastFocusedElement=e)}_selectEmojiAt(e){if(null!=e){var t=this.props.emojis[e];if(t){var a=this._getRefEmojiAt(e);if(a)this._clearPickerTimer(),this._handleEmoji(t)&&this._showContextMenu(t,a,!0)}}}_getEmojiUnicode(e){var t=T(e);if(null!=t){var a=this.props.emojis[t];return a||null}}_getRefEmojiAt(e){var t=this.props.emojis.length-1,a=Math.max(Math.min(e,t),0);if(null!=this._refEmojis)return this._refEmojis.children[a]}_startPickerTimer(e,t){this._clearPickerTimer(),this._pickerTimer=setTimeout((()=>{delete this._pickerTimer,this.props.listeners.addOnce(n.default,"window_click",b),this._showContextMenu(e,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}render(){var e;this.state.skinTonePicker&&(e=i.createElement(_.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,requestRecentFocusOnUnmount:!1},i.createElement(v.default,{tooltip:this.state.skinTonePicker})));var{emojis:t}=this.props;return t.length?i.createElement("div",{className:u.default.panel},i.createElement(f.default,{onMouseDown:this._handleMouseDown,onClick:this._handleClick,onContextMenu:this._handleContextMenu,handlers:{up:this._handleEmojiArrowUp,down:this._handleEmojiArrowDown,left:this._handleEmojiArrowLeft,right:this._handleEmojiArrowRight,enter:this._handleEmojiEnter,space:this._handleEmojiEnter}},i.createElement("div",{ref:this._setRefEmojis,className:u.default.section},t.map(((e,t)=>{var a=c.default.getVariantIfExists(e);return i.createElement(d.default,{element:"span",emoji:a||e,size:"large",key:e,tabIndex:"-1","data-emoji-index":t})})))),e):null}}C.displayName="EmojiRow";var y=(0,p.default)(C);function b(e){e.preventDefault(),e.stopPropagation()}function T(e){if(!(e.target instanceof HTMLElement))return null;var t=parseInt(e.target.dataset.emojiIndex,10);return isNaN(t)?null:t}t.default=class extends y{focusEmojiAt(e){this.getComponent().focusEmojiAt(e)}selectFirstEmoji(){this.getComponent().selectFirstEmoji()}restoreFocus(){this.getComponent().restoreFocus()}}},48308:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(75652)),n=s(a(1573)),o=s(a(18149)),l=s(a(27875)),d=s(a(72779)),u=r(a(2784)),c=s(a(12396)),h=s(a(11632)),f=s(a(33848)),p=s(a(44343)),m=s(a(57656)),_=s(a(17957)),v=s(a(11412)),g=s(a(67110)),E=s(a(76097)),S=r(a(84530)),C=s(a(74824));class y extends u.PureComponent{constructor(...e){super(...e),this._fastScroll=!1,this._scrollFromAnimation=!1,this._scrollFromFocus=!1,this._lastScrollTop=this.props.displayCache.scrollTop,this._lastSectionId=this.props.displayCache.sectionId,this.state={scrolledToTop:0===this.props.displayCache.scrollTop,searchText:this.props.defaultSearchText||"",showSearchInput:this.props.displayCache.showSearchInput},this._handleEmojiFocus=(e,t)=>{this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200);var a=t.scrollTop,r=e.getBoundingClientRect().top-t.getBoundingClientRect().top+a,s=r-t.clientHeight+e.clientHeight+2,i=this.state.showSearchInput?r-S.TOTAL_SEARCH_HEIGHT:r-2;t.scrollTop=(0,l.default)(a,s,i)},this._handleListFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleListScroll=e=>{var t=e-this._lastScrollTop;if(this._lastScrollTop=e,!this._scrollFromFocus&&!this._scrollFromAnimation&&!this._checkScrollTop()){var a=Math.abs(t);this._fastScroll=a>15;var r=t>=0?1:-1,s=0===e;e<S.TOTAL_SEARCH_HEIGHT?this.setState({scrolledToTop:s,showSearchInput:!0}):a<5||(this.state.showSearchInput?1===r&&this.setState({scrolledToTop:s,showSearchInput:!1}):-1===r&&this.setState({scrolledToTop:s,showSearchInput:!0}))}},this._handleListSection=e=>{this._scrollFromAnimation||(this._lastSectionId=e,this.props.onSection(e))},this._handleSearchResultsFocusAbove=()=>{this._focusSearchAndScrollToTop()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e})},this._handleScrollListFocusUp=()=>{this._focusSearchAndScrollToTop()},this._handleSearchDownKey=()=>{if(this.state.searchText){if(!this._refSearchResults)return;this._refSearchResults.focusFirstVisibleEmoji()}else this._refScrollList&&this._refScrollList.focusFirstVisibleEmoji(S.TOTAL_SEARCH_HEIGHT)},this._handleSearchEnterKey=()=>{this.state.searchText&&this._refSearchResults&&this._refSearchResults.selectFirstVisibleEmoji()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusPrev():this.focusSearchInput()},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._refSearchInput)return this._refSearchInput.hasFocus()?void this.props.onFocusNext():this.focusSearchInput()},this._setRefSearchInput=e=>{this._refSearchInput=e},this._setRefScrollList=e=>{this._refScrollList=e},this._setRefSearchResults=e=>{this._refSearchResults=e},this._getSectionListDataMemoized=(0,v.default)((({sectionIds:e})=>e.map((e=>({sectionId:e,emojis:"RECENT"===e?(0,i.default)(g.default.reduce(((e,t)=>{var a=c.default.getSkinToneBase(t.id)||t.id;return null!=c.default.getGlyphId(a)&&e.push(a),e}),[])):c.default.getEmojisInCategory(e)})))),((e,t)=>e.sectionIds===t.sectionIds||(0,o.default)(e.sectionIds,t.sectionIds))),this._getSearchResultsDataMemoized=(0,v.default)((({searchText:e})=>[{sectionId:f.default.SEARCH_RESULT,emojis:(0,h.default)((0,n.default)(e))}]))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,sectionId:this._lastSectionId,showSearchInput:this.state.showSearchInput})}focusSearchInput(e){if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._refSearchInput.focus(e)}scrollToSection(e){return this._lastSectionId=e,new Promise((e=>{this._fastScroll=!0,this.setState({searchText:"",showSearchInput:!0},e)})).then((()=>{this._scrollFromAnimation=!0;var t=this._refScrollList?this._refScrollList.scrollToSection(e,0-S.TOTAL_SEARCH_HEIGHT):Promise.resolve();return t.finally((()=>{t===this._animationPromise&&(this._scrollFromAnimation=!1,this._checkScrollTop()||this.state.showSearchInput&&this.setState({scrolledToTop:0===this._lastScrollTop}))})),this._animationPromise=t,t}))}_checkScrollTop(){var e=0===this._lastScrollTop;return e&&this.setState({scrolledToTop:e,showSearchInput:!0}),e}_focusSearchAndScrollToTop(){this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((()=>{this._scrollFromFocus=!1}),200),this.focusSearchInput(),this._refScrollList&&this._refScrollList.scrollToTop()}_stopEvent(e){e.preventDefault(),e.stopPropagation()}render(){return u.createElement(p.default,{handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey}},u.createElement("div",{className:m.default.bodyContainer},this._renderSearchInput(),this._renderSearchResults(),u.createElement("div",{className:(0,d.default)(m.default.list,{[m.default.hidden]:!!this.state.searchText})},u.createElement(S.default,{data:this._getSectionListData(),width:this.props.width,onFocusUp:this._handleScrollListFocusUp,initialScrollTop:this.props.displayCache.scrollTop,searchInputVisible:this.state.showSearchInput,focusAbove:this._handleListFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,onScroll:this._handleListScroll,onSection:this._handleListSection,ref:this._setRefScrollList,showTitles:!0}))))}_renderSearchInput(){var e=null;this.state.showSearchInput&&(e=u.createElement(E.default,{label:_.default.t(1271),onChange:this._handleSearchChange,onUpKey:this.props.onFocusUp,onDownKey:this._handleSearchDownKey,onEnterKey:this._handleSearchEnterKey,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return u.createElement(C.default,{transitionName:t,className:m.default.search},e)}_renderSearchResults(){return this.state.searchText?u.createElement("div",{className:m.default.list},u.createElement(S.default,{data:this._getSearchResultsData(),width:this.props.width,initialScrollTop:0,searchInputVisible:!0,focusAbove:this._handleSearchResultsFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:this._setRefSearchResults,showTitles:!1})):null}_getSectionListData(){return this._getSectionListDataMemoized({sectionIds:this.props.sectionIds})}_getSearchResultsData(){var e=(this.state.searchText||"").replace(/^\s+/,"");return this._getSearchResultsDataMemoized({searchText:e})}}t.default=y,y.displayName="EmojiPanelContent"},84530:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.findEmojiRowAt=b,t.getNumColumns=T,t.default=t.TOTAL_SEARCH_HEIGHT=void 0;var i=s(a(93586)),n=a(91460),o=r(a(2784)),l=s(a(18919)),d=r(a(73928)),u=s(a(33848)),c=s(a(35598)),h=s(a(63097)),f=s(a(22004)),p=s(a(17957)),m=s(a(11412)),_=s(a(94782)),v=s(a(91378)),g=parseInt(_.default["-total-search-height"],10);t.TOTAL_SEARCH_HEIGHT=g;var E,S=parseInt(_.default["-title-height"],10),C={[u.default.SEARCH_RESULT]:()=>{throw new Error("Search results should not be shown with a title.")},[u.default.RECENT]:()=>p.default.t(1169),[l.default.SMILEYS_PEOPLE]:()=>p.default.t(613),[l.default.ANIMALS_NATURE]:()=>p.default.t(609),[l.default.FOOD_DRINK]:()=>p.default.t(611),[l.default.ACTIVITY]:()=>p.default.t(608),[l.default.TRAVEL_PLACES]:()=>p.default.t(615),[l.default.OBJECTS]:()=>p.default.t(612),[l.default.SYMBOLS]:()=>p.default.t(614),[l.default.FLAGS]:()=>p.default.t(610)};E=parseInt(_.default["-scrollbar-width"].replace(/px$/,""),10);class y extends o.PureComponent{constructor(e){super(e),this._rowComponents=new Map,this._flatListController=new f.default,this._renderBlanks=!1,this._getRowsAndSectionDataMemoized=(0,m.default)((e=>{var{numColumns:t,data:a,showTitles:r}=e,s=g,n={},o=[];return a.forEach((({sectionId:e,emojis:l},u)=>{var c=0,h=s;if(0!==l.length){r&&(o.push({kind:"title",itemKey:"section_".concat(e,"_title"),index:o.length,title:C[e](),sectionId:e,height:S,offsetTop:s}),c+=S,s+=S);var f=(0,i.default)(l,t),p=u===a.length-1;f.forEach(((t,a)=>{var r=a===f.length-1&&!p?d.EMOJI_HEIGHT+parseInt(_.default["-section-bottom-margin"],10):d.EMOJI_HEIGHT;o.push({kind:"emojis",itemKey:"section_".concat(e,"_emoji_").concat(a),index:o.length,emojis:t,sectionId:e,height:r,offsetTop:s}),c+=r,s+=r})),n[e]={height:c,offsetTop:h}}})),{rows:o,sectionData:n}})),this._handleEmojiFocus=e=>{var t=this._refScrollContainer;t&&this.props.onEmojiFocus(e,t)},this._handleScroll=()=>{this._animationFrameID||(this._animationFrameID=requestAnimationFrame(this._handleScrollOnAnimationFrame))},this._handleScrollOnAnimationFrame=()=>{if(delete this._animationFrameID,this._refScrollContainer){var e=this._refScrollContainer.scrollTop;this.props.onScroll&&this.props.onScroll(e);var t=this._getSectionIdFromScrollTop(e);t&&this.props.onSection&&this.props.onSection(t)}},this._setRefScrollContainer=e=>{this._refScrollContainer=e},this._renderRow=e=>{switch(e.kind){case"title":return o.createElement("div",{className:_.default.title},e.title);case"emojis":return o.createElement(d.default,{emojis:e.emojis,focusAbove:t=>{var a,r;1===e.index&&(null===(a=(r=this.props).onFocusUp)||void 0===a||a.call(r)),this._focusEmojiAt(e.index,-1,t)},focusBelow:t=>{this._focusEmojiAt(e.index,1,t)},numColumns:this._getNumColumns(),onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:t=>{t?this._rowComponents.set(e.itemKey,t):this._rowComponents.delete(e.itemKey)},allowVariantPrompt:e.sectionId!==u.default.RECENT});default:throw e.kind,new Error("Invalid row kind: ".concat(e.kind))}},this._getRowsAndSectionData()}componentDidMount(){this._refScrollContainer&&this._refScrollContainer.scrollTop!==this.props.initialScrollTop&&(this._refScrollContainer.scrollTop=this.props.initialScrollTop)}focusFirstVisibleEmoji(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.focusEmojiAt(0)}scrollToSection(e,t){var a=this._refScrollContainer;if(!a)return Promise.resolve();var{sectionData:r}=this._getRowsAndSectionData(),s=r[e];if(!s)return Promise.resolve();var i=s.offsetTop;if(a.scrollTop===i)return Promise.resolve();if(this._activeAnimation){if(this._activeAnimation.sectionId===e)return this._activeAnimation.promise;(0,v.default)(this._activeAnimation.scrollTarget,"stop"),this._activeAnimation&&this._activeAnimation.promise.cancel()}if(a.scrollTop===i)return Promise.resolve();var o=document.createElement("div");o.style.position="absolute",o.style.top="".concat(i+(t||0),"px"),o.style.left="0px",a.appendChild(o);var l=(0,v.default)(o,"scroll",{container:a,duration:300,easing:[.99,.13,.13,.99]}).then((()=>{})).then((()=>(0,n.delayMs)(100)));return this._activeAnimation={promise:l,sectionId:e,scrollTarget:o},l.finally((()=>{a.removeChild(o),this._activeAnimation&&this._activeAnimation.promise===l&&delete this._activeAnimation})),l}scrollToTop(){this._refScrollContainer&&(this._refScrollContainer.scrollTop=0)}selectFirstVisibleEmoji(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.selectFirstEmoji()}_getCurrentSearchInputHeight(){return this.props.searchInputVisible?g:0}_getNumColumns(){return T(this.props.width)}_getRowsAndSectionData(){return this._getRowsAndSectionDataMemoized({numColumns:this._getNumColumns(),data:this.props.data,showTitles:this.props.showTitles})}_getFirstVisibleEmojiRowComponent(e){if(this._refScrollContainer){var t=this._refScrollContainer.scrollTop+e,a=this._getEmojiRowFromScrollTop(t);if(a)return this._rowComponents.get(a.itemKey)}}_getEmojiRowFromScrollTop(e){var{rows:t}=this._getRowsAndSectionData();return t.map((e=>"emojis"===e.kind?e:null)).filter(Boolean).find((t=>t.offsetTop+t.height>e))}_getSectionIdFromScrollTop(e){var t=this._getEmojiRowFromScrollTop(e+this._getCurrentSearchInputHeight());if(t)return t.sectionId}_focusEmojiAt(e,t,a){var{rows:r}=this._getRowsAndSectionData(),s=b(r,e,t);if(s){var i=this._rowComponents.get(s.itemKey);i&&i.focusEmojiAt(a)}}render(){var e,{rows:t}=this._getRowsAndSectionData(),a=Math.min(t.length,2);return(this.props.onScroll||this.props.onSection)&&(e=this._handleScroll),o.createElement(h.default,{onScroll:e,className:_.default.container,onRef:this._setRefScrollContainer,flatListControllers:[this._flatListController]},o.createElement(c.default,{data:t,reorderAnimationsEnabled:!1,forceConsistentRenderCount:!1,flatListController:this._flatListController,direction:"vertical",extraItems:a,initialScrollFromStart:this.props.initialScrollTop,renderItem:this._renderRow}))}}function b(e,t,a){for(var r=a<0?-1:1,s=t+a;s>=0&&s<e.length;){var i=e[s];if("emojis"===i.kind)return i;s+=r}}function T(e){var t=e-2*d.SIDE_MARGIN-E;return Math.floor(t/d.EMOJI_WIDTH)}t.default=y,y.displayName="EmojiSectionScrollList"},55655:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,t.sectionIdToIcon=void 0;var i=s(a(2784)),n=r(a(33848)),o=r(a(82631)),l={[n.default.RECENT]:"panel-recent",[n.default.SMILEYS_PEOPLE]:"panel-emoji-people",[n.default.ANIMALS_NATURE]:"panel-emoji-nature",[n.default.FOOD_DRINK]:"panel-emoji-food",[n.default.ACTIVITY]:"panel-emoji-activity",[n.default.TRAVEL_PLACES]:"panel-emoji-travel",[n.default.OBJECTS]:"panel-emoji-objects",[n.default.SYMBOLS]:"panel-emoji-symbols",[n.default.FLAGS]:"panel-emoji-flags"};function d(e){return i.createElement(o.default,{name:l[e.sectionId]})}t.sectionIdToIcon=l,d.displayName="EmojiSectionIcon"},89088:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(33848)),o=r(a(17957)),l=r(a(55655)),d=s(a(59591));class u extends i.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this.props.onClick(this.props.sectionId,e)}}render(){var e={[n.default.RECENT]:o.default.t(1169),[n.default.SMILEYS_PEOPLE]:o.default.t(613),[n.default.ANIMALS_NATURE]:o.default.t(609),[n.default.FOOD_DRINK]:o.default.t(611),[n.default.ACTIVITY]:o.default.t(608),[n.default.TRAVEL_PLACES]:o.default.t(615),[n.default.OBJECTS]:o.default.t(612),[n.default.SYMBOLS]:o.default.t(614),[n.default.FLAGS]:o.default.t(610)},{sectionId:t}=this.props,a=e[t];return i.createElement(d.default,{onClick:this.props.onClick,sectionId:this.props.sectionId,selected:this.props.selected,showFocusIndicator:this.props.showFocusIndicator,theme:d.THEMES.MENU,title:a,onRef:this.props.onRef},i.createElement(l.default,{sectionId:t}))}}t.default=u,u.displayName="EmojiSectionTab"},33848:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var s=r(a(70417)),i=r(a(50935)),{EMOJI:{CATEGORIES:n,ORDERED_CATEGORY_IDS:o}}=i.default,l=(0,s.default)((0,s.default)({RECENT:"RECENT"},n),{},{SEARCH_RESULT:"SEARCH_RESULT"}),d=l;t.default=d;var u=[{[l.RECENT]:l.RECENT,[l.SMILEYS_PEOPLE]:l.SMILEYS_PEOPLE,[l.ANIMALS_NATURE]:l.ANIMALS_NATURE,[l.FOOD_DRINK]:l.FOOD_DRINK,[l.ACTIVITY]:l.ACTIVITY,[l.TRAVEL_PLACES]:l.TRAVEL_PLACES,[l.OBJECTS]:l.OBJECTS,[l.SYMBOLS]:l.SYMBOLS,[l.FLAGS]:l.FLAGS}.RECENT,...o];t.ORDERED_TAB_SECTION_IDS=u},87165:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=void 0;var i=s(a(16760)),n=r(a(2784)),o=s(a(79711)),l=a(14457),d=s(a(12396)),u=s(a(44977)),c=s(a(4212)),h=s(a(61311)),f=s(a(98294)),p=s(a(44343)),m=s(a(20642)),_=s(a(61941)),v=s(a(86921)),g=s(a(67134)),E=s(a(17693)),S=s(a(68768)),C=parseInt(c.default["-emoji-width"].replace(/px$/,""),10);t.EMOJI_WIDTH=C;class y extends n.Component{constructor(...e){super(...e),this.state={selectedIndex:0,skinTonePicker:null},this.emojiList=null,this._rowLength=0,this._emojiPanelRef=n.createRef(),this._emojisRef=n.createRef(),this._windowResized=()=>{var e=this._getEmojiRowLength();if(this._rowLength!==e){this._rowLength=e;var t=this.state.selectedIndex>=e?e-1:this.state.selectedIndex;this.setState({selectedIndex:t})}},this._onEmojiClick=e=>{if(T(e),e.target instanceof HTMLElement){var t=e.target.dataset.unicode;if(t)if(d.default.getSkinToneBase(t)){var a=this._getEmojiVariant(t);a?this.onEmoji(a):this.onContextMenu(e)}else this.onEmoji(t)}},this._onEmojiMouseDown=e=>{if(T(e),e.target instanceof HTMLElement){var t=e.target.dataset.unicode;t&&d.default.getSkinToneBase(t)&&this._startPickerTimer(e)}},this.onEmoji=e=>{this.props.onEmoji(e),this.releaseFocus()},this.releaseFocus=()=>{this.props.onFocusRelease&&this.props.onFocusRelease()},this._getEmojiVariant=e=>d.default.getSkinToneBase(e)?h.default.getVariant(e):null,this._setEmojiVariant=(e,t,a)=>{T(e),this.onEmoji(a),h.default.setVariant(t,a);var r=this.props.uim;return r&&(r.pop(!1,!1),r.uie.requestDismiss()),!1},this.onContextMenu=e=>{T(e);var t=e.target;if(t instanceof HTMLElement){var a=t.dataset.unicode;a&&d.default.getSkinToneBase(a)&&this._onContextMenu(a,t)}},this._onContextMenu=(e,t,a)=>{this._clearPickerTimer();var r=(0,_.default)(d.default.getSkinToneBase(e),"Emoji.getSkinToneBase(unicode)");this.setState({skinTonePicker:{menu:n.createElement(v.default,{base:r,action:this._setEmojiVariant,unicode:e}),anchor:t,type:"picker",dirX:l.DirX.RIGHT,dirY:l.DirY.TOP,horizontal:!0,autoFocus:a,findFirstItem:!0}},(()=>{var{onSkinTonePicker:e}=this.props;e&&e(!0)}))},this._closeSkinTonePicker=()=>{this.setState({skinTonePicker:null},(()=>{var{onSkinTonePicker:e}=this.props;e&&e(!1)}))},this._clearPickerTimer=()=>{null!=this._pickerTimer&&(this.props.clearTimeout(this._pickerTimer),this._pickerTimer=null)},this._startPickerTimer=e=>{T(e),this._clearPickerTimer();var t=e.target;if(t instanceof HTMLElement){var a=t.dataset.unicode;this._pickerTimer=this.props.setTimeout((()=>{this.props.listeners.addOnce(o.default,"window_click",T),this._onContextMenu(a,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}},this._getEmojiRowLength=()=>{var e=this._emojiPanelRef.current&&this._emojiPanelRef.current.offsetWidth;return null==e?8:Math.floor(e/C)},this.onEmojiArrowLeft=e=>{this._onEmojiArrow(e,"left")},this.onEmojiArrowRight=e=>{this._onEmojiArrow(e,"right")},this._onEmojiArrow=(e,t)=>{if(T(e),e.target instanceof HTMLElement){var a=e.target.dataset.emojiIndex;if(a){a=Number(a);var r=this.props.emojiList,s=a;switch(t){case"left":a>0&&(s=a-1);break;case"right":if(a+1>=r.length)return;s=a+1}this.setState({selectedIndex:s})}}},this._renderEmojiList=e=>{var t=e,a=this._getEmojiRowLength();t&&t.length>a&&(t=t.slice(0,a));var r=(0,i.default)(t,((e,t)=>{var a=this._getEmojiVariant(e),r=this.state.selectedIndex===t&&!this.state.skinTonePicker;return n.createElement(u.default,{element:"span",emoji:a||e,size:"large",key:e,"data-unicode":e,"data-variant":a,tabIndex:"-1","data-emoji-index":t,selected:r})}));return n.createElement(p.default,{onMouseDown:this._onEmojiMouseDown,onClick:this._onEmojiClick,onContextMenu:this.onContextMenu},n.createElement("div",{className:c.default.panel,ref:this._emojisRef},r))},this.onEmojiEnter=e=>{if(T(e),e.target instanceof HTMLElement){var t=e.target.dataset.emojiIndex;if(t&&this.props.emojiList){var a=this.props.emojiList[Number(t)];this._keyboardSelectEmoji(e,a)}}},this._keyboardSelectEmoji=(e,t)=>{if(d.default.getSkinToneBase(t)){var a=this._getEmojiVariant(t);if(a)this.onEmoji(a);else{if(T(e),!(e.target instanceof HTMLElement))return;this._onContextMenu(t,e.target,!0)}}else this.onEmoji(t)}}static getDerivedStateFromProps(e,t){return{selectedIndex:Math.min(t.selectedIndex,e.emojiList.length-1)}}componentDidUpdate(e,t){this.state.skinTonePicker&&this.state.skinTonePicker===t.skinTonePicker&&this._closeSkinTonePicker()}componentDidMount(){this.props.listeners.add(h.default,"add remove change:variant",(()=>this.forceUpdate()));var e=this.props.debounce(this._windowResized,100);this.props.listeners.add(window,"resize",e),this._windowResized()}_getEmojiAtIndex(e){var t;return null!==(t=this.props.emojiList[e])&&void 0!==t?t:null}_getEmojiElement(e){if(!(e<0)&&this._emojisRef.current){var t=this._emojisRef.current.children;if(!(e>=t.length))return t[e]}}render(){var e;return this.state.skinTonePicker&&(e=n.createElement(E.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker},n.createElement(S.default,{tooltip:this.state.skinTonePicker}))),n.createElement("div",{ref:this._emojiPanelRef},this._renderEmojiList(this.props.emojiList),e)}moveSelectionLeft(){this.setState({selectedIndex:Math.max(this.state.selectedIndex-1,0)})}moveSelectionRight(){this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this._getEmojiRowLength()-1,this.props.emojiList.length-1)})}pickSelectedEmoji(){var e=this._getEmojiAtIndex(this.state.selectedIndex);if(e)if(d.default.getSkinToneBase(e)){var t=this._getEmojiVariant(e);if(t)this.onEmoji(t);else{var a=this._getEmojiElement(this.state.selectedIndex);a&&this._onContextMenu(e,a,!0)}}else this.onEmoji(e)}}y.displayName="BaseEmojiSuggestionsPanel";var b=(0,f.default)((0,m.default)((0,g.default)(y)));function T(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=class extends b{moveSelectionLeft(){this.getComponent().moveSelectionLeft()}moveSelectionRight(){this.getComponent().moveSelectionRight()}pickSelectedEmoji(){this.getComponent().pickSelectedEmoji()}}},82512:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(14457),l=s(a(48308)),d=r(a(33848)),u=s(a(60585)),c=s(a(20642)),h=s(a(69132)),f=s(a(67110)),p=s(a(89088)),m={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=m;class _ extends n.PureComponent{constructor(e){var t;super(e),this._refDiv=n.createRef(),this.getElement=()=>this._refDiv.current,this._sectionIds=0===f.default.length?d.ORDERED_TAB_SECTION_IDS.filter((e=>e!==d.default.RECENT)):d.ORDERED_TAB_SECTION_IDS,this._refMenuTabs=new Map,this._handleEmojiPanelFocusUp=()=>{var e;null===(e=this._refMenuTabs.get(this.state.selectedSectionId))||void 0===e||e.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleEmojiPanelFocusEnter=e=>{null==e||e.preventDefault();var t=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(t)},this._handleEmojiPanelFocusNext=()=>{var e,t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleEmojiPanelFocusPrev=()=>{var e,t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.setState({focusedTabIndex:-1}),this._focusSearchInput()},this._handleMenuTabClick=(e,t)=>{var a,r;this._selectSection(e),null===(a=(r=this.props).onChange)||void 0===a||a.call(r,""),this._focusSearchInput(),null==t||t.preventDefault()},this._handlePanelSection=e=>{this._animationPromise||this.state.selectedSectionId!==e&&this.setState({selectedSectionId:e})},this._onEmoji=e=>{f.default.increment(e),this.props.onEmoji(e)},this._onChange=(e,t)=>{var a,r;null===(a=(r=this.props).onChange)||void 0===a||a.call(r,e,t),this.setState({})},this._setRefContent=e=>{this._refContent=e},this._renderEmojiTab=(e,t)=>n.createElement(p.default,{key:e,onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}}),this._scrollSectionIds=this._sectionIds,t=this.props.displayCache?this.props.displayCache:{scrollTop:0,sectionId:this._sectionIds[0],showSearchInput:!0},this._displayCache=t,this.state={selectedSectionId:t.sectionId,focusedTabIndex:-1}}componentDidMount(){this.props.listeners.uiIdle((()=>{this.restoreFocus()}))}restoreFocus(e){this._focusSearchInput(e)}_focusSearchInput(e){this._refContent&&this._refContent.focusSearchInput(e)}_selectSection(e){this.state.selectedSectionId!==e&&(this.setState({selectedSectionId:e}),this._scrollToSection(e))}_scrollToSection(e){if(this._refContent){var t=this._refContent.scrollToSection(e);this._animationPromise=t,t.finally((()=>{t===this._animationPromise&&delete this._animationPromise}))}}render(){var e,t=(0,i.default)(u.default.emojiPanel,{[u.default.panelDropdown]:this.props.displayLocation===m.DROPDOWN}),{width:a=o.EMOJI_PICKER_WIDTH}=this.props;return n.createElement("div",{className:t,ref:this._refDiv},n.createElement(h.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderEmojiTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext,onFocusLeave:this._handleFocusLeave,onEnter:this._handleEmojiPanelFocusEnter}),n.createElement(l.default,{displayCache:this._displayCache,width:a,onDisplayCache:this.props.onDisplayCache,onFocusUp:this._handleEmojiPanelFocusUp,onFocusPrev:this.props.onFocusPrev,onFocusNext:this.props.onFocusNext,onEmoji:this._onEmoji,onSection:this._handlePanelSection,ref:this._setRefContent,sectionIds:this._scrollSectionIds,onChange:this._onChange,defaultSearchText:this.props.defaultSearchText}))}}_.defaultProps={displayLocation:m.DROPDOWN},_.displayName="EmojiPanel";var v=(0,c.default)(_);t.default=class extends v{restoreFocus(e){this.getComponent().restoreFocus(e)}}},75656:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.SKIN_TONE_VARIATIONS=void 0;var s=r(a(12396)),i=[""].concat(s.default.skinToneVariations);t.SKIN_TONE_VARIATIONS=i},75705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={TRENDING:"TRENDING",HAHA:"HAHA",SAD:"SAD",LOVE:"LOVE",REACTIONS:"REACTIONS",SPORTS:"SPORTS",TV:"TV"};t.default=a},52127:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.gifProvider=function(){switch(s.default.gifSearch){case"giphy":return i;case"tenor":default:return n}},t.GIPHY_LOCALES=t.BRAND_NAMES=t.GifInfo=t.TENOR=t.GIPHY=t.GAP_SIZE=t.TARGET_GIF_HEIGHT=void 0;var s=r(a(72424));t.TARGET_GIF_HEIGHT=130;t.GAP_SIZE=6;var i="giphy";t.GIPHY=i;var n="tenor";t.TENOR=n;var o=0;t.GifInfo=class{constructor(e,t,a,r,s,i,n,l){this.rank=e,this.gifId=++o,this.url=t,this.size=a,this.previewUrl=r||t,this.nonVideoUrl=s,this.width=i,this.widthStr="".concat(i,"px"),this.ratioStr="".concat(Math.ceil(13e3/i),"%"),this.attribution=n,this.trending=l}};t.BRAND_NAMES={giphy:"GIPHY",tenor:"Tenor"};t.GIPHY_LOCALES=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"]},70170:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(2784)),n=r(a(61180)),o=r(a(87180)),l=r(a(82631));function d(e){return e.sectionId&&e.sectionId===n.default.FAVORITES?i.createElement(l.default,{name:"panel-starred"}):i.createElement("span",{className:o.default.text},e.sectionTitle)}d.displayName="EmojiSectionIcon"},78119:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(61180)),o=r(a(17957)),l=r(a(70170)),d=s(a(59591));class u extends i.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this.props.onClick(this.props.sectionId,e)}}render(){var e={[n.default.FAVORITES]:o.default.t(731),[n.default.TRENDING]:o.default.t(737),[n.default.HAHA]:o.default.t(732),[n.default.SAD]:o.default.t(735),[n.default.LOVE]:o.default.t(733),[n.default.REACTIONS]:o.default.t(734),[n.default.SPORTS]:o.default.t(736),[n.default.TV]:o.default.t(738)},{sectionId:t}=this.props,a=e[t];return i.createElement(d.default,{onClick:this.props.onClick,sectionId:this.props.sectionId,selected:this.props.selected,showFocusIndicator:this.props.showFocusIndicator,title:a,theme:d.THEMES.MENU,onRef:this.props.onRef},i.createElement(l.default,{sectionId:t,sectionTitle:a}))}}t.default=u,u.displayName="GifSectionTab"},97586:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(67703)),o=r(a(82631)),l=r(a(77626));class d extends i.Component{get messagePreviewRef(){return this._messagePreviewRef}constructor(e){super(e),this.setRefVideo=e=>{this._videoRef=e,this._synchronizeVideo()},this._synchronizeVideo=()=>{var e=this._videoRef;e&&(this.state.animate?e.paused&&e.play():e.paused||(e.pause(),e.currentTime=0))},this.setShouldAnimate=e=>{this.state.animate===e&&this.state.show||this.setState({animate:e,show:!0},this._synchronizeVideo)},this.handleClick=()=>{this.props.onSend(this.props.gif)},this.setRefHotKeys=e=>{this._messagePreviewRef=e},this.onFocus=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!0})},this.onBlur=e=>{e.preventDefault(),e.stopPropagation(),this.setState({focused:!1})},this._videoRef=null,this.state={animate:!1,show:!1,focused:!1}}render(){var e,t=this.props.gif,a=null;return this.state.show&&(a=l.default.troublesWithLotsOfVideos&&t.nonVideoUrl?i.createElement("img",{className:n.default.body,onClick:this.handleClick,src:t.nonVideoUrl}):i.createElement("video",{className:n.default.body,onClick:this.handleClick,controls:!1,autoPlay:this.state.animate,loop:!0,muted:!0,ref:this.setRefVideo,src:t.previewUrl})),this.props.isStarred&&this.props.onUnstarMsg&&(e=i.createElement("button",{className:n.default.icon,onClick:this.props.onUnstarMsg},i.createElement(o.default,{name:"star"}))),i.createElement("div",{ref:this.setRefHotKeys,className:n.default.preview,tabIndex:"-1",onFocus:this.onFocus,onBlur:this.onBlur,style:{flexBasis:t.widthStr}},this.state.focused&&i.createElement("div",{style:{flexBasis:t.widthStr},className:n.default.focusBorder}),i.createElement("div",{style:{width:t.widthStr},className:n.default.wrapper},i.createElement("div",{style:{paddingBottom:t.ratioStr},className:n.default.container},a)),e)}}d.displayName="GifPreview";var u=d;t.default=u},66514:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getGifDimensions=W,t.giphyResultsToGifs=Y,t.default=t.Component=void 0;var i=s(a(19976)),n=s(a(52954)),o=a(39329),l=r(a(2784)),d=a(28703),u=a(20485),c=r(a(96452)),h=s(a(93601)),f=s(a(6660)),p=a(52127),m=s(a(97586)),_=s(a(87276)),v=s(a(61180)),g=s(a(44343)),E=s(a(17957)),S=s(a(40210)),C=s(a(99911)),y=s(a(72259)),b=s(a(87713)),T=s(a(6155)),M=s(a(38185)),N=s(a(74185)),I=s(a(17744));function P(){var e=(0,i.default)(["gif_search:searchTenor fetch failed with an error : ",""]);return P=function(){return e},e}function A(){var e=(0,i.default)(["gif_search:searchGiphy fetch failed with an error : ",""]);return A=function(){return e},e}function O(){var e=(0,i.default)(["gif_search: All the gifs were skipped, check if there is a change in giphys response"]);return O=function(){return e},e}function D(){var e=(0,i.default)(["gif_search:getGifDimensions original does not have valid dimensions"]);return D=function(){return e},e}function w(){var e=(0,i.default)(["gif_search:getGifDimensions fullContent does not have valid dimensions'"]);return w=function(){return e},e}var R="3o85xmWDYKgihhIKSA",k="DLAQBEYLJJIM",L={giphy:S.default.GIF_SEARCH_PROVIDER.GIPHY,tenor:S.default.GIF_SEARCH_PROVIDER.TENOR},x={giphy:d.VideoMessageAttribution.GIPHY,tenor:d.VideoMessageAttribution.TENOR},F=new b.default((function(e){switch((0,p.gifProvider)()){case"giphy":return function(){return H.apply(this,arguments)}(e);case"tenor":return function(){return K.apply(this,arguments)}(e);default:throw new Error("Unrecognized provider ".concat((0,p.gifProvider)()))}}),{maxCached:6,maxAge:36e4,shouldCache:e=>!(!e||!e.length)}),B="UP",G="DOWN",U="LEFT",j="RIGHT";class V extends l.Component{constructor(e){super(e),this._scrollTop=0,this._didSendGif=!1,this._onlineRestarter=null,this._pendingQuery=null,this._refGifs={},this._refGifsBySectionId={},this.setRefGif=(e,t)=>{var[a,r]=e;t?(this._refGifs[a]=t,this._refGifsBySectionId[r]=t):(delete this._refGifs[a],delete this._refGifsBySectionId[r])},this._setRefGifCache=new T.default(this.setRefGif),this.onSend=e=>{var t=L[e.attribution];new S.default.GifFromProviderSent({gifSearchProvider:t}).commit(),e.trending||"number"!=typeof e.rank||new S.default.GifSearchResultTapped({gifSearchProvider:t,rank:e.rank}).commit(),this._didSendGif=!0,this.props.onGif(e.url,x[e.attribution])},this.animateGif=()=>{var e=this._animatingRow,t=this._scrollTop+p.GAP_SIZE;this._starredGifs&&(t-=this._starredGifs.getClientHeight()||0);var a=Math.round(t/(p.TARGET_GIF_HEIGHT+p.GAP_SIZE)),r=this.state.gifRows[a];if(r&&r.gifs.length&&r!==e){if(this._animatingRow=r,e)for(var s=0;s<e.gifs.length;s++)this._setGifAnimating(e.gifs[s].gifId,!1);for(var i=0;i<r.gifs.length;i++)this._setGifAnimating(r.gifs[i].gifId,!0)}[a+1,a-1].forEach((e=>{if(this.state.gifRows[e])for(var t=this.state.gifRows[e].gifs,a=0;a<t.length;a++)this._setGifAnimating(t[a].gifId,!1)}))},this._searchForAndSetGifs=()=>{var e=L[(0,p.gifProvider)()],t=this.props.searchText||this.props.selectedSectionId||v.default.TRENDING,a=F.getOrRun(t);a=a.then(),this._pendingQuery=a,a.checkpoint(this.props.rejectOnUnmount()).then((t=>{if(t&&0===t.length&&new S.default.GifSearchNoResults({gifSearchProvider:e}).commit(),a===this._pendingQuery&&(this._pendingQuery=null,t)){var r=this._containerDom&&this._containerDom.clientWidth||0;r-=2*p.GAP_SIZE,this._resetScroll=!0,this._animateTimer.debounce(0),this.setState({gifRows:z(t,r),width:r})}})).catchTypes(c.Unmount,Promise.CancellationError,(()=>{}))},this._onStarredGifsMount=e=>{this._starredGifs=e},this._onContainerMount=e=>{this._containerDom=e,null!=e&&e&&this._resetScroll&&(e.scrollTop=0)},this.initSelection=(e=!1)=>{this._starredGifs&&this._starredGifs.hasGifs()&&!e?this._starredGifs&&this._starredGifs.component&&this._starredGifs.component.initSelection():(this.selection=[0,0],this._focusGif())},this._getNewColPostion=e=>{var{gifRows:t}=this.state,[a,r,s,i,n]=[this.selection[0],this.selection[1],t[Math.min(this.selection[0],t.length-1)].gifs.length-1,t[Math.min(this.selection[0]+1,t.length-1)].gifs.length-1,t[Math.max(this.selection[0]-1,0)].gifs.length-1],o=r/s;switch(e){case B:var l=Math.floor(n*o);return[Math.max(a-1,0),l];case G:return[a+1,Math.floor(i*o)]}return[0,0]},this.contains=e=>!!this._containerDom&&this._containerDom.contains(e),this.getStarredGifsRef=()=>this._starredGifs,this._handleArrowKeys=(e,t)=>{var{gifRows:a}=this.state,[r,s]=[this.selection[0],this.selection[1]];switch(t){case B:if(0===r)return;this.selection=this._getNewColPostion(B);break;case G:if(r===a.length-1)return;this.selection=this._getNewColPostion(G);break;case U:if(0===s&&0===r)return;this.selection=0===s?this._getNewSelection(r-1,a[r-1].gifs.length-1):this._getNewSelection(r,s-1);break;case j:a[r]?a[r].gifs.length===s+1?this.selection=this._getNewSelection(r+1,0):this.selection=this._getNewSelection(r,s+1):this.selection=[0,0]}this.stopEvent(e),this._focusGif()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.restoreFocus=()=>{},this._focusGif=()=>{var e=this.selection.join("_"),t=this._refGifsBySectionId[e];if(t){var a=t.messagePreviewRef;a&&(f.default.focus(a),this.props.scrollGifIntoViewIfNeeded(a))}},this._handleUpArrow=e=>{this._handleArrowKeys(e,B)},this.handleDownArrow=e=>{this._handleArrowKeys(e,G)},this.handleLeftArrow=e=>{this._handleArrowKeys(e,U)},this.handleRightArrow=e=>{this._handleArrowKeys(e,j)},this.handleEnter=e=>{this.stopEvent(e);var{gifRows:t}=this.state,[a,r]=[this.selection[0],this.selection[1],this.selection[2]];this.onSend(t[a].gifs[r])},this._scrollTop=0,this._animatingRow=null,this._containerDom=null,this._didSendGif=!1,this.state={gifRows:[],width:0}}componentDidUpdate(e){e.searchText!==this.props.searchText&&this._scheduleQuery()}shouldComponentUpdate(e,t){return e.onGif!==this.props.onGif||t.gifRows!==this.state.gifRows||e.selectedSectionId!==this.props.selectedSectionId||e.searchText!==this.props.searchText}componentDidMount(){this._searchTimer=new o.ShiftTimer(this._searchForAndSetGifs),this._animateTimer=new o.ShiftTimer(this.animateGif),this._onlineRestarter=Promise.loop((()=>(0,I.default)(C.default,"change:online",(()=>C.default.online)).then((()=>this._scheduleQuery())))).cancellable(),this._onlineRestarter.catchType(Promise.CancellationError,(()=>{})),this._searchForAndSetGifs(),new S.default.GifSearchSessionStarted({gifSearchProvider:L[(0,p.gifProvider)()]}).commit()}componentWillUnmount(){this._animateTimer.cancel(),this._searchTimer.cancel(),this._onlineRestarter&&this._onlineRestarter.cancel(),this._didSendGif||new S.default.GifSearchCancelled({gifSearchProvider:L[(0,p.gifProvider)()]}).commit()}_scheduleQuery(){this._searchTimer.debounceAndCap(200,2e3)}animateOnScroll(e){this._scrollTop=e.scrollTop,this._animateTimer.debounce(200)}_setGifAnimating(e,t=!1){var a=this._refGifs[String(e)];a&&a.setShouldAnimate(t)}_getNewSelection(e,t){return[Math.max(0,e),Math.max(0,t)]}render(){var{gifRows:e}=this.state,t={up:this._handleUpArrow,down:this.handleDownArrow,left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},a=e.map(((e,t)=>{var a=e.gifs.map(((e,a)=>l.createElement(m.default,{key:e.gifId,ref:this._setRefGifCache.getRefSetter(["".concat(e.gifId),"".concat(t,"_").concat(a)]),gif:e,onSend:this.onSend}))),r=null;return e.blankStr&&(r=l.createElement("div",{className:_.default.blank,style:{flexBasis:e.blankStr}})),l.createElement("div",{key:t,className:_.default.row},a,r)})),r=this.props.selectedSectionId!==v.default.FAVORITES&&(0===a.length?l.createElement("div",{className:_.default.noResults},this.props.searchText?l.createElement(u.SearchWithoutKeyword,null):l.createElement(u.Loading,null)):l.createElement(g.default,{className:_.default.section,handlers:t},a)),s=!this.props.searchText&&this.props.selectedSectionId===v.default.FAVORITES&&l.createElement(M.default,{onSend:this.onSend,ref:this._onStarredGifsMount});return l.createElement("div",{className:_.default.searchContainer,ref:this._onContainerMount},r,s)}}function H(){return(H=(0,n.default)((function*(e){var t,a=e===v.default.TRENDING;if(a)t=N.default.build("https://api.giphy.com/v1/gifs/trending",{api_key:R,limit:100,rating:"pg-13"});else{var r=E.default.getLocale(),s="zh-HK"===r?"zh-TW":r,i="";p.GIPHY_LOCALES.includes(s)&&(i=s),t=N.default.build("https://api.giphy.com/v1/gifs/search",{q:e,api_key:R,limit:100,rating:"pg-13",lang:i})}try{var n=yield(0,h.default)(t);if(!n.ok)throw new Error(n.statusText);return Y(yield n.json(),a)}catch(e){return __LOG__(4,void 0,new Error)(A(),e),null}}))).apply(this,arguments)}function W(e,t){if(e){var a=parseInt(e.width,10),r=parseInt(e.height,10);if(a&&r)return{width:a,height:r};__LOG__(4,void 0,new Error,!0)(w()),SEND_LOGS("gif_search:getGifDimensions fullContent does not have valid dimensions")}if(t){var s=parseInt(t.width,10),i=parseInt(t.height,10);if(s&&i)return{width:p.TARGET_GIF_HEIGHT*s/i,height:p.TARGET_GIF_HEIGHT};__LOG__(4,void 0,new Error,!0)(D()),SEND_LOGS("gif_search:getGifDimensions original does not have valid dimensions")}return{width:p.TARGET_GIF_HEIGHT,height:p.TARGET_GIF_HEIGHT}}function Y(e,t){if(!e||!Array.isArray(e.data))return[];if(!e.data.length&&t)return[];for(var a=e.data,r=[],s=0;s<a.length;s++){var i=a[s],n=i&&i.images;if(n){var{original:o,preview:l,downsized_small:d,preview_webp:u,preview_gif:c}=n;if(d){var h=d.mp4;if(h){var{width:f,height:m}=W(d,o);r.push(new p.GifInfo(r.length,h,parseInt(d.mp4_size,10),l&&l.mp4||void 0,u&&u.url||c&&c.url||void 0,Math.round(f*p.TARGET_GIF_HEIGHT/m),p.GIPHY,t))}}}}return 0===r.length&&a.length>0&&(__LOG__(4,void 0,new Error,!0)(O()),SEND_LOGS("gif_search: All the gifs were skipped, check if there is a change in giphys response")),r}function K(){return(K=(0,n.default)((function*(e){var t,a=e===v.default.TRENDING,r=E.default.lng().replace("-","_");t=a?N.default.build("https://wa.tenor.co/v1/trending",{key:k,limit:50,contentfilter:"high",locale:r}):N.default.build("https://wa.tenor.co/v1/search",{q:e,key:k,limit:50,contentfilter:"high",locale:r});try{var s=yield(0,h.default)(t);if(!s.ok)throw new Error(s.statusText);return q(yield s.json())}catch(e){return __LOG__(4,void 0,new Error)(P(),e),null}}))).apply(this,arguments)}function q(e,t=!1){if(!e||!Array.isArray(e.results))return[];for(var a=e.results,r=[],s=0;s<a.length;s++){var i=a[s];if(i&&i.media&&i.media[0]){var{tinymp4:n,previewmp4:o,previewgif:l}=i.media[0];if(n){var[d,u]=n.dims;r.push(new p.GifInfo(r.length,n.url,n.size,o&&o.url||void 0,l&&l.url||void 0,Math.round(d*p.TARGET_GIF_HEIGHT/u),p.TENOR,t))}}}return r}function z(e,t){for(var a=[],r=.9*t,s=e,i=null,n=.05;n<1&&s.length;n+=.05){s.sort(((e,t)=>{var a=e.rank-t.rank;return Math.abs(a)>8?a:t.width-e.width}));for(var o=(1+n)*t,l=[],d=[],u=0;u<s.length;u++){for(var c=s[u],h=!1,f=Math.min(o-c.width,r),m=0;!h&&m<l.length;m++)l[m]<f&&(l[m]+=c.width+p.GAP_SIZE,d[m].push(c),h=!0);h||(l.push(c.width),d.push([c]))}if(1===d.length){s=[];var _=t-l[0]-p.GAP_SIZE;i={gifs:d[0],blankStr:_>0?"".concat(_,"px"):void 0}}else{s=[];for(var v=0;v<d.length;v++)l[v]>r?a.push(d[v]):s.push.apply(s,d[v])}}a.forEach((e=>e.sort(((e,t)=>e.rank-t.rank)))),a.sort(((e,t)=>e[0].rank-t[0].rank));var g=a.map((e=>({gifs:e,blankStr:void 0})));return i&&g.push(i),g}V.displayName="GifSearch";var Q=V;t.Component=Q;var X=(0,y.default)(V);t.default=class extends X{constructor(...e){super(...e),this.initSelection=e=>{this.getComponent().initSelection(e)},this.animateOnScroll=e=>{this.getComponent().animateOnScroll(e)},this.getStarredGifsRef=()=>this.getComponent().getStarredGifsRef()}contains(e){return this.getComponent().contains(e)}}},61180:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var s=r(a(75705)),i={FAVORITES:"FAVORITES",[s.default.TRENDING]:s.default.TRENDING,[s.default.HAHA]:s.default.HAHA,[s.default.SAD]:s.default.SAD,[s.default.LOVE]:s.default.LOVE,[s.default.REACTIONS]:s.default.REACTIONS,[s.default.SPORTS]:s.default.SPORTS,[s.default.TV]:s.default.TV},n=i;t.default=n;var o={[i.FAVORITES]:i.FAVORITES,[i.TRENDING]:i.TRENDING,[i.HAHA]:i.HAHA,[i.SAD]:i.SAD,[i.LOVE]:i.LOVE,[i.REACTIONS]:i.REACTIONS,[i.SPORTS]:i.SPORTS,[i.TV]:i.TV},l=[o.FAVORITES,o.TRENDING,o.HAHA,o.SAD,o.LOVE,o.REACTIONS,o.SPORTS,o.TV];t.ORDERED_TAB_SECTION_IDS=l},3815:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GifPanel=void 0;var i=s(a(45455)),n=s(a(12436)),o=s(a(84573)),l=r(a(2784)),d=a(12097),u=r(a(62436)),c=a(52127),h=s(a(66514)),f=r(a(61180)),p=s(a(18120)),m=a(13414),_=s(a(44343)),v=s(a(69132)),g=s(a(408)),E=s(a(17957)),S=s(a(20642)),C=s(a(40210)),y=s(a(61941)),b=s(a(76097)),T=s(a(78119)),M=s(a(74824));class N extends l.PureComponent{constructor(e){super(e),this._refMenuTabs=new Map,this.getElement=()=>this._refContainer,this._setRefContainer=e=>{this._refContainer=e},this._lastScrollTop=0,this._fastScroll=!1,this._lastClickTime=0,this._setGifPanelRef=e=>{this._gifPanelRef=e},this._sectionIds=f.ORDERED_TAB_SECTION_IDS,this.handleScroll=(0,n.default)((()=>{if(null==this.state.selectedSectionId&&this.state.searchText&&this.scrollContainer&&this._gifPanelRef)this._gifPanelRef.animateOnScroll(this.scrollContainer);else if(!(Date.now()-this._lastClickTime<d.SCROLL_CLICK_TIME_GAP)){var e={};if(this.state.isPreview&&(e.isPreview=!1),this.scrollContainer){var t=this.scrollContainer,a=t.scrollTop,r=a<=0;r!==this.state.scrolledToTop&&(e.scrolledToTop=r);var s=this._lastScrollTop-a,n=Math.abs(s)>d.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(s)>d.INPUT_BAR_SCROLL_FAST,s<0?this.state.showSearchInput&&(a>d.INPUT_HIDE_POINT&&n||this._lastScrollTop<d.INPUT_HIDE_POINT&&a>=d.INPUT_HIDE_POINT)&&(e.showSearchInput=!1):this.state.showSearchInput||(n||a<d.INPUT_SHOW_POINT)&&(e.showSearchInput=!0),this._gifPanelRef&&this._gifPanelRef.animateOnScroll(t),this._lastScrollTop=a,(0,i.default)(e)||this.setState(e)}}}),d.SCROLL_THROTTLE_TIME),this._setRefSearchInput=e=>{this._searchInput=e},this.restoreFocus=e=>{this.focusSearchInput(e)},this.onRotateFocus=e=>{this.stopEvent(e),this._searchInputHasFocus()?this.props.onFocusRelease&&this.props.onFocusRelease():this.focusSearchInput()},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.scrollGifIntoViewIfNeeded=e=>{this.scrollContainer&&e.offsetTop-this.scrollContainer.scrollTop<d.INPUT_BAR_TOTAL_HEIGHT&&u.scrollIntoView(e,!0,this.scrollContainer)},this._searchInputHasFocus=()=>!!this._searchInput&&this._searchInput.hasFocus(),this.focusSearchInput=e=>{if(!this._searchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this.focusSearchInput(!0)));this._searchInput.focus(e)},this._onGifSearchDown=e=>{this.stopEvent(e),this._gifPanelRef&&this._gifPanelRef.initSelection()},this._getSearchBox=()=>{var e=null;this.state.showSearchInput&&(e=l.createElement(b.default,{label:E.default.t(1272,{service:c.BRAND_NAMES[(0,c.gifProvider)()]}),onChange:this.onSearch,onUpKey:this._handleFocusUp,onDownKey:this._onGifSearchDown,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,tabFocused:this.state.tabFocused,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return l.createElement(M.default,{transitionName:t},e)},this.onSearch=(e,t)=>{this.stopEvent(t),null==this.state.searchText&&(this._scrollTopBeforeSearch=this.scrollContainer&&this.scrollContainer.scrollTop),this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e,tabFocused:!1})},this.preventBlur=e=>{this.stopEvent(e),this.restoreFocus()},this._handleParentContainerUp=e=>{var t,a=e&&e.nativeEvent.target,r=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef(),s=a instanceof HTMLElement&&(null==r?void 0:r.isStarredGif(a)),i=a instanceof HTMLElement&&!!this._gifPanelRef&&this._gifPanelRef.contains(a);s?(this.focusSearchInput(),this.stopEvent(e)):i&&(null==r?void 0:r.hasGifs())?(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e)):i&&(this.focusSearchInput(),this.stopEvent(e))},this.handleDownArrow=e=>{var t,a=e&&e.nativeEvent.target,r=null===(t=this._gifPanelRef)||void 0===t?void 0:t.getStarredGifsRef();a instanceof HTMLElement&&(null==r?void 0:r.isStarredGif(a))?(this._gifPanelRef&&this._gifPanelRef.initSelection(!0),this.stopEvent(e)):a instanceof Node&&this._gifPanelRef&&this._gifPanelRef.contains(a)&&(this._gifPanelRef&&this._gifPanelRef.initSelection(!1),this.stopEvent(e))},this._handleTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusNext&&this.props.onFocusNext()):this.focusSearchInput()},this._handleShiftTabKey=e=>{if(e.preventDefault(),e.stopPropagation(),this._searchInput)return this._searchInput.hasFocus()?void(this.props.onFocusPrev&&this.props.onFocusPrev()):this.focusSearchInput()},this._handleFocusUp=()=>{var e,t,a=null!==(e=this.state.selectedSectionId)&&void 0!==e?e:this._sectionIds[0];null===(t=this._refMenuTabs.get(a))||void 0===t||t.focus(),this.setState({focusedTabIndex:this._sectionIds.indexOf(this.state.selectedSectionId)})},this._handleFocusEnter=()=>{var e=this._sectionIds[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleMenuTabClick(e)},this._handleMenuFocusNext=()=>{var e,t=(this.state.focusedTabIndex+1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleMenuFocusPrev=()=>{var e,t=(this._sectionIds.length+this.state.focusedTabIndex-1)%this._sectionIds.length,a=this._sectionIds[t];null===(e=this._refMenuTabs.get(a))||void 0===e||e.focus(),this.setState({focusedTabIndex:t})},this._handleFocusLeave=()=>{this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleMenuTabClick=e=>{var t,a,r;e===f.default.FAVORITES?this.setState({showSearchInput:!0,selectedSectionId:e,searchText:null,tabFocused:!0}):this.setState({showSearchInput:!0,selectedSectionId:e,searchText:e,tabFocused:!0}),null===(t=(a=this.props).onChange)||void 0===t||t.call(a,""),null===(r=this._searchInput)||void 0===r||r.focus(!1)},this._renderGifTab=(e,t)=>l.createElement(T.default,{key:e,onClick:this._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,onRef:t=>{this._refMenuTabs.set(e,t)}});var t=(0,o.default)(this.props.displayCache||{},{scrollTop:0,showSearchInput:!0});p.default.supportsFeature(p.default.F.STARRED_GIFS)||(this._sectionIds=this._sectionIds.filter((e=>e!==f.default.FAVORITES))),this.state={isPreview:!t.scrollTop,scrolledToTop:0===t.scrollTop,searchText:this.props.defaultSearchText||null,searchResults:null,showSearchInput:t.showSearchInput,selectedSectionId:t.selectedSectionId||f.default.TRENDING,tabFocused:!1,focusedTabIndex:-1}}componentDidMount(){this._lastClickTime=Date.now();var e=this.props.displayCache&&this.props.displayCache.scrollTop;this.scrollContainer&&null!=e&&0!==e&&(this.scrollContainer.scrollTop=e),this.props.listeners.uiIdle((()=>{this.restoreFocus(),new C.default.WebcEmojiOpen({webcEmojiOpenTab:"GIF"}).commit(),this.setState({isPreview:!1})}))}componentWillUnmount(){this.props.onDisplayCache({scrollTop:this.scrollContainer?this.scrollContainer.scrollTop:0,showSearchInput:this.state.showSearchInput,selectedSectionId:this.state.selectedSectionId}),this.handleScroll.cancel()}componentDidUpdate(e,t){if(t.searchText!==this.state.searchText){if(!this.scrollContainer)return;this.state.searchText?this.scrollContainer.scrollTop=0:null!=this._scrollTopBeforeSearch&&0!==this._scrollTopBeforeSearch&&(this.scrollContainer.scrollTop=this._scrollTopBeforeSearch)}}render(){var e,t=this._getSearchBox(),a=(this.state.searchText||"").replace(/^\s+/,"");return l.createElement(_.default,{onRef:this._setRefContainer,handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey,up:this._handleParentContainerUp,down:this.handleDownArrow}},l.createElement(v.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderGifTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),l.createElement("div",{className:g.default.gifPanel},l.createElement("div",{className:g.default.bodyContainer,onMouseDown:this.preventBlur},t,l.createElement("div",{className:g.default.panelBody,onScroll:this.handleScroll,ref:(0,m.GetRef)((e=>{this.scrollContainer=e}))},l.createElement(h.default,{ref:this._setGifPanelRef,onGif:(0,y.default)(this.props.onGif,"this.props.onGif"),searchText:a,scrollGifIntoViewIfNeeded:this.scrollGifIntoViewIfNeeded,selectedSectionId:this.state.selectedSectionId})))))}}t.GifPanel=N,N.displayName="GifPanel";var I=(0,S.default)(N);t.default=class extends I{focusSearchInput(e){this.getComponent().focusSearchInput(e)}restoreFocus(e){this.getComponent().restoreFocus(e)}}},20692:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(9386)),d=a(28703),u=a(52127),c=s(a(97586)),h=s(a(17957)),f=s(a(20642)),p=a(96645),m=r(a(68084)),_=s(a(40210)),v=s(a(72852)),g=s(a(47577)),E=s(a(82631));class S extends n.Component{constructor(...e){super(...e),this.setRefGif=e=>{this._gifRef=e},this._getGifProvider=()=>{switch(this.props.msg.gifAttribution){case d.VideoMessageAttribution.GIPHY:return u.GIPHY;case d.VideoMessageAttribution.TENOR:return u.TENOR;default:return""}},this.handleClick=e=>{switch(e.stopPropagation(),this.props.msg.mediaData.mediaStage){case p.MEDIA_DATA_STAGE.NEED_POKE:this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0});break;case p.MEDIA_DATA_STAGE.FETCHING:this.props.msg.cancelDownload();break;case p.MEDIA_DATA_STAGE.UPLOADING:this.props.msg.cancelUpload();break;case p.MEDIA_DATA_STAGE.ERROR_MISSING:o.default.openModal(n.createElement(l.default,{title:h.default.t(1022),onOK:()=>o.default.closeModal(),okText:h.default.t(1761)},h.default.t(1021)))}},this.onUnstarMsg=()=>{var{msg:e}=this.props;v.default.remove(e)}}get gifRef(){return this._gifRef}animateGif(){this.props.listeners.uiIdle((()=>{this._gifRef&&this._gifRef.setShouldAnimate(!0)}))}componentDidMount(){var e=this.props.msg;this.props.listeners.add(e,"change:mediaData.mediaStage",(()=>{this.forceUpdate()})),this.props.listeners.uiIdle((()=>{e.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})})),this.animateGif()}componentDidUpdate(){this.animateGif()}render(){var e=this.props.msg,t=e.mediaData,a=new u.GifInfo(void 0,t.renderableUrl,void 0,void 0,void 0,Math.round(t.aspectRatio*u.TARGET_GIF_HEIGHT),this._getGifProvider(),!1);if(t.mediaStage===p.MEDIA_DATA_STAGE.RESOLVED)return n.createElement(c.default,{key:e.filehash,ref:this.setRefGif,gif:a,onSend:this.props.onSend,isStarred:!0,onUnstarMsg:this.onUnstarMsg});if(t.preview){var r,s=t.preview.url();switch(t.mediaStage){case p.MEDIA_DATA_STAGE.ERROR_MISSING:break;case p.MEDIA_DATA_STAGE.NEED_POKE:r=n.createElement(m.Download,null);break;case p.MEDIA_DATA_STAGE.FETCHING:case p.MEDIA_DATA_STAGE.UPLOADING:r=n.createElement(m.PendingCancel,null);break;default:r=n.createElement(m.Pending,null)}var o=(0,i.default)(g.default.thumb,{[g.default.blur]:t.mediaStage===p.MEDIA_DATA_STAGE.ERROR_MISSING}),l=n.createElement("div",{className:o,style:{backgroundImage:"url(".concat(s,")"),height:"".concat(u.TARGET_GIF_HEIGHT,"px")}});return n.createElement("div",{className:g.default.container,style:{flexBasis:a.widthStr},key:e.filehash},n.createElement("div",{className:g.default.wrapper,style:{width:a.widthStr},onClick:this.handleClick},n.createElement("div",{className:g.default.innerWrapper,style:{paddingBottom:a.ratioStr}},r,l)),n.createElement("button",{className:g.default.starIcon,onClick:this.onUnstarMsg},n.createElement(E.default,{name:"star"})))}return null}}S.displayName="StarredGifPreview";var C=(0,f.default)(S);t.default=C},38185:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(84636)),n=s(a(72779)),o=r(a(2784)),l=s(a(6660)),d=a(52127),u=s(a(44343)),c=s(a(20642)),h=s(a(72852)),f=s(a(20692)),p=s(a(19893)),m=s(a(82631)),_="RIGHT",v="LEFT";class g extends o.Component{constructor(...e){super(...e),this.state={curIndex:0,direction:_},this._msgLength=0,this._starredPreviewRef={},this._selectionIndex=0,this._onSlideLeft=()=>this._hasLeft()?new Promise((e=>{this.setState({curIndex:this.state.curIndex-1,direction:v},(()=>{e(!0)}))})):Promise.resolve(!1),this._onSlideRight=()=>this._hasRight()?new Promise((e=>{this.setState({curIndex:this.state.curIndex+1,direction:_},(()=>{e(!0)}))})):Promise.resolve(!1),this.setRef=e=>{this._ref=e},this._hasRight=()=>this.state.curIndex+4<this._msgLength,this._hasLeft=()=>this.state.curIndex>0,this.handleLeftArrow=e=>{this._onSlideLeft().then((t=>{this._selectionIndex=t?this._selectionIndex:this._selectionIndex-1,this._selectionIndex<0?this.stopEvent(e):(this.stopEvent(e),this._focusStarredGif())}))},this.handleRightArrow=e=>{this._onSlideRight().then((t=>{this._selectionIndex=t?this._selectionIndex-1:this._selectionIndex;var a=Object.keys(this._starredPreviewRef).length;if(this._selectionIndex<3&&this._selectionIndex<a-1)this._selectionIndex=this._selectionIndex+1;else{if(!this._hasRight())return void this.stopEvent(e);this._selectionIndex=3}this.stopEvent(e),this._focusStarredGif()}))},this.stopEvent=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.handleEnter=e=>{this.stopEvent(e),this._starredPreviewRef[this._selectionIndex].component.gifRef.handleClick()},this._focusStarredGif=()=>{var e,t,a,r=null===(e=this._starredPreviewRef[this._selectionIndex])||void 0===e||null===(t=e.component)||void 0===t||null===(a=t.gifRef)||void 0===a?void 0:a.messagePreviewRef;r&&l.default.focus(r)},this.initSelection=()=>{this._selectionIndex=0,this._focusStarredGif()}}componentDidMount(){var e=h.default;this.props.listeners.add(e,"add remove reset",(()=>{this.forceUpdate()})),e.isSynced||e.sync()}getClientHeight(){return this._ref&&this._ref.clientHeight}hasGifs(){return Boolean(this._ref&&this._ref.childNodes.length)}isStarredGif(e){return!!e&&(!!this._ref&&this._ref.contains(e))}render(){var e={left:this.handleLeftArrow,right:this.handleRightArrow,enter:this.handleEnter},t=(0,i.default)(h.default.toArray(),"filehash");if(this._msgLength=t.length,0===t.length)return o.createElement("div",null);if(t.length<=4){var a=0,r=t.map(((e,t)=>(a+=Math.round(e.mediaData.aspectRatio*d.TARGET_GIF_HEIGHT),o.createElement(f.default,{key:e.filehash,ref:e=>this._starredPreviewRef[t]=e,msg:e,onSend:this.props.onSend}))));return a+=(r.length-1)*d.GAP_SIZE,o.createElement(u.default,{className:p.default.section,handlers:e},o.createElement("div",{ref:this.setRef,className:p.default.searchRow,style:{maxWidth:"".concat(a,"px")}},r))}var s=this._hasLeft(),l=this._hasRight(),c=s?this._onSlideLeft:null,_=l?this._onSlideRight:null,v=(0,n.default)(p.default.pager,p.default.pagerLeft,{[p.default.pagerDisabled]:!s}),g=(0,n.default)(p.default.pager,p.default.pagerRight,{[p.default.pagerDisabled]:!l}),E=o.createElement("div",{className:v,onClick:c},o.createElement(m.default,{name:"chevron-left-alt"})),S=o.createElement("div",{className:g,onClick:_},o.createElement(m.default,{name:"chevron-right-alt"})),C=t.slice(this.state.curIndex,this.state.curIndex+4).map(((e,t)=>o.createElement(f.default,{key:e.filehash,ref:e=>this._starredPreviewRef[t]=e,msg:e,onSend:this.props.onSend})));return o.createElement("div",{className:p.default.section},o.createElement(u.default,{onRef:this.setRef,className:p.default.searchRow,handlers:e},E,o.createElement("div",{className:p.default.body},C),S))}}g.displayName="StarredGifs";var E=(0,c.default)(g);t.default=class extends E{getClientHeight(){return this.getComponent().getClientHeight()}hasGifs(){return this.getComponent().hasGifs()}isStarredGif(e){return this.getComponent().isStarredGif(e)}}},55547:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(72779)),o=r(a(45484));class l extends i.PureComponent{constructor(...e){super(...e),this._handleMouseDown=e=>{e.stopPropagation()}}render(){return i.createElement("div",{className:(0,n.default)(o.default.container,this.props.className),onMouseDown:this._handleMouseDown},this.props.children)}}t.default=l,l.displayName="MenuContainer"},69132:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(55547)),o=r(a(91200)),l=r(a(44343)),d=r(a(71449));class u extends i.Component{render(){var e,t=-1,a=this.props.sectionIds.map(((e,a)=>{var r=!1;return e===this.props.selectedSectionId&&(this.props.showTabHighlight?(t=a,r=!0):t=-1),this.props.renderSectionTab(e,r)}));return i.createElement(l.default,{component:"div",handlers:(0,o.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext,down:this.props.onFocusLeave,left:this.props.onFocusPrev,right:this.props.onFocusNext,enter:this.props.onEnter,space:this.props.onEnter})},i.createElement(n.default,null,i.createElement(d.default,{numTabs:this.props.sectionIds.length,selectedTabIndex:t,animate:null===(e=this.props.showTabHighlight)||void 0===e||e}),a))}}t.default=u,u.displayName="PanelMenu"},59591:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var i=s(a(18149)),n=s(a(72779)),o=r(a(2784)),l=s(a(6660)),d=s(a(66049)),u={CAROUSEL:"CAROUSEL",CAROUSEL_END:"CAROUSEL_END",MENU:"MENU"};t.THEMES=u;class c extends o.PureComponent{constructor(...e){super(...e),this._setRefTab=e=>{var t,a;this._refTab=e,null===(t=(a=this.props).onRef)||void 0===t||t.call(a,e)},this._handleClick=e=>{this.props.onClick&&this.props.onClick(this.props.sectionId,e)}}focus(){this._refTab&&(this.hasFocus()||l.default.focus(this._refTab))}hasFocus(){return!!document.activeElement&&this._refTab===document.activeElement}_getStyle(e){return(0,i.default)(this._style,e)||(this._style=e),this._style}render(){var{theme:e,title:t}=this.props;return o.createElement("div",{ref:this._setRefTab,role:"button",className:(0,n.default)(d.default.tab,{[d.default.menu]:e===u.MENU,[d.default.carousel]:e===u.CAROUSEL||e===u.CAROUSEL_END,[d.default.carouselEnd]:e===u.CAROUSEL_END,[d.default.selected]:this.props.selected,[d.default.highlightOnFocus]:this.props.showFocusIndicator}),onClick:this._handleClick,style:this._getStyle({width:this.props.width,transform:this.props.transform}),title:t,tabIndex:"0"},this.props.children)}}t.default=c,c.displayName="MenuTab"},71449:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(2784)),n=r(a(72779)),o=r(a(17957)),l=r(a(66881));function d(e){var t=o.default.isRTL()?-1:1,a=-1===e.selectedTabIndex?-2:e.selectedTabIndex,r={width:"".concat(100/e.numTabs,"%"),transform:"translateX(".concat(100*a*t,"%)")};return i.createElement("div",{className:(0,n.default)(l.default.menuTabsMarker,{[l.default.hide]:e.hide,[l.default.animate]:e.animate}),style:r})}d.displayName="MenuTabMarker"},76097:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HEIGHT=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(50935)),d=s(a(38147)),u=s(a(6660)),c=s(a(44343)),h=s(a(17957)),f=s(a(73527)),p=a(66615),m=s(a(82631)),_=s(a(77626));t.HEIGHT=56;class v extends n.PureComponent{constructor(...e){super(...e),this.state={value:this.props.value||"",tabFocused:!!this.props.tabFocused},this._handleChange=e=>{var t=e.target.value;this.setState({value:t}),this.props.onChange&&this.props.onChange(t,e)},this._handleClearButtonClick=e=>{this.setState({value:""}),this.props.onChange&&this.props.onChange("",e)},this._handleUpKey=e=>{e.stopPropagation(),e.preventDefault(),this.props.onUpKey&&this.props.onUpKey(e)},this._handleDownKey=e=>{e.stopPropagation(),e.preventDefault(),this.props.onDownKey&&this.props.onDownKey(e)},this._handleEnterKey=e=>{e.preventDefault(),e.stopPropagation(),this.props.onEnterKey&&this.props.onEnterKey(e)},this._handleFocus=()=>{this.focus()},this._setRefInput=e=>{this._refInput=e},this._setRefInputContainer=e=>{this._refInputContainer=e}}static getDerivedStateFromProps(e){return{value:e.value,tabFocused:e.tabFocused}}focus(e){this._refInput&&(this.hasFocus()||(u.default.focus(this._refInput),e&&d.default.indicateFocus(this._refInputContainer)))}hasFocus(){return!!document.activeElement&&this._refInput===document.activeElement}render(){var e=null;return this.state.value&&!this.props.tabFocused&&(e=n.createElement("button",{className:f.default.cancelIcon,onClick:this._handleClearButtonClick},n.createElement(m.default,{name:"x-alt-small"}))),n.createElement(c.default,{handlers:{enter:this._handleEnterKey,up:this._handleUpKey,down:this._handleDownKey},"data-tab":l.default.TAB_ORDERS.PANEL_SEARCH_INPUT,className:(0,i.default)(f.default.searchRow,{[f.default.ffFix]:_.default.isGecko,[f.default.rowShadow]:this.props.shadow}),key:"search-input",onFocus:this._handleFocus},n.createElement("label",{ref:this._setRefInputContainer,className:f.default.rowInput},n.createElement("div",{className:f.default.inputContainer},n.createElement("input",{"data-a8n":o.default.key("input-emoji-search"),ref:this._setRefInput,className:(0,i.default)(f.default.inputEmojiSearch,p.SELECTABLE_INPUT_CSS_CLASS),type:"text",role:"searchbox",dir:h.default.isRTL()?"rtl":"ltr",value:this.props.tabFocused?"":this.state.value,title:this.props.label,placeholder:this.props.label,onMouseDown:e=>{e.stopPropagation()},onChange:this._handleChange}),e)))}}t.default=v,v.displayName="PanelSearchInput"},71595:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(6660)),l=s(a(18120)),d=s(a(25416)),u=s(a(20642)),c=s(a(48967)),h=r(a(76151)),f=s(a(45262)),p={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=p;class m extends n.PureComponent{constructor(...e){super(...e),this._refDiv=n.createRef(),this.getElement=()=>this._refDiv.current,this.state={hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0,menuShadow:!1,selectedStickerPackIndex:this._getInitialStickerPackIndex()},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._setRefMenu=e=>{this._refMenu=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusNext=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleContentFocusPrev=e=>{this._stopEvent(e),this._refMenu&&this._refMenu.focus()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=e=>{this.setState({selectedStickerPackIndex:e})},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleMenuFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleMenuFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleScroll=({scrollTop:e})=>{this._lastScrollTop=e,this.setState({menuShadow:e>0})},this._handleStickerPacksChange=()=>{this.setState({hasFetchedData:c.default.hasFetchedData(),hasStickers:c.default.length>0})}}_getInitialStickerPackIndex(){var{displayCache:e}=this.props;return e&&null!=e.selectedStickerPackIndex?e.selectedStickerPackIndex:0}componentDidMount(){this.props.listeners.add(c.default,"change:length",this._handleStickerPacksChange),this.props.listeners.add(c.default,"change:pageFetchStates",this._handleStickerPacksChange),this.props.listeners.uiIdle((()=>{this.restoreFocus(),c.default.fetchAt(0)}))}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedStickerPackIndex:this.state.selectedStickerPackIndex})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;o.default.focus(this._refEmptyContent)}else this._refMenu&&this._refMenu.focus()}))}_focusPrev(){this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){var e=l.default.isRecentStickersEnabled(),t=l.default.isStarredStickersEnabled(),a=(e?1:0)+(t?1:0),{selectedStickerPackIndex:r}=this.state;if(!e&&this.state.hasFetchedData&&!this.state.hasStickers)return n.createElement(h.StickerPanelEmpty,{containerClassName:d.default.panelContainer,onClick:this._handleContainerClick,onFocusPrev:this._handleEmptyFocusPrev,onFocusNext:this._handleEmptyFocusNext,onRef:this._setRefEmptyContent});var{displayLocation:s}=this.props,o=(0,i.default)(d.default.panelContainer,{[d.default.panelDropdown]:s===p.DROPDOWN});return n.createElement("div",{className:o,onClick:this._handleContainerClick,ref:this._refDiv},n.createElement(f.default,{ref:this._setRefMenu,displayLocation:s,onFocusBelow:this._handleMenuFocusBelow,onFocusNext:this._handleMenuFocusNext,onFocusPrev:this._handleMenuFocusPrev,onItemClick:this._handleItemClick,selectedStickerPackIndex:r,shadow:this.state.menuShadow,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}),n.createElement(h.default,{ref:this._setRefContent,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onSticker:this.props.onSticker,selectedStickerPackIndex:r,recentStickersEnabled:e,starredStickersEnabled:t,specialItemsCount:a}))}}m.defaultProps={displayLocation:p.DROPDOWN},m.displayName="StickerPanel";var _=(0,u.default)(m);t.default=class extends _{restoreFocus(){this.getComponent().restoreFocus()}}},60312:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(12097),l=s(a(6660)),d=s(a(25416)),u=s(a(69132)),c=s(a(72874)),h=s(a(65063)),f=s(a(17957)),p=s(a(20642)),m=r(a(59591)),_={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=_;var v=Array.from(o.StickerTabs.members());class g extends n.PureComponent{constructor(...e){var t;super(...e),this._refDiv=n.createRef(),this.getElement=()=>this._refDiv.current,this._refMenuTabs=new Map,this.state={menuShadow:!1,selectedTab:(null===(t=this.props.displayCache)||void 0===t?void 0:t.selectedTab)||o.StickerTabs.LOVE,focusedTabIndex:-1},this._setRefEmptyContent=e=>{this._refEmptyContent=e},this._setRefContent=e=>{this._refContent=e},this._handleContainerClick=e=>{this._stopEvent(e),this.restoreFocus()},this._handleContentFocusUp=e=>{var t;this._stopEvent(e),null===(t=this._refMenuTabs.get(this.state.selectedTab))||void 0===t||t.focus(),this.setState({focusedTabIndex:v.indexOf(this.state.selectedTab)})},this._handleContentFocusNext=e=>{this._stopEvent(e),this.props.onFocusNext()},this._handleContentFocusPrev=e=>{this._stopEvent(e),this.props.onFocusPrev()},this._handleEmptyFocusPrev=e=>{this._stopEvent(e),this._focusPrev()},this._handleEmptyFocusNext=e=>{this._stopEvent(e),this._focusNext()},this._handleItemClick=(e,t)=>{var a,r,s,i;null==t||t.preventDefault(),this.setState({selectedTab:e}),null===(a=this._refContent)||void 0===a||a.clearSearchText(),null===(r=(s=this.props).onChange)||void 0===r||r.call(s,""),null===(i=this._refContent)||void 0===i||i.focus()},this._handleMenuFocusBelow=e=>{this._stopEvent(e),this._refContent&&this._refContent.focus()},this._handleFocusEnter=()=>{var e=v[this.state.focusedTabIndex];this.setState({focusedTabIndex:-1}),this._handleItemClick(e)},this._handleMenuFocusPrev=e=>{var t;this._stopEvent(e);var a=(v.length+this.state.focusedTabIndex-1)%v.length,r=v[a];null===(t=this._refMenuTabs.get(r))||void 0===t||t.focus(),this.setState({focusedTabIndex:a})},this._handleMenuFocusNext=e=>{var t;this._stopEvent(e);var a=(this.state.focusedTabIndex+1)%v.length,r=v[a];null===(t=this._refMenuTabs.get(r))||void 0===t||t.focus(),this.setState({focusedTabIndex:a})},this._handleFocusLeave=e=>{this._stopEvent(e),this.restoreFocus(),this.setState({focusedTabIndex:-1})},this._handleScroll=({scrollTop:e})=>{this._lastScrollTop=e,this.setState({menuShadow:e>0})},this._handleSearchChange=(e,t)=>{var a,r;null===(a=(r=this.props).onChange)||void 0===a||a.call(r,e,t)},this._renderStickerTab=(e,t)=>{var a=function(e){switch(e){case o.StickerTabs.LOVE:return f.default.t(1365);case o.StickerTabs.GREETINGS:return f.default.t(1363);case o.StickerTabs.HAPPY:return f.default.t(1364);case o.StickerTabs.SAD:return f.default.t(1366);case o.StickerTabs.ANGRY:return f.default.t(1361);case o.StickerTabs.CELEBRATE:return f.default.t(1362)}}(e);return n.createElement(m.default,{onClick:this._handleItemClick,sectionId:e,selected:t,showFocusIndicator:-1!==this.state.focusedTabIndex,title:a,theme:m.THEMES.MENU,key:a,onRef:t=>{this._refMenuTabs.set(e,t)}},n.createElement("span",{className:c.default.tabText},a))}}componentWillUnmount(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,selectedTab:this.state.selectedTab})}restoreFocus(){this.props.listeners.uiIdle((()=>{if(this._refContent)this._refContent.focus();else if(this._refEmptyContent){if(document.activeElement===this._refEmptyContent)return;l.default.focus(this._refEmptyContent)}}))}_focusPrev(){this.props.onFocusPrev&&this.props.onFocusPrev()}_focusNext(){this.props.onFocusNext&&this.props.onFocusNext()}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}render(){var e,{displayLocation:t}=this.props,a=(0,i.default)(d.default.panelContainer,{[d.default.panelDropdown]:t===_.DROPDOWN});return n.createElement("div",{className:a,ref:this._refDiv},n.createElement(u.default,{selectedSectionId:this.state.selectedTab,sectionIds:Array.from(o.StickerTabs.members()),renderSectionTab:this._renderStickerTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleMenuFocusPrev,onFocusNext:this._handleMenuFocusNext,onEnter:this._handleFocusEnter,onFocusLeave:this._handleFocusLeave}),n.createElement(h.default,{ref:this._setRefContent,onFocusUp:this._handleContentFocusUp,onFocusNext:this._handleContentFocusNext,onFocusPrev:this._handleContentFocusPrev,onScroll:this._handleScroll,onChange:this._handleSearchChange,onSticker:this.props.onSticker,defaultSearchText:this.props.defaultSearchText,selectedTab:this.state.selectedTab,listeners:this.props.listeners}))}}g.defaultProps={displayLocation:_.DROPDOWN},g.displayName="StickerPanel";var E=(0,p.default)(g);t.default=class extends E{restoreFocus(){this.getComponent().restoreFocus()}}},76151:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelEmpty=v,t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(91200)),l=s(a(44343)),d=s(a(15727)),u=s(a(17957)),c=s(a(40210)),h=s(a(59984)),f=s(a(49197)),p=s(a(2187)),m=s(a(15327));class _ extends n.PureComponent{constructor(...e){super(...e),this._handleGridFocusPrev=()=>{this.props.onFocusPrev()},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._onStickerFromRecent=e=>{this.props.onSticker(e,{stickerSendOrigin:c.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_RECENTS})},this._onStickerFromStarred=e=>{this.props.onSticker(e,{stickerSendOrigin:c.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_FAVORITES})}}focus(){this._refScrollGrid&&this._refScrollGrid.focus()}_getContent(){return this.props.recentStickersEnabled&&0===this.props.selectedStickerPackIndex?n.createElement(f.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromRecent,onStickerEnter:this._onStickerFromRecent}):this.props.starredStickersEnabled&&1===this.props.selectedStickerPackIndex?n.createElement(m.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this._onStickerFromStarred,onStickerEnter:this._onStickerFromStarred}):n.createElement(p.default,{ref:this._setRefScrollGrid,onFocusPrev:this._handleGridFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onSticker,onStickerEnter:this.props.onSticker,selectedStickerPackIndex:this.props.selectedStickerPackIndex-this.props.specialItemsCount})}render(){var e=(0,i.default)(d.default.container);return n.createElement(l.default,{className:e,handlers:(0,o.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext})},this._getContent())}}function v({containerClassName:e,onClick:t,onFocusPrev:a,onFocusNext:r,onRef:s}){return n.createElement("div",{className:(0,i.default)(e,d.default.emptyContainer),onClick:t},n.createElement("div",{className:d.default.emptySticker,style:{backgroundImage:"url(".concat(h.default,")")}}),n.createElement(l.default,{handlers:{"shift+tab":a,tab:r},onRef:s},n.createElement("p",{className:d.default.emptyText},u.default.t(1360))))}t.default=_,_.displayName="StickerPanelContent",v.displayName="StickerPanelEmpty"},65063:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(70417)),o=s(a(45455)),l=s(a(12436)),d=s(a(72779)),u=r(a(2784)),c=a(12097),h=s(a(91200)),f=s(a(44343)),p=s(a(15727)),m=s(a(17957)),_=s(a(40210)),v=s(a(76097)),g=s(a(18224)),E=s(a(74824));function S(){var e=(0,i.default)(["_renderStickerScrollGrid attempted with an invalid selectedTab: ",""]);return S=function(){return e},e}class C extends u.PureComponent{constructor(...e){super(...e),this._lastScrollChange=0,this._lastScrollTop=0,this._fastScroll=!1,this.state={searchText:this.props.defaultSearchText||"",showSearchInput:!0,scrolledToTop:!0},this._handleScrollReset=()=>{null!=this._refScrollContainer&&(this._refScrollContainer.scrollTop=0,this._lastScrollTop=0,this._lastScrollChange=0)},this._handleGridFocusPrev=()=>{this.props.onFocusPrev()},this._handleGridFocusNext=()=>{this.props.onFocusNext()},this._handleSearchChange=(e,t)=>{this.props.onChange&&this.props.onChange(e,t),this.setState({searchText:e})},this._handleContainerClick=e=>{this._stopEvent(e),this._focusSearchInput()},this._renderSearchInput=()=>{var e=null;this.state.showSearchInput&&(e=u.createElement(v.default,{label:m.default.t(1283),onChange:this._handleSearchChange,value:this.state.searchText||"",shadow:!this.state.scrolledToTop,ref:this._setRefSearchInput,onUpKey:this.props.onFocusUp,onDownKey:this._focusScrollGrid}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return u.createElement(E.default,{transitionName:t},e)},this._handleScroll=(0,l.default)((()=>{var e=this._refScrollContainer;if(e){this.props.onScroll&&this.props.onScroll(e);var t=e.scrollTop,a=t<=0,r=this._lastScrollTop-t;if(r===c.INPUT_BAR_TOTAL_HEIGHT)return this._lastScrollChange=r,void(this._lastScrollTop=t);var s=Math.abs(r)>c.INPUT_BAR_SCROLL_SENSITIVITY;this._fastScroll=Math.abs(r)>c.INPUT_BAR_SCROLL_FAST;var i={};r<0?this.state.showSearchInput&&(t>c.INPUT_HIDE_POINT&&s||this._lastScrollTop<c.INPUT_HIDE_POINT&&t>=c.INPUT_HIDE_POINT)&&(i.showSearchInput=!1):this.state.showSearchInput||(s||t<c.INPUT_SHOW_POINT)&&(i.showSearchInput=!0),this._lastScrollTop=t,this._lastScrollChange=r,a!==this.state.scrolledToTop&&(i.scrolledToTop=a),(0,o.default)(i)||this.setState((0,n.default)({},i))}}),c.SCROLL_THROTTLE_TIME),this._focusSearchInput=()=>{if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(()=>this._focusSearchInput()));this._refSearchInput.focus(!1)},this._focusScrollGrid=()=>{var e;null===(e=this._refScrollGrid)||void 0===e||e.focus()},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._setRefSearchInput=e=>{this._refSearchInput=e},this._onStickerSend=e=>{var t=this.state.searchText.trim()?_.default.STICKER_SEND_ORIGIN_TYPE.STICKER_SEARCH:_.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_EMOTION;this.props.onSticker(e,{stickerSendOrigin:t})},this._setScrollContainerRef=e=>{this._refScrollContainer=e}}focus(){var e;null===(e=this._refSearchInput)||void 0===e||e.focus()}clearSearchText(){this.setState({searchText:""})}componentDidMount(){this.props.listeners.uiIdle((()=>{this._focusSearchInput()}))}componentDidUpdate(e){this.props.selectedTab!==e.selectedTab&&this.setState({searchText:""})}_stopEvent(e){e&&(e.preventDefault(),e.stopPropagation())}_renderStickerScrollGrid(){return null!=(0,c.convertTabToMood)(this.props.selectedTab)?u.createElement(g.default,{ref:this._setRefScrollGrid,onFocusPrev:this._focusSearchInput,onStickerClick:this._onStickerSend,searchText:this.state.searchText.trim(),selectedTab:this.props.selectedTab,resetScroll:this._handleScrollReset}):(__LOG__(4,void 0,new Error,!0)(S(),this.props.selectedTab),SEND_LOGS("_renderStickerScrollGrid attempted with an invalid selectedTab"),null)}render(){var e=(0,d.default)(p.default.containerSearch);return u.createElement(f.default,{className:e,handlers:(0,h.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext}),onClick:this._handleContainerClick},u.createElement("div",{className:p.default.bodyContainer},this._renderSearchInput(),u.createElement("div",{className:(0,d.default)(p.default.contentContainer,p.default.contentContainerSearch),onScroll:this._handleScroll,ref:this._setScrollContainerRef},this._renderStickerScrollGrid())))}}t.default=C,C.displayName="StickerPanelContentMd"},8315:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerItem=void 0;var i=s(a(25291)),n=r(a(2784)),o=s(a(6660)),l=s(a(44343)),d=s(a(40207)),u=a(64658),c=s(a(82562)),h=s(a(94034));class f extends n.PureComponent{constructor(...e){super(...e),this.state={isVisible:!1},this._downloadMedia=()=>this.props.sticker.downloadMedia(),this._downloadOnce=(0,i.default)(this._downloadMedia),this._handleClick=e=>{var t=this.props.onClick;t&&t((0,u.unproxy)(this.props.sticker),e)},this._handleEnterKey=e=>{var t=this.props.onEnter;t&&t((0,u.unproxy)(this.props.sticker),e)},this._setIntersectionObserver=e=>{e&&null==this._intersectionObserver&&(this._intersectionObserver=new IntersectionObserver(this._onVisibilityChange,{root:null,rootMargin:"10px",threshold:0}),this._intersectionObserver.observe(e))},this._onVisibilityChange=e=>{var t;e[0].isIntersecting||(null===(t=e[1])||void 0===t?void 0:t.isIntersecting)?(this._downloadOnce(),this.setState({isVisible:!0})):this.setState({isVisible:!1})},this._onRef=e=>{this._refContainer||(this._refContainer=e,this._setIntersectionObserver(e))}}componentWillUnmount(){this._intersectionObserver&&this._intersectionObserver.disconnect()}focus(){this._refContainer&&(this.hasFocus()||o.default.focus(this._refContainer))}getOffsetTop(){return this._refContainer?this._refContainer.offsetTop:0}hasFocus(){return!!this._refContainer&&this._refContainer===document.activeElement}render(){var e=this.props.sticker;return n.createElement(l.default,{onRef:this._onRef,className:h.default.container,handlers:{enter:this._handleEnterKey}},n.createElement("div",{className:h.default.border},this.state.isVisible&&n.createElement(c.default,{mediaData:e.mediaData,onClick:this._handleClick,theme:"stickerPanel",loopAnimation:!0,downloadMedia:this._downloadOnce})))}}t.StickerItem=f,f.CONCERNS={sticker:["id","mediaData"]},f.displayName="StickerItem";var p=(0,d.default)(f,f.CONCERNS);t.default=class extends p{focus(){this.getComponent().focus()}getOffsetTop(){return this.getComponent().getOffsetTop()}hasFocus(){return this.getComponent().hasFocus()}}},49197:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(61258)),n=s(a(72779)),o=r(a(2784)),l=s(a(15727)),d=s(a(17957)),u=r(a(49569)),c=s(a(72424)),h=s(a(86484)),f=s(a(59984)),p=s(a(8315)),m=s(a(11992)),_=s(a(68830));class v extends o.PureComponent{constructor(...e){super(...e),this.state={isCollectionReady:u.default.isSynced()},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){this.state.isCollectionReady||u.default.sync().then((()=>{this.setState({isCollectionReady:!0})}))}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.state.isCollectionReady?0===u.default.length?o.createElement("div",{className:(0,n.default)(l.default.emptyContainer,c.default.stickerSearchEnabled?l.default.panelHeight:null)},o.createElement("div",{className:l.default.emptySticker,style:{backgroundImage:"url(".concat(f.default,")")}}),o.createElement("p",{className:l.default.emptyText},d.default.t(1367))):o.createElement(_.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:u.default.toArray()}):o.createElement("div",{className:m.default.container},(0,i.default)(u.RECENT_STICKERS_LIMIT,(e=>o.createElement(p.default,{key:e,sticker:h.default.getPlaceholder()}))))}}t.default=v,v.displayName="StickerPackStickersRecent"},2187:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(17957)),o=r(a(20642)),l=r(a(40210)),d=s(a(48967)),u=r(a(16473)),c=r(a(2302));class h extends i.PureComponent{constructor(e){super(e),this._handleRetryClick=()=>{d.default.fetchAt(this.props.selectedStickerPackIndex,!0)},this._handleStickerPackPageFetchState=(e,t)=>{d.default.pageWithIndex(this.props.selectedStickerPackIndex)===e&&(t?this.forceUpdate():d.default.fetchAt(this.props.selectedStickerPackIndex))},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._renderError=e=>i.createElement("div",{className:u.default.container},i.createElement("div",null,n.default.t(930)),i.createElement("div",{"data-id":"retry",className:u.default.retryButton,onClick:e},n.default.t(1257).toUpperCase())),d.default.fetchAt(this.props.selectedStickerPackIndex)}componentDidMount(){this.props.listeners.add(d.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentDidUpdate(e){var{selectedStickerPackIndex:t}=this.props,{selectedStickerPackIndex:a}=e;if(t!==a){var r=d.default.pageWithIndex(t);d.default.pageFetchStates[r]===d.PAGE_FETCH_STATE.ERROR&&d.default.fetchAt(t,!0)}}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){var e=d.default.at(this.props.selectedStickerPackIndex);if(!e)return null;var t=d.default.pageWithIndex(this.props.selectedStickerPackIndex);if(d.default.pageFetchStates[t]===d.PAGE_FETCH_STATE.ERROR)return this._renderError(this._handleRetryClick);var a={stickerIsFirstParty:e.isFirstParty,stickerSendOrigin:l.default.STICKER_SEND_ORIGIN_TYPE.STICKER_PICKER_TAB_PACK};return i.createElement(c.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:e=>this.props.onStickerClick(e,a),onStickerEnter:e=>this.props.onStickerEnter(e,a),stickers:e.stickers,renderError:this._renderError})}}h.displayName="StickerPackStickersScrollGrid";var f=(0,o.default)(h);t.default=class extends f{focus(e){this.getComponent().focus(e)}}},15327:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(61258)),n=s(a(72779)),o=r(a(2784)),l=s(a(15727)),d=s(a(17957)),u=s(a(20642)),c=s(a(72259)),h=s(a(72424)),f=r(a(47805)),p=s(a(86484)),m=s(a(59984)),_=s(a(8315)),v=s(a(11992)),g=s(a(68830));class E extends o.PureComponent{constructor(...e){super(...e),this.state={isCollectionReady:f.default.isSynced(),stickers:f.default.toArray(),isLoadingMore:!1},this.onScroll=e=>{var{scrollTop:t,clientHeight:a,scrollHeight:r}=e;if(this.props.onScroll&&this.props.onScroll(e),r-a-t<200&&!this.state.isLoadingMore&&f.default.canLoadMore()){var s=f.default.getRemaining(),n=Math.min(f.STARRED_STICKERS_PAGE_SIZE,s),o=(0,i.default)(n,(()=>p.default.getPlaceholder()));this.setState({isLoadingMore:!0,stickers:this.state.stickers.concat(o)}),f.default.syncNextPage()}},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){this.state.isCollectionReady||f.default.sync().checkpoint(this.props.rejectOnUnmount()).then((()=>{this.setState({isCollectionReady:!0})})),this.props.listeners.add(f.default,"add remove",(()=>{this.setState({stickers:f.default.toArray()})})),this.props.listeners.add(f.default,"sync",(()=>{this.setState({stickers:f.default.toArray(),isCollectionReady:!0})})),this.props.listeners.add(f.default,"next_page_sync",(()=>{this.setState({stickers:f.default.toArray(),isLoadingMore:!1})}))}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.state.isCollectionReady?0===f.default.length?o.createElement("div",{className:(0,n.default)(l.default.emptyContainer,h.default.stickerSearchEnabled?l.default.panelHeight:null)},o.createElement("div",{className:l.default.emptySticker,style:{backgroundImage:"url(".concat(m.default,")")}}),o.createElement("p",{className:l.default.emptyText},d.default.t(1368))):o.createElement(g.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:this.state.stickers}):o.createElement("div",{className:v.default.container},(0,i.default)(f.STARRED_STICKERS_PAGE_SIZE,(e=>o.createElement(_.default,{key:e,sticker:p.default.getPlaceholder()}))))}}E.displayName="StickerPackStickersStarred";var S=(0,u.default)((0,c.default)(E));t.default=class extends S{focus(e){this.getComponent().focus(e)}}},18224:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPanelNoResults=E,t.default=void 0;var i=s(a(19976)),n=s(a(52954)),o=s(a(54073)),l=r(a(2784)),d=a(12097),u=s(a(17957)),c=s(a(20642)),h=s(a(59984)),f=s(a(84517)),p=s(a(7915)),m=s(a(68830));function _(){var e=(0,i.default)(["Sticker search promise failed"]);return _=function(){return e},e}class v extends l.PureComponent{constructor(...e){super(...e),this._debouncedStickerUpdater=(0,o.default)(this._handleStickersUpdate,250).bind(this),this._debouncedSearchHandler=(0,o.default)(this._handleStickerSearch,250),this.state={stickers:[]},this._setRefScrollGrid=e=>{this._refScrollGrid=e}}componentDidMount(){if(this.props.searchText)this._handleStickerSearch(this.props.searchText);else if(d.ValidMoods.isValid(this.props.selectedTab)){var e=(0,d.convertTabToMood)(this.props.selectedTab);null!=e&&f.default.searchMood(e)}this.props.listeners.add(f.default,"add remove reset",this._debouncedStickerUpdater),f.default.hasFetchedData()&&this._handleStickersUpdate()}componentDidUpdate(e){if(this.props.selectedTab!==e.selectedTab){var t=(0,d.convertTabToMood)(this.props.selectedTab);null!=t&&f.default.searchMood(t),this._handleStickersUpdate()}if(""===this.props.searchText){this._debouncedSearchHandler.cancel();var a=(0,d.convertTabToMood)(this.props.selectedTab);null!=a&&f.default.searchMood(a)}else this.props.searchText!==e.searchText&&this._debouncedSearchHandler(this.props.searchText)}_handleStickersUpdate(){this.setState({stickers:f.default.toArray()}),this.props.resetScroll()}_handleStickerSearch(e){var t=this;return(0,n.default)((function*(){t.props.resetScroll();try{yield f.default.search(e)}catch(e){__LOG__(4,void 0,new Error,!0)(_()),SEND_LOGS(e)}}))()}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}render(){return this.props.searchText&&!1===f.default.isFetchingData()&&0===f.default.length?l.createElement(E,null):l.createElement(m.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerClick,stickers:this.state.stickers,theme:"searchable"})}}v.displayName="StickerPackStickersScrollGrid";var g=(0,c.default)(v);function E(){return l.createElement("div",{className:p.default.emptyContainer},l.createElement("div",{className:p.default.emptySticker,style:{backgroundImage:"url(".concat(h.default,")")}}),l.createElement("p",{className:p.default.emptyText},u.default.t(1133)))}t.default=class extends g{focus(e){this.getComponent().focus(e)}},E.displayName="StickerPanelNoResults"},2302:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(61258)),n=r(a(2784)),o=s(a(20642)),l=s(a(86484)),d=a(93771),u=s(a(8315)),c=s(a(11992)),h=s(a(68830));class f extends n.PureComponent{constructor(e){super(e),this._handleFetchState=()=>{this.forceUpdate()},this._handleRetryClick=()=>{this.props.stickers.fetch(!0)},this._setRefScrollGrid=e=>{this._refScrollGrid=e},this._fetchStickers(this.props.stickers)}componentDidUpdate(e){var t=e.stickers,a=this.props.stickers;this._handleStickersChange(t,a)}focus(e){this._refScrollGrid&&this._refScrollGrid.focus(e)}_fetchStickers(e,t){this.props.listeners.add(e,"change:fetchState",this._handleFetchState),e.fetch(t)}_handleStickersChange(e,t){if(e!==t){e&&this.props.listeners.remove(e,"change:fetchState",this._handleFetchState);var a=t.fetchState===d.FETCH_STATE.ERROR;this._fetchStickers(t,a),this._refScrollGrid&&this._refScrollGrid.scrollToTop()}}render(){var{stickers:e}=this.props;if(e.fetchState===d.FETCH_STATE.ERROR)return this.props.renderError(this._handleRetryClick);if(!e.fetchState||e.fetchState===d.FETCH_STATE.PENDING){var t=l.default.getPlaceholder();return n.createElement("div",{className:c.default.container},(0,i.default)(24,(e=>n.createElement(u.default,{key:e,sticker:t}))))}return n.createElement(h.default,{ref:this._setRefScrollGrid,onFocusPrev:this.props.onFocusPrev,onScroll:this.props.onScroll,onStickerClick:this.props.onStickerClick,onStickerEnter:this.props.onStickerEnter,stickers:this.props.stickers.toArray()})}}f.displayName="StickersScrollGrid";var p=(0,o.default)(f);t.default=class extends p{focus(e){this.getComponent().focus(e)}}},68830:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(72779)),o=r(a(44343)),l=r(a(8315)),d=a(70275),u=r(a(11992)),c=r(a(20932));class h extends i.PureComponent{constructor(...e){super(...e),this._stickerItems=new Map,this._setRefContainer=e=>{this._refContainer=e,null!=this.props.onRef&&this.props.onRef(e)},this._handleStickerArrowDown=e=>{e.stopPropagation(),e.preventDefault();var t=this._getActiveStickerItemIndex(),a=this._getNumCols(),r=Math.min(t+a,this._stickerItems.size-1);Math.floor(t/a)!==Math.floor(r/a)&&this._incActiveIndex(a)},this._handleStickerArrowLeft=e=>{e.stopPropagation(),e.preventDefault(),this._decActiveIndex(1)},this._handleStickerArrowRight=e=>{e.stopPropagation(),e.preventDefault(),this._incActiveIndex(1)},this._handleStickerArrowUp=e=>{e.stopPropagation(),e.preventDefault(),this._decActiveIndex(this._getNumCols())},this._handleScroll=()=>{this.props.onScroll&&this._refContainer&&this.props.onScroll(this._refContainer)},this._setRefContainer=e=>{this._refContainer=e}}focus(e){var t=e||0;t=Math.min(t,this._stickerItems.size),t=Math.max(t,0);var a=this._stickerItems.get(t);a&&a.focus()}scrollToTop(){this._refContainer&&(this._refContainer.scrollTop=0)}_decActiveIndex(e){this._incActiveIndex(0-e)}_getActiveStickerItemIndex(){for(var e=this._stickerItems.size,t=0;t<e;t++){var a=this._stickerItems.get(t);if(a&&a.hasFocus())return t}return-1}_getNumCols(){var e=this._stickerItems.get(0);if(!e)return 0;for(var t=e.getOffsetTop(),a=this._stickerItems.size,r=0;r<a;r++){var s=this._stickerItems.get(r);if(s&&s.getOffsetTop()!==t)return r}return this._stickerItems.size}_incActiveIndex(e){if(0!==e){var t=this._getActiveStickerItemIndex();if(-1!==t){var a=t+e;if(a<0){if(!this.props.onFocusPrev)return;this.props.onFocusPrev()}else{a=Math.min(a,this._stickerItems.size-1);var r=this._stickerItems.get(a);r&&r.focus()}}}}_renderStickers(){return this.props.stickers.map(((e,t)=>{var a=e.isPlaceholder?"".concat(d.PRE_PLACEHOLDER_ID).concat(t):e.id;return i.createElement(l.default,{key:a,onClick:this.props.onStickerClick,onEnter:this.props.onStickerEnter,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{e?this._stickerItems.set(t,e):this._stickerItems.delete(t)})),sticker:e})}))}render(){var e=(0,n.default)(u.default.container,"searchable"===this.props.theme&&c.default.unscrollable);return i.createElement(o.default,{onRef:this._setRefContainer,className:e,handlers:{up:this._handleStickerArrowUp,down:this._handleStickerArrowDown,left:this._handleStickerArrowLeft,right:this._handleStickerArrowRight},onScroll:this._handleScroll},this._renderStickers())}}t.default=h,h.displayName="StickersScrollGridPresentational"},45262:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32520)),l=s(a(91200)),d=s(a(6660)),u=s(a(44343)),c=s(a(92603)),h=s(a(20642)),f=r(a(48967)),p=s(a(93736)),m=s(a(82631));class _ extends n.PureComponent{constructor(...e){super(...e),this.state={numItems:this.props.specialItemsCount+f.default.length},this._handleLengthChange=()=>{this.setState({numItems:this.props.specialItemsCount+f.default.length})},this._setRefContainer=e=>{this._refContainer=e},this._renderItem=e=>this.props.recentStickersEnabled&&0===e?n.createElement(m.default,{name:"panel-recent"}):this.props.starredStickersEnabled&&1===e?n.createElement(m.default,{name:"panel-starred"}):n.createElement(p.default,{index:e-this.props.specialItemsCount})}componentDidMount(){this.props.listeners.add(f.default,"change:length",this._handleLengthChange),this._handleLengthChange()}focus(){this._refContainer&&(this.hasFocus()||d.default.focus(this._refContainer))}hasFocus(){return!!this._refContainer&&this._refContainer===document.activeElement}render(){var{numItems:e}=this.state,{displayLocation:t}=this.props,a=f.PAGE_SIZE_COMPOSE_BOX;return"DROPDOWN"===t&&(a=f.PAGE_SIZE_POPUP),n.createElement(u.default,{onRef:this._setRefContainer,handlers:(0,l.default)({down:this.props.onFocusBelow,"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext})},n.createElement(o.default,{className:(0,i.default)({[c.default.shadow]:this.props.shadow}),numItems:e,numColumns:a,onItemClick:this.props.onItemClick,renderItem:this._renderItem,selectedIndex:this.props.selectedStickerPackIndex}))}}_.displayName="StickerPanelMenu";var v=(0,h.default)(_);t.default=class extends v{focus(){this.getComponent().focus()}}},96780:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(27536)),o=r(a(58881));function l({id:e,name:t,url:a}){return i.createElement("div",{className:o.default.container,"data-id":e},i.createElement(n.default,{fallbackSVG:"sticker",wrapOptions:{wrapperClassName:o.default.stickerPackIconWrapper,centerWrapperChild:!0},className:o.default.stickerPackContainer,size:"NONE",roundContainer:!1,imgProps:{src:a||"",alt:t,draggable:!1}}))}l.displayName="StickerPackIcon";var d=l;t.default=d},93736:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(20642)),o=r(a(48967)),l=r(a(76261)),d=r(a(35617)),u=r(a(82631));class c extends i.PureComponent{constructor(e){super(e),this._handleStickerPackPageFetchState=(e,t)=>{if(!this._unmounted){var{index:a}=this.props;o.default.pageWithIndex(a)===e&&(t||o.default.fetchAt(a),this.setState({stickerPack:o.default.at(a)}))}},o.default.fetchAt(e.index),this.state={stickerPack:o.default.at(e.index)},this._unmounted=!1}componentDidMount(){this.props.listeners.add(o.default,"change:pageFetchStates",this._handleStickerPackPageFetchState)}componentWillUnmount(){this._unmounted=!0}render(){var{stickerPack:e}=this.state;return e?e.isPlaceholder?i.createElement(u.default,{name:"sticker"}):e.isFirstParty?i.createElement(l.default,{stickerPack:e}):i.createElement(d.default,{stickerPack:e,mediaData:e.mediaData}):null}}c.displayName="StickerPackIconAtIndex";var h=(0,n.default)(c);t.default=h},76261:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(40207)),o=r(a(96780));class l extends i.PureComponent{render(){var{id:e,name:t,url:a}=this.props.stickerPack;return i.createElement(o.default,{id:e,name:t,url:a})}}l.CONCERNS={stickerPack:["id","name","url"]},l.displayName="StickerPackIconFirstParty";var d=(0,n.default)(l,l.CONCERNS);t.default=d},35617:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(19125)),o=r(a(40207)),l=r(a(96780));class d extends i.PureComponent{constructor(...e){super(...e),this._downloadMedia=()=>this.props.stickerPack.downloadMedia(),this._renderStickerPackIcon=e=>{var{id:t,name:a}=this.props.stickerPack;return i.createElement(l.default,{id:t,name:a,url:e})},this._renderPlaceholder=()=>this._renderStickerPackIcon(null)}componentDidMount(){this._downloadMedia()}render(){return i.createElement(n.default,{mediaData:this.props.mediaData,placeholderRenderer:this._renderPlaceholder,downloadMedia:this._downloadMedia},this._renderStickerPackIcon)}}d.CONCERNS={stickerPack:["id","name"],mediaData:["renderableUrl","mediaStage"]},d.displayName="StickerPackIconThirdParty";var u=(0,o.default)(d,d.CONCERNS);t.default=u},81059:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseInput=void 0;var i=s(a(58527)),n=s(a(72779)),o=r(a(2784)),l=s(a(32960)),d=s(a(11896)),u=r(a(82704)),c=s(a(50935)),h=s(a(93735)),f=s(a(81646)),p=s(a(24529)),m=s(a(19117)),_=s(a(81857)),v=s(a(28515)),g=s(a(6660)),E=s(a(96697)),S=s(a(44343)),C=s(a(17957)),y=s(a(61941)),b=s(a(21193)),T=a(66615),M=s(a(34293)),N=s(a(95580)),I=s(a(53633)),P=a(86145);class A extends o.Component{constructor(...e){super(...e),this.__changeDueToReset=!1,this.__isMounted=!0,this.__isComposing=!1,this.containerRef=null,this.selection=this.props.initialSelection,this.state={direction:D(this.props.initialValue||""),focused:!1,value:this.props.initialValue||""},this.trigger=(e,t=[])=>{var a=this._hookMap[e];a&&a(...t)},this.serializeTextBeforeCursor=()=>(0,N.default)(this.refInput||document.createElement("span"),window.getSelection()),this._hasFocus=(e=this.refInput)=>{if(!e)return!1;var{activeElement:t}=document;return!!t&&(t===e||e.contains(t))},this.forceFocus=(e=!1)=>{if(!this.props.readOnly&&this.__isMounted){var{refInput:t}=this;if(t){var a=this._hasFocus(t);if(!a||e)if(a||g.default.focus(t),!e&&this.selection)this._restoreSelection(this.selection);else{var r=window.getSelection();r&&r.rangeCount&&(r.selectAllChildren(t),r.collapseToEnd())}}}},this.focus=(e=!1)=>{this._hasFocus()&&!e||setTimeout((()=>{this.forceFocus(e)}),0)},this.reset=(e="")=>{this.__changeDueToReset=!0,this.selection=null,this._setValue(e)},this._setValue=e=>{if(e!==this.state.value){var t=e||"";this.setState({value:t,direction:D(t)},(()=>{this.trigger(E.default.CHANGE,[t]),this.props.onChange&&this.props.onChange(t)}))}},this.onSelect=()=>{this.selection=this.getSelection(),this.props.onSelect&&this.props.onSelect(this.selection)},this.shouldComponentUpdate=(e,{value:t,focused:a,direction:r})=>{null!=this.refInput&&this.props.readOnly!==e.readOnly&&this.refInput.setAttribute("contentEditable",String(!e.readOnly));var s=w(e);if(null!=this.refInput&&s!==w(this.props)&&(null==s?this.refInput.removeAttribute("data-tab"):this.refInput.setAttribute("data-tab",s.toString())),a!==this.state.focused&&this.containerRef&&(a?this.containerRef.classList.add("focused"):this.containerRef.classList.remove("focused")),r!==this.state.direction&&this.refInput&&this.refInput.setAttribute("dir",r),this.__changeDueToReset){this.__changeDueToReset=!1;var i=(0,I.default)(t,this._plugins);this.refInput&&(this.refInput.innerHTML=i)}var n=!t.length&&!!this.state.value.length,o=!!t.length&&!this.state.value.length;if(!o&&!n)return!1;var l=o?"hidden":"visible";return this._refPlaceholder&&this._refPlaceholder.setAttribute("style","visibility: ".concat(l)),!1},this.componentWillUnmount=()=>{this.__isMounted=!1,this.refInput&&(this.refInput.restoreFocus=null)},this.onInput=()=>{var{refInput:e}=this,t=e?(0,M.default)(e,this._plugins):"",a=this.props.multiline&&"\n"!==t?t:t.replace(/\n$/,""),{maxLength:r}=this.props;if(null!=r&&(0,P.numCodepoints)(a)>r){var s=this.selection;return e&&(e.innerHTML=(0,I.default)(this.state.value,this._plugins)),void(s&&this._restoreSelection(s))}this.trigger(E.default.INPUT),this._setValue(a)},this.onPaste=e=>{e.preventDefault(),e.stopPropagation();var t=new v.default(e.clipboardData),{onFiles:a,onTextPaste:r}=this.props;t.hasFiles()&&a&&a(t)||t.hasText()&&t.getText(this.props.textPasteMimePriority).then((e=>{if(e&&(!r||!r(e))){var t=this.length-this._selectionLength,{maxLength:a}=this.props;if(null!=a&&t+(0,P.numCodepoints)(e)>a){var{onMaxPasteExceeded:s}=this.props;return s&&s()}this.replaceSelection(e)}}))},this._onBeforeInput=e=>{if(this.props.readOnly)return!0;var{maxLength:t}=this.props;if(null==t)return!1;var a=e.data.charCodeAt(0);if(8===a||127===a)return!1;var r=t+this._selectionLength-this.length;return(0,P.numCodepoints)(e.data)>r},this.onKeyDown=e=>!(!this.props.onKeyDown||!this.props.onKeyDown(e))||13===e.which&&(this.props.multiline&&function(e){return 13===e.which&&(e.shiftKey||e.altKey||e.ctrlKey)}(e)?(""===this.state.value.trim()&&this.cursorIsAtStart()||this._insertNewLineAtSelection(),!0):(this.props.onEnter&&this.props.onEnter(e),!0)),this.componentDidMount=()=>{this.refInput&&(this.refInput.restoreFocus=this.focus),this.trigger(E.default.MOUNT)},this.onBlur=e=>{this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this._onCompositionStart=()=>!(this.__isComposing=!0),this._onCompositionEnd=()=>this.__isComposing=!1,this.setRefContainer=e=>{this.containerRef=e},this._setRefPlaceholder=e=>{this._refPlaceholder=e},this.setRefInput=e=>{this.refInput=e},this.getRefInput=()=>this.refInput}get value(){return this.state.value}get _selectionLength(){if(this.props.readOnly)return 0;this._hasFocus(this.refInput)||g.default.focus(this.refInput);var e=window.getSelection();return e.rangeCount?(0,P.numCodepoints)((0,M.default)(e.getRangeAt(0).cloneContents(),this._plugins)):0}get length(){return(0,P.numCodepoints)(this.state.value)}serialize(e){var t=e||this.state.value;return this._plugins.reduce((([e,t],a)=>a.serialize?a.serialize(e,t):[e,t]),[t,{}])}_adjustScrollAfterModification(e,t,a){var{scrollHeight:r,clientHeight:s}=e;r<=s||(e.scrollTop=(a||0)+(r-t))}_ensureFocus(e){this._hasFocus(e)||(g.default.focus(e),this.selection&&this._restoreSelection(this.selection))}replaceSelection(e,t=!1){var{refInput:a}=this;if(!this.props.readOnly&&null!=a){this._ensureFocus(a);var r=this._trimToFit(e);if(r.length||t){this.props.multiline||(r=r.replace(/\r?\n/g,""));var s=window.getSelection().getRangeAt(0);(function({startOffset:e,startContainer:t},a){return 0===e&&t!==a&&(!(!t||!t.previousSibling)&&"\n"===t.previousSibling.textContent.slice(-1))})(s,a)&&(r="\n".concat(r)),s.deleteContents();var{scrollHeight:i,scrollTop:n}=a;document.execCommand("insertHTML",!1,(0,I.default)(r,this._plugins)),this.onSelect(),this._adjustScrollAfterModification(a,i,n)}}}_insertNewLineAtSelection(e=""){this.props.multiline&&this._insertTextAtSelection("\n"+e)}_insertTextAtSelection(e){var{refInput:t}=this;if(this.props.multiline&&!this.props.readOnly&&null!=t){this._ensureFocus(t);var{scrollHeight:a,scrollTop:r}=t,s=this.cursorIsAtEnd(),i=document.createTextNode(e),n=window.getSelection(),o=n.getRangeAt(0);if(o.deleteContents(),o.insertNode(i),/^\n/.test(e)&&a===t.scrollHeight&&s){o.setStartBefore(i);var l=document.createTextNode("\n");o.insertNode(l)}o.setStartAfter(i),o.setEndAfter(i),o.collapse(!1),n.removeAllRanges(),n.addRange(o),t.normalize(),this._adjustScrollAfterModification(t,a,r),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}}deleteSelection(){this.replaceSelection("",!0)}_restoreSelection(e){var{refInput:t}=this;if(t){var{anchorIndex:a,focusIndex:r}=e,{anchorOffset:s,focusOffset:i}=e,{childNodes:n}=t,o=-1===a?t:n[a],l=-1===r?t:n[r];if(o&&l)try{o===l&&s>i&&([s,i]=[i,s]);var d=document.createRange();d.setStart(o,s),d.setEnd(l,i);var u=window.getSelection();u.removeAllRanges(),u.addRange(d);try{var c=document.createRange();c.setStart(l,i),c.setEnd(l,i);var h=c.getBoundingClientRect(),{bottom:f,top:p}=h,m=this.refInput&&this.refInput.getBoundingClientRect(),{bottom:_,top:v}=m||{};if(p>=v&&f<=_)return;this.refInput&&(this.refInput.scrollTop+=f<v?p-v:f-_)}catch(e){}}catch(e){this.focus(!0)}}}getSelection(){var{refInput:e}=this;if(!e||document.activeElement!==e)return null;for(var t,a=window.getSelection(),{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:n}=a,o=e.childNodes,l=-1,d=-1,u=0;(l<0||d<0)&&(t=o[u++]);)r===t&&(l=u-1),i===t&&(d=u-1);return{anchorIndex:l,anchorOffset:s,focusIndex:d,focusOffset:n}}_trimToFit(e){var{maxLength:t}=this.props;if(null==t)return e;var a=t+this._selectionLength-this.length;return a<=0?"":(0,P.substring)(String(e),0,a)}cursorIsAtEnd(){return null!=this.refInput&&(!(!this.state.focused||""!==this.state.value)||(0,m.default)(this.refInput))}cursorIsAtStart(){return!(!this.state.focused||""!==this.state.value)||(0,_.default)(this.refInput)}isFocused(){return this.state.focused}get isComposing(){return this.__isComposing}blur(){(0,y.default)(this.refInput,"this.refInput").blur()}select(){var e=(0,y.default)(this.refInput,"this.refInput"),t=document.createRange();t.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}render(){var e,{props:{placeholder:t},state:{value:a,direction:r}}=this,s=a.length>0?"hidden":"visible",d=(0,n.default)(b.default.input,{[b.default.compose]:"compose"===this.props.theme,[b.default.default]:"default"===this.props.theme||"media-caption"===this.props.theme||"text-input"===this.props.theme,[b.default.large]:"large"===this.props.theme,[b.default.media]:"media-caption"===this.props.theme,[b.default.invite]:"v4-invite-caption"===this.props.theme,[b.default.small]:"small"===this.props.theme,[b.default.status]:"status-reply"===this.props.theme,[b.default["list-search"]]:"list-search"===this.props.theme,[b.default.textInput]:"text-input"===this.props.theme,[b.default.mediaEditorTextInput]:"media-editor-text-input"===this.props.theme});return o.createElement(S.default,{className:d,handlers:this._hotKeyMap,onRef:this.setRefContainer},o.createElement("div",{"data-a8n":l.default.key("pluggable-input-placeholder"),className:b.default.placeholder,ref:this._setRefPlaceholder,style:{visibility:s}},t),o.createElement("div",(0,i.default)({},this._handlerMap,{"data-a8n":null!==(e=l.default.key(this.props.a8n))&&void 0!==e?e:l.default.key("pluggable-input-body"),className:(0,n.default)(b.default.body,T.SELECTABLE_INPUT_CSS_CLASS),contentEditable:!this.props.readOnly,dangerouslySetInnerHTML:{__html:(0,I.default)(a,this._plugins)},"data-tab":w(this.props),dir:r,ref:this.setRefInput,spellCheck:this.props.spellCheck,style:this.props.style})))}}t.BaseInput=A,A.displayName="BaseInput";t.default=e=>class extends A{constructor(...t){var a,r,s;super(...t),this._plugins=[...e.map((e=>(e instanceof d.default&&e.initialize(this),e))),(s=this,{handlers:(a=s,r=O,r.reduce(((e,t)=>(Array.isArray(t)?e[t[0]]=a[t[1]]:e[t]=a[t],e)),{}))})],this._handlerMap=(0,h.default)(this._plugins,this),this._hookMap=(0,f.default)(this._plugins,this),this._hotKeyMap=(0,p.default)(this._plugins,this)}};var O=["onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onFocus","onInput","onKeyDown","onPaste","onSelect"];function D(e){return u.dir(e)||C.default.LR("ltr","rtl")}function w({tabOrder:e,readOnly:t}){return null!=e?e:t?null:c.default.TAB_ORDERS.COMPOSE_BOX_INPUT}},40789:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=t.ThemeOptions=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(11632)),d=s(a(54359)),u=s(a(87165)),c=s(a(6870)),h=a(13414),f=s(a(14517)),p=s(a(63252)),m=s(a(67110)),_=s(a(67134)),v=s(a(17693)),g=s(a(74824)),E=(0,p.default)({MEDIA_CAPTION:null,EMOJI_INPUT:null});t.ThemeOptions=E;var S={omitted:"",query:"",emojiList:null};class C extends n.Component{constructor(...e){super(...e),this.state=S,this.onEmoji=e=>{m.default.increment(e),this.props.plugin.handleSelect(e)},this.onSearch=e=>{var t=e?e.trim():e,a=this.state.omitted,{chat:r}=this.props;if(r&&r.isGroup&&t&&t.includes("@"))this.setState({emojiList:null,query:""});else if(!a||!t.startsWith(a))if(t.length<2){if(!this.state.emojiList)return;this.setState({emojiList:""===t?null:(0,l.default)(t),query:t})}else{var s=(0,l.default)(t);s.length?this.setState({omitted:null,emojiList:s,query:t}):this.setState({emojiList:null,query:t})}},this.onInactive=()=>{this.setState(S)},this.onEscape=()=>{this.setState({emojiList:null,query:"",omitted:this.state.query})},this.onKeyPress=e=>{e.preventDefault();var{chat:t}=this.props;t&&o.default.pasteChatTextInput(t,String.fromCharCode(e.charCode))},this.onKeyDown=e=>("Backspace"===e.key&&(e.preventDefault(),document.execCommand("delete"),this.props.plugin.ctx.focus()),!1),this.onEnter=e=>{if(!(0,f.default)(e)){var t=this._emojiSuggestionsPanel;return t?(e.preventDefault(),e.stopPropagation(),t.pickSelectedEmoji(),!1):void 0}},this._onLeft=e=>{if(!(0,f.default)(e)){var t=this._emojiSuggestionsPanel;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionLeft())}},this._onRight=e=>{if(!(0,f.default)(e)){var t=this._emojiSuggestionsPanel;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionRight())}},this.releaseFocus=()=>{this.props.plugin.ctx.focus()}}componentDidMount(){var e=this.props.plugin;e.registerHandler(this,c.default.EMOJI_SEARCH,this.onSearch),e.registerHandler(this,c.default.EMOJI_INACTIVE,this.onInactive),e.registerHandler(this,c.default.EMOJI_ENTER,this.onEnter),e.registerHandler(this,c.default.EMOJI_LEFT,this._onLeft),e.registerHandler(this,c.default.EMOJI_RIGHT,this._onRight),e.registerHandler(this,c.default.EMOJI_TAB,this.onEnter)}componentWillUnmount(){var e=this.props.plugin;e.unregisterHandler(this,c.default.EMOJI_SEARCH),e.unregisterHandler(this,c.default.EMOJI_INACTIVE),e.unregisterHandler(this,c.default.EMOJI_ENTER),e.unregisterHandler(this,c.default.EMOJI_LEFT),e.unregisterHandler(this,c.default.EMOJI_RIGHT),e.unregisterHandler(this,c.default.EMOJI_TAB)}_renderTab(e){return n.createElement("div",{className:d.default.searchBody,key:"RECENT"},n.createElement(u.default,{ref:(0,h.GetRef)((e=>{this._emojiSuggestionsPanel=e})),key:this.state.query,onEmoji:this.onEmoji,onFocusRelease:this.onInactive,onSkinTonePicker:this.props.onSkinTonePicker,emojiList:e}))}render(){var e=this.state.emojiList,t=e?n.createElement(v.default,{displayName:"EmojiSuggestions",escapable:!0,requestDismiss:this.onEscape,requestFocus:this.releaseFocus},n.createElement("div",{className:(0,i.default)(d.default.overlayContainer,{[d.default.mediaCaption]:this.props.theme===E.MEDIA_CAPTION,[d.default.emojiInput]:this.props.theme===E.EMOJI_INPUT})},n.createElement("div",{className:d.default.resultsContainer,"data-list-scroll-container":"false"},n.createElement("div",{className:d.default.emojiSearch,onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown},this._renderTab(e))))):null;return n.createElement(g.default,{component:"div",className:d.default.positioningContainer,transitionName:"emoji-search-panel-slide-up"},t)}}C.displayName="EmojiSuggestions";var y=C;t.Component=y;var b=(0,_.default)(C);t.default=b},6870:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,r(a(63252)).default)({EMOJI_ENTER:void 0,EMOJI_INACTIVE:void 0,EMOJI_LEFT:void 0,EMOJI_RIGHT:void 0,EMOJI_SEARCH:void 0,EMOJI_TAB:void 0});t.default=s},67804:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(11896)),i=r(a(12396)),n=r(a(6870)),o=r(a(96697)),l=r(a(25812)),d=r(a(23340)),u={ArrowLeft:n.default.EMOJI_LEFT,ArrowRight:n.default.EMOJI_RIGHT,Enter:n.default.EMOJI_ENTER,Tab:n.default.EMOJI_TAB};class c extends s.default{constructor(...e){super(...e),this.hooks={[o.default.CHANGE](e,{refInput:t}){""===t.textContent&&this.handle(n.default.EMOJI_INACTIVE)}},this.handlers={onKeyDown(e,t){8!==e.keyCode&&e.repeat&&(this._lastSyncKeyDownWasRepeat=!0,setTimeout((()=>{delete this._lastSyncKeyDownWasRepeat}),0));var a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(e,t){if(this.ctx.isComposing)return!1;if(this._lastSyncKeyDownWasRepeat)return!1;var a=window.getSelection();if(!a.modify)return!1;var r=h(t,a);return r?(r=r.slice(1),this.handle(n.default.EMOJI_SEARCH,[r]),!1):this.handle(n.default.EMOJI_INACTIVE)}}}handleSelect(e){this.ctx.forceFocus(),h(this.ctx,window.getSelection(),!0)&&(this.ctx.replaceSelection(e),this.handle(n.default.EMOJI_INACTIVE))}}function h(e,t,a=!1){var r=null,s=null,n="",o=0,u=null;return(0,l.default)(e,t,((e,t,a)=>{if("@"===e||" "===e&&" "===s)return!0;if(":"===s)if(" "===r);else{if(i.default.isEmoji(e))return u=n,!0;if(/\W/.test(e))return u=a.slice(t+1)+n,!0}return 0===t&&(n=a+n),r=s,s=e,(o+=1)>=50||void 0})),!u&&o<50&&":"===s&&(u=n),a&&u&&u.length&&(0,d.default)(t,u.length),u}t.default=c},37688:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.isEmojiEl=function(e){return!!e&&(e instanceof HTMLElement&&!!e.dataset.isEmoji)},t.default=void 0;var s=r(a(72779)),i=a(91460),n=r(a(79711)),o=r(a(50935)),l=r(a(12396)),d=r(a(96697)),u=a(66615),c=!1;var h={serializers:[["img.emoji",e=>e.getAttribute("alt")||""]],parsers:[e=>e.replace(l.default.emojiRegex(),((e,t)=>{var a=(e=>{var t=l.default.getGlyphId(e);if(null==t)return null;var a=(0,u.createSelectableElement)("img",e);a.setAttribute("alt",e),a.setAttribute("draggable","false"),a.setAttribute("class",(0,s.default)(a.getAttribute("class"),l.default.getCssClasses(t)));var r=l.default.getStyle(t);return Object.assign(a.style,r),a.setAttribute("src",o.default.ONE_BY_ONE_TRANS_GIF),a.dataset.isEmoji="true",a})(t);return a?a.outerHTML:""}))],hooks:{[d.default.MOUNT](){c||(c=!0,new Promise((e=>{0===n.default.uiBusy&&e(),n.default.once("ui_idle",(()=>{e()}))})).then((()=>(0,i.delayMs)(0))).then((()=>{document.execCommand("enableObjectResizing",!1,!1)})).catch((()=>{})))}},handlers:{onBeforeInput(e,t){var a=l.default.emojiRegex().exec(e.data);return!!a&&(e.cancelable&&t.replaceSelection(a[0]),!0)},onClick(e){if(!e.target)return!1;var t=e.target.getAttribute("class");if(!t||!~t.indexOf("emoji"))return!1;var a=window.getSelection(),r=new Range;return e.pageX<e.target.x+e.target.width/2?(r.setStartBefore(e.target),r.setEndBefore(e.target)):(r.setStartAfter(e.target),r.setEndAfter(e.target)),a.removeAllRanges(),a.addRange(r),!0}}};t.default=h},79180:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,r(a(63252)).default)({SEARCH:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0});t.default=s},20881:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(82704),n=s(a(11896)),o=s(a(97990)),l=s(a(43334)),d=s(a(50935)),u=s(a(7470)),c=s(a(12396)),h=s(a(79180)),f=r(a(58390)),p=s(a(8494)),m=s(a(96697)),_=s(a(76774)),v=s(a(64452)),g=s(a(27428)),E=s(a(95716)),S=s(a(4314)),C=s(a(52232)),y=s(a(16929)),b=s(a(62139)),T=s(a(8347)),M=s(a(25812)),N=s(a(23340)),I=a(66615),P=s(a(77626)),A=a(75637),O=2*d.default.MAX_PUSHNAME_LENGTH,D=/\u200B((\d+)@c\.us)\u200B/g,w={Enter:h.default.ENTER,Tab:h.default.TAB,ArrowUp:h.default.UP,ArrowDown:h.default.DOWN};class R extends n.default{constructor(...e){super(...e),this.serializers=[["span[data-mention-jid]",e=>(function(e){if(!e.hasChildNodes())return;for(;e.childNodes.length;)e.removeChild(e.childNodes[0])}(e),"".concat(e.getAttribute("data-mention-jid")||"",""))]],this.parsers=[e=>e.replace(D,((e,t)=>{var a=u.default.get(t);if(!a)return t;var r=!a.isMyContact&&a.notifyName?a.notifyName:a.formattedName,s="@".concat(r),n=l.default.toArray().find((e=>e.active));if(null==n||!n.isGroup)return s;if(!n.groupMetadata.participants.get(t))return s;var o=(0,I.createSelectableElement)("span");o.dataset.mentionJid=a.id.toString();var d=document.createElement("span");d.className="at-symbol",d.appendChild(document.createTextNode("@"));var c=document.createElement("span");return c.setAttribute("dir",(0,i.dir)(r)||"auto"),c.appendChild(document.createTextNode(r)),o.appendChild(d),o.appendChild(c),o.dataset.originalName=o.textContent||"",o.dataset.plainText=o.textContent||"",o.dataset.appTextTemplate="".concat(t,""),o.outerHTML}))],this.serialize=(e,t)=>(t.mentionedJidList=[],[e.replace(D,((e,a,r)=>(t.mentionedJidList.push((0,A.createWid)(a)),"@".concat(r)))),t]),this.handleSelect=e=>{var t=window.getSelection();if(function(e,t){var{anchorNode:a,anchorOffset:r}=t;a&&a===e.containerRef&&(r=(a=a.childNodes[r]).textContent.length);if(!a||a&&a.nodeType!==Node.TEXT_NODE)return!1;var s=a.textContent.slice(r),i=a;for(;0===s.length;){if(!(i=i.nextSibling)||i.nodeType!==Node.TEXT_NODE)return!1;s=i.textContent}return" "===s.charAt(0)}(this.ctx,t)&&t.modify("move","forward","character"),G(this.ctx,t,!0)){t=window.getSelection();var{refInput:a}=this.ctx,{mentionAfterEnd:r}=a?k(a):{};r&&B(r),this.ctx.replaceSelection("".concat(e.id.toString()," ")),this.handle(h.default.INACTIVE)}},this.hooks={[m.default.CHANGE](e,{refInput:t}){if(P.default.isGecko)if(""===e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createElement("br"))}else for(var a=t.querySelectorAll("[data-mention-jid]"),r=0;r<a.length;++r){var{nextSibling:s}=a[r];s&&(s instanceof Element&&"BR"===s.tagName&&"_moz"===s.getAttribute("type")&&s.remove())}},[m.default.INPUT]({refInput:e}){var t=e.querySelectorAll("[data-mention-jid]");if(t.length)for(var a=0;a<t.length;++a){var r=t[a];if(r.textContent!==r.getAttribute("data-original-name")){var s=r.querySelector(".at-symbol"),i=r.querySelector("span [dir]"),n=window.getSelection(),o=n.focusOffset,l=n.focusNode&&n.focusNode.parentNode&&n.focusNode.parentNode.className,d=r.parentNode,u=document.createDocumentFragment();s&&u.appendChild(document.createTextNode(s.textContent)),i&&u.appendChild(document.createTextNode(i.textContent));var c="at-symbol"===l?u.firstChild:u.lastChild;if(1===u.childNodes.length&&u.lastChild&&(o="@"===u.lastChild.textContent?1:0),d.replaceChild(u,r),n.rangeCount<=0)return;var h=n.getRangeAt(0);h.setEnd(c,o),h.collapse(!1),n.removeAllRanges(),n.addRange(h)}}}},this.handlers={onKeyDown(e,t){var{key:a}=e;if(!this.ctx.isComposing&&("Backspace"===a||"Delete"===a&&(0,E.default)(e))){var r=window.getSelection();if(r.isCollapsed){var{mentionBeforeStart:s,mentionAfterEnd:i}=k(this.ctx.refInput),n=null;if("Delete"===a&&i&&(n=i),"Backspace"===a&&s&&(n=s),n){r.removeAllRanges();var o=document.createRange();o.selectNode(n),r.addRange(o),L(this.ctx.refInput),window.setTimeout((()=>{(0,T.default)()}),0)}}else L(this.ctx.refInput)}var l=w[e.key];return!!l&&this.handle(l,[e,t])},onKeyPress(){return this.ctx.isComposing||L(this.ctx.refInput),!1},onBlur(){return this.handle(h.default.INACTIVE),!1},onSelect(e,t){if(P.default.isTrident||this.ctx.isComposing)return!1;var a=window.getSelection();a.isCollapsed&&a.rangeCount>0&&a.anchorNode&&function(e,t){var{anchorNode:a,anchorOffset:r}=t;if(a&&a===e.refInput){if(0===r)return!0;a=a.childNodes[t.getRangeAt(0).startOffset],r=(0,y.default)(a)?a.textContent.length:0}if((0,g.default)(a,"br"))return!0;if(!a)return!1;if(!(0,y.default)(a))return!1;if("\n"===a.textContent)return!0;var s=a.textContent.slice(0,r);if(""===s){var i=(0,f.default)(a,f.DIR.PREV);if(!i)return!0;if(!(0,y.default)(i))return!1;s=i.textContent}return"\n"===s.charAt(s.length-1)}(t,a)&&(0,T.default)();var r=G(this.ctx,a);if(!r||a.focusNode&&a.focusNode.parentElement&&(0,S.default)(a.focusNode.parentElement.parentElement))return this.handle(h.default.INACTIVE),!1;var s=r.slice(1);return this.handle(h.default.SEARCH,[s]),!1},onPaste(){return L(this.ctx.refInput),!1}}}}function k(e){var t=window.getSelection();if(0===t.rangeCount)return{};var a,r,s,i,n,l,d=t.getRangeAt(0),{startContainer:u,startOffset:c,endContainer:h,endOffset:p}=d,m=h instanceof HTMLElement?h.childNodes.length===p:h.textContent&&h.textContent.length===p;0===c&&(a=u===e?e.childNodes[c]:(0,o.default)(u,(t=>t&&t!==e&&(t.parentElement===e||(0,C.default)(t,0))?[t.parentElement]:[]),(t=>t&&t.parentElement===e))),m&&(r=h===e?e.childNodes[p]:(0,o.default)(h,(t=>t&&t!==e&&(t.parentElement===e||(0,C.default)(t,-1))?[t.parentElement]:[]),(t=>t&&t.parentElement===e)));var _=(0,f.default)(a,f.DIR.PREV);(0,S.default)(_)&&(s=_),(0,S.default)(a)&&(i=a),(0,S.default)(r)&&(n=r,d.collapsed&&(s=s||n));var v=(0,f.default)(r,f.DIR.NEXT);return(0,S.default)(v)&&(l=v,d.collapsed&&(i=i||l)),{mentionBeforeStart:s,mentionAfterStart:i,mentionBeforeEnd:n,mentionAfterEnd:l}}function L(e){var{mentionBeforeStart:t,mentionAfterStart:a,mentionBeforeEnd:r,mentionAfterEnd:s}=k(e);if(t||a||r||s){var i=window.getSelection(),n=i.getRangeAt(0),o=n.collapsed,l=!1;if(t){var d=F(t);l=!0,n.setStartAfter(d),n.collapsed&&n.setEndAfter(d)}if(a){var u=B(a);l=!0,n.setStartBefore(u),o&&n.setEndBefore(u)}if(!o){if(r){var c=F(r);l=!0,n.setEndAfter(c)}if(s){var h=B(s);l=!0,n.setEndBefore(h)}}l&&(i.removeAllRanges(),i.addRange(n))}}function x(){var e=document.createElement("span");return e.textContent="",e.contentEditable="false",setTimeout((()=>(0,b.default)(e)),0),e}function F(e){var t=x();return(0,_.default)(t,e),t}function B(e){var t=x();return(0,v.default)(t,e),t}function G(e,t,a=!1){var r=(0,p.default)(e.refInput,"BACKWARD");if((0,S.default)(r))return"";var s=null,i="",n=0,o=null;return(0,M.default)(e,t,((e,t,a)=>{if("@"===s){if(c.default.isEmoji(e))return o=i,!0;if(/\W/.test(e))return o=a.slice(t+1)+i,!0}if(0===t&&(i=a+i),s=e,(n+=1)>=O)return!0})),!o&&n<O&&"@"===s&&(o=i),a&&o&&o.length&&(0,N.default)(t,o.length),o}t.default=R},45018:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(72779)),n=r(a(2784)),o=s(a(46478)),l=s(a(91581)),d=a(62902),u=s(a(97580));function c({theme:e,contact:{id:t,formattedName:a,isMyContact:r,notifyName:s},onMouseDown:c,onMouseUp:h,onMouseEnter:f,term:p,selected:m}){var _=d.Configuration.Search({terms:p?[p]:[],boundary:!0});return n.createElement("div",{className:(0,i.default)(u.default.mentionsResult,{[u.default.mediaCaption]:"mediaCaption"===e,[u.default.selected]:!0===m}),onMouseDown:c,onMouseUp:h,onMouseEnter:f},n.createElement("div",{className:u.default.resultImage},n.createElement(o.default,{id:t,size:32})),n.createElement("div",{className:u.default.textContact,dir:"auto"},n.createElement(l.default,{text:a,formatters:_})),n.createElement("div",{className:u.default.textPushname,dir:"auto"},!r&&s?n.createElement(l.default,{text:"~".concat(s),formatters:_}):null),null)}c.displayName="Result"},57817:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79180)),l=s(a(35598)),d=s(a(63097)),u=s(a(22004)),c=s(a(14517)),h=s(a(63252)),f=a(40881),p=s(a(45018)),m=s(a(40207)),_=s(a(31033)),v=s(a(17693)),g=s(a(74824)),E=(0,h.default)({MEDIA_CAPTION:null});t.ThemeOptions=E;var S={active:!1,offset:0,omitted:"",query:"",results:[],scrollTop:0};class C extends n.Component{constructor(...e){super(...e),this.state=S,this.flatListController=new u.default,this.setRefList=e=>{this.list=e},this.onEnter=b((()=>this.handleSelect(this.state.offset)),this),this.onInactive=b((()=>this.setState(S)),this),this.onSearch=e=>{var{state:{omitted:t}}=this;if((!t||!e.startsWith(t))&&this.props.chat&&this.props.chat.isGroup){var{chat:{groupMetadata:{participants:a}}}=this.props;this.setState({active:!0,offset:0,omitted:null,query:e,results:(0,f.getResults)(e,a)})}},this.onEscape=()=>{this.setState({active:!1,offset:0,omitted:this.state.query,query:"",results:[]})},this.onUp=b((()=>{var e=Math.max(this.state.offset-1,0);this.setOffset(e)}),this),this.onDown=b((()=>{var e=this.state.results.length-1,t=Math.min(this.state.offset+1,e);this.setOffset(t)}),this),this.renderItem=e=>{var{index:t,contact:a}=e;return n.createElement(p.default,{key:a.id.toString(),contact:a,term:this.state.query,selected:t===this.state.offset,theme:this.props.theme===E.MEDIA_CAPTION?"mediaCaption":null,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>this.handleSelect(t),onMouseEnter:()=>this.setOffset(t,!0)})}}componentDidMount(){var{plugin:e}=this.props;e.registerHandler(this,o.default.ENTER,this.onEnter),e.registerHandler(this,o.default.TAB,this.onEnter),e.registerHandler(this,o.default.SEARCH,this.onSearch),e.registerHandler(this,o.default.INACTIVE,this.onInactive),e.registerHandler(this,o.default.UP,this.onUp),e.registerHandler(this,o.default.DOWN,this.onDown)}componentWillUnmount(){var{plugin:e}=this.props;e.unregisterHandler(this,o.default.ENTER),e.unregisterHandler(this,o.default.TAB),e.unregisterHandler(this,o.default.SEARCH),e.unregisterHandler(this,o.default.INACTIVE),e.unregisterHandler(this,o.default.UP),e.unregisterHandler(this,o.default.DOWN)}handleSelect(e){var t=this.state.results[e];if(t&&t.id){var a=this.props.chat.assignedColor(t.id);this.props.plugin.handleSelect(t,a+"")}}setOffset(e,t=!1){e!==this.state.offset&&this.setState({offset:e},(()=>{!t&&this.list&&this.list.scrollIntoViewIfNeeded(e)}))}renderList(){var{results:e,query:t,offset:a,active:r}=this.state;if(!r||!e.length)return null;var s=e.map(((e,r)=>({height:52,itemKey:e.id.toString(),contentKey:"".concat(t).concat(r===a?"-selected":""),index:r,contact:e})));return n.createElement(v.default,{displayName:"MentionSuggestions",escapable:!0,requestDismiss:this.onEscape,requestRecentFocusOnUnmount:!1},n.createElement("div",{className:(0,i.default)(_.default.overlayContainer,{[_.default.mediaCaption]:this.props.theme===E.MEDIA_CAPTION})},n.createElement(d.default,{className:_.default.resultsContainer,flatListControllers:[this.flatListController]},n.createElement(l.default,{ref:this.setRefList,data:s,flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem}))))}render(){return n.createElement(g.default,{component:"div",className:_.default.positioningContainer,transitionName:"slide-up"},this.renderList())}}C.CONCERNS={chat:["groupMetadata","isGroup"]},C.displayName="Suggestions";var y=(0,m.default)(C,C.CONCERNS);function b(e,t){return(a,r)=>!(!t.state.active||!t.state.results.length)&&((!a||!(0,c.default)(a))&&(e.call(t,a,r),!0))}t.default=y},47912:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,r(a(63252)).default)({FILTER:void 0,INACTIVE:void 0,ENTER:void 0,TAB:void 0,DOWN:void 0,UP:void 0,BACKSPACE:void 0});t.default=s},79445:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(11896)),i=r(a(47912)),n=r(a(90633)),o=r(a(23340)),l=r(a(77626)),d=(0,n.default)(25,"/"),u={Enter:i.default.ENTER,Tab:i.default.TAB,ArrowUp:i.default.UP,ArrowDown:i.default.DOWN,Backspace:i.default.BACKSPACE};class c extends s.default{constructor(...e){super(...e),this.handleSelect=e=>{e.useOnce();var t=window.getSelection(),a=d(this.ctx,t);null!=a&&((0,o.default)(t,a.length+1),this.ctx.replaceSelection(e.message),(0,o.default)(t,e.message.length),this.handle(i.default.INACTIVE))},this.handlers={onKeyDown(e,t){var a=u[e.key];return!!a&&this.handle(a,[e,t])},onSelect(){if(l.default.isTrident)return!1;if(this.ctx.isComposing)return!1;var e=window.getSelection(),t=d(this.ctx,e);return null==t?(this.handle(i.default.INACTIVE),!1):(this.handle(i.default.FILTER,[t]),!1)},onBlur(){return this.handle(i.default.INACTIVE),!1}}}}var h=new c;t.default=h},39665:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logFilterEvent=function(e){new s.default.QuickReply({quickReplyAction:s.default.QUICK_REPLY_ACTION.ACTION_CHAT_IMPRESSION,quickReplyCount:e}).commit()},t.logSelectEvent=function(){new s.default.QuickReply({quickReplyAction:s.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK,quickReplyKeywordMatched:!1}).commit()},t.logCancelEvent=function(){new s.default.QuickReply({quickReplyAction:s.default.QUICK_REPLY_ACTION.ACTION_CHAT_CLICK_CANCEL}).commit()};var s=r(a(40210))},71722:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(91581)),l=a(62902),d=s(a(86249)),u=s(a(40207));class c extends n.Component{render(){var{quickReply:{shortcut:e,message:t},query:a,selected:r,onMouseDown:s,onMouseEnter:u,onMouseUp:c}=this.props,h=e.slice(a.length);return n.createElement("div",{className:(0,i.default)(d.default.result,{[d.default.selected]:r}),onMouseDown:s,onMouseUp:c,onMouseEnter:u},n.createElement("span",{className:d.default.slash},"/"),n.createElement(o.default,{className:d.default.shortcutPrefix,text:a}),n.createElement(o.default,{className:d.default.shortcutSuffix,text:h}),n.createElement(o.default,{className:d.default.message,ellipsify:!0,text:t,formatters:l.Configuration.QuickReply()}))}}c.CONCERNS={quickReply:["shortcut","message"]},c.displayName="Result";var h=(0,u.default)(c,c.CONCERNS);t.default=h},69666:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(12436)),n=s(a(72779)),o=r(a(2784)),l=s(a(47912)),d=s(a(35598)),u=s(a(63097)),c=s(a(22004)),h=s(a(14517)),f=s(a(20642)),p=a(39665),m=s(a(75537)),_=s(a(71722)),v=s(a(85682)),g=s(a(17693)),E=s(a(74824)),S={query:"",results:[],active:!1,offset:0};class C extends o.Component{constructor(...e){super(...e),this.state=S,this.flatListController=new c.default,this.setRefList=e=>{this.list=e},this.onUpdate=y((()=>this._onFilter(this.state.query)),this),this._onFilter=e=>{m.default.synced()||this._syncIfNeeded();var t=m.default.filterShortcuts(e);t.length&&(0,p.logFilterEvent)(t.length),this.setState({query:e,results:t,active:!0,offset:0})},this.onInactive=y((()=>{this.setState(S)}),this),this.onSelect=y((()=>this.handleSelect(this.state.offset)),this),this.onUp=y((()=>{var e=Math.max(this.state.offset-1,0);this.setOffset(e)}),this),this.onDown=y((()=>{var e=this.state.results.length-1,t=Math.min(this.state.offset+1,e);this.setOffset(t)}),this),this._onBackspace=()=>{var e=window.getSelection().toString();this._lastInsertedText&&e===this._lastInsertedText&&(0,p.logCancelEvent)()},this.onEscape=()=>{this.setState(S)},this._syncIfNeeded=(0,i.default)((()=>{m.default.synced()||m.default.sync()}),1e3),this.renderItem=e=>{var{index:t,quickReply:a}=e;return o.createElement(_.default,{key:a.id,quickReply:a,query:this.state.query,selected:t===this.state.offset,onMouseDown:e=>e.preventDefault(),onMouseUp:()=>this.handleSelect(t),onMouseEnter:()=>this.setOffset(t,!0)})}}componentDidMount(){var{plugin:e}=this.props;e.registerHandler(this,l.default.ENTER,this.onSelect),e.registerHandler(this,l.default.TAB,this.onSelect),e.registerHandler(this,l.default.FILTER,this._onFilter),e.registerHandler(this,l.default.INACTIVE,this.onInactive),e.registerHandler(this,l.default.UP,this.onUp),e.registerHandler(this,l.default.DOWN,this.onDown),e.registerHandler(this,l.default.BACKSPACE,this._onBackspace),this.props.listeners.add(m.default,"add remove change:shortcut",this.onUpdate)}componentWillUnmount(){var{plugin:e}=this.props;e.unregisterHandler(this,l.default.ENTER),e.unregisterHandler(this,l.default.TAB),e.unregisterHandler(this,l.default.FILTER),e.unregisterHandler(this,l.default.INACTIVE),e.unregisterHandler(this,l.default.UP),e.unregisterHandler(this,l.default.DOWN),e.unregisterHandler(this,l.default.BACKSPACE),this._syncIfNeeded.cancel()}setOffset(e,t=!1){e!==this.state.offset&&this.setState({offset:e},(()=>{!t&&this.list&&this.list.scrollIntoViewIfNeeded(e)}))}handleSelect(e){var t=this.state.results[e];t&&t.id&&(this._lastInsertedText=t.message,(0,p.logSelectEvent)(),this.props.plugin.handleSelect(t))}renderList(){var{results:e,query:t,offset:a}=this.state,r=e.map(((e,r)=>({height:52,itemKey:e.id,contentKey:"".concat(t).concat(r===a?"-selected":""),index:r,quickReply:e})));return e.length?o.createElement(g.default,{displayName:"QuickReplySuggestions",escapable:!0,requestDismiss:this.onEscape},o.createElement("div",{className:(0,n.default)(v.default.overlayContainer)},o.createElement(u.default,{className:v.default.resultsContainer,flatListControllers:[this.flatListController]},o.createElement(d.default,{ref:this.setRefList,data:r,flatListController:this.flatListController,direction:"vertical",renderItem:this.renderItem})))):null}render(){return o.createElement(E.default,{component:"div",className:v.default.positioningContainer,transitionName:"slide-up"},this.renderList())}}function y(e,t){return(a,r)=>!(!t.state.active||!t.state.results.length)&&((!a||!(0,h.default)(a))&&(e.call(t,a,r),!0))}C.displayName="Suggestions";var b=(0,f.default)(C);t.default=b},68499:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.isComposing)return!1;var a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;if(1!==t.rangeCount)return!1;var r=u.backwardsEmojiTextsTrie,s=e.data||"";if(!(r=r.get(s)))return!1;if(!t.getRangeAt(0).collapsed)return!1;var c=s,h=null,f=null;if((0,l.default)(a,t,((e,t,a)=>((0,i.default)(r,"Trie ptr somehow not set"),!(r=r.get(e))||(r.hasChildren()?void(0===t&&(c=a+c)):(c=a.slice(t)+c,(f=(0,u.default)(c))&&(h=c),!0))))),!h)return!1;var p=a.serializeTextBeforeCursor();if((0,n.isInsideCodeBlock)(p))return!1;(0,d.default)(t,h.length-1),a.replaceSelection(f||"");var{refInput:m}=a,_=(0,o.default)(m,o.Direction.BACKWARD);if(!_)return!0;return _.dataset.replacedEmojiText=h,!0}(e,a,t)};var i=s(a(47677)),n=a(80073),o=r(a(8494)),l=s(a(25812)),d=s(a(23340)),u=r(a(98194))},82506:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(8===e.keyCode)return function(e,t){if(t.isComposing)return!1;var a=window.getSelection();return function(e,t,a){if(!t.modify)return!1;var{refInput:r}=a,i=(0,s.default)(r,s.Direction.BACKWARD);if(!i)return!1;if(n=i,!Boolean(n&&n.dataset&&n.dataset.replacedEmojiText))return!1;var n;t.modify("extend","backward","character"),t.modify("move","backward","character");var o=i.dataset.replacedEmojiText,l=i.parentNode;if(!l)return!1;l.replaceChild(document.createTextNode(o+" "),i);for(var d=o.length,u=0;u<d+1;u++)t.modify("extend","forward","character"),t.modify("move","forward","character");return!1}(0,a,t)}(0,t);return!1};var s=r(a(8494))},55765:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(11896)),i=r(a(68499)),n=r(a(82506));class o extends s.default{constructor(...e){super(...e),this.handlers={onBeforeInput:i.default,onKeyDown:n.default}}}var l=new o;t.default=l},98194:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=o[e];a&&(t=s.default.getSkinToneBase(a)&&i.default.getVariant(a));return t||a},t.backwardsEmojiTextsTrie=void 0;var s=r(a(12396)),i=r(a(61311)),n=r(a(75688)),o={"(y)":"","(Y)":"","(n)":"","(N)":"",":-)":"",":-(":"",":-p":"",":-P":"",":-|":"",":-\\":"",":-D":"",":-*":"",":-o":"","<3":"","^_^":"",">_<":"",";-)":""};var l=Object.keys(o),d=n.default.fromBackwardsStrings(l);t.backwardsEmojiTextsTrie=d},64887:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(11896)),i=r(a(79711)),n=r(a(95716));class o extends s.default{constructor(...e){super(...e),this.handlers={onKeyDown(e){return!this.ctx.isComposing&&(!(" "!==e.key||!(0,n.default)(e))&&(!this.ctx.value.length&&(i.default.scrollMessages(),!0)))}}}}var l=new o;t.default=l},78468:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(52748));class o extends i.Component{componentDidMount(){}render(){var{children:e}=this.props;return i.createElement("div",{className:n.default.container}," ",e," ")}}t.default=o,o.displayName="RowPicker"},86921:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(71201)),o=s(a(12396)),l=r(a(91581)),d=r(a(80857)),u=a(62902),c=r(a(78468)),h=a(75656);class f extends i.Component{componentDidMount(){}render(){var{base:e,unicode:t,action:a}=this.props,r=(0,o.isBaseCoupleEmoji)(e),s=(r?(0,o.getPermutations)(h.SKIN_TONE_VARIATIONS.slice(1),2):h.SKIN_TONE_VARIATIONS.map((e=>[e]))).reduce(((t,a)=>{var r=o.default.getSkinToneVariant(e,a);return r?(t.push(r),t):t}),[]).filter((e=>o.default.isEmoji(e))).map(((e,s)=>i.createElement(n.default,{type:r?"emoji-grid":"emoji",key:e+s,a8n:"mi-emoji-variant",action:r=>a(r,t,e)},i.createElement(l.default,{text:e,formatters:u.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))));return r?i.createElement(d.default,{base:e,action:a,unicode:t},s):i.createElement(c.default,null,s)}}t.default=f,f.displayName="SkinTonePicker"},94461:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RoundTheme=void 0;var i=s(a(58527)),n=s(a(72779)),o=r(a(2784)),l=s(a(32960)),d=s(a(72509)),u=s(a(23830)),c=s(a(72376)),h=a(28103).Mirrored(["Default","Small","Large"]);t.RoundTheme=h;var f=({large:e,small:t,theme:a,a8nText:r,label:s,onClick:f,onKeyDown:p,className:m,children:_,disabled:v})=>{var g=(0,n.default)(m,u.default.btn,{[u.default.large]:e||a===h.Large,[u.default.small]:t||a===h.Small,[u.default.disabled]:v}),E=e=>{e.stopPropagation(),e.preventDefault()},[S,C]=(0,c.default)(f,{disabled:v}),y=p?e=>{(0,d.default)(e)&&(e.preventDefault(),p(e))}:C.onKeyPress;return o.createElement("div",(0,i.default)({},C,{"data-a8n":l.default.key(r),role:"button","aria-label":s,tabIndex:"0",className:g,onKeyDown:v?E:y,onMouseDown:E,ref:S}),_)};f.displayName="Round";var p=f;t.default=p},51908:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=s(a(70417)),o=r(a(2784)),l=s(a(72779)),d=s(a(9140)),u=s(a(72376)),c=({children:e,side:t,ellipsify:a,onClick:r,"aria-label":s})=>{var c=(0,l.default)({[d.default.clickable]:r}),h=(0,l.default)(d.default.main,{[d.default.mainEllipsify]:a}),f=null!=t?o.createElement("div",{className:d.default.side},t):null,p={},[m,_]=(0,u.default)(r);return null!=r&&(p=(0,n.default)({ref:m},_)),o.createElement("div",(0,i.default)({className:c,"aria-label":s},p),o.createElement("div",{className:d.default.body},o.createElement("div",{className:h},e),f))};c.displayName="Row";var h=c;t.default=h},73073:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(95969)),o=({header:e})=>i.createElement("div",{className:n.default.container},e);o.displayName="SectionHeader";var l=o;t.default=l},97591:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=a(79909),o=s(a(61247));a(61029);var l=a(76128),d=r(a(17026));function u(){var e=(0,i.default)([""," given invalid object for ",": ",""]);return u=function(){return e},e}function c(){var e=(0,i.default)([""," was not supplied the "," model with keys ","."]);return c=function(){return e},e}function h(){var e=(0,i.default)(['Unknown StateHOC concern type "','"']);return h=function(){return e},e}function f(){var e=(0,i.default)(['READ ONLY: Cannot write to proxied property "','", created in <'," />, it is not writable."]);return f=function(){return e},e}t.default=class{constructor(e,t,a,r,s=!1){this.componentName=e,this.name=t,this._isStrong=r,this.keys=a;var i=l.ProxyStates[t];i||(__LOG__(4,void 0,new Error,!0)(h(),t),SEND_LOGS("state-hoc-error")),this._proxyClass=i,this._limitedAccessProxyClass=function(e,t,a,r){var s={$ProxyState$ComponentName:{value:e},proxyBitMask:{value:(0,n.genBitMask)(t.prototype.mirrorMask,a)}},i=function(t){var a={enumerable:!0,get:function(){return this.$ProxyState$state.get(t)},set:function(){__LOG__(4,void 0,new Error)(f(),t,e)}};r||(a.set=function(e){this.$ProxyState$state.set(t,e)}),s[t]=a};for(var o of a)i(o);function l(e){t.call(this,e)}return l.prototype=Object.create(t.prototype,s),l.prototype.constructor=l,l}(e,i,a,s)}getModel(e){return e instanceof this._proxyClass?e.$ProxyState$state:e}getModelAndValidate(e){var t,a=e instanceof this._proxyClass?e.$ProxyState$state:e;return a?a instanceof o.default?a:(__LOG__(4,void 0,new Error,!0)(u(),this.componentName,this.name,"string"==typeof(t=a)?t:t.toString?t.toString():"Invalid Object"),SEND_LOGS("state-hoc-error"),null):(d.default.mode===d.StreamMode.MAIN&&(__LOG__(4,void 0,new Error,!0)(c(),this.componentName,this.name,String(this.keys)),SEND_LOGS("state-hoc-error")),null)}createProxy(e){return new this._limitedAccessProxyClass(e)}attachConcern(e,t,a){e.incObservers(!this._isStrong),e.mirror.addListener(a,t,this)}detachConcern(e,t){e.decObservers(),e.mirror.removeListener(t)}}},142:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({animationFrames:e,signal:t,onFrameChange:a,shouldStop:r}){if(t.aborted)return Promise.reject(new s.default);if(0===e.length)return Promise.resolve();var i=(new Date).getTime(),n=0,o=0,l=i,d=()=>{};return new Promise(((i,u)=>{var c=()=>{0!==n&&window.cancelAnimationFrame(n),u(new s.default)};t.addEventListener("abort",c),d=()=>{t.removeEventListener("abort",c)};var h=()=>{var t=(new Date).getTime();if(t<l)n=window.requestAnimationFrame(h);else{var{duration:s,rgbaBuffer:d}=e[o];a(d),o=(o+1)%e.length,l=t+s,1===o&&r()?i():n=window.requestAnimationFrame(h)}};n=window.requestAnimationFrame(h)})).finally((()=>{d()}))};var s=r(a(8701))},64650:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(26293)),l=a(99888),d=s(a(72049));function u(){var e=(0,i.default)(["AnimationCanvas error: ",""]);return u=function(){return e},e}class c extends n.PureComponent{constructor(e){super(e),this.state={animationFramesInfo:null},(0,l.blobToArrayBuffer)(this.props.blob).then(d.default).then((e=>{this.setState({animationFramesInfo:e})})).catch((e=>{__LOG__(3)(u(),e)}))}render(){var{animationFramesInfo:e}=this.state;if(!e)return this.props.renderPreview();var{width:t,height:a,frames:r}=e;return n.createElement(o.default,{className:this.props.className,width:t,height:a,animationFrames:r,startAnimation:Boolean(this.props.loopAnimation||this.props.startAnimation),maxLoops:this.props.maxLoops,onClick:this.props.onClick})}}t.default=c,c.displayName="AnimationCanvas"},77070:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(52741)),l=s(a(7765)),d=s(a(61941));class u extends n.PureComponent{constructor(...e){super(...e),this.state={isAnimated:this.props.startAnimation,isReady:!1},this._addObserverToContainer=e=>{this._setIntersectionObserver(e)},this._setImgRef=e=>{this._imgRef=e},this._setUrlProviderRef=e=>{this._urlProviderRef=e},this._setCanvasRef=e=>{this._canvasRef=e},this._setIntersectionObserver=e=>{null!=e&&(null==this._intersectionObserver?(this._intersectionObserver=new IntersectionObserver(this._onVisible,{root:null,rootMargin:"25px",threshold:.99}),this._intersectionObserver.observe(e)):this._intersectionObserver.observe(e))},this._onVisible=e=>{e[0].isIntersecting?(this.startAnimation(),this._startAnimationCountDown()):null!=this._startedAt&&this._startAnimationCountDown()},this._onImageLoad=()=>{if(!this.state.isReady){var e=this._canvasRef,t=this._imgRef;e&&t&&(e.width=t.naturalWidth/2,e.height=t.naturalHeight/2,e.getContext("2d").drawImage(t,0,0,e.width,e.height)),this.props.startAnimation&&(this._startedAt=Date.now(),this._startAnimationCountDown(),this.props.mediaData.animatedAsNewMsg=!0),this.setState({isReady:!0})}},this.startAnimation=()=>{null!=this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),null==this._startedAt&&(this._startedAt=Date.now()),this.setState({isAnimated:!0})},this.onMouseEnter=()=>{this.startAnimation()},this.onMouseLeave=()=>{null!=this._startedAt&&this._startAnimationCountDown()},this._renderImage=e=>n.createElement("img",{alt:this.props.label,className:(0,i.default)(this.props.className,{[l.default.hide]:!this.state.isReady||!this.state.isAnimated}),draggable:"false",src:e,ref:this._setImgRef,onLoad:this._onImageLoad})}componentWillUnmount(){null!=this._timeoutID&&clearTimeout(this._timeoutID),this._intersectionObserver&&this._intersectionObserver.disconnect()}_startAnimationCountDown(){var e=(0,d.default)(this.props.mediaData.singleLoopDuration,"this.props.mediaData.singleLoopDuration"),t=(Date.now()-(0,d.default)(this._startedAt,"this._startedAt"))%e,a=this.props.mediaData.animationDuration-t;clearTimeout(this._timeoutID),this._timeoutID=window.setTimeout((()=>{this._urlProviderRef&&this._urlProviderRef.refreshBlob(),this.setState({isAnimated:!1}),this._timeoutID=null,this._startedAt=null}),a)}_createRenderableUrl(){return URL.createObjectURL(new Blob([this.props.mediaData.mediaBlob.formData()]))}render(){return n.createElement("div",{className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.props.onClick,ref:this._addObserverToContainer},n.createElement(o.default,{ref:this._setUrlProviderRef,mediaData:this.props.mediaData,placeholderRenderer:this.props.placeholderRenderer,downloadMedia:this.props.downloadMedia},this._renderImage),n.createElement("canvas",{className:(0,i.default)(this.props.className,{[l.default.hide]:!this.state.isReady||this.state.isAnimated}),draggable:"false",ref:this._setCanvasRef}))}}t.default=u,u.displayName="ControlledAnimatedSticker"},26293:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(12489)),o=a(8701),l=r(a(142)),d=r(a(2426));class u extends i.PureComponent{constructor(...e){super(...e),this._abortController=new n.default,this._isAnimating=!1,this.state={rgbaBuffer:null},this._iterations=0,this._isFocused=!1,this._startAnimation=()=>{this._isAnimating||(this._isAnimating=!0,(0,l.default)({animationFrames:this.props.animationFrames,signal:this._abortController.signal,onFrameChange:e=>this.setState({rgbaBuffer:e}),shouldStop:()=>this._iterations>=this.props.maxLoops||(this._isFocused||this._iterations++,!1)}).catch((e=>{if(e.name!==o.ABORT_ERROR)throw e})).finally((()=>{this._isAnimating=!1})))},this._onMouseEnter=()=>{this.props.maxLoops!==1/0&&(this._isFocused=!0,this._iterations=1,this._startAnimation())},this._onMouseLeave=()=>{this._isFocused=!1}}componentDidMount(){this.props.startAnimation?this._startAnimation():this._renderFirstFrame()}_renderFirstFrame(){var{animationFrames:e}=this.props;0!==e.length&&this.setState({rgbaBuffer:e[0].rgbaBuffer})}componentWillUnmount(){this._abortController.abort()}render(){var{rgbaBuffer:e}=this.state;return e?i.createElement(d.default,{rgbaBuffer:e,className:this.props.className,width:this.props.width,height:this.props.height,onClick:this.props.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}):null}}t.default=u,u.displayName="ControlledAnimationCanvas"},82562:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(64650)),l=s(a(77070)),d=s(a(36455)),u=s(a(3023)),c=s(a(17957)),h=s(a(94011)),f=a(96645),p=s(a(19125)),m=s(a(61941)),_=s(a(98343)),v=s(a(72259)),g=s(a(2426)),E=s(a(40207));function S({className:e,loopAnimation:t,mediaData:a,startAnimation:r,renderPreview:s,downloadMedia:i,onClick:o,forwardRef:d,label:u}){return a.animationDuration>0&&!t?n.createElement(l.default,{className:e,mediaData:a,startAnimation:r,onClick:o,placeholderRenderer:s,downloadMedia:i,ref:d,label:u}):n.createElement(p.default,{mediaData:a,placeholderRenderer:s,downloadMedia:i},(t=>n.createElement("img",{className:e,draggable:"false",onClick:o,src:t,alt:u})))}function C({className:e,loopAnimation:t,mediaData:a,startAnimation:r,renderPreview:s,downloadMedia:i,onClick:l}){if(a.animationDuration>0){var d=t?1/0:a.animationDuration/(0,m.default)(a.singleLoopDuration,"mediaData.singleLoopDuration");return n.createElement(h.default,{mediaData:a,render:a=>n.createElement(o.default,{className:e,loopAnimation:t,maxLoops:d,blob:a,renderPreview:s,startAnimation:r,onClick:l}),renderPlaceholder:s,downloadMedia:i})}return a.rgbaBuffer?n.createElement(g.default,{className:e,height:a.rgbaHeight,onClick:l,rgbaBuffer:a.rgbaBuffer,width:a.rgbaWidth}):s()}class y extends n.PureComponent{constructor(e){super(e),this.state={},this._animatedAsNewMsg=this.props.mediaData.animatedAsNewMsg,this._renderPreview=()=>{var e,t=this.props.mediaData.preview,a=t&&t.url(),r=this._getClassName(),s=null===(e=this.props.mediaData.emojis)||void 0===e?void 0:e.join(" "),o=s?c.default.t(31,{emojis:s}):c.default.t(32);return a?n.createElement("img",{className:r,draggable:"false",onClick:this.props.onClick,src:a,alt:o}):n.createElement(_.default,{className:(0,i.default)(u.default.placeholder,r)})};var t=(0,d.default)();t.isFulfilled()?this.state.supportsWebp=t.value():t.checkpoint(this.props.rejectOnUnmount()).then((e=>this.setState({supportsWebp:e})))}_getClassName(){return(0,i.default)({[u.default.conversation]:"conversation"===this.props.theme,[u.default.quoted]:"quoted"===this.props.theme,[u.default.composeBoxQuoted]:"composeBoxQuoted"===this.props.theme,[u.default.stickerPanel]:"stickerPanel"===this.props.theme,[u.default.clickable]:Boolean(this.props.onClick)})}_renderContent(){var e,{supportsWebp:t}=this.state;if(null==t)return this._renderPreview();var a=this._getClassName(),{mediaData:r}=this.props,s=null===(e=this.props.mediaData.emojis)||void 0===e?void 0:e.join(" "),i=s?c.default.t(31,{emojis:s}):c.default.t(32),o=Boolean(this.props.animateOnView||this.props.isNewMsg&&!this._animatedAsNewMsg),l=Boolean(this.props.loopAnimation);return t?n.createElement(S,{className:a,mediaData:r,loopAnimation:l,startAnimation:o,renderPreview:this._renderPreview,onClick:this.props.onClick,downloadMedia:this.props.downloadMedia,forwardRef:this.props.forwardRef,label:i}):n.createElement(C,{className:a,mediaData:r,loopAnimation:l,startAnimation:o,renderPreview:this._renderPreview,onClick:this.props.onClick,downloadMedia:this.props.downloadMedia,label:i})}render(){return n.createElement("span",{className:(0,i.default)({[u.default.showSticker]:this.props.mediaData.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED})},this._renderContent())}}y.CONCERNS={mediaData:["animatedAsNewMsg","animationDuration","singleLoopDuration","mediaBlob","preview","renderableUrl","rgbaBuffer","rgbaHeight","rgbaWidth","emojis","mediaStage"]},y.displayName="Sticker";var b=(0,v.default)((0,E.default)(y,y.CONCERNS));t.default=b},98343:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(82631));class o extends i.PureComponent{render(){var{className:e}=this.props;return i.createElement(n.default,{className:e,name:"sticker-placeholder"})}}t.default=o,o.displayName="StickerPlaceholder"},22948:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{disabled:t,onClick:a,type:r}=e,s=(0,i.default)(e,["disabled","onClick","type"]);return n.createElement(l.default,{disabled:t,onClick:a,type:r},n.createElement(o.default,s))};var i=s(a(22220)),n=r(a(2784)),o=s(a(82631)),l=s(a(5174))},52100:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextInputCustomStyleThemes=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(14457),l=s(a(99003)),d=s(a(82512)),u=a(40789),c=r(a(91581)),h=a(13414),f=s(a(44343)),p=s(a(63252)),m=s(a(17957)),_=s(a(2825)),v=s(a(82631)),g=s(a(16661)),E=s(a(17693)),S=s(a(63498)),C=a(86145),y=s(a(5174)),b=s(a(74824)),T=(0,p.default)({groupInfoName:null,desaturated:null,noErrorInfo:null});t.TextInputCustomStyleThemes=T;class M extends n.Component{constructor(...e){super(...e),this.state={active:this.props.startActive||!1,locked:!this.props.startActive&&!!this.props.lockable,emojiPicker:null},this.emojiInputComponent=(0,l.default)(),this._refEmojiPanel=n.createRef(),this.isSkinTonePickerOpen=!1,this.onEmojiPicker=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=n.createElement(d.default,{onEmoji:this.onEmoji,onFocusNext:this.restoreFocus,onFocusPrev:this.restoreFocus});this.setState({emojiPicker:{menu:t,dirY:o.DirY.TOP,type:"emoji_picker",anchor:e.target}}),this.restoreFocus()},this.onEmojiPickerClose=()=>{this.setState({emojiPicker:null})},this.onRestoreEmojiPickerFocus=()=>{var e;null===(e=this._refEmojiPanel.current)||void 0===e||e.restoreFocus()},this.onEmoji=e=>{this.inputLine&&this.inputLine.replaceSelection(e)},this.onEnter=e=>{this.props.lockable&&this._onSaveAndLock(),this.props.onEnter&&!this.props.multiline&&(e.persist(),this.props.onEnter(e))},this.onChange=e=>{this.props.onChange&&this.props.onChange(e)},this.restoreFocus=()=>{this.inputLine&&this.inputLine.focus()},this.onFocus=e=>{var t=e.relatedTarget;this.inputLine&&t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)&&this.inputLine.focus()},this.onBlur=e=>{this.isSkinTonePickerOpen||(this.state.active&&this.setState({active:!1}),this.props.onBlur&&this.props.onBlur(e))},this.onFocus=e=>{e.stopPropagation(),this.state.active||this.setState({active:!0}),this.props.onFocus&&this.props.onFocus(e)},this.onSkinTonePicker=e=>{this.isSkinTonePickerOpen=e},this._onUnlock=()=>{this.props.onBeginEdit&&this.props.onBeginEdit(),this.setState({locked:!1})},this._onSaveAndLock=()=>{var e=!(!this.props.lowProfile&&this.props.error);this.props.validate&&e&&(e=this.props.validate(this.props.value)),e?(this.props.onSave&&this.props.onSave(),this.setState({locked:!0})):this.props.onError&&this.props.onError()},this.onCancel=()=>{this.props.onCancel&&this.props.onCancel(),this.setState({locked:!0})},this._showEmptyValuePlaceholder=()=>{var{value:e}=this.props;return(!e||""===e)&&this.props.emptyValuePlaceholder&&this.state.locked},this.isEditing=()=>this.props.editable&&!this.state.locked,this._renderEmojiText=()=>{var{renderEmojiTextInLockMode:e,value:t}=this.props;if(e&&t){var{textLimit:a,readMoreText:r,onReadMore:s,formatters:i}=e;return n.createElement("div",{className:g.default.emojiText},n.createElement(c.default,{text:t,selectable:!0,emojiSize:c.EMOJI_SIZE.SMALL,textLimit:a,formatters:i}),(0,C.numCodepoints)(t)>a&&n.createElement("span",{className:g.default.more,role:"button",onClick:s}," ".concat(r)))}},this.onEmojiFocus=()=>{this.state.emojiPicker&&this.onRestoreEmojiPickerFocus()}}componentDidMount(){this.props.focusOnMount&&this.restoreFocus()}componentDidUpdate(e,t){t.locked||!e.editable||this.props.editable||this.onCancel(),!this.inputLine||this.isEditing()&&!this.props.managed||this.inputLine.value===this.props.value||this.inputLine.reset(this.props.value||"")}render(){var e,t,a=this.props.maxLength||M.defaultProps.maxLength,r=this.isEditing(),s=r&&!!this.props.error&&!this.props.lowProfile,{customStyleThemes:o=[]}=this.props,l={container:(0,i.default)(g.default.textInput,o&&o.map((e=>g.default[e])),{[g.default.noPlaceholder]:!this.props.placeholder,[g.default.invite]:"v4-invite-caption"===this.props.theme,[g.default.active]:r,[g.default.small]:"small"===this.props.theme,[g.default.inputLarge]:"large"===this.props.theme}),label:(0,i.default)(g.default.labelText,{[g.default.float]:!!this.props.value,[g.default.hideFloatingLabel]:!!this.props.hideFloatingLabel}),inputWrapper:(0,i.default)(g.default.wrapper,{[g.default.textError]:s,[g.default.invite]:"v4-invite-caption"===this.props.theme,[g.default.textActive]:this.state.active,[g.default.locked]:this.state.locked}),infoWrapper:(0,i.default)(g.default.infoStrip,{[g.default.textError]:s,[g.default.textActive]:this.state.active})};this.props.lockable&&(this.props.pending?t=n.createElement("div",{className:(0,i.default)(g.default.iconSpinner,g.default.iconMain),key:"spinner"},n.createElement(_.default,{size:18,stroke:6,color:"highlight"})):this.state.locked?this.props.editable?t=n.createElement("div",{className:g.default.iconMain,onClick:this._onUnlock,key:"btn-edit",title:m.default.t(602)},n.createElement(v.default,{name:"pencil",directional:!0})):this.props.editRestrictionInfo&&!this.props.editable&&(t=n.createElement("div",{className:g.default.iconMain,onClick:this.props.editRestrictionInfo,key:"btn-info"},n.createElement(v.default,{name:"info"}))):t=n.createElement("div",{className:g.default.iconMain,onClick:this._onSaveAndLock,key:"btn-done",title:m.default.t(504)},n.createElement(v.default,{name:"checkmark"})),e=this.props.lockable?n.createElement(b.default,{className:g.default.iconMainContainer,transitionName:"pop"},t):null);var d,c=r&&this.props.supportsEmoji?n.createElement(y.default,{className:(0,i.default)(g.default.emojiBtn),onClick:this.onEmojiPicker,key:"emoji-btn",onFocus:this.onEmojiFocus},n.createElement(v.default,{name:"emoji-input"})):null;if(this.props.showRemaining){var p=(0,C.numCodepoints)(this.props.value||"");d=a-p<50&&r?n.createElement("div",{className:(0,i.default)(g.default.charCounter),key:"counter"},m.default.n(a-p)):null}var T,N,I=this.props.supportsEmoji||this.props.showRemaining?n.createElement(b.default,{className:g.default.iconsEditContainer,transitionName:"pop"},d,c):null,P=this.props.lowProfile?null:n.createElement("div",{className:l.infoWrapper},n.createElement("div",{className:g.default.errorText},s?this.props.error:null));this.props.lockable&&!this.state.locked?(this.state.emojiPicker&&(N=n.createElement(E.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.onEmojiPickerClose,requestFocus:this.onRestoreEmojiPickerFocus},n.createElement(S.default,{contextMenu:this.state.emojiPicker}))),T=n.createElement(E.default,{displayName:"TextInput",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.onCancel},n.createElement("div",null,N))):!this.props.lockable&&this.state.emojiPicker&&(T=n.createElement(E.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.onEmojiPickerClose,requestFocus:this.onRestoreEmojiPickerFocus},n.createElement(S.default,{contextMenu:this.state.emojiPicker})));var A,O,D=this.props.editable&&!this.state.locked,{emptyValuePlaceholder:w,renderEmojiTextInLockMode:R}=this.props,k=this.emojiInputComponent,L=D||!R,x=L?n.createElement(k,{a8n:this.props.a8n,ref:(0,h.GetRef)((e=>{this.inputLine=e})),initialValue:this.props.value,theme:this.props.theme||"default",multiline:this.props.multiline,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onEnter:this.onEnter,onFiles:this.props.onFiles,spellCheck:this.props.spellCheck,maxLength:this.props.maxLength,readOnly:!D,placeholder:this.props.inputPlaceholder}):this._renderEmojiText();return this.props.placeholder&&(A=(!this.props.value||!this.props.hideFloatingLabel)&&n.createElement("span",{className:l.label},this.props.placeholder),O=n.createElement("div",{className:g.default.spacer})),n.createElement(f.default,{className:l.container,onFocus:this.onFocus},A,O,n.createElement("div",{className:l.inputWrapper},x,this._showEmptyValuePlaceholder()&&n.createElement("div",{className:g.default.emptyValPlaceholder},w),I,e),L&&n.createElement(k.EmojiSuggestions,{theme:u.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.onSkinTonePicker}),P,T)}}t.default=M,M.defaultProps={maxLength:25,editable:!0},M.displayName="TextInput"},67360:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(65549)),d=({children:e,left:t})=>n.createElement("div",{"data-a8n":o.default.key("tooltip"),className:(0,i.default)(l.default.tooltip,{[l.default.left]:!0===t})},e);d.displayName="Tooltip";var u=d;t.default=u},63498:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=r(a(2784)),o=s(a(79711)),l=s(a(98294));class d extends n.Component{componentDidMount(){var e=(0,i.default)((0,i.default)({},this.props.contextMenu),{},{uim:this.props.uim});o.default.openContextMenu(e,(e=>{this.element=e}))}componentWillUnmount(){o.default.closeContextMenu(this.props.uim)}getElement(){return this.element}render(){return null}}d.displayName="UIEMenu";var u=(0,l.default)(d);t.default=u},68768:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=r(a(2784)),o=s(a(79711)),l=s(a(98294));class d extends n.Component{componentDidMount(){var e=(0,i.default)((0,i.default)({},this.props.tooltip),{},{uim:this.props.uim});o.default.openTooltip(e,(e=>{this.element=e}))}componentWillUnmount(){o.default.closeTooltip(this.props.uim)}getElement(){return this.element}render(){return null}}d.displayName="UIETooltip";var u=(0,l.default)(d);t.default=u},5174:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{a8nText:t,className:a,children:r,disabled:s,onClick:h,title:f,type:p="button",onFocus:m}=e,_=(0,n.default)(e,["a8nText","className","children","disabled","onClick","title","type","onFocus"]),[v,g]=(0,c.default)(),E={};null!=_["aria-label"]&&(E["aria-label"]=_["aria-label"]);null!=_["aria-pressed"]&&(E["aria-pressed"]=_["aria-pressed"]);return l.createElement("button",(0,i.default)({className:(0,o.default)(u.default.button,g&&u.default.focused,a),"data-a8n":d.default.key(t),disabled:!0===s,onClick:h,onFocus:m,ref:v,title:f,type:p},E),r)};var i=s(a(58527)),n=s(a(22220)),o=s(a(72779)),l=r(a(2784)),d=s(a(32960)),u=s(a(72864)),c=s(a(71203))},37698:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(85395)),o=r(a(91581)),l=r(a(18120)),d=r(a(40207)),u=r(a(82631)),c=r(a(13004));class h extends i.PureComponent{render(){var e,t,{contact:a,presence:r}=this.props;return(e="list"===this.props.location||"info"===this.props.location?r.getFormattedString():r.withholdDisplay?this.props.placeholder:r.getFormattedString()||(r.forceDisplay?"":this.props.placeholder))&&(t=i.createElement(n.default,{text:e,location:this.props.location})),"title"===this.props.location&&l.default.supportsFeature(l.default.F.VNAME_V_2)&&e!==this.props.placeholder&&a&&this.props.showBusinessCheckmark?i.createElement("div",{className:c.default.wrapper},i.createElement(o.default,{text:a.verifiedName,className:c.default.verifiedText,direction:"auto",ellipsify:!0,titlify:!0}),i.createElement("div",{className:c.default.icon},i.createElement(u.default,{name:"psa-verified"})),t&&i.createElement("span",{className:c.default.divider},""),t):t||null}}h.CONCERNS={contact:["name","verifiedName"],presence:["withholdDisplay","forceDisplay","hasData"],chatstate:["type","deny","t"]},h.displayName="UserSubtitle";var f=(0,d.default)(h,h.CONCERNS);t.default=f},15668:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var i=s(a(19976)),n=s(a(72779)),o=r(a(2784)),l=s(a(79711)),d=s(a(20642)),u=s(a(2694));function c(){var e=(0,i.default)(["Neither the height nor the width of video should have zero value"]);return c=function(){return e},e}class h extends o.PureComponent{constructor(...e){super(...e),this._videoRef=null,this._onPlayTriggered=!1,this.setRefVideo=e=>{this._videoRef&&this.props.listeners.remove(this._videoRef,"playing",this.onPlay),this._videoRef=e,e&&("srcObject"in e&&this.props.srcObject?e.srcObject=this.props.srcObject:this.props.src&&(e.src=this.props.src),this.props.listeners.add(e,"playing",this.onPlay),this.props.autoPlay&&e.play())},this.onPlay=()=>{var e=this._videoRef;e&&(e.videoHeight&&e.videoWidth||this._onPlayTriggered||(this._onPlayTriggered=!0,e.pause(),e.play(),__LOG__(4,void 0,new Error,!0)(c()),SEND_LOGS("non-zero height and width")),e.videoHeight&&e.videoWidth&&this.props.onPlay&&(this.props.onPlay(e),this._onPlayTriggered=!1),this.props.muted||l.default.mediaPlaying(this))},this.onOtherPlaying=e=>{e!==this&&this._videoRef&&this._videoRef.pause()},this.onLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}componentDidMount(){this.props.controls&&this.props.listeners.add(l.default,"mediaPlaying",this.onOtherPlaying)}underlyingVideo(){return this._videoRef}play(){var e=this._videoRef;e&&e.paused&&e.play()}pauseAndReset(){var e=this._videoRef;e&&(e.currentTime=0,e.paused||e.pause())}getDuration(){return null==this._videoRef?null:this._videoRef.duration}render(){var e=this.props;return o.createElement("video",{ref:this.setRefVideo,className:(0,n.default)(u.default.video,e.className),muted:e.muted,controls:e.controls,controlsList:e.controlsList,width:e.width,height:e.height,loop:e.loop,onClick:e.onClick,onEnded:e.onEnded,onLoadedMetadata:this.onLoadedMetadata,style:e.style},e.children)}}h.displayName="Video";var f=h;t.Component=f;var p=(0,d.default)(h);t.default=p},86094:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PlayerState=void 0;var i=s(a(70417)),n=s(a(18149)),o=r(a(2784)),l=s(a(55741));function d(e){return(0,i.default)((0,i.default)({},e),{},{playerVars:(0,i.default)((0,i.default)({},e.playerVars),{},{autoplay:0,start:0,end:0})})}var u={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};t.PlayerState=u;class c extends o.Component{constructor(...e){super(...e),this.listeners=[],this.onPlayerReady=e=>this.props.onReady(e),this.onPlayerError=e=>this.props.onError(e),this.onPlayerStateChange=e=>{switch(this.props.onStateChange(e),e.data){case u.ENDED:this.props.onEnd(e);break;case u.PLAYING:this.props.onPlay(e);break;case u.PAUSED:this.props.onPause(e)}},this.onPlayerPlaybackRateChange=e=>this.props.onPlaybackRateChange(e),this.onPlayerPlaybackQualityChange=e=>this.props.onPlaybackQualityChange(e),this.createPlayer=()=>{var e=(0,i.default)((0,i.default)({},this.props.opts),{},{videoId:this.props.videoId});this.internalPlayer=(0,l.default)(this.container,e),this.listeners.push(this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange))},this.resetPlayer=()=>this.internalPlayer.destroy().then(this.createPlayer),this.updatePlayer=()=>{var e=this.internalPlayer.getIframe();this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.className?e.setAttribute("class",this.props.className):e.removeAttribute("class")},this.updateVideo=()=>{if(null!=this.props.videoId){var e,t,a=!1;"playerVars"in this.props.opts&&(a=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(e=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(t=this.props.opts.playerVars.end));var r={videoId:this.props.videoId,startSeconds:e,endSeconds:t};a?this.internalPlayer.loadVideoById(r):this.internalPlayer.cueVideoById(r)}else this.internalPlayer.stopVideo()},this.refContainer=e=>{this.container=e}}componentDidMount(){this.createPlayer()}componentDidUpdate(e){(function(e,t){return e.id===t.id||e.className===t.className})(e,this.props)&&this.updatePlayer(),function(e,t){return!(0,n.default)(d(e.opts),d(t.opts))}(e,this.props)&&this.resetPlayer(),function(e,t){if(e.videoId!==t.videoId)return!0;var a=e.opts.playerVars||{},r=t.opts.playerVars||{};return a.start!==r.start||a.end!==r.end}(e,this.props)&&this.updateVideo()}componentWillUnmount(){this.listeners.forEach((e=>{this.internalPlayer.off(e)})),this.internalPlayer.destroy()}render(){return o.createElement("span",{className:this.props.containerClassName},o.createElement("div",{id:this.props.id,className:this.props.className,ref:this.refContainer}))}}c.defaultProps={id:null,className:null,opts:{playerVars:{}},containerClassName:"",onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},c.displayName="YouTube";var h=c;t.default=h},24156:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(51383)),o=r(a(43334)),l=r(a(79711)),d=r(a(77977)),u=r(a(17957)),c=r(a(81524)),h=r(a(40207));class f extends i.Component{constructor(...e){super(...e),this._filterAdmins=e=>{var{groupMetadata:t}=this.props,a=t.participants.get(e.id);return!(!a||!a.isAdmin)},this._onSelectAdminToMsg=e=>{this.openChat(e.id),l.default.closeModal()},this.openChat=e=>{o.default.find(e).then((e=>{e.quotedMsgAdminGroupJid=this.props.chat.id,l.default.openChatBottom(e)}))},this._onMsgAdmin=()=>{var{groupMetadata:e}=this.props,t=e.participants.getAdmins();1!==t.length?l.default.openModal(i.createElement(d.default,{title:u.default.t(982),filter:this._filterAdmins,onCancel:()=>l.default.closeModal(),onSelect:this._onSelectAdminToMsg})):this.openChat(t[0].id)}}render(){var e=i.createElement("span",{role:"button",onClick:this._onMsgAdmin,className:n.default.adminBtn},u.default.t(227));return i.createElement(c.default,{id:226,params:{admins:e}})}}f.CONCERNS={mute:["isMuted"],chat:["id"],groupMetadata:["participants"]},f.displayName="AnnouncementsOnlyMsgBar";var p=(0,h.default)(f,f.CONCERNS);t.default=p},97238:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.onChangeNumberNotificationClick=g,t.default=void 0;var i=s(a(2784)),n=r(a(64)),o=r(a(92338)),l=r(a(43334)),d=r(a(79711)),u=r(a(7470)),c=r(a(7822)),h=r(a(17957)),f=r(a(61941)),p=r(a(40207)),m=a(40263),_=r(a(74824)),v=r(a(3111));function g(e,t){var a=l.default.gadd(e);a.changeNumberOldJid||(a.changeNumberOldJid=t),a.changeNumberNewJid=void 0,d.default.openChatFromUnread(a).then((e=>{e&&d.default.focusChatTextInput(a)}))}class E extends i.Component{constructor(...e){super(...e),this._messageNewNumber=()=>{var{changeNumberNewJid:e}=this.props.chat,t=this.props.chat.id;g((0,f.default)(e,"changeNumberNewJid"),t)},this._dismissChangeNumberNotification=()=>{this.props.chat.sendDismissChangeNumber()}}_isOldChat(){var{changeNumberOldJid:e,changeNumberNewJid:t}=this.props.chat;return void 0===e&&void 0!==t}_isNewChat(){var{changeNumberOldJid:e,changeNumberNewJid:t}=this.props.chat;return void 0!==e&&void 0===t}getText(){var{changeNumberOldJid:e,id:t}=this.props.chat,a=e||t,r=u.default.get(a),s=r&&r.isMyContact?r.formattedName:(0,v.default)(a);return this._isNewChat()?h.default.t(464,{name:s}):h.default.t(465,{name:s})}render(){var e=null;if(this.props.chat.showChangeNumberNotification){var t=this._isOldChat()?i.createElement("div",{className:o.default.messageNewNumberButton},i.createElement(n.default,{onClick:this._messageNewNumber,type:"plain-white",nowrap:!0},h.default.t(463))):null;e=i.createElement(c.default,{onClose:this._dismissChangeNumberNotification},i.createElement("div",{className:o.default.container},i.createElement(m.TextSpan,{theme:"plain",className:o.default.text},this.getText()),t))}return i.createElement(_.default,{transitionName:"butterbar"},e)}}E.CONCERNS={chat:["changeNumberOldJid","changeNumberNewJid","id","showChangeNumberNotification"]},E.displayName="ChangeNumberNotification";var S=(0,p.default)(E,E.CONCERNS);t.default=S},92545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a},t.setHasText=function(e){a=e};var a=!1},72149:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(72779)),o=a(39329),l=r(a(2784)),d=s(a(32960)),u=s(a(72696)),c=s(a(85567)),h=s(a(57495)),f=s(a(79148)),p=a(76736),m=s(a(79711)),_=a(80073),v=s(a(60353)),g=s(a(46691)),E=s(a(9386)),S=s(a(50935)),C=s(a(17029)),y=s(a(96955)),b=s(a(70727)),T=a(28703),M=a(19741),N=r(a(96452)),I=s(a(93601)),P=a(99888),A=s(a(38147)),O=s(a(68476)),D=s(a(18120)),w=a(75459),R=a(92545),k=s(a(44343)),L=r(a(44202)),x=s(a(36329)),F=s(a(17957)),B=s(a(20227)),G=s(a(89423)),U=r(a(90088)),j=s(a(20642)),V=s(a(40210)),H=s(a(61941)),W=a(18727),Y=s(a(74735)),K=s(a(34837)),q=a(47410),z=a(207),Q=s(a(69789)),X=a(90920),J=s(a(93456)),Z=s(a(77674)),$=a(74556),ee=s(a(61124)),te=a(37960),ae=s(a(68537)),re=s(a(40207)),se=a(64658),ie=s(a(82631)),ne=s(a(67134)),oe=r(a(75074)),le=s(a(17693)),de=s(a(74185)),ue=s(a(76133));function ce(){var e=(0,i.default)(["Unable to retrieve CTWA context data, error: ",""]);return ce=function(){return e},e}function he(){var e=(0,i.default)(["failed loading gif (status: ",")"]);return he=function(){return e},e}var fe=/^https?:\/\/media\.giphy\.com\/media\/([a-zA-Z0-9]+)/,pe=parseInt(x.default["-overlay-border-left"].replace(/px$/,""),10);class me extends l.PureComponent{constructor(e){super(e),this.height=0,this.pendingLinkPreviewPromises=[],this.pasteTriggeredOnChange=!1,this._wasCleared=!1,this.dismissVcardPanel=()=>{(0,se.unproxy)(this.props.chat).dismissVcard()},this.saveComposeContent=()=>{this.props.chat.setComposeContents({text:this.text,selection:this.selection,omittedURL:this.omittedURL,ctwaContextLinkData:this.state.ctwaContextLinkData,ctwaContext:this.state.ctwaContextData})},this.onTextSizeChange=e=>{this.setState({textsize:e})},this.pasteEmojiInput=e=>{if(" "===e&&!this.hasText())return m.default.scrollMessages();var t;this.refComposeBoxInput&&(this.refComposeBoxInput.focus(!0),null===(t=this.refComposeBoxInput)||void 0===t||t.replaceSelection(e))},this.handleRoutedPaste=e=>{var t;this.refComposeBoxInput&&(this.refComposeBoxInput.focus(!0),null===(t=this.refComposeBoxInput)||void 0===t||t.onPaste(e))},this.onMaxPasteExceeded=()=>{m.default.openModal(l.createElement(E.default,{title:F.default.t(1001),onOK:()=>{m.default.closeModal()},okText:F.default.t(1761)},F.default.t(1e3)))},this.restoreFocus=()=>{var e;null===(e=this.refComposeBoxInput)||void 0===e||e.focus()},this.clearLinkPreview=()=>{this.preview=null,this.omitLinkPreview()},this.cancelPendingLinkPreviews=()=>{this.pendingLinkPreviewPromises.forEach((e=>e.cancel())),this.pendingLinkPreviewPromises=[],!0===this.state.isLoadingLinkPreview&&this.setState({isLoadingLinkPreview:!1})},this.omitLinkPreview=(e=!1)=>{!0!==e&&this.state.linkPreview&&(this.omittedURL=this.preview,this.setState({linkPreview:null}))},this.omitQuotedPreview=(e=!1)=>{!0!==e&&(this.props.chat.composeQuotedMsg=null)},this.omitQuotedMsgAdminGroupNamePreview=(e=!1)=>{!0!==e&&(this.props.chat.quotedMsgAdminGroupJid=null)},this._findFirstWebLink=()=>{var e=(0,_.removeCodeBlocks)(this.text);return U.findLinks(e,!0)[0]},this.scanForLinksTimer=new o.ShiftTimer((()=>{if(this.state.hasText&&!this.state.ctwaContextLinkData){var e=this._findFirstWebLink();if(e){var t=e.url;if(!this.preview||this.preview!==t){this.preview=t,this.omittedURL=null;var a=(0,G.default)(t).cancellable().tap((e=>{e&&this.preview&&this.preview===e.url&&e.data&&(e.data.title||e.data.description)&&this.setState({linkPreview:e})}));this.pendingLinkPreviewPromises.push(a),a.catchTypes3(N.Unmount,M.WebdDrop,Promise.CancellationError,(()=>{}))}}else this.clearLinkPreview()}else this.clearLinkPreview()})),this.onInputFocus=()=>{this.indicateFocus(),this.addEmojisToTouchBar()},this.onInputBlur=()=>{this.removeEmojisFromTouchBar()},this.onVoiceRecordingSent=()=>{this.omitCtwa()},this.setChatCtwaContextLinkData=e=>{this.setState({ctwaContextLinkData:e,ctwaContextData:null},(()=>{this.updateCtwaContextState(e)}))},this.omitCtwa=()=>{this.setState({ctwaContextLinkData:null,ctwaContextData:null},(()=>{this.saveComposeContent(),this.scanForLinksTimer.onOrBefore(1)}))},this.indicateFocus=()=>{var e,t=this.refUIE;t&&t.activate(),A.default.maybeIndicateFocus(this.refInputHotkey,x.default.focusAnimation),null===(e=this.refComposeBoxInput)||void 0===e||e.focus(!1)},this.addEmojisToTouchBar=()=>{},this.removeEmojisFromTouchBar=()=>{},this.onPageUpDown=e=>{this.props.onPageUpDown&&(e.stopPropagation(),this.props.onPageUpDown(e),e.persist(),this.restoreFocusTimer.debounce(0))},this.restoreFocusTimer=new o.ShiftTimer((()=>{var e;null===(e=this.refComposeBoxInput)||void 0===e||e.focus(!1)})),this.handleEmoji=e=>{var t;null===(t=this.refComposeBoxInput)||void 0===t||t.replaceSelection(e)},this.handleGif=(e,t,a)=>{var r=(0,I.default)(e,{headers:{Accept:"video/mp4"}}).then((e=>{if(!e.ok)throw __LOG__(3)(he(),e.status),new N.MediaFileFailedLoad;return e.blob()})).then((e=>L.generateVideoThumbsAndDuration(e,[S.default.IMG_THUMB_MAX_EDGE]).then((({thumbs:[r],duration:s})=>({file:e,filename:t,mimetype:e.type,isGif:!0,gifAttribution:a,fullPreview:window.URL.createObjectURL(e),fullPreviewSize:{width:r.fullWidth,height:r.fullHeight},preview:de.default.parseDataURL(r.url).data,duration:s})))));return this.saveComposeContentDebounced.flush(),m.default.attachMediaDrawer({chat:this.props.chat,attachments:[r],initCaption:this.getCurrentComposeContent(),fileOrigin:V.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_GIF_INAPP,onComplete:(e,t)=>{this.updateTextAfterMediaDrawerClose(e,!!t),e&&this.closeEmojiPanel()}}),r.catch((()=>{})),r},this.setRefPanels=e=>{this.refPanels=e},this.handlePanelsDisplayCache=e=>{this.panelsDisplayCache=e},this.handlePanelsGif=(e,t)=>{this.handleGif(e,e,t)},this.handlePanelsSticker=(e,t)=>{e.sendToChat((0,se.unproxy)(this.props.chat),t),this.omitCtwa()},this.handlePanelsFocusRelease=()=>{A.default.shouldIndicateFocus(),this.restoreFocus()},this.openEmojiPanel=()=>{this._setSelectedPanelId(W.PANELS.EMOJI)},this.closeEmojiPanel=()=>{this._setSelectedPanelId(null),this.restoreFocus()},this.onPTTRecState=e=>{this.setState({recording:e})},this.preventBlur=e=>{var t,a,{target:r}=e,s=null===(t=this.refComposeBoxInput)||void 0===t?void 0:t.getRefInput(),i=(0,H.default)(this.refContainer,"this.refContainer");do{if(r===s)return}while(r!==i&&r instanceof HTMLElement&&(r=r.parentNode));Ee(e),null===(a=this.refComposeBoxInput)||void 0===a||a.focus(!1)},this.onChange=e=>{var t=(0,H.default)(this.refComposeBlock,"this.refComposeBlock").clientHeight,a=t-this.height;a&&this.props.onComposeHeightChange({input:a},!1),this.height=t;var r=this.hasText();this.text=e||"",""===e&&(this._wasCleared=!0);var s=this.hasText();s!==r&&this.setState({hasText:s}),s?(this.props.chat.presence.subscribe().catchType(M.WebdDrop,(()=>{})),(0,z.markComposing)(this.props.chat)):(0,z.markPaused)(this.props.chat);var i=this._findFirstWebLink();(!i&&this.preview||i&&i.url!==this.preview)&&this.clearLinkPreview(),this.pasteTriggeredOnChange?this.scanForLinksTimer.onOrBefore(1):this.scanForLinksTimer.debounce(700),this.pasteTriggeredOnChange=!1,this.saveComposeContentDebounced()},this.renderSendButton=()=>{var e=O.default&&window.AudioContext;return this.state.hasText||!e?l.createElement("button",{"data-a8n":d.default.key("compose-btn-send"),className:x.default.btnSend,onClick:this.onSendText,disabled:!this.hasText},l.createElement(ie.default,{name:"send",directional:!0})):l.createElement(Q.default,{key:"ptt",chat:(0,se.unproxy)(this.props.chat),onRecState:this.onPTTRecState,onRecordingSent:this.onVoiceRecordingSent})},this.renderPopupPanel=()=>{var e;if(this.state.linkPreview){var{title:t,canonicalUrl:a,description:r,thumbnail:s}=this.state.linkPreview.data;e=l.createElement(c.default,null,l.createElement(le.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:this.omitLinkPreview},l.createElement(K.default,{onOmit:this.omitLinkPreview},l.createElement(B.default,{title:t,compose:!0,canonicalUrl:a,description:r,thumbnailJpeg:s}))))}var i,n=this.props.chat.composeQuotedMsg,o=this.props.chat.quotedMsgAdminGroupJid,d=this.props.chat.composeQuotedMsgRemoteJid;n?i=l.createElement(c.default,null,l.createElement(le.default,{displayName:"ComposeBoxQuotedMsg",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.omitQuotedPreview},l.createElement(K.default,{onOmit:this.omitQuotedPreview},l.createElement(J.default,{msg:n.safe(),composeQuotedMsgRemoteJid:d,theme:"composeBox",key:n.id.toString(),chat:n.chat})))):o&&(i=l.createElement(c.default,null,l.createElement(le.default,{displayName:"QuotedMsgAdminGroupName",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.omitQuotedPreview},l.createElement(K.default,{onOmit:this.omitQuotedMsgAdminGroupNamePreview},l.createElement(Z.default,{isComposePreview:!0,quotedGroupJid:o,key:o.toString()})))));var h=(0,se.unproxy)(this.props.chat),p=!h.isPSA&&h.shouldAppearInList&&h.msgs&&h.msgs.length>0,m=null;if(p){var _=f.default.get(h.id),v=h.getReceivedVcardMsgs();Boolean(!_&&v&&v.length&&!h.vcardDismissed)&&(m=l.createElement(c.default,null,l.createElement(ue.default,{chat:h,dismissVcardPanel:this.dismissVcardPanel})))}var E=null;!h.trusted&&p&&null==m&&(E=l.createElement(c.default,null,l.createElement(ae.default,{chat:h,contact:h.contact})));var S,C=null;return this.state.selectedPanelId&&null!=this.state.width&&(C=l.createElement(c.default,null,l.createElement(ee.default,{onResize:this._handleResize},l.createElement(g.default,{displayCache:this.panelsDisplayCache,width:this.state.width,onDisplayCache:this.handlePanelsDisplayCache,onEmoji:this.handleEmoji,onFocusRelease:this.handlePanelsFocusRelease,onGif:this.handlePanelsGif,onPanelChange:this.handlePanelChange,onSticker:this.handlePanelsSticker,requestDismiss:this.closeEmojiPanel,forwardedRef:this.setRefPanels,selectedPanelId:this.state.selectedPanelId})))),this.state.ctwaContextLinkData&&(S=l.createElement(c.default,null,l.createElement(le.default,{displayName:"ComposeBoxCtwaContextPreview",escapable:!0,requestDismiss:this.omitCtwa},l.createElement(K.default,{onOmit:this.omitCtwa},l.createElement(b.default,{context:this.state.ctwaContextData,sourceUrl:this.state.ctwaContextLinkData.sourceUrl,compose:!0}))))),l.createElement("div",{className:x.default.positioningContainer},l.createElement("div",{className:x.default.overlayContainer},l.createElement(u.default,{onHeightChange:this.onHeightChange},E,m,C,i,e,S)))},this.onHeightChange=(e,t=!1)=>{this.props.onComposeHeightChange({overlay:e},t)},this.onFiles=e=>{var t=e.getFiles().filter((e=>{var t=(0,P.typeFromMimetype)(e.type);return"image"===t||"video"===t}));if(e.hasType("text/html")){var a=e.getData("text/html");if(a){if(a.includes("<meta name=ProgId content=PowerPoint.Slide>"))return!1;var r=a.includes("urn:schemas-microsoft-com:office"),s=a.includes("urn:schemas-microsoft-com:office:excel");if(r&&!s)return!1}}if(t.length)return this.saveComposeContentDebounced.flush(),m.default.attachMediaDrawer({chat:this.props.chat,attachments:t.map((e=>({file:e}))),fileOrigin:V.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE,initCaption:this.getCurrentComposeContent(),onComplete:this.updateTextAfterMediaDrawerClose}),!0},this.updateTextAfterMediaDrawerClose=(e,t)=>{var a;e&&t&&(null===(a=this.refComposeBoxInput)||void 0===a||a.reset());e&&this.omitCtwa()},this.getCurrentComposeContent=()=>this.props.chat.getComposeContents(),this.onTextPaste=e=>{var t=fe.exec(e);if(t){var a="https://media.giphy.com/media/".concat(t[1],"/200w.mp4");return this.handleGif(a,e,T.VideoMessageAttribution.GIPHY).catch((()=>{var t;(m.default.closeDrawerMid(),this.refComposeBoxInput)&&(this.refComposeBoxInput.focus(!0),null===(t=this.refComposeBoxInput)||void 0===t||t.replaceSelection(e));m.default.openToast(l.createElement(oe.default,{msg:F.default.t(959),id:(0,oe.genId)()}))})),!0}return this.pasteTriggeredOnChange=!0,!1},this.onSelectionChange=e=>{this.selection=e},this.hasText=()=>{var e=this.text.trim().length>0;return(0,R.setHasText)(e),e},this.onEnter=e=>{e&&e.repeat||this.onSendText()},this.onSendText=()=>{var e;(0,$.reconnect)();var t=this.refComposeBoxInput,{chat:a}=this.props;if(t){var r=t.serialize(),[s,i]=[r[0].trim(),r[1]];if(0!==s.length||this.state.ctwaContextLinkData){this.cancelPendingLinkPreviews();var n=a.composeQuotedMsg,o=a.quotedMsgAdminGroupJid,l=null===(e=this.state.linkPreview)||void 0===e?void 0:e.data,d=i.mentionedJidList||[],u=(0,q.prepareCtwaContextSend)(this.state.ctwaContextLinkData,this.state.ctwaContextData),c=this._wasCleared;this._setSelectedPanelId(null),this.setState({hasText:!1,linkPreview:null},(()=>{if(c){var e=(0,se.unproxy)(a);e.urlText&&(e.urlText=void 0)}(0,te.sendTextMsgToChat)(a,s,{linkPreview:l,quotedMsg:n,mentionedJidList:d,quotedMsgAdminGroupJid:o,ctwaContext:u}),this._wasCleared=!1})),this.omitCtwa(),a.composeQuotedMsg=null,a.quotedMsgAdminGroupJid=null,a.composeQuotedMsgRemoteJid=null,a.setComposeContents({}),t.reset(),this.text="",this.hasText()}}},this.handlePanelChange=e=>{this._setSelectedPanelId(e)},this.handleTab=e=>{this.state.selectedPanelId&&(this.refPanels&&this.refPanels.restoreFocus(!0),Ee(e))},this.setRefUIE=e=>{this.refUIE=e},this.setRefContainer=e=>{this.refContainer=e},this.setRefComposeBlock=e=>{this.refComposeBlock=e},this.setRefInputHotkey=e=>{this.refInputHotkey=e},this.setRefComposeBoxInput=e=>{this.refComposeBoxInput=e},this._handleResize=({width:e})=>{this.state.width!==e&&this.setState({width:e})};var{chat:t}=e,a=t.getComposeContents();this.text=a.text||"",this.selection=a.selection,this.preview=this.omittedURL=a.omittedURL,this.saveComposeContentDebounced=this.props.debounce(this.saveComposeContent,200),this.state={hasText:!!this.text,recording:!1,linkPreview:null,isLoadingLinkPreview:!1,selectedPanelId:null,textsize:C.default.get().textsize,width:null,ctwaContextLinkData:a.ctwaContextLinkData,ctwaContextData:a.ctwaContext}}componentDidMount(){var{listeners:e,chat:t}=this.props;if(this.props.listeners.add(f.default,"add remove reset",(()=>{this.forceUpdate()})),D.default.supportsFeature(D.default.F.INDEX_RECEIVED_VCARD)){var a=t.getReceivedVcardMsgs();a&&e.add(a,"add remove reset",(()=>{this.forceUpdate()}))}this.height=(0,H.default)(this.refComposeBlock,"this.refComposeBlock").clientHeight,this.scanForLinksTimer.debounceAndCap(50,50);var{ctwaContextLinkData:r}=this.state;!r||this.state.ctwaContextData&&this.state.ctwaContextData.sourceUrl===r.sourceUrl||this.setState({ctwaContextData:null},(()=>{this.updateCtwaContextState(r)}))}componentWillUnmount(){this.scanForLinksTimer.cancel(),this.restoreFocusTimer.cancel(),this.saveComposeContent(),this.removeEmojisFromTouchBar()}updateCtwaContextState(e){this.saveComposeContent(),this.clearLinkPreview(),e.sourceUrl&&(0,X.fetchCtwaContextData)(e).then((e=>{this.setState({ctwaContextData:e},(()=>{this.saveComposeContent()}))})).catch((e=>{__LOG__(3)(ce(),e)}))}_setSelectedPanelId(e){var t=null==this.state.selectedPanelId&&null!=e;this.setState({selectedPanelId:e,width:t&&null!=this.refComposeBlock?this.refComposeBlock.offsetWidth-pe:this.state.width})}render(){return l.createElement(le.default,{displayName:"ComposeBox",ref:this.setRefUIE,uimState:le.default.State.PASSIVE,requestFocus:this.restoreFocus},l.createElement(k.default,{component:"footer",handlers:{pagedown:this.onPageUpDown,pageup:this.onPageUpDown},className:x.default.footer,onRef:this.setRefContainer,onContextMenu:this.preventBlur,onMouseDown:this.preventBlur},null,l.createElement(y.default,{canCut:!0,className:(0,n.default)(x.default.blockCompose,Se(this.state.textsize)),ref:this.setRefComposeBlock},l.createElement("div",{className:(0,n.default)(x.default.childPadding,x.default.boxPanelWrapper)},l.createElement(Y.default,{selectedPanelId:this.state.selectedPanelId,onChange:this.handlePanelChange}),l.createElement("div",{className:x.default.attachButtonContainer},l.createElement(h.default,{chat:(0,se.unproxy)(this.props.chat),getComposeContents:this.getCurrentComposeContent,onMenuComplete:this.updateTextAfterMediaDrawerClose}))),l.createElement(k.default,{onRef:this.setRefInputHotkey,className:(0,n.default)(x.default.inputContainer,{[x.default.disabled]:this.state.recording}),handlers:{tab:this.handleTab,"shift+tab":this.handleTab},onFocus:this.onInputFocus,onBlur:this.onInputBlur},l.createElement(v.default,{a8n:"conversation-compose-box-input",placeholder:F.default.t(1404),readOnly:this.state.recording,ref:this.setRefComposeBoxInput,initialValue:this.text,initialSelection:this.selection,spellCheck:!0,multiline:!0,maxLength:S.default.MAX_TXT_MSG_SIZE,onMaxPasteExceeded:this.onMaxPasteExceeded,onEnter:this.onEnter,onFiles:this.onFiles,onTextPaste:this.onTextPaste,onChange:this.onChange,onSelect:this.onSelectionChange,textPasteMimePriority:[p.APP_TEXT_MIMETYPE,"text/plain"],theme:"compose"})),l.createElement("div",{className:x.default.childPadding},this.renderSendButton())),this.renderPopupPanel(),l.createElement(v.default.EmojiSuggestions,{chat:(0,se.unproxy)(this.props.chat)}),l.createElement(ge,{key:this.props.chat.id.toString(),parent:this,chatId:this.props.chat.id}),l.createElement(v.default.Suggestions,{chat:(0,se.unproxy)(this.props.chat)}),(0,w.canSendQuickReply)()&&l.createElement(v.default.QuickRepliesSuggestions,{chat:(0,se.unproxy)(this.props.chat)})))}}me.CONCERNS={chat:["id","trusted","composeContents","composeQuotedMsg","isPSA","isGroup","shouldAppearInList","presence","contact","attachMediaContents","quotedMsgAdminGroupJid","receivedVcardMsgs","vcardDismissed","composeQuotedMsgRemoteJid"]},me.displayName="ComposeBox";var _e=(0,ne.default)((0,j.default)((0,re.default)(me,me.CONCERNS)));t.default=_e;class ve extends l.PureComponent{constructor(...e){super(...e),this.restoreFocus=()=>{this.props.parent.restoreFocus()},this.pasteEmojiInput=e=>{this.props.parent.pasteEmojiInput(e)},this.handleRoutedPaste=e=>{this.props.parent.handleRoutedPaste(e)},this.onSendText=()=>{this.props.parent.onSendText()},this.onTextSizeChange=e=>{this.props.parent.onTextSizeChange(e)},this.setChatCtwaContextLinkData=e=>{this.props.parent.setChatCtwaContextLinkData(e)}}componentDidMount(){var{chatId:e,listeners:t}=this.props;t.add(m.default,"focus_chat_text_input_".concat(e.toString()),this.restoreFocus),t.add(m.default,"paste_chat_text_input_".concat(e.toString()),this.pasteEmojiInput),t.add(m.default,"send_paste_to_compose_".concat(e.toString()),this.handleRoutedPaste),t.add(m.default,"enter_chat_text_input_".concat(e.toString()),this.onSendText),t.add(m.default,"chat_set_ctwa_context_link_data_".concat(e.toString()),this.setChatCtwaContextLinkData),t.add(m.default,"focus_chat_text_input",this.restoreFocus),t.add(m.default,"textsize_change",this.onTextSizeChange)}render(){return null}}ve.displayName="ComposeBoxCmd";var ge=(0,j.default)(ve);function Ee(e){e&&(e.preventDefault(),e.stopPropagation())}function Se(e){for(var t=S.default.TEXTSIZE_CLASS_MAP,a=0;a<t.length;a++)if(t[a].scale===e)return t[a].classname}},18727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PANELS=void 0;t.PANELS={EMOJI:"EMOJI",GIF:"GIF",STICKER:"STICKER"}},22224:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var i=s(a(58527)),n=s(a(22220)),o=r(a(2784)),l=(a(12097),r(a(82512))),d=s(a(3815)),u=s(a(18120)),c=r(a(60312)),h=a(18727),f=s(a(72424)),p=r(a(71595)),m=s(a(17693));class _ extends o.PureComponent{constructor(e){super(e),this.restoreFocus=e=>{switch(this.props.selectedPanelId){case h.PANELS.STICKER:this._refStickerPanel&&this._refStickerPanel.restoreFocus();break;case h.PANELS.GIF:this._refGifPanel&&this._refGifPanel.restoreFocus(e);break;case h.PANELS.EMOJI:default:this._refEmojiPanel&&this._refEmojiPanel.restoreFocus(e)}},this._setRefEmojiPanel=e=>{this._refEmojiPanel=e},this._setRefGifPanel=e=>{this._refGifPanel=e},this._setRefStickerPanel=e=>{this._refStickerPanel=e},this._setRefStickerPanelMd=e=>{this._refStickerPanel=e},this._handleEmojiPanelDisplayCache=e=>{this._emojiPanelDisplayCache=e,this._triggerDisplayCache()},this._handleEmojiPanelFocusNext=()=>{this.props.onPanelChange(h.PANELS.GIF)},this._handleEmojiPanelFocusPrev=()=>{this.props.onFocusRelease()},this._handleGifPanelDisplayCache=e=>{this._gifPanelDisplayCache=e,this._triggerDisplayCache()},this._handleTextChange=e=>{this.setState({searchText:e})},this._handleGifPanelFocusNext=()=>{this.props.onPanelChange(h.PANELS.STICKER)},this._handleGifPanelFocusPrev=()=>{this.props.onPanelChange(h.PANELS.EMOJI)},this._handleRequestFocus=()=>{this.restoreFocus(!1)},this._handleStickerPanelDisplayCache=e=>{this._stickerPanelDisplayCache=e,this._triggerDisplayCache()},this._handleStickerPanelFocusNext=()=>{this.props.onFocusRelease()},this._handleStickerPanelFocusPrev=()=>{this.props.onPanelChange(h.PANELS.GIF)},e.displayCache&&(this._emojiPanelDisplayCache=e.displayCache.emojiPanel,this._gifPanelDisplayCache=e.displayCache.gifPanel,this._stickerPanelDisplayCache=e.displayCache.stickerPanel),this.state={searchText:""}}_triggerDisplayCache(){this.props.onDisplayCache({emojiPanel:this._emojiPanelDisplayCache,gifPanel:this._gifPanelDisplayCache,stickerPanel:this._stickerPanelDisplayCache})}render(){var e=null;switch(this.props.selectedPanelId){case h.PANELS.STICKER:u.default.supportsFeature(u.default.F.MD_BACKEND)?f.default.webServerStickerPanel&&(e=o.createElement(c.default,{ref:this._setRefStickerPanelMd,displayLocation:c.DISP_LOCATION.COMPOSE_BOX,displayCache:this._stickerPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker})):e=o.createElement(p.default,{ref:this._setRefStickerPanel,displayCache:this._stickerPanelDisplayCache,displayLocation:p.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleStickerPanelDisplayCache,onFocusPrev:this._handleStickerPanelFocusPrev,onFocusNext:this._handleStickerPanelFocusNext,onSticker:this.props.onSticker});break;case h.PANELS.EMOJI:default:e=o.createElement(l.default,{ref:this._setRefEmojiPanel,displayCache:this._emojiPanelDisplayCache,width:this.props.width,displayLocation:l.DISP_LOCATION.COMPOSE_BOX,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleEmojiPanelDisplayCache,onEmoji:this.props.onEmoji,onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext});break;case h.PANELS.GIF:e=o.createElement(d.default,{ref:this._setRefGifPanel,displayCache:this._gifPanelDisplayCache,onChange:this._handleTextChange,defaultSearchText:this.state.searchText,onDisplayCache:this._handleGifPanelDisplayCache,onFocusRelease:this.props.onFocusRelease,onFocusNext:this._handleGifPanelFocusNext,onFocusPrev:this._handleGifPanelFocusPrev,onGif:this.props.onGif})}return e&&o.createElement(m.default,{displayName:"ComposeBoxPanels",escapable:!0,requestDismiss:this.props.requestDismiss,requestFocus:this._handleRequestFocus},e)}}function v(e){var{forwardedRef:t}=e,a=(0,n.default)(e,["forwardedRef"]);return o.createElement(_,(0,i.default)({ref:t},a))}_.displayName="ComposeBoxPanels",v.displayName="ComposeBoxPanelsWithRef"},74735:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OPEN_MENU_WIDTH=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(50935)),d=a(95595),u=s(a(18120)),c=s(a(17957)),h=a(18727),f=s(a(37264)),p=r(a(23219)),m=s(a(72424)),_=parseInt(f.default["-open-menu-width"].replace(/px$/,""),10);t.OPEN_MENU_WIDTH=_;class v extends n.PureComponent{constructor(...e){super(...e),this._handleOpenClick=()=>{this.props.onChange(this._getLastSelectedPanel())},this._handleCloseClick=()=>{this.props.onChange(null)},this._handleEmojiClick=()=>{Boolean(this.props.selectedPanelId)?((0,d.setLastComposeBoxPanel)(h.PANELS.EMOJI),this.props.onChange(h.PANELS.EMOJI)):this._handleOpenClick()},this._handleGifClick=()=>{(0,d.setLastComposeBoxPanel)(h.PANELS.GIF),this.props.onChange(h.PANELS.GIF)},this._handleStickerClick=()=>{(0,d.setLastComposeBoxPanel)(h.PANELS.STICKER),this.props.onChange(h.PANELS.STICKER)},this._setRefCloseButtonRef=e=>{this._refCloseButton=e},this._setRefEmojiButtonRef=e=>{this._refEmojiButton=e},this._setRefGifButtonRef=e=>{this._refGifButton=e},this._setRefStickerButtonRef=e=>{this._refStickerButton=e},this._setRefMenu=e=>{this._refMenu=e}}_getLastSelectedPanel(){return(0,d.getLastComposeBoxPanel)()||h.PANELS.EMOJI}render(){var e=Boolean(this.props.selectedPanelId),t=!u.default.supportsFeature(u.default.F.MD_BACKEND)||m.default.webServerStickerPanel;return n.createElement("div",{"data-state":e?"open":"closed",ref:this._setRefMenu,className:(0,i.default)(f.default.menu,{[f.default.open]:e,[f.default.full]:t})},n.createElement(p.default,{"aria-label":c.default.t(3),className:(0,i.default)(f.default.button,f.default.closeButton),"data-tab":e?l.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON:null,icon:"x",onClick:this._handleCloseClick,onRef:this._setRefCloseButtonRef,size:p.SIZES.SQUARE24}),n.createElement(p.default,{"aria-label":c.default.t(22),className:(0,i.default)(f.default.button,f.default.firstButton),"data-a8n":o.default.key("compose-btn-emoji"),"data-tab":e?null:l.default.TAB_ORDERS.COMPOSE_BOX_MENU_BUTTON,icon:"smiley",isActive:this.props.selectedPanelId===h.PANELS.EMOJI,isMain:!0,onClick:this._handleEmojiClick,onRef:this._setRefEmojiButtonRef,size:p.SIZES.SQUARE26}),n.createElement(p.default,{"aria-label":c.default.t(23),className:(0,i.default)(f.default.button,f.default.secondButton),icon:"gif",isActive:this.props.selectedPanelId===h.PANELS.GIF,onClick:this._handleGifClick,onRef:this._setRefGifButtonRef,size:p.SIZES.SQUARE26}),t&&n.createElement(p.default,{"aria-label":c.default.t(24),className:(0,i.default)(f.default.button,f.default.thirdButton),icon:"sticker",isActive:this.props.selectedPanelId===h.PANELS.STICKER,onClick:this._handleStickerClick,onRef:this._setRefStickerButtonRef,size:p.SIZES.SQUARE26}))}}t.default=v,v.displayName="ComposeBoxPanelsMenu"},23219:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZES=t.ITEM_SPACING=t.ITEM_WIDTH=void 0;var i=s(a(2784)),n=r(a(72779)),o=r(a(44343)),l=r(a(56951)),d=r(a(82631)),u=parseInt(l.default["-item-width"].replace(/px$/,""),10);t.ITEM_WIDTH=u;var c=parseInt(l.default["-item-spacing"].replace(/px$/,""),10);t.ITEM_SPACING=c;var h={SQUARE24:"SQUARE24",SQUARE26:"SQUARE26"};t.SIZES=h;class f extends i.PureComponent{constructor(...e){super(...e),this._handleKeyboardActivation=e=>{e.stopPropagation(),e.preventDefault(),this.props.onClick()},this._handleClick=()=>{this.props.onClick()}}render(){return i.createElement(o.default,{component:"button",className:(0,n.default)(l.default.container,this.props.className,{[l.default.active]:this.props.isActive,[l.default.top]:this.props.isMain||this.props.singleButton,[l.default.padding]:this.props.singleButton,[l.default.square24]:this.props.size===h.SQUARE24,[l.default.square26]:this.props.size===h.SQUARE26}),"aria-label":this.props["aria-label"],"data-tab":this.props["data-tab"],"data-a8n":this.props["data-a8n"],onClick:this._handleClick,onRef:this.props.onRef,handlers:{enter:this._handleKeyboardActivation,space:this._handleKeyboardActivation}},i.createElement(d.default,{name:this.props.icon}))}}t.default=f,f.displayName="ComposeBoxPanelsMenuButton"},34837:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(69327)),o=r(a(82631));class l extends i.Component{constructor(...e){super(...e),this._refDiv=i.createRef(),this.getElement=()=>this._refDiv.current}render(){return i.createElement("div",{className:n.default.panel,ref:this._refDiv},i.createElement("div",{className:n.default.body},this.props.children),i.createElement("div",{className:n.default.cancelButton},i.createElement("div",{role:"button",onClick:this.props.onOmit},i.createElement(o.default,{name:"x"}))))}}t.default=l,l.displayName="PopupPanel"},72780:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(43322),o=r(a(62830)),l=r(a(79711)),d=r(a(9386)),u=r(a(24211)),c=r(a(14457)),h=r(a(71201)),f=r(a(17957)),p=r(a(81524)),m=r(a(20642)),_=r(a(60733)),v=r(a(60949)),g=r(a(50540)),E=a(89590),S=r(a(2734)),C=a(25995),y=r(a(40207)),b=r(a(17026));class T extends i.PureComponent{constructor(...e){super(...e),this._refDropdown=i.createRef(),this.getElement=()=>this._refDropdown.current,this._forceUpdate=()=>{this.forceUpdate()},this.reportSpam=()=>{(0,E.sendSpamReport)(this.props.chat,C.SpamFlow.Dropdown),l.default.closeModal()},this.reportSpamBlock=()=>{var{chat:e,contact:t}=this.props;(0,E.sendSpamReport)(e,C.SpamFlow.Block),(0,n.blockContact)(t),l.default.closeModal()},this.reportSpamBlockClear=()=>{(0,E.sendSpamBlockClear)(this.props.chat),l.default.closeModal()},this.onReportSpam=()=>{l.default.openModal(i.createElement(g.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>l.default.closeModal()}))},this.blockContact=()=>{(0,n.blockContact)(this.props.contact),l.default.closeModal()},this.unblockContact=()=>{(0,n.unblockContact)(this.props.contact),l.default.closeModal()},this.onBlockContact=()=>{l.default.openModal(i.createElement(o.default,{contact:this.props.contact,onCancel:()=>l.default.closeModal(),onBlock:this.blockContact,onReportSpamBlock:this.reportSpamBlock}))},this.onUnblockContact=()=>{var e=i.createElement(v.default,{contact:this.props.contact});l.default.openModal(i.createElement(d.default,{okText:f.default.t(1407),onOK:this.unblockContact,cancelText:f.default.t(1593),onCancel:()=>l.default.closeModal()},i.createElement(p.default,{id:1408,params:{contact:e}})))}}componentDidMount(){this.props.listeners.add(b.default,"change:displayInfo",this._forceUpdate)}menus(){var{chat:e,contact:t,onSelectMessages:a}=this.props,r=[];return e.isPSA||r.push(i.createElement(h.default,{key:"info",a8n:"mi-contact",action:()=>l.default.chatInfoDrawer(e)},f.default.t(1605))),t.isBusiness&&r.push(i.createElement(h.default,{key:"report",a8n:"report",action:this.onReportSpam},f.default.t(1235)),i.createElement(h.default,{key:"block",a8n:"block",action:t.isBlocked()?this.onUnblockContact:this.onBlockContact},t.isBlocked()?f.default.t(1407):f.default.t(279))),r.push(i.createElement(h.default,{a8n:"mi-select-messages",key:"select",action:a},f.default.t(1827))),e.mute.canMute()&&r.push(i.createElement(_.default,{key:"mute",onMute:t=>l.default.muteChat(e,t),mute:e.mute,chat:e,settings:S.default})),r.push(i.createElement(h.default,{key:"clear",a8n:"mi-clear",action:()=>l.default.clearChat(e)},f.default.t(495))),r.push(i.createElement(u.default,{key:"delete",onDeleteOrExit:()=>l.default.deleteOrExitChat(e),chat:e})),r}render(){return this.props.toContextMenuManager?i.createElement("div",{ref:this._refDropdown},this.menus()):i.createElement(c.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"ContactMenuDropdown",flipOnRTL:!0,dirX:"LEFT"},this.menus())}}T.CONCERNS={chat:["isPSA","mute"],contact:["id","isBusiness","name","isContactBlocked"]},T.displayName="ContactMenuDropdown";var M=(0,m.default)((0,y.default)(T,T.CONCERNS));t.default=M},99850:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(a(19976));var i=s(a(45455)),n=r(a(2784)),o=s(a(89216)),l=s(a(23109)),d=s(a(79711)),u=s(a(50935)),c=s(a(52468)),h=a(19741),f=s(a(84941)),p=s(a(20642)),m=s(a(58885)),_=s(a(72424)),v=s(a(17026)),g=s(a(67134));class E extends n.Component{constructor(){super(...arguments),this._refContainer=n.createRef(),this._msgCollectionChanged=(e,t,a,r)=>{var s=this.state.msgCollection;s!==e&&s!==t||this.setState({msgCollection:a,focusCtx:r&&(r.msg||r.collection)?r:this.state.focusCtx})},this._windowGainedFocus=()=>{v.default.markAvailable();var e=this.state.chat;e&&e.isUser&&e.presence.subscribe().catchType(h.WebdDrop,(()=>{}))},this._windowLostFocus=()=>{v.default.markUnavailable(u.default.SEND_UNAVAILABLE_WAIT)},this._handleCloseChat=e=>{this.state.chat===e&&this.setState({chat:void 0,msgCollection:void 0,focusCtx:void 0})},this._handleOpenChatId=0,this._handleOpenChat=(e,t,a)=>{d.default.updateChatlistSelection(e);var r=this._openedChatInfo,s={};this._openedChatInfo=s;var i=t?t.collection:e.msgs;this._handleOpenChatId++;var n=this._handleOpenChatId,o=()=>n===this._handleOpenChatId,l=!1,u=()=>{o()&&(l=!0,a(this._newChatScrollInfo(r,t)))},c=t&&t.msg&&t.msg.id||t&&t.key;this.setState({chat:e,msgCollection:i,focusCtx:t,notifyChatRendered:e=>{!l&&o()&&(c?e.some((e=>e.id.equals(c)))&&u():u())},updateOpenedChatInfo:e=>{Object.assign(s,e)}})},this._newChatScrollInfo=(e,t)=>{var a=t?t.msg||m.default.get(t.key):void 0;if(t&&a&&e){var{chat:r,renderedMsgsInfo:s,visibleMsgOrder:n}=e;if(r&&s&&n&&!(0,i.default)(s)&&!(0,i.default)(n)){var o=s[n[0].toString()],l=Object.keys(s).find((e=>e===a.id.toString())),d=l?s[l]:null;if(d)return{wasVisible:!0,offset:d.offset};if(r===a.chat)return o&&a.t<o.t?{wasVisible:!1,alignAt:"top"}:{wasVisible:!1,alignAt:"bottom"}}}return{wasVisible:!1,alignAt:"center"}},this.state={chat:void 0,msgCollection:void 0,focusCtx:void 0,showConversationPreview:!1,animate:void 0}}componentDidMount(){this.props.listeners.add(d.default,"open_chat",this._handleOpenChat),this.props.listeners.add(d.default,"close_chat",this._handleCloseChat),this.props.listeners.add(window,"focus",this._windowGainedFocus),this.props.listeners.add(window,"blur",this._windowLostFocus),_.default.wallpapersV2&&(this.props.listeners.add(l.default,"wallpaper_drawer_open",(()=>{this.setState({showConversationPreview:!0})})),this.props.listeners.add(l.default,"wallpaper_drawer_close",(()=>{this.setState({showConversationPreview:!1})})))}shouldComponentUpdate(e,t){return t!==this.state||e.animate!==this.props.animate}componentDidUpdate(e,t){var a=this.state.chat,r=t.chat;if(a&&r!==a){if(this.props.listeners.add(a,"change:cmc:merge",this._msgCollectionChanged),r&&this.props.listeners.remove(r,"change:cmc:merge",this._msgCollectionChanged),!a.contact.isBusiness)return;var s=o.default.get(a.id);s&&!s.stale||o.default.find(a.id)}}animatePanel(e,t){return!!this._refContainer.current&&this._refContainer.current.animatePanel(e,t)}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.containsDOMNode(e)}static getDerivedStateFromProps(e,t){return null==t.animate?{animate:e.animate}:!1!==t.animate?{animate:!1}:null}render(){var{chat:e,msgCollection:t,focusCtx:a,showConversationPreview:r,animate:s}=this.state;return e&&t||r?n.createElement(c.default,{chat:e,groupMetadata:null==e?void 0:e.groupMetadata,chatPreference:l.default.assertGet("defaultPreference"),focusCtx:a,msgCollection:t,notifyChatRendered:this.state.notifyChatRendered||(()=>{}),updateOpenedChatInfo:this.state.updateOpenedChatInfo||(()=>{}),key:null==e?void 0:e.id.toString(),ref:this._refContainer,showPreview:r}):n.createElement(f.default,{animate:s,ref:this._refContainer})}}E.displayName="Conversation";var S=(0,p.default)((0,g.default)(E));t.default=class extends S{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},47106:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var i=s(a(58527)),n=r(a(2784)),o=s(a(50935)),l=s(a(73554)),d=s(a(72424)),u=s(a(2220)),c=a(80084);function h({wallpaperColor:e,showDoodle:t}){var{theme:a}=n.useContext(u.default);if((d.default.wallpapersV2?t:e===o.default.DEFAULT_CHAT_WALLPAPER)&&(0,c.colorExistsInTheme)(e,a)){var r={opacity:(0,c.getDoodleOpacity)(e,a)},s={};return s[(0,c.getDoodleAssetName)(e,a)]=!0,n.createElement("div",(0,i.default)({className:l.default.tile},s,{style:r}))}return null}h.displayName="ConversationBackground"},71745:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(22220)),n=s(a(19976)),o=s(a(70417)),l=s(a(45455)),d=s(a(84336)),u=s(a(54073)),c=s(a(12436)),h=s(a(72779)),f=a(39329),p=r(a(2784)),m=s(a(28316)),_=s(a(88665)),v=s(a(8701)),g=a(46774),E=s(a(19899)),S=s(a(79711)),C=s(a(50935)),y=s(a(72780)),b=s(a(7681)),T=s(a(17029)),M=s(a(12893)),N=s(a(96955)),I=s(a(45090)),P=a(19741),A=r(a(96452)),O=s(a(6660)),D=s(a(18120)),w=a(13414),R=s(a(17957)),k=s(a(20642)),L=s(a(22493)),x=a(73157),F=s(a(30870)),B=s(a(58885)),G=s(a(61941)),U=s(a(72259)),j=s(a(36533)),V=s(a(75681)),H=s(a(82631)),W=r(a(75074)),Y=s(a(77626)),K=s(a(17693)),q=s(a(63498)),z=s(a(42097)),Q=a(58269),X=s(a(91378)),J=s(a(74824));function Z(){var e=(0,n.default)(["MRM noEarlierMsgs on chat "," is true but chat.msgChunks has length: ",",\nand chat.msgs.length: ",""]);return Z=function(){return e},e}function $(){var e=(0,n.default)(["ConversationMsgs:loadRecentMsgs failed\n",""],["ConversationMsgs:loadRecentMsgs failed\\n",""]);return $=function(){return e},e}function ee(){var e=(0,n.default)(["ConversationMsgs:loadEarlierMsgs failed\n",""],["ConversationMsgs:loadEarlierMsgs failed\\n",""]);return ee=function(){return e},e}class te extends p.Component{constructor(e){super(e),this._chatOpenScrollTimestamp=0,this._renderedMsgCache=new Map,this._visibleMsgOrder=[],this._setScrollContainer=e=>this.scrollContainer=e,this.onPanesWillChange=()=>{var e=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(e){var t=e.toString(),a=this.messageList;if(t&&a){var r,s=null===(r=a.getMsgWrapperRef(t))||void 0===r?void 0:r.getContainerElement();if(s){var i=this.scrollContainer;if(!i)return;var n=this._getMsgBottom(i,s);this._panesChanging={msg:s,container:i,msgBottom:n}}}}},this.onPanesDidChange=()=>{if(this._panesChanging){var{msg:e,container:t,msgBottom:a}=this._panesChanging;this._setMsgBottom(t,e,a),this._panesChanging=void 0}},this._attachMsgCollectionObservers=e=>{var{listeners:t,chat:a,msgCollection:r}=this.props,{focusCtx:s,chat:i,msgCollection:n}=e;r&&(t.remove(r,"remove_msgs",this._onMsgsDelete),t.remove(a.msgs,"change:last",this._onLastMsgChanged)),t.remove(a,"change:unreadCount",this._onUnreadCount),null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._msgLoadStateChangeUnsubscribe=n.onMsgLoadStateChange(this._handleMsgLoadStateChange),t.add(i,"change:unreadCount",this._onUnreadCount),t.add(i.msgs,"change:last",this._onLastMsgChanged),t.add(n,"remove_msgs",this._onMsgsDelete),s&&n.loadAroundPromise&&n.loadAroundPromise.checkpoint(this.props.rejectOnUnmount()).catchType(A.Unmount,(()=>{})).catchType(P.E404,(()=>{S.default.openToast(p.createElement(W.default,{msg:R.default.t(999),id:(0,W.genId)()}))}))},this._updateForCurrentPosition=(0,c.default)((()=>{var e=this.props.rejectOnUnmount();(0,I.default)({signal:e}).then((()=>{e.isRejected()||(this._updateRenderedMsgCache(),m.default.unstable_batchedUpdates((()=>{var{scrollContainer:e}=this;if(null!=e){e.scrollTop<300&&this.loadEarlierMsgs();var{isNearBottom:t,cursor:a}=this.state,r=this._nearBottom();r?(this._maybeSendSeen(!0),le(this.props)&&t!==r&&this.setState({isNearBottom:r,newUnread:0}),(a.getEnd(this.props.msgCollection)<this.props.msgCollection.length||!le(this.props))&&this._loadRecentMsgs()):t!==r&&this.setState({isNearBottom:r})}})))})).catchType(v.default,(()=>{}))}),100),this._handleMsgLoadStateChange=()=>{var e=this.state.msgLoadState,t=se(this.props.msgCollection),a={msgLoadState:t};if(e.isLoadingAroundMsgs&&!t.isLoadingAroundMsgs){var r=re(this.props.focusCtx),s=r&&r.msg;s&&(a=(0,o.default)((0,o.default)({},a),{},{cursor:this.state.cursor.init(s.id,this.props.msgCollection),focusCtx:r}))}this.setState(a)},this._onResizeThrottle=(0,c.default)((()=>{this._updateRenderedMsgCache()}),100),this.onMsgKeyChange=({newKey:e,oldKey:t})=>{var a=t.toString(),r=e.toString(),s=this._renderedMsgCache.get(a);s&&(this._renderedMsgCache.delete(a),this._renderedMsgCache.set(r,s));for(var i=0;i<this._visibleMsgOrder.length;++i)if(this._visibleMsgOrder[i]===t){this._visibleMsgOrder[i]=e;break}},this._onResizeDebounce=(0,u.default)((()=>{var e=this._nearBottom();this._nearBottom!==e&&this.setState({isNearBottom:e})}),100),this.loadEarlierMsgs=()=>{var{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;if(a.getStart(t)>0)a.hasBefore(t)&&this.setState({cursor:a.loadBefore(t)});else{if(r.isLoadingEarlierMsgs||r.isLoadingAroundMsgs)return;if(ie(e,le(this.props),r)&&(t.msgLoadState.noEarlierMsgs=!1),t.msgLoadState.noEarlierMsgs)return;e.loadEarlierMsgs(t).checkpoint(this.props.rejectOnUnmount()).then((()=>{var e={};this.state.focusCtx||(e.focusCtx=oe(this.props,this.state.unreadCount)),a.hasBefore(t)?(e.cursor=a.loadBefore(t),this.setState(e)):this.setState(e)})).catchType(A.Unmount,(()=>{})).catch((e=>{__LOG__(2)(ee(),e)}))}},this._loadRecentMsgs=()=>{var{chat:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;if(a.getEnd(t)<t.length)this.setState({cursor:a.loadAfter(t)});else{if(r.isLoadingRecentMsgs||r.isLoadingAroundMsgs)return;this._loadRecentMsgsPromise=e.loadRecentMsgs(t).cancellable().checkpoint(this.props.rejectOnUnmount()).then((()=>{a.hasAfter(t)?this.setState({cursor:a.loadAfter(t)}):this.state.cursor.getEnd(t)>=t.length&&le(this.props)&&this.forceUpdate()})).catchType(A.Unmount,(()=>{})).catch((e=>{__LOG__(2)($(),e)})).finally((()=>{this._loadRecentMsgsPromise=null}))}},this.onComposeHeightChange=e=>{var t=this.scrollContainer;if(t)if(e){if(t&&e<0&&t.scrollTop===t.scrollHeight-t.clientHeight)return;this._setScrollTop(t,t.scrollTop+e)}else{var a=t.scrollHeight-(t.scrollTop+t.clientHeight);(0,X.default)(t,{tween:18},{progress:()=>{this._setScrollTop(t,t.scrollHeight-a-t.clientHeight)},duration:300},[.1,.82,.25,1])}},this._getScrollContainer=()=>(0,G.default)(this.scrollContainer,"this.scrollContainer"),this.getScrollBottom=()=>{var e=this.scrollContainer;return e?e.scrollHeight-(e.scrollTop+e.clientHeight):0},this._hideStickyDateMarker=new f.ShiftTimer((()=>{this._stickyDateMarker&&this._stickyDateMarker.setVisibility(!1)})),this._updateStickyDateMarker=new f.ShiftTimer((e=>{var{dateMarkerIdx:t,silent:a=!1}=e||{},r=this.messageList;if(r&&"number"==typeof t){a||Date.now()-(this._programmaticScroll||0)<200||this._showStickyDateMarker();var s=r.getDateMarkerRef(t);if(-1===t)this._stickyDateMarker.updateDateMarkerText();else if(s){var i=s.getTimestamp(),n=E.default.relativeDateStr(i).toUpperCase();this._stickyDateMarker.updateDateMarkerText(n)}if(this._dateMarkerIdx!==t){var o=r.getDateMarkerRef(this._dateMarkerIdx);o&&o.show(),s&&s.hide()}}})),this.isMsgVisible=(e,t=!1)=>this._renderedMsgCache.has(e.toString())&&(!!t||this.getMsgComponent(e)),this.getSequentialMsg=e=>{var t=this.getMsgs();if(t){var a=t.findIndex((t=>e.equals(t.id)));return a>=t.length-1?null:t[a+1]}},this.onScroll=()=>{this._updateForCurrentPosition()},this.onWindowGainedFocus=()=>{var e=this.props.chat;!this._clearUnreadTimer&&e.isDirty()&&(this._clearUnreadTimer=setTimeout((()=>{delete this._clearUnreadTimer,this._maybeSendSeen()}),C.default.CLEAR_CHAT_DIRTY_WAIT))},this.onWindowLostFocus=()=>{if(this.state.unreadCount&&le(this.props)){var e=this.props.chat;0===e.unreadCount&&this.setState({unreadCount:0}),e.markedUnread=!1}},this._jumpToBottom=()=>{var{msgCollection:e}=this.props;le(this.props)&&this.state.cursor.getEnd(e)>=e.length?this._scrollToBottom():S.default.openChatBottom(this.props.chat).then((e=>{e&&S.default.focusChatTextInput(this.props.chat)}))},this._scrollToBottom=e=>{var t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight),e&&e();var a=this.props.rejectOnUnmount();(0,I.default)({signal:a}).then((()=>{a.isRejected()||this.setState({cursor:this.state.cursor.resetBeforeCursor(this.props.msgCollection)})})).catchType(v.default,(()=>{}))},this._onLastMsgChanged=(e,t)=>{var{msgCollection:a}=this.props,{focusCtx:r}=this.state,{cursor:s}=this.state,i=a.last();if(le(this.props)){var n={},o=document.hasFocus(),d=this._nearBottom(),u=d;o&&d?(n.unreadCount=0,n.focusCtx=void 0,s=s.setFocusedMsgKey(a)):i&&i.isSentByMe&&t&&(u=!0,this.state.unreadCount&&(n.unreadCount=0,n.focusCtx=void 0,s=s.setFocusedMsgKey(a)),this._jumpToBottom()),(s=r&&!n.hasOwnProperty("focusCtx")?s.loadAfter(a,{count:1}):s.loadBeforeCapped(a,{count:1}))!==this.state.cursor&&(n.cursor=s),(0,l.default)(n)||this.setState(n,(()=>{u&&this._scrollToBottom()}))}else t&&e&&e.isSentByMe&&this._jumpToBottom()},this._onUnreadCount=()=>{var{chat:e}=this.props,t=this._nearBottom(),a=document.hasFocus();this._maybeSendSeen(t,a);var r={};if(e.unreadCount&&!e.pendingSeenCount&&le(this.props)){r.unreadCount=e.unreadCount;var s=oe(this.props,this.state.unreadCount);s&&(r.focusCtx=s,r.cursor=this.state.cursor.setFocusedMsgKey(this.props.msgCollection,s.msg&&s.msg.id))}var i=t&&r.unreadCount-this.state.unreadCount==1;(!t&&le(this.props)||!e.pendingSeenCount&&this.state.newUnread!==e.unreadCount)&&(r.newUnread=e.unreadCount),(0,l.default)(r)||this.setState(r,(()=>{i&&this._scrollToBottom()}))},this._onMsgsDelete=()=>{var e=this.state.cursor.ensureValidFocus(this.props.msgCollection);this.state.cursor!==e?this.setState({cursor:e}):this.forceUpdate()},this.onPageUpDown=()=>{O.default.focus(this.scrollContainer)},this.scrollMessages=()=>{var e,t=this._visibleMsgOrder[this._visibleMsgOrder.length-1];if(t){var a=this.messageList;if(a){var r=null===(e=a.getMsgWrapperRef(t.toString()))||void 0===e?void 0:e.getContainerElement();if(r){var s=1===this._visibleMsgOrder.length?r.clientHeight:0,i=this.scrollContainer;(0,X.default)(r,"stop"),i&&(0,X.default)(i,"stop"),(0,X.default)(r,"scroll",{duration:300,container:i,offset:s})}}}},this.onKeyPress=e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),"Enter"!==e.key||e.shiftKey?S.default.pasteChatTextInput(this.props.chat,String.fromCharCode(e.charCode)):S.default.enterChatTextInput(this.props.chat))},this.onContextMenu=e=>{var t,a=this.props.chat,r=this.props.onSelectMessages;if(a.isUser)t=p.createElement(y.default,{chat:a,toContextMenuManager:!0,contact:a.contact,onSelectMessages:r});else if(a.isGroup)t=(0,x.groupMenu)(a,r);else{if(!a.isBroadcast)return;t=(0,x.broadcastMenu)(a,r)}e.preventDefault(),e.stopPropagation(),e.persist(),this.setState({contextMenu:{menu:t,event:e}})},this.onContextClose=()=>{this.setState({contextMenu:null})},this.onPaste=e=>{e.preventDefault(),e.persist(),S.default.sendPasteToCompose(this.props.chat,e)},this._notifyChatRendered=()=>{this.props.notifyChatRendered&&this.props.notifyChatRendered(this.getMsgs())};var{chat:t}=e,a=t.pendingSeenCount?0:t.unreadCount;this.state=(0,o.default)((0,o.default)({},ne(e,a)),{},{unreadCount:a,isNearBottom:!0,newUnread:0,contextMenu:null,textsize:T.default.get().textsize,msgLoadState:se(e.msgCollection),lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx})}componentWillUnmount(){null!=this._msgLoadStateChangeUnsubscribe&&this._msgLoadStateChangeUnsubscribe(),this._updateStickyDateMarker.cancel(),this._updateForCurrentPosition.cancel(),this._onResizeThrottle.cancel(),this._onResizeDebounce.cancel(),this._hideStickyDateMarker.cancel(),this._clearUnreadTimer&&clearTimeout(this._clearUnreadTimer),this._maybeSendSeen(),this.props.chat.markedUnread=!1}componentDidMount(){var{chat:e,listeners:t}=this.props;t.add(S.default,"scroll_chat_to_bottom",(e=>{this._scrollToBottom(e)})),t.add(S.default,"scroll_messages",this.scrollMessages),t.add(S.default,"textsize_change",(e=>this.setState({textsize:e}))),t.add(S.default,"panes_will_change",this.onPanesWillChange),t.add(S.default,"panes_did_change",this.onPanesDidChange),t.add(S.default,"scroll_to_focused_msg",(()=>{this._chatOpenScrollTimestamp=Date.now()})),t.add(window,"focus",this.onWindowGainedFocus),t.add(window,"blur",this.onWindowLostFocus),t.add(window,"resize",this._onResizeThrottle),t.add(window,"resize",this._onResizeDebounce),t.add(B.default,"change:msgKey",this.onMsgKeyChange),this._attachMsgCollectionObservers(this.props);var a=this.props.rejectOnUnmount();(0,I.default)({signal:a}).then((()=>{a.isRejected()||this._showStickyDateMarker()})).catchType(v.default,(()=>{})),this.props.updateOpenedChatInfo({chat:e}),(0,Q.sendSeen)(e),this._updateForCurrentPosition(),this._notifyChatRendered()}static getDerivedStateFromProps(e,t){var a={lastSelectable:e.selectable,lastChat:e.chat,lastMsgCollection:e.msgCollection,lastFocusCtx:e.focusCtx};return e.selectable!==t.lastSelectable||e.chat===t.lastChat&&e.msgCollection===t.lastMsgCollection&&e.focusCtx===t.lastFocusCtx||(a=(0,o.default)((0,o.default)({},a),{},{msgLoadState:se(e.msgCollection)},ne(e,t.unreadCount))),a}shouldComponentUpdate(e,t){if(!(0,_.default)(e,this.props))return!0;var a=this.state,{msgLoadState:r}=a,s=(0,i.default)(a,["msgLoadState"]),{msgLoadState:n}=t,o=(0,i.default)(t,["msgLoadState"]);return!(0,_.default)(n,r)||!(0,_.default)(o,s)}componentDidUpdate(e){e.selectable!==this.props.selectable||e.chat===this.props.chat&&e.msgCollection===this.props.msgCollection&&e.focusCtx===this.props.focusCtx||(this._loadRecentMsgsPromise&&this._loadRecentMsgsPromise.cancel(),this._attachMsgCollectionObservers(this.props));var{chat:t}=this.props;this._updateRenderedMsgCache(e.chat===t),this.props.updateOpenedChatInfo({chat:t}),e.msgCollection!==this.props.msgCollection&&this._updateForCurrentPosition(),this._notifyChatRendered()}_getMsgBottom(e,t){var a=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return r-(t.offsetTop+t.clientHeight+(r-(a+s)))}_setMsgBottom(e,t,a){var r=t.offsetTop+t.clientHeight+a-e.clientHeight;this._setScrollTop(e,r)}getRenderedMessageCount(){return this.getMsgs().length}setScrollBottom(e){var t=this.scrollContainer;t&&this._setScrollTop(t,t.scrollHeight-e-t.clientHeight)}_setScrollTop(e,t){this._programmaticScroll=Date.now(),e&&(e.scrollTop=t)}_showStickyDateMarker(){this._stickyDateMarker&&this._stickyDateMarker.setVisibility(!0),this._hideStickyDateMarker.debounce(3e3)}_nearBottom(){var e=this.scrollContainer;return!!e&&e.scrollTop+C.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight}getUnreadFocusCtx(e){var t,{chat:a,msgCollection:r,focusCtx:s}=e||this.props;if(a.unreadCount?t=a.unreadCount:this.state&&this.state.unreadCount&&(t=this.state.unreadCount),(!s||le(this.props))&&t){var i=r.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,t);if(i.length===t)return{msg:i=i[i.length-1],isUnreadDivider:a.shouldShowUnreadDivider,highlightMsg:!1}}}getMsgs(){var{focusCtx:e,msgCollection:t}=this.props,{cursor:a,msgLoadState:r}=this.state;return e&&r.isLoadingAroundMsgs?[]:t.toArray().slice(a.getStart(t),a.getEnd(t)).map((e=>e.safe()))}_updateRenderedMsgCache(e){var t=this.messageList;if(t){for(var a=[],r=t.props.msgs,s=new Map,i={},n=0,o=r.length-1;n<o;){var l=Math.floor((n+o)/2),d=r[l].id.toString(),u=t.getMsgWrapperRef(d);t.getMsgVisibility(u).visibility===C.default.VISIBILITY.ABOVE?n=l+1:o=l}for(var c=n;c<r.length;c++){var h=r[c].id.toString(),f=t.getMsgWrapperRef(h);if(!f)throw new Error("msgRef not found!");var p=t.getMsgVisibility(f);if(p.visibility!==C.default.VISIBILITY.VISIBLE)break;i[h]={offset:p.offset,t:r[c].t},s.set(h,f),a.push(r[c].id)}if(this.scrollContainer){var m=this.scrollContainer.scrollTop;n=0,o=Object.keys(t.renderedDateMarkers).length-1;var _=t.getDateMarkerRef(0),v=_&&_.getElement();if(v&&v.offsetTop<=m+8.5)for(;n<o;){var g=Math.ceil((n+o)/2),E=t.getDateMarkerRef(g);if(!E)throw new Error("DateMarkerRef: ".concat(g," not found. ").concat(Object.keys(t.renderedDateMarkers).toString(),"}"));(0,G.default)(E.getElement(),"midDateMarkerRef.getElement()").offsetTop>m+8.5?o=g-1:n=g}else n=-1;this._updateStickyDateMarker.onOrBefore(0,{dateMarkerIdx:n,silent:e}),this._dateMarkerIdx=n,this.pauseHiddenGifs(this._renderedMsgCache,s),this._renderedMsgCache=s,this._visibleMsgOrder=a,this.props.updateOpenedChatInfo({renderedMsgsInfo:i,visibleMsgOrder:a,clientHeight:this.scrollContainer?this.scrollContainer.clientHeight:0})}}else this._renderedMsgCache.clear()}getMsgComponent(e){var t=this.messageList;if(t)return t.getMsgComponentRef(e.toString())}pauseHiddenGifs(e,t){e.forEach(((e,a)=>{if(!t.has(a)){var r=this.props.msgCollection.get(a);r&&r.isGif&&"function"==typeof e.pause&&e.pause()}}))}_maybeSendSeen(e,t){var a=e,r=t,{chat:s,msgCollection:i}=this.props,{cursor:n}=this.state;if(s.isDirty()&&le(this.props)&&n.getEnd(i)>=i.length&&((0,d.default)(r)&&(r=document.hasFocus()),r&&((0,d.default)(a)&&(a=this._nearBottom()),a)))return(0,Q.sendSeen)(s),!0}render(){var e,{chat:t,msgCollection:a,selectable:r,onMessageSelect:s}=this.props,{focusCtx:i,msgLoadState:n}=this.state,o=(0,h.default)(M.default.pane,{[M.default.selectable]:r}),l=C.default.TEXTSIZE_CLASS_MAP.find((e=>e.scale===this.state.textsize));l&&(e=l.classname);var d,u,c,f,m=this.getMsgs(),_=p.createElement(F.default,{ref:(0,w.GetRef)((e=>{this.messageList=e})),getScrollContainer:this._getScrollContainer,chat:t,unreadCount:this.state.unreadCount,selectable:r,onMessageSelect:s,msgs:m,focusedMsgCtx:i,selectedMessages:this.props.selectedMessages,isMsgVisible:this.isMsgVisible,getSequentialMsg:this.getSequentialMsg,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs}),v=p.createElement(L.default,{direction:"around",isMostRecentCMC:le(this.props),loadMoreMsgs:()=>{},isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs});(this.state.cursor.getStart(a)>0||!n.noEarlierMsgs||ie(t,le(this.props),n))&&(d=p.createElement(L.default,{direction:"earlier",isMostRecentCMC:le(this.props),loadMoreMsgs:this.loadEarlierMsgs,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs})),(this.state.cursor.getEnd(a)<a.length||!le(this.props))&&(u=p.createElement(L.default,{direction:"recent",isMostRecentCMC:le(this.props),loadMoreMsgs:this._loadRecentMsgs,isLoadingEarlierMsgs:n.isLoadingEarlierMsgs,isLoadingRecentMsgs:n.isLoadingRecentMsgs,isLoadingAroundMsgs:n.isLoadingAroundMsgs})),i&&n.isLoadingAroundMsgs?(u=void 0,d=void 0):v=void 0;var E,S,{isNearBottom:y,newUnread:T}=this.state;if(!y||!n.isLoadingAroundMsgs&&!le(this.props)){T&&t.unreadCount&&(f=p.createElement(z.default,{count:this.state.newUnread,key:"icon-unread"}));var I=(0,h.default)(M.default.incoming,{[M.default.ffFix]:Y.default.isGecko});c=p.createElement("div",{className:I,onClick:this._jumpToBottom,role:"button"},p.createElement(J.default,{transitionName:"pop",className:M.default.unread},f),p.createElement(H.default,{name:"down",className:M.default.iconDown}))}if(this.state.contextMenu&&(E=p.createElement(K.default,{displayName:"ConversationContextMenu",escapable:!0,popable:!0,requestDismiss:this.onContextClose},p.createElement(q.default,{contextMenu:this.state.contextMenu}))),D.default.supportsFeature(D.default.F.MD_BACKEND)){var P,A;if(t.endOfHistoryTransferType===g.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE)P=R.default.t(552);else if(null!=t.endOfHistoryTransferType&&n.noEarlierMsgs&&!n.isLoadingEarlierMsgs)switch(t.endOfHistoryTransferType){case g.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:P=R.default.t(551),A=R.default.t(550);break;case g.ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:case g.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE:}null!=P&&(S=p.createElement(b.default,{icon:p.createElement(H.default,{name:"content-chat"}),theme:"conversation",secondary:A},P))}return p.createElement(N.default,{className:e},p.createElement(V.default,{ref:(0,w.GetRef)((e=>{this._stickyDateMarker=e}))}),p.createElement(J.default,{transitionName:"pop"},c),p.createElement("div",{className:o,ref:this._setScrollContainer,onScroll:this.onScroll,onKeyPress:this.onKeyPress,onContextMenu:r?null:this.onContextMenu,onPaste:this.onPaste,tabIndex:"0"},S,p.createElement("div",{className:M.default.empty}),v,d,_,u),E)}}te.displayName="ConversationMsgs";var ae=(0,U.default)((0,k.default)(te));function re(e){return null==e?null:null!=e.key?(0,o.default)((0,o.default)({},e),{},{msg:B.default.get(e.key)}):e}function se(e){var{msgLoadState:t}=e;return{noEarlierMsgs:t.noEarlierMsgs,isLoadingEarlierMsgs:t.isLoadingEarlierMsgs,isLoadingRecentMsgs:t.isLoadingRecentMsgs,isLoadingAroundMsgs:t.isLoadingAroundMsgs,contextLoaded:t.contextLoaded}}function ie(e,t,a){var r=a.noEarlierMsgs&&e.shouldAppearInList&&t&&e.msgChunks.filter((e=>e.filter((t=>t.msgChunk===e)).length>0)).length>0;return r&&(__LOG__(4,void 0,new Error,!0)(Z(),String(e.id),e.msgChunks.length,e.msgs.length),SEND_LOGS("noEarlierMsgs-error")),r}function ne(e,t){var{focusCtx:a,chat:r,msgCollection:s}=e,i=re(a)||oe(e,t),n=i&&i.msg,o=n&&n.id;return{cursor:j.default.create({msgCollection:s,focusedMsgKey:o,type:r.isGroup?C.default.RENDER_CURSOR.GROUP_CONVERSATION:C.default.RENDER_CURSOR.CONVERSATION}),focusCtx:i}}function oe(e,t){var a,{chat:r,msgCollection:s,focusCtx:i}=e;if(a=r.unreadCount?r.unreadCount:t,(!i||le(e))&&a){var n=s.toArray().filter((e=>e.isUnreadType)).reverse().slice(0,a);if(n.length===a)return{msg:n=n[n.length-1],isUnreadDivider:r.shouldShowUnreadDivider,highlightMsg:!1}}}function le(e){return e.chat.msgs===e.msgCollection}t.default=ae},66588:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(13888)),n=r(a(2784)),o=s(a(32960)),l=s(a(8701)),d=s(a(24156)),u=s(a(97238)),c=s(a(35528)),h=s(a(79711)),f=s(a(72149)),p=s(a(50935)),m=s(a(47106)),_=s(a(71745)),v=s(a(51971)),g=s(a(7822)),E=s(a(28515)),S=s(a(45090)),C=r(a(96452)),y=a(95595),b=s(a(79251)),T=s(a(18120)),M=s(a(6319)),N=s(a(35625)),I=a(13414),P=s(a(17957)),A=s(a(20642)),O=s(a(40210)),D=s(a(51465)),w=s(a(42913)),R=s(a(61941)),k=s(a(72259)),L=s(a(72424)),x=s(a(17693)),F=s(a(91378)),B=s(a(74824));class G extends n.Component{constructor(e){super(e),this._fillerHeight=0,this._maybeOpenEphemeralNUX=()=>{var{chat:e}=this.props;(0,y.shouldShowNUX)(p.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&h.default.ephemeralDrawer(e)},this._updateAnnounceGrpState=()=>{this.forceUpdate()},this._onComposeState=()=>{var e=this.props.chat.canSend;this.state.canCompose!==e&&(e||(this._fillerHeight=0),this.setState({canCompose:e}))},this.onComposeHeightChange=({input:e,overlay:t=0},a)=>{var r=this._refMsgPanel;if(r&&this.msgs){var s=this.msgs.getScrollBottom();if(void 0===e){if(a)return this._fillerHeight=t,void(this._refFiller&&(this._refFiller.style.height="".concat(this._fillerHeight,"px"),this.msgs.setScrollBottom(s)));this._fillerHeight+=t,t<0&&(this._refFiller&&(this._refFiller.style.height="".concat(this._fillerHeight,"px")),this.msgs&&this.msgs.setScrollBottom(s)),this._msgPanelAnimation&&(this.didCancel=!0,this._msgPanelAnimation.cancel()),this._msgPanelAnimation=(this._msgPanelAnimation||Promise.resolve()).then((()=>(0,F.default)(r,{translateY:t>0?[-t,0]:[0,t]},{duration:300,easing:[.1,.82,.25,1]}))).cancellable().catchType(C.Unmount,(()=>{})).then((()=>{t>0&&this._refFiller&&(this._refFiller.style.height="".concat(this._fillerHeight,"px")),r.style.transform="",this.msgs&&t>0&&this.msgs.setScrollBottom(s)})).catchType(Promise.CancellationError,(()=>{(0,F.default)(r,"finish",!0)})).then((()=>{this.didCancel?this.didCancel=!1:this._msgPanelAnimation=void 0}))}else this.msgs.onComposeHeightChange(e)}},this.onSelectMessages=()=>{this.state.selectable||this.setState({selectable:!0})},this.onCancelSelection=()=>{this.state.selectable&&(this.selectedMessages.unsetAll(),this.setState({selectable:!1}))},this.onMessageSelect=(e,t,a)=>{this.onSelectMessages();var r=this.selectedMessages.getSelected().pop(),s=a&&a.shiftKey;this.selectedMessages.setVal(e,t,!0),s&&this._selectMsgRange(r,e,t)},this._selectMsgRange=(e,t,a)=>{var{msgCollection:r}=this.props;if(e&&r){var s=r.indexOf(e);if(s)for(var i=r.indexOf(t),n=i>s?-1:1,o=s+(a?n:i<s?0:2*n);i!==o;)this.selectedMessages.setVal((0,R.default)(r.at(i),"msgCollection.at(currentSelectedIndex)").safe(),a,!0),i+=n}},this.onPageUpDown=e=>{this.msgs.onPageUpDown(e)},this.onDragStart=()=>{this.state.canCompose&&(this.blockDrop=!0)},this.onDragEnd=()=>{this.state.canCompose&&(this.blockDrop=!1)},this.onDragEnter=e=>{if(this.state.canCompose){this.onCancelSelection();var t=new E.default(e.dataTransfer);this._ComposeBoxRef&&!this.blockDrop&&(t.hasType("Files")||t.hasType("text/uri-list")||t.hasType("text/html"))&&(this._ComposeBoxRef.saveComposeContentDebounced.flush(),h.default.attachMediaDrawer({chat:this.props.chat,initCaption:this._ComposeBoxRef.getCurrentComposeContent(),onComplete:this._ComposeBoxRef.updateTextAfterMediaDrawerClose}),e.stopPropagation(),e.preventDefault())}},this._setRefFiller=e=>{this._refFiller=e},this._setRefMsgPanel=e=>{this._refMsgPanel=e},this._handleSetRefHeader=e=>{this._refHeader=e},this._getHeaderOffset=e=>{if(this._refHeader){var t=this._refHeader.getBoundingClientRect();e((0,i.default)(t,["right","bottom"]))}else e(null)},this._closeGroupDescription=()=>{this.setState({showGroupDesc:!1})},this.getMsgs=(0,I.GetRef)((e=>{this.msgs=e}));var{chat:t}=this.props;this.selectedMessages=new w.default([],(e=>e.id.toString())),this.state={canCompose:t.canSend,selectable:!1,showGroupDesc:t.isGroup&&this._showGroupDesc()},this._openEvent=new O.default.WebcChatOpen({webcUnreadCount:t.unreadCount,webcWindowHeightFloat:(0,b.default)()}),this.uiActionEvent=new O.default.UiAction({uiActionType:O.default.UI_ACTION_TYPE.CHAT_OPEN,uiActionPreloaded:!0})}_showGroupDesc(){if(!(T.default.supportsFeature(T.default.F.GROUPS_V_3)&&L.default.groupDescLength>0))return!1;var{chat:e}=this.props;return!(0,y.getSeenGroupDesc)(e.id)&&((0,y.setSeenGroupDesc)(e.id),0===e.unreadCount?!e.msgs.some((e=>e.type!==p.default.MSG_TYPE.E2E_NOTIFICATION&&e.type!==p.default.MSG_TYPE.GP2)):!e.shouldShowUnreadDivider)}componentDidMount(){var{chat:e}=this.props;this.props.listeners.add(e,"change:canSend",this._onComposeState),this.props.listeners.add(e,"change:isReadOnly change:isAnnounceGrpRestrict",this._updateAnnounceGrpState),this.props.listeners.add(h.default,"get_conversation_header_offset",this._getHeaderOffset),this.props.listeners.add(e.msgs,"remove",(e=>{this.selectedMessages.isSelected(e)&&this.onMessageSelect(e,!1)}));var t=e.getReceivedVcardMsgs();t&&!t.isSynced&&t.sync(e),e.active=!0;var a=this._openEvent;if(a){this._openEvent=null,this.msgs&&(a.webcRenderedMessageCount=this.msgs.getRenderedMessageCount()),a.markWebcChatOpenT(),this._beforePaintRafId=requestAnimationFrame((()=>{this._beforePaintRafId=null,a.markWebcChatOpenBeforePaintT()}));var r=this.props.rejectOnUnmount();(0,S.default)({signal:r}).then((()=>{r.isRejected()||(this.msgs&&(a.webcFinalRenderedMessageCount=this.msgs.getRenderedMessageCount()),a.markWebcChatOpenPaintedT(),a.commit())})).catchType(l.default,(()=>{}))}var s=this.uiActionEvent;s&&(s.markUiActionT(),s.commit(),this.uiActionEvent=void 0),e.attachMediaContents&&h.default.attachMediaDrawer({chat:e,animationName:"noop"}),L.default.ephemeralMessages&&(0,y.shouldShowNUX)(p.default.NUX.EPHEMERAL)&&e.isEphemeralSettingOn()&&h.default.ephemeralDrawer(e),L.default.ephemeralMessages&&(0,y.shouldShowNUX)(p.default.NUX.EPHEMERAL)&&(e.isGroup?this.props.listeners.add(e.groupMetadata,"change:ephemeralDuration",this._maybeOpenEphemeralNUX):e.isUser&&this.props.listeners.add(e,"change:ephemeralDuration",this._maybeOpenEphemeralNUX))}componentWillUnmount(){var{chat:e}=this.props;e.urlText&&(e.urlText=void 0),e.urlNumber&&(e.urlNumber=void 0),e.active=!1,null!=this._beforePaintRafId&&cancelAnimationFrame(this._beforePaintRafId)}render(){var e,t,a,r,{chat:s,msgCollection:i,focusCtx:l,groupMetadata:h}=this.props;if(this.state.showGroupDesc&&h&&h.desc&&(r=n.createElement(x.default,{displayName:"GroupDesc",escapable:!0,requestDismiss:this._closeGroupDescription},n.createElement(g.default,{onClose:this._closeGroupDescription},n.createElement(M.default,{chat:s,groupMetadata:h})))),this.state.selectable)t=n.createElement(x.default,{displayName:"MultiSelect",escapable:!0,requestDismiss:this.onCancelSelection},n.createElement(D.default,{chat:s,selectedMessages:this.selectedMessages,disableRevoke:!1,noSortOnForward:!1,onCancel:this.onCancelSelection})),e=n.createElement("footer",{className:v.default.footer}),a=n.createElement("div",{ref:this._setRefFiller,className:v.default.filler});else if(this.state.canCompose)e=n.createElement(f.default,{chat:s,ref:(0,I.GetRef)((e=>{this._ComposeBoxRef=e})),onComposeHeightChange:this.onComposeHeightChange,onPageUpDown:this.onPageUpDown}),a=n.createElement("div",{ref:this._setRefFiller,style:{height:"".concat(this._fillerHeight,"px")},className:v.default.filler});else{var p,E;s.isGroup&&!s.isReadOnly&&s.isAnnounceGrpRestrict&&h?p=n.createElement(d.default,{chat:s,groupMetadata:h,mute:s.mute}):E=s.isGroup?h.support?P.default.t(1370):P.default.t(1594):s.isPSA?P.default.t(1813):P.default.t(1595,{contact:s.contact.formattedName}),e=n.createElement("footer",{className:v.default.footer},n.createElement("div",{"data-a8n":o.default.key("block-message"),className:v.default.footerMessage},p||E))}return n.createElement(n.Fragment,null,n.createElement(m.default,{wallpaperColor:this.props.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),n.createElement(N.default,{chat:s,contact:s.contact,onSelectMessages:this.onSelectMessages,onRef:this._handleSetRefHeader}),n.createElement(B.default,{transitionName:"butterbar",className:v.default.subheader},r),n.createElement("div",{className:v.default.subheader},n.createElement(u.default,{chat:s})),n.createElement("div",{className:v.default.body,ref:this._setRefMsgPanel,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragEnter:this.onDragEnter},n.createElement(_.default,{ref:this.getMsgs,chat:s,selectable:this.state.selectable,onMessageSelect:this.onMessageSelect,msgCollection:i,onSelectMessages:this.onSelectMessages,focusCtx:l,selectedMessages:this.selectedMessages,notifyChatRendered:this.props.notifyChatRendered,updateOpenedChatInfo:this.props.updateOpenedChatInfo})),a,e,n.createElement(B.default,{transitionName:"slide-up"},t),n.createElement(c.default,null))}}G.displayName="ConversationPanel";var U=(0,k.default)((0,A.default)(G));t.default=U},52468:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(72779)),o=r(a(2784)),l=a(16211),d=s(a(23109)),u=s(a(50935)),c=s(a(47106)),h=s(a(51971)),f=s(a(66588)),p=s(a(88995)),m=s(a(70477)),_=s(a(17957)),v=s(a(20642)),g=s(a(40207)),E=s(a(17693));class S extends o.Component{constructor(e){super(e),this._setRefContainer=e=>{this._refContainer=e},this._onWallpaperColorPreview=e=>{e?this.state.wallpaperColor!==e&&this.setState({wallpaperColor:e}):this.setState({wallpaperColor:d.default.assertGet("defaultPreference").wallpaperColor})},this.state={wallpaperColor:this.props.chatPreference.wallpaperColor,prevWallpaperColor:this.props.chatPreference.wallpaperColor}}static getDerivedStateFromProps(e,t){return e.chatPreference.wallpaperColor!==t.prevWallpaperColor?(0,i.default)((0,i.default)({},t),{},{wallpaperColor:e.chatPreference.wallpaperColor,prevWallpaperColor:e.chatPreference.wallpaperColor}):null}componentDidMount(){this.props.listeners.add(d.default,"wallpaper_color_preview",this._onWallpaperColorPreview)}animatePanel(e,t){var a,r=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=r&&e!==t&&(0,l.animateConversationPanel)(this._refContainer,r/(e-t))}containsDOMNode(e){return!!this._refContainer&&this._refContainer.contains(e)}render(){var e,t={};this.state.wallpaperColor!==u.default.DEFAULT_CHAT_WALLPAPER&&(t={backgroundColor:this.state.wallpaperColor});var{chat:a,msgCollection:r,focusCtx:s,notifyChatRendered:i,updateOpenedChatInfo:l,showPreview:v}=this.props;return a&&r?e=o.createElement(f.default,{chat:a,groupMetadata:a.groupMetadata,chatPreference:d.default.assertGet("defaultPreference"),focusCtx:s,msgCollection:r,notifyChatRendered:i,updateOpenedChatInfo:l,key:a.id.toString(),wallpaperColor:this.state.wallpaperColor}):v&&(e=o.createElement(o.Fragment,null,o.createElement("header",{className:(0,n.default)(m.default.chatHeader,p.default.header)},o.createElement("span",{className:(0,n.default)(p.default.title,m.default.chatTitle)},_.default.t(1574))),o.createElement(c.default,{wallpaperColor:this.state.wallpaperColor,showDoodle:this.props.chatPreference.showDoodle}),o.createElement("footer",{className:h.default.footer}))),o.createElement(E.default,{displayName:"ConversationPanel",uimState:E.default.State.INACTIVE},o.createElement("div",{id:"main",className:(0,n.default)(p.default.pane,{[p.default.previewPane]:this.props.showPreview}),style:t,ref:this._setRefContainer},e))}}S.CONCERNS={chatPreference:["wallpaperColor","showDoodle"]},S.displayName="ConversationPreviewPanel";var C=(0,v.default)((0,g.default)(S,S.CONCERNS));t.default=class extends C{animatePanel(e,t){return super.getComponent().animatePanel(e,t)}containsDOMNode(e){return this.getComponent().containsDOMNode(e)}}},7822:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(90136)),o=r(a(82631));class l extends i.Component{constructor(...e){super(...e),this._refDiv=i.createRef(),this.getElement=()=>this._refDiv.current}render(){var e=this.props.onClose?i.createElement("div",{className:n.default.closeBtn,role:"button",onClick:this.props.onClose},i.createElement(o.default,{name:"x"})):null;return i.createElement("div",{className:n.default.subheader,ref:this._refDiv},i.createElement("div",{className:n.default.main},this.props.children),e)}}t.default=l,l.displayName="ConversationSubheader"},6319:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(91581)),d=s(a(59867)),u=a(62902),c=s(a(17957)),h=r(a(90088)),f=s(a(61124)),p=s(a(40207)),m=a(40263);class _ extends n.Component{constructor(e){super(e),this._setBodyRef=e=>{this._bodyRef=e},this._setDescRef=e=>{this._descRef=e},this.handleResize=({width:e})=>{var{descWidth:t}=this.state;t<=0||this.setState({truncated:e<t})},this.onReadMore=()=>{var{chat:e}=this.props;o.default.chatInfoDrawer(e,!0)},this.state={desc:g(e.groupMetadata),descWidth:0,truncated:!1,hidden:!0}}componentDidMount(){this._onDescWidthObtained()}static getDerivedStateFromProps(e,t){var a=g(e.groupMetadata);return a===t.desc?null:{desc:a,descWidth:0,truncated:!1,hidden:!0}}componentDidUpdate(e,t){t.desc!==this.state.desc&&this._onDescWidthObtained()}_onDescWidthObtained(){var{_bodyRef:e,_descRef:t}=this;if(e&&t){var a=e.clientWidth,r=t.getWidth();this.setState({descWidth:r,truncated:a<r,hidden:!1})}}render(){var{desc:e}=this.state;if(!e)return null;var{truncated:t,hidden:a}=this.state,r=this.props.chat.isTrusted()?u.Configuration.TrustedGroupDesc({links:h.findLinks(e)}):u.Configuration.UntrustedGroupDesc();return n.createElement(n.Fragment,null,n.createElement(m.TextDiv,{theme:"title"},c.default.t(1667)),n.createElement(f.default,{onRef:this._setBodyRef,onResize:this.handleResize,className:d.default.body},n.createElement(m.TextSpan,{theme:"small",className:(0,i.default)(d.default.text,{[d.default.hidden]:a})},n.createElement(l.default,{ref:this._setDescRef,text:e,selectable:!0,formatters:r,className:d.default.desc}),t&&n.createElement("div",{className:d.default.more,role:"button",onClick:this.onReadMore},c.default.t(1225)))))}}_.CONCERNS={groupMetadata:["desc"]},_.displayName="GroupDescriptionBar";var v=(0,p.default)(_,_.CONCERNS);function g(e){return e&&e.desc}t.default=v},86811:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(1374)),o=r(a(3573)),l=r(a(11932)),d=r(a(79711)),u=r(a(52737)),c=r(a(50935)),h=r(a(14457)),f=r(a(71201)),p=a(99888),m=r(a(47685)),_=a(95595),v=r(a(68476)),g=r(a(98294)),E=r(a(17957)),S=a(83974),C=a(53527),y=r(a(91729)),b=r(a(40210)),T=a(41501),M=r(a(55043)),N=r(a(82631)),I=r(a(67360));class P extends i.Component{constructor(...e){super(...e),this._refContainer=i.createRef(),this._setDocPicker=e=>this._docPicker=e,this._setMediaPicker=e=>this._mediaPicker=e,this._onDocumentPick=e=>{if(e){e.stopPropagation();var t=null==e.target.files?[]:Array.from(e.target.files);if(this.dismiss(),t.length){var a=t.map((e=>({file:e,type:p.FILETYPE.DOCUMENT})));this.attachMediaDrawer(a)}}else this.dismiss()},this._onMediaPick=e=>{if(e){e.stopPropagation();var t=null==e.target.files?[]:Array.from(e.target.files);this.dismiss(),t.length&&this.attachMediaDrawer(t.map((e=>({file:e}))))}else this.dismiss()},this._onMediaClick=e=>{if(e.preventDefault(),this._mediaPicker)return this._mediaPicker.open(),!1},this._onDocumentClick=e=>{if(e.preventDefault(),this._docPicker)return this._docPicker.open(),!1},this.onContactClick=e=>{e.preventDefault(),d.default.openModal(i.createElement(l.default,{chat:this.props.chat,onContactsSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,!1)}}))},this.onProductCatalogClick=e=>{e.preventDefault();var t=this._productCatalogSession.toString();(0,S.logCatalogAttachmentButtonClick)(t),d.default.openModal(i.createElement(o.default,{chat:this.props.chat,sessionId:t}))},this.onCreateMessengerRoom=()=>{(0,_.shouldShowNUX)(c.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,_.shouldShowNUX)(c.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,_.shouldShowNUX)(c.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)?d.default.openModal(i.createElement(y.default,{chat:this.props.chat})):(0,C.openMessengerRoomUrl)(this.props.chat)}}getElement(){return this._refContainer.current}componentDidMount(){this._productCatalogSession=new M.default}_canSendProductCatalog(){return u.default.isSMB}dismiss(){var e=this.props.uim;e&&e.uie.requestDismiss()}attachMediaDrawer(e){d.default.attachMediaDrawer({chat:this.props.chat,attachments:e,fileOrigin:b.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,initCaption:this.props.getComposeContents&&this.props.getComposeContents(),onComplete:(e,t)=>{this.props.onMenuComplete&&this.props.onMenuComplete(e,t)}})}_renderAttachDocDropdownItem(){return i.createElement(f.default,{type:"icon",tooltip:i.createElement(I.default,null,E.default.t(240)),a8n:"mi-attach-document",action:this._onDocumentClick},i.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},i.createElement(N.default,{name:"attach-document",className:n.default.iconImage}),i.createElement(m.default,{ref:this._setDocPicker,mimes:T.DOC_MIMES,onChange:this._onDocumentPick})))}_renderAttachMessengerRoomDropdownItem(){return i.createElement(f.default,{type:"icon",tooltip:i.createElement(I.default,null,E.default.t(1003)),a8n:"mi-create-messenger-room",action:this.onCreateMessengerRoom},i.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},i.createElement(N.default,{name:"attach-rooms",className:n.default.iconImage})))}_renderAttachProductCatalogDropdownItem(){return this._canSendProductCatalog()?i.createElement(f.default,{type:"icon",tooltip:i.createElement(I.default,null,E.default.t(243)),a8n:"mi-attach-product-catalog",action:this.onProductCatalogClick},i.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},i.createElement(N.default,{name:"attach-product",className:n.default.iconImage}))):null}render(){return i.createElement("div",{className:n.default.attachMenuContainer,ref:this._refContainer},i.createElement(N.default,{name:"attach-shadow"}),i.createElement(h.default,{type:"menu",key:"AttachMenuDropdown"},i.createElement(f.default,{type:"icon",tooltip:i.createElement(I.default,null,E.default.t(242)),a8n:"mi-attach-media",action:this._onMediaClick},i.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},i.createElement(N.default,{name:"attach-image",className:n.default.iconImage}),i.createElement(m.default,{ref:this._setMediaPicker,mimes:[c.default.IMAGE_MIMES,c.default.VIDEO_MIMES].join(","),onChange:this._onMediaPick}))),i.createElement(f.default,{type:"icon",tooltip:i.createElement(I.default,null,E.default.t(238)),a8n:"mi-attach-camera",action:this.props.onCaptureClick,disabled:!v.default},i.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},i.createElement(N.default,{name:"attach-camera",className:n.default.iconImage}))),this._renderAttachDocDropdownItem(),i.createElement(f.default,{type:"icon",tooltip:i.createElement(I.default,null,E.default.t(244)),a8n:"mi-attach-contact",action:this.onContactClick},i.createElement("button",{className:n.default.iconsItem,"data-animate-menu-icons-item":!0},i.createElement(N.default,{name:"attach-contact",className:n.default.iconImage}))),this._renderAttachProductCatalogDropdownItem(),this._renderAttachMessengerRoomDropdownItem()))}}P.displayName="AttachMenuDropdown";var A=(0,g.default)(P);t.default=A},57495:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(86811)),o=r(a(39690)),l=r(a(79711)),d=s(a(96452)),u=s(a(45356)),c=r(a(17957)),h=s(a(16622)),f=a(80898),p=r(a(72259)),m=a(64658),_=r(a(82631));class v extends i.PureComponent{constructor(...e){super(...e),this._handleClick=e=>{this._checkForDrawerMid(e)},this._handleDropdownCaptureClick=()=>{this._openCaptureFlow()}}_checkForDrawerMid(e){l.default.existsDrawerMid((t=>{t&&e.preventDefault()}))}_openCaptureFlow(){var e=this.props.chat,t=h.start("camera");Promise.race([t,this.props.rejectOnUnmount()]).checkpoint(this.props.rejectOnUnmount()).then((t=>{t&&l.default.openDrawerMid(i.createElement(o.default,{chat:(0,m.unproxy)(e),stream:t,onCaptureSent:()=>{this.props.onMenuComplete&&this.props.onMenuComplete(!0,!1)}}),"slide-up",this.context.uim,{noFocus:!0})})).catchType(d.Unmount,(()=>{t.then((e=>h.stop(e))).catch((()=>{}))})).catchType(d.GUM.NotAllowedError,(()=>{l.default.openModal(i.createElement(u.default,{messaging:u.Messaging.CAMERA_FAIL,type:u.default.TYPE.GUIDE_UNBLOCK}))})).catchType(d.GUM.GUMError,(()=>{l.default.openModal(i.createElement(u.default,{messaging:u.Messaging.CAMERA_MISSING,type:u.default.TYPE.GUIDE_NONE}))}))}render(){return i.createElement(f.MenuBarItem,{a8nText:"conversation-clip",icon:i.createElement(_.default,{name:"clip"}),title:c.default.t(979),transitionName:"menu",onClick:this._handleClick},i.createElement(n.default,{chat:this.props.chat,onCaptureClick:this._handleDropdownCaptureClick,getComposeContents:this.props.getComposeContents,onMenuComplete:this.props.onMenuComplete}))}}v.displayName="AttachMenuBarItem";var g=(0,p.default)(v);t.default=g},1944:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=r(a(14457)),n=a(73157);class o extends s.Component{constructor(...e){super(...e),this._refDropdown=s.createRef(),this.getElement=()=>this._refDropdown.current}render(){var{chat:e,onSelectMessages:t}=this.props,a=(0,n.broadcastMenu)(e,t);return this.props.toContextMenuManager?s.createElement("div",{ref:this._refDropdown},a):s.createElement(i.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"BroadcastMenuDropdown",flipOnRTL:!0,dirX:i.DirX.LEFT},a)}}t.default=o,o.displayName="BroadcastMenuDropdown"},78898:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=r(a(14457)),n=a(73157);class o extends s.Component{constructor(...e){super(...e),this._refDropdown=s.createRef(),this.getElement=()=>this._refDropdown.current}render(){var{chat:e,onSelectMessages:t}=this.props,a=(0,n.groupMenu)(e,t);return this.props.toContextMenuManager?s.createElement("div",{ref:this._refDropdown},a):s.createElement(i.default,{onRef:e=>{this._refDropdown.current=e},type:"dropdown_menu",key:"GroupMenuDropdown",flipOnRTL:!0,dirX:i.DirX.LEFT},a)}}t.default=o,o.displayName="GroupMenuDropdown"},35625:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(1944)),o=a(89216),l=a(25975),d=r(a(13574)),u=r(a(79711)),c=r(a(52737)),h=r(a(50935)),f=r(a(72780)),p=r(a(46478)),m=a(14457),_=r(a(78898)),v=r(a(86038)),g=r(a(98294)),E=r(a(70477)),S=r(a(71292)),C=r(a(17957)),y=r(a(20642)),b=a(83974),T=a(80898),M=r(a(60949)),N=r(a(55043)),I=r(a(13531)),P=r(a(72259)),A=r(a(72424)),O=r(a(91944)),D=r(a(40207)),w=a(64658),R=r(a(82631)),k=r(a(67134)),L=r(a(63498)),x=r(a(20398)),F=r(a(37698)),B=a(64786).default,G=a(89524).Z;class U extends i.Component{constructor(){super(...arguments),this._setRefMenuBarItemContainer=e=>{this.setState({refMenuBarItemContainer:e})},this.isListeningForMove=!1,this.didDrag=!1,this._forceUpdate=()=>{this.forceUpdate()},this._updateVoipAvailability=()=>{this.setState({isVoipAvailable:c.default.isVoipInitialized})},this.setRef=e=>{this.ref=e,this.props.onRef(e)},this.onWindowFocus=()=>{},this.onMouseDown=()=>{},this.onDrag=()=>{this.didDrag=!0},this.onClickCapture=()=>{},this._onInfoPanel=()=>{var e=this.props.chat;!e.isPSA&&(e.isUser||e.isBroadcast||e.isGroup)&&u.default.openDrawerRight(i.createElement(S.default,{chat:(0,w.unproxy)(e),key:"info-".concat(e.id.toString())}),"slide-left",this.props.uim)},this._checkForDrawerMid=e=>{u.default.existsDrawerMid((t=>{t&&e.preventDefault()}))},this.onChatSearch=e=>{e.preventDefault();var t=this.props.chat;u.default.existsDrawerMid((e=>{e||u.default.openDrawerRight(i.createElement(d.default,{chat:(0,w.unproxy)(t),key:"chat-search-".concat(t.id.toString())}),"slide-left",this.props.uim)}))},this._onStartCall=e=>{var t=this.props.chat;if(this.props.chat.isUser)G.checkIfCanStartCall({contact:t.contact,isVideo:e})&&B&&B.callStart(t.contact.id,e);else if(G.checkIfCanStartCall({isGroup:!0,isVideo:e})){var a=t.groupMetadata.participants.map((e=>e.contact.id));if(t.groupMetadata.participants.length>h.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS){var r=i.createElement(O.default,{isVideo:e,groupParticipants:a,onStartGroupCall:t=>B.groupCallStart(t,e)});u.default.openModal(r,{transition:"modal-flow"})}else B&&B.groupCallStart(a,e)}},this.onProductCatalogClick=e=>{e.preventDefault();var t=(new N.default).toString(),a=this.props.chat.contact.id;(0,b.logChatCatalogView)({catalogOwnerWid:a,catalogSessionId:t}),u.default.openDrawerRight(i.createElement(I.default,{chat:this.props.chat,sessionId:t,catalogOwnerJid:a.toJid()}),"slide-left",x.default.Manager.top)},this.onShopClick=e=>{var t,a;e.preventDefault();var r=null===(t=this.props.chat.contact.businessProfile)||void 0===t||null===(a=t.profileOptions)||void 0===a?void 0:a.shopURL;r&&window.open(r,"_blank","noopener,noreferrer")},this.state={newlyFocused:!1,isVoipAvailable:c.default.isVoipInitialized,refMenuBarItemContainer:null}}_maybeAddProfileListeners(){this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:profileOptions",this._forceUpdate),this.props.chat.contact.businessProfile&&this.props.listeners.add(this.props.chat.contact.businessProfile,"change:catalogStatus",this._forceUpdate)}componentDidMount(){this.props.listeners.add(this.props.chat.contact,"change:businessProfile",(()=>{this._maybeAddProfileListeners(),this._forceUpdate()})),this._maybeAddProfileListeners(),this.props.listeners.add(c.default,"change:isVoipInitialized",this._updateVoipAvailability)}_getVoiceCallButton(){var{chat:e}=this.props;if(!(this.state.isVoipAvailable&&!e.contact.isEnterprise&&!getIsInternalNumber(e.contact.id.user)&&(e.isUser&&VoipGKUtils.isVoiceCallEnabled()||e.isGroup&&VoipGKUtils.isGroupCallEnabled())))return null;var t=e.contact.isMe,a=e.isUser?C.default.t(1481):C.default.t(800);return CallCollection.activeCall&&(t=!0,a=C.default.t(1526)),i.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"voice-call-button",icon:i.createElement(R.default,{name:"voice-call"}),onClick:()=>this._onStartCall(!1),disabled:t,title:a})}_getVideoCallButton(){var{chat:e}=this.props;if(!(this.state.isVoipAvailable&&!e.contact.isEnterprise&&!getIsInternalNumber(e.contact.id.user)&&(e.isUser&&VoipGKUtils.isVideoCallEnabled()||e.isGroup&&VoipGKUtils.isGroupCallEnabled())))return null;var t=e.contact.isMe,a=e.isUser?C.default.t(1462):C.default.t(799);return CallCollection.activeCall&&(t=!0,a=C.default.t(1526)),i.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"video-call-button",icon:i.createElement(R.default,{name:"video-call"}),onClick:()=>this._onStartCall(!0),disabled:t,title:a})}_getCommerceButton(){var e,t,{businessProfile:a}=this.props.chat.contact;return A.default.webShopsChatHeaderButtonEnabled&&(null==a||null===(e=a.profileOptions)||void 0===e?void 0:e.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.SHOP?i.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"shop-button",icon:i.createElement(R.default,{name:"shop"}),title:C.default.t(1332),onClick:this.onShopClick}):(null==a||null===(t=a.profileOptions)||void 0===t?void 0:t.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.CATALOG||(null==a?void 0:a.catalogStatus)===o.CATALOG_EXISTS?i.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"product_catalog-button",icon:i.createElement(R.default,{name:"catalog-entrypoint"}),title:C.default.t(1187),onClick:this.onProductCatalogClick}):null}render(){var e,t,a,r=this.props.chat,{contact:s}=this.props;if(r.isUser)e=i.createElement(f.default,{chat:r,contact:r.contact,onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0}),t=i.createElement(F.default,{contact:r.contact,presence:r.presence,chatstate:r.presence.chatstate,placeholder:C.default.t(501),location:"title",showBusinessCheckmark:s.showBusinessCheckmarkAsSecondary});else if(r.isBroadcast)e=i.createElement(n.default,{chat:(0,w.unproxy)(r),onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0}),t=null;else if(r.isGroup){e=i.createElement(_.default,{chat:(0,w.unproxy)(r),onSelectMessages:this.props.onSelectMessages,toContextMenuManager:!0});var o=r.groupMetadata&&r.groupMetadata.participants&&r.groupMetadata.participants.iAmAdmin()&&r.groupMetadata.announce?C.default.t(225):C.default.t(500);t=i.createElement(v.default,{chatstate:r.presence.chatstate,groupMetadata:r.groupMetadata,presence:r.presence,placeholder:o,location:"title"})}if(this.state.refMenuBarItemContainer&&e){var l={menu:e,anchor:this.state.refMenuBarItemContainer,autoFocus:!0,dirX:C.default.isRTL()?m.DirX.RIGHT:m.DirX.LEFT,dirY:m.DirY.BOTTOM,offsetY:5,type:"dropdown_menu"};a=i.createElement(L.default,{contextMenu:l})}var d;var u=i.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"search-button",icon:i.createElement(R.default,{name:"search-alt"}),title:C.default.t(1269),onClick:this.onChatSearch});return r.isPSA&&(t=null),i.createElement("header",{ref:this.setRef,className:E.default.chatHeader,onClickCapture:this.onClickCapture,onMouseDown:this.onMouseDown},i.createElement("div",{className:E.default.chatAvatar,onClick:this._onInfoPanel,role:r.isPSA?null:"button"},i.createElement(p.default,{id:r.id,size:40,showEphemeralIcon:!0})),i.createElement("div",{className:E.default.chatBody,onClick:this._onInfoPanel,role:r.isPSA?null:"button"},i.createElement("div",{className:E.default.chatMain},i.createElement("div",{className:E.default.chatTitle},i.createElement(M.default,{chat:r,titlify:!0,ellipsify:!0,showBusinessCheckmark:s.showBusinessCheckmarkAsPrimary}))),t),i.createElement("div",{className:E.default.chatControls},i.createElement(T.MenuBar,{key:"conversation-header"},null,null,d,this._getCommerceButton(),u,i.createElement("div",{ref:this._setRefMenuBarItemContainer},i.createElement(T.MenuBarItem,{tabOrder:h.default.TAB_ORDERS.CHAT_HEADER_BUTTON,a8nText:"conversation-menu",icon:i.createElement(R.default,{name:"menu"}),title:C.default.t(980),onClick:this._checkForDrawerMid},a)))))}}U.CONCERNS={chat:["id","formattedTitle","presence","isUser","isGroup","isBroadcast","groupMetadata","isPSA","contact","name"],contact:["showBusinessCheckmarkAsPrimary","showBusinessCheckmarkAsSecondary"]},U.displayName="ConversationHeader";var j=(0,g.default)((0,k.default)((0,y.default)((0,P.default)((0,D.default)(U,U.CONCERNS)))));t.default=j},20227:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(91581)),d=s(a(96115)),u=s(a(82631));function c({canonicalUrl:e,compose:t,description:a,displayType:r,invite:s,onClick:c,isSentByMe:h,star:f,thumbnail:p,thumbnailJpeg:m,title:_,theme:v}){var g,E;if(null!=p?E=n.createElement("div",{className:d.default.media},p):m?E=n.createElement("img",{alt:"",className:d.default.media,src:"data:image/jpeg;base64,"+m}):r===o.default.DISP_TYPE.GALLERY&&(E=n.createElement("div",{className:d.default.noThumbContainer},n.createElement(u.default,{className:d.default.noThumbIcon,name:"link"}))),r===o.default.DISP_TYPE.GALLERY){var S=f?n.createElement(u.default,{className:d.default.iconStar,name:"star"}):null;g=n.createElement("div",{className:d.default.noThumbContainer},E,S)}else g=E;var C=null!=a?n.createElement("div",{className:d.default.description},"string"==typeof a?n.createElement(l.default,{text:a,titlify:!0}):a):null,y=e?n.createElement("div",{className:d.default.source},n.createElement(l.default,{text:e})):null,b=(0,i.default)(d.default.preview,{[d.default.isInvite]:r!==o.default.DISP_TYPE.GALLERY&&s,[d.default.isCompose]:t,[d.default.bubbleIn]:!h,[d.default.bubbleOut]:h,[d.default.extended]:"extended"===v});return n.createElement("div",{className:b,onClick:c},g,n.createElement("div",{className:d.default.body},n.createElement("div",{className:d.default.title,title:_},n.createElement(l.default,{text:_})),C,y))}c.displayName="LinkPreview"},22493:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u,t.MessageListButton=c;var i=s(a(2784)),n=r(a(17957)),o=r(a(25461)),l=r(a(2825)),d=r(a(82631));function u({direction:e,loadMoreMsgs:t,isLoadingEarlierMsgs:a,isLoadingRecentMsgs:r,isLoadingAroundMsgs:s}){var u,c,h;if("earlier"===e&&a||"recent"===e&&r||"around"===e&&s)u=i.createElement(l.default,{stroke:6,size:24,color:"highlight"}),c=n.default.t(917);else{switch(e){case"earlier":c=n.default.t(914);break;case"recent":c=n.default.t(915);break;default:c=n.default.t(917)}u=i.createElement(d.default,{name:"refresh"}),h=t}return i.createElement("div",{className:o.default.wrapper},i.createElement("div",{className:o.default.button,title:c,onClick:h},u))}function c({children:e,onClick:t,title:a}){return i.createElement("div",{className:o.default.wrapper},i.createElement("div",{className:o.default.button,title:a,onClick:t},e))}u.displayName="LoadMoreMessages",c.displayName="MessageListButton"},73157:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.groupMenu=function(e,t){var a=[];a.push(i.createElement(l.default,{key:"info",a8n:"mi-group-info",action:()=>n.default.chatInfoDrawer(e)},d.default.t(1669))),a.push(i.createElement(l.default,{a8n:"mi-select-messages",key:"select",action:t},d.default.t(1827))),e.mute.canMute()&&a.push(i.createElement(u.default,{key:"mute",onMute:t=>n.default.muteChat(e,t),mute:e.mute,chat:e,settings:c.default}));return a.push(i.createElement(l.default,{key:"clear",a8n:"mi-clear",action:()=>n.default.clearChat(e)},d.default.t(495))),a.push(i.createElement(o.default,{key:"delete",onDeleteOrExit:()=>n.default.deleteOrExitChat(e),chat:e})),a},t.broadcastMenu=function(e,t){var a=[];return a.push(i.createElement(l.default,{key:"info",a8n:"mi-broadcast-info",action:()=>n.default.chatInfoDrawer(e)},d.default.t(1721))),a.push(i.createElement(l.default,{a8n:"mi-select-messages",key:"select",action:t},d.default.t(1827))),a.push(i.createElement(l.default,{key:"clear",a8n:"mi-clear",action:()=>n.default.clearChat(e)},d.default.t(495))),a.push(i.createElement(o.default,{key:"delete",onDeleteOrExit:()=>n.default.deleteOrExitChat(e),chat:e})),a};var i=s(a(2784)),n=r(a(79711)),o=r(a(24211)),l=r(a(71201)),d=r(a(17957)),u=r(a(60733)),c=r(a(2734))},94389:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(2182)),l=a(94176),d=s(a(79711)),u=s(a(50935)),c=a(13414),h=s(a(17957)),f=s(a(20642)),p=a(40713),m=s(a(61941)),_=s(a(15442)),v=a(40263),g=s(a(92276));class E extends n.Component{constructor(...e){super(...e),this._refContainer=n.createRef(),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{d.default.refreshMessages()}}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}getRef(){return this.ref}getContainerElement(){return(0,m.default)(this._refContainer.current,"this._refContainer.current")}render(){var e,t,{msg:a,albumMsgs:r,albumPosition:s,isMsgVisible:d,zoomMsg:f,numAdditionalMedia:m}=this.props,E=(0,i.default)({[o.default.albumTopLeft]:s===l.AlbumPosition.TOP_LEFT,[o.default.albumTopRight]:s===l.AlbumPosition.TOP_RIGHT,[o.default.albumBottomLeft]:s===l.AlbumPosition.BOTTOM_LEFT,[o.default.albumBottomRight]:s===l.AlbumPosition.BOTTOM_RIGHT});if(null!=m&&0!==m&&(e=n.createElement(v.TextSpan,{theme:"large",className:(0,i.default)(o.default.numberText)},h.default.t(1140,{number:m}))),a.type===u.default.MSG_TYPE.IMAGE)t=n.createElement(_.default,{theme:p.DisplayTheme.Album,albumMsgs:r,msg:a,mediaData:a.mediaData,ref:(0,c.GetRef)((e=>{this.ref=e})),isMsgVisible:d,zoomMsg:f,overlayContent:e});else{if(a.type!==u.default.MSG_TYPE.VIDEO)throw new Error("Unexpected Album Type: "+a.type);t=n.createElement(g.default,{theme:p.DisplayTheme.Album,albumMsgs:r,msg:a,mediaData:a.mediaData,ref:(0,c.GetRef)((e=>{this.ref=e})),zoomMsg:f,overlayContent:e})}return n.createElement("div",{ref:this._refContainer,className:o.default.albumGridClass},n.createElement("div",{className:E},t))}}E.displayName="AlbumGrid";var S=(0,f.default)(E);t.default=class extends S{constructor(...e){super(...e),this.getRef=()=>this.getComponent().getRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},94176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlbumPosition=void 0;t.AlbumPosition={TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}},46650:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(72779)),o=s(a(47677)),l=r(a(2784)),d=s(a(88665)),u=s(a(94389)),c=a(94176),h=s(a(71874)),f=a(21403),p=s(a(79711)),m=s(a(9386)),_=s(a(50935)),v=s(a(55236)),g=a(62436),E=r(a(71201)),S=s(a(43396)),C=s(a(38147)),y=s(a(6660)),b=s(a(93329)),T=s(a(4336)),M=s(a(18120)),N=s(a(1512)),I=s(a(44641)),P=s(a(50868)),A=s(a(17957)),O=a(38203),D=a(28278),w=s(a(19773)),R=a(97526),k=s(a(20564)),L=a(62761),x=s(a(61941)),F=a(64658),B=s(a(82631)),G=s(a(17693)),U=s(a(63498)),j=s(a(74824)),V=s(a(50103)),H=a(58355),W=a(24996);function Y(){var e=(0,i.default)(["Only ","/"," were valid album messages"]);return Y=function(){return e},e}class K extends l.Component{getContainerElement(){return this._refAlbumWrapper.current}constructor(e){super(e),this._refAlbumWrapper=l.createRef(),this.refAlbumComponents={},this.setRefContext=e=>{this.refContext=e},this._refTail=l.createRef(),this.setRefBubble=e=>{this.refBubble=e},this._setRefLeftStickerBubble=e=>{this._refLeftStickerBubble=e},this._setRefRightStickerBubble=e=>{this._refRightStickerBubble=e},this._firstStickerRef=l.createRef(),this._secondStickerRef=l.createRef(),this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.contextMenu=e=>{e.stopPropagation()},this.openForwardFlow=(e,t)=>{for(var a,{msgs:r}=this.props,s=0;s<r.length;s++)if(r[s].isUnsentMedia){a=A.default.t(689,{_plural:1});break}a?p.default.openModal(l.createElement(m.default,{title:A.default.t(692),onOK:()=>p.default.closeModal(),okText:A.default.t(1761)},a)):e?this.onSelectClick({selectedMsg:t}):p.default.openModal(l.createElement(b.default,{msgs:r.map((e=>e.unsafe()))}),{transition:"modal-flow"})},this.onSelectClick=e=>{var{selectedMsg:t,event:a}=e;if(a&&a.stopPropagation(),t)this.props.onMessageSelect((0,F.unproxy)(t.unsafe()),!this.props.selectedMessages.isSelected((0,F.unproxy)(t)),a);else{var r=0===this.state.selectedCount;this.props.msgs.forEach((e=>{this.props.onMessageSelect((0,F.unproxy)(e.unsafe()),r,a)}))}},this._computeSelectedCount=()=>{var{msgs:e,selectedMessages:t}=this.props,a=0;return e.forEach((e=>{t.isSelected((0,F.unproxy)(e.unsafe()))&&a++})),a},this.onDownload=()=>{S.default.initDownload(this.props.msgs.map((e=>e.unsafe())))},this.onDeleteMessage=()=>{var{msgs:e}=this.props;p.default.openModal(l.createElement(v.default,{chat:e[0].chat,msgList:e.map((e=>e.unsafe())),deletePrompt:!0,revokePrompt:e[0].canRevoke(),isMsgVisible:this.props.isMsgVisible}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{var{msgs:a}=this.props;if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var r=t?this._getMenuRefContext():e,s=[];a.every((e=>e.mediaData&&e.mediaData.isDownloadable()))&&s.push(l.createElement(E.default,{key:"download",a8n:"mi-msg-download",action:this.onDownload},A.default.t(591))),a.every((e=>e.canForward()))&&s.push(l.createElement(E.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)}},A.default.t(708))),s.push(l.createElement(E.default,{key:"delete",a8n:"mi-msg-delete",action:this.onDeleteMessage},A.default.t(559))),this.setState({contextMenu:{menu:s,anchor:r,theme:E.ThemeOptions.COMPACT}})}},this.openContextMenu=()=>{this.state.hover?this.onMenu(void 0,!0):this.setState({hover:!0},(()=>{this.onMenu(void 0,!0)}))},this.closeContextMenu=()=>{var e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this._onAlbumGridRendered=(e,t)=>{e?this.refAlbumComponents[t.id.toString()]=e:delete this.refAlbumComponents[t.id.toString()]},this.scrollMsg=(e,t)=>{var a=this._refAlbumWrapper.current;if(a){var r=a.offsetParent;r&&((0,o.default)(r instanceof HTMLElement,"DOM offset parent is not a valid HTMLElement"),(0,g.scrollAt)(a,r,t).then(e))}},this.highlight=()=>{var e,t=this._refTail.current;this.isGroupedSticker()?0===this.props.focusedMsgIndex?e=this._refLeftStickerBubble:1===this.props.focusedMsgIndex&&(e=this._refRightStickerBubble):e=this.refBubble,e&&(C.default.indicateFocus(e,V.default.highlightAnimation),C.default.indicateFocus(t,V.default.highlightAnimation),this.props.isFocusable&&this.focus({preventScroll:!0}))};var t=this._computeSelectedCount();this.state={contextMenu:null,hover:!1,selectedCount:t}}componentDidMount(){M.default.supportsFeature(M.default.F.MEDIA_EXISTENCE_CHECK)&&this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).forEach((e=>{(0,D.checkExistence)(e)}))}componentDidUpdate(e){if(this.props.msgs!==e.msgs&&M.default.supportsFeature(M.default.F.MEDIA_EXISTENCE_CHECK)){var t=new Set(e.msgs);this.props.msgs.map((e=>e.asAlbumAsset)).filter(Boolean).filter((e=>!t.has(e))).forEach((e=>{(0,D.checkExistence)(e)}))}}shouldComponentUpdate(e,t){return!(0,d.default)(t,this.state)||!(0,d.default)(e,this.props,((e,t,a)=>{if("msgs"===a)return(0,d.default)(e,t)}))}onSelectChange(e){var t;t=this.isGroupedSticker()?this._computeSelectedCount():e?this.props.msgs.length:0,this.state.selectedCount!==t&&this.setState({selectedCount:t})}_isKeyboardUser(){return this.context}isGroupedSticker(){var[e,t]=this.props.msgs;return null!=e.asGroupedSticker&&null!=t.asGroupedSticker}focus(e){var t;(null===(t=this._refAlbumWrapper)||void 0===t?void 0:t.current)&&y.default.focus(this._refAlbumWrapper.current,e)}render(){var e,{msgs:t,position:a,isMsgVisible:r,albumId:s,isFocusedAlbum:i,focusedMsgIndex:o,selectedMessages:d,isFocusable:p}=this.props,m=t[0],v=t[1],g=m.isSentByMe,E=m.isGroupMsg,S=this.isGroupedSticker(),C=t.length>_.default.ALBUM_MIN_SIZE?t.length-_.default.ALBUM_MIN_SIZE+1:null,y=a===R.MsgPosition.FRONT||a===R.MsgPosition.SINGLE||S,b=(0,n.default)(V.default.msg,{[V.default.msgContinuation]:a===R.MsgPosition.FRONT||a===R.MsgPosition.MID,"message-out":g,"message-in":!g,[O.LIST_FOCUSABLE_ITEM_CLASS_NAME]:p}),M=!g&&E;if(M){var P=(0,n.default)(V.default.author,{[V.default.groupStickerAuthor]:S});e=l.createElement("div",{className:P},l.createElement(h.default,{msg:t[0],contact:t[0].senderObj,albumId:s}))}var A,D,K,q,z,Q=(0,n.default)(V.default.message,{[V.default.messageTransparent]:S,[V.default.hasTail]:y,[V.default.tailOverrideHide]:S&&y&&(g||!E),[V.default.hasAuthor]:!this.isGroupedSticker()&&M,[V.default.forwarded]:!this.isGroupedSticker()&&(0,L.showForwarded)(t[0])}),X=(0,n.default)(V.default.albumBubbleContainer,{[V.default.messageBackground]:!S,[V.default.hasBorderBox]:!S});y&&(A=l.createElement(B.default,{name:(0,H.getTailName)(g),className:V.default.tail,containerRef:this._refTail})),m.canQuickForward()&&(D=l.createElement("div",{className:(0,n.default)(V.default.quickActionButton,{[V.default.authorForward]:M}),onClick:()=>{this.openForwardFlow(!1)},role:"button"},l.createElement(B.default,{name:"forward-chat"}))),(this.state.hover||this.state.contextMenu)&&(K=l.createElement(w.default,{msg:m.unsafe(),position:a,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)}})),q=this.state.contextMenu?"none":m.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(z=l.createElement(G.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},l.createElement(U.default,{contextMenu:this.state.contextMenu})));var J,Z=this.props.selectable?l.createElement(k.default,{checked:this.state.selectedCount>0,theme:this.state.selectedCount>0&&this.state.selectedCount<t.length?f.CHECKBOX_THEME.PARTIAL:void 0,onClick:e=>{this.onSelectClick({event:e})}}):null;if(this.props.isFocusedAlbum&&(J=l.createElement(W.WhileFocusedListener,{parent:this})),S){var $=t.map((e=>l.createElement(W.SelectionListener,{key:e.id.toString(),parent:this,msgId:e.id.toString(),selectedMessages:d}))),ee=this.props.selectable?l.createElement(I.default,{checked:this.props.selectedMessages.isSelected((0,F.unproxy)(m.unsafe())),onClick:()=>{this.onSelectClick({selectedMsg:m.unsafe()})}}):null,te=this.props.selectable?l.createElement(I.default,{checked:this.props.selectedMessages.isSelected((0,F.unproxy)(v.unsafe())),onClick:()=>{this.onSelectClick({selectedMsg:v.unsafe()})}}):null;return l.createElement("div",{className:b,"data-id":s,ref:this._refAlbumWrapper,tabIndex:-1},l.createElement(j.default,{transitionName:"delay-leave"},Z),l.createElement("div",{className:Q,onContextMenu:this.contextMenu},A,e,l.createElement("div",{className:V.default.groupStickerContainer},l.createElement("div",{onMouseEnter:this._firstStickerRef.current?this._firstStickerRef.current.onMouseEnter:null,className:V.default.singleGroupedStickerContainer,ref:this._setRefLeftStickerBubble},l.createElement(j.default,{transitionName:"delay-leave"},ee),l.createElement(N.default,{msg:(0,x.default)(m.asGroupedSticker,"firstMsg.asGroupedSticker"),menuTransition:q,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:r,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:i&&0===o,forwardRef:this._firstStickerRef})),l.createElement("div",{onMouseEnter:this._secondStickerRef.current?this._secondStickerRef.current.onMouseEnter:null,className:V.default.singleGroupedStickerContainer,ref:this._setRefRightStickerBubble},l.createElement(j.default,{transitionName:"delay-leave"},te),l.createElement(N.default,{msg:(0,x.default)(v.asGroupedSticker,"secondMsg.asGroupedSticker"),menuTransition:q,onOpenForwardFlow:this.openForwardFlow,isMsgVisible:r,scrollMsg:this.scrollMsg,highlight:this.highlight,isFocused:i&&1===o,forwardRef:this._secondStickerRef})))),$)}var ae=t.map((e=>e.asAlbumAsset)).filter(Boolean);ae.length!==t.length&&(__LOG__(4,void 0,new Error,!0)(Y(),ae.length,t.length),SEND_LOGS("invalid-album-grid"));var re=ae.length>_.default.ALBUM_MIN_SIZE?ae[0]:null,se=(0,L.showForwarded)(t[0])?l.createElement(T.default,{msg:t[0].unsafe(),className:V.default.forwardedIndicator}):null;return l.createElement("div",{className:b,"data-id":s,ref:this._refAlbumWrapper,tabIndex:-1},l.createElement(j.default,{transitionName:"delay-leave"},Z),l.createElement("div",{className:Q,onContextMenu:this.contextMenu,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown},A,l.createElement("div",{className:X,ref:this.setRefBubble},e,se,l.createElement("div",{className:V.default.gridContainer},l.createElement(u.default,{msg:(0,x.default)(t[0].asAlbumAsset,"msgs[0].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.TOP_LEFT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[0])}))}),l.createElement(u.default,{msg:(0,x.default)(t[1].asAlbumAsset,"msgs[1].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.TOP_RIGHT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[1])}))}),l.createElement(u.default,{msg:(0,x.default)(t[2].asAlbumAsset,"msgs[2].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.BOTTOM_LEFT,isMsgVisible:r,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[2])}))}),l.createElement(u.default,{msg:(0,x.default)(t[3].asAlbumAsset,"msgs[3].asAlbumAsset"),albumMsgs:ae,albumPosition:c.AlbumPosition.BOTTOM_RIGHT,isMsgVisible:r,zoomMsg:re,numAdditionalMedia:C,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onAlbumGridRendered(e,t[3])}))}))),l.createElement(j.default,{transitionName:q},K),D),z,J,l.createElement(W.SelectionListener,{parent:this,msgId:t[0].id.toString(),selectedMessages:d}))}}t.default=K,K.contextType=P.default,K.displayName="AlbumWrapper"},97125:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(59517)),o=r(a(118)),l=s(a(62261)),d=r(a(71874)),u=r(a(79711)),c=(r(a(50935)),r(a(69345))),h=a(96645),f=r(a(10853)),p=r(a(40210)),m=r(a(40207)),_=a(64658),v=r(a(82631));class g extends i.PureComponent{constructor(e){super(e),this.showMediaMissing=()=>{u.default.openModal(i.createElement(c.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),u.default.openModal(i.createElement(f.default,{msg:(0,_.unproxy)(this.props.msg.unsafe())}))},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}render(){var e,t=this.props.msg,a=this.props.mediaData,r=this.state.playing?this.state.currentTime:a.duration;switch(a.mediaStage){case h.MEDIA_DATA_STAGE.RESOLVED:e=i.createElement(l.default,{mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,duration:r,playing:this.state.playing,played:!0,autoPlay:!1,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:t.isSentByMe,displayType:this.props.displayType});break;case h.MEDIA_DATA_STAGE.NEED_POKE:e=i.createElement(l.AudioPlayerFrame,{icon:i.createElement(v.default,{name:"audio-download"}),outgoingMsg:t.isSentByMe,action:this._forceDownloadMedia});break;case h.MEDIA_DATA_STAGE.NEED_UPLOAD:e=i.createElement(l.AudioPlayerFrame,{icon:i.createElement(v.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeUpload});break;case h.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=i.createElement(l.AudioPlayerFrame,{icon:i.createElement(v.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeRemoteUpload});break;case h.MEDIA_DATA_STAGE.ERROR_MISSING:e=i.createElement(l.AudioPlayerFrame,{icon:i.createElement(v.default,{name:"audio-play",directional:!0}),outgoingMsg:t.isSentByMe,action:this.showMediaMissing});break;default:e=i.createElement(l.AudioPlayerFrame,{outgoingMsg:t.isSentByMe,spinner:!0})}var s=i.createElement("div",{className:n.default.icon},i.createElement(v.default,{name:"audio-file"})),u=this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg?i.createElement(d.default,{msg:t,contact:t.senderObj}):null;return i.createElement(o.default,{msg:t,quotedMsg:this.props.quotedMsg,author:u,player:e,avatar:s,displayType:this.props.displayType})}}g.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj"],mediaData:["duration","type","mediaStage","renderableUrl"]},g.displayName="Audio";var E=(0,m.default)(g,g.CONCERNS);t.default=E},118:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(9275)),l=s(a(50935)),d=s(a(131)),u=s(a(4336)),c=s(a(17957)),h=s(a(71726)),f=a(62761),p=s(a(26660)),m=s(a(50751)),_=s(a(72424)),v=s(a(47609)),g=e=>{var t,{msg:a}=e,{id:r,type:s,ack:g,isSentByMe:E}=(0,v.default)(a,["id","type","ack","isSentByMe"]),S=c.default.isRTL()?!E:E,C=(0,i.default)(o.default.bubble,{[o.default.bubbleRightAvatar]:!S,[o.default.bubbleLeftAvatar]:S,[o.default.hasAuthor]:e.author,[o.default.hasQuote]:e.quotedMsg,[o.default.isGallery]:e.displayType===l.default.DISP_TYPE.STARRED_MSGS||e.displayType===l.default.DISP_TYPE.GALLERY,[o.default.isForwarded]:(0,f.showForwarded)(a)}),y=e.status?n.createElement("div",{className:o.default.status},e.status):null,b=null!=e.author?n.createElement("div",{className:o.default.author},e.author):null,T=(0,f.showForwarded)(a)?n.createElement(u.default,{msg:a.unsafe(),className:o.default.forwardedIndicator}):null,M=e.quotedMsg?n.createElement("div",{className:o.default.quote},e.quotedMsg):null,{playbackRate:N,playbackControlMessageId:I}=(0,v.default)(m.default,["playbackRate","playbackControlMessageId"]),P=!1;if(_.default.pttPlaybackSpeedEnabled&&"ptt"===s){P=I===r.toString();var A=(0,i.default)(o.default.playbackRateButtonContainer,{[o.default.playbackRateButtonContainerVisible]:P});t=n.createElement("div",{className:A},n.createElement(p.default,{playbackRate:N,onClick:()=>{m.default.advancePlaybackRateFor(r)},isSentByMe:E,played:g===l.default.ACK.PLAYED}))}var O=(0,i.default)(o.default.avatar,{[o.default.avatarVisible]:!P});return n.createElement("div",{className:C},b,T,M,n.createElement(d.default,{msg:a.unsafe(),wrapperClass:o.default.ctwaContext}),n.createElement("div",{className:o.default.body},n.createElement("div",{className:o.default.player},e.player),n.createElement("div",{className:o.default.avatarContainer},t,n.createElement("div",{className:O},e.avatar,y))),n.createElement("div",{className:o.default.meta},n.createElement(h.default,{msg:a})))};g.displayName="AudioBubble";var E=g;t.default=E},62261:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayerFrame=w,t.default=void 0;var i=s(a(19976)),n=s(a(72779)),o=r(a(2784)),l=a(60474),d=s(a(76254)),u=s(a(18984)),c=s(a(19899)),h=s(a(79711)),f=s(a(50935)),p=a(98864),m=s(a(17957)),_=s(a(20642)),v=s(a(19125)),g=s(a(40210)),E=s(a(85059)),S=s(a(61941)),C=a(30454),y=s(a(50751)),b=s(a(58940)),T=s(a(40207)),M=a(64658),N=s(a(82631)),I=s(a(67134));function P(){var e=(0,i.default)(["AudioPlayer:maybePlayNextPTT (last message) error: ",""]);return P=function(){return e},e}function A(){var e=(0,i.default)(["AudioPlayer:maybePlayNextPTT (with next message) error: ",""]);return A=function(){return e},e}function O(){var e=(0,i.default)(["AudioPlayer:onPttPlayback error: ",""]);return O=function(){return e},e}class D extends o.PureComponent{constructor(e){super(e),this.setRefAudio=e=>{this._refAudio=e},this._scrollPositionDetectorRef=o.createRef(),this._onPlayClick=()=>{this._scrollPositionDetectorRef.current&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);var e=this._refAudio;e&&(this.props.playing?e.pause():this._playAudio(!1))},this.handleKeyActivation=e=>{e.preventDefault(),this._onPlayClick()},this._onPttPlayback=e=>{if(this.props.currMsgId===e){this.setState({sequentialPlayback:!0,currentTime:0}),this._scrollPositionDetectorRef.current&&(this._startingScrollPos=this._scrollPositionDetectorRef.current.getBoundingClientRect().top);var t=this._refAudio;t&&(this._delayPttPromise=this._delayPtt(f.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{t.currentTime=0,this._playAudio(!0)})).catch((e=>{__LOG__(3)(O(),e)})).finally((()=>{this._delayPttPromise=null})))}},this._delayPtt=e=>new Promise((t=>this.props.setInterval(t,e))),this._onNewPttRecording=()=>{var e=this._refAudio;e&&(this.props.playing&&e.pause(),this._delayPttPromise&&this._delayPttPromise.cancel())},this.onPlaying=()=>{var{currMsgId:e,onPlayingUpdate:t,pttPrefs:a}=this.props;if(e){h.default.pttPlaying(e);var r=a.setPlayingMessage(e);this._playingMessageEnded=()=>{this._playingMessageEnded=null,r()}}t(!0)},this.onPause=()=>{this.props.onPlayingUpdate(!1)},this.onEnded=()=>{var e,t=this._refAudio;t&&(t.currentTime=0,t.load(),this._maybePlayNextPTT(),this._commitPttPlaybackWamEvent(!0),null===(e=this._playingMessageEnded)||void 0===e||e.call(this))},this._updateProgress=()=>{var e=this._refAudio;if(e){var{currentTime:t,duration:a}=e,r=Math.round(t);r!==this._previousNotifiedTime&&(this._previousNotifiedTime=r,this.props.onTimeUpdate(r));var s=this.state.currentTime,i=L(this.props,this.state);t===s&&a===i||this.setState({currentTime:t,audioDuration:a})}},this._handleSeekBarChange=e=>{var t=this._refAudio;if(t){var{duration:a}=t;e!==a||this.props.playing?(this.setState({currentTime:e}),t.currentTime=e):(this.setState({currentTime:0}),t.currentTime=0),null!=this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent.pttSeekCnt+=1)}},this.onPlayerError=()=>{this._commitPttPlaybackWamEvent(!1)},this._onOtherPttPlaying=e=>{this.props.currMsgId!==e&&this._delayPttPromise&&this._delayPttPromise.cancel()},this._renderAudioTag=e=>o.createElement(u.default,{autoPlay:this.props.autoPlay,onError:this.onPlayerError,preload:"auto",setRefAudio:this.setRefAudio,url:e,playbackRate:this.props.isPtt?this.props.pttPrefs.playbackRate:1}),this._prevPlaybackRate=e.pttPrefs.playbackRate,this.state={currentTime:0,audioDuration:L(e,null),playedBefore:e.played,sequentialPlayback:!1}}componentDidMount(){var e=(0,S.default)(this._refAudio,"this._refAudio");this.props.listeners.add(e,"playing",this.onPlaying),this.props.listeners.add(e,"pause",this.onPause),this.props.listeners.add(e,"ended",this.onEnded),this.props.listeners.add(e,"timeupdate",this._updateProgress),this.props.listeners.add(e,"durationchange",this._updateProgress),this.props.listeners.add(e,"progress",this._updateProgress),this.props.listeners.add(h.default,"pttRecording",this._onNewPttRecording),this.props.listeners.add(h.default,"sequential_playback_ptt",this._onPttPlayback),this.props.listeners.add(h.default,"pttPlaying",this._onOtherPttPlaying)}componentDidUpdate(e){var t,a,r,s;this.props.playing!==e.playing&&(this.props.playing?this._cancelProgressUpdateInterval=(a=this._updateProgress,(s=()=>{r=requestAnimationFrame((()=>{a(),s()}))})(),()=>{cancelAnimationFrame(r)}):null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this));if(null!=this._pttPlaybackWamEvent){var{playbackRate:i}=this.props.pttPrefs;i!==this._prevPlaybackRate&&(this._prevPlaybackRate=i,this._pttPlaybackWamEvent.pttPlaybackSpeedCnt+=1)}}componentWillUnmount(){var e,t;null===(e=this._playingMessageEnded)||void 0===e||e.call(this),null===(t=this._cancelProgressUpdateInterval)||void 0===t||t.call(this)}_isValidPlaybackSequence(e){return e.type===f.default.MSG_TYPE.PTT&&!(e.isSentByMe&&!this.props.outgoingMsg&&!this.state.playedBefore)}_playAudio(e){var t=this._refAudio;t&&(t.play(),this.props.isPtt&&null==this._pttPlaybackWamEvent&&(this._pttPlaybackWamEvent=new g.default.PttPlayback({pttSeekCnt:0,pttPlaybackSpeedCnt:0,pttTrigger:e?g.default.PTT_TRIGGER_TYPE.SEQUENTIAL:g.default.PTT_TRIGGER_TYPE.MANUAL})))}_maybePlayNextPTT(){var e=this.state.sequentialPlayback;if(this.props.getSequentialMsg&&this.props.currMsgId){var t=this.props.getSequentialMsg(this.props.currMsgId);t&&this._isValidPlaybackSequence(t)?this._delayPttPromise=this._delayPtt(f.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{var e;E.default.getGlobalSounds()&&(0,C.playMidPttTone)();var a=null===(e=this._scrollPositionDetectorRef.current)||void 0===e?void 0:e.getBoundingClientRect().top;null!=a&&this._startingScrollPos===a&&h.default.scrollToPtt(t.unsafe()),h.default.autoplayPTT(t.id)})).catch((e=>{__LOG__(3)(A(),e)})).finally((()=>{this._delayPttPromise=null})):this.state.sequentialPlayback&&(this._delayPttPromise=this._delayPtt(f.default.PTT_PLAYBACK_DELAY).cancellable().then((()=>{E.default.getGlobalSounds()&&(0,C.playEndPttTone)(),this._delayPttPromise=null})).catch((e=>{__LOG__(3)(P(),e)})).finally((()=>{this._delayPttPromise=null})),e=!1),this.setState({playedBefore:!0,sequentialPlayback:e})}}render(){var e=this.props.playing?"audio-pause":"audio-play",t=null!=this.props.duration&&0!==this.props.duration?o.createElement("div",{className:d.default.metadata,"aria-hidden":!0},c.default.durationStr(this.props.duration)):null,a=o.createElement("button",{className:d.default.button,onClick:this._onPlayClick},o.createElement(N.default,{name:e})),r=(0,S.default)(this.props.mediaData,"this.props.mediaData"),s=(0,S.default)(this.props.downloadMedia,"this.props.downloadMedia"),i=o.createElement(v.default,{mediaData:r,placeholderRenderer:()=>this._renderAudioTag(""),downloadMedia:s},this._renderAudioTag),n=o.createElement("div",{ref:this._scrollPositionDetectorRef,className:d.default.scrollPositionDetector});return o.createElement(w,{button:a,played:this.props.played,outgoingMsg:this.props.outgoingMsg,displayType:this.props.displayType},n,t,o.createElement(b.default,{currentTime:this.state.currentTime,duration:L(this.props,this.state),onChange:this._handleSeekBarChange,outgoing:this.props.outgoingMsg,played:Boolean(this.props.played)}),i)}_commitPttPlaybackWamEvent(e){var t=this._pttPlaybackWamEvent;null!=t&&(t.pttPlaybackFailed=!e,t.pttType=function(e){switch(null==e?void 0:e.split(";")[0]){case"audio/ogg":return g.default.PTT_STREAM_TYPE.OPUS;case"audio/aac":return g.default.PTT_STREAM_TYPE.AAC;case"audio/mpeg":return g.default.PTT_STREAM_TYPE.MP3;case"audio/amr-wb":return g.default.PTT_STREAM_TYPE.AMR_WB;case"audio/amr":case"audio/3gpp2":return g.default.PTT_STREAM_TYPE.AMR_NB;case"audio/3gpp":default:return g.default.PTT_STREAM_TYPE.UNKNOWN}}((0,M.unproxy)(this.props.mediaData).mimetype),t.pttPlaybackSpeed=function(e){switch(e){case 1:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1;case 1.5:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_1_5;case 2:return g.default.PTT_PLAYBACK_SPEED_TYPE.SPEED_2;default:throw new Error("Invalid playback rate: ".concat(e))}}(this.props.pttPrefs.playbackRate),null!=this.state.audioDuration&&(t.pttDuration=Math.round(this.state.audioDuration)),t.commit(),this._pttPlaybackWamEvent=null)}}function w(e){var t,a=e.spinner&&null==e.button?o.createElement("button",{className:d.default.button,onClick:e.action},o.createElement("div",{className:d.default.spinner},e.canCancel?o.createElement(p.PendingCancel,{outgoingMsg:e.outgoingMsg}):o.createElement(p.Pending,{outgoingMsg:e.outgoingMsg}))):null,r=e.icon&&null==e.button&&!e.spinner?o.createElement("button",{className:d.default.button,onClick:e.action},e.icon):null,s=null!=e.fileSize&&0!==e.fileSize?o.createElement("div",{className:d.default.metadata},m.default.filesize(e.fileSize)):null,i=null!==(t=e.children)&&void 0!==t?t:o.createElement(b.default,{currentTime:0,duration:100,outgoing:e.outgoingMsg,played:Boolean(e.played),disabled:!0}),u=(0,n.default)(d.default.audio,{[d.default.isGallery]:e.displayType===f.default.DISP_TYPE.STARRED_MSGS||e.displayType===f.default.DISP_TYPE.GALLERY});return o.createElement("div",{className:u},o.createElement("div",{className:d.default.controls},e.button,a,r),o.createElement("div",{className:d.default.body},o.createElement(l.InvisibleLabel,null,m.default.t(20)),i,s))}D.CONCERNS={pttPrefs:["playbackRate"]},D.displayName="AudioPlayer",w.displayName="AudioPlayerFrame";var R=(0,T.default)((0,I.default)((0,_.default)(D)),D.CONCERNS);class k extends R{handleKeyActivation(e){return this.getComponent().handleKeyActivation(e)}}function L(e,t){var a=null==t?void 0:t.audioDuration;if(null!=a)return a;var r=null==e.duration?null:parseFloat(e.duration);return null==r||Number.isNaN(r)?0:r}t.default=k,k.defaultProps={pttPrefs:y.default}},71874:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(72779)),o=r(a(2784)),l=s(a(13098)),d=s(a(43334)),u=s(a(79711)),c=s(a(91581)),h=s(a(17957)),f=s(a(40207)),p=s(a(3111));function m(){var e=(0,i.default)(["Assertion failed!"]);return m=function(){return e},e}function _(e,t,a){var r;if(a){var s=d.default.get(a);r=s?s.formattedTitle:h.default.t(750)}return t?"".concat(e,"  ").concat(h.default.t(1344)):r?"".concat(e,"  ").concat(r):e}class v extends o.PureComponent{constructor(...e){super(...e),this.onClick=()=>{d.default.find(this.props.msg.sender).then((e=>{u.default.openChatFromUnread(e).then((t=>{t&&u.default.focusChatTextInput(e)}))}))}}render(){var{msg:e,chat:t,contact:a,disableClick:r,displaySelf:s,quotedRemoteJid:i,albumId:d}=this.props,u=t||e.chat;u||(__LOG__(4,void 0,new Error,!0)(m()),SEND_LOGS("author-with-no-chat"));var f,v=u?u.assignedColor(e.sender):1,g=r?null:this.onClick,E=(0,n.default)(l.default.author,"color-".concat(v),{[l.default.hoverable]:g});if(s)f=o.createElement(c.default,{text:_(h.default.t(1896),e.isStatusV3,i)});else if(a.name)f=[o.createElement(c.default,{text:_(a.name,e.isStatusV3,i),className:l.default.name,key:"author",onClick:g})];else{var S=f=[o.createElement("span",{className:l.default.number,role:g?"button":null,key:"".concat(e.id.toString(),"-number"),onClick:g},_((0,p.default)(a.id),e.isStatusV3,i))];if(!e.isStatusV3){var C,y="".concat(d||e.id.toString(),"-push-name");C=a.notifyName?a.notifyName:a.pushname,S.push(o.createElement(c.default,{className:l.default.screenName,key:y,onClick:g,direction:"auto",ellipsify:!0,text:C}))}}return o.createElement("div",{className:E,role:this.props.role||""},f)}}v.CONCERNS={msg:["sender","chat","type","isLive","isStatusV3","id","quotedMsg"],contact:["id","name","notifyName","pushname"]},v.displayName="Author";var g=(0,f.default)(v,v.CONCERNS);t.default=g},87400:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(45880),o=r(a(81524)),l=r(a(40207));class d extends i.PureComponent{render(){var{msg:e}=this.props,{subtype:t,body:a,recipients:r}=e;if("create"===t){var s=parseInt(a,10);return i.createElement(o.default,{id:1897,params:{count:s},plural:s,wrapInHiddenToken:!0})}return"add"===t?i.createElement(o.default,{id:1722,params:{name:(0,n.getFormattedNames)(r,!0)},plural:r.length,wrapInHiddenToken:!0}):"remove"===t?i.createElement(o.default,{id:1723,params:{name:(0,n.getFormattedNames)(r,!0)},plural:r.length,wrapInHiddenToken:!0}):null}}d.CONCERNS={msg:["type","subtype","body","recipients"]},d.displayName="BroadcastNotification";var u=(0,l.default)(d,d.CONCERNS);t.default=u},20458:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(a(2784)),n=r(a(72779)),o=r(a(84221));function l(e){var t;return t=e.placeholder?i.createElement("div",{className:o.default.actionsBtn},""):e.items.map(((e,t)=>i.createElement("div",{className:o.default.actionsBtn,key:t,onClick:e.onClick,role:"button",title:e.title||e.label},e.label))),i.createElement("div",{className:(0,n.default)(o.default.actions,{[o.default.noDivider]:"no-divider"===e.theme})},t)}l.displayName="BubbleActions"},92969:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(19899)),o=r(a(52737)),l=a(69914),d=r(a(40207));class u extends i.PureComponent{render(){var e,{children:t,className:a,contact:r,msg:s,onClick:d,style:u}=this.props,c=n.default.timeStr(s.t);return r.isMe&&(e=o.default.pushname),e=e||r.formattedUser||"",i.createElement(l.CopyableDiv,{className:a,onClick:d,prePlainText:"[".concat(c,"] ").concat(e,": "),style:u},t)}}u.CONCERNS={contact:["formattedUser","name","isMe"],msg:["senderObj","t"]},u.displayName="BubbleHiddenText";var c=(0,d.default)(u,u.CONCERNS);t.default=c},30809:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var i=s(a(58527)),n=s(a(72779)),o=r(a(2784)),l=s(a(3535)),d=s(a(31659)),u=a(59420),c=s(a(40207)),h=s(a(74494)),f=s(a(72376));function p({msg:e,replyButton:t}){var{displayText:a,selected:r}=t,s=(0,h.default)(t,"selected"),[c,p]=(0,f.default)((()=>{s(!0),(0,d.default)(e,t,e.chat).then((e=>{e!==u.SendMsgResult.OK&&s(!1)})).catch((()=>{s(!1)}))}),{disabled:r});return a?o.createElement("div",(0,i.default)({ref:c,className:(0,n.default)(l.default.buttonWrapper,{[l.default.disabled]:r})},p),o.createElement("div",{className:(0,n.default)(l.default.buttonLabel)},o.createElement("span",null,a))):null}p.displayName="ButtonBase";var m=(0,c.default)(p,{replyButton:["selected","displayText","id"],msg:["chat"]},{},!0);function _({msg:e}){var{replyButtons:t}=e;if(null==t||0===t.length)return null;var a=t.some((e=>e.displayText.length>10));return o.createElement("div",{className:(0,n.default)(l.default.buttonContainer,{[l.default.stacked]:t.length>=3||a,[l.default.withLargeButtonsSpace]:a})},t.map(((t,a)=>o.createElement(m,{key:a,msg:e,replyButton:t}))))}_.displayName="Buttons"},12708:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(18164),o=r(a(91581)),l=r(a(47642)),d=r(a(17957)),u=r(a(97816)),c=r(a(40207)),h=r(a(65411));class f extends i.PureComponent{render(){var{msg:e,spacer:t,trusted:a}=this.props,r=(0,n.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:true,trusted:!0===a}),s=e.text;if(!s)return null;var c=!(!e.dir||e.rtl===d.default.isRTL());return i.createElement(i.Fragment,null,!e.ctwaContext&&i.createElement(h.default,{msg:e}),i.createElement(u.default,{msg:e,"data-id":e.id,spacer:t},i.createElement(l.default,{text:s,textLimit:e.initialPageSize},(t=>i.createElement(o.default,{direction:e.dir,dirMismatch:c,formatters:r,inferLinesDirection:!0,selectable:true,text:e.text,textLimit:t.textLimit})))))}}f.CONCERNS={msg:["t","id","dir","rtl","text","initialPageSize","footer","ctwaContext"]},f.displayName="Caption";var p=(0,c.default)(f,f.CONCERNS);t.default=p},98788:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(35387),o=r(a(20227)),l=r(a(40207));class d extends i.PureComponent{constructor(...e){super(...e),this.onLinkClick=()=>{var e=this.props.msg.matchedText;(0,n.openExternalLink)(e)}}render(){var{msg:e}=this.props;return i.createElement(o.default,{title:e.title,description:e.description,thumbnailJpeg:e.thumbnail,onClick:this.onLinkClick,isSentByMe:e.isSentByMe,star:e.star})}}d.CONCERNS={msg:["thumbnail","title","description","matchedText","isSentByMe","star"]},d.displayName="CatalogPreviewContainer";var u=(0,l.default)(d,d.CONCERNS);t.default=u},17058:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(39012)),o=a(35387),l=a(95585),d=r(a(17957)),u=r(a(90277)),c=r(a(40207)),h=a(64658),f=r(a(20385)),p=()=>{(0,o.openExternalLink)((0,l.getCiphertextFaqUrl)())};class m extends i.PureComponent{render(){return i.createElement(f.default,{msg:(0,h.unproxy)(this.props.msg),displayAuthor:this.props.displayAuthor},i.createElement(u.default,{iconName:"ciphertext",msg:this.props.msg.unsafe()},d.default.t(1182)," ",i.createElement("span",{className:n.default.action,role:"button",onClick:p},d.default.t(875))))}}m.CONCERNS={msg:["isSentByMe","isGroupMsg","senderObj"]},m.displayName="Ciphertext";var _=(0,c.default)(m,m.CONCERNS);t.default=_},87478:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getBubbleDimension=function(e,t,a,r,s,o){var u,c,p=o&&a<1?1:a,m=function(e,t,a){return f(e,t,a)?d:l}(e,r,s);r===n.DisplayTheme.Album?(u=i.default.ALBUM_MAX_HEIGHT-i.default.ALBUM_PADDING,c=i.default.ALBUM_MAX_HEIGHT):(u=p<1?m.portraitWidth:m.width,c=function(e,t,a,r){if(r&&t<=i.default.HSM_ASPECT_RATIO)return h(i.default.HSM_ASPECT_RATIO,e,a);return h(t,e,a)}(m,p,e,t));return{bubbleWidth:u,bubbleHeight:c}},t.getImgStyle=function(e,t,a,r){if(null==e||0===e||null==t||0===t||null==a||0===a||null==r||0===r)return{width:"100%",height:"100%"};return e/t>a/r?{height:"100%"}:{width:"100%"}},t.canUseCustomCropping=f;var s=r(a(70417)),i=r(a(50935)),n=a(40713),o=r(a(72424)),l={width:330,portraitWidth:330,minAspectRatio:1,maxAspectRatio:2.4},d=(0,s.default)((0,s.default)({},l),{},{portraitWidth:240,minAspectRatio:.71,maxAspectRatio:4}),u=new Set([i.default.MSG_TYPE.IMAGE,i.default.MSG_TYPE.VIDEO]),c=new Set([i.default.DISP_TYPE.CONVERSATION,i.default.DISP_TYPE.MSG_INFO,i.default.DISP_TYPE.STARRED_MSGS]);function h(e,t,a){return null==e?a===i.default.MSG_TYPE.VIDEO?240:330:(r=e<t.minAspectRatio?t.portraitWidth/t.minAspectRatio:e<1?t.portraitWidth/e:e<=t.maxAspectRatio?t.width/e:t.width/t.maxAspectRatio,Math.round(r));var r}function f(e,t,a){return!!o.default.webMediaCustomCroppingEnabled&&(u.has(e)&&c.has(a)&&t!==n.DisplayTheme.Album)}},131:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(2784)),n=r(a(70727)),o=r(a(16846)),l=a(28703),d=a(64658),u=r(a(65411));function c(e){var t=(0,d.unproxy)(e.msg);if(t.ctwaContext){var a=t.ctwaContext.mediaType!==l.ExternalAdReplyInfoMediaType.VIDEO||t.ctwaContext.isSuspiciousLink?i.createElement(i.Fragment,null,i.createElement(u.default,{msg:t}),i.createElement(n.default,{context:t.ctwaContext,isSentByMe:t.isSentByMe,compose:!1})):i.createElement(o.default,{msg:t,context:t.ctwaContext});return i.createElement("div",{className:e.wrapperClass},a)}return null}c.displayName="CtwaContext"},70727:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var i=s(a(72779)),n=s(a(71718)),o=r(a(2784)),l=s(a(79711)),d=s(a(58353)),u=s(a(91581)),c=a(35387),h=a(90088),f=s(a(82338)),p=s(a(82631)),m=s(a(74185));function _({sourceUrl:e,context:t,isSentByMe:a,compose:r}){var s;s=(null==t?void 0:t.isSuspiciousLink)||!(null==t?void 0:t.thumbnailUrl)&&!(null==t?void 0:t.thumbnail)?o.createElement("div",{className:d.default.noThumbContainer},o.createElement(p.default,{className:d.default.noThumbIcon,name:"link"})):o.createElement("img",{alt:"",className:d.default.media,src:t.thumbnailUrl?t.thumbnailUrl:"data:image/jpeg;base64,".concat(t.thumbnail||"")});var _=null!=(null==t?void 0:t.description)&&!t.isSuspiciousLink&&o.createElement("div",{className:d.default.description},o.createElement(u.default,{text:t.description,titlify:!0})),v=e;if(t&&(v=t.sourceUrl,!t.isSuspiciousLink&&(t.title||t.thumbnailUrl||t.thumbnail))){v=m.default.hostname(v);try{v=n.default.toUnicode(v)}catch(e){}}var g=v&&o.createElement("div",{className:d.default.source},o.createElement(u.default,{text:v})),E=(null==t?void 0:t.isSuspiciousLink)?null:null==t?void 0:t.title,S=(0,i.default)(d.default.preview,{[d.default.isCompose]:r,[d.default.bubbleIn]:!r&&!a,[d.default.bubbleOut]:a});return o.createElement("div",{className:S,onClick:()=>{if(!r)if(null==t?void 0:t.isSuspiciousLink){var e=(0,h.findLink)(t.sourceUrl);e&&l.default.openModal(o.createElement(f.default,{link:e}))}else(null==t?void 0:t.sourceUrl)&&(0,c.openExternalLink)(t.sourceUrl)}},s,o.createElement("div",{className:d.default.body},o.createElement("div",{className:d.default.title,title:E},o.createElement(u.default,{text:E})),_,g))}_.displayName="CtwaContextImagePreview"},16846:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(50935)),d=s(a(426)),u=s(a(91581)),c=r(a(35387)),h=s(a(18120)),f=s(a(17957)),p=s(a(20642)),m=r(a(68084)),_=s(a(27e3)),v=s(a(77865)),g=s(a(84443)),E=s(a(57008)),S=s(a(49213)),C=s(a(82631)),y=r(a(75074)),b=s(a(74185)),T=s(a(10252)),M=s(a(76022)),N="PREVIEW",I="FLOATER";class P extends n.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==N&&this.setState({mode:N})},this.setFloaterMode=()=>{this.state.mode!==I&&this.setState({mode:I})},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),(0,c.openExternalLink)(this.props.context.sourceUrl)};var t=e.msg;if(t.type===l.default.MSG_TYPE.VIDEO){var a=e.msg.toJSON(),r=new v.default({fromMe:e.msg.id.fromMe,remote:e.msg.id.remote,id:(0,S.default)()});a.id=r,t=new _.default(a)}var s=g.default.isOpened(t)?I:N;this.state={mode:s,msg:t}}componentDidMount(){this.props.listeners.add(g.default,"".concat(this.state.msg.id.toString(),"_pip_did_open"),this.setFloaterMode),this.props.listeners.add(g.default,"".concat(this.state.msg.id.toString(),"_pip_did_close"),this.setPreviewMode)}render(){var e,t=this.props.context.description?n.createElement("div",{className:T.default.description,title:this.props.context.description},n.createElement(u.default,{text:this.props.context.description})):null,a=b.default.withoutWww(b.default.hostname(this.props.context.sourceUrl)),r=n.createElement("div",{className:T.default.source},n.createElement(u.default,{text:a})),s=(0,i.default)(T.default.body,{[T.default.noThumb]:!this.props.context.thumbnail}),p=(0,i.default)(T.default.preview,{[T.default.bubbleIn]:!this.state.msg.isSentByMe,[T.default.bubbleOut]:this.state.msg.isSentByMe}),_=this.state.mode!==N||h.default.supportsFeature(h.default.F.MD_BACKEND)?null:n.createElement("div",{className:T.default.mediaStateControlsWrapper},n.createElement(m.Play,null)),v=this.state.mode===I?n.createElement(E.default,{icon:n.createElement(C.default,{name:"video-pip-large"})},f.default.t(1179)):null;e=this.props.context.thumbnail||this.props.context.thumbnailUrl?n.createElement("img",{alt:"",className:(0,i.default)(T.default.thumbnail,{[T.default.youtubeThumbnail]:!1}),src:this.props.context.thumbnail?"data:image/jpeg;base64,".concat(this.props.context.thumbnail):this.props.context.thumbnailUrl}):n.createElement("div",{className:T.default.thumbnailPlaceholder});var S=(0,i.default)(T.default.attribution,d.default.clickable),P=a===l.default.HOSTNAME.INSTAGRAM,A=n.createElement("div",{className:S,onClick:this.handleCtwaSourceButtonClick},n.createElement(C.default,{name:P?"logo-instagram":"logo-facebook"}));return n.createElement("div",{className:p},n.createElement("div",{ref:this.setRefThumbnailWrapper,className:T.default.thumbnailWrapper,onClick:h.default.supportsFeature(h.default.F.MD_BACKEND)?this.handleCtwaSourceButtonClick:()=>{g.default.openOgVideoPiP("",this.props.context.thumbnail||"",this.state.msg,0,this.getThumbnailWrapperRect()),M.default.queryVideoPlaybackUrl(this.props.context.mediaUrl).then((e=>{if(g.default.isOpened(this.state.msg)){if(!e.url)throw new Error("Url is missing in response.");g.default.openOgVideoPiP(e.url,this.props.context.thumbnail||"",this.state.msg,0,null)}})).catch((()=>{g.default.closeOgVideoPiP(),o.default.openToast(n.createElement(y.default,{id:(0,y.genId)(),msg:f.default.t(1177),action:{actionText:f.default.t(1178),onAction:()=>{(0,c.openExternalLink)(this.props.context.sourceUrl)}}}))}))}},A,e,_,v),n.createElement(c.default,{className:s,href:this.props.context.sourceUrl},n.createElement("div",{className:T.default.title,title:this.props.context.title},n.createElement(u.default,{text:this.props.context.title})),t,r))}}P.displayName="CtwaContextVideoPreview";var A=(0,p.default)(P);t.default=A},62181:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(19034)),o=r(a(2784)),l=s(a(19899)),d=s(a(79711)),u=s(a(91581)),c=s(a(20642)),h=a(58355);function f(){var e=(0,i.default)(["Clock.relativeDateStr threw with error ",", stack: ",""]);return f=function(){return e},e}class p extends o.PureComponent{constructor(...e){super(...e),this.state={hidden:!1},this._setRefBubble=e=>{this.refBubble=e},this.rerender=()=>{this.forceUpdate()}}componentDidMount(){this.maybeRegMidnight()}componentDidUpdate(){this.maybeRegMidnight()}getTimestamp(){return this.props.timestamp}show(){this.state.hidden&&this.setState({hidden:!1})}hide(){this.state.hidden||this.setState({hidden:!0})}maybeRegMidnight(){this.props.listeners.remove(d.default,"midnight",this.rerender);var e=(0,n.default)().startOf("day").subtract(7,"day");this.props.timestamp>=e.unix()&&this.props.listeners.add(d.default,"midnight",this.rerender)}render(){var e,{isFocusable:t}=this.props,{hidden:a}=this.state;if(!a)try{var r=l.default.relativeDateStr(this.props.timestamp);e=o.createElement(u.default,{direction:"auto",text:r.toUpperCase()})}catch(e){__LOG__(4,void 0,new Error,void 0,["date_marker"])(f(),null==e?void 0:e.name,null==e?void 0:e.stack)}return o.createElement(h.SystemBubble,{ref:this._setRefBubble,hidden:a,isFocusable:t},e)}}p.displayName="DateMarker";var m=(0,c.default)(p);t.default=class extends m{getTimestamp(){return this.getComponent().getTimestamp()}show(){return this.getComponent().show()}hide(){return this.getComponent().hide()}getElement(){return this.getComponent().refBubble}}},83713:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({className:e,children:t,direction:a="horizontal",outgoingMsg:r,position:s}){return n.createElement("div",{className:(0,i.default)(o.default.wrapper,{[o.default.posBottom]:"bottom"===s,[o.default.posTop]:"top"===s,[o.default.wrapperIn]:!r,[o.default.wrapperOut]:r},e)},t)};var i=s(a(72779)),n=r(a(2784)),o=s(a(66007))},96576:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=s(a(72579)),o=s(a(42208)),l=s(a(72779)),d=r(a(2784)),u=s(a(79711)),c=s(a(9386)),h=s(a(50935)),f=s(a(131)),p=s(a(83713)),m=a(98864),_=s(a(48508)),v=s(a(91581)),g=a(99888),E=s(a(43396)),S=a(90973),C=s(a(17957)),y=a(28278),b=s(a(69345)),T=s(a(40686)),M=a(96645),N=s(a(13077)),I=s(a(40210)),P=a(41501),A=s(a(72424)),O=s(a(40207)),D=a(64658),w=s(a(5174)),R=r(a(75074)),k=(0,o.default)(P.MIMETYPES,(e=>"document"===e.msgType));function L(e){e&&(e.stopPropagation(),e.preventDefault())}class x extends d.PureComponent{constructor(...e){super(...e),this.showMediaMissing=e=>{L(e),u.default.openModal(d.createElement(b.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=e=>{if(L(e),Modernizr.adownload)this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:I.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0}).catch((()=>{})).then((()=>{switch(this.props.mediaData.mediaStage){case M.MEDIA_DATA_STAGE.RESOLVED:case M.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:this.props.msg.isVcardOverMmsDocument||(this._displayToast(),E.default.initDownload((0,D.unproxy)(this.props.msg.unsafe())));break;case M.MEDIA_DATA_STAGE.ERROR_MISSING:this.showMediaMissing()}}));else{var t=C.default.t(1909,{chrome_homepage:h.default.BROWSER_LINK.CHROME,firefox_homepage:h.default.BROWSER_LINK.FIREFOX,opera_homepage:h.default.BROWSER_LINK.OPERA});u.default.openModal(d.createElement(c.default,{onOK:()=>u.default.closeModal(),okText:C.default.t(1761)},d.createElement("div",{dangerouslySetInnerHTML:{__html:t}})))}},this.cancelDownload=e=>{L(e),this.props.msg.cancelDownload()},this.cancelUpload=e=>{L(e),this.props.msg.cancelUpload()},this.resumeUpload=e=>{L(e),this.props.msg.resumeUpload()},this.resumeRemoteUpload=e=>{L(e),this.props.msg.resumeRemoteUpload()}}componentDidMount(){var{msg:e,mediaData:t}=this.props;t.fullPreviewData||A.default.webDownloadDocumentThumbMmsEnabled&&(0,y.downloadMmsThumbnail)({msg:(0,D.unproxy)(e),isPreload:!1})}_displayToast(){var{mediaData:e}=this.props,t=e.filename||C.default.t(1430);u.default.openToast(d.createElement(R.default,{msg:C.default.t(588,{name:t}),id:(0,R.genId)()}))}render(){var e,t,a,{displayAuthor:r,displayType:s,msg:o,mediaData:u,quotedMsg:c,trusted:E}=this.props;if(u.pageCount>0){var y=C.default.t(1623,{count:u.pageCount,_plural:u.pageCount});e=d.createElement("span",{className:_.default.metaValue,title:y},y)}if(u.size>0){var b=C.default.filesize(u.size);t=d.createElement("span",{className:_.default.metaValue,title:b},b)}var I,A,O,D=_.default.filetypeIcon;k.hasOwnProperty(u.mimetype)&&(I=null===(O=k[u.mimetype].ext)||void 0===O?void 0:O.toLowerCase(),A=u.mimetype);var R=u.filename?(0,g.getFileExtension)(u.filename):null;if((!I||R&&I!==R)&&(I=R,A=(0,n.default)(P.EXT_TO_MIME,I)),D=(0,l.default)(D,A&&(0,n.default)(k,[A,"icon"])||"icon-doc-generic"),I){var L=I.toUpperCase();a=d.createElement("span",{"data-meta-key":"type","data-testid":"type",className:_.default.metaValue,title:L},L)}var x=u.filename||C.default.t(1430),F=null,B={onClick:()=>{}};switch(u.mediaStage){case M.MEDIA_DATA_STAGE.RESOLVED:case M.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:B.onClick=this.downloadMedia,F=d.createElement(m.Download,{onClick:B.onClick});break;case M.MEDIA_DATA_STAGE.FETCHING:F=d.createElement(m.PendingCancel,{outgoingMsg:o.isSentByMe}),B.onClick=this.cancelDownload;break;case M.MEDIA_DATA_STAGE.NEED_POKE:case M.MEDIA_DATA_STAGE.INIT:B.onClick=this.downloadMedia,F=d.createElement(m.Download,{onClick:B.onClick});break;case M.MEDIA_DATA_STAGE.UPLOADING:F=d.createElement(m.PendingCancel,{outgoingMsg:o.isSentByMe}),B.onClick=this.cancelUpload;break;case M.MEDIA_DATA_STAGE.NEED_UPLOAD:F=d.createElement(m.Upload,null),B.onClick=this.resumeUpload;break;case M.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:F=d.createElement(m.Upload,null),B.onClick=this.resumeRemoteUpload;break;case M.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:break;case M.MEDIA_DATA_STAGE.ERROR_MISSING:B.onClick=this.showMediaMissing;break;case M.MEDIA_DATA_STAGE.SENDING:F=o.isFailed?null:d.createElement(m.Pending,{outgoingMsg:o.isSentByMe});break;default:F=d.createElement(m.Pending,{outgoingMsg:o.isSentByMe})}var G=(o.isFromTemplate||o.isDynamicReplyButtonsMsg)&&o.caption,U=G?null:d.createElement("div",{className:_.default.docMeta},e,a,t);return d.createElement("div",{className:(0,l.default)({[_.default.bubble]:!G,[_.default.templateBubble]:G,[_.default.isPreview]:s===h.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:s===h.default.DISP_TYPE.STARRED_MSGS||s===h.default.DISP_TYPE.GALLERY})},d.createElement(N.default,{displayType:s,msg:o,quotedMsg:c,showAuthor:r,hideCaption:!(o.isFromTemplate||o.isDynamicReplyButtonsMsg),trusted:E},d.createElement(f.default,{msg:o.unsafe(),wrapperClass:_.default.ctwaContext}),d.createElement(w.default,(0,i.default)({className:_.default.buttonContainer,title:C.default.t(1635,{name:x})},B),this.props.trusted?d.createElement(T.default,{msg:o.unsafe(),containerClassName:_.default.thumbContainer,childClassName:_.default.thumb}):null,d.createElement(p.default,{outgoingMsg:o.isSentByMe,position:[].length?"bottom":void 0},d.createElement(S.FlexRow,{className:_.default.deepContainerContent,align:"center"},d.createElement(S.FlexItem,{className:_.default.icon},d.createElement("div",{className:D})),d.createElement(S.FlexItem,{className:_.default.text,grow:1},d.createElement(v.default,{text:x,dirMismatch:o.rtl!==C.default.isRTL(),direction:"auto"})),d.createElement(S.FlexItem,{grow:0},F)))),U))}}x.CONCERNS={msg:["ack","caption","dir","isFromTemplate","isFailed","isSentByMe","rtl","senderObj","subtype","type","isVcardOverMmsDocument","mediaData","isDynamicReplyButtonsMsg"],mediaData:["mediaStage","filename","pageCount","size","mimetype","preview","fullPreviewData"]},x.displayName="Doc";var F=(0,O.default)(x,x.CONCERNS);t.default=F},10084:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(34092)),d=s(a(71582)),u=s(a(82631));class c extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1},this._onMouseEnter=()=>{this.setState({hover:!0})},this._onMouseLeave=()=>{this.setState({hover:!1})}}render(){var e=(0,i.default)(d.default.container,{[d.default.compact]:this.props.displayType===o.default.DISP_TYPE.MSG_INFO});return n.createElement("div",{className:e,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.state.hover?n.createElement(l.default,null,this.props.tooltip):null,n.createElement("div",{className:d.default.error,onClick:this.props.onClick,role:"button"},n.createElement(u.default,{name:"error"})))}}t.default=c,c.displayName="FailIcon"},23151:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(2784)),n=r(a(79711)),o=(r(a(50935)),r(a(10084))),l=r(a(17957)),d=r(a(93621)),u=r(a(47609));function c(e){var{msg:t,displayType:a}=e,{isFailed:r,to:s}=(0,u.default)(t,["isFailed","to"]);return r?i.createElement(o.default,{displayType:a,tooltip:l.default.t(1746),onClick:()=>{n.default.openModal(i.createElement(d.default,{to:s}))}}):null}c.displayName="MDDowngradeFailIcon"},89857:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(2784)),n=r(a(79711)),o=(r(a(50935)),r(a(10084))),l=r(a(17957)),d=r(a(58513)),u=r(a(47609));function c(e){var{msg:t,displayType:a}=e,{isFailed:r}=(0,u.default)(t,["isFailed"]);return r?i.createElement(o.default,{displayType:a,tooltip:l.default.t(1746),onClick:()=>{n.default.openModal(i.createElement(d.default,{msg:t}))}}):null}c.displayName="MDSendFailIcon"},74343:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayType:t,msg:a}=e,{mediaData:r,mdDowngrade:s,isSendFailure:h}=(0,l.default)(a,["mediaData","mdDowngrade","isSendFailure"]);if(r)return i.createElement(n.default,{displayType:t,msg:a});if(d.default.supportsFeature(d.default.F.MD_BACKEND)){if(s)return i.createElement(u.default,{msg:a,displayType:t});if(h)return i.createElement(c.default,{msg:a,displayType:t})}return i.createElement(o.default,{msg:a,displayType:t})};var i=s(a(2784)),n=(r(a(50935)),r(a(30472))),o=r(a(72068)),l=r(a(47609)),d=r(a(18120)),u=r(a(23151)),c=r(a(89857))},30472:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var i=s(a(19976)),n=r(a(2784)),o=s(a(50935)),l=s(a(10084)),d=s(a(18120)),u=s(a(17957)),c=a(96645),h=s(a(53884)),f=s(a(47609));function p(){var e=(0,i.default)(["msg_media_fail_icon:resend failure: ",""]);return p=function(){return e},e}function m(e){var{displayType:t,msg:a}=e,{isFailed:r,type:s,isUnsentMedia:i}=(0,f.default)(a,["isFailed","type","isUnsentMedia"]),{mediaStage:p,type:m}=(0,f.default)(a.mediaData,["mediaStage","type"]),v=t===o.default.DISP_TYPE.CONVERSATION;return s===o.default.MSG_TYPE.REVOKED?null:p===c.MEDIA_DATA_STAGE.ERROR_TOO_LARGE?n.createElement(h.default,{displayType:t,mediaType:m}):!i||p!==c.MEDIA_DATA_STAGE.ERROR_MISSING&&p!==c.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED?r?p===c.MEDIA_DATA_STAGE.ERROR_MISSING?n.createElement(l.default,{displayType:t,tooltip:u.default.t(1414)}):s===o.default.MSG_TYPE.PTT&&p===c.MEDIA_DATA_STAGE.PREPARING?n.createElement(l.default,{displayType:t,tooltip:u.default.t(1220)}):d.default.supportsFeature(d.default.F.RESEND_ICON)&&v&&p!==c.MEDIA_DATA_STAGE.REMOTE_UPLOADING?n.createElement(l.default,{displayType:t,onClick:_.bind(null,a),tooltip:u.default.t(1255)}):n.createElement(l.default,{displayType:t,tooltip:u.default.t(1304)}):null:n.createElement(l.default,{displayType:t,tooltip:u.default.t(1304)})}function _(e){e.resend().catch((function(e){__LOG__(2)(p(),e)}))}m.displayName="MsgMediaFailIcon"},53884:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(50935)),d=r(a(10084)),u=r(a(17957)),c=r(a(72424));function h(e){var t=function(e){var t={maxSize:u.default.filesize(c.default.media)},a={maxSize:u.default.filesize(c.default.maxFileSize)};switch(e){case l.default.MSG_TYPE.AUDIO:case l.default.MSG_TYPE.PTT:return u.default.t(983,t);case l.default.MSG_TYPE.IMAGE:return u.default.t(987,t);case l.default.MSG_TYPE.VIDEO:return u.default.t(1002,t);case l.default.MSG_TYPE.DOCUMENT:return u.default.t(985,a);case l.default.MSG_TYPE.UNKNOWN:default:return u.default.t(986,a)}}(e.mediaType);return i.createElement(d.default,{displayType:e.displayType,onClick:p.bind(null,t),tooltip:t})}h.displayName="MsgMediaTooLargeFailedIcon";var f=h;function p(e){n.default.openModal(i.createElement(o.default,{onOK:()=>n.default.closeModal()},e))}t.default=f},72068:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(19976)),n=r(a(2784)),o=(s(a(50935)),s(a(10084))),l=s(a(17957)),d=s(a(47609));function u(){var e=(0,i.default)(["PlainMsgFailIcon: failed to resend message"]);return u=function(){return e},e}function c(e){var{msg:t,displayType:a}=e,{isFailed:r}=(0,d.default)(t,["isFailed"]);return r?n.createElement(o.default,{displayType:a,tooltip:l.default.t(1255),onClick:()=>{t.resend().catch((()=>{__LOG__(2)(u())}))}}):null}c.displayName="PlainMsgFailIcon"},4336:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(51092)),l=s(a(17957)),d=a(62761),u=s(a(72424)),c=s(a(40207)),h=s(a(82631));class f extends n.Component{render(){var{msg:e,className:t}=this.props;if(!(0,d.showForwarded)(e))return null;var a=u.default.frequentlyForwardedMessages&&e.isFrequentlyForwarded,r=u.default.hfmStringChanges?"highly-forwarded-v2":"highly-forwarded",s=a?r:"forwarded",c=(0,i.default)(o.default.icon,{[o.default.iconHighlyForwarded]:a&&!u.default.hfmStringChanges}),f=u.default.hfmStringChanges?l.default.t(717):l.default.t(714),p=a?f:l.default.t(714);return n.createElement("div",{className:(0,i.default)(o.default.container,t)},n.createElement(h.default,{name:s,display:"inline",className:c}),n.createElement("span",{className:o.default.text},p))}}f.CONCERNS={msg:["isForwarded","forwardingScore","numTimesForwarded","isFrequentlyForwarded"]},f.displayName="ForwardedIndicator";var p=(0,c.default)(f,f.CONCERNS);t.default=p},41117:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(38147)),l=s(a(39815));class d extends n.PureComponent{constructor(...e){super(...e),this._setCellFrameDivRef=e=>{this._cellFrameDivRef=e}}indicateFocus(){o.default.maybeIndicateFocus(this._cellFrameDivRef,l.default.focusAnimation)}render(){var e=this.props,t=(0,i.default)(l.default.msg,{[l.default.hover]:e.hover,[l.default.current]:e.current,[l.default.active]:e.active});return n.createElement("div",{ref:this._setCellFrameDivRef,className:t,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave},e.children)}}t.default=d,d.displayName="GalleryMsg"},84700:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BUBBLE_PADDING=t.MAX_DIM=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(71874)),d=s(a(92969)),u=s(a(12708)),c=s(a(79711)),h=s(a(50935)),f=s(a(131)),p=a(28703),m=s(a(4336)),_=s(a(43429)),v=s(a(90477)),g=a(13414),E=s(a(17957)),S=s(a(69345)),C=a(96645),y=s(a(71726)),b=s(a(40210)),T=a(62761),M=(a(62742),s(a(40207))),N=a(64658),I=a(18388),P=s(a(82631)),A=s(a(900)),O=s(a(15668)),D=(0,I.getIntFromStylesProp)(_.default,"-width-picture-bubble-inner");t.MAX_DIM=D;var w=(0,I.getIntFromStylesProp)(_.default,"-padding-picture-bubble");t.BUBBLE_PADDING=w;var R=D/4;class k extends n.PureComponent{constructor(...e){super(...e),this.state={playing:!1},this.playCount=0,this.pause=()=>{this.playCount=0,this._pause()},this.handleKeyActivation=e=>{e.stopPropagation(),e.preventDefault(),this._handleClick(e)},this.play=e=>{var{mediaData:t}=this.props,a=this.playerRef;if(t.mediaStage===C.MEDIA_DATA_STAGE.RESOLVED&&a){e&&e.stopPropagation();var r=this.duration;if(null==r||0===r){var s=a.getDuration();null!=s?r=s:t.duration&&"0"!==t.duration&&(r=parseInt(t.duration,10))}if(null!=r&&0!==r){var i=Math.ceil(6/r);this.playCount=Math.max(i,3)}else this.playCount=3;this._play()}},this._pause=()=>{this.setState({playing:!1}),this.playerRef&&this.playerRef.pauseAndReset()},this._play=()=>{this.playerRef&&(this.playCount<=0?this.pause():(this.playCount-=1,this.state.playing||this.setState({playing:!0}),this.playerRef.play()))},this.showMediaMissing=()=>{c.default.openModal(n.createElement(S.default,{msg:this.props.msg.unsafe()}))},this.getZoomNode=e=>{var t=this.props.isMsgVisible;if(!t)return null;var a=t(e);return a?a.getImgNode&&a.getImgNode():null},this.launchMediaViewer=e=>{e&&e.stopPropagation(),c.default.mediaViewerModal({msg:(0,N.unproxy)(this.props.msg.unsafe()),getZoomNode:this.getZoomNode})},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:b.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._handleClick=e=>{switch(this.props.mediaData.mediaStage){case C.MEDIA_DATA_STAGE.RESOLVED:this._shouldPlay()?this.play(e):this.launchMediaViewer(e);break;case C.MEDIA_DATA_STAGE.INIT:this.launchMediaViewer(e);break;case C.MEDIA_DATA_STAGE.FETCHING:this.cancelDownload();break;case C.MEDIA_DATA_STAGE.NEED_POKE:this._downloadMedia();break;case C.MEDIA_DATA_STAGE.UPLOADING:this.cancelUpload();break;case C.MEDIA_DATA_STAGE.NEED_UPLOAD:this.resumeUpload();break;case C.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:this.resumeRemoteUpload();break;case C.MEDIA_DATA_STAGE.ERROR_MISSING:this.showMediaMissing()}}}componentDidMount(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:b.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}getStyle(){var e,t,a=this.props.mediaData,r=a.aspectRatio||a.fullWidth/a.fullHeight;if(!r)return{bubbleWidth:D,bubbleHeight:"100%",contentWidth:D,contentHeight:"100%"};r<=1/4?(t=D,e=1.2*R):r<1?(t=D,e=D*r):r<4?(e=D,t=D/r):(e=D,t=R);var s=a.renderableUrl&&a.fullWidth||e,i=a.renderableUrl&&a.fullHeight||t;return s/i>e/t?(s=s*t/i,i=t):(i=i*e/s,s=e),i>D&&(i=D),{bubbleWidth:e,bubbleHeight:t,contentWidth:s,contentHeight:i}}_getFlexSize(e){var t,a,r=this.props.mediaData,s=r.aspectRatio||r.fullWidth/r.fullHeight,i=1.2*R;s>=1?e<D?(a=(t=e)/s)<R&&(a=R):(a=(t=D)/s)<R&&(a=R):((t=(a=D)*s)<i&&(t=i),e<D&&t>e&&(t=e));var n=t,o=a;return n/o>t/a?(n=n*a/o,o=a):(o=o*t/n,n=t),{bubbleWidth:t,bubbleHeight:a,contentWidth:n,contentHeight:o}}getImgNode(){if(this.playerRef)return this.playerRef.underlyingVideo()}_shouldPlay(){return!this.state.playing&&this.playCount!==1/0}render(){var e=this.props.msg,t=this.props.mediaData,a=t.preview?t.preview.url():void 0,r=null,s=this.getStyle();null!=this.props.maxWidth&&this.props.maxWidth<s.bubbleWidth&&(s=this._getFlexSize(this.props.maxWidth));var{bubbleWidth:c,contentWidth:S,contentHeight:b}=s;if(t.mediaStage===C.MEDIA_DATA_STAGE.RESOLVED){var M=t.aspectRatio>=1?{width:"auto",height:b}:{width:S,height:"auto"};r=n.createElement("div",{className:_.default.thumbVideo},n.createElement(O.default,{ref:(0,g.GetRef)((e=>{this.playerRef=e})),src:t.renderableUrl,style:M,onEnded:this._play,muted:!0},E.default.t(1465)))}var N,I=a?n.createElement("div",{className:_.default.thumbImage,style:{backgroundImage:"url(".concat(a,")")}}):null,D=e.caption?n.createElement("div",{className:_.default.caption,style:{maxWidth:c}},n.createElement(u.default,{msg:e.unsafe(),trusted:this.props.trusted})):null,R=D?null:n.createElement(A.default,null),k=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg,x=(0,T.showForwarded)(e),F=(0,i.default)(_.default.bubble,{[_.default.hasCaption]:e.caption,[_.default.hasAuthor]:k,[_.default.forwarded]:x,[_.default.isPSA]:e.isPSA,[_.default.isGallery]:this.props.displayType===h.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===h.default.DISP_TYPE.GALLERY,[_.default.isInfo]:this.props.displayType===h.default.DISP_TYPE.MSG_INFO}),B=k?n.createElement("div",{className:_.default.author},n.createElement(l.default,{msg:e,contact:e.senderObj})):null,G=x?n.createElement(m.default,{msg:e.unsafe(),className:_.default.forwardedIndicator}):null;switch(e.gifAttribution){case p.VideoMessageAttribution.GIPHY:N=n.createElement("div",{className:_.default.vendor},n.createElement(P.default,{name:"giphy"}));break;case p.VideoMessageAttribution.TENOR:N=n.createElement("div",{className:_.default.vendor},n.createElement(P.default,{name:"tenor"}));break;default:N=null}var U=this.props.quotedMsg?n.createElement("div",{className:_.default.quote},this.props.quotedMsg):null,j=n.createElement(n.Fragment,null,B,G,U,n.createElement(f.default,{msg:e.unsafe(),wrapperClass:_.default.ctwaContext}),n.createElement("div",{"data-a8n":o.default.key("image-thumb-gif"),className:_.default.thumb,onClick:this._handleClick,style:{width:S,height:b}},n.createElement(v.default,{mediaStage:t.mediaStage,mediaDataFileSize:t.size,isFailed:e.isFailed,shouldPlay:this._shouldPlay(),onClick:this._handleClick}),I,r,R,N),D,n.createElement("div",{className:_.default.meta},n.createElement(y.default,{msg:this.props.msg})));return D?n.createElement(d.default,{contact:e.senderObj,msg:e.unsafe(),className:F,onClick:L,style:{width:c}},j):n.createElement("div",{className:F,onClick:L,style:{width:c+2*w}},j)}}function L(e){e.stopPropagation()}k.CONCERNS={msg:["id","ack","caption","isFailed","isPSA","isSentByMe","isGroupMsg","gifAttribution","senderObj"],mediaData:["aspectRatio","preview","duration","type","mediaStage","renderableUrl","fullWidth","fullHeight","size"]},k.displayName="Gif";var x=(0,M.default)(k,k.CONCERNS);t.default=x},90477:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=r(a(2784)),i=r(a(68084)),n=a(96645);function o({mediaStage:e,isFailed:t,mediaDataFileSize:a,shouldPlay:r,onClick:o}){switch(e){case n.MEDIA_DATA_STAGE.RESOLVED:return r?s.createElement(i.GifIcon,{onClick:o}):null;case n.MEDIA_DATA_STAGE.FETCHING:case n.MEDIA_DATA_STAGE.UPLOADING:return s.createElement(i.PendingCancel,null);case n.MEDIA_DATA_STAGE.NEED_POKE:return s.createElement(i.Download,{filesize:a});case n.MEDIA_DATA_STAGE.NEED_UPLOAD:case n.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return s.createElement(i.Upload,{filesize:a});case n.MEDIA_DATA_STAGE.SENDING:if(t)return null;break;default:return s.createElement(i.Pending,null)}return s.createElement(i.Pending,null)}o.displayName="GifState"},87162:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(43334)),l=s(a(79711)),d=s(a(91581)),u=a(95595),c=a(45880),h=s(a(24510)),f=s(a(98294)),p=a(13735),m=s(a(81524)),_=s(a(40207)),v=s(a(82631)),g=s(a(68384)),E=s(a(3111));function S(){var e=(0,i.default)(["wa:groupNotification:unknown message subtype: ",""]);return S=function(){return e},e}function C(){var e=(0,i.default)(["wa:groupNotification:unknown message subtype: ",""]);return C=function(){return e},e}class y extends n.PureComponent{stopEvent(e){e.stopPropagation(),e.preventDefault()}openInfoDrawer(){return e=>{this.stopEvent(e),l.default.chatInfoDrawer(this.props.msg.chat)}}_openGroupInviteLinkDrawer(){return e=>{this.stopEvent(e);var t=this.props.msg.chat,r=a(93171).default;l.default.openDrawerRight(n.createElement(r,{chat:t,groupMetadata:t.groupMetadata,onBack:()=>l.default.closeDrawerRight()}),"slide-left",this.props.uim)}}_openExpandedGroupDesc(){return e=>{this.stopEvent(e);var t=this.props.msg.chat;l.default.chatInfoDrawer(t,!0)}}openChat(e){return t=>{this.stopEvent(t),o.default.find(e).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)}))}))}}_openEphemeralSetting(){return e=>{this.stopEvent(e);var t=this.props.msg.chat;l.default.ephemeralDrawer(t)}}_getFormattedText(e){return n.createElement(d.default,{direction:"auto",text:e})}_getEphemeralDuration(){var e,t=null===(e=this.props.msg.templateParams)||void 0===e?void 0:e[0];return t&&parseInt(t,10)||0}isMe(e){return g.default.equals(e,(0,u.getMaybeMeUser)())}_renderGroupNotificationL10n(e,t,a,r){var s=t?(0,c.getFormattedName)(t,!this.props.clickable):null;switch(e){case"add":return this.isMe(t)?n.createElement(m.default,{id:1683}):n.createElement(m.default,{id:1682,params:{name:s}});case"remove":return this.isMe(t)?n.createElement(m.default,{id:1695}):n.createElement(m.default,{id:1694,params:{name:s}});case"leave":return this.isMe(t)?n.createElement(m.default,{id:1691}):n.createElement(m.default,{id:1690,params:{name:s}});case"picture":return"remove"===r?this.isMe(t)?n.createElement(m.default,{id:1811}):n.createElement(m.default,{id:1810,params:{name:s}}):this.isMe(t)?n.createElement(m.default,{id:1809}):n.createElement(m.default,{id:1808,params:{name:s}});case"subject":var i=this._getFormattedText(r);return this.isMe(t)?n.createElement(m.default,{id:1713,params:{subject:i}}):null!=s?n.createElement(m.default,{id:1711,params:{subject:i,name:s}}):n.createElement(m.default,{id:1712,params:{subject:i}});case"modify":if(this.isMe(t)){var o=(0,E.default)(r);return n.createElement(m.default,{id:1685,params:{new_number:o,name:s}})}return n.createElement(m.default,{id:1684,params:{name:s}});default:__LOG__(2)(C(),e)}}_renderGp2L10n(e,t,a,r,s,i){var o,l=t?(0,c.getFormattedName)(t,!this.props.clickable):null,d=s?s[0]:void 0,u=d?(0,c.getFormattedName)(d,!this.props.clickable):null,h=(0,c.getFormattedNames)(s,!this.props.clickable);switch(e){case"add":return t?this.isMe(t)?n.createElement(m.default,{id:1704,params:{participants:h}}):this.isMe(d)?null!=l?n.createElement(m.default,{id:1697,params:{name:l}}):n.createElement(m.default,{id:1701}):null!=l?n.createElement(m.default,{id:1696,params:{participants:h,name:l}}):n.createElement(m.default,{id:1700,params:{participants:h}}):this.isMe(d)?n.createElement(m.default,{id:1683}):n.createElement(m.default,{id:1682,params:{name:u}});case"remove":return t?g.default.equals(t,d)?n.createElement(m.default,{id:1695}):this.isMe(t)?n.createElement(m.default,{id:1705,params:{participants:h}}):this.isMe(d)?null!=l?n.createElement(m.default,{id:1699,params:{name:l}}):n.createElement(m.default,{id:1703}):null!=l?n.createElement(m.default,{id:1698,params:{participants:h,name:l}}):n.createElement(m.default,{id:1702,params:{participants:h}}):this.isMe(d)?n.createElement(m.default,{id:1695}):n.createElement(m.default,{id:1694,params:{name:u}});case"leave":return this.isMe(d)?n.createElement(m.default,{id:1691}):n.createElement(m.default,{id:1690,params:{name:h}});case"picture":return"remove"===r?this.isMe(t)?n.createElement(m.default,{id:1811}):n.createElement(m.default,{id:1810,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1809}):n.createElement(m.default,{id:1808,params:{name:l}});case"subject":var f=this._getFormattedText(r);return this.isMe(t)?n.createElement(m.default,{id:1713,params:{subject:f}}):null!=l?n.createElement(m.default,{id:1711,params:{name:l,subject:f}}):n.createElement(m.default,{id:1712,params:{subject:f}});case"modify":var _=(0,E.default)(t),v=(0,E.default)(d);return _===a?n.createElement(m.default,{id:1685,params:{name:a,new_number:v}}):n.createElement(m.default,{id:1684,params:{name:a}});case"create":if(this.isMe(t))return r?n.createElement(m.default,{id:1652,params:{subject:this._getFormattedText(r)}}):n.createElement(m.default,{id:1653});if(r)return null!=l?n.createElement(m.default,{id:1649,params:{subject:this._getFormattedText(r),name:l}}):n.createElement(m.default,{id:1651,params:{subject:this._getFormattedText(r)}});if(null!=l){var C=i.title();return""===C.trim()?n.createElement(m.default,{id:1650,params:{name:l}}):n.createElement(m.default,{id:1649,params:{name:l,subject:C}})}return n.createElement(m.default,{id:1648});case"delete":return i.isSupportGroup()?n.createElement(m.default,{id:1370}):n.createElement(m.default,{id:1668});case"promote":var y=s.length;return 1===y&&this.isMe(d)?n.createElement(m.default,{id:1693}):n.createElement(m.default,{id:1692,params:{count:y,participants:h},plural:y});case"demote":var b=s.length;return 1===b&&this.isMe(d)?n.createElement(m.default,{id:1687}):n.createElement(m.default,{id:1686,params:{count:b,participants:h},plural:b});case"invite":return this.isMe(d)?n.createElement(m.default,{id:1689}):n.createElement(m.default,{id:1688,params:{name:u}});case"revoke_invite":return this.isMe(t)?n.createElement(m.default,{id:1677}):n.createElement(m.default,{id:1676,params:{name:l}});case"description":return this.isMe(t)?n.createElement(m.default,{id:1666}):null!=l?n.createElement(m.default,{id:1662,params:{name:l}}):n.createElement(m.default,{id:1664});case"announce":return"on"===r?this.isMe(t)?n.createElement(m.default,{id:1647}):n.createElement(m.default,{id:1646,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1645}):n.createElement(m.default,{id:1644,params:{name:l}});case"restrict":return"on"===r?this.isMe(t)?n.createElement(m.default,{id:1709}):n.createElement(m.default,{id:1708,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1707}):n.createElement(m.default,{id:1706,params:{name:l}});case"no_frequently_forwarded":return"on"===r?this.isMe(t)?n.createElement(m.default,{id:1681}):n.createElement(m.default,{id:1680,params:{name:l}}):this.isMe(t)?n.createElement(m.default,{id:1679}):n.createElement(m.default,{id:1678,params:{name:l}});case"announce_msg_bounce":return n.createElement(m.default,{id:1643});case"v4_add_invite_sent":return n.createElement(m.default,{id:1441,params:{participants:h,count:s.length}});case"v4_add_invite_join":return n.createElement(m.default,{id:1440,params:{participants:h,count:s.length}});case"ephemeral":var T=null===(o=i.groupMetadata)||void 0===o?void 0:o.canSetEphemeralSetting(),M=this._getEphemeralDuration();return t?this.isMe(t)?T?n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByYouAsAdmin,numSeconds:M}):n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByYou,numSeconds:M}):T?n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByOthersAsAdmin,numSeconds:M,name:l}):n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByOthers,numSeconds:M,name:l}):T?n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByUnknownAsAdmin,numSeconds:M}):n.createElement(p.EphemeralL10n,{type:p.EphemeralStringType.SettingChangeByUnknown,numSeconds:M});default:__LOG__(2)(S(),e)}}_renderIcon(e,t){if("gp2"===e){if("announce"===t)return n.createElement("div",{className:h.default.icon},n.createElement(v.default,{name:"megaphone"}));if("ephemeral"===t&&this.props.clickable)return n.createElement("div",{className:h.default.icon},n.createElement(v.default,{name:"disappearing"}))}}_getClickHandler(e,t){var a;if(this.props.clickable)switch(t){case"picture":case"subject":return this.openInfoDrawer();case"revoke_invite":return this._openGroupInviteLinkDrawer();case"description":return this._openExpandedGroupDesc();case"ephemeral":var{chat:r}=this.props.msg;if(null===(a=r.groupMetadata)||void 0===a?void 0:a.canSetEphemeralSetting())return this._openEphemeralSetting()}}render(){var{msg:e}=this.props,{type:t,subtype:a,author:r,body:s,recipients:i,chat:o,templateParams:l}=e,d=e.displayName();if("group_notification"!==t&&"gp2"!==t)return null;var u="gp2"===t?this._renderGp2L10n(a,r,d,s,i,o,l):this._renderGroupNotificationL10n(a,r,d,s);if(!u)return null;var c=this._getClickHandler(t,a);return n.createElement("div",{role:c?"button":void 0,className:h.default.notification,onClick:c},this._renderIcon(t,a),u)}}y.CONCERNS={msg:["type","subtype","author","body","recipients","chat","templateParams"],groupMetadata:["support"]},y.displayName="GroupNotification";var b=(0,f.default)((0,_.default)(y,y.CONCERNS));t.default=b},1512:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(5497),n=s(a(2784)),o=r(a(43334)),l=r(a(79711)),d=r(a(55236)),u=s(a(71201)),c=r(a(3837)),h=r(a(17957)),f=r(a(20642)),p=r(a(19773)),m=a(97526),_=a(64658),v=r(a(38906)),g=r(a(17693)),E=r(a(63498)),S=r(a(74824)),C=a(24996);class y extends n.Component{constructor(...e){super(...e),this.addRevokeListener=()=>{this.props.listeners.add(this.props.msg,"change:asRevoked",this.handleRevoke)},this.handleRevoke=()=>{l.default.refreshMessages()},this.state={contextMenu:null,hover:!1},this.setRefContext=e=>this.refContext=e,this.mouseOver=e=>{e.buttons||this.state.hover||this.setState({hover:!0})},this.mouseDown=()=>{this.state.hover&&this.setState({hover:!1})},this.openContextMenu=()=>{this.onMenu(void 0,!0)},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this._onOpenInfoDrawer=()=>{l.default.msgInfoDrawer((0,_.unproxy)(this.props.msg.unsafe()))},this.onReplyMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe()),t=e.chat;t.composeQuotedMsg=e,l.default.focusChatTextInput(t)},this.onPrivateReplyMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe());o.default.find(e.sender).then((e=>(0,i.promiseProps)({ok:l.default.openChatBottom(e),chat:e}))).then((({ok:t,chat:a})=>{t&&(a.composeQuotedMsg=e,this.props.msg&&this.props.msg.chat&&(a.composeQuotedMsgRemoteJid=this.props.msg.chat.id))}))},this.onStarMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe());l.default.sendStarMsgs(e.chat,[e])},this.onUnstarMessage=()=>{var e=(0,_.unproxy)(this.props.msg.unsafe());l.default.sendUnstarMsgs(e.chat,[e])},this.onDeleteMessage=()=>{var{msg:e,isMsgVisible:t}=this.props;l.default.openModal(n.createElement(d.default,{chat:e.chat,msgList:[(0,_.unproxy)(e.unsafe())],deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))},this.openContactChat=()=>{o.default.find(this.props.msg.author).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)}))}))},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var a=t?this._getMenuRefContext():e,r=(0,_.unproxy)(this.props.msg),s=[];r.isSentByMe&&!r.asRevoked&&s.push(n.createElement(u.default,{key:"info",a8n:"mi-msg-info",action:this._onOpenInfoDrawer},h.default.t(988))),r.canReply()&&s.push(n.createElement(u.default,{key:"reply",a8n:"mi-msg-reply",action:this.onReplyMessage},h.default.t(1232))),(r.canPrivateReply()||r.canPrivateReplyInRestrictedGrp())&&s.push(n.createElement(u.default,{key:"private_reply",a8n:"mi-msg-reply",action:this.onPrivateReplyMessage},h.default.t(1184))),r.canForward()&&s.push(n.createElement(u.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.props.onOpenForwardFlow(!0,r.unsafe())}},h.default.t(712))),r.canStar()&&(r.star?s.push(n.createElement(u.default,{key:"star",a8n:"mi-msg-unstar",action:this.onUnstarMessage},h.default.t(1418))):s.push(n.createElement(u.default,{key:"star",a8n:"mi-msg-star",action:this.onStarMessage},h.default.t(1340)))),s.push(n.createElement(u.default,{key:"delete",a8n:"mi-msg-delete",action:this.onDeleteMessage},h.default.t(569))),r.isGroupMsg&&r.author&&!r.isSentByMe&&s.push(n.createElement(u.default,{key:"author",a8n:"mi-msg-author",action:this.openContactChat},h.default.t(984,{author:r.displayName()}))),this.setState({contextMenu:{menu:s,anchor:a,theme:u.ThemeOptions.COMPACT}})}}}componentDidMount(){this.addRevokeListener()}componentDidUpdate(e){this.props.msg.id.equals(e.msg.id)||(this.props.listeners.remove(e.msg,"change:asRevoked",this.handleRevoke),this.addRevokeListener())}scrollMsg(e,t){this.props.scrollMsg(e,t)}highlight(e){this.props.highlight(e)}render(){var e,t,a,{msg:r,menuTransition:s}=this.props;return(this.state.hover||this.state.contextMenu)&&(e=n.createElement(p.default,{msg:r.unsafe(),position:m.MsgPosition.SINGLE,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)},isGroupedSticker:!0})),this.props.isFocused&&(t=n.createElement(C.WhileFocusedListener,{parent:this})),this.state.contextMenu&&(a=n.createElement(g.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},n.createElement(E.default,{contextMenu:this.state.contextMenu}))),n.createElement("div",{className:c.default.stickerItem,onMouseOver:this.mouseOver,onMouseDown:this.mouseDown,onMouseUp:this.mouseOver,onMouseLeave:this.mouseDown},n.createElement(v.default,{mediaData:r.mediaData,msg:r,forwardRef:this.props.forwardRef,animateOnView:!0}),n.createElement("div",{className:c.default.stickerMenu},n.createElement(S.default,{transitionName:s},e)),a,t)}}y.displayName="GroupedSticker";var b=(0,f.default)(y);t.default=b},44641:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(a(2784)),n=r(a(21403)),o=r(a(91276));function l(e){return i.createElement("div",{className:o.default.outerContainer,onClick:e.onClick},i.createElement("div",{className:o.default.innerContainer},i.createElement(n.default,{onChange:e.onClick,checked:e.checked})))}l.displayName="GroupedStickerCheckbox"},47687:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(20458)),l=s(a(92969)),d=s(a(12708)),u=s(a(79711)),c=s(a(18120)),h=s(a(56823)),f=s(a(7341)),p=s(a(39822)),m=s(a(17957)),_=s(a(20227)),v=s(a(71726)),g=s(a(81031)),E=s(a(20299)),S=s(a(40207)),C=a(64658),y=s(a(20385));class b extends n.PureComponent{constructor(...e){super(...e),this._onOpenInvite=()=>{var{msg:e}=this.props;u.default.openModal(n.createElement(h.default,{msg:e}))}}render(){var{msg:e,displayAuthor:t}=this.props,a=e.isGroupsV4InviteExpired,r=e.inviteGrpName;if(!c.default.supportsFeature(c.default.F.GROUPS_V_4_JOIN_PERMISSION))return n.createElement(p.default,{msg:(0,C.unproxy)(e),displayAuthor:t});var s,u=n.createElement(g.default,{size:49,thumb:this.props.msg.inviteGrpJpegThum}),h=e.comment?n.createElement("div",{className:f.default.caption},n.createElement(d.default,{msg:e.unsafe(),spacer:!0,trusted:e.isTrusted()})):null,S=a?null:n.createElement(o.default,{items:[{label:this.props.msg.isSentByMe?m.default.t(798):m.default.t(763),onClick:this._onOpenInvite}],theme:e.comment?void 0:"no-divider"}),b=!a||!h,T=b?n.createElement("div",{className:f.default.meta},n.createElement(v.default,{msg:e})):null,M=e.comment?m.default.t(796):n.createElement(E.default,{msg:e.unsafe()},m.default.t(796));if(a){var N=h?m.default.t(793):n.createElement(E.default,{msg:e.unsafe()},m.default.t(793));s=n.createElement("div",{className:f.default.status},N)}return n.createElement(y.default,{msg:e,displayAuthor:t,hideMeta:b},n.createElement(l.default,{contact:e.senderObj,msg:e.unsafe(),className:(0,i.default)(f.default.container,{[f.default.expired]:a,[f.default.noCaption]:!h})},n.createElement("div",{className:f.default.linkPreview},n.createElement(_.default,{description:M,invite:!0,isSentByMe:e.isSentByMe,onClick:a?void 0:this._onOpenInvite,thumbnail:u,title:r,theme:a?"extended":void 0})),s,h,T),S)}}b.CONCERNS={msg:["id","inviteCode","inviteCodeExp","inviteGrp","inviteGrpName","inviteGrpJpegThum","senderObj","comment","isSentByMe","isGroupMsg","isPSA","isGroupsV4InviteExpired"]},b.displayName="GroupsV4InviteMsg";var T=(0,S.default)(b,b.CONCERNS);t.default=T},39822:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(2784)),n=r(a(17957)),o=r(a(90277)),l=r(a(20385));function d({msg:e,displayAuthor:t}){return i.createElement(l.default,{msg:e,displayAuthor:t},i.createElement(o.default,{iconName:"unknown",msg:e.unsafe()},n.default.t(490)))}d.displayName="GroupsV4InviteMsgPlaceholder"},21406:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZE=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(56117)),d=s(a(44977)),u=s(a(12396)),c=a(27703),h=s(a(53632)),f=s(a(3564)),p=s(a(20642)),m=a(66615),{getGlyphId:_,getGlyphPath:v,markGlyphCached:g,isGlyphCached:E}=u.default,S=c.LARGE_EMOJI_SIZE;t.SIZE=S;var C="large",y="xlarge";class b extends n.Component{constructor(e){super(e),this._onHighResLoaded=()=>{var e=_(this.props.emoji);null!=e&&g(e),this.setState({highResLoaded:!0})};var t=_(e.emoji),a=Boolean(null!=t&&E(t));this.state={highResLoaded:a}}componentDidMount(){this.props.listeners.add(window,"dpichange",(()=>{var e=_(this.props.emoji),t=Boolean(null!=e&&E(e));this.setState({highResLoaded:t})}))}render(){var{emoji:e,size:t,animation:a,element:r,selectable:s}=this.props,{highResLoaded:u}=this.state,c=_(e);if(null==c)return null;var p,g=(0,i.default)({[f.default.medium]:t===S.MEDIUM,[f.default.large]:t===S.LARGE,[f.default.xlarge]:t===S.XLARGE});p=t===S.XLARGE?y:C;var E=v(c,p)[l.default.currentRes];if(u&&a)return n.createElement(r,{className:f.default.animation},n.createElement(m.SelectableImg,{alt:e,className:(0,i.default)(f.default.highRes,g),draggable:!1,plainText:e,selectable:Boolean(s),src:o.default.ONE_BY_ONE_TRANS_GIF}),n.createElement(h.default,{className:(0,i.default)(f.default.highRes,g,f.default.heartbeat),draggable:!1,selectable:!1,src:E}));var b=u?void 0:n.createElement(d.default,{key:"low-res",className:(0,i.default)(f.default.lowRes,g),emoji:e,selectable:s}),T=n.createElement(d.default,{key:"high-res",className:(0,i.default)(f.default.highRes,g,{[f.default.invisible]:!u}),emoji:e,selectable:s,src:E,onLoad:this._onHighResLoaded});return n.createElement("span",{className:f.default.wrapper},b,T)}}b.defaultProps={animation:!1,element:"div",size:S.MEDIUM},b.displayName="LargeEmoji";var T=(0,p.default)(b);t.default=T},9389:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(71718)),n=r(a(2784)),o=s(a(79711)),l=(s(a(50935)),a(35387)),d=s(a(20227)),u=s(a(40207)),c=s(a(82338)),h=s(a(74185));class f extends n.PureComponent{constructor(...e){super(...e),this.onLinkClick=()=>{var e=this.props.msg.matchedText;(0,l.openExternalLink)(e)},this._onSuspiciousLinkClick=e=>{o.default.openModal(n.createElement(c.default,{link:e}))}}render(){var{msg:e,displayType:t,invite:a}=this.props,r=null;if(!a){r=h.default.hostname(e.canonicalUrl||e.matchedText);try{r=i.default.toUnicode(r)}catch(e){}}var s,o,l,u=e.getSuspiciousLinks().filter((({url:t})=>e.matchedText===t));return u.length?l=()=>this._onSuspiciousLinkClick(u[0]):(s=e.description,o=e.thumbnail,l=this.onLinkClick),n.createElement(d.default,{canonicalUrl:r,description:s,displayType:t,invite:a,onClick:l,isSentByMe:e.isSentByMe,thumbnailJpeg:o,title:e.title,star:e.star})}}f.CONCERNS={msg:["thumbnail","title","description","canonicalUrl","matchedText","isSentByMe","star"]},f.displayName="LinkPreviewContainer";var p=(0,u.default)(f,f.CONCERNS);t.default=p},86292:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{displayAuthor:t,msg:a}=e,r=a.list;if(!r)return null;var s={selectable:!0,dirMismatch:a.rtl!==c.default.isRTL(),direction:a.dir,inferLinesDirection:!0},_=(0,l.Conversation)({mentions:a.mentionMap(),links:a.getLinks(),selectable:!0,trusted:a.isTrusted()}),y=(0,l.Conversation)({links:a.getFooterLinks(),selectable:!0,trusted:a.isTrusted()}),b=n.createElement(u.default,(0,i.default)({},s,{className:h.default.title,text:r.title,ellipsify:!0})),T=n.createElement(u.default,(0,i.default)({},s,{text:r.description,formatters:_})),M=n.createElement(u.default,(0,i.default)({},s,{className:h.default.footer,text:a.footer,formatters:y})),N=n.createElement("div",{className:h.default.meta},n.createElement(m.default,{msg:a})),I=function(e){var{listType:t}=e;if(t===d.ListMessageListType.PRODUCT_LIST)return c.default.t(1197);return e.buttonText}(r),P=n.createElement("div",{className:h.default.actionContainer,onClick:e=>{e&&e.stopPropagation(),function(e){var{list:{listType:t}}=e;if(null==t)return;switch(t){case d.ListMessageListType.SINGLE_SELECT:o.default.openModal(n.createElement(f.default,{msg:e}));break;case d.ListMessageListType.PRODUCT_LIST:!function(e){var t=C.toString(),a=e.isForwarded?e.businessOwnerJid:e.from.toString({legacy:!0});if(null==e.list.productListInfo||null==a)return;var r=g.default.getOrAdd(e.id,e.list.productListInfo,a);null!=r&&o.default.openDrawerRight(n.createElement(v.default,{chat:e.chat,catalogOwnerJid:a,productListId:r.id,sessionId:t}),"slide-left")}(e)}}(a)},role:"button"},n.createElement("div",{className:h.default.action,title:I},function(e){var{listType:t}=e;if(t===d.ListMessageListType.PRODUCT_LIST)return null;return n.createElement(E.default,{name:"list-msg-icon",className:h.default.icon})}(r),I));return n.createElement("div",{className:h.default.bubble},n.createElement(S.default,{msg:a,displayAuthor:t,hideMeta:!0},b,n.createElement(p.default,{msg:a.unsafe(),"data-id":a.id},T,a.footer?M:null,N),P))};var i=s(a(58527)),n=r(a(2784)),o=s(a(79711)),l=a(18164),d=a(28703),u=s(a(91581)),c=s(a(17957)),h=s(a(33545)),f=s(a(88798)),p=s(a(97816)),m=s(a(71726)),_=s(a(55043)),v=s(a(13531)),g=s(a(90567)),E=s(a(82631)),S=s(a(20385)),C=new _.default},18541:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MSG_HEIGHT=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(71874)),l=s(a(92969)),d=s(a(12708)),u=s(a(19899)),c=s(a(79711)),h=s(a(46478)),f=s(a(18120)),p=s(a(17957)),m=s(a(20642)),_=s(a(59354)),v=s(a(86635)),g=s(a(10979)),E=s(a(43562)),S=s(a(71726)),C=a(57052),y=s(a(40207)),b=s(a(82631));t.MSG_HEIGHT=220;class T extends n.Component{constructor(e){super(e),this._openLiveLocationDrawer=()=>{var{chat:e,sender:t}=this.props.msg;c.default.liveLocationDrawer(e,t)},this._openExpiredLocationDrawer=()=>{c.default.expiredLocationDrawer(this.props.msg.unsafe())},this._stopSharing=()=>{var{chat:e}=this.props.msg;c.default.openModal(n.createElement(g.default,{chat:e}))},this._onMapLoad=()=>{this.setState({mapLoaded:!0})},this.state={mapLoaded:!1}}_getExpiration(){var{msg:{t:e,shareDuration:t}}=this.props;return null==t?e:e+t}isExpired(){return u.default.globalUnixTime()>=this._getExpiration()}render(){var{msg:e,trusted:t,displayAuthor:a,quotedMsg:r}=this.props;if(f.default.supportsFeature(f.default.F.LIVE_LOCATIONS)){var s=a&&!e.isSentByMe&&e.isGroupMsg?n.createElement("div",{className:_.default.author},n.createElement(o.default,{msg:e,contact:e.senderObj})):null,c=r?n.createElement("div",{className:_.default.quote},r):null,m=this.isExpired(),g=m&&void 0!==e.finalLat&&void 0!==e.finalLng,y=e.lat,T=e.lng,M=m?void 0:this._openLiveLocationDrawer;f.default.supportsFeature(f.default.F.LIVE_LOCATIONS_FINAL)&&(M||(M=this._openExpiredLocationDrawer),g&&(y=e.finalLat,T=e.finalLng));var N,I,P,A,O=n.createElement("div",{className:_.default.thumb,onClick:M,style:{height:150}},n.createElement("div",{className:_.default.map},n.createElement(E.default,{lat:y,lng:T,width:270,height:150,className:_.default.thumbBody,linkify:!1,showMarker:!1,onLoad:this._onMapLoad})),n.createElement("div",{className:(0,i.default)(_.default.avatar,{[_.default.hidden]:!this.state.mapLoaded})},n.createElement(h.default,{id:e.sender,size:40,border:!0})),n.createElement("div",{className:_.default.overlay})),D=this._getExpiration(),w=m?p.default.t(883):p.default.t(889,{time:u.default.timestampStr(D),_plural:u.default.timestampHour(D)}),R=n.createElement("div",{className:_.default.status,onClick:M},n.createElement("span",{className:_.default.statusIcon},n.createElement(b.default,{name:(0,C.liveLocationIcon)(!m),display:"inline"})),n.createElement("span",{className:_.default.statusText},w)),k=e.comment?n.createElement("div",{className:_.default.caption},n.createElement(d.default,{msg:e.unsafe(),trusted:t})):null,L=n.createElement("div",{className:_.default.meta},n.createElement(S.default,{msg:e}));if(!m)e.isSentByMe?(I=this._stopSharing,P=_.default.stopLocation,A=p.default.t(906)):(I=this._openLiveLocationDrawer,P=_.default.viewLocation,A=p.default.t(913)),N=n.createElement("div",{className:_.default.actionButton,onClick:I},n.createElement("span",{className:P},A));return n.createElement("div",{className:(0,i.default)({[_.default.expired]:m,[_.default.hasCaption]:!!e.comment})},n.createElement(l.default,{className:(0,i.default)(_.default.container,{[_.default.clickable]:!!M}),contact:e.senderObj,msg:e.unsafe()},s,c,O,R,k,L),N)}return n.createElement(v.default,{msg:e,displayAuthor:a,quotedMsg:r})}}T.CONCERNS={msg:["chat","comment","dir","finalLat","finalLng","isGroupMsg","isPSA","isSentByMe","lat","lng","rtl","sender","senderObj","shareDuration","t"]},T.displayName="LiveLocation";var M=(0,m.default)((0,y.default)(T,T.CONCERNS));t.default=M},86635:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(18164),l=s(a(91581)),d=s(a(17957)),u=s(a(39002)),c=s(a(97816)),h=s(a(90277)),f=a(62761),p=a(57052),m=s(a(20385));class _ extends n.Component{render(){var e,t=this.props.msg,a=(0,o.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),selectable:!0,trusted:t.isTrusted()}),r=t.comment?n.createElement(c.default,{msg:t.unsafe()},n.createElement(l.default,{text:t.comment,formatters:a,selectable:!0,dirMismatch:t.rtl!==d.default.isRTL(),direction:t.dir})):null;if(this.props.quotedMsg){var s=(0,i.default)(u.default.quote,{[u.default.hasAuthor]:this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg,[u.default.forwarded]:(0,f.showForwarded)(t)});e=n.createElement("div",{className:s},this.props.quotedMsg)}return n.createElement(m.default,{msg:t,displayAuthor:this.props.displayAuthor},e,n.createElement("div",{className:r?u.default.hasText:u.default.noText},n.createElement(h.default,{hasCaption:!!r,iconName:(0,p.liveLocationIcon)(!1),msg:this.props.msg.unsafe(),theme:"small-icon"},d.default.t(491))),r)}}t.default=_,_.displayName="LiveLocation"},33788:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PREVIEW_HEIGHT=void 0;var i=s(a(19976)),n=s(a(45455)),o=s(a(72779)),l=r(a(2784)),d=s(a(71874)),u=s(a(92969)),c=s(a(12708)),h=s(a(131)),f=s(a(4336)),p=s(a(25085)),m=s(a(43562)),_=a(65935),v=s(a(97816)),g=s(a(71726)),E=a(62761),S=a(66615),C=s(a(40207)),y=s(a(20783)),b=s(a(900)),T=s(a(74185));function M(){var e=(0,i.default)(["Bad url: ",""]);return M=function(){return e},e}t.PREVIEW_HEIGHT=150;var N=["foursquare.com","facebook.com","maps.google.com"];class I extends l.PureComponent{constructor(e){super(e),this.loc=()=>{var e=this.props.msg.get("loc");if(e)return 2===(e=e.split("\n")).length?{name:e[0],addr:e[1]}:{name:e}},this._getLocationDetails=e=>{var t,a,r,{msg:s}=this.props,i=this.loc(),d=s.clientUrl||e,u=T.default.hostname(d),c=(0,n.default)(N.filter((e=>u.includes(e)))),h=c?l.createElement("span",{className:p.default.link},u):null,f=T.default.isHttps(d);if(!f)return d.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)(M(),d),SEND_LOGS("URL error")),null;if(!c&&f&&i&&!d.includes("javascript")){t=i.name?l.createElement(S.SelectableLink,{className:p.default.title,dir:"auto",href:d,plainText:"".concat(i.name,"\n").concat(d),selectable:!0,target:"_blank",title:i.name},i.name):null;var m=(0,o.default)(p.default.address,{[p.default.hasURL]:h});a=i.addr?l.createElement(S.SelectableDiv,{className:m,selectable:!0,title:i.addr},i.addr):null}return(t||a||h)&&(r=l.createElement("div",{className:p.default.text},l.createElement(v.default,{msg:s.unsafe(),"data-id":s.id},t,a,h))),r},this.onClick=e=>{e.stopPropagation()}}render(){var e,t,a=this.props.msg,{lat:r,lng:s}=a,i=this.loc(),n=i&&i.name,v=(0,_.getMapUrl)(r,s,n),C=a.isDynamicReplyButtonsMsg?null:this._getLocationDetails(v),T=null!=C||a.supportsMessageFooter&&a.hasBodyOrFooter?null:l.createElement(b.default,null),M=this.props.displayAuthor&&!a.isSentByMe&&a.isGroupMsg,N=(0,E.showForwarded)(a),I=M?l.createElement("div",{className:p.default.author},l.createElement(d.default,{msg:a,contact:a.senderObj})):null,P=N?l.createElement(f.default,{msg:a.unsafe(),className:p.default.forwardedIndicator}):null,A=(0,o.default)(p.default.container,{[p.default.hasCaption]:C,[p.default.hasAuthor]:M,[p.default.forwarded]:N,[p.default.ctwaContainerWidth]:null!=a.ctwaContext}),O=this.props.quotedMsg?l.createElement("div",{className:p.default.quote},this.props.quotedMsg):null;return a.supportsMessageFooter&&(e=a.caption?l.createElement("div",{className:p.default.caption},l.createElement(c.default,{msg:a.unsafe(),spacer:!a.footer,trusted:this.props.trusted})):null,t=l.createElement(y.default,{dir:a.dir,footer:a.footer,isShown:a.supportsMessageFooter,msg:a.unsafe(),rtl:a.rtl,type:a.type,trusted:this.props.trusted})),l.createElement("div",null,l.createElement(u.default,{className:A,contact:a.senderObj,msg:a.unsafe()},I,P,O,l.createElement(h.default,{msg:a.unsafe(),wrapperClass:p.default.ctwaContext}),l.createElement(S.SelectableDiv,{className:p.default.thumb,onClick:this.onClick,plainText:v,selectable:!0,style:{height:150}},l.createElement(m.default,{lat:a.lat,lng:a.lng,width:a.ctwaContext?330:270,height:150,name:n,className:p.default.thumbBody}),T),C,e,t,l.createElement("div",{className:p.default.meta},l.createElement(g.default,{msg:a}))))}}I.CONCERNS={msg:["caption","clientUrl","dir","footer","id","isGroupMsg","isSentByMe","lat","lng","rtl","senderObj","type","ctwaContext","supportsMessageFooter","isDynamicReplyButtonsMsg","hasBodyOrFooter"]},I.displayName="Location";var P=(0,C.default)(I,I.CONCERNS);t.default=P},67212:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=s(a(72779)),n=r(a(2784)),o=s(a(71874)),l=s(a(50935)),d=s(a(4336)),u=s(a(6982)),c=s(a(71726)),h=a(62761);function f(e){var t=!1!==e.displayAuthor?!e.msg.isSentByMe&&e.msg.isGroupMsg:null,a=(0,h.showForwarded)(e.msg),r=t?n.createElement("div",{className:u.default.author},n.createElement(o.default,{msg:e.msg,contact:e.msg.senderObj})):null,s=e.displayType===l.default.DISP_TYPE.GALLERY||e.hideMeta?null:n.createElement("div",{className:u.default.meta},n.createElement(c.default,{msg:e.msg})),f=a?n.createElement(d.default,{msg:e.msg.unsafe(),className:u.default.forwardedIndicator}):null,p=e.quotedMsg?n.createElement("div",{className:u.default.quote},e.quotedMsg):null,m=(0,i.default)(u.default.bubble,{[u.default.forwarded]:a,[u.default.hasAuthor]:t,[u.default.hasCaption]:e.hasCaption,[u.default.isPSA]:e.msg.isPSA});return n.createElement("div",{className:m},r,f,p,e.children,s)}f.displayName="MediaBubble"},21644:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.isMediaTypeWithImage=u,t.default=void 0;var i=s(a(2784)),n=r(a(50935)),o=r(a(48726)),l=r(a(19125)),d=r(a(40207));function u(e){return e===n.default.MSG_TYPE.IMAGE||e===n.default.MSG_TYPE.PRODUCT}class c extends i.PureComponent{constructor(...e){super(...e),this._renderImage=(e,t)=>i.createElement("div",{className:o.default.preview,key:t||null,style:{backgroundImage:"url(".concat(e,")")}}),this._renderPreview=()=>{var e,t,a,r,{mediaData:s}=this.props,i=[],n=null===(e=s.preview)||void 0===e||null===(t=e.url)||void 0===t?void 0:t.call(e);n&&i.push(this._renderImage(n,"preview"));var o=null===(a=s.fullPreviewData)||void 0===a||null===(r=a.url)||void 0===r?void 0:r.call(a);return o&&i.push(this._renderImage(o,"fullPreview")),i.length?i:null}}render(){var{mediaData:e}=this.props;return u(e.type)?i.createElement(l.default,{key:e.filehash,mediaData:e,placeholderRenderer:this._renderPreview,renderProgressively:!0},this._renderImage):this._renderPreview()}}c.CONCERNS={mediaData:["filehash","fullPreviewData","mediaStage","preview","type"]},c.displayName="MediaMsgPreview";var h=(0,d.default)(c,c.CONCERNS);t.default=h},19773:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(23109)),d=s(a(50935)),u=a(12023),c=s(a(17957)),h=s(a(66676)),f=a(62761),p=s(a(40207)),m=s(a(82631)),_=s(a(2220)),v=a(89526),g=a(80084),E="FRONT",S="SINGLE";class C extends n.PureComponent{constructor(...e){super(...e),this.setRefContext=e=>this.refContext=e,this.handleClick=e=>{this.props.onToggle(e.target)},this.handleMouseDown=e=>{e.stopPropagation()}}render(){var{msg:e,position:t,isGroupedSticker:a}=this.props,{isSentByMe:r,isGroupMsg:s,type:p}=e,_=!!e.quotedMsg,C=!e.quotedMsg&&e.quotedRemoteJid,y=(0,f.showForwarded)(e),b=C?null:r?h.default.contextOut:h.default.contextIn,T=p===d.default.MSG_TYPE.DOCUMENT&&!e.body,M=p===d.default.MSG_TYPE.DOCUMENT&&e.body,N=p===d.default.MSG_TYPE.LOCATION,I=e.linkPreview&&(0,u.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline),P=M||N||_||p===d.default.MSG_TYPE.PAYMENT||I||p===d.default.MSG_TYPE.PRODUCT||e.ctwaContext||e.isMedia&&!e.isViewOnce&&p!==d.default.MSG_TYPE.AUDIO||e.isViewOnce&&!r&&(0,v.isUnviewed)(e.safe()),A=!1;s&&(A=!r&&(t===E||t===S||_||P||e.linkPreview));var O,D,w=e.getSuspiciousLinks().length>0,R=P&&!A&&!w&&!y,k=p===d.default.MSG_TYPE.CHAT&&e.linkPreview&&!I&&!A&&!y&&!w&&e.isTrusted(),L=(0,i.default)(R?h.default.contextIconMedia:h.default.contextIcon),x=p===d.default.MSG_TYPE.PTT||p===d.default.MSG_TYPE.AUDIO,F=e.type===d.default.MSG_TYPE.MULTI_VCARD&&!_&&!A&&!y,B=p===d.default.MSG_TYPE.GROUPS_V4_INVITE,G=p===d.default.MSG_TYPE.ORDER,U=(k||T||B||G)&&!A&&!y&&!_,j=p===d.default.MSG_TYPE.STICKER&&!e.ctwaContext&&!_&&(a||!e.isGroupMsg||e.isGroupMsg&&e.isSentByMe);if(j){var V=l.default.get("defaultPreference"),H=V?V.wallpaperColor:d.default.DEFAULT_CHAT_WALLPAPER;D=n.createElement("div",{className:h.default.badge,style:{backgroundColor:H,opacity:.9}}),O=(0,g.invertTransparentWallpaperColors)(this.context.theme,H)}var W=!(p!==d.default.MSG_TYPE.CHAT||_||A||y||I||!e.dir||e.rtl===c.default.isRTL()),Y=(p===d.default.MSG_TYPE.PTT||p===d.default.MSG_TYPE.AUDIO)&&c.default.isRTL()&&!A,K=(0,i.default)(b,R?c.default.isRTL()?h.default.contextMediaRtl:h.default.contextMediaLtr:null,{[h.default.context]:!(R||k)||U,[h.default.contextMedia]:R,[h.default.contextPtt]:x,[h.default.contextPttFix]:x&&!_&&!A,[h.default.contextSpecial]:U,[h.default.contextDoc]:T&&!A&&!y&&!_,[h.default.contextMediaDocument]:M,[h.default.contextMultiVcard]:F,[h.default.contextInverse]:W||Y,[h.default.contextStickerAuthor]:p===d.default.MSG_TYPE.STICKER&&!j,[h.default.contextStickerTransparent]:j,[h.default.contextStickerInverse]:j&&O});return n.createElement("div",{className:K},n.createElement("div",{"data-a8n":o.default.key("icon-down-context"),"data-js-context-icon":!0,className:L,ref:this.setRefContext,onMouseDown:this.handleMouseDown,onClick:this.handleClick},n.createElement(m.default,{name:"down-context"})),D)}}C.contextType=_.default,C.CONCERNS={msg:["linkPreview","matchedText","dir","rtl","isMedia","isSentByMe","isGroupMsg","isViewOnce","type","quotedMsg","body","quotedRemoteJid","richPreviewType","doNotPlayInline","ctwaContext"]},C.displayName="Menu";var y=(0,p.default)(C,C.CONCERNS);t.default=y},13077:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(71874)),l=s(a(12708)),d=s(a(50935)),u=s(a(4336)),c=s(a(55168)),h=s(a(71726)),f=a(62761),p=s(a(20783)),m=s(a(47609));var _=function({children:e,displayType:t,hideCaption:a=!1,msg:r,quotedMsg:s,showAuthor:_=!1,trusted:v}){var{caption:g,dir:E,footer:S,isSentByMe:C,isGroupMsg:y,rtl:b,senderObj:T,supportsMessageFooter:M,type:N}=(0,m.default)(r,["caption","dir","footer","isFromTemplate","isSentByMe","isGroupMsg","rtl","senderObj","supportsMessageFooter","type"]),I=_&&!C&&y,P=!a&&g,A=(0,f.showForwarded)(r);return n.createElement(n.Fragment,null,I?n.createElement("div",{className:(0,i.default)(c.default.author,{[c.default.hasForwarded]:A})},n.createElement(o.default,{msg:r,contact:T})):null,A?n.createElement(u.default,{msg:r.unsafe(),className:(0,i.default)(c.default.forwardedIndicator,{[c.default.hasAuthor]:I})}):null,null!=s?n.createElement("div",{className:c.default.quote},s):null,e,P?n.createElement("div",{className:c.default.caption},n.createElement(l.default,{msg:r.unsafe(),trusted:v,spacer:!S})):null,M?n.createElement(p.default,{dir:E,footer:S,isShown:M,msg:r.unsafe(),rtl:b,type:N,trusted:v}):null,n.createElement("div",{className:(0,i.default)(c.default.meta,{[c.default.hasCaption]:P})},n.createElement(h.default,{msg:r,theme:t===d.default.DISP_TYPE.GALLERY?"date":void 0})))};t.default=_},97526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgPosition=void 0;t.MsgPosition={FRONT:"FRONT",MID:"MID",END:"END",SINGLE:"SINGLE"}},97816:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,{broadcast:a,isFromTemplate:r,isSentByMe:s,labels:c,star:h,type:f}=(0,u.default)(e.msg,["broadcast","isFromTemplate","isSentByMe","labels","star","type"]),p={},m=null===(t=e.spacer)||void 0===t||t;if(m){var _;switch(f){case o.default.MSG_TYPE.REVOKED:_=[a,c&&c.length&&(0,l.canDisplayLabel)()];break;default:_=[a,s,c&&c.length&&(0,l.canDisplayLabel)(),h]}var v=_.filter(Boolean).length;v>0&&(p={[d.default.icons1]:1===v,[d.default.icons2]:2===v,[d.default.icons3]:3===v,[d.default.icons4]:v>=4})}return n.createElement("div",{className:(0,i.default)(e.className,{[d.default.text]:!0,[d.default.placeholder]:"placeholder"===e.theme,[d.default.template]:r})},e.children,m&&n.createElement("span",{className:(0,i.default)(d.default.spacer,p)}))};var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=a(75459),d=s(a(3456)),u=s(a(47609))},71726:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MetaFrame=C,t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=r(a(19899)),l=s(a(79711)),d=s(a(50935)),u=s(a(17957)),c=s(a(49984)),h=s(a(77602)),f=a(64658),p=s(a(76841)),m=s(a(82631)),_=s(a(77626)),v=a(93081),g=s(a(47609)),E=s(a(18120)),S=d.default.MSG_TYPE;function C(e){var t=e.icons&&e.icons.length>0?e.icons.map(((e,t)=>n.createElement("div",{className:h.default.icon,key:"icon-".concat(t)},e))):null,a=e.labels?n.createElement("div",{className:h.default.labels},e.labels):null,r=e.status?n.createElement("div",{className:h.default.status},e.status):null,s=(0,i.default)(h.default.meta,{[h.default.metaLight]:e.light,[h.default.chromeFix]:_.default.os===d.default.OS_TYPE.MAC&&_.default.browser===d.default.BROWSER_TYPE.CHROME&&_.default.osVersion.includes("10.15")});return n.createElement("div",{className:s,onClick:e.onClick,role:e.onClick?"button":null},t,a,n.createElement("span",{className:h.default.timestamp,dir:"auto"},e.children),r)}C.displayName="MetaFrame";var y=function({msg:e,theme:t}){var{broadcast:a,caption:r,isLive:s,asRevoked:i,isSentByMe:d,isViewOnce:h,labels:_,loc:y,star:b,t:T,type:M,subtype:N}=(0,g.default)(e.unsafe(),["broadcast","caption","isLive","asRevoked","isSentByMe","isViewOnce","labels","loc","star","t","type","subtype"]),[I,P]=n.useState(!1);(0,v.useListener)(o.default,o.HOUR24_FORMAT_CHANGE_EVENT,(()=>{P(!I)}));var A=[],O=(M===S.IMAGE||M===S.VIDEO)&&!r&&!h||M===S.LOCATION&&!s&&!y;b&&!i&&A.push(n.createElement(m.default,{name:"star","aria-label":" ".concat(u.default.t(30)," ")})),a&&A.push(n.createElement(m.default,{name:"broadcast"}));var D=d&&M!==S.REVOKED,w=null;D&&(w=n.createElement(p.default,{msg:e.unsafe()})),E.default.supportsFeature(E.default.F.MD_BACKEND)&&"fanout"===N&&(w=null);var R=_&&_.length>0?n.createElement(c.default,{labels:_,showName:!1}):null;return n.createElement(C,{icons:A,labels:R,light:O,onClick:D?()=>{l.default.msgInfoDrawer((0,f.unproxy)(e.unsafe()))}:null,status:w},"date"!==t?T?o.default.timestampStr(T):null:T?o.default.relativeStr(T):null)};t.default=y},20564:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(72779)),n=r(a(2784)),o=s(a(21403)),l=s(a(96515));function d(e){var t=(0,i.default)(l.default.container,{[l.default.isChecked]:e.checked,[l.default.gallery]:"gallery"===e.msgTheme});return n.createElement("div",{className:t,onClick:e.onClick},n.createElement(o.default,{onChange:e.onClick,checked:e.checked,theme:e.theme}))}d.displayName="MsgCheckbox"},38751:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgComponent=void 0;var i=s(a(19976)),n=s(a(70417)),o=r(a(2784)),l=s(a(97125)),d=s(a(17058)),u=s(a(50935)),c=s(a(96576)),h=s(a(84700)),f=s(a(47687)),p=a(13414),m=s(a(86292)),_=s(a(18541)),v=s(a(33788)),g=s(a(11412)),E=a(57556),S=s(a(71748)),C=s(a(673)),y=s(a(80606)),b=s(a(62814)),T=s(a(41434)),M=s(a(15442)),N=s(a(36786)),I=s(a(74837)),P=s(a(93456)),A=s(a(77674)),O=s(a(56089)),D=s(a(40207)),w=a(64658),R=s(a(38906)),k=s(a(29152)),L=s(a(70846)),x=s(a(26691)),F=s(a(99127)),B=a(84990),G=s(a(92276)),U=s(a(33426));function j(){var e=(0,i.default)(["messageList:render Unknown message type: ",""]);return j=function(){return e},e}class V extends o.PureComponent{constructor(...e){super(...e),this._getParsedVcardList=(0,g.default)((({vcardList:e})=>e?e.map((e=>(0,n.default)((0,n.default)({},e),{},{parsedVcard:(0,B.parseVcard)(e.vcard)}))):[]))}getQuotedMsg(){var e,{displayType:t,msg:a,chat:r}=this.props;if(t!==u.default.DISP_TYPE.GALLERY){var s=a.quotedMsgObj();if(s)e=o.createElement(P.default,{msg:s,key:s.id.toString(),rootMsg:(0,w.unproxy)(a.safe()),displayType:t,theme:"conversation",chat:(0,w.unproxy)(r),t:a.t});else{var i=a.getQuotedMsgAdminGroupJid();i&&(e=o.createElement(A.default,{quotedGroupJid:i}))}}return e}getRef(){return this.ref}render(){var{chat:e,displayAuthor:t,displayType:a,isMsgVisible:r,msg:s}=this.props,i=s.safe();if(null!=i.asViewOnce){var n=i.asViewOnce;return o.createElement(U.default,{displayType:a,displayAuthor:t,mediaData:n.mediaData,msg:n,quotedMsg:this.getQuotedMsg(),trusted:s.isTrusted()})}switch(i.type){case u.default.MSG_TYPE.CHAT:case u.default.MSG_TYPE.LIST_RESPONSE:case u.default.MSG_TYPE.BUTTONS_RESPONSE:return o.createElement(k.default,{msg:(0,w.unproxy)(i),contact:i.senderObj,quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayType:a,displayAuthor:t});case u.default.MSG_TYPE.IMAGE:return o.createElement(M.default,{msg:i,displayType:a,mediaData:i.mediaData,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),isMsgVisible:r,trusted:i.isTrusted(),displayAuthor:t});case u.default.MSG_TYPE.PRODUCT:return o.createElement(N.default,{msg:i,mediaData:i.mediaData,displayAuthor:t,trusted:i.isTrusted(),onProductClick:this.props.onProductClick,quotedMsg:this.getQuotedMsg()});case u.default.MSG_TYPE.GROUP_NOTIFICATION:case u.default.MSG_TYPE.GP2:case u.default.MSG_TYPE.BROADCAST_NOTIFICATION:case u.default.MSG_TYPE.NOTIFICATION:case u.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case u.default.MSG_TYPE.E2E_NOTIFICATION:case u.default.MSG_TYPE.CALL_LOG:return o.createElement(C.default,{contact:(0,w.unproxy)(e).contact,msg:i,ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.AUDIO:return o.createElement(l.default,{msg:i,mediaData:i.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.VIDEO:return!0===i.isGif?o.createElement(h.default,{displayAuthor:t,displayType:a,isMsgVisible:r,maxWidth:this.props.maxWidth,mediaData:i.mediaData,msg:i,quotedMsg:this.getQuotedMsg(),ref:(0,p.GetRef)((e=>{this.ref=e})),trusted:i.isTrusted()}):o.createElement(G.default,{displayAuthor:t,displayType:a,hover:this.props.hover,isMsgVisible:r,mediaData:i.mediaData,msg:i,quotedMsg:this.getQuotedMsg(),ref:(0,p.GetRef)((e=>{this.ref=e})),trusted:i.isTrusted()});case u.default.MSG_TYPE.VCARD:return o.createElement(x.default,{msg:i,vcard:i.vcard,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:this.props.onMessageClick});case u.default.MSG_TYPE.MULTI_VCARD:return o.createElement(S.default,{msg:i,vcardList:this._getParsedVcardList({vcardList:this.props.msg.vcardList}),ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayType:a,displayAuthor:t});case u.default.MSG_TYPE.GROUPS_V4_INVITE:return o.createElement(f.default,{msg:i,ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t});case u.default.MSG_TYPE.LOCATION:return!0===i.isLive?o.createElement(_.default,{msg:(0,w.unproxy)(i),ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayAuthor:t}):o.createElement(v.default,{msg:(0,w.unproxy)(i),ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayAuthor:t});case u.default.MSG_TYPE.PAYMENT:return o.createElement(T.default,{msg:i,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayAuthor:t});case u.default.MSG_TYPE.PTT:return o.createElement(I.default,{msg:i,mediaData:i.mediaData,quotedMsg:this.getQuotedMsg(),displayAuthor:t,displayType:a,ref:(0,p.GetRef)((e=>{this.ref=e})),getSequentialMsg:this.props.getSequentialMsg});case u.default.MSG_TYPE.STICKER:return o.createElement(R.default,{msg:i,mediaData:i.mediaData,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),displayAuthor:t,position:this.props.position,forwardRef:this.props.forwardStickerRef,animateOnView:!0});case u.default.MSG_TYPE.DOCUMENT:return s.isVcardOverMmsDocument?o.createElement(F.default,{chat:e,msg:i,mediaData:s.mediaData,displayAuthor:t,displayType:a,getQuotedMsg:()=>this.getQuotedMsg(),onMessageClick:this.props.onMessageClick}):o.createElement(c.default,{msg:i,displayType:a,mediaData:i.mediaData,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayAuthor:t});case u.default.MSG_TYPE.UNKNOWN:return o.createElement(L.default,{msg:(0,w.unproxy)(i),displayAuthor:t,hideUpdateButton:"phone_only_feature"===i.subtype});case u.default.MSG_TYPE.CIPHERTEXT:return o.createElement(d.default,{msg:i,ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t});case u.default.MSG_TYPE.REVOKED:return this.ref=null,o.createElement(O.default,{msg:(0,w.unproxy)(i)});case u.default.MSG_TYPE.OVERSIZED:return o.createElement(b.default,{msg:(0,w.unproxy)(i),displayAuthor:t});case u.default.MSG_TYPE.HSM:case u.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:return o.createElement(k.default,{msg:(0,w.unproxy)(i),contact:i.senderObj,ref:(0,p.GetRef)((e=>{this.ref=e})),quotedMsg:this.getQuotedMsg(),trusted:i.isTrusted(),displayType:a,displayAuthor:t});case u.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===s.subtype?o.createElement(C.default,{contact:(0,w.unproxy)(e).contact,msg:i,ref:(0,p.GetRef)((e=>{this.ref=e}))}):o.createElement(L.default,{msg:(0,w.unproxy)(i),ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t});case u.default.MSG_TYPE.ORDER:return o.createElement(y.default,{displayAuthor:t,msg:(0,w.unproxy)(i),ref:(0,p.GetRef)((e=>{this.ref=e}))});case u.default.MSG_TYPE.LIST:if((0,E.listMsgCanRender)(i))return o.createElement(m.default,{msg:(0,w.unproxy)(i),displayAuthor:t})}return __LOG__(2)(j(),s.type),o.createElement(L.default,{msg:(0,w.unproxy)(i),ref:(0,p.GetRef)((e=>{this.ref=e})),displayAuthor:t})}}t.MsgComponent=V,V.CONCERNS={msg:["body","caption","rtl","dir","isSentByMe","isPSA","isViewOnce","ctwaContext","initialPageSize","hasTemplateButtons","thumbnail","orderTitle","totalAmount1000","totalCurrencyCode","itemCount","isGif","isLive","isVcardOverMmsDocument","mediaData","senderObj","subtype","type","t","id","title","isFromTemplate","vcard","vcardList"],chat:["trusted"]},V.displayName="MsgComponent";var H=(0,D.default)(V,V.CONCERNS);t.default=class extends H{getRef(){return this.getComponent().getRef()}}},32087:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784));function o(){var e=(0,i.default)(["[","] ","\n",""],["[","] ","\\n",""]);return o=function(){return e},e}class l extends n.Component{constructor(...e){super(...e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){__LOG__(4,void 0,new Error,!0)(o(),e.toString(),e.stack,t.componentStack),SEND_LOGS("msg-error-boundary")}render(){return this.state.hasError?null:this.props.children}}t.default=l,l.displayName="MsgErrorBoundary"},90277:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(97816)),l=s(a(8408)),d=s(a(82631)),u=e=>{var t=e.hasCaption?e.children:n.createElement("div",{className:l.default.text},n.createElement(o.default,{msg:e.msg,theme:"placeholder"},e.children)),a=e.iconName?n.createElement("div",{className:l.default.icon},n.createElement(d.default,{name:e.iconName})):null;return n.createElement("div",{className:(0,i.default)(l.default.container,{[l.default.containerSmallIcon]:"small-icon"===e.theme})},a,t)};u.displayName="MsgPlaceholder";var c=u;t.default=c},85791:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(2784)),n=s(a(21406)),o=r(a(60240)),l=a(66615);function d({emojis:e,animation:t}){var a,r=e?e.length:0;if(0===r)return null;switch(r){default:case 3:a=n.SIZE.MEDIUM;break;case 2:a=n.SIZE.LARGE;break;case 1:a=n.SIZE.XLARGE}var s=e.map(((e,r)=>i.createElement(n.default,{animation:t,size:a,emoji:e,key:e+r,selectable:!0})));return i.createElement(l.SelectableDiv,{selectable:!0,className:o.default.wrapper},s)}d.displayName="MultiEmoji"},71748:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=a(91460),o=r(a(2784)),l=s(a(71874)),d=s(a(20458)),u=s(a(79711)),c=s(a(50935)),h=s(a(91581)),f=s(a(17957)),p=s(a(11412)),m=s(a(71726)),_=s(a(21206)),v=s(a(7632)),g=s(a(81031)),E=s(a(15118)),S=s(a(40207)),C=a(84990);class y extends o.PureComponent{constructor(e){super(e),this._getUnsortedVcardDisplayDataMemo=(0,p.default)((({vcardList:e})=>e.map((({displayName:e,parsedVcard:t})=>({displayName:e,wids:(0,C.vcardWids)(t),thumbnail:(0,C.vcardThumbnail)(t)}))))),this._showContactsModal=()=>{var{vcardList:e}=this.props;if(e){var t=e.map((e=>e.parsedVcard));u.default.openModal(o.createElement(v.default,{vcards:t}))}},this.state={loading:!0,sortedVcardData:null,vcardList:e.vcardList}}componentDidMount(){this._loadProfilePics()}static getDerivedStateFromProps(e,t){return t.vcardList!==e.vcardList?{loading:!0,sortedVcardData:null,vcardList:e.vcardList}:null}componentDidUpdate(e){e.vcardList!==this.props.vcardList&&this._loadProfilePics()}_getUnsortedVcardDisplayData(){return this._getUnsortedVcardDisplayDataMemo({vcardList:this.props.vcardList})}_loadProfilePics(){var e=this.props.vcardList,t=this._getUnsortedVcardDisplayData(),a=[].concat(...t.map((({wids:e})=>e))).slice(0,10);Promise.all(a.map((e=>E.default.find(e)))).then((()=>(0,n.delayMs)(0))).then((()=>{var a;this.props.vcardList===e&&this.setState({loading:!1,sortedVcardData:(a=t,[...a].sort(((e,t)=>{var a=T(e),r=T(t);return a&&!r?-1:!a&&r?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})))})}))}_renderProfilePics(e){for(var t=Math.min(e.length,3),a=[],r=0;r<t;r++){var{wids:s,thumbnail:i}=e[r],n=E.default.findThumbnailWid(s);this.state.loading||!n&&!i?a.push(o.createElement("div",{className:_.default.image,key:"default-pic-".concat(r)},o.createElement(g.default,{size:39,border:!0}))):a.push(o.createElement("div",{className:_.default.image,key:"profile-pic-".concat(r)},o.createElement(g.default,{wid:n,thumb:i,size:39,border:!0})))}return a}render(){var{msg:e}=this.props,t=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg?o.createElement("div",{className:_.default.author},o.createElement(l.default,{msg:e,contact:e.senderObj})):null,a=this.state.sortedVcardData||this._getUnsortedVcardDisplayData(),r=a.map((({displayName:e})=>e)),s=(0,C.getNameStringFromNames)(r),n=this._renderProfilePics(a),u=this.props.vcardList||e.chat.isTrusted(),p=this.props.quotedMsg?o.createElement("div",{className:_.default.quote},this.props.quotedMsg):null,v=(0,i.default)(_.default.bubble,{[_.default.hasAuthor]:t,[_.default.hasQuote]:p,[_.default.isPreview]:this.props.displayType===c.default.DISP_TYPE.MSG_INFO,[_.default.isGallery]:this.props.displayType===c.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===c.default.DISP_TYPE.GALLERY});return o.createElement("div",{className:v},t,p,o.createElement("div",{className:_.default.vcard,role:u?"button":null,title:s,onClick:this._showContactsModal},o.createElement("div",{className:_.default.avatar},n),o.createElement("div",{className:_.default.body},o.createElement(h.default,{text:s,element:"div",className:_.default.name,dirMismatch:e.rtl!==f.default.isRTL(),direction:e.dir,wbr:15})),o.createElement("div",{className:_.default.meta},o.createElement(m.default,{msg:e}))),o.createElement(d.default,{items:[{label:f.default.t(1035),onClick:this._showContactsModal}]}))}}y.CONCERNS={msg:["rtl","dir","senderObj","isSentByMe","isGroupMsg","chat"]},y.displayName="MultiVcard";var b=(0,S.default)(y,y.CONCERNS);function T(e){return Boolean(E.default.findThumbnailWid(e.wids)||e.thumbnail)}t.default=b},673:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(87400)),o=a(97238),l=r(a(43334)),d=r(a(41353)),u=r(a(79711)),c=r(a(9386)),h=r(a(50935)),f=r(a(7470)),p=r(a(39292)),m=r(a(91581)),_=a(35387),v=r(a(2572)),g=r(a(72256)),E=r(a(66685)),S=r(a(65308)),C=r(a(30866)),y=r(a(87162)),b=r(a(17957)),T=r(a(78419)),M=r(a(56015)),N=r(a(40207)),I=a(64658),P=r(a(82631)),A=r(a(68384)),O=r(a(3111)),D=a(75637);class w extends i.PureComponent{constructor(...e){super(...e),this._ref=i.createRef()}handleKeyActivation(){var e;null===(e=this._ref.current)||void 0===e||e.click()}render(){var e,t,a,r,s,N,w=this.props.msg;switch(w.type){case h.default.MSG_TYPE.NOTIFICATION:t=w.body;break;case h.default.MSG_TYPE.GP2:case h.default.MSG_TYPE.GROUP_NOTIFICATION:return i.createElement(y.default,{msg:w,groupMetadata:w.chat.groupMetadata,clickable:!0});case h.default.MSG_TYPE.BROADCAST_NOTIFICATION:return i.createElement(n.default,{msg:w,clickable:!0});case h.default.MSG_TYPE.E2E_NOTIFICATION:var R=(0,I.unproxy)(w);t=(0,g.default)(R);var L=w.subtype,x=w.body?(0,D.createWid)(w.body):null,F=w.id.remote;r=()=>{!function(e,t,a,r){u.default.openModal(i.createElement(p.default,{e2eSubtype:e,jid:t,chatId:a,msg:r}))}(L,x,F,w)},e=function(e){if(e.chat.isSupportGroup())return i.createElement("div",{className:T.default.iconSupportGroup},i.createElement(P.default,{name:"info-filled"}));if("encrypt"===e.subtype||"encrypt_now"===e.subtype)return i.createElement("div",{className:T.default.iconE2E},i.createElement(P.default,{name:"lock-small"}))}(R);break;case h.default.MSG_TYPE.CALL_LOG:var B="miss_video"===w.subtype||"miss_group_video"===w.subtype;e=i.createElement("div",{className:T.default.icon},B?i.createElement(P.default,{name:"miss_video",className:T.default.iconMiss}):i.createElement(P.default,{name:"miss",className:T.default.iconMiss})),t=(0,v.default)((0,I.unproxy)(w.unsafe()),!0);break;case h.default.MSG_TYPE.NOTIFICATION_TEMPLATE:if("change_number"===w.subtype){var G=w.templateParams[0],U=w.templateParams[1],j=f.default.get(G),V=j&&j.isMyContact?j.formattedName:(0,O.default)(G),H=A.default.equals(w.chat.id,G);t=H?b.default.t(466,{name:V}):b.default.t(464,{name:V}),H&&(r=()=>function(e,t){(0,o.onChangeNumberNotificationClick)(e,t)}(U,G))}else if(t=(0,C.default)((0,I.unproxy)(w.unsafe())),a=(0,S.default)((0,I.unproxy)(w.unsafe()))){var W=(0,M.default)(w.subtype);r=()=>{!function(e,t){var a;a=i.createElement(d.default,{href:t,onClick:e=>{e.preventDefault(),u.default.closeModal("none"),setTimeout((()=>(0,_.openExternalLink)(t)),10)}},b.default.t(875));var r=i.createElement(c.default,{onOK:()=>u.default.closeModal(),okText:b.default.t(1761)},e,"",a);u.default.openModal(r)}(a,W)}}s=w.type,N=w.subtype,s===h.default.MSG_TYPE.NOTIFICATION_TEMPLATE&&k.has(N)&&(e=i.createElement("div",{className:T.default.bizInfo},i.createElement(P.default,{name:"info-filled"})));break;case h.default.MSG_TYPE.PROTOCOL:if("ephemeral_setting"===w.subtype){var Y,K=w.from,q=w.id.remote,z=l.default.gadd(q),Q=null!==(Y=w.ephemeralDuration)&&void 0!==Y?Y:0;t=(0,E.default)(Q,K,q),r=()=>{!function(e){u.default.ephemeralDrawer(e)}(z)}}}var X=i.createElement("span",null,e,i.createElement(m.default,{direction:b.default.isRTL()?"rtl":"ltr",text:t}));return r?i.createElement("div",{role:"button",ref:this._ref,onClick:r},X):i.createElement("span",null,X)}}w.CONCERNS={contact:["id","isEnterprise","isContactBlocked","verifiedLevel","verifiedName"],msg:["id","body","chat","from","type","subtype","templateParams","ephemeralDuration"]},w.displayName="Notification";var R=(0,N.default)(w,w.CONCERNS);t.default=class extends R{handleKeyActivation(){return this.getComponent().handleKeyActivation()}};var k=new Set(["blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_verified","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_verified","blue_msg_self_fb_unverified","blue_msg_self_fb_verified"])},80606:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(20458)),o=r(a(79711)),l=r(a(91581)),d=a(95595),u=r(a(17957)),c=a(63865),h=r(a(97816)),f=r(a(71726)),p=r(a(85152)),m=r(a(72457)),_=r(a(55043)),v=r(a(13531)),g=r(a(20385));class E extends i.PureComponent{constructor(...e){super(...e),this._openOrderView=e=>{e&&e.stopPropagation();var{msg:t}=this.props,{orderId:a,sellerJid:r,token:s}=t;if(null!=a&&null!=r&&null!=s){var n=(0,d.getMaybeMeUser)(),l=t.sender.equals(n),u=(new _.default).toString();(0,c.logOrderMessageClick)({catalogSessionId:u,catalogOwnerJid:r,orderId:a}),null!=t.orderId&&o.default.openDrawerRight(i.createElement(v.default,{chat:t.chat,orderId:a,token:s,userIsCartOwner:l,sellerJid:r,sessionId:u}),"slide-left")}}}render(){var{displayAuthor:e,msg:t}=this.props,a=(0,d.getMaybeMeUser)(),r=t.sender.equals(a),s=i.createElement(l.default,{text:t.message,dirMismatch:t.rtl!==u.default.isRTL(),direction:t.dir,inferLinesDirection:!0}),o=i.createElement("div",{className:p.default.meta},i.createElement(f.default,{msg:t})),c=i.createElement(n.default,{items:[{label:r?u.default.t(1165):u.default.t(1164),onClick:this._openOrderView}]});return i.createElement(g.default,{msg:t,displayAuthor:e,hideMeta:!0},i.createElement("div",{className:p.default.orderPreview},i.createElement(m.default,{msg:t.unsafe(),onClick:this._openOrderView})),i.createElement(h.default,{msg:t.unsafe(),"data-id":t.id,className:p.default.messageText},s,o),c)}}t.default=E,E.displayName="Order"},62814:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(2784)),n=r(a(73540)),o=r(a(97816)),l=r(a(85673)),d=r(a(82631)),u=r(a(20385));function c({msg:e,displayAuthor:t}){return i.createElement(u.default,{msg:e,displayAuthor:t},i.createElement("div",{className:l.default.icon},i.createElement(d.default,{name:"unknown"})),i.createElement("div",{className:l.default.text},i.createElement(o.default,{msg:e.unsafe(),theme:"placeholder"},(0,n.default)(e.unsafe()))))}c.displayName="OversizedMsg"},69353:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(72779)),n=r(a(2784)),o=a(37356),l=s(a(74569));function d(e){var t=(0,o.formatToParts)(e.currency,e.amount1000);return n.createElement("div",{className:(0,i.default)(l.default.container,{[l.default.isQuoted]:e.isQuoted,[l.default.isQuotedInComposeBox]:e.isQuotedInComposeBox})},n.createElement("div",{"data-testid":"payment-amount-thumb",className:(0,i.default)(l.default.thumb,{"bg-payments":!e.isQuoted})},n.createElement("div",{className:l.default.amount},n.createElement("span",{className:l.default.amountCurrency},t.symbol),n.createElement("span",{className:l.default.amountInteger},t.integer),n.createElement("span",{className:l.default.amountDecimal},t.decimal))))}d.displayName="PaymentAmount"},74287:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(72779)),n=r(a(2784)),o=a(37356),l=s(a(77509)),d=s(a(82631)),u=a(21617);function c({currency:e,subtype:t,paymentStatus:a,paymentTxnStatus:r,isCompact:s}){var c=(0,o.formatLocalSymbol)(e),h=null!=r?function(e){switch(null!=e?e:u.PaymentInfoTxnStatus.UNKNOWN){case u.PaymentInfoTxnStatus.SUCCESS:case u.PaymentInfoTxnStatus.COMPLETED:return l.default.success;case u.PaymentInfoTxnStatus.FAILED:case u.PaymentInfoTxnStatus.FAILED_RISK:case u.PaymentInfoTxnStatus.FAILED_DA_FINAL:case u.PaymentInfoTxnStatus.REFUNDED_TXN:case u.PaymentInfoTxnStatus.REFUND_FAILED:case u.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case u.PaymentInfoTxnStatus.REFUND_FAILED_DA:case u.PaymentInfoTxnStatus.AUTH_CANCELED:case u.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case u.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case u.PaymentInfoTxnStatus.COLLECT_FAILED:case u.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:return l.default.failed;default:return l.default.pending}}(r):function(e){switch(null!=e?e:u.PaymentInfoStatus.UNKNOWN_STATUS){case u.PaymentInfoStatus.COMPLETE:return l.default.success;case u.PaymentInfoStatus.CANCELLED:case u.PaymentInfoStatus.COULD_NOT_COMPLETE:case u.PaymentInfoStatus.REFUNDED:case u.PaymentInfoStatus.EXPIRED:case u.PaymentInfoStatus.REJECTED:return l.default.failed;default:return l.default.pending}}(a),f="send"===t?n.createElement(d.default,{name:"payment-send"}):n.createElement(d.default,{name:"payment-request"});return n.createElement("div",{"data-testid":"payment-icon-container",className:(0,i.default)(l.default.icon,h,{[l.default.compact]:s})},n.createElement("div",{className:(0,i.default)(l.default.iconSymbol,l.default[e])},c),f)}c.displayName="PaymentIcon"},26354:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(69353)),l=s(a(74287)),d=s(a(64270)),u=s(a(96339)),c=s(a(34964)),h=s(a(20299)),f=a(21617);class p extends n.PureComponent{constructor(...e){super(...e),this.state={isMultilineText:!1},this._setRefText=e=>{e&&this.setState({isMultilineText:e.getBoundingClientRect().height>20})}}render(){var e,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r}=this.props,s=(0,i.default)({[d.default.bubbleOut]:this.props.isSentByMe,[d.default.bubbleIn]:!this.props.isSentByMe}),p=null!=a&&a!==f.PaymentInfoTxnStatus.UNKNOWN||null!=t&&t!==f.PaymentInfoStatus.UNKNOWN_STATUS;if(this.props.hasCaption)e=n.createElement("div",{ref:this._setRefText},n.createElement("div",null,n.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})),n.createElement(u.default,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r}));else if(p){var m;e=n.createElement("div",{ref:this._setRefText},n.createElement("div",null,n.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})),n.createElement(h.default,{msg:null===(m=this.props.msg)||void 0===m?void 0:m.unsafe()},n.createElement(u.default,{paymentStatus:t,paymentTxnStatus:a,expiryTimestamp:r})))}else{var _;e=n.createElement(h.default,{msg:null===(_=this.props.msg)||void 0===_?void 0:_.unsafe()},n.createElement("span",{ref:this._setRefText},n.createElement(c.default,{subtype:this.props.subtype,receiverJid:this.props.receiverJid})))}return n.createElement("div",{className:s},n.createElement(o.default,{currency:this.props.currency,amount1000:this.props.amount1000}),n.createElement("div",{className:d.default.body},n.createElement("div",{className:(0,i.default)(d.default.bodyIcon,{[d.default.bodyIconMultiline]:this.state.isMultilineText})},n.createElement(l.default,{currency:this.props.currency,subtype:this.props.subtype,paymentStatus:t,paymentTxnStatus:a})),n.createElement("div",{className:d.default.bodyText},e)))}}t.default=p,p.displayName="PaymentInfo"},96339:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=s(a(72779)),n=s(a(19034)),o=r(a(2784)),l=s(a(19899)),d=s(a(17957)),u=s(a(37270)),c=s(a(38063)),h=a(21617);function f({paymentStatus:e,paymentTxnStatus:t,expiryTimestamp:a}){var r,s;return function(){var[,e]=o.useState(1e3*l.default.globalUnixTime());(0,c.default)((()=>{e(1e3*l.default.globalUnixTime())}),1e3)}(),({str:r,themeClassName:s}=null!=t?function(e,t){var a=null,r=null;if(null!=e)switch(e){case h.PaymentInfoTxnStatus.UNKNOWN:a=null,r=null;break;case h.PaymentInfoTxnStatus.PENDING_SETUP:a=p(t),r=u.default.pending;break;case h.PaymentInfoTxnStatus.PENDING_RECEIVER_SETUP:a=d.default.t(1789),r=u.default.pending;break;case h.PaymentInfoTxnStatus.INIT:case h.PaymentInfoTxnStatus.FAILED_PROCESSING:case h.PaymentInfoTxnStatus.FAILED_RECEIVER_PROCESSING:case h.PaymentInfoTxnStatus.FAILED_DA:case h.PaymentInfoTxnStatus.COLLECT_INIT:a=d.default.t(1793),r=u.default.pending;break;case h.PaymentInfoTxnStatus.SUCCESS:case h.PaymentInfoTxnStatus.COMPLETED:a=d.default.t(1785),r=u.default.success;break;case h.PaymentInfoTxnStatus.FAILED:case h.PaymentInfoTxnStatus.FAILED_RISK:case h.PaymentInfoTxnStatus.FAILED_DA_FINAL:case h.PaymentInfoTxnStatus.REFUNDED_TXN:case h.PaymentInfoTxnStatus.REFUND_FAILED:case h.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING:case h.PaymentInfoTxnStatus.REFUND_FAILED_DA:case h.PaymentInfoTxnStatus.AUTH_CANCELED:case h.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING:case h.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED:case h.PaymentInfoTxnStatus.COLLECT_FAILED:case h.PaymentInfoTxnStatus.COLLECT_FAILED_RISK:a=d.default.t(1786),r=u.default.failed;break;case h.PaymentInfoTxnStatus.EXPIRED_TXN:case h.PaymentInfoTxnStatus.COLLECT_EXPIRED:a=d.default.t(1787),r=u.default.pending;break;case h.PaymentInfoTxnStatus.COLLECT_SUCCESS:a=p(t),r=u.default.pending;break;case h.PaymentInfoTxnStatus.COLLECT_REJECTED:a=d.default.t(1796),r=u.default.pending;break;case h.PaymentInfoTxnStatus.COLLECT_CANCELED:case h.PaymentInfoTxnStatus.COLLECT_CANCELLING:a=d.default.t(1784),r=u.default.pending;break;case h.PaymentInfoTxnStatus.IN_REVIEW:a=d.default.t(1788),r=u.default.pending}return{str:a,themeClassName:r}}(t,a):function(e,t){var a=null,r=null;if(null!=e)switch(e){case h.PaymentInfoStatus.PROCESSING:a=d.default.t(1793),r=u.default.pending;break;case h.PaymentInfoStatus.COMPLETE:a=d.default.t(1785),r=u.default.success;break;case h.PaymentInfoStatus.SENT:a=d.default.t(1789),r=u.default.pending;break;case h.PaymentInfoStatus.NEED_TO_ACCEPT:a=p(t),r=u.default.pending;break;case h.PaymentInfoStatus.COULD_NOT_COMPLETE:case h.PaymentInfoStatus.REFUNDED:a=d.default.t(1786),r=u.default.failed;break;case h.PaymentInfoStatus.EXPIRED:a=d.default.t(1787),r=u.default.failed;break;case h.PaymentInfoStatus.REJECTED:a=d.default.t(1796),r=u.default.failed;break;case h.PaymentInfoStatus.CANCELLED:a=d.default.t(1784),r=u.default.failed;break;case h.PaymentInfoStatus.WAITING_FOR_PAYER:case h.PaymentInfoStatus.WAITING:a=p(t),r=u.default.pending;break;case h.PaymentInfoStatus.UNKNOWN_STATUS:a=null,r=null}return{str:a,themeClassName:r}}(e,a)),null==r?null:o.createElement("span",{"data-testid":"payment-status",className:(0,i.default)(u.default.status,s)},r)}function p(e){if(null==e)return d.default.t(1789);var t=1e3*l.default.globalUnixTime(),a=1e3*e;if(a-t>6e4){var r=(0,n.default)(t).to((0,n.default)(a));return d.default.t(1791,{timeSpan:r})}return a-t>0?d.default.t(1792):d.default.t(1790)}f.displayName="PaymentStatus"},34964:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=s(a(72779)),n=r(a(2784)),o=s(a(7470)),l=s(a(17957)),d=s(a(81524)),u=s(a(60949)),c=s(a(76884)),h=s(a(3111));function f(e){if(!e.receiverJid)return null;var t,a=o.default.get(e.receiverJid),r=n.createElement("span",{className:c.default.name},a?a.isMe?l.default.t(1898):n.createElement(u.default,{contact:a,showNotifyName:!0}):(0,h.default)(e.receiverJid));switch(e.subtype){case"send":t=n.createElement(d.default,{id:1783,params:{receiverName:r}});break;case"request":t=n.createElement(d.default,{id:1776,params:{receiverName:r}})}return n.createElement("span",{className:(0,i.default)(c.default.container,{[c.default.isQuoted]:e.isQuoted})},t)}f.displayName="PaymentType"},41434:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=(r(a(50935)),r(a(18120))),o=r(a(17957)),l=r(a(26354)),d=r(a(18225)),u=r(a(76772)),c=r(a(40207));class h extends i.Component{render(){var{msg:e,displayAuthor:t,displayType:a,quotedMsg:r}=this.props;if(!n.default.supportsFeature(n.default.F.PAYMENTS))return i.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r});var s=!(!e.paymentNoteMsg||!e.paymentNoteMsg.body);if(!(e.paymentAmount1000&&e.paymentCurrency))return i.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r});var c=i.createElement(l.default,{isSentByMe:e.isSentByMe,currency:e.paymentCurrency,amount1000:e.paymentAmount1000,receiverJid:e.paymentMessageReceiverJid,paymentStatus:e.paymentStatus,paymentTxnStatus:e.paymentTxnStatus,expiryTimestamp:e.paymentExpiryTimestamp,subtype:e.subtype,hasCaption:s,msg:e});switch(e.subtype){case"ciphertext":return i.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:c,placeholderText:o.default.t(1773)});case"futureproof":return i.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:c,placeholderText:o.default.t(1775)});case"send":case"request":return i.createElement(u.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r,paymentInfo:c});default:return i.createElement(d.default,{msg:e,displayAuthor:t,displayType:a,quotedMsg:r})}}}h.CONCERNS={msg:["paymentAmount1000","paymentCurrency","id","isSentByMe","paymentNoteMsg","paymentStatus","paymentTxnStatus","paymentExpiryTimestamp","paymentMessageReceiverJid","subtype"]},h.displayName="PaymentMessage";var f=(0,c.default)(h,h.CONCERNS);t.default=f},18225:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(18164),l=(s(a(50935)),s(a(91581))),d=s(a(17957)),u=s(a(97816)),c=s(a(90277)),h=a(62761),f=s(a(56892)),p=s(a(40207)),m=s(a(20385));class _ extends n.Component{render(){var e,t,a,r=this.props.msg,s=r.paymentNoteMsg&&r.paymentNoteMsg.body;if(s){var p=(0,o.Conversation)({mentions:r.mentionMap(),links:r.getLinks(),trusted:r.isTrusted()});e=n.createElement(u.default,{msg:r.unsafe()},n.createElement(l.default,{text:s,selectable:!0,formatters:p,dirMismatch:r.rtl!==d.default.isRTL(),direction:r.dir}))}if(this.props.quotedMsg){var _=(0,i.default)(f.default.quote,{[f.default.hasAuthor]:this.props.displayAuthor&&!r.isSentByMe&&r.isGroupMsg,[f.default.forwarded]:(0,h.showForwarded)(r)});t=n.createElement("div",{className:_},this.props.quotedMsg)}var v=d.default.t(1774);this.props.placeholderText&&(a="ciphertext",v=this.props.placeholderText);var g=(0,i.default)({[f.default.hasText]:e,[f.default.noText]:!e});return n.createElement(m.default,{msg:r,displayAuthor:this.props.displayAuthor},t,this.props.paymentInfo,n.createElement("div",{className:g},n.createElement(c.default,{hasCaption:!!e,iconName:a,msg:r.unsafe()},v)),e)}}_.CONCERNS={msg:["rtl","dir","isSentByMe","isGroupMsg","isPSA","senderObj","paymentNoteMsg"]},_.displayName="PaymentMessagePlaceholder";var v=(0,p.default)(_,_.CONCERNS);t.default=v},15442:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(71874)),d=s(a(92969)),u=s(a(12708)),c=s(a(79711)),h=s(a(50935)),f=a(87478),p=s(a(131)),m=s(a(4336)),_=s(a(18120)),v=a(40713),g=s(a(69345)),E=r(a(68084)),S=a(96645),C=s(a(19125)),y=s(a(71726)),b=s(a(40210)),T=a(62761),M=s(a(10667)),N=s(a(40207)),I=a(64658),P=s(a(20783)),A=s(a(900)),O=a(86145);function D(e){e.stopPropagation()}class w extends n.PureComponent{constructor(...e){super(...e),this.setRefImg=e=>this._refImg=e,this.showMediaMissing=()=>{c.default.openModal(n.createElement(g.default,{msg:this.props.msg.unsafe()}))},this.getZoomNode=e=>{var t=this.props.isMsgVisible;if(!t)return null;var a=t(e);return a?a.getImgNode&&a.getImgNode():null},this.launchMediaViewer=e=>{if(e&&e.stopPropagation(),this.props.theme===v.DisplayTheme.Album){var t=this.props.zoomMsg||this.props.msg,a=new Set((this.props.albumMsgs||[]).map((e=>e.id.toString())));c.default.mediaViewerModal({msg:(0,I.unproxy)(t.unsafe()),getZoomNode:this.getZoomNode,highlightedMsgIds:a})}else c.default.mediaViewerModal({msg:(0,I.unproxy)(this.props.msg.unsafe()),getZoomNode:this.getZoomNode})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:b.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.downloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:b.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._renderImage=(e,t=!1,a,r)=>{var{mediaData:{fullHeight:s,fullWidth:o}}=this.props,l=(0,i.default)(M.default.thumbBody,{[M.default.thumbBodyLores]:t}),d=(0,f.getImgStyle)(o||a,s||r,a,r);return n.createElement("img",{alt:this._getCaption(),src:e,className:l,style:d,ref:this.setRefImg})},this._renderPreviewImage=(e,t)=>this._renderImage(this.props.mediaData.preview&&this.props.mediaData.preview.url(),!0,e,t),this._getCaption=()=>{var{msg:e}=this.props;return e.type===h.default.MSG_TYPE.IMAGE&&e.caption?e.caption:void 0}}componentDidMount(){this.downloadMedia()}getImgNode(){return this._refImg}render(){var e,{msg:t,contentContainerClassName:a,captionComponent:r,thumbClassName:s,onThumbClick:c,mediaData:g,theme:b,overlayContent:N,displayType:I}=this.props,w=this._getCaption(),R=w?null:n.createElement(A.default,null),k=w?n.createElement("div",{className:M.default.caption},n.createElement(u.default,{msg:t.unsafe(),trusted:this.props.trusted,spacer:!(t.supportsMessageFooter&&t.footer)})):null,L=null,x=null;if(null!=N)x=c||this.launchMediaViewer;else{var{mediaStage:F,progressiveStage:B}=g;switch(F){case S.MEDIA_DATA_STAGE.RESOLVED:case S.MEDIA_DATA_STAGE.PROGRESSIVE_READY:x=c||this.launchMediaViewer;break;case S.MEDIA_DATA_STAGE.FETCHING:L=n.createElement(E.PendingCancel,null),x=this.cancelDownload;break;case S.MEDIA_DATA_STAGE.NEED_POKE:L=n.createElement(E.Download,{filesize:g.size}),x=this._forceDownloadMedia;break;case S.MEDIA_DATA_STAGE.UPLOADING:L=n.createElement(E.PendingCancel,null),x=this.cancelUpload;break;case S.MEDIA_DATA_STAGE.NEED_UPLOAD:L=n.createElement(E.Upload,{filesize:g.size}),x=this.resumeUpload;break;case S.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:L=n.createElement(E.Upload,{filesize:g.size}),x=this.resumeRemoteUpload;break;case S.MEDIA_DATA_STAGE.ERROR_MISSING:x=c||this.showMediaMissing;break;case S.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:L=n.createElement(E.Download,{filesize:g.size}),x=c||this.launchMediaViewer;break;case S.MEDIA_DATA_STAGE.SENDING:t.isFailed||(L=n.createElement(E.Pending,null));break;case S.MEDIA_DATA_STAGE.DECRYPTING:null==B&&(L=n.createElement(E.Pending,null));break;case S.MEDIA_DATA_STAGE.INIT:case S.MEDIA_DATA_STAGE.EXISTS:break;case S.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case S.MEDIA_DATA_STAGE.PREPARING:case S.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case S.MEDIA_DATA_STAGE.REUPLOADING:L=n.createElement(E.Pending,null)}}var G,U=this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg,j=(0,T.showForwarded)(t)&&this.props.theme!==v.DisplayTheme.Album,V=_.default.supportsFeature(_.default.F.PORTRAIT_MEDIA_LONG_CAPTIONS)&&(0,O.numCodepoints)(null!==(e=t.text)&&void 0!==e?e:"")>h.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:H,bubbleHeight:W}=(0,f.getBubbleDimension)(t.type,t.isFromTemplate,g.aspectRatio,b,I,V),Y=(0,i.default)(M.default.bubble,{[M.default.isAlbum]:b===v.DisplayTheme.Album,[M.default.portrait]:H<W&&(0,f.canUseCustomCropping)(t.type,b,I)}),K=(0,i.default)(Y,{[M.default.hasCaption]:w,[M.default.hasAuthor]:U,[M.default.forwarded]:j,[M.default.isPSA]:t.isPSA,[M.default.isPreview]:this.props.displayType===h.default.DISP_TYPE.MSG_INFO||this.props.displayType===h.default.DISP_TYPE.STARRED_MSGS,[M.default.isGallery]:this.props.displayType===h.default.DISP_TYPE.GALLERY}),q=U?n.createElement("div",{className:M.default.author},n.createElement(l.default,{msg:t,contact:t.senderObj})):null,z=j?n.createElement(m.default,{msg:t.unsafe(),className:M.default.forwardedIndicator}):null,Q=this.props.quotedMsg?n.createElement("div",{className:M.default.quote},this.props.quotedMsg):null,X=(0,i.default)(M.default.thumb,{[M.default.overlay]:N});null==N&&(G=n.createElement("div",{className:M.default.meta},n.createElement(y.default,{msg:t})));var J=n.createElement("div",{className:a},q,z,Q,n.createElement(p.default,{msg:t.unsafe(),wrapperClass:M.default.ctwaContext}),n.createElement("div",{role:"button","data-a8n":o.default.key("image-thumb"),className:s||X,onClick:x,style:{width:H,height:W}},L,n.createElement(C.default,{mediaData:g,placeholderRenderer:()=>this._renderPreviewImage(H,W),downloadMedia:this.downloadMedia,renderProgressively:!0},((e,t)=>this._renderImage(e,t,H,W))),R),r||k,n.createElement(P.default,{dir:t.dir,footer:t.footer,isShown:t.supportsMessageFooter,msg:t.unsafe(),rtl:t.rtl,trusted:this.props.trusted,type:t.type}),G);return k?n.createElement(d.default,{contact:t.senderObj,msg:t.unsafe(),className:K,onClick:D},J):(null!=N&&(J=n.createElement("div",{className:M.default.overlayAlbumText},J,N)),n.createElement("div",{className:K,onClick:D},J))}}w.CONCERNS={msg:["ack","caption","dir","footer","isFromTemplate","id","isFailed","isGroupMsg","isPSA","isSentByMe","rtl","senderObj","type","supportsMessageFooter","text"],mediaData:["aspectRatio","preview","mediaStage","fullWidth","fullHeight","size","progressiveStage"]},w.displayName="Picture";var R=(0,N.default)(w,w.CONCERNS);t.default=R},26660:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{playbackRate:t,onClick:a}=e,r=()=>{d.default.delayClearPlaybackRateControl(),a()};return i.createElement("div",{role:"button","aria-hidden":!0,className:l.default.wrapper,tabIndex:"0",onClick:r,onKeyPress:e=>{e.key!==u.ENTER&&e.key!==u.SPACE||(e.preventDefault(),e.stopPropagation(),r())}},i.createElement("div",{className:l.default.badge},function(e){switch(e){case 1:return o.default.t(248);case 1.5:return o.default.t(247);case 2:return o.default.t(249)}}(t)))};var i=s(a(2784)),n=r(a(10792)),o=r(a(17957)),l=r(a(94842)),d=r(a(50751)),{KEYBOARD_EVENT_KEY_VALUE:u}=n.default},36786:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(71874)),l=s(a(65468)),d=s(a(79711)),u=a(18164),c=s(a(50935)),h=r(a(37356)),f=s(a(91581)),p=s(a(52617)),m=s(a(98294)),_=s(a(17957)),v=a(83974),g=s(a(15442)),E=s(a(92512)),S=s(a(55043)),C=s(a(13531)),y=s(a(20299)),b=s(a(40207)),T=a(64658),M=a(75637);class N extends n.Component{constructor(...e){super(...e),this.ProductCatalogSession=new S.default,this._launchProductView=e=>{e&&e.stopPropagation();var{msg:t,onProductClick:a}=this.props;if(t){var{productId:r,businessOwnerJid:s}=t;if(r&&s){var i=(0,p.default)({productId:r,businessOwnerJid:s,msgT:t.t});if(i){(0,v.logProductMsgClick)({product:(0,T.unproxy)(i),catalogSessionId:this.ProductCatalogSession.toString()});var o=this.ProductCatalogSession.toString();a?a(i,o):d.default.openDrawerRight(n.createElement(C.default,{refreshCarousel:!0,chat:t.chat,product:i,sessionId:o}),"slide-left",this.props.uim)}}}}}componentDidMount(){var{msg:e}=this.props;e.businessOwnerJid&&(0,M.createWid)(e.businessOwnerJid)&&l.default.addMsgAsProduct((0,T.unproxy)(e.unsafe()))}_renderProductInfo(){var{msg:e,trusted:t}=this.props,{title:a,description:r,priceAmount1000:s,currencyCode:i}=e,o=(0,u.Conversation)({mentions:e.mentionMap(),links:e.getLinks(),selectable:!0,trusted:!0===t}),l=null!=s&&i?h.format(i,s):r,d=n.createElement(f.default,{direction:"inherit",selectable:!0,text:a,formatters:o,ellipsify:!0,className:E.default.title}),p=l?n.createElement(y.default,{msg:e.unsafe(),className:E.default.subtitle},n.createElement(f.default,{direction:"inherit",selectable:!0,text:l,formatters:o,textLimit:c.default.MAX_PRODUCT_SUBTITLE_LENGTH})):null;return n.createElement("div",{className:E.default.productInfo,onClick:this._launchProductView},d,p)}render(){var{displayAuthor:e,msg:t,mediaData:a,trusted:r,quotedMsg:s}=this.props,l=(!1!==e?!t.isSentByMe&&t.isGroupMsg:null)?n.createElement("div",{className:E.default.author},n.createElement(o.default,{msg:t,contact:t.senderObj})):null,d=n.createElement(g.default,{msg:t,mediaData:a,trusted:r,displayAuthor:!1,contentContainerClassName:E.default.productContainer,captionComponent:this._renderProductInfo(),thumbClassName:E.default.thumb,onThumbClick:this._launchProductView,quotedMsg:s}),u=n.createElement(f.default,{className:E.default.productCta,onClick:this._launchProductView,text:_.default.t(1200)});return n.createElement("div",{className:(0,i.default)(E.default.bubble,{[E.default.bubbleIn]:!t.isSentByMe,[E.default.bubbleOut]:t.isSentByMe})},l,d,u)}}N.CONCERNS={msg:["businessOwnerJid","chat","chat","currencyCode","description","dir","id","isGroupMsg","asProductInquiry","isSentByMe","mediaData","priceAmount1000","productId","productImageCount","retailerId","rtl","senderObj","t","title","url"]},N.displayName="Product";var I=(0,m.default)((0,b.default)(N,N.CONCERNS));t.default=I},81031:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=a(91460),o=r(a(2784)),l=r(a(46478)),d=a(90973),u=s(a(20642)),c=s(a(93579)),h=s(a(15118)),f=s(a(82631));class p extends o.PureComponent{constructor(e){super(e),this.promise=null,this._clearPromise=()=>{this.promise=null},this._handleImageChange=(e={})=>{this.setState({img:e.img})},this.state={img:null}}componentDidMount(){var e=this.props.wid;e&&(this.promise=h.default.find(e).then((e=>(0,n.delayMs)(0,e))).then((e=>{this.props.listeners.add(e,"change:img",this._handleImageChange),this._handleImageChange(e)})).catch((()=>{})).finally(this._clearPromise))}componentWillUnmount(){this.promise&&this.promise.cancel()}render(){var e,{theme:t}=this.props;if(this.state.img&&this.props.wid)return o.createElement(l.default,{id:this.props.wid,quoted:this.props.quoted,size:this.props.size,square:this.props.square,border:this.props.border});e="number"==typeof this.props.size&&0!==this.props.size||"number"!=typeof this.props.size&&null!=this.props.size?this.props.size:l.DETAIL_IMAGE_SIZE.SMALL;var a,r=(0,l.getSize)(e)||void 0,s=this.props.thumbs?this.props.thumbs:[this.props.thumb],n=s.map(((e,t)=>{if(e)return o.createElement("img",{className:c.default.image,src:e,key:t,alt:""});var a=r&&r/(s.length>2&&t>0?2:1);return o.createElement(d.FlexRow,{key:t,className:c.default.default,justify:"center",align:"center"},o.createElement(f.default,{name:this.props.quoted?"default-user-square":"default-user",style:{width:a,height:a},className:c.default.icon}))}));return a=1===n.length?n[0]:2===n.length?o.createElement(d.FlexRow,{className:c.default.row,justify:"stretch",align:"stretch"},n[0],n[1]):o.createElement(d.FlexRow,{className:c.default.row,justify:"stretch",align:"stretch"},n[0],o.createElement(d.FlexColumn,{className:c.default.col,justify:"stretch",align:"stretch"},n[1],n[2])),o.createElement(d.FlexRow,{className:(0,i.default)(c.default.container,{[c.default.square]:this.props.square,[c.default.hasBorder]:this.props.border,[c.default.hasInnerBorder]:"voip"===t||"voip-dimmed"===t,[c.default.hasLargeInnerBorder]:"voip-large"===t||"voip-large-dimmed"===t,[c.default.dimmed]:"voip-dimmed"===t||"voip-large-dimmed"===t}),style:{width:r,height:r}},a)}}p.displayName="ProfileImage";var m=(0,u.default)(p);t.default=m},74837:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(118)),o=s(a(62261)),l=r(a(71874)),d=r(a(79711)),u=r(a(50935)),c=r(a(46478)),h=a(55488),f=r(a(69345)),p=a(96645),m=r(a(40210)),_=r(a(3406)),v=r(a(40207)),g=r(a(82631));class E extends i.PureComponent{constructor(e){super(e),this._refAudioPlayer=i.createRef(),this.showMediaMissing=()=>{d.default.openModal(i.createElement(f.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})},this._forceDownloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this.handleTimeUpdate=e=>{this.setState({currentTime:e})},this.handlePlayingUpdate=e=>{var{msg:t}=this.props;e&&(0,h.canMarkPlayed)(t.unsafe())&&(0,h.markPlayed)(t.unsafe()),this.setState({autoPlay:!1,playing:e})},this.state={currentTime:0,playing:!1,autoPlay:!1}}componentDidMount(){this.downloadMedia()}handleKeyActivation(e){var t;null===(t=this._refAudioPlayer.current)||void 0===t||t.handleKeyActivation(e)}render(){var e,{msg:t,mediaData:a}=this.props,r=t.ack===u.default.ACK.PLAYED,s=i.createElement(_.default,{played:r,isSentByMe:t.isSentByMe}),d=this.state.playing?this.state.currentTime:a.duration;switch(a.mediaStage){case p.MEDIA_DATA_STAGE.RESOLVED:e=i.createElement(o.default,{ref:this._refAudioPlayer,mediaData:this.props.mediaData,downloadMedia:this.downloadMedia,autoPlay:this.state.autoPlay,duration:d,onPlayingUpdate:this.handlePlayingUpdate,onTimeUpdate:this.handleTimeUpdate,outgoingMsg:t.isSentByMe,playing:this.state.playing,played:r,displayType:this.props.displayType,getSequentialMsg:this.props.getSequentialMsg,currMsgId:t.id,isPtt:!0});break;case p.MEDIA_DATA_STAGE.NEED_POKE:e=i.createElement(o.AudioPlayerFrame,{icon:i.createElement(g.default,{name:"audio-download"}),outgoingMsg:t.isSentByMe,action:this._forceDownloadMedia});break;case p.MEDIA_DATA_STAGE.NEED_UPLOAD:e=i.createElement(o.AudioPlayerFrame,{icon:i.createElement(g.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeUpload});break;case p.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=i.createElement(o.AudioPlayerFrame,{icon:i.createElement(g.default,{name:"audio-upload"}),outgoingMsg:t.isSentByMe,action:this.resumeRemoteUpload});break;case p.MEDIA_DATA_STAGE.ERROR_MISSING:e=i.createElement(o.AudioPlayerFrame,{icon:i.createElement(g.default,{name:"audio-play",directional:!0}),outgoingMsg:t.isSentByMe,action:this.showMediaMissing});break;case p.MEDIA_DATA_STAGE.UPLOADING:case p.MEDIA_DATA_STAGE.SENDING:var h=a.mediaStage===p.MEDIA_DATA_STAGE.UPLOADING;e=i.createElement(o.AudioPlayerFrame,{action:h?this.cancelUpload:void 0,canCancel:h,fileSize:a.size,outgoingMsg:t.isSentByMe,spinner:!0});break;default:e=i.createElement(o.AudioPlayerFrame,{spinner:!0,outgoingMsg:t.isSentByMe})}var f=this.props.displayAuthor&&!t.isSentByMe&&t.isGroupMsg?i.createElement(l.default,{msg:t,contact:t.senderObj}):null,m=i.createElement(c.default,{id:t.senderObj.id,size:55});return i.createElement(n.default,{msg:t,quotedMsg:this.props.quotedMsg,author:f,status:s,player:e,avatar:m,displayType:this.props.displayType})}}E.CONCERNS={msg:["ack","isSentByMe","isGroupMsg","senderObj","id"],mediaData:["duration","type","mediaStage","renderableUrl","size"]},E.displayName="Ptt";var S=(0,v.default)(E,E.CONCERNS);t.default=S},30454:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.playMidPttTone=function(){i.play()},t.playEndPttTone=function(){n.play()};var s=r(a(50935)),i=new window.Audio(s.default.PTT_MIDDLE_TONE_PATH),n=new window.Audio(s.default.PTT_END_TONE_PATH)},3406:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(d.icon,function({played:e,isSentByMe:t}){return t?d.gray:e?d.blue:d.green}(e),{[d.outgoing]:e.isSentByMe,[d.incoming]:!e.isSentByMe});return n.createElement("div",{className:o.default.wrapper},n.createElement("div",{className:t},n.createElement(l.default,{name:"ptt-status"})))};var i=s(a(72779)),n=r(a(2784)),o=s(a(12626)),l=s(a(82631)),d={incoming:o.default.incoming,outgoing:o.default.outgoing,green:o.default.green,blue:o.default.blue,gray:o.default.gray,icon:o.default.icon}},11178:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=M;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=r(a(21644)),d=s(a(69353)),u=s(a(81031)),c=s(a(15118)),h=s(a(8584)),f=s(a(47609)),p=a(84990),{CHAT:m,IMAGE:_,VIDEO:v,LOCATION:g,DOCUMENT:E,VCARD:S,MULTI_VCARD:C,PRODUCT:y,PAYMENT:b,ORDER:T}=o.default.MSG_TYPE;function M(e){var t,{msg:a,theme:r}=e,{type:s}=(0,f.default)(a,["type"]);if(a.isViewOnce)return null;function o(){return["conversation","starred","msgInfo"].includes(e.theme)?58:79}switch(a.type){case _:case v:case E:case y:var M=(0,l.isMediaTypeWithImage)(s),{preview:N,fullPreviewData:I}=a.mediaData;(M||null!=N||null!=I)&&(t=n.createElement(l.default,{mediaData:a.mediaData}));break;case g:a.body&&(t=n.createElement("div",{"data-testid":"msgImage",style:{backgroundImage:"url(data:image/jpeg;base64,".concat(a.body,")")},className:h.default.image}));break;case m:a.thumbnail&&(t=n.createElement("div",{"data-testid":"msgImage",style:{backgroundImage:'url("data:image/jpeg;base64,'.concat(a.thumbnail,'")')},className:h.default.image}));break;case S:t=n.createElement(u.default,{wid:c.default.getThumbnailWidFromVcard(a.vcard),thumb:(0,p.vcardThumbnail)(a.vcard),quoted:!0,square:!0,size:o()});break;case C:t=n.createElement(u.default,{size:o(),square:!0,quoted:!0});break;case b:a.paymentAmount1000&&a.paymentCurrency&&(t=n.createElement(d.default,{currency:a.paymentCurrency,amount1000:a.paymentAmount1000,isQuoted:!0,isQuotedInComposeBox:"composeBox"===r}));break;case T:a.thumbnail&&(t=n.createElement("div",{className:h.default.image,style:{backgroundImage:'url("data:image/jpeg;base64,'.concat(a.thumbnail,'")')}}))}var P=(0,i.default)(h.default.imageWrapper,{[h.default.composeBox]:"composeBox"===r,[h.default.statusV3]:"statusV3"===r,[h.default.isPayment]:a.type===b});return t?n.createElement("div",{className:P},n.createElement("div",{className:h.default.msgImage},t)):null}M.displayName="QuotedMedia"},93456:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=a(91460),o=r(a(2784)),l=s(a(71874)),d=s(a(65468)),u=s(a(79711)),c=s(a(50935)),h=a(19741),f=a(95595),p=s(a(98294)),m=s(a(17957)),_=a(83974),v=s(a(58885)),g=s(a(55043)),E=s(a(13531)),S=s(a(11178)),C=s(a(40675)),y=s(a(45204)),b=a(64658),T=s(a(57185)),M=r(a(75074)),N=s(a(68384)),I=a(75637);class P extends o.PureComponent{constructor(...e){super(...e),this.ProductCatalogSession=new g.default,this.state={hover:!1},this.onClick=()=>{var{rootMsg:e,msg:t}=this.props;if(t.isStatusV3)e&&e.isQuotedMsgAvailable?T.default.find(t.sender).then((r=>{var s=a(82163).default;u.default.openModalMedia(o.createElement(s,{removeTopDrawer:!1,statusV3:r,msgKey:t.id,onMsgNotFound:()=>{e&&(e.isQuotedMsgAvailable=!1)}}),{transition:"quoted-status-v3-modal"})})):u.default.openToast(o.createElement(M.default,{msg:m.default.t(1348),id:(0,M.genId)()}));else{if(null!=t.asProductInquiry)return this._onProductInquiry(t.asProductInquiry);if(!e||e.isQuotedMsgAvailable){var r=t.id,s=t.chat,i=v.default.get(r),l=s.getSearchContext(i||r,null==e?void 0:e.unsafe());l&&(l.slideToMsg=!0),u.default.openChatAt(s,l).then((e=>{if(e){var a=v.default.get(t.id);a&&(0,n.delayMs)(500).then((()=>{u.default.openMediaViewerForAlbumMedia((0,b.unproxy)(a))}))}})),i||l.collection.loadAroundPromise.catchType(h.E404,(()=>{var t=null==e?void 0:e.unsafe(),a=null==t?void 0:t.chat;null!=t&&null!=a&&u.default.openChatAt(a,a.getSearchContext(t))}))}}},this.onMouseOver=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseEnter=()=>{this.hoverable()&&this.setState({hover:!0})},this.onMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})}}componentDidMount(){var{msg:e,t}=this.props,a=e.asProductInquiry;null!=a&&(a.businessOwnerJid&&(0,I.createWid)(a.businessOwnerJid)&&(null!=t&&(a.t=t),d.default.addMsgAsProduct((0,b.unproxy)(a.unsafe()))))}_onProductInquiry(e){var{t}=this.props,a=e.businessOwnerJid&&(0,I.createWid)(e.businessOwnerJid);if(a){var r=d.default.get(a);if(r){var s=e.productId&&r.productCollection.get(e.productId),i=e.productId&&r.msgProductCollection.get(e.productId);if(s||i){var n=i;if(s&&null!=t&&s.t>=t&&(n=s,i&&r.productCollection.remove(i)),n)return(0,_.logProductInquiryClick)({product:(0,b.unproxy)(n),catalogSessionId:this.ProductCatalogSession.toString()}),u.default.openDrawerRight(o.createElement(E.default,{product:n,chat:e.chat,refreshCarousel:!0,sessionId:this.ProductCatalogSession.toString()}),"slide-left",this.props.uim)}}}}hoverable(){return!this.state.hover&&!!this.props.rootMsg}render(){var{msg:e,displayType:t,chat:a,rootMsg:r,composeQuotedMsgRemoteJid:s}=this.props,n=a.assignedColor(e.sender),d=[c.default.DISP_TYPE.CONVERSATION,c.default.DISP_TYPE.STARRED_MSGS].includes(t),u=s||r&&r.quotedRemoteJid,h=d?"button":null,p=o.createElement(l.default,{msg:e,contact:e.senderObj,role:h,chat:a,displaySelf:N.default.equals(e.sender,(0,f.getMaybeMeUser)()),quotedRemoteJid:u,disableClick:!0}),m=(0,i.default)(C.default.quotedMsg,{[C.default.statusV3QuotedMsg]:"statusV3"===this.props.theme,[C.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme,[C.default.hover]:this.state.hover}),_=o.createElement("div",{className:C.default.msgText},p,o.createElement(y.default,{msg:e,theme:this.props.theme})),v=t===c.default.DISP_TYPE.STARRED_MSGS?"starred":this.props.theme;return o.createElement("div",{className:C.default.container,onMouseOver:d?this.onMouseOver:null,onMouseEnter:d?this.onMouseEnter:null,onMouseLeave:d?this.onMouseLeave:null},o.createElement("div",{className:m,role:h,onClick:d?this.onClick:null},o.createElement("span",{className:(0,i.default)("bg-color-".concat(n),C.default.colorBar)}),o.createElement("div",{className:C.default.msgBody,dir:d?null:e.dir},_),o.createElement(S.default,{msg:e.unsafe(),theme:v})))}}P.displayName="QuotedMsg";var A=(0,p.default)(P);t.default=A},45204:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=a(91460),o=r(a(2784)),l=s(a(19899)),d=s(a(50935)),u=s(a(91581)),c=r(a(96452)),h=s(a(73540)),f=a(62902),p=s(a(17957)),m=s(a(20642)),_=s(a(40210)),v=s(a(56266)),g=a(72457),E=s(a(34964)),S=s(a(72259)),C=s(a(77837)),y=a(36465),b=s(a(72424)),T=s(a(82562)),{CHAT:M,IMAGE:N,VIDEO:I,AUDIO:P,STICKER:A,PAYMENT:O,ORDER:D}=d.default.MSG_TYPE;class w extends o.PureComponent{constructor(...e){super(...e),this._handleDownloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}componentDidMount(){var{listeners:e,msg:t}=this.props;t.type===A&&t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}),t.type===d.default.MSG_TYPE.DOCUMENT&&t.isVcardOverMmsDocument&&(!t.mediaData||!t.mediaData.mediaBlob)&&t.isTrusted()&&t.size<=1024*b.default.mmsVcardAutodownloadSizeKb&&t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:_.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1}).checkpoint(this.props.rejectOnUnmount()).then((()=>(0,n.delayMs)(0))).catchType(c.Unmount,(()=>{})),t.type===d.default.MSG_TYPE.DOCUMENT&&t.mediaData&&t.isVcardOverMmsDocument&&e.add(t.mediaData,"change:parsedVcards",(()=>{this.forceUpdate()}))}render(){var{msg:e,theme:t}=this.props,a=[];e.hasSymbol()&&e.type!==A&&e.type!==D&&a.push(o.createElement(v.default,{msg:e.unsafe(),key:"msg-symbol",viewOnceStatic:!0})),(e.type!==I||e.isGif||e.caption||e.isViewOnce)&&e.type!==P||a.push(l.default.durationStr(Number(e.duration))+" ");var r,s,n=f.Configuration.QuotedMention({mentions:e.mentionMap()});if(e.type===M||e.type===N||e.type===I||e.isFromTemplate||e.isDynamicReplyButtonsMsg)s=(null===(r=e.asViewOnce)||void 0===r?void 0:r.isViewOnce)?e.type===N?p.default.t(1472):p.default.t(1477):e.isFromTemplate&&e.type===d.default.MSG_TYPE.CHAT&&e.title?"*"+e.title+"*\n"+e.body:(0,h.default)(e.unsafe(),!1),a.push(o.createElement(u.default,{formatters:n,className:"quoted-mention",text:s,textLimit:e.initialPageSize,direction:"auto",key:"status"}));else if(A===e.type){var c="composeBox"===this.props.theme?"composeBoxQuoted":"quoted";a.push(o.createElement(T.default,{key:"sticker",mediaData:e.mediaData,theme:c,downloadMedia:this._handleDownloadMedia}))}else e.type===O?e.paymentAmount1000&&e.paymentCurrency?a.push(o.createElement(E.default,{key:"payment",subtype:e.subtype,receiverJid:e.paymentMessageReceiverJid,isQuoted:!0})):a.push(p.default.t(1774)):e.type===D?a.push(o.createElement(g.OrderDescription,{msg:e.unsafe(),showMessage:!0})):a.push(o.createElement(u.default,{formatters:n,className:"quoted-mention",text:(0,y.formatQuotedMsg)(e),textLimit:e.initialPageSize,direction:"auto",key:"status"}));var m=(0,i.default)(C.default.messageText,{[C.default.composeBoxQuotedMsg]:"composeBox"===this.props.theme}),_="conversation"===t||"starred"===t?"button":null;return o.createElement("div",{className:m,dir:e.dir,role:_},a)}}w.displayName="QuotedMsgContent";var R=(0,S.default)((0,m.default)(w));t.default=R},36465:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatQuotedMsg=function(e){var{MSG_TYPE:t}=n.default;switch(e.type){case t.DOCUMENT:return e.isVcardOverMmsDocument?h(e):(0,l.default)(e.unsafe());case t.MULTI_VCARD:return c(e);case t.PRODUCT:return f(e);default:return(0,l.default)(e.unsafe())}},t.formatMultiVcardText=c,t.formatVcardOverMmsText=h,t.formatProductText=f;var i=s(a(36585)),n=s(a(50935)),o=r(a(37356)),l=s(a(73540)),d=s(a(17957)),u=a(84990);function c(e){var t=e.vcardList.length;return t>0?d.default.t(1033,{count:t,_plural:t}):d.default.t(1032)}function h(e){var t;if(e.mediaData.parsedVcards){var{parsedVcards:a}=e.mediaData;return a.length>1?d.default.t(1033,{count:a.length,_plural:a.length}):(0,u.vcardGetNameFromParsed)(a[0])||d.default.t(1622)}return null!=e.pageCount?d.default.t(1033,{count:e.pageCount,_plural:e.pageCount}):(null===(t=e.mediaData)||void 0===t?void 0:t.filename)||d.default.t(1624)}function f({title:e,description:t,currencyCode:a,priceAmount1000:r,salePriceAmount1000:s}){var l;if(null!=a&&null!=r){var d=e=>o.format(a,e);l=null!=s?"~".concat(d(r),"~ ").concat(d(s)):d(r)}else t&&(l=(0,i.default)(t,{length:n.default.MAX_REPLY_PRODUCT_DESC_LENGTH}));return[(0,i.default)(e,{length:n.default.MAX_REPLY_PRODUCT_TITLE_LENGTH}),l].filter(Boolean).join("\n")}},77674:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(43334)),l=s(a(79711)),d=s(a(91581)),u=s(a(17957)),c=s(a(28670));class h extends n.PureComponent{constructor(...e){super(...e),this.state={hover:!1},this.onMouseOver=()=>{this.setState({hover:!0})},this.onMouseEnter=()=>{this.setState({hover:!0})},this.onMouseLeave=()=>{this.setState({hover:!1})},this._getGroupName=()=>{var{quotedGroupJid:e}=this.props,t=o.default.get(e);return t&&t.formattedTitle},this.onClick=()=>{var{quotedGroupJid:e}=this.props;o.default.find(e).then((e=>l.default.openChatBottom(e)))}}hoverable(){return!this.state.hover&&!this.props.isComposePreview}render(){var{isComposePreview:e}=this.props,t=this._getGroupName();if(!t)return null;var a=(0,i.default)(c.default.quotedMsg,{[c.default.hover]:this.state.hover,[c.default.composeBoxQuotedMsg]:!!e});return n.createElement("div",{onMouseOver:this.onMouseOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,className:a},n.createElement("div",{className:c.default.msg,role:e?"none":"button",onClick:this.onClick},n.createElement("span",{className:c.default.colorBar}),n.createElement("div",{className:c.default.msgBody},n.createElement(d.default,{className:"quoted-mention",text:u.default.t(1224,{groupName:t}),direction:"auto",key:"status"}))))}}t.default=h,h.displayName="QuotedAdminMsgGroupName"},56089:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{msg:t}=e,a=t.isSentByMe?n.default.t(1267):n.default.t(1265);return i.createElement(u.default,{msg:t},i.createElement(o.default,{msg:t.unsafe(),theme:"placeholder"},i.createElement("div",{className:l.default.icon},i.createElement(d.default,{name:"recalled"})),a))};var i=s(a(2784)),n=(r(a(50935)),r(a(17957))),o=r(a(97816)),l=r(a(87472)),d=r(a(82631)),u=r(a(20385))},58940:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n.default.durationStr(e.currentTime)+" / "+n.default.durationStr(e.duration);return i.createElement(o.default,{value:e.currentTime,valueText:t,min:0,max:e.duration,smallSkip:1,largeSkip:10,onChange:e.onChange,disabled:e.disabled,theme:l(e)})};var i=s(a(2784)),n=r(a(19899)),o=s(a(14240));function l({outgoing:e,played:t}){return e?t?o.SmoothRangeInputTheme.AUDIO_OUTGOING_PLAYED:o.SmoothRangeInputTheme.AUDIO_OUTGOING_UNPLAYED:t?o.SmoothRangeInputTheme.AUDIO_INCOMING_PLAYED:o.SmoothRangeInputTheme.AUDIO_INCOMING_UNPLAYED}},76772:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(18164),o=(r(a(50935)),r(a(91581))),l=r(a(17957)),d=r(a(67212)),u=r(a(97816)),c=r(a(71726)),h=r(a(65857)),f=r(a(40207));class p extends i.Component{render(){var e,t=this.props.msg,a=t.paymentNoteMsg&&t.paymentNoteMsg.body,r=null;if(a){var s=(0,n.Conversation)({mentions:t.mentionMap(),links:t.getLinks(),trusted:t.isTrusted()});r=i.createElement("div",{className:h.default.caption},i.createElement(u.default,{msg:t.unsafe()},i.createElement(o.default,{text:a,selectable:!0,formatters:s,dirMismatch:t.rtl!==l.default.isRTL(),direction:t.dir})))}else e=i.createElement("div",{className:h.default.meta},i.createElement(c.default,{msg:t}));return i.createElement(d.default,{displayAuthor:this.props.displayAuthor,displayType:this.props.displayType,hasCaption:!!r,msg:t,quotedMsg:this.props.quotedMsg,hideMeta:!a},this.props.paymentInfo,e,r)}}p.CONCERNS={msg:["rtl","dir","isGroupMsg","isPSA","isSentByMe","senderObj","paymentNoteMsg"]},p.displayName="SendOrRequestPaymentMessage";var m=(0,f.default)(p,p.CONCERNS);t.default=m},14240:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{value:t,valueText:a,min:r,max:s,smallSkip:l,largeSkip:f,onChange:p,disabled:m,theme:_}=e,[v,g]=(0,o.useState)(null),[E,S]=(0,o.useState)(!1),C=(0,o.useCallback)((()=>{S(!0)}),[S]),y=(0,o.useCallback)((()=>{S(!1)}),[S]),b=null!=v?v:t,T=100*(0,i.default)((b-r)/(s-r),0,1),M={width:"".concat(T,"%")},N=(0,n.default)(u.default.container,function(e){switch(e){case c.AUDIO_OUTGOING_UNPLAYED:return u.default.containerOutgoingUnplayed;case c.AUDIO_OUTGOING_PLAYED:return u.default.containerOutgoingPlayed;case c.AUDIO_INCOMING_UNPLAYED:return u.default.containerIncomingUnplayed;case c.AUDIO_INCOMING_PLAYED:return u.default.containerIncomingPlayed}}(_),{[u.default.containerDisabled]:m}),I=(0,o.useRef)(),P=(0,o.useRef)(),A=(0,o.useRef)(),O=(0,o.useCallback)((e=>{var t=(0,d.default)(P.current,"minPxRef.current"),a=(0,d.default)(A.current,"maxPxRef.current"),n=e.clientX,o=(0,i.default)((n-t)/(a-t),0,1);g(r+o*(s-r))}),[r,s]),D=(0,o.useCallback)((e=>{e.preventDefault(),0!==e.buttons?O(e):y()}),[y,O]),w=(0,o.useCallback)((()=>{y();var e=(0,d.default)(v,"uncommittedValue");null==p||p(e),g(null)}),[y,p,v]);(0,o.useEffect)((()=>{if(E)return window.addEventListener("mousemove",D),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",w)}}),[D,w,E]);var R={transform:"translateX(".concat(T,"%)")};return o.createElement("div",{className:N,role:"slider","aria-valuenow":t,"aria-valuetext":a,"aria-valuemin":r,"aria-valuemax":s,tabIndex:"0",onMouseDown:e=>{var t;e.preventDefault();var a=(0,d.default)(null===(t=I.current)||void 0===t?void 0:t.getBoundingClientRect(),"travelContainerRef.current?.getBoundingClientRect()");P.current=a.left,A.current=a.left+a.width,C(),O(e)},onKeyDown:e=>{if(!m){var a;switch(e.key){case h.ARROW_RIGHT:case h.ARROW_UP:a=l;break;case h.ARROW_LEFT:case h.ARROW_DOWN:a=-l;break;case h.PAGE_UP:a=f;break;case h.PAGE_DOWN:a=-f}if(null!=a){var n=(0,i.default)(t+a,r,s);null==p||p(n)}}}},o.createElement("div",{className:u.default.track}),o.createElement("span",{className:u.default.progress,style:M}),o.createElement("div",{className:u.default.thumbTravelContainer,ref:I},o.createElement("div",{className:u.default.thumbContainer,style:R},o.createElement("div",{className:u.default.thumb}))))},t.SmoothRangeInputTheme=void 0;var i=s(a(27875)),n=s(a(72779)),o=r(a(2784)),l=s(a(10792)),d=s(a(61941)),u=s(a(5593)),c=a(28103).Mirrored(["AUDIO_OUTGOING_UNPLAYED","AUDIO_OUTGOING_PLAYED","AUDIO_INCOMING_UNPLAYED","AUDIO_INCOMING_PLAYED"]);t.SmoothRangeInputTheme=c;var{KEYBOARD_EVENT_KEY_VALUE:h}=l.default},20299:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(75459),l=s(a(3456)),d=s(a(40207));class u extends n.PureComponent{render(){var{children:e,className:t,msg:a}=this.props;if(!a)return n.createElement(n.Fragment,null,e);var r=[a.broadcast,a.isSentByMe,a.labels&&a.labels.length&&(0,o.canDisplayLabel)(),a.star].filter(Boolean).length,s=[l.default.icons1,l.default.icons2,l.default.icons3,l.default.icons4],d=r>0?s[r-1]:"";return n.createElement("span",{className:t},e,n.createElement("span",{className:(0,i.default)(l.default.spacer,d)}))}}u.CONCERNS={msg:["broadcast","isEphemeral","isSentByMe","labels","star"]},u.displayName="SpacerText";var c=(0,d.default)(u,u.CONCERNS);t.default=c},85454:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(19899)),o=r(a(50935)),l=r(a(7470)),d=r(a(46478)),u=a(62436),c=r(a(91581)),h=r(a(6660)),f=r(a(41117)),p=r(a(44343)),m=r(a(17957)),_=r(a(20642)),v=a(97526),g=r(a(61941)),E=r(a(51549)),S=r(a(82631)),C=r(a(3111)),y=r(a(58355));class b extends i.Component{constructor(e){super(e),this._setWrapperRef=e=>{this._wrapperRef=e},this._setGalleryMsgRef=e=>{this._galleryMsgRef=e},this._setHotKeysRef=e=>{this._hotKeysRef=e},this.onSelectionChange=(e,t)=>{var a="focus"===e;if(a){var r=this._hotKeysRef;r&&(h.default.focus(r),t&&(0,u.scrollIntoViewIfNeeded)(r))}this.setState({current:a})},this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._hotKeysRef;a&&(h.default.focus(a),t&&(0,u.scrollIntoViewIfNeeded)(a))}this.setState({active:!!e})},this.mouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.onEnter=e=>{e.stopPropagation(),e.preventDefault(),this.props.onClickMsg&&this.props.onClickMsg(this.props.msg)},this.openContextMenu=()=>{this._wrapperRef&&this._wrapperRef.openContextMenu()},this.onFocus=()=>{this.setState({focus:!0}),this.indicateFocus()},this.onBlur=()=>{this.setState({focus:!1})},this.indicateFocus=()=>{var e;null===(e=this._galleryMsgRef)||void 0===e||e.indicateFocus()},this.getWrapperRef=()=>this._wrapperRef;var{currSelection:t,activeSelection:a,msg:r}=e;this.state={hover:!1,current:!!t&&t.value===r,active:!!a&&a.value===r,focus:!1}}componentDidMount(){var{msg:e,currSelection:t,activeSelection:a,listeners:r}=this.props;t&&r.add(t,e.id.toString(),this.onSelectionChange),a&&r.add(a,e.id.toString(),this.onActiveChange)}getContainerElement(){return(0,g.default)(this._hotKeysRef,"this._hotKeysRef")}render(){var{msg:e,selectedMessages:t,displayType:a}=this.props,r=e.senderObj.formattedName,s=e.chat.isUser?l.default.assertGet(e.to).formattedName?l.default.assertGet(e.to).formattedName:(0,C.default)(e.to):e.chat.title(),u=a===o.default.DISP_TYPE.GALLERY?null:i.createElement("div",{className:E.default.title},i.createElement("div",{className:E.default.titleMain},i.createElement("div",{className:E.default.avatar},i.createElement(d.default,{id:e.senderObj.id,size:26})),i.createElement(c.default,{className:E.default.author,text:r,direction:"auto",titlify:!0}),i.createElement("span",{className:E.default.divider}),i.createElement(c.default,{className:E.default.chat,text:s,direction:"auto",titlify:!0})),i.createElement("div",{className:E.default.meta,dir:"auto"},n.default.relativeStr(e.t)),i.createElement("div",{className:E.default.chevron},i.createElement(S.default,{name:"chevron-right-alt",directional:!0}))),h={enter:this.onEnter};h[m.default.LR("right","left")]=this.openContextMenu;var _=this.props.selectable||this.state.hover&&a===o.default.DISP_TYPE.GALLERY;return i.createElement(p.default,{onRef:this._setHotKeysRef,handlers:h,onFocus:this.onFocus,onBlur:this.onBlur},i.createElement(f.default,{ref:this._setGalleryMsgRef,hover:this.state.hover,current:this.state.current&&this.state.focus,active:this.state.active,onClick:()=>this.props.onClickMsg&&this.props.onClickMsg(e,t&&!t.isSelected(e)),onMouseEnter:this.state.hover?null:this.mouseEnter,onMouseOver:this.state.hover?null:this.mouseOver,onMouseLeave:this.state.hover?this.mouseLeave:null},u,i.createElement(y.default,{msg:e,key:e.id.toString(),ref:this._setWrapperRef,current:this.state.current&&this.state.focus,displayType:a||o.default.DISP_TYPE.STARRED_MSGS,isMsgVisible:this.props.isMsgVisible,selectable:_,selectedMessages:t,onMessageSelect:this.props.onMessageSelect,position:v.MsgPosition.END,tailOverride:"left",onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick})))}}b.displayName="StarredMsg";var T=(0,_.default)(b);t.default=class extends T{getWrapperRef(){return this.getComponent().getWrapperRef()}getContainerElement(){return this.getComponent().getContainerElement()}}},76841:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(17957)),d=s(a(59495)),u=s(a(82631)),c=s(a(47609)),h=o.default.MSG_TYPE;var f=function({msg:e}){var t,a,r,{ack:s,isMedia:f,isViewOnce:p,caption:m,type:_,loc:v,isLive:g}=(0,c.default)(e,["ack","isMedia","isViewOnce","caption","type","loc","isLive"]),E=f&&!m&&!p&&_!==h.AUDIO||_===h.LOCATION&&!v&&!g;return s<o.default.ACK.SENT?(t="msg-time",a=l.default.t(17)):s===o.default.ACK.SENT?(t="msg-check",a=l.default.t(19)):s===o.default.ACK.RECEIVED?(t="msg-dblcheck",a=l.default.t(16)):(t="msg-dblcheck",a=l.default.t(18),r=d.default.ackBlue),n.createElement(u.default,{"aria-label":" ".concat(a," "),name:t,className:(0,i.default)(r,{[d.default.light]:E})})};t.default=f},38906:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(71874)),l=s(a(131)),d=a(97526),u=s(a(71726)),c=s(a(40210)),h=s(a(40207)),f=s(a(82562)),p=s(a(64061)),m=s(a(62884));class _ extends n.PureComponent{constructor(...e){super(...e),this._stopPropagation=e=>{e.stopPropagation()},this._handleDownloadMedia=()=>this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}componentDidMount(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}render(){var e=this.props.msg,t=this.props.displayAuthor&&!e.isSentByMe&&e.isGroupMsg,a=t?n.createElement("div",{className:p.default.author},n.createElement(o.default,{msg:e,contact:e.senderObj})):null,r=this.props.quotedMsg?n.createElement("div",{className:p.default.quote},this.props.quotedMsg):null,s=(0,i.default)(p.default.bubble,{[p.default.hasAuthor]:t,[p.default.isFirst]:this.props.position===d.MsgPosition.FRONT||this.props.position===d.MsgPosition.SINGLE,[p.default.isTransparent]:!e.quotedMsg&&!e.ctwaContext});return n.createElement("div",{className:s,onClick:this._stopPropagation},a,r,n.createElement(l.default,{msg:e.unsafe(),wrapperClass:p.default.ctwaContext}),n.createElement("div",{className:p.default.body},n.createElement(m.default,{mediaData:this.props.mediaData,msg:e},n.createElement(f.default,{mediaData:this.props.mediaData,theme:"conversation",isNewMsg:e.isNewMsg,downloadMedia:this._handleDownloadMedia,forwardRef:this.props.forwardRef,animateOnView:this.props.animateOnView})),n.createElement("div",{className:p.default.meta},n.createElement(u.default,{msg:e}))))}}_.CONCERNS={msg:["isNewMsg","isSentByMe","isGroupMsg","senderObj","quotedMsg","ctwaContext"]},_.displayName="StickerBubble";var v=(0,h.default)(_,_.CONCERNS);t.default=v},62884:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(69345)),d=r(a(68084)),u=a(96645),c=s(a(40210)),h=s(a(10667)),f=s(a(40207)),p=s(a(96410));class m extends n.PureComponent{constructor(...e){super(...e),this._showMediaMissing=()=>{o.default.openModal(n.createElement(l.default,{msg:this.props.msg.unsafe()}))},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:c.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this._cancelDownload=()=>{this.props.msg.cancelDownload()},this._cancelUpload=()=>{this.props.msg.cancelUpload()},this._resumeUpload=()=>{this.props.msg.resumeUpload()},this._resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()}}render(){var e,t,a=this.props.mediaData,{mediaStage:r}=a;switch(r){case u.MEDIA_DATA_STAGE.RESOLVED:e=null,t=null;break;case u.MEDIA_DATA_STAGE.FETCHING:e=this._cancelDownload,t=n.createElement(d.PendingCancel,null);break;case u.MEDIA_DATA_STAGE.NEED_POKE:e=this._downloadMedia,t=n.createElement(d.Download,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.UPLOADING:e=this._cancelUpload,t=n.createElement(d.PendingCancel,null);break;case u.MEDIA_DATA_STAGE.NEED_UPLOAD:e=this._resumeUpload,t=n.createElement(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:e=this._resumeRemoteUpload,t=n.createElement(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.ERROR_MISSING:e=this._showMediaMissing,t=n.createElement(d.Upload,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:e=this._showMediaMissing,t=n.createElement(d.Download,{filesize:a.size});break;case u.MEDIA_DATA_STAGE.SENDING:case u.MEDIA_DATA_STAGE.DECRYPTING:case u.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case u.MEDIA_DATA_STAGE.INIT:case u.MEDIA_DATA_STAGE.PREPARING:case u.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case u.MEDIA_DATA_STAGE.REUPLOADING:case u.MEDIA_DATA_STAGE.EXISTS:t=n.createElement(d.Pending,null);break;case u.MEDIA_DATA_STAGE.PROGRESSIVE_READY:throw new Error("invalid value for sticker mediaStage '".concat(r,"'"))}return n.createElement("div",{className:(0,i.default)(h.default.thumb,p.default.cursorAuto),onClick:e},t,this.props.children)}}m.CONCERNS={mediaData:["mediaStage","size"]},m.displayName="StickerMediaControl";var _=(0,f.default)(m,m.CONCERNS);t.default=_},75681:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(91581)),o=r(a(33492)),l=r(a(74824)),d=a(58355);class u extends i.PureComponent{constructor(...e){super(...e),this.state={date:void 0,visible:!0}}updateDateMarkerText(e){this.setState({date:e})}setVisibility(e){this.setState({visible:e})}render(){var e;return this.state.date&&this.state.visible&&(e=i.createElement("div",{className:o.default.sticky},i.createElement(d.SystemBubble,{theme:"sticky"},i.createElement(n.default,{direction:"auto",text:this.state.date})))),i.createElement(l.default,{transitionName:"slide-down-date"},e)}}t.default=u,u.displayName="StickyDateMarker"},65411:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(17957)),d=s(a(60769)),u=s(a(82631));function c(e){var t,a,{msg:r,link:s,displayType:c}=e;if(!r&&!s)return null;if(null==r||null===(t=r.ctwaContext)||void 0===t?void 0:t.isSuspiciousLink)a=l.default.t(1383);else if(s)s.suspiciousCharacters&&s.suspiciousCharacters.size&&(a=l.default.t(1383));else if(r){var h=r.getSuspiciousLinks().length;if(h)a=1===r.getLinks().length||c===o.default.DISP_TYPE.GALLERY?l.default.t(1383):l.default.t(1384,{count:h,_plural:h})}return a?n.createElement("div",{className:(0,i.default)(d.default.container,{[d.default.isLinkMsg]:Boolean(s),[d.default.ctwaContainer]:null!=(null==r?void 0:r.ctwaContext)})},n.createElement(u.default,{name:"alert",display:"inline",className:d.default.icon}),n.createElement("span",{className:d.default.text},a)):null}c.displayName="SuspiciousLabel"},48707:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(64)),l=s(a(79711)),d=s(a(50935)),u=r(a(35387)),c=s(a(17957)),h=a(90088),f=s(a(20642)),p=s(a(41967)),m=a(37960),_=s(a(40207)),v=s(a(82338)),g=s(a(82631)),E=s(a(4353)),{QUICK_REPLY:S,URL:C,CALL:y}=d.default.TEMPLATE_BUTTON_SUBTYPE;function b(e,t){var a=(0,h.findLink)(e,!1,t.from);if(a&&a.suspiciousCharacters)return l.default.openModal(n.createElement(v.default,{link:a}));var r=n.createElement(o.default,{a8nText:"popup-controls-go",type:"primary",onClick:()=>function(e){(0,u.openExternalLink)(e),l.default.closeModal()}(e),key:0},c.default.t(1640)),s=n.createElement(o.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:()=>l.default.closeModal(),key:1},c.default.t(1593)),i=d.default.TEMPLATE_URL_START+d.default.TEMPLATE_URL_END;l.default.openModal(n.createElement(p.default,{title:c.default.t(1147),actions:[s,r]},n.createElement("div",null,c.default.t(1148)),n.createElement(u.default,{href:e,isLongTemplateUrl:e.length>i},e)))}class T extends n.PureComponent{constructor(...e){super(...e),this.handleClick=e=>{var t,{subtype:a,url:r,displayText:s,selectionId:i,id:d}=e;a===y?(t=n.createElement(o.default,{a8nText:"popup-controls-ok",type:"primary",onClick:()=>l.default.closeModal(),key:0},c.default.t(1761)),l.default.openModal(n.createElement(p.default,{actions:[t]},c.default.t(406)))):a===C&&r?b(r,this.props.msg):a===S&&(0,m.sendTextMsgToChat)(this.props.chat,s,{quotedMsg:this.props.msg,selectedIndex:parseInt(d,10),selectedId:i}).then((()=>{e.selected=!0}))}}componentDidMount(){var{msg:e}=this.props;e.buttons&&e.buttons.length&&e.buttons.forEach((e=>this.props.listeners.add(e,"change:selected",(()=>this.forceUpdate()))))}render(){var e,{msg:t}=this.props;return t.buttons&&(e=t.buttons.map((e=>{var t;switch(e.subtype){case y:t=n.createElement(g.default,{name:"hsm-call",className:E.default.icon});break;case C:t=n.createElement(g.default,{name:"hsm-link",className:E.default.icon})}var a=e.selected?void 0:()=>this.handleClick(e);return n.createElement("button",{key:e.id,className:(0,i.default)(E.default.actionButton,{[E.default.firstButton]:0===parseInt(e.id,10)&&e.subtype!==S,[E.default.disabled]:e.selected}),onClick:a},t,n.createElement("span",{className:E.default.actionText},e.displayText))}))),n.createElement("div",{className:(0,i.default)({[E.default.quickReply]:t.isQuickReply,[E.default.callUrl]:!t.isQuickReply})},n.createElement("div",{className:E.default.buttonContainer},e))}}T.CONCERNS={msg:["buttons","isQuickReply","from"]},T.displayName="TemplateButtons";var M=(0,f.default)((0,_.default)(T,T.CONCERNS));t.default=M},20783:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=s(a(72779)),n=r(a(2784)),o=s(a(50935)),l=s(a(91581)),d=a(38311),u=s(a(17957)),c=s(a(97816)),h=s(a(52283));function f(e){var{dir:t,footer:a,isShown:r,msg:s,rtl:f,type:p,trusted:m}=e,_=f!==u.default.isRTL();if(r&&a){var v=(0,i.default)(h.default.footer,{[h.default.isMedia]:p!==o.default.MSG_TYPE.CHAT,[h.default.dirMismatch]:_}),{formatters:g,selectable:E}=s.isDynamicReplyButtonsMsg?(0,d.enableHeaderAndFooterFormatting)(s.getFooterLinks(),!0===m):{};return n.createElement(c.default,{className:v,spacer:!f,msg:s},n.createElement(l.default,{text:a,direction:t,dirMismatch:_,selectable:E,formatters:g}))}return null}f.displayName="TemplateMessageFooter"},29152:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=w;var i=s(a(72779)),n=r(a(2784)),o=a(25675),l=s(a(20458)),d=s(a(92969)),u=s(a(98788)),c=a(18164),h=s(a(50935)),f=s(a(131)),p=s(a(12396)),m=s(a(91581)),_=s(a(47642)),v=a(35387),g=a(38311),E=a(12023),S=s(a(17957)),C=s(a(9389)),y=s(a(97816)),b=s(a(71726)),T=a(62761),M=s(a(85791)),N=a(27985),I=s(a(65411)),P=s(a(20783)),A=s(a(25528)),O=s(a(20385)),D=s(a(24898));function w({msg:e,displayAuthor:t,trusted:a,displayType:r,quotedMsg:s}){var w,R,k,L;if(a&&(e.linkPreview||e.ctwaContext))if(e.ctwaContext)w=n.createElement(f.default,{msg:e.unsafe(),wrapperClass:A.default.linkPreview});else if(e.matchedText&&(0,E.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline))w=n.createElement("div",{className:A.default.linkPreview},n.createElement(D.default,{msg:e.unsafe()}));else{var x=(0,N.parseAPICmd)(e.matchedText);if(x.resultType===o.APICmd.GROUP_INVITE){if(w=n.createElement("div",{className:A.default.linkPreview},n.createElement(C.default,{msg:e.unsafe(),displayType:r,invite:!0})),r!==h.default.DISP_TYPE.GALLERY){var F=e.isSentByMe?S.default.t(776):S.default.t(763);R=n.createElement(l.default,{items:[{label:F,onClick:()=>{var t=e.matchedText;(0,v.openExternalLink)(t)}}]})}}else if(x.resultType===o.APICmd.CATALOG){if(w=n.createElement("div",{className:A.default.linkPreview},n.createElement(u.default,{msg:e.unsafe()})),r!==h.default.DISP_TYPE.GALLERY){var B=S.default.t(1193);R=n.createElement(l.default,{items:[{label:B,onClick:()=>{var t=e.matchedText;(0,v.openExternalLink)(t)}}]})}}else w=n.createElement("div",{className:A.default.linkPreview},n.createElement(C.default,{msg:e.unsafe(),displayType:r}))}var G,U,j=p.default.matchLargeEmojiPattern(e.body);if(j){var V=1===j.length&&p.default.getHeartEmojis().some((e=>p.default.normalizeEmoji(e)===p.default.normalizeEmoji(j[0])));k=n.createElement(M.default,{animation:V,emojis:j}),L=!0}else{k=n.createElement(_.default,{text:e.body,textLimit:e.initialPageSize},(t=>{var s=(0,c.Conversation)({mentions:e.mentionMap(),links:e.getLinks(t.textLimit),selectable:true,trusted:!0===a});return n.createElement(m.default,{text:e.body,className:r===h.default.DISP_TYPE.GALLERY?"message-text-link":"",dirMismatch:e.rtl!==S.default.isRTL(),direction:e.dir,inferLinesDirection:!0,formatters:s,selectable:true,textLimit:t.textLimit})}))}if(e.supportsMessageFooter){var{formatters:H,selectable:W}=e.isDynamicReplyButtonsMsg?(0,g.enableHeaderAndFooterFormatting)(e.getHeaderLinks(),!0===a):{};G=e.title?n.createElement("div",{className:A.default.title},n.createElement(m.default,{text:e.title,dirMismatch:e.rtl!==S.default.isRTL(),direction:e.dir,selectable:W,formatters:H})):null,U=n.createElement(P.default,{dir:e.dir,footer:e.footer,isShown:e.supportsMessageFooter,msg:e.unsafe(),rtl:e.rtl,trusted:a,type:e.type})}var Y,K=r!==h.default.DISP_TYPE.GALLERY&&!e.isPSA&&!L;s&&(Y=n.createElement("div",{className:A.default.quote},s));var q,z=t&&!e.isSentByMe&&e.isGroupMsg,Q=(0,T.showForwarded)(e),X=e.getSuspiciousLinks().length>0,J=!!R||!!e.hasTemplateButtons||!!e.isDynamicReplyButtonsMsg;return J&&(q=n.createElement("div",{className:A.default.meta},n.createElement(b.default,{msg:e}))),n.createElement(O.default,{msg:e,displayType:r,displayAuthor:t,hideMeta:J},n.createElement(d.default,{className:(0,i.default)({[A.default.hasAuthor]:z,[A.default.forwarded]:Q,[A.default.hasSuspiciousLinks]:X}),contact:e.senderObj,msg:e.unsafe()},Y,!e.ctwaContext&&n.createElement(I.default,{msg:e.unsafe(),displayType:r}),w,n.createElement(y.default,{msg:e.unsafe(),spacer:e.isFromTemplate||e.isDynamicReplyButtonsMsg?K&&!e.footer:K,"data-id":e.id},G,k,U,q),R))}w.displayName="Text"},20385:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=s(a(72779)),n=r(a(2784)),o=s(a(71874)),l=s(a(50935)),d=s(a(4336)),u=s(a(71726)),c=a(62761),h=s(a(87413));function f(e){var t=(0,i.default)(h.default.bubble,{[h.default.isPSA]:e.msg.isPSA}),a=(!1!==e.displayAuthor?!e.msg.isSentByMe&&e.msg.isGroupMsg:null)?n.createElement(o.default,{msg:e.msg,contact:e.msg.senderObj}):null,r=(0,c.showForwarded)(e.msg)?n.createElement(d.default,{msg:e.msg.unsafe()}):null,s=e.displayType===l.default.DISP_TYPE.GALLERY||e.hideMeta?null:n.createElement("div",{className:h.default.meta},n.createElement(u.default,{msg:e.msg}));return n.createElement("div",{className:t},a,r,e.children,s)}f.displayName="TextBubble"},900:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s(a(2784)),n=r(a(45167));function o(){return i.createElement("div",{className:n.default.shade})}o.displayName="ThumbShade"},40713:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayTheme=void 0;var r=a(28103).Mirrored(["Album"]);t.DisplayTheme=r},62742:()=>{},63807:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(17957)),l=a(38203),d=s(a(33040));t.default=({count:e,textContainerRef:t})=>{var a=o.default.t(1412,{count:o.default.n(e),_plural:e});return n.createElement("div",{className:(0,i.default)(d.default.msgUnread,l.LIST_FOCUSABLE_ITEM_CLASS_NAME),ref:t,tabIndex:-1},n.createElement("span",{className:d.default.msgUnreadBody,"aria-live":"polite"},a))}},70846:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,displayAuthor:t,displayType:a,hideUpdateButton:r=!1}){return n.createElement(h.default,{msg:e,displayAuthor:t},n.createElement(c.default,{iconName:"unknown",msg:e.unsafe()},(0,d.default)(e.unsafe())," ",r?null:function(e){if(_.default.supportsFeature(_.default.F.MD_BACKEND)&&"fanout"===e.subtype)return null;var t=null;!e.isSentByMe&&e.subtype||(t=n.createElement("span",{className:p.default.action,role:"button",onClick:E},u.default.t(1424)));return t}(e)))};var i=s(a(19976)),n=r(a(2784)),o=a(31971),l=s(a(79711)),d=(s(a(50935)),s(a(73540))),u=s(a(17957)),c=s(a(90277)),h=s(a(20385)),f=r(a(75074)),p=s(a(62714)),m=s(a(78135)),_=s(a(18120));function v(){var e=(0,i.default)(["Got unsupported message but updater errored"]);return v=function(){return e},e}function g(){var e=(0,i.default)(["Got unsupported message but no newer release found"]);return g=function(){return e},e}function E(){l.default.openToast(n.createElement(f.default,{msg:u.default.t(1436),id:(0,f.genId)()})),m.default.update().then((e=>{e===o.DownloadState.UPDATE_NOT_AVAILABLE?(__LOG__(3)(g()),l.default.openToast(n.createElement(f.default,{msg:u.default.t(1136),id:(0,f.genId)()}))):e===o.DownloadState.UPDATE_DOWNLOADED?m.default.restart():__LOG__(3)(v())}))}window.updater=m.default},26691:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(36585)),o=s(a(72779)),l=r(a(2784)),d=s(a(69882)),u=s(a(71874)),c=s(a(20458)),h=s(a(92969)),f=s(a(43334)),p=s(a(79711)),m=s(a(9386)),_=s(a(50935)),v=s(a(7470)),g=s(a(81689)),E=s(a(131)),S=s(a(91581)),C=s(a(43396)),y=s(a(63789)),b=s(a(97934)),T=s(a(18120)),M=a(62902),N=s(a(17957)),I=s(a(69345)),P=a(96645),A=s(a(71726)),O=s(a(81031)),D=s(a(15118)),w=s(a(55042)),R=s(a(40207)),k=a(64658),L=s(a(22948)),x=s(a(82631)),F=s(a(20398)),B=s(a(75780)),G=s(a(90660)),U=a(84990),j=s(a(44849)),V=s(a(62315));class H extends l.Component{constructor(...e){super(...e),this.onMessageClick=e=>{var{vcard:t}=this.props;if(t){var a=(0,U.vcardWids)(t),r=(0,U.vcardIsBiz)(t);a.length>1?p.default.openModal(l.createElement(j.default,{icon:l.createElement(x.default,{name:"chat",className:G.default.icon,directional:!0}),vcard:t,onCancel:()=>p.default.closeModal(),onSelect:t=>this.openContactChat(t,e,r)})):a.length>0&&this.openContactChat(a[0],e,r)}},this.openContactChat=(e,t,r)=>{var s=!r&&T.default.supportsFeature(T.default.F.QUERY_VNAME)&&!v.default.get(e);(r?(0,b.default)(e).then(y.default):f.default.find(e)).then((r=>{this.props.onMessageClick&&this.props.onMessageClick(),p.default.closeModal(),p.default.openChatFromUnread(r).then((e=>{if(e){if(t){var s=a(71292).default;p.default.openDrawerRight(l.createElement(s,{chat:r,key:"info-".concat(r.id.toString())}),"slide-left",F.default.Manager.top)}p.default.focusChatTextInput(r)}})),s&&(T.default.supportsFeature(T.default.F.MD_BACKEND)&&(0,V.default)(r.id),(0,w.default)(e).then((t=>{if(t){var{biz:a,bizInfo:r}=t;a&&(0,B.default)(e,r)}})))}))},this.onViewContact=()=>{var{msg:e,vcard:t}=this.props;t?p.default.openModal(l.createElement(g.default,{vcard:t})):p.default.openModal(l.createElement(m.default,{onCancel:()=>p.default.closeModal(),onOK:()=>{p.default.closeModal(),C.default.initDownload((0,k.unproxy)(e.unsafe()))},okText:N.default.t(1589),cancelText:N.default.t(1593),title:N.default.t(593)},N.default.t(592)))},this._onAddToGroupClick=()=>{var e=(0,U.vcardWids)(this.props.vcard),{vcard:t}=this.props;e.length>1&&t?p.default.openModal(l.createElement(j.default,{icon:l.createElement(x.default,{name:"add-user",directional:!0}),vcard:t,onCancel:()=>p.default.closeModal(),onSelect:this._addContactToGroup})):e.length>0&&this._addContactToGroup(e[0])},this._showMediaMissing=()=>{p.default.openModal(l.createElement(I.default,{msg:this.props.msg.unsafe()}))},this._getBubbleActionItems=(e,t)=>{var a={label:N.default.t(981),onClick:()=>this.onMessageClick(!1),title:e?N.default.t(984,{author:e}):N.default.t(981)};return t?[a,{label:N.default.t(1467),onClick:()=>this.onMessageClick(!0)}]:[a,{label:N.default.t(209),onClick:this._onAddToGroupClick}]}}_addContactToGroup(e){v.default.find(e).then((e=>{p.default.openModal(l.createElement(d.default,{contact:e,pushTransition:"none",popTransition:"none"}),{transition:"modal-flow"})}))}render(){var e,t,a,{downloadMedia:r,mediaStage:s,msg:d,vcard:f}=this.props;if(f){e=(0,U.vcardWids)(f);var p=d.type===_.default.MSG_TYPE.VCARD?d.vcardFormattedName:null;t=(0,n.default)(p||(0,U.vcardGetNameFromParsed)(f)||N.default.t(244),{length:120,omission:N.default.t(1221)}),e.length>0&&(a=l.createElement(c.default,{items:this._getBubbleActionItems(t,(0,U.vcardIsBiz)(f))}))}var m=this.props.displayAuthor&&!d.isSentByMe&&d.isGroupMsg?l.createElement("div",{className:G.default.author},l.createElement(u.default,{msg:d,contact:d.senderObj})):null,v=this.props.quotedMsg?l.createElement("div",{className:G.default.quote},this.props.quotedMsg):null,g=(0,o.default)(G.default.bubble,{[G.default.hasAuthor]:m,[G.default.hasQuote]:v,[G.default.isPreview]:this.props.displayType===_.default.DISP_TYPE.MSG_INFO,[G.default.isGallery]:this.props.displayType===_.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===_.default.DISP_TYPE.CONTACT_CARD||this.props.displayType===_.default.DISP_TYPE.GALLERY}),C=d.type===_.default.MSG_TYPE.DOCUMENT&&d.isVcardOverMmsDocument&&s===P.MEDIA_DATA_STAGE.ERROR_MISSING,y=C||!this.props.placeholder&&(f||d.chat.isTrusted()),b=y?C?this._showMediaMissing:this.onViewContact:()=>{},T=M.Configuration.Compatibility({selectable:true}),I=this.props.placeholder?l.createElement(W,{downloadMedia:r,mediaStage:s}):l.createElement(O.default,{size:49,thumb:(0,U.vcardThumbnail)(f),wid:D.default.getThumbnailWidFromVcard(f)}),w=this.props.placeholder?l.createElement(Y,{mediaStage:s}):l.createElement(S.default,{text:t,element:"div",className:G.default.name,selectable:true,dirMismatch:d.rtl!==N.default.isRTL(),direction:d.dir,formatters:T});return this.props.placeholder&&(a=s===P.MEDIA_DATA_STAGE.ERROR_MISSING?l.createElement(c.default,{items:this._getBubbleActionItems().map((e=>(0,i.default)((0,i.default)({},e),{},{onClick:this._showMediaMissing})))}):l.createElement(c.default,{items:[],placeholder:!0})),l.createElement(h.default,{className:g,contact:d.senderObj,msg:d.unsafe()},m,v,l.createElement(E.default,{msg:d.unsafe(),wrapperClass:G.default.ctwaContext}),l.createElement("div",{className:G.default.vcard,role:y?"button":null,onClick:b},l.createElement("div",{className:G.default.avatar},I),l.createElement("div",{className:G.default.body},w),l.createElement("div",{className:G.default.meta},l.createElement(A.default,{msg:d}))),a)}}function W(e){var{downloadMedia:t,mediaStage:a}=e;if(!a)return l.createElement(q,{downloadMedia:t});switch(a){case P.MEDIA_DATA_STAGE.NEED_POKE:case P.MEDIA_DATA_STAGE.INIT:return l.createElement(q,{downloadMedia:t});case P.MEDIA_DATA_STAGE.FETCHING:case P.MEDIA_DATA_STAGE.REUPLOADING:case P.MEDIA_DATA_STAGE.DECRYPTING:return l.createElement(K,{animate:!0,type:"profileImage"});case P.MEDIA_DATA_STAGE.RESOLVED:return l.createElement(K,{type:"profileImage"});case P.MEDIA_DATA_STAGE.ERROR_MISSING:return l.createElement(q,{downloadMedia:()=>{}});default:return l.createElement(K,{animate:!0,type:"profileImage"})}}function Y(e){var{mediaStage:t}=e;if(!t)return l.createElement(K,{type:"body"});switch(t){case P.MEDIA_DATA_STAGE.NEED_POKE:case P.MEDIA_DATA_STAGE.INIT:return l.createElement(K,{type:"body"});case P.MEDIA_DATA_STAGE.FETCHING:case P.MEDIA_DATA_STAGE.REUPLOADING:case P.MEDIA_DATA_STAGE.DECRYPTING:return l.createElement(K,{animate:!0,type:"body"});case P.MEDIA_DATA_STAGE.RESOLVED:case P.MEDIA_DATA_STAGE.ERROR_MISSING:default:return l.createElement(K,{type:"body"})}}function K(e){var{animate:t,type:a}=e,r=[G.default.placeholder,"profileImage"===a?G.default.placeholderImage:G.default.placeholderText,t?G.default.placeholderAnimation:null].filter(Boolean);return l.createElement("div",{className:(0,o.default)(r)})}function q(e){var{downloadMedia:t}=e;return l.createElement(L.default,{"aria-label":N.default.t(1589),name:"audio-download",className:G.default.vcardDownloadStageIcon,onClick:()=>{t&&t()}})}H.CONCERNS={msg:["vcardFormattedName","rtl","dir","isSentByMe","isGroupMsg","senderObj","chat","isVcardOverMmsDocument","type"]},H.displayName="Vcard",K.displayName="Placeholder";var z=(0,R.default)(H,H.CONCERNS);t.default=z},99127:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=(r(a(50935)),r(a(17957))),o=r(a(11412)),l=r(a(40210)),d=r(a(71748)),u=r(a(72424)),c=r(a(40207)),h=r(a(26691)),f=a(84990);class p extends i.Component{constructor(...e){super(...e),this._getParsedVcardList=(0,o.default)((({parsedVcards:e})=>e?e.map((e=>({parsedVcard:e,displayName:(0,f.vcardGetNameFromParsed)(e)||n.default.t(244),isMultiVcard:!1,vcard:""}))):[]))}componentDidMount(){var{msg:e,mediaData:t}=this.props;e.isTrusted()&&t.size<=1024*u.default.mmsVcardAutodownloadSizeKb&&this.downloadMedia()}downloadMedia(){this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}render(){var e,{displayAuthor:t,displayType:a,onMessageClick:r,mediaData:s,msg:n}=this.props,{parsedVcards:o}=s;return o?o.length>1?i.createElement(d.default,{msg:n,vcardList:this._getParsedVcardList({parsedVcards:o}),quotedMsg:this.props.getQuotedMsg(),displayType:a,displayAuthor:t}):i.createElement(h.default,{msg:n,vcard:o[0],quotedMsg:this.props.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:r}):i.createElement(h.default,{mediaStage:null===(e=n.mediaData)||void 0===e?void 0:e.mediaStage,msg:n,vcard:null,quotedMsg:this.props.getQuotedMsg(),displayType:a,displayAuthor:t,onMessageClick:r,downloadMedia:n.isTrusted()?this.downloadMedia:null,placeholder:!0})}}p.CONCERNS={mediaData:["mediaBlob","mediaStage","parsedVcards","size"]},p.displayName="VcardDocument";var m=(0,c.default)(p,p.CONCERNS);t.default=m},92276:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(72779)),o=r(a(2784)),l=s(a(71874)),d=s(a(92969)),u=s(a(12708)),c=s(a(19899)),h=s(a(79711)),f=s(a(50935)),p=a(87478),m=s(a(131)),_=s(a(4336)),v=s(a(18120)),g=s(a(17957)),E=s(a(20642)),S=a(28278),C=a(40713),y=s(a(69345)),b=r(a(68084)),T=a(96645),M=s(a(10853)),N=s(a(71726)),I=s(a(40210)),P=a(62761),A=r(a(64857)),O=s(a(84443)),D=s(a(57008)),w=s(a(40207)),R=a(64658),k=s(a(82631)),L=s(a(20783)),x=s(a(900)),F=a(86145),B=s(a(74185)),G=s(a(8106)),U="PREVIEW",j="FLOATER";function V(e){e.stopPropagation()}class H extends o.PureComponent{constructor(e){super(e),this._setRefThumb=e=>{this._refThumb=e},this.showMediaMissing=()=>{h.default.openModal(o.createElement(y.default,{msg:this.props.msg.unsafe()}))},this.downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:I.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},this.cancelDownload=()=>{this.props.msg.cancelDownload()},this.cancelUpload=()=>{this.props.msg.cancelUpload()},this.resumeUpload=()=>{this.props.msg.resumeUpload()},this.resumeRemoteUpload=()=>{this.props.msg.resumeRemoteUpload()},this._downloadUnsupportedToDesktop=e=>{e&&e.stopPropagation(),h.default.openModal(o.createElement(M.default,{msg:(0,R.unproxy)(this.props.msg.unsafe())}))},this.launchMediaViewer=e=>{if(e&&e.stopPropagation(),this.props.theme===C.DisplayTheme.Album){var t=this.props.zoomMsg||this.props.msg,a=new Set((this.props.albumMsgs||[]).map((e=>e.id.toString())));h.default.mediaViewerModal({msg:(0,R.unproxy)(t.unsafe()),highlightedMsgIds:a})}else h.default.mediaViewerModal({msg:(0,R.unproxy)(this.props.msg.unsafe())})},this._launchVideoFloater=e=>{e&&e.stopPropagation();var t=this._refThumb?this._refThumb.getBoundingClientRect():null;O.default.openPiP((0,R.unproxy)(this.props.msg.unsafe()),0,t)},this.setPreviewMode=()=>{this.state.mode!==U&&this.setState({mode:U})},this.setFloaterMode=()=>{this.state.mode!==j&&this.setState({mode:j})};var t=O.default.isOpened((0,R.unproxy)(e.msg.unsafe()))?j:U;this.state={mode:t}}componentDidMount(){var{listeners:e,msg:t}=this.props;e.add(O.default,"".concat(t.id.toString(),"_pip_did_open"),this.setFloaterMode),e.add(O.default,"".concat(t.id.toString(),"_pip_did_close"),this.setPreviewMode),v.default.supportsFeature(v.default.F.MEDIA_EXISTENCE_CHECK)&&(0,S.checkExistence)((0,R.unproxy)(t)),v.default.supportsFeature(v.default.F.HIGH_QUALITY_VIDEO_THUMBNAILS)&&(0,S.downloadVideoThumbnail)({msg:(0,R.unproxy)(t)})}render(){var e,t,{msg:a,mediaData:r,theme:s,overlayContent:h,displayType:E}=this.props,S=null,y=null;switch(r.mediaStage){case T.MEDIA_DATA_STAGE.RESOLVED:case T.MEDIA_DATA_STAGE.INIT:case T.MEDIA_DATA_STAGE.EXISTS:S=o.createElement(b.Play,null),y=this.launchMediaViewer;break;case T.MEDIA_DATA_STAGE.NEED_POKE:S=o.createElement(b.Download,{filesize:r.size}),y=this.downloadMedia;break;case T.MEDIA_DATA_STAGE.UPLOADING:S=o.createElement(b.PendingCancel,null),y=this.cancelUpload;break;case T.MEDIA_DATA_STAGE.FETCHING:S=o.createElement(b.PendingCancel,null),y=this.cancelDownload;break;case T.MEDIA_DATA_STAGE.NEED_UPLOAD:S=o.createElement(b.Upload,{filesize:r.size}),y=this.resumeUpload;break;case T.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:S=o.createElement(b.Upload,{filesize:r.size}),y=this.resumeRemoteUpload;break;case T.MEDIA_DATA_STAGE.ERROR_MISSING:y=this.showMediaMissing;break;case T.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:a.isUnsentMedia||(S=o.createElement(b.Download,{filesize:r.size}),y=this._downloadUnsupportedToDesktop);break;case T.MEDIA_DATA_STAGE.SENDING:a.isFailed||(S=o.createElement(b.Pending,null));break;case T.MEDIA_DATA_STAGE.DECRYPTING:case T.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:case T.MEDIA_DATA_STAGE.PREPARING:case T.MEDIA_DATA_STAGE.PROGRESSIVE_READY:case T.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case T.MEDIA_DATA_STAGE.REUPLOADING:S=o.createElement(b.Pending,null)}var M,I=parseInt(r.duration,10)?c.default.durationStr(r.duration):null,O=I?o.createElement("span",{className:G.default.duration},o.createElement("div",{className:G.default.icon},o.createElement(k.default,{name:"msg-video"})),I):null,w=v.default.supportsFeature(v.default.F.PORTRAIT_MEDIA_LONG_CAPTIONS)&&(0,F.numCodepoints)(null!==(e=a.text)&&void 0!==e?e:"")>f.default.MAX_PORTRAIT_MEDIA_CAPTION_LENGTH,{bubbleWidth:R,bubbleHeight:H}=(0,p.getBubbleDimension)(a.type,!1,r.aspectRatio,s,E,w),W=r.fullHeight||H,Y=r.fullWidth||R,K=(0,p.getImgStyle)(Y,W,R,H),q=null!==(t=r.fullPreviewData)&&void 0!==t?t:r.preview,z=null!=r.fullPreviewData,Q=null!=q?(0,i.default)({backgroundImage:B.default.thumbAsBackgroundImage(q.url()).backgroundImage},K):void 0,X=o.createElement("div",{className:(0,n.default)(G.default.thumbBody,{[G.default.thumbBodyLowQuality]:!z}),style:Q}),J=this.props.displayAuthor&&!a.isSentByMe&&a.isGroupMsg,Z=J?o.createElement("div",{className:G.default.author},o.createElement(l.default,{msg:a,contact:a.senderObj})):null,$=(0,P.showForwarded)(a)&&this.props.theme!==C.DisplayTheme.Album,ee=$?o.createElement(_.default,{msg:a.unsafe(),className:G.default.forwardedIndicator}):null,te=o.createElement(x.default,null),ae=a.caption?o.createElement("div",{className:G.default.caption},o.createElement(u.default,{msg:a.unsafe(),trusted:this.props.trusted,spacer:!(a.supportsMessageFooter&&a.footer)})):null,re=(0,n.default)(G.default.bubble,{[G.default.nonAlbumBubble]:!s||s!==C.DisplayTheme.Album,[G.default.portrait]:R<H&&(0,p.canUseCustomCropping)(a.type,s,E)}),se=(0,n.default)(re,{[G.default.hasCaption]:ae,[G.default.hasAuthor]:J,[G.default.isHover]:this.props.hover,[G.default.forwarded]:$,[G.default.isPSA]:a.isPSA,[G.default.ctwaContainerWidth]:null!=a.ctwaContext});switch(r.mediaStage){case T.MEDIA_DATA_STAGE.INIT:case T.MEDIA_DATA_STAGE.RESOLVED:M=o.createElement("div",{className:(0,n.default)(G.default.pipBtn,{[G.default.isHover]:!!this.props.hover})},o.createElement(A.default,{onClick:e=>{e&&e.stopPropagation(),this._launchVideoFloater()},theme:A.PIP_BUTTON_THEME.PREVIEW}));break;default:M=null}var ie,ne=this.props.quotedMsg?o.createElement("div",{className:G.default.quote},this.props.quotedMsg):null;switch(this.state.mode){case U:ie=o.createElement(o.Fragment,null,M,S);break;case j:ie=o.createElement(D.default,{icon:o.createElement(k.default,{name:"video-pip-large"})},g.default.t(1179))}var oe,le=(0,n.default)(G.default.thumb,{[G.default.inAlbum]:s===C.DisplayTheme.Album});null==h&&(oe=o.createElement("div",{className:G.default.meta},o.createElement(N.default,{msg:a})));var de=o.createElement("div",{className:se},Z,ee,ne,o.createElement(m.default,{msg:a.unsafe(),wrapperClass:G.default.ctwaContext}),o.createElement("div",{ref:this._setRefThumb,className:(0,n.default)(le,{[G.default.cursorPointer]:this.state.mode===U,[G.default.overlay]:h,[G.default.ctwaThumbWidth]:null!=a.ctwaContext}),onClick:y,style:{width:R,height:H}},null==h?ie:null,X,te,null==h?O:null),ae,o.createElement(L.default,{dir:a.dir,footer:a.footer,isShown:a.supportsMessageFooter,msg:a.unsafe(),rtl:a.rtl,type:a.type,trusted:this.props.trusted}),oe);return ae?o.createElement(d.default,{contact:a.senderObj,msg:a.unsafe(),onClick:V},de):(null!=h&&(de=o.createElement("div",{className:G.default.overlayAlbumText},de,h)),o.createElement("div",{onClick:V},de))}}H.CONCERNS={msg:["ack","caption","dir","footer","gifAttribution","id","isGroupMsg","isPSA","isSentByMe","isUnsentMedia","rtl","senderObj","type","isFailed","ctwaContext","supportsMessageFooter","text"],mediaData:["aspectRatio","preview","fullPreviewData","duration","mediaStage","fullWidth","fullHeight","size"]},H.displayName="Video";var W=(0,E.default)((0,w.default)(H,H.CONCERNS));t.default=W},24898:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(98346)),n=s(a(72779)),o=r(a(2784)),l=s(a(79711)),d=s(a(50935)),u=a(72292),c=s(a(91581)),h=r(a(35387)),f=s(a(18120)),p=s(a(17957)),m=s(a(20642)),_=r(a(68084)),v=s(a(84443)),g=s(a(57008)),E=a(64658),S=s(a(82631)),C=r(a(75074)),y=s(a(74185)),b=s(a(99340)),T=s(a(10252)),M=s(a(76022)),N="PREVIEW",I="FLOATER";class P extends o.Component{constructor(e){super(e),this.setRefThumbnailWrapper=e=>{this.refThumbnailWrapper=e},this.getThumbnailWrapperRect=()=>this.refThumbnailWrapper?this.refThumbnailWrapper.getBoundingClientRect():null,this.setPreviewMode=()=>{this.state.mode!==N&&this.setState({mode:N})},this.setFloaterMode=()=>{this.state.mode!==I&&this.setState({mode:I})},this.parseYoutubeVideoId=e=>{for(var t=u.URL_PATTERNS.ONLINE_VIDEO_URL.YOUTUBE,a=null,r=0;r<t.length;r++){var s=y.default.withoutWww(e).match(t[r]);if(s){a=s[1];break}}return a},this.parseYoutubeVideoStartTime=e=>{var t=e.split("?");if(2!==t.length)return 0;var a=t[1],r=new b.default(a).get(u.YOUTUBE_URL_TIME_PARAM_NAME);if(!r)return 0;var s=r.match(u.YOUTUBE_URL_TIME_PARAM_PATTERN),i=0;if(s&&s.length)for(var n=1;n<s.length;n++){var o=s[n];if(o){var l=parseInt(o,10);if(isNaN(l))return 0;o.endsWith("h")&&(i+=3600*l),o.endsWith("m")&&(i+=60*l),o.endsWith("s")&&(i+=l),/^\d+$/.test(o)&&(i+=l)}}return i};var t=v.default.isOpened((0,E.unproxy)(e.msg))?I:N;this.state={mode:t}}componentDidMount(){this.props.listeners.add(v.default,"".concat(this.props.msg.id.toString(),"_pip_did_open"),this.setFloaterMode),this.props.listeners.add(v.default,"".concat(this.props.msg.id.toString(),"_pip_did_close"),this.setPreviewMode)}render(){var e=this.props.msg.description?o.createElement("div",{className:T.default.description,title:this.props.msg.description},o.createElement(c.default,{text:this.props.msg.description})):null,t=y.default.hostname(this.props.msg.canonicalUrl||this.props.msg.matchedText);(t=y.default.withoutWww(t))===d.default.HOSTNAME.YOUTUBE_SHORTENED&&(t=d.default.HOSTNAME.YOUTUBE);var a,r=o.createElement("div",{className:T.default.source},o.createElement(c.default,{text:t})),s=(0,n.default)(T.default.body,{[T.default.noThumb]:!this.props.msg.thumbnail});if(this.state.mode===N)switch(t){case d.default.HOSTNAME.YOUTUBE:case d.default.HOSTNAME.YOUTUBE_MOBILE:var u=this.parseYoutubeVideoId(this.props.msg.matchedText);if(u){var m=this.parseYoutubeVideoStartTime(this.props.msg.matchedText);a=e=>{e&&e.stopPropagation(),v.default.openYoutubePiP(u,this.props.msg,m,this.getThumbnailWrapperRect())}}break;case d.default.HOSTNAME.INSTAGRAM:case d.default.HOSTNAME.STREAMABLE:case d.default.HOSTNAME.FACEBOOK:case d.default.HOSTNAME.FBWATCH:case d.default.HOSTNAME.FBWATCH_ALT:case d.default.HOSTNAME.LASSOVIDEOS:case d.default.HOSTNAME.LASSO_SHORTENED:case d.default.HOSTNAME.SHARECHAT:f.default.supportsFeature(f.default.F.VIDEO_PLAYBACK_URL)&&(a=()=>{v.default.openOgVideoPiP("",this.props.msg.thumbnail,this.props.msg,0,this.getThumbnailWrapperRect());var e=y.default.build(this.props.msg.matchedText,{wa_logging_event:"video_play_open"});M.default.queryVideoPlaybackUrl(e).then((e=>{if(v.default.isOpened(this.props.msg)){if(!e.url)throw new Error("Url is missing in response.");v.default.openOgVideoPiP(e.url,this.props.msg.thumbnail,this.props.msg,0,null)}})).catch((()=>{v.default.closeOgVideoPiP(),l.default.openToast(o.createElement(C.default,{id:(0,C.genId)(),msg:p.default.t(1177),action:{actionText:p.default.t(1178),onAction:()=>{(0,h.openExternalLink)(this.props.msg.matchedText)}}}))}))});break;default:return null}var E,b,P=(0,n.default)(T.default.preview,{[T.default.bubbleIn]:!this.props.msg.isSentByMe,[T.default.bubbleOut]:this.props.msg.isSentByMe}),A=this.state.mode===N?o.createElement("div",{className:T.default.mediaStateControlsWrapper},o.createElement(_.Play,null)):null,O=this.state.mode===I?o.createElement(g.default,{icon:o.createElement(S.default,{name:"video-pip-large"})},p.default.t(1179)):null;if(this.props.msg.thumbnail&&(0,i.default)(d.default.HOSTNAME).includes(t)){var D;switch(E=o.createElement("img",{alt:"",className:(0,n.default)(T.default.thumbnail,{[T.default.youtubeThumbnail]:t===d.default.HOSTNAME.YOUTUBE}),src:"data:image/jpeg;base64,".concat(this.props.msg.thumbnail)}),t){case d.default.HOSTNAME.YOUTUBE:D=o.createElement(S.default,{name:"logo-youtube"});break;case d.default.HOSTNAME.INSTAGRAM:D=o.createElement(S.default,{name:"logo-instagram"});break;case d.default.HOSTNAME.FACEBOOK:D=o.createElement(S.default,{name:"logo-facebook"});break;case d.default.HOSTNAME.LASSOVIDEOS:D=o.createElement(S.default,{name:"logo-lasso"})}D&&(b=o.createElement("div",{className:T.default.attribution},D))}else E=o.createElement("div",{className:T.default.thumbnailPlaceholder});return o.createElement("div",{className:P},o.createElement("div",{ref:this.setRefThumbnailWrapper,className:T.default.thumbnailWrapper,onClick:a},b,E,A,O),o.createElement(h.default,{className:s,href:this.props.msg.matchedText},o.createElement("div",{className:T.default.title,title:this.props.msg.title},o.createElement(c.default,{text:this.props.msg.title})),e,r))}}P.displayName="VideoLinkPreview";var A=(0,m.default)(P);t.default=A},33426:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(72779)),o=r(a(2784)),l=s(a(79711)),d=(s(a(50935)),s(a(83713))),u=a(90973),c=s(a(17957)),h=a(96645),f=s(a(13077)),p=s(a(97816)),m=s(a(40210)),_=a(64658),v=s(a(22948)),g=s(a(82631)),E=a(40263),S=s(a(20385)),C=s(a(5174)),y=s(a(47609)),b=s(a(47566)),T=s(a(46326)),M=a(89526);function N(){var e=(0,i.default)(["Unsupported/too large view once media message"]);return N=function(){return e},e}function I(e){e.stopPropagation(),e.preventDefault()}function P({displayAuthor:e,displayType:t,mediaData:a,msg:r,trusted:s,quotedMsg:i}){var P,{mediaStage:A,size:O}=(0,y.default)(a,["mediaStage","size"]),D=(0,y.default)(r,["ack","isGroupMsg","isFailed","isPSA","isSentByMe","senderObj","type"]),w=function(e,t){return(0,o.useMemo)((()=>{var a=t.type===h.OUTWARD_TYPES.IMAGE?c.default.t(1472):c.default.t(1477);if(!(0,M.isUnviewed)(t)){var r=(0,M.isExpired)(t)?c.default.t(1469):c.default.t(1478);return{type:"complete",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once-viewed"}),label:r,labelClassname:b.default.labelInactive}}switch(e){case h.MEDIA_DATA_STAGE.RESOLVED:case h.MEDIA_DATA_STAGE.PROGRESSIVE_READY:return t.isSentByMe?{type:"complete",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:b.default.labelActive}:{type:"unviewed",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once"}),handleClick:function(){l.default.mediaViewerModal({msg:(0,_.unproxy)(t.unsafe())})},label:a};case h.MEDIA_DATA_STAGE.FETCHING:return{type:"unviewed",icon:o.createElement(T.default,null),handleClick:e=>{I(e),t.cancelDownload()},label:a};case h.MEDIA_DATA_STAGE.NEED_POKE:return{type:"unviewed",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once-download"}),handleClick:e=>{I(e),t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})},label:a};case h.MEDIA_DATA_STAGE.UPLOADING:return{type:"complete",icon:o.createElement(T.default,{onClick:e=>{I(e),t.cancelUpload()}}),label:a,labelClassname:b.default.labelActive};case h.MEDIA_DATA_STAGE.NEED_UPLOAD:return{type:"complete",icon:o.createElement(v.default,{className:(0,n.default)(b.default.nonSpinnerIcon,b.default.accentIcon),name:"view-once-retry",onClick:e=>{I(e),t.resumeUpload()},"aria-label":c.default.t(1257)}),label:c.default.t(1257),labelClassname:b.default.labelRetry};case h.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD:return{type:"complete",icon:o.createElement(v.default,{className:(0,n.default)(b.default.nonSpinnerIcon,b.default.accentIcon),name:"view-once-retry",onClick:e=>{I(e),t.resumeRemoteUpload()},"aria-label":c.default.t(1257)}),label:c.default.t(1257),labelClassname:b.default.labelRetry};case h.MEDIA_DATA_STAGE.SENDING:return{type:"complete",icon:t.isFailed?null:o.createElement(T.default,null),label:a,labelClassname:b.default.labelActive};case h.MEDIA_DATA_STAGE.ERROR_MISSING:return{type:"complete",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once-viewed"}),label:c.default.t(1469),labelClassname:b.default.labelInactive};case h.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:case h.MEDIA_DATA_STAGE.ERROR_TOO_LARGE:return __LOG__(4,void 0,new Error,!0)(N()),SEND_LOGS("view-once-hook-error"),{type:"complete",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once-viewed"}),label:a,labelClassname:b.default.labelActive};case h.MEDIA_DATA_STAGE.INIT:case h.MEDIA_DATA_STAGE.PREPARING:case h.MEDIA_DATA_STAGE.DECRYPTING:case h.MEDIA_DATA_STAGE.EXISTS:if(!t.isSentByMe)return{type:"unviewed",icon:o.createElement(T.default,null),handleClick:I,label:a};case h.MEDIA_DATA_STAGE.REMOTE_UPLOADING:case h.MEDIA_DATA_STAGE.REUPLOADING:return{type:"complete",icon:o.createElement(g.default,{className:b.default.nonSpinnerIcon,name:"view-once"}),label:a,labelClassname:b.default.labelActive}}}),[e,t])}(A,D);if((0,o.useEffect)((()=>{!D.isSentByMe&&(0,M.isUnviewed)(D)&&D.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:m.default.WEBC_RMR_REASON_CODE.MSG_RENDER,isUserInitiated:!1})}),[D]),"complete"===w.type){var{label:R,labelClassname:k,icon:L}=w;P=o.createElement(S.default,{msg:r},null!=i?o.createElement("div",{className:b.default.quote},i):null,o.createElement(u.FlexRow,{align:"center"},o.createElement(u.FlexItem,{className:(0,n.default)({[b.default.statusIcon]:!0,[b.default.statusDone]:!(0,M.isUnviewed)(D)})},L),o.createElement(u.FlexItem,null,o.createElement(p.default,{className:k,msg:D.unsafe()},R))))}else{var{handleClick:x,label:F,icon:B}=w,G=A===h.MEDIA_DATA_STAGE.NEED_POKE||A===h.MEDIA_DATA_STAGE.FETCHING?c.default.filesize(O):null;P=o.createElement(f.default,{displayType:t,hideCaption:!0,msg:r,quotedMsg:i,showAuthor:e,trusted:s},o.createElement(C.default,{className:b.default.buttonContainer,onClick:s?x:()=>{}},o.createElement(d.default,{outgoingMsg:D.isSentByMe},o.createElement(u.FlexRow,{className:b.default.deepContainerContent,align:"center"},o.createElement(u.FlexItem,{className:b.default.statusIcon,grow:0},B),o.createElement(u.FlexItem,{className:b.default.content,grow:1},o.createElement(E.TextHeader,{color:"secondary",level:"3",weight:"medium",size:"15"},F),null!=G?o.createElement(E.TextParagraph,{className:b.default.contentMeta,size:"10"},G):null)))))}return o.createElement("div",{className:(0,n.default)({[b.default.unviewedBubble]:"unviewed"===w.type})},P)}P.displayName="ViewOnce";var A=P;t.default=A},46326:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({onClick:e}){var[t,a]=(0,u.default)(e),r=null!=e?a:{};return n.createElement("div",(0,i.default)({className:c.default.container,ref:t,"aria-label":o.default.t(1593)},r),n.createElement("div",{className:c.default.icon},n.createElement(d.default,{name:"x-soft"})),n.createElement("div",{className:c.default.spinner},n.createElement(l.default,{color:"accent",size:20,stroke:4})))};var i=s(a(58527)),n=r(a(2784)),o=s(a(17957)),l=s(a(2825)),d=s(a(82631)),u=s(a(72376)),c=s(a(79577))},58355:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainer=de,t.getTailName=ce,t.SystemBubble=t.default=t.Wrapper=void 0;var i=s(a(19976)),n=s(a(72779)),o=a(5497),l=r(a(2784)),d=s(a(32960)),u=a(60474),c=a(14345),h=s(a(30809)),f=s(a(43334)),p=s(a(79711)),m=s(a(80073)),_=s(a(9386)),v=s(a(50935)),g=s(a(55236)),E=a(62436),S=r(a(71201)),C=s(a(43396)),y=s(a(38147)),b=s(a(6660)),T=s(a(4357)),M=s(a(93329)),N=a(75459),I=s(a(44343)),P=a(12023),A=s(a(50868)),O=a(13735),D=s(a(17957)),w=a(38203),R=s(a(20642)),k=s(a(26432)),L=s(a(19773)),x=a(97526),F=s(a(20564)),B=s(a(38751)),G=s(a(32087)),U=s(a(74343)),j=a(57556),V=s(a(61941)),H=s(a(50751)),W=s(a(72424)),Y=s(a(40207)),K=a(64658),q=s(a(82631)),z=s(a(48707)),Q=s(a(67134)),X=s(a(17693)),J=s(a(63498)),Z=s(a(74824)),$=s(a(26203)),ee=s(a(50103)),te=a(24996);function ae(){var e=(0,i.default)(["no onMessageSelect"]);return ae=function(){return e},e}function re(){var e=(0,i.default)(["wrapper:resend failure: ",""]);return re=function(){return e},e}var se=!1,ie=!0;class ne extends l.PureComponent{getContainerElement(){return(0,V.default)(this._refContainer,"this._refContainer")}constructor(e){super(e),this.setRefMsgComponent=e=>this.refMsgComponent=e,this.setRefContext=e=>this.refContext=e,this._refTail=l.createRef(),this.setRefBubble=e=>this.refBubble=e,this._sizeMismatch=!1,this._stickerRef=l.createRef(),this._setRefContainer=e=>{this._refContainer=e},this.resend=()=>{this.props.msg.resend().catch((function(e){__LOG__(2)(re(),e)}))},this._openWebSearchFlow=()=>{var e=this.props.msg;p.default.openModal(l.createElement($.default,{messageText:e.body}),{transition:"modal-flow"})},this._openEphemeralInfoPopup=()=>{var e=this.props.msg.ephemeralDuration||0;p.default.openModal(l.createElement(_.default,{onOK:()=>{p.default.closeModal()}},(0,O.getEphemeralOutOfSyncInfoString)(e)),{transition:"modal-flow"})},this._openBizPrivacyInfoPopup=()=>{var e,t=this.props.msg,{bizPrivacyStatus:a}=t;if(null!=a){var r=(0,c.getBizPrivacyInfoString)(a,null!==(e=t.verifiedBizName)&&void 0!==e?e:(0,T.default)(t.chat.contact),t.id.fromMe);p.default.openModal(l.createElement(_.default,{onOK:()=>{p.default.closeModal()}},r),{transition:"modal-flow"})}},this.mouseEnter=e=>{e.buttons||this.state.hover||!this._hasContextMenu()||this.setState({hover:!0})},this.mouseUp=e=>{this.props.clearTimeout(this._setHoverFalseTimeout),this.mouseEnter(e)},this.mouseLeave=()=>{this.state.hover&&this._hasContextMenu()&&this.setState({hover:!1})},this.mouseDown=()=>{this._setHoverFalseTimeout=this.props.setTimeout((()=>{this.state.hover&&this.setState({hover:!1})}),300)},this._handleMouseContextMenu=e=>{e.stopPropagation()},this._getMenuRefContext=()=>{if(this.refContext)return this.refContext.getComponent().refContext},this.onMenu=(e,t)=>{if(t&&this.state.contextMenu)this.setState({contextMenu:null});else{var a=t?this._getMenuRefContext():e,r=(0,K.unproxy)(this.props.msg),s=[];r.isSentByMe&&this.props.displayType!==v.default.DISP_TYPE.MSG_INFO&&!r.asRevoked&&s.push(l.createElement(S.default,{key:"info",a8n:"mi-msg-info",action:()=>{this.openInfoDrawer()}},D.default.t(988))),r.canReply()&&s.push(l.createElement(S.default,{key:"reply",a8n:"mi-msg-reply",action:()=>{this.onReplyMessage()}},D.default.t(1232))),(r.canPrivateReply()||r.canPrivateReplyInRestrictedGrp())&&s.push(l.createElement(S.default,{key:"private_reply",a8n:"mi-msg-reply",action:()=>{this.onPrivateReplyMessage()}},D.default.t(1184))),r.isDownloadable()&&s.push(l.createElement(S.default,{key:"download",a8n:"mi-msg-download",action:()=>{this.onDownload()}},D.default.t(1589))),r.canForward()&&s.push(l.createElement(S.default,{key:"forward",a8n:"mi-msg-forward",action:()=>{this.openForwardFlow(!0)}},D.default.t(712))),(0,N.canEditLabelAssociation)()&&!r.asRevoked&&s.push(l.createElement(S.default,{key:"editLabel",a8n:"mi-edit-label",action:()=>{this._openEditLabelFlow()}},D.default.t(605))),r.canStar()&&(r.star?s.push(l.createElement(S.default,{key:"star",a8n:"mi-msg-unstar",action:()=>{this.onUnstarMessage()}},D.default.t(1418))):s.push(l.createElement(S.default,{key:"star",a8n:"mi-msg-star",action:()=>{this.onStarMessage()}},D.default.t(1340)))),s.push(l.createElement(S.default,{key:"delete",a8n:"mi-msg-delete",action:()=>{this.onDeleteMessage()}},D.default.t(569))),r.isGroupMsg&&r.author&&!r.isSentByMe&&s.push(l.createElement(S.default,{key:"author",a8n:"mi-msg-author",action:()=>{this.openContactChat()}},D.default.t(984,{author:r.displayName()}))),this.setState({contextMenu:{menu:s,anchor:a,theme:S.ThemeOptions.COMPACT,autoFocus:this._isKeyboardUser()}})}},this.openContextMenu=()=>{this._hasContextMenu()&&(this.state.hover?this.onMenu(void 0,!0):this.setState({hover:!0},(()=>{this.onMenu(void 0,!0)})))},this.closeContextMenu=()=>{var e={contextMenu:null};this._isKeyboardUser()&&(e.hover=!1),this.setState(e)},this.onSelectClick=e=>{e&&e.stopPropagation();var t=this.props.onMessageSelect;t?t((0,K.unproxy)(this.props.msg),!this.state.selected,e):(__LOG__(4,void 0,new Error,!0)(ae()),SEND_LOGS("wrapper-onSelectClick"))},this.onDoubleClick=e=>{var{displayType:t}=this.props,a=(0,K.unproxy)(this.props.msg);!a.canReply()||this.props.selectable||t!==v.default.DISP_TYPE.CONVERSATION||this.state.contextMenu||e.target instanceof HTMLElement&&((e,t)=>{for(var a=t;a;){if(a===e)return!0;a=a.parentNode}return!1})(this.refBubble,e.target)||(a.chat.composeQuotedMsg=a,p.default.focusChatTextInput(a.chat),this.highlight())},this.onResize=()=>{this.forceUpdate()},this._handleKeyActivation=e=>{var t,a;null===(t=this.getMsgComponentRef())||void 0===t||null===(a=t.handleKeyActivation)||void 0===a||a.call(t,e)},this.state={canQuickForward:e.msg.canQuickForward(),contextMenu:null,hover:!1,highlighting:!1,selected:!!e.selectedMessages&&e.selectedMessages.isSelected((0,K.unproxy)(e.msg)),isRevoked:Boolean(e.msg.asRevoked),isViewOncePeeking:!1};var t=this.props.displayType===v.default.DISP_TYPE.STARRED_MSGS||this.props.displayType===v.default.DISP_TYPE.GALLERY||this.props.displayType===v.default.DISP_TYPE.MSG_INFO||this.props.displayType===v.default.DISP_TYPE.CONTACT_CARD;this._sizeMismatch=t&&this.props.msg.isGif}componentDidMount(){this._sizeMismatch&&this.refBubble&&(this.maxWidth=this.refBubble.offsetWidth,this.forceUpdate(),window.addEventListener("resize",this.onResize)),this.props.listeners.add(this.props.msg,"change",(()=>{var e=this.props.msg.canQuickForward();e!==this.state.canQuickForward&&this.setState({canQuickForward:e});var t=Boolean(this.props.msg.asRevoked);t!==this.state.isRevoked&&this.setState({isRevoked:t})}))}componentWillUnmount(){this._sizeMismatch&&window.removeEventListener("resize",this.onResize)}componentDidUpdate(e,t){this.state.contextMenu&&t.isRevoked!==this.state.isRevoked&&this.closeContextMenu()}scrollMsg(e,t){this._refContainer&&(0,E.scrollAt)(this._refContainer,void 0,t).then(e)}highlight(){var e=this.refBubble,t=this._refTail.current;e&&(this.setState({highlighting:!0}),y.default.indicateFocus(e,ee.default.highlightAnimation),y.default.indicateFocus(t,ee.default.highlightAnimation),this.props.listeners.addOnce(e,"animationend",(()=>{this.setState({highlighting:!1})})),this.props.isFocusable&&this.focus({preventScroll:!0}))}openForwardFlow(e){var t,a=this.props.msg;a.type===v.default.MSG_TYPE.CIPHERTEXT?t=D.default.t(690):a.asRevoked?t=D.default.t(691):a.isUnsentMedia&&(t=D.default.t(689,{_plural:1})),t?p.default.openModal(l.createElement(_.default,{title:D.default.t(692),onOK:()=>p.default.closeModal(),okText:D.default.t(1761)},t)):e&&this.props.displayType===v.default.DISP_TYPE.CONVERSATION?this.onSelectClick():p.default.openModal(l.createElement(M.default,{msgs:[(0,K.unproxy)(a)]}),{transition:"modal-flow"})}_openEditLabelFlow(){this.props.displayType===v.default.DISP_TYPE.CONVERSATION?this.onSelectClick():p.default.openModal(l.createElement(k.default,{modelsToUpdate:[(0,K.unproxy)(this.props.msg)]}))}openInfoDrawer(){p.default.msgInfoDrawer((0,K.unproxy)(this.props.msg))}openContactChat(){f.default.find(this.props.msg.author).then((function(e){p.default.openChatFromUnread(e).then((t=>{t&&p.default.focusChatTextInput(e)}))}))}onDeleteMessage(){var{msg:e,isMsgVisible:t}=this.props;p.default.openModal(l.createElement(g.default,{chat:e.chat,msgList:[e].map(K.unproxy),deletePrompt:!0,revokePrompt:e.canRevoke(),isMsgVisible:t}))}onReplyMessage(){var e=(0,K.unproxy)(this.props.msg),t=e.chat;t.composeQuotedMsg=e,t===f.default.toArray().find((e=>e.active))?p.default.focusChatTextInput(t):p.default.openChatBottom(t)}onPrivateReplyMessage(){var e=(0,K.unproxy)(this.props.msg);f.default.find(e.sender).then((e=>(0,o.promiseProps)({ok:p.default.openChatBottom(e),chat:e}))).then((({ok:t,chat:a})=>{t&&(a.composeQuotedMsg=e,this.props.msg&&this.props.msg.chat&&(a.composeQuotedMsgRemoteJid=this.props.msg.chat.id))}))}onDownload(){C.default.initDownload((0,K.unproxy)(this.props.msg))}onStarMessage(){var e=(0,K.unproxy)(this.props.msg);p.default.sendStarMsgs(e.chat,[e])}onUnstarMessage(){var e=(0,K.unproxy)(this.props.msg);p.default.sendUnstarMsgs(e.chat,[e])}_isKeyboardUser(){return this.context}getMsgComponent(e){var{msg:t,position:a,displayType:r,isMsgVisible:s,getSequentialMsg:i}=this.props;return l.createElement(G.default,null,l.createElement(B.default,{chat:t.chat,displayAuthor:e,displayType:r,hover:this.state.hover,isMsgVisible:s,maxWidth:this.maxWidth,msg:t,ref:this.setRefMsgComponent,position:a,getSequentialMsg:i,onProductClick:this.props.onProductClick,onMessageClick:this.props.onMessageClick,forwardStickerRef:this._stickerRef}))}getMsgComponentRef(){return this.refMsgComponent&&this.refMsgComponent.getRef()}onSelectChange(e){this.state.selected!==e&&this.setState({selected:e})}focus(e){this._refContainer&&b.default.focus(this._refContainer,e)}_hasContextMenu(){var{msg:e,displayType:t}=this.props;return!e.isNotification&&t!==v.default.DISP_TYPE.GALLERY&&t!==v.default.DISP_TYPE.CONTACT_CARD}_shouldShowMenuButton(){return this._hasContextMenu()&&!this.props.selectable&&(this.state.hover&&!this.state.highlighting||!!this.props.current||!!this.state.contextMenu)}_getHotkeysHandlers(){var e,t,{msg:a}=this.props;return"ptt"===a.type&&W.default.pttPlaybackSpeedEnabled&&(e=e=>{e.preventDefault(),e.stopPropagation(),H.default.increasePlaybackRateFor(a.id)},t=e=>{e.preventDefault(),e.stopPropagation(),H.default.decreasePlaybackRateFor(a.id)}),{enter:this._handleKeyActivation,space:this._handleKeyActivation,"shift+>":e,"shift+<":t}}render(){var e,{msg:t,position:a,displayType:r,selectedMessages:s,isFocusable:i}=this.props,o=r===v.default.DISP_TYPE.CONVERSATION,c=t.type!==v.default.MSG_TYPE.CHAT||r!==v.default.DISP_TYPE.STARRED_MSGS&&!!t.quotedMsg||!(a===x.MsgPosition.MID||a===x.MsgPosition.END)||r===v.default.DISP_TYPE.GALLERY||t.linkPreview||(0,P.isParsableOnlineVideoURL)(t.richPreviewType,t.matchedText,t.doNotPlayInline);this._shouldShowMenuButton()&&(e=l.createElement(L.default,{msg:t,position:a,key:"icon-context",ref:this.setRefContext,onToggle:e=>{this.onMenu(e)}}));var f=null;if(!t.isNotification&&this.props.selectable){var p=r===v.default.DISP_TYPE.GALLERY?"gallery":null;f=l.createElement(F.default,{checked:!!this.state.selected,onClick:this.onSelectClick,msgTheme:p})}var _=null;t.type===v.default.MSG_TYPE.STICKER&&this.props.selectable&&(_=l.createElement("span",null,l.createElement("div",{className:ee.default.stickerWrapperContainer,onMouseEnter:this._stickerRef.current?this._stickerRef.current.onMouseEnter:null,onClick:this.onSelectClick})));var g=!1;if(t.type===v.default.MSG_TYPE.CHAT){var E=m.default.match(t.body);g=1===E.length&&E[0][4][0].length===t.body.length}var S,C,y,b,T,M,N=t.chat&&t.chat.isPSA,A=!N&&!t.isNotification&&!this.props.tailOverride&&(a===x.MsgPosition.FRONT||a===x.MsgPosition.SINGLE)||r===v.default.DISP_TYPE.MSG_INFO||this.props.tailOverride,O=ue(t)&&(!c||t.isSentByMe||!t.isGroupMsg&&!t.quotedMsg)&&(o&&(a===x.MsgPosition.FRONT||a===x.MsgPosition.SINGLE)||!o),R=!this.props.selectable&&(r===v.default.DISP_TYPE.CONVERSATION||r===v.default.DISP_TYPE.MSG_INFO||r===v.default.DISP_TYPE.STARRED_MSGS),k=t.ephemeralOutOfSync&&!t.isNotification&&!t.isFutureproof,B=R&&this.state.canQuickForward,G=R&&W.default.quickMessageSearch&&t.isFrequentlyForwarded&&t.type===v.default.MSG_TYPE.CHAT,V=null!=t.bizPrivacyStatus,H=(0,n.default)(ee.default.msg,{[ee.default.msgContinuation]:!(a!==x.MsgPosition.FRONT&&a!==x.MsgPosition.MID||t.isFromTemplate&&t.isQuickReply),[ee.default.msgPSA]:r!==v.default.DISP_TYPE.STARRED_MSGS&&N,[ee.default.msgSystem]:t.isNotification,[ee.default.msgGallery]:r===v.default.DISP_TYPE.STARRED_MSGS||r===v.default.DISP_TYPE.CONTACT_CARD||r===v.default.DISP_TYPE.GALLERY,[ee.default.msgInfo]:r===v.default.DISP_TYPE.MSG_INFO,[ee.default.msgWithQuickAction]:V||k||B||G,"message-out":!t.isNotification&&t.isSentByMe||r===v.default.DISP_TYPE.MSG_INFO,"message-in":!t.isNotification&&!t.isSentByMe,[w.LIST_FOCUSABLE_ITEM_CLASS_NAME]:i}),Y=(0,n.default)(ee.default.message,function(e){switch(e.type){case v.default.MSG_TYPE.NOTIFICATION_TEMPLATE:return e.isBizNotification?ee.default.messageBizNotification:void 0;case v.default.MSG_TYPE.E2E_NOTIFICATION:return e.chat.isSupportGroup()?ee.default.messageBizNotification:ee.default.messageE2ENotification;case v.default.MSG_TYPE.GROUPS_V4_INVITE:return ee.default.messageChat;case v.default.MSG_TYPE.CHAT:return(0,P.isParsableOnlineVideoURL)(e.richPreviewType,e.matchedText,e.doNotPlayInline)?ee.default.messageVideoLinkPreview:ee.default.messageChat;case v.default.MSG_TYPE.LOCATION:return e.isLive?ee.default.messageLiveLocation:ee.default.messageLocation;case v.default.MSG_TYPE.VCARD:return ee.default.messageVcard;case v.default.MSG_TYPE.CIPHERTEXT:return(0,n.default)(ee.default.messageChat,ee.default.messagePlaceholder);case v.default.MSG_TYPE.MULTI_VCARD:return ee.default.messageMultiVcard;case v.default.MSG_TYPE.IMAGE:return ee.default.messageImage;case v.default.MSG_TYPE.PRODUCT:return ee.default.messageProduct;case v.default.MSG_TYPE.STICKER:return ue(e)?ee.default.messageTransparent:ee.default.messageSticker;case v.default.MSG_TYPE.VIDEO:return e.mediaData.isGif?ee.default.messageGif:ee.default.messageVideo;case v.default.MSG_TYPE.AUDIO:return ee.default.messageAudio;case v.default.MSG_TYPE.PTT:return ee.default.messagePTT;case v.default.MSG_TYPE.DOCUMENT:return ee.default.messageDocument;case v.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY:case v.default.MSG_TYPE.BUTTONS_RESPONSE:case v.default.MSG_TYPE.LIST_RESPONSE:return ee.default.messageChat;case v.default.MSG_TYPE.ORDER:return ee.default.messageProduct;case v.default.MSG_TYPE.LIST:if((0,j.listMsgCanRender)(e))return ee.default.messageList;case v.default.MSG_TYPE.UNKNOWN:return(0,n.default)(ee.default.messageChat,ee.default.messagePlaceholder);default:return}}(t),{[ee.default.messageSystem]:t.isNotification,[ee.default.messageCode]:g,[ee.default.hasTail]:A,"tail-override-left":"left"===this.props.tailOverride,"tail-override-right":"right"===this.props.tailOverride,[ee.default.tailOverrideHide]:O}),K=(0,n.default)({[ee.default.messageBackground]:!ue(t),[ee.default.hasBorderBox]:!t.isNotification&&!ue(t),[ee.default.hasUrlCallButtons]:t.isFromTemplate&&t.hasTemplateButtons&&!t.isQuickReply});if(this._sizeMismatch&&!this.refBubble)return l.createElement("div",{className:ee.default.placeholder,ref:this.setRefBubble});S=this.state.contextMenu?"none":t.isRTL?"pop-fast-reverse":"pop-fast",this.state.contextMenu&&(C=l.createElement(X.default,{displayName:"MsgContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu},l.createElement(J.default,{contextMenu:this.state.contextMenu}))),this.props.isFocusedMsg&&(y=l.createElement(te.WhileFocusedListener,{parent:this})),s&&(b=l.createElement(te.SelectionListener,{parent:this,msgId:t.id.toString(),selectedMessages:s})),k?T=l.createElement("div",{className:ee.default.quickActionButton,onClick:this._openEphemeralInfoPopup,role:"button"},l.createElement(q.default,{name:"info-alt"})):V?T=l.createElement("div",{className:ee.default.quickActionButton,onClick:this._openBizPrivacyInfoPopup,role:"button"},l.createElement(q.default,{name:"info-alt"})):B?T=l.createElement("div",{className:ee.default.quickActionButton,onClick:()=>this.openForwardFlow(!1),role:"button"},l.createElement(q.default,{name:"forward-chat"})):G&&(T=l.createElement("div",{className:ee.default.quickActionButton,onClick:this._openWebSearchFlow,role:"button"},l.createElement(q.default,{name:"search"}))),t.mediaData&&(M=l.createElement(te.MediaListener,{parent:this,mediaData:t.mediaData}));var Q,$,ae,re,ne="msg-container";(t.isNotification&&(ne="msg-notification-container"),A)&&($="left"===this.props.tailOverride?ce(se):"right"===this.props.tailOverride?ce(ie):ce(t.isSentByMe),Q=l.createElement(q.default,{name:$,className:ee.default.tail,containerRef:this._refTail}));t.logInitialRender(),t.isFromTemplate&&t.hasTemplateButtons?ae=l.createElement(z.default,{msg:t,chat:t.chat}):null!=t.dynamicReplyButtons&&t.dynamicReplyButtons.length>0&&r!==v.default.DISP_TYPE.STARRED_MSGS&&(ae=l.createElement(h.default,{msg:t})),t.isNotification||a===x.MsgPosition.MID?re=null:t.isSentByMe?re=l.createElement(u.InvisibleLabel,null,D.default.t(15)):t.isGroupMsg||(re=l.createElement(u.InvisibleLabel,null,D.default.t(14,{author:t.displayName()})));var oe=null;return t.isEphemeral&&(oe=l.createElement(u.InvisibleLabel,null,D.default.t(5))),l.createElement(I.default,{className:H,"data-id":t.id.toString(),handlers:this._getHotkeysHandlers(),onDoubleClick:this.onDoubleClick,onRef:this._setRefContainer,tabIndex:-1},l.createElement(Z.default,{transitionName:"delay-leave"},f),l.createElement("div",{"data-a8n":d.default.key(ne),className:Y,onContextMenu:this._handleMouseContextMenu,onMouseOver:this.mouseEnter,onMouseEnter:this.mouseEnter,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,onMouseLeave:this.mouseLeave},Q,l.createElement(U.default,{displayType:r,msg:t}),_,l.createElement("div",{className:K,ref:this.setRefBubble},re,this.getMsgComponent(c),l.createElement(Z.default,{transitionName:S},e)),T,ae,oe),C,y,b,M)}}t.Wrapper=ne,ne.defaultProps={displayType:v.default.DISP_TYPE.CONVERSATION},ne.CONCERNS={msg:["asMms","asRevoked","author","body","chat","dir","ephemeralDuration","ephemeralOutOfSync","id","isBizNotification","isEphemeral","isFailed","isFrequentlyForwarded","isFutureproof","isGif","isGroupMsg","isLive","isMedia","isNotification","isRTL","isSentByMe","isUnsentMedia","isViewOnce","linkPreview","list","mediaData","matchedText","quotedMsg","richPreviewType","sender","star","subtype","type","title","hasTemplateButtons","isQuickReply","isFromTemplate","doNotPlayInline","ctwaContext","bizPrivacyStatus","verifiedBizName","templateParams","dynamicReplyButtons","replyButtons"]},ne.contextType=A.default,ne.displayName="Wrapper";var oe=(0,Q.default)((0,R.default)((0,Y.default)(ne,ne.CONCERNS)));t.default=class extends oe{focus(e){this.getComponent().focus(e)}openContextMenu(){this.getComponent().openContextMenu()}getMsgComponentRef(){return this.getComponent().getMsgComponentRef()}};var le=l.forwardRef((function(e,t){var a=e.theme?ee.default[e.theme]:null,r=(0,n.default)(ee.default.msg,ee.default.msgSystem,a,{[w.LIST_FOCUSABLE_ITEM_CLASS_NAME]:e.isFocusable}),s=(0,n.default)(ee.default.message,ee.default.messageSystem,{[ee.default.messageHidden]:e.hidden});return l.createElement("div",{className:r,tabIndex:-1,ref:t},l.createElement("div",{className:s},e.children))}));function de(e){var t=(0,n.default)(ee.default.msgContainer,{"message-out":e.isSentByMe,"message-in":!e.isSentByMe}),a=(0,n.default)(ee.default.message,ee.default.hasTail,"tail-override-left");return l.createElement("div",{className:t},l.createElement("div",{className:a},l.createElement("div",{className:ee.default.messageBackground},l.createElement("div",{className:ee.default.tail},l.createElement(q.default,{name:ce(se)})),e.children)))}function ue(e){return e.type===v.default.MSG_TYPE.STICKER&&!e.quotedMsg&&!e.ctwaContext}function ce(e){return e?D.default.isRTL()?"tail-in":"tail-out":D.default.isRTL()?"tail-out":"tail-in"}t.SystemBubble=le,de.displayName="MessageContainer"},30870:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(22220)),o=s(a(72779)),l=r(a(2784)),d=s(a(88665)),u=s(a(46650)),c=s(a(81022)),h=s(a(79711)),f=s(a(50935)),p=s(a(62181)),m=s(a(66026)),_=a(13414),v=s(a(17957)),g=s(a(38203)),E=s(a(20642)),S=s(a(79575)),C=a(97526),y=s(a(58885)),b=s(a(61941)),T=s(a(63807)),M=s(a(58355));function N(){var e=(0,i.default)(["getMsgVisibility on invalid ref: ",""]);return N=function(){return e},e}class I extends l.Component{constructor(e){super(e),this._renderedMsgs={},this.renderedDateMarkers={},this._renderedAlbums={},this._renderedMsgToAlbum={},this._refUnread=l.createRef(),this._getRefUnread=()=>this._refUnread.current,this._handleRefreshMessages=()=>{this.forceUpdate()},this._handleOpenMediaViewerForAlbumMedia=e=>{var t=this._renderedMsgToAlbum[e.id.toString()];if(t&&!t.isGroupedSticker()){var a=t.props.msgs,r=new Set((a||[]).map((e=>e.id.toString())));this._renderedMsgToAlbum[e.id.toString()]&&h.default.mediaViewerModal({msg:e,getZoomNode:()=>{var a=t.refAlbumComponents[e.id.toString()];return null==a?void 0:a.getContainerElement()},highlightedMsgIds:r})}},this.onMsgKeyChange=({newKey:e,oldKey:t})=>{var a=e.toString(),r=t.toString(),s=this._renderedMsgs[r];s&&(delete this._renderedMsgs[r],this._renderedMsgs[a]=s)},this._onMsgRendered=(e,t)=>{e?this._renderedMsgs[t]=e:delete this._renderedMsgs[t]},this._rowRenderers={msg:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(((e,t,a,r)=>{var s,i=this.props;s=r&&!a?C.MsgPosition.FRONT:r&&a?C.MsgPosition.MID:!r&&a?C.MsgPosition.END:C.MsgPosition.SINGLE;var n=e.type===f.default.MSG_TYPE.IMAGE||e.type===f.default.MSG_TYPE.VIDEO||e.type===f.default.MSG_TYPE.AUDIO;return l.createElement(M.default,{key:"msg-"+e.id.toString(),ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((t=>{var a={};(0,_.GetRef)((e=>{a.wrapper=e}))(t),this._onMsgRendered(a.wrapper,e.id.toString())})),msg:e.unsafe(),displayType:f.default.DISP_TYPE.CONVERSATION,isMsgVisible:n?i.isMsgVisible:()=>{},selectable:i.selectable,selectedMessages:i.selectedMessages,onMessageSelect:i.onMessageSelect,position:s,isFocusedMsg:t,getSequentialMsg:this.props.getSequentialMsg,isFocusable:!0})})),album:(e,t,a,r,s,i)=>{var n,o=this.props;return n=r&&!a?C.MsgPosition.FRONT:r&&a?C.MsgPosition.MID:!r&&a?C.MsgPosition.END:C.MsgPosition.SINGLE,l.createElement(u.default,{msgs:e,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((a=>{this._onAlbumRendered(a,t,e)})),key:"album-"+t,position:n,isMsgVisible:o.isMsgVisible,selectable:o.selectable,selectedMessages:o.selectedMessages,onMessageSelect:o.onMessageSelect,albumId:t,isFocusedAlbum:s,focusedMsgIndex:i,isFocusable:!0})},date:(e,t)=>{var{isLoadingEarlierMsgs:a}=this.props;return l.createElement(p.default,{ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._onDateMarkerRendered(t,e)})),key:"msg-"+e.id.toString()+"-date",timestamp:e.t,isFocusable:!a||0!==t})},unread:()=>l.createElement(T.default,{key:"msg-unread",count:this.props.unreadCount,textContainerRef:this._refUnread})},this._openMsgContextMenu=e=>{if(e.target instanceof HTMLElement){var t,a,r=null===(t=e.target.dataset)||void 0===t?void 0:t.id,s=this._renderedMsgs[r]||this._renderedAlbums[r];null==s||null===(a=s.openContextMenu)||void 0===a||a.call(s)}},this._handleBeforeEnd=()=>h.default.openChatBottom(this.props.chat).then((()=>{}));var{msgs:t}=e;this._latestMsgWhenChatOpen=t.length>0?t[t.length-1]:null}shouldComponentUpdate(e){var{msgs:t}=e,a=(0,n.default)(e,["msgs"]),r=this.props,{msgs:s}=r,i=(0,n.default)(r,["msgs"]);return!(0,d.default)(a,i)||!(0,c.default)(t,s)}getSnapshotBeforeUpdate(){var e,t=this.props.getScrollContainer(),a=this.props.msgs.find((e=>this._renderedMsgs.hasOwnProperty(e.id)));if(null==a)return null;var r=a.id.toString();return{commonMessageId:r,commonMessageTop:(0,b.default)(null===(e=this.getMsgWrapperRef(r))||void 0===e?void 0:e.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()").offsetTop-t.scrollTop}}componentDidMount(){this.props.listeners.add(y.default,"change:msgKey",this.onMsgKeyChange),this.props.listeners.add(h.default,"refresh_messages",this._handleRefreshMessages),this.props.listeners.add(h.default,"open_media_viewer_for_album_media",this._handleOpenMediaViewerForAlbumMedia)}componentDidUpdate(e,t,a){var r=this.props.getScrollContainer();if(null!=a){var s,{commonMessageId:i,commonMessageTop:n}=a,o=(0,b.default)(null===(s=this.getMsgWrapperRef(i))||void 0===s?void 0:s.getContainerElement(),"this.getMsgWrapperRef(commonMessageId)?.getContainerElement()");r.scrollTop=o.offsetTop-n}}getMsgVisibility(e){var t=this.props.getScrollContainer(),a=t.scrollTop,r=a+t.clientHeight,s=null==e?void 0:e.getContainerElement();return s?s.offsetTop+s.clientHeight<=a?{visibility:f.default.VISIBILITY.ABOVE,offset:s.offsetTop-a}:s.offsetTop>=r?{visibility:f.default.VISIBILITY.BELOW,offset:s.offsetTop-a}:{visibility:f.default.VISIBILITY.VISIBLE,offset:s.offsetTop-a}:(__LOG__(3)(N(),e),{visibility:f.default.VISIBILITY.VISIBLE,offset:0})}getMsgWrapperRef(e){return this._renderedMsgs[e]||this._renderedMsgToAlbum[e]}getMsgComponentRef(e){return this._renderedMsgs[e]?this._renderedMsgs[e].refMsgComponent&&this._renderedMsgs[e].refMsgComponent.getRef():this._renderedMsgToAlbum[e]?this._renderedMsgToAlbum[e].refAlbumComponents[e]&&this._renderedMsgToAlbum[e].refAlbumComponents[e].getRef():void 0}getDateMarkerRef(e){return this.renderedDateMarkers[e]}_onDateMarkerRendered(e,t){t?this.renderedDateMarkers[e]=t:delete this.renderedDateMarkers[e]}_onAlbumRendered(e,t,a){e?(this._renderedAlbums[t]=e,a.forEach((t=>{this._renderedMsgToAlbum[t.id.toString()]=e}))):delete this._renderedAlbums[t]}render(){var e,t,a,r,{msgs:s,focusedMsgCtx:i,unreadCount:n}=this.props;i&&(a=i.msg,i.isUnreadDivider&&n>0&&(r=i.msg));var d=(0,o.default)(S.default.messageList,{[S.default.messageListSelectable]:this.props.selectable}),u={["".concat(v.default.LR("right","left"))]:this._openMsgContextMenu},c=v.default.LR(v.default.t(12),v.default.t(13));return l.createElement(g.default,{dataTab:f.default.TAB_ORDERS.MESSAGE_LIST,className:d,getPriorityFocusItem:this._getRefUnread,onBeforeEnd:this._handleBeforeEnd,handlers:u,role:"region","aria-label":c},(0,m.default)(this._rowRenderers,s,null===(e=a)||void 0===e?void 0:e.safe(),null===(t=r)||void 0===t?void 0:t.safe(),n,this._latestMsgWhenChatOpen))}}I.displayName="MessageList";var P=(0,E.default)(I);t.default=P},72457:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f,t.OrderTitle=p,t.OrderDescription=m;var i=s(a(72779)),n=r(a(2784)),o=r(a(37356)),l=s(a(91581)),d=s(a(17957)),u=s(a(48294)),c=s(a(72424)),h=s(a(82631));function f(e){var t,{msg:a,onClick:r,theme:s}=e,{thumbnail:o,isSentByMe:l}=a;o&&(t=n.createElement("div",{className:u.default.media,style:{backgroundImage:'url("data:image/jpeg;base64,'.concat(o,'")')}}));var d=(0,i.default)(u.default.preview,{[u.default.bubbleIn]:!l&&"quoted"!==s,[u.default.bubbleOut]:l||"quoted"===s,[u.default.quoted]:"quoted"===s});return n.createElement("div",{className:d,onClick:r},t,n.createElement("div",{className:u.default.body},n.createElement(p,{msg:a}),n.createElement(m,{msg:a})))}function p(e){var t,{msg:a}=e;if(c.default.webCartV11OrderMessageChanges){var r=d.default.t(864,{count:a.itemCount||0,_plural:a.itemCount||0});t=n.createElement(n.Fragment,null,n.createElement(h.default,{className:u.default.titleIcon,name:"shopping-cart"}),n.createElement(l.default,{text:r}))}else t=n.createElement(l.default,{text:a.orderTitle});return n.createElement("div",{className:u.default.title},t)}function m(e){var{msg:t,showMessage:a}=e,{totalAmount1000:r,totalCurrencyCode:s,itemCount:i}=t,f=null;if(c.default.webCartV11OrderMessageChanges&&null!=r&&null!=s&&""!==s){var p=d.default.t(1162,{total:o.format(s,r)});f=n.createElement(l.default,{text:p})}else if(!c.default.webCartV11OrderMessageChanges){var m=d.default.t(864,{count:i||0,_plural:i||0});f=n.createElement(n.Fragment,null,n.createElement(h.default,{className:u.default.descriptionIcon,name:"shopping-cart"}),n.createElement(l.default,{text:m}))}var _=!0===a?n.createElement(l.default,{text:t.message}):null;return n.createElement("div",null,n.createElement("div",{className:u.default.description},f),_)}f.displayName="OrderPreview",p.displayName="OrderTitle",m.displayName="OrderDescription"},69789:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(18872));class o extends i.PureComponent{render(){return i.createElement(n.default,this.props)}}o.displayName="PTT";var l=o;t.default=l},18872:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(52954)),o=s(a(68015)),l=s(a(72779)),d=r(a(2784)),u=s(a(32960)),c=s(a(79504)),h=s(a(19899)),f=s(a(79711)),p=s(a(9386)),m=s(a(50935)),_=a(19741),v=r(a(96452)),g=s(a(6660)),E=r(a(45356)),S=s(a(10792)),C=s(a(17957)),y=s(a(20642)),b=a(28278),T=r(a(16622)),M=s(a(40210)),N=s(a(61941)),I=s(a(25012)),P=a(207),A=s(a(72259)),O=s(a(86753)),D=s(a(82170)),w=s(a(82631)),R=s(a(67134)),k=s(a(17693)),L=s(a(74824)),x=s(a(51701));function F(){var e=(0,i.default)(["PTT Recording Error"]);return F=function(){return e},e}var{KEYBOARD_EVENT_KEY_VALUE:B}=S.default;class G extends d.PureComponent{constructor(...e){var t;super(...e),t=this,this._isUnmounted=!1,this._cancelButtonRef=d.createRef(),this.state={state:"ready",active:null,elapsed:0},this._cancelRecording=()=>{"ready"!==this.state.state&&(this._recorder&&(this._recorder.stop(),this._recorder=null),this._clearInterval(),(0,P.markPaused)(this.props.chat),this.setState({state:"ready",active:void 0,elapsed:0}),this.props.onRecState(!1))},this._onPTTReady=()=>{this._cancelPTTTimer(),"delay"===this.state.state&&this.setState({state:"recording"})},this._handleSendButtonMouseOver=()=>{this.setState({active:"send"})},this._handleSendButtonMouseOut=()=>{this.setState({active:void 0})},this._handleCancelButtonMouseOver=()=>{this.setState({active:"cancel"})},this._handleCancelButtonMouseOut=()=>{this.setState({active:void 0})},this._handleCancelButtonMouseUp=()=>{"ready"!==this.state.state&&(j((0,N.default)(this._recorder,"this._recorder"),M.default.PTT_RESULT_TYPE.CANCELLED),this._cancelPTTTimer(),this._cancelRecording())},this._handleCancelButtonKeyPress=e=>{e.key!==B.ENTER&&e.key!==B.SPACE||(e.preventDefault(),e.stopPropagation(),this._handleCancelButtonMouseUp())},this._handleSendButtonKeyPress=e=>{e.key!==B.ENTER&&e.key!==B.SPACE||(e.preventDefault(),e.stopPropagation(),this._handleSendButtonMouseUp())},this._handleSendButtonMouseUp=()=>{if("recording"===this.state.state){this._cancelPTTTimer();var e=(0,N.default)(this._recorder,"this._recorder"),t=this.props.chat;this.setState({state:"processing"}),this.props.onRecState(!1),j(e,M.default.PTT_RESULT_TYPE.SENT);var a=t.regCancellablePromise((0,x.default)(e,"dataAvailable").then((e=>I.default.createFromData(e.detail,e.detail.type)))),r=t.getComposeContents().ctwaContext||void 0;(0,b.prepRawMedia)(a,{isPtt:!0,precomputedFields:{duration:~~e.duration}}).sendToChat(t,{quotedMsg:t.composeQuotedMsg||void 0,addEvenWhilePreparing:!0,ctwaContext:r}),t.composeQuotedMsg=null,a.catchType(Promise.CancellationError,(()=>{})).finally((()=>{this._cancelRecording()})),e.stop(),this.props.onRecordingSent()}},this._handlePttButtonKeyPress=e=>{e.key!==B.ENTER&&e.key!==B.SPACE||(e.preventDefault(),e.stopPropagation(),this._startRecord())},this._startRecord=(0,n.default)((function*(){var e,{checkForMicrophoneAccess:r}=t.props;if(r&&!(yield r()))return;if("ready"===t.state.state)if(c.default.activeCall)f.default.openModal(d.createElement(p.default,{onOK:()=>f.default.closeModal()},C.default.t(822)));else try{var s=yield T.start("microphone");if(e=()=>{try{T.stop(s)}catch(e){}},t._isUnmounted)return void e();f.default.pttRecording();var i=new D.default({bitRate:16e3,encoderSampleRate:16e3,encoderApplication:2048});t._recorder=i,i.initStream(s),i.start(),a(99098).default.update(t.props.chat.presence.id).catchType(_.WebdDrop,(()=>{})),(0,P.markRecording)(t.props.chat),t.setState({state:"delay"}),t.props.onRecState(!0),t._pttTimer=t.props.setTimeout(t._onPTTReady,1500),t._startInterval()}catch(a){var n,o;if(null===(n=e)||void 0===n||n(),null===(o=t._recorder)||void 0===o||o.stop(),a instanceof v.GUM.NotAllowedError)return void f.default.openModal(d.createElement(E.default,{messaging:E.Messaging.MIC_FAIL,type:E.default.TYPE.GUIDE_UNBLOCK}));if(a instanceof v.GUM.GUMError)return void f.default.openModal(d.createElement(E.default,{messaging:E.Messaging.MIC_MISSING,type:E.default.TYPE.GUIDE_NONE}));__LOG__(3)(F())}}))}componentDidMount(){this.props.listeners.add(window,"blur",this._cancelRecording)}componentWillUnmount(){this._isUnmounted=!0,this._cancelRecording()}componentDidUpdate(e,t){"delay"===this.state.state&&"delay"!==t.state&&g.default.focus(this._cancelButtonRef.current)}_startInterval(){this._clearInterval(),this._elapsedInterval=this.props.setInterval((()=>{this.setState({elapsed:this.state.elapsed+1})}),1e3)}_clearInterval(){null!=this._elapsedInterval&&(this.props.clearInterval(this._elapsedInterval),this._elapsedInterval=null),this.setState({elapsed:0})}_cancelPTTTimer(){null!=this._pttTimer&&(this.props.clearTimeout(this._pttTimer),this._pttTimer=null)}render(){var e=this.state.state,t=(0,l.default)(O.default.btnBorder,O.default.btnCancel,{[O.default.isHover]:"cancel"===this.state.active}),a=(0,l.default)(O.default.btnBorder,O.default.btnSend,{[O.default.isHover]:"send"===this.state.active}),r="delay"===e||"recording"===e?d.createElement(k.default,{displayName:"PTT",popable:!0,escapable:!0},d.createElement("div",{className:O.default.recording,key:"recording"},d.createElement("button",{"data-a8n":u.default.key("ptt-cancel-btn"),"data-tab":m.default.TAB_ORDERS.PTT_BUTTON,className:t,onMouseOver:this._handleCancelButtonMouseOver,onMouseOut:this._handleCancelButtonMouseOut,onMouseUp:this._handleCancelButtonMouseUp,onKeyPress:this._handleCancelButtonKeyPress,ref:this._cancelButtonRef,"aria-label":C.default.t(25),"data-animate-btn-border":!0},d.createElement("div",{className:(0,l.default)(O.default.btnBorderIcon,O.default.btnStateDefault)},d.createElement(w.default,{name:"round-x"})),d.createElement("div",{className:(0,l.default)(O.default.btnBorderIcon,O.default.btnStateHover)},d.createElement(w.default,{name:"round-x-inv"}))),d.createElement("div",{className:O.default.pttCounter,"data-animate-ptt-counter":!0},h.default.durationStr(this.state.elapsed)),d.createElement("button",{"data-a8n":u.default.key("ptt-send-btn"),"data-tab":m.default.TAB_ORDERS.PTT_BUTTON,className:a,onMouseOver:this._handleSendButtonMouseOver,onMouseOut:this._handleSendButtonMouseOut,onMouseUp:this._handleSendButtonMouseUp,onKeyPress:this._handleSendButtonKeyPress,"aria-label":C.default.t(27),"data-animate-btn-border":!0},d.createElement("div",{className:(0,l.default)(O.default.btnBorderIcon,O.default.btnStateDefault)},d.createElement(w.default,{name:"round-send"})),d.createElement("div",{className:(0,l.default)(O.default.btnBorderIcon,O.default.btnStateHover)},d.createElement(w.default,{name:"round-send-inv"}))))):null,s="ready"===e||"processing"===e?d.createElement("button",{"data-a8n":u.default.key("ptt-ready-btn"),className:O.default.btnPtt,onMouseDown:this._startRecord,onKeyPress:this._handlePttButtonKeyPress,disabled:"processing"===e,key:"button","aria-label":C.default.t(26),"data-tab":m.default.TAB_ORDERS.PTT_BUTTON},d.createElement(w.default,{name:"ptt"})):null,i=(0,l.default)(O.default.container,{[O.default.active]:!!r});return d.createElement("div",{className:i},d.createElement(L.default,{transitionName:"ptt"},r||s))}}G.displayName="PTTBase";var U=(0,A.default)((0,R.default)((0,y.default)(G)));function j(){return V.apply(this,arguments)}function V(){return(V=(0,n.default)((function*(e,t){yield(0,x.default)(e,"dataAvailable"),new M.default.Ptt({pttSource:M.default.PTT_SOURCE_TYPE.FROM_CONVERSATION,pttResult:t,pttDuration:Math.round(e.duration),pttSize:(0,o.default)(e.totalLength,-3)}).commit()}))).apply(this,arguments)}t.default=U},68537:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(43322),o=r(a(62830)),l=r(a(79148)),d=r(a(64)),u=r(a(79711)),c=r(a(9386)),h=r(a(50935)),f=r(a(18120)),p=r(a(98294)),m=r(a(71292)),_=r(a(17957)),v=r(a(20642)),g=r(a(50540)),E=a(89590),S=r(a(53175)),C=a(25995),y=r(a(23136)),b=r(a(40207)),T=a(64658);class M extends i.PureComponent{constructor(...e){super(...e),this._confirmReportGroupSpam=()=>{u.default.openModal(i.createElement(g.default,{isGroupChat:!0,onReport:this.reportSpam,onReportExitClear:this.reportSpamExitClear,onCancel:()=>u.default.closeModal()}))},this._exitChat=()=>{u.default.deleteOrExitChat(this.props.chat)},this._confirmReportSpam=()=>{u.default.openModal(i.createElement(g.default,{isBusiness:this.props.contact.isBusiness,isGroupChat:!1,onReport:this.reportSpam,onReportBlockClear:this.reportSpamBlockClear,onCancel:()=>u.default.closeModal()}))},this.reportSpam=()=>{(0,E.sendSpamReport)(this.props.chat,C.SpamFlow.Chat),u.default.closeModal()},this.reportSpamExitClear=()=>{(0,E.sendSpamExitClear)(this.props.chat),u.default.closeModal()},this.reportSpamBlockClear=()=>{(0,E.sendSpamBlockClear)(this.props.chat),u.default.closeModal()},this.notSpam=()=>{(0,E.sendNotSpam)(this.props.chat,!0).catch((()=>{}))},this._confirmBlock=()=>{u.default.openModal(i.createElement(o.default,{contact:this.props.contact,onCancel:()=>u.default.closeModal(),onBlock:this.block,onReportSpamBlock:this.reportSpamBlock}))},this.block=()=>{(0,n.blockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this.reportSpamBlock=()=>{(0,E.sendSpamReport)(this.props.chat,C.SpamFlow.Block),(0,n.blockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this._confirmUnblock=()=>{u.default.openModal(i.createElement(c.default,{okText:_.default.t(1407),onOK:this.unblock,cancelText:_.default.t(1593),onCancel:()=>u.default.closeModal()},_.default.t(1408,{contact:this.props.contact.formattedName})))},this.unblock=()=>{(0,n.unblockContact)(this.props.contact).catch((()=>{})),u.default.closeModal()},this._getNotSpamButton=()=>i.createElement("div",{key:"not_spam",className:S.default.button},i.createElement(d.default,{onClick:this.notSpam,type:"plain-white"},_.default.t(1761))),this._onViewInfo=()=>{u.default.openDrawerRight(i.createElement(m.default,{chat:(0,T.unproxy)(this.props.chat),key:"info-".concat(this.props.chat.id.toString())}),"slide-left",this.props.uim)}}componentDidMount(){this.props.listeners.add(l.default,"add remove reset",(()=>{this.forceUpdate()}))}render(){var{chat:e,contact:t}=this.props;if(e.isPSA||!e.shouldAppearInList||e.trusted)return null;var a,r=l.default.get(e.id),s=[];if(e.isGroup)a=_.default.t(751),s.push(i.createElement("div",{key:"report_spam",className:S.default.button},i.createElement(d.default,{type:"plain-white",onClick:this._confirmReportGroupSpam},_.default.t(1233)))),s.push(i.createElement("div",{key:"exit_group",className:S.default.button},i.createElement(d.default,{type:"plain-white",onClick:this._exitChat},_.default.t(1638)))),s.push(this._getNotSpamButton());else{if(a=i.createElement("div",{className:S.default.text},_.default.t(1330)),t.isBusiness)if(f.default.supportsFeature(f.default.F.VNAME_V_2)){var n=t.verifiedLevel===h.default.VERIFIED_LEVEL.HIGH?_.default.t(1144):_.default.t(929);a=i.createElement("div",{className:S.default.text},n)}else t.verifiedLevel>h.default.VERIFIED_LEVEL.UNKNOWN&&t.businessProfile&&(a=i.createElement(y.default,{contact:t,businessProfile:t.businessProfile,onClick:this._onViewInfo}));s.push(i.createElement("div",{key:"report_spam",className:S.default.button},i.createElement(d.default,{type:"plain-white",onClick:this._confirmReportSpam},_.default.t(1233)))),r?s.push(i.createElement("div",{key:"unblock",className:S.default.button},i.createElement(d.default,{onClick:this._confirmUnblock,type:"plain-white"},_.default.t(1407)))):s.push(i.createElement("div",{key:"block",className:S.default.button},i.createElement(d.default,{onClick:this._confirmBlock,type:"plain-white"},_.default.t(279)))),s.push(this._getNotSpamButton())}return i.createElement("div",{className:S.default.spam},a,i.createElement("div",{className:S.default.controls},s))}}M.CONCERNS={chat:["id","isPSA","shouldAppearInList","trusted","isGroup","vcardDismissed"],contact:["id","isBusiness","verifiedLevel","formattedName","businessProfile"]},M.displayName="Spam";var N=(0,p.default)((0,v.default)((0,b.default)(M,M.CONCERNS)));t.default=N},23136:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(50935)),o=r(a(46478)),l=r(a(91581)),d=r(a(17957)),u=r(a(84974)),c=r(a(2825)),h=r(a(40207)),f=r(a(82631));class p extends i.PureComponent{getAddressString(e){var{streetAddress:t,localizedCityName:a,zipCode:r}=e;return t&&a&&r?d.default.t(373,{streetAddress:t,city:a,zipCode:r}):t&&a?d.default.t(372,{streetAddress:t,city:a}):t}render(){var e,t,a,r,{businessProfile:s,contact:d}=this.props,{id:h,formattedName:p,verifiedLevel:m}=d;if(s.stale)a=i.createElement("div",null,i.createElement(c.default,{size:20,stroke:5}));else{var _=s.structuredAddress&&this.getAddressString(s.structuredAddress);_&&(e=i.createElement("div",{className:u.default.address},i.createElement(l.default,{selectable:!0,direction:"auto",text:_}))),s.description&&(t=i.createElement("div",{className:u.default.description,title:s.description},i.createElement(l.default,{selectable:!0,direction:"auto",text:s.description})))}return m===n.default.VERIFIED_LEVEL.HIGH&&(r=i.createElement("div",{className:u.default.badge},i.createElement(f.default,{name:"psa-verified"}))),i.createElement("div",{className:u.default.container,onClick:this.props.onClick},i.createElement("div",{className:u.default.image},i.createElement(o.default,{id:h,size:55}),r),i.createElement("div",{className:u.default.body},i.createElement("div",{className:u.default.name},p),a,e,t))}}p.CONCERNS={contact:["id","verifiedLevel","formattedName"],businessProfile:["stale","structuredAddress","description"]},p.displayName="SpamBusinessInfo";var m=(0,h.default)(p,p.CONCERNS);t.default=m},76133:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(64)),o=r(a(79711)),l=r(a(92229)),d=r(a(98294)),u=r(a(81524)),c=r(a(40207)),h=r(a(59600));class f extends i.PureComponent{constructor(...e){super(...e),this.onViewContact=()=>{o.default.openDrawerRight(i.createElement(l.default,{chat:this.props.chat}),"slide-left",this.props.uim)}}render(){var{chat:e,dismissVcardPanel:t}=this.props,a=e.receivedVcardMsgs;return i.createElement("div",{className:h.default.vcard},i.createElement(u.default,{id:720,plural:a.length}),i.createElement("div",{className:h.default.controls},i.createElement(n.default,{onClick:this.onViewContact,type:"plain-white"},i.createElement(u.default,{id:1468,plural:a.length})),i.createElement(n.default,{onClick:t,type:"plain-white"},i.createElement(u.default,{id:1135}))))}}f.CONCERNS={chat:["receivedVcardMsgs"]},f.displayName="VcardPanel";var p=(0,d.default)((0,c.default)(f,f.CONCERNS));t.default=p},33296:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(91460),n=s(a(2784)),o=r(a(79711)),l=r(a(9386)),d=r(a(29505)),u=a(95595),c=r(a(63789)),h=r(a(97934)),f=r(a(17957)),p=s(a(90088)),m=r(a(60127)),_=r(a(2825));class v extends d.default{constructor(...e){super(...e),this._cancel=()=>{this._queryChatPromise&&this._queryChatPromise.cancel(),this._queryChatPromise=void 0,this.end()},this.error=()=>{this.push(n.createElement(l.default,{onOK:()=>this.end(),okText:f.default.t(1761)},f.default.t(1028)))}}componentDidMount(){var e=!1,t=(0,i.delayMs)(250).cancellable().then((()=>{e=!0,this.push(n.createElement(l.default,{title:f.default.t(1343),onCancel:this._cancel,cancelText:f.default.t(1593)},n.createElement("div",{className:m.default.spinner},n.createElement(_.default,{stroke:6,size:24}))))})).catchType(Promise.CancellationError,(()=>{})),a=Date.now();this._queryChatPromise=(0,h.default)(this.props.chatId).cancellable().then((e=>(0,c.default)(e))).then((r=>{e||t.cancel();var s=Date.now()-a,n=e?Math.max(750-s,0):0;return this.openChat(r),(0,i.delayMs)(n).then((()=>{this.end(),this.props.onSuccess(r)}))})).catchType(Promise.CancellationError,(()=>{})).catch((e=>{t.cancel(),this.error(e)}))}openChat(e){var{msgText:t}=this.props,a=this.props.ctwaContextLinkData;if(a){var r=p.findLink(a.sourceUrl||"",!1,(0,u.getMaybeMeUser)());r&&r.suspiciousCharacters&&r.suspiciousCharacters.size>0&&(a=null)}a&&(t=a.icebreaker),e.active&&t?(o.default.pasteChatTextInput(e,t),a&&o.default.setChatCtwaContextLinkData(e,a)):(t&&e.setComposeContents({text:t}),o.default.openChatFromUnread(e).then((t=>{t&&(o.default.focusChatTextInput(e),a&&o.default.setChatCtwaContextLinkData(e,a))})))}}t.default=v,v.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},91944:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(60846),o=r(a(79711)),l=r(a(50935)),d=r(a(29505)),u=r(a(17957)),c=s(a(51079));class h extends d.default{constructor(...e){super(...e),this._onStartGroupCall=e=>{this.props.onStartGroupCall(e.map((e=>e.id))),o.default.closeModal()},this.contactFilter=e=>!this.props.groupParticipants||!!this.props.groupParticipants.find((t=>t.equals(e.id))),this._pop=()=>{this.pop()}}componentDidMount(){this.push(i.createElement(c.default,{title:this.props.isVideo?u.default.t(799):u.default.t(800),filter:this.contactFilter,onCancel:this._pop,onConfirm:this._onStartGroupCall,listType:c.ListType.PARTICIPANT_MANAGE_MODAL,maxItems:l.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,maxItemsExceedErrorMsg:u.default.t(1529,{count:l.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS,_plural:l.default.VOIP_MAX_GROUP_CALL_PARTICIPANTS}),singleSelectionFooterType:this.props.isVideo?n.FooterType.VIDEO_CALL:n.FooterType.VOICE_CALL,multipleSelectionFooterType:this.props.isVideo?n.FooterType.VIDEO_CALL:n.FooterType.VOICE_CALL,allowBlockedContacts:!1}))}}t.default=h},29505:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(95972)),o=r(a(61941)),l=r(a(17693)),d=r(a(5179)),u=r(a(74824));class c extends i.Component{constructor(...e){super(...e),this.state={_stack:[],_transition:"default",_activeKey:0,_ended:!1},this.setRefUIE=e=>{this.refUIE=e},this.popAndUpdate=(e,t)=>{var a=this.state._stack;if(a.length<2)this.pop(t);else{var r=i.cloneElement(a[a.length-2],e);a[a.length-2]=r,this.pop(t)}},this.push=(e,t=this.props.pushTransition)=>{this.setState({_stack:this.state._stack.concat(e),_transition:t,_activeKey:++this.state._activeKey,_ended:!1})},this.pop=(e=this.props.popTransition)=>{var t=this.state._stack.slice(0,-1);t.length?this.setState({_stack:t,_transition:e,_activeKey:--this.state._activeKey}):this.state._ended||this.setState({_ended:!0},this.end)},this.end=e=>{this.props.onEnd?this.props.onEnd(e):(0,o.default)(this.context,"this.context").uie.requestDismiss(e)},this.stackSize=()=>this.state._stack.length,this.requestFocus=()=>{this.props.requestFocus&&this.props.requestFocus()}}handleRequestDismiss(){this.pop()}render(){var{_stack:e,_transition:t,_activeKey:a}=this.state;if(0===e.length)return null;var r=e[e.length-1];return r=i.createElement(l.default,{displayName:"FlowDrawer".concat(a),key:a,escapable:!0,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.handleRequestDismiss.bind(this)},r),i.createElement(u.default,{transitionName:t,className:n.default.container},this.props.removeTopDrawer?r:e)}}t.default=c,c.contextType=d.default,c.defaultProps={removeTopDrawer:!0,pushTransition:"flow-transition-drawer-push",popTransition:"flow-transition-drawer-pop"},c.displayName="FlowComponent"},40207:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){var s,o,p=(0,u.default)(e);t||a||(__LOG__(4,void 0,new Error,!0)(f()),SEND_LOGS("StateHOC wrapping class with no concerns, check ".concat(p)));var m=[];if(t)for(var _ in t)m.push(new d.default(p,_,t[_],!0));if(a)for(var v in a)t&&t.hasOwnProperty(v)&&(__LOG__(4,void 0,new Error,!0)(h()),SEND_LOGS('Component has marked "'.concat(v,'" as both a normal and weak concern, check ').concat(p))),m.push(new d.default(p,v,a[v],!1));return o=s=class t extends c.WrappedComponent{constructor(e){super(e),this._rr=(e,t)=>{this.setState((a=>({proxies:(0,n.default)((0,n.default)({},a.proxies),{},{[e.name]:e.createProxy(t)})})))};for(var a={},r=!1,s=0;s<m.length;s++){var i=m[s],o=i.name,l=i.getModelAndValidate(t._getModelOrProxy(o,e));if(l){var d=i.createProxy(l);i.attachConcern(l,d.proxyBitMask,this._rr),a[o]=d}else r=!0}this.state={props:e,proxies:a,hasBroken:r}}static _getModelOrProxy(e,t){return t[e]}static getDerivedStateFromProps(e,a){var r=(0,n.default)({},a.proxies),s=!1;if(!a.hasBroken)for(var i=a.props,o=0;o<m.length;o++){var l=m[o],d=l.name,u=l.getModel(t._getModelOrProxy(d,i)),c=l.getModelAndValidate(t._getModelOrProxy(d,e));u!==c&&(c?r[d]=l.createProxy(c):s=!0)}return{props:e,proxies:r,hasBroken:s}}componentDidUpdate(e){if(!this.state.hasBroken)for(var a=0;a<m.length;a++){var r=m[a],s=r.name,i=r.getModel(t._getModelOrProxy(s,e)),n=r.getModelAndValidate(t._getModelOrProxy(s,this.props));if(i!==n&&(r.detachConcern(i,this._rr),n)){var o=this.state.proxies[s];r.attachConcern(n,o.proxyBitMask,this._rr)}}}componentWillUnmount(){if(!this.state.hasBroken)for(var e=0;e<m.length;e++){var a=m[e];a.detachConcern(a.getModel(t._getModelOrProxy(a.name,this.props)),this._rr)}}_getComponent(){return c._getComponent.call(this)}render(){var{proxies:t,hasBroken:a,hasError:s}=this.state;if(a||s)return null;var n={};return r?n.forwardRef=this.setComponent:n.ref=this.setComponent,l.createElement(e,(0,i.default)({},n,this.props,t))}},s.displayName="State(".concat(p,")"),o};var i=s(a(58527)),n=s(a(70417)),o=s(a(19976)),l=r(a(2784)),d=s(a(97591)),u=s(a(93954)),c=a(13414);function h(){var e=(0,o.default)(["Assertion failed!"]);return h=function(){return e},e}function f(){var e=(0,o.default)(["Assertion failed!"]);return f=function(){return e},e}},49984:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleLabelId=p,t.renderLabelSvg=_,t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(91581)),l=s(a(18120)),d=a(75459),u=s(a(23539)),c=s(a(50023)),h=s(a(20642)),f=s(a(82631));function p(e){if(0!==e.length){if(!l.default.supportsFeature(l.default.F.MD_BACKEND))return e[0];var t=Math.max(...e.map((e=>parseInt(e,10))));return isNaN(t)?e[0]:t.toString()}}class m extends n.PureComponent{constructor(...e){super(...e),this._forceUpdate=()=>{this.forceUpdate()}}componentDidMount(){var e=p(this.props.labels);null!=e&&this._listenToLabelChange(e)}componentDidUpdate(e){var t=p(e.labels),a=p(this.props.labels);a!==t&&(null!=a&&this._listenToLabelChange(a),null!=t&&this._unlistenToLabelChange(t))}_listenToLabelChange(e){this.props.listeners.add(u.default,"label_updated_".concat(e),this._forceUpdate)}_unlistenToLabelChange(e){this.props.listeners.remove(u.default,"label_updated_".concat(e),this._forceUpdate)}render(){var{labels:e,showName:t,renderAsCircle:a}=this.props;if(!(0,d.canDisplayLabel)())return null;var r=function(e){var t=p(e);return null==t?null:u.default.get(t)}(e);if(!r||!r.name)return null;if(1===e.length){var s=t?n.createElement("span",{className:c.default.name},n.createElement(o.default,{text:r.name})):null,l=(0,i.default)({[c.default.container]:!t&&!a,[c.default.containerCircleIconFull]:!!a,[c.default.containerFull]:t&&!a,[c.default.labelFilter]:"label-filter"===this.props.theme,[c.default.drawerTitle]:"drawer-title"===this.props.theme}),h=a?{backgroundColor:r.hexColor}:{},m=a?n.createElement(f.default,{name:"label",className:c.default.icon}):_(r.hexColor);return n.createElement("div",{className:l},n.createElement("div",{className:(0,i.default)(c.default.iconContainer,{[c.default.circleIcon]:a}),style:h},m),s)}return n.createElement("div",{className:c.default.container},n.createElement("svg",{width:"18px",height:"15px",viewBox:"0 0 18 15"},n.createElement("path",{fill:r.hexColor,d:"M11.208,3.925H2.236C1.556,3.925,1,4.565,1,5.357v7.213C1,13.362,1.556,14,2.236,14h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,4.53C11.993,4.162,11.622,3.925,11.208,3.925z"}),n.createElement("path",{fill:"currentColor",d:"M15.541,7.832L13.164,3.93 c-0.423-0.698-1.15-1.142-1.956-1.142H2.595V2.432C2.595,1.64,3.151,1,3.831,1h9.1c0.414,0,0.782,0.237,1.005,0.605l2.696,4.433 L15.541,7.832z"})))}}function _(e){return n.createElement("svg",{key:2,width:"18px",height:"12px",viewBox:"0 0 18 12",className:c.default.icon},n.createElement("path",{fill:e||"#ffffff",d:"M11.208,0.925H2.236C1.556,0.925,1,1.565,1,2.357V9.57C1,10.362,1.556,11,2.236,11h8.972 c0.414,0,0.785-0.237,1.007-0.604l2.701-4.433L12.215,1.53C11.993,1.162,11.622,0.925,11.208,0.925z"}))}m.displayName="LabelIcon";var v=(0,h.default)(m);t.default=v},69882:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,66681)).then((e=>e.default))),"AddContactToGroupFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1717),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},67524:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,71194)).then((e=>e.default))),"ArchivedFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},59853:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,84642)).then((e=>e.default))),"AttachMediaFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},3573:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,60719)).then((e=>e.default))),"AttachProductsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1329),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},11932:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,84834)).then((e=>e.default))),"AttachVcardsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1303),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},39690:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,26458)).then((e=>e.default))),"CaptureFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},90440:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.showCartFlow=function(e,t,a){var r=void 0!==t?t:(new c.default).toString();if(a&&a.id.toString()===e)return i.createElement(m,{sellerJid:e,chat:a,sessionId:r});o.default.openModal(i.createElement(u.default,{chatId:(0,f.createWid)(e),onSuccess:t=>{window.setTimeout((()=>{o.default.openDrawerRight(i.createElement(m,{sellerJid:e,chat:t,sessionId:r}),"slide-left")}),100)},msgText:null}),{transition:"modal-flow"})},t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(79711)),l=r(a(50935)),d=r(a(86348)),u=r(a(33296)),c=r(a(55043)),h=r(a(95561)),f=a(75637),p=(0,h.default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,96858)).then((e=>e.default))),"CartFlowLoadable");t.requireBundle=p;var m=(0,n.default)({loader:p,loading:e=>i.createElement(d.default,{error:Boolean(e.error)}),delay:l.default.LOADABLE_DELAY}),_=m;t.default=_},66181:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.openCatalogManagementFlow=function(e){var t=(0,u.getMeUser)(),a=o.default.get(t);null==a?o.default.find(t).then((a=>{l.default.openDrawerLeft(i.createElement(p,{catalog:a,catalogId:t,product:e}))})).catch((()=>{l.default.openDrawerLeft(i.createElement(p,{catalogId:t,product:e}))})):(a.stale=!0,a.markProductCollectionOld(),l.default.openDrawerLeft(i.createElement(p,{catalog:a,catalogId:t,product:e})))},t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(65468)),l=r(a(79711)),d=r(a(50935)),u=a(95595),c=r(a(17957)),h=r(a(28084)),f=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,59693)).then((e=>e.default))),"CatalogManagementFlow");t.requireBundle=f;var p=(0,n.default)({loader:f,loading:e=>i.createElement(h.default,{title:c.default.t(862),error:Boolean(e.error)}),delay:d.default.LOADABLE_DELAY}),m=p;t.default=m},46691:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(90820)),d=r(a(95561)),u=r(a(22224)),c=(0,d.default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,22224)).then((e=>e.default))),"ComposeBoxPanels");t.requireBundle=c;(0,n.default)({loader:c,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});var h=u.default;t.default=h},26871:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,77619)).then((e=>e.default))),"ContactMsgInfoFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(988),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},97473:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,5918)).then((e=>e.default))),"EditCaptureFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},93329:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,90561)).then((e=>e.default))),"ForwardMessageFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(713,{_plural:1}),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},93171:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,7388)).then((e=>e.default))),"GroupInviteLinkDrawer");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(764),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},77906:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,17302)).then((e=>e.default))),"GroupMsgInfoFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},71559:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(91755)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,5727)).then((e=>e.default))),"GroupV4InviteFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{okText:l.default.t(1714),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},71292:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,41780)).then((e=>e.default))),"InfoFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},54700:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,51937)).then((e=>e.default))),"LabelFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(873),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},65829:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(91755)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,43865)).then((e=>e.default))),"LicensesPopup");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(876),okText:l.default.t(1761),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},94469:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.ExpiredLocationDrawerLoadable=t.LiveLocationDrawerLoadable=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,7266)).then((e=>({LiveLocationDrawer:e.LiveLocationDrawer,ExpiredLocationDrawer:e.ExpiredLocationDrawer})))),"LiveLocationDrawer");t.requireBundle=u;var c=(0,n.default)({loader:()=>u().then((e=>e.LiveLocationDrawer)),loading:e=>i.createElement(d.default,{title:l.default.t(908),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.LiveLocationDrawerLoadable=c;var h=(0,n.default)({loader:()=>u().then((e=>e.ExpiredLocationDrawer)),loading:e=>i.createElement(d.default,{title:l.default.t(884),error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY});t.ExpiredLocationDrawerLoadable=h},65268:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireSetHandlers=t.requireVoip=t.requireStickerPackCollection=t.requireMsgCollection=t.requireChatCollection=t.requireLabelCollection=t.requireHandleVideoStreamingRequest=t.requireClearAppStates=t.requireStatusV3Collection=t.requireEmojiAssetMapCreator=t.requireEmojiConfig=t.requireHandleSocketMessage=t.requireLoadProtoVersions=t.requireContactCollection=t.requireMain=void 0;t.requireMain=()=>a(80401).Z;t.requireContactCollection=()=>a(7470).default;t.requireLoadProtoVersions=()=>({features:a(90806).Z,17:a(4870).Z});t.requireHandleSocketMessage=()=>a(9383).default;t.requireEmojiConfig=()=>({APPLE:{UNICODE_TO_EMOJI:a(29720).Z,SELECTOR:"apple"},WHATSAPP:{UNICODE_TO_EMOJI:a(88877).Z,SELECTOR:"wa"}});t.requireEmojiAssetMapCreator=()=>a(38527).default;t.requireStatusV3Collection=()=>a(57185).default;t.requireClearAppStates=()=>a(9106).Z;t.requireHandleVideoStreamingRequest=()=>a(91658).D;t.requireLabelCollection=()=>a(23539).default;t.requireChatCollection=()=>a(43334).default;t.requireMsgCollection=()=>a(58885).default;t.requireStickerPackCollection=()=>a(48967).default;t.requireVoip=()=>a(64786).default;t.requireSetHandlers=()=>a(6469).y},92998:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(20485),o=r(a(17957)),l=r(a(7034)),d=r(a(82631));function u(e){return i.createElement("div",null,i.createElement("div",{className:l.default.circle},i.createElement(d.default,{name:"live-location-refresh"})),i.createElement("div",{className:l.default.text},e.text))}function c(e){var{error:t,text:a,retry:r}=e;return i.createElement("div",{className:l.default.container,onClick:t?r:null},t?i.createElement(u,{text:a}):i.createElement(n.Loading,null))}u.displayName="LazyLoadError",c.displayName="LazyLoadLoading",c.defaultProps={text:o.default.t(874),retry:()=>window.location.reload()};var h=c;t.default=h},86348:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(92998));function o(e){return i.createElement("div",null,i.createElement(n.default,{error:e.error}))}o.displayName="LoadingCartFlowLoadable";var l=o;t.default=l},90820:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(72779)),o=r(a(45484)),l=r(a(87276)),d=r(a(408)),u=r(a(92998));function c(e){var t=(0,n.default)({[d.default.panelBodyError]:e.error},d.default.panelBody);return i.createElement("div",null,i.createElement("div",{className:o.default.container}),i.createElement("div",{className:d.default.gifPanel},i.createElement("div",{className:d.default.bodyContainer},i.createElement("div",{className:t},i.createElement("div",{className:l.default.noResults},i.createElement(u.default,e))))))}c.displayName="LoadingComposeBoxPanels";var h=c;t.default=h},91755:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(92998)),d=r(a(67211));function u(e){return i.createElement(o.default,{title:e.title,onOK:()=>{},okText:e.okText,okDisabled:!0,onCancel:()=>n.default.closeModal()},i.createElement("div",{className:d.default.container},i.createElement(l.default,{error:e.error})))}u.displayName="LoadingConfirmPopup"},28084:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(22220)),n=r(a(2784)),o=s(a(58701)),l=s(a(73023)),d=r(a(71311)),u=s(a(98294)),c=s(a(92998));class h extends n.PureComponent{constructor(...e){super(...e),this.onCancel=()=>{this.props.uim.uie.requestDismiss()}}render(){var e=this.props,{title:t,headerType:a,uim:r}=e,s=(0,i.default)(e,["title","headerType","uim"]);return n.createElement(o.default,null,n.createElement(d.default,{title:t,type:a,onCancel:this.onCancel}),n.createElement(l.default,null,n.createElement(c.default,s)))}}h.defaultProps={headerType:d.DRAWER_HEADER_TYPE.SMALL},h.displayName="BaseLoadingDrawer";var f=(0,u.default)(h);t.default=f},79832:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(17957)),d=s(a(92998)),u=s(a(20434)),c=s(a(45864)),h=a(80898),f=s(a(82631));function p(e){var t=(0,i.default)("overlay",c.default.mediaViewer),a=()=>o.default.closeModalMedia();return n.createElement("div",null,n.createElement("div",{className:t,"data-animate-media-viewer":!0},n.createElement("div",{className:u.default.mediaPanelHeader},n.createElement("div",{className:u.default.info}),n.createElement("div",{className:u.default.mediaPanelTools},n.createElement(h.MenuBar,{key:"media-panel-header",theme:"strong"},n.createElement(h.MenuBarItem,{a8nText:"btn-close",icon:n.createElement(f.default,{name:"x-viewer"}),title:l.default.t(1604),onClick:a})))),n.createElement("div",{className:c.default.mediaContent,dir:"ltr",onClick:a},n.createElement("div",{className:c.default.media},n.createElement(d.default,{error:e.error})))))}p.displayName="LoadingMediaViewer"},1034:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=s(a(58527)),n=r(a(2784)),o=a(71311),l=s(a(28084)),d=r(a(41967));function u(e){return n.createElement(d.default,{type:d.TowerModalType},n.createElement(l.default,(0,i.default)({headerType:o.DRAWER_HEADER_TYPE.POPUP},e)))}u.displayName="LoadingModal"},39129:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=s(a(2784)),n=r(a(72174)),o=a(20485),l=r(a(29516)),d=r(a(82631));function u(e){return i.createElement("div",{className:l.default.container},i.createElement("div",{className:l.default.body,dir:"ltr"},i.createElement("div",{className:l.default.imageContainer},i.createElement("div",{className:l.default.defaultIcon},i.createElement(d.default,{name:e.svgName}))),e.error?i.createElement(o.LazyLoadRetry,{className:l.default.lazyLoadRetry,onClick:e.retry}):i.createElement(n.default,null)))}u.displayName="LoadingPhotoPicker"},94786:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(92998)),d=s(a(78837)),u=s(a(38157)),c=s(a(82631));function h(e){var{error:t,text:a,retry:r}=e,s=(0,i.default)(d.default.closeButton,u.default.v3X,{}),h=(0,i.default)(d.default.closeButton,u.default.backIcon,{}),f=()=>o.default.closeModalMedia();return n.createElement("div",{className:u.default.viewer,"data-animate-status-v3-viewer":!0},n.createElement("button",{className:s,onClick:f},n.createElement(c.default,{name:"x-viewer"})),n.createElement("button",{className:h,onClick:f},n.createElement(c.default,{name:"back",directional:!0})),n.createElement(l.default,{error:t,text:a,retry:r}))}h.displayName="LoadingQuotedStatusV3"},2422:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(17957)),d=s(a(92998)),u=s(a(78837)),c=s(a(93866)),h=s(a(41837)),f=s(a(95578)),p=s(a(82631));function m(e){var t=(0,i.default)(u.default.closeButton,h.default.v3_x,{});return n.createElement("div",{className:h.default.modalBackground,"data-animate-status-v3-modal-background":!0},n.createElement("div",{className:h.default.mainWrapper},n.createElement("div",{className:c.default.listPanel},n.createElement("div",{className:c.default.panelHeader},n.createElement("div",{className:c.default.headerButtonsPrimary}),n.createElement("div",{className:c.default.headerText},n.createElement("span",{className:c.default.primaryHeaderText},l.default.t(1350))),n.createElement("div",{className:c.default.headerButtonsSecondary}))),n.createElement("div",{className:f.default.outStatusPanel},n.createElement(d.default,e)),n.createElement("button",{className:t,onClick:()=>o.default.closeModalMedia()},n.createElement(p.default,{name:"x-viewer"}))))}m.displayName="LoadingStatusV3"},26432:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,24180)).then((e=>e.default))),"ManageLabelFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(865),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},62303:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(79832)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(9488),a.e(7205)]).then(a.bind(a,84425)).then((e=>e.default))),"MediaViewerFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},57557:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,26298)).then((e=>e.default))),"NewChatFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},82476:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,75238)).then((e=>e.default))),"NewGroupFlow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},91853:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.type===d.default.PROFILE?i.createElement(c,e):i.createElement(h,e)},t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(39129)),d=r(a(96183)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,87881)).then((e=>e.default))),"PhotoPicker");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(l.default,{svgName:"default-user",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY}),h=(0,n.default)({loader:u,loading:e=>i.createElement(l.default,{svgName:"default-group",error:Boolean(e.error),retry:e.retry}),delay:o.default.LOADABLE_DELAY})},19979:(e,t,a)=>{"use strict";var r=a(14859);t.Z=function(){return B.apply(this,arguments)};var s=r(a(19976)),i=r(a(52954)),n=a(69882),o=a(67524),l=a(59853),d=a(3573),u=a(11932),c=a(39690),h=a(90440),f=a(26871),p=a(97473),m=a(93329),_=a(93171),v=a(77906),g=a(71559),E=a(71292),S=a(54700),C=a(94469),y=a(26432),b=a(62303),T=a(57557),M=a(82476),N=a(91853),I=a(13531),P=a(35194),A=a(82163),O=a(41745),D=a(40773),w=a(20661),R=a(11086),k=a(92062),L=a(11405),x=a(89551);function F(){var e=(0,s.default)(["Error prefetching loadables: ",""]);return F=function(){return e},e}function B(){return(B=(0,i.default)((function*(){try{var e=[(0,b.requireBundle)(),(0,E.requireBundle)()];yield Promise.all(e);var t=[(0,P.requireBundle)(),(0,N.requireBundle)(),(0,C.requireBundle)(),(0,L.requireBundle)(),(0,l.requireBundle)(),(0,c.requireBundle)(),(0,p.requireBundle)(),(0,v.requireBundle)(),(0,T.requireBundle)(),(0,M.requireBundle)(),(0,R.requireBundle)(),(0,d.requireBundle)(),(0,O.requireBundle)(),(0,w.requireBundle)(),(0,m.requireBundle)(),(0,u.requireBundle)(),(0,I.requireBundle)(),(0,h.requireBundle)(),(0,S.requireBundle)(),(0,y.requireBundle)(),(0,n.requireBundle)(),(0,k.requireBundle)(),(0,_.requireBundle)(),(0,x.requireBundle)(),(0,A.requireBundle)(),(0,f.requireBundle)(),(0,D.requireBundle)(),(0,g.requireBundle)(),(0,o.requireBundle)()];yield Promise.all(t)}catch(e){__LOG__(3)(F(),e.stack)}}))).apply(this,arguments)}},13531:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,46178)).then((e=>e.default))),"ProductDetailsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1194),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},35194:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,89254)).then((e=>e.default))),"ProfileDrawer");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},82163:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(94786)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,82297)).then((e=>e.default))),"QuotedStatusV3Flow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},95561:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=function(e){return(t,a)=>{__LOG__(3)(u(),t.stack);var r=a>1?"s":"",s="loadable:".concat(e," failed to load after [").concat(a,"] attempt").concat(r);__LOG__(4,void 0,new Error,!0)(d()),SEND_LOGS(s)}}(t),i="INIT",c=0;return function d(){switch(i){case"INIT":case"FAILURE":return i="INFLIGHT",a=e().then((e=>(e||r(new Error("Lazyload response is empty"),c),i="SUCCESS",e))).catch(function(){var e=(0,s.default)((function*(e){if(__LOG__(3)(l(),t),i="FAILURE",++c<=10)return yield(0,n.delayMs)(1e3*c),d();throw r(e,c),e}));return function(){return e.apply(this,arguments)}}());case"INFLIGHT":case"SUCCESS":return(0,o.default)(a,"inflightPromise");default:return Promise.reject(new Error("retriable_promise_hoc:promiseStatus is invalid"))}}};var s=r(a(52954)),i=r(a(19976)),n=a(91460),o=r(a(61941));function l(){var e=(0,i.default)(["Lazyload failure for component ",""]);return l=function(){return e},e}function d(){var e=(0,i.default)(["Failed to load a component"]);return d=function(){return e},e}function u(){var e=(0,i.default)(["Loadable error: ",""]);return u=function(){return e},e}},41745:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,4924)).then((e=>e.default))),"SendGroupInviteFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(774),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},40773:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(91755)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,59694)).then((e=>e.default))),"SendLogsPopup");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1320),okText:l.default.t(1306),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},20661:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,47207)).then((e=>e.default))),"SendMsgMultiFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1029),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},11086:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(1034)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,91047)).then((e=>e.default))),"SendProductFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1029),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},92062:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,44774)).then((e=>e.default))),"SettingsFlow");t.requireBundle=u;var c=(0,n.default)({loader:u,loading:e=>i.createElement(d.default,{title:l.default.t(1331),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=c},11405:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(28084)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,46156)).then((e=>e.default))),"StarredDrawer");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},89551:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(2422)),d=(0,r(a(95561)).default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,34044)).then((e=>e.default))),"StatusV3Flow");t.requireBundle=d;var u=(0,n.default)({loader:d,loading:e=>i.createElement(l.default,{error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=u},58534:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.requireBundle=void 0;var i=s(a(2784)),n=r(a(89028)),o=r(a(50935)),l=r(a(17957)),d=r(a(28084)),u=r(a(95561));a(607);var c=(0,u.default)((()=>Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,57840)).then((e=>e.default))),"VerificationDrawer");t.requireBundle=c;var h=(0,n.default)({loader:c,loading:e=>i.createElement(d.default,{title:l.default.t(1887),error:Boolean(e.error)}),delay:o.default.LOADABLE_DELAY});t.default=h},88798:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var i=s(a(2784)),n=r(a(79711)),o=r(a(58701)),l=r(a(73023)),d=s(a(71311)),u=r(a(77875)),c=r(a(69991)),h=r(a(21160)),f=s(a(41967)),p=r(a(94461)),m=r(a(63505)),_=r(a(82631)),v=r(a(74824));function g(e){var[t,a]=i.useState(null),r=()=>{n.default.closeModal()},s=e=>{a(e)},g=e.msg.list;if(!g)return null;var E;return t&&(E=i.createElement("div",{className:c.default.controlsSummary},t.title,i.createElement("div",{className:c.default.btnActive},i.createElement(p.default,{large:!0,onClick:()=>{t&&((0,m.default)(e.msg,t),r())}},i.createElement(_.default,{directional:!0,name:"send"}))))),i.createElement(f.default,{type:f.TowerModalType},i.createElement(o.default,{theme:"products"},i.createElement(d.default,{title:g.buttonText,type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:r}),i.createElement(l.default,{theme:"padding"},g.sections.map(((e,a)=>i.createElement(u.default,{title:e.title,key:a,theme:"list-section"},e.rows.map(((e,a)=>i.createElement(h.default,{key:a,row:e,onSelect:s.bind(null,e),selected:e===t}))))))),i.createElement(v.default,{transitionName:"slide-up-down-footer",className:c.default.container},E)))}g.displayName="ListDrawer"},21160:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(a(2784)),n=r(a(96066)),o=r(a(32337));function l(e){return i.createElement(n.default,{primary:e.row.title,secondary:e.row.description,theme:"list-msg",onClick:e.onSelect,detail:i.createElement(o.default,{checked:e.selected,hover:!1,radio:!0,onChange:e.onSelect,systemUncheckedColor:!0})})}l.displayName="ListRowComponent"},35590:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPending=function(){if(!C.default.connected)return!1;var e=a(92545).default,t=x.default.some((e=>e.ack===y.default.ACK.CLOCK&&e.local&&e.isSentByMe)),r=m.default.some((e=>!!e.composeContents.text));return t||r||e()},t.default=void 0;var i=s(a(19976)),n=s(a(68015)),o=s(a(72779)),l=a(91460),d=a(39329),u=s(a(19034)),c=r(a(2784)),h=s(a(15566)),f=s(a(25337)),p=s(a(86634)),m=s(a(43334)),_=a(61),v=s(a(23109)),g=s(a(662)),E=s(a(79711)),S=s(a(9386)),C=s(a(52737)),y=s(a(50935)),b=s(a(99850)),T=r(a(63360)),M=a(38527),N=s(a(89952)),I=a(95595),P=s(a(68476)),A=s(a(18120)),O=s(a(21088)),D=s(a(75187)),w=s(a(17957)),R=s(a(20642)),k=s(a(32593)),L=s(a(40210)),x=s(a(58885)),F=s(a(11680)),B=s(a(3303)),G=s(a(67802)),U=s(a(72259)),j=a(6446),V=s(a(72424)),H=s(a(2734)),W=s(a(76533)),Y=s(a(18470)),K=s(a(17026)),q=s(a(2220)),z=s(a(85217)),Q=s(a(54794)),X=s(a(74391)),J=s(a(77626)),Z=s(a(17693)),$=s(a(20398)),ee=s(a(74185)),te=s(a(15549)),ae=s(a(68849)),re=a(80084),se=s(a(12767)),ie=s(a(14949)),ne=s(a(58906)),oe=s(a(99215)),le=s(a(30734));function de(){var e=(0,i.default)(["Low FPS Tracker: ","fps, ","s since page open."]);return de=function(){return e},e}function ue(){var e=(0,i.default)(["TOS (terms of service) stage number 3, logging out"]);return ue=function(){return e},e}var ce=[[document,"mousemove"],[document,"scroll"],[document,"keydown"],[window,"focus"],[window,"resize"]];function he(){window.history.pushState({},"",window.location.href)}class fe extends c.PureComponent{constructor(e){super(e),this.state={drawerActive:!1,drawerAnimating:!1,isVoipInitialized:C.default.isVoipInitialized},this._idleMonitor=null,this._serverPropsQueryLoop=null,this._rightDrawerOut=!1,this._setRefContainer=e=>{this._refContainer=e},this._refChatlistPanel=c.createRef(),this._refConversation=c.createRef(),this._onBlurTimer=new d.ShiftTimer((()=>{if(document.activeElement===document.body){var{top:e}=$.default.Manager;e&&e.uie.requestFocus()}})),this.onBlur=()=>{this._onBlurTimer.debounce(10)},this._onRightDrawerIn=()=>{this._rightDrawerOut=!1,E.default.onPanesWillChange(3),this.setState({drawerActive:!0,drawerAnimating:!0},(()=>{E.default.onPanesDidChange(3)})),this._animateConversationPanel()},this._onRightDrawerOut=()=>{this._rightDrawerOut=!0;var e={drawerActive:this.state.drawerActive,drawerAnimating:!0};this._animateConversationPanel()?(E.default.onPanesWillChange(2),e.drawerActive=!1,this.setState(e,E.default.onPanesDidChange.bind(E.default,2))):this.setState(e)},this._onRightDrawerAnimationComplete=()=>{var e={drawerActive:this.state.drawerActive,drawerAnimating:!1};this.state.drawerActive&&this._rightDrawerOut&&(e.drawerActive=!1),this.setState(e)},this._updateVoip=()=>{this.setState({isVoipInitialized:C.default.isVoipInitialized})},this._showTOS=()=>{switch(C.default.tos){case 1:case 2:E.default.openModal(c.createElement(X.default,null),{blockClose:!0});break;case 3:__LOG__(2)(ue()),se.default.logout()}},this._showSmbTos=()=>{C.default.smbTos&&E.default.openModal(c.createElement(Y.default,null),{blockClose:!0})},this._showUserNotice=()=>{A.default.supportsFeature(A.default.F.USER_NOTICE)&&F.default.noticeId&&!0===F.default.blocking&&E.default.openModal(c.createElement(te.default,{notice:F.default}),{blockClose:!0})},this.showKeyboardShortcuts=e=>{for(var t,{target:a}=e,r=0;r<5;r++){if((t=a)&&t.getAttribute("contentEditable")||t instanceof HTMLInputElement)return;a=a.parentNode}E.default.openModal(c.createElement(ie.default,null)),e.preventDefault()},K.default.uiActive=!0,K.default.markAvailable();var{platform:t}=C.default;(0,W.default)((0,M.getEmojiTypeFromPlatform)(t)),p.default.setPlatform(t)}componentWillUnmount(){this._onBlurTimer.cancel(),D.default.menuBatchRenderWith((()=>{D.default.trigger("".concat(O.default.Event,":").concat(O.default.Events.LOGGED_OUT))})),ee.default.canMuckHistory()&&window.history.back(),K.default.uiActive=!1,this._clearIdleMonitor(),this._clearServerPropsQueryLoop(),this._stopTrackingFPS&&this._stopTrackingFPS()}componentDidMount(){var{listeners:e}=this.props;if(D.default.menuBatchRenderWith((()=>{D.default.trigger("".concat(O.default.Event,":").concat(O.default.Events.LOGGED_IN))})),ee.default.canMuckHistory()&&(window.history.pushState({},"",window.location.href),e.add(window,"popstate",he)),this._beginIdleMonitor(!0),this._beginServerPropsQueryLoop(),e.add(C.default,"change:isVoipInitialized",this._updateVoip),e.add(C.default,"change:tos",this._showTOS),this._showTOS(),C.default.isSMB&&(e.add(C.default,"change:smbTos",this._showSmbTos),this._showSmbTos()),e.add(F.default,"change:blocking change:noticeId",this._showUserNotice),this._showUserNotice(),J.default.isSafari&&!P.default&&(0,I.shouldShowNUX)(y.default.NUX.SAFARI_LIMITED_SUPPORT)&&(setTimeout((()=>{var e=w.default.t(1909,{chrome_homepage:y.default.BROWSER_LINK.CHROME,firefox_homepage:y.default.BROWSER_LINK.FIREFOX,opera_homepage:y.default.BROWSER_LINK.OPERA});E.default.openModal(c.createElement(S.default,{onOK:()=>E.default.closeModal(),okText:w.default.t(1145)},c.createElement("div",{dangerouslySetInnerHTML:{__html:e}})))}),250),(0,I.setNUX)(y.default.NUX.SAFARI_LIMITED_SUPPORT,{views:1,maxViews:1})),this._stopTrackingFPS=N.default.whenLessThan(1,((e,t)=>{new L.default.WebcUiFreeze({webcUiFreezeFps:e,webcUiFreezeT:(0,n.default)(t,0)}).commit(),__LOG__(2)(de(),(0,n.default)(e,2),(0,n.default)(t,3)/1e3)})),ne.default.supported){var t=navigator.serviceWorker;t&&t.controller&&le.default.request(t.controller,oe.default.PRELOAD_LAZY_LOADED_BUNDLES).catch((()=>{}))}if(V.default.wallpapersV2){var a=v.default.get(_.DEFAULT_PREFERENCE);if(a&&y.default.DEFAULT_CHAT_WALLPAPER!==a.wallpaperColor){var r=this.context.theme;if(!(0,re.colorExistsInTheme)(a.wallpaperColor,r)){var s="light"===r?"dark":"light";if((0,re.colorExistsInTheme)(a.wallpaperColor,s)){var i=(0,re.toggleWallpaperColor)(a.wallpaperColor,s);a.set("wallpaperColor",i)}}}}}_beginIdleMonitor(e){var t=e?y.default.IDLE_TIMEOUT:0;this._idleMonitor=Promise.loop((()=>(0,l.delayMs)(t).addCancelControl().then((()=>{var e;K.default.markUnavailable(3e4);var a=new Promise((t=>{e=t}));return ce.forEach((([t,a])=>{this.props.listeners.add(t,a,e)})),a.addCancelControl().finally((()=>{ce.forEach((([t,a])=>{this.props.listeners.remove(t,a,e)}))})).then((function(){document.hasFocus()&&K.default.markAvailable(),t=y.default.IDLE_TIMEOUT}))})))).finally((()=>{this._idleMonitor=null})).catchType(Promise.CancellationError,(()=>{})).endWithControls("cancel")}_clearIdleMonitor(){this._idleMonitor&&this._idleMonitor.control.cancel()}_beginServerPropsQueryLoop(){this._serverPropsQueryLoop=f.default.setLocalTimeout((()=>{(0,j.queryServerProps)(),this._beginServerPropsQueryLoop()}),(0,u.default)().add(1,"days").valueOf())}_clearServerPropsQueryLoop(){f.default.clearTimeout(this._serverPropsQueryLoop)}_animateConversationPanel(){var e,t,a,r,s=null===(e=this._refChatlistPanel)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getClientWidth();if(null==s)return!1;var i=null===(a=this._refContainer)||void 0===a?void 0:a.clientWidth;return null!=i&&(!!(null===(r=this._refConversation)||void 0===r?void 0:r.current)&&this._refConversation.current.animatePanel(i,s))}getVisibleDOMNodes(e){var t=e;return E.default.existsDrawerLeft((e=>{var a,r=null===(a=this._refChatlistPanel)||void 0===a?void 0:a.current;e&&r&&(t=t.filter((e=>!r.containsDOMNode(e))))})),E.default.existsDrawerMid((e=>{var a,r=null===(a=this._refConversation)||void 0===a?void 0:a.current;e&&r&&(t=t.filter((e=>!r.containsDOMNode(e))))})),t}render(){var e=(0,o.default)(k.default.app,{three:this.state.drawerActive,two:!this.state.drawerActive,"app-animating":this.state.drawerAnimating,[k.default.noAnimation]:!this.props.animate}),t=c.createElement(ae.default,null);return c.createElement(Z.default,{uimState:Z.default.State.INACTIVE,displayName:"Main"},c.createElement(Q.default,{className:e,onBlur:this.onBlur,onRef:this._setRefContainer,onShowKeyboardShortcuts:this.showKeyboardShortcuts,getVisibleDOMNodes:this.getVisibleDOMNodes},c.createElement(B.default,null),c.createElement(h.default,null),c.createElement(G.default,null),c.createElement(z.default,null),t,undefined,c.createElement("div",{className:k.default.drawerManager},c.createElement("div",{className:(0,o.default)(k.default.pane,k.default.paneOne)},c.createElement(T.default,{direction:T.Dir.LEFT})),c.createElement("div",{className:(0,o.default)(k.default.pane,k.default.paneTwo)},c.createElement(T.default,{direction:T.Dir.MID})),c.createElement("div",{className:(0,o.default)(k.default.pane,k.default.paneThree)},c.createElement(T.default,{direction:T.Dir.RIGHT,onDrawerIn:this._onRightDrawerIn,onDrawerOut:this._onRightDrawerOut,onDrawerAnimationComplete:this._onRightDrawerAnimationComplete}))),c.createElement("div",{className:(0,o.default)(k.default.pane,k.default.paneOne,k.default.chatlistHeader)},c.createElement(g.default,{ref:this._refChatlistPanel,settings:H.default})),c.createElement("div",{className:(0,o.default)(k.default.pane,k.default.paneTwo)},c.createElement(b.default,{animate:this.props.animate,ref:this._refConversation}))))}}fe.contextType=q.default,fe.displayName="Main";var pe=(0,R.default)((0,U.default)(fe));t.default=pe},62830:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(64)),o=r(a(44343)),l=r(a(17957)),d=r(a(81524)),u=r(a(41967)),c=r(a(60949));class h extends i.Component{constructor(...e){super(...e),this.blockContact=e=>{e.stopPropagation(),e.preventDefault(),this.props.onBlock()},this.onCancel=e=>{e.stopPropagation(),e.preventDefault(),this.props.onCancel()},this.reportSpamBlock=e=>{e.stopPropagation(),e.preventDefault(),this.props.onReportSpamBlock()}}render(){var e=i.createElement(n.default,{a8nText:"popup-controls-block",type:"primary",onClick:this.blockContact,key:0},l.default.t(279)),t=i.createElement(n.default,{a8nText:"popup-controls-report-spam",type:"secondary",onClick:this.reportSpamBlock,key:1},l.default.t(1234)),a=i.createElement(n.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:this.onCancel,key:2},l.default.t(1593)),r={enter:this.blockContact,escape:this.onCancel},s=i.createElement(c.default,{contact:this.props.contact}),h=i.createElement(d.default,{id:280,params:{contact:s}});return i.createElement(o.default,{handlers:r},i.createElement(u.default,{children:h,actions:[t,e,a]}))}}t.default=h,h.displayName="BlockContactPopup"},59646:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(54073)),n=s(a(12436)),o=a(39329),l=r(a(2784)),d=a(46774),u=s(a(94470)),c=s(a(19899)),h=s(a(79711)),f=s(a(50935)),p=s(a(7681)),m=s(a(58701)),_=s(a(73023)),v=r(a(71311)),g=a(20485),E=a(19741),S=r(a(96452)),C=a(35598),y=s(a(22004)),b=s(a(38147)),T=s(a(6660)),M=s(a(92803)),N=a(95595),I=s(a(18120)),P=s(a(98294)),A=s(a(44343)),O=s(a(83005)),D=s(a(17957)),w=s(a(81610)),R=s(a(20642)),k=s(a(55217)),L=s(a(72259)),x=s(a(73664)),F=s(a(2825)),B=s(a(82631)),G=a(86145);class U extends l.Component{constructor(e){super(e),this.flatListController=new y.default,this.state={searchText:"",searching:!1,resultsUnavailable:!1},this.setSearch=e=>{this.search=e},this.selection=new x.default([],(e=>e.id.toString())),this.pending=!1,this._batchRenderState={},this._handleScroll=e=>{this.shouldFTSSearch(e)&&(this.fts(),this.pending=!0)},this.handleScroll=(0,n.default)(this._handleScroll,100),this._debounceSetState=new o.ShiftTimer((()=>{this.setState(this._batchRenderState),this._batchRenderState={}})),this._batchSetState=(e,t=75)=>{Object.assign(this._batchRenderState,e),this._debounceSetState.debounce(t)},this.fts=(0,i.default)((()=>{this.pending=!1;var e=(this.state.searchText||"").trim();(0,O.default)(e)&&(this._ftsPromise&&this._ftsPromise.cancel(),this._ftsPromise=Promise.resolve().then((()=>{this.isFTSSearching()||this._batchSetState({searching:!0})})).then((()=>this.ftsMsgs.search({chat:this.props.chat,count:this._getSearchCount(),searchTerm:e}))).checkpoint(this.props.rejectOnUnmount()).then((t=>{t&&!t.canceled&&e===this.state.searchText.trim()&&this._batchSetState({searching:!1,resultsUnavailable:!1})})).catchType(S.Unmount,(()=>{})).catch((e=>{this.pending||this._batchSetState({searching:!1,resultsUnavailable:e instanceof E.E404})})))}),f.default.FTS_TYPING_DELAY),this.fullTextSearch=e=>{var t=e.trim();(0,O.default)(t)?(this.fts(),this.pending=!0,this.state.searching||this._batchSetState({searching:!0})):(this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.state.searching&&this._batchSetState({searching:!1,resultsUnavailable:!1}))},this.shouldFTSSearch=e=>!(!this.ftsMsgs.hasMoreMsgs||this.pending||this.state.searching||this.ftsMsgs.searchPromise||(0,G.numCodepoints)(this.state.searchText||"")<f.default.FTS_MIN_CHARS)&&e.scrollTop+f.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight,this.isFTSSearching=()=>{var e=this._batchRenderState;return"searching"in e?e.searching:this.state.searching},this.onSearch=e=>{e?e!==this.state.searchText&&(this.fullTextSearch(e),this.setState({searchText:e}),this._batchSetState({searchText:e,resultsUnavailable:!1})):this.onStopSearch()},this.onStopSearch=()=>{this.fts.cancel(),this.ftsMsgs.resetSearch(),this.ftsMsgs.delete(),this._ftsPromise&&this._ftsPromise.cancel(),this.pending=!1,this.setState({searchText:"",searching:!1})},this.onFocusList=e=>{e.repeat||this._refMsglist&&(this.search&&!this.search.cursorIsAtEnd()||(e.preventDefault(),e.stopPropagation(),b.default.shouldIndicateFocus(),this._refMsglist&&this._refMsglist.focusFirst()))},this.onOpenFirst=e=>{e.preventDefault();var t=this.ftsMsgs.head();if(t){var a=t.chat,r=a.getSearchContext(t);h.default.focusChatTextInput(a),h.default.openChatAt(a,r)}},this.onFocusSearch=()=>{b.default.shouldIndicateFocus(),T.default.focus(this.search)},this.onClose=()=>{this.props.uim.uie.requestDismiss()},this.indicateFocus=()=>{b.default.maybeIndicateFocus(this.refInputHotkey)},this.onScroll=e=>{this.handleScroll(e.currentTarget)},this.getEmptyChatlistState=e=>{if(e.length)return null;var t=(this.state.searchText||"").trim();return(0,G.numCodepoints)(t)>=f.default.FTS_MIN_CHARS?this.state.searching?l.createElement(g.SearchingMessages,null):this.state.resultsUnavailable?l.createElement(g.SearchMessagesUnavailable,null):l.createElement(g.SearchMessages,null):(0,g.BeforeSearchMessages)(this.props.chat.title(),this.props.chat.isGroup)},this._setRefMsglist=e=>{this._refMsglist=e},this._setInputHotkey=e=>{this.refInputHotkey=e},this.ftsMsgs=new M.default(e.chat)}componentDidMount(){this.onFocusSearch(),this.props.listeners.add(this.ftsMsgs,"bulk_remove",(()=>{this.forceUpdate()}))}componentWillUnmount(){this.handleScroll.cancel(),this.fts.cancel(),this.ftsMsgs.delete(!0),this._ftsPromise&&this._ftsPromise.cancel(),this._debounceSetState.cancel()}_getSearchCount(){return Math.round(window.innerHeight/C.DEFAULT_ITEM_HEIGHT)+1}render(){var e=this.ftsMsgs.toArray(),t=this.getEmptyChatlistState(e);if(null==t){var a=this.state.searchText?this.state.searchText.trim():null;t=l.createElement(k.default,{ref:this._setRefMsglist,flatListController:this.flatListController,isSearching:!!this.state.searchText,searchText:a,ftsResult:e,selection:this.selection,onFocusSearch:this.onFocusSearch})}var r,s={down:this.onFocusList},i=this.state.searching&&e.length?l.createElement("div",{className:u.default.searchSpinner},l.createElement(F.default,{stroke:6,size:24})):null;if(I.default.supportsFeature(I.default.F.MD_BACKEND)&&this.props.chat.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY){var n=(this.state.searchText||"").trim();if((0,G.numCodepoints)(n)>=f.default.FTS_MIN_CHARS){var o=c.default.relativeDateStr((0,N.getHistorySyncEarliestDate)());r=l.createElement(p.default,{icon:l.createElement(B.default,{name:"content-search"}),theme:"list",secondary:D.default.t(549,{date:o})},D.default.t(721))}}return l.createElement(m.default,{key:"search-modal"},l.createElement(v.default,{title:D.default.t(1274),type:v.DRAWER_HEADER_TYPE.SMALL,onCancel:this.onClose}),l.createElement(A.default,{handlers:s,onFocus:this.indicateFocus,onRef:this._setInputHotkey,className:u.default.panelSearch},l.createElement(w.default,{ref:this.setSearch,type:"chat-msg-search",onSearch:this.onSearch,onEnter:this.onOpenFirst,placeholder:D.default.t(1269),loading:this.state.searching})),l.createElement(_.default,{flatListControllers:[this.flatListController],className:u.default.panelBody,onScroll:this.onScroll,id:"pane-side"},t,i,r))}}U.displayName="ChatSearch";var j=(0,P.default)((0,R.default)((0,L.default)(U)));t.default=j},13574:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}});var s=r(a(59646))},69096:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(73549)),o=a(62436),l=r(a(38147)),d=r(a(6660)),u=r(a(44343)),c=r(a(45420)),h=r(a(20642)),f=r(a(40207)),p=a(64658),m=r(a(74223)),_=a(11419);class v extends i.Component{constructor(e){super(e),this.onActiveChange=(e,t)=>{if("focus"===e){var a=this._refHotKeys;d.default.focus(a),t&&a&&(0,o.scrollIntoViewIfNeeded)(a)}this.setState({active:!!e})},this.onClick=e=>{if((0,_.isFunction)(this.props.onClick)){var t=(0,p.unproxy)(this.props.msg),a=t.chat,r=a.getSearchContext(t);r.msg=t,this.props.onClick(e,a,r)}},this.onEnter=e=>{e.preventDefault(),e.stopPropagation(),l.default.shouldIndicateFocus(),this.onClick(e)},this.indicateFocus=()=>{var e;null===(e=this._refCell)||void 0===e||e.indicateFocus()},this.contextEnabled=()=>!1,this._setRefCell=e=>{this._refCell=e},this._setRefHotKeys=e=>{this._refHotKeys=e};var{msg:t,active:a}=e;this.state={active:!!a&&a.value===t}}componentDidMount(){this.props.active&&this.props.listeners.add(this.props.active,this.props.msg.id.toString(),this.onActiveChange)}render(){var{msg:e,author:t}=this.props,a=i.createElement(m.default,{msg:e}),r=i.createElement(c.default,{msg:e.safe(),msgType:"Search",author:t,searchQuery:this.props.searchText?[this.props.searchText]:[]}),s={enter:this.onEnter};return i.createElement(u.default,{handlers:s,onFocus:this.indicateFocus,onRef:this._setRefHotKeys},i.createElement(n.default,{ref:this._setRefCell,contextEnabled:this.contextEnabled,theme:"chat-search",active:!!this.state.active,primaryDetail:a,secondary:r,primary:void 0,onClick:this.onClick}))}}v.CONCERNS={msg:["id","chat","isSentByMe","senderObj","rtl","dir","type"]},v.displayName="MessageClass";var g=(0,h.default)((0,f.default)(v,v.CONCERNS));t.default=g},51613:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(69096)),o=r(a(40207));class l extends i.Component{render(){var{msg:e}=this.props;return i.createElement(n.default,{msg:e,chat:e.chat,author:this.props.contact.formattedShortName,searchText:this.props.searchText,onClick:this.props.onClick,active:this.props.active,key:e.id.toString()})}}l.CONCERNS={msg:["id","chat"],contact:["formattedShortName"]},l.displayName="MessageWithAuthorClass";var d=(0,o.default)(l,l.CONCERNS);t.default=d},55217:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(53388)),d=r(a(50935)),u=r(a(35598)),c=r(a(98294)),h=r(a(44343)),f=r(a(69096)),p=r(a(51613));class m extends i.Component{constructor(){super(...arguments),this._listPointerEvents=!0,this._setRefHotKeys=e=>{this._refHotKeys=e},this.onListPointerEventsOff=()=>{this._listPointerEvents=!1},this.onListPointerEventsOn=()=>{this._listPointerEvents=!0},this.onClick=(e,t,a)=>{e.preventDefault(),e.stopPropagation(),n.default.find(t.id).then((e=>{2===l.default.column&&this.props.uim.uie.requestDismiss(),o.default.focusChatTextInput(e),o.default.openChatAt(e,a)}))},this.getSelection=()=>this.props.ftsResult||[],this.renderItem=e=>{var{msg:t}=e;return t.sender&&t.isGroupMsg&&!t.isNotification&&!t.isSentByMe?i.createElement(p.default,{contact:t.senderObj,msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.onClick,active:this.props.selection,key:t.id.toString()}):i.createElement(f.default,{msg:t,chat:t.chat,searchText:this.props.searchText,onClick:this.onClick,active:this.props.selection,key:t.id.toString()})},this.restoreFocus=()=>{this.props.selection.reset(!0)},this.onFocusGain=e=>{e.target===this._refHotKeys&&this._listPointerEvents&&(this.props.selection.index<0?this.focusFirst():this.props.selection.reset(!0))},this.focusFirst=()=>{this.props.selection.setFirst(!0)},this.onNextChat=e=>{e&&(e.preventDefault(),e.stopPropagation());var t=this.props.selection.next();this.props.selection.index!==t&&this.props.selection.setNext(!0)},this.onPrevChat=e=>{e&&(e.stopPropagation(),e.preventDefault()),this.props.selection.prev()>-1?this.props.selection.setPrev(!0):this.props.onFocusSearch()},this.props.selection.init(this.getSelection())}getData(){return this.props.ftsResult.map((e=>({itemKey:e.id.toString(),msg:e})))}render(){return i.createElement(h.default,{handlers:{down:e=>this.onNextChat(e),up:e=>this.onPrevChat(e)},onFocus:this.onFocusGain,"data-tab":d.default.TAB_ORDERS.CHAT_SEARCH_MSG_LIST,onRef:this._setRefHotKeys},i.createElement(u.default,{flatListController:this.props.flatListController,direction:"vertical",data:this.getData(),renderItem:this.renderItem,forceConsistentRenderCount:!1}))}}m.displayName="MsgListBase";var _=(0,c.default)(m);t.default=class extends _{focusFirst(){this.getComponent().focusFirst()}}},16348:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(21403)),o=r(a(22788)),l=r(a(20642));class d extends i.Component{constructor(...e){super(...e),this.state={selected:this.props.selections.isSelected(this.props.model)||!!this.props.checked},this.onSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})}}componentDidMount(){this.props.listeners.add(this.props.selections,this.props.model.id.toString(),this.onSelectChange)}render(){var{children:e,disabled:t,tabIndex:a}=this.props;return i.createElement("div",{className:o.default.checkboxSelectableWrapper},i.createElement("div",{className:o.default.checkboxSelectableControl},i.createElement(n.default,{onChange:()=>{},checked:this.state.selected,disabled:t,tabIndex:a})),e)}}d.displayName="CheckboxSelectableWrapper";var u=(0,l.default)(d);t.default=u},17707:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=a(46774),d=s(a(21403)),u=s(a(72503)),c=s(a(79711)),h=s(a(9386)),f=s(a(91581)),p=s(a(18120)),m=s(a(17957)),_=a(46638),v=a(40263);class g extends n.Component{constructor(...e){super(...e),this.state={keepStarred:!0},this.onCancel=()=>{c.default.closeModal()},this.onClear=()=>{var e=this.props.chat;e.pendingAction++,(0,_.sendClear)(e,this.state.keepStarred).finally((()=>{e.pendingAction--})),c.default.closeModal()},this._onToggleStarred=()=>{this.setState({keepStarred:!this.state.keepStarred})}}getText(){switch(this.props.chat.kind){case l.CHAT_KIND.GROUP:return m.default.t(499);case l.CHAT_KIND.CHAT:return m.default.t(497);case l.CHAT_KIND.BROADCAST:return m.default.t(494);default:return""}}render(){return p.default.supportsFeature(p.default.F.MD_BACKEND)?n.createElement(h.default,{title:this.getText(),onOK:this.onClear,okText:m.default.t(496),onCancel:this.onCancel},n.createElement("div",{className:(0,i.default)(u.default.section,u.default.border)},n.createElement("div",{"data-a8n":o.default.key("menu-icon-clear-chat"),className:u.default.control},n.createElement(d.default,{onChange:this._onToggleStarred,checked:this.state.keepStarred,id:"menu-icon-clear-chat"})),n.createElement("label",{htmlFor:"menu-icon-clear-chat",className:u.default.label},m.default.t(860))),n.createElement("div",{className:u.default.note},n.createElement(v.TextParagraph,{theme:"muted"},m.default.t(1731)))):n.createElement(h.default,{onOK:this.onClear,okText:m.default.t(496),onCancel:this.onCancel},n.createElement("div",null,n.createElement(f.default,{text:this.getText()}),n.createElement("div",{className:u.default.section},n.createElement("div",{"data-a8n":o.default.key("menu-icon-clear-chat"),className:u.default.control},n.createElement(d.default,{onChange:this._onToggleStarred,checked:this.state.keepStarred,id:"menu-icon-clear-chat"})),n.createElement("label",{htmlFor:"menu-icon-clear-chat",className:u.default.label},m.default.t(860)))))}}t.default=g,g.displayName="ClearChatPopup"},92229:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(50935)),o=r(a(58701)),l=r(a(73023)),d=s(a(71311)),u=r(a(98294)),c=r(a(17957)),h=r(a(85454));class f extends i.Component{constructor(...e){super(...e),this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()}}render(){var e,t=this.props.chat.getReceivedVcardMsgs(),a=null!==(e=null==t?void 0:t.map((e=>i.createElement(h.default,{key:e.id.toString(),msg:e,displayType:n.default.DISP_TYPE.CONTACT_CARD,onMessageClick:this.onClose}))))&&void 0!==e?e:[];return i.createElement(o.default,null,i.createElement(d.default,{title:c.default.t(535,{_plural:t?t.length:0}),onBack:this.onClose,type:d.DRAWER_HEADER_TYPE.LARGE}),i.createElement(l.default,null,a))}}f.displayName="ContactCardDrawer";var p=(0,u.default)(f);t.default=p},81689:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(58701)),l=r(a(73023)),d=s(a(71311)),u=r(a(44343)),c=r(a(17957)),h=s(a(41967)),f=r(a(91735)),p=a(84990);t.default=e=>{var{vcard:t}=e;return i.createElement(h.default,{type:h.BoxModalType},i.createElement(o.default,{key:"vcard-modal"},i.createElement(d.default,{title:c.default.t(539),type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.default.closeModal()}),i.createElement(l.default,null,i.createElement(u.default,null,i.createElement(f.default,{parsedVcard:t,thumbnail:(0,p.vcardThumbnail)(t)})))))}},77977:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=r(a(2784)),o=s(a(65219)),l=s(a(7470)),d=a(20485),u=a(35598),c=s(a(17957)),h=s(a(12002)),f=s(a(20642)),p=s(a(46821)),m=s(a(73073)),_=s(a(73664)),v=s(a(67134)),g=a(11419),E="HEADER",S="ROW";class C extends n.Component{constructor(...e){super(...e),this.selection=new _.default([],(e=>e.id)),this.state={searchFilter:void 0},this.onSelect=(e,t)=>{if(t.type===S){var a=t.contact;!0===this.props.filter(a)&&this.props.onSelect&&this.props.onSelect(a)}},this.onSearch=this.props.debounce((e=>{this.setState({searchFilter:e})}),100),this.renderItem=e=>{var t,{filter:a,onSelect:r,onContext:s,contextEnabled:l,contextMenu:d,openContextOnClick:c,showNotifyName:h,participantCollection:f,listenForAdminChange:p}=this.props;switch(e.type){case E:return n.createElement(m.default,{header:null!==(t=e.header)&&void 0!==t?t:""});case S:var _=(0,g.isString)(a(e.contact)),v=_?"group-modal":null,C=_?a(e.contact):null,y=s&&d?{contextEnabled:l,contextMenu:d(e.contact.id),onContext:s}:{};return n.createElement(o.default,(0,i.default)({contact:e.contact,active:this.selection,theme:v,secondary:C,onClick:c&&s?s:_?void 0:r?()=>{r(e.contact)}:()=>{},waitIdle:!0,showNotifyName:h,listenForAdminChange:p,participantCollection:f},y));default:throw new u.UnknownDataError(e)}}}componentDidMount(){this.props.contacts||this.props.listeners.add(l.default,"add remove change:name",(()=>{this.forceUpdate()}))}getData(){var{filter:e}=this.props,t=c.default.accentFold(this.state.searchFilter),a=(0,p.default)(t),r=(this.props.contacts||l.default).filter((r=>e(r)&&(!t||t&&r.searchMatch(t,a))));this.selection.init(r.filter((t=>!0===e(t))));var s,i,n=[];if(!r.length)return n;for(var o=r.length>10,d=0;d<r.length;d++)s=r[d],o&&s.header!==i&&n.push({type:E,header:s.header,itemKey:"".concat(s.header||"","_").concat(d)}),n.push({type:S,contact:s,itemKey:"".concat(s.id.toString(),"_").concat(d)}),i=s.header;return n}render(){var{title:e,onCancel:t}=this.props;return n.createElement(h.default,{title:e,data:this.getData(),renderItem:this.renderItem,emptyState:n.createElement(d.SearchContacts,null),selection:this.selection,onSearch:this.onSearch,searchPlaceholder:c.default.t(1270),onSelect:this.onSelect,onCancel:t})}}C.defaultProps={filter:e=>l.default.isFilteredContact(e)},C.displayName="ContactsModal";var y=(0,f.default)((0,v.default)(C));t.default=y},43225:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(79711)),l=s(a(9386)),d=a(70750),u=s(a(91581)),c=a(71142),h=s(a(18120)),f=s(a(17957)),p=s(a(40207)),m=a(40263),_=a(11419);function v(){var e=(0,i.default)(["deleteChatPopup:onDelete Unsupported chat type"]);return v=function(){return e},e}class g extends n.PureComponent{constructor(...e){super(...e),this.getText=()=>{var e=this.props.chat;return e.isGroup?e.isReadOnly?f.default.t(566):f.default.t(695):e.isUser?f.default.t(564):e.isBroadcast?f.default.t(560):void 0},this._getButton=()=>{var e=this.props.chat;return e.isGroup?e.isReadOnly?f.default.t(565):f.default.t(694):e.isUser||e.isBroadcast?f.default.t(563):void 0},this.onCancel=()=>{o.default.closeModal();var{onCancel:e}=this.props;e&&(0,_.isFunction)(e)&&e()},this.onDelete=()=>{var e,t=this.props.chat;t.isGroup?e=t.isReadOnly?(0,d.sendDelete)(t):(0,c.sendExitGroup)(t):t.isUser||t.isBroadcast?e=(0,d.sendDelete)(t):__LOG__(3)(v()),(0,_.isFunction)(this.props.onDeleteOrExit)&&e&&this.props.onDeleteOrExit(e),o.default.closeModal()}}render(){return h.default.supportsFeature(h.default.F.MD_BACKEND)&&this.props.isDelete?n.createElement(l.default,{title:this.getText(),onOK:this.onDelete,okText:this._getButton(),onCancel:this.onCancel},n.createElement(m.TextDiv,{theme:"muted"},f.default.t(1732))):n.createElement(l.default,{onOK:this.onDelete,okText:this._getButton(),onCancel:this.onCancel},n.createElement(u.default,{text:this.getText()}))}}g.CONCERNS={chat:["isReadOnly","isGroup","isUser","isBroadcast"]},g.displayName="DeleteChatPopup";var E=(0,p.default)(g,g.CONCERNS);t.default=E},55236:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(64)),o=r(a(50935)),l=r(a(20673)),d=r(a(15894)),u=a(35387),c=a(95585),h=r(a(29505)),f=a(95595),p=r(a(44343)),m=r(a(17957)),_=r(a(41967)),v=r(a(17693));class g extends h.default{constructor(){super(),this.onDelete=()=>{this.end()},this.onRevoke=()=>{this._showRevokeNux?(this.push(this._renderRevokeNux(),"none"),(0,f.setNUX)(o.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX,{views:1,maxViews:1})):this.end()},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._openRevokeLearnMore=()=>{(0,u.openExternalLink)((0,c.getRevokeFaqUrl)())},this._onRevokeNuxClicked=()=>{this.end()},this._renderRevokeNux=()=>{var e=[i.createElement(n.default,{type:"secondary",onClick:this._openRevokeLearnMore,key:1},m.default.t(875)),i.createElement(n.default,{type:"primary",onClick:this._onRevokeNuxClicked,key:0},m.default.t(1761))];return i.createElement(v.default,{displayName:"MsgRevokeNuxModal",escapable:!1},i.createElement(p.default,{handlers:{enter:this._onRevokeNuxClicked}},i.createElement(_.default,{actions:e},i.createElement("div",{className:l.default.label},m.default.t(1266)))))},this._showRevokeNux=(0,f.shouldShowNUX)(o.default.NUX.REVOKE_LEGAL_DISCLAIMER_NUX)}componentDidMount(){var{chat:e,msgList:t,deletePrompt:a,revokePrompt:r,toastPosition:s,onCancel:n,isMsgVisible:o}=this.props;this.push(i.createElement(d.default,{chat:e,msgList:t,deletePrompt:a,revokePrompt:r,toastPosition:s,onDelete:this.onDelete,onRevoke:this.onRevoke,onPopupCancel:this.onPopupCancel,onCancel:n,isMsgVisible:o}))}}t.default=g},15894:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(32960)),o=r(a(64)),l=r(a(21403)),d=r(a(79711)),u=r(a(50935)),c=r(a(20673)),h=r(a(44343)),f=r(a(17957)),p=r(a(41967));class m extends i.Component{constructor(...e){super(...e),this.state={clearMedia:!0},this.onCancel=()=>{var{onPopupCancel:e}=this.props;e()},this.onRevoke=()=>{var{chat:e,msgList:t,toastPosition:a,onCancel:r,onRevoke:s}=this.props,i=t.filter((e=>e.type!==u.default.MSG_TYPE.REVOKED));i.length>0&&d.default.sendRevokeMsgs(e,i,this.state.clearMedia,null,a),s(),r&&r()},this.onDelete=()=>{var{chat:e,msgList:t,toastPosition:a,onCancel:r,onDelete:s,isMsgVisible:i}=this.props;d.default.sendDeleteMsgs(e,t,this.state.clearMedia,null,a),s(),r&&r(),d.default.existsDrawerRight((e=>{e&&i&&t.forEach((e=>{i(e.id,!0)&&d.default.closeDrawerRight()}))}))},this._onToggleClearMedia=()=>{this.setState({clearMedia:!this.state.clearMedia})}}render(){var e,{msgList:t,deletePrompt:a,revokePrompt:r}=this.props;t.some((e=>e.asMms&&e.type!==u.default.MSG_TYPE.STICKER))&&(e=i.createElement("div",{className:c.default.container,onClick:this._onToggleClearMedia,key:0},i.createElement("div",{"data-a8n":n.default.key("menu-icon-revoke-message"),className:c.default.control},i.createElement(l.default,{onChange:this._onToggleClearMedia,checked:this.state.clearMedia})),i.createElement("div",{className:c.default.label},f.default.t(498))));var s=i.createElement(o.default,{type:"secondary",onClick:this.onCancel,key:0},f.default.t(1593)),d=null,m=null,_=null,v=()=>{},g=t.length,E=f.default.t(570,{_plural:g});r&&(d=i.createElement(o.default,{a8nText:"popup-controls-revoke",type:"secondary",onClick:this.onRevoke,key:1},f.default.t(1263)),v=this.onRevoke),a&&(m=i.createElement(o.default,{a8nText:"popup-controls-delete",type:r?"secondary":"primary",onClick:this.onDelete,key:2},f.default.t(561)),v=this.onDelete);var S={enter:v,escape:this.onCancel};return m&&(_=d?i.createElement("div",{className:c.default.buttons},i.createElement("div",{className:c.default.button},m),i.createElement("div",{className:c.default.button},s),i.createElement("div",{className:c.default.button},d)):[s,m]),i.createElement(h.default,{handlers:S},i.createElement(p.default,{title:E,actions:_,children:[e]}))}}t.default=m,m.displayName="DeleteRevokeMsgPopup"},58701:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(96955)),l=s(a(62262)),d=s(a(79430));class u extends n.PureComponent{constructor(...e){super(...e),this.setDragAndDropRef=e=>{this.dragAndDropRef=e},this.onDragOver=e=>{this.dragAndDropRef&&this.dragAndDropRef.onDragOver(e)},this.onDragStart=e=>{this.dragAndDropRef&&this.dragAndDropRef.onDragStart(e)},this.onDragEnd=e=>{this.dragAndDropRef&&this.dragAndDropRef.onDragEnd(e)}}render(){var{children:e,onDrop:t,onDragChange:a,theme:r}=this.props,s=(0,i.default)(d.default.drawer,{[d.default.white]:"invite"===r||"products"===r||"labels"===r||"settings"===r||"archived"===r,[d.default.drawerCapture]:"capture-contain"===r||"capture-cover"===r,[d.default.drawerEdit]:"edit"===r,[d.default.drawerMedia]:"media"===r,[d.default.drawerGallery]:"gallery"===r,[d.default.drawerCatalog]:"catalog"===r,[d.default.striped]:"striped"===r,[d.default.belowHeader]:"capture-contain"===r||"media"===r,"drawer-verification":"verification"===r});return n.createElement(o.default,{className:s,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},t&&n.createElement(l.default,{ref:this.setDragAndDropRef,disableFromWithin:!0,onDragChange:a,onDrop:t}),e)}}t.default=u,u.displayName="Drawer"},73023:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=s(a(22220)),o=s(a(72779)),l=r(a(2784)),d=s(a(12351)),u=s(a(63097)),c=l.forwardRef((function(e,t){var{overflow:a,flatListControllers:r,children:s,theme:c}=e,h=(0,n.default)(e,["overflow","flatListControllers","children","theme"]),f=(0,o.default)(d.default.container,{[d.default.noscroll]:"hidden"===a,[d.default.centerItem]:"center-content"===c,[d.default.padding]:"padding"===c,[d.default.centerColumn]:"center-column"===c});return r&&r.length>0?l.createElement(u.default,(0,i.default)({flatListControllers:r,className:f},h),s):l.createElement("div",(0,i.default)({className:f,ref:t},h),s)}));t.default=c},71311:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DRAWER_HEADER_TYPE=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(5315)),d=a(80898),u=s(a(82631)),c=s(a(74824)),h={SMALL:"small",LARGE:"large",POPUP:"popup",OFFSET:"offset",MULTI_MEDIA_GALLERY:"multiMediaGallery",LABELS:"labels"};t.DRAWER_HEADER_TYPE=h;var f=e=>{var{title:t,onBack:a,onCancel:r,type:s,children:f,menu:p}=e,m=a?n.createElement("button",{className:l.default.btnCloseDrawer,"data-a8n":o.default.key("btn-closer-drawer"),onClick:a},n.createElement(u.default,{name:"back",directional:!0})):null,_=r?n.createElement("button",{className:l.default.btnCloseDrawer,"data-a8n":o.default.key("btn-closer-drawer"),onClick:r},n.createElement(u.default,{name:"x"})):null,v=null!=p?n.createElement("span",{className:l.default.paneListControls},n.createElement(d.MenuBar,{key:"drawer-header",theme:s!==h.SMALL?"inverse":null},n.createElement(c.default,{transitionName:"btn"},p))):null,g=(0,i.default)({[l.default.multiMediaGallery]:s===h.MULTI_MEDIA_GALLERY,[l.default.labels]:s===h.LABELS,[l.default.drawerHeader]:s===h.LARGE||s===h.MULTI_MEDIA_GALLERY||s===h.LABELS,[l.default.drawerHeaderSmall]:s===h.SMALL,[l.default.drawerHeaderOffset]:s===h.OFFSET||s===h.POPUP,[l.default.drawerHeaderPopup]:s===h.POPUP}),E=t&&null!=f?n.createElement("div",{className:l.default.side},f):null;return n.createElement("header",{className:g},n.createElement("div",{className:l.default.drawerTitle,"data-animate-drawer-title":!0},n.createElement("div",{className:l.default.drawerTitleAction},m,_),n.createElement("div",{"data-a8n":o.default.key("drawer-title-body"),className:l.default.drawerTitleBody},t||f),E,v))};f.displayName="DrawerHeader";var p=f;t.default=p},15466:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(39886)),l=a(66615),d=({title:e,icon:t,onClick:a,children:r})=>{var s=(0,i.default)(o.default.itemBody,{[o.default.row]:t}),d=(0,i.default)({[o.default.main]:t}),u=(0,i.default)({[o.default.side]:t});return n.createElement("div",{className:o.default.item,onClick:a,role:a?"button":""},n.createElement("div",{className:s},n.createElement("div",{className:d,dir:"auto"},n.createElement(l.SelectableDiv,{className:o.default.primary,selectable:!0},e),n.createElement("div",{className:o.default.secondary},r)),n.createElement("div",{className:u},t)))};d.displayName="DrawerItem";var u=d;t.default=u},63360:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Dir=t.Transition=void 0;var i=s(a(23779)),n=s(a(18149)),o=s(a(74930)),l=r(a(2784)),d=s(a(79711)),u=s(a(59753)),c=s(a(6660)),h=s(a(20642)),f=s(a(64225)),p=a(11419),m=s(a(17693)),_=s(a(5179)),v=s(a(74824)),g={LEFT:"drawer-left",MID:"slide-up",NONE:"none",RIGHT:"slide-left"};t.Transition=g;t.Dir={LEFT:"left",MID:"mid",RIGHT:"right"};var E=e=>g[e.toUpperCase()];class S extends l.PureComponent{constructor(...e){super(...e),this.state={drawer:void 0,drawerId:null,transition:E(this.props.direction),uim:void 0,option:void 0},this._blockTransition=null,this._flowDismissPending=!1,this.setRefUIE=e=>{this.refUIE=e},this.openFlow=(e,t=E(this.props.direction),a,r)=>{var s=(0,o.default)("DrawerManager".concat(this.props.direction));if(!this._flowDismissPending&&this.state.drawer){if(null!=e.key&&(0,n.default)(this.state.drawer.key,e.key))return;this._blockTransition=g.NONE,this.setState({drawer:e,drawerId:s,transition:t,uim:a,option:r},(()=>{this._blockTransition=t}))}else this.props.onDrawerIn&&this.props.onDrawerIn(),this.setState({drawer:e,drawerId:s,transition:t,uim:a,option:r})},this._existsFlow=e=>{e(!0!==this._flowDismissPending&&!!this.state.drawer)},this.closeFlow=e=>{e&&this.state.drawerId!==e||this.state.drawer&&(this.props.onDrawerOut&&this.props.onDrawerOut(),this._flowDismissPending=!0,this.setState({drawer:void 0},(()=>{this._flowDismissPending=!1})))},this.requestFocus=()=>{if(this.refUIE){var e=this.refUIE.getNode();e&&!e.contains(document.activeElement)&&c.default.focus(e)}},this._onAnimationComplete=e=>{var t=this.props.onDrawerAnimationComplete;t&&t();var{option:a,drawer:r}=this.state;a&&r&&e===this.state.drawerId&&(0,p.isFunction)(a.onEnterAnimationComplete)&&a.onEnterAnimationComplete()}}componentDidMount(){this.props.listeners.add(d.default,"open_drawer_".concat(this.props.direction),this.openFlow),this.props.listeners.add(d.default,"exists_drawer_".concat(this.props.direction),this._existsFlow),this.props.listeners.add(d.default,"close_drawer_".concat(this.props.direction),this.closeFlow)}componentDidUpdate(e){this.props.direction!==e.direction&&(e.listeners.remove(d.default,"open_drawer_".concat(e.direction),this.openFlow),e.listeners.remove(d.default,"exists_drawer_".concat(e.direction),this._existsFlow),e.listeners.remove(d.default,"close_drawer_".concat(e.direction),this.closeFlow),this.props.listeners.add(d.default,"open_drawer_".concat(this.props.direction),this.openFlow),this.props.listeners.add(d.default,"exists_drawer_".concat(this.props.direction),this._existsFlow),this.props.listeners.add(d.default,"close_drawer_".concat(this.props.direction),this.closeFlow))}render(){var{direction:e}=this.props,{drawer:t,drawerId:a,transition:r,option:s}=this.state,n=this._blockTransition||r,o=s&&s.noFocus?null:this.requestFocus;return t&&(t=l.createElement(m.default,{displayName:"Drawer".concat((0,i.default)(e)),escapable:!0,key:a,ref:this.setRefUIE,requestFocus:o,requestDismiss:this.closeFlow.bind(null,a)},l.createElement(f.default,{style:{height:"100%"}},t))),l.createElement(_.default.Consumer,null,(e=>l.createElement(_.default.Provider,{value:this.state.uim||e},l.createElement(v.default,{className:u.default.container,transitionName:n,onAnimationComplete:this._onAnimationComplete.bind(this,a)},t))))}}S.displayName="DrawerManager";var C=(0,h.default)(S);t.default=C},77875:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(33322)),d=s(a(51908)),u=a(40263);class c extends n.PureComponent{render(){var e,{children:t,title:a,subtitle:r,titleOnClick:s,a8nText:c,"data-list-scroll-offset":h,theme:f,animation:p,className:m}=this.props,_=f?l.default[f]:null,v=(0,i.default)(l.default.container,{[l.default.animate]:p},_,m);return null!=a&&(e=n.createElement("div",{className:l.default.title,"data-a8n":o.default.key(c),role:s?"button":null,onClick:s},n.createElement(d.default,{side:r,ellipsify:!0},n.createElement(u.TextSpan,{theme:"list-section"===this.props.theme?"section-title-larger":"section-title"},a)))),n.createElement("div",{className:v,"data-list-scroll-offset":h},e,t)}}t.default=c,c.defaultProps={animation:!0},c.displayName="DrawerSection"},39292:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=s(a(47677)),o=r(a(2784)),l=s(a(79711)),d=s(a(9386)),u=s(a(7470)),c=s(a(35387)),h=a(95585),f=s(a(82785)),p=s(a(4357)),m=a(95595),_=s(a(18120)),v=a(75459),g=s(a(17957)),E=a(64658),S=a(38727),C=s(a(43711)),y=s(a(68384)),b=s(a(3111)),T=a(12126),M=a(80500),N=a(75637);function I(){var e=(0,i.default)(["formatE2ENotification: receive identity notification of self"]);return I=function(){return e},e}class P extends o.Component{constructor(...e){super(...e),this.onVerificationClick=()=>{var{jid:e,chatId:t}=this.props;if(e){var a=e.equals((0,m.getMeUser)())?t:e;l.default.closeModal(),l.default.verificationDrawer(a)}}}componentDidMount(){if(_.default.supportsFeature(_.default.F.MD_BACKEND)){var e=(0,m.assertGetMe)(),t=this.props.jid?[(0,N.createWid)(this.props.jid.toString()),e]:[e];(0,M.getFanOutList)(t).then((e=>{(0,T.ensureE2ESessions)(e)}))}}render(){var e,t,a=null,r=null,s=null,i=null,m=g.default.t(875);s=()=>l.default.closeModal(),i=g.default.t(1761);var{e2eSubtype:T,chatId:M,chat:N,msg:P}=this.props;switch(T){case"info_encrypted":y.default.isGroup(M)?(null==N?void 0:N.isSupportGroup())?(e=g.default.t(1377),m=g.default.t(1378),t=(0,h.getSupportChatFaqUrl)()):e=C.default.isGroupCallEnabled()?g.default.t(1674):g.default.t(1673):y.default.isBroadcast(M)&&(e=g.default.t(1584)),t=(0,h.getE2EFaqUrl)();break;case"identity":var{jid:A}=this.props,O=A&&u.default.get(A);if(O&&O.isMe)if(__LOG__(4,void 0,new Error,!0)(I()),SEND_LOGS("SelfIdentityNotificationError"),y.default.isGroup(M))e=g.default.t(1826);else if(y.default.isBroadcast(M))e=g.default.t(1824);else{var D=u.default.get(M),w=D?D.formattedName:(0,b.default)(M);e=g.default.t(1825,{name:w})}else{var R=O?O.formattedName:(0,b.default)(this.props.jid);e=g.default.t(1823,{name:R})}_.default.supportsFeature(_.default.F.MD_BACKEND)?(a=s,r=i,s=this.onVerificationClick,i=g.default.t(1879),t=(0,h.getMDCodeChangeFaqUrl)()):(a=s,r=g.default.t(1593),t=(0,h.getCodeChangeFaqUrl)());break;case"device":(0,n.default)(null!=P,"msg shouldn't be null");var k=(0,E.unproxy)(P);if(e=(0,f.default)(k,!0),_.default.supportsFeature(_.default.F.MD_BACKEND)){a=s,r=i;var L=k.body?u.default.get(k.body):null;L&&L.isMe&&(M.isGroup()||M.isBroadcast())?(s=void 0,i=void 0):(s=this.onVerificationClick,i=g.default.t(1879)),t=(0,h.getMDCodeChangeFaqUrl)()}else a=s,r=g.default.t(1593),t=(0,h.getCodeChangeFaqUrl)();break;case"encrypt":case"encrypt_now":default:if(t=(0,S.securityUrl)(),y.default.isGroup(M))(null==P?void 0:P.chat.isSupportGroup())?(e=g.default.t(1377),m=g.default.t(1378),t=(0,h.getSupportChatFaqUrl)()):e=C.default.isGroupCallEnabled()?g.default.t(1601):g.default.t(1600);else if(y.default.isBroadcast(M))e=g.default.t(1600);else if(y.default.isOfficialBizAccount(M))e=g.default.t(1759),t=(0,h.getE2EEnterpriseFaqUrl)();else{var x=u.default.get(M);if(!(0,v.bspUiEnabled)()&&x&&x.isEnterprise){var F=(0,p.default)(x);e=g.default.t(1719,{businessName:F}),t=(0,h.getE2EEnterpriseFaqUrl)()}else e=C.default.isVoiceCallEnabled()||C.default.isVideoCallEnabled()?g.default.t(1601):g.default.t(1600)}}var B=o.createElement(c.default,{href:t},m);return o.createElement(d.default,{onOK:s,okText:i,onCancel:a,cancelText:r},e,"",B)}}t.default=P,P.displayName="E2EInfoModal"},44537:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=a(71684),o=r(a(2784)),l=s(a(64)),d=s(a(79711)),u=s(a(50935)),c=s(a(58701)),h=s(a(73023)),f=r(a(71311)),p=s(a(77875)),m=a(74253),_=s(a(81850)),v=s(a(56241)),g=s(a(35387)),E=a(95585),S=a(95595),C=s(a(18120)),y=s(a(98294)),b=s(a(17957)),T=s(a(40210)),M=s(a(99911)),N=a(63590),I=a(40263),P=r(a(75074));function A(){var e=(0,i.default)(["EphemeralDrawer:unable to set ephemeral setting for ",""]);return A=function(){return e},e}class O extends o.Component{constructor(e){super(e),this._saveSetting=()=>{var{chat:e}=this.props,{duration:t}=this.state;t!==this._getInitialDuration(e)&&(M.default.online?(e.isGroup?(0,N.setGroupProperty)(e,u.default.GROUP_SETTING_TYPE.EPHEMERAL,t).catch((()=>()=>{__LOG__(2)(A(),e.id.toString())})):(0,m.changeEphemeralDuration)(e,t),new T.default.EphemeralSettingChange({chatEphemeralityDuration:t}).commit()):this._showOfflineToast())},this._shouldShowSelections=()=>!(0,S.shouldShowNUX)(u.default.NUX.EPHEMERAL)||this.props.fromInfoFlow,this._showOfflineToast=()=>{d.default.openToast(o.createElement(P.default,{msg:b.default.t(673),id:(0,P.genId)()}))},this._handleBack=()=>{this._shouldShowSelections()&&this._saveSetting(),this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this._handleChange=e=>{var t=parseInt(e.target.value,10);this.setState({duration:t})},this.state={duration:this._getInitialDuration(e.chat)}}_getInitialDuration(e){return e.getEphemeralSetting()||0}componentWillUnmount(){(0,S.shouldShowNUX)(u.default.NUX.EPHEMERAL)&&(0,S.setNUX)(u.default.NUX.EPHEMERAL,{views:1,maxViews:1})}render(){var e,t=this._shouldShowSelections()?null:o.createElement("div",{className:_.default.nuxAction},o.createElement(l.default,{type:"primary",onClick:this._handleBack},b.default.t(1761)));e=C.default.isEphemeral24HDurationEnabled()?this.props.fromInfoFlow?b.default.t(666):b.default.t(668):this.props.fromInfoFlow?b.default.t(665):b.default.t(667);var a,r=(0,S.shouldShowNUX)(u.default.NUX.EPHEMERAL)?o.createElement(p.default,{animation:!1},o.createElement(v.default,null),o.createElement("div",{className:_.default.nuxHeader},o.createElement(I.TextSpan,{theme:"large"},this.props.fromInfoFlow?b.default.t(671):b.default.t(672))),o.createElement("div",{className:_.default.nuxContent},o.createElement("div",{className:_.default.nuxText},o.createElement(I.TextSpan,{theme:"muted"},e)),o.createElement("div",{className:_.default.nuxText},o.createElement(I.TextSpan,{theme:"muted"},b.default.t(669))),o.createElement("div",{className:_.default.nuxText},o.createElement(I.TextSpan,{theme:"muted"},b.default.t(670)," ",o.createElement(g.default,{href:(0,E.getEphemeralFaqUrl)()},b.default.t(875)))),t)):null,s=this._shouldShowSelections()?o.createElement(o.Fragment,null,o.createElement(p.default,{animation:!1},(a=[],C.default.isEphemeral24HDurationEnabled()?(a.push({value:24*n.HOUR_SECONDS,label:b.default.t(677,{number:24,_plural:24})}),a.push({value:7*n.DAY_SECONDS,label:b.default.t(676,{number:7,_plural:7})})):a.push({value:7*n.DAY_SECONDS,label:b.default.t(675)}),a.push({value:0,label:b.default.t(674)}),a).map((({value:e,label:t})=>o.createElement("div",{className:_.default.option,key:"option-".concat(e)},o.createElement("label",{className:_.default.label},o.createElement("input",{type:"radio",className:_.default.input,value:String(e),checked:e===this.state.duration,onChange:this._handleChange}),t))))),o.createElement("div",{className:_.default.footer},o.createElement(I.TextParagraph,{className:_.default.footerText,theme:"plain"},C.default.isEphemeral24HDurationEnabled()?b.default.t(653):b.default.t(652)," ",o.createElement(g.default,{href:(0,E.getEphemeralFaqUrl)()},b.default.t(875))),C.default.isEphemeralAllowGroupMembersEnabled()?o.createElement(I.TextParagraph,{className:_.default.footerText,theme:"muted"},this.props.chat.isGroup?b.default.t(659):b.default.t(658)):null)):null;return o.createElement(c.default,{theme:"gallery"},o.createElement(f.default,{title:b.default.t(781),onBack:this._handleBack,type:f.DRAWER_HEADER_TYPE.LARGE}),o.createElement(h.default,null,r,s))}}O.displayName="EphemeralDrawer";var D=(0,y.default)(O);t.default=D},56241:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.createElement("div",{className:o.default.nuxIllustration},n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon1)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon2)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon3)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon4)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon5)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.chatIcon,o.default.chatIcon6)},n.createElement(l.default,{name:"chat-alt"})),n.createElement("div",{className:(0,i.default)(o.default.nuxIcon,o.default.bannerIcon)},n.createElement(l.default,{name:"disappearing"})))};var i=s(a(72779)),n=r(a(2784)),o=s(a(84297)),l=s(a(82631))},24910:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(9386)),d=r(a(50935)),u=r(a(7470)),c=r(a(46478)),h=r(a(91581)),f=a(20485),p=a(19741),m=s(a(96452)),_=a(55600),v=r(a(57414)),g=r(a(27536)),E=r(a(17957)),S=a(41967),C=r(a(72259)),y=a(70574),b=0,T=1,M=2;class N extends i.Component{constructor(...e){super(...e),this.state={state:b,status:void 0,groupMetadata:void 0,subject:void 0},this.onViewGroup=e=>{var t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&o.default.openChatFromUnread(n.default.assertGet(t)),o.default.closeModal()},this.onJoinGroup=()=>{(0,_.joinGroupViaInvite)(this.props.groupCode).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)})),o.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catchType(m.Unmount,(()=>{})).catchType(p.ServerStatusCodeError,(e=>{this.setState({state:M,status:e.status})}))},this.onCancel=()=>{o.default.closeModal()}}componentDidMount(){(0,y.queryGroupInviteInfo)(this.props.groupCode).checkpoint(this.props.rejectOnUnmount()).then((e=>{var{status:t,subject:a,groupMetadata:r,inGroup:s}=e;s?this.onViewGroup(r.id):this.setState({status:t,groupMetadata:r,subject:a,state:T})})).catchType(p.ServerStatusCodeError,(e=>{this.setState({status:e.status,state:M})})).catchType(m.Unmount,(()=>{}))}render(){var e,t,{groupCode:a}=this.props,{state:r,status:s,groupMetadata:o,subject:p}=this.state,m={cancelText:E.default.t(759),onCancel:this.onCancel,onOK:void 0,okText:void 0};if(r===b)e=i.createElement(f.LoadingWithText,{text:E.default.t(760)});else if(r===T&&o){var _,C=o.participants,y=o.size||C.length,M=C.filter((e=>!!u.default.assertGet(e.id).name)),N=o.desc?i.createElement("div",{className:v.default.metadataDesc},o.desc):null;_=M.length?i.createElement("div",{className:v.default.participantList},i.createElement("div",{className:v.default.participantsTitle},E.default.t(766,{count:y,_plural:y})," ",""," ",E.default.t(761,{count:M.length,_plural:M.length})),i.createElement("div",{className:v.default.participantsContainer},M.map((e=>i.createElement("div",{key:e.id.toString(),className:v.default.participantWrapper},i.createElement(c.default,{id:e.id}),i.createElement(h.default,{className:v.default.participantText,text:e.contact.formattedName})))))):i.createElement("div",{className:v.default.emptyContentContainer},i.createElement("span",{className:v.default.participantsText},E.default.t(766,{count:y,_plural:y})),i.createElement("span",{className:v.default.contactsText}," ",""," ",E.default.t(761,{count:M.length,_plural:M.length})));var I="".concat(d.default.GROUP_INVITE_URL).concat(a);e=i.createElement("div",{className:v.default.container},i.createElement("div",{className:v.default.metadataContainer},i.createElement(g.default,{fallbackSVG:"default-group",size:82,imgProps:{src:I}}),i.createElement("div",{className:v.default.metadataText},i.createElement(h.default,{className:v.default.metadataTitle,text:p}),N)),_);var P=n.default.get(o.id),A=!!P&&!P.isReadOnly;m.onOK=A?this.onViewGroup:this.onJoinGroup,m.okText=A?E.default.t(776):E.default.t(763),t=S.FlexModalType}else{var O;switch(s){case 401:O=E.default.t(754);break;case 404:O=E.default.t(755);break;case 410:O=E.default.t(756);break;case 419:O=E.default.t(757);break;default:O=E.default.t(758)}m.cancelText=E.default.t(1761),e=i.createElement("div",null,O)}return i.createElement(l.default,{cancelText:m.cancelText,onCancel:m.onCancel,onOK:m.onOK,okText:m.okText,type:t},e)}}N.displayName="GroupInviteModal";var I=(0,C.default)(N);t.default=I},56823:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19034)),n=r(a(2784)),o=s(a(43334)),l=s(a(79711)),d=s(a(9386)),u=s(a(50935)),c=s(a(7470)),h=s(a(46478)),f=s(a(91581)),p=a(20485),m=a(19741),_=r(a(96452)),v=a(95595),g=s(a(30440)),E=s(a(99922)),S=s(a(23226)),C=s(a(27536)),y=s(a(17957)),b=a(41967),T=s(a(81031)),M=s(a(72259)),N=s(a(40207)),I=s(a(82631)),P=r(a(75074)),A=s(a(76022)),O=a(75637),D=0,w=1,R=2;class k extends n.Component{constructor(...e){super(...e),this.state={state:D,status:void 0,groupMetadata:void 0,subject:void 0},this.onViewGroup=e=>{var t;e?t=e:this.state.groupMetadata&&(t=this.state.groupMetadata.id),t&&l.default.openChatFromUnread(o.default.assertGet(t)),l.default.closeModal()},this.revokeGrpV4Invite=()=>{var{msg:e}=this.props,{inviteGrp:t}=this.props.msg,a=o.default.assertGet((0,O.createWid)(t)).groupMetadata;l.default.openModal(n.createElement(d.default,{onOK:()=>{l.default.closeModal(),a.revokeGroupV4AddInvite([e.to.toString()]).then((()=>{l.default.openToast(n.createElement(P.default,{msg:y.default.t(1716),id:(0,P.genId)()}))}))},okText:y.default.t(1820),onCancel:()=>l.default.closeModal(),cancelText:y.default.t(1593)},n.createElement(f.default,{text:y.default.t(802,{participant:e.chat.contact.formattedName})})))},this.onJoinGroup=()=>{var{inviteCode:e,inviteCodeExp:t,inviteGrp:a,from:r}=this.props.msg;A.default.acceptGroupV4Invite(a,r.toString(),e,String(t),(0,v.getMaybeMeUser)().toString()).then((e=>200===e.status?o.default.find((0,O.createWid)(a)):Promise.reject(e.status))).then((e=>{l.default.openChatFromUnread(e).then((t=>{t&&l.default.focusChatTextInput(e)})),l.default.closeModal()})).checkpoint(this.props.rejectOnUnmount()).catchType(_.Unmount,(()=>{})).catch((e=>{this.setState({state:R,status:e})}))},this.onCancel=()=>{l.default.closeModal()}}componentDidMount(){var{inviteCode:e,inviteCodeExp:t,inviteGrp:a,isSentByMe:r}=this.props.msg;if(r){var s=o.default.assertGet((0,O.createWid)(a));s.groupMetadata&&E.default.find(s.id).catchTypes(m.WebdDrop,_.ProtoVersionUndefined,(()=>{})).finally((()=>{this.setState({status:200,groupMetadata:s.groupMetadata,subject:s.formattedTitle||s.name,state:w})}))}else A.default.groupV4InviteRequestMetadataFind((0,v.getMaybeMeUser)().toString(),this.props.msg.from.toString(),e,String(t),a).then((e=>{if(null!=e.status&&e.status>=400)this.setState({status:e.status,state:R});else if(e.id){var t=new g.default({id:e.id,owner:e.owner,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict,announce:e.announce,participants:e.participants});this.setState({status:200,groupMetadata:t,subject:e.subject,state:w})}else this.setState({status:e.status,state:R})})).catchType(_.Unmount,(()=>{}))}render(){var e,t,{msg:a}=this.props,{inviteGrp:r,inviteCodeExp:s,inviteCode:l,isGroupsV4InviteExpired:m,from:_,isSentByMe:g}=a,{state:E,status:M,groupMetadata:N,subject:P}=this.state,A={cancelText:y.default.t(759),onCancel:this.onCancel,onOK:void 0,okText:void 0};if(E===D)e=n.createElement(p.Loading,null);else if(E===w&&N){var R,k=N.participants,x=N.size||k.length,F=k.filter((e=>!!c.default.assertGet(e.id).name)),B=N.desc?n.createElement("div",{className:S.default.metadataDesc},n.createElement(f.default,{text:N.desc})):null;R=F.length?n.createElement("div",{className:S.default.participantList},n.createElement("div",{className:S.default.participantsTitle},y.default.t(766,{count:x,_plural:x})," ",""," ",y.default.t(761,{count:F.length,_plural:F.length})),n.createElement("div",{className:S.default.participantsContainer},F.map((e=>n.createElement("div",{key:e.id.toString(),className:S.default.participantWrapper},n.createElement(h.default,{id:e.id}),n.createElement(f.default,{className:S.default.participantText,text:e.contact.formattedName})))))):n.createElement("div",{className:S.default.emptyContentContainer},n.createElement("span",{className:S.default.participantsText},y.default.t(766,{count:x,_plural:x})),n.createElement("span",{className:S.default.contactsText}," ",""," ",y.default.t(761,{count:F.length,_plural:F.length})));var G="w=".concat(encodeURIComponent((0,v.getMaybeMeUser)().toString()),"&g=").concat(encodeURIComponent(r),"&c=").concat(encodeURIComponent(l),"&e=").concat(encodeURIComponent(String(s)),"&a=").concat(encodeURIComponent(_.toString())),U="".concat(u.default.GROUP_V4_INVITE_ICON_URL,"?").concat(G);e=n.createElement("div",{className:S.default.container},n.createElement("div",{className:S.default.metadataContainer},g?n.createElement(T.default,{size:82,wid:(0,O.createWid)(r)}):n.createElement(C.default,{fallbackSVG:"default-group",size:82,imgProps:{src:U}}),n.createElement("div",{className:S.default.metadataText},n.createElement(f.default,{className:S.default.metadataTitle,text:P}),B)),R);var j=o.default.get(N.id),V=!!j&&!j.isReadOnly;a.isSentByMe?(A.onOK=this.revokeGrpV4Invite,A.okText=y.default.t(1264)):V?(A.onOK=this.onViewGroup,A.okText=y.default.t(776)):m||(A.onOK=this.onJoinGroup,A.okText=y.default.t(763)),t=b.FlexModalType}else{var H;switch(M){case 401:H=y.default.t(754);break;case 404:H=y.default.t(755);break;case 410:H=y.default.t(756);break;case 419:H=y.default.t(757);break;default:H=y.default.t(758)}A.cancelText=y.default.t(1761),e=n.createElement("div",null,H)}var W,Y,K,q=E===w?n.createElement("div",{className:S.default.inviteExpiration},n.createElement(I.default,{name:"panel-recent",display:"inline",className:S.default.inviteExpirationIcon}),n.createElement("span",null,(W=parseInt(s,10),Y=(0,i.default)(1e3*W).diff((0,i.default)()),K=Math.floor(Y/L),Y<=0?y.default.t(859):K<12?y.default.t(857,{time:(0,i.default)().local().format("LT")}):K<24?y.default.t(858,{number:1,_plural:1}):K<48?y.default.t(858,{number:2,_plural:2}):y.default.t(858,{number:3,_plural:3})))):null;return n.createElement(d.default,{cancelText:A.cancelText,onCancel:A.onCancel,onOK:A.onOK,okText:A.okText,type:t},e,q)}}k.CONCERNS={msg:["id","to","inviteCode","inviteCodeExp","inviteGrp","isGroupsV4InviteExpired","from","chat","isSentByMe"]},k.displayName="GroupV4InviteModal";var L=36e5;var x=(0,N.default)((0,M.default)(k),k.CONCERNS);t.default=x},45356:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Messaging=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(64)),l=s(a(79711)),d=s(a(9386)),u=s(a(50935)),c=s(a(19914)),h=s(a(17957)),f=s(a(81524)),p=s(a(41967)),m=s(a(82631)),_=s(a(77626));t.Messaging={NOTIFICATIONS:"NOTIFICATIONS",CAMERA_FAIL:"CAMERA_FAIL",CAMERA_MISSING:"CAMERA_MISSING",MIC_FAIL:"MIC_FAIL",MIC_MISSING:"MIC_MISSING",CAMERA:"CAMERA",MIC:"MIC"};var v={GUIDE_ALLOW:"guide-allow",GUIDE_UNBLOCK:"guide-unblock",GUIDE_NONE:"guide-none"},g="chrome_media_error",E="firefox_lock",S="opera_media";class C extends n.Component{render(){var{type:e,onCancel:t,onConfirm:a,messaging:r}=this.props,s=n.createElement(b,{messaging:r});if(e===v.GUIDE_ALLOW){var l;switch(_.default.browser){case u.default.BROWSER_TYPE.CHROME:case u.default.BROWSER_TYPE.FIREFOX:l=c.default.topLeft;break;case u.default.BROWSER_TYPE.EDGE:l=c.default.bottomCenter;break;default:l=c.default.topCenter}return n.createElement(p.default,{type:"guide"},n.createElement("div",{className:(0,i.default)(c.default.containerAllow,l)},n.createElement("div",{className:c.default.icon},n.createElement(m.default,{name:"back",directional:!0})),n.createElement("div",{className:c.default.title},n.createElement(y,{messaging:r})),n.createElement("div",{className:c.default.description},s),n.createElement("div",{className:c.default.controls},n.createElement(o.default,{onClick:a,type:"primary"},h.default.t(1145)))))}return n.createElement(d.default,{title:n.createElement(y,{messaging:r}),onOK:a,okText:h.default.t(1145),onCancel:t,cancelText:t?h.default.t(875):void 0},n.createElement("div",{className:c.default.description},s))}}function y(e){var{messaging:t}=e;switch(t){case"NOTIFICATIONS":return n.createElement(f.default,{id:827});case"CAMERA_FAIL":return n.createElement(f.default,{id:812});case"CAMERA_MISSING":return n.createElement(f.default,{id:811});case"MIC_MISSING":return n.createElement(f.default,{id:821});case"CAMERA":return n.createElement(f.default,{id:812});case"MIC_FAIL":case"MIC":return n.createElement(f.default,{id:823});default:throw new Error("Invalid messaging: ".concat(t))}}function b(e){var{messaging:t}=e,{browser:a}=_.default,r={[g]:n.createElement("span",{className:"chrome-media-icon"}),[E]:n.createElement("span",{className:"firefox-lock-icon"}),[S]:n.createElement("span",{className:"opera-media-icon"})};switch(t){case"NOTIFICATIONS":return"edge"===a?n.createElement(f.default,{id:825,params:r}):"firefox"===a?n.createElement(f.default,{id:826,params:r}):n.createElement(f.default,{id:824,params:r});case"CAMERA_FAIL":return"edge"===a?n.createElement(f.default,{id:806,params:r}):"firefox"===a?n.createElement(f.default,{id:807,params:r}):"safari"===a?n.createElement(f.default,{id:809,params:r}):"opera"===a?n.createElement(f.default,{id:808,params:r}):n.createElement(f.default,{id:805,params:r});case"CAMERA_MISSING":return n.createElement(f.default,{id:810,params:r});case"MIC_FAIL":return"edge"===a?n.createElement(f.default,{id:816,params:r}):"firefox"===a?n.createElement(f.default,{id:817,params:r}):"safari"===a?n.createElement(f.default,{id:819,params:r}):"opera"===a?n.createElement(f.default,{id:818,params:r}):n.createElement(f.default,{id:815,params:r});case"MIC_MISSING":return n.createElement(f.default,{id:820,params:r});case"CAMERA":return"edge"===a?n.createElement(f.default,{id:804,params:r}):n.createElement(f.default,{id:803,params:r});case"MIC":return"edge"===a?n.createElement(f.default,{id:814,params:r}):n.createElement(f.default,{id:813,params:r});default:throw new Error("Invalid messaging type: ".concat(t))}}t.default=C,C.TYPE=v,C.defaultProps={type:v.GUIDE_NONE,onConfirm:()=>l.default.closeModal()},C.displayName="GuidePopup",y.displayName="Title",b.displayName="Description"},84941:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(58527)),n=r(a(2784)),o=s(a(32960)),l=a(16211),d=s(a(50935)),u=s(a(18120)),c=s(a(5177)),h=s(a(17957)),f=r(a(2220)),p=s(a(91378)),m=s(a(77626)),_=a(82631).default;class v extends n.PureComponent{constructor(...e){super(...e),this.imgRef=n.createRef(),this._txtRef=n.createRef(),this._refContainer=n.createRef()}componentDidMount(){var e=this.imgRef.current,t=this._txtRef.current;this.props.animate?((0,p.default)(e,{scale:[1,0],opacity:[1,0]},{delay:1340,duration:180,easing:[.05,1.02,0,1.01]}),(0,p.default)(t,{translateY:[0,80],opacity:[1,0]},{delay:1300,duration:140,easing:[.05,1.02,0,1.01]})):(e&&(e.style.opacity="1"),t&&(t.style.opacity="1"))}animatePanel(e,t){var a,r=null===(a=this._refContainer.current)||void 0===a?void 0:a.clientWidth;return null!=r&&e!==t&&(0,l.animateConversationPanel)(this._refContainer.current,r/(e-t))}containsDOMNode(e){return!!this._refContainer.current&&this._refContainer.current.contains(e)}render(){var e,t,a={["data-asset-intro-image-".concat(this.context.theme)]:!0};if(u.default.supportsFeature(u.default.F.MD_BACKEND)){e=n.createElement("div",{ref:this.imgRef,className:c.default.mdImageWrapper},n.createElement(_,{className:c.default.mdBetaImage,name:"light"===(0,f.getTheme)()?"intro-md-beta-logo-light":"intro-md-beta-logo-dark"}));var r=n.createElement("div",{className:c.default.betaIcon},n.createElement("b",{className:c.default.betaIconText},h.default.t(254)));t=n.createElement(n.Fragment,null,n.createElement("div",{className:c.default.betaTitle},n.createElement("h1",{"data-a8n":o.default.key("intro-title")},h.default.t(849)),r),n.createElement("div",{"data-a8n":o.default.key("intro-text"),className:c.default.betaText},h.default.t(847),n.createElement("br",null),h.default.t(848)))}else e=n.createElement("div",(0,i.default)({ref:this.imgRef,className:c.default.image},a)),t=n.createElement(n.Fragment,null,n.createElement("h1",{"data-a8n":o.default.key("intro-title"),className:c.default.title},h.default.t(856)),n.createElement("div",{"data-a8n":o.default.key("intro-text"),className:c.default.text},h.default.t(850)));return n.createElement("div",{className:c.default.intro,ref:this._refContainer},n.createElement("div",{className:c.default.body},e,n.createElement("div",{ref:this._txtRef,className:c.default.textContainer},t,n.createElement(g,null))))}}v.contextType=f.default,v.displayName="IntroPanel";var g=()=>{var e,t='<a href="https://www.whatsapp.com/download" target="_blank">'.concat(h.default.t(853),"</a>");switch(m.default.os){case d.default.OS_TYPE.MAC:e=h.default.t(854,{get_it_here:t});break;case d.default.OS_TYPE.WINDOWS:e=h.default.t(855,{get_it_here:t})}return e?n.createElement(E,null,n.createElement("span",{className:c.default.secondaryIcon},n.createElement(_,{name:"laptop"})),n.createElement("div",{dangerouslySetInnerHTML:{__html:e},className:c.default.secondaryTextBody})):null},E=({children:e})=>n.createElement("div",{className:c.default.secondary},n.createElement("div",{className:c.default.divider}),n.createElement("div",{className:c.default.secondaryText},e)),S=v;t.default=S},14949:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.expandRawShortcut=S,t.default=void 0;var i=s(a(2784)),n=r(a(15774)),o=r(a(79711)),l=r(a(9386)),d=r(a(50935)),u=r(a(38023)),c=r(a(17957)),h=a(41967),f=r(a(72424)),p=a(25250),m=a(40263),_=r(a(77626)),v=[[c.default.t(846),n.default.INCREASE_PTT_SPEED,!1],[c.default.t(555),n.default.DECREASE_PTT_SPEED,!1]];var g="Shift+";class E extends i.Component{constructor(...e){super(...e),this.onClose=()=>{o.default.closeModal()},this._getModifiersToDisplay=()=>{var e=[_.default.os===d.default.OS_TYPE.MAC?"Cmd":"Ctrl"];return e.push(_.default.os===d.default.OS_TYPE.MAC?"Ctrl":"Alt"),e.map((e=>i.createElement("span",{key:e,className:u.default.key},e)))}}render(){var e,t=(e=f.default.pttPlaybackSpeedEnabled?v:[],[[c.default.t(1056),n.default.TOGGLE_UNREAD],[c.default.t(1107),n.default.TOGGLE_MUTE],[c.default.t(1047),n.default.TOGGLE_ARCHIVE],[c.default.t(1051),n.default.DELETE_OR_EXIT_CHAT],[c.default.t(1110),n.default.TOGGLE_PIN],[c.default.t(1078),n.default.SEARCH],[c.default.t(1089),n.default.SEARCH_IN_CHAT],[c.default.t(1108),n.default.OPEN_NEW_CHAT],[c.default.t(1109),n.default.OPEN_NEW_GROUP],[c.default.t(1111),n.default.OPEN_PROFILE],...e,[c.default.t(975),n.default.OPEN_SETTINGS]]).map((([e,t,a=!0],r)=>{var s=(0,p.getShortcutKey)(t);if(s){var n,o=S(s);n=-1===o.indexOf(g)?i.createElement("span",{className:u.default.key},o):i.createElement(i.Fragment,null,i.createElement("span",{className:u.default.key},"Shift"),i.createElement("span",{className:u.default.key},o.substr(g.length)));var l=a?this._getModifiersToDisplay():null;return i.createElement("div",{key:r,className:u.default.section},i.createElement("div",{className:u.default.action,title:e},e),i.createElement("div",{className:u.default.shortcut},l,n))}}));return i.createElement(l.default,{onOK:this.onClose,okText:c.default.t(1761),type:h.FlexModalType},i.createElement("div",{className:u.default.container},i.createElement(m.TextSpan,{theme:"popup-title"},c.default.t(861)),i.createElement("div",{className:u.default.list},t)))}}function S(e){if(1!==e.length)return e;switch(e){case">":return"".concat(g,".");case"<":return"".concat(g,",")}return e.toLowerCase()!==e?"".concat(g).concat(e):e.toUpperCase()}t.default=E,E.displayName="KeyboardShortcutsPopup"},12002:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(58701)),o=r(a(73023)),l=s(a(71311)),d=r(a(35598)),u=r(a(22004)),c=r(a(38147)),h=r(a(6660)),f=r(a(44343)),p=r(a(17957)),m=r(a(81610)),_=s(a(41967));class v extends i.Component{constructor(...e){super(...e),this.flatListController=new u.default,this._refList=i.createRef(),this._refSearch=i.createRef(),this.onNext=e=>{e.preventDefault(),e.stopPropagation();var t=this.props.selection;t&&t.setNext(!0)},this.onPrev=e=>{var t=this.props.selection;t&&(e.preventDefault(),e.stopPropagation(),t.prev()>-1?t.setPrev(!0):(t.unset(),c.default.shouldIndicateFocus(),h.default.focus(this._refSearch.current)))},this.onFocusList=e=>{this._refList.current&&(e.preventDefault(),e.stopPropagation(),c.default.shouldIndicateFocus(),this.props.selection.setFirst(!0))},this.onSelectFirst=e=>{e.preventDefault(),e.stopPropagation();var t=this.props.data[0];t&&this.props.onSelect(e,t)},this.onSearch=e=>{this.props.onSearch(e)},this._isFocusInContainer=e=>{var t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},this._onFocus=e=>{this._isFocusInContainer(e)&&this.props.selection.setFirst(!0)},this._onBlur=e=>{this._isFocusInContainer(e)&&this.props.selection.unset()}}componentDidMount(){h.default.focus(this._refSearch.current)}render(){var e,{title:t,onCancel:a,onSearch:r,onRef:s,searchPlaceholder:u,renderItem:c,data:h,emptyState:v}=this.props,g={down:this.onFocusList},E={down:this.onNext,up:this.onPrev};r&&(e=i.createElement(f.default,{handlers:g},i.createElement(m.default,{ref:this._refSearch,onSearch:this.onSearch,onEnter:this.onSelectFirst,placeholder:u||p.default.t(1269)})));var S=h.length?i.createElement(f.default,{handlers:E,onFocus:this._onFocus,onBlur:this._onBlur,tabIndex:0},i.createElement(d.default,{data:h,ref:this._refList,flatListController:this.flatListController,direction:"vertical",renderItem:c})):v;return i.createElement(_.default,{type:_.TowerModalType,onRef:s},i.createElement(n.default,{key:"contact-modal"},i.createElement(l.default,{title:t,type:l.DRAWER_HEADER_TYPE.POPUP,onCancel:a}),e,i.createElement(o.default,{flatListControllers:[this.flatListController]},S)))}}t.default=v,v.displayName="ListModal"},10979:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(91581)),d=r(a(17957)),u=r(a(40207));class c extends i.PureComponent{constructor(...e){super(...e),this._onStop=()=>{var{liveLocation:e}=this.props.chat;e&&e.stopMyLiveLocation(),n.default.closeModal()},this.onCancel=()=>{n.default.closeModal()}}render(){var{name:e,isGroup:t}=this.props.chat,a=t?d.default.t(135,{name:e}):d.default.t(136,{name:e});return i.createElement(o.default,{onOK:this._onStop,okText:d.default.t(906),onCancel:this.onCancel},i.createElement(l.default,{text:a}))}}c.CONCERNS={chat:["name","isGroup","liveLocation"]},c.displayName="LiveLocationStopPopup";var h=(0,u.default)(c,c.CONCERNS);t.default=h},69421:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logSessionEvent=function(e,t,a){var r=new s.default.ContactUsSession({contactUsExitState:e,contactUsT:Math.ceil(performance.now()-t)});a&&(r.contactUsAutomaticEmail=!0,r.contactUsProblemDescription=a.subject,r.contactUsScreenshotC=a.numScreenshots);r.commit()};var s=r(a(40210))},93621:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(7470)),d=r(a(17957)),u=r(a(3111));class c extends i.Component{render(){var e,{to:t}=this.props;if(t.isUser()){var a=l.default.get(t),r=a?a.formattedName:(0,u.default)(t);e=d.default.t(1728,{name:r})}else e=d.default.t(1726);return i.createElement(o.default,{onOK:()=>n.default.closeModal(),okText:d.default.t(1761),title:d.default.t(1746)},e)}}t.default=c,c.displayName="MdDowngradeModal"},58513:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(17957));class d extends i.Component{render(){return i.createElement(o.default,{onOK:()=>n.default.closeModal(),okText:l.default.t(1870),cancelText:l.default.t(1593),onCancel:()=>n.default.closeModal()},l.default.t(1746))}}t.default=d,d.displayName="MdSendRetryModal"},69345:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(79711)),l=s(a(9386)),d=s(a(50935)),u=s(a(17957)),c=s(a(40207));function h(){var e=(0,i.default)(["type: ",""]);return h=function(){return e},e}class f extends n.PureComponent{render(){var e,t,{msg:a}=this.props,{type:r}=a;switch(r){case d.default.MSG_TYPE.VIDEO:this.props.msg.isGif?(e=u.default.t(1019),t=u.default.t(1018)):(e=u.default.t(1026),t=u.default.t(1025));break;case d.default.MSG_TYPE.AUDIO:e=u.default.t(1013),t=u.default.t(1012);break;case d.default.MSG_TYPE.IMAGE:e=u.default.t(1022),t=u.default.t(1021);break;case d.default.MSG_TYPE.DOCUMENT:if(a.isVcardOverMmsDocument){e=u.default.t(1015),t=u.default.t(1014);break}e=u.default.t(1017),t=u.default.t(1016);break;case d.default.MSG_TYPE.STICKER:e=u.default.t(1024),t=u.default.t(1023);break;default:e=u.default.t(1020),__LOG__(4,void 0,new Error,!0)(h(),r),SEND_LOGS("MediaMissingModal: unexpected message type")}return n.createElement(l.default,{title:e,onOK:()=>{o.default.closeModal()},okText:u.default.t(1761)},t)}}f.CONCERNS={msg:["type","isGif","isVcardOverMmsDocument"]},f.displayName="MediaMissingModal";var p=(0,c.default)(f,f.CONCERNS);t.default=p},32125:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(50935)),d=r(a(17957)),u=r(a(40207));class c extends i.PureComponent{render(){var e;switch(this.props.msg.type){case l.default.MSG_TYPE.VIDEO:this.props.msg.isGif||(e=d.default.t(1118))}return i.createElement(o.default,{onOK:()=>{n.default.closeModal()},okText:d.default.t(1761)},e)}}c.CONCERNS={msg:["type","isGif"]},c.displayName="MediaNeedPokeModal";var h=(0,u.default)(c,c.CONCERNS);t.default=h},10853:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(43396)),d=r(a(17957));class u extends i.Component{constructor(...e){super(...e),this.onDownload=()=>{n.default.closeModal(),l.default.initDownload(this.props.msg)}}render(){return i.createElement(o.default,{onCancel:()=>n.default.closeModal(),onOK:this.onDownload,okText:d.default.t(1589),cancelText:d.default.t(1593),title:d.default.t(599)},d.default.t(598))}}t.default=u,u.displayName="MediaUnsupportedModal"},34854:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(67762)),o=a(70013),l=r(a(40207));class d extends i.PureComponent{constructor(...e){super(...e),this.stopPropagation=e=>{e.stopPropagation()}}render(){var{altText:e,mediaData:t}=this.props,a=t.preview&&t.preview.url(),r=(0,o.aspectRatioScaled)(t.aspectRatio,500);return i.createElement("div",{className:n.default.mediaViewerBlurCrop,style:r,onClick:this.stopPropagation},i.createElement("img",{className:n.default.mediaViewerBlurImg,src:a,alt:e}))}}d.CONCERNS={mediaData:["preview","aspectRatio"]},d.displayName="BlurredImageClass";var u=(0,l.default)(d,d.CONCERNS);t.default=u},61195:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(43596)),l=s(a(34854)),d=s(a(50935)),u=s(a(53632)),c=s(a(79850)),h=a(96645),f=s(a(19125)),p=s(a(40210)),m=s(a(88352)),_=s(a(40207)),v=s(a(17693));class g extends n.PureComponent{constructor(...e){super(...e),this.state={zoomIn:null},this._refObjectFit=n.createRef(),this.getOutsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.outsideContainer},this.getInsideContainer=()=>{var e;return null===(e=this._refObjectFit.current)||void 0===e?void 0:e.insideContainer},this.onImageClick=e=>{e.stopPropagation(),this._onZoomIn(e.pageX,e.pageY)},this.onImageKeyboardZoom=e=>{e.stopPropagation(),this._onZoomIn(window.innerWidth/2,window.innerHeight/2)},this._onZoomIn=(e,t)=>{if(this.state.zoomIn)this._cancelZoomIn();else{var a=this.getInsideContainer(),r=this.getOutsideContainer();if(a instanceof HTMLElement&&r instanceof HTMLElement){this.heightOverflow=a.clientHeight*d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-r.clientHeight,this.widthOverflow=a.clientWidth*d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR-r.clientWidth;var{translateX:s,translateY:i}=this.getTranslatePosition(r,e,t);this.props.onImgZoomIn(!0),this.setState({zoomIn:{factor:d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR,translateX:s,translateY:i}})}}},this._cancelZoomIn=()=>{this.props.onImgZoomIn(!1),this.setState({zoomIn:null})},this.getTranslatePosition=(e,t,a)=>{var r=window.innerWidth/2-t,s=window.innerHeight/2-a;return{translateX:this.widthOverflow>0?Math.round(1.2*r*this.widthOverflow/e.clientWidth):0,translateY:this.heightOverflow>0?Math.round(1.2*s*this.heightOverflow/e.clientHeight):0}},this._renderBlurredImage=()=>n.createElement(l.default,{altText:"",mediaData:this.props.mediaData}),this._renderImage=e=>{var{zoomIn:t}=this.state,{preventDownload:a}=this.props;return n.createElement(u.default,{className:(0,i.default)(c.default.mediaViewerImg,{[c.default.cursorZoomIn]:!t,[c.default.isDownloadPrevented]:a}),draggable:!a,onClick:this.onImageClick,disableContextMenu:a,src:e})},this._renderDownloadPreventedImage=e=>{var{zoomIn:t}=this.state;return n.createElement("figure",{className:(0,i.default)(c.default.mediaViewerImg,{[c.default.cursorZoomIn]:!t}),draggable:"false",onClick:this.onImageClick,onContextMenu:e=>e.preventDefault()},this._renderImage(e))}}componentDidMount(){var e;null===(e=this.props.msg)||void 0===e||e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})}componentWillUnmount(){this.props.msg&&this.props.msg.mediaObject&&this.props.msg.cancelDownload()}render(){var{mediaData:e,msg:t,preventDownload:a}=this.props;switch(e.mediaStage){case h.MEDIA_DATA_STAGE.DECRYPTING:if(null==e.progressiveStage)return this._renderBlurredImage();break;case h.MEDIA_DATA_STAGE.RESOLVED:case h.MEDIA_DATA_STAGE.PROGRESSIVE_READY:break;default:return this._renderBlurredImage()}var r={width:e.fullWidth,height:e.fullHeight},s=a?this._renderDownloadPreventedImage:this._renderImage,i=n.createElement("div",{className:c.default.mediaViewerImg},null!=t?n.createElement(n.Fragment,null,n.createElement(f.default,{mediaData:e,placeholderRenderer:this._renderBlurredImage,downloadMedia:()=>t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:p.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),renderProgressively:!0},s),t.interactiveAnnotations&&t.interactiveAnnotations.length>0&&n.createElement(o.default,{annotations:t.interactiveAnnotations,onTooltipDisplay:this.props.onAnnotationTooltipDisplay,onTooltipDismiss:this.props.onAnnotationTooltipDismiss})):s(e.renderableUrl));return this.state.zoomIn&&(i=n.createElement(v.default,{displayName:"ZoomInImage",escapable:!0,requestDismiss:this._cancelZoomIn},i)),n.createElement(m.default,{type:"zoomIn",size:r,position:"relative",objectPosition:"relative",zoomIn:this.state.zoomIn,onObjectLoad:this.props.onLoad,ref:this._refObjectFit},i)}}g.CONCERNS={mediaData:["mediaStage","fullWidth","fullHeight","renderableUrl","progressiveStage"]},g.displayName="MediaImage";var E=(0,_.default)(g,g.CONCERNS);t.default=class extends E{get heightOverflow(){return this.getComponent().heightOverflow}get widthOverflow(){return this.getComponent().widthOverflow}onImageClick(e){return this.getComponent().onImageClick(e)}onImageKeyboardZoom(e){return this.getComponent().onImageKeyboardZoom(e)}getTranslatePosition(e,t,a){return this.getComponent().getTranslatePosition(e,t,a)}getOutsideContainer(){return this.getComponent().getOutsideContainer()}getInsideContainer(){return this.getComponent().getInsideContainer()}}},13934:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=s(a(68084)),l=a(96645),d=r(a(10853)),u=r(a(40210)),c=r(a(40207)),h=a(64658);class f extends i.PureComponent{constructor(...e){super(...e),this._onUnsupportedDownloadClick=e=>{e.stopPropagation(),n.default.openModal(i.createElement(d.default,{msg:(0,h.unproxy)(this.props.msg)}))},this.downloadMedia=e=>{e.stopPropagation(),this.props.msg.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:u.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0})},this._cancelDownload=e=>{e.stopPropagation(),this.props.msg.cancelDownload()},this.stopPropagation=e=>{e.stopPropagation()}}render(){var{mediaData:e}=this.props;if(e.streamable&&e.isStreamable())return null;switch(e.mediaStage){case l.MEDIA_DATA_STAGE.RESOLVED:case l.MEDIA_DATA_STAGE.ERROR_MISSING:return null;case l.MEDIA_DATA_STAGE.NEED_POKE:return i.createElement(o.Download,{filesize:e.size,onClick:this.downloadMedia});case l.MEDIA_DATA_STAGE.FETCHING:return i.createElement("div",{onClick:this._cancelDownload},i.createElement(o.PendingCancel,null));case l.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:return i.createElement(o.Download,{filesize:e.size,onClick:this._onUnsupportedDownloadClick});default:return i.createElement("div",{onClick:this.stopPropagation},i.createElement(o.Pending,null))}}}f.CONCERNS={mediaData:["mediaStage","size","streamable"]},f.displayName="MediaStage";var p=(0,c.default)(f,f.CONCERNS);t.default=p},91729:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(79711)),l=s(a(9386)),d=s(a(50935)),u=s(a(56117)),c=a(95595),h=s(a(17957)),f=s(a(20642)),p=a(53527),m=s(a(90237)),_=s(a(40210)),v=a(40263),g=s(a(2220)),E={light:{low:a(57765),high:a(53139)},dark:{low:a(58207),high:a(29098)}};class S extends n.PureComponent{constructor(e){super(e),this.onOK=()=>{(0,p.openMessengerRoomUrl)(this.props.chat),o.default.closeModal()},this.onCancel=()=>{var e=_.default.DESTINATION.CANCELLED,t=this.props.chat?_.default.ROOMS_ENTRY_POINT.ATTACHMENT:_.default.ROOMS_ENTRY_POINT.WEB_MENU;new _.default.RoomsCreationFlow({entryResult:e,roomsEntryPoint:t}).commit(),o.default.closeModal()},(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW,{views:0,maxViews:1}),(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING,{views:0,maxViews:5}),e.chat||(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)||(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST,{views:0,maxViews:1}),e.chat&&!(0,c.getNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN)&&(0,c.setNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN,{views:0,maxViews:1})}componentDidMount(){(0,c.shouldShowNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW)?((0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW),this.props.listeners.add(window,"dpichange",(()=>{this.forceUpdate()}))):(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_RETURNING),this.props.chat?(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN):(0,c.viewNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_FROM_CHATLIST)}render(){var e=(0,c.shouldShowNUX)(d.default.NUX.MESSENGER_ROOM_DIALOG_NEW),t=E[this.context.theme][u.default.currentRes],a=e?n.createElement(n.Fragment,null,n.createElement("img",{alt:"",src:t,className:m.default.illustration}),n.createElement(v.TextDiv,{theme:"popup-title",className:(0,i.default)(m.default.title,m.default.block)},h.default.t(1007)),n.createElement(v.TextDiv,{theme:"plain",className:m.default.block},h.default.t(1005)),n.createElement(v.TextDiv,{theme:"muted-small",className:m.default.block},h.default.t(1006))):n.createElement(v.TextDiv,{theme:"plain"},h.default.t(1008));return n.createElement(l.default,{okText:h.default.t(1004),onOK:this.onOK,onCancel:this.onCancel},a)}}S.contextType=g.default,S.displayName="MessengerRoomPopup";var C=(0,f.default)(S);t.default=C},76214:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(46774)),o=s(a(13886)),l=r(a(43334)),d=r(a(16348)),u=r(a(79711)),c=r(a(7470)),h=a(20485),f=s(a(35598)),p=r(a(6660)),m=r(a(17957)),_=r(a(53467)),v=r(a(46821)),g=r(a(73073)),E=r(a(72424)),S=s(a(75074)),C=r(a(97702)),y="SEC_FREQUENT_CONTACTS",b="SEC_CHATS",T="SEC_CONTACTS",M="ROW_FREQUENT_CONTACTS",N="ROW_CHATS",I="ROW_CONTACTS";class P extends i.Component{constructor(...e){super(...e),this.setSearch=e=>{this.search=e},this.setList=e=>{this.list=e},this.state={filteredData:this.calculateFilteredData(this.props.searchText)},this._handleRef=e=>{this._refHotKey=e},this.onCancelSelection=()=>{this.props.selections.unsetAll()},this._handleSelect=(e,t,a)=>{var{selections:r,maxChats:s,active:n,onSelectionChanged:o,hasFrequentlyForwarded:l}=this.props;if(t&&"number"==typeof s&&r.getSelected().length>=s){var d=E.default.hfmStringChanges?m.default.t(711,{count:s,_plural:s}):m.default.t(710,{count:s,_plural:s}),c=l?d:m.default.t(709,{count:s,_plural:s});u.default.openToast(i.createElement(S.default,{id:(0,S.genId)(),msg:c}))}else r.setVal(e,t,a),n.setVal(e,a),o&&o(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case y:return i.createElement(g.default,{header:m.default.t(1639)});case b:return i.createElement(g.default,{header:m.default.t(1814)});case T:return i.createElement(g.default,{header:m.default.t(1762)});case M:case N:case I:var t,{data:a}=e,r=!1;this.props.hasFrequentlyForwarded&&a.groupMetadata&&a.groupMetadata.noFrequentlyForwarded&&(r=!0,t=m.default.t(716));var s=()=>this._onChatClick(a);return i.createElement(d.default,{key:a.id.toString(),model:a,selections:this.props.selections,tabIndex:-1},a instanceof n.default?i.createElement(o.default,{theme:r?"chat-checkbox-no-delete":"chat-checkbox",active:this.props.active,chat:a,mode:o.Mode.INFO,noContext:!0,onClick:s,secondary:t,showEphemeralIcon:this.props.showEphemeralIcon}):i.createElement(C.default,{contact:a,onSelect:s,customSecondaryText:t,active:this.props.active,showEphemeralIcon:this.props.showEphemeralIcon}));default:throw new f.UnknownDataError(e)}}}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){if(this.props.searchText!==e.searchText){var t=this.calculateFilteredData(this.props.searchText);this.setState({filteredData:t}),this.props.active.init(this._flattenData(t))}}calculateFrequentContacts(e){var{msgType:t,excludeChat:a}=this.props;return e?[]:c.default.frequentContacts(t,a)}_calculateFilteredChats(e){var t=e;if(t){t=m.default.accentFold(t);var a=(0,v.default)(t);return l.default.filter((function(e){return e.canSend&&e.shouldAppearInList&&e.contact.searchMatch(t,a)}))}return l.default.filter((function(e){return e.canSend&&e.shouldAppearInList}))}calculateFilteredContacts(e){var t=e,a=c.default.getFilteredContacts();if(!t)return a;t=m.default.accentFold(e);var r=(0,v.default)(t);return a.filter((function(e){return e.searchMatch(t,r)}))}calculateFilteredData(e){var t={};return{frequentContacts:this.calculateFrequentContacts(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;var a=e.isGroup||e.isBroadcast?l.default.get(e.id):e;return a&&(t[a.id]=!0),a})).filter(Boolean),chats:this._calculateFilteredChats(e).map((e=>{if(this.props.excludeBroadcast&&e.isBroadcast)return null;var a=e.isGroup||e.isBroadcast?e:e.contact;return t[a.id]?null:(t[a.id]=!0,a)})).filter(Boolean),contacts:this.calculateFilteredContacts(e).map((e=>t[e.id]?null:e)).filter(Boolean)}}_flattenData(e){var{frequentContacts:t,chats:a,contacts:r}=e;return t.concat(a,r)}_isEmpty(){var{frequentContacts:e,chats:t,contacts:a}=this.state.filteredData;return!e.length&&!t.length&&!a.length}_getData(){var e=[],{frequentContacts:t,chats:a,contacts:r}=this.state.filteredData;return t.length&&(e.push({itemKey:y,type:y}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:M,data:e}))))),a.length&&(e.push({itemKey:b,type:b}),e.push(...a.map((e=>({itemKey:e.id.toString(),type:N,data:e}))))),r.length&&(e.push({itemKey:T,type:T}),e.push(...r.map((e=>({itemKey:e.id.toString(),type:I,data:e}))))),e}toggleFirst(e){var t,{frequentContacts:a,chats:r,contacts:s}=this.state.filteredData;if(a.length)t=a[0];else if(r.length)t=r[0];else{if(!s.length)return;t=s[0]}var i=!this.props.selections.isSelected(t);this._handleSelect(t,i,e)}focus(){this._refHotKey&&p.default.focus(this._refHotKey)}_onChatClick(e){var t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){return this._isEmpty()?this.props.searchText?i.createElement(h.Search,null):i.createElement(h.ListChats,null):i.createElement(f.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return i.createElement(_.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList())}}t.default=P,P.displayName="MultiSelectChatList"},78387:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(16348)),o=r(a(79711)),l=r(a(7470)),d=a(20485),u=s(a(35598)),c=r(a(6660)),h=r(a(17957)),f=r(a(53467)),p=r(a(46821)),m=r(a(73073)),_=s(a(75074)),v=r(a(97702)),g="SEC_CONTACTS",E="ROW_CONTACTS";class S extends i.Component{constructor(e){super(e),this.setList=e=>{this.list=e},this._handleRef=e=>{this._refHotKey=e},this._handleSelect=(e,t,a)=>{var{selections:r,maxContacts:s,active:n,onSelectionChanged:l}=this.props;t&&"number"==typeof s&&r.getSelected().length>=s?o.default.openToast(i.createElement(_.default,{id:(0,_.genId)(),msg:this.props.maxContactsExceedErrorMsg?this.props.maxContactsExceedErrorMsg:h.default.t(1034,{count:s,_plural:s})})):(r.setVal(e,t,a),n.setVal(e,a),l&&l(e,t))},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{switch(e.type){case g:return i.createElement(m.default,{header:h.default.t(1610)});case E:var{data:t}=e,{isDisabled:a,customSecondaryText:r}=this.props;return i.createElement(n.default,{key:t.id.toString(),model:t,selections:this.props.selections,checked:!!this.props.isSelected&&this.props.isSelected(t.id)},i.createElement(v.default,{contact:t,disabled:a&&a(t.id),onSelect:()=>this._onContactClick(t),customSecondaryText:r&&r(t.id),active:this.props.active,allowBlockedContacts:this.props.allowBlockedContacts}));default:throw new u.UnknownDataError(e)}},this.state={filteredData:S.calculateFilteredData(e)}}static getDerivedStateFromProps(e){return{filteredData:S.calculateFilteredData(e)}}static calculateFilteredData(e){return{contacts:S.calculateFilteredContacts(e)}}static calculateFilteredContacts(e){var{filter:t,useAllContacts:a,searchText:r}=e,s=a?l.default.toArray():l.default.getFilteredContacts();if(t&&(s=s.filter((e=>t(e)))),!r)return s;var i=h.default.accentFold(r),n=(0,p.default)(i);return s.filter((e=>e.searchMatch(i,n)))}componentDidMount(){this.props.active.init(this._flattenData(this.state.filteredData)),this.props.getInitialItems&&this.props.getInitialItems().forEach((e=>this.props.selections.setVal(e,!0)))}componentDidUpdate(e){this.props.searchText!==e.searchText&&this.props.active.init(this._flattenData(this.state.filteredData))}_flattenData(e){return e.contacts}_isEmpty(){return!this.state.filteredData.contacts.length}_getData(){var e=[],{contacts:t}=this.state.filteredData;return t.length&&(e.push({itemKey:g,type:g}),e.push(...t.map((e=>({itemKey:e.id.toString(),type:E,data:e}))))),e}toggleFirst(e){if(this.state.filteredData.contacts.length){var t=this.state.filteredData.contacts[0],a=!this.props.selections.isSelected(t);this._handleSelect(t,a,e)}}focus(){this._refHotKey&&c.default.focus(this._refHotKey)}_clearActive(){this.props.active.unset()}_onContactClick(e){var{isDisabled:t}=this.props;if(!t||!t(e.id)){var a=this.props.selections.isSelected(e);this._handleSelect(e,!a,!1)}}_renderList(){return this._isEmpty()?this.props.searchText?i.createElement(d.Search,null):i.createElement(d.ListChats,null):i.createElement(u.default,{ref:this.setList,flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this._getData(),renderItem:this._renderItem})}render(){return i.createElement(f.default,{active:this.props.active,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList())}}t.default=S,S.displayName="MultiSelectContactList"},53467:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(44343));class o extends i.Component{constructor(...e){super(...e),this._onNext=e=>{e.preventDefault(),e.stopPropagation(),this.props.active.setNext(!0),this.props.onIndexChange&&this.props.onIndexChange(this.props.active.index)},this._onPrev=e=>{e.stopPropagation(),e.preventDefault(),this.props.active.prev()>-1?(this.props.active.setPrev(!0),this.props.onIndexChange&&this.props.onIndexChange(this.props.active.index)):this.props.onLeave&&(this.props.onLeave(e),this.props.active.unset())},this._onEnter=e=>{this.props.onEnter&&this.props.onEnter(e)},this._isFocusInContainer=e=>{var t=e.relatedTarget;return t instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.currentTarget.contains(t)},this._onFocus=e=>{this._isFocusInContainer(e)&&this.props.active.setFirst(!0)},this._onBlur=e=>{this._isFocusInContainer(e)&&this.props.active.unset()}}render(){var e={down:this._onNext,up:this._onPrev,enter:this._onEnter,space:this._onEnter};return i.createElement(n.default,{handlers:e,onRef:this.props.onRef,onFocus:this._onFocus,onBlur:this._onBlur,tabIndex:0},this.props.children)}}t.default=o,o.displayName="MultiSelectListHotKeys"},31629:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(65468)),o=r(a(50935)),l=a(20485),d=a(19741),u=r(a(35598)),c=r(a(89286)),h=r(a(6660)),f=a(95595),p=r(a(53467)),m=r(a(72259)),_=r(a(67257)),v=a(11419),g=a(75637);class E extends i.Component{constructor(...e){super(...e),this.setList=e=>{this.list=e},this.state={products:this._getCollectionProducts(),loadingMore:!1,loadedProducts:this._getCollectionProducts().length,canLoadMore:!0,hasCatalog:!0},this._handleRef=e=>{this._refHotKey=e},this.updateForScrollEvent=e=>{var t=e.currentTarget,{scrollTop:a,clientHeight:r,scrollHeight:s}=t;s-r-a<o.default.SCROLL_FUDGE&&!this.state.loadingMore&&this._loadMoreProducts()},this._onEnter=e=>{e.stopPropagation(),e.preventDefault();var{active:t}=this.props;t.value&&this._onProductClick(t.value)},this._handleSelect=(e,t,a)=>{var{selections:r,active:s,onSelectionChanged:i}=this.props;r.setVal(e,t,a),s.setVal(e,a),i&&i(e,t)},this._handleIndexChange=e=>{var t;null===(t=this.list)||void 0===t||t.scrollIntoViewIfNeeded(e)},this._renderItem=e=>{var{data:t}=e;return i.createElement(_.default,{key:t.id.toString(),product:t,selections:this.props.selections,onClick:()=>this._onProductClick(t),active:this.props.active})}}componentDidMount(){this.props.active.init(this.state.products),this._findProducts()}toggleFirst(e){var t=this.state.products;if(0!==t.length){var a=t[0],r=!this.props.selections.isSelected(a);this._handleSelect(a,r,e)}}focus(){this._refHotKey&&h.default.focus(this._refHotKey)}_findProducts(){this.setState({loadingMore:!0}),n.default.find((0,f.getMaybeMeUser)()).catchType(d.ServerStatusCodeError,(()=>this.setState({hasCatalog:!1,loadingMore:!1,canLoadMore:!1}))).then((()=>this._loadMoreProducts()))}_loadMoreProducts(){var e=this._getCatalog();if(e)if(e.afterCursor&&this.state.canLoadMore)this.setState({loadingMore:!0}),n.default.findNextProductPage(e.id).checkpoint(this.props.rejectOnUnmount()).then((e=>{var t=e.length;this.setState((({loadedProducts:a})=>({products:e,loadingMore:!1,loadedProducts:t,canLoadMore:a!==t})),(()=>{this.props.onProductsLoaded&&this.props.onProductsLoaded(e)})),this.props.active.init(e)})).catch((()=>{this.setState({loadingMore:!1,canLoadMore:!0})}));else{var t=e.productCollection.getProductModels();this.setState({products:t,loadingMore:!1,canLoadMore:!1}),this.props.onProductsLoaded&&this.props.onProductsLoaded(t)}}_getCollectionProducts(){var e=this._getCatalog();return null!=e?e.productCollection.getProductModels():[]}_getCatalog(){var e=(0,f.getMaybeMeUser)(),t=(0,v.isString)(e)?(0,g.createWid)(e):e;return n.default.get(t)}_onProductClick(e){var t=this.props.selections.isSelected(e);this._handleSelect(e,!t,!1)}_renderList(){if(0===this.state.products.length&&!this.state.loadingMore&&!this.state.canLoadMore)return i.createElement(l.ListProducts,{hasCatalog:this.state.hasCatalog});var e=this.state.products.map((e=>({itemKey:e.id.toString(),data:e})));return i.createElement(u.default,{ref:this.setList,direction:"vertical",forceConsistentRenderCount:!1,data:e,renderItem:this._renderItem,flatListController:this.props.flatListController,defaultItemHeight:o.default.PRODUCT_LIST_ITEM_HEIGHT})}render(){return i.createElement(p.default,{active:this.props.active,onEnter:this._onEnter,onLeave:this.props.onLeaveList,onRef:this._handleRef,onIndexChange:this._handleIndexChange},this._renderList(),this.state.loadingMore&&i.createElement(c.default,null))}}E.displayName="MultiSelectProductList";var S=(0,m.default)(E);t.default=class extends S{toggleFirst(e){this.getComponent().toggleFirst(e)}focus(){this.getComponent().focus()}updateForScrollEvent(e){this.getComponent().updateForScrollEvent(e)}}},7632:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(58701)),l=r(a(73023)),d=s(a(71311)),u=r(a(44343)),c=r(a(17957)),h=s(a(41967)),f=r(a(3614)),p=r(a(91735)),m=a(84990);class _ extends i.Component{render(){var{vcards:e}=this.props;return i.createElement(h.default,{type:h.BoxModalType},i.createElement(o.default,null,i.createElement(d.default,{title:c.default.t(1033,{count:e.length,_plural:e.length}),type:d.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>n.default.closeModal()}),i.createElement(l.default,null,i.createElement(u.default,null,i.createElement("div",{className:f.default.body},e.map(((e,t)=>e?i.createElement("div",{className:f.default.vcardWrapper,key:t},i.createElement(p.default,{parsedVcard:e,thumbnail:(0,m.vcardThumbnail)(e)})):null)))))))}}_.displayName="MultiVcardModal";var v=_;t.default=v},87095:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(91581)),d=a(95595),u=r(a(17957)),c=a(43257),h=r(a(31003)),f=r(a(40207));function p(){n.default.closeModal()}class m extends i.PureComponent{constructor(...e){super(...e),this.state={},this.onChange=({target:e})=>{e instanceof HTMLInputElement&&this.setState({mute:parseFloat(e.value)})},this.onMute=()=>{n.default.closeModal();var e=this._getMuteDuration();(0,d.setLastChatMuteDuration)(e),this.props.onMute((0,c.calculateMuteExpiration)(e),e)}}componentDidUpdate(){0!==this.props.mute.expiration&&p()}_getMuteDuration(){return null!=this.state.mute&&0!==this.state.mute?this.state.mute:(0,d.getLastChatMuteDuration)()||(0,c.getDefaultMuteDuration)()}render(){var e=this.props.onCancel||p,t=this._getMuteDuration(),a=(0,c.getAllMuteDurations)().map((({label:e,duration:a})=>{var r="duration-".concat(a);return i.createElement("li",{key:"mute-"+a},i.createElement("input",{id:r,type:"radio",name:"duration",className:h.default.input,value:a,checked:t===a,onChange:this.onChange}),i.createElement("label",{htmlFor:r,className:h.default.label},e))}));return i.createElement(o.default,{title:i.createElement(l.default,{text:this.props.title}),okText:u.default.t(1741),onOK:this.onMute,onCancel:e},i.createElement("form",null,i.createElement("ol",null,a)))}}m.CONCERNS={mute:["id","expiration"]},m.displayName="MutePopup";var _=(0,f.default)(m,m.CONCERNS);t.default=_},50540:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(32960)),l=s(a(21403)),d=s(a(9386)),u=s(a(18120)),c=s(a(17957)),h=s(a(41069)),f=a(40263);class p extends n.Component{constructor(...e){super(...e),this.state={additionalActions:!0},this._onToggleAdditionalActions=()=>{this.setState({additionalActions:!this.state.additionalActions})},this.onReport=()=>{this.state.additionalActions?this.props.isGroupChat?this.props.onReportExitClear():this.props.onReportBlockClear():this.props.onReport()}}render(){var e,t,a;this.props.isGroupChat?(e=c.default.t(1243),t=c.default.t(1242),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1734):c.default.t(1251)):this.props.isBusiness?(e=c.default.t(1237),t=c.default.t(1236),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1736):c.default.t(1253)):(e=c.default.t(1240),t=c.default.t(1239),a=u.default.supportsFeature(u.default.F.MD_BACKEND)?c.default.t(1735):c.default.t(1252));var r=n.createElement("div",{"data-a8n":o.default.key("menu-icon-report-spam"),className:h.default.control},n.createElement(l.default,{onChange:this._onToggleAdditionalActions,checked:this.state.additionalActions,id:"menu-icon-report-spam"})),s=n.createElement("label",{htmlFor:"menu-icon-report-spam",className:h.default.label},t);return u.default.supportsFeature(u.default.F.MD_BACKEND)?n.createElement(d.default,{title:e,onOK:this.onReport,okText:c.default.t(1233),onCancel:this.props.onCancel},n.createElement("div",{className:(0,i.default)(h.default.section,h.default.border)},r,s),n.createElement(f.TextParagraph,{className:h.default.mdMetaText,theme:"muted"},a)):n.createElement(d.default,{onOK:this.onReport,okText:c.default.t(1233),onCancel:this.props.onCancel},e,n.createElement(f.TextDiv,{className:h.default.metaText,theme:"muted"},a),n.createElement("div",{className:h.default.section},r,s))}}t.default=p,p.displayName="ReportSpamPopup"},51079:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListType=void 0;var i=s(a(2784)),n=r(a(43334)),o=r(a(60846)),l=r(a(79711)),d=r(a(40147)),u=r(a(37097)),c=r(a(58701)),h=r(a(73023)),f=s(a(71311)),p=r(a(22004)),m=r(a(38147)),_=r(a(6660)),v=s(a(41967)),g=r(a(76214)),E=r(a(78387)),S=r(a(31629)),C=r(a(42913)),y=r(a(89243)),b=r(a(73664)),T={CHAT_SELECT_MODAL:"CHAT_SELECT_MODAL",CONTACT_SELECT_MODAL:"CONTACT_SELECT_MODAL",PARTICIPANT_MANAGE_MODAL:"PARTICIPANT_MANAGE_MODAL",PRODUCT_SELECT_MODAL:"PRODUCT_SELECT_MODAL"};t.ListType=T;class M extends i.Component{constructor(...e){super(...e),this.state={searchText:""},this._setRefSearch=e=>{this._refSearch=e},this._setRefList=e=>{this._refList=e},this.active=new b.default([],(e=>e.id)),this.selections=new C.default([],(e=>e.id.toString())),this.flatListController=new p.default,this._setSearchText=e=>{this.setState({searchText:e})},this.onFocusList=e=>{e&&(e.preventDefault(),e.stopPropagation())},this.onDown=()=>{this.active.setFirst(!0)},this.onScroll=e=>{this._refList instanceof S.default&&this._refList.updateForScrollEvent&&this._refList.updateForScrollEvent(e)},this._indicateSearchFocus=()=>{var e;this.active.unset(),null===(e=this._refSearch)||void 0===e||e.getComponent().indicateFocus()},this.onLeaveList=()=>{m.default.shouldIndicateFocus(),_.default.focus(this._refSearch)},this.handleEnter=()=>{var e;null===(e=this._refList)||void 0===e||e.toggleFirst(!1)},this._handleForward=()=>{var{onConfirm:e,listType:t}=this.props,a=this.selections.getSelected();t===T.CONTACT_SELECT_MODAL||t===T.PARTICIPANT_MANAGE_MODAL||t===T.PRODUCT_SELECT_MODAL?e(a):Promise.all(a.map((e=>e instanceof d.default?n.default.find(e.id):e))).then((t=>{e(t)}))},this._handleSelectionChanged=(e,t)=>{var a;null===(a=this._refSearch)||void 0===a||a.select();var{onSelectionChanged:r}=this.props;null!=r&&r(e,t,this.selections.getSelected())},this._onSelectedListDelete=(e,t)=>{this.selections.setVal(t,!1)},this.onCancel=this.props.onCancel?this.props.onCancel:()=>l.default.closeModal()}componentDidMount(){_.default.focus(this._refSearch)}_renderList(){switch(this.props.listType){case T.CHAT_SELECT_MODAL:var e=this.props.getInitialItems,t=this.selections;return i.createElement(g.default,{ref:this._setRefList,msgType:this.props.msgType,excludeChat:this.props.excludeChat,excludeBroadcast:this.props.excludeBroadcast,getInitialItems:e,searchText:this.state.searchText,active:this.active,selections:t,maxChats:this.props.maxItems,onLeaveList:this.onLeaveList,onSelectionChanged:this._handleSelectionChanged,hasFrequentlyForwarded:this.props.hasFrequentlyForwarded,flatListController:this.flatListController,showEphemeralIcon:this.props.showEphemeralIcon});case T.PARTICIPANT_MANAGE_MODAL:case T.CONTACT_SELECT_MODAL:var a=this.props.getInitialItems,r=this.selections;return i.createElement(E.default,{ref:this._setRefList,useAllContacts:this.props.useAllContacts,getInitialItems:a,searchText:this.state.searchText,active:this.active,selections:r,maxContacts:this.props.maxItems,maxContactsExceedErrorMsg:this.props.maxItemsExceedErrorMsg,onLeaveList:this.onLeaveList,onSelectionChanged:this._handleSelectionChanged,isDisabled:this.props.isDisabled,isSelected:this.props.isSelected,customSecondaryText:this.props.customSecondaryText,filter:this.props.filter,allowBlockedContacts:this.props.allowBlockedContacts,flatListController:this.flatListController});case T.PRODUCT_SELECT_MODAL:var s=this.selections;return i.createElement(S.default,{ref:this._setRefList,flatListController:this.flatListController,active:this.active,selections:s,onSelectionChanged:this._handleSelectionChanged,onProductsLoaded:this.props.onDataLoaded});default:throw new Error("Invalid list type: ".concat(this.props.listType))}}render(){var{listType:e,useShortName:t,singleSelectionFooterType:a,multipleSelectionFooterType:r}=this.props,s=!!this.props.getInitialItems&&0!==this.props.getInitialItems().length,n=e===T.PARTICIPANT_MANAGE_MODAL?i.createElement(u.default,{selections:this.selections,useShortName:t,onDelete:this._onSelectedListDelete,isDisabled:this.props.isDisabled}):null;return i.createElement(v.default,{type:v.TowerModalType},i.createElement(c.default,{key:"chat-modal"},i.createElement(f.default,{title:this.props.title,type:f.DRAWER_HEADER_TYPE.POPUP,onCancel:this.onCancel}),i.createElement(y.default,{searchRef:this._setRefSearch,setSearchText:this._setSearchText,onDown:this.onDown,onEnter:this.handleEnter,onFocus:this._indicateSearchFocus,enabled:this.props.enableSearchBox}),this.props.customHeader,n,i.createElement(h.default,{flatListControllers:[this.flatListController],onScroll:this.onScroll},this._renderList()),i.createElement(o.default,{singleSelectionType:a,multipleSelectionType:r,selections:this.selections,onForward:this._handleForward,startActive:s})))}}t.default=M,M.displayName="SelectModal"},89243:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(44343)),o=r(a(17957)),l=r(a(81610)),d=r(a(67134));class u extends i.Component{constructor(...e){super(...e),this._onSearch=this.props.debounce((e=>{this.props.setSearchText(e)}),100)}componentWillUnmount(){this._onSearch.cancel()}render(){return this.props.enabled?i.createElement(n.default,{handlers:{down:this.props.onDown},onFocus:this.props.onFocus},i.createElement(l.default,{ref:this.props.searchRef,onSearch:this._onSearch,onEnter:this.props.onEnter,placeholder:o.default.t(1269)})):null}}u.defaultProps={enabled:!0},u.displayName="SelectModalSearchBox";var c=(0,d.default)(u);t.default=c},59694:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(45455)),n=s(a(72779)),o=a(28721),l=r(a(2784)),d=a(3594),u=s(a(79711)),c=s(a(9386)),h=s(a(52737)),f=s(a(50935)),p=a(555),m=a(95595),_=s(a(44343)),v=s(a(17957)),g=r(a(90088)),E=s(a(57441)),S=s(a(82631)),C=s(a(52100)),y=r(a(75074)),{SEND_LOGS_MAX_EMAIL_LENGTH:b,SEND_LOGS_MAX_SUBJECT_LENGTH:T,SEND_LOGS_MIN_DESC_LENGTH:M,SEND_LOGS_MAX_DESC_LENGTH:N,SEND_LOGS_MAX_SCREENSHOTS:I,SEND_LOGS_MAX_SCREENSHOT_SIZE:P}=f.default;class A extends l.Component{constructor(...e){super(...e),this.state={email:"",emailError:void 0,confirmEmail:"",confirmEmailError:void 0,subject:h.default.isSMB?v.default.t(1323):v.default.t(1324),subjectError:void 0,description:"",descriptionError:void 0,screenshots:[],isDragging:!1},this._setAttachButton=e=>{this._attachButton=e},this._setEmailAddr=e=>{this._emailAddrInput=e},this.onSend=()=>{var e={},{email:t,confirmEmail:a,subject:r,description:s,screenshots:n}=this.state,c=t.trim(),h=a.trim();if(this._validateEmail(c)||(e.emailError=v.default.t(1310)),this._validateConfirmEmail(h)||(e.confirmEmailError=v.default.t(1311)),this.validateDescription(s)||(e.descriptionError=v.default.t(1322)),this._validateSubject(r)||(e.subjectError=v.default.t(1319)),(0,i.default)(e)){this.setState({email:c,confirmEmail:h,emailError:void 0,confirmEmailError:void 0,descriptionError:void 0,subjectError:void 0}),n.map((e=>{e.url&&(URL.revokeObjectURL(e.url),delete e.url)}));var f=(0,m.getMaybeMeUser)(),p=f?(0,o.formatPhone)(f.user):null,_=r.trim()||v.default.t(1307);(0,d.uploadUserReport)(p,c,_,s,n),this.props.onSend&&this.props.onSend({subject:_,description:s,numScreenshots:n.length}),u.default.closeModal(),u.default.openToast(l.createElement(y.default,{msg:v.default.t(1318),id:(0,y.genId)()}))}else e.email=c,e.confirmEmail=h,this.setState(e)},this.onCancel=()=>{this.props.onCancel&&this.props.onCancel(),u.default.closeModal()},this.onSubjectChange=e=>{var t={subject:e,subjectError:this.state.subjectError};this.state.subjectError&&this._validateSubject(t.subject)&&(t.subjectError=void 0),this.setState(t)},this._onSubjectBlur=()=>{var e;this._validateSubject(this.state.subject)||(e=v.default.t(1319)),this.state.subjectError!==e&&this.setState({subjectError:e})},this.onDescriptionChange=e=>{var t={description:e,descriptionError:this.state.descriptionError};this.state.descriptionError&&this.validateDescription(t.description)&&(t.descriptionError=void 0),this.setState(t)},this._onDescriptionBlur=()=>{var e;!this.state.description&&!this.state.descriptionError||this.validateDescription(this.state.description)||(e=v.default.t(1322)),this.state.descriptionError!==e&&this.setState({descriptionError:e})},this._onEmailChange=e=>{var t={email:e,emailError:this.state.emailError};this.state.emailError&&this._validateEmail(t.email)&&(t.emailError=void 0),this.setState(t)},this._onEmailBlur=()=>{var e,t=this.state.email.trim(),a={};!this.state.email&&!this.state.emailError||this._validateEmail(t)||(e=v.default.t(1310)),this.state.emailError!==e&&(a.emailError=e),this.state.email!==t&&(a.email=t),(0,i.default)(a)||this.setState(a)},this._onConfirmEmailChange=e=>{var t={confirmEmail:e,confirmEmailError:this.state.confirmEmailError};this.state.confirmEmailError&&this._validateConfirmEmail(t.confirmEmail)&&(t.confirmEmailError=void 0),this.setState(t)},this._onConfirmEmailBlur=()=>{var e,t=this.state.confirmEmail.trim(),a={};!this.state.confirmEmail&&!this.state.confirmEmailError||this._validateConfirmEmail(t)||(e=v.default.t(1311)),this.state.confirmEmailError!==e&&(a.confirmEmailError=e),this.state.confirmEmail!==t&&(a.confirmEmail=t),(0,i.default)(a)||this.setState(a)},this._validateEmail=e=>g.validateEmail(e),this._validateConfirmEmail=e=>this.state.email===e,this.validateDescription=e=>e.length>M,this._validateSubject=()=>!0,this.onFilePick=e=>{e.preventDefault(),e.stopPropagation(),this._reachMaxScreenshots()||(0,p.getFiles)(e,"image/*").then((e=>{this._attachButton&&(this._attachButton.value="");var t=e.filter((e=>e.size<=P));t.length<e.length&&u.default.openToast(l.createElement(y.default,{msg:v.default.t(1313),id:(0,y.genId)()}));var a=this.state.screenshots.concat(t).slice(0,I);a.map((e=>{e.url||(e.url=URL.createObjectURL(e))})),this.setState({screenshots:a})}))},this.onDragChange=e=>{this.setState({isDragging:e})},this._handleAttachClick=()=>{this._attachButton&&!this._reachMaxScreenshots()&&this._attachButton.click()},this.stopPropagation=e=>{e.stopPropagation()}}componentDidMount(){this._emailAddrInput&&this._emailAddrInput.restoreFocus()}componentWillUnmount(){this.state.screenshots.map((({url:e})=>e&&URL.revokeObjectURL(e)))}_reachMaxScreenshots(){return this.state.screenshots.length>=I}_deleteScreenshot(e){var t=this.state.screenshots.slice(),[a]=t.splice(e,1);a.url&&URL.revokeObjectURL(a.url),this.setState({screenshots:t})}_getScreenshotsList(){var e=this.state.screenshots.map(((e,t)=>{if(!e.url)return null;var a="url(".concat(e.url,")"),r="screenshot-".concat(t);return l.createElement("div",{key:r,className:E.default.screenshotsImg,style:{backgroundImage:a}},l.createElement("button",{className:E.default.btnDelete,onClick:()=>{this._deleteScreenshot(t)}},l.createElement(S.default,{name:"x-alt"})))}));return e.length?l.createElement("div",{className:E.default.screenshotPreview},e):null}_getScreenshotAction(){if(this._reachMaxScreenshots()){var e=I;return l.createElement("div",{className:(0,n.default)(E.default.action,E.default.disabled)},v.default.t(1321,{count:e,_plural:e}))}return this.state.isDragging?l.createElement("div",{className:E.default.action},v.default.t(1316)):l.createElement("div",{className:E.default.action,onClick:this._handleAttachClick},v.default.t(1317))}render(){var e={enter:this.stopPropagation},t=l.createElement("div",{className:E.default.screenshots},this._getScreenshotsList(),this._getScreenshotAction(),l.createElement("input",{accept:"image/*",type:"file",multiple:!0,onClick:this.stopPropagation,onChange:this.onFilePick,ref:this._setAttachButton,disabled:this._reachMaxScreenshots()}));return l.createElement(c.default,{title:v.default.t(1320),okText:v.default.t(1306),onOK:this.onSend,onCancel:this.onCancel,onDrop:this.onFilePick,onDragChange:this.onDragChange},l.createElement(_.default,{handlers:e},l.createElement(C.default,{ref:this._setEmailAddr,value:this.state.email,error:this.state.emailError,maxLength:b,onChange:this._onEmailChange,onBlur:this._onEmailBlur,placeholder:v.default.t(1308)}),l.createElement(C.default,{editable:!0,value:this.state.confirmEmail,error:this.state.confirmEmailError,maxLength:b,onChange:this._onConfirmEmailChange,onBlur:this._onConfirmEmailBlur,placeholder:v.default.t(1309)}),l.createElement(C.default,{value:this.state.subject,error:this.state.subjectError,maxLength:T,onChange:this.onSubjectChange,onBlur:this._onSubjectBlur,placeholder:v.default.t(1312)}),l.createElement(C.default,{value:this.state.description,error:this.state.descriptionError,maxLength:N,onChange:this.onDescriptionChange,onBlur:this._onDescriptionBlur,placeholder:v.default.t(571),multiline:!0}),t))}}t.default=A,A.displayName="SendLogsPopup"},18470:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(79711)),l=s(a(9386)),d=s(a(52737)),u=s(a(17957)),c=s(a(20642)),h=s(a(39401)),f=s(a(12767));function p(){var e=(0,i.default)(["SMB: terms of service modal, user clicked logout"]);return p=function(){return e},e}class m extends n.Component{constructor(...e){super(...e),this.close=()=>{d.default.smbTos||o.default.closeModal()},this.logout=()=>{__LOG__(2)(p()),o.default.closeModal(),f.default.logout()}}componentDidMount(){this.props.listeners.add(d.default,"change:smbTos",this.close)}render(){var e=u.default.t(1838),t=u.default.t(968),a=this.logout;return n.createElement(l.default,{onOK:a,okText:t},e,"",n.createElement(h.default,null))}}m.displayName="TermsOfServiceModal";var _=(0,c.default)(m);t.default=_},82338:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=s(a(35387)),d=a(95585),u=r(a(17957)),c=r(a(41276));class h extends i.PureComponent{constructor(...e){super(...e),this.onOK=()=>{n.default.closeModal()},this.onCancel=()=>{var{href:e}=this.props.link;(0,l.openExternalLink)(e),n.default.closeModal()}}_renderHostname(){var{suspiciousCharacters:e,domain:t}=this.props.link,a=t.split("."),r=[];return a.forEach(((t,s)=>{var n=!1,o=t.split("").map(((t,a)=>{var r=e&&e.has(t);n=r||n;var o=r?c.default.suspiciousCharacter:void 0;return i.createElement("span",{key:"".concat(s,"-").concat(a,"-").concat(t),className:o},t)})),l=n?c.default.suspiciousHostname:void 0,d=i.createElement("span",{key:"".concat(s,"-").concat(t),className:l},o);r.push(d),s+1!==a.length&&r.push(i.createElement("span",{key:"".concat(s)},"."))})),r}render(){var{href:e,domain:t}=this.props.link,[a,r]=e.split(t);return i.createElement(o.default,{title:u.default.t(1383),okText:u.default.t(1593),cancelText:u.default.t(1385),onOK:this.onOK,onCancel:this.onCancel},i.createElement("div",{className:c.default.explanation},u.default.t(1386)+" ",i.createElement(l.default,{href:(0,d.getSuspiciousLinkFaqUrl)()},u.default.t(875))),i.createElement("div",{className:c.default.url},a,this._renderHostname(),r))}}t.default=h,h.displayName="SuspiciousLinkPopup"},74391:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=r(a(52737)),d=r(a(17957)),u=r(a(20642)),c=r(a(12767));class h extends i.Component{constructor(...e){super(...e),this.close=()=>{0===l.default.tos&&n.default.closeModal()},this.logout=()=>{n.default.closeModal(),c.default.logout()}}componentDidMount(){this.props.listeners.add(l.default,"change:tos",this.close)}render(){var e,t,a;switch(l.default.tos){default:case 1:e=d.default.t(1864),t=d.default.t(1145),a=()=>n.default.closeModal();break;case 2:e=d.default.t(1865),t=d.default.t(968),a=this.logout}return i.createElement(o.default,{onOK:a,okText:t},e)}}h.displayName="TermsOfServiceModal";var f=(0,u.default)(h);t.default=f},15549:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(64)),l=s(a(79711)),d=s(a(52737)),u=a(62436),c=a(90973),h=s(a(44343)),f=s(a(20642)),p=s(a(40210)),m=s(a(41967)),_=s(a(11680)),v=s(a(40207)),g=s(a(82631)),E=a(40263),S=s(a(2220)),C=s(a(56268)),y=s(a(12767));function b(){var e=(0,i.default)(["user notice modal, user clicked logout"]);return b=function(){return e},e}var T=()=>{};class M extends n.PureComponent{constructor(e){super(e),this._shouldShowModal=()=>null!=_.default.noticeId&&null!=_.default.blockingModal&&!0===_.default.blocking,this._handleNoticeBlockingModalChange=()=>{this._shouldShowModal()&&(this.state.blockingModalDisplayed||(new p.default.UserNotice({userNoticeId:_.default.noticeId,userNoticeContentVersion:_.default.policyVersion,userNoticeEvent:p.default.USER_NOTICE_EVENT.BLOCKING_MODAL_APPEAR}).commit(),this.setState({blockingModalDisplayed:!0})))},this.handleNoticeIdChange=()=>{this.setState({blockingModalDisplayed:!1})},this.close=()=>{_.default.blocking||l.default.closeModal()},this.logout=()=>{__LOG__(2)(b()),l.default.closeModal(),y.default.logout()},this.refresh=()=>{location.reload()},this.state={blockingModalDisplayed:!1}}componentDidMount(){this.props.listeners.add(_.default,"change:blocking",this.close),this.props.listeners.add(_.default,"change:noticeId",this.handleNoticeIdChange),this.props.listeners.add(_.default,"change:blockingModal change:blocking",this._handleNoticeBlockingModalChange),this._handleNoticeBlockingModalChange()}_getClickHandler(e){if(e){if("logout"===e.action)return this.logout;if("refresh"===e.action)return this.refresh}return T}_renderButton(e,t=!1){if(null==e)return null;var a="UserNoticeModalPopup-".concat(e.action,"Btn"),r="popup-controls-".concat(e.action);return n.createElement(o.default,{a8nText:r,type:t?"primary":"secondary",onClick:this._getClickHandler(e),key:a},e.label)}render(){var{notice:e}=this.props,{blockingModal:t}=e;if(!t||!this._shouldShowModal())return null;var a,{iconSvg:r,iconDescription:s="",title:i,body:o,primaryButton:l,secondaryButton:f}=t;r&&(a="light"===this.context.theme?r.light:r.dark);var p=n.createElement(g.default,{name:"alert-notice","aria-label":s}),_=a&&(0,u.sanitizeNoticeSVG)(a),v=_?n.createElement("span",{"aria-label":s,dangerouslySetInnerHTML:{__html:_}}):p,S=this._renderButton(f),y=this._renderButton(l,!0),b={enter:this._getClickHandler(l)},T=i?(0,u.sanitizeNoticeText)(i):null,M=o?(0,u.sanitizeNoticeText)(o):null;return n.createElement(h.default,{handlers:b},n.createElement("div",{className:d.default.isSMB?C.default.noticeSmbContainer:C.default.noticeContainer},n.createElement(m.default,{actions:[S,y],type:"flex"},n.createElement("div",{className:C.default.noticeModalContentWrapper},n.createElement(c.FlexRow,{className:C.default.noticeSvgWrapper,align:"center",justify:"center"},v),n.createElement(E.TextDiv,{theme:"popup-title",className:C.default.headerText},n.createElement("div",{dangerouslySetInnerHTML:{__html:T}})),n.createElement(E.TextDiv,{theme:"plain",className:C.default.bodyText},n.createElement("div",{dangerouslySetInnerHTML:{__html:M}}))))))}}M.CONCERNS={notice:["noticeId","blocking","blockingModal"]},M.contextType=S.default,M.displayName="UserNoticeModal";var N=(0,f.default)((0,v.default)(M,M.CONCERNS));t.default=N},91735:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(90882)),n=s(a(16760)),o=r(a(2784)),l=s(a(96066)),d=s(a(43334)),u=s(a(79711)),c=a(46478),h=s(a(15466)),f=s(a(91581)),p=a(35387),m=s(a(17957)),_=s(a(81031)),v=s(a(15118)),g=a(66615),E=s(a(82631)),S=s(a(5174)),C=s(a(55420)),y=a(84990),b=s(a(3111)),T=a(75637);class M extends o.Component{openChat(e){u.default.closeModal(),d.default.find((0,T.createUserWid)(e)).then((e=>{u.default.openChatFromUnread(e).then((t=>{t&&u.default.focusChatTextInput(e)}))}))}_sendEmail(e){var t="mailto:".concat(e);(0,p.openExternalLink)(t)}_openLocation(e){var t=(0,n.default)((0,i.default)(e),encodeURIComponent).join(", "),a="https://maps.google.com/maps/search/".concat(t,"?hl=").concat(m.default.getLocale());(0,p.openExternalLink)(a)}_getHeader(){var{parsedVcard:e}=this.props,t=(0,y.vcardWids)(e),a=o.createElement(f.default,{text:(0,y.vcardGetNameFromParsed)(e),direction:"auto",titlify:!0,ellipsify:!0,selectable:!0}),r=(0,y.vcardGetOrganizationString)(e),s=o.createElement(_.default,{thumb:this.props.thumbnail,size:c.DETAIL_IMAGE_SIZE.SMALL,wid:v.default.findThumbnailWid(t)});return o.createElement(l.default,{image:s,theme:"plain",primary:a,secondary:r})}render(){var e=this.props.parsedVcard,t=(0,i.default)(e.TEL,(e=>e.properties.waid)),a=(0,i.default)(e.TEL,(e=>!e.properties.waid)),r=(0,n.default)(t,(e=>{var t=e.properties.waid[0],a=o.createElement(S.default,{onClick:()=>this.openChat(t)},o.createElement(E.default,{name:"chat",className:C.default.icon})),r=o.createElement(g.SelectableSpan,{selectable:!0},(0,b.default)(t));return o.createElement(h.default,{title:r,icon:a,key:"vCard-".concat(String(e.index))},(0,y.vcardGetType)(e))})),s=(0,n.default)(e.EMAIL,(e=>o.createElement(h.default,{title:m.default.forceLTR(e.value),onClick:()=>this._sendEmail(e.value),key:"vCard-".concat(String(e.index))},(0,y.vcardGetType)(e)))),l=(0,n.default)(e.ADR,(e=>{var t=e.value.join(" ");return o.createElement(h.default,{title:t,onClick:()=>this._openLocation(e.value),key:"vCard-".concat(String(e.index))},(0,y.vcardGetType)(e))})),d=(0,n.default)(a,(e=>o.createElement(h.default,{title:m.default.forceLTR(e.value),key:"vCard-".concat(String(e.index))},(0,y.vcardGetType)(e)))),u=(0,n.default)(e.SERVICE,(e=>o.createElement(h.default,{title:e.value,key:"vCard-".concat(String(e.index))},(0,y.vcardGetType)(e)))),c=(0,n.default)(e.BDAY,(e=>o.createElement(h.default,{title:(0,y.vcardGetDate)(e.value),key:"vCard-".concat(String(e.index))},m.default.t(1443)))),f=(0,n.default)(e.NICKNAME,(e=>o.createElement(h.default,{title:e.value,key:"vCard-".concat(String(e.index))},m.default.t(1455)))),p=this._getHeader();return o.createElement("div",null,p,o.createElement("div",{className:C.default.content},r,s,l,d,c,f,u))}}t.default=M,M.displayName="VcardModalDetails"},44849:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(90882)),n=r(a(2784)),o=s(a(58701)),l=s(a(73023)),d=r(a(71311)),u=s(a(15466)),c=s(a(17957)),h=r(a(41967)),f=s(a(5174)),p=a(84990),m=s(a(11940)),_=s(a(3111)),v=a(75637);class g extends n.Component{constructor(...e){super(...e),this._handleIconClick=(e,t)=>{e.stopPropagation(),this.onSelect(t)}}_renderContacts(){return(0,i.default)(this.props.vcard.TEL,(e=>e.properties.waid)).map((e=>{var t=(0,v.createUserWid)(e.properties.waid[0]),a=this.props.icon;return a&&(a=n.createElement(f.default,{onClick:e=>{this._handleIconClick(e,t)}},a)),n.createElement("div",{className:m.default.container,key:"vCard-".concat(e.value)},n.createElement(u.default,{title:(0,_.default)(t),onClick:()=>this.onSelect(t),icon:a},(0,p.vcardGetType)(e)))}))}onSelect(e){this.props.onSelect(e)}render(){return n.createElement(h.default,{type:h.BoxModalType},n.createElement(o.default,null,n.createElement(d.default,{onCancel:this.props.onCancel,type:d.DRAWER_HEADER_TYPE.POPUP,title:c.default.t(493)}),n.createElement(l.default,null,this._renderContacts())))}}t.default=g,g.defaultProps={onCancel:()=>{},onSelect:()=>{}},g.displayName="VcardWidChoiceModal"},26203:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(9386)),l=a(35387),d=r(a(17957)),u=r(a(40210)),c=r(a(99911)),h=r(a(72424)),f=a(86145),p=r(a(74185));class m extends i.Component{constructor(...e){super(...e),this.onOK=()=>{var{messageText:e}=this.props,t=(0,f.firstNEncodedBytes)(e,2e3),a=5===h.default.frequentlyForwardedThreshold?"wa":"wa".concat(h.default.frequentlyForwardedThreshold),r=p.default.build("https://www.google.com/search",{ctx:a,q:t});(0,l.openExternalLink)(r),(new u.default.HfmTextSearchComplete).commit(),n.default.closeModal()},this.onClose=()=>{n.default.closeModal()}}render(){return c.default.online?i.createElement(o.default,{cancelText:d.default.t(1593),onCancel:this.onClose,okText:d.default.t(1284),onOK:this.onOK},d.default.t(1286)):i.createElement(o.default,{okText:d.default.t(1761),onOK:this.onClose},d.default.t(1285))}}t.default=m,m.displayName="WebSearchPopup"},63865:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logOrderMessageClick=function({catalogSessionId:e,catalogOwnerJid:t,orderId:a}){(0,i.createCatalogViewEvent)({isOwner:(0,i.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_ORDER_MESSAGE_CLICK,catalogSessionId:e}).commit()},t.logOrderListImpression=function({catalogSessionId:e,catalogOwnerJid:t,orderId:a,productCount:r}){(0,i.createCatalogViewEvent)({isOwner:(0,i.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_IMPRESSION,catalogSessionId:e,bizActionConfig:{orderId:a,productCount:r}}).commit()},t.logOrderListItemClick=function({catalogOwnerJid:e,catalogSessionId:t,orderId:a}){(0,i.createCatalogViewEvent)({isOwner:(0,i.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_ORDER_LIST_ITEM_CLICK,catalogSessionId:t,bizActionConfig:{orderId:a}}).commit()},t.logSendOrderMessage=function({orderId:e,catalogOwnerJid:t,catalogSessionId:a,isOrderMsgAttached:r,quantity:n}){(0,i.createCatalogViewEvent)({isOwner:(0,i.isCatalogOwner)({catalogOwnerJid:t}),catalogBizAction:s.default.CATALOG_BIZ_ACTION.ACTION_SEND_ORDER_MESSAGE,catalogViewAction:s.default.CATALOG_VIEW_ACTION.ACTION_SEND_ORDER_MESSAGE,isOrderMsgAttached:r,catalogSessionId:a,bizActionConfig:{orderId:e,quantity:n}}).commit()};var s=r(a(40210)),i=a(82431)},20174:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement(u.default,{className:(0,i.default)(o.default.closeBtn,{[o.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick},n.createElement(d.default,{"aria-label":l.default.t(1604),name:"video-x"}))};var i=s(a(72779)),n=r(a(2784)),o=s(a(92431)),l=s(a(17957)),d=s(a(82631)),u=s(a(5174))},53616:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(39910)),l=s(a(82631));class d extends n.PureComponent{render(){return n.createElement("div",{className:(0,i.default)(o.default.button,{[o.default.fullscreen]:this.props.isFullscreenMode}),onClick:this.props.onClick},n.createElement(l.default,{name:this.props.isInstagram?"logo-instagram":"logo-facebook"}))}}t.default=d,d.displayName="CtwaSourceButton"},40915:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.createElement(u.default,{className:(0,i.default)(o.default.button,{[o.default.fullscreen]:e.isFullscreenMode}),onClick:e.onClick},e.isFullscreenMode?n.createElement(d.default,{"aria-label":l.default.t(7),name:"video-exit-fullscreen"}):n.createElement(d.default,{"aria-label":l.default.t(6),name:"video-fullscreen"}))};var i=s(a(72779)),n=r(a(2784)),o=s(a(30404)),l=s(a(17957)),d=s(a(82631)),u=s(a(5174))},64857:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PIP_BUTTON_THEME=void 0;var i=s(a(2784)),n=r(a(72779)),o=r(a(74515)),l=r(a(82631)),d={PLAYER:"PLAYER",PREVIEW:"PREVIEW"};t.PIP_BUTTON_THEME=d;class u extends i.PureComponent{render(){return i.createElement("div",{className:(0,n.default)(o.default.pipBtn,{[o.default.player]:this.props.theme===d.PLAYER,[o.default.preview]:this.props.theme===d.PREVIEW}),onClick:this.props.onClick},i.createElement(l.default,{name:"video-pip"}))}}t.default=u,u.displayName="PiPButton"},57008:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s(a(2784)),n=r(a(31159));function o(e){var t=e.icon?i.createElement("div",{className:n.default.icon},e.icon):null;return i.createElement("div",{className:n.default.note},t,i.createElement("div",{className:n.default.noteBody},e.children))}o.displayName="PiPOverlay"},90975:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=s(a(12229));class l extends n.PureComponent{render(){var e=null;switch(this.props.theme){case"upper":e=n.createElement("div",{key:"upper-shade",className:(0,i.default)(o.default.fullWidthShade,o.default.stripHeightShade,o.default.upperShade)});break;case"lower":e=n.createElement("div",{key:"lower-shade",className:(0,i.default)(o.default.fullWidthShade,o.default.stripHeightShade,o.default.lowerShade)});break;case"full-rounded":e=n.createElement("div",{key:"full-rounded-shade",className:(0,i.default)(o.default.fullWidthShade,o.default.fullHeightShade,o.default.roundedCorners)});break;case"full-sharp":e=n.createElement("div",{key:"full-sharp-shade",className:(0,i.default)(o.default.fullWidthShade,o.default.fullHeightShade)})}return e}}t.default=l,l.displayName="Shade"},72292:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YOUTUBE_URL_TIME_PARAM_PATTERN=t.YOUTUBE_URL_TIME_PARAM_NAME=t.URL_PATTERNS=t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=t.PLAYER_TYPE=void 0;var r=a(28103).Mirrored(["FLOATER","OG_FLOATER","MEDIA_VIEWER"]);t.PLAYER_TYPE=r;t.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO=16/9;t.URL_PATTERNS={ONLINE_VIDEO_URL:{YOUTUBE:[/^https?:\/\/youtu\.be\/(.{11})/,/^https?:\/\/youtube\.com\/watch\?v=(.{11})/,/^https?:\/\/m\.youtube\.com\/watch\?v=(.{11})/]}};t.YOUTUBE_URL_TIME_PARAM_NAME="t";t.YOUTUBE_URL_TIME_PARAM_PATTERN=/^(\d+h)?(\d+m)?(\d+s)?(\d+)?$/},67381:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(72292),o=r(a(47025)),l=r(a(41885)),d=r(a(40207));class u extends i.Component{render(){var{msg:e,mediaData:t}=this.props,a=t.preview?"url(".concat(t.preview.url(),")"):void 0;return i.createElement(o.default,{aspectRatio:t.aspectRatio,previewUrl:a,animationStartStyle:this.props.animationStartStyle},i.createElement(l.default,{msg:e,mediaData:t,startTime:this.props.startTime,onClose:this.props.onClose,onError:this.props.onError,onOpenMediaViewer:this.props.onOpenMediaViewer,onMissingMedia:this.props.onMissingMedia,onUnsupportedMedia:this.props.onUnsupportedMedia,autoPlay:this.props.autoPlay,type:n.PLAYER_TYPE.FLOATER}))}}u.CONCERNS={mediaData:["preview","aspectRatio"]},u.displayName="FloatingMsgVideoPlayer";var c=(0,d.default)(u,u.CONCERNS);t.default=c},75651:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(47025)),o=r(a(1236)),l=r(a(30850));class d extends i.Component{constructor(e){super(e),this._handleAspectRatio=e=>{((null==this.state.aspectRatio||0===this.state.aspectRatio)&&e||null!=this.state.aspectRatio&&0!==this.state.aspectRatio&&e&&Math.abs(e-this.state.aspectRatio)>.01)&&this.setState({aspectRatio:e})};var t=(0,o.default)(this.props.ogVideoInfo.previewUrl),a=t.width&&t.height?t.width/t.height:void 0;this.state={aspectRatio:a}}render(){return i.createElement(n.default,{aspectRatio:this.state.aspectRatio,previewUrl:this.props.ogVideoInfo.previewUrl,animationStartStyle:this.props.animationStartStyle},i.createElement(l.default,{ogVideoInfo:this.props.ogVideoInfo,startTime:this.props.startTime,onClose:this.props.onClose,onError:this.props.onError,onAspectRatio:this._handleAspectRatio,autoPlay:!0}))}}t.default=d,d.displayName="FloatingOgVideoPlayer"},47025:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_ASPECT_RATIO=t.MIN_ASPECT_RATIO=t.MIN_WIDTH=t.MIN_HEIGHT=t.LONGER_SIDE_DEFAULT_LENGTH=t.MARGIN_Y=t.MARGIN_X=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(12904)),l=(r(a(8603)),r(a(85472)));t.MARGIN_X=10;t.MARGIN_Y=10;var d=330;t.LONGER_SIDE_DEFAULT_LENGTH=d;t.MIN_HEIGHT=145;var u=145;t.MIN_WIDTH=u;var c=.4393939393939394;t.MIN_ASPECT_RATIO=c;var h=2.2758620689655173;t.MAX_ASPECT_RATIO=h;class f extends i.Component{constructor(e){super(e),this.state=f.getInitialMediaStyle(e.aspectRatio,e.initialPiPStyle)}static getDerivedStateFromProps(e){return f.getInitialMediaStyle(e.aspectRatio,e.initialPiPStyle)}static getInitialMediaStyle(e,t){var a,r,s,i=function(e){var t=1;null!=e&&(t=e<c?c:e>h?h:e);return t}(e);return t?{initialPiPStyle:t,aspectRatio:i}:(n.default.getConversationHeaderOffset((e=>{a=e})),i>1?s=(r=d)/i:r=(s=d)*i,a||(a={right:window.innerWidth,bottom:0}),{initialPiPStyle:{width:r,left:a.right<window.innerWidth?a.right-r-10:window.innerWidth-r-10,bottom:window.innerHeight-10-s-a.bottom},aspectRatio:i})}render(){var e=this.state.aspectRatio;if(!e)return null;var t,a=145*e,r=u<a?a:u;if(null!=this.props.aspectRatio&&0!==this.props.aspectRatio&&e===c&&e>this.props.aspectRatio||null!=this.props.aspectRatio&&0!==this.props.aspectRatio&&e===h&&e<this.props.aspectRatio){var s;if(this.props.previewUrl){var n={backgroundImage:this.props.previewUrl};s=i.createElement("div",{className:o.default.bgImg,style:n})}t=i.createElement("div",{className:o.default.bottomLayer},s)}return i.createElement(l.default,{aspectRatio:e,margin:{x:10,y:10},minWidth:r,className:o.default.videoFloater,initialStyle:this.state.initialPiPStyle,animationStartStyle:this.props.animationStartStyle,escapeConversationHeader:!0},t,this.props.children)}}t.default=f,f.displayName="FloatingVideoPlayer"},1236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.createElement("img");return t.src=e,{width:t.naturalWidth,height:t.naturalHeight}}},12023:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.isParsableOnlineVideoURL=function(e,t,a){if(!o.default.supportsFeature(o.default.F.VIDEO_PLAYBACK_URL))return!1;if(a)return!1;if(e===n.ExtendedTextMessagePreviewType.VIDEO&&t){var r=l.default.withoutWww(l.default.hostname(t));if(r===i.default.HOSTNAME.INSTAGRAM||r===i.default.HOSTNAME.STREAMABLE||r===i.default.HOSTNAME.FACEBOOK||r===i.default.HOSTNAME.FBWATCH||r===i.default.HOSTNAME.FBWATCH_ALT||r===i.default.HOSTNAME.LASSOVIDEOS||r===i.default.HOSTNAME.LASSO_SHORTENED||r===i.default.HOSTNAME.SHARECHAT)return!0}if(t)for(var d in s.URL_PATTERNS.ONLINE_VIDEO_URL)for(var u=s.URL_PATTERNS.ONLINE_VIDEO_URL[d],c=0;c<u.length;c++)if(u[c].test(l.default.withoutWww(t)))return!0;return!1};var s=a(72292),i=r(a(50935)),n=a(28703),o=r(a(18120)),l=r(a(74185))},41885:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(69345)),l=r(a(32125)),d=a(96645),u=r(a(10853)),c=r(a(84443)),h=r(a(24406)),f=r(a(40207)),p=a(64658);t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class m extends i.Component{constructor(...e){super(...e),this._setRefVideoPlayer=e=>{this._refVideoPlayer=e},this._handleOpenMediaViewer=()=>{this.props.onOpenMediaViewer&&this.props.onOpenMediaViewer(),n.default.mediaViewerModal({msg:(0,p.unproxy)(this.props.msg),currentTime:this.getCurrentTimeFromVideo()})},this._handleOpenVideoFloater=()=>{this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater(),c.default.openPiP((0,p.unproxy)(this.props.msg),this.getCurrentTimeFromVideo(),null)},this._handleMissingMedia=()=>{this.props.onMissingMedia&&this.props.onMissingMedia(),n.default.openModal(i.createElement(o.default,{msg:this.props.msg})),this.props.onClose()},this._handleUnsupportedMedia=()=>{this.props.onUnsupportedMedia&&this.props.onUnsupportedMedia(),n.default.openModal(i.createElement(u.default,{msg:this.props.msg})),this.props.onClose()},this._handleNeedPokeMedia=()=>{this.props.onNeedPokeMedia&&this.props.onNeedPokeMedia(),n.default.openModal(i.createElement(l.default,{msg:this.props.msg})),this.props.onClose()},this.handleLoadedMetadata=e=>{this.props.onLoadedMetadata&&this.props.onLoadedMetadata(e)}}getContainerElement(){var e;return null===(e=this._refVideoPlayer)||void 0===e?void 0:e.getContainerElement()}componentDidUpdate(){switch(this.props.mediaData.mediaStage){case d.MEDIA_DATA_STAGE.ERROR_MISSING:this._handleMissingMedia();break;case d.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED:this._handleUnsupportedMedia();break;case d.MEDIA_DATA_STAGE.NEED_POKE:this._handleNeedPokeMedia()}}getCurrentTimeFromVideo(){return this._refVideoPlayer?this._refVideoPlayer.getCurrentTimeFromVideo():0}render(){var e={msg:this.props.msg,mediaData:this.props.mediaData};return i.createElement(h.default,{ref:this._setRefVideoPlayer,type:this.props.type,msgVideoInfo:e,startTime:this.props.startTime,onClose:this.props.onClose,onVideoEnded:this.props.onVideoEnded,onError:this.props.onError,onOpenMediaViewer:this._handleOpenMediaViewer,onOpenVideoFloater:this._handleOpenVideoFloater,onMissingMedia:this._handleMissingMedia,onUnsupportedMedia:this._handleUnsupportedMedia,onLoadedMetadata:this.handleLoadedMetadata,onFullscreenToggle:this.props.onFullscreenToggle,autoPlay:this.props.autoPlay,overlays:this.props.overlays,noPip:this.props.noPip})}}m.CONCERNS={msg:["id"],mediaData:["mediaStage","preview","streamable"]},m.displayName="MsgVideoPlayer";var _=(0,f.default)(m,m.CONCERNS);t.default=class extends _{getContainerElement(){return this.getComponent.getContainerElement()}}},31461:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(50935)),o=a(95595),l=r(a(40207)),d=r(a(81470));class u extends i.PureComponent{constructor(...e){super(...e),this.mediaBlobWasDownloadedBeforeMount=Boolean(this.props.mediaData.mediaBlob),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){var t=(0,o.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onLoadedMetadata=(e,t)=>{var a=this.props.mediaData.aspectRatio,r=0!==e.videoWidth&&0!==e.videoHeight?e.videoWidth/e.videoHeight:void 0;(!a&&null!=r&&0!==r||a&&null!=r&&0!==r&&Math.abs(r-a)>.01)&&this.props.mediaData.set({aspectRatio:r}),this.props.onLoadedMetadata(e,t)},this.play=()=>{var e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{var e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)}}render(){var e,t=this.props,{mediaData:a}=t,r=a.mediaBlob,s=a.streamable&&a.isStreamable();return e=!this.mediaBlobWasDownloadedBeforeMount&&s||!r?a.streamable&&a.isStreamable()?"".concat(n.default.VIDEO_STREAM_URL,"?key=").concat(this.props.msg.id.toString()):void 0:r.url(),i.createElement(d.default,{ref:this.setRefVideo,url:e,startTime:this.props.startTime,poster:this.props.poster,className:this.props.className,onVolumeChange:this.props.onVolumeChange,onEnded:this.props.onEnded,onError:this.props.onError,onPause:this.props.onPause,onPlaying:this.props.onPlaying,onProgress:this.props.onProgress,onTimeUpdate:this.props.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay},t.children)}}u.CONCERNS={msg:["id"],mediaData:["mediaBlob","streamable","aspectRatio"]},u.displayName="MsgVideoTag";var c=(0,l.default)(u,u.CONCERNS);t.default=class extends c{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},30850:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=a(72292),o=r(a(24406));class l extends i.PureComponent{render(){return i.createElement(o.default,{type:n.PLAYER_TYPE.OG_FLOATER,ogVideoInfo:this.props.ogVideoInfo,startTime:this.props.startTime,onClose:this.props.onClose,onVideoEnded:this.props.onVideoEnded,onError:this.props.onError,onAspectRatio:this.props.onAspectRatio,autoPlay:this.props.autoPlay})}}t.default=l,l.displayName="OgVideoPlayer"},84443:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(28267));class i extends s.default{constructor(){super(),this.openPiP=(e,t,a)=>{this.manager&&this.manager.openPiP(e,t,a)},this.closePiP=()=>{this.manager&&this.manager.closePiP()},this._pausePiP=()=>{this.manager&&this.manager.pausePiP()},this.openYoutubePiP=(e,t,a,r)=>{this.manager&&this.manager.openYoutubePiP(e,t,a,r)},this.closeYoutubePiP=()=>{this.manager&&this.manager.closeYoutubePiP()},this.openOgVideoPiP=(e,t,a,r,s)=>{this.manager&&this.manager.openOgVideoPiP(e,t,a,r,s)},this.closeOgVideoPiP=()=>{this.manager&&this.manager.closeOgVideoPiP()},this.isOpened=e=>!!this.manager&&this.manager.isOpened(e)}register(e){this.manager=e}unregister(){this.manager=null}didOpen(e){this.trigger("".concat(e.id.toString(),"_pip_did_open"))}didClose(e){this.trigger("".concat(e.id.toString(),"_pip_did_close"))}didError(e){this.trigger("".concat(e.id.toString(),"_pip_did_error"))}}var n=new i;t.default=n},67802:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PiPManager=void 0;var i=s(a(2784)),n=r(a(79711)),o=a(72292),l=r(a(67381)),d=r(a(75651)),u=r(a(47025)),c=r(a(17957)),h=r(a(20642)),f=r(a(40210)),p=r(a(58885)),m=r(a(84443)),_=r(a(93285)),v=s(a(75074)),g=r(a(74824)),E=r(a(6974));class S extends i.Component{constructor(e){super(e),this._onMediaViewerModal=e=>{var{msg:t}=e;this.state.msg&&this.state.msg.id.equals(t.id)&&this.closePiP()},this._closePiPFromMsg=e=>{this.state.msg&&this.state.msg.id.equals(e.id)?this.closePiP():this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id)?this.closeYoutubePiP():this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id)&&this.closeOgVideoPiP()},this.openPiP=(e,t,a)=>{this._previousPiPDidClose(),m.default.didOpen(e),e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:f.default.WEBC_RMR_REASON_CODE.PIP,isUserInitiated:!0}),this.setState({msg:e,youtubeVideoInfo:null,ogVideoInfo:null,startTime:t,zoomRect:a})},this.closePiP=()=>{this.state.msg&&m.default.didClose(this.state.msg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.pausePiP=()=>{},this.isOpened=e=>!(!this.state.msg||!e.id.equals(this.state.msg.id))||(!(!this.state.youtubeVideoInfo||!e.id.equals(this.state.youtubeVideoInfo.videoMsg.id))||!(!this.state.ogVideoInfo||!e.id.equals(this.state.ogVideoInfo.videoMsg.id))),this.openYoutubePiP=(e,t,a,r)=>{this._previousPiPDidClose(),m.default.didOpen(t),this.setState({msg:null,youtubeVideoInfo:{videoId:e,videoMsg:t},ogVideoInfo:null,startTime:a,zoomRect:r})},this.closeYoutubePiP=()=>{this.state.youtubeVideoInfo&&m.default.didClose(this.state.youtubeVideoInfo.videoMsg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this.openOgVideoPiP=(e,t,a,r,s)=>{this._previousPiPDidClose(),m.default.didOpen(a);var i="data:image/jpeg;base64,".concat(t);this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:{videoUrl:e,previewUrl:i,videoMsg:a},startTime:r,zoomRect:s})},this.closeOgVideoPiP=()=>{this.state.ogVideoInfo&&m.default.didClose(this.state.ogVideoInfo.videoMsg),this.setState({msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null})},this._previousPiPDidClose=()=>{this.state.msg&&m.default.didClose(this.state.msg),this.state.youtubeVideoInfo&&m.default.didClose(this.state.youtubeVideoInfo.videoMsg),this.state.ogVideoInfo&&m.default.didClose(this.state.ogVideoInfo.videoMsg)},this.handleMsgVideoPiPError=()=>{this.state.msg&&m.default.didError(this.state.msg)},this._handleOgVideoPiPError=()=>{this.state.ogVideoInfo&&m.default.didError(this.state.ogVideoInfo.videoMsg)},this.state={msg:null,youtubeVideoInfo:null,ogVideoInfo:null,startTime:null,zoomRect:null}}componentDidMount(){m.default.register(this),this.props.listeners.add(n.default,"media_viewer_modal",this._onMediaViewerModal),this.props.listeners.add(p.default,"remove",(e=>{this._closePiPFromMsg(e)})),this.props.listeners.add(p.default,"change:asRevoked",(e=>{if(e.asRevoked){if(!e.isSentByMe){var t=this.state.msg&&this.state.msg.id.equals(e.id),a=this.state.youtubeVideoInfo&&this.state.youtubeVideoInfo.videoMsg.id.equals(e.id),r=this.state.ogVideoInfo&&this.state.ogVideoInfo.videoMsg.id.equals(e.id);(a||t||r)&&n.default.openToast(i.createElement(v.default,{id:(0,v.genId)(),msg:c.default.t(1180)}))}this._closePiPFromMsg(e)}}))}componentWillUnmount(){m.default.unregister()}_renderVideoPlayer(){var{msg:e,youtubeVideoInfo:t,ogVideoInfo:a}=this.state;return e?i.createElement(l.default,{key:e.id.toString(),msg:e,mediaData:e.mediaData,animationStartStyle:this._getAnimationStartStyle(),startTime:this.state.startTime,onClose:this.closePiP,onError:this._handleOgVideoPiPError,onOpenMediaViewer:this.closePiP,onMissingMedia:this.closePiP,onUnsupportedMedia:this.closePiP,autoPlay:!0}):t?i.createElement(u.default,{key:t.videoId,aspectRatio:o.YOUTUBE_VIDEO_DEFAULT_ASPECT_RATIO,animationStartStyle:this._getAnimationStartStyle()},i.createElement(E.default,{key:t.videoId,youtubeVideoId:t.videoId,startTime:this.state.startTime,onClose:this.closeYoutubePiP,autoPlay:!0})):a?i.createElement(d.default,{key:a.videoMsg.id.toString(),ogVideoInfo:a,startTime:this.state.startTime,onClose:this.closeOgVideoPiP,onError:this._handleOgVideoPiPError,animationStartStyle:this._getAnimationStartStyle(),autoPlay:!0}):null}_getAnimationStartStyle(){return this.state.zoomRect?{height:this.state.zoomRect.bottom-this.state.zoomRect.top,width:this.state.zoomRect.right-this.state.zoomRect.left,left:this.state.zoomRect.left,bottom:window.innerHeight-this.state.zoomRect.bottom}:null}render(){return i.createElement(g.default,{transitionName:"pip",className:_.default.playerWrapper,component:"div"},this._renderVideoPlayer())}}t.PiPManager=S,S.displayName="PiPManager";var C=(0,h.default)(S);t.default=C},24406:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=void 0;var i=s(a(70417)),n=s(a(54073)),o=s(a(72779)),l=r(a(2784)),d=s(a(20174)),u=a(72292),c=s(a(35387)),h=s(a(6016)),f=s(a(40915)),p=s(a(17957)),m=s(a(20642)),_=s(a(13934)),v=r(a(68084)),g=a(96645),E=s(a(31461)),S=r(a(64857)),C=s(a(57008)),y=s(a(90975)),b=s(a(41118)),T=s(a(82631)),M=s(a(77626)),N=s(a(81470)),I=s(a(74824)),P=s(a(1649));t.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT=3e3;class A extends l.Component{constructor(e){super(e),this._resetMouseMoveRecently=(0,n.default)((()=>{this.setState({mouseMoveRecently:!1})}),3e3),this.buffered=[],this.setRefVideo=e=>{this.refVideo=e},this.setRefContainer=e=>{this.refContainer=e,this.refContainer},this.handleLoadedMetadata=(e,t)=>{var a=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:a,volume:e.volume,muted:e.muted,bufferedTime:0}}),this.props.onAspectRatio&&e.videoWidth&&e.videoHeight&&this.props.onAspectRatio(e.videoWidth/e.videoHeight),this.props.onLoadedMetadata&&this.props.onLoadedMetadata(t)},this.handleTimeUpdate=e=>{var t=null,a=this.state.videoMetadata;if(a){var r=this._getRelevantBufferedTime(this.buffered,e);t=(0,i.default)((0,i.default)({},a),{},{currentTime:e,bufferedTime:r})}this.setState({videoMetadata:t})},this._handleVolumeChange=e=>{var t=null;this.state.videoMetadata&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this._handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded(),this.setState({isVideoPlaying:!1})},this._handleError=e=>{20!==e?(this.setState({isVideoError:!0}),this.props.onError&&this.props.onError()):this.setState({isVideoPlaying:!1})},this.handlePause=()=>{this.setState({isVideoPlaying:!1})},this._handlePlaying=()=>{this.setState({isVideoPlaying:!0})},this.handleProgress=e=>{this.buffered=e;var t=this.state.videoMetadata;if(t){var a=t.currentTime,r=this._getRelevantBufferedTime(e,a),s=(0,i.default)((0,i.default)({},t),{},{bufferedTime:r});this.setState({videoMetadata:s})}},this.handleEnterFullscreen=e=>{e.stopPropagation(),h.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),h.default.exitFullscreen()},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.state={videoMetadata:null,isVideoPlaying:!1,isVideoError:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:h.default.isFullscreenMode}}getContainerElement(){return this.refContainer}componentDidMount(){this.props.listeners.add(h.default,"fullscreen_change",(()=>{h.default.isFullscreenMode&&h.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)})):h.default.isFullscreenMode||this.setState({isFullscreenMode:!1},(()=>{var e,t;null===(e=(t=this.props).onFullscreenToggle)||void 0===e||e.call(t,this.state.isFullscreenMode)}))}))}componentWillUnmount(){this._resetMouseMoveRecently.cancel()}getCurrentTimeFromVideo(){return this.refVideo?this.refVideo.getCurrentTime():0}getVolumeFromVideo(){return this.refVideo?this.refVideo.getVolume():0}getMutedFromVideo(){return!!this.refVideo&&this.refVideo.getMuted()}_getRelevantBufferedTime(e,t){for(var a=0,r=0;r<e.length;r++)if(t>=e[r][0]&&t<e[r][1]){a=e[r][1];break}return a}_renderMedia(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:return this._renderMsgMedia();case u.PLAYER_TYPE.OG_FLOATER:return this._renderOgMedia()}return null}_renderOgMedia(){var e=this.props.ogVideoInfo;if(!e)return null;var t={backgroundImage:"url(".concat(e.previewUrl,")")};return l.createElement(l.Fragment,null,this.state.isFullscreenMode?null:l.createElement("div",{className:b.default.preview,style:t}),""!==e.videoUrl?l.createElement(N.default,{ref:this.setRefVideo,key:"floating-media",url:e.videoUrl,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay},p.default.t(1465)):null)}_renderMsgMedia(){var e=this.props.msgVideoInfo;if(!e)return null;var{preview:t}=e.mediaData;if(this._isMediaRenderable()){var a=t?{backgroundImage:"url(".concat(t.url(),")")}:void 0;return l.createElement(l.Fragment,null,this.state.isFullscreenMode||this.props.type!==u.PLAYER_TYPE.FLOATER?null:l.createElement("div",{className:b.default.preview,style:a}),l.createElement(E.default,{ref:this.setRefVideo,key:"floating-media",msg:e.msg,mediaData:e.mediaData,className:b.default.videoTag,startTime:this.props.startTime,onEnded:this._handleEnded,onError:this._handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this._handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this._handleVolumeChange,autoPlay:this.props.autoPlay},p.default.t(1465)))}return t?l.createElement("img",{key:"floating-media",alt:p.default.t(1812),src:t.url(),draggable:"false"}):null}_isMediaRenderable(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:var e=this.props.msgVideoInfo;if(!e)return!1;var t=e.mediaData;return t.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED||t.streamable&&t.isStreamable();case u.PLAYER_TYPE.OG_FLOATER:return!0}return!0}_renderMediaStage(){switch(this.props.type){case u.PLAYER_TYPE.FLOATER:case u.PLAYER_TYPE.MEDIA_VIEWER:var e=this.props.msgVideoInfo;return e?l.createElement("div",{className:b.default.mediaStageWrapper},l.createElement(_.default,{msg:e.msg,mediaData:e.mediaData})):null;case u.PLAYER_TYPE.OG_FLOATER:var t=this.props.ogVideoInfo;return t&&""===t.videoUrl?l.createElement("div",{className:b.default.mediaStageWrapper},l.createElement(v.Pending,null)):null}return null}_renderVideoControls(){var e,t;if(!this._isMediaRenderable())return null;var a=this.state.videoMetadata;return a?l.createElement(P.default,{refVideo:this.refVideo,videoMetadata:a,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,ctwaSourceUrl:null===(e=this.props.ogVideoInfo)||void 0===e||null===(t=e.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl}):null}renderErrorMessage(){return l.createElement(C.default,null,p.default.t(1177),this._renderErrorMessageLink())}_renderErrorMessageLink(){var e,t;if(this.props.type!==u.PLAYER_TYPE.OG_FLOATER)return null;if(!this.props.ogVideoInfo)return null;var a=null!==(e=null===(t=this.props.ogVideoInfo.videoMsg.ctwaContext)||void 0===t?void 0:t.sourceUrl)&&void 0!==e?e:this.props.ogVideoInfo.videoMsg.matchedText;return l.createElement(c.default,{className:b.default.errorLink,href:a},l.createElement("span",null,p.default.t(1178)),l.createElement(T.default,{directional:!0,display:"inline",name:"chevron-right-text",className:b.default.errorLinkChevron}))}render(){var e,t,a,r=this._isMediaRenderable();r&&(t=l.createElement(f.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick}));var s,i=l.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}});switch(this.props.type){case u.PLAYER_TYPE.OG_FLOATER:case u.PLAYER_TYPE.FLOATER:e=l.createElement(l.Fragment,null,M.default.isSafari?null:t,i);break;case u.PLAYER_TYPE.MEDIA_VIEWER:var n;n=this.state.isFullscreenMode?i:!this.props.noPip&&r?l.createElement(S.default,{onClick:e=>{e.stopPropagation(),this.props.onClose&&this.props.onClose(),this.props.onOpenVideoFloater&&this.props.onOpenVideoFloater()},theme:S.PIP_BUTTON_THEME.PLAYER}):null,e=l.createElement(l.Fragment,null,t,n),a=e=>{e.stopPropagation(),this.refVideo&&(this.state.isVideoPlaying?this.refVideo.pause():this.refVideo.play())}}s=this.state.isFullscreenMode?l.createElement(l.Fragment,null,l.createElement(y.default,{theme:"upper"}),l.createElement(y.default,{theme:"lower"})):this.props.type===u.PLAYER_TYPE.MEDIA_VIEWER?l.createElement(y.default,{theme:"full-sharp"}):l.createElement(y.default,{theme:"full-rounded"});var c=this.state.isVideoError?this.renderErrorMessage():null;return l.createElement("div",{ref:this.setRefContainer,key:"elementsWrapped",className:(0,o.default)(b.default.container,{[b.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this._resetMouseMoveRecently()},onClick:a},l.createElement("div",{className:b.default.videoFloaterMedia},this._renderMedia()),this._renderMediaStage(),c,this.props.overlays,l.createElement(I.default,{transitionName:"fade-fast"},this.state.isMouseOver&&this.state.mouseMoveRecently?l.createElement(l.Fragment,null,s,this._renderVideoControls(),e):null))}}A.displayName="SharedVideoPlayer";var O=(0,m.default)(A);t.default=class extends O{constructor(...e){super(...e),this.getCurrentTimeFromVideo=()=>this.getComponent().getCurrentTimeFromVideo(),this.getContainerElement=()=>this.getComponent().getContainerElement()}}},81470:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(13888)),n=s(a(54073)),o=r(a(2784)),l=s(a(54374)),d=s(a(79711)),u=a(95595),c=s(a(20642)),h=(0,n.default)(((e,t)=>{(0,u.setVideoVolumeSettings)(e,t)}),500);class f extends o.PureComponent{constructor(...e){super(...e),this.videoRef=null,this.setRefVideo=e=>{if(this.videoRef!==e&&(this.videoRef=e,e)){var t=(0,u.getVideoVolumeSettings)();t&&("number"==typeof t.volume&&e.setVolume(t.volume),"boolean"==typeof t.muted&&e.setMuted(t.muted))}},this.onVolumeChange=()=>{var e=this.videoRef;if(e){var t=e.getVolume(),a=e.getMuted();h(t,a),this.props.onVolumeChange({volume:t,muted:a})}},this.onOtherPlaying=e=>{e!==this&&this.videoRef&&this.videoRef.pause()},this.onPlaying=()=>{d.default.mediaPlaying(this),this.props.onPlaying()},this.setStartTime=()=>{this.videoRef&&"number"==typeof this.props.startTime&&this.videoRef.setCurrentTime(this.props.startTime)},this.play=()=>{var e=this.videoRef;e&&e.getPaused()&&e.play()},this.pause=()=>{var e=this.videoRef;e&&(e.getPaused()||e.pause())},this.getPaused=()=>!this.videoRef||this.videoRef.getPaused(),this.onLoadedMetadata=e=>{null!=this.props.startTime&&this.setStartTime();var t=(0,i.default)(e.target,["duration","volume","muted","videoWidth","videoHeight"]);this.props.onLoadedMetadata(t,e)},this.getCurrentTime=()=>this.videoRef?this.videoRef.getCurrentTime():0,this.setCurrentTime=e=>{this.videoRef&&this.videoRef.setCurrentTime(e)},this.getDuration=()=>this.videoRef?this.videoRef.getDuration():0,this.getVolume=()=>this.videoRef?this.videoRef.getVolume():0,this.setVolume=e=>{this.videoRef&&this.videoRef.setVolume(e)},this.getMuted=()=>!!this.videoRef&&this.videoRef.getMuted(),this.setMuted=e=>{this.videoRef&&this.videoRef.setMuted(e)},this.onProgress=()=>{if(this.videoRef){var e=this.videoRef.getBuffered(),t=[];if(e)for(var a=0;a<e.length;a++)t.push([e.start(a),e.end(a)]);this.props.onProgress(t)}},this.onTimeUpdate=e=>{var t=e.target.currentTime;this.props.onTimeUpdate(t)},this.onError=e=>{var t=this.videoRef&&this.videoRef.refVideo&&this.videoRef.refVideo.error?this.videoRef.refVideo.error.code:null;null!=t||null==e.code?this.props.onError(t):this.props.onError(e.code)}}componentDidMount(){this.props.listeners.add(d.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(d.default,"pttRecording",this.pause)}componentWillUnmount(){h.flush()}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){return o.createElement(l.default,{ref:this.setRefVideo,src:this.props.url,poster:this.props.poster,className:this.props.className,onVolumeChange:this.onVolumeChange,onEnded:this.props.onEnded,onError:this.onError,onPause:this.props.onPause,onPlaying:this.onPlaying,onProgress:this.onProgress,onTimeUpdate:this.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,autoPlay:this.props.autoPlay},this.props.children)}}f.displayName="UrlVideoTag";var p=(0,c.default)(f);t.default=class extends p{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},88030:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THUMB_RADIUS_FULLSCREEN=t.THUMB_RADIUS_WINDOW=void 0;var i=s(a(21842)),n=s(a(72779)),o=r(a(2784)),l=s(a(19899)),d=s(a(50935)),u=s(a(53616)),c=a(35387),h=s(a(17957)),f=s(a(22948)),p=s(a(77626)),m=s(a(74185)),_=s(a(58226)),v=parseFloat(_.default["-thumb-radius-window"].replace(/px$/,""));t.THUMB_RADIUS_WINDOW=v;var g=parseFloat(_.default["-thumb-radius-fullscreen"].replace(/px$/,""));t.THUMB_RADIUS_FULLSCREEN=g;class E extends o.PureComponent{constructor(e){super(e),this.handlePause=()=>{this.props.onPause()},this._handlePlay=()=>{this.props.onPlay()},this._isVideoPlayingBeforeDrag=null,this._handleProgressChange=e=>{var t=parseFloat(e.target.value);this.props.onProgressChange(t);var a=Math.abs(this.state.bufferedTime-this.props.duration)<.1?this.state.bufferedTime:0;this.setState({progress:t,bufferedTime:a})},this._handleProgressMouseUp=()=>{this.setState({isDraggingProgress:!1}),null!=this._isVideoPlayingBeforeDrag&&(this._isVideoPlayingBeforeDrag&&this._handlePlay(),this._isVideoPlayingBeforeDrag=null)},this._handleProgressMouseDown=()=>{this.setState({isDraggingProgress:!0}),this._isVideoPlayingBeforeDrag=this.props.isVideoPlaying,this._isVideoPlayingBeforeDrag&&this.handlePause()},this._handleVolumeValueChange=e=>{var t=parseFloat(e.target.value);this.props.onVolumeValueChange(t),this.setState({volume:t})},this._handleMute=()=>{this.props.onMutedValueChange(!0),this.setState({muted:!0})},this._handleUnmute=()=>{this.props.onMutedValueChange(!1),this.setState({muted:!1})},this._stopEventPropagation=e=>{e.stopPropagation()},this._renderTooltip=()=>{var e=this.state.mouseOverProgressRatio;if(void 0===e)return o.createElement("div",{className:_.default.tooltipWrapper});var t=l.default.durationStr(e*this.props.duration);return o.createElement("div",{className:_.default.tooltipWrapper,style:{left:100*e+"%"}},o.createElement("div",{className:(0,n.default)(_.default.tooltipTextBoxGeneral,_.default.tooltipTextBoxPosAndSize)},t),o.createElement("div",{className:(0,n.default)(_.default.tooltipTailGeneral,_.default.tooltipTailPosAndSize)}))},this._renderVolume=()=>{var e;e=this.state.muted||0===this.state.volume?o.createElement(f.default,{"aria-label":h.default.t(11),name:"video-volume-muted",display:"inline",onClick:()=>{this._handleUnmute(),0===this.props.volume&&this.props.onVolumeValueChange(.25)}}):this.state.volume<.5?o.createElement(f.default,{"aria-label":h.default.t(8),name:"video-volume-1",display:"inline",onClick:this._handleMute}):this.state.volume>=.5&&this.state.volume<1?o.createElement(f.default,{"aria-label":h.default.t(8),name:"video-volume-2",display:"inline",onClick:this._handleMute}):o.createElement(f.default,{"aria-label":h.default.t(8),name:"video-volume",display:"inline",onClick:this._handleMute});var t={width:100*this.state.volume+"%"},a=this.state.isMouseOverVolumeControl&&!this.state.muted,r=a?o.createElement("div",{className:_.default.volumeBarContainer},o.createElement("div",{className:(0,n.default)(_.default.volumeLowerTrack,{[_.default.lowerTrackLongest]:1===this.state.volume,[_.default.firefoxFix]:p.default.isGecko}),style:t}),o.createElement("input",{className:_.default.volumeBar,dir:"ltr",onChange:this._handleVolumeValueChange,type:"range",min:"0",max:1,step:"any",value:this.state.volume})):o.createElement("div",{className:_.default.volumeBarContainer});return o.createElement("div",{className:(0,n.default)(_.default.volumeContainer,{[_.default.volumePadding]:a}),onClick:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverVolumeControl:!0})},onMouseLeave:()=>{this.setState({isMouseOverVolumeControl:!1}),0!==this.props.volume||this.state.muted||this._handleMute()},onMouseDown:this._stopEventPropagation},e,r)},this._renderProgress=()=>{var e=this.state.progress/this.props.duration;e>1&&(e=1);var t=100*e+"%",a=this.state.bufferedTime/this.props.duration;a>1&&(a=1);var r=100*a+"%";return o.createElement("div",{className:(0,n.default)(_.default.progressBarContainer),onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseEnter:()=>{this.setState({isMouseOverProgressBar:!0})},onMouseLeave:()=>{this.setState({isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0})},onMouseMove:e=>{var t=this.props.isFullscreenMode?g:v,a=e.currentTarget.getBoundingClientRect().left,r=e.pageX,s=e.currentTarget.offsetWidth-2*t,i=(r-a-t)/s,n=s*(this.state.progress/this.props.duration),o=Math.abs(r-a-t-n)<=t;i<0?i=o?0:void 0:i>1&&(i=o?1:void 0),this.setState({mouseOverProgressRatio:i})}},o.createElement("input",{"data-testid":"progress",className:_.default.hiddenProgressBar,dir:"ltr",onChange:this._handleProgressChange,onMouseDown:this._handleProgressMouseDown,onMouseUp:this._handleProgressMouseUp,type:"range",min:"0",max:(0,i.default)(this.props.duration,2),step:"any",value:this.state.progress}),o.createElement("div",{className:_.default.displayedProgressBar},o.createElement("div",{className:_.default.displayedTrack}),o.createElement("div",{className:(0,n.default)(_.default.displayedBuffer,{[_.default.lowerTrackLongest]:1===a}),style:{width:r}}),o.createElement("div",{className:(0,n.default)(_.default.displayedProgress,{[_.default.lowerTrackLongest]:1===e}),style:{width:t}}),o.createElement("div",{className:(0,n.default)(_.default.thumb,{[_.default.hideThumb]:!this.state.isMouseOverProgressBar}),style:{left:t}}),this._renderTooltip()))},this.handleCtwaSourceButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.props.ctwaSourceUrl&&(0,c.openExternalLink)(this.props.ctwaSourceUrl)},this.state={progress:this.props.progress,volume:this.props.volume,muted:this.props.muted,bufferedTime:this.props.bufferedTime,isMouseOverVolumeControl:!1,isMouseOverProgressBar:!1,mouseOverProgressRatio:void 0,isDraggingProgress:!1,prevPropProgress:this.props.progress,prevPropVolume:this.props.volume,prevPropMuted:this.props.muted,prevPropBufferedTime:this.props.bufferedTime}}componentDidMount(){0!==this.props.volume||this.props.muted||this._handleMute()}static getDerivedStateFromProps(e,t){var a={};return t.prevPropProgress===e.progress||t.isDraggingProgress||(a.progress=e.progress,a.prevPropProgress=e.progress),t.prevPropVolume!==e.volume&&(a.volume=e.volume,a.prevPropVolume=e.volume),t.prevPropMuted!==e.muted&&(a.muted=e.muted,a.prevPropMuted=e.muted),t.prevPropBufferedTime!==e.bufferedTime&&(a.bufferedTime=e.bufferedTime,a.prevPropBufferedTime=e.bufferedTime),a}_renderCtwaSourceIcon(){if(!(this.state.isMouseOverVolumeControl&&!this.state.muted)&&this.props.ctwaSourceUrl){var e=m.default.withoutWww(m.default.hostname(this.props.ctwaSourceUrl));return o.createElement(u.default,{isFullscreenMode:this.props.isFullscreenMode,onClick:this.handleCtwaSourceButtonClick,isInstagram:e===d.default.HOSTNAME.INSTAGRAM})}return null}render(){var e=this.props.isFullscreenMode,t=e?o.createElement("div",{className:(0,n.default)(_.default.timeText,_.default.currentTime),onClick:this._stopEventPropagation},l.default.durationStr(this.state.progress)):null,a=e?o.createElement("div",{className:(0,n.default)(_.default.timeText,_.default.duration),onClick:this._stopEventPropagation},l.default.durationStr(this.props.duration)):null,r=this.props.className?this.props.className:_.default.controls;return o.createElement("div",{className:(0,n.default)(r,{[_.default.fullscreen]:e})},o.createElement("div",{className:_.default.playpauseBtnContainer,onClick:this._stopEventPropagation,onMouseDown:this._stopEventPropagation,onMouseUp:this._stopEventPropagation},o.createElement(f.default,{"aria-label":this.props.isVideoPlaying?h.default.t(9):h.default.t(10),name:this.props.isVideoPlaying?"video-pause":"video-play",display:"inline",onClick:this.props.isVideoPlaying?this.handlePause:this._handlePlay})),this._renderProgress(),this._renderVolume(),t,a,this._renderCtwaSourceIcon())}}t.default=E,E.displayName="VideoControls"},1649:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(88030));class o extends i.PureComponent{constructor(...e){super(...e),this._handlePlayByControls=()=>{this.props.refVideo&&this.props.refVideo.play()},this._handlePauseByControls=()=>{this.props.refVideo&&this.props.refVideo.pause()},this._handleSetCurrentTimeByControls=e=>{this.props.refVideo&&this.props.refVideo.setCurrentTime(e)},this._handleSetVolumeByControls=e=>{this.props.refVideo&&this.props.refVideo.setVolume(e)},this._handleSetMutedByControls=e=>{this.props.refVideo&&this.props.refVideo.setMuted(e)}}render(){if(!this.props.refVideo)return null;var e=this.props.videoMetadata;return e?i.createElement(n.default,{duration:e.duration,progress:e.currentTime,volume:e.volume,muted:e.muted,bufferedTime:e.bufferedTime,onPlay:this._handlePlayByControls,onPause:this._handlePauseByControls,onProgressChange:this.props.handleSetCurrentTimeByControls?this.props.handleSetCurrentTimeByControls:this._handleSetCurrentTimeByControls,onVolumeValueChange:this._handleSetVolumeByControls,onMutedValueChange:this._handleSetMutedByControls,isVideoPlaying:this.props.isVideoPlaying,isFullscreenMode:this.props.isFullscreenMode,className:this.props.controlsClassName,ctwaSourceUrl:this.props.ctwaSourceUrl}):null}}t.default=o,o.displayName="VideoRefControls"},6974:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(54073)),o=s(a(72779)),l=r(a(2784)),d=s(a(20174)),u=s(a(6016)),c=s(a(40915)),h=s(a(20642)),f=s(a(90975)),p=a(24406),m=s(a(77626)),_=s(a(74824)),v=s(a(1649)),g=s(a(85001)),E=s(a(12034));class S extends l.Component{constructor(e){super(e),this.setRefContainer=e=>{this.refContainer=e},this.setRefVideo=e=>{this.refVideo=e},this.resetMouseMoveRecently=(0,n.default)((()=>{this.setState({mouseMoveRecently:!1})}),p.FULLSCREEN_CONTROLS_DISPLAY_TIMEOUT),this.mouseDownCoor=null,this.handleEnded=()=>{this.props.onVideoEnded&&this.props.onVideoEnded();var e=this.refVideo;e&&(e.play(),e.pause()),this.setState({isVideoPlaying:!1})},this.handleError=()=>{this.props.onError&&this.props.onError()},this.handlePause=()=>{var e=this.refVideo?this.refVideo.getCurrentTime():null,t=null;this.state.videoMetadata&&null!=e&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!1,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handlePlaying=()=>{var e=this.refVideo?this.refVideo.getCurrentTime():null,t=null;this.state.videoMetadata&&null!=e&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({isVideoPlaying:!0,videoMetadata:t}),this.blockTimeUpdateOnce=!0},this.handleLoadedMetadata=e=>{var t=null!=this.props.startTime?this.props.startTime:0;this.setState({videoMetadata:{duration:e.duration,currentTime:t,volume:e.volume,muted:e.muted,bufferedTime:0}})},this.handleVolumeChange=e=>{var t=null;this.state.videoMetadata&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{volume:e.volume,muted:e.muted})),this.setState({videoMetadata:t})},this.handleTimeUpdate=e=>{if(this.blockTimeUpdateOnce)this.blockTimeUpdateOnce=!1;else{var t=null;this.state.videoMetadata&&(t=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{currentTime:e})),this.setState({videoMetadata:t})}},this.handleSetCurrentTimeByControls=e=>{if(this.refVideo){var t=e;this.state.videoMetadata&&e>=this.state.videoMetadata.duration-1&&this.state.videoMetadata.duration>1&&(t=this.state.videoMetadata.duration-1),this.refVideo.setCurrentTime(t)}},this.handleProgress=e=>{var t=e[0][1],a=null;this.state.videoMetadata&&(a=(0,i.default)((0,i.default)({},this.state.videoMetadata),{},{bufferedTime:t})),this.setState({videoMetadata:a})},this.state={videoMetadata:void 0,isVideoPlaying:!1,isMouseOver:!1,mouseMoveRecently:!1,isFullscreenMode:!1,exposeIframeInPiP:!1}}componentDidMount(){this.props.listeners.add(u.default,"fullscreen_change",(()=>{u.default.isFullscreenMode&&u.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):u.default.isFullscreenMode||this.setState({isFullscreenMode:!1})}))}componentWillUnmount(){this.resetMouseMoveRecently.cancel()}renderVideoControls(){var e=null,t=this.state.videoMetadata;if(t){var a=(0,o.default)(g.default.strippedVideoControls,g.default.opacityTransition,{[g.default.dimmed]:!this.state.mouseMoveRecently});e=l.createElement(v.default,{refVideo:this.refVideo,videoMetadata:t,isFullscreenMode:this.state.isFullscreenMode,isVideoPlaying:this.state.isVideoPlaying,handleSetCurrentTimeByControls:this.handleSetCurrentTimeByControls,controlsClassName:this.state.isFullscreenMode?a:void 0}),this.state.isFullscreenMode||(e=l.createElement("div",{className:g.default.videoControlsWrapper,onMouseDown:e=>{this.mouseDownCoor={x:e.clientX,y:e.clientY}},onMouseUp:e=>{var t=e.clientX,a=e.clientY,r=this.mouseDownCoor?this.mouseDownCoor.x:void 0,s=this.mouseDownCoor?this.mouseDownCoor.y:void 0;null!=r&&null!=s&&Math.abs(t-r)+Math.abs(a-s)<4&&this.setState({exposeIframeInPiP:!0})}},e))}return e}render(){var e,t=this.state.exposeIframeInPiP||this.state.isFullscreenMode?null:l.createElement("div",{className:g.default.blockYoutube}),a=l.createElement("div",{className:(0,o.default)(g.default.youtubeContainer,{[g.default.fullscreen]:this.state.isFullscreenMode})},t,l.createElement(E.default,{ref:this.setRefVideo,youtubeVideoId:this.props.youtubeVideoId,startTime:this.props.startTime,onEnded:this.handleEnded,onError:this.handleError,onLoadedMetadata:this.handleLoadedMetadata,onPause:this.handlePause,onPlaying:this.handlePlaying,onProgress:this.handleProgress,onTimeUpdate:this.handleTimeUpdate,onVolumeChange:this.handleVolumeChange,autoPlay:this.props.autoPlay})),r=this.renderVideoControls();m.default.isSafari||(e=l.createElement(c.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.state.isFullscreenMode?e=>{e.stopPropagation(),u.default.exitFullscreen()}:e=>{e.stopPropagation(),u.default.requestFullscreen(this.refContainer)}}));var s=l.createElement(f.default,{theme:"full-rounded"}),i=this.state.isFullscreenMode?l.createElement(l.Fragment,null,a,r,l.createElement("div",{className:(0,o.default)(g.default.widgetsWrapper,g.default.opacityTransition,{[g.default.dimmed]:!this.state.mouseMoveRecently})},e,l.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}}))):l.createElement(l.Fragment,null,a,l.createElement(_.default,{transitionName:"fade-fast"},this.state.isMouseOver&&this.state.mouseMoveRecently&&!this.state.exposeIframeInPiP?l.createElement(l.Fragment,null,s,r,e,l.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:e=>{e.stopPropagation(),this.props.onClose()}})):null));return l.createElement("div",{ref:this.setRefContainer,key:"elementsWrapped",className:(0,o.default)(g.default.container,{[g.default.fullscreen]:this.state.isFullscreenMode}),onMouseEnter:()=>{if(this.state.exposeIframeInPiP){if(m.default.isGecko&&this.state.isMouseOver)return;this.setState({exposeIframeInPiP:!1})}this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})},onMouseDown:e=>{this.state.isFullscreenMode&&e.stopPropagation()},onMouseMove:()=>{this.state.isMouseOver||this.setState({isMouseOver:!0}),this.state.mouseMoveRecently||this.setState({mouseMoveRecently:!0}),this.resetMouseMoveRecently()}},i)}}S.displayName="YoutubeVideoPlayer";var C=(0,h.default)(S);t.default=C},12034:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=s(a(98537)),o=s(a(54073)),l=r(a(2784)),d=s(a(79711)),u=s(a(50935)),c=a(95595),h=s(a(20642)),f=s(a(86094)),p=(0,o.default)((e=>{(0,c.setVideoVolumeSetting)(e)}),500),m=(0,o.default)((e=>{(0,c.setVideoMutedSetting)(e)}),500),_=1,v={width:"100%",height:"100%",playerVars:{cc_load_policy:1,iv_load_policy:3,controls:0,playsinline:1,rel:0,modestbranding:0,autoplay:0}};class g extends l.PureComponent{constructor(...e){super(...e),this.updateInterval=null,this.player=void 0,this.currentTime=0,this.videoLoadedFraction=0,this.getPlayerState=()=>this.player?this.player.getPlayerState():void 0,this.setStartTime=()=>{this.player&&"number"==typeof this.props.startTime&&this.player.seekTo(this.props.startTime,!0)},this.onOtherPlaying=e=>{e!==this&&this.player&&this.player.pauseVideo()},this.onReady=e=>{this.player=e.target;var t,a,r=this.player,s=(0,c.getVideoVolumeSettings)();s&&("number"==typeof s.volume&&(t=s.volume),"boolean"==typeof s.muted&&(a=s.muted));var i=r.getDuration(),n=null!=t?t:.01*r.getVolume(),o=null!=a?a:r.isMuted(),l=r.getIframe().getBoundingClientRect(),d=l.width,u=l.height;this.videoTagMetadata={duration:i,volume:n,muted:o,videoWidth:d,videoHeight:u},this.props.onLoadedMetadata(this.videoTagMetadata),this.currentTime=r.getCurrentTime(),this.updateInterval=setInterval(this.update,250),null!=this.props.startTime&&this.setStartTime(),null!=t&&this.setVolume(t),null!=a&&this.setMuted(a)},this.update=()=>{var e=this.player;if(e){var t=e.getCurrentTime();t!==this.currentTime&&(this.currentTime=t,this.props.onTimeUpdate(t));var a=e.getVideoLoadedFraction();if(a!==this.videoLoadedFraction){this.videoLoadedFraction=a;var r=this.videoTagMetadata?this.videoTagMetadata.duration*a:0;this.props.onProgress([[0,r]])}var s=this.videoTagMetadata;if(s){var n=.01*e.getVolume(),o=e.isMuted();n===s.volume&&o===s.muted||(this.videoTagMetadata=(0,i.default)((0,i.default)({},s),{},{volume:n,muted:o}),this.props.onVolumeChange({volume:n,muted:o}))}}},this.onPlay=()=>{d.default.mediaPlaying(this),this.props.onPlaying()},this.onPause=()=>{this.props.onPause()},this.onEnd=()=>{this.props.onEnded();var e=this.player;e&&(e.playVideo(),e.pauseVideo())},this.onError=()=>{this.props.onError()},this.onStateChange=e=>{e.target.getPlayerState()!==_&&this.props.onPause()},this.play=()=>{this.player&&this.player.playVideo()},this.pause=()=>{this.player&&this.player.pauseVideo()},this.getPaused=()=>!this.player||this.getPlayerState()!==_,this.getCurrentTime=()=>this.player?this.player.getCurrentTime():0,this.setCurrentTime=e=>{this.player&&this.player.seekTo(e,!0)},this.getDuration=()=>this.player?this.player.getDuration():0,this.getVolume=()=>this.player?.01*this.player.getVolume():0,this.setVolume=e=>{this.player&&(this.player.setVolume(100*e),p(e))},this.getMuted=()=>!!this.player&&this.player.isMuted(),this.setMuted=e=>{var t=this.player;t&&(e?t.mute():t.unMute(),m(e))}}componentDidMount(){this.props.listeners.add(d.default,"mediaPlaying",this.onOtherPlaying),this.props.listeners.add(d.default,"pttRecording",this.pause)}componentWillUnmount(){this.updateInterval&&clearInterval(this.updateInterval)}componentDidUpdate(e){e.startTime!==this.props.startTime&&this.setStartTime()}render(){var e=(0,n.default)({},v,{playerVars:{autoplay:this.props.autoPlay?1:0,widget_referrer:u.default.WHATSAPP_ORIGIN,origin:window.location.origin}});return l.createElement(f.default,{videoId:this.props.youtubeVideoId,opts:e,onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.onEnd,onError:this.onError,onStateChange:this.onStateChange})}}g.displayName="YoutubeVideoTag";var E=(0,h.default)(g);t.default=class extends E{constructor(...e){super(...e),this.play=()=>{this.getComponent().play()},this.pause=()=>{this.getComponent().pause()},this.getPaused=()=>this.getComponent().getPaused(),this.getCurrentTime=()=>this.getComponent().getCurrentTime(),this.setCurrentTime=e=>{this.getComponent().setCurrentTime(e)},this.getDuration=()=>this.getComponent().getDuration(),this.getVolume=()=>this.getComponent().getVolume(),this.setVolume=e=>{this.getComponent().setVolume(e)},this.getMuted=()=>this.getComponent().getMuted(),this.setMuted=e=>{this.getComponent().setMuted(e)}}}},52617:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({productId:e,businessOwnerJid:t,msgT:a}){var r=(0,i.createWid)(t);if(!r)return;var n=s.default.get(r);if(!n)return;var o=n.productCollection.get(e),l=n.msgProductCollection.get(e);if(l&&o){var d=null!=a?a:l.t;return o.t>=d?(n.msgProductCollection.remove(l),o):l}return o||l};var s=r(a(65468)),i=a(75637)},83974:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.logBusinessProfileCatalogView=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CARD_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_CARD_IMPRESSION,catalogSessionId:t,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE}).commit()},t.logChatCatalogView=function({catalogOwnerWid:e,catalogSessionId:t}){new i.default.CatalogView({catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_CHAT_CATALOG_ICON_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_CHAT,catalogSessionId:t}).commit()},t.logProfileProductClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CARD_ITEM_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_CARD_ITEM_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE,catalogSessionId:t}).commit()},t.logCarouselViewMoreClick=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CARD_MORE_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_CARD_MORE_CLICK,catalogSessionId:t}).commit()},t.logCatalogListView=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_LIST_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_LIST_IMPRESSION,catalogSessionId:t}).commit()},t.logCatalogShareLinkClick=function({catalogOwnerWid:e,catalogSessionId:t}){var a=(0,n.isCatalogOwner)({catalogOwnerWid:e});(0,n.createCatalogViewEvent)({isOwner:a,catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_LINK_CLICK,catalogSessionId:t}).commit()},t.logCatalogListDetailClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_LIST_ITEM_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_LIST_ITEM_CLICK,catalogSessionId:t}).commit()},t.logDetailImageClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMAGE_CLICK,catalogSessionId:t}).commit()},t.logDetailLinkClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_LINK_CLICK,catalogSessionId:t}).commit()},t.logImageCarouselModalView=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_IMPRESSION,catalogSessionId:t}).commit()},t.logImageListClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_IMAGE_LIST_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_IMAGE_LIST_CLICK,catalogSessionId:t}).commit()},t.logFullImageView=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_IMPRESSION,catalogSessionId:t}).commit()},t.logImageNavigate=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_FULL_IMAGE_SWIPE,catalogSessionId:t}).commit()},t.logProductDetailView=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_DETAIL_IMPRESSION,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_DETAIL_IMPRESSION,catalogSessionId:t}).commit()},t.logReportProduct=function({product:e,catalogSessionId:t}){new i.default.CatalogView({catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT,catalogSessionId:t}).commit()},t.logReportProductSuccess=function({product:e,catalogSessionId:t}){new i.default.CatalogView({catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_SUCCESS,catalogSessionId:t}).commit()},t.logReportProductFailure=function({product:e,catalogSessionId:t}){new i.default.CatalogView({catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_REPORT_PRODUCT_FAILURE,catalogSessionId:t}).commit()},t.logProductInquiryClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE,catalogSessionId:t}).commit()},t.logProductMsgClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_PRODUCT_IN_CONVERSATION_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_MESSAGE,catalogSessionId:t}).commit()},t.logProductDeepLinkOpen=function({catalogOwnerJid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerJid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_LINK_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_DEEPLINK,catalogSessionId:t}).commit()},t.logProductMessageBusinessClick=function(e,t){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_MESSAGE_BUSINESS_BUTTON_CLICK,catalogSessionId:t}).commit()},t.logProductMessageBusinessSend=function(e,t){var a=!1;if(null!=e.businessOwnerJid){var r=e.businessOwnerJid;a=(0,s.getMeUser)().equals((0,l.createWid)(r))}(0,n.createCatalogViewEvent)({isOwner:a,catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_QUOTED_PRODUCT_MESSAGE_SEND,catalogSessionId:t||(new o.default).toString()}).commit()},t.logShareProductCopyLinkClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_COPY_LINK_CLICK,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logShareProductViaWALinkClick=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logCatalogAttachmentButtonClick=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CATALOG_IN_CONVERSATION_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_ATTACHMENT_PANEL,catalogSessionId:e}).commit()},t.logProductMessageSent=function({product:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({product:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SEND_PRODUCT_MESSAGE,catalogSessionId:t,productId:e.id.toString()}).commit()},t.logSendCatalogClick=function({catalogOwnerWid:e,catalogSessionId:t}){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SEND_CATALOG_CLICK,catalogSessionId:t}).commit()},t.logShareCatalogCopyLinkClick=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_COPY_LINK_CLICK,catalogSessionId:t}).commit()},t.logShareCatalogViaWALinkClick=function({catalogOwnerWid:e,catalogSessionId:t}){(0,n.createCatalogViewEvent)({isOwner:(0,n.isCatalogOwner)({catalogOwnerWid:e}),catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogViewAction:i.default.CATALOG_VIEW_ACTION.ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK,catalogSessionId:t}).commit()},t.logAddProductClick=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_CLICKED,catalogSessionId:e,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS}).commit()},t.logAddProductSuccess=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAddProductFailed=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_ADD_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logEditProductClick=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_CLICKED,productId:e.id.toString(),catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t}).commit()},t.logEditProductSuccess=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),catalogSessionId:t}).commit()},t.logEditProductFailed=function(e,t,a){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_EDIT_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),errorCode:a,catalogSessionId:t}).commit()},t.logDeleteProductClick=function(e,t,a){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_CLICKED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),productCount:t,catalogSessionId:a}).commit()},t.logDeleteProductSuccess=function(e,t,a){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),productCount:t,catalogSessionId:a}).commit()},t.logDeleteProductFailed=function(e,t,a,r){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_DELETE_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,productId:e.id.toString(),productCount:t,errorCode:r,catalogSessionId:a}).commit()},t.logCreateProductCatalogClick=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logCreateProductCatalogSuccess=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logCreateProductCatalogFailed=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_CREATE_PRODUCT_CATALOG_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logAppealProductCatalogClick=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_CLICKED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogSuccess=function(e){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:e}).commit()},t.logAppealProductCatalogFailed=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_APPEAL_PRODUCT_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,errorCode:t,catalogSessionId:e}).commit()},t.logCatalogContextMenuClick=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_MENU_CLICK,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideClick=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CLICKED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideSuccess=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideCancelled=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_CANCELLED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductHideFailed=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_HIDE_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowClick=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CLICKED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowSuccess=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_SUCCESS,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowCancelled=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_CANCELLED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()},t.logCatalogProductShowFailed=function(e,t){new i.default.CatalogBiz({catalogBizAction:i.default.CATALOG_BIZ_ACTION.ACTION_PRODUCT_UNHIDE_FAILED,catalogEntryPoint:i.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS,catalogSessionId:t,productId:e}).commit()};var s=a(95595),i=r(a(40210)),n=a(82431),o=r(a(55043)),l=a(75637)},82431:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.createCatalogViewEvent=t.isCatalogOwner=void 0;var s=r(a(70417)),i=r(a(22220)),n=a(95595),o=r(a(40210)),l=r(a(68384)),d=a(75637);t.isCatalogOwner=e=>{var t,a=(0,n.getMeUser)();return e.catalogOwnerJid?t=(0,d.createWid)(e.catalogOwnerJid):e.catalogOwnerWid?t=e.catalogOwnerWid:e.product&&(t=e.product.catalogWid),l.default.equals(a,t)};t.createCatalogViewEvent=e=>{var{isOwner:t,catalogBizAction:a,catalogViewAction:r,bizActionConfig:n}=e,l=(0,i.default)(e,["isOwner","catalogBizAction","catalogViewAction","bizActionConfig"]);return t?new o.default.CatalogBiz((0,s.default)((0,s.default)({catalogBizAction:a},l),n)):new o.default.CatalogView((0,s.default)({catalogViewAction:r},l))}},55074:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(84767)),o=r(a(18392)),l=r(a(43903)),d=r(a(73549)),u=r(a(71201)),c=r(a(91581)),h=a(95595),f=r(a(17957)),p=r(a(20642)),m=a(83974),_=r(a(43889)),v=a(38350),g=r(a(92209)),E=a(4658),S=r(a(72424)),C=r(a(40207)),y=a(64658),b=r(a(22948)),T=r(a(82631)),M=r(a(17693)),N=r(a(63498));class I extends i.Component{constructor(...e){super(...e),this.state={active:!1,contextMenu:null},this.onActiveChange=e=>{this.setState({active:!!e})},this.onAddToCart=e=>{var{product:t,sessionId:a}=this.props;null!=a&&((0,n.default)(t,a),e.preventDefault(),e.stopPropagation())},this.onProductHideShow=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductHideShow&&this.props.onProductHideShow(this.props.product)},this.onDeleteProduct=e=>{e.preventDefault(),e.stopPropagation(),this.props.onProductDelete&&this.props.onProductDelete(this.props.product)},this.removeContext=()=>{this.setState({contextMenu:null})},this.onContext=e=>{var t;if(this.state.contextMenu)this.setState({contextMenu:null});else{var a=[],{product:r,onProductShare:s,onCartOpen:n,sessionId:o}=this.props;(0,m.logCatalogContextMenuClick)(r.id.toString(),o),null!=s&&r.reviewStatus===v.PRODUCT_REVIEW_STATUS.APPROVED&&!1===r.isHidden&&a.push(i.createElement(u.default,{a8n:"mi-share-label",action:e=>{e.stopPropagation(),s((0,y.unproxy)(r))},key:"ShareLabel"},f.default.t(450)));var l=null===(t=(0,h.getMaybeMeUser)())||void 0===t?void 0:t.equals(r.catalogWid);l&&this.props.onProductHideShow&&(r.isHidden?a.push(i.createElement(u.default,{a8n:"mi-show-label",action:this.onProductHideShow,key:"ShowLabel"},f.default.t(451))):a.push(i.createElement(u.default,{a8n:"mi-hide-label",action:this.onProductHideShow,key:"HideLabel"},f.default.t(449)))),r.isHidden||r.reviewStatus!==v.PRODUCT_REVIEW_STATUS.APPROVED||null==n||a.push(i.createElement(u.default,{a8n:"mi-addcart-label",action:this.onAddToCart,key:"AddToCartLabel"},f.default.t(447))),l&&this.props.onProductDelete&&a.push(i.createElement(u.default,{a8n:"mi-edit-label",action:this.onDeleteProduct,key:"DeleteLabel"},f.default.t(448))),e.event&&e.event.persist(),this.setState({contextMenu:{menu:a,event:e.event,anchor:e.anchor}})}}}componentDidMount(){var{active:e,listeners:t,product:a}=this.props;e&&t.add(e,a.id.toString(),this.onActiveChange)}_getShareIcon(){var{product:e,onProductShare:t}=this.props;return null!=t&&e.reviewStatus===v.PRODUCT_REVIEW_STATUS.APPROVED?i.createElement(b.default,{"aria-label":"",className:_.default.shareButton,onClick:a=>{a.stopPropagation(),t((0,y.unproxy)(e))},name:"link"}):null}_getAddToCartIcon(){var{onCartOpen:e,product:t}=this.props;return null!=e&&t.reviewStatus===v.PRODUCT_REVIEW_STATUS.APPROVED?i.createElement(o.default,{onClick:this.onAddToCart}):null}_renderDetail(){return S.default.webCatalogProductsOnOff&&this.props.canManageCatalog?null:i.createElement("div",{className:_.default.detailContainer},this._getShareIcon(),this._getAddToCartIcon())}render(){var e,t,{product:a,onClick:r,theme:s,isMuted:n}=this.props,o=null===(e=a.getPreviewImage())||void 0===e?void 0:e.mediaData;switch(a.reviewStatus){case v.PRODUCT_REVIEW_STATUS.NO_REVIEW:case v.PRODUCT_REVIEW_STATUS.OUTDATED:case v.PRODUCT_REVIEW_STATUS.PENDING:t=i.createElement(l.default,{theme:"pending",svg:"business-hours"});break;case v.PRODUCT_REVIEW_STATUS.REJECTED:t=i.createElement(l.default,{theme:"warning",svg:"error"})}var u,h=S.default.webCatalogProductsOnOff&&a.isHidden?i.createElement(T.default,{name:"hide"}):null,f=o?i.createElement(g.default,{theme:"list",mediaData:o,badge:t,overlayContent:h}):i.createElement(i.Fragment,null),p=i.createElement(c.default,{text:a.name,ellipsify:!0,titlify:!0}),m=i.createElement("div",{className:_.default.description},i.createElement(c.default,{text:a.description,ellipsify:!0})),C=(0,E.formatPriceText)(a),y=(0,E.formatActiveSalePriceText)(a),b=C?i.createElement("div",{className:_.default.price},y?i.createElement(c.default,{className:_.default.originalPrice,text:C}):null,i.createElement(c.default,{text:null!=y?y:C})):null,I=i.createElement(i.Fragment,null,m,b);return this.state.contextMenu&&(u=i.createElement(M.default,{displayName:"ChatContextMenu",escapable:!0,popable:!0,requestDismiss:this.removeContext},i.createElement(N.default,{contextMenu:this.state.contextMenu}))),i.createElement(i.Fragment,null,i.createElement(d.default,{key:a.id.toString(),customImage:!0,image:f,primary:p,onClick:r,secondary:I,theme:s,active:this.state.active,idle:n,detail:this._renderDetail(),className:_.default.catalogListItem,contextEnabled:()=>S.default.webCatalogProductsOnOff&&!0===this.props.canManageCatalog,onContext:this.onContext}),u)}}I.CONCERNS={product:["id","name","description","url","retailerId","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","reviewStatus","catalogWid","productImageCollection","imageHash","imageCdnUrl","isHidden"]},I.defaultProps={theme:"product",isMuted:!1},I.displayName="ProductCatalogListItem";var P=(0,p.default)((0,C.default)(I,I.CONCERNS));t.default=P},55043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ACCIDENTAL_SESSION=void 0;t.ACCIDENTAL_SESSION="accidental_session";t.default=class{constructor(e){this.accidental=e||!1,this.initSessionId()}isAccidental(){return this.accidental}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}toString(){return"".concat(this.sessionId)}}},93714:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(20642)),l=a(83974),d=r(a(93317)),u=r(a(99965)),c=r(a(92209)),h=a(64658),f=r(a(91378)),p=r(a(74824));class m extends i.Component{constructor(e){super(e),this.onKeyDown=e=>{37===e.keyCode?this.onPrev(e):39===e.keyCode&&this.onNext(e)},this.onNext=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var{productImageCollection:t}=this.props,a=t.length,r=this.state.activeImgIndex;this.onSelectThumb((r+1)%a)}},this.onPrev=e=>{if(e&&e.stopPropagation(),!this.state.imgZoomed){var{productImageCollection:t}=this.props,a=t.length,r=this.state.activeImgIndex,s=r-1<0?a-1:(r-1)%a;this.onSelectThumb(s)}},this.onImgZoomIn=e=>{this.setState({imgZoomed:e})},this.endFlow=()=>{n.default.closeModalMedia()},this.willEndFlow=()=>{this._refThumbsContainer&&(0,f.default)(this._refThumbsContainer,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})},this.onSelectThumb=e=>{if(e!==this.state.activeImgIndex){var{product:t,sessionId:a}=this.props;(0,l.logImageNavigate)({product:(0,h.unproxy)(t),catalogSessionId:a}),(0,l.logImageListClick)({product:(0,h.unproxy)(t),catalogSessionId:a})}this.setState({activeImgIndex:e})},this.scrollToActive=(e=!1)=>{var t,a,r=this._refThumbsContainer,s=null===(t=this._refScrollContainer)||void 0===t?void 0:t.firstChild,i=null===(a=this._refActiveThumb)||void 0===a?void 0:a.getComponent().getImageContainerElement();if(r&&s&&i){var n=0;i instanceof HTMLElement&&(n=i.clientWidth/2-r.clientWidth/2),(0,f.default)(i,"stop");var o=0;e&&(o=300),(0,f.default)(i,"scroll",{duration:o,container:s,offset:n,axis:"x",easing:[.1,.82,.25,1]})}},this._setRefActiveThumb=e=>this._refActiveThumb=e,this._setRefThumbsContainer=e=>this._refThumbsContainer=e,this._setRefScrollContainer=e=>{this._refScrollContainer=e},this.getThumbs=()=>{var{productImageCollection:e}=this.props,t=e.toArray().map(((e,t)=>{var a=t===this.state.activeImgIndex;return i.createElement(c.default,{theme:"viewerFlow",active:a,ref:a?this._setRefActiveThumb:null,key:"product-image-".concat(t),mediaData:e.mediaData,onClick:this.onSelectThumb.bind(this,t)})}));return[i.createElement("div",{className:d.default.thumbPadding,key:"padding-left"}),t,i.createElement("div",{className:d.default.thumbPadding,key:"padding-right"})]},this.zoomIn=!0;var{activeProductImage:t,productImageCollection:a}=this.props;this.state={activeImgIndex:a.toArray().indexOf(t),imgZoomed:!1}}componentDidMount(){this.zoomIn=!1,this.props.listeners.add(window,"keydown",this.onKeyDown),this.scrollToActive(),this._refThumbsContainer&&(0,f.default)(this._refThumbsContainer,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]});var{product:e,sessionId:t}=this.props;(0,l.logFullImageView)({product:(0,h.unproxy)(e),catalogSessionId:t}),(0,l.logImageCarouselModalView)({product:(0,h.unproxy)(e),catalogSessionId:t})}componentDidUpdate(e,t){var{product:a,sessionId:r}=e;t.activeImgIndex!==this.state.activeImgIndex&&(this.scrollToActive(!0),(0,l.logFullImageView)({product:(0,h.unproxy)(a),catalogSessionId:r}))}render(){var e=this.getThumbs(),{product:t,productImageCollection:a}=this.props,r=a.length,s=this.state.activeImgIndex,n=s>0?this.onPrev:null,o=s+1<r?this.onNext:null;return i.createElement("div",{className:this.state.imgZoomed?"img-zoomed-in":null},i.createElement("div",{className:d.default.thumbsContainer,ref:this._setRefThumbsContainer},i.createElement("div",{ref:this._setRefScrollContainer,className:d.default.scrollContainer,dir:"ltr"},i.createElement(p.default,{className:d.default.viewerThumbs,transitionName:"thumb-scale"},e))),i.createElement(u.default,{mediaData:a.toArray()[this.state.activeImgIndex].mediaData,onBack:this.endFlow,onExitAnimation:this.willEndFlow,onNext:o,onPrev:n,onImgZoomIn:this.onImgZoomIn,getZoomNode:this.props.getZoomNode,zoomIn:this.zoomIn,product:t,sessionId:this.props.sessionId}))}}m.displayName="ProductImageViewerFlow";var _=(0,o.default)(m);t.default=_},58847:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(96066)),o=r(a(7470)),l=r(a(46478)),d=r(a(91581)),u=r(a(17957)),c=a(80898),h=r(a(60949)),f=r(a(14760)),p=r(a(40207)),m=r(a(82631)),_=a(40263);class v extends i.PureComponent{render(){var e,{product:t}=this.props,a=o.default.get(t.catalogWid);if(a){var r=i.createElement(h.default,{contact:a,selectable:!0,useVerifiedName:!0}),s=i.createElement(l.default,{id:a.id,size:40}),p=i.createElement("div",{className:f.default.productName},i.createElement(m.default,{className:f.default.productNameIcon,name:"business-description",display:"inline"}),i.createElement(d.default,{text:t.name,titlify:!0,ellipsify:!0}));e=i.createElement(n.default,{idle:!0,image:s,primary:r,secondary:p,theme:"media"})}else e=i.createElement(_.TextSpan,{theme:"large",className:f.default.infoName},i.createElement(d.default,{text:t.name,titlify:!0,ellipsify:!0}));return i.createElement("div",{className:f.default.mediaPanelHeader},i.createElement("div",{className:f.default.info},e),i.createElement("div",{className:f.default.mediaPanelTools},i.createElement(c.MenuBar,{key:"media-panel-header",theme:"strong"},i.createElement(c.MenuBarItem,{a8nText:"btn-close",icon:i.createElement(m.default,{name:"x-viewer"}),title:u.default.t(1604),onClick:this.props.onClose}))))}}v.CONCERNS={mediaData:["renderableUrl"],product:["name","catalogWid"]},v.displayName="ProductImageViewerHeader";var g=(0,p.default)(v,v.CONCERNS);t.default=g},99965:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(12436)),n=s(a(72779)),o=r(a(2784)),l=r(a(60519)),d=s(a(50935)),u=s(a(91581)),c=s(a(8603)),h=s(a(61195)),f=a(96645),p=s(a(61941)),m=s(a(58847)),_=s(a(44445)),v=s(a(40207)),g=a(11419),E=s(a(17693)),S=s(a(91378));class C extends o.PureComponent{constructor(e){super(e),this.setMediaImage=e=>this.mediaImage=e,this.onImageLoad=e=>{if(!this.zoomed){this.zoomed=!0;var t=this.state.zoomElement;t&&e&&this.props.zoomIn&&e instanceof HTMLElement&&this.animateZoom(t,e)}},this.animateZoom=(e,t)=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=r.top-a.top,i=r.left-a.left,n=e.clientWidth/t.clientWidth;s-=(t.clientHeight-e.clientHeight)/2,i-=(t.clientWidth-e.clientWidth)/2,(0,S.default)(t,{opacity:[1,0],translateX:[0,i],translateY:[0,s],scale:[1,n]},{duration:d.default.MEDIA_VIEWER.ANIMATION_DURATION,easing:[.1,.82,.25,1]}),this._refCaption.current&&(0,S.default)(this._refCaption.current,{opacity:[1,0]},{duration:d.default.MEDIA_VIEWER.ANIMATION_DURATION})},this.onScroll=e=>{Math.abs(e.deltaY)>7&&this.onClose()},this.onImgZoomIn=e=>{var t=this.mediaImage;e&&t&&(this.listenToMouseMove=t.heightOverflow>0||t.widthOverflow>0),this.setState({imgZoomed:e}),this.props.onImgZoomIn(e)},this.onZoomOut=e=>{var t=this.mediaImage;t&&this.state.imgZoomed&&t.onImageClick(e)},this.onMouseMove=e=>{this.handleMouseMove(e.pageX,e.pageY)},this._handleMouseMove=(e,t)=>{var a=this.mediaImage;if(a){var r=a.getInsideContainer();if(r&&r instanceof HTMLElement){var s=a.getOutsideContainer();if(s&&s instanceof HTMLElement){var{translateX:i,translateY:n}=a.getTranslatePosition(s,e,t);(0,S.default)(r,"stop"),(0,S.default)(r,{translateX:i,translateY:n,scale:d.default.MEDIA_VIEWER.ZOOM_IN_FACTOR},{duration:0})}}}},this.onClose=()=>{var e;if(!this.closing){if(this.closing=!0,(0,g.isFunction)(this.props.onExitAnimation)&&this.props.onExitAnimation(),!this.props.getZoomNode)return this.props.onBack();var t=this.props.getZoomNode();if(!t)return this.props.onBack();var a=(0,p.default)(null===(e=this.mediaImage)||void 0===e?void 0:e.getInsideContainer(),"this.mediaImage?.getInsideContainer()"),r=a.getBoundingClientRect(),s=t.getBoundingClientRect(),i=s.top-r.top,n=s.left-r.left,o=t.clientWidth/a.clientWidth;i-=(a.clientHeight-t.clientHeight)/2,n-=(a.clientWidth-t.clientWidth)/2,(0,S.default)(a,{translateX:[n,0],translateY:[i,0],scale:[o,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{this.props.onBack()}))}},this.zoomed=!1,this.closing=!1,this._refCaption=o.createRef();var t=this.props.mediaData.mediaStage===f.MEDIA_DATA_STAGE.RESOLVED&&this.props.zoomIn&&this.props.getZoomNode?this.props.getZoomNode():null;this.state={imgZoomed:!1,zoomElement:t},this.handleMouseMove=(0,i.default)(this._handleMouseMove)}render(){var e,{mediaData:t,product:a}=this.props,r=o.createElement(h.default,{key:t.renderableUrl,mediaData:t,onLoad:this.onImageLoad,onImgZoomIn:this.onImgZoomIn,ref:this.setMediaImage});if(a.description){var s=this.props.zoomIn&&(t.isGif||t.type===c.default.TYPE.IMAGE);e=o.createElement("span",{className:{[_.default.captionHidden]:s},ref:this._refCaption},o.createElement(u.default,{text:a.description,className:_.default.mediaCaption}))}var i=(0,n.default)(_.default.media,{[_.default.mediaWithCaption]:!!e}),d=o.createElement("div",{className:(0,n.default)(_.default.btnMediaNext)},o.createElement(l.default,{type:l.ButtonType.Next,onClick:this.props.onNext||(e=>e.stopPropagation()),onKeyDown:this.props.onNext||(()=>{}),disabled:!this.props.onNext||this.state.imgZoomed})),f=o.createElement("div",{className:(0,n.default)(_.default.btnMediaPrev)},o.createElement(l.default,{type:l.ButtonType.Prev,onClick:this.props.onPrev||(e=>e.stopPropagation()),onKeyDown:this.props.onPrev||(()=>{}),disabled:!this.props.onPrev||this.state.imgZoomed})),p=(0,n.default)("overlay",_.default.mediaViewer,{[_.default.mediaViewerAnimate]:this.props.zoomIn,[_.default.cursorZoomOut]:this.state.imgZoomed}),v=this.state.imgZoomed?null:this.onScroll,g=this.state.imgZoomed?null:this.onClose,S=this.state.imgZoomed&&this.listenToMouseMove?this.onMouseMove:null,C=this.state.imgZoomed?this.onZoomOut:null;return o.createElement(E.default,{displayName:"ProductViewer",escapable:!0,requestDismiss:this.onClose},o.createElement("div",{className:p,"data-animate-media-viewer":!0,onClick:C,onMouseMove:S},o.createElement(m.default,{mediaData:t,onClose:this.onClose,product:this.props.product}),o.createElement("div",{className:_.default.mediaContent,dir:"ltr",onWheel:v,onClick:g},f,o.createElement("div",{className:i},o.createElement("div",{className:_.default.media},r),e),d)))}}C.CONCERNS={mediaData:["mediaStage","renderableUrl","isGif","type"],product:["description"]},C.displayName="ProductImageViewerModal";var y=(0,v.default)(C,C.CONCERNS);t.default=y},92209:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductThumbPlaceholder=h,t.default=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(13414),l=a(96645),d=s(a(55080)),u=s(a(40207)),c=s(a(82631));function h({onClick:e,className:t}){return n.createElement("div",{className:(0,i.default)(t,d.default.mediaCanvas,d.default.placeholder),onClick:e},n.createElement(c.default,{name:"business-description"}))}h.displayName="ProductThumbPlaceholder";class f extends n.Component{constructor(...e){super(...e),this._refImageContainer=n.createRef()}componentDidMount(){this.props.imgRef&&this.props.imgRef(this.img)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null)}getImageContainerElement(){return this._refImageContainer.current}render(){var e,t,{mediaData:a,theme:r,active:s,onClick:u,badge:c,overlayContent:f}=this.props;a.mediaStage===l.MEDIA_DATA_STAGE.RESOLVED?(e=n.createElement("div",{className:d.default.mediaCanvas,style:{backgroundImage:"url(".concat(a.renderableUrl,")")},onClick:u,ref:(0,o.GetRef)((e=>{this.img=e}))}),null!=f&&(t=n.createElement("div",{className:d.default.overlay},f))):e=a.mediaStage===l.MEDIA_DATA_STAGE.PREPARING?n.createElement(h,{className:this.props.className,onClick:this.props.onClick}):a.mediaStage===l.MEDIA_DATA_STAGE.ERROR_MISSING?null:n.createElement("div",{className:d.default.mediaCanvas});var p=(0,i.default)(this.props.className,{[d.default.canvasSecondRow]:"hideableSecondRow"===r,[d.default.canvasComponent]:"list"!==r,[d.default.list]:"list"===r,[d.default.viewerFlow]:"viewerFlow"===r,[d.default.active]:!0===s});if(this.props.large)return n.createElement("div",{className:d.default.canvasComponentLarge},e);var m=n.createElement("div",{ref:this._refImageContainer,className:p},n.createElement("div",{className:d.default.canvasBody}),e,t,c);return"list"===r?n.createElement("div",{className:d.default.listWrapper},m):m}}f.CONCERNS={mediaData:["mediaStage","mediaBlob","renderableUrl","preview"]},f.displayName="ProductThumb";var p=(0,u.default)(f,f.CONCERNS);t.default=p},4658:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.formatPriceText=function(e){return null!=e.currency&&null!=e.priceAmount1000?s.format(e.currency,e.priceAmount1000):null},t.formatActiveSalePriceText=function(e){return null!=e.currency&&null!=e.salePriceAmount1000&&(0,i.isSalePriceActive)(e)?s.format(e.currency,e.salePriceAmount1000):null};var s=r(a(37356)),i=a(52918)},67257:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=s(a(58527)),n=r(a(2784)),o=s(a(16348)),l=a(96645),d=s(a(55074)),u=s(a(40207));class c extends n.Component{render(){var{product:e,mediaData:t,selections:a,active:r,onClick:s}=this.props,i=t.mediaStage!==l.MEDIA_DATA_STAGE.RESOLVED,u=i?()=>{}:s;return n.createElement(o.default,{key:e.id.toString(),model:e,selections:a,disabled:i},n.createElement(d.default,{product:e,onClick:u,theme:"product-checkbox",active:r,isMuted:i}))}}c.CONCERNS={mediaData:["mediaStage"]},c.displayName="SelectableProductItemWithMediaData";var h=(0,u.default)(c,c.CONCERNS);function f(e){var t,a=null===(t=e.product.getPreviewImage())||void 0===t?void 0:t.mediaData;return a?n.createElement(h,(0,i.default)({mediaData:a},e)):null}f.displayName="SelectableProductItem"},15553:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(50935)),l=r(a(7470)),d=r(a(17957)),u=r(a(20642)),c=a(80898),h=r(a(57185)),f=r(a(89551)),p=r(a(82631));class m extends i.PureComponent{constructor(){super(...arguments),this._onUnreadChange=()=>{var e=h.default.getUnexpired(!0).some((e=>{var t=this._lastViewerTimestamps[e.id.toString()],a=!t||e.t>t;return!e.contact.statusMute&&e.unreadCount>0&&a}));e!==this.state.hasUnread&&this.setState({hasUnread:e})},this._updateViewerTimestamps=()=>{h.default.getUnexpired(!0).forEach((e=>{this._lastViewerTimestamps[e.id.toString()]=e.t}))},this.onFlowEnd=()=>{this._updateViewerTimestamps(),this.setState({hasUnread:!1})},this._onStatus=e=>{e.preventDefault(),n.default.openModalMedia(i.createElement(f.default,{onFlowEnd:this.onFlowEnd,removeTopDrawer:!1}),{transition:"status-v3-modal"})};var e=h.default.getUnexpired(!0).some((e=>e.unreadCount>0&&!e.contact.statusMute));this.state={hasUnread:e},this._lastViewerTimestamps={}}componentDidMount(){this.props.listeners.add(h.default,"add remove change:unreadCount change:t",this._onUnreadChange),this.props.listeners.add(l.default,o.default.COLLECTION_HAS_SYNCED,this._onUnreadChange)}render(){var e=this.state.hasUnread?i.createElement(p.default,{name:"status-v3-unread",directional:!0}):i.createElement(p.default,{name:"status-v3"});return i.createElement(c.MenuBarItem,{a8nText:"menu-bar-status",icon:e,title:d.default.t(1745),onClick:this._onStatus})}}m.CONCERNS={statusV3:["unreadCount"]},m.displayName="StatusV3MenuBarItem";var _=(0,u.default)(m);t.default=_},28006:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(73499)),l=(r(a(8603)),r(a(85472)));class d extends i.Component{constructor(e){super(e),this.state=this.getInitialMediaStyle()}getInitialMediaStyle(){var e,t=.67;if(this.props.initialStyle)return{initialStyle:this.props.initialStyle,aspectRatio:t};n.default.getConversationHeaderOffset((t=>{e=t}));var a=330*t;return e||(e={right:window.innerWidth,bottom:0}),{initialStyle:{width:a,left:e.right<window.innerWidth?e.right-a-10:window.innerWidth-a-10,bottom:window.innerHeight-10-330-e.bottom},aspectRatio:t}}render(){return i.createElement(l.default,{aspectRatio:.67,margin:{x:10,y:10},minWidth:145,className:o.default.voipFloater,initialStyle:this.state.initialStyle,escapeConversationHeader:!0},this.props.children)}}t.default=d,d.displayName="FloatingVoipWindow"},74251:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(28267));class i extends s.default{constructor(){super(),this.openVoipWindow=()=>{this.manager&&this.manager.openVoipWindow()},this.closeVoipWindow=()=>{this.manager&&this.manager.closeVoipWindow()}}register(e){this.manager=e}unregister(){this.manager&&this.manager.closeVoipWindow(),this.manager=null}}var n=new i;t.default=n},68849:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(28006)),o=r(a(18120)),l=r(a(51269)),d=r(a(20642)),u=r(a(74824)),c=r(a(74251)),h=r(a(50236)),f=r(a(42521));class p extends i.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.openVoipWindow=()=>{o.default.supportsFeature(o.default.F.WEB_VOIP_VOICE_CALL)&&this.setState({isOpen:!0})},this.closeVoipWindow=()=>{this.setState({isOpen:!1})},this.onCallAccept=()=>{},this.onCallReject=()=>{this.setState({isOpen:!1})},this.onCallEnd=()=>{this.setState({isOpen:!1})}}componentDidMount(){c.default.register(this)}componentWillUnmount(){c.default.unregister()}render(){return this.state.isOpen?i.createElement(u.default,{transitionName:"voip",className:h.default.wrapper,component:"div"},i.createElement(n.default,null,i.createElement(f.default,{callUi:l.default,onCallAccept:this.onCallAccept,onCallReject:this.onCallReject,onCallEnd:this.onCallEnd}))):null}}p.displayName="VoipModalManager";var m=(0,d.default)(p);t.default=m},42521:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(7470)),o=s(a(46478)),l=r(a(6016)),d=r(a(40915)),u=r(a(68476)),c=r(a(17957)),h=r(a(20642)),f=r(a(60949)),p=r(a(40207)),m=r(a(64786)),_=r(a(61266)),v=a(35205);class g extends i.PureComponent{constructor(...e){super(...e),this.state={isMouseOver:!1,isFullscreenMode:l.default.isFullscreenMode},this._toggleMute=()=>{this.props.callUi.muted=!this.props.callUi.muted,m.default.mute(this.props.callUi.muted)},this.setRefContainer=e=>{this.refContainer=e},this.handleFullscreenToggleButtonClick=e=>{this.state.isFullscreenMode?this.handleExitFullscreen(e):this.handleEnterFullscreen(e)},this.handleEnterFullscreen=e=>{e.stopPropagation(),l.default.requestFullscreen(this.refContainer)},this.handleExitFullscreen=e=>{e.stopPropagation(),l.default.exitFullscreen()},this._onWebrtcStop=()=>{m.default.endCall(),this.props.onCallEnd()},this._onWebrtcStart=()=>{var e=this.props.callUi.to,t=this.props.callUi.type;if(!e)throw new Error("Callee is null.");if(m.default.registerWebRTCCallback((e=>{"audio"===e.track.kind&&this._refAudioElement&&(this._refAudioElement.srcObject=e.streams[0]),"video"===e.track.kind&&this._refVideoElement&&"video"===t&&(this._refVideoElement.srcObject=e.streams[0])})),"video"===t){if(!u.default)throw new Error("VoipWindow:onWebrtcStart no video capability");(0,u.default)({audio:!1,video:!0}).then((e=>{this._refVideoPreviewElement&&(this._refVideoPreviewElement.srcObject=e)}))}m.default.callStart(e,"video"===t)}}componentDidMount(){this.props.listeners.add(l.default,"fullscreen_change",(()=>{l.default.isFullscreenMode&&l.default.fullscreenElement===this.refContainer?this.setState({isFullscreenMode:!0}):l.default.isFullscreenMode||this.setState({isFullscreenMode:!1})}))}render(){var e,t,{onCallAccept:r,onCallReject:s,onCallEnd:l}=this.props,{state:u,outgoing:h,from:p,to:m,type:g}=this.props.callUi,E=h?m:p,S=n.default.get(E||""),C=S?i.createElement("div",{className:_.default.participantName},i.createElement(f.default,{contact:S,titlify:!0,ellipsify:!0})):null,y=S?i.createElement(o.default,{id:S.id,size:82,quality:o.DETAIL_IMAGE_QUALITY.HIGH}):null,b=i.createElement("div",{className:_.default.actionRow},i.createElement("div",{className:_.default.btnGroup},i.createElement("button",{className:_.default.btnReject,onClick:s}),i.createElement("button",{className:_.default.btnAccept,onClick:r}))),T=i.createElement("div",{className:_.default.actionRow},i.createElement("div",{className:_.default.btnGroup},i.createElement("button",{className:_.default.btnMute,onClick:this._toggleMute}),i.createElement("button",{className:_.default.btnEnd,onClick:l}))),M=i.createElement("div",{className:_.default.actionRow},i.createElement("div",{className:_.default.btnGroup},i.createElement("button",{className:_.default.btnEnd,onClick:l}))),N=a(18120).default;if(N.supportsAnyFeature(N.F.WEB_VOIP_VOICE_CALL,N.F.WEB_VOIP_VIDEO_CALL)){M=i.createElement("div",{className:_.default.actionRow},i.createElement("div",{className:_.default.btnGroup},i.createElement("button",{className:_.default.btnEnd,onClick:this._onWebrtcStop}),i.createElement("button",{className:_.default.btnAccept,onClick:this._onWebrtcStart})));var I=N.supportsFeature(N.F.WEB_VOIP_VIDEO_CALL)&&"video"===g?i.createElement("video",{className:_.default.webrtcVideo,id:"webRtcVideo",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoElement=e}))}):null,P=N.supportsFeature(N.F.WEB_VOIP_VIDEO_CALL)&&"video"===g?i.createElement("video",{className:_.default.webrtcVideoPreview,id:"webRtcVideoPreview",autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refVideoPreviewElement=e}))}):null;e=i.createElement("div",{className:_.default.webrtcCanvas},I,P,i.createElement("audio",{className:_.default.webrtcAudio,id:"webRtcAudio",controls:!0,autoPlay:!0,ref:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=>{this._refAudioElement=e}))}))}switch(u){case v.CALL_STATES.INCOMING_RING:t=b;break;case v.CALL_STATES.ACTIVE:t=T;break;default:t=M}var A=i.createElement("div",{className:_.default.callTitle},c.default.t(1892)),O=i.createElement(d.default,{isFullscreenMode:this.state.isFullscreenMode,onClick:this.handleFullscreenToggleButtonClick});return i.createElement("div",{className:_.default.body,ref:this.setRefContainer,onMouseEnter:()=>{this.setState({isMouseOver:!0})},onMouseLeave:()=>{this.setState({isMouseOver:!1})}},A,C,y,e,this.state.isMouseOver&&O,t)}}g.CONCERNS={callUi:["state","muted","speaker","outgoing","from","to","type"]},g.displayName="VoipWindowWeb";var E=(0,h.default)((0,p.default)(g,g.CONCERNS));t.default=E},44764:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(92436),n=s(a(97430)),o=r(a(61247));class l extends o.default{constructor(...e){super(...e),this.isMicrophoneAvailable=(0,o.prop)(!1),this.isSpeakerAvailable=(0,o.prop)(!1),this.isVideoAvailable=(0,o.prop)(!1)}initialize(){super.initialize()}refreshDeviceList(e){this._deviceList=e,this.isVideoAvailable=n.default.getAvailableDevices(e,i.AVDeviceType.Video).length>0,this.isMicrophoneAvailable=n.default.getAvailableDevices(e,i.AVDeviceType.AudioInput).length>0,this.isSpeakerAvailable=n.default.getAvailableDevices(e,i.AVDeviceType.AudioOutput).length>0}}var d=new((0,o.defineModel)(l));t.default=d},6339:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CALL_TYPES=void 0;var s=r(a(61247)),i=a(35205);t.CALL_TYPES={VOICE:"VOICE",VIDEO:"VIDEO"};class n extends s.default{constructor(...e){super(...e),this.callId=(0,s.session)(),this.state=(0,s.session)(i.CALL_UI_STATES.NONE),this.from=(0,s.session)(),this.to=(0,s.session)(),this.type=(0,s.session)(),this.muted=(0,s.session)(),this.peerMuted=(0,s.session)(),this.speaker=(0,s.session)(),this.outgoing=(0,s.session)(),this.startTime=(0,s.session)(),this.showFullscreenCallView=(0,s.session)(!1),this.showCallStatusBar=(0,s.session)(!1),this.externalInputAvailable=(0,s.session)(),this.interrupted=(0,s.session)(),this.peerBusy=(0,s.session)(),this.peerVideoState=(0,s.session)(),this.voipWindowId=(0,s.session)(),this.isGroup=(0,s.session)(),this.groupCallParticipants=(0,s.session)()}onStateChange(){}onAudioOutputChange(){}overrideOutputRoute(){return Promise.resolve()}}t.default=n,n.Proxy="callUi"},51269:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OUTPUT_DEVICES",{enumerable:!0,get:function(){return s.OUTPUT_DEVICES}}),Object.defineProperty(t,"CALL_TYPES",{enumerable:!0,get:function(){return i.CALL_TYPES}}),Object.defineProperty(t,"CALL_UI_STATES",{enumerable:!0,get:function(){return o.CALL_UI_STATES}}),t.default=void 0;var s=a(97844),i=r(a(6339)),n=a(61247),o=a(35205),l=new((0,n.defineModel)(i.default));t.default=l},9106:(e,t,a)=>{"use strict";var r=a(14859);t.Z=function(){!l.default.supportsFeature(l.default.F.MD_BACKEND)&&n.default.protoVersion&&E.default.clearBPQueue().catch((()=>{}));(0,c.clearAllMemoizeCache)(),n.default.delete(),h.default.delete(),p.default.delete(),f.default.delete(),v.default.delete(),S.default.delete(),E.default.delete(),C(s.default),C(m.default),_.default.forEach((e=>{C(e.stickers)})),C(_.default);var e=["Chat","StatusV3","StickerPack","Sticker"];Object.keys(i.default).forEach((t=>{e.includes(t)||C(i.default[t])})),(0,u.delistAndDeleteAllMedia)(),(0,o.clearAllTemporaryStorageData)(),d.default.clear(),n.default.blockStoreAdds=!0};var s=r(a(43334)),i=r(a(61029)),n=r(a(52737)),o=a(95595),l=r(a(18120)),d=r(a(54146)),u=a(53882),c=a(50041),h=r(a(11680)),f=r(a(72424)),p=r(a(2734)),m=r(a(57185)),_=r(a(48967)),v=r(a(17026)),g=a(11419),E=r(a(76022)),S=r(a(62325));function C(e){var t=[...e.models];e.reset(),t.forEach((e=>{(0,g.isFunction)(e.delete)&&e.delete()})),e.delete()}},61029:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(79148)),i=r(a(75472)),n=r(a(89216)),o=r(a(79504)),l=r(a(65468)),d=r(a(43334)),u=r(a(23109)),c=r(a(7470)),h=r(a(19744)),f=r(a(61311)),p=r(a(99922)),m=r(a(23539)),_=r(a(84383)),v=r(a(58885)),g=r(a(92313)),E=r(a(85059)),S=r(a(46937)),C=r(a(99098)),y=r(a(15118)),b=r(a(75537)),T=r(a(67110)),M=r(a(49569)),N=r(a(72852)),I=r(a(63095)),P=r(a(47805)),A=r(a(76019)),O=r(a(57185)),D=r(a(93771)),w=r(a(84517)),R={Blocklist:s.default,BusinessCategoryResult:i.default,BusinessProfile:n.default,Call:o.default,Catalog:l.default,Chat:d.default,ChatPreference:u.default,Contact:c.default,ConversionTuple:h.default,EmojiVariant:f.default,GroupMetadata:p.default,Label:m.default,LiveLocation:_.default,Msg:v.default,MsgInfo:g.default,Mute:E.default,Order:S.default,Presence:C.default,ProfilePicThumb:y.default,QuickReply:b.default,RecentEmoji:T.default,RecentSticker:M.default,StarredGifMsg:N.default,StarredMsg:I.default,StarredSticker:P.default,Status:A.default,StatusV3:O.default,Sticker:D.default,StickerSearch:w.default};t.default=R},16804:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(54019)),n=s(a(46774)),o=s(a(43334)),l=s(a(84840)),d=a(95595),u=s(a(99922)),c=r(a(12767));class h extends i.default{constructor(e,t){super(),this.stale=!1,this.add(e,{silent:!0}),this.contact=t,this.listenTo(u.default,"group_participant_change_".concat((0,d.getMaybeMeUser)().toString()),this.updateCommonGroups),this.listenTo(u.default,"group_participant_change_".concat(this.contact.toString()),this.updateCommonGroups),this.listenTo(c.default,"change:stream",(()=>{c.default.stream===c.STREAM.DISCONNECTED&&(this.stale=!0)}))}updateCommonGroups(e){var t=u.default.assertGet(e).participants,a=(0,d.getMaybeMeUser)();this.get(e)?t.get(this.contact)&&t.get(a)||this.remove(e):t.get(this.contact)&&t.get(a)&&this.add(o.default.assertGet(e))}}t.default=h,h.model=n.default,h.comparator=l.default},55962:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(61247));class i extends s.default{constructor(...e){super(...e),this.id=(0,s.prop)(),this.variant=(0,s.prop)()}}i.Proxy="emojiVariant";var n=(0,s.defineModel)(i);t.default=n},61311:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmojiVariantCollection=void 0;var i=s(a(54019)),n=r(a(12396)),o=r(a(55962));class l extends i.default{setVariant(e,t){var a=n.default.getSkinToneBase(e);if(!a)throw new Error("attempt to store variantless emoji");this.gadd({id:a,variant:t})}getVariant(e){if(n.default.getSkinToneBase(e)){var t=this.get(e);return t?n.default.normalizeEmoji(t.variant):null}throw new Error("attempt to get variantless emoji")}getVariantIfExists(e){if(n.default.getSkinToneBase(e)){var t=this.get(e);return t?n.default.normalizeEmoji(t.variant):null}return null}}t.EmojiVariantCollection=l,l.model=o.default,l.cachePolicy={id:"emoji_variant_collection",policy:i.CACHE_POLICY.LOAD,delay:1e3};var d=new l;t.default=d},92803:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(54019)),i=r(a(43334)),n=a(19741),o=r(a(40210)),l=r(a(27e3)),d=r(a(58885));class u extends s.default{constructor(e){super(),this.hasMoreMsgs=!0,this.resultPage=0,this.searchPromise=null,this.searchTerm=null,this.searchLabel=null,this.updateFtsAfterMsgLabelUpdate=()=>{if(this.currentLabelSearch){var e=this.filter((e=>!e.labels||!e.labels.includes(this.currentLabelSearch)));this.remove(e,{silent:!0})}};var t=e?e.msgs:d.default;this.listenTo(t,"remove_msgs",(e=>{this.remove(e,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")})),this.listenTo(i.default,"remove",(e=>{var t=[];this.forEach((a=>{a.chat===e&&t.push(a)})),this.remove(t,{silent:!0}).filter((e=>!!e)).length&&this.trigger("bulk_remove")}))}delete(e){e&&this.stopListening(),super.delete()}resetSearch(){this.hasMoreMsgs=!0,this.resultPage=0,this.searchTerm=null,this.searchPromise&&this.searchPromise.cancel()}search({chat:e,count:t,filter:a={},searchTerm:r}){var s="".concat(r,"__").concat(a.label||a.kind||"");this.currentLabelSearch=a.label;var i=!1;this.searchTerm!==s?(this.searchTerm&&0===r.indexOf(this.searchTerm)?i=!0:(this.searchTerm=s,this.delete()),this.resultPage=0,this.hasMoreMsgs=!0):i=!0;var l,u=new o.default.UiAction({uiActionType:o.default.UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:i});if(this.searchPromise){if(this.searchTerm===s)return this.searchPromise;this.searchPromise.cancel()}return l=e?e.fts(r,++this.resultPage,t):d.default.search(r,++this.resultPage,t,void 0,a),this.searchPromise=l.cancellable().then((e=>(e.eof&&(this.hasMoreMsgs=!1),this.searchTerm!==s&&this.delete(),this.searchTerm=s,e.messages&&this.add(e.messages.filter((e=>!e.asRevoked))),u.markUiActionT(),u.commit(),e))).catchTypes(n.WebdDrop,Promise.CancellationError,(()=>{})).finally((()=>{this.searchPromise=null,this.trigger("searchPromise_update")})),this.trigger("searchPromise_update"),this.searchPromise}}t.default=u,u.model=l.default},74527:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(70417)),n=r(a(61247)),o=s(a(22632)),l=s(a(24762));class d extends n.default{constructor(...e){super(...e),this.id=(0,n.prop)(),this.products=(0,n.prop)(),this.itemCount=(0,n.prop)(),this.subtotal=(0,n.prop)(),this.tax=(0,n.prop)(),this.total=(0,n.prop)(),this.currency=(0,n.prop)(),this.createdAt=(0,n.prop)(),this.sellerJid=(0,n.prop)(),this.totalItemCount=(0,n.derived)(this._totalItemCount,["products"])}_totalItemCount(){return this.products.reduce(((e,t)=>e+t.quantity),0)}initialize(){super.initialize(),this.orderItemCollection=new l.default,this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()}triggerItemCollectionUpdate(){this.orderItemCollection.add(this.products.map((e=>new o.default((0,i.default)({},e)))),{merge:!0})}getCollection(){return a(46937).default}}d.Proxy="order";var u=(0,n.defineModel)(d);t.default=u},46937:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderCollection=void 0;var s=r(a(70417)),i=r(a(54019)),n=r(a(74527)),o=a(47296);class l extends i.default{constructor(e,t){super(),this.width=80,this.height=80,null!=e&&(this.width=e),null!=t&&(this.height=t)}findOrder(e,t,a){var r=this.get(e);return null!=r?Promise.resolve(r):this._queryOrder(e,t,a)}_queryOrder(e,t,a){return(0,o.queryOrder)(e,this.width,this.height,a).then((a=>{super.add((0,s.default)({id:e,fetchedFromServer:!0,sellerJid:t},a));var r=this.get(e);if(null!=r)return Promise.resolve(r)}))}}t.OrderCollection=l,l.model=n.default,l.staleCollection=!0;var d=new l;t.default=d},22632:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(61247)),n=r(a(8603)),o=a(96645);class l extends i.default{constructor(...e){super(...e),this.id=(0,i.prop)(),this.price=(0,i.prop)(),this.currency=(0,i.prop)(),this.name=(0,i.prop)(),this.quantity=(0,i.prop)(),this.thumbnailId=(0,i.prop)(),this.thumbnailUrl=(0,i.prop)(),this.mediaData=(0,i.derived)(this._mediaData,["thumbnailUrl"])}_mediaData(){return new n.default({mediaStage:null!=this.thumbnailUrl?o.MEDIA_DATA_STAGE.RESOLVED:o.MEDIA_DATA_STAGE.PREPARING,renderableUrl:null!=this.thumbnailUrl?"".concat(this.thumbnailUrl):null})}getCollection(){return a(46937).default}}l.Proxy="order-item";var d=(0,i.defineModel)(l);t.default=d},24762:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderItemCollection=void 0;var s=r(a(54019)),i=r(a(22632));class n extends s.default{}t.OrderItemCollection=n,n.model=i.default;var o=n;t.default=o},52918:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActivePrice=t.isSalePriceActive=void 0;var a=e=>null!=e.salePriceAmount1000&&(null==e.salePriceStartDate||e.salePriceStartDate<=Date.now())&&(null==e.salePriceEndDate||e.salePriceEndDate>Date.now());t.isSalePriceActive=a;t.getActivePrice=e=>a(e)?e.salePriceAmount1000:e.priceAmount1000},50751:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PttPrefs=void 0;var i=s(a(27875)),n=a(39329),o=r(a(61247)),l=a(95595),d=s(a(72424)),u=[1,1.5,2];class c extends o.default{constructor(...e){super(...e),this.id=(0,o.prop)(),this.playbackRate=(0,o.prop)(1),this.playbackControlMessageId=(0,o.prop)(null)}initialize(){o.default.prototype.initialize.call(this),this._restorePlaybackRate(),this.listenTo(d.default,"change:pttPlaybackSpeedEnabled",(()=>{this._restorePlaybackRate()})),this.on("change:playbackRate",((e,t)=>{(0,l.setPttPlaybackRate)(t)}))}setPlayingMessage(e){this._setPlayingMessage(e);var t=()=>{this._playingMessageId===e.toString()&&this._setPlayingMessage(null)};return()=>{var e;null===(e=t)||void 0===e||e(),t=null}}_setPlayingMessage(e){var t;this._playingMessageId=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:null,null!=this._playingMessageId?(h.cancel(),this.playbackControlMessageId=this._playingMessageId):this._scheduleClearPlaybackRateControl()}_restorePlaybackRate(){this.playbackRate=d.default.pttPlaybackSpeedEnabled?(0,l.getPttPlaybackRate)():1}advancePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!0)}increasePlaybackRateFor(e){this._changePlaybackRateFor(e,1,!1)}decreasePlaybackRateFor(e){this._changePlaybackRateFor(e,-1,!1)}_changePlaybackRateFor(e,t,a){var r=u.indexOf(this.playbackRate),s=a?(r+t+u.length)%u.length:(0,i.default)(r+t,0,u.length-1);this.playbackRate=u[s],null==this._playingMessageId&&(this.playbackControlMessageId=e.toString(),this._scheduleClearPlaybackRateControl())}_scheduleClearPlaybackRateControl(){var{playbackControlMessageId:e}=this;null!=e&&h.onOrAfter(d.default.pttPlaybackSpeedHideDelay,e)}delayClearPlaybackRateControl(){if(h.isScheduled()){var{playbackControlMessageId:e}=this;null!=e&&h.onOrAfter(d.default.pttPlaybackSpeedHideDelay,e)}}}t.PttPrefs=c,c.Proxy="pttPrefs";var h=new n.ShiftTimer((e=>{e===f.playbackControlMessageId&&(f.playbackControlMessageId=null)})),f=new((0,o.defineModel)(c))({id:"1"}),p=f;t.default=p},62761:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showForwarded=function(e){var t=(0,r.unproxy)(e);return t.numTimesForwarded>0&&!t.asRevoked};var r=a(64658)},84517:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerSearchCollection=void 0;var s=r(a(19976)),i=r(a(52954)),n=r(a(54019)),o=(a(12097),r(a(12396))),l=r(a(11632)),d=a(18920),u=r(a(86484));function c(){var e=(0,s.default)(["Sticker search request failed: error: ",""]);return c=function(){return e},e}function h(){var e=(0,s.default)(["StickerMoodCollection cache was invalid, re-searching."]);return h=function(){return e},e}var f={HAPPY:["","","","","","","","","",""],LOVE:["","","","","","","","","","","","","","","","","","","","","",""],GREETINGS:["","","","","","","","","","","","","","","","","","","","","",""],SAD:["","","","","","","","","","","","","","","","","",""],ANGRY:["","","","","","",""],CELEBRATE:["","","","",""]};class p extends n.default{constructor(...e){super(...e),this._cache=new Map,this._hasFetched=!1,this._isFetching=!0}isFetchingData(){return this._isFetching}hasFetchedData(){return this._hasFetched}search(e){var t=()=>super.delete,a=this;return(0,i.default)((function*(){a._lastQuery!==e&&a._hasFetched&&t().call(a);var r=e.trim().toUpperCase();if(a._cache.has(e)){var s=a._cache.get(e);if(null!=s)return a.add(s),void(a._lastQuery=e);__LOG__(2)(h())}var i=[];if(f.hasOwnProperty(r))i.push(...f[r]);else{var n=o.default.containsOnlyEmoji(r)?o.default.splitEmojis(r):(0,l.default)(e);if(null==n||0===n.length)return a._lastQuery=e,void t().call(a);i.push(...n)}a._isFetching=!0;var u=[];try{u=yield(0,d.searchFirstPartyStickers)(i)}catch(e){return __LOG__(3,void 0,void 0,!0)(c(),e),SEND_LOGS("sticker-search-request-failed"),void(a._isFetching=!1)}a._cache.set(e,u),a._isFetching=!1,a._hasFetched=!0,a._lastQuery=e,a.add(u)}))()}searchMood(e){return this.search(e)}delete(){super.delete(),this._cache=new Map,this._hasFetched=!1,this._isFetching=!1}}t.StickerSearchCollection=p,p.model=u.default;var m=new p;t.default=m},95361:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return m.apply(this,arguments)};var s=r(a(70417)),i=r(a(52954)),n=r(a(43334)),o=r(a(46774)),l=a(35855),d=a(39778),u=a(57385),c=r(a(72424));function h(e){if(null==e)return!0;if(!e.isApi)return!0;var{actualActors:t,hostStorage:a}=e;return!(null!=t&&"self"!==t||null!=a&&"on_premise"!==a)}var f={low:{self:{on_premise:"blue_msg_self_premise_unverified",facebook:"blue_msg_self_fb_unverified"},bsp:{on_premise:"blue_msg_bsp_premise_unverified",facebook:"blue_msg_bsp_fb_unverified"}},high:{self:{on_premise:"blue_msg_self_premise_verified",facebook:"blue_msg_self_fb_verified"},bsp:{on_premise:"blue_msg_bsp_premise_verified",facebook:"blue_msg_bsp_fb_verified"}}};function p(e){if(!e)return"blue_msg_self_premise_unverified";var{level:t}=e,a="unknown"===t?"low":t,r=e.actualActors||"self",s=e.hostStorage||"on_premise";return f[a][r][s]}function m(){return(m=(0,i.default)((function*(e){var t,{wid:a}=e,r=new o.default({id:a});yield(0,l.getTable)().create((0,s.default)((0,s.default)({},r.toJSON()),{},{id:a.toString()})),n.default.add(r);var i=[],f=null===(t=e.bizInfo)||void 0===t?void 0:t.verifiedName;if((!e.biz||h(f))&&i.push((0,u.genEncryptNotificationMsg)(a)),e.biz&&c.default.bspSystemMessageEnabled){var m=f&&"high"===f.level&&f.name?[f.name]:[];i.push((0,u.genTealNotificationTemplateMsg)(a,p(f),m))}return yield Promise.all(i.map((e=>(0,d.handleSingleMsgMD)(e.from,e)))),r}))).apply(this,arguments)}},89083:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.canBeGroupedAsAlbum=function(e,t){return(e.isGroupMsg?i.default.equals(e.author,t.author):i.default.equals(e.from,t.from))&&e.isForwarded===t.isForwarded&&t.t-e.t<=s.default.ALBUM_DIFF_INTERVAL},t.canBeGroupedWithNext=function(e,t){if(e.isNotification||t.isNotification)return!1;return e.isGroupMsg?i.default.equals(e.author,t.author)&&e.isSentByMe===t.isSentByMe:i.default.equals(e.from,t.from)};var s=r(a(50935)),i=r(a(68384))},16211:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.animateConversationPanel=function(e,t){return(0,s.default)(e,{scaleX:[1,t]},{duration:300,easing:[.1,.82,.25,1]}),1!==t};var s=r(a(91378))},29233:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);t.Z=function({cmd:e,untypedData:t,isExternal:a}){var r=a?f.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_EXTERNAL:f.default.DEEP_LINK_OPEN_FROM.DEEP_LINK_WA_LINK_CLICK;switch(e){case c.APICmd.GROUP_INVITE:return l.default.closeStatusViewer(),l.default.openModal(n.createElement(u.default,{groupCode:t.code})),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_GROUP_INVITE}).commit(),!0;case c.APICmd.CATALOG:var{catalogOwnerJid:s}=t;return function(e){var t=(new m.default).toString();l.default.openModal(n.createElement(p.default,{chatId:(0,S.createWid)(e),onSuccess:a=>{window.setTimeout((()=>{l.default.openDrawerRight(n.createElement(_.default,{chat:a,sessionId:t,catalogOwnerJid:e}),"slide-left",E.default.Manager.top)}),100)},msgText:null}),{transition:"modal-flow"})}(s),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_CATALOG}).commit(),!0;case c.APICmd.PRODUCT:var{businessOwnerJid:C,productId:y}=t;return function(e,t){var a=(new m.default).toString();(0,h.logProductDeepLinkOpen)({catalogOwnerJid:e,catalogSessionId:a}),l.default.openModal(n.createElement(p.default,{chatId:(0,S.createWid)(e),onSuccess:r=>{window.setTimeout((()=>{l.default.openDrawerRight(n.createElement(_.default,{chat:r,productInfo:{productId:t,businessOwnerJid:e},refreshCarousel:!0,sessionId:a}),"slide-left",E.default.Manager.top)}),100)},msgText:null}),{transition:"modal-flow"})}(C,y),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_PRODUCT}).commit(),!0;case c.APICmd.MSG_SEND:l.default.closeStatusViewer();var b=t,{text:T,phone:M,conversionTuple:N}=b,I=g.default.ctwaContextCompose?b.ctwaContextLinkData:void 0;return M?(l.default.openModal(n.createElement(p.default,{chatId:(0,S.createWid)(M),msgText:T,onSuccess:e=>{N&&d.default.add((0,i.default)((0,i.default)({},N),{},{id:e.id,timestamp:o.default.globalUnixTime()}),{merge:!0}),T&&(e.urlText=!0),e.urlNumber=!0},ctwaContextLinkData:I}),{transition:"modal-flow"}),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:I?f.default.DEEP_LINK_TYPE.DEEP_LINK_CTWA:f.default.DEEP_LINK_TYPE.DEEP_LINK_CHAT}).commit()):(l.default.openModal(n.createElement(v.default,{msgText:T,urlText:!0}),{transition:"modal-flow"}),new f.default.DeepLinkOpen({deepLinkOpenFrom:r,deepLinkType:f.default.DEEP_LINK_TYPE.DEEP_LINK_MSG_FORWARD}).commit()),!0;default:return!1}};var i=s(a(70417)),n=r(a(2784)),o=s(a(19899)),l=s(a(79711)),d=s(a(19744)),u=s(a(24910)),c=a(25675),h=a(83974),f=s(a(40210)),p=s(a(33296)),m=s(a(55043)),_=s(a(13531)),v=s(a(20661)),g=s(a(72424)),E=s(a(20398)),S=a(75637)},81022:(e,t)=>{"use strict";function a(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r=a){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every(((e,a)=>r(e,t[a])))}},86638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r=!1;for(a=0;a<e.length;a++)if(e[a]===t){r=!0;break}if(r){var s=e[a];e.splice(a,1),e.unshift(s)}}},97844:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AudioSession=t.OUTPUT_DEVICES=t.AUDIO_EVENTS=void 0;var s=r(a(28267));t.AUDIO_EVENTS={OUTPUT_ROUTES_CHANGED:"OUTPUT_ROUTES_CHANGED"};t.OUTPUT_DEVICES={UNKNOWN:0,LINE_OUT:1,HEADPHONES:2,BLUETOOTH:3,INTERNAL_RECEIVER:4,INTERAL_SPEAKER:5,HDMI:6,REMOTE:7,BLUETOOTH_LE:8,BLUETOOTH_HANDS_FREE:9,USB:10,CAR:11};t.AudioSession=class{constructor(){}startUse(){}endUse(){}};class i extends s.default{constructor(){super()}startAudioSession(){}isRoutingToOutput(){return!1}get isRoutingToSpeaker(){return null}get outputRoutes(){return[]}get isBluetoothInputAvailable(){return null}overrideOutputRoute(){return Promise.resolve()}}var n=new i;t.default=n},14345:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getBizPrivacyInfoString=function(e,t,a){switch(e){case i.WebMessageInfoBizPrivacyStatus.E2EE:return a?s.default.t(268,{businessName:t}):s.default.t(267,{businessName:t});case i.WebMessageInfoBizPrivacyStatus.FB:return s.default.t(269,{businessName:t});case i.WebMessageInfoBizPrivacyStatus.BSP:return s.default.t(265,{businessName:t});case i.WebMessageInfoBizPrivacyStatus.BSP_AND_FB:return s.default.t(266,{businessName:t})}};var s=r(a(17957)),i=a(21617)},97990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){if(!e)return;var r=[];r.push(e);for(;r.length;){var s=r.shift();if(a(s))return s;r=r.concat(t(s))}}},53388:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(50935)),i=window.matchMedia("\nonly screen and (max-width: ".concat(s.default.LAYOUT_2COLUMNS_MAX_WIDTH,"px)\n")),n={column:i.matches?2:3};i.addListener((function(e){var t=e.matches?2:3;if(n.column!==t){n.column=t;var a=document.createEvent("Event");a.initEvent("columnChange",!0,!0),window.dispatchEvent(a)}}));var o=n;t.default=o},17029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new class{init(){}get(){return{textsize:0}}set(){}};t.default=a},22885:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=3988292384;function s(e,t){var s=t;for(a||(a=function(){for(var e=new Uint32Array(256),t=0,a=0,s=0;t<256;a=++t){for(s=0;s<8;++s)a=1&a?a>>>1^r:a>>>1;e[t]=a}return e}());e.size();)s=a[255&(s^e.readUint8())]^s>>>8;return~s>>>0}t.default=(e,t=4294967295)=>e.peek(s,t)},37356:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.format=function(e,t){return d(o(),e,t)},t.formatToParts=function(e,t){var a=o(),r=l(a),s=u(a,e),i=d(a,e,t).replace(s,"").trim(),n=i.indexOf(r),c=-1===n?i:i.substring(0,n),h=-1===n?"":i.substring(n);return{symbol:s,integer:c,decimal:h}},t.formatLocalSymbol=function(e){return u(n[e],e)},t.valueFromString=c,t.parseValueFromString=h,t.validatePriceString=function(e,t,a,r){var i=o(),n=void 0!==s.CURRENCY_DIGITS[e]?s.CURRENCY_DIGITS[e]:s.DEFAULT_DIGITS,d=c(e,t),u=t.replace(/\D+$/g,""),h=l(i);if(null!=a&&d<a)return!1;if(null!=r&&d>r)return!1;if(isNaN(d)||u!==t||(t.split(h)[1]||"").length>n)return!1;return!0},t.currencyForCountryShortcode=function(e){var t=s.REGION_TO_CURRENCY[e.toUpperCase()];return(null==t?void 0:t.length)>0?t[0]:s.DEFAULT_CURRENCY};var s=a(43577),i=r(a(17957)),n={IDR:"in-ID",MXN:"es-MX",INR:"en-IN"},o=()=>[i.default.getFullLocale(),i.default.getLocale()].filter(Boolean);function l(e){return new Intl.NumberFormat(e).format(1.1).substring(1,2)}function d(e,t,a){return new Intl.NumberFormat(e,{style:"currency",currency:t}).format(a/1e3)}function u(e,t){return d(e,t,0).replace(/\d+([,.]\d+)?/g,"").trim()}function c(e,t){var a=o(),r=u(a,e),s=function(e){return new Intl.NumberFormat(e).format(1e4).substring(2,3)}(a);return h(t,r,l(a),s)}function h(e,t,a,r){var s=e.replace(t,"").trim().split(r).join(""),i=parseFloat(s.replace(a,".")||"0");return Math.round(1e3*i)}},43577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REGION_TO_CURRENCY=t.CURRENCY_DIGITS=t.DEFAULT_DIGITS=t.MAX_FRACTION_DIGITS=t.DEFAULT_CURRENCY=void 0;t.DEFAULT_CURRENCY="USD";t.MAX_FRACTION_DIGITS=4;t.DEFAULT_DIGITS=2;t.CURRENCY_DIGITS={ADP:0,AFN:0,ALL:0,BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,ESP:0,GNF:0,IQD:0,IRR:0,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MRO:0,OMR:3,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};t.REGION_TO_CURRENCY={AC:["SHP"],AD:["EUR"],AE:["AED"],AF:["AFN"],AG:["XCD"],AI:["XCD"],AL:["ALL"],AM:["AMD"],AO:["AOA"],AR:["ARS"],AS:["USD"],AT:["EUR"],AU:["AUD"],AW:["AWG"],AX:["EUR"],AZ:["AZN"],BA:["BAM"],BB:["BBD"],BD:["BDT"],BE:["EUR"],BF:["XOF"],BG:["BGN"],BH:["BHD"],BI:["BIF"],BJ:["XOF"],BL:["EUR"],BM:["BMD"],BN:["BND"],BO:["BOB"],BQ:["USD"],BR:["BRL"],BS:["BSD"],BT:["BTN","INR"],BV:["NOK"],BW:["BWP"],BY:["BYN"],BZ:["BZD"],CA:["CAD"],CC:["AUD"],CD:["CDF"],CF:["XAF"],CG:["XAF"],CH:["CHF"],CI:["XOF"],CK:["NZD"],CL:["CLP"],CM:["XAF"],CN:["CNY"],CO:["COP"],CR:["CRC"],CU:["CUP","CUC"],CV:["CVE"],CW:["ANG"],CX:["AUD"],CY:["EUR"],CZ:["CZK"],DE:["EUR"],DG:["USD"],DJ:["DJF"],DK:["DKK"],DM:["XCD"],DO:["DOP"],DZ:["DZD"],EA:["EUR"],EC:["USD"],EE:["EUR"],EG:["EGP"],EH:["MAD"],ER:["ERN"],ES:["EUR"],ET:["ETB"],EU:["EUR"],FI:["EUR"],FJ:["FJD"],FK:["FKP"],FM:["USD"],FO:["DKK"],FR:["EUR"],GA:["XAF"],GB:["GBP"],GD:["XCD"],GE:["GEL"],GF:["EUR"],GG:["GBP"],GH:["GHS"],GI:["GIP"],GL:["DKK"],GM:["GMD"],GN:["GNF"],GP:["EUR"],GQ:["XAF"],GR:["EUR"],GS:["GBP"],GT:["GTQ"],GU:["USD"],GW:["XOF"],GY:["GYD"],HK:["HKD"],HM:["AUD"],HN:["HNL"],HR:["HRK"],HT:["HTG","USD"],HU:["HUF"],IC:["EUR"],ID:["IDR"],IE:["EUR"],IL:["ILS"],IM:["GBP"],IN:["INR"],IO:["USD"],IQ:["IQD"],IR:["IRR"],IS:["ISK"],IT:["EUR"],JE:["GBP"],JM:["JMD"],JO:["JOD"],JP:["JPY"],KE:["KES"],KG:["KGS"],KH:["KHR"],KI:["AUD"],KM:["KMF"],KN:["XCD"],KP:["KPW"],KR:["KRW"],KW:["KWD"],KY:["KYD"],KZ:["KZT"],LA:["LAK"],LB:["LBP"],LC:["XCD"],LI:["CHF"],LK:["LKR"],LR:["LRD"],LS:["ZAR","LSL"],LT:["EUR"],LU:["EUR"],LV:["EUR"],LY:["LYD"],MA:["MAD"],MC:["EUR"],MD:["MDL"],ME:["EUR"],MF:["EUR"],MG:["MGA"],MH:["USD"],MK:["MKD"],ML:["XOF"],MM:["MMK"],MN:["MNT"],MO:["MOP"],MP:["USD"],MQ:["EUR"],MR:["MRU"],MS:["XCD"],MT:["EUR"],MU:["MUR"],MV:["MVR"],MW:["MWK"],MX:["MXN"],MY:["MYR"],MZ:["MZN"],NA:["NAD","ZAR"],NC:["XPF"],NE:["XOF"],NF:["AUD"],NG:["NGN"],NI:["NIO"],NL:["EUR"],NO:["NOK"],NP:["NPR"],NR:["AUD"],NU:["NZD"],NZ:["NZD"],OM:["OMR"],PA:["PAB","USD"],PE:["PEN"],PF:["XPF"],PG:["PGK"],PH:["PHP"],PK:["PKR"],PL:["PLN"],PM:["EUR"],PN:["NZD"],PR:["USD"],PS:["ILS","JOD"],PT:["EUR"],PW:["USD"],PY:["PYG"],QA:["QAR"],RE:["EUR"],RO:["RON"],RS:["RSD"],RU:["RUB"],RW:["RWF"],SA:["SAR"],SB:["SBD"],SC:["SCR"],SD:["SDG"],SE:["SEK"],SG:["SGD"],SH:["SHP"],SI:["EUR"],SJ:["NOK"],SK:["EUR"],SL:["SLL"],SM:["EUR"],SN:["XOF"],SO:["SOS"],SR:["SRD"],SS:["SSP"],ST:["STN"],SV:["USD"],SX:["ANG"],SY:["SYP"],SZ:["SZL"],TA:["GBP"],TC:["USD"],TD:["XAF"],TF:["EUR"],TG:["XOF"],TH:["THB"],TJ:["TJS"],TK:["NZD"],TL:["USD"],TM:["TMT"],TN:["TND"],TO:["TOP"],TR:["TRY"],TT:["TTD"],TV:["AUD"],TW:["TWD"],TZ:["TZS"],UA:["UAH"],UG:["UGX"],UM:["USD"],US:["USD"],UY:["UYU"],UZ:["UZS"],VA:["EUR"],VC:["XCD"],VE:["VES"],VG:["USD"],VI:["USD"],VN:["VND"],VU:["VUV"],WF:["XPF"],WS:["WST"],XK:["EUR"],YE:["YER"],YT:["EUR"],ZA:["ZAR"],ZM:["ZMW"],ZW:["USD"]}},28515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/\r\n/g;t.default=class{constructor(e){this.hasText=()=>this.hasType("text/plain"),this.hasType=e=>this.types.includes(e),this.data=e,this.types=e.types?Array.isArray(e.types)?e.types:Object.keys(e.types).map((t=>e.types[t])):[]}getItems(){if(this.data.items)return Array.prototype.slice.call(this.data.items);var e=this._getFileTypes();return this.types.map((t=>({type:t,data:this.data.getData(t),kind:e.includes(t)?"string":"file"})))}_getFileTypes(){return Array.prototype.slice.call(this.data.files).map((({type:e})=>e))}getText(e){return this._getText(e).then((e=>e?e.replace(a,"\n"):null))}_getText(e){var t=e||[];0===t.length&&t.push("text/plain");var a,{data:r}=this;if(r.getData)return t.some((e=>{if(r.getData(e))return a=r.getData(e),!0})),Promise.resolve(a);var s,i,n,o=(s=this.data.items,i=t,n=Array.from(s),i.reduce(((e,t)=>{var a=n.find((e=>e.type===t));return a&&e.push(a),e}),[]));return o.length?Promise.all(o.map((e=>new Promise((t=>e.getAsString(t)))))).then((e=>e.find((e=>e.length)))):Promise.resolve()}getFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).filter((({kind:e})=>"file"===e)).map((e=>e.getAsFile())).filter((e=>!!e)):Array.prototype.slice.call(this.data.files||[])}getData(e){return this.data.getData(e)}hasFiles(){return this.data.items?Array.prototype.slice.call(this.data.items).some((({kind:e})=>"file"===e)):!!Array.prototype.slice.call(this.data.files||[]).length}}},79186:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.startOfDaySkew;if(void 0!==t&&t>i.default.skew-30&&t<i.default.skew+30)return e.startOfDay;return e.startOfDaySkew=i.default.skew,e.startOfDay=s.default.unix(e.t+i.default.skew).startOf("day").unix()};var s=r(a(19034)),i=r(a(19899))},62436:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.scrollIntoViewIfNeeded=function(e,t=!0,a){if(e.scrollIntoViewIfNeeded&&(0,i.isFunction)(e.scrollIntoViewIfNeeded))return e.scrollIntoViewIfNeeded(t);var r=o(a||e.parentNode),s=window.getComputedStyle(r,null),n=parseInt(s.getPropertyValue("border-top-width"),10),l=e.offsetTop-r.offsetTop<r.scrollTop,d=e.offsetTop-r.offsetTop+e.clientHeight-n>r.scrollTop+r.clientHeight;(l||d)&&t&&(r.scrollTop=e.offsetTop-r.offsetTop-r.clientHeight/2-n+e.clientHeight/2);!l&&!d||t||e.scrollIntoView(l&&!d);return!(l||d)},t.scrollIntoView=function(e,t=!0,a){var r=o(a||e.parentNode),s=window.getComputedStyle(r,null),i=parseInt(s.getPropertyValue("border-top-width"),10),n=e.offsetTop-r.offsetTop<r.scrollTop,l=e.offsetTop-r.offsetTop+e.clientHeight-i>r.scrollTop+r.clientHeight;t?r.scrollTop=e.offsetTop-r.offsetTop-r.clientHeight/2-i+e.clientHeight/2:e.scrollIntoView(n&&!l);return!(n||l)},t.scrollAt=function(e,t,a={}){var r=o(t||e.offsetParent),s=a.pos||"center",i=null!=a.duration&&0!==a.duration?a.duration:1e3,l=a.offset||0;switch(s){case"top":return r.scrollTop=e.offsetTop+l,Promise.resolve();case"bottom":return r.scrollTop=e.offsetTop+e.clientHeight-r.clientHeight,Promise.resolve();case"center":return a.animate?((0,n.default)(e,"stop"),(0,n.default)(r,"stop"),(0,n.default)(e,"scroll",{duration:i,container:r,offset:(e.clientHeight-r.clientHeight)/2,easing:a.easing})):(r.scrollTop=e.offsetTop+e.clientHeight/2-r.clientHeight/2,Promise.resolve());case"offset":return a.animate?((0,n.default)(e,"stop"),(0,n.default)(r,"stop"),(0,n.default)(e,"scroll",{duration:i,container:r,offset:-l,easing:a.easing})):(r.scrollTop=e.offsetTop-l,Promise.resolve())}return Promise.resolve()},t.sanitizeNoticeText=function(e){return s.default.sanitize(e,{ALLOWED_TAGS:["b","i","a","#text"],ALLOWED_ATTR:["href"],KEEP_CONTENT:!1})},t.sanitizeNoticeSVG=function(e){return s.default.sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})};var s=r(a(35368)),i=a(11419),n=r(a(91378));function o(e){if(e&&e instanceof HTMLElement)return e;throw new Error("utils:DOM parent not defined or is not a valid HTMLElement")}},6016:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(28267));function n(){var e=(0,s.default)(["Your browser does not support fullscreen API."]);return n=function(){return e},e}function o(){var e=(0,s.default)(["document object does not exist"]);return o=function(){return e},e}function l(){var e=(0,s.default)(["Your browser does not support fullscreen API."]);return l=function(){return e},e}function d(){var e=(0,s.default)(["document object does not exist"]);return d=function(){return e},e}function u(){var e=(0,s.default)(["Your browser does not support fullscreen API."]);return u=function(){return e},e}function c(){var e=(0,s.default)(["document object does not exist"]);return c=function(){return e},e}function h(){var e=(0,s.default)(["Your browser does not support fullscreen API."]);return h=function(){return e},e}function f(){var e=(0,s.default)(["document object does not exist"]);return f=function(){return e},e}function p(){var e=(0,s.default)(["Your browser does not support fullscreen API."]);return p=function(){return e},e}function m(){var e=(0,s.default)(["document object does not exist"]);return m=function(){return e},e}function _(){var e=(0,s.default)(["Your browser does not support fullscreen API."]);return _=function(){return e},e}function v(){var e=(0,s.default)(["The element requesting fullscreen is null or undefined."]);return v=function(){return e},e}var g,E,S={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},C=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],y=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],b=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","msfullscreenchange","msfullscreenerror"];class T extends i.default{constructor(){if(super(),this.requestFullscreen=e=>{e?g?e[g[S.requestFullscreen]]():__LOG__(3)(_()):__LOG__(3)(v())},this._fullscreenChangeTrigger=e=>{this.trigger("fullscreen_change",e)},this._fullscreenErrorTrigger=e=>{this.trigger("fullscreen_error",e)},"object"==typeof window&&"object"==typeof window.document){var e=E=window.document;if("fullscreenEnabled"in E?g=Object.keys(S):C[S.fullscreenEnabled]in E?g=C:y[S.fullscreenEnabled]in E?g=y:b[S.fullscreenEnabled]in E&&(g=b),g){var t=g;e.addEventListener(t[S.fullscreenchange],this._fullscreenChangeTrigger),e.addEventListener(t[S.fullscreenerror],this._fullscreenErrorTrigger)}else __LOG__(3)(p())}else __LOG__(3)(m())}get exitFullscreen(){return E?g?E[g[S.exitFullscreen]].bind(E):(__LOG__(3)(h()),()=>{}):(__LOG__(3)(f()),()=>{})}get isFullscreenMode(){return E?g?!!E[g[S.fullscreenElement]]:(__LOG__(3)(u()),!1):(__LOG__(3)(c()),!1)}get fullscreenEnabled(){return E?g?Boolean(E[g[S.fullscreenEnabled]]):(__LOG__(3)(l()),!1):(__LOG__(3)(d()),!1)}get fullscreenElement(){if(E){if(g)return E[g[S.fullscreenElement]];__LOG__(3)(n())}else __LOG__(3)(o())}}var M=new T;t.default=M},76774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=t.parentNode;if(!a)return;if(t.nextSibling)return void a.insertBefore(e,t.nextSibling);return a.appendChild(e),e}},64452:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.parentNode)return;return t.parentNode.insertBefore(e,t),e}},52232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return!1;var a=e.parentElement;if(!a)return!1;var r=t>=0?t:a.childNodes.length+t;return e===a.childNodes[r]}},78185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(e.nodeType===Node.TEXT_NODE&&0===e.textContent.length)}},62139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.parentNode)return;e.parentNode.removeChild(e)}},19117:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var a=t.getRangeAt(0);if(!a.collapsed)return!1;var r=a.endContainer;if(a.startOffset!==function(e){return(0,s.default)(e)?e.textContent.length:e.childNodes.length}(r))return!1;if(e===r)return!0;if(!e.contains(r))return!1;var i=r;do{if(i.nextSibling)return!1;i=i.parentNode}while(i!==e);return!0};var s=r(a(16929))},81857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var a=t.getRangeAt(0);if(!a.collapsed||0!==a.startOffset)return!1;var r=a.startContainer;if(e===r)return!0;if(!e.contains(r))return!1;var s=r;do{if(s.previousSibling)return!1;s=s.parentNode}while(s!==e);return!0}},8347:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=window.getSelection();if(1!==e.rangeCount)return!1;var t=e.getRangeAt(0);return!!t.collapsed&&(e.removeAllRanges(),e.addRange(t),!0)}},58390:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e;if(!a)return;do{a=t===i.NEXT?a.nextSibling:a.previousSibling}while(a&&(0,s.default)(a));return a},t.DIR=void 0;var s=r(a(78185)),i={NEXT:"NEXT",PREV:"PREV"};t.DIR=i},58922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.__playPromise)return e.__playPromise;var t=new Promise(((t,a)=>{function r(a){e.removeEventListener("playing",r),e.removeEventListener("error",s),e.videoHeight&&e.videoWidth||r(a),delete e.__playPromise,t(a)}function s(t){e.removeEventListener("playing",r),e.removeEventListener("error",s),delete e.__playPromise,a(t)}e.addEventListener("playing",r),e.addEventListener("error",s);var i,n=e.play();(i=n)&&"function"==typeof i.then&&(e.removeEventListener("playing",r),e.removeEventListener("error",s),n.then((()=>{delete e.__playPromise,t()})).catch((t=>{delete e.__playPromise,a(t)})))}));return e.__playPromise=t,t}},76533:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e===s)return;s=e;var[t,r,o]=e===i.EMOJI_TYPE.APPLE?[a(29720).Z,a(46847).Z,a(63833).default]:[a(88877).Z,a(16426).Z,a(92840).Z];n.default.configure({emojiType:e,orderedEmojis:t,legacyToEmoji:r,categorizedEmojis:o})};var s,i=a(27703),n=r(a(12396))},63833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SMILEYS_PEOPLE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ANIMALS_NATURE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FOOD_DRINK:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ACTIVITY:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],TRAVEL_PLACES:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],OBJECTS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SYMBOLS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FLAGS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},11632:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,d.default)(e,(0,c.default)(_,"Emoji Trie expected to be loaded."))};var i=s(a(52954)),n=s(a(75652)),o=a(91460),l=s(a(81022)),d=r(a(35962)),u=s(a(17957)),c=s(a(61941)),h=r(a(17026)),f=r(a(82885)),p=s(a(17744)),m=new Set(["ar","bn","cs","de","en","es","fa","fr","gu","he","hi","hu","id","it","mr","ms","nl","pl","pt","pt-BR","ro","ru","sk","th","tr","uk","ur","zh-CN","zh-TW","zh-HK"]),_=null;var v=null,g=[];function E(){var e=(0,n.default)(["en",u.default.getLocale()]).filter((e=>m.has(e)));if(!(0,l.default)(g,e)){g=e;var t=Promise.all(e.map((e=>function(e){return Promise.loop(function(){var t=(0,i.default)((function*(t,r,s){var i=(0,o.delayMs)(f.expBackoff(s,12e4,1e3,.1));return(yield a(48729)("./".concat(e))).default().then((([,e])=>t(e))).catch((()=>i))}));return function(){return t.apply(this,arguments)}}()).catch((()=>({})))}(e)))).then((e=>{v===t&&(_=(0,d.emojiLocaleDictsToTrie)(e))})).catch((()=>{})).finally((()=>{v===t&&(v=null)}));v=t}}u.default.on("locale_change",(()=>{E()})),(0,p.default)(h.default,"change:mode",(()=>h.default.mode===h.StreamMode.MAIN)).then((()=>{E()}))},46847:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#":1,"":1,"*":2,"0":3,"":3,"1":4,"":4,"2":5,"":5,"3":6,"":6,"4":7,"":7,"5":8,"":8,"6":9,"":9,"7":10,"":10,"8":11,"":11,"9":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":80,"":81,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":93,"":94,"":95,"":96,"":97,"":100,"":109,"":110,"":116,"":117,"":118,"":121,"":127,"":130,"":131,"":133,"":154,"":155,"":156,"":158,"":160,"":166,"":177,"":190,"":191,"":192,"":195,"":197,"":198,"":199,"":200,"":202,"":206,"":208,"":211,"":212,"":213,"":216,"":217,"":219,"":220,"":221,"":222,"":224,"":225,"":226,"":227,"":228,"":230,"":232,"":233,"":235,"":237,"":238,"":287,"":297,"":310,"":318,"":320,"":354,"":358,"":366,"":435,"":479,"":479,"":497,"":498,"":499,"":500,"":502,"":504,"":505,"":506,"":507,"":508,"":509,"":510,"":512,"":514,"":515,"":516,"":517,"":518,"":519,"":520,"":522,"":537,"":543,"":562,"":563,"":565,"":566,"":567,"":568,"":569,"":572,"":574,"":575,"":576,"":577,"":579,"":580,"":583,"":584,"":588,"":593,"":594,"":598,"":599,"":600,"":601,"":602,"":603,"":604,"":605,"":607,"":608,"":609,"":612,"":613,"":622,"":623,"":624,"":625,"":626,"":627,"":628,"":630,"":632,"":633,"":638,"":639,"":640,"":641,"":642,"":643,"":649,"":650,"":651,"":652,"":655,"":656,"":657,"":658,"":659,"":660,"":661,"":662,"":671,"":672,"":674,"":675,"":676,"":677,"":678,"":679,"":681,"":682,"":685,"":686,"":687,"":691,"":692,"":693,"":694,"":696,"":700,"":701,"":702,"":703,"":710,"":728,"":747,"":754,"":756,"":829,"":831,"":832,"":834,"":835,"":836,"":837,"":838,"":839,"":840,"":841,"":842,"":844,"":845,"":851,"":852,"":853,"":878,"":879,"":882,"":883,"":885,"":889,"":890,"":891,"":892,"":893,"":897,"":898,"":902,"":904,"":905,"":906,"":909,"":910,"":911,"":912,"":913,"":914,"":915,"":917,"":918,"":919,"":920,"":921,"":922,"":923,"":924,"":925,"":931,"":934,"":940,"":946,"":948,"":954,"":960,"":966,"":972,"":978,"":984,"":990,"":996,"":1002,"":1008,"":1014,"":1015,"":1017,"":1018,"":1020,"":1021,"":1022,"":1025,"":1028,"":1029,"":1030,"":1031,"":1032,"":1035,"":1041,"":1047,"":1234,"":1439,"":1457,"":1475,"":1496,"":1514,"":1520,"":1538,"":1544,"":1550,"":1556,"":1574,"":1582,"":1583,"":1589,"":1590,"":1591,"":1592,"":1593,"":1611,"":1629,"":1635,"":1636,"":1642,"":1660,"":1678,"":1679,"":1680,"":1681,"":1683,"":1684,"":1685,"":1686,"":1687,"":1688,"":1689,"":1690,"":1693,"":1694,"":1695,"":1696,"":1697,"":1698,"":1699,"":1701,"":1703,"":1704,"":1705,"":1706,"":1708,"":1710,"":1711,"":1712,"":1723,"":1724,"":1732,"":1733,"":1734,"":1735,"":1736,"":1738,"":1739,"":1761,"":1768,"":1771,"":1772,"":1773,"":1774,"":1780,"":1782,"":1785,"":1788,"":1789,"":1790,"":1791,"":1793,"":1794,"":1797,"":1798,"":1799,"":1812,"":1815,"":1819,"":1820,"":1821,"":1822,"":1831,"":1832,"":1839,"":1842,"":1845,"":1849,"":1850,"":1851,"":1852,"":1853,"":1854,"":1870,"":1871,"":1872,"":1873,"":1874,"":1875,"":1876,"":1877,"":1878,"":1879,"":1880,"":1881,"":1975,"":1976,"":1977,"":1981,"":1982,"":1983,"":1984,"":1989,"":1990,"":1992,"":1993,"":1995,"":1998,"":1999,"":2e3,"":2002,"":2004,"":2006,"":2008,"":2009,"":2010,"":2012,"":2013,"":2014,"":2015,"":2017,"":2020,"":2022,"":2025,"":2028,"":2029,"":2030,"":2031,"":2035,"":2049,"":2067,"":2085,"":2124,"":2166,"":2172,"":2175,"":2176,"":2177,"":2179,"":2181,"":2184,"":2187,"":2189,"":2190,"":2191,"":2193,"":2195,"":2197,"":2198,"":2206,"":2225,"":2226,"":2228,"":2233,"":2234,"":2239,"":2277,"":2297,"":2298,"":2299,"":2300,"":2301,"":2302,"":2304}},35962:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=[];if(e){var r=function(e,t){var a=function(e,t){if(!t)return[];if(e.length<=5)return t.getMatches(e);var a=e.substring(0,5).trim(),r=t.getMatches(a);return r=(0,u.default)(r,(t=>t.keyword.startsWith(e)))}(e,t),r=v((0,d.default)(a,(e=>e.value))),s=v((0,d.default)(a.filter((t=>t.keyword===e)),(e=>e.value))),i=(0,l.default)(v(f.default.map((e=>e.id))),r),n=(0,l.default)(v(m),r),c=(0,l.default)((0,o.default)(i,n),s);return(0,o.default)(c,E(s),i,n,E(r))}(e.toLowerCase(),t);a=(0,c.default)(r)}return a},t.emojiLocaleDictsToTrie=function(e){var t=e[0];e.length>1&&(t=(0,s.default)((0,s.default)({},t),e[1]));return function(e,t){var a=p.default.fromForwardsStrings(e.map((e=>e[t])),e);return{getMatches:e=>a.search(e)}}((0,i.default)(t,((e,t)=>{var a=t.toLowerCase(),r=a.substring(0,5);return{value:e,keyword:a,shortKeyword:r}})),"shortKeyword")};var s=r(a(70417)),i=r(a(16760)),n=r(a(25291)),o=r(a(26139)),l=r(a(30898)),d=r(a(35838)),u=r(a(90882)),c=r(a(75652)),h=r(a(12396)),f=r(a(67110)),p=r(a(75688)),m=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function v(e){return e.map(h.default.normalizeEmoji).filter(Boolean)}var g=(0,n.default)((()=>{var e=new Map,t=0;for(var a of _){var r=h.default.getEmojisInCategory(a);for(var s of r)e.set(s,t),t++}return e}));function E(e){var t=g();return[...e].sort(((e,a)=>{var r,s;return(null!==(r=t.get(e))&&void 0!==r?r:Number.MAX_SAFE_INTEGER)-(null!==(s=t.get(a))&&void 0!==s?s:Number.MAX_SAFE_INTEGER)}))}},29720:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#","*","0","1","2","3","4","5","6","7","8","9","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},13735:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getEphemeralSettingChangeByOthersString=function(e=0,t){return y(C.SettingChangeByOthers,e,t)},t.getEphemeralSettingChangeByYouString=function(e=0){return y(C.SettingChangeByYou,e)},t.getEphemeralSettingChangeByUnknownString=function(e=0){return y(C.SettingChangeByUnknown,e)},t.getEphemeralSettingChangeByOthersAsAdminString=function(e=0,t){return y(C.SettingChangeByOthersAsAdmin,e,t)},t.getEphemeralSettingChangeByYouAsAdminString=function(e=0){return y(C.SettingChangeByYouAsAdmin,e)},t.getEphemeralSettingChangeByUnknownAsAdminString=function(e=0){return y(C.SettingChangeByUnknownAsAdmin,e)},t.getEphemeralDurationString=function(e=0){return y(C.Duration,e)},t.getEphemeralOutOfSyncInfoString=function(e=0){return y(C.OutOfSyncInfo,e)},t.getEphemeralExplanationString=function(e=0){return y(C.Explanation,e)},t.EphemeralL10n=b,t.EphemeralStringType=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(17957)),l=s(a(81524));function d(){var e=(0,i.default)(["getEphemeralOnDaysL10nComponent is given type "," and name ",""]);return d=function(){return e},e}function u(){var e=(0,i.default)(["getEphemeralOnHoursL10nComponent is given type "," and name ",""]);return u=function(){return e},e}function c(){var e=(0,i.default)(["getEphemeralOnMinutesL10nComponent is given type "," and name ",""]);return c=function(){return e},e}function h(){var e=(0,i.default)(["getEphemeralOnSecondsL10nComponent is given type "," and name ",""]);return h=function(){return e},e}function f(){var e=(0,i.default)(["getEphemeralOffL10nComponent is given invalid type ",""]);return f=function(){return e},e}function p(){var e=(0,i.default)(["getEphemeralL10nComponent "," is given invalid duration ",""]);return p=function(){return e},e}function m(){var e=(0,i.default)(["getEphemeralOnDaysString is given type "," and name ",""]);return m=function(){return e},e}function _(){var e=(0,i.default)(["getEphemeralOnHoursString is given type "," and name ",""]);return _=function(){return e},e}function v(){var e=(0,i.default)(["getEphemeralOnMinutesString is given type "," and name ",""]);return v=function(){return e},e}function g(){var e=(0,i.default)(["getEphemeralOnSecondsString is given type "," and name ",""]);return g=function(){return e},e}function E(){var e=(0,i.default)(["getEphemeralOffString is given invalid type ",""]);return E=function(){return e},e}function S(){var e=(0,i.default)(["getEphemeralString "," is given invalid duration ",""]);return S=function(){return e},e}var C=a(28103).Mirrored(["SettingChangeByOthers","SettingChangeByYou","SettingChangeByUnknown","SettingChangeByOthersAsAdmin","SettingChangeByYouAsAdmin","SettingChangeByUnknownAsAdmin","Duration","OutOfSyncInfo","Explanation"]);function y(e,t=0,a){return t<0?(__LOG__(4,void 0,new Error,!0)(S(),e,t),SEND_LOGS("invalid-duration"),""):0===t?function(e,t){return e===C.SettingChangeByOthers&&null!=t?o.default.t(631,{name:t}):e===C.SettingChangeByYou?o.default.t(626):e===C.SettingChangeByUnknown?o.default.t(621):e===C.SettingChangeByOthersAsAdmin&&null!=t?o.default.t(647,{name:t}):e===C.SettingChangeByYouAsAdmin?o.default.t(642):e===C.SettingChangeByUnknownAsAdmin?o.default.t(637):e===C.Duration?o.default.t(674):e===C.OutOfSyncInfo?o.default.t(660):(__LOG__(4,void 0,new Error,!0)(E(),e),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,a):t<=60?function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?o.default.t(635,{name:a,number:t,_plural:t}):e===C.SettingChangeByYou?o.default.t(630,{number:t,_plural:t}):e===C.SettingChangeByUnknown?o.default.t(625,{number:t,_plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(651,{name:a,number:t,_plural:t}):e===C.SettingChangeByYouAsAdmin?o.default.t(646,{number:t,_plural:t}):e===C.SettingChangeByUnknownAsAdmin?o.default.t(641,{number:t,_plural:t}):e===C.Duration?o.default.t(679,{number:t,_plural:t}):e===C.OutOfSyncInfo?o.default.t(664,{number:t,_plural:t}):e===C.Explanation?o.default.t(657,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(g(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,t,a):t<=3600?function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?o.default.t(634,{name:a,number:t,_plural:t}):e===C.SettingChangeByYou?o.default.t(629,{number:t,_plural:t}):e===C.SettingChangeByUnknown?o.default.t(624,{number:t,_plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(650,{name:a,number:t,_plural:t}):e===C.SettingChangeByYouAsAdmin?o.default.t(645,{number:t,_plural:t}):e===C.SettingChangeByUnknownAsAdmin?o.default.t(640,{number:t,_plural:t}):e===C.Duration?o.default.t(678,{number:t,_plural:t}):e===C.OutOfSyncInfo?o.default.t(663,{number:t,_plural:t}):e===C.Explanation?o.default.t(656,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(v(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60),a):t<=86400?function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?o.default.t(633,{name:a,number:t,_plural:t}):e===C.SettingChangeByYou?o.default.t(628,{number:t,_plural:t}):e===C.SettingChangeByUnknown?o.default.t(623,{number:t,_plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(649,{name:a,number:t,_plural:t}):e===C.SettingChangeByYouAsAdmin?o.default.t(644,{number:t,_plural:t}):e===C.SettingChangeByUnknownAsAdmin?o.default.t(639,{number:t,_plural:t}):e===C.Duration?o.default.t(677,{number:t,_plural:t}):e===C.OutOfSyncInfo?o.default.t(662,{number:t,_plural:t}):e===C.Explanation?o.default.t(655,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(_(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/60/60),a):function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?o.default.t(632,{name:a,number:t,_plural:t}):e===C.SettingChangeByYou?o.default.t(627,{number:t,_plural:t}):e===C.SettingChangeByUnknown?o.default.t(622,{number:t,_plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?o.default.t(648,{name:a,number:t,_plural:t}):e===C.SettingChangeByYouAsAdmin?o.default.t(643,{number:t,_plural:t}):e===C.SettingChangeByUnknownAsAdmin?o.default.t(638,{number:t,_plural:t}):e===C.Duration?o.default.t(676,{number:t,_plural:t}):e===C.OutOfSyncInfo?o.default.t(661,{number:t,_plural:t}):e===C.Explanation?o.default.t(654,{number:t,_plural:t}):(__LOG__(4,void 0,new Error,!0)(m(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),"")}(e,Math.floor(t/24/60/60),a)}function b(e){var{type:t,numSeconds:a=0,name:r}=e;return a<0?(__LOG__(4,void 0,new Error,!0)(p(),t,a),SEND_LOGS("invalid-duration"),null):0===a?function(e,t){return e===C.SettingChangeByOthers&&null!=t?n.createElement(l.default,{id:631,params:{name:t}}):e===C.SettingChangeByYou?n.createElement(l.default,{id:626}):e===C.SettingChangeByUnknown?n.createElement(l.default,{id:621}):e===C.SettingChangeByOthersAsAdmin&&null!=t?n.createElement(l.default,{id:647,params:{name:t}}):e===C.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:642}):e===C.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:637}):e===C.Duration?n.createElement(l.default,{id:674}):e===C.OutOfSyncInfo?n.createElement(l.default,{id:660}):(__LOG__(4,void 0,new Error,!0)(f(),e),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,r):a<=60?function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:635,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYou?n.createElement(l.default,{id:630,params:{number:t},plural:t}):e===C.SettingChangeByUnknown?n.createElement(l.default,{id:625,params:{number:t},plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:651,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:646,params:{number:t},plural:t}):e===C.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:641,params:{number:t},plural:t}):e===C.Duration?n.createElement(l.default,{id:679,params:{number:t},plural:t}):e===C.OutOfSyncInfo?n.createElement(l.default,{id:664,params:{number:t},plural:t}):e===C.Explanation?n.createElement(l.default,{id:657,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(h(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,a,r):a<=3600?function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:634,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYou?n.createElement(l.default,{id:629,params:{number:t},plural:t}):e===C.SettingChangeByUnknown?n.createElement(l.default,{id:624,params:{number:t},plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:650,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:645,params:{number:t},plural:t}):e===C.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:640,params:{number:t},plural:t}):e===C.Duration?n.createElement(l.default,{id:678,params:{number:t},plural:t}):e===C.OutOfSyncInfo?n.createElement(l.default,{id:663,params:{number:t},plural:t}):e===C.Explanation?n.createElement(l.default,{id:656,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(c(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,Math.floor(a/60),r):a<=86400?function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:633,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYou?n.createElement(l.default,{id:628,params:{number:t},plural:t}):e===C.SettingChangeByUnknown?n.createElement(l.default,{id:623,params:{number:t},plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:649,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:644,params:{number:t},plural:t}):e===C.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:639,params:{number:t},plural:t}):e===C.Duration?n.createElement(l.default,{id:677,params:{number:t},plural:t}):e===C.OutOfSyncInfo?n.createElement(l.default,{id:662,params:{number:t},plural:t}):e===C.Explanation?n.createElement(l.default,{id:655,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(u(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,Math.floor(a/60/60),r):function(e,t,a){return e===C.SettingChangeByOthers&&null!=a?n.createElement(l.default,{id:632,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYou?n.createElement(l.default,{id:627,params:{number:t},plural:t}):e===C.SettingChangeByUnknown?n.createElement(l.default,{id:622,params:{number:t},plural:t}):e===C.SettingChangeByOthersAsAdmin&&null!=a?n.createElement(l.default,{id:648,params:{name:a,number:t},plural:t}):e===C.SettingChangeByYouAsAdmin?n.createElement(l.default,{id:643,params:{number:t},plural:t}):e===C.SettingChangeByUnknownAsAdmin?n.createElement(l.default,{id:638,params:{number:t},plural:t}):e===C.Duration?n.createElement(l.default,{id:676,params:{number:t},plural:t}):e===C.OutOfSyncInfo?n.createElement(l.default,{id:661,params:{number:t},plural:t}):e===C.Explanation?n.createElement(l.default,{id:654,params:{number:t},plural:t}):(__LOG__(4,void 0,new Error,!0)(d(),e,a),SEND_LOGS("invalid-ephemeral-string-type"),null)}(t,Math.floor(a/24/60/60),r)}t.EphemeralStringType=C,b.displayName="EphemeralL10n"},555:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=function(e,t){var a=e.target.files||e.dataTransfer&&e.dataTransfer.files,r=a?Array.from(a):[];if(t){var o=("string"==typeof t?[t]:t).map((e=>new RegExp(e)));r=r.filter((e=>o.some((t=>e.type.match(t)))))}if(r.length)return Promise.resolve(r);var l=e.dataTransfer;if(l&&l.getData("text/uri-list"))return n.urlToFile(l.getData("text/uri-list")).then((e=>[(0,i.createFile)([e],"",{type:e.type})]));if(l&&l.getData("text/html")){var d=(new DOMParser).parseFromString(l.getData("text/html"),"text/html");if(d.createNodeIterator(d.childNodes[0],NodeFilter.SHOW_TEXT).nextNode()){if(l.getData("text/plain")){var u=new s.MediaDragDropError("dropped html has text nodes: ".concat(l.getData("text/plain")));return Promise.reject(u)}}else{var c=d.getElementsByTagName("img");if(c.length)return n.urlToFile(c[0].src).then((e=>[(0,i.createFile)([e],"",{type:e.type})]))}}return Promise.resolve([])};var s=r(a(96452)),i=a(99888),n=r(a(44202))},43396:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AllowedFileExtensions",{enumerable:!0,get:function(){return m.AllowedFileExtensions}}),t.default=void 0;var i=s(a(19976)),n=r(a(2784)),o=s(a(61867)),l=s(a(79711)),d=s(a(9386)),u=s(a(50935)),c=a(96268),h=s(a(14280)),f=s(a(17957)),p=s(a(14558)),m=a(19191);function _(){var e=(0,i.default)(["Download failed, error: ",""]);return _=function(){return e},e}function v(){var e=(0,i.default)(["Assertion failed! ",""]);return v=function(){return e},e}function g(){var e=(0,i.default)(["Assertion failed! ",""]);return g=function(){return e},e}function E(){var e=(0,i.default)(["Assertion failed!"]);return E=function(){return e},e}var S=new class{downloadData(e,t,a){var r=window.URL.createObjectURL(e),s=(0,c.createDataLink)(r);return s.style.display="none",s.download="".concat(t).concat(a),document.body&&document.body.appendChild(s),s.click(),document.body&&document.body.removeChild(s),(0,p.default)(100).then((()=>{window.URL.revokeObjectURL(s.href)})),Promise.resolve()}initDownload(e){var t=e;if(!window.Modernizr.adownload){var a=f.default.t(1909,{chrome_homepage:u.default.BROWSER_LINK.CHROME,firefox_homepage:u.default.BROWSER_LINK.FIREFOX,opera_homepage:u.default.BROWSER_LINK.OPERA});return l.default.openModal(n.createElement(d.default,{onOK:()=>l.default.closeModal(),okText:f.default.t(1761)},a)),__LOG__(4,void 0,new Error,!0)(E()),void SEND_LOGS("safari, adownload is false in download mgr")}o.default.startDownloading(),(0,h.default)(t).then((e=>{e.url||e.blob||(__LOG__(4,void 0,new Error,!0)(g(),Array.isArray(t)?"download a zip file":"download ".concat(t.id.toString()," type ").concat(t.type," with state ").concat(t.mediaData&&t.mediaData.mediaStage)),SEND_LOGS("download-url-creation-error"));var a=e.url||window.URL.createObjectURL(e.blob),r=(0,c.createDataLink)(a);r.download=e.name,r.style.display="none",Array.isArray(t)&&1===t.length&&(t=t[0]),r.href||(__LOG__(4,void 0,new Error,!0)(v(),Array.isArray(t)?"download a zip file":"download ".concat(t.id.toString()," type ").concat(t.type," with state ").concat(t.mediaData&&t.mediaData.mediaStage)),SEND_LOGS("no-download-url")),document.body&&document.body.appendChild(r),r.click(),document.body&&document.body.removeChild(r),e.url||(0,p.default)(100).then((()=>{window.URL.revokeObjectURL(r.href)}))})).catch((e=>{__LOG__(3)(_(),String(e))}))}};t.default=S},19191:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFileExtensions=void 0;var r=a(28103)({PNG:".png",TXT:".txt",ZIP:".zip"});t.AllowedFileExtensions=r},27011:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(82108)),i=r(a(19034)),n=r(a(19899)),o=r(a(50935)),l=r(a(17957)),d=a(41501),u=a(84990),c={getDefaultName(e){var t;if(e.type===o.default.MSG_TYPE.DOCUMENT){var a=(e.filename||"").trim();t=a||(e.caption||"").trim()||l.default.t(1430),a&&function(e){return/[\.].{1,4}$/.test(e)}(a)||(t=h(t,e))}else t=e.type===o.default.MSG_TYPE.VCARD?h(t=(e.vcardFormattedName||"").trim()||f(e),e):e.type===o.default.MSG_TYPE.MULTI_VCARD?h(t=e.vcardList?(0,u.getNameString)(e.vcardList):f(e),e):h(t=f(e),e);return t}};function h(e,t){var a=e,r=t.type===o.default.MSG_TYPE.VCARD||t.type===o.default.MSG_TYPE.MULTI_VCARD?"text/vcard":t.mimetype,s=(0,d.getExtension)(r);return a.endsWith(s)||(a+=s),a}function f(e){var t=i.default.unix(e.t).locale("en"),a="".concat(t.format("YYYY-MM-DD")," at ").concat(t.format(n.default.getIs24Hour()?"HH.mm.ss":"h.mm.ss A"));return"WhatsApp ".concat((0,s.default)(e.type)," ").concat(a)}t.default=c},18164:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldedContactName=t.HeaderAndFooter=t.UntrustedGroupDesc=t.TrustedGroupDesc=t.FormattedNotification=t.RawNotification=t.ComposeBox=t.QuotedMention=t.Format=t.QuickReply=t.FTSMessage=t.LastMessage=t.SearchName=t.Search=t.Conversation=t.Compatibility=t.StatusV3Caption=t.StatusV3Text=t.LargeEmojiOnly=t.EmojiOnly=void 0;var r=a(17275);t.EmojiOnly=({selectable:e}={})=>[[[r.Emoji,{selectable:e}]]];t.LargeEmojiOnly=({selectable:e}={})=>[[[r.Emoji,{selectable:e,size:"large"}]]];t.StatusV3Text=({links:e,selectable:t}={})=>[[[r.Code,{selectable:t}]],[[r.Link,{links:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t,size:"xlarge"}]]];t.StatusV3Caption=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]];t.Compatibility=({selectable:e}={})=>[[[r.Emoji,{selectable:e}]]];t.Conversation=({mentions:e,links:t,selectable:a,trusted:s}={})=>[[[r.Code,{selectable:a}]],s?[[r.Link,{links:t,selectable:a}]]:null,e?[[r.Mention,{mentions:e,selectable:a}]]:null,[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Emoji,{selectable:a}]]].filter(Boolean);t.Search=({boundary:e,terms:t,selectable:a,mentions:s})=>[[[r.TextMention,{mentions:s,selectable:a}]],[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Highlight,{terms:t,boundary:e,selectable:a,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:a}]]];t.SearchName=({terms:e})=>[[[r.Highlight,{terms:e,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:!1}]]];t.LastMessage=({mentions:e,selectable:t}={})=>[[[r.Code,{selectable:t}]],e?[[r.TextMention,{mentions:e,selectable:t}]]:null,[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]].filter(Boolean);t.FTSMessage=({boundary:e,mentions:t,terms:a,selectable:s})=>[[[r.Code,{selectable:s}]],[[r.TextMention,{mentions:t,selectable:s}]],[[r.Bold,{selectable:s}],[r.Italic,{selectable:s}],[r.Strikethrough,{selectable:s}]],[[r.Highlight,{terms:a,boundary:e,selectable:s}]],[[r.Emoji,{selectable:s}]]];t.QuickReply=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]];t.Format=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.TextMention,{mentions:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]];t.QuotedMention=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.TextMention,{mentions:e,selectable:t,theme:{quoted:!0}}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]];t.ComposeBox=({selectable:e}={})=>[[[r.Code,{selectable:e}]],[[r.Link,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoticon,{selectable:e}]]];t.RawNotification=({mentions:e,selectable:t})=>[[[r.RawMention,{mentions:e,selectable:t}]]];t.FormattedNotification=({mentions:e,selectable:t})=>[[[r.Code,{selectable:t}]],[[r.RawMention,{mentions:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]]];t.TrustedGroupDesc=({links:e})=>{var t=!0;return[[[r.Code,{selectable:t}]],[[r.Link,{links:e,selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]]};t.UntrustedGroupDesc=()=>{var e=!0;return[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]]};t.HeaderAndFooter=({links:e,selectable:t,trusted:a}={})=>[a?[[r.Link,{links:e,selectable:t}]]:null,[[r.Emoji,{selectable:t}]]].filter(Boolean);t.BoldedContactName=({selectable:e})=>[[[r.BoldFirstWord,{selectable:e}]],[[r.Emoji,{selectable:e}]]]},72034:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,n=1/0){return(0,i.default)(a,(0,s.default)(e,t,n),r)};var s=r(a(47028)),i=r(a(41222))},84097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,a){var r=2*e.length+t[1].length,s=t[0].length-r;return s>0&&(t.index+=s,t[0]=t[0].slice(s)),a.lastIndex--,t}}},38311:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableHeaderAndFooterFormatting=function(e,t){return{formatters:(0,r.HeaderAndFooter)({links:e,selectable:!0,trusted:t}),selectable:!0}};var r=a(18164)},6981:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0,a){return class extends i.default{static match(r){return(0,s.default)(r,e,t,a)}}};var s=r(a(43018)),i=r(a(84188))},11965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0){var{index:a}=e,[r]=e,s=a+r.length-1,i=[a,a,s,s,e];if(t){var n=e[t];i[1]=a+r.indexOf(n),i[2]=i[1]+n.length-1}return i}},43018:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=0,r){var i,n=[];t.lastIndex=0;for(;(i=t.exec(e))&&t.lastIndex>0;)r&&(i=r(i,t)),i&&n.push((0,s.default)(i,a));return n};var s=r(a(11965))},62902:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var s=r(a(18164));t.Configuration=s},84188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{static match(){throw new Error("Subclasses of `Mutator` must override `match()`")}static mutate(e){return e}}t.default=a,a.nestable=()=>!0,a.format=!0,a.fragment=!1,a.compatibility=!1,a.mutates=!1},30209:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(84097)),o=r(a(88465)),l=r(a(6981)),d=(0,n.default)("*"),u=(0,l.default)(/(?:^|[\s\W_])\*([^\s\u20e3]|[^\s\u20e3][^\n]*?\S)\*(?=$|[[\s\W_])/g,1,d);t.default=class extends u{static jsx(e,t,{selectable:a=!1}){return i.createElement(o.default,{selectable:a},e)}}},29629:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(88465)),o=(0,r(a(6981)).default)(/^(\w*)\b/g);t.default=class extends o{static jsx(e,t,{selectable:a=!1}){return i.createElement(n.default,{selectable:a},e)}}},80073:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.removeCodeBlocks=t.isInsideCodeBlock=t.default=void 0;var i=s(a(2784)),n=r(a(56867)),o=r(a(6981)),l=/```([\s\S]*?\S[\s\S]*?)```/g,d=(0,o.default)(l,1),u=new Set(["ListItem","List"]);class c extends d{static jsx(e,t,{selectable:a=!1}){return i.createElement(n.default,{selectable:a},e)}}t.default=c,c.nestable=e=>u.has(e),c.format=!1;t.isInsideCodeBlock=e=>{var t=e.split(l).pop();return/```/.test(t)};t.removeCodeBlocks=e=>e.replace(l," ")},88465:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=a(66615);function n({children:e,selectable:t}){return s.createElement(i.SelectableStrong,{selectable:t,appTextTemplate:"*${appText}*"},e)}n.displayName="Bold",n.defaultProps={children:""};var o=n;t.default=o},56867:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var s=r(a(2784)),i=a(66615);function n({children:e="",selectable:t}){return s.createElement(i.SelectableCode,{selectable:t,appTextTemplate:"```${appText}```"},e)}n.displayName="Code"},9254:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(44977)),o=s(a(21406));t.default=({emoji:e,selectable:t,size:a})=>"xlarge"===a?i.createElement(o.default,{emoji:e,size:o.SIZE.XLARGE,element:"span",selectable:t}):i.createElement(n.default,{emoji:e,selectable:t,size:a})},25843:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=a(66615);function n({children:e,selectable:t}){return s.createElement(i.SelectableSpan,{className:"matched-text",selectable:t},e)}n.displayName="Highlight",n.defaultProps={children:""};var o=n;t.default=o},41090:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s(a(2784)),n=r(a(42862));function o(e){return i.createElement(n.default,e,e.children)}o.displayName="Intern"},8907:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=a(66615);function n({children:e,selectable:t}){return s.createElement(i.SelectableEm,{selectable:t,appTextTemplate:"_${appText}_"},e)}n.displayName="Italic",n.defaultProps={children:""};var o=n;t.default=o},42862:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=a(66615);function n({href:e,children:t,selectable:a}){return s.createElement(i.SelectableLink,{href:e,title:e,target:"_blank",rel:"noopener noreferrer",selectable:a},t)}n.displayName="Link",n.defaultProps={children:""};var o=n;t.default=o},60710:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({children:e="",inline:t,isAtStart:a,selectable:r}){return n.createElement(n.Fragment,null,n.createElement(l.SelectableUl,{appTextTemplate:a?"${appText}":"\n${appText}",className:(0,i.default)({[o.default.inline]:t},o.default.ul),selectable:r},e))};var i=s(a(72779)),n=r(a(2784)),o=s(a(66564)),l=a(66615)},27823:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=s(a(72779)),n=r(a(2784)),o=s(a(34145)),l=a(66615);function d({children:e="",inline:t,selectable:a}){return n.createElement("li",{className:(0,i.default)({[o.default.inline]:t})},n.createElement(l.SelectableSpan,{selectable:a,appTextTemplate:"* ${appText}"},e))}d.displayName="ListItem"},81861:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(40207)),d=r(a(16672));class u extends i.Component{constructor(...e){super(...e),this.onClick=()=>{var{contact:e}=this.props;n.default.find(e.id).then((e=>o.default.openChatBottom(e)))}}render(){var{contact:e,theme:t,selectable:a}=this.props,r=e.isMe?void 0:this.onClick;return i.createElement(d.default,{contact:e,theme:t,selectable:a,onClick:r})}}u.CONCERNS={contact:["id","isMe"]},u.displayName="Mention";var c=(0,l.default)(u,u.CONCERNS);t.default=c},8981:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(2784)),i=a(66615);function n({children:e,selectable:t}){return s.createElement(i.SelectableDel,{selectable:t,appTextTemplate:"~${appText}~"},e)}n.displayName="Strikethrough",n.defaultProps={children:""};var o=n;t.default=o},75241:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(79711)),o=a(66615),l=r(a(82338));function d({link:e,children:t,selectable:a}){return i.createElement(o.SelectableLink,{onClick:()=>n.default.openModal(i.createElement(l.default,{link:e})),selectable:a,style:{cursor:"pointer"}},t)}d.displayName="SuspiciousLink",d.defaultProps={children:""};var u=d;t.default=u},16672:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextMention=void 0;var i=s(a(72779)),n=r(a(2784)),o=a(82704),l=s(a(30508)),d=s(a(72034)),u=a(66615),c=a(89659),h=s(a(40207));class f extends n.Component{render(){var{contact:e,onClick:t,theme:a,selectable:r}=this.props,s=e.displayName,h=e.id,f=(0,o.dir)(s)||"auto",p=!!a&&a.quoted,m=(0,d.default)(s,[[[l.default,{selectable:r}]]],c.JSXSerializer,void 0,1/0);return n.createElement(u.SelectableSpan,{"data-jid":h.toString(),"data-display":s,className:(0,i.default)("matched-mention",{"quoted-mention":p,"inactive-mention":!t||p}),onClick:t,plainText:"@".concat(s),selectable:r,selectAll:!0,appTextTemplate:"".concat(h.toString(),"")},n.createElement("span",{className:"at-symbol"},"@"),n.createElement("span",{dir:f},m))}}t.TextMention=f,f.CONCERNS={contact:["id","displayName"]},f.displayName="TextMention";var p=(0,h.default)(f,f.CONCERNS);t.default=p},30508:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(12396)),o=r(a(9254)),l=r(a(43018)),d=r(a(84188)),u=a(86145);class c extends d.default{static jsx(e,[t],{size:a,selectable:r=!1}){return i.createElement(o.default,{emoji:t,size:a,selectable:r})}static match(e,t,a){var r=null!=a&&0!==a?a:e.length,s=(0,u.firstNCodepoints)(e,r);return(0,l.default)(s,n.default.emojiRegex(),0,h)}}function h(e){return n.default.getGlyphId(e[0])?e:null}t.default=c,c.compatibility=!0},91883:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(89166)),i=r(a(6981)),n=r(a(12396)),o=r(a(61311)),l={"(y)":"","(n)":"",":-)":"",":-(":"",":-p":"",":-|":"",":-\\":"",":-d":"",":-*":"","<3":"","^_^":"",">_<":"",";-)":""},d=Object.keys(l).map(s.default).join("|"),u="\\s|```|[*_~]",c=new RegExp("(^|".concat(u,")((?:").concat(d,")+)(?=$|").concat(u,")"),"ig"),h=new RegExp("(".concat(d,")"),"i"),f=(0,i.default)(c,2,(function(e){var[,t]=e;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));class p extends f{static mutate(e){return e.split(h).map((e=>{var t=l[e.toLowerCase()];return t?n.default.getSkinToneBase(t)&&o.default.getVariant(t)||t:e})).join("")}}t.default=p,p.fragment=!0,p.mutates=!0},10587:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(89166)),n=r(a(2784)),o=s(a(43018)),l=s(a(25843)),d=s(a(17957)),u=s(a(84188));class c extends u.default{static match(e,t){if(!t)return[];var{terms:a,boundary:r=!1,ignoreDiacritics:s=!1}=t;if(!a.length)return[];var n=s&&d.default.isLatinAlphabetLanguage(e)&&a.every((e=>d.default.isLatinAlphabetLanguage(e)))&&!d.default.isRTL(),l=n?d.default.removeAccents(e):e;return(0,o.default)(l,function(e,t,a){var r=(a?e.map((e=>d.default.removeAccents(e))):e).map(i.default).join("|");if(d.default.isRTL())return new RegExp("".concat(t?"(?:^|\\b)":"","(\\S+)?(").concat(r,")(\\S+)?"),"ig");return new RegExp("".concat(t?"(?:^|\\b)":"","(").concat(r,")"),"ig")}(a,r,n))}}t.default=c,c.jsx=(e,t,{selectable:a})=>n.createElement(l.default,{selectable:a},e)},17275:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoldFirstWord",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Bold",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Emoji",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Emoticon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Intern",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Italic",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Mention",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"RawMention",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"Strikethrough",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"TextMention",{enumerable:!0,get:function(){return g.default}});var s=r(a(29629)),i=r(a(30209)),n=r(a(80073)),o=r(a(30508)),l=r(a(91883)),d=r(a(10587)),u=r(a(59824)),c=r(a(36341)),h=r(a(67174)),f=r(a(78546)),p=r(a(4886)),m=r(a(98594)),_=r(a(73017)),v=r(a(82828)),g=r(a(36650))},59824:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(6981)),o=r(a(41090)),l=(0,n.default)(/(^|\b|\s)(((#|t|T|d|D|p|P|s|S)([0-9]{3,16}))|([0-9a-fA-F]{8,40}))(?=$|\b)/g,2,(function(e){var[,t,,,,,a]=e;if(a&&(!d.test(a)||!u.test(a)))return null;t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e}));t.default=class extends l{static jsx(e,t,{selectable:a=!1}){var r=function([,,,,e,t,a]){if(a)return"".concat(c).concat(a.toLowerCase());switch(e){case"T":case"t":case"#":return"".concat(h).concat(t);case"D":case"d":return"".concat(f).concat(t);case"P":case"p":return"".concat(p).concat(t);case"S":case"s":return"".concat(m).concat(t);default:return"".concat(_).concat(e).concat(t)}}(t);return i.createElement(o.default,{href:r,selectable:a},e)}};var d=/[a-fA-F]/,u=/[0-9]/;var c="https://internalfb.com/intern/bunny/?q=hash%20",h="https://internalfb.com/intern/tasks/?t=",f="https://internalfb.com/intern/diff/D",p="https://internalfb.com/intern/paste/P",m="https://internalfb.com/intern/sevmanager/view/s/",_="https://internalfb.com/intern/"},36341:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(84097)),o=r(a(6981)),l=r(a(8907)),d=(0,n.default)("_"),u=(0,o.default)(/(?:^|\s|_|[^\w\\])_(\S|\S[^\n]*?\S)_(?=$|[[\s\W_])/g,1,d);t.default=class extends u{static jsx(e,t,{selectable:a=!1}){return i.createElement(l.default,{selectable:a},e)}}},67174:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(30209)),o=r(a(36341)),l=r(a(42862)),d=r(a(84188)),u=r(a(82828)),c=r(a(75241));class h extends d.default{static jsx(e,t,{selectable:a=!1}){var{href:r,suspiciousCharacters:s}=t;return s&&s.size?i.createElement(c.default,{link:t,selectable:a},e):i.createElement(l.default,{href:r,selectable:a},e)}}function f(e){var{index:t,url:a}=e,r=t+a.length-1;return[t,t,r,r,e]}function p(e,t){for(var a=0,r=0;a<e.length&&r<t.length;){var s=t[r][3]-e[a][3];if(s>0)a++;else if(s<0)r++;else{e[a][2]--,e[a][3]--;var i=e[a][5];i.href=i.href.slice(0,-1),i.path=i.path&&i.path.slice(0,-1),i.url=i.url.slice(0,-1),r++,a++}}}t.default=h,h.format=!1,h.match=(e,t)=>{if(!t)return[];var{links:a=[]}=t;return a.map(f)},h.conflictResolvers=new Map([[n.default,p],[o.default,p],[u.default,p]])},78546:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(6981)),o=r(a(60710)),l=(0,n.default)(/((?:^)(?:\* (?:[^\n]+)(?:\n(?:\* [^\n]+)){0,})(?:\n|$))/gm,0);class d extends l{static jsx(e,t,{selectable:a=!1,inline:r}){var s=0===t.index;return i.createElement(o.default,{inline:r,isAtStart:s,selectable:a},e)}}t.default=d,d.nestable=()=>!1},4886:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LAST_LIST_ITEM_REGEX=t.LIST_ITEM_DELIMITER=void 0;var i=s(a(2784)),n=r(a(6981)),o=r(a(27823));t.LIST_ITEM_DELIMITER="* ";t.LAST_LIST_ITEM_REGEX=/(?:^|\n)\* [^\n]+$/;var l=(0,n.default)(/(?:^)\* ([^\n]+(?:$))/gm,1),d=new Set(["List"]);class u extends l{static jsx(e,t,{selectable:a=!1,inline:r}){return i.createElement(o.default,{inline:r,selectable:a},e)}}t.default=u,u.nestable=e=>d.has(e),u.unformatDecorations={pre:" "}},98594:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(89166)),n=s(a(45455)),o=r(a(2784)),l=s(a(43018)),d=s(a(81861)),u=s(a(84188));class c extends u.default{static match(e,t){if(!t)return[];var{mentions:a}=t;if(!a||(0,n.default)(a))return[];for(var r,s,o=(r=a,s=Object.keys(r).map(i.default).join("|"),new RegExp("(".concat(s,")"),"g")),d=(0,l.default)(e,o),u=0;u<d.length;++u)d[u][4]=a[d[u][4][0]];return d}static jsx(e,t,{selectable:a}){return o.createElement(d.default,{contact:t,selectable:a})}}t.default=c,c.format=!1},73017:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(98594));class i extends s.default{}t.default=i,i.mutates=!0,i.mutate=(e,t)=>"@".concat(t.displayName)},82828:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(84097)),o=r(a(6981)),l=r(a(8981)),d=(0,n.default)("_"),u=(0,o.default)(/(?:^|[\s\W_])~(\S|\S[^\n]*?\S)~(?=$|[[\s\W_])/g,1,d);t.default=class extends u{static jsx(e,t,{selectable:a}){return i.createElement(l.default,{selectable:a},e)}}},36650:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(98594)),o=r(a(16672));class l extends n.default{static jsx(e,t,{selectable:a,theme:r}){return i.createElement(o.default,{contact:t,selectable:a,theme:r})}}t.default=l},88980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;var a,r=[];for(;a=e.pop();){for(var[s,,,i,n]=a,[{nestable:o,compatibility:l},,d]=t[n],u=!0,{length:c}=r,h=c-1;h>=0;--h){var[,,f,p,m]=r[h];if(s>p)break;var[{mutates:_,format:v,compatibility:g,name:E},,S]=t[m];if(i>f){if(d<S&&r.splice(h,1))continue;u=!1;break}if(_&&!(u=!1))break;if(l)break;if((o(E)||g||!(d<S)||!r.splice(h,1))&&(!l&&!v)){u=!1;break}}u&&r.push(a)}return r}},60711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],a=0;a<e.length;++a)for(var r=0;r<e[a].length;++r){var[s,i]=e[a][r];t.push([s,i,a])}return t}},47028:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=1/0){return d(e,(0,i.default)(t),a)},t._parse=d;var s=r(a(88980)),i=r(a(60711)),n=r(a(16408)),o=r(a(18998)),l=a(86145);function d(e,t,a=1/0){var r=(0,n.default)(e,t,a),i=r.length?(0,o.default)(e,(0,s.default)(r,t),t):{children:[{type:"text",value:e}]};return a<(0,l.numCodepoints)(e)&&u(i,{limit:a}),i}function u(e,t){if(!(t.limit<=0))if(e.type&&"text"===e.type)if(e.value.length>=t.limit){var a=(0,l.toArray)(e.value);a.length>=t.limit&&(a=a.slice(0,t.limit)),e.value=a.join(""),t.limit=t.limit-a.length}else t.limit=t.limit-e.value.length;else if(!e.type||"delimiter"!==e.type){for(var r=0;r<e.children.length&&(u(e.children[r],t),!(t.limit<=0));)r++;e.children=e.children.slice(0,r+1)}}},16408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a=1/0){for(var r=[],s=0;s<t.length;++s){for(var[i,n]=t[s],o=i.match(e,n,a),l=[],{length:d}=o,u=0,c=o[u];u<d;c=o[++u])l[u]=[c[0],c[1],c[2],c[3],s,c[4]];l.length&&r.push(l)}for(var h=0;h<r.length;h++){var{conflictResolvers:f}=t[r[h][0][4]][0];if(f)for(var p=0;p<r.length;p++){var m=t[r[p][0][4]][0],_=f.get(m);_&&_(r[h],r[p])}}for(var v=[],g=0;g<r.length;++g)v[g]=r[g].length-1;var E=[],S=0;for(;r.length;){for(var C=0,y=-1;C<r.length;++C)r[C][v[C]][0]>y&&(S=C,y=r[C][v[C]][0]);E.push(r[S][v[S]]),--v[S]<0&&(r.splice(S,1),v.splice(S,1))}return E}},18998:(e,t,a)=>{"use strict";function r({format:e},t,a){for(var r=[],s=function(e){var t=e,a=[];do{t.mutator&&a.push(t.mutator)}while(t.parent&&(t=t.parent));return a}(a),i=0;i<t.length;++i)(e||t[i][0].compatibility)&&(s.includes(t[i][0])||r.push(t[i]));return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){for(var i={children:[]},n=0,o=i,l=0,d=0;d<t.length;++d){for(var u=t[d],[c,h]=u;o.parent&&c>(l=o.match[2]);){if(n<=l&&o.children.push({type:"text",value:e.substring(n,l+1)}),n=o.match[3]+1,o.mutator.fragment){var{children:f}=o.parent;f.pop(),f.push.apply(f,o.children)}l!==o.match[3]&&o.parent.children.push({type:"delimiter",value:e.substring(l+1,n)}),o=o.parent}n<c&&o.children.push({type:"text",value:e.substring(n,c)});var[p,m]=s[u[4]],{mutates:_}=p;n=h,c!==h&&o.children.push({type:"delimiter",value:e.substring(c,h)});var v={children:[],match:u,mutator:p,opts:m,parent:o};if(_){var g=e.substring(u[1],u[2]+1),E=p.mutate(g,u[5]),S=r(p,s,v),C=(0,a(47028)._parse)(E,S);v.children=C.children,n=u[2]+1}o.children.push(v),o=v}do{if(o.match){var[,,y,b]=o.match;if(n<=y&&o.children.push({type:"text",value:e.substring(n,y+1)}),n=b+1,o.mutator.fragment){var{children:T}=o.parent;T.pop(),T.push.apply(T,o.children)}y!==b&&o.parent.children.push({type:"delimiter",value:e.substring(y+1,n)})}}while(o.parent&&(o=o.parent)&&o.parent);n!==e.length&&o.children.push({type:"text",value:e.substring(n)});return i}},41222:(e,t)=>{"use strict";function a(e,t,r){return t.reduce(((t,s)=>(t.push(function(e,t,r){if(t.type){var{value:s}=t;switch(t.type){case"text":return e.onText(s,r);case"delimiter":return e.onDelimiter(s,r);default:throw new Error("Invalid node type")}}return e.onMutator(t.mutator,a(e,t.children,r),t.match[5],t.opts,r)}(e,s,r)),t)),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return e.onRoot(a(e,t.children,r),r)}},87952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{static onMutator(){throw new Error("Subclasses of `Serializer` must override `onMutator()`")}static onRoot(){throw new Error("Subclasses of `Serializer` must override `onRoot()`")}static onText(){throw new Error("Subclasses of `Serializer` must override `onText()`")}static onDelimiter(){throw new Error("Subclasses of `Serializer` must override `onDelimiter()`")}}},89659:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JSXSerializer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TextSerializer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"UnformatSerializer",{enumerable:!0,get:function(){return n.default}});var s=r(a(78144)),i=r(a(48486)),n=r(a(2644))},78144:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(2784)),n=r(a(96784)),o=r(a(87952));class l extends o.default{}function d(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];if(void 0!==r)if("string"!=typeof r){var s="jsx-child-".concat(a);t.push(i.cloneElement(r,{key:s}))}else t.push(r)}return t}t.default=l,l.onText=n.default,l.onDelimiter=()=>{},l.onRoot=e=>d(e),l.onMutator=(e,t,a,r)=>e.jsx(d(t),a,r)},96784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e},48486:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(87952));class i extends s.default{}t.default=i,i.onDelimiter=e=>e,i.onMutator=(e,t)=>t.join(""),i.onRoot=e=>e.join(""),i.onText=e=>e},2644:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(87952));class i extends s.default{}function n(e){return e.filter(Boolean).join("")}t.default=i,i.onDelimiter=()=>{},i.onMutator=(e,t)=>null!=e.unformatDecorations?n([e.unformatDecorations.pre,...t,e.unformatDecorations.post]):n(t),i.onRoot=e=>n(e),i.onText=e=>e},73540:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!0,a=!1){var r,s,o=e.safe();if(v.default.supportsFeature(v.default.F.MD_BACKEND)&&e.mdDowngrade&&a)return g.default.t(1727);switch(o.type){case b.BUTTONS_RESPONSE:case b.TEMPLATE_BUTTON_REPLY:case b.HSM:return t?(0,S.default)(e,e.body):e.body;case b.CIPHERTEXT:return g.default.t(1182);case b.REVOKED:return e.isSentByMe?g.default.t(1267):g.default.t(1265);case b.CHAT:if(e.isFromTemplate)return e.title?t?(0,S.default)(e,e.title+" "+e.body):"*"+e.title+"* "+e.body:t?(0,S.default)(e,e.body):e.body;if(e.isDynamicReplyButtonsMsg&&e.title){var M=T(e.body,e);if(null!=M)return t?(0,S.default)(e,e.title+"\n"+M):"*".concat(e.title,"*\n").concat(M)}return t?(0,S.default)(e,e.body):e.body;case b.IMAGE:if(o.isViewOnce)return(0,y.isUnviewed)(o)?g.default.t(1472):(0,y.isExpired)(o)?g.default.t(1469):g.default.t(1478);var N=T(e.caption,e);return N?t?(0,S.default)(e,N):N:g.default.t(1625);case b.VIDEO:if(o.isViewOnce)return(0,y.isUnviewed)(o)?g.default.t(1477):(0,y.isExpired)(o)?g.default.t(1469):g.default.t(1478);var I=T(e.caption,e);return I?t?(0,S.default)(e,I):I:e.isGif?"GIF":g.default.t(1630);case b.STICKER:return g.default.t(1629);case b.PTT:var P=n.default.durationStr(e.duration);return P||g.default.t(1631);case b.AUDIO:return g.default.t(1621);case b.LOCATION:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){var A=T(e.caption,e);return A?t?(0,S.default)(e,A):A:e.loc||g.default.t(1627)}return e.isLive?e.comment||g.default.t(1626):e.loc||g.default.t(1627);case b.GROUP_NOTIFICATION:case b.GP2:return(0,f.default)(e,a);case b.BROADCAST_NOTIFICATION:return(0,d.default)(e);case b.NOTIFICATION:return e.body;case b.VCARD:return e.vcardFormattedName||g.default.t(1622);case b.GROUPS_V4_INVITE:return v.default.supportsFeature(v.default.F.GROUPS_V_4_JOIN_PERMISSION)?g.default.t(796):g.default.t(490);case b.MULTI_VCARD:return(0,C.getNameString)(e.vcardList);case b.DOCUMENT:if(e.isFromTemplate||e.isDynamicReplyButtonsMsg){var O=e.pageCount>0?g.default.t(1623,{count:e.pageCount+"",_plural:e.pageCount}):null,D=T(e.caption,e);return D?t?(0,S.default)(e,D):D:(0,i.default)([D||g.default.t(1624),O]).join("  ")}if(e.isVcardOverMmsDocument&&e.mediaData.parsedVcards)return function(e){if(e.length>1){var t=e.map((e=>(0,C.vcardGetNameFromParsed)(e))).filter(Boolean);return(0,C.getNameStringFromNames)(t)}return(0,C.vcardGetNameFromParsed)(e[0])||g.default.t(244)}(e.mediaData.parsedVcards);var w=e.pageCount>0?g.default.t(1623,{count:e.pageCount+"",_plural:e.pageCount}):null;return(0,i.default)([e.mediaData.filename||g.default.t(1624),w]).join("  ");case b.E2E_NOTIFICATION:return(0,c.default)(o);case b.CALL_LOG:return(0,u.default)(e,!1);case b.PRODUCT:return e.text?t?(0,S.default)(e,e.text):e.text:g.default.t(1628);case b.OVERSIZED:return(0,m.formatOversizedMsgText)(e);case b.UNKNOWN:return(0,_.formatUnknownMsgText)(e);case b.PAYMENT:return function(e){switch(e.subtype){case"ciphertext":return g.default.t(1773);case"futureproof":return g.default.t(1775);case"send":var t=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?l.format(e.paymentCurrency,e.paymentAmount1000):g.default.t(1171))+t;case"request":var a=e.paymentNoteMsg&&e.paymentNoteMsg.body?" - "+e.paymentNoteMsg.body:"";return(e.paymentCurrency&&e.paymentAmount1000?l.format(e.paymentCurrency,e.paymentAmount1000):g.default.t(1171))+a;default:return g.default.t(492)}}(e);case b.NOTIFICATION_TEMPLATE:return(0,p.default)(e);case b.PROTOCOL:return"ephemeral_setting"===e.subtype?(0,h.default)(e.ephemeralDuration||0,e.from,e.id.remote):"";case b.ORDER:return e.message||"";case b.LIST:var R,k;return(0,E.listMsgCanRender)(e)?[null===(R=e.list)||void 0===R?void 0:R.title,null===(k=e.list)||void 0===k?void 0:k.description,e.footer].filter(Boolean).join("\n"):(0,_.formatUnknownMsgText)(e);case b.LIST_RESPONSE:return"".concat((null===(r=e.listResponse)||void 0===r?void 0:r.title)||""," ").concat((null===(s=e.listResponse)||void 0===s?void 0:s.description)||"");default:return""}};var i=s(a(60417)),n=s(a(19899)),o=s(a(50935)),l=r(a(37356)),d=s(a(55814)),u=s(a(2572)),c=s(a(72256)),h=s(a(66685)),f=s(a(63205)),p=s(a(30866)),m=a(69774),_=a(72649),v=s(a(18120)),g=s(a(17957)),E=a(57556),S=s(a(4105)),C=a(84990),y=a(89526),b=o.default.MSG_TYPE;function T(e,t){if(null==e)return null;var a=!0===t.isDynamicReplyButtonsMsg;return t.footer&&a?"".concat(e,"\n").concat(t.footer):e}},69774:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatOversizedMsgText=function(){return i.default.isElectron?s.default.t(1167):s.default.t(1168)},t.formatOversizedMsgNotification=function(){return s.default.t(1168)};var s=r(a(17957)),i=r(a(77626))},18097:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a,r,s,i,l,P="",A=e.dir,O=e.safe(),D=!(null===(t=O.asViewOnce)||void 0===t?void 0:t.isViewOnce)&&S.default.getGlobalPreviews();!(0,v.getMaybeMeUser)().equals(e.from)&&e.isGroupMsg&&(P=e.displayName());switch(O.type){case I.CHAT:if(D)s=(0,y.default)(e,e.body);else if(e.isGroupMsg)s=P?g.default.t(830,{author:P}):g.default.t(829),P="";else{var w=e.chat;s=g.default.t(831,{unreadCount:g.default.n(w.unreadCount),_plural:w.unreadCount})}break;case I.IMAGE:i="",C.default.hasEmoji&&(i=O.isViewOnce?"1 ":" "),s=i+(D&&(0,y.default)(e,e.caption)||g.default.t(1625));break;case I.PRODUCT:i=C.default.hasEmoji?" ":"",s=i+(e.text&&(0,y.default)(e,e.text)||g.default.t(1628));break;case I.STICKER:i=C.default.hasEmoji?" ":"",s=i+g.default.t(1629);break;case I.VIDEO:e.isGif?(i=C.default.hasEmoji?" ":"",l=D&&(0,y.default)(e,e.caption)||"GIF"):(i="",C.default.hasEmoji&&(i=O.isViewOnce?"1 ":" "),l=D&&(0,y.default)(e,e.caption)||g.default.t(1630),O.isViewOnce||(l="".concat(l," (").concat(o.default.durationStr(e.duration),")"))),s="".concat(i).concat(l);break;case I.PTT:i=C.default.hasEmoji?" ":"",s="".concat(i," ").concat(g.default.t(1631)," (").concat(o.default.durationStr(e.duration),")");break;case I.AUDIO:i=C.default.hasEmoji?" ":"",s="".concat(i," ").concat(g.default.t(1621)," (").concat(o.default.durationStr(e.duration),")");break;case I.LOCATION:i=C.default.hasEmoji?" ":"",l=e.isLive?D&&(0,y.default)(e,e.comment)||g.default.t(1626):D&&e.loc||g.default.t(1627),s="".concat(i," ").concat(l);break;case I.GROUPS_V4_INVITE:s=g.default.t(490);break;case I.GROUP_NOTIFICATION:case I.GP2:s=(0,p.default)(e,!0),P="";break;case I.BROADCAST_NOTIFICATION:s=(0,c.default)(e);break;case I.NOTIFICATION:s=e.body;break;case I.VCARD:i=C.default.hasEmoji?" ":"",s=i+(e.subtype||g.default.t(1622));break;case I.MULTI_VCARD:i=C.default.hasEmoji?" ":"",s=i+(0,b.getNameString)(e.vcardList);break;case I.DOCUMENT:if(e.isVcardOverMmsDocument){i=C.default.hasEmoji?" ":"",s=i+(e.filename||g.default.t(1033,{count:e.pageCount,_plural:e.pageCount}));break}i=C.default.hasEmoji?" ":"",s=i+(e.subtype||g.default.t(1624));break;case I.E2E_NOTIFICATION:s=(0,f.default)(O);break;case I.CALL_LOG:s=(0,h.default)(e,!1);break;case I.CIPHERTEXT:s=g.default.t(1182);break;case I.REVOKED:s=e.isSentByMe?g.default.t(1267):g.default.t(1265);break;case I.PAYMENT:s=function(e){var t;if(!e.paymentCurrency||!e.paymentAmount1000)return g.default.t(1774);if("send"!==e.subtype&&"request"!==e.subtype)return g.default.t(492);var a=u.format(e.paymentCurrency,e.paymentAmount1000),r=(0,T.default)(e.sender),s=(0,T.default)(e.paymentMessageReceiverJid),i=d.default.get(e.paymentMessageReceiverJid),n={senderName:r,receiverName:s,amount:a,_plural:e.paymentAmount1000/1e3};t="send"===e.subtype?e.isGroupMsg?i&&i.isMe?g.default.t(1781,n):g.default.t(1782,n):g.default.t(1780,n):e.isGroupMsg?i&&i.isMe?g.default.t(1778,n):g.default.t(1779,n):g.default.t(1777,n);return t}(e);break;case I.OVERSIZED:s=(0,m.formatOversizedMsgNotification)(e);break;case I.UNKNOWN:s=(0,_.formatUnknownMsgNotification)(e);break;case I.LIST:if((0,E.listMsgCanRender)(O)){var R,k;s="".concat((null===(R=e.list)||void 0===R?void 0:R.title)||""," ").concat((null===(k=e.list)||void 0===k?void 0:k.description)||"");break}return __LOG__(3)(N(),e.type),"";case I.LIST_RESPONSE:s="".concat((null===(a=e.listResponse)||void 0===a?void 0:a.title)||""," ").concat((null===(r=e.listResponse)||void 0===r?void 0:r.description)||"");break;default:return __LOG__(3)(M(),e.type),""}var L=g.default.isRTL()?"rtl":"ltr",x="";if(x=o.default.relativeStr(e.t),P){var F=n.dir(P);return"ltr"!==L||A&&"ltr"!==A||F&&"ltr"!==F?"ltr"!==L||A&&"ltr"!==A?"ltr"!==L||F&&"ltr"!==F?"ltr"===L?(x&&(x="- ".concat(x,"")),"".concat(P,": ").concat(s,"").concat(x)):A&&"rtl"!==A||F&&"rtl"!==F?A&&"rtl"!==A?F&&"rtl"!==F?(x&&(x="- ".concat(x,"")),"".concat(P,": ").concat(s,"").concat(x)):(x&&(x=" - ".concat(x)),"".concat(P,": ").concat(s,"")):(x&&(x=" - ".concat(x)),"".concat(P,": ").concat(s,"")):(x&&(x=" - ".concat(x)),"".concat(P,": ").concat(s,"")):(x&&(x=" - ".concat(x)),"".concat(P,": ").concat(s,"")):(x&&(x=" - ".concat(x)),"".concat(P,": ").concat(s,"")):(x&&(x=" - ".concat(x)),"".concat(P,": ").concat(s,""))}return x?"ltr"===L?"".concat(s," - ").concat(x,""):"".concat(s," - ").concat(x,""):s};var i=s(a(19976)),n=r(a(82704)),o=s(a(19899)),l=s(a(50935)),d=s(a(7470)),u=r(a(37356)),c=s(a(55814)),h=s(a(2572)),f=s(a(72256)),p=s(a(63205)),m=a(69774),_=a(72649),v=a(95595),g=s(a(17957)),E=a(57556),S=s(a(85059)),C=s(a(77626)),y=s(a(4105)),b=a(84990),T=s(a(63237));function M(){var e=(0,i.default)(["asDesktopNotification: Unrecognized type ",""]);return M=function(){return e},e}function N(){var e=(0,i.default)(["asDesktopNotification: Unrecognized type ",""]);return N=function(){return e},e}var I=l.default.MSG_TYPE},37136:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=s.default.get(e),r=null==a?void 0:a.name;return!r||r===t};var s=r(a(7470))},55814:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{subtype:t,body:a,recipients:r}=e;if("create"===t){var n=parseInt(a,10);return i.default.t(1897,{_plural:n,count:n})}if("add"===t){var o=r.length;return i.default.t(1722,{_plural:o,name:(0,s.getFormattedNames)(r,!0)})}if("remove"===t){var l=r.length;return i.default.t(1723,{_plural:l,name:(0,s.getFormattedNames)(r,!0)})}return""};var s=a(45880),i=r(a(17957))},2572:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a="";switch(e.subtype){case"miss":a=t?i.default.t(1755,{time:s.default.timestampStr(e.t),_plural:s.default.timestampHour(e.t)}):i.default.t(1754);break;case"miss_video":a=t?i.default.t(1753,{time:s.default.timestampStr(e.t),_plural:s.default.timestampHour(e.t)}):i.default.t(1752);break;case"miss_group":a=t?i.default.t(1751,{time:s.default.timestampStr(e.t),_plural:s.default.timestampHour(e.t)}):i.default.t(1750);break;case"miss_group_video":a=t?i.default.t(1749,{time:s.default.timestampStr(e.t),_plural:s.default.timestampHour(e.t)}):i.default.t(1748)}return a};var s=r(a(19899)),i=r(a(17957))},72256:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a="";switch(e.subtype){case"identity":if((t=null==e.body?null:i.default.get(e.body))&&t.isMe){__LOG__(4,void 0,new Error,!0)(f()),SEND_LOGS("SelfIdentityNotificationError");var r=e.chat;if(r.isUser){var s=r.contact?r.contact.formattedName:(0,h.default)(r.id);a=d.default.t(1822,{contactName:s})}else r.isGroup?a=d.default.t(1710):r.isBroadcast&&(a=d.default.t(1585))}else{var p=t?t.formattedName:(0,h.default)(e.body);a=d.default.t(1822,{contactName:p})}break;case"device":a=(0,n.default)(e);break;case"encrypt":var m=e.id.remote;if(c.default.isGroup(m))a=e.chat.isSupportGroup()?d.default.t(1381):u.default.isGroupCallEnabled()?d.default.t(1675):d.default.t(1672);else if(c.default.isBroadcast(m))a=d.default.t(1583);else if(c.default.isOfficialBizAccount(m))a=d.default.t(1760);else if((t=i.default.get(m))&&t.isEnterprise){var _=(0,o.default)(t);a=(0,l.bspUiEnabled)()?d.default.t(1606):d.default.t(1607,{businessName:_})}else a=d.default.t(1606);break;case"encrypt_now":a=d.default.t(747)}return a};var s=r(a(19976)),i=r(a(7470)),n=r(a(82785)),o=r(a(4357)),l=a(75459),d=r(a(17957)),u=r(a(43711)),c=r(a(68384)),h=r(a(3111));function f(){var e=(0,s.default)(["formatE2ENotification: receive identity notification of self"]);return f=function(){return e},e}},82785:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){(0,s.default)("device"===e.subtype,"Shouldn't call this function if msg is not a device notification msg");var a,r=e.body?i.default.get(e.body):null,l=1===e.devicesAdded&&0===e.devicesRemoved,d=0===e.devicesAdded&&1===e.devicesRemoved,u=!l&&!d;if(r&&r.isMe){var c=e.chat;if(c.isUser){var h=c.contact.formattedName;t?l?a=e.isThisDeviceAdded?n.default.t(1580,{contactName:h}):n.default.t(1578,{contactName:h}):d?a=n.default.t(1818,{contactName:h}):u&&(a=n.default.t(1598,{contactName:h})):a=n.default.t(1822,{contactName:h})}else c.isGroup?t?l?a=e.isThisDeviceAdded?n.default.t(1641):n.default.t(1579):d?a=n.default.t(1819):u&&(a=n.default.t(1599)):a=n.default.t(1710):c.isBroadcast&&(t?l?a=e.isThisDeviceAdded?n.default.t(1581):n.default.t(1577):d?a=n.default.t(1817):u&&(a=n.default.t(1597)):a=n.default.t(1585))}else{var f=e.body,p=(r=null==f?null:i.default.get(f))?r.formattedName:(0,o.default)(f);t?l?a=n.default.t(1575,{contactName:p}):d?a=n.default.t(1816,{contactName:p}):u&&(a=n.default.t(1596,{contactName:p})):a=n.default.t(1822,{contactName:p})}return(0,s.default)(null!=a,"text shouldn't be null in the end"),a};var s=r(a(47677)),i=r(a(7470)),n=r(a(17957)),o=r(a(3111))},4357:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.verifiedLevel===s.default.VERIFIED_LEVEL.HIGH?e.verifiedName:e.formattedName};var s=r(a(50935))},66685:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var r=s.default.gadd(a),u=l.default.isUser(a)||(null==r?void 0:r.groupMetadata.canSetEphemeralSetting());if(!t)return u?(0,o.getEphemeralSettingChangeByUnknownAsAdminString)(e):(0,o.getEphemeralSettingChangeByUnknownString)(e);var c=i.default.gadd(t);if(l.default.equals(t,(0,n.getMaybeMeUser)()))return u?(0,o.getEphemeralSettingChangeByYouAsAdminString)(e):(0,o.getEphemeralSettingChangeByYouString)(e);var h=c&&c.isMyContact?c.formattedName:(0,d.default)(t);if(u)return(0,o.getEphemeralSettingChangeByOthersAsAdminString)(e,h);return(0,o.getEphemeralSettingChangeByOthersString)(e,h)};var s=r(a(43334)),i=r(a(7470)),n=a(95595),o=a(13735),l=r(a(68384)),d=r(a(3111))},63205:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,r,s="",p=e.get("type"),m=e.get("subtype"),_=e.displayName(),v=e.get("author"),g=e.get("body"),E=""===_||null==_;if("group_notification"===p){var S=(0,o.getMaybeMeUser)();switch(m){case"add":s=u.default.equals(v,S)?d.default.t(1683):d.default.t(1682,{name:_});break;case"remove":s=u.default.equals(v,S)?d.default.t(1695):d.default.t(1694,{name:_});break;case"leave":s=u.default.equals(v,S)?d.default.t(1691):d.default.t(1690,{name:_});break;case"picture":s="remove"===g?u.default.equals(v,S)?d.default.t(1811):d.default.t(1810,{name:_}):u.default.equals(v,S)?d.default.t(1809):d.default.t(1808,{name:_});break;case"subject":s=u.default.equals(v,S)?d.default.t(1713,{subject:g}):E?d.default.t(1712,{subject:g}):d.default.t(1711,{name:_,subject:g});break;case"modify":a=(0,c.default)(e.get("author")),r=(0,c.default)(g),s=a===_?d.default.t(1685,{name:_,new_number:r}):d.default.t(1684,{name:_});break;default:__LOG__(2)(f(),m)}}else if("gp2"===p){var C,y=e.recipients,b=y?(0,l.getFormattedNames)(y,!0):"",T=y?y[0]:void 0,M=T?i.default.get(T):void 0,N=M?M.get("formattedName"):T?(0,c.default)(T):"",I=(0,o.getMaybeMeUser)();switch(m){case"add":s=v?u.default.equals(v,I)?d.default.t(1704,{participants:b}):u.default.equals(T,I)?E?d.default.t(1701):d.default.t(1697,{name:_}):E?d.default.t(1700,{participants:b}):d.default.t(1696,{name:_,participants:b}):u.default.equals(T,I)?d.default.t(1683):d.default.t(1682,{name:N});break;case"remove":s=!u.default.equals(T,I)||!u.default.equals(v,I)&&v?u.default.equals(T,I)&&v?E?d.default.t(1703):d.default.t(1699,{name:_}):u.default.equals(v,I)?d.default.t(1705,{participants:b}):v?E?d.default.t(1702,{participants:b}):d.default.t(1698,{name:_,participants:b}):d.default.t(1694,{name:N}):d.default.t(1695);break;case"leave":s=u.default.equals(T,I)?d.default.t(1691):d.default.t(1690,{name:b});break;case"picture":s="remove"===g?u.default.equals(v,I)?d.default.t(1811):d.default.t(1810,{name:_}):u.default.equals(v,I)?d.default.t(1809):d.default.t(1808,{name:_});break;case"subject":s=u.default.equals(v,I)?d.default.t(1713,{subject:g}):E?d.default.t(1712,{subject:g}):d.default.t(1711,{name:_,subject:g});break;case"modify":a=(0,c.default)(v),r=(0,c.default)(T),s=a===_?d.default.t(1685,{name:_,new_number:r}):d.default.t(1684,{name:_});break;case"create":s=u.default.equals(v,I)?g?d.default.t(1652,{subject:g}):d.default.t(1653):g?E?d.default.t(1651,{subject:g}):d.default.t(1649,{name:_,subject:g}):E?d.default.t(1648):d.default.t(1650,{name:_});break;case"delete":s=e.chat.isSupportGroup()?d.default.t(1370):d.default.t(1668);break;case"promote":C=y.length,s=1===C&&u.default.equals(T,I)?d.default.t(1693):d.default.t(1692,{participants:b,_plural:C});break;case"demote":C=y.length,s=1===C&&u.default.equals(T,I)?d.default.t(1687):d.default.t(1686,{participants:b,_plural:C});break;case"invite":s=u.default.equals(T,I)?d.default.t(1689):d.default.t(1688,{name:N});break;case"revoke_invite":s=u.default.equals(v,I)?d.default.t(1677):d.default.t(1676,{name:_});break;case"description":var P=t?E?d.default.t(1665):d.default.t(1663,{name:_}):E?d.default.t(1664):d.default.t(1662,{name:_});s=u.default.equals(v,I)?d.default.t(1666):P;break;case"announce":s="on"===g?u.default.equals(v,I)?d.default.t(1647):d.default.t(1646,{name:_}):u.default.equals(v,I)?d.default.t(1645):d.default.t(1644,{name:_});break;case"restrict":s="on"===g?u.default.equals(v,I)?d.default.t(1709):d.default.t(1708,{name:_}):u.default.equals(v,I)?d.default.t(1707):d.default.t(1706,{name:_});break;case"no_frequently_forwarded":s="on"===g?u.default.equals(v,I)?d.default.t(1681):d.default.t(1680,{name:_}):u.default.equals(v,I)?d.default.t(1679):d.default.t(1678,{name:_});break;case"announce_msg_bounce":s=d.default.t(1643);break;case"v4_add_invite_sent":s=d.default.t(1441,{participants:b,_plural:y.length});break;case"v4_add_invite_join":s=d.default.t(1440,{participants:b,_plural:y.length});break;case"ephemeral":var A=parseInt(e.templateParams[0],10)||0,O=e.templateParams[1],D=e.id.remote;return(0,n.default)(A,O,D);default:__LOG__(2)(h(),m)}}d.default.isRTL()&&(s=d.default.forceRTL(s));return s};var s=r(a(19976)),i=r(a(7470)),n=r(a(66685)),o=a(95595),l=a(45880),d=r(a(17957)),u=r(a(68384)),c=r(a(3111));function h(){var e=(0,s.default)(["wa:formatGroupNotification:unknown message subtype: ",""]);return h=function(){return e},e}function f(){var e=(0,s.default)(["wa:formatGroupNotification:unknown message subtype: ",""]);return f=function(){return e},e}},65308:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{id:t}=e;switch(e.subtype){case"non_verified_transition":return o.default.t(1757,{businessName:(0,i.default)(e)});case"unverified_transition":return o.default.t(1871,{businessName:(0,i.default)(e)});case"verified_transition":return o.default.t(1877,{businessName:(0,i.default)(e)});case"verified_low_unknown":return o.default.t(1875,{businessName:(0,i.default)(e)});case"verified_high":return o.default.t(1873,{businessName:(0,i.default)(e)});case"verified_initial_unknown":return o.default.t(1847,{businessName:e.displayName()});case"verified_initial_low":return o.default.t(1845);case"verified_initial_high":return o.default.t(1843);case"verified_transition_any_to_none":return o.default.t(1851);case"verified_transition_any_to_high":return o.default.t(1849);case"verified_transition_high_to_low":return o.default.t(1853,{businessName:(0,i.default)(e)});case"verified_transition_high_to_unknown":return o.default.t(1855,{businessName:(0,i.default)(e)});case"verified_transition_unknown_to_low":return o.default.t(1863);case"verified_transition_low_to_unknown":return o.default.t(1857,{businessName:(0,i.default)(e)});case"verified_transition_none_to_low":return o.default.t(1859,{businessName:(0,i.default)(e)});case"verified_transition_none_to_unknown":return o.default.t(1861,{businessName:e.displayName()});case"biz_verified_transition_top_to_bottom":return o.default.t(278,{businessName:(0,i.default)(e)});case"biz_verified_transition_bottom_to_top":return o.default.t(276,{businessName:(0,i.default)(e)});case"biz_intro_top":var a=(0,i.default)(e),r=l.default.isOfficialBizAccount(t.remote);return(0,s.default)(t.remote,a)?r?o.default.t(1142):o.default.t(259,{businessName:a}):r?o.default.t(1143):o.default.t(260,{businessName:a});case"biz_intro_bottom":return o.default.t(257,{businessName:(0,d.default)(t.remote)});case"biz_name_change":return o.default.t(264,{businessName:(0,i.default)(e)});case"biz_move_to_consumer_app":return o.default.t(262);case"biz_two_tier_migration_top":var u=(0,i.default)(e);return(0,s.default)(t.remote,u)?o.default.t(273,{businessName:u}):o.default.t(274,{businessName:u});case"biz_two_tier_migration_bottom":return o.default.t(271,{businessName:(0,d.default)(t.remote)});case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_verified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_verified_to_bsp_premise_unverified":return o.default.t(285,{businessName:(0,i.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return o.default.t(286);case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_self_fb_unverified":case"blue_msg_to_bsp_fb":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_self_fb_unverified":return o.default.t(287,{businessName:(0,i.default)(e)});case"blue_msg_self_fb_verified":var c=(0,n.default)(e.chat.id.user),h=(0,i.default)(e);return c?o.default.t(288,{businessName:h}):o.default.t(287,{businessName:h});case"blue_msg_self_premise_unverified":return o.default.t(289,{businessName:(0,i.default)(e)});case"blue_msg_self_premise_verified":var f=(0,i.default)(e);return(0,s.default)(t.remote,f)?o.default.t(290,{businessName:f}):o.default.t(291,{businessName:f});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_verified_to_unverified":return o.default.t(294,{businessName:(0,i.default)(e)});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_unverified_to_verified":var p=(0,i.default)(e);return(0,s.default)(t.remote,p)?o.default.t(292,{businessName:p}):o.default.t(293,{businessName:p});default:return""}};var s=r(a(37136)),i=r(a(96244)),n=r(a(58688)),o=r(a(17957)),l=r(a(68384)),d=r(a(63237))},30866:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var{templateParams:t,id:a}=e;switch(e.subtype){case"non_verified_transition":return h.default.t(1758);case"unverified_transition":return h.default.t(1872);case"verified_transition":return h.default.t(1878);case"verified_low_unknown":return h.default.t(1876);case"verified_high":return h.default.t(1874);case"verified_initial_unknown":return h.default.t(1846);case"verified_initial_low":return h.default.t(1844,{businessName:(0,u.default)(e)});case"verified_initial_high":return h.default.t(1842,{businessName:(0,u.default)(e)});case"verified_transition_any_to_none":return h.default.t(1850);case"verified_transition_any_to_high":return h.default.t(1848,{businessName:(0,u.default)(e)});case"verified_transition_high_to_low":return h.default.t(1852,{businessName:(0,u.default)(e)});case"verified_transition_high_to_unknown":return h.default.t(1854,{businessName:(0,u.default)(e)});case"verified_transition_unknown_to_low":return h.default.t(1862,{businessName:(0,u.default)(e)});case"verified_transition_low_to_unknown":return h.default.t(1856,{businessName:(0,u.default)(e)});case"verified_transition_none_to_low":return h.default.t(1858);case"verified_transition_none_to_unknown":return h.default.t(1860);case"change_number":var r=t[0],s=n.default.get(r),v=s&&s.isMyContact?s.formattedName:(0,m.default)(r);return p.default.equals(e.chat.id,r)?h.default.t(465,{name:v}):h.default.t(464,{name:v});case"payment_transaction_status_update_failed":return h.default.t(1797,{receiverName:(0,_.default)(t[0]),relativeTime:i.default.paymentTimestampStr(e.t)});case"payment_transaction_request_cancelled":var g=t[0],E=(0,_.default)(g),S=t[1],C=parseInt(t[2],10),y=o.format(S,C),b={contactName:E,currencyAndAmount:y,_plural:C/1e3};return e.id.fromMe?h.default.t(1766,b):h.default.t(1765,b);case"payment_transaction_status_update_refunded":return h.default.t(1799,{receiverName:(0,_.default)(t[0]),relativeTime:i.default.paymentTimestampStr(e.t)});case"payment_transaction_status_update_refund_failed":return h.default.t(1798,{receiverName:(0,_.default)(t[0]),relativeTime:i.default.paymentTimestampStr(e.t)});case"payment_transaction_status_receiver_pending_setup":var T=t[0],M=(0,_.default)(T),N=t[1],I=parseInt(t[2],10),P=o.format(N,I);return h.default.t(1794,{senderName:M,currencyAndAmount:P,_plural:I/1e3});case"payment_transaction_status_receiver_success_after_hiccup":return h.default.t(1795,{senderName:(0,_.default)(t[0]),relativeTime:i.default.paymentTimestampStr(e.t)});case"payment_action_account_setup_reminder":return h.default.t(1764,{senderName:(0,_.default)(t[0])});case"payment_action_send_payment_reminder":return h.default.t(1772,{receiverName:(0,_.default)(t[0])});case"payment_action_send_payment_invitation":return h.default.t(1771,{receiverName:(0,_.default)(t[0])});case"payment_action_request_declined":var A=t[0],O=(0,_.default)(A),D=t[1],w=parseInt(t[2],10),R=o.format(D,w),k={contactName:O,currencyAndAmount:R,_plural:w/1e3};return e.id.fromMe?h.default.t(1768,k):h.default.t(1767,k);case"payment_action_request_expired":var L=t[0],x=(0,_.default)(L),F=t[1],B=(0,_.default)(F),G=t[2],U=parseInt(t[3],10),j=o.format(G,U);return p.default.equals(L,(0,d.getMaybeMeUser)())?h.default.t(1770,{receiverName:B,currencyAndAmount:j,_plural:U/1e3}):h.default.t(1769,{senderName:x,currencyAndAmount:j,_plural:U/1e3});case"biz_verified_transition_top_to_bottom":return h.default.t(277,{businessName:(0,u.default)(e)});case"biz_verified_transition_bottom_to_top":return h.default.t(275,{businessName:(0,u.default)(e)});case"biz_intro_top":var V=e.id.remote;return p.default.isOfficialBizAccount(V)?h.default.t(1141):h.default.t(258,{businessName:(0,u.default)(e)});case"biz_intro_bottom":return h.default.t(256);case"biz_name_change":return h.default.t(263,{businessName:(0,u.default)(e)});case"biz_move_to_consumer_app":return h.default.t(261);case"biz_two_tier_migration_top":return h.default.t(272,{businessName:(0,u.default)(e)});case"biz_two_tier_migration_bottom":return h.default.t(270);case"blue_msg_e2e_identity_unavailable":return h.default.t(1290);case"blue_msg_bsp_fb_to_bsp_premise":return h.default.t(295,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_fb":return h.default.t(296,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_to_self_premise":return h.default.t(297,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_unverified":return h.default.t(298);case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":var H=(0,u.default)(e);return(0,l.default)(a.remote,H)?h.default.t(299,{businessName:H}):h.default.t(300,{businessName:H});case"blue_msg_bsp_fb_unverified_to_self_fb_verified":var W=(0,u.default)(e);return(0,l.default)(a.remote,W)?h.default.t(301,{businessName:W}):h.default.t(302,{businessName:W});case"blue_msg_bsp_fb_unverified_to_self_premise_verified":return h.default.t(303,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified":var Y=(0,u.default)(e);return(0,l.default)(a.remote,Y)?h.default.t(304,{businessName:Y}):h.default.t(305,{businessName:Y});case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":return h.default.t(306,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_fb_unverified":return h.default.t(307,{businessName:(0,u.default)(e)});case"blue_msg_bsp_fb_verified_to_self_premise_unverified":return h.default.t(308,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_to_self_premise":return h.default.t(309,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_unverified":return h.default.t(310);case"blue_msg_bsp_premise_unverified_to_self_premise_verified":return h.default.t(311,{businessName:(0,u.default)(e)});case"blue_msg_bsp_premise_verified":var K=(0,u.default)(e);return(0,l.default)(a.remote,K)?h.default.t(312,{businessName:K}):h.default.t(313,{businessName:K});case"blue_msg_bsp_premise_verified_to_self_premise_unverified":return h.default.t(314,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_fb_unverified":return h.default.t(315,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_bsp_premise_unverified":return h.default.t(316,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_fb_unverified":return h.default.t(317,{businessName:(0,u.default)(e)});case"blue_msg_consumer_to_self_premise_unverified":return h.default.t(318,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_bsp_premise":return h.default.t(319,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_to_self_premise":return h.default.t(320,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_unverified":return h.default.t(321);case"blue_msg_self_fb_unverified_to_bsp_premise_verified":var q=(0,u.default)(e);return(0,l.default)(a.remote,q)?h.default.t(322,{businessName:q}):h.default.t(323,{businessName:q});case"blue_msg_self_fb_unverified_to_self_premise_verified":return h.default.t(324,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified":var z=(0,u.default)(e),Q=(0,c.default)(e.chat.id.user);return(0,l.default)(a.remote,z)?Q?h.default.t(328,{businessName:z}):h.default.t(325,{businessName:z}):Q?h.default.t(327,{businessName:z}):h.default.t(326,{businessName:z});case"blue_msg_self_fb_verified_to_bsp_premise_unverified":return h.default.t(329,{businessName:(0,u.default)(e)});case"blue_msg_self_fb_verified_to_self_premise_unverified":return h.default.t(330,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_to_bsp_premise":return h.default.t(331,{businessName:(0,u.default)(e)});case"blue_msg_self_premise_unverified":return h.default.t(332);case"blue_msg_self_premise_verified":return h.default.t(333,{businessName:(0,u.default)(e)});case"blue_msg_to_bsp_fb":return h.default.t(334,{businessName:(0,u.default)(e)});case"blue_msg_to_consumer":return h.default.t(335,{businessName:(0,u.default)(e)});case"blue_msg_to_self_fb":return h.default.t(336,{businessName:(0,u.default)(e)});case"blue_msg_unverified_to_bsp_fb_verified":var X=(0,u.default)(e);return(0,l.default)(a.remote,X)?h.default.t(337,{businessName:X}):h.default.t(338,{businessName:X});case"blue_msg_unverified_to_bsp_premise_verified":var J=(0,u.default)(e);return(0,l.default)(a.remote,J)?h.default.t(339,{businessName:J}):h.default.t(340,{businessName:J});case"blue_msg_unverified_to_self_fb_verified":var Z=(0,u.default)(e);return(0,l.default)(a.remote,Z)?h.default.t(341,{businessName:Z}):h.default.t(342,{businessName:Z});case"blue_msg_unverified_to_verified":return h.default.t(343,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_fb_unverified":return h.default.t(344,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_bsp_premise_unverified":return h.default.t(345,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_self_fb_unverified":return h.default.t(346,{businessName:(0,u.default)(e)});case"blue_msg_verified_to_unverified":return h.default.t(347,{businessName:(0,u.default)(e)});default:return f.default.isElectron?h.default.t(1419):h.default.t(1423)}};var i=s(a(19899)),n=s(a(7470)),o=r(a(37356)),l=s(a(37136)),d=a(95595),u=s(a(96244)),c=s(a(58688)),h=s(a(17957)),f=s(a(77626)),p=s(a(68384)),m=s(a(3111)),_=s(a(63237))},96244:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.templateParams&&e.templateParams[0]?e.templateParams[0].toString():(0,s.default)(e.id.remote)};var s=r(a(63237))},56015:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"non_verified_transition":return(0,r.getNonVerifiedTransitionFaqUrl)();case"unverified_transition":return(0,r.getUnverifiedTransitionFaqUrl)();case"verified_transition":return(0,r.getVerifiedTransitionFaqUrl)();case"verified_low_unknown":return(0,r.getVerifiedLowUnknownFaqUrl)();case"verified_high":return(0,r.getVerifiedHighFaqUrl)();case"biz_intro_top":case"biz_intro_bottom":case"biz_two_tier_migration_bottom":case"biz_name_change":case"biz_verified_transition_top_to_bottom":case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":return(0,r.getBusinessFaqUrl)();case"blue_msg_bsp_fb_to_bsp_premise":case"blue_msg_bsp_fb_to_self_fb":case"blue_msg_bsp_fb_to_self_premise":case"blue_msg_bsp_fb_unverified":case"blue_msg_bsp_fb_unverified_to_bsp_premise_verified":case"blue_msg_bsp_fb_unverified_to_self_fb_verified":case"blue_msg_bsp_fb_unverified_to_self_premise_verified":case"blue_msg_bsp_fb_verified":case"blue_msg_bsp_fb_verified_to_bsp_premise_unverified":case"blue_msg_bsp_fb_verified_to_self_fb_unverified":case"blue_msg_bsp_fb_verified_to_self_premise_unverified":case"blue_msg_bsp_premise_to_self_premise":case"blue_msg_bsp_premise_unverified":case"blue_msg_bsp_premise_unverified_to_self_premise_verified":case"blue_msg_bsp_premise_verified":case"blue_msg_bsp_premise_verified_to_self_premise_unverified":case"blue_msg_consumer_to_bsp_fb_unverified":case"blue_msg_consumer_to_bsp_premise_unverified":case"blue_msg_consumer_to_self_fb_unverified":case"blue_msg_consumer_to_self_premise_unverified":case"blue_msg_self_fb_to_bsp_premise":case"blue_msg_self_fb_to_self_premise":case"blue_msg_self_fb_unverified":case"blue_msg_self_fb_unverified_to_bsp_premise_verified":case"blue_msg_self_fb_unverified_to_self_premise_verified":case"blue_msg_self_fb_verified":case"blue_msg_self_fb_verified_to_bsp_premise_unverified":case"blue_msg_self_fb_verified_to_self_premise_unverified":case"blue_msg_self_premise_to_bsp_premise":case"blue_msg_self_premise_unverified":case"blue_msg_self_premise_verified":case"blue_msg_to_bsp_fb":case"blue_msg_to_consumer":case"blue_msg_to_self_fb":case"blue_msg_unverified_to_bsp_fb_verified":case"blue_msg_unverified_to_bsp_premise_verified":case"blue_msg_unverified_to_self_fb_verified":case"blue_msg_unverified_to_verified":case"blue_msg_verified_to_bsp_fb_unverified":case"blue_msg_verified_to_bsp_premise_unverified":case"blue_msg_verified_to_self_fb_unverified":case"blue_msg_verified_to_unverified":return(0,r.getE2EEnterpriseFaqUrl)();default:return(0,r.getFaqUrl)()}};var r=a(95585)},4105:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=null!=t?t:"",r=e.mentionMap();if(!r)return function(e){return i.default.supportsFeature(i.default.F.RICH_TEXT)?(0,s.default)(e,l,o.UnformatSerializer):e}(a);var d=i.default.supportsFeature(i.default.F.RICH_TEXT)?n.Configuration.FormattedNotification({mentions:r}):n.Configuration.RawNotification({mentions:r});return(0,s.default)(a,d,o.UnformatSerializer)};var s=r(a(72034)),i=r(a(18120)),n=a(62902),o=a(89659),l=n.Configuration.Format({mentions:{}})},63237:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.default.get(e);return t?t.formattedName:(0,i.default)(e)};var s=r(a(7470)),i=r(a(3111))},72649:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatUnknownMsgText=function(e){if(e.isSentByMe)return s.default.t(1422);switch(e.subtype){case"phone":return s.default.t(1421);case"phone_only_feature":return i.default.isElectron?s.default.t(1420):s.default.t(1425);default:return i.default.isElectron?s.default.t(1419):s.default.t(1423)}},t.formatUnknownMsgNotification=function(e){switch(e.subtype){case"phone":return s.default.t(1421);case"phone_only_feature":return s.default.t(1425);default:return s.default.t(1423)}};var s=r(a(17957)),i=r(a(77626))},89952:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(20835);var s=new class{constructor(){this._trackers=[],this._currFPS=0,this._numSamples=0,this._totalTime=0,this._startTracking=()=>{this._frameId||(this._prevFrameTS=this._prevUpdateTS=window.performance.now(),this._frameId=requestAnimationFrame(this._handleFrame))},this._stopTracking=()=>{this._frameId&&(this._prevFrameTS=this._prevUpdateTS=void 0,cancelAnimationFrame(this._frameId),this._frameId=void 0)},this._handleFrame=()=>{if(this._trackers.length){var e=this._prevFrameTS,t=this._prevUpdateTS;if(null!=e&&null!=t){var a=window.performance.now();this._numSamples+=1,this._totalTime+=a-e,a-t>=500&&this._update(a),this._prevFrameTS=a,this._frameId=requestAnimationFrame(this._handleFrame)}}}}whenLessThan(e,t){if(e<0||e>60)throw new RangeError("fps must be between 0 and ".concat(60));return this._insertTracker([e,t]),()=>{this._removeTracker(t)}}_insertTracker(e){var t=e[0],a=function(e,t){var a=0,r=e.length-1,s=Math.floor((a+r)/2);for(;e[s]!==t&&a<r;)t<e[s]?r=s-1:a=s+1,s=Math.floor((a+r)/2);if(e[s]<t)return s+1;return s}(this._trackers.map((e=>e[0])),t);this._trackers.splice(a,0,e),1===this._trackers.length&&(this._addEventListeners(),this._startTracking())}_removeTracker(e){for(var t=this._trackers.length,a=0;a<t;a++)if(e===this._trackers[a][1]){this._trackers.splice(a,1),0===this._trackers.length&&(this._removeEventListeners(),this._stopTracking());break}}_update(e){var t=1e3/(this._totalTime/this._numSamples),a=Math.min(t,60);if(Math.abs(a-this._currFPS)>1){this._currFPS=a;var r=this._filterCallbacks();r.length&&this._triggerCallbacks(r,a)}this._numSamples=0,this._totalTime=0,this._prevUpdateTS=e}_filterCallbacks(){for(var e=[],t=this._trackers.length-1;t>=0;t--){var[a,r]=this._trackers[t];if(a<=this._currFPS)break;e.push(r)}return e}_triggerCallbacks(e,t){var a=window.performance.now();(0,r.requestIdleCallback)((()=>{e.forEach((e=>e(t,a)))}))}_addEventListeners(){window.addEventListener("focus",this._startTracking),window.addEventListener("blur",this._stopTracking)}_removeEventListeners(){window.removeEventListener("focus",this._startTracking),window.removeEventListener("blur",this._stopTracking)}};t.default=s},66026:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({msg:e,date:t,unread:a,album:r},d,u,c,h,f){var p,m=[],_=0;for(_=0;!p&&_<d.length;_++)p=d[_];_--;var v=!1,g=!1,E=p?(0,n.default)(p):0,S=0,C=_;for(;p;){var y=p;g||m.push(t(y,S++)),y===c&&a&&m.push(a(h));for(var b=void 0,T=_+1;!b&&T<d.length;T++)b=d[T];var M=void 0,N=void 0,I=void 0,P=[],A=!1,O=void 0,D=!1,w=null;if(y.asGroupedSticker&&!o(y,f)){P.push(y.asGroupedSticker),D=y===u,w=0;var R=d[C=_+1];R&&R.asGroupedSticker&&(0,s.canBeGroupedAsAlbum)(y,R)&&R!==c&&!o(R,f)&&(P.push(R.asGroupedSticker),b=d[C+1],A=!0,O=!0,R===u&&(D=!0,w=1))}if(y.asAlbumAsset&&!o(y,f)){P.push(y.asAlbumAsset);var k=p,L=void 0;for(D=p===u,C=_;C<d.length-1&&P.length<i.default.ALBUM_MAX_SIZE&&(k=d[C],(L=d[C+1])&&L.asAlbumAsset&&(0,s.canBeGroupedAsAlbum)(k,L)&&L!==c&&!o(L,f));C++)P.push(L.asAlbumAsset),L===u&&(D=!0);P.length>=i.default.ALBUM_MIN_SIZE&&(A=!0,O=!1,b=d[C+1])}if(b){var x=b;I=(0,n.default)(b),M=(N=I===E)&&(0,s.canBeGroupedWithNext)(y,x)&&b!==c}else M=!1,N=!1,I=0;if(A){var F=void 0;F=O?P.reduce(((e,t)=>"".concat(e,"-").concat(t.id.toString())),"grouped-sticker-"):l(P),m.push(r(P,F,v,M,D,w)),p=d[_=C+1],v=M,g=N,E=I}else m.push(e(y,y===u,v,M)),_++,v=M,g=N,E=I,p=b}return m};var s=a(89083),i=r(a(50935)),n=r(a(79186));function o(e,t){return null==t||e.t>t.t}function l(e){var t=e.length,a=e[0]?e[0].id.toString():"",r=e[t-1]?e[t-1].id.toString():"";return"album-".concat(a,"-").concat(r,"-").concat(t)}},45880:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedName=u,t.getFormattedNames=function(e,t=!1){if(!Array.isArray(e))return u(e,t);var a=e.map((e=>u(e,t)));return(0,d.default)(a,t)};var i=s(a(2784)),n=r(a(43334)),o=r(a(79711)),l=r(a(7470)),d=r(a(43486));function u(e,t=!1){var r,s=l.default.gadd(e,{silent:!0}),d=t?void 0:(r=e,e=>{e&&(e.preventDefault(),e.stopPropagation()),n.default.find(r).then((e=>{o.default.openChatFromUnread(e).then((t=>{t&&o.default.focusChatTextInput(e)}))}))}),u=a(60949).default;return t?s.formattedUser:i.createElement(u,{contact:s,onClick:d})}},58688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.has(e)};var a=new Set(["16505434800","16503130062","16507885324","16508620604","16504228206","16505212669","447710173736","16507885280","19032707825","16505361212","16508129150","16315555102","0"])},14280:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)},t.getMsgDownloadData=f;var s=r(a(19976)),i=r(a(52954)),n=r(a(50935)),o=r(a(27011)),l=r(a(54146)),d=r(a(40210)),u=r(a(59321));function c(){var e=(0,s.default)(["Failed to get msg download data: ",""]);return c=function(){return e},e}function h(){return(h=(0,i.default)((function*(e){var t=Array.isArray(e)?e:[e];try{var a=yield Promise.all(t.map((e=>f(e))));return a.length>1?{blob:yield(0,u.default)(a),name:o.default.getDefaultName({t:Math.round(Date.now()/1e3),type:"unknown",mimetype:"application/zip",isVcardOverMmsDocument:!1,filename:"",vcardList:[]})}:a[0]}catch(e){throw __LOG__(4,void 0,new Error,!0)(c(),e.message),SEND_LOGS("msg-download-data-failed"),e}}))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)((function*(e){var t="text/vcard";if(e.type===n.default.MSG_TYPE.VCARD)return{name:o.default.getDefaultName(e),blob:new Blob([e.body],{type:t})};if(e.type===n.default.MSG_TYPE.MULTI_VCARD)return{name:o.default.getDefaultName(e),blob:new Blob([e.vcardList.map((e=>e.vcard)).join("\n")],{type:t})};var a=m(e);if(a)return a;yield e.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d.default.WEBC_RMR_REASON_CODE.DOCUMENT_DOWNLOAD,isUserInitiated:!0});var r=m(e);if(r)return r;throw new Error("Unable to download because blob cannot be found")}))).apply(this,arguments)}function m(e){var{filehash:t,mediaBlob:a,renderableUrl:r}=e.mediaData;if(a)return{name:o.default.getDefaultName(e),url:r,blob:a.forceToBlob()};var s=l.default.get(t);return s?{blob:s,name:o.default.getDefaultName(e),url:l.default.getOrCreateURL(t)}:null}},97934:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.default.get(e);if(t)return Promise.resolve({wid:e,biz:t.isBusiness,bizInfo:t.isBusiness?{verifiedName:{level:(0,l.default)(t.verifiedLevel),serial:null,name:t.verifiedName,isApi:Boolean(t.isEnterprise),hostStorage:t.hostStorage,actualActors:t.actualActors,privacyModeTs:t.privacyModeTs}}:null});return(0,n.default)(e).then((t=>{if(t){var{biz:a,bizInfo:r}=t;return i.default.supportsFeature(i.default.F.QUERY_VNAME)&&a&&(0,o.default)(e,r),t}return Promise.reject(new Error("Invalid number"))}))};var s=r(a(7470)),i=r(a(18120)),n=r(a(55042)),o=r(a(75780)),l=r(a(42279))},79251:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i};var s=r(a(54073)),i=window.innerHeight,n=(0,s.default)((()=>{i=window.innerHeight}),500);window.addEventListener("resize",n)},85350:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0;if(!e)return t;e.quotedMsg&&(t+=54);e.caption&&(t+=31);switch(e.type){case l.NOTIFICATION:case l.GROUP_NOTIFICATION:case l.GP2:case l.BROADCAST_NOTIFICATION:case l.E2E_NOTIFICATION:case l.CALL_LOG:case l.CIPHERTEXT:case l.REVOKED:case l.CHAT:e.linkPreview&&(t+=53);var a=(0,o.numCodepoints)(e.body&&e.body.toString());return t+19*Math.ceil(a/100)+13;case l.IMAGE:return t+(e.mediaData&&e.mediaData.fullWidth&&e.mediaData.fullHeight||0)?Math.floor(Math.min(330/e.mediaData.fullWidth*e.mediaData.fullHeight,330)):330;case l.VIDEO:case l.AUDIO:return e.isGif?t+137:t+166;case l.LOCATION:return t+e.isLive?i.MSG_HEIGHT:n.PREVIEW_HEIGHT;case l.PTT:return t+67;case l.VCARD:return t+74;case l.DOCUMENT:return t+188;case l.STICKER:return t+125;case l.UNKNOWN:default:return t}};var s=r(a(50935)),i=a(18541),n=a(33788),o=a(86145),{MSG_TYPE:l}=s.default},15774:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(28103).Mirrored(["CONTACT_US","LICENSES","DECREASE_PTT_SPEED","DELETE_OR_EXIT_CHAT","GO_TO_NEXT_CHAT","GO_TO_PREV_CHAT","INCREASE_PTT_SPEED","LOGOUT","OPEN_NEW_CHAT","OPEN_NEW_GROUP","OPEN_PROFILE","OPEN_SETTINGS","SEARCH","SEARCH_IN_CHAT","TOGGLE_ARCHIVE","TOGGLE_MUTE","TOGGLE_PIN","TOGGLE_UNREAD","ZOOM_IN","ZOOM_OUT","ZOOM_RESET"]);t.default=r},75187:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(25211)),i=a(25250);var n=new class{constructor(){document.addEventListener("keydown",(e=>{var t=(0,i.getAction)(e);t&&(0,s.default)(t)}))}trigger(e,...t){}menuBatchRenderWith(){}};t.default=n},38203:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LIST_FOCUSABLE_ITEM_CLASS_NAME=void 0;var i=s(a(70417)),n=s(a(19976)),o=s(a(52954)),l=r(a(2784)),d=s(a(6660)),u=s(a(44343)),c=s(a(50868)),h=s(a(17693));function f(){var e=(0,n.default)(["Focusable list items should have `tabIndex` attribute (that makes it programmatically focusable), but this element did not have it:"],["Focusable list items should have \\`tabIndex\\` attribute (that makes it programmatically focusable), but this element did not have it:"]);return f=function(){return e},e}var p="focusable-list-item";t.LIST_FOCUSABLE_ITEM_CLASS_NAME=p;class m extends l.Component{constructor(...e){var t;super(...e),t=this,this._focusedItem=null,this._listIsFocused=!1,this._listHasBeenFocused=!1,this._priorityItemHasBeenFocused=!1,this._setRef=e=>{this._ref=e},this._setRefUIE=e=>{this._refUIE=e},this._handleKeyUp=e=>{e.preventDefault(),this._shiftFocus(-1)},this._handleKeyDown=e=>{e.preventDefault(),this._shiftFocus(1)},this._handleKeyEnd=e=>{e.preventDefault(),this._asyncHandleKeyEnd()},this._asyncHandleKeyEnd=(0,o.default)((function*(){var e,a,{onBeforeEnd:r}=t.props;r&&(yield r());var s=t._getLastItem(),i=null===(e=(a=t.props).getPriorityFocusItem)||void 0===e?void 0:e.call(a);i&&!t._priorityItemHasBeenFocused?t._focusItem(i):s&&t._focusItem(s)})),this._handleFocusGain=e=>{if(this._ref===e.target){var t;if(this._isKeyboardUser()){var a,r,s=null===(a=(r=this.props).getPriorityFocusItem)||void 0===a?void 0:a.call(r);!this._listHasBeenFocused&&s?this._focusItem(s):this._focusCurrentItem()}null===(t=this._refUIE)||void 0===t||t.activate()}else e.target instanceof HTMLElement&&e.target.classList.contains(p)&&this._setFocusedItem(e.target);this._listIsFocused=!0,this._listHasBeenFocused=!0},this._handleBlur=()=>{this._listIsFocused=!1},this._handleFocusRequest=()=>{this._ref&&!this._ref.contains(document.activeElement)&&d.default.focus(this._ref)}}componentDidUpdate(){this._priorityItemHasBeenFocused=!1,this._listIsFocused&&this._focusedItem&&this._ref&&!this._ref.contains(this._focusedItem)&&d.default.focus(this._ref)}_setFocusedItem(e){e.setAttribute("tabIndex","0"),this._focusedItem&&this._focusedItem!==e&&this._focusedItem.setAttribute("tabIndex","-1"),this._focusedItem=e}_isKeyboardUser(){return this.context}_getItems(){return this._ref?Array.from(this._ref.getElementsByClassName(p)):[]}_getLastItem(){var e=this._getItems();return e.length>0?e[e.length-1]:null}_focusItem(e){var t,a,r=null===(t=(a=this.props).getPriorityFocusItem)||void 0===t?void 0:t.call(a);r&&r===e&&(this._priorityItemHasBeenFocused=!0),d.default.focus(e,{preventScroll:!1})}_focusCurrentItem(){this._shiftFocus(0)}_shiftFocus(e){var t=this._getItems();if(0!==t.length){var a;if(this._focusedItem){var r=t.indexOf(this._focusedItem);-1!==r&&(a=r+e<0?t[0]:t[r+e])}a||(a=t[t.length-1]);var s=a;s.hasAttribute("tabIndex")||(__LOG__(3)(f()),function(e){e.setAttribute("tabIndex","-1")}(s)),this._focusItem(s)}}render(){var{"aria-label":e,className:t,children:a,dataTab:r,handlers:s,role:n}=this.props,o=(0,i.default)((0,i.default)({},s),{},{up:this._handleKeyUp,down:this._handleKeyDown,end:this._handleKeyEnd,"command+down":this._handleKeyEnd});return l.createElement(h.default,{displayName:"ListHotKeys",ref:this._setRefUIE,uimState:h.default.State.PASSIVE,requestFocus:this._handleFocusRequest},l.createElement(u.default,{handlers:o,className:t,"data-tab":r,onFocus:this._handleFocusGain,onBlur:this._handleBlur,onRef:this._setRef,role:n,"aria-label":e},a))}}t.default=m,m.contextType=c.default,m.displayName="ListHotKeys"},25211:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){switch(e){case o.default.CONTACT_US:return V;case o.default.LICENSES:return H;case o.default.DELETE_OR_EXIT_CHAT:return G;case o.default.GO_TO_NEXT_CHAT:return U;case o.default.GO_TO_PREV_CHAT:return j;case o.default.LOGOUT:return w;case o.default.OPEN_NEW_CHAT:return A;case o.default.OPEN_NEW_GROUP:return O;case o.default.OPEN_PROFILE:return D;case o.default.OPEN_SETTINGS:return P;case o.default.SEARCH:return R;case o.default.SEARCH_IN_CHAT:return B;case o.default.TOGGLE_ARCHIVE:return k;case o.default.TOGGLE_MUTE:return L;case o.default.TOGGLE_PIN:return x;case o.default.TOGGLE_UNREAD:return F;case o.default.ZOOM_IN:return W;case o.default.ZOOM_OUT:return Y;case o.default.ZOOM_RESET:return K;case o.default.INCREASE_PTT_SPEED:case o.default.DECREASE_PTT_SPEED:return null}}(e);if(!t)return;try{t()}catch(t){__LOG__(3)(I(),e)}};var i=s(a(19976)),n=r(a(2784)),o=s(a(15774)),l=s(a(43334)),d=s(a(79711)),u=s(a(9386)),c=s(a(52737)),h=s(a(50935)),f=s(a(7470)),p=a(95595),m=s(a(17957)),_=s(a(65829)),v=s(a(58885)),g=s(a(57557)),E=s(a(82476)),S=s(a(35194)),C=s(a(15118)),y=s(a(40773)),b=s(a(92062)),T=s(a(76019)),M=s(a(12767));function N(){var e=(0,i.default)(["Keyboard: user inputs logout"]);return N=function(){return e},e}function I(){var e=(0,i.default)(["keyboard:error occurred running action ","."]);return I=function(){return e},e}function P(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft(),d.default.openDrawerLeft(n.createElement(b.default,null))}))}function A(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft(),d.default.openDrawerLeft(n.createElement(g.default,null))}))}function O(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft(),d.default.openDrawerLeft(n.createElement(E.default,null))}))}function D(){d.default.existsDrawerLeft((e=>{e&&d.default.closeDrawerLeft();var t=(0,p.getMaybeMeUser)(),a=T.default.assertGet(t),r=C.default.assertGet(t),s=f.default.assertGet(t);d.default.openDrawerLeft(n.createElement(S.default,{status:a,profilePicThumb:r,contact:s,conn:c.default}))}))}function w(){if(!v.default.some((e=>e.ack===h.default.ACK.CLOCK&&e.local&&e.isSentByMe)))return M.default.logout();d.default.openModal(n.createElement(u.default,{title:m.default.t(519),onOK:()=>{__LOG__(2)(N()),M.default.logout()},okText:m.default.t(968),onCancel:()=>d.default.closeModal(),cancelText:m.default.t(1593)},m.default.t(1339)))}function R(){d.default.focusChatSearch()}function k(){var e=q();if(e&&e.canArchive()){var t=e.archive;d.default.archiveChat(e,!t)}}function L(){var e=q();if(e&&e.mute.canMute()){var t=e.mute.isMuted;d.default.muteChat(e,!t)}}function x(){var e=q();if(e&&(null!=e.pin||l.default.filter((e=>e.pin)).length<3)){var t=Boolean(e.pin);d.default.pinChat(e,!t)}}function F(){var e=q();if(e){var t=e.markedUnread;d.default.markChatUnread(e,!t)}}function B(){var e=q();e&&d.default.chatSearch(e)}function G(){var e=q();e&&d.default.deleteOrExitChat(e)}function U(){d.default.focusNextChat(!0)}function j(){d.default.focusPrevChat(!0)}function V(){d.default.openModal(n.createElement(y.default,null))}function H(){d.default.openModal(n.createElement(_.default,null))}function W(){}function Y(){}function K(){}function q(){var e=l.default.filter((e=>e.active));return e.length?e[0]:void 0}},25250:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getAction=function(e){var{key:t,ctrlKey:a,metaKey:r,altKey:s,shiftKey:i}=e;if("Control"===t||"Meta"===t||"Alt"===t||"Shift"===t)return;return a&&r||a&&s?l[function(e,t){if(t&&("Tab"===e||"Enter"===e||"Backspace"===e||" "===e))return"Shift+".concat(e);return e}(t,i)]:void 0},t.getKey=function(e){var t=n(e);if(!t.length)return;var{key:a,nativeKey:r,nativeModifier:s}=t[0],i=r||a;return i?d(i,s):void 0},t.getAdditionalShortcuts=function(){var e={};return[...i.default.members()].forEach((t=>{var a=n(t);a.length<=1||a.slice(1).forEach((({key:a,nativeKey:r,nativeModifier:s})=>{var i=r||a;i&&(e[d(i,s)]=t)}))})),e},t.getShortcutKey=function(e){var t=n(e);if(t.length){var{key:a,nativeKey:r,webKey:s}=t[0];return s||a}return};var s=r(a(23779)),i=r(a(15774));function n(e){switch(e){case i.default.CONTACT_US:return[{key:"H"}];case i.default.DELETE_OR_EXIT_CHAT:return[{key:"Backspace",nativeKey:"D"}];case i.default.GO_TO_NEXT_CHAT:return[{key:"Tab",nativeModifier:"Ctrl"},{key:"}"}];case i.default.GO_TO_PREV_CHAT:return[{key:"Shift+Tab",nativeModifier:"Ctrl"},{key:"{"}];case i.default.LOGOUT:return[];case i.default.OPEN_NEW_CHAT:return[{key:"n"}];case i.default.OPEN_NEW_GROUP:return[{key:"N"}];case i.default.OPEN_PROFILE:return[{key:"p"}];case i.default.OPEN_SETTINGS:return[{key:","}];case i.default.SEARCH:return[{webKey:"/",nativeKey:"f"}];case i.default.SEARCH_IN_CHAT:return[{key:"F"}];case i.default.TOGGLE_ARCHIVE:return[{key:"e"}];case i.default.TOGGLE_MUTE:return[{key:"M"}];case i.default.TOGGLE_PIN:return[{key:"P"}];case i.default.TOGGLE_UNREAD:return[{key:"U"}];case i.default.ZOOM_IN:return[{key:"+"},{key:"="}];case i.default.ZOOM_OUT:return[{key:"-"}];case i.default.ZOOM_RESET:return[{key:"0"}];case i.default.INCREASE_PTT_SPEED:return[{key:">"}];case i.default.DECREASE_PTT_SPEED:return[{key:"<"}];default:return[]}}var o,l=(o={},[...i.default.members()].forEach((e=>{n(e).forEach((({key:t,webKey:a})=>{var r=a||t;r&&(o[r]=e)}))})),o);function d(e,t="CmdOrCtrl"){var a="+"!==e?e:"Plus";return 1===a.length&&a.match(/[a-z]/i)?a.match(/[a-z]/)?"".concat(t,"+").concat((0,s.default)(a)):"Shift+".concat(t,"+").concat(a):"".concat(t,"+").concat((0,s.default)(a))}},54794:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a(829)),n=r(a(2784)),o=s(a(38147)),l=s(a(6660)),d=s(a(44343)),u=s(a(68340));class c extends n.Component{constructor(...e){super(...e),this._setRef=e=>{this._ref=e,this.props.onRef(e)},this.getElement=()=>this._ref,this._rotateFocus=e=>{if(this._ref){var t=1;e&&(e.preventDefault(),t=e.shiftKey?-1:1,o.default.shouldIndicateFocus());var a=Array.from(this._ref.querySelectorAll("[data-tab]"));if((a=this.props.getVisibleDOMNodes(a)).length){a=(0,i.default)(a,(e=>parseInt(e.getAttribute("data-tab"),10)||0));var r=0,s=document.activeElement;s&&(r=(0,u.default)(a,a.findIndex((e=>e.contains(s)))+t));var n=a[r];o.default.shouldIndicateFocus(),n.restoreFocus?n.restoreFocus():l.default.focus(n)}}}}componentDidMount(){l.default.focus(this._ref)}render(){var{className:e,children:t,onBlur:a}=this.props,r={tab:this._rotateFocus,"shift+tab":this._rotateFocus,"shift+?":this.props.onShowKeyboardShortcuts};return n.createElement(d.default,{handlers:r,className:e,onBlur:a,onRef:this._setRef},t)}}t.default=c,c.displayName="TopLevelHotKeys"},8430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryShortcodeByPhone=function(e){if(null==e||0===e.length)return"";var t=function(e,t){if(null!=e&&e.length>0&&null!=t)for(var a=t[e[0]],r=e;r.length>0&&a;){if(a.c)return a.c;a=a[(r=r.substr(1,r.length-1))[0]]}return""}(e,a);return""===t&&"1"===e[0]?"US":"RU"===t&&["6","7"].includes(e[1])?"KZ":t};var a={1:{2:{0:{4:{c:"CA"}},2:{6:{c:"CA"}},3:{6:{c:"CA"}},4:{2:{c:"BS"},9:{c:"CA"}},5:{0:{c:"CA"}},6:{4:{c:"AI"},8:{c:"AG"}},8:{4:{c:"VG"},9:{c:"CA"}}},3:{0:{6:{c:"CA"}},4:{0:{c:"VI"},3:{c:"CA"},5:{c:"KY"}},6:{5:{c:"CA"},7:{c:"CA"}}},4:{0:{3:{c:"CA"}},1:{6:{c:"CA"},8:{c:"CA"}},3:{1:{c:"CA"},7:{c:"CA"},8:{c:"CA"}},4:{1:{c:"BM"}},5:{0:{c:"CA"}},7:{3:{c:"GD"}}},5:{0:{6:{c:"CA"}},1:{4:{c:"CA"},9:{c:"CA"}},4:{8:{c:"CA"}},7:{9:{c:"CA"}},8:{1:{c:"CA"},7:{c:"CA"}}},6:{0:{4:{c:"CA"}},1:{3:{c:"CA"}},3:{9:{c:"CA"}},4:{7:{c:"CA"},9:{c:"TC"}},5:{8:{c:"JM"}},6:{4:{c:"MS"}},7:{0:{c:"MP"},1:{c:"GU"},2:{c:"CA"}},8:{4:{c:"AS"}}},7:{0:{5:{c:"CA"},9:{c:"CA"}},2:{1:{c:"MF"}},5:{8:{c:"LC"}},6:{7:{c:"DM"}},7:{8:{c:"CA"}},8:{0:{c:"CA"},2:{c:"CA"},4:{c:"VC"},7:{c:"PR"}}},8:{0:{7:{c:"CA"},9:{c:"DO"}},1:{9:{c:"CA"}},2:{5:{c:"CA"},9:{c:"DO"}},4:{9:{c:"DO"}},6:{7:{c:"CA"},8:{c:"TT"},9:{c:"KN"}},7:{3:{c:"CA"},6:{c:"JM"}}},9:{0:{2:{c:"CA"},5:{c:"CA"}},3:{9:{c:"PR"}}}},2:{0:{c:"EG"},1:{1:{c:"SS"},2:{c:"MA"},3:{c:"DZ"},6:{c:"TN"},8:{c:"LY"}},2:{0:{c:"GM"},1:{c:"SN"},2:{c:"MR"},3:{c:"ML"},4:{c:"GN"},5:{c:"CI"},6:{c:"BF"},7:{c:"NE"},8:{c:"TG"},9:{c:"BJ"}},3:{0:{c:"MU"},1:{c:"LR"},2:{c:"SL"},3:{c:"GH"},4:{c:"NG"},5:{c:"TD"},6:{c:"CF"},7:{c:"CM"},8:{c:"CV"},9:{c:"ST"}},4:{0:{c:"GQ"},1:{c:"GA"},2:{c:"CG"},3:{c:"CD"},4:{c:"AO"},5:{c:"GW"},6:{c:"IO"},7:{c:"AC"},8:{c:"SC"},9:{c:"SD"}},5:{0:{c:"RW"},1:{c:"ET"},2:{c:"SO"},3:{c:"DJ"},4:{c:"KE"},5:{c:"TZ"},6:{c:"UG"},7:{c:"BI"},8:{c:"MZ"}},6:{0:{c:"ZM"},1:{c:"MG"},2:{c:"RE"},3:{c:"ZW"},4:{c:"NA"},5:{c:"MW"},6:{c:"LS"},7:{c:"BW"},8:{c:"SZ"},9:{c:"KM"}},7:{c:"ZA"},9:{0:{c:"SH"},1:{c:"ER"},7:{c:"AW"},8:{c:"FO"},9:{c:"GL"}}},3:{0:{c:"GR"},1:{c:"NL"},2:{c:"BE"},3:{c:"FR"},4:{c:"ES"},5:{0:{c:"GI"},1:{c:"PT"},2:{c:"LU"},3:{c:"IE"},4:{c:"IS"},5:{c:"AL"},6:{c:"MT"},7:{c:"CY"},8:{c:"FI"},9:{c:"BG"}},6:{c:"HU"},7:{0:{c:"LT"},1:{c:"LV"},2:{c:"EE"},3:{c:"MD"},4:{c:"AM"},5:{c:"BY"},6:{c:"AD"},7:{c:"MC"},8:{c:"SM"}},8:{0:{c:"UA"},1:{c:"RS"},2:{c:"ME"},3:{c:"XK"},5:{c:"HR"},6:{c:"SI"},7:{c:"BA"},9:{c:"MK"}},9:{c:"IT"}},4:{0:{c:"RO"},1:{c:"CH"},2:{0:{c:"CZ"},1:{c:"SK"},3:{c:"LI"}},3:{c:"AT"},4:{c:"GB"},5:{c:"DK"},6:{c:"SE"},7:{c:"NO"},8:{c:"PL"},9:{c:"DE"}},5:{0:{0:{c:"FK"},1:{c:"BZ"},2:{c:"GT"},3:{c:"SV"},4:{c:"HN"},5:{c:"NI"},6:{c:"CR"},7:{c:"PA"},8:{c:"PM"},9:{c:"HT"}},1:{c:"PE"},2:{c:"MX"},3:{c:"CU"},4:{c:"AR"},5:{c:"BR"},6:{c:"CL"},7:{c:"CO"},8:{c:"VE"},9:{0:{c:"GP"},1:{c:"BO"},2:{c:"GY"},3:{c:"EC"},4:{c:"GF"},5:{c:"PY"},6:{c:"MQ"},7:{c:"SR"},8:{c:"UY"},9:{c:"CW"}}},6:{0:{c:"MY"},1:{c:"AU"},2:{c:"ID"},3:{c:"PH"},4:{c:"NZ"},5:{c:"SG"},6:{c:"TH"},7:{0:{c:"TL"},2:{c:"NF"},3:{c:"BN"},4:{c:"NR"},5:{c:"PG"},6:{c:"TO"},7:{c:"SB"},8:{c:"VU"},9:{c:"FJ"}},8:{0:{c:"PW"},1:{c:"WF"},2:{c:"CK"},3:{c:"NU"},5:{c:"WS"},6:{c:"KI"},7:{c:"NC"},8:{c:"TV"},9:{c:"PF"}},9:{0:{c:"TK"},1:{c:"FM"},2:{c:"MH"}}},7:{c:"RU"},8:{1:{c:"JP"},2:{c:"KR"},4:{c:"VN"},5:{0:{c:"KP"},2:{c:"HK"},3:{c:"MO"},5:{c:"KH"},6:{c:"LA"}},6:{c:"CN"},8:{0:{c:"BD"},6:{c:"TW"}}},9:{0:{c:"TR"},1:{c:"IN"},2:{c:"PK"},3:{c:"AF"},4:{c:"LK"},5:{c:"MM"},6:{0:{c:"MV"},1:{c:"LB"},2:{c:"JO"},3:{c:"SY"},4:{c:"IQ"},5:{c:"KW"},6:{c:"SA"},7:{c:"YE"},8:{c:"OM"}},7:{0:{c:"PS"},1:{c:"AE"},2:{c:"IL"},3:{c:"BH"},4:{c:"QA"},5:{c:"BT"},6:{c:"MN"},7:{c:"NP"}},8:{c:"IR"},9:{2:{c:"TJ"},3:{c:"TM"},4:{c:"AZ"},5:{c:"GE"},6:{c:"KG"},8:{c:"UZ"}}}}},89423:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(52954)),i=r(a(30733)),n=a(25675),o=a(28703),l=r(a(18120)),d=a(12496),u=a(27985),c=r(a(76022));function h(){return(h=(0,s.default)((function*(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND)){var t=(0,u.parseAPICmd)(e);return t.resultType===n.APICmd.CATALOG?(0,d.getProductOrCatalogLinkPreview)(e,t.data.catalogOwnerJid):t.resultType===n.APICmd.PRODUCT?(0,d.getProductOrCatalogLinkPreview)(e,t.data.businessOwnerJid,t.data.productId):null}var{title:a,description:r,canonicalUrl:s,matchedText:i,preview:h,thumbnail:f,doNotPlayInline:p}=yield c.default.queryLinkPreview(e);return i&&(a||r)?{url:e,data:{title:a||void 0,description:r||void 0,canonicalUrl:s||void 0,matchedText:i,richPreviewType:"video"===h?o.ExtendedTextMessagePreviewType.VIDEO:o.ExtendedTextMessagePreviewType.NONE,thumbnail:f||void 0,doNotPlayInline:p}}:null}))).apply(this,arguments)}var f=(0,i.default)((function(){return h.apply(this,arguments)}));t.default=f},12496:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getProductOrCatalogLinkPreview=function(){return _.apply(this,arguments)};var s=r(a(52954)),i=r(a(65468)),n=r(a(7470)),o=a(37356),l=a(28703),d=a(95595),u=r(a(97934)),c=r(a(17957)),h=a(82982),f=r(a(68384)),p=a(75637),m=100;function _(){return(_=(0,s.default)((function*(e,t,a){var r;if(!f.default.isWid(t))return null;var s,_=(0,p.createWid)(t);try{s=yield i.default.find(_)}catch(e){return null}var v=a?s.productCollection.get(a):s.productCollection.getProductModels().find((e=>"APPROVED"===e.reviewStatus&&!e.isHidden));if(null==v||"APPROVED"!==v.reviewStatus||v.isHidden)return null;var g,E,S,C,y=v.getPreviewImage();if(y&&(g=(g=yield(0,h.getResizedThumbData)(y.mediaUrl,m,m,"image/jpeg",.75)).replace("data:image/jpeg;base64,","")),null===(r=(0,d.getMaybeMeUser)())||void 0===r?void 0:r.equals(_)){var b=yield n.default.get(_);if(null==b)return null;E=b.displayName}else{var T;E=null===(T=(yield(0,u.default)(_)).bizInfo)||void 0===T?void 0:T.verifiedName.name}return a?(S=c.default.t(458,{productName:v.name,catalogOwnerName:E}),v.description&&null!=v.priceAmount1000&&v.currency?C="".concat(v.description,"  ").concat((0,o.format)(v.currency,v.priceAmount1000)):v.description?C=v.description:null!=v.priceAmount1000&&v.currency&&(C=(0,o.format)(v.currency,v.priceAmount1000))):(S=c.default.t(457,{catalogOwnerName:E}),C=c.default.t(456)),{url:e,data:{title:S,description:C||void 0,canonicalUrl:e,matchedText:e,richPreviewType:l.ExtendedTextMessagePreviewType.NONE,thumbnail:g,doNotPlayInline:!0}}}))).apply(this,arguments)}},65935:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectionUrl=function(e,t){var a=i.default.getLocale(),r="".concat(e,",").concat(t);return"".concat(o,"/").concat("","/").concat(r,"?hl=").concat(a)},t.getSearchUrl=function(e){var t=i.default.getLocale();return"".concat(l,"/").concat(encodeURIComponent(e),"/z?hl=").concat(t)},t.getMapUrl=function(e,t,a){var r=i.default.getLocale();return a?"".concat(l,"/").concat(encodeURIComponent(a),"/@").concat(e,",").concat(t,",").concat(u,"z?hl=").concat(r):n.default.build(d,{q:"".concat(e,",").concat(t),z:u,hl:r})};var s=r(a(50935)),i=r(a(17957)),n=r(a(74185)),{G_MAPS_DIR_URL:o,G_MAPS_SEARCH_URL:l,G_MAPS_URL:d,SEARCH_ZOOM:u}=s.default},16622:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(e,t){if(!d.default)return __LOG__(2)(f()),Promise.reject(new l.GUM.GUMError);var a=0,r=!1;function s(){a&&clearTimeout(a),a=setTimeout((()=>{t?t():(!function(e){"camera"===e?o.default.openModal(n.createElement(u.default,{messaging:u.Messaging.CAMERA,type:u.default.TYPE.GUIDE_ALLOW})):o.default.openModal(n.createElement(u.default,{messaging:u.Messaging.MIC,type:u.default.TYPE.GUIDE_ALLOW}))}(e),r=!0)}),1e3)}return(0,c.default)((({retry:t,failCount:a})=>new Promise(((r,i)=>{s(),(0,d.default)(m[e][a]).then(r).catch((r=>{"NotReadableError"===r.name&&m[e][a+1]?t():i(r)}))})))).catch((e=>{var t=e&&e.name||e,a=l.GUM[t]||l.GUM.GUMError;return Promise.reject(new a)})).finally((()=>{r&&o.default.closeModal(),a&&clearTimeout(a)}))},t.stop=function(e){if("function"==typeof e.stop)e.stop();else for(var t=e.getTracks(),a=0;a<t.length;a++)t[a].stop()},t.isSrcObjectInVideoElement=function(){void 0===p&&(p="srcObject"in document.createElement("video"));return p};var i=s(a(19976)),n=r(a(2784)),o=s(a(79711)),l=a(96452),d=s(a(68476)),u=r(a(45356)),c=s(a(58768)),h=s(a(72424));function f(){var e=(0,i.default)(["MediaCapture:start() no ability to capture media"]);return f=function(){return e},e}var p,m={camera:[{video:{width:h.default.imageMaxEdge,height:h.default.imageMaxEdge}},{video:{width:Math.min(1280,h.default.imageMaxEdge),height:Math.min(720,h.default.imageMaxEdge)}},{video:!0}],microphone:[{audio:!0}]}},81063:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);t.yj=function(){if(!h())return;setInterval((()=>{new o.default.WebcMemoryStat((0,i.default)((0,i.default)({},(0,d.default)(h(),"getMemoryInfo()")),{},{hasVerifiedNumber:u.default.mode===u.StreamMode.MAIN,numMessages:l.default.length})).commit()}),n.default.MEMORY_METRIC_INTERVAL)};var i=s(a(70417)),n=s(a(50935)),o=s(a(40210)),l=s(a(58885)),d=s(a(61941)),u=r(a(17026)),c=Date.now();function h(){var e=performance&&performance.memory;if(e)return{uptime:(Date.now()-c)/1e3,jsHeapSizeLimit:e.jsHeapSizeLimit,totalJsHeapSize:e.totalJSHeapSize,usedJsHeapSize:e.usedJSHeapSize}}},40881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResults=function(e,t){var a=t.map((({contact:e})=>e)),r=(e||"").toLowerCase();return a.filter((e=>function(e,t){if(t.isMe)return!1;var a=[t.searchName||t.formattedName];!t.isMyContact&&t.notifyName&&a.push(t.notifyName.toLowerCase());return a.some((t=>function(e,t){var a=-1;do{if(t.indexOf(e,a+1)===a+1)return!0}while(-1!==(a=t.indexOf(" ",a+1)));return!1}(e,t)))}(r,e)))}},53527:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.openMessengerRoomUrl=function(e){var t={source:"whatsapp",ep:e?3:4},a=n.default.build("https://messenger.com/groupcall/create",t);(0,s.openExternalLink)(a);var r=i.default.DESTINATION.BROWSER,o=e?i.default.ROOMS_ENTRY_POINT.ATTACHMENT:i.default.ROOMS_ENTRY_POINT.WEB_MENU;new i.default.RoomsCreationFlow({entryResult:r,roomsEntryPoint:o}).commit()};var s=a(35387),i=r(a(40210)),n=r(a(74185))},42913:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(15253)),i=r(a(45455)),n=r(a(28267));class o extends n.default{constructor(e,t){super(),this.list=e,this.selected=e.reduce(((e,t,a)=>(e[a]=!1,e)),{}),this.getter=t}init(e=[]){(0,i.default)(this.selected)||((0,i.default)(e)?this.unsetAll():(this.selected=e.reduce(((e,t,a)=>{var r=this.list.indexOf(t);return e[a]=r>-1&&this.selected[r],e}),{}),this.list=e))}unsetAll(){(0,s.default)(this.selected,((e,t)=>{e&&this.set(t,!1)}))}reset(e=!0){(0,s.default)(this.selected,((t,a)=>{t&&this.trigger(this.getter(this.list[a]),!0,!0,e)}))}set(e,t=!0,a=!0){if(this.list.length){var r=Math.min(Math.max(e,-1),this.list.length-1),s=r>-1?this.list[r]:void 0;s&&(this.selected[r]&&!t||!this.selected[r]&&t)&&(this.selected[r]=t,this.trigger(this.getter(s),t,a))}}setVal(e,t=!0,a=!0){var r=this.list.indexOf(e);-1===r&&(r=this.list.length,this.list.push(e),this.selected[r]=!1),this.set(r,t,a)}setFirst(e=!0){(0,i.default)(this.list)||this.set(0,!0,e)}setLast(e=!0){(0,i.default)(this.list)||this.set(this.list.length-1,!0,e)}getSelected(){return this.list.reduce(((e,t,a)=>(this.selected[a]&&e.push(t),e)),[])}isSelected(e){return!!this.selected[this.list.indexOf(e)]}}t.default=o},43257:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllMuteDurations=l,t.getDefaultMuteDuration=function(){return l()[0].duration},t.calculateMuteExpiration=function(e){if(e===Number.POSITIVE_INFINITY)return i.default.MUTE_ALWAYS_EXPIRATION_SENTINEL;return 60*e*60+(0,s.default)().unix()};var s=r(a(19034)),i=r(a(50935)),n=r(a(17957)),o=r(a(72424));function l(e){return e?[{label:n.default.t(1037),duration:1},{label:n.default.t(1040),duration:8},{label:n.default.t(1036),duration:24},{label:n.default.t(1038),duration:168}]:[{label:n.default.t(1040),duration:8},{label:n.default.t(1038),duration:168},o.default.muteAlways?{label:n.default.t(1041),duration:Number.POSITIVE_INFINITY}:{label:n.default.t(1039),duration:8760}]}},32523:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(19976)),i=r(a(70417)),n=r(a(22220)),o=r(a(79504)),l=r(a(43334)),d=r(a(79711)),u=r(a(50935)),c=r(a(17957)),h=r(a(58885)),f=a(11419);function p(){var e=(0,s.default)(["Failed to create notification: ",":",""]);return p=function(){return e},e}t.default=class{constructor(e,t,a){this.close=()=>{this.notification&&this._waitForInteractionStop().then((()=>{this.notification&&(0,f.isFunction)(this.notification.close)&&this.notification.close()})).catch((()=>{}))},this._onClose=()=>{this.waitingPromise.resolver(),window.removeEventListener("beforeunload",this.close),this.notification&&(this.notification.removeEventListener("click",this._onClick),this.notification.removeEventListener("close",this._onClose),this.notification.removeEventListener("show",this._onShow)),window.clearTimeout(this._onShowTimeout),this.msg&&this.msg.off("change:type",this._onRevoke)},this._onClick=()=>{window.focus(),this.onClick();var e=this.chat,t=this.msg;if(e){var a=t&&t!==e.msgs.last()?e.getSearchContext(t):void 0;d.default.openChatAt(e,a).then((t=>{t&&d.default.focusChatTextInput(e)})),d.default.closeModalMedia(),this.close()}},this._onShow=()=>{this.msg&&this.msg.on("change:type",this._onRevoke)},this._onRevoke=()=>{this.msg&&this.msg.type===u.default.MSG_TYPE.REVOKED&&this.close()},this.msg=h.default.get(t),this.chat=l.default.get(e);var r=!!o.default.get(t);this._timeoutDuration=r?u.default.CALL_NOTIFICATION_TIMEOUT:u.default.NOTIFICATION_TIMEOUT;var s=new Promise((e=>{this.waitingPromise={resolver:e}}));this.waitingPromise.promise=s;var{title:m,notification:_}=a,v=(0,n.default)(a,["title","notification"]);try{this.notification=new _(m,(0,i.default)({tag:r?t:e.toString(),renotify:!0,dir:"auto",lang:c.default.lng(),silent:!0},v)),this.notification.addEventListener("click",this._onClick),this.notification.addEventListener("close",this._onClose),this.notification.addEventListener("show",this._onShow),window.addEventListener("beforeunload",this.close)}catch(e){__LOG__(2)(p(),e.name,e.message),this.waitingPromise.resolver()}}onClick(){}_waitForInteractionStop(){return Promise.resolve()}waitForClose(){return this.waitingPromise.promise}detach(){this._onClose()}}},4651:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownAsNeeded=function(){C.forEach(((e,t)=>{N(C,t)})),y.forEach(((e,t)=>{N(y,t)}))},t.showCallNotification=function(e,t,a){if(!e||!t||p.default.globalMute().isMuted)return;if(window.Notification&&window.Notification.permission===o.default.PERMISSION_ALLOWED&&p.default.getGlobalNotifications()){var r=l.default.get(e),s=r?r.formattedName:(0,E.default)(e),i=a?f.default.t(844,{name:s}):f.default.t(845,{name:s}),n=f.default.t(843);T(y,e,t,i,n,o.default.USER_DEFAULT_ICON)}p.default.getGlobalSounds()&&(y.get(e.toString())||Promise.resolve()).then(m.playNotification).catch((()=>{}))},t.showMsgNotification=function(e){var t=e.chat;if(document.hasFocus()&&t.active)return;if(p.default.globalMute().isMuted)return;if(function(e){var t=e.chat;if(!t.mute.isMuted)return!1;if(!t.isGroup)return!0;var a=(0,u.getMaybeMeUser)();if(e.isMentioned(a)||e.isQuoted(a)){var r=n.default.get(e.sender);return!0===(null==r?void 0:r.mute.isMuted)}return!0}(e))return;if(b(e))return;if(function(e){if(!e.isGroup)return!1;if(e.isGroup&&e.isReadOnly)return!1;var t=Date.now(),a=e.squelch||0;if(t>a)return h.default.find(e.id).then((()=>{var t=h.default.get(e.id);if(t){var a=t.participants.length,r=1e3*Math.min(120,30+5*a);e.squelch=Date.now()+r}})).catchType(d.WebdDrop,(function(){e.squelch=Date.now()+6e4})),!1;return!0}(e.chat))return;if(window.Notification&&window.Notification.permission===o.default.PERMISSION_ALLOWED&&p.default.getGlobalNotifications()){var a=(0,i.default)(e);a&&a.charCodeAt(0)>=128&&(a=" "+a);var r=t.isGroup?o.default.GROUP_DEFAULT_ICON:o.default.USER_DEFAULT_ICON,s=t.isGroup?f.default.t(557):f.default.t(556),l=t.contact.formattedName||s;T(C,t.id,e.id.toString(),l,a,r,t.canSend)}p.default.getGlobalSounds()&&(t.id&&C.get(t.id.toString())||Promise.resolve()).then(m.playNotification).catch((()=>{}))},t.cancelCallNotification=function(e){e&&N(y,e.toString())},t.closeNotifications=function(e){if(!e||!e.id)return;N(C,e.id.toString()),N(y,e.id.toString())},t.isArchivedAndNotMentioned=b;var s=r(a(19976)),i=r(a(18097)),n=r(a(43334)),o=r(a(50935)),l=r(a(7470)),d=a(19741),u=a(95595),c=a(75459),h=r(a(99922)),f=r(a(17957)),p=r(a(85059)),m=a(2951),_=r(a(49202)),v=r(a(15118)),g=r(a(2734)),E=r(a(3111));function S(){var e=(0,s.default)(["NotificationBackend:IconLoadTimeoutError:",""]);return S=function(){return e},e}var C=new Map,y=new Map;function b(e){var t=e.chat;if(!(0,c.archiveV2Supported)())return!1;if(!g.default.showArchiveV2)return!1;if(!t.archive)return!1;if(!t.isGroup)return!0;var a=(0,u.getMaybeMeUser)();if(e.isMentioned(a)||e.isQuoted(a)){var r=n.default.get(e.sender);return!0===(null==r?void 0:r.mute.isMuted)}return!0}function T(e,t,a,r,s,i,n){var l=v.default.find(t).cancellable().timeout(1500,"showNotificationTimeout").then((function(e){var t=e&&e.img?e.img:i;return(0,m.cachePath)(t)})).catchTypes(d.WebdDrop,Promise.TimeoutError,(function(){return __LOG__(2)(S(),t.toString()),(0,m.cachePath)(i)})).then((i=>{if(window.Notification.permission!==o.default.PERMISSION_ALLOWED)return Promise.reject(new Promise.CancellationError("Permission Denied"));var l=new _.default(t,a,r,s,i,n);return l.waitForClose().then((()=>{M(e,t,l)})),l}));return l.catchType(Promise.CancellationError,(function(){M(e,t)})),e.set(t.toString(),l),l}function M(e,t,a){var r=e.get(t.toString());if(r){if(a){if(r.isFulfilled()&&a!==r.value())return;if(r.isPending())return}e.delete(t.toString())}}function N(e,t){var a=e.get(t);if(a){if(a.isFulfilled())a.value().close();else a.cancel();e.delete(t)}}},2951:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.playNotification=function(){i.play().catch((()=>{}))},t.cachePath=function(e){return Promise.resolve(e)};var s=r(a(50935)),i=new window.Audio(s.default.NOTIFICATION_TONE_PATH)},49202:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(32523)),i=r(a(12396)),n=r(a(74185));class o extends s.default{constructor(e,t,a,r,s){super(e,t,{title:i.default.normalizeAllEmojis(a),notification:window.Notification,body:i.default.normalizeAllEmojis(r),icon:n.default.relToAbs(s)})}}t.default=o},46821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.test(e)?e.replace(/[^0-9]/g,""):null};var a=/^[0-9+()\- ]+$/},82170:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(68476)),i=r(a(64957)),n=function(e){var t=e;if(!n.isRecordingSupported())throw new Error("Recording is not supported in this browser");this.audioContext=new window.AudioContext,this.config=t=t||{},this.config.bufferLength=t.bufferLength||4096,this.config.monitorGain=t.monitorGain||0,this.config.numberOfChannels=t.numberOfChannels||1,this.config.originalSampleRate=this.audioContext.sampleRate,this.config.encoderSampleRate=t.encoderSampleRate||48e3,this.config.streamPages=t.streamPages||!1,this.config.leaveStreamOpen=t.leaveStreamOpen||!1,this.config.maxBuffersPerPage=t.maxBuffersPerPage||40,this.config.encoderApplication=t.encoderApplication||2049,this.config.encoderFrameSize=t.encoderFrameSize||20,this.config.streamOptions=t.streamOptions||{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}},this.storePage=this._storePage.bind(this),this.streamPage=this._streamPage.bind(this),this.state="inactive",this.eventTarget=document.createDocumentFragment(),this.createAudioNodes()};n.isRecordingSupported=function(){return Boolean(window.AudioContext&&s.default)},n.prototype.addEventListener=function(e,t,a){this.eventTarget.addEventListener(e,t,a)},n.prototype.clearStream=function(){this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),delete this.stream)},n.prototype.createAudioNodes=function(){var e=this;this.scriptProcessorNode=this.audioContext.createScriptProcessor(this.config.bufferLength,this.config.numberOfChannels,this.config.numberOfChannels),this.scriptProcessorNode.onaudioprocess=function(t){e.encodeBuffers(t.inputBuffer)},this.monitorNode=this.audioContext.createGain(),this.setMonitorGain(this.config.monitorGain),this.config.sampleRate<this.audioContext.sampleRate&&this.createButterworthFilter()},n.prototype.createButterworthFilter=function(){this.filterNode=this.audioContext.createBiquadFilter(),this.filterNode2=this.audioContext.createBiquadFilter(),this.filterNode3=this.audioContext.createBiquadFilter(),this.filterNode.type=this.filterNode2.type=this.filterNode3.type="lowpass";var e=this.config.sampleRate/2;this.filterNode.frequency.value=this.filterNode2.frequency.value=this.filterNode3.frequency.value=e-e/3.5355,this.filterNode.Q.value=.51764,this.filterNode2.Q.value=.70711,this.filterNode3.Q.value=1.93184,this.filterNode.connect(this.filterNode2),this.filterNode2.connect(this.filterNode3),this.filterNode3.connect(this.scriptProcessorNode)},n.prototype.encodeBuffers=function(e){if("recording"===this.state){for(var t=[],a=0;a<e.numberOfChannels;a++)t[a]=e.getChannelData(a);this.encoder.postMessage({command:"encode",buffers:t}),this.duration+=e.duration,this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration}))}},n.prototype.initStream=function(e){if(this.stream)this.eventTarget.dispatchEvent(new Event("streamReady"));else{if(e)return this.stream=e,this.sourceNode=this.audioContext.createMediaStreamSource(e),this.sourceNode.connect(this.filterNode||this.scriptProcessorNode),this.sourceNode.connect(this.monitorNode),void this.eventTarget.dispatchEvent(new Event("streamReady"));if(!s.default)throw new Error("Recorder:initStream no audio capability");var t=this;(0,s.default)({audio:this.config.streamOptions}).then((e=>{t.stream=e,t.sourceNode=t.audioContext.createMediaStreamSource(e),t.sourceNode.connect(t.filterNode||t.scriptProcessorNode),t.sourceNode.connect(t.monitorNode),t.eventTarget.dispatchEvent(new Event("streamReady"))})).catch((e=>{t.eventTarget.dispatchEvent(new ErrorEvent("streamError",{error:e}))}))}},n.prototype.pause=function(){"recording"===this.state&&(this.state="paused",this.eventTarget.dispatchEvent(new Event("pause")))},n.prototype.removeEventListener=function(e,t,a){this.eventTarget.removeEventListener(e,t,a)},n.prototype.resume=function(){"paused"===this.state&&(this.state="recording",this.eventTarget.dispatchEvent(new Event("resume")))},n.prototype.setMonitorGain=function(e){this.monitorNode.gain.value=e},n.prototype.start=function(){"inactive"===this.state&&this.stream&&(this.encoder=new i.default,this.config.streamPages?this.encoder.addEventListener("message",this.streamPage):(this.recordedPages=[],this.totalLength=0,this.encoder.addEventListener("message",this.storePage)),this.encodeBuffers=function(){delete this.encodeBuffers},this.duration=0,this.state="recording",this.monitorNode.connect(this.audioContext.destination),this.scriptProcessorNode.connect(this.audioContext.destination),this.eventTarget.dispatchEvent(new Event("start")),this.eventTarget.dispatchEvent(new CustomEvent("duration",{detail:this.duration})),this.encoder.postMessage({command:"encode-init",config:this.config}))},n.prototype.stop=function(){"inactive"!==this.state&&(this.state="inactive",this.audioContext.close&&this.audioContext.close(),this.monitorNode.disconnect(),this.scriptProcessorNode.disconnect(),this.config.leaveStreamOpen||this.clearStream(),this.encoder.postMessage({command:"encode-done"}))},n.prototype._storePage=function({data:e}){if(this.recordedPages.push(e),this.totalLength+=e.length,4&e[5]){this.encoder.removeEventListener("message",this.storePage);for(var t=new Uint8Array(this.totalLength),a=0,r=0;r<this.recordedPages.length;r++)t.set(this.recordedPages[r],a),a+=this.recordedPages[r].length;this.eventTarget.dispatchEvent(new CustomEvent("dataAvailable",{detail:new Blob([t],{type:"audio/ogg; codecs=opus"})})),this.recordedPages=[],this.eventTarget.dispatchEvent(new Event("stop"))}},n.prototype._streamPage=function({data:e}){this.eventTarget.dispatchEvent(new CustomEvent("dataAvailable",{detail:new Blob([e],{type:"audio/ogg; codecs=opus"})})),4&e[5]&&(this.encoder.removeEventListener("message",this.streamPage),this.eventTarget.dispatchEvent(new Event("stop")))};var o=n;t.default=o},57052:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.liveLocationIcon=function(e){var t="live-location";e&&(t+="-active");var a=function(){switch(s.default.platform){case s.PLATFORMS.ANDROID:case s.PLATFORMS.SMBA:return"android";case s.PLATFORMS.IPHONE:case s.PLATFORMS.SMBI:case s.PLATFORMS.IPAD:case s.PLATFORMS.IPOD:return"iphone";case s.PLATFORMS.WP7:return"wp";default:return""}}();a&&(t+="-"+a);return t};var s=r(a(52737))},87713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class a{constructor(e){this.promise=e,this.lastUsedTime=this.createdTime=+Date.now()}}t.default=class{constructor(e,{maxCached:t=10,maxAge:a=1/0,shouldCache:r}){this._cache={},this._maxCached=t,this._maxAge=a,this._createPromiseFunc=e,this._shouldCacheFunc=r}getOrRun(e,...t){var r=this._cache;if(this._maxAge!==1/0)for(var s=Date.now()-this._maxAge,i=Object.keys(r),n=0;n<i.length;n++){var o=i[n];r[o].createdTime<s&&delete r[o]}var l=r[e];if(l)return l.lastUsedTime=+Date.now(),l.promise;var d=Object.keys(r);if(d.length>=this._maxCached){for(var u,c,h=0;h<d.length;h++){var f=d[h],p=r[f];(null==c||p.lastUsedTime<c)&&(c=p.lastUsedTime,u=f)}u&&delete r[u]}var m=this._createPromiseFunc.apply(void 0,[e,...t]);return r[e]=new a(m),m.then((t=>{var a=this._shouldCacheFunc;a&&this._cache[e]===m&&!a(t)&&delete this._cache[e]})).catch((()=>{this._cache[e]===m&&delete this._cache[e]})),m}}},36533:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(70417)),i=r(a(19976)),n=a(89083),o=r(a(50935)),l=a(95595),d=r(a(79251)),u=r(a(85350));function c(){var e=(0,i.default)(["Invalid cursor at ",", array.length = ",", element = ",""]);return c=function(){return e},e}var h="before",f="after";function p(e,t,a){var r=t,s=e.toArray(),i=a===h?-1:1;return{hasNext:()=>r>=0&&r<s.length,next(){var e=s[r];return e||__LOG__(3)(c(),r,s.length,e),r+=i,e}}}function m(e,t,a,r=1,s){for(var i,l=(0,d.default)()*r,c=p(e,t,a),h=0,f=0;c.hasNext();){var m=c.next(),_=(0,u.default)(m),v=2*(m.isNotification?1:0)+m.isSentByMe;if(f++,(h+=_+(v&&v===i?2:12))>l)break;if(f>=s)break;var g=m.asGroupedSticker,E=null!=m.asAlbumAsset;if(g||E){var S=[],C=!1,y=1;if(g){var b=void 0;if(c.hasNext()){if(b=c.next(),S.push(b),++f>=s)break;(0,n.canBeGroupedAsAlbum)(m.safe(),b.safe())&&b.asGroupedSticker&&(C=!0)}}if(E)for(var T=m,M=void 0;c.hasNext()&&y<o.default.ALBUM_MAX_SIZE&&(M=c.next(),S.push(M),!(++f>=s))&&(0,n.canBeGroupedAsAlbum)(T.safe(),M.safe())&&M.asAlbumAsset;)y++,T=M;if(g&&!C||E&&y<o.default.ALBUM_MIN_SIZE)if((h+=S.reduce(((e,t)=>e+(0,u.default)(t)),0))>l)break}i=v}return f}function _(e,t,a,r=1,s){for(var i,c=(0,d.default)()*r,h=p(e,t,a),f=0,m=0;h.hasNext();){var _=h.next(),v=(0,u.default)(_),g=_.author||(_.isSentByMe?(0,l.getMaybeMeUser)():void 0);if(m++,(f+=v+(g&&!_.isSentByMe&&g!==i?19:0)+(g&&g===i?2:12))>c)break;if(m>=s)break;var E=_.asGroupedSticker,S=null!=_.asAlbumAsset;if(E||S){var C=[],y=!1,b=1;if(E){var T=void 0;if(h.hasNext()){if(T=h.next(),C.push(T),++m>=s)break;(0,n.canBeGroupedAsAlbum)(_.safe(),T.safe())&&T.asGroupedSticker&&(y=!0)}}if(S)for(var M=_,N=void 0;h.hasNext()&&b<o.default.ALBUM_MAX_SIZE&&(N=h.next(),C.push(N),!(++m>=s))&&(0,n.canBeGroupedAsAlbum)(M.safe(),N.safe())&&null!=N.asAlbumAsset;)b++,M=N;if(E&&!y||S&&b<o.default.ALBUM_MIN_SIZE)if((f+=C.reduce(((e,t)=>e+(0,u.default)(t)),0))>c)break}i=g}return m}function v(e,t,a,r=1,s){for(var i=(0,d.default)()*r,n=p(e,t,a),o=0,l=0;n.hasNext();){var c=n.next();if(l++,(o+=(0,u.default)(c)+65)>i)break;if(l>=s)break}return l}function g(e,t,a=f){for(var r=2*(0,d.default)(),s=p(e,t,a),[i,n,o]=[0,!0,null];s.hasNext();){var l=s.next(),c=(0,u.default)(l),h=2*(l.isNotification?1:0)+l.isSentByMe;if((i+=c+(h&&h===o?2:12))>r){n=!1;break}o=h}return n}class E{static create(e){var{msgCollection:t,focusedMsgKey:a,type:r,maxInitialCount:s=Number.MAX_SAFE_INTEGER}=e;return new E({type:r}).init(a,t,s)}constructor(e){var{type:t,before:a,after:r,focusedMsgKey:s,prevFocusedMsgKey:i}=e;this._type=t,this._focusedMsgKey=s,this._prevFocusedMsgKey=i,this.before=a||0,this.after=r||0}_cloneWith(e){return new E((0,s.default)({type:this._type,before:this.before,after:this.after,focusedMsgKey:this._focusedMsgKey,prevFocusedMsgKey:this._prevFocusedMsgKey},e))}_getCursorSize(e,t,a,r,s){return function(e){switch(e){case o.default.RENDER_CURSOR.CONVERSATION:return m;case o.default.RENDER_CURSOR.GROUP_CONVERSATION:return _;case o.default.RENDER_CURSOR.STARRED_DRAWER:return v;default:return m}}(this._type)(e,t,a,r,s)}getStart(e){return Math.max(S(this._focusedMsgKey,e,this._type)-this.before,0)}getEnd(e){return Math.min(S(this._focusedMsgKey,e,this._type)+this.after+1,e.length)}hasBefore(e){return S(this._focusedMsgKey,e,this._type)-this.before>0}hasAfter(e){return S(this._focusedMsgKey,e,this._type)+this.after<e.length-1}init(e,t,a=Number.MAX_SAFE_INTEGER){return new E({type:this._type,before:0,after:0,focusedMsgKey:e}).loadBefore(t,{factor:1,maxCount:a}).loadAfter(t,{factor:1,maxCount:a})}setFocusedMsgKey(e,t){var a,r,s=S(this._focusedMsgKey,e,this._type),i=S(t,e,this._type);return t?(r=this.after-(i-s),a=this.before+(i-s)):(a=this.before+this.after,r=0),this._cloneWith({focusedMsgKey:t,before:a,after:r})._updatePrev(e)}ensureValidFocus(e){var t=null!=this._prevFocusedMsgKey&&null==e.get(this._prevFocusedMsgKey),a=null!=this._focusedMsgKey&&null==e.get(this._focusedMsgKey),r=this;return t&&(r=r._updatePrev(e)),a&&(r=r.focusBefore(e)),r}_updatePrev(e){var t=S(this._focusedMsgKey,e,this._type);return this._cloneWith({prevFocusedMsgKey:t>0?e.at(t-1).id:void 0})}focusBefore(e){return this._cloneWith({focusedMsgKey:this._prevFocusedMsgKey})._updatePrev(e)}loadBefore(e,t){var{count:a,maxCount:r=Number.MAX_SAFE_INTEGER,factor:s=2}=t||{},i=null!=a&&0!==a?a:this._getCursorSize(e,Math.max(0,this.getStart(e)-1),h,s,r);return this._cloneWith({before:this.before+i})}loadAfter(e,t){var{count:a,maxCount:r=Number.MAX_SAFE_INTEGER,factor:s=2}=t||{},i=null!=a&&0!==a?a:this._getCursorSize(e,this.getEnd(e),f,s,r);return this._cloneWith({after:this.after+i})}loadBeforeCapped(e,t){var{count:a,factor:r=2}=t||{};return g(e,this.getStart(e),f)?this.loadBefore(e,{count:a,factor:r}):this}resetBeforeCursor(e,t=Number.MAX_SAFE_INTEGER){if(!g(e,this.getStart(e),f)){var a=Math.max(0,this.getEnd(e)-1),r=this._getCursorSize(e,a,h,2,t);return this._cloneWith({before:Math.min(this.before,r)})}return this}}function S(e,t,a){if(e){var r=t.get(e),s=t.indexOf(r);if(-1!==s)return s}return function(e){switch(e){case o.default.RENDER_CURSOR.CONVERSATION:case o.default.RENDER_CURSOR.GROUP_CONVERSATION:return o.default.RENDER_CURSOR.RECENT_AT_BOTTOM;case o.default.RENDER_CURSOR.STARRED_DRAWER:return o.default.RENDER_CURSOR.RECENT_AT_TOP;default:return o.default.RENDER_CURSOR.RECENT_AT_BOTTOM}}(a)===o.default.RENDER_CURSOR.RECENT_AT_TOP?0:t.length-1}t.default=E},10385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return/\s\s+/.test(e)?e.replace(/\s\s+/g,(e=>{for(var a="",r=0;r<e.length;r++)a+=t&&"\n"===e[r]?"\n":"";return a})):e}},38362:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(28267));class i extends s.default{constructor(e){super(),this.isSelectable=e}setSelectable(e){return this.isSelectable=e,this.trigger("update-selectable",e),this.isSelectable}}t.default=i},79953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.initSessionId()}initSessionId(){this.sessionId=this.newSessionId()}newSessionId(){return this.sessionId=Math.floor(2147483648*Math.random()),this.sessionId}}},74556:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.reconnect=void 0;var i=s(a(17026)),n=r(a(12767));var o=(new class{constructor(){this.isReconnecting=!1,this.reconnectIfDisconnected=()=>{this.isReconnecting||i.default.displayInfo!==i.StreamInfo.OFFLINE||(this.isReconnecting=!0,n.default.poke(),n.default.summary(),setTimeout((()=>this.isReconnecting=!1),3e3))}}}).reconnectIfDisconnected;t.reconnect=o},38727:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.securityUrl=function(){return n.default.build(s.default.SECURITY_LINK,{lg:i.default.getLocale()})};var s=r(a(50935)),i=r(a(17957)),n=r(a(74185))},18388:(e,t)=>{"use strict";function a(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFromStylesProp=a,t.getIntFromStylesProp=function(e,t){return parseInt(a(e,t),10)},t.getFloatFromStylesProp=function(e,t){return parseFloat(a(e,t))}},42279:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case s.default.VERIFIED_LEVEL.HIGH:return"high";case s.default.VERIFIED_LEVEL.LOW:return"low";case s.default.VERIFIED_LEVEL.UNKNOWN:default:return"unknown"}};var s=r(a(50935))},91658:(e,t,a)=>{"use strict";var r=a(14859);t.D=function({action:e,message:t}){switch(e){case n.default.REQUEST_STREAMING_INFO:return function(e){var t=d.default.get(e);return t?(0,o.videoStreamingInfo)(t):null}(t.key);case n.default.EXP_BACKOFF:return a(82885).expDelaySec(t.generation,60).then((()=>u.default.waitIfOffline({signal:(new i.default).signal})));case n.default.REQUEST_RMR:return function(e){var t=d.default.get(e.key);return t?t.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING,isUserInitiated:!0}).then((()=>Promise.reject("downloaded media instead of streaming"))):null}(t);case n.default.SEND_STREAMING_CHUNK:var r,s=t.msgKey,c=d.default.get(s);if(!c)return void delete f[s.toString()];f.hasOwnProperty(s)?r=f[s.toString()]:f[s.toString()]=r=new h(c.size),r.push(t.data),r.isComplete()&&((0,o.manuallySetMedia)({msg:c,media:r.serialize(),rmrReason:l.default.WEBC_RMR_REASON_CODE.VIDEO_STREAMING}),delete f[s.toString()]);break;default:return Promise.reject("Invalid Video Streaming Action")}};var s=r(a(19976)),i=r(a(12489)),n=r(a(99215)),o=a(28278),l=r(a(40210)),d=r(a(58885)),u=r(a(99911));function c(){var e=(0,s.default)(["video buffer falsy size: ",""]);return c=function(){return e},e}class h{constructor(e){this.ranges=[],this.buffer=[],this.size=e,e||__LOG__(3)(c(),e)}push(e){this.buffer.push(e),this.add(e.start,e.end)}add(e,t){for(var a=e,r=this.ranges,s=0;s<r.length;s++){var[i,n]=r[s];if(!(a>n+1)){if(t+1<i)return r.splice(s,0,[a,t]);for(;s+1<r.length;){var[o,l]=r[s+1];if(t+1<o)break;a=Math.min(a,i),r.splice(s,1),i=o,n=l}return void(r[s]=[Math.min(a,i),Math.max(t,n)])}}return r.push([a,t])}isComplete(){var e=this.ranges,t=this.size;return!!t&&(1===e.length&&0===e[0][0]&&e[0][1]===t-1)}serialize(){for(var e=new Uint8Array(this.size),t=this.buffer,a=0;a<t.length;a++){var{start:r,buffer:s}=t[a];e.set(new Uint8Array(s),r)}return e}}var f={}},92840:(e,t)=>{"use strict";t.Z=void 0;t.Z={SMILEYS_PEOPLE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ANIMALS_NATURE:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FOOD_DRINK:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ACTIVITY:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],TRAVEL_PLACES:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],OBJECTS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],SYMBOLS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],FLAGS:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}},16426:(e,t)=>{"use strict";t.Z=void 0;t.Z={"#":1,"":1,"*":2,"0":3,"":3,"1":4,"":4,"2":5,"":5,"3":6,"":6,"4":7,"":7,"5":8,"":8,"6":9,"":9,"7":10,"":10,"8":11,"":11,"9":12,"":12,"":13,"":14,"":17,"":21,"":22,"":23,"":24,"":31,"":32,"":48,"":49,"":54,"":55,"":59,"":61,"":62,"":69,"":79,"":82,"":83,"":84,"":85,"":86,"":87,"":88,"":89,"":90,"":91,"":92,"":93,"":95,"":96,"":97,"":98,"":99,"":102,"":112,"":113,"":119,"":120,"":121,"":124,"":130,"":133,"":134,"":136,"":152,"":153,"":154,"":156,"":158,"":164,"":175,"":188,"":189,"":190,"":193,"":195,"":196,"":197,"":198,"":200,"":204,"":206,"":209,"":210,"":211,"":214,"":215,"":217,"":218,"":219,"":220,"":222,"":223,"":224,"":225,"":226,"":228,"":230,"":231,"":233,"":235,"":236,"":285,"":295,"":308,"":316,"":318,"":352,"":356,"":364,"":433,"":477,"":477,"":495,"":496,"":497,"":498,"":500,"":502,"":503,"":504,"":505,"":506,"":507,"":508,"":510,"":512,"":513,"":514,"":515,"":516,"":517,"":518,"":520,"":535,"":541,"":560,"":561,"":563,"":564,"":565,"":566,"":567,"":570,"":572,"":573,"":574,"":575,"":577,"":578,"":581,"":582,"":586,"":591,"":592,"":596,"":597,"":598,"":599,"":600,"":601,"":602,"":603,"":605,"":606,"":607,"":610,"":611,"":620,"":621,"":622,"":623,"":624,"":625,"":626,"":628,"":630,"":631,"":636,"":637,"":638,"":639,"":640,"":641,"":647,"":648,"":649,"":650,"":653,"":654,"":655,"":656,"":657,"":658,"":659,"":660,"":669,"":670,"":672,"":673,"":674,"":675,"":676,"":677,"":679,"":680,"":683,"":684,"":685,"":689,"":690,"":691,"":692,"":694,"":698,"":699,"":700,"":701,"":703,"":716,"":730,"":737,"":739,"":796,"":798,"":799,"":801,"":802,"":803,"":804,"":805,"":806,"":807,"":808,"":809,"":811,"":812,"":818,"":819,"":820,"":821,"":846,"":847,"":850,"":851,"":853,"":857,"":858,"":859,"":860,"":861,"":865,"":866,"":870,"":872,"":873,"":874,"":877,"":878,"":879,"":880,"":881,"":882,"":883,"":885,"":886,"":887,"":888,"":889,"":890,"":891,"":892,"":893,"":899,"":902,"":908,"":914,"":916,"":922,"":928,"":934,"":940,"":946,"":952,"":958,"":964,"":970,"":976,"":982,"":983,"":985,"":986,"":988,"":989,"":990,"":993,"":996,"":997,"":998,"":999,"":1e3,"":1003,"":1009,"":1015,"":1192,"":1387,"":1459,"":1477,"":1483,"":1489,"":1507,"":1515,"":1516,"":1522,"":1523,"":1524,"":1525,"":1550,"":1556,"":1557,"":1587,"":1588,"":1589,"":1590,"":1592,"":1593,"":1594,"":1595,"":1596,"":1597,"":1598,"":1599,"":1602,"":1603,"":1604,"":1605,"":1606,"":1607,"":1608,"":1610,"":1612,"":1613,"":1614,"":1615,"":1617,"":1619,"":1620,"":1621,"":1632,"":1633,"":1641,"":1642,"":1643,"":1644,"":1645,"":1647,"":1648,"":1670,"":1677,"":1680,"":1681,"":1682,"":1683,"":1689,"":1691,"":1694,"":1697,"":1698,"":1699,"":1700,"":1702,"":1703,"":1706,"":1707,"":1708,"":1721,"":1724,"":1728,"":1729,"":1730,"":1731,"":1740,"":1741,"":1748,"":1751,"":1754,"":1758,"":1759,"":1760,"":1761,"":1762,"":1763,"":1779,"":1780,"":1781,"":1782,"":1783,"":1784,"":1785,"":1786,"":1787,"":1788,"":1789,"":1790,"":1878,"":1879,"":1880,"":1884,"":1885,"":1886,"":1887,"":1892,"":1893,"":1895,"":1896,"":1898,"":1901,"":1902,"":1903,"":1905,"":1907,"":1909,"":1911,"":1912,"":1913,"":1915,"":1916,"":1917,"":1918,"":1920,"":1923,"":1925,"":1928,"":1931,"":1932,"":1933,"":1934,"":1938,"":2003,"":2033,"":2039,"":2042,"":2043,"":2044,"":2046,"":2048,"":2051,"":2054,"":2056,"":2057,"":2058,"":2060,"":2062,"":2064,"":2065,"":2073,"":2087,"":2088,"":2090,"":2095,"":2096,"":2101,"":2129,"":2144,"":2145,"":2146,"":2147,"":2148,"":2149,"":2151,"":1406,"":1417,"":1448,"":1466,"":1496,"":1526,"":1539,"":1563,"":1575,"":1952,"":1964,"":1977}},88877:(e,t)=>{"use strict";t.Z=void 0;t.Z=["","#","*","0","1","2","3","4","5","6","7","8","9","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","","","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"","",["",""],"",["",""],"",["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},72049:(e,t,a)=>{"use strict";var r=a(93291),s=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,a)=>{var r=new i.default;r.onerror=function(e){r.terminate(),a(new n.DecodeWebpResultsError("worker error",e))},r.onmessageerror=function(e){r.terminate(),a(new n.DecodeWebpResultsError("worker message error",e))},r.onmessage=e=>{r.terminate();var a=e.data;t(a)},r.postMessage({webpBuffer:e},[e])}))};var i=s(a(66665)),n=r(a(96452))},24996:(e,t,a)=>{"use strict";var r=a(14859),s=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListener=t.SelectionListener=t.WhileFocusedListener=void 0;var i=s(a(2784)),n=r(a(79711)),o=r(a(20642)),l=r(a(40207));class d extends i.PureComponent{constructor(...e){super(...e),this.scrollMsg=(e,t)=>{this.props.parent.scrollMsg(e,t)},this.flashFocusedMsg=()=>{this.props.parent.highlight()}}componentDidMount(){this.props.listeners.add(n.default,"scroll_to_focused_msg",this.scrollMsg),this.props.listeners.add(n.default,"flash_focused_msg",this.flashFocusedMsg)}render(){return null}}d.displayName="WhileFocused";var u=(0,o.default)(d);t.WhileFocusedListener=u;class c extends i.PureComponent{constructor(...e){super(...e),this.onSelectChange=e=>{this.props.parent.onSelectChange(e)}}componentDidMount(){var{listeners:e,msgId:t,selectedMessages:a}=this.props;e.add(a,t,this.onSelectChange)}componentDidUpdate(e){var{listeners:t,msgId:a,selectedMessages:r}=this.props;e.selectedMessages!==r&&(t.remove(e.selectedMessages,a,this.onSelectChange),t.add(r,a,this.onSelectChange))}render(){return null}}c.displayName="Selection";var h=(0,o.default)(c);t.SelectionListener=h;class f extends i.PureComponent{componentDidUpdate(){this.props.parent.forceUpdate()}render(){return null}}f.CONCERNS={mediaData:["isGif"]},f.displayName="MediaListenerClass";var p=(0,l.default)(f,f.CONCERNS);t.MediaListener=p},88446:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(46378),i=r(a(22885));function n(e){return(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2}function o(e){return(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}var l=/[^\x00-\x7F]/g;t.default=class{constructor(){this.files=[],this.filenameCount={}}add(e,t,a=new Date){var r=function(e){return e.replace(/\\/,"/").replace(l,"")}(t);this.filenameCount[r]>=0?(this.filenameCount[r]+=1,r=r.replace(/\.(\w+)$/," ("+this.filenameCount[r]+").$1")):this.filenameCount[r]=0,this.files.push([e,{crc:(0,i.default)(e),path:r,date:a}])}create(){var e=0,t=0,a=0,r=[],i=[];this.files.forEach((l=>{var[d]=l,u=d.size(),c=function([e,{path:t,crc:a,date:r}]){var i=new s.Binary(void 0,!0);return i.ensureCapacity(30+t.length),i.writeUint32(67324752),i.writeUint8(10),i.writeUint8(0),i.writeUint16(0),i.writeUint16(0),i.writeUint16(n(r)),i.writeUint16(o(r)),i.writeUint32(a),i.writeUint32(e.size()),i.writeUint32(e.size()),i.writeUint16(t.length),i.writeUint16(0),i.writeString(t),i}(l),h=function([e,{path:t,crc:a,date:r}],i){var l=new s.Binary(void 0,!0);return l.ensureCapacity(46+t.length),l.writeUint32(33639248),l.writeUint8(10),l.writeUint8(0),l.writeUint8(10),l.writeUint8(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(n(r)),l.writeUint16(o(r)),l.writeUint32(a),l.writeUint32(e.size()),l.writeUint32(e.size()),l.writeUint16(t.length),l.writeUint16(0),l.writeUint16(0),l.writeUint16(0),l.writeUint16(0),l.writeUint32(0),l.writeUint32(i),l.writeString(t),l}(l,a),f=c.size()+u;a+=f,e+=f+h.size(),t+=h.size(),i.push(c,d),r.push(h)}));var l,d,u,c,h=(l=this.files.length,d=t,u=a,(c=new s.Binary(void 0,!0)).ensureCapacity(22),c.writeUint32(101010256),c.writeUint16(0),c.writeUint16(0),c.writeUint16(l),c.writeUint16(l),c.writeUint32(d),c.writeUint32(u),c.writeUint16(0),c),f=new s.Binary(void 0,!0);return f.ensureCapacity(e+h.size()),f.write(...i,...r,h),f}}},59321:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Promise.all(e.map((({blob:e})=>function(e){var t;return new Promise(((a,r)=>{(t=new FileReader).addEventListener("loadend",(()=>{a(s.Binary.build(t.result))})),t.addEventListener("error",(e=>r(e))),t.readAsArrayBuffer(e)}))}(e)))).then((t=>{var a,r=new i.default;return t.forEach(((t,a)=>r.add(t,e[a].name))),a=r.create(),new Blob([a.readByteArray()],{type:"application/zip"})}))};var s=a(46378),i=r(a(88446))},53139:(e,t,a)=>{e.exports=a.p+"img/rooms-2x_909204b15b49fc2ef16b123e8afc3bf0.jpg"},29098:(e,t,a)=>{e.exports=a.p+"img/rooms-dark-2x_e4f7bea856269e5e75cef04bbbf104a4.jpg"},58207:(e,t,a)=>{e.exports=a.p+"img/rooms-dark_88f4fbf81adf3532145c6eb491776f06.jpg"},57765:(e,t,a)=>{e.exports=a.p+"img/rooms_ddca60c97a36e2b80c29bce69502c93b.jpg"},59984:(e,t,a)=>{e.exports=a.p+"img/sticker-empty_9d7feb47a66ef5b59cc731acafd02266.png"},94883:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1VwF0",child:"_2p30Q"}},78714:(e,t,a)=>{"use strict";a.r(t),t.default={addToCartIcon:"_2suEa"}},30950:(e,t,a)=>{"use strict";a.r(t),t.default={archivedIcon:"_3lAfe",unreadCountWrapper:"_1iy5j"}},39594:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_25tHC"}},84621:(e,t,a)=>{"use strict";a.r(t),t.default={actionLink:"GLTDs",chevron:"_1__M6",actionText:"lHWcP"}},51421:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_1fl3S",wrapper:"_18NVz",butterbar:"_1ADuG",icon:"ns-Tk",body:"_2awml",controls:"rHV-e",controlsIcon:"_3XuJO",title:"_1wQdF",text:"_21weU",notification:"_1Lctt",update:"G9o7j",computer:"_2cSPm",phone:"G3yfJ",battery:"QzGkw",notice:"_5Z5dG",noticeSmb:"_3KPPe",noticeSvgWrapper:"_1uGGF",fatalSvgWrapper:"_2CU1B",fatal:"_4d09T"}},19475:(e,t,a)=>{"use strict";a.r(t),t.default={btnContext:"dNJHX",focusAnimation:"_25T1J",focusAnimationKeyframes:"_2EF3V",product:"rvH9x"}},48880:(e,t,a)=>{"use strict";a.r(t),t.default={chatstateTyping:"_1JCRe"}},28714:(e,t,a)=>{"use strict";a.r(t),t.default={markerAdmin:"_33IQJ",markerInvited:"_2E2sG",chatControls:"_1zL23",screenName:"ekBrd",contactSmall:"_2WBxE"}},51758:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2TiQe",iconPinned:"_3EhXO",archived:"_2SDbp"}},33359:(e,t,a)=>{"use strict";a.r(t),t.default={italic:"_2MgHs",product:"_33Hg2",last:"_1DB2K"}},40722:(e,t,a)=>{"use strict";a.r(t),t.default={ack:"_1Tnge",ackBlue:"qfllr"}},39399:(e,t,a)=>{"use strict";a.r(t),t.default={symbol:"DcZKr",margin:"_2L4Uz",miss:"_19Ppi",pttBlue:"_3fLTW",pttGreen:"_3Bzv0"}},58362:(e,t,a)=>{"use strict";a.r(t),t.default={statusLoading:"_2RfNG"}},99165:(e,t,a)=>{"use strict";a.r(t),t.default={count:"_38M1B",transparentBg:"_2fMmB"}},46394:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3IGMG",btnActive:"_27svr",btnAction:"_3aW7G",controlsSummary:"_3JBJ3",confirm:"_2iXXq",summaryText:"_2jeJx",item:"nHv68"}},28080:(e,t,a)=>{"use strict";a.r(t),t.default={listUser:"_1KBFI",listUserBeta:"_1kiSe",betaIcon:"_3q-bb",betaIconText:"_25ZmH",header:"_1R3Un",listControls:"_2XP8p"}},97838:(e,t,a)=>{"use strict";a.r(t),t.default={chatListPanel:"_3U29Q",panelBody:"F-0gY",panelSearch:"SgIJV",spinner:"f04W5",unreadContainer:"_28XyA",unread:"k1drS",unreadBody:"_2xrLr",unreadIcon:"_15PEz"}},74269:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxChatWrapper:"_21xgG",checkboxChatControl:"_1YJLZ",labelSelection:"_3Fvmx"}},17110:(e,t,a)=>{"use strict";a.r(t),t.default={selectedListContainer:"_1cr8H"}},46526:(e,t,a)=>{"use strict";a.r(t),t.default={iconSpinner:"_2FQDl",iconCloseSearch:"_1QWS8",iconLabelSelect:"_3xzAH",iconMorph:"_1rPZq",inputPlaceholder:"_2MwRD",labelSearchPlaceholder:"_2Wk2O",listSearch:"_3LX7r",contInputSearch:"RPX_m",active:"_1brJQ",iconSearchMorph:"_1Ek-U",iconMorphSearch:"_2w7RB",iconMorphBack:"_1-jFy",kind:"_3H1Lp",labels:"_2wW5w",kindName:"_3el0F",filterTitle:"_1qp5u"}},20838:(e,t,a)=>{"use strict";a.r(t),t.default={annotation:"_1Iw92",tooltip:"_16Vox"}},61104:(e,t,a)=>{"use strict";a.r(t),t.default={container:"JRQje"}},90631:(e,t,a)=>{"use strict";a.r(t),t.default={badge:"_3mt1A",icon:"-w2cT",pending:"_3yP6N",warning:"_1zUiE"}},48290:(e,t,a)=>{"use strict";a.r(t),t.default={border:"RJQTy"}},58520:(e,t,a)=>{"use strict";a.r(t),t.default={chat:"_2Z4DV",chatAvatar:"_2GAT7",chatBody:"TbtXF",chatDetails:"_1vts9",chatMain:"_2pkLM",noDelete:"_2Gis3",chatSecondary:"_1SjZ2",chatTitle:"_3Dr46",chatStatus:"_2vfYK",chatMeta:"_15smv",unread:"_1V5O7",active:"_2GVnY",chatDrag:"_157ZL",idle:"_3lDa2",isMuted:"_2yGV5",themeMessage:"_3mMG5",themeSearch:"_1yWgH",themeDrawerList:"_25uA8",themeStatus:"_2v36_",themeCheckbox:"gAmmU",themeIdentity:"_1lyeT",themePlain:"_3nJaS",themeAddItem:"umq9U",themeAddItemPlaceholder:"_1sfOJ",themeListNames:"_1D_0o",member:"_9cawA",themeLabel:"_38kdg",groupV4Invite:"_3bAWs",cartProduct:"_31oBd",orderProduct:"V2o6Z",product:"_7W2oc",media:"_3UX25",listButton:"_3RCKI",listMsg:"_16bJ1",archivePanel:"_2yCbQ"}},95122:(e,t,a)=>{"use strict";a.r(t),t.default={chatSubtitle:"YmixP",chatSubtitleHeader:"fKfSX",chatSubtitleText:"_7yrSq"}},35905:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxContainer:"_11nSm",containerDisabled:"_3MAli",checkbox:"_1PhzV",checkmark:"_1o8v1",partialCheckMark:"_2rbom",checkedCheckbox:"_3OPbH",checkedCheckmark:"_7cIil","checkmark-expand":"Jbtvt",checkmarkExpand:"Jbtvt",uncheckedCheckmark:"_2bXoJ",disabled:"_3i-t4",a11yHidden:"D5KxD",a11YHidden:"D5KxD",itemFocused:"ONcbP"}},66692:(e,t,a)=>{"use strict";a.r(t),t.default={container:"WAOGU",roundIcon:"cZUDv",unchecked:"_3imqP",passive:"_35A8B",uncheckedSystemColor:"WYga3"}},77095:(e,t,a)=>{"use strict";a.r(t),t.default={btn:"_3LLJf",overMedia:"_1v8Vs",btnMediaPrev:"_2Op2j",btnMediaNext:"_1tT0K",disabledBtn:"_1033h"}},23695:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1RP96",defaultWallpaper:"_1qfDM",icon:"_1dstd",body:"_39KUa",main:"_1gsAf",secondary:"-sOEK",inConversation:"Y_Tzl",inList:"_1gveV"}},13303:(e,t,a)=>{"use strict";a.r(t),t.default={avatar:"-y4n1",avatarDefault:"_27MZN",avatarImage:"_18-9u",isLoaded:"_1bvi5",avatarSquare:"_2YW02",avatarBorder:"_10EGY",status_v3:"_37wPk",statusV3:"_37wPk",wrapper:"_3xDaM",badge:"_2jC5S",badgeIcon:"_1Crzo"}},32514:(e,t,a)=>{"use strict";a.r(t),t.default={docState:"MYzfD",spinner:"_2Mrqr"}},56061:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_2iavx",text:"_3UHfW",hover:"H774S",action:"_2xxet",compact:"_3lsW-",icon:"_3pa6w",emoji:"zlxY1",emojiGrid:"_1V0Of",ellipsify:"_11srW",disabled:"XsEXg",shortcut:"_2CDB7"}},89170:(e,t,a)=>{"use strict";a.r(t),t.default={ellipsify:"_35k-1",inlineblock:"_1adfa",dirMismatch:"_3mEJQ",clickable:"eHxwV",multiline:"_2X0v8"}},81226:(e,t,a)=>{"use strict";a.r(t),t.default={empty:"_2jXbt",emptyTop:"_1Bl8T",compact:"_32hsN",icon:"XcGMi",title:"_3aOS0",text:"_1Z51l",spinner:"_3w8dk",action:"_2D4nl",iconRetry:"_2Y7hF"}},65633:(e,t,a)=>{"use strict";a.r(t),t.default={tooltip:"_1ZBYg","tooltip-left-ltr":"_32muP",tooltipLeftLtr:"_32muP","tooltip-left-rtl":"UZXPg",tooltipLeftRtl:"UZXPg"}},73823:(e,t,a)=>{"use strict";a.r(t),t.default={read_more:"_3WiqP",readMore:"_3WiqP"}},8196:(e,t,a)=>{"use strict";a.r(t),t.default={avatar:"_18F7-",roundBorder:"fglKy",avatarWrapper:"_3VFyD",avatarSvgWrapper:"_2n7Fn",avatarImageWrapper:"_3le87",transition:"xfXHb",isLoaded:"JDx73",centerChild:"_2O4MY",avatarImage:"_2zrad"}},25610:(e,t,a)=>{"use strict";a.r(t),t.default={viewport:"JnmQF",verticalListViewport:"_3QmOg",horizontalListViewport:"_1RGKC"}},31547:(e,t,a)=>{"use strict";a.r(t),t.default={loadingSpinner:"_2u_cJ"}},28787:(e,t,a)=>{"use strict";a.r(t),t.default={item:"_2aBzC"}},26327:(e,t,a)=>{"use strict";a.r(t),t.default={hidden:"S4f3Y",container:"_3Y-Yn"}},43406:(e,t,a)=>{"use strict";a.r(t),t.default={controls:"_1DzQ6","progress-container":"_1Tajs",progressContainer:"_1Tajs",spinner:"_1vKld",btnMeta:"FgdlY",button:"_1yOQ-",icon:"_3Zxpe",cancel:"_2gwhV",disabled:"JY9-s",cursorPointer:"_2j_hL",play:"_3MSVi",iconMeta:"_1Z2Bl"}},25997:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1UQjI",child:"_1TKV3"}},44417:(e,t,a)=>{"use strict";a.r(t),t.default={menu:"_1ljzS",menuDefault:"pnYZD",menuStrong:"_2Ryya",menuInverse:"_13CXK",item:"_2n-zq",menuNarrow:"_2rVVT",active:"_3zHcq",selected:"_1Ctiz",disabled:"_32Z1T",itemText:"_2OQU5",itemFocused:"_3BDiU",button:"_1XaX-"}},94660:(e,t,a)=>{"use strict";a.r(t),t.default={multiControls:"_2rwxZ",chatListPanel:"_29mYj",drawerHeader:"_1g25a",multiselectIcon:"mAgFx",multiCount:"_2yoUA",mediaGalleryTheme:"d7ZrF"}},43050:(e,t,a)=>{"use strict";a.r(t),t.default={moveResizeComponentContainer:"_1Rm6W",resizer:"_27rcN",topResizer:"_3BEmS",bottomResizer:"_2-Yyg",leftResizer:"_2n2JM",rightResizer:"_2I8VO",topRightResizer:"_3_9e6",topLeftResizer:"_1Mgib",bottomRightResizer:"_3RZ4L",bottomLeftResizer:"_3ZzP2",moveable:"_1Ctyg",defaultCursor:"_38RQM"}},4018:(e,t,a)=>{"use strict";a.r(t),t.default={multiControls:"_2ngbn",multiselectIcon:"_1toeX",multiCount:"vE--2",mediaGalleryTheme:"_2qjeQ"}},26079:(e,t,a)=>{"use strict";a.r(t),t.default={verified:"_33jgC",psa:"_2597b",icon:"_3OWTC",hasLabels:"N2dUK",labels:"IGI1I"}},50525:(e,t,a)=>{"use strict";a.r(t),t.default={fit:"_1Ivg7",fitRelative:"VCsxv",fitScaledown:"_1K2-v",fitZoomin:"_31unk",nativeCover:"h5LiH",nativeScaleDown:"_2NzCI"}},29516:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_28-ha",container:"_2gXlr",imageContainer:"_1PTSV",lazyLoadRetry:"_1NHIU",defaultIcon:"_1Gyz6"}},62969:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1C2Q3"}},89678:(e,t,a)=>{"use strict";a.r(t),t.default={sensor:"_3q7pL"}},63353:(e,t,a)=>{"use strict";a.r(t),t.default={gridContainer:"_2VLfg",baseEmoji:"_2UopN",options:"_3vyLk"}},6047:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_3MWau",buttonIcon:"cprpJ",nextButton:"_3acHA",prevButton:"_39Ia_",resizeContainer:"_3bFQ0"}},15301:(e,t,a)=>{"use strict";a.r(t),t.default={"-emoji-width":"44px",emojiWidth:"44px","-emoji-height":"44px",emojiHeight:"44px","-side-margin":"12px",sideMargin:"12px",panel:"_22szd",section:"_2hI6B"}},57656:(e,t,a)=>{"use strict";a.r(t),t.default={bodyContainer:"_1BMu5",list:"_2Tbce",search:"_1krs_",hidden:"_2184C"}},94782:(e,t,a)=>{"use strict";a.r(t),t.default={"-total-search-height":"62px",totalSearchHeight:"62px","-scrollbar-width":"6px",scrollbarWidth:"6px","-windows-scrollbar-width":"8px",windowsScrollbarWidth:"8px","-section-bottom-margin":"12px",sectionBottomMargin:"12px","-title-height":"27px",titleHeight:"27px",container:"_1jQGs",title:"_3rlWr"}},4212:(e,t,a)=>{"use strict";a.r(t),t.default={"-emoji-width":"44px",emojiWidth:"44px",panel:"_1o8ls"}},60585:(e,t,a)=>{"use strict";a.r(t),t.default={emojiPanel:"_12FEz",panelBody:"_2iqca",panelDropdown:"_3DP3Y"}},87180:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_2VYT9"}},67703:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1qWwG",icon:"_2HJXt",wrapper:"_2Nxcd",container:"_1U-gB",focusBorder:"_3H-tn",preview:"_1clXy"}},87276:(e,t,a)=>{"use strict";a.r(t),t.default={searchContainer:"Rc3nQ",section:"_1jptU",blank:"_3V3jB",row:"_31NZU",noResults:"_1JKx5"}},408:(e,t,a)=>{"use strict";a.r(t),t.default={bodyContainer:"_1IqI5",gifPanel:"_3zt2r",panelBody:"_2ThFr",panelBodyError:"_9Rp1H"}},47577:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1Q75d",wrapper:"_1Zj0y",innerWrapper:"_1TO8K",starIcon:"_3Y5kH",thumb:"nEDHC",blur:"_1AXvF"}},19893:(e,t,a)=>{"use strict";a.r(t),t.default={pager:"_2JS3V",pagerLeft:"_3sISx",pagerRight:"_26XEv",pagerDisabled:"n_Glb",body:"ZR43g",section:"_18YNn",searchRow:"_38pDI"}},45484:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3ob6-"}},66049:(e,t,a)=>{"use strict";a.r(t),t.default={tab:"YAIhH",highlightOnFocus:"_1-_ei",menu:"_3XLiO",carousel:"_1eeWL",carouselEnd:"_8CwZN",selected:"_2ON8c"}},66881:(e,t,a)=>{"use strict";a.r(t),t.default={menuTabsMarker:"_1io3J",animate:"_1SzfV",hide:"sqtpU"}},73527:(e,t,a)=>{"use strict";a.r(t),t.default={cancelIcon:"_1hIjJ",inputContainer:"L6jO-",inputEmojiSearch:"_5o68e",searchRow:"_215cl",ffFix:"_1W-H5",rowShadow:"_1T8sW",rowInput:"_2oimd"}},25416:(e,t,a)=>{"use strict";a.r(t),t.default={panelContainer:"_1k55R",panelDropdown:"_1DT3G"}},72874:(e,t,a)=>{"use strict";a.r(t),t.default={tabText:"_1foy2"}},15727:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1NQpW",containerSearch:"_2ZY-D",panelHeight:"_3sxJO",contentContainer:"_3EY1G",contentContainerSearch:"_2HZEy",bodyContainer:"_3NBUs",emptyContainer:"DZSqe",emptySticker:"WD06l",emptyText:"_2b04F"}},94034:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_133hl",border:"_2PBOM"}},16473:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2oJE3",retryButton:"_1Hdxn"}},7915:(e,t,a)=>{"use strict";a.r(t),t.default={emptyContainer:"_2kJah",emptySticker:"JrH_m",emptyText:"_3JwNx"}},11992:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_22rlP"}},20932:(e,t,a)=>{"use strict";a.r(t),t.default={unscrollable:"_9b1IR"}},92603:(e,t,a)=>{"use strict";a.r(t),t.default={shadow:"_2HnGZ"}},58881:(e,t,a)=>{"use strict";a.r(t),t.default={container:"cR0ai",stickerPackContainer:"_1SjLi",stickerPackIconWrapper:"_2Ye92"}},21193:(e,t,a)=>{"use strict";a.r(t),t.default={input:"_1JAUF",placeholder:"OTBsx",body:"_2_1wd",default:"_3to_-",compose:"_2x4bz",large:"YOG23",status:"_1aAu5",media:"_3Foy4",invite:"_1kfmw",mediaEditorTextInput:"FHrhN",small:"_3jIJ4","list-search":"_1d1OL",listSearch:"_1d1OL",textInput:"_14P30"}},54359:(e,t,a)=>{"use strict";a.r(t),t.default={emojiSearch:"umIIs",searchBody:"_2ezuB",positioningContainer:"_1xPrU",overlayContainer:"_2gK-X",resultsContainer:"_3yJm7",mediaCaption:"_34E3t",emojiInput:"_1-xnj"}},97580:(e,t,a)=>{"use strict";a.r(t),t.default={mentionsResult:"_2zNFv",selected:"_8RmSF",mediaCaption:"yjMP1",textContact:"_1xqS9",textPushname:"_3btZA",resultImage:"_30ZB_"}},31033:(e,t,a)=>{"use strict";a.r(t),t.default={positioningContainer:"_1p9lF",resultsContainer:"_1tHn5",overlayContainer:"_2vCjo",mediaCaption:"EFTGp"}},86249:(e,t,a)=>{"use strict";a.r(t),t.default={result:"_3I64T",selected:"_3C3JQ",slash:"_3M000",shortcutPrefix:"_3W1V-",shortcutSuffix:"_3DjWg",message:"_1zLRP"}},85682:(e,t,a)=>{"use strict";a.r(t),t.default={positioningContainer:"_33jUX",resultsContainer:"_29bwE",overlayContainer:"_2LMj5"}},52748:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1bLaw"}},23830:(e,t,a)=>{"use strict";a.r(t),t.default={btn:"SncVf",disabled:"S6srh",large:"_3doiV",small:"_1cglN"}},9140:(e,t,a)=>{"use strict";a.r(t),t.default={clickable:"vzSqE",body:"_1Row8",main:"kia3R",mainEllipsify:"_2wzbH",side:"_3TVPy"}},95969:(e,t,a)=>{"use strict";a.r(t),t.default={container:"-lcoh"}},7765:(e,t,a)=>{"use strict";a.r(t),t.default={hide:"_3ribb"}},3023:(e,t,a)=>{"use strict";a.r(t),t.default={conversation:"_1guNH",placeholder:"_3nWnE",composeBoxQuoted:"_1VmII",quoted:"Jc_g2",stickerPanel:"_30rbI",clickable:"E42C1",showSticker:"_3cs02",fadeIn:"_2Xs6t"}},16661:(e,t,a)=>{"use strict";a.r(t),t.default={textInput:"_2O6GW",labelText:"gqrht",hideFloatingLabel:"_1tX37",float:"_2eIqJ",spacer:"jDADV",noPlaceholder:"_1lemF",wrapper:"_3rhi1",locked:"_1nQew",errorText:"_2HC6A",textError:"V8lcE",textActive:"e1K_H",iconMainContainer:"_2zDdK",iconsEditContainer:"_3tDug",invite:"_26uSD",emojiBtn:"_3xyJi",charCounter:"_3aHpZ",iconMain:"_2x6Ym",iconSpinner:"BuoQI",noErrorInfo:"_3tv9H",infoStrip:"Y0dFn",inputLarge:"_3Ihuv",active:"_1fB8E",emptyValPlaceholder:"TVlZg",more:"_1oQqb",emojiText:"_1oORQ",groupInfoName:"_3Ss_B",small:"_3r0ZT",desaturated:"_25Mjf"}},65549:(e,t,a)=>{"use strict";a.r(t),t.default={tooltip:"_3u6fL","menu-tooltip":"_2Ss2P",menuTooltip:"_2Ss2P",left:"_3wxDj"}},72864:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_1UTQ6",focused:"oQ_h5"}},13004:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_27NpB",icon:"_3VEm6",verifiedText:"V0Isi",divider:"_24k22"}},2694:(e,t,a)=>{"use strict";a.r(t),t.default={video:"_2oX7m"}},51383:(e,t,a)=>{"use strict";a.r(t),t.default={adminBtn:"_17SvR"}},92338:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3Urun",text:"_3VBtA",messageNewNumberButton:"_3bbsI"}},36329:(e,t,a)=>{"use strict";a.r(t),t.default={"-overlay-border-right":"1px",overlayBorderRight:"1px","-overlay-border-left":"1px",overlayBorderLeft:"1px",footer:"_3uxr9",positioningContainer:"_1gNA1",overlayContainer:"-fxbk",blockCompose:"vR1LG",inputContainer:"_2A8P4",boxPanelWrapper:"_23e-h",attachButtonContainer:"_2C9f1",childPadding:"EBaI7",disabled:"_1NxrT",btnSend:"_1E0Oz",focusAnimation:"_2A1WX",focusAnimationKeyframes:"_2uvhV"}},37264:(e,t,a)=>{"use strict";a.r(t),t.default={"-open-menu-width":"110px",openMenuWidth:"110px",menu:"_291Eb",button:"_2zMTD",open:"_2mQrI",full:"_2MeuX",closeButton:"_3js56",firstButton:"_2NHIO",secondButton:"igz8o",thirdButton:"kwzXH"}},56951:(e,t,a)=>{"use strict";a.r(t),t.default={"-item-spacing":"16px",itemSpacing:"16px","-item-width":"26px",itemWidth:"26px",container:"_3k0dC",active:"_3Flx8",square24:"rjHB8",square26:"VRn4o",top:"_15ScS",padding:"_3KT4J"}},69327:(e,t,a)=>{"use strict";a.r(t),t.default={panel:"_3_5OP",body:"B3rjP",cancelButton:"UUcHl"}},73554:(e,t,a)=>{"use strict";a.r(t),t.default={tile:"IeYBo"}},12893:(e,t,a)=>{"use strict";a.r(t),t.default={pane:"_1gL0z",selectable:"_2p49L",empty:"_2VvGi",incoming:"_2wFt8",iconDown:"_3P-mY",ffFix:"_2VTX2",unread:"_3qWWi"}},51971:(e,t,a)=>{"use strict";a.r(t),t.default={footer:"_3SUQR",body:"_2wjK5",filler:"_2sw49",footerMessage:"gaV0P",subheader:"_1C6f8"}},88995:(e,t,a)=>{"use strict";a.r(t),t.default={pane:"_3AUV4",previewPane:"_3VoEp",header:"w54d5",title:"oGu7t"}},90136:(e,t,a)=>{"use strict";a.r(t),t.default={subheader:"mn_vp",main:"AEx1p",closeBtn:"_1p8Wa"}},59867:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_1r11a",text:"q9OPd",hidden:"_2CxtW",desc:"fQ7q0",more:"_1yUfw"}},1374:(e,t,a)=>{"use strict";a.r(t),t.default={attachMenuContainer:"_1ld-u",iconsItem:"_1pLAS",iconImage:"_1SWzr"}},70477:(e,t,a)=>{"use strict";a.r(t),t.default={chatControls:"_1IeOz",chatAvatar:"fBf_N",divider:"_1Ut1f",chatHeader:"_1-qgF",chatBody:"_2uaUb",chatMain:"z4t2k",chatTitle:"_2KQyF"}},96115:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_1m1gD",bubbleIn:"_1_T8o",bubbleOut:"_1pwLR",noThumbContainer:"_3inup",noThumbIcon:"_3979X",media:"u4d-M",iconStar:"_1tPI1",isInvite:"_3C0sS",title:"_2QCcV",description:"_1LQD0",source:"_204wf",body:"_1D54Q",isCompose:"_2vA32",extended:"_3IP2x"}},25461:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_2hDby",button:"_3M4BR"}},2182:(e,t,a)=>{"use strict";a.r(t),t.default={albumGridClass:"_2IsiC",albumTopLeft:"_2aWG9",albumTopRight:"_1z91p",albumBottomLeft:"_2hTWW",albumBottomRight:"_29rD6",numberText:"_1Yoli"}},59517:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1b-yo"}},9275:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1RXxK",hasAuthor:"_33A8G",forwardedIndicator:"_2FbRO",hasQuote:"gfZUN",author:"LGz0y",isForwarded:"Axxlt",quote:"_2Zrq9",isGallery:"_1XYyT",ctwaContext:"_2KauZ",meta:"hZMQb",bubbleLeftAvatar:"ZzEev",bubbleRightAvatar:"_17EPa",body:"_2rB2Y",player:"Hei0U",avatarContainer:"cZj1z",playbackRateButtonContainer:"_2mui8",playbackRateButtonContainerVisible:"_3QU33",avatar:"_23QsC",avatarVisible:"_2qfjB",status:"_1S-g9"}},76254:(e,t,a)=>{"use strict";a.r(t),t.default={audio:"_2zpuu",controls:"z4i7V",body:"_3Uk0F",scrollPositionDetector:"GlLvF",button:"_2HtgQ",spinner:"szXv_",metadata:"_3VhUQ",isGallery:"_3mBnI"}},13098:(e,t,a)=>{"use strict";a.r(t),t.default={author:"_26iqs",name:"_1Lc2C",number:"ZJv7X",screenName:"_2F1Ns",verifiedIcon:"_2tbuI",hoverable:"UxSU9"}},84221:(e,t,a)=>{"use strict";a.r(t),t.default={actions:"_3LobI",actionsBtn:"_34JD_",noDivider:"_1d5Yq"}},3535:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"WkAc6",withLargeButtonsSpace:"K74C8",buttonWrapper:"Xc0DA",disabled:"aZeWO",stacked:"_52r6l",buttonLabel:"OHYcl"}},39012:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_2MFDE"}},58353:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_1RPRP",bubbleIn:"_2_i96",bubbleOut:"AF1dH",isCompose:"_3ykTv",noThumbContainer:"_3hqfs",noThumbIcon:"_3ty0l",media:"_2jtnw",title:"bkf8p",description:"_2HyDI",source:"_2bcVi",body:"_1P4HL"}},426:(e,t,a)=>{"use strict";a.r(t),t.default={clickable:"_8TE_E"}},66007:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_3wD43",wrapperIn:"_30YSI",wrapperOut:"_3HmHK",posBottom:"jWjEh",posTop:"_1lddU"}},48508:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_3KIS4",templateBubble:"_10rvA",isPreview:"_2kZMf",isGallery:"_3yEbM",buttonContainer:"_1s_fV",deepContainerContent:"_25XuB",docMeta:"_1-Yga",metaValue:"_1YeeQ",text:"_3tOOP",icon:"uno4I",filetypeIcon:"_2FqtA",thumbContainer:"bXxhb",thumb:"_1VkQG",ctwaContext:"_3kMUY"}},71582:(e,t,a)=>{"use strict";a.r(t),t.default={container:"hsnOd",error:"_17dGQ",compact:"zJfMP"}},51092:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2xq9W",icon:"Sqh9W",iconHighlyForwarded:"_1lehT",text:"_3SReC"}},39815:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"_1-D-8",hover:"_3kRTS",current:"jf2u-",active:"_1nsAh",focusAnimation:"_2qa4_",focusAnimationKeyframes:"_1ELYG"}},43429:(e,t,a)=>{"use strict";a.r(t),t.default={"-width-picture-bubble-inner":"330px",widthPictureBubbleInner:"330px","-padding-picture-bubble":"3px",paddingPictureBubble:"3px",bubble:"_2kMYF",vendor:"_1Y3bg",meta:"_2ZluI",hasCaption:"_1EJVi",author:"sbt0O",forwarded:"_2xZSm",forwardedIndicator:"_1eAVR",hasAuthor:"_2XKOX",quote:"a4AKM",thumb:"_2I8rV",caption:"_2smyh",isPSA:"_3tIEf",isPsa:"_3tIEf",thumbVideo:"_2B7z_",thumbImage:"_2vPDe",isGallery:"_2qaex",isInfo:"_3xqh_",ctwaContext:"_1AyjL"}},24510:(e,t,a)=>{"use strict";a.r(t),t.default={notification:"_1grL7",icon:"t5BOS"}},3837:(e,t,a)=>{"use strict";a.r(t),t.default={stickerItem:"_3Q9-P",stickerMenu:"_1Sr3-"}},91276:(e,t,a)=>{"use strict";a.r(t),t.default={outerContainer:"_3JzhZ",innerContainer:"_3ACAI"}},7341:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1wYA-",status:"_3MspY",caption:"_3FDho",linkPreview:"_159zr",expired:"_2po2q",noCaption:"_3njyH",meta:"qsKu5"}},3564:(e,t,a)=>{"use strict";a.r(t),t.default={highRes:"fYhHq",wrapper:"gejrB",large:"_1aKag",lowRes:"_31ufm",medium:"_2wpkI",xlarge:"_3QdNb",animation:"_2jtOK",invisible:"_3h93R",heartbeat:"_1PtOP"}},33545:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_2hOBa",title:"_1QQsz",meta:"_2p3sf",footer:"_1nvOK",actionContainer:"_26i65",action:"Fwry-",icon:"_2Ff6M"}},59354:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3sKkW",clickable:"_3pUPq",caption:"_1Y98A",author:"_2Rot7",meta:"_1PYeE",hasCaption:"jKEDP",actionButton:"_3Kc6o",thumb:"_2zgTa",avatar:"TCm8O",map:"_2Siph",overlay:"_3yELo",expired:"_2ZnxN",thumbBody:"H73KR",quote:"_3QHS3",status:"_3emoq",statusIcon:"_3qB6O",statusText:"_3T-8d",stopLocation:"_3R2V5",viewLocation:"_3GQ8t",hidden:"_1q6I2"}},39002:(e,t,a)=>{"use strict";a.r(t),t.default={hasText:"_3e5Ly",noText:"A-ltU",quote:"_2Hd8x",forwarded:"_1XQWP",hasAuthor:"mr4tO"}},25085:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_12-qh",link:"_1LxjU",title:"_1LNd2",address:"_1DmeC",hasURL:"_1WQjV",hasUrl:"_1WQjV",text:"_3L4wF",author:"_2cXTZ",forwarded:"fBklU",forwardedIndicator:"_3ZbC1",hasAuthor:"QZBm2",meta:"QvIkP",thumb:"YPXVj",thumbBody:"_2E5cJ",quote:"ygNlT",hasCaption:"_1i_Mu",caption:"_1FC6e",ctwaContext:"f05lR",ctwaContainerWidth:"_1-L1I"}},6982:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"l7zgr",hasCaption:"_3yIjn",meta:"_3BpEX",isPSA:"nawsf",isPsa:"nawsf",author:"_2XPsE",forwarded:"_17-wi",forwardedIndicator:"_3csgL",hasAuthor:"_1tMaT",quote:"_2C0XZ"}},48726:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_3e0Yi"}},66676:(e,t,a)=>{"use strict";a.r(t),t.default={context:"_3qSKL",contextIn:"_3dGJA",contextOut:"_39Lm1",contextIcon:"QhSbI",contextSpecial:"_3Pflj",contextInverse:"_73HXo",contextMedia:"_3_UDv",contextMediaLtr:"_36H8K",contextMediaRtl:"_3b-99",contextMediaDocument:"_1OWwa",contextIconMedia:"_3Y9uf",contextDoc:"jOXGr",contextPtt:"Xnxsp",contextPttFix:"_3R5rJ",contextMultiVcard:"ie5Hj",contextStickerAuthor:"_1Y0H0",contextStickerTransparent:"_3mmP7",badge:"_1c5In",contextStickerInverse:"_1h2Dg"}},55168:(e,t,a)=>{"use strict";a.r(t),t.default={author:"_2l6Ej",hasForwarded:"_3lFXV",caption:"_320oW",forwardedIndicator:"_2gW-v",hasAuthor:"dyoEH",meta:"I3xuS",hasCaption:"_2WDNO",quote:"_3dmX1"}},3456:(e,t,a)=>{"use strict";a.r(t),t.default={text:"_3ExzF",template:"_1wF3I",placeholder:"_1ePMJ",spacer:"_1Bd9o",icons1:"_2ScdV",icons2:"_3thlD",icons3:"_3PSrh",icons4:"_3ro77"}},77602:(e,t,a)=>{"use strict";a.r(t),t.default={meta:"UFTvj",chromeFix:"_89eWV",metaLight:"nszPL",timestamp:"_17Osw",icon:"_2IyWz",status:"_2nWgr",labels:"OXRx_"}},96515:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2Qg8V",isChecked:"_3GtSJ",gallery:"_27vJa"}},8408:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1vepZ",icon:"BLU6C",text:"_1we7F",containerSmallIcon:"_3dT2h"}},60240:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_9leQM"}},21206:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_18kCM",isGallery:"_3sp6l",isPreview:"_304y-",quote:"_24ZN-",hasAuthor:"_178Vm",vcard:"_1dJ-b",author:"_2m6tY",hasQuote:"_2E8CQ",body:"_1tv-I",avatar:"_2YORQ",meta:"_2cI32",name:"JpOli",image:"_2UNii"}},78419:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_3RxeN",bizInfo:"_3J_bY",iconE2E:"_2tZna",iconSupportGroup:"_1H1wC",iconMiss:"_3S8Aw"}},85152:(e,t,a)=>{"use strict";a.r(t),t.default={orderPreview:"_3Yk7i",meta:"_1Hz6A",messageText:"_3v99V"}},85673:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2UYfD",text:"_7Qr5E"}},74569:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_18zOU",thumb:"_3cG5B",amount:"_3BDFt",amountCurrency:"_3s9ee",amountInteger:"_1O30q",amountDecimal:"_1A-xX",isQuoted:"_12zgV",isQuotedInComposeBox:"_3s--w"}},77509:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_3pWxf",success:"ECFcz",failed:"_1G2Xo",pending:"_3x171",iconSymbol:"_2eqxN",compact:"_2k85i"}},64270:(e,t,a)=>{"use strict";a.r(t),t.default={body:"U1Ljm",bubbleIn:"_3SImt",bubbleOut:"_2uZBn",bodyIcon:"ab4lU",bodyIconMultiline:"Yt7uf",bodyText:"_2tYZr"}},37270:(e,t,a)=>{"use strict";a.r(t),t.default={status:"_1OU_N",failed:"_8ztqd",pending:"_19LNy",success:"_2NUej"}},76884:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_7pLro",isQuoted:"_2sOqR",name:"_3Y_LK"}},56892:(e,t,a)=>{"use strict";a.r(t),t.default={hasText:"_2r9Nu",noText:"_3QzbI",quote:"_2xxtd",forwarded:"o4Lv2",hasAuthor:"_kOmZ"}},10667:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_2Ro1i",portrait:"_1s1cU",isPreview:"_1MU5C",author:"_3Uvwo",forwarded:"_2SRHP",forwardedIndicator:"lVh2G",hasAuthor:"i2mgx",meta:"_28Ddf",hasCaption:"WrZZn",caption:"_3_qeO",isPSA:"_2Uii8",isPsa:"_2Uii8",quote:"UTVGx",thumb:"_2MfUK",isAlbum:"_3RDut",thumbBody:"_1-59F",thumbBodyLores:"_3Oxpo",isGallery:"_2YBLj",overlay:"_2IRpb",overlayAlbumText:"_2X_ix",ctwaContext:"vEuFm"}},94842:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"_18LV9",badge:"_2Bciv"}},92512:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"RvNLp",productInfo:"_9UqEG",author:"_1QGD8",title:"_1EV80",subtitle:"_34AgG",thumb:"_21mq3",productContainer:"tz2dS",bubbleIn:"_2Iesw",bubbleOut:"g1JaU",productCta:"_2kJWh"}},93579:(e,t,a)=>{"use strict";a.r(t),t.default={image:"zuR_e",default:"_3qrn5",icon:"e_EUX",container:"_2Tj59",hasBorder:"_3h5jH",dimmed:"_2phop",hasInnerBorder:"_2U5Rb",hasLargeInnerBorder:"_yEfI",square:"_18V0W",col:"_1rQ9c",row:"_1FtWZ"}},12626:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_31cTF",incoming:"_1Ah3d",outgoing:"_1Kn3J",blue:"_3at-l",gray:"_1-95w",green:"_1osRV",wrapper:"_27-_U"}},8584:(e,t,a)=>{"use strict";a.r(t),t.default={imageWrapper:"r-S76",msgImage:"_16BuV",composeBox:"_2Apkh",statusV3:"_3xGd9",isPayment:"_1Yrvm",image:"_2wzt8"}},40675:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2w_1z",quotedMsg:"_3Ppzm",statusV3QuotedMsg:"_2I7QC",composeBoxQuotedMsg:"_3OUXw",hover:"_2nrNO",colorBar:"_3eu_9",msgBody:"_2mGGI",msgText:"_3Xmdf"}},77837:(e,t,a)=>{"use strict";a.r(t),t.default={messageText:"_31DtU",composeBoxQuotedMsg:"_1WWEK"}},28670:(e,t,a)=>{"use strict";a.r(t),t.default={hover:"_1kGvv",quotedMsg:"yzlU_",msg:"_FMsy",colorBar:"_3Fjb_",msgBody:"_2C8rl",composeBoxQuotedMsg:"isU9W"}},87472:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"q1nW8"}},65857:(e,t,a)=>{"use strict";a.r(t),t.default={caption:"Q7F9l",meta:"_3tGmI"}},5593:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_20WAH",track:"_3hTRQ",containerIncomingPlayed:"_194ns",containerIncomingUnplayed:"_3diCI",containerOutgoingPlayed:"_3TtsT",containerOutgoingUnplayed:"_3nruq",thumbTravelContainer:"_14KWR",thumbContainer:"_2Sbsq",thumb:"_1Mizi",containerDisabled:"_2sj7z",progress:"_4aYDG"}},51549:(e,t,a)=>{"use strict";a.r(t),t.default={title:"Oc_IQ",titleMain:"_1gbaa",meta:"_10ebg",chat:"_1ba5G",divider:"_39CDt",chevron:"_9KpMb",avatar:"_2nys0",author:"_3wG7U"}},59495:(e,t,a)=>{"use strict";a.r(t),t.default={light:"wDGIu",ackBlue:"_1RD_6"}},64061:(e,t,a)=>{"use strict";a.r(t),t.default={hasAuthor:"TC9NX",quote:"_2ZZ7M",bubble:"_3rlNI",meta:"_3ogTW",isTransparent:"_2DGdv",body:"_3wSPP",author:"_2JMjO",isFirst:"_2Q_wE",ctwaContext:"DXk6a"}},96410:(e,t,a)=>{"use strict";a.r(t),t.default={cursorAuto:"_18P7y"}},33492:(e,t,a)=>{"use strict";a.r(t),t.default={sticky:"_2CpTm"}},60769:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1eyRp",isLinkMsg:"_1U67t",icon:"FFC3m",text:"_1lacC",ctwaContainer:"kncAq"}},4353:(e,t,a)=>{"use strict";a.r(t),t.default={actionButton:"_2aTjy",actionText:"_232Vs",disabled:"_13WJZ",buttonContainer:"_7muqI",firstButton:"_1h0qF",quickReply:"qttER",callUrl:"_JAbc",icon:"_1PvZd"}},52283:(e,t,a)=>{"use strict";a.r(t),t.default={footer:"_1jUmV",isMedia:"_9FgZd",dirMismatch:"D2nLo"}},25528:(e,t,a)=>{"use strict";a.r(t),t.default={quote:"_3lWN8",forwarded:"JtB6T",hasAuthor:"xkqQM",hasSuspiciousLinks:"zPIFY",linkPreview:"_2dayw",meta:"_1BACO",title:"_2oao5"}},87413:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_1bR5a",meta:"_2zWo9",isPSA:"UcO-V",isPsa:"UcO-V"}},45167:(e,t,a)=>{"use strict";a.r(t),t.default={shade:"_2iL1d"}},33040:(e,t,a)=>{"use strict";a.r(t),t.default={msgUnread:"_2WwJ0",msgUnreadBody:"_1sPn5"}},62714:(e,t,a)=>{"use strict";a.r(t),t.default={action:"_3gdWY"}},90660:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_24mt0",isGallery:"_3-g6A",isPreview:"_15PlA",quote:"_1TKQD",hasAuthor:"_3IAJp",vcard:"_1I1xx",author:"_2sfxu",hasQuote:"DtWWq",body:"_3Dqzq",avatar:"Z3pNs",meta:"_1foJt",name:"_2Zme9",ctwaContext:"IWK3Z",placeholder:"_2W_8P",placeholderAnimation:"jGZJF","gradient-ltr":"_1mIq4",gradientLtr:"_1mIq4","gradient-rtl":"_2jlqo",gradientRtl:"_2jlqo",placeholderImage:"_1d1FY",placeholderText:"_2Vvie",vcardDownloadStageIcon:"_26NSr",icon:"_1k6oU"}},8106:(e,t,a)=>{"use strict";a.r(t),t.default={bubble:"_16D7a",portrait:"_1aHvR",nonAlbumBubble:"kd7WL",author:"_2q2Hm",forwarded:"_1RiM-",forwardedIndicator:"_22kJC",hasAuthor:"XPG6Z",meta:"_1tn-N",hasCaption:"_3U0fg",caption:"_1dyNM",isPSA:"_18wjx",isPsa:"_18wjx",quote:"_6OUHB",thumb:"hS6U_",inAlbum:"_3Xl4P",cursorPointer:"_2W4vP",thumbBody:"_17Nt7",thumbBodyLowQuality:"_53w2c",duration:"_2yOzJ",icon:"_1vPFm",pipBtn:"GqrIo",isHover:"_2uqQl",overlay:"_3TR7B",overlayAlbumText:"_10t7B",ctwaContext:"_1aepL",ctwaContainerWidth:"_39IRG",ctwaThumbWidth:"_3_zbw"}},10252:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_17oaQ",bubbleIn:"_7Bw2S",bubbleOut:"bT1qf",title:"_2wWFt",description:"_1Zw9c",source:"_39eDa",body:"_13H0g",noThumb:"_1NJe5",thumbnailWrapper:"_2FGsy",thumbnail:"_38D8S",thumbnailPlaceholder:"_3EDgE",youtubeThumbnail:"_3L8ed",mediaStateControlsWrapper:"_6X3mJ",attribution:"_1acg5"}},47566:(e,t,a)=>{"use strict";a.r(t),t.default={unviewedBubble:"_3WTa-",buttonContainer:"_3KP-K",deepContainerContent:"_1wl63",statusIcon:"_3yLP5",statusDone:"_12xKD",accentIcon:"_2-4F7",nonSpinnerIcon:"_1CV5k",content:"_3sqWV",contentMeta:"_2iAx1",labelActive:"_2qRup",labelInactive:"_3YCWe",labelRetry:"_1aoFJ",quote:"_2MfdI"}},79577:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2uIfQ",icon:"_2IbVI",spinner:"_1LUdJ"}},50103:(e,t,a)=>{"use strict";a.r(t),t.default={msg:"GDTQm",msgContinuation:"_2iwLX",msgSystem:"_397qe",sticky:"kVGCQ",message:"_24wtQ",hasTail:"_1-U5A",messageBackground:"_3XpKm",tail:"_1bUzr",tailHighlight:"_2jiTt",messageTransparent:"_3nuWB",tailOverrideHide:"_3EGGu",messageSystem:"_2kR4B",messageChat:"_2W7I-",messageCode:"_3R9d9",messageDebugNotification:"_1bVnw",messageE2ENotification:"_1KcEQ",messageBizNotification:"_3nwTJ",messagePlaceholder:"Q42FN",msgGallery:"_12ynY",messageAudio:"_2Ye7z",messageDocument:"Hrc6x",messageList:"Jirhg",messageMultiVcard:"_1wWEY",messageProduct:"_1JXbp",messagePTT:"_1uDmw",messagePtt:"_1uDmw",messageSticker:"_1t6Cb",messageVcard:"i29yA",messageGif:"_3UH4z",messageImage:"gZ4ft",messageLiveLocation:"_37Pvz",messageLocation:"_2KgTl",messageVideo:"_117Hx",msgInfo:"_22yXp",msgWithQuickAction:"_1B_Jc",messageHidden:"_15gfz",msgContainer:"_3WxGg",quickActionButton:"_3nHC-",msgPSA:"_1QmyI",msgPsa:"_1QmyI",messageVideoLinkPreview:"_3Lst1",placeholder:"_1yEtm",gridContainer:"_11G8i",author:"_2nE7S",forwarded:"_7tMmP",albumBubbleContainer:"_3ua1j",forwardedIndicator:"VqWI8",hasAuthor:"_3pUNA",authorForward:"okgTJ",groupStickerContainer:"_36H1f",singleGroupedStickerContainer:"_234QI",groupStickerAuthor:"_3veZM",transparent:"_3ci8c",hasBorderBox:"_20zqk",hasUrlCallButtons:"_2sBT6",stickerWrapperContainer:"_1KEs5",highlightAnimation:"bd-rx",highlightAnimationDarkIn:"yy12x",highlightAnimationDark:"vEKIQ"}},79575:(e,t,a)=>{"use strict";a.r(t),t.default={messageList:"_11liR",messageListSelectable:"_1fxaZ"}},48294:(e,t,a)=>{"use strict";a.r(t),t.default={preview:"_3O6xD",media:"_1ZYuS",bubbleIn:"_1-cOJ",bubbleOut:"_1xuCY",title:"_1ofix",description:"_1eJr5",body:"LkGlX",descriptionIcon:"_2AFDF",titleIcon:"mC8-b",quoted:"_1fOuo"}},86753:(e,t,a)=>{"use strict";a.r(t),t.default={recording:"_13Es4",btnBorder:"_1LPa8",btnSend:"_19f0J",btnCancel:"_3DaI4",isHover:"_1eZnK",btnStateDefault:"_1Rk4d",btnStateHover:"_3lX0Z",pttCounter:"_1U3X8","ptt-indicator":"_2Qeik",pttIndicator:"_2Qeik",btnBorderIcon:"_3Zxr_",btnPtt:"dNn0f",container:"_2qMTj",active:"_31l5v"}},53175:(e,t,a)=>{"use strict";a.r(t),t.default={spam:"_2MVf7",text:"_222Ot",controls:"_3p_sC",button:"_2FWnU"}},84974:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3CMaP",image:"_1-cXq",body:"P5ccE",badge:"_24uyS",name:"_1ah5I",address:"OxJwu",description:"Rwz6q"}},59600:(e,t,a)=>{"use strict";a.r(t),t.default={vcard:"_1djmb",controls:"p_rhW"}},60127:(e,t,a)=>{"use strict";a.r(t),t.default={spinner:"t-1Gm"}},95972:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1t1U-"}},50023:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2fJ1x",containerFull:"u5BWJ",icon:"_1pATD",containerCircleIconFull:"_2yBck",name:"_34fhS",labelFilter:"_2aKGK",iconContainer:"_3uthS",drawerTitle:"_3zoJf",circleIcon:"_24QRF"}},7034:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3ORvc",circle:"_39CjK",text:"_3fmQc"}},67211:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3Z6cE"}},78837:(e,t,a)=>{"use strict";a.r(t),t.default={closeButton:"B_xm0"}},69991:(e,t,a)=>{"use strict";a.r(t),t.default={controlsSummary:"_1NLzp",container:"_2CU0o",btnActive:"FE1P8"}},32593:(e,t,a)=>{"use strict";a.r(t),t.default={app:"_3QfZd","app-enter":"dA9DG",appEnter:"dA9DG",noAnimation:"_39_0H",drawerManager:"Akuo4",pane:"_1Flk2",paneTwo:"_1sFTb",paneThree:"_3xysY",paneOne:"_2DPZK",chatlistHeader:"_1pQBW"}},94470:(e,t,a)=>{"use strict";a.r(t),t.default={"-color-bg-light":"#f7f7f7",colorBgLight:"#f7f7f7",panelBody:"_2OcmB",searchSpinner:"_2BFrM",panelSearch:"_22H_a"}},22788:(e,t,a)=>{"use strict";a.r(t),t.default={checkboxSelectableWrapper:"_1VR-Y",checkboxSelectableControl:"_2StzW"}},72503:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_1ekOy",control:"JVX6a",label:"_2Y6N1",border:"Euz4z",note:"_1bqfF"}},20673:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_1z6wq",control:"w7yUt",label:"hCCIs",buttons:"_1GDSS",button:"_3QMTy"}},79430:(e,t,a)=>{"use strict";a.r(t),t.default={drawer:"OMoBQ",white:"_2uJIN",drawerGallery:"_1dTlu",drawerCapture:"GCokO",drawerEdit:"_3WNg8",drawerMedia:"_2cjxz",drawerCatalog:"_32u5Q",striped:"_2W4mF",belowHeader:"_1nC9E"}},12351:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_36Jt6",noscroll:"tEF8N",centerItem:"_3Vmu0",padding:"_2SK3b",centerColumn:"EqE1M"}},5315:(e,t,a)=>{"use strict";a.r(t),t.default={drawerHeader:"_2heqZ",drawerTitle:"_2fGIm",drawerTitleBody:"_1XrsE",side:"_2WvUi",drawerTitleAction:"_215wZ",multiMediaGallery:"_3y4PG",drawerHeaderSmall:"_2oUye",drawerHeaderOffset:"VMhw8",drawerHeaderPopup:"_3JMNf",btnCloseDrawer:"_27F2N",paneListControls:"_6lLuA",labels:"_18BPD"}},39886:(e,t,a)=>{"use strict";a.r(t),t.default={item:"GZMMq",itemBody:"_34gEE",row:"GG5FQ",main:"_2TFlm",side:"_2nP3d",primary:"grnZt",secondary:"_3cGPJ"}},59753:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2zn9Y"}},33322:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3ZEdX",title:"-ZdaK","padding-large":"bRenh",paddingLarge:"bRenh","padding-small":"_6A7X1",paddingSmall:"_6A7X1",refresh:"zlRcf",padding:"_1yHba","group-desc-padding":"_82zXh",groupDescPadding:"_82zXh","no-padding":"_3tfxz",noPadding:"_3tfxz","padding-product":"_7vRvU",paddingProduct:"_7vRvU","center-column-fixed-width":"_2JR1K",centerColumnFixedWidth:"_2JR1K",animate:"_3hiFt","well-animation2":"_3ILVe",wellAnimation2:"_3ILVe","list-section":"_2siG4",listSection:"_2siG4"}},81850:(e,t,a)=>{"use strict";a.r(t),t.default={option:"_3si6l",label:"_ndFl",input:"lor46",footer:"_2mKWC",footerText:"y8j_w",nuxHeader:"_3LCG3",nuxContent:"i1Abl",nuxText:"_3VZkg",nuxAction:"BeQC8"}},84297:(e,t,a)=>{"use strict";a.r(t),t.default={nuxIllustration:"ezMrn",nuxIcon:"_15sWb",chatIcon:"pdlOn",chatIcon1:"daPcA",chatIcon2:"_70_GW",chatIcon3:"_2W2PV",chatIcon4:"_1pZDQ",chatIcon5:"_2vSQ5",chatIcon6:"_3wLwj",bannerIcon:"_2UK8O"}},57414:(e,t,a)=>{"use strict";a.r(t),t.default={container:"Ev0Nh",metadataContainer:"PP0C7",metadataText:"_1w1_Q",metadataTitle:"ccAXr",metadataDesc:"HKV2n",participantList:"_3v9Is",participantsTitle:"_1FBLO",participantsContainer:"rQ_1l",participantWrapper:"_1vZ9F",emptyContentContainer:"_91dTc",participantsText:"_11O1o",contactsText:"zOe-t",participantText:"_2rYUf"}},23226:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_33LaY",metadataContainer:"R0B7g",metadataText:"_2mj9Q",metadataTitle:"_2kLvp",metadataDesc:"_13lhh",participantList:"_2s-i_",participantsTitle:"_2Irb6",participantsContainer:"q023r",participantWrapper:"_2DVz7",emptyContentContainer:"OFq4w",participantsText:"W5Eu3",contactsText:"_3ri8K",participantText:"_33YaX",inviteExpiration:"_12S8X",inviteExpirationIcon:"_2diCv"}},19914:(e,t,a)=>{"use strict";a.r(t),t.default={description:"QEaO_",containerAllow:"_2NjIw",icon:"__lh3",title:"_2mcf_",controls:"_3yCsK",topCenter:"_3-_kX",topLeft:"_2rqT7",bottomCenter:"_2wvpp"}},5177:(e,t,a)=>{"use strict";a.r(t),t.default={intro:"_2zkCi",body:"g5RCg",title:"Ui--U",text:"_1dJY8",betaTitle:"_1Zduv",betaText:"_27T7E",betaIcon:"_2ZBIv",betaIconText:"fYNRo",image:"G8bNp",textContainer:"WG7wG",mdImageWrapper:"_3fmcK",mdBetaImage:"_28pgc",mdImage:"_33HXz",secondary:"_25fKV",divider:"_1P9Pk",secondaryText:"_2VIc6",secondaryTextBody:"_1xaVK",secondaryIcon:"YFvIG"}},38023:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_28ytR",list:"_1Jylt",section:"_10oK3",action:"_3XpT8",shortcut:"_3bYCS",key:"_1lnx-"}},67762:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerBlurCrop:"_1YLaY",mediaViewerBlurImg:"LnLxo"}},79850:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerImg:"_3WrZo",cursorZoomIn:"_1SkhZ",isDownloadPrevented:"_2aygJ"}},20434:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelHeader:"_1qa3m",mediaPanelTools:"_2JKZr",info:"_1VzXi",voIcon:"DVEE3"}},45864:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerAnimate:"_386bg","media-viewer-animate":"_386bg",cursorZoomOut:"_3WqnR",mediaViewer:"_26Bcu",viewOnce:"KN2uV",mediaContent:"atk6d",btnMediaNext:"fkj95",btnMediaPrev:"_1Xhzp",media:"_1XpQN",mediaWithCaption:"_1U9lZ",mediaCaption:"_1ZtrG",captionHidden:"_33vFG"}},90237:(e,t,a)=>{"use strict";a.r(t),t.default={title:"_2w38b",block:"cKnfu",illustration:"_2f9uY"}},3614:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_2QvWt",vcardWrapper:"_3Ylsn"}},31003:(e,t,a)=>{"use strict";a.r(t),t.default={label:"piKUK",input:"_3sTp-"}},41069:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_1pA4x",control:"_2U8Aq",label:"_25u9k",metaText:"_4NoWX",border:"_1dbQM",mdMetaText:"_2G3Z0"}},57441:(e,t,a)=>{"use strict";a.r(t),t.default={screenshots:"uucJR",action:"_2PWa5",disabled:"_2AF4S",screenshotPreview:"_2BMoJ",screenshotsImg:"_3jJfs",btnDelete:"LxhA9"}},93866:(e,t,a)=>{"use strict";a.r(t),t.default={listPanel:"Y90D8",listBody:"_2dG3C",listSectionSep:"_2evuG",listSectionText:"oJ0Vi",listSectionAction:"_3PKVF",panelHeader:"_13YvY",headerText:"_2ycik",primaryHeaderText:"_29GPi",secondaryHeaderText:"_3vAfZ",headerButtonsPrimary:"_3KV3v",headerButtonsSecondary:"_21jyR"}},41837:(e,t,a)=>{"use strict";a.r(t),t.default={mainWrapper:"_21wDF",v3_x:"_2qNF9",v3X:"_2qNF9",v3_x_mac:"_3w39D",v3XMac:"_3w39D",modalBackground:"_1a3Oi"}},95578:(e,t,a)=>{"use strict";a.r(t),t.default={updateWrapper:"_20E-9",updateTitle:"_1MRvR",uploadButtons:"_3t_jf",buttonContainer:"_1wVk5",buttonIcon:"f2wBs",outStatusPanel:"_2ngWC",outDetail:"_1ko0M",seen:"_3HRUU",timestamp:"Src62",placeholderIcon:"aTSba",placeholderText:"_3vftx",viewWrapper:"_1IlPa",viewTitle:"_2g-DV",viewUpdates:"_39025",iconSeen:"X0WsZ",seenCount:"_2mbB_"}},38157:(e,t,a)=>{"use strict";a.r(t),t.default={chevronLeftBg:"_2INaw",chevronRightBg:"_1817s",chevronLeft:"_3TV4f",chevronRight:"_2TCMC",playerContainer:"_3t_My",mediaStateControls:"Ko2Gg",viewer:"_355RO",v3X:"_3nNtq",v3X_mac:"_1hGgD",v3XMac:"_1hGgD",backIcon:"_1xeCZ",backIcon_mac:"_2_9z_",backIconMac:"_2_9z_"}},41276:(e,t,a)=>{"use strict";a.r(t),t.default={suspiciousHostname:"_3shcp",suspiciousCharacter:"_3Ozps",explanation:"_1vfRc",url:"_2hMVn"}},56268:(e,t,a)=>{"use strict";a.r(t),t.default={headerText:"_2GZMr",bodyText:"_2LD6E",noticeSvgWrapper:"_3uhWB",noticeModalContentWrapper:"_1n2P1",noticeSmbContainer:"_2B7QC",noticeContainer:"_13eJw"}},55420:(e,t,a)=>{"use strict";a.r(t),t.default={content:"_2Gx3Y",icon:"_2XO7i"}},11940:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_33dyw"}},607:(e,t,a)=>{"use strict";a.r(t),t.default={form:"eX3Fi",section:"_330nQ","well-animation2":"_2C4Mt",wellAnimation2:"_2C4Mt",circle:"_1RM9n",spinner:"_2haWH",container:"_2Sq7y",show:"_2ajRu",circleContainer:"_21boY",checkmarkContainer:"_2I3Ra",errorContainer:"_1B4U5",checkmark:"_3hm1W",error:"_1GZX4",errorBanner:"_21NTA",code:"_2MyIW",row:"_2bq88",block:"_3ubka",digit:"_350h-",explanation:"cWezZ",dragAndDropExplanation:"_2BH4A",photo:"_3epbM","drawer-scale":"_3RHNx",drawerScale:"_3RHNx",webcam:"_1YXyB",webcamVideo:"_5Evaw",btnClose:"_3lG7I",overlay:"_1-Ofs"}},92431:(e,t,a)=>{"use strict";a.r(t),t.default={closeBtn:"_2ljm4",fullscreen:"_19CFw"}},39910:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_3wrJu",fullscreen:"MmwG5"}},30404:(e,t,a)=>{"use strict";a.r(t),t.default={button:"_2udG8",fullscreen:"_2hEqA"}},74515:(e,t,a)=>{"use strict";a.r(t),t.default={pipBtn:"_3oZ_A",player:"_3I3T1",preview:"_1C2_w"}},31159:(e,t,a)=>{"use strict";a.r(t),t.default={note:"X0YoC",icon:"_13E65",noteBody:"_3BvP8"}},12229:(e,t,a)=>{"use strict";a.r(t),t.default={fullWidthShade:"_1XIAu",stripHeightShade:"_2MWKo",lowerShade:"_2njxo",upperShade:"nDbhJ",fullHeightShade:"_2mxfO",roundedCorners:"_3SwH5"}},12904:(e,t,a)=>{"use strict";a.r(t),t.default={videoFloater:"_3f6Nh",bgImg:"_3kAe8",bottomLayer:"tAu_b"}},93285:(e,t,a)=>{"use strict";a.r(t),t.default={playerWrapper:"_3-dtC"}},41118:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3C6Us",fullscreen:"_2aDnQ",videoFloaterMedia:"_3eWdk",videoTag:"_29ubQ",mediaStageWrapper:"_19v64",preview:"_18DAr",errorLink:"_1X41z",errorLinkChevron:"_1-9C4"}},58226:(e,t,a)=>{"use strict";a.r(t),t.default={"-thumb-radius-window":"4.5px",thumbRadiusWindow:"4.5px","-thumb-radius-fullscreen":"5px",thumbRadiusFullscreen:"5px",controls:"_1r44f",playpauseBtnContainer:"_3Ax45",fullscreen:"_3L284",currentTime:"_3bT3U",duration:"_2HyXV",timeText:"nh-fs",progressBarContainer:"_2li6N",hiddenProgressBar:"_3ulDS",displayedProgressBar:"_1B31I",displayedProgress:"_2I7Hv",displayedBuffer:"_3I3-p",displayedTrack:"_1fgNx",thumb:"_22fNe",hideThumb:"wK-rh",volumeContainer:"_2ONsu",volumeBarContainer:"_1AGx4",volumeLowerTrack:"_2NoV5",firefoxFix:"ey6xY",lowerTrackLongest:"_2Zrbf",volumeBar:"_3vkC_",volumePadding:"HdejZ",tooltipWrapper:"_2DY39",tooltipTextBoxPosAndSize:"_1Jm8H",tooltipTextBoxGeneral:"OdlyR",tooltipTailGeneral:"_1G3v7",tooltipTailPosAndSize:"_3easU"}},85001:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_2f9yD",fullscreen:"Ezmqi",youtubeContainer:"_1OqLi",blockYoutube:"_1mxPs",videoControlsWrapper:"_2Sh-l",strippedVideoControls:"_2pz4k",opacityTransition:"_1SPcW",widgetsWrapper:"_1xY5P",dimmed:"lk43-"}},43889:(e,t,a)=>{"use strict";a.r(t),t.default={description:"EVy2y",price:"_1UFfr",originalPrice:"_3DObQ",shareButton:"_3En8b",detailContainer:"_12WS6",catalogListItem:"_2Tk1N"}},93317:(e,t,a)=>{"use strict";a.r(t),t.default={thumbsContainer:"_2Al5q",scrollContainer:"_1NFpu",viewerThumbs:"_19Ssm",thumbPadding:"_3rZd0"}},14760:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelHeader:"_3CorU",info:"_17JMe",productNameIcon:"_2D17p",productName:"_3h7S7",mediaPanelTools:"_3zlt4",infoName:"_1jHty"}},44445:(e,t,a)=>{"use strict";a.r(t),t.default={mediaViewerAnimate:"_36n_Q","media-viewer-animate":"_36n_Q",cursorZoomOut:"AXinh",mediaViewer:"-BmSy",mediaContent:"_1Si6A",btnMediaNext:"_1cZF1",btnMediaPrev:"_2acnM",media:"_1Jh5p",mediaWithCaption:"_2C6o9",mediaCaption:"_2F3an",captionHidden:"_16Xdz"}},55080:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"Xh_zm",canvasBody:"lvJ_X",list:"_2iZVY",listWrapper:"_3VH5y",canvasComponent:"_2iWRa",canvasComponentLarge:"_2uCvh",canvasSecondRow:"lW4qb",viewerFlow:"_17VSI",active:"UGN0B",overlay:"h6ff_",placeholder:"_3JWxq",gradient:"_35av2"}},73499:(e,t,a)=>{"use strict";a.r(t),t.default={voipFloater:"_3IZWl"}},50236:(e,t,a)=>{"use strict";a.r(t),t.default={wrapper:"i0da_"}},61266:(e,t,a)=>{"use strict";a.r(t),t.default={body:"_3YdKC",callTitle:"fFBUY",participantName:"_1oV9F",actionRow:"_2w-cI",btnGroup:"_15Y23",btnAccept:"_1e-OZ",btnReject:"_3eGxE",btnEnd:"_2w2od",btnMute:"_2ltYR",webrtcCanvas:"MMbCj",webrtcVideo:"VYfys",webrtcVideoPreview:"_2yw6J",webrtcAudio:"_3voCO"}},66564:(e,t,a)=>{"use strict";a.r(t),t.default={ul:"_30r76",inline:"mYhl2"}},34145:(e,t,a)=>{"use strict";a.r(t),t.default={inline:"_3r0Js"}},66665:(e,t,a)=>{"use strict";function r(){return new Worker(a.p+"webp_to_animation_frames.worker.14e13d6f3324e4bcf864.worker.js")}a.r(t),a.d(t,{default:()=>r})}}]);