/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[1505],{58114:(e,l,a)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.JobBuilder=void 0,l.definePersistedJob=function(){return new r([])};var t=a(47901),n=a(92844);class r{constructor(e){this.steps=e}step(e,l){return this._stepWithOptions(e,"function"==typeof l?{code:l}:l)}_stepWithOptions(e,l){const{stopRetryIf:a,requirements:u,code:o}=l;let d=i(u,o,a);if(a){const{timePassedSeconds:e,appCrashed:l,onStopRetry:r}=a,u=i(null,function(e){return(l,a,n)=>Promise.resolve(e(l,a,n)).then((e=>e instanceof t.InterruptJob?e:new t.InterruptJob(e)))}(r),a);null!=e&&(d=s(((l,a,t)=>{let{jobStartTime:r}=t;return(0,n.happenedWithin)(r,e)}),d,u)),l&&(d=s(((e,l,a)=>{let{afterCrash:t}=a;return!t}),d,u))}return new r([...this.steps,{stepName:e,info:d}])}finalStep(e,l){const a=this.step(e,l);return{end:()=>a.steps}}}function s(e,l,a){return(t,n,r)=>e(t,n,r)?l(t,n,r):a(t,n,r)}function i(e,l,a){const t={requirements:e,code:l,stopRetryIf:a};return()=>t}l.JobBuilder=r},26046:e=>{"use strict";const l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],kind:"Fragment",metadata:null,name:"queryProductListCatalogQuery",selections:s=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"request"}],concreteType:"XWAProductCatalogGetProductListResponseSuccess",kind:"LinkedField",name:"xwa_product_catalog_get_product_list",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogGetProductListResponseSuccessProductList",kind:"LinkedField",name:"product_list",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogGetProductListResponseSuccessProductListProduct",kind:"LinkedField",name:"products",plural:!0,selections:[{kind:"InlineFragment",selections:[t,n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"retailer_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_hidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"currency",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductStatusInfo",kind:"LinkedField",name:"status_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_appeal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductSalePrice",kind:"LinkedField",name:"sale_price",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"start_date",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_date",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogProductMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:"XWAProductCatalogProductMediaImage",kind:"LinkedField",name:"images",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"original_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"request_image_url",storageKey:null}],storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"belongs_to",storageKey:null}],type:"XWAProductCatalogGetResponseSuccessProductCatalogProduct",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"compliance_category",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogGetProductResponseSuccessProductCatalogProductComplianceInfo",kind:"LinkedField",name:"compliance_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"country_code_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"importer_name",storageKey:null},{alias:null,args:null,concreteType:"XWAProductCatalogGetProductResponseSuccessProductCatalogProductComplianceInfoImporterAddress",kind:"LinkedField",name:"importer_address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"city",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null}],storageKey:null}],storageKey:null}],type:"XWAProductCatalogGetProductResponseSuccessProductCatalogProduct",abstractKey:null}],type:"XWAICatalogProduct",abstractKey:"__isXWAICatalogProduct"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"queryProductListCatalogQuery",selections:s},params:{id:"queryProductListCatalogQuery",metadata:{},name:"queryProductListCatalogQuery",operationKind:"query",text:null}};var a,t,n,r,s;l.hash="2022513dc8cc1eb839cc2d3078d946a9",e.exports=l},78972:(e,l,a)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.defineWebPersistedJob=function(){return(0,t.definePersistedJob)()};var t=a(58114)},71505:(e,l,a)=>{"use strict";var t=a(95318);Object.defineProperty(l,"__esModule",{value:!0}),l.QueryProductListCatalog=void 0;var n,r=t(a(48926)),s=t(a(58819)),i=a(31914),u=a(71914),o=a(92574),d=a(48089),c=a(1321),g=a(45454),p=t(a(45095)),y=t(a(57291)),m=a(23216),_=a(24747),P=a(78972),k=a(57701),S=a(90667),f=a(53069),h=a(89295),C=a(39410);const K=new u.WapParser("productListResponse",(e=>{e.assertTag("iq"),e.assertFromServer();const l=e.child("product_list"),a=[];return l.forEachChildWithTag("product",(e=>{const l=e.maybeChild("id");if(!l)return;const t=e.maybeChild("status");(null==t?void 0:t.contentString())===h.INVALID_PRODUCT_TOKEN?a.push({id:l.contentString(),status:h.INVALID_PRODUCT_TOKEN}):a.push((0,S.parseProductNode)(e))})),a})),F=function(){var e=(0,r.default)((function*(e){let{catalogWid:l,productIds:a,width:t,height:n,directConnectionEncryptedInfo:r}=e;const s=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"get",smax_id:"21",xmlns:"w:biz:catalog",id:(0,i.generateId)()},(0,i.wap)("product_list",{jid:(0,C.USER_JID)((0,g.createWid)(l))},a.map((e=>(0,i.wap)("product",null,(0,i.wap)("id",null,e)))).concat((0,y.default)([(0,i.wap)("width",null,t.toString()),(0,i.wap)("height",null,n.toString()),r?(0,i.wap)("direct_connection_encrypted_info",null,r):null])))),u=yield(0,_.sendIq)(s,K);if(u.success)return u.result;throw new o.ServerStatusCodeError(u.errorCode)}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.default)((function*(e){try{var l,t;const{catalogWid:r,productIds:s,width:i,height:u,directConnectionEncryptedInfo:o}=e,d=yield(0,c.fetchQuery)(void 0!==n?n:n=a(26046),{request:{product_list:{jid:r.toString(),products:s.map((e=>({id:e}))),width:String(i),height:String(u),direct_connection_encrypted_info:o}}},{eventLogger:(0,m.createCatalogEventLogger)(m.GRAPHQL_CATALOG_ENDPOINT.GET_PRODUCT_LIST)});return(0,p.default)(null==d||null===(l=d.xwa_product_catalog_get_product_list)||void 0===l||null===(t=l.product_list)||void 0===t?void 0:t.products.map(f.parseProductGraphQL),"data?.xwa_product_catalog_get_product_list?.product_list?.products.map(parseProductGraphQL)")}catch(l){return l instanceof d.GraphQLServerError?(0,s.default)(l,(()=>F(e)),"xwa_product_catalog_get_product_list"):F(e)}}));return function(){return e.apply(this,arguments)}}(),b=(0,P.defineWebPersistedJob)().finalStep("sendStanza",(e=>((0,k.graphQLForCatalogM1Enabled)()?L:F)(e))).end();l.QueryProductListCatalog=b}}]);
//# sourceMappingURL=https://web.whatsapp.com/1505.415b0627813763740540.js.map
