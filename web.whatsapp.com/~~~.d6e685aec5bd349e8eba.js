/*! Copyright (c) 2023 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[2997],{400538:(e,r,t)=>{"use strict";var s=t(307914);Object.defineProperty(r,"__esModule",{value:!0}),r.sendEventRPC=function(){return v.apply(this,arguments)};var n=s(t(311504)),u=t(67201),i=t(906582),a=t(550143),o=t(441700),c=t(96652),l=t(496995);function v(){return(v=(0,n.default)((function*(e,r){const t=(0,o.makeEventRequest)(e),s=yield(0,u.sendSmaxStanza)(t,r),n=(0,a.parseEventResponseSuccess)(s,t);if(n.success)return{name:"EventResponseSuccess",value:n.value};const v=(0,i.parseEventResponseError)(s,t);if(v.success)return{name:"EventResponseError",value:v.value};throw new c.SmaxParsingFailure((0,l.errorMessageRpcParsing)("Event",{Success:n,Error:v}))}))).apply(this,arguments)}},906582:(e,r,t)=>{"use strict";var s=t(307914);Object.defineProperty(r,"__esModule",{value:!0}),r.parseEventResponseError=function(e,r){const t=(0,o.assertTag)(e,"iq");if(!t.success)return t;const s=(0,o.flattenedChildWithTag)(e,"error");if(!s.success)return s;const c=(0,a.parseIQErrorResponseMixin)(e,r);if(!c.success)return c;const l=(0,i.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup)(s.value);if(!l.success)return l;return(0,u.makeResult)((0,n.default)((0,n.default)({},c.value),{},{errorIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup:l.value}))};var n=s(t(73982)),u=t(135781),i=t(453107),a=t(646800),o=t(593695)},550143:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseEventResponseSuccess=function(e,r){const t=(0,n.assertTag)(e,"iq");if(!t.success)return t;const u=(0,s.parseIQResultResponseMixin)(e,r);if(!u.success)return u;return u};var s=t(657936),n=t(593695)},331775:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIQErrorInternalServerErrorMixin=function(e){const r=(0,n.assertTag)(e,"error");if(!r.success)return r;const t=(0,n.literal)(n.attrString,e,"text","internal-server-error");if(!t.success)return t;const u=(0,n.literal)(n.attrInt,e,"code",500);if(!u.success)return u;return(0,s.makeResult)({text:t.value,code:u.value})};var s=t(135781),n=t(593695)},453107:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIQErrorInternalServerErrorOrRequestTimeoutOrServiceUnavailableMixinGroup=function(e){const r=(0,n.parseIQErrorInternalServerErrorMixin)(e);if(r.success)return(0,s.makeResult)({name:"IQErrorInternalServerError",value:r.value});const t=(0,u.parseIQErrorRequestTimeoutMixin)(e);if(t.success)return(0,s.makeResult)({name:"IQErrorRequestTimeout",value:t.value});const o=(0,i.parseIQErrorServiceUnavailableMixin)(e);if(o.success)return(0,s.makeResult)({name:"IQErrorServiceUnavailable",value:o.value});return(0,a.errorMixinDisjunction)(e,["IQErrorInternalServerError","IQErrorRequestTimeout","IQErrorServiceUnavailable"],[r,t,o])};var s=t(135781),n=t(331775),u=t(402419),i=t(947772),a=t(593695)},402419:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIQErrorRequestTimeoutMixin=function(e){const r=(0,n.assertTag)(e,"error");if(!r.success)return r;const t=(0,n.literal)(n.attrString,e,"text","request-timeout");if(!t.success)return t;const u=(0,n.literal)(n.attrInt,e,"code",408);if(!u.success)return u;return(0,s.makeResult)({text:t.value,code:u.value})};var s=t(135781),n=t(593695)},646800:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIQErrorResponseMixin=function(e,r){const t=(0,u.assertTag)(e,"iq");if(!t.success)return t;const i=(0,n.attrStringFromReference)(r,["id"]);if(!i.success)return i;const a=(0,u.literal)(u.attrString,e,"id",i.value);if(!a.success)return a;const o=(0,n.attrStringFromReference)(r,["to"]);if(!o.success)return o;const c=(0,u.literal)(u.attrString,e,"from",o.value);if(!c.success)return c;const l=(0,u.literal)(u.attrString,e,"type","error");if(!l.success)return l;return(0,s.makeResult)({type:l.value})};var s=t(135781),n=t(638167),u=t(593695)},947772:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIQErrorServiceUnavailableMixin=function(e){const r=(0,n.assertTag)(e,"error");if(!r.success)return r;const t=(0,n.literal)(n.attrString,e,"text","service-unavailable");if(!t.success)return t;const u=(0,n.literal)(n.attrInt,e,"code",503);if(!u.success)return u;return(0,s.makeResult)({text:t.value,code:u.value})};var s=t(135781),n=t(593695)},657936:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIQResultResponseMixin=function(e,r){const t=(0,u.assertTag)(e,"iq");if(!t.success)return t;const i=(0,n.attrStringFromReference)(r,["id"]);if(!i.success)return i;const a=(0,u.literal)(u.attrString,e,"id",i.value);if(!a.success)return a;const o=(0,n.attrStringFromReference)(r,["to"]);if(!o.success)return o;const c=(0,u.literal)(u.attrString,e,"from",o.value);if(!c.success)return c;const l=(0,u.literal)(u.attrString,e,"type","result");if(!l.success)return l;return(0,s.makeResult)({type:l.value})};var s=t(135781),n=t(638167),u=t(593695)},969829:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeBaseIQSetRequestMixin=function(e){const r=(0,s.smax)("iq",{id:(0,u.generateId)(),type:"set"});return(0,n.mergeStanzas)(e,r)};var s=t(898165),n=t(519603),u=t(504784)},441700:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeEventRequest=function(e){const{eventPromotionId:r,eventType:t,eventTimestampSec:i,eventLogdata:a}=e;return(0,n.mergeBaseIQSetRequestMixin)((0,s.smax)("iq",{xmlns:"w:comms",to:u.S_WHATSAPP_NET},(0,s.smax)("event",{promotion_id:(0,u.CUSTOM_STRING)(r),type:(0,u.CUSTOM_STRING)(t),timestamp_sec:(0,u.INT)(i),logdata:(0,u.CUSTOM_STRING)(a)})))};var s=t(898165),n=t(969829),u=t(504784)},273925:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JobBuilder=void 0,r.definePersistedJob=function(){return new u([])};var s=t(811158),n=t(632157);class u{constructor(e){this.steps=e}step(e,r){return this._stepWithOptions(e,"function"==typeof r?{code:r}:r)}_stepWithOptions(e,r){const{stopRetryIf:t,requirements:o,code:c}=r;let l=a(o,c,t);if(t){const{timePassedSeconds:e,appCrashed:r,onStopRetry:u}=t,o=a(null,function(e){return(r,t,n)=>Promise.resolve(e(r,t,n)).then((e=>e instanceof s.InterruptJob?e:new s.InterruptJob(e)))}(u),t);null!=e&&(l=i(((r,t,s)=>{let{jobStartTime:u}=s;return(0,n.happenedWithin)(u,e)}),l,o)),r&&(l=i(((e,r,t)=>{let{afterCrash:s}=t;return!s}),l,o))}return new u([...this.steps,{stepName:e,info:l}])}finalStep(e,r){const t=this.step(e,r);return{end:()=>t.steps}}}function i(e,r,t){return(s,n,u)=>e(s,n,u)?r(s,n,u):t(s,n,u)}function a(e,r,t){const s={requirements:e,code:r,stopRetryIf:t};return()=>s}r.JobBuilder=u},193182:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defineWebPersistedJob=function(){return(0,s.definePersistedJob)()};var s=t(273925)}}]);
//# sourceMappingURL=https://web.whatsapp.com/~~~.d6e685aec5bd349e8eba.js.map
