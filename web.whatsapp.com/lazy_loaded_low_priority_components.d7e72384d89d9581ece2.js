/*! Copyright (c) 2022 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[]).push([[275],{74220:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.cartItemCollection.reset(),e.set("message",void 0),e.trigger("change:cartItemCollection"),(0,i.default)(e)};var i=n(a(38260))},72921:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=i.CartCollection.findCart(e);return a.cartItemCollection.remove(t),a.trigger("change:cartItemCollection"),(0,r.default)(a),a.itemCount};var i=a(12392),r=n(a(38260))},79495:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createProductFromRefreshCartItem=_,t.isPriceMatch=C,t.matchCartItemsToProducts=function(e,t){const a=s.CatalogCollection.get((0,m.createWid)(e.id)),n=[],i=[];let u=!0;a&&e.cartItemCollection.forEach((r=>{const s=a.productCollection.get(r.id);let l=t&&t.products.find((e=>e.id===r.id));if(l=function(e,t){if(e&&"deleted"===e.status)return void t.productCollection.remove(e.id);return e}(l,a),!t&&s){const e=function(e,t){const a=function(e,t){return e.priceAmount1000===(0,h.getActivePrice)(t)&&e.currency===t.currency&&e.name===t.name&&e.imageHash===t.imageHash}(e,t);a||e.set({priceAmount1000:(0,h.getActivePrice)(t),currency:t.currency,name:t.name,imageHash:t.imageHash},{silent:!0});return a}(r,s);u=u&&e,n.push({product:s,cartItem:r})}else if(l){const t=function(e,t){const a=!t||function(e,t){var a,n;const i=(0,h.getActivePrice)(v(t));return C(e.priceAmount1000,i)&&(!(0,p.isString)(e.currency)&&!(0,p.isString)(t.currency)||e.currency===t.currency)&&e.name===t.name&&e.imageHash===(null===(a=t.media)||void 0===a||null===(n=a.image)||void 0===n?void 0:n.id)}(e,t);if(!a&&t){const a=v(t);e.set({priceAmount1000:(0,h.getActivePrice)(a),currency:a.currency,name:a.name,imageHash:a.imageHash},{silent:!0})}return a}(r,l);u=u&&t,n.push({product:_(l,e.id),cartItem:r})}else u=!1,i.push(r.id)})),a||(0,l.default)(e);u||(i.length&&e.cartItemCollection.remove(i),e.trigger("change:cartItemCollection"),o.Cmd.openModal((0,g.jsx)(d.default,{onOK:()=>{o.Cmd.closeModal()},children:r.default._("One or more items in your cart have been updated",null,{hk:"1jr9xE"})})));return(0,f.default)(e),n},t.parsePrice=x;var i=n(a(81109)),r=n(a(48360)),s=a(99989),l=n(a(74220)),o=a(88102),d=n(a(52665)),u=a(9468),c=a(21374),h=a(13151),f=n(a(38260)),p=a(31515),m=a(58021),g=a(85893);function v(e){var t,a,n,i,r,s,l,o;return{id:e.id,name:null!==(t=e.name)&&void 0!==t?t:"",imageCdnUrl:null===(a=e.media)||void 0===a||null===(n=a.image)||void 0===n?void 0:n.request_image_url,imageHash:null===(i=e.media)||void 0===i||null===(r=i.image)||void 0===r?void 0:r.id,currency:e.currency,priceAmount1000:x(e.price),salePriceAmount1000:x(null===(s=e.sale_price)||void 0===s?void 0:s.price),salePriceStartDate:(0,c.parseDateValue)(null===(l=e.sale_price)||void 0===l?void 0:l.start_date),salePriceEndDate:(0,c.parseDateValue)(null===(o=e.sale_price)||void 0===o?void 0:o.end_date)}}function x(e){return"string"==typeof e?e.length>0?parseInt(e,10):null:e}function C(e,t){const a=x(e),n=x(t);return(0,p.isNumber)(a)&&(0,p.isNumber)(n)?a===n:!(0,p.isNumber)(a)&&!(0,p.isNumber)(n)}function _(e,t){return new u.Product((0,i.default)((0,i.default)({},v(e)),{},{catalogWid:(0,m.createWid)(t),productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1}))}},9186:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(0===e.cartItemCollection.length)return Promise.resolve({products:[],price:{}});const a=e.cartItemCollection.map((e=>e.id));return(0,n.refreshCart)((0,r.createWid)(e.id),a,i.CartCollection.imageWidth,i.CartCollection.imageHeight,t)};var n=a(6878),i=a(12392),r=a(58021)},53109:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)};var i=n(a(48926)),r=a(99989),s=n(a(34949)),l=a(9538),o=n(a(76533)),d=n(a(38260)),u=a(58021);function c(e){var t,a;const n=e.cartItemCollection.at(0);if(null==n)return"";const i=r.CatalogCollection.get((0,u.createWid)(e.id)),l=null==i?void 0:i.productCollection.get(n.id),o=null==l||null===(t=l.getProductImageCollectionHead())||void 0===t?void 0:t.mediaData;return null==o?"":o.preview instanceof s.default&&null!==(a=o.preview.getBase64())&&void 0!==a?a:""}function h(){return(h=(0,i.default)((function*(e,t){const a=yield(0,l.createOrder)(t.id,e.cartItemCollection.toArray());return yield(0,o.default)(t,a,e.itemCount,c(e),e.message),(0,d.default)(e),a.id}))).apply(this,arguments)}},51383:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.set("message",t),(0,i.default)(e)};var i=n(a(38260))},85566:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){const n=i.CartCollection.findCart(e),s=n.cartItemCollection.get(t.id);null==s||s.set("quantity",a),n.trigger("change:cartItemCollection"),(0,r.default)(n)};var i=a(12392),r=n(a(38260))},48456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("function"==typeof BigInt?BigInt:Number)(String(Date.now())+Math.random().toFixed(4).slice(-4)).toString(36).toUpperCase()}},73150:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.appendPrefilledMsg=k,t.sendOrderDetailsMessageAsMerchant=function(){return w.apply(this,arguments)},t.sendOrderStatusMessageAsMerchant=function(){return P.apply(this,arguments)};var r=i(a(81109)),s=i(a(48926)),l=a(99989),o=a(22683),d=i(a(69618)),u=a(99234),c=i(a(48456)),h=i(a(84064)),f=i(a(43725)),p=i(a(32219)),m=i(a(5165)),g=i(a(34949)),v=n(a(69340)),x=a(88998),C=n(a(72089)),_=a(15860),S=a(75887),y=a(13705),j=i(a(39546)),E=a(58021);function T(e,t){var a,n;if(null==t)return"";const i=l.CatalogCollection.get((0,E.createWid)(e)),r=null==i?void 0:i.productCollection.get(t),s=null==r||null===(a=r.getProductImageCollectionHead())||void 0===a?void 0:a.mediaData.preview;return s instanceof g.default&&null!==(n=s.getBase64())&&void 0!==n?n:""}function I(){return b.apply(this,arguments)}function b(){return(b=(0,s.default)((function*(e){const{caption:t,chat:a,nativeFlowName:n,buttonParamsJson:i,errorMessage:s,thumbnail:l,buttonName:c,contextInfo:f}=e,m=(0,u.getMaybeMeUser)(),g=l?{title:void 0,subtitle:void 0,mediaType:void 0,hasMediaAttachment:!1,thumbnail:l}:void 0,v=(0,r.default)({type:d.default.MSG_TYPE.INTERACTIVE,ack:d.default.ACK.CLOCK,from:m,id:new p.default({from:m,to:a.id,id:(0,_.newTag)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:o.Clock.globalUnixTime(),to:a.id,caption:t,nativeFlowName:n,interactiveHeader:g,interactiveType:h.default.NATIVE_FLOW,interactivePayload:{buttons:[{name:c,buttonParamsJson:i}],messageVersion:1}},f);if(j.default.equals(a.id,m))try{return void(yield(0,S.addAndSendMsgToChat)(a,v)[0])}catch(e){throw __LOG__(3)`${s}: ${e}`,e}try{const e=yield(0,S.addAndSendMsgToChat)(a,v)[1];if(!e||e!==y.SendMsgResult.OK)throw new Error("Order message SendMsgResult failure status")}catch(e){throw __LOG__(3)`${s}: ${e}`,e}}))).apply(this,arguments)}function w(){return(w=(0,s.default)((function*(e){var t;const{order:a,chat:n,orderNote:i,discount:r,shipping:s,tax:l,total:o,offset:d}=e,u=null===(t=a.orderItemCollection.head())||void 0===t?void 0:t.id,h=T(a.sellerJid,u),f=a.orderItemCollection.map((e=>({retailer_id:e.id,name:e.name,amount:{value:e.price,offset:d},quantity:e.quantity}))),p={reference_id:(0,c.default)(),type:"physical-goods",payment_configuration:"merchant_categorization_code",currency:a.currency,total_amount:{value:o,offset:d},order:{status:x.OrderStatus.Pending,items:f,subtotal:{value:Number(a.subtotal),offset:d},tax:null==l?void 0:{value:l,offset:d},shipping:null==s?void 0:{value:s,offset:d},discount:null==r?void 0:{value:r,offset:d}}};yield I({caption:i,chat:n,nativeFlowName:m.default.ORDER_DETAILS,buttonParamsJson:v.stringify(p),errorMessage:"Order message send to chat failure",thumbnail:h,buttonName:"review_and_pay"})}))).apply(this,arguments)}function k(e,t){let a="";switch(t){case x.OrderStatus.Pending:a=f.default.t(1015);break;case x.OrderStatus.Processing:a=f.default.t(1016);break;case x.OrderStatus.Shipped:a=f.default.t(1017);break;case x.OrderStatus.Complete:a=f.default.t(1014);break;case x.OrderStatus.Canceled:a=f.default.t(1013)}return(e||"").trim()?a+"\n"+(e||""):a}function P(){return(P=(0,s.default)((function*(e){const{chat:t,sellerJid:a,orderInfo:n,orderNote:i,orderStatus:r}=e,s=n.items,l=n.referenceId,o=T(a,s[0].id),d=(0,x.findOrderDetailsMessage)(t,l),u=null==d?void 0:d.msgContextInfo(t.id);yield I({caption:k(i,r),chat:t,nativeFlowName:m.default.ORDER_STATUS,buttonParamsJson:C.stringify({reference_id:l,order:{status:r}}),errorMessage:"Order message sent to chat failure",thumbnail:o,buttonName:"review_order",contextInfo:u})}))).apply(this,arguments)}},76533:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var i=n(a(48926)),r=a(22683),s=n(a(69618)),l=a(99234),o=n(a(32219)),d=a(15860),u=a(75887),c=a(13705),h=n(a(39546));function f(){return(f=(0,i.default)((function*(e,t,a,n,i){const r=(0,l.getMaybeMeUser)(),s=p(e,t,a,n,i);if(h.default.equals(e.id,r))return(0,u.addAndSendMsgToChat)(e,s)[0].then((()=>{})).catch((e=>{throw __LOG__(3)`Order message send to chat failure: ${e}`,e}));try{const t=yield(0,u.addAndSendMsgToChat)(e,s)[1];if(!t||t!==c.SendMsgResult.OK)throw new Error("Order message SendMsgResult failure status")}catch(e){throw __LOG__(3)`Order message send to chat failure: ${e}`,e}}))).apply(this,arguments)}function p(e,t,a,n,i){const u=(0,l.getMaybeMeUser)(),c={type:"order",ack:s.default.ACK.CLOCK,from:u,id:new o.default({from:u,to:e.id,id:(0,d.newTag)(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:r.Clock.globalUnixTime(),to:e.id,orderId:t.id,token:t.token,orderTitle:e.name||e.formattedTitle,sellerJid:e.id.toString({legacy:!0}),thumbnail:n,itemCount:a,message:i},h=t.price.total;return h&&h.length>0&&(c.totalAmount1000=parseInt(h,10)),t.price.currency&&t.price.currency.length>0&&(c.totalCurrencyCode=t.price.currency),c}},12224:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r.apply(this,arguments)};var i=n(a(48926));function r(){return(r=(0,i.default)((function*(e){let{name:t,desc:a,icon:n,existingGroups:i,newGroups:r}=e}))).apply(this,arguments)}},55326:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPushname=function(e){return p(e)};var i=n(a(48926)),r=a(50796),s=a(46331),l=a(88102),o=a(17239),d=n(a(43725)),u=n(a(54947)),c=a(53006),h=a(77591),f=a(85893);function p(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.genId)();const a=(0,u.default)(e),n=new s.ActionType(d.default.t(131)),i=o.Conn.pushname,m=a.then((()=>new s.ActionType(d.default.t(129),{actionText:d.default.t(143),actionHandler:()=>p(i,t)}))).catch((0,r.filteredCatch)(h.ServerStatusCodeError,(e=>{if(e.status>=400)return new s.ActionType(d.default.t(130))}))).catch((()=>{throw __LOG__(3)`models:conn:setPushname dropped`,new s.ActionType(d.default.t(130),{actionText:d.default.t(139),actionHandler:()=>p(status,t)})}));l.Cmd.openToast((0,f.jsx)(s.ActionToast,{id:t,initialAction:n,pendingAction:m}));const g=yield a;g._duplicate||(0,c.setPushnameLocally)(e)}))).apply(this,arguments)}},50247:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){r.Cmd.openToast((0,l.jsx)(s.Toast,{msg:i.default._("Something went wrong",null,{hk:"2TMztB"}),duration:6e3,id:(0,s.genId)()}))};var i=n(a(48360)),r=a(88102),s=a(50452),l=a(85893)},57192:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GdprStatus",{enumerable:!0,get:function(){return n.GdprStatus}});var n=a(23236)},39434:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.privacyWebNameToServerName=function(e){switch(e){case"readReceipts":return"readreceipts";case"groupAdd":return"groupadd";case"profilePicture":return"profile";case"about":return"status";case"lastSeen":return"last"}},t.setPrivacyForOneCategory=function(){return p.apply(this,arguments)};var i=n(a(81109)),r=n(a(48926)),s=n(a(45095)),l=a(99234),o=a(61319),d=a(94646),u=a(14810),c=a(77591);function h(e){switch(e){case"readreceipts":return"readReceipts";case"groupadd":return"groupAdd";case"profile":return"profilePicture";case"status":return"about";case"last":return"lastSeen"}}function f(e){switch(e){case"status":return o.PrivacyDisallowedListType.About;case"groupadd":return o.PrivacyDisallowedListType.GroupAdd;case"last":return o.PrivacyDisallowedListType.LastSeen;case"profile":return o.PrivacyDisallowedListType.ProfilePicture;default:throw new Error("castToPrivacyDisallowedListType: invalid name")}}function p(){return(p=(0,r.default)((function*(e,t){const a=yield(0,d.setPrivacy)([e]);if(1!==a.length)throw new Error("setPrivacy should return one response");const n=a[0];if(n instanceof c.ServerStatusCodeError)throw 409===n.statusCode&&"contact_blacklist"===e.value&&(yield(0,u.syncSinglePrivacyDisallowedList)(f(e.name))),n;const{name:r,value:p}=e,m=h(r);if((0,l.setUserPrivacySettings)((0,i.default)((0,i.default)({},(0,l.getUserPrivacySettings)()),{},{[m]:p})),"contact_blacklist"===p){const e={id:f(r),disallowedList:(0,s.default)(t,"contactExceptList").map((e=>e.toString())),dhash:(0,s.default)(n.dhash,"response.dhash")};yield(0,o.getTable)().createOrReplace(e)}}))).apply(this,arguments)}},23236:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GdprStatus=void 0;const n=a(54302).Mirrored(["Pending"]);t.GdprStatus=n},15161:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityVerificationDataJob=function(e){return(0,r.NonPersistJob)("getIdentityVerificationData",(e=>(0,i.getIdentityVerificationData)(e)),{priority:n.JOB_PRIORITY.SKIP}).waitUntilCompleted({jid:e})};var n=a(1973),i=a(35723),r=a(29731)},94646:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PrivacyUserAction=void 0,t.setPrivacy=function(){return h.apply(this,arguments)};var i=n(a(48926)),r=a(31914),s=a(71914),l=a(24747),o=a(39410),d=a(77591);const u=new s.WapParser("setPrivacyParser",(e=>e.child("privacy").mapChildrenWithTag("category",(e=>{if("error"===e.attrString("value")){const t=e.child("error");return new d.ServerStatusCodeError(t.attrInt("code"),t.attrString("text"))}return{name:e.attrString("name"),value:e.attrString("value"),dhash:e.maybeAttrString("dhash")}})))),c=a(54302)({Add:"add",Remove:"remove"});function h(){return(h=(0,i.default)((function*(e){const t=e.map((e=>{const{name:t,value:a,users:n,dhash:i}=e;return(0,r.wap)("category",{name:(0,r.CUSTOM_STRING)(t),value:(0,r.CUSTOM_STRING)(a),dhash:null==n?r.DROP_ATTR:(0,r.CUSTOM_STRING)(null!=i?i:"none")},null==n?null:n.map((e=>{let{action:t,wid:a}=e;return(0,r.wap)("user",{action:(0,r.CUSTOM_STRING)(t),jid:(0,o.JID)(a)})})))})),a=yield(0,l.sendIq)((0,r.wap)("iq",{to:r.S_WHATSAPP_NET,type:"set",xmlns:"privacy",id:(0,r.generateId)()},(0,r.wap)("privacy",null,t)),u);if(!0===a.success)return a.result;throw new d.ServerStatusCodeError(a.errorCode,a.errorText)}))).apply(this,arguments)}t.PrivacyUserAction=c},15194:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSupportRequest=function(){return f.apply(this,arguments)};var i=n(a(48926)),r=a(31914),s=a(71914),l=a(85965),o=a(24747),d=a(99234),u=a(39410);function c(e,t){__LOG__(3,void 0,void 0,!0)`supportRequest error: code=${e} message=${null!=t?t:""}`,SEND_LOGS("supportRequest")}const h=new s.WapParser("supportResponse",(e=>{const t=e.child("response");if(t.hasAttr("error_code")){return{type:"error",errorCode:t.attrInt("error_code",0,1e3)}}t.assertAttr("status","ok");return{type:"success",message:t.child("message").contentString(),ticketId:t.child("ticket_id").contentString()}}));function f(){return(f=(0,i.default)((function*(e,t){const a=(0,r.wap)("iq",{from:(0,u.USER_JID)((0,d.getMeUser)()),id:(0,r.generateId)(),smax_id:"3",to:r.S_WHATSAPP_NET,type:"set",xmlns:"fb:thrift_iq"},(0,r.wap)("description",null,e),null!=t?(0,r.wap)("debug_information_json",null,t):null),n=yield(0,o.sendIq)(a,h);let i;if(n.success){var s;const{result:e}=n;return"success"===e.type?(null!=t&&(__LOG__(2)`InAppSupport: Uploading logs for ticketId=${e.ticketId}`,(0,l.upload)({reason:"user-report",immediate:!0,force:!0,persist:!0,ticketId:e.ticketId}).then((t=>{__LOG__(2)`InAppSupport: Logs upload complete for ticketId=${e.ticketId}, logsId=${t}`}))),{type:"success",message:e.message,ticketId:e.ticketId}):(i=null!==(s=e.errorCode)&&void 0!==s?s:400,c(i),{type:"error",errorCode:i})}return c(n.errorCode,n.errorText),{type:"error",errorCode:n.errorCode}}))).apply(this,arguments)}},35723:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityVerificationData=function(){return S.apply(this,arguments)};var i=n(a(48926)),r=a(8584),s=a(60980),l=a(26409),o=a(80498),d=a(99234),u=a(97398),c=n(a(76128)),h=a(56592);const f=/^([17]|2[07]|3[0123469]|4[013456789]|5[12345678]|6[0123456]|8[1246]|9[0123458]|\d{3})\d*?(\d{4,6})$/;function p(e){const t=f.exec(function(e){return e.user.split("@")[0]}(e));return r.Binary.build(t?t[1]+t[2]:e.toString()).readByteArray()}function m(e,t){return`00000${256*e.getUint32(t,!1)+e.getUint8(t+4)}`.slice(-5)}function g(){return v.apply(this,arguments)}function v(){return(v=(0,i.default)((function*(e,t){let a=Promise.resolve(r.Binary.build(0,0,t,e).readByteArray());for(let e=0;e<5200;e++)a=a.then((e=>self.crypto.subtle.digest({name:"SHA-512"},r.Binary.build(e,t).readByteArray())));const n=yield a,i=new DataView(n instanceof ArrayBuffer?n.slice(0,30):n.slice(0,30).buffer);return[m(i,0),m(i,5),m(i,10),m(i,15),m(i,20),m(i,25)].join("")}))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,i.default)((function*(e,t,a,n){return(yield Promise.all([g(e,t),g(a,n)])).sort().join("")}))).apply(this,arguments)}function _(e,t,a,n){const i=new r.Binary;return(0,s.encodeProtobuf)(o.CombinedFingerprintSpec,{version:0,localFingerprint:{publicKey:t,identifier:e},remoteFingerprint:{publicKey:n,identifier:a}},i),i.readBuffer()}function S(){return(S=(0,i.default)((function*(e){let{jid:t}=e;const a=(0,d.assertGetMe)(),n=yield(0,l.getFanOutListJob)([t,a]);try{yield(0,u.ensureE2ESessions)(n)}catch(e){__LOG__(4,void 0,new Error)`ensureE2ESessions with error`}const i=[],r=[];n.forEach((e=>{e.user===a.user?r.push(e):i.push(e)}));try{const e=yield(0,h.getAllIdentityKeysBytesOrThrow)(i),a=yield(0,h.getAllIdentityKeysBytesOrThrow)(r),n=yield c.default.getIdentityKeyPair();if(!n)return __LOG__(3)`getIdentityVerificationData: missing identity for device verification`,null;a.push(new Uint8Array(n.pubKey));const s=(0,h.identityKeysToBinary)(a),l=(0,h.identityKeysToBinary)(e),o=p((0,d.getMeUser)()),u=p(t),f=yield Promise.all([x(o,s,u,l),_(o,s,u,l)]);if(null==f)return null;const[m,g]=f;return{binary:g,string:m}}catch(e){return __LOG__(3)`getIdentityVerificationData: error ${e} when trying to generate identtiy QR code`,null}}))).apply(this,arguments)}},33866:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.editBusinessProfile=t.editBusinessCompliance=void 0;var i=a(8021),r=a(7293),s=a(90549),l=a(63442),o=a(46277),d=n(a(56891));t.editBusinessProfile=e=>{let t;return(0,s.qplPointProfileSave)("datasource_start"),r.GK.supportsFeature(r.GK.F.MD_BACKEND)?(t=(0,i.editBusinessProfile)(e),t||(t=Promise.reject(new Error("md business profile edit not supported")))):t=(0,o.editBusinessProfile)(e),t.then((()=>{(0,s.qplPointProfileSave)("datasource_end")})),t};t.editBusinessCompliance=e=>{let t;return r.GK.supportsFeature(r.GK.F.MD_BACKEND)?(t=(0,l.setMerchantCompliance)(e),t||(t=Promise.reject(new Error("md business compliance profile called from a non-md build")))):t=d.default.editBusinessComplianceWebd(e),t}},46277:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.editBusinessProfile=t.convertProfileToRequestData=void 0;var i=n(a(81109)),r=n(a(48926)),s=n(a(62337)),l=a(77591),o=a(65044);const d=e=>{if(!e)return;return{category:e.map((e=>{let{id:t}=e;return{id:t}}))}},u=e=>{if(!e)return;const{note:t,timezone:a,config:n}=e,i=[];for(const e in n){const t=n[e],{mode:a,hours:r}=t;if(r)for(const[t,n]of r)i.push({day_of_week:e,mode:a,open_time:t,close_time:n});else i.push({day_of_week:e,mode:a})}return{timezone:a,business_hours_note:t,business_hours_config:i}},c=e=>{let{address:t,description:a,email:n,website:i,businessHours:r,categories:l}=e;const o=(0,s.default)({address:t,description:a,email:n,website:i,business_hours:u(r),categories:d(l)});return Object.keys(o).length>0?o:void 0};t.convertProfileToRequestData=c;const h=function(){var e=(0,r.default)((function*(e){const t=c(e);if(!t)return void __LOG__(3)`empty profile received, ignoring save`;const a=(0,i.default)({v:2},t);try{const e=yield o.Socket.send2({data:["action","editBusinessProfile",a],retryOn5xx:!0}),{status:t}=e;if((e=>e>=200&&e<=299)(t))return;throw __LOG__(3)`error editing business profile webd: ${t}`,new l.ServerStatusCodeError(t,"edit business profile")}catch(e){const t=e;throw __LOG__(3)`error editing business profile: ${t}`,t}}));return function(){return e.apply(this,arguments)}}();t.editBusinessProfile=h},54947:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)};var i=n(a(48926)),r=a(92844),s=a(7293),l=n(a(42339)),o=n(a(45723)),d=a(38804),u=n(a(56891)),c=a(77591);function h(){return(h=(0,i.default)((function*(e){if(s.GK.supportsFeature(s.GK.F.MD_BACKEND)&&e){const t=(0,r.unixTimeMs)(),a=l.default.getPushnameMutation(t,e);return(0,o.default)(e),(0,d.lockForSync)([],[a],(()=>Promise.resolve())).then((()=>({_duplicate:null})))}const t=yield u.default.setPushname(e);if(t.status&&200!==t.status)throw new c.ServerStatusCodeError(t.status);return{_duplicate:t._duplicate}}))).apply(this,arguments)}},43560:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;const n=a(54302).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=n;const i=a(54302).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=i},80498:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintDataSpec=t.CombinedFingerprintSpec=void 0;var n=a(1390);const i={};t.FingerprintDataSpec=i;const r={};t.CombinedFingerprintSpec=r,i.internalSpec={publicKey:[1,n.TYPES.BYTES],identifier:[2,n.TYPES.BYTES]},r.internalSpec={version:[1,n.TYPES.UINT32],localFingerprint:[2,n.TYPES.MESSAGE,i],remoteFingerprint:[3,n.TYPES.MESSAGE,i]}},79686:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessAddressField=function(e){let{businessProfile:t,activeField:a,rawBusinessProfile:n,sessionId:r,value:l,validate:o,error:h,lowProfile:f=!0,onActive:p,onChange:g,onSaveBusinessProfile:v,onError:x,onCancel:C}=e;const _=(0,u.jsx)(s.BusinessProfileFormField,{activeField:a,fieldKey:"address",fieldMetric:d.default.BUSINESS_PROFILE_FIELD.ADDRESS,formatForSave:()=>({address:l}),lowProfile:f,originalValue:t.address,placeholder:i.default._("Business Address",null,{hk:"HF4CB"}),rawBusinessProfile:n,sessionId:r,textFieldConfig:{maxLength:c.ADDRESS},value:l,validate:o,error:h,onActive:p,onChange:g,onSaveBusinessProfile:v,onError:x,onCancel:C}),{latitude:S,longitude:y}=t,j=null!=S&&null!=y?(0,u.jsx)(m,{activeField:a,value:l,latitude:S,longitude:y}):null;return(0,u.jsxs)(u.Fragment,{children:[_,j]})};var i=n(a(48360)),r=n(a(56720)),s=a(57597),l=n(a(69618)),o=n(a(83452)),d=n(a(11339)),u=a(85893);const{BUSINESS_PROFILE_FIELDS_LENGTH:c}=l.default,h={position:"g0rxnol2",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",paddingTop:"ppypbuwx",paddingEnd:"fhfm09ip",paddingBottom:"s8gyl5p1",paddingStart:"mjn2akup",marginTop:"c6axuxzh",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},f={position:"lhggkp7q",top:"qq0sjtgm",right:"grt5ktjy",bottom:"jxacihee",left:"tukmaf4q",display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno"},p={paddingTop:"fbgy3m38",paddingEnd:"bcymb0na",paddingBottom:"oq31bsqd",paddingStart:"e8k79tju",fontSize:"f8jlpxt4",color:"o4oavg8t",textTransform:"ofejerhi",backgroundColor:"o8fg3bdd",borderTop:"dl47i6rc",borderEnd:"pdo9fnbd",borderBottom:"n8n2xqzm",borderStart:"hqx4twni",borderTopStartRadius:"g1jn521u",borderTopEndRadius:"mrnekr2l",borderBottomEndRadius:"wu0i2wpa",borderBottomStartRadius:"bbs9k8l5"};function m(e){let{activeField:t,latitude:a,longitude:n,value:s}=e;const l="address"===(null==t?void 0:t.fieldKey)?(0,u.jsx)("div",{className:(0,r.default)(f),children:(0,u.jsx)("div",{className:(0,r.default)(p),children:i.default._("Edit map on mobile",null,{hk:"3AK8Fa"})})}):null;return(0,u.jsxs)("div",{style:{height:96},className:(0,r.default)(h),children:[l,(0,u.jsx)(o.default,{lat:a,lng:n,name:s,width:312,height:96})]})}},14124:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{businessHours:{note:t,timezone:a}}=e,[n,j]=(0,l.useState)(e.businessHours.mode||S),[E,T]=(0,l.useState)((()=>{const{days:t}=e.businessHours,a={};for(const{dayKey:e,closed:n,hours:i,dayName:r}of t)a[e]={closed:n,hours:i||[y()],dayKey:e,dayName:r};return a})),I=(e,t)=>{const a=E[e];T((0,r.default)((0,r.default)({},E),{},{[e]:(0,r.default)((0,r.default)({},a),t)}))},b=(e,t,a,n)=>{const i=[...e],r=a===_.START?0:1,s=[...i[n]];return s[r]=t,i[n]=s,i},w=e=>{let{dayKey:t}=e;return`${t}_business_hours`},k=e=>(0,C.jsx)("div",{className:o.default.timeWrapper,children:(0,C.jsx)(u.default,{"aria-label":s.default._("Add additional hours",null,{hk:"1RUQxq"}),label:s.default._("Add set of hours",null,{hk:"XYa8r"}),onClick:()=>{(e=>{const t=E[e],{hours:a}=t;I(e,{hours:[...a,y()]})})(e)},prefixIcon:"status-ciphertext",iconTheme:"padded-svg"})}),P=e=>(0,C.jsx)("div",{className:o.default.timeWrapper,children:(0,C.jsx)(m.default,{title:c.default.t(1137),"aria-label":c.default.t(1137),name:"x-alt",onClick:()=>{(e=>{const t=E[e],{hours:a}=t,n=[...a];n.pop(),I(e,{hours:n})})(e)}})}),M=e=>{const{closed:t,dayKey:a}=e,n=w(e);return(0,C.jsx)("div",{className:o.default.dayCheckbox,children:(0,C.jsx)(d.CheckBox,{id:n,checked:!t,onChange:()=>{const e=E[a];I(a,{closed:!e.closed})}})})},L=(e,t,a,n)=>{const i=(0,x.isValidTime)(t)?null:" ";return(0,C.jsx)("div",{className:o.default.timeWrapper,children:(0,C.jsx)(v.TextInput,{managed:!0,value:t,theme:"small",maxLength:15,customStyleThemes:["desaturated","noErrorInfo"],error:i,onChange:t=>{const i=E[e],{hours:r}=i;I(e,{hours:b(r,t,a,n)})},onBlur:()=>{((e,t,a)=>{const n=E[e],{hours:i}=n,r=t===_.START?0:1,s=i[a][r],l=(0,x.timeStringToMinutes)(s);void 0!==l&&I(e,{hours:b(i,(0,x.minutesToTime)(l),t,a)})})(e,a,n)}})},`${e}-${a}-${n}`)},A=e=>{const{closed:t}=e;let a;return t?a=s.default._("Closed",null,{hk:"3IRgct"}):n===f.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY?a=s.default._("By appointment only",null,{hk:"e1vew"}):n===f.BUSINESS_HOUR_MODES.OPEN_24H&&(a=s.default._("Open 24 hours",null,{hk:"1AlfF5"})),a?(0,C.jsx)("div",{className:o.default.dayInfoText,children:a}):f.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&!e.closed?(e=>{let{dayKey:t,hours:a}=e;const n=[],i=a.length>=2?P(t):k(t);return a.forEach(((e,a)=>{let[i,r]=e;a>0&&n.push((0,C.jsx)("div",{className:o.default.hoursAnd,children:s.default._("and",null,{hk:"280Z25"})})),n.push(L(t,i,_.START,a),L(t,r,_.END,a))})),(0,C.jsxs)("div",{className:o.default.hoursMain,children:[n,i]})})(e):null},O=e=>{const{dayName:t}=e,a=w(e);return(0,C.jsxs)("div",{className:o.default.dayInfo,children:[(0,C.jsx)("label",{htmlFor:a,children:t}),A(e)]})},D=(()=>{const{businessHours:{days:t}}=e;return(0,C.jsxs)("div",{children:[(0,C.jsx)(g.default,{onSelect:e=>{j(e);const t={};if(n===f.BUSINESS_HOUR_MODES.OPEN_24H){for(const e of f.DAYS_OF_WEEK)t[e]=(0,r.default)((0,r.default)({},E[e]),{},{closed:!1});T(t)}},selectedId:n,tabConfigs:[{title:s.default._("Selected Hours",null,{hk:"1EI8CI"}),id:f.BUSINESS_HOUR_MODES.SPECIFIC_HOURS},{title:s.default._("Always Open",null,{hk:"W2gxH"}),id:f.BUSINESS_HOUR_MODES.OPEN_24H},{title:s.default._("By Appointment",null,{hk:"nN1q9"}),id:f.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY}]}),(0,C.jsx)("div",{className:o.default.editMain,children:t.map((e=>{let{dayKey:t}=e;const a=E[t];return n=a,(0,C.jsxs)("div",{className:o.default.dayMain,children:[M(n),O(n)]},`day-${n.dayKey}`);var n}))})]})})();return(0,C.jsx)(p.default,{title:s.default._("Edit Business Hours",null,{hk:"2zl0Ai"}),isValid:(0,x.isValidBusinessHours)(n,E),doSave:(0,i.default)((function*(){(0,h.qplStartProfileSave)("bizHours"),yield e.saveBusinessProfile((0,x.convertToRawBusinessProfile)({mode:n,dayValues:E,note:t,timezone:a}))})),afterSave:e.afterSave,onCancel:e.onCancel,children:D})};var i=n(a(48926)),r=n(a(81109)),s=n(a(48360)),l=a(67294),o=n(a(9192)),d=a(16593),u=n(a(72332)),c=n(a(43725)),h=a(82145),f=a(58313),p=n(a(34544)),m=n(a(38932)),g=n(a(38801)),v=a(90011),x=a(33572),C=a(85893);const _=a(54302).Mirrored(["START","END"]),S=f.BUSINESS_HOUR_MODES.SPECIFIC_HOURS,y=()=>[(0,x.minutesToTime)(540),(0,x.minutesToTime)(1080)]},58313:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BUSINESS_HOUR_MODES",{enumerable:!0,get:function(){return i.BUSINESS_HOUR_MODES}}),Object.defineProperty(t,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return i.DAYS_OF_WEEK}}),Object.defineProperty(t,"RawBusinessProfile",{enumerable:!0,get:function(){return n.RawBusinessProfile}});var n=a(97347),i=a(93170)},33572:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTime=t.isValidBusinessHours=t.convertToRawBusinessProfile=void 0,Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return i.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return i.timeStringToMinutes}});var n=a(58313),i=a(43390);const r=e=>void 0!==(0,i.timeStringToMinutes)(e);t.isValidTime=r;t.isValidBusinessHours=(e,t)=>{if(e===n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(const e in t){const a=t[e],{closed:n,hours:i}=a;if(!n)for(const[e,t]of i)if(!r(e)||!r(t))return!1}return!0};t.convertToRawBusinessProfile=e=>{let{mode:t,dayValues:a,note:r,timezone:s}=e;const l={};for(const e in a){const r=a[e],{closed:s,hours:o}=r;if(!s){const a={mode:t};t===n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(a.hours=o.map((e=>{let[t,a]=e;return[(0,i.timeStringToMinutes)(t)||0,(0,i.timeStringToMinutes)(a)||0]}))),l[e]=a}}return{businessHours:{config:l,note:r,timezone:s||Intl.DateTimeFormat().resolvedOptions().timeZone}}}},57597:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessProfileFormField=function(e){let{activeField:t,error:a,fieldKey:n,fieldMetric:u,formatForSave:c,lowProfile:h,originalValue:f,placeholder:p,rawBusinessProfile:m,sessionId:g,startActive:v,textFieldConfig:x,validate:C,value:_,onActive:S,onChange:y,onError:j,onSaveBusinessProfile:E,onCancel:T}=e;const I=(null==t?void 0:t.fieldKey)===n,b=_?void 0:p;return(0,d.jsx)(o.TextInput,(0,i.default)({value:_,editable:!t||I,pending:I&&(null==t?void 0:t.editType)===l.EditType.PENDING,showRemaining:!0,onBeginEdit:()=>{null!=g&&(0,r.logProfileFieldOpen)(u,m,g),S({fieldKey:n,editType:l.EditType.EDITING})},onChange:y,onSave:()=>{(0,s.qplStartProfileSave)(n),null!=g&&(0,r.logProfileFieldSave)(u,m,g),S({fieldKey:n,editType:l.EditType.PENDING}),E(c()).then((()=>{S()}),(()=>{S()}))},onCancel:()=>{null!=g&&(0,r.logProfileFieldDiscard)(u,m,g),y(f),S(),null==T||T()},lockable:!0,lowProfile:h,multiline:!0,inputPlaceholder:b,theme:"text-input",validate:C,onError:j,error:a,a8n:`biz-profile-${n}-input`,fieldName:p,startActive:v},x))};var i=n(a(81109)),r=a(30426),s=a(82145),l=(n(a(11339)),a(97347)),o=a(90011),d=a(85893)},70656:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,d.useState)(e.initialCategories),[n,i]=(0,d.useState)(!1),[s,l]=(0,d.useState)(!1),[f,g]=(0,d.useState)([]),[v,x]=(0,d.useState)(""),j=()=>{m.Cmd.openToast((0,I.jsx)(E.Toast,{id:(0,E.genId)(),msg:o.default._('You cannot select categories when you have selected "Not a Business"',null,{hk:"12A4L0"})}))},T=e=>{for(let a=0;a<t.length;a++)if(t[a].id===e)return!0;return!1},b=e=>{const n=t.find((e=>e.id===v));let i=t;t.length>0&&(e.not_a_biz&&!n?(i=[],j()):!e.not_a_biz&&n&&(i=t.filter((e=>e.id!==n.id)),j())),T(e.id)?a(i.filter((t=>t.id!==e.id))):a([...i,e])},w=t=>{l(!0),e.searchCategories(t||u.BUSINESS_CATEGORY_EMPTY_STR_ID).then((e=>{let a=e.categories;""!==t&&(a=a.filter((e=>!e.not_a_biz))),l(!1),g(a),x(e.notABizId),(0,_.qplAnnotateProfileCatsView)(a.length),(0,_.qplEndProfileCatsView)(S.QuickLogActionType.SUCCESS)})).catch((()=>{m.Cmd.openToast((0,I.jsx)(E.Toast,{id:(0,E.genId)(),msg:o.default._("Something went wrong.",null,{hk:"2Cx5Nt"})})),l(!1),g([]),x(""),(0,_.qplEndProfileCatsView)(S.QuickLogActionType.FAIL)}))};return(0,d.useEffect)((()=>{w("")}),[]),(0,I.jsxs)(y.default,{title:o.default._("Choose up to three categories",null,{hk:"17Tmht"}),isValid:t.length>0,doSave:(0,r.default)((function*(){(0,_.qplStartProfileSave)("categories"),yield e.saveBusinessProfile({categories:t})})),afterSave:()=>{i(!0),e.afterSave()},onCancel:()=>{i(!0),e.onCancel()},children:[(0,I.jsx)("div",{className:h.default.searchBackground,children:(0,I.jsx)(C.default,{onSearch:e=>{s||n||((0,_.qplStartProfileCatsView)("Search"),w(e))},placeholder:o.default._("Search categories",null,{hk:"4zfNoj"})})}),(0,I.jsxs)("div",{className:h.default.editMain,children:[(0,I.jsx)("div",{className:h.default.list,children:(0,I.jsx)(k,{isLoading:s,results:f,isSelected:T,isDisabled:e=>!e.not_a_biz&&!T(e.id)&&t.length>=c.MAX_BUSINESS_CATEGORIES,toggleResultById:e=>{const t=f.filter((t=>t.id===e))[0];t&&b(t)}})}),t&&(0,I.jsx)(p.default,{categories:t,onRemoveItem:e=>{const a=t.filter((t=>t.id===e))[0];a&&b(a)}})]})]})};var i=n(a(81109)),r=n(a(48926)),s=n(a(99964)),l=n(a(94184)),o=n(a(48360)),d=a(67294),u=a(32742),c=a(48018),h=n(a(94994)),f=a(16593),p=n(a(98001)),m=a(88102),g=a(47915),v=n(a(44942)),x=n(a(30855)),C=n(a(48837)),_=a(82145),S=a(48870),y=n(a(34544)),j=a(11054),E=a(50452),T=n(a(59552)),I=a(85893);function b(e){let{category:t,toggleResultById:a}=e;return(0,I.jsxs)("div",{className:h.default.rowMain,children:[(0,I.jsx)("div",{className:h.default.rowCheckbox,children:(0,I.jsx)(f.CheckBox,{id:`${t.id}`,onChange:()=>{!t.disabled&&a(t.id)},checked:t.selected,disabled:t.disabled})}),(0,I.jsx)("label",{"data-a8n":s.default.key("category-list-item"),className:(0,l.default)(h.default.rowLabel,{[h.default.disabled]:t.disabled}),htmlFor:t.id,children:t.localized_display_name})]})}function w(e){let{label:t}=e;return(0,I.jsxs)("div",{className:h.default.rowMain,children:[(0,I.jsx)("div",{className:h.default.rowCheckbox}),t]})}function k(e){let{isLoading:t,results:a,isSelected:n,isDisabled:r,toggleResultById:s}=e;const l=(0,T.default)((()=>new x.default));if(t)return(0,I.jsx)("div",{className:h.default.loadingSpinner,children:(0,I.jsx)(j.Spinner,{color:"highlight",size:44,stroke:6})});if(!a||0===a.length)return(0,I.jsx)(w,{label:o.default._("No categories found",null,{hk:"2xfbJX"})});const d=a.map((e=>(0,i.default)((0,i.default)({},e),{},{id:e.id,itemKey:e.id.toString(),disabled:r(e),selected:n(e.id)})));return(0,I.jsx)(v.default,{flatListControllers:[l.current],children:(0,I.jsx)(g.FlatList,{data:d,flatListController:l.current,direction:"vertical",renderItem:e=>(0,I.jsx)(b,{category:e,toggleResultById:s}),defaultItemHeight:48})})}},30923:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(99964)),s=a(28298),l=n(a(48360)),o=a(67294),d=n(a(56720)),u=a(79686),c=a(3754),h=n(a(22635)),f=n(a(14124)),p=a(57597),m=a(93170),g=n(a(70656)),v=a(88102),x=a(95176),C=n(a(69618)),_=n(a(33308)),S=n(a(98858)),y=a(99234),j=a(57701),E=a(84287),T=n(a(43725)),I=a(30426),b=a(82145),w=n(a(11339)),k=(a(97347),a(28826)),P=a(2541),M=a(85832),L=a(85893);const A={color:"ky3f94nk",fontSize:"f8jlpxt4",textTransform:"ofejerhi"},O={flexGrow:"gj6qtt9u",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",textTransform:"aprpv14t"},D={display:"p357zi0d"},R={flexGrow:"a6lcuizr",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg"},N={color:"t35qvd06",fontSize:"dsh4tgtl",lineHeight:"jgi8eev7",marginTop:"dkeqio29"},{BUSINESS_PROFILE_FIELDS_LENGTH:F}=C.default;t.default=e=>{let{businessProfile:t,saveBusinessProfile:a,sessionId:n,verifiedName:C}=e;const[B,U]=(0,o.useState)(),[H,G]=(0,o.useState)(),[V,W]=(0,o.useState)(),[z,q]=(0,o.useState)(),[K,Y]=(0,o.useState)(),[Q,X]=(0,o.useState)(),[Z,J]=(0,o.useState)(),[$,ee]=(0,o.useState)(),[te,ae]=(0,o.useState)(),[ne,ie]=(0,o.useState)(!1),re=(0,y.getMeUser)(),se=(0,j.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(re.user),[le,oe]=(0,o.useState)();(0,o.useEffect)((()=>{const e=(0,k.convertRawBusinessProfile)(t);U(e.description),W(e.email),G(e.address),q(e.primaryWebsite),Y(e.secondaryWebsite),X(Boolean(e.primaryWebsite&&!e.secondaryWebsite))}),[t]),(0,o.useEffect)((()=>{(0,M.validateEmail)(V)&&J(null)}),[V]),(0,o.useEffect)((()=>{(0,M.validateURL)(z)&&ee(null)}),[z]),(0,o.useEffect)((()=>{(0,M.validateURL)(K)&&ae(null)}),[K]);const de=()=>{const e=[];return z&&e.push(z),K&&e.push(K),{website:e.map(((e,t)=>{if(!P.URL.isHttps(e)&&!P.URL.isHttp(e)){const a=`https://${e}`;return 0===t?q(a):Y(a),a}return e}))}},ue=e=>(0,L.jsx)(E.IconSection,(0,i.default)((0,i.default)({},e),{},{hideEditIcon:Boolean(le)})),ce=(e,t,a)=>{if(t)return l.default._("Closed",null,{hk:"3IRgct"});switch(e){case m.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return(0,L.jsx)(L.Fragment,{children:a&&a.map(((e,t)=>{let[a,n]=e;return(0,L.jsxs)("div",{className:(0,d.default)(0!==t&&s.uiMargin.top16),"data-a8n":r.default.key("business-hours-time"),children:[a," - ",n]},t)}))});case m.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return l.default._("By appointment only",null,{hk:"e1vew"});case m.BUSINESS_HOUR_MODES.OPEN_24H:return l.default._("Open 24 hours",null,{hk:"1AlfF5"});default:return null}},he=(0,o.useCallback)((()=>se?(0,h.default)():void 0),[se]),fe=(0,k.convertRawBusinessProfile)(t);let pe,me=l.default._("Business Information",null,{hk:"36RGyI"});return(0,j.canSeeBizProfileV3)()&&(me=null,pe=S.default.noPaddingTop),(0,L.jsxs)(_.default,{title:me,theme:"refresh",className:pe,children:[(e=>{if(!e)return null;const t=(0,j.canSeeBizProfileV3)()?E.IconSectionTheme.NoMargin:void 0;return ue({theme:t,icon:"account-box",iconClass:S.default.verifiedNameIcon,content:(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{children:e}),(0,L.jsx)("div",{className:(0,d.default)(N),children:l.default._("This name will be visible to your WhatsApp customers and can be edited from the app on your mobile device.",null,{hk:"1y9lc"})})]})})})(C),ue({icon:"business-description",content:(0,L.jsx)(p.BusinessProfileFormField,{activeField:le,fieldKey:"description",fieldMetric:w.default.BUSINESS_PROFILE_FIELD.DESCRIPTION,formatForSave:()=>({description:B}),lowProfile:!0,originalValue:fe.description,placeholder:l.default._("Business Description",null,{hk:"2Q2DP8"}),rawBusinessProfile:t,sessionId:n,textFieldConfig:{maxLength:F.DESCRIPTION,supportsEmoji:!0},value:B,onActive:oe,onChange:U,onSaveBusinessProfile:a})}),ue({icon:"business-category",type:"container",emptyText:l.default._("Categories",null,{hk:"2YgYDL"}),content:(ge=fe.categories,0===ge.length?null:(0,L.jsx)("div",{"data-a8n":r.default.key("biz-profile-category-input"),children:ge.map((e=>e.localized_display_name)).join(T.default.t(419))})),fieldName:l.default._("Categories",null,{hk:"2YgYDL"}),onEdit:()=>{(0,b.qplStartProfileCatsView)("Profile"),(0,I.logProfileFieldOpen)(w.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,n),v.Cmd.openModal((0,L.jsx)(g.default,{initialCategories:fe.categories,saveBusinessProfile:a,searchCategories:e=>c.BusinessCategoriesResultCollection.find(e),afterSave:()=>(0,I.logProfileFieldSave)(w.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,n),onCancel:()=>{(0,I.logProfileFieldDiscard)(w.default.BUSINESS_PROFILE_FIELD.CATEGORY,t,n)}}))}}),ue({icon:"business-address",content:(0,L.jsx)(u.BusinessAddressField,{businessProfile:fe,activeField:le,rawBusinessProfile:t,sessionId:n,value:H,onActive:oe,onChange:G,onSaveBusinessProfile:a,validate:e=>(0,x.existsField)(e,re),onError:he})}),ue({icon:"business-hours",type:"container",emptyText:l.default._("Business Hours",null,{hk:"1bV20v"}),content:(e=>{let{mode:t,days:a}=e;return null==t?null:(0,L.jsx)("div",{children:a.map(((e,a)=>{let{dayName:n,dayKey:i,closed:l,hours:o}=e;return(0,L.jsxs)("div",{className:(0,d.default)(D,0!==a&&s.uiMargin.top28),"data-a8n":r.default.key("business-hours-section-row"),children:[(0,L.jsx)("div",{className:(0,d.default)(O),children:n}),(0,L.jsx)("div",{className:(0,d.default)(R),children:ce(t,l,o)})]},i)}))})})(fe.hours),fieldName:l.default._("Business Hours",null,{hk:"1bV20v"}),onEdit:()=>{(0,I.logProfileFieldOpen)(w.default.BUSINESS_PROFILE_FIELD.HOURS,t,n),v.Cmd.openModal((0,L.jsx)(f.default,{businessHours:fe.hours,saveBusinessProfile:a,onCancel:()=>{(0,I.logProfileFieldDiscard)(w.default.BUSINESS_PROFILE_FIELD.HOURS,t,n)},afterSave:()=>(0,I.logProfileFieldSave)(w.default.BUSINESS_PROFILE_FIELD.HOURS,t,n)}))}}),ue({icon:"business-email",content:(0,L.jsx)(p.BusinessProfileFormField,{activeField:le,error:Z,fieldKey:"email",fieldMetric:w.default.BUSINESS_PROFILE_FIELD.EMAIL,formatForSave:()=>({email:V}),lowProfile:!1,originalValue:fe.email,placeholder:l.default._("Email Address",null,{hk:"5tSKT"}),rawBusinessProfile:t,sessionId:n,textFieldConfig:{maxLength:F.EMAIL},validate:e=>(0,M.validateEmail)(e),value:V,onActive:oe,onChange:W,onError:()=>{J(l.default._("Incorrect email address format",null,{hk:"1KuwvT"}))},onSaveBusinessProfile:a})}),(e=>{const i=(0,L.jsx)(p.BusinessProfileFormField,{activeField:le,error:$,fieldKey:"primaryWebsite",fieldMetric:w.default.BUSINESS_PROFILE_FIELD.WEBSITE,formatForSave:de,lowProfile:!1,originalValue:e.primaryWebsite,placeholder:l.default._("Website",null,{hk:"2HRvqj"}),rawBusinessProfile:t,sessionId:n,textFieldConfig:{maxLength:F.WEBSITE},validate:M.validateURL,value:z,onActive:oe,onChange:q,onError:()=>{ee(l.default._("URL is incorrect",null,{hk:"xiOtm"}))},onSaveBusinessProfile:a});return ue({icon:"business-website",theme:E.IconSectionTheme.SmallMargin,content:(0,L.jsx)("div",{children:i})})})(fe),(e=>{if(!e.primaryWebsite)return null;if(K||!Q){const i=(0,L.jsx)(p.BusinessProfileFormField,{activeField:le,error:te,fieldKey:"secondaryWebsite",fieldMetric:w.default.BUSINESS_PROFILE_FIELD.WEBSITE,formatForSave:de,lowProfile:!1,originalValue:e.secondaryWebsite,placeholder:l.default._("Website",null,{hk:"2HRvqj"}),rawBusinessProfile:t,sessionId:n,startActive:ne,textFieldConfig:{maxLength:F.WEBSITE},validate:M.validateURL,value:K,onActive:oe,onChange:Y,onError:()=>{ae(l.default._("URL is incorrect",null,{hk:"xiOtm"}))},onSaveBusinessProfile:a});return ue({icon:"business-website",theme:E.IconSectionTheme.NoMargin,content:(0,L.jsx)("div",{children:i})})}{const e=(0,L.jsx)("button",{className:(0,d.default)(A),onClick:()=>{X(!1),ie(!0)},children:l.default._("Add another website",null,{hk:"1HOyZt"})});return ue({theme:E.IconSectionTheme.NoMargin,content:(0,L.jsx)("div",{children:e})})}})(fe)]});var ge}},44281:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,s.useState)(C.LoadType.PENDING),[a,n]=(0,s.useState)(),l=(0,s.useRef)(Math.floor(2147483648*Math.random()).toString()),m=function(){var e=(0,i.default)((function*(){t(C.LoadType.PENDING);try{const e=yield T();n(e),t(C.LoadType.DONE),(0,v.logProfileOpen)(e,l.current)}catch(e){t(C.LoadType.ERROR)}}));return function(){return e.apply(this,arguments)}}();if((0,s.useEffect)((()=>{m()}),[]),e===C.LoadType.PENDING)return(0,j.jsx)("div",{className:f.default.loadingSpinner,children:(0,j.jsx)(S.Spinner,{color:"default",size:24,stroke:6})});if(e===C.LoadType.ERROR)return(0,j.jsx)(c.default,{title:r.default._("Business Information",null,{hk:"36RGyI"}),theme:"refresh",children:(0,j.jsxs)(p.FlexRow,{align:"center",justify:"center",children:[(0,j.jsx)(p.FlexItem,{children:g.default.t(260)}),(0,j.jsx)(p.FlexItem,{xstyle:E.retryButton,children:(0,j.jsx)(d.default,{onClick:()=>{m()},type:"simplified",children:g.default.t(1179)})})]})});if(e===C.LoadType.DONE&&a)return(0,j.jsx)(h.default,{verifiedName:u.Conn.pushname||void 0,sessionId:l.current,businessProfile:a,saveBusinessProfile:function(){var e=(0,i.default)((function*(e){try{yield(0,o.editBusinessProfile)(e)}catch(e){throw(0,y.showError)(g.default.t(261)),(0,x.qplEndProfileSave)(_.QuickLogActionType.FAIL),__LOG__(3,void 0,void 0,!0)`business_profile:edit_form save failed`,SEND_LOGS(`businessProfile edit handled server error - ${e.status}`),e}try{const e=yield I();return n(e),(0,x.qplEndProfileSave)(_.QuickLogActionType.SUCCESS),e}catch(e){throw(0,y.showError)(g.default.t(260)),(0,x.qplEndProfileSave)(_.QuickLogActionType.FAIL),e}}));return function(){return e.apply(this,arguments)}}()});return null};var i=n(a(48926)),r=n(a(48360)),s=a(67294),l=(n(a(56720)),a(93581)),o=a(33866),d=n(a(39770)),u=a(17239),c=n(a(33308)),h=n(a(30923)),f=n(a(62361)),p=a(29623),m=a(99234),g=n(a(43725)),v=a(30426),x=a(82145),C=a(97347),_=a(48870),S=a(11054),y=a(29283),j=a(85893);const E={retryButton:{height:"epwkujcx",marginStart:"nzcjdldu"}},T=function(){var e=(0,i.default)((function*(){const e=(0,m.getMeUser)(),t=l.BusinessProfileCollection.get(e);t&&t.markStale();return(yield l.BusinessProfileCollection.find(e)).serialize()}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.default)((function*(){const e=(0,m.getMeUser)(),t=yield l.BusinessProfileCollection.update(e);return(Array.isArray(t)?t[0]:t).serialize()}));return function(){return e.apply(this,arguments)}}()},30426:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProfilePopulatedFields=s,t.logProfileFieldDiscard=function(e,t,a){const n=new r.default.EditBusinessProfile((0,i.default)({editProfileAction:r.default.EDIT_PROFILE_ACTION.ACTION_PROFILE_FIELD_DISCARD,businessProfileEntryPoint:r.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editProfileActionField:e,editBusinessProfileSessionId:a},s(t)));n&&n.commit()},t.logProfileFieldOpen=function(e,t,a){const n=new r.default.EditBusinessProfile((0,i.default)({editProfileAction:r.default.EDIT_PROFILE_ACTION.ACTION_PROFILE_FIELD_OPEN,businessProfileEntryPoint:r.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editProfileActionField:e,editBusinessProfileSessionId:a},s(t)));n&&n.commit()},t.logProfileFieldSave=function(e,t,a){const n=new r.default.EditBusinessProfile((0,i.default)({editProfileAction:r.default.EDIT_PROFILE_ACTION.ACTION_PROFILE_FIELD_SAVE,businessProfileEntryPoint:r.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editProfileActionField:e,editBusinessProfileSessionId:a},s(t)));n&&n.commit()},t.logProfileOpen=function(e,t){const a=new r.default.EditBusinessProfile((0,i.default)({editProfileAction:r.default.EDIT_PROFILE_ACTION.ACTION_OPEN,businessProfileEntryPoint:r.default.BUSINESS_PROFILE_ENTRY_POINT.SETTINGS,editBusinessProfileSessionId:t},s(e)));a&&a.commit()};var i=n(a(81109)),r=n(a(11339));function s(e){var t;return{hasDescription:null!=e.description,hasCategory:!!(e.categories&&e.categories.length>0),hasHours:null!=(null===(t=e.businessHours)||void 0===t?void 0:t.config),hasEmail:null!=e.email,hasAddress:null!=e.address,hasWebsite:null!=e.website}}},97347:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return n.EditType}}),Object.defineProperty(t,"LoadType",{enumerable:!0,get:function(){return n.LoadType}});var n=a(43560)},28826:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertRawBusinessProfile=void 0;var n=a(43390);t.convertRawBusinessProfile=e=>{const{description:t,email:a,address:i,website:r,categories:s,businessHours:l,latitude:o,longitude:d}=e,[u,c]=r||[];return{description:t,email:a,address:i,primaryWebsite:u,secondaryWebsite:c,hours:(0,n.getBusinessHoursForEdit)(l),categories:s||[],latitude:o,longitude:d}}},29283:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showError=void 0;var n=a(88102),i=a(50452),r=a(85893);t.showError=e=>{n.Cmd.openToast((0,r.jsx)(i.Toast,{msg:e,duration:6e3,id:(0,i.genId)()}))}},44189:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CartDetailDrawer=function(e){const{onBack:t,sellerJid:a,chat:n,closeDrawerRightOnSend:i,onProductCatalog:q,onProductDetail:K,isPushed:Y=!0}=e,Q=(0,d.useContext)(j.DrawerContext),X=(0,d.useMemo)((()=>f.CartCollection.findCart(a)),[a]),Z=(0,d.useRef)(null),J=(0,d.useRef)(null),$=(0,G.default)((()=>new s.PromiseQueue)),ee=(0,G.default)((()=>new T.default)),[te,ae]=(0,d.useState)(!0),[ne,ie]=(0,d.useState)(void 0),[re,se]=(0,d.useState)([]),[le,oe]=(0,d.useState)(X.message),de=function(){var e=(0,r.default)((function*(e){const[t,a]=yield Promise.all([e?(0,O.default)(X,Y):Promise.resolve(),u.BusinessProfileCollection.find(n.id)]);t&&(J.current=t);const i=(0,M.matchCartItemsToProducts)(X,J.current);ae(!1),ie(a),se(i)}));return function(){return e.apply(this,arguments)}}();(0,V.useListener)(X,"change:cartItemCollection",(()=>{$.current.enqueue((()=>de()))})),(0,d.useEffect)((()=>{let e=!0;Y&&(0,P.qplAnnotateCartView)(X.id.toString()!==a,X.itemCount),de(!0,Y).then((()=>{e=!1,Y&&(0,P.qplEndCartView)(D.QuickLogActionType.SUCCESS),(0,k.logCartListImpression)(X.id.toString(),(0,A.getProductCatalogContext)(Q))})).catch((()=>{__LOG__(4,!0,new Error,!0)`Unable to open the cart`,SEND_LOGS("openCart: failed to open the cart"),(0,N.default)(),(0,g.default)(X)})).finally((()=>{e&&Y&&(0,P.qplEndCartView)(D.QuickLogActionType.FAIL),ae(!1)}))}),[]);const ue=()=>{ae(!0),(0,P.qplStartOrderCreate)(re.length),(0,F.default)(X,n).then((e=>{const a=Boolean(X.message);(0,w.logSendOrderMessage)({orderId:e,catalogOwnerJid:X.id,catalogContext:(0,A.getProductCatalogContext)(Q),isOrderMsgAttached:a,quantity:X.itemCount}),t(),(0,g.default)(X),X.message=void 0,i&&v.Cmd.existsDrawerRight((e=>{e&&v.Cmd.closeDrawerRight()})),(0,P.qplEndOrderCreate)(D.QuickLogActionType.SUCCESS)})).catch((()=>{__LOG__(4,!0,new Error,!0)`Unable to create catalog order`,SEND_LOGS("submitOrder: order creation or order message send error"),(0,N.default)(),de(!0),(0,P.qplEndOrderCreate)(D.QuickLogActionType.FAIL)})).finally((()=>{ae(!1)}))},ce=e=>{oe(e),(0,H.default)(X,e)},he=()=>{v.Cmd.openModal((0,z.jsx)(x.default,{title:o.default._("Message Too Long",null,{hk:"3CMbLA"}),onOK:()=>{v.Cmd.closeModal()},okText:b.default.t(1764),children:o.default._("The message youre pasting is too long. Try shortening it or sending it as a separate message.",null,{hk:"9VR0L"})}))};return(0,z.jsxs)(S.default,{onDrop:t,theme:"striped",children:[(0,z.jsx)(E.DrawerHeader,{title:o.default._("Your cart",null,{hk:"Sn66V"}),type:E.DRAWER_HEADER_TYPE.SMALL,onBack:t}),(0,z.jsx)(y.default,{flatListControllers:[ee.current],children:(()=>{if(te)return(0,z.jsx)(I.default,{});const e=X.itemCount,t=e>0;let i,r;if(t){const t=b.default.t(678,{count:e,_plural:e});i=(0,z.jsx)(U.TextDiv,{theme:"title",children:t})}null!=X.total&&null!=X.currency?r=(0,z.jsx)(U.TextDiv,{theme:"muted-small",children:b.default.t(1007,{subtotal:_.formatAmount1000(X.currency,X.total)})}):e>0&&(r=(0,z.jsx)(U.TextDiv,{theme:"muted-small",children:b.default.t(994)}));const s=(0,z.jsx)(W.default,{transitionName:"media-caption",className:p.default.cartMessage,children:(0,z.jsx)(L.default,{ref:Z,chat:n,maxLength:C.default.MAX_CART_MESSAGE_LENGTH,multiline:!0,onEnter:ue,onChange:ce,onMaxPasteExceeded:he,placeholder:o.default._("Add a message",null,{hk:"4drJT1"}),showRemaining:!0,spellCheck:!0,supportsEmoji:!0,value:le})}),d=(0,z.jsx)("button",{"data-a8n":l.default.key("cart-send-button"),className:p.default.btnSend,tabIndex:"-1",onClick:ue,title:o.default._("Send a cart",null,{hk:"37qP8u"}),children:(0,z.jsx)(R.Round,{large:!0,children:(0,z.jsx)(B.default,{name:"send",directional:!0})})});return(0,z.jsxs)(z.Fragment,{children:[!t&&(0,z.jsxs)("div",{className:p.default.emptyCartContainer,children:[(0,z.jsx)(B.default,{name:"shopping-cart-empty"}),(0,z.jsx)(U.TextDiv,{className:p.default.emptyCardHeader,theme:"large",children:o.default._("Add items to your cart",null,{hk:"411bLF"})}),(0,z.jsx)(U.TextDiv,{className:p.default.emptyCardText,theme:"plain",children:o.default._("Collect all the items you're interested in here and then send them to the business. Use your cart to ask about buying, customizing, delivery, or anything you want.",null,{hk:"2L1JTk"})}),(0,c.hasCatalog)(ne)&&(0,z.jsx)(h.default,{onClick:q,type:"primary",children:b.default.t(1073)})]}),(0,z.jsxs)("div",{className:p.default.info,children:[i,r]}),(0,z.jsx)(m.default,{flatListController:ee.current,onProductDetail:K,cart:X,sellerJid:a,cartProductItems:re}),t&&(0,z.jsxs)("div",{className:p.default.footer,children:[s,(0,z.jsx)(W.default,{transitionAppear:!0,transitionName:"btn",children:d})]})]})})()})]})};var r=i(a(48926)),s=a(27870),l=i(a(99964)),o=i(a(48360)),d=a(67294),u=a(93581),c=a(94010),h=i(a(39770)),f=a(12392),p=i(a(73803)),m=i(a(38778)),g=i(a(74220)),v=a(88102),x=i(a(52665)),C=i(a(69618)),_=n(a(74764)),S=i(a(60453)),y=i(a(69637)),j=a(27394),E=a(94790),T=i(a(30855)),I=i(a(29796)),b=i(a(43725)),w=a(79544),k=a(88571),P=a(82145),M=a(79495),L=i(a(3028)),A=a(97567),O=i(a(9186)),D=a(48870),R=a(82857),N=i(a(50247)),F=i(a(53109)),B=i(a(23217)),U=a(13923),H=i(a(51383)),G=i(a(59552)),V=a(19529),W=i(a(41956)),z=a(85893)},38778:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{cartProductItems:t,onProductDetail:a,sellerJid:n}=e;return(0,d.jsx)(o.default,{flatListControllers:[e.flatListController],children:(0,d.jsx)(l.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:t.map((e=>({itemKey:e.cartItem.id,contentKey:(0,i.default)("cartItem"),product:e.product,cartItem:e.cartItem}))),renderItem:e=>{const t={productId:e.cartItem.id,businessOwnerJid:n};return(0,d.jsx)(r.default,{cartId:n,product:e.product,quantity:e.cartItem.quantity,onClick:()=>a(t)})},defaultItemHeight:s.default.PRODUCT_LIST_ITEM_HEIGHT})})};var i=n(a(73955)),r=n(a(30068)),s=n(a(69618)),l=a(47915),o=n(a(44942)),d=a(85893)},30068:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{product:a,onClick:n}=e,x=(0,v.jsx)(c.EmojiText,{text:a.name,ellipsify:!0,titlify:!0}),C=null===(t=a.getPreviewImage())||void 0===t?void 0:t.mediaData;let _;_=C?(0,v.jsx)(m.ProductThumb,{theme:"list",mediaData:C}):(0,v.jsx)(v.Fragment,{});const S=(0,v.jsx)(p.default,{className:r.default.price,product:a,fallback:i.default._("Ask for price",null,{hk:"2Rtbeg"})});return(0,v.jsx)(l.default,{image:_,customImage:!0,primary:x,secondary:S,theme:"cart-product",onClick:n,detail:(0,v.jsx)(u.DrawerContext.Consumer,{children:t=>(0,v.jsxs)("div",{className:r.default.actions,children:[(0,v.jsx)(s.default,{quantity:e.quantity,onChange:a=>function(t,a){const{cartId:n,product:i}=e;(0,g.default)(n,i,t),(0,h.logEditProduct)(i,a,t)}(a,(0,f.getProductCatalogContext)(t))}),(0,v.jsx)("div",{className:r.default.deleteIcon,children:(0,v.jsx)(o.default,{onClick:a=>function(t,a){const{cartId:n,product:i}=e,r=(0,d.default)(n,i.id.toString());(0,d.default)(n,i.id.toString()),(0,h.logDeleteProduct)(i,a),0===r&&(0,h.logCartAbandon)(i.catalogWid.toString(),a),function(e){e.preventDefault(),e.stopPropagation()}(t)}(a,(0,f.getProductCatalogContext)(t))})})]})}),className:r.default.cartListItem},a.id.toString())};var i=n(a(48360)),r=n(a(25844)),s=n(a(39864)),l=n(a(44356)),o=n(a(52814)),d=n(a(72921)),u=a(27394),c=a(65417),h=a(88571),f=a(97567),p=n(a(62089)),m=a(3013),g=n(a(85566)),v=a(85893)},39864:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)("div",{className:r.default.select,children:(0,s.jsx)("select",{onClick:function(e){e.preventDefault(),e.stopPropagation()},value:e.quantity,onChange:function(t){const a=t.target;a instanceof HTMLSelectElement&&e.onChange(parseInt(a.value,10))},children:function(){const e=[];for(let t=1;t<=i.MAX_QUANTITY;t++)e.push((0,s.jsx)("option",{value:t,children:t},t));return e}()})})};var i=a(9581),r=n(a(69851)),s=a(85893)},52814:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,l.jsx)(s.default,{"aria-label":r.default.t(1103),name:"delete",title:r.default.t(1103),className:i.default.deleteIcon,onClick:e.onClick})};var i=n(a(7517)),r=n(a(43725)),s=n(a(38932)),l=a(85893)},26383:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{label:t,label:a}=e,n=(0,u.default)();(0,c.useListener)(o.LabelCollection,`label_updated_${a}`,(()=>{n()}));const f=o.LabelCollection.get(t);if(!f||!f.name)return null;if("label-list"===e.theme){const a=(0,h.jsx)(d.Labels,{renderAsCircle:"label-list"===e.theme,theme:e.theme,labels:[t]}),n=(0,h.jsx)(r.EmojiText,{text:f.name,ellipsify:!0,titlify:!0});return(0,h.jsx)(i.default,{theme:(0,s.canEditLabel)()?"chat-checkbox":void 0,image:a,primary:n,secondary:l.default.t(678,{count:parseInt(f.count||0,10),_plural:parseInt(f.count||0,10)})})}{const e=(0,d.renderLabelSvg)(f.hexColor),t=(0,h.jsx)(r.EmojiText,{text:f.name,ellipsify:!0,titlify:!0});return(0,h.jsx)(i.default,{theme:"label-selection",image:e,primary:t})}};var i=n(a(44356)),r=a(65417),s=a(57701),l=n(a(43725)),o=a(16770),d=a(84543),u=n(a(59909)),c=a(19529),h=a(85893)},67901:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{shouldScrollIntoViewAndSelect:t,selectedLabels:a,onMultiSelect:n,renderContext:f,onLabelClick:p,initialLabelState:m={}}=e,[g,v]=(0,i.useState)((()=>o.LabelCollection.toArray())),x=(0,i.useRef)(null),C=(e,t,i)=>{a&&a.setVal(e,t,i),n&&n(e.id)};return(0,c.useListener)(o.LabelCollection,"add remove",((e,a,n)=>{if(v(o.LabelCollection.toArray()),n.add&&t){const{shouldScrollIntoView:a,shouldSelect:n}=t(e.name);a&&x.current&&x.current.scrollIntoView({behavior:"smooth"}),n&&C(e,!0,!1)}})),(0,h.jsx)("div",{children:(()=>{const t=e.SelectableState||new u.default(!0);return(s.GK.supportsFeature(s.GK.F.MD_BACKEND)?[...g].sort(((e,t)=>{const a=parseInt(e.id,10),n=parseInt(t.id,10);return isNaN(a)||isNaN(n)?0:a-n})):g).reduce(((e,n,i)=>{const s=o.LabelCollection.assertGet(n.id);if(!n.name)return e;const u="label-selection"===f||(0,l.canEditLabel)()?(0,h.jsx)(r.default,{theme:f,model:s,initialSelection:m[n.id]||0,multiSelection:a,selectableState:t,onSelect:C,children:(0,h.jsx)(d.default,{label:n.id})}):(0,h.jsx)(d.default,{label:n.id,theme:f});return[...e,(0,h.jsx)("div",{ref:i===g.length-1?x:()=>{},onClick:p?p.bind(null,n.id):()=>{},children:u},`label_item_${n.id}`)]}),[])})()})};var i=a(67294),r=n(a(61837)),s=a(7293),l=a(57701),o=a(16770),d=n(a(26383)),u=n(a(49905)),c=a(19529),h=a(85893)},77338:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{userIsCartOwner:t,orderId:a,token:n,sellerJid:i,onProductDetail:R,onOrderCreate:N,ownerHasReviewed:F,chat:B,orderMessage:U,onOrderCancel:H,isPushed:G=!0}=e,[V,W]=(0,o.useState)(!0),[z,q]=(0,o.useState)("PENDING"),[K,Y]=(0,o.useState)(null),[Q,X]=(0,o.useState)(""),Z=(0,L.default)((()=>new _.default));(0,o.useEffect)((()=>{I.OrderCollection.findOrder(a,i,n).then((e=>{W(!1),q("SUCCESS"),Y(e),G&&((0,E.qplAnnotateOrderView)((null==e?void 0:e.products.length)||0),(0,E.qplEndOrderView)(k.QuickLogActionType.SUCCESS))})).catch((0,r.filteredCatch)(A.E404,(()=>{c.Cmd.openModal((0,D.jsx)(h.default,{onOK:()=>{c.Cmd.closeModal()},okText:j.default.t(1764),children:j.default.t(1002)})),W(!1),q("ERROR"),(0,E.qplDropOrderView)()}))).catch((()=>{W(!1),q("ERROR"),__LOG__(4,!0,new Error,!0)`Catalog Order Display failed`,SEND_LOGS("OrderDetails: failed to display"),G&&(0,E.qplEndOrderView)(k.QuickLogActionType.FAIL)}))}),[]);const J=()=>{c.Cmd.closeDrawerRight()},$=()=>{if(J(),null!=U){const e=j.default.t(999)+"\n"+Q;(0,P.sendTextMsgToChat)(B,e,{quotedMsg:new T.Msg(U)})}c.Cmd.openChatFromUnread(B)},ee=()=>{if(!(0,y.orderDetailsFromCartEnabled)()||F)return null;if(!(0,O.createUserWid)(i).equals((0,S.getMaybeMeUser)()))return null;const e=null==K?void 0:K.products.some((e=>null==e.price));return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(x.default,{children:(0,D.jsx)(g.default,{disabled:e,a8nText:"order-create",color:"dark",onClick:()=>N((0,s.default)(K,"order")),children:j.default.t(995)})}),(0,D.jsx)(x.default,{children:(0,D.jsx)(g.default,{a8nText:"order-decline",color:"dark",onClick:H,children:j.default.t(997)})})]})};return(0,D.jsxs)(p.default,{theme:"striped",onDrop:J,children:[(0,D.jsx)(v.DrawerHeader,{title:t?l.default._("Your sent cart",null,{hk:"2NjAs4"}):j.default.t(271),type:v.DRAWER_HEADER_TYPE.SMALL,onBack:J}),(0,D.jsx)(m.default,{flatListControllers:[Z.current],children:(()=>{if(V||null==K)return(0,D.jsx)(C.default,{fetchState:z});let e="";e=K.products.length>0?j.default.t(678,{count:K.totalItemCount||0,_plural:K.totalItemCount||0}):j.default.t(1012);const t=(0,D.jsx)(M.TextDiv,{theme:"title",children:e});let a=null;a=null!=K.total&&0!==K.total?j.default.t(1007,{subtotal:f.formatAmount1000(K.currency,K.total)}):j.default.t(994);const n=(0,D.jsx)(M.TextDiv,{theme:"muted-small",children:a});let r=null;if(null!=K.createdAt){const e=u.Clock.timeStr(K.createdAt);r=(0,D.jsx)(M.TextSpan,{theme:"muted-small",children:`${e}`})}return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(x.default,{children:[(0,D.jsx)(C.default,{fetchState:z}),(0,D.jsxs)("div",{className:d.default.info,children:[t,n]}),(0,D.jsx)(w.default,{flatListController:Z.current,onProductDetail:R,order:K,sellerJid:i}),(0,D.jsx)("div",{className:d.default.date,children:r}),F?(0,D.jsx)("div",{className:d.default.composerWrapper,children:(0,D.jsx)(b.default,{chat:B,onChange:X,onSubmit:$,value:Q,placeholder:l.default._("Add a cancelation note",null,{hk:"22DPGj"})})}):null]}),ee()]})})()})]})};var r=a(50796),s=i(a(45095)),l=i(a(48360)),o=a(67294),d=i(a(13274)),u=a(22683),c=a(88102),h=i(a(52665)),f=n(a(74764)),p=i(a(60453)),m=i(a(69637)),g=i(a(64738)),v=a(94790),x=i(a(33308)),C=i(a(61055)),_=i(a(30855)),S=a(99234),y=a(57701),j=i(a(43725)),E=a(82145),T=a(17304),I=a(84312),b=i(a(96152)),w=i(a(33865)),k=a(48870),P=a(5524),M=a(13923),L=i(a(59552)),A=a(77591),O=a(58021),D=a(85893)},55720:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(81109)),s=a(28298),l=i(a(48360)),o=a(67294),d=(i(a(56720)),a(88102)),u=n(a(74764)),c=i(a(60453)),h=i(a(69637)),f=a(94790),p=i(a(33308)),m=a(29623),g=i(a(43725)),v=i(a(31820)),x=a(70239),C=a(70372),_=a(59789),S=a(30699),y=i(a(18985)),j=i(a(42116)),E=i(a(82240)),T=i(a(96152)),I=i(a(19028)),b=a(73150),w=a(13923),k=a(58021),P=a(85893);function M(e){let{children:t}=e;return(0,P.jsx)(w.TextSpan,{color:"secondary",size:"16",children:t})}const L={orderProductSummaryContainer:{marginTop:"jdreu547",marginEnd:"jnwc1y2a",marginBottom:"n5a6z3tu",marginStart:"svoq16ka"},orderFieldsValueContainer:{gap:"od95x2mx"},orderFieldsContainer:{gap:"sxkbojvh"}};function A(e,t){const{chat:a,order:n}=e,[i,A]=(0,I.default)(n.id),[O,D]=i(_.PERCENTAGE_SYMBOL),[R,N]=i(_.PERCENTAGE_SYMBOL),[F,B]=i(""),[U,H]=i(""),[G,V]=i(""),[W,z]=i(""),[q,K]=(0,o.useState)({discount:void 0,shipping:void 0,tax:void 0});(0,C.useShowToastErrors)(q);const Y=u.formatAmount1000(n.currency,n.subtotal),Q=n.subtotal/_.DEFAULT_OFFSET,{total:X,tax:Z,discount:J,shipping:$}=(0,_.calculateFlatAmounts)({orderSubtotal:Q,discountType:O,discountText:F,taxType:R,taxText:G,shippingText:U}),ee=u.formatAmount1000(n.currency,X),te=n.orderItemCollection.toArray();return(0,P.jsxs)(c.default,{onDrop:e.onBack,ref:t,children:[(0,P.jsx)(f.DrawerHeader,{title:g.default.t(996),onBack:e.onBack,type:f.DRAWER_HEADER_TYPE.SMALL}),(0,P.jsxs)(h.default,{children:[(0,P.jsx)(p.default,{xstyle:[s.uiPadding.top20,s.uiPadding.horiz16,s.uiPadding.bottom15],theme:"refresh-padding-title",children:(0,P.jsxs)(y.default,{children:[(0,P.jsx)(j.default,{sellerWid:(0,k.createWid)(n.sellerJid),orderStatus:(0,P.jsx)(E.default,{})}),(0,P.jsx)(m.FlexColumn,{align:"stretch",xstyle:L.orderProductSummaryContainer,children:(0,P.jsx)(S.OrderDetailProductSummary,{productMediaData:te[0].mediaData,totalItemCount:n.totalItemCount,productItems:te,onClick:()=>{var t;null===(t=e.onProductSummaryClick)||void 0===t||t.call(e,te)}})}),(0,P.jsxs)(m.FlexRow,{justify:"all",children:[(0,P.jsx)(M,{children:l.default._("Subtotal",null,{hk:"4ciFet"})}),(0,P.jsx)(M,{children:Y})]}),(0,P.jsxs)(m.FlexColumn,{align:"stretch",xstyle:L.orderFieldsContainer,children:[(0,P.jsxs)(m.FlexRow,{justify:"all",align:"center",children:[(0,P.jsx)(M,{children:l.default._("Discount",null,{hk:"1Ujmwj"})}),(0,P.jsxs)(m.FlexRow,{xstyle:L.orderFieldsValueContainer,children:[(0,P.jsx)(x.OrderDetailAmountTypeSelector,{currency:n.currency,value:O,onChange:e=>{let{value:t}=e;D(t)}}),(0,P.jsx)(v.default,{currency:n.currency,value:F,onChange:e=>{let{value:t,error:a}=e;B(t),K((e=>(0,r.default)((0,r.default)({},e),{},{discount:a})))},getErrorMessage:(0,C.getErrorMessageHandler)({fieldType:O,maxFlatValue:Q,errorMessageBigFlatValue:l.default._("Discount must be less than subtotal",null,{hk:"3SuWx5"}),errorMessageBigPercentageValue:l.default._("Discount can't be bigger than 100%",null,{hk:"3BYzEJ"})})})]})]}),(0,P.jsxs)(m.FlexRow,{justify:"all",align:"center",children:[(0,P.jsx)(M,{children:l.default._("Shipping",null,{hk:"1bRWJs"})}),(0,P.jsx)(v.default,{currency:n.currency,value:U,onChange:e=>{let{value:t,error:a}=e;H(t),K((e=>(0,r.default)((0,r.default)({},e),{},{shipping:a})))},getErrorMessage:(0,C.getErrorMessageHandler)()})]}),(0,P.jsxs)(m.FlexRow,{justify:"all",align:"center",children:[(0,P.jsx)(M,{children:l.default._("Taxes",null,{hk:"1oHHVR"})}),(0,P.jsxs)(m.FlexRow,{xstyle:L.orderFieldsValueContainer,children:[(0,P.jsx)(x.OrderDetailAmountTypeSelector,{currency:n.currency,value:R,onChange:e=>{let{value:t}=e;N(t)}}),(0,P.jsx)(v.default,{currency:n.currency,value:G,onChange:e=>{let{value:t,error:a}=e;V(t),K((e=>(0,r.default)((0,r.default)({},e),{},{tax:a})))},getErrorMessage:(0,C.getErrorMessageHandler)({fieldType:R,maxFlatValue:Q,errorMessageBigPercentageValue:l.default._("Tax can't be bigger than 100%",null,{hk:"2g92zI"}),errorMessageBigFlatValue:l.default._("Tax must be less than subtotal",null,{hk:"2YiByH"})})})]})]})]})]})}),(0,P.jsxs)(p.default,{xstyle:[s.uiPadding.top20,s.uiPadding.horiz16],theme:"refresh-padding-title",children:[(0,P.jsxs)(m.FlexRow,{justify:"all",children:[(0,P.jsx)(w.TextSpan,{theme:"title",weight:"medium",children:l.default._("Total",null,{hk:"7xRrT"})}),(0,P.jsx)(w.TextSpan,{theme:"title",weight:"medium",children:ee})]}),(0,P.jsx)(T.default,{chat:e.chat,placeholder:l.default._("Add a note",null,{hk:"1wBSMx"}),value:W,onChange:z,onSubmit:function(){A(),(0,b.sendOrderDetailsMessageAsMerchant)({order:n,chat:a,orderNote:W,offset:_.DEFAULT_OFFSET,total:X,discount:J,shipping:$,tax:Z}),d.Cmd.closeDrawerRight()},buttonTitle:g.default.t(996),a8nTextButton:"order-create-button",disabled:(0,C.anyFieldHasError)(q)})]})]})]})}var O=(0,o.forwardRef)(A);t.default=O},31820:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{value:t,currency:a,onChange:n,getErrorMessage:i}=e;const l=h(t,a,i),o=(0,u.default)(l),p=(0,u.default)(t);return(0,r.useEffect)((()=>{(null==p&&null!=l||p===t&&o!==l)&&n({value:t,error:l})}),[l]),(0,c.jsx)("div",{className:(0,s.default)(f),children:(0,c.jsx)(d.TextInput,{managed:!0,constrainedWidth:!0,hideFloatingLabel:!0,placeholder:"0",value:t,theme:"small",maxLength:12,customStyleThemes:["disabledLabel","noErrorInfo"],onChange:e=>{n({value:e,error:h(e,a,i)})},error:l})})};var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=a(74764),o=a(59789),d=a(90011),u=n(a(41502)),c=a(85893);function h(e,t,a){if(!(0,l.validatePriceString)(t,e))return i.default._("Enter a valid number",null,{hk:"2i2FVR"});const n=(0,l.valueFromString)(t,e)/o.DEFAULT_OFFSET;return n<0?i.default._("Enter a positive number",null,{hk:"V2XZe"}):a(n)}const f={textAlign:"ljrqcn24",width:"mh8l8k0y",overflowX:"gfz4du6o",overflowY:"r7fjleex",marginTop:"obt84bhp"}},70239:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDetailAmountTypeSelector=function(e){let{value:t,onChange:a,currency:n}=e;const i=l.formatLocalSymbol(n),c=r.default._("Select amount type",null,{hk:"1xddkG"}),h=[{id:"percentage",label:r.default._("by Percentage ({percentage-symbol})",[r.default._param("percentage-symbol",o.PERCENTAGE_SYMBOL)],{hk:"3fQwM3"}),value:o.PERCENTAGE_SYMBOL},{id:"flat-amount",label:r.default._("by Flat amount ({currency-symbol})",[r.default._param("currency-symbol",i)],{hk:"duPhj"}),value:i}],f=(0,s.useMemo)((()=>h.findIndex((e=>e.value===t))),[]);return(0,u.jsx)(d.default,{"aria-label":c,options:h,defaultIndex:f,onChange:a})};var r=i(a(48360)),s=a(67294),l=n(a(74764)),o=a(59789),d=i(a(43369)),u=a(85893)},80456:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(28298),s=i(a(48360)),l=a(67294),o=(i(a(56720)),n(a(74764))),d=i(a(60453)),u=i(a(69637)),c=i(a(64738)),h=a(94790),f=i(a(33308)),p=a(29623),m=a(30699),g=i(a(18985)),v=i(a(42116)),x=i(a(82240)),C=a(88998),_=i(a(23217)),S=a(13923),y=i(a(27968)),j=a(85893);function E(e){let{children:t}=e;return(0,j.jsx)(S.TextSpan,{color:"secondary",children:t})}const T={orderProductSummaryContainer:{marginTop:"jdreu547",marginEnd:"jnwc1y2a",marginBottom:"n5a6z3tu",marginStart:"svoq16ka"},fieldContainer:{gap:"fbvzomvk"}};function I(e,t){const{chat:a,orderInfo:n,sellerWid:i}=e,{referenceId:I,discount:b,tax:w,shipping:k,subtotal:P,totalAmount:M}=n,L=(0,y.default)(i),A=(0,l.useMemo)((()=>{const e=(0,C.findOrderStatusMessage)(a,I),t=null!=e?(0,C.getOrderStatusInfo)(e):null;return null==t?void 0:t.status}),[a,I]);if(null==L||null==P)return null;const O=L.productCollection.getProductModels().reduce(((e,t)=>(e[t.id.toString()]=t,e)),{}),D=n.items.map((e=>{var t,a;const i=null!=e.amount?1e3*e.amount:null;return{id:e.id,name:e.name,quantity:e.quantity,price:i,currency:n.currency,mediaData:null===(t=O[e.id])||void 0===t||null===(a=t.getPreviewImage())||void 0===a?void 0:a.mediaData}}));return(0,j.jsxs)(d.default,{onDrop:e.onBack,ref:t,children:[(0,j.jsx)(h.DrawerHeader,{title:s.default._("Order details",null,{hk:"2HeBLz"}),onBack:e.onBack,type:h.DRAWER_HEADER_TYPE.SMALL}),(0,j.jsxs)(u.default,{children:[(0,j.jsx)(f.default,{xstyle:[r.uiPadding.top20,r.uiPadding.horiz16,r.uiPadding.bottom15],children:(0,j.jsxs)(g.default,{children:[(0,j.jsx)(v.default,{orderId:n.referenceId,sellerWid:i,orderStatus:(0,j.jsx)(x.default,{orderStatus:A})}),(0,j.jsx)(p.FlexColumn,{align:"stretch",xstyle:T.orderProductSummaryContainer,children:(0,j.jsx)(m.OrderDetailProductSummary,{productMediaData:D[0].mediaData,totalItemCount:n.quantity,productItems:D,onClick:()=>{var t;null===(t=e.onProductSummaryClick)||void 0===t||t.call(e,D)}})}),(0,j.jsxs)(p.FlexColumn,{align:"stretch",xstyle:T.fieldContainer,children:[(0,j.jsxs)(p.FlexRow,{justify:"all",children:[(0,j.jsx)(E,{children:s.default._("Subtotal",null,{hk:"4ciFet"})}),(0,j.jsx)(E,{children:o.formatAmount(n.currency,P)})]}),null!=b?(0,j.jsxs)(p.FlexRow,{justify:"all",children:[(0,j.jsx)(E,{children:s.default._("Discount",null,{hk:"ITgTG"})}),(0,j.jsx)(E,{children:o.formatAmount(n.currency,-b)})]}):null,null!=k?(0,j.jsxs)(p.FlexRow,{justify:"all",children:[(0,j.jsx)(E,{children:s.default._("Shipping",null,{hk:"269x6X"})}),(0,j.jsx)(E,{children:o.formatAmount(n.currency,k)})]}):null,null!=w?(0,j.jsxs)(p.FlexRow,{justify:"all",children:[(0,j.jsx)(E,{children:s.default._("Tax",null,{hk:"1ZWlTS"})}),(0,j.jsx)(E,{children:o.formatAmount(n.currency,w)})]}):null]}),(0,j.jsxs)(p.FlexRow,{justify:"all",children:[(0,j.jsx)(S.TextSpan,{theme:"title",children:s.default._("Total",null,{hk:"7xRrT"})}),(0,j.jsx)(S.TextSpan,{theme:"title",children:o.formatAmount(n.currency,M)})]})]})}),(0,j.jsx)(f.default,{children:(0,j.jsx)(c.default,{icon:(0,j.jsx)(_.default,{color:"teal",width:20,name:"status-ciphertext"}),a8nText:"order-status-update",color:"dark",onClick:()=>{var t;null===(t=e.onOrderStatusUpdateClick)||void 0===t||t.call(e)},children:s.default._("Update order status",null,{hk:"2OKVmc"})})})]})]})}var b=(0,l.forwardRef)(I);t.default=b},70372:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.anyFieldHasError=function(e){for(const t in e)if(null!=e[t])return!0;return!1},t.getErrorMessageHandler=function(){let{fieldType:e,maxFlatValue:t,errorMessageBigPercentageValue:a,errorMessageBigFlatValue:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(i){if(e===l.PERCENTAGE_SYMBOL){if(null!=a&&i>100)return a}else if(null!=t&&null!=n&&i>t)return n}},t.useShowToastErrors=function(e){(0,r.useEffect)((()=>{for(const t in e){const a=e[t];null!=a&&s.Cmd.openToast((0,d.jsx)(o.Toast,{duration:1e4,id:t+a.toString(),msg:a,action:{actionText:i.default._("OKAY",null,{hk:"24jI97"}),dismiss:!0,theme:"success"}}))}}),[e])};var i=n(a(48360)),r=a(67294),s=a(88102),l=a(59789),o=a(50452),d=a(85893)},59789:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERCENTAGE_SYMBOL=t.DEFAULT_OFFSET=void 0,t.calculateFlatAmounts=function(e){let{orderSubtotal:t,discountType:a,discountText:n,taxType:l,taxText:o,shippingText:d}=e;const u=s({type:a,value:n,total:t}),c=s({type:l,value:o,total:t-(null!=u?u:0)}),h=r(d),f=t-(null!=u?u:0)+(null!=h?h:0)+(null!=c?c:0);return{total:Math.trunc(f*i),tax:null==c?null:Math.trunc(c*i),shipping:null==h?null:Math.trunc(h*i),discount:null==u?null:Math.trunc(u*i)}};var n=a(74764);t.PERCENTAGE_SYMBOL="%";const i=1e3;function r(e){if(""===e)return null;const t=(0,n.valueFromString)("USD",e)/i;return Number.isNaN(t)?0:t}function s(e){let{type:t,value:a,total:n}=e;const i=r(a);return null==i?null:"%"===t?i/100*n:i}t.DEFAULT_OFFSET=i},39049:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{productItems:t}=e,a=t.map((e=>({itemKey:e.id.toString(),product:e})));return(0,l.jsx)(r.default,{flatListControllers:[e.flatListController],children:(0,l.jsx)(i.FlatList,{a8nKey:"order-detail-product-list",flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:a,renderItem:function(e){let{product:t}=e;return(0,l.jsx)(s.default,{product:t})},defaultItemHeight:60})})};var i=a(47915),r=n(a(44942)),s=n(a(20329)),l=a(85893)},32488:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=(n(a(56720)),n(a(60453))),l=n(a(69637)),o=a(94790),d=n(a(33308)),u=n(a(30855)),c=n(a(39049)),h=n(a(59552)),f=a(85893);const p={container:{paddingTop:"emrlamx0",paddingEnd:"folpon7g",paddingBottom:"aiput80m",paddingStart:"lyvj5e2u"}};function m(e,t){const{productItems:a}=e,n=(0,h.default)((()=>new u.default));return(0,f.jsxs)(s.default,{onDrop:e.onBack,ref:t,children:[(0,f.jsx)(o.DrawerHeader,{title:i.default._("Items",null,{hk:"3B8pMI"}),onBack:e.onBack,type:o.DRAWER_HEADER_TYPE.SMALL}),(0,f.jsx)(l.default,{flatListControllers:[n.current],children:(0,f.jsx)(d.default,{xstyle:p.container,theme:"refresh-padding-title",children:(0,f.jsx)(c.default,{flatListController:n.current,productItems:a})})})]})}var g=(0,r.forwardRef)(m);t.default=g},20329:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t}=e,a=(0,f.jsx)(d.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),n=t.mediaData?(0,f.jsx)(c.ProductThumb,{mediaData:t.mediaData,theme:"squareThumb"}):null;let i=null;if(t.quantity){const e=u.default.t(1008,{quantity:t.quantity.toString()});i=(0,f.jsx)(h.TextSpan,{children:e})}let p=null;p=(0,s.isNonZeroNumber)(t.price)?o.formatAmount1000(t.currency,t.price):r.default._("Ask for price",null,{hk:"2Rtbeg"});const m=(0,f.jsx)(h.TextSpan,{children:p});return(0,f.jsx)(l.default,{image:n,customImage:!0,primary:a,secondary:i,detail:m,theme:"media"})};var r=i(a(48360)),s=a(29984),l=i(a(44356)),o=n(a(74764)),d=a(65417),u=i(a(43725)),c=a(3013),h=a(13923),f=a(85893)},59322:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{label:t,isCanceled:a,checked:n,onClick:c}=e;return(0,d.jsx)(o.default,{onClick:c,children:(0,d.jsxs)(l.FlexRow,{children:[(0,d.jsx)(l.FlexColumn,{xstyle:i.uiPadding.horiz24,children:(0,d.jsx)(s.default,{checked:n,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:()=>{c()}})}),(0,d.jsx)("div",{className:a?(0,r.default)(u):null,children:t})]})})};var i=a(28298),r=n(a(56720)),s=n(a(9275)),l=a(29623),o=n(a(1784)),d=a(85893);const u={color:"knq0292r"}},18985:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t}=e;return(0,l.jsx)(s.FlexColumn,{xstyle:o.container,align:"stretch",children:i.Children.map(t,((e,t)=>(0,l.jsxs)(l.Fragment,{children:[0!==t?(0,l.jsx)("div",{className:(0,r.default)(o.separator)}):null,e]})))})};var i=a(67294),r=n(a(56720)),s=a(29623),l=a(85893);const o={container:{gap:"mqqyhd6v"},separator:{height:"bbl9m3t3",borderTop:"iupwfssi"}}},43369:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{defaultIndex:t=0,options:a,onChange:n,"aria-label":f}=e;const p=(0,i.useRef)(null),[m,g]=(0,i.useState)(!1),[v,x]=(0,i.useState)(t),C=a.map(((e,t)=>{const{id:a,label:i}=e;return(0,c.jsx)(l.DropdownItem,{a8n:`mi-${a}`,action:()=>{n(e),x(t)},children:(0,c.jsx)("div",{className:(0,r.default)(h),role:"button","aria-label":i,children:t===v?(0,c.jsx)(o.TextSpan,{weight:"bold",children:i}):i})},a)}));return(0,c.jsxs)("div",{ref:p,children:[(0,c.jsx)(s.default,{"aria-label":f,postfixIcon:"down",label:a[v].value,onClick:()=>g((e=>!e))}),m&&p.current&&(0,c.jsx)(d.UIE,{displayName:"ValuePicker",escapable:!0,popable:!0,requestDismiss:()=>g(!1),children:(0,c.jsx)(u.default,{contextMenu:{menu:C,anchor:p.current}})})]})};var i=a(67294),r=n(a(56720)),s=n(a(72332)),l=a(71174),o=a(13923),d=a(18644),u=n(a(24717)),c=a(85893);const h={boxSizing:"cm280p3y",color:"tviruh8d",cursor:"ajgl1lbb",fontSize:"f8jlpxt4",height:"lniyxyh2",lineHeight:"gz7w46tb",overflowX:"gfz4du6o",overflowY:"r7fjleex",paddingStart:"sta02ykp",paddingEnd:"pnfw7ual",paddingTop:"lqdozo90",textOverflow:"lhj4utae",whiteSpace:"le5p0ye3",position:"g0rxnol2"}},42116:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{orderId:t,orderStatus:a,sellerWid:n}=e;const c=r.ContactCollection.get(n),h=c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.FlexRow,{children:(0,d.jsx)(s.DetailImage,{id:n,size:48})}),(0,d.jsxs)(l.FlexColumn,{align:"center",children:[(0,d.jsx)(o.TextDiv,{theme:"large",weight:"medium",children:c.name}),null!=t?(0,d.jsx)(o.TextDiv,{color:"secondary",weight:"medium",xstyle:u.uppercase,children:i.default._("order #{order-id}",[i.default._param("order-id",t)],{hk:"83OWH"})}):null]})]}):null;return(0,d.jsxs)(l.FlexColumn,{align:"center",xstyle:u.container,children:[h,a]})};var i=n(a(48360)),r=(n(a(56720)),a(19380)),s=a(88984),l=a(29623),o=a(13923),d=a(85893);const u={container:{gap:"nypubj7v"},uppercase:{textTransform:"ofejerhi"}}},82240:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=null!==(t=e.orderStatus)&&void 0!==t?t:r.OrderStatus.Pending;return(0,o.jsxs)(l.TextDiv,{color:c(a),theme:"small",xstyle:d.container,children:[h(a),u(a)]})};var i=n(a(48360)),r=(n(a(56720)),a(88998)),s=n(a(23217)),l=a(13923),o=a(85893);const d={container:{backgroundColor:"i16jpgpt",display:"i86elurf",alignItems:"gndfcl4n",fontSize:"dsh4tgtl",paddingTop:"i5tg98hk",paddingEnd:"ft2m32mm",paddingBottom:"przvwfww",paddingStart:"k4wy2cgb",borderTopStartRadius:"g130k69c",borderTopEndRadius:"k1a7joe8",borderBottomEndRadius:"dc5qina8",borderBottomStartRadius:"kfr1vweg"},icon:{marginEnd:"mw4yctpw"},iconCipherText:{marginTop:"dwvzf427"}};function u(e){switch(e){case r.OrderStatus.Pending:return i.default._("Order pending",null,{hk:"48mrpL"});case r.OrderStatus.Processing:return i.default._("Order processing",null,{hk:"2FG2h5"});case r.OrderStatus.Shipped:return i.default._("Order shipped",null,{hk:"4xQ2oP"});case r.OrderStatus.Canceled:return i.default._("Order canceled",null,{hk:"D1VVa"});case r.OrderStatus.Complete:return i.default._("Order complete",null,{hk:"1BMhS6"})}}function c(e){switch(e){case r.OrderStatus.Pending:case r.OrderStatus.Processing:case r.OrderStatus.Shipped:return;case r.OrderStatus.Canceled:return"danger";case r.OrderStatus.Complete:return"success"}}function h(e){switch(e){case r.OrderStatus.Pending:case r.OrderStatus.Processing:return(0,o.jsx)(s.default,{width:12,name:"status-ciphertext",display:"inline",xstyle:[d.icon,d.iconCipherText]});case r.OrderStatus.Shipped:return(0,o.jsx)(s.default,{width:12,name:"local-shipping",display:"inline",xstyle:d.icon});case r.OrderStatus.Canceled:return(0,o.jsx)(s.default,{width:12,name:"alert-error",display:"inline",xstyle:d.icon});case r.OrderStatus.Complete:return(0,o.jsx)(s.default,{width:12,name:"action-check-circle",display:"inline",xstyle:d.icon})}}},96152:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.default,{transitionName:"media-caption",className:(0,r.default)(h),children:(0,c.jsx)(l.default,{chat:e.chat,maxLength:s.default.MAX_CART_MESSAGE_LENGTH,placeholder:e.placeholder,value:e.value,onEnter:()=>{!0!==e.disabled&&e.onSubmit()},onChange:t=>{e.onChange(t)},multiline:!0,showRemaining:!0,spellCheck:!0,supportsEmoji:!0})}),(0,c.jsx)(u.default,{transitionAppear:!0,transitionName:"btn",children:(0,c.jsx)("button",{disabled:e.disabled,"data-a8n":i.default.key(e.a8nTextButton),className:(0,r.default)(f),tabIndex:"-1",onClick:()=>e.onSubmit(),title:e.buttonTitle,children:(0,c.jsx)(o.Round,{disabled:e.disabled,children:(0,c.jsx)(d.default,{width:18,name:"send",directional:!0})})})})]})};var i=n(a(99964)),r=n(a(56720)),s=n(a(69618)),l=n(a(3028)),o=a(82857),d=n(a(23217)),u=n(a(41956)),c=a(85893);const h={display:"p357zi0d",flexDirection:"f8m0rgwh",width:"ln8gz9je",zIndex:"mb8var44",position:"g0rxnol2",marginBottom:"mggyuyyy"},f={color:"svlsagor",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",opacity:"axi1ht8l",paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",position:"lhggkp7q",right:"q82cfhbg",bottom:"efio351b",textAlign:"qfejxiq4"}},19028:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let a=0;i[e]=null!==(t=i[e])&&void 0!==t?t:{};return[function(t){const r=a++,s=i[e].hasOwnProperty(r)?i[e][r]:t,[l,o]=(0,n.useState)(s);return[l,function(t){"function"!=typeof t&&(i[e][r]=t),o(t)}]},(0,n.useCallback)((function(){delete i[e]}),[e])]};var n=a(67294);const i={}},33865:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{order:t,onProductDetail:a,sellerJid:n}=e,f=e=>{const a=t.orderItemCollection.toArray();return(0,o.logOrderListImpression)({catalogContext:e,orderId:t.id,productCount:a.length,catalogOwnerJid:n}),a.map((e=>({itemKey:e.id.toString(),product:e})))};return(0,h.jsx)(r.DrawerContext.Consumer,{children:t=>{const n=(0,c.getProductCatalogContext)(t);return(0,h.jsx)(l.default,{flatListControllers:[e.flatListController],children:(0,h.jsx)(s.FlatList,{a8nKey:"order-product-list",flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:f(n),renderItem:t=>((t,n)=>{const{sellerJid:i}=e,{product:r}=t,s={productId:r.id,businessOwnerJid:i};return(0,h.jsx)(u.default,{product:r,onClick:()=>{(0,d.qplStartProductView)("Order"),(0,o.logOrderListItemClick)({catalogContext:n,orderId:e.order.id,catalogOwnerJid:i}),a(s)}})})(t,n),defaultItemHeight:i.default.PRODUCT_LIST_ITEM_HEIGHT})})}})};var i=n(a(69618)),r=a(27394),s=a(47915),l=n(a(44942)),o=a(79544),d=a(82145),u=n(a(7714)),c=a(97567),h=a(85893)},7714:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,onClick:a}=e,n=(0,p.jsx)(d.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),i=(0,p.jsx)(h.ProductThumb,{mediaData:t.mediaData,theme:"list"}),m=u.default.t(1008,{quantity:t.quantity.toString()});let g=null;t.quantity&&(g=(0,p.jsx)(f.TextSpan,{className:c.default.quantity,children:m}));let v=null;v=(0,s.isNonZeroNumber)(t.price)?o.formatAmount1000(t.currency,t.price):r.default._("Ask for price",null,{hk:"2Rtbeg"});const x=(0,p.jsx)(f.TextSpan,{className:c.default.price,children:v});let C=null;null!=g&&(C=(0,p.jsx)("span",{className:c.default.separator,children:""}));const _=(0,p.jsxs)("div",{children:[x,C,g]});return(0,p.jsx)(l.default,{image:i,customImage:!0,primary:n,secondary:_,theme:"order-product",onClick:a},t.id.toString())};var r=i(a(48360)),s=a(29984),l=i(a(44356)),o=n(a(74764)),d=a(65417),u=i(a(43725)),c=i(a(83221)),h=a(3013),f=a(13923),p=a(85893)},3607:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(28298),r=n(a(48360)),s=a(67294),l=(n(a(56720)),a(88102)),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=n(a(33308)),h=a(29623),f=a(59789),p=n(a(59322)),m=n(a(96152)),g=a(88998),v=a(43538),x=a(73150),C=a(85893);const _=[g.OrderStatus.Processing,g.OrderStatus.Shipped,g.OrderStatus.Complete,g.OrderStatus.Canceled],S={checkboxContainer:{gap:"n8lfltvd"}};function y(e,t){const[a,n]=(0,s.useState)(""),[y,j]=(0,s.useState)(g.OrderStatus.Processing),{chat:E,sellerJid:T,orderInfo:I}=e,b=r.default._("Add a note",null,{hk:"2nf5qm"});return(0,C.jsxs)(o.default,{onDrop:e.onBack,ref:t,children:[(0,C.jsx)(u.DrawerHeader,{title:r.default._("Update order status",null,{hk:"1inFTM"}),onBack:e.onBack,type:u.DRAWER_HEADER_TYPE.SMALL}),(0,C.jsxs)(d.default,{children:[(0,C.jsx)(c.default,{xstyle:[i.uiPadding.vert20,i.uiPadding.horiz16],theme:"refresh-padding-title",children:(0,C.jsx)(h.FlexColumn,{xstyle:S.checkboxContainer,children:_.map((function(e){return(0,C.jsx)(p.default,{label:v.OrderStatusLabels[e],isCanceled:e===g.OrderStatus.Canceled,checked:y===e,onClick:()=>{j(e)}},e)}))})}),(0,C.jsx)(c.default,{xstyle:[i.uiPadding.top8,i.uiPadding.horiz16],theme:"refresh-padding-title",children:(0,C.jsx)(m.default,{chat:e.chat,placeholder:b,value:a,onChange:n,onSubmit:function(){l.Cmd.closeDrawerRight(),(0,x.sendOrderStatusMessageAsMerchant)({chat:E,sellerJid:T,orderInfo:I,orderNote:a,orderStatus:y,offset:f.DEFAULT_OFFSET}),l.Cmd.openChatFromUnread(E)},buttonTitle:b,a8nTextButton:"order-status-update-button"})})]})]})}var j=(0,s.forwardRef)(y);t.default=j},91545:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogSettingsDrawer=function(e){const{onBack:t}=e,[a,n]=(0,s.useState)(!0),[l,u]=(0,s.useState)(!1),m=(0,I.default)();(0,s.useEffect)((()=>{(0,S.default)(o.BusinessProfileCollection.fetchBizProfile((0,x.getMeUser)()),m).then((e=>{const t=e.profileOptions;n(!1),u(null!=t&&t.cartEnabled)})).catch((0,i.catchAbort)((()=>{}))).catch((()=>{__LOG__(4,!0,new Error)`Error fetching the business profile.`,c.Cmd.openToast((0,b.jsx)(T.Toast,{msg:r.default._("Failed to load catalog settings.",null,{hk:"2UxoQh"}),duration:6e3,id:(0,T.genId)()})),t()}))}),[]);const g=e=>{u(e)};return(0,b.jsxs)(h.default,{theme:"catalog",onDrop:e.onBack,children:[(0,b.jsx)(p.DrawerHeader,{title:r.default._("Settings",null,{hk:"2RmHUB"}),type:p.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,b.jsx)(f.default,{children:a?(0,b.jsx)("div",{className:d.default.loadingSpinner,children:(0,b.jsx)(j.Spinner,{})}):(0,b.jsx)(w,{cartEnabled:l,setCartEnabled:g})})]})};var i=a(89385),r=n(a(48360)),s=a(67294),l=a(46977),o=a(93581),d=n(a(25738)),u=n(a(99360)),c=a(88102),h=n(a(60453)),f=n(a(69637)),p=a(94790),m=n(a(33308)),g=a(12591),v=a(96384),x=a(99234),C=n(a(43725)),_=n(a(56074)),S=n(a(84644)),y=n(a(25421)),j=a(11054),E=a(13923),T=a(50452),I=n(a(38080)),b=a(85893);function w(e){let{cartEnabled:t,setCartEnabled:a}=e;const n=e=>{a(e),(0,l.updateCartEnabled)(e).catch((()=>{__LOG__(4,!0,new Error,!0)`Failed to update cartEnabled value`,SEND_LOGS("updateCartEnabled: cartEnabled toggle error"),c.Cmd.openToast((0,b.jsx)(T.Toast,{msg:r.default._("Failed to update the setting.",null,{hk:"RZBg9"}),duration:6e3,id:(0,T.genId)()})),a(t)}))},i=(0,v.getCatalogCartOnOffFaqUrl)(),s=(0,b.jsx)(u.default,{href:i,onClick:e=>{e.preventDefault(),(0,g.openExternalLink)(i)},children:C.default.t(689)}),o=(0,b.jsx)(_.default,{id:283,params:{learn_more_link:s}});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(m.default,{title:r.default._("Add to cart",null,{hk:"1mbCt1"}),theme:"title-larger",animation:!1,children:[(0,b.jsx)(y.default,{isChosen:t,onChoose:()=>{n(!0)},choiceText:r.default._("On",null,{hk:"2m7e5W"})}),(0,b.jsx)(y.default,{isChosen:!t,onChoose:()=>{n(!1)},choiceText:r.default._("Off",null,{hk:"1l0P5X"})})]}),(0,b.jsx)(E.TextDiv,{theme:"plain",className:d.default.descriptionText,children:o})]})}},27968:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,r.useState)((()=>s.CatalogCollection.get(e))),n=(0,l.default)();return(0,r.useEffect)((()=>{const r=s.CatalogCollection.get(e);r!==t&&(null!=r?a(r):(0,i.default)((function*(){const t=yield s.CatalogCollection.find(e);n()&&a(t)}))())}),[e,t,n]),t};var i=n(a(48926)),r=a(67294),s=a(99989),l=n(a(88624))},65656:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selections:t,active:a,onSelectionChanged:n,catalog:d}=e,u=e=>{((e,i,r)=>{t.setVal(e,i,r),a.setVal(e,r),n()})(e,!t.isSelected(e),!1)};return(0,o.jsx)(s.default,{flatListControllers:[e.flatListController],children:(0,o.jsx)(r.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:d.productCollection.getProductModels(!0).map((e=>({itemKey:e.id.toString(),product:e}))),renderItem:e=>{const{product:n}=e;return(0,o.jsx)(l.default,{product:n,selections:t,onClick:()=>u(n),active:a},n.id.toString())},defaultItemHeight:i.default.PRODUCT_LIST_ITEM_HEIGHT})})};var i=n(a(69618)),r=a(47915),s=n(a(44942)),l=n(a(60809)),o=a(85893)},93870:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{catalog:a,collection:n,onBack:R}=e,N=(0,L.default)((()=>new b.default([],(e=>e.id.toString())))),F=(0,L.default)((()=>new y.default([],(e=>e.id.toString())))),B=(0,L.default)((()=>new x.default)),U=(0,M.default)(),H=(0,O.default)(),[G,V]=(0,o.useState)(null),[W,z]=(0,o.useState)(null),[q,K]=(0,o.useState)(null==n?void 0:n.name),[Y,Q]=(0,o.useState)(null==n?void 0:n.name),[X,Z]=(0,o.useState)(null),[J,$]=(0,o.useState)(!1),[ee,te]=(0,o.useState)(!0);(0,o.useEffect)((()=>{(()=>{const e=new u.CollectionsContentDataSource(a,h.default.PRODUCT_LIST_ITEM_HEIGHT,null==n?void 0:n.id),t=new u.CatalogListItemScrollHelper(e);V(e),z(t),e.loadInitialItems().then((()=>{if(H.aborted)throw new r.AbortError;te(!1),U()})).catch((0,r.catchAbort)((()=>{})))})()}),[]);const ae=e=>{K(e),Z(X&&e?null:X)},ne=(0,A.default)((e=>{const t=e.currentTarget;(null==W?void 0:W.willLoadMore(t))&&te(!0),null==W||W.onScroll(e,t).then((e=>{te(!1),e&&te(!1)})).catch((e=>{throw te(!1),e}))}),100),ie=function(){var e=(0,i.default)((function*(e){const t=(0,j.getProductCatalogContext)(e);if(q&&""!==q.trim()){E.QPL.markerStart(T.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT),$(!0);const{added:e,removed:i}=(()=>{const e=a.productCollection.getProductModels(!0),t=[],n=[];return e.forEach((e=>{const a=F.current.isSelected(e);e.checkmark!==a&&(a?n.push(e):t.push(e))})),{added:n,removed:t}})(),r=q!==Y;E.QPL.markerAnnotate(T.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,{bool:{IsNew:!n},int:{ProductsAdded:e.length}}),n&&E.QPL.markerAnnotate(T.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,{bool:{Renamed:r},int:{ProductsDeleted:i.length}});try{if(yield(0,d.handleCollectionSave)(a,n,q||"",e,i,t)){R();const a=null==n?void 0:n.id;a&&r&&((0,S.logCollectionRenamed)({catalogContext:t,collectionId:a}),Q(q)),n&&(0,S.logCollectionItemsAssignment)({collectionId:n.id,addedCount:e.length,removedCount:i.length,catalogContext:t}),E.QPL.markerEnd(T.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,E.QuickLogActionType.SUCCESS)}else $(!1),E.QPL.markerDrop(T.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT)}catch(e){$(!1),E.QPL.markerEnd(T.QuickLogMarkerId.WHATSAPP_COLLECTION_EDIT,E.QuickLogActionType.FAIL)}}else Z(l.default._("Name required",null,{hk:"1pvj2p"}))}));return function(){return e.apply(this,arguments)}}(),re=e=>{let t;const i=(()=>{const e=a.productCollection.getProductModels(!0);let t=0;return e.forEach((e=>{F.current.isInList(e)?e.checkmark!==F.current.isSelected(e)&&t++:F.current.setVal(e,e.checkmark)})),t})();if(i>0||n&&q!==n.name){const a=_.default.t(275,{updated:i,_plural:i});t=(0,D.jsxs)("div",{className:v.default.footer,children:[a,(0,D.jsx)("div",{className:v.default.saveButton,children:(0,D.jsx)(I.Round,{large:!0,onClick:()=>{ie(e)},children:(0,D.jsx)(k.default,{name:"checkmark-medium"})})})]})}return t},se=(0,s.default)(v.default.container,{[v.default.isSending]:J}),le=(null===(t=e.collection)||void 0===t?void 0:t.name)||l.default._("New collection",null,{hk:"4dusPd"});return(0,D.jsxs)(f.default,{theme:"products",onDrop:e.onBack,children:[(0,D.jsx)(g.DrawerHeader,{title:le,type:g.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,menu:(0,D.jsx)(D.Fragment,{})}),(0,D.jsx)(p.default,{className:se,flatListControllers:[B.current],onScroll:ne,children:(()=>{const e=J?(0,D.jsx)("div",{className:v.default.spinner,children:(0,D.jsx)(w.Spinner,{size:50,stroke:3})}):null;return(0,D.jsx)(m.DrawerContext.Consumer,{children:t=>{const i=(0,j.getProductCatalogContext)(t);return(0,D.jsxs)(D.Fragment,{children:[e,(0,D.jsxs)("div",{className:v.default.nameContainer,children:[(0,D.jsx)("span",{className:v.default.nameIcon,children:(0,D.jsx)(k.default,{name:"collections_folder"})}),(0,D.jsx)("span",{className:v.default.nameEdit,children:(0,D.jsx)(P.TextInput,{editable:!0,focusOnMount:!0,showRemaining:!0,value:q,onChange:ae,inputPlaceholder:l.default._("New collection",null,{hk:"2NAI33"}),theme:"text-input",error:X,maxLength:30})})]}),(0,D.jsx)("div",{className:v.default.operation,children:n?l.default._("Update Items",null,{hk:"2dT3Pu"}):l.default._("Add Items",null,{hk:"3NRr27"})}),(0,D.jsxs)("div",{className:v.default.listContainer,children:[(0,D.jsx)(c.default,{catalog:a,flatListController:B.current,active:N.current,selections:F.current,onSelectionChanged:()=>U()}),ee&&(0,D.jsx)("div",{className:v.default.loadingSpinner,children:(0,D.jsx)(C.default,{})})]}),re(i)]})}})})()})]})};var i=n(a(48926)),r=a(89385),s=n(a(94184)),l=n(a(48360)),o=a(67294),d=a(47217),u=a(71599),c=n(a(65656)),h=n(a(69618)),f=n(a(60453)),p=n(a(69637)),m=a(27394),g=a(94790),v=n(a(17543)),x=n(a(30855)),C=n(a(29796)),_=n(a(43725)),S=a(35054),y=n(a(26757)),j=a(97567),E=a(48870),T=a(27798),I=a(82857),b=n(a(87481)),w=a(11054),k=n(a(23217)),P=a(90011),M=n(a(59909)),L=n(a(59552)),A=n(a(88857)),O=n(a(38080)),D=a(85893)},65303:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ComplianceInfoFields=$,t.EditProductDrawerImpl=t.EditProductDrawer=void 0;var r=i(a(81109)),s=i(a(48926)),l=a(50796),o=i(a(45095)),d=i(a(94184)),u=i(a(48360)),c=a(67294),h=(i(a(56720)),a(47217)),f=i(a(39770)),p=a(99989),m=a(16593),g=a(88102),v=a(27105),x=a(95176),C=i(a(69618)),_=a(9978),S=a(79502),y=n(a(74764)),j=i(a(54896)),E=i(a(60453)),T=i(a(69637)),I=a(27394),b=a(94790),w=i(a(2894)),k=a(29623),P=a(99234),M=a(57701),L=i(a(3222)),A=i(a(43725)),O=a(84387),D=a(77975),R=a(9468),N=a(21374),F=a(97567),B=i(a(30327)),U=i(a(16932)),H=a(48870),G=a(27798),V=a(11054),W=i(a(65932)),z=a(13923),q=a(90011),K=a(50452),Y=a(2541),Q=a(77591),X=a(85893);const Z={complianceInfoHelpCenterBanner:{paddingTop:"nlnf8xo7",paddingEnd:"f9ovudaz",paddingBottom:"jzp2c175",paddingStart:"gx1rr48f"}};class J extends c.Component{constructor(e){var t;super(e),t=this,this._imagePanelRef=(0,c.createRef)(),this._handleNameChange=e=>{this.setState({name:e,nameError:""===e.trim()?u.default._("Add a title",null,{hk:"3QauyV"}):"",isModified:!0})},this._handlePriceChange=e=>{const t=y.valueFromString(this.state.currency,e);let a="";""===e||y.validatePriceString(this.state.currency,e,R.MIN_PRICE,R.MAX_PRICE)||(a=u.default._("Enter a valid price",null,{hk:"3JgcXg"})),this.setState({priceAmount1000:""===e?null:t,priceStr:`${e}`,priceError:a,isModified:!0})},this.handleDescriptionChange=e=>{this.setState({description:e,isModified:!0})},this._handleUrlChange=e=>{let t="";""===e||Y.URL.isValid(e)||(t=u.default._("URL is incorrect",null,{hk:"xiOtm"})),this.setState({url:e,urlError:t,isModified:!0})},this._handleUrlBlur=()=>{const{url:e}=this.state;""===e||Y.URL.isHttps(e)||Y.URL.isHttp(e)||this.setState({url:`https://${e}`})},this._handleRetailerIdChange=e=>{this.setState({retailerId:e,retailerIdError:"",isModified:!0})},this._showComplianceInfoImporterAddress=()=>{var e;const t=null===(e=this.state.complianceInfo)||void 0===e?void 0:e.countryCodeOrigin;return!!t&&![C.default.COMPLIANCE_INFO_CODES.INDIA,_.SyntheticCountryCode.NotApplicable].includes(t)},this._handleComplianceInfoChange=function(){var e=(0,s.default)((function*(e,a){var n;let i;const s=(0,r.default)((0,r.default)({},t.state.complianceInfo),{},{importerAddress:(0,r.default)({},null===(n=t.state.complianceInfo)||void 0===n?void 0:n.importerAddress)});"countryCodeOrigin"===e&&(i=a===String(_.SyntheticCountryCode.NotApplicable)?A.default.t(1076):yield(0,_.getCountryName)(a),s.countryNameOrigin=i,s.countryCodeOriginError=""),"importerName"===e&&(s.importerNameError=(0,x.existsField)(a,(0,P.getMeUser)())||!t.shouldComplianceBeHardEnforced()?"":A.default.t(1089)),s[e]=a||void 0,t.setState({complianceInfo:s,isModified:!0})}));return function(){return e.apply(this,arguments)}}(),this._getImporterAddressFieldValueOnChange=(e,t,a)=>{const{importerAddress:n}=this.state.complianceInfo||{};return t===e?a:n[e]},this._handleComplianceInfoImporterAddressChange=function(){var e=(0,s.default)((function*(e,a){var n;const i=t._getImporterAddressFieldValueOnChange("street1",e,a),s=t._getImporterAddressFieldValueOnChange("street2",e,a),l=t._getImporterAddressFieldValueOnChange("postalCode",e,a),o=t._getImporterAddressFieldValueOnChange("city",e,a),d=t._getImporterAddressFieldValueOnChange("region",e,a),u=t._getImporterAddressFieldValueOnChange("countryCode",e,a),c=[i,s,l,o,d,u].some((e=>e))||t.shouldComplianceBeHardEnforced(),h=(0,r.default)((0,r.default)({},t.state.complianceInfo),{},{importerAddress:(0,r.default)({},null===(n=t.state.complianceInfo)||void 0===n?void 0:n.importerAddress)});"countryCode"===e&&(h.importerAddress.countryName=(yield(0,_.getCountryName)(a))||void 0),h.importerAddress[e]=a||void 0,h.importerAddress.street1Error=c&&!(0,x.existsFieldIgnoreHardEnforcement)(i)?A.default.t(1086):"",h.importerAddress.cityError=c&&!(0,x.existsFieldIgnoreHardEnforcement)(o)?A.default.t(1080):"",h.importerAddress.countryCodeError=c&&!(0,x.existsFieldIgnoreHardEnforcement)(u)?A.default.t(1082):"",t.setState({complianceInfo:h,isModified:!0})}));return function(){return e.apply(this,arguments)}}(),this._handleHiddenChange=()=>{this.setState({isHidden:!this.state.isHidden})},this._getProductChanges=()=>{const{catalog:e,product:t}=this.props,{name:a,priceAmount1000:n,currency:i,description:r,url:s,retailerId:l,complianceInfo:o,isHidden:d}=this.state;return new R.Product({id:t.id,priceAmount1000:n,currency:i,description:r||"",imageCdnUrl:t.imageCdnUrl,additionalImageCdnUrl:t.additionalImageCdnUrl,name:a,retailerId:l,url:s,isHidden:d,complianceInfo:(0,M.canSeeECommerceComplianceIndiaSoftEnforcement)(e.id.user)?{countryCodeOrigin:null==o?void 0:o.countryCodeOrigin,importerName:null==o?void 0:o.importerName,importerAddress:{street1:null==o?void 0:o.importerAddress.street1,street2:null==o?void 0:o.importerAddress.street2,postalCode:null==o?void 0:o.importerAddress.postalCode,city:null==o?void 0:o.importerAddress.city,region:null==o?void 0:o.importerAddress.region,countryCode:null==o?void 0:o.importerAddress.countryCode}}:void 0})},this._handleEditSuccess=e=>{const{catalog:t,onEditSuccess:a,newProduct:n,onCreate:i}=this.props;t.productCollection.add(e,{merge:!0}),this.props.newProduct?(0,D.logAddProductSuccess)((0,F.getProductCatalogContext)(this.context)):(0,D.logEditProductSuccess)(this.props.product,(0,F.getProductCatalogContext)(this.context)),g.Cmd.openToast((0,X.jsx)(K.Toast,{msg:u.default._("Changes saved",null,{hk:"fmK60"}),id:(0,K.genId)("catalog_item_saved")})),a(e),null!=n&&i&&i()},this._handleDeleteItem=()=>{const{catalog:e,product:t,onDelete:a}=this.props;(0,h.handleProductDelete)(e,t,(0,F.getProductCatalogContext)(this.context),"Product").then((e=>{e&&(g.Cmd.closeDrawerMid(),null==a||a(t))}))},this._handleEditError=(e,t)=>{this.props.newProduct?(0,D.logAddProductFailed)((0,F.getProductCatalogContext)(this.context)):(0,D.logEditProductFailed)(this.props.product,(0,F.getProductCatalogContext)(this.context),e.statusCode);let a=u.default._("Failed to save changes",null,{hk:"1rgjJH"});null!=e.errors&&(e.errors.filter((e=>"duplicate"===e.reason)).length>0?H.QPL.markerDrop(t):H.QPL.markerEnd(t,H.QuickLogActionType.FAIL),e.errors.map((e=>{"media"===e.name&&"duplicate"===e.reason&&this.setState({imageError:u.default._("Two or more images are the same. Delete any duplicates and try again.",null,{hk:"3qIMS6"})}),"retailer_id"!==e.name&&"retailer-id"!==e.name||"duplicate"!==e.reason||this.setState({retailerIdError:u.default._("Item code must be unique.",null,{hk:"2T0KbL"})}),(0,M.hideUnsupportedCurrency)()&&"currency"===e.name&&"invalid-data"===e.reason&&(a=u.default._("Price cant be shown in your country. Delete the price you entered.",null,{hk:"R4VXy"}))}))),g.Cmd.openToast((0,X.jsx)(K.Toast,{msg:a,id:(0,K.genId)("catalog_save_item_failed")}))},this._handleSaveItem=()=>{const{catalog:e,product:t,newProduct:a}=this.props;let n=!0;const i=this._getProductChanges();var r;this.errorsRevealed()||(a?(0,D.logAddProductClick)((0,F.getProductCatalogContext)(this.context)):(0,D.logEditProductClick)(t,(0,F.getProductCatalogContext)(this.context)),this.setState({isUpdating:!0}),a||this.state.isModified?(H.QPL.markerStart(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,{bool:{IsNewProduct:!!a}}),null===(r=this._imagePanelRef.current)||void 0===r||r.uploadImages().then((t=>{i.imageCdnUrl=t[0],i.additionalImageCdnUrl=t.slice(1);(a?e.addProduct:e.editProduct).call(e,i).then((e=>{this._handleEditSuccess(e),n=!1,H.QPL.markerEnd(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,H.QuickLogActionType.SUCCESS)})).catch((0,l.filteredCatch)(Q.CatalogEditServerError,(e=>{n=!1,this._handleEditError(e,G.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE)}))).finally((()=>{n&&H.QPL.markerEnd(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,H.QuickLogActionType.FAIL),this.setState({isUpdating:!1})}))})).catch((e=>{throw H.QPL.markerEnd(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,H.QuickLogActionType.FAIL),this.setState({isUpdating:!1}),e}))):(H.QPL.markerStart(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,{string:{EntryPoint:"Product"}}),(0,N.productVisibilitySet)([{productId:t.id.toString(),isHidden:i.isHidden}]).then((()=>{t.isHidden=i.isHidden,this._handleEditSuccess(t),n=!1,H.QPL.markerEnd(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,H.QuickLogActionType.SUCCESS)})).catch((0,l.filteredCatch)(Q.CatalogEditServerError,(e=>{n=!1,this._handleEditError(e,G.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE)}))).finally((()=>{n&&H.QPL.markerEnd(G.QuickLogMarkerId.WHATSAPP_PRODUCT_SET_VISIBLE,H.QuickLogActionType.FAIL),this.setState({isUpdating:!1})}))))},this._handleImageChange=e=>{let t="";0===e.length&&(t=u.default._("Add at least one image",null,{hk:"4tbVYS"})),this.setState({imageError:t,hasImages:e.length>0,isModified:!0})},this.handleDrop=e=>{var t;null===(t=this._imagePanelRef.current)||void 0===t||t.handleFilePick(e)},this.handleDragChange=e=>{this.setState({isDragging:e})},this.getServerPrice=e=>parseInt(parseFloat(e).toFixed(2).toString().replace(/\.|,/g,""),10);const{product:a}=this.props;let n=!1,i=null!=a.currency?a.currency:y.currencyForCountryShortcode((0,S.getCountryShortcodeByPhone)((0,P.getMeUser)().user)),o=null==a.priceAmount1000?null:a.priceAmount1000,d="";if(null!=o&&null!=a.currency){const e=y.formatAmount1000ToParts(a.currency,o);d=`${e.integer}${e.decimal}`}this.canDisplayPrice(i)||(d="",i="",o=null,n=!0),this.state={name:a.name||"",priceAmount1000:o,description:a.description||"",url:a.url||"",retailerId:a.retailerId||"",priceStr:d,currency:i,isUpdating:!1,nameError:"",priceError:"",urlError:"",retailerIdError:"",imageError:"",hasImages:!!a.imageCdnUrl,isDragging:!1,isHidden:a.isHidden,isModified:n,isComplianceInfoAvailable:!1,complianceInfo:void 0}}componentDidMount(){const{listeners:e,catalog:t,product:a}=this.props;(0,M.canSeeECommerceComplianceIndiaSoftEnforcement)(t.id.user)&&this.setComplianceInfo(),e.add(a,"change:isHidden",(()=>{this.setState({isHidden:this.props.product.isHidden})}))}canDisplayPrice(e){return!(0,M.hideUnsupportedCurrency)()||y.isSupportedCurrency(e)}shouldComplianceBeHardEnforced(){const{catalog:e}=this.props;return(0,M.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(e.id.user)}errorsRevealed(){var e;const t=(0,P.getMeUser)(),a=this.state.isComplianceInfoAvailable;if(!this.shouldComplianceBeHardEnforced()||!a)return!1;const n=(0,r.default)((0,r.default)({},this.state.complianceInfo),{},{importerAddress:(0,r.default)({},null===(e=this.state.complianceInfo)||void 0===e?void 0:e.importerAddress)});if(!(0,x.existsField)(n.countryCodeOrigin,t))return n.countryCodeOriginError=A.default.t(1077),this.setState({complianceInfo:n}),!0;if(!this._showComplianceInfoImporterAddress())return!1;const{importerName:i,importerAddress:{street1:s,city:l,countryCode:o}}=n;let d=!1;return(0,x.existsField)(i,t)||(n.importerNameError=A.default.t(1089),d=!0),(0,x.existsFieldIgnoreHardEnforcement)(s)||(n.importerAddress.street1Error=A.default.t(1086),d=!0),(0,x.existsFieldIgnoreHardEnforcement)(l)||(n.importerAddress.cityError=A.default.t(1080),d=!0),(0,x.existsFieldIgnoreHardEnforcement)(o)||(n.importerAddress.countryCodeError=A.default.t(1082),d=!0),!!d&&(this.setState({complianceInfo:n}),!0)}setComplianceInfo(){var e=this;return(0,s.default)((function*(){const{product:t,catalog:a,newProduct:n}=e.props;if(n)e.setState({isComplianceInfoAvailable:!0});else{yield p.CatalogCollection.findProduct({catalogWid:a.id,productId:t.id.toString(),shouldFetchComplianceFields:!0});const n=(0,o.default)(a,"catalog").productCollection.get(t.id),{countryCodeOrigin:i,importerName:r,importerAddress:s}=(null==n?void 0:n.complianceInfo)||{},l=i===String(_.SyntheticCountryCode.NotApplicable)?A.default.t(1076):i&&(yield(0,_.getCountryName)(i)),d=(null==s?void 0:s.countryCode)&&(yield(0,_.getCountryName)(s.countryCode));e.setState({isComplianceInfoAvailable:!0,complianceInfo:{countryCodeOrigin:i,countryNameOrigin:l,countryCodeOriginError:"",importerName:r,importerNameError:"",importerAddress:{street1:null==s?void 0:s.street1,street1Error:"",street2:null==s?void 0:s.street2,postalCode:null==s?void 0:s.postalCode,city:null==s?void 0:s.city,cityError:"",region:null==s?void 0:s.region,countryCode:null==s?void 0:s.countryCode,countryName:d,countryCodeError:""}}})}}))()}isValid(){const{name:e,nameError:t,priceError:a,urlError:n,retailerIdError:i,imageError:r,hasImages:s,complianceInfo:l}=this.state;if(""===e.trim()||!1===s)return!1;const o=[t,a,n,i,r];return this._showComplianceInfoImporterAddress()&&o.push(null==l?void 0:l.importerNameError,null==l?void 0:l.importerAddress.street1Error,null==l?void 0:l.importerAddress.cityError,null==l?void 0:l.importerAddress.countryCodeError),this.shouldComplianceBeHardEnforced()&&o.push(null==l?void 0:l.countryCodeOriginError),o.every((e=>!e))}render(){const{catalog:e,product:t,onBack:a,onCancel:n,newProduct:i}=this.props,{isUpdating:r,isDragging:s,currency:l,nameError:o,priceError:c,urlError:h,retailerIdError:p,imageError:g,complianceInfo:v,isComplianceInfoAvailable:x}=this.state,C=(0,X.jsx)(f.default,{type:"primary",onClick:this._handleSaveItem,disabled:!this.isValid(),a8nText:"product-edit-drawer-save-button",children:i?u.default._("Add to catalog",null,{hk:"3Dku2o"}):A.default.t(1188)}),_=(0,X.jsxs)("div",{className:w.default.drawerHeader,children:[(0,X.jsx)(z.TextHeader,{level:"2",weight:"normal",customSize:"inherit",children:i?u.default._("Add new item",null,{hk:"3DqBBM"}):u.default._("Edit item",null,{hk:"2qzKLB"})}),(0,X.jsx)("div",{className:w.default.drawerHeaderButtonContainer,children:C})]}),S=i?null:(0,X.jsx)("div",{className:w.default.deleteButtonContainer,children:(0,X.jsx)(f.default,{type:"warning",onClick:this._handleDeleteItem,a8nText:"product-edit-drawer-delete-button",children:u.default._("Delete Item",null,{hk:"Frzv9"})})}),I=(0,d.default)(w.default.productWrapper,{[w.default.isSending]:r}),k=s?(0,X.jsx)(j.default,{}):null,P=r?(0,X.jsx)("div",{className:w.default.spinner,children:(0,X.jsx)(V.Spinner,{size:50,stroke:3})}):null,L=(0,X.jsxs)("div",{className:w.default.hiddenContainer,children:[(0,X.jsx)(m.CheckBox,{id:"product-hidden-check",onChange:this._handleHiddenChange,checked:this.state.isHidden,disabled:!1}),(0,X.jsx)("label",{className:w.default.hiddenLabel,htmlFor:"product-hidden-check",children:u.default._("Hide item",null,{hk:"GjLlA"})}),(0,X.jsx)("div",{className:w.default.hiddenDescr,children:u.default._("When you hide an item, customers wont see it in your catalog.",null,{hk:"1crP8q"})})]});return(0,X.jsxs)(E.default,{theme:"catalog",onDrop:this.handleDrop,onDragChange:this.handleDragChange,children:[k,(0,X.jsx)(b.DrawerHeader,{a8n:"catalog-link-title",title:_,type:b.DRAWER_HEADER_TYPE.SMALL,onBack:a,onCancel:n,focusBackOrCancel:!0}),(0,X.jsx)(T.default,{children:(0,X.jsxs)("div",{className:I,children:[P,(0,X.jsx)(B.default,{product:t,maxImageCount:R.MAX_PRODUCT_IMAGES,onChange:this._handleImageChange,ref:this._imagePanelRef,error:g}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-name-input",value:this.state.name,placeholder:A.default.t(683),onChange:this._handleNameChange,theme:"small",customStyleThemes:["desaturated"],maxLength:150,error:o,title:u.default._("Name",null,{hk:"47pzCN"})}),this.canDisplayPrice(this.state.currency)&&(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-price-input",value:this.state.priceStr,placeholder:A.default.t(684,{currencySymbol:y.formatAmount1000ToParts(l,0).symbol}),onChange:this._handlePriceChange,theme:"small",maxLength:30,customStyleThemes:["desaturated"],error:c,title:u.default._("Price",null,{hk:"1q6KRK"})}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-description-input",value:this.state.description,placeholder:A.default.t(681),onChange:this.handleDescriptionChange,theme:"small",maxLength:5e3,customStyleThemes:["desaturated"],multiline:!0,title:u.default._("Description",null,{hk:"2sGitZ"})}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-link-input",value:this.state.url,placeholder:A.default.t(682),onChange:this._handleUrlChange,onBlur:this._handleUrlBlur,theme:"small",customStyleThemes:["desaturated"],maxLength:75,error:h,managed:!0,title:u.default._("Link",null,{hk:"1yLSRM"})}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-retailer-id-input",value:this.state.retailerId,placeholder:A.default.t(680),onChange:this._handleRetailerIdChange,theme:"small",customStyleThemes:["desaturated"],maxLength:100,error:p,title:u.default._("Item code",null,{hk:"6trPE"})}),(0,M.canSeeECommerceComplianceIndiaSoftEnforcement)(e.id.user)?(0,X.jsx)($,{isComplianceHardEnforced:this.shouldComplianceBeHardEnforced(),isComplianceInfoAvailable:x,showComplianceInfoImporterAddress:this._showComplianceInfoImporterAddress(),complianceInfo:v,onComplianceInfoChange:this._handleComplianceInfoChange,onComplianceInfoImporterAddressChange:this._handleComplianceInfoImporterAddressChange}):null,L,S]})})]},"catalog-link-drawer")}}function $(e){let{isComplianceInfoAvailable:t,isComplianceHardEnforced:a,showComplianceInfoImporterAddress:n,complianceInfo:i,onComplianceInfoChange:r,onComplianceInfoImporterAddressChange:l}=e;const[o,d]=(0,c.useState)([]),u=(0,c.useMemo)((()=>{const e=(0,P.getMeUser)().user;return o.length>0&&(0,M.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)(e)?(0,_.bubbleCountryOnListOfCountries)(o,C.default.COMPLIANCE_INFO_CODES.INDIA,!0):o}),[o]),h=(0,c.useMemo)((()=>{const e=(0,P.getMeUser)().user;if(o.length>0&&(0,M.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney)(e)){let e=C.default.COMPLIANCE_INFO_CODES.INDIA;return"string"==typeof(null==i?void 0:i.countryCodeOrigin)&&""!==i.countryCodeOrigin&&(e=i.countryCodeOrigin),(0,_.formatCountriesOfOrigin)(o,e)}return o}),[o,null==i?void 0:i.countryCodeOrigin]),f=e=>`${e} (${A.default.t(1091)})`,p=e=>!i||Object.values(i.importerAddress).every((e=>!e))?f(e):e;return(0,c.useEffect)((()=>{let e=!0;return(0,s.default)((function*(){const t=(0,P.getMeUser)().user;if((0,M.canSeeECommerceComplianceIndiaSoftEnforcement)(t)){const t=yield(0,_.getCountries)();e&&d(t)}}))(),()=>{e=!1}}),[]),t&&o.length?(0,X.jsxs)("div",{a8n:"product-edit-drawer-compliance",children:[(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-country-of-origin-input",value:null==i?void 0:i.countryNameOrigin,placeholder:A.default.t(1074),onChange:()=>{},theme:"small",customStyleThemes:["desaturated"],managed:!0,onFocus:()=>g.Cmd.showCountrySelector(A.default.t(1074),null==i?void 0:i.countryCodeOrigin,h,(e=>{r("countryCodeOrigin",e)})),error:null==i?void 0:i.countryCodeOriginError}),n&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-name-input",value:null==i?void 0:i.importerName,placeholder:p(A.default.t(1088)),onChange:e=>{r("importerName",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:C.default.COMPLIANCE_INFO_LENGTH.IMPORTER_NAME,error:null==i?void 0:i.importerNameError}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-street-1-input",value:null==i?void 0:i.importerAddress.street1,placeholder:p(A.default.t(1085)),onChange:e=>{l("street1",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:C.default.COMPLIANCE_INFO_LENGTH.STREET1,error:null==i?void 0:i.importerAddress.street1Error}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-street-2-input",value:null==i?void 0:i.importerAddress.street2,placeholder:f(A.default.t(1087)),onChange:e=>{l("street2",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:C.default.COMPLIANCE_INFO_LENGTH.STREET2}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-city-input",value:null==i?void 0:i.importerAddress.city,placeholder:p(A.default.t(1079)),onChange:e=>{l("city",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:C.default.COMPLIANCE_INFO_LENGTH.CITY,error:null==i?void 0:i.importerAddress.cityError}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-region-input",value:null==i?void 0:i.importerAddress.region,placeholder:f(A.default.t(1084)),onChange:e=>{l("region",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:C.default.COMPLIANCE_INFO_LENGTH.REGION}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-country-code-input",value:null==i?void 0:i.importerAddress.countryName,placeholder:p(A.default.t(1081)),onChange:()=>{},theme:"small",customStyleThemes:["desaturated"],managed:!0,onFocus:()=>g.Cmd.showCountrySelector(A.default.t(1081),null==i?void 0:i.importerAddress.countryCode,u,(e=>{l("countryCode",e)})),error:null==i?void 0:i.importerAddress.countryCodeError}),(0,X.jsx)(q.TextInput,{a8n:"product-edit-drawer-compliance-importer-address-postal-code-input",value:null==i?void 0:i.importerAddress.postalCode,placeholder:f(A.default.t(1083)),onChange:e=>{l("postalCode",e)},theme:"small",customStyleThemes:["desaturated"],maxLength:C.default.COMPLIANCE_INFO_LENGTH.POSTAL_CODE}),(0,X.jsx)(v.ComplianceInfoHelpCenterBanner,{xstyle:Z.complianceInfoHelpCenterBanner})]})]}):(0,X.jsx)(k.FlexRow,{align:"center",justify:"center",children:(0,X.jsx)(k.FlexItem,{children:(0,X.jsx)(V.Spinner,{})})})}t.EditProductDrawerImpl=J,J.contextType=I.DrawerContext,J.CONCERNS={product:["id","additionalImageCdnUrl","name","priceAmount1000","description","productImageCollection","reviewStatus","url","imageCdnUrl","retailerId","currency","isHidden","complianceInfo"]},J.displayName="EditProductDrawerImpl";const ee=(0,L.default)((0,U.default)((0,W.default)((0,O.ListenerHOC)(J),J.CONCERNS)));t.EditProductDrawer=ee},63935:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onBack:t,onAddProductClick:a,isCreatingCatalogFn:n}=e,y=n(),j=(0,S.jsx)("div",{className:x.default.placeholderIcon}),E=(0,S.jsx)(o.default,{href:d.default.FB_LEGAL_TERMS_URL,onClick:e=>{e.preventDefault(),(0,m.openExternalLink)(d.default.FB_LEGAL_TERMS_URL)},children:r.default._("Facebook Product",null,{hk:"3JyFEa"})}),T=(0,S.jsx)(o.default,{href:d.default.FB_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,m.openExternalLink)(d.default.FB_COMMERCE_POLICY_URL)},children:r.default._("Facebook Commercial Terms",null,{hk:"3LS54M"})}),I=(0,S.jsx)(o.default,{href:d.default.WA_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,m.openExternalLink)(d.default.WA_COMMERCE_POLICY_URL)},children:g.default.t(1915)}),b=(0,S.jsx)(v.default,{id:276,params:{fb_product_link:E,fb_commerce_link:T,wa_commerce_policy_link:I}}),w=(0,i.default)({[x.default.isLoading]:y}),k=y?(0,S.jsx)("div",{className:x.default.spinner,children:(0,S.jsx)(C.Spinner,{size:50,stroke:3})}):null,P=y?(0,S.jsx)(s.default,{onClick:()=>{},theme:"default",idle:!!y}):(0,S.jsx)(h.DrawerContext.Consumer,{children:()=>(0,S.jsx)(s.default,{onClick:()=>{a()},theme:"default",idle:!1})});return(0,S.jsxs)(u.default,{children:[(0,S.jsx)(f.DrawerHeader,{title:g.default.t(1072),type:f.DRAWER_HEADER_TYPE.LARGE,onBack:t}),(0,S.jsx)(c.default,{className:w,children:(0,S.jsxs)(p.default,{theme:"padding-small",animation:!1,children:[k,(0,S.jsx)(_.TextDiv,{theme:"title",children:r.default._("Add items to your catalog so customers can see what you're offering",null,{hk:"3z35i1"})}),P,(0,S.jsx)(_.TextDiv,{theme:"plain",children:b}),(0,S.jsxs)("div",{className:x.default.placeholderContainer,children:[(0,S.jsx)(l.default,{theme:"add-item-placeholder",image:j,customImage:!0,className:x.default.addItemPlaceholder,primary:"",secondary:"",idle:!0}),(0,S.jsx)("div",{className:x.default.divider}),(0,S.jsx)(l.default,{theme:"add-item-placeholder",image:j,customImage:!0,className:x.default.addItemPlaceholder,primary:"",secondary:"",idle:!0}),(0,S.jsx)("div",{className:x.default.divider})]})]})})]},"catalog-link-drawer")};var i=n(a(94184)),r=n(a(48360)),s=n(a(33889)),l=n(a(44356)),o=n(a(99360)),d=n(a(69618)),u=n(a(60453)),c=n(a(69637)),h=a(27394),f=a(94790),p=n(a(33308)),m=a(12591),g=n(a(43725)),v=n(a(56074)),x=n(a(14808)),C=a(11054),_=a(13923),S=a(85893)},14746:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInfoDrawer=function(e){const{onCancel:t,collectionId:a,catalog:n,onEditProduct:P,onShareProduct:M,isPushed:L=!0}=e,A=(0,r.useContext)(d.DrawerContext),O=(0,w.useModelValues)(e.product,["id","catalogWid","name","priceAmount1000","description","productImageCollection","reviewStatus","url","canAppeal","imageCdnUrl","retailerId","currency","isHidden"]),[D,R]=(0,r.useState)(!0);(0,r.useEffect)((()=>{const e=(0,f.getMaybeMeUser)();L&&(0,g.qplAnnotateProductView)(!(null==e?void 0:e.equals(O.catalogWid))),n.pullProduct(O.id.toString(),L).then((()=>{L&&(0,g.qplEndProductView)(T.QuickLogActionType.SUCCESS)})).catch((()=>{L&&(0,g.qplEndProductView)(T.QuickLogActionType.FAIL)})).finally((()=>{R(!1)})),(0,m.logProductDetailView)({product:O,catalogContext:(0,x.getProductCatalogContext)(A),collectionId:a})}),[]);const N=(0,f.getMaybeMeUser)(),F=I.StatusCollection.get(N),B=(0,k.jsx)(b.TextDiv,{theme:"muted",className:S.default.businessInfoTitle,children:i.default._("Business Info",null,{hk:"20HLtr"})}),U=O.reviewStatus!==C.PRODUCT_REVIEW_STATUS.APPROVED||O.isHidden,H=(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:S.default.buttonSeparator,children:(0,k.jsx)(s.default,{type:"strong",onClick:()=>{P&&P(O)},a8nText:"product-info-drawer edit-button",children:p.default.t(414)})}),(0,k.jsx)(s.default,{type:"strong-primary",onClick:()=>{M&&M(O)},disabled:U,a8nText:"product-info-drawer share-button",children:p.default.t(1836)})]}),G=(0,k.jsxs)("div",{className:S.default.drawerHeader,children:[(0,k.jsx)("div",{className:S.default.productName,children:O.name}),(0,k.jsx)("div",{className:S.default.drawerHeaderButtonContainer,children:H})]}),V=F?(0,k.jsx)(c.default,{title:B,theme:"no-padding",children:(0,k.jsx)(E.default,{status:F})}):null,W=D?(0,k.jsx)(h.default,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(j.default,{product:O,isAvailable:!0,fetching:!1}),(0,k.jsx)(y.default,{product:O}),(0,k.jsx)(_.default,{product:O,collectionId:a,onSendChat:()=>{t(),(0,v.sendProductToChat)(O,n),(0,m.logProductMessageBusinessClick)(O,(0,x.getProductCatalogContext)(A))},isAvailable:!0})]});return(0,k.jsxs)(l.default,{theme:"catalog",children:[(0,k.jsx)(u.DrawerHeader,{a8n:"catalog-product-title",title:G,type:u.DRAWER_HEADER_TYPE.SMALL,onCancel:t,headingLevel:"2",focusBackOrCancel:!0}),(0,k.jsxs)(o.default,{children:[(0,k.jsx)(c.default,{theme:"center-column-fixed-width",children:W}),(0,k.jsx)("div",{className:S.default.productWrapper,children:V})]})]},"catalog-link-drawer")};var i=n(a(48360)),r=a(67294),s=n(a(39770)),l=n(a(60453)),o=n(a(69637)),d=a(27394),u=a(94790),c=n(a(33308)),h=n(a(29796)),f=a(99234),p=n(a(43725)),m=a(77975),g=a(82145),v=a(96519),x=a(97567),C=a(5641),_=n(a(16481)),S=n(a(19476)),y=n(a(11956)),j=n(a(33382)),E=n(a(37867)),T=a(48870),I=a(46133),b=a(13923),w=a(49082),k=a(85893)},11956:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t}=e;const a=(0,C.jsx)(l.default,{href:d.default.WA_COMMERCE_POLICY_URL,onClick:e=>{e.preventDefault(),(0,c.openExternalLink)(d.default.WA_COMMERCE_POLICY_URL)},children:h.default.t(689)});if(t.reviewStatus===m.PRODUCT_REVIEW_STATUS.APPROVED)return t.isHidden?(0,C.jsxs)("div",{className:g.default.root,children:[(0,C.jsx)("div",{className:g.default.icon,children:(0,C.jsx)(v.default,{name:"hide"})}),(0,C.jsx)("div",{className:g.default.text,children:(0,C.jsx)(x.TextDiv,{children:h.default.t(1095)})})]}):null;if(t.reviewStatus===m.PRODUCT_REVIEW_STATUS.REJECTED){if(!0===t.canAppeal){const e=(0,C.jsx)(f.default,{id:280,params:{learn_more_link:a}}),n=(0,C.jsx)(l.default,{onClick:function(){o.Cmd.openModal((0,C.jsx)(u.DrawerContext.Consumer,{children:e=>(0,C.jsx)(s.default,{product:t,sessionId:(0,p.getProductCatalogSessionId)(e)})}))},a8n:"product-appeal-button",children:r.default._("request another review",null,{hk:"1edAPz"})}),d=(0,C.jsx)(f.default,{id:277,params:{request_review_link:n},className:g.default.appealText,tabIndex:"0"});return(0,C.jsxs)("div",{className:g.default.root,"data-a8n":i.default.key("product-appeal-rejected-initial-review"),children:[(0,C.jsx)("div",{className:g.default.icon,children:(0,C.jsx)(v.default,{name:"info"})}),(0,C.jsxs)("div",{className:g.default.text,children:[e,d]})]})}{const e=(0,C.jsx)(f.default,{id:278,params:{learn_more_link:a}});return(0,C.jsx)("div",{className:g.default.root,"data-a8n":i.default.key("product-appeal-rejected-final"),children:e})}}if(t.reviewStatus===m.PRODUCT_REVIEW_STATUS.NO_REVIEW||t.reviewStatus===m.PRODUCT_REVIEW_STATUS.OUTDATED){const e=t.isHidden?(0,C.jsx)(f.default,{id:282,params:{learn_more_link:a}}):(0,C.jsx)(f.default,{id:281,params:{learn_more_link:a}});return(0,C.jsx)("div",{className:g.default.root,"data-a8n":i.default.key("product-appeal-pending-initial-review"),children:e})}if(!1===t.canAppeal){const e=r.default._("Your appeal was submitted. If its approved, your item will be added to your catalog. If its not approved, youll be notified.",null,{hk:"4aNdXt"});return(0,C.jsx)("div",{className:g.default.root,"data-a8n":i.default.key("product-appeal-pending-appeal"),children:e})}return null};var i=n(a(99964)),r=n(a(48360)),s=n(a(43318)),l=n(a(99360)),o=a(88102),d=n(a(69618)),u=a(27394),c=a(12591),h=n(a(43725)),f=n(a(56074)),p=a(97567),m=a(5641),g=n(a(14278)),v=n(a(23217)),x=a(13923),C=a(85893)},37867:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.useModelValues)(e.status,["status"]);return(0,d.jsx)(i.default,{image:(0,d.jsx)(s.DetailImage,{id:(0,l.getMaybeMeUser)()}),primary:r.Conn.pushname,secondary:t.status,idle:!0})};var i=n(a(44356)),r=a(17239),s=a(88984),l=a(99234),o=a(49082),d=a(85893)},87728:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{businessProfile:t,catalog:a,openCatalog:n=m}=e;const o=(0,s.hasShop)(t),g=Boolean(o&&h.ServerProps.shopsProductGrid);if((0,r.useEffect)((()=>{(0,u.logShopsManagementEvent)(c.default.SHOPS_MANAGEMENT_ACTION.ACTION_SHOPS_PRODUCT_PREVIEW_VISIBLE,{shouldLogJid:!1,isShopsProductPreviewVisible:g})}),[g]),o)return g?(0,p.jsx)(f.default,{isEditMode:!0,subtitle:d.default.t(751),businessProfile:t,catalog:a,productsToShow:3}):null;return(0,p.jsx)(l.default,{catalog:a,onProductDetail:n,onProductCatalog:()=>{n()},productsToShow:3,catalogEntryLabel:null==a?i.default._("Add catalog",null,{hk:"2iihM5"}):d.default.t(1451),showProductPlaceholders:!0,seeMoreOverlay:!0,sectionTheme:"refresh"})};var i=n(a(48360)),r=a(67294),s=a(94010),l=n(a(42953)),o=a(87912),d=n(a(43725)),u=a(55631),c=n(a(11339)),h=a(64551),f=n(a(82495)),p=a(85893);function m(e){(0,o.openCatalogManagementFlow)(e,c.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE)}},75260:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=n(a(49107)),l=n(a(23034)),o=a(71174),d=a(65417),u=n(a(23217)),c=a(18644),h=n(a(24717)),f=a(85893);function p(e){const{collection:t,theme:a,onDelete:n,onEdit:p,onSeeCollection:m,canManage:g}=e,[v]=(0,r.useState)(!1),[x,C]=(0,r.useState)(null),_=e=>{e.preventDefault(),e.stopPropagation(),n&&n(t)},S=e=>{e.preventDefault(),e.stopPropagation(),p&&p(t)},y=()=>{C(null)},j=(0,f.jsx)("div",{className:l.default.collectionIcon,children:(0,f.jsx)("div",{className:l.default.iconContainer,children:(0,f.jsx)(u.default,{name:"collections_folder"})})}),E=(0,f.jsx)(d.EmojiText,{text:t.name,ellipsify:!0,titlify:!0});let T;return x&&(T=(0,f.jsx)(c.UIE,{displayName:"CollectionContextMenu",escapable:!0,popable:!0,requestDismiss:y,children:(0,f.jsx)(h.default,{contextMenu:x})})),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.default,{customImage:!0,image:j,primary:E,theme:a,active:v,contextEnabled:()=>e.canManage,onContext:e=>{if(x)return void C(null);const t=[];g&&(t.push((0,f.jsx)(o.DropdownItem,{a8n:"mi-show-label",action:S,children:i.default._("Edit",null,{hk:"Xow6E"})},"EditLabel")),t.push((0,f.jsx)(o.DropdownItem,{a8n:"mi-show-label",action:_,children:i.default._("Delete",null,{hk:"1rLhBB"})},"DeleteLabel"))),C({menu:t,event:e.event,anchor:e.anchor})},onClick:e=>{e.preventDefault(),e.stopPropagation(),m&&m(t)}},t.id.toString()),T]})}p.defaultProps={theme:"collection-edit",isMuted:!1};var m=p;t.default=m},92625:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{data:t,canManage:a,onEditCollection:n,onSeeCollection:p}=e,m=(0,h.useModelValues)(e.catalog,["collections"]);return(0,f.jsx)(d.default,{flatListControllers:[e.flatListController],children:(0,f.jsx)(o.FlatList,{flatListController:e.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:(()=>{const e=[];return t.forEach((t=>{t.collection&&e.push({itemKey:t.collection.id,collection:t.collection})})),e})(),renderItem:e=>{let{collection:t}=e;return(0,f.jsx)(l.DrawerContext.Consumer,{children:e=>(0,f.jsx)(r.default,{collection:t,canManage:a,onDelete:()=>((e,t)=>{(0,i.handleCollectionDelete)((0,c.unproxy)(m),e,t)})(t,(0,u.getProductCatalogContext)(e)),onEdit:n,onSeeCollection:p})})},defaultItemHeight:s.default.PRODUCT_LIST_ITEM_HEIGHT})})};var i=a(47217),r=n(a(75260)),s=n(a(69618)),l=a(27394),o=a(47915),d=n(a(44942)),u=a(97567),c=a(31019),h=a(49082),f=a(85893)},95416:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{setScrollOffset:t,editCollection:a,onSeeCollection:n}=e,T=(0,S.default)(),I=(0,_.default)((()=>T()),100),b=(0,y.default)((()=>new m.default)),[w,k]=(0,r.useState)(!0),[P,M]=(0,r.useState)(null),[L,A]=(0,r.useState)(null),O=(0,r.useMemo)((()=>{const e=(0,v.getMeUser)();return l.CatalogCollection.get(e)}),[]);(0,r.useEffect)((()=>{const{isPushed:t=!0}=e;if(O){const e=new o.CollectionsDataSource(O,!0,c.default.PRODUCT_LIST_ITEM_HEIGHT,t);O.collections.on("add remove",I);const a=new o.CatalogListItemScrollHelper(e);M(e),A(a),e.loadInitialItems().then((()=>{k(!1),t&&x.QPL.markerEnd(C.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW,x.QuickLogActionType.SUCCESS)})).catch((()=>{t&&x.QPL.markerEnd(C.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW,x.QuickLogActionType.FAIL)}))}}),[]);const D=(0,j.default)((e=>{const a=e.currentTarget;t&&t(a.scrollTop),(null==L?void 0:L.willLoadMore(a))&&k(!0),null==L||L.onScroll(e,a).then((e=>{e&&k(!1)})).catch((e=>{throw k(!1),e}))}),100);return(0,E.jsxs)(h.default,{theme:"products",onDrop:e.onBack,children:[(0,E.jsx)(p.DrawerHeader,{title:i.default._("Collections",null,{hk:"I9pEH"}),type:p.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack,menu:(0,E.jsx)(E.Fragment,{})}),(0,E.jsx)(f.default,{onScroll:D,flatListControllers:[b.current],scrollOffset:e.scrollOffset,children:O&&P?(0,E.jsxs)("div",{children:[(0,E.jsx)(s.default,{onClick:()=>{a(null)},theme:"collections",title:i.default._("New collection",null,{hk:"2Q4UnS"})}),(0,E.jsx)(d.default,{canManage:!0,catalog:O,onEditCollection:a,data:P.getData(),flatListController:b.current,onSeeCollection:n}),w&&(0,E.jsx)("div",{className:u.default.loadingSpinner,children:(0,E.jsx)(g.default,{})})]}):null})]})};var i=n(a(48360)),r=a(67294),s=n(a(33889)),l=a(99989),o=a(71599),d=n(a(92625)),u=n(a(36566)),c=n(a(69618)),h=n(a(60453)),f=n(a(69637)),p=a(94790),m=n(a(30855)),g=n(a(29796)),v=a(99234),x=a(48870),C=a(27798),_=n(a(81559)),S=n(a(59909)),y=n(a(59552)),j=n(a(88857)),E=a(85893)},30327:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=(n(a(56720)),a(80666)),l=a(88102),o=n(a(69618)),d=a(60769),u=n(a(43725)),c=a(78986),h=a(58668),f=a(17304),p=n(a(34949)),m=n(a(78491)),g=a(3013),v=a(48870),x=a(27798),C=n(a(23217)),_=a(50452),S=n(a(1784)),y=n(a(41956)),j=a(85893);const E={btnDelete:{position:"lhggkp7q",top:"hdpg1tjz",end:"ltcz4qz9",zIndex:"mb8var44",color:"k17s6i4e",filter:"rhe1kc9j"},btnAdd:{display:"p357zi0d",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",width:"jkv2xdwy",height:"sptw4ec9",fontSize:"lak21jic",fontWeight:"hnx8ox4h",lineHeight:"gz7w46tb",letterSpacing:"hql59cr1"}};function T(e){let{images:t,deleteImage:a}=e;return t.filter((e=>e.mediaData)).map(((e,t)=>(0,j.jsxs)("div",{className:m.default.imageTile,children:[(0,j.jsx)(S.default,{xstyle:E.btnDelete,"aria-label":u.default.t(6,{imageNumber:t+1}),a8nText:"delete-image",onClick:()=>a(e),children:(0,j.jsx)(C.default,{className:m.default.deleteIcon,name:"x-alt"})}),(0,j.jsx)(g.ProductThumb,{mediaData:e.mediaData,className:m.default.imageThumb})]},e.mediaData.filehash)))}function I(e){let{inputRef:t,handleFilePick:a}=e;return(0,j.jsx)("input",{ref:t,type:"file",accept:o.default.IMAGE_MIMES,style:{display:"none"},onChange:a,multiple:!0})}function b(e,t){const{maxImageCount:a,onChange:n,error:g,product:b}=e,w=(0,r.useRef)(null),[k,P]=(0,r.useState)((()=>b.productImageCollection.filter((e=>!e.old)).map((e=>({url:e.mediaUrl,mediaData:e.mediaData}))))),M=()=>{if(w.current){w.current.click()}},L=e=>{e.mediaPrep.waitForPrep().then((t=>{if((e=>!(k.filter((t=>t.mediaData.filehash===e.filehash)).length>0&&(l.Cmd.openToast((0,j.jsx)(_.Toast,{id:(0,_.genId)(),msg:i.default._("Two or more images are the same. Delete any duplicates and try again.",null,{hk:"3qIMS6"})})),1)))(t)){t.mediaStage=h.MEDIA_DATA_STAGE.RESOLVED,t.renderableUrl=e.fullPreview;const a=t.mediaBlob;!a||a instanceof p.default||p.default.createFromData(a,a.type).then((e=>{t.mediaBlob=e}));const i=[...k,{url:null,mediaData:t}];P(i),null==n||n(i)}}))},A=e=>{(0,d.getFiles)(e,o.default.IMAGE_MIMES).then((e=>{const t=a-k.length;e.length>t&&l.Cmd.openToast((0,j.jsx)(_.Toast,{msg:u.default.t(755),duration:6e3,action:{onAction:()=>{},actionText:u.default.t(513),dismiss:!0,theme:"success"},id:(0,_.genId)()})),e.slice(0,a-k.length).map((e=>({file:e,filename:e.name,mimetype:e.type,type:f.TYPE.PRODUCT}))).map((e=>{var t;const a=new s.AttachMedia({file:Promise.resolve(e)});return null===(t=a.processPromise)||void 0===t?void 0:t.then((()=>{L(a)}))}))})),e.target.value&&(e.target.value="")},O=()=>{const e=k.filter((e=>null==e.url)).length;v.QPL.markerAnnotate(x.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,{int:{ImagesCount:e}}),v.QPL.markerPoint(x.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"images_upload_start");const t=k.filter((e=>null==e.url)).map((e=>{const{mediaData:{mediaBlob:t,filehash:a}}=e;return t instanceof p.default?(0,c.uploadProductImage)(t,a).then((t=>{e.url=t})):null})).filter(Boolean);return Promise.all(t).then((()=>(v.QPL.markerPoint(x.QuickLogMarkerId.WHATSAPP_PRODUCT_SAVE,"images_upload_end"),k.map((e=>e.url||"")))))};return(0,r.useImperativeHandle)(t,(()=>({uploadImages:O,handleFilePick:A}))),(0,j.jsxs)("div",{className:m.default.panel,children:[(0,j.jsxs)("div",{className:m.default.tileContainer,children:[(0,j.jsxs)(y.default,{transitionAppear:!0,transitionName:"thumb-scale-flex",children:[(0,j.jsx)(T,{images:k,deleteImage:e=>{const t=k.filter((t=>t!==e));P(t),null==n||n(t)}}),k.length<a?(0,j.jsx)("div",{className:m.default.btnAddContainer,children:(0,j.jsxs)(S.default,{xstyle:E.btnAdd,"aria-label":i.default._("Add additional image",null,{hk:"1zIuu3"}),onClick:M,a8nText:"add-image",children:[(0,j.jsx)(C.default,{name:"camera"}),(0,j.jsx)("div",{className:m.default.btnAddText,children:i.default._("Add Images",null,{hk:"3yrGBr"})})]})}):null]}),(0,j.jsx)(I,{inputRef:w,handleFilePick:A})]}),(0,j.jsx)("div",{className:m.default.errorMessage,role:"alert",children:g})]})}var w=(0,r.forwardRef)(b);t.default=w},46767:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{flatListController:t,onProductDetail:a,productMessageList:n}=e;const _=n.productCollection.getProductModels(),S=n.getSections(),y=n.getSectionsCount()>0,j=n.getTotalProductsFetchedOrFailed(),E=n.getProductSize()===j&&0===_.length,T=[];S.forEach(((e,t)=>{let{title:a,products:n}=e;const i=[];n.forEach((e=>{let{productId:a}=e;const n=_.find((e=>e.id===a));null!=n&&i.push({itemKey:`section-${t}-${n.id.toString()}`,product:n,type:"product",height:l.default.PRODUCT_LIST_ITEM_HEIGHT})})),i.length>0&&(null!=a&&""!==a&&T.push({itemKey:`header-${t}-${a}`,label:a,type:"section",height:72}),T.push(...i))}));const I=(0,r.useCallback)(((e,t)=>((0,c.logCatalogListDetailClick)({product:(0,x.unproxy)(e),catalogContext:t}),(0,h.qplStartProductView)("PLM"),a(e))),[a]),b=(0,r.useCallback)((e=>{let t=null;switch(e.type){case"section":const{label:a}=e;t=(0,C.jsx)(v.default,{header:a});break;case"product":const{product:n}=e;t=(0,C.jsx)(o.DrawerContext.Consumer,{children:e=>(0,C.jsx)(p.default,{product:n,onClick:()=>I(n,(0,f.getProductCatalogContext)(e)),canManageCatalog:!1})})}return t}),[I]);return(0,r.useEffect)((()=>{E&&s.Cmd.openModal((0,C.jsx)(g.default,{onConfirm:()=>{s.Cmd.closeDrawerRight(),s.Cmd.closeModal()}}))}),[E]),(0,C.jsx)("div",{className:(0,i.default)({[m.default.list]:!0,[m.default.noSections]:!y}),children:(0,C.jsx)(u.default,{flatListControllers:[t],children:(0,C.jsx)(d.FlatList,{flatListController:t,direction:"vertical",forceConsistentRenderCount:!1,data:T,renderItem:b,itemEnterAnimationsEnabled:!0})})})};var i=n(a(94184)),r=a(67294),s=a(88102),l=n(a(69618)),o=a(27394),d=a(47915),u=n(a(44942)),c=a(77975),h=a(82145),f=a(97567),p=n(a(88990)),m=n(a(29792)),g=n(a(8714)),v=n(a(11497)),x=a(31019),C=a(85893)},91695:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ProductMessageListDrawerImpl=t.ProductMessageListDrawer=void 0;var i=n(a(48926)),r=n(a(23493)),s=n(a(48360)),l=a(67294),o=a(12392),d=n(a(51070)),u=n(a(17986)),c=n(a(69618)),h=n(a(60453)),f=n(a(69637)),p=a(27394),m=a(94790),g=a(65417),v=a(14375),x=n(a(61055)),C=n(a(30855)),_=n(a(29796)),S=a(84387),y=a(88571),j=a(82145),E=a(46346),T=a(97567),I=n(a(46767)),b=a(18952),w=n(a(70890)),k=a(48870),P=a(27798),M=n(a(65932)),L=a(31515),A=n(a(90012)),O=a(85893);class D extends l.Component{constructor(e){super(e),this._productListFlatListController=new C.default,this._handleScroll=e=>{this.state.loadingMore||e.scrollTop+c.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._loadMoreProduct()},this.handleScroll=(0,r.default)(this._handleScroll,100),this._loadMoreProduct=e=>{const{productListId:t,isPushed:a=!0}=this.props,n=this.props.getUnmountSignal(),{stopLoading:i,loadedProducts:r}=this.state,s=a&&!0===e,l=b.ProductMessageListCollection.assertGet(t),o=l.getTotalProductsFetchedOrFailed(),d=l.getProductSize();if(i||o===d)return s&&(k.QPL.markerAnnotate(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{int:{ProductsCount:o}}),k.QPL.markerEnd(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,k.QuickLogActionType.SUCCESS)),void this.setState({stopLoading:!0});this.setState({loadingMore:!0,loadedProducts:o});const u=s?P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW:void 0;b.ProductMessageListCollection.update(t,{markerId:u}).then((e=>{if(n.aborted)return void(s&&k.QPL.markerDrop(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW));this.setState({loadingMore:!1});const t=(Array.isArray(e)?e[0]:e).getTotalProductsFetchedOrFailed();t===r&&this.setState({stopLoading:!0}),s&&(k.QPL.markerAnnotate(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{int:{ProductsCount:t}}),k.QPL.markerEnd(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,k.QuickLogActionType.SUCCESS)),o*c.default.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&this._loadMoreProduct()})).catch((()=>{this.setState({loadingMore:!1,stopLoading:!0}),s&&k.QPL.markerEnd(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,k.QuickLogActionType.FAIL)}))},this.onScroll=e=>{this.handleScroll(e.currentTarget),this.props.setScrollOffset&&this.props.setScrollOffset(e.currentTarget.scrollTop)},this._handleCartChange=()=>{const e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._handleCartClick=()=>{const{contact:e,onCartClick:t}=this.props;(0,j.qplStartCartView)("PLM"),t&&t(e.id.toString())};const t=b.ProductMessageListCollection.get(this.props.productListId),a=o.CartCollection.findCart(this.props.contact.id.toString());this.state={loadingMore:!1,loadedProducts:0,stopLoading:!1,productMessageList:t,cart:a,cartCount:a.itemCount,cartEnabled:!1,productMessageListFetchState:t?"SUCCESS":"NONE"}}componentDidMount(){const{listeners:e,contact:t}=this.props,a=this.props.getUnmountSignal();e.add(this.state.cart,"all",this._handleCartChange),this.state.productMessageList?this._loadMoreProduct(!0):this._findProductMessageList(),(0,u.default)(t.id).then((e=>{a.aborted||this.setState({cartEnabled:e})}))}_findProductMessageList(){var e=this;return(0,i.default)((function*(){const{isPushed:t=!0}=e.props;try{const a=e.props.getUnmountSignal(),n=yield b.ProductMessageListCollection.find(e.props.productListId);if(a.aborted)return void(t&&k.QPL.markerDrop(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW));e.setState({productMessageList:n,productMessageListFetchState:"SUCCESS"}),e._loadMoreProduct(!0)}catch(a){(0,v.parseErrorState)(a,(t=>e.setState({productMessageListFetchState:t}))),t&&k.QPL.markerEnd(P.QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,k.QuickLogActionType.FAIL)}}))()}_getDrawerContent(){const{productMessageList:e}=this.state;return e?(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{children:[(0,O.jsx)(I.default,{productMessageList:e,flatListController:this._productListFlatListController,onProductDetail:this.props.onProductDetail}),this.state.loadingMore&&(0,O.jsx)(_.default,{})]})}):(0,O.jsx)(x.default,{fetchState:this.state.productMessageListFetchState})}_getCartIcon(){const{onCartClick:e,contact:t}=this.props;if(e&&this.state.cartEnabled){const e=this.state.cartCount,a=(0,L.isNumber)(e)&&e>0?e.toString():void 0,n=(0,y.getOnCartClickWithLog)(this._handleCartClick,t.id.toString(),(0,T.getProductCatalogContext)(this.context));return(0,O.jsx)(E.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:(0,O.jsx)(d.default,{theme:"inherit-color"}),text:a,title:s.default._("Your cart",null,{hk:"Sn66V"}),onClick:n})}return null}render(){const{productMessageList:e}=this.state;return(0,O.jsxs)(h.default,{theme:"products",onDrop:this.props.onBack,children:[(0,O.jsx)(m.DrawerHeader,{title:(0,O.jsx)("div",{className:w.default.title,children:(0,O.jsx)(g.EmojiText,{text:null==e?void 0:e.title,ellipsify:!0})}),type:m.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:this._getCartIcon()}),(0,O.jsx)(f.default,{onScroll:this.onScroll,flatListControllers:[this._productListFlatListController],scrollOffset:this.props.scrollOffset,children:this._getDrawerContent()})]})}}t.ProductMessageListDrawerImpl=D,D.contextType=p.DrawerContext,D.CONCERNS={contact:["id"]},D.displayName="ProductMessageListDrawerImpl";const R=(0,A.default)((0,S.ListenerHOC)((0,M.default)(D,D.CONCERNS)));t.ProductMessageListDrawer=R},8714:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onConfirm:t}=e;return(0,l.jsx)(i.default,{onOK:t,okText:s.default.t(1764),children:(0,l.jsx)(r.EmojiText,{text:s.default.t(1098)})})};var i=n(a(52665)),r=a(65417),s=n(a(43725)),l=a(85893)},5537:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(45095)),r=a(67294),s=a(99989),l=n(a(43725)),o=a(56728),d=n(a(29861)),u=a(85893);const c=(e,t)=>{const[a,n]=(0,r.useState)(!1),[c,h]=(0,r.useState)([]),f=(0,u.jsx)(d.default,{disabled:!a,onClick:()=>{var t;const a=(0,i.default)(null===(t=c[0])||void 0===t?void 0:t.catalogWid,"products[0]?.catalogWid"),n=(0,i.default)(s.CatalogCollection.get(a),"CatalogCollection.get(catalogWid)");e.onShare(n)}});return(0,u.jsx)(o.SelectModal,{ref:t,title:l.default.t(1254),onCancel:e.onCancel,onConfirm:e.onConfirm,listType:o.ListType.PRODUCT_SELECT_MODAL,enableSearchBox:!1,customHeader:f,onSelectionChanged:(e,t,a)=>{n(0===a.length)},onDataLoaded:e=>{const t=e;h(t),n(t.length>0)}})};var h=(0,r.forwardRef)(c);t.default=h},29861:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.disabled?l.default.disabled:"",a=e.disabled?null:e.onClick,n=(0,d.jsx)("span",{className:l.default.title,children:r.default.t(1069)}),u=(0,d.jsx)(s.default,{theme:"compact",disabled:e.disabled,children:(0,d.jsx)(o.default,{name:"catalog"})});return(0,d.jsx)(i.default,{image:u,onClick:a,primary:n,theme:"list-button-compact",className:t})};var i=n(a(44356)),r=n(a(43725)),s=n(a(52711)),l=n(a(97145)),o=n(a(23217)),d=a(85893)},56790:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(99964)),r=n(a(44356)),s=a(22683),l=n(a(8959)),o=a(85893);t.default=e=>{let{title:t,icon:a,t:n}=e;const d=null!=n?s.Clock.relativeDateAndTimeStr(n):"-",u=(0,o.jsxs)("div",{className:l.default.title,"data-a8n":i.default.key("msg-info-title"),children:[a,t]});return(0,o.jsx)(r.default,{primary:u,secondary:d,theme:"plain",idle:!0})}},82678:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,o.useModelValues)(e.msg,["numTimesForwarded","isFrequentlyForwarded"]),{numTimesForwarded:a,isFrequentlyForwarded:n}=t;if(a<=0||n)return null;const u=(0,d.jsx)(s.default,{name:"forwarded",display:"inline",className:r.default.icon}),c=i.default.t(483,{count:a,_plural:a});return(0,d.jsxs)("div",{className:r.default.title,children:[u,(0,d.jsx)(l.TextSpan,{theme:"title",className:r.default.text,children:c})]})};var i=n(a(43725)),r=n(a(78749)),s=n(a(23217)),l=a(13923),o=a(49082),d=a(85893)},35487:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=n(a(22245)),o=a(65511),d=a(69951),u=n(a(69618)),c=a(2732),h=a(47915),f=a(55414),p=n(a(43725)),m=n(a(11497)),g=n(a(87481)),v=n(a(59552)),x=n(a(83800)),C=a(85893);const _={height:"ttegvvei",overflowX:"gfz4du6o",overflowY:"r7fjleex",backgroundColor:"ihvf49ua"};function S(e,t){const{contacts:a,frequentContacts:n,onFocusSearch:S,onClick:y,showPersonGroupDivisionHeader:j}=e,E=(0,r.useRef)(null),T=(0,v.default)((()=>new g.default([],(e=>e.id.toString())))),I=()=>{T.current.setFirst(!0)};(0,r.useImperativeHandle)(t,(()=>({focusFirst:I})));const b=(e,t)=>{const a=(t?c.FREQUENT_PREFIX:"")+e.id.toString();if(e.isGroup){const n=d.ChatCollection.get(e.id);return n?{itemKey:a,data:n,type:3,frequent:t}:null}return{itemKey:a,data:e,type:2,frequent:t}},w=(0,r.useMemo)((()=>{const e=[];return null==n||n.forEach((t=>{const a=b(t,!0);a&&e.push(a)})),e}),[n]),k=(0,x.default)((e=>{if(0===e.length)return[];const t=e[0].isGroup?"group":"contact",a=[],n=e.length>10;let i="XXX";for(let r=0;r<e.length;r++){const s=e[r];if(n&&s.header){const n=s.header;if(n!==i){const s=r<e.length-1&&n!==e[r+1].header;a.push({itemKey:`header-${t}-${n}`,data:n,separator:s,type:1}),i=n}}const l=b(s);l&&a.push(l)}return a})),P=(0,r.useMemo)((()=>{const t=[],n=[],r=[];w.length&&(t.push({itemKey:"frequent-contacts-header",type:0}),t.push(...w)),a.forEach((e=>{e.isGroup?r.push(e):n.push(e)}));const s=k(n),l=k(r);if(j&&s.length>0){const e=p.default.t(1591);t.push({itemKey:`header-${e}`,data:e,separator:!0,type:1})}if(t.push(...s),j&&l.length>0){let a;a=!0===e.isCommunityCreation?i.default._("Groups you're an admin of",null,{hk:"YrVyI"}).toString():i.default._("Groups",null,{hk:"4bUoVs"}).toString(),t.push({itemKey:`header-${a}`,data:a,separator:!0,type:1})}return t.push(...l),t}),[a,w,k,j,e.isCommunityCreation]);return T.current.init((()=>{const e=[],t=[];return a.forEach((a=>{if(a.isGroup){const e=d.ChatCollection.get(a.id);e&&t.push(e)}else e.push(a)})),(n||[]).concat(e).concat(t)})()),(0,C.jsx)(f.HotKeys,{onRef:e=>{E.current=e},handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),T.current.setNext(!0)},up:e=>{e.preventDefault(),e.stopPropagation();const t=T.current;t.prev()>-1?t.setPrev(!0):(t.unset(),S(e))}},onFocus:e=>{if(e.target!==E.current)return;const t=T.current;t.index<0?I():t.reset(!0)},"data-tab":u.default.TAB_ORDERS.CHAT_CONTACT_LIST,"data-testid":"contact-list-key",children:(0,C.jsx)(h.FlatList,{data:P,renderItem:function(t){switch(t.type){case 0:return(0,C.jsx)(m.default,{header:p.default.t(1622)},"frequent-contacts-header");case 3:const{data:a,frequent:n}=t;return((t,a)=>!0===e.disabled?(0,C.jsx)(o.Chat,{chat:t,mode:o.Mode.INFO,noContext:!0,frequent:a,theme:"disabled"}):(0,C.jsx)(o.Chat,{active:T.current,chat:t,mode:o.Mode.INFO,noContext:!0,onClick:y,frequent:a}))(a,n);case 2:const{data:r,frequent:d}=t;return((e,t)=>{let a;return e.isBlocked()&&(a=i.default._("Contact is blocked",null,{hk:"284Coh"})),(0,C.jsx)(c.Contact,{active:T.current,contact:e,onClick:y,secondary:a,frequent:t,waitIdle:!0})})(r,d);case 1:const{data:u,separator:f}=t;return(0,C.jsxs)("div",{className:(0,s.default)(_),children:[f?(0,C.jsx)(l.default,{},`separator-${u}`):null,(0,C.jsx)(m.default,{header:u})]});default:throw new h.UnknownDataError(t)}},flatListController:e.flatListController,direction:"vertical"})})}var y=(0,r.forwardRef)(S);t.default=y},53153:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(35161)),r=a(67294),s=a(2732),l=a(55414),o=n(a(43725)),d=n(a(87481)),u=n(a(59552)),c=a(85893);function h(e,t){const{contacts:a,onFocusSearch:n,onDelete:h}=e,f=(0,u.default)((()=>new d.default(a,(e=>e.id.toString())))),p=()=>{(null==a?void 0:a.length)&&f.current.setLast(!0)},m=e=>{e.preventDefault(),e.stopPropagation();f.current.prev()>-1&&f.current.setPrev(!0)},g=e=>{e.preventDefault(),e.stopPropagation();const t=f.current.next();f.current.index===t?(f.current.unset(),n&&n(e)):f.current.setNext(!0)},v=e=>{e.preventDefault(),e.stopPropagation();const t=f.current.getVal();if(t){const n=a.find((e=>e===t));n&&h&&h(e,n)}},x=(e,t)=>{f.current.setVal(t)};if((0,r.useEffect)((()=>{f.current.init(a,!0)}),[a,f]),(0,r.useImperativeHandle)(t,(()=>({focusLast:p}))),!a)return null;const C=a.length?(0,i.default)(a,(t=>(0,c.jsx)(s.Contact,{contact:t,active:f.current,onDelete:e.onDelete,onClick:x,type:s.Type.SMALL,theme:e.theme,waitIdle:!0},t.id.toString()))):null,_={up:m,down:g};e.onDelete&&(_[o.default.LR("left","right")]=m,_[o.default.LR("right","left")]=g,_.backspace=v);const S=(0,c.jsx)("ul",{children:C});return(0,c.jsx)(l.HotKeys,{handlers:_,children:S})}var f=(0,r.forwardRef)(h);t.default=f},57850:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{ids:t,size:a,onClick:n,showCount:o,square:d,border:u}=e,c=t.length;if(0===c)return null;if(1===c)return(0,l.jsx)(s.DetailImage,{id:t[0],size:40,onClick:n,border:u});const h=t.slice(0,4).map(((e,t)=>(0,l.jsx)("div",{className:(0,i.default)(r.default.avatar,{[r.default.first]:0===t,[r.default.second]:1===t,[r.default.third]:2===t,[r.default.fourth]:3===t}),children:(0,l.jsx)(s.DetailImage,{id:e,size:a,square:!0})},`avatar-combo-image-${t}`))),f=(0,i.default)(r.default.container,{[r.default.square]:d,[r.default.border]:u},{[r.default.two]:2===c,[r.default.three]:3===c,[r.default.four]:c>=4}),p=(0,s.getSize)(a),m={height:p,width:p,cursor:n?"pointer":void 0},g=o?(0,l.jsx)("div",{className:r.default.count,style:m,children:t.length}):null;return(0,l.jsxs)("div",{className:f,style:m,onClick:n,children:[h,g]})};var i=n(a(94184)),r=n(a(72084)),s=a(88984),l=a(85893)},50514:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsxs)("div",{className:r.default.overlay,children:[(0,s.jsx)("div",{className:r.default.icon,children:e.icon}),(0,s.jsx)("div",{"data-a8n":i.default.key("avatar-text"),className:r.default.text,children:e.text})]},"avatar-overlay")};var i=n(a(99964)),r=n(a(79169)),s=a(85893)},8334:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(6479)),s=a(67294),l=n(a(56720)),o=a(85893);const d=["breakpoint","inverseToContainer","maxWidth","minWidth","xstyle"],u={boxSizing:"cm280p3y",flexShrink:"oq44ahr5",position:"g0rxnol2"};function c(e,t){let{breakpoint:a,inverseToContainer:n=!1,maxWidth:s,minWidth:c,xstyle:h}=e,f=(0,r.default)(e,d);return(0,o.jsx)("div",(0,i.default)((0,i.default)({},f),{},{className:(0,l.default)(u,h),ref:t,style:{maxWidth:s,minWidth:c,width:n?`calc((${a}px - 100%) * 9999)`:`calc((100% - ${a-.1}px) * 9999)`}}))}var h=(0,s.forwardRef)(c);t.default=h},72332:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,label:a,prefixIcon:n,postfixIcon:c,xstyle:h}=e,f="padded-svg"===e.iconTheme,p=[u.iconSvg,f?u.paddedSvg:r.uiPadding.all4],m={width:f?20:16,height:f?20:16};return(0,d.jsxs)(o.default,{xstyle:[u.container,r.uiPadding.vert8,r.uiPadding.horiz12,null!=n&&r.uiPadding.start36,null!=c&&r.uiPadding.end36,h],onClick:t,"aria-label":e["aria-label"],children:[n&&(0,d.jsx)(l.default,(0,i.default)({name:n,xstyle:[u.icon,u.prefixIcon,r.uiMargin.start5],iconXstyle:p},m)),(0,d.jsx)("div",{className:(0,s.default)(u.content),children:a}),c&&(0,d.jsx)(l.default,(0,i.default)({name:c,xstyle:[u.icon,r.uiMargin.start5],iconXstyle:p},m))]})};var i=n(a(81109)),r=a(28298),s=n(a(56720)),l=n(a(23217)),o=n(a(1784)),d=a(85893);const u={container:{position:"g0rxnol2",color:"nuiuantz",backgroundColor:"jvy3y6qh",borderTopStartRadius:"g130k69c",borderTopEndRadius:"k1a7joe8",borderBottomEndRadius:"dc5qina8",borderBottomStartRadius:"kfr1vweg"},content:{display:"l7jjieqr"},icon:{display:"l7jjieqr",position:"lhggkp7q",right:"rsmgdaqi",top:"mvf5n2qr"},iconSvg:{color:"nuiuantz"},prefixIcon:{left:"lidbxt4q"},paddedSvg:{paddingTop:"qbqilfqo",paddingEnd:"iqx13udk",paddingBottom:"a15vwmim",paddingStart:"qiohso4h"}}},16194:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t,download:a,file:n,extension:o}=e;return(0,s.jsx)(r.default,{xstyle:l.button,onClick:()=>{null!=n&&i.FileSaver.downloadData(n,a,o)},children:t})};n(a(56720));var i=a(77811),r=n(a(1784)),s=a(85893);const l={button:{display:"f804f6gw"}}},28768:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;const a=(0,n.useRef)(null);(0,i.useListener)(t,"mousedown",(()=>{a.current=performance.now()})),(0,i.useListener)(t,"mouseup",(()=>{a.current=null}));const r=(0,n.useCallback)((()=>{const t=a.current;return null!=t&&performance.now()-t>=e}),[e]);return r};var n=a(67294),i=a(19529)},33743:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,n.useRef)(null),a=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{if(null==e)return;function n(e){const a=t.current;return!!a&&(e instanceof Node&&!a.contains(e))}function i(e){if(e.isPrimary){const t=n(e.target);a.current=t}}function r(e){"touch"!==e.pointerType&&"pen"!==e.pointerType||(a.current=!1)}function s(t){const i=n(t.target);a.current&&i&&t.isPrimary&&e(t),a.current=!1}function l(t){n(t.target)&&e(t)}const o="PointerEvent"in window;return o?(document.addEventListener("pointerdown",i),document.addEventListener("pointermove",r),document.addEventListener("pointerup",s)):document.addEventListener("click",l),()=>{o?(document.removeEventListener("pointerdown",i),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",s)):document.removeEventListener("click",l)}}),[e]),t};var n=a(67294)},152:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const a=(0,r.default)(t),[n,s]=(0,i.useState)(e),l=(0,i.useCallback)((()=>s((e=>{const t=!e;return a(t),t}))),[a]);return[n,l]};var i=a(67294),r=n(a(83800))},31469:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(35161)),r=n(a(45095)),s=n(a(45120)),l=n(a(52013)),o=n(a(94184)),d=a(67294),u=n(a(69618)),c=a(32303),h=a(55414),f=n(a(58780)),p=n(a(43725)),m=n(a(59578)),g=n(a(87481)),v=a(11054),x=n(a(1784)),C=n(a(59552)),_=n(a(88857)),S=a(85893);function y(e,t){const{onImageClick:a,isLoadingMore:n,canLoadMore:y,onRequestMoreImages:j,onFocusPrev:E,thumbnails:T}=e,I=(0,d.useRef)(null),b=(0,C.default)((()=>new Map)),w=(0,d.useRef)(null),k=(0,C.default)((()=>new g.default(T,(e=>e.id)))),[P,M]=(0,d.useState)(null),L=(0,d.useCallback)((function(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=k.current,a=t.getVal();if(a&&P!==a&&(M(a),t.index>-1)){const a=b.current.get(`${t.index}`);l.default.focus(a),e&&a&&(0,c.scrollIntoViewIfNeeded)(a,!1)}}),[b,P,k]),A=new m.default(((e,t)=>{t?b.current.set(e,t):b.current.delete(e)})),O=e=>{const t=e.target;a&&1===t.nodeType&&"IMG"===t.tagName&&a(t.src)},D=(0,d.useCallback)((()=>{if(!n&&y&&j){if(!I.current)throw new Error("Requesting more images when body not rendered");I.current.scrollTop+u.default.SCROLL_FUDGE>I.current.scrollHeight-I.current.clientHeight&&j()}}),[y,n,j]),R=(0,_.default)(D,100),N=()=>{k.current.unset(),M(void 0)};(0,d.useEffect)((()=>{D(),k.current.init(T,!1),L()}),[D,k,T,L]);const F=()=>{w.current&&w.current.focus()};(0,d.useImperativeHandle)(t,(()=>({focus:F,handleRequestDismiss:N})));const B=(0,i.default)(e.thumbnails,((e,t)=>{let{id:a,name:n,thumbUrl:i}=e;const r=!!P&&P.id===a,s=(0,o.default)(f.default.imageGalleryItem,{[f.default.selected]:r}),l=(0,S.jsx)("div",{className:f.default.imageGalleryItemOverlay});return(0,S.jsxs)("div",{ref:A.getRefSetter(`${t}`),className:s,tabIndex:-1,children:[l,(0,S.jsx)(x.default,{onClick:O,children:(0,S.jsx)("img",{alt:p.default.t(7,{name:n}),className:f.default.imageGalleryItemImage,src:i})})]},a)})),U=e.isLoadingMore?(0,S.jsx)("div",{tabIndex:-1,className:f.default.imageGalleryFooter,children:(0,S.jsx)(v.Spinner,{stroke:6,size:24})}):null;return(0,S.jsx)(h.HotKeys,{className:f.default.imageGallery,"data-tab":u.default.TAB_ORDERS.CHAT_IMAGE_GALLERY,handlers:{down:e=>{e.preventDefault(),e.stopPropagation(),k.current.set(k.current.index+3,!1,!1),L(!0,!0)},enter:()=>{const e=k.current.getVal();e||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("No value selected, but enter clicked")),a&&e&&a(e.thumbUrl)},left:e=>{e.preventDefault(),e.stopPropagation(),k.current.setPrev(!1),L(!0,!0)},right:e=>{e.preventDefault(),e.stopPropagation(),k.current.setNext(!1),L(!0,!0)},up:e=>{if(e.preventDefault(),e.stopPropagation(),0===k.current.index&&E)E();else{const e=Math.max(k.current.index-3,0);k.current.set(e,!1,!1),L(!0,!0)}}},onFocus:e=>{e.stopPropagation(),e.preventDefault(),(null==k.current.index||k.current.index<0)&&k.current.setFirst(!1),L(!0,!1);const t=(0,r.default)(b.current.get(`${k.current.index}`),"imagesRef.current.get(`${selectionRef.current.index}`)").getElementsByClassName(f.default.imageGalleryItemOverlay);if(1!==t.length)throw new Error(`Unexpected number of overlay elements ${t.length}`);s.default.maybeIndicateFocus(t[0],f.default.focusAnimation)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onRef:e=>{w.current=e},children:(0,S.jsxs)("div",{ref:I,className:f.default.imageGalleryList,onScroll:R,children:[B,(0,S.jsx)("div",{tabIndex:-1,className:f.default.imageGalleryItemSpacer}),(0,S.jsx)("div",{tabIndex:-1,className:f.default.imageGalleryItemSpacer}),(0,S.jsx)("div",{tabIndex:-1,className:f.default.imageGalleryItemSpacer}),U]})})}var j=(0,d.forwardRef)(y);t.default=j},60195:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(14330);const r=(e,t)=>{const[a,r]=(0,i.useLottie)(e);return(0,n.useImperativeHandle)(t,(()=>r)),a};var s=(0,n.forwardRef)(r);t.default=s},14330:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0,t.useLottie=function(e){let{autoplay:t=!1,data:a,direction:n=1,fallback:u=null,loop:c=!1,path:h,placeholder:f=null,renderer:p=d.SVG,speed:m=1,xstyle:g}=e;(0,i.default)(null==a&&null!=h||null!=a&&null==h,"These opts are mutually exclusive");const v=(0,s.useRef)(),x=(0,s.useRef)(),[C,_]=(0,s.useState)(!0),[S,y]=(0,s.useState)(!1),j=(0,s.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.play()}),[]),E=(0,s.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.stop()}),[]),T=(0,s.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||e.pause()}),[]),I=(0,s.useCallback)(((e,t)=>{var a;null===(a=v.current)||void 0===a||a.goToAndPlay(e,t)}),[]),b=(0,s.useCallback)(((e,t)=>{var a;null===(a=v.current)||void 0===a||a.goToAndStop(e,t)}),[]),w=(0,s.useCallback)((e=>{var t;null===(t=v.current)||void 0===t||t.getDuration(e)}),[]);(0,s.useEffect)((()=>{const e=r.default.loadAnimation({container:x.current,animationData:a,path:h,renderer:p,loop:c,autoplay:t});v.current=e;const n=[{name:"data_ready",handler:()=>_(!1)},{name:"data_failed",handler:()=>y(!0)}].map((t=>(e.addEventListener(t.name,t.handler),()=>e.removeEventListener(t.name,t.handler))));return()=>{n.forEach((e=>e())),e.destroy()}}),[a,h,p,c,t]),(0,s.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setSpeed(m)}),[m]),(0,s.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setDirection(n)}),[n]);return[(0,o.jsxs)("div",{className:(0,l.default)(g),ref:x,children:[C&&!S?f:null,S?u:null]}),{play:j,stop:E,pause:T,goToAndPlay:I,goToAndStop:b,getDuration:w}]};var i=n(a(41143)),r=n(a(11248)),s=a(67294),l=n(a(56720)),o=a(85893);const d=a(54302)({SVG:"svg",Canvas:"canvas"});t.Renderer=d},3028:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(94184)),r=n(a(48360)),s=a(67294),l=a(88102),o=n(a(52665)),d=a(60811),u=a(30424),c=a(18609),h=a(55414),f=n(a(43725)),p=n(a(43698)),m=n(a(38376)),g=a(16477),v=n(a(23217)),x=a(18644),C=n(a(24717)),_=a(3940),S=n(a(41956)),y=a(85893);const j=()=>{l.Cmd.openModal((0,y.jsx)(o.default,{title:r.default._("Caption Too Long",null,{hk:"2GOVgN"}),onOK:()=>{l.Cmd.closeModal()},okText:f.default.t(1764),children:r.default._("The caption youre pasting is too long. Try shortening it or sending it as a separate message.",null,{hk:"4Br93m"})}))};function E(e,t){const{value:a,focusOnMount:n,onBlur:l,onFocus:o,maxLength:E=25,onMaxPasteExceeded:T=j}=e,I=(0,s.useRef)(null),b=(0,s.useRef)(null),w=(0,s.useRef)(null),[k,P]=(0,s.useState)(!1),[M,L]=(0,s.useState)(null),A=(0,_.numCodepoints)(e.value||""),O=()=>{var e;null===(e=I.current)||void 0===e||e.focus()};(0,s.useEffect)((()=>{!0===n&&O()}),[]);const D=()=>{L(null)},R=e=>{const t=I.current;t&&(t.focus(!1),t.replaceSelection(e)),D()},N=()=>{var e;null===(e=w.current)||void 0===e||e.restoreFocus()},F=e=>{k&&P(!1),l&&l(e)},B=e=>{e.stopPropagation(),k||P(!0),o&&o(e)};(0,s.useImperativeHandle)(t,(()=>({handleBlur:F,handleFocus:B,refInput:I.current})));const U=e.supportsEmoji?(0,y.jsx)("button",{className:m.default.inputEmoji,onClick:e=>{e&&(e.preventDefault(),e.stopPropagation());const t=(0,y.jsx)(u.EmojiPanel,{ref:w,onEmoji:R,onFocusNext:O,onFocusPrev:O});L({menu:t,dirY:d.DirY.TOP,type:"emoji_picker",anchor:e.target}),O()},children:(0,y.jsx)(v.default,{"aria-label":r.default._("Open emojis panel",null,{hk:"3IEMY6"}),name:"emoji-input"})}):void 0;let H=null;H=null!=a&&""!==a?(0,y.jsx)("button",{className:m.default.clearInput,onClick:()=>{var e;null===(e=I.current)||void 0===e||e.reset()},children:(0,y.jsx)(v.default,{name:"x-alt"})}):null;const G=!0===e.showRemaining?(0,y.jsx)("div",{className:(0,i.default)(m.default.buttonContainer,m.default.charCounter,{[m.default.charCounterWithClearBtn]:!!H}),children:(0,y.jsx)("div",{className:m.default.charCounter,children:E-A<50?f.default.n(E-A):null})}):null;let V;M&&(V=(0,y.jsx)(x.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:D,requestFocus:N,children:(0,y.jsx)(C.default,{contextMenu:M})}));const W=(0,i.default)(m.default.textInput,{[m.default.noPlaceholder]:!e.placeholder,[m.default.active]:!0}),z=(0,i.default)(m.default.labelText,{[m.default.float]:!!e.value});return(0,y.jsxs)(h.HotKeys,{className:W,onFocus:O,children:[(0,y.jsx)("span",{className:z,children:e.placeholder}),(0,y.jsx)("div",{className:m.default.spacer}),(0,y.jsx)("div",{className:m.default.suggestionsPositioner,children:(0,y.jsxs)("div",{className:m.default.suggestionsContainer,children:[(0,y.jsx)(p.default.MentionSuggestions,{chat:e.chat,theme:g.ThemeOptions.MEDIA_CAPTION}),(0,y.jsx)(p.default.EmojiSuggestions,{chat:e.chat,theme:c.ThemeOptions.MEDIA_CAPTION})]})}),(0,y.jsxs)("div",{className:(0,i.default)(m.default.wrapper,{[m.default.textActive]:k}),children:[(0,y.jsx)(p.default,{ref:I,initialValue:e.value,initialSelection:b.current,readOnly:!1,spellCheck:e.spellCheck,multiline:e.multiline,maxLength:e.maxLength,onEnter:e.onEnter,onMaxPasteExceeded:T,onFiles:e.onFiles,onChange:e.onChange,onSelect:e=>{b.current=e},theme:"media-caption"}),(0,y.jsxs)("div",{className:m.default.inputControls,children:[(0,y.jsxs)(S.default,{transitionName:"pop",component:"div",className:m.default.buttonContainer,children:[H,U]}),G]})]}),V]})}var T=(0,s.forwardRef)(E);t.default=T},1697:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(69618)),s=n(a(91050)),l=n(a(20487)),o=a(49082),d=a(85893);function u(e,t){const a=(0,i.useRef)(null),n=(0,o.useModelValues)(e.chatPreference,["wallpaperColor","showDoodle"]);(0,i.useImperativeHandle)(t,(()=>({get container(){return a.current}})));const{wallpaperColor:u,showDoodle:c}=n;let h={};return u!==r.default.DEFAULT_CHAT_WALLPAPER&&(h={backgroundColor:u}),(0,d.jsx)("div",{className:l.default.container,ref:a,children:(0,d.jsxs)("div",{className:l.default.body,style:h,children:[(0,d.jsx)(s.default,{wallpaperColor:u,showDoodle:c}),e.children]})})}var c=(0,i.forwardRef)(u);t.default=c},82541:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(63105)),s=i(a(99964)),l=i(a(52013)),o=i(a(48360)),d=a(67294),u=i(a(50514)),c=i(a(46918)),h=a(88102),f=i(a(52665)),p=i(a(69618)),m=a(19380),g=i(a(56792)),v=a(71174),x=i(a(37792)),C=a(1063),_=i(a(72451)),S=i(a(3222)),y=a(55414),j=i(a(89936)),E=i(a(47065)),T=i(a(43725)),I=n(a(97692)),b=a(57224),w=i(a(11791)),k=i(a(5582)),P=i(a(43556)),M=i(a(71528)),L=i(a(23217)),A=i(a(81499)),O=a(65127),D=a(18644),R=i(a(24717)),N=i(a(41956)),F=a(85893);class B extends d.Component{constructor(){super(...arguments),this.state={img:this.props.startImage,hover:!1,imageSize:null},this._setRefImageContainer=e=>{this._refImageContainer=e},this._setRefImageInput=e=>{this._refImageInput=e},this._handleUpload=()=>{const e=this._refImageInput;if(e)return e.click(),!0},this._removeImage=()=>{this.props.onImageSet(),h.Cmd.closeModal()},this._handleRemove=()=>{let e;switch(this.props.type){case P.default.GROUP:e=T.default.t(1140);break;case P.default.COMMUNITY:e=T.default.t(1138);break;case P.default.PROFILE:e=T.default.t(1143)}h.Cmd.openModal((0,F.jsx)(f.default,{onOK:this._removeImage,okText:T.default.t(1137),onCancel:()=>h.Cmd.closeModal(),cancelText:T.default.t(1573),children:e}))},this._handleView=()=>{const e=this._refImageContainer,{id:t,attachToChat:a}=this.props;if(!e||!t)return;const n=m.ContactCollection.assertGet(t),i={transition:"profile-viewer"};a&&(i.uim=this.props.uim),h.Cmd.openModalMedia((0,F.jsx)(M.default,{contact:n,profilePicThumb:n.getProfilePicThumb(),animateBorderRadius:!0,getZoomNode:t=>{t(e)}}),i)},this.handlePaste=e=>{if(!this.state.contextMenu)return;const t=new g.default(e.clipboardData),a=(0,r.default)(t.getFiles(),(e=>"image"===(0,C.typeFromMimetype)(e.type)));if(!a.length)return;e.preventDefault(),e.stopPropagation(),this.closeContextMenu();const n=a[0];this._handleImagePick(n)},this.handleImageSelected=e=>{this.closeContextMenu();const t=e.target.files[0];if(!t)return!1;this._handleImagePick(t),e.target.value="",this._refImageContainer&&l.default.focus(this._refImageContainer)},this._handleImageReceived=(e,t)=>{e?I.loadImage(e).then((()=>{this.setState({img:e}),this.props.onImageSet(e,t)})).catch((e=>{let t;switch(__LOG__(3)`PhotoPicker:onImageReceived failed to load image: ${String(e)}`,this.props.type){case P.default.GROUP:t=T.default.t(72);break;case P.default.COMMUNITY:t=o.default._("Couldn't set community icon.",null,{hk:"18qLe8"});break;case P.default.PROFILE:t=T.default.t(126)}h.Cmd.openModal((0,F.jsx)(f.default,{onOK:()=>h.Cmd.closeModal(),children:t}))})):this.setState({img:null,imageSize:null})},this.handleSearch=()=>{h.Cmd.openModal((0,F.jsx)(b.Modal,{type:b.ModalTheme.Box,children:(0,F.jsx)(j.default,{onFinished:this._handleImageReceived})}))},this._handleImagePick=e=>{const t=URL.createObjectURL(e);I.loadImage(t).then((t=>{t&&(t.width<p.default.MIN_PIC_SIDE||t.height<p.default.MIN_PIC_SIDE)?h.Cmd.openModal((0,F.jsx)(f.default,{onOK:()=>h.Cmd.closeModal(),children:T.default.t(1121,{size:p.default.MIN_PIC_SIDE,_plural:p.default.MIN_PIC_SIDE})})):h.Cmd.openModal((0,F.jsx)(b.Modal,{type:b.ModalTheme.Box,children:(0,F.jsx)(x.default,{img:e,onFinished:this._handleImageReceived,onRetake:this._handleUpload})}))})).catch((()=>{let e;switch(this.props.type){case P.default.GROUP:e=T.default.t(72);break;case P.default.COMMUNITY:e=o.default._("Couldn't set community icon.",null,{hk:"18qLe8"});break;case P.default.PROFILE:e=T.default.t(126)}h.Cmd.openModal((0,F.jsx)(f.default,{onOK:()=>h.Cmd.closeModal(),children:e}))})).finally((()=>{URL.revokeObjectURL(t)}))},this._createMenu=()=>{const e=[];return this.props.id&&this.state.img&&e.push((0,F.jsx)(v.DropdownItem,{a8n:"mi-view-photo",action:this._handleView,children:T.default.t(1452)},"view")),_.default&&e.push((0,F.jsx)(A.default,{onImageTake:this._handleImageReceived},"take")),e.push((0,F.jsx)(v.DropdownItem,{a8n:"mi-upload-photo",action:this._handleUpload,children:T.default.t(1405)},"upload")),O.UA.isElectron&&(this.props.type!==P.default.GROUP&&this.props.type!==P.default.COMMUNITY||e.push((0,F.jsx)(v.DropdownItem,{a8n:"mi-search-photo",action:this.handleSearch,children:T.default.t(1828)},"search"))),this.state.img&&e.push((0,F.jsx)(v.DropdownItem,{a8n:"mi-remove-photo",action:this._handleRemove,children:T.default.t(1142)},"remove")),e},this.handleImageKeypress=()=>{const e=this._createMenu();this.setState({contextMenu:{menu:e,anchor:this._refImageContainer}})},this.handleImageClick=e=>{if(this.props.readOnly)return void(this.state.img&&this._handleView());e.stopPropagation(),e.preventDefault();const t=this._createMenu();this.setState({contextMenu:{menu:t,event:e}})},this.closeContextMenu=()=>{this.setState({contextMenu:null})},this.handleMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this.handleMouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.handleMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.handleLoad=e=>{const t=e.target.clientWidth,a=e.target.clientHeight;this.setState({imageSize:{width:t,height:a}})}}static getDerivedStateFromProps(e){return e.startImage?{img:e.startImage}:{img:e.startImage,imageSize:null}}_getContainerStyle(){return null!=this.props.size?{width:this.props.size,height:this.props.size}:void 0}render(){let e,t;this.state.img&&(e=(0,F.jsx)(w.default,{type:"cover",size:this.state.imageSize,children:(0,F.jsx)(E.default,{src:this.state.img,crossOrigin:!1,style:{height:"100%",width:"100%"},onLoad:this.handleLoad})})),(this.props.pending||this.state.img&&!this.state.imageSize)&&(t=(0,F.jsx)(c.default,{}));let a=null;if(!this.props.pending&&!this.props.readOnly&&(!this.state.img||this.state.imageSize)&&(!this.state.img||this.state.contextMenu||this.state.hover)){let e="";switch(this.props.type){case P.default.GROUP:e=this.state.img?T.default.t(287):T.default.t(148);break;case P.default.COMMUNITY:e=this.state.img?o.default._("Change community icon",null,{hk:"2Oezsv"}):o.default._("Add community icon",null,{hk:"1K6P4Z"});break;case P.default.PROFILE:e=this.state.img?T.default.t(291):T.default.t(149)}a=(0,F.jsx)(u.default,{icon:(0,F.jsx)(L.default,{name:"camera"}),text:e})}const n=this.props.pending||!this.state.imageSize&&this.state.img?()=>{}:this.handleImageClick;let i,r;if(this.state.contextMenu&&(i=(0,F.jsx)(D.UIE,{displayName:"PhotoPickerContextMenu",escapable:!0,popable:!0,requestDismiss:this.closeContextMenu,children:(0,F.jsx)(R.default,{contextMenu:this.state.contextMenu})})),this.props.pending||!this.state.img||this.state.img&&!this.state.imageSize){const e=this.props.type===P.default.PROFILE?"default-user":"default-group";r=(0,F.jsx)("div",{className:k.default.defaultIcon,children:(0,F.jsx)(L.default,{name:e})})}return(0,F.jsxs)(y.HotKeys,{className:k.default.container,style:this._getContainerStyle(),handlers:{space:this.handleImageKeypress,enter:this.handleImageKeypress},children:[(0,F.jsxs)("div",{className:k.default.body,onClick:n,onMouseOver:this.handleMouseOver,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onPaste:this.handlePaste,onFocus:this.handleMouseEnter,onBlur:this.handleMouseLeave,ref:this._setRefImageContainer,title:o.default._("Photo Picker",null,{hk:"3TURye"}),dir:"ltr",tabIndex:0,role:"button","data-a8n":s.default.key(this.props.a8nText),children:[(0,F.jsxs)("div",{className:k.default.imageContainer,children:[e,r]}),(0,F.jsxs)(N.default,{transitionName:"fade",children:[t,a]})]}),(0,F.jsx)("input",{ref:this._setRefImageInput,type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",style:{display:"none"},onChange:this.handleImageSelected}),i]})}}B.displayName="PhotoPicker";var U=(0,S.default)(B);t.default=U},43698:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(1769)),r=a(52835),s=a(18609),l=n(a(70527)),o=a(72761),d=n(a(8103)),u=a(16477),c=n(a(68662));const h=new l.default,f=new i.default;class p extends((0,o.PluggableInput)([r.EmojiPlugin,f,h,d.default])){}t.default=p,p.MentionSuggestions=(0,c.default)(u.Suggestions,{plugin:h}),p.EmojiSuggestions=(0,c.default)(s.EmojiSuggestions,{plugin:f})},25324:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(94184)),r=a(82857),s=n(a(18312)),l=a(85893);var o=e=>{let{ariaLabel:t,large:a,a8nText:n,onClick:o,icon:d,count:u,disabled:c}=e;return(0,l.jsxs)("div",{className:(0,i.default)(s.default.container,{[s.default.disabled]:c}),children:[(0,l.jsx)(r.Round,{label:t,large:a,a8nText:n,onClick:o,disabled:c,children:d}),null!=u&&(0,l.jsx)("div",{className:(0,i.default)(s.default.count,{[s.default.large]:a}),children:(0,l.jsx)("span",{children:u})})]})};t.default=o},34544:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=a(67294),s=a(88102),l=n(a(52665)),o=a(94790),d=n(a(43725)),u=a(57224),c=a(43560),h=a(85893);t.default=e=>{let{doSave:t,afterSave:a,isValid:n,children:f,modalConfig:p,onError:m,title:g,onCancel:v}=e;const[x,C]=(0,r.useState)(c.EditType.EDITING),_=(0,h.jsx)(o.DrawerHeader,{title:g,type:o.DRAWER_HEADER_TYPE.POPUP,onCancel:()=>{s.Cmd.closeModal(),v&&v()}});return(0,h.jsx)(l.default,(0,i.default)({children:f,okText:d.default.t(1188),type:u.ModalTheme.Auto,onOK:()=>{C(c.EditType.PENDING),t().then((()=>{C(c.EditType.DONE),a&&a(),s.Cmd.closeModal()}),(e=>{C(c.EditType.ERROR),m&&m(e)}))},okSpinner:x===c.EditType.PENDING,okDisabled:x===c.EditType.PENDING||!n,title:_},p))}},38801:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(56720)),s=a(55414),l=n(a(97056)),o=n(a(41104)),d=a(85893);const u={tabContainer:{display:"p357zi0d",backgroundColor:"rv6u8h8g"},tab:{boxSizing:"cm280p3y",display:"p357zi0d",flexGrow:"ggj6brxn",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",height:"qmp0wt83",color:"a633jkfz",textTransform:"ofejerhi"},focused:{boxShadow:"lgn58c33"},selected:{paddingTop:"eujn52yf",color:"ky3f94nk",borderBottom:"qldwl5fi"}};var c=e=>{let{tabConfigs:t,selectedId:a,onSelect:n,tabXstyle:l,xstyle:o}=e;const c=(0,i.useRef)(a),f=(0,i.useRef)([]),p=t.map((e=>{let{id:t}=e;return t})),m=p.length-1;return(0,d.jsx)(s.HotKeys,{handlers:{right:()=>{const e=p.indexOf(c.current),t=e===m?0:e+1,a=f.current[t];a&&a.focus()},left:()=>{const e=p.indexOf(c.current),t=0===e?m:e-1,a=f.current[t];a&&a.focus()}},children:(0,d.jsx)("div",{role:"tablist",className:(0,r.default)(u.tabContainer,o),children:t.map(((e,t)=>{let{title:i,id:r}=e;return(0,d.jsx)(h,{ref:e=>{f.current[t]=e},selected:r===a,onSelect:()=>n(r),onFocus:()=>{c.current=r},xstyle:l,children:i},i)}))})})};t.default=c;const h=(0,i.forwardRef)(((e,t)=>{let{selected:a,onSelect:n,onFocus:i,children:s,xstyle:c}=e;const[h,f]=(0,l.default)(),p=(0,o.default)(t,h);return(0,d.jsx)("button",{ref:p,role:"tab",tabIndex:a?0:-1,"aria-selected":Boolean(a),title:s,className:(0,r.default)(u.tab,f&&u.focused,a&&u.selected,c),onClick:()=>{a||n()},onFocus:i,children:s})}))},81499:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageTake:t}=e;return(0,o.jsx)(r.DropdownItem,{action:()=>{i.Cmd.openModal((0,o.jsx)(s.EditCaptureFlowLoadable,{onFinished:t}))},a8n:"mi-take-photo",disabled:e.disabled,children:l.default.t(1336)})};var i=a(88102),r=a(71174),s=a(70174),l=n(a(43725)),o=a(85893)},56204:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t}=e,a=s.default.VERSION_STR;return(0,u.jsxs)(o.SelectableDiv,{"data-a8n":i.default.key("version"),className:(0,r.default)(d.default.versionInfo,t),selectable:!0,children:[l.default.t(1427,{version:""}),(0,u.jsx)("span",{dir:"LTR",children:a}),null,null]})};var i=n(a(99964)),r=n(a(94184)),s=(n(a(30381)),n(a(69618))),l=(a(12591),n(a(39428)),n(a(43725))),o=a(52596),d=n(a(6935)),u=a(85893)},83192:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(52013)),r=n(a(48360)),s=a(69951),l=a(88102),o=n(a(52665)),d=a(65417),u=n(a(32973)),c=n(a(12500)),h=n(a(43725)),f=a(89389),p=a(85893);class m extends u.default{constructor(){super(...arguments),this.filter=e=>{const t=e.groupMetadata;return!(!e.isGroup||e.isGroup&&!(null==t?void 0:t.participants.iAmMember()))&&((null==t?void 0:t.participants.get(this.props.contact.id))?r.default._("Already added to group",null,{hk:"4hdDHF"}).toString():!!(null==t?void 0:t.participants.iAmAdmin())||h.default.t(294))},this._confirmAddToGroup=e=>{this.props.requestFocus&&this.props.requestFocus(),this.push((0,p.jsx)(o.default,{cancelText:h.default.t(1573),okText:r.default._("Add participant",null,{hk:"48ECfz"}),onOK:this._addToGroup.bind(null,e),onCancel:this._pop,children:(0,p.jsx)(d.EmojiText,{text:h.default.t(354,{participant:this.props.contact.formattedName,subject:e.contact.name})})}))},this.requestFocus=()=>{if(!this.refUIE)return;const e=this.refUIE.getNode();e&&!e.contains(document.activeElement)&&i.default.focus(e)},this._addToGroup=e=>{(0,f.addParticipants)(e,[this.props.contact]).then((()=>{l.Cmd.openChatFromUnread(e).then((t=>{t&&l.Cmd.focusChatTextInput(e)}))})).catch((()=>{})),this.end()},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(c.default,{chats:s.ChatCollection.filter((e=>e.isGroup)),filter:this.filter,onCancel:this._pop,onGroup:this._confirmAddToGroup}))}}t.default=m},93259:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81629)),r=n(a(51463)),s=a(80666),l=a(88102),o=a(65100),d=n(a(32973)),u=a(7293),c=n(a(14500)),h=a(92157),f=a(65127),p=a(85893);class m extends d.default{constructor(){var e;super(...arguments),e=this,this._setRefMediaEditor=e=>{this._refMediaEditor=e},this.onCancel=()=>{this.props.onComplete&&this.props.onComplete(!1),this._clearAttachMedia(),this.props.mediaCollection.mediaPickerStatsLogger.logCancel(),this.end()},this.onFailedMedias=e=>{const t=e.filter((e=>e.isGif));if(t.length>0){const e=t.map((e=>e.filename));l.Cmd.once("ui_idle",(()=>{l.Cmd.pasteChatTextInput(this.props.chat,e.join(" "))})),this.props.onComplete&&this.props.onComplete(!1),this._clearAttachMedia(),this.props.mediaCollection.mediaPickerStatsLogger.logCancel(),this.end()}},this._sendMediaWithMentions=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{initCaptionUsed:n,isViewOnce:i}=a,{chat:r}=e.props;l.Cmd.once("ui_idle",(()=>{t.forEach(((t,a)=>{var n;const l=t.media,o={};if(0===a&&(o.quotedMsg=r.composeQuotedMsg,r.composeQuotedMsg=null),o.isViewOnce=i,o.mentionedJidList=t.mentionedJidList,o.caption=l.caption,o.addEvenWhilePreparing=l.previewable&&l.state===s.ATTACH_MEDIA_STATE.PROCESSING,null===(n=e.props.initCaption)||void 0===n?void 0:n.ctwaContextLinkData){const{ctwaContextLinkData:t,ctwaContext:a}=e.props.initCaption;o.ctwaContext=(0,h.prepareCtwaContextSend)(t,a)}l.sendToChat(r,o)})),e._clearAttachMedia()})),e.props.onComplete&&e.props.onComplete(!0,{initCaptionUsed:n}),e.props.mediaCollection.mediaPickerStatsLogger.logSend(),e.end()},this.setText=e=>{null!=e&&l.Cmd.once("ui_idle",(()=>{l.Cmd.pasteChatTextInput(this.props.chat,e)})),this.end()},this.handleRequestDismiss=e=>{var t;(null===(t=this._refMediaEditor)||void 0===t?void 0:t.handleRequestDismiss())&&(!1===e&&this.onCancel(),super.handleRequestDismiss())},this._clearAttachMedia=()=>{this.props.chat&&this.props.chat.setAttachMediaContents(null)}}componentDidMount(){l.Cmd.closeContextMenu(),l.Cmd.closeTooltip(),this.push((0,p.jsx)(c.default,{theme:"attach",ref:this._setRefMediaEditor,chat:this.props.chat,onClose:this.onCancel,initCaption:this.props.initCaption,onSendMedia:(0,r.default)(this._sendMediaWithMentions),mediaCollection:this.props.mediaCollection,onDropText:(0,r.default)(this.setText),sendAsSticker:this.props.sendAsSticker})),u.GK.supportsFeature(u.GK.F.MD_BACKEND)&&(0,o.eagerlyEstablishE2EESessionForMedia)(this.props.chat)}componentWillUnmount(){f.UA.isGecko?(0,i.default)((()=>l.Cmd.focusChatTextInput(this.props.chat))):l.Cmd.focusChatTextInput(this.props.chat)}}t.default=m},91037:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(32973)),s=n(a(43725)),l=a(56728),o=n(a(60356)),d=a(64551),u=n(a(93110)),c=a(85893);class h extends r.default{constructor(){super(...arguments),this._confirmSendContacts=e=>{this.push((0,c.jsx)(u.default,{contactList:e,onSend:()=>this._sendContacts(e),onBack:this._popNone,chat:this.props.chat}),"none"),this.contacts=e},this._sendContacts=e=>{const{chat:t}=this.props,a=t.composeQuotedMsg,n=t.getComposeContents().ctwaContext||void 0;(0,o.default)(e,t,a,n),t.composeQuotedMsg=null,this.props.onContactsSent(),this.end()},this._getContacts=()=>this.contacts,this._pop=()=>{this.pop()},this._popNone=()=>{this.pop("none")}}componentDidMount(){const e=this.props.serverProps.maxParticipants;this.contacts=[],this.push((0,c.jsx)(l.SelectModal,{title:s.default.t(1228),onCancel:this._pop,onConfirm:this._confirmSendContacts,getInitialItems:this._getContacts,listType:l.ListType.CONTACT_SELECT_MODAL,maxItems:e,allowBlockedContacts:!0}))}}t.default=e=>(0,c.jsx)(h,(0,i.default)((0,i.default)({},e),{},{serverProps:d.ServerProps}))},97669:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(88102),r=n(a(32973)),s=n(a(43725)),l=a(77975),o=a(24064),d=n(a(5537)),u=a(61358),c=a(85893);class h extends r.default{constructor(){super(...arguments),this.requestFocus=()=>{var e;const t=null===(e=this.refUIE)||void 0===e?void 0:e.getRef();null!=t&&(t instanceof HTMLElement||"function"!=typeof t.onFocusList||t.onFocusList())},this._sendProducts=e=>{const{chat:t}=this.props;(0,o.qplStartProductSendMessage)("Attachment",e.length);const a=e.map(((e,a)=>{const n=0===a?t.composeQuotedMsg:null;return t.sendProductMessage(e,n).then((()=>{(0,l.logProductMessageSent)({product:e,catalogSessionId:this.props.sessionId})}))}));(0,o.qplEndProductMessageSend)(Promise.all(a)),t.composeQuotedMsg=null,this.end()},this._shareCatalog=e=>{const{chat:t}=this.props,a=(0,u.createCatalogLink)(e.id.user),n=`${s.default.t(1070)} ${a}`;i.Cmd.pasteChatTextInput(t,n),(0,l.logSendCatalogClick)({catalogOwnerWid:e.id,catalogSessionId:this.props.sessionId}),this.end()},this._pop=()=>{this.pop()},this._popNone=()=>{this.pop("none")}}componentDidMount(){this.push((0,c.jsx)(d.default,{onCancel:this._pop,onConfirm:this._sendProducts,onShare:this._shareCatalog}))}}var f=h;t.default=f},92246:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(44189),r=a(88102),s=a(27394),l=n(a(32973)),o=a(57701),d=a(82145),u=n(a(11339)),c=a(97567),h=a(67455),f=a(48870),p=a(27798),m=a(85893);class g extends l.default{constructor(){super(...arguments),this.onProductCatalog=()=>{const{sellerJid:e,chat:t}=this.props;(0,o.canViewCollections)()&&f.QPL.markerStart(p.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:"Cart"}}),this.push((0,m.jsx)(h.ProductDetailsFlowLoadable,{chat:t,catalogOwnerJid:e}))},this.onProductDetail=e=>{const{chat:t}=this.props;(0,d.qplStartProductView)("Cart"),this.push((0,m.jsx)(h.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:t,productInfo:e,onEnd:this._pop}))},this._end=()=>{this.end(!0)},this._pop=()=>{this.pop()}}componentDidMount(){const{sellerJid:e,chat:t}=this.props;this.push((0,m.jsx)(s.DrawerContext.Consumer,{children:a=>{const{entryPoint:n}=(0,c.getProductCatalogContext)(a),{isPushed:r}=this.state;return(0,m.jsx)(i.CartDetailDrawer,{chat:t,sellerJid:e,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalog,onBack:this._end,closeDrawerRightOnSend:n===u.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE,isPushed:r})}})),r.Cmd.existsDrawerLeft((e=>{e&&r.Cmd.closeDrawerLeft()})),r.Cmd.existsDrawerMid((e=>{e&&r.Cmd.closeDrawerMid()}))}}t.default=g},86704:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=Y;var i=n(a(81109)),r=n(a(48926)),s=a(50796),l=n(a(48360)),o=a(67294),d=a(93581),u=a(99989),c=n(a(7532)),h=a(91545),f=n(a(54414)),p=a(88102),m=a(19829),g=n(a(95416)),v=a(27105),x=a(95176),C=a(19380),_=n(a(60453)),S=n(a(69637)),y=a(27394),j=a(94790),E=n(a(93870)),T=n(a(12290)),I=n(a(32973)),b=a(99234),w=a(57701),k=a(77975),P=a(35054),M=a(82145),L=a(92557),A=n(a(63935)),O=a(9468),D=a(21374),R=a(97567),N=n(a(54050)),F=a(11395),B=a(48870),U=a(27798),H=a(87956),G=n(a(56829)),V=a(50452),W=a(77591),z=a(85893);const q=a(54302).Mirrored(["YES","NO","PENDING"]);class K extends I.default{constructor(){var e;super(...arguments),e=this,this._isComplianceFormVisible=!1,this._isProductListVisible=!1,this._blockCartInterstitial=()=>this.props.mustCompleteCompliance!==q.NO,this._isCreatingCatalog=()=>this.props.isCreatingCatalog,this._showProductList=e=>{const t=(0,w.canManageCollections)()?(0,z.jsx)(f.default,{contact:this.props.contact,onCatalogLinkClick:this._onCatalogShare,onProductShare:this.onProductShare,onProductDetail:this.onEditProduct,onAddProduct:this._onAddProduct,onRemoveProduct:this._onRemoveProduct,catalogId:this.props.catalogId,onBack:this._end,onCartClick:this.onCartClick,businessProfile:null,headerType:j.DRAWER_HEADER_TYPE.LARGE,onCollectionSeeAll:this.onCollectionSeeAll,canManageCatalog:!0,autoUpdate:!0,onOpenCollections:this.onOpenCollections,onOpenMerchantDetailsForm:this._handleOpenMerchantDetailsForm,onEditCollection:this._onEditCollection,onOpenSettings:this.onOpenSettings,blockCartInterstitialFn:this._blockCartInterstitial,canLogQpl:e}):(0,z.jsx)(F.ProductListDrawer,{contact:this.props.contact,onCatalogLinkClick:this._onCatalogShare,onProductShare:this.onProductShare,onProductDetail:this.onEditProduct,onAddProduct:this._onAddProduct,onRemoveProduct:this._onRemoveProduct,catalogId:this.props.catalogId,onBack:this._end,onCartClick:this.onCartClick,businessProfile:null,headerType:j.DRAWER_HEADER_TYPE.LARGE,canManageCatalog:!0,autoUpdate:!0,onOpenSettings:this.onOpenSettings,blockCartInterstitialFn:this._blockCartInterstitial});this.push(t)},this._handleOpenMerchantDetailsForm=()=>{const e=(0,b.getMeUser)();this.push((0,z.jsx)(L.MerchantDetailsFormFlowLoadable,{contactId:e,onBack:this.pop}))},this.onEditProduct=e=>{const t=u.CatalogCollection.assertGet(this.props.catalogId);p.Cmd.openDrawerMid((0,z.jsx)(T.default,{catalog:t,product:e}),"slide-left",void 0,void 0,this.props.context,H.FocusType.TABBABLE)},this.onCartClick=e=>{(0,G.default)(e,void 0,this.props.context)},this.onCollectionSeeAll=e=>{this.push((0,z.jsx)(m.CollectionContentDrawer,{contact:this.props.contact,onProductDetail:this.onEditProduct,onProductShare:this.onProductShare,catalogId:this.props.catalogId,onBack:this._pop,onCatalogLinkClick:this._onCatalogShare,onCartClick:this.onCartClick,collection:e,canManageCatalog:!0,headerType:j.DRAWER_HEADER_TYPE.LARGE,onEditCollection:this._onEditCollection}))},this._onEditCollection=e=>{const t=u.CatalogCollection.get(this.props.catalogId);e||(0,P.logCollectionCreateClicked)((0,R.getProductCatalogContext)(this.props.context)),t&&this.push((0,z.jsx)(E.default,{onBack:this._pop,collection:e,catalog:t}))},this._onCatalogShare=(e,t)=>{p.Cmd.openDrawerMid((0,z.jsx)(c.default,{onCancel:()=>{p.Cmd.closeDrawerMid()},catalog:e,contact:t,prompt:l.default._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"}),onSend:()=>p.Cmd.closeDrawerMid(),centerDrawer:!0}),"slide-left",void 0,void 0,this.props.context,H.FocusType.TABBABLE)},this.onProductShare=e=>{p.Cmd.openDrawerMid((0,z.jsx)(N.default,{onCancel:()=>{p.Cmd.closeDrawerMid()},product:e,prompt:l.default._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"}),onSend:()=>p.Cmd.closeDrawerMid(),centerDrawer:!0,sendProductMsg:!0}),"slide-left",void 0,void 0,this.props.context,H.FocusType.TABBABLE)},this.onOpenCollections=()=>{B.QPL.markerStart(U.QuickLogMarkerId.WHATSAPP_COLLECTIONS_MANAGEMENT_VIEW),this.push((0,z.jsx)(g.default,{onBack:this._pop,editCollection:this.editCollection,onSeeCollection:this.onSeeCollection})),(0,P.logCollectionMenuClicked)((0,R.getProductCatalogContext)(this.props.context))},this.onSeeCollection=e=>{(0,M.qplStartCollectionViewAll)("Collection"),this.push((0,z.jsx)(Y,{catalogId:this.props.catalogId,collection:e,product:null}))},this.editCollection=e=>{const t=u.CatalogCollection.get(this.props.catalogId);e||(0,P.logCollectionCreateClicked)((0,R.getProductCatalogContext)(this.props.context)),t&&this.push((0,z.jsx)(E.default,{onBack:this._pop,collection:e,catalog:t}))},this.onOpenSettings=()=>{this.push((0,z.jsx)(h.CatalogSettingsDrawer,{onBack:this._pop}))},this._onAddProduct=()=>this.props.onAddProduct(),this._onAddFirstProduct=()=>this.props.onAddFirstProduct(),this._onRemoveProduct=()=>this.props.onRemoveProduct(),this._onAddProductFromBusinessDetails=(0,r.default)((function*(){e._pop(),e._isComplianceFormVisible=!1,yield e.props.onComplianceFormClosed();u.CatalogCollection.get(e.props.catalogId)?e._onAddProduct():e._onAddFirstProduct()})),this._pop=()=>{this.pop(),p.Cmd.closeDrawerMid()},this._end=()=>{this.end(!0),p.Cmd.closeDrawerMid()}}componentDidMount(){null!=this.props.collection?this.onCollectionSeeAll(this.props.collection):null!=this.props.catalog?(this._showProductList(!0),null!=this.props.product&&this.onEditProduct(this.props.product)):(B.QPL.markerDrop(U.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW),this._showNewCatalog())}componentDidUpdate(){this.props.showComplianceForm&&!this._isComplianceFormVisible?(this._isComplianceFormVisible=!0,this._showComplianceForm()):this.props.showProductList&&!this._isProductListVisible&&(this._isProductListVisible=!0,this._showProductList(!1))}_showNewCatalog(){this.push((0,z.jsx)(A.default,{isCreatingCatalogFn:this._isCreatingCatalog,onBack:this._pop,onAddProductClick:this._onAddFirstProduct}))}_showComplianceForm(){this.push((0,z.jsx)(L.MerchantDetailsFormFlowLoadable,{contactId:this.props.contact.id,enableCatalogCreationContext:!0,enableBusinessProfileAddress:!0,onAddProduct:this._onAddProductFromBusinessDetails,onBack:()=>{this._pop(),this._isComplianceFormVisible=!1,this.props.onComplianceFormClosed()},onUnmount:()=>{this._isComplianceFormVisible=!1,this.props.onComplianceFormClosed()}}))}}function Y(e){const t=(0,o.useContext)(y.DrawerContext),[a,n]=(0,o.useState)(q.PENDING),c=C.ContactCollection.get(e.catalogId),[h,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[E,I]=(0,o.useState)(!1),[b,P]=(0,o.useState)(!1),M=(0,o.useCallback)((()=>u.CatalogCollection.get(e.catalogId)),[e.catalogId]),L=(0,o.useCallback)((0,r.default)((function*(){var e;if(!c)return __LOG__(4,void 0,new Error,!0)`Cannot update compliance for non existing user`,void SEND_LOGS("catalog-management-flow-compliance-no-contact-error");n(q.PENDING);const t=null===(e=d.BusinessProfileCollection.get(c.id))||void 0===e?void 0:e.address;let a=q.NO;const i=M();!(0,w.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(c.id.user)||i&&i.productCollection.length||(0,x.isBusinessCompliant)(t,yield(0,v.getLegalEntityDetails)(c.id),c.id)||(a=q.YES),n(a)})),[c,M]),A=(0,o.useCallback)((()=>{const e=M();if(a===q.YES)f(!0);else if(a===q.PENDING)I(!0);else if(e){const a=new O.Product({catalogWid:e.id,additionalImageCdnUrl:[]});p.Cmd.openDrawerMid((0,z.jsx)(T.default,{catalog:e,product:a,onCreate:a=>{p.Cmd.openDrawerMid((0,z.jsx)(T.default,{catalog:e,product:a}),"slide-left",void 0,void 0,t,H.FocusType.TABBABLE)},newProduct:!0}),"slide-left",void 0,void 0,t,H.FocusType.TABBABLE)}}),[a,t,M]),N=(0,o.useCallback)((0,r.default)((function*(){P(!0);const a=(0,R.getProductCatalogContext)(t);(0,k.logCreateProductCatalogClick)(a),B.QPL.markerStart(U.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE);let n=!0;try{yield(0,D.createCatalog)(),(0,k.logCreateProductCatalogSuccess)(a),n=!1,B.QPL.markerEnd(U.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,B.QuickLogActionType.SUCCESS);try{yield u.CatalogCollection.find(e.catalogId),g(!0),A()}catch(e){(0,s.filteredCatch)(W.ServerStatusCodeError,(()=>{__LOG__(3)`Failed to fetch product catalog from server`}))}}catch(e){(0,s.filteredCatch)(W.ServerStatusCodeError,(e=>{(0,k.logCreateProductCatalogFailed)(a,e.statusCode),p.Cmd.openToast((0,z.jsx)(V.Toast,{msg:l.default._("Catalog already created.",null,{hk:"1s2DFD"}),id:(0,V.genId)("err_catalog_already_created")})),g(!0)}))}finally{n&&B.QPL.markerEnd(U.QuickLogMarkerId.WHATSAPP_CATALOG_CREATE,B.QuickLogActionType.FAIL)}P(!1)})),[e.catalogId,t,A]),F=(0,o.useCallback)((0,r.default)((function*(){a===q.YES?f(!0):a===q.PENDING?I(!0):yield N()})),[a,N]),G=(0,o.useCallback)((0,r.default)((function*(){yield L()})),[L]);return(0,o.useEffect)((()=>{L()}),[]),(0,o.useEffect)((()=>{const e=M();E&&a!==q.PENDING&&(I(!1),a===q.YES?f(!0):e?A():N()),a===q.YES&&p.Cmd.closeDrawerMid()}),[E,a,M,N,A]),c?E?(0,z.jsxs)(_.default,{children:[(0,z.jsx)(j.DrawerHeader,{title:l.default._("Add new item",null,{hk:"2Tc6p3"}),onCancel:()=>{f(!1),I(!1)},type:j.DRAWER_HEADER_TYPE.LARGE}),(0,z.jsx)(S.default,{theme:"center-content",children:(0,z.jsx)(v.ComplianceInfoLoading,{})})]}):(0,z.jsx)(y.DrawerContext.Consumer,{children:t=>(0,z.jsx)(K,(0,i.default)({contact:c,context:t,mustCompleteCompliance:a,showComplianceForm:h,showProductList:m,isCreatingCatalog:b,onAddProduct:A,onAddFirstProduct:F,onRemoveProduct:G,onComplianceFormClosed:()=>(f(!1),L())},e))}):null}},12290:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(88102),s=a(65303),l=n(a(32973)),o=a(82145),d=a(14746),u=n(a(54050)),c=a(85893);class h extends l.default{constructor(){super(...arguments),this._onEditSuccess=e=>{(0,o.qplStartProductView)("EditProduct"),this._showInfoDrawer(e)},this._showInfoDrawer=e=>{const{catalog:t}=this.props;this.push((0,c.jsx)(d.ProductInfoDrawer,{catalog:t,product:e,onCancel:this.end,onEditProduct:this._onProductEdit,onShareProduct:this.onShareProduct}))},this.onShareProduct=e=>{this.push((0,c.jsx)(u.default,{onBack:this._pop,product:e,prompt:(0,c.jsx)("div",{children:i.default._("Anyone with WhatsApp can follow this link to browse catalog",null,{hk:"1Lofnu"})}),onSend:()=>r.Cmd.closeDrawerMid(),centerDrawer:!0,sendProductMsg:!0}))},this._onProductEdit=e=>{this.push((0,c.jsx)(s.EditProductDrawer,{catalog:this.props.catalog,onBack:this._pop,onEditSuccess:this._onEditSuccess,product:e,onDelete:this._handleDelete}))},this._handleDelete=e=>{var t,a;const{product:n}=this.props;n.id===e.id&&r.Cmd.closeDrawerMid(),null===(t=(a=this.props).onDelete)||void 0===t||t.call(a)},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)}}componentDidMount(){const{catalog:e,product:t,onCreate:a,newProduct:n}=this.props;e.productCollection.on("remove",this._handleDelete),n?this.push((0,c.jsx)(s.EditProductDrawer,{onCancel:this._pop,onEditSuccess:e=>a?a(e):this._onEditSuccess(t),catalog:e,product:t,newProduct:!0})):this._showInfoDrawer(t)}componentWillUnmount(){this.props.catalog.productCollection.off("remove",this._handleDelete)}}t.default=h},77467:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(10403)),r=a(88102),s=n(a(52665)),l=n(a(69618)),o=n(a(32973)),d=n(a(43725)),u=a(16770),c=n(a(76419)),h=n(a(19446)),f=a(47809),p=a(85893);class m extends o.default{constructor(){super(...arguments),this.onDeleteLabel=e=>{e.forEach((e=>{let{id:t}=e;u.LabelCollection.deleteLabel(t)}))},this._onManageLabels=e=>{r.Cmd.openModal((0,p.jsx)(f.ManageLabelFlowLoadable,{modelsToUpdate:e}))},this.onEditLabel=e=>{r.Cmd.openModal((0,p.jsx)(i.default,{labelId:e,onUpdateLabel:this.onUpdateLabel,onCancel:r.Cmd.closeModal()}))},this.onLabelClick=e=>{const t=a(41885).Z;this.push((0,p.jsx)(t,{openLabelColorDrawer:this.openLabelColorDrawer,labelId:e,onManageLabels:this._onManageLabels,onClose:this._pop,onRemoveLabel:this.onRemoveLabel,onEditLabel:this.onEditLabel}))},this.openAddLabel=()=>{u.LabelCollection.toArray().length>=l.default.MAX_SMB_LABEL_COUNT?r.Cmd.openModal((0,p.jsx)(s.default,{okText:d.default.t(976),onOK:()=>r.Cmd.closeModal(),children:d.default.t(1932,{count:l.default.MAX_SMB_LABEL_COUNT})})):r.Cmd.openModal((0,p.jsx)(i.default,{onAddLabel:this.onAddLabel,onCancel:r.Cmd.closeModal()}))},this.onUpdateLabel=(e,t)=>{u.LabelCollection.updateLabel(e,t)},this.openLabelColorDrawer=(e,t)=>{this.push((0,p.jsx)(c.default,{labelId:e,onClose:this._pop,onUpdateColor:this.onUpdateLabel,currentColor:t}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,p.jsx)(h.default,{onDeleteLabel:this.onDeleteLabel,onLabelClick:this.onLabelClick,onClose:this._pop,openAddLabel:this.openAddLabel}))}onAddLabel(e,t){u.LabelCollection.addNewLabel(e,t)}onRemoveLabel(e,t){u.LabelCollection.addOrRemoveLabels([{id:e,type:"remove"}],t)}}t.default=m},51095:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(10403)),r=a(63183),s=a(88102),l=n(a(52665)),o=n(a(69618)),d=n(a(32973)),u=n(a(43725)),c=a(16770),h=a(50047),f=n(a(94981)),p=n(a(11339)),m=a(85893);class g extends d.default{constructor(){super(...arguments),this._newlyAddedLabels=new Set,this._logWamEvent=()=>{const e=this.props.modelsToUpdate.length;this._labelViewType=1===e?this.props.modelsToUpdate[0]instanceof r.Chat?p.default.LABEL_TARGETS.LABEL_CHAT_DIALOG:p.default.LABEL_TARGETS.LABEL_MESSAGE_DIALOG:p.default.LABEL_TARGETS.LABEL_COMBINED_DIALOG,(0,h.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.VIEW,e,this._labelViewType)},this.onLabelUpdateComplete=()=>{this.props.onLabelUpdateComplete&&this.props.onLabelUpdateComplete(),this._pop()},this.onAddLabel=(e,t)=>{c.LabelCollection.addNewLabel(e,t).then((()=>{this._newlyAddedLabels.add(e)}))},this.shouldScrollIntoViewAndSelect=e=>this._newlyAddedLabels.has(e)?(this._newlyAddedLabels.delete(e),{shouldScrollIntoView:!0,shouldSelect:!0}):{shouldScrollIntoView:!1,shouldSelect:!1},this.onAddNewLabel=()=>{c.LabelCollection.toArray().length>=o.default.MAX_SMB_LABEL_COUNT?s.Cmd.openModal((0,m.jsx)(l.default,{okText:u.default.t(976),onOK:()=>s.Cmd.closeModal(),children:u.default.t(1932,{count:o.default.MAX_SMB_LABEL_COUNT})})):this.push((0,m.jsx)(i.default,{onAddLabel:this.onAddLabel,onCancel:this._pop}))},this._popAndLogEvent=()=>{this._labelViewType&&(0,h.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.CLICK_NEGATIVE,this.props.modelsToUpdate.length,this._labelViewType),this.pop()},this._pop=()=>{this.pop()}}componentDidMount(){this._logWamEvent(),this.push((0,m.jsx)(f.default,{shouldScrollIntoViewAndSelect:this.shouldScrollIntoViewAndSelect,onAddNewLabel:this.onAddNewLabel,onLabelUpdateComplete:this.onLabelUpdateComplete,onCancel:this._popAndLogEvent,modelsToUpdate:this.props.modelsToUpdate}))}}t.default=g,g.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},11753:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(48926)),s=a(40277),l=n(a(48360)),o=a(67294),d=(n(a(56720)),a(79686)),u=n(a(48517)),c=a(93581),h=a(33866),f=a(88102),p=a(27105),m=a(95176),g=n(a(69618)),v=n(a(60453)),x=n(a(69637)),C=a(94790),_=n(a(33308)),S=n(a(71520)),y=n(a(32973)),j=a(99234),E=a(57701),T=a(84287),I=a(13923),b=a(90011),w=a(85832),k=a(85893);const P={complianceInfoHelpCenterBanner:{color:"hp667wtd",paddingTop:"nlnf8xo7",paddingEnd:"bcymb0na",paddingBottom:"r219jyu0",paddingStart:"e8k79tju"},formContainer:{paddingTop:"a4bywxmn",paddingEnd:"bcymb0na",paddingBottom:"ekpn4oxx",paddingStart:"e8k79tju",marginBottom:"brac1wpa"},formTitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"oqp0d33z"},formTitleWithSubtitle:{paddingTop:"i5tg98hk",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"gx1rr48f",marginBottom:"inww9tbj"},subtitle:{color:"hp667wtd",marginBottom:"oqp0d33z"},containingBlock:{transform:"cgi16xlc"}};class M extends y.default{componentDidMount(){this.push((0,k.jsx)(B,{contactId:this.props.contactId,enableCatalogCreationContext:this.props.enableCatalogCreationContext,enableBusinessProfileAddress:this.props.enableBusinessProfileAddress,onBack:()=>{this.props.onBack()},onAddProduct:this.props.onAddProduct}))}componentWillUnmount(){var e,t;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)}}t.default=M;const L=e=>e?P.formTitleWithSubtitle:P.formTitle,A=()=>l.default._("Add a legal name of business",null,{hk:"1Dgk4f"}),O=()=>l.default._("Add a business address",null,{hk:"2x7w3h"}),D=e=>e?l.default._("Incorrect email address format",null,{hk:"1KuwvT"}):l.default._("Add an email address",null,{hk:"KeJaU"}),R=()=>l.default._("Add a grievance officer name",null,{hk:"29OUSc"}),N=e=>!e||(0,s.isPotentiallyPhoneNumber)(e),F=(0,j.getMeUser)(),B=(0,o.forwardRef)(((e,t)=>{let{contactId:a,onBack:n,enableCatalogCreationContext:s,enableBusinessProfileAddress:d,onAddProduct:y}=e;const j=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,(()=>({getElement:()=>j.current})));const[T,b]=(0,o.useState)({}),[M,B]=(0,o.useState)({}),[H,V]=(0,o.useState)(!0),[W,z]=(0,o.useState)(!1),[q,K]=(0,o.useState)(),[Y,Q]=(0,o.useState)(!1);(0,o.useEffect)((()=>{let e=!0;return(0,r.default)((function*(){const[t,n]=yield Promise.all([(0,p.getLegalEntityDetails)(a),c.BusinessProfileCollection.find(a)]);e&&(b(t),K(n.serialize()),V(!1))}))(),()=>{e=!1}}),[a]),(0,o.useEffect)((()=>{Q(!Object.keys(M).length&&(0,m.isBusinessCompliant)(null==q?void 0:q.address,T,a))}),[T,M,null==q?void 0:q.address,a]);const X=function(){var e=(0,r.default)((function*(e){yield(0,h.editBusinessCompliance)(e);const t=yield c.BusinessProfileCollection.update(F,{getMerchantCompliance:!0});return(Array.isArray(t)?t[0]:t).serialize().legalEntityDetails}));return function(){return e.apply(this,arguments)}}(),Z=(0,o.useCallback)(function(){var e=(0,r.default)((function*(e,t){const a={[e]:t,isRegistered:null==T?void 0:T.isRegistered};b((0,i.default)((0,i.default)({},T),a));const n=yield X(a);b(n)}));return function(){return e.apply(this,arguments)}}(),[T]),J=(0,o.useCallback)(((e,t)=>{B((a=>(0,i.default)((0,i.default)({},a),{},{[`${e}.${t}`]:!0})))}),[]),$=(0,o.useCallback)(((e,t)=>{B((a=>{const n=(0,i.default)({},a);return delete n[`${e}.${t}`],n}))}),[]),ee=(0,o.useCallback)(function(){var e=(0,r.default)((function*(e,t,a){const n={[e]:{[t]:a},isRegistered:null==T?void 0:T.isRegistered};b((0,i.default)((0,i.default)({},T),{},{[e]:(0,i.default)((0,i.default)({},null==T?void 0:T[e]),n[e])}));try{J(e,t);const a=yield X(n);b(a),$(e,t)}catch(e){throw new Error(e)}}));return function(){return e.apply(this,arguments)}}(),[T,J,$]),te=(0,o.useCallback)(function(){var e=(0,r.default)((function*(e){K(e),yield c.BusinessProfileCollection.update(F)}));return function(){return e.apply(this,arguments)}}(),[]),ae=(0,o.useCallback)(function(){var e=(0,r.default)((function*(e,t){b(yield(0,p.getLegalEntityDetails)(a)),$(e,t)}));return function(){return e.apply(this,arguments)}}(),[a,$]),ne=(0,o.useCallback)(function(){var e=(0,r.default)((function*(e,t,a){if(e||t){z(!0);const n=yield X({entityType:e,entityTypeCustom:t,isRegistered:a});z(!1),b(n)}}));return function(){return e.apply(this,arguments)}}(),[]),{entityName:ie,customerCareDetails:re,grievanceOfficerDetails:se}=T||{},le=(0,o.useMemo)((()=>(0,m.getEntityTypeText)(T)),[T]),oe=(0,o.useCallback)((e=>(0,m.existsField)(e,a)),[a]),de=(0,o.useRef)(null),ue=(0,E.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney)(F.user);return(0,k.jsx)("div",{ref:j,children:(0,k.jsxs)(v.default,{xstyle:P.containingBlock,children:[(0,k.jsx)(C.DrawerHeader,{title:l.default._("Business details",null,{hk:"m9xzp"}),onBack:n,type:C.DRAWER_HEADER_TYPE.LARGE}),(0,k.jsx)(x.default,{theme:H?"center-content":void 0,ref:de,children:H?(0,k.jsx)(p.ComplianceInfoLoading,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.ComplianceInfoHelpCenterBanner,{xstyle:P.complianceInfoHelpCenterBanner}),(0,k.jsxs)(_.default,{titleXStyle:P.formTitle,xstyle:[P.formContainer],children:[(0,k.jsx)(U,{value:ie,maxLength:g.default.COMPLIANCE_INFO_LENGTH.ENTITY_NAME,placeholder:l.default._("Legal Name of Business",null,{hk:"2s9jD"}),icon:"info",validate:oe,errorFn:A,onSave:e=>Z("entityName",e)}),(0,k.jsx)(U,{value:le,placeholder:l.default._("Business Type",null,{hk:"48J73B"}),icon:"account-balance",onFocus:()=>f.Cmd.showMerchantDetailsEntityTypePopup(T,ne),isLoading:W}),ue?(0,k.jsx)(G,{rawBusinessProfile:q,validate:oe,onAfterSave:te,errorFn:O}):null]}),(0,k.jsxs)(_.default,{title:l.default._("Customer Care Information",null,{hk:"qlYos"}),titleXStyle:L(ue),xstyle:[P.formContainer],children:[ue?(0,k.jsx)(I.TextDiv,{xstyle:P.subtitle,children:l.default._("Provide at least one phone number and email address",null,{hk:"IKXYK"})}):null,(0,k.jsx)(U,{value:null==re?void 0:re.mobileNumber,maxLength:g.default.COMPLIANCE_INFO_LENGTH.MOBILE_NUMBER,placeholder:l.default._("Mobile Phone Number",null,{hk:"PMTTg"}),icon:"phone",validate:e=>(0,m.existsCustomerCareDetailsContact)(re,a,"mobileNumber",e)&&N(e),onSave:e=>ee("customerCareDetails","mobileNumber",e),onCancel:()=>ae("customerCareDetails","mobileNumber"),onError:e=>(0,p.handleCustomerCareDetailsError)(re,a,"mobileNumber",e),errorFn:e=>(0,m.getCustomerCareDetailsError)(re,"mobileNumber",e,l.default._("Incorrect phone number format",null,{hk:"3lFQ1f"}),a)}),(0,k.jsx)(U,{value:null==re?void 0:re.landlineNumber,maxLength:g.default.COMPLIANCE_INFO_LENGTH.LANDLINE_NUMBER,placeholder:l.default._("Landline Phone Number",null,{hk:"tXYaf"}),icon:"phone",validate:e=>(0,m.existsCustomerCareDetailsContact)(re,a,"landlineNumber",e)&&N(e),onSave:e=>ee("customerCareDetails","landlineNumber",e),onCancel:()=>ae("customerCareDetails","landlineNumber"),onError:e=>(0,p.handleCustomerCareDetailsError)(re,a,"landlineNumber",e),errorFn:e=>(0,m.getCustomerCareDetailsError)(re,"landlineNumber",e,l.default._("Incorrect landline phone number format",null,{hk:"4zXlsw"}),a)}),(0,k.jsx)(U,{value:null==re?void 0:re.email,maxLength:g.default.COMPLIANCE_INFO_LENGTH.EMAIL,placeholder:l.default._("Email Address",null,{hk:"2jYxR1"}),icon:"business-email",validate:e=>oe(e)&&(0,w.validateEmail)(e),onSave:e=>ee("customerCareDetails","email",e),errorFn:D})]}),(0,k.jsxs)(_.default,{title:l.default._("Grievance Officer Information",null,{hk:"3emd7I"}),titleXStyle:L(ue),xstyle:[P.formContainer],children:[ue?(0,k.jsx)(I.TextDiv,{xstyle:P.subtitle,children:l.default._("Provide name and at least one contact method",null,{hk:"2Fjw3Y"})}):null,(0,k.jsx)(U,{value:null==se?void 0:se.name,maxLength:g.default.COMPLIANCE_INFO_LENGTH.GRIEVANCE_OFFICER_NAME,placeholder:l.default._("Name",null,{hk:"2vEs6r"}),validate:oe,icon:"assignment-ind",onSave:e=>ee("grievanceOfficerDetails","name",e),errorFn:R}),(0,k.jsx)(U,{value:null==se?void 0:se.mobileNumber,maxLength:g.default.COMPLIANCE_INFO_LENGTH.MOBILE_NUMBER,placeholder:l.default._("Mobile Phone Number",null,{hk:"3kk5I"}),icon:"phone",validate:e=>(0,m.existsGrievanceOfficerDetailsContact)(se,a,"mobileNumber",e)&&N(e),onSave:e=>ee("grievanceOfficerDetails","mobileNumber",e),onCancel:()=>ae("grievanceOfficerDetails","mobileNumber"),onError:e=>(0,p.handleGrievanceOfficerDetailsError)(se,a,"mobileNumber",e),errorFn:e=>(0,m.getGrievanceOfficerDetailsError)(se,"mobileNumber",e,l.default._("Incorrect phone number format",null,{hk:"3lFQ1f"}),a)}),(0,k.jsx)(U,{value:null==se?void 0:se.landlineNumber,maxLength:g.default.COMPLIANCE_INFO_LENGTH.LANDLINE_NUMBER,placeholder:l.default._("Landline Phone Number",null,{hk:"4GBzF0"}),icon:"phone",validate:e=>(0,m.existsGrievanceOfficerDetailsContact)(se,a,"landlineNumber",e)&&N(e),onSave:e=>ee("grievanceOfficerDetails","landlineNumber",e),onCancel:()=>ae("grievanceOfficerDetails","landlineNumber"),onError:e=>(0,p.handleGrievanceOfficerDetailsError)(se,a,"landlineNumber",e),errorFn:e=>(0,m.getGrievanceOfficerDetailsError)(se,"landlineNumber",e,l.default._("Incorrect landline phone number format",null,{hk:"4zXlsw"}),a)}),(0,k.jsx)(U,{value:null==se?void 0:se.email,maxLength:g.default.COMPLIANCE_INFO_LENGTH.EMAIL,placeholder:l.default._("Email Address",null,{hk:"3SvbLl"}),icon:"business-email",validate:e=>(0,m.existsGrievanceOfficerDetailsContact)(se,a,"email",e)&&(0,w.validateEmail)(e),onSave:e=>ee("grievanceOfficerDetails","email",e),onError:e=>(0,p.handleGrievanceOfficerDetailsError)(se,a,"email",e),errorFn:e=>(0,m.getGrievanceOfficerDetailsError)(se,"email",e,l.default._("Incorrect email address format",null,{hk:"1KuwvT"}),a)})]}),null!=s&&null!=y?(0,k.jsx)(S.default,{disabled:!Y,rootRef:de.current,onClick:()=>(0,u.default)(y),children:l.default._("Next: Add Items",null,{hk:"4gxzId"})}):null]})})]})})}));function U(e){let{value:t="",maxLength:a,placeholder:n,icon:i,isLoading:s=!1,validate:l,errorFn:d,onChange:u,onSave:c,onCancel:h,onError:f,onFocus:p}=e;const[m,g]=(0,o.useState)(t),[v,x]=(0,o.useState)(),[C,_]=(0,o.useState)(s);return(0,o.useEffect)((()=>{g(t)}),[t]),(0,o.useEffect)((()=>{(null==l?void 0:l(m))&&x(null)}),[m,l,d]),(0,o.useEffect)((()=>{_(s)}),[s]),(0,k.jsx)(T.IconSection,{icon:i,theme:T.IconSectionTheme.NoMargin,content:(0,k.jsx)(b.TextInput,{value:m,editable:!0,maxLength:a,pending:C,inputPlaceholder:n,showRemaining:!0,managedError:!0,validate:l,error:v,onChange:g,onSave:(0,r.default)((function*(){_(!0);try{yield null==c?void 0:c(m)}catch(e){d&&x(d(m))}_(!1)})),onCancel:()=>{g(t),x(null),null==h||h()},onError:()=>{d&&x(d(m)),null==f||f(m)},theme:"text-input",onFocus:p,blockFocusOnLock:!!p,lockable:!0})})}function H(e,t,a){return{address:e,categories:[],hours:{days:[]},longitude:t,latitude:a}}function G(e){let{rawBusinessProfile:t,validate:a,onAfterSave:n,errorFn:s}=e;const[l,u]=(0,o.useState)(),[c,f]=(0,o.useState)(null==t?void 0:t.address),[p,m]=(0,o.useState)(),{longitude:g,latitude:v}=t||{},[x,C]=(0,o.useState)(H(c,g,v));return(0,o.useEffect)((()=>C(H(c,g,v))),[c,g,v]),(0,o.useEffect)((()=>{a(c)&&m(null)}),[c,a]),null==t||null==x?null:(0,k.jsx)(T.IconSection,{icon:"business-address",theme:T.IconSectionTheme.NoMargin,content:(0,k.jsx)(d.BusinessAddressField,{businessProfile:x,activeField:l,rawBusinessProfile:t,value:c,validate:a,error:p,lowProfile:!1,onActive:u,onChange:f,onCancel:()=>{f(t.address)},onSaveBusinessProfile:(0,r.default)((function*(){yield(0,h.editBusinessProfile)({address:c}),yield n((0,i.default)((0,i.default)({},t),{},{address:c}))})),onError:()=>{s&&m(s(c))}})})}},62643:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=a(88984),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=n(a(32973)),h=a(12176),f=a(18878),p=a(88998),m=a(43538),g=a(85893);class v extends c.default{componentDidMount(){this.push((0,g.jsx)(S,{onBack:this.end}))}}t.default=v;const x={orderWrapper:{paddingTop:"emrlamx0",paddingEnd:"itegkywt",paddingBottom:"aiput80m",paddingStart:"rppts313",display:"p357zi0d",borderBottom:"qmxv8cnq"},orderManagementDrawerBody:{backgroundColor:"ihvf49ua"},orderInfo:{paddingTop:"i5tg98hk",paddingEnd:"itegkywt",paddingBottom:"przvwfww",paddingStart:"rppts313",flexGrow:"ggj6brxn"},orderInfoRow:{display:"p357zi0d",paddingTop:"qomlamqu",paddingEnd:"lnjlmjd6",paddingBottom:"bxcbqipq",paddingStart:"mc6o24uu"},flexGrow:{flexGrow:"ggj6brxn"},orderSubDetails:{color:"re3l9645"},completed:{color:"jq3rn4u7"}},C=e=>{let{orderStatusInfo:t=p.OrderStatus.Pending}=e;const a=m.OrderStatusLabels[t];return(0,g.jsx)("span",{className:(0,s.default)(x[String(t)]),children:a})},_=e=>{let{items:t=[]}=e;if(0===t.length)return null;const[a,...n]=t;return(0,g.jsxs)("span",{className:(0,s.default)(x.flexGrow),children:[a.name," ",n.length>0&&(0,g.jsxs)(g.Fragment,{children:[i.default._("and",null,{hk:"10D2a9"})," ",1===n.length?n[0].name:i.default._({"*":"{number_of_items} items",_1:"1 item"},[i.default._plural(n.length,"number_of_items")],{hk:"1kMaqb"})]})]})},S=(0,r.forwardRef)((e=>{const[t,a]=(0,r.useState)({}),[n,l]=(0,r.useState)({});return(0,r.useEffect)((()=>{(0,f.getOrders)((e=>{let{contactsAndOrdersInfo:t,ordersStatusInfo:n}=e;a((e=>(0,f.getMergedContactAndOrderInfoMap)(e,t))),l((e=>(0,f.getMergedOrderStatusInfoMap)(e,n)))}))}),[]),(0,g.jsxs)(o.default,{children:[(0,g.jsx)(u.DrawerHeader,{title:i.default._("Orders",null,{hk:"3cylXu"}),type:u.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,g.jsx)(d.default,{className:(0,s.default)(x.orderManagementDrawerBody),children:Object.keys(t).map((e=>(0,g.jsx)(y,{contactAndOrderInfo:t[e],orderStatusInfo:n[e]?n[e].status:p.OrderStatus.Pending},e)))})]})})),y=e=>{var t;let{contactAndOrderInfo:a,orderStatusInfo:n}=e;return(0,g.jsxs)("div",{className:(0,s.default)(x.orderWrapper),children:[(0,g.jsx)(l.DetailImage,{id:a.contact.id}),(0,g.jsxs)("div",{className:(0,s.default)(x.orderInfo),children:[(0,g.jsxs)("div",{className:(0,s.default)(x.orderInfoRow),children:[(0,g.jsx)(h.Name,{className:(0,s.default)(x.flexGrow),contact:a.contact}),(0,g.jsxs)("span",{children:[a.orderInfo.currency," ",null!==(t=a.orderInfo.totalAmount)&&void 0!==t?t:0]})]}),(0,g.jsxs)("div",{className:(0,s.default)(x.orderInfoRow,x.orderSubDetails),children:[(0,g.jsx)(_,{items:a.orderInfo.items}),(0,g.jsx)(C,{orderStatusInfo:n})]})]})]})}},82554:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=D;var i=n(a(81109)),r=n(a(48926)),s=a(67294),l=a(93581),o=n(a(77338)),d=n(a(7532)),u=n(a(54414)),c=a(88102),h=a(19829),f=n(a(52665)),p=a(19380),m=a(27394),g=n(a(32973)),v=a(57701),x=n(a(43725)),C=a(77975),_=n(a(55720)),S=n(a(80456)),y=n(a(32488)),j=n(a(3607)),E=a(97567),T=n(a(70107)),I=a(79188),b=n(a(54050)),w=a(11395),k=a(91695),P=n(a(77776)),M=n(a(56829)),L=a(58021),A=a(85893);class O extends g.default{constructor(){var e;super(...arguments),e=this,this.scrollOffset=0,this.setScrollOffset=e=>{this.scrollOffset=e},this.onCollectionSeeAll=e=>{const{catalogOwnerJid:t,chat:a,product:n,productInfo:i,sellerJid:r}=this.props,s=t||(null==n?void 0:n.catalogWid.toString())||(null==i?void 0:i.businessOwnerJid)||r;this.push((0,A.jsx)(D,{chat:a,catalogOwnerJid:s,collection:e,isAllItems:!e}))},this._pushProductDetails=(e,t)=>{const{chat:a,refreshCarousel:n}=this.props,i=(0,A.jsx)(T.default,{chat:a,product:e,onEnd:this._end,onBack:this._popAndUpdate,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,refreshCarousel:n,onCartClick:this._onCartClick,collectionId:t});this.push(i)},this._pushProductMoreInformation=e=>{const t=(0,A.jsx)(P.default,{product:e,onBack:this._popAndUpdate});this.push(t)},this._pushProductDetailsWithDeepLink=e=>{const t=(0,A.jsx)(I.ProductDetailsWithDeepLink,{chat:this.props.chat,productInfo:e,onEnd:this._end,onBack:this._pop,onProductDetail:this.onProductDetail,onProductCatalog:this.onProductCatalogHeaderClick,onProductLinkClick:this._onProductLinkClick,onProductMoreInformation:this.onProductMoreInformation,onCartClick:this._onCartClick});this.push(t)},this.pushProductCatalog=function(){var t=(0,r.default)((function*(t){const a=p.ContactCollection.gadd(t),n=yield l.BusinessProfileCollection.find(t),i=(0,v.canViewCollections)()?(0,A.jsx)(u.default,{contact:a,onProductDetail:e.onProductDetail,catalogId:t,onBack:e._pop,businessProfile:n,scrollOffset:e.scrollOffset,setScrollOffset:e.setScrollOffset,onCatalogLinkClick:e._onCatalogLinkClick,onCartClick:e._onCartClick,onCollectionSeeAll:e.onCollectionSeeAll}):(0,A.jsx)(w.ProductListDrawer,{contact:a,onProductDetail:e.onProductDetail,catalogId:t,onBack:e._pop,businessProfile:n,setScrollOffset:e.setScrollOffset,onCatalogLinkClick:e._onCatalogLinkClick,onCartClick:e._onCartClick});e.push(i)}));return function(){return t.apply(this,arguments)}}(),this._pushCartOrderDetail=(e,t,a,n,i,r,s)=>{const l=(0,A.jsx)(o.default,{orderId:e,token:t,sellerJid:a,userIsCartOwner:n,onProductDetail:this._onProductDetailFromInfo,onOrderCreate:this.onOrderCreate,onOrderCancel:this._handleOrderCancel,ownerHasReviewed:i,orderMessage:r,chat:s});this.push(l)},this._pushProductList=(e,t)=>{const a=p.ContactCollection.gadd(t),n=(0,A.jsx)(k.ProductMessageListDrawer,{contact:a,productListId:e,onProductDetail:this.onProductDetail,onCartClick:this._onCartClick,onBack:this._pop,onEnd:this._end,setScrollOffset:this.setScrollOffset});this.push(n)},this._handleProductSummaryClick=e=>{this._pushOrderDetailProductList(e)},this._handleOrderStatusUpdateClick=()=>{this._pushOrderStatusUpdate()},this.onOrderCreate=e=>{this._pushOrderCreate(e)},this.cancelOrder=()=>{const{orderId:e,token:t,sellerJid:a,userIsCartOwner:n,orderMessage:i,chat:r}=this.props;null!=e&&null!=t&&null!=a&&null!=n&&this._pushCartOrderDetail(e,t,a,n,!0,i,r),c.Cmd.closeModal()},this._handleOrderCancel=()=>{c.Cmd.openModal((0,A.jsx)(f.default,{onCancel:()=>{c.Cmd.closeModal()},cancelText:x.default.t(1761),onOK:this.cancelOrder,okText:x.default.t(998),title:x.default.t(1001),children:x.default.t(1e3)}))},this.onProductDetail=(e,t)=>{this._pushProductDetails(e,t)},this.onProductMoreInformation=e=>{this._pushProductMoreInformation(e)},this._onProductDetailFromInfo=e=>{this._pushProductDetailsWithDeepLink(e)},this.onProductCatalogHeaderClick=(e,t)=>{(0,C.logCarouselViewMoreClick)({catalogOwnerWid:e,catalogContext:t}),this.pushProductCatalog(e)},this._onProductLinkClick=e=>{this.push((0,A.jsx)(b.default,{product:e,onBack:this._pop}))},this._onCatalogLinkClick=(e,t)=>{this.push((0,A.jsx)(d.default,{catalog:e,contact:t,onBack:this._pop}))},this._onCartClick=e=>{const t=(0,E.getProductCatalogContext)(this.props.context),a=(0,M.default)(e,this.props.chat,t);a&&this.push(a)},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)},this._popAndUpdate=()=>{this.popAndUpdate({scrollOffset:this.scrollOffset})}}componentDidMount(){const{catalogOwnerJid:e,orderId:t,product:a,productInfo:n,productListId:i,collection:r,collectionId:s,isAllItems:l,token:o,sellerJid:d,userIsCartOwner:u,orderMessage:c,chat:h,orderInfo:f}=this.props;if(e)r||l?this.pushCollectionContent((0,L.createWid)(e)):null!=i?this._pushProductList(i,(0,L.createWid)(e)):this.pushProductCatalog((0,L.createWid)(e));else if(a)this._pushProductDetails(a,s);else if(n)this._pushProductDetailsWithDeepLink(n);else if(t)null!=o&&null!=d&&null!=u&&this._pushCartOrderDetail(t,o,d,u,!1,c,h);else{if(null==f||null==d)throw new Error("ProductDetailsFlow:no-product");this._pushOrderDetail(h,f,(0,L.createWid)(d))}}pushCollectionContent(e){const t=p.ContactCollection.gadd(e);this.push((0,A.jsx)(h.CollectionContentDrawer,{contact:t,onProductDetail:this.onProductDetail,catalogId:e,onBack:this._pop,onCatalogLinkClick:this._onCatalogLinkClick,onCartClick:this._onCartClick,scrollOffset:this.scrollOffset,setScrollOffset:this.setScrollOffset,collection:this.props.collection}))}_pushOrderCreate(e){this.push((0,A.jsx)(_.default,{chat:this.props.chat,onBack:this._pop,order:e,onProductSummaryClick:this._handleProductSummaryClick}))}_pushOrderDetailProductList(e){this.push((0,A.jsx)(y.default,{onBack:this._pop,productItems:e}))}_pushOrderDetail(e,t,a){this.push((0,A.jsx)(S.default,{onBack:this._pop,orderInfo:t,sellerWid:a,chat:e,onProductSummaryClick:this._handleProductSummaryClick,onOrderStatusUpdateClick:this._handleOrderStatusUpdateClick}))}_pushOrderStatusUpdate(){const{orderInfo:e,sellerJid:t}=this.props;null!=e&&null!=t&&this.push((0,A.jsx)(j.default,{chat:this.props.chat,onBack:this._pop,orderInfo:e,sellerJid:t}))}}function D(e){const t=(0,s.useContext)(m.DrawerContext);return(0,A.jsx)(O,(0,i.default)({context:t},e))}},74671:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(37409)),r=n(a(32973)),s=a(78986),l=a(85893);class o extends r.default{constructor(){super(...arguments),this.sendMedia=e=>{let{getImg:t,caption:a,isViewOnce:n,mentionedJidList:i}=e;const r=this.props.chat,l=r.composeQuotedMsg;r.composeQuotedMsg=null;const o=r.getComposeContents().ctwaContext||void 0;(0,s.prepRawMedia)(t,{}).sendToChat(r,{caption:a,mentionedJidList:i,quotedMsg:l,ctwaContext:o,isViewOnce:n}),this.props.onCaptureSent(),this.end()}}componentDidMount(){this.push((0,l.jsx)(i.default,{onBack:()=>{this.end()},chat:this.props.chat,caption:!0,theme:"capture-contain",onSend:this.sendMedia,stream:this.props.stream,disposeStream:this.props.disposeStream}))}}t.default=o},87971:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(67873)),r=n(a(32973)),s=a(67455),l=a(85893);class o extends r.default{constructor(){super(...arguments),this.onProductClick=e=>{this.push((0,l.jsx)(s.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:this.props.msg.chat,product:e,onEnd:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,l.jsx)(i.default,{msg:this.props.msg,onProductClick:this.onProductClick}))}}t.default=o},53135:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(50796),s=i(a(37409)),l=a(88102),o=a(50025),d=n(a(64103)),u=i(a(32973)),c=a(18671),h=n(a(58254)),f=a(57224),p=i(a(16932)),m=a(85893);class g extends u.default{constructor(){super(...arguments),this._refCaptureDrawer=null,this._setRefCaptureDrawer=e=>{this._refCaptureDrawer=e},this._pushPermissionModal=()=>{this.push((0,m.jsx)(c.GuidePopup,{messaging:c.Messaging.CAMERA,type:c.TYPE.GUIDE_ALLOW,onConfirm:this._popModal}),"modal")},this._popModal=()=>{this.pop("modal")},this._startCaptureDrawer=()=>{var e;null===(e=this._disposeStream)||void 0===e||e.call(this);const{asyncStream:t,disposeStream:a}=h.start("camera",this._pushPermissionModal);this._disposeStream=a,t.then((e=>{this._refCaptureDrawer||this._popModal(),e&&this._refCaptureDrawer&&this._refCaptureDrawer.loadNewStream(e,a)})).catch((0,r.filteredCatch)(d.GUM.NotAllowedError,(()=>{this.cleanUp(),l.Cmd.openModal((0,m.jsx)(c.GuidePopup,{messaging:c.Messaging.CAMERA_FAIL,type:c.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(d.GUM.GUMError,(()=>{this.cleanUp(),l.Cmd.openModal((0,m.jsx)(c.GuidePopup,{messaging:c.Messaging.CAMERA_MISSING,type:c.TYPE.GUIDE_NONE}))})))},this.onFinished=(e,t)=>{this.props.onFinished(e,t),this.cleanUp()},this.cleanUp=()=>{this.end()},this.onRetake=()=>{this.pop("flow-transition-box-size-drawer-pop"),this._startCaptureDrawer()},this.onCaptured=e=>{this.push((0,m.jsx)(f.Modal,{type:f.ModalTheme.Box,children:(0,m.jsx)(o.EditImageDrawer,{onRetake:this.onRetake,retryText:o.RETRY_OPTIONS.RETAKE,onFinished:this.onFinished,onCancel:this.cleanUp,img:e})}),"flow-transition-box-size-drawer-push")},this.handleRequestDismiss=e=>{!1===e&&this.stackSize()>1?this.onRetake():this.cleanUp()}}componentDidMount(){this.push((0,m.jsx)(f.Modal,{type:f.ModalTheme.Box,children:(0,m.jsx)(s.default,{ref:this._setRefCaptureDrawer,stream:void 0,disposeStream:void 0,caption:!1,theme:"capture-cover",onBack:this.cleanUp,onSend:null,onCaptured:this.onCaptured,chat:void 0})})),this._startCaptureDrawer()}componentWillUnmount(){var e;null===(e=this._disposeStream)||void 0===e||e.call(this)}}var v=(0,p.default)(g);t.default=v},37792:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(50025),r=n(a(32973)),s=a(85893);class l extends r.default{constructor(){super(...arguments),this.onEnd=()=>{this.end()},this.onFinished=(e,t)=>{this.props.onFinished(e,t),this.end()}}componentDidMount(){this.push((0,s.jsx)(i.EditImageDrawer,{onCancel:this.onEnd,onFinished:this.onFinished,onRetake:this.props.onRetake,retryText:i.RETRY_OPTIONS.RESTART,img:this.props.img}))}}t.default=l},22587:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(50796),r=a(69951),s=a(88102),l=n(a(52665)),o=n(a(69618)),d=n(a(32973)),u=n(a(45126)),c=n(a(67247)),h=n(a(43725)),f=a(56728),p=a(64551),m=a(85893);class g extends d.default{constructor(){super(...arguments),this.requestFocus=()=>{var e;const t=null===(e=this.refUIE)||void 0===e?void 0:e.getRef();null!=t&&(t instanceof HTMLElement||"function"!=typeof t.onFocusList||t.onFocusList())},this.onForwardConfirmed=e=>{const{msgs:t,onForward:a}=this.props;r.ChatCollection.forwardMessagesToChats(t,e).catch((0,i.filteredCatch)(u.default,(e=>{this._showMediaSendError(e.reasons)}))),this.end(),a&&a(t),s.Cmd.openChatFromUnread(e[0])},this._showMediaSendError=e=>{const t=e.map((e=>{let{chat:t,reason:a}=e;return(0,m.jsxs)("p",{children:[t.formattedTitle," : ",a]},t.id.toString())}));s.Cmd.openModal((0,m.jsx)(l.default,{onOK:()=>s.Cmd.closeModal(),okText:h.default.t(1764),children:t}),void 0)}}componentDidMount(){const{msgs:e}=this.props,t=h.default.t(482,{_plural:e.length||1}),a=e[0],n=a.chat;let i;i="video"!==a.type&&"image"!==a.type?"message":a.type;const r=e.some((e=>e.isFrequentlyForwarded)),s=e.filter((e=>!e.isFrequentlyForwarded&&e.getForwardingScoreWhenForwarded()===o.default.FREQUENTLY_FORWARDED_SENTINEL));let l;s.length&&(l=(0,m.jsx)(c.default,{frequentlyForwardedCount:s.length,totalCount:e.length}));const d=r?p.ServerProps.frequentlyForwardedMax:p.ServerProps.multicastLimitGlobal;this.push((0,m.jsx)(f.SelectModal,{onConfirm:this.onForwardConfirmed,maxItems:d,excludeChat:n,excludeBroadcast:!0,msgType:i,title:t,listType:f.ListType.CHAT_SELECT_MODAL,customHeader:l,hasFrequentlyForwarded:r,ephemeralIcon:"chat-list"}))}}t.default=g},21649:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(32973)),r=n(a(78582)),s=a(85893);class l extends i.default{componentDidMount(){this.push((0,s.jsx)(r.default,{chat:this.props.chat,onConfirm:this.props.onConfirm}))}}t.default=l},85916:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(32973)),r=n(a(41552)),s=a(67455),l=a(85893);class o extends i.default{constructor(){super(...arguments),this.onProductClick=e=>{this.push((0,l.jsx)(s.ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:this.props.msg.chat,product:e,onEnd:this._pop}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,l.jsx)(r.default,{msg:this.props.msg,onProductClick:this.onProductClick}))}}t.default=o},7335:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),r=a(88102),s=n(a(52665)),l=a(50101),o=n(a(32973)),d=n(a(63928)),u=n(a(14767)),c=n(a(43725)),h=n(a(88793)),f=a(12176),p=a(13705),m=a(50452),g=a(85893);class v extends o.default{constructor(){var e;super(...arguments),e=this,this.onSendInvite=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;r.Cmd.closeModal(),Promise.all(e.props.participantNeedInvite.map(function(){var n=(0,i.default)((function*(n){const{contact:i,invite_code:r,invite_code_exp:s}=n,o=yield(0,l.findChat)(i.id),u=e.props.groupGid.toString(),c=d.default.assertGet(u);return(yield o.sendGroupInviteMessage(u,e.props.subject,r||"",s,t,a))===p.SendMsgResult.OK&&(c.pendingParticipants.add({id:i.id}),!0)}));return function(){return n.apply(this,arguments)}}())).then((e=>{const t=e.filter(Boolean).length;r.Cmd.openToast((0,g.jsx)(m.Toast,{msg:c.default.t(1705,{num:t,_plural:t}),id:(0,m.genId)()}))}))},this._addInviteCommment=e=>{this.push((0,g.jsx)(u.default,{participants:e,gid:this.props.groupGid,subject:this.props.subject,groupDesc:this.props.groupDesc,onClose:this._pop,onSend:this.onSendInvite}))},this._pop=()=>{this.pop()}}componentDidMount(){const{participantNeedInvite:e}=this.props,t=this._getFormattedNames(e.map((e=>e.contact)),!0),a=c.default.t(586,{participant:t,_plural:e.length});this.push((0,g.jsx)(s.default,{onOK:this._addInviteCommment.bind(this,e),okText:c.default.t(1704),onCancel:this._pop,cancelText:c.default.t(1573),children:a}))}_getFormattedName(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.formattedUser:(0,g.jsx)(f.Name,{contact:e})}_getFormattedNames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return this._getFormattedName(e,t);const a=e.map((e=>this._getFormattedName(e,t)));return(0,h.default)(a,t)}}t.default=v,v.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none"}},89936:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(50025),r=n(a(32973)),s=n(a(85647)),l=a(85893);class o extends r.default{constructor(){super(...arguments),this.onImageSelected=(e,t)=>{this.push((0,l.jsx)(i.EditImageDrawer,{onCancel:this._handleCancel,attributionUrl:t,onFinished:this.onFinished,onRetake:this._pop,retryText:i.RETRY_OPTIONS.NONE,img:e}))},this._handleCancel=()=>{this.end()},this._pop=()=>{this.pop()},this.onFinished=(e,t)=>{this.props.onFinished(e,t),this.end()}}componentDidMount(){this.push((0,l.jsx)(s.default,{onCancel:this._pop,onImageSelected:this.onImageSelected}))}}t.default=o},24064:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qplEndProductMessageSend=function(e){const t=i.QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;e.then((()=>{n.QPL.markerEnd(t,n.QuickLogActionType.SUCCESS)})).catch((()=>{n.QPL.markerEnd(t,n.QuickLogActionType.FAIL)}))},t.qplStartProductSendMessage=function(e,t,a){const r=i.QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;n.QPL.markerStart(r,{string:{EntryPoint:e}}),void 0!==t&&n.QPL.markerAnnotate(r,{int:{ProductCount:t}}),void 0!==a&&n.QPL.markerAnnotate(r,{int:{ContactCount:a}})};var n=a(48870),i=a(27798)},3884:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(88102),r=a(19380),s=n(a(81411)),l=a(56489),o=a(50101),d=n(a(32973)),u=n(a(43725)),c=a(23620),h=n(a(7326)),f=n(a(15309)),p=a(85893);class m extends d.default{constructor(){var e;super(...arguments),e=this,this._handleClick=(e,t)=>{(0,o.findChat)(t.id).then(i.Cmd.openChatFromUnread.bind(i.Cmd)),this.end()},this._handleNewGroup=()=>{this.push((0,p.jsx)(f.default,{onBack:this.pop,onContinue:this._handleSetGroupInfo}))},this._handleNewCommunity=()=>{this.push((0,p.jsx)(c.NewCommunityFlowLoadable,{onBack:this.pop.bind(this)}))},this._handleSubmit=function(t,a,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,l.createGroup)(t,a,n,r,i),e.end()},this._handleSetGroupInfo=e=>{this.push((0,p.jsx)(h.default,{participants:e,onBack:()=>{this.popAndUpdate({participants:e})},onSubmit:this._handleSubmit}))}}componentDidMount(){r.ContactCollection.ensureSorted(),this.push((0,p.jsx)(s.default,{title:u.default.t(937),onBack:this.end,onClick:this._handleClick,onNewGroup:this._handleNewGroup,onNewCommunity:this._handleNewCommunity}))}}t.default=m},81971:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,l.useState)(""),[n,I]=(0,l.useState)(),[b,w]=(0,l.useState)(),[k,P]=(0,l.useState)((0,p.shouldShowNUX)(h.default.NUX.COMMUNITY));(0,l.useEffect)((()=>{(0,p.setNUX)(h.default.NUX.COMMUNITY,{views:1,maxViews:1})}),[]);const M=()=>P(!1),[L,A]=(0,l.useState)([]),[O,D]=(0,l.useState)([]),[R,N]=(0,l.useState)(!0),[F,B]=(0,l.useState)(j.METADATA_DRAWER),U=(0,r.default)((()=>{e.onBack?e.onBack():u.Cmd.closeDrawerLeft()}));function H(e){N(!0),B(e)}function G(e){N(!1),B(e)}function V(){return W.apply(this,arguments)}function W(){return(W=(0,i.default)((function*(){yield(0,f.default)({name:t,desc:n,icon:b,existingGroups:L,newGroups:O}),u.Cmd.closeDrawerLeft()}))).apply(this,arguments)}function z(e,t,a){const n=(0,C.newTag)();D((i=>[{tempId:n,subject:e,thumb:t,full:a},...i])),G(j.GROUPS_MANAGER)}function q(e){const t=e.map((e=>{var t;const a=(0,s.default)(d.ChatCollection.get(e.id.toString()),"ChatCollection.get(contact.id.toString())");return{id:e.id,subject:a.title(),participants:null===(t=a.groupMetadata)||void 0===t?void 0:t.participants,contact:e}}));A(t),G(j.GROUPS_MANAGER)}function K(e){const t=O.filter((t=>t.tempId!==e)),a=L.filter((t=>t.id.toString()!==e));O.length!==t&&D(t),L.length!==a&&A(a)}const Y=E.indexOf(F),Q=function(e){switch(e){case j.METADATA_DRAWER:return(0,y.jsx)(v.default,{name:t,description:n,imgBlob:b,handleBack:U,handleContinue:(e,t,n)=>{a(e),I(t),w(n),H(j.GROUPS_MANAGER)}});case j.GROUPS_MANAGER:return(0,y.jsx)(g.default,{name:t,description:n,imgBlob:b,handleBack:()=>G(j.METADATA_DRAWER),handleNewGroupFlow:()=>H(j.NEW_GROUP),handleExistingGroupFlow:()=>H(j.EXISTING_GROUP),handleRemoveGroup:K,handleCreateCommunity:V,groups:[...L,...O]});case j.NEW_GROUP:return(0,y.jsx)(x.default,{onBack:()=>G(j.GROUPS_MANAGER),onSubmit:z});case j.EXISTING_GROUP:return function(){const e=L.reduce(((e,t)=>(null!=t.contact&&e.push(t.contact),e)),[]);return(0,y.jsx)(m.default,{onBack:()=>G(j.GROUPS_MANAGER),onSubmit:q,addedExistingGroups:e,newGroupsCount:O.length})}()}}(F);if(k)return(0,y.jsx)(c.default,{handleContinue:M});return(0,y.jsx)(S.default,{transitionName:R?"flow-transition-drawer-push":"flow-transition-drawer-pop",className:(0,o.default)(T),children:(0,y.jsx)(_.UIE,{displayName:`FlowDrawer${Y}`,escapable:!0,requestDismiss:function(){U()},children:Q},Y)})};var i=n(a(48926)),r=n(a(51463)),s=n(a(45095)),l=a(67294),o=n(a(56720)),d=a(69951),u=a(88102),c=n(a(30730)),h=n(a(69618)),f=n(a(12224)),p=a(99234),m=n(a(49658)),g=n(a(63232)),v=n(a(98600)),x=n(a(7326)),C=a(15860),_=a(18644),S=n(a(41956)),y=a(85893);const j=a(54302).Mirrored(["METADATA_DRAWER","GROUPS_MANAGER","NEW_GROUP","EXISTING_GROUP"]),E=Array.from(j.members()),T={position:"lhggkp7q",top:"qq0sjtgm",start:"tkdu00h0",width:"ln8gz9je",height:"ppled2lx",overflowX:"gfz4du6o",overflowY:"r7fjleex"}},66960:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(19380),r=a(56489),s=n(a(32973)),l=n(a(7326)),o=n(a(15309)),d=a(85893);class u extends s.default{constructor(){var e;super(...arguments),e=this,this._handleSubmit=function(t,a,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,r.createGroup)(t,a,n,s,i),e.end()},this.onSetGroupInfo=e=>{this.push((0,d.jsx)(l.default,{participants:e,onBack:()=>{this.popAndUpdate({participants:e})},onSubmit:this._handleSubmit}))}}componentDidMount(){i.ContactCollection.ensureSorted(),this.push((0,d.jsx)(o.default,{onBack:this.end,onContinue:this.onSetGroupInfo}))}}t.default=u},68706:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),r=n(a(70735)),s=n(a(48360)),l=a(88102),o=a(19380),d=n(a(32973)),u=n(a(43725)),c=a(61319),h=a(56728),f=a(18963),p=a(94646),m=a(39434),g=a(50452),v=a(77591),x=a(58021),C=a(85893);function _(e){switch(e){case"about":return u.default.t(623);case"profilePicture":return u.default.t(625);case"lastSeen":return u.default.t(624);case"groupAdd":return u.default.t(1049)}}class S extends d.default{constructor(){var e;super(...arguments),e=this,this._excludedContacts=[],this._handleConfirm=function(){var t=(0,i.default)((function*(t,a){const n=e._excludedContacts.map((e=>e.id)),i=t.map((e=>e.id)),o=[...(0,r.default)(i,n,(e=>e.toString())).map((e=>({action:p.PrivacyUserAction.Add,wid:e}))),...(0,r.default)(n,i,(e=>e.toString())).map((e=>({action:p.PrivacyUserAction.Remove,wid:e})))],d=(0,m.privacyWebNameToServerName)(e.props.category);if("readreceipts"===d)throw new Error("select_contacts_except_flow: name can not be readreceipts");try{yield(0,m.setPrivacyForOneCategory)({value:"contact_blacklist",users:o,dhash:a,name:d},i),e.props.onConfirm()}catch(e){e instanceof v.ServerStatusCodeError&&409===e.statusCode||(__LOG__(3,void 0,void 0,!0)`select_contacts_except_flow: set visiblity option failed ${e.stack}`,SEND_LOGS("select_contacts_except_flow: set visiblity option failed")),l.Cmd.openToast((0,C.jsx)(g.Toast,{id:(0,g.genId)(),msg:s.default._("Failed to update privacy settings. Please try again.",null,{hk:"h89q3"})}))}e.pop()}));return function(){return t.apply(this,arguments)}}()}componentDidMount(){this._pushSelectModalToFlow()}_pushSelectModalToFlow(){var e=this;return(0,i.default)((function*(){const{category:t}=e.props;let a=null;try{const n=yield(0,c.getTable)().get(function(e){switch(e){case"about":return c.PrivacyDisallowedListType.About;case"profilePicture":return c.PrivacyDisallowedListType.ProfilePicture;case"lastSeen":return c.PrivacyDisallowedListType.LastSeen;case"groupAdd":return c.PrivacyDisallowedListType.GroupAdd}}(t));null!=n&&(e._excludedContacts=n.disallowedList.map((e=>o.ContactCollection.gadd((0,x.createWid)(e)))),a=n.dhash)}catch(t){return __LOG__(4,void 0,new Error,!0)`error: ${String(t.stack)}`,SEND_LOGS("SelectContactsExceptFlow:failed to get privacyDisallowedList"),l.Cmd.openToast((0,C.jsx)(g.Toast,{id:(0,g.genId)(),msg:s.default._("Failed to get contacts except list. Please try again.",null,{hk:"1OErrO"})})),void e.pop()}const n=new Set(e._excludedContacts.map((e=>e.id.toString())));e.push((0,C.jsx)(h.SelectModal,{title:_(t),onCancel:()=>e.pop(),onConfirm:t=>{e._handleConfirm(t,a)},getInitialItems:()=>e._excludedContacts,listType:h.ListType.CONTACT_SELECT_MODAL,maxItems:64e3,singleSelectionFooterType:f.FooterType.CONFIRM,multipleSelectionFooterType:f.FooterType.CONFIRM,useAllContacts:!0,filter:e=>n.has(e.id.toString())||o.ContactCollection.isFilteredContact(e),getSelectionSummary:y,enableSelectAll:!0,activeWithoutSelection:!0}))}))()}}function y(e){const t=e.length;return u.default.t(1050,{count:t,_plural:t})}t.default=S},46534:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(32973)),s=n(a(43725)),l=a(56728),o=n(a(60356)),d=a(64551),u=a(85893);class c extends r.default{constructor(){super(...arguments),this._handleForwardConfirmed=e=>{0===e.length&&this.end(),this._chatsToForwardTo=e,this._sendContactToChats(e)},this._sendContactToChats=e=>{for(const t of e)(0,o.default)(this.props.contacts,t),t.composeQuotedMsg=null;this.props.onContactsSent(e[0]),this.end()},this._popNone=()=>{this.pop("none")},this._handleCancel=()=>{this.end()}}componentDidMount(){const e=null==this.props.maxItems?this.props.serverProps.maxParticipants:this.props.maxItems;this.push((0,u.jsx)(l.SelectModal,{onConfirm:this._handleForwardConfirmed,maxItems:e,title:s.default.t(1228),listType:l.ListType.CHAT_SELECT_MODAL,onCancel:this._handleCancel}))}}t.default=e=>(0,u.jsx)(c,(0,i.default)((0,i.default)({},e),{},{serverProps:d.ServerProps}))},89495:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const{chat:a}=e,n=(0,i.default)(null===(t=a.groupMetadata)||void 0===t?void 0:t.groupInviteLink,"chat.groupMetadata?.groupInviteLink"),o=`${r.default.t(579)} ${n}`;return(0,l.jsx)(s.default,{title:r.default.t(552),text:o,pushTransition:"none",popTransition:"none"})};var i=n(a(45095)),r=n(a(43725)),s=n(a(24158)),l=a(85893)},64232:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(48926)),s=a(80140),l=a(88102),o=n(a(32973)),d=n(a(43725)),u=a(56728),c=a(5524),h=a(64551),f=a(85893);class p extends o.default{constructor(){var e;super(...arguments),e=this,this.onForwardConfirmed=t=>{const a=this.props.msgText;if(1===t.length){let n;const i=t[0];n=i.isUser&&i.contact.isBlocked()?(0,s.unblockContact)(i.contact):Promise.resolve(!0),n.then(function(){var t=(0,r.default)((function*(){if(a){if(i.urlText=e.props.urlText,i.active)return void l.Cmd.pasteChatTextInput(i,a);i.setComposeContents({text:a})}(yield l.Cmd.openChatFromUnread(i))&&l.Cmd.focusChatTextInput(i)}));return function(){return t.apply(this,arguments)}}())}else Promise.all(t.map((e=>{let t;t=e.isUser&&e.contact.isBlocked()?(0,s.unblockContact)(e.contact):Promise.resolve(!0),t.then((()=>{e.urlText=this.props.urlText,(0,c.sendTextMsgToChat)(e,a)}))}))),l.Cmd.openChatFromUnread(t[0]);this.end()}}componentDidMount(){this.push((0,f.jsx)(u.SelectModal,{onConfirm:this.onForwardConfirmed,maxItems:this.props.serverProps.multicastLimitGlobal,title:d.default.t(866),listType:u.ListType.CHAT_SELECT_MODAL}))}}t.default=e=>(0,f.jsx)(p,(0,i.default)((0,i.default)({},e),{},{serverProps:h.ServerProps}))},83753:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48926)),r=a(80140),s=a(88102),l=n(a(69618)),o=n(a(32973)),d=n(a(43725)),u=a(24064),c=a(56728),h=a(64551),f=a(85893);class p extends o.default{constructor(){var e;super(...arguments),e=this,this._handleForwardConfirmed=t=>{(0,u.qplStartProductSendMessage)("Forward",void 0,t.length);const a=t.map(function(){var t=(0,i.default)((function*(t){return t.isUser&&t.contact.isBlocked()&&(yield(0,r.unblockContact)(t.contact)),e._sendProduct(t)}));return function(){return t.apply(this,arguments)}}());(0,u.qplEndProductMessageSend)(Promise.all(a)),this.end(),1===t.length&&(s.Cmd.openChatFromUnread(t[0]),window.innerWidth<=l.default.LAYOUT_2COLUMNS_MAX_WIDTH&&s.Cmd.closeDrawerRight()),this.props.onSend&&this.props.onSend()},this._handleCancel=()=>{this.end()},this._sendProduct=e=>{const{product:t}=this.props;return new Promise(((a,n)=>{s.Cmd.once("ui_idle",(()=>{e.sendProductMessage(t).then((()=>a())).catch((e=>n(e)))}))}))}}componentDidMount(){s.Cmd.closeContextMenu(),s.Cmd.closeTooltip(),this.push((0,f.jsx)(c.SelectModal,{onConfirm:this._handleForwardConfirmed,maxItems:h.ServerProps.multicastLimitGlobal,title:d.default.t(866),listType:c.ListType.CHAT_SELECT_MODAL,onCancel:this._handleCancel}))}}t.default=p},77248:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(62921)),s=i(a(51731)),l=n(a(85965)),o=a(88102),d=a(17239),u=a(19380),c=i(a(43250)),h=i(a(32973)),f=a(99234),p=i(a(15048)),m=i(a(57302)),g=i(a(31839)),v=i(a(11339)),x=i(a(46385)),C=i(a(22082)),_=a(39828),S=a(77117),y=a(82039),j=i(a(87613)),E=i(a(98863)),T=i(a(68132)),I=i(a(74265)),b=a(46133),w=i(a(7693)),k=i(a(45026)),P=i(a(37789)),M=i(a(79697)),L=i(a(58030)),A=i(a(14551)),O=a(85893);class D extends h.default{constructor(){super(...arguments),this._showWallpaperDrawer=()=>{this.push((0,O.jsx)(A.default,{onClose:this._pop}))},this._showArchiveSettingsDrawer=()=>{this.push((0,O.jsx)(r.default,{settings:T.default,onClose:this._pop}))},this._showRequestAccountInfo=()=>this.push((0,O.jsx)(j.default,{settings:T.default,onClose:this._pop})),this._showBlockedDrawer=()=>{this.push((0,O.jsx)(s.default,{onClose:this._pop}))},this._showProfileDrawer=()=>{const e=(0,f.getMaybeMeUser)(),t=b.StatusCollection.assertGet(e),a=y.ProfilePicThumbCollection.assertGet(e),n=u.ContactCollection.assertGet(e);this.push((0,O.jsx)(S.ProfileDrawerFlowLoadable,{status:t,profilePicThumb:a,contact:n,conn:d.Conn,onClose:this._pop}))},this._showNotifications=()=>{this.push((0,O.jsx)(x.default,{onClose:this._pop}))},this._showTwoFactor=()=>{this.push((0,O.jsx)(k.default,{onClose:this._pop,twoFactorEnabled:!1,onOpenUpdateEmailDrawer:this._showTwoFactorUpdateEmail,onOpenUpdatePinDrawer:this._showTwoFactorUpdatePinDrawer,onOpenRegistrationDrawer:this._showTwoFactorRegistrationDrawer}))},this._showTwoFactorUpdateEmail=()=>{this.push((0,O.jsx)(M.default,{onClose:this._pop}))},this._showTwoFactorUpdatePinDrawer=()=>{this.push((0,O.jsx)(L.default,{onClose:this._pop}))},this._showTwoFactorRegistrationDrawer=()=>{this.push((0,O.jsx)(P.default,{onClose:this._pop}))},this._showMediaAutoDownload=()=>{this.push((0,O.jsx)(g.default,{onClose:this._pop}))},this._showSecurity=()=>{this.push((0,O.jsx)(E.default,{onClose:this._pop}))},this._showPrivacyVisibilityEditDrawer=e=>{this.push((0,O.jsx)(_.PrivacyVisibilityEditDrawer,{onClose:this._pop,category:e}))},this._showPrivacyDrawer=()=>{this.push((0,O.jsx)(C.default,{onClose:this._pop,onOpenVisibilityEditDrawer:this._showPrivacyVisibilityEditDrawer,onOpenBlockedContacts:this._showBlockedDrawer,onOpenEphemeralityDrawer:this._showEphemeralityDrawer}))},this._showEphemeralityDrawer=()=>{this.push((0,O.jsx)(c.default,{onClose:this._pop,entryPoint:v.default.DISAPPEARING_MODE_ENTRY_POINT_TYPE.ACCOUNT_SETTINGS}))},this._showDesktopSettingsDrawer=()=>{},this._showHelp=()=>{l.upload({reason:"help-page-opened",isHighPri:!0}),this.push((0,O.jsx)(p.default,{onClose:this._pop}))},this._showThemePopup=()=>{o.Cmd.openModal((0,O.jsx)(w.default,{}))},this.showKeyboardShortcuts=()=>{o.Cmd.openModal((0,O.jsx)(m.default,{}))},this._pop=()=>{this.pop()}}componentDidMount(){this.push((0,O.jsx)(I.default,{profileId:(0,f.getMaybeMeUser)(),onWallpaper:this._showWallpaperDrawer,onBlocked:this._showBlockedDrawer,onProfile:this._showProfileDrawer,onNotifications:this._showNotifications,onTwoFactor:this._showTwoFactor,onMediaAutoDownload:this._showMediaAutoDownload,onSecurity:this._showSecurity,onPrivacy:this._showPrivacyDrawer,onDesktopSettings:()=>{},onHelp:this._showHelp,onThemeSettings:this._showThemePopup,onKeyboardShortcuts:this.showKeyboardShortcuts,onClose:this._pop,settings:T.default,onArchiveSettings:this._showArchiveSettingsDrawer,onRequestAccountInfo:this._showRequestAccountInfo}))}}t.default=D},540:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(88102),r=n(a(32973)),s=a(84387),l=n(a(78985)),o=n(a(61752)),d=a(85893);class u extends r.default{constructor(){super(...arguments),this.sessionId=Math.round(1e9*Math.random()),this._openStatusViewer=(e,t,a)=>{this.push((0,d.jsx)(o.default,{initialStatusV3:e,initialStatusMsg:t,closeStatusViewer:this.closeStatusViewer,sessionId:this.sessionId,rowIdx:a}),"none")},this.closeStatusViewer=e=>{e?this.end():this.pop("none")}}componentDidMount(){this.push((0,d.jsx)(l.default,{onOpenStatus:this._openStatusViewer,closeStatusViewer:this.closeStatusViewer,sessionId:this.sessionId}),"status-v3-modal"),this.props.listeners.add(i.Cmd,"close_status_viewer",(()=>{this.closeStatusViewer(!0)}))}componentWillUnmount(){this.props.onFlowEnd()}}var c=(0,s.ListenerHOC)(u);t.default=c},86245:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(88102),r=n(a(32973)),s=n(a(11339)),l=n(a(39822)),o=n(a(41966)),d=n(a(37968)),u=a(85893);class c extends r.default{constructor(){super(...arguments),this._scrollOffset=0,this._handleScrollOffsetChange=e=>{this._scrollOffset=e},this.handleStickerStore=()=>{const e=(0,u.jsx)(d.default,{onStickerPackDetails:this.handleStickerPackDetails,onClose:this._pop,onScrollOffsetChange:this._handleScrollOffsetChange});this.push(e)},this.handleStickerPackDetails=e=>{const t=(0,u.jsx)(o.default,{stickerPack:e,onStickerClick:this.handleStickerDetails,onStickerEnter:this.handleStickerDetails,onBack:this._handleBackStickerPackDetails});this.push(t)},this.handleStickerPackDetailsById=e=>{const t=(0,u.jsx)(o.default,{stickerPackId:e,onStickerClick:this.handleStickerDetails,onStickerEnter:this.handleStickerDetails,onClose:this._end});this.push(t)},this.handleStickerDetails=(e,t)=>{const a=(0,u.jsx)(l.default,{sticker:e,stickerPack:t,onSend:this.handleStickerSend,onBack:this._pop});this.push(a)},this.handleStickerSend=e=>{this._pop(),i.Cmd.once("ui_idle",(()=>{this.props.onSticker(e,s.default.STICKER_SEND_ORIGIN_TYPE.STICKER_STORE)}))},this._pop=()=>{this.pop()},this._end=()=>{this.end(!0)},this._handleBackStickerPackDetails=()=>{this.popAndUpdate({scrollOffset:this._scrollOffset})}}componentDidMount(){const{stickerPackId:e}=this.props;e?this.handleStickerPackDetailsById(e):this.handleStickerStore()}}t.default=c},92557:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MerchantDetailsFormFlowLoadable=void 0;var i=n(a(48926)),r=n(a(68356)),s=n(a(69618)),l=n(a(16866)),o=n(a(15334)),d=a(85893);const u=(0,o.default)((0,i.default)((function*(){return(yield Promise.all([a.e(8295),a.e(1702),a.e(9488),a.e(275)]).then(a.bind(a,11753))).default})),"MerchantDetailsFormFlow"),c=(0,r.default)({loader:u,loading:e=>(0,d.jsx)(l.default,{error:Boolean(e.error)}),delay:s.default.LOADABLE_DELAY});t.MerchantDetailsFormFlowLoadable=c},85905:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ExpiredLocationDrawer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"LiveLocationDrawer",{enumerable:!0,get:function(){return i.default}});var i=n(a(11399)),r=n(a(74717))},72443:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=a(35718),s=n(a(69618)),l=n(a(9996)),o=a(33262),d=a(99282),u=a(85893);function c(e,t){let{layer:a,outlineLayer:n,dimension:c,removeBackground:h,scale:f,visible:p}=e;const m=(0,i.useRef)(),g=(0,i.useRef)();if((0,i.useImperativeHandle)(t,(()=>({toCanvas(){var e;const t=null===(e=g.current)||void 0===e?void 0:e.getBoundingRect(),a=m.current;if(!t||!a||t.size.isEmpty())return;const{x:n,y:i,width:l,height:o}=t;var d;null===(d=g.current)||void 0===d||d.show();const u=a.toCanvas({x:n,y:i,width:l,height:o,pixelRatio:1/f});var c;null===(c=g.current)||void 0===c||c.hide();const h=Math.max(u.width,u.height)/s.default.STICKER_DIMENSION,p=s.default.STICKER_BORDER_WIDTH*h,v=Math.max(Math.ceil(p),2),x=(0,r.addBorder)(u,v);return(0,r.trim)(x)}}))),!a||!n)return null;const v=a.frame.getCenter();return(0,u.jsxs)(d.Group,{ref:m,visible:p,children:[(0,u.jsx)(d.Group,{x:v.x,y:v.y,offsetX:a.width/2,offsetY:a.height/2,width:a.width,height:a.height,rotation:a.rotation,scaleX:a.scale,scaleY:a.scale,children:(0,u.jsx)(l.default,{layer:a})}),(0,u.jsx)(o.Outline,{ref:g,layer:n,dimension:c})]})}var h=(0,i.forwardRef)(c);t.default=h},39239:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasContext=void 0;const n={transforming:!1,dragging:!1,editing:!1},i=(0,a(67294).createContext)(n);t.CanvasContext=i},89797:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasLayer=function(e){let{layer:t,scale:a,editing:n,selected:C,editable:_,hidden:S,textBackgroundShadow:y,dimension:j,selectedGroupRef:E,transformerRef:T,stageWidth:I,stageHeight:b,onSelect:w,onDoubleClick:k,onDragStart:P,onDragEnd:M,onDragMove:L,onTransformStart:A,onTransformEnd:O}=e;const[D,R]=(0,i.useState)(!1),N=(0,i.useContext)(r.CanvasContext);let F,B,U,H;_&&C&&!n&&(B=(0,v.jsx)(p.default,{layer:t}),H=(0,v.jsx)(f.Transformer,{ref:T,anchorStroke:"blue",anchorFill:"white",anchorSize:8,anchorCornerRadius:4,borderEnabled:!1,centeredScaling:!0,enabledAnchors:["bottom-right"],resizeEnabled:!0,rotateAnchorOffset:12,rotateEnabled:!0,rotationSnaps:x,ignoreStroke:!0,rotationSnapTolerance:10,boundBoxFunc:(e,n)=>{const i=n.width/a,r=n.height/a;return t instanceof g.TextLayer&&(i<=18||r<=18)||i<=36||r<=36?e:n}},"transformer"));_&&D&&!C&&(U=(0,v.jsx)(l.default,{layer:t}));t instanceof d.ImageLayer?F=(0,v.jsx)(o.default,{layer:t}):t instanceof s.DrawLayer?t.type===s.DrawLayerType.Paint?F=(0,v.jsx)(h.default,{layer:t}):t.type===s.DrawLayerType.Outline&&(F=(0,v.jsx)(c.Outline,{layer:t,dimension:j})):t instanceof g.TextLayer&&!n&&(F=(0,v.jsx)(m.default,{layer:t,shadow:y}));S&&(F=(0,v.jsx)(f.Rect,{width:t.width,height:t.height}));(0,i.useEffect)((()=>{n&&R(!1)}),[n,R]);const G=t.frame.getCenter();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(f.Group,{ref:C?E:null,x:G.x,y:G.y,offsetX:t.width/2,offsetY:t.height/2,width:t.width,height:t.height,rotation:t.rotation,scaleX:t.scale,scaleY:t.scale,draggable:_,dragBoundFunc:e=>{let{x:t,y:a}=e;return t<0?t=0:t>I&&(t=I),a<0?a=0:a>b&&(a=b),{x:t,y:a}},onMouseEnter:e=>{!t.editable||N.dragging||N.transforming||(e.cancelBubble=!0,R(!0))},onMouseLeave:e=>{t.editable&&(e.cancelBubble=!0,R(!1))},onMouseDown:e=>{t.editable&&(e.cancelBubble=!0,w(t))},onDblClick:()=>k(t),onDragStart:()=>P(t),onDragEnd:e=>{const a=(0,u.getPointFromGroup)(e);M(t,a)},onDragMove:e=>L(t,e),onTransformStart:()=>A(t),onTransformEnd:e=>{if(!C)return;const a=(0,u.getRotationFromGroup)(e),n=(0,u.getScaleFromGroup)(e);O(t,a,n)},children:[F,B,U]}),H]})};var i=a(67294),r=a(39239),s=a(50833),l=n(a(67101)),o=n(a(9996)),d=a(39989),u=a(91788),c=a(33262),h=n(a(7029)),f=a(99282),p=n(a(74554)),m=n(a(63933)),g=a(81829),v=a(85893);const x=[0,45,90,135,180,225,270,315]},49966:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditableText=void 0;var i=n(a(81109)),r=n(a(18446)),s=a(67294),l=a(60811),o=n(a(54115)),d=n(a(18888)),u=a(30424),c=a(39581),h=n(a(43725)),f=n(a(23217)),p=a(51234),m=a(18644),g=n(a(24717)),v=n(a(33743)),x=n(a(41502)),C=n(a(60265)),_=a(85893);const S=(0,d.default)(),y=(0,s.forwardRef)(((e,t)=>{let{text:a,layer:n,layerCenter:d,scale:p,onSave:y,onUnselect:T,onOutsideClick:I}=e;const[b,w]=(0,s.useState)(a),[k,P]=(0,s.useState)(),M=(0,s.useRef)(),L=(0,s.useCallback)((()=>{y(b.replace(/^\n+/,"").replace(/\n+$/,""))}),[y,b]);(0,s.useImperativeHandle)(t,(()=>({save:()=>{L(),T()}})),[L,T]);const A=(0,v.default)((e=>{k||!1===(null==I?void 0:I(e))||(L(),T())})),O=e=>{const t=M.current;t&&t.replaceSelection(e)},D=()=>{P(null)},[R,N]=(0,C.default)((e=>{P({menu:(0,_.jsx)(u.EmojiPanel,{onEmoji:O,onFocusNext:D,onFocusPrev:D}),anchor:e.target})}));(0,s.useEffect)((()=>{var e,t;null===(e=M.current)||void 0===e||null===(t=e.refInput)||void 0===t||t.focus()}),[]);const F=Math.max(n.scale*p,1.2),B={borderWidth:2/F,padding:n.styles.layerPadding-2,transform:`scale(${F})`},U={left:d.x*p,top:d.y*p},H={color:n.textColor.toHex(),fontFamily:(0,c.getFontStyle)(n.font).fontFamily,fontSize:n.fontSize,lineHeight:`${n.lineHeight+2*n.styles.lineVerticalPadding}px`,textAlign:j(n.alignment),paddingLeft:n.styles.lineHorizontalPadding+1,paddingRight:n.styles.lineHorizontalPadding+1,paddingTop:1,paddingBottom:1,borderWidth:0,borderRadius:6,margin:0,boxSizing:"border-box",backgroundColor:n.textBackground?n.textBackgroundColor.toHex():void 0},G=n.styles.backgroundShadow,V={boxShadow:n.textBackground?`${G.offsetX}px ${G.offsetY}px ${G.radius}px ${G.spread}px ${G.color.toRgbaString()}`:void 0},W=function(e){const t=(0,x.default)(e),a=(0,s.useRef)(0);t&&!(0,r.default)(t,e)&&(a.current+=1);return a.current}(H),z=(0,i.default)((0,i.default)({},H),{},{fontSize:15,paddingRight:8,fontFamily:void 0}),q=20-n.fontSize,K=n.styles.lineVerticalPadding-q,Y=`\n    .${o.default.inputContainer} .emoji.emoji.emoji {\n      margin: ${K}px ${-q/2}px 0 ${-q/2}px;\n      transform: scale(${n.fontSize/20});\n    }\n  `;return(0,_.jsxs)("div",{className:o.default.positioner,style:U,children:[(0,_.jsxs)("div",{className:o.default.container,style:B,children:[(0,_.jsx)("style",{children:Y}),(0,_.jsxs)("div",{className:o.default.resizableInput,ref:A,children:[(0,_.jsx)("div",(0,i.default)((0,i.default)({className:o.default.emojiButton},N),{},{ref:R,style:{transform:`scale(${1/F}) translateX(-${50*F}%)`,top:28*(1-1/F)/2-40},children:(0,_.jsx)("div",{className:o.default.buttonIconWrapper,children:(0,_.jsx)(f.default,{name:"smiley"})})})),(0,_.jsx)("div",{className:o.default.inputContainer,style:V,children:(0,_.jsx)(S,{style:H,ref:M,initialValue:b,onChange:e=>{let t=e;t=e.match(/\n\n$/)?t.replace(/\n\n$/,"\n"):t.replace(/\n$/,""),w(t)},onEnter:L,multiline:!0,theme:"media-editor-text-input",placeholder:h.default.t(797)},W)}),(0,_.jsx)(E,{layer:n,text:b||h.default.t(797),style:b?H:z})]})]}),k&&(0,_.jsx)(m.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:D,children:(0,_.jsx)(g.default,{contextMenu:(0,i.default)({dirY:l.DirY.TOP,type:"emoji_picker"},k)})})]})}));function j(e){switch(e){case c.TextAlignment.LEFT:return"left";case c.TextAlignment.CENTER:return"center";case c.TextAlignment.RIGHT:return"right"}}function E(e){let{text:t,style:a,layer:n}=e;return(0,_.jsx)("div",{className:o.default.hiddenText,style:a,children:(0,p.getLines)(t,n.font,n.fontSize,0).map(((e,t)=>(0,_.jsx)("div",{className:o.default.hiddenTextLine,children:0===e.words.length?" ":e.words.map(((e,t)=>e.emojiPath?(0,_.jsx)("span",{className:o.default.emojiPlaceholder},t):e.text))},t)))})}t.EditableText=y},67101:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const a=t instanceof i.ImageLayer&&(t.isSticker()||t.isBackground());return(0,s.jsx)(r.Rect,{width:t.width,height:t.height,stroke:l.toRgbaString(),strokeWidth:2,cornerRadius:a?40:5,strokeScaleEnabled:!1})};var n=a(16241),i=a(39989),r=a(99282),s=a(85893);const l=new n.Color(82,248,24,1)},9996:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{layer:t}=e;return(0,i.jsx)(n.Image,{width:t.width,height:t.height,image:t.image})};var n=a(99282),i=a(85893)},35344:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(18446)),s=a(67294),l=n(a(72443)),o=a(39239),d=a(89797),u=a(16241),c=a(49966),h=a(91788),f=n(a(88564)),p=n(a(60541)),m=a(99282),g=a(81829),v=a(54274),x=n(a(71328)),C=a(85893);const _="#52F818";function S(e,t){var a;const{inPaintMode:n=!1,inOutlineMode:S=!1,paintColor:y=u.Color.White,paintThickness:j=v.THICKNESS.MEDIUM,outlineSmoothing:E=!0,canEditLayer:T=!0,canEditBackground:I=!1,outlineEnabled:b=!1,currentlyEditingTextLayer:w=null,draftTextLayer:k=null,onLayerSelect:P=(()=>{}),onLayerUnselect:M=(()=>{}),onLayerTranslate:L=(()=>{}),onLayerTransform:A=(()=>{}),onTextEditingStart:O=(()=>{}),onTextEditingEnd:D=(()=>{}),onTextInputOutsideClick:R=(()=>!0),onPaintDrawEnd:N=(()=>{}),onOutlineDrawEnd:F=(()=>{}),onOutlineDone:B=(()=>{}),scale:U,data:H}=e,G=(0,s.useRef)(null),V=(0,s.useRef)(null),W=(0,s.useRef)(null),z=(0,s.useRef)(null),q=(0,s.useRef)(null),K=(0,s.useRef)(null),Y=(0,s.useRef)(null),Q=(0,s.useRef)(null),X=(0,s.useRef)(null),Z=(0,s.useRef)({dragging:!1,transforming:!1,editing:!1}),[J,$]=(0,s.useState)({horizontal:null,vertical:null}),[ee,te]=(0,s.useState)(!1),[ae,ne]=(0,s.useState)(!1),[ie,re]=(0,s.useState)("crosshair"),se=()=>{Z.current.dragging=!0,te(!0)},le=(e,t)=>{Z.current.dragging=!1,L(e,t),$({vertical:null,horizontal:null}),te(!1)},oe=()=>{Z.current.transforming=!0,ne(!0)},de=(e,t,a)=>{Z.current.transforming=!1,A(e,t,a),ne(!1)},ue=()=>{if(!G.current)throw new Error("MediaEditorCanvas:stage is not initialized");return G.current.getStage()},ce=(e,t)=>{var a,n,i,s;const l=[{position:ue().width()/2,orientation:"v"},{position:ue().height()/2,orientation:"h"}],o=t.target,d=o.absolutePosition(),u=[{position:d.y,orientation:"h"},{position:d.x,orientation:"v"}],c=[];for(const e of u)for(const t of l){if(e.orientation!==t.orientation)continue;const a=Math.abs(t.position-e.position);a<=15&&c.push({guide:t,distance:a})}c.sort(((e,t)=>e.distance-t.distance));let h=null,f=null;for(const{guide:e}of c)"v"!==e.orientation||h?"h"!==e.orientation||f||(f=e):h=e;o.absolutePosition({x:null!==(a=null===(n=h)||void 0===n?void 0:n.position)&&void 0!==a?a:d.x,y:null!==(i=null===(s=f)||void 0===s?void 0:s.position)&&void 0!==i?i:d.y});const p={horizontal:f,vertical:h};(0,r.default)(J,p)||$(p)},he=e=>{e instanceof g.TextLayer&&O(e)},fe=e=>{k&&D(k,e)},pe=e=>{P(e)},me=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hidden:a=!1}=t,i=H.selectedLayer===e&&w!==e,r=H.screenWidth*U,s=H.screenHeight*U,l=H.cropSize.dimension,o=e.editable&&T&&!n&&!S&&!w;return(0,C.jsx)(d.CanvasLayer,{layer:e,scale:U,textBackgroundShadow:!ee,dimension:l,editing:w===e,selected:i,editable:o,stageHeight:s,stageWidth:r,selectedGroupRef:e=>{V.current=e},transformerRef:e=>{W.current=e},onSelect:pe,onDoubleClick:he,onDragMove:ce,onDragStart:se,onDragEnd:le,onTransformStart:oe,onTransformEnd:de,hidden:a},String(e.id))};(0,s.useEffect)((()=>{var e,t,a;V.current&&(null===(e=W.current)||void 0===e||e.nodes([V.current]),null===(t=W.current)||void 0===t||null===(a=t.getLayer())||void 0===a||a.batchDraw())}));const ge=()=>{var e,t,a,n,i,r,s,l,o,d,u;null===(e=W.current)||void 0===e||e.hide(),null===(t=V.current)||void 0===t||null===(a=t.getChildren()[1])||void 0===a||a.hide(),null===(n=V.current)||void 0===n||null===(i=n.getChildren()[2])||void 0===i||i.hide(),null===(r=z.current)||void 0===r||r.hide(),null===(s=K.current)||void 0===s||s.toggleCursor(!1),null===(l=Y.current)||void 0===l||l.hide(),null===(o=W.current)||void 0===o||null===(d=o.getLayer())||void 0===d||d.batchDraw(),null===(u=q.current)||void 0===u||u.hide();const c=ue().toDataURL({mimetype:"image/png",quality:1,pixelRatio:1/U});var h,f,p,m,g,v,x,C,_,S,y;return null===(h=W.current)||void 0===h||h.show(),null===(f=V.current)||void 0===f||null===(p=f.getChildren()[1])||void 0===p||p.show(),null===(m=V.current)||void 0===m||null===(g=m.getChildren()[2])||void 0===g||g.show(),null===(v=z.current)||void 0===v||v.show(),null===(x=K.current)||void 0===x||x.toggleCursor(!0),null===(C=Y.current)||void 0===C||C.show(),null===(_=W.current)||void 0===_||null===(S=_.getLayer())||void 0===S||S.batchDraw(),null===(y=q.current)||void 0===y||y.show(),c},ve=()=>{var e;return null===(e=X.current)||void 0===e?void 0:e.toCanvas()},xe=()=>{var e;null===(e=Q.current)||void 0===e||e.save()},Ce=()=>(ee||ae)&&H.selectedLayer===H.background;(0,s.useImperativeHandle)(t,(()=>({getStage:ue,getDataUrl:ge,endTextEditing:xe,getBackground:ve})));const _e=H.screenWidth/2,Se=H.screenHeight/2,ye=H.toScreenPoint(H.cropCenter),je=H.toScreenPoint(H.canvasCenter),Ee=_e-(ye.x-je.x),Te=Se-(ye.y-je.y),Ie=H.cropSize.dimension;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.Stage,{ref:G,width:H.screenWidth*U,height:H.screenHeight*U,onMouseDown:e=>{w||(0,h.isEventOnAnchor)(e)||M()},scaleX:U,scaleY:U,style:(0,i.default)({cursor:n?"none":S?ie:"default"},null!==(a=e.style)&&void 0!==a?a:{}),children:(0,C.jsxs)(o.CanvasContext.Provider,{value:Z.current,children:[b&&(0,C.jsx)(m.Layer,{x:Ee,y:Te,offsetX:H.width/2,offsetY:H.height/2,rotation:H.rotation,children:(0,C.jsx)(x.default,{ref:q,width:H.width,height:H.height})},"transparent"),(0,C.jsx)(m.Layer,{x:Ee,y:Te,offsetX:H.width/2,offsetY:H.height/2,rotation:H.rotation,children:(0,C.jsx)(l.default,{ref:X,layer:H.background,outlineLayer:H.outlineLayer,dimension:Ie,removeBackground:b&&!S,scale:U,visible:!Ce()})},"background"),(0,C.jsx)(m.Layer,{x:Ee,y:Te,offsetX:H.width/2,offsetY:H.height/2,rotation:H.rotation,children:(()=>{const e=[];if(H.paintLayer&&!Z.current.dragging){const t=me(H.paintLayer);e.push(t)}if(I&&H.background){const t=me(H.background,{hidden:!Ce()});e.push(t)}if(H.paintLayer&&Z.current.dragging){const t=me(H.paintLayer);e.push(t)}return e.push(...H.layers.map((e=>me(e)))),e})()},"edits"),(()=>{const{vertical:e,horizontal:t}=J;if(!e&&!t)return null;const a=ue();return(0,C.jsxs)(m.Layer,{ref:z,children:[e&&(0,C.jsx)(m.Line,{x:e.position/U,y:0,points:[0,0,0,a.height()/U],stroke:_,strokeWidth:1,strokeScaleEnabled:!1},"vertical"),t&&(0,C.jsx)(m.Line,{x:0,y:t.position/U,points:[0,0,a.width()/U,0],stroke:_,strokeWidth:1,strokeScaleEnabled:!1},"horizontal")]},"guides")})(),n&&(0,C.jsx)(p.default,{ref:K,width:H.screenWidth,height:H.screenHeight,scale:U,pathStyle:{color:y,thickness:(0,v.getThicknessValue)(j),smoothing:!1},data:H,onDrawEnd:N}),S&&(0,C.jsx)(f.default,{ref:Y,width:H.screenWidth,height:H.screenHeight,scale:U,data:H,smoothing:E,onDrawEnd:F,onDone:B,onCursorChange:e=>{re(e)}})]})}),(()=>{if(!k)return null;const e=H.toScreenPoint(k.frame.getCenter());return(0,C.jsx)(c.EditableText,{ref:Q,layer:k,layerCenter:e,text:k.text,scale:U,onSave:fe,onUnselect:M,onOutsideClick:R})})()]})}var y=(0,s.forwardRef)(S);t.default=y},33262:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Outline=void 0;var i=n(a(94654)),r=a(67294),s=n(a(69618)),l=a(99282),o=n(a(24055)),d=a(85893);function u(e,t){let{layer:a,dimension:n}=e;const u=(0,r.useRef)(),c=(0,r.useRef)();(0,r.useImperativeHandle)(t,(()=>({show(){var e;null===(e=u.current)||void 0===e||e.show()},hide(){var e;null===(e=u.current)||void 0===e||e.hide()},getBoundingRect(){const e=c.current;if(!e)return;const{x:t,y:n,width:i,height:r}=e.getClientRect();return o.default.create({x:t,y:n,width:i,height:r,rotation:a.rotation,scale:a.scale})}})));const h=(0,i.default)(a.getAllPoints(),(e=>[e.x,e.y]));return(0,d.jsx)(l.Group,{ref:u,width:a.width,height:a.height,visible:!1,children:(0,d.jsx)(l.Line,{ref:c,points:h,closed:!0,fill:"white",lineCap:"round",lineJoin:"round",tension:s.default.MEDIA_EDITOR_OUTLINE_TENSION,globalCompositeOperation:"destination-in"})})}const c=(0,r.forwardRef)(u);t.Outline=c},88564:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(94654)),s=a(67294),l=a(16241),o=n(a(69618)),d=(a(7293),a(99282)),u=n(a(85313)),c=a(85893);const h="dot-first",f="dot-last";function p(e,t){var a;let{width:n,height:p,scale:m,data:v,smoothing:x,onDrawEnd:C,onDone:_,onCursorChange:S}=e;const y=(0,s.useRef)(),j=(0,s.useRef)(!1),E=(0,s.useRef)("crosshair");(0,s.useEffect)((()=>{S("crosshair")}),[]),(0,s.useImperativeHandle)(t,(()=>({show(){var e;null===(e=y.current)||void 0===e||e.show()},hide(){var e;null===(e=y.current)||void 0===e||e.hide()}})));const{cursorPosition:T,points:I,handlers:b}=(0,u.default)({onDrawStart:()=>{j.current=!0},onDrawEnd:e=>{j.current=!1,C(e)},onDone:_,onMouseMove:e=>{const t=e.target.name()===h,a=j.current,n=t&&!a?"pointer":"crosshair";n!==E.current&&(E.current=n,S(n))},data:v,stage:null===(a=y.current)||void 0===a?void 0:a.getStage(),minPointDistance:12/m,clickThreshold:200,boundToStage:!0,doneTargets:{mousedown:[h,f],mouseup:[h]},pathStyle:{color:l.Color.White,thickness:0,smoothing:x}}),w=v.outlineLayer.getAllPoints().map((e=>v.toScreenPoint(e)));!x&&w.length&&w.push(w[w.length-1]);Boolean(I.length)&&w.push(I[0]),w.push(...I);const k=[...w];!x&&k.length&&k.push(k[k.length-1]),T&&k.push(T);const P=(0,r.default)(k,(e=>[e.x,e.y]));return(0,c.jsxs)(d.Layer,(0,i.default)((0,i.default)({ref:y},b),{},{width:n,height:p,children:[(0,c.jsx)(d.Rect,{x:0,y:0,width:n,height:p,fill:"rgba(0,0,0,0)"}),(0,c.jsx)(d.Line,{points:P,lineCap:"round",lineJoin:"round",stroke:"#FA6533",strokeWidth:3/m,dash:[12/m,6/m],tension:o.default.MEDIA_EDITOR_OUTLINE_TENSION}),(0,c.jsx)(g,{points:w,scale:m})]}),"paintCursor")}var m=(0,s.forwardRef)(p);function g(e){let{points:t,scale:a}=e;if(!t.length)return null;const n=t[0],i=t[t.length-1],r=3/a;return(0,c.jsxs)(c.Fragment,{children:[undefined,(0,c.jsx)(d.Circle,{name:f,x:i.x,y:i.y,radius:r}),(0,c.jsx)(d.Circle,{x:n.x,y:n.y,radius:r,stroke:"white"}),(0,c.jsx)(d.Circle,{name:h,x:n.x,y:n.y,radius:4*r})]})}t.default=m},7029:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const a=(0,n.useMemo)((()=>{const e=document.createElement("canvas");return e.width=Math.max(t.width,1),e.height=Math.max(t.height,1),e}),[t.width,t.height]),s=(0,n.useRef)();return(0,n.useEffect)((()=>{var e,n;a.getContext("2d").clearRect(0,0,a.width,a.height),t.paths.forEach((e=>function(e,t){const{points:a}=t;if(!a.length)return;const n=e.getContext("2d"),i={color:t.color,thickness:t.thickness,smoothing:!1};(function(e,t){e.lineCap="round",e.lineJoin="round",e.lineWidth=t.thickness,e.strokeStyle=t.color.toHex()})(n,i),n.beginPath(),n.moveTo(a[0].x,a[0].y),a.forEach((e=>n.lineTo(e.x,e.y))),n.stroke()}(a,e))),null===(e=s.current)||void 0===e||null===(n=e.getLayer())||void 0===n||n.batchDraw()}),[t.paths,a]),(0,r.jsx)(i.Image,{ref:s,width:t.width,height:t.height,image:a})};var n=a(67294),i=a(99282),r=a(85893)},60541:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(94654)),s=a(67294),l=a(99282),o=n(a(85313)),d=a(85893);const u=(e,t)=>{var a;let{width:n,height:u,scale:c,pathStyle:h,data:f,onDrawEnd:p}=e;const m=(0,s.useRef)(),g=(0,s.useRef)();(0,s.useImperativeHandle)(t,(()=>({toggleCursor(e){const t=g.current;t&&(e?t.show():t.hide())}})));const{cursorPosition:v,points:x,handlers:C}=(0,o.default)({onDrawEnd:p,data:f,pathStyle:h,stage:null===(a=m.current)||void 0===a?void 0:a.getStage()}),_=(0,r.default)(x,(e=>[e.x,e.y]));return(0,d.jsxs)(l.Layer,(0,i.default)((0,i.default)({ref:m},C),{},{width:n,height:u,children:[(0,d.jsx)(l.Rect,{width:n,height:u,fill:"rgba(0, 0, 0, 0)"}),v&&(0,d.jsx)(l.Circle,{ref:g,x:v.x,y:v.y,radius:h.thickness/2,fill:h.color.toRgbaString()}),(0,d.jsx)(l.Line,{points:_,lineCap:"round",lineJoin:"round",stroke:h.color.toRgbaString(),strokeWidth:h.thickness})]}),"paintCursor")};var c=(0,s.forwardRef)(u);t.default=c},74554:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t}=e;const a=t instanceof i.ImageLayer&&(t.isSticker()||t.isBackground());return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.Rect,{width:t.width,height:t.height,fill:o.toRgbaString(),stroke:l.toRgbaString(),strokeWidth:2,cornerRadius:a?40:5,strokeScaleEnabled:!1})})};var n=a(16241),i=a(39989),r=a(99282),s=a(85893);const l=new n.Color(82,248,24,1),o=new n.Color(82,248,24,.1)},63933:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{layer:t,shadow:a}=e;const o=function(e){const t=[];for(const a of e)for(const{emojiPath:e}of a.words)e&&t.push(e);return function(e){const t=[...new Set(e)],a=t.join(""),i=(0,n.useRef)({}),[,r]=(0,n.useState)(0);return(0,n.useEffect)((()=>{i.current={},r(0),t.forEach((e=>{const t=new Image;t.onload=()=>{i.current[e]=t,r(Object.keys(i.current).length)},t.src=e}))}),[r,a]),i.current}(t)}(t.lines),d=e=>{const a=Math.max(...t.lineWidths);let n=0;switch(t.alignment){case i.TextAlignment.LEFT:n=0;break;case i.TextAlignment.CENTER:n=(a-e.width)/2;break;case i.TextAlignment.RIGHT:n=a-e.width}let d=0;return e.words.map(((e,a)=>{let{text:u,emojiPath:c,width:h}=e;const f=n+t.styles.lineHorizontalPadding+d,p=t.styles.lineVerticalPadding;let m;if(c){const e=o[c];m=e?(0,l.jsx)(r.Image,{x:f,y:p,width:t.lineHeight,height:t.lineHeight,image:e},a):(0,l.jsx)(r.Rect,{x:f,y:p,width:t.lineHeight,height:t.lineHeight,fill:"rgba(0,0,0,0)"},a)}else{const e=(0,s.getTextBounds)(t.font,t.fontSize);m=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.Text,{x:f,y:p-e.top+(e.top+e.bottom)/2,width:h,height:t.lineHeight,text:u,fill:t.textColor.toHex(),fontFamily:(0,i.getFontStyle)(t.font).fontFamily,fontSize:t.fontSize},a)})}return d+=h,m}))},u=t.lines.map(((e,a)=>{const n=e.width+2*t.styles.lineHorizontalPadding,i=t.lineHeight+2*t.styles.lineVerticalPadding;return(0,l.jsx)(r.Group,{width:n,height:i,y:a*i,children:d(e)},a)})),{backgroundShadow:c}=t.styles;return(0,l.jsx)(r.Group,{visible:0!==t.width,width:t.width,height:t.height,children:(0,l.jsxs)(r.Group,{x:t.styles.layerPadding,y:t.styles.layerPadding,children:[t.textBackground&&(a?(0,l.jsx)(r.Path,{data:t.backgroundPath,stroke:t.textBackgroundColor.toHex(),fill:t.textBackgroundColor.toHex(),shadowColor:c.color.toHex(),shadowBlur:c.radius,shadowOffset:{x:c.offsetX,y:c.offsetY},shadowOpacity:c.color.alpha},"1"):(0,l.jsx)(r.Path,{data:t.backgroundPath,stroke:t.textBackgroundColor.toHex(),fill:t.textBackgroundColor.toHex()},"2")),u]})})};var n=a(67294),i=a(39581),r=a(99282),s=a(51234),l=a(85893)},71328:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(16241),r=a(99282),s=a(85893);const l=new i.Color(230,230,230).toRgbString(),o=new i.Color(255,255,255).toRgbString();function d(e,t){let{width:a,height:i}=e;const d=(0,n.useRef)();(0,n.useImperativeHandle)(t,(()=>({hide(){var e;null===(e=d.current)||void 0===e||e.hide()},show(){var e;null===(e=d.current)||void 0===e||e.show()}})));const u=(0,n.useMemo)((()=>{const e=document.createElement("canvas");return e.width=Math.max(a,1),e.height=Math.max(i,1),e}),[a,i]);return(0,n.useEffect)((()=>{var e,t;const n=u.getContext("2d");n.clearRect(0,0,u.width,u.height);const r=20,s=Math.ceil(a/r),c=Math.ceil(i/r);for(let e=0;e<c;e++)for(let t=0;t<s;t++){const a=(e+t)%2==0?o:l;n.beginPath(),n.rect(t*r,e*r,r,r),n.fillStyle=a,n.fill()}null===(e=d.current)||void 0===e||null===(t=e.getLayer())||void 0===t||t.batchDraw()}),[u,a,i]),(0,s.jsx)(r.Image,{ref:d,width:a,height:i,image:u})}var u=(0,n.forwardRef)(d);t.default=u},85313:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onDrawStart:t,onDrawEnd:a,onDone:n,onMouseMove:u,data:c,endOnMouseLeave:h=!0,minPointDistance:f=0,clickThreshold:p=0,boundToStage:m=!1,pathStyle:g={},stage:v,doneTargets:x={}}=e;const[C,_]=(0,r.useState)(),S=(0,r.useRef)([]),y=(0,r.useRef)(!1),j=(0,l.default)(),E=(0,o.default)(p),T=(0,r.useRef)(!1);return(0,d.useListener)(window,"mouseup",(()=>{if(y.current=!1,0!==S.current.length){const e=S.current.map((e=>c.toCanvasPoint(e)));a((0,i.default)({points:e},g)),S.current=[],j()}})),(0,d.useListener)(window,"mousemove",(e=>{const t=(0,s.getPointFromStage)(e,v,m),a=m&&y.current;if(_(a?(0,s.getPointFromStage)(e,v,!0):t),y.current){const e=S.current,a=e[e.length-1];(!a||a.distance(t)>=f&&E()||(0,s.isStageCorner)(t,v))&&e.push(t)}})),(0,r.useEffect)((()=>{T.current&&(null==n||n(),T.current=!1)})),{cursorPosition:C,points:S.current,handlers:{onMouseDown:e=>{var a;if(null==t||t(),null===(a=x.mousedown)||void 0===a?void 0:a.includes(e.target.name()))return void(null==n||n());const i=(0,s.getPointFromStage)(e.evt,v,m);S.current.push(i),y.current=!0,j()},onMouseUp:e=>{var t;const a=null===(t=x.mouseup)||void 0===t?void 0:t.includes(e.target.name()),n=1===S.current.length;a&&!n&&(T.current=!0)},onMouseMove:e=>{null==u||u(e)}}}};var i=n(a(81109)),r=a(67294),s=a(91788),l=n(a(59909)),o=n(a(28768)),d=a(19529)},69613:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{caption:t,setCaptionInputRef:a,onEnter:n}=e,S=(0,r.useRef)(null),y=(0,r.useRef)(null),[j,E]=(0,r.useState)(null),T=()=>{var e;null===(e=S.current)||void 0===e||e.focus()};(0,r.useEffect)((()=>{T()}),[]);const I=()=>{E(null)},b=e=>{const t=S.current;t&&(t.focus(!1),t.replaceSelection(e))},w=(0,C.numCodepoints)(e.caption||""),k=l.default.MAX_CAPTION_LENGTH-w<50,P=(0,_.jsx)("div",{role:"button",className:c.default.inputEmoji,onClick:e=>{e.preventDefault(),e.stopPropagation();const t=(0,_.jsx)(d.EmojiPanel,{onEmoji:b,onFocusNext:T,onFocusPrev:T});E({menu:t,dirY:o.DirY.TOP,type:"emoji_picker",anchor:e.target}),T()},children:(0,_.jsx)(g.default,{name:"emoji-input"})}),M=t&&""!==t?(0,_.jsx)("div",{role:"button",className:c.default.clearBtn,onClick:()=>{var e;null===(e=S.current)||void 0===e||e.reset(),T()},children:(0,_.jsx)(g.default,{name:"x-alt"})}):null,L=k&&(0,_.jsx)("div",{className:c.default.charCounter,children:h.default.n(l.default.MAX_CAPTION_LENGTH-w)});let A,O=null;j&&(O=(0,_.jsx)(v.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,ref:y,requestDismiss:I,children:(0,_.jsx)(x.default,{contextMenu:j})}));p.ServerProps.viewOnceWrite&&(A=(0,_.jsx)("div",{className:c.default.secondaryButtonContainer,children:(0,_.jsx)(s.default,{disabled:e.viewOnceDisabled,isOn:Boolean(e.viewOnce),mediaType:e.msgType,onChange:e.onToggleViewOnce,noMargin:!0})}));return(0,_.jsxs)(u.FlexRow,{className:(0,i.default)(c.default.container,{[c.default.videoCaption]:"video"===e.theme}),align:"center",justify:"center",children:[(0,_.jsx)("div",{className:c.default.suggestionsPositioner,children:(0,_.jsxs)("div",{className:c.default.suggestionsContainer,children:[(0,_.jsx)(f.default.MentionSuggestions,{chat:e.chat,theme:m.ThemeOptions.MEDIA_CAPTION}),(0,_.jsx)(f.default.EmojiSuggestions,{chat:e.chat,theme:m.ThemeOptions.MEDIA_CAPTION})]})}),(0,_.jsxs)(u.FlexRow,{align:"start",className:c.default.inputContainer,children:[(0,_.jsx)(f.default,{ref:e=>{S.current=e,a(e)},initialValue:t,placeholder:h.default.t(1360),onChange:e.onChange,onEnter:e=>{var t;(null===(t=S.current)||void 0===t?void 0:t.isFocused())&&n(e)},onFiles:e.onFiles,theme:"media-caption",maxLength:l.default.MAX_CAPTION_LENGTH,multiline:!0,spellCheck:!0}),(0,_.jsxs)(u.FlexRow,{className:c.default.buttonContainer,align:"center",children:[L,M,P]})]}),A,O]})};var i=n(a(94184)),r=a(67294),s=n(a(75680)),l=n(a(69618)),o=a(60811),d=a(30424),u=a(29623),c=n(a(71488)),h=n(a(43725)),f=n(a(43698)),p=a(64551),m=a(16477),g=n(a(23217)),v=a(18644),x=n(a(24717)),C=a(3940),_=a(85893)},54274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THICKNESS=void 0,t.getAllThicknesses=function(){return Object.keys(a)},t.getThicknessValue=function(e){return n[e]};const a=Object.freeze({SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",XLARGE:"XLARGE"});t.THICKNESS=a;const n={[a.SMALL]:8,[a.MEDIUM]:12,[a.LARGE]:18,[a.XLARGE]:24}},77890:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClick:t,onClose:a,forwardRef:n,id:i}=e,l=(0,h.useModelValues)(e.attachMedia,["mimetype","preview","type","fullPreview","fullPreviewSize","documentPageCount"]);return(0,f.jsxs)("div",{className:(0,r.default)(s.default.thumb,{[s.default.active]:e.active}),onClick:e=>{t((0,u.unproxy)(l),e)},tabIndex:"-1",ref:e=>{n(i,e)},children:[(0,f.jsx)("div",{className:s.default.btnDelete,onClick:e=>{a((0,u.unproxy)(l),e)},role:"button",children:(0,f.jsx)(c.default,{name:"x-alt"})}),(0,f.jsx)("div",{className:s.default.bodyWrapper,children:(()=>{let e;if(l.type===p)e=l.preview;else if(l.type===m)e=`data:image/jpeg;base64,${l.preview}`;else if("pdf"===(0,d.previewType)(l.mimetype)){l.fullPreview&&l.fullPreviewSize&&null!=l.documentPageCount&&l.documentPageCount>0&&(e=l.fullPreview)}if(e)return(0,f.jsx)("div",{className:s.default.body,children:(0,f.jsx)("img",{src:e,alt:o.default.t(1818)})});const t=(0,r.default)(s.default.body,s.default.bodyIcon,g[l.mimetype]?g[l.mimetype].icon:"icon-doc-generic");return(0,f.jsx)("div",{className:t})})()})]})};var i=n(a(35937)),r=n(a(94184)),s=n(a(99062)),l=n(a(69618)),o=n(a(43725)),d=a(43257),u=a(31019),c=n(a(23217)),h=a(49082),f=a(85893);const{IMAGE:p,VIDEO:m}=l.default.MSG_TYPE,g=(0,i.default)(d.MIMETYPES,(e=>"document"===(null==e?void 0:e.msgType)))},63727:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=a(99420),s=n(a(77890)),l=n(a(69618)),o=a(85893);const d=(0,r.SortableElement)((e=>{let{children:t}=e;return t})),u=(0,r.SortableContainer)((e=>{let{children:t}=e;return t}));class c extends i.Component{constructor(e){super(e),this._handleSortEnd=e=>{let{oldIndex:t,newIndex:a}=e;const{mediaCollection:n}=this.props,i=n.reorder(t,a);this.setState({medias:i})},this.state={medias:this.props.mediaCollection.getPreviewableMedias()}}static getDerivedStateFromProps(e){return{medias:e.mediaCollection.getPreviewableMedias()}}render(){const{mediaCollection:e,className:t,forwardRef:a}=this.props,n=this.state.medias;return(0,o.jsx)(u,{onSortEnd:this._handleSortEnd,axis:"x",helperClass:"SortableHelper",distance:10,children:(0,o.jsx)("div",{className:t,children:n.map(((t,n)=>{var i;return(0,o.jsx)(d,{index:n,children:(0,o.jsx)(s.default,{id:t.id,attachMedia:t,active:t===e.getActive(),previewMode:(null===(i=e.getActive())||void 0===i?void 0:i.type)!==l.default.MSG_TYPE.IMAGE,onClick:this.props.onClick,onClose:this.props.onClose,forwardRef:a})},t.id)}))})})}}t.default=c,c.displayName="DragAndDrop"},6327:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBody=void 0;var i=n(a(94184)),r=a(67294),s=a(80666),l=n(a(88262)),o=n(a(35344)),d=n(a(69613)),u=n(a(66430)),c=a(92320),h=a(30383),f=n(a(13057)),p=a(29623),m=a(66747),g=a(39581),v=a(53485),x=n(a(4104)),C=a(39989),_=n(a(43725)),S=n(a(54277)),y=a(17304),j=a(5807),E=n(a(16186)),T=n(a(46668)),I=a(79230),b=n(a(23217)),w=a(81829),k=n(a(77268)),P=n(a(9165)),M=a(54274),L=a(2541),A=n(a(81559)),O=a(19529),D=a(49082),R=a(85893);const N=new T.default({width:200,height:200}),F=(0,r.forwardRef)((function(e,t){const{paintColor:a,paintThickness:n,outlineSmoothing:F,onLayerDelete:B,onTextEditingStart:U,onTextEditingEnd:H,onOutlineDone:G,draftTextLayer:V,onLayerUnselect:W,onPaintSelect:z,onCropRotateCanvas:q,onOutlineSelect:K}=e,Y=(0,D.useModelValues)(e.attachMedia,["mediaEditorData","caption","id"]),Q=(0,r.useRef)(null),X=(0,r.useRef)(null),Z=(0,r.useRef)(null),J=(0,r.useRef)(null),$=(0,r.useRef)(null),ee=(0,r.useRef)(null),te=(0,r.useRef)(null),ae=(0,r.useRef)(null),[ne,ie]=(0,r.useState)(T.default.empty()),[re,se]=(0,r.useState)(!1),[le,oe]=(0,r.useState)(!1),[de,ue]=(0,r.useState)(!1),[ce,he]=(0,r.useState)(!1),[fe,pe]=(0,r.useState)(!1),[me,ge]=(0,r.useState)(!1),ve=()=>{oe((e=>!e))},xe=()=>Y.mediaEditorData,Ce=()=>{if(!Q.current)return;const e=Q.current.getBoundingClientRect(),t=new T.default({width:e.width-40,height:e.height-40});ie(t)},_e=()=>{!de&&xe().selectedLayer&&W(),ue((e=>!e)),Ce()},Se=()=>ce,ye=()=>{he((e=>!e))},je=()=>{if(le)ve();else if(de)_e();else if(Se())G(),ye();else{if(!Y.mediaEditorData.selectedLayer||V)return!1;W()}return!0};(0,O.useListener)(window,"mousedown",(e=>{ae.current=e.target})),(0,O.useListener)(window,"click",(()=>{const e=ae.current;e!==Q.current&&e!==Z.current&&e!==X.current||je()}));const Ee=()=>{const{selectedLayer:e}=Y.mediaEditorData;e&&B(e)},Te=e=>{"Backspace"!==e.code||e.target instanceof HTMLInputElement||e.target instanceof HTMLDivElement&&"true"===e.target.contentEditable||de||Ee()},Ie=()=>{const e=(()=>{if(!J.current)throw new Error("MediaEditor:canvas is not initialized");return J.current.getDataUrl()})();return L.URL.dataURLtoFile(e)},be=()=>{if(null!=J.current){const{width:e,height:t}=J.current.getStage().attrs;if(0!==e&&0!==t){const e=Ie(),t=window.URL.createObjectURL(e);Y.updateEditedFile(e),Y.updatePreview(t),Y.updateFullPreview(t)}}},we=(0,A.default)((()=>{te.current&&((0,v.cancelIdleCallback)(te.current),te.current=null),te.current=(0,v.requestIdleCallback)(be)}),1e3),ke=e=>{(null==e?void 0:e.immediately)?be():we()};(0,r.useEffect)((()=>(window.addEventListener("resize",Ce),window.addEventListener("keydown",Te),Ce(),()=>{window.removeEventListener("resize",Ce),window.removeEventListener("keydown",Te),ke({immediately:!0})})),[]);const Pe=()=>{if(de)_e();else if(le)ve();else if(ce)G(),ye();else if(V){var e;null===(e=J.current)||void 0===e||e.endTextEditing()}else xe().selectedLayer&&W()},Me=e=>{q(xe().rotation+e,xe().cropOrigin,xe().cropSize)},Le=()=>{q(0,new E.default({x:0,y:0}),xe().size)},Ae=(e,t)=>{q(xe().rotation,e,t)},Oe=(e,t)=>{e===s.MediaEditorAction.OutlineDone?(je(),ye()):e===s.MediaEditorAction.Outline?(Se()&&ye(),t===s.MediaEditorAction.Outline&&ye()):e===s.MediaEditorAction.CropRotateCanvas&&(je(),t===s.MediaEditorAction.CropRotateCanvas&&_e())},De=(e,t)=>{e===s.MediaEditorAction.OutlineDone?je():e===s.MediaEditorAction.Outline?Se()||ye():e===s.MediaEditorAction.CropRotateCanvas?(je(),_e()):t===s.MediaEditorAction.CropRotateCanvas&&e!==s.MediaEditorAction.CropRotateCanvas&&je()},Re=()=>{const e=Y.mediaEditorData;return(0,I.calculateContainScale)(e.screenWidth,e.screenHeight,ne,N)},Ne=()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.getBackground()};(0,r.useImperativeHandle)(t,(()=>({updatePreview:ke,undoAction:Oe,redoAction:De,getCanvasScale:Re,resetUIState:je,getBackground:Ne})));const Fe=Y.mediaEditorData,Be=e.draftTextLayer||Fe.selectedLayer;let Ue;if(de)Ue=(0,R.jsx)(h.CropRotateToolbar,{canReset:Fe.isRotated()||Fe.isCropped(),onRotateCanvas:Me,onReset:Le});else if(ce)Ue=(0,R.jsx)(j.OutlineToolbar,{smoothing:e.outlineSmoothing,onSmoothingToggle:e.onOutlineSmoothingToggle,canReset:Fe.isOutlined(),onReset:e.onOutlineReset});else if(Be){const t=Be instanceof C.ImageLayer&&Be.isBackground();if(Be instanceof w.TextLayer){const t=(0,c.getAllColors)().map((e=>{const t=(0,c.getColorValue)(e),a=(0,c.getColorValue)(t.isLight()?c.COLORS.BLACK:c.COLORS.WHITE);return{primaryColor:t,secondaryColor:a}}));Ue=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(u.default,{ref:$,colors:t,onColorSelect:e.onTextColorSelect,selectedColor:Be.textColor}),(0,R.jsx)(m.Font,{ref:ee,fonts:(0,g.getAllFonts)(),selectedFont:Be.font,selectedAlignment:Be.alignment,onFontSelect:e.onFontSelect,onAlignmentSelect:e.onAlignmentSelect}),(0,R.jsx)(k.default,{checked:Be.textBackground,onBackgroundToggle:e.onTextBackgroundToggle}),(0,R.jsx)(l.default,{icon:"delete",title:_.default.t(785),onClick:Ee})]})}else t||(Ue=(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(l.default,{icon:"delete",title:_.default.t(785),onClick:Ee})}))}else le&&(Ue=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(u.default,{colors:(0,c.getAllColors)().map((e=>({primaryColor:(0,c.getColorValue)(e)}))),onColorSelect:e.onPaintColorSelect,selectedColor:a}),(0,R.jsx)(P.default,{thicknesses:(0,M.getAllThicknesses)(),onThicknessSelect:e.onPaintThicknessSelect,selectedThickness:n})]}));const He=!Ue&&!e.draftTextLayer&&!e.sendAsSticker,Ge=(0,R.jsx)(p.FlexRow,{className:(0,i.default)(x.default.captionInputContainer,{[x.default.captionInputHidden]:!He}),justify:"center",children:(0,R.jsx)(d.default,{chat:e.chat,caption:Y.caption,viewOnce:e.viewOnce,viewOnceDisabled:e.viewOnceDisabled,msgType:y.TYPE.IMAGE,theme:"image",onToggleViewOnce:e.onToggleViewOnce,onChange:e.onCaptionChange,onEnter:e.onEnter,onFiles:e.onFiles,setCaptionInputRef:t=>{e.setCaptionInputRef(Y.id,t)}},Y.id)}),Ve=(0,R.jsxs)(p.FlexRow,{justify:"center",align:"center",className:x.default.footer,ref:Z,children:[Ue&&(0,R.jsx)(p.FlexRow,{justify:"center",align:"center",className:x.default.bottomToolbar,children:Ue}),Ge]});let We=null;de&&(We=(0,R.jsx)(f.default,{data:Fe,rotation:xe().rotation,cropOrigin:xe().cropOrigin,cropSize:xe().cropSize,onCropChange:Ae,containerSize:ne,keepRatio:e.sendAsSticker,sendAsSticker:e.sendAsSticker}));const ze=de||le||ce||fe||me||Boolean(e.draftTextLayer)||Boolean(xe().selectedLayer);return(0,R.jsxs)("div",{className:x.default.container,children:[(0,R.jsxs)(p.FlexRow,{className:x.default.header,ref:X,children:[e.onClose?(0,R.jsx)("div",{onClick:e.onClose,className:x.default.closeButton,children:(0,R.jsx)(b.default,{name:"x"})}):(0,R.jsx)("div",{className:x.default.closeButtonPlaceholder}),(0,R.jsx)(S.default,{selectedLayer:Be,inPaintMode:le,inCropRotateMode:de,inTextEditingMode:Boolean(e.draftTextLayer),inOutlineMode:ce,canUndo:e.canUndo,canRedo:e.canRedo,onPaintSelect:()=>{ve(),z()},onCropRotateSelect:()=>{_e()},onOutlineSelect:()=>{ye(),K()},onTextSelect:e.onTextSelect,onEmojiSelect:e.onEmojiSelect,onStickerSelect:e.onStickerSelect,onToggleEmojiPanel:e=>{pe(e)},onToggleStickerPanel:e=>{ge(e)},onUndo:e.onUndo,onRedo:e.onRedo,showOutline:e.sendAsSticker}),(0,R.jsx)(p.FlexRow,{className:x.default.headerRight,justify:"end",children:ze&&(0,R.jsx)(l.default,{onClick:Pe,children:_.default.t(775)})})]}),(0,R.jsxs)("div",{ref:Q,className:(0,i.default)(x.default.canvasContainer,{[x.default.cropRotateContainer]:de}),children:[(0,R.jsx)("div",{className:x.default.canvas,style:{display:de?"none":"unset"},children:(0,R.jsx)(o.default,{ref:J,data:Fe,inPaintMode:le,inOutlineMode:ce,paintColor:a,paintThickness:n,outlineSmoothing:F,currentlyEditingTextLayer:e.currentlyEditingTextLayer,draftTextLayer:e.draftTextLayer,scale:Re(),onLayerSelect:e.onLayerSelect,onLayerUnselect:e.onLayerUnselect,onLayerTranslate:e.onLayerTranslate,onLayerTransform:e.onLayerTransform,onTextEditingStart:e=>{se(!0),U(e)},onTextEditingEnd:(e,t)=>{se(!1),H(e,t)},onTextInputOutsideClick:e=>{var t,a;const n=e.target;return!(n instanceof HTMLElement&&n.closest(`.${x.default.footer}`)&&n!==Z.current||(null===(t=$.current)||void 0===t?void 0:t.isPanelVisible())||(null===(a=ee.current)||void 0===a?void 0:a.isMenuVisible()))},onPaintDrawEnd:e.onPaintDrawEnd,onOutlineDrawEnd:e.onOutlineDrawEnd,onOutlineDone:Pe,canEditBackground:e.sendAsSticker,outlineEnabled:e.sendAsSticker})}),We]}),Ve]})}));t.ImageBody=F},14500:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(48926)),s=a(50796),l=i(a(45095)),o=i(a(52013)),d=i(a(94184)),u=i(a(48360)),c=a(67294),h=a(80666),f=i(a(37793)),p=a(88102),m=a(92320),g=i(a(69618)),v=i(a(65273)),x=i(a(56792)),C=a(44365),_=i(a(63727)),S=i(a(60453)),y=i(a(69637)),j=a(70449),E=a(60769),T=n(a(64103)),I=i(a(50580)),b=a(1063),w=a(29623),k=a(39581),P=a(55414),M=a(6327),L=a(39989),A=i(a(44532)),O=i(a(43725)),D=a(84387),R=a(84866),N=i(a(11339)),F=a(43257),B=i(a(87618)),U=i(a(16186)),H=i(a(25324)),G=a(64551),V=a(11054),W=i(a(38932)),z=i(a(23217)),q=a(81829),K=a(54274),Y=a(50452),Q=i(a(90012)),X=i(a(65235)),Z=i(a(36123)),J=a(85893);const{IMAGE:$,VIDEO:ee,AUDIO:te,STICKER:ae}=g.default.MSG_TYPE,ne=3*q.DEFAULT_FONT_SIZE;class ie extends c.Component{constructor(e){var t,a;super(e),t=this,this._setRefCanvasContainer=e=>{this._refCanvasContainer=e},this._setRefCanvas=e=>{this._refCanvas=e},this._setRefImageBody=e=>{this._refImageBody=e},this._setRefFileInput=e=>{this._refFileInput=e},this._setRefCaptionInput=e=>{this.props.mediaCollection.getActive()&&!e||(this._refCaptionInput=e)},this._setRefSendButton=e=>{this._refSendButton=e},this._mediaThumbRefMap=new Map,this._setRefMediaThumb=(e,t)=>{this._mediaThumbRefMap.set(e,t)},this._captionInputRefMap=new Map,this._setRefCaptionInput=(e,t)=>{this.props.mediaCollection.getActive()&&!t||this._captionInputRefMap.set(e,t)},this._setRefHotKeys=e=>{this._refHotKeys=e},this._update=(e,t)=>{if(e===this._getData())return;const a=this.state.activeMedia;var n,i,r;a&&(a.updateMediaEditorData(e,{undoable:null!==(n=null==t?void 0:t.undoable)&&void 0!==n&&n,lastAction:null!==(i=null==t?void 0:t.lastAction)&&void 0!==i?i:null}),this._updateUndoRedoState());(null==t?void 0:t.updatePreview)&&(null===(r=this._refImageBody)||void 0===r||r.updatePreview());__LOG__(2)`MediaEditor: Updated MediaEditorData`},this._getData=()=>{const{activeMedia:e}=this.state;return null==e?v.default.create():e.mediaEditorData},this._getBackground=()=>{var e;return null===(e=this._refImageBody)||void 0===e?void 0:e.getBackground()},this._handleUndo=()=>{const{activeMedia:e}=this.state;if(e&&e.canUndoMediaEditorData()){var t,a;const n=e.lastMediaEditorAction;e.undoMediaEditorData();const i=e.lastMediaEditorAction;this._updateUndoRedoState(),null===(t=this._refImageBody)||void 0===t||t.updatePreview(),null===(a=this._refImageBody)||void 0===a||a.undoAction(n,i)}},this._handleRedo=()=>{const{activeMedia:e}=this.state;if(e&&e.canRedoMediaEditorData()){var t,a;const n=e.lastMediaEditorAction;e.redoMediaEditorData();const i=e.lastMediaEditorAction;this._updateUndoRedoState(),null===(t=this._refImageBody)||void 0===t||t.updatePreview(),null===(a=this._refImageBody)||void 0===a||a.redoAction(i,n)}},this._updateUndoRedoState=()=>{this.setState((e=>{var t,a,n,i;const r=null!==(t=null===(a=this.state.activeMedia)||void 0===a?void 0:a.canUndoMediaEditorData())&&void 0!==t&&t,s=null!==(n=null===(i=this.state.activeMedia)||void 0===i?void 0:i.canRedoMediaEditorData())&&void 0!==n&&n;return e.canUndo!==r||e.canRedo!==s?{canUndo:r,canRedo:s}:null}))},this._addImageLayer=(e,t,a,n,i)=>{const r=(0,l.default)(this._refImageBody,"this._refImageBody").getCanvasScale(),s=t.width*r,o=t.width*r,d=Math.min(i/s,i/o),u=this._getData().addImageLayerToCenter({type:e,image:t,editable:!0,scale:d});this._update(u,{updatePreview:!0,undoable:!0})},this._handleEmojiSelect=function(){var e=(0,r.default)((function*(e){try{const a=j.EmojiUtil.getGlyphId(e);if(null==a)return;const n=j.EmojiUtil.getGlyphPath(a,"xlarge").high,i=yield se(n),r=t.state.sendAsSticker?128:64;t._addImageLayer(L.ImageLayerType.Emoji,i,i.width,i.height,r),t.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.EMOJI_ADDED}).commit()}catch(e){p.Cmd.openToast((0,J.jsx)(Y.Toast,{msg:O.default.t(776),id:(0,Y.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),this._handleStickerSelect=function(){var e=(0,r.default)((function*(e){try{let a;const n=e.mediaData.fullWidth,i=e.mediaData.fullHeight;if(yield(0,C.detectWebpSupport)()){const t=e.mediaData.filehash,n=R.MediaBlobCache.getOrCreateURL(t);a=yield se(n)}else a=yield function(){return le.apply(this,arguments)}(e.mediaData);t._addImageLayer(L.ImageLayerType.Sticker,a,n,i,128),t.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_ADDED}).commit()}catch(e){p.Cmd.openToast((0,J.jsx)(Y.Toast,{msg:O.default.t(776),id:(0,Y.genId)()}))}}));return function(){return e.apply(this,arguments)}}(),this._handlePaintSelect=()=>{const e=this._getData().clearSelectedLayer();this._update(e)},this._handleOutlineSelect=()=>{const e=this._getData().clearSelectedLayer();this._update(e)},this._handleOutlineDone=()=>{const e=this._getBackground(),t=this._getData();if(!e||t.outlineLayer.isEmpty())return;const a=t.cropCenter,{width:n,height:i}=e,r=new U.default({x:a.x-n/2,y:a.y-i/2}),s=-t.rotation,l=Math.max(n,i),o=t.cropSize.dimension*((g.default.STICKER_DIMENSION-2*g.default.STICKER_PADDING)/g.default.STICKER_DIMENSION),d=t.updateBackground(e,r,s,o/l).clearOutlinePaths();this._update(d,{undoable:!0,updatePreview:!0,lastAction:h.MediaEditorAction.OutlineDone}),this.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_OUTLINED}).commit()},this._handleOutlineReset=()=>{const e=this._getData().clearOutlinePaths();this._update(e,{undoable:!0,updatePreview:!0})},this._handleCropRotateCanvas=(e,t,a)=>{const n=this._getData().setRotation(e).setCrop(t,a);this._update(n,{undoable:!0,updatePreview:!0,lastAction:h.MediaEditorAction.CropRotateCanvas}),this.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_CROPPED}).commit()},this._handlePaintColorSelect=e=>{this.setState({paintColor:e})},this._handlePaintThicknessSelect=e=>{this.setState({paintThickness:e})},this._handleOutlineSmoothingToggle=e=>{this.setState({outlineSmoothing:e})},this._handleTextSelect=()=>{if(this.state.currentlyEditingTextLayer)return;this._handleLayerUnselect();let e=1.2/(0,l.default)(this._refImageBody,"this._refImageBody").getCanvasScale();if(this.state.sendAsSticker){const t=this._getData().cropSize.dimension;e=ne*t/g.default.STICKER_DIMENSION/q.DEFAULT_FONT_SIZE}const t={origin:this._getData().cropCenter,text:"",textColor:this.state.textColor,textBackground:this.state.textBackground,alignment:this.state.alignment,font:this.state.font,scale:e},a=this._getData().addTextLayer(t),n=(0,l.default)(a.lastTextLayer,"data.lastTextLayer");this.setState({draftTextLayer:n,currentlyEditingTextLayer:null})},this._handleFontSelect=e=>{this.setState({font:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:a}=this.state;if(a)this.setState({draftTextLayer:a.setFont(e)});else if(t&&t instanceof q.TextLayer){const a=this._getData().setFont(t,e);this._update(a,{updatePreview:!0,undoable:!0})}},this._handleAlignmentSelect=e=>{this.setState({alignment:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:a}=this.state;if(a)this.setState({draftTextLayer:a.setAlignment(e)});else if(t&&t instanceof q.TextLayer){const a=this._getData().setAlignment(t,e);this._update(a,{updatePreview:!0,undoable:!0})}},this._handleTextColorSelect=e=>{this.setState({textColor:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:a}=this.state;if(a)this.setState({draftTextLayer:a.setTextColor(e)});else if(t&&t instanceof q.TextLayer){const a=this._getData().setTextColor(t,e);this._update(a,{updatePreview:!0,undoable:!0})}},this._handleTextBackgroundToggle=()=>{const e=!this.state.textBackground;this.setState({textBackground:e});const{selectedLayer:t}=this._getData(),{draftTextLayer:a}=this.state;if(a)this.setState({draftTextLayer:a.setTextBackground(e)});else if(t&&t instanceof q.TextLayer){const a=this._getData().setTextBackground(t,e);this._update(a,{updatePreview:!0,undoable:!0})}},this._handleTextEditingStart=e=>{this.setState({draftTextLayer:e,currentlyEditingTextLayer:e})},this._handleTextEditingEnd=(e,t)=>{var a;if(t){let e=this._getData();const a=(0,l.default)(this.state.draftTextLayer,"this.state.draftTextLayer").setText(t);this.state.currentlyEditingTextLayer?e=e.updateLayer((0,l.default)(this.state.currentlyEditingTextLayer,"this.state.currentlyEditingTextLayer"),a):(e=e.addTextLayer(a),this.state.sendAsSticker&&new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.TEXT_ADDED}).commit()),this._update(e,{updatePreview:!0,undoable:!0})}else{const{currentlyEditingTextLayer:t}=this.state;t&&this._update(this._getData().deleteLayer(t),{updatePreview:!0,undoable:Boolean(e.text)})}setTimeout((()=>{this.setState({draftTextLayer:null,currentlyEditingTextLayer:null})}),0),null===(a=this._refHotKeys)||void 0===a||a.focus()},this._handlePaintDrawEnd=e=>{this._update(this._getData().addPaintPath(e),{undoable:!0,updatePreview:!0})},this._handleOutlineDrawEnd=e=>{this._update(this._getData().addOutlinePath(e),{undoable:!0,updatePreview:!0,lastAction:h.MediaEditorAction.Outline})},this._handleLayerUnselect=()=>{this._update(this._getData().clearSelectedLayer())},this._handleLayerSelect=e=>{if(!e.editable)return;const t=this._getData().setSelectedLayer(e);this._update(t),e instanceof q.TextLayer&&this.setState({textColor:e.textColor,textBackground:e.textBackground,font:e.font})},this._handleLayerTranslate=(e,t)=>{e instanceof L.ImageLayer&&e.isBackground()?this._update(this._getData().translateBackground(t),{updatePreview:!0,undoable:!0}):this._update(this._getData().translateLayer(e,t),{updatePreview:!0,undoable:!0})},this._handleLayerTransform=(e,t,a)=>{e instanceof L.ImageLayer&&e.isBackground()?this._update(this._getData().transformBackground(t,a),{updatePreview:!0,undoable:!0}):this._update(this._getData().transformLayer(e,t,a),{updatePreview:!0,undoable:!0})},this._handleLayerDelete=e=>{const t=this._getData().deleteLayer(e);this._update(t,{updatePreview:!0,undoable:!0})},this._handleMediaProcessUpdate=()=>{const{mediaCollection:e}=this.props;if(!e.canSend())return;const{errorMsgs:t}=e.uiProcessMsgs();t&&(p.Cmd.openToast((0,J.jsx)(Y.Toast,{msg:t,id:(0,Y.genId)()})),0===e.getPreviewableMedias().length&&this.props.onClose()),this.forceUpdate()},this._handleDrop=e=>{this.state.viewOnce||this.state.sendAsSticker||this._handleFilePick(e)},this._handleDragChange=(e,t)=>{this.state.viewOnce||this.state.sendAsSticker||(this.setState({isDragging:e}),e||t||this.props.mediaCollection.length||this.props.onClose())},this._handleCaptionChange=e=>{const{activeMedia:t,isInitCaptionUsed:a}=this.state;if(!t)return;const n=this.props.mediaCollection.indexOf(t);t.updateCaption(e),0===n&&""===e&&a&&this.setState({isInitCaptionUsed:!1})},this._handlePaste=e=>{e.preventDefault(),e.stopPropagation();const t=new x.default(e.clipboardData);t.hasFiles()&&this._handleFiles(t)},this._handleFiles=e=>{const t=e.getFiles().filter((e=>{const t=(0,b.typeFromMimetype)(e.type);return"image"===t||"video"===t})).map((e=>({file:e})));this.props.mediaCollection.processAttachments(t,N.default.MEDIA_PICKER_ORIGIN_TYPE.PASTE)},this._handleAddFileClick=()=>{if(this._refFileInput){this._refFileInput.click()}},this._handleFilePick=e=>{const t=this.props.getUnmountSignal();(0,E.getFiles)(e).then((a=>{if(t.aborted)return;let n;return e.shiftKey&&e.altKey&&1===a.length&&(this.setState({sendAsSticker:!0,paintThickness:K.THICKNESS.XLARGE}),n=!0),this.props.mediaCollection.processAttachments(a.map((e=>({file:e,stickerMaker:n}))),N.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY)})).catch((0,s.filteredCatch)(T.MediaDragDropError,(e=>{this.props.mediaCollection.length||this.props.onDropText(e.src)}))),e.target.value&&(e.target.value="")},this._handleEnter=e=>{var t;if(!this.state.activeMedia)return;if(e.repeat)return;if(e.shiftKey)return;if(this.state.draftTextLayer)return;const{selectedLayer:a}=this._getData();if(a instanceof q.TextLayer)return e.preventDefault(),e.stopPropagation(),void this._handleTextEditingStart(a);(null===(t=this._refImageBody)||void 0===t?void 0:t.resetUIState())||this._handleSendFromMediaEditor()},this._handleArrowKey=(e,t)=>{var a;if(!this.state.activeMedia||t.repeat||this.state.draftTextLayer)return;const{activeMedia:n}=this.state,i=n&&!n.caption,r=null===(a=this._refCaptionInput)||void 0===a?void 0:a.refInput;(i||r&&!r.isFocused()||r&&r.cursorIsAtStart())&&("left"===e?this._handlePrev():this._handleNext())},this._handlePrev=()=>{this.props.mediaCollection.setPrevAsActive()&&(this._refSendButton&&!this.state.draftTextLayer&&o.default.focus(this._refSendButton),this._scrollIntoView())},this._handleNext=()=>{this.props.mediaCollection.setNextAsActive()&&(this._refSendButton&&!this.state.draftTextLayer&&o.default.focus(this._refSendButton),this._scrollIntoView())},this._scrollIntoView=()=>{const{activeMedia:e}=this.state;if(!e)return;const t=this._mediaThumbRefMap.get(e.id);t&&t.scrollIntoView()},this._handleSelectThumb=e=>{this.props.mediaCollection.setActive(e)},this._handleRemoveThumb=(e,t)=>{t.stopPropagation(),t.preventDefault(),this.props.mediaCollection.remove(e),0===this.props.mediaCollection.getValidMedias().length?this._delayedClose=setTimeout((()=>{this.props.onClose()}),200):this._refSendButton&&o.default.focus(this._refSendButton)},this._handleSendFromMediaEditor=e=>{var t;null==e||e.preventDefault(),null==e||e.stopPropagation();const{mediaCollection:a}=this.props;if(!a.canSend())return;const n=a.getPreviewableMedias();if(0===n.length)return void this.props.onClose();var i;((null===(t=this.state.activeMedia)||void 0===t?void 0:t.mediaEditorData.hasEdits())||this.state.sendAsSticker)&&(null===(i=this._refImageBody)||void 0===i||i.updatePreview({immediately:!0}));const r=new Map,s=[];n.forEach((e=>{const t=e.caption,n=this._captionInputRefMap.get(e.id);if(t&&n){const a=n.serialize(t);r.set(e.id,a)}if(e.editedFile&&(e.mediaEditorData.hasEdits()||this.state.sendAsSticker)){const t=a.replace(e.id,{file:e.editedFile,asSticker:this.state.sendAsSticker});s.push(t)}})),Promise.all(s).then((()=>{const e=a.getPreviewableMedias();if(0===e.length)return;const t=e.map((e=>{var t;let a=e.caption,n=[];const i=r.get(e.id);if(i){const[e,t]=[i[0].trim(),i[1]];e.length&&(a=e,n=t.mentionedJidList||[])}return e.caption=null!==(t=a)&&void 0!==t?t:void 0,{media:e,mentionedJidList:n}}));this.props.onSendMedia(t,{initCaptionUsed:this.state.isInitCaptionUsed,isViewOnce:this._canViewOnce()&&this.state.viewOnce}),this._commitMediaEditorSendMetric(n)}))},this._handleToggleViewOnce=e=>{this.setState({viewOnce:e})},this._handleToggleStickerMaker=()=>{const e=!this.state.sendAsSticker&&this._canSendAsSticker();this.setState({sendAsSticker:e,paintThickness:e?K.THICKNESS.XLARGE:K.THICKNESS.SMALL})},this._canViewOnce=()=>{var e;const{chat:t,mediaCollection:a}=this.props,n=t.contact.isEnterprise;return G.ServerProps.viewOnceWrite&&1===a.length&&!0===(null===(e=a.at(0))||void 0===e?void 0:e.isViewableOnce())&&!n&&!this.props.sendAsSticker},this._canSendAsSticker=()=>{var e;const{mediaCollection:t}=this.props;return 1===t.length&&(null===(e=t.at(0))||void 0===e?void 0:e.type)===$},this._getMediaBody=e=>{let t=null;const{paintColor:a,paintThickness:n,outlineSmoothing:i,canUndo:r,canRedo:s}=this.state,l=G.ServerProps.viewOnceWrite?this.state.viewOnce:null;switch(e.type){case ae:case $:t=(0,J.jsx)(M.ImageBody,{ref:this._setRefImageBody,attachMedia:e,chat:this.props.chat,onCaptionChange:this._handleCaptionChange,onClose:"capture"===this.props.theme?null:this.props.onClose,onEnter:this._handleSendFromMediaEditor,setCaptionInputRef:this._setRefCaptionInput,paintColor:a,paintThickness:n,outlineSmoothing:i,canUndo:r,canRedo:s,currentlyEditingTextLayer:this.state.currentlyEditingTextLayer,draftTextLayer:this.state.draftTextLayer,viewOnce:l,viewOnceDisabled:!this._canViewOnce(),sendAsSticker:this.state.sendAsSticker,onPaintSelect:this._handlePaintSelect,onOutlineSelect:this._handleOutlineSelect,onOutlineDone:this._handleOutlineDone,onOutlineReset:this._handleOutlineReset,onTextSelect:this._handleTextSelect,onTextBackgroundToggle:this._handleTextBackgroundToggle,onEmojiSelect:this._handleEmojiSelect,onStickerSelect:this._handleStickerSelect,onLayerSelect:this._handleLayerSelect,onLayerUnselect:this._handleLayerUnselect,onLayerDelete:this._handleLayerDelete,onLayerTranslate:this._handleLayerTranslate,onLayerTransform:this._handleLayerTransform,onTextEditingStart:this._handleTextEditingStart,onTextEditingEnd:this._handleTextEditingEnd,onTextColorSelect:this._handleTextColorSelect,onFontSelect:this._handleFontSelect,onAlignmentSelect:this._handleAlignmentSelect,onPaintColorSelect:this._handlePaintColorSelect,onPaintThicknessSelect:this._handlePaintThicknessSelect,onOutlineSmoothingToggle:this._handleOutlineSmoothingToggle,onCropRotateCanvas:this._handleCropRotateCanvas,onUndo:this._handleUndo,onRedo:this._handleRedo,onPaintDrawEnd:this._handlePaintDrawEnd,onOutlineDrawEnd:this._handleOutlineDrawEnd,onToggleViewOnce:this._handleToggleViewOnce,onFiles:this._handleFiles},e.mediaEditorData.id);break;case ee:t=(0,J.jsx)(X.default,{attachMedia:e,chat:this.props.chat,viewOnce:l,viewOnceDisabled:!this._canViewOnce(),setCaptionInputRef:this._setRefCaptionInput,onCaptionChange:this._handleCaptionChange,onClose:this.props.onClose,onEnter:this._handleSendFromMediaEditor,onToggleViewOnce:this._handleToggleViewOnce,onFiles:this._handleFiles},e.id);break;case te:t=(0,J.jsx)(f.default,{item:e,onClose:this.props.onClose},e.id);break;default:t="pdf"===(0,F.previewType)(e.mimetype)?(0,J.jsx)(B.default,{item:e,onClose:this.props.onClose},e.id):(0,J.jsx)(I.default,{mimeType:e.mimetype,filesize:e.filesize,filename:e.filename,fileExt:e.fileExt,onClose:this.props.onClose},e.id)}return t},this.getThumbs=()=>{const{mediaCollection:e}=this.props;return(0,J.jsx)(_.default,{className:A.default.thumbs,mediaCollection:e,onClick:this._handleSelectThumb,onClose:this._handleRemoveThumb,forwardRef:this._setRefMediaThumb})},this.state={paintColor:(0,m.getColorValue)(m.COLORS.BLUE),paintThickness:e.sendAsSticker?K.THICKNESS.XLARGE:K.THICKNESS.SMALL,outlineSmoothing:!0,textColor:(0,m.getColorValue)(m.COLORS.BLACK),font:k.FONTS.SANS_SERIF,textBackground:!0,alignment:k.TextAlignment.CENTER,isDragging:!1,canUndo:!1,canRedo:!1,activeMedia:null,prevActiveMedia:null,isInitCaptionUsed:!1,initCaption:null===(a=this.props.initCaption)||void 0===a?void 0:a.text,currentlyEditingTextLayer:null,draftTextLayer:null,viewOnce:!1,sendAsSticker:e.sendAsSticker}}static getDerivedStateFromProps(e,t){var a,n;const i=e.mediaCollection.getActive(),r=t.initCaption;let s=t.isInitCaptionUsed;return s||t.activeMedia||!r||!i||i.type!==$&&i.type!==ee||(i.caption=r,s=!0),{prevActiveMedia:i,activeMedia:i,canUndo:null!==(a=null==i?void 0:i.canUndoMediaEditorData())&&void 0!==a&&a,canRedo:null!==(n=null==i?void 0:i.canRedoMediaEditorData())&&void 0!==n&&n,isInitCaptionUsed:s}}componentDidMount(){var e;const{mediaCollection:t,listeners:a}=this.props;t.isStickerMaker=this.state.sendAsSticker,a.add(t,"add remove reset",(()=>{this.forceUpdate()})),a.add(t,"active-change change:state change:previewable",this._handleMediaProcessUpdate),a.add(p.Cmd,"toggle_sticker_maker",this._handleToggleStickerMaker),null===(e=this._refHotKeys)||void 0===e||e.focus()}componentDidUpdate(){this.props.mediaCollection.isStickerMaker=this.state.sendAsSticker}componentWillUnmount(){this._delayedClose&&clearTimeout(this._delayedClose)}handleRequestDismiss(){var e;return!(null===(e=this._refImageBody)||void 0===e?void 0:e.resetUIState())&&(!this.state.draftTextLayer||(this.setState({currentlyEditingTextLayer:null,draftTextLayer:null}),!1))}_commitMediaEditorSendMetric(e){if(this.state.sendAsSticker)return new N.default.StickerSend({stickerSendOrigin:N.default.STICKER_SEND_ORIGIN_TYPE.STICKER_MAKER,stickerIsAnimated:!1,stickerIsFirstParty:!1,stickerIsFromStickerMaker:!0}).commit(),void new N.default.WebcStickerMakerEvents({stickerMakerEventName:N.default.WEBC_STICKER_MAKER_EVENT_NAME_TYPE.SEND_STICKER}).commit();let t=0,a=0,n=0,i=0,r=0,s=0;e.forEach((e=>{const l=e.mediaEditorData;e.type===$&&(t++,l.hasEdits()&&a++,l.paintLayer.paths.length>0&&n++),l.layers.forEach((e=>{e instanceof L.ImageLayer?(e.isEmoji()&&i++,e.isSticker()&&r++):e instanceof q.TextLayer&&s++}))})),new N.default.WebcMediaEditorSend({imageCount:t,editedImageCount:a,paintedImageCount:n,emojiLayerCount:i,stickerLayerCount:r,textLayerCount:s}).commit()}render(){const{mediaCollection:e}=this.props,{activeMedia:t}=this.state;let a,n=e.getPreviewableMedias();n.length>g.default.MAX_FILES&&(n=n.slice(0,g.default.MAX_FILES)),e.canSend()?t&&(a=this._getMediaBody(t)):a=(0,J.jsx)("div",{className:A.default.spinner,children:(0,J.jsx)(V.Spinner,{color:"highlight"},"processing")});const i=this.state.isDragging?(0,J.jsx)("div",{className:A.default.dropOverlay,children:(0,J.jsx)("div",{className:A.default.dropOverlayOutline,children:u.default._("Drag file here",null,{hk:"y9aHs"})})},"container"):null,r={enter:this._handleEnter,left:e=>this._handleArrowKey("left",e),right:e=>this._handleArrowKey("right",e)},s="*"===F.DOC_MIMES?"*":[g.default.IMAGE_MIMES].join();let l;if(null!=a){let t;if(n.length>0&&(t=(0,J.jsx)("div",{className:A.default.sendButton,tabIndex:"-1",ref:this._setRefSendButton,onKeyPress:e=>e.preventDefault(),children:(0,J.jsx)(H.default,{ariaLabel:u.default._("Send",null,{hk:"2JJUaP"}),large:!0,icon:(0,J.jsx)(z.default,{name:"send",directional:!0}),count:1===n.length?null:n.length,onClick:this._handleSendFromMediaEditor,disabled:!e.canSend()})})),"capture"===this.props.theme)l=(0,J.jsx)("div",{className:A.default.captureFooter,children:t});else{const e=!this.state.viewOnce&&!this.state.sendAsSticker&&n.length<g.default.MAX_FILES,a="add-alt",i=this.state.sendAsSticker?null:(0,J.jsx)(W.default,{className:(0,d.default)(A.default.addMediaButton,{[A.default.addMediaButtonDisabled]:!e}),disabled:!e,name:a,title:u.default._("Add file",null,{hk:"4Gvj3D"}),onClick:this._handleAddFileClick,"aria-label":u.default._("Add file",null,{hk:"4Gvj3D"})},"media-more");let r;n.length>0&&(r=(0,J.jsxs)(w.FlexRow,{className:A.default.filmstripContainer,justify:"center",align:"start",children:[this.getThumbs(),i]})),l=(0,J.jsxs)("div",{className:A.default.footer,children:[r,t]})}}const o=(0,d.default)(A.default.container,{[A.default.previewOnly]:t&&t.type!==$});let c=(0,J.jsxs)(w.FlexColumn,{className:o,align:"stretch",children:[i,a,l,(0,J.jsx)("input",{ref:this._setRefFileInput,type:"file",accept:s,style:{display:"none"},onChange:this._handleFilePick,multiple:!0})]});return"attach"===this.props.theme&&(c=(0,J.jsx)(S.default,{theme:"media",onDrop:this._handleDrop,onDragChange:this._handleDragChange,children:(0,J.jsx)(y.default,{tabIndex:"-1",overflow:"hidden",onPaste:this._handlePaste,children:c})},"attach-image-modal")),(0,J.jsx)(P.HotKeys,{handlers:r,onRef:this._setRefHotKeys,children:c})}}ie.defaultProps={onClose:()=>{},theme:"attach",sendAsSticker:!1},ie.displayName="MediaEditor";const re=(0,Q.default)((0,D.ListenerHOC)(ie));function se(e){return new Promise(((t,a)=>{const n=new Image;n.onload=()=>{t(n)},n.onerror=a,n.src=e}))}function le(){return(le=(0,r.default)((function*(e){let t=e.rgbaBuffer;if(!t){const a=R.MediaBlobCache.get(e.filehash);if(!a)throw new Error("Failed to get media blob");const n=yield(0,b.blobToArrayBuffer)(a),i=(yield(0,Z.default)(n)).frames[0];if(!i)throw new Error("Failed to get sticker first frame.");t=i.rgbaBuffer}const a=e.fullWidth,n=e.fullHeight,i=document.createElement("canvas");i.width=a,i.height=n;const r=i.getContext("2d"),s=r.createImageData(a,n);return s.data.set(new Uint8Array(t)),r.putImageData(s,0,0),i}))).apply(this,arguments)}t.default=class extends re{handleRequestDismiss(){return this.getComponent().handleRequestDismiss()}}},37793:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClose:t,item:a}=e;const{mimetype:n,fullPreview:o}=a;return(0,l.jsxs)("div",{className:s.default.container,children:[(0,l.jsx)(r.default,{onClose:t}),(0,l.jsx)(i.default,{mimeType:n,url:o})]})};var i=n(a(74252)),r=n(a(21454)),s=n(a(81419)),l=a(85893)},13057:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{data:t,rotation:a,cropOrigin:n,cropSize:g,containerSize:v,keepRatio:x,onCropChange:C,sendAsSticker:_}=e;const S=t.resetCropRotate().setRotation(a),y=(0,i.useRef)(),j=(0,i.useRef)(),{width:E,height:T}=g,{x:I,y:b}=n,w=(0,i.useRef)(g),k=E/w.current.width,P=T/w.current.height,M=t.width,L=t.height,{width:A,height:O}=p(M,L,a),D=new d.default({width:v.width-20,height:v.height-20}),R=(0,u.calculateContainScale)(a%180?L:M,a%180?M:L,D,h),N=f/R,F=new d.default({width:M+2*N,height:L+2*N}),{width:B,height:U}=p(F.width,F.height,a),H=F.width/2,G=F.height/2;(0,i.useEffect)((()=>{const e=y.current,t=j.current;var a;e&&t&&0===e.nodes().length&&(e.nodes([t]),null===(a=t.getLayer())||void 0===a||a.batchDraw())}));const V=e=>{const{target:t}=e,a=Math.round(t.x()),n=Math.round(t.y()),i=Math.min(Math.round(t.width()*t.scaleX()),M-a),r=Math.min(Math.round(t.height()*t.scaleY()),L-n);C(new l.default({x:a,y:n}),new d.default({width:i,height:r}))},W=["top-left","top-right","bottom-left","bottom-right"];x||W.push("top-center","middle-right","middle-left","bottom-center");return(0,c.jsxs)("div",{className:s.default.container,children:[(0,c.jsx)(r.default,{data:S,scale:R,canEditLayer:!1,style:{padding:f},outlineEnabled:_}),(0,c.jsx)(o.Stage,{className:s.default.cropperContainer,width:Math.round(B*R),height:Math.round(U*R),scaleX:R,scaleY:R,children:(0,c.jsx)(o.Layer,{rotation:a,offsetX:H,offsetY:G,x:B/2,y:U/2,children:(0,c.jsxs)(o.Group,{x:N,y:N,children:[(0,c.jsx)(o.Rect,{x:0,y:0,width:M,height:L,fill:"black",opacity:.6}),(0,c.jsx)(o.Rect,{ref:j,fill:"red",x:I,y:b,width:w.current.width,height:w.current.height,scaleX:k,scaleY:P,draggable:!0,dragBoundFunc:e=>{const{width:t,height:n}=p(E,T,a);let{x:i,y:r}=function(e,t,a,n,i){switch((i%360+360)%360){case 0:return{x:e,y:t};case 90:return{x:e-a,y:t};case 180:return{y:t-n,x:e-a};case 270:return{x:e,y:t-n};default:throw new Error("Unsupported angle")}}(e.x,e.y,t*R,n*R,a);i<f?i=f:(i-f)/R+t>A&&(i=Math.round(A-t+N)*R),r<f?r=f:(r-f)/R+n>O&&(r=Math.round(O-n+N)*R);return function(e,t,a,n,i){switch((i%360+360)%360){case 0:return{x:e,y:t};case 90:return{x:e+a,y:t};case 180:return{y:t+n,x:e+a};case 270:return{x:e,y:t+n};default:throw new Error("Unsupported angle")}}(i,r,t*R,n*R,a)},onTransformEnd:V,onDragEnd:V,globalCompositeOperation:"destination-out"}),(0,c.jsx)(o.Transformer,{ref:y,anchorStroke:"blue",anchorFill:"white",anchorSize:10,anchorCornerRadius:5,borderEnabled:!1,centeredScaling:!1,resizeEnabled:!0,rotateEnabled:!1,ignoreStroke:!0,boundBoxFunc:(e,t)=>{const n=M*R+20,i=L*R+20,r=m(e,n,i,a,-a),s=m(t,n,i,a,-a);return Math.round(s.x)<f?(s.x=f,s.width=r.width+(r.x-f)):Math.round(s.width)<20?(s.x=r.x,s.width=r.width):Math.round(s.x+s.width)>Math.round(n)-f&&(s.width=n-s.x-f),Math.round(s.y)<f?(s.y=f,s.height=r.height+(r.y-f)):Math.round(s.height)<20?(s.y=r.y,s.height=r.height):Math.round(s.y+s.height)>Math.round(i)-f&&(s.height=i-s.y-f),m(s,n,i,0,a)},keepRatio:x,enabledAnchors:W},"transformer")]})},"cropper")})]})};var i=a(67294),r=n(a(35344)),s=n(a(70905)),l=n(a(16186)),o=a(99282),d=n(a(46668)),u=a(79230),c=a(85893);const h=new d.default({width:200,height:200}),f=10;function p(e,t,a){return{width:a%180==0?e:t,height:a%180==0?t:e}}function m(e,t,a,n,i){const r=Math.max(t,a),s=p(t,a,n),o=(r-s.width)/2,d=(r-s.height)/2,u=new l.default({x:e.x+o,y:e.y+d}),c=new l.default({x:r/2,y:r/2}),h=u.rotate(c,i),f=p(t,a,n+i),m=(r-f.width)/2,g=(r-f.height)/2;return{x:h.x-m,y:h.y-g,width:e.width,height:e.height,rotation:e.rotation}}},50580:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{onClose:a,filename:n,filesize:h,fileExt:f,mimeType:p}=e;const m=null!=h?o.default.filesize(h):"",g=null!==(t=c.get(p))&&void 0!==t?t:"preview-generic";return(0,u.jsxs)("div",{className:l.default.container,children:[(0,u.jsx)(s.default,{onClose:a,filename:n}),(0,u.jsx)(r.FlexColumn,{className:i.default.body,align:"center",justify:"center",children:(0,u.jsxs)(r.FlexColumn,{className:i.default.previewContainer,align:"center",justify:"center",children:[(0,u.jsx)("div",{className:i.default.previewIcon,children:(0,u.jsx)(d.default,{name:g})}),(0,u.jsx)("div",{className:i.default.header,children:o.default.t(782)}),(0,u.jsxs)("div",{className:i.default.metadata,children:[m,null!=f&&""!==f?` - ${f.toUpperCase()}`:null]})]})})]})};var i=n(a(2482)),r=a(29623),s=n(a(21454)),l=n(a(81419)),o=n(a(43725)),d=n(a(23217)),u=a(85893);const c=new Map([["text/plain","preview-txt"],["text/rtf","preview-doc"],["application/msword","preview-doc"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","preview-doc"],["text/csv","preview-sheet"],["application/vnd.ms-excel","preview-sheet"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","preview-sheet"],["application/vnd.ms-powerpoint","preview-slides"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","preview-slides"],["audio/aac","preview-audio"],["audio/mp4","preview-audio"],["audio/amr","preview-audio"],["audio/mpeg","preview-audio"],["audio/ogg; codecs=opus","preview-audio"],["audio/wav","preview-audio"],["application/zip","preview-compressed"]])},21454:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{filename:t,pageCount:a}=e;let n=null;null!=a&&a>0&&(n=s.default.t(156,{count:a,_plural:a}));return(0,o.jsxs)("div",{className:(0,r.default)(d),children:[(0,o.jsx)("button",{"aria-label":i.default._("Close",null,{hk:"17RE2w"}),onClick:e.onClose,className:(0,r.default)(f),children:(0,o.jsx)(l.default,{"aria-hidden":!0,color:"secondary",name:"x"})}),(0,o.jsxs)("div",{className:(0,r.default)(u),children:[t&&(0,o.jsx)("span",{className:(0,r.default)(c),children:t}),null!=n&&(0,o.jsx)("span",{className:(0,r.default)(h),children:n})]})]})};var i=n(a(48360)),r=n(a(56720)),s=n(a(43725)),l=n(a(23217)),o=a(85893);const d={display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"o4u7okr9",minHeight:"cl7oiv0o",paddingTop:"fbgy3m38",paddingEnd:"l9g3jx6n",paddingBottom:"oq31bsqd",paddingStart:"lyvj5e2u",backgroundColor:"ej3x2ktq"},u={display:"p357zi0d",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"rjo8vgbg",flexDirection:"f8m0rgwh",alignItems:"gndfcl4n"},c={fontSize:"f8jlpxt4",color:"tl2vja3b"},h={marginTop:"hymafltn",fontSize:"dsh4tgtl",color:"pm5hny62"},f={cursor:"ajgl1lbb"}},87618:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{onClose:t,item:a}=e;const{mimetype:n,fullPreview:d,fullPreviewSize:u,documentPageCount:c,filename:h}=a;if(!(d&&u&&null!=c&&c>0))return(0,o.jsx)(r.default,{mimeType:a.mimetype,filesize:a.filesize,filename:a.filename,fileExt:a.fileExt,onClose:t});return(0,o.jsxs)("div",{className:l.default.container,children:[(0,o.jsx)(s.default,{onClose:t,filename:h,pageCount:c}),(0,o.jsx)(i.default,{fullPreview:d,fullPreviewSize:u,pageCount:c,showPageCount:!1,showBorder:!0,mimeType:n,filename:h})]})};var i=n(a(35137)),r=n(a(50580)),s=n(a(21454)),l=n(a(81419)),o=a(85893)},65235:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{attachMedia:t,onClose:a,chat:n,viewOnce:i,viewOnceDisabled:f,onCaptionChange:p,onEnter:m,setCaptionInputRef:g,onToggleViewOnce:v,onFiles:x}=e;const{caption:C}=(0,d.useModelValues)(t,["caption"]);return(0,c.jsxs)("div",{className:u.default.container,children:[(0,c.jsx)(l.default,{onClose:a}),(0,c.jsx)(r.default,{mimeType:t.mimetype,url:t.fullPreview,isGif:t.isGif,size:t.fullPreviewSize,processing:t.state===h,preview:t.preview}),(0,c.jsx)("div",{className:u.default.footer,children:(0,c.jsx)(s.default,{chat:n,caption:C,viewOnce:i,viewOnceDisabled:f,msgType:o.TYPE.VIDEO,theme:"video",onToggleViewOnce:v,onChange:p,onEnter:m,onFiles:x,setCaptionInputRef:e=>{g(t.id,e)}},t.id)})]})};var i=a(80666),r=n(a(84124)),s=n(a(69613)),l=n(a(21454)),o=a(17304),d=a(49082),u=n(a(56690)),c=a(85893);const{PROCESSING:h}=i.ATTACH_MEDIA_STATE},88262:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{children:t,onClick:a,icon:n,caret:d,disabled:u,title:c,selected:h}=e;let f,p;if("string"==typeof n)switch(n){case"sans-serif":f=(0,o.jsx)(l.default,{name:"panel-emoji-flags",display:"inline"});break;case"checked":f=(0,o.jsx)(l.default,{name:"checkmark",display:"inline"});break;case"unchecked":f=(0,o.jsx)(l.default,{name:"x",display:"inline"});break;default:n&&(f=(0,o.jsx)(l.default,{name:n,display:"inline"}))}else n&&(f=n);if(d)switch(d){case"up":p=(0,o.jsx)(l.default,{name:"chevron-down-alt",display:"inline",className:r.default.rotate});break;case"down":p=(0,o.jsx)(l.default,{name:"chevron-down-alt",display:"inline"})}return(0,o.jsxs)("div",{role:"button",tabIndex:"-1",onClick:a,className:(0,i.default)(r.default.container,e.className,{[r.default.disabled]:u,[r.default.selected]:h}),title:c,children:[f&&(0,o.jsx)(s.FlexRow,{align:"center",justify:"center",className:r.default.icon,children:f}),t&&(0,o.jsx)("span",{className:r.default.body,children:t}),p&&(0,o.jsx)("span",{className:r.default.caret,children:p})]})};var i=n(a(94184)),r=n(a(37513)),s=a(29623),l=n(a(23217)),o=a(85893)},66430:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(88262)),s=n(a(78055)),l=n(a(31488)),o=n(a(29598)),d=a(60811),u=a(29623),c=n(a(43725)),h=a(18644),f=n(a(24717)),p=a(85893);function m(e,t){const{colors:a,onColorSelect:n,selectedColor:m}=e,[g,v]=(0,i.useState)(null),x=()=>{v(null)},C=()=>Boolean(g);(0,i.useImperativeHandle)(t,(()=>({isPanelVisible:C})));const _=a.map((e=>{let{primaryColor:t,secondaryColor:a}=e;return(0,p.jsx)(l.default,{primaryColor:t,onSelect:()=>n(t),selected:Boolean(m&&m.equals(t))},t.toString())}));let S=null;return g&&(S=(0,p.jsx)(h.UIE,{displayName:"ColorPicker",escapable:!0,popable:!0,requestDismiss:x,children:(0,p.jsx)(f.default,{contextMenu:g})})),(0,p.jsxs)("div",{className:s.default.container,children:[(0,p.jsx)(u.FlexRow,{className:s.default.colorChipsContainer,children:_}),(0,p.jsx)(r.default,{onClick:e=>{e.preventDefault(),e.stopPropagation();const t={menu:(0,p.jsx)(o.default,{onColorSelect:n,selectedColor:m,onColorPickerClose:x}),dirX:c.default.isRTL()?d.DirX.RIGHT:d.DirX.LEFT,dirY:d.DirY.BOTTOM,type:"color_picker",anchor:e.target};v(t)},caret:g?"down":"up"}),S]})}var g=(0,i.forwardRef)(m);t.default=g},31488:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{primaryColor:t,secondaryColor:a,onSelect:n,selected:o,withBorder:d}=e,[u,c]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);return(0,l.jsx)("div",{onClick:n,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onMouseDown:()=>{f(!0)},onMouseUp:()=>{f(!1)},className:(0,i.default)(s.default.colorButton,{[s.default.selected]:o,[s.default.hover]:u,[s.default.active]:h}),style:{backgroundColor:h&&!o?t.withAlpha(.2).toRgbaString():"transparent"},children:(0,l.jsx)("div",{className:(0,i.default)(s.default.primaryColorChip,{[s.default.colorChipWithBorder]:d&&t.isWhite(),[s.default.primaryColorChipMedium]:"medium"===e.theme}),style:{backgroundColor:t.toRgbaString()},children:a&&o&&(0,l.jsx)("div",{className:s.default.secondaryColorChip,style:{backgroundColor:a.toRgbaString()}})})})};var i=n(a(94184)),r=a(67294),s=n(a(89471)),l=a(85893)},60753:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=a(16241),s=n(a(31488)),l=n(a(95698)),o=a(98254),d=a(55414),u=a(52596),c=a(85893);class h extends i.Component{constructor(){super(...arguments),this._setRefHexColorInput=e=>this._refHexColorInput=e,this.state={inputColorVal:this.props.color.toHex(),selectedColor:this.props.color},this._handleInputChange=e=>{const t=e.target.value;if(this.setState({inputColorVal:t}),!t||t&&!(0,r.isValidHex)(t))return;const a=r.Color.fromHex(t);this.props.onChangeColor(a)},this._handleEnter=()=>{this.props.onColorPickerClose()}}static getDerivedStateFromProps(e,t){const a={};return e.color!==t.selectedColor&&((0,r.compareHex)(t.inputColorVal,e.color.toHex())||(a.inputColorVal=e.color.toHex()),a.selectedColor=e.color),a}render(){const{color:e}=this.props,{inputColorVal:t}=this.state;return(0,c.jsxs)("div",{className:l.default.container,style:{width:o.CONTAINER_WIDTH,height:o.INPUT_HEIGHT},children:[(0,c.jsx)(s.default,{withBorder:!0,primaryColor:e,selected:!1,theme:"medium"}),(0,c.jsx)(d.HotKeys,{handlers:{enter:this._handleEnter},children:(0,c.jsx)(u.SelectableDiv,{selectable:!0,children:(0,c.jsx)("input",{type:"text",ref:this._setRefHexColorInput,className:l.default.input,value:t,onChange:this._handleInputChange})})})]})}}t.default=h,h.displayName="ColorPickerInput"},26162:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{color:t,onChangeSelectedColor:a,onChangeCanvasColor:n}=e,c=(0,i.useRef)(null),[h,f]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=c.current;if(!e)return;const t=e.getContext("2d");let a=t.createLinearGradient(0,0,e.width,0);a.addColorStop(0,"#ff0000"),a.addColorStop(1/6,"#ffff00"),a.addColorStop(1/6*2,"#00ff00"),a.addColorStop(.5,"#00ffff"),a.addColorStop(1/6*4,"#0000ff"),a.addColorStop(1/6*5,"#ff00ff"),a.addColorStop(1,"#ff0000"),t.fillStyle=a,t.fillRect(0,0,e.width,e.height),a=t.createLinearGradient(0,0,0,e.height),a.addColorStop(0,"rgba(255, 255, 255, 1)"),a.addColorStop(.5,"rgba(255, 255, 255, 0)"),a.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=a,t.fillRect(0,0,e.width,e.height),a=t.createLinearGradient(0,0,0,e.height),a.addColorStop(0,"rgba(0, 0, 0, 0)"),a.addColorStop(.5,"rgba(0, 0, 0, 0)"),a.addColorStop(1,"rgba(0, 0, 0, 1)"),t.fillStyle=a,t.fillRect(0,0,e.width,e.height)}),[]);const p=(0,o.getPositionFromColor)(t),m=(0,d.default)(a,l.THROTTLE_WAIT_TIME),g=(e,t)=>{null!=t&&f(t);const{x:a,y:i}=(e=>{const t=c.current;if(!t)return{x:0,y:0};const a=t.getBoundingClientRect();let n=e.clientX-a.left,i=e.clientY-a.top;return n>a.width&&(n=a.width-.1),n<0&&(n=0),i>a.height&&(i=a.height),i<0&&(i=.1),n-=l.CURSOR_SIZE/2,i-=l.CURSOR_SIZE/2,{x:n,y:i}})(e),s=(e=>{const t=c.current;if(!t)return new r.Color(0,0,0);const a=e.x+l.CURSOR_SIZE/2,n=e.y+l.CURSOR_SIZE/2,i=t.getContext("2d").getImageData(a,n,1,1).data;return new r.Color(i[0],i[1],i[2])})({x:a,y:i});m(s),n(s)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("canvas",{width:l.CONTAINER_WIDTH,height:l.CANVAS_HEIGHT,className:s.default.canvas,ref:c,onMouseDown:e=>{g(e,!0)},onMouseMove:e=>{h&&(e.stopPropagation(),e.preventDefault(),g(e))},onMouseUp:e=>{g(e,!1)}}),(0,u.jsx)("div",{className:s.default.cursor,style:{width:l.CURSOR_SIZE,height:l.CURSOR_SIZE,left:p.x,top:p.y,backgroundColor:t.toRgbaString()}})]})};var i=a(67294),r=a(16241),s=n(a(56347)),l=a(98254),o=a(73473),d=n(a(88857)),u=a(85893)},98254:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THROTTLE_WAIT_TIME=t.INPUT_HEIGHT=t.DEFAULT_COLOR=t.CURSOR_SIZE=t.CONTAINER_WIDTH=t.CONTAINER_HEIGHT=t.CANVAS_HEIGHT=void 0;var n=a(16241);t.CONTAINER_WIDTH=334;t.CONTAINER_HEIGHT=203;const i=150.22;t.CANVAS_HEIGHT=i;t.INPUT_HEIGHT=52.78;t.CURSOR_SIZE=20;const r=new n.Color(210,252,86);t.DEFAULT_COLOR=r;t.THROTTLE_WAIT_TIME=900},29598:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{selectedColor:t,onColorSelect:a}=e,[n,u]=(0,i.useState)(null!=t?t:l.DEFAULT_COLOR),c=e=>{u(e)},h=e=>{a(e)};return(0,d.jsxs)("div",{className:o.default.container,style:{width:l.CONTAINER_WIDTH,height:l.CONTAINER_HEIGHT},children:[(0,d.jsx)(s.default,{color:n,onChangeCanvasColor:c,onChangeSelectedColor:h}),(0,d.jsx)(r.default,{color:n,onChangeColor:e=>{c(e),h(e)},onColorPickerClose:e.onColorPickerClose})]})};var i=a(67294),r=n(a(60753)),s=n(a(26162)),l=a(98254),o=n(a(58510)),d=a(85893)},30383:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CropRotateToolbar=function(e){let{canReset:t,onRotateCanvas:a,onReset:n}=e;return(0,o.jsxs)(s.FlexRow,{className:r.default.container,children:[(0,o.jsx)(i.default,{className:r.default.rotateLeftButton,icon:"media-editor-rotate-left",title:l.default.t(792),onClick:()=>a(-90)}),(0,o.jsx)(i.default,{icon:"media-editor-rotate-right",title:l.default.t(793),onClick:()=>a(90)}),(0,o.jsx)(i.default,{onClick:n,disabled:!t,children:l.default.t(783)})]})};var i=n(a(88262)),r=n(a(57775)),s=a(29623),l=n(a(43725)),o=a(85893)},66747:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Font=void 0;var i=n(a(81109)),r=a(67294),s=n(a(88262)),l=a(29623),o=n(a(50918)),d=n(a(79563)),u=a(39581),c=a(18644),h=n(a(24717)),f=n(a(41956)),p=a(85893);function m(e,t){const{selectedFont:a,fonts:n,onFontSelect:i,onAlignmentSelect:l,selectedAlignment:m}=e,g=(0,r.useRef)(null),[x,C]=(0,r.useState)(null),_=()=>{C(null)},S=()=>Boolean(x);(0,r.useImperativeHandle)(t,(()=>({isMenuVisible:S})));const y=Boolean(x);let j;return x&&(j=(0,p.jsx)(c.UIE,{displayName:"MediaEditorFontDropdown",escapable:!0,popable:!0,requestDismiss:_,children:(0,p.jsx)(h.default,{contextMenu:x})})),(0,p.jsxs)("div",{ref:g,className:o.default.container,children:[(0,p.jsx)(s.default,{onClick:()=>{x||g.current&&C({menu:(0,p.jsx)(d.default,{fonts:n,selectedFont:a,selectedAlignment:m,onFontSelect:i,onAlignmentSelect:l}),anchor:g.current})},icon:(0,p.jsx)(v,{font:a}),selected:y,caret:y?"down":"up",children:(0,p.jsx)("span",{className:o.default.fontLabel,children:(0,u.getFontTranslation)(a)})}),(0,p.jsx)(f.default,{transitionName:"dropdown",children:j})]})}const g=(0,r.forwardRef)(m);function v(e){let{font:t}=e;return(0,p.jsx)(l.FlexRow,{className:o.default.icon,style:(0,i.default)({},(0,u.getFontStyle)(t)),justify:"center",align:"center",children:(0,p.jsx)("div",{"aria-hidden":"true",children:"A"})})}t.Font=g},79563:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onFontSelect:t,onAlignmentSelect:a,selectedFont:n,selectedAlignment:p}=e;(0,r.useEffect)((()=>{d.default.loadAllFonts()}),[]);return(0,h.jsxs)("div",{children:[e.fonts.map((e=>{let a;n===e&&(a=(0,h.jsx)("span",{className:o.default.selected,children:(0,h.jsx)(c.default,{name:"checkmark",display:"inline"})}));const i=(0,u.getFontTranslation)(e);let r;switch(e){case u.FONTS.SANS_SERIF:r=o.default.sansSerif;break;case u.FONTS.SERIF:r=o.default.serif;break;case u.FONTS.NORICAN_REGULAR:r=o.default.noricanRegular;break;case u.FONTS.BRYNDAN_WRITE:r=o.default.bryndanWrite;break;case u.FONTS.OSWALD_HEAVY:r=o.default.oswaldHeavy}return(0,h.jsx)(s.DropdownItem,{action:a=>((e,a)=>{e.stopPropagation(),t(a)})(a,e),children:(0,h.jsxs)("div",{role:"button",className:o.default.item,style:(0,u.getFontStyle)(e),children:[(0,h.jsx)("span",{className:r,children:i}),a]})},e)})),(0,h.jsx)(l.FlexRow,{className:o.default.alignmentContainer,justify:"around",align:"center",children:f.map((e=>{let{alignment:t,icon:n}=e;return(0,h.jsx)(l.FlexItem,{children:(0,h.jsx)(s.DropdownItem,{action:e=>((e,t)=>{e.stopPropagation(),a(t)})(e,t),children:(0,h.jsx)(c.default,{name:n,className:(0,i.default)(o.default.alignmentIcon,{[o.default.alignmentIconSelected]:t===p})})})},n)}))},"alignment")]})};var i=n(a(94184)),r=a(67294),s=a(71174),l=a(29623),o=n(a(67024)),d=n(a(10483)),u=a(39581),c=n(a(23217)),h=a(85893);const f=[{alignment:u.TextAlignment.LEFT,icon:"align-left"},{alignment:u.TextAlignment.CENTER,icon:"align-center"},{alignment:u.TextAlignment.RIGHT,icon:"align-right"}]},54277:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{selectedLayer:t,inPaintMode:a,inCropRotateMode:n,inTextEditingMode:C,inOutlineMode:_,canUndo:S,canRedo:y,onPaintSelect:j,onCropRotateSelect:E,onTextSelect:T,onEmojiSelect:I,onToggleEmojiPanel:b,onStickerSelect:w,onToggleStickerPanel:k,onOutlineSelect:P,onUndo:M,onRedo:L,showOutline:A}=e;const[O,D]=(0,i.useState)(),[R,N]=(0,i.useState)(),F=(0,i.useRef)({});F.current={inPaintMode:a,onEmojiSelect:I,onStickerSelect:w,onPaintSelect:j};const B=()=>{n?E():a?j():_&&P()},U=()=>{D(null),b(!1)},H=()=>{N(null),k(!1)};return(0,x.jsxs)(c.MenuBar,{theme:"media-editor",children:[A&&(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"scissors"}),a8nText:"outline-button",title:u.default.t(787),onClick:e=>{e.preventDefault(),_||B(),P()},selected:_},"outline"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-emoji"}),a8nText:"emoji-button",title:u.default.t(786),onClick:e=>{e.preventDefault(),e.stopPropagation(),B();const t=(0,x.jsx)(s.EmojiPanel,{onEmoji:e=>{F.current.inPaintMode&&F.current.onPaintSelect(),F.current.onEmojiSelect(e),U()},onFocusNext:U,onFocusPrev:U});D({menu:t,dirY:r.DirY.TOP,type:"emoji_picker",anchor:e.target}),b(!0)},selected:Boolean(O)||t instanceof o.ImageLayer&&t.isEmoji()},"emoji"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-sticker"}),a8nText:"sticker-button",title:u.default.t(794),onClick:e=>{e.preventDefault(),e.stopPropagation(),B();const t=e=>{F.current.inPaintMode&&F.current.onPaintSelect(),F.current.onStickerSelect(e),H()};let a;l.GK.supportsFeature(l.GK.F.MD_BACKEND)?h.ServerProps.webServerStickerPanel&&(a=(0,x.jsx)(d.default,{onSticker:t,onFocusNext:H,onFocusPrev:H})):a=(0,x.jsx)(f.default,{onSticker:t,onFocusNext:H,onFocusPrev:H}),a&&(N({menu:a,dirY:r.DirY.TOP,type:"sticker_picker",anchor:e.target}),k(!0))},selected:Boolean(R)||t instanceof o.ImageLayer&&t.isSticker()},"sticker"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-text"}),a8nText:"text-button",title:u.default.t(795),onClick:e=>{e.preventDefault(),B(),T()},selected:C||t instanceof m.TextLayer},"text"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-drawing"}),a8nText:"paint-button",title:u.default.t(790),onClick:e=>{e.preventDefault(),a||B(),j()},selected:a},"paint"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-crop-rotate"}),a8nText:"crop-rotate-button",title:u.default.t(784),onClick:e=>{e.preventDefault(),n||B(),E()},selected:n},"crop-rotate"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-undo"}),a8nText:"undo-button",title:u.default.t(796),disabled:!S,onClick:M},"undo"),(0,x.jsx)(c.MenuBarItem,{icon:(0,x.jsx)(p.default,{name:"media-editor-redo"}),a8nText:"redo-button",title:u.default.t(791),disabled:!y,onClick:L},"redo"),R&&(0,x.jsx)(g.UIE,{displayName:"StickerPicker",escapable:!0,popable:!0,requestDismiss:H,children:(0,x.jsx)(v.default,{contextMenu:R})}),O&&(0,x.jsx)(g.UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:U,children:(0,x.jsx)(v.default,{contextMenu:O})})]})};var i=a(67294),r=a(60811),s=a(30424),l=a(7293),o=a(39989),d=n(a(7380)),u=n(a(43725)),c=a(46346),h=a(64551),f=n(a(64894)),p=n(a(23217)),m=a(81829),g=a(18644),v=n(a(24717)),x=a(85893)},5807:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineToolbar=function(e){let{smoothing:t,onSmoothingToggle:a,canReset:n,onReset:u}=e;return(0,o.jsxs)(s.FlexRow,{children:[(0,o.jsx)(r.default,{className:(0,i.default)(d),icon:"outline-smooth",title:l.default.t(788),selected:t,onClick:()=>a(!0)}),(0,o.jsx)(r.default,{className:(0,i.default)(d),icon:"outline-straight",title:l.default.t(789),selected:!t,onClick:()=>a(!1)}),(0,o.jsx)(r.default,{className:(0,i.default)(d),onClick:u,disabled:!n,children:l.default.t(783)})]})};var i=n(a(56720)),r=n(a(88262)),s=a(29623),l=n(a(43725)),o=a(85893);const d={marginTop:"tt8xd2xn",marginEnd:"bugiwsl0",marginBottom:"mpdn4nr2",marginStart:"fooq7fky"}},77268:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{checked:t,onBackgroundToggle:a}=e;const n=(0,d.jsx)("div",{className:(0,i.default)(o.default.cirle,{[o.default.circleFilled]:t}),children:t?(0,d.jsx)("div",{className:o.default.checked,children:(0,d.jsx)(l.default,{name:"checkmark"})}):(0,d.jsx)("div",{className:o.default.unchecked})});return(0,d.jsx)(r.default,{icon:n,onClick:a,children:s.default.t(774)})};var i=n(a(94184)),r=n(a(88262)),s=n(a(43725)),l=n(a(23217)),o=n(a(53964)),d=a(85893)},9165:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.thicknesses.map(((t,a)=>(0,l.jsx)(o,{thickness:t,onThicknessSelect:e.onThicknessSelect,selectedThickness:e.selectedThickness},a)));return(0,l.jsx)("div",{className:r.default.container,children:t})};var i=n(a(94184)),r=n(a(65251)),s=a(54274),l=a(85893);function o(e){return(0,l.jsx)("div",{onClick:()=>e.onThicknessSelect(e.thickness),className:(0,i.default)(r.default.thicknessButton,{[r.default.selected]:e.selectedThickness&&e.selectedThickness===e.thickness}),children:(0,l.jsx)("div",{className:r.default.thicknessChip,style:{height:(0,s.getThicknessValue)(e.thickness),width:(0,s.getThicknessValue)(e.thickness)}})},e.thickness.toString())}},73473:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPositionFromColor=function(e){const t=e.toHsl(),a=n.CONTAINER_WIDTH*t.hue-n.CURSOR_SIZE/2,i=n.CANVAS_HEIGHT*(1-t.lightness)-n.CURSOR_SIZE/2;return{x:a,y:i}};var n=a(98254)},91788:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPointFromGroup=function(e){return new i.default({x:e.target.x()-e.target.offsetX(),y:e.target.y()-e.target.offsetY()})},t.getPointFromStage=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return new i.default({x:0,y:0});const{x:n,y:r}=t.getAbsoluteScale(),s=t.content.getBoundingClientRect();let l=e.clientX-s.left,o=e.clientY-s.top;a&&(l=Math.min(Math.max(0,l),s.width),o=Math.min(Math.max(0,o),s.height));return new i.default({x:l/n,y:o/r})},t.getRotationFromGroup=function(e){return e.target.rotation()},t.getScaleFromGroup=function(e){return e.target.scaleX()},t.isEventOnAnchor=function(e){var t,a;return null!==(t=null===(a=e.target.attrs.name)||void 0===a?void 0:a.includes("anchor"))&&void 0!==t&&t},t.isStageCorner=function(e,t){if(!t)return!1;const{x:a,y:n}=t.getAbsoluteScale(),{width:i,height:r}=t.content.getBoundingClientRect();return 0===e.x&&0===e.y||0===e.x&&e.y===r/n||e.x===i/a&&0===e.y||e.x===i/a&&e.y===r/n};var i=n(a(16186))},99282:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return n.Circle}}),Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return n.Group}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return n.Image}}),Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return n.Layer}}),Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return n.Line}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return n.Path}}),Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return n.Rect}}),Object.defineProperty(t,"Stage",{enumerable:!0,get:function(){return n.Stage}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return n.Text}}),Object.defineProperty(t,"Transformer",{enumerable:!0,get:function(){return n.Transformer}}),a(7643),a(71298),a(27149),a(87339),a(75244),a(23787),a(29516);var n=a(77201)},79230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateContainScale=function(e,t,a,n){if(0===e||0===t)return 1;if(!a.isEmpty()&&(e>a.width||t>a.height))return Math.min(a.width/e,a.height/t);if(!n.isEmpty()&&e<n.width&&t<n.height)return Math.min(n.width/e,n.height/t);return 1}},74252:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{mimeType:t,url:a}=e;return(0,r.jsx)("div",{className:i.default.container,"data-animate-attach-media":!0,children:(0,r.jsx)("div",{className:i.default.media,children:(0,r.jsx)("audio",{controls:!0,type:t,src:a})})})};var i=n(a(46771)),r=a(85893)},39414:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a;let{mimeType:n,filename:o}=e;const d=(0,i.default)(r.default.icon,null!==(t=null===(a=s.DOCUMENT_MIMETYPES[n])||void 0===a?void 0:a.icon)&&void 0!==t?t:"icon-doc-generic");return(0,l.jsx)("div",{className:r.default.container,"data-animate-attach-media":!0,children:(0,l.jsx)("div",{className:r.default.media,children:(0,l.jsxs)("div",{className:r.default.document,children:[(0,l.jsx)("div",{className:d}),(0,l.jsx)("div",{className:r.default.text,children:o})]})})})};var i=n(a(94184)),r=n(a(56342)),s=a(43257),l=a(85893)},84124:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,{mimeType:a,url:n,isGif:r,size:d,processing:m,preview:g}=e;switch(p[a].msgType){case"image":t=(0,f.jsx)("img",{alt:o.default.t(1818),src:n,className:l.default.img});break;case"video":const e=r?{loop:!m,autoPlay:!m,muted:!1,controls:!1}:{},d=m?(0,f.jsx)("div",{className:l.default.spinner,children:(0,f.jsx)(c.Spinner,{color:c.colorOptions.white,size:50,stroke:3})}):null,u=g?(0,f.jsx)("img",{alt:o.default.t(1818),className:l.default.staticPreview,src:`data:image/jpeg;base64,${g}`}):null,p=m?null:(0,f.jsx)(h.default,(0,i.default)((0,i.default)({controls:!0,controlsList:"nodownload nofullscreen",className:l.default.video},e),{},{src:n}));t=(0,f.jsxs)("div",{className:(0,s.default)(l.default.img,l.default.videoContainer),children:[d,p,u]});break;case"audio":t=(0,f.jsx)("audio",{controls:!0,className:l.default.audio,type:a,src:n})}return(0,f.jsx)("div",{className:l.default.container,"data-animate-attach-media":!0,children:(0,f.jsx)("div",{className:l.default.media,children:(0,f.jsx)(u.default,{type:"scaleDown",size:d,children:t})})})};var i=n(a(81109)),r=n(a(35937)),s=n(a(94184)),l=n(a(13149)),o=n(a(43725)),d=a(43257),u=n(a(11791)),c=a(11054),h=n(a(23425)),f=a(85893);const p=(0,r.default)(d.MIMETYPES,(e=>"image"===(null==e?void 0:e.msgType)||"video"===(null==e?void 0:e.msgType)))},35137:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{fullPreview:t,fullPreviewSize:a,pageCount:n,mimeType:u,filename:c,showPageCount:h=!0,showBorder:f=!1}=e;if(t&&a&&null!=n&&n>0){const e=l.default.t(156,{count:n,_plural:n});return(0,d.jsxs)("div",{className:s.default.container,"data-js-attach-preview":!0,children:[(0,d.jsx)("div",{className:s.default.preview,children:(0,d.jsx)(o.default,{type:"scaleDown",size:a,children:(0,d.jsx)("img",{alt:l.default.t(1818),src:t,className:(0,i.default)(s.default.img,{[s.default.imgBorder]:f})})})}),h&&(0,d.jsx)("div",{className:s.default.caption,children:e})]})}return(0,d.jsx)(r.default,{mimeType:u,filename:c})};var i=n(a(94184)),r=n(a(39414)),s=n(a(28469)),l=n(a(43725)),o=n(a(11791)),d=a(85893)},75680:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{disabled:t,isOn:a,mediaType:n,onChange:x,noMargin:C}=e;const[_,S]=(0,s.useState)((0,u.shouldShowNUX)(d.default.NUX.EPHEMERAL_VIEW_ONCE));return(0,s.useEffect)((()=>{if(!a)return;if(_){const e=(0,g.jsx)(l.default,{onOkClick:()=>{S(!1),o.Cmd.closeModal()}});return void o.Cmd.openModal(e)}const e=n===h.TYPE.VIDEO?c.default.t(1446):c.default.t(1443),t=(0,g.jsx)(p.Toast,{msg:e,id:(0,p.genId)("view-once-toast")});return o.Cmd.openToast(t),()=>{o.Cmd.closeToast(t)}}),[_,n,a]),(0,g.jsx)(m.default,{a8nText:i.default.key("view-once-toggle"),xstyle:[v.btnViewOnce,C&&v.btnNoMargin,t&&v.btnDisabled],disabled:t,onClick:()=>x(!a),"aria-pressed":a,children:(0,g.jsx)(f.default,{"aria-label":a?r.default._("Turn off view once",null,{hk:"3cl8Dn"}):r.default._("Turn on view once",null,{hk:"3pd2lD"}),name:a?"view-once-media-select-on":"view-once-media-select",height:26,width:26})})};var i=n(a(99964)),r=n(a(48360)),s=a(67294),l=(n(a(56720)),n(a(22594))),o=a(88102),d=n(a(69618)),u=a(99234),c=n(a(43725)),h=a(17304),f=n(a(23217)),p=a(50452),m=n(a(1784)),g=a(85893);const v={btnViewOnce:{display:"f804f6gw",marginTop:"c46o30wg",marginEnd:"bugiwsl0",marginStart:"eab7llgz",color:"svlsagor"},btnNoMargin:{marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"},btnDisabled:{cursor:"h2qzpyga",opacity:"notw83rv"}}},22594:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOkClick:t}=e;return(0,i.useEffect)((()=>()=>{(0,c.setNUX)(l.default.NUX.EPHEMERAL_VIEW_ONCE,{views:1,maxViews:1})}),[]),(0,m.jsx)(s.default,{onOK:t,cancelText:h.default.t(689),onCancel:()=>{(0,o.openExternalLink)((0,d.getViewOnceFaqUrl)())},children:(0,m.jsxs)(u.FlexColumn,{children:[(0,m.jsx)(u.FlexItem,{xstyle:g.graphic,align:"center",children:(0,m.jsx)(f.default,{name:"view-once-sender-nux",width:195,height:177})}),(0,m.jsx)(p.TextHeader,{className:(0,r.default)(g.text),theme:"popup-title",children:h.default.t(1441)}),(0,m.jsx)(p.TextParagraph,{className:(0,r.default)(g.text),color:"secondary",children:h.default.t(1440)})]})})};var i=a(67294),r=n(a(56720)),s=n(a(52665)),l=n(a(69618)),o=a(12591),d=a(96384),u=a(29623),c=a(99234),h=n(a(43725)),f=n(a(23217)),p=a(13923),m=a(85893);const g={text:{marginBottom:"or9x5nie"},graphic:{marginBottom:"t4zgqcuo"}}},72758:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const[e,t]=(0,o.default)(i.getAutoDownloadPhotos,i.setAutoDownloadPhotos),[a,n]=(0,o.default)(i.getAutoDownloadAudio,i.setAutoDownloadAudio),[u,c]=(0,o.default)(i.getAutoDownloadVideos,i.setAutoDownloadVideos),[h,f]=(0,o.default)(i.getAutoDownloadDocuments,i.setAutoDownloadDocuments);return(0,d.jsxs)(s.SettingsCheckList,{children:[(0,d.jsx)(s.SettingsCheckListItem,{a8nText:"option-photos",id:"photos",checked:e,onChange:t,children:r.default.t(991)}),(0,d.jsx)(s.SettingsCheckListItem,{a8nText:"option-audio",id:"audio",checked:a,onChange:n,children:r.default.t(980)}),(0,d.jsx)(s.SettingsCheckListItem,{a8nText:"option-videos",id:"videos",checked:u,onChange:c,children:r.default.t(993)}),(0,d.jsx)(s.SettingsCheckListItem,{a8nText:"option-documents",id:"documents",checked:h,onChange:f,children:r.default.t(984)}),(0,d.jsx)(s.SettingsCheckListSection,{children:(0,d.jsx)(l.TextDiv,{theme:"muted",children:r.default.t(772)})})]})};var i=a(99234),r=n(a(43725)),s=a(40015),l=a(13923),o=n(a(152)),d=a(85893)},10403:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{labelId:t,onAddLabel:a,onUpdateLabel:n,onCancel:_}=e,S=(0,x.default)((()=>t?h.LabelCollection.assertGet(t):void 0)),[y,j]=(0,r.useState)((()=>{var e;return(null===(e=S.current)||void 0===e?void 0:e.color)||void 0})),[E,T]=(0,r.useState)((()=>{var e;return(null===(e=S.current)||void 0===e?void 0:e.name)||""})),[I,b]=(0,r.useState)(void 0),w=e=>{let t=!0,a=null;return e&&""!==e.trim()||(t=!1),S.current&&S.current.name===e||0===h.LabelCollection.where({name:e}).length||(t=!1,a=i.default._("Label name already exists",null,{hk:"3du3mm"})),{passed:t,error:a}};(0,r.useEffect)((()=>{a?(h.LabelCollection.getNewLabelColor().then((e=>{j(e||d.default.DEFAULT_SMB__NEW_LABEL_COLOR)})),(0,f.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.VIEW,1,m.default.LABEL_TARGETS.ADD_LABEL_DIALOG)):n&&(0,f.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.VIEW,1,m.default.LABEL_TARGETS.EDIT_LABEL_DIALOG)}),[]);const k=()=>{if(I)return;(0,f.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.CLICK_POSITIVE,1,a?m.default.LABEL_TARGETS.ADD_LABEL_DIALOG:m.default.LABEL_TARGETS.EDIT_LABEL_DIALOG);const e=E&&E.trim(),i=w(e||"");i.passed?(t&&n?n({id:t,color:y,name:E},h.LABEL_PROPERTIES.NAME):a&&a(E||"",y),_?_():l.Cmd.closeModal()):b(i.error)},P=!w(E.trim()).passed;return(0,C.jsx)(o.default,{title:e.onUpdateLabel?i.default._("Edit label",null,{hk:"3QX44B"}):i.default._("Add new label",null,{hk:"2JFfTv"}),okText:u.default.t(1764),onOK:k,okDisabled:P,onCancel:()=>{(0,f.logLabelOperationEvent)(m.default.LABEL_OPERATIONS.CLICK_NEGATIVE,1,a?m.default.LABEL_TARGETS.ADD_LABEL_DIALOG:m.default.LABEL_TARGETS.EDIT_LABEL_DIALOG),_?_():l.Cmd.closeModal()},children:(0,C.jsxs)("div",{className:s.default.inputContainer,children:[(0,C.jsx)("div",{className:s.default.label,children:y?(0,p.renderLabelSvg)((0,c.intColorToHex)(y)):(0,C.jsx)(g.Spinner,{stroke:5,size:20})}),(0,C.jsx)("div",{className:s.default.input,children:(0,C.jsx)(v.TextInput,{a8n:"add-new-label-name-input",focusOnMount:!0,hideFloatingLabel:!0,showRemaining:!0,supportsEmoji:!0,value:E,error:I,maxLength:d.default.SMB_LABELS.MAX_LABEL_LENGTH,onChange:e=>{const t=w(e);T(e),b(t.passed?void 0:t.error)},onEnter:e=>{e.stopPropagation(),k()},placeholder:i.default._("New label",null,{hk:"33ueym"})})})]})})};var i=n(a(48360)),r=a(67294),s=n(a(42479)),l=a(88102),o=n(a(52665)),d=n(a(69618)),u=n(a(43725)),c=a(8803),h=a(16770),f=a(50047),p=a(84543),m=n(a(11339)),g=a(11054),v=a(90011),x=n(a(59552)),C=a(85893)},43318:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{product:t,sessionId:a}=e,[n,S]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[E,T]=(0,s.useState)(""),I=e=>{T(e)},b=()=>{(0,c.logAppealProductCatalogClick)(a),S(!0);let e=!0;p.QPL.markerStart(m.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL),(0,h.appealProduct)(t.id.toString(),E).then((()=>{t.canAppeal=!1,t.reviewStatus=f.PRODUCT_REVIEW_STATUS.PENDING,(0,c.logAppealProductCatalogSuccess)(a),S(!1),j(!0),e=!1,p.QPL.markerEnd(m.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,p.QuickLogActionType.SUCCESS)})).catch((0,i.filteredCatch)(C.ServerStatusCodeError,(e=>{l.Cmd.openToast((0,_.jsx)(x.Toast,{msg:r.default._("Failed to send review request.",null,{hk:"1MNBtG"}),id:(0,x.genId)("catalog_appeal_submission_failed")})),(0,c.logAppealProductCatalogFailed)(a,e.status),S(!1)}))).finally((()=>{e&&p.QPL.markerEnd(m.QuickLogMarkerId.WHATSAPP_PRODUCT_APPEAL,p.QuickLogActionType.FAIL)}))},w=()=>{l.Cmd.closeModal()};if(y)return(0,_.jsx)(o.default,{title:r.default._("Request review",null,{hk:"1Rp2pL"}),onOK:w,children:(0,_.jsx)(g.TextDiv,{children:r.default._("We will review the item and if it meets our guidelines, it will be added to your catalog.",null,{hk:"4tmhbu"})})});{const e=E.length<1||n;return(0,_.jsx)(o.default,{title:r.default._("Request review",null,{hk:"1Rp2pL"}),onOK:b,onCancel:w,okDisabled:e,children:(0,_.jsxs)("form",{children:[(0,_.jsx)(v.TextInput,{a8n:"confirm-popup-text-input",placeholder:r.default._("Enter reason for this request...",null,{hk:"49sHMz"}),onChange:I,value:E,maxLength:1e3}),(0,_.jsx)(u.ExternalLink,{href:d.default.WA_COMMERCE_POLICY_URL,children:r.default._("Learn more",null,{hk:"2S4fxr"})})]})})}};var i=a(50796),r=n(a(48360)),s=a(67294),l=a(88102),o=n(a(52665)),d=n(a(69618)),u=a(12591),c=a(77975),h=a(96519),f=a(5641),p=a(48870),m=a(27798),g=a(13923),v=a(90011),x=a(50452),C=a(77591),_=a(85893)},22635:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(88102),r=a(27105),s=n(a(52665)),l=n(a(43725)),o=a(85893);var d=()=>{i.Cmd.openModal((0,o.jsx)(s.default,{okText:l.default.t(1764),onOK:()=>i.Cmd.closeModal(),children:(0,o.jsx)(r.ComplianceInfoHelpCenterBanner,{})}))};t.default=d},48517:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(88102),s=n(a(52665)),l=n(a(43725)),o=a(85893);var d=e=>{r.Cmd.openModal((0,o.jsx)(s.default,{title:i.default._("Information accuracy",null,{hk:"1IkKdC"}),okText:l.default.t(1764),onOK:()=>{null==e||e(),r.Cmd.closeModal()},cancelText:i.default._("Go back",null,{hk:"3k17TN"}),onCancel:()=>r.Cmd.closeModal(),children:(0,o.jsxs)(o.Fragment,{children:[i.default._("By continuing, you confirm that all information you have provided is correct and current.",null,{hk:"3VB7Ib"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),i.default._("You are required by law to update this info on WhatsApp if it ever changes.",null,{hk:"3FF6ZU"})]})}))};t.default=d},76419:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;const a=(0,v.default)(),[n,r]=(0,s.useState)(null===(t=h.LabelCollection.labelColorPalette)||void 0===t?void 0:t.colors),c=(0,s.useRef)(null);(0,s.useEffect)((()=>((0,p.default)(h.LabelCollection.getLabelColorPalette(),a).then((e=>{r(e)})).catch((0,i.catchAbort)((()=>{}))),()=>{var e;null===(e=c.current)||void 0===e||e.cancel()})),[]);let g=(0,x.jsx)(m.Spinner,{stroke:6,size:24});n&&(g=(0,x.jsx)(_,{labelId:e.labelId,onBack:e.onClose,onUpdateColor:e.onUpdateColor,colors:n,currentColor:e.currentColor}));return(0,x.jsxs)(l.default,{children:[(0,x.jsx)(d.DrawerHeader,{title:u.default.t(676),onBack:e.onClose,type:d.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsx)(o.default,{children:(0,x.jsx)("div",{className:f.default.container,children:g})})]})};var i=a(89385),r=n(a(94184)),s=a(67294),l=n(a(60453)),o=n(a(69637)),d=a(94790),u=n(a(43725)),c=a(8803),h=a(16770),f=n(a(15073)),p=n(a(84644)),m=a(11054),g=n(a(23217)),v=n(a(38080)),x=a(85893);function C(e){const{onUpdateColor:t,labelId:a,colorInt:n,onBack:i}=e,[l,o]=(0,s.useState)(!1),d=e.isSelected?(0,x.jsx)(g.default,{name:"checkmark-medium"}):null,u=()=>{l||o(!0)},p=(0,r.default)(f.default.wallpaperColorCanvas,{[f.default.canvasHover]:l,[f.default.canvasActive]:e.isSelected});return(0,x.jsx)("span",{className:p,style:{backgroundColor:(0,c.intColorToHex)(e.colorInt)},onMouseOver:u,onMouseEnter:u,onMouseLeave:()=>{l&&o(!1)},onClick:()=>{t({id:a,color:n},h.LABEL_PROPERTIES.COLOR),i()},children:d})}function _(e){const{currentColor:t,colors:a}=e,n=a.map((a=>(0,x.jsx)(C,{onUpdateColor:e.onUpdateColor,colorInt:a,onBack:e.onBack,labelId:e.labelId,isSelected:t===a},a)));for(let e=0;e<2;e++)n.push((0,x.jsx)("div",{className:f.default.wallpaperColorEmpty},"emptyEl"+e));return n}},19446:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onDeleteLabel:t}=e,[a,n]=(0,i.useState)(0),y=(0,_.default)((()=>new v.default([],(e=>e.id))));(0,i.useEffect)((()=>{(0,f.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.VIEW,void 0,p.default.LABEL_TARGETS.LABELS_SCREEN)}),[]);const j=()=>{const e=y.current.getSelected();(0,f.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.VIEW,e.length,p.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),r.Cmd.openModal((0,S.jsx)(s.default,{okText:c.default.t(1907),cancelText:c.default.t(1761),onCancel:()=>{(0,f.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.CLICK_NEGATIVE,1,p.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),r.Cmd.closeModal()},onOK:()=>{(0,f.logLabelOperationEvent)(p.default.LABEL_OPERATIONS.CLICK_POSITIVE,1,p.default.LABEL_TARGETS.DELETE_LABEL_DIALOG),(e=>{r.Cmd.closeModal(),y.current.unsetAll(),t(e)})(e)},children:c.default.t(388,{_plural:e.length})}))},E=()=>{y.current.unsetAll(),n(0)};let T=null;T=a>0?(0,S.jsx)(m.default,{selectedModels:y.current,onCancel:E,onDelete:j,theme:"drawer-header"}):(0,S.jsx)(d.DrawerHeader,{title:c.default.t(687),onBack:e.onClose,type:d.DRAWER_HEADER_TYPE.LARGE});const I=(0,u.canEditLabel)()&&(0,S.jsx)("div",{className:h.default.addLabelBtContainer,children:(0,S.jsx)(x.Round,{large:!0,onClick:e.openAddLabel,children:(0,S.jsx)(C.default,{name:"plus-large"})})});return(0,S.jsxs)(l.default,{theme:"settings",children:[T,(0,S.jsx)(o.default,{children:(0,S.jsx)(g.default,{shouldScrollIntoViewAndSelect:()=>({shouldScrollIntoView:!0,shouldSelect:!1}),selectedLabels:y.current,renderContext:"label-list",onMultiSelect:()=>{const e=y.current.getSelected().length;n(e)},onLabelClick:e.onLabelClick})}),I]})};var i=a(67294),r=a(88102),s=n(a(52665)),l=n(a(60453)),o=n(a(69637)),d=a(94790),u=a(57701),c=n(a(43725)),h=n(a(62838)),f=a(50047),p=n(a(11339)),m=n(a(63538)),g=n(a(67901)),v=n(a(26757)),x=a(82857),C=n(a(23217)),_=n(a(59552)),S=a(85893)},41885:(e,t,a)=>{"use strict";var n=a(95318);t.Z=function(e){const{labelId:t,openLabelColorDrawer:a,onEditLabel:n,onRemoveLabel:i}=e,h=(0,I.default)(),f=(0,b.default)((()=>new j.default([],(e=>e.id.toString())))).current;(0,w.useListener)(f,"all",(()=>h())),(0,r.useEffect)((()=>{(0,v.logLabelOperationEvent)(_.default.LABEL_OPERATIONS.VIEW,void 0,_.default.LABEL_TARGETS.LABEL_DETAILS_SCREEN)}),[]);const p=()=>{f.unsetAll()},C=()=>{const e=f.getSelected();(0,v.logLabelOperationEvent)(_.default.LABEL_OPERATIONS.CLICK_NEGATIVE,e.length,_.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG),l.Cmd.closeModal()},T=(e=>{let t,a;for(let n=0;n<e.length;n++){if(e[n]instanceof y.Msg?a=!0:t=!0,t&&a)return!0}return!1})(f.getSelected()),M=f.getSelected().length>0?(0,k.jsx)(S.default,{labelEditEnabled:!T,onRemoveLabel:()=>{const e=f.getSelected();if(!i)return;const a=g.LabelCollection.assertGet(t);(0,v.logLabelOperationEvent)(_.default.LABEL_OPERATIONS.VIEW,e.length,_.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG),l.Cmd.openModal((0,k.jsx)(o.default,{title:m.default.t(1141,{count:e.length,labelName:a.name,_plural:e.length}),okText:m.default.t(1764),cancelText:m.default.t(1573),onCancel:C,onOK:()=>((e,t)=>{l.Cmd.closeModal(),p(),i(e,t),(0,v.logLabelOperationEvent)(_.default.LABEL_OPERATIONS.CLICK_POSITIVE,t.length,_.default.LABEL_TARGETS.BULK_UNLABEL_DIALOG)})(t,e)}))},selectedModels:f,onCancel:p,theme:"drawer-header"}):(0,k.jsx)(c.DrawerHeader,{onBack:e.onClose,menu:(0,k.jsx)(P,{openColorPicker:()=>{const e=g.LabelCollection.assertGet(t);a(t,e.color)},openEditLabel:()=>{n&&n(t)}}),type:c.DRAWER_HEADER_TYPE.LABELS,children:(0,k.jsx)(x.Labels,{labels:[e.labelId],renderAsCircle:!0,showName:!0,theme:"drawer-title"})});return(0,k.jsxs)(d.default,{theme:"settings",children:[M,(0,k.jsx)(u.default,{children:(0,k.jsx)(s.default,{hideMultiSelectBar:!0,multiSelection:f,labelFilter:e.labelId,settings:E.default,selectable:!0})})]})};var i=n(a(48360)),r=a(67294),s=n(a(47488)),l=a(88102),o=n(a(52665)),d=n(a(60453)),u=n(a(69637)),c=a(94790),h=a(60811),f=a(71174),p=a(57701),m=n(a(43725)),g=a(16770),v=a(50047),x=a(84543),C=a(46346),_=n(a(11339)),S=n(a(63538)),y=a(17304),j=n(a(26757)),E=n(a(68132)),T=n(a(23217)),I=n(a(59909)),b=n(a(59552)),w=a(19529),k=a(85893);function P(e){let{openColorPicker:t,openEditLabel:a}=e;return(0,p.canEditLabel)()?(0,k.jsx)(C.MenuBarItem,{a8nText:"starred-menu",icon:(0,k.jsx)(T.default,{name:"menu"}),title:m.default.t(821),children:(0,k.jsxs)(h.Dropdown,{type:"dropdown_menu",flipOnRTL:!0,dirX:h.DirX.LEFT,children:[(0,k.jsx)(f.DropdownItem,{a8n:"menu-item",action:t,children:m.default.t(676)}),(0,k.jsx)(f.DropdownItem,{a8n:"menu-item",action:a,children:i.default._("Edit label",null,{hk:"3QX44B"})})]},"labelChooseColor")}):null}},94981:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{modelsToUpdate:t,onLabelUpdateComplete:a}=e,n=(0,j.default)((()=>new C.default([],(e=>e.id)))),w=(0,s.useRef)(new Set),k=n.current,P=w.current,M=(0,y.default)(),L=(0,s.useMemo)((()=>{const e=(()=>{const e={};return t.forEach((t=>{const a=(0,_.unproxy)(t);a.labels&&a.labels.forEach((t=>{e[t]=e[t]?++e[t]:1}))})),e})();return(0,i.default)(e,(e=>e===t.length?I:e>0?b:T))}),[]),A=(0,E.jsx)(l.default,{a8nText:"popup-controls-ok",type:"primary",disabled:0===P.size,onClick:()=>{(0,p.logLabelOperationEvent)(g.default.LABEL_OPERATIONS.CLICK_POSITIVE,t.length,g.default.LABEL_TARGETS.LABEL_COMBINED_DIALOG);const e=k.list,n=k.selected,i=e.map(((e,t)=>({id:e.id,type:n[t]?"add":"remove"})));f.LabelCollection.addOrRemoveLabels(i,t),a&&a()},children:h.default.t(1188)},1),O=(0,E.jsx)(l.default,{a8nText:"popup-controls-cancel",type:"secondary",onClick:e.onCancel,children:h.default.t(1573)},0),D=(0,c.canEditLabel)()&&(0,E.jsx)("div",{className:m.default.newLabelBtn,children:(0,E.jsxs)(l.default,{a8nText:"popup-controls-cancel",type:"simplified",onClick:e.onAddNewLabel,children:[(0,E.jsx)(S.default,{name:"plus-large",className:m.default.plus,display:"inline"}),r.default._("NEW LABEL",null,{hk:"4xjp4I"})]},2)});return(0,E.jsx)(v.Modal,{type:v.ModalTheme.Tower,children:(0,E.jsxs)(o.default,{theme:"labels",children:[(0,E.jsx)(u.DrawerHeader,{title:h.default.t(679),type:u.DRAWER_HEADER_TYPE.POPUP,onCancel:e.onCancel}),(0,E.jsx)(d.default,{"data-list-scroll-container":!0,theme:"padding",children:(0,E.jsx)(x.default,{shouldScrollIntoViewAndSelect:e.shouldScrollIntoViewAndSelect,initialLabelState:L,selectedLabels:k,renderContext:"label-selection",onLabelClick:e.onLabelClick,onMultiSelect:e=>{e&&(L[e]===b?P.add("{labelId}_changed"):P.has(e)?P.delete(e):P.add(e),M())}})}),D,(0,E.jsxs)("div",{className:m.default.actionBtns,children:[O,A]})]},"mange_label_modal")})};var i=n(a(66604)),r=n(a(48360)),s=a(67294),l=n(a(39770)),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=a(57701),h=n(a(43725)),f=a(16770),p=a(50047),m=n(a(19735)),g=n(a(11339)),v=a(57224),x=n(a(67901)),C=n(a(26757)),_=a(31019),S=n(a(23217)),y=n(a(59909)),j=n(a(59552)),E=a(85893);const T=0,I=1,b=2},51731:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(51463)),r=n(a(99964)),s=a(67294),l=a(80140),o=n(a(53939)),d=a(32826),u=a(88102),c=n(a(52665)),h=a(2732),f=a(19380),p=n(a(29234)),m=n(a(60453)),g=n(a(69637)),v=n(a(64738)),x=a(94790),C=a(85600),_=a(47915),S=n(a(44942)),y=n(a(30855)),j=n(a(43725)),E=a(84387),T=n(a(23217)),I=a(85893);class b extends s.Component{constructor(){super(...arguments),this.flatListController=new y.default,this._handleBlockConfirm=e=>{(0,l.blockContact)(e).catch((()=>{})),u.Cmd.closeModal()},this.handleBlock=()=>{u.Cmd.openModal((0,I.jsx)(p.default,{title:j.default.t(146),filter:function(e){return!!f.ContactCollection.isFilteredContact(e)&&(!d.BlocklistCollection.get(e.id)||j.default.t(1025))},onCancel:()=>u.Cmd.closeModal(),onSelect:(0,i.default)(this._handleBlockConfirm)}))},this._handleUnblockConfirm=e=>{(0,l.unblockContact)(e).catch((()=>{})),u.Cmd.closeModal()},this._handleUnblockCancel=()=>{u.Cmd.closeModal()},this._handleUnblock=(e,t)=>{u.Cmd.openModal((0,I.jsx)(c.default,{okText:j.default.t(1363),onOK:this._handleUnblockConfirm.bind(this,t),cancelText:j.default.t(1573),onCancel:this._handleUnblockCancel,children:j.default.t(1364,{contact:t.formattedName})}))},this.renderItem=e=>{const{blocklist:t}=e,a=t.contact();return(0,I.jsx)(h.Contact,{contact:a,onClick:this._handleUnblock,onDelete:this._handleUnblock,waitIdle:!0},a.id.toString())}}componentDidMount(){this.props.listeners.add(d.BlocklistCollection,"add remove",(()=>{this.forceUpdate()}))}getData(){return d.BlocklistCollection.map((e=>({itemKey:e.id.toString(),blocklist:e})))}render(){let e,t;return d.BlocklistCollection.length>0?(e=(0,I.jsx)(S.default,{flatListControllers:[this.flatListController],className:o.default.list,children:(0,I.jsx)(_.FlatList,{flatListController:this.flatListController,direction:"vertical",data:this.getData(),renderItem:this.renderItem})}),t=(0,I.jsx)("div",{"data-a8n":r.default.key("blocked-description"),className:o.default.hint,children:j.default.t(145)})):e=(0,I.jsx)(C.Blocked,{}),(0,I.jsxs)(m.default,{children:[(0,I.jsx)(x.DrawerHeader,{title:j.default.t(185),onBack:this.props.onClose,type:x.DRAWER_HEADER_TYPE.LARGE}),(0,I.jsx)("div",{className:o.default.button,children:(0,I.jsx)(v.default,{a8nText:"li-add-blocked",onClick:this.handleBlock,icon:(0,I.jsx)(T.default,{name:"add-user",directional:!0}),children:j.default.t(146)})}),(0,I.jsxs)(g.default,{children:[e,t]})]})}}b.displayName="BlockedDrawer";var w=(0,E.ListenerHOC)(b);t.default=w},37409:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(50796),s=i(a(45095)),l=a(57319),o=i(a(94184)),d=a(67294),u=i(a(14075)),c=i(a(75680)),h=a(35718),f=i(a(55386)),p=a(88102),m=i(a(69618)),g=i(a(60453)),v=i(a(69637)),x=a(94790),C=n(a(64103)),_=a(1063),S=a(18671),y=i(a(43725)),j=a(90535),E=i(a(3028)),T=n(a(58254)),I=i(a(14500)),b=i(a(11339)),w=i(a(11791)),k=i(a(34949)),P=a(82857),M=a(64551),L=a(11054),A=i(a(23217)),O=a(2541),D=i(a(59552)),R=i(a(41956)),N=i(a(23425)),F=a(85893);const B="ANIMATING",U="LOADING",H="RECORDING",G="SENDING";function V(e,t){const{chat:a,disposeStream:n,onCaptured:i,onBack:V,onSend:W}=e,z=(0,d.useRef)(null),q=(0,d.useRef)(null),K=(0,d.useRef)(null),Y=(0,d.useRef)(null),Q=(0,d.useRef)(null),[X,Z]=(0,d.useState)(void 0),[J,$]=(0,d.useState)(void 0),[ee,te]=(0,d.useState)(!1),[ae,ne]=(0,d.useState)(void 0),[ie,re]=(0,d.useState)(B),[se,le]=(0,d.useState)(void 0),oe=(e,t)=>{var a;e?(null===(a=q.current)||void 0===a||a.call(q),q.current=t,re(U),le(e),(0,T.isSrcObjectInVideoElement)()||(e?(window.URL.revokeObjectURL(K.current),K.current=window.URL.createObjectURL(e)):(window.URL.revokeObjectURL(K.current),K.current=void 0))):ie===B&&re(U)},de=(0,D.default)((()=>new l.ShiftTimer((e=>{let{stream:t,disposeStream:a}=e;oe(t,a)})))),ue=(0,D.default)((()=>new l.ShiftTimer((e=>{let{stream:t,disposeStream:a}=e;var n;t&&a&&(null===(n=q.current)||void 0===n||n.call(q));(0,T.isSrcObjectInVideoElement)()||(K.current=window.URL.revokeObjectURL(K.current))})))),ce=()=>{a&&a.setAttachMediaContents(null)};(0,d.useEffect)((()=>(de.current.onOrBefore(300,{stream:e.stream,disposeStream:e.disposeStream}),()=>{de.current.cancel(),K.current&&window.URL.revokeObjectURL(K.current),null==n||n(),z.current&&z.current.logCancel(),ce()})),[]);const he=(e,t)=>{de.current.forceRunNow({stream:e,disposeStream:t})};(0,d.useImperativeHandle)(t,(()=>({loadNewStreamTimerUpdate:he,loadNewStream:oe})));const fe=()=>{var e;const t=null===(e=Q.current)||void 0===e?void 0:e.underlyingVideo();if(!t)return;const r=document.createElement("canvas");r.height=t.videoHeight,r.width=t.videoWidth;const l=r.getContext("2d");if(l)if(l.translate(r.width,0),l.scale(-1,1),l.drawImage(t,0,0,t.videoWidth,t.videoHeight),i)(0,h.canvasToBlob)(r).then((e=>{i(e)}));else{ue.current.onOrBefore(500,{stream:se,disposeStream:n});const e=new j.MediaPickerStatsLogger;e.logAdd("CAPTURE_MEDIA","image",b.default.MEDIA_PICKER_ORIGIN_TYPE.MENU_CAMERA_CAPTURE),e.chatRecipients=(null==a?void 0:a.groupMetadata)?a.groupMetadata.participants.length:1,z.current=e;const t=r.toDataURL("image/jpeg"),i=window.dataURLtoBlob(t);if(a){a.attachMediaContents||a.setAttachMediaContents(new u.default({chatParticipantCount:a.getParticipantCount()}));(0,s.default)(a.attachMediaContents,"chat.attachMediaContents").processAttachments([{file:(0,_.createFile)([i],"",{type:"image/jpeg"})}])}$(t),re(G),le(void 0)}else __LOG__(3)`CaptureDrawer:onCapture can not get 2d context`},pe=e=>{re(H),ne({width:e.videoWidth,height:e.videoHeight})},me=()=>{Z(void 0),re(U),ce();const{asyncStream:e,disposeStream:t}=T.start("camera");q.current=t,e.then((e=>{e&&((0,T.isSrcObjectInVideoElement)()||(K.current=window.URL.createObjectURL(e)),le(e))})).catch((0,r.filteredCatch)(C.GUM.NotAllowedError,(()=>{V(),p.Cmd.openModal((0,F.jsx)(S.GuidePopup,{messaging:S.Messaging.CAMERA_FAIL,type:S.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(C.GUM.GUMError,(()=>{V(),p.Cmd.openModal((0,F.jsx)(S.GuidePopup,{messaging:S.Messaging.CAMERA_MISSING,type:S.TYPE.GUIDE_NONE}))})))},ge=()=>{let e=X;if(W)if(J){var t,a;const n=null===(t=Y.current)||void 0===t?void 0:t.refInput;let i=[];if(X&&n){const t=n.serialize(X),[a,r]=[t[0].trim(),t[1]];a.length&&(e=a,i=r.mentionedJidList||[])}W({caption:e,getImg:k.default.createFromBase64Jpeg(O.URL.parseDataURL(J).data),isViewOnce:ee,mentionedJidList:i}),null===(a=z.current)||void 0===a||a.logSend()}else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-img");else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-onSend")},ve=e=>{Z(e)},xe=()=>{const e=null==a?void 0:a.contact.isEnterprise;return M.ServerProps.viewOnceWrite&&!e},Ce=e=>{te(e)},_e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isViewOnce:a}=t;if(W)if(0===e.length)__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-img");else{const{media:t,mentionedJidList:r}=(0,s.default)(e[0],"medias[0]"),l=t.file;var n,i;if(l instanceof Blob)W({getImg:k.default.createFromData(l,l.type),caption:null!==(n=t.caption)&&void 0!==n?n:void 0,isViewOnce:a,mentionedJidList:r}),null===(i=z.current)||void 0===i||i.logSend();ce()}else __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("capture-drawer-no-onSend")};let Se,ye,je,Ee,Te;const Ie="capture-cover"===e.theme?"cover":"contain";switch(ie){case B:case U:if(Te=(0,F.jsx)(L.Spinner,{stroke:4,size:50}),ie===B)break;case H:const t=(0,o.default)(f.default.video,{[f.default.videoInactive]:se&&ie===U}),n=se?(0,F.jsx)(N.default,{autoPlay:!0,ref:Q,onPlay:pe,src:K.current?K.current:void 0,srcObject:K.current?void 0:se}):null;je=se?(0,F.jsx)("div",{children:(0,F.jsx)(w.default,{type:Ie,size:ae,children:(0,F.jsx)("div",{className:t,"data-animage-capture-webcam":!0,children:n})})},"webcam"):null,Se=ie===H?(0,F.jsx)("div",{className:f.default.btn,children:(0,F.jsx)(P.Round,{large:!0,onClick:fe,children:(0,F.jsx)(A.default,{name:"camera"})})},"btn-capture"):null;break;case G:if(je=(0,F.jsx)(w.default,{type:Ie,size:ae,children:(0,F.jsx)("img",{alt:"",className:f.default.image,"data-animate-capture-snapshot":!0,src:J})}),a){const e=(0,s.default)(a.attachMediaContents,"chat.attachMediaContents");je=(0,F.jsx)(I.default,{theme:"capture",chat:a,initCaption:null,mediaCollection:e,onDropText:()=>{},onSendMedia:_e})}Se=(0,F.jsx)("div",{className:(0,o.default)(f.default.btn,f.default.btnSend),children:(0,F.jsx)(P.Round,{large:!0,onClick:ge,children:(0,F.jsx)(A.default,{name:"send",directional:!0})})},"btn-send"),ye=(0,F.jsxs)("div",{className:f.default.retakeBtn,onClick:me,children:[(0,F.jsx)("div",{className:f.default.retakeIcon,children:(0,F.jsx)(A.default,{name:"return"})}),y.default.t(1178)]}),Ee=e.chat?(0,F.jsxs)("div",{className:f.default.captionInput,children:[(0,F.jsx)(E.default,{ref:Y,chat:e.chat,maxLength:m.default.MAX_CAPTION_LENGTH,multiline:!0,onEnter:ge,onChange:ve,placeholder:y.default.t(144),showRemaining:!0,spellCheck:!0,supportsEmoji:!0,value:X}),M.ServerProps.viewOnceWrite?(0,F.jsx)(c.default,{disabled:!xe(),isOn:ee,mediaType:"image",onChange:Ce}):null]}):null;break;default:__LOG__(2)`captureDrawer:render Unhandled video capture state ${ie}`}const be=e.caption?(0,F.jsx)(R.default,{transitionName:"media-caption",className:f.default.caption,children:Ee}):null;let we=(0,F.jsxs)("div",{className:f.default.footer,children:[be,(0,F.jsx)(R.default,{transitionName:"pop_delay",children:Se})]});return ie===G&&(we=null),(0,F.jsxs)(g.default,{theme:e.theme,children:[(0,F.jsx)(x.DrawerHeader,{title:y.default.t(1336),type:x.DRAWER_HEADER_TYPE.OFFSET,onCancel:e.onBack,children:ye}),(0,F.jsxs)(v.default,{overflow:"hidden",children:[(0,F.jsxs)("div",{className:f.default.container,children:[Te,(0,F.jsx)("div",{className:f.default.body,children:(0,F.jsx)(R.default,{transitionName:"capture",className:f.default.videoContainer,children:je})})]}),we]})]},"attach-capture-modal")}V.defaultProps={caption:!1};var W=(0,d.forwardRef)(V);t.default=W},98001:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=o.default.isRTL();return(0,d.jsx)("div",{className:(0,i.default)(u.container),children:(0,d.jsx)(l.FlexRow,{align:"start",justify:"start",wrap:"wrap",children:e.categories.map((a=>(0,d.jsx)(s.default,{"aria-label":r.default._("Unselect category",null,{hk:"2Swokr"}),onClick:()=>e.onRemoveItem(a.id),label:a.localized_display_name,postfixIcon:t?void 0:"round-x-inv",prefixIcon:t?"round-x-inv":void 0,xstyle:u.chip},a.id.toString())))})})};var i=n(a(94184)),r=n(a(48360)),s=(n(a(56720)),n(a(72332))),l=a(29623),o=n(a(43725)),d=a(85893);const u={container:{paddingTop:"b7n2qyd4",paddingEnd:"iffbo4e8",paddingBottom:"s8gyl5p1",paddingStart:"khscay3k",backgroundColor:"sjyhwr5o",borderTop:"dl47i6rc"},chip:{marginTop:"dj1c3cmq",marginEnd:"bugiwsl0",marginBottom:"mpdn4nr2",marginStart:"svoq16ka"}}},30730:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{handleContinue:t}=e,a=r.default._("WhatsApp Communities",null,{hk:"3cIFaR"}),n=(0,m.jsx)(f.default,{name:"communities-nux"}),v=r.default._("Bring your groups together",null,{hk:"2edzUL"}),x=(0,m.jsx)(f.default,{name:"triple-dots",width:22,height:22}),C=r.default._("Add the groups you manage to one place for easy access",null,{hk:"3GZzuA"}),_=r.default._("Reach everyone at once",null,{hk:"1BTWRb"}),S=r.default._("Send announcements to all members and keep them updated",null,{hk:"2Rn4y9"}),y=(0,m.jsx)(f.default,{name:"announcement-speaker",width:22,height:22});return(0,m.jsxs)(l.default,{children:[(0,m.jsx)(d.DrawerHeader,{title:r.default._("New community",null,{hk:"23nE9d"}),type:d.DRAWER_HEADER_TYPE.LARGE}),(0,m.jsxs)(o.default,{children:[(0,m.jsxs)(u.default,{animation:!1,className:(0,s.default)(g.main),children:[(0,m.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,m.jsx)(c.FlexItem,{xstyle:g.badge,children:n})}),(0,m.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,m.jsx)(p.TextHeader,{xstyle:g.header,size:"24",color:"dark",weight:"bold",children:a})}),(0,m.jsxs)("div",{className:(0,s.default)(g.infoArea),children:[(0,m.jsx)(c.FlexColumn,{xstyle:g.iconColumn,children:x}),(0,m.jsxs)(c.FlexColumn,{xstyle:g.textArea,children:[(0,m.jsx)(p.TextHeader,{theme:"title",children:v}),(0,m.jsx)(p.TextParagraph,{theme:"muted",xstyle:g.subText,children:C})]})]}),(0,m.jsxs)("div",{className:(0,s.default)(g.infoArea),children:[(0,m.jsx)(c.FlexColumn,{xstyle:g.iconColumn,children:y}),(0,m.jsxs)(c.FlexColumn,{xstyle:g.textArea,children:[(0,m.jsx)(p.TextHeader,{theme:"title",children:_}),(0,m.jsx)(p.TextParagraph,{theme:"muted",xstyle:g.subText,children:S})]})]})]}),(0,m.jsx)("div",{className:(0,s.default)(g.nextButton),children:(0,m.jsx)(h.Round,{a8nText:"create-group-btn",onClick:(0,i.default)(t),children:(0,m.jsx)(f.default,{name:"arrow-forward"})})})]})]})};var i=n(a(51463)),r=n(a(48360)),s=n(a(56720)),l=n(a(60453)),o=n(a(69637)),d=a(94790),u=n(a(33308)),c=a(29623),h=a(82857),f=n(a(23217)),p=a(13923),m=a(85893);const g={main:{paddingBottom:"lnhl94cj"},nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"fwm24tzf",marginTop:"mnhq3yws",textAlign:"qfejxiq4"},badge:{borderTopStartRadius:"boajuire",borderTopEndRadius:"o93wvyfv",borderBottomEndRadius:"i5w8n1e6",borderBottomStartRadius:"cnpay6qi",color:"qiqvuef5",fontSize:"rwfn434h",marginTop:"rek1qe2c",paddingTop:"eujn52yf",paddingEnd:"abxuf49s",paddingBottom:"ckm995li",paddingStart:"mhcwslh8",textTransform:"ofejerhi"},header:{marginTop:"rek1qe2c",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",width:"gha8fw27",textAlign:"qfejxiq4"},infoArea:{display:"p357zi0d",marginTop:"mnhq3yws",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",width:"ruf70zuo"},textArea:{paddingStart:"bmj4fdax"},subText:{paddingTop:"jvpa774f"},iconColumn:{paddingTop:"tspiaou6"}}},49658:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(29521)),r=n(a(99964)),s=n(a(45120)),l=n(a(52013)),o=n(a(94184)),d=n(a(48360)),u=a(67294),c=n(a(56720)),h=a(86945),f=a(69951),p=a(88102),m=a(19380),g=n(a(35487)),v=n(a(60453)),x=n(a(69637)),C=a(94790),_=a(85600),S=n(a(44942)),y=n(a(30855)),j=n(a(43725)),E=n(a(48690)),T=n(a(53153)),I=a(82857),b=a(52596),w=n(a(23217)),k=a(13923),P=a(50452),M=n(a(41956)),L=a(85893);const A={search:{paddingTop:"mw9hwy0h",paddingEnd:"ixsqo53d",paddingBottom:"ekpn4oxx",paddingStart:"iy3dfvyp",marginTop:"s15egc35",marginEnd:"r67mms0c",marginBottom:"pel5o5rz",marginStart:"m0ig7u5t",backgroundColor:"ihvf49ua"},inputArea:{display:"l7jjieqr",width:"ln8gz9je",height:"bvcnfjzh",paddingTop:"ppypbuwx",paddingEnd:"f9ovudaz",paddingBottom:"s8gyl5p1",paddingStart:"gx1rr48f",marginTop:"tt8xd2xn",marginEnd:"jnwc1y2a",marginBottom:"mpdn4nr2",marginStart:"svoq16ka",fontSize:"bze30y65",lineHeight:"jgi8eev7",color:"mfzfak1c",verticalAlign:"fewfhwl7",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderBottom:"thn59n0e",borderStart:"nsmrnv0a",outline:"gk6igrwd"},inputLine:{position:"g0rxnol2",width:"ln8gz9je",minHeight:"g4oj0cdv",maxHeight:"f0mh0h6e",paddingTop:"n1yiu2zv",paddingEnd:"f9ovudaz",paddingBottom:"przvwfww",paddingStart:"mjn2akup",overflowY:"ag5g9lrv",fontSize:"bze30y65",fontWeight:"e1gr2w1z",lineHeight:"htjsae3x",backgroundColor:"thr4l2wc",borderTop:"q4zabkcz",borderEnd:"jkanexlp",borderStart:"nsmrnv0a",borderBottom:"ob9ouq0z",outline:"gk6igrwd",transition:"qbtd8e50"},drawerSection:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"},inputAreaSizer:{position:"snyj76hw",visibility:"kojwoqec"},contacts:{position:"g0rxnol2",flexGrow:"ggj6brxn",flexShrink:"m0h2a7mj",flexBasis:"l07amlnk",overflowX:"gfz4du6o",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},paragraph:{paddingTop:"b8cdf3jl",paddingEnd:"h5uqwbaf",paddingBottom:"q1tx93la",paddingStart:"kjjye8e3",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7",textAlign:"qfejxiq4",color:"pm5hny62",backgroundColor:"ihvf49ua",borderBottom:"daad4uqs"}};var O=(0,u.forwardRef)((e=>{const t=(0,P.genId)("max_subgroup_toast"),a=(0,h.getABPropConfigValue)("parent_group_link_limit"),[n,O]=(0,u.useState)(""),[D,R]=(0,u.useState)(e.addedExistingGroups),N=(0,u.useRef)(new y.default),F=(0,u.useRef)(),B=(0,u.useRef)();(0,u.useEffect)((()=>{l.default.focus(B.current)}));const U=()=>{s.default.shouldIndicateFocus(),l.default.focus(B.current)},H=()=>{e.onSubmit(D)},G=(n,i)=>{(n=>{if(D.length+e.newGroupsCount>=a){const e=d.default._({"*":"Can't add more than {max_subgroup_count} subgroups",_1:"Can't add more than 1 subgroup"},[d.default._plural(a,"max_subgroup_count")],{hk:"2NnMgd"});p.Cmd.openToast((0,L.jsx)(P.Toast,{msg:e,id:t}))}else R([...D,n]),O("")})(i)};let V;D.length>0&&(V=(0,L.jsx)(I.Round,{a8nText:"group-participants-btn",onClick:H,children:(0,L.jsx)(w.default,{name:"arrow-forward",directional:!0})}));const W=(()=>{const e=m.ContactCollection.getGroupContacts().filter((e=>{var t,a;const n=null===(t=f.ChatCollection.get(e.id.toString()))||void 0===t||null===(a=t.groupMetadata)||void 0===a?void 0:a.participants;return null!=n&&n.iAmAdmin()})),t=(0,i.default)(e,D,((e,t)=>e.id===t.id));if(!n)return t;const a=j.default.accentFold(n),r=(0,E.default)(a);return t.filter((e=>e.searchMatch(a,r)))})();let z;return z=0===W.length?(0,L.jsx)(_.SearchGroups,{}):(0,L.jsx)(g.default,{ref:F,flatListController:N.current,contacts:W,onClick:G,onFocusSearch:U,showPersonGroupDivisionHeader:!0,isCommunityCreation:!0,disabled:D.length+e.newGroupsCount>=a}),(0,L.jsxs)(v.default,{children:[(0,L.jsx)(C.DrawerHeader,{title:d.default._("Add existing groups {groupcount}",[d.default._param("groupcount",`(${D.length+e.newGroupsCount}/${a})`)],{hk:"QBiOr"}).toString(),type:C.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,L.jsxs)(x.default,{children:[(0,L.jsx)(k.TextParagraph,{xstyle:A.paragraph,children:d.default._("When you add a group youre an admin of, everyone in that group will be added to the community",null,{hk:"2zOsu8"})}),(0,L.jsx)("div",{className:(0,c.default)(A.search),children:(0,L.jsxs)("div",{className:(0,c.default)(A.inputLine),children:[(0,L.jsx)("div",{"data-list-scroll-container":!0,children:(0,L.jsx)(T.default,{theme:"list-names",contacts:D,onDelete:(e,t)=>{(e=>{R(D.filter((t=>!e.id.equals(t.id))))})(t)},onFocusSearch:U})}),(0,L.jsx)("input",{"data-a8n":r.default.key("inputarea"),className:(0,o.default)((0,c.default)(A.inputArea),b.SELECTABLE_INPUT_CSS_CLASS),ref:B,placeholder:d.default._("Type group name",null,{hk:"nTFxl"}),onChange:e=>O(e.target.value),value:n,type:"text"}),(0,L.jsx)("span",{className:(0,c.default)(A.inputAreaSizer),children:n})]})}),(0,L.jsx)(S.default,{className:(0,c.default)(A.contacts),flatListControllers:[N.current],children:z}),(0,L.jsx)(M.default,{transitionName:"btn",className:(0,c.default)(A.drawerSection),children:V})]})]})}));t.default=O},63232:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(51463)),r=n(a(45095)),s=n(a(48360)),l=a(67294),o=n(a(56720)),d=a(86945),u=n(a(39770)),c=n(a(44356)),h=a(88102),f=n(a(52665)),p=a(88984),m=n(a(60453)),g=n(a(69637)),v=a(94790),x=n(a(33308)),C=a(47915),_=n(a(44942)),S=n(a(30855)),y=n(a(17815)),j=n(a(63928)),E=a(57224),T=n(a(26959)),I=a(82857),b=n(a(52711)),w=n(a(23217)),k=n(a(1784)),P=n(a(83800)),M=a(85893);const L={addGroupButton:{paddingBottom:"a15vwmim",marginTop:"o9i7y497"},panelBody:{zIndex:"jnl3jror",display:"p357zi0d",flexDirection:"f8m0rgwh",flexGrow:"ggj6brxn",overflowY:"ag5g9lrv",backgroundColor:"ihvf49ua"},nextButton:{zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4",animationName:"s0bejz76",animationDuration:"oauresqk",animationTimingFunction:"pqvv99ib"},roundIcon:{height:"brqbuz94",width:"nfc7olq2",overflowX:"gfz4du6o",overflowY:"r7fjleex"},groupIcon:{height:"ppled2lx",width:"ln8gz9je"}},A=(0,M.jsx)(b.default,{children:(0,M.jsx)(w.default,{name:"link",directional:!0})}),O=(0,M.jsx)(b.default,{children:(0,M.jsx)(w.default,{name:"broadcast",directional:!0,height:24,width:24})});var D=(0,l.forwardRef)(((e,t)=>{const a=(0,d.getABPropConfigValue)("parent_group_link_limit"),n=(0,l.useRef)(null),D=(0,l.useRef)(new S.default),R=(0,P.default)(e.handleCreateCommunity),N=(0,l.useMemo)((()=>(0,i.default)((()=>{R()}))),[R]),F=e.groups.map((e=>{const{subject:t,full:a=null,id:n=null,tempId:i=null,participants:l=null}=e;let d,u;null!=n?(d=(0,M.jsx)(p.DetailImage,{id:n}),null!=l&&(u=(0,y.default)(l))):(d=null!=a?(0,M.jsx)("img",{src:a,alt:"Group icon",className:(0,o.default)(L.groupIcon)}):(0,M.jsx)(w.default,{name:"default-group",xstyle:L.groupIcon,className:T.default.svgInnerStyles}),u=s.default._("You created group {subject}",[s.default._param("subject",t)],{hk:"ywrwt"}));return{itemKey:(0,r.default)(null!=i?i:null==n?void 0:n.toString(),"tempId ?? id?.toString()"),name:e.subject,icon:(0,M.jsx)(b.default,{xstyle:L.roundIcon,children:d}),secondary:u}}));F.unshift({itemKey:e.name,name:e.name,icon:O,secondary:s.default._("Only admins can send messages",null,{hk:"3DS73V"})});const B=()=>{h.Cmd.openModal((0,M.jsx)(f.default,{onOK:()=>h.Cmd.closeModal(),children:s.default._("Limit of {max_subgroups} groups reached.",[s.default._param("max_subgroups",a.toString())],{hk:"3SISVh"})}))};return(0,l.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.focus()},getElement:()=>n.current}))),(0,M.jsxs)(m.default,{children:[(0,M.jsx)(v.DrawerHeader,{title:s.default._("Add groups {groupcount}",[s.default._param("groupcount",`(${e.groups.length}/${a})`)],{hk:"377oSY"}),type:v.DRAWER_HEADER_TYPE.LARGE,onBack:e.handleBack}),(0,M.jsxs)(g.default,{children:[(0,M.jsxs)(x.default,{children:[(0,M.jsx)("div",{"data-list-scroll-offset":!0,children:(0,M.jsx)("div",{className:(0,o.default)(L.addGroupButton),ref:n,children:(0,M.jsx)(c.default,{image:A,primary:s.default._("Create new group",null,{hk:"2hKtRR"}),onClick:()=>{e.groups.length>=a?B():e.handleNewGroupFlow()}})})}),(0,M.jsx)("div",{"data-list-scroll-offset":!0,children:(0,M.jsx)("div",{className:(0,o.default)(L.addGroupButton),children:(0,M.jsx)(c.default,{image:A,primary:s.default._("Add existing group",null,{hk:"2bpZFd"}),onClick:()=>{if(e.groups.length>=a)B();else{if(null!=j.default.findFirst((e=>e.participants.iAmAdmin())))e.handleExistingGroupFlow();else{const t=(0,M.jsx)(u.default,{type:"secondary",onClick:()=>h.Cmd.closeModal(),children:s.default._("Cancel",null,{hk:"w74ws"})},0),a=(0,M.jsx)(u.default,{type:"primary",onClick:()=>{h.Cmd.closeModal(),e.handleNewGroupFlow()},children:s.default._("Create group",null,{hk:"24Den6"})},1);h.Cmd.openModal((0,M.jsx)(E.Modal,{actions:[t,a],children:(0,M.jsx)("div",{children:s.default._("You can only add existing groups youre an admin of. Youre not currently an admin of any groups, but you can create a new group.",null,{hk:"49xYpU"})})}))}}}})})})]}),(0,M.jsx)(x.default,{title:s.default._("GROUPS IN THIS COMMUNITY",null,{hk:"1CM3tv"}),children:(0,M.jsx)(_.default,{flatListControllers:[D.current],className:(0,o.default)(L.panelBody),id:"pane-side",children:(0,M.jsx)(C.FlatList,{flatListController:D.current,direction:"vertical",data:F,renderItem:t=>t.itemKey===e.name?(0,M.jsx)(c.default,{primary:t.name,image:t.icon,secondary:t.secondary}):(0,M.jsx)(c.default,{primary:t.name,image:t.icon,secondary:t.secondary,detail:(0,M.jsx)(k.default,{onClick:()=>{return a=t.itemKey,void e.handleRemoveGroup(a);var a},children:(0,M.jsx)(w.default,{name:"x"})})})})})}),(0,M.jsx)("div",{className:(0,o.default)(L.nextButton),children:(0,M.jsx)(I.Round,{a8nText:"create-group-btn",onClick:N,children:(0,M.jsx)(w.default,{name:"arrow-forward"})})})]})]})}));t.default=D},98600:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(51463)),r=n(a(99964)),s=n(a(48360)),l=a(67294),o=n(a(56720)),d=n(a(60453)),u=n(a(69637)),c=a(94790),h=n(a(33308)),f=n(a(66797)),p=a(33646),m=n(a(43556)),g=a(82857),v=a(64551),x=n(a(23217)),C=a(90011),_=n(a(41956)),S=a(85893);const y={marginTop:"ignnouf6",marginEnd:"bcfko8ch",marginBottom:"bibl1e27",marginStart:"dl2ettod"},j={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"};var E=(0,l.forwardRef)(((e,t)=>{var a,n;const E=(0,l.useRef)(null),T=(0,l.useRef)(null),[I,b]=(0,l.useState)(null!==(a=e.name)&&void 0!==a?a:""),[w,k]=(0,l.useState)(null!==(n=e.description)&&void 0!==n?n:""),[P,M]=(0,l.useState)(e.imgBlob);(0,l.useEffect)((()=>{var e;null===(e=E.current)||void 0===e||e.restoreFocus()}),[]);const L=()=>{const t=(0,f.default)(I.trim());e.handleContinue(t,w,P)};(0,l.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.restoreFocus()},getElement:()=>T.current})));const A=I.trim().length>0,O=A?(0,S.jsx)("div",{className:(0,o.default)(j),children:(0,S.jsx)(g.Round,{a8nText:"create-group-btn",onClick:(0,i.default)(L),children:(0,S.jsx)(x.default,{name:"arrow-forward"})})}):null;return(0,S.jsxs)(d.default,{children:[(0,S.jsx)(c.DrawerHeader,{title:s.default._("New community",null,{hk:"23nE9d"}),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:e.handleBack}),(0,S.jsxs)(u.default,{children:[(0,S.jsxs)(h.default,{animation:!1,children:[(0,S.jsx)("div",{className:(0,o.default)(y),children:(0,S.jsx)(p.PhotoPickerLoadable,{type:m.default.COMMUNITY,attachToChat:!1,startImage:P,onImageSet:(e,t)=>{M(t)}})}),(0,S.jsx)("div",{"data-a8n":r.default.key("community-subject"),className:(0,o.default)(y),ref:T,children:(0,S.jsx)(C.TextInput,{ref:e=>{E.current=e},value:I,maxLength:25,showRemaining:!0,onChange:e=>{b(e)},placeholder:s.default._("Community Name",null,{hk:"3T8nEG"}),onEnter:A?(0,i.default)(L):()=>{},supportsEmoji:!0})}),(0,S.jsx)("div",{"data-a8n":r.default.key("community-description"),className:(0,o.default)(y),children:(0,S.jsx)(C.TextInput,{value:w,maxLength:v.ServerProps.groupDescLength,showRemaining:!0,onChange:e=>{k(e)},placeholder:s.default._("Community Description",null,{hk:"2WZhJM"}),onEnter:A?(0,i.default)(L):()=>{}})})]}),(0,S.jsx)(_.default,{transitionName:"btn",children:O})]})]})}));t.default=E},81411:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(45120)),r=n(a(52013)),s=a(67294),l=n(a(22245)),o=n(a(44356)),d=a(19380),u=n(a(71889)),c=n(a(35487)),h=n(a(60453)),f=n(a(69637)),p=a(94790),m=a(85600),g=n(a(30855)),v=a(57701),x=a(55414),C=n(a(43725)),_=n(a(48837)),S=n(a(48690)),y=n(a(52711)),j=n(a(23217)),E=n(a(81559)),T=a(85893);var I=(0,s.forwardRef)(((e,t)=>{const{title:a,onBack:n,onClick:I,onNewGroup:b,onNewCommunity:w}=e,[k,P]=(0,s.useState)(""),M=(0,s.useRef)(),L=(0,s.useRef)(),A=(0,s.useRef)(),O=(0,s.useMemo)((()=>d.ContactCollection.frequentContacts("message")),[d.ContactCollection.length]),D=Boolean(k),R=(0,s.useMemo)((()=>D?[]:O),[D,O]),[N]=(0,s.useState)((()=>new g.default)),F=(0,s.useCallback)((e=>{d.ContactCollection.ensureSorted();const t="string"==typeof e?e:k;if(!t)return d.ContactCollection.getFilteredContacts();const a=d.ContactCollection.getFilteredContacts().concat(d.ContactCollection.filter((e=>e.name&&!e.isMe&&!e.isPSA&&!e.isWAContact))),n=C.default.accentFold(t),i=(0,S.default)(n);return a.filter((function(e){return e.searchMatch(n,i)}))}),[k]);(0,s.useEffect)((()=>{r.default.focus(M.current)}),[]);const B=(0,s.useCallback)((()=>{i.default.shouldIndicateFocus(),r.default.focus(M.current)}),[]),U=(0,s.useCallback)((e=>{const t=L.current;null!=t&&(e.preventDefault(),e.stopPropagation(),i.default.shouldIndicateFocus(),t.focusFirst())}),[]),H=(0,E.default)((e=>P(e)),100),G=(0,s.useCallback)((e=>{A.current=e,H(e)}),[H]),V=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=R[0];if(t)return i.default.shouldIndicateFocus(),void I(e,t);const a=F(A.current)[0];a&&(i.default.shouldIndicateFocus(),I(e,a))}),[I,F,R]);let W,z,q;const K=F();if(W=0===K.length?k?(0,m.SearchWithKeyword)(k):(0,m.SearchWithoutKeyword)():(0,T.jsx)(c.default,{ref:L,contacts:K,flatListController:N,frequentContacts:R,onClick:I,onFocusSearch:B,showPersonGroupDivisionHeader:!!k}),!k){const e=(0,T.jsx)(y.default,{children:(0,T.jsx)(j.default,{name:"new-group",directional:!0})});z=(0,T.jsx)("div",{"data-list-scroll-offset":!0,children:(0,T.jsxs)("div",{className:u.default.newGroupButton,children:[(0,T.jsx)(o.default,{image:e,primary:C.default.t(1744),onClick:b}),(0,T.jsx)(l.default,{})]})}),q=(0,v.communitiesEnabled)()?(0,T.jsx)("div",{"data-list-scroll-offset":!0,children:(0,T.jsxs)("div",{className:u.default.newGroupButton,children:[(0,T.jsx)(o.default,{image:e,primary:C.default.t(938),onClick:w}),(0,T.jsx)(l.default,{})]})}):null}return(0,T.jsxs)(h.default,{ref:t,children:[(0,T.jsx)(p.DrawerHeader,{title:a,type:p.DRAWER_HEADER_TYPE.LARGE,onBack:n}),(0,T.jsx)(x.HotKeys,{handlers:{down:U},children:(0,T.jsx)(_.default,{ref:M,onSearch:G,onEnter:V,placeholder:C.default.t(1191)})}),(0,T.jsxs)(f.default,{flatListControllers:[N],children:[z,q,W]})]},"contact-modal")}));t.default=I},67873:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,P.useModelValues)(e.msg,["id","star","type","isGif","isViewOnce","labels","numTimesForwarded","isFrequentlyForwarded"]),a=(0,M.default)(),n=(0,b.default)(),D=(0,L.default)(),R=(0,i.useRef)(null),N=(0,i.useRef)(null),F=(0,w.default)((()=>new x.default.UiAction({uiActionType:x.default.UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0}))),[B,U]=(0,i.useState)(void 0),[H,G]=(0,i.useState)(!1);(0,k.useListener)(null==B?void 0:B.played,["add","remove"],n),(0,k.useListener)(null==B?void 0:B.read,["add","remove"],n),(0,k.useListener)(null==B?void 0:B.delivery,["add","remove"],n),(0,k.useListener)(t,["remove"],((e,t)=>{t===C.MsgCollection&&(null==a||a.uie.requestDismiss())})),(0,i.useEffect)((()=>{var e;_.MsgInfoCollection.find(t.id).then((e=>{D.aborted||U(e)})).catch((()=>{G(!0),s.Cmd.openToast((0,O.jsx)(I.Toast,{msg:g.default.t(864),id:(0,I.genId)("msg_info_failed")}))}));const a=null===(e=R.current)||void 0===e?void 0:e.container;t.type===l.default.MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight);const n=F.current;n&&(n.markUiActionT(),n.commit(),F.current=void 0)}),[]);const V=()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.getMsgComponentRef()};let W,z,q;if(B){var K,Y,Q;const e=[];let a,n,i;const r=t.type===l.default.MSG_TYPE.PTT;var X;if(r||t.isViewOnce)z=r?g.default.t(837):g.default.t(839),a=B.played.head(),n=null===(X=a)||void 0===X?void 0:X.t,i=(0,O.jsx)("span",{className:d.default.icon,children:(0,O.jsx)(T.default,{name:r?"status-ptt":"view-once-viewed",className:d.default.statusBlue})}),e.push((0,O.jsx)(o.default,{title:r?g.default.t(832):g.default.t(841),t:n,icon:i},"played"));a=B.read.head(),n=null===(K=a)||void 0===K?void 0:K.t,i=(0,O.jsx)("span",{className:d.default.icon,children:(0,O.jsx)(T.default,{name:"status-dblcheck",className:d.default.ack})}),z=null!==(Y=z)&&void 0!==Y?Y:g.default.t(834),e.push((0,O.jsx)(o.default,{title:z,t:n,icon:i},"read")),a=B.delivery.head(),n=null===(Q=a)||void 0===Q?void 0:Q.t,i=(0,O.jsx)("span",{className:d.default.icon,children:(0,O.jsx)(T.default,{name:"status-dblcheck"})}),e.push((0,O.jsx)(o.default,{title:g.default.t(830),t:n,icon:i},"delivery")),!j.ServerProps.hfmStringChanges&&t.numTimesForwarded>0&&!t.isFrequentlyForwarded&&e.push((0,O.jsx)(S.default,{msg:t},"forward")),W=(0,O.jsx)(f.default,{theme:"padding",children:e})}B||H||(q=(0,O.jsx)("div",{className:d.default.spinner,children:(0,O.jsx)(E.Spinner,{size:50,stroke:4})},"spinner"));let Z=null;t.labels&&t.labels.length>0&&(0,p.canDisplayLabel)()&&(Z=(0,O.jsx)(f.default,{theme:"padding",children:(0,O.jsx)(m.default,{labels:t.labels})}));return(0,O.jsxs)(u.default,{theme:"striped",children:[(0,O.jsx)(h.DrawerHeader,{title:g.default.t(829),type:h.DRAWER_HEADER_TYPE.SMALL,onCancel:()=>{null==a||a.uie.requestDismiss()}}),(0,O.jsx)(y.default,{ref:R,chatPreference:r.default.assertGet("defaultPreference"),children:(0,O.jsx)(A.Wrapper,{msg:t,ref:N,displayType:l.default.DISP_TYPE.MSG_INFO,isMsgVisible:function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===t.id&&(!!a||V())},position:v.MsgPosition.END,onProductClick:e.onProductClick})}),(0,O.jsxs)(c.default,{children:[Z,(0,O.jsxs)("div",{className:d.default.body,children:[q,W]})]})]},"message-info-modal")};var i=a(67294),r=n(a(66034)),s=a(88102),l=n(a(69618)),o=n(a(56790)),d=n(a(13550)),u=n(a(60453)),c=n(a(69637)),h=a(94790),f=n(a(33308)),p=a(57701),m=n(a(77577)),g=n(a(43725)),v=a(87931),x=n(a(11339)),C=a(59871),_=a(17972),S=n(a(82678)),y=n(a(1697)),j=a(64551),E=a(11054),T=n(a(23217)),I=a(50452),b=n(a(59909)),w=n(a(59552)),k=a(19529),P=a(49082),M=n(a(59147)),L=n(a(38080)),A=a(58827),O=a(85893)},42769:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{supportTag:t,onSend:a,onFailure:n,onCancel:P,onEmail:M}=e,L=(0,I.default)(),[A,O]=(0,l.useState)(""),[D,R]=(0,l.useState)(null),[N,F]=(0,l.useState)(!0),[B,U]=(0,l.useState)(!1),H=(0,l.useRef)(null);(0,l.useEffect)((()=>{var e;null===(e=H.current)||void 0===e||e.restoreFocus()}),[]);const G=e=>e.length>=h.default.CONTACT_US_MIN_DESC_LENGTH,V=()=>{if(G(A)){let e=(0,i.default)((0,i.default)({},T.UA.parser.getResult()),{},{"Device ID":(0,g.assertGetMe)()});t&&(e=(0,i.default)((0,i.default)({},e),{},{context:t}));const s=N?JSON.stringify(e):void 0;U(!0),null==a||a({description:A}),__LOG__(2)`InAppSupport: Sending support request with deviceInfo=${N}:${null!=s?s:"n/a"}`,(0,_.default)((0,S.sendSupportRequest)(A,s),L).then((e=>{null!=e.message?(u.Cmd.closeModal(),u.Cmd.openToast((0,b.jsx)(E.Toast,{msg:C.default.t(1316),id:(0,E.genId)()}))):n&&n({description:A})})).catch((0,r.catchAbort)((()=>{}))).finally((()=>{U(!1)}))}else R(C.default.t(1247))},W=()=>{null==P||P(),u.Cmd.closeModal()},z=()=>{M&&(u.Cmd.closeModal(),M({description:A}))},q=e=>{O(e)},K=()=>{F(!N)},Y=e=>{e.stopPropagation()},Q={enter:Y};B&&(Q.esc=Y);if(v.GK.supportsFeature(v.GK.F.MD_BACKEND)){const e="contact-us-include-device";return(0,b.jsx)(c.default,{title:C.default.t(1317),okDisabled:!G(A)||B,okSpinner:B,okText:C.default.t(1231),onOK:V,onCancel:B?void 0:W,children:(0,b.jsx)(x.HotKeys,{handlers:Q,children:(0,b.jsxs)(m.FlexColumn,{align:"stretch",children:[(0,b.jsx)(j.TextInput,{error:D,maxLength:w,onChange:q,placeholder:C.default.t(1315),ref:H,value:A}),(0,b.jsx)(m.FlexItem,{xstyle:k.deviceInfo,grow:1,children:(0,b.jsx)(y.TextParagraph,{theme:"muted-small",children:C.default.t(1313)})}),(0,b.jsxs)(m.FlexRow,{children:[(0,b.jsx)(m.FlexItem,{xstyle:k.deviceInfoLabel,grow:1,children:(0,b.jsx)("label",{htmlFor:e,children:(0,b.jsxs)(y.TextParagraph,{theme:"plain",children:[C.default.t(1314)," ",(0,b.jsx)(f.ExternalLink,{href:(0,p.getSupportChatFaqUrl)(),children:C.default.t(689)})]})})}),(0,b.jsx)(m.FlexItem,{xstyle:k.deviceInfoCheckbox,grow:0,children:(0,b.jsx)(o.CheckBox,{checked:N,id:e,onChange:K})})]}),(0,b.jsx)(m.FlexRow,{children:(0,b.jsx)(m.FlexItem,{xstyle:k.emailLink,grow:1,children:(0,b.jsx)(d.default,{onClick:z,children:s.default._("Get support via email",null,{hk:"3vajRd"})})})})]})})})}return(0,b.jsx)(c.default,{okText:C.default.t(1764),onOK:()=>u.Cmd.closeModal(),title:C.default.t(1317),children:(0,b.jsx)(y.TextParagraph,{theme:"plain",children:C.default.t(1318)})})};var i=n(a(81109)),r=a(89385),s=n(a(48360)),l=a(67294),o=(n(a(56720)),a(16593)),d=n(a(99360)),u=a(88102),c=n(a(52665)),h=n(a(69618)),f=a(12591),p=a(96384),m=a(29623),g=a(99234),v=a(7293),x=a(55414),C=n(a(43725)),_=n(a(84644)),S=a(15194),y=a(13923),j=a(90011),E=a(50452),T=a(65127),I=n(a(38080)),b=a(85893);const{CONTACT_US_MAX_DESC_LENGTH:w}=h.default,k={deviceInfo:{marginBottom:"t4zgqcuo",marginTop:"opp68qpq"},deviceInfoCheckbox:{minWidth:"r7yn1a4o"},deviceInfoLabel:{paddingEnd:"l9g3jx6n"},emailLink:{marginTop:"opp68qpq"}}},38322:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(22683),r=a(88102),s=a(57701),l=n(a(43725)),o=a(72472),d=a(40015),u=a(31019),c=a(13923),h=a(49082),f=n(a(152)),p=a(85893);var m=e=>{const t=(0,h.useModelValues)(e.mute,["isMuted","expiration","isCallMuted","callExpiration"]),a=(0,h.useModelValues)(e.reactionsMute,["isMuted","expiration","isCallMuted","callExpiration"]),[n,m]=(0,f.default)((()=>o.MuteCollection.getGlobalNotifications()),(e=>o.MuteCollection.setGlobalNotifications(e))),[g,v]=(0,f.default)((()=>o.MuteCollection.getOutgoingMessageSound()),(e=>o.MuteCollection.setOutgoingMessageSound(e))),[x,C]=(0,f.default)((()=>o.MuteCollection.getGlobalSounds()),(e=>o.MuteCollection.setGlobalSounds(e))),[_,S]=(0,f.default)((()=>o.MuteCollection.getGlobalCallRingtone()),(e=>o.MuteCollection.setGlobalCallRingtone(e))),[y,j]=(0,f.default)((()=>o.MuteCollection.getGlobalPreviews()),(e=>o.MuteCollection.setGlobalPreviews(e))),[E,T]=(0,f.default)((()=>o.MuteCollection.getCollapseMuted()),(e=>o.MuteCollection.setCollapseMuted(e))),I=()=>{r.Cmd.muteAll((0,u.unproxy)(a),!a.isMuted,!0)},b=[];let w;window.Notification&&(b.push((0,p.jsx)(d.SettingsCheckListItem,{a8nText:"option-desktop-notifications",id:"desktop-notifications",checked:n,onChange:m,children:l.default.t(983)},0)),b.push((0,p.jsxs)(d.SettingsCheckListItem,{a8nText:"options-msg-previews",disabled:!n,id:"msg-previews",checked:y,onChange:j,children:[l.default.t(987),(0,p.jsx)(c.TextDiv,{theme:"muted",children:l.default.t(988)})]},1)));const{expiration:k,callExpiration:P,isMuted:M,isCallMuted:L}=t;if((0,s.receiveReactionsEnabled)()){const{expiration:e,isMuted:t}=a;w=(0,p.jsxs)(d.SettingsCheckListItem,{a8nText:"option-reactions-mute-desktop-notifications",id:"reactions-mute-desktop-notifications",checked:t,onChange:I,children:[l.default.t(1358),t&&null!=e?(0,p.jsx)(c.TextDiv,{theme:"muted",children:i.Clock.untilStr(e)}):null]})}return(0,p.jsxs)(d.SettingsCheckList,{children:[(0,p.jsx)(d.SettingsCheckListItem,{a8nText:"option-sounds",id:"sounds",checked:x,onChange:C,children:l.default.t(992)}),undefined,undefined,b,undefined,w,(0,p.jsxs)(d.SettingsCheckListItem,{a8nText:"option-mute-desktop-notifications",id:"mute-desktop-notifications",checked:M,onChange:()=>{r.Cmd.muteAll((0,u.unproxy)(t),!t.isMuted,!1)},children:[l.default.t(1356),M&&null!=k?(0,p.jsx)(c.TextDiv,{theme:"muted",children:i.Clock.untilStr(k)}):null]}),null,null]})};t.default=m},54896:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,s.jsx)("div",{className:r.default.dropOverlay,children:(0,s.jsx)("div",{className:r.default.dropOverlayOutline,children:i.default._("Drag file here",null,{hk:"y9aHs"})})},"container")};var i=n(a(48360)),r=n(a(86088)),s=a(85893)},71520:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{rootRef:t,disabled:a,onClick:n,children:c}=e;const[h,f,p]=function(e){const[t,a]=(0,i.useState)(),[n,r]=(0,i.useState)(),[s,{isIntersecting:l}]=(0,o.default)({root:e,rootMargin:null!=t?`-${t.offsetHeight}px`:void 0});return(0,i.useEffect)((()=>{if(null!=e&&null!=t&&null!=n){if(l)t.style.removeProperty("right");else{const a=e.offsetWidth-(e.clientWidth+2*e.clientLeft);t.style.setProperty("right",`${a}px`)}n.style.setProperty("min-height",`${t.offsetHeight}px`)}}),[l,e,t,n]),[l,e=>{s(e),r(e)},a]}(t);return(0,d.jsx)("div",{ref:f,className:(0,r.default)(u.ctaPlaceholder),children:(0,d.jsx)(l.default,{onRef:p,xstyle:[h?null:u.ctaContainerSticky],theme:"sticky-button-section",children:(0,d.jsx)(s.default,{type:"primary",onClick:n,disabled:a,className:(0,r.default)(u.ctaButton),children:c})})})};var i=a(67294),r=n(a(56720)),s=n(a(39770)),l=n(a(33308)),o=n(a(6914)),d=a(85893);const u={ctaContainerSticky:{position:"ly2gu7o9",bottom:"jxacihee",left:"tukmaf4q",boxShadow:"th8ck7tu"},ctaButton:{display:"f804f6gw",marginBottom:"pel5o5rz"},ctaPlaceholder:{marginBottom:"brac1wpa"}}},21976:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.E2EChangeModal=function(e){const t=(0,l.useModelValues)(e.contact,["formattedShortName"]),a=s.default.t(1764),n=t.formattedShortName,d=s.default.t(1738,{contactName:n}),u=s.default.t(1737,{contactName:n});return(0,o.jsx)(r.default,{title:d,onOK:()=>i.Cmd.closeModal(),okText:a,children:u})};var i=a(88102),r=n(a(52665)),s=n(a(43725)),l=a(49082),o=a(85893)},50025:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EditImageDrawer=function(e){var t;const{attributionUrl:a,onRetake:n,retryText:I,onFinished:b}=e,w=(0,_.default)(),k=(0,i.useRef)(),P=(0,i.useRef)(null),M=(0,S.default)((()=>new f.default)),[L,A]=(0,i.useState)(!1),[O,D]=(0,i.useState)({width:500,height:361}),[R]=(0,i.useState)((()=>new d.default(e.img)));(0,y.useListener)(M.current,"change:isInitialized",(()=>{w()}));const N=(e,t)=>{var a;null===(a=k.current)||void 0===a||a.drawCanvas(e,t)},F=L?(0,E.jsx)("div",{className:o.default.btnSend,children:(0,E.jsx)(g.Round,{large:!0,onClick:()=>{var e,t;null===(t=k.current)||void 0===t||t.saveCanvas(),null===(e=P.current)||void 0===e||e.crop().then((e=>{let{thumb:t,full:a}=e;b(t,a),R.cleanUp()}))},children:(0,E.jsx)(v.default,{name:"checkmark-large"})})},"btn-send"):null;let B;M.current.isInitialized&&(B=(0,E.jsx)(m.default,{editedMedia:R,stage:M.current.stage,cropOverlay:M.current.cropOverlay,mediaContainer:M.current.mediaContainer,drawCanvas:N,ref:P}));const U=(0,E.jsx)(h.default,{className:o.default.mediaElement,editedMedia:R,mediaEditController:M.current,fitType:"cover",ref:k});let H;if(n){let e;switch(I){case T.NONE:e=null;break;case T.RETAKE:e=c.default.t(1178);break;case T.RESTART:default:e=c.default.t(1181)}H=(0,E.jsxs)("button",{className:o.default.retake,onClick:n,children:[(0,E.jsx)("div",{className:o.default.retakeIcon,children:(0,E.jsx)(v.default,{name:"return"})}),e]})}const G=a?(0,E.jsxs)("div",{className:o.default.attribution,children:[(0,E.jsx)(u.ExternalLink,{className:o.default.attributionLink,href:a,children:C.URL.hostname(a)}),(0,E.jsxs)("span",{children:[c.default.t(629),"",(0,E.jsx)(u.ExternalLink,{href:(0,x.getTosUrl)(),children:c.default.t(635)})]})]}):null,V=(0,E.jsxs)("div",{className:o.default.footer,children:[(0,E.jsx)(j.default,{transitionName:"btn",children:F}),G]}),W=null!==(t=e.imageSize)&&void 0!==t?t:{width:500,height:361};return(0,E.jsxs)(r.default,{theme:"edit",children:[(0,E.jsx)(l.DrawerHeader,{title:c.default.t(150),type:"offset",onCancel:e.onCancel,children:H}),(0,E.jsxs)(s.default,{overflow:"hidden",children:[(0,E.jsxs)("div",{className:o.default.mediaBody,children:[B,(0,E.jsx)("div",{className:o.default.containerBackground,children:(0,E.jsx)(j.default,{transitionName:"capture",children:(0,E.jsx)(p.default,{type:"cover",size:W,onObjectLoad:e=>{null!=e&&e instanceof HTMLElement&&(!O||O.width===e.clientWidth&&O.height===e.clientHeight||D({width:e.clientWidth,height:e.clientHeight}),L||A(!0))},children:U})})})]}),V]})]},"attach-edit-modal")},t.RETRY_OPTIONS=void 0;var i=a(67294),r=n(a(60453)),s=n(a(69637)),l=a(94790),o=n(a(51236)),d=n(a(12199)),u=a(12591),c=n(a(43725)),h=n(a(16144)),f=n(a(47739)),p=n(a(11791)),m=n(a(29958)),g=a(82857),v=n(a(23217)),x=a(73915),C=a(2541),_=n(a(59909)),S=n(a(59552)),y=a(19529),j=n(a(41956)),E=a(85893);const T={NONE:"none",RETAKE:"retake",RESTART:"restart"};t.RETRY_OPTIONS=T},12199:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(82492)),r=a(1063),s=a(2541);class l{constructor(e,t,a,n){this.updateEditData=e=>{this.saveEdits(),this.editData=(0,i.default)({},this.editData,e)},this.updateEditItems=(e,t)=>{this.saveEdits();const a=[];this.editData.items&&this.editData.items.forEach((e=>{e!==t&&a.push(e)})),a.push(e),this.editData.items=a},this.saveEdits=()=>{const e=new l(this.media,this.originalImage,this.editData,this.previous);this.previous=e},this.revertEdit=()=>{this.previous&&(this.editData=this.previous.editData,this.previous=this.previous.previous)},this.saveEditsFromCanvas=e=>{const t=e.toDataURL();this.editedImage||(this.editedImage=new Image),this.editedImage.src=t},this.exportEditedMedia=()=>{if(this.hasEdits()&&this.editedImage){const e=this.editedImage.src;return s.URL.dataURLtoFile(e)}return this.media instanceof File?this.media:(0,r.createFile)([this.media],"",{type:this.media.type})},this.hasEdits=()=>!!this.previous&&this.editedImage,this.cleanUp=()=>{window.URL.revokeObjectURL(this.originalImage.src)},this.media=e,t?this.originalImage=t:(this.originalImage=new Image,this.originalImage.src=window.URL.createObjectURL(e)),this.previous=n,this.editData={height:0,width:0,offsetX:0,offsetY:0,rotation:0,scale:1,items:[],baseItem:null},(0,i.default)(this.editData,a)}}t.default=l},16144:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(76304),r=a(29984),s=a(67294),l=n(a(95884)),o=n(a(11791)),d=n(a(76557)),u=n(a(84215)),c=a(85893);function h(e,t){const{mediaEditController:a,editedMedia:n,mediaPickerStatsLogger:h,activeMediaId:f}=e,p=(0,s.useRef)(null),m=(0,s.useRef)(null),g=(0,s.useRef)(null),v=(0,s.useRef)(null),[x,C]=(0,s.useState)({height:1,width:1}),[_,S]=(0,s.useState)(null),[y,j]=(0,s.useState)(null),E=(e,t)=>{if(!p.current)return;const s=p.current;t&&h&&h.logChange(f||-1,t);const l=n.editData,o=(e=>{let t;return _?t=_:(t=new i.Easel.Stage(e),t.enableMouseOver()),a.stage=t,t})(s);e&&(s.width=l.width,s.height=l.height),o.removeAllChildren(),null!=l.baseItem&&o.addChild(l.baseItem),l.items&&o.addChild(...l.items);const d=n.originalImage.naturalWidth,u=n.originalImage.naturalHeight;o.regX=d/2,o.regY=u/2,o.rotation=l.rotation,(0,r.isNonZeroNumber)(l.width)&&(0,r.isNonZeroNumber)(l.height)&&(o.x=l.width/2+l.scale*l.offsetX,o.y=l.height/2+l.scale*l.offsetY),o.scaleX=l.scale,o.scaleY=l.scale,o.update(),C({width:s.width,height:s.height}),S(o)},T=()=>{const e=n.editData;n.editedImage=null;const t=n.originalImage;if(e.width||e.height||(e.width=t.naturalWidth,e.height=t.naturalHeight),!e.baseItem){const a=new i.Easel.Bitmap(t);e.baseItem=a}E(!0)},I=()=>{E(!0);const e=p.current;e&&n.saveEditsFromCanvas(e)},b=e=>{e&&(e.children.forEach((e=>{e.removeAllEventListeners()})),e.removeAllEventListeners(),e.removeAllChildren(),e.enableMouseOver(0),e.clear())};(0,s.useEffect)((()=>{(()=>{const e=n.originalImage;e.complete?T():e.onload=T})(),j(m.current),v.current=new i.Easel.Stage(g.current),v.current.autoClear=!1,v.current.enableMouseOver(),m.current&&(a.mediaContainer=m.current),a.cropOverlay=v.current}),[]),(0,u.default)((()=>{const e=n.originalImage;e.complete||(e.onload=void 0),I(),b(_),b(v.current)}));const w=(e,t)=>{C({width:e,height:t})};(0,s.useImperativeHandle)(t,(()=>({saveCanvas:I,drawCanvas:E,updateCanvasSize:w})));const k=(0,c.jsx)("canvas",{ref:g,className:l.default.cropOverlay});return(0,c.jsx)("div",{className:e.className,ref:m,children:(0,c.jsxs)(o.default,{type:e.fitType||"scaleDown",size:x,children:[k,(0,c.jsx)(d.default,{ref:p,className:l.default.mediaViewerImg})]})})}var f=(0,s.forwardRef)(h);t.default=f},47739:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(11290);class i extends n.BaseModel{constructor(){super(...arguments),this.stage=(0,n.prop)(),this.cropOverlay=(0,n.prop)(),this.mediaContainer=(0,n.prop)(),this.isInitialized=(0,n.derived)(this._isInitialized,["stage","cropOverlay","mediaContainer"])}_isInitialized(){return!!this.stage&&!!this.cropOverlay&&!!this.mediaContainer}clearStage(e){e&&(e.children.forEach((e=>{e.removeAllEventListeners()})),e.removeAllEventListeners(),e.removeAllChildren(),e.clear())}}var r=(0,n.defineModel)(i);t.default=r},29958:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(48926)),s=a(76304),l=a(67294),o=i(a(69618)),d=n(a(36638)),u=i(a(46475)),c=i(a(23217)),h=a(19529),f=a(85893);const p=1.1;function m(e,t){const{editedMedia:a,cropOverlay:n,drawCanvas:i}=e,m=(0,l.useRef)(0),g=e=>{const t=m.current,n=a.editData,i=Math.max(2*t/n.width,2*t/n.height),r=Math.max(e,i);if(n.width*e<t||n.height*e<t)return!1;const s=-t/r+n.width/2,l=t/r-n.width/2,o=-t/r+n.height/2,d=t/r-n.height/2;return{scale:r,offsetX:Math.min(Math.max(n.offsetX,l),s),offsetY:Math.min(Math.max(n.offsetY,d),o)}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=a.editData,n=0!==e?e:p,r=g(t.scale*n);r&&(t.scale=r.scale,t.offsetX=r.offsetX,t.offsetY=r.offsetY,i())},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=a.editData,n=0!==e?e:p,r=g(t.scale/n);r&&(t.scale=r.scale,t.offsetX=r.offsetX,t.offsetY=r.offsetY,i())};(0,h.useListener)(n.canvas,"mousewheel",(e=>{e.deltaY>0?v(1.02):x(1.02)}));const C=(e,t)=>{const n=a.editData,r=e.stageX-t.x,s=e.stageY-t.y,l=n.offsetX+r/n.scale,o=n.offsetY+s/n.scale,d=((e,t)=>{const n=m.current,i=a.editData,r=(e-i.width/2)*i.scale,s=(e+i.width/2)*i.scale,l=(t+i.height/2)*i.scale;return{x:r<-n&&s>n,y:(t-i.height/2)*i.scale<-n&&l>n}})(l,o);d.x&&(n.offsetX=l),d.y&&(n.offsetY=o),t.x=e.stageX,t.y=e.stageY,i()};(0,l.useEffect)((()=>{a.saveEdits();const e=a.editData,t=n.canvas;let i;i=e.baseItem?e.baseItem.getBounds():{width:0,height:0},t.style.display="block",t.width=i.width,t.height=i.height;const r=new s.Easel.Shape;r.graphics.beginFill("rgba(0, 0, 0, 0.1)"),r.graphics.drawRect(0,0,i.width,i.height),r.regX=i.width/2,r.regY=i.height/2,r.x=i.width/2,r.y=i.height/2,r.on("mousedown",(e=>{const t={x:e.stageX,y:e.stageY},a=r.on("pressmove",C,null,!1,t);r.on("pressup",(()=>{r.off("pressmove",a)}),null,!0)})),r.cursor="move";const l=t.getContext("2d"),o=t.width,d=t.height,u=o/d>500/361?d/361:o/500;m.current=Math.min(361,500)/2*.9*u;const c=m.current;l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,0,o,d),l.globalCompositeOperation="destination-out",l.beginPath(),l.arc(o/2,d/2,c,0,2*Math.PI,!0),l.fillStyle="#ffffff",l.fill(),n.addChild(r),n.update()}),[]);const _=function(){var e=(0,r.default)((function*(){var e;const t=a.editData,n=null===(e=a.editedImage)||void 0===e?void 0:e.src,i=m.current;if(!n)throw new Error("empty image");const r=2*i;let s=r;r>o.default.MAX_PIC_SIDE?s=o.default.MAX_PIC_SIDE:r<o.default.MIN_PIC_SIDE&&(s=o.default.MIN_PIC_SIDE);const l=yield d.crop(n,(t.width-2*i)/2,(t.height-2*i)/2,2*i,2*i,s,s,d.DATA_URL|d.CANVAS),u=l.images.dataUrl;return{thumb:(yield d.crop(l.images.canvas,0,0,o.default.PROF_PIC_THUMB_SIDE,o.default.PROF_PIC_THUMB_SIDE)).images.dataUrl,full:u}}));return function(){return e.apply(this,arguments)}}();return(0,l.useImperativeHandle)(t,(()=>({crop:_}))),(0,f.jsxs)("div",{className:u.default.scaler,children:[(0,f.jsx)("div",{className:u.default.scalerButton,onClick:()=>{v()},children:(0,f.jsx)(c.default,{name:"plus"})}),(0,f.jsx)("div",{className:u.default.scalerButton,onClick:()=>{x()},children:(0,f.jsx)(c.default,{name:"minus"})})]})}var g=(0,l.forwardRef)(m);t.default=g},76557:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(67294),i=a(85893);function r(e,t){return(0,i.jsx)("canvas",{className:e.className,ref:t})}function s(e,t){return e.className===t.className}var l=(0,n.memo)((0,n.forwardRef)(r),s);t.default=l},56318:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,r.useState)(e.initialDuration),[n,C]=(0,r.useState)((0,f.shouldShowNUX)(d.default.NUX.EPHEMERAL));(0,r.useEffect)((()=>{(0,f.setNUX)(d.default.NUX.EPHEMERAL,{views:1,maxViews:1})}),[]);const _=e=>a(parseInt(e.target.value,10));let S;S=n?(0,v.jsx)(u.default,{fromMe:!0}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.TextParagraph,{xstyle:x.explanation,children:i.default._("All new messages in this chat will disappear after the selected duration.",null,{hk:"4lToiN"})}),(0,p.getAllDurations)().map((e=>{let{value:a,label:n}=e;return(0,v.jsx)("div",{className:(0,s.default)(x.option),children:(0,v.jsxs)("label",{className:(0,s.default)(x.label),children:[(0,v.jsx)("input",{type:"radio",className:(0,s.default)(x.input),value:String(a),checked:a===t,onChange:_}),n]})},`option-${a}`)}))]});return(0,v.jsx)(o.default,{title:n?void 0:m.default.t(570),onOK:n?()=>{C(!1)}:()=>{e.onDurationSelected(t),l.Cmd.closeModal()},onCancel:n?()=>{(0,c.openExternalLink)((0,h.getEphemeralFaqUrl)())}:()=>{l.Cmd.closeModal()},cancelText:n?m.default.t(689):m.default.t(1573),children:S})};var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=a(88102),o=n(a(52665)),d=n(a(69618)),u=n(a(70263)),c=a(12591),h=a(96384),f=a(99234),p=a(87470),m=n(a(43725)),g=a(13923),v=a(85893);const x={option:{display:"p357zi0d",alignItems:"gndfcl4n",height:"sai7fuui"},label:{display:"f804f6gw",cursor:"ajgl1lbb"},input:{marginEnd:"claouzo6",verticalAlign:"neme6l2y"},explanation:{marginBottom:"t4zgqcuo"}}},67247:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{frequentlyForwardedCount:t,totalCount:a}=e;const n=(0,c.jsxs)("span",{className:o.default.text,children:[1===t&&1===a?i.default._("This message will be marked as forwarded many times.",null,{hk:"37i1m9"}):i.default._("One or more messages will be marked as forwarded many times.",null,{hk:"1Z8wFQ"})," ",(0,c.jsx)(s.ExternalLink,{href:(0,l.getFrequentlyForwardedFaqUrl)(),children:d.default.t(689)})]});return(0,c.jsxs)("div",{className:o.default.wrapper,children:[(0,c.jsx)("div",{className:o.default.icon,children:(0,c.jsx)(u.default,{name:"highly-forwarded"})}),(0,c.jsx)(r.default,{theme:"plain",primary:n,idle:!0})]})};var i=n(a(48360)),r=n(a(44356)),s=a(12591),l=a(96384),o=n(a(65813)),d=n(a(43725)),u=n(a(23217)),c=a(85893)},90089:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(89385),s=a(50796),l=a(13959),o=a(67294),d=i(a(44356)),u=a(88102),c=i(a(26609)),h=a(88984),f=i(a(60453)),p=i(a(69637)),m=i(a(64738)),g=a(94790),v=a(65417),x=a(85600),C=n(a(64103)),_=a(7293),S=a(73058),y=i(a(32521)),j=i(a(21649)),E=a(55800),T=i(a(43725)),I=a(74028),b=i(a(84644)),w=a(52596),k=a(11234),P=i(a(51628)),M=i(a(23217)),L=a(50452),A=a(49082),O=i(a(38080)),D=a(77591),R=a(85893);const N="group-invite-link-anchor",F=0,B=1,U=2;function H(e,t){const{onBack:a,chat:n}=e,[i,H]=(0,o.useState)(F),G=(0,O.default)(),V=(0,A.useModelValues)(e.groupMetadata,["inviteCode","groupInviteLink"]),W=e=>{switch(e){case 401:return T.default.t(539);case 403:return T.default.t(540);case 404:return T.default.t(541);case 436:return T.default.t(543);default:return T.default.t(542)}};(0,o.useEffect)((()=>{(0,b.default)((0,S.queryGroupInviteCode)(V),G).then((()=>{H(U)})).catch((0,s.filteredCatch)(D.ServerStatusCodeError,(e=>{(e=>{const t=W(e);a(),436===e&&(_.GK.supportsFeature(_.GK.F.MD_BACKEND)&&(0,I.queryAndUpdateGroupMetadataById)(n.id),(0,E.openGrowthLockedModal)(!0)),u.Cmd.openToast((0,R.jsx)(L.Toast,{msg:t,id:(0,L.genId)()}))})(e.statusCode)}))).catch((0,r.catchAbort)((()=>{})))}),[]);const z=()=>{H(B);const e=(0,S.revokeGroupInvite)(V);(0,l.delayMs)(500).then((()=>e)).then((()=>{u.Cmd.openToast((0,R.jsx)(L.Toast,{msg:T.default.t(551),id:(0,L.genId)()})),H(U)})).catch((0,s.filteredCatch)(D.ServerStatusCodeError,(e=>{(e=>{const t=W(e);a(),u.Cmd.openToast((0,R.jsx)(L.Toast,{msg:t,id:(0,L.genId)()}))})(e.statusCode)}))).catch((0,s.filteredCatch)(C.Unmount,(()=>{})))},q=()=>{u.Cmd.openModal((0,R.jsx)(j.default,{pushTransition:"none",popTransition:"none",chat:n,onConfirm:z}),{transition:"modal-flow"})},K=()=>{u.Cmd.openModal((0,R.jsx)(k.SendGroupInviteFlowLoadable,{chat:n}),{transition:"modal-flow"})};return(0,R.jsxs)(f.default,{ref:t,children:[(0,R.jsx)(g.DrawerHeader,{title:T.default.t(531),onBack:e.onBack,type:g.DRAWER_HEADER_TYPE.SMALL}),(()=>{let e;if(i===F)e=(0,R.jsx)(x.LoadingWithText,{text:T.default.t(527)});else if(i===B)e=(0,R.jsx)(x.LoadingWithText,{text:T.default.t(550,{groupName:n.contact.name})});else{const t=V.groupInviteLink;let a=null;document.queryCommandSupported("copy")&&(a=(0,R.jsx)(c.default,{elementId:N}));const i=(0,R.jsx)(h.DetailImage,{id:n.id,size:82,quality:h.DETAIL_IMAGE_QUALITY.HIGH}),r=(0,R.jsx)("span",{className:y.default.linkContainer,children:(0,R.jsx)(w.SelectableLink,{id:N,href:t,selectable:!0,children:t})});e=(0,R.jsxs)(p.default,{children:[(0,R.jsx)(d.default,{image:i,primary:(0,R.jsx)(v.EmojiText,{text:n.contact.name,direction:"auto"}),theme:"identity",secondary:r}),(0,R.jsx)("div",{className:y.default.descContainer,children:T.default.t(532)}),(0,R.jsx)(P.default,{onClick:K}),a,(0,R.jsx)(m.default,{a8nText:"li-revoke-link",icon:(0,R.jsx)(M.default,{name:"revoke",className:y.default.icon}),onClick:q,children:T.default.t(529)})]})}return e})()]})}var G=(0,o.forwardRef)(H);t.default=G},78582:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onConfirm:t}=e;return(0,o.jsx)(r.default,{title:l.default.t(529),onOK:()=>{t(),i.Cmd.closeModal()},okText:l.default.t(529),onCancel:()=>{i.Cmd.closeModal()},cancelText:l.default.t(1573),children:(0,o.jsx)("div",{className:s.default.confirmationText,children:l.default.t(549,{groupName:e.chat.contact.name})})})};var i=a(88102),r=n(a(52665)),s=n(a(56081)),l=n(a(43725)),o=a(85893)},41552:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,B.useModelValues)(e.msg,["id","star","type","isGif","isViewOnce","labels","numTimesForwarded","isFrequentlyForwarded","chat"]),a=(0,R.default)(),n=(0,H.default)(),W=(0,U.default)(),z=(0,N.default)((()=>new m.default)),q=(0,N.default)((()=>new T.default.UiAction({uiActionType:T.default.UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0}))),K=(0,s.useRef)(null),Y=(0,s.useRef)(null),[Q,X]=(0,s.useState)(void 0),[Z,J]=(0,s.useState)(!1);(0,s.useEffect)((()=>{var e;b.MsgInfoCollection.find(t.id).then((e=>{n.aborted||X(e)})).catch((()=>{J(!0),o.Cmd.openToast((0,V.jsx)(D.Toast,{msg:j.default.t(864),id:(0,D.genId)("msg_info_failed")}))}));const a=null===(e=K.current)||void 0===e?void 0:e.container;t.type===d.default.MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight);const i=q.current;if(i){var r;const e=null===(r=v.default.get(t.chat.id))||void 0===r?void 0:r.cachedDeviceSizeBucket;null!=e&&(i.sizeBucket=e),i.markUiActionT(),i.commit(),q.current=void 0}}),[]);const $=()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.getMsgComponentRef()};let ee;(0,F.useListener)(null==Q?void 0:Q.played,["add","remove"],a),(0,F.useListener)(null==Q?void 0:Q.read,["add","remove"],a),(0,F.useListener)(null==Q?void 0:Q.delivery,["add","remove"],a),(0,F.useListener)(t,"remove",((e,t)=>{t===I.MsgCollection&&(null==W||W.uie.requestDismiss())})),Q||Z||(ee=(0,V.jsx)("div",{className:C.default.spinner,children:(0,V.jsx)(L.Spinner,{size:50,stroke:4})},"spinner"));const te=(()=>{const e=[],a=t.type===d.default.MSG_TYPE.PTT,n=a||t.isViewOnce;if(Q&&n){let t=a?S.SECTIONS.PLAYED_HEADER:S.SECTIONS.VIEWED_HEADER;e.push({kind:"section",type:t,itemKey:t,height:50}),e.push(...Q.played.map((e=>({participant:e,kind:"row",itemKey:e.id.toString(),height:p.DEFAULT_ITEM_HEIGHT})))),Q.playedRemaining>0&&(t=a?S.SECTIONS.PLAYED_FOOTER:S.SECTIONS.VIEWED_FOOTER,e.push({kind:"section",type:t,itemKey:t,height:50}))}return Q&&(Q.read.length>0||Q.playedRemaining>0)&&(e.push({kind:"section",type:n?S.SECTIONS.SEEN_HEADER:S.SECTIONS.READ_HEADER,itemKey:S.SECTIONS.READ_HEADER,height:50}),e.push(...Q.read.map((e=>({participant:e,kind:"row",itemKey:e.id.toString(),height:p.DEFAULT_ITEM_HEIGHT})))),Q.readRemaining>0&&e.push({kind:"section",type:S.SECTIONS.READ_FOOTER,itemKey:n?S.SECTIONS.SEEN_FOOTER:S.SECTIONS.READ_FOOTER,height:50})),Q&&(Q.delivery.length>0||Q.deliveryRemaining>0)&&(e.push({kind:"section",type:S.SECTIONS.DELIVERED_HEADER,itemKey:S.SECTIONS.DELIVERED_HEADER,height:50}),e.push(...Q.delivery.map((e=>({participant:e,kind:"row",itemKey:e.id.toString(),height:p.DEFAULT_ITEM_HEIGHT})))),Q.deliveryRemaining>0&&e.push({kind:"section",type:S.SECTIONS.DELIVERED_FOOTER,itemKey:S.SECTIONS.DELIVERED_FOOTER,height:50})),t.numTimesForwarded>0&&!t.isFrequentlyForwarded&&e.push({kind:"section",type:S.SECTIONS.FORWARD_COUNT,itemKey:S.SECTIONS.FORWARD_COUNT,height:60}),e})(),ae=te.length?(0,V.jsx)(p.FlatList,{flatListController:z.current,direction:"vertical",forceConsistentRenderCount:!1,data:te,renderItem:e=>{if("row"===e.kind)return a=e.participant,(0,V.jsx)(x.default,{msgInfoParticipant:a,contact:a.contact,theme:"drawer-list"},a.id.toString());var a,n;if(e.type===S.SECTIONS.FORWARD_COUNT)return M.ServerProps.hfmStringChanges?null:(0,V.jsx)("div",{className:C.default.forwardCount,children:(0,V.jsx)(w.default,{msg:t})});switch(e.type){case S.SECTIONS.PLAYED_HEADER:case S.SECTIONS.READ_HEADER:case S.SECTIONS.SEEN_HEADER:case S.SECTIONS.DELIVERED_HEADER:case S.SECTIONS.VIEWED_HEADER:return(e=>{let a,n;switch(e){case S.SECTIONS.PLAYED_HEADER:n=(0,V.jsx)(A.default,{name:"status-ptt",className:C.default.statusBlue}),a=j.default.t(833);break;case S.SECTIONS.READ_HEADER:n=(0,V.jsx)(A.default,{name:"status-dblcheck",className:C.default.ack}),a=j.default.t(835);break;case S.SECTIONS.SEEN_HEADER:n=(0,V.jsx)(A.default,{name:"status-dblcheck",className:C.default.ack}),a=t.isViewOnce?j.default.t(840):j.default.t(838);break;case S.SECTIONS.DELIVERED_HEADER:n=(0,V.jsx)(A.default,{name:"status-dblcheck"}),a=j.default.t(831);break;case S.SECTIONS.VIEWED_HEADER:n=(0,V.jsx)(A.default,{name:"view-once-viewed",className:C.default.statusBlue}),a=j.default.t(842);break;default:return __LOG__(4,void 0,new Error)`Invalid SECTION for group message info section header`,null}return n=(0,V.jsx)("div",{className:C.default.titleIcon,children:n}),(0,V.jsx)("div",{"data-a8n":r.default.key("msg-info-title"),className:C.default.title,children:(0,V.jsx)(P.default,{side:n,ellipsify:!0,children:(0,V.jsx)(O.TextSpan,{theme:"section-title",children:a})})})})(e.type);default:return n=e.type,(0,V.jsx)(_.default,{section:n,msgInfo:(0,i.default)(Q,"msgInfo")},n)}}}):null;let ne=null;t.labels&&t.labels.length>0&&(0,g.canDisplayLabel)()&&(ne=(0,V.jsx)(f.default,{theme:"padding",children:(0,V.jsx)(y.default,{labels:t.labels})}));return(0,V.jsxs)(u.default,{theme:"striped",children:[(0,V.jsx)(h.DrawerHeader,{title:j.default.t(829),type:h.DRAWER_HEADER_TYPE.SMALL,onCancel:()=>{null==W||W.uie.requestDismiss()}}),(0,V.jsx)(k.default,{ref:K,chatPreference:l.default.assertGet("defaultPreference"),children:(0,V.jsx)(G.Wrapper,{msg:t,ref:Y,displayType:d.default.DISP_TYPE.MSG_INFO,isMsgVisible:function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===t.id&&(!!a||$())},position:E.MsgPosition.END,onProductClick:e.onProductClick})}),(0,V.jsxs)(c.default,{flatListControllers:[z.current],children:[ne,ee,(0,V.jsx)("div",{className:C.default.list,children:ae})]})]},"message-info-modal")};var i=n(a(45095)),r=n(a(99964)),s=a(67294),l=n(a(66034)),o=a(88102),d=n(a(69618)),u=n(a(60453)),c=n(a(69637)),h=a(94790),f=n(a(33308)),p=a(47915),m=n(a(30855)),g=a(57701),v=n(a(63928)),x=n(a(47834)),C=n(a(23533)),_=n(a(95164)),S=a(59996),y=n(a(77577)),j=n(a(43725)),E=a(87931),T=n(a(11339)),I=a(59871),b=a(17972),w=n(a(82678)),k=n(a(1697)),P=n(a(53145)),M=a(64551),L=a(11054),A=n(a(23217)),O=a(13923),D=a(50452),R=n(a(59909)),N=n(a(59552)),F=a(19529),B=a(49082),U=n(a(59147)),H=n(a(38080)),G=a(58827),V=a(85893)},95164:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,d.useModelValues)(e.msgInfo,["playedRemaining","readRemaining","deliveryRemaining"]);let a,n,c;switch(e.section){case s.SECTIONS.PLAYED_FOOTER:case s.SECTIONS.VIEWED_FOOTER:a=t.playedRemaining,n=t.playedRemaining;break;case s.SECTIONS.READ_FOOTER:case s.SECTIONS.SEEN_FOOTER:a=t.readRemaining,n=t.readRemaining;break;case s.SECTIONS.DELIVERED_FOOTER:a=t.deliveryRemaining,n=t.deliveryRemaining;break;default:return __LOG__(4,void 0,new Error)`Invalid SECTION for group message info section footer`,null}if(null==a||0===a)return null;c={count:a,_plural:n};const h=l.default.t(836,c);return(0,u.jsx)("div",{"data-a8n":i.default.key("msg-info-remaining"),className:r.default.footer,children:(0,u.jsx)(o.TextSpan,{theme:"muted",children:h})})};var i=n(a(99964)),r=n(a(23533)),s=a(59996),l=n(a(43725)),o=a(13923),d=a(49082),u=a(85893)},59996:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SECTIONS=void 0;const n=a(54302).Mirrored(["DELIVERED_FOOTER","DELIVERED_HEADER","FORWARD_COUNT","PLAYED_FOOTER","PLAYED_HEADER","READ_FOOTER","READ_HEADER","SEEN_FOOTER","SEEN_HEADER","VIEWED_FOOTER","VIEWED_HEADER"]);t.SECTIONS=n},14767:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t,gid:a,onSend:n}=e,j=(0,i.useRef)(null),E=(0,i.useRef)(null),[T,I]=(0,i.useState)(p.default.t(583)),b=(0,y.jsx)(x.Round,{a8nText:"group-participants-btn",large:!0,onClick:()=>{(()=>{const e=v.ProfilePicThumbCollection.get(a);return new Promise((t=>{e&&e.img?(0,h.default)(e.img).then((e=>{if(e.ok)return e.blob();t(void 0)})).then((e=>{if(!e)return;const a=new FileReader;a.onloadend=function(){const e=a.result;if(null==e)return void t(void 0);const n=e.toString().split(",")[1];t(n)},a.readAsDataURL(e)})).catch((()=>t(void 0))):t(void 0)}))})().then((e=>{n(T,e)}))},children:(0,y.jsx)(C.default,{name:"send",directional:!0})}),w=(0,y.jsx)(l.DetailImage,{id:e.gid}),k=(0,y.jsx)(c.EmojiText,{text:e.subject});return(0,y.jsx)(m.Modal,{type:m.ModalTheme.Invite,children:(0,y.jsxs)(o.default,{theme:"invite",children:[(0,y.jsx)(u.DrawerHeader,{type:u.DRAWER_HEADER_TYPE.POPUP,title:p.default.t(592),onCancel:()=>{t()}}),(0,y.jsxs)(d.default,{children:[(0,y.jsx)("div",{className:f.default.search,children:(0,y.jsx)("div",{"data-list-scroll-container":!0,children:(0,y.jsx)(g.default,{ref:j,theme:"list-names",contacts:e.participants.map((e=>e.contact))})})}),(0,y.jsx)("div",{className:f.default.commentInput,children:(0,y.jsx)(_.TextInput,{a8n:"groups-v4-invite-add-comment-input",ref:E,value:T,showRemaining:!0,maxLength:s.default.MAX_CAPTION_LENGTH,onChange:e=>{I(e)},theme:"v4-invite-caption",supportsEmoji:!0})}),(0,y.jsx)(S.default,{transitionName:"btn",className:f.default.onSendInvite,children:b}),(0,y.jsx)("div",{className:f.default.groupInfo,children:(0,y.jsx)(r.default,{idle:!0,image:w,primary:k,secondary:p.default.t(587),theme:"group_v4_invite"})})]})]})})};var i=a(67294),r=n(a(44356)),s=n(a(69618)),l=a(88984),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=a(65417),h=n(a(18561)),f=n(a(2021)),p=n(a(43725)),m=a(57224),g=n(a(53153)),v=a(82039),x=a(82857),C=n(a(23217)),_=a(90011),S=n(a(41956)),y=a(85893)},12500:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(63105)),r=n(a(35161)),s=a(13959),l=a(67294),o=a(65511),d=a(85600),u=n(a(43725)),c=n(a(67568)),h=n(a(48690)),f=n(a(87481)),p=n(a(81559)),m=n(a(59552)),g=a(85893);function v(e,t){const{onCancel:n,chats:v,filter:x=(()=>!0),onGroup:C}=e,_=(0,l.useRef)(null),S=(0,m.default)((()=>new f.default([],(e=>e)))),[y,j]=(0,l.useState)(!0),[E,T]=(0,l.useState)(void 0);(0,l.useEffect)((()=>{(0,s.delayMs)(300).then((()=>Promise.all((0,r.default)((0,i.default)(v,(e=>{var t;return null===(t=e.groupMetadata)||void 0===t?void 0:t.stale})),(e=>{var t;return a(63928).default.update(null===(t=e.groupMetadata)||void 0===t?void 0:t.id).catch((()=>{}))}))))).then((()=>j(!1)))}),[]);const I=()=>_.current;(0,l.useImperativeHandle)(t,(()=>({getElement:I})));const b=(0,p.default)(T,100),w=y?(0,g.jsx)(d.Loading,{}):(0,g.jsx)(d.SearchGroups,{});return(0,g.jsx)(c.default,{title:u.default.t(1707),data:(()=>{if(y)return[];const e=u.default.accentFold(E),t=(0,h.default)(e),a=v.filter((a=>x(a)&&(!e||e&&a.contact.searchMatch(e,t))));return S.current.init(a.filter((e=>!0===x(e))).map((e=>e.id))),a.map((e=>({chat:e,itemKey:e.id.toString()})))})(),renderItem:e=>{let t,a;const n=x(e.chat),i="boolean"!=typeof n;return i&&(t=n,a="group-modal"),(0,g.jsx)(o.Chat,{chat:e.chat,contact:e.chat.contact,mode:o.Mode.INFO,active:S.current,secondary:t,noContext:!0,theme:a,onClick:i?void 0:C.bind(null,e.chat)})},emptyState:w,selection:S.current,onCancel:n,onSearch:b,onSelect:(e,t)=>{if(!(t instanceof o.Mode))return;const a=t.props.chat;!0===x(a)&&C(t.props.chat)},onRef:e=>{_.current=e},searchPlaceholder:u.default.t(1194)})}var x=(0,l.forwardRef)(v);t.default=x},15048:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,i.useRef)(-1),a=(0,i.useRef)(!1),n=(e,n)=>{(0,x.logSessionEvent)(e,t.current,n),a.current=!0};(0,i.useEffect)((()=>(t.current=performance.now(),s.AssetLoader.loadAsset(T,s.LOAD_PRIORITY.HELP_ANIMATED_DOODLE),()=>{a.current||n(C.default.CONTACT_US_EXIT_STATE.CANCELLED)})),[]);const r=()=>{n(C.default.CONTACT_US_EXIT_STATE.PROBLEM_DESCRIPTION)},I=e=>{n(C.default.CONTACT_US_EXIT_STATE.EMAIL_SEND,e)},b=()=>{},w=()=>{l.Cmd.openModal((0,E.jsx)(v.LicensesPopupLoadable,{onOk:b}))};let k;y.UA.isElectron&&(k=(0,E.jsx)(c.default,{a8nText:"li-licenses",onClick:w,icon:(0,E.jsx)(_.default,{name:"status-document",height:24}),children:g.default.t(690)}));return(0,E.jsxs)(d.default,{children:[(0,E.jsx)(h.DrawerHeader,{a8n:"drawer-title-help",title:g.default.t(619),onBack:e.onClose,type:h.DRAWER_HEADER_TYPE.LARGE}),(0,E.jsxs)(u.default,{children:[(0,E.jsx)("div",{className:m.default.animation}),(0,E.jsx)(j.default,{className:m.default.versionInfo}),(0,E.jsx)(c.default,{a8nText:"li-faq",icon:(0,E.jsx)(_.default,{name:"settings-help"}),onClick:()=>{(0,f.openExternalLink)((0,p.getFaqUrl)()),n(C.default.CONTACT_US_EXIT_STATE.FAQ)},children:g.default.t(1835)}),(0,E.jsx)(c.default,{a8nText:"li-contact-us",icon:(0,E.jsx)(_.default,{name:"group"}),onClick:()=>{l.Cmd.openModal((0,E.jsx)(o.default,{onCancel:r,onSend:I}))},children:g.default.t(1245)}),k,(0,E.jsx)(c.default,{a8nText:"li-tos",icon:(0,E.jsx)(_.default,{name:"status-document",height:24}),onClick:()=>{a.current=!0,(0,f.openExternalLink)((0,S.getTosUrl)())},children:g.default.t(1344)}),undefined,undefined]})]})};n(a(48360));var i=a(67294),r=n(a(11959)),s=a(89721),l=a(88102),o=n(a(50485)),d=n(a(60453)),u=n(a(69637)),c=n(a(64738)),h=a(94790),f=a(12591),p=a(96384),m=n(a(51298)),g=n(a(43725)),v=a(88240),x=a(93045),C=n(a(11339)),_=n(a(23217)),S=a(73915),y=a(65127),j=n(a(56204)),E=a(85893);const T={id:"animated-doodle",selectors:[`.${m.default.animation}`],low:{default:r.default},high:{default:r.default}}},85647:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onImageSelected:t}=e,a=(0,L.default)(),n=(0,c.useRef)(null),i=(0,c.useRef)(null),D=(0,c.useRef)(null),R=(0,c.useRef)(!1),N=(0,c.useRef)(null),[F,B]=(0,c.useState)({}),[U,H]=(0,c.useState)(!1),[G,V]=(0,c.useState)(0),[W,z]=(0,c.useState)(""),[q,K]=(0,c.useState)([]),[Y,Q]=(0,c.useState)(0),X=(0,M.default)(((e,t)=>{R.current=!1;const a=new h.default,n=f.search(e,t).then((t=>{var i;if(a.signal.aborted)throw new o.AbortError;n===(null===(i=N.current)||void 0===i?void 0:i.promise)&&(((e,t)=>{const a=(0,l.default)(t.value,(e=>e.thumbnailUrl)),n=(0,s.default)(t.value,(e=>({id:e.imageId,name:e.name,thumbUrl:e.thumbnailUrl}))),i=t.value.length;var o,d;W===e?(V(t.nextOffset?t.nextOffset:G+i),K((0,r.default)(q,n)),Q(null!==(o=t.totalEstimatedMatches)&&void 0!==o?o:0),B(Object.assign(a,F))):(B(a),V(t.nextOffset?t.nextOffset:G+i),z(W),K(n),Q(null!==(d=t.totalEstimatedMatches)&&void 0!==d?d:0)),B({}),H(!1),V(0),z(""),K([]),Q(0)})(e,t),H(!1))})).catch((0,o.catchAbort)((()=>{}))).catch((()=>{var e;__LOG__(3,!0)`Image search failed`,p.Cmd.openToast((0,O.jsx)(w.Toast,{msg:T.default.t(630),id:(0,w.genId)()})),n===(null===(e=N.current)||void 0===e?void 0:e.promise)&&H(!1)})).finally((()=>{var e;n===(null===(e=N.current)||void 0===e?void 0:e.promise)&&(N.current=null)}));N.current={promise:n,controller:a},H(!0)}),750),Z=()=>{X.cancel(),R.current&&(R.current=!1),N.current&&N.current.controller.abort()},J=()=>{B({}),H(!1),V(0),z(""),K([]),Q(0)},$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;R.current=!0,X(e,t)},ee=()=>{R.current||N.current||!Y||G>=Y||$(W,G)},te=e=>{const n=F[e];if(!n)return;const i=n.contentUrl;let r;if(k.UA.isElectron)r=(0,b.default)((()=>(0,S.default)(i))).then((e=>{if(200!==e.status)throw new _.ServerStatusError(null,i,e.status);return e.blob()}));else{if(y.GK.supportsFeature(y.GK.F.MD_BACKEND))throw new Error("This call is only supported in non-MD mode");r=A.default.downloadImage(i)}r.then((e=>{if(!a.aborted){if(!(e instanceof Blob))throw new _.ImageError("Server did not respond with image bytes",i);t(e,n.hostPageUrl)}})).catch((()=>{__LOG__(3,!0)`Image search failed`,p.Cmd.openToast((0,O.jsx)(w.Toast,{msg:T.default.t(627),id:(0,w.genId)()}))}))},ae=()=>{d.default.shouldIndicateFocus(),u.default.focus(n.current)},ne=x.DRAWER_HEADER_TYPE.POPUP;let ie;ie=0===q.length?U?(0,O.jsx)(C.SearchingImages,{}):W?(0,O.jsx)(C.ImageSearchEmpty,{}):(0,O.jsx)(C.BeforeImageSearch,{}):(0,O.jsx)(E.default,{ref:D,canLoadMore:G<Y,isLoadingMore:U,thumbnails:q,onFocusPrev:ae,onImageClick:te,onRequestMoreImages:ee});return(0,O.jsxs)(g.default,{children:[(0,O.jsx)(x.DrawerHeader,{title:T.default.t(634),type:ne,onBack:e.onBack,onCancel:e.onCancel}),(0,O.jsxs)(v.default,{children:[(0,O.jsx)(j.HotKeys,{onRef:e=>{i.current=e},handlers:{down:e=>{e.repeat||D.current&&n.current&&n.current.cursorIsAtEnd()&&(e.preventDefault(),e.stopPropagation(),d.default.shouldIndicateFocus(),null!=D.current&&u.default.focus(D.current))}},onFocus:()=>{d.default.maybeIndicateFocus(i.current)},children:(0,O.jsx)(I.default,{ref:n,placeholder:T.default.t(631),onSearch:e=>{const t=(e||"").trim();if(!t)return Z(),void J();(0,P.numCodepoints)(t)<m.default.FTS_MIN_CHARS||t!==W&&(Z(),J(),$(t))},loading:U})}),ie]})]})};var r=i(a(57043)),s=i(a(35161)),l=i(a(24350)),o=a(89385),d=i(a(45120)),u=i(a(52013)),c=a(67294),h=i(a(70714)),f=n(a(64904)),p=a(88102),m=i(a(69618)),g=i(a(60453)),v=i(a(69637)),x=a(94790),C=a(85600),_=n(a(64103)),S=i(a(18561)),y=a(7293),j=a(55414),E=i(a(31469)),T=i(a(43725)),I=i(a(48837)),b=i(a(19059)),w=a(50452),k=a(65127),P=a(3940),M=i(a(81559)),L=i(a(38080)),A=i(a(56891)),O=a(85893)},87027:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOk:t}=e,[a,n]=(0,i.useState)(void 0);let f,p;(0,i.useEffect)((()=>{}),[]),a||(f=(0,h.jsx)("div",{className:o.default.spinner,children:(0,h.jsx)(u.Spinner,{size:50,stroke:4})},"spinner"));a&&(p=(0,h.jsx)("div",{className:o.default.textContainer,children:a}));return(0,h.jsx)(s.default,{okText:l.default.t(1764),onOK:()=>{null==t||t(),r.Cmd.closeModal()},type:d.ModalTheme.Flex,children:(0,h.jsxs)("div",{className:o.default.container,children:[(0,h.jsx)(c.TextSpan,{theme:"popup-title",children:l.default.t(690)}),p,f]})})};var i=a(67294),r=a(88102),s=n(a(52665)),l=n(a(43725)),o=n(a(64677)),d=a(57224),u=a(11054),c=a(13923),h=a(85893)},39301:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ID_SEPARATOR=t.Cluster=void 0;var i=n(a(33861)),r=a(88501);t.ID_SEPARATOR=",";t.Cluster=class{constructor(){this.participants=new i.default;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach((e=>this.add(e)))}get id(){return this.participants.map((e=>{let{id:t}=e;return t.toString()})).join(",")}get center(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:(Math.min(...e)+Math.max(...e))/2,lng:(Math.min(...t)+Math.max(...t))/2}}get lat(){return this.center.lat}get lng(){return this.center.lng}get length(){return this.participants.length}get northeast(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:Math.max(...e),lng:Math.max(...t)}}get southwest(){const e=this.participants.map((e=>{let{lat:t}=e;return t})),t=this.participants.map((e=>{let{lng:t}=e;return t}));return{lat:Math.min(...e),lng:Math.min(...t)}}add(e){this.participants.add(e)}hasSingleParticipant(){return 1===this.length}fits(e,t,a){const{lat:n,lng:i}=this.center,{lat:s,lng:l}=e,o=(0,r.getMetersBetweenLatLngs)(n,i,n,l),d=(0,r.getMetersBetweenLatLngs)(n,i,s,i),u=(0,r.getMetersPerPixel)(n,t);return o/u<=a&&d/u<=a}}},51654:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onParticipantSelected:t,participants:a}=e,n=(0,p.default)((()=>new d.default));return(0,m.jsxs)("div",{className:i.default.container,children:[(0,m.jsxs)("div",{className:i.default.header,children:[(0,m.jsx)("div",{className:i.default.left,children:(0,m.jsx)("span",{className:i.default.close,onClick:e.onClearSelected,children:(0,m.jsx)(h.default,{name:"x"})})}),(0,m.jsx)("div",{className:i.default.right,children:u.default.t(696,{count:e.participants.length,_plural:e.participants.length})})]}),(0,m.jsx)(o.default,{className:i.default.list,flatListControllers:[n.current],children:(0,m.jsx)(l.FlatList,{data:a.map((e=>({itemKey:e.id.toString(),participant:e}))),flatListController:n.current,direction:"vertical",defaultItemHeight:48,renderItem:e=>{const{participant:a}=e,n=a.isMe?(0,m.jsx)("div",{className:i.default.time,children:(0,m.jsx)(s.default,{reason:"live-location-time",children:(0,m.jsx)(f.default,{participant:a})})}):null;return(0,m.jsxs)("div",{className:i.default.item,onClick:()=>t(a.contact.id.toString()),children:[(0,m.jsx)("div",{className:i.default.left,children:(0,m.jsx)(r.DetailImage,{id:a.contact.id,size:28})}),(0,m.jsxs)("div",{className:i.default.right,children:[(0,m.jsx)("div",{className:i.default.name,children:(0,m.jsx)(c.Name,{contact:a.contact,titlify:!0,ellipsify:!0,you:!0})}),n]})]})}})})]})};var i=n(a(14395)),r=a(88984),s=n(a(51099)),l=a(47915),o=n(a(44942)),d=n(a(30855)),u=n(a(43725)),c=a(12176),h=n(a(23217)),f=n(a(61804)),p=n(a(59552)),m=a(85893)},16641:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cluster=function(e,t,a,n){const s=new Map;if(!e.length)return s;const l=e.filter((e=>e!==a)).sort(((e,t)=>e.lat-t.lat));for(let e=0;e<l.length;e++){const a=l[e];let o;if(s.forEach((e=>{!o&&e.fits(a,t,n)&&(o=e)})),o){const e=o,t=o.id;s.delete(t),e.add(a)}else o=new r.Cluster(a);s.set((0,i.default)(o,"clusterToAdd").id,(0,i.default)(o,"clusterToAdd"))}if(a&&e.length!==l.length){const e=new r.Cluster(a);s.set(e.id,e)}return s},t.findClusterForParticipant=function(e,t){let a;const n=e.values();for(;(a=n.next())&&!a.done;){const e=a.value;if(e.participants.get(t))return e}return null},t.participantInCluster=function(e,t){return e.split(r.ID_SEPARATOR).includes(t.toString())},t.singleParticipantClusterId=function(e){return!e.includes(r.ID_SEPARATOR)};var i=n(a(45095)),r=a(39301)},9903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STALE_THRESHOLD=t.PIN_SIZE=t.MARKER_SIZE=t.IMAGE_SIZE=t.IMAGE_BORDER_SIZE=t.GLOW_SIZE=t.AVATAR_SIZE=void 0,t.getSmallestElapsedTime=a,t.isStale=function(e){return a(e)>=600};t.STALE_THRESHOLD=600;t.IMAGE_SIZE=40;t.IMAGE_BORDER_SIZE=2;t.GLOW_SIZE=4;t.PIN_SIZE=4;t.AVATAR_SIZE=44;function a(e){const t=e.participants.map((e=>e.elapsedTime()));return Math.min(...t)}t.MARKER_SIZE=52},74717:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=a(22683),s=n(a(60453)),l=n(a(69637)),o=a(94790),d=n(a(3222)),u=n(a(34600)),c=n(a(43725)),h=a(84387),f=n(a(49314)),p=a(73098),m=n(a(27766)),g=n(a(57220)),v=n(a(65932)),x=n(a(23217)),C=a(85893);class _ extends i.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.onRoadmapSelected=()=>{this.setState({mapType:p.MapType.ROADMAP})},this.onSatelliteSelected=()=>{this.setState({mapType:p.MapType.SATELLITE})},this.onTerrainSelected=()=>{this.setState({mapType:p.MapType.TERRAIN})},this.onTrafficToggled=()=>{this.setState((e=>({showTraffic:!e.showTraffic})))},this.onMarkerSelected=e=>{this.setState({markerSelected:e})},this.state={mapType:p.MapType.ROADMAP,showTraffic:!1,markerSelected:!1,online:g.default.online}}componentDidMount(){this.props.listeners.add(g.default,"change:online",(()=>{this.setState({online:g.default.online})}))}render(){const e=(0,C.jsx)(m.default,{onRoadmapSelected:this.onRoadmapSelected,onSatelliteSelected:this.onSatelliteSelected,onTerrainSelected:this.onTerrainSelected,onTrafficToggled:this.onTrafficToggled,showTraffic:this.state.showTraffic}),{finalLat:t,finalLng:a,finalTimeOffset:n,lat:i,lng:d,senderObj:h,t:p}=this.props.msg,{mapType:g,showTraffic:v,markerSelected:_,online:S}=this.state;let y,j,E,T;return void 0===t||void 0===a||void 0===n?(y=i,j=d,E=p):(y=t,j=a,E=p+n),T=S?(0,C.jsxs)("div",{className:u.default.wrapper,children:[(0,C.jsx)(f.default,{contact:h,lat:y,lng:j,mapType:g,showTraffic:v,markerSelected:_,onMarkerSelected:this.onMarkerSelected}),(0,C.jsxs)("div",{className:u.default.notification,children:[(0,C.jsx)("div",{className:u.default.ended,children:c.default.t(697)}),(0,C.jsx)("div",{className:u.default.lastUpdated,children:r.Clock.liveLocationLastUpdatedStr(E)})]})]}):(0,C.jsx)("div",{className:u.default.offline,children:(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:u.default.circle,children:(0,C.jsx)(x.default,{name:"live-location-disconnected"})}),(0,C.jsx)("div",{className:u.default.text,children:c.default.t(749)})]})}),(0,C.jsxs)(s.default,{children:[(0,C.jsx)(o.DrawerHeader,{title:c.default.t(698),type:o.DRAWER_HEADER_TYPE.SMALL,menu:e,onCancel:this.onClose}),(0,C.jsx)(l.default,{children:T})]})}}_.CONCERNS={msg:["finalLat","finalLng","finalTimeOffset","lat","lng","senderObj","t"]},_.displayName="ExpiredLocationDrawer";var S=(0,d.default)((0,h.ListenerHOC)((0,v.default)(_,_.CONCERNS)));t.default=S},49314:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(57319),r=a(67294),s=a(33458),l=a(73098),o=n(a(48037)),d=a(85893);class u extends r.Component{constructor(e){super(e),this.setMap=e=>this.map=e,this.mapOnClick=()=>{this.dismissMarkerTimer.debounceAndCap(50,100)},this.markerOnClick=()=>{this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel(),this.props.onMarkerSelected(!0)},this.getPixelPositionOffset=(e,t)=>({x:-e/2,y:-t}),this.dismissMarkerTimer=new i.ShiftTimer((()=>{this.props.markerSelected&&this.props.onMarkerSelected(!1)}))}componentWillUnmount(){this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel()}getMapPaneName(){return s.OverlayView.OVERLAY_MOUSE_TARGET}getMarkers(){const{lat:e,lng:t,contact:a,markerSelected:n}=this.props;return(0,d.jsx)(o.default,{marker:{isLive:!1,contact:a,lat:e,lng:t,selected:n,onClick:e=>this.markerOnClick(e)}})}getTrafficLayer(){return this.props.showTraffic?(0,d.jsx)(s.TrafficLayer,{autoRefresh:!0}):null}render(){const{lat:e,lng:t}=this.props;return(0,d.jsxs)(s.GoogleMap,{ref:this.setMap,defaultCenter:{lat:e,lng:t},defaultOptions:this.props.getMapOptions(),defaultZoom:l.INITIAL_ZOOM,mapTypeId:this.props.mapType,onClick:this.mapOnClick,children:[this.getMarkers(),this.getTrafficLayer()]})}}u.displayName="ExpiredLocationMap";var c=(0,l.withConfig)((0,s.withScriptjs)((0,s.withGoogleMap)(u)));t.default=c},11399:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(41609)),r=n(a(23493)),s=n(a(94184)),l=a(67294),o=n(a(51654)),d=a(16641),u=a(88102),c=a(9903),h=n(a(60453)),f=n(a(69637)),p=a(94790),m=n(a(3222)),g=n(a(85529)),v=n(a(43725)),x=a(84387),C=n(a(79834)),_=n(a(22163)),S=a(73098),y=n(a(27766)),j=n(a(57220)),E=n(a(32213)),T=n(a(86058)),I=n(a(65932)),b=a(31019),w=n(a(23217)),k=n(a(4478)),P=a(50452),M=n(a(39546)),L=a(58021),A=a(85893);const O=["click","mousedown","mousemove","scroll"],D="ACTIVE",R="INACTIVE",N="OFFLINE";class F extends l.PureComponent{constructor(e){super(e),this._onParticipantAdd=()=>{const{zoomLevel:e,selectedParticipantId:t}=this.state;this._updateMinZoomClusters(),this.setState({clusters:this._getClusters(e,t)})},this.onParticipantRemove=e=>{const{selectedClusterId:t,selectedParticipantId:a,zoomLevel:n}=this.state;this._updateMinZoomClusters();let i=t,r=a;t&&(0,d.participantInCluster)(t,e.id)&&(i=null),M.default.equals(a,e.id)&&(r=null),this.setState({selectedClusterId:i,selectedParticipantId:r,clusters:this._getClusters(n,r)})},this._onParticipantDisable=e=>{if(!e.isMe){const t=e.contact.formattedName;u.Cmd.openToast((0,A.jsx)(P.Toast,{msg:v.default.t(722,{name:t}),id:(0,P.genId)()}))}},this.onLocationChanged=()=>{const{zoomLevel:e,selectedParticipantId:t}=this.state;this._updateMinZoomClusters(),this.setState({clusters:this._getClusters(e,t)})},this.onIdle=()=>{const{liveLocation:e}=this.props.chat;e&&(e.stopViewingMap(),this.setState({status:R}))},this.onActivity=(0,r.default)((()=>{this._removeIdleTimeout(),this._addIdleTimeout()}),250),this._onRefresh=()=>{const{liveLocation:e}=this.props.chat;e&&(e.startViewingMap(),this.setState({status:D}))},this.onClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.onMarkerSelected=e=>{e?(0,d.singleParticipantClusterId)(e)?this.onParticipantSelected(e):this._onClusterSelected(e):this.onClearSelected()},this.onClearSelected=()=>{const{selectedParticipantId:e,selectedClusterId:t,zoomLevel:a}=this.state;(e||t)&&this.setState({selectedParticipantId:null,selectedClusterId:null,clusters:this._getClusters(a)})},this._onClusterSelected=e=>{this.state.selectedClusterId!==e&&this.setState({selectedParticipantId:null,selectedClusterId:e})},this.onParticipantSelected=e=>{const{selectedParticipantId:t,zoomLevel:a}=this.state,n=(0,L.createWid)(e);M.default.equals(t,n)||this.setState({selectedParticipantId:n,selectedClusterId:null,clusters:this._getClusters(a,n)})},this.onStopSharing=e=>{e.preventDefault(),e.stopPropagation();const{chat:t}=this.props;u.Cmd.openModal((0,A.jsx)(C.default,{chat:t}))},this.onRoadmapSelected=()=>{this.setState({mapType:S.MapType.ROADMAP})},this.onSatelliteSelected=()=>{this.setState({mapType:S.MapType.SATELLITE})},this.onTerrainSelected=()=>{this.setState({mapType:S.MapType.TERRAIN})},this.onTrafficToggled=()=>{this.setState((e=>({showTraffic:!e.showTraffic})))},this._onBackToCenter=()=>{this.setState({selectedParticipantId:null,selectedClusterId:null,atCenter:!0,clusters:this._getClusters(this.state.zoomLevel)})},this.onMapMoved=(e,t)=>{this.setState((a=>{const n={};if(a.zoomLevel!==e){const t=this._getClusters(e,a.selectedParticipantId);Object.assign(n,{zoomLevel:e,clusters:t})}return this._hasValidParticipants()&&a.atCenter!==t&&Object.assign(n,{atCenter:t}),(0,i.default)(n)?null:n}))},this._updateMinZoomClusters(),this.state={clusters:this._getClusters(S.INITIAL_ZOOM),selectedClusterId:null,selectedParticipantId:null,mapType:S.MapType.ROADMAP,showTraffic:!1,zoomLevel:S.INITIAL_ZOOM,atCenter:!0,status:j.default.online?D:N}}componentDidMount(){this._listenToModelChange(),this._listenToNetworkChange(),this._startCheckingForIdle();const{liveLocation:e}=this.props.chat;e&&(e.startViewingMap(),this._addParticipantListeners(e))}componentWillUnmount(){this.onActivity.cancel();const{liveLocation:e}=this.props.chat;e&&e.stopViewingMap()}_addParticipantListeners(e){this.props.listeners.add(e.participants,"add",this._onParticipantAdd),this.props.listeners.add(e.participants,"remove",this.onParticipantRemove),this.props.listeners.add(e.participants,"change:disabled",this._onParticipantDisable),this.props.listeners.add(e.participants,"change:valid",this.onLocationChanged)}_removeParticipantListeners(e){this.props.listeners.remove(e.participants,"add",this._onParticipantAdd),this.props.listeners.remove(e.participants,"remove",this.onParticipantRemove),this.props.listeners.remove(e.participants,"change:disabled",this._onParticipantDisable),this.props.listeners.remove(e.participants,"change:valid",this.onLocationChanged)}_listenToModelChange(){const{chat:e}=this.props;this.props.listeners.add((0,b.unproxy)(e),"change:liveLocation",(()=>{const{liveLocation:t}=e;t&&(this._removeParticipantListeners(t),this._addParticipantListeners(t));const{zoomLevel:a}=this.state;this.setState({clusters:this._getClusters(a)})}))}_listenToNetworkChange(){this.props.listeners.add(j.default,"change:online",(()=>{j.default.online||this._stopCheckingForIdle(),this.setState({status:j.default.online?D:N})}))}_startCheckingForIdle(){this._addIdleTimeout(),this._addActivityListeners()}_stopCheckingForIdle(){this._removeIdleTimeout(),this._removeActivityListeners()}_addIdleTimeout(){this._idleTimeoutId=this.props.setTimeout(this.onIdle,18e4)}_removeIdleTimeout(){null!=this._idleTimeoutId&&this.props.clearTimeout(this._idleTimeoutId),this._idleTimeoutId=null}_addActivityListeners(){O.forEach((e=>{this.props.listeners.add(document,e,this.onActivity)}))}_removeActivityListeners(){O.forEach((e=>{this.props.listeners.remove(document,e,this.onActivity)}))}_updateMinZoomClusters(){const e=this.getParticipants(),t=e?e.validLocations():[];this._minZoomClusters=(0,d.cluster)(t,S.MIN_ZOOM,null,c.MARKER_SIZE)}getParticipants(){const{liveLocation:e}=this.props.chat;return e?e.participants:null}_hasValidParticipants(){const e=this.getParticipants();return!!e&&!!e.validLocations().length}_getOpenFromCluster(){const e=this.getParticipants();if(!e||0===e.length)return null;const{openFrom:t}=this.props;let a=null;if(t)a=t;else{const t=e.at(0);t&&(a=t.id)}return a?(0,d.findClusterForParticipant)(this._minZoomClusters,a):null}_getClusters(e,t){const a=this.getParticipants();let n=null,i=[];a&&(t&&(n=a.get(t)),i=a.validLocations());let r=i,s=[];if(this._minZoomClusters.size>1){const e=this._getOpenFromCluster();if(e){const t=e.participants;r=t.validLocations(),s=i.filter((e=>{let{id:a}=e;return!t.get(a)}))}}return{primary:(0,d.cluster)(r,e,n,c.MARKER_SIZE),secondary:(0,d.cluster)(s,e,n,c.MARKER_SIZE)}}_getList(){const{clusters:e,selectedClusterId:t}=this.state,a=this.getParticipants();let n;if(null==a?void 0:a.length){if(t){const a=e.primary.get(t)||e.secondary.get(t);if(a){const e=a.participants;n=(0,A.jsx)(o.default,{participants:e,onParticipantSelected:this.onParticipantSelected,onClearSelected:this.onClearSelected})}}n||(n=(0,A.jsx)(E.default,{participants:a,onParticipantSelected:this.onParticipantSelected,onStopSharing:this.onStopSharing}))}return n}render(){let e,t;this.props.isFirstLevel?e=this.onClose:t=this.onClose;const{selectedParticipantId:a,selectedClusterId:n,mapType:i,showTraffic:r,atCenter:l,status:o}=this.state,d=o===D?(0,A.jsx)(y.default,{onRoadmapSelected:this.onRoadmapSelected,onSatelliteSelected:this.onSatelliteSelected,onTerrainSelected:this.onTerrainSelected,onTrafficToggled:this.onTrafficToggled,showTraffic:r}):null;let u,c;if(o===D||o===R){const e=a&&a.toString()||n;u=(0,A.jsxs)("div",{className:g.default.wrapper,children:[(0,A.jsx)("div",{className:(0,s.default)(g.default.backToCenter,{[g.default.visible]:!l}),onClick:this._onBackToCenter,children:(0,A.jsx)(w.default,{name:"return"})}),(0,A.jsx)(_.default,{clusters:this.state.clusters.primary,secondaryClusters:this.state.clusters.secondary,selectedMarkerId:e,openFrom:this.props.openFrom,mapType:i,showTraffic:r,atCenter:l,onMarkerSelected:this.onMarkerSelected,onClearSelected:this.onClearSelected,onLocationChanged:this.onLocationChanged,onMapMoved:this.onMapMoved}),this._getList()]})}if(o===R||o===N){const e=o===R,t=e?"live-location-refresh":"live-location-disconnected",a=e?v.default.t(710):v.default.t(749);c=(0,A.jsx)(T.default,{inactive:e,svgName:t,text:a,onClick:e?this._onRefresh:void 0})}return(0,A.jsxs)(h.default,{children:[(0,A.jsx)(p.DrawerHeader,{title:v.default.t(723),type:p.DRAWER_HEADER_TYPE.SMALL,menu:d,onBack:t,onCancel:e}),(0,A.jsxs)(f.default,{children:[u,c]})]})}}F.CONCERNS={chat:["id","liveLocation"]},F.displayName="LiveLocationDrawer";var B=(0,m.default)((0,k.default)((0,x.ListenerHOC)((0,I.default)(F,F.CONCERNS))));t.default=B},22163:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(23279)),r=a(57319),s=a(67294),l=a(33458),o=a(73098),d=n(a(48037)),u=a(88501),c=a(85893);const h=1e-4;class f extends s.Component{constructor(e){super(e),this.setMap=e=>this.map=e,this.handleLocationChanged=e=>{const{clusters:t,atCenter:a,selectedMarkerId:n}=this.props;if(this.props.onLocationChanged(),!n&&a)this._viewAllClusters();else if(n&&n===e){const e=t.get(n);e&&this._viewSingleCluster(e)}},this.handleIdle=(0,i.default)((()=>{const e=this.map;if(!e)return;const t=e.getZoom();if(this._zoomingToAllClusters){this._defaultZoomLevel=t,this._zoomingToAllClusters=!1;const e=this._zoomHistory;if(e.prev.preZoom===e.curr.postZoom&&e.prev.postZoom===e.curr.preZoom)return}this.props.onMapMoved(t,this.atCenter())}),100),this.handleDragStart=()=>{const e=this.map;if(!e)return;const t=e.getZoom();this.props.onMapMoved(t,!1)},this.handleResize=(0,i.default)((()=>{this._setMapLatLngDiff()}),250),this.mapOnClick=()=>{this.dismissMarkerTimer.debounceAndCap(50,100)},this.markerOnClick=(e,t)=>{this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel(),this.props.onMarkerSelected(t)},this.dismissMarkerTimer=new r.ShiftTimer((()=>{this.props.selectedMarkerId&&this.props.onClearSelected()})),this._defaultLatDiff=this._defaultLngDiff=.01,this._defaultZoomLevel=-1,this._zoomingToAllClusters=!1,this._zoomHistory={prev:{preZoom:-1,postZoom:-1},curr:{preZoom:-1,postZoom:-1}}}componentWillUnmount(){this.handleIdle.cancel(),this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize),this.dismissMarkerTimer.isScheduled()&&this.dismissMarkerTimer.cancel()}componentDidMount(){window.addEventListener("resize",this.handleResize),this._setMapLatLngDiff(),this._viewAllClusters()}componentDidUpdate(e){const{clusters:t,secondaryClusters:a,selectedMarkerId:n,atCenter:i}=this.props,{selectedMarkerId:r}=e;if(this._setMapLatLngDiff(),t.size&&(!r||n||i))if(n&&r!==n){const e=t.get(n)||a.get(n);e&&this._viewSingleCluster(e)}else!n&&i&&this._viewAllClusters()}_viewAllClusters(){const{clusters:e}=this.props;0===e.size||this.atCenter()||(this._zoomToFitAllClusters(e),this._centerAllClusters(e))}_viewSingleCluster(e){this._zoomToFitSingleCluster(e),this._centerSingleCluster(e)}_zoomToFitAllClusters(e){const t=this.map;if(!t)return;this._zoomingToAllClusters=!0,this._zoomHistory.prev.preZoom=this._zoomHistory.curr.preZoom,this._zoomHistory.curr.preZoom=t.getZoom();const a=this.getBounds(e),n=e.entries().next();if(1!==e.size||n.done)this._boundsTooSmall(a)?t.fitBounds(this._getDefaultBounds(a.getCenter())):t.fitBounds(a);else{const[,e]=n.value;this._zoomToFitSingleCluster(e,!1)}this._zoomHistory.prev.postZoom=this._zoomHistory.curr.postZoom,this._zoomHistory.curr.postZoom=t.getZoom()}_zoomToFitSingleCluster(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=this.map;if(!a)return;if(t&&this._boundsTooSmall(a.getBounds()))return;const n=e.northeast,i=e.southwest,r=new google.maps.LatLng(n.lat,n.lng),s=new google.maps.LatLng(i.lat,i.lng),l=new google.maps.LatLngBounds(s,r);this._boundsTooSmall(l)?a.fitBounds(this._getDefaultBounds(l.getCenter())):a.fitBounds(l)}_centerAllClusters(e){const t=this.getBounds(e).getCenter();this._centerMap(t)}_centerSingleCluster(e){const t=new google.maps.LatLng(e.center);this._centerMap(t)}_centerMap(e){const t=this.map;t&&(t.getCenter().equals(e)||t.panTo(e))}_getInitialCenter(){return this.getBounds(this.props.clusters).getCenter()}getBounds(e){const t=new google.maps.LatLngBounds;return e.forEach((e=>{t.extend({lat:e.lat,lng:e.lng})})),t}_boundsTooSmall(e){const t=e.getNorthEast(),a=e.getSouthWest(),n=t.lat()-a.lat(),i=t.lng()-a.lng(),r=Math.abs(n)<this._defaultLatDiff,s=Math.abs(i)<this._defaultLngDiff;return r||s}_getDefaultBounds(e){const t=new google.maps.LatLng(e.lat()-this._defaultLatDiff/2,e.lng()-this._defaultLngDiff/2),a=new google.maps.LatLng(e.lat()+this._defaultLatDiff/2,e.lng()+this._defaultLngDiff/2);return new google.maps.LatLngBounds(t,a)}atCenter(){const e=this.map;if(!e)return!0;const t=e.getCenter(),a=this._getInitialCenter(),n=t.lat()-a.lat(),i=t.lng()-a.lng();return Math.abs(n)<h&&Math.abs(i)<h&&this._defaultZoomLevel===e.getZoom()}_setMapLatLngDiff(){const e=this.map;if(!e)return;const t=e.getCenter(),a=e.getDiv(),n=(0,u.getMetersPerPixel)(t.lat(),o.INITIAL_ZOOM),i=a.offsetWidth*n,r=a.offsetHeight*n;this._defaultLatDiff=(0,u.getLatDiff)(r),this._defaultLngDiff=(0,u.getLngDiff)(i,t.lat())}getMarkers(){const{clusters:e,secondaryClusters:t,selectedMarkerId:a}=this.props,n=[],i=(e,t)=>{n.push((0,c.jsx)(d.default,{marker:{isLive:!0,cluster:e,onLocationChanged:()=>this.handleLocationChanged(t),selected:a===t,onClick:e=>this.markerOnClick(e,t)}},t))};return e.forEach(i),t.forEach(i),n}getTrafficLayer(){return this.props.showTraffic?(0,c.jsx)(l.TrafficLayer,{autoRefresh:!0}):null}render(){return(0,c.jsxs)(l.GoogleMap,{ref:this.setMap,defaultCenter:this._getInitialCenter(),defaultOptions:this.props.getMapOptions(),defaultZoom:o.INITIAL_ZOOM,mapTypeId:this.props.mapType,onClick:this.mapOnClick,onDragStart:this.handleDragStart,onIdle:this.handleIdle,children:[this.getMarkers(),this.getTrafficLayer()]})}}f.displayName="LiveLocationMap";var p=(0,o.withConfig)((0,l.withScriptjs)((0,l.withGoogleMap)(f)));t.default=p},73098:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MapType=t.MIN_ZOOM=t.INITIAL_ZOOM=void 0,t.withConfig=function(e){return class extends r.Component{constructor(){super(...arguments),this.state={authFailed:!0===window.gm_authFailed},this._onAuthFailed=()=>{window.gm_authFailed=!0,this.setState({authFailed:!0});const e=this._getUrl();__LOG__(4,void 0,new Error,!0)`url: ${e}\ntarget: ${"web"}`,SEND_LOGS("google-map-auth-failed")}}componentDidMount(){window.gm_authFailure=this._onAuthFailed}componentWillUnmount(){window.gm_authFailure=void 0}_getUrl(){const e={client:"gme-whatsappinc",v:"3",libraries:"geometry,drawing,places",t:Math.floor(Date.now()/864e5)};return d.URL.build("https://maps.googleapis.com/maps/api/js",e)}getMapOptions(){return{clickableIcons:!1,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,minZoom:3,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT}}}render(){if(this.state.authFailed)return(0,u.jsx)("div",{className:l.default.authFailed,children:s.default.t(512)});const t=this._getUrl(),a=(0,u.jsx)("div",{className:l.default.loading,children:(0,u.jsx)(o.Spinner,{color:"highlight"})}),n=(0,u.jsx)("div",{className:l.default.container}),r=(0,u.jsx)("div",{className:l.default.map});return(0,u.jsx)(e,(0,i.default)({googleMapURL:t,loadingElement:a,containerElement:n,mapElement:r,getMapOptions:this.getMapOptions},this.props))}}};var i=n(a(81109)),r=a(67294),s=n(a(43725)),l=n(a(98057)),o=a(11054),d=a(2541),u=a(85893);const c=a(54302)({ROADMAP:"roadmap",SATELLITE:"satellite",TERRAIN:"terrain"});t.MapType=c;t.INITIAL_ZOOM=15;t.MIN_ZOOM=3},48037:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(94184)),r=a(67294),s=a(33458),l=n(a(57850)),o=a(9903),d=a(84387),u=n(a(48347)),c=n(a(68050)),h=n(a(4478)),f=n(a(2773)),p=a(85893);class m extends r.Component{constructor(e){super(e),this._setOverlay=e=>{this.overlay=e},this.handleLocationChanged=()=>{this.props.marker.isLive&&this.props.marker.onLocationChanged()},this._handleLastUpdatedTimeChanged=()=>{if(!this.props.marker.isLive)return;null!=this.timeoutId&&(this.props.clearTimeout(this.timeoutId),this.timeoutId=null);const e=(0,o.isStale)(this.props.marker.cluster);this.state.stale!==e&&this.setState({stale:e}),e||this._setStaleTimeout()},this._getPixelPositionOffset=(e,t)=>({x:-e/2,y:-t}),this.state={stale:!e.marker.isLive||(0,o.isStale)(e.marker.cluster)}}_setStaleTimeout(){if(!this.props.marker.isLive)return;const{cluster:e}=this.props.marker,t=o.STALE_THRESHOLD-(0,o.getSmallestElapsedTime)(e);t<=0||(this.timeoutId=this.props.setTimeout((()=>this.setState({stale:!0})),1e3*t))}componentDidMount(){if(!this.props.marker.isLive)return;const{cluster:e}=this.props.marker;(0,o.isStale)(e)||this._setStaleTimeout();e.participants.forEach((e=>{this.props.listeners.add(e,"change:lat change:lng",this.handleLocationChanged),this.props.listeners.add(e,"change:lastUpdated",this._handleLastUpdatedTimeChanged)}))}_getMapPaneName(){return this.props.marker.onClick?s.OverlayView.OVERLAY_MOUSE_TARGET:s.OverlayView.OVERLAY_LAYER}render(){let e,t,a,n;const{onClick:r,selected:d}=this.props.marker,{stale:h}=this.state;if(this.props.marker.isLive){const{cluster:n}=this.props.marker;e=n.lat,t=n.lng,a=n.participants.map((e=>{let{id:t}=e;return t}))}else e=this.props.marker.lat,t=this.props.marker.lng,a=[this.props.marker.contact.id];if(d){let a,i,r;if(this.props.marker.isLive){const{cluster:e}=this.props.marker,t=e.participants,n=e.hasSingleParticipant()?t.at(0):null;n&&(a=n.id,i=n.accuracy,r=n.isMe)}else{const{contact:e}=this.props.marker;a=e.id,r=e.isMe}a&&(n=(0,p.jsx)(c.default,{id:a,lat:e,lng:t,accuracy:i,isMe:r||!1,markerSize:o.MARKER_SIZE}))}return(0,p.jsx)(s.OverlayView,{ref:this._setOverlay,position:{lat:e,lng:t},mapPaneName:this._getMapPaneName(),getPixelPositionOffset:this._getPixelPositionOffset,children:(0,p.jsx)(f.default.Provider,{value:this.context,children:(0,p.jsxs)("div",{className:(0,i.default)(u.default.container,{[u.default.selected]:d}),onClick:r,children:[n,(0,p.jsx)("div",{className:(0,i.default)(u.default.glow,{[u.default.stale]:h,[u.default.expired]:!this.props.marker.isLive}),style:{height:o.AVATAR_SIZE,width:o.AVATAR_SIZE,padding:o.GLOW_SIZE},children:(0,p.jsx)("div",{children:(0,p.jsx)(l.default,{ids:a,size:o.IMAGE_SIZE,border:!0,showCount:!0})})}),(0,p.jsx)("div",{className:(0,i.default)(u.default.pin,{[u.default.selected]:d}),style:{height:o.PIN_SIZE,width:o.PIN_SIZE,marginLeft:(o.MARKER_SIZE-o.PIN_SIZE)/2}})]})})})}}m.contextType=f.default,m.displayName="LiveLocationMarker";var g=(0,h.default)((0,d.ListenerHOC)(m));t.default=g},27766:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,d.jsx)(l.MenuBarItem,{a8nText:"live-location-map-menu",icon:(0,d.jsx)(o.default,{name:"menu"}),title:s.default.t(821),children:(0,d.jsxs)(i.Dropdown,{type:"dropdown_menu",flipOnRTL:!0,dirX:i.DirX.LEFT,dirY:i.DirY.BOTTOM,children:[(0,d.jsx)(r.DropdownItem,{a8n:"mi-roadmap-view menu-item",action:e.onRoadmapSelected,children:s.default.t(704)}),(0,d.jsx)(r.DropdownItem,{a8n:"mi-satellite-view menu-item",action:e.onSatelliteSelected,children:s.default.t(705)}),(0,d.jsx)(r.DropdownItem,{a8n:"mi-terrain-view menu-item",action:e.onTerrainSelected,children:s.default.t(706)}),(0,d.jsx)(r.DropdownItem,{a8n:"mi-traffic menu-item",action:e.onTrafficToggled,children:e.showTraffic?s.default.t(707):s.default.t(708)})]})})};var i=a(60811),r=a(71174),s=n(a(43725)),l=a(46346),o=n(a(23217)),d=a(85893)},32213:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onParticipantSelected:t,onStopSharing:a,participants:n}=e,m=(0,f.default)((()=>new d.default)),g=(0,i.useMemo)((()=>n.map((e=>({itemKey:e.id.toString(),contentKey:e.valid?"valid":"invalid",participant:e})))),[n]);return(0,p.jsx)(o.default,{className:c.default.list,flatListControllers:[m.current],children:(0,p.jsx)(l.FlatList,{data:g,renderItem:e=>{const{participant:n}=e,i=n.valid?(0,p.jsx)(s.default,{reason:"live-location-time",children:(0,p.jsx)(h.default,{participant:n})}):u.default.t(731),l=n.valid?()=>t(n.contact.id.toString()):null,o=n.isMe?(0,p.jsx)("div",{onClick:a,className:c.default.stopSharingButton,children:u.default.t(721)}):null;return(0,p.jsx)(r.Contact,{contact:n.contact,secondary:i,onClick:l,detail:o})},flatListController:m.current,direction:"vertical"})})};var i=a(67294),r=a(2732),s=n(a(51099)),l=a(47915),o=n(a(44942)),d=n(a(30855)),u=n(a(43725)),c=n(a(67493)),h=n(a(61804)),f=n(a(59552)),p=a(85893)},68050:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(94184)),r=n(a(48360)),s=a(67294),l=a(88102),o=n(a(47620)),d=a(19380),u=a(71174),c=a(12591),h=a(50101),f=n(a(43725)),p=a(54586),m=a(12176),g=n(a(85753)),v=n(a(23217)),x=a(18644),C=n(a(24717)),_=a(85893);class S extends s.Component{constructor(e){super(e),this.mouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this.mouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this._handleDirection=()=>{const{lat:e,lng:t}=this.props;(0,c.openExternalLink)((0,p.getDirectionUrl)(e,t))},this.handleMessage=()=>{const{id:e}=this.props;(0,h.findChat)(e).then((e=>{e.active&&l.Cmd.existsDrawerRight((e=>{e&&2===o.default.column&&l.Cmd.closeDrawerRight()})),l.Cmd.openChatFromUnread(e).then((t=>{t&&l.Cmd.focusChatTextInput(e)}))}))},this._handleContextOpen=e=>{const t=null==e?void 0:e.target;this.setState({contextMenu:{menu:this._getContextMenu(),anchor:t}})},this.handleContextClose=()=>{this.setState({contextMenu:!1})},this.state={hover:!1,contextMenu:!1}}_getContextMenu(){const e=[];return e.push((0,_.jsx)(u.DropdownItem,{a8n:"get-directions",action:this._handleDirection,children:r.default._("Get directions",null,{hk:"MwnzW"})},"direction")),e.push((0,_.jsx)(u.DropdownItem,{a8n:"send-message",action:this.handleMessage,children:f.default.t(822)},"message")),e}render(){const{id:e,accuracy:t,isMe:a,markerSize:n}=this.props,r=d.ContactCollection.assertGet(e),s=(0,_.jsx)("div",{className:g.default.name,children:(0,_.jsx)(m.Name,{ellipsify:!0,you:!0,contact:r})}),l=null!=t?(0,_.jsx)("div",{className:g.default.status,children:f.default.t(695,{accuracy:t,_plural:t})}):null,o=a?null:(0,_.jsx)("div",{onClick:this._handleContextOpen,className:g.default.menuButton,children:(0,_.jsx)(v.default,{name:"down"})}),u=(0,_.jsx)("div",{className:g.default.triangle}),c=!a&&this.state.contextMenu?(0,_.jsx)(x.UIE,{displayName:"LiveLocationPopupContextMenu",escapable:!0,popable:!0,requestDismiss:this.handleContextClose,children:(0,_.jsx)(C.default,{contextMenu:this.state.contextMenu})}):null;return(0,_.jsxs)("div",{className:(0,i.default)(g.default.container,{[g.default.twoLines]:!!l}),style:{transform:`translateX(calc(-50% + ${n/2}px))`},children:[(0,_.jsxs)("div",{className:g.default.popup,onMouseOver:this.mouseEnter,onMouseEnter:this.mouseEnter,onMouseDown:this.mouseLeave,onMouseUp:this.mouseEnter,onMouseLeave:this.mouseLeave,children:[s,l,o]}),u,c]})}}t.default=S,S.displayName="LiveLocationPopup"},86058:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)("div",{className:e.inactive?i.default.inactive:i.default.offline,onClick:e.onClick,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:i.default.circle,children:(0,s.jsx)(r.default,{name:e.svgName})}),(0,s.jsx)("div",{className:i.default.text,children:e.text})]})})};var i=n(a(85529)),r=n(a(23217)),s=a(85893)},61804:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(43725)),s=n(a(98007)),l=a(19529),o=a(99935),d=a(85893);const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e;t&&(a+=59);const n=3600,i=Math.floor(a/n),r=a%n,s=Math.floor(r/60);return{hours:i,minutes:s}},c=e=>e.isMe?(e=>{const{hours:t,minutes:a}=u(e,!0);return t>0?a>0?r.default.t(712,{hours:t,minutes:a}):r.default.t(711,{hours:t,_plural:t}):r.default.t(713,{minutes:a,_plural:a})})(e.remainingTime()):(e=>{const{hours:t,minutes:a}=u(e);return t>0?a>0?r.default.t(725,{hours:t,minutes:a}):r.default.t(724,{hours:t,_plural:t}):a>0?r.default.t(727,{minutes:a,_plural:a}):r.default.t(726)})(e.elapsedTime());var h=e=>{let{participant:t}=e;const[a,n]=(0,i.useState)((()=>c(t)));(0,l.useListener)(t,t.isMe?"change:expiration":"change:lastUpdated",(e=>n(c(e))));const[r,u]=(0,s.default)((()=>n(c(t))),6e4),[h]=(0,o.useManualTimeout)((()=>{n(c(t)),r()})),{expiration:f,lastUpdated:p}=t;return(0,i.useEffect)((()=>{const e=(e=>e.isMe?e.remainingTime():e.elapsedTime())(t)%60;u(),h(1e3*e)}),[f,p]),(0,d.jsx)("span",{children:a})};t.default=h},88501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatDiff=function(e){return i(e/a)},t.getLngDiff=function(e,t){const r=a*Math.cos(n(t));return i(e/r)},t.getMetersBetweenLatLngs=function(e,t,i,r){const s=n(i-e),l=n(r-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n(e))*Math.cos(n(i))*Math.sin(l/2)*Math.sin(l/2),d=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return a*d},t.getMetersPerPixel=function(e,t){return 156543.03392*Math.cos(e*Math.PI/180)*(1/2**t)};const a=6371e3;function n(e){return e*(Math.PI/180)}function i(e){return e*(180/Math.PI)}},31839:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=n(a(72758)),l=n(a(60453)),o=n(a(69637)),d=a(94790),u=a(85893);var c=(0,r.forwardRef)(((e,t)=>(0,u.jsxs)(l.default,{ref:t,children:[(0,u.jsx)(d.DrawerHeader,{a8n:"drawer-title-auto-download",title:i.default._("Media Auto-Download",null,{hk:"2iFTSV"}),onBack:e.onClose,type:d.DRAWER_HEADER_TYPE.LARGE}),(0,u.jsx)(o.default,{children:(0,u.jsx)(s.default,{},"auto-download")})]})));t.default=c},7326:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(51463)),r=n(a(99964)),s=a(67294),l=a(88102),o=n(a(60453)),d=n(a(35721)),u=n(a(69637)),c=a(94790),h=n(a(33308)),f=n(a(66797)),p=n(a(56318)),m=a(99234),g=a(242),v=a(24505),x=n(a(43725)),C=a(10435),_=n(a(4448)),S=a(33646),y=n(a(43556)),j=a(82857),E=n(a(23217)),T=a(13923),I=a(90011),b=n(a(41956)),w=a(85893);function k(e){let t,{ephemeralDuration:a,handleEphemeralDurationClick:n}=e;if(!(0,C.isDisappearingModeEnabled)())return null;t=a>0?(0,C.isEphemeral24HDurationEnabled)()?(0,v.getDisappearingMessageDurationString)(a):x.default.t(459):x.default.t(458);const i=(0,w.jsx)(E.default,{className:_.default.chevronIcon,name:"chevron-right-alt",directional:!0});return(0,w.jsx)(h.default,{children:(0,w.jsxs)(d.default,{onClick:n,side:i,multiline:!0,children:[(0,w.jsx)("div",{className:_.default.header,children:(0,w.jsx)(T.TextHeader,{level:"3",theme:"title",children:x.default.t(570)})}),(0,w.jsx)(T.TextParagraph,{theme:"muted",children:t})]})})}var P=(0,s.forwardRef)(((e,t)=>{const{participants:a=[],onSubmit:n}=e,d=(0,s.useRef)(null),v=(0,s.useRef)(null),[T,P]=(0,s.useState)(e.subject||""),[M,L]=(0,s.useState)(e.thumb),[A,O]=(0,s.useState)(e.full),[D,R]=(0,s.useState)((()=>{var e,t;let a;if((0,C.isDisappearingModeEnabled)()){const e=(0,m.getMaybeMeUser)();e&&(a=(0,g.getDisappearingModeSettingForUser)(e))}return null!==(e=null===(t=a)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}));(0,s.useEffect)((()=>{var e;null===(e=d.current)||void 0===e||e.restoreFocus()}),[]);const N=()=>{const e=(0,f.default)(T.trim());n(e,M,A,D,a)},F=T.trim().length>0,B=F?(0,w.jsx)("div",{className:_.default.nextButton,children:(0,w.jsx)(j.Round,{a8nText:"create-group-btn",onClick:(0,i.default)(N),children:(0,w.jsx)(E.default,{name:"checkmark-medium"})})}):null;return(0,s.useImperativeHandle)(t,(()=>({restoreFocus:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.restoreFocus()},getElement:()=>v.current}))),(0,w.jsxs)(o.default,{children:[(0,w.jsx)(c.DrawerHeader,{title:x.default.t(939),type:c.DRAWER_HEADER_TYPE.LARGE,onBack:e.onBack}),(0,w.jsxs)(u.default,{children:[(0,w.jsxs)(h.default,{children:[(0,w.jsx)("div",{className:_.default.section,children:(0,w.jsx)(S.PhotoPickerLoadable,{type:y.default.GROUP,attachToChat:!1,startImage:A,onImageSet:(e,t)=>{L(e),O(t)}})}),(0,w.jsx)("div",{"data-a8n":r.default.key("group-subject"),className:_.default.section,ref:v,children:(0,w.jsx)(I.TextInput,{ref:d,value:T,maxLength:25,showRemaining:!0,onChange:e=>{P(e)},placeholder:x.default.t(582),onEnter:F?(0,i.default)(N):()=>{},supportsEmoji:!0})})]}),(0,w.jsx)(k,{ephemeralDuration:D,handleEphemeralDurationClick:()=>{l.Cmd.openModal((0,w.jsx)(p.default,{initialDuration:D,onDurationSelected:R}))}}),(0,w.jsx)(b.default,{transitionName:"btn",children:B})]})]})}));t.default=P},15309:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(63105)),r=n(a(41609)),s=n(a(91966)),l=n(a(99964)),o=n(a(45120)),d=n(a(52013)),u=n(a(94184)),c=n(a(48360)),h=a(67294),f=a(80140),p=a(88102),m=n(a(52665)),g=a(19380),v=n(a(35487)),x=n(a(60453)),C=n(a(69637)),_=a(94790),S=a(85600),y=n(a(44942)),j=n(a(30855)),E=a(55414),T=n(a(43725)),I=n(a(95575)),b=n(a(48690)),w=n(a(53153)),k=a(82857),P=a(52596),M=a(64551),L=a(11054),A=n(a(23217)),O=a(50452),D=n(a(90012)),R=n(a(41956)),N=a(85893);const F=(0,O.genId)("max_participant_toast");class B extends h.Component{constructor(){super(...arguments),this.state={searchText:"",participants:this.props.participants,shouldFocus:!0,isBusy:!1},this.flatListController=new j.default,this.setRefParticipantList=e=>{this.refParticipantList=e},this.setRefList=e=>{this.refList=e},this.handleKeyDown=e=>{if("Backspace"===e.key&&!this.state.searchText&&!(0,r.default)(this.state.participants)){e.preventDefault();const t=this.state.participants;this.setState({participants:t.slice(0,t.length-1),shouldFocus:!0})}},this.handleInput=e=>{this.setState({searchText:e.target.value})},this.handleReset=()=>{this.setState({searchText:"",shouldFocus:!0})},this.focus=()=>{d.default.focus(this.refInput)},this.handleBack=()=>{this.props.onBack()},this.handleContinue=()=>{this.props.onContinue(this.state.participants)},this.handleDelete=(e,t)=>{const a=(0,i.default)(this.state.participants,(e=>!e.id.equals(t.id)));this.setState({participants:a,shouldFocus:!a.length})},this.handleContactClick=(e,t)=>{this.state.participants.find((e=>e.id.equals(t.id)))?this._removeContact(t):t.isBlocked()?p.Cmd.openModal((0,N.jsx)(m.default,{title:T.default.t(146),onOK:()=>{this._unblockAndAddContact(t),p.Cmd.closeModal()},onCancel:()=>p.Cmd.closeModal(),okText:T.default.t(1907),cancelText:T.default.t(1761),children:c.default._("The contact you have selected is blocked. Would you like to unblock them and add them to the group?",null,{hk:"3i4hjJ"})})):this.addContact(t)},this.handleFocusList=e=>{this.refList&&(e.preventDefault(),e.stopPropagation(),o.default.shouldIndicateFocus(),this.refList&&this.refList.focusFirst())},this._handleFocusParticipants=e=>{e.repeat||this.refInput&&0!==this.refInput.selectionStart||this.refParticipantList&&(e.preventDefault(),e.stopPropagation(),E.HotKeys.flashFocus=0,this.refParticipantList&&this.refParticipantList.focusLast())},this.handleSelectFirst=e=>{e.preventDefault(),e.stopPropagation();const t=this.getFilteredContacts()[0];t&&this.handleContactClick(e,t)},this.handleFocusSearch=()=>{o.default.shouldIndicateFocus(),d.default.focus(this.refInput)},this.setRefInput=e=>{this.refInput=e},this._setRefSizer=e=>{this._refSizer=e}}componentDidMount(){this.focus()}componentDidUpdate(){this._adjustInput()}getFilteredContacts(){const e=(0,s.default)(g.ContactCollection.getFilteredContacts(),this.state.participants);let t=this.state.searchText;if(!t)return e;t=T.default.accentFold(t);const a=(0,b.default)(t);return e.filter((e=>e.searchMatch(t,a)))}_adjustInput(){if(this.refInput){const e=this.refInput.offsetParent.offsetWidth-10,t=this._refSizer.offsetWidth,a=t>e?e:t;let n;this.refInput.style.width=a+"px",n=e-this.refInput.offsetLeft-a>0?e-this.refInput.offsetLeft:e,this.refInput.style.width=n+"px",this.state.shouldFocus&&this.focus()}}addContact(e){const t=this.state.participants;if(t.length>=M.ServerProps.maxParticipants){const e=T.default.t(59,{max:M.ServerProps.maxParticipants});p.Cmd.openToast((0,N.jsx)(O.Toast,{msg:e,id:F}))}else this.setState({participants:t.concat(e),searchText:"",shouldFocus:!0})}_removeContact(e){const t=this.state.participants;this.setState({participants:(0,i.default)(t,(t=>!e.id.equals(t.id))),shouldFocus:!0})}_unblockAndAddContact(e){this.setState({isBusy:!0}),(0,f.unblockContact)(e).then((()=>{this.props.getUnmountSignal().aborted||(this.addContact(e),this.setState({isBusy:!1}))})).catch((()=>{this.setState({isBusy:!1})}))}render(){var e,t,a;let n;this.state.isBusy?n=(0,N.jsx)("div",{className:I.default.spinner,children:(0,N.jsx)(L.Spinner,{stroke:6,size:24})}):(null===(e=this.state.participants)||void 0===e?void 0:e.length)&&(n=(0,N.jsx)(k.Round,{a8nText:"group-participants-btn",onClick:this.handleContinue,children:(0,N.jsx)(A.default,{name:"arrow-forward",directional:!0})}));const i=(null===(t=this.state.participants)||void 0===t?void 0:t.length)?" ":T.default.t(566),r={down:this.handleFocusList,enter:this.state.searchText?this.handleSelectFirst:(null===(a=this.state.participants)||void 0===a?void 0:a.length)?this.handleContinue:()=>{},up:this._handleFocusParticipants};r[T.default.LR("left","right")]=this._handleFocusParticipants;const s=this.getFilteredContacts();let o;return o=0===s.length?(0,N.jsx)(S.SearchContacts,{}):(0,N.jsx)(v.default,{ref:this.setRefList,flatListController:this.flatListController,contacts:s,onClick:this.handleContactClick,onFocusSearch:this.handleFocusSearch,showPersonGroupDivisionHeader:!1}),(0,N.jsxs)(x.default,{children:[(0,N.jsx)(_.DrawerHeader,{title:c.default._("Add group participants",null,{hk:"24QOhm"}),type:_.DRAWER_HEADER_TYPE.LARGE,onBack:this.handleBack}),(0,N.jsxs)(C.default,{children:[(0,N.jsx)("div",{className:I.default.search,children:(0,N.jsx)("div",{children:(0,N.jsxs)(E.HotKeys,{handlers:r,className:I.default.inputLine,children:[(0,N.jsx)("div",{"data-list-scroll-container":!0,children:(0,N.jsx)(w.default,{ref:this.setRefParticipantList,theme:"list-names",contacts:this.state.participants,onDelete:this.handleDelete,onFocusSearch:this.handleFocusSearch})}),(0,N.jsx)("input",{"data-a8n":l.default.key("inputarea"),className:(0,u.default)(I.default.inputarea,P.SELECTABLE_INPUT_CSS_CLASS),ref:this.setRefInput,placeholder:i,onKeyDown:this.handleKeyDown,onChange:this.handleInput,value:this.state.searchText,type:"text"}),(0,N.jsx)("span",{className:I.default.inputareaSizer,ref:this._setRefSizer,children:this.state.searchText})]})})}),(0,N.jsx)(y.default,{className:I.default.contacts,flatListControllers:[this.flatListController],children:o}),(0,N.jsx)(R.default,{transitionName:"btn",className:I.default.drawerSection,children:n})]})]})}}B.defaultProps={participants:[]},B.displayName="NewGroupParticipantsDrawer";var U=(0,D.default)(B);t.default=U},46385:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(38322)),s=n(a(60453)),l=n(a(69637)),o=a(94790),d=n(a(43725)),u=a(72472),c=a(85893);var h=(0,i.forwardRef)(((e,t)=>(0,c.jsxs)(s.default,{ref:t,children:[(0,c.jsx)(o.DrawerHeader,{a8n:"drawer-title-notifications",title:d.default.t(960),onBack:e.onClose,type:o.DRAWER_HEADER_TYPE.LARGE}),(0,c.jsx)(l.default,{children:(0,c.jsx)(r.default,{mute:u.MuteCollection.globalMute(),reactionsMute:u.MuteCollection.globalReactionsMute()},"notifications")})]})));t.default=h},22082:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(48926)),s=n(a(45095)),l=n(a(48360)),o=a(67294),d=n(a(56720)),u=n(a(70714)),c=a(41075),h=a(32826),f=a(16593),p=a(88102),m=a(19380),g=n(a(60453)),v=n(a(69637)),x=a(94790),C=n(a(70835)),_=n(a(33308)),S=a(99234),y=a(87470),j=n(a(43725)),E=a(10435),T=n(a(16866)),I=a(75861),b=a(4831),w=a(39434),k=n(a(23217)),P=a(50452),M=a(19529),L=a(49082),A=a(85893);const O={drawerTitle:{paddingTop:"hc2u0oym",paddingEnd:"f9ovudaz",paddingBottom:"myel2vfb",paddingStart:"gx1rr48f"},chevronRightIcon:{color:"g4ti3y4y",height:"qgpfrw6h"},readReceiptsCheckBoxWrapper:{width:"jswlwoyz",display:"p357zi0d",justifyContent:"ac2vgrno"}};function D(e){const t=(0,y.getAllDurations)().find((t=>t.value===e));return void 0===t&&"number"==typeof e?(__LOG__(4,void 0,new Error,!0)`Could not find matching duration label for duration: "${e}"`,SEND_LOGS("No matching duration label"),l.default._("On",null,{hk:"1HkDTU"})):void 0===t?l.default._("Off",null,{hk:"1ueKlZ"}):t.label}function R(e,t){var a,n,i,y;const[w,k]=(0,o.useState)((()=>F((0,S.getUserPrivacySettings)()))),[R,H]=(0,o.useState)({status:null,groupadd:null,last:null,profile:null}),G=(0,s.default)(m.ContactCollection.get((0,S.getMaybeMeUser)()),"ContactCollection.get(getMaybeMeUser())"),V=(0,L.useModelValues)(G,["disappearingModeDuration"]).disappearingModeDuration;function W(e){const t=F(e.privacySettings);if(null==t)throw new Error(`Incomplete privacy settings: ${Object.keys((0,S.getUserPrivacySettings)()).join(", ")}`);k(t),H((0,I.disallowedRowsToLists)(e.privacyDisallowedRows))}(0,o.useEffect)((()=>{const t=new u.default;return null==w&&(0,r.default)((function*(){try{const e=yield(0,c.updatePrivacySettings)();if(t.signal.aborted)return;W(e)}catch(t){__LOG__(4,void 0,new Error,!0)`privacy_settings_drawer: get privacy settings failed ${t.stack}`,SEND_LOGS("privacy_settings_drawer: get privacy settings failed"),e.onClose(),p.Cmd.openToast((0,A.jsx)(P.Toast,{id:(0,P.genId)(),msg:j.default.t(1054)}))}}))(),()=>t.abort()}),[]),(0,o.useEffect)((()=>{const e=new u.default;return(0,r.default)((function*(){const t=yield(0,I.queryDisallowedLists)();e.signal.aborted||H(t)}))(),()=>e.abort()}),[]),(0,M.useListener)(p.Cmd,"account_sync_for_privacy",(e=>{W(e)}));const z=j.default.t(1044);if(!w)return(0,A.jsx)(T.default,{title:z,error:!1});const q=(0,E.isDefaultDisappearingMessagesEnabled)(),{lastSeen:K,profilePicture:Y,about:Q,groupAdd:X,readReceipts:Z}=w;return(0,A.jsxs)(g.default,{ref:t,theme:"striped",children:[(0,A.jsx)(x.DrawerHeader,{a8n:"drawer-title-privacy",title:z,onBack:e.onClose,type:x.DRAWER_HEADER_TYPE.LARGE}),(0,A.jsxs)(v.default,{children:[(0,A.jsxs)(_.default,{title:j.default.t(1063),titleXStyle:O.drawerTitle,theme:"padding-no-vertical",animation:!1,ellipsify:!1,children:[(0,A.jsx)(N,{title:j.default.t(1059),onClick:()=>{e.onOpenVisibilityEditDrawer("lastSeen")},children:(0,A.jsx)("span",{children:B(K,null===(a=R.last)||void 0===a?void 0:a.disallowedList.length)})}),(0,A.jsx)(N,{title:j.default.t(1060),onClick:()=>{e.onOpenVisibilityEditDrawer("profilePicture")},children:(0,A.jsx)("span",{children:B(Y,null===(n=R.profile)||void 0===n?void 0:n.disallowedList.length)})}),(0,A.jsx)(N,{title:j.default.t(1056),onClick:()=>{e.onOpenVisibilityEditDrawer("about")},children:(0,A.jsx)("span",{children:B(Q,null===(i=R.status)||void 0===i?void 0:i.disallowedList.length)})}),(0,A.jsx)(C.default,{title:j.default.t(1061),icon:(0,A.jsx)("div",{className:(0,d.default)(O.readReceiptsCheckBoxWrapper),children:(0,A.jsx)(f.CheckBox,{checked:Z===b.ALL_NONE.all,stopPropagation:!0,onChange:()=>{}})}),theme:"privacy",isLastItem:!0,onClick:()=>{!function(){U.apply(this,arguments)}(w,k,Z)},children:(0,A.jsx)("span",{children:j.default.t(1062)})})]}),q&&(0,A.jsx)(_.default,{theme:"padding-no-vertical",title:l.default._("Disappearing messages",null,{hk:"1u7uAT"}),titleXStyle:O.drawerTitle,animation:!1,children:(0,A.jsx)(N,{title:l.default._("Default message timer",null,{hk:"2tVUXb"}),onClick:e.onOpenEphemeralityDrawer,isLastItem:!0,children:(0,A.jsx)("span",{children:D(V)})})}),(0,A.jsxs)(_.default,{theme:q?"padding":"padding-no-vertical",animation:!1,children:[(0,A.jsx)(N,{title:j.default.t(1058),onClick:()=>{e.onOpenVisibilityEditDrawer("groupAdd")},children:(0,A.jsx)("span",{children:B(X,null===(y=R.groupadd)||void 0===y?void 0:y.disallowedList.length)})}),(0,A.jsx)(N,{title:j.default.t(1057),isLastItem:!0,onClick:e.onOpenBlockedContacts,children:(0,A.jsx)("span",{children:0===h.BlocklistCollection.length?l.default._("None",null,{hk:"3cviAo"}):h.BlocklistCollection.length})})]})]})]})}function N(e){let{title:t,onClick:a,isLastItem:n,children:i}=e;return(0,A.jsx)(C.default,{title:t,theme:"privacy",icon:(0,A.jsx)(k.default,{name:j.default.isRTL()?"chevron-left":"chevron-right",iconXstyle:O.chevronRightIcon}),onClick:a,isLastItem:n,children:i})}function F(e){const{about:t,groupAdd:a,lastSeen:n,profilePicture:i,readReceipts:r}=e;if(null!=t&&null!=a&&null!=n&&null!=i&&null!=r)return{about:t,groupAdd:a,lastSeen:n,profilePicture:i,readReceipts:r}}function B(e,t){switch(e){case b.VISIBILITY.all:return j.default.t(1051);case b.VISIBILITY.contacts:return j.default.t(1048);case b.VISIBILITY.contact_blacklist:return null==t?"":j.default.t(1050,{count:t,_plural:t});case b.VISIBILITY.none:return j.default.t(1052);default:return""}}function U(){return(U=(0,r.default)((function*(e,t,a){const n=a===b.ALL_NONE.all?b.ALL_NONE.none:b.ALL_NONE.all;t((0,i.default)((0,i.default)({},e),{},{readReceipts:n}));try{n===b.ALL_NONE.none?yield(0,w.setPrivacyForOneCategory)({name:"readreceipts",value:"none"}):yield(0,w.setPrivacyForOneCategory)({name:"readreceipts",value:"all"})}catch(e){__LOG__(3,void 0,void 0,!0)`privacy_settings_drawer: set readreceipts failed ${e.stack}`,SEND_LOGS("privacy_settings_drawer: set readreceipts failed"),p.Cmd.openToast((0,A.jsx)(P.Toast,{id:(0,P.genId)(),msg:j.default.t(1055)}))}}))).apply(this,arguments)}var H=(0,o.forwardRef)(R);t.default=H},39828:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PrivacyVisibilityEditDrawer=void 0;var i=n(a(48926)),r=n(a(48360)),s=a(67294),l=n(a(56720)),o=n(a(9275)),d=a(88102),u=n(a(60453)),c=n(a(69637)),h=a(94790),f=n(a(33308)),p=a(99234),m=a(57701),g=n(a(43725)),v=a(4831),x=n(a(68706)),C=a(39434),_=a(50452),S=n(a(1784)),y=a(77591),j=a(85893);const E={description:{marginTop:"c46o30wg",marginEnd:"jnwc1y2a",marginBottom:"du8bjn1j",marginStart:"svoq16ka",fontSize:"f8jlpxt4",color:"eruf1vka",lineHeight:"r5qsrrlp"},visibilityOption:{display:"f804f6gw",paddingTop:"a71rq12o",paddingEnd:"f9ovudaz",paddingBottom:"pcbmd69e",paddingStart:"gx1rr48f",textAlign:"ml4r5409"},visibilityOptionText:{fontSize:"enbbiyaj",lineHeight:"r5qsrrlp",display:"l7jjieqr"},visibilityOptionSpace:{display:"l7jjieqr",width:"m0s4cjtr"}};function T(e,t){let{category:a,onClose:n}=e;const[o,S]=(0,s.useState)((()=>{var e,t,n,i;const r=(0,p.getUserPrivacySettings)();switch(a){case"about":return null!==(e=r.about)&&void 0!==e?e:v.VISIBILITY.all;case"profilePicture":return null!==(t=r.profilePicture)&&void 0!==t?t:v.VISIBILITY.all;case"lastSeen":return null!==(n=r.lastSeen)&&void 0!==n?n:v.VISIBILITY.all;case"groupAdd":return null!==(i=r.groupAdd)&&void 0!==i?i:v.VISIBILITY.all}}));function T(){return k.apply(this,arguments)}function k(){return(k=(0,i.default)((function*(e){if(e===o)return;S(e);const t=(0,C.privacyWebNameToServerName)(a);if("readreceipts"===t)throw new Error("visibility_edit_drawer: category can not be readreceipts");try{switch(e){case v.VISIBILITY.none:if("groupadd"===t)throw new Error("visibility_edit_drawer: groupadd can not be none");return void(yield(0,C.setPrivacyForOneCategory)({name:t,value:"none"}));case v.VISIBILITY.contacts:return void(yield(0,C.setPrivacyForOneCategory)({name:t,value:"contacts"}));case v.VISIBILITY.all:yield(0,C.setPrivacyForOneCategory)({name:t,value:"all"})}}catch(e){S(o);e instanceof y.ServerStatusCodeError&&409===e.statusCode||(__LOG__(3,void 0,void 0,!0)`visibility_edit_drawer: set visiblity option failed ${e.stack}`,SEND_LOGS("visibility_edit_drawer: set visiblity option failed")),d.Cmd.openToast((0,j.jsx)(_.Toast,{id:(0,_.genId)(),msg:r.default._("Failed to update privacy settings. Please try again.",null,{hk:"h89q3"})}))}}))).apply(this,arguments)}const P=(0,j.jsx)(w,{text:g.default.t(1051),selected:o===v.VISIBILITY.all,onClick:()=>{T(v.VISIBILITY.all)}}),M=(0,j.jsx)(w,{text:g.default.t(1048),selected:o===v.VISIBILITY.contacts,onClick:()=>{T(v.VISIBILITY.contacts)}}),L="groupAdd"===a||(0,m.privacyAllowContactsExceptEnabled)()?(0,j.jsx)(w,{text:g.default.t(1049),selected:o===v.VISIBILITY.contact_blacklist,onClick:()=>{d.Cmd.openModal((0,j.jsx)(x.default,{category:a,onConfirm:()=>{S(v.VISIBILITY.contact_blacklist)}}))}}):null,A="groupAdd"===a?null:(0,j.jsx)(w,{text:g.default.t(1052),selected:o===v.VISIBILITY.none,onClick:()=>{T(v.VISIBILITY.none)}}),O="groupAdd"===a?(0,j.jsx)("div",{className:(0,l.default)(E.description),children:g.default.t(1046)}):null;return(0,j.jsxs)(u.default,{ref:t,children:[(0,j.jsx)(h.DrawerHeader,{a8n:`drawer-title-${a}`,title:I(a),onBack:n,type:h.DRAWER_HEADER_TYPE.LARGE}),(0,j.jsx)(c.default,{children:(0,j.jsxs)(f.default,{theme:"padding-no-vertical",animation:!1,children:[(0,j.jsx)("div",{className:(0,l.default)(E.description),children:b(a)}),P,M,L,A,O]})})]})}function I(e){switch(e){case"about":return g.default.t(1056);case"profilePicture":return g.default.t(1060);case"lastSeen":return g.default.t(1059);case"groupAdd":return g.default.t(1058)}}function b(e){switch(e){case"about":return g.default.t(1043);case"profilePicture":return g.default.t(1053);case"lastSeen":return g.default.t(1047);case"groupAdd":return g.default.t(1045)}}function w(e){let{text:t,selected:a,onClick:n}=e;return(0,j.jsxs)(S.default,{xstyle:E.visibilityOption,onClick:n,children:[(0,j.jsx)(o.default,{checked:a,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:n}),(0,j.jsx)("span",{className:(0,l.default)(E.visibilityOptionSpace)}),(0,j.jsx)("span",{className:(0,l.default)(E.visibilityOptionText),children:t})]})}const k=(0,s.forwardRef)(T);t.PrivacyVisibilityEditDrawer=k},30579:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(81109)),r=n(a(99964)),s=n(a(48360)),l=a(67294),o=(n(a(56720)),a(94010)),d=n(a(39770)),u=a(99989),c=a(87912),h=a(88102),f=n(a(52665)),p=a(17239),m=n(a(69618)),g=n(a(24697)),v=n(a(60453)),x=n(a(69637)),C=a(27394),_=a(94790),S=n(a(33308)),y=n(a(44281)),j=n(a(66797)),E=a(29623),T=n(a(32973)),I=a(99234),b=a(57701),w=a(84287),k=n(a(43725)),P=a(92557),M=n(a(11339)),L=a(97567),A=n(a(87728)),O=a(9153),D=n(a(66915)),R=n(a(79876)),N=a(48870),F=a(27798),B=a(52596),U=a(55326),H=a(82350),G=n(a(23217)),V=a(13923),W=a(90011),z=a(49082),q=n(a(59147)),K=n(a(38080)),Y=n(a(39938)),Q=a(85893);class X extends T.default{constructor(){super(...arguments),this.openMerchantDetailsForm=()=>{const e=(0,I.getMeUser)();this.push((0,Q.jsx)(P.MerchantDetailsFormFlowLoadable,{contactId:e,onBack:this.pop}))},this.openCatalogDetailsForm=e=>{(0,b.canManageCollections)()&&N.QPL.markerStart(F.QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{string:{EntryPoint:"Profile"}}),(0,c.createCatalogManagementFlowObject)(((t,a)=>{this.push((0,Q.jsx)(c.CatalogManagementFlowLoadable,{catalog:a,catalogId:t,product:e,onBack:this.pop}))}))}}componentDidMount(){this.push((0,Q.jsx)(J,{openMerchantDetailsForm:this.openMerchantDetailsForm,openCatalogDetailsForm:this.openCatalogDetailsForm,conn:this.props.conn,contact:this.props.contact,profilePicThumb:this.props.profilePicThumb,status:this.props.status,onClose:this.pop}))}}t.default=X;const Z={businessComplianceIconWrapper:{paddingEnd:"htg54gjl",color:"s4k44ver"},businessComplianceText:{flexGrow:"ggj6brxn",color:"tviruh8d"},businessComplianceRightAltIcon:{color:"cs9t9or5"}};function J(e){const{onClose:t,openCatalogDetailsForm:a,openMerchantDetailsForm:n}=e,c=(0,q.default)(),T=(0,l.useContext)(C.DrawerContext),P=(0,K.default)(),N=(0,z.useModelValues)(e.contact,["businessProfile","id","statusMute"]),F=(0,z.useModelValues)(e.profilePicThumb,["imgFull","id"]),X=(0,z.useModelValues)(e.status,["status"]),J=(0,z.useModelValues)(e.conn,["pushname"]),$=(0,l.useRef)(!1),ee=(0,l.useRef)(!1),[te,ae]=(0,l.useState)(J.pushname),[ne,ie]=(0,l.useState)(X.status),[re,se]=(0,l.useState)(!1),[le,oe]=(0,l.useState)(!1),[de,ue]=(0,l.useState)(null),{businessProfile:ce}=N;(0,l.useEffect)((()=>{if(!p.Conn.isSMB)return;u.CatalogCollection.findCarouselCatalog((0,I.getMeUser)()).then((e=>{const t=Array.isArray(e)?e[0]:e;ue(t)})).catch((()=>{}));const{session:e}=(0,L.getProductCatalogContext)(T);e.isAccidental()&&h.Cmd.setDrawerContext("left",(0,L.buildProductCatalogContext)(new O.ProductCatalogSession,M.default.BIZ_PLATFORM.SMB,M.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_SETTINGS))}),[]);const he=e=>!!(e||"").trim(),fe=()=>{$.current=!0},pe=()=>{h.Cmd.openModal((0,Q.jsx)(f.default,{onOK:()=>h.Cmd.closeModal(),okText:k.default.t(1764),children:k.default.t(135)}))},me=()=>{$.current=!1,ie(X.status)},ge=()=>{if(null==ne)return void me();$.current=!1;const e=X.status;(0,j.default)(ne)!==e&&(oe(!0),(0,H.setMyStatus)((0,j.default)(ne)).then((()=>{P.aborted||oe(!1)})))},ve=e=>{ie(e)},xe=()=>{ee.current=!0},Ce=()=>{let e,t=te;return t=(t||"").trim(),t?/[\u2714\u2705\u2611]/g.test(t)&&(e=s.default._("That emoji isn't allowed in your name",null,{hk:"1JrVVd"})):e=k.default.t(128),!e||(a=e,h.Cmd.openModal((0,Q.jsx)(f.default,{onOK:()=>h.Cmd.closeModal(),okText:k.default.t(1764),children:a})),!1);var a},_e=()=>{if(ee.current=!1,!p.Conn.canSetMyPushname())return;let e=te;e=(0,j.default)((e||"").trim());e!==J.pushname&&(se(!0),(0,U.setPushname)(e).then((()=>{P.aborted||se(!1)})))},Se=e=>{ae(e)},ye=()=>{ee.current=!1,ae(J.pushname)},je=()=>{if((0,b.blockCatalogCreationECommerceComplianceIndia)(N.businessProfile))return null;if((0,b.bannedShopsEnabled)()&&(0,o.hasShop)(ce)&&(0,o.isShopBanned)(ce))return(0,Q.jsx)(S.default,{theme:"padding-large",children:(0,Q.jsxs)("div",{className:D.default.content,children:[(0,Q.jsx)("div",{className:D.default.bannedShopInfoText,children:k.default.t(1935)}),(0,Q.jsx)(d.default,{type:"primary",onClick:function(){(0,b.bannedShopsEnabled)()&&(0,o.goToCommerceManager)(ce)},children:s.default._("Commerce Manager",null,{hk:"2ZKedl"})})]})});const{session:e}=(0,L.getProductCatalogContext)(T);return e.isAccidental()?null:(0,Q.jsx)(A.default,{businessProfile:N.businessProfile,catalog:de,openCatalog:a})},Ee=()=>{const e=$.current||le?ne:X.status;return(0,Q.jsx)(W.TextInput,{a8n:"col-main-profile-input",value:e,editable:!0,pending:le,showRemaining:!0,validate:he,maxLength:m.default.MAX_STATUS_LENGTH,onBeginEdit:fe,onChange:ve,onSave:ge,onError:pe,onCancel:me,theme:"text-input",fieldName:s.default._("About",null,{hk:"2FinUX"}),supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0})},Te=e=>(0,Q.jsx)(w.IconSection,(0,i.default)({},e)),Ie=()=>{const e=Te({icon:"info",content:Ee()}),t=Te({icon:"call-phone",iconClass:D.default.phoneIcon,content:(0,Q.jsxs)("div",{children:[(0,Q.jsx)(B.SelectableDiv,{className:D.default.phoneField,selectable:!0,children:(0,Y.default)((0,I.assertGetMe)())}),(0,Q.jsx)("div",{className:D.default.infoText,children:s.default._("Your phone number can be edited from the app on your mobile device.",null,{hk:"2FXNXR"})})]})});return(0,Q.jsxs)(S.default,{title:s.default._("About and Phone Number",null,{hk:"3lw6jL"}),theme:"refresh",children:[e,t]})},be=(0,b.canSeeBizProfileV3)()&&p.Conn.isSMB?(0,Q.jsx)(S.default,{theme:"padding-no-margin",children:(0,Q.jsx)(g.default,{contact:N,editable:!0,profilePicThumb:F,hideStatusV3:!0})}):(0,Q.jsx)("div",{className:D.default.photoPickerWrapper,children:(0,Q.jsx)(R.default,{profilePicThumb:F})}),we=p.Conn.isSMB?(0,Q.jsxs)("div",{children:[(0,Q.jsx)(y.default,{}),(0,b.canSeeECommerceComplianceIndiaSoftEnforcement)(N.id.user)&&(0,Q.jsx)(S.default,{title:(0,Q.jsxs)(E.FlexRow,{align:"center",children:[(0,Q.jsx)(E.FlexItem,{xstyle:Z.businessComplianceIconWrapper,children:(0,Q.jsx)(G.default,{name:"business"})}),(0,Q.jsx)(E.FlexItem,{xstyle:Z.businessComplianceText,children:s.default._("Business details",null,{hk:"m9xzp"})}),(0,Q.jsx)(E.FlexItem,{children:(0,Q.jsx)(G.default,{xstyle:Z.businessComplianceRightAltIcon,name:"chevron-right-alt",directional:!0})})]}),theme:"refresh-padding-title",titleOnClick:n}),je(),Ie()]}):(()=>{const e=ee.current||re?te:J.pushname,t=p.Conn.isSMB?s.default._("This is your business name. It will be visible to your WhatsApp customers.",null,{hk:"AABda"}):k.default.t(1125),a=(0,Q.jsx)(S.default,{a8nText:"col-main-profile",title:k.default.t(1848),theme:"padding",children:Ee()});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(S.default,{a8nText:"col-main-profile",title:k.default.t(1124),theme:"padding",children:(0,Q.jsx)(W.TextInput,{a8n:"col-main-profile-input",value:e,editable:p.Conn.canSetMyPushname(),pending:re,showRemaining:!0,validate:Ce,maxLength:m.default.MAX_PUSHNAME_LENGTH,onBeginEdit:xe,onChange:Se,onSave:_e,onCancel:ye,supportsEmoji:!0,lockable:!0,lowProfile:!0,constrainedWidth:!0})}),(0,Q.jsx)("div",{"data-a8n":r.default.key("pushname-description"),className:D.default.nameWrapper,children:(0,Q.jsx)(V.TextSpan,{theme:"muted",children:t})}),a]})})(),ke=k.default.t(813);return(0,Q.jsxs)(v.default,{children:[(0,Q.jsx)(_.DrawerHeader,{a8n:"drawer-title-profile",title:ke,onBack:()=>{t?t():null==c||c.uie.requestDismiss()},type:_.DRAWER_HEADER_TYPE.LARGE}),(0,Q.jsxs)(x.default,{children:[be,we]})]})}},25421:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.jsx)(i.default,{primary:e.choiceText,onClick:e.onChoose,theme:"radio-button-row",image:(0,s.jsx)(r.default,{checked:e.isChosen,hover:!1,radio:!0,onChange:e.onChoose,systemUncheckedColor:!0})})};var i=n(a(44356)),r=n(a(9275)),s=a(85893)},87613:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=(n(a(56720)),n(a(60453))),l=n(a(69637)),o=a(94790),d=n(a(33308)),u=a(12591),c=a(29623),h=a(57192),f=a(14779),p=a(85291),m=a(32217),g=n(a(23217)),v=a(13923),x=a(85893);const C={drawerSection:{paddingTop:"msavwer2",paddingBottom:"slgfab0f"},description:{paddingTop:"msavwer2",paddingEnd:"bcymb0na",paddingBottom:"slgfab0f",paddingStart:"e8k79tju"}};function _(e,t){let{settings:a,onClose:n}=e;const[_,S]=(0,r.useState)(null);return(0,x.jsxs)(s.default,{ref:t,children:[(0,x.jsx)(o.DrawerHeader,{title:i.default._("Request Account Info",null,{hk:"2VisVV"}),onBack:n,type:o.DRAWER_HEADER_TYPE.LARGE}),(0,x.jsx)(l.default,{children:(0,x.jsxs)(d.default,{animation:!1,xstyle:C.drawerSection,children:[(0,x.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,x.jsx)(c.FlexItem,{children:(0,x.jsx)(g.default,{name:"document"})})})}),(0,x.jsxs)(v.TextDiv,{xstyle:C.description,children:[i.default._("Create a report of your WhatsApp account information and settings, which you can access or port to another app. This report does not include your messages.",null,{hk:"13xpse"})," ",(0,x.jsx)(u.ExternalLink,{href:(0,m.requestAccountInfoUrl)(),children:i.default._("Learn More",null,{hk:"bPizH"})})]}),null==_&&(0,x.jsx)(f.RequestAccountInfoSettingsDrawerInitial,{}),_===h.GdprStatus.Pending&&(0,x.jsx)(p.RequestAccountInfoSettingsDrawerPending,{})]})})]})}var S=(0,r.forwardRef)(_);t.default=S},14779:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerInitial=function(){return(0,o.jsx)(s.default,{className:(0,r.default)(d),color:"accent",icon:(0,o.jsx)(l.default,{name:"settings-document"}),onClick:()=>{},children:i.default._("Request Report",null,{hk:"2HyjPn"})})};var i=n(a(48360)),r=n(a(56720)),s=n(a(64738)),l=n(a(23217)),o=a(85893);const d={borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"}},85291:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAccountInfoSettingsDrawerPending=function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(s.default,{className:(0,r.default)(u.businessHours),icon:(0,d.jsx)(l.default,{name:"business-hours"}),onClick:()=>{},children:[(0,d.jsx)(o.TextDiv,{children:i.default._("Request sent",null,{hk:"3HaEMW"})}),(0,d.jsx)(o.TextDiv,{theme:"muted",children:i.default._("Ready by {availability_date}",[i.default._param("availability_date","FIXME")],{hk:"3zr2Aw"})})]}),(0,d.jsxs)("div",{className:(0,r.default)(u.footer),children:[(0,d.jsx)(o.TextDiv,{theme:"muted",xstyle:u.availability,children:i.default._("Your report will be ready in about {num_days} days. You'll have a few weeks to download your report after it's available.",[i.default._param("num_days","FIXME")],{hk:"sLu4I"})}),(0,d.jsx)(o.TextDiv,{theme:"muted",children:i.default._("Your request will be canceled if you make changes to your account such as changing your number or deleting your account.",null,{hk:"2OLjoV"})})]})]})};var i=n(a(48360)),r=(a(67294),n(a(56720))),s=n(a(64738)),l=n(a(23217)),o=a(13923),d=a(85893);const u={availability:{marginBottom:"or9x5nie"},businessHours:{borderTop:"dl47i6rc",borderBottom:"n8n2xqzm"},footer:{paddingTop:"msavwer2",paddingStart:"e8k79tju",paddingEnd:"bcymb0na"}}},98863:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,_.default)(f.getGlobalSecurityNotifications,f.setGlobalSecurityNotifications),n=g.ServerProps.bspSystemMessageEnabled;let j=n?p.default.t(1215):p.default.t(1213);(0,i.getABPropConfigValue)("adv_v2_m6")&&(j=p.default.t(1214));return(0,S.jsxs)(s.default,{children:[(0,S.jsx)(o.DrawerHeader,{a8n:"drawer-title-security",title:p.default.t(1220),onBack:e.onClose,type:o.DRAWER_HEADER_TYPE.LARGE}),(0,S.jsx)(l.default,{children:(0,S.jsxs)(d.default,{theme:"padding-large",animation:!1,children:[(0,S.jsxs)(h.FlexColumn,{xstyle:y.icon,align:"center",justify:"center",children:[(0,S.jsx)(h.FlexItem,{children:(0,S.jsx)(x.default,{name:"security-shield"})}),(0,S.jsx)(h.FlexColumn,{xstyle:y.iconLock,align:"center",justify:"center",children:(0,S.jsx)(h.FlexItem,{children:(0,S.jsx)(x.default,{name:"security-lock"})})})]}),(0,S.jsxs)("div",{className:m.default.text,children:[n?p.default.t(1219):p.default.t(1218)," ",(0,S.jsx)(u.ExternalLink,{href:(0,v.securityUrl)(),children:p.default.t(689)})]}),(0,S.jsxs)(h.FlexRow,{xstyle:y.controls,children:[(0,S.jsx)("div",{className:m.default.checkbox,children:(0,S.jsx)(r.CheckBox,{onChange:a,checked:t})}),(0,S.jsxs)(h.FlexItem,{children:[(0,S.jsx)("div",{className:m.default.header,children:(0,S.jsx)(C.TextSpan,{theme:"title",children:p.default.t(1217)})}),(0,S.jsxs)(C.TextDiv,{theme:"muted",children:[j," ",(0,S.jsx)(u.ExternalLink,{href:(0,c.getCodeChangeFaqUrl)(),children:p.default.t(689)})]})]})]})]})})]})};n(a(56720));var i=a(86945),r=a(16593),s=n(a(60453)),l=n(a(69637)),o=a(94790),d=n(a(33308)),u=a(12591),c=a(96384),h=a(29623),f=a(99234),p=n(a(43725)),m=n(a(4662)),g=a(64551),v=a(32217),x=n(a(23217)),C=a(13923),_=n(a(152)),S=a(85893);const y={icon:{position:"g0rxnol2",boxSizing:"cm280p3y",width:"cnprk2g9",height:"j74n1y92",paddingTop:"n1yiu2zv",marginTop:"tt8xd2xn",marginEnd:"k1jo73ug",marginBottom:"mpdn4nr2",marginStart:"isfiuinm",color:"t63vcusb",backgroundColor:"je90h8md",borderTopStartRadius:"g9p5wyxn",borderTopEndRadius:"i0tg5vk9",borderBottomEndRadius:"aoogvgrq",borderBottomStartRadius:"o2zu3hjb"},iconLock:{position:"lhggkp7q",start:"tkdu00h0",end:"ebjesfe0",top:"qq0sjtgm",bottom:"lrw9n60e",color:"ml33x45x"},controls:{paddingBottom:"sq87qsu4",marginTop:"ignnouf6"}}},726:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOK:t}=e,a=e.name||i.default._("Contact",null,{hk:"xBh6i"}),n=o.default.t(1252,{name:a});return(0,d.jsx)(s.default,{onOK:()=>{r.Cmd.closeModal(),t()},okText:o.default.t(1764),children:(0,d.jsx)("div",{children:(0,d.jsx)(l.EmojiText,{text:n})})})};var i=n(a(48360)),r=a(88102),s=n(a(52665)),l=a(65417),o=n(a(43725)),d=a(85893)},40015:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsCheckList=function(e){return(0,o.jsx)("div",{className:l.default.container,children:e.children})},t.SettingsCheckListItem=function(e){return(0,o.jsxs)(d,{disabled:e.disabled,children:[(0,o.jsx)("div",{"data-a8n":i.default.key(e.a8nText),className:l.default.control,children:(0,o.jsx)(s.CheckBox,{id:e.id,onChange:e.onChange,checked:e.checked,disabled:e.disabled})}),(0,o.jsx)("label",{className:l.default.label,htmlFor:e.id,children:e.children})]})},t.SettingsCheckListSection=d;var i=n(a(99964)),r=n(a(94184)),s=a(16593),l=n(a(96601)),o=a(85893);function d(e){return(0,o.jsx)("div",{className:(0,r.default)(l.default.section,{[l.default.disabled]:e.disabled}),children:e.children})}},74265:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=(n(a(56720)),n(a(44356))),l=(a(88102),a(17239)),o=a(88984),d=n(a(60453)),u=n(a(69637)),c=n(a(64738)),h=a(94790),f=a(65417),p=a(99234),m=a(7293),g=a(57701),v=n(a(43725)),x=n(a(73561)),C=n(a(23217)),_=a(49082),S=a(85893);const y={icon:{width:"i94gqilv",height:"bmot90v7"}};function j(e,t){const a=(0,_.useModelValues)(e.settings,["archive"]),n=(0,S.jsx)(x.default,{id:e.profileId}),r=(0,S.jsx)(o.DetailImage,{id:(0,p.getMaybeMeUser)(),size:82,quality:o.DETAIL_IMAGE_QUALITY.HIGH}),j=(0,S.jsx)(f.EmojiText,{text:l.Conn.pushname,ellipsify:!0,titlify:!0}),E=(0,g.privacySettingsEnabled)();let T,I,b,w;!m.GK.supportsFeature(m.GK.F.MD_BACKEND)&&(0,g.archiveV2Supported)()&&a.archive.enabled&&(b=(0,S.jsx)(c.default,{icon:(0,S.jsx)(C.default,{name:"archived"}),onClick:e.onArchiveSettings,children:i.default._("Archived chats",null,{hk:"3bOfr5"})})),m.GK.supportsFeature(m.GK.F.MD_BACKEND)&&(T=(0,S.jsx)(c.default,{a8nText:"li-security",icon:(0,S.jsx)(C.default,{name:"settings-security"}),onClick:e.onSecurity,children:v.default.t(815)})),E&&(I=(0,S.jsx)(c.default,{a8nText:"li-privacy",icon:(0,S.jsx)(C.default,{name:"security-lock",iconXstyle:y.icon}),onClick:e.onPrivacy,children:v.default.t(811)})),(0,g.webMediaAutoDownloadEnabled)()&&(w=(0,S.jsx)(c.default,{a8nText:"li-media-auto-download",icon:(0,S.jsx)(C.default,{name:"media-download"}),onClick:e.onMediaAutoDownload,children:v.default.t(809)}));const k=(0,S.jsx)(c.default,{a8nText:"li-keyboard-shortcuts",icon:(0,S.jsx)(C.default,{name:"settings-keyboard"}),onClick:e.onKeyboardShortcuts,children:v.default.t(673)});const P=E?null:(0,S.jsx)(c.default,{a8nText:"li-blocked",icon:(0,S.jsx)(C.default,{name:"settings-blocked"}),onClick:e.onBlocked,children:v.default.t(803)});return(0,S.jsxs)(d.default,{ref:t,theme:"settings",children:[(0,S.jsx)(h.DrawerHeader,{title:v.default.t(1256),onBack:e.onClose,type:h.DRAWER_HEADER_TYPE.LARGE}),(0,S.jsxs)(u.default,{children:[(0,S.jsx)(s.default,{onClick:e.onProfile,image:r,primary:j,theme:"identity",secondary:n}),(0,S.jsx)(c.default,{a8nText:"li-notifications",icon:(0,S.jsx)(C.default,{name:"settings-notifications"}),onClick:e.onNotifications,children:v.default.t(810)}),I,T,(0,g.web2FAEnabled)()&&(0,S.jsx)(c.default,{a8nText:"li-two-factor",icon:(0,S.jsx)(C.default,{name:"settings-pin"}),onClick:e.onTwoFactor,children:i.default._("Two-Step Verification",null,{hk:"1ZYq8m"})}),(0,S.jsx)(c.default,{icon:(0,S.jsx)(C.default,{name:"settings-theme"}),onClick:e.onThemeSettings,children:v.default.t(818)}),(0,S.jsx)(c.default,{icon:(0,S.jsx)(C.default,{name:"settings-wallpaper"}),onClick:e.onWallpaper,children:v.default.t(819)}),b,P,w,(0,g.webGDPRRequestAccountInfoEnabled)()&&(0,S.jsx)(c.default,{icon:(0,S.jsx)(C.default,{name:"settings-document",iconXstyle:y.icon}),onClick:e.onRequestAccountInfo,children:i.default._("Request Account Info",null,{hk:"4fUjWZ"})}),undefined,k,(0,S.jsx)(c.default,{a8nText:"li-help",icon:(0,S.jsx)(C.default,{name:"settings-help"}),onClick:e.onHelp,children:v.default.t(805)}),undefined,undefined,undefined,undefined,undefined,undefined]})]})}var E=(0,r.forwardRef)(j);t.default=E},53033:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(23493)),r=n(a(52013)),s=a(67294),l=a(63183),o=a(22683),d=a(88102),u=n(a(69618)),c=n(a(58654)),h=n(a(60453)),f=n(a(69637)),p=a(94790),m=a(85600),g=a(99234),v=a(7293),x=n(a(3222)),C=a(55414),_=n(a(43725)),S=a(84387),y=a(46346),j=n(a(55708)),E=n(a(87481)),T=a(11054),I=n(a(96363)),b=n(a(20606)),w=n(a(35563)),k=n(a(23217)),P=n(a(90012)),M=n(a(41956)),L=a(85893);class A extends s.Component{constructor(e){var t;super(e),t=this,this._msgRefs={},this._setRefHotKeys=e=>{this._refHotKeys=e},this._refScrollContainer=(0,s.createRef)(),this._getInitialState=()=>{const{starredMsgs:e}=this.props;return{cursor:j.default.create({msgCollection:e,type:u.default.RENDER_CURSOR.STARRED_DRAWER}).loadAfter(e,{count:u.default.MSG_PRELOAD_THRESHOLD})}},this._initSelectionObjects=()=>{const e=this.props.starredMsgs.toArray();this._currSelection.init(e,!0),this._activeSelection.init(e)},this._handleStarChange=()=>{this._initSelectionObjects(),this.forceUpdate()},this.setRefMsgComponent=(e,t)=>{t?this._msgRefs[e.id.toString()]=t:delete this._msgRefs[e.id.toString()]},this.loadEarlierMsgs=()=>{var e;const t=this.state.cursor,a=null===(e=this.props.chat)||void 0===e?void 0:e.id,{starredMsgs:n}=this.props,i=this.props.getUnmountSignal(),r=n.models;if(t.getEnd(n)<r.length)this.setState({cursor:t.loadAfter(n)});else{if(n.isSynced)return;this.props.starredMsgs.sync(a).then((()=>{i.aborted||t.hasAfter(n)&&this.setState({cursor:t.loadAfter(n)})})).catch((e=>{__LOG__(2)`StarredDrawer:loadEarlierMsgs failed\n${e}`}))}},this.handleClose=()=>{this.props.onClose?this.props.onClose():this.props.uim.uie.requestDismiss()},this.focus=()=>{this._refHotKeys&&r.default.focus(this._refHotKeys)},this.handleFocusGain=e=>{if(!this._refHotKeys)return;(e?e.target:document.activeElement)===this._refHotKeys&&(this._currSelection.index<0?this._currSelection.setFirst(!0):this._currSelection.reset(!1))},this._handleNextMsg=e=>{e&&(e.preventDefault(),e.stopPropagation());const t=this._currSelection.next();this._currSelection.index!==t&&this._currSelection.setNext(!0)},this._handlePrevMsg=e=>{e&&(e.stopPropagation(),e.preventDefault());this._currSelection.prev()>-1&&this._currSelection.setPrev(!0)},this._selectMsg=e=>{this._currSelection.setVal(e),this._activeSelection.setVal(e),d.Cmd.openChatAt(e.chat,e.chat.getSearchContext(e)),d.Cmd.focusShowMsg(e.id)},this._getMsgList=()=>{const e=this.state.cursor,{starredMsgs:t}=this.props;let a=t.toArray();const n=t.isSynced?e.getEnd(t):Math.min(e.getEnd(t),a.length);return a=a.slice(e.getStart(t),n),this.length=a.length,a},this.getMsgVisibility=e=>{if(!e)return u.default.VISIBILITY.BELOW;const t=this._refScrollContainer.current;if(!t)return;const a=t.previousSibling;if(!(a&&a instanceof HTMLElement))return;const n=a.clientHeight,i=t.scrollTop+n,r=i+t.clientHeight,s=e.getContainerElement();return s?s.offsetTop+s.clientHeight<=i?u.default.VISIBILITY.ABOVE:s.offsetTop>=r?u.default.VISIBILITY.BELOW:u.default.VISIBILITY.VISIBLE:u.default.VISIBILITY.BELOW},this.getMsgComponent=e=>{const t=this._msgRefs[e.toString()];if(!t)return;const a=t.getWrapperRef();return a&&"function"==typeof a.getMsgComponentRef?a.getMsgComponentRef():void 0},this.isMsgVisible=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!t._msgListInfo.visibleMsgs[e.toString()]&&(!!a||t.getMsgComponent(e))},this.pauseHiddenGifs=(e,t)=>{for(const a in e)if(!t[a]){const e=this.props.starredMsgs.get(a);if(null==e?void 0:e.isGif){const e=this.getMsgComponent(a);e&&e.getPlayCount()&&e.pause()}}},this._updateMsgListInfo=()=>{const e=this._getMsgList(),t={};let a=0,n=this.length-1;for(;a<n;){const t=Math.floor((a+n)/2),i=this._msgRefs[e[t].id.toString()];this.getMsgVisibility(i)===u.default.VISIBILITY.ABOVE?a=t+1:n=t}for(let n=a;n<e.length;n++){const a=this._msgRefs[e[n].id.toString()];if(this.getMsgVisibility(a)!==u.default.VISIBILITY.VISIBLE)break;t[e[n].id.toString()]=!0}this.pauseHiddenGifs(this._msgListInfo.visibleMsgs,t),this._msgListInfo.visibleMsgs=t},this._handleScroll=e=>{this.updateMsgListInfo(),function(e){return e.scrollTop+u.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight}(e)&&this.loadEarlierMsgs()},this.onScroll=e=>{this.handleScroll(e.currentTarget)},this.handleScroll=(0,i.default)(this._handleScroll,100),this.updateMsgListInfo=(0,i.default)(this._updateMsgListInfo,100),this._msgListInfo={visibleMsgs:{}},this.state=this._getInitialState(),this._currSelection=new E.default([],(e=>e.id.toString())),this._activeSelection=new E.default([],(e=>e.id.toString())),this._initSelectionObjects()}componentDidMount(){this.focus(),this.props.listeners.add(window,"resize",this.updateMsgListInfo),!this.props.starredMsgs.isSynced&&this.props.starredMsgs.length<u.default.PAGE_SIZE&&this.props.listeners.uiIdle(this.loadEarlierMsgs),this.props.listeners.add(this.props.starredMsgs,"reset sync",(()=>{this._initSelectionObjects(),this.forceUpdate()})),this.props.listeners.add(this.props.starredMsgs,"add remove",this._handleStarChange),this.handleFocusGain(),this.props.listeners.add(this.props.starredMsgs,"reset",(()=>{this._msgListInfo={visibleMsgs:{}},this.setState(this._getInitialState()),this.loadEarlierMsgs()}))}componentWillUnmount(){this.handleScroll.cancel(),this.updateMsgListInfo.cancel()}componentDidUpdate(){this.updateMsgListInfo()}render(){const e=this._getMsgList(),t=this.state.cursor,{starredMsgs:a}=this.props,n=this.props.chat||null;let i,r;if(r=a.isSynced&&t.getEnd(a)>=e.length?null:this.props.starredMsgs.syncPromise?(0,L.jsx)("div",{className:I.default.more,title:_.default.t(732),children:(0,L.jsx)(T.Spinner,{stroke:6,size:24})}):(0,L.jsx)("div",{className:I.default.more,children:(0,L.jsx)("div",{title:_.default.t(729),onClick:this.loadEarlierMsgs,children:(0,L.jsx)(k.default,{name:"refresh"})})}),e.length>0){const t=e.map((e=>{const t=e.type===u.default.MSG_TYPE.IMAGE||e.type===u.default.MSG_TYPE.VIDEO||e.type===u.default.MSG_TYPE.AUDIO;return(0,L.jsx)(w.default,{ref:t=>{this.setRefMsgComponent(e,t)},msg:e,isMsgVisible:t?this.isMsgVisible:()=>{},currSelection:this._currSelection,activeSelection:this._activeSelection,onClickMsg:this._selectMsg},e.id.toString())}));i=(0,L.jsx)(M.default,{transitionName:"slide",children:t})}else this.props.starredMsgs.isSynced?i=(0,L.jsx)(m.StarredMsgs,{}):(i=(0,L.jsx)(m.Loading,{}),r=null);const s={down:this._handleNextMsg,up:this._handlePrevMsg},d=e.length>0?(0,L.jsx)(y.MenuBarItem,{a8nText:"starred-menu",icon:(0,L.jsx)(k.default,{name:"menu"}),title:_.default.t(821),children:(0,L.jsx)(b.default,{chat:n,msgs:e})}):null;let x;if(v.GK.supportsFeature(v.GK.F.MD_BACKEND)&&(!n||n&&n.endOfHistoryTransferType===l.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY)){const e=o.Clock.relativeDateStr((0,g.getHistorySyncEarliestDate)());x=(0,L.jsx)(c.default,{theme:"md-chat-search-list",children:_.default.t(382,{date:e})})}return(0,L.jsx)(h.default,{theme:"gallery",children:(0,L.jsxs)(C.HotKeys,{className:I.default.hotKeyWraper,handlers:s,onFocus:this.handleFocusGain,"data-tab":u.default.TAB_ORDERS.CHAT_STARRED_DRAWER,onRef:this._setRefHotKeys,children:[(0,L.jsx)(p.DrawerHeader,{title:_.default.t(1277),onBack:this.handleClose,type:p.DRAWER_HEADER_TYPE.LARGE,menu:d}),(0,L.jsxs)(f.default,{onScroll:this.onScroll,ref:this._refScrollContainer,children:[i,r,x]})]})})}}A.displayName="StarredDrawer";var O=(0,x.default)((0,P.default)((0,S.ListenerHOC)(A)));t.default=O},20606:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=a(88102),s=a(60811),l=a(71174),o=n(a(43725)),d=n(a(84470)),u=a(85893);function c(e,t){const{msgs:a,chat:n}=e,c=(0,i.useRef)(null);return(0,i.useImperativeHandle)(t,(()=>({getElement:()=>c.current}))),(0,u.jsx)(s.Dropdown,{onRef:e=>{c.current=e},type:"dropdown_menu",flipOnRTL:!0,dirX:s.DirX.LEFT,children:(0,u.jsx)(l.DropdownItem,{a8n:"mi-unstar-all menu-item",action:()=>{r.Cmd.openModal((0,u.jsx)(d.default,{msgs:a,chat:n}))},disabled:0===a.length,children:o.default.t(1372)})},"StarredDrawerHeader")}var h=(0,i.forwardRef)(c);t.default=h},44606:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOpenStatus:t}=e,a=(0,y.default)((()=>new f.default)),n=()=>{const e=x.StatusV3Collection.getUnexpired(!0),t=x.StatusV3Collection.getUnexpired(!1);return{unread:e,read:t,muted:[...e,...t].filter((e=>e.contact.statusMute))}},{unread:i,read:r,muted:l}=(0,s.useMemo)(n,[]),[d,p]=(0,s.useState)((()=>i.filter((e=>!e.contact.statusMute)))),[m,_]=(0,s.useState)((()=>r.filter((e=>!e.contact.statusMute)))),[S,P]=(0,s.useState)(l),[M,L]=(0,s.useState)((()=>x.StatusV3Collection.getMyStatus())),[A,O]=(0,s.useState)(!1);(0,j.useListener)(x.StatusV3Collection,"add remove bulk_add sort change:msgsChanged change:hasUnread",(()=>{const{unread:e,read:t,muted:a}=n();p(e.filter((e=>!e.contact.statusMute))),_(t.filter((e=>!e.contact.statusMute))),P(a),L(x.StatusV3Collection.getMyStatus())})),(0,j.useListener)(o.ContactCollection,"change:statusMute",(()=>{const{unread:e,read:t,muted:a}=n();p(e.filter((e=>!e.contact.statusMute))),_(t.filter((e=>!e.contact.statusMute))),P(a),L(x.StatusV3Collection.getMyStatus())}));const D=()=>{O(!A)},R=e=>{switch(e.type){case T:return(0,E.jsxs)("div",{className:C.default.listSectionSep,children:[(0,E.jsx)("hr",{}),(0,E.jsx)("div",{className:C.default.listSectionText,children:(0,E.jsx)("span",{children:g.default.t(1288)})})]});case I:return(0,E.jsxs)("div",{className:C.default.listSectionSep,children:[(0,E.jsx)("hr",{}),(0,E.jsx)("div",{className:C.default.listSectionText,children:(0,E.jsx)("span",{children:g.default.t(1295)})})]});case b:return(0,E.jsxs)("div",{className:C.default.listSectionSep,children:[(0,E.jsx)("hr",{}),(0,E.jsxs)("div",{className:C.default.listSectionText,children:[(0,E.jsx)("span",{children:g.default.t(1284)}),(0,E.jsx)("button",{className:C.default.listSectionAction,onClick:D,children:e.expanded?g.default.t(1281):g.default.t(1282)})]})]});case w:return(0,E.jsx)(v.default,{statusV3:e.status,onClick:()=>t(e.status,void 0,e.index),contact:e.status.contact});default:throw new c.UnknownDataError(e)}},N=(0,s.useMemo)((()=>{const e=[];return d.length>0&&(e.push({type:T,itemKey:"section-unread",height:48}),e.push(...d.map(((e,t)=>({type:w,itemKey:e.id.toString(),height:64,status:e,index:t}))))),m.length>0&&(e.push({type:I,itemKey:"section-read",height:48}),e.push(...m.map(((e,t)=>({type:w,itemKey:e.id.toString(),height:64,status:e,index:t}))))),S.length>0&&(e.push({type:b,itemKey:"section-muted",height:48,expanded:A}),A&&e.push(...S.map(((e,t)=>({type:w,itemKey:e.id.toString(),height:64,status:e,index:t}))))),e}),[d,m,S,A]);let F;F=x.StatusV3Collection.hasSynced()&&N.length>0?(0,E.jsx)(c.FlatList,{className:"statusList",itemEnterAnimationsEnabled:!0,flatListController:a.current,direction:"vertical",data:N,renderItem:R}):(0,E.jsx)(u.ListStatus,{});return(0,E.jsxs)("div",{className:C.default.listPanel,children:[(0,E.jsx)(k,{statusV3:M,onOpenStatus:e.onOpenStatus}),(0,E.jsx)(h.default,{className:C.default.listBody,flatListControllers:[a.current],children:F})]})};var i=n(a(45095)),r=n(a(99964)),s=a(67294),l=a(22683),o=a(19380),d=a(88984),u=a(85600),c=a(47915),h=n(a(44942)),f=n(a(30855)),p=a(99234),m=a(7293),g=n(a(43725)),v=n(a(74410)),x=a(59387),C=n(a(66246)),_=n(a(15265)),S=n(a(23217)),y=n(a(59552)),j=a(19529),E=a(85893);const T="SEC_UNREAD",I="SEC_READ",b="SEC_MUTED",w="ROW_STATUS";function k(e){var t;let a;const n=e.statusV3;let s,o;n&&(o=n.msgs);const u=()=>{const t=null==n?void 0:n.msgs;n&&(null==t?void 0:t.length)&&e.onOpenStatus(n,t.head(),0)};let c,h,f,v;if(n&&(null===(t=o)||void 0===t?void 0:t.length)){a=(0,E.jsx)(_.default,{statusV3:n,contact:n.contact,onClick:u});const e=(0,i.default)(o.last(),"myMsgs.last()").t;s=(0,E.jsx)("span",{className:C.default.secondaryHeaderText,children:l.Clock.relativeDateAndTimeStr(e)}),h={cursor:"pointer"},c=u}else a=(0,E.jsx)(d.DetailImage,{id:(0,p.getMaybeMeUser)(),theme:"status_v3",size:40}),s=(0,E.jsx)("span",{"data-a8n":r.default.key("status-no-updates"),className:C.default.secondaryHeaderText,children:g.default.t(1286)});m.GK.supportsFeature(m.GK.F.STATUS_V3_UI_SENDING)&&(f=(0,E.jsx)(S.default,{name:"menu"}),v=(0,E.jsx)(S.default,{name:"status-v3-create"}));const x=(0,E.jsx)("span",{"data-a8n":r.default.key("my-status"),className:C.default.primaryHeaderText,children:g.default.t(1285)});return(0,E.jsxs)("div",{className:C.default.panelHeader,style:h,onClick:c,children:[(0,E.jsx)("div",{className:C.default.headerButtonsPrimary,children:a}),(0,E.jsxs)("div",{className:C.default.headerText,children:[x,s]}),(0,E.jsxs)("div",{className:C.default.headerButtonsSecondary,children:[v,f]})]})}},78985:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onOpenStatus:t,sessionId:a,closeStatusViewer:n}=e,[m,g]=(0,r.useState)((()=>o.StatusV3Collection.getMyStatus()));(0,r.useEffect)((()=>{(0,l.setLastStatusUsage)(),null!=a&&o.StatusV3Collection.logMetrics({type:"session",sessionId:a}),s.Cmd.onStatusViewerOpen()}),[]);const v=(0,i.default)(u.default.v3_x,{});return(0,f.useListener)(o.StatusV3Collection,["add","remove"],(()=>{g(o.StatusV3Collection.getMyStatus())})),(0,f.useListener)(s.Cmd,["dismiss_status_v3_viewer"],(()=>{n(!0)})),(0,p.jsx)("div",{className:u.default.modalBackground,"data-animate-status-v3-modal-background":!0,children:(0,p.jsxs)("div",{className:u.default.mainWrapper,children:[(0,p.jsx)(d.default,{onOpenStatus:t}),(0,p.jsx)(c.default,{status:m,onOpenStatus:t}),(0,p.jsx)("button",{className:v,onClick:()=>e.closeStatusViewer(!0),children:(0,p.jsx)(h.default,{name:"x-viewer"})})]})})};var i=n(a(94184)),r=a(67294),s=a(88102),l=a(99234),o=a(59387),d=n(a(44606)),u=n(a(82616)),c=n(a(78662)),h=n(a(23217)),f=a(19529),p=a(85893)},78662:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,C.jsx)(S,{statusV3:e.status,onOpenStatus:e.onOpenStatus});let a,n;d.GK.supportsFeature(d.GK.F.STATUS_V3_UI_SENDING)&&(a=(0,C.jsxs)("div",{className:f.default.updateWrapper,children:[(0,C.jsx)("div",{className:f.default.updateTitle,children:u.default.t(1291)}),(0,C.jsxs)("div",{className:f.default.uploadButtons,children:[(0,C.jsxs)("div",{className:f.default.buttonContainer,children:[(0,C.jsx)(g.default,{name:"status-v3-upload",className:f.default.buttonIcon}),u.default.t(1292)]}),(0,C.jsxs)("div",{className:f.default.buttonContainer,children:[(0,C.jsx)(g.default,{name:"status-v3-camera",className:f.default.buttonIcon}),u.default.t(1280)]})]})]}),n=(0,C.jsx)("hr",{}));return(0,C.jsxs)("div",{className:f.default.outStatusPanel,children:[a,n,t]})};var i=a(50796),r=n(a(99964)),s=a(67294),l=a(22683),o=a(88984),d=a(7293),u=n(a(43725)),c=a(84387),h=a(17972),f=n(a(15617)),p=n(a(21029)),m=n(a(15265)),g=n(a(23217)),v=n(a(90012)),x=a(77591),C=a(85893);class _ extends s.Component{constructor(){super(...arguments),this.rerender=()=>{this.forceUpdate()}}componentDidMount(){const{statusV3:e,listeners:t}=this.props;e&&(t.add(e,"change:msgsChanged",this.rerender),e.loadMore(e.totalCount).catch((e=>{__LOG__(3)`error while loading all out status: ${String(e)}`})))}componentDidUpdate(e){const{listeners:t,statusV3:a}=this.props,{statusV3:n}=e;n!==a&&(n&&t.remove(n,"change:msgsChanged",this.rerender),a&&t.add(a,"change:msgsChanged",this.rerender))}render(){const e=this.props.statusV3;if(e&&e.msgs.length>0){const t=e.msgs.map((t=>(0,C.jsx)(j,{msg:t,status:e,onOpenStatus:this.props.onOpenStatus},t.id.toString())));return(0,C.jsxs)("div",{className:f.default.viewWrapper,children:[(0,C.jsx)("div",{className:f.default.viewTitle,children:u.default.t(1294)}),(0,C.jsx)("div",{className:f.default.viewUpdates,children:t})]})}return(0,C.jsxs)("div",{className:f.default.viewWrapper,children:[(0,C.jsx)("div",{className:f.default.placeholderIcon,children:(0,C.jsx)(g.default,{name:"status-v3-placeholder"})}),(0,C.jsx)("div",{"data-a8n":r.default.key("status-placeholder"),className:f.default.placeholderText,children:u.default.t(1287)})]})}}_.displayName="StatusV3OutViewerImpl";const S=(0,c.ListenerHOC)(_);class y extends s.Component{constructor(){super(...arguments),this.state={}}componentDidMount(){h.MsgInfoCollection.find(this.props.msg.id).then((e=>{this.props.getUnmountSignal().aborted||(this.props.listeners.add(e.read,"add remove",(()=>{this.setState({seenCount:e.read.length})})),this.setState({seenCount:e.read.length}))})).catch((0,i.filteredCatch)(x.EphemeralDrop,(()=>{})))}render(){const{msg:e,status:t}=this.props,a=(0,C.jsx)(o.DetailImage,{id:e.sender,theme:"status_v3",size:80});return(0,C.jsxs)("div",{className:f.default.outDetail,children:[(0,C.jsx)(m.default,{statusV3:t,msg:e,onClick:()=>this.props.onOpenStatus(t,e),contact:t.contact,role:"button",theme:"status-panel",thumbnailPlaceholder:a}),(0,C.jsx)("div",{className:f.default.seen,children:(0,C.jsx)(p.default,{seenCount:this.state.seenCount})}),(0,C.jsx)("div",{className:f.default.timestamp,children:l.Clock.relativeDateAndTimeStr(e.t)})]})}}y.displayName="StatusV3OutDetailImpl";const j=(0,v.default)((0,c.ListenerHOC)(y))},39822:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(56720)),s=n(a(39902)),l=n(a(60453)),o=n(a(69637)),d=a(94790),u=n(a(33308)),c=n(a(30855)),h=n(a(43725)),f=a(10595),p=n(a(52146)),m=n(a(59552)),g=a(85893);const v={stickerContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginTop:"hv5pdlef",marginBottom:"gdaqao4w",width:"ln8gz9je"},controlsContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginBottom:"fhelu9n7"},controlsButton:{marginStart:"nzcjdldu",marginEnd:"gqi0zhd6"}};function x(e,t){const a=(0,m.default)((()=>new c.default)),{sticker:n,stickerPack:i,onSend:x,onBack:C}=e;return(0,g.jsxs)(l.default,{theme:"sticker-store",ref:t,children:[(0,g.jsx)(d.DrawerHeader,{title:h.default.t(1307),type:d.DRAWER_HEADER_TYPE.SMALL,onBack:C}),(0,g.jsx)(o.default,{flatListControllers:[a.current],children:(0,g.jsxs)(u.default,{animation:!1,theme:"padding-no-margin",shadow:!1,children:[(0,g.jsx)("div",{className:(0,r.default)(v.stickerContainer),children:(0,g.jsx)(p.default,{sticker:n,theme:"stickerDetails"},n.id)}),(0,g.jsx)(f.StickerDetailsStickerPackInfo,{name:i.name,publisher:i.publisher,theme:f.Theme.StickerStore}),(0,g.jsx)("div",{className:(0,r.default)(v.controlsContainer),children:(0,g.jsx)(s.default,{icon:"send",label:h.default.t(1310),a8nText:"sticker-action send-button",xstyle:v.controlsButton,theme:"new-chat-info",onClick:()=>{x(n)}})})]})})]},"sticker-details-modal")}var C=(0,i.forwardRef)(x);t.default=C},41966:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=n(a(56720)),s=n(a(60453)),l=n(a(69637)),o=a(94790),d=n(a(33308)),u=a(65417),c=n(a(30855)),h=n(a(43725)),f=a(11054),p=n(a(95492)),m=n(a(52146)),g=a(44333),v=n(a(23217)),x=a(13923),C=n(a(16704)),_=n(a(59552)),S=n(a(83542)),y=a(85893);const j={titleContainer:{display:"p357zi0d",alignItems:"gndfcl4n",marginBottom:"or9x5nie"},title:{flexGrow:"tvf2evcx"},spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"},animatedIcon:{marginStart:"oz0g9ue8",color:"kw851w1p"},contentContainer:{marginBottom:"dblt22a0",color:"hp667wtd",fontSize:"f8jlpxt4",lineHeight:"jgi8eev7"},stickersContainer:{display:"btb1m7bk",gridTemplateColumns:"dr6m1ylk",gridTemplateRows:"kenirpp9",gridColumnGap:"zqptfkjs",gridRowGap:"lhjw8glk",justifyContent:"o4u7okr9",width:"ln8gz9je",height:"ppled2lx"},emptyContainer:{display:"p357zi0d",justifyContent:"ac2vgrno",marginTop:"hv5pdlef",marginBottom:"gdaqao4w",width:"ln8gz9je"},emptySticker:{width:"sr23wnuw",height:"rjxfi64q",marginBottom:"dblt22a0",backgroundRepeat:"sxl192xd",backgroundSize:"hbhfgwk1"},emptyText:{textAlign:"qfejxiq4",marginBottom:"fhelu9n7"}};function E(e,t){const a=(0,_.default)((()=>new c.default)),{stickerPack:n,stickerPackId:E,onStickerClick:T,onStickerEnter:I,onBack:b,onClose:w}=e,k=function(e,t){return(0,C.default)(g.StickerPackCollectionMd,"add remove reset",(()=>e||(t?g.StickerPackCollectionMd.get(t):null)))||(null==t?null:void g.StickerPackCollectionMd.fetchStickerPack(t))}(n,E),P=function(e){return(0,C.default)(null==e?void 0:e.stickers,"add remove reset",(()=>null==e?void 0:e.stickers.toArray()))}(k),M=function(e){return(0,C.default)(g.StickerPackCollectionMd,"change:packFetchState",(()=>e?g.StickerPackCollectionMd.packFetchState.get(e):null))}(E),L=(0,S.default)();(0,i.useEffect)((()=>{L((()=>{null==k||k.stickers.fetch()}))}),[null==k?void 0:k.stickers,L]);const A=(e,t)=>{k&&T(e,k,t)},O=(e,t)=>{k&&I(e,k,t)};let D;return(E&&M===g.FETCH_STATE.PENDING||0===(null==P?void 0:P.length))&&(D=(0,y.jsx)(x.TextDiv,{theme:"plain",xstyle:j.spinner,children:(0,y.jsx)(f.Spinner,{size:50,stroke:4})})),(0,y.jsxs)(s.default,{theme:"sticker-store",ref:t,children:[(0,y.jsx)(o.DrawerHeader,{title:h.default.t(1307),type:o.DRAWER_HEADER_TYPE.SMALL,onBack:b,onCancel:w}),(0,y.jsx)(l.default,{flatListControllers:[a.current],children:(0,y.jsxs)(d.default,{animation:!1,theme:"padding-no-margin",shadow:!1,children:[k?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(x.TextDiv,{theme:"title",xstyle:j.titleContainer,children:[(0,y.jsx)(u.EmojiText,{xstyle:j.title,text:k.name,ellipsify:!0,titlify:!0}),k.animated?(0,y.jsx)(v.default,{name:"round-play",className:(0,r.default)(j.animatedIcon),width:16,height:16}):null]}),k.publisher&&(0,y.jsx)(x.TextDiv,{theme:"plain",xstyle:j.contentContainer,children:(0,y.jsx)(u.EmojiText,{text:h.default.t(1296,{name:k.publisher})})}),k.description&&(0,y.jsx)(x.TextDiv,{theme:"plain",xstyle:j.contentContainer,children:(0,y.jsx)(u.EmojiText,{text:k.description})}),D,(0,y.jsx)("div",{className:(0,r.default)(j.stickersContainer),children:null==P?void 0:P.map((e=>(0,y.jsx)(m.default,{sticker:e,theme:"stickerStore",onClick:A,onEnter:O,dontShowViewPack:!0},e.id)))})]}):null,!k&&E&&M===g.FETCH_STATE.PENDING?D:null,k||E&&M===g.FETCH_STATE.PENDING?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:(0,r.default)(j.emptyContainer),children:(0,y.jsx)("div",{className:(0,r.default)(j.emptySticker),style:{backgroundImage:`url(${p.default})`}})}),(0,y.jsx)(x.TextDiv,{theme:"plain",xstyle:[j.contentContainer,j.emptyText],children:(0,y.jsx)(u.EmojiText,{text:h.default.t(1309)})})]})]})})]},"sticker-pack-details-modal")}var T=(0,i.forwardRef)(E);t.default=T},37968:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(67294),r=(n(a(56720)),n(a(60453))),s=n(a(69637)),l=a(94790),o=n(a(33308)),d=n(a(30855)),u=n(a(43725)),c=a(11054),h=a(44333),f=n(a(63822)),p=a(13923),m=n(a(16704)),g=n(a(59552)),v=a(85893);const x={spinner:{display:"p357zi0d",alignItems:"gndfcl4n",justifyContent:"ac2vgrno",minHeight:"h2zl7k75"}};function C(e,t){const a=(0,m.default)(h.StickerPackCollectionMd,"add remove reset",(()=>h.StickerPackCollectionMd.filter((e=>null!=e.index)))),n=(0,g.default)((()=>new d.default));let i;return 0===a.length&&(i=(0,v.jsx)(p.TextDiv,{theme:"plain",xstyle:x.spinner,children:(0,v.jsx)(c.Spinner,{size:50,stroke:4})})),(0,v.jsxs)(r.default,{theme:"sticker-store",ref:t,children:[(0,v.jsx)(l.DrawerHeader,{title:u.default.t(1308),type:l.DRAWER_HEADER_TYPE.SMALL,onCancel:e.onClose}),(0,v.jsx)(s.default,{flatListControllers:[n.current],onScroll:t=>{var a;null===(a=e.onScrollOffsetChange)||void 0===a||a.call(e,t.currentTarget.scrollTop)},scrollOffset:e.scrollOffset,children:(0,v.jsxs)(o.default,{animation:!1,theme:"no-padding",shadow:!1,children:[i,(0,v.jsx)(f.default,{stickerPacks:a,onStickerPackDetails:e.onStickerPackDetails})]})})]},"sticker-store-modal")}var _=(0,i.forwardRef)(C);t.default=_},7693:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=(0,i.useContext)(u.ThemeContext),[t,a]=(0,i.useState)(e.systemThemeMode?"system":e.theme),n=e=>{const t=e.target.value;"light"!==t&&"dark"!==t&&"system"!==t||a(t)};return(0,c.jsxs)(s.default,{title:l.default.t(1347),onOK:()=>{"system"===t?(e.setSystemThemeMode(!0),e.setTheme(d.default.currentTheme)):(e.setSystemThemeMode(!1),e.setTheme(t)),r.Cmd.closeModal()},onCancel:()=>{r.Cmd.closeModal()},children:[(0,c.jsx)("form",{children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:o.default.label,children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"light",className:o.default.input,checked:"light"===t,onChange:n}),l.default.t(1346)]})},"light"),(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:o.default.label,children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"dark",className:o.default.input,checked:"dark"===t,onChange:n}),l.default.t(1345)]})},"dark"),(0,c.jsx)("li",{children:(0,c.jsxs)("label",{className:o.default.label,children:[(0,c.jsx)("input",{type:"radio",name:"theme",value:"system",className:o.default.input,checked:"system"===t,onChange:n}),l.default.t(1348)]})},"system")]})}),null]})};var i=a(67294),r=a(88102),s=n(a(52665)),l=n(a(43725)),o=n(a(25232)),d=n(a(10258)),u=a(97628),c=a(85893)},45026:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(48360)),r=a(67294),s=(n(a(56720)),n(a(60453))),l=n(a(69637)),o=n(a(64738)),d=a(94790),u=n(a(33308)),c=a(29623),h=n(a(43725)),f=n(a(23217)),p=a(13923),m=a(85893);const g={drawerSection:{paddingTop:"msavwer2"},description:{paddingTop:"msavwer2",paddingEnd:"bcymb0na",paddingBottom:"slgfab0f",paddingStart:"e8k79tju"}};function v(e,t){let a,n,r;return e.twoFactorEnabled?(a=i.default._("Two-step verification is enabled. You'll need to enter your PIN when registering your phone number with WhatsApp again.",null,{hk:"2YGRKd"}),n=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{onClick:()=>{e.onClose},icon:(0,m.jsx)(f.default,{name:"round-x-inv",height:24}),children:i.default._("Disable",null,{hk:"EYWqM"})}),(0,m.jsx)(x,{onClick:e.onOpenUpdatePinDrawer,icon:(0,m.jsx)(f.default,{name:"settings-pin"}),children:i.default._("Change PIN",null,{hk:"2GykKY"})}),(0,m.jsx)(x,{onClick:e.onOpenUpdateEmailDrawer,icon:(0,m.jsx)(f.default,{name:"business-email"}),children:i.default._("Change email address",null,{hk:"2h6SZW"})})]}),r=h.default.isRTL()?"settings_2fa_done_rtl":"settings_2fa_done"):(a=i.default._("For added security, enable two-step verification, which will require a PIN when registering your phone number with WhatsApp again.",null,{hk:"Rxhoe"}),n=(0,m.jsx)(x,{onClick:e.onOpenRegistrationDrawer,children:i.default._("Enable",null,{hk:"2RMR6d"})}),r="settings_2fa"),(0,m.jsxs)(s.default,{ref:t,children:[(0,m.jsx)(d.DrawerHeader,{title:i.default._("Two-Step Verification",null,{hk:"40ydX7"}),onBack:e.onClose,type:d.DRAWER_HEADER_TYPE.LARGE}),(0,m.jsx)(l.default,{children:(0,m.jsxs)(u.default,{animation:!1,ellipsify:!1,xstyle:g.drawerSection,children:[(0,m.jsx)(c.FlexRow,{align:"center",justify:"center",children:(0,m.jsx)(c.FlexItem,{children:(0,m.jsx)(f.default,{name:r})})}),(0,m.jsx)(p.TextDiv,{xstyle:g.description,children:a}),n]})})]})}function x(e){let{children:t,onClick:a,isLastItem:n,icon:i}=e;return(0,m.jsx)(o.default,{icon:i,onClick:a,children:t})}var C=(0,r.forwardRef)(v);t.default=C},39031:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{email:t,onEmailChange:a,emailConfirmation:n,onEmailConfirmationChange:u}=e;const[c,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t===n&&p(!1)}),[t,n]),(0,r.useEffect)((()=>{(0,o.validateEmail)(t)&&h(!1)}),[t]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.default,{title:i.default._("Add an email address to your account which will be used to reset your PIN if you forget it and safeguard your account.",null,{hk:"3yrC6H"}),children:(0,d.jsx)(l.TextInput,{onChange:a,value:t,placeholder:i.default._("Email",null,{hk:"38jUce"}),onBlur:()=>{(0,o.validateEmail)(t)||h(!0)},error:c?i.default._("Incorrect email address format",null,{hk:"1l4toK"}):null})}),(0,d.jsx)(s.default,{title:i.default._("Confirm your email address",null,{hk:"4imYJ5"}),children:(0,d.jsx)(l.TextInput,{onChange:u,value:n,placeholder:i.default._("Email",null,{hk:"38jUce"}),onBlur:()=>{t!==n&&p(!0)},error:f?i.default._("Email addresses don't match. Try again.",null,{hk:"llUUu"}):null})})]})};var i=n(a(48360)),r=a(67294),s=n(a(70835)),l=a(90011),o=a(85832),d=a(85893)},33143:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PIN_LENGTH=void 0,t.TwoFactorPinItem=function(e){const t=6===e.pinConfirmation.length&&e.pin!==e.pinConfirmation,a=function(e){return!Number.isFinite(parseInt(e.key,10))&&!o.includes(e.key)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.default,{title:i.default._("Enter a six-digit PIN which you'll be asked for when you register your phone number with WhatsApp",null,{hk:"1gMkDs"}),children:(0,l.jsx)(s.TextInput,{onChange:e.setPin,value:e.pin,placeholder:i.default._("******",null,{hk:"2lenlV"}),hideFloatingLabel:!0,maxLength:6,managed:!0,managedError:!0,onKeyDown:a})}),(0,l.jsx)(r.default,{title:i.default._("Confirm your PIN",null,{hk:"1uwcc6"}),children:(0,l.jsx)(s.TextInput,{onChange:e.setPinConfirmation,value:e.pinConfirmation,placeholder:i.default._("******",null,{hk:"2lenlV"}),hideFloatingLabel:!0,maxLength:6,managed:!0,managedError:!0,error:t?i.default._("PINs don't match. Try again.",null,{hk:"2luQHZ"}):null,onKeyDown:a})})]})};var i=n(a(48360)),r=n(a(70835)),s=a(90011),l=a(85893);t.PIN_LENGTH=6;const o=["Backspace","Tab"]},37789:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,r.useState)(""),[n,v]=(0,r.useState)(""),[x,C]=(0,r.useState)(""),[_,S]=(0,r.useState)("");return(0,m.jsxs)(o.default,{children:[(0,m.jsx)(u.DrawerHeader,{a8n:"drawer-title-2fa",title:i.default._("Two-Step Verification",null,{hk:"1Yoy3O"}),onBack:e.onClose,type:u.DRAWER_HEADER_TYPE.LARGE}),(0,m.jsx)(d.default,{children:(0,m.jsxs)("form",{children:[(0,m.jsxs)(c.default,{theme:"padding",children:[(0,m.jsx)(f.TwoFactorPinItem,{pin:t,setPin:a,pinConfirmation:n,setPinConfirmation:v}),(0,m.jsx)(h.default,{email:x,onEmailChange:C,emailConfirmation:_,onEmailConfirmationChange:S})]}),(0,m.jsx)(p.default,{transitionName:"btn",className:(0,s.default)(g),children:(0,m.jsx)(l.default,{onClick:()=>{},type:"primary",children:i.default._("Register",null,{hk:"8hdUv"})})})]})})]})};var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=n(a(39770)),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=n(a(33308)),h=n(a(39031)),f=a(33143),p=n(a(41956)),m=a(85893);const g={zIndex:"b9fczbqn",display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"}},79697:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,r.useState)(""),[n,g]=(0,r.useState)("");return(0,p.jsxs)(o.default,{children:[(0,p.jsx)(u.DrawerHeader,{title:i.default._("Two-Step Verification",null,{hk:"294kJZ"}),onBack:e.onClose,type:u.DRAWER_HEADER_TYPE.LARGE}),(0,p.jsx)(d.default,{children:(0,p.jsxs)("form",{children:[(0,p.jsx)(c.default,{theme:"padding",children:(0,p.jsx)(h.default,{email:t,onEmailChange:a,emailConfirmation:n,onEmailConfirmationChange:g})}),(0,p.jsx)(f.default,{transitionName:"btn",className:(0,s.default)(m),children:(0,p.jsx)(l.default,{onClick:()=>{},type:"primary",children:i.default._("Update Email",null,{hk:"hBmCV"})})})]})})]})};var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=n(a(39770)),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=n(a(33308)),h=n(a(39031)),f=n(a(41956)),p=a(85893);const m={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"}},58030:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const[t,a]=(0,r.useState)(""),[n,g]=(0,r.useState)(""),v=t.length===h.PIN_LENGTH&&t===n;return(0,p.jsxs)(o.default,{children:[(0,p.jsx)(u.DrawerHeader,{title:i.default._("Two-Step Verification",null,{hk:"40ydX7"}),onBack:e.onClose,type:u.DRAWER_HEADER_TYPE.LARGE}),(0,p.jsx)(d.default,{children:(0,p.jsxs)("form",{children:[(0,p.jsx)(c.default,{theme:"padding",children:(0,p.jsx)(h.TwoFactorPinItem,{pin:t,setPin:a,pinConfirmation:n,setPinConfirmation:g})}),(0,p.jsx)(f.default,{transitionName:"btn",className:(0,s.default)(m),children:(0,p.jsx)(l.default,{onClick:()=>{},disabled:!v,type:"primary",children:i.default._("Save",null,{hk:"n9x6Q"})})})]})})]})};var i=n(a(48360)),r=a(67294),s=n(a(56720)),l=n(a(39770)),o=n(a(60453)),d=n(a(69637)),u=a(94790),c=n(a(33308)),h=a(33143),f=n(a(41956)),p=a(85893);const m={display:"p357zi0d",justifyContent:"j1p1mz06",paddingBottom:"hjz8m82x",marginTop:"ignnouf6",textAlign:"qfejxiq4"}},84470:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{chat:t,msgs:a}=e;return(0,d.jsx)(s.default,{onOK:()=>{t&&t.pendingAction++,i.ChatCollection.unstarAllMessages(a,t).finally((()=>{t&&t.pendingAction--})),r.Cmd.closeModal()},okText:o.default.t(1373),onCancel:u,children:(0,d.jsx)("div",{children:(0,d.jsx)(l.EmojiText,{text:o.default.t(1374)})})})};var i=a(69951),r=a(88102),s=n(a(52665)),l=a(65417),o=n(a(43725)),d=a(85893);const u=()=>{r.Cmd.closeModal()}},93110:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{contactList:t,onSend:a,onBack:n,chat:m}=e;let C;switch(m.kind){case i.CHAT_KIND.CHAT:C=u.default.t(364,{chat:m.title(),count:u.default.n(t.length),_plural:t.length});break;case i.CHAT_KIND.GROUP:C=u.default.t(365,{chat:m.title(),count:u.default.n(t.length),_plural:t.length});break;case i.CHAT_KIND.BROADCAST:C=u.default.t(363,{chat:m.title(),count:u.default.n(t.length),_plural:t.length})}const _=C?(0,v.jsx)(o.EmojiText,{text:C,direction:"auto",titlify:!0,ellipsify:!0}):null;return(0,v.jsx)(c.Modal,{type:c.ModalTheme.Box,children:(0,v.jsxs)(r.default,{children:[(0,v.jsx)(l.DrawerHeader,{type:l.DRAWER_HEADER_TYPE.POPUP,onBack:n,children:_}),(0,v.jsx)(s.default,{children:(0,v.jsx)(d.HotKeys,{children:(0,v.jsx)("div",{className:p.default.body,children:t.map(((e,t)=>(0,v.jsx)(x,{contact:(0,g.vcardFromContactModel)(e)},t.toString())))})})}),(0,v.jsx)("div",{className:p.default.btnContainer,children:(0,v.jsx)("div",{className:p.default.btnPosition,children:(0,v.jsx)(h.Round,{large:!0,onClick:a,children:(0,v.jsx)(f.default,{name:"send",directional:!0})})})})]})})};var i=a(63183),r=n(a(60453)),s=n(a(69637)),l=a(94790),o=a(65417),d=a(55414),u=n(a(43725)),c=a(57224),h=a(82857),f=n(a(23217)),p=n(a(83314)),m=n(a(11976)),g=a(78521),v=a(85893);function x(e){let{contact:t}=e;const a=(0,g.parseVcard)(t.vcard);return a?(0,v.jsx)("div",{className:p.default.vcardWrapper,children:(0,v.jsx)(m.default,{parsedVcard:a,thumbnail:(0,g.vcardThumbnail)(a)})}):null}},45925:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{onClose:t}=e,a=(0,V.default)(),n=(0,W.default)(),i=(0,H.useModelValues)(e.contact,["verificationBinary","verificationString","formattedUser","formattedShortName","id"]),s=(0,d.useRef)(null),c=(0,d.useRef)(null),p=(0,d.useRef)(null),[m,g]=(0,d.useState)(!0),[E,I]=(0,d.useState)(!1),[A,O]=(0,d.useState)(!1),[R,N]=(0,d.useState)(!1),[B,U]=(0,d.useState)(!1),[K,Q]=(0,d.useState)(null),[X,Z]=(0,d.useState)(null),[J,$]=(0,d.useState)(!1),[te,pe]=(0,d.useState)(null),[me,ge]=(0,d.useState)(null),[ve,xe]=(0,d.useState)(null),Ce=()=>{(0,z.getIdentityVerificationDataJob)(i.id).then((e=>{n.aborted||(e?(fe(te,e.binary)&&!e.string!==me||(null!=te&&f.Cmd.openModal((0,Y.jsx)(_.E2EChangeModal,{contact:i})),pe(e.binary),ge(e.string)),ye()):(je(),f.Cmd.openModal((0,Y.jsx)(D.default,{name:i.formattedUser,onOK:()=>{t?t():null==a||a.uie.requestDismiss()}}))))}))},[_e]=(0,G.useTimeout)((()=>{U(!1)}),5e3),Se=e=>{g(!0),I(!1),O(!1),U(!0),Q(e),_e()},[ye,je]=(0,G.useTimeout)(Ce,1e3),[Ee]=(0,G.useTimeout)((()=>{I(!1)}),3e3),[Te]=(0,G.useTimeout)((()=>{O(!1)}),3e3),[Ie]=(0,G.useTimeout)((()=>{R&&!B&&Se(M.default.t(1903))}),7e3);const be=()=>{N(!1),U(!1),Z(null),s.current=null},we=e=>{const t=(e=>{let t;const a=i.formattedShortName;switch(e){case de:t=M.default.t(1897,{contact:a});break;case ue:case ce:t=M.default.t(1896,{contact:a});break;case he:default:t=M.default.t(1895)}return t})(e);Se(t)},ke=(e,t)=>{(e=>new Promise(((t,a)=>{o.default.callback=(e,n)=>{if(n)a(n);else if(e.length<1)a(new Error("QR decoder did not return decoded binary"));else{const a=new Uint8Array(e[0]);t(a)}},o.default.decode(e)})))(e).then((e=>(0,l.decodeProtobuf)(T.CombinedFingerprintSpec,e))).then((e=>{const a=(e=>{var t,a,n,r,s,o,d,u,c,h,f,p;if(!e||0===!e.version||!e.localFingerprint||!e.remoteFingerprint)return he;let m=new ArrayBuffer(0);m=w.GK.supportsFeature(w.GK.F.MD_BACKEND)?te:i.verificationBinary;const g=(0,l.decodeProtobuf)(T.CombinedFingerprintSpec,m);if(fe(null===(t=e.localFingerprint)||void 0===t?void 0:t.identifier,null===(a=g.localFingerprint)||void 0===a?void 0:a.identifier)&&fe(null===(n=e.remoteFingerprint)||void 0===n?void 0:n.identifier,null===(r=g.remoteFingerprint)||void 0===r?void 0:r.identifier))return le;const v=fe(null===(s=e.remoteFingerprint)||void 0===s?void 0:s.identifier,null===(o=g.localFingerprint)||void 0===o?void 0:o.identifier),x=fe(null===(d=e.localFingerprint)||void 0===d?void 0:d.identifier,null===(u=g.remoteFingerprint)||void 0===u?void 0:u.identifier);if(!v&&!x)return ce;if(!v)return de;if(!x)return ue;const C=fe(null===(c=e.remoteFingerprint)||void 0===c?void 0:c.publicKey,null===(h=g.localFingerprint)||void 0===h?void 0:h.publicKey),_=fe(null===(f=e.localFingerprint)||void 0===f?void 0:f.publicKey,null===(p=g.remoteFingerprint)||void 0===p?void 0:p.publicKey);return C&&_?le:oe})(e);a?t&&ve===he||(xe(a),ve===oe?(be(),g(!1),I(!1),O(!0),U(!1),Te()):we(a)):(be(),g(!1),I(!0),O(!1),U(!1),Ee())})).catch((()=>{t||(xe(he),we(he))})).finally((()=>{window.URL.revokeObjectURL(e)}))},Pe=e=>{e.stopPropagation();const t=e.target.files||e.dataTransfer.files;if(!t||!t[0])return;const a=t[0],n=URL.createObjectURL(a);ke(n,!1);const i=c.current;i&&i.reset()},Me=()=>{const{asyncStream:e,disposeStream:t}=L.start("camera");s.current=t,e.then((e=>(e=>{g(!0),I(!1),O(!1),N(!0),Z(e),Ie()})(e))).catch((0,r.filteredCatch)(S.GUM.NotAllowedError,(()=>{f.Cmd.openModal((0,Y.jsx)(k.GuidePopup,{messaging:k.Messaging.CAMERA_FAIL,type:k.TYPE.GUIDE_UNBLOCK}))}))).catch((0,r.filteredCatch)(S.GUM.GUMError,(()=>{f.Cmd.openModal((0,Y.jsx)(k.GuidePopup,{messaging:k.Messaging.CAMERA_MISSING,type:k.TYPE.GUIDE_NONE}))})))},Le=e=>{ke(e,!0)},Ae=()=>{const e=p.current;null==e||e.click()};(0,d.useEffect)((()=>{w.GK.supportsFeature(w.GK.F.MD_BACKEND)||(0,P.queryIdentity)(i)}),[i]),(0,d.useEffect)((()=>(w.GK.supportsFeature(w.GK.F.MD_BACKEND)?Ce():(0,P.queryIdentity)(i),()=>{var e;null===(e=s.current)||void 0===e||e.call(s)})),[]);let Oe=null,De=null,Re=null,Ne=null,Fe=null,Be=null,Ue=new ArrayBuffer(0),He="";w.GK.supportsFeature(w.GK.F.MD_BACKEND)?(Ue=te,He=me,Be=(0,u.getABPropConfigValue)("adv_v2_m6")?M.default.t(1742,{contactName:i.formattedShortName}):M.default.t(1741,{contactName:i.formattedShortName})):(Ue=i.verificationBinary,He=i.verificationString,Be=M.default.t(1898));Ue&&(b.default&&(Oe=(0,Y.jsx)("div",{className:q.default.section,children:(0,Y.jsx)(h.default,{type:"primary",onClick:R?be:Me,children:R?M.default.t(1902):M.default.t(1904)})})),De=(0,Y.jsxs)("div",{className:q.default.section,children:[(0,Y.jsx)(h.default,{type:"primary",onClick:Ae,children:M.default.t(1901)}),(0,Y.jsx)("p",{className:q.default.dragAndDropExplanation,children:J?M.default.t(1894):null})]}),Re=(0,Y.jsx)("form",{ref:c,children:(0,Y.jsx)("input",{ref:p,accept:"image/*",type:"file",style:{display:"none"},onChange:Pe,onClick:e=>e.stopPropagation()})}));R&&X&&(Ne=(0,Y.jsx)(se,{stream:X,disposeStream:s.current,onCapture:Le,onClose:be}));B&&(Fe=(0,Y.jsx)(re,{children:K}));return(0,Y.jsxs)(v.default,{onDrop:e=>{i.verificationBinary&&i.verificationString&&Pe(e)},onDragChange:e=>{$(e)},children:[(0,Y.jsxs)(C.DrawerHeader,{type:C.DRAWER_HEADER_TYPE.SMALL,onBack:()=>{t?t():null==a||a.uie.requestDismiss()},children:[(0,Y.jsx)(F.TextDiv,{theme:"title",children:M.default.t(1900)}),(0,Y.jsxs)(F.TextDiv,{theme:"small",children:[M.default.t(1910),", ",i.formattedUser]})]}),Ne,Fe,(0,Y.jsx)(x.default,{children:(0,Y.jsxs)("div",{className:q.default.form,children:[(0,Y.jsxs)("div",{className:q.default.photo,children:[(0,Y.jsx)(ee,{binary:Ue,contact:i,visible:m}),(0,Y.jsx)(ne,{visible:E}),(0,Y.jsx)(ie,{visible:A})]}),(0,Y.jsx)("div",{className:q.default.section,children:(0,Y.jsx)("div",{className:q.default.code,children:(0,Y.jsx)(ae,{string:He})})}),(0,Y.jsx)("div",{className:q.default.section,children:(0,Y.jsxs)("p",{className:q.default.explanation,children:[(0,Y.jsxs)("span",{children:[Be,""]}),(0,Y.jsx)(y.ExternalLink,{href:(0,j.getE2EFaqUrl)(),children:M.default.t(689)})]})}),Oe,De,Re]})})]})};var r=a(50796),s=i(a(94184)),l=a(84902),o=i(a(31339)),d=a(67294),u=a(86945),c=i(a(50514)),h=i(a(39770)),f=a(88102),p=i(a(69618)),m=a(19380),g=i(a(16194)),v=i(a(60453)),x=i(a(69637)),C=a(94790),_=a(21976),S=n(a(64103)),y=a(12591),j=a(96384),E=a(77811),T=a(80498),I=a(99234),b=i(a(72451)),w=a(7293),k=a(18671),P=a(84765),M=i(a(43725)),L=n(a(58254)),A=i(a(37360)),O=a(52596),D=i(a(726)),R=a(11054),N=i(a(23217)),F=a(13923),B=i(a(98007)),U=a(19529),H=a(49082),G=a(99935),V=i(a(59147)),W=i(a(38080)),z=a(15161),q=i(a(17040)),K=i(a(23425)),Y=a(85893);const Q=(e,t)=>!!e&&!!t&&fe(e.publicKey,t.publicKey)&&fe(e.identifier,t.identifier),X=(e,t)=>{if(!e&&!t)return!0;const a=(0,l.decodeProtobuf)(T.CombinedFingerprintSpec,e),n=(0,l.decodeProtobuf)(T.CombinedFingerprintSpec,t);if(!a&&!n)return!0;if(!(null!=a.version||null!=n.version||a.localFingerprint||n.localFingerprint||a.remoteFingerprint||n.remoteFingerprint))return!0;if(a.version!==n.version)return!1;const i=Q(a.localFingerprint,n.localFingerprint),r=Q(a.remoteFingerprint,n.remoteFingerprint);return i&&r};function Z(e){const{binary:t=null,visible:a}=e,n=(0,d.useRef)(null),i=(0,d.useRef)(null),[r,s]=(0,d.useState)(!1),[l,o]=(0,d.useState)(null),[u,h]=(0,d.useState)(null),f=()=>{r||s(!0)},v=()=>{r||s(!0)},x=()=>{r&&s(!1)};(0,d.useEffect)((()=>{if(t){const e=n.current;if(!e||!t)return o(null),void h(null);if(X(l,t))return;for(i.current&&(i.current=null);e.firstChild;)e.removeChild(e.firstChild);i.current=new A.default(e,{text:t,width:p.default.QR_EDGE/2,height:p.default.QR_EDGE/2,correctLevel:A.default.CorrectLevel.L}),o(t);const a=e.getElementsByTagName("canvas")[0];if(!a)return void h(null);(e=>{const t=document.createElement("canvas");t.width=e.width+10,t.height=e.height+10;const a=t.getContext("2d");a.fillStyle="white",a.fillRect(0,0,t.width,t.height),a.drawImage(e,5,5),t.toBlob((e=>h(e)),"image/png")})(a)}}),[t,l]);let C=null;if(a){let t=null;if(r&&u){const a=e.contact.formattedUser||"",n=m.ContactCollection.assertGet((0,I.getMaybeMeUser)()).formattedUser;t=(0,Y.jsx)(g.default,{file:u,download:"Verification Code between "+n+" and "+a,extension:E.AllowedFileExtensions.PNG,children:(0,Y.jsx)(c.default,{text:M.default.t(1893)})})}C=(0,Y.jsxs)("div",{onMouseOver:f,onMouseEnter:v,onMouseLeave:x,children:[t,(0,Y.jsx)("div",{className:q.default.circle,ref:n})]})}return C}const J=(0,d.memo)(Z,((e,t)=>X(t.binary,e.binary)&&t.visible===e.visible));function $(e){let{visible:t}=e,a=null;return t&&(a=(0,Y.jsx)("div",{className:q.default.circle,children:(0,Y.jsx)("div",{className:q.default.spinner,children:(0,Y.jsx)(R.Spinner,{size:52,stroke:4})})})),a}function ee(e){let{binary:t,contact:a,visible:n}=e,i=null;return n&&(i=(0,Y.jsxs)("div",{className:(0,s.default)(q.default.container,q.default.circleContainer),children:[(0,Y.jsx)(J,{visible:!!t,binary:t,contact:a}),(0,Y.jsx)($,{visible:!t})]})),i}function te(e){if(!e.string)return(0,Y.jsx)("div",{children:M.default.t(731)});const t=e.string;if(60!==t.length)return __LOG__(3)`verificationString:render props.string should be ${60} characters long instead of ${t.length}.`,(0,Y.jsx)("div",{children:M.default.t(1899)});const a=[];for(let e=0;e<3;e++){const n=[];for(let a=0;a<4;a++){const i=[];for(let n=0;n<5;n++){const r=t.charAt(5*e*4+5*a+n);i.push((0,Y.jsx)("span",{className:q.default.digit,children:r},n))}n.push((0,Y.jsx)("span",{className:q.default.block,children:i},a))}a.push((0,Y.jsx)(O.SelectableDiv,{className:q.default.row,selectable:!0,children:n},e))}return(0,Y.jsx)(O.SelectableDiv,{selectable:!0,children:a})}const ae=(0,d.memo)((0,d.forwardRef)(te),((e,t)=>t.string===e.string));function ne(e){let{visible:t}=e,a=null;return t&&(a=(0,Y.jsx)("div",{className:(0,s.default)(q.default.container,q.default.checkmarkContainer),children:(0,Y.jsx)("div",{className:q.default.checkmark,children:" "})})),a}function ie(e){let{visible:t}=e,a=null;return t&&(a=(0,Y.jsx)("div",{className:(0,s.default)(q.default.container,q.default.errorContainer),children:(0,Y.jsx)("div",{className:q.default.error,children:"!"})})),a}function re(e){let{children:t}=e;return(0,Y.jsx)("div",{className:q.default.errorBanner,children:t})}function se(e){const{stream:t,onCapture:a,disposeStream:n}=e,i=(0,d.useRef)(null),r=(0,d.useRef)(!1),s=(0,d.useRef)(null),l=(0,d.useRef)(null),[o]=(0,B.default)((()=>{var e;const t=null===(e=s.current)||void 0===e?void 0:e.underlyingVideo();if(!t)return;const n=document.createElement("canvas");n.width=t.videoWidth/2,n.height=t.videoHeight/2;n.getContext("2d").drawImage(t,n.width/2,n.height/2,n.width,n.height,0,0,n.width,n.height),n.toBlob((e=>{const t=window.URL.createObjectURL(e);__LOG__(2)`objectURL: ${t}`,a(t)}),"image/jpeg",1)}),200);(0,d.useEffect)((()=>((0,L.isSrcObjectInVideoElement)()||(i.current=window.URL.createObjectURL(t)),()=>{t&&(null==n||n(),i.current&&window.URL.revokeObjectURL(i.current))})),[]);const u=()=>{var e;const t=null===(e=s.current)||void 0===e?void 0:e.underlyingVideo(),a=l.current;if(!t||!a)return;const n=t.offsetHeight,i=t.offsetWidth,r=i/3,o=r;a.style.width=r+"px",a.style.height=o+"px",a.style.margin=(n-o)/2+"px "+(i-r)/2+"px"},c=()=>{!0!==r.current&&(u(),o())};(0,U.useListener)(window,"resize",u);let h=null;var f;e.stream&&(h=(0,Y.jsxs)("div",{className:q.default.webcam,children:[(0,Y.jsx)("div",{className:q.default.webcamVideo,children:(0,Y.jsx)(K.default,{autoPlay:!0,ref:s,onPlay:c,src:null!==(f=i.current)&&void 0!==f?f:void 0,srcObject:i.current?void 0:e.stream,width:"100%"})}),(0,Y.jsx)("div",{className:q.default.overlay,ref:l}),(0,Y.jsx)("button",{onClick:e.onClose,className:q.default.btnClose,children:(0,Y.jsx)(N.default,{name:"x-alt"})})]}));return h}const le=0,oe=1,de=2,ue=3,ce=4,he=5;function fe(e,t){if(!e||!t)return!1;const a=new Uint8Array(e),n=new Uint8Array(t),i=a.length;if(i!==n.length)return!1;for(let e=0;e<i;e++)if(a[e]!==n[e])return!1;return!0}},14551:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.useContext)(v.ThemeContext);return(0,s.useEffect)((()=>(m.ServerProps.wallpapersV2&&l.default.trigger("wallpaper_drawer_open"),()=>{l.default.trigger("wallpaper_color_preview"),m.ServerProps.wallpapersV2&&l.default.trigger("wallpaper_drawer_close")})),[]),(0,y.jsxs)(c.default,{children:[(0,y.jsx)(f.DrawerHeader,{title:p.default.t(1551),onBack:e.onClose,type:f.DRAWER_HEADER_TYPE.LARGE}),(0,y.jsx)(h.default,{children:(0,y.jsx)(E,{colors:(0,_.getWallpaperColors)(t.theme),chatPreference:l.default.get("defaultPreference")})})]})};var i=n(a(99964)),r=n(a(94184)),s=a(67294),l=n(a(66034)),o=a(16593),d=a(88102),u=n(a(69618)),c=n(a(60453)),h=n(a(69637)),f=a(94790),p=n(a(43725)),m=a(64551),g=a(13923),v=a(97628),x=a(50452),C=a(49082),_=a(96984),S=n(a(26163)),y=a(85893);function j(e){const{colorHex:t,isDefault:a}=e,[n,o]=(0,s.useState)(!1),c=()=>a?u.default.DEFAULT_CHAT_WALLPAPER:t,h=e.isDefault?(0,y.jsx)("span",{className:S.default.wallpaperDefaultTitle,"data-a8n":i.default.key("wallpaper-default-title"),children:p.default.t(386)}):null,f=(0,r.default)(S.default.wallpaperColorCanvas,{[S.default.canvasHover]:n,[S.default.canvasActive]:e.isSelected,[S.default.canvasDefault]:e.isDefault});return(0,y.jsx)("span",{className:f,style:{backgroundColor:e.colorHex},onMouseOver:()=>{n||(o(!0),l.default.trigger("wallpaper_color_preview",c()))},onMouseEnter:()=>{n||(o(!0),l.default.trigger("wallpaper_color_preview",c()))},onMouseLeave:()=>{n&&(o(!1),l.default.trigger("wallpaper_color_preview"))},onClick:()=>{const e=c(),t=l.default.get("defaultPreference");t&&e!==t.wallpaperColor&&(t.set("wallpaperColor",e),d.Cmd.openToast((0,y.jsx)(x.Toast,{msg:p.default.t(1548),id:(0,x.genId)()})))},title:e.isDefault?p.default.t(386):null,children:h})}function E(e){let t;const{colors:a}=e,n=(0,C.useOptionalModelValues)(e.chatPreference,["wallpaperColor","showDoodle"]),i=null==n?void 0:n.wallpaperColor,r=()=>{if(n){const e=!n.showDoodle;n.set("showDoodle",e),d.Cmd.openToast((0,y.jsx)(x.Toast,{msg:e?p.default.t(1549):p.default.t(1550),id:(0,x.genId)()}))}},s=null==n?void 0:n.showDoodle,l=a.map((e=>(0,y.jsx)(j,{colorHex:e,isSelected:i===e,isDefault:!1},e))),c=(0,y.jsx)(j,{isSelected:i===u.default.DEFAULT_CHAT_WALLPAPER,isDefault:!0},u.default.DEFAULT_CHAT_WALLPAPER);l.unshift(c);for(let e=0;e<2;e++)l.push((0,y.jsx)("div",{className:S.default.wallpaperColorEmpty},"emptyEl"+e));return m.ServerProps.wallpapersV2&&(t=(0,y.jsxs)("div",{className:S.default.wallpaperApplyDoodle,children:[(0,y.jsx)(o.CheckBox,{onChange:r,checked:!!s}),(0,y.jsx)(g.TextSpan,{className:S.default.checkboxLabel,theme:"small",children:p.default.t(1547)})]})),(0,y.jsxs)(y.Fragment,{children:[t,(0,y.jsx)("div",{className:S.default.wallpaperColorGrid,children:l})]})}},74410:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,u.useModelValues)(e.statusV3,["id","t","hasUnread","unreadCount","totalCount","contact"]),a=(0,u.useModelValues)(e.contact,["formattedName","statusMute","isPSA"]),n=(0,i.default)({[l.default.dimmed]:a.statusMute}),h=s.Clock.relativeDateAndTimeStr(t.t);let f=a.formattedName;a.isPSA&&(f=(0,c.jsxs)("span",{className:l.default.verified,children:[a.formattedName,(0,c.jsx)("div",{className:l.default.icon,children:(0,c.jsx)(d.default,{name:"psa-verified"})})]}));return(0,c.jsx)(r.default,{className:n,customImage:!0,theme:"status-list",image:(0,c.jsx)(o.default,{statusV3:t,contact:a,onClick:e.onClick}),primary:f,secondary:h,onClick:e.onClick,contextEnabled:()=>!1},t.id.toString())};var i=n(a(94184)),r=n(a(49107)),s=a(22683),l=n(a(44710)),o=n(a(15265)),d=n(a(23217)),u=a(49082),c=a(85893)},15265:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{theme:t,thumbnailPlaceholder:a,msg:n}=e,r=(0,c.useModelValues)(e.statusV3,["lastStatus"]),l=(0,c.useModelValues)(e.contact,["statusMute"]),d=null!=n?n:r.lastStatus,h=p(t);let m;m=null!=a?a:d?(0,f.jsx)(s.DetailImage,{id:d.sender,theme:"status_v3",size:40}):null;return(0,f.jsxs)("div",{className:(0,i.default)(u.default.container,h),role:e.role||"",onContextMenu:null,onClickCapture:t=>{var a;null===(a=e.onClick)||void 0===a||a.call(e),t.stopPropagation(),t.preventDefault()},children:[l.statusMute||"status-panel"===t?null:(0,f.jsx)(o.StatusV3ImageRing,{statusV3:r}),(0,f.jsx)(g,{msg:d,theme:t,thumbnailPlaceholder:m})]})};var i=n(a(94184)),r=n(a(69618)),s=a(88984),l=n(a(4293)),o=(a(31019),a(24391)),d=a(87998),u=n(a(84080)),c=a(49082),h=n(a(39546)),f=a(85893);function p(e){return"status-panel"===e?u.default.thumbSizeLarge:u.default.thumbSizeSmall}function m(e){const{msg:t,theme:a}=e;return(0,f.jsx)("div",{className:(0,i.default)(u.default.statusImage,p(a)),style:{backgroundColor:t.statusV3TextBg},children:(0,f.jsx)("div",{className:(0,i.default)(u.default.textThumb,p(a)),children:(0,f.jsx)(d.StatusV3Text,{msg:t,theme:null!=a?a:"status-thumbnail"})})})}function g(e){const{msg:t,theme:a,thumbnailPlaceholder:n}=e,s=p(a),o=u.default.statusImage;return t?h.default.isPSA(t.sender)?(0,f.jsx)("div",{className:(0,i.default)(u.default.thumbContainer,s,u.default.statusImageFallbackBackground),children:n}):t.type===r.default.MSG_TYPE.CHAT?(0,f.jsx)(m,{msg:t,theme:a}):(0,f.jsx)(l.default,{containerClassName:(0,i.default)(u.default.thumbContainer,s,u.default.statusImageFallbackBackground),childClassName:(0,i.default)(o,s),msg:t,thumbnailPlaceholder:n}):(0,f.jsx)("div",{className:(0,i.default)(o,s,u.default.statusImageFallbackBackground)})}},9425:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StickerIcon=function(e){let{url:t,xstyle:a}=e;const[n,{isIntersecting:c}]=(0,l.default)({root:null,rootMargin:"0px",threshold:0}),h=(0,i.useRef)(c);return h.current=h.current||c,(0,o.jsx)("div",{ref:n,className:(0,r.default)(d,a),children:h.current&&(0,o.jsx)(s.ImgWithFallback,{fallbackSVG:"sticker",wrapOptions:{centerWrapperChild:!0,wrapperClassName:""},className:(0,r.default)(u),size:"NONE",roundContainer:!1,imgProps:{src:t,draggable:!1},theme:s.Theme.Transparent})})};var i=a(67294),r=n(a(56720)),s=a(50981),l=n(a(6914)),o=a(85893);const d={boxSizing:"cm280p3y",height:"graaj7av",width:"jgly3g7g",minHeight:"lignnmtc",minWidth:"j3e9rhaw",position:"g0rxnol2"},u={width:"ln8gz9je",height:"ppled2lx"}},63822:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPacks:t,onStickerPackDetails:a}=e,n=(0,c.default)((()=>new o.default)),f=(0,i.useMemo)((()=>t.map((e=>({itemKey:e.id,stickerPack:e})))),[t]);return(0,h.jsx)(l.default,{flatListControllers:[n.current],children:(0,h.jsx)(s.FlatList,{flatListController:n.current,direction:"vertical",forceConsistentRenderCount:!1,data:f,renderItem:e=>(0,h.jsx)(u.default,{data:e,onClick:a}),defaultItemHeight:r.default.STICKER_LIST_ITEM_HEIGHT,keyOrder:d.KeyOrder.INVERSE})})};var i=a(67294),r=n(a(69618)),s=a(47915),l=n(a(44942)),o=n(a(30855)),d=a(43882),u=n(a(73966)),c=n(a(59552)),h=a(85893)},73966:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{stickerPack:t}=e.data,a=(0,c.jsxs)("div",{className:(0,r.default)(h.title),children:[(0,c.jsx)(o.EmojiText,{text:t.name,ellipsify:!0,titlify:!0}),t.animated?(0,c.jsx)(u.default,{name:"round-play",className:(0,r.default)(h.animatedIcon),width:16,height:16}):null]}),n=[],f=Math.min(6,t.previewImageIds.length);for(let e=0;e<f;e++){const a=t.previewImageIds[e];n.push((0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(s.default,{breakpoint:94*(e+1)-22,inverseToContainer:!0,maxWidth:"100%",minWidth:0}),(0,c.jsx)(d.StickerIcon,{url:`https://static.whatsapp.net/sticker?cat=sticker_preview_png&id=${a}`,xstyle:h.stickerIcon})]},a))}const p=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.EmojiText,{text:t.publisher,ellipsify:!0}),(0,c.jsx)("div",{className:(0,r.default)(h.stickerIconsContainer),children:n})]});return(0,c.jsx)(l.default,{a8n:"sticker-pack-list-item",theme:"sticker-pack",primary:a,secondary:p,onClick:()=>{e.onClick(t)},className:(0,r.default)(h.stickerPack),contextEnabled:()=>!1},t.id)};var i=a(67294),r=n(a(56720)),s=n(a(8334)),l=n(a(49107)),o=a(65417),d=a(9425),u=n(a(23217)),c=a(85893);const h={stickerPack:{paddingStart:"lyvj5e2u",color:"h15s16sg"},title:{display:"p357zi0d",alignItems:"gndfcl4n"},animatedIcon:{marginStart:"oz0g9ue8",color:"kw851w1p"},stickerIconsContainer:{display:"p357zi0d",flexDirection:"sap93d0t",flexWrap:"dnb887gk",marginTop:"dj1c3cmq"},stickerIcon:{marginEnd:"gwq3iy2m"}}},18878:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMergedContactAndOrderInfoMap=function(e,t){return(0,i.default)((0,i.default)({},e),t.reduce(((e,t)=>(e[t.orderInfo.referenceId]=t,e)),{}))},t.getMergedOrderStatusInfoMap=function(e,t){return(0,i.default)((0,i.default)({},e),t.reduce(((e,t)=>(e[t.refId]=t,e)),{}))},t.getOrders=function(e){s.ChatCollection.toArray().forEach((t=>{t.msgs.msgLoadState.noEarlierMsgs?function(e,t){e(u(t))}(e,t):function(e,t){const a=setInterval((0,r.default)((function*(){yield t.loadEarlierMsgs(t.msgs)})),200),n=t.msgs.onMsgLoadStateChange((()=>{t.msgs.msgLoadState.noEarlierMsgs&&(e(u(t)),n(),clearInterval(a))}))}(e,t)}))};var i=n(a(81109)),r=n(a(48926)),s=a(69951),l=(a(17304),n(a(5165))),o=a(34841),d=a(88998);function u(e){const{contact:t,msgs:a}=e;return a.toArray().reduce(((e,a)=>{var n;const[{name:i,buttonParamsJson:r}]=(null===(n=a.interactivePayload)||void 0===n?void 0:n.buttons)||[{}];if(a.nativeFlowName===l.default.ORDER_DETAILS){const a=(0,o.paramsJsonToOrderInfo)(i,r);a&&e.contactsAndOrdersInfo.push({contact:t,orderInfo:a})}else if(a.nativeFlowName===l.default.ORDER_STATUS){const t=(0,d.paramsJsonToOrderStatusInfo)(i,r);t&&e.ordersStatusInfo.push(t)}return e}),{contactsAndOrdersInfo:[],ordersStatusInfo:[]})}},64904:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.search=function(){return m.apply(this,arguments)};var r=i(a(48926)),s=n(a(64103)),l=i(a(43725)),o=a(2541),d=i(a(64386));const u="https://www.bingapis.com/api/v6/images/search",c="D41D8CD98F00B204E9800998ECF8427E4F4A7492",h="Square",f="Medium",p={ar:"ar-SA",da:"da-DK",de:"de-DE",en:"en-US",es:"es-US",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ko:"ko-KR",nl:"nl-NL",pl:"pl-PL","pt-BR":"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-CN":"zh-CN","zh-TW":"zh-TW","zh-HK":"zh-HK"};function m(){return(m=(0,r.default)((function*(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const n={q:e,SafeSearch:"Strict",appid:c,mkt:p[l.default.getLocale()]||p.en,size:f,aspect:h,count:a,offset:t},i=o.URL.build(u,n),r=yield d.default.get(i,d.default.RESP_TYPE.JSON);if(!r.response.hasOwnProperty("_type"))throw new s.InvalidServerResponseError(i,status,`Not a valid Bing response: ${JSON.stringify(r.response)}`);if("ErrorResponse"===r.response._type){const t=r.response;throw new s.BingServerError(e,r.status,t)}if("Images"!==r.response._type)throw new s.InvalidServerResponseError(i,status,`Did not receive an image search response, potentially malformed query ${JSON.stringify(r.response)}`);return r.response}))).apply(this,arguments)}},43538:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OrderStatusLabels=void 0;var i=n(a(48360)),r=a(88998);const s={[String(r.OrderStatus.Pending)]:i.default._("Pending",null,{hk:"4GysRv"}),[String(r.OrderStatus.Processing)]:i.default._("Processing",null,{hk:"2s6DMw"}),[String(r.OrderStatus.Shipped)]:i.default._("Shipped",null,{hk:"1vhmcK"}),[String(r.OrderStatus.Complete)]:i.default._("Completed",null,{hk:"1skg0X"}),[String(r.OrderStatus.Canceled)]:i.default._("Cancel",null,{hk:"1nr4IF"})};t.OrderStatusLabels=s},72089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=function(e){return JSON.stringify(e)}},17815:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.filter((e=>!e.contact.isMe&&e.contact.shortName)).slice(0,3).map((e=>e.contact.shortName)),a=e.length-t.length-1;let n=i.default.t(1910);t.length+a<3?t.forEach(((e,a)=>{a===t.length-1?n+=i.default.t(417)+e:n+=i.default.t(419)+e})):n+=i.default.t(419)+t.join(i.default.t(419));a>0&&(n+=i.default.t(417)+i.default.t(567,{count:a,_plural:a}));return n};var i=n(a(43725))},19059:(e,t,a)=>{"use strict";var n=a(20862),i=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.promiseLoop)(function(){var t=(0,r.default)((function*(t,a,n){const i=(0,l.delayMs)(d.expBackoff(n,6e4,void 0,.1));try{yield c.Socket.state===c.STATE.CONNECTED?Promise.resolve():(0,u.default)(c.Socket,"change:state",(0,s.default)({state:c.STATE.CONNECTED}));const a=yield e();if(a.status>=500&&a.status<600)return i;t(a)}catch(e){return i}}));return function(){return t.apply(this,arguments)}}())};var r=i(a(48926)),s=i(a(6410)),l=a(13959),o=a(4352),d=n(a(22906)),u=i(a(17072)),c=a(65044)},73915:(e,t,a)=>{"use strict";var n=a(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TOS_BASE_URL=void 0,t.getTosUrl=function(){return`${r}?lg=${i.default.getLocale()}`};var i=n(a(43725));const r="https://www.whatsapp.com/legal/";t.TOS_BASE_URL=r},85832:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateURL=t.validateEmail=t.EMAIL_REGEX=void 0;var n=a(2541);const i=new RegExp(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/);t.EMAIL_REGEX=i;t.validateEmail=e=>!e||i.test(e);t.validateURL=e=>!e||n.URL_REGEX.test(e)},11959:(e,t,a)=>{e.exports=a.p+"img/animated-doodle_600127bdb5f7627ede5cd4ef320f55b0.png"},95492:(e,t,a)=>{e.exports=a.p+"img/sticker-pack-empty_9f0c66fc3aec33b2f78f0ae1721e053b.png"},9192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={editMain:"_3xeOe",dayMain:"elIXU",timeWrapper:"_3u7Nx",hoursAnd:"VtTvE",hoursMain:"_1t1ZU",dayCheckbox:"_1_yf5",dayInfo:"_2ycHc",dayInfoText:"_2RSsg"}},94994:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={editMain:"_1GBQ2",list:"_2ORz2",rowMain:"_1DFmp",rowCheckbox:"_2pPkR",rowLabel:"_1NGCs",disabled:"YVobU",loadingSpinner:"_2-B6b",searchBackground:"_1Fb5R"}},98858:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={verifiedNameIcon:"_3PMWi",noPaddingTop:"_23GE5"}},62361:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={loadingSpinner:"_27f4X"}},73803:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={info:"_1bDv-",footer:"_2a_BY",emptyCartContainer:"_2hNBn",emptyCardHeader:"_3SGPw",emptyCardText:"_1_kdr",btnSend:"apgxN",cartMessage:"_25cOj"}},25844:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={price:"_2TWGj",actions:"_3qMz1",deleteIcon:"X73p1",cartListItem:"_22OLH"}},69851:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={select:"_2PO_l"}},7517:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={deleteIcon:"_3dqla"}},13274:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={date:"_2EgYn",info:"_1Jkgv",composerWrapper:"_3UPei"}},83221:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={price:"Q2pUe",separator:"_3mfuQ",quantity:"_1pt0A"}},25738:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={descriptionText:"_3cn-t",loadingSpinner:"_39T3a"}},17543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={nameContainer:"_2ZSfJ",nameIcon:"_2c2YS",nameEdit:"_3z09E",listContainer:"_3qa_s",footer:"_mlI_",saveButton:"_1Ah-d",operation:"hCFEO",spinner:"_2GKPh",isSending:"_29OTP",container:"_20LKm",loadingSpinner:"_1oYzh"}},2894:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={productWrapper:"rJvJe",drawerHeader:"_1FOnF",drawerHeaderButtonContainer:"_31Lzw",deleteButtonContainer:"_3ACRw",isSending:"PH_zP",spinner:"_2uvSh",hiddenLabel:"_1iq2E",hiddenDescr:"_2CpMK",hiddenContainer:"_3CZ_C"}},14808:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={addItemPlaceholder:"_1qJg-",placeholderIcon:"_36m_1",placeholderContainer:"_1G1TN",divider:"Ba9cd",isLoading:"_1GbNE",spinner:"_2K6GK"}},19476:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={drawerHeader:"_3jATq",productName:"_1v6Jb",buttonSeparator:"_2DYm7",drawerHeaderButtonContainer:"_1TIjK",productWrapper:"_2jzzC",businessInfoTitle:"_3Lz6H"}},14278:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={root:"_10NM0",appealText:"_1K_U7",icon:"_3eVMu",text:"Qqtdl"}},23034:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={collectionIcon:"_2tGWa",iconContainer:"_1iPYw"}},36566:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={loadingSpinner:"o3c-l"}},78491:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={panel:"_1TOgh",tileContainer:"_1vfS7",imageTile:"_2a_Q7",imageThumb:"Cbc-m",deleteIcon:"_2WYev",btnAddContainer:"_1ar7j",btnAddText:"RAMrK",errorMessage:"_3E49Y"}},29792:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={list:"_2V4Ys",noSections:"_82KlQ"}},70890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={title:"_2bLEK"}},97145:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={disabled:"_1W_mm",title:"_2jAho"}},8959:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={title:"_3Q5hz"}},78749:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={title:"_13MJe",text:"hM3sj",icon:"_1p9YY"}},72084:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2RE0a",border:"_3t6bN",square:"_36Gk7",avatar:"_1b8fw",count:"_1gLP4",two:"_1EzI5",first:"JOgRb",second:"_3Q0g1",three:"_33l2L",third:"_1MivT",four:"_18BoY",fourth:"_1P7KC"}},79169:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={overlay:"gDU26",icon:"_28Ee5",text:"_3D1Iu"}},58780:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={imageGallery:"_3uMAp",imageGalleryList:"_1WX5F",imageGalleryItem:"MkTEt",imageGalleryItemSpacer:"_2ppZW",imageGalleryItemImage:"_6CxGV",imageGalleryItemOverlay:"_7mUkD",selected:"_1KnO5",imageGalleryFooter:"PYlBE",focusAnimation:"_30mp5",focusAnimationKeyframes:"_3i50e"}},38376:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={inputEmoji:"_2qGIa",wrapper:"_2AyZ_",textInput:"_35rEL",labelText:"bQgYT",clearInput:"_36AI6",float:"_5Y8X5",textActive:"_1sGCj",suggestionsPositioner:"vVBJc",suggestionsContainer:"_1odWc",charCounter:"rPbGr",inputControls:"_1vkjc",charCounterWithClearBtn:"G6w7m",spacer:"kcc20",noPlaceholder:"_2bRbC",buttonContainer:"nyoY0",active:"_6FdZt"}},20487:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3cOtp",body:"_1YLvc"}},18312:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1w1m1",disabled:"_3Sg2g",count:"ItnCt",large:"_3OTTU"}},6935:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={versionInfo:"AwT3E"}},54115:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={positioner:"_388vZ",container:"ewANj",resizableInput:"_1L8rJ",emojiButton:"_3tKNQ",buttonIconWrapper:"_1F5dF",inputContainer:"_3DCJ3",hiddenText:"_269u7",hiddenTextLine:"_3F7_-",emojiPlaceholder:"_39TQD"}},71488:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2nStn",inputContainer:"_1VmmK",videoCaption:"_2M4pc",buttonContainer:"_26J91",clearBtn:"_3EUIt",inputEmoji:"I1HlI",charCounter:"_3HWI2",suggestionsPositioner:"_3-qS1",suggestionsContainer:"_1Uy4i",secondaryButtonContainer:"_3g507"}},99062:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={thumb:"_2AkjL",active:"_31gut",bodyWrapper:"_1iECW",body:"_1hZLd",bodyIcon:"_299B_",btnDelete:"_1By33"}},4104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_34aQy",header:"qAj2u",headerRight:"_3PqRX",canvasContainer:"_1PFn9",cropRotateContainer:"_3zRbB",closeButton:"_1gvdP",closeButtonPlaceholder:"_1Ao72",canvas:"_153i9",footer:"_1nPzf",bottomToolbar:"_1nNuD",captionInputContainer:"_1iQr1",captionInputHidden:"_6dYhh"}},44532:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1Mcu-",previewOnly:"_2NB7f",dropOverlay:"_1PdGl",dropOverlayOutline:"_2HexZ",spinner:"pzFG8",footer:"_1HI4Y",addMediaButton:"_1xotB",addMediaButtonDisabled:"WAMhx",filmstripContainer:"_1vAZI",thumbs:"_7Tfhi",sendButton:"_33pCO",captureFooter:"_1z1Aw"}},70905:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3gx1m",cropperContainer:"_2mSFk"}},2482:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={body:"_25wph",previewContainer:"OW_mU",previewIcon:"_4FGL4",header:"_1Xi6x",metadata:"_3QpE7"}},81419:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"jcXC6"}},56690:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2SXhH",footer:"UJ-0N"}},37513:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2wtUo",selected:"_3z23o",disabled:"wZyqj",icon:"ZZ0GN",rotate:"_2X1cd",body:"_2O4Bw",caret:"_104hn"}},78055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3eK79",colorChipsContainer:"_1E-L7"}},89471:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={colorButton:"_2J8i-",primaryColorChip:"fteqj",primaryColorChipMedium:"_1Rjww",secondaryColorChip:"_1H9V5",active:"_3Jsf_",hover:"_1jiBu",selected:"_1lanH",colorChipWithBorder:"_2WYx6"}},95698:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1uNZ6",input:"_1bDiJ"}},56347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={canvas:"_3ZCwl",cursor:"_1YJQa"}},58510:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"fZGUF"}},57775:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1LRKO",rotateLeftButton:"_3dKFO"}},50918:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"QUfeO",fontLabel:"_3OMGG",icon:"_3SJCV"}},67024:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={item:"_1j1xr",selected:"_2DKLD",sansSerif:"_106wS",serif:"_1yqqW",noricanRegular:"bzq8z",bryndanWrite:"_3Pj9c",oswaldHeavy:"ah3iR",alignmentContainer:"_2lKFu",alignmentIcon:"mi3vs",alignmentIconSelected:"_1KlZW"}},53964:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={cirle:"_10ZsU",circleFilled:"_1ZATr",unchecked:"_1B4g5",checked:"_3s-4-"}},65251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1_bv-",thicknessButton:"_3bAiP",thicknessChip:"_3iRrK",selected:"_32C9L"}},46771:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"JKr_m",media:"_3R3yC"}},56342:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3fFxj",media:"_3lqv9",document:"hH6sl",text:"eAWMI",icon:"fDWKK"}},13149:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1ULgK",media:"_2gN82",img:"OunMM",audio:"_3ZDt1",videoContainer:"_33jN5",spinner:"_1-L7X",video:"_2Vd8_",staticPreview:"sWhPU"}},28469:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2nVq-",preview:"_1K_xd",caption:"_3xLDc",img:"_2zsdh",imgBorder:"_2Cuay"}},42479:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={inputContainer:"_hcHx",label:"_2Nd6M",input:"_3qFYS"}},15073:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3XAt1",wallpaperColorCanvas:"_2IV17",wallpaperColorEmpty:"ZxOfr",canvasActive:"_3ts_T",canvasHover:"_1zeZ4"}},62838:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={addLabelBtContainer:"_2RW7t"}},19735:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={actionBtns:"_1NODy",newLabelBtn:"_3_CYW",plus:"_3vPCO"}},53939:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={list:"_2i0C9",hint:"_3sZ4R",button:"AoASc"}},55386:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3zKdl",body:"Sy3TC",captionInput:"_32AUO",footer:"_11gZr",retakeBtn:"rKFEM",retakeIcon:"_2rZzC",caption:"_1sxcB",videoContainer:"_2xIhM",video:"_2jZjN",btn:"_2kkeT",videoInactive:"_2eCp4",btnSend:"_1103Z",image:"_288ya",snapshot:"_3sE1m"}},26959:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={svgInnerStyles:"_2TLmo"}},71889:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={newGroupButton:"EptxG"}},13550:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={icon:"_2WtuC",body:"_3TCJd",spinner:"_1PKms",ack:"YYcY9",statusBlue:"_13UwK"}},86088:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={dropOverlay:"PHaD9",dropOverlayOutline:"WsbTY"}},51236:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={btnSend:"_1WEiG",attributionLink:"_4yicW",mediaBody:"_1YZ48",attribution:"_1nd00",footer:"iajo1",containerBackground:"_3rPvK",retake:"_3r-Fa",retakeIcon:"_3SS26",mediaElementBase:"_3ULIF",mediaElement:"_38bBM _3ULIF"}},95884:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={mediaViewerImg:"_2rSfC",cropOverlay:"pKKiG"}},46475:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={scaler:"_3QxRj",scalerButton:"P6r3N"}},65813:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"fvxZ_",icon:"_3kxe5",text:"sfUBV"}},32521:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={linkContainer:"_3eSYR",descContainer:"_1r8tU",icon:"_3qnQ8"}},56081:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={confirmationText:"_2rM2V"}},23533:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={title:"_3X4ur",titleIcon:"_3v5-C",ack:"_3hJA9",statusBlue:"_31P1q",forwardCount:"_36jfD",spinner:"_3pJTm",list:"_34Zzk",footer:"W5HdQ"}},2021:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={commentInput:"_2_o99",search:"_1Plju",groupInfo:"_2wLei",onSendInvite:"_2-WpU"}},51298:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={animation:"o43XS","play-ltr":"_1-zyO",playLtr:"_1-zyO","play-rtl":"_27Hce",playRtl:"_27Hce",versionInfo:"_1hWGI"}},64677:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2BtE_",textContainer:"_2Tvyf",spinner:"HYKvS"}},14395:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2136P",list:"C1Dd9",header:"K1c_P",item:"_16f8P",right:"DMk3i",left:"_1mO8w",close:"_38Gu8",name:"_2z4ea",time:"_4VLPt"}},34600:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"_9Gs_R",offline:"_3rEcJ",circle:"_2Xn1u",text:"_1nFpn",notification:"p9CjV",ended:"_2OrJW",lastUpdated:"_3VPfk"}},85529:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wrapper:"_26J0I",inactive:"_2ZG5x",offline:"Pc7bU",circle:"_1487t",text:"_2WNWn",backToCenter:"_3LWZ9",visible:"_2Ozk7"}},98057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_2BPRJ",map:"_312iE",authFailed:"xgGDH",loading:"L5P7F"}},48347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_3rs7K",selected:"_10G_J",glow:"h5TUN",stale:"_3WyhQ",expired:"_1HO_K",pin:"_2JeQm"}},67493:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={list:"D0Q5P",stopSharingButton:"_8wYL"}},85753:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={popup:"_1O7kH",container:"_1qWAL",twoLines:"_2dn9y",name:"_2UN5N",status:"_1fM0V",menuButton:"_2UenO",triangle:"_1NoUg"}},4448:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={nextButton:"_1Opmc",section:"_1p7Ee",header:"_1AdYi",chevronIcon:"_3Xfdv"}},95575:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={spinner:"_27bPO",search:"_3zFPA",inputarea:"_1x9wV",inputLine:"etp_f",contacts:"_2DdHI",drawerSection:"_37Xh5",inputareaSizer:"_2-opG"}},66915:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={photoPickerWrapper:"_1Mc0y",scale:"_55HVY",nameWrapper:"_2LTDQ","well-animation":"_1EgwP",wellAnimation:"_1EgwP",phoneIcon:"_9P72S",phoneField:"_1zywm",infoText:"_3FDYs",bannedShopInfoText:"_1EFZ5",content:"_3XR9y"}},4662:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={text:"_2QEzO",checkbox:"_3xbR9",header:"_1_8IZ"}},96601:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={container:"_1J075",section:"_2BZQN",control:"_1iSYt",label:"_3AXj8",disabled:"_1Aj3d"}},96363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={more:"_394Lu",hotKeyWraper:"_3lwKF"}},83314:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={body:"nWPOn",vcardWrapper:"j80SY",btnContainer:"_386ov",btnPosition:"_3o41r"}},26163:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={wallpaperApplyDoodle:"_1aWJq",checkboxLabel:"XvSmy",wallpaperColorGrid:"KzJy3",wallpaperColorCanvas:"Iwkc0",wallpaperDefaultTitle:"_2jzUd",wallpaperColorEmpty:"_1qqLM",canvasHover:"_3Mp8z",canvasActive:"_2MCR7",canvasDefault:"GRVkn"}},44710:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={dimmed:"khEuM",verified:"_3e7DF",icon:"_3OVY5"}},84080:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={textThumb:"qgEhU",thumbSizeSmall:"_14N8a",thumbSizeLarge:"_2dKet",statusImage:"_37ckN",statusImageFallbackBackground:"_14MS9",container:"_3xFA4",thumbContainer:"_1cDhn"}}}]);
//# sourceMappingURL=https://web.whatsapp.com/lazy_loaded_low_priority_components.d7e72384d89d9581ece2.js.map
