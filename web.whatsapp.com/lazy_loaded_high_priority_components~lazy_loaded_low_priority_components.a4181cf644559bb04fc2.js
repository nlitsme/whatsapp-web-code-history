/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */
(self.webpackChunkbuild=self.webpackChunkbuild||[]).push([[9488],{22710:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.formatRemoveResult=function(e,t){return s(e,p,f,m,t)},t.formatResult=s,t.formatParticipantActionString=d,t.formatGroupStatusReasonString=c,t.formatParticipantStatusReasonString=u,t.addSuccessString=function(e,t){return l.default.t(161,{participantNames:e,_plural:t})},t.addFailedString=function(e,t){return l.default.t(159,{participantNames:e,_plural:t})},t.addPartialFailedString=function(){return l.default.t(160)},t.removeSuccessString=p,t.removeFailedString=f,t.removePartialFailedString=m,t.promoteSuccessString=function(e,t){return l.default.t(174,{participantNames:e,_plural:t})},t.promoteFailedString=function(e,t){return l.default.t(172,{participantNames:e,_plural:t})},t.promotePartialFailedString=function(){return l.default.t(173)},t.demoteFailedString=function(e,t,a){switch(a){case 406:return l.default.t(164,{participant:e});default:return l.default.t(163,{participantNames:e,_plural:t})}},t.demoteSuccessString=function(e,t){return l.default.t(166,{participantNames:e,_plural:t})},t.demotePartialFailedString=function(){return l.default.t(165)};var n=r(a(43805)),o=r(a(20468)),l=r(a(38637)),i=r(a(43926));function s(e,t,a,r,l){var s;if(207===e.status){var p={};for(var f in e)if(i.default.isWid(f)){var m=e[f];if((403!==m||!o.default.supportsFeature(o.default.F.GROUPS_V_4_JOIN_PERMISSION))&&207!==m){p[m]||(p[m]=[]);var h=n.default.get(f);h&&p[m].push(h)}}var g=[];for(var v in p){var E=d(t,a,u,parseInt(v,10),p[v]);E&&g.push(E)}s=g.length>0?g.join("\n"):r()}else s=d(t,a,c,e.status,l);return s}function d(e,t,a,r,n){var o=n.map((e=>e.formattedShortName)).join(l.default.t(577)),i=200===r;return(i?e(o,n.length):t(o,n.length,r))+(i?"":a(r,n.length))}function c(e){var t="";switch(e){case 403:t=" "+l.default.t(109);break;case 408:t=" "+l.default.t(169);break;case 404:t=" "+l.default.t(110);break;case 429:t=" "+l.default.t(111)}return t}function u(e,t){var a="";switch(e){case 401:case 406:case 409:break;case 404:a=" "+l.default.t(168,{_plural:t});break;case 408:a=" "+l.default.t(169,{_plural:t});break;case 500:a=" "+l.default.t(170);break;default:a=" "+l.default.t(171)}return a}function p(e,t){return l.default.t(179,{participantNames:e,_plural:t})}function f(e,t,a){switch(a){case 406:return l.default.t(178,{participant:e});default:return l.default.t(176,{participantNames:e,_plural:t})}}function m(){return l.default.t(177)}},30371:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.addParticipants=function(e,t){return f((0,p.unproxy)(e),t)},t.removeParticipants=function(e,t){return m((0,p.unproxy)(e),t)},t.promoteParticipants=function(e,t){return h((0,p.unproxy)(e),t)},t.demoteParticipants=function(e,t){return g((0,p.unproxy)(e),t)};var o=n(a(2784)),l=a(8507),i=r(a(13277)),s=n(a(24461)),d=n(a(22710)),c=r(a(38637)),u=a(94455),p=a(47138);function f(e,t,a=(0,l.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>r.get(e.id))))return __LOG__(3)`models:groupMetadata:participantCollection:addParticipants already a group member`,Promise.reject(new s.ActionError);if(!r.canAdd())return Promise.reject(new s.ActionError);var n=(0,u.sendAddParticipants)(e.id,t.map((e=>e.id))),p=t.map((e=>e.formattedShortName)).join(c.default.t(577)),m=new l.ActionType(c.default.t(162,{participantNames:p,_plural:t.length})),h=n.then((e=>{r.sendForNeededAddRequest(e);var a=d.formatResult(e,d.addSuccessString,d.addFailedString,d.addPartialFailedString,t);return new l.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:addParticipants dropped`,new l.ActionType(c.default.t(159,{participantNames:p,_plural:t.length}),{actionText:c.default.t(199),actionHandler:()=>f(e,t,a)}))));return i.default.openToast(o.createElement(l.ActionToast,{id:a,initialAction:m,pendingAction:h})),n.then((()=>{}))}function m(e,t,a=(0,l.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>!r.canRemove(e))))return Promise.reject(new s.ActionError);var n=(0,u.sendRemoveParticipants)(e.id,t.map((e=>e.id))),p=t.map((e=>e.contact.formattedShortName)).join(c.default.t(577)),f=new l.ActionType(c.default.t(180,{participantNames:p,_plural:t.length})),h=n.then((e=>{var a=d.formatRemoveResult(e,t.map((e=>e.contact)));return new l.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new l.ActionType(c.default.t(176,{participantNames:p,_plural:t.length}),{actionText:c.default.t(199),actionHandler:()=>m(e,t,a)}))));return i.default.openToast(o.createElement(l.ActionToast,{id:a,initialAction:f,pendingAction:h})),n.then((()=>{}))}function h(e,t,a=(0,l.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>!r.canPromote(e))))return Promise.reject(new s.ActionError);var n=(0,u.sendPromoteParticipants)(e.id,t.map((e=>e.id))),p=t.map((e=>e.contact.formattedShortName)).join(c.default.t(577)),f=new l.ActionType(c.default.t(175,{participantNames:p,_plural:t.length})),m=n.then((e=>{var a=d.formatResult(e,d.promoteSuccessString,d.promoteFailedString,d.promotePartialFailedString,t.map((e=>e.contact)));return new l.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:removeParticipants dropped`,new l.ActionType(c.default.t(172,{participantNames:p,_plural:t.length}),{actionText:c.default.t(199),actionHandler:()=>h(e,t,a)}))));return i.default.openToast(o.createElement(l.ActionToast,{id:a,initialAction:f,pendingAction:m})),n.then((()=>{}))}function g(e,t,a=(0,l.genId)()){var r=e.groupMetadata.participants;if(t.some((e=>!r.canDemote(e))))return Promise.reject(new s.ActionError);var n=(0,u.sendDemoteParticipants)(e.id,t.map((e=>e.id))),p=t.map((e=>e.contact.formattedShortName)).join(c.default.t(577)),f=new l.ActionType(c.default.t(167,{participantNames:p,_plural:t.length})),m=n.then((e=>{var a=d.formatResult(e,d.demoteSuccessString,d.demoteFailedString,d.demotePartialFailedString,t.map((e=>e.contact)));return new l.ActionType(a)})).catch((()=>(__LOG__(3)`models:groupMetadata:participantCollection:demoteParticipants dropped`,new l.ActionType(c.default.t(163,{participantNames:p,_plural:t.length}),{actionText:c.default.t(199),actionHandler:()=>g(e,t,a)}))));return i.default.openToast(o.createElement(l.ActionToast,{id:a,initialAction:f,pendingAction:m})),n.then((()=>{}))}},14921:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.removeGroupParticipants=function(e,t){return m(e,t,c).catch((e=>{__LOG__(3)`error sending removing group participants iq: ${e}`}))},t.addGroupParticipants=function(e,t){return m(e,t,u).catchType(i.ServerStatusCodeError,(e=>({status:e.statusCode})))},t.demoteGroupParticipants=function(e,t){return m(e,t,p).catch((e=>{__LOG__(3)`error sending demoting group participants iq: ${e}`}))},t.promoteGroupParticipants=function(e,t){return m(e,t,f).catch((e=>{__LOG__(3)`error sending promoting group participants iq: ${e}`}))};var n=r(a(70417)),o=a(35773),l=a(7017),i=a(33576),s=r(a(45521)),d=a(29020),c="remove",u="add",p="demote",f="promote";function m(e,t,a){var r,m=t.map((e=>(0,o.wap)("participant",{jid:(0,d.JID)(e)})));switch(a){case u:r=(0,o.wap)("add",null,m);break;case c:r=(0,o.wap)("remove",null,m);break;case p:r=(0,o.wap)("demote",null,m);break;case f:r=(0,o.wap)("promote",null,m);break;default:return Promise.reject(new Error(`invalid group operation ${a}`))}var h=(0,o.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"set",xmlns:"w:g2",id:(0,o.generateId)()},r);return(0,l.sendIq)(h,function(e){return new s.default(`${e}GroupParticipantsReplyParser`,(t=>({id:t.attrString("id"),participants:t.child(e).mapChildren((e=>({wid:e.attrUserWid("jid"),error:e.hasAttr("error")?e.attrInt("error"):null})))})))}(a)).then((e=>{if(e.success){var{participants:t}=e.result,a={};return t.forEach((e=>{Object.assign(a,{[e.wid.toString()]:null!=e.error?e.error:200})})),(0,n.default)((0,n.default)({},a),{},{status:207,participants:t.map((e=>({[e.wid.toString()]:{code:null!=e.error&&e.error.toString()||"200"}})))})}return Promise.reject(new i.ServerStatusCodeError(e.errorCode,e.errorText))}))}},94455:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddParticipants=function(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(a=(0,l.addGroupParticipants)(e,t)))return Promise.reject(new Error("addParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.addParticipants(e,t);return a},t.sendRemoveParticipants=function(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(a=(0,l.removeGroupParticipants)(e,t)))return Promise.reject(new Error("sendRemoveParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.removeParticipants(e,t);return a},t.sendDemoteParticipants=function(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(a=(0,l.demoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendDemoteParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.demoteParticipants(e,t);return a},t.sendPromoteParticipants=function(e,t){var a;if(n.default.supportsFeature(n.default.F.MD_BACKEND)){if(!(a=(0,l.promoteGroupParticipants)(e,t)))return Promise.reject(new Error("sendPromoteParticipants: not supported when not build with MD_BACKEND"))}else a=o.default.promoteParticipants(e,t);return a};var n=r(a(20468)),o=r(a(94407)),l=a(14921)},90758:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadType=t.EditType=void 0;var r=a(28103).Mirrored(["EDITING","PENDING","DONE","ERROR"]);t.EditType=r;var n=a(28103).Mirrored(["PENDING","DONE","ERROR"]);t.LoadType=n},737:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var o=n(a(2784)),l=r(a(46769)),i=n(a(51045)),s=r(a(38658)),{useState:d,useEffect:c}=o;function u({contact:e,editable:t,profilePicThumb:a,onClick:r,onLoad:n}){var[u,p]=d(window.innerWidth);c((()=>{function e(){p(window.innerWidth)}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);var f,m=u>1300?152:122;return f=t&&null!=a?o.createElement(s.default,{profilePicThumb:a,size:m}):o.createElement(i.default,{id:e.id,size:m,loader:!0,onLoad:n,onClick:r,quality:i.DETAIL_IMAGE_QUALITY.HIGH}),o.createElement(o.Fragment,null,o.createElement("div",{className:l.default.coverPhoto}),o.createElement("div",{className:l.default.avatar},o.createElement("div",{className:l.default.statusBorder},f)))}u.displayName="CoverPhoto"},46401:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RawBusinessProfile",{enumerable:!0,get:function(){return r.RawBusinessProfile}}),Object.defineProperty(t,"BUSINESS_HOUR_MODES",{enumerable:!0,get:function(){return n.BUSINESS_HOUR_MODES}}),Object.defineProperty(t,"DAYS_OF_WEEK",{enumerable:!0,get:function(){return n.DAYS_OF_WEEK}});var r=a(59612),n=a(19999)},85289:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBusinessOpenState=function(e,t){var a,o;if(null==e.timezone)return{status:"unknown"};var l=t||new Date,d=new Date(l.toLocaleString("en-US",{timeZone:e.timezone})),c=(l.getTime()-d.getTime())/1e3/60,u=e.config[r.DAYS_OF_WEEK[l.getDay()]];if(!u)return{status:i.CLOSED_TODAY};switch(u.mode){case n.BUSINESS_HOUR_MODES.OPEN_24H:if(u)return{status:i.OPEN_24H};break;case n.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:if(u)return{status:i.OPEN_APPOINTMENT};break;case n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:var p=60*l.getHours()+l.getMinutes();if(1===(null===(a=u.hours)||void 0===a?void 0:a.length)){var f=u.hours[0][0],m=u.hours[0][1];return p>=f&&p<=m?{status:i.OPEN,openUntil:s(c+m)}:p<=f?{status:i.CLOSED,opensAt:s(c+f)}:{status:i.CLOSED}}if(2===(null===(o=u.hours)||void 0===o?void 0:o.length)){var h=u.hours[0][0],g=u.hours[0][1],v=u.hours[1][0],E=u.hours[1][1];return p>=h&&p<=g?{status:i.OPEN,openUntil:s(c+g),additionalOpen:s(c+v),additionalClose:s(c+E)}:p<h?{status:i.CLOSED,opensAt:s(c+h),additionalOpen:s(c+v),additionalClose:s(c+E)}:p>=v&&p<=E?{status:i.OPEN,openUntil:s(c+E)}:p<v?{status:i.CLOSED,opensAt:s(c+v)}:{status:i.CLOSED}}}return{status:"unknown"}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return o.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return o.timeStringToMinutes}}),t.BUSINESS_OPEN_STATUS=t.convertToRawBusinessProfile=t.isValidBusinessHours=t.isValidTime=void 0;var r=a(19999),n=a(46401),o=a(16123),l=e=>void 0!==(0,o.timeStringToMinutes)(e);t.isValidTime=l;t.isValidBusinessHours=(e,t)=>{if(e===n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS)for(var a in t){var r=t[a],{closed:o,hours:i}=r;if(!o)for(var[s,d]of i)if(!l(s)||!l(d))return!1}return!0};t.convertToRawBusinessProfile=({mode:e,dayValues:t,note:a,timezone:r})=>{var l={};for(var i in t){var s=t[i],{closed:d,hours:c}=s;if(!d){var u={mode:e};e===n.BUSINESS_HOUR_MODES.SPECIFIC_HOURS&&(u.hours=c.map((([e,t])=>[(0,o.timeStringToMinutes)(e)||0,(0,o.timeStringToMinutes)(t)||0]))),l[i]=u}}return{businessHours:{config:l,note:a,timezone:r||Intl.DateTimeFormat().resolvedOptions().timeZone}}};var i={OPEN:"open",CLOSED:"closed",OPEN_TODAY:"open_today",CLOSED_TODAY:"closed_today",OPEN_APPOINTMENT:"open_appointment",OPEN_24H:"open_24h",UNKNOWN:"unknown"};function s(e){var t=new Date,a=Math.floor(e/60);return t.setHours(a),t.setMinutes(e%60),t.setSeconds(0),t}t.BUSINESS_OPEN_STATUS=i},59612:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EditType",{enumerable:!0,get:function(){return r.EditType}}),Object.defineProperty(t,"LoadType",{enumerable:!0,get:function(){return r.LoadType}});var r=a(90758)},1882:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var o=n(a(2784)),l=r(a(72779)),i=r(a(33986)),s=r(a(18779));function d(e){return o.createElement(s.default,{name:"shopping-cart",className:(0,l.default)(i.default.cartIcon,{[i.default.inheritColor]:"inherit-color"===e.theme})})}d.displayName="CartIcon"},79953:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var[t,a]=l.useState(null);return l.useEffect((()=>{if(e){var t=!1;return(0,o.default)((function*(){var r;try{var n,o=yield(0,s.default)(e);r=null!==(n=null==o?void 0:o.data)&&void 0!==n?n:null}catch(e){r=null}t||a(r)}))(),()=>{t=!0}}a(null)}),[e]),{linkPreview:t,clearLinkPreview:()=>{a(null)}}},t.findFirstWebLink=void 0;var o=n(a(52954)),l=r(a(2784)),i=a(67816),s=n(a(5408)),d=r(a(63428));t.findFirstWebLink=e=>{var t,a=(0,i.removeCodeBlocks)(e);return null===(t=d.findLinks(a,!0)[0])||void 0===t?void 0:t.url}},17074:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var o=n(a(72779)),l=r(a(2784)),i=n(a(92454)),s=r(a(35474)),d=n(a(86861)),c=n(a(15898)),u=a(60301),p=n(a(3029)),f=a(19432),m=n(a(68267)),h=n(a(61671));function g(e){var{images:t,renderFallback:a,fallbackMediaData:r,fetching:n,onClick:i}=e,g=l.useRef(null),v=l.useRef(null),E=l.useRef(null),C=l.useRef(null),_=l.useRef(null),[S,P]=l.useState(null),[y,T]=l.useState(t.filter((e=>e.mediaData.mediaStage===u.MEDIA_DATA_STAGE.RESOLVED)).length),[N,b]=l.useState(!1),M=y===t.length,k=()=>T((e=>e+1));l.useEffect((()=>{if(!M&&!a){var e,t=v.current;if(!t)return;null===(e=E.current)||void 0===e||e.cancel(),E.current=(E.current||Promise.resolve()).then((()=>(0,h.default)(t,{opacity:[1,0]},{delay:75,duration:50}))).cancellable().then((()=>{b(!0)})).catchType(Promise.CancellationError,(()=>{(0,h.default)(t,"stop",!0)})).finally((()=>{E.current=null}))}return()=>{var e;null===(e=E.current)||void 0===e||e.cancel()}}),[M,a]);var O,D,I,R=()=>{var e;return(null===(e=g.current)||void 0===e?void 0:e.children)?g.current.scrollWidth===g.current.offsetWidth?null:0===g.current.scrollLeft?"next":g.current.scrollWidth-1<=g.current.scrollLeft+g.current.offsetWidth?"prev":"both":null};if(l.useEffect((()=>{P(R())}),[M]),a&&0===t.length)return l.createElement("div",{className:d.default.carousel,dir:"ltr"},l.createElement("div",{className:(0,o.default)(d.default.contentContainer,d.default.slidesContainer)},r&&l.createElement(c.default,{altText:"",mediaData:r,renderFallback:!0,singleSlide:!0})));var w=()=>{C.current=null;var e=R();S!==e&&P(e)};if(t.length>1){var A=()=>{var e=g.current;if(null!=e&&("prev"===S||"both"===S)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.lastElementChild;r instanceof HTMLElement&&0===t;){var n=r.offsetLeft+Math.floor(r.offsetWidth/2);n<a&&(t=n-a),r=r.previousElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},L=()=>{var e=g.current;if(null!=e&&("next"===S||"both"===S)){for(var t=0,a=e.scrollLeft+Math.floor(e.offsetWidth/2),r=e.firstElementChild;r instanceof HTMLElement&&0===t;){var n=r.offsetLeft+Math.floor(r.offsetWidth/2);a<n&&(t=n-a),r=r.nextElementSibling}0!==t&&e.scrollBy({left:t,behavior:"smooth"})}},x=()=>{_.current=null;var e=R();S!==e&&P(e)};I=()=>{null==_.current&&(_.current=requestAnimationFrame(x))},M&&null!=S&&(O=l.createElement(s.default,{type:s.ButtonType.Prev,onClick:A,onKeyDown:A,disabled:"prev"!==S&&"both"!==S,theme:f.RoundTheme.Small,overMedia:!0}),D=l.createElement(s.default,{type:s.ButtonType.Next,onClick:L,onKeyDown:L,disabled:"next"!==S&&"both"!==S,theme:f.RoundTheme.Small,overMedia:!0}))}var F=1===t.length,U=t.map(((e,t)=>l.createElement(c.default,{key:t,altText:"",image:e,singleSlide:F,mediaData:e.mediaData,onClick:i,onLoad:k}))),B=M?null:l.createElement("div",{className:(0,o.default)(d.default.contentContainer,d.default.spinnerContainer)},l.createElement("div",{className:d.default.spinner,ref:v},l.createElement(m.default,{color:"default",size:50,stroke:4}))),H=(0,o.default)(d.default.carousel,{[d.default.loaded]:!n&&M,[d.default.fadeIn]:N});return l.createElement("div",{className:H,dir:"ltr"},B,l.createElement("div",{ref:g,className:(0,o.default)(d.default.contentContainer,d.default.slidesContainer),onScroll:I},U),O,D,l.createElement(p.default,{onResize:()=>{null==C.current&&(C.current=requestAnimationFrame(w))}}))}i.default.polyfill(),g.displayName="ImageCarousel"},15898:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(68018)),i=a(60301),s=r(a(66130)),d=({mediaData:e,altText:t,image:a,singleSlide:r,renderFallback:n,onClick:d,onLoad:c,forwardRef:u})=>{var{fullHeight:p,fullWidth:f,mediaStage:m,renderableUrl:h}=(0,s.default)(e,["fullHeight","fullWidth","mediaStage","renderableUrl"]),g=o.useRef(null),v=o.useRef(m===i.MEDIA_DATA_STAGE.RESOLVED);(0,o.useEffect)((()=>{!c||v.current||n||m!==i.MEDIA_DATA_STAGE.RESOLVED||(c(),v.current=!0)}),[c,n,m]);var E=f&&p?f/p:.8;E<.8&&(E=.8),E>1.91&&(E=1.91),E>1&&!r&&(E=1);var C={width:r&&E<1?100*E+"%":1!==E||r?null:"100%"},_={paddingTop:`${Math.floor(100/E)}%`},S={cursor:""+(d?"pointer":"auto")};return o.createElement("div",{ref:u?e=>u(e):null,className:l.default.slide,style:C},o.createElement("div",{className:l.default.slideInnerContainer,style:_},o.createElement("img",{ref:g,alt:t,src:h,className:l.default.image,style:S,draggable:"false",onClick:()=>{d&&g.current&&a&&d(g.current,a)}})))};d.displayName="ImageSlide";var c=d;t.default=c},36467:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.Gallery=D,t.default=void 0;var o=n(a(12436)),l=n(a(72779)),i=r(a(2784)),s=n(a(32944)),d=a(62820),c=n(a(13277)),u=n(a(23045)),p=n(a(13752)),f=a(83251),m=n(a(20468)),h=n(a(38637)),g=n(a(4739)),v=n(a(86619)),E=n(a(13567)),C=n(a(50938)),_=n(a(476)),S=a(60301),P=n(a(54559)),y=n(a(68267)),T=n(a(90370)),N=a(47138),b=n(a(18779));class M extends i.Component{constructor(...e){super(...e),this.onScroll=e=>{this._handleScroll(e.currentTarget)},this._handleScroll=(0,o.default)((e=>{var t=this.props.mediaMsgs;t.hasMediaBefore&&e.scrollTop+u.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._scheduleMediaQuery(t.head())}),100)}componentDidMount(){this.props.mediaMsgs.hasMediaBefore&&this._scheduleMediaQuery(),this.props.listeners.add(this.props.mediaMsgs,"add",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"remove",(e=>{var t=this.props.selectedMessages;t&&t.isSelected(e)&&t.setVal(e,!1),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"reset",(()=>{this.props.selectedMessages&&this.props.selectedMessages.unsetAll(),this.forceUpdate()})),this.props.listeners.add(this.props.mediaMsgs,"query_media_before",(()=>{this.forceUpdate()}))}componentWillUnmount(){this._handleScroll.cancel()}_scheduleMediaQuery(e){var t=this.props.mediaMsgs;t.hasMediaBefore&&this.props.listeners.uiIdle((()=>{t.queryMedia({chat:(0,N.unproxy)(this.props.chat),msg:e})}))}render(){var e,{fullCollection:t,selectedMessages:a,chat:r,mediaMsgs:n,selectable:o,onMessageSelect:l}=this.props,s=n.map(((e,r)=>{var s;return!t&&r>=n.length-6&&r<=n.length-4&&(s="hideableSecondRow"),i.createElement(O,{msg:e,hoverEvent:t,selectable:o,selectedMessages:a,onMessageSelect:l,theme:s,key:e.id.toString()})}));s.reverse(),t||(s=s.slice(0,6));var c=!1;return m.default.supportsFeature(m.default.F.MD_BACKEND)&&r.endOfHistoryTransferType===d.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY&&(c=!0,t?e=h.default.t(504):0===n.length&&0===r.docCount&&0===r.linkCount&&0===r.productCount&&(e=h.default.t(502))),i.createElement(i.Fragment,null,i.createElement(D,{medias:s,mediaCollection:n,fullCollection:t,chat:(0,N.unproxy)(r),onScroll:this.onScroll}),c?i.createElement(p.default,{icon:i.createElement(b.default,{name:"content-chat"}),theme:"list",secondary:h.default.t(500)},e):null)}}M.CONCERNS={chat:["linkCount","docCount","productCount","endOfHistoryTransferType"]},M.displayName="MediaGallery";class k extends i.Component{constructor(){super(...arguments),this.setRefImg=e=>{this.img=e},this._handleSelectChange=e=>{this.state.selected!==e&&this.setState({selected:e})},this.onClick=e=>{var{msg:t,selectable:a,onMessageSelect:r}=this.props,n=t.mediaData;if(a&&r)r(t,!this.state.selected);else if(n.mediaStage!==S.MEDIA_DATA_STAGE.ERROR_MISSING){var o;e&&e.stopPropagation();var l=t.id;if(n.isGif||n.type===v.default.TYPE.IMAGE){var s=this.img;o=e=>l.equals(e)&&s?s:null}c.default.mediaViewerModal({msg:(0,N.unproxy)(t),getZoomNode:o})}else c.default.openModal(i.createElement(C.default,{msg:t}))},this.onDragStart=e=>{e.nativeEvent.dataTransfer.setData("text/uri-list",this.props.msg.mediaData.renderableUrl)};var{msg:e,selectedMessages:t}=this.props;this.state={selected:!(!t||!t.isSelected(e))}}componentDidMount(){this.props.selectedMessages&&this.props.listeners.add(this.props.selectedMessages,this.props.msg.id.toString(),this._handleSelectChange)}render(){var{msg:e,hoverEvent:t,selectable:a,onMessageSelect:r,theme:n,className:o}=this.props,s=e.mediaData,d=s.type===v.default.TYPE.IMAGE&&s.renderableUrl?this.onDragStart:null,c=(0,l.default)(o);return i.createElement(_.default,{classes:c,onClick:this.onClick,hoverEvent:t,selectable:a,selected:this.state.selected,onMessageSelect:r,onDragStart:d,msg:e,theme:n,imgRef:this.setRefImg})}}k.displayName="MediaCanvas";var O=(0,g.default)(k);function D(e){var{mediaCollection:t,fullCollection:a,chat:r,onScroll:n,justify:o}=e,d=e.medias||e.productMedias;if(!d)return null;var c,u,p,m,g=(0,l.default)(E.default.container,{[E.default.drawer]:a,[E.default.galleryEmpty]:0===t.length,[E.default.justifySpaceBetween]:"space-between"===o}),v=[...d];if(t.queryMediaBefore&&(a||v.length<6)){var C=(0,l.default)(E.default.more,E.default.canvasComponent,{[E.default.canvasSecondRow]:!a&&v.length>=3,[E.default.canvasFirst]:0===t.length});v.push(i.createElement("div",{className:C,key:"spinner"},i.createElement(y.default,{stroke:6,size:24})))}if(0===t.length){if(a)return t.queryMediaBefore?i.createElement("div",{className:(0,l.default)(E.default.drawer,E.default.drawerBody)},i.createElement(f.Loading,null)):i.createElement(f.MediaMsgs,null);t.queryMediaBefore||t.hasMediaBefore||(g=(0,l.default)(g,E.default.galleryEmpty),v=[(c=Math.max(r?r.docCount:0,0),u=Math.max(r?r.linkCount:0,0),p=Math.max(r?r.productCount:0,0),m=[],null!=c&&c>0&&m.push(h.default.t(545,{count:c,_plural:c})),null!=u&&u>0&&m.push(h.default.t(840,{count:u,_plural:u})),P.default.productMediaAttachments&&null!=p&&p>0&&m.push(h.default.t(1181,{count:p,_plural:p})),m.length>0?m.join(h.default.t(577)):P.default.productMediaAttachments?h.default.t(1091):h.default.t(1090))])}else for(var _=0;_<6;_++)v.push(i.createElement("div",{className:E.default.canvasEmpty,key:"empty"+_}));return i.createElement("div",{onScroll:n,"data-a8n":s.default.key("media-gallery"),className:g},v)}D.displayName="Gallery";var I=(0,g.default)((0,T.default)(M,M.CONCERNS));t.default=I},476:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.hasThumbnail=C,t.default=t.MediaThumb=void 0;var o=n(a(72779)),l=r(a(2784)),i=n(a(46273)),s=n(a(99461)),d=n(a(4739)),c=n(a(86619)),u=n(a(13074)),p=n(a(45884)),f=n(a(84161)),m=n(a(18779)),h=n(a(11159)),g=a(60301);class v extends l.Component{constructor(...e){super(...e),this.state={hover:!1},this._setRefImg=e=>{this._img=e},this._setRefContainer=e=>{this._container=e},this._onSelectClick=()=>{this.props.onMessageSelect&&this.props.onMessageSelect(this.props.msg,!this.props.selected)},this._onMouseOver=()=>{this.state.hover||this.setState({hover:!0})},this._onMouseEnter=()=>{this.state.hover||this.setState({hover:!0})},this._onMouseLeave=()=>{this.state.hover&&this.setState({hover:!1})},this.maybeDownloadMediaMD=()=>{var{msg:e}=this.props;e.mediaData.preview||e.mediaData.fullPreviewData||e.mediaData.type!==c.default.TYPE.IMAGE&&e.mediaData.type!==c.default.TYPE.VIDEO||e.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImgNode=(e,t,a,r)=>{var n=a?l.createElement("div",{className:u.default.shade}):null,o=t?{backgroundImage:`url(${t})`}:null;return l.createElement("div",{className:e,style:o,onClick:this.props.onClick,ref:this._setRefImg,onDragStart:this.props.onDragStart,draggable:null!=this.props.onDragStart||null},r,n)},this._downloadMedia=()=>{this.props.msg.downloadMedia({downloadEvenIfExpensive:!1,isUserInitiated:!1,rmrReason:f.default.WEBC_RMR_REASON_CODE.MEDIA_VIEWER})},this._renderImg=()=>{var e,{msg:{mediaData:t},preferPreview:a}=this.props;switch(t.type){case c.default.TYPE.AUDIO:return this._renderImgNode(`${u.default.mediaCanvas} attach-media-audio-thumb`);case c.default.TYPE.VIDEO:var r=(0,o.default)(u.default.mediaCanvas,{"media-video-thumb":t.isGif&&!t.preview}),n=null===(e=t.preview)||void 0===e?void 0:e.url();return this._renderImgNode(r,n,!0);case c.default.TYPE.IMAGE:var i=e=>{var a,r=null!=e?l.createElement("div",{className:u.default.mediaCanvas,style:{backgroundImage:`url(${e})`}}):null;return this._renderImgNode(u.default.mediaCanvas,null===(a=t.preview)||void 0===a?void 0:a.url(),this.props.msg.star,r)},s=()=>t.preview?i(null):this._renderImgNode(u.default.mediaCanvas,null,this.props.msg.star);return a?s():l.createElement("div",{className:u.default.mediaCanvas},l.createElement(p.default,{mediaData:t,placeholderRenderer:s,renderProgressively:!0,downloadMedia:this._downloadMedia},i));default:return this._renderImgNode(null,null,this.props.msg.star)}},this._renderIcon=()=>{var e,{mediaData:t}=this.props.msg;if(!t)return null;switch(t.type){case c.default.TYPE.AUDIO:e="msg-audio";break;case c.default.TYPE.VIDEO:e=t.isGif?"msg-gif":"msg-video"}return null==e?null:l.createElement("div",{className:u.default.iconType},l.createElement(m.default,{name:e}))},this._renderDuration=()=>{var{mediaData:e}=this.props.msg;switch(e.type){case c.default.TYPE.AUDIO:return l.createElement(E,{duration:e.duration});case c.default.TYPE.VIDEO:return e.isGif?null:l.createElement(E,{duration:e.duration});default:return null}}}componentDidMount(){this.props.listeners.add(this.props.msg.mediaData,"change:preview",(()=>{this.forceUpdate()})),this.props.listeners.add(this.props.msg,"change:star",(()=>{this.forceUpdate()})),this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container),this.maybeDownloadMediaMD(),this.props.listeners.add(this.props.msg.mediaData,"change:mediaStage",(()=>{this.props.msg.mediaData.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED&&this.forceUpdate()}))}componentDidUpdate(){this.props.imgRef&&this.props.imgRef(this._img),this.props.containerRef&&this.props.containerRef(this._container)}componentWillUnmount(){this.props.imgRef&&this.props.imgRef(null),this.props.containerRef&&this.props.containerRef(null)}render(){var e,{msg:t,selectable:a,theme:r,active:n}=this.props,s=this.props.selected||!1;(a||this.state.hover)&&(e=l.createElement("div",{className:u.default.mediaSelect},l.createElement("div",{className:u.default.shadeTop,onClick:this.props.onClick}),l.createElement(i.default,{onChange:this._onSelectClick,hover:this.state.hover,checked:s})));var d=null,c=null,p=null;this.props.hoverEvent&&(d=this._onMouseOver,c=this._onMouseEnter,p=this._onMouseLeave);var f=(0,o.default)(this.props.classes,u.default.canvasComponent,{[u.default.canvasSelected]:s,[u.default.canvasSecondRow]:"hideableSecondRow"===r,[u.default.viewerFlow]:"viewerFlow"===r||"viewerFlowTransparent"===r,[u.default.viewerFlowTransparent]:"viewerFlowTransparent"===r,[u.default.active]:n}),h=t.star?l.createElement("div",{className:u.default.iconStar},l.createElement(m.default,{name:"star"})):null;return!0,C(t.mediaData)?l.createElement("div",{ref:this._setRefContainer,className:f,onMouseOver:d,onMouseEnter:c,onMouseLeave:p},e,l.createElement("div",{className:u.default.canvasBody},this._renderIcon(),this._renderDuration(),h),this._renderImg()):null}}function E({duration:e}){var t=s.default.durationStr(e);return t?l.createElement("span",{className:u.default.mediaCanvasDuration},t):null}function C(e){switch(e.type){case c.default.TYPE.VIDEO:case c.default.TYPE.IMAGE:if(e.preview||e.fullPreviewData||e.mediaStage===g.MEDIA_DATA_STAGE.RESOLVED)return!0;if(h.default.has(e.filehash)){try{h.default.getOrCreateURL(e.filehash)}catch(e){return!1}return!0}return!1;default:return!0}}t.MediaThumb=v,v.displayName="MediaThumb";var _=(0,d.default)(v);t.default=_},71673:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var o=n(a(2784)),l=r(a(72779)),i=r(a(30769));function s(e){return o.createElement("div",{className:(0,l.default)(i.default.icon,{[i.default.transparent]:e.theme&&"transparent"===e.theme,[i.default.compact]:e.theme&&"compact"===e.theme,[i.default.disabled]:e.disabled})},e.children)}s.displayName="RoundIcon"},19040:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=n(a(2784)),l=a(66239),i=r(a(38637)),s=r(a(73041)),d=a(4704);function c(e){var{catalog:t,onSend:a}=e,r=(0,d.createCatalogLink)(t.id.user),n=t.id.equals((0,l.getMaybeMeUser)())?`${i.default.t(1151)} ${r}`:r;return o.createElement(s.default,{text:n,pushTransition:"none",popTransition:"none",onSend:a})}c.displayName="SendProductLinkFlow"},16882:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=n(a(2784)),l=a(66239),i=r(a(38637)),s=r(a(73041)),d=a(4704);function c(e){var{product:t,onSend:a}=e,r=(0,d.createProductLink)(t.catalogWid.user,t.id.toString()),n=t.catalogWid.equals((0,l.getMaybeMeUser)())?`${i.default.t(1178)} ${r}`:r;return o.createElement(s.default,{text:n,pushTransition:"none",popTransition:"none",onSend:a})}c.displayName="SendProductLinkFlow"},73041:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(52954)),l=r(a(2784)),i=a(25559),s=a(28221),d=n(a(13277)),c=n(a(23045)),u=n(a(94751)),p=n(a(38637)),f=r(a(55231)),m=a(24256),h=n(a(54559)),g=n(a(94228));class v extends u.default{constructor(...e){var t;super(...e),t=this,this._selected=[],this._getSelected=()=>this._selected,this._handleSelectionChange=(e,t,a)=>{this._selected=a},this._handleForwardConfirmed=e=>{this._send(e)},this._handleCancel=()=>{this.end()},this._send=function(){var e=(0,o.default)((function*(e){var{text:a,title:r,onSend:n}=t.props;if(1===e.length){var o=e[0];yield t._pasteText(o,a),t.end(),window.innerWidth<=c.default.LAYOUT_2COLUMNS_MAX_WIDTH&&d.default.closeDrawerRight()}else t.push(l.createElement(g.default,{defaultText:a,title:r||p.default.t(990),onSend:(a,r)=>t._handleSend(e,a,r),onBack:t._handleBack}));n&&n()}));return function(){return e.apply(this,arguments)}}(),this._handleSend=(e,t,a)=>{this._sendText(e,t,a),this.end()},this._handleBack=()=>{this.pop()},this._pasteText=function(){var e=(0,o.default)((function*(e,a){yield t._ensureContactUnblocked(e),e.active?d.default.pasteChatTextInput(e,a):(e.setComposeContents({text:a}),d.default.openChatFromUnread(e).then((t=>{t&&d.default.focusChatTextInput(e)})))}));return function(){return e.apply(this,arguments)}}(),this._sendText=(e,a,r)=>{e.forEach(function(){var e=(0,o.default)((function*(e){yield t._ensureContactUnblocked(e),d.default.once("ui_idle",(()=>{(0,m.sendTextMsgToChat)(e,a,{linkPreview:r})}))}));return function(){return e.apply(this,arguments)}}())},this._ensureContactUnblocked=function(){var e=(0,o.default)((function*(e){e.isUser&&e.contact.isBlocked()&&(yield(0,i.unblockContact)(e.contact))}));return function(){return e.apply(this,arguments)}}()}componentDidMount(){this.push(l.createElement(f.default,{title:this.props.title||p.default.t(990),listType:f.ListType.CHAT_SELECT_MODAL,getInitialItems:this._getSelected,maxItems:h.default.multicastLimitGlobal,onConfirm:this._handleForwardConfirmed,onCancel:this._handleCancel,onSelectionChanged:this._handleSelectionChange,singleSelectionFooterType:s.FooterType.NEXT,multipleSelectionFooterType:s.FooterType.NEXT}))}}t.default=v},1126:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=a(9690),i=r(a(33314)),s=r(a(30520));class d extends o.PureComponent{constructor(...e){super(...e),this._renderLabel=()=>{var{labels:e}=this.props;if(e)return e.map(((e,t)=>o.createElement("div",{key:t,className:i.default.labelRow},o.createElement(s.default,{labels:[e],showName:!0}))))}}render(){var{labels:e}=this.props;return e&&(0,l.canDisplayLabel)()?o.createElement("div",{className:i.default.labelContainer},this._renderLabel()):null}}d.displayName="InfoDrawerLabelWell";var c=d;t.default=c},65236:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(32944)),i=r(a(68214)),s=r(a(93257)),d=r(a(3123)),c=r(a(96881)),u=n(a(32597)),p=r(a(38637)),f=a(55814),m=r(a(90370)),h=a(74315);class g extends o.Component{constructor(...e){super(...e),this._onUnarchiveSettingChange=()=>{var e=!this.props.settings.archive.classic;(0,f.setArchiveClassicSetting)(e)}}render(){var e=!this.props.settings.archive.classic;return o.createElement(d.default,null,o.createElement(u.default,{title:p.default.t(233),type:u.DRAWER_HEADER_TYPE.LARGE,onBack:this.props.onClose}),o.createElement(c.default,null,o.createElement("div",{className:i.default.section},o.createElement("div",{"data-a8n":l.default.key("auto-unarchive-setting"),className:i.default.control},o.createElement(s.default,{onChange:this._onUnarchiveSettingChange,checked:e})),o.createElement("div",{"data-a8n":l.default.key("auto-unarchive-setting-text")},p.default.t(252),o.createElement(h.TextDiv,{theme:"muted"},p.default.t(251))))))}}g.CONCERNS={settings:["archive"]},g.displayName="ArchiveSettings";var v=(0,m.default)(g,g.CONCERNS);t.default=v},42579:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var o=n(a(2784)),l=r(a(13277)),i=r(a(11586)),s=r(a(51685)),d=r(a(73018)),c=r(a(38637)),u=r(a(18779)),p=n(a(97025));function f({elementId:e,onClick:t}){return document.queryCommandSupported("copy")?o.createElement(d.default,{a8nText:"li-copy-link",icon:o.createElement(u.default,{name:"copy",className:i.default.icon}),onClick:()=>function(e,t){(0,s.default)(e)?l.default.openToast(o.createElement(p.default,{msg:c.default.t(838),id:(0,p.genId)()})):l.default.openToast(o.createElement(p.default,{msg:c.default.t(837),id:(0,p.genId)()})),null!=t&&t()}(e,t)},c.default.t(512)):null}f.displayName="CopyLinkButton"},73018:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var o=n(a(58527)),l=n(a(72779)),i=r(a(2784)),s=n(a(32944)),d=n(a(70860)),c=a(74315),u=n(a(37766));function p(e){var{children:t,onClick:a,icon:r,className:n,color:p,theme:f}=e,[m,h]=(0,u.default)(a),g=null!=r?i.createElement("div",{className:(0,l.default)(d.default.icon,{[d.default.danger]:"danger"===p,[d.default.success]:"success"===p})},r):null,v=(0,l.default)(d.default.container,n,{[d.default.containerNoIcon]:!r,[d.default.containerListAligned]:"list-aligned"===f}),E="string"==typeof t?t:null;return i.createElement("div",(0,o.default)({},h,{className:v,"data-a8n":s.default.key(e.a8nText),"data-ignore-capture":"any",ref:m,title:E}),g,i.createElement("div",{className:d.default.bodyContainer},i.createElement("div",{className:d.default.body},i.createElement(c.TextSpan,{theme:"title",color:p},t))))}p.displayName="DrawerButton"},70219:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(72779)),l=r(a(2784)),i=n(a(78523)),s=n(a(13277)),d=n(a(51045)),c=n(a(30905)),u=n(a(87958)),p=n(a(38637)),f=a(58868),m=n(a(21830)),h=n(a(29986)),g=n(a(21658)),v=n(a(90370)),E=n(a(18779)),C=n(a(5431)),_=n(a(61671));class S extends l.Component{constructor(...e){super(...e),this.state={style:{visibility:"hidden"}},this.onScroll=e=>{Math.abs(e.deltaY)>3&&this.onClose()},this.onClose=()=>{if(!this.closing){var e;if(this.closing=!0,this.props.getZoomNode((t=>{e=t})),!e)return s.default.closeModalMedia();var t=this._refImage;if(t){this.props.animateBorderRadius&&(t.style.transition="border-radius 500ms cubic-bezier(.1,.82,.25,1)",t.style.borderRadius="50%");var a=(0,m.default)(e,"start"),r=t.getBoundingClientRect(),n=a.getBoundingClientRect(),o=n.top-r.top,l=n.left-r.left,i=a.clientWidth/t.clientWidth;(0,_.default)(t,{translateX:[l,0],translateY:[o,0],scale:[i,1]},{duration:200,easing:[.1,.82,.25,1]}).then((()=>{s.default.closeModalMedia()}))}}},this.onImageLoad=e=>{var t=e.target;this.setState({size:{width:t.naturalWidth,height:t.naturalHeight}},(()=>{this.props.getZoomNode((e=>{var a=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.top-a.top,o={visibility:"hidden",transform:`translateX(${r.left-a.left}px) translateY(${n}px) scale(${e.clientWidth/t.clientWidth})`,transition:"transform 0s",borderRadius:void 0};this.props.animateBorderRadius&&(o.borderRadius="50%"),this.setState({style:o},(()=>{var e={transform:"translateX(0px) translateY(0px) scale(1)",transition:"transform 500ms cubic-bezier(.1,.82,.25,1)"};this.props.animateBorderRadius&&(e={transform:"translateX(0px) translateY(0px) scale(1)",borderRadius:"0%",transition:"transform 500ms cubic-bezier(.1,.82,.25,1),\n                                         border-radius 500ms cubic-bezier(.1,.82,.25,1)"}),this.setState({style:e})}))}))}))},this.setRefImage=e=>{this._refImage=e}}shouldComponentUpdate(e){return!!e.profilePicThumb.imgFull||(this.onClose(),!1)}render(){var e,{contact:t,profilePicThumb:a}=this.props;return a.imgFull&&(e=l.createElement(u.default,{src:a.imgFull,hasPrivacyChecks:!0,onLoad:this.onImageLoad,className:g.default.profileViewerImg})),l.createElement(C.default,{displayName:"PhotoViewer",escapable:!0,requestDismiss:this.onClose},l.createElement("div",{className:(0,o.default)("overlay",g.default.container),onWheel:this.onScroll,onClick:this.onClose},l.createElement("div",{className:g.default.headerContainer},l.createElement("div",{className:g.default.profileThumb},l.createElement(i.default,{image:l.createElement(d.default,{id:t.id,size:40}),theme:"plain",primary:l.createElement(c.default,{text:t.formattedUser})})),l.createElement("div",{className:g.default.mediaPanelTools},l.createElement(f.MenuBar,{key:"media-panel-header",theme:"strong"},l.createElement(f.MenuBarItem,{a8nText:"btn-close",icon:l.createElement(E.default,{name:"x-viewer"}),title:p.default.t(1569),onClick:this.onClose})))),l.createElement("div",{className:g.default.profileContainer,dir:"ltr"},l.createElement("div",{className:g.default.media},l.createElement(h.default,{type:"scaleDown",size:this.state.size},l.createElement("div",{className:g.default.profileViewer,"data-animate-profile-viewer":!0,ref:this.setRefImage,style:this.state.style},e))))))}}S.CONCERNS={contact:["formattedUser","id"],profilePicThumb:["imgFull"]},S.displayName="PhotoViewerModal";var P=(0,v.default)(S,S.CONCERNS);t.default=P},38658:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=n(a(24461)),i=r(a(71147)),s=r(a(49398)),d=a(86690),c=r(a(85185)),{useState:u}=o;var p=(0,c.default)((function(e){var{profilePicThumb:t,size:a}=e,r=!t.canSet()&&!t.canDelete(),[n,c]=u(!1);return o.createElement(i.default,{type:s.default.PROFILE,id:t.id,attachToChat:!1,pending:n,startImage:t.imgFull,readOnly:r,onImageSet:(t,a)=>{var r=e.profilePicThumb;c(!0),(t&&a?(0,d.setProfilePic)(r,t,a):(0,d.deleteProfilePic)(r)).checkpoint(e.rejectOnUnmount()).catchType(l.Unmount,(()=>{})).catchType(l.ActionError,(()=>{__LOG__(3)`ProfileDrawer: failed to set/delete profile image`})).finally((()=>{c(!1)}))},size:a})}));t.default=p},21120:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=n(a(2784)),l=r(a(73018)),i=r(a(38637)),s=r(a(44887)),d=r(a(18779));function c(e){return o.createElement(l.default,{a8nText:"li-share-link",icon:o.createElement(d.default,{name:"forward",className:s.default.icon}),onClick:e.onClick},i.default.t(1269))}c.displayName="SendLinkButton"},87075:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=n(a(2784)),l=r(a(73018)),i=r(a(38637)),s=r(a(67004)),d=r(a(18779));function c(e){return o.createElement(l.default,{a8nText:"li-share-link",icon:o.createElement(d.default,{name:"forward",className:s.default.icon}),onClick:e.onClick},i.default.t(1292))}c.displayName="SendProductButton"},94228:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(23045)),i=r(a(3123)),s=r(a(96881)),d=n(a(32597)),c=r(a(30905)),u=r(a(19058)),p=r(a(54384)),f=n(a(64828)),m=r(a(32523)),h=r(a(19432)),g=r(a(18779)),v=r(a(92915)),E=r(a(66063)),C=r(a(5431)),_=n(a(79953)),S=(e,t)=>{var{defaultText:a,title:r,onSend:n,onBack:S}=e,[P,y]=o.useState(a),T=(0,_.findFirstWebLink)(P),{linkPreview:N,clearLinkPreview:b}=(0,_.default)(T),M=r?o.createElement(c.default,{text:r,direction:"auto",titlify:!0,ellipsify:!0}):null,{title:k,canonicalUrl:O,description:D,thumbnail:I}=N||{},R=N?o.createElement(C.default,{displayName:"ComposeBoxLinkPreview",escapable:!0,requestDismiss:b},o.createElement(m.default,{onOmit:b},o.createElement(p.default,{title:k,compose:!0,canonicalUrl:O,description:D,thumbnailJpeg:I}))):null;return o.createElement(f.default,{type:f.BoxModalType,ref:t},o.createElement(i.default,null,o.createElement(d.default,{type:d.DRAWER_HEADER_TYPE.POPUP,onBack:S},M),o.createElement(s.default,null,o.createElement(u.default,{className:E.default.container},o.createElement("div",{className:E.default.inputContainer},o.createElement(v.default,{a8n:"text-message-modal-text-unput",value:P,maxLength:l.default.MAX_TXT_MSG_SIZE,onChange:e=>{y(e)},supportsEmoji:!0,multiline:!0,spellCheck:!0,showRemaining:!0,focusOnMount:!0,theme:"small"})),R)),o.createElement("div",{className:E.default.btnContainer},o.createElement("div",{className:E.default.btnPosition},o.createElement(h.default,{large:!0,onClick:()=>{P.length&&n(P,N)}},o.createElement(g.default,{name:"send",directional:!0}))))))};S.displayName="TextMessageModal";var P=o.forwardRef(S);t.default=P},65610:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(36171)),i=r(a(66109)),s=r(a(84755)),d=r(a(84340)),c=a(66368),u=a(9690),p=r(a(38637)),f=a(57934),m=r(a(86619)),h=a(36467),g=a(60301),v=r(a(84161)),E=a(55439),C=r(a(27582)),_=r(a(91100)),S=a(47138),P=r(a(18779));class y extends o.Component{constructor(...e){super(...e),this.onProductDetail=e=>{var{onProductDetail:t,entryPoint:a}=this.props;a===v.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE&&(0,f.logProfileProductClick)({product:(0,S.unproxy)(e),catalogSessionId:(0,E.getProductCatalogSessionId)(this.context)}),t(e)}}componentDidMount(){var{entryPoint:e,catalog:t}=this.props;e===v.default.CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PROFILE&&null!=t&&(0,f.logBusinessProfileCatalogView)({catalogOwnerWid:t.id,catalogSessionId:(0,E.getProductCatalogSessionId)(this.context)})}_renderGallery(){var e,t,{catalog:a,filterProductId:r,productsToShow:n,hideIncompleteRows:l,onProductCatalog:i,showProductPlaceholders:s,seeMoreOverlay:d}=this.props,c=[],f=n,v=void 0;if((0,u.canSeeBizProfileV3)()&&(v="largeGallerySpacing"),null!=a?(e=a.productCollection,c=a.productCollection.getProductModels(),l&&c.length>3&&(f=Math.min(n,c.length-c.length%3)),c=(c=c.slice(0,f+1)).filter((e=>e.id.toString()!==r)).map(((e,t)=>{var r,n,l=null===(r=e.getPreviewImage())||void 0===r?void 0:r.mediaData;return l?(d&&t===f-1&&a.productCollection.length>f-1&&(n=p.default.t(1264)),o.createElement(_.default,{key:e.id.toString(),onClick:()=>this.onProductDetail(e),mediaData:l,overlayContent:n,theme:v})):o.createElement(o.Fragment,null)})).slice(0,f)):(e=new C.default).add({id:"_ph"}),!c.length&&!s)return null;for(;s&&c.length<f;)c.push(o.createElement(_.default,{key:`_ph${c.length}`,onClick:i.bind(this,(0,E.getProductCatalogSessionId)(this.context)),mediaData:new m.default({mediaStage:g.MEDIA_DATA_STAGE.PREPARING}),theme:v}));return(0,u.canSeeBizProfileV3)()&&(t="space-between"),o.createElement(h.Gallery,{productMedias:c,mediaCollection:e,justify:t})}_renderCatalogEntryButton(){var{onProductCatalog:e,catalogEntryLabel:t}=this.props;return null==t?null:o.createElement("div",{className:i.default.catalogEntryButton},o.createElement(l.default,{a8nText:"catalog-entry-button",type:"secondary",onClick:e.bind(this,(0,E.getProductCatalogSessionId)(this.context))},t))}render(){var{onProductCatalog:e,title:t,subtitle:a,animation:r,sectionTheme:n}=this.props,l=this._renderCatalogEntryButton(),s=this._renderGallery(),u=a?o.createElement(c.FlexItem,{className:i.default.subtitle},a):null,f=o.createElement(c.FlexRow,{align:"center"},u,o.createElement(c.FlexItem,null,o.createElement(P.default,{className:i.default.chevron,name:"chevron-right-alt",directional:!0})));return o.createElement(d.default,{title:t||p.default.t(1148),titleOnClick:e.bind(this,(0,E.getProductCatalogSessionId)(this.context)),subtitle:f,theme:n,animation:r},s,l)}}t.default=y,y.contextType=s.default,y.defaultProps={productsToShow:6,sectionTheme:"padding",hideIncompleteRows:!1},y.displayName="CatalogDrawerSection"},38024:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(51487)),i=r(a(78523)),s=r(a(13277)),d=r(a(42579)),c=n(a(51045)),u=r(a(3123)),p=r(a(96881)),f=r(a(84755)),m=n(a(32597)),h=r(a(38637)),g=r(a(82516)),v=a(57934),E=r(a(26553)),C=a(55439),_=r(a(19040)),S=r(a(21120)),P=a(4704),y="catalog-link-anchor";class T extends o.Component{constructor(...e){super(...e),this._handleCatalogLinkClick=e=>{e.preventDefault(),this._handleSendCatalogLinkClick()},this._handleSendCatalogLinkClick=()=>{var{catalog:e,onSend:t}=this.props;s.default.openModal(o.createElement(_.default,{catalog:e,onSend:t}),{transition:"modal-flow"}),(0,v.logShareCatalogViaWALinkClick)({catalogOwnerWid:e.id,catalogSessionId:(0,C.getProductCatalogSessionId)(this.context)})},this._handleCopyLinkClick=()=>{var{catalog:e}=this.props;(0,v.logShareCatalogCopyLinkClick)({catalogOwnerWid:e.id,catalogSessionId:(0,C.getProductCatalogSessionId)(this.context)})}}render(){var e,t,{onBack:a,onCancel:r,catalog:n,contact:s,prompt:f,centerDrawer:v}=this.props,C=o.createElement(c.default,{id:s.id,size:82,quality:c.DETAIL_IMAGE_QUALITY.HIGH});return v&&(e="labels",t="center-column"),o.createElement(u.default,{key:"catalog-link-drawer",theme:e},o.createElement(m.default,{a8n:"catalog-link-title",title:h.default.t(408),onBack:a,onCancel:r,type:m.DRAWER_HEADER_TYPE.SMALL}),o.createElement(p.default,{theme:t},o.createElement("div",{className:l.default.prompt},f),o.createElement(i.default,{image:C,primary:o.createElement(E.default,{contact:s,useVerifiedName:!0}),theme:"identity",secondary:o.createElement(g.default,{id:y,href:(0,P.createCatalogLink)(n.id.user),onClick:this._handleCatalogLinkClick,noHandle:!0})}),o.createElement(S.default,{onClick:this._handleSendCatalogLinkClick}),o.createElement(d.default,{elementId:y,onClick:this._handleCopyLinkClick})))}}t.default=T,T.contextType=f.default,T.displayName="CatalogLinkDrawer"},72562:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(1882)),i=r(a(84755)),s=r(a(81407)),d=r(a(77508)),c=r(a(38637)),u=r(a(99369)),p=a(84982),f=a(58868),m=a(55439),h=r(a(18779)),g=a(61864);class v extends o.PureComponent{_getCartIcon(){var{onCartClick:e,cartCount:t,catalogId:a}=this.props;if(e&&a){var r=(0,g.isNumber)(t)&&t>0?t.toString():void 0,n=(0,p.getOnCartClickWithLog)(e,a,(0,m.getProductCatalogSessionId)(this.context));return o.createElement(f.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:o.createElement(l.default,null),text:r,title:c.default.t(355),onClick:n})}return null}render(){var{onSendProduct:e,onReportProduct:t,onProductLinkClick:a}=this.props;return o.createElement(o.Fragment,null,this._getCartIcon(),o.createElement(f.MenuBarItem,{a8nText:"menu-bar-product-link",icon:o.createElement(u.default,null),title:c.default.t(1158),onClick:a}),o.createElement(f.MenuBarItem,{a8nText:"menu-bar-menu",icon:o.createElement(h.default,{name:"menu"}),title:c.default.t(941)},o.createElement(s.default,{type:"dropdown_menu",flipOnRTL:!0,key:"ProductDetailHeader",dirX:"LEFT"},o.createElement(d.default,{a8n:"mi-send menu-item",action:e},c.default.t(1292)),o.createElement(d.default,{a8n:"mi-report menu-item",action:t},c.default.t(1207)))))}}t.default=v,v.contextType=i.default,v.displayName="DetailDrawerMenu"},96313:(e,t,a)=>{"use strict";var r=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorState=function(e,t){if(e instanceof o.Unmount);else if(e instanceof n.ServerStatusCodeError)"not_found"===e.status||404===e.status?t("NOT_FOUND"):(t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch from server`);else{if(!(e instanceof n.WebdDrop))throw t("ERROR"),e;t("ERROR"),__LOG__(3)`parseErrorState:Failed to fetch due to WebdDrop`}};var n=a(33576),o=r(a(24461))},40517:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var o=n(a(72779)),l=r(a(2784)),i=n(a(38637)),s=n(a(63226)),d=r(a(68267)),c=a(74315);function u({fetchState:e}){switch(e){case"NONE":case"SUCCESS":return null;case"PENDING":return l.createElement("div",{className:(0,o.default)(s.default.loadingContainer)},l.createElement(d.default,{size:14,color:d.colorOptions.highlight}),l.createElement(c.TextSpan,{className:(0,o.default)(s.default.text,s.default.loadingText),theme:"small"},i.default.t(1179)));case"NOT_FOUND":case"ERROR":return l.createElement("div",{className:(0,o.default)(s.default.loadingContainer)},l.createElement(c.TextSpan,{className:s.default.text,theme:"small",color:"danger"},"NOT_FOUND"===e?i.default.t(1165):i.default.t(1152)));default:throw new Error(`invalid fetchState ${e}`)}}u.displayName="FetchStateTopBar"},99369:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var o=n(a(2784)),l=r(a(72779)),i=r(a(66594)),s=r(a(18779));function d(e){return o.createElement(s.default,{name:"link",className:(0,l.default)(i.default.linkIcon,{[i.default.inheritColor]:"inherit-color"===e.theme})})}d.displayName="LinkIcon"},82516:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var o=n(a(2784)),l=r(a(89440)),i=a(64812);function s({id:e,href:t,onClick:a,noHandle:r}){return o.createElement("span",{className:l.default.linkContainer},o.createElement(i.SelectableLink,{id:e,href:t,className:l.default.activeLink,selectable:!0,onClick:a,"data-nohandle":r},t))}s.displayName="LinkText"},26891:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.handleProductDelete=function(e,t,a){return(0,u.logDeleteProductClick)(t,1,a),new Promise(((r,n)=>{i.default.openModal(l.createElement(s.default,{title:c.default.t(387),okText:c.default.t(1726),cancelText:c.default.t(1558),onOK:()=>{i.default.closeModal(),function(e,t,a){return(0,p.deleteProducts)([t.id.toString()]).then((()=>((0,u.logDeleteProductSuccess)(t,1,a),e.productCollection.evictImagesFromCache(t.id.toString()),e.productCollection.remove(t.id.toString()),!0))).catchType(d.ServerStatusCodeError,(e=>((0,u.logDeleteProductFailed)(t,1,a,e.statusCode),i.default.openToast(l.createElement(g.default,{msg:c.default.t(388),id:(0,g.genId)("catalog_delete_product_failed")})),!1)))}(e,t,a).then((e=>r(e))).catch((e=>n(e)))},onCancel:()=>{i.default.closeModal(),r(!1)}},l.createElement("div",null,c.default.t(386))))}))},t.handleProductVisibilityChange=function(e,t){var a=e.id.toString(),r=!e.isHidden;r?(0,u.logCatalogProductHideClick)(a,t):(0,u.logCatalogProductShowClick)(a,t);return new Promise(((n,o)=>{var d=e.isHidden?"Show item in your catalog?":"Hide item in your catalog?";i.default.openModal(l.createElement(s.default,{okText:c.default.t(1726),cancelText:c.default.t(1558),onOK:()=>{i.default.closeModal(),function(){return v.apply(this,arguments)}(e).then((()=>{r?(0,u.logCatalogProductHideSuccess)(a,t):(0,u.logCatalogProductShowSuccess)(a,t),n(!0)})).catch((e=>{r?(0,u.logCatalogProductHideFailed)(a,t):(0,u.logCatalogProductShowFailed)(a,t),o(e)}))},onCancel:()=>{i.default.closeModal(),r?(0,u.logCatalogProductHideCancelled)(a,t):(0,u.logCatalogProductShowCancelled)(a,t),n(!1)}},l.createElement("div",null,d)))}))},t.handleCollectionDelete=function(e,t,a){return new Promise(((a,r)=>{i.default.openModal(l.createElement(s.default,{title:c.default.t(378),okText:c.default.t(1726),cancelText:c.default.t(1558),onOK:()=>{i.default.closeModal(),function(e,t){return e.collections.remove(t.id.toString()),(0,h.deleteCollection)(t.id.toString()).then((()=>(e.collections.remove(t.id.toString()),!0))).catchType(d.ServerStatusCodeError,(()=>(i.default.openToast(l.createElement(g.default,{msg:c.default.t(375),id:(0,g.genId)("catalog_delete_product_failed")})),!1)))}(e,t).then((e=>a(e))).catch((e=>r(e)))},onCancel:()=>{i.default.closeModal(),a(!1)}},l.createElement("div",null,c.default.t(376))))}))},t.handleCollectionSave=function(e,t,a,r,n){return(t?(0,h.editCollection)(t.id.toString()||"",a,!1,r.map((e=>e.id.toString())),n.map((e=>e.id.toString())),"").then((e=>(t.name=a,t.reviewStatus=e.reviewStatus,t.productCollection.reset(),t.productCollection.add(r),!0))):(0,h.createCollection)(a,r.map((e=>e.id.toString())),"").then((t=>{var n=new m.default;return n.id=t.id,n.reviewStatus=t.reviewStatus,n.isHidden=!1,n.name=a,n.totalItemsCount=r.length,n.productCollection.add(r,{merge:!0}),e.collections.add(n),!0}))).catch((e=>{var t=c.default.t(385);return"not-acceptable"===e.text&&"products"===e.fieldName&&"duplicate"===e.fieldReason&&(t=c.default.t(384)),i.default.openToast(l.createElement(g.default,{msg:t,id:(0,g.genId)("catalog_save_collection_failed")})),!1}))};var o=n(a(52954)),l=r(a(2784)),i=n(a(13277)),s=n(a(76176)),d=a(33576),c=n(a(38637)),u=a(57934),p=a(42643),f=a(57097),m=n(a(79077)),h=a(30217),g=r(a(97025));function v(){return(v=(0,o.default)((function*(e){yield(0,f.productVisibilitySet)([{productId:e.id.toString(),isHidden:!e.isHidden}]),e.isHidden=!e.isHidden}))).apply(this,arguments)}},2359:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=n(a(72779)),l=r(a(2784)),i=n(a(4472)),s=n(a(78523)),d=n(a(38637));function c(e){var{onClick:t}=e,a=(0,o.default)(i.default.addItemButton,{[i.default.themeDefault]:"default"===e.theme,[i.default.themeInList]:"in-list"===e.theme});return l.createElement(s.default,{theme:"add-item",image:l.createElement("div",{className:i.default.addIcon}),customImage:!0,primary:e.title||d.default.t(371),className:a,onClick:t,idle:e.idle})}c.displayName="AddItemCta"},25427:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=a(26891),i=r(a(13277)),s=r(a(23045)),d=r(a(84755)),c=r(a(85530)),u=r(a(36893)),p=a(57934),f=a(55439),m=r(a(55794)),h=r(a(90370)),g=a(47138);class v extends o.Component{constructor(...e){super(...e),this.state={openedProductId:void 0},this.onProductDetail=(e,t)=>{var{onProductDetail:a}=this.props;return(0,p.logCatalogListDetailClick)({product:(0,g.unproxy)(e),catalogSessionId:t}),this.setState({openedProductId:e.id.toString()}),a(e)},this.onProductShare=e=>{var{onProductShare:t}=this.props;t&&t(e)},this.onProductDelete=(e,t)=>{var{catalog:a}=this.props;(0,l.handleProductDelete)(a,e,t).then((()=>{e.id===this.state.openedProductId&&(i.default.closeDrawerMid(),this.setState({openedProductId:void 0}))}))},this.onProductHideShow=(e,t)=>{(0,l.handleProductVisibilityChange)(e,t)},this.renderItem=e=>{var{product:t}=e,{onCartOpen:a,shareLinks:r}=this.props;return o.createElement(d.default.Consumer,null,(e=>{var n=(0,f.getProductCatalogSessionId)(e);return o.createElement(m.default,{product:t,onCartOpen:a,onClick:()=>this.onProductDetail(t,n),onProductShare:r?this.onProductShare:null,onProductDelete:e=>this.onProductDelete(e,n),onProductHideShow:e=>this.onProductHideShow(e,n),canManageCatalog:this.props.canManageCatalog})}))}}getData(){var{catalog:e,onCartOpen:t}=this.props,a=void 0!==t;return e.productCollection.getProductModels(this.props.canManageCatalog).map((e=>({itemKey:`${e.id.toString()}_${a.toString()}`,product:e})))}render(){var{catalog:e}=this.props;return e.productCollection&&e.productCollection.getProductModels(this.props.canManageCatalog).length?o.createElement(u.default,{flatListControllers:[this.props.flatListController]},o.createElement(c.default,{flatListController:this.props.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:this.getData(),renderItem:this.renderItem,defaultItemHeight:s.default.PRODUCT_LIST_ITEM_HEIGHT,itemEnterAnimationsEnabled:!0})):null}}v.CONCERNS={catalog:["productCollection","afterCursor","id","index"]},v.displayName="ProductCatalogList";var E=(0,h.default)(v,v.CONCERNS);t.default=E},85387:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(72779)),l=r(a(2784)),i=n(a(65017)),s=a(64001),d=a(79930),c=n(a(59544)),u=n(a(89962)),p=n(a(65610)),f=n(a(13277)),m=n(a(72562)),h=n(a(3123)),g=n(a(96881)),v=n(a(84755)),E=r(a(32597)),C=a(33576),_=r(a(24461)),S=n(a(38637)),P=n(a(4739)),y=a(57934),T=a(42643),N=a(55439),b=a(27582),M=n(a(63226)),k=n(a(7075)),O=n(a(21311)),D=a(13499),I=n(a(85185)),R=n(a(85378)),w=r(a(68267)),A=n(a(90370)),L=a(47138),x=a(74315);class F extends l.Component{constructor(e){super(e),this.onCartClick=()=>{var{product:e,onCartClick:t}=this.props;t&&t(e.catalogWid.toString())},this._onReportProduct=()=>{var{product:e}=this.props;f.default.openModal(l.createElement(R.default,{product:e,sessionId:(0,N.getProductCatalogSessionId)(this.context)}))},this.onProductLinkClick=()=>{var{product:e}=this.props;this.props.onProductLinkClick(e)},this.onSendChat=()=>{var{product:e}=this.props,t=u.default.get(e.catalogWid);(0,T.sendProductToChat)(e,t,(0,N.getProductCatalogSessionId)(this.context)),(0,y.logProductMessageBusinessClick)(e,(0,N.getProductCatalogSessionId)(this.context))},this._onSendProduct=()=>{var{product:e}=this.props,{catalogWid:t}=e,a=u.default.get(t);if(a){var r=a.productCollection.get(e.id),n=r?(0,L.unproxy)(r):(0,L.unproxy)(e);f.default.attachProduct({product:n})}},this.onBack=()=>{var{onBack:e}=this.props;if(e)return e()},this.onProductCatalog=()=>{var{onProductCatalog:e,product:t}=this.props;e&&e(t.catalogWid,(0,N.getProductCatalogSessionId)(this.context))},this.onProductDetail=e=>{var{onProductDetail:t}=this.props;if(t)return t(e)},this.isRejected=()=>{var{reviewStatus:e}=this.props.product;return e===b.PRODUCT_REVIEW_STATUS.REJECTED},this._isAvailable=()=>{var{productFetchState:e}=this.state;return"ERROR"!==e&&"NOT_FOUND"!==e&&!this.isRejected()};var t=e.product.fetchedFromServer?"SUCCESS":"PENDING",a=null,r="NONE";e.refreshCarousel&&((a=u.default.get(e.product.catalogWid))&&a.productCollection&&a.fetchedFromServer?r="SUCCESS":(a=null,r="PENDING"));var n=c.default.findCart(this.props.product.catalogWid.toString());this.state={businessProfile:null,cartEnabled:!1,productCatalog:a,productFetchState:t,productCatalogFetchState:r,cart:n}}componentDidMount(){var{product:e,listeners:t}=this.props,a=this.state.cart,r=e.catalogWid,n=e.id.toString();r&&n&&(this._fetchData(),"PENDING"===this.state.productCatalogFetchState&&this._fetchProductCatalog(),t.add(a,"change:cartItemCollection",(()=>{this.forceUpdate()})),(0,d.checkCartEnabled)(r).then((e=>{this.setState({cartEnabled:e})})),(0,y.logProductDetailView)({product:(0,L.unproxy)(e),catalogSessionId:(0,N.getProductCatalogSessionId)(this.context)}))}_fetchData(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid,r=e.id.toString(),n=u.default.findProduct({catalogWid:a,productId:r,productMsgMediaData:(0,L.unproxy)(e).productMsgMediaData}),o=i.default.find(a);return Promise.all([o,n]).checkpoint(t()).then((([e])=>{this.setState({productFetchState:"SUCCESS",businessProfile:e})})).catchType(C.E404,(()=>{this.setState({productFetchState:"NOT_FOUND"})})).catchType(_.Unmount,(()=>{})).catchType(C.ServerStatusCodeError,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product from server`})).catchType(C.WebdDrop,(()=>{this.setState({productFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product`}))}_fetchProductCatalog(){var{product:e,rejectOnUnmount:t}=this.props,a=e.catalogWid;u.default.findCarouselCatalog(a).checkpoint(t()).then((e=>{var t=Array.isArray(e)?e[0]:e;this.setState({productCatalog:t||null,productCatalogFetchState:t?"SUCCESS":"NONE"})})).catchType(_.Unmount,(()=>{})).catchType(C.ServerStatusCodeError,(e=>{"not_found"===e.status||404===e.status?this.setState({productCatalog:null,productCatalogFetchState:"NOT_FOUND"}):(this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog from server`)})).catchType(C.WebdDrop,(()=>{this.setState({productCatalog:null,productCatalogFetchState:"ERROR"}),__LOG__(3)`Failed to fetch product catalog`}))}componentWillUnmount(){var{product:e}=this.props,t=e.catalogWid,a=e.id.toString();if(t&&a){var r=u.default.get(t),n=r&&r.msgProductCollection.get(a);n&&n.fetchedFromServer&&r&&r.msgProductCollection.remove(n)}}_renderTopBar(){var e,{productFetchState:t,productCatalogFetchState:a}=this.state,r=this._isAvailable();e="ERROR"===t?l.createElement(x.TextSpan,{className:M.default.text,theme:"small",color:"danger"},S.default.t(1152)):r?[l.createElement(w.default,{size:14,color:w.colorOptions.highlight,key:"DetailDrawer-loadingBar-spinner"}),l.createElement(x.TextSpan,{className:(0,o.default)(M.default.text,M.default.loadingText),theme:"small",key:"DetailDrawer-loadingBar-msg"},S.default.t(1179))]:l.createElement(x.TextSpan,{className:M.default.text,theme:"small",color:"danger"},S.default.t(1165));var n="PENDING"===t||"PENDING"===a||!r;return l.createElement("div",{className:(0,o.default)({[M.default.loadingContainer]:n,[M.default.shiftUp]:!n})},e)}_renderDrawerMenu(){if(!this._isAvailable())return null;var e=this.state.cartEnabled?this.onCartClick:void 0;return l.createElement(m.default,{onSendProduct:this._onSendProduct,onReportProduct:this._onReportProduct,onProductLinkClick:this.onProductLinkClick,onCartClick:e,cartCount:this.state.cart.itemCount,catalogId:this.props.product.catalogWid.toString()})}_renderDrawerHeader(){return l.createElement(E.default,{a8n:"drawer-title-profile",title:S.default.t(1156),onBack:this.onBack,type:E.DRAWER_HEADER_TYPE.SMALL,menu:this._renderDrawerMenu()})}render(){var{product:e}=this.props,{productCatalog:t,productFetchState:a}=this.state,r=this._isAvailable(),n=(0,s.hasCatalog)(this.state.businessProfile);return l.createElement(h.default,{onDrop:this.onBack,theme:"striped",key:"product-details-drawer"},this._renderDrawerHeader(),l.createElement(g.default,null,l.createElement("div",{className:M.default.body},this._renderTopBar(),l.createElement(O.default,{product:e,isAvailable:r,fetching:"PENDING"===a}),e.availability===D.ProductAvailability.OUT_OF_STOCK?l.createElement("div",{className:M.default.availabilityBanner},S.default.t(1155)):null,l.createElement(k.default,{product:e,onSendChat:this.onSendChat,isAvailable:r}),n&&t?l.createElement(p.default,{catalog:t,onProductCatalog:this.onProductCatalog,onProductDetail:this.onProductDetail,filterProductId:e.id.toString(),title:S.default.t(1149),animation:!1}):null)))}}F.CONCERNS={product:["id","catalogWid","productImageCollection","fetchedFromServer","name","availability","reviewStatus"]},F.contextType=v.default,F.displayName="ProductDetails";var U=(0,I.default)((0,P.default)((0,A.default)(F,F.CONCERNS)));t.default=U},7075:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(72779)),l=r(a(2784)),i=n(a(28185)),s=n(a(62128)),d=n(a(36171)),c=a(79930),u=n(a(23045)),p=n(a(84755)),f=n(a(84340)),m=n(a(30905)),h=a(4170),g=a(66207),v=n(a(38637)),E=r(a(63428)),C=a(57934),_=a(55439),S=a(27582),P=n(a(6681)),y=n(a(22935)),T=a(13499),N=n(a(90370)),b=a(47138),M=a(74315);class k extends l.Component{constructor(e){super(e),this.onAddToCart=e=>{var{product:t}=this.props;(0,i.default)(t,(0,_.getProductCatalogSessionId)(this.context)),e.stopPropagation()},this.onReadMore=()=>{this.setState({isDescExpanded:!0})},this._onClickUrl=(e,t)=>{e.stopPropagation();var{product:a}=this.props;(0,C.logDetailLinkClick)({product:(0,b.unproxy)(a),catalogSessionId:(0,_.getProductCatalogSessionId)(this.context)});var r=t&&E.findLink(t);r&&(0,h.openExternalLink)(r.url)},this.state={isDescExpanded:!1,cartEnabled:!1}}componentDidMount(){(0,c.checkCartEnabled)(this.props.product.catalogWid).then((e=>{this.setState({cartEnabled:e})}))}_renderMessageBusinessButton(){var{onSendChat:e,product:t,isAvailable:a}=this.props;if(!e||!t.fetchedFromServer||!a||t.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var r=v.default.t(1160);return l.createElement("div",{className:P.default.buttonContainer,title:r},l.createElement(d.default,{className:P.default.button,onClick:e,type:"secondary"},r))}_renderAddToCartButton(){var{product:e,isAvailable:t}=this.props;if(!this.state.cartEnabled||!e.fetchedFromServer||!t||e.reviewStatus!==S.PRODUCT_REVIEW_STATUS.APPROVED)return null;var a=v.default.t(1146),r=e.availability===T.ProductAvailability.OUT_OF_STOCK;return l.createElement("div",{className:P.default.buttonContainer,title:a},l.createElement(d.default,{className:(0,o.default)(P.default.button,P.default.addToCartButton),onClick:this.onAddToCart,type:"secondary",disabled:r},l.createElement("span",{className:P.default.addToCartContainer},l.createElement(s.default,{className:(0,o.default)(P.default.addToCartIcon,{[P.default.addToCartIconDisabled]:r})}),a)))}_renderLink(e){var{product:t,isAvailable:a}=this.props;if(!t.fetchedFromServer||!e||!a)return null;var r=g.Configuration.TrustedGroupDesc({links:E.findLinks(e)});return l.createElement("div",{className:P.default.descBlock},l.createElement(m.default,{selectable:!0,formatters:r,text:e,onClick:t=>this._onClickUrl(t,e)}))}_renderDesc(){var{product:e}=this.props,{isDescExpanded:t}=this.state;if(!e.description&&!e.url&&!e.retailerId)return null;var a,r=!(!e||!e.description)&&e.description.length>u.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH;return e.description&&(a=l.createElement("div",{className:P.default.descBlock},l.createElement(m.default,{selectable:!0,multiline:!0,text:e.description,textLimit:t?1/0:u.default.GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH}),r&&!t?l.createElement("span",{className:P.default.more,role:"button",onClick:this.onReadMore},` ${v.default.t(1188)}`):null)),l.createElement(M.TextDiv,{theme:"plain",className:P.default.description},a,this._renderLink(e.url),e.retailerId?l.createElement("div",{className:P.default.descBlock},l.createElement(m.default,{text:e.retailerId,selectable:!0,direction:"inherit"})):null)}render(){var{product:e}=this.props;return l.createElement(f.default,{theme:"padding-product",animation:!1},l.createElement(M.TextDiv,{theme:"title",className:P.default.name},l.createElement(m.default,{text:e.name,selectable:!0})),null!=e.priceAmount1000?l.createElement(M.TextDiv,{className:P.default.price,color:"dark",theme:"plain"},l.createElement(y.default,{product:e,selectable:!0,direction:"inherit"})):null,this._renderDesc(),this._renderMessageBusinessButton(),this._renderAddToCartButton())}}k.contextType=p.default,k.CONCERNS={product:["name","url","description","availability","currency","priceAmount1000","salePriceAmount1000","salePriceStartDate","salePriceEndDate","fetchedFromServer","retailerId","catalogWid","productImageCollection","imageHash","reviewStatus","imageCdnUrl","id"]},k.displayName="ProductDetailsInfo";var O=(0,N.default)(k,k.CONCERNS);t.default=O},3956:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductDetailsForDeepLink=void 0;var o=n(a(2784)),l=r(a(89962)),i=r(a(3123)),s=r(a(96881)),d=n(a(32597)),c=a(96313),u=r(a(40517)),p=r(a(19172)),f=r(a(38637)),m=r(a(21830)),h=r(a(85387)),g=r(a(85185)),v=a(25054);class E extends o.PureComponent{constructor(e){super(e),this.state={product:null,productFetchState:"NONE"};var{productId:t,businessOwnerJid:a}=this.props.productInfo,r=(0,p.default)({productId:t,businessOwnerJid:a});this.state=r?{product:r,productFetchState:"NONE"}:{product:r,productFetchState:"PENDING"}}componentDidMount(){this.state.product||this._fetchProduct()}_fetchProduct(){var{productId:e,businessOwnerJid:t}=this.props.productInfo,a=(0,v.createWid)(t);l.default.findProduct({catalogWid:a,productId:e}).checkpoint(this.props.rejectOnUnmount()).then((()=>{var t=l.default.get(a),r=(0,m.default)(t,"catalog").productCollection.get(e);this.setState({product:r,productFetchState:"SUCCESS"})})).catch((e=>{(0,c.parseErrorState)(e,(e=>this.setState({productFetchState:e})))}))}render(){return this.state.product?o.createElement(h.default,{product:this.state.product,onEnd:this.props.onEnd,onBack:this.props.onBack,onProductDetail:this.props.onProductDetail,onProductCatalog:this.props.onProductCatalog,refreshCarousel:!0,onProductLinkClick:this.props.onProductLinkClick,onCartClick:this.props.onCartClick}):o.createElement(i.default,{onDrop:this.props.onBack,key:"product-details-drawer"},o.createElement(d.default,{a8n:"drawer-title-profile",title:f.default.t(1156),onBack:this.props.onBack,type:d.DRAWER_HEADER_TYPE.SMALL}),o.createElement(s.default,null,o.createElement(u.default,{fetchState:this.state.productFetchState})))}}t.ProductDetailsForDeepLink=E,E.displayName="ProductDetailsForDeepLink";var C=(0,g.default)(E);t.default=C},13692:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(72779)),l=r(a(2784)),i=n(a(78523)),s=n(a(13277)),d=n(a(42579)),c=n(a(3123)),u=n(a(96881)),p=n(a(84755)),f=r(a(32597)),m=n(a(30905)),h=n(a(38637)),g=n(a(82516)),v=a(57934),E=a(55439),C=n(a(44209)),_=r(a(91100)),S=n(a(21120)),P=n(a(87075)),y=n(a(16882)),T=a(4704),N=a(47138),b="product-link-anchor";function M(e){var t=e.productImageCollection.head();return t?l.createElement(_.default,{className:(0,o.default)(C.default.productImage,C.default.productImageContainer),mediaData:t.mediaData}):l.createElement(_.ProductThumbPlaceholder,{className:(0,o.default)(C.default.productThumb,C.default.productThumbContainer)})}class k extends l.Component{constructor(...e){super(...e),this._handleProductLinkClick=e=>{e.preventDefault(),this._handleSendProductLinkClick()},this._handleSendProductLinkClick=()=>{var{product:e,onSend:t}=this.props;s.default.openModal(l.createElement(y.default,{product:e,onSend:t}),{transition:"modal-flow"}),(0,v.logShareProductViaWALinkClick)({product:e,catalogSessionId:(0,E.getProductCatalogSessionId)(this.context)})},this._handleCopyLinkClick=()=>{var{product:e}=this.props;(0,v.logShareProductCopyLinkClick)({product:e,catalogSessionId:(0,E.getProductCatalogSessionId)(this.context)})},this._handleSendProduct=()=>{var{product:e,onSend:t}=this.props;s.default.attachProduct({product:(0,N.unproxy)(e),onSend:t})}}render(){var e,t,a,{onBack:r,onCancel:n,product:o,prompt:s,centerDrawer:p,sendProductMsg:v}=this.props,E=(0,T.createProductLink)(o.catalogWid.user,o.id.toString());return p&&(e="labels",t="center-column"),a=null!=v?l.createElement(P.default,{onClick:this._handleSendProduct}):l.createElement(S.default,{onClick:this._handleSendProductLinkClick}),l.createElement(c.default,{key:"product-link-drawer",theme:e},l.createElement(f.default,{a8n:"product-link-title",title:h.default.t(1158),onBack:r,onCancel:n,type:f.DRAWER_HEADER_TYPE.SMALL}),l.createElement(u.default,{theme:t},l.createElement("div",{className:C.default.prompt},s),l.createElement(i.default,{image:M(o),primary:l.createElement(m.default,{text:o.name,direction:"auto"}),theme:"identity",secondary:l.createElement(g.default,{id:b,href:E,onClick:this._handleProductLinkClick,noHandle:!0})}),a,l.createElement(d.default,{elementId:b,onClick:this._handleCopyLinkClick})))}}t.default=k,k.contextType=p.default,k.displayName="ProductLinkDrawer"},82773:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductListDrawer=void 0;var o=n(a(12436)),l=n(a(54073)),i=r(a(2784)),s=n(a(2359)),d=a(79930),c=n(a(59544)),u=n(a(1882)),p=n(a(89962)),f=n(a(23045)),m=n(a(3123)),h=n(a(96881)),g=n(a(84755)),v=r(a(32597)),E=r(a(24461)),C=a(96313),_=n(a(40517)),S=n(a(14076)),P=n(a(13663)),y=n(a(38637)),T=n(a(99369)),N=n(a(4739)),b=a(57934),M=a(84982),k=a(58868),O=a(55439),D=n(a(25427)),I=n(a(60345)),R=n(a(65013)),w=n(a(85185)),A=n(a(90370)),L=a(61864);class x extends i.Component{constructor(e){super(e),this._catalogFlatListController=new S.default,this._handleScroll=e=>{this.state.loadingMore||e.scrollTop+f.default.SCROLL_FUDGE>e.scrollHeight-e.clientHeight&&this._loadMoreProduct()},this.handleScroll=(0,o.default)(this._handleScroll,100),this._loadMoreProduct=()=>{var{catalogId:e}=this.props,{stopLoading:t,loadedProducts:a}=this.state;if(!t){var r=p.default.assertGet(e);if(r.afterCursor){var n=r.productCollection.getProductModels().length;this.setState({loadingMore:!0,loadedProducts:n}),p.default.update(e).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({loadingMore:!1}),(Array.isArray(e)?e[0]:e).productCollection.getProductModels().length===a&&this.setState({stopLoading:!0}),n*f.default.PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&this._loadMoreProduct()})).catchType(E.Unmount,(()=>{})).catch((()=>{this.setState({loadingMore:!1,stopLoading:!0})}))}}},this.onScroll=e=>{this.handleScroll(e.currentTarget),this.props.setScrollOffset&&this.props.setScrollOffset(e.currentTarget.scrollTop)},this._onCartChange=()=>{var e=this.state.cart.itemCount;this.state.cartCount!==e&&this.setState({cartCount:e})},this._onCartClick=()=>{var{contact:e,onCartClick:t}=this.props;t&&t(e.id.toString())},this._onCatalogLinkClick=()=>{var{catalog:e}=this.state;if(e){var{onCatalogLinkClick:t,contact:a,catalogId:r}=this.props;t(e,a),(0,b.logCatalogShareLinkClick)({catalogOwnerWid:r,catalogSessionId:(0,O.getProductCatalogSessionId)(this.context)})}};var t=p.default.get(this.props.catalogId),a=c.default.findCart(this.props.contact.id.toString());this.state={loadingMore:!1,loadedProducts:0,stopLoading:!1,cartEnabled:!1,catalog:t,cart:a,cartCount:a.itemCount,catalogFetchState:t?"SUCCESS":"NONE"}}componentDidMount(){var{catalogId:e,listeners:t}=this.props;t.add(this.state.cart,"all",this._onCartChange),(0,b.logCatalogListView)({catalogOwnerWid:e,catalogSessionId:(0,O.getProductCatalogSessionId)(this.context)}),this.state.catalog?(this._loadMoreProduct(),this._watchProductCollection()):this._findCatalog(),(0,d.checkCartEnabled)(e).then((e=>{this.setState({cartEnabled:e})}))}_findCatalog(){return p.default.find(this.props.catalogId).checkpoint(this.props.rejectOnUnmount()).then((e=>{this.setState({catalog:e,catalogFetchState:"SUCCESS"}),this._loadMoreProduct(),this._watchProductCollection()})).catch((e=>{(0,C.parseErrorState)(e,(e=>this.setState({catalogFetchState:e})))}))}_watchProductCollection(){var{catalog:e}=this.state;this.props.autoUpdate&&null!=e&&(e.productCollection.on("add",(0,l.default)((()=>this.forceUpdate()),100)),e.productCollection.on("remove",(0,l.default)((()=>this.forceUpdate()),100)))}_getDrawerContent(){var e,{catalog:t,cartEnabled:a}=this.state,{contact:r,businessProfile:n,canManageCatalog:o,onAddProduct:l,onCartClick:d}=this.props,c=a&&d?this._onCartClick:void 0;return t?(o&&l&&(e=i.createElement(s.default,{onClick:()=>l(),theme:"in-list"})),i.createElement(i.Fragment,null,n&&i.createElement("div",{className:I.default.header},i.createElement(R.default,{profilePicThumb:r.getProfilePicThumb(),contact:r,businessProfile:n})),i.createElement("div",{className:I.default.list},e,i.createElement(D.default,{onCartOpen:c,onProductDetail:this.props.onProductDetail,flatListController:this._catalogFlatListController,catalog:t,canManageCatalog:this.props.canManageCatalog,shareLinks:this.props.canManageCatalog,onProductShare:this.props.onProductShare}),this.state.loadingMore&&i.createElement(P.default,null)))):i.createElement(_.default,{fetchState:this.state.catalogFetchState})}_getCartIcon(){var{onCartClick:e,headerType:t,catalogId:a}=this.props;if(this.state.cartEnabled&&e){var r=this.state.cartCount,n=(0,L.isNumber)(r)&&r>0?r.toString():void 0,o=(0,M.getOnCartClickWithLog)(this._onCartClick,a.toString(),(0,O.getProductCatalogSessionId)(this.context));return i.createElement(k.MenuBarItem,{a8nText:"menu-bar-cart-link",icon:i.createElement(u.default,{theme:t===v.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),text:n,title:y.default.t(355),onClick:o})}return null}render(){return i.createElement(m.default,{theme:"products",onDrop:this.props.onBack},i.createElement(v.default,{title:y.default.t(1153),type:this.props.headerType||v.DRAWER_HEADER_TYPE.SMALL,onBack:this.props.onBack,menu:i.createElement(i.Fragment,null,this._getCartIcon(),i.createElement(k.MenuBarItem,{a8nText:"menu-bar-catalog-link",icon:i.createElement(T.default,{theme:this.props.headerType===v.DRAWER_HEADER_TYPE.LARGE?"inherit-color":null}),title:y.default.t(408),onClick:this._onCatalogLinkClick}))}),i.createElement(h.default,{onScroll:this.onScroll,flatListControllers:[this._catalogFlatListController],scrollOffset:this.props.scrollOffset},this._getDrawerContent()))}}t.ProductListDrawer=x,x.CONCERNS={contact:["id"]},x.contextType=g.default,x.displayName="ProductListDrawer";var F=(0,w.default)((0,N.default)((0,A.default)(x,x.CONCERNS)));t.default=F},65013:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=a(51045),i=r(a(30905)),s=r(a(26553)),d=r(a(3220)),c=r(a(90370)),u=a(74315);class p extends o.Component{_renderDescription(){var{businessProfile:e}=this.props;return e&&e.description?o.createElement("div",{className:d.default.description},o.createElement(i.default,{text:e.description,direction:"auto",selectable:!0,titlify:!0})):null}_renderPicture(){var{profilePicThumb:e,contact:t}=this.props;if(!e)return null;var a=(0,l.getDefaultIcon)(t.id);return o.createElement("div",{className:d.default.photo},o.createElement(l.DetailImageCommon,{profilePicThumb:e,loader:!0,defaultIcon:a,profilePicThumbImg:e.imgFull,spinnerClassName:d.default.spinner,imgClassName:d.default.img,theme:"business"}))}render(){var{contact:e}=this.props;return o.createElement("div",{className:d.default.header},this._renderPicture(),o.createElement("div",{className:d.default.text},o.createElement(u.TextDiv,{className:d.default.name,theme:"large"},o.createElement(s.default,{contact:e,selectable:!0,useVerifiedName:!0})),this._renderDescription()))}}p.CONCERNS={profilePicThumb:["imgFull"],contact:["id","isMe"],businessProfile:["description"]},p.displayName="ProductListDrawerHeader";var f=(0,c.default)(p,p.CONCERNS);t.default=f},21311:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(13277)),i=r(a(84755)),s=r(a(17074)),d=a(57934),c=a(55439),u=r(a(57767)),p=r(a(90370)),f=a(47138);class m extends o.Component{constructor(...e){super(...e),this.onClick=(e,t)=>{var{product:a}=this.props;(0,d.logDetailImageClick)({product:(0,f.unproxy)(a),catalogSessionId:(0,c.getProductCatalogSessionId)(this.context)});var r={activeProductImage:t,productImageCollection:a.productImageCollection,getZoomNode:()=>e,product:a};l.default.productImageViewerModal(r,(0,c.getProductCatalogSessionId)(this.context))}}render(){var{product:e,isAvailable:t,fetching:a}=this.props,r=e.productImageCollection.toArray();return o.createElement("div",{className:u.default.imageCarouselContainer},o.createElement(s.default,{images:r,fetching:a,onClick:t?this.onClick:null,renderFallback:!t,fallbackMediaData:e.productMsgMediaData}))}}m.contextType=i.default,m.CONCERNS={product:["productImageCollection","productMsgMediaData","catalogWid","imageCdnUrl"]},m.displayName="ProductTile";var h=(0,p.default)(m,m.CONCERNS);t.default=h},80578:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=r(a(36171)),i=r(a(19058)),s=r(a(38637)),d=r(a(64828)),c=r(a(46873));class u extends o.Component{constructor(...e){super(...e),this.onCancel=()=>{var{onPopupCancel:e}=this.props;e()},this.onReport=()=>{this.props.onReport()},this.onTellUsMore=()=>{this.props.onTellUsMore()}}render(){var e=s.default.t(1211),t=o.createElement("div",{key:"ReportProductChoicePopup-desc"},s.default.t(1209)),a=o.createElement(l.default,{a8nText:"popup-controls-more",type:"secondary",onClick:this.onTellUsMore,key:"ReportProductChoicePopup-moreBtn"},s.default.t(1212)),r=o.createElement(l.default,{a8nText:"popup-controls-report",type:"secondary",onClick:this.onReport,key:"ReportProductChoicePopup-reportBtn"},s.default.t(1208)),n=o.createElement(l.default,{type:"secondary",onClick:this.onCancel,key:0},s.default.t(1558)),u={escape:this.onCancel},p=o.createElement("div",{className:c.default.buttons},o.createElement("div",{className:c.default.button},a),o.createElement("div",{className:c.default.button},r),o.createElement("div",{className:c.default.button},n));return o.createElement(i.default,{handlers:u},o.createElement(d.default,{title:e,actions:p,children:t}))}}t.default=u,u.displayName="ReportProductChoicePopup"},85378:(e,t,a)=>{"use strict";var r=a(14859),n=a(93291);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(2784)),l=a(8507),i=r(a(13277)),s=r(a(94751)),d=r(a(38637)),c=a(57934),u=a(42643),p=r(a(80578)),f=r(a(85466)),m=a(47138);class h extends s.default{constructor(...e){super(...e),this._submitReason=e=>{var{product:t,sessionId:a}=this.props;return(0,c.logReportProduct)({product:(0,m.unproxy)(t),catalogSessionId:a}),(0,u.reportProduct)(t.catalogWid,t.id.toString(),e)},this.onDelete=()=>{this.end()},this.onReport=e=>{this._onShowSubmittedToast(e)},this.onTellUsMore=()=>{this.push(o.createElement(f.default,{onTellUsMoreSubmit:this.onReport,onCancel:this.onCancel}),"none")},this.onPopupCancel=()=>{this.end()},this.onCancel=()=>{this.end()},this._onReportSubmitted=()=>{this.end()},this._onShowSubmittedToast=(e,t=(0,l.genId)())=>{var{product:a,sessionId:r}=this.props,n=this._submitReason(e),s=new l.ActionType(d.default.t(1176)),u=n.then((()=>((0,c.logReportProductSuccess)({product:(0,m.unproxy)(a),catalogSessionId:r}),new l.ActionType(`${d.default.t(1175)}. ${d.default.t(1210)}`)))).catch((()=>((0,c.logReportProductFailure)({product:(0,m.unproxy)(a),catalogSessionId:r}),__LOG__(3)`error submitting product report`,new l.ActionType(d.default.t(1174),{actionText:d.default.t(1220),actionHandler:()=>this._onShowSubmittedToast(e,t)}))));return i.default.openToast(o.createElement(l.ActionToast,{id:t,initialAction:s,pendingAction:u})),this._onReportSubmitted(),n}}componentDidMount(){this.push(o.createElement(p.default,{onTellUsMore:this.onTellUsMore,onReport:this.onReport,onPopupCancel:this.onPopupCancel,onCancel:this.onCancel}))}}t.default=h},85466:(e,t,a)=>{"use strict";var r=a(93291),n=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(72779)),l=r(a(2784)),i=n(a(36171)),s=n(a(13277)),d=n(a(19058)),c=n(a(38637)),u=n(a(2739)),p=n(a(64828)),f=n(a(9320)),m=r(a(97025)),h=["NO_MATCH","SPAM","ILLEGAL","SCAM","KNOCKOFF","OTHER"];class g extends l.Component{constructor(...e){super(...e),this.state={reason:null},this.onCancel=()=>{var{onCancel:e}=this.props;e&&e()},this._onSubmit=()=>{if(!this.state.reason)return this._noSelectionToast();this.props.onTellUsMoreSubmit(this.state.reason)},this._onReasonChange=e=>{e.target&&e.target.value&&this.setState({reason:e.target.value})}}_noSelectionToast(){s.default.openToast(l.createElement(m.default,{msg:c.default.t(1177),id:(0,m.genId)()}))}_renderRadioOptions(){var{reason:e}=this.state;return h.map((t=>l.createElement("li",{key:`ReportProductReasonPopup-${t}-option`},l.createElement("label",{className:f.default.label},l.createElement("input",{type:"radio",name:t,value:t,onChange:this._onReasonChange,className:f.default.input,checked:e===t}),l.createElement(v,{reason:t})))))}render(){var e=c.default.t(1170),t=l.createElement("div",{className:(0,o.default)(f.default.section)},l.createElement("ul",{className:f.default.reasonList},this._renderRadioOptions())),a=l.createElement(i.default,{a8nText:"popup-controls-submit",type:"primary",onClick:this._onSubmit,key:"ReportProductReasonPopup-submitButton",disabled:!this.state.reason},c.default.t(1173)),r=l.createElement(i.default,{type:"secondary",a8nText:"popup-controls-cancel",onClick:this.onCancel,key:"ReportProductReasonPopup-cancelButton"},c.default.t(1558)),n={escape:this.onCancel},s=l.createElement("div",{className:f.default.buttons},r,a);return l.createElement(d.default,{handlers:n},l.createElement(p.default,{title:e,actions:s,children:t}))}}function v(e){var{reason:t}=e;switch(t){case"NO_MATCH":return l.createElement(u.default,{id:1168});case"SPAM":return l.createElement(u.default,{id:1172});case"ILLEGAL":return l.createElement(u.default,{id:1166});case"SCAM":return l.createElement(u.default,{id:1171});case"KNOCKOFF":return l.createElement(u.default,{id:1167});case"OTHER":return l.createElement(u.default,{id:1169});default:throw new Error(`Invalid reason: ${t}`)}}t.default=g,g.displayName="ReportProductReasonPopup",v.displayName="RadioLabelText"},51685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.getSelection().removeAllRanges();var t=document.getElementById(e),a=document.createRange();t&&a.selectNode(t),window.getSelection().addRange(a);try{var r=document.execCommand("copy");return window.getSelection().removeAllRanges(),r}catch(e){return!1}}},8451:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.supportsFeature(o.default.F.RICH_TEXT)?(0,n.default)(e,s,i.TextSerializer):e};var n=r(a(92591)),o=r(a(20468)),l=a(66207),i=a(89665),s=l.Configuration.ComposeBox()},4704:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProductLink=function(e,t){return`https://wa.me/p/${t}/${e}`},t.createCatalogLink=function(e){return`https://wa.me/c/${e}`}},16123:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.dayToWeekday=s,t.businessHoursFromConfig=d,t.getWebsiteLink=function(e){return`https://l.wl.co/l?u=${encodeURIComponent(e)}`},t.getBusinessHours=function(e){var{config:t}=e,a=(new Date).getDay();return o.DAYS_OF_WEEK.map(((e,r)=>{var n=(a+r)%o.DAYS_OF_WEEK.length,l=o.DAYS_OF_WEEK[n];return{day:s(n),hours:d(t[l]),first:0===r}}))},t.getBusinessHoursForEdit=function(e){var t,a=null==e?{}:e.config,{note:r,timezone:l}=e||{},s=o.DAYS_OF_WEEK.map(((e,r)=>{var o,l=a[e],s=n.default.weekdays(r);return l&&(t=l.mode,l.hours&&(o=l.hours.map((([e,t])=>[(0,i.minutesToTime)(e),(0,i.minutesToTime)(t)])))),{dayName:s,dayKey:e,closed:!l,hours:o}})),d=n.default.weekdays(!0,0),c=n.default.weekdays().indexOf(d),u=s.splice(c);return{mode:t,days:[...u,...s],timezone:l,note:r}},Object.defineProperty(t,"minutesToTime",{enumerable:!0,get:function(){return i.minutesToTime}}),Object.defineProperty(t,"timeStringToMinutes",{enumerable:!0,get:function(){return i.timeStringToMinutes}});var n=r(a(19034)),o=a(19999),l=r(a(38637)),i=a(24701);function s(e){return n.default.weekdays(e)}function d(e){switch(e&&e.mode){case o.BUSINESS_HOUR_MODES.SPECIFIC_HOURS:return e&&e.hours?e.hours.map((e=>e.map(i.minutesToTime).join(" - "))).join("\n"):"";case o.BUSINESS_HOUR_MODES.APPOINTMENT_ONLY:return l.default.t(289);case o.BUSINESS_HOUR_MODES.OPEN_24H:return l.default.t(301);default:return l.default.t(290)}}},24701:(e,t,a)=>{"use strict";var r=a(14859);Object.defineProperty(t,"__esModule",{value:!0}),t.minutesToTime=function(e){return n.default.utc().startOf("day").add(e,"minutes").format(o.default.timestampStrFormat())},t.timeStringToMinutes=void 0;var n=r(a(19034)),o=r(a(99461)),l=["h:mm A","h:mmA","HH:mm","HH.mm","H:mm","H.mm"];t.timeStringToMinutes=e=>{var t,a=e.trim();if(a){for(var r of l){var o=(0,n.default)(a,r,!0);if(o.isValid()){t=o;break}}if(t){var i=t,s=(0,n.default)().startOf("day"),d=i.diff(s);return n.default.duration(d).asMinutes()}}}},46769:(e,t,a)=>{"use strict";a.r(t),t.default={coverPhoto:"BjVR2",avatar:"s-Huo",statusBorder:"_1AY8D"}},33986:(e,t,a)=>{"use strict";a.r(t),t.default={cartIcon:"_1qWMP",inheritColor:"_3K64o"}},86861:(e,t,a)=>{"use strict";a.r(t),t.default={carousel:"_3m116",contentContainer:"_3cMDy",slidesContainer:"_2cRxw",loaded:"_3Zydn",fadeIn:"_2xyKO",spinnerContainer:"_1CPi2",spinner:"_1PMHA"}},68018:(e,t,a)=>{"use strict";a.r(t),t.default={slide:"_8a4tv",slideInnerContainer:"_1y2HL",image:"_1hnaE"}},13567:(e,t,a)=>{"use strict";a.r(t),t.default={canvasComponent:"_1ro-V",canvasEmpty:"_3c1OL",canvasSecondRow:"_2Xs8V",canvasFirst:"_3P68I",more:"PNuNq",container:"_1cYoo",justifySpaceBetween:"_1gCKS",galleryEmpty:"_3DvRi",drawer:"mcTjY",drawerBody:"_29OBB"}},13074:(e,t,a)=>{"use strict";a.r(t),t.default={mediaCanvas:"VxCaw",shade:"_3XoRJ",iconType:"_374SR",iconStar:"_1FpLJ",mediaCanvasDuration:"_2luhz",shadeTop:"_2edEe",canvasBody:"_2X1SH",canvasSelected:"_1c9lg",mediaSelect:"_3N2mq",canvasComponent:"i-d_o",canvasSecondRow:"cp_gI",viewerFlow:"_2C1Ns",active:"_3Wonb",viewerFlowTransparent:"r2CKG"}},30769:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1_JE6",disabled:"_3NolF",transparent:"_2aKEd",compact:"N5H41"}},33314:(e,t,a)=>{"use strict";a.r(t),t.default={labelRow:"_2hloF",labelContainer:"LM8mM"}},68214:(e,t,a)=>{"use strict";a.r(t),t.default={section:"QNaXM",control:"_1HA3p"}},11586:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2Vy7q"}},70860:(e,t,a)=>{"use strict";a.r(t),t.default={container:"kavRs",containerNoIcon:"zlwQO",containerListAligned:"_11qo-",icon:"_2icPj",danger:"_1nSxZ",success:"_3fgVF",bodyContainer:"_8b1xn",body:"CcY-B"}},21658:(e,t,a)=>{"use strict";a.r(t),t.default={mediaPanelTools:"_1mzr3",profileThumb:"_2ymsO",profileContainer:"_15Y88",media:"_1uZec",profileViewer:"_1ICk0",profileViewerImg:"_2SJ32",container:"wnsuI","media-viewer-animate":"_246ma",mediaViewerAnimate:"_246ma",headerContainer:"_3ZxL8"}},44887:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_2dmc2"}},67004:(e,t,a)=>{"use strict";a.r(t),t.default={icon:"_1zI6H"}},66063:(e,t,a)=>{"use strict";a.r(t),t.default={container:"_3C7uM",inputContainer:"_3t1iA",btnContainer:"_33FBx",btnPosition:"_327U5"}},66109:(e,t,a)=>{"use strict";a.r(t),t.default={chevron:"_1berR",catalogEntryButton:"_13-4W",subtitle:"_1PD3U"}},51487:(e,t,a)=>{"use strict";a.r(t),t.default={prompt:"cIJmt"}},66594:(e,t,a)=>{"use strict";a.r(t),t.default={linkIcon:"_3jcuF",inheritColor:"_2MHMC"}},89440:(e,t,a)=>{"use strict";a.r(t),t.default={linkContainer:"_1L_3T",activeLink:"_1AVcM"}},4472:(e,t,a)=>{"use strict";a.r(t),t.default={addItemButton:"_4_u5n",themeInList:"_-4hoU",themeDefault:"_Nlk2",addIcon:"_15qwJ"}},63226:(e,t,a)=>{"use strict";a.r(t),t.default={body:"mTISM",loadingContainer:"_2Equ3",text:"_2eQ68",loadingText:"_1VNye",shiftUp:"_2tBzv",availabilityBanner:"ui1Wc"}},6681:(e,t,a)=>{"use strict";a.r(t),t.default={buttonContainer:"wH6_k",button:"_1POe3",addToCartButton:"GwQ_R",addToCartIcon:"_1NZ6t",addToCartIconDisabled:"HaBJ0",addToCartContainer:"_2H01S",name:"_3cS4S",price:"_26-7d",originalPrice:"_3e7iJ",description:"_3UqWJ",more:"_2vhQd",descBlock:"_3gzPb"}},44209:(e,t,a)=>{"use strict";a.r(t),t.default={productImage:"_1TYUT",productImageContainer:"_36uCz",productThumb:"_3PTXX",productThumbContainer:"upbm-",prompt:"_1VACQ"}},60345:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_2fmIp",list:"_3XFr4"}},3220:(e,t,a)=>{"use strict";a.r(t),t.default={header:"_3RefK",photo:"_2jHS5",text:"_2-Z25",name:"_3cSuR",description:"YcVqS",spinner:"_2u-hv",img:"_3LS4W"}},57767:(e,t,a)=>{"use strict";a.r(t),t.default={imageCarouselContainer:"_1qhdr"}},46873:(e,t,a)=>{"use strict";a.r(t),t.default={buttons:"_2WN3T",button:"iYUH9"}},9320:(e,t,a)=>{"use strict";a.r(t),t.default={section:"_1xX0g",reasonList:"UaUFY",label:"_3clAO",input:"_1kt7B",buttons:"_2XakL"}}}]);